# StackOverflow 问答 15593000-15593999

# r - 如何为Windows上传由R中的文件夹组成的文件夹？我在每个文件夹中上传各种文本文件

> ID：15593001
> 
> 赞同：-1
> 
> 时间：2013-03-23T22:48:26.967
> 
> 标签：r, load

如何为 Windows 加载由 R 中的文件夹组成的文件夹？

我在每个子文件夹中有各种文本文件，我想一次性加载所有这些文件。请提出一个方便和简单的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:18:54.850

我假设“上传”是指“加载到`R`”。有几种方法可以做到这一点，以下是两种。请注意，第一步是拥有具有完整路径的正确文件列表（或在适当的文件中工作`wd`）

```
# Get the list of files
#----------------------------#
  folder <- "path/to/files"
  fileList <- dir(folder, recursive=TRUE)  # grep through these, if you are not loading them all

  # use platform appropriate separator
  files <- paste(folder, fileList, sep=.Platform$file.sep)

# Load them in
#----------------------------#
  # Method 1:
  invisible(sapply(files, source, local=TRUE))

  #-- OR --#

  # Method 2:
  sapply(files, function(f) eval(parse(text=f))) 
```

# stream - 相当于 on.event.remove 的流是什么

> ID：15593006
> 
> 赞同：1
> 
> 时间：2013-03-23T22:49:44.863
> 
> 标签：stream, dart

我有一些旧代码正在更新，但清洁工没有捡起它。

我成功地改变了以下内容：

```
document.on.mouseOut.add(onDocumentMouseOut); 
```

到

```
document.onMouseOut.listen(onDocumentMouseOut); 
```

但我不知道如何翻译：

```
document.on.mouseOut.remove(onDocumentMouseOut); 
```

什么是相当于删除的流？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:55:55.463

保留对[listen()返回的](http://api.dartlang.org/docs/releases/latest/dart_async/Stream.html#listen)[StreamSubscription](http://api.dartlang.org/docs/releases/latest/dart_async/StreamSubscription.html)对象的引用，并对其调用[cancel()](http://api.dartlang.org/docs/releases/latest/dart_async/StreamSubscription.html#cancel)方法。

```
// Add a handler
var subscription = document.onMouseOut.listen((e) => print('oi'));

// Remove the handler
subscription.cancel(); 
```

# php - Laravel 4 可以登录到 MySQL 数据库吗？

> ID：15593010
> 
> 赞同：11
> 
> 时间：2013-03-23T22:50:19.157
> 
> 标签：php, laravel, laravel-4, monolog

如果是这样，怎么办？默认情况下，L4 写入文本文件。我注意到 Monolog 可以在其[github](https://github.com/seldaek/monolog)页面上登录到数据库。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T10:34:11.510

是的，您可以创建一个侦听器来记录 routes.php 中的所有内容

```
Event::listen('laravel.log', function($type,$message)
{
    $log = new Log();
    $log->message = $message;
    $log->type = $type;
    $log->update;
}); 
```

或者，如果您只想记录错误 400 和 500，Larvavel 在 Routes.php 文件中有一个 Log 事件可以侦听错误 404 和 500，您可以在此事件侦听器中编写自己的代码。因此，假设您定义了一个名为 Log 的模型，

```
Event::listen('404', function()
{
    $error = "404: " . URL::full();
    Log::error($error);
    $update = new Log();
    $update->error = $error;
    $update->update;
    return Response::error('404');
});

Event::listen('500', function()
{
    Log::error($error);
    $update = new Log();
    $update->error = $error;
    $update->update;
    return Response::error('500');
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-24T11:32:34.033

如您进一步阅读标题所见，Monolog 原生支持写入 Redis、MongoDB 和 CouchDB。这三个都支持相当大量的写入（在 Redis 的情况下非常写入）用例。MySQL 不存在，因为记录到 MySQL 并不是世界上最好的主意。

如果您真的想这样做，您可以查看有关创建自己的处理程序的文档，其中解释了如何创建和使用 PDO 处理程序写入 SQL 数据库：[https ://github.com/Seldaek/monolog/blob /master/doc/extending.md](https://github.com/Seldaek/monolog/blob/master/doc/extending.md) - 我仍然认为这是一个坏主意，但也许用例需要它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-17T09:59:40.490

由于我在项目中有同样的需求，我为 Monolog 创建了一个处理程序，用于将日志输出写入 MySQL。它是在 MIT 许可下发布的，可以通过[composer](https://packagist.org/packages/wazaari/monolog-mysql)或直接在[GitHub 上](https://github.com/waza-ari/monolog-mysql)获得。可能值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-03T11:29:18.690

在 laravel 5 现在是`illuminate.log`

现在它会像

```
Event::listen('illuminate.log', function($type,$message)
{
    ....
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-12T09:20:59.177

对于那些想知道如何使用 5.6 到 7.x 的 laravel/lumen 的人

1.  作曲家需要 wazaari/monolog-mysql
2.  编辑文件 config/logging.php 如下

```
<?php

use MySQLHandler\MySQLHandler;

...

    'channels' => [
        'stack' => [
            'driver'   => 'stack',
            'channels' => ['daily', 'mysql'],
        ],
        ...

        'mysql' => [
            'driver' => 'monolog',
            'level' => 'debug',
            'handler' => MySQLHandler::class,
            'with' => [
                'pdo' => app('db')->connection()->getPdo(),
                'table' => 'table-name',
            ],
        ] 
```

# asp.net - 如何在 asp.net 中删除 id=selection_bubble 的 div 标签

> ID：15593017
> 
> 赞同：0
> 
> 时间：2013-03-23T22:51:01.987
> 
> 标签：asp.net

我在 asp.net 中有一个网页，我在浏览器中看到了这个网页。当我在我的 chrome 浏览器中转到“检查元素”时，我看到一个`div`带有`id=selection_bubble`before end标签的`body`标签。这是什么以及如何创建它以及如何删除它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T22:33:38.897

作为标签的孩子，我也刚刚遇到了一个`div`with `id="dic_bubble"`and in chrome。和你一样，我搜索了我的项目文件，一无所获。其他浏览器也没有.`class="selection_bubble"``body``div`

它与 chrome 扩展程序相关，因此不应影响您的用户网站。

要自己删除`div`，请禁用 chrome“Dictionary.com 扩展”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-11T09:21:08.717

这是因为您的 chrome 上安装了一些扩展程序。如果您想检查是否是因为扩展，只需在 chrome 中打开一个隐身（私人）标签，然后再次进入您的页面。不同之处在于在隐身选项卡中禁用了扩展。当我遇到这个问题时，我在隐身标签中打开了我的页面，问题就消失了。所以请确保这是因为扩展，用户不会遇到这个问题。（要打开隐身标签，请单击 chrome 右上角的三个点，然后单击“新隐身标签”）我希望我能提供帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T23:09:25.140

确保在搜索时选中“整个解决方案”并且您正在搜索所有文件类型。也可以尝试搜索选择和另一个气泡，以防它在某处连接。

# python - def python错误重复

> ID：15593018
> 
> 赞同：-1
> 
> 时间：2013-03-23T22:51:03.577
> 
> 标签：python, python-3.x, function

虽然我输入了一个数值，但它仍然给我一个错误。我不知道为什么会这样..帮助别人？

```
def is_string(s):
    rate = input(s)
    try:
        str.isalpha(rate)
        print('There was an error. Please try again. Make sure you use numerical values and alpabetical. ')
        return is_string(s)  #ask for input again
   except:
        return rate
ExRate = is_string('Please enter the exchange rate in the order of, 1 '+Currency1+' = '+Currency2)

def is_string2(msg):
    amount = input(msg)
    try:
        str.isalpha(amount)
        print('There was an error. Please try again. Make sure you use numerical values. ')
        return is_string2(msg)  #ask for input again
    except:
        return amount
Amount = is_string2('Please enter the amount you would like to convert:') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T22:57:50.567

你在寻找这样的东西吗？

```
def get_int(prompt, error_msg):
    while True:
        try:
            return int(input(prompt))
        except ValueError:
            print(error_msg)

rate = get_int(
    'Please enter the exchange rate in the order of, 1 {} = {}'
        .format(Currency1, Currency2),
    error_msg="Rate must be an integer")
amount = get_int(
    'Please enter the amount you would like to convert:',
    error_msg="Amount must be an integer") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T22:54:36.130

我不确定你为什么要使用异常，什么时候应该使用 if 语句：

```
def is_string(s):
    rate = input(s)
    if str.isalpha(rate):
        print('There was an error. Please try again. Make sure you use numerical values and alpabetical. ')
        return is_string(s)  #ask for input again
    else:
        return rate
ExRate = is_string('Please enter the exchange rate in the order of, 1 '+Currency1+' = '+Currency2)

def is_string2(msg):
    amount = input(msg)
    if str.isalpha(amount):
        print('There was an error. Please try again. Make sure you use numerical values. ')
        return is_string2(msg)  #ask for input again
    else:
        return amount
Amount = is_string2('Please enter the amount you would like to convert:') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T23:04:11.623

您不应该使用 try 语句，而且我认为您不应该使用 isalpha()。isnumeric() 测试数字有效性。isalpha() 将为“%#-@”之类的字符串返回 false。

```
while True:
    s = input("Enter amount: ")
    if s.isnumeric():
        break
    print("There was a problem. Enter a number.") 
```

# python - Python Celery Task.update_state 可能永远阻塞

> ID：15593019
> 
> 赞同：0
> 
> 时间：2013-03-23T22:51:04.097
> 
> 标签：python, celery, amqp

我正在使用 Celery current_task 来更新任务进度。它在 99% 的时间内工作，然后将无限期挂起。带有 RabbitMQ 后端的 celery 3.0.x

```
current_task.update_state(state=state,
            meta= { 'progress' : progress }) 
```

[更新]

所以 celery amqp 后端似乎出现了死锁，

```
def _store_result(self, task_id, result, status, traceback=None):
    """Send task return value and status."""
    with self.mutex:
        with self.app.amqp.producer_pool.acquire(block=True) as pub:
            .......... 
```

调查解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:56:39.033

看起来这是kombu连接池限制的问题，能够通过从默认值增加broker_pool_limit来解决这个问题

```
BROKER_POOL_LIMIT=100 
```

# r - `as.matrix` 和 `as.data.frame` S3 方法与 S4 方法

> ID：15593021
> 
> 赞同：6
> 
> 时间：2013-03-23T22:51:22.613
> 
> 标签：r, methods, s4

我注意到为 S4 类定义`as.matrix`或`as.data.frame`作为 S3 方法可以使例如开箱即用`lm (formula, objS4)`。`prcomp (object)`如果它们被定义为 S4 方法，这将不起作用。

为什么将方法定义为 S3 或 S4 方法很重要？

示例`as.data.frame`：

```
setClass ("exampleclass", representation (x = "data.frame"))
object <- new ("exampleclass", x = iris)

setMethod ("as.data.frame", signature="exampleclass", definition= function (x, ...) x@x )
## [1] "as.data.frame"

as.data.frame (object)
## Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1            5.1         3.5          1.4         0.2     setosa
## 2            4.9         3.0          1.4         0.2     setosa
## 3            4.7         3.2          1.3         0.2     setosa
## ...snip...

lm (Petal.Length ~ Petal.Width, object)
## error in as.data.frame.default(data) : 
##   cannot coerce class 'structure("exampleclass", package = ".GlobalEnv")' into a data.frame

as.data.frame.exampleclass <- function (x, ...) x@x

lm (Petal.Length ~ Petal.Width, object)
## Call:
##   lm(formula = Petal.Length ~ Petal.Width, data = object)
## 
## Coefficients:
##   (Intercept)  Petal.Width  
## 1.084        2.230 
```

由于情况可能有点复杂，`lm`只有在从数据构造的环境中评估公式时才会发生强制，所以这里有一个更简单的情况，具有相同的行为：

```
setMethod ("as.matrix", signature="exampleclass", definition= function (x, ...) as.matrix (x@x[, 1:4]) )
prcomp (object)
## error in as.vector(data) : 
##   No method to coerce this S4 class into a vector
as.matrix.exampleclass <- function (x, ...) as.matrix (x@x [, 1:4])
prcomp (object)
##   Standard deviations:
##     [1] 2.0562689 0.4926162 0.2796596 0.1543862
##   
## Rotation:
##   PC1         PC2         PC3        PC4
## Sepal.Length  0.36138659 -0.65658877  0.58202985  0.3154872
## Sepal.Width  -0.08452251 -0.73016143 -0.59791083 -0.3197231
## Petal.Length  0.85667061  0.17337266 -0.07623608 -0.4798390
## Petal.Width   0.35828920  0.07548102 -0.54583143  0.7536574 
```

在这里，`stats:::prcomp.default`被称为，它以一个普通的`x <- as.matrix (x)`. 上述 S4 定义失败，但适用于 S3 定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:21:11.787

我从简单明确`lm`地调用的评论中得到它。`as.data.frame`如果你看`as.data.frame`：

```
> as.data.frame
function (x, row.names = NULL, optional = FALSE, ...) 
{
    if (is.null(x)) 
        return(as.data.frame(list()))
    UseMethod("as.data.frame")
}
<bytecode: 0x29140b8>
<environment: namespace:base> 
```

您会看到它调用了 S3 泛型，并且来自[方法文档](http://stat.ethz.ch/R-manual/R-patched/library/methods/html/Methods.html)

> 如果直接调用 S3 泛型函数，则不会单独看到 S4 方法。但是，>原始函数和运算符是例外：当且仅当对象是 S4 对象时，内部 C 代码才会查找 S4 >方法。在示例中，`[`将始终为此类的对象调用 for >class "myFrame" 的方法。

# java - 不是“本地主机”套接字网络示例

> ID：15593024
> 
> 赞同：1
> 
> 时间：2013-03-23T22:52:01.210
> 
> 标签：java, sockets

您可能听说过[Bucky 的](http://www.youtube.com/watch?v=qEcztLI84A4)使用 Java 套接字网络的 Instant Messenger 教程。`127.0.0.1`一个简短的总结是，他正在使用IP 地址在客户端和服务器之间创建连接。一切都对我有用，但是当我尝试更改代码并将其放在两台单独的计算机（客户端和服务器）上时，它只是没有建立连接。我究竟做错了什么？

服务器代码

```
import java.io.*;
import java.net.*;
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;

public class Server extends JFrame{

private JTextField userTextField;
private JTextArea chatWindow;
private ObjectOutputStream output;
private ObjectInputStream input;
private ServerSocket server;
private Socket connection;

//constructor
public Server()
{

    super("My Instant Messenger");
    userTextField = new JTextField();
    userTextField.setEditable(false);

    userTextField.addActionListener(new ActionListener(){
     public void actionPerformed(ActionEvent event)
     {

        sendMessage(event.getActionCommand());
        userTextField.setText("");

     }
    }
    );

    add(userTextField, BorderLayout.NORTH);
    chatWindow = new JTextArea();
    add(new JScrollPane(chatWindow));
    setSize(300,150);
    setVisible(true);
}

//set up and run the server

public void startRunning(){
 try{

  server = new ServerSocket(6789,100);
  while(true)
  {
      try{

          waitForConnection();
          setupStreams();
          whileChatting();

      }catch(EOFException e){
       showMessage("\n Server ended the connection! ");  
      }finally{
       closeCrap();  
      }
  }

 }catch(IOException e){
  e.printStackTrace();
 }

}

//wait for connection, then display connection information
private void waitForConnection() throws IOException{
    showMessage(" Waiting for someone to connect... \n");
    connection = server.accept();
    showMessage(" Now Connected to " + connection.getInetAddress().getHostName());
}

//get stream to send and receive data
private void setupStreams() throws IOException{

    output = new ObjectOutputStream(connection.getOutputStream());
    output.flush();

    input = new ObjectInputStream(connection.getInputStream());
    showMessage("\n Streams are now setup! \n");

}

//during the chat coversation
private void whileChatting() throws IOException{
    String message = "You are now connected!";
    sendMessage(message);
    ableToType(true);
    do{
        try{
            message = (String) input.readObject();
            showMessage("\n " + message);
        }catch(ClassNotFoundException e){
            showMessage("\n idk wtf that user sent!");
        }
    }while(!message.equals("CLIENT - END"));
}

//close streams and sockets after you are done chating
private void closeCrap(){
    showMessage("\n Closing connection... \n");
    ableToType(false);
    try{

        output.close();
        input.close();
        connection.close();

    }catch(IOException e){
        e.printStackTrace();
    }
}

//send a message to client
private void sendMessage (String message){
    try{

        output.writeObject("SERVER -  " + message);
        output.flush();
        showMessage("\nSERVER - " + message);

    }catch(IOException e){
        chatWindow.append("\n ERROR: DUDE I CANT SEND THAT MESSAGE!");
    }
}    

//update chatWindow
private void showMessage(final String text){
    SwingUtilities.invokeLater(
    new Runnable(){
    public void run(){
        chatWindow.append(text);
    }
    }
    );
}

//let the user type stuff into their box
private void ableToType(final boolean tof){
    SwingUtilities.invokeLater(
    new Runnable(){
    public void run(){
        userTextField.setEditable(tof);
    }
    }
    );
}

public static void main(String[] args){
    Server sally = new Server();
    sally.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    sally.startRunning();
}

} 
```

客户代码

```
import java.io.*;
import java.net.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Client extends JFrame{
private JTextField userTextField;
private JTextArea chatWindow;
private ObjectOutputStream output;
private ObjectInputStream input;
private String message = "";
private String serverIP;
private Socket connection;

//constructor
public Client(String host){

    super("Client");
    serverIP = host;
    userTextField = new JTextField();
    userTextField.setEditable(false);
    userTextField.addActionListener(
        new ActionListener(){
            public void actionPerformed(ActionEvent event){
                sendMessage(event.getActionCommand());
                userTextField.setText("");
            }
        }
    );
    add(userTextField, BorderLayout.NORTH);
    chatWindow = new JTextArea();
    add(new JScrollPane(chatWindow), BorderLayout.CENTER);
    setSize(300,150);
    setVisible(true);
}

//connect to server
public void startRunning(){
    try{
        connectToServer();
        setUpStreams();
        whileChatting();
    }catch(EOFException e){
        showMessage("\n Client terminated connection");
    }catch(IOException e){
        e.printStackTrace();
    }finally{
        closeCrap();
    }
}

//connect to server
private void connectToServer() throws IOException{
    showMessage("Attempting connection... \n");
    connection = new Socket(InetAddress.getByName(serverIP), 6789);
    showMessage("Connected to: " + connection.getInetAddress().getHostName());
}

//set up streams to send and receive messages
private void setUpStreams() throws IOException{
    output = new ObjectOutputStream(connection.getOutputStream());
    output.flush();
    input = new ObjectInputStream(connection.getInputStream());
    showMessage("\n Dude your streams are now good to go! \n");
}

//while chating with server
private void whileChatting() throws IOException{
    ableToType(true);
    do{
        try{
            message = (String) input.readObject();
            showMessage("\n" + message);
        }catch(ClassNotFoundException e){
            showMessage("\n i dont know that object type");
        }
    }while(!message.equals("SERVER - END"));
}

//close the streams and sockets
private void closeCrap(){
    showMessage("\n closing crap down...");
    ableToType(false);
    try{
        output.close();
        input.close();
        connection.close();
    }catch(IOException e){
        e.printStackTrace();
    }
}

//send messages to server
private void sendMessage(String message){
    try{
        output.writeObject("CLIENT - " + message);
        output.flush();
        showMessage("\nCLIENT - " + message);
    }catch(IOException e){
        chatWindow.append("\n something messed up sending message host!");
    }
}

//update chatWindow
private void showMessage(final String message){
    SwingUtilities.invokeLater(
        new Runnable(){
            public void run(){
                chatWindow.append(message);
            }
        }
    );
}

//gives user permission to type crap into the text box
private void ableToType(final boolean tof){
    SwingUtilities.invokeLater(
        new Runnable(){
            public void run(){
                userTextField.setEditable(tof);
            }
        }
    );
}

public static void main (String[] args){
    Client charlie;
    charlie = new Client("127.0.0.1");
    charlie.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    charlie.startRunning();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:36:11.827

在 IPv4 和 v6 平台上运行时，问题在于 Java 本身。

尝试将您的 serverSocket 绑定到 IPv4 地址，`"0.0.0.0"`这意味着该主机上的所有 IP 都可用，或者使用您在客户端代码中拥有的 IP（`192.168.x.x`）

像这样

```
server = new ServerSocket(6789, 100, InetAddress.getByName("0.0.0.0")); 
```

# php - file_get_contents 返回一些维基百科页面的奇怪字符，为什么？

> ID：15593028
> 
> 赞同：5
> 
> 时间：2013-03-23T22:52:26.760
> 
> 标签：php, file-get-contents

我已经完成了大多数解决方案，但它们都不起作用。

我尝试使用 file_get_contents 解析 Wikipedia 页面，但返回值因页面中我尚未弄清楚的内容而异。

例如，当我将它与此页面一起使用时，[http](http://en.wikipedia.org/wiki/Word) ://en.wikipedia.org/wiki/Word它工作正常，但是当我将它与此页面一起使用时[http://en.wikipedia.org/wiki/David_A._Kolb](http://en.wikipedia.org/wiki/David_A._Kolb)它返回stage字符..

我猜这两页都是一样的。

可能是什么问题呢 ？

更新 1

这是我得到的：

```
î²$'ˆ‰ÃBÿ—¾XP·o€Ô%4aºäÇ$ÊãÔ¼s¾w>ÈÙfb%¾ Â“p£+Ïü J£x&6ç>vŸŠ$B­fbðzÊ~ìð¥³ˆè`lƒW{·²±Ÿd³žç"U™ðrÉ¥ý4ÃŠ'ú™,N—î, ¢©ª3/U+þÔGQãDý|A*¬iœø=céOy(èO€O‡ù4O3ø Ãvi_éÉ_/£K]x¢‘~~(Cp†(Q€!A£Ë±í‘åÀr\9¨N%G‘¼¸äav-ÍÁÖe€.ˆK¨È*Å/`ºøÏÄRž„¸ÔÞÉ‰œÁ'PQ‚€Ç©Å!¿Ô$g•f|œêbT-< ŸLÑUÌ` ¡Òâ4–L¢0Èv'Ö­SA€a?(Ù œ‚n÷ç€Pj°Ï4ê18·&À3þcXfÕ3pb éÌ:õ ”š˜egfTCã¦$Nñ˜Êó1õ^”æãÀO‹¹f‘«~Ø€Ø.°ñéyt!kñí­½ÉXôzÀåºÛ»Û[wl¹Ûã‡{Ûn¿+·S1½§ ráõËàEs?EÆIóå“¬Äè  3e,™K´Ô€`‘(Ï‘Zû©–q%$à ¯ÖDÄ @k5Ó¬þì§9ô ~rüÑó-Ï@{ÅFÒF ƒ—Ï­}Æ~`Kæâú1ÚŠJ2ér”OJäü˜Ã.zç ÜŸ‰ ¦§äMÀø<ÕL•$íL©Ö)¿v´€8„ÊÄqÁ·¡ƒC&_`~È–Ð’E!™zÔCŒŠÈ¶Pï³ë9 Éµaµ «' U¢„šY… E¸ç%V!N9ãÁ:º$iËòŠ¯™ªÀ€-…ž©0eÈªpê¥-¡hè³$="0   ²|>G-§Ð/Ê9'/ÂhJ>Í‚àY‚¸çQ‰?G¸üŸ±  B‚¡I5 ¨Îä|]/,„bA³©÷FdÑêßQÔAÊ‘*Á¦¨˜i†d•¡c^.ÒRÐLÔê˜¢,ŠÛ„}"…igÓI\/áÝ]üøsTwà­DH…"i°€PWI´€¦ýMå¨Sí%G„)y"º/´(,þ˜âKÙß“%ð”v‘4HUNÚ“ù­´:| m>Ò\a_Ò,g  ] !a4Ëƒ2ÇHÀ¾vÀiŒB×¥"Ø‡Ä•ê‚!½qÄý{ªÈÞ5UJ°¯•‚rý¶Ö¬"Ü[Ô^ÒrK,GYCiàçõÂóJÅˆšµÂ2&QÕt(5T 7 wv"å,¬06dI¹Os¶Ë3i‡•[#Á îÕÚªÃ•UujçåfµäÚ"èÑÒ—Œ‡žiZ5@dã1Ø6.”‹ZîÔ£b’•-Ð]²–tûq¯ÕI©ÊÖR+ÍÇ†í§­…·0[M”USoIì´±m<’˜KªÕŠp<çÁìr”LÓ†b•7‘Vºñ–ºÄ¥Ï‰E“eT,m¹º/Óna\É‚^A‡ª¤_+Ùª•l×Jvj%j%»µ’½ZÉÃZI¯[/ªCÝ«ƒÝ«ÃÝ«Þ«CÞë6Ùm³[‡¿×…¬U—k»¾ÛÛõåØm˜ënÃd÷úõ÷úÅÒI-»¥]Û„Ïª¬æ·+ŸEÙºOŠ’Â—n—t»t¾<KT3(½çÑçÍOøßÆ£ÕúM†Fo³z#«”vƒì@È|ÿZr3U¦}MÈÓì¢_àþˆî`!¶wLvxÿAOìî=Üív» ÃÆãÝÉdÒwû¾c©x×¸]ÕàŸõwN\@6ÑV~^˜Y-ê€¿Ñ¯ÜTÇ?ò+‡´fhKWÊ‘r¥È*ãs4FŒ²D(Cz{[FbÛ0íL½ƒá„ÒøhyB¯ !Í·¤ØÞÂ >‘QtP^j+fáßDJdÞÓQ…”{Â`Âþ½Vë?aAÆNž°ÝC\Pá.4G;nš:Ãqä-?Å (äI°Ž1-´}·e¢¼ŠÓtäâ‹3ôj´    Ú ²:Ÿµ»ÿÞ;ÐýÉ‡V¦ ÂÕ8†h›ýÈ†ÏOZø&×Åÿœ@3Ž¶-å§#7C Z&£„-”L‰&gt;‚*™‰ç|   F‰3\ûæ›}Ï¿d¾£.¤¨Á4±õ0Š1N…k íªíöÛÃ"ëƒÛ]¨bó6t‰ëà0@Ø´ÇÆoö9µGÅzæ²ÌäcÚc4¥ð5-òZ `‚-)ŠóÈ‚ÿL¸®!á¥«è«$Ê:„$ìÈFcl®ésí›‚$É[³Î¾»ï¿Ûd¯bŸFSJ/ ù<�5s}ãûÌ€L,*1S!Ø:õ‰è*ÒÍŸIµÝLrÖ£9ÚufÊ…&amp;ç¦ƒ•N™&lt;Ï"§œW A5ârÏ«qp¬Á->*!D±òV£§¢^Ëø5m3ÇÒnåcgø4‰æ·Èð0ˆ á¬ö[ èþèû¨¨ð–­õW{ÍþGMÐNÉ¢z·XÞÊ¢*¥I`±^ŒŸà7Ë¢ìLyõœo-:CxÕŸ’}d²É*íâ–R‡ò¯¦¥oj³¨Àh*pƒÊÔ\¦DU×Bîé\—µcµÅâá>™ºÖWî™K•’5@_“Ým£Åª¿¬°­øê[ø^6ôûbþÓ\.Ý-ÃCó¶Æb‰Âªf%º1¾Ÿy €àNß@o:¡ 1Pê4 ‹y 7™èl}êb ™4%³[ô<Ñ°‡7üù”ñ€bðJøå1ExËâÏ8í:*™£#:¢Û©vNKpàô@Ác3.xØí“Ìƒßïd(r:YRŸíŒ¥n„âLð¦Ib’ÁG   .... (it goes on). 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T23:42:47.023

看起来像是对我的压缩响应。要获得纯文本响应，您可以使用[`gzopen()`](http://ua2.php.net/manual/ru/function.gzopen.php)+ [`gzread()`](http://ua2.php.net/manual/ru/function.gzread.php)：

```
$fp = gzopen('http://en.wikipedia.org/wiki/David_A._Kolb', 'r');

$contents = '';
while ($chunk = gzread($fp, 256000)) {
    $contents .= $chunk;
}

gzclose($fp); 
```

...或者您可以使用`file_get_contents()`，但强制服务器返回纯文本：

```
$context = stream_context_create(array(
    'http'=>array(
        'method' => "GET",
        'header' => "Accept-Encoding: gzip;q=0, compress;q=0\r\n",
    )
));

$contents = file_get_contents('http://en.wikipedia.org/wiki/David_A._Kolb', false, $context); 
```

...但并非所有服务器都考虑到这一点，所以我建议您使用[cURL](http://www.php.net/manual/ru/ref.curl.php)来完成您的任务：

```
function get_url($url)
{
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_ENCODING, 'gzip');
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

    $data = curl_exec($curl);

    curl_close($curl);

    return $data;
}

$data = get_url('http://en.wikipedia.org/wiki/Word');
$data = get_url('http://en.wikipedia.org/wiki/David_A._Kolb'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:56:21.793

这听起来可能是编码问题。尝试转换编码，看看是否有帮助。

```
mb_convert_encoding($wikitext, 'UTF-8',mb_detect_encoding($wikitext, 'UTF-8, ISO-8859-1', true)); 
```

[根据PHP.net](http://php.net/manual/en/function.file-get-contents.php)上的参考页面，该`file_get_contents`函数显然存在非 UTF-8 编码的一些问题，该函数在那里被推荐。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-23T23:22:26.390

使用这种格式：

```
file_get_contents(urlencode($url)); 
```

编辑1：

我使用下面的代码，它工作[http://phpfiddle.org/main/code/yej-xwa](http://phpfiddle.org/main/code/yej-xwa)

```
<?php
$url='http://en.wikipedia.org/wiki/David_A._Kolb';
echo file_get_contents($url);
?> 
```

# android - 在 Eclipse 中，AVD 停留在 Android 徽标上

> ID：15593038
> 
> 赞同：0
> 
> 时间：2013-03-23T22:53:59.847
> 
> 标签：android, android-emulator

我去我的`androidmanifest.xml`并单击运行>运行。AVD 出现`5554: Testing`并永久保留在 Android 徽标上。我还应该做些什么才能使它起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:01:22.563

我认为您应该在单击“运行”>“运行”之前打开一个 .java 文件。此外，模拟器的启动速度可能会很慢，所以给它足够的时间，它最终会显示解锁屏幕。

# jquery - AngularJs 和 AddThis 社交插件

> ID：15593039
> 
> 赞同：7
> 
> 时间：2013-03-23T22:54:05.017
> 
> 标签：jquery, angularjs, addthis

我正在尝试在 AngularJS 应用程序中使用 AddThis javascript Social 插件，但是当我使用 ng-view 加载部分时，它不会更新 addthis 插件图标。如果我刷新它的页面 (ctrl+F5) 。我认为 AngularJs 通过 Ajax 加载部分视图，在这种情况下 addthis 不会显示加载页面的社交图标。

这是索引代码：

```
<header>
       .....
</header>
<div>
     <section id="content" ng-view></section>
</div>
<footer id="footer" ng-controller="footerCtrl">
     ...
</footer> 
```

这是在部分标签中加载的部分视图，其中我有 addthis 图标：

```
<div class="ad-col" >
        <p ng-bind-html-unsafe="homeContent.promo.entradilla"></p>
        <br />
        <br />
        <!-- AddThis Button BEGIN -->
        <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
            <a class="addthis_button_facebook"></a>
            <a class="addthis_button_twitter"></a>
            <a class="addthis_button_linkedin"></a>
            <a class="addthis_button_google_plusone_badge"></a>
            <a class="addthis_button_pinterest_pinit"></a>
            <a class="addthis_button_compact"></a>
            <a class="addthis_counter addthis_bubble_style"></a>
        </div>
        <!-- AddThis Button END -->
    </div> 
```

当然，我在主页中有脚本参考 fot AddThis：

```
<script type="text/javascript">var addthis_config = { "data_track_addressbar": true };</script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5113c1e01aaacb3f"></script> 
```

我在 angularJs 参考之前有 jquery 脚本参考：

```
 <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js"></script> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-20T16:32:43.023

我创建了简单的 AngularJS 指令来刷新在动态包含的部分中定义的 AddThis 工具箱

```
angular.module('Directive.AddThis', [])

/**
 * AddThis widget directive
 *
 * Usage:
 *   1\. include `addthis_widget.js` in header with async=1 parameter
 *   <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=<pubid>&async=1"></script>
 *   http://support.addthis.com/customer/portal/articles/381263-addthis-client-api#configuration-url
 *   2\. add "addthis-toolbox" directive to a widget's toolbox div
 *   <div addthis-toolbox class="addthis_toolbox addthis_default_style addthis_32x32_style">
 *     ...       ^
 *   </div>
 */
.directive('addthisToolbox', function() {
    return {
        restrict: 'A',
        transclude: true,
        replace: true,
        template: '<div ng-transclude></div>',
        link: function ($scope, element, attrs) {
            // Dynamically init for performance reason
            // Safe for multiple calls, only first call will be processed (loaded css/images, popup injected)
            // http://support.addthis.com/customer/portal/articles/381263-addthis-client-api#configuration-url
            // http://support.addthis.com/customer/portal/articles/381221-optimizing-addthis-performance
            addthis.init();
            // Ajax load (bind events)
            // http://support.addthis.com/customer/portal/articles/381263-addthis-client-api#rendering-js-toolbox
            // http://support.addthis.com/customer/portal/questions/548551-help-on-call-back-using-ajax-i-lose-share-buttons
            addthis.toolbox($(element).get());
        }
    }
}); 
```

使用示例：

```
<html>
<head>
    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=<my-pubid>&async=1"></script>
</head>
<body>

  <!-- AddThis Button BEGIN -->
  <div addthis-toolbox class="addthis_toolbox addthis_default_style addthis_32x32_style">
      <a class="addthis_button_facebook"></a>
      <a class="addthis_button_twitter"></a>
      <a class="addthis_button_google_plusone_share"></a>
      <a class="addthis_button_compact"></a>
      <a class="addthis_counter addthis_bubble_style"></a>
      <script type="text/javascript">var addthis_config = { "data_track_clickback": false, "data_track_addressbar":false };</script>
  </div>
  <!-- AddThis Button END -->

</body>
</html> 
```

[addthis 站点](https://www.addthis.com/get/sharing)的默认小部件代码也应该可以工作，只需删除`&async=1`和`addthis.init()`.

您可以使用类似的方法来控制其他 addThis 函数，例如`addthis.button()`等`addthis.counter()`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-24T11:53:03.583

如果您使用的是新的 AddThis 仪表板配置，那么您只需将`addthis.layers.refresh()`（参见： http: [//www.addthis.com/academy/using-dashboard-configuration-tools-dynamically/](http://www.addthis.com/academy/using-dashboard-configuration-tools-dynamically/)）包装在指令中并添加到您的 div。

```
.directive('addthisToolbox', function() {
    return {
        restrict: 'A',
        transclude: true,
        replace: true,
        template: '<div ng-transclude></div>',
        link: function ($scope, element, attrs) {
            // Checks if addthis is loaded yet (initial page load)
            if (addthis.layers.refresh) {
               addthis.layers.refresh();
            }
        }
    };
}); 
```

HTML： `<div addthis-toolbox class="addthis_sharing_toolbox"></div>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-09T11:45:15.047

@antonpinchuk 的解决方案对我来说效果很好，它只是没有更新计数器......我在指令的末尾添加了以下行，现在一切都像一个魅力:)

```
addthis.counter($(element).children('.addthis_counter').get()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-14T19:48:02.157

想为 atonpinchuk 的答案添加一点。我们在应用程序中遇到的一个问题是，我们在各个页面上都有 addthis 按钮，并且希望 url 和标题因页面而异。我们有一个更新元标记的服务，但是因为 addthis 是使用我们主模板中的脚本启动的，所以 addthis 没有选择我们更改的元标记。

我们的解决方案是在我们的指令中使用共享配置，如下所述：http: [//support.addthis.com/customer/portal/articles/381263-addthis-client-api#configuration-sharing](http://support.addthis.com/customer/portal/articles/381263-addthis-client-api#configuration-sharing)

这样 addthis 会选择正确的 url 和标题。当然，如果你想完全模仿非客户端网站的社交分享功能，这只是成功的一半。您还需要编写自己的服务来更新头部的标签。然后你需要使用 phantomJS 来创建你网站的静态版本，并将 google、facebook 和其他爬虫重定向到它。

* * *

我们遇到的一个问题是按钮由于某种原因无法在 IE8 中呈现。还没想出解决办法。奇怪的是，如果您`addthis.init()`通过 HTML 在脚本标签中调用它，它会起作用，但这不适用于 SPA。也`addthis.init()`可用（即`!!addthis.init() == true`在指令中，所以我不确定它有什么问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-16T00:24:39.917

尝试：

```
`<script type="text/javascript">
    //always refresh on URL change
    window.addEventListener("hashchange", function () {
      addthis.layers.refresh();
    });
</script>` 
```

在调用下一个方法后，在您的 angular 指令或控制器 inyect de`$window`对象中：`$window.addthis.layers.refresh();`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-24T00:21:37.403

您可能需要将添加此脚本的脚本标记引用放在您的部分中。那将是最简单的解决方法。

发生的事情是在它们运行时，部分还没有加载，所以它们不会影响任何东西。

# asp.net - HTTP 错误 500.0 - 内部服务器错误

> ID：15593041
> 
> 赞同：0
> 
> 时间：2013-03-23T22:54:12.750
> 
> 标签：asp.net, entity-framework, iis-7, windows-server-2008, asp.net-4.0

大家好，感谢阅读我与 ASP.Net 的严重问题，这些天我浪费了我所有的时间，我用谷歌搜索并测试了每件事，但没有成功。我已经编写了一个网站，使用`VS2010Express`它在 localhost 中运行良好，但是当我将源代码复制到**共享主机**时，我收到了这个错误：

`HTTP Error 500.0 - Internal Server Error . The page cannot be displayed because an internal server error has occurred.`

```
Module  AspNetInitializationExceptionModule
Handler PageHandlerFactory-Integrated
Error Code  0x00000000 
```

我的项目的更多详细信息：

1.  我使用了实体框架 4.4.20627.0
2.  使用.net 4

这是我的 web.config 我认为可能有问题：

**编辑：**删除 web.config 内容！

这是 packages.config ：

**编辑：**删除 packages.config 内容！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:23:04.197

终于经过 2 天的谷歌搜索和 Stackoverflowing！我在寄宿文件中找到了答案。我的**共享主机（服务器）**支持多种语言，如 Php、Perl 以及各种版本的 Asp。所以问题是我的主机管理员已将**默认扩展**设置为 Asp.net 2 而我的是 Asp.net 4 。

由于我的主机面板是**WebsitePanel®** ，因此我按照以下步骤更改默认语言：

1.  登录到**WebsitePanel®**
2.  单击“Web”图标 -> “Web 站点”
3.  选择我的网站名称 -> www.blabla.com
4.  单击“扩展”选项卡，然后将 Asp.net2 更改为 Asp.net4（集成）
5.  单击“更新”按钮。
6.  完成的！现在一切正常。

希望对其他人有用并节省您的时间。

# css - 不可能在画布上添加伪元素？

> ID：15593043
> 
> 赞同：13
> 
> 时间：2013-03-23T22:54:33.033
> 
> 标签：css, html5-canvas

因此，我目前正在为 HTML5 游戏开发地图编辑器，在此过程中，我想向包含构建块缩略图的画布添加一些伪元素。但是经过一个小时的实验和谷歌搜索没有成功，我根本无法让伪元素出现，我尝试将 css 应用于 div 并且它出现了，所以我猜 canvas 元素有什么特别之处吗？

这是一个简单的例子，我已经设置了：http: [//jsfiddle.net/ZsHGE/](http://jsfiddle.net/ZsHGE/)

所以，我转向你，stackoverflow 上的所有知情人士，寻求答案，是否不可能将伪元素添加到画布元素？

```
HTML: 
<!-- No visible pseudo candy :( -->
<canvas class="gimmeSomePseudoCandy" width="50" height="50"> :( </canvas>

<!-- pseudo candy appears! :) -->
<div class="gimmeSomePseudoCandy"></div>

CSS: 
.gimmeSomePseudoCandy:after { content:"Candy"; } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-23T22:56:41.530

*被替换的元素*（例如`canvas`和`img`）目前不适用于伪元素。

> 笔记。本规范没有完全定义替换元素的交互`:before`和`:after`与[替换元素](http://www.w3.org/TR/CSS21/conform.html#replaced-element)（例如`IMG`在 HTML 中）的交互。这将在未来的规范中更详细地定义。

[资源](http://www.w3.org/TR/CSS21/generate.html#before-after-content)

# javascript - 面向对象的JS下拉列表？

> ID：15593045
> 
> 赞同：0
> 
> 时间：2013-03-23T22:54:45.960
> 
> 标签：javascript, drop-down-menu, html-select

我使用 OO JS 创建了一个按钮，稍后将用于更新某些内容。我还想在我的网络应用程序中添加一个下拉菜单/选择列表。我用于按钮的代码是：

```
 var AddButton = function(label){
    var _dom_element = document.createElement("input");
        _dom_element.type = "button";
        _dom_element.value = label;

        _dom_element.onclick = function(){
            //click_action.call(null);
            alert("Im Clicked");
        };
        this.getDomElement = function() {
            return _dom_element;
        }
    } 
```

如何更改此代码使其成为下拉菜单/选择列表？

我最好的猜测是 _dom_element.type = "select"; 或类似的东西，但是我不知道实际类型应该等于什么。

谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:05:40.850

你可以试试这个

```
var AddSelect = function(options){
    var _dom_element = document.createElement("select");

    for ( var i = 0; i < options.length; i++ ) {
        var _option = document.createElement("option");
            _option.value = options[i];
            _option.innerHTML = options[i];

        _dom_element.appendChild(_option);
    }

    document.body.appendChild(_dom_element);

    _dom_element.onclick = function(){
        //click_action.call(null);
        //alert("Im Clicked");
    };
    this.getDomElement = function() {
        return _dom_element;
    }
}

AddSelect(['option1', 'option2', 'option3']); 
```

[**演示**](http://jsfiddle.net/hn5Ws/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T19:08:51.823

```
var AddSelect = function(options){
    var _dom_element = document.createElement("select");

    for ( var i = 0; i < options.length; i++ ) {
        var _option = document.createElement("option");
            _option.value = options[i];
            _option.innerHTML = options[i];

        _dom_element.appendChild(_option);
    }

    document.body.appendChild(_dom_element);

    _dom_element.onclick = function(){
        //click_action.call(null);
        //alert("Im Clicked");
    };
    this.getDomElement = function() {
        return _dom_element;
    }
}

AddSelect(['option1', 'option2', 'option3']); 
```

# linux-kernel - 与 Devfreq 一起使用的 Zynq 时钟

> ID：15593046
> 
> 赞同：0
> 
> 时间：2013-03-23T22:54:47.767
> 
> 标签：linux-kernel, arm, linux-device-driver, zynq

我正在查看与 devfreq 电源管理一起使用的 exynos4_bus.c 驱动程序，以尝试为 Zynq SoC 上的外围设备开发类似的驱动程序。我关心的方法是这个：

```
static int exynos4210_set_busclk(struct busfreq_data *data, struct opp *opp)
{
        ...
        __raw_writel(tmp, EXYNOS4_CLKDIV_DMC0);
        ...

} 
```

在我看来，它`raw_writel`正在向 Exynos 时钟寄存器写入它应该运行的频率。该寄存器定义在`arch/arm/mach-exynos/include/mach/regs-clock.h`. 我现在正在寻找`arch\arm\mach-zynq\include\mach\zynq_soc.h`与 Zynq 设置等效的东西，但是正在定义相当多的时钟，所以我不确定我应该设置哪个时钟。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T13:30:36.300

Zynq 使用内核时钟框架。

包括声明：

```
#include <linux/clk.h> 
```

按名称获取所需时钟的句柄：

```
struct clk *fclk = clk_get_sys("FPGA0", NULL);
long requested_rate = 125000000; 
```

查找最近的支持频率：

```
long actual_rate = clk_round_rate(fclk, requested_rate); 
```

然后设置时钟频率：

```
 int status;
    if ((status = clk_set_rate(fclk, actual_rate))) {
        printk(KERN_INFO "[%s:%d] err\n", __FUNCTION__, __LINE__);
        return status;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-08T10:45:48.530

您可以直接通过其寄存器更改 Zynq FCLK。最简单的测试方法是直接使用busybox中的devmem写入地址。

FCLK_CLK0 Zynq 输出的寄存器名称为 FPGA0_CLK_CTRL。获取地址的可能解决方案是打开 SDK 并打开 ps7_init.html 并搜索寄存器。

位 0-7 选择时钟源（0x00 用于 IO_PLL、0x20 ARM_PLL、0x30 DDR_PLL）

第 8-15 位是第一个除数

位 16-19 保留

位 20-25 是第二个除数

示例：对于我的 Zynq-7000，我想要 28MHz，因此我有 DIV0=36，DIV1=1 并且想要使用 IO_PLL。您可以通过在时钟配置部分设置相应的 FCLK 来获取 Zynq 模块中的值并查看在高级时钟选项卡中。在 Linux 中设置它的命令是“devmem 0xF8000170 32 0x002401”。

# c++ - 在c ++中只重新堆放一个元素

> ID：15593048
> 
> 赞同：3
> 
> 时间：2013-03-23T22:54:55.163
> 
> 标签：c++, stl, heap, complexity-theory

我有一个建立在`vector`with上的堆`make_heap`。如果我只更改一个（现有）元素的值，是否有一种 O(log n) 的重新堆积方式，或者我必须`make_heap`再次调用整个元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T23:46:34.340

*给定一个您知道*的向量已经是一个堆，如果您决定更改埋在堆内的插槽中的单个项目，则将堆最小化重新填充到有效堆状态的步骤涉及以下内容：

1.  将修改后的元素与堆中的最后一个元素交换。
2.  从最后换入的元素执行“下推”。这涉及反复交换元素与其两个子元素中最大的元素，重复直到没有子元素或没有交换发生。注意：不要包含序列中的最后一个元素，它仍然是 #1 中的修改元素。
3.  进行决赛`push_heap(vec.begin(), vec.end())`。这会将修改后的元素堆积到正确的位置。

一开始可能看起来很复杂，但除了 #2 中的步骤之外，这里并没有什么特别之处。其余的只是您可能熟悉的常规堆操作。我希望这是有道理的。

**示例代码**

这是一种可能的实现方式。显然，您的需求可能会有所不同。我只是把它放在一起，所以我希望它至少有点指导意义：

```
#include <iostream>
#include <algorithm>
#include <iterator>
#include <vector>
using namespace std;

int main()
{
    // intialize random generator
    srand((unsigned)time(0));

    // will hold our heap
    vector<int> vec;
    for (int i=0;i<20;vec.push_back(++i));
    random_shuffle(vec.begin(), vec.end());
    cout << "Rand: ";
    copy(vec.begin(), vec.end(), ostream_iterator<int>(cout, " "));
    cout << endl;

    // make a maxheap
    less<int> cmp;
    make_heap(vec.begin(), vec.end(), cmp);

    // dump content to stdout
    cout << "Heap: ";
    copy(vec.begin(), vec.end(), ostream_iterator<int>(cout, " "));
    cout << endl;

    // pick an item in the heap to modify, for our purposes, vec[1]
    vector<int>::iterator it = vec.begin()+1;
    *it *=2;

    // swap with the last element, then push-down the swapped-in element
    //  until we find its rightful home.
    iter_swap(it, vec.end()-1);
    while (distance(it, vec.end()) > 1)
    {
        // leave if no more children
        size_t i = distance(vec.begin(), it);
        if (2*i+1 >= vec.size()-1)
            break;

        // have one child. might have two
        vector<int>::iterator itChild = vec.begin() + 2*i+1;
        if (itChild+1 < vec.end()-1)
        {
            if (cmp(*itChild, *(itChild+1)))
                itChild = itChild+1;
        }

        // no need to swap; we're done.
        if (!cmp(*it, *itChild))
            break;

        // dump "before" picture
        cout << " beg: ";
        copy(vec.begin(), vec.end(), ostream_iterator<int>(cout, " "));
        cout << endl;

        // swap values and move to swapped child.
        iter_swap(it, itChild);
        it = itChild;

        // dump "after" picture
        cout << " end: ";
        copy(vec.begin(), vec.end(), ostream_iterator<int>(cout, " "));
        cout << endl;
    }

    // now push_heap our new value, which is still hanging out
    //  at the end where we left it.
    push_heap(vec.begin(), vec.end(), cmp);

    // final dump        
    cout << "Last: ";
    copy(vec.begin(), vec.end(), ostream_iterator<int>(cout, " "));
    cout << endl;

    // verify make_heap likes what we made (should be the same).
    make_heap(vec.begin(), vec.end(), cmp);
    cout << "Heap: ";
    copy(vec.begin(), vec.end(), ostream_iterator<int>(cout, " "));
    cout << endl;    

    return EXIT_SUCCESS;
} 
```

**输出**

```
Rand: 15 14 8 5 1 17 10 13 3 20 11 19 6 4 9 2 18 7 12 16 
Heap: 20 18 19 17 16 15 10 13 12 14 11 8 6 4 9 2 5 3 7 1 
 beg: 20 1 19 17 16 15 10 13 12 14 11 8 6 4 9 2 5 3 7 36 
 end: 20 17 19 1 16 15 10 13 12 14 11 8 6 4 9 2 5 3 7 36 
 beg: 20 17 19 1 16 15 10 13 12 14 11 8 6 4 9 2 5 3 7 36 
 end: 20 17 19 13 16 15 10 1 12 14 11 8 6 4 9 2 5 3 7 36 
 beg: 20 17 19 13 16 15 10 1 12 14 11 8 6 4 9 2 5 3 7 36 
 end: 20 17 19 13 16 15 10 5 12 14 11 8 6 4 9 2 1 3 7 36 
Last: 36 20 19 13 17 15 10 5 12 16 11 8 6 4 9 2 1 3 7 14 
Heap: 36 20 19 13 17 15 10 5 12 16 11 8 6 4 9 2 1 3 7 14 
```

# android - Eclipse 模拟器不能以高分辨率 2080x1536 运行

> ID：15593049
> 
> 赞同：1
> 
> 时间：2013-03-23T22:54:57.243
> 
> 标签：android, eclipse, screen-resolution

我正在尝试使用 2080x1536 分辨率的 Eclipse 运行模拟器。我将内存大小设置为 500-1024MB，但它只是想启动。我只会黑屏。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T14:49:25.297

我可以通过选中“仿真选项”框中的“使用主机 GPU”选项来运行 1080x1920 仿真器。您可以通过 AVD 的“编辑”按钮到达那里。

之前只有黑屏。。。

！

# css - 带有导航栏和垂直对齐轮播的 twitter 引导布局？

> ID：15593052
> 
> 赞同：0
> 
> 时间：2013-03-23T22:55:44.560
> 
> 标签：css, twitter-bootstrap

如何使用 twitter bootstrap 完成以下布局：

顶部轮播的导航栏在屏幕中间对齐底部的一行文本？

![在此处输入图像描述](../Images/e9b4715e0d725b67fe0d5e0b72e5929e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:13:44.887

整体布局非常简单，所以我想你真正的问题是你的轮播的垂直对齐，你可以尝试这样的事情：

```
#carousel-outer{
    position: fixed;
    top: 50%;
    left: 50%;
    height: 0;
    width: 0;
    overflow: visible;
}
#carousel {
    height: 300px;
    width: 800px;
    margin: -150px 0 0 -400px;
    background: #000;
}

<div id="carousel-outer">
    <div id="carousel"></div>
</div> 
```

# objective-c - 如何在没有 Foundation 的情况下分配新对象？

> ID：15593056
> 
> 赞同：8
> 
> 时间：2013-03-23T22:56:16.857
> 
> 标签：objective-c, objective-c-runtime

我想在没有Foundation的情况下构建一个简单的Objective C程序。我试过：

```
#include <stdio.h>

@interface Foo{
    char * bar;
}
-(void)hello;
@end

@implementation Foo
-(void)hello {
    printf("Hello world!");
}
@end

int main(){
    Foo * foo = [Foo alloc];
    return 0;
} 
```

然后它告诉我`Foo may not respond to +alloc`...`autorelease called without pool`

如何在不使用`alloc`Foundation 的情况下初始化对象？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T00:06:17.670

`alloc`在不使用from Foundation的情况下创建新对象非常简单。Objective-C 运行时库本身提供了允许从类中分配对象并在以后释放它们的函数，因此您不需要额外的库来创建和销毁对象。

该函数`id class_createInstance(Class cls, size_t extraBytes)`接收一个类对象，从中分配一个新对象，和一个整数，它几乎总是为零，并返回一个新的实例`cls`。

类似地，该函数`id object_dispose(id obj)`接受一个 Objective-C 对象，调用每个 C++ 对象实例变量的 C++ 析构函数，删除现有的关联引用并释放它。

`class_createInstance`并且`object_dispose`都在`/usr/include/objc/runtime.h`.

因此，您可以实现自己的`+alloc`和`-dealloc`方法。您的程序将如下所示：

```
#include <stdio.h>
#include <objc/runtime.h>

@interface Foo{
    char * bar;
}
+(id)alloc;
-(void)hello;
@end

@implementation Foo
+(id)alloc {
    // Returns a new 'Foo' object. In this case, 'self' is a 'Foo' class object,
    // whose type is 'Class', as required by `class_createInstance`.
    return class_createInstance(self, 0);
}
-(void)dealloc {
    object_dispose(self);
}
-(void)hello {
    printf("Hello world!");
}
@end

int main(){
    Foo *foo = [Foo alloc];
    [foo hello];
    [foo dealloc];

    return 0;
} 
```

像往常一样编译它：

```
gcc Foo.m -o Foo -lobjc 
```

就这样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:59:04.847

你可以在没有 Foundation 的情况下编写 Objective C，但当然你最终可能会在某种程度上重新发明轮子。

正如 millimoose 所建议的，您可以使用[GNUStep Objective C runtime](https://github.com/gnustep/gnustep-libobjc2)。

有关详细信息，请参阅：

*   [http://jongampark.wordpress.com/2008/05/02/objective-c-without-cocoa/](http://jongampark.wordpress.com/2008/05/02/objective-c-without-cocoa/)
*   [如何在 Xcode 中创建一个简单的 Objective-C 命令行项目](https://stackoverflow.com/questions/2697883/how-do-you-create-a-simple-objective-c-command-line-project-in-xcode)
*   [https://softwareengineering.stackexchange.com/questions/101832/why-is-objective-c-not-widely-used-beyond-cocoa-environments](https://softwareengineering.stackexchange.com/questions/101832/why-is-objective-c-not-widely-used-beyond-cocoa-environments)
*   [如何将 Obj-C 2.0 与 GNUstep 一起使用？](https://stackoverflow.com/questions/4150675/how-does-one-use-obj-c-2-0-with-gnustep)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T23:07:07.237

您没有定义 alloc，因为您没有从作为基础的 NSObject 继承。

这里有两种情况：

1.  你认为这个基础是邪恶的，或者由于某种原因你不能使用它。
2.  你这样做是为了锻炼。

如果您不是第二种情况，也不是某些使基础无法使用的特殊情况，我会重新考虑您的选择。

但是，如果您不想使用基础，alloc 应该返回一个初始化了 isa 指针的对象。

# entity-framework - 根据两个表的PK创建一对一关系

> ID：15593063
> 
> 赞同：0
> 
> 时间：2013-03-23T22:56:39.670
> 
> 标签：entity-framework, visual-studio-2012, entity-framework-5

我对 Entity Framework（目前使用 EF5）和 vs2012 真的很陌生，并且很难弄清楚一些事情。

我有一个从我的数据库生成的 .edmx。它有两个表：`Item`和`3rdPartyItem`。简而言之，该`Item`表是所有公司项目的主表，而该`3rdPartyItem`表是用于保存项目附加属性的表。这个`3rdPartyItem`表是由一家外部公司创建的，并与他们的公司软件一起使用，所以我不能弄乱任何一张表。我要做的是在网格中显示项目列表，但我需要显示两个表的所有字段的组合。在 vs2012 中，如果我创建一个关系并将其设为“零对一”（因为对于 Item 表中的每条记录，3rdPartyItem 表中不一定必须有一个），vs 抱怨没有正确映射. 当我设置映射时，它会抱怨有多个关系。我做了一些研究，发现你不能用 2 个主键创建关系，所以我认为这就是问题所在。但是如何更改 .edmx 以便在代码中可以访问 Items 和 3rdPartyItem ，如下所示：

```
var items = dbContext.Items;
items.3rdPartyItem.SomeField <--field from 3rdPartyItem table. 
```

不太确定这是否可能，但如果是这样，那将非常非常有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:42:27.410

您正在寻找的是每个类型的表 (TPT) 映射继承。您可以在此处查看 MSDN 演练（尽管您希望您的基本类型是可实例化的）：

[http://msdn.microsoft.com/en-us/data/jj618293.aspx](http://msdn.microsoft.com/en-us/data/jj618293.aspx)

# matlab - 没有 for/while 循环的重叠时间间隔

> ID：15593066
> 
> 赞同：0
> 
> 时间：2013-03-23T22:56:51.733
> 
> 标签：matlab, intervals, overlapping, interval-intersection

问我问题的最好方法是通过一个明确的例子。考虑 2 个时间线（例如，以秒为单位的时间）A 和 B，其中每个时间线的间隔为：

```
intervals_a = 
   0 1
   1 4
   4 7
   7 9

intervals_b = 
   0 2
   2 3
   3 5
   5 8 
```

请注意，第一个 a 间隔与第一个 b 间隔重叠。第二个 a 间隔与第一个、第二个和第三个 b 间隔重叠，依此类推。

最终，我需要一个输出来显示与 b 间隔重叠的 a 间隔的索引，如下所示：

```
output = 
   1 1   \\ 1st a-interval overlaps 1st b-interval
   2 1   \\ 2nd a-interval overlaps 1st b-interval
   2 2   \\ 2nd a-interval overlaps 2nd b-interval
   2 3   \\ 2nd a-interval overlaps 3rd b-interval
   3 3   \\ etc...
   3 4
   4 4 
```

最大的挑战是：解决方案不能包含 for/while 循环（“为什么”无关紧要）。这可以使用向量/矩阵/数组/排序或其他工具有效地完成吗？MATLAB 实现将是完美的，但任何其他语言都可以。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:53:25.770

要查找重叠区间，您需要检查一个区间的开始时间或结束时间是否在另一个区间的边界内。要一次对所有间隔执行此操作，您可以使用[`bsxfun`](http://www.mathworks.com/help/matlab/ref/bsxfun.html)：

```
ovlp = @(x, y)bsxfun(@ge, x(:, 1), y(:, 1)') & bsxfun(@le, x(:, 1), y(:, 2)');
idx = ovlp(intervals_a, intervals_b) | ovlp(intervals_b, intervals_a)';
[row, col] = ind2sub(size(idx), find(idx));
output = [row, col]; 
```

### 例子

让我们看看这对您的示例是如何工作的：

```
intervals_a = [0 1; 1 4; 4 7; 7 9]
intervals_b = [0 2; 2 3; 3 5; 5 8] 
```

匿名函数`ovlp`检查`x`（即`x(:, 1)`）中的开始时间是否在 中给定的区间内`y`。因此，`ovlp(intervals_a, intervals_b)`产生：

```
ans =
     1     0     0     0
     1     0     0     0
     0     0     1     0
     0     0     0     1 
```

“1”表示interval_a 的开始时间落在interval_b 内的位置。行号是区间的索引，`intervals_a`列号是区间的索引`intervals_b`。

我们需要对开始时间执行相同的过程`intervals_b`以找到所有重叠间隔，并且我们在两个结果之间进行逻辑或：

```
idx = ovlp(intervals_a, intervals_b) | ovlp(intervals_b, intervals_a)' 
```

请注意，第二个结果被转置，以保持与`intervals_a`和 not对应的行`intervals_b`。得到的矩阵`idx`是：

```
idx =
     1     0     0     0
     1     1     1     0
     0     0     1     1
     0     0     0     1 
```

最后一步是将矩阵转换为和中的`idx`索引，因此我们获得 '1' 的行号和列号并将它们连接起来：`intervals_a``intervals_b`

```
[row, col] = ind2sub(size(idx), find(idx));
output = [row, col]; 
```

最终结果是：

```
output =
     1     1
     2     1
     2     2
     2     3
     3     3
     3     4
     4     4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:12:19.730

您想要 int_A 和 int_B 的索引 (ii,jj) 使得 int_A(ii,1) > int_B(jj,1) 和 int_A(ii,2)

```
NA = size(A_int,1);
NB = size(int_B,1);
ABlower= repmat(A_int(:,1),[1,NB]);
ABupper= repmat(A_int(:,2),[1,NB]);
BAlower= repmat(B_int(:,1),[1,NA])';
BAupper= repmat(B_int(:,2),[1,NA])';

inInt = find((ABlower>BAlower & ABlower < BAupper) | (ABupper>BAlower & ABupper<BAupper);
[ii,jj]=ind2sub([NA,NB], inInt); 
```

我现在无法访问 Matlab，但我相信这非常接近......

# database - ehcache 查询缓存未命中后禁用数据库往返？

> ID：15593072
> 
> 赞同：1
> 
> 时间：2013-03-23T22:57:50.707
> 
> 标签：database, hibernate, ehcache, roundtrip

我使用 hibernate + ehcache 和正确配置的缓存属性。在应用程序启动时，我们启动缓存并通过 ORM 向 DB触发*所有可能的查询。*如果出现“有效的参数组合”，这将非常有效 - 否则会导致缓存未命中，从而导致数据库往返。数据是纯静态的。

70% 的情况是未命中，因此如果缓存未命中可以在查询/实体级别上得到不同的处理，我们可以获得很多。

如果在预热后发生缓存未命中，有没有办法阻止休眠 + ehcache 进入数据库？休眠中是否有API挂钩？

在理想情况下，缓存预热后根本不执行任何数据库访问。

TIA

坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:44:45.527

考虑到您的配置，您有几个选择：

*   在 Ehcache 级别终止
*   在休眠级别终止
*   在 JDBC 级别终止

免责声明：下面提到的都不是完整的解决方案——事实上，它们可能无法实现。但我会从那里开始挖掘。

我不认为在 Ehcache 级别可以做很多事情，因为如果元素不存在，缓存层会简单地返回`null`，Hibernate 会收回控制权并从数据库中获取条目。你*可以*返回一些预定义的值（你知道它是无效的并且意味着不存在），但这有点代码味道。

在 Hibernate 级别，您可以定义一个[拦截器](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html)来响应`LoadEvent`. 不确定这是否可以应用于查询。

与 Hibernate 类似，您可以使用[JDBC 拦截器](http://www.tomcatexpert.com/blog/2010/04/19/building-extensions-jdbc-pool)。这可能并不理想，因为您仍然会有 Hibernate 开销，但这仍然比等待数据库往返要好得多（我想每个请求大约 50 毫秒？）。

# perl - 在 foreach 循环内调用子例程 N 次

> ID：15593073
> 
> 赞同：-1
> 
> 时间：2013-03-23T22:57:56.657
> 
> 标签：perl, hash, for-loop, reference, subroutine

我有两个对应于以下文件的数组散列（HoA）：

```
A   10  15  20  25
B   21  33  21  23
C   43  14  23  23
D   37  45  43  49 
```

这是我的HoAs。

```
my %first_HoA = (
       'A'     => [ '10', '15', '20', '25'],
       'B'     => [ '21', '33', '21', '23'],
     );

 my %second_HoA = (
       'A'     => [ '10', '15', '20', '25'],
       'B'     => [ '21', '33', '21', '23'],
       'C'     => [ '43', '14', '23', '23'],
       'D'     => [ '37', '45', '43', '49'],
     ); 
```

对于第二个 HoA (AD) 中的每个 $key，我想调用一个子程序，对它的相应数组和第一个 HoA (AB) 中的**每个$key 的数组进行计算。**根据计算，子例程应该从产生最高值的第一个 HoA 返回一个键。换句话说，应该只为第二个 HoA 中的每个 $key 调用子例程，并返回第一个 HoA 中的 $key，该 $key 基于对第一个 HoA 中键的数组的计算产生最佳值。

这就是我现在的方式。假设我有一个名为的任意子例程`calculate`

```
my $iterations = 1;
foreach my $key ( keys %second_HoA ) {

    for my $arrayref (values %first_HoA){
        calculate($first_HoA{$key}, $arrayref);
        print "Iteration: $iterations\n";
        $iterations++;
    }
} 
```

如您所见，这调用了`calculate`8 次。我只想调用`calculate`每个 $key `%second_HoA`4 次，但我还需要传入 以`$arrayref`在子例程中进行计算。

有谁知道我该怎么做？

我正在考虑这样做的另一种方法是传递 first_HoA 的 hash_ref ，如下所示：

```
foreach my $key ( keys %second_HoA ) {
    calculate($second_HoA{$key}, \%first_HoA);
    print "Iteration: $iterations\n";
    $iterations++;
} 
```

这样做会调用`calculate`4 次，这是我想要的，但这会使子程序中的事情变得复杂。

有什么建议么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:03:40.220

你说`calculate($second_HoA{$key}, \%first_HoA)`“使事情复杂化”，但我不明白这怎么可能。在我看来，这是您需要的最少信息，而且格式方便。

任何更少的事情都会使事情复杂化，因为您将无法获得进行计算所需的信息。

# iphone - 显示数组中的所有对象？

> ID：15593080
> 
> 赞同：0
> 
> 时间：2013-03-23T22:58:58.253
> 
> 标签：iphone, arrays, sdk, imap, mailcore

我将在这里快速切入正题，我正在使用 MailCore API 连接到电子邮件并将消息下载到一个数组中，然后将这些消息放入数组中并将它们显示到一个表格视图中。

这是将从服务器下载所有消息的代码（从 MailCore 官方网站检索）：

```
messageSet = [inbox messagesFromUID:1 to:0 withFetchAttributes:CTFetchAttrEnvelope]; 
```

基本上，这将从服务器下载所有消息，我可以通过使用 NSLog 报告 Array 的内容来确认这一点，所有消息都在那里。

现在这里是只接受第一条消息（索引 0）并将其添加到我的消息数组的代码：

```
 CTCoreMessage *msg = [messageSet objectAtIndex:0];
    BOOL isHTML;
    isHTML = YES;

    messages = [[NSMutableArray alloc] init];
    sendernames = [[NSMutableArray alloc] init];

    [messages addObject:[msg bodyPreferringPlainText:&isHTML]];
    NSString *sender = [NSString stringWithFormat:@"%@", [msg sender]];

    [sendernames addObject:sender];
    [tableView reloadData]; 
```

因此，这再次获取索引 0 处的消息，这是第一条消息，并将其添加到消息数组中。我也有代码可以获取发件人姓名并将其添加到发件人数组中，忽略它。

这是我的 cellForRowAtIndexPath 方法中的代码（只是我为单元格上的元素设置的值的剪辑）：

```
cell.nameText.text = [sendernames objectAtIndex:0];
cell.messageText.text = [messages objectAtIndex:0]; 
```

如您所见，它显示索引为 0 的对象，即第一条消息，与我们之前添加的相同。

最后，这是设置我有多少行的代码。它基于下载所有消息的 messagesSet 数组。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [messageSet count];
} 
```

我的问题是，如何修改我的代码来做两件事：

1.) 将所有已下载的对象添加到数组中，而不仅仅是第一个。2.) 修改 cellForRowAtIndexPath 代码以显示消息数组中的所有对象。

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:40:00.970

那么首先你遍历数组并填充你的数组

```
for (CTCoreMessage *msg in messageSet) {
    [messages addObject:[msg bodyPreferringPlainText:&isHTML]];
    NSString *sender = [NSString stringWithFormat:@"%@", [msg sender]];
    [sendernames addObject:sender];
} 
```

然后在行的单元格中做你正在做的事情，而不是在索引传递时为对象传递 0：indexPath.row

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:54:55.540

支持您的表格的模型实际上是 messageSet。您将其分配给服务器调用的结果。只需在您的委托方法中使用它：

1.  下载后调用`[self.tableView reloadData];`
2.  `numberOfRowsInSection:`能够`return messageSet.count;`
3.  `cellForRowAtIndexPath:`将为每个可见的 indexPath 依次调用。它不需要处理所有消息，一次只处理一个，通过`[messageSet objectAtIndex:indexPath.row];`

# java - 写入后如何清除 PrintWriter 的内容

> ID：15593086
> 
> 赞同：10
> 
> 时间：2013-03-23T22:59:21.957
> 
> 标签：java, servlets, printwriter

晚上好，我想知道如何清除写入 PrintWriter 的数据，即是否可以在打印后从 PrintWriter 中删除数据？

在这个 servlet 中，我将一些文本打印到响应中，并在 # 表示的行处，我想删除所有以前打印的数据并打印新的东西：

```
protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    PrintWriter out = response.getWriter();
    String uName = request.getParameter("uName");
    String uPassword = request.getParameter("uPassword");

    if (uName .equals("Islam")) {
        out.println("Valid-Name");
        if (uPassword !=null) {
            if (uPassword .equals("Islam")) {
                // # clear the writer from any printed data here
                out.println("Valid-password");
            } else {
                out.println("");
                out.println("InValid-password");
            }
        }
    } else {
        out.println("InValid-Name");

    }

} 
```

注意：我尝试了 out.flush() 但旧的打印文本仍然存在

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T23:13:20.973

`PrintWriter`使用`StringWriter`. _ 如果需要，您可以从中获取底层缓冲区`StringWriter`并清除它。

```
StringWriter sr = new StringWriter();
PrintWriter w = new PrintWriter(sr);

w.print("Some stuff");
// Flush writer to ensure that it's not buffering anything
w.flush();
// clear stringwriter
sr.getBuffer().setLength(0);

w.print("New stuff");

// write to Servlet out
w.flush();
response.getWriter().print(sr.toString()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T07:03:59.890

`HttpServlteResponse.resetBuffer()`将清除缓冲的内容。但是是的，如果响应已经刷新到客户端，它将抛出`IllegalStateException`. 因为在向客户端发送部分响应后清除是非法的。

> **重置缓冲区…………**
> 
> void resetBuffer()
> 清除响应中底层缓冲区的内容，而不清除标头或状态代码。如果已提交响应，则此方法将引发 IllegalStateException。

**参考：**

[Servlet“响应已提交”的原因](https://stackoverflow.com/questions/11305563/cause-of-servlets-response-already-committed)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T23:05:28.777

您不能使用`PrintWriter`从响应中获得的原始数据来执行此操作，因为它由`OutputStream`与客户端连接对应的实际数据支持。你在那里写的东西通过电线直接进入浏览器（经过一些缓冲），所以你不能“把它拿回来”。

你能做的就是把你的信息写在一些`StringBuilder`地方，一旦你知道它很好，就把它写到`PrintWriter`.

如果您希望将此逻辑应用于多个地方（透明地），您可以考虑编写一个过滤器，将原始响应包装在一个`HttpServletResponseWrapper`返回“假”的响应中，`OutputStream`或者`PrintWriter`在实际通过网络发送之前执行此检查。

```
public class CensorshipFilter implements Filter {
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        HttpServletResponse httpServletResponse = (HttpServletResponse) response;
        CensorshipResponseWrapper wrapper = new CensorshipResponseWrapper(httpServletResponse);
        chain.doFilter(request, wrapper);
        String output = wrapper.sw.toString();
        if ( output.contains("Some forbidden pattern") ) { // your check goes here
            // throw exception or whatever
        } else { // write the whole thing
            httpServletResponse.getWriter().write(output);
        }
    }

    @Override
    public void destroy() {
    }

    static class CensorshipResponseWrapper extends HttpServletResponseWrapper {
        private final StringWriter sw = new StringWriter();

        public CensorshipResponseWrapper(HttpServletResponse response) {
            super(response);
        }

        @Override
        public ServletOutputStream getOutputStream() throws IOException {
            // you may also fake the output stream, if some of your servlets use this method
            return super.getOutputStream();
        }

        @Override
        public PrintWriter getWriter() throws IOException {
            return new PrintWriter(sw);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-15T08:15:37.173

最终对我有用的是改变我输出数据的逻辑。

[![在此处输入图像描述](../Images/12a148dce20a4dfc630d7e36530fab95.png)](https://i.stack.imgur.com/aNJpV.gif)

这是我输出的数据结构，它使用 html 表单中的文本作为输入存储搜索结果。

```
private final TreeMap<String, ArrayList<SearchResult>> searchResults; 
```

所以我正在迭代这个数据结构的内容并将其打印到 html 中。

```
public void writeSearchResultsToHtml(PrintWriter writer)
{
    try
    {
        JSONTreeWriter. writeSearchResultsToHtml(searchResults, writer);
    } catch (ArithmeticException | IllegalArgumentException | IOException | NoSuchElementException e)
    {
        System.err.println("Unable to write the search results builder to JSON to the file html.");
    }

    // clear results for next search otherwise
    // the next search will contain the previous
    // results, store them in history.
    searchResults.clear();
} 
```

考虑到我的 servlet 设置，清除数据结构效果很好。

这是我的主要 serverlet 循环逻辑：

```
public void startServer()
{
    // seed the database for testing
    crawler.startCrawl("http://cs.usfca.edu/~cs212/birds/birds.html");
    index.toJSON("index.json");

    // type of handler that supports sessions
    ServletContextHandler servletContext = null;

    // turn on sessions and set context
    servletContext = new ServletContextHandler(ServletContextHandler.SESSIONS);
    servletContext.setContextPath("/");
    servletContext.addServlet(ViewServlet.class, "/");

    // default handler for favicon.ico requests
    DefaultHandler defaultHandler = new DefaultHandler();
    defaultHandler.setServeIcon(true);

    ContextHandler defaultContext = new ContextHandler("/favicon.ico");
    defaultContext.setHandler(defaultHandler);

    // setup handler order
    HandlerList handlers = new HandlerList();
    handlers.setHandlers(new Handler[]{defaultContext, servletContext});

    openWebBrowser();

    // setup jetty server
    Server server = new Server(portNumber);
    server.setHandler(handlers);
    try
    {
        server.start();
        server.join();
    } catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

# python - django.core.exceptions.ImproperlyConfigured：加载 MySQLdb 模块时出错：

> ID：15593087
> 
> 赞同：5
> 
> 时间：2013-03-23T22:59:28.263
> 
> 标签：python, django, mysql-python

我正在关注 django 教程，很多人都问过这个问题，但我认为我的情况有点独特，因为在安装 python-mysql 后，当我尝试执行 python manage.py syncdb 时仍然出现此错误，

我在 virtualenv 中，因为我使用 macports 来管理我的 python 安装我创建了我的 virtualenv

```
virtualenv code/vdjango --no-site-packages --python=/opt/local/bin/python 
```

在此之前使用 macports 我安装了 django `py27-django`，但是在创建了我的 virtualenv 之后，我认为将 django 安装到 virtualenv 上会更好，所以我使用了`pip install django==1.5`

根据 django 教程，我编辑了我的 settings.py 文件，然后执行 python manage.py syncdb，我最终得到以下错误：

```
[~/code/vdjango/newsite]$python manage.py syncdb
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/django/core/management/__init__.py", line 453, in execute_from_command_line
    utility.execute()
  File "/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/django/core/management/__init__.py", line 392, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/django/core/management/__init__.py", line 272, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/django/core/management/__init__.py", line 77, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 8, in <module>
    from django.core.management.sql import custom_sql_for_model, emit_post_sync_signal
  File "/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/django/core/management/sql.py", line 9, in <module>
    from django.db import models
  File "/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/django/db/__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/django/db/utils.py", line 93, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/django/db/utils.py", line 27, in load_backend
    return import_module('.base', backend_name)
  File "/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 17, in <module>
    raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: dlopen(/Users/mac-pro/code/vdjango/lib/python2.7/site-packages/_mysql.so, 2): Library not loaded: libmysqlclient.18.dylib
  Referenced from: /Users/mac-pro/code/vdjango/lib/python2.7/site-packages/_mysql.so
  Reason: image not found 
```

为了确认我已经安装了 python-mysql 包，我再次运行了 pip install，

```
(vdjango)mac-pro@localhost:[~/code/vdjango/newsite]$pip install python-mysqldb
Downloading/unpacking python-mysqldb
  Could not find any downloads that satisfy the requirement python-mysqldb
No distributions at all found for python-mysqldb
Storing complete log in /Users/mac-pro/.pip/pip.log 
```

那么这里发生了什么？看起来我拥有进一步学习本教程所需的一切，但有些 python/django 抱怨没有 mysqldb。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-09-15T16:09:22.003

我的 libmysqlclient.18.dylib 位于 /usr/local/mysql/lib/ 但我的系统正在 /usr/lib/ 中寻找它。我最终在 /usr/lib 中创建了 libmysqlclient.18.dylib 的符号链接，从而解决了这个问题。

### 1.) 确保 libmysqlclient.18.dylib 存在于 /usr/local/mysql/lib/ 中。

打开你的外壳。

```
sudo -s
ls /usr/local/mysql/lib/ | grep libmysqlclient.18.dylib 
```

您应该看到该文件：

```
libmysqlclient.18.dylib 
```

如果没有，请在您的系统中搜索文件的位置：

```
find / -name libmysqlclient.18.dylib 
```

### 2.) 在 /usr/lib 中创建 libmysqlclient.18.dylib 的符号链接

在您的 shell 中输入以下命令：

```
ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib 
```

如果您的 libmysqlclient.18.dylib 文件不在 /usr/local/mysql/lib 中，请将第一个路径替换为 libmysqlclient.18.dylib 的正确路径。

希望这会有所帮助。

# java - Java中的多线程同步

> ID：15593090
> 
> 赞同：0
> 
> 时间：2013-03-23T23:00:13.610
> 
> 标签：java, arrays, multithreading, synchronization

嗨，我在我的程序中运行多个线程，每个线程包含 6 个元素的数组。我在线程的运行方法中添加了同步，但只有第一个线程是同步的，以从 1 到 6 的顺序显示数组。

```
/* My run method for the thread */
public synchronized void run(){
    int from = St7.stt[acnt].getCf();
    int to = St7.stt[acnt].getCt();
    int inc = St7.stt[acnt].getCi();
    threadsRunning++; // We now have more threads 
    this.threadId = threadsRunning;
    active = true;
    try{
        int loop = from;
        while (active && loop <= to){

            System.out.println(text + " Counter: " + St7.stt[acnt].getCounter() + ".");
            System.out.println();
            Thread.sleep(sleep);
            loop=loop+inc;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:20:48.037

据我了解，您希望线程的结果与它们被调度的顺序相同，如果这是正确的，[Callable](https://blogs.oracle.com/CoreJavaTechTips/entry/get_netbeans_6)接口可能会帮助您：它允许您在多个线程中执行，但您也可以获得每个线程的返回按照您执行它们的顺序执行线程（检查[here](https://stackoverflow.com/questions/9632960/java-executorservice-with-callables-invokeall-and-future-get-results-in)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:09:35.690

我不确定我是否理解这个问题，并且变量命名不佳也无济于事，但似乎您正在创建 StudentThread 类的 N 个实例，它们的`run()`方法都已同步。

这不会阻止多个线程同时调用 run 方法，因为它们都在*单独*的对象上同步。为了实现互斥，所有线程必须在一个*唯一*对象上同步，该对象应该封装必须防止并发访问的共享状态。

# for-loop - 批处理帮助 - 删除文件夹名称中括号之间的字符串

> ID：15593093
> 
> 赞同：0
> 
> 时间：2013-03-23T23:00:22.343
> 
> 标签：for-loop, batch-file, cmd

尝试生成一个批处理文件来查看目录（G：Videos）并通过删除括号之间的任何内容（包括括号本身）来重命名子文件夹。

例子：

G:视频

*   \文件夹（文本 1）
*   \另一个文件夹（LettersOnly）
*   \2013（字 2）
*   \示例 2

理想的解决方案将产生：

G:视频

*   \文件夹
*   \另一个文件夹
*   \2013
*   \示例 2

我想安排它在每天的某个时间运行，因为新文件夹每天都会被添加到带有括号的目录中。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:38:03.930

试试这个：

```
pushd "g:\videos"
for /d %%i in (*.*) do for /f "delims=(" %%j in ("%%~i") do if "%%~i" neq "%%~j" echo ren "%%~i" "%%~nj"
popd 
```

`echo`如果输出正常，请删除。

# ios - Xcode - 滑动标签栏？

> ID：15593094
> 
> 赞同：0
> 
> 时间：2013-03-23T23:00:26.890
> 
> 标签：ios, xcode, uiscrollview, storyboard, tabbar

是否有关于滑动标签栏应用程序的在线教程？我进行这项研究已经有一个多星期了。我想使用此功能，而不是在主屏幕上显示“更多”选项卡。iOS“千足Krutch”应用程序有这个功能，所以我知道Apple确实允许这种功能。

如果没有在线，有人可以向我解释如何制作一个吗？如果这是一个优势/劣势，我会（轻微地）使用故事板。我主要在视图控制器 .m 文件中编写详细信息，但对于情节提要，我使用物理视图控制器，在我遵循在线教程（Ray Wenderlich，Geeky Lemon）时 D&D 一些细节。

我的布局很简单：“UITabController >> UINavigationController >> ViewController”。

谢谢大家！-TG52

# android - Android 测试项目的常用实用程序类

> ID：15593095
> 
> 赞同：5
> 
> 时间：2013-03-23T23:00:32.347
> 
> 标签：android, android-library, android-testing

我在四个单独的项目中对我的 Android 项目进行测试：单元测试和功能测试分开，以及需要原生 Android 环境的测试（活动/服务测试、功能性 Robotium 测试）与我认为可以在人工环境中安全运行的测试（Robolectric + 一些针对非严格 Android 库的验收测试）。但是，我需要在一些项目之间共享一些实用程序类（主要是指 Android 测试工具包，但如果我也可以在 Robolectric 下使用它们会很好）。

我该如何解决这个问题？我应该使用存根 android.jar 作为依赖项创建一个 Android 库还是一个简单的 JAR？我已经尝试了这两种解决方案，但遇到了奇怪的错误，例如`NoClassDefFoundError`支持库`IllegalAccessError: Class ref in pre-verified class resolved to unexpected implementation`中的类或测试项目中的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T13:41:06.420

这种方法，“一个以存根 android.jar 作为依赖的简单 JAR”，看起来更简单。在您的测试项目中，除了将此 JAR 作为依赖项包括在内，如果您使用的是 Eclipse，则需要在项目属性的“Java Build Path”的“Order and Export”选项卡中选中此 JAR 的复选框。

# python - python 列表切片的功能真的是不对称的吗？

> ID：15593104
> 
> 赞同：1
> 
> 时间：2013-03-23T23:01:44.550
> 
> 标签：python, arrays, list, slice, symmetry

考虑以下代码：

```
>>> a = [0, 1, 2]
>>> for i in range(len(a)):
>>>   print a[0:i]

[]
[0]
[0, 1] 
```

但是，当我翻转代码以从列表的另一端获取切片时，它不再起作用：

```
>>> for i in range(len(a)):
>>>   print a[-i:]

[0, 1, 2]
[2]
[1, 2] 
```

使第二段代码工作的唯一方法似乎是反转列表，按照第一种方式进行，然后在打印之前反转每一段。有一个更好的方法吗？我有时会使用这种类型的循环，我希望我的代码尽可能干净。

编辑：在两个循环中，我从左到右迭代。如果我也为第二个循环翻转迭代方向，它就可以工作。如果我翻转第一个循环的迭代方向，它也有与第二个循环相同的打嗝：

```
>>> for i in range(len(a)):
>>>   print a[i-1::-1]

[2, 1, 0]
[0]
[1, 0] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T23:03:19.457

第一次迭代，您将切片为`-0`，这与从 切片相同`0`。只有第二次迭代你切片为`-1`, then `-2`。

也许您可以使用从负索引开始的范围：

```
for i in range(-len(a), 0):
    print a[-i:] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:14:23.183

由于基于 0 的索引，反向切片在 Python 中不能完全对称。具体来说，不可能将 -0 与 0 区分开来。但是基于 0 的索引数组中的对称访问用例将规定，如果第 0 项是从左起第一个，那么第 -0 项（即负 0) 是从右数第一个，但由于 0 和 -0 是同一个实体，这会带来问题。

考虑列表索引的两个方向：

**前进：**第一项在位置 0，第二项在位置 1，...，最后一项在位置 n-1

**向后：**第一项在位置-1，第二项在-2，...，最后一项在位置-n

因此，负索引表示法是(length-index)的*简写：*`collection[-i] == collection[len(collection) - i]`

或者，并排，索引是：

```
[0, 1, 2,...,n-1]
[-n,..., -3, -2, -1 ] 
```

上述两个指数实际上是相同的。

要执行对称操作，您的切片运算符需要正确考虑此索引方案：

**原始切片**：`a[0:i]`== 从左端（0 处）开始的 i 个元素，步长为 1 ==`a[0:i:1]`

**反向切片**：从右端（-1）开始的 i 个元素，步长为*-1*。

因此，另一端的正确切片将是`a[-1:-1-i:-1]`

请注意，此处的停止值是 i 的负数，偏移 -1 以说明基于 -1 的反向索引，这是必要的，因为我们使用基于前向的列表（例如 range 函数）生成 i。

```
a = range(3) # [0,1,2]
for i in range(len(a)):
    # forward case, next to backward case
    print a[:i], a[-1:-1-i:-1]
# [] []
# [0] [2]
# [0, 1] [2, 1] 
```

# xslt - 在 XSLT 中提取单引号之间的文本

> ID：15593106
> 
> 赞同：4
> 
> 时间：2013-03-23T23:02:50.487
> 
> 标签：xslt

需要提取**单引号**后的文本。

例如：

```
<div>('show')</div> 
```

变量是这样的：

```
<xsl:variable name="showName" select="substring-before(substring-after(//x:div, '%28%27'), '%27%29')" /> 
```

结果是无，[编码字符](http://www.vermontdatabase.com/cloudwriter/url_encoding.htm)。

我认为它不能用于**%28%27**和**%27%29**。这是对的？。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T23:49:03.863

**XSLT 1.0**：

**只需使用**：

```
 <xsl:variable name="vshowName" select=
 'substring-before(substring-after(/*, "&apos;"), "&apos;")'/> 
```

**这是一个完整的转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:variable name="vshowName" select=
 'substring-before(substring-after(/*, "&apos;"), "&apos;")'/>

 <xsl:template match="/*">
  <xsl:value-of select="$vshowName"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<div>('show')</div> 
```

**产生了想要的正确结果**：

```
show 
```

* * *

**XSLT 2.0**：

**在 XSLT 2.0 中，可以使用以下两种方法之一：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:variable name="vPattern">
  ^[^']*'([^']*)'.*$
 </xsl:variable>

 <xsl:variable name="vshowName1" select="replace(/*, $vPattern, '$1', 'x')"/>

 <xsl:variable name="vshowName2" select=
 'replace(/*, "^[^&apos;]*&apos;([^&apos;]*)&apos;.*$", "$1", "x")'/>

 <xsl:template match="/*">
  <xsl:value-of select="$vshowName2"/>
===============
  <xsl:value-of select="$vshowName1"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（上图）时，两个 XPath 表达式的求值产生相同的结果**：

```
show
===============
show 
```

**请注意**：

如果您想*使用单个 Xpath 表达式*（`xsl:analyze-string`不需要）来提取/处理用引号括起来的*所有*子字符串（其中可能存在无限数量的此类子字符串），请参阅此答案：

[https://stackoverflow.com/a/15402185/36305](https://stackoverflow.com/a/15402185/36305)

**最后，使用[`xsl:analyze-string`](http://www.w3.org/TR/xslt20/#analyze-string)**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <xsl:analyze-string select="." regex="'(.*?)'">
   <xsl:matching-substring>
     <xsl:sequence select="regex-group(1)"/>
   </xsl:matching-substring>
  </xsl:analyze-string>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<div>('word1', 'word2', 'word3')</div> 
```

**产生正确的结果**：

```
word1 word2 word3 
```

**此代码（来自另一个答案）是错误的**：

```
<xsl:analyze-string select="//div" regex="'(.*)'">
  <xsl:matching-substring>
    <xsl:value-of select="regex-group(1)"/>
  </xsl:matching-substring>
  <xsl:non-matching-substring>
    <xsl:value-of select="."/>
  </xsl:non-matching-substring>
</xsl:analyze-string> 
```

**当应用于上述 XML 文档时，它会产生：**

```
(word1', 'word2', 'word3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:32:58.430

### 技术

如果您熟悉[正则表达式](http://www.regular-expressions.info/reference.html)，您也可以使用[`<xsl:analyze-string>`](http://www.w3.org/TR/xslt20/#analyze-string).

### 代码示例

提取单引号之间的内容。`regex-group(1)`稍后使用)引用该内容：

```
<xsl:analyze-string select="//x:div" regex="'(.*)'">
  <xsl:matching-substring>
    <xsl:value-of select="regex-group(1)"/>
  </xsl:matching-substring>
  <xsl:non-matching-substring>
    <xsl:value-of select="."/>
  </xsl:non-matching-substring>
</xsl:analyze-string> 
```

# php - Symfony2 SonataAdminBundle Google Chrome ERR_RESPONSE_HEADERS_TOO_BIG

> ID：15593107
> 
> 赞同：1
> 
> 时间：2013-03-23T23:02:50.637
> 
> 标签：php, google-chrome, sonata-admin, symfony-2.2

在开发环境中使用 Syfony 2.2，试图显示 SonataAdminBundle 的列表视图。我在 Google Chrome 中收到错误 325 / **ERR_RESPONSE_HEADERS_TOO_BIG 。**在 Safari 和 Firefox 中没有问题。这只发生在开发环境和每个列表视图中，编辑视图都可以。

通过 curl 检查了标题，看起来不错：

```
curl -I http://project.local/app_dev.php/admin/project/site/user/list

HTTP/1.1 200 OK
Date: Sat, 23 Mar 2013 22:47:37 GMT
Server: Apache/2.2.24 (Unix) mod_ssl/2.2.24 OpenSSL/1.0.1e DAV/2 PHP/5.3.22
X-Powered-By: PHP/5.3.22
Set-Cookie: PHPSESSID=hgfp4kdmjtl9neodli2d83e1i0; path=/
Cache-Control: no-cache
X-Debug-Token: 514e3109e09ae
Content-Type: text/html; charset=UTF-8 
```

禁用 XDebug 和 APC，但那里没有变化。非常感谢任何指点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:46:09.797

检查您的 config_dev.yml 以获取以下行并注释它们。

```
#chrome:
 #type:  chromephp
 #level: info 
```

为什么会出现此错误？它支持某种 chrome 的调试器，例如 firefox 中的 firephp ... [http://www.chromephp.com/](http://www.chromephp.com/)

问题是由于服务器上的配置设置，响应标头太大而无法打印出信息。如果您在服务器配置中增加允许的大小，问题也会消失。

# android - 如何在应用程序声音中添加静音/取消静音的切换按钮

> ID：15593113
> 
> 赞同：-1
> 
> 时间：2013-03-23T23:04:20.753
> 
> 标签：android, audio, toggle, mute

如何添加切换按钮以使应用程序中的所有声音静音/取消静音，最好是有关如何操作的视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:45:54.257

```
public class MyActivity extends Activity {
    private boolean _myAudioToggle;
    onCreate(Bundle savedInstanceState) {
        // ...
        _myAudioToggle = false; // audio is off, set to true to default to on
        setAudio(_myAudioToggle);
        Button button = (Button) findViewById(R.id.yourButton); // where yourButton is in your layout XML file
        button.setOnClickListener(new View.onClickListener {

            @Override
            onClick(View v) {
                _myAudioToggle = !_myAudioToggle;
                setAudio(_myAudioToggle);
            }
        });
        // ...
    }
    // ...
} 
```

Create a method called setAudio() that takes a boolean value and sets the audio :)

```
private void setAudio(boolean audioToggle) {
    // your code to toggle the audio
} 
```

# asp.net-mvc - EditorFor HTML Helper with knockout

> ID：15593114
> 
> 赞同：5
> 
> 时间：2013-03-23T23:04:36.800
> 
> 标签：asp.net-mvc, knockout.js, html-helper

我认为拥有 EditorFor HTML 助手的扩展版本会非常有用，它会自动为 Knockout JS 写出值数据绑定。

这适用于客户端视图模型和服务器端视图模型相同的情况——我已经通过使用 ko 映射并通过 AJAX 获取视图模型来自动生成客户端视图模型。

有没有其他人尝试过这样的事情，或者是否有任何项目包含类似于我在这里的想法？

这样做的好处是，在重构时不会有丢失数据绑定值的危险。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T02:32:03.080

我们已经按照这些思路做了一些事情，它远非完美，我们在自定义扩展中还有更多，但我提取了本质。

```
using System.Web.Mvc.Html;

namespace System.Web.Mvc
{
    public static class EditorForExtensions
    {
        public static MvcHtmlString TextBoxForViewModel<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression)
        {
            ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);

            var htmlAttributes = HtmlAttributesForKnockout(metadata);

            return htmlHelper.TextBoxFor(expression, htmlAttributes);
        }

       private static Dictionary<string, object> HtmlAttributesForKnockout(ModelMetadata metadata)
        {
            var htmlAttributes = new Dictionary<string, object>();

            var knockoutParameter = String.Format("value: {0}", metadata.PropertyName);

            htmlAttributes.Add("data-bind", knockoutParameter);

            return htmlAttributes;
        }
    }
} 
```

然后可以像这样使用它：

```
@Html.TextBoxForViewModel(m => m.Name) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T14:47:52.250

想要将 htmlAttributes 重载添加到上面乍得的答案中，以供任何希望将其放入并使其正常工作的人。所有其他助手都可以很容易地从这些示例中构建出来。（感谢乍得，您的扩展帮助我轻松过渡到使用淘汰赛！）

```
using System.Collections.Generic;
using System.Linq.Expressions;
using System.Web.Mvc.Html;

namespace System.Web.Mvc {
    public static class KnockoutExtensions {
        public static MvcHtmlString KnockoutTextBoxFor<TModel, TProperty>( this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression ) {
            var metadata = ModelMetadata.FromLambdaExpression( expression, htmlHelper.ViewData );
            var htmlAttributes = HtmlAttributesForKnockout( metadata );
            return htmlHelper.TextBoxFor( expression, htmlAttributes );
        }

        public static MvcHtmlString KnockoutTextBoxFor<TModel, TProperty>( this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, object attributes ) {
            // convert passed anonymous object (attributes) into IDictionary<string,object> to pass into attribute parser
            var attrs = HtmlHelper.AnonymousObjectToHtmlAttributes( attributes ) as IDictionary<string, object>;
            var metadata = ModelMetadata.FromLambdaExpression( expression, htmlHelper.ViewData );

            var htmlAttributes = HtmlAttributesForKnockout( metadata, attrs );

            return htmlHelper.TextBoxFor( expression, htmlAttributes );
        }

        private static Dictionary<string, object> HtmlAttributesForKnockout( ModelMetadata metadata, IEnumerable<KeyValuePair<string, object>> attributes = null ) {
            var htmlAttributes = new Dictionary<string, object>();

            var knockoutParameter = String.Format( "value: {0}", metadata.PropertyName );
            htmlAttributes.Add( "data-bind", knockoutParameter );

            if ( attributes != null ) foreach ( var attr in attributes ) htmlAttributes.Add( attr.Key, attr.Value );

            return htmlAttributes;
        }
    }
} 
```

# google-app-engine - AppEngine 中的 Guice Singleton

> ID：15593117
> 
> 赞同：0
> 
> 时间：2013-03-23T23:05:06.123
> 
> 标签：google-app-engine, guice

在 Google App 引擎上下文中使用时，Google GUICE Singleton 对象真的是单例的吗？如果不是，我如何确保真正的单身行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T23:14:25.267

Guice 单例是仅在创建它的 Guice 注入器下的单例。它不是 JVM 中的单例或任何其他方式。如果您需要并发进程对某些数据有一个一致的视图，您应该使用数据库或其他一些同步方式。

# perl - 如何使用 WWW::Mechanize 按下没有名称属性的按钮？

> ID：15593118
> 
> 赞同：0
> 
> 时间：2013-03-23T23:05:09.343
> 
> 标签：perl, www-mechanize

这是我要单击的按钮：

```
<input type="submit" value="Continue"> 
```

如您所见，它根本没有名称来指定其顺序。我正在使用该[`WWW::Mechanize`](http://p3rl.org/WWW%3a%3aMechanize)模块。我试过`$agent->submit();`了，但它似乎无法完成这项工作，请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:35:09.623

提交表单不需要显式点击按钮，[让 Mechanize 隐式处理](http://p3rl.org/WWW%3a%3aMechanize#mech-submit_form)：

```
$mech->submit_form(
    with_fields => {
        username => 'foobar',
        password => '12345678',
    }
); 
```

运行[mech-dump](http://p3rl.org/mech-dump)以查看相关的表单输入字段名称，例如在我的示例中`username`和`password`.

# jquery - slideUp 和 slideDown 的意外行为

> ID：15593122
> 
> 赞同：1
> 
> 时间：2013-03-23T23:05:22.980
> 
> 标签：jquery, slidedown, slideup

要了解我的问题，请访问[此链接](http://jsfiddle.net/HDvfG/3/)。此处注意文本框和按钮彼此对齐，但是当您单击 SlideUp 按钮然后 SlideDown 时，它们的对齐会被打乱

这是我的代码

```
$(document).ready(function(){
  $("#btSlideDown").click(function(){
    $("#txt").slideDown("slow");
    $("#b2").slideDown("slow");
  });
  $("#btSlideUp").click(function(){
    $("#txt").slideUp("slow");
    $("#b2").slideUp("slow");
  });
}); 
```

请解释为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:36:09.437

如果您在 CSS 中添加垂直对齐样式，它似乎可以解决问题，类似于以下内容：

```
#panel > input{
    vertical-align: middle;
} 
```

* * *

[**演示**](http://jsfiddle.net/eL8nh/)- 应用垂直对齐

* * *

我的猜测是浏览器正在尝试尽可能地解决对齐问题，并且由于输入是单独的元素，因此它不能完全正确。

通过指定 a`vertical-align`虽然你告诉浏览器你想要它，所以浏览器不必猜测。我只是在猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:17:20.323

我还没有确定是什么导致了这个问题，但我确实有一个替代解决方案：

尝试将这些元素包装在 a 中`div`并在包装器上调用`slideDown`or `slideUp`。

```
<div id="panel">
    <div id='wrapper'>
        <input id="txt" type="text" />
        <input id="b2" type="button" value="OK"/>
    </div>
</div>

$(document).ready(function(){
    $("#btSlideDown").click(function(){
        $("#wrapper").slideDown('slow');
    });
    $("#btSlideUp").click(function(){
        $("#wrapper").slideUp('slow');
    });
}); 
```

[小提琴](http://jsfiddle.net/ethagnawl/HDvfG/2/)

# algorithm - 插入增强红黑树

> ID：15593123
> 
> 赞同：0
> 
> 时间：2013-03-23T23:05:26.463
> 
> 标签：algorithm, tree, binary-tree, binary-search-tree, red-black-tree

我正在查看插入增强的红黑树的代码。这棵树有一个称为“大小”的附加字段，它保持以节点 x 为根的子树的大小。这是插入新节点的伪代码：

```
AugmentedRBT_Insert(T,x){
    BST_Insert(T,x); //insert as if it is a normal BST
    x[color]=red; //insert as a red node
    size[x]=1;
    tmp=parent[x];
    while(tmp!=NULL){   //start from the node x and follow the path to root
        size[tmp]=size[tmp]+1;  //update the size of each node
        tmp=parent[tmp];
    }
} 
```

忘记修复着色和旋转，它们将在另一个函数中完成。我的问题是，为什么我们将新添加的节点“x”的大小设置为1？我知道它不会有任何子树，所以它的大小必须为1，但是RBT的要求之一是每个红色节点都有两个黑色孩子，实际上每个叶子节点都是NULL，即使我们插入节点“x “作为黑色，它仍然应该有 2 个黑色 NULL 节点，我认为我们必须将其大小设置为 3？我错了吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:09:18.360

与大多数二叉树一样，红黑树中的插入直接发生在叶子上。因此，以叶子为根的子树的大小为 1。红色节点确实有两个黑色子节点，因为[叶子总是有“根”或“nil”作为子节点，即黑色](http://en.wikipedia.org/wiki/Red-black_tree#Properties)。那些空元素不是节点，所以我们不会计算它们。

然后，我们将所有父节点的大小调整到根节点（对于我们刚刚添加的节点，它们每个都得到 +1）。

最后，如果有必要，我们会在旋转树以平衡它时修复这些值。在您的实现中，您可能希望一次完成大小更新和旋转，而不是两次。

# sql - 数据库 - 创建表，其中 2 个字段指向同一个表

> ID：15593127
> 
> 赞同：0
> 
> 时间：2013-03-23T23:06:02.233
> 
> 标签：sql, database, database-design, create-table

我需要在数据库中创建一个表，其中包括 - 以下列 -

```
table name - transaction  
time, source-address, destination-address 
```

我有一个这样的地址表 -

```
table name - address
address id, address, type (home/office/etc...) 
```

我只想保留一个从源地址和目标地址字段指向“地址”表中条目的指针。

交易也可以在同一个地址之间进行 - 例如，可以从家庭地址到家庭地址或从家庭地址到工作地址，并且所有这些都是合法的。

最好的方法是什么？

```
SAMPLE DATA -  
ADDRESS  
ID    ADDR       TYPE  
1     x-street   home  
2     y-street   work  

TRANSACTION  
TIME    SRC      DST     
08:00      1     1  
08:15      2     1  
.... 
```

我想将`TRANSACTION`表连接到`ADDRESS`表，但我不确定是否可以使用外键来完成，因为这里我有相同的键 - 来自表 ADDRESS 的 ID，它连接到表 TRANSACTION 中的`SRC`和`DST`字段。

我很高兴获得关于什么是做我需要做的事情的最佳方式的方法描述——比如设计建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:42:03.400

你的桌子似乎很好。

以下查询将允许您使用地址获取交易：

```
SELECT t.time, src.address "Source Address", dst.address "Destination Address"
from Transaction t
JOIN Address src ON t.src=src.id
JOIN Address dst ON t.dst=dst.id
SORT BY t.time 
```

# php - 创建一个 azure php web 角色

> ID：15593129
> 
> 赞同：0
> 
> 时间：2013-03-23T23:06:19.953
> 
> 标签：php, azure

我已经成功地遵循了本教程：

[http://blogs.msdn.com/b/silverlining/archive/2012/06/21/creating-a-php-web-role-in-windows-azure.aspx](http://blogs.msdn.com/b/silverlining/archive/2012/06/21/creating-a-php-web-role-in-windows-azure.aspx)

但是我被卡住了。在本地计算机上设置 Web 角色后，我不完全确定如何在 azure 管理门户中创建实例。

当前没有设置任何实例。当我尝试设置它们时，它要求我上传一个包和配置文件。我在哪里可以找到这些。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:24:11.760

这应该是对您的问题的评论，但我还不能发表评论。

创建新的云服务时，不要选中“部署云服务包”框。

如果您使用 + -> Compute -> Cloud Service -> Quick Create 它也不会要求包。

创建完成后，您可以打开它以下载 Power Shell 的凭据文件。

# java - 明确写 public 和不写 public 有什么区别？

> ID：15593130
> 
> 赞同：0
> 
> 时间：2013-03-23T23:06:30.960
> 
> 标签：java, compiler-errors

我认为没有区别，但后来我遇到了这个：

```
public class Whatever
{

 String toString()  
{
//stuff
}

} 
```

此代码导致编译器错误：

> `toString()`in`Whatever`不能覆盖`toString()`in `java.lang.Object`；试图分配较弱的访问权限；曾是`public`

如果我明确键入`public String toString()`代码编译就好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T23:07:18.673

如果您不对`public`方法和字段使用访问说明符，则假定它们处于`package`低级可见性。

这是一个很好的图表，说明了在课堂之外的可见性方面的含义`package`和含义：`public`

```
Modifier       Class    Package   Subclass  World
----------------------------------------------------------
public           Y         Y         Y        Y       
protected        Y         Y         Y        N
no modifier      Y         Y         N        N       <--- This is package level
private          Y         N         N        N 
```

`Y`表示方法、类或字段是可见的。

`N`表示方法、类或字段*不*可见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:09:57.573

@Hunter McMillen 提到了包级别的可见性（+1）。

我只想添加一个简短的解释这是什么意思。这意味着来自同一包的类和当前类的子类，即使它们本身属于其他包，也可以访问此方法/字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T23:12:21.547

在继承中，当覆盖方法时，您不能缩小方法的访问范围。在这里，类中的`toString()`方法`Object`具有`public`访问权限，并且您的类`Whatever`试图通过将访问级别更改为（相当于未指定访问修饰符）来缩小其范围`package`，这是不允许的。

水平方法`package`可以定义为

```
void someMethod () {
} 
```

`void`如果您在此处看到，则ie之前没有访问修饰符`public`，`protected`或者`private`这意味着同一包中的所有类都`Whatever`可以访问它。包外的任何包都无法访问此方法，甚至`Whatever`.

当您显式编写`public`时，整个将可以随意使用它。

# c++ - 数组中的二维向量、重叠和不同类型的对象

> ID：15593131
> 
> 赞同：1
> 
> 时间：2013-03-23T23:06:32.553
> 
> 标签：c++, class, vector, multidimensional-array

我目前正在考虑如何为某种游戏板制作二维矢量数组。

棋盘应该是矢量，因为大小可以变化，每个“正方形”都应该包含有关该正方形中有哪些对象的信息。

问题是可能存在重叠的对象，并且对象可能不是相同的类型或类。

这是我目前正在考虑的：（伪代码）

```
struct Square {
    vector<enum type>;
    vector<pointers to objects>;
};

vector< vector <Square> >; 
```

并且指针将指向不同的向量数组，每个向量数组都包含特定的对象。

我不确定如何制作这样的功能，或者这是否可能，我认真地认为这可能比它需要的更复杂..

有些对象必须是类，但我可以在游戏板类中创建从一个主类继承的所有类型的对象。但最终对象是完全不同的，所以我不确定这是否有很大的不同.

我是否只是盲目并且错过了一种更简单的方法来做我想做的事情：二维数组包含不同类型的元素，这些元素也可以在数组中重叠？

我非常感谢任何帮助、片段或见解。

注意：创建后板子大小不会有机会。对象必须能够在棋盘中移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:22:27.313

这是我的建议。

```
#include <boost/shared_ptr.hpp>

class GameObject {
  public:
    virtual ~GameObject() {}

    enum Type {
       FOO,
       BAR
    };
    virtual Type type() const = 0;

    virtual std::string name() const = 0;
    virtual void damaged() {}
};

class FooObject : public GameObject {
  public:
     Type type() const { return FOO; }

     std::string name() const { return "Foo object"; }
     void damaged() {
        std::cout << "Foo was damaged!" << std::endl;
     }
};

class BarObject : public GameObject {
  public:
     Type type() const { return BAR; }

     std::string name() const { return "Bar object"; }
     // Bar object doesn't respond to damage: no need to override damaged()
};

class Square {
   std::vector<boost::shared_ptr<GameObject> > objects;
};

class Board {
   // Details of the implementation here not important, but there
   // should be a class to hide them.

   Square* squares;
   int width, height;

   Board(int width, int height) :
     squares ( new Square[ width * height ] ),
     width ( width ),
     height ( height )
   {
   }

   ~Board() {
      delete [] squares;
    }

   Square& square(int x, int y) {
      if( x < 0 || x >= width || y < 0 || y >= height ) {
          throw std::logic_error( "accessed square out of bounds" );
      }
      return squares[ x + width * y ];
   }
}; 
```

概括：

*   为可以放置在游戏板上的各种对象提供一个基类。
*   这种类型的类必须有一个虚拟析构函数，即使它是微不足道的。这是因为您将通过 GameObject 指针删除事物。
*   如果需要区分游戏对象，请使用返回“类型”值的虚拟方法。
*   只要*没有*必要使用它，就不要使用该类型值，而是使用其他可以做有意义事情的虚拟方法。使用类型值（然后通常转换为子类型）应该被视为最后的手段。例如（自由地创造关于你的游戏的细节）：
    *   每个对象都有一个名称，当您将光标放在它上面时会显示该名称。这在 name() 中返回。
    *   游戏中的事件可能会导致“损坏”对象。这仅适用于某些类型的对象，因此损坏（）的默认操作是什么都不做。响应损坏的 Foo 对象用实际操作覆盖它。
*   无论您如何实现该板，将您的确切实现隐藏在一个类中。（不要把我的代码当作你不应该为此使用 vector<> 的指示，这绝对没问题。我个人对 vector< vector<> > 有一点个人偏好，但这也不算太糟糕。）
*   为游戏对象使用共享指针。
    *   Boost 具有出色且广泛使用的实现。
    *   如果您不能使用共享指针，请控制 Square 类之外的游戏对象的生命周期（例如，在 Board 类中所有游戏对象的主列表中），然后在 Square 类中使用原始指针。
    *   如果您确实使用了共享指针，而且这是您第一次使用，请先简要阅读它们。它们不是魔术，您需要注意某些事情，例如循环引用。
*   根据您的需要，您可能希望在 GameObject 中有一个指向包含指向该 GameObject 的指针的正方形或正方形坐标的“反向链接”。这将允许您轻松地从板上移除对象并移动它们。

# ruby-on-rails - REXML :: RuntimeError（实体扩展已变得太大）

> ID：15593133
> 
> 赞同：11
> 
> 时间：2013-03-23T23:06:43.487
> 
> 标签：ruby-on-rails, ruby, rexml

今天升级到 Ruby-1.9.3-p392 后，REXML 在尝试检索超过一定大小的 XML 响应时抛出运行时错误 - 一切正常，接收 25 条以下 XML 记录时不会抛出错误，但是一旦某个 XML 响应达到长度阈值，我收到此错误：

```
Error occurred while parsing request parameters.
Contents:

RuntimeError (entity expansion has grown too large):
  /.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/rexml/text.rb:387:in `block in unnormalize' 
```

我意识到这在最新的 Ruby 版本中发生了变化： [http ://www.ruby-lang.org/en/news/2013/02/22/rexml-dos-2013-02-22/](http://www.ruby-lang.org/en/news/2013/02/22/rexml-dos-2013-02-22/)

作为快速修复，我已将 的大小更改`REXML::Document.entity_expansion_text_limit`为更大的数字并且错误消失了。

有没有风险较小的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-05T07:10:45.627

当您将过多内容作为 XML 响应发送时，会生成此问题。

要解决此问题：您需要限制单个节点中的数据（< 10k）（而不是发送整个数据，显示截断的数据并提供单独的链接以查看完整内容）

以下文件引发了错误： `ruby-2.1.2/lib/ruby/2.1.0/rexml/text.rb`

```
# Unescapes all possible entities
def Text::unnormalize( string, doctype=nil, filter=nil, illegal=nil )
  sum = 0
  string.gsub( /\r\n?/, "\n" ).gsub( REFERENCE ) {
    s = Text.expand($&, doctype, filter)
    if sum + s.bytesize > Security.entity_expansion_text_limit
      raise "entity expansion has grown too large"
    else
      sum += s.bytesize
    end
    s
  }
end 
```

限制`ruby-2.1.2/lib/ruby/2.1.0/rexml/text.rb`默认为 10240，这意味着每个节点 10k 数据。

REXML 已经默认每个文档只允许 10000 个实体替换，因此实体替换可以生成的最大文本量约为 98 兆字节。（参考[https://www.ruby-lang.org/en/news/2013/02/22/rexml-dos-2013-02-22/](https://www.ruby-lang.org/en/news/2013/02/22/rexml-dos-2013-02-22/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T02:03:20.153

这听起来像很多 XML。你真的需要得到所有吗？也许您可以从远程服务器请求某些字段？一种选择可能是尝试另一个 XML 解析器（例如[Nokogiri](http://nokogiri.org/)）。另一种选择可能是使用 XML 以外的东西作为传输（JSON？二进制？）。

# ruby-on-rails - 如何在 Windows 上设置 rails 和 mysql

> ID：15593136
> 
> 赞同：-1
> 
> 时间：2013-03-23T23:07:08.957
> 
> 标签：ruby-on-rails, ruby

我已经在rails上安装了ruby，在windows上安装了mysql

[http://railsinstaller.org/](http://railsinstaller.org/)

```
C:\Sites>rails -v
Rails 3.2.12

C:\Sites>rails new simple_cms  -d mysql
      create
      create  README.rdoc
      create  Rakefile
      create  config.ru
      create  .gitignore
      create  Gemfile
      create  app
      create  app/assets/images/rails.png
      create  app/assets/javascripts/application.js
      create  app/assets/stylesheets/application.css
      create  app/controllers/application_controller.rb
      create  app/helpers/application_helper.rb
      create  app/views/layouts/application.html.erb
      create  app/mailers/.gitkeep
      create  app/models/.gitkeep
      create  config
      create  config/routes.rb
      create  config/application.rb
      create  config/environment.rb
      create  config/environments
      create  config/environments/development.rb
      create  config/environments/production.rb
      create  config/environments/test.rb
      create  config/initializers
      create  config/initializers/backtrace_silencers.rb
      create  config/initializers/inflections.rb
      create  config/initializers/mime_types.rb
      create  config/initializers/secret_token.rb
      create  config/initializers/session_store.rb
      create  config/initializers/wrap_parameters.rb
      create  config/locales
      create  config/locales/en.yml
      create  config/boot.rb
      create  config/database.yml
      create  db
      create  db/seeds.rb
      create  doc
      create  doc/README_FOR_APP
      create  lib
      create  lib/tasks
      create  lib/tasks/.gitkeep
      create  lib/assets
      create  lib/assets/.gitkeep
      create  log
      create  log/.gitkeep
      create  public
      create  public/404.html
      create  public/422.html
      create  public/500.html
      create  public/favicon.ico
      create  public/index.html
      create  public/robots.txt
      create  script
      create  script/rails
      create  test/fixtures
      create  test/fixtures/.gitkeep
      create  test/functional
      create  test/functional/.gitkeep
      create  test/integration
      create  test/integration/.gitkeep
      create  test/unit
      create  test/unit/.gitkeep
      create  test/performance/browsing_test.rb
      create  test/test_helper.rb
      create  tmp/cache
      create  tmp/cache/assets
      create  vendor/assets/javascripts
      create  vendor/assets/javascripts/.gitkeep
      create  vendor/assets/stylesheets
      create  vendor/assets/stylesheets/.gitkeep
      create  vendor/plugins
      create  vendor/plugins/.gitkeep
         run  bundle install
Fetching gem metadata from https://rubygems.org/...........
Fetching gem metadata from https://rubygems.org/..
Resolving dependencies...
Using rake (10.0.3)
Using i18n (0.6.4)
Installing multi_json (1.7.0)
Using activesupport (3.2.12)
Using builder (3.0.4)
Using activemodel (3.2.12)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.5)
Using rack-cache (1.2)
Using rack-test (0.6.2)
Using hike (1.2.1)
Using tilt (1.3.5)
Using sprockets (2.2.2)
Using actionpack (3.2.12)
Using mime-types (1.21)
Using polyglot (0.3.3)
Using treetop (1.4.12)
Using mail (2.4.4)
Using actionmailer (3.2.12)
Using arel (3.0.2)
Using tzinfo (0.3.37)
Using activerecord (3.2.12)
Using activeresource (3.2.12)
Using bundler (1.3.3)
Using coffee-script-source (1.6.1)
Using execjs (1.4.0)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.3)
Installing json (1.7.7)
Installing rdoc (3.12.2)
Using thor (0.17.0)
Using railties (3.2.12)
Using coffee-rails (3.2.2)
Using jquery-rails (2.2.1)
Installing mysql2 (0.3.11)
Using rails (3.2.12)
Using sass (3.2.7)
Using sass-rails (3.2.6)
Installing uglifier (1.3.0)
Your bundle is complete!
Use `bundle show [gemname]` to see where a bundled gem is installed.
Post-install message from rdoc:
Depending on your version of ruby, you may need to install ruby rdoc/ri data:

<= 1.8.6 : unsupported
 = 1.8.7 : gem install rdoc-data; rdoc-data --install
 = 1.9.1 : gem install rdoc-data; rdoc-data --install
>= 1.9.2 : nothing to do! Yay!
Post-install message from mysql2:

================================================================================
======================

  You've installed the binary version of mysql2.
  It was built using MySQL Connector/C version 6.0.2.
  It's recommended to use the exact same version to avoid potential issues.

  At the time of building this gem, the necessary DLL files where available
  in the following download:

  http://dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-noinstall-6.0
.2-win32.zip/from/pick

  And put lib\libmysql.dll file in your Ruby bin directory, for example C:\Ruby\
bin

================================================================================
======================

C:\Sites>rails server
Usage:
  rails new APP_PATH [options]

Options:
  -r, [--ruby=PATH]              # Path to the Ruby binary of your choice
                                 # Default: C:/RailsInstaller/Ruby1.9.3/bin/ruby
.exe
  -b, [--builder=BUILDER]        # Path to a application builder (can be a files
ystem path or URL)
  -m, [--template=TEMPLATE]      # Path to an application template (can be a fil
esystem path or URL)
      [--skip-gemfile]           # Don't create a Gemfile
      [--skip-bundle]            # Don't run bundle install
  -G, [--skip-git]               # Skip Git ignores and keeps
  -O, [--skip-active-record]     # Skip Active Record files
  -S, [--skip-sprockets]         # Skip Sprockets files
  -d, [--database=DATABASE]      # Preconfigure for selected database (options:
mysql/oracle/postgresql/sqlite3/frontbase/ibm_db/sqlserver/jdbcmysql/jdbcsqlite3
/jdbcpostgresql/jdbc)
                                 # Default: sqlite3
  -j, [--javascript=JAVASCRIPT]  # Preconfigure for selected JavaScript library
                                 # Default: jquery
  -J, [--skip-javascript]        # Skip JavaScript files
      [--dev]                    # Setup the application with Gemfile pointing t
o your Rails checkout
      [--edge]                   # Setup the application with Gemfile pointing t
o Rails repository
  -T, [--skip-test-unit]         # Skip Test::Unit files
      [--old-style-hash]         # Force using old style hash (:foo => 'bar') on
 Ruby >= 1.9

Runtime options:
  -f, [--force]    # Overwrite files that already exist
  -p, [--pretend]  # Run but do not make any changes
  -q, [--quiet]    # Suppress status output
  -s, [--skip]     # Skip files that already exist

Rails options:
  -h, [--help]     # Show this help message and quit
  -v, [--version]  # Show Rails version number and quit

Description:
    The 'rails new' command creates a new Rails application with a default
    directory structure and configuration at the path you specify.

    You can specify extra command-line arguments to be used every time
    'rails new' runs in the .railsrc configuration file in your home directory.

    Note that the arguments specified in the .railsrc file don't affect the
    defaults values shown above in this help message.

Example:
    rails new ~/Code/Ruby/weblog

    This generates a skeletal Rails installation in ~/Code/Ruby/weblog.
    See the README in the newly created application to get going.

C:\Sites>cmd.exe
Microsoft Windows [Version 6.2.9200]
(c) 2012 Microsoft Corporation. All rights reserved. 
```

当我执行 C:\Sites>rails new simple_cms 时，我可以在浏览器中运行，但 C:\Sites>rails new simple_cms -d mysql 出现 502 错误

我想让 ruby​​ on rails 和 mysql 一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:18:13.527

您将需要在 database.yml 中设置数据库连接，您还需要为 mysql 用户设置权限以允许它为您创建数据库。

如果你用谷歌搜索，有很多指南可以做到这一点。

如果这是您第一次使用 Rails，那么这里有一个非常好的教程，涵盖了许多基本设置，从安装到相对复杂的应用程序。

[http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)

# iphone - UIPickerView 无法正确显示数据

> ID：15593145
> 
> 赞同：0
> 
> 时间：2013-03-23T23:08:16.303
> 
> 标签：iphone, ios, nsarray, uipickerview

我正在尝试使用数据 @"0"、@"1"、@"2"、@"3"... 显示在行上的 UIPickerView，它将是一个 2 列的pickerView。

这是我的代码：

这是 .h 文件

```
#import <UIKit/UIKit.h>

@interface CustomNumberViewController : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate>

@property (strong, nonatomic) IBOutlet UIPickerView *numberPicker;
@property(strong, nonatomic)NSArray *listOfNumbers;
@property (strong,nonatomic)NSString *numberOfFirstColumn;
@property(strong,nonatomic)NSString *numberOfSecondColumn;

@end 
```

这是 .m 文件

```
#import "CustomNumberViewController.h"

@interface CustomNumberViewController ()

@end

@implementation CustomNumberViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    //UIView background
    UIGraphicsBeginImageContext(self.view.frame.size);
    [[UIImage imageNamed:@"pickerbackground.png"] drawInRect:self.view.bounds];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    self.view.backgroundColor = [UIColor colorWithPatternImage:image];

    //init picker
    self.numberPicker.showsSelectionIndicator = TRUE;
    self.listOfNumbers = [[NSArray alloc] initWithObjects:@"0",@"1",@"2",@"3",nil];
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

//Number of rows to display in each component
-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    if (component==0) {
        return [self.listOfNumbers count];
    }
    return [self.listOfNumbers count];
}

//Number of columns to display
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

//define what to display in each rows and columns
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    if (component==0) {
        return [self.listOfNumbers objectAtIndex:row];
    }
    return [self.listOfNumbers objectAtIndex:row];
}

//selected number to be stored in nsstring
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    if (component==0) {
        self.numberOfFirstColumn = [self.listOfNumbers objectAtIndex:row];

    }
    self.numberOfSecondColumn = [self.listOfNumbers objectAtIndex:row];
}

@end 
```

我的问题是，如果我尝试运行应用程序，UIPickerView 没有填充任何数据......所以绝对是空的......如果我尝试 scull '选定的指标'，应用程序将立即崩溃......这是错误消息 -> -[UITableViewRowData rectForRow:inSection:], /SourceCache/UIKit_Sim/UIKit-2380.17/UITableViewRowData.m:1630 中的断言失败

由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“在无效索引路径（2 个索引 [0, 0]）处请求 rect”

有什么建议么 ？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T23:18:25.540

看起来您没有在代码中创建 UIPickerView。您是否确保选择器的委托和数据源是您尝试在其中创建它的类？如果不是，它将不知道您想在其中拥有什么。

# c# - 绘制对象上的按钮

> ID：15593151
> 
> 赞同：1
> 
> 时间：2013-03-23T23:08:56.057
> 
> 标签：c#, silverlight, xna

我正在尝试添加一个按钮，以便它出现在我正在绘制的屏幕顶部，在 XNA/Silverlight Windows 手机游戏中。

目前地图正在它上面绘制，所以按钮看起来是不可见的。有谁知道我该如何解决这个问题？

Button`switchScreen`是在代码的前面创建的，但未初始化。

这是我添加按钮的代码：

```
private void OnDraw(object sender, GameTimerEventArgs e)
{
    #region CommonStuff
    SharedGraphicsDeviceManager.Current.GraphicsDevice.Clear(Color.CornflowerBlue);
    #endregion CommonStuff
    if (is3D)
    {
        OnDraw3D(sender, e);
    }
    else
    {
        OnDraw2D(sender, e);
    }
    switchScreen = new Button();
    switchScreen.Height = 20.0;
    switchScreen.Width = 100.0;
    switchScreen.Content = "Switch to Shooting Screen";
    switchScreen.Margin = new Thickness(phoneScreen.Height - switchScreen.Width - 
        20.0, 20.0, 20.0, phoneScreen.Width - switchScreen.Height - 20.0);
    switchScreen.Visibility = System.Windows.Visibility.Visible;
} 
```

我只是测试`OnDraw2D`所以这里的代码：

```
private void OnDraw2D(object sender, GameTimerEventArgs e)
{
    spriteBatch.Begin();
    // TODO: Add your drawing code here
    map.Draw(e.ElapsedTime, e.TotalTime);

    // npc.Draw(gameTime);
} 
```

就`map.Draw`在这里

```
public override void Draw(TimeSpan elapsedTime, TimeSpan totalTime)
{
    // Draw the Sky
    gamePage.getSpriteBatch().Draw(background, Position, Color.White);

    foreach (Person person in people)
    {
        person.Draw(elapsedTime, totalTime);
    }

    base.Draw(elapsedTime, totalTime);
} 
```

`background`是一个`Texture.2D`并且`Position`是一个`Vector2`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T01:14:11.923

我认为，由于您是手动创建按钮，因此您可能需要改用此代码（我假设您使用的是 Windows 窗体`Button`控件）：

```
switchScreen.Location = new System.Drawing.Point(xLocation, yLocation);
switchScreen.Name = name;
switchScreen.Size = new System.Drawing.Size(xSize, ySize);
switchScreen.TabIndex = 0;
switchScreen.Text = text;
switchScreen.UseVisualStyleBackColor = true;

Controls.Add(switchScreen); 
```

你是如何实现 Windows 窗体的？据我所知，你不能添加一个没有底层表单的按钮。

# android - 在 Listview 中旋转图像

> ID：15593152
> 
> 赞同：1
> 
> 时间：2013-03-23T23:08:56.527
> 
> 标签：android, scala, imageview, android-arrayadapter

我正在尝试制作一个假的水平 ListView。为此，我想旋转适配器中每个单元格的内容。它几乎可以工作：

![转图形](../Images/d66a91bef91101922ad0b210c87e67b6.png)

```
class ImageAdapter(ctx: Context, viewResourceId: Int, imageResourceId: Int, strings: Array[String], icons: TypedArray, colorSelected: Int, colorNotSelected: Int, colorBorder: Int) extends ArrayAdapter[String](ctx, viewResourceId, strings) {
    // Useful variables
    private val mInflater: LayoutInflater = ctx.getSystemService(
                Context.LAYOUT_INFLATER_SERVICE).asInstanceOf[LayoutInflater]
    private val mStrings: Array[String] = strings
    private val mIcons: TypedArray = icons
    private val mViewResourceId: Int = viewResourceId

    private var mSelected : Int = 0

    def setSelected(s: Int) = mSelected = s

    // Inherited from ArrayAdapter
    override def getCount():Int = mStrings.length
    override def getItem(position: Int): String = mStrings(position)
    override def getItemId(position: Int): Long = position

    // The rotation machinery
    var rotation = 90
    private var matrix = new Matrix()
    val rect1 = new RectF(0, 0, 0, 0)
    val rect2 = new RectF(0, 0, 0, 0)
    val cst = Matrix.ScaleToFit.CENTER

    // Getting the view.
    override def getView(position: Int, convertView: View, parent: ViewGroup): View = {
        var result = if(convertView == null) mInflater.inflate(mViewResourceId, null) else convertView

        var iv: ImageView = result.findViewById(imageResourceId).asInstanceOf[ImageView]
        val drawable = mIcons.getDrawable(position)
        iv.setScaleType(ScaleType.MATRIX)
        matrix.reset()
        val height = drawable.getIntrinsicHeight()
        val width = drawable.getIntrinsicWidth()
        rotation match {
          case 0 =>
            rect1.set(0, 0, width, height)
            rect2.set(0, 0, iv.getWidth(), iv.getHeight())
            matrix.setRectToRect(rect1, rect2, cst)
          case 90 =>
            rect1.set(0, 0, width, height)
            rect2.set(-iv.getHeight()/2, -iv.getWidth()/2, iv.getHeight()/2, iv.getWidth()/2)
            matrix.setRectToRect(rect1, rect2, cst)
            matrix.postRotate(rotation, 0, 0)
            matrix.postTranslate(iv.getWidth()/2, iv.getHeight()/2)
          ...
          case _ =>
        }
        iv.setImageMatrix(matrix)
        iv.setImageDrawable(drawable)
        iv.postInvalidate()

        if(position == mSelected) {
          result.setBackgroundColor(colorSelected)
        } else {
          result.setBackgroundColor(colorNotSelected)
        }
        result.setTag(mStrings(position))
        result
    }
} 
```

唯一的问题是它不显示第一张图片。相反，它显示： ![列表视图为空](../Images/7f4b8c0e5fb93dcf7e65d76fb3932cdf.png)

要出现第一个列表，我需要单击每个列表的一个元素。onclick 方法如下：

```
listGraphismesView.setOnItemClickListener(new OnItemClickListener {
    override def onItemClick(parent: AdapterView[_], view: View, position: Int, notUsedId: Long) = {
      var graphismeName = view.getTag().asInstanceOf[String]
      mAdapter.setSelected(position)
      mAdapter.notifyDataSetChanged()
      showGChallenge(position, graphismeName)
    }
  }) 
```

然后我尝试将 mAdapter.notifyDataSetChanged() 放在片段的 onResume 函数中，但它不会从头开始更新列表。我仍然需要单击某些内容才能显示所有图像。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:51:48.683

我发现 iv.getWidth() 和 iv.getHeight() 都返回零，因为 getview 将由 onActivityCreated 函数调用。将 notifyDataSetChanged() 放入 onResume 函数还为时过早。因此，drawable 将以 0 的大小绘制，并在我可以单击按钮时重新加载。

因此，为了改变这一点，我编写了以下代码，使用侦听器调用 resize 函数。

```
var iv: ImageView = result.findViewById(imageResourceId).asInstanceOf[ImageView]
val drawable = mIcons.getDrawable(position)
iv.setImageDrawable(drawable)
iv.setScaleType(ScaleType.MATRIX)
val vto = iv.getViewTreeObserver()
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
  private var matrix = new Matrix()
  val rect1 = new RectF(0, 0, 0, 0)
  val rect2 = new RectF(0, 0, 0, 0)
  private var height = drawable.getIntrinsicHeight()
  private var width = drawable.getIntrinsicWidth()
  override def onGlobalLayout() {
    val iv_width = iv.getWidth
    val iv_height = iv.getHeight
    matrix.reset()
    rotation match {
      case 0 =>
        rect1.set(0, 0, width, height)
        rect2.set(0, 0, iv_width, iv_height)
        matrix.setRectToRect(rect1, rect2, cst)
      case 90 =>
        rect1.set(0, 0, width, height)
        rect2.set(-iv_height/2, -iv_width/2, iv_height/2, iv_width/2)
        matrix.setRectToRect(rect1, rect2, cst)
        matrix.postRotate(rotation, 0, 0)
        matrix.postTranslate(iv_width/2, iv_height/2)
      ...
      case _ =>
    }
    iv.setImageMatrix(matrix)
  }
}) 
```

# python - 如何在python中下载pdf文件？

> ID：15593162
> 
> 赞同：-6
> 
> 时间：2013-03-23T23:10:00.180
> 
> 标签：python

我需要下载类似的东西

```
str = 'http://query.nytimes.com/mem/archive-free/pdf?res=9A00EEDE1431E13BBC4850DFBF66838A649FDE'
url = urllib2.urlopen(str)
file = open('test.pdf', 'w')
file.write(url.read())
file.close() 
```

它只会创建一个错误的pdf。

我如何将其写入文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T23:25:10.883

您可以使用该[`pattern`](http://www.clips.ua.ac.be/pages/pattern)模块，该模块构建在其之上`urllib2`并具有更高的抽象级别。

```
from pattern.web import URL

url = URL('http://query.nytimes.com/mem/archive-free/pdf?res=9A00EEDE1431E13BBC4850DFBF66838A649FDE')
f = open('nytimes.pdf', 'wb')
f.write(url.download(cached=False))
f.close() 
```

# c# - 从网格背景清除图像缓存

> ID：15593164
> 
> 赞同：0
> 
> 时间：2013-03-23T23:10:17.727
> 
> 标签：c#, windows-phone-7, caching

希望我能解释我需要什么以及问题是什么

我有以下列表框

```
 <ListBox Margin="0,8,0,0"  toolkit:TiltEffect.IsTiltEnabled="True" x:Name="ImageList" ItemsSource="{Binding Images}" HorizontalAlignment="Center"  BorderThickness="4">

        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid Background="{Binding imageID, Converter={StaticResource ImageConverter}}" Width="125" Height="125" Margin="6" Tap="list_OnTap">

                    <TextBlock Name="description" Foreground="{Binding TextColor}" Text="{Binding text}" Visibility="{Binding ShowText, Converter={StaticResource BooleanToVisibilityConverter}}" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap"/>
                    <toolkit:ContextMenuService.ContextMenu>
                        <toolkit:ContextMenu IsZoomEnabled="False" Name="deletectx">
                            <toolkit:MenuItem Header="delete"  Click="delete_Click"/>
                        </toolkit:ContextMenu>
                    </toolkit:ContextMenuService.ContextMenu>
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <toolkit:WrapPanel/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
    </ListBox>

</Grid> 
```

上面的代码制作了一个图像网格，我使用网格背景来显示图像，因为我需要在图像上显示我的文本（不确定是否有其他方法可以做到这一点）这个页面加载了大约 30 个大小为 125x125 的图像像素，每个大约 4kb。我注意到它消耗了大量的内存。我在这里阅读了一些关于清除图像缓存的帖子，但考虑到我将网格背景设置为我的图像而不是图像控件，我不知道我应该如何使用上面的代码来做到这一点。

我也许可以访问列表框内的网格，但无论我用它做什么，都只会应用于第一个图像而不是其余图像。我需要清除导航离开事件中的图像缓存。

另一个问题，我也有一些性能问题，进入这个页面需要一点时间，我在 Windows Phone App Analyser 中收到低帧率警告，不确定我在做什么（通过 Converter 为每个列表框项加载图像）对不对！我怎样才能让它更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:57:32.723

为确保您可以回收默认图像缓存行为使用的任何内存，您可以使用以下操作：（从另一个项目中截取并稍作编辑，但应该按原样工作。）

```
protected override void OnNavigatingFrom(NavigatingCancelEventArgs e)
{
    if (e.NavigationMode == NavigationMode.Back)
    {
        // Unload all images so as to reclaim any allocated memory
        foreach (var child in VisualTreeHelperEx.GetVisualChildren(this.ImageList).Where(c => c is Image))
        {
            var image = child as Image;

            if (image != null)
            {
                var bitmapImage = image.Source as BitmapImage;

                if (bitmapImage != null)
                {
                    System.Diagnostics.Debug.WriteLine("unloading " + bitmapImage.UriSource);
                    bitmapImage.UriSource = null;
                }

                image.Source = null;
            }
        }
    }
} 
```

哪个使用这个助手：

```
public static class VisualTreeHelperEx
{
    public static IEnumerable<DependencyObject> GetVisualChildren(DependencyObject element)
    {
        if (element == null)
        {
            throw new ArgumentNullException("element");
        }

        return GetVisualChildrenAndSelfIterator(element).Skip(1);
    }

    public static IEnumerable<DependencyObject> GetVisualChildrenAndSelfIterator(DependencyObject element)
    {
        Debug.Assert(element != null, "element should not be null!");

        yield return element;

        int count = VisualTreeHelper.GetChildrenCount(element);

        for (int i = 0; i < count; i++)
        {
            yield return VisualTreeHelper.GetChild(element, i);
        }
    }
} 
```

这可能有它自己的性能问题，因此请谨慎使用并测试对实际性能的影响。

页面加载的性能问题可能是由于一次加载所有图像。您可以在页面加载后将它们滴入列表以避免这种情况。如果实际图像大于背景区域，则应设置`DecodePixelHeight`和`DecodePixelWidth`。删除转换器并添加具有完整路径的属性可能也是值得的，因为许多复杂的转换器会影响性能。

# c# - 使用 ObservableCollection 绑定 TreeView

> ID：15593166
> 
> 赞同：2
> 
> 时间：2013-03-23T23:10:43.923
> 
> 标签：c#, wpf, data-binding, treeview

我正在使用 Visual Studio 2010 在 C# 中制作播放器。我正在寻找一种显示文件播放列表的方法。所以我使用的是 TreeView，我想将它与 ObservableCollection 绑定。我的 ObservableCollection ：

```
public class Media
{
 string type; // Video, music, or picture
 string name; // example : 50-cent.mp3
 string path; // The path of the file
}

public class Playlist 
{
 string name; // The name of the playlist
 ObservableCollection<Media> list; // The list of Media
}
public ObservableCollection<Playlist> playLists = new ObservableCollection<Playlist>(); 
```

如您所见，我有 var 播放列表，里面有元素，里面有媒体列表。

我想在wpf中显示这个对象，我认为最好的是TreeView。我在互联网上找不到绑定 TreeView 和我的 var 播放列表的方式。我不知道如何在我的 WPF 中制作 TreeView ：S ...我在互联网上读到有些人使用 HierachicalDataTemplate，但我真的不知道该怎么做。

请帮忙

**编辑我正在尝试大卫给出的帖子，我把我的 WPF**

```
<TreeView Grid.Column="1" Height="193" HorizontalAlignment="Left" Margin="15,209,0,0" Name="treeView1" VerticalAlignment="Top" Width="120">
        <TreeView.Resources>
            <HierarchicalDataTemplate DataType="{x:Type src:Playlist}" ItemsSource="{Binding list}">
                <TextBlock Text="{Binding name}"/>
            </HierarchicalDataTemplate>
            <DataTemplate DataType="{x:Type src:Media}">
                <TextBlock Text="{Binding name}"/>
            </DataTemplate>
        </TreeView.Resources>
    </TreeView> 
```

我有问题，我仍然一无所有 :S 。我完全喜欢教程：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:30:07.667

如果你想有如下图这样的效果：

![在此处输入图像描述](../Images/3f53c3f32757cceb1caa55cb574cc30f.png) ![在此处输入图像描述](../Images/86a68351c036e2044968a0536db83f17.png)

你可以看看这篇文章：[WPF Treeview: data binding of heterotypes of data using CompositeCollection class](http://xinyustudio.wordpress.com/?s=WPF%20tree)

注意：您需要从 INotifyPropertyChanged 接口派生您的类：

```
public class Media : INotifyPropertyChanged 
{
   string _name;
   string Name {
       get {return _name;} 
       set { _name=value; OnPropertyChanged("Name");}} //OnPropertyChanged is important!
   ...
} 
```

[在此处](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)查看有关 INotifyPropertyChanged 的​​更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:44:09.570

首先，您需要向我们提供一个 XAML，您可以在其中尝试绑定一个集合（我想您正在使用[HierarchicalDataTemplate](http://blogs.msdn.com/b/mikehillberg/archive/2009/10/30/treeview-and-hierarchicaldatatemplate-step-by-step.aspx)。作为第二个，我看到“媒体列表”是私有的。据我所知，私有属性不能绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T08:24:58.857

您不能与`fields`. 您只能绑定到`Public Properties`您的班级。

```
public ObservableCollection<Playlist> PlayLists { get; set; } 
```

# java - JDBC SQL 数据库被锁定？

> ID：15593170
> 
> 赞同：3
> 
> 时间：2013-03-23T23:11:14.060
> 
> 标签：java, sql, database, sqlite

我正在编写一个使用本地 SQL 数据库存储数据的程序。

我正在使用此处找到的驱动程序：[https ://bitbucket.org/xerial/sqlite-jdbc](https://bitbucket.org/xerial/sqlite-jdbc)

我正在尝试从数据库中读取并将 tableName 的内容放入 JTable 中，如下所示：

```
public Object[][] getTable(String tableName){
    int columns = getColumnNumber(tableName);
    int rows = getRowNumber(tableName);
    String[] columnNames = getColumnNames(tableName);
    Object[][] table = new Object[rows][columns];
    try{
        Connection connection = DriverManager.getConnection("jdbc:sqlite:" + dbName + ".db");
        Statement stmt = connection.createStatement();
        ResultSet rs = stmt.executeQuery("select * from " + tableName);
        for(int r = 0; r < rows; r++){
            rs.next();
            for (int c = 0; c < columns; c++){
                table[r][c] = rs.getString(columnNames[c]);
            }
        }
        return table;           
    }catch(Exception e){
        System.out.println("ERROR CREATING TABLE ARRAY");
        e.printStackTrace();
        return null;
    }
} 
```

然后稍后我尝试返回并在表中添加一行：

```
public boolean addRow(String tableName, Object[] values){
    if(!isDataAcceptable(tableName, values))
        return false;
    try{
        String stmt = "insert into " + tableName + " values (";
        for(int c = 0; c < values.length; c++){
            if(values[c] instanceof String)
                stmt += "'" + values[c] + "'";
            else
                stmt += values[c];
            if(c == (values.length - 1))
                    stmt += ");";
            else
                stmt += ", ";
        }
        System.out.println(stmt);
        Connection connection = DriverManager.getConnection("jdbc:sqlite:" + dbName + ".db");
        Statement statement = connection.createStatement();
        statement.executeUpdate(stmt);
        return true;
    }catch(Exception e){
        System.out.println("ERROR INSERTING ROW");
        e.printStackTrace();
        return false;
    }
} 
```

然后我想用新行更新我之前创建的 JTable。

当我尝试添加该行时，它会导致异常：

```
java.sql.SQLException: database is locked 
```

指向这条线：

```
statement.executeUpdate(stmt); 
```

...在 addRow() 方法中。

为什么数据库被锁定，我如何解锁它以写入它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T23:40:13.393

> 为什么数据库被锁定，我如何解锁它以写入它？

数据库很可能被锁定，`addRow`因为之前的调用`getTable`没有关闭结果集。该代码也无法关闭数据库连接对象，这将导致资源泄漏。

`close()`基本的解决方法是调用`rs`and`connection`对象，但您需要以正确的方式来使您的代码可靠。

这是在 Java 7 中使用“try with resources”语法的推荐方法：

```
try (Connection connection = 
         DriverManager.getConnection("jdbc:sqlite:" + dbName + ".db"),
     Statement stmt = connection.createStatement(),
     ResultSet rs = stmt.executeQuery("select * from " + tableName)) {
  for (int r = 0; r < rows; r++) {
    rs.next();
    for (int c = 0; c < columns; c++) {
      table[r][c] = rs.getString(columnNames[c]);
    }
  }
  return table;           
} catch (Exception e) {
    System.out.println("ERROR CREATING TABLE ARRAY");
    e.printStackTrace();
    return null;
} 
```

您也可以通过`close`在块中显式调用来做到这一点`finally`，但它更冗长，如果您有需要关闭的相关资源，则代码可能难以正确......就像这里一样。

# actionscript-3 - 1120：访问未定义的属性 shuffledArray

> ID：15593171
> 
> 赞同：0
> 
> 时间：2013-03-23T23:11:24.593
> 
> 标签：actionscript-3

请你帮帮我我是 as3 的新手，我正在尝试使用 Fisher-Yates 算法创建一个洗牌的牌组。当我使用 ctrl-enter 运行代码时，它编译时没有错误，但是当我尝试使用 trace() 输出它时；它回来了：

场景 1，图层“动作”，第 1 帧，第 6 行 1120：访问未定义的属性 shuffledArray。

就像我说的那样，我对此很陌生，这将是我做一些非常愚蠢的事情，但我还是被困住了。

这是代码

```
package src.CardDeck
{
    public class CardDeck
    {
        public var allCards:Array = [];
        public var cardNames:Array;
        public var cardValues:Array;
        public var gameType:String;
        public var drawnCards:uint = 0;

        public function CardDeck(game:String)
        {
            gameType = game;
            cardNames = ["Ace","Two","Three",
                         "Four","Five","Six",
                         "Seven","Eight","Nine",
                         "Ten","Jack","Queen","King"];
            if(gameType == "texasholdem")
            {
                cardValues = [1,2,3,4,5,6,7,8,9,10,10,10,10];
            }
            makeSuit("Spade");
            makeSuit("Heart");
            makeSuit("Diamond");
            makeSuit("Club");
        }
        function makeSuit(suitString:String):void
        {
            var card:Object;

            for(var i:uint = 0; i < cardNames.length; i++)
            {
                card = {};
                card.cardType = suitString;
                card.cardName = cardNames[i];
                card.cardValue = cardValues[i];
                card.isDrawn = false;
                allCards.push(card);
            }
        }

        public function shuffleFisherYates():Array 
        {
            var shuffledArray:Array = [];
            var randomCardIndex: int;
            do 
            {
                randomCardIndex = Math.floor(Math.random()* allCards.length);
                shuffledArray.push(allCards[randomCardIndex]); // add to mix
                allCards.splice(randomCardIndex,1); // remove from deck
            }while(allCards.length); // Meaning while allCards.length != 0
            return shuffledArray;

        }
    }
} 
```

这是 .fla 动作层

```
import src.CardDeck.CardDeck;

var deck:CardDeck = new CardDeck("texasholdem");
trace(shuffledArray); 
```

我知道这可能很愚蠢，但我正在努力。

提前致谢！

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:30:32.287

```
var deck:CardDeck = new CardDeck("texasholdem");
trace(shuffledArray); 
```

这不起作用，因为`shuffledArray`没有在那里定义。

尝试 ：

```
var deck:CardDeck = new CardDeck("texasholdem");
var array:Array = deck.shuffleFisherYates();

for(var i:int=0; i<array.length; i++)
{    
    trace(array[i].cardName);
    trace(array[i].cardType);
    trace(array[i].cardValue);
    trace(array[i].isDrawn);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:50:30.033

“shuffledArray”是 CardDeck 对象内部的一个属性。要访问其中的公共方法和属性，您需要使用点语法：

```
trace(deck.shuffleFisherYates()); 
```

但是，根据您的操作，如果您的 CardDeck 对象旨在控制整个套牌，您可能不需要真正直接访问数组。

# mysql - 左连接给出更多结果

> ID：15593175
> 
> 赞同：0
> 
> 时间：2013-03-23T23:12:02.787
> 
> 标签：mysql, join, left-join

我有这个查询：

```
SELECT wc.city, wc.country_id, wc.latitude, wc.longitude FROM 
world_cities wc
-- left join states s on wc.country_id = s.country_id
where wc.city = 'rosemount' 
```

这样我得到了 6 个结果（我想要的），如果我取消注释第 3 行，我会得到 150 个结果。为什么当我取消注释第 3 行时我得到更多结果，我不应该仍然只得到 6 个吗？我觉得我在这里错过了一些东西......

**状态**

```
mysql> describe states;
+------------+---------------------+------+-----+---------+----------------+
| Field      | Type                | Null | Key | Default | Extra          |
+------------+---------------------+------+-----+---------+----------------+
| state_id   | int(10) unsigned    | NO   | PRI | NULL    | auto_increment |
| country_id | tinyint(3) unsigned | YES  |     | NULL    |                |
| state_name | char(15)            | YES  |     | NULL    |                |
+------------+---------------------+------+-----+---------+----------------+
3 rows in set (0.00 sec) 
```

**世界城市**

```
mysql> describe world_cities;
+-------------+---------------------+------+-----+---------+----------------+
| Field       | Type                | Null | Key | Default | Extra          |
+-------------+---------------------+------+-----+---------+----------------+
| city_id     | int(10) unsigned    | NO   | PRI | NULL    | auto_increment |
| state_id    | int(11)             | YES  |     | 0       |                |
| country_id  | tinyint(3) unsigned | YES  | MUL | NULL    |                |
| country     | char(2)             | YES  |     | NULL    |                |
| city        | char(60)            | YES  | MUL | NULL    |                |
| accent_city | char(60)            | YES  |     | NULL    |                |
| region      | int(11)             | YES  |     | NULL    |                |
| population  | int(11)             | YES  |     | NULL    |                |
| latitude    | decimal(9,6)        | YES  |     | NULL    |                |
| longitude   | decimal(9,6)        | YES  |     | NULL    |                |
+-------------+---------------------+------+-----+---------+----------------+
9 rows in set (0.01 sec) 
```

**编辑**
我现在已经运行了它，它很好地更新了 world_cities 表中的 state_id。

```
update world_cities wc 
left join zipcodes z on wc.city = z.city 
left join cities c on z.state = c.city_name
left join states s on z.state = s.state_name 
set wc.state_id = s.state_id 
where wc.country_id = 236
and abs(round(z.lat, 2) - round(wc.latitude, 2)) between 0 and 1
and abs(round(z.log, 2) - round(wc.longitude, 2)) between 0 and 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:16:51.643

您有 6 条记录`world_cities`与“罗斯蒙特”城市有关，但您有*许多*州与这些城市中的每一个都属于同一个国家/地区。例如，美国密歇根州底特律与美国所有其他州是同一个国家。因此，在我的示例中，我期望 300 = 6 * 50 之类的东西。

很可能您想加入另一个条件：`wc.country_id = s.country_id AND wc.state_id = s.state_id`. 查看您的架构，无法确定一个城市属于哪个州。您需要创建一个 world_cities.state_id 列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T23:18:18.927

我认为你加入了错误的领域。试试这个：

```
SELECT wc.city, wc.country_id, wc.latitude, wc.longitude FROM 
world_cities wc
-- left join states s on wc.state_id = s.state_id
where wc.city = 'rosemount' 
```

如果一个城市在美国，那么您可能有 50（或 57）个与国家 ID 匹配的州。

# vbscript - 为什么这个批处理代码不起作用？

> ID：15593176
> 
> 赞同：0
> 
> 时间：2013-03-23T23:12:04.877
> 
> 标签：vbscript, batch-file

我有这段代码，我写在一个 .bat 文件中，它运行良好，但是突然......它停止工作了，除了我更改了几个文件夹名称之外，我不知道它发生了什么。

这是我的代码：

```
@echo off  
start /w Files\MySQL\mysql-connector-net-6.6.5.msi  
echo MySQL Connector/NET 6.6.5 has been installed.  
FOR /F "usebackq delims=" %%i in (`cscript desktop.vbs`) DO SET DESKTOPDIR=%%i  
copy Files\DayZAdminApp.exe %DESKTOPDIR%\DayZ Admin Panel  
echo.  
echo DayZ Admin Panel has been placed onto your desktop.  
echo D | xcopy Files\DaRT %desktopdir%\DayZ Admin Panel\Files\DaRT /E /Q  
ping 127.0.0.1 -n 2 -w 1000 >nul: 2>nul:  
echo.  
echo DayZ Admin rCon Tool (DaRT) has been copied.  
echo.  
copy Files\loadout.exe %DESKTOPDIR%\DayZ Admin Panel\Files  
echo Loadout editor has been copied.  
echo.  
echo.  
echo Make sure you keep the folder intact, any missing files will limit the panel's capabilities.  
echo.  
pause 
```

这是 desktop.vbs 文件：

```
set WshShell = WScript.CreateObject("WScript.Shell")  
strDesktop = WshShell.SpecialFolders("Desktop")  
wscript.echo(strDesktop)` 
```

如果有帮助，这是输出的屏幕截图：

![代码输出](../Images/7657bca34bb4fc4f40e4683e40a7affa.png)

注意：我的代码工作得很好，除了文件夹名称`Files\`和`DayZ Admin Panel\`

如果是我弄乱了那些文件夹名，请告诉我我做错了什么，因为这看起来很漂亮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T23:15:21.790

您需要`"`在路径周围使用，因为包含空格

```
copy Files\DayZAdminApp.exe "%DESKTOPDIR%\DayZ Admin Panel"
...
echo D | xcopy Files\DaRT "%desktopdir%\DayZ Admin Panel\Files\DaRT" /E /Q
...
copy Files\loadout.exe "%DESKTOPDIR%\DayZ Admin Panel\Files" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T23:15:48.953

只要路径有空格，您就必须使用引号：`"%desktopdir%\DayZ Admin Panel\Files\DaRT"`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-24T00:11:43.483

在这种情况下，您不需要 VBScript 帮助，但看起来您在将可执行文件的输出重定向到批处理变量时遇到了问题，因此我编写了一段代码，希望它对类似任务有所帮助。

```
@Echo OFF

Echo --- Test 1 ---
FOR /F "usebackq delims=" %%i IN (cscript desktop.vbs) DO (
   SET DESKTOPDIR=%%i
)
Echo %DESKTOPDIR%

Echo --- Test 2 ---
FOR /F "usebackq delims=" %%i IN (%windir%\system32\cscript.exe desktop.vbs) DO (
   SET DESKTOPDIR=%%i
)
Echo %DESKTOPDIR%

Pause 
```

输出： ![在此处输入图像描述](../Images/4488be7bc5bf04d13fdebc3f24208da2.png)

正确的一个是：

```
@ECHO OFF

Echo --- Test 1 ---
FOR /F "tokens=*" %%i IN ('cscript.exe desktop.vbs') DO (
   SET DESKTOPDIR=%%i
)
ECHO Desktop: %DESKTOPDIR%

REM or...

Echo --- Test 2 ---
FOR /F "usebackq delims=" %%i IN (`cscript.exe desktop.vbs`) DO (
   SET DESKTOPDIR=%%i
)
Echo Desktop: %DESKTOPDIR%

Pause 
```

# javascript - 文本框中的随机 Javascript 字符串（AZ、1-9、分组）

> ID：15593180
> 
> 赞同：-2
> 
> 时间：2013-03-23T23:12:31.843
> 
> 标签：javascript, html

我需要让我的文本框（html）在加载时显示一个随机字符串。

字符串必须像 XXXX-XXXX-XXXX-XXXX X 可以是 AZ 和 1-9 表示字母和数字。这应该随机生成并在页面加载时显示在文本框中。

有什么帮助吗？到目前为止没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:17:45.293

这是一个实现：

HTML：

```
 <input id="result" type="text> 
```

代码：

```
function rand() {
    document.getElementById("result").value = generateRandStr();
}

function generateRandStr() {
    var candidates = "ABCDEFGHIJKLMNOPQRSTUVWXY123456789";
    var result = "", rand;
    for (var i = 0; i < 4; i++) {
        for (var j = 0; j < 4; j++) {
            rand = Math.floor(Math.random() * candidates.length);
            result += candidates.charAt(rand);
        }
        if (i != 3) {
            result += "-";
        }
    }
    return result;
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/f3VSs/](http://jsfiddle.net/jfriend00/f3VSs/)

# .net - CLR 4.0 下的 GCLatencyMode.SustainedLowLatency

> ID：15593183
> 
> 赞同：2
> 
> 时间：2013-03-23T23:12:38.963
> 
> 标签：.net, clr

在 CLR 的 4.0.3 更新中，GCLatencyMode 枚举中添加了一个新的枚举值。如果我使用这个枚举值并且代码由最终用户在 CLR 4.0 上运行而没有 4.0.3 更新会发生什么？如何编写能够可靠地检测和使用 4.0 CLR 下的回退的代码？

编辑：代码必须为 4.0 构建，但可以在更高的 CLR 上运行，例如 4.5，我希望我可以在哪里使用新功能？显然在这种情况下，枚举值不能按名称编译，但也许使用它的整数值？

# cryptography - PBKDF2-HMAC-SHA-512 测试向量

> ID：15593184
> 
> 赞同：12
> 
> 时间：2013-03-23T23:12:47.933
> 
> 标签：cryptography, pbkdf2

我无法找到 PBKDF2-HMAC-SHA-512 的已发布测试向量。我已经构建了一个函数，它（终于！）再现了[RFC 4231中的 7 个 HMAC-SHA-512 测试向量，以及在](https://www.rfc-editor.org/rfc/rfc4231)[这个线程](https://stackoverflow.com/questions/5130513/pbkdf2-hmac-sha2-test-vectors)中找到的 PBKDF2-HMAC-SHA-256 的 32 字节测试向量。

这是它为 PBKDF2-HMAC-SHA-512 生成的内容。谁能帮我验证这个输出？
谢谢，弗雷德

```
Input:
  P = "password"
  S = "salt"
  c = 1
  dkLen = 64

Output:
  DK = 86 7f 70 cf 1a de 02 cf 
       f3 75 25 99 a3 a5 3d c4 
       af 34 c7 a6 69 81 5a e5 
       d5 13 55 4e 1c 8c f2 52 
       c0 2d 47 0a 28 5a 05 01 
       ba d9 99 bf e9 43 c0 8f 
       05 02 35 d7 d6 8b 1d a5 
       5e 63 f7 3b 60 a5 7f ce 

Input:
  P = "password"
  S = "salt"
  c = 2
  dkLen = 64

Output:
  DK = e1 d9 c1 6a a6 81 70 8a 
       45 f5 c7 c4 e2 15 ce b6 
       6e 01 1a 2e 9f 00 40 71 
       3f 18 ae fd b8 66 d5 3c 
       f7 6c ab 28 68 a3 9b 9f 
       78 40 ed ce 4f ef 5a 82 
       be 67 33 5c 77 a6 06 8e 
       04 11 27 54 f2 7c cf 4e 

Input:
  P = "password"
  S = "salt"
  c = 4096
  dkLen = 64

Output:
  DK = d1 97 b1 b3 3d b0 14 3e 
       01 8b 12 f3 d1 d1 47 9e 
       6c de bd cc 97 c5 c0 f8 
       7f 69 02 e0 72 f4 57 b5 
       14 3f 30 60 26 41 b3 d5 
       5c d3 35 98 8c b3 6b 84 
       37 60 60 ec d5 32 e0 39 
       b7 42 a2 39 43 4a f2 d5 

Input:
  P = "passwordPASSWORDpassword"
  S = "saltSALTsaltSALTsaltSALTsaltSALTsalt"
  c = 4096
  dkLen = 64

Output:
  DK = 8c 05 11 f4 c6 e5 97 c6 
       ac 63 15 d8 f0 36 2e 22 
       5f 3c 50 14 95 ba 23 b8 
       68 c0 05 17 4d c4 ee 71 
       11 5b 59 f9 e6 0c d9 53 
       2f a3 3e 0f 75 ae fe 30 
       22 5c 58 3a 18 6c d8 2b 
       d4 da ea 97 24 a3 d3 b8 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-11T03:14:29.753

我还可以确认问题中的 4 个测试用例在我的 T-SQL、Python、OpenSSL 和 PolarSSL 库以及@JimmiTh 的 .NET 库中的实现上生成了有效结果。

我想添加另一组 PBKDF2-HMAC-SHA-512 测试向量供其他人尝试他们自己的实现——这些是专门为测试各种摘要大小和块大小边界条件而设计的。

字符编码为 ASCII/UTF-8。

针对 64 位 Debian 上的 OpenSSL 1.0.1e 和 64 位 Windows 上的 1.0.1f 进行测试，使用从 C 调用的 32 位 OpenSSL 库、[Mitsuhiko 的 Python PBKDF2 实现](https://github.com/mitsuhiko/python-pbkdf2)和[华纳补丁](https://github.com/mitsuhiko/python-pbkdf2/issues/2)、[我自己的 SQL Server 2012 实现](https://stackoverflow.com/a/19898192/1967612)、PolarSSL 1.2.9和 1.3.4、[@JimmiTh 的 .NET](https://github.com/Anti-weakpasswords/PBKDF2-CSharp-DeriveBytes-custom-A)和 @TonPlomp 的 LabView 实现。

请注意，Python 和 T-SQL 与 OpenSSL 之间的先前差异显然是由于 Windows、MinGW 和 OpenSSL 之间的平台/版本问题。使用 MinGW 4.8.1 和 OpenSSL 1.0.1f 的实现之间没有区别。

我建议将这些复制/粘贴到 LibreOffice Calc 或 Excel 中，并使用 =CONCATENATE 为自己创建一个测试脚本，或者在[Github](https://github.com/Anti-weakpasswords/PBKDF2-Test-Vectors/releases)上获取完整的原始 LibreOffice 。

由于 SO 的 30,000 个字符限制，实际测试向量减去 Ext 10b 和 Trunc 10a 以及最后两个 16M 迭代向量：

```
'Password', 'Salt', Iterations, Outputbytes, ResultInHex, 'Notes'

'passDATAb00AB7YxDTT', 'saltKEYbcTcXHCBxtjD' 1 64 0xCBE6088AD4359AF42E603C2A33760EF9D4017A7B2AAD10AF46F992C660A0B461ECB0DC2A79C2570941BEA6A08D15D6887E79F32B132E1C134E9525EEDDD744FA 'AW 1a 1iter 64outBytes 19pw 19sa'
'passDATAb00AB7YxDTT', 'saltKEYbcTcXHCBxtjD' 100000 64 0xACCDCD8798AE5CD85804739015EF2A11E32591B7B7D16F76819B30B0D49D80E1ABEA6C9822B80A1FDFE421E26F5603ECA8A47A64C9A004FB5AF8229F762FF41F 'AW 1b 100000iter 64outBytes 19pw 19sa'
'passDATAb00AB7YxDTTl', 'saltKEYbcTcXHCBxtjD2' 1 64 0x8E5074A9513C1F1512C9B1DF1D8BFFA9D8B4EF9105DFC16681222839560FB63264BED6AABF761F180E912A66E0B53D65EC88F6A1519E14804EBA6DC9DF137007 'AW 2a 1iter 64outBytes 20pw 20sa'
'passDATAb00AB7YxDTTl', 'saltKEYbcTcXHCBxtjD2' 100000 64 0x594256B0BD4D6C9F21A87F7BA5772A791A10E6110694F44365CD94670E57F1AECD797EF1D1001938719044C7F018026697845EB9AD97D97DE36AB8786AAB5096 'AW 2b 100000iter 64outBytes 20pw 20sa'
'passDATAb00AB7YxDTTlR', 'saltKEYbcTcXHCBxtjD2P' 1 64 0xA6AC8C048A7DFD7B838DA88F22C3FAB5BFF15D7CB8D83A62C6721A8FAF6903EAB6152CB7421026E36F2FFEF661EB4384DC276495C71B5CAB72E1C1A38712E56B 'AW 3a 1iter 64outBytes 21pw 21sa'
'passDATAb00AB7YxDTTlR', 'saltKEYbcTcXHCBxtjD2P' 100000 64 0x94FFC2B1A390B7B8A9E6A44922C330DB2B193ADCF082EECD06057197F35931A9D0EC0EE5C660744B50B61F23119B847E658D179A914807F4B8AB8EB9505AF065 'AW 3b 100000iter 64outBytes 21pw 21sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE5', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJe' 1 64 0xE2CCC7827F1DD7C33041A98906A8FD7BAE1920A55FCB8F831683F14F1C3979351CB868717E5AB342D9A11ACF0B12D3283931D609B06602DA33F8377D1F1F9902 'AW 4a 1iter 64outBytes 63pw 63sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE5', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJe' 100000 64 0x07447401C85766E4AED583DE2E6BF5A675EABE4F3618281C95616F4FC1FDFE6ECBC1C3982789D4FD941D6584EF534A78BD37AE02555D9455E8F089FDB4DFB6BB 'AW 4b 100000iter 64outBytes 63pw 63sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJem' 1 64 0xB029A551117FF36977F283F579DC7065B352266EA243BDD3F920F24D4D141ED8B6E02D96E2D3BDFB76F8D77BA8F4BB548996AD85BB6F11D01A015CE518F9A717 'AW 5a 1iter 64outBytes 64pw 64sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJem' 100000 64 0x31F5CC83ED0E948C05A15735D818703AAA7BFF3F09F5169CAF5DBA6602A05A4D5CFF5553D42E82E40516D6DC157B8DAEAE61D3FEA456D964CB2F7F9A63BBBDB5 'AW 5b 100000iter 64outBytes 64pw 64sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57U', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemk' 1 64 0x28B8A9F644D6800612197BB74DF460272E2276DE8CC07AC4897AC24DBC6EB77499FCAF97415244D9A29DA83FC347D09A5DBCFD6BD63FF6E410803DCA8A900AB6 'AW 6a 1iter 64outBytes 65pw 65sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57U', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemk' 100000 64 0x056BC9072A356B7D4DA60DD66F5968C2CAA375C0220EDA6B47EF8E8D105ED68B44185FE9003FBBA49E2C84240C9E8FD3F5B2F4F6512FD936450253DB37D10028 'AW 6b 100000iter 64outBytes 65pw 65sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi0', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy' 1 64 0x16226C85E4F8D604573008BFE61C10B6947B53990450612DD4A3077F7DEE2116229E68EFD1DF6D73BD3C6D07567790EEA1E8B2AE9A1B046BE593847D9441A1B7 'AW 7a 1iter 64outBytes 127pw 127sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi0', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy' 100000 64 0x70CF39F14C4CAF3C81FA288FB46C1DB52D19F72722F7BC84F040676D3371C89C11C50F69BCFBC3ACB0AB9E92E4EF622727A916219554B2FA121BEDDA97FF3332 'AW 7b 100000iter 64outBytes 127pw 127sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6' 1 64 0x880C58C316D3A5B9F05977AB9C60C10ABEEBFAD5CE89CAE62905C1C4F80A0A098D82F95321A6220F8AECCFB45CE6107140899E8D655306AE6396553E2851376C 'AW 8a 1iter 64outBytes 128pw 128sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6' 100000 64 0x2668B71B3CA56136B5E87F30E098F6B4371CB5ED95537C7A073DAC30A2D5BE52756ADF5BB2F4320CB11C4E16B24965A9C790DEF0CBC62906920B4F2EB84D1D4A 'AW 8b 100000iter 64outBytes 128pw 128sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04U', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6P' 1 64 0x93B9BA8283CC17D50EF3B44820828A258A996DE258225D24FB59990A6D0DE82DFB3FE2AC201952100E4CC8F06D883A9131419C0F6F5A6ECB8EC821545F14ADF1 'AW 9a 1iter 64outBytes 129pw 129sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04U', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6P' 100000 64 0x2575B485AFDF37C260B8F3386D33A60ED929993C9D48AC516EC66B87E06BE54ADE7E7C8CB3417C81603B080A8EEFC56072811129737CED96236B9364E22CE3A5 'AW 9b 100000iter 64outBytes 129pw 129sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04Uz3ebEAhzZ4ve1A2wg5CnLXdZC5Y7gwfVgbEgZSTmoYQSzC5OW4dfrjqiwApTACO6xoOL1AjWj6X6f6qFfF8TVmOzU9RhOd1N4QtzWI4fP6FYttNz5FuLdtYVXWVXH2Tf7I9fieMeWCHTMkM4VcmQyQHpbcP8MEb5f1g6Ckg5xk3HQr3wMBvQcOHpCPy1K8HCM7a5wkPDhgVA0BVmwNpsRIbDQZRtHK6dT6bGyalp6gbFZBuBHwD86gTzkrFY7HkOVrgc0gJcGJZe65Ce8v4Jn5OzkuVsiU8efm2Pw2RnbpWSAr7SkVdCwXK2XSJDQ5fZ4HBEz9VTFYrG23ELuLjvx5njOLNgDAJuf5JB2tn4nMjjcnl1e8qcYVwZqFzEv2zhLyDWMkV4tzl4asLnvyAxTBkxPRZj2pRABWwb3kEofpsHYxMTAn38YSpZreoXipZWBnu6HDURaruXaIPYFPYHl9Ls9wsuD7rzaGfbOyfVgLIGK5rODphwRA7lm88bGKY8b7tWOtepyEvaLxMI7GZF5ScwpZTYeEDNUKPzvM2Im9zehIaznpguNdNXNMLWnwPu4H6zEvajkw3G3ucSiXKmh6XNe3hkdSANm3vnxzRXm4fcuzAx68IElXE2bkGFElluDLo6EsUDWZ4JIWBVaDwYdJx8uCXbQdoifzCs5kuuClaDaDqIhb5hJ2WR8mxiueFsS0aDGdIYmye5svmNmzQxFmdOkHoF7CfwuU1yy4uEEt9vPSP2wFp1dyaMvJW68vtB4kddLmI6gIgVVcT6ZX1Qm6WsusPrdisPLB2ScodXojCbL3DLj6PKG8QDVMWTrL1TpafT2wslRledWIhsTlv2mI3C066WMcTSwKLXdEDhVvFJ6ShiLKSN7gnRrlE0BnAw', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6PlBdILBOkKUB6TGTPJXh1tpdOHTG6KuIvcbQp9qWjaf1uxAKgiTtYRIHhxjJI2viVa6fDZ67QOouOaf2RXQhpsWaTtAVnff6PIFcvJhdPDFGV5nvmZWoCZQodj6yXRDHPw9PyF0iLYm9uFtEunlAAxGB5qqea4X5tZvB1OfLVwymY3a3JPjdxTdvHxCHbqqE0zip61JNqdmeWxGtlRBC6CGoCiHO4XxHCntQBRJDcG0zW7joTdgtTBarsQQhlLXBGMNBSNmmTbDf3hFtawUBCJH18IAiRMwyeQJbJ2bERsY3MVRPuYCf4Au7gN72iGh1lRktSQtEFye7pO46kMXRrEjHQWXInMzzy7X2StXUzHVTFF2VdOoKn0WUqFNvB6PF7qIsOlYKj57bi1Psa34s85WxMSbTkhrd7VHdHZkTVaWdraohXYOePdeEvIwObCGEXkETUzqM5P2yzoBOJSdjpIYaa8zzdLD3yrb1TwCZuJVxsrq0XXY6vErU4QntsW0972XmGNyumFNJiPm4ONKh1RLvS1kddY3nm8276S4TUuZfrRQO8QxZRNuSaZI8JRZp5VojB5DktuMxAQkqoPjQ5Vtb6oXeOyY591CB1MEW1fLTCs0NrL321SaNRMqza1ETogAxpEiYwZ6pIgnMmSqNMRdZnCqA4gMWw1lIVATWK83OCeicNRUNOdfzS7A8vbLcmvKPtpOFvhNzwrrUdkvuKvaYJviQgeR7snGetO9JLCwIlHIj52gMCNU18d32SJl7Xomtl3wIe02SMvq1i1BcaX7lXioqWGmgVqBWU3fsUuGwHi6RUKCCQdEOBfNo2WdpFaCflcgnn0O6jVHCqkv8cQk81AqS00rAmHGCNTwyA6Tq5TXoLlDnC8gAQjDUsZp0z' 1 64 0x384BCD6914407E40C295D1037CF4F990E8F0E720AF43CB706683177016D36D1A14B3A7CF22B5DF8D5D7D44D69610B64251ADE2E7AB54A3813A89935592E391BF 'AW 10a 1iter 64outBytes 1025pw 1025sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04Uz3ebEAhzZ4ve1A2wg5CnLXdZC5Y7gwfVgbEgZSTmoYQSzC5OW4dfrjqiwApTACO6xoOL1AjWj6X6f6qFfF8TVmOzU9RhOd1N4QtzWI4fP6FYttNz5FuLdtYVXWVXH2Tf7I9fieMeWCHTMkM4VcmQyQHpbcP8MEb5f1g6Ckg5xk3HQr3wMBvQcOHpCPy1K8HCM7a5wkPDhgVA0BVmwNpsRIbDQZRtHK6dT6bGyalp6gbFZBuBHwD86gTzkrFY7HkOVrgc0gJcGJZe65Ce8v4Jn5OzkuVsiU8efm2Pw2RnbpWSAr7SkVdCwXK2XSJDQ5fZ4HBEz9VTFYrG23ELuLjvx5njOLNgDAJuf5JB2tn4nMjjcnl1e8qcYVwZqFzEv2zhLyDWMkV4tzl4asLnvyAxTBkxPRZj2pRABWwb3kEofpsHYxMTAn38YSpZreoXipZWBnu6HDURaruXaIPYFPYHl9Ls9wsuD7rzaGfbOyfVgLIGK5rODphwRA7lm88bGKY8b7tWOtepyEvaLxMI7GZF5ScwpZTYeEDNUKPzvM2Im9zehIaznpguNdNXNMLWnwPu4H6zEvajkw3G3ucSiXKmh6XNe3hkdSANm3vnxzRXm4fcuzAx68IElXE2bkGFElluDLo6EsUDWZ4JIWBVaDwYdJx8uCXbQdoifzCs5kuuClaDaDqIhb5hJ2WR8mxiueFsS0aDGdIYmye5svmNmzQxFmdOkHoF7CfwuU1yy4uEEt9vPSP2wFp1dyaMvJW68vtB4kddLmI6gIgVVcT6ZX1Qm6WsusPrdisPLB2ScodXojCbL3DLj6PKG8QDVMWTrL1TpafT2wslRledWIhsTlv2mI3C066WMcTSwKLXdEDhVvFJ6ShiLKSN7gnRrlE0BnAw', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6PlBdILBOkKUB6TGTPJXh1tpdOHTG6KuIvcbQp9qWjaf1uxAKgiTtYRIHhxjJI2viVa6fDZ67QOouOaf2RXQhpsWaTtAVnff6PIFcvJhdPDFGV5nvmZWoCZQodj6yXRDHPw9PyF0iLYm9uFtEunlAAxGB5qqea4X5tZvB1OfLVwymY3a3JPjdxTdvHxCHbqqE0zip61JNqdmeWxGtlRBC6CGoCiHO4XxHCntQBRJDcG0zW7joTdgtTBarsQQhlLXBGMNBSNmmTbDf3hFtawUBCJH18IAiRMwyeQJbJ2bERsY3MVRPuYCf4Au7gN72iGh1lRktSQtEFye7pO46kMXRrEjHQWXInMzzy7X2StXUzHVTFF2VdOoKn0WUqFNvB6PF7qIsOlYKj57bi1Psa34s85WxMSbTkhrd7VHdHZkTVaWdraohXYOePdeEvIwObCGEXkETUzqM5P2yzoBOJSdjpIYaa8zzdLD3yrb1TwCZuJVxsrq0XXY6vErU4QntsW0972XmGNyumFNJiPm4ONKh1RLvS1kddY3nm8276S4TUuZfrRQO8QxZRNuSaZI8JRZp5VojB5DktuMxAQkqoPjQ5Vtb6oXeOyY591CB1MEW1fLTCs0NrL321SaNRMqza1ETogAxpEiYwZ6pIgnMmSqNMRdZnCqA4gMWw1lIVATWK83OCeicNRUNOdfzS7A8vbLcmvKPtpOFvhNzwrrUdkvuKvaYJviQgeR7snGetO9JLCwIlHIj52gMCNU18d32SJl7Xomtl3wIe02SMvq1i1BcaX7lXioqWGmgVqBWU3fsUuGwHi6RUKCCQdEOBfNo2WdpFaCflcgnn0O6jVHCqkv8cQk81AqS00rAmHGCNTwyA6Tq5TXoLlDnC8gAQjDUsZp0z' 100000 64 0xB8674F6C0CC9F8CF1F1874534FD5AF01FC1504D76C2BC2AA0A75FE4DD5DFD1DAF60EA7C85F122BCEEB8772659D601231607726998EAC3F6AAB72EFF7BA349F7F 'AW 10b 100000iter 64outBytes 1025pw 1025sa'
'passDATAb00AB7YxDTT', 'saltKEYbcTcXHCBxtjD' 1 63 0xCBE6088AD4359AF42E603C2A33760EF9D4017A7B2AAD10AF46F992C660A0B461ECB0DC2A79C2570941BEA6A08D15D6887E79F32B132E1C134E9525EEDDD744 'AW Trunc 1a 1iter 63outBytes 19pw 19sa'
'passDATAb00AB7YxDTT', 'saltKEYbcTcXHCBxtjD' 100000 63 0xACCDCD8798AE5CD85804739015EF2A11E32591B7B7D16F76819B30B0D49D80E1ABEA6C9822B80A1FDFE421E26F5603ECA8A47A64C9A004FB5AF8229F762FF4 'AW Trunc 1b 100000iter 63outBytes 19pw 19sa'
'passDATAb00AB7YxDTTl', 'saltKEYbcTcXHCBxtjD2' 1 63 0x8E5074A9513C1F1512C9B1DF1D8BFFA9D8B4EF9105DFC16681222839560FB63264BED6AABF761F180E912A66E0B53D65EC88F6A1519E14804EBA6DC9DF1370 'AW Trunc 2a 1iter 63outBytes 20pw 20sa'
'passDATAb00AB7YxDTTl', 'saltKEYbcTcXHCBxtjD2' 100000 63 0x594256B0BD4D6C9F21A87F7BA5772A791A10E6110694F44365CD94670E57F1AECD797EF1D1001938719044C7F018026697845EB9AD97D97DE36AB8786AAB50 'AW Trunc 2b 100000iter 63outBytes 20pw 20sa'
'passDATAb00AB7YxDTTlR', 'saltKEYbcTcXHCBxtjD2P' 1 63 0xA6AC8C048A7DFD7B838DA88F22C3FAB5BFF15D7CB8D83A62C6721A8FAF6903EAB6152CB7421026E36F2FFEF661EB4384DC276495C71B5CAB72E1C1A38712E5 'AW Trunc 3a 1iter 63outBytes 21pw 21sa'
'passDATAb00AB7YxDTTlR', 'saltKEYbcTcXHCBxtjD2P' 100000 63 0x94FFC2B1A390B7B8A9E6A44922C330DB2B193ADCF082EECD06057197F35931A9D0EC0EE5C660744B50B61F23119B847E658D179A914807F4B8AB8EB9505AF0 'AW Trunc 3b 100000iter 63outBytes 21pw 21sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE5', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJe' 1 63 0xE2CCC7827F1DD7C33041A98906A8FD7BAE1920A55FCB8F831683F14F1C3979351CB868717E5AB342D9A11ACF0B12D3283931D609B06602DA33F8377D1F1F99 'AW Trunc 4a 1iter 63outBytes 63pw 63sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE5', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJe' 100000 63 0x07447401C85766E4AED583DE2E6BF5A675EABE4F3618281C95616F4FC1FDFE6ECBC1C3982789D4FD941D6584EF534A78BD37AE02555D9455E8F089FDB4DFB6 'AW Trunc 4b 100000iter 63outBytes 63pw 63sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJem' 1 63 0xB029A551117FF36977F283F579DC7065B352266EA243BDD3F920F24D4D141ED8B6E02D96E2D3BDFB76F8D77BA8F4BB548996AD85BB6F11D01A015CE518F9A7 'AW Trunc 5a 1iter 63outBytes 64pw 64sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJem' 100000 63 0x31F5CC83ED0E948C05A15735D818703AAA7BFF3F09F5169CAF5DBA6602A05A4D5CFF5553D42E82E40516D6DC157B8DAEAE61D3FEA456D964CB2F7F9A63BBBD 'AW Trunc 5b 100000iter 63outBytes 64pw 64sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57U', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemk' 1 63 0x28B8A9F644D6800612197BB74DF460272E2276DE8CC07AC4897AC24DBC6EB77499FCAF97415244D9A29DA83FC347D09A5DBCFD6BD63FF6E410803DCA8A900A 'AW Trunc 6a 1iter 63outBytes 65pw 65sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57U', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemk' 100000 63 0x056BC9072A356B7D4DA60DD66F5968C2CAA375C0220EDA6B47EF8E8D105ED68B44185FE9003FBBA49E2C84240C9E8FD3F5B2F4F6512FD936450253DB37D100 'AW Trunc 6b 100000iter 63outBytes 65pw 65sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi0', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy' 1 63 0x16226C85E4F8D604573008BFE61C10B6947B53990450612DD4A3077F7DEE2116229E68EFD1DF6D73BD3C6D07567790EEA1E8B2AE9A1B046BE593847D9441A1 'AW Trunc 7a 1iter 63outBytes 127pw 127sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi0', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy' 100000 63 0x70CF39F14C4CAF3C81FA288FB46C1DB52D19F72722F7BC84F040676D3371C89C11C50F69BCFBC3ACB0AB9E92E4EF622727A916219554B2FA121BEDDA97FF33 'AW Trunc 7b 100000iter 63outBytes 127pw 127sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6' 1 63 0x880C58C316D3A5B9F05977AB9C60C10ABEEBFAD5CE89CAE62905C1C4F80A0A098D82F95321A6220F8AECCFB45CE6107140899E8D655306AE6396553E285137 'AW Trunc 7a 1iter 63outBytes 128pw 128sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6' 100000 63 0x2668B71B3CA56136B5E87F30E098F6B4371CB5ED95537C7A073DAC30A2D5BE52756ADF5BB2F4320CB11C4E16B24965A9C790DEF0CBC62906920B4F2EB84D1D 'AW Trunc 8b 100000iter 63outBytes 128pw 128sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04U', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6P' 1 63 0x93B9BA8283CC17D50EF3B44820828A258A996DE258225D24FB59990A6D0DE82DFB3FE2AC201952100E4CC8F06D883A9131419C0F6F5A6ECB8EC821545F14AD 'AW Trunc 9a 1iter 63outBytes 129pw 129sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04U', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6P' 100000 63 0x2575B485AFDF37C260B8F3386D33A60ED929993C9D48AC516EC66B87E06BE54ADE7E7C8CB3417C81603B080A8EEFC56072811129737CED96236B9364E22CE3 'AW Trunc 9b 100000iter 63outBytes 129pw 129sa'
    'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04Uz3ebEAhzZ4ve1A2wg5CnLXdZC5Y7gwfVgbEgZSTmoYQSzC5OW4dfrjqiwApTACO6xoOL1AjWj6X6f6qFfF8TVmOzU9RhOd1N4QtzWI4fP6FYttNz5FuLdtYVXWVXH2Tf7I9fieMeWCHTMkM4VcmQyQHpbcP8MEb5f1g6Ckg5xk3HQr3wMBvQcOHpCPy1K8HCM7a5wkPDhgVA0BVmwNpsRIbDQZRtHK6dT6bGyalp6gbFZBuBHwD86gTzkrFY7HkOVrgc0gJcGJZe65Ce8v4Jn5OzkuVsiU8efm2Pw2RnbpWSAr7SkVdCwXK2XSJDQ5fZ4HBEz9VTFYrG23ELuLjvx5njOLNgDAJuf5JB2tn4nMjjcnl1e8qcYVwZqFzEv2zhLyDWMkV4tzl4asLnvyAxTBkxPRZj2pRABWwb3kEofpsHYxMTAn38YSpZreoXipZWBnu6HDURaruXaIPYFPYHl9Ls9wsuD7rzaGfbOyfVgLIGK5rODphwRA7lm88bGKY8b7tWOtepyEvaLxMI7GZF5ScwpZTYeEDNUKPzvM2Im9zehIaznpguNdNXNMLWnwPu4H6zEvajkw3G3ucSiXKmh6XNe3hkdSANm3vnxzRXm4fcuzAx68IElXE2bkGFElluDLo6EsUDWZ4JIWBVaDwYdJx8uCXbQdoifzCs5kuuClaDaDqIhb5hJ2WR8mxiueFsS0aDGdIYmye5svmNmzQxFmdOkHoF7CfwuU1yy4uEEt9vPSP2wFp1dyaMvJW68vtB4kddLmI6gIgVVcT6ZX1Qm6WsusPrdisPLB2ScodXojCbL3DLj6PKG8QDVMWTrL1TpafT2wslRledWIhsTlv2mI3C066WMcTSwKLXdEDhVvFJ6ShiLKSN7gnRrlE0BnAw', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6PlBdILBOkKUB6TGTPJXh1tpdOHTG6KuIvcbQp9qWjaf1uxAKgiTtYRIHhxjJI2viVa6fDZ67QOouOaf2RXQhpsWaTtAVnff6PIFcvJhdPDFGV5nvmZWoCZQodj6yXRDHPw9PyF0iLYm9uFtEunlAAxGB5qqea4X5tZvB1OfLVwymY3a3JPjdxTdvHxCHbqqE0zip61JNqdmeWxGtlRBC6CGoCiHO4XxHCntQBRJDcG0zW7joTdgtTBarsQQhlLXBGMNBSNmmTbDf3hFtawUBCJH18IAiRMwyeQJbJ2bERsY3MVRPuYCf4Au7gN72iGh1lRktSQtEFye7pO46kMXRrEjHQWXInMzzy7X2StXUzHVTFF2VdOoKn0WUqFNvB6PF7qIsOlYKj57bi1Psa34s85WxMSbTkhrd7VHdHZkTVaWdraohXYOePdeEvIwObCGEXkETUzqM5P2yzoBOJSdjpIYaa8zzdLD3yrb1TwCZuJVxsrq0XXY6vErU4QntsW0972XmGNyumFNJiPm4ONKh1RLvS1kddY3nm8276S4TUuZfrRQO8QxZRNuSaZI8JRZp5VojB5DktuMxAQkqoPjQ5Vtb6oXeOyY591CB1MEW1fLTCs0NrL321SaNRMqza1ETogAxpEiYwZ6pIgnMmSqNMRdZnCqA4gMWw1lIVATWK83OCeicNRUNOdfzS7A8vbLcmvKPtpOFvhNzwrrUdkvuKvaYJviQgeR7snGetO9JLCwIlHIj52gMCNU18d32SJl7Xomtl3wIe02SMvq1i1BcaX7lXioqWGmgVqBWU3fsUuGwHi6RUKCCQdEOBfNo2WdpFaCflcgnn0O6jVHCqkv8cQk81AqS00rAmHGCNTwyA6Tq5TXoLlDnC8gAQjDUsZp0z' 100000 63 0xB8674F6C0CC9F8CF1F1874534FD5AF01FC1504D76C2BC2AA0A75FE4DD5DFD1DAF60EA7C85F122BCEEB8772659D601231607726998EAC3F6AAB72EFF7BA349F 'AW Trunc 10b 100000iter 63outBytes 1025pw 1025sa'
'passDATAb00AB7YxDTT', 'saltKEYbcTcXHCBxtjD' 1 65 0xCBE6088AD4359AF42E603C2A33760EF9D4017A7B2AAD10AF46F992C660A0B461ECB0DC2A79C2570941BEA6A08D15D6887E79F32B132E1C134E9525EEDDD744FA88 'AW Ext 1a 1iter 65outBytes 19pw 19sa'
'passDATAb00AB7YxDTT', 'saltKEYbcTcXHCBxtjD' 100000 65 0xACCDCD8798AE5CD85804739015EF2A11E32591B7B7D16F76819B30B0D49D80E1ABEA6C9822B80A1FDFE421E26F5603ECA8A47A64C9A004FB5AF8229F762FF41F7C 'AW Ext 1b 100000iter 65outBytes 19pw 19sa'
'passDATAb00AB7YxDTTl', 'saltKEYbcTcXHCBxtjD2' 1 65 0x8E5074A9513C1F1512C9B1DF1D8BFFA9D8B4EF9105DFC16681222839560FB63264BED6AABF761F180E912A66E0B53D65EC88F6A1519E14804EBA6DC9DF1370070B 'AW Ext 2a 1iter 65outBytes 20pw 20sa'
'passDATAb00AB7YxDTTl', 'saltKEYbcTcXHCBxtjD2' 100000 65 0x594256B0BD4D6C9F21A87F7BA5772A791A10E6110694F44365CD94670E57F1AECD797EF1D1001938719044C7F018026697845EB9AD97D97DE36AB8786AAB5096E7 'AW Ext 2b 100000iter 65outBytes 20pw 20sa'
'passDATAb00AB7YxDTTlR', 'saltKEYbcTcXHCBxtjD2P' 1 65 0xA6AC8C048A7DFD7B838DA88F22C3FAB5BFF15D7CB8D83A62C6721A8FAF6903EAB6152CB7421026E36F2FFEF661EB4384DC276495C71B5CAB72E1C1A38712E56B93 'AW Ext 3a 1iter 65outBytes 21pw 21sa'
'passDATAb00AB7YxDTTlR', 'saltKEYbcTcXHCBxtjD2P' 100000 65 0x94FFC2B1A390B7B8A9E6A44922C330DB2B193ADCF082EECD06057197F35931A9D0EC0EE5C660744B50B61F23119B847E658D179A914807F4B8AB8EB9505AF06526 'AW Ext 3b 100000iter 65outBytes 21pw 21sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE5', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJe' 1 65 0xE2CCC7827F1DD7C33041A98906A8FD7BAE1920A55FCB8F831683F14F1C3979351CB868717E5AB342D9A11ACF0B12D3283931D609B06602DA33F8377D1F1F9902DA 'AW Ext 4a 1iter 65outBytes 63pw 63sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE5', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJe' 100000 65 0x07447401C85766E4AED583DE2E6BF5A675EABE4F3618281C95616F4FC1FDFE6ECBC1C3982789D4FD941D6584EF534A78BD37AE02555D9455E8F089FDB4DFB6BB30 'AW Ext 4b 100000iter 65outBytes 63pw 63sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJem' 1 65 0xB029A551117FF36977F283F579DC7065B352266EA243BDD3F920F24D4D141ED8B6E02D96E2D3BDFB76F8D77BA8F4BB548996AD85BB6F11D01A015CE518F9A71780 'AW Ext 5a 1iter 65outBytes 64pw 64sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJem' 100000 65 0x31F5CC83ED0E948C05A15735D818703AAA7BFF3F09F5169CAF5DBA6602A05A4D5CFF5553D42E82E40516D6DC157B8DAEAE61D3FEA456D964CB2F7F9A63BBBDB59F 'AW Ext 5b 100000iter 65outBytes 64pw 64sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57U', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemk' 1 65 0x28B8A9F644D6800612197BB74DF460272E2276DE8CC07AC4897AC24DBC6EB77499FCAF97415244D9A29DA83FC347D09A5DBCFD6BD63FF6E410803DCA8A900AB671 'AW Ext 6a 1iter 65outBytes 65pw 65sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57U', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemk' 100000 65 0x056BC9072A356B7D4DA60DD66F5968C2CAA375C0220EDA6B47EF8E8D105ED68B44185FE9003FBBA49E2C84240C9E8FD3F5B2F4F6512FD936450253DB37D1002889 'AW Ext 6b 100000iter 65outBytes 65pw 65sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi0', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy' 1 65 0x16226C85E4F8D604573008BFE61C10B6947B53990450612DD4A3077F7DEE2116229E68EFD1DF6D73BD3C6D07567790EEA1E8B2AE9A1B046BE593847D9441A1B766 'AW Ext 7a 1iter 65outBytes 127pw 127sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi0', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy' 100000 65 0x70CF39F14C4CAF3C81FA288FB46C1DB52D19F72722F7BC84F040676D3371C89C11C50F69BCFBC3ACB0AB9E92E4EF622727A916219554B2FA121BEDDA97FF3332EC 'AW Ext 7b 100000iter 65outBytes 127pw 127sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6' 1 65 0x880C58C316D3A5B9F05977AB9C60C10ABEEBFAD5CE89CAE62905C1C4F80A0A098D82F95321A6220F8AECCFB45CE6107140899E8D655306AE6396553E2851376C57 'AW Ext 8a 1iter 65outBytes 128pw 128sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6' 100000 65 0x2668B71B3CA56136B5E87F30E098F6B4371CB5ED95537C7A073DAC30A2D5BE52756ADF5BB2F4320CB11C4E16B24965A9C790DEF0CBC62906920B4F2EB84D1D4A30 'AW Ext 8b 100000iter 65outBytes 128pw 128sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04U', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6P' 1 65 0x93B9BA8283CC17D50EF3B44820828A258A996DE258225D24FB59990A6D0DE82DFB3FE2AC201952100E4CC8F06D883A9131419C0F6F5A6ECB8EC821545F14ADF199 'AW Ext 9a 1iter 65outBytes 129pw 129sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04U', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6P' 100000 65 0x2575B485AFDF37C260B8F3386D33A60ED929993C9D48AC516EC66B87E06BE54ADE7E7C8CB3417C81603B080A8EEFC56072811129737CED96236B9364E22CE3A542 'AW Ext 9b 100000iter 65outBytes 129pw 129sa'
'passDATAb00AB7YxDTTlRH2dqxDx19GDxDV1zFMz7E6QVqKIzwOtMnlxQLttpE57Un4u12D2YD7oOPpiEvCDYvntXEe4NNPLCnGGeJArbYDEu6xDoCfWH6kbuV6awi04Uz3ebEAhzZ4ve1A2wg5CnLXdZC5Y7gwfVgbEgZSTmoYQSzC5OW4dfrjqiwApTACO6xoOL1AjWj6X6f6qFfF8TVmOzU9RhOd1N4QtzWI4fP6FYttNz5FuLdtYVXWVXH2Tf7I9fieMeWCHTMkM4VcmQyQHpbcP8MEb5f1g6Ckg5xk3HQr3wMBvQcOHpCPy1K8HCM7a5wkPDhgVA0BVmwNpsRIbDQZRtHK6dT6bGyalp6gbFZBuBHwD86gTzkrFY7HkOVrgc0gJcGJZe65Ce8v4Jn5OzkuVsiU8efm2Pw2RnbpWSAr7SkVdCwXK2XSJDQ5fZ4HBEz9VTFYrG23ELuLjvx5njOLNgDAJuf5JB2tn4nMjjcnl1e8qcYVwZqFzEv2zhLyDWMkV4tzl4asLnvyAxTBkxPRZj2pRABWwb3kEofpsHYxMTAn38YSpZreoXipZWBnu6HDURaruXaIPYFPYHl9Ls9wsuD7rzaGfbOyfVgLIGK5rODphwRA7lm88bGKY8b7tWOtepyEvaLxMI7GZF5ScwpZTYeEDNUKPzvM2Im9zehIaznpguNdNXNMLWnwPu4H6zEvajkw3G3ucSiXKmh6XNe3hkdSANm3vnxzRXm4fcuzAx68IElXE2bkGFElluDLo6EsUDWZ4JIWBVaDwYdJx8uCXbQdoifzCs5kuuClaDaDqIhb5hJ2WR8mxiueFsS0aDGdIYmye5svmNmzQxFmdOkHoF7CfwuU1yy4uEEt9vPSP2wFp1dyaMvJW68vtB4kddLmI6gIgVVcT6ZX1Qm6WsusPrdisPLB2ScodXojCbL3DLj6PKG8QDVMWTrL1TpafT2wslRledWIhsTlv2mI3C066WMcTSwKLXdEDhVvFJ6ShiLKSN7gnRrlE0BnAw', 'saltKEYbcTcXHCBxtjD2PnBh44AIQ6XUOCESOhXpEp3HrcGMwbjzQKMSaf63IJemkURWoqHusIeVB8Il91NjiCGQacPUu9qTFaShLbKG0Yj4RCMV56WPj7E14EMpbxy6PlBdILBOkKUB6TGTPJXh1tpdOHTG6KuIvcbQp9qWjaf1uxAKgiTtYRIHhxjJI2viVa6fDZ67QOouOaf2RXQhpsWaTtAVnff6PIFcvJhdPDFGV5nvmZWoCZQodj6yXRDHPw9PyF0iLYm9uFtEunlAAxGB5qqea4X5tZvB1OfLVwymY3a3JPjdxTdvHxCHbqqE0zip61JNqdmeWxGtlRBC6CGoCiHO4XxHCntQBRJDcG0zW7joTdgtTBarsQQhlLXBGMNBSNmmTbDf3hFtawUBCJH18IAiRMwyeQJbJ2bERsY3MVRPuYCf4Au7gN72iGh1lRktSQtEFye7pO46kMXRrEjHQWXInMzzy7X2StXUzHVTFF2VdOoKn0WUqFNvB6PF7qIsOlYKj57bi1Psa34s85WxMSbTkhrd7VHdHZkTVaWdraohXYOePdeEvIwObCGEXkETUzqM5P2yzoBOJSdjpIYaa8zzdLD3yrb1TwCZuJVxsrq0XXY6vErU4QntsW0972XmGNyumFNJiPm4ONKh1RLvS1kddY3nm8276S4TUuZfrRQO8QxZRNuSaZI8JRZp5VojB5DktuMxAQkqoPjQ5Vtb6oXeOyY591CB1MEW1fLTCs0NrL321SaNRMqza1ETogAxpEiYwZ6pIgnMmSqNMRdZnCqA4gMWw1lIVATWK83OCeicNRUNOdfzS7A8vbLcmvKPtpOFvhNzwrrUdkvuKvaYJviQgeR7snGetO9JLCwIlHIj52gMCNU18d32SJl7Xomtl3wIe02SMvq1i1BcaX7lXioqWGmgVqBWU3fsUuGwHi6RUKCCQdEOBfNo2WdpFaCflcgnn0O6jVHCqkv8cQk81AqS00rAmHGCNTwyA6Tq5TXoLlDnC8gAQjDUsZp0z' 1 65 0x384BCD6914407E40C295D1037CF4F990E8F0E720AF43CB706683177016D36D1A14B3A7CF22B5DF8D5D7D44D69610B64251ADE2E7AB54A3813A89935592E391BF91 'AW Ext 10a 1iter 65outBytes 1025pw 1025sa'

'passDATA', 'saltKEYbc' 16777216 7 0xAB96C76400D08B 'AW Spl 1 16777216iter 7outBytes 8pw 9sa'
'passDATAb00AB', 'saltKEYbcTcX' 2097152 481 0xC8CB4B4B498B32CDE191159866A8E86B4C9D84EF1D0A37CF7B9BDC7872EDD5F02242AA7D83172C778EF64C788D622ACBCD4317C4B63A2EDE184CB2A5F6B94815C395CC822D68C637ADB0E928C9692D32D6B66B3825CDB6AC9B57D9D15BCA72CC32773CA45350BB460F83172B75EDD418E2C39DF437FFFDDEF6FF5E83AFC2974E5B391303C80B73DA815E979118FB41ACC3E2019DB30C14650DC7E75D67A048541563A3ECA996CF15F9B3DD7C768B45613078CF772292F092CCFEC10F027669D60EDF56A383894F0EFD7DDC3551E1C6AA366F7EFB39981BF0BDF7894A83D051E900AF2FB81CA990F52EE613A5C2D28D28683E331F50BD10B6F8AF12705E505BCA3BB0D3869246863387DD385748718B3AAA51BA12BB067F1ABD6B8F2E0DECDA0A6693D1331349470E78212B2B4700709BC22C86AE7ADAB9C74635BC0E40A18BE604B8BE7ED1E0419258BB0C38D27264783FE2A915CD63C7CBB6C2D937803D86FFE9DC58132F2AF7642C782AF6A0D50AB47622A73EF16618E15B5CE8EEE9F5A1A477A02ADB5E95638792811013A9A8ACC9F618C4726DC26E67C1DDCE6E1E90594C94D4DE8FD8D89400AB3E8138089B4CD5893BD66691708D1C27FF7E69F12D1A15983352933DE1583A2127DC8B62E345C0B1CD14F9F7BC85FFBCEB40E80E84E8E8C0 'AW Spl 2 2097152iter 481outBytes 13pw 12sa' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T12:08:57.953

我能够对照我创建的结果验证所有结果

通过另一次运行来验证我自己的结果，我使用从 SO 复制/粘贴的 BouncyCastle 实现验证了 P = "password" S = "salt" c = 4096 dkLen = 64

非常感谢您发布测试向量。希望更多人验证

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-11-28T23:48:58.717

你们都疯了！

提供的测试数据未指定 PRF！如果您在此处查看 RFC2898 规范：[http](http://www.ietf.org/rfc/rfc2898.txt) ://www.ietf.org/rfc/rfc2898.txt ，您会注意到它向您展示了如何使用伪随机函数 (PRF) 实现 PBKDF2，但它没有告诉您用什么作为你的 PRF！

现在简单地说我将使用 HMACSHA512 作为我的 PRF，因此我的输出将与其他使用 HMACSHA512 的人一样是错误的！如果您查看 HMACSHA 的工作原理，您会注意到它需要一个密钥。现在 PBKDF2 规范没有告诉你应该如何使用 HMACSHA512。因此，例如，我使用密码作为我创建的 HMACSHA512 散列对象的密钥，然后使用该创建的对象进行所有散列。然而，其他人可能会出现并做一些不同的事情（但完全合法）并说好的，我将在每次哈希传递后更改 HMACSHA 密钥，这样 HMACSHA 密钥现在是最后一个哈希的值。

此外，您可以执行 concat Salt + Password 而不是 Password + Salt 之类的操作，这也会改变您的输出。PBKDF2 规范没有告诉你应该以什么顺序连接你的密码和盐，或者你应该何时/如何设置 HMACSHA 密钥，这取决于你来实现。所以我不知道你们都在尝试什么标准来匹配你的输出......但基本上你所做的只是让你的所有框架都容易受到 COMMON RAINBOW TABLE 的攻击，因为输出的方式都是相同的我可以制作一张表，每个人都可以使用它来实现相同的输出......

这是我的[https://github.com/Thashiznets/PWDTK.NET](https://github.com/Thashiznets/PWDTK.NET)以防你想知道我对此感兴趣:)

# ruby - 仅当字符串具有值时才 Gsub 字符串

> ID：15593192
> 
> 赞同：1
> 
> 时间：2013-03-23T23:14:21.370
> 
> 标签：ruby, ruby-on-rails-3, string

这是我的代码：

```
<a href="<%= foo_path(foo) %>" class="<%= foo.roles.empty? ? foo.roles.gsub(',', ' ') : ""  %>">

undefined method `empty?' for nil:NilClass 
```

如果里面有东西，我只想输出一个字符串的gsub `roles`，如果没有，那么就吐出一个空字符串。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T23:18:08.883

`nil.to_s`=> `''`，并且您的替换对空字符串没有影响，因此您可以`empty?`像这样完全跳过测试：

```
<a href="<%= foo_path(foo) %>" class="<%= foo.roles.to_s.gsub(',', ' ')  %>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:19:34.090

使用`blank?` [方法](http://api.rubyonrails.org/classes/Object.html#method-i-blank-3F)

```
<a href="<%= foo_path(foo) %>" class="<%= foo.roles.blank? ? "" : foo.roles.gsub(',', ' ')  %>"> 
```

# android - 谜题：每次重连后蓝牙数据发送间隔缩短一半

> ID：15593201
> 
> 赞同：0
> 
> 时间：2013-03-23T23:15:20.077
> 
> 标签：android, bluetooth, reconnect

我修改了标准的蓝牙聊天示例，每半秒一次向蓝牙设备发送 4 个字节的数据。如果我重新启动应用程序，它工作正常。但是，如果我按以下方式重新连接，则会出现问题：

连接蓝牙后，我再次单击菜单上的连接按钮并选择同一设备。这会断开蓝牙连接（不确定这是否是正确的断开连接程序）。然后，我通过选择设备再次连接，它将重新连接。重连后，出现了一个很奇怪的问题：不是每半秒发送一次数据，而是每四分之一秒发送一次数据。如果我再次执行该过程并重新连接，时间间隔将变得更短。它达到了接收端的蓝牙设备无法跟上数据的程度。此时，唯一的出路就是杀死应用程序并重新启动。然后一切变得正常，直到下次我再次尝试重新连接。

我尝试了不同的东西，但似乎没有任何东西可以解决这个问题。例如，我确保发送数据的线程在断开连接时被终止，因此没有多个线程正在发送数据。我想知道重新连接时波特率是否会改变，但是为什么波特率会影响 Thread.sleep(500); 语句（负责控制半秒数据发送）。任何帮助将不胜感激。

下面是代码，SendClass是在MainActivity下创建的：

```
class SendClass implements Runnable {
public void run() {
    bytearr[0]=0;bytearr[1]=0;bytearr[2]=0;bytearr[3]=0;
        while (!Thread.currentThread().isInterrupted()) {
        if (mChatService==null ||  mChatService.getState()          
                          !=BluetoothChatService.STATE_CONNECTED) {
        continue;
} else {
          try {
         Thread.sleep(500);
          } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
          }
        mChatService.write(bytearr);

                }
            }//end of run
        }//end of runnable 
```

然后在 STATE_CONNECTED 下：

```
 case BluetoothChatService.STATE_CONNECTED:

                setStatus(getString(R.string.title_connected_to,mConnectedDeviceName));

                    /*
                    if(sendingThread!=null){
                        //sendingThread.stop();
                        sendingThread.interrupt();
                        if(D) Log.i(TAG, "after sendingThread");
                        sendingThread = null;
                    }*/
                    sendingThread = new Thread(new SendClass());
                    sendingThread.start();

                    break; 
```

如您所见，我试图在创建新线程之前杀死线程，但这没有任何区别。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:24:59.423

您正在创建一个永远不会真正停止的线程，即使在您创建一个新线程并分配给特定线程不会停止运行的相同变量之后也是如此。您需要确保线程在断开连接后停止。这是我的建议

将您的 SendClass 更改为：

```
class SendClass implements Runnable {
private boolean stopped = false;
public void setStopped(boolean s){
  this.stopped = s;
}
public void run() {
bytearr[0]=0;bytearr[1]=0;bytearr[2]=0;bytearr[3]=0;
    while (!Thread.currentThread().isInterrupted() && !stopped) {
    if (mChatService==null ||  mChatService.getState() !=BluetoothChatService.STATE_CONNECTED) {
     continue;
    } else {
         try {
           Thread.sleep(500);
         } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
         }
         mChatService.write(bytearr);

         }
        }//end of run
    }//end of runnable 
```

然后，当您启动线程时，请保留对 Runnable 的引用，以便您可以`setStopped(true);`像这样调用

```
SendClass sc = new SendClass();
sendingThread = new Thread(sc);
sendingThread.start(); 
```

当您断开蓝牙连接时，请不要忘记调用`sc.setStopped(true);`，这样您的线程将通过不进入而完成。

# porting - 将java代码移植到contiki-os

> ID：15593202
> 
> 赞同：0
> 
> 时间：2013-03-23T23:15:20.250
> 
> 标签：porting, contiki

我正在使用 contiki-os 来模拟一些具有语义功能的微尘。由于 contiki-os (erbium) 是用 C 编写的，但我们的语义库是用 java 编写的。

如果可以在 erbium 或 contiki-os 中利用这些库，这里有人可以指导我吗？还是我必须从头开始重写所有内容？

**更新**

只是对问题的一个小更新。是否可以在 cooja 模拟器上使用 java 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:34:30.057

Cooja 确实是用 Java 编写的。

如果需要，您可以扩展或修改 Cooja。

[您可以在 Contiki wiki](https://github.com/contiki-os/contiki/wiki/An-Introduction-to-Cooja)以及[Fredrik Österlind 的众多论文](http://scholar.google.se/citations?hl=en&user=c_vkgKoAAAAJ&view_op=list_works&pagesize=100)中找到更多关于 Cooja的信息。也许您还应该看看 Fredrik 的博士论文[“Improving Low-Power Wireless Protocols with Timing-Accurate Simulation”](http://uu.diva-portal.org/smash/get/diva2:447343/FULLTEXT01)，主要是关于 Cooja。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:39:15.770

You might be able to use something like this:

```
http://www.codemesh.com/products/junction/ 
```

It appears to have a code generator that takes a java bytecode and create C code from it... but it might also need a runtime library that's platform specific.

With all that in mind, I don't think you will be successful. Most of the platforms are nearly out of space and/or flash by the time you are working with Erbuim; I doubt you'll have resources to process java code somehow.

And if you did get some success from this approach it would probably take a lot of time and effort to do so. With that time and effort you probably could have written the C code to do what you need instead.

# automation - 如何使用 dart 库使用 webdriver？

> ID：15593206
> 
> 赞同：0
> 
> 时间：2013-03-23T23:15:48.610
> 
> 标签：automation, webdriver, selenium-webdriver, dart

我无法开始使用 webdriver dart 库。我希望有一些简单的例子。我确实在后台运行了独立的 seleniumn 服务器。我对飞镖非常陌生，并且对 ruby​​ 和 watir-webdriver 非常有经验。

我期待类似于下面的代码

```
import 'package:webdriver/webdriver.dart';

main() {
  var url = "http://google.com";
  var driver = new WebDriver();

  b = driver.newSession(browser:'firefox');

  b.getUrl(url);

} 
```

但我得到的错误是

```
Unhandled exception:
No constructor 'WebDriver' declared in class 'WebDriver'. 
```

看源头

```
class WebDriver extends WebDriverBase {

  WebDriver(host, port, path) : super(host, port, path); 
```

所以看起来构造函数在那里；并且默认值在 WebDriverBase 中以转到远程服务器。我究竟做错了什么？我已经在互联网上搜索试图找到没有运气的简单例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-19T15:35:56.757

目前，本地和会话存储、脚本执行和日志访问存在已知问题。

要使用这些绑定，Selenium 独立服务器必须正在运行。您可以在[http://code.google.com/p/selenium/downloads/list](http://code.google.com/p/selenium/downloads/list)下载它。

有许多命令使用 id 来访问页面元素。这些 id 不是 HTML id；它们是 WebDriver 内部的不透明 ID。要获取元素的 id，您首先需要进行搜索，获取结果，然后使用“ELEMENT”键从返回的 Map 中提取 WebDriver id。请参阅[http://commondatastorage.googleapis.com/dartlang-api-docs/13991/webdriver.html](http://commondatastorage.googleapis.com/dartlang-api-docs/13991/webdriver.html)

# ruby-on-rails - Ruby on rails，将参数从一个动作传递到另一个动作

> ID：15593210
> 
> 赞同：0
> 
> 时间：2013-03-23T23:16:39.503
> 
> 标签：ruby-on-rails

我的控制器中有两个操作：搜索、show_db。

说，它们看起来像这样：

```
def search
   @uploads=current_user.uploads    
end

def show_db
end 
```

我需要将参数（@uploads）从`search`-action 传递到`show_db`-action。（我知道我可以写`@uploads=current_user.uploads`，`show_db`但我不能，它要复杂得多。）像这样的 smt：

```
def search
       @uploads=current_user.uploads
       show_db(@uploads)    
end

def show_db(list)
   blablabla
end 
```

有可能吗？=）

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:12:50.100

如果您想将一种方法的结果传递给另一种方法，这在 Ruby 中非常简单，您的第二个代码块应该可以工作，您只需要使用方法中参数中的列表变量

```
def show_db(list)
  x = list
  list.do_somethings
  etc
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:31:31.467

创建知道如何创建@uploads 的第三种方法，从两个操作中使用它。

此外，如果在您的索引操作中您想使用 @uploads 变量呈现 show_db，您可以这样做：

```
def search
  @uploads=current_user.uploads
  if something
    return show_db(@uploads)
  end
end

def show_db(list)
  blah
  render 'show_db'
end 
```

但在这种情况下，show_db 只是一个方法，而不是控制器动作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:54:12.360

您可能希望跨操作使用变量。您应该知道，每次从浏览器发出请求时，您都在创建一个新的控制器实例。因此，您的变量将无法正常工作，因为您实际上将尝试跨实例访问实例变量。一项不可能完成的任务。我建议使用会话来跨多个请求存储信息。谷歌起来如何使用会话。

# akka - 玩 2.1 连续两次承诺第二次未返回

> ID：15593212
> 
> 赞同：1
> 
> 时间：2013-03-23T23:16:54.243
> 
> 标签：akka, playframework-2.1

我按以下顺序放置了两个 Promise，并在收到 Promise 后立即将 Promise 映射到字符串结果。第二个承诺结果将无法返回。该错误仅发生在第二个承诺映射中。这是在 Play 2.1 Java 下进行的测试。有没有更好的方法来解决这个问题？

```
 Promise<String> prom1 = Akka.future(new Callable<String>() {
        public String call() {
            // intensive computation
            return "prom1 ret";
        }
    });
    Promise<String> prom2 = Akka.future(new Callable<String>() {
        public String call() {
            // intensive computation
            return "prom2 ret";
        }
    });
    String ret1 = prom1.map(
            new Function<String,String>() {
              public String apply(String str) {
                  return str + " affix";
              }
            }
          ).get();
    String ret2 = prom2.map(
            new Function<String,String>() {
                public String apply(String str) {
                    return str + " affix";
                }
              }
          ).get(); 
```

**我得到的例外：**

```
play.api.Application$$anon$1: Execution exception[[RuntimeException: java.util.concurrent.TimeoutException: Futures timed out after [10000 milliseconds]]]
    at play.api.Application$class.handleError(Application.scala:289) ~[play_2.10-2.1.0.jar:2.1.0]
    at play.api.DefaultApplication.handleError(Application.scala:383) [play_2.10-2.1.0.jar:2.1.0]
    at play.core.server.netty.PlayDefaultUpstreamHandler$$anon$2$$anonfun$handle$1.apply(PlayDefaultUpstreamHandler.scala:132) [play_2.10-2.1.0.jar:2.1.0]
    at play.core.server.netty.PlayDefaultUpstreamHandler$$anon$2$$anonfun$handle$1.apply(PlayDefaultUpstreamHandler.scala:128) [play_2.10-2.1.0.jar:2.1.0]
    at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10-2.1.0.jar:2.1.0]
    at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10-2.1.0.jar:2.1.0]
java.lang.RuntimeException: java.util.concurrent.TimeoutException: Futures timed out after [10000 milliseconds]
    at play.libs.F$Promise$6.apply(F.java:401) ~[play_2.10-2.1.0.jar:2.1.0]
    at scala.concurrent.Future$$anonfun$map$1.liftedTree2$1(Future.scala:253) ~[scala-library.jar:na]
    at scala.concurrent.Future$$anonfun$map$1.apply(Future.scala:249) ~[scala-library.jar:na]
    at scala.concurrent.Future$$anonfun$map$1.apply(Future.scala:249) ~[scala-library.jar:na]
    at scala.concurrent.impl.CallbackRunnable.run(Promise.scala:29) ~[scala-library.jar:na]
    at akka.dispatch.BatchingExecutor$Batch$$anonfun$run$1.liftedTree1$1(BatchingExecutor.scala:67) ~[akka-actor_2.10-2.1.0.jar:na]
Caused by: java.util.concurrent.TimeoutException: Futures timed out after [10000 milliseconds]
    at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:96) ~[scala-library.jar:na]
    at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:58) ~[scala-library.jar:na]
    at scala.concurrent.Await$$anonfun$ready$1.apply(package.scala:86) ~[scala-library.jar:na]
    at scala.concurrent.Await$$anonfun$ready$1.apply(package.scala:86) ~[scala-library.jar:na]
    at akka.dispatch.MonitorableThreadFactory$AkkaForkJoinWorkerThread$$anon$3.block(ThreadPoolBuilder.scala:173) ~[akka-actor_2.10-2.1.0.jar:na]
    at scala.concurrent.forkjoin.ForkJoinPool.managedBlock(ForkJoinPool.java:2803) ~[scala-library.jar:na] 
```

# c - Linux Shellcode“你好，世界！”

> ID：15593214
> 
> 赞同：28
> 
> 时间：2013-03-23T23:17:16.507
> 
> 标签：c, linux, assembly, nasm, shellcode

我有以下工作 NASM 代码：

```
global _start

section .text

_start:
    mov eax, 0x4
    mov ebx, 0x1
    mov ecx, message
    mov edx, 0xF
    int 0x80

    mov eax, 0x1
    mov ebx, 0x0
    int 0x80

section .data
    message: db "Hello, World!", 0dh, 0ah 
```

它将“Hello, World!\n”打印到屏幕上。我还有以下 C 包装器，其中包含以前的 NASM 对象代码：

```
char code[] =
"\xb8\x04\x00\x00\x00"
"\xbb\x01\x00\x00\x00"
"\xb9\x00\x00\x00\x00"
"\xba\x0f\x00\x00\x00"
"\xcd\x80\xb8\x01\x00"
"\x00\x00\xbb\x00\x00"
"\x00\x00\xcd\x80";

int main(void)
{
    (*(void(*)())code)();
} 
```

但是，当我运行代码时，似乎没有执行汇编代码，但程序退出正常。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-03-29T14:03:38.067

当你注入这个 shellcode 时，你不知道在`message`：

```
mov ecx, message 
```

在注入过程中，它可以是任何东西，但它不会是`"Hello world!\r\n"`因为它在数据部分中，而您只转储文本部分。你可以看到你的 shellcode 没有`"Hello world!\r\n"`：

```
"\xb8\x04\x00\x00\x00"
"\xbb\x01\x00\x00\x00"
"\xb9\x00\x00\x00\x00"
"\xba\x0f\x00\x00\x00"
"\xcd\x80\xb8\x01\x00"
"\x00\x00\xbb\x00\x00"
"\x00\x00\xcd\x80"; 
```

这是shellcode开发中的常见问题，解决方法是这样的：

```
global _start

section .text

_start:
    jmp MESSAGE      ; 1) lets jump to MESSAGE

GOBACK:
    mov eax, 0x4
    mov ebx, 0x1
    pop ecx          ; 3) we are poping into `ecx`, now we have the
                     ; address of "Hello, World!\r\n" 
    mov edx, 0xF
    int 0x80

    mov eax, 0x1
    mov ebx, 0x0
    int 0x80

MESSAGE:
    call GOBACK       ; 2) we are going back, since we used `call`, that means
                      ; the return address, which is in this case the address 
                      ; of "Hello, World!\r\n", is pushed into the stack.
    db "Hello, World!", 0dh, 0ah

section .data 
```

现在转储文本部分：

```
$ nasm -f elf shellcode.asm
$ ld shellcode.o -o shellcode
$ ./shellcode 
Hello, World!
$ objdump -d shellcode

shellcode:     file format elf32-i386

Disassembly of section .text:

08048060 <_start>:
 8048060:   e9 1e 00 00 00   jmp    8048083 <MESSAGE>

08048065 <GOBACK>:
 8048065:   b8 04 00 00 00   mov    $0x4,%eax
 804806a:   bb 01 00 00 00   mov    $0x1,%ebx
 804806f:   59               pop    %ecx
 8048070:   ba 0f 00 00 00   mov    $0xf,%edx
 8048075:   cd 80            int    $0x80
 8048077:   b8 01 00 00 00   mov    $0x1,%eax
 804807c:   bb 00 00 00 00   mov    $0x0,%ebx
 8048081:   cd 80            int    $0x80

08048083 <MESSAGE>:
 8048083:   e8 dd ff ff ff   call   8048065 <GOBACK>
 8048088:   48               dec    %eax                    <-+
 8048089:   65               gs                               |
 804808a:   6c               insb   (%dx),%es:(%edi)          |
 804808b:   6c               insb   (%dx),%es:(%edi)          |
 804808c:   6f               outsl  %ds:(%esi),(%dx)          |
 804808d:   2c 20            sub    $0x20,%al                 |
 804808f:   57               push   %edi                      |
 8048090:   6f               outsl  %ds:(%esi),(%dx)          |
 8048091:   72 6c            jb     80480ff <MESSAGE+0x7c>    |
 8048093:   64               fs                               |
 8048094:   21               .byte 0x21                       |
 8048095:   0d               .byte 0xd                        |
 8048096:   0a               .byte 0xa                      <-+

$ 
```

我标记的行是我们的`"Hello, World!\r\n"`字符串：

```
$ printf "\x48\x65\x6c\x6c\x6f\x2c\x20\x57\x6f\x72\x6c\x64\x21\x0d\x0a"
Hello, World!

$ 
```

所以我们的 C 包装器将是：

```
char code[] = 

    "\xe9\x1e\x00\x00\x00"  //          jmp    (relative) <MESSAGE>
    "\xb8\x04\x00\x00\x00"  //          mov    $0x4,%eax
    "\xbb\x01\x00\x00\x00"  //          mov    $0x1,%ebx
    "\x59"                  //          pop    %ecx
    "\xba\x0f\x00\x00\x00"  //          mov    $0xf,%edx
    "\xcd\x80"              //          int    $0x80
    "\xb8\x01\x00\x00\x00"  //          mov    $0x1,%eax
    "\xbb\x00\x00\x00\x00"  //          mov    $0x0,%ebx
    "\xcd\x80"              //          int    $0x80
    "\xe8\xdd\xff\xff\xff"  //          call   (relative) <GOBACK>
    "Hello wolrd!\r\n";     // OR       "\x48\x65\x6c\x6c\x6f\x2c\x20\x57"
                            //          "\x6f\x72\x6c\x64\x21\x0d\x0a"

int main(int argc, char **argv)
{
    (*(void(*)())code)();

    return 0;
} 
```

让我们测试它，[使用`-z execstack`](https://stackoverflow.com/questions/52342991/running-data-shellcode-in-c-executable)启用 read-implies-exec （[进程范围，尽管名称中有“堆栈”](https://stackoverflow.com/questions/23276488/why-is-execstack-required-to-execute-code-on-the-heap)），以便我们可以在`.data`or`.rodata`部分执行代码：

```
$ gcc -m32 test.c -z execstack -o test
$ ./test 
Hello wolrd! 
```

有用。(`-m32`在 64 位系统上也是必需的`int $0x80`。32 位 ABI 不能像在 PIE 可执行文件中那样使用 64 位地址`.rodata`。此外，机器代码是为 32 位汇编的。恰好相同的序列字节数将在 64 位模式下解码为等效指令，但情况并非总是如此。）

现代 GNU`ld`将`.rodata`. 放在一个单独的段中`.text`，因此它可以是不可执行的。它曾经足以`const char code[]`将可执行代码放入一页只读数据中。至少对于不想修改自身的 shellcode。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-06-26T19:19:55.180

正如[BSH](https://stackoverflow.com/users/1129665/bsh)提到的，您的 shellcode 不包含消息字节。在定义字节之前跳转到`MESSAGE`标签并调用例程是一个很好的举动，因为 msg 的地址将作为返回地址位于堆栈顶部，可以弹出到存储 msg 的地址的位置。`GOBACK``msg``ecx`

但是您和[BSH](https://stackoverflow.com/users/1129665/bsh)的代码都有一些限制。它包含`NULL bytes ( \x00 )`在被函数指针取消引用时将被视为字符串结尾的内容。

有一个聪明的方法可以解决这个问题。您存储的值`eax, ebx and edx`足够小，可以通过分别访问直接写入相应寄存器的低半字节`al, bl and dl`。上半字节可能包含垃圾值，因此可以进行异或运算。

```
b8 04 00 00 00 ------ mov $0x4,%eax 
```

变成

```
b0 04          ------ mov $0x4,%al
31 c0          ------ xor    %eax,%eax 
```

与之前的指令集不同，新指令集不包含任何 NULL 字节。

因此，最终程序如下所示：

```
global _start

section .text

_start:
jmp message

proc:
    xor eax, eax
    mov al, 0x04
    xor ebx, ebx
    mov bl, 0x01
    pop ecx
    xor edx, edx
    mov dl, 0x16
    int 0x80

    xor eax, eax
    mov al, 0x01
    xor ebx, ebx
    mov bl, 0x01   ; return 1
    int 0x80

message:
    call proc
    msg db " y0u sp34k 1337 ? "

section .data 
```

组装和链接：

```
$ nasm -f elf hello.asm -o hello.o
$ ld -s -m elf_i386 hello.o -o hello
$ ./hello
 y0u sp34k 1337 ? $ 
```

现在从 hello 二进制文件中提取 shellcode：

```
$ for i in `objdump -d hello | tr '\t' ' ' | tr ' ' '\n' | egrep '^[0-9a-f]{2}$' ` ; do echo -n "\\x$i" ; done 
```

输出：

```
\xeb\x19\x31\xc0\xb0\x04\x31\xdb\xb3\x01\x59\x31\xd2\xb2\x12\xcd\x80\x31\xc0\xb0\x01\x31\xdb\xb3\x01\xcd\x80\xe8\xe2\xff\xff\xff\x20\x79\x30\x75\x20\x73\x70\x33\x34\x6b\x20\x31\x33\x33\x37\x20\x3f\x20 
```

现在我们可以让我们的驱动程序来启动 shellcode。

```
#include <stdio.h>

char shellcode[] = "\xeb\x19\x31\xc0\xb0\x04\x31\xdb"
                   "\xb3\x01\x59\x31\xd2\xb2\x12\xcd"
                   "\x80\x31\xc0\xb0\x01\x31\xdb\xb3"
                   "\x01\xcd\x80\xe8\xe2\xff\xff\xff"
                   "\x20\x79\x30\x75\x20\x73\x70\x33"
                   "\x34\x6b\x20\x31\x33\x33\x37\x20"
                   "\x3f\x20";

int main(int argc, char **argv) {
    (*(void(*)())shellcode)();
    return 0;
} 
```

现代编译器中有某些安全功能，例如[NX 保护](http://en.wikipedia.org/wiki/Executable_space_protection)，可防止在数据段或堆栈中执行代码。所以我们应该明确指定编译器来禁用这些。

```
$ gcc -g -Wall -fno-stack-protector -z execstack launcher.c -o launcher 
```

现在`launcher`可以调用来启动 shellcode。

```
$ ./launcher
 y0u sp34k 1337 ? $ 
```

对于更复杂的 shellcode，会有另一个障碍。现代 Linux 内核具有[ASLR](http://en.wikipedia.org/wiki/Address_space_layout_randomization)，或者`Address Space Layout Randomization` 您可能需要在注入 shellcode 之前禁用它，尤其是当它通过缓冲区溢出时。

```
root@localhost:~# echo 0 > /proc/sys/kernel/randomize_va_space 
```

# php - jquery mobile ajax不适用css

> ID：15593217
> 
> 赞同：0
> 
> 时间：2013-03-23T23:17:20.437
> 
> 标签：php, jquery, jquery-mobile, jquery-post

我试图创建一个向下滚动的 ajax 一切正常，但 css 不适用于新内容。这就是我所拥有的。是他们无论如何要修复它。是什么让 jquery mobile ajax 失去了它的 css。

```
<style>
    #vart{ 
       height:170pt;width:200pt; 
       margin:2pt; float:left; 
       text-align:center; color:#666
    }
</style>

<script type="text/javascript">

$(document).ready(function()
{
    function last_msg_funtion()
    {
         var ID=$(".images:last").attr("id");
         $('div#last_msg_loader').html('<img src="ajax-loader.gif">');

         $.post("load/load.php?lastid="+ID,
             function(data){
                 if (data != "") {
                      $(".images:last").after(data);
                 }
                 $('div#last_msg_loader').trigger("pagecreate").trigger("refresh");
             }
         );
    };

    $(window).scroll(function(){
        if ($(window).scrollTop() == $(document).height() - $(window).height()){
            last_msg_funtion();
        }
    });

});

</script>

<div id="last_msg_loader"></div> 
```

# .net - DLR - 为什么我的堆栈跟踪中没有显示调试信息？

> ID：15593223
> 
> 赞同：8
> 
> 时间：2013-03-23T23:17:43.227
> 
> 标签：.net, linq, c#-4.0

首先，我读过[Making a CLR/.NET Language Debuggable](https://stackoverflow.com/questions/4357420/making-a-clr-net-language-debuggable/4384032#4384032)，但我仍然无法实现这一点。

我编写了一种玩具语言，它通过生成 Linq 表达式，然后调用 LambdaExpression#CompileToMethod 来工作。这些表达式中的大多数都附加了调试信息，如下所示：

```
//SmithExpression#InsertDebugInfo
Expression InsertDebugInfo(Expression expression, DebugInfo debugInfo) {
    var column = 1;
    var debugExpr = Expression.DebugInfo(debugInfo.SymbolDocumentInfo
                 ,Info.LineNumber, column, Info.LineNumber, column + 1);
    return Expression.Block(debugExpr, expression);
} 
```

DebugInfo 如下所示：

```
public class DebugInfo {
    /* arbitrary value from http://www.famkruithof.net/uuid/uuidgen */
    public static Guid SmithGuid = new Guid("83c65910-8376-11e2-9e96-0800200c9a66");

    public readonly SymbolDocumentInfo SymbolDocumentInfo;
    public readonly DebugInfoGenerator DebugPdbGenerator;

    public DebugInfo(String name) {
        SymbolDocumentInfo = Expression.SymbolDocument(name, SmithGuid);
        DebugPdbGenerator = DebugInfoGenerator.CreatePdbGenerator();
    }
} 
```

整个事情是这样编译的（你可以忽略关于init的部分）：

```
public static Action CompileSmithExpression(SmithExpression sexpression
           ,DebugInfo debugInfo, Parameter moduleParameter, Expando module) {
    AssemblyName assemblyName = 
        new AssemblyName(
             "RuntimeHelpers.CompileToSmithExpression helper assembly"
          );
    AssemblyBuilder assemblyBuilder =
        AppDomain.CurrentDomain.DefineDynamicAssembly(
          assemblyName, AssemblyBuilderAccess.RunAndSave
        );

    ModuleBuilder moduleBuilder = assemblyBuilder
             .DefineDynamicModule(assemblyName.Name, "onlyModule.dll");

    var debugAttributes =
        DebuggableAttribute.DebuggingModes.Default |
        DebuggableAttribute.DebuggingModes.DisableOptimizations;

    ConstructorInfo constructor =
        typeof(DebuggableAttribute)
       .GetConstructor(new Type[] { 
           typeof(DebuggableAttribute.DebuggingModes)
           }
        );
    var cab = new CustomAttributeBuilder(constructor, new object[] { debugAttributes });
    assemblyBuilder.SetCustomAttribute(cab);
    moduleBuilder.SetCustomAttribute(cab);

    TypeBuilder typeBuilder = 
       moduleBuilder.DefineType("MyDynamicType", TypeAttributes.Public);

    //inits generates expressions that set 'constant' fields to their values.
    //the call also adds the 'constant' fields to the typeBuilder.
    //Must call ToArray() to make it run.
    var inits = FieldInits(sexpression, typeBuilder).ToArray();
    var ex = sexpression.ToExpression(debugInfo);
    var fullDlrExpression = Expression.Block(inits.Append(ex));

    var parameters = new ParameterExpression[] { moduleParameter.DlrParameter };
    var lambda = Expression.Lambda(fullDlrExpression, parameters);

    /* Method will take the module as a parameter. */
    MethodBuilder meth = typeBuilder.DefineMethod(
        "MyMethod",
        MethodAttributes.Public | MethodAttributes.Static,
        typeof(void),
        new Type[] { typeof(Expando) } );

    lambda.CompileToMethod(meth, debugInfo.DebugPdbGenerator);

    Type madeType = typeBuilder.CreateType();

    return () => madeType.GetMethod("MyMethod").Invoke(null, new Object[] { module });
} 
```

运行代码给出了我想要的异常，但不包括表达式所具有的调试信息。我希望它说类似“<error_immediate, 1>”的内容。

```
Unhandled Exception: System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.MissingMemberException: Can't invoke member error of [] []
at (wrapper dynamic-method) object.CallSite.Target (System.Runtime.CompilerServices.Closure,System.Runtime.CompilerServices.CallSite,Smith.Expando) <IL 0x0004f, 0x00127>
at System.Dynamic.UpdateDelegates.UpdateAndExecute1<Smith.Expando, object> (System.Runtime.CompilerServices.CallSite,Smith.Expando) <0x0040b>
at MyDynamicType.MyMethod (Smith.Expando) <IL 0x002bc, 0x00aaa>
at (wrapper managed-to-native) System.Reflection.MonoMethod.InternalInvoke (System.Reflection.MonoMethod,object,object[],System.Exception&) <IL 0x00016, 0x00067>
etc... 
```

我最好的猜测是调试信息确实在那里，但我必须做更多的工作才能让堆栈跟踪显示它。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T16:29:14.083

您的异常是嵌套异常。要打印堆栈跟踪，请查看 InnerException。

```
catch (Exception ex)
{
    while (ex != null) {
        Debug.Print(ex.ToString());
        ex = ex.InnerException();
    }
} 
```

# sass - Docpad Scss 不起作用

> ID：15593225
> 
> 赞同：3
> 
> 时间：2013-03-23T23:17:46.077
> 
> 标签：sass, docpad

我正在尝试让 docpad 在 Windows 7 系统上与 scss 一起工作。

据我所知，我已经安装了 sass 并且可以正常工作，因为它从命令行开始运行。环境变量中的路径是正确的。

docpad 正在工作，因为我在 out 文件夹中获得了编译的代码。

但是当我添加一个 css.scss 文件时出现错误

错误：SCSS 在您的系统上似乎不可用

我试图添加一个插件配置：

插件：sass：scssPath：“/Ruby139/bin”

但这给出了另一个错误

有谁知道现在要尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:49:34.643

所以答案是设置 ruby​​ 文件夹中 sass 批处理文件的正确路径：

```
plugins:
    sass:
        sassPath: 's:/Ruby193/bin/sass.bat'
        scssPath: 's:/Ruby193/bin/scss.bat' 
```

# php - 当我使用另一个控制器呈现页面时，表单验证停止工作

> ID：15593231
> 
> 赞同：1
> 
> 时间：2013-03-23T23:18:23.183
> 
> 标签：php, codeigniter, variable-assignment

我写了一个快速的 CI 库类来渲染我的页面，这样我就不必一直输入'$this->load->view' 并且为了 DRY。现在，当我在传递无效数据后重新呈现我的联系表单时，错误消息不会出现。

图书馆类：

```
class Page extends CI_Controller {

    public function render($page, $data) { // $page should be path to page view

        $this->load->view('fragments/header', $data);
        $this->load->view('fragments/navigation');
        $this->load->view($page);
        $this->load->view('fragments/navigation');
        $this->load->view('fragments/footer');

    }  

} 
```

和控制器：

```
class Contact extends CI_Controller {

    public function __construct() {
        parent::__construct();

        $this->load->helper('form');
        $this->load->library(array('form_validation', 'email', 'page'));
    }

    public function index() {

        $this->form_validation->set_rules('sender_name', 'From', 'required');
        $this->form_validation->set_rules('sender_email', 'Email', 'required|valid_email');
        $this->form_validation->set_rules('subject', 'Subject', 'required');
        $this->form_validation->set_rules('message', 'Message', 'required');

        if ($this->form_validation->run() === FALSE) {

            $this->load->library('page');
            $this->page->render('contact/contact', array('title' => 'Contact Me')); // pass in page title

            /* IT WORKED THIS WAY
            $this->load->view('fragments/header', array('title' => 'Contact Me')); // pass in page title
            $this->load->view('fragments/navigation');
            $this->load->view('contact/contact'); // TODO maintain form state
            $this->load->view('fragments/navigation');
            $this->load->view('fragments/footer');
             * 
             */
        }

//SNIP 
```

联系表格视图：

```
<h1>Contact Me</h1>
<?php echo form_open('contact', 'id="contact_form"'); ?>

<label for="sender_name">Name:</label>
<?php echo form_input('sender_name'); ?>
<span class="error"><?php echo form_error('sender_name'); ?></span>

<label for="sender_email">Email:</label>
<?php echo form_input('sender_email'); ?>
<span class="error"><?php echo form_error('sender_email'); ?></span>

<label for="subject">Subject:</label>
<?php echo form_input('subject'); ?>
<span class="error"><?php echo form_error('subject'); ?></span>

<label for="message">Message:</label>
<?php echo form_textarea('message'); ?>
<span class="error"><?php echo form_error('message'); ?></span>

<?php echo form_submit('submit', 'Send'); ?> 
```

如何使用此帮助程序呈现页面并仍然从 form_validation 库中检索错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:50:40.387

在您的视图文件夹中创建一个名为`template.php`的视图，其中包含以下代码：

```
<?php

$this->load->view('fragments/header', $this->_ci_cached_vars); // pass $data vars
$this->load->view('fragments/navigation');
$this->load->view($view);
$this->load->view('fragments/navigation');
$this->load->view('fragments/footer'); 
```

然后使用下面的控制器代码：

```
public function index() {

    $this->form_validation->set_rules('sender_name', 'From', 'required');
    $this->form_validation->set_rules('sender_email', 'Email', 'required|valid_email');
    $this->form_validation->set_rules('subject', 'Subject', 'required');
    $this->form_validation->set_rules('message', 'Message', 'required');

    if ($this->form_validation->run() === FALSE) {

        $data = array(
            'view' => 'contact/contact', 
            'title' => 'Contact Me');
        $this->load->view('template', $data);
    } 
```

您不需要创建库来执行此操作，因为您只需创建一个模板视图，该视图将加载适当的视图和指定的视图并将数据传递给它们。

# javascript - 未捕获的 ReferenceError：未定义 toggleTest

> ID：15593233
> 
> 赞同：0
> 
> 时间：2013-03-23T23:18:26.337
> 
> 标签：javascript, html

`toggleTest`是一个函数：

```
function toggleTest() {
    if(document.testRunning) {
        stopTest();
    } else {
        startTest();
    }
}; 
```

当我点击按钮时，我激活了这条线：

```
<input type="button" onclick="toggleTest()" id="toggleBtn" value="Stop Test" /><br /> 
```

我得到错误*`Uncaught ReferenceError: toggleTest is not defined`*我不明白如果定义了函数我为什么会得到错误。

[演示 jsFiddle](http://jsfiddle.net/TEt8R/)

所有代码：

```
<!DOCTYPE html>
<html>
<head>
<title>HTML5 Canvas Drawing Speed Tests</title>
<script type="text/javascript">
window.onload=function(){
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})();
window.cancelRequestAnimFrame = ( function() {
    return window.cancelAnimationFrame          ||
        window.webkitCancelRequestAnimationFrame    ||
        window.mozCancelRequestAnimationFrame       ||
        window.oCancelRequestAnimationFrame     ||
        window.msCancelRequestAnimationFrame        ||
        clearTimeout
} )();

function toggleTest() {
    if(document.testRunning)
    {
        stopTest();
    }
    else
    {
        startTest();
    }
};

function changeTestType() {
    stopTest();
    startTest();
}

function startTest() {
    if(toggleBtn == "Start Test"){
        var radios = document.getElementsByName("testType");
                for(var i = 0; i < radios.length; i++)
                {
                    if(radios[i].checked == true)
                    {
                        document.testType = radios[i].id;
                        document.useRAF = true;
                        break;
                    }
                }
        if(document.useRAF){
            document.testInterval = setInterval(function() {runTest();}, 1000/60);}
            document.testRunning = true;    
            runTest();
        }
}

function stopTest() {
    if(!document.useRAF)
        clearInterval(document.testInterval);
    else
        cancelRequestAnimFrame(document.requestAnimFrameId);
    document.testRunning = false;
    document.getElementById("toggleBtn").value = "Start Test";
}

function runTest() {
    if(document.useRAF)
        document.requestAnimFrameId = requestAnimFrame(runTest);
        document.testType();
}

var ToggleBtn = document.getElementById("toggleBtn").value;
}
</script>
</head>
<body >
    <div id="canvasContainer" style="position: relative;">
        <canvas id="testCanvas" width="180" height="50" style="background-color:black">Sorry your browser doesn't support the HTML5 canvas!</canvas>
    </div>
    <div id="debugData" style="position: relative;">
        <div id="debugControls" style="position:absolute;top:60px;left:0">
            <form id="testForm">
            <input type="button" onclick="toggleTest()" id="toggleBtn" value="Stop Test" /><br />
            <label><input type="checkbox" id="rAF" onclick="changeTestType()" />Use requestAnimationFrame</label><br /><br />
            <label><input type="radio" onchange="changeTestType()" name="testType" id="functionA" />functionA</label><br />
            <label><input type="radio" onchange="changeTestType()" name="testType" id="functionB" />functionB</label><br />
            <label><input type="radio" onchange="changeTestType()" name="testType" id="functionC" />functionC</label><br />
            <label><input type="radio" onchange="changeTestType()" name="testType" id="functionD" />functionD</label><br />
            </form>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T23:25:47.513

因为您将代码放在 window.onload 中，它会在该函数范围内创建函数和 toggleTest 定义！只需将其移动到全局范围内[http://jsfiddle.net/TEt8R/1/](http://jsfiddle.net/TEt8R/1/)

```
//change to be in body 
```

# java - Java原生浏览器登录提示

> ID：15593236
> 
> 赞同：0
> 
> 时间：2013-03-23T23:18:46.810
> 
> 标签：java, android, https

我正在尝试使用 Java 对使用本机登录提示的浏览器进行 HTTPS 调用。

[http://blog.stevensanderson.com/2008/08/25/using-the-browsers-native-login-prompt/](http://blog.stevensanderson.com/2008/08/25/using-the-browsers-native-login-prompt/)

目前我正在使用以下 HTTP 并且它适用于其他网站，因为我知道要输入的参数......但是对于上述类型的登录它失败（我不知道如何捕获参数......它是一个登录弹出..或者如果这甚至是正确的方法）....有什么想法吗？？..谢谢

```
HttpUtility.sendPostRequest(requestURL, params);
String[] response = HttpUtility.readMultipleLinesRespone(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:49:46.617

@alex：好的......我设法按照您的建议建立了HTTPS连接：

```
URL url = new URL("https://www.example.com/Login");
URLConnection urlConnection = url.openConnection();
urlConnection.setRequestProperty("Authorization", "Basic " + authString);
InputStream is = urlConnection.getInputStream();
InputStreamReader isr = new InputStreamReader(is);

//then I read the input stream.. 
```

但是，当我尝试在另一种方法中使用此代码建立另一个连接（比如登录后转到另一个页面）时......以 URLConnection 作为参数：

```
//Below is in a method called account(URLConnection urlConnection)

URL url = new URL("https://www.example.com/account.aspx");
urlConnection = url.openConnection();
InputStream is = urlConnection.getInputStream();
InputStreamReader isr = new InputStreamReader(is);

//again I read the input stream.. 
```

...它抛出以下异常...登录之前出现相同的异常...我该如何纠正？

```
Server returned HTTP response code: 401 for URL: https://www.example.com/account.aspx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T23:22:22.610

您可能已经摆脱了这个问题，但我最近遇到了一个问题，涉及实现类似于浏览器的本机登录提示的功能。我已经解决了它并写了一篇关于它的帖子。Steven Sanderson 的帖子也对我有帮助，帮助我理解某些概念。

[http://captaindanko.blogspot.com.au/2015/04/how-does-browsers-native-login-prompt.html](http://captaindanko.blogspot.com.au/2015/04/how-does-browsers-native-login-prompt.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T02:54:02.527

服务器应使用标头和状态 401 响应您的第一个请求`WWW-Authenticate`。标头将包含它所期望的身份验证类型的详细信息。

`Authorization`然后，您可以在以正确格式向您的请求添加标头后重试。

# pdf - 如何计算锁定的pdf中的特定单词

> ID：15593237
> 
> 赞同：1
> 
> 时间：2013-03-23T23:18:48.627
> 
> 标签：pdf, word-count

如何计算锁定的 pdf 文件中的特定单词。

我在这里谈论年度报告。你可以在里面搜索，但你不能复制出来（不管出于什么原因，没有意义）。

在永远谷歌搜索之后，我仍然没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:23:24.847

如果您的文件包含文本（而不仅仅是扫描的图像）并且使用的字体包含有关从字形到字符的映射的信息，那么您应该能够使用任何提供文本提取功能的 PDF 库从文件中提取文本。

通常通过设置使用权限来禁止复制文本。许多 PDF 库忽略这些设置并允许从锁定的 PDF 中提取文本。

根据库的不同，您可以尝试提取整个文本并将其自己拆分为单词，或者将文本提取为单词的集合（如果库可以为您将文本拆分为单词）。

这是[Docotic.Pdf 库](https://bitmiracle.com/pdf-library/)的示例代码，它展示了如何构建包含有关在 PDF 文档中找到的单词及其使用次数的信息的字典。

```
public static Dictionary<string, int> countWords(string file)
{
    Dictionary<string, int> wordCounts = new Dictionary<string, int>();

    using (PdfDocument pdf = new PdfDocument(file))
    {
        foreach (PdfPage page in pdf.Pages)
        {
            PdfCollection<PdfTextData> words = page.GetWords();
            foreach (PdfTextData word in words)
            {
                int count = 0;
                wordCounts.TryGetValue(word.Text, out count);
                wordCounts[word.Text] = count++;
            }
        }
    }

    return wordCounts;
} 
```

免责声明：我为 Docotic.Pdf 的供应商工作。

# java - 如何在 GUI 程序运行之前读取文本文件

> ID：15593238
> 
> 赞同：0
> 
> 时间：2013-03-23T23:19:06.970
> 
> 标签：java, swing, file, user-interface, vector

我已经搜索了论坛，但一直找不到解决方案。

我正在制作一种带有 GUI 程序的库。我想要的是它通过文本文件保存条目。我可以使用我拥有的方法很好地创建对象，并且可以轻松地将它们保存到文件中。问题来自于再次启动程序并使用文本文件中的值填充 Vector。我添加的对象有一个字符串值，后跟 7 个布尔值。当我尝试从文件加载时，字符串值为空（“”）并且所有布尔值都是错误的。

在启动 GUI 的其余部分并正确填充 Vector 之前，如何让它读取文本？

编辑：很抱歉对这一切都非常含糊。我会发布代码，但它大约有 337 行长..

```
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.PrintWriter;
import java.util.Collections;
import java.util.Scanner;
import java.util.Vector;

import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;

@SuppressWarnings("serial")
public class SteamLibraryGUI extends JFrame implements ActionListener
{
    //For main window
    private JButton exitButton, addEntry, editEntry, removeEntry; 
    private JLabel selectGame, gameCount;
    private JComboBox<String> gameCombo;
    private Vector<Game> gamesList = new Vector<Game>();
    private Vector<String> titleList = new Vector<String>();
    private int numGames = gamesList.size();
    private int selectedGame;

    //For add window
    private JFrame addFrame;
    private JLabel gameTitle = new JLabel("Title:");
    private JTextField titleText = new JTextField(60);
    private JCheckBox singleBox, coopBox, multiBox, cloudBox, controllerBox, achieveBox, pcBox;
    private JButton addGame, addCancel;

    //For edit window
    private JFrame editFrame;
    private JButton editGame, editCancel;

    public SteamLibraryGUI()
    {

        setTitle("Steam Library Organizer");
        addEntry = new JButton("Add a game");
        editEntry = new JButton("Edit a game");
        removeEntry = new JButton("Remove a game");
        exitButton = new JButton("Exit");
        selectGame = new JLabel("Select a game:");
        gameCount = new JLabel("Number of games:"+numGames);
        gameCombo = new JComboBox<String>(titleList);

        JPanel selectPanel = new JPanel();
        selectPanel.setLayout(new GridLayout(1,2));
        selectPanel.add(selectGame);
        selectPanel.add(gameCombo);

        JPanel buttonPanel = new JPanel();
        buttonPanel.setLayout(new GridLayout(1,3));
        buttonPanel.add(addEntry);
        buttonPanel.add(editEntry);
        buttonPanel.add(removeEntry);

        JPanel exitPanel = new JPanel();
        exitPanel.setLayout(new GridLayout(1,2));
        exitPanel.add(gameCount);
        exitPanel.add(exitButton);

        Container pane = getContentPane();
        pane.setLayout(new GridLayout(3,1));
        pane.add(selectPanel);
        pane.add(buttonPanel);
        pane.add(exitPanel);

        addEntry.addActionListener(this);
        editEntry.addActionListener(this);
        removeEntry.addActionListener(this);
        exitButton.addActionListener(this);
        gameCombo.addActionListener(this);
    }

    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource()==addEntry)
            addEntry();
        if(e.getSource()==editEntry)
            editEntry(gamesList.get(selectedGame));
        if(e.getSource()==removeEntry)
        {
            removeEntry(selectedGame);
            update();
        }
        if(e.getSource()==exitButton)
            exitProg();
        if(e.getSource()==gameCombo)
            {
                selectedGame = gameCombo.getSelectedIndex();
            }
        if(e.getSource()==singleBox)
            singleBox.isSelected();
        if(e.getSource()==coopBox)
            coopBox.isSelected();
        if(e.getSource()==multiBox)
            multiBox.isSelected();
        if(e.getSource()==cloudBox)
            cloudBox.isSelected();
        if(e.getSource()==controllerBox)
            controllerBox.isSelected();
        if(e.getSource()==achieveBox)
            achieveBox.isSelected();
        if(e.getSource()==pcBox)
            pcBox.isSelected();
        if(e.getSource()==addGame)
        {
            gamesList.add(new Game(titleText.getText(), singleBox.isSelected(), coopBox.isSelected(), 
                    multiBox.isSelected(), cloudBox.isSelected(), controllerBox.isSelected(), 
                    achieveBox.isSelected(), pcBox.isSelected()));
            titleList.add(titleText.getText());
            addFrame.dispose();
            update();
        }
        if(e.getSource()==addCancel)
            addFrame.dispose();
        if(e.getSource()==editCancel)
            editFrame.dispose();
        if(e.getSource()==editGame)
        {
            gamesList.get(selectedGame).name = titleText.getText();
            gamesList.get(selectedGame).single = singleBox.isSelected();
            gamesList.get(selectedGame).coop = coopBox.isSelected();
            gamesList.get(selectedGame).multi = multiBox.isSelected();
            gamesList.get(selectedGame).cloud = cloudBox.isSelected();
            gamesList.get(selectedGame).controller = controllerBox.isSelected();
            gamesList.get(selectedGame).achieve = achieveBox.isSelected();
            gamesList.get(selectedGame).pc = pcBox.isSelected();
            titleList.remove(selectedGame);
            titleList.add(titleText.getText());
            editFrame.dispose();
            update();
        }
    }

    public void update()
    {
        Collections.sort(titleList);
        Collections.sort(gamesList);
        gameCombo.updateUI();
        titleText.setText("");
        gameCombo.setSelectedIndex(-1);
        numGames = gamesList.size();
        gameCount.setText("Number of games:"+numGames);
    }

    public void addEntry()
    {
        addFrame = new JFrame("Add Entry");
        addFrame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        addFrame.getContentPane();
        addFrame.setLayout(new GridLayout(3,1));

        singleBox = new JCheckBox("Single-Player");
        singleBox.setSelected(false);
        coopBox = new JCheckBox("Coop");
        coopBox.setSelected(false);
        multiBox = new JCheckBox("MultiPlayer");
        multiBox.setSelected(false);
        cloudBox = new JCheckBox("Steam Cloud");
        cloudBox.setSelected(false);
        controllerBox = new JCheckBox("Controller Support");
        controllerBox.setSelected(false);
        achieveBox = new JCheckBox("Achievements");
        achieveBox.setSelected(false);
        pcBox = new JCheckBox("For New PC");
        pcBox.setSelected(false);
        addGame = new JButton("Add game");
        addCancel = new JButton("Cancel");

        JPanel titlePanel = new JPanel();
        titlePanel.setLayout(new FlowLayout());
        titlePanel.add(gameTitle);
        titlePanel.add(titleText);

        JPanel checkPanel = new JPanel();
        checkPanel.setLayout(new FlowLayout());
        checkPanel.add(singleBox);
        checkPanel.add(coopBox);
        checkPanel.add(multiBox);
        checkPanel.add(cloudBox);
        checkPanel.add(controllerBox);
        checkPanel.add(achieveBox);
        checkPanel.add(pcBox);

        JPanel buttonPanel = new JPanel();
        buttonPanel.setLayout(new FlowLayout());
        buttonPanel.add(addGame);
        buttonPanel.add(addCancel);

        addFrame.add(titlePanel);
        addFrame.add(checkPanel);
        addFrame.add(buttonPanel);

        singleBox.addActionListener(this);
        coopBox.addActionListener(this);
        multiBox.addActionListener(this);
        cloudBox.addActionListener(this);
        controllerBox.addActionListener(this);
        achieveBox.addActionListener(this);
        pcBox.addActionListener(this);
        addGame.addActionListener(this);
        addCancel.addActionListener(this);

        addFrame.pack();
        addFrame.setVisible(true);
    }

    public void editEntry(Game g)
    {
        editFrame = new JFrame("Edit Entry");
        editFrame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        editFrame.getContentPane();
        editFrame.setLayout(new GridLayout(3,1));

        singleBox = new JCheckBox("Single-Player");
        singleBox.setSelected(g.single);
        coopBox = new JCheckBox("Coop");
        coopBox.setSelected(g.coop);
        multiBox = new JCheckBox("MultiPlayer");
        multiBox.setSelected(g.multi);
        cloudBox = new JCheckBox("Steam Cloud");
        cloudBox.setSelected(g.cloud);
        controllerBox = new JCheckBox("Controller Support");
        controllerBox.setSelected(g.controller);
        achieveBox = new JCheckBox("Achievements");
        achieveBox.setSelected(g.achieve);
        pcBox = new JCheckBox("For New PC");
        pcBox.setSelected(g.pc);
        editGame = new JButton("Edit game");
        editCancel = new JButton("Cancel");
        titleText.setText(g.name);

        JPanel titlePanel = new JPanel();
        titlePanel.setLayout(new FlowLayout());
        titlePanel.add(gameTitle);
        titlePanel.add(titleText);

        JPanel checkPanel = new JPanel();
        checkPanel.setLayout(new FlowLayout());
        checkPanel.add(singleBox);
        checkPanel.add(coopBox);
        checkPanel.add(multiBox);
        checkPanel.add(cloudBox);
        checkPanel.add(controllerBox);
        checkPanel.add(achieveBox);
        checkPanel.add(pcBox);

        JPanel buttonPanel = new JPanel();
        buttonPanel.setLayout(new FlowLayout());
        buttonPanel.add(editGame);
        buttonPanel.add(editCancel);

        editFrame.add(titlePanel);
        editFrame.add(checkPanel);
        editFrame.add(buttonPanel);

        singleBox.addActionListener(this);
        coopBox.addActionListener(this);
        multiBox.addActionListener(this);
        cloudBox.addActionListener(this);
        controllerBox.addActionListener(this);
        achieveBox.addActionListener(this);
        pcBox.addActionListener(this);
        editGame.addActionListener(this);
        editCancel.addActionListener(this);

        editFrame.pack();
        editFrame.setVisible(true);
    }

    public void removeEntry(int g)
    {
        Object[] options = {"Yes, remove the game", "No, keep the game"};

        int n = JOptionPane.showOptionDialog(null, "Are you sure you want to remove this game from the list?",
                "Remove game?", JOptionPane.YES_NO_OPTION, JOptionPane.WARNING_MESSAGE, null, options, options[1]);
        if (n==0)
        {
            gamesList.remove(g);
            titleList.remove(g);
        }
    }

    public void exitProg()
    {
        try 
        {
            PrintWriter out = new PrintWriter("games.txt");
            out.flush();
            for(int i=0;i<gamesList.size();i++)
            {

                out.print(gamesList.get(i).toString());
            }
            out.close();
        }
        catch (FileNotFoundException e) {}
        System.exit(0);
    }

    public static void main(String[] args)
    {
        SteamLibraryGUI frame = new SteamLibraryGUI();
        frame.pack();
        frame.setSize(600,200);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Scanner in = new Scanner("games.txt");
        while(in.hasNextLine())
        {
            String line = in.nextLine();
            String[] options = line.split("|");
            Game g = new Game(options[0],Boolean.getBoolean(options[1]),
                    Boolean.getBoolean(options[2]),Boolean.getBoolean(options[3]),
                    Boolean.getBoolean(options[4]),Boolean.getBoolean(options[5]),
                    Boolean.getBoolean(options[6]),Boolean.getBoolean(options[7]));
            frame.gamesList.add(g);
            frame.titleList.add(options[0]);
            System.out.println(g.toString());
        }
        in.close();
    }
} 
```

还有一个 Game 类，但它只是 1 个字符串，然后是 7 个布尔值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:37:07.603

代码中有两个重大错误。首先，`Scanner`是用字符串参数构造的（这意味着 Scanner 扫描的是字符串，而不是字符串命名的文件）。二、竖线字符“|” 是一个正则表达式元字符。这很重要，因为`line.split()`拆分正则表达式。因此，“|” 必须逃脱。`main()`如果编写如下（包含调试输出代码以显示每个步骤都正常工作），则该函数可以正常工作：

```
public static void main(String[] args)
{
    SteamLibraryGUI frame = new SteamLibraryGUI();
    frame.pack();
    frame.setSize(600,200);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    try
    {
        Scanner in = new Scanner(new File("games.txt"));
        while(in.hasNextLine())
        {
            System.out.println("line = ");
            String line = in.nextLine();
            System.out.println(line);
            String[] options = line.split("\\|");
            System.out.println("Options = ");
            for (String s : options)
            {
                System.out.println(s);
            }
            Game g = new Game(options[0],Boolean.getBoolean(options[1]),
                Boolean.getBoolean(options[2]),Boolean.getBoolean(options[3]),
                Boolean.getBoolean(options[4]),Boolean.getBoolean(options[5]),
                Boolean.getBoolean(options[6]),Boolean.getBoolean(options[7]));
            frame.gamesList.add(g);
            frame.titleList.add(options[0]);
            System.out.println(g.toString());
        }
        in.close();
    } catch (IOException x) 
    {
        System.err.println(x);
    }
} 
```

还有一个重要的陷阱：该方法`exitProg()`在程序完成之前再次写出“games.txt”文件。如果文件首先被错误地读取，这会产生问题，因为错误的数据将被写回文件。在测试期间，这意味着即使读取代码已被纠正，它仍会读取从先前测试运行中写入的错误数据。

在这种情况下，我的偏好是隔离类中“game.txt”的所有读写代码`Game`（这样更容易验证读写格式是否相同），只编写写入数据的代码一旦我编写并测试了阅读代码，就退出，这将避免这个问题。

# python - python - 在通过 crontab 调用的脚本中运行 ssh/rsync 命令

> ID：15593242
> 
> 赞同：1
> 
> 时间：2013-03-23T23:19:52.360
> 
> 标签：python, ssh, rsync, fabric

我有一个非常奇怪的问题，我似乎无法弄清楚。

当我在 SSH 终端（putty）中执行包含以下行的 python 脚本时，它可以正常工作。但是当我通过 crontab 运行脚本时，甚至`nohup python myscript >/dev/null 2>&1&`它似乎都没有执行这些命令。

```
subprocess.call('rsync -avr /path/to/folder/. --include "delta.*" --exclude "*" -e "ssh -o StrictHostKeyChecking=no -i /path/to/key.pem" ec2-user@'+server+':/path/to/folder/', shell=True)
local('ssh -t -o StrictHostKeyChecking=no -i /path/to/key.pem ec2-user@'+server+' "sudo /usr/bin/indexer -c /path/to/sphinx.conf --merge main delta --rotate"') 
```

基本上，以上所有操作都是将带有新 sphinx 搜索引擎更新的文件夹同步到远程服务器，然后第二行运行远程 ssh 命令以强制搜索引擎将更新轮换到生产环境中。

我确实安装了结构（因此是本地命令），但为了避免制造第二个文件，我希望一行代码可以让我在远程服务器上执行 sudo 命令。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:04:58.947

我找到了答案，对于在后台运行的脚本中的 ssh 命令，您需要`-t -t`强制使用伪终端。

参考：

[不会分配伪终端，因为 stdin 不是终端](https://stackoverflow.com/questions/7114990/pseudo-terminal-will-not-be-allocated-because-stdin-is-not-a-terminal)

# gwt - GWT 可视化 API VisualizationUtils.LoadVisualizationApi

> ID：15593243
> 
> 赞同：0
> 
> 时间：2013-03-23T23:20:00.583
> 
> 标签：gwt, google-visualization, gwt-visualization

假设存在一个应用程序，其中您有多个不同的视图，每个视图都包含多个相同类型的图形。

我的问题是，每次创建新图表时是否需要加载可视化 API，如本示例[http://code.google.com/p/gwt-google-apis/wiki/VisualizationGettingStarted](http://code.google.com/p/gwt-google-apis/wiki/VisualizationGettingStarted)所示，或者如果我加载一次可视化，我是否不再需要创建一个 Runnable 来等待加载可视化以便显示数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:54:24.430

**是的，我们不能离线使用 Google Charts。**

由于[我们无法将 Google Visualization api 下载](https://developers.google.com/chart/interactive/faq#localdownload)到我们的本地机器，我们必须动态加载它们。

**可运行的方式**

```
 Runnable onLoadCallback = new Runnable() {
                      public void run() 
                      {
  PieChart pie = new PieChart(createTable(result), createOptions());
  pie.addSelectHandler(createSelectHandler(pie));
   dataCHTabel.clear();
    dataCHTabel.add(pie);
    }
    };
   VisualizationUtils.loadVisualizationApi(onLoadCallback, PieChart.PACKAGE); 
```

**新的可视化 API 加载方式：**

不推荐使用上述行，加载所有图表的新方法是

```
VisualizationUtils.loadVisualizationApi(onLoadCallback, CoreChart.PACKAGE); 
```

**通过在应用加载时加载所有包**

通过在我的主机页面上添加以下代码（`appname.html`）

```
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
 <script type="text/javascript">
    google.load("visualization", "1", {'packages' : ["corechart"] });
 </script> 
```

corechart 包包括新版本的区域、条形、列、线、饼图和散点图可视化的代码，这些可视化以前由单独的包加载。

进而

```
 PieChart pie = new PieChart(createTable(result), createOptions());
 pie.addSelectHandler(createSelectHandler(pie));
 dataCHTabel.clear();
 dataCHTabel.add(pie); 
```

geochart 不包含在核心中所以，如果你想加载地理图表，你必须添加

```
google.load('visualization', '1', {'packages': ['geochart']}); 
```

# c# - 如何将事件公开给调用者实现，请参见代码示例？

> ID：15593245
> 
> 赞同：-1
> 
> 时间：2013-03-23T23:20:16.627
> 
> 标签：c#, .net, oop, delegates

这里的想法是允许调用者`AfterHTMLPieceHandler`为循环的每个循环实现，我不知道它是否完全正确或者它应该是一个事件 insted 或委托。老实说，我不知道有什么区别，但这是另一个问题。

```
//? Should it be static?
public static class PageScan
{
    public delegate string AfterHTMLPieceHandler();

    public static string GetHTML(string url)
    {
        HttpWebRequest wRequest = (HttpWebRequest)WebRequest.Create(url);
        wRequest.Method = "GET";
        HttpWebResponse wResponse = (HttpWebResponse)wRequest.GetResponse();
        StreamReader sReader = new StreamReader(wResponse.GetResponseStream());
        string html = sReader.ReadToEnd();
        sReader.Close();
        wResponse.Close();
        sReader.Dispose();
        return html;
    }

    public static void GetPiecesOfHtml(string html, string constantHtml)
    {
        while (html.IndexOf("http://portfoliopad.com/images/") > -1)
        {
            // it will retrieve a piece of html given the constantHtml and remove from html in order to break the loop in the end
            //How Do I hit the event for each time one cycle of the loop ends?
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:12:44.277

这是使用委托的一个很好的参考：[了解委托](http://www.codeproject.com/Articles/11657/Understanding-Delegates-in-C)。请注意示例主要部分中的委托实例，以及它如何与委托所指向的方法相关联。我希望这有帮助。

# matrix - xna 相机围绕自己的轴旋转并查看模型组

> ID：15593249
> 
> 赞同：0
> 
> 时间：2013-03-23T23:20:51.863
> 
> 标签：matrix, xna, camera

我制作了一个 3D 场景，其中有三组模型。我有一台相机正在查看其中一个组。这些组中的模型围绕组中心（上轴）旋转，并且模型也旋转自己的局部中心（上轴）。

这类似于 XNA Racing Game 的汽车选择屏幕。唯一的区别是我希望能够旋转我的相机来查看另一组。当旋转相机查看下一组时，我想将其旋转 120 度（我有 3 个模型组 360/3=120）

注意： - 摄像机从组平面稍上方观察一组。

对于相机：

```
viewMatrix = Matrix.CreateLookAt(cameraPosition, cameraTarget, Vector3.Up);    
projectionMatrix = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, aspectRatio, 1f, 1000f); 
```

好的：

*   我可以围绕自己的轴旋转模型。
*   我可以围绕组中心点向左或向右旋转一组模型（在游戏屏幕中，离屏幕最近的模型是当前选择的模型）。

不好：

*   我找不到正确的方法来围绕它自己的上轴旋转相机。

几张图片来澄清这种情况：

![](../Images/d548b0549dde6f06b3346118b9a3e3e1.png)

![](../Images/7d3f3087787a9fc473fb3d63deaf0aed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:32:24.260

在我看来，您希望所有的旋转都围绕世界上轴而不是相机的上轴。

这是一种将视图从一个组更改为另一组的可能方法。这将以恒定的速度旋转。如果您希望它在到达所需组时稍微减慢旋转速度，则需要添加代码。这假设您知道每个组的中心位置。

```
float elapsed = (float)gameTime.ElapsedGameTime.TotalSeconds;
float rotationRate = 0.01f; //radians per second. set to taste
Vector3 cameraGoal;// the center point of the group that you want the camera to settle on. changes with input.

Vector3 currentLookingDirection = cameraTarget - cameraPosition;//
Vector3 desiredLookingDirection = cameraGoal - cameraPosition;
float angularSeparationFactor = Vector3.Dot(currentLookingDirection, desiredLookingDirection);
if(angularSeparationFactor < 0.98f);//set to taste
{
  float directionToRotate = Math.Sign(Vector3.Cross(currentLookingDirection , desiredLookingDirection ).Y);
   cameraTarget = Vector3.Transform(cameraTarget - cameraPosition, Matrix.CreateRotationY(rotationRate * elapsed * directionToRotate)) + cameraPosition;
}
else
{
   cameraTarget = cameraGoal;
}

view = Matrix.CreatLookAt(cameraPosition, cameraTarget, Vector3.Up); 
```

# actionscript-3 - 想要使用 XML 将图像添加到现有的 Flash 模板。我也有 .fla 文件

> ID：15593253
> 
> 赞同：0
> 
> 时间：2013-03-23T23:21:42.930
> 
> 标签：actionscript-3, flash, actionscript, web, flash-builder

我有一个基于 xml 和 actionscript 的 Flash web 模板。它有几个页面和图像。在那里的一个页面中，我加载了 7 张图片。我想在页面上再添加 3 张图片。该模板正在从名为 tfile_main.xml 的 XML 文件加载其他 7 个图像。我正在谈论的页面有这样的代码：

```
<page name="solutions">
<image imageUrl="_1.png" link="asfunction:_root.more_click_func,0"/>
<image imageUrl="_2.png" link="asfunction:_root.more_click_func,1"/>
<image imageUrl="_3.png" link="asfunction:_root.more_click_func,2"/>
<image imageUrl="_4.png" link="asfunction:_root.more_click_func,3"/>
<image imageUrl="_5.png" link="asfunction:_root.more_click_func,4"/> 
<image imageUrl="_6.png" link="asfunction:_root.more_click_func,5"/> 
<image imageUrl="_7.png" link="asfunction:_root.more_click_func,6"/> 
```

```
<pageText><![CDATA[
      Lorem Ipsum
]]></pageText>

<pageText><![CDATA[
      Lorem Ipsum
]]></pageText>

<pageText><![CDATA[
      Lorem Ipsum
]]></pageText>

<pageText><![CDATA[
      Lorem Ipsum
]]></pageText>

  <pageText><![CDATA[
        Lorem Ipsum
]]></pageText>

  <pageText><![CDATA[
       Lorem Ipsum
]]></pageText>

  <pageText><![CDATA[
      Lorem Ipsum
]]></pageText>  

  <pageText><![CDATA[
      Lorem Ipsum
]]></pageText>  

  <pageText><![CDATA[
      Lorem Ipsum
]]></pageText>  

</texts>

    </page> 
```

现在我要做的就是在这个页面上再加载 3 张图片。我尝试在 XML 文件中添加这一行，并相应地添加 CDATA 文本部分。但 Flash 站点不会加载图像/图像。我也有原始的 FLA 文件。我不精通闪存，但我得到了图像结构可见的层（Sprite 442）。

谁能指导我该怎么做？或者至少让我知道这是否可能？页面中可能设置的图像是否有限制。如果有人能指导我正确的方向，我将不胜感激......

# php - 可以访问 PHP MVC 框架中的公共类

> ID：15593255
> 
> 赞同：3
> 
> 时间：2013-03-23T23:22:15.730
> 
> 标签：php, class, model-view-controller, dependency-injection

我已经阅读了很多关于此的 SO 主题，但仍然没有找到（或能够创建）正确的答案。

我正在开发一个小型 MVC 框架，我想要一些可以从控制器调用的全局类/对象（但也可能是模型）。

我可以采取几条路线：

1.  全局变量
2.  静态类/注册表
3.  依赖注入

互联网似乎同意 DI 是最佳途径。我想我已经掌握了这个想法，但还不舒服。所以我想提供一些背景信息；我可能是唯一一个在这个项目上工作的人，这是一个小项目，我所有的控制器都扩展了主控制器（所以我可以在那里加载一个类库）。

作为一个具体的例子，我想要一个类别数组。所以我开始将该数组放在 CategoryController 中。但现在我注意到我有点想在我的前视图和 ProductController 中使用该数组。显然我不想将所有 CategoryController 加载到 ProductController 中。您也可以说我可以将该数组放在某种配置或设置文件中，因为这个示例很简单，但这就是为什么它是一个示例。我可能会用更多的功能扩展它。

所以总结一下：在 PHP 中（特别是在 MVC 模型中）你如何让你的类（主要是控制器）访问某种通用类或其他可共享的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:47:13.773

您的控制器是由“某物”（通常是前端控制器）创建的。因此，当创建控制器时，您可以注入一个依赖注入容器。

在您的配置/引导程序中（在创建控制器之前），您应该将类​​别添加到容器中。

这样您就可以从每个控制器访问类别。

请注意，这是一个简单的示例，并不完全符合依赖注入的精神。最好的解决方案是直接注入类别（而不是注入容器）。但是，如果您推广该模式（在您的前端控制器中处理大量依赖项），这可能会成为很多工作。

一个解决方案是使用可以为您做到这一点的依赖注入框架。

例如，我在一个 DI 容器上工作，它可以让你注入带有注释的东西（[PHP-DI](http://mnapoli.github.com/PHP-DI/)），但是还有其他几个用于 DI 的库，所以你可以选择。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T23:50:12.893

我的 2 美分：

在我前段时间做的一个小型自制迷你框架中，我创建了一个名为 Application 的全局单例类，应该从任何地方/任何地方访问的任何/一切都是该类的属性或方法。

在我的例子中，有一个`$db`用于数据库访问的`$user`属性，一个用于访问用户数据和方法的`$input`属性，一个用于“动力”`$_REQUEST`访问的属性，等等。

当然，你还有很多其他的选择，适合不同的场景。在那种情况下，这种方法对我来说效果很好。

现在，如果你想从另一个控制器访问一个控制器，这听起来很奇怪。您要访问的这个“东西”应该是模型类、库类或其他任何东西，但它不应该被“锁定”在控制器类中。实际上，控制器应该“尽可能薄”，并专注于根据用户输入（请求）从其他类调用适当的方法，然后调用一些输出方法来生成并发送答案（响应）。

最后，虽然我读过一些关于它的批评和抱怨（以及赞美），但我确实经常使用`static`方法，主要是针对那些比其他任何东西都更“帮助”的类。

# enums - Java 枚举单例的注解

> ID：15593258
> 
> 赞同：8
> 
> 时间：2013-03-23T23:22:51.903
> 
> 标签：enums, annotations, singleton, java

正如 Bloch 在*Effective Java 2nd Edition*的第 3 项（“使用私有构造函数或枚举类型强制单例属性”）中所述，**单元素枚举类型是实现单例的最佳方式**。不幸的是，旧的私有构造函数模式仍然非常普遍和根深蒂固，以至于许多开发人员在创建枚举单例时不明白我在做什么。

类声明上方的一个简单`// Enum Singleton`注释会有所帮助，但它仍然留下了另一个程序员稍后可能会出现并向枚举添加第二个常量的可能性，从而破坏了单例属性。对于私有构造方法存在的所有问题，在我看来，它比枚举单例更具自我记录性。

我认为我需要的是一个注释，它既说明枚举类型是单例，又确保在编译时只有一个常量被添加到枚举中。像这样的东西：

```
@EnumSingleton // Annotation complains if > 1 enum element on EnumSingleton
public enum EnumSingleton {
   INSTANCE;
} 
```

有没有人在任何地方的公共库中遇到过这样的标准 Java 注释？或者在 Java 当前的注解系统下我所要求的是不可能的？

**更新**

我正在使用的一种解决方法，至少在我决定真正费心滚动自己的注释之前，是直接放在字段`@SuppressWarnings("UnusedDeclaration")`前面。`INSTANCE`它在使代码看起来与简单的枚举类型不同方面做得不错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T23:43:26.143

你可以使用这样的东西 -

```
public class SingletonClass {
    private SingletonClass() {
        // block external instantiation
    }

    public static enum SingletonFactory {
        INSTANCE {
            public SingletonClass getInstance() {
                return instance;
            }
        };

        private static SingletonClass instance = new SingletonClass();
        private SingletonFactory() {
        }

        public abstract SingletonClass getInstance();
    }
} 
```

您可以在其他课程中访问 -

```
SingletonClass.SingletonFactory.INSTANCE.getInstance(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T23:52:49.140

我不知道公共 Java 库中有这样的注释，但是您可以自己定义这样的编译时注释以用于您的项目。当然，您需要为它编写一个注释处理器并以某种方式调用[APT](http://docs.oracle.com/javase/1.5.0/docs/guide/apt/GettingStarted.html)（使用[ant](http://ant.apache.org/)或[maven](http://maven.apache.org/)）以在编译时检查您的`@EnumSingleton`注释枚举以获得预期的结构。

这是有关如何编写和使用[编译时注释](http://www.javalobby.org/java/forums/t17961.html)的资源。

# android - 应用程序崩溃在调试模式下突然崩溃，请参阅崩溃日志

> ID：15593259
> 
> 赞同：0
> 
> 时间：2013-03-23T23:22:58.703
> 
> 标签：android

我正在开发一个应用程序项目，但突然之间它总是立即崩溃。我不知道原因。这里是崩溃日志：

```
03-24 00:16:27.050: E/AndroidRuntime(533): FATAL EXCEPTION: main
03-24 00:16:27.050: E/AndroidRuntime(533): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.lexoffice.android/com.lexoffice.android.Login}: android.view.InflateException: Binary XML file line #54: Error inflating class android.widget.Button
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.os.Looper.loop(Looper.java:137)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.app.ActivityThread.main(ActivityThread.java:4424)
03-24 00:16:27.050: E/AndroidRuntime(533):  at java.lang.reflect.Method.invokeNative(Native Method)
03-24 00:16:27.050: E/AndroidRuntime(533):  at java.lang.reflect.Method.invoke(Method.java:511)
03-24 00:16:27.050: E/AndroidRuntime(533):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-24 00:16:27.050: E/AndroidRuntime(533):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-24 00:16:27.050: E/AndroidRuntime(533):  at dalvik.system.NativeStart.main(Native Method)
03-24 00:16:27.050: E/AndroidRuntime(533): Caused by: android.view.InflateException: Binary XML file line #54: Error inflating class android.widget.Button
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.view.LayoutInflater.createView(LayoutInflater.java:606)
03-24 00:16:27.050: E/AndroidRuntime(533):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-24 00:16:27.050: E/AndroidRuntime(533):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.app.Activity.setContentView(Activity.java:1835)
03-24 00:16:27.050: E/AndroidRuntime(533):  at com.lexoffice.android.Login.onCreate(Login.java:21)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.app.Activity.performCreate(Activity.java:4465)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
03-24 00:16:27.050: E/AndroidRuntime(533):  ... 11 more
03-24 00:16:27.050: E/AndroidRuntime(533): Caused by: java.lang.reflect.InvocationTargetException
03-24 00:16:27.050: E/AndroidRuntime(533):  at java.lang.reflect.Constructor.constructNative(Native Method)
03-24 00:16:27.050: E/AndroidRuntime(533):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.view.LayoutInflater.createView(LayoutInflater.java:586)
03-24 00:16:27.050: E/AndroidRuntime(533):  ... 26 more
03-24 00:16:27.050: E/AndroidRuntime(533): Caused by: android.content.res.Resources$NotFoundException: File res/layout/activity_login.xml from color state list resource ID #0x7f030000
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.content.res.Resources.loadColorStateList(Resources.java:2053)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.content.res.TypedArray.getColorStateList(TypedArray.java:342)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.widget.TextView.<init>(TextView.java:782)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.widget.Button.<init>(Button.java:108)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.widget.Button.<init>(Button.java:104)
03-24 00:16:27.050: E/AndroidRuntime(533):  ... 29 more
03-24 00:16:27.050: E/AndroidRuntime(533): Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #2: invalid drawable tag ScrollView
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.content.res.ColorStateList.createFromXmlInner(ColorStateList.java:146)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.content.res.ColorStateList.createFromXml(ColorStateList.java:129)
03-24 00:16:27.050: E/AndroidRuntime(533):  at android.content.res.Resources.loadColorStateList(Resources.java:2050)
03-24 00:16:27.050: E/AndroidRuntime(533):  ... 33 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:41:24.570

`onCreate()`您的应用程序在尝试访问`Button`您的 XML 文件中定义的对象之一时失败。`findViewById()`根据我的经验，当您在值中指定错误的资源 ID 时，可能会发生此故障`R.id.whatever`。

如果一切正常，通常完全刷新、清理和重建可以解决问题。

# ruby-on-rails - 如何修复 /.rvm/rubies/ruby-1.8.7-p352/lib/ruby/1.8/yaml.rb:133:in `load'：第 17 行第 9 列的语法错误：`适配器：mysql2'（ArgumentError )

> ID：15593267
> 
> 赞同：0
> 
> 时间：2013-03-23T23:24:11.140
> 
> 标签：ruby-on-rails, rails-console, appfog

我正在尝试按照[本文档](https://docs.appfog.com/languages/ruby/rails)在 Appfog 上运行 rails 控制台。我按照描述设置了我的 database.yml，但是当我运行时出现`RAILS_ENV=proxied-appfog rails console`此错误：

```
/.rvm/rubies/ruby-1.8.7-p352/lib/ruby/1.8/yaml.rb:133:in `load': syntax error on line 22, col 9: `    adapter: mysql2' (ArgumentError)
    from /.rvm/rubies/ruby-1.8.7-p352/lib/ruby/1.8/yaml.rb:133:in `load'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/railties-3.2.13/lib/rails/application/configuration.rb:115:in `database_configuration'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/activerecord-3.2.13/lib/active_record/railtie.rb:78
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:26:in `on_load'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:25:in `each'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:25:in `on_load'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/activerecord-3.2.13/lib/active_record/railtie.rb:74
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `instance_exec'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `run'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/railties-3.2.13/lib/rails/initializable.rb:55:in `run_initializers'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `each'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `run_initializers'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/railties-3.2.13/lib/rails/application.rb:136:in `initialize!'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `send'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /development/baking_journal/config/environment.rb:5
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/railties-3.2.13/lib/rails/application.rb:103:in `require_environment!'
    from /.rvm/gems/ruby-1.8.7-p352@journal/gems/railties-3.2.13/lib/rails/commands.rb:40
    from script/rails:6:in `require'
    from script/rails:6 
```

首先，我不想在 rvm 中触摸任何东西……但我确实打开了该文件以查看问题所在，因为它给了我一个行号。该行不包含任何代码。所以我很困惑。这里有什么问题？我唯一能想象的是，也许它不支持我的 ruby​​ 版本？但如果你输入`af runtimes`返回的列表是：

```
+---------+-------------+---------+
| Name    | Description | Version |
+---------+-------------+---------+
| python2 |             | 2.7.3   |
| node08  |             | 0.8.14  |
| php     |             | 5.3.10  |
| java    |             | 1.7.0   |
| ruby18  |             | 1.8.7   |
| ruby192 |             | 1.9.2   |
| ruby193 |             | 1.9.3   |
| node04  |             | 0.4.12  |
| node06  |             | 0.6.17  |
+---------+-------------+---------+ 
```

有任何想法吗？

此外，如果我尝试`af update`使用新的 database.yml 和 proxied-appfog.rb 环境文件，我将无法再启动服务器。因此，在我将更改推送到服务器之前，这个错误就给了我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:56:53.977

*您可以逐字*发布您的 database.yml 文件吗？你可能有一个语法错误，与空格相关。YAML 对空格敏感。

仔细检查您的 YML 文件是否存在错误空格。使用两个空格而不是制表符缩进子级别。

# java - Java 每 6 删除 1

> ID：15593269
> 
> 赞同：-6
> 
> 时间：2013-03-23T23:24:42.227
> 
> 标签：java

我正在做一个系统。我想要的是，对于每 6 件商品，您必须购买 5 件（所以当价格为每件 5 件时，6 件商品不是 30 而是 25，与 12、18、24 等相同......）

我该怎么做？

我认为它会是这样的：

`if (amount % 6 == 0) {`

```
 }</code> 
```

但是，如果我是正确的，那将有一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:02:11.100

模运算符在这种情况下不起作用。因此，对于一个有效的解决方案。

```
int numberOfItems = 17; //however many there are
int discount = numberOfItems / 6;

double priceToPay = price * (numOfItems - discount); 
```

通过享受折扣，`int`除法后您将不会得到任何四舍五入或小数部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:53:43.833

如果您有 6、12 等物品，使用模数只会给您折扣。如果你有 7 个项目呢？你不会得到任何折扣（它不能被 6 整除）！所以，它会是这样的：

```
 int numOfItems = 6; //this will be different every time
    //copy numOfItems because it will be modified
    int temp = numOfItems;

    double price = 5;
    int discount = 0;

    //While there are at least 6 items
    while (temp >= 6) {
        discount++; //discount one item
        temp -= 6; //take away 6
    }

    //you have to pay for the number of items, but not the discounted items
    double amountToPay = price * (numOfItems - discount); 
```

这样，每次带走 6 件，您就不必支付 1 件商品的费用。

# python - Matplotlib：随着时间的推移叠加多个 2d 箭袋图

> ID：15593270
> 
> 赞同：2
> 
> 时间：2013-03-23T23:24:50.360
> 
> 标签：python, matplotlib

我有一些在 2d 空间和随时间变化的向量场。传统上，人们可以将矢量场的演变可视化为一部 2D 电影，其中所有颤动的幅度和角度随时间变化。

明确地说，目前我有 U 和 V，每个都有形状 (x,y,t)，其中暗淡 0 和 1 是空间坐标，t 是特定的时间片。我可以将特定时间的矢量场可视化为：特定时间索引`matplotlib.pyplot.quiver(U[:,:,i], V[:,:,i])`在哪里。`i`目前，我可以在 for 循环中对所有`i`.

但是，我想在单个二维图上及时可视化每个颤动图。为此，我想将每个索引分配`i`为与给定颜色图不同的颜色。因此，来自特定时间点的所有颤动都显示为单一颜色。

有人可以提出一种方法吗？

先感谢您！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T00:02:04.630

您可以按照以下方式做一些事情：

```
from __future__ import division
import numpy as np
import matplotlib.pyplot as plt

U = np.random.rand(10, 10, 10) - 0.5
V = np.random.rand(10, 10, 10) - 0.5
cmap = plt.cm.jet
time_samples = U.shape[-1]
for t in xrange(time_samples):
    plt.quiver(U[..., t], V[..., t], color=cmap(j/time_samples))
plt.show() 
```

![在此处输入图像描述](../Images/cb07e70482fb8e94862bbb851c2191b7.png)

# c# - 部分失败时防止整个页面重新加载 - 登录注册

> ID：15593274
> 
> 赞同：0
> 
> 时间：2013-03-23T23:25:21.010
> 
> 标签：c#, asp.net-mvc-4, simplemembership

我创建了一个页面来管理我的 mvc 4 应用程序中的登录和注册任务。当我使用注册创建用户时，注册失败 - 例如密码不匹配 - 页面处理错误并刷新，但在注册的渲染操作部分插入完整页面。

另一方面，当登录失败时 - 用户不存在 - 页面刷新但将用户引导到仅显示渲染操作登录部分的页面，而不是整个布局..任何帮助表示赞赏：

步骤：我创建了一个模型

```
public class Access
{
    public LoginModel LoginModel { get; set; }
    public RegisterModel RegisterModel { get; set; }
} 
```

然后我创建一个页面：

```
<div class="main-content" style="min-height: 700px;">
    <!-- Login form -->
    @{ Html.RenderAction("Login", "Account"); }

    <!-- Register form -->
    @{ Html.RenderAction("Register", "Account"); }
    <div class="clear"></div>
</div> 
```

控制器是 mvc4 模板中提供的典型控制器。登录示例

```
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
    {
        if (Url.IsLocalUrl(returnUrl))
        {
            return Redirect(returnUrl);
        }
        else
        {
            return RedirectToAction("Index", "Home");
        }
    }

    // If we got this far, something failed, redisplay form
    ModelState.AddModelError("", "The user name or password provided is incorrect.");
    return PartialView(model);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:42:34.320

您在失败时返回 ParitalView，您可能希望返回包含整个页面的视图。即 *编辑*

```
//recreate the compound viewmodel in the login controller
 Access viewModel = new Access();
 viewModel.LoginModel = model;
 viewModel.RegisterModel = new RegisterModel();
return View("LoginOrRegister", viewModel); //supposing the view name is LoginOrRegister.cshtml

//recreate the compound viewmodel in the register controller
 Access viewModel = new Access();
 viewModel.LoginModel = new LoginModel();
 viewModel.RegisterModel = model;
 return View("LoginOrRegister", viewModel); //supposing the view name is LoginOrRegister.cshtml 
```

loginorregister.cshtml 页面也必须使用包含 LoginModel 和 RegisterModel 的 Access 类作为 View 的模型，即。@model 访问

并且在渲染登录或注册模型时，需要传入模型参数——这样用户就不需要重新输入数据。*edit - 也尝试从 RenderAction 更改为 Html.RenderPartial() 以便它不会通过初始渲染的动作进行路由 - 这样做并在控制器上添加 [HttpPost] 注释 * 代码看起来像

```
@model Access
<div class="main-content" style="min-height: 700px;">
<!-- Login form -->
@{ Html.RenderPartial("Login", new {model = Model.LoginModel, returnUrl = "?"}) };

<!-- Register form -->
@{ Html.RenderPartial("Login", "Account", new { model = Model.RegisterModel) }; }
<div class="clear"></div>
</div> 
```

和

```
[HttpPost]
public ActionResult Login(LoginModel model, string returnUrl) 
{
    if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie:     model.RememberMe))
    {
    if (Url.IsLocalUrl(returnUrl))
    {
        return Redirect(returnUrl);
    }
    else
    {
        return RedirectToAction("Index", "Home");
    }
}

// If we got this far, something failed, redisplay form
ModelState.AddModelError("", "The user name or password provided is incorrect.");

//recreate the compound viewmodel in the login controller
Access viewModel = new Access();
viewModel.LoginModel = model;
viewModel.RegisterModel = new RegisterModel();
return View("LoginOrRegister", viewModel);
} 
```

啊，也不是使用 viewbag 来最初传递数据，你必须使用模型来传递它——因为我选择在剃须刀视图中使用代码“@Model Acesss”，所以注册 ActionResult看起来像...

```
public ActionResult Register(){
    Access viewModel = new Access();
    viewModel.LoginModel = new LoginModel();
    viewModel.RegisterModel = new RegisterModel();
    return View("LoginOrRegister",viewModel);
} 
```

我没有意识到你对 mvc 这么陌生。坚持下去。:) 另一个教程可能会有所帮助

# c - 消息发送，接收者没有收到消息。套接字编程

> ID：15593277
> 
> 赞同：-1
> 
> 时间：2013-03-23T23:25:58.840
> 
> 标签：c, sockets

我正在接收来自客户端的消息，对其进行比较并根据比较结果发送消息。服务器发送消息（显然），但客户端停留在读取过程中。

服务器：

> 等待传入连接...按 Ctrl+C 结束服务器
> 
> 从 127.0.0.1 连接，端口 54918 收到消息：c 随机 es 5 进入 IFs 1er IF

```
void
result(int sockfd)
{
    ssize_t     n;
    char        buf[MAXLINE];
    int         temp;
    time_t      ticks;
    int         i;
again:
    while ((n =read(sockfd, buf, MAXLINE)> 0))
    {
     buf[n] = '\0';
     printf("Message Recieved:%s\n",buf);
     srand (time(NULL));
     temp = rand() % 15+1;
     printf("Ramdom es %i\n",temp);
     printf("Into IF\n");    
     if ((strncmp (buf,"A",1) == 0) || (strncmp (buf,"a",1) == 0))
     {
      snprintf(buf, sizeof(buf), "Option A chosen times %i on on %.24s\r\n", temp,ctime(&ticks));
      Writen(sockfd, buf, n);
      printf("1st IF\n");
     }
     else if ((strncmp (buf,"B",1) == 0) || (strncmp (buf,"b",1) == 0))
     {
      snprintf(buf, sizeof(buf), "Option B chosen times %i on on %.24s\r\n", temp,ctime(&ticks));
      Writen(sockfd, buf, n);
      printf("2nd IF\n");
     }
     else
     {
       printf("Incorrect Input");
       Close(sockfd);
       break;
     }  
    }
    if (n < 0 && errno == EINTR)
    goto again;
    else if (n < 0)
        err_sys("read error");
    printf("salio de funcion result\n");    
}

int
main(int argc, char **argv)
{
    int                 listenfd, connfd;
    socklen_t           len;
    struct sockaddr_in  servaddr, cliaddr;
    char                buff[MAXLINE];
    /*char                message[MAXLINE];*/
    char                recvline[MAXLINE + 1];

    listenfd = Socket(AF_INET, SOCK_STREAM, 0);
    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family      = AF_INET;
    servaddr.sin_addr.s_addr = htonl(INADDR_ANY);/*----------------------------------------------------*/
    servaddr.sin_port        = htons(5678); 

    Bind(listenfd, (SA *) &servaddr, sizeof(servaddr));
    Listen(listenfd, LISTENQ);
    printf("Server is running on 127.0.0.1, listening on port 5678\n");
    printf("\n");
    printf("Waiting for incoming connections...Press Ctrl+C to end server\n");

    for ( ; ; )
    {
        len = sizeof(cliaddr);
        connfd = Accept(listenfd, (SA *) &cliaddr, &len);

        /*Client connects to server*/
        printf("\n");
        printf("Connection from %s, port %d\n",
               Inet_ntop(AF_INET, &cliaddr.sin_addr, buff, sizeof(buff)),
               ntohs(cliaddr.sin_port));

            result(connfd);
                Close(connfd);

    }
} 
```

客户：

> 连接...本地地址为：127.0.0.1:54918 开始读取...输入选项 A 或 B：b

```
void
get_temp(FILE *fp, int sock)
{
    char    sendline[MAXLINE], recvline[MAXLINE];

    while (Fgets(sendline, MAXLINE, fp) != NULL) {

        Writen(sock, sendline, strlen(sendline));

        if (Readline(sock, recvline, MAXLINE) == 0)
            err_quit("Server Terminated Prematurely");

        Fputs(recvline, stdout);
    }
}

int
main(int argc, char **argv)
{
    int                 sockfd, n;
    socklen_t           len;
    char                recvline[MAXLINE + 1];
    struct sockaddr_in          servaddr, cliaddr;
    char  scale[2];

    if (argc != 3)
        err_quit("usage: a.out <IPaddress>");

    if ( (sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
        err_sys("socket error");

    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_port   = htons(atoi(argv[2])); 
    if (inet_pton(AF_INET, argv[1], &servaddr.sin_addr) <= 0) 
        err_quit("inet_pton error for %s", argv[1]);

        printf("Connect...\n");
    if (connect(sockfd, (SA *) &servaddr, sizeof(servaddr)) < 0)
        err_sys("connect error");

    len = sizeof(cliaddr);
    Getsockname(sockfd, (SA *) &cliaddr, &len);
    printf("Local Address is: %s\n",
           Sock_ntop((SA *) &cliaddr, sizeof(cliaddr))); 
        printf("Starting read...\n");
    printf("Enter option A or B:  ");
        get_temp(stdin, sockfd);
    exit(0);
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:36:02.513

停止编码并编写协议规范。规范应在字节级别指定交换什么信息以及如何交换。你现在这样做的方式，你的代码不可能是“正确的”或“错误的”，因为没有规范让它遵守或不遵守。

协议规范中要涵盖的最重要的事情是您是否有“消息”，如果有，每一方如何找到它们的开头和结尾。您可以使用关闭连接作为消息边界。您可以使用分隔符（例如零字节或换行符）作为消息边界。您可以在每条消息前面加上它的长度。

但是如果没有规范，您的服务器和客户端只能就谁做什么、何时以及如何做这件事达成一致。

# ruby-on-rails - 在“x”天内更新记录？

> ID：15593281
> 
> 赞同：0
> 
> 时间：2013-03-23T23:26:23.963
> 
> 标签：ruby-on-rails, postgresql, gem

我有我的用户要完成的任务，并一一完成并记录结果。根据结果​​，该任务可能需要暂停“x”天，然后在“x”天后再次可用。有时它只在任务队列中返回“y”天，然后过期（task.active=0）

使用 Rails 3 实现此功能的最佳方法是什么？我正在使用 Postgre。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:36:23.467

创建一个模型属性`inactive_until`，该属性为空或未来的日期。然后为您的模型添加一个范围`active`，它只是检查该字段是否为`nil`或`< Time.now`

现在要让某人在一段时间内不活动，请设置`inactive_until`为未来的日期。

# ruby - 使用 ruby 将一行字符串分成单独的列

> ID：15593283
> 
> 赞同：2
> 
> 时间：2013-03-23T23:26:35.117
> 
> 标签：ruby, excel, csv

我正在尝试使用 Ruby 操作 csv 文件，它将一行字符串分成单独的列。从“Part#”开始创建一列，然后将逗号移至“Quantity”并在其旁边创建第二列，依此类推......我预计我将需要使用 split 方法来创建一个数组。这是最好的方法吗？如何将数组粘贴到 excel 中以创建行？

我希望标题下方的行发生同样的事情，这些行包含实际数据，其中它分为 S-001、1、[Mela] 等。

这是csv的示例：

```
Sheet Goods
Part#,Quantity,Description,Length(L),Width(W),Thickness(T),Square Foot (per),Square       Foot (total),Total Length (Feet),Material,
S-001,1, [Mela] Fridge Sides, 30",12",0 5/8",2.5,2.5,2.5,Not assigned,
S-002,1, [Mela] Fridge Sides#1,30",12",0 5/8",2.5,2.5,2.5,Not assigned,
S-003,1, [Mela] Fridge TB,32 1/4", 30",0 5/8",6.72,6.72,2.69,Not assigned,
S-004,1, [Mela] Fridge TB#1,32 1/4", 30",0 5/8",6.72,6.72,2.69,Not assigned,
S-005,1, [Mela] Fridge back,32 3/4",11 1/4",0 5/8",2.56,2.56,2.73,Not assigned, 
```

任何帮助，将不胜感激！

编辑：

这是数据完成时的样子：

```
Sheet Goods                             
Pat#    Quantity    Description Length (L)  Thickness (T)   Square Foor (per)   Square Foot (total) Total Length (Feet) Material
S-001   1   [Mela] Fridge Sides 30   5/8    2.5 2.5 2.5 Not assigned 
```

其中逗号被删除，逗号之间的数据被放入单独的列中。

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:00:05.563

首先，使用任务库：[CSV](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)。其次，通过列名（而不是无意义的数字）索引行非常方便。一个例子（你会得到所有的宽度）：

```
require 'csv'

rows = CSV.open("data.csv")
name, headers = rows.take(2)

quantities = rows.map do |row_values|
   row = Hash[headers.zip(row_values)]
   # here you specific processing
   row["Width(W)"]
end 
```

正如吉姆所指出的，您的文本不是有效的 CSV，双引号被保留。

# php - 将项目的顺序从 jQuery 排序保存到 PHP

> ID：15593286
> 
> 赞同：0
> 
> 时间：2013-03-23T23:27:13.863
> 
> 标签：php, javascript, jquery, jquery-ui, jquery-ui-sortable

我想让我的用户使用 jQuery UI 排序（[http://jqueryui.com/sortable/#default](http://jqueryui.com/sortable/#default)）对一些项目进行排序

我已经添加了所有必需的文件并且它正在工作。我在 PHP 中保存新订单（数组）时遇到问题。

```
$(function() {
 $(function() {
  $( "#sortable" ).sortable();
  $( "#sortable" ).disableSelection();
 });
var sorted = $( ".selector" ).sortable( "serialize", { key: "sort" } );
}); 
```

问题是：提交表单后如何将 ID 数组传输到 PHP？

注意：我对 JavaScript/jQuery 不是很熟悉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:58:31.497

如果您实际上除了提交按钮之外没有任何其他表单元素，为什么不使用 Ajax 来代替呢？

给定html结构

```
<ul class="list">
    <li id="item_1">1</li>
    <li id="item_2">2</li>
    <li id="item_3">3</li>
</ul>
<input type="button" id="send" value="Send" /> 
```

这是您“将 ID 数组传输到 PHP”的方法

```
$(document).ready(function(e) {
      $('.list').sortable();

      $('#send').click(function(e) {

          var sorted = $('.list').sortable("serialize");

          $.get('http://www.yoururl.com', sorted, function(data) 
          {
               console.log(data);
          });

     });
}); 
```

可以从`$_GET`数组中访问数据

```
<?php

    print_r($_GET);

?> 
```

# layout - 将 TextArea 高度绑定到其内容

> ID：15593287
> 
> 赞同：9
> 
> 时间：2013-03-23T23:27:14.167
> 
> 标签：layout, binding, textarea, javafx

JavaFX：是否可以将`TextArea`高度（行数）绑定到其内容的高度？
我想`TextArea`在编写文本时动态更改高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:58:52.600

看看[JavaFX 实用程序类](http://hg.openjdk.java.net/openjfx/2.2/master/rt/file/893db73acfb5/javafx-ui-controls/src/com/sun/javafx/scene/control/skin/Utils.java)。虽然这不是使用绑定的解决方案，但`computeTextHeight(Font font, String text, double wrappingWidth)`方法可以帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-03T14:05:49.610

这是一个准确、简单且有效的解决方案：

```
SimpleIntegerProperty count = new SimpleIntegerProperty(20);
int rowHeight = 10;

txtArea.prefHeightProperty().bindBidirectional(count);
txtArea.minHeightProperty().bindBidirectional(count);
txtArea.scrollTopProperty().addListener(new ChangeListener<Number>(){
    @Override
    public void changed(ObservableValue<? extends Number> ov, Number oldVal, Number newVal) {
        if(newVal.intValue() > rowHeight){
            count.setValue(count.get() + newVal.intValue());
        }
    }
}); 
```

或者，您可以使用 lambdas 来进一步简化语法：

```
SimpleIntegerProperty count=new SimpleIntegerProperty(20);
int rowHeight = 10;

textArea.prefHeightProperty().bindBidirectional(count);
textArea.minHeightProperty().bindBidirectional(count);
textArea.scrollTopProperty().addListener((ov, oldVal, newVal) -> {
    if(newVal.intValue() > rowHeight){
        count.setValue(count.get() + newVal.intValue());
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-08T23:12:45.273

在 javafx8 中运行良好的解决方案（隐藏工具栏的灵感来自[JavaFX TextArea Hiding Scroll Bars](https://stackoverflow.com/questions/14206692/javafx-textarea-hiding-scroll-bars)）：

```
class MyTextArea extends TextArea {

    @Override
    protected void layoutChildren() {
        super.layoutChildren();
        ScrollBar scrollBarv = (ScrollBar) this.lookup(".scroll-bar:vertical");
        if (scrollBarv != null) {
            System.out.println("hiding vbar");
            ((ScrollPane) scrollBarv.getParent()).setVbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);
        }
        ScrollBar scrollBarh = (ScrollBar) this.lookup(".scroll-bar:horizontal");
        if (scrollBarh != null) {
            System.out.println("hiding hbar");
            ((ScrollPane) scrollBarh.getParent()).setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);
        }
    }

    @Override
    protected double computePrefWidth(double width) {
        Bounds bounds = getTextBounds();
        Insets insets = getInsets();
        double w = Math.ceil(bounds.getWidth() + insets.getLeft() + insets.getRight());
        return w;
    }

    @Override
    protected double computePrefHeight(double height) {
        Bounds bounds = getTextBounds();
        Insets insets = getInsets();
        double h = Math.ceil(bounds.getHeight() + insets.getLeft() + insets.getRight());
        return h;
    }

    //from https://stackoverflow.com/questions/15593287/binding-textarea-height-to-its-content/19717901#19717901
    public Bounds getTextBounds() {
        //String text = (textArea.getText().equals("")) ? textArea.getPromptText() : textArea.getText();
        String text = "";
        text = this.getParagraphs().stream().map((p) -> p + "W\n").reduce(text, String::concat);
        text += "W";
        helper.setText(text);
        helper.setFont(this.getFont());
        // Note that the wrapping width needs to be set to zero before
        // getting the text's real preferred width.
        helper.setWrappingWidth(0);
        return helper.getLayoutBounds();
    }
} 
```

# knockout.js - Knockout Mapping Plugin - 如何将属性添加到默认映射？

> ID：15593289
> 
> 赞同：2
> 
> 时间：2013-03-23T23:28:02.057
> 
> 标签：knockout.js

我最初有一个这样的viewModel：

```
var ObjectViewModel = function (data) {
    var self = this;
    //debugger;
    self.id = data.id;
    self.details = data.details;
    self.children = ko.observableArray(data.children);

    self.deleteChild = function (child) {
        // Pending UI
        // call API here
        // On success, complete
        self.children.remove(child);
    }.bind(self);

}; 
```

现在我正在尝试使用映射插件，这样我就可以使子数组元素可观察。我已经这样做了：

```
var ObjectViewModel = ko.mapping.fromJS(data); 
```

但我不确定如何将 deleteChild 方法添加到此。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T23:42:46.030

我在这里找到了答案：

[向使用 Knockout JS 映射插件创建的视图模型添加属性](https://stackoverflow.com/questions/8673928/adding-properties-to-the-view-model-created-by-using-the-knockout-js-mapping-plu)

基本上，对于我需要添加的每个附加属性，我都会在 innerModel 上定义一个新属性，如下所示：

```
var mapping = {
    create: function(options) {
        var innerModel = ko.mapping.fromJS(options.data);
        innerModel.AdditionalProperty = 'Add Function Here';
        return innerModel;
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T15:04:29.547

我以不同的方式完成了这项工作，似乎也有效。

```
function ObjectViewModel(viewModel) {
    var self = this;

    // bind the vm to self
    ko.utils.extend(self, viewModel);

    self.deleteChild = function (child) {
        // Pending UI
        // call API here
        // On success, complete
        self.children.remove(child);
    }.bind(self);
};

var model = new ObjectViewModel(ko.mapping.fromJS(data)); 
```

# matlab - 从 3 个独立的麦克风同步录制声音

> ID：15593290
> 
> 赞同：2
> 
> 时间：2013-03-23T23:28:20.210
> 
> 标签：matlab, audio, record

我尝试从 3 个单独的 USB 麦克风录制声音。使用（Matlab 2008）我使用这个命令：

%% 定义音频通道 r1 = audiorecorder(44100, 16,1,1); r2 = 录音机（44100, 16,1,2）；r3 = 录音机(44100, 16,1,3);

%% 开始记录

```
 record(r1);     % speak into microphone...    
   record(r2);
   record(r3); 
```

%% 停止记录

```
 stop(r1);
   stop(r2);
   stop(r3); 
```

我想比较来自 3 个麦克风的录音机文件，但麦克风不会同时开始和停止录音。并且总是在记录器文件之间存在大约（1500 到 3000 个样本）的延迟。
所以问题是：我想同时开始录制（在 3 个麦克风中）。并同时停止。是否有任何命令可以在同一时间（或恒定时间，不完全是同一时间）开始记录。

我希望我能 exolain 我需要什么，并希望能得到帮助......................................谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:19:34.717

而不是使用三个单独的`audiorecorder`对象，只需使用一个并在第三个参数中使用 3 调用其构造函数（nChannels - 请参阅[http://www.mathworks.co.uk/help/matlab/ref/audiorecorder.html](http://www.mathworks.co.uk/help/matlab/ref/audiorecorder.html)）。这将指示它同时记录三个通道。那是，

```
r = audiorecorder(44100, 16, 3, 1); 
```

# c - C 语言中的超级基本服务器-客户端应用程序

> ID：15593292
> 
> 赞同：0
> 
> 时间：2013-03-23T23:29:03.183
> 
> 标签：c, sockets, client

我正在尝试使用 C 中的套接字制作服务器客户端应用程序。服务器和客户端编译得很好，但它们似乎没有相互连接，我不明白为什么（我刚开始学习套接字）。我的操作系统是 SunOs 5.10。

这是我的服务器代码：http: [//pastebin.com/TbLCG5BA](http://pastebin.com/TbLCG5BA)

这是我的客户代码：http: [//pastebin.com/SvAtyyi7](http://pastebin.com/SvAtyyi7)

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:44:47.550

在您的客户端和服务器中，您在初始化它们*后都在您的结构上调用 bzero()。*这意味着您首先填写您的信息，然后将所有内容设置为零（丢失所有信息）。

首先将所有内容设置为零（从而正确初始化您不会使用的字段）。然后初始化你的结构。

# scala - 我应该使用什么类型参数来使 List.map 与分隔的延续一起工作？

> ID：15593293
> 
> 赞同：1
> 
> 时间：2013-03-23T23:29:04.187
> 
> 标签：scala, delimited-continuations

我基本上遵循[Scala API 页面上给出的用于分隔延续](http://www.scala-lang.org/api/current/index.html#scala.util.continuations.package)的示例。下面的代码工作正常：

```
import scala.util.continuations._
import scala.collection.mutable.HashMap

val sessions = new HashMap[Int, Int=>Unit]
def ask(prompt: String): Int @cps[Unit] = shift {
  ret: (Int => Unit) => {
    val id = sessions.size
    printf("%s\nrespond with: submit(0x%x, ...)\n", prompt, id)
    sessions += id -> ret
  }
}

def submit(id: Int, addend: Int): Unit = {
  sessions.get(id) match {
    case Some(continueWith) => continueWith(addend)
  }
}

def go = reset {
  println("Welcome!")
  val first = ask("Please give me a number")
  val second = ask("Please enter another number")
  printf("The sum of your numbers is: %d\n", first + second)
} 
```

但是，当我修改`go`为以下内容时：

```
def go = reset {
  println("Welcome!")
  List("First?","Second?").map[Int @cps[Unit]](ask)
} 
```

我收到此错误：

```
error: wrong number of type parameters for method map: [B, That](f: String => B)
(implicit bf: scala.collection.generic.CanBuildFrom[List[String],B,That])That
             List("First?","Second?").map[Int @cps[Unit]](ask)
                                         ^ 
```

添加`Any`为第二种类型参数没有帮助。知道我应该提供什么类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:19:46.863

`map`原因是，如果不创建 CPS 转换的方法，这是不可能的`List`：CPS 注释使编译器将您的方法“从里到外”，以便将延续传递回需要的地方，并且标准`List.map`不遵守转换的合同。如果您想暂时将自己的思想包裹在克莱因瓶中，您可以查看从您的源代码生成的类文件，特别是方法签名。

这就是为什么 CPS 插件永远不会成为这个问题的完整通用解决方案的主要原因，这不是由于缺陷，而是由于“直接”代码和延续传递风格之间的固有不匹配造成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:34:42.000

您需要为要找到的 CanBuildFrom 隐式提供正确的参数：

```
List("First?","Second?").map[Int @cps[Unit], List[Int @cps[Unit]](ask) 
```

但是你真的需要明确类型吗？也许只是做`.map(ask)`会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:46:09.503

这是我能解决的最接近的事情。它使用 shiftR 来具体化延续而不是重置它，使用 foldRight 构造暂停的延续链，使用 shift/reset 块来获取暂停后的延续，并使用“动画”方法来启动暂停的延续。

```
import scala.collection.mutable.HashMap
import scala.util.continuations._

val sessions = new HashMap[Int, (Unit=>Unit, Int)]
val map = new HashMap[Int, Int]

def ask(pair:(String, Int)) = pair match { 
  case (prompt, index) => shiftR { (ret: Unit => Unit) => {
    val id = sessions.size
    printf("%s\nrespond with: submit(0x%x, ...)\n", prompt, id)
    sessions += id -> (ret, index)
    ()
  }}
}

def submit(id: Int, addend: Int): Unit = {
  sessions.get(id) match {
    case Some((continue, index)) => { map.put(index, addend); continue() }
  }
}

def sum(m:HashMap[Int,Int]) : Int = {
  m.fold[(Int, Int)]((0, 0))((a, b) => (0, {a._2+b._2}))._2
}

type Suspended = ControlContext[Unit,Unit,Unit]

class AnimateList(l:List[Suspended]) {
  def suspend(k: => Unit) = (c: Unit) => k
  def animate(k:Unit => Unit): Unit = {
    l.foldRight(k)(
      (elem: Suspended, acc: Unit => Unit) => suspend(elem.fun(acc, ex => ())))()
  }
}

implicit def listToAnimateList(l:List[Suspended]) = new AnimateList(l)

reset { 
  val conts = List("First?","Second?","Third?").zipWithIndex.map(ask)
  shift { conts.animate }
  println(sum(map))
} 
```

# c# - Visual Studio 2012 应用程序设置

> ID：15593294
> 
> 赞同：1
> 
> 时间：2013-03-23T23:29:04.087
> 
> 标签：c#, visual-studio-2012, application-settings

我已经阅读了[有关应用程序设置的教程](http://msdn.microsoft.com/en-us/library/vstudio/a65txexh%28v=vs.100%29.aspx)，但我有点不明白。我所知道的是我已经`.settings`使用设计器创建了一个文件，为其分配了值，并且`Properties.Settings.Default`不允许我访问它们，因为它说它们不存在（本教程的意思是，如果你创建一个名为`Foo`，然后您可以使用 Properties.Settings.Default.Foo 访问它，正如我所说，它不起作用）。有人可以向我解释如何使用 .settings 文件并自己访问设置吗？

![我的设置文件](../Images/d4bf7cd078672b810d4d534d3d537f64.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T10:42:20.170

我遇到了同样的问题，但后来我只使用`Settings.Default`了`Properties.Settings.Default`，现在它可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:35:37.073

请将选择访问修饰符设置为`internal`，我相信它会有所帮助。

# json - 两个 JSON 之间的差异是否有既定的表示？

> ID：15593295
> 
> 赞同：11
> 
> 时间：2013-03-23T23:29:09.210
> 
> 标签：json, diff

是否有任何既定或现有的格式或约定来表示两个 JSON 文档之间的差异？

假设两个远程节点（或服务器/客户端）都有一些表示为潜在复杂 JSON 的数据，其结构在运行前是未知的。一个人想向另一个人发送更新，但不想将整个状态作为一个大的 JSON 发送。相反，只是三角洲。表示任何两个 JSON 文档之间的差异（或差异）的好方法是什么？它们可能非常相似（一个小的变化），但可能不是。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T02:28:32.223

JSON 文档本质上是树，叶子包含名称/值对。

您要做的是传输最小的树增量：将一棵树转换为另一棵树的最小编辑集。

计算树增量是一门艺术，部分原因是它取决于您允许的增量类型（只是插入/删除叶子？交换子树？移动子树？重复子树？重命名？替换值？）。您还需要考虑语义等价性；如果你交换两个子树的位置，结果在语义上是否不同？（您的 delta 检测器可能会看到这样的树交换；语义身份检查可能会因为不感兴趣而将其排除）。如果复制子树，答案在语义上是否不同？（我认为对于 JSON，有效的答案是“否”）。

您需要动态编程算法之类的东西来确定这样的最小增量；您可以从[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)上的弦乐中汲取灵感。

这是程序员对源代码感兴趣的一个常见问题。将 JSON 文档视为源代码，并在[https://stackoverflow.com/q/5779160/120163](https://stackoverflow.com/q/5779160/120163)上查看答案以进行进一步讨论。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-15T17:18:21.227

正如 Ira 指出的那样，有一些类似于 Levenshtein 的选项，但是您会考虑序列化您的对象并按字典顺序比较它，正如 Ira 提到的那样，这不会考虑您正在寻找的特定于 JSON 的语言差异（两棵树可能是相同的 JSON，但在 Levenshtein 距离上却大不相同）。你想要的绝对是树编辑距离。

因此，为了添加一些关于树编辑距离艺术的细节，这个领域中使用的已知算法通常是 Zhang & Shasha 或 Klein，例如，您可以找到 Zhang & Shasha 的 python 实现。这些算法将获得将一棵树转换为另一棵树的最少编辑次数，从而提供您的差异​​。但是，它们在绝对最好的情况下有点慢 O(n^2)，所以如果你正在比较大量 JSON 对象或文件，你会发现自己正在完善你的高尔夫游戏、洗碗、洗衣服、给宠物洗澡和其他家庭杂项。

这就是 Ira 所说的艺术的真正所在，因为这类算法很困难，而且计算成本很高。所以你可以做的就是发挥创造力。一种方法是缩小必须比较的对象的*数量*。例如，为什么要计算两个 JSON 对象之间的编辑距离，这两个对象显然更类似于中间而不是彼此？不要通过字典比较来计算相同对象的编辑距离，如果两个对象有些或显着不同，也许会忘记差异，只是说需要彻底替换。

为了应用树编辑距离的“艺术”，即为自己节省不必要的 CPU 周期，您需要一种方法来提供围绕“有些相似”或“显着不同”的含义的指标。

为此，我编写了 PQ-Gram 树编辑距离*近似*算法 ( [http://www.vldb2005.org/program/paper/wed/p301-augsten.pdf](http://www.vldb2005.org/program/paper/wed/p301-augsten.pdf) ) 的实现，您可以在 github 上找到它以用于Node.js 或在浏览器中 ( [https://github.com/hoonto/jqgram.git](https://github.com/hoonto/jqgram.git) ) 基于现有的 PyGram Python 代码 ( [https://github.com/Sycondaman/PyGram](https://github.com/Sycondaman/PyGram) )。

PQ-Gram 比在 O(n log n) 时间和 O(n) 空间中运行的真正编辑距离算法快得多，其中 n 是节点数。

因此，我的建议是使用 jqgram 快速了解您正在查看的 JSON 对象编辑距离指标。确定应该比较哪些 JSON 对象，而不是只替换哪些 JSON 对象，然后当您想要获取 diff 的真实距离时，请使用 Klein 或 Zhang & Shasha 获取实际 diff。

这是直接从 GitHub 上 jqgram 实现的 README 中提取的 jqgram JSON 对象树编辑距离近似示例：

```
var jq = require("jqgram").jqgram;
var root1 = {
    "thelabel": "a",
    "thekids": [
        { "thelabel": "b",
        "thekids": [
            { "thelabel": "c" },
            { "thelabel": "d" }
        ]},
        { "thelabel": "e" },
        { "thelabel": "f" }
    ]
}

var root2 = {
    "name": "a",
    "kiddos": [
        { "name": "b",
        "kiddos": [
            { "name": "c" },
            { "name": "d" },
            { "name": "y" }
        ]},
        { "name": "e" },
        { "name": "x" }
    ]
}

jq.distance({
    root: root1,
    lfn: function(node){ return node.thelabel; },
    cfn: function(node){ return node.thekids; }
},{
    root: root2,
    lfn: function(node){ return node.name; },
    cfn: function(node){ return node.kiddos; }
},{ p:2, q:3, depth:10 },
function(result) {
    console.log(result.distance);
}); 
```

lfn 和 cfn 参数指定每个 JSON 树应如何独立确定每个树根的节点标签名称和子数组，以便您可以做一些有趣的事情，例如比较来自不同来源的 JSON 对象。您需要做的就是提供这些函数以及每个根，而 jqgram 将完成其余的工作，调用您提供的 lfn 和 cfn 函数来构建树。

# asp.net-mvc - 使用自定义错误模板时 Kendo Grid 出现异常（服务器端）

> ID：15593297
> 
> 赞同：0
> 
> 时间：2013-03-23T23:29:44.230
> 
> 标签：asp.net-mvc, kendo-grid

我有一个带有 Kendo Grid 的 MVC 应用程序。我正在使用使用 JQuery 1.9.1 的最新 Kendo 2013.1.319。我的问题是在弹出编辑中自定义 Kendo Grid 验证错误的位置和外观。
在 KendoUI 代码库“在弹出窗口编辑期间处理服务器端验证错误”中有一个示例应用程序可以处理服务器端的验证错误。

此应用程序过去可以在 Visual Studio 2010 上完美运行，并且无需更新到最新版本的 Kendo，但现在它不适用于使用 Visual Studio 2012 和 Kendo 2013.1.319 的最新版本

它在尝试访问错误消息的模板时返回异常：

```
Error: Syntax error, unrecognized expression: <div class="k-widget k-tooltip k-tooltip-validation k-invalid-msg field-validation-error" style="margin: 0.5em; display: block; " data-for="Name" data-valmsg-for="Name" id="Name_validationMessage">
            <span class="k-icon k-warning"> </span>My server error<div class="k-callout k-callout-n"></div></div> 
```

在 jquery.min.js 文件中，升级前也不是这种情况。

任何帮助将非常感激。

最好的问候， 萨梅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:56:00.730

我认为这与最新的 jQuery 版本有关。

我从他们的例子中发现，validationMessageTmpl 已经是一个 jQuery 对象，所以你不应该重新解析它。

换句话说，改变：

```
.replaceWith($(validationMessageTmpl({ field: name, message: errors[0]}))) 
```

和：

```
.replaceWith(validationMessageTmpl({ field: name, message: errors[0]})) 
```

# angularjs - angularjs - ng-switch 不绑定 ng-model

> ID：15593299
> 
> 赞同：47
> 
> 时间：2013-03-23T23:30:38.837
> 
> 标签：angularjs, ng-switch

我有这个 repro [http://embed.plnkr.co/nVCmukG5abpi1Y4ZHkrq](http://embed.plnkr.co/nVCmukG5abpi1Y4ZHkrq)当我点击“Title3”并在文本框中输入一个值时显示，虽然输入的值显示在 UI 中，但当我点击“点击”按钮时什么都没有为范围属性 $scope.test 绑定。

我不知道 ng-switch 有什么问题，或者我做错了什么。帮助表示赞赏！

[http://embed.plnkr.co/nVCmukG5abpi1Y4ZHkrq](http://embed.plnkr.co/nVCmukG5abpi1Y4ZHkrq)

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-03-24T00:21:00.183

由于`ng-switch`创建了自己的范围，这是一个范围继承问题。

经常提出的一个建议是始终使用 a `dot`on 模型。原因是当控制器范围项是对象而不是原始对象时，子范围将创建对初始对象的引用。如果模型是原始模型，它将不会更新原始模型。

例如：

```
<input ng-model="test.value" placeholder="pre" type="text" /> 
```

```
$scope.test={value:''} 
```

另一种方法是`$parent`在 html 模型标记中使用：

```
<input ng-model="$parent.test" placeholder="pre" type="text" /> 
```

使用该`dot`方法是避免这些问题的好习惯，因为您不需要考虑更深层次的嵌套范围。

`test.value`使用模型 演示： [http ://plnkr.co/edit/CkiF55bLXsYzR6ZjcrJp?p=preview](http://plnkr.co/edit/CkiF55bLXsYzR6ZjcrJp?p=preview)

关于`dot`模型的参考（有价值的阅读）：[https ://github.com/angular/angular.js/wiki/Understanding-Scopes](https://github.com/angular/angular.js/wiki/Understanding-Scopes)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-24T00:18:47.063

这是因为您实际上是在 ng-switch 内部创建了一个子作用域。所以另一个`test`属性存在于属于 ngSwitch 指令的范围内。它最初会显示来自它的父范围的值，但是当你编辑它时，因为它是一个原语，它只编辑子级的值，而不是父级的值。原型继承在这里没有发挥作用（但这正是我们所需要的）。

当您单击该按钮时，该按钮正在警报/控制台。记录父范围上的属性...子无法更改。

要`$parent.test`在 ngSwitch 中修复对 ng-model 属性的这种使用：

一个片段：

```
<span class="pew"  ng-switch-when="title2">
  <input ng-model="$parent.test" placeholder="pre" type="text" />
  {{test}}
</span> 
```

[这是你的 plunker 的一个分支，展示了它的实际应用。](http://plnkr.co/edit/2pMagdqUlfBvSaX0FB3L?p=preview)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-08T05:50:22.827

我遇到过类似的问题，我通过在控制器中创建一个范围变量并将其与 in`ng-include`和`ng-switch`. 这样，如果你`ng-include`用 in 深度嵌套了 's`ng-switch`并继续下去，我们仍然可以直接使用该范围变量。

由于所有子作用域（此处为`ng-include`/ `ng-switch`）都从父作用域（通常是控制器作用域）扩展而来，因此我们**可以直接**从这些子作用域中的 with 访问父作用域而不会出现问题。

使用`$parent`将需要像这样写`$parent.$parent.$parent.someProp`

*示例 Plunk：* [http ://plnkr.co/edit/8UGH7nUpFmATiXfkYSwr?p=preview](http://plnkr.co/edit/8UGH7nUpFmATiXfkYSwr?p=preview)

# tidesdk - 如何使用 MD5 加密字符串？

> ID：15593300
> 
> 赞同：0
> 
> 时间：2013-03-23T23:30:44.163
> 
> 标签：tidesdk

这是我第一次使用 TideSDK。我想问一个简单的问题。

如何在潮汐dk 中使用 MD5 加密字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:42:32.800

正如dadait已经说过的那样，`Ti.Codec`拥有该功能。如果你想在 php/python/ruby 中散列，那些有函数/模块。在 PHP 中，您可以只调用该`md5`函数，而在 Python 中，我相信要走的路是`hashlib`模块。

# z3 - 假设一组公理简化 Z3 中的非布尔表达式

> ID：15593302
> 
> 赞同：1
> 
> 时间：2013-03-23T23:31:26.113
> 
> 标签：z3

假设一组公理，有没有办法简化 Z3 中的非布尔表达式？

例如，我想断言“a==b”，然后将表达式“If(a == b, 1, 2)”简化为“1”。

特别是，我对使用数组理论感兴趣：

> ```
> I = BitVecSort(32)
> A = Array('A', I, I)
> a = BitVec('a',32)
> b = BitVec('b',32)
> c = BitVec('c',32)
> ...
> A2 = Store(A, a, 1) 
> A3 = Store(A2, b, 2) 
> A4 = Store(A3, c, 3)
> 
> simplify_assuming(A4[a], Distinct(a, b, c)) 
> ```

这应该返回“1”，因为根据数组理论规则，假设所有索引都是不同的，可以将 Select 表达式简化为“1”。

我尝试使用“ctx-solver-simplify”策略，但它似乎只适用于布尔表达式。是否有其他方法可以简化非布尔表达式，或者以某种方式告诉数组重写器索引是不同的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:59:38.423

正如 Nikolaj 在上面的评论中所描述的，`ctx-solver-simplify`不会在非布尔表达式下行走。另一种选择是使用`solve-eqs`将使用断言的等式来重写公式的其余部分的策略。例如，给定相等性`a == b`，Z3 将替换每个出现的`b`with `a`（反之亦然）。之后，`if(a == b, 1, 2)`将被重写为`1`.

但是，`solve-eqs`不会使用不等式，例如`Distinct(a, b, c)`. 另一种选择是使用战术`propagate-values`。它将每次出现的断言替换`P`为`true`. 同样，如果我们有一个断言`not P`，它将替换所有其他出现的`P`with `false`。这种策略本质上是执行单元布尔传播。此外，它旨在快速，并且不会应用任何形式的理论推理。例如，如果我们有`Distinct(a, b, c)`，它将不会替换`a == b`为`false`。因此，对于您的目的，这种方法可能太脆弱了。这是一个使用它的脚本。它也可以[在这里](http://rise4fun.com/Z3Py/kt7)在线获得。`A4[a]`在这个脚本中，我使用一个新的谓词来包装表达式`P`因为 Z3 目标是一组布尔公式。我`blast_distinct`用来将 转换`Distinct`为一系列不等式，并将`expand_select_store`形式的一个术语扩展为形式的`store(A, i, v)[j]`一个。请注意，结果包含表示已简化为。`if-then-else``if(i == j, v, A[j])``P(1)``P(A4[a])``1`

```
I = BitVecSort(32)
A = Array('A', I, I)
a = BitVec('a',32)
b = BitVec('b',32)
c = BitVec('c',32)
A2 = Store(A, a, 1) 
A3 = Store(A2, b, 2) 
A4 = Store(A3, c, 3)

P = Function('P', I, BoolSort())
G = Goal()
G.add(P(A4[a]))
G.add(Distinct(c, b, a))

T = Then(With("simplify", blast_distinct=True, expand_select_store=True), "propagate-values")
print(T(G)) 
```

# c - 删除矩阵中的相同行

> ID：15593304
> 
> 赞同：0
> 
> 时间：2013-03-23T23:31:41.323
> 
> 标签：c, math, matrix

有人可以帮我解决这个问题吗？删除矩阵中相同行的最快方法是什么？例如，如果有 3 个相同的行，则将删除 2 个。

例如

> > 0 1 0
> > 0 1 0
> > 0 1 0
> > 1 1 1

将会

> > 0 1 0
> > 1 1 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:49:55.460

根据明确定义的顺序（例如[字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)）对矩阵的行进行排序，然后比较相邻的行，因为它们找到了重复项。如果您需要恢复原始行排序，您可以跟踪您通过排序诱导的行排列，然后在消除重复行后反转该排列。

在没有排序的情况下执行任何类型的成对比较将具有 O(N ² ) 时间复杂度来定位重复项，而首先排序将具有 O(N log N) 时间复杂度，其中 N 是行数。

如果您对实施的具体细节有任何疑问，您需要让我们知道您迄今为止所做的尝试，并描述它如何达不到您的期望。

# android - 创建设备特定的上下文 robolectric

> ID：15593306
> 
> 赞同：1
> 
> 时间：2013-03-23T23:32:14.373
> 
> 标签：android, robolectric

我是 Robolectric 的新手，我正在尝试用它来对我的应用程序进行单元测试。我的很多功能都有特定于设备的上下文，例如，

isNetworkAvailable（上下文 c）、isLocationAvailable（上下文 c）等。

我不确定如何使用 Robolectric 测试这些功能。

任何帮助是极大的赞赏。谢谢，

# php - 静态属性的生命周期

> ID：15593310
> 
> 赞同：0
> 
> 时间：2013-03-23T23:32:32.503
> 
> 标签：php, static

假设我有一`Route`堂课，我调用了几次`Route::set()`方法。这个方法做了一件事：

```
self::objects[] = new Route(); 
```

将`Route`实例保存在类属性数组中。

在这种情况下会发生什么？从逻辑上讲，`set()`会创建很多`Route`实例，每个实例都有一个元素的对象数组。

但是根据我现在正在研究的代码，对象数组将包含`Route`该类的所有对象。

哪一个是正确的，最重要的是 - 为什么？

编辑。我知道标题很烂，但我想不出更好的那个……现在是凌晨 2 点，我没想到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:34:08.997

该数组将包含该类的所有对象。静态属性基本上是一个以不同名称为幌子的全局变量，并不特定于类的任何实例。

# java - 在 jSoup 中获取元素标签路径

> ID：15593312
> 
> 赞同：0
> 
> 时间：2013-03-23T23:32:43.640
> 
> 标签：java, html, jsoup

是否有一种有效的方法可以使用 jSoup 获取所有打开但未关闭的标签的 HTML 元素标签路径？

例如，如果 HTML 是

```
<!DOCTYPE html>
<html>
    <head>...</head>
    <body>
        <section id="secID">
            <div class="divClass">
                <section id="subSection">
                    <h3>Heading</h3>
                     <ul class="list">
                        <li> 
```

当我到达时`li`，我希望它的路径是`html->body->section->div->section->ul`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:53:23.657

我相信一个好方法是通过 children() 方法检查您所在的元素是否有子元素，[请参见此处](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html)。如果它有你把那个元素放在一个列表中并继续它的第一个孩子并做同样的事情，然后是下一个，依此类推。当没有任何人时，你有你的清单。这是一个递归的想法，你将对第二个孩子做同样的事情，依此类推。

**编辑** *一点解释*

假设您在 html 标签上。调用儿童（）。获取返回的列表并开始。第一个元素调用 children()。返回列表。第一个元素称为子元素等。当您停止（没有子元素）时，您会向上（父元素）并继续使用第二个子元素。当您访问了初始列表的所有节点（来自 html 元素）时，它就结束了。这是一个递归的想法，因此效率会受到影响，但它是可靠的。

```
<html>   <--- head , body
    <head>text</head> <---just text node so no elements
    <body>   <--- Second child of html. ul 
        <ul> <--- Empty no elements. go to father element.
        </ul>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-21T08:27:06.703

要获取“打开”元素的列表，您可以简单地使用[Element.parents()](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#parents%28%29)方法。如果要获取以根元素开头的列表，则必须重新排序返回的列表，但这应该很容易实现。

# phpmyadmin - phpMyAdmin 3.5.7 中的加载数据输入错误

> ID：15593314
> 
> 赞同：1
> 
> 时间：2013-03-23T23:32:51.117
> 
> 标签：phpmyadmin

我在使用 LOAD DATA INFILE 的 phpMyAdmin 中发现了一个令人沮丧的错误。基本上我指定的路径正在由程序更改以下命令： LOAD DATA INFILE 'C:\CaliberMap.csv' 有一个错误，坚持路径是：'C:\ProgramData\MySQL\MySQL Server 5.6\data\ CaliberMap.csv' 完全忽略了我指定的路径（或者，更确切地说是屠杀它！）。给我以下错误：

# 29 - 找不到文件'C:\ProgramData\MySQL\MySQL Server 5.6\data\CaliberMap.csv'（错误代码：2 - 没有这样的文件或目录）

我很难过，因为不可能将任何东西导入我的桌子。

有任何想法吗？漏洞补丁？我花了几个小时在互联网上拉扯头发而没有答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:43:57.217

尝试使用“本地”关键字”

“加载数据本地 INFILE 'C:\CaliberMap.csv'”

# jquery - 彩盒内的 iframe 不接受提交

> ID：15593315
> 
> 赞同：0
> 
> 时间：2013-03-23T23:33:21.940
> 
> 标签：jquery, colorbox

如果我从下面的代码中删除颜色框，我可以将我的表单数据提交到 iframe。当颜色框代码处于活动状态时，表单将不会提交到 iframe。Colorbox 打开，我可以看到 loader.html。控制台中没有错误。如果我在 (document.forms['myForm'].target) 上发出警报，我会得到“myFrame”。subm 代码似乎在颜色框打开之前被调用。

```
<script language="javascript">
jQuery(document).ready(function($) {
$(".openCBX").colorbox({inline:'true',innerWidth:"980",innerHeight:"550"});
});
function subm(x,y) {
document.forms['myForm'].opt1.value=x;
document.forms['myForm'].opt2.value=y;
document.forms['myForm'].target="myFrame";
document.forms['myForm'].submit();
}
</script>

<form name="myF" id="myForm" method="post">
<input type="hidden" name="opt1" />
<input type="hidden" name="opt2" />

<a class="openCBX" href="#cbx" onclick="subm('opt1','opt2');return false;">open</a>

<div style=\"display:none\"> 
<div id="cbx">
<iframe id="myFrame" name="mFrame" src="loader.html"></iframe>
</div>
</div>

</form> 
```

# javascript - 乘法的Javascript计算

> ID：15593321
> 
> 赞同：-1
> 
> 时间：2013-03-23T23:34:15.370
> 
> 标签：javascript, html, calculator, calc

如您在此[JSFiddle中所见，我有 3 个文本输入](http://jsfiddle.net/HrElmo/NKddu/)

我需要一个 JavaScript 计算器，它将第一个输入值乘以 0.04，第二个输入乘以 0.04，第三个输入乘以 0.08，然后将它们加在一起并回显。它还应该回显三个输入的数量。

HTML：

```
<form method="post" name="vaartus">
  <div>1<input type="checkbox" id="v1" /></div>
  <div><input type="text" name="v1_v" id="v1_v" disabled="disabled" /></div>
  <div>2<input type="checkbox" id="v2" /></div>
  <div><input type="text" name="v2_v" id= "v2_v" disabled="disabled" /></div>
  <div>3<input type="checkbox" id="v3" /></div>
  <div><input type="text" name="v3_v" id="v3_v" disabled="disabled" /></div>
  <div><input type="submit" name="arvuta" value="Arvuta" /></div>
</form> 
```

JavaScript：

```
document.getElementById('v1').onchange = function() {
  document.getElementById('v1_v').disabled = this.unchecked;
};
document.getElementById('v2').onchange = function() {
  document.getElementById('v2_v').disabled = this.unchecked;
};
document.getElementById('v3').onchange = function() {
  document.getElementById('v3_v').disabled = this.unchecked;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T23:55:19.667

```
<div><input type="submit" name="arvuta" value="Arvuta" onclick="multi()" /></div> 
```

将函数点击并在该函数中获取输入标签的值，如下所示

```
function multi(){
var val1 = document.getElementById('v1_v').value;
var val2 = document.getElementById('v2_v').value;
var val3 = document.getElementById('v3_v').value;
alert((val1*.04) +(val2*.04) + (val3*.08)); 
```

}

您可以检查并将输入解析为整数或此函数中的任何内容。

# html - 从不透明度到灰色的计算？

> ID：15593324
> 
> 赞同：1
> 
> 时间：2013-03-23T23:34:34.470
> 
> 标签：html, css

如果您选择以这种方式表达，灰色只是带有白色背景和给定不透明度的黑色。任何人都可以定量地表达这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:09:15.383

假设我们有一个白色`#ffffff`背景上的元素。如果该元素的 RGBA 值为`#000000ff`，则计算的颜色为`#000000`。沿着同样的思路，`#00000000`使元素实际上是不可见的，所以计算`#ffffff`的颜色是背景的颜色。

由于您正在查看灰色，因此它完美对齐。

*   `#000000ff`=`#000000`
*   `#000000ee`=`#111111`
*   `#000000dd`=`#222222`
*   等等

# mod-rewrite - 在不重复使用“ echo [code] >>[new place].bat ”的情况下写入另一个批次的批次

> ID：15593325
> 
> 赞同：0
> 
> 时间：2013-03-23T23:34:37.420
> 
> 标签：mod-rewrite, batch-file, windows-xp, echo

好的，我今天的问题显然非常困难，按标题我的任务似乎并不困难，但相信我，这不是你通常的任务。

我想要做的是运行一个批处理文件来编译另一个批处理文件，其中设置了一个正在运行的批处理文件中的变量。不过，这就是问题所在。我不想从编码中编写批处理文件。这就是我的意思。

这是完成的批处理文件的示例。

```
@echo off
color a
title my compiled batch
echo.
echo.
echo  This is the batch file that was compiled from the one I was using to create it.
echo.
echo.
pause
exit 
```

这是您最有可能想到的编译器。

```
[new.bat]
@echo off
color a
cls
echo.
echo type your name.
echo.
echo.
set input=
set /p input=Name:  ( I typed "my compiled batch" in this input area)
echo @echo off >>new.bat
echo color a >>new.bat
echo title %input% >>new.bat
echo echo. >>new.bat
echo echo. >>new.bat
echo This is the batch file that was compiled from the one I was using to create it. >>new.bat
echo echo. >>new.bat
echo echo. >>new.bat
echo pause >>new.bat
echo exit >>new.bat 
```

这是我希望能够看到它的 784 行有多长。

```
echo "@echo off
color a
title my compiled batch
echo.
echo.
echo This is the batch file that was compiled from the one I was using to create it.
echo.
echo.
pause
exit" >> new.bat 
```

所以基本上我想将批处理文件编译为单个字符串，但它仍然进入“new.bat”，就好像我自己编写了它一样。

反正有这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:04:57.277

让我们通过两三个有趣的技巧来解决这个问题：

*   要编译的代码包含在标识它的某个标签/行之间；例如`:EMBEDDED_CODE`。
*   使用`findstr /N "^:EMBEDDED_CODE" "%~F0"`命令获取嵌入代码的开始行和结束行。请注意，搜索字符串以开头，`^`以避免找到`findstr`命令本身的行。
*   使用`for /F "skip=%begin% ...`命令并将行号与 %end% 进行比较以提取嵌入代码。
*   将要替换的变量括在感叹号而不是百分比之间，并在开始时启用延迟扩展。

这里是：

**编辑：**为了在嵌入代码中保留 :LABELS 中的冒号，我更改`findstr`了 by 。`find`

```
@echo off
setlocal EnableDelayedExpansion
color a
cls
echo.
echo type your name.
echo.
echo.
set input=
set /p input=Name:  ( I typed "my compiled batch" in this input area)

REM Get begin and end lines of the embedded code
set begin=
for /F "delims=:" %%a in ('findstr /N "^:EMBEDDED_CODE" "%~F0"') do (
   if not defined begin (
      set begin=%%a
   ) else (
      set end=%%a
   )
)

REM Extract the embedded lines into new.bat file,
REM the replacement of variables enclosed in exclamation marks is automatic:
(for /F "skip=%begin% tokens=1* delims=[]" %%a in ('find /N /V "" "%~F0"') do (
   if %%a equ %end% goto :EOF
   echo(%%b
)) > new.bat
goto :EOF

:EMBEDDED_CODE Begin
@echo off
color a
title !input!
echo.
echo.
echo This is the batch file that was compiled from the one I was using to create it. 
echo Created on !date! @ !time!
echo.
echo.
pause
exit
:EMBEDDED_CODE End 
```

安东尼奥

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T07:39:46.840

给定 BATCHTEMPLATE.BAT （这是一个`text`文件 - 但[EDITPLUS](http://www.editplus.com)可以语法高亮`.bat`文件...

```
@echo off
color a
$name
echo.
echo.
echo  This is the batch file that was compiled from the one I was using to create it.
$date
echo.
echo.
pause
exit 
```

然后运行这个批处理：

```
@ECHO OFF
SETLOCAL
::
SET name=
SET /p name="Name: "
::
(
FOR /f "delims=" %%i IN (batchtemplate.bat) DO (
 ECHO %%i|FINDSTR /b /c:"$" >NUL
 IF ERRORLEVEL 1 (ECHO.%%i) ELSE (
 IF /i %%i==$name ECHO.title  %name%
 IF /i %%i==$date ECHO.ECHO Created %date%
 )
)
)>new.bat

TYPE new.bat 
```

使用

```
echo MY BATCH|thisbatch 
```

产量

```
Name: @echo off
color a
title  MY BATCH
echo.
echo.
echo  This is the batch file that was compiled from the one I was using to create it.
ECHO Created 24/03/2013
echo.
echo.
pause
exit 
```

我使用类似的系统来编写程序...

# c++ - 如何为地图提供默认值？

> ID：15593327
> 
> 赞同：0
> 
> 时间：2013-03-23T23:35:13.110
> 
> 标签：c++

我有一个带有字符串的地图，它返回一个整数。我希望将地图实例的整数初始化为 0。我该怎么做？例如：

```
std::map<std::string, int> x; 
```

我希望将所有整数初始化为 0 作为起点。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:36:46.080

简单地访问某个键将默认初始化其对应的值。对于`int`，这相当于将其设置为 0：

```
x["foo"]; 
```

虽然，老实说，它会更容易阅读为`x["foo"] = 0;`.

# android - 如何解决“您的APK的版本代码需要高于2”。在 Google Play 的开发者控制台中？

> ID：15593328
> 
> 赞同：52
> 
> 时间：2013-03-23T23:35:27.387
> 
> 标签：android, cordova, apk

将 Phonegap 应用程序上传到 Google Play 开发者控制台时出现此错误：

> 您的 APK 版本代码需要高于 2。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2014-04-17T20:06:26.307

如果您直接使用 Gradle，或者通过 Android Studio 间接使用：

我通过编辑文件中的版本号来修复它`build.gradle`！android.manifest 文件底部有一个小横幅，上面写着“这些更改正在被 build.gradle 文件覆盖”。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-07-13T07:23:51.957

![在此处输入图像描述](../Images/4d1c721cfc7b5a78d712281bed4605be.png)

请参阅附加的 Android Studio 快照，这应该会有所帮助。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-12-21T14:41:00.257

通过更改 AndroidManifest.xml 中的 versionCode 将版本代码增加到 3：

```
<android xmlns:android="http://schemas.android.com/apk/res/android">
        <tool-api-level>10</tool-api-level>
        <manifest android:versionCode="3" android:versionName="0.1.1" android:installLocation="preferExternal"/>
        <uses-sdk android:maxSdkVersion="10" android:minSdkVersion="7" android:targetSdkVersion="10"/>
</android> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-23T23:54:04.373

用于`aapt`验证您的 APK 版本：

```
aapt dump badging myapp.apk 
```

它会告诉你增加`versionCode`in `AndroidManifest.xml`，例如

```
 <manifest android:versionCode="3"> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-09-13T10:09:57.700

有同样的问题，并通过更改`build.gradle`文件中的以下值来解决它`Module: app`

```
defaultConfig {
        applicationId //app package goes here
        minSdkVersion 10
        targetSdkVersion 21
        **versionCode 2
        versionName "1.1"**
        signingConfig //name of keystore goes here
    } 
```

这是 Android Studio 跟踪每个应用程序版本控制的方式。

或者，对于新手，您可以通过单击应用程序的设置并导航到“风味”选项卡来访问这些设置。您可以在此处修改某些设置，例如 versionCode 和 versionName。

希望这可以帮助 ：）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-30T22:18:41.640

当您准备好将应用程序部署到 APK 时，在 JDeveloper 中转到 Application -> Deploy -> New Deployment Profile。将 Profile Type 设置为 ADF Mobile for Android，选择一个名称并单击 OK。在下一个窗口中选择 Android 选项并更改版本代码。这就是 Google Play 不喜欢的（因为您已经有一个具有相同版本代码的应用程序）。我就是这样解决这个问题的。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-08-29T13:33:34.263

android 人员和您的用户只需要跟踪所有更新，因此您需要通过更新 versionCode 和 versionName 来提及版本

以下是解决问题的方法：

**早期**

```
defaultConfig {
    applicationId "com.example.random.projectname"
    minSdkVersion 15
    targetSdkVersion 24
    versionCode 1
    versionName "1.0"
} 
```

**现在**

```
defaultConfig {
    applicationId "com.example.random.projectname"
    minSdkVersion 15
    targetSdkVersion 24
    versionCode 2
    versionName "1.0.1"
} 
```

记住

*   **versionName**是应用程序用户的 Long Description 底部显示的内容
*   虽然**versionCode**是为开发人员和谷歌的需要而设计的，并且即使您将 versionName 从 v1.0.5 更改为 v1.0.6 ，**也必须始终为每个新 versionName 加一**

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-02-26T10:32:24.953

有同样的问题。更改版本没有帮助。`versionCode`对于 Android 版本，您可以添加`config.xml`并说明版本。

```
 xmlns:gap = "http://phonegap.com/ns/1.0"
    id        = "xxx.xxxxxx"
    versionCode = "415" 
    version   = "1.0.11"> 
```

检查[http://docs.build.phonegap.com/en_US/3.1.0/configuring_basics.md.html#The%20Basics](http://docs.build.phonegap.com/en_US/3.1.0/configuring_basics.md.html#The%20Basics)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-03-23T23:44:13.703

我想您已经将版本 2 上传到您的开发控制台。只需将版本代码（注意：不是版本名称！）增加到 3，重建您的 APK 就可以了。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-02-06T18:49:52.700

我发现如果你使用的是Android Studio，你需要更新`build.gradle`文件中的版本代码。例如：

```
defaultConfig {
    applicationId "app.myapp"
    minSdkVersion 14
    targetSdkVersion 20
    versionCode 2
    versionName "1.0.0"
} 
```

...

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-03-15T00:18:36.913

我有这个问题有一段时间，它难住了我。我尝试重新导入项目。将项目从 Eclipse 导入 Android Studio。一切。我发现有效的是，您必须将版本代码增加 1 个值。您不必更改版本名称。在您导出 apk 文件之前。确保至少构建一次项目。这样新的版本代码就实现了。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-07-27T07:11:40.173

在 Android 工作室中，我只能通过更改应用程序文件中的 versionCode 来使其工作。

```
android {
    compileSdkVersion 19
    buildToolsVersion '19.1.0'
    defaultConfig {
        applicationId 'xxxxxxxxxxxxxxx'
        minSdkVersion 14
        targetSdkVersion 19
        versionCode 3
        versionName '1.1'
    }
    buildTypes {
        release {
            runProguard false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
    productFlavors {
    }
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-12-18T22:48:36.593

我的解决方案是编辑 config.xml 并更改“版本”属性。

我尝试编辑我的 AndroidManifest.xml（我能找到的每个版本）并更改了 versionCode 和 versionName 值。一些 AndroidManifest.xml 文件被原始值覆盖，一些未被覆盖。无论如何，apk 版本保持在“1”。

我在 config.xml 中查看了几次，但其中都不存在 versionCode 和 versionName。我最终决定更改 config.xml 中的“版本”值，重新构建，我的 apk 现在有了新的、正确的版本号。

在 config.xml 中：

旧的“版本”属性： `"version=0.0.1"`

新的“版本”属性： `"version=0.0.2"`

应该注意的是，我没有使用 Eclipse 或 Android Studio ...只是一个文本编辑器并运行手动构建。现在当我跑

aapt 转储徽章 [apk 名称]

我看到更新的 versionCode 和 versionName ... 具体来说，我看到了：

```
versionCode='2' versionName='0.0.2' 
```

...我现在可以再次成功地将我的 apk 上传到 Play 商店。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-12-21T06:03:29.837

```
appt dump badging myapp.apk 
```

此命令用于检查构建的 apk 版本。但是老把戏解决了这个问题，即使我增加了版本。尝试清理工作区并重新构建。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-04-08T13:31:25.880

解决它的简单方法是单击 Build > Edit Flavors...

![在此处输入图像描述](../Images/7907e0678276d18fa0911e1f74327d2a.png)

更改版本代码和版本名称

![在此处输入图像描述](../Images/def8651bc1b5f4dc44f163a4a5b1c548.png)

单击确定并完成

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-06-08T10:42:50.603

对于我的 Cordova 构建的应用程序，Gradle 文件没有静态代码。它是使用 Android Manifest 挑选出来的——

```
defaultConfig {
versionCode cdvVersionCode ?: Integer.parseInt("" + privateHelpers.extractIntFromManifest("versionCode") + "0")
applicationId privateHelpers.extractStringFromManifest("package")

if (cdvMinSdkVersion != null) {
    minSdkVersion cdvMinSdkVersion
} 
```

}

我尝试更改清单文件中的版本代码，但没有运气。

这不是一件好事，但我不慌不忙地做了这个 -

```
defaultConfig {
versionCode cdvVersionCode ?: (Integer.parseInt("" + privateHelpers.extractIntFromManifest("versionCode") + "0") + 2)
applicationId privateHelpers.extractStringFromManifest("package")

if (cdvMinSdkVersion != null) {
    minSdkVersion cdvMinSdkVersion
} 
```

}

注意：对于 Cordova 构建的应用程序，您需要在 Gradle Scripts > File 中进行更改 - “build.gradle (Module:android)”

# c# - 如何使用正则表达式删除空标签？

> ID：15593329
> 
> 赞同：1
> 
> 时间：2013-03-23T23:35:28.087
> 
> 标签：c#, regex

清理完后，我得到了一堆空标签。我想删除它们，但到目前为止我一直在使用的表达式：

```
Regex.Replace(clean, "(<[/a-zA-Z]+?)([^>]*?)(>)", "$1$3"); 
```

我在[这里](https://stackoverflow.com/questions/8606336/remove-empty-html-from-a-document)看到了一个讨论，但并没有让我清楚。我如何确保标签的第一个和第二个发现的内容是相同的（将它们匹配在一起）除了斜杠？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T23:52:45.223

您可以使用反向引用来确保结束元素的名称与开始标签的名称匹配。这是我通过扩展 Konrad 的解决方案得到的模式：

```
result = Regex.Replace(input, @"<([^>/][^>]*)></\1>", String.Empty); 
```

这里`\1`指的是模式中匹配的第一个组，由模式中的括号表示，括号包围着开始元素的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T23:39:38.030

我认为您无需检查它们是否属于同一种类。这是假设您有一个有效的 XML 结构。如果是这样，表格上就不能有任何东西：

```
<someTagStarts></anOtherTagEnds> 
```

所以你可以使用下面的正则表达式。

```
Regex.Replace(input, "<[^>/][^>]*></[^>]*>", ""); 
```

我也找到[了这个链接](https://stackoverflow.com/questions/3129738/remove-empty-tags-using-regex)，但我不确定他们为什么在结束标记处使用加号而不是星号。最好问一下。

意识到您甚至可能需要删除看似空的标签（它们包含空白空间和类似的东西），我可以反弹新浪的解决方案并添加以下内容）。

```
Regex.Replace(input, @"<([^>/][^>]*)>((&nbsp;)*|\s*)</\1>", String.Empty); 
```

就在这里的某个地方，我们从可爱到讨厌的正则表达式体验。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T17:44:04.987

这将是一个迟到的答案，但正如我在您[之前的问题](https://stackoverflow.com/questions/15592973/how-to-clean-up-xml-attributes-using-regex/15731526#15731526)中所说：

[*不要尝试用正则表达式解析 xml/html，使用真正的 xml 解析器来处理 xml*](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

还好，对于一些简单的情况也可以使用，但是在维护和处理边角的情况下会带来更多的麻烦。

使用[Linq To XML](http://msdn.microsoft.com/en-us/library/bb387061.aspx)：

```
var xml = @"<root>
            <notempty>text</notempty>
            <empty1><empty2><empty3/></empty2></empty1>
            </root>";

var xDoc = XDocument.Parse(xml);
RemoveEmptyNodes(xDoc.Root);
xDoc.Save(fileName2);

void RemoveEmptyNodes(XElement xRoot)
{
    foreach (var xElem in xRoot.Descendants().ToList())
    {
        RemoveEmptyNodes(xElem);
        if (String.IsNullOrWhiteSpace((string)xElem) && xElem.Parent!=null) 
            xElem.Remove();
    }

} 
```

输出将是（处理@kirmir 提到的情况）

```
<root>
    <notempty>text</notempty>
</root> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-10T14:40:00.550

我找到了一种删除所有**空**标签的方法（有没有类）

我发现的正则表达式解决方案是：

`<\s*[^>/]*>((&nbsp;)*|\s*)</\s*[^></]*>`

看下面的例子：

`<span class="test1"></span> <span class= "test2">That´s a text</span>`

该正则表达式只会删除**Test2**类。

我希望这对你有帮助！:)

# macos - 子视图更改时更改 NSSplitView 中的分隔线位置

> ID：15593336
> 
> 赞同：3
> 
> 时间：2013-03-23T23:37:04.547
> 
> 标签：macos, cocoa, nsview, nssplitview

我有`NSSplitView`四个子视图。每个子视图都有一个带有一些文本的标题和一个开/关复选框，在它下面有一个`NSTableView`. 用户可以使用复选框来切换表格的可见性。

如果表格在程序启动时可见，并且用户取消选中复选框，则表格消失。子视图因此变得更小。

我如何对此做出`NSSplitView`反应（通过调整分隔线）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T23:37:30.093

要以编程方式设置分隔线的位置，请在 NSSplitView 上调用[-setPosition:ofDividerAtIndex](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSSplitView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSSplitView/setPosition:ofDividerAtIndex:) :。

# .net - RouteTable.Routes.MapHubs() 仅在 Windows Azure 模拟器中引发 ArgumentNullException。为什么？

> ID：15593337
> 
> 赞同：3
> 
> 时间：2013-03-23T23:37:05.947
> 
> 标签：.net, asp.net-mvc-3, azure, signalr

我在 MVC 3.0 Windows Azure 应用程序中使用 SignalR。以下行`ArgumentNullException`仅在 Windows Azure 模拟器中引发。如果我运行 MVC 3.0 应用程序而不是云应用程序，它不会抛出。（我还没有尝试在部署的云中运行此代码）。

```
public static void RegisterRoutes(RouteCollection routes)
{
    RouteTable.Routes.MapHubs();
    // ...
} 
```

message 旁边没有关于错误的其他信息`Value cannot be null. Parameter name: instanceName`。我不知道它是什么实例名称。

我不知道可能出了什么问题。为什么会这样？

**编辑**

这是完整的异常信息：

> System.ArgumentNullException 未处理 HResult=-2147467261
> 消息=值不能为空。参数名称：instanceName
> Source=Microsoft.AspNet.SignalR.Core ParamName=instanceName
> StackTrace：在 Microsoft.AspNet.SignalR.Hosting.HostDependencyResolverExtensions.InitializeHost(IDependencyResolver resolver, String instanceName, CancellationToken hostShutdownToken) at Owin.OwinExtensions.UseType[T]( IAppBuilder builder, Object[] args) at Owin.OwinExtensions.MapHubs(IAppBuilder builder, String path, HubConfiguration configuration) at System.Web.Routing.SignalRRouteExtensions.<>c_ *DisplayClass7.b* _5(IAppBuilder map) at Microsoft.Owin.Host .SystemWeb.OwinAppContext.Initialize（动作`1 startup) at Microsoft.Owin.Host.SystemWeb.OwinBuilder.Build(Action`1 启动）在 System.Web.Routing.RouteCollectionExtensions.MapOwinPath(RouteCollection routes, String name, String pathBase, Action`1 startup) at System.Web.Routing.SignalRRouteExtensions.MapHubs(RouteCollection routes, String name, String path, HubConfiguration 配置）在 System.Web.Routing.SignalRRouteExtensions.MapHubs（RouteCollection 路由，字符串路径，HubConfiguration 配置）在 System.Web.Routing.SignalRRouteExtensions.MapHubs（RouteCollection 路由，HubConfiguration 配置）在 System.Web.Routing.SignalRRouteExtensions.MapHubs（RouteCollection路线）在 Cerebello.MvcApplication.RegisterRoutes(RouteCollection routes) 在 c:\Projetos\Cerebello\Cerebello\CerebelloWebRole\Global.asax.cs:CerebelloWebRole.Code.Helpers.RouteHelper 的第 25 行。RegisterAllRoutes() in c:\Projetos\Cerebello\Cerebello\CerebelloWebRole\Code\Helpers\RouteHelper.cs:第 82 行 CerebelloWebRole.WebRole.Run() 在 c:\Projetos\Cerebello\Cerebello\CerebelloWebRole\WebRole.cs:line 23 在 Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.StartRoleInternal() 在 Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.StartRole() 在 Microsoft.WindowsAzure.ServiceRuntime.Implementation.Loader.RoleRuntimeBridge.b__2() 在 System.Threading.ExecutionContext.RunInternal( ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) 在 System.Threading.ExecutionContext。在 System.Threading.ThreadHelper.ThreadStart() InnerException 处运行（ExecutionContext executionContext，ContextCallback 回调，对象状态）：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:43:05.180

不幸的是，这是一个已知问题：[https ://github.com/SignalR/SignalR/issues/1616](https://github.com/SignalR/SignalR/issues/1616)

请随时对这个问题发表评论。知道此错误发生在 Windows Azure 模拟器中很有用。如果您发现这个问题出现在部署中，那也绝对值得注意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-16T15:37:26.297

似乎`MapHubs()`是在 IIS 进程之外调用的，现在不允许。如果您有一个注册路由的方法，并且它在 IIS 内外运行的代码之间共享，您必须确保`MapHubs()`仅从 IIS 调用该方法。

# javascript - 我无法在 IE7+ 中设置活动课程

> ID：15593339
> 
> 赞同：0
> 
> 时间：2013-03-23T23:37:16.387
> 
> 标签：javascript, jquery

我的页面中有这些锚元素，并且对同一页面上的某些内容具有 href。我自己不敢相信从昨天开始我尝试了多少方法来设置一个简单的活动类。但他们都没有在***IE7+***甚至***IE10***中工作。我检查了标记、css 和脚本但没有成功，这太令人困惑了。

我在一个简单的脚本中尝试了 2 个脚本`addClassthat()`，并且`removeClass()`在除 ie7+ 之外的所有浏览器中都可以使用，并且我尝试`siblings()`过的其他方法也可以在 ie7+ 中使用。

我什至尝试了已经在其他项目中[在动态导航中]工作的脚本。但是对于这个静态绝对 URL，我在***IE7+***中没有得到任何结果。

我只是厌倦了在这方面进行更多尝试，实际上非常想知道问题出在哪里。

顺便说一句，嵌套 html 元素的额外使用仅用于设计目的，仅此而已。

[在这里](http://jsfiddle.net/yz5Vw/3/)您可以看到尝试过的方法之一。

请帮助

**编辑**：经过 2 天的尝试和尝试，我突然找到了解决方案。

为所有锚元素设置类“x”并编写下面的脚本将解决问题。

```
 $('.x  > a').click(function (e) 
    {
         e.preventDefault();
    }); 
```

但是，如果有人可以解释使用上述脚本背后的主要逻辑，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T23:40:41.473

从您的链接中删除该`target="_top"`属性。这将导致页面在新窗口或选项卡中加载，从而有效地杀死您正在应用的任何 jQuery。

**[jsFiddle 示例](http://jsfiddle.net/yz5Vw/5/)**

# c# - 断开连接的类中的事件处理

> ID：15593340
> 
> 赞同：1
> 
> 时间：2013-03-23T23:37:26.480
> 
> 标签：c#, email, events, design-patterns, business-logic

我正在寻找一种方法来处理 B 类中 A 类引发的事件而不耦合类。

情况是 A 类是一个状态机。当 A 类的状态变为活动时，我需要发送电子邮件。我想创建一个类来监听该事件并处理它。

我将状态逻辑封装在 A 类中，并从网页（asp.net webform）中对其进行实例化。

我也可以在 webform 中实例化 email 类，但我不希望这样做，在这种情况下，编写 webform 的开发人员将不得不连接逻辑和事件。我想将所有这些逻辑推回到业务层。但我似乎没有办法做到这一点。

在 BLL

```
class StateHandler()
{
    public event EventHandler StateChanged;

    SetState(int newState)
    {
        // to keep things simple for sample let's assume 2 states
        if (newState ==1 ) this.State = "Active";
        else this.State = "Inactive";

        if (this.StateChanged != null)
        this.StateChanged(this, new EventArgs());

    }
}

class EmailProvider()
{
    SendEmail()
    {
        // logic to send email
    }
} 
```

Asp.net 页面

```
....
void OnSubmit_click()
{
    StateHandler sh = new StateHandler();

    //adds an event handler to the StateChanged event
    sh.StateChanged += new EventHandler(sh_StateChanged);

    //setting this will fire the StateChanged event
    sh.SetState(1);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:13:41.207

EventBus 可能对您的案例很有用。它只是一个将事件传递给注册订阅者的消息代理。我不知道是否有任何 C# 库。但是应该很容易实现。看看番石榴的[EventBus](https://code.google.com/p/guava-libraries/wiki/EventBusExplained)。它是 Java，但你应该明白。

在像 EJB 这样的容器管理的情况下，容器处理异步消息分派。在 Java/Java EE 中，您将再次拥有[Message Driven Beans](http://docs.oracle.com/javaee/6/tutorial/doc/gipko.html)。

# javascript - Javascript：基于 d3 的 recurse() 的递归深度优先搜索分层重新排序

> ID：15593344
> 
> 赞同：1
> 
> 时间：2013-03-23T23:37:57.633
> 
> 标签：javascript, json, recursion, depth-first-search

我正在尝试通过复杂的 JSON 对象（例如[this one](https://www.googleapis.com/freebase/v1/search?indent=true&filter=%28all+name%3A%22Blade+Runner%22%29&output=%28disambiguator%29) ）进行深度优先搜索，并输出具有以下新结构的新对象：

```
[
    {
       name: "Blade Runner",
       children : [
           {Obj}, {Obj},{Obj}, ...
       ]
     },
     ...
] 
```

我已经将 d3.js 的`recurse()`函数作为参考，但似乎无法理解如何在没有预先存在的“子”数组的情况下给定输入 JSON 来编写类似的函数：

```
function recurse(node, depth, nodes) {
  //assumes children exist in node object
  var childs = children.call(hierarchy, node, depth);
  node.depth = depth;
  nodes.push(node);
  if (childs && (n = childs.length)) {
    var i = -1, n, c = node.children = [], v = 0, j = depth + 1, d;
    while (++i < n) {
      d = recurse(childs[i], j, nodes);
      d.parent = node;
      c.push(d);
      v += d.value;
    }
    if (sort) c.sort(sort);
    if (value) node.value = v;
  } else if (value) {
    node.value = +value.call(hierarchy, node, depth) || 0;
  }
  return node;
} 
```

您将如何编写这样的新函数来对上面的 JSON 响应进行 DFS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T08:16:37.063

正如所评论的，您要创建的新结构的标准尚不清楚。不过，DefiantJS ( [http://defiantjs.com](http://defiantjs.com) ) 可能会帮助您遍历 JSON 结构，例如您举例说明的结构。

DefiantJS 使用“search”方法扩展了全局对象，无论深度如何，您都可以使用它在 JSON 结构中搜索匹配项。该方法返回匹配元素的数组（如果未找到匹配则为空）。

例如：（
在这里工作小提琴：http: [//jsfiddle.net/hbi99/x6B3A/](http://jsfiddle.net/hbi99/x6B3A/)）

```
var url = 'https://www.googleapis.com/freebase/v1/search?indent=true&filter=%28all+name%3A%22Blade+Runner%22%29&output=%28disambiguator%29';
Defiant.ajax(url)
    .search('//*[name="Musical Track"]')
    .each(function(item) {
        console.log( item );
    }); 
```

此代码下载 JSON 结构并搜索任何名为“Musical Track”的元素并返回两个匹配项。

# mysql - 无法编写正确的 mysql 查询 (COUNT)

> ID：15593345
> 
> 赞同：0
> 
> 时间：2013-03-23T23:37:59.913
> 
> 标签：mysql, database

我有以下mysql表：

```
 Person   Car      Color
     ------------------------
     1       Audi     Blue
     2       BMW      Red
     3       Honda    Blue
     4       Audi     Red
     5       Audi     Yellow
     6       Audi     Blue 
```

我正在尝试选择以下内容：

拥有奥迪及其颜色的人在每个人中的发现不到 3 次。

结果应该是第 4 个人和第 5 个人。

我尝试了以下查询，但没有得到想要的结果：

```
SELECT Person FROM CarTable
WHERE Car = "Audi"
GROUP BY Color
HAVING COUNT(*) < 3 
```

实现我正在做的事情的正确查询是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:10:05.727

下面是一个使用子查询的查询，该子查询首先识别颜色

```
select person 
from cars 
where car='Audi' 
      and color in (select color 
                    from cars 
                    group by color 
                    having count(color) < 3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T23:42:12.793

```
SELECT Person
FROM CarTable t1
JOIN (SELECT color, COUNT(*) c
      FROM CarTable
      GROUP BY color
      HAVING c < 3) t2
USING (color) 
```

# c# - 用线加入导航属性

> ID：15593346
> 
> 赞同：0
> 
> 时间：2013-03-23T23:38:07.383
> 
> 标签：c#, linq, dapper

我尝试使用 LINQ 加入导航属性。这是我的代码

```
 var activities = Using<GetActivitiesForUser>()
        .Execute(User.DisplayAs, User.MarketId);

    var contacts = Using<GetContactsForUser>()
        .Execute(User.DisplayAs, User.MarketId);

    var model = from activity in activities
                join contact in contacts
                on activity.ContactId equals contact.ContactId
                select activity; 
```

此代码只会选择没有任何加入的活动。该活动有一个名为联系人的属性，我想从联系人中加入该属性。

**更新**

解决它的例子

```
foreach(var activity in activities)
{
activity = from contact in contacts
where contact.ContactId=activity.ContactId
select contact
} 
```

但我想通过加入来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:16:23.797

您必须在查询结果中同时包含活动和联系人：

```
from activity in activities
join contact in contacts
on activity.ContactId equals contact.ContactId
select new { activity, contact }; 
```

或选择两个对象的单个属性。

**在您发表评论后**编辑：****

 **您将无法让 Dapper 填充 activity.contact，它故意保持简单。您可以做的是遍历结果并自己设置属性：

```
foreach(var anon in model)
{
    anon.activity.contact = anon.contact;
} 
```

其中模型是查询`.ToList()`。

另一种有效但丑陋的方法可能是：

```
model.Select(x => { x.activity.contact = x.contact; return activity; }).ToList(); 
```

立即返回修改后的活动。它很丑陋，因为它滥用了一种旨在成为无状态（`Select`）的方法，但是是的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T23:51:15.323

看起来您正在使用实体框架

尝试

```
var model = activities.Include("Contact"); 
```**

# ios - default.png 用于不同的目标（精简版和完整版）

> ID：15593350
> 
> 赞同：2
> 
> 时间：2013-03-23T23:39:01.667
> 
> 标签：ios

我希望为精简版和完整版设置不同的 default.png。但看起来我只能设置一个 default.png。是否有任何简单的解决方案可以将 default.png 切换为精简版和完整版？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:43:44.527

您可以在 Xcode 中为不同的构建目标复制不同的资源。只需将新的 Default.png 添加到项目中，然后编辑 Copying Resources 的 Build Phases 规则（单击 xcodeproj 将其调出）。

# java - 如何防止窗口关闭？

> ID：15593356
> 
> 赞同：1
> 
> 时间：2013-03-23T23:40:33.560
> 
> 标签：java, swing, joptionpane, windowlistener

首先对不起我的英语不好。

嗨，我正在尝试使用带有 YES_NO_OPTION 的 confirmDialog。我想要的是，当我关闭一个框架时，会显示一个 confimDialog，询问我是否要关闭。

如果我按是，每件事都被关闭，如果我按否，confirmDialog 将消失

但问题是即使我没有按任何按钮框架关闭这是我的代码：

```
final JFrame frame = new JFrame("2D Game");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setSize(1600,600);
frame.setResizable(false);

    private void continuerButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_continuerButtonActionPerformed
        int level=getlevel();
        System.out.println(niveau);
        if(niveau == 1)
        {
            this.dispose();
            frame.add(new Board());
            frame.setVisible(true);
            frame.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) 
            {
                doExitOption();
            }
            });
        }
    } 
```

这是`doExitOption`方法：

```
 public void doExitOption()
    {
        int option=JOptionPane.showConfirmDialog(null, "do you want to quit the game",    "Warnning",JOptionPane.YES_NO_OPTION);
            if(option == JOptionPane.YES_OPTION)
            {
                frame.dispose();
            }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T23:44:21.310

您需要更改`JFrame`的默认关闭操作，以便您的调用`dispose`是处理窗口的唯一调用：

```
frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T23:47:31.457

请参阅[关闭应用程序](http://tips4java.wordpress.com/2009/05/01/closing-an-application/)。它可以为您管理默认的关闭操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T07:33:08.913

将 JFrame 的默认关闭更改为`DO_NOTHING_ON_CLOSE`.

# javascript - 当屏幕缩小到平板电脑/移动视图时，我的网站表单输入将不起作用，但在最大化时它工作正常

> ID：15593361
> 
> 赞同：1
> 
> 时间：2013-03-23T23:41:19.207
> 
> 标签：javascript, html, css

当缩小为平板电脑视图或移动设备视图时，我的游戏无法运行。当它处于正常浏览器状态时，它可以正常工作，但由于某种原因，它就像网站被冻结一样。我无法单击按钮、输入数字，甚至无法单击单选按钮。

这是我使用不同 CSS 缩小不同布局的代码：

```
<link href="styles/casino.css" rel="stylesheet" type="text/css">
<link href="styles/tablet.css" rel="stylesheet" type="text/css" media="handheld, only screen and (max-width:1024px), only screen and (max-device-width: 650px)">
<link href="styles/mobile.css" rel="stylesheet" type="text/css" media="handheld, only screen and (max-width: 480px), only screen and (max-device-width: 480px)">
<!--[if IEMobile]>
  <link rel="stylesheet" type="text/css" href="/styles/mobile.css" media="screen" />
<![endif]--> 
```

这是我的游戏表单代码：

```
<div id="game">
    <div id="gameScreen">
        <img src="images/roulettetable.jpg" class="desktop" height="413" width="100%" alt="Roulette Table" />
        <img src="images/roulettetable.jpg" class="tablet" height="255" width="99%" alt="Roulette Table" />
        <img src="images/roulettetable.jpg" class="phone" height="215" width="99%" alt="Roulette Table" />
        <div id="info"><p>First Name: <span id="firstN"></span><br/>Last Name: <span id="lastN"></span><br/>Phone Number: <span id="phoneN"></span><br/>Postal Code: <span id="postalC"></span><br/>Amount: <span id="startA"></span></p></div>
        <div id="cash"><p></p></div>
    </div>
    <div id="gameForm">
        <form id="gameForm">
            <label>Bet: </label>
                <input type="text" value="0" id="bet" name="betAmount" onClick="if (this.value == '0') this.value='';" required/>
            <label> 1-12: </label>
                <input type="radio" name="temp" value="1-12" id="thirdOne" onClick="deselect()"/>
            <label> 13-24: </label>
                <input type="radio" name="temp" value="13-24" id="thirdTwo" onClick="deselect()"/>
            <label> 25-36: </label>
                <input type="radio" name="temp" value="25-36" id="thirdThree" onClick="deselect()"/>
            <label>Single Number:</label>
                <input type="number" name="num" id="num" min="00" max="36" onBlur="validateNum();"/><br/><hr/>
            <label>Black:</label>
                <input type="radio" name="temp" id="blackBet" value="Black" onClick="deselect()"/>
            <label> Even: </label>
                <input type="radio" name="temp" value="even" id="evenBet" onClick="deselect()"/> 
            <label for="halfTwo"> High: </label>
                <input type="radio" name="temp" value="19-36" id="halfTwo" onClick="deselect()"/><br/>  
                <input type="button" name="spin" value="Spin!!!" id="spin" onClick="spinIt();" />   
            <label>Red:</label>
                <input type="radio" name="temp" id="redBet" value="Red" onClick="deselect()" />
            <label> Odd: </label>
                <input type="radio" name="temp" value="odd" id="oddBet" onClick="deselect()" />
            <label> Low: </label>
                <input type="radio" name="temp" value="1-18" id="halfOne" onClick="deselect()"/>
                <input type="button" name="leave" value="Leave Game" id="leave" onClick="window.location = 'outcome.html'"/>
        </form>
    </div>
</div> 
```

# c - 如何使用 C 中的指针将数组（1D）传递给函数？

> ID：15593365
> 
> 赞同：1
> 
> 时间：2013-03-23T23:42:04.967
> 
> 标签：c, arrays, function, pointers

我正在为这个程序的最后一点苦苦挣扎，我需要将数组传递给两个不同的函数，但我不知道该怎么做。

我得到的唯一错误发生：这里：

```
 input(array[20]);
 calculate(array[20],&pairs); 
```

和这里：

```
//exit,
exit; 
```

除此之外，它应该按照我需要的方式工作，我想出了如何在普通变量上使用指针，但是数组的行为不同，我不知道该怎么做......

文档已经完成了一半，我仍然需要在描述概述的末尾添加循环，但我只需要传递数组的帮助。

涉及我的退出行的错误也与问题无关，但如果您知道一个很好的修复程序！

```
/*
Description: Do not use global variables. Pass your arguments by value and
             by reference. Using arrays and modular programming techniques,
             write a C program that will allow a user to populate an array
             with integers, and then compute and print out the number of
             adjacent pairs in the array (i.e. the number of occurrences where
             an array element is the same as its neighbors). For example, if
             the array contained [2,3,3,4,52,52,4,4,4,4,7,7,1], the number of
             adjacent pairs is 6\. The program should give the user the option
             of examining more than one array (i.e. loop). Assume the array has
             a max. of 20 elements. The main() function should primarily be
             responsible to direct the flow of logic.  That is: use one
             function to obtain input (pass by reference), another function to
             do processing (pass by value), and perhaps a third function to do
             output (pass by value).  The main() function should call the input
             function and the processing function. 
*/

//Include statements.
#include <cstdlib>
#include <iostream>
#include <math.h>

//Standard namespace.
using namespace std;

void input (int array[20]); //Used when user inputs the numbers.
void calculate(int array[20], int *pairs); //Used to calculate the matches.
void output(int *pairs); //Used to output the number of pairs.

int main(void) 
{ 
     int array[20] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
     char quit;

     start:
     int pairs = 0;
     input(array[20]);
     calculate(array[20],&pairs);
     output(&pairs);

     //Ask the user if they want to exit
     printf("\nWould you like to continue testing my project, or exit?");
     printf("\nTo exit input: 'N' or 'n'. To continue testing input anything else.");
     //store their input in variable: exit
     scanf("%s",&quit);
     //If they want to exit...
     if (quit == 'N' || quit == 'n')
     {
         //exit,
         exit;
     }
     //otherwise,
     else
     {
         //clear the screen
         system("cls");
         //and go back to the start.
         goto start;
     }
}

void input(int array[20])
{
     int count = 0;
     for (count;count<20;count++)
     {
         printf("Enter values . . . \n");
         scanf("%i", &array[count]);
     }
}

void calculate(int array[20], int *pairs)
{
     int counter = 0;
     for (counter;counter<19;counter++)
     {
         if (array[counter] == array[counter+1])
            *pairs+=1;
     }
}

void output(int *pairs) 
{
     printf("Number of pairs: [%i]\n", *pairs);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:43:27.170

调用函数时不传递大小。

```
input(array); 
```

这应该足够了。

* * *

另一种解决方案是使函数采用`int*`. 您将添加一个额外的参数来传递数组的大小。

```
void func(int* my_array, int size); 
```

你会像这样声明你的数组：

```
int i[20]; 
```

并像这样调用你的函数：

```
func(i, 20); 
```

* * *

目前，通过传入`array[20]`，您将返回 an `int`，如果您想知道，您将超出范围，因为最大索引是`19`. 表达式的不适当的返回类型不允许您编译程序。

# php - 如何在表格中同时显示入住和退房时间？

> ID：15593367
> 
> 赞同：0
> 
> 时间：2013-03-23T23:42:18.693
> 
> 标签：php, mysql

如何获取结帐时间和签入时间以显示在 html/php 表中。目前，我可以查看入住时间或退房时间，但不能同时在表格中查看。这是我正在使用的代码：

`$ListQuery = "SELECT * FROM systemlogs WHERE ((itembarcode='".@$_POST["inputdata"]."') and (action='checkinitem')) ORDER BY actiondatetime DESC";`

部分 (action='checkinitem') 让我只查看签入时间，但如果我将其更改为 (action='checkoutitem') 则我只能查看签出时间。如何同时查看 checkinitem 和 checkoutitem。

MySQL 表

```
actiondatetime                          |                       action
 2013-03-22   5:00 pm                                           checkin
 2013-03-22   8:00 pm                                           checkout 
```

* * *

我想在网页表中查看：

```
Checkout                                  |                     Checkin
2013-03-22   5:00 pm                                 2013-03-22  8:00pm 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:59:42.220

您可以使用[`IN`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)：

`WHERE action IN ('checkouttime', 'checkintime')`

# delphi - Delphi 7中的套接字错误10053（一次发送的数据包太多？）

> ID：15593369
> 
> 赞同：0
> 
> 时间：2013-03-23T23:42:26.203
> 
> 标签：delphi, delphi-7

我正在 Delphi 7 中创建一个程序，它从服务器（不是我的）发送和接收数据包。它发送一个数据包，等待接收数据包，然后读取它。所有这些程序都可以正常工作，但是当我循环 sendPacket 程序（我需要这样做）时，它会冻结并给出套接字错误 10053。我认为这是因为服务器拒绝请求，因为在短时间内发送了太多数据包的时间。是否同时发送多个数据包？我尝试在发送数据包后放置一个 Sleep(1000) 。

问题：如何限制将要发送的数据包数量，或使其一次发送的数据包不超过 1 个？

```
begin
  if pack[1]='bf' 
  then
    if pack[3]='-1' 
    then 
      Label2.Caption:='Not Found'
    else
      begin
        found:=true;
        while found=true do 
          begin
            Pickle.sendPacket('%xt%s%u#bf%'+Pickle.intRoom+'%122868290%');
            room:= pack[3];
            Label2.Caption:='Found at the '+room;
            if room = '-1' 
            then 
              begin 
                Label2.Caption:='Left the server';  
                found:=false; 
              end;
          end;
      end;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T07:21:33.200

在 pack[3] 包含 -1 之前，您的代码中的以下循环不会保留。

```
 while found=true do 
      begin
        Pickle.sendPacket('%xt%s%u#bf%'+Pickle.intRoom+'%122868290%');
        room:= pack[3];
        Label2.Caption:='Found at the '+room;
        if room = '-1' 
        then 
          begin 
            Label2.Caption:='Left the server';  
            found:=false; 
          end;
      end; 
```

未显示设置 pack[3] 的位置。您应该将代码移动到接收事件中，而不是循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:48:02.620

弄清楚你需要多久更新一次，并且只在需要时发送数据包。

例如，仅在当前房间发生变化时发送数据包。如果房间保持不变，为什么要一次又一次地发送？

如果您想以指定的间隔发送更新，请使用类似`Sleep(25);`每个周期的方法。

# asp.net - 我可以在我的 ASP 网站上启用 MVC 吗？

> ID：15593372
> 
> 赞同：0
> 
> 时间：2013-03-23T23:42:45.873
> 
> 标签：asp.net, asp.net-mvc

我有一个常规的 ASP.net 网站，我想使用 RESTful API。我可以在不在 Visual Studio 中创建新的 MVC 站点的情况下使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:48:37.663

如果您想在 Web 表单项目中使用 ASP.NET MVC Web API 来实现您的 RESTful API，也许[这可以帮助您](http://blogs.msdn.com/b/henrikn/archive/2012/02/23/using-asp-net-web-api-with-asp-net-web-forms.aspx)

如果您想将一般的 ASP.NET MVC 混合到现有的 Web 窗体应用程序中，您可以尝试这样的[事情](http://www.packtpub.com/article/mixing-aspnet-webforms-and-aspnet-mvc)。还应该有大量关于 SO 和网络的文献，说明如何在一个项目/解决方案中将两者混合在一起

# sql - 由特定记录分隔的 GROUP 值

> ID：15593377
> 
> 赞同：0
> 
> 时间：2013-03-23T23:43:29.850
> 
> 标签：sql, sql-server-2008

我想制作一个特定的计数器，在连续找到特定记录后将加一。

```
 time    event      revenue   counter

 13.37    START        20          1  
 13.38   action A      10          1  
 13.40   action B       5          1  
 13.42      end                    1  

 14.15    START        20          2  
 14.16   action B       5          2  
 14.18     end                     2  

 15.10    START        20          3  
 15.12     end                     3 
```

我需要找出每次访问的总收入（START 和 END 之间的操作）。我在想最好的方法是设置这样的计数器：

所以我可以对活动进行分组。但如果您有更好的解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:01:41.483

You can use a query similar to the following:

```
with StartTimes as
(
  select time,
    startRank = row_number() over (order by time)
  from events
  where event = 'START'
)
select e.*, counter = st.startRank
from events e
  outer apply
  (
    select top 1 st.startRank
    from StartTimes st
    where e.time >= st.time
    order by st.time desc
  ) st 
```

[SQL Fiddle with demo](http://sqlfiddle.com/#!3/254e4/5).

May need to be updated based on the particular characteristics of the actual data, things like duplicate times, missing events, etc. But it works for the sample data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:04:00.663

SQL Server 2012 supports an OVER clause for aggregates, so if you're up to date on version, this will give you the counter you want:

```
count(case when eventname='START' then 1 end) over (order by eventtime) 
```

You could also use the latest START time instead of a counter to group by, like this:

```
with t as (
  select
  *,
  max(case when eventname='START' then eventtime end)
    over (order by eventtime) as timeStart
  from YourTable
)
  select
    timeStart,
    max(eventtime) as timeEnd,
    sum(revenue) as totalRevenue
  from t
  group by timeStart; 
```

[Here](http://sqlfiddle.com/#!6/254e4/6)'s a SQL Fiddle demo using the schema Ian posted for his solution.

# c - 为什么静态变量不允许 loop() 运行？

> ID：15593385
> 
> 赞同：0
> 
> 时间：2013-03-23T23:44:42.553
> 
> 标签：c, variables, loops, static

我正在为模仿太阳的灯编写代码（即根据真实的太阳升起和落下）。

我正在尝试在循环中使用静态变量，以计算自 2012 年 1 月 1 日以来的天数（最后一个闰年（366 天））

出于某种原因，该程序仅在变量*未*声明为静态时才有效，但我需要计数器在每天的迭代中持续存在。

任何帮助将非常感激。谢谢你。

```
// Sun Object 

#define REDPIN 5
#define GREENPIN 6
#define BLUEPIN 3

//#define FADESPEED 480// make this higher to slow down
#define FADESPEED 120

void setup() {
  pinMode(REDPIN, OUTPUT);
  pinMode(GREENPIN, OUTPUT);
  pinMode(BLUEPIN, OUTPUT);

}

void loop() {

  // daylengths for 4 year's worth of days starting from jan 1 of Great year (366 days) (1/1/2012)
 int dayLengths[] = {33540000,
33540000,
33600000,
// ....
// hundreds of values omitted here
// ....
33360000,
33420000,
33480000,
33480000};

//2012 = 366 days + day # from jan 1st (in 2013)
//starts on 0th day so subtract 1
//ready to go for march 24st @ sunrise

 // why does it not function when day is static?????

     static int day = 449;

  int r, g, b;

   long start = millis();

   for (r = 0; r <256; r++){
     analogWrite(REDPIN, r);
     delay(FADESPEED);
   }

  //analogWrite(REDPIN, 255);

 for (g = 0; g < 230; g++) { 
    analogWrite(GREENPIN, (g*.4));
    delay(FADESPEED*2);

   }

   long stopped = millis();
   long elapsed = stopped - start;
                                          //approx
   // delays (amount of daylight - ( sunrise/sunset time )
 //  delay(dayLengths[day]- (97200*2));

     delay(dayLengths[day]- (elapsed*2));

   for (g = 230; g > 0; g--) { 
    analogWrite(GREENPIN, (g*.4));
    delay(FADESPEED*2);
   }

   for (r = 256; r >0; r--){
     analogWrite(REDPIN, r);
     delay(FADESPEED);
   }

   analogWrite(REDPIN,0);

   //delays (millis in 1 day) - (length of daylight)
   delay(86400000 - dayLengths[day]);

  // once 4 year cycle is over, resets day to 0
   if (day < sizeof(dayLengths  )){

   day++;
   }

   else
   {
   day = 0;

  } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:13:00.753

听起来您在嵌入式环境中运行，并且本机硬件可能有一些限制：`loop`函数内部的静态使用。

我已经讨厌自己提出这个建议，但也许你可以尝试`global`或`global static`使用（即把`day`变量放在`loop()`函数之外，不管有没有`static`关键字）。这将使它在所有`loop()`呼叫中都有生存的空间......

# objective-c - 使用拖放重新排列时，小圆线栏卡在 NSOutlineView 顶部

> ID：15593387
> 
> 赞同：0
> 
> 时间：2013-03-23T23:44:53.100
> 
> 标签：objective-c, xcode, macos, cocoa

我有 NSOutlineView ，目前只列出根项的子项。一切正常，除非我尝试使用拖放重新排列项目。前面有圆圈的线始终位于顶行上方，并且在需要在其他项目之间拖动时不会跟随我的项目。但是，我仍然可以正确地获取索引位置，因此我仍然可以在数据源中正确地重新排列它们。我不想通过将它们拖到**彼此**上来重新排列项目，我只想重新排列根级别的项目（如 Mac 上的 VLC 播放列表）。

这是我需要的四种方法：

```
//queue is a C-based data structure

-(NSInteger)outlineView:(NSOutlineView *)outlineView numberOfChildrenOfItem:(id)item
{
    if(item == nil){
        return queue.count; //each list item
    }else{
        return 0; //no children of each list item allowed
    }
}

-(id)outlineView:(NSOutlineView *)outlineView child:(NSInteger)index ofItem:(id)item
{
    if(item != nil) return nil;

    return [[NSDictionary dictionaryWithObjectsAndKeys:
             [NSNumber numberWithLong:index],@"index",
             [NSString stringWithFormat:@"%s",queue.item[index].filepath],@"filePath",
             nil] copy];
}

-(BOOL)outlineView:(NSOutlineView *)outlineView isItemExpandable:(id)item
{
    if(item == nil){
        return YES;
    }else{
        return NO;
    }
}

-(id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)tableColumn byItem:(id)item
{
    if(item == nil) return nil;

    return [item objectForKey:[tableColumn identifier]];
} 
```

还有我的拖动方法：

```
-(BOOL)outlineView:(NSOutlineView *)outlineView writeItems:(NSArray *)items toPasteboard:(NSPasteboard *)pasteboard
{
    [pasteboard declareTypes:[NSArray arrayWithObject:LOCAL_REORDER_PASTEBOARD_TYPE] owner:self];
    [pasteboard setData:[NSData data] forType:LOCAL_REORDER_PASTEBOARD_TYPE];
    return YES;
}

-(NSDragOperation)outlineView:(NSOutlineView *)outlineView validateDrop:(id <NSDraggingInfo>)info proposedItem:(id)item proposedChildIndex:(NSInteger)index
{
    NSUInteger op = NSDragOperationNone;

    if(index != NSOutlineViewDropOnItemIndex){
        op = NSDragOperationMove;
    }
    return op;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:39:07.900

# php - yiibooster 确认模式

> ID：15593388
> 
> 赞同：1
> 
> 时间：2013-03-23T23:44:59.223
> 
> 标签：php, yii, modal-dialog

我使用按钮 CONFIRM MODAL ( [http://yii-booster.clevertech.biz/javascript.html#modals](http://yii-booster.clevertech.biz/javascript.html#modals) ) 我不知道如何将布尔变量“确认”传递给控制器

我托盘这样的东西

```
<?php 
if ($model->confirmado == 0) {
    $this->widget('bootstrap.widgets.TbButton', array(
        'label'=>'Confirmar Planilla',
        'type'=>'warning',
        'htmlOptions'=>array(
            'onclick'=>'js:bootbox.confirm("¿Esta seguro que desea confirma la planilla?",
                function(confirmed){ 
                    console.log("Confirmed: "+confirmed);
                    $.ajax({
                        url: CController::createUrl(array("adulto/confirmar")),
                        data: { "term": confirmed.term },
                        success: function(data) { response(data); }
                    });
                })',
        ),
    ));
}?> 
```

但对我没有用....有什么建议吗？

谢谢！！

# sql - SQL DELETE WITH JOIN 不起作用

> ID：15593389
> 
> 赞同：1
> 
> 时间：2013-03-23T23:45:24.587
> 
> 标签：sql, select

我有这个查询，它返回没有引用的关键字的所有记录查询正在工作，但我想删除所有这些记录，问题是如果我把 DELETE 而不是 SELECT 我得到错误。

```
SELECT Keywords.[Id]
  ,[QuoteId]      
  FROM [QuotesTemple].[dbo].[Keywords]
 LEFT JOIN [QuotesTemple].[dbo].Quotes ON Keywords.QuoteId=Quotes.Id
  WHERE Quotes.Id IS NULL 
```

这不起作用。

```
DELETE
  FROM [QuotesTemple].[dbo].[Keywords]
  LEFT JOIN [QuotesTemple].[dbo].Quotes ON Keywords.QuoteId=Quotes.Id
  WHERE Quotes.Id IS NULL 
```

我收到此错误：

消息 156，级别 15，状态 1，第 4 行关键字“LEFT”附近的语法不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T23:50:14.457

像这样写：

```
DELETE [QuotesTemple].[dbo].[Keywords] FROM [QuotesTemple].[dbo].[Keywords]
  LEFT JOIN [QuotesTemple].[dbo].Quotes ON Keywords.QuoteId=Quotes.Id
  WHERE Quotes.Id IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T23:55:54.140

有效的语法是：

```
DELETE [QuotesTemple].[dbo].[Keywords]
FROM [QuotesTemple].[dbo].[Keywords] AS k
LEFT JOIN [QuotesTemple].[dbo].[Quotes] AS q ON k.QuoteId = q.Id
WHERE q.Id IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T00:00:59.673

```
you can also write as below

delete t1 FROM projects AS t1 LEFT OUTER JOIN [QuotesTemple].[dbo].Quotes AS t2 on t1.QuoteId= t2.QuoteId where t2.Id is Null 
```

# android - 如何限制在警报对话框 EditText 中输入的字符数

> ID：15593390
> 
> 赞同：5
> 
> 时间：2013-03-23T23:45:26.387
> 
> 标签：android, android-edittext, android-alertdialog

我知道如何通过 XML (android:maxLength) 限制大小，但我正在代码中动态创建一个警报对话框。我可以使用类似的东西吗？（也希望有 API 10 兼容的解决方案）

我正在使用警报对话框提示用户输入稍后以图形方式显示的文本值。

```
public void onClickPosition(View v) {
    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setTitle(R.string.title_Position);
    alert.setMessage(R.string.message_Position);

    final EditText input = new EditText(this);
    input.setText(_currentClass.getPosition());
    alert.setView(input);

    alert.setPositiveButton(R.string.option_Okay, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        _currentClass.setPosition(input.getText().toString());
        TextView textView = (TextView)findViewById(R.id.textPosition);
        textView.setText(_currentClass.getPosition());
      }
    }); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T23:52:29.883

您可以`maxLength`通过`InputFilter`. 假设您希望`EditText`最多接受 20 个字符：

```
input.setFilters(new InputFilter[] { new InputFilter.LengthFilter(20) }); 
```

由于`setFilters()`接受一系列过滤器，因此您可以添加多个过滤器。此外，例如，如果您需要对应允许的字符类型进行更多控制，您可以实现自己的过滤器并将其与数组一起传递。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T23:49:43.520

尝试这样的事情：

```
InputFilter[] FilterArray = new InputFilter[1];
FilterArray[0] = new InputFilter.LengthFilter(MAX_LENGTH);
input.setFilters(FilterArray); 
```

# php - 编码问题... windows-1255 到 utf 8？

> ID：15593394
> 
> 赞同：1
> 
> 时间：2013-03-23T23:46:37.897
> 
> 标签：php, encoding, iconv, windows-1255

在我知道之前询问了从 windows-1255 到 utf-8 的编码转换，但我仍然得到不同的结果，我无法解决它。

第一个问题是“php iconv() 或 mb_convert_encoding() 是否支持 windows-1255????” 在测试时，它会返回几个输出（使用 //ignore 和 //translate），但它根本不能正常工作。

我正在查看 mb_list_encodings() 输出，但它不包括 window-1255... 使用 windows-1255 输入（从网上抓取）播放和测试 mb_detect_encoding() 不会返回好的字符集...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T04:59:18.893

您应该能够只使用[strtr](http://www.php.net/manual/en/function.strtr.php)与要转换的关联字符数组（数据[可从 MSDN 获得](http://msdn.microsoft.com/en-us/goglobal/cc305148.aspx)，并转换为下面的 PHP 数组）。请注意，在此代码中，保留的字节值被替换为 U+FFFD 替换字符 ( `"\xef\xbf\xbd"`)。

```
function win1255ToUtf8($str) {
    static $tbl = null;
    if (!$tbl) {
        $tbl = array_combine(range("\x80", "\xff"), array(
            "\xe2\x82\xac", "\xef\xbf\xbd", "\xe2\x80\x9a", "\xc6\x92",
            "\xe2\x80\x9e", "\xe2\x80\xa6", "\xe2\x80\xa0", "\xe2\x80\xa1",
            "\xcb\x86", "\xe2\x80\xb0", "\xef\xbf\xbd", "\xe2\x80\xb9",
            "\xef\xbf\xbd", "\xef\xbf\xbd", "\xef\xbf\xbd", "\xef\xbf\xbd",
            "\xef\xbf\xbd", "\xe2\x80\x98", "\xe2\x80\x99", "\xe2\x80\x9c",
            "\xe2\x80\x9d", "\xe2\x80\xa2", "\xe2\x80\x93", "\xe2\x80\x94",
            "\xcb\x9c", "\xe2\x84\xa2", "\xef\xbf\xbd", "\xe2\x80\xba",
            "\xef\xbf\xbd", "\xef\xbf\xbd", "\xef\xbf\xbd", "\xef\xbf\xbd",
            "\xc2\xa0", "\xc2\xa1", "\xc2\xa2", "\xc2\xa3", "\xe2\x82\xaa",
            "\xc2\xa5", "\xc2\xa6", "\xc2\xa7", "\xc2\xa8", "\xc2\xa9",
            "\xc3\x97", "\xc2\xab", "\xc2\xac", "\xc2\xad", "\xc2\xae",
            "\xc2\xaf", "\xc2\xb0", "\xc2\xb1", "\xc2\xb2", "\xc2\xb3",
            "\xc2\xb4", "\xc2\xb5", "\xc2\xb6", "\xc2\xb7", "\xc2\xb8",
            "\xc2\xb9", "\xc3\xb7", "\xc2\xbb", "\xc2\xbc", "\xc2\xbd",
            "\xc2\xbe", "\xc2\xbf", "\xd6\xb0", "\xd6\xb1", "\xd6\xb2",
            "\xd6\xb3", "\xd6\xb4", "\xd6\xb5", "\xd6\xb6", "\xd6\xb7",
            "\xd6\xb8", "\xd6\xb9", "\xef\xbf\xbd", "\xd6\xbb", "\xd6\xbc",
            "\xd6\xbd", "\xd6\xbe", "\xd6\xbf", "\xd7\x80", "\xd7\x81",
            "\xd7\x82", "\xd7\x83", "\xd7\xb0", "\xd7\xb1", "\xd7\xb2",
            "\xd7\xb3", "\xd7\xb4", "\xef\xbf\xbd", "\xef\xbf\xbd",
            "\xef\xbf\xbd", "\xef\xbf\xbd", "\xef\xbf\xbd", "\xef\xbf\xbd",
            "\xef\xbf\xbd", "\xd7\x90", "\xd7\x91", "\xd7\x92", "\xd7\x93",
            "\xd7\x94", "\xd7\x95", "\xd7\x96", "\xd7\x97", "\xd7\x98",
            "\xd7\x99", "\xd7\x9a", "\xd7\x9b", "\xd7\x9c", "\xd7\x9d",
            "\xd7\x9e", "\xd7\x9f", "\xd7\xa0", "\xd7\xa1", "\xd7\xa2",
            "\xd7\xa3", "\xd7\xa4", "\xd7\xa5", "\xd7\xa6", "\xd7\xa7",
            "\xd7\xa8", "\xd7\xa9", "\xd7\xaa", "\xef\xbf\xbd", "\xef\xbf\xbd",
            "\xe2\x80\x8e", "\xe2\x80\x8f", "\xef\xbf\xbd",
        ));
    }
    return strtr($str, $tbl);
} 
```

我用这个 PHP 脚本生成了上面的代码：

```
function win1255ToUtf8($str) {
    static $tbl = null;
    if (!$tbl) {
        $tbl = array_combine(range("\x80", "\xff"), array(
            <?php

        function encodeString($str) {
            return '"' . preg_replace('/../', '\x$0', bin2hex($str)) . '"';
        }

        function codepointToUtf8($n) {
            return mb_convert_encoding(pack('V', $n), 'UTF-8', 'UTF-32LE');
        }

        $text = strip_tags( file_get_contents( 'http://msdn.microsoft.com/en-us/goglobal/cc305148.aspx') );
        preg_match_all('/([0-9A-F]{2}) = U\+([0-9A-F]{4})/', $text, $matches, PREG_SET_ORDER);

        $table = array_fill(0, 128, "\xef\xbf\xbd");
        foreach ($matches as $match) {
            $input = hexdec($match[1]) - 128;
            if ($input >= 0) {
                $table[$input] = codepointToUtf8(hexdec($match[2]));
            }
        }

        $buf = '';
        foreach ($table as $from => $to) {
            $buf .= encodeString($to) . ', ';
        }
        echo wordwrap(substr($buf, 0, -1), 68, "\n            "), "\n";

?>
        ));
    }
    return strtr($str, $tbl);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-19T08:43:00.757

找到了这个，它对我有用

```
$content = iconv("CP1255", "UTF-8", $content); 
```

来源：[专家交流](http://www.experts-exchange.com/Programming/Languages/Scripting/PHP/Q_22706439.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T00:51:24.980

```
function cp1251_to_utf8 ($txt)  {
    $in_arr = array (
        chr(208), chr(192), chr(193), chr(194),
        chr(195), chr(196), chr(197), chr(168),
        chr(198), chr(199), chr(200), chr(201),
        chr(202), chr(203), chr(204), chr(205),
        chr(206), chr(207), chr(209), chr(210),
        chr(211), chr(212), chr(213), chr(214),
        chr(215), chr(216), chr(217), chr(218),
        chr(219), chr(220), chr(221), chr(222),
        chr(223), chr(224), chr(225), chr(226),
        chr(227), chr(228), chr(229), chr(184),
        chr(230), chr(231), chr(232), chr(233),
        chr(234), chr(235), chr(236), chr(237),
        chr(238), chr(239), chr(240), chr(241),
        chr(242), chr(243), chr(244), chr(245),
        chr(246), chr(247), chr(248), chr(249),
        chr(250), chr(251), chr(252), chr(253),
        chr(254), chr(255), chr(170), chr(186), chr(434), chr(435), chr(431), chr(447)
    );   

    $out_arr = array (
        chr(208).chr(160), chr(208).chr(144), chr(208).chr(145),
        chr(208).chr(146), chr(208).chr(147), chr(208).chr(148),
        chr(208).chr(149), chr(208).chr(129), chr(208).chr(150),
        chr(208).chr(151), chr(208).chr(152), chr(208).chr(153),
        chr(208).chr(154), chr(208).chr(155), chr(208).chr(156),
        chr(208).chr(157), chr(208).chr(158), chr(208).chr(159),
        chr(208).chr(161), chr(208).chr(162), chr(208).chr(163),
        chr(208).chr(164), chr(208).chr(165), chr(208).chr(166),
        chr(208).chr(167), chr(208).chr(168), chr(208).chr(169),
        chr(208).chr(170), chr(208).chr(171), chr(208).chr(172),
        chr(208).chr(173), chr(208).chr(174), chr(208).chr(175),
        chr(208).chr(176), chr(208).chr(177), chr(208).chr(178),
        chr(208).chr(179), chr(208).chr(180), chr(208).chr(181),
        chr(209).chr(145), chr(208).chr(182), chr(208).chr(183),
        chr(208).chr(184), chr(208).chr(185), chr(208).chr(186),
        chr(208).chr(187), chr(208).chr(188), chr(208).chr(189),
        chr(208).chr(190), chr(208).chr(191), chr(209).chr(128),
        chr(209).chr(129), chr(209).chr(130), chr(209).chr(131),
        chr(209).chr(132), chr(209).chr(133), chr(209).chr(134),
        chr(209).chr(135), chr(209).chr(136), chr(209).chr(137),
        chr(209).chr(138), chr(209).chr(139), chr(209).chr(140),
        chr(209).chr(141), chr(209).chr(142), chr(209).chr(143),
        chr(209).chr(148), chr(209).chr(404), chr(209).chr(150),
        chr(209).chr(406), chr(209).chr(151), chr(209).chr(407)
    );   

    //$txt = str_replace($in_arr,$out_arr,$txt);
    $txtNew='';
    for($C=0;$C<StrLen($txt);$C++){
    If(In_Array($txt[$C],$in_arr)){
    $txtNew.=$out_arr[Array_Search($txt[$C],$in_arr)];
    }Else{
    $txtNew.=Utf8_Encode($txt[$C]);
    }

    }
    //return $txt;
    return $txtNew;
 } 
```

取自[http://forums.adelavida.com/?Idx=php&Status=1291168368](http://forums.adelavida.com/?Idx=php&Status=1291168368)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-20T09:58:03.790

我发现问题不在于iconv之类的转换函数，而在于数据库连接。该脚本默认打开与 latin1 字符集的连接，然后当它使用 utf8 字符串在表中写入数据时输入错误。您必须确保您的连接与您的数据一样是 UTF8。

用mysql你可以看到它

```
print mysqli_character_set_name($link)."\n"; 
```

如果不是 UTF8，则设置连接字符集

```
mysqli_set_charset($link, "utf8"); 
```

`iconv('ISO-8859-8','UTF-8//IGNORE',hebrev($value));`那么对于视觉希伯来语到 UTF8 或任何转换功能，一切都会好起来的

# java - 如何将 Jar 导入 Eclipse

> ID：15593397
> 
> 赞同：1
> 
> 时间：2013-03-23T23:46:53.690
> 
> 标签：java, eclipse, jar, import

我一直在 eclipse 中做一些事情，直到最近我遇到了一些技术问题，导致我的硬盘被完全破坏，我丢失了除了 jar 文件之外的所有东西。

我希望重新开始工作，但不知道该怎么做，因为我没有源文件，只有 jar。我尝试反编译和导入，但它弄乱了我的代码，并且需要永远清理它。希望我做错了什么，并且有一种更简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:10:28.297

如果您不需要 JAR 的源代码，您可以在 eclipse 中对其进行依赖（右键单击项目 -> 构建路径 -> 依赖项）。或者，如果您使用构建工具（maven、gradle 等），请将 jar 放入本地/远程存储库，并将其作为构建文件的依赖项。

[否则，使用Java Decompiler](http://java.decompiler.free.fr/)对 JAR 进行反编译，然后将 java 文件放入您的 eclipse 项目中。

# php - 不能在类函数中设置会话

> ID：15593398
> 
> 赞同：0
> 
> 时间：2013-03-23T23:46:54.937
> 
> 标签：php, class, multilingual

我尝试建立一个多语言网站，但是点击选择语言的提交按钮后无法设置变量的问题：

```
<form action="<?php $aradown->make_lang(); ?>" method="post">
  <input type="submit"  name="en" value="english" >
  <input type="submit" name="ar" value="arabic" >
</form> 
```

类功能代码：

```
public function make_lang(){
  if($_POST['en']){
    $_SESSION['lang_en'];
  }

  if($_POST['ar']){
    $_SESSION['lang_ar'];   
  } 
}   

public function check_lang(){
  if(isset($_SESSION['lang_en'])){
    $lang="english";
  }
  if(isset($_SESSION['lang_ar'])){
    $lang="arabic";
  }
  $path=dirname(__FILE__)."/languages/".$lang.".php";   
  return $path;
} 
```

这是要使用的代码：

```
include('includes/core.class.php');
$aradown= new aradown;
$lang_file=$aradown->check_lang();
include($lang_file); 
```

我试图打印 的结果`$lang_file`，但`$lang`var 为空。

```
C:\AppServ\www\aradown-new\includes/languages/.php 
```

有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:50:46.407

您需要将变量实际设置为某些东西。

```
 if($_POST['en']){
        $_SESSION['lang_en'] = true;
        }

    if($_POST['ar']){
        $_SESSION['lang_ar'] = true;   
        } 
```

以及使用`session_start()`.

# wcf - 未找到 ServiceMetadataBehavior 属性 WCF C++/CLI

> ID：15593404
> 
> 赞同：2
> 
> 时间：2013-03-23T23:47:41.833
> 
> 标签：wcf, c++-cli

我在我的 C++/CLI dll 项目（VS2012 Express）中引用 System::ServiceModel。以下代码失败并出现以下错误，我找不到解决方法。

错误 C2337：“ServiceMetadataBehavior”：找不到属性

```
[System::ServiceModel::ServiceContractAttribute]
[System::ServiceModel::Description::ServiceMetadataBehavior]
public ref class PlaybackManager
{
public:
    ~PlaybackManager() { this->!PlaybackManager(); }
    !PlaybackManager() {  }

    // Playback action methods
    [System::ServiceModel::OperationContractAttribute]
    void Play();
    [System::ServiceModel::OperationContractAttribute]
    void Stop();
    [System::ServiceModel::OperationContractAttribute]
    void Pause();
    [System::ServiceModel::OperationContractAttribute]
    void Previous();
    [System::ServiceModel::OperationContractAttribute]
    void Next();
    [System::ServiceModel::OperationContractAttribute]
    void Random();
}; 
```

编辑1：

需要注意的是，不可能完全用代码编写 wcf 服务，即没有 app.config 文件。虽然服务有 ServiceMetadataBehavior 帮助器来创建元数据交换行为实现，但端点没有这样的东西。这是“设计”吗？ [如何：使用代码发布服务的元数据](http://msdn.microsoft.com/en-us/library/aa738489.aspx)

编辑2：

好的，所以上面的警告似乎不一定是正确的。下面是 app.config 代表我在代码中尝试执行的操作，如果我将 ServiceMetatdataBehavior 属性删除到端点类实现，我会得到相同的错误。

```
<configuration>
  <system.serviceModel>
    <services>
      <service name="Engine.PlaybackManager">

        <endpoint
          address="net.tcp://localhost:7008/PlaybackManager"
          binding="mexTcpBinding"
          contract="IMetadataExchange"
          />

        <endpoint
          address="net.tcp://localhost:7008/PlaybackManager"
          binding="netTcpBinding"
          contract="Engine.PlaybackManager"
          />
      </service>
    </services>

  </system.serviceModel>
</configuration> 
```

错误是：

> 在服务 PlaybackManager 实施的合同列表中找不到合同名称“IMetadataExchange”。将 ServiceMetadataBehavior 添加到配置文件或直接添加到 ServiceHost 以启用对此协定的支持。

问题是，如果我将 ServiceMetadataBehavior 属性添加到 PlaybackManager 类，我会得到上面的原始错误，即无法识别。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:58:48.993

我理解为什么没有人对此做出回应，“我从哪里开始”是唯一可能的回应。因此，如果有人遇到与我一样的困惑，这里有一些提示：

我的主要问题是将 xml 配置命名法（在大多数在线示例中找到）与代码等效项进行映射：

```
<services> maps to System::ServiceModel::ServiceHost
<behaviors> maps to "your instance of ServiceHost"->Description->Behaviors
<behavior> is type specific, the type being a nested element in the xml, thus:
<behavior> <serviceMetadata /> </behavior> maps to ServiceMetadataBehavior
<endpoint> maps to ServiceEndpoint 
```

最后：mex 端点（添加了 ServiceMetadataBehavior 的端点）需要它自己的命名空间，因此将“/mex”添加到实现端点 uri 地址的末尾。

```
example:
implementation address = "net.tcp://localhost:5000/Engine"
mex address =            "net.tcp://localhost:5000/Engine/mex" 
```

显然，这些提示不是解释，但我希望它们可以帮助像我问这个问题时一样困惑的人。

# python - 更改函数字典 - Python

> ID：15593406
> 
> 赞同：0
> 
> 时间：2013-03-23T23:48:08.497
> 
> 标签：python, dictionary, global-variables

所以我在业余时间一直在创建一个相当基本的 rpg，但我遇到了一个绊脚石。我想通过在玩家每次进入/退出战斗时更改命令字典来使其在特定时间只能访问某些功能。但是，我为搜索字典键设置的循环似乎不适用于除最初编写的命令之外的任何命令。

**主文件：**

```
 from commands import *

    Commands = {
        "travel": Player.travel,
        "explore": Player.explore,
        "help": Player.help,
        }

    p = Player()

    while (john_hero.health > 0):
        line = raw_input("=> ")
        args = line.split()
        if len(args) > 0:
            commandFound = False
            for c in Commands.keys():
                    if args[0] == c[:len(args[0])]:
                            Commands[c](p)
                            commandFound = True
                            break
            if not commandFound:
                    print "John's too simple to understand your complex command." 
```

**命令.py**

```
 class Player:
                def __init__(self):
                    self.state = "normal"
                    john_hero = John()
                    self.location = "Town"
                    global Commands
                    Commands = {
                            "attack": Player.attack,
                            "flee": Player.flee,
                            "help": Player.help
                            }
                def fight(self):
                    Player.state = "fight"
                    global Commands
                    enemy_a = Enemy()
                    enemy_name = enemy_a.name
                    print "You encounter %s!" % (enemy_name) 
```

*注意：循环取自其他人的代码。我正在使用它，因为我创建游戏主要是为了学习目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:55:50.437

It seems that your code in `command.py` trying to modify a global variable that is defined in `Main file`, in other words, something like this: [Global Variable from a different file Python](https://stackoverflow.com/questions/3400525/global-variable-from-a-different-file-python)

This doesn't work because your code now has two `Commands` variables, one in the scope of `command.py`, one in the scope of `Main file`. Rather than trying to make two files share a global variable (which is a rather terrible idea IMO), I suggest you make `Commands` an attribute of `Player`:

```
class Player:
    def __init__(self):
        ...
        self.Commands = {
            "attack": Player.attack,
            "flee": Player.flee,
            "help": Player.help
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:57:24.817

我会做类似的事情

```
commands = {"travel":{"cmd":Player.travel, "is_available":True}}
for key in commands:
    if commands[key]["is_available"]:
        print "do stuff" 
```

但正如@arunkumar 所指出的，如果没有更多代码，将很难回答这个问题。

# jquery - 选中复选框时将输入类型隐藏为文本

> ID：15593408
> 
> 赞同：-1
> 
> 时间：2013-03-23T23:48:34.740
> 
> 标签：jquery, html, input, checkbox

我只是想知道在选中复选框按钮时将输入类型从隐藏更改为文本的最佳方法是什么。

我正在寻找这样的东西

```
 <div class="options">
     <input type="checkbox" checked="">
   </div>

    <form>
        <input type="hidden">
    </form> 
```

然后选中一个复选框

```
 <div class="options">
     <input type="checkbox" checked="checked">
   </div>

    <form>
        <input type="text">
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:10:47.450

我这样做是为了好玩：

```
$(document).ready(function () {
    $("#txt").toggle();
    $("#chk").change(function () {
        $("#txt").toggle();
    });
});

<input type="checkbox" id="chk" />
<input type="text" id="txt" /> 
```

我没有将其从隐藏更改为文本，而是切换单个输入元素的可见性。这当然是从隐藏开始的，并且在您选中时变得可见，如果您取消选中则不可见。如果你想要不同的行为，你会有一些小工作要做，但我相信你足够聪明来处理它。

祝你好运！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:59:53.130

看看[**这个现场 jsfiddle**](http://jsfiddle.net/BTGSk/)

HTML：

```
<input type="checkbox" class="check1">Show checkbox</input>
<input type="hidden" class="hidden1" value="Some Value" />
<input type="text" class="text1" style="display:none" /> 
```

查询：

```
$(".check1").click(function () {
    if ($('.check1').is(':checked')) {
        $(".text1").val($(".hidden1").val());
        $(".text1").show();
    } else {
        $(".text1").val("");
        $(".text1").hide();
    }
}); 
```

* * *

根据您发布的代码，这就是您要查找的内容：

```
$('.options input[type='checkbox']').click(function () {
    if ($('.options input[type='checkbox']').is(':checked')) {
        $('form').html("<input type='text'>");
    } else {
        $('form').html("<input type='hidden'>");
    }
}); 
```

不过，我不明白你为什么要这样做。你只是想显示和隐藏文本框吗？在这种情况下，你可以写：

```
$('.options input[type='checkbox']').click(function () {
    $('input[type='text']').toggle();
}); 
```

# haskell - 为什么我可以在我的模式匹配中对其中一种模式进行咖喱而不是另一种？

> ID：15593410
> 
> 赞同：10
> 
> 时间：2013-03-23T23:48:41.027
> 
> 标签：haskell, pattern-matching, currying

我有一个带有两个参数的函数，我必须对其进行模式匹配。如果我在第一个模式上使用柯里化，它将无法编译：

```
 drop' :: Int -> [a] -> [a] 
  drop' 0  = id -- ghci: "Equations for drop' have different numbers of arguments"
  drop' n (x:xs) = drop' (n-1) xs 
```

编译器给出以下输出：

```
99.hs:106:3:
Equations for drop' have different numbers of arguments
  99.hs:106:3-15
  99.hs:107:3-33
In an equation for `split':
    split xs n
      = (take' n xs, drop' n xs)
      where
          take' 0 _ = []
          take' n (x : xs) = x : take (n - 1) xs
          drop' 0 = id
          drop' n (x : xs) = drop' (n - 1) xs  
 Failed, modules loaded: none. 
```

但是，如果我只给出咖喱模式，那么它会编译：

```
 drop' :: Int -> [a] -> [a] 
  drop' 0  = id -- compiles 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T00:03:02.187

我能找到的唯一解释（[http://www.haskell.org/pipermail/haskell-cafe/2009-March/058456.html](http://www.haskell.org/pipermail/haskell-cafe/2009-March/058456.html)）：

> 这个问题主要是句法上的，因为大多数出现的具有不同数量参数的定义都是简单的拼写错误。另一个可能是实现问题：它使模式匹配规则更加复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:01:41.760

我不能肯定地告诉你*为什么*，但这是一个已知的限制。同一函数的所有情况都必须具有相同数量的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T02:25:57.053

可以肯定的是，这是 GHC 的一个令人讨厌的“功能”，但要修复它，您可以这样做：

```
drop' n = \(x:xs) -> drop' (n-1) xs 
```

你必须要么都咖喱，要么都不用咖喱，而且都用相同数量的参数。如果这是一个 lint 检查，那就太好了：但我希望有一个编译器选项可以打开/关闭它。

# cocos2d-iphone - 在一个场景中 CCLayer 之间的通信

> ID：15593419
> 
> 赞同：1
> 
> 时间：2013-03-23T23:49:13.587
> 
> 标签：cocos2d-iphone, kobold2d, cclayer, ccscene

我有 2 个 CCLayer 需要在单独的 .m 文件中相互通信

*   Level1.m (CCScene with Level1 CCLayer) - 保存平铺地图和玩家精灵
*   HUDLayer.m（链接到 Level1.m 的顶部） - 保存所有按钮

如何在 HUDLayer.m 中获取以下代码以与 Level1.m 中的玩家精灵对话？

```
- (void)MoveUpSelected {
        CCMoveTo* moveup = [CCMoveBy actionWithDuration:1  position:ccp(0,-100)];
        CCSequence* sequence = [CCSequence actions: moveup, nil];
        [Player runAction:sequence];
          } 
```

请帮助我已经坚持了好几天了。至少如果有人能指出我正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:43:26.187

I would advice you to use you scene object to control communication between its layers. You can create a HUD protocol and set the scene as its delegate. And for each HUD event the scene will react accordingly by accessing the proper layer (stored as its member).

This way you won't have to make this layer coupling.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:53:14.043

要访问另一层，您需要对其进行引用。有很多方法可以做到这一点。在您的情况下，只需为 CCScene 类的每一层添加一个属性。然后图层可以通过其父级访问场景：

```
CCLayer* otherLayer = [(YourActualSceneClass*)self.parent otherLayer]; 
```

非常重要的是不要在任一层中存储对另一层的引用，或者如果这样做，请确保将其设为弱引用，或者在清理方法中将其设为 nil。否则，您创建了一个保留周期。

您将[在此处找到有关访问其他节点的更多信息](http://www.koboldtouch.com/display/IDCAR/Strategies+for+Accessing+Other+Nodes)。

# java - 为什么在引用静态方法中的字段时不能使用关键字“this”？

> ID：15593420
> 
> 赞同：2
> 
> 时间：2013-03-23T23:49:14.600
> 
> 标签：java, compiler-errors

```
public class Date
{

static int month; 

public static void setMonth(int x)
{ 
 this.month = x;  //compiler error
}

public static int getMonth()
{
 return month;  //compiles just fine, no error
}

} 
```

编译时，我收到错误：非静态变量 this 不能从静态上下文中引用。但是，如果我删除“this”。没有错误。当我使用关键字 static 明确声明月份时，我不明白为什么它说月份是一个非静态变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T23:55:22.583

您根本无法`this`在静态上下文中使用。那是设计使然-`this`指的是对象而不是类。如果您遇到方法参数和字段之间可能的名称冲突的问题，您可以改用类名：

```
public static void setMonth(int month)
{ 
 Date.month = month; 
} 
```

另一方面，您可以考虑您的设计并重新考虑将整个类用作一个单例对象的决定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T23:50:16.440

this 指的是当前实例。静态方法与实例无关；它们与类相关联。

这个例子是个坏主意。任何了解`java.util.Date`和的人都会感到困惑`java.sql.Date`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T00:00:05.753

考虑这种情况：

```
class ParaentClass {

  public static final int SOME_VALUE = 7;

  public modValue(int m) {
    // WRONG
    return this.SOME_VALUE % m;
  }

}

class ChildClass extends ParentClass { }

// . . .

(new ChildClass()).modValue(4); 
```

在上面的代码中，当我们调用 时`modValue`，`this`实际上是 的实例`ChildClass`，而不是的实例`ParentClass`，因此当 JVM 执行该方法时，它甚至不知道在哪个类上查找静态字段。我想 JVM 可以做一些事情，比如爬过继承层次结构来寻找最接近的匹配静态字段——但这会产生糟糕的性能。

无论如何，他们决定定义语义的方式`static`是它们与一个类相关联，并且它们不能被覆盖。因此，仅通过类名（例如 ）来引用它们才有意义`ParentClass.SOME_VALUE`，而不是通过对像`this`.

如果静态变量当前在范围内，您*可以省略类名：*

```
 public modValue(int m) {
    // CORRECT
    return ParentClass.SOME_VALUE % m;
  } 
```

或者

```
 public modValue(int m) {
    // ALSO CORRECT
    return SOME_VALUE % m;
  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T00:26:40.050

在 Java 中，您可以选择在类中将字段设为静态或非静态。

当字段是静态的时，您不需要“实例化”该类的“实例”来引用它。

在您的示例中，我可以从另一个类的同一包中访问“月”变量（因为您没有“访问修饰符”，Java 使该变量为“包私有” - 隐藏到每个类中，除了相同的目录（Java 术语中的包））通过执行以下操作：

```
public class Example {
    void outputMonth() {
         System.out.println("This is the month: " + Date.month);
    }
} 
```

但是，如果删除了 static 修饰符，那么“月”就不会简单地附加到类上。它属于类的每个“实例”。使用您当前版本的程序，我可以将“月”移动到示例类，并让 Date 使用 Example.month 而不是月来引用它，它的工作方式完全相同。

要“实例化”一个类的“实例”，请使用“new”关键字：

```
public class Example {
    void instantiateAndDisplay() {
         Date newInstance = new Date();
         System.out.println("This won't be pretty, but it's a new Date: " + newInstance);
    }
 } 
```

现在，如果从“月”中删除静态关键字，则每个日期“实例”都有自己的月变量副本，可以独立更改。对 new 的两次调用产生两个实例，三个调用，三个实例，等等。

如果这更清楚一点，那么编译器警告您有关“this”的原因是“this”是当前实例的抓取包术语。由于您将该方法设为静态，因此没有实例 - 该代码附加到该类，但它可以移动到 Example 类，并且 Date 可以通过调用 Example.setMonth(month); 来使用它；

定义“this”的原因是范围有时不明确。在您的 setMonth 示例中，如果您从所有方法中删除了 static 修饰符，则可以将局部变量从“x”重命名为“month”，但如果没有这个，您所做的就是将从自身传入的局部变量月分配给本身，它什么都不做。“this”将“month”的范围定义为“Date 类的当前实例”，然后允许您对其进行分配，如下例所示：

```
public class Date {
    private int month;
    public void setMonth(int month) {
        this.month = month;
    }
    public void getMonth() {
        return month; // Note - no competing scope, so month comes from the current instance.
    }
 } 
```

然后，您可以创建两个新的 Date 实例，将它们的月份分配给不同的值，并独立使用它们。但是，如果修饰符是静态的，则该类的所有实例以及“访问修饰符”允许的任何类都可以访问该值，其范围超出了本讨论的范围。

# php - php mysqli 插入和更新查询

> ID：15593423
> 
> 赞同：-1
> 
> 时间：2013-03-23T23:49:33.840
> 
> 标签：php, forms, jquery, mysqli

我正在创建一个反馈表单，允许用户编写他们的反馈并使用 php 和 mysqli 我根据用户的用户名将这些反馈存储在数据库中我确实成功插入数据但没有用户的用户名所以问题是：当我写了一个更新查询我变得无法插入任何数据有人可以帮助我吗？

# 反馈表格.php

```
<?php

session_start();
 $login = ($_SESSION['login']);
   $userid = ($_SESSION['user_id']);
   $login_user = ($_SESSION['username']);
   $fname = ($_SESSION['first_name']);
   $lname = ($_SESSION['last_name']);
   $sessionaddres =($_SESSION['address']);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>feedback page</title>
    <script type = "text/javascript" src = "http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link href="style/stylesheet.css"rel="stylesheet" type="text/css"/>
    <script type = "text/javascript">
    $(function(){
       $('#submit').click(function(){
         $('#container').append('<img src = "images/loading.gif" alt="Currently loading" id = "loading" />');
             var comments = $('#comments').val();
             $.ajax({
                url: 'feedback_process.php',
                type: 'POST',
                data: {"comments": comments},
                success: function(result){
                     $('#response').remove();
                     $('#container').append('<p id = "response">' + result + '</p>');
                     $('#loading').fadeOut(500, function(){
                         $(this).remove();
                     });
                }
             });         
            return false;
       });
    });
    </script>
    </head>
<?php require_once('header.php'); ?>
<body>
<form action = "feedback_form.php" method = "post">
  <div id = "container">
            <h2><?php echo $login_user ?></h2>

          <label for = "comments">Comments</label>
          <textarea rows = "5"cols = "35" name = "comments" id = "comments"></textarea>
          <br />
  </div>
   </form>
       <input type = "submit" name = "submit" id = "submit" value = "send feedBack" />
</body>
</html> 
```

# 反馈过程.php

```
<?php

session_start();

 $login = ($_SESSION['login']);
   $userid = ($_SESSION['user_id']);
   $login_user = ($_SESSION['username']);
   $fname = ($_SESSION['first_name']);
   $lname = ($_SESSION['last_name']);
   $sessionaddres =($_SESSION['address']);

$conn = new mysqli('localhost', 'root', '', 'lam_el_chamel_db');

  echo"<pre>";
  print_r($_POST);
  echo"</pre>";

  if(isset($_POST['comments'])){

  $comments = $_POST['comments'];

  $query = "INSERT into feedback (feedback_text user_name,) VALUES(?,?)";

  $stmt = $conn->stmt_init();
  if($stmt->prepare($query))
  {

     $stmt->bind_param('ss', $comments, $login_user);
     //$stmt->execute();

  }
  $query2 = "UPDATE feedback SET (feedback = ?, user_name = ?) WHERE user_name = '$login_user' ";
  $stmt = $conn->stmt_init();
  if($stmt->prepare($query))
  {
     $stmt->bind_param('ss', $comments, $login_user);
     $stmt->execute();

  }

  if($stmt){

  echo "thank you .we will be in touch soon <br />";

  }
  else{
   echo "there was an error. try again later.";
   }  

}

else
   echo"it is a big error";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:35:43.017

You can also try

```
 $query2 = "UPDATE feedback SET (feedback = ?, user_name = ?) WHERE user_name = '$login_user' ";
  $stmt = $conn->query($query2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:43:43.077

有不止一个错误/错误。

请参阅以下代码段：

## 第一的

```
$query = "INSERT into feedback (feedback_text user_name,) VALUES(?,?)"; 
```

您没有`,`（逗号）分隔字段。利用：

```
$query = "INSERT into feedback (feedback_text, user_name) VALUES(?, ?)"; 
```

## 下一个

```
 //$stmt->execute(); 
```

您没有执行此语句。利用

```
 $stmt->execute(); 
```

## 其他

```
$query2 = "UPDATE feedback SET (feedback = ?, user_name = ?) WHERE user_name = '$login_user' "; 
```

查询中的字段名称在这里和上面不同`INSERT`。也许试试

```
$query2 = "UPDATE feedback SET feedback_text = ?, user_name = ? WHERE user_name = ? ";
$stmt = $conn->stmt_init();
if($stmt->prepare($query)) {
    $stmt->bind_param('sss', $comments, $login_user, $login_user);
    $stmt->execute();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T23:56:41.260

```
 $query2 = "UPDATE feedback SET (feedback = ?, user_name = ?) WHERE user_name = '$login_user' ";
  $stmt = $conn->stmt_init();
  if($stmt->prepare($query2)) 
```

# python - 计算平方和和平方和之间的差的函数

> ID：15593428
> 
> 赞同：5
> 
> 时间：2013-03-23T23:50:12.183
> 
> 标签：python, sum

我正在尝试编写一个名为的函数，该函数`sum_square_difference`接受一个数字 n 并返回前 n 个自然数的平方和与其和的平方之间的差。

我想我知道如何编写一个定义平方和的函数

```
def sum_of_squares(numbers):
    total = 0
    for num in numbers:
        total += (num ** 2)
    return(total) 
```

我试图实现平方和函数：

```
def square_sum(numbers):  
    total = 0
    for each in range: 
        total = total + each
    return total**2 
```

我不知道如何组合函数来区分，我不知道我的函数是否正确。

请问有什么建议吗？我正在使用 Python 3.3

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T23:59:10.563

该函数可以用纯数学编写，如下所示：

![公式](../Images/2f2c9848636d810e1d4f97355630a503.png)

翻译成 Python：

```
def square_sum_difference(n):
    return int((3*n**2 + 2*n) * (1 - n**2) / 12) 
```

* * *

该公式是其他两个公式的简化：

```
def square_sum_difference(n):
    return int(n*(n+1)*(2*n+1)/6 - (n*(n+1)/2)**2) 
```

`n*(n+1)*(2*n+1)/6`[是这里](http://www.trans4mind.com/personal_development/mathematics/series/sumNaturalSquares.htm)描述的公式，它返回第一个`n`自然数的平方和。

`(n*(n+1)/2))**2`使用三角形数公式，它是第一个`n`自然数的和，然后是平方。

* * *

这也可以通过内置`sum`函数来完成。这里是：

```
def sum_square_difference(n):
    r = range(1, n+1)  # first n natural numbers
    return sum(i**2 for i in r) - sum(r)**2 
```

`range(1, n+1)`产生第一个自然数的迭代器`n`。

```
>>> list(range(1, 4+1))
[1, 2, 3, 4] 
```

`sum(i**2 for i in r)`返回 r 中数字的平方和，并`sum(r)**2`返回 r 中数字和的平方。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T00:17:21.557

`# 正如 beta 所说， `# (sum(i))^2 - (sum(i^2)) 很容易计算 :) `# A = sum(i) = i*(i+1)/2 `# B = sum(i^2) = i*(i+1)*(2*i + 1)/6 `# A^2 - B = i(i+1)(3(i^2) - i - 2) / 12 `# :) `# 没有循环...只是一个公式！**```````

 ```* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T00:04:16.137

在这种情况下，事先进行数学计算是值得的。您可以为平方和和和的平方推导出**封闭形式的解决方案。**然后代码很简单（和 O(1)）。

需要两种解决方案的帮助？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-23T23:57:26.787

```
def sum_square_difference(n):
    r = range(1,n+1)
    sum_of_squares =  sum(map(lambda x: x*x, r))
    square_sum = sum(r)**2
    return sum_of_squares - square_sum 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-29T11:49:59.267

在 Ruby 语言中，您可以通过这种方式实现此目的

```
def diff_btw_sum_of_squars_and_squar_of_sum(from=1,to=100) # use default values from 1..100\. 
((1..100).inject(:+)**2) -(1..100).map {|num| num ** 2}.inject(:+)
end

diff_btw_sum_of_squars_and_squar_of_sum #call for above method 
``````

# jquery - 为什么 disable_with 不适用于 rails form_for？

> ID：15593433
> 
> 赞同：3
> 
> 时间：2013-03-23T23:50:21.917
> 
> 标签：jquery, ruby-on-rails, forms, jquery-ui, ruby-on-rails-3.2

我的表格如下所示：

```
<%= form_for(@foobar) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>

          ~~~form stuff~~~

  <%= submit_tag "submit",  data => { disable_with: "Processing" }, :class => "btn btn-info btn-block" %>
<% end %> 
```

我正在运行rails 3.2.11。我安装了 jquery-rails gem，我所有其他的 jQuery 东西都可以工作。为什么我仍然可以在加载时多次点击“提交”按钮？如何禁用按钮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-31T03:02:33.247

在原始 html 中检查以下内容：

*   提交按钮具有 data-disable-with 属性
*   您的页面包含 jQuery js。对我来说，我有：
    *   [https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)
*   您的页面包含 jquery_ujs js。对我来说，我有：
    *   /javascripts/jquery_ujs.js

[您可以在https://github.com/rails/jquery-ujs](https://github.com/rails/jquery-ujs)上阅读更多内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-26T13:16:08.710

```
<%= button_tag 'submit', data: { disable_with: "Processing..." }, class: 'btn btn-info btn-block' %> 
```

# c# - 如何计算有人登录我的系统的次数？

> ID：15593437
> 
> 赞同：0
> 
> 时间：2013-03-23T23:50:35.637
> 
> 标签：c#

我正在构建一个基本的自动取款机，想知道如何计算某人登录的次数。我有一个按钮，当我按下它时，我希望它在旁边的文本框中显示登录次数，但我不确定我是如何会计算某人登录的次数。

任何建议都会非常感谢

我正在使用 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:56:31.373

在您用于身份验证的任何数据存储中，您还可以存储某人登录的次数。因此，您在用户表中查找用户，然后在登录成功时更新用户的行。

如果这是学习编程之类的事情，您可能没有像 sql 数据库这样的花哨的数据存储，因此您可以使用简单的数据存储。

System.Data.DataSet 可以保存到文件中，其行为类似于小型数据库。这是我在编写一次性代码并且不想设置 sql 数据库但想要比使用 System.IO 写入文本文件更多的功能时使用的。（或具有自己开销的原始 xml 文件，例如必须编写相当复杂的读取和解析逻辑）

# java - 在 Java 中验证给定上下文无关语法的字符串

> ID：15593443
> 
> 赞同：5
> 
> 时间：2013-03-23T23:52:24.930
> 
> 标签：java, parsing, computer-science, context-free-grammar, formal-languages

有人如何验证字符串是否是上下文无关语法的一部分？不仅仅是虚拟的，而是为它构建一个算法？

给定一个带有规则的上下文无关文法，例如

*   V-> v1v2
*   v1->1 | 1v1
*   v2-> 2 | 2v2

很明显，这是语言 1^n 2^n。但是，您将如何使用算法来验证它是否确实如此。我正在尝试在 java 中完成此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T00:03:57.813

您可能想研究[Earley 算法](http://en.wikipedia.org/wiki/Earley_parser)或[CYK 算法](http://en.wikipedia.org/wiki/CYK_algorithm)，这两种算法用于确定字符串是否由上下文无关文法生成。Earley 算法对于任何长度为 n 的字符串在时间 O(n ³ ) 上运行，而不管文法中的产生式规则（尽管大 O 表示法中的常数项取决于文法），而 CYK 算法要求文法首先转换为[乔姆斯基范式](http://en.wikipedia.org/wiki/Chomsky_normal_form)以保证 O(n ³ ) 运行时间。

希望这可以帮助！

# c# - 我的创建控制器没有更新数据库，带有下拉列表和外键

> ID：15593445
> 
> 赞同：0
> 
> 时间：2013-03-23T23:52:37.137
> 
> 标签：c#, asp.net-mvc, drop-down-menu, foreign-keys

我没有使用模型视图或存储库，按照我在 asp.net 上找到的教程下拉列表工作正常，但是当我点击创建时，if (ModelState.IsValid) 失败并将我返回到创建屏幕，没有错误。任何帮助将不胜感激。

看法：

```
@Html.DropDownList("parentGenre", ViewBag.genreId as SelectList) 
```

创建控制器：

```
ViewBag.genreId = new SelectList(db.Genres, "genreId", "genreName"); 
```

电影表的一部分：

```
public virtual Genres parentGenre { get; set; } 
```

流派表的一部分：

```
[Key]
public int genreId { get; set; }
[StringLength(25)]
public String genreName { get; set; }
public ICollection<Movies> movies { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:36:56.170

猜测可能是genreName 大于25 个字符，或者genreId 没有值。

如果您查看 ModelStateDictionary Errors 集合，您应该能够看到问题所在。

添加`Html.ValidationSummary()`到您的视图中，它会告诉您为什么 IsVaild 为假，

# node.js - Passport.js 中的刷新令牌

> ID：15593446
> 
> 赞同：20
> 
> 时间：2013-03-23T23:52:39.940
> 
> 标签：node.js, passport.js

如何在 Passport.js 中执行此操作？：

> 当访问令牌过期时，您可以使用 refresh_token 来“刷新”您的访问权限，并获得另一个 access_token。要使用 refresh_token，您需要向我们的令牌端点发出 POST 请求，并将 grant_type 设置为 refresh_token：

```
https://podio.com/oauth/token?grant_type=refresh_token&client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET&refresh_token=REFRESH_TOKEN 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-11-16T09:38:12.357

我问 Jared 是否会考虑在核心中添加一些东西以使其更容易处理。他回应说，这不应该在核心中处理。

所以我写了一个插件来帮助：[https ://github.com/fiznool/passport-oauth2-refresh](https://github.com/fiznool/passport-oauth2-refresh)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-26T00:05:53.417

来自作者*PassportJS的***Jared Hanson**的回答：

 *> 刷新令牌完全在后端处理，不连接到用户的会话。例如：设置一个 cron 作业，查询即将过期的令牌，发出 POST 请求以刷新它们。
> 
> Passport 不参与此过程，因为它与身份验证分开。*

# vb.net - 如何使用 LINQ 在特定节点之间获取 XML 元素

> ID：15593451
> 
> 赞同：1
> 
> 时间：2013-03-23T23:53:05.503
> 
> 标签：vb.net, linq

我正在尝试使用 LINQ (vb.net) 处理一些 XML，以返回两个特定行之间的所有行：

XML:

```
<ss:Table>
   <ss:Row ss:FirstRow="true">...</ss:Row>
   <ss:Row>1</ss:Row>
   <ss:Row>2</ss:Row>
   <ss:Row>3</ss:Row>
   <ss:Row ss:LastRow="true">...</ss:Row>
</ss:Table> 
```

我可以使用以下命令获取起始行：

```
Dim Rows = From item In dg...<Table>...<Row> Select item Where item.@ss:FirstRow = "true" 
```

但我敢打赌，有一种 LINQ 优雅的方式来获取 (1,2,3) 的行。显然我找不到它，或者我不会在这里问。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:22:49.513

我认为您是在使用 ElementsAfterSelf 和 TakeWhile 两个函数来解决问题的。抱歉，我的答案是 C#。

```
var xml = @"
<Table>
    <Row FirstRow='true'>bob</Row>
    <Row>1</Row>
    <Row>2</Row>
    <Row>3</Row>
    <Row LastRow='true'>bob</Row>
    <Row FirstRow='true'>mary</Row>
    <Row>4</Row>
    <Row>5</Row>
    <Row>6</Row>
    <Row LastRow='true'>mary</Row>
    <Row FirstRow='true'>jane</Row>
    <Row>7</Row>
    <Row>8</Row>
    <Row>9</Row>
    <Row LastRow='true'>jane</Row>
</Table>";

var doc = XDocument.Parse(xml);
var rows = (from row in doc.Root.Elements("Row")
            where row.Attribute("FirstRow") != null
            select new
            {
                Name = row.Value,
                Values = row.ElementsAfterSelf().TakeWhile(n => n.Attribute("LastRow") == null).ToList()
            }).ToList();

rows.Dump(); 
```

我使用 LinqPad 将答案放在一起，因此最后调用 Dump 方法来查看操作的输出。

# sass - PyCharm and SCSS - 有没有办法在 IDE 中将 SCSS 编译成 CSS？

> ID：15593452
> 
> 赞同：4
> 
> 时间：2013-03-23T23:53:11.400
> 
> 标签：sass, pycharm

有没有办法在 IDE 中将 SCSS 编译成 CSS？如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T00:23:57.430

此功能是在 PyCharm 2.7.2 中添加的（目前[在 EAP 中可用](http://confluence.jetbrains.net/display/PYH/JetBrains+PyCharm+Preview)）。

见`File`| `Settings`| `Plugins` **文件观察者**：

![编译 SCSS](../Images/e088026f73fb9a5dbe152723653f1cff.png)

*   [关于此功能的博客文章](http://blog.jetbrains.com/webide/2013/03/file-watchers-in-webstormphpstorm-6-a-k-a-background-tasks/)

# c - 在 C 中创建线程

> ID：15593455
> 
> 赞同：3
> 
> 时间：2013-03-23T23:53:19.860
> 
> 标签：c, pthreads, undefined-reference

我正在尝试使用 gcc -Wall -std=c99 hilo.c - ./a.out hilo.c 运行这个 C 程序，我收到以下错误消息：

```
hilo.c: In function ‘func’:
hilo.c:6:3: warning: format ‘%d’ expects argument of type ‘int’, but argument 2 has type ‘pthread_t’ [-Wformat]
hilo.c: In function ‘main’:
hilo.c:14:3: warning: passing argument 3 of ‘pthread_create’ from incompatible pointer type [enabled by default]
/usr/include/pthread.h:225:12: note: expected ‘void * (*)(void *)’ but argument is of type ‘void (*)(void)’
hilo.c:15:3: warning: passing argument 3 of ‘pthread_create’ from incompatible pointer type [enabled by default]
/usr/include/pthread.h:225:12: note: expected ‘void * (*)(void *)’ but argument is of type ‘void (*)(void)’
hilo.c:24:3: warning: statement with no effect [-Wunused-value]
/tmp/cchmI5wr.o: In function `main':
hilo.c:(.text+0x52): undefined reference to `pthread_create'
hilo.c:(.text+0x77): undefined reference to `pthread_create'
hilo.c:(.text+0x97): undefined reference to `pthread_join'
hilo.c:(.text+0xab): undefined reference to `pthread_join'
collect2: ld returned 1 exit status 
```

不知道代码有什么问题，所以如果有人可以帮助我，将不胜感激。

这是代码：

```
#include <pthread.h>
#include <stdio.h>

void func(void){

         printf("thread %d\n", pthread_self());
         pthread_exit(0);

}

   int main(void){

        pthread_t hilo1, hilo2;

        pthread_create(&hilo1,NULL, func, NULL);
        pthread_create(&hilo2,NULL, func, NULL);

        printf("the main thread continues with its execution\n");

        pthread_join(hilo1,NULL);
        pthread_join(hilo2, NULL);

        printf("the main thread finished");

        scanf;

  return(0);

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T23:59:58.347

您应该编译并链接到`-pthread`.

```
gcc -Wall -std=c99 hilo.c -pthread 
```

使用是不够的`-lpthread`。该`-pthread`标志将改变一些 libc 函数的工作方式，以使它们在多线程环境中正常工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T23:55:30.780

您尚未链接 pthread 库。编译：

```
gcc -Wall -std=c99 hilo.c -lpthread 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-12T07:11:23.260

改变

```
void func(void) 
```

至

```
void* func(void *) 
```

并编译

```
gcc hilo.c -pthread 
```

您只会在打印时出错，`pthread_self()`因为它不是`int`.

# objective-c - 逐渐用颜色填充 NSTextField

> ID：15593461
> 
> 赞同：0
> 
> 时间：2013-03-23T23:54:39.713
> 
> 标签：objective-c, macos, cocoa, masking

我试图找到一种在 NSTextField 中动态显示文本并慢慢填充颜色的有效方法。最好的方法是在彼此的顶部创建两个标签，一个是黑色的，一个是粉红色的......然后在顶层应用一个蒙版并逐渐调整它的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:36:50.230

> 最好的方法是在彼此的顶部创建两个标签，一个是黑色的，一个是粉红色的......然后在顶层应用一个蒙版并逐渐调整它的大小？

**是的**

这是相同的[运行模式](http://www.keepandshare.com/doc/6049909/nstextfield-colorfill-progress-61k?da=y)l：

这里的代码很少：

```
-(void)fillColor{
    NSRect frame=NSMakeRect(self.label.frame.origin.x, self.label.frame.origin.y, self.label.frame.size.width+1.0, self.label.frame.size.height);
    self.label.frame=frame;
    if (self.label.frame.size.width>=self.labelWithText.frame.size.width) {
        [self.timer invalidate];
        self.timer=nil;
    }
}

-(IBAction)button:(id)sender;{
    [self.label setStringValue:@"aaaaaa"];
    [self.label setDrawsBackground:YES];
    [self.label setBackgroundColor:[NSColor redColor]];
    self.timer=[NSTimer scheduledTimerWithTimeInterval:.1f target:self selector:@selector(fillColor) userInfo:nil repeats:YES];
} 
```

# solr - 太阳黑子/Solr：单词连接

> ID：15593469
> 
> 赞同：0
> 
> 时间：2013-03-23T23:55:36.603
> 
> 标签：solr, full-text-search, sunspot

我将 Solr 与 Sunspot Ruby gem 一起使用。它工作得很好，但我注意到有时用户会得到很差的搜索结果，因为他们在文档文本是“万无一失”的地方连接了他们的搜索词（例如“万无一失”）。或相反亦然。

我打算通过手动将源文档中的单词连接在一起来创建一组备用匹配字段来尝试解决这个问题。这似乎有点骇人听闻，并且实现另一面（将用户串联分解成单词）并不明显。

有没有办法在 Solr/Sunspot 中正确执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:38:54.033

你看过 SOLR 拼写检查（或拼写检查）组件吗？ [http://wiki.apache.org/solr/SpellCheckComponent](http://wiki.apache.org/solr/SpellCheckComponent) 例如，有一个 WordBreakSolrSpellChecker，在这种情况下可以提供有效的建议。

# javascript - 根据 Javascript 中选定的选项值显示/隐藏 div

> ID：15593472
> 
> 赞同：-1
> 
> 时间：2013-03-23T23:56:11.200
> 
> 标签：javascript, jquery

我想知道为什么它不起作用。

这是我的 JS：

```
$("#cat-code").change(function(){
  var value = $("#cat-code option:selected").val();
  if (value == "10400000"){
    $("#div1").show();
    $("#div2").hide();
  }
}); 
```

选择标签：

```
<select class="cat-code" id="cat-code" name="project_procurement_management_plan[items_attributes][0][category_id]">
  <option value="1">10400000</option>
  <option value="2">10401000</option>
</select> 
```

要显示或隐藏的 div：

```
<div class="div1">hi</div>
<div class="div2">hello</div> 
```

任何解决方法将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T23:58:40.537

看起来您的 JS 是对具有 ID 的 DOM 对象的引用，但您的 HTML 有类。

试试这个 JS：

```
$(".div1").show();
$(".div2").hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T23:58:53.453

您已将值专门设置为 1 和 2，所以它们可能就是这样：

```
$("#cat-code").change(function(){
  var value = this.value;
  if (value == "1"){
    $(".div1").show();
    $(".div2").hide();
  }
}); 
```

[**小提琴**](http://jsfiddle.net/9uQmU/3/)

如果选项没有值，选项文本将仅用作选择值，并且要获取选定的值，您只需要`this.value`在选择的处理程序中。

# linux - 在 Bash 中正确引用：将存储在 i 中的数字附加到

> ID：15593477
> 
> 赞同：1
> 
> 时间：2013-03-23T23:56:38.097
> 
> 标签：linux, bash

我想写一个简短的 shell 脚本，从 pdf 中删除指定的页面。也许我这样做的方式有点复杂，但这就是我迄今为止想出的：

```
#!/bin/bash
#This is a script to remove a specified page from a specified pdf.
set verbose

s="A1-$(($2-1))"

if [ n -ge 3 ]; then
      for i in 2..$#
      do      
            s+=A$(($($i)+1))-$(($($(($i+1)))-1))
      done 
fi
pdftk A="$1" cat $s A$(($($#)+1))-end output output.pdf 
```

我知道这是相当复杂的代码，如果你知道 pdftk 的工作原理，我会很感激能让它更容易的提示，但现在我只需要知道如何将变量替换为变量名。例如，如果

```
i=2
a2=3
echo $a($i) 
```

给了我`3`，那会很棒，但事实并非如此。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T01:40:04.620

`bash`允许间接参数扩展：

```
$ i=2
$ a2=3
$ var="a$i"  # a2
$ echo "${!var}"
3 
```

但是，您似乎真正想要的是一个数组：

```
$ a=([2]=3)    # Or simply a[2]=3
$ i=2
$ echo "${a[i]}"
3 
```

（这确实是一个权宜之计的答案，因为几乎可以肯定您的问题有一个更简单的答案，不涉及这种类型的间接参数操作。）

* * *

我认为这个更简单的脚本可以满足您的需求：

```
#!/bin/bash

inputfile=$1
shift

ranges=() from=1
for pageToOmit in "$@"; do
    ranges+=( "A$from-$(( pageToOmit - 1))" )
    from=$(( pageToOmit + 1 ))
done
ranges+=( "$from-end" )

pdftk A="$inputfile" cat "${ranges[@]}" output output.pdf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:11:51.397

使用评估：

```
i=2
a2=3
eval echo \$a$i
eval b=\$a$i
echo $b 
```

# java - Java 双链表

> ID：15593478
> 
> 赞同：2
> 
> 时间：2013-03-23T23:56:41.133
> 
> 标签：java

好的，我的教授（数据结构课）分配了这个：你的任务是编写一个程序，可以更新双向链接列表中的字符访问频率。程序应一次从包含许多字符的文本文件中读取一个字符。为方便起见，不要计算空格。每次访问一个字符时，在列表的节点中将其访问频率增加一。如果当前节点的频率高于其前一个节点的频率，则需要在列表中交换两个节点。对所有先前的节点继续这样做，直到没有更多的先前节点具有较低的访问频率。最终，出现频率最高的字符会出现在列表的开头，次高的出现在下一个节点中，以此类推。你的程序还需要按照列表的顺序打印出列表中的字符。

这是我到目前为止制作的程序。到目前为止，它只是一个双向链表。我的主要问题是我应该如何处理“每次访问一个字符时，在列表节点中将其访问频率增加一。如果当前节点的频率高于其前一个节点的频率，则两个节点需要要在列表中交换。”？

我知道没有任何行从文件中获取信息。我稍后再补充。任何帮助表示赞赏！

```
public class DoublyLinkedList {
private class Node {
    String value;
    Node next,prev;

    public Node(String val, Node n, Node p) {
        value = val;
        next = n;
        prev=p;
    }

    Node(String val) {
        this(val, null, null);
    }
}
private Node first;
private Node last;

public DoublyLinkedList() {
    first = null;
    last = null;
}
public boolean isEmpty(){
    return first==null;
}
public int size(){
    int count=0;
    Node p=first;
    while(p!=null){
        count++;
        p=p.next;
    }
    return count;
}
public void add(String e) {

    if(isEmpty()){
        last=new Node(e);
        first=last;
    }
    else{
        last.next=new Node(e, null, last);
        last=last.next;
    }
}
public void add(int index, String e){
    if(index<0||index>size()){
        String message=String.valueOf(index);
        throw new IndexOutOfBoundsException(message);
    }
    if(index==0){
        Node p=first;
        first=new Node(e,p,null);
        if(p!=null)
            p.prev=first;
        if(last==null)
            last=first;
        return;
    }
    Node pred=first;
    for(int k=1; k<=index-1;k++){
        pred=pred.next;
    }
    Node succ=pred.next;
    Node middle=new Node(e,succ,pred);
    pred.next=middle;
    if(succ==null)
        last=middle;
    else
        succ.prev=middle;
}
public String toString(){
    StringBuilder strBuilder=new StringBuilder();
    Node p=first;
    while(p!=null){
        strBuilder.append(p.value+"\n");
        p=p.next;
    }
    return strBuilder.toString();
}
public String remove(int index){
    if(index<0||index>=size()){
        String message=String.valueOf(index);
        throw new IndexOutOfBoundsException(message);
    }
    Node target=first;
    for(int k=1; k<=index;k++){
        target=target.next;
    }
    String element=target.value;
    Node pred=target.prev;
    Node succ=target.next;
    if(pred==null)
        first=succ;
    else
        pred.next=succ;
    if(succ==null)
        last=pred;
    else
        succ.prev=pred;
    return element;
}
public boolean remove(String element){
    if(isEmpty())
        return false;
    Node target=first;
    while(target!=null&&!element.equals(target.value))
        target=target.next;
    if(target==null)
        return false;
    Node pred=target.prev;
    Node succ=target.next;
    if(pred==null)
        first=succ;
    else
        pred.next=succ;
    if(succ==null)
        last=pred;
    else
        succ.prev=pred;
    return true;
}
public static void main(String[] args){
    DoublyLinkedList list1=new DoublyLinkedList();
    String[] array={"a","c","e","f"};
    for(int i=0; i<array.length; i++){
        list1.add(array[i]);
    }
    list1.add(1,"b");
    list1.add(3,"d");
    System.out.println(list1);

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T00:06:25.650

由于这是一个家庭作业，我只会给出提示：

*   您的`Node`班级需要一个额外的字段作为计数器。

*   您需要遍历列表以查找访问的字符并增加其计数器值。

*   您需要一个临时`Node`对象来交换节点。先自己试试，然后google一下。这是每个程序员都必须知道的基本过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:18:02.037

建议：

*“我知道没有任何线路从文件中获取信息。”*. 您最好现在编写该代码，以便您可以测试您已经编写的内容。

另一个问题是您到目前为止所写的是一个通用链表，而忽略了说明如何使用该列表的要求。结果，您有：

*   实现了一堆看似不必要的方法，并且
*   未根据要求正确实现 Node 类。

回去看看需求，找出你真正需要的方法，然后实现它们。（到目前为止，您所做的是“自下而上”的设计，很大程度上忽略了顶层的需求。如果采用“自上而下”的方法，您会更好。）

您被要求解决的问题是整理字符，而不是创建“通用”链表数据结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T00:18:38.043

我建议将程序分解为组成部分。正如塞巴斯蒂安上面所说，您知道您需要保留和更新计数。您还知道您需要能够将节点的计数与排名中高于它的节点的计数进行比较。您知道您需要能够交换两个节点。你应该有这些事情的方法。仔细考虑每种分解方法中需要发生的事情。

对于这类问题，我总是推荐一种物理方法来感受它们：尝试使用一组笔记卡或便利贴来做这件事。在每一个上，写一个对象名称和 Node 对象的字段。用铅笔写出字段值。在一张纸上记下其他字段（例如对第一个元素的引用）。然后逐步检查你的算法，看看每次更新需要改变什么。（注意：因为这是一个双向链表，所以您的更改应该在洗牌后仍然存在。试试看）

祝任务顺利！

# azure - 看不到任何项目

> ID：15593482
> 
> 赞同：0
> 
> 时间：2013-03-23T23:56:53.827
> 
> 标签：azure, azure-devops

我正在尝试使用`Set up deployment from source control`允许从我的 TFS 项目发布到 Azure，但由于某种原因，在我授权后，它说我没有项目。帐户是正确的，我只是想知道，是否有某种标准可以允许集成或其他什么？

我得到了这个窗口

![在此处输入图像描述](../Images/72cb4e78139a46f4ee2845840385b80f.png)

然而，我的 TFS 帐户上有两个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T20:04:55.703

最终关闭了我的 azure 帐户并退出了团队基础服务，从而解决了问题。

# javascript - JSONP 警报解析器错误

> ID：15593488
> 
> 赞同：1
> 
> 时间：2013-03-23T23:57:31.580
> 
> 标签：javascript, jquery, json

```
$.ajax({
    type:           "GET",
    dataType:       "jsonp",
    jsonpCallback:  "jsoncallback",
    //async: false ,
    data: 
    {
        // some data here

    },
    url: "http://mydomain.com/checkRequest.php",
    success: function(data){

    alert("123");

            alert(data.data.NameA);

    },
    error: function(jqXHR, textStatus){
    alert("Request failed: " + textStatus);
    }
});// end of ajax 
```

我可以从下面的 URL 中获取以下字符串，

```
([{
        "data": {
            "Rate": "",
            "RoleA": "Student",
            "NameA": "studentD",
            "RoleB": "Tutor",
            "NameB": "tutorB",
            "Give": "0",
            "Get": "1",
            "Accept": "0",
            "RateCounter": ""
        }
    }
]); 
```

`http://mydomain.com/checkRequest.php?callback=jsoncallback&nameB=tutorB&roleB=Tutor&get=1&roleA=Student&nameA=studentD&give=0&_=1364082750444`

但是，它会发出警报`parsererror`。请问哪里出了问题？

如果我删除 `jsonpCallback: "jsoncallback",` 并更改`URL`为 url：`"http://mydomain.com/checkRequest.php?jsoncallback=?",`没有解析器错误，但它不能`alert(data.data.NameA);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:06:28.700

您可能想要该`jsonp`选项而不是`jsonpCallback`：

```
$.ajax({
    type:           "GET",
    dataType:       "jsonp",
    jsonp:          "jsoncallback",
    // ...
}); 
```

`jsonp`设置参数的***名称***，并与您的其他示例匹配：

```
url: "http://mydomain.com/checkRequest.php?jsoncallback=?", 
```

使用`jsonpCallback`，您将改为设置***value***，从而生成一个包含`callback=jsoncallback`. 服务器似乎没有预料到这一点，并最终在没有函数名称的情况下响应：

```
([{...}]); 
```

与类似的东西：

```
jQuery191_etc([{...}]); 
```

* * *

从[文档](http://api.jquery.com/jQuery.ajax/)：

> **jsonp**
> 
> 覆盖 jsonp 请求中的回调函数名称。在“callback=?”中将使用该值代替“callback” url 中查询字符串的一部分。所以`{jsonp:'onJSONPLoad'}`会导致 `'onJSONPLoad=?'`传递给服务器。[...]

> **jsonp回调**
> 
> 指定 JSONP 请求的回调函数名称。将使用此值代替 jQuery 自动生成的随机名称。[...]

# vb.net - VB.NET 中的除法只显示整数

> ID：15593489
> 
> 赞同：1
> 
> 时间：2013-03-23T23:57:38.050
> 
> 标签：vb.net, calculator, division

我正在制作一个简单的计算器代码，当我进行除法时，我希望它不仅显示整数，还显示十进制数。这是我的部门代码：

```
 get1.Text = Int(mygive.Text \ rate.Text) 
```

我也试过：

```
get1.Text = Int(mygive.Text / rate.Text) 
```

我希望它显示这样的数字：2060.0891

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:01:21.023

您需要`Double`在进行除法之前将数字转换为。 `CDbl`是一个合适的[类型转换函数](http://msdn.microsoft.com/en-us/library/s2dy91zy.aspx)：

```
Dim answer = CDbl(mygive.Text) / CDbl(rate.Text)
get1.Text = answer.ToString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T23:59:44.530

您`Int`正在将所有内容转换为整数。尝试转换为双倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T00:00:06.693

它只显示数字的整个部分，因为您声明了一个`Integer`，这是不够的，因为它*只能*存储整数。

您需要使用`Double`数据类型。

此外，您正在尝试对 应用算术运算`Strings`，这是无效的。您需要先将这些字符串转换为类型`Double`，然后才能`/`对它们进行操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T00:05:08.490

使用转换为双/十进制

带有VB帮助功能：

```
get1.Text = CDec(mygive.Text / rate.Text).ToString() 
```

具有 .NET 功能

```
get1.Text = Convert.ToDecimal(mygive.Text / rate.Text).ToString() 
```

# loops - 如何多次循环浏览一组 10 张图像？

> ID：15593496
> 
> 赞同：-1
> 
> 时间：2013-03-23T23:59:24.117
> 
> 标签：loops, cocos2d-iphone

我在 cocos2d 中有一个代码块，它通过循环浏览一组 10 张图像来创建背景，如下所示：

```
- (void)addBackground{
    CGSize winSize = [CCDirector sharedDirector].winSize;

    //Add images to batchNode
    float maxReach = 0;
    for (int imageNumber=1; imageNumber < 13; imageNumber++) {
        CCLOG(@"Adding image intro%d.png to the introAnimation.",imageNumber);
        if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
            CCSprite *background = [CCSprite spriteWithFile:[NSString stringWithFormat:@"national_scenery_part%d-iPad.png",imageNumber]];
            background.position = ccp((winSize.width/2)+maxReach, winSize.height/2);
            [self addChild:background z:0];
            maxReach = maxReach + background.contentSize.width;
        } else {
            CCSprite *background = [CCSprite spriteWithFile:[NSString stringWithFormat:@"national_scenery_part%d.png",imageNumber]];
            background.position = ccp((winSize.width/2)+maxReach, winSize.height/2);
            [self addChild:background z:0];
            maxReach = maxReach + background.contentSize.width;
        }
    }
} 
```

但当然它只循环一次。我希望它循环 3 次。我正在考虑将一个整数设置为 0 并在每个循环的末尾添加 1，然后再次运行它直到它达到 3。这听起来像是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:25:18.757

您可以使用嵌套的 FOR/WHILE 循环重复 3 次。

它应该运作良好。我看不出使用这个有什么问题。

# git - 如何从 github 拉取并保留本地文件而不解决合并冲突

> ID：15593497
> 
> 赞同：3
> 
> 时间：2013-03-23T23:59:36.280
> 
> 标签：git, github, merge

我想从 github master full 中提取来更新我当前的工作目录。我处理过一个名为 form.html 的文件，它存在于我的工作目录中，而旧版本位于 github 原始主分支上。

```
 git pull origin master 
```

当我从主人那里拉出来时，我要求解决冲突。我不想解决合并冲突，而是希望我的本地分支中的文件 form.html**完全**替换原始主分支（远程）上的 form.html

实现这一目标的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T00:05:36.133

如果你还没有提交你的本地文件，你可以（遵循“ [git pull 保持本地更改](https://stackoverflow.com/questions/10414769/git-pull-keeping-local-changes)”的想法）：

```
git stash
git pull
git stash pop
# if conflict on pop:
git checkout --theirs -- form.html 
```

但是，如果您的文件已提交，请参阅“ [Is it possible to exclude specific commits when doing a git merge?](https://stackoverflow.com/a/3970442/6309) ”，并使用 .gitattributes 声明正确的合并：

```
form.html merge=ours 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:18:32.877

假设您已经提交了 form.html 文件...

执行 'git pull origin master' 并发生冲突后，您可以根据本地版本轻松解决冲突。拉取后执行以下操作：

```
git checkout --ours -- <files in conflict>
git add <files in conflict>
git commit -m 'resolved with --ours'
git push origin master 
```

# xml - 需要从多个表中获取创建的数据到 1 个表中

> ID：15593498
> 
> 赞同：0
> 
> 时间：2013-03-23T23:59:37.797
> 
> 标签：xml, split, insert, create-table, insert-update

我对 SQL 比较陌生，可以使用一些帮助。我将帮助我接近目标但没有实现目标的代码片段混合在一起。我的原始数据的要点如下所示：

*   产品 - 数量_运费
*   P65238 - - - - - 4
*   P65236 - - - - - 2
*   P65240 - - - - - 3

我想要结束的基本内容如下所示：

*   产品 - UCC 代码
*   P65238 - - 001475010
*   P65238 - - 001475011
*   P65238 - - 001475012
*   P65238 - - 001475013
*   P65236 - - 001475014
*   P65236 - - 001475015
*   P65240 - - 001475016
*   P65240 - - 001475017
*   P65240 - - 001475018

必须为每批产品分配一个唯一的 UCC 代码（开始于：001475010）到每批货物。下面的代码将根据订购的产品总量创建许多唯一的 UCC。

```
CREATE TABLE #TEMP(UCCs INT) 

DECLARE @UCC INT
    ,@textXML XML
    ,@data NVARCHAR(MAX) 
    ,@delimiter NVARCHAR(5)
    ,@ConCatString NVARCHAR(MAX)
    ,@LoopCounter INT
SET @ConCatString = ''
SET @UCC = 001475009 + 1
SET @LoopCounter = (
SELECT CAST(Q.DSPTOTQTY_0 AS INT)
FROM x3v6prem.PILOTNEW.SDELIVERY Q
WHERE Q.SOHNUM_0 = 'SO1300259')
IF @LoopCounter = 1 GOTO Skip_Loop
Continue_Loop:
SET @ConCatString = @ConCatString + CAST(@UCC AS NVARCHAR(MAX)) + ','
SET @UCC = @UCC + 1
SET @LoopCounter = @LoopCounter -1
IF @LoopCounter > 1 GOTO Continue_Loop
Skip_Loop:
SET @ConCatString = @ConCatString + CAST(@UCC AS NVARCHAR(MAX)) 

SELECT @data = @ConCatString,
    @delimiter = ','
SELECT    @textXML = CAST('<d>' + REPLACE(@data, @delimiter, '</d><d>') + '</d>' AS XML)
INSERT INTO #TEMP
SELECT  T.split.value('.', 'nvarchar(max)') AS data
FROM    @textXML.nodes('/d') T(split)

SELECT * FROM #TEMP
DROP TABLE #TEMP 
```

接下来是代码，它将根据要运送的产品数量多次复制产品 ID。最后，这些数据将用于创建一个运输标签，该标签将放置在订购的每盒产品上，并为每个盒子显示一个唯一的（条形码）编号。

```
CREATE TABLE #TEMP2(Products NVARCHAR(MAX)) 

DECLARE @Item2 NVARCHAR(MAX)
    ,@textXML2 XML
    ,@data2 NVARCHAR(MAX) 
    ,@delimiter2 NVARCHAR(5)
    ,@ConCatString2 NVARCHAR(MAX)
    ,@LoopCounter2 INT
    ,@LastLine2 INT
DECLARE CC CURSOR LOCAL FAST_FORWARD FOR
SELECT T.ITMREF_0
FROM x3v6prem.PILOTNEW.SDELIVERYD T
WHERE T.SOHNUM_0 = 'SO1300259'
ORDER BY T.SDDLIN_0
OPEN CC
SET @ConCatString2 = ''
SET @LastLine2 = (
SELECT CAST(L.DSPTOTQTY_0 AS INT)
FROM x3v6prem.PILOTNEW.SDELIVERY L
WHERE L.SOHNUM_0 = 'SO1300259')
GetNextItem2:
FETCH NEXT FROM CC INTO @Item2
IF @@FETCH_STATUS <> 0 GOTO EndBothLoops2
SET @LoopCounter2 = (
SELECT CAST(Q.QTY_0 AS INT)
FROM x3v6prem.PILOTNEW.SDELIVERYD Q
WHERE Q.SOHNUM_0 = 'SO1300259' AND Q.ITMREF_0 = @Item2)
Continue_Loop2:
IF @LoopCounter2 = 0 AND @LastLine2 > 1 GOTO GetNextItem2
SET @ConCatString2 = @ConCatString2 + CAST(@Item2 AS  NVARCHAR(MAX)) + ','
SET @LoopCounter2 = @LoopCounter2 - 1
SET @LastLine2 = @LastLine2 - 1
IF @LoopCounter2 > 0 AND @LastLine2 > 1 GOTO Continue_Loop2
IF @LoopCounter2 = 0 AND @LastLine2 > 1 GOTO GetNextItem2
SET @ConCatString2 = @ConCatString2 + CAST(@Item2 AS NVARCHAR(MAX))
EndBothLoops2:
CLOSE CC
DEALLOCATE CC
SELECT @data2 = @ConCatString2
   ,@delimiter2 = ','
SELECT    @textXML2 = CAST('<d>' + REPLACE(@data2, @delimiter2, '</d><d>') + '</d>' AS XML)

INSERT INTO #TEMP2
SELECT  T.split.value('.', 'nvarchar(max)') AS data
FROM    @textXML2.nodes('/d') T(split)

SELECT * FROM #TEMP2
DROP TABLE #TEMP2 
```

如果我能简单地弄清楚如何将我放入两个单独的表中的输出放到一个表中，我的问题就会得到解决，我可以（我相信）管理其余的。我对正在使用的 XML 代码没有真正的经验，因此我无法辨别如何将多列插入到正在创建的表中。
其他较小的问题：我似乎无法以保留前导零的方式格式化 UCC 值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:46:14.507

看起来好像我能够解决我自己的问题。我终于能够向使用 IDENTITY 关键字创建的表添加第二个字段。在这一点上，我仍然不确定为什么我能够添加这个字段而不是其他字段，但我会接受它！我编写的代码仍然可能非常低效，所以如果有人想帮助我使代码运行得更好，我将不胜感激！谢谢！！

# mongodb - 如何在 Windows 上使用流星中的数据表？

> ID：15593503
> 
> 赞同：0
> 
> 时间：2013-03-24T00:00:03.373
> 
> 标签：mongodb, datatables, meteor

如何在 Windows 上使用流星中的数据表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:15:18.887

我猜你的意思是你想用 Tim Heckel 的数据表包来做陨石？

Windows 不支持 Meteorite，但这并不意味着您不能使用这些软件包！

1) 下载或 git clone 他的 repo：[https ://github.com/TimHeckel/meteor-datatables](https://github.com/TimHeckel/meteor-datatables)

2）将文件复制`/lib`到项目目录的`/client/lib`文件夹中。

然后就可以正常使用了

# c# - 图像到内存慢

> ID：15593510
> 
> 赞同：3
> 
> 时间：2013-03-24T00:00:39.113
> 
> 标签：c#, wpf, image

我主要想建议..

我的程序在屏幕上显示多个大图像。每个图像在 1-4 mbs 之间。150 DPI，6000x4000 分辨率，24 位深度。

我有许多其他设置可以给我较小的图像..但我需要高质量的图像..

好的，所以它很慢......但不是那么慢......唯一真正糟糕的部分是当我从一张图像切换到另一张图像时......

所以，我基本上每个图像都有 2 个图像.. 1 个拇指和 1 个 HQ.. 当用户放大图像时，我加载 HQ，当用户缩小时，它切换到拇指图像..

就在那个切换点，用户必须等待大约 4-8 秒才能将 HQ 图像加载到内存中并绘制到屏幕上。

下面是我在加载 HQ 图像时使用的代码

```
using (DrawingContext dc = ActiveImage.imageDV.RenderOpen())
                {
    FileStream fs = new FileStream(ActiveImage.imagePath, FileMode.Open, FileAccess.Read, FileShare.Read);

    MemoryStream ms = new MemoryStream();
    fs.CopyTo(ms);
    ms.Seek(0, SeekOrigin.Begin);
    fs.Close();

    BitmapImage bitmap = new BitmapImage();
    bitmap.BeginInit();
    bitmap.CacheOption = BitmapCacheOption.OnLoad;
    bitmap.CreateOptions = BitmapCreateOptions.DelayCreation;
    bitmap.StreamSource = ms;
    bitmap.EndInit();
    //bitmap.Freeze();

    dc.DrawImage(bitmap, new Rect(ActiveImage.position, ActiveImage.size));
} 
```

下面是我在加载 Thumb 图像时使用的代码

```
using (DrawingContext dc = ActiveImage.imageDV.RenderOpen())
{
    FileStream fs = new FileStream(ActiveImage.thumbPath, FileMode.Open, FileAccess.Read, FileShare.Read);

    MemoryStream ms = new MemoryStream();
    fs.CopyTo(ms);
    ms.Seek(0, SeekOrigin.Begin);
    fs.Close();

    BitmapImage bitmap = new BitmapImage();
    RenderOptions.SetBitmapScalingMode(bitmap, BitmapScalingMode.NearestNeighbor);
    bitmap.BeginInit();
    bitmap.CacheOption = BitmapCacheOption.OnLoad;
    bitmap.CreateOptions = BitmapCreateOptions.DelayCreation;
    bitmap.StreamSource = ms;
    bitmap.EndInit();
    //bitmap.Freeze();

    dc.DrawImage(bitmap, new Rect(ActiveImage.position, ActiveImage.size));
} 
```

有什么办法可以优化这个？有没有更好的办法？请记住，仅当用户查看单个图像时，我才需要 HQ 清晰的图像。

我想 MemoryStream 可能会出来，但我补充说这是一种测试..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:31:38.217

只是一个猜测，但将所有潜在的优化留给 WPF 并通过其 URI 加载图像可能不是“最佳”解决方案：

```
using (DrawingContext dc = ActiveImage.imageDV.RenderOpen())
{
    var bitmap = new BitmapImage(new Uri(ActiveImage.imagePath));
    // alternatively, if it is a relative path
    // var bitmap = new BitmapImage(new Uri(ActiveImage.imagePath, UriKind.Relative));

    dc.DrawImage(bitmap, new Rect(ActiveImage.position, ActiveImage.size));
} 
```

# javascript - 如何设置数组项的键？

> ID：15593515
> 
> 赞同：0
> 
> 时间：2013-03-24T00:01:28.523
> 
> 标签：javascript

我想使用 jquery 帖子：

```
var CONST_KEY = 'key';
var CONST_VALUE = 'value';

$.post('/', {CONST_KEY: "'" + CONST_VALUE + "'" }, function(){
//.....
}); 
```

但在这种情况下，服务器得到：

> CONST_KEY = 值

为什么 CONST_KEY 作为变量名而不是“值”发送？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T00:03:07.587

不幸的是，你不能那样做。尝试这个...

```
var obj = {};

obj[CONST_KEY] = "'" + CONST_VALUE + "'"; 
```

JavaScript 将不带引号的键名视为字符串，并且不会将它们解析为变量查找。但是，如果它们看起来像一个无效的字符串名称，它们可以被解析，例如`0x100`解析为`256`.

最近，您还可以使用 JavaScript 中的保留字作为裸键，例如`delete`and `class`。

# pyramid - Pyramid 的事务管理器返回后如何运行脚本

> ID：15593516
> 
> 赞同：2
> 
> 时间：2013-03-24T00:01:30.127
> 
> 标签：pyramid

事务管理器返回后如何运行 myscript.py。此外，如果脚本没有阻塞，我会更喜欢。

在我看来，我正在从 POST 接收文件。由于我使用`repoze.filesafe`'s创建文件`create_file()`，因此它将文件保存在临时位置，直到事务管理器返回。该文件仅在事务管理器无错误返回后以正确路径存在于硬盘上。

因此，我需要在事务管理器返回后运行我的脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:22:22.537

[`transaction`您可以通过package](http://zodb.readthedocs.org/en/latest/transactions.html#after-commit-hooks)注册一个要在提交后运行的钩子。在您的视图中注册一个：

```
import transaction

def your_after_commit(success, arg1, arg2, kwarg1=None, kwarg2=None):
    if success:
        print "Transaction commit succeeded"
    else:
        print "Transaction commit failed"

def someview(request):
    current_transaction = transaction.get()
    current_transaction.addAfterCommitHook(your_after_commit, args=(1, 2), kws={kwarg1='foo', kwargs2='bar'}) 
```

这仍然会在当前请求的上下文中运行您的脚本（例如，在您的脚本返回之前，请求不会完成）。如果您需要完整的异步设置，则需要使用适当的异步解决方案，例如[Celery](http://www.celeryproject.org/)。您不会将其与事务挂钩一起使用；只需注册一个要使用 Celery 运行的任务即可。

# cuda - CUDA 内核随机失败，但仅当我使用某些超越函数时

> ID：15593518
> 
> 赞同：5
> 
> 时间：2013-03-24T00:01:42.317
> 
> 标签：cuda

我一直在研究一个 CUDA 程序，该程序随机崩溃`unspecified launch failure`，相当频繁。通过仔细调试，我定位了哪个内核出现故障，而且只有在 CUDA 内核中调用某些超越函数时才会发生故障（例如`sinf()`或`atanhf()`）。

这导致我编写了一个更简单的程序（见下文），以确认这些超越函数确实导致了问题，看起来确实如此。当我编译并运行下面的代码时，它只是反复调用使用 tanh 和 atanh 的内核，反复地，有时程序可以工作，有时它会打印`Error with Kernel`出来自驱动程序的一条消息：

> NVRM: XiD (0000:01:00): 13, 0002 000000 000050c0 00000368 00000000 0000080

关于频率，它可能在我运行可执行文件的 50% 的时间里崩溃。

从我在网上阅读的内容来看，这听起来`XiD 13`类似于基于主机的段错误。但是，考虑到数组索引，我看不出这是怎么回事。此外，如果我用其他函数（例如重复的浮点减法和加法）替换内核中的超越函数，程序不会崩溃。也就是说，我没有收到 XiD 错误消息，程序最终返回了 atanh(0.7) 的正确值。

我在 Ubuntu 11.10 x64 桌面上运行 cuda-5.0。驱动程序版本是 304.54，我使用的是 GeForce 9800 GTX。

我倾向于说这是硬件问题或驱动程序错误。奇怪的是，来自 nvidia 的示例应用程序运行良好，可能是因为它们没有使用受影响的先验函数。

最后一点可能很重要的信息是，如果我在 cuda-memcheck 下运行我的主项目或这个测试程序，它不会报告任何错误，也不会崩溃。老实说，我只是在 cuda-memcheck 下运行我的项目，但是性能下降使它变得不切实际。

在此先感谢您的任何帮助/见解。如果有人拥有 9800 GTX 并且愿意运行此代码以查看它是否有效，将不胜感激。

```
#include <iostream>
#include <stdlib.h>

using namespace std;

__global__ void test_trans (float *a, int length) {
  if ((threadIdx.x + blockDim.x*blockIdx.x) < length) {
    float temp=0.7;
    for (int i=0;i<100;i++) {
      temp=atanh(temp);
      temp=tanh(temp);
    }
    a[threadIdx.x+ blockDim.x*blockIdx.x] = atanh(temp);
  }
}

int main () {
  float *array_dev;
  float *array_host;
  unsigned int size=10000000;
  if (cudaSuccess != cudaMalloc ((void**)&array_dev, size*sizeof(float)) ) {
    cerr << "Error with memory Allocation\n"; exit (-1);}
  array_host = new float [size];

  for (int i=0;i<10;i++) {
    test_trans <<< size/512+1, 512 >>> (array_dev, size);
    if (cudaSuccess != cudaDeviceSynchronize()) {
       cerr << "Error with kernel\n"; exit (-1);}
  }
  cudaMemcpy (array_host, array_dev, sizeof(float)*size, cudaMemcpyDeviceToHost);

  cout << array_host[size-1] << "\n";  
} 
```

编辑：我放弃了这个项目几个月，但昨天更新到驱动程序版本 319.23 后，我不再遇到这个问题。我认为我描述的问题一定是一个已修复的错误。希望这可以帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T12:23:15.890

提问者确定这是由较新的 CUDA 版本修复的临时问题。请参阅对原始问题的编辑。

# android - Android EditText 长按行为

> ID：15593524
> 
> 赞同：2
> 
> 时间：2013-03-24T00:03:35.667
> 
> 标签：android, textview, android-edittext, android-4.2-jelly-bean, long-press

我在使用 Android 中的 EditText 时遇到了一些问题。通常，当用户长按 EditText 或双击它时，光标所在的单词会突出显示，并且 EditText 的上下文操作栏 (CAB) 会弹出（在 Android 3.0 及更高版本上）。

我的 EditText 直到最近才这样做：问题是现在长按 EditText 会导致所选单词被“拾取”，即拾取该单词的放大“幽灵”图像，您可以拖放它插入文本中的任何其他位置。我根本没有触及 EditText 的代码。任何运行谷歌浏览器（桌面版）的人都可以看到我的意思是如果他们突出显示任何文本并用光标拖动它的行为类型。

我认为这个问题可能是由于我的设备最近升级到 Android 4.2.2 造成的。我在谷歌上到处寻找信息，但一无所获。此外，双击这个词也不会像预期的那样调出 CAB——它会闪烁一秒钟然后消失——但我认为这不是一个相关的问题。

我真的需要停止这种行为，因为我的应用程序在没有 CAB 的情况下无法运行。所以问题是：我怎样才能恢复“正常”行为？在运行 Android 4.2.2 的 Nexus 4 上可以看到所有行为。非常感谢所有帮助；非常感谢！

EditText 的 XML 布局代码：

```
<EditText
      android:id="@+id/editor_mainText"
      android:layout_width="40dp"
      android:layout_height="40dp"
      android:layout_above="@+id/options_bottom"
      android:layout_alignParentLeft="true"
      android:layout_alignParentRight="true"
      android:layout_below="@+id/options_top"
      android:background="#FFE7E7E7"
      android:imeOptions="flagNoExtractUi"
      android:inputType="textMultiLine|textNoSuggestions|textVisiblePassword"
      android:padding="8dp"
      android:scrollbars="none"
      android:textCursorDrawable="@null"
      android:textSize="17sp"
      android:typeface="monospace" >

            <requestFocus />
     </EditText> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:33:10.437

**注意：我的原始答案有点错误。我没有在代码中发现我粗心的错误，但是现在我发现了，这就是它不起作用的原因**

我已经解决了，但我绝对无法解释为什么首先会发生这种行为，以及为什么执行以下操作会产生任何影响。但无论如何，它做到了。

EditText 已被扩展，以便使用 Scroller 和 VelocityTracker 使其“可翻转”。这涉及覆盖 onTouchEvent(MotionEvent)。但是代码中有一个小错误，其中 super.onTouchEvent(MotionEvent) 将被调用两次，因为我不小心漏掉了一个中断；switch-case 中的语句，除了在 MotionEvent.ACTION_MOVE 事件期间。该应用程序在一直到 Android 4.2.1 的情况下都可以正常工作。Android 4.2.2 升级后的代码我没有碰过，但不知什么原因，在新版本的 Android 中，这个小错误触发了这种奇怪的行为。

所以基本上，这是一个非常基本的错误，现在我学到了：始终确保使用 break 语句关闭 switch-case 中的 case！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-18T15:41:04.473

我面临几乎完全相同的行为。我找不到关于 stackoverflow 的任何相关问题，所以将我的答案放在这里。也许它会对某人有用。因此，如果您遇到问题，在关闭复制/粘贴弹出窗口（通过单击屏幕上的任意位置）后，您将无法再次选择相同的文本（取而代之的是“幽灵”）您所要做的就是手动禁用`textIsSelectable`属性并再次启用它在视图中。为此，我在我的 ActivityMain 中使用了此代码。糟糕的解决方案，但它对我有用

```
override fun dispatchTouchEvent(ev: MotionEvent?): Boolean {
    if (ev?.action == MotionEvent.ACTION_DOWN) {
        val v = currentFocus
        if (v is TextView || v is TextInputEditText) {
            val outRect = Rect()
            v.getGlobalVisibleRect(outRect)
            if (!outRect.contains(ev.rawX.toInt(), ev.rawY.toInt())) {
                val view = when (v) {
                    is TextView -> v
                    is TextInputEditText -> v
                    else -> null
                }
                view?.setTextIsSelectable(false)
                view?.refreshDrawableState()
                view?.setTextIsSelectable(true)
            }
        }
    }
    return super.dispatchTouchEvent(ev)
} 
```

# sql - 有没有比这种方式更好的方法来从数据库中每 1 秒更新一次列表视图？

> ID：15593525
> 
> 赞同：1
> 
> 时间：2013-03-24T00:03:38.940
> 
> 标签：sql, vb.net, memory

我在我的应用程序中有一个显示传输事件的列表视图，这个列表视图应该每秒更新一次，以跟进事件。我只是通过一个计时器（1000 间隔）来声明一个连接对象，dataReader... 然后填充列表视图，最后，我处理连接和另一个对象（这是每个计时器滴答声）。

现在，有没有更好的方法来做到这一点？也许对性能，内存或其他东西更好？

我不是专家，所以我想也许每秒都在声明许多连接可能会造成一些记忆问题:)（如果有误，请纠正我）

数据库访问 2007 VS 2012

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:13:48.920

假设您使用 ADO.NET 访问您的数据库，您的访问模型应该没问题，因为 .NET 使用[*连接池*](http://msdn.microsoft.com/en-us/library/bb399543.aspx)来最小化关闭和重新打开数据库连接的性能影响。

但是，您的整体架构可能会受到质疑：在计时器上轮询更新通常不是最佳选择。更好的方法是在单独的表中维护更新序列。该表将只有一行，其中一`int`列最初设置为零。每次对“真实”数据进行更新时，这个数字都会增加一个。有了这个表，您的程序每秒可以只读取这个数字，而不是重新读取整个数据集。如果您的程序检测到该数字与上一次相同，它将停止并等待下一个计时器间隔；否则，它重新读取数据集。

# javascript - 从 Phonegap 的 SQLite 数据库中提取数据

> ID：15593528
> 
> 赞同：1
> 
> 时间：2013-03-24T00:03:48.183
> 
> 标签：javascript, html, sqlite, cordova

我在 PhoneGap 应用程序中使用 SQLite 数据库。我能够填充数据库，提取数据库并使用`console.log`

这是代码

```
function extractFromDB(){
     var db = window.openDatabase("hospitalsDB", "1.0", "HospitalsDB", false);
     db.transaction(queryDB, errorCB);
}

  function queryDB(tx) {
     tx.executeSql('SELECT * FROM hospitals', [], querySuccess, errorCB);
 }

 function querySuccess(tx, results) {
     var len = results.rows.length;
     console.log("DEMO table: " + len + " rows found.");
     for (var i=0; i<len; i++){
            console.log("Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).data);
      }
} 
```

我的问题是，如何将这些数据打印到 html 页面上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:18:31.380

如果我以正确的方式得到您的问题。假设您`<div>`的 html 页面中有一个：

```
var resultDiv = $('#mydiv');
var data = undefined;
for (var i=0; i<len; i++){
     data = "Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).data;
     resultDiv.append(data + "<br>") 
```

这会将所有数据写入 html 页面中的 div 中。一个与您相似的简单示例：[JSFIDDLE](http://jsfiddle.net/x5WNN/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-13T15:24:59.903

```
function querySuccess(tx, results) {
  <!-- its good programming to check the length of rows returned by sqlite DB.-->
     var htmlstring = "";
         if (results != null && results.rows != null && results.rows.length > 0) {
                for ( var i = 0;i <results.rows.length;i++)
                    {
    htmlstring+= '<div class="ui-grid-a">';
          htmlstring += '<div class="ui-block-a">'+results.rows.item(i).id+'</div>'; 
           htmlstring+= '</div>';  

                   }

$("#divholderfordata").empty().append(htmlstring).trigger('create');

          }
   else
 {console.log("no records inserted in DB");}
} 
```

您可以在 html 代码中定义 ID 为“divholderfordata”的“div”，就“UI”而言，此代码会更好地工作，因为它还包含“jquery-mobile”代码，希望对您有所帮助。

# sql - SQL Server 筛选

> ID：15593531
> 
> 赞同：0
> 
> 时间：2013-03-24T00:03:57.910
> 
> 标签：sql

一项新的政府报告法规要求您开发一个可以计算公司员工的男性家属人数的查询。信息存储在表的`dep_gender`列中`dependent`。结果表应该有一个标记为 的输出列`Number Male Dependents`。

**所以对于这一部分，我有：**

```
SELECT COUNT(DEP_GENDER)"Number of Male Dependents"
FROM dependent
where dep_gender = 'M'; 
```

现在可以很好地为下一部分“修改”。我遇到了一些问题，因为我无法弄清楚如何过滤到两个不同的组，并关联男性和女性的计数。

政府报告条例的修订要求报告计算公司的男性和女性家属人数。将信息显示为两列，一列用于性别，另一列用于关联计数。结果表应该有两行，每个性别一个。使用单个查询。此外，性别输出列的格式应为`CHAR(6)`并具有标题标签`Gender`。计数列的标题标签应为`Number Counted`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:09:54.340

我想你正在寻找一个`Group By`查询：

```
Select Cast(Dep_Gender as Char(6)) as Gender,
    Count(1) 'Number Counted'
From Dependent
Group By Cast(Dep_Gender as Char(6)) 
```

`Cast`之所以使用，是因为要求（也许是家庭作业）是将性别格式化为 char(6)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:10:55.003

```
SELECT 'Male' As [Gender], COUNT(DEP_GENDER) AS [Counted]
FROM dependent
where dep_gender = 'M'
UNION ALL
SELECT 'Female', COUNT(DEP_GENDER)
FROM dependent
where dep_gender = 'F' 
```

# r - 使用 do.call 因子进行缩放 - 重置值错误

> ID：15593537
> 
> 赞同：0
> 
> 时间：2013-03-24T00:04:41.593
> 
> 标签：r, search, normalization, r-factor, do.call

这是我在这里提出的问题的扩展： [在计算后将因子均值放入数据集中](https://stackoverflow.com/questions/15591704/getting-factor-means-into-the-dataset-after-calculation)

现在我已经基本标准化了我有兴趣使用的所有统计数据，我想在数据集中搜索与这些数据相交的人。因此，我正在搜索这样的数据集：

```
base3[((base3$ScaledAVG>2)&(base3$ScaledOBP>2)&(base3$ScaledK.AB<.20)),] 
```

寻找所有这三件事都为真的玩家，但是当我运行它时，它会将 Scaled K.AB 值重置为 0.5、1 或 2，然后不使用该参数进行搜索。以这种方式搜索数据集是否有问题，或者是否有更好的方法以同样的方式在数据集中查找人员？

这是一些示例数据，但它与我使用 4000 条记录时没有相同的问题：

```
AVG = c(.350,.400,.320,.220,.100,.250,.400,.450)
Conf = c("SEC","ACC","SEC","B12","P12","ACC","B12","P12")
OBP = c(.360,.420,.360,.260,.160,.260,.460,.410)
K.AB = c(.11,.10,.09,.25,.20,.19,.05,.09)
Conf=as.factor(Conf)
d<- data.frame(Conf, AVG,OBP,K.AB)
dd <- do.call(rbind, by(d, d$Conf, FUN=function(x) { x$Scaled <- scale(x$AVG); x}))
dd <- do.call(rbind, by(d, d$Conf, FUN=function(x) { x$Scaled <- scale(x$OBP); x}))
dd <- do.call(rbind, by(d, d$Conf, FUN=function(x) { x$Scaled <- scale(x$K.AB); x}))
dd[((dd$ScaledAVG>2)&(dd$ScaledOBP>2)&(dd$ScaledK.AB<.20)),] 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:08:11.923

您可能希望放弃 do.call(rbind, by(...)) 策略以支持直接`scale`策略。data.frame``scale function has a`方法。

```
> dd <- scale(d[ ,c("AVG", "OBP", "K.AB")])
> dd
             AVG        OBP       K.AB
[1,]  0.33566727  0.2348519 -0.3608439
[2,]  0.76878633  0.8281619 -0.5051815
[3,]  0.07579584  0.2348519 -0.6495191
[4,] -0.79044229 -0.7539981  1.6598820
[5,] -1.82992803 -1.7428481  0.9381942
[6,] -0.53057085 -0.7539981  0.7938566
[7,]  0.76878633  1.2237019 -1.2268693
[8,]  1.20190539  0.7292769 -0.6495191
attr(,"scaled:center")
    AVG     OBP    K.AB 
0.31125 0.33625 0.13500 
attr(,"scaled:scale")
       AVG        OBP       K.AB 
0.11544170 0.10112757 0.06928203 

> d[ dd[, 'AVG'] > 2 & dd[ ,'OBP'] >2 & dd[ ,'K.AB'] < 0.2 , ]
[1] Conf AVG  OBP  K.AB
<0 rows> (or 0-length row.names) 
```

没有得到满足所有这些条件的行应该不足为奇，因为在小型数据集中不太可能出现 2 的缩放值。

要在 Conf 级别内应用比例：

```
> dd <- lapply(d[ ,c("AVG", "OBP", "K.AB")], function(x) ave(x, d[,"Conf"] , FUN=scale) )
> dd
$AVG
[1]  0.7071068  0.7071068 -0.7071068 -0.7071068 -0.7071068 -0.7071068  0.7071068  0.7071068

$OBP
[1]        NaN  0.7071068        NaN -0.7071068 -0.7071068 -0.7071068  0.7071068  0.7071068

$K.AB
[1]  0.7071068 -0.7071068 -0.7071068  0.7071068  0.7071068  0.7071068 -0.7071068 -0.7071068

> data.frame(dd)
         AVG        OBP       K.AB
1  0.7071068        NaN  0.7071068
2  0.7071068  0.7071068 -0.7071068
3 -0.7071068        NaN -0.7071068
4 -0.7071068 -0.7071068  0.7071068
5 -0.7071068 -0.7071068  0.7071068
6 -0.7071068 -0.7071068  0.7071068
7  0.7071068  0.7071068 -0.7071068
8  0.7071068  0.7071068 -0.7071068 
```

我不认为它在这里工作得很好，因为提供的测试用例太小了。

# c# - 从外部（C＃）访问while循环内部的变量？

> ID：15593540
> 
> 赞同：2
> 
> 时间：2013-03-24T00:04:59.867
> 
> 标签：c#, while-loop

我是 C# 的新手，我正试图从那时起达到 MAX 的价值，所以我可以在外面使用它，但我不能......任何人都有一些想法！提前致谢

```
while (Condition)
{    
    Double MAX = somecode.....
                         .....
}

Console.WriteLine("The OPTIMAL Value : " + MAX); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T00:06:25.433

在开始 while 循环之前声明 MAX。您拥有它的方式只能在一段时间内访问。

```
Double MAX = 0;
while (Condition)
            {    

                MAX = somecode.....
                                      .....
            }

            Console.WriteLine("The OPTIMAL Value : " + MAX); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T00:07:04.873

您必须在循环之前声明变量。

```
Double MAX;
while (Condition)
{
    MAX = somecode....
}
Console.WriteLine("The OPTIMAL Value : " + MAX); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T00:17:06.413

看起来潜在的问题是理解范围是如何工作的。谷歌搜索“C# 作用域的工作原理”（或类似内容）可能会有所帮助。

我发现一个非常简单易懂的：http: [//www.codecandle.com/Articles/191/Csharp/Variables/Variable-scope/codedetail.aspx](http://www.codecandle.com/Articles/191/Csharp/Variables/Variable-scope/codedetail.aspx)

因此，正如许多其他人提到的那样，您需要在内部范围之外声明变量才能访问更改。

一些伪代码

```
// declare variable;
{
  // change variable;
}
// use changed variable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T00:08:33.317

将 MAX 声明为循环外的变量，例如更改变量名也不要使用保留字作为变量名

```
var dMax = default(double);//this is equivalent to writing Double dMax = 0 when debugginb it will give you this value 0.0

while (Condition)
{    
    dMax = somecode.....
}
Console.WriteLine("The OPTIMAL Value : " + dMax); 
```

# jquery - jQuery 验证 - 至少选择 3 个字段，共 20 个

> ID：15593544
> 
> 赞同：0
> 
> 时间：2013-03-24T00:06:06.683
> 
> 标签：jquery, jquery-validate

嗨，现在我搜索了几个小时的解决方案。我有 20 个字段（下拉菜单），答案是“是”和“否”。现在我想验证，用户必须对 20 个“是”中的 3 个说“是”。这是从 20 开始的无所谓。

例如，20 个下拉菜单之一...

```
<select name="dd1" id="dd1">
<option value="yes">Yes</option>
<option value="no" selected="selected">No</option>
</select> 
```

有没有人有解决方案的想法？

对于验证，我使用例如这种格式：

```
 $(document).ready(function(){

    $("#register").validate({

        rules: {

            surname: {
                required: true,
                minlength: 3
            },

            messages: {
            surname: {
                required: "xxx",
                minlength: "xxx"
            },
            errorPlacement: function (error, element) {
             if ( element.is(":checkbox") )
             error.appendTo(element.parent("td").next("td"));
             else if ( element.is(":radio") )
             error.appendTo(element.parent("td").next("td"));
             else
             error.appendTo( element.parent());
            }

    });

  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:08:49.833

```
if ( $('select.my20drops[value="yes"]').length > 3 ) {
    // do something!
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T03:19:01.077

修复@adeneo 的选择器...

```
$('select.mydrops option[value="yes"]:selected') 
```

然后使用[插件的`addMethod`方法](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)，我创建了一个自定义规则。

**工作演示：http: [//jsfiddle.net/UBhce/](http://jsfiddle.net/UBhce/)**

```
$(document).ready(function () {

    $.validator.addMethod('customrule', function(value, element, param) {
        return ( $('select.mydrops option[value="yes"]:selected').length >= param ); 
    }, "please select 'yes' to at least {0} items");

    $('#myform').validate({ // initialize the plugin
        groups: {
            whatever: "dd1 dd2 dd3 dd4"  // grouping all messages into one
        }
    });

    $('.mydrops').each(function() { // apply rule to all selects at once
        $(this).rules('add', {
            customrule: 3  // using a parameter for number of required selects
        });
    });

}); 
```

我还添加`class="mydrops"`了所有`select`元素并确保所有`id`' 和`names`' 都是唯一的。

```
<select name="dd1" id="dd1" class="mydrops">
    <option value="yes">Yes</option>
    <option value="no" selected="selected">No</option>
</select> 
```

# c# - ASP.Net MVC4 自定义路由

> ID：15593545
> 
> 赞同：2
> 
> 时间：2013-03-24T00:06:17.523
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-5

我目前正在尝试弄清楚如何更改我的博客的 url 规则。

现在 URL 是 /Blog/Details/1 但我读到制作 URL 是一种更好的 SEO 做法`/Blog/Details/Post-Title`。我在我的博客数据库中创建了一个名为 FriendlyUrl 的额外字段，当我创建博客条目时，我用破折号 (-) 替换空格，但现在我不知道如何让我的应用程序正常工作。

有人告诉我查看我的 global.asx.cs，但这就是我的样子。

```
public class MvcApplication : HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();
    }
} 
```

这是我的控制器代码以获取详细信息

```
public ActionResult Details(int id = 0)
    {
        Blog blog = _db.Blogs.Find(id);
        if (blog == null)
        {
            return HttpNotFound();
        }
        return View(blog);
    } 
```

这是当前用于链接到博客条目的链接。

```
<a href="@Url.Action("Details", "Blog", new { id=item.Id})">@Html.DisplayFor(modelItem => item.Title)</a> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T00:13:50.540

将此路由首先放在您的 app_start routing.cs 文件中：

```
 routes.MapRoute(
            "Blog",
            "Blog/{id}",
            new { controller = "Details", action = "Blog", id=0 }
        ); 
```

只要路由引擎首先找到这条路由，任何以 Blog/ 开头的路由都会被路由到 Contoller`Details`和 Action `Blog`。

* * *

如果您想要一条更具描述性的路线，专注于 SEO 友好的 slug，请使用以下路线：

```
 routes.MapRoute(
            "Blog",
            "Blog/{postid}/{slug}",
            new { controller = "Details", action = "Blog", id=0, slug="" } 
        ); 
```

任何以 Blog/{postid} 开头的路由都将被路由到 Contoller`Details`和 Action `Blog`。当您的操作或操作过滤器看到将 slug 留空的路由时，请在数据库中查找它并将您的用户重定向到该 URL。

因此，例如，如果您获得类似的路线

```
/Blog/1287 
```

您应该将用户重定向到

```
/Blog/1287/how-to-fix-your-routing-engine 
```

这种架构与 SO 使用的设计非常相似。观察如果你尝试去会发生什么

```
/questions/15593545/ 
```

你会发现自己在

```
/questions/15593545/asp-net-mvc4-custom-routing 
```

* * *

您的 Action 方法现在看起来像这样

```
public ActionResult Blog (int postid, string slug)
{ 
```

# javascript - 什么是收集页面上最常用词的快速方法？

> ID：15593553
> 
> 赞同：1
> 
> 时间：2013-03-24T00:07:26.127
> 
> 标签：javascript, dom, keyword

我需要获取页面的“关键字细分”。奖励：它需要非常快。

我应该只扫描 DOM 中的文本节点以提高速度吗？不太确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:14:00.667

你可能最好先做`innerText`/`textContent`然后拆分单词。如果一个词被分割（半个词是粗体）或什么的，寻找文本节点会中断。它还将 DOM 遍历移动到 JS 而不是 C++。

```
var content = document.body.innerText || document.body.textContent;
var words = content.match(/\b\w+\b/g);

var counts = {};
for (var i = 0, len = words.length; i < len; i++){
  var word = words[i];
  counts[word] = (counts[word] || 0) + 1;
}

console.log(words); 
```

但是，如果不尝试然后进行基准测试，就很难猜测性能，所以我真的想说，尽你最大的努力，然后从那里开始。

# quartz-core - 如何让这条线在正确的时间和地点绘制

> ID：15593554
> 
> 赞同：1
> 
> 时间：2013-03-24T00:07:31.673
> 
> 标签：quartz-core

为什么这段代码没有被正确执行。我试过 setNeedsDisplay 和 setNeedsLayout 但这段代码似乎没有被执行。即使它确实执行了，它也会在不应该执行的时候执行，并且执行错误，这意味着它在错误的位置绘制了随机长度的线。-（无效）drawNW {

```
NSLog(@"%f",x1);
NSLog(@"%f",y1);

CGContextSetStrokeColorWithColor(c, [UIColor blueColor].CGColor);
CGContextSetLineWidth(c, 10.0);
CGContextMoveToPoint(c, x1, y1);
CGContextAddLineToPoint(c, -(sqrtf(2)/2)*length + x1, ((sqrtf(2)/2)*length + y1));
CGContextStrokePath(c);

length = line.bounds.size.height; 
```

}

长度、x1 和 y1 是由 NSTimer 以 0.1 秒的间隔不断变化的浮点数：

```
 NWTimer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(startMoving) userInfo:nil repeats:YES]; 
```

计时器调用这个调用drawNW的代码：

```
x1 = x1-2.5;
y1 = y1-2.5;
length= length+5;
[self drawNW]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:22:03.277

您的绘图代码（CGContext ...等）需要在您的类`drawRect`方法中。然后，您的计时器驱动代码应该只更改 x1、y1 和长度的值，然后调用`[self setNeedsDisplay]`. 这告诉 iOS 需要重绘视图，`drawRect`然后调用它。

至于在你想要的地方画线，我真的不知道你想用这段代码做什么。

# .net - 从线程实例化对象调用委托

> ID：15593555
> 
> 赞同：0
> 
> 时间：2013-03-24T00:07:59.220
> 
> 标签：.net, vb.net

有谁知道如何从在线程中运行的实例化类调用主表单页面上的函数？

```
Public Class Test
    Public Sub Temp()
        Try
            'Operations here
        Catch ex as Exception
            Form1.Invoke(New Form1.LogMessageDelegate(AddressOf frmIP.LogMessage), "Error Message To Be Outputted to TextBox on Main Form")
        End Try
    End Sub
End Class 
```

我会让它在函数中返回一个字符串，但我只在出现异常时调用文本框消息。感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:41:54.570

```
Public Class Test
 Public Event ErrorMessage(errStr As String)
 Public Sub Temp()
    Try
        'Operations here
    Catch ex as Exception
        RaisEvent ErrorMessage(ex.Message)
    End Try
 End Sub
End Class

Public Class Form1
  Private Sub form1_load() Handles Me.Load
    Dim trd As New Thread(AddressOf RunTestClass)
    trd.Start()
  Ens Sub

  Private Sub RunTestClass()
    Dim _test As New Test
    Addhandler _test.ErrorMessage, AddressOf Test_ErrorMessage
    _test.Temp()
  End Sub

  Private Sub Test_ErrorMessage(errStr As String)
    Me.Invoke(Sub()
              'run code here for UI thread
              End Sub)
  End Sub
End Class 
```

# php - Jquery Json 请求和回调到 html 表

> ID：15593556
> 
> 赞同：0
> 
> 时间：2013-03-24T00:08:02.783
> 
> 标签：php, jquery, ajax, json

我已经建立了一个功能非常好的级联下拉菜单。提交表单时，将 ID 传递给第二个脚本。我似乎无法让回调函数......正常运行。不知道哪里错了。

请注意，我使用建议的更改更新了代码，但仍然出现问题。

php：

```
<?php
if (!empty($_GET['id'])) {
$id = $_GET['id'];

try {

$objDb = new PDO('mysql:host=localhost;dbname=blankett', 'root', 'root');
$objDb->exec('SET CHARACTER SET utf8');

$sql = "SELECT * 
    FROM `forms`
    WHERE `id` = '$id'";
$statement = $objDb->prepare($sql);
$list = $statement->fetchAll(PDO::FETCH_ASSOC);

if (!empty($list)) {

   $out = array();

  foreach ($list as $row ) {
  $out[] = '<tr><td><a href="'.$row['link_form'].'">'.$row['name_form'].'</a></td> <td>'.$row['date_added'].'</td></tr>';
   }

  echo json_encode(array('error' => false, 'list' => $out));
} else {
  echo json_encode(array('error' => true));
}

} catch(PDOException $e) {
echo json_encode(array('error' => true));
}

}else {
echo json_encode(array('error' => true));
}

?> 
```

Jquery ajax 调用。

```
$('#blankett_form').submit(function() {
var id = $(this).find('.update:last').val();
    if (id == '') {
        alert('Välj land och region.'); //glöm inte bort att ändra beroende på land.
    } else {
        var table = '<table class="table table-hover table-bordered"><thead><tr><th>blanketter.</th><th>datum tillagt.</th></tr></thead><tbody></tbody></table>'
        $('#formsubmit').empty().append(table)
        $ajax({
                url: 'func/blankett_func2.php',
                data: {'id':id},
                dataType: 'JSON',
                success: function(data)
                {
                    $.each(data.list, function(index, value){
                    $('#formsubmit tbody').append(value);
                    });
                }
          });
return false
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:11:30.020

代替 ：

```
$each(data.out, function(){
    var trow = out;
    $('#formsubmit tbody').append(trow);
}); 
```

和 ：

```
$each(data.form, function(i, val){
    $('#formsubmit tbody').append(val);
}); 
```

因为每个函数内部没有`out`变量，看起来您正在命名`form`返回数组中的键？

在 PHP 中，您要在循环内重新声明数组，需要：

```
$out = array();

foreach ($list as $row ) {
     $out[] = '<tr><td><a href="'.$row['link_form'].'">'.$row['name_form'].'</a></td> <td>'.$row['date_added'].'</td></tr>';
} 
```

并且无需将空数组传递给 execute()：

```
$statement->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:19:57.923

您没有正确发送数据，您必须发送 id 键和 id 值，例如

```
data: {'id':id}, 
```

此外，您的 json 输出的格式`{"error": false, "form": "html string"}`为访问您必须使用的 html 字符串，`data.form`而不是`data.out`. 所以试试

```
$.each(data.form, function(index, value){
    $('#formsubmit tbody').append(value);
}); 
```

# asp.net - 对 ASP.NET 4.0 (c#) ListView 进行排序

> ID：15593557
> 
> 赞同：0
> 
> 时间：2013-03-24T00:08:29.070
> 
> 标签：asp.net

我有一个 ListView - 从数据表绑定 - 包含几页按时间顺序排列的项目。

我希望能够按升序和降序对它们进行排序。

在我的`<layouttemplate>`我有以下内容：

```
<asp:linkbutton runat="server" id="SortbyYear" commandname="Sort" commandargument="Year">Year</asp:linkbutton> 
```

当我单击它时，我从 pageRequestManager 收到一个错误，即未处理排序。

所以我将以下内容添加到我的`<asp:listview ... >`：

```
onsorting="HistoryList_Sorting" 
```

我实际上在后面的代码中放入了该方法以使排序正常工作？我只是尝试在升序和降序之间来回切换“年”列。

```
protected void HistoryList_Sorting(object sender, ListviewSortEventArgs e)
{
    // WHAT GOES HERE???
} 
```

**更新：**

以下是我的 ASPX 页面中的内容：

```
<asp:listview id="HistoryList" runat="server" convertemptystringtonull="False" onlayoutcreated="HistoryList_LayoutCreated" ondatabound="HistoryList_DataBound" onsorting="HistoryList_Sorting" >
    <layouttemplate>
        <table>
            <tr>
                <th><asp:linkbutton runat="server" id="SortByYear" commandname="Sort" commandargument="Year"><asp:literal runat="server" id="Year" /></asp:linkbutton></th>
                <th><asp:literal runat="server" id="Event" /></th>
            </tr>
            <tr id="ItemPlaceholder" runat="server"></tr>  
        </table>
    </layouttemplate>
    <itemtemplate>
        <tr class="row">
            <td class="history-year-column"><%# Eval("Year") %></td>
            <td><%# Eval("Description") %></td>
        </tr>
    </itemtemplate>
    <alternatingitemtemplate>
        <tr class="row-alternate">
            <td class="history-year-column"><%# Eval("Year") %></td>
            <td><%# Eval("Description") %></td>
        </tr>
    </alternatingitemtemplate>
</asp:listview> 
```

以下是我的 CS 页面中的内容：

```
#region " Declare: Shared Classes "

    private Localization localizeSite = new Localization();
    private DataXML xmlData = new DataXML();
    public DataTable HistoryDataTable { get; set; }

#endregion

#region " Page: PreInit "

    private void Page_PreInit(object sender, System.EventArgs e)
    {
        Page.MasterPageFile = localizeSite.LoadMasterPage(Page.Master.AppRelativeVirtualPath);
    }

#endregion

#region " Page: Load "

    protected void Page_Load(object sender, System.EventArgs e)
    {
        Edition edition = new Edition();
        ContentTracking.Text = edition.GetEdition(Page.AppRelativeVirtualPath);

        //// LOCALIZE THE WEB SITE CONTENT
        Heading.Text = localizeSite.LocalizeText(Page, "Heading.Text");
        Body.Text = localizeSite.LocalizeText(Page, "Body.Text");
        AdNetworkTracking.Text = localizeSite.LocalizeText(Page, "AdNetworkTracking.Text"); 
    }

#endregion

#region " Handle: OnLayoutCreated "

    protected void HistoryList_LayoutCreated(object sender, System.EventArgs e)
    {
        ((Literal)HistoryList.FindControl("Year")).Text = localizeSite.LocalizeText(Page, "Year.Text");
        ((Literal)HistoryList.FindControl("Event")).Text = localizeSite.LocalizeText(Page, "Event.Text");
    }

#endregion

#region " Handle: Sorting "

    public String SortExpression
    {
        get
        {
            return (string)ViewState["SortExpression"];
        }
        set
        {
            ViewState["SortExpression"] = value;
        }
    }

    protected void HistoryList_Sorting(object sender, ListViewSortEventArgs e)
    {
        String sortExpression = e.SortExpression + " " + e.SortDirection.ToString();
        this.SortExpression = sortExpression.Replace("Ascending", "ASC").Replace("Descending", "DESC");
    }

#endregion

#region " Handle: Paging "

    protected void HistoryList_DataBound(object sender, EventArgs e)
    {
        HistoryPager.Visible = (HistoryPager.PageSize < HistoryPager.TotalRowCount);
    }

    protected void HistoryPager_PreRender(object sender, EventArgs e)
    {

        if (HistoryDataTable == null)
        {
            HistoryDataTable = xmlData.GetDataTable(Server.MapPath("~/App_Data/history.xml"), "Event");
        }

        if (!String.IsNullOrEmpty(SortExpression))
        {
            HistoryDataTable.DefaultView.Sort = SortExpression;
        }

        HistoryList.DataSource = HistoryDataTable;
        HistoryList.DataBind();
    }

#endregion 
```

排序还没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T16:06:18.210

如果您的列表视图绑定到数据库，您是否可以使用“order by”子句在数据库选择语句中进行排序？这将按排序顺序返回数据，您不需要在列表视图本身中对它们进行排序。

我知道这不能回答排序问题，但我想我会把它扔掉，以防你没有考虑过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:09:12.890

```
if(e.commandName==Sort)
{
  //Code you want to implement on the button click event
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:16:09.420

如果您想使用数据分页器对 a 进行排序`ListView`，并且希望在页面更改时保留排序，那么您需要记住几件事。

1.  您必须以某种方式确定最后的排序方向，即当您对列进行排序时，您必须能够知道您是第一次单击还是第二次单击，即您想要上升还是下降

2.  您需要在页面更改（回发）期间维护 sortExpression。这意味着，您需要在数据源中进行排序。

请参见下面的示例：

在 ListView 的标题中创建一个`ListView`, 和 在它的 , 中放置and即`LayoutTemplate``LinkButton``CommandName="Sort"``CommandArgument="ColumnName"`

```
<LayoutTemplate>
  <table>
    <tr>
       <td>
         <asp:LinkButton ID="btnNameSort" runat="server" 
            CommandName="sort" CommandArgument="Name" 
            Text="Name">
         </asp:LinkButton>
       </td>
        ..
        ..
</LayoutTemplate> 
```

然后在代码隐藏上执行此操作：

```
public string SortExpression
{
     get
     {
        return (string)ViewState["SortExpression"];
     }
     set
     {
        ViewState["SortExpression"] = value;
     }
}
public DataTable lvwDataSource { get; set; } 
```

并且您的列表视图排序事件为：

```
protected void lvwData_Sorting(object sender, ListViewSortEventArgs e)
{
   string sortExp = e.SortExpression + " " + e.SortDirection.ToString();
   this.SortExpression = sortExp.Replace("Ascending", "ASC")
                                .Replace("Descending", "DESC");
} 
```

在 DataPager 的 PreRender 事件中绑定您的 listView：

```
protected void DataPager1_PreRender(object sender, EventArgs e)
{
   if (lvwDataSource == null)
        lvwDataSource = StaticData.GetData();

   if (!string.IsNullOrEmpty(SortExpression))
        lvwDataSource.DefaultView.Sort = SortExpression;

   lvwData.DataSource = lvwDataSource;
   lvwData.DataBind();
} 
```

因此，您需要在全局范围内定义数据源，以便在分页时保持排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T02:50:43.760

我自己没有这样做，但看起来你会做这样的事情：[asp.net ListView Sorting using DataBind](https://stackoverflow.com/questions/7586332/asp-net-listview-sorting-using-databind)。希望能帮助到你！

# php - 排除条目形成变量？

> ID：15593564
> 
> 赞同：1
> 
> 时间：2013-03-24T00:09:04.927
> 
> 标签：php, variables

我有这个用于导航栏的代码：

```
<?php  
$url = 'snip';  
foreach (glob("pages/*") as $path1) {  
  $file1 = basename($path1);  
  $file2 = end(explode('_', $file1));  
  echo "<div class=\"navbutton\"><a style=\"color:#333333;\" href='{$url}index.php?page={$file1}'>$file2</a></div>";
}
?> 
```

我的文件夹如下所示：

```
pages/
   1_Home  
   2_About  
   404 
```

我不希望它包含文件“404”，有没有办法可以从变量中删除它？由于某种原因，取消设置不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:18:34.167

您的文件 glob`pages/*`当然匹配目录中的*所有文件*`pages`。由于除了`404`页面之外的所有内容都在文件名中包含下划线，因此最简单的解决方案是一个稍微智能的文件 glob，它只匹配那些具有下划线的文件，例如：

```
 pages/*_* 
```

所以：

```
foreach (glob("pages/*_*") as $path1) {  
   // Everything else is the same
} 
```

# python - Django + postgreSQL：找到附近的点

> ID：15593572
> 
> 赞同：0
> 
> 时间：2013-03-24T00:09:56.687
> 
> 标签：python, django, postgresql, postgis, geodjango

对于我的应用程序，我需要确定与其他点最近的点，并且我正在寻找一个简单但相对快速（就性能而言）的解决方案。我正在考虑使用 PostGIS 和 GeoDjango，但我认为我的应用程序并不是真正的“地理”（尽管我仍然不知道这意味着什么）。地理部分（大约占整体的 5%）是我需要保持对象（人和地点）的坐标，然后有这个任务来找到最近的点。简单地说，PostGIS 和 GeoDjango 在这里似乎有点过头了。

我还在考虑使用 SOLR 或 Elasticsearch 的 django-haystack，因为我需要强大的文本搜索功能，并且这些引擎也具有这些“地理”功能。但也不确定，因为我害怕核心数据库 <-> 搜索引擎数据库同步和这些引擎的硬件要求。目前，我更喜欢使用 posgreSQL trigrams 和一些自定义方法来完成“查找近点问题”。有没有好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:38:38.127

要查找彼此靠近的点或边界框，请考虑使用[Rtree](https://pypi.python.org/pypi/Rtree/) Python 包。这使用了与 PostGIS 类似的空间索引技术，只是它不是数据库软件，可以在软件中使用。我已经测试了比 PostGIS 更快的速度来找到数百万个物体的近点。

请参阅[教程中的示例，以](http://toblerity.github.com/rtree/tutorial.html)更好地找到最近的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:15:52.747

你可能是对的，PostGIS/GeoDjango 可能是矫枉过正，但是制作你自己的 Django 应用程序对于你的简单任务来说不会太麻烦。Django 在模板等方面提供了很多功能，并且内置管理功能可以很容易地输入单个记录。而且 GeoDjango 是 contrib 的一部分，因此如果您的项目需要，您可以随时使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T00:25:07.537

[身材匀称](http://toblerity.github.com/shapely/manual.html)地退房。看起来对象的`project()`方法可能是您正在寻找的。

# ios - 从 JSON 字符串中删除括号

> ID：15593579
> 
> 赞同：-2
> 
> 时间：2013-03-24T00:10:40.533
> 
> 标签：ios, json, nsstring

从 JSON 响应中提取字符串后：

```
 NSString *responseMessage = [NSString stringWithFormat:@"%@",[[JSON objectForKey:@"Response"]valueForKey:@"Message"]];
 NSLog(@"<%@>",responseMessage); 
```

它看起来像这样：

```
<(
    "not found"
)> 
```

这是相关代码：

所以当我尝试比较它时，`isEqualToString`总是返回`false`

```
([responseMessage isEqualToString:@"not found"])?NSLog(@"They are equal"):NSLog(@"They are different");//they are different 
```

如何摆脱这些括号以更好地比较两个字符串？提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:14:12.303

看起来您在这里有一个数组（在 Objective-C 中将打印为带括号的列表）。

什么是源 JSON 字符串？

如果它是一个数组，你想迭代它的元素，或者只是拉出第一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:21:31.447

**如果**代码中存在任何括号，您可以尝试使用[NSRegularExpression](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)删除。您可以找到要使用的正则表达式的不同组合。

 **```
 NSString *expression = @"\\s+\\([^()]*\\)";
     while ([responseMessage rangeOfString:expression options:NSRegularExpressionSearch|NSCaseInsensitiveSearch].location!=NSNotFound)
     {
          responseMessage = [responseMessage stringByReplacingOccurrencesOfString:expression withString:@"" options:NSRegularExpressionSearch|NSCaseInsensitiveSearch range:NSMakeRange(0, [responseMessage length])];
     }

     NSLog(@"returnResponse %@",responseMessage); 
```**

# apache-flex - 可以在 NativeDragDrop 操作期间设置鼠标光标吗？

> ID：15593580
> 
> 赞同：0
> 
> 时间：2013-03-24T00:10:41.450
> 
> 标签：apache-flex, air, drag-and-drop

在 AIR 应用程序中，我正在尝试实现一个选项卡界面，类似于 Firefox 或 Chrome 中的选项卡界面，您可以在其中拖动一个选项卡并从中创建一个新窗口。一切顺利，除了当我在（Windows）操作系统上将鼠标拖出我的应用程序时，**鼠标光标指示系统将不接受放置操作**。它显示如下： http: [//www.iconfinder.com/icondetails/42419/16/denied_icon](http://www.iconfinder.com/icondetails/42419/16/denied_icon)

这在技术上不是问题，因为我的应用程序仍会收到`nativeDragComplete`事件，但不利于用户体验。我想要实现的是显示一个普通的鼠标指针并在它旁边显示一个拖动指示器，就像浏览器一样。**我可以以某种方式强制 NativeDragManager 不显示被拒绝的图标吗？**

我尝试过使用各种剪贴板格式，因为它似乎会影响鼠标指针，但找不到解决此问题的完整方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:47:30.843

使用 NativeDragManager 无法实现 - 正确的方法是使用轻量级 Windows 实现自定义拖放行为，如此[处](http://codingangry.com/index.php/site/article/drag_drop_windows/)所述。

# youtube-api - YouTube IFrame API onError 值为 0 是什么意思？

> ID：15593584
> 
> 赞同：6
> 
> 时间：2013-03-24T00:10:48.577
> 
> 标签：youtube-api

onError 事件处理程序返回 event.data = 0，通常用于已删除或私有视频（尽管我尚未测试所有案例），而不是 YouTube IFrame API 参考 ( [https://developers.google.com) 上记录的错误值。 com/youtube/iframe_api_reference#Events](https://developers.google.com/youtube/iframe_api_reference#Events) )

> **错误**
> 
> 如果播放器发生错误，则会触发此事件。API 会将事件对象传递给事件侦听器函数。该对象的数据属性将指定一个整数，用于标识发生的错误类型。可能的值为：
> 
> ```
>  2 – The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.
>  5 – The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.
>  100 – The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.
>  101 – The owner of the requested video does not allow it to be played in embedded players.
>  150 – This error is the same as 101\. It's just a 101 error in disguise! 
> ```

这发生在 Mac OS X、Chrome、Firefox 和 Safari 的最新版本中。以下是使用 IFrame API 嵌入时返回此错误代码的已删除视频的链接：[http ://www.youtube.com/watch?v=-TefH2gu9-o](http://www.youtube.com/watch?v=-TefH2gu9-o)

在 Player API Demo 中测试此视频也返回 0（对于 AS3 播放器；选择 IFrame 时，它​​返回`[object Object]`且不可检查）。

预期的错误代码将是 100 或更大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T19:20:42.707

视频id“-TefH2gu9-o”使用HTML5播放时返回错误码100，但是使用Flash播放时返回错误码0。我将与内部工程团队跟进此事。

关于：

> 鉴于这是现在为 YouTube API 报告这些问题的唯一方法......

我们非常鼓励人们使用公共问题跟踪器来获取与 YouTube API 相关的错误报告，并且只在 Stack Overflow 上询问编程/技术问题（与 Stack Overflow 的更大使命保持一致）。有关如何报告错误/功能请求的详细信息，请访问[http://apiblog.youtube.com/2012/09/the-youtube-api-on-stack-overflow.html](http://apiblog.youtube.com/2012/09/the-youtube-api-on-stack-overflow.html)

# c# - 解析文件但得到 NullReference 异常？

> ID：15593586
> 
> 赞同：0
> 
> 时间：2013-03-24T00:10:59.187
> 
> 标签：c#, parsing, streamreader

对不起标题，老实说，我不知道如何描述那里的问题。无论如何，这是我的困境。我目前正在解析一个信息文件。它的“作者”和“依赖项”部分是相似的。但是，信息文件的创建者可以选择以不同的方式编写他们的文件。它可以写成：

> ```
> "authors" : 
> [
>   "author1",
>   "author2"
> ], 
> ```

或者：

> ```
> "authors": ["author1", "author 2"], 
> ```

我需要把这两种风格都变成：

> ```
>  author1, author2 
> ```

我试图解析的文件如下所示：

> ```
> -snip
> "authors": [
> "author1",
>  "author2",
>  "author3"
> -snip 
> ```

我已经成功地解析了作者编写它的第二种方式。但是，当我尝试解析第一种方式时，我得到一个 NullReference 异常。异常详情如下：

> > System.NullReferenceException 未被用户代码处理 HResult=-2147467261 消息=对象引用未设置为对象的实例。Source=RKs Tool Kit StackTrace: at RK_Tool_kit.ParseModInfo.getAuthors(String path) in C:\Users\Sam\Desktop\Programing\C# Projects\RK Mod Installer\RK Mod Installer\RK Mod Installer\ParseModInfo.cs:line 119在 RK_Tool_kit.AddMods.txtbxAddMods_DragDrop(Object sender, DragEventArgs e) 在 C:\Users\Sam\Desktop\Programing\C# Projects\RK Mod Installer\RK Mod Installer\RK Mod Installer\AddMods.cs:line 85 at System.Windows .Forms.Control.OnDragDrop(DragEventArgs drgevent) 在 System.Windows.Forms.Control.System.Windows.Forms.IDropTarget.OnDragDrop(DragEventArgs drgEvent) 在 System.Windows.Forms.DropTarget.System.Windows.Forms。
> > 内部异常：

我在这里不知所措。提前非常感谢。这是我的代码：

```
 public static string getAuthors(string path)
    {
         string line;

         using (StreamReader sr = new StreamReader(path))
         {
             while (!sr.EndOfStream)
             {
                 line = sr.ReadLine();
                 if (line.Contains("author"))
                 {
                     //This detects if it is the second way the authors can write it
                     if (line.Contains("[") && line.Contains("]"))
                     {
                         line = line.Replace("\"authors\": ", "").Replace("\"authors\" : ", "").Replace("\"authorList\": ", "").Replace("\"authorList\" : ", "").Replace("[", "").Replace("]", "").Replace("\"", "").TrimStart(toTrim);
                         int Place = line.LastIndexOf(",");
                         string comma = ",";
                         line = line.Remove(Place, comma.Length).Insert(Place, "");
                         return line;
                     }
                     //This means the the author wrote it the first way. And the string "line" just says '"authors": [' so we want to read the line again.
                     else
                     {
                         line = sr.ReadLine();
                         line = line.Replace("\"", "").TrimStart(toTrim);

                         for (int i = 0; i < 101; i++)
                         {
                             //This checks to see if there is only one author in the array. If there is a comma, we want to read another line because there is another author.
                             if (line.Contains(","))
                             {
                                 //THIS RIGHT HERE throws the exception
                                 line = line + sr.ReadLine().Replace("\"", "").TrimStart(toTrim);
                             }
                             else
                             {
                                 break;
                             }
                         }

                         return line;
                     }
                 }
             }
         }

        return "N/A";
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:17:29.800

如果已到达流的末尾，[StreamReader.ReadLine](http://msdn.microsoft.com/en-GB/library/system.io.streamreader.readline.aspx)`Replace("\"", "")`将返回 null，因此您可能会得到一个 null 行并尝试对其进行调用。

# exception - 硬件或软件中断或陷阱指令异常？

> ID：15593587
> 
> 赞同：2
> 
> 时间：2013-03-24T00:11:28.443
> 
> 标签：exception, assembly, interrupt-handling, nios, assembly-trap

[手册](http://www.ict.kth.se/courses/IS1500/2012/kurslitt/n2cpu_nii5v1.pdf)说_

> 陷阱指令
> 
> 当程序发出陷阱指令时，处理器会产生软件陷阱异常。当程序需要操作系统提供服务时，程序通常会发出软件陷阱。操作系统的通用异常处理程序确定陷阱的原因并做出适当的响应。

但是，当我之前询问它时，答案说这是一个软件中断：

[汇编指令陷阱有什么作用？](https://stackoverflow.com/questions/13557371/what-does-the-assembly-instruction-trap-do)

对于不同的架构，异常和中断之间的差异似乎也略有不同，因此可以有 4 种组合 (?) 的硬件、软件、异常和中断。

现在我正在为一个小型系统研究这个程序集，我认为我可以自己学习个别指令，但我正在寻求帮助以理解更大的图景，为什么事件完全是软件异常而不是硬件异常，硬件中断，软件中断。

```
# The label alt_main is defined in this file.
# There is a call to this label in the Altera-supplied startup code for Nios II.
# At label alt_main, interrupts and handlers are initialized; thereafter,
# the label main is called, starting the main program.
################################################################
#
# Definitions for important devices and addresses in this system.
#
# Uart_0 at 0x860

.equ de2_uart_0_base,0x860

# Timer_1 at 0x920, interrupt index 10 (mask 2^10 = 0x400)

.equ de2_timer_1_base,0x920
.equ de2_timer_1_intmask,0x400

# Timeout value for 0,1 ms tick-count interval (CHANGED in every version)

.equ de2_timer_1_timeout_value,4999

# Required tick count per time-slice, meaning
# the number of timer-interrupts before a thread-switch is performed

.equ oslab_ticks_per_timeslice,100

# Interrupt address at 0x800020

.equ de2_nios2_interrupt_address,0x800020

#
# End of device-address definitions
#
################################################################

################################################################
#
# Definition of variables for keeping system time etcetera.
#

.data
.align 2
.global oslab_internal_globaltime
oslab_internal_globaltime:  .word 0

# Definition of variable for remembering the number of
# timer-interrupts since the last thread-switch

.data
.align 2
.global oslab_internal_tickcount
oslab_internal_tickcount:   .word 0

# Definition of system (interrupt) stack, sp, and gp

.data
.align 2
oslab_internal_gp:  .word 0
oslab_internal_sp:  .word 0
oslab_system_stack: .fill 256,1,0
oslab_system_stacktop:

# Definition of the end-of-timeslice message.

oslab_internal_yield_message:
                    .asciz "\n#### Thread yielded after using %d tick%c."

#
# End of system-time variable definitions.
#
################################################################

################################################################
#
# Interrupt handling code.
#

# Stub for interrupt handler

.text
oslab_internal_stub:
    movia   et,oslab_exception_handler
    jmp     et

# The interrupt handler

oslab_exception_handler:
    # Check source of exception, following the procedure
    # described in the Nios II Processor Reference Handbook.

    rdctl   et,estatus      # Check ESTATUS
    andi    et,et,1         # Test EPIE
    beq     et,r0,oslab_exception_was_not_an_interrupt
    rdctl   et,ipending     # Check IPENDING
    beq     et,r0,oslab_exception_was_not_an_interrupt

    # If control comes here, we have established that the
    # exception was caused by an interrupt.
    # Subtract 4 from ea, so that the interrupted instruction
    # will be re-run when we return.

    subi    ea,ea,4

    # Check the source of the interrupt.
    # Possible source No. 1: Timer_1 (currently the only source).

    rdctl   et,ipending
    andi    et,et,de2_timer_1_intmask
    bne     et,r0,oslab_timer_1_interrupt

    # If control comes here, we have an interrupt from an unknown source.
    # This condition is IGNORED in this version of OSLAB.

    eret

oslab_exception_was_not_an_interrupt:

    # Test if the interrupted instruction was a TRAP

    subi    sp,sp,4         # PUSH r8 (instruction 1)
    stw     r8,0(sp)        # PUSH r8 (instruction 2)

    movia   r8,0x003b683a   # binary code for TRAP
    ldw     et,-4(ea)       # Load interrupted instruction
    cmpeq   et,et,r8        # Compare to binary code for TRAP

    # Result from comparison is now in et.

    ldw     r8,0(sp)        # POP r8 (instruction 1)
    addi    sp,sp,4         # POP r8 (instruction 2)

    # Use the comparison result in et as branch condition.
    # The value in et will also be used later, to tell if the
    # exception was a trap or an interrupt.

    bne     et,r0,oslab_trap_handler

    # If control comes here, we have an exception which was not a TRAP.
    # This should not normally happen.
    # However, someone writing programs for the OSLAB micro-operating system
    # could perhaps use unimplemented instructions. To catch unimplemented
    # instructions, we insert a BREAK instruction here. This will stop execution
    # unless the program is run through the debugger.

    break 0
    eret

oslab_timer_1_interrupt:

    # Acknowledge the timer_1 interrupt.

    movia   et,de2_timer_1_base
    stw     r0,0(et)

    # Save contents of R8, to get a free register for
    # temporary values.

    subi    sp,sp,4
    stw     r8,0(sp)        # PUSH r8

    # Increase system clock.

    movia   r8,oslab_internal_globaltime
    ldw     et,0(r8)
    addi    et,et,1
    stw     et,0(r8)

    # Increase tick counter.

    movia   r8,oslab_internal_tickcount
    ldw     et,0(r8)
    addi    et,et,1
    stw     et,0(r8)

    # Restore original contents of R8.

    ldw     r8,0(sp)        # POP r8
    addi    sp,sp,4

    # Check value of tick counter,
    # against the required number of ticks per time-slice.
    # Note: oslab_ticks_per_timeslice is an assembler constant,
    # and not a variable. Hence, no load/store-instructions here.

    subi    et,et,oslab_ticks_per_timeslice

    # If the result from the subtraction is zero (or perhaps positive),
    # then it is time to switch threads.

    bge     et,r0,oslab_time_to_switch

    # If we fall-through here, then we have had one of those many
    # timer interrupts on which we should not switch threads.
    # Return to caller.

    eret

oslab_time_to_switch:

    # This code will now fall-through into the TRAP handler
    # which performs a context switch.
    #
    # We will print out a message for each timer interrupt.
    # To be able to tell that we had a timer interrupt, and not
    # a TRAP, we set et to zero.

    movi    et,0

oslab_trap_handler:

    # Save registers r1 through r23, plus fp, gp, ra and ea

    .set noat               # R1 is used here.
    subi    sp,sp,108       # Make room for all registers. 
    stw     r1, 4(sp)       # R1 is saved in slot 1, not slot 0.
    stw     r2, 8(sp)
    stw     r3,12(sp)
    stw     r4,16(sp)
    stw     r5,20(sp)
    stw     r6,24(sp)
    stw     r7,28(sp)
    stw     r8,32(sp)
    stw     r9,36(sp)
    stw    r10,40(sp)
    stw    r11,44(sp)
    stw    r12,48(sp)
    stw    r13,52(sp)
    stw    r14,56(sp)
    stw    r15,60(sp)
    stw    r16,64(sp)
    stw    r17,68(sp)
    stw    r18,72(sp)
    stw    r19,76(sp)
    stw    r20,80(sp)
    stw    r21,84(sp)
    stw    r22,88(sp)
    stw    r23,92(sp)
    stw    r26,96(sp)
    stw    r28,100(sp)
    stw    r31,104(sp)
    stw     ea,0(sp)        # Special case, saved in slot 0.

    mov     r4,sp           # Copy stack pointer to param1 register
    movia   sp,oslab_system_stacktop     # Use system stack instead

    # Test et to see if this was a timeout event or a TRAP.

    beq     et,r0,oslab_not_a_trap

    # If this was a trap event, we fall through here.
    # Our simplified printf is used to print a message,
    # saying that the previous thread yielded parts of its time-slice.

################################################################
#
#   The following code prints a nice message. Nothing more.
#   This code saves and restores all registers it uses.
#   You can safely ignore the following code, up to
#   (but NOT including) the label oslab_not_a_trap.
#
    subi    sp,sp,4         # Contents of r4 must be preserved.
    stw     r4,0(sp)        # PUSH r4.

    movia   r4,oslab_internal_yield_message
    movia   r5,oslab_internal_tickcount
    ldw     r5,0(r5)
    movi    r6,0            # Gold-plating: check if 1 tick or several ticks.
    subi    et,r5,1         # Do not print the s if only 1 tick.
    beq     et,r0,oslab_no_plural_ticks
    movi    r6,'s'          # If 0 ticks, or 2 or more ticks, print the s.
oslab_no_plural_ticks:
    call    printf

    ldw     r4,0(sp)        # POP r4
    addi    sp,sp,4
#
#   This comment marks the end of the code for printing a nice message.
#   Now comes other code, which is potentially much more interesting.
#
################################################################

    # Move on to thread-switch code.

oslab_not_a_trap:

    # Clear tick counter, since we are going to switch threads.

    movia   et,oslab_internal_tickcount
    stw     r0,0(et)

    # Now it is time to execute the thread-switch code.
    # We use the more general callr, rather than call.

    movia   et,oslab_internal_threadswitch
    callr   et              # Call thread switch routine written in C

    mov     sp,r2           # Copy return value to stack pointer
                            # Yes, the system stack pointer is lost,
                            # but who cares? We will not need it any more.

    # restore registers
    ldw     r1, 4(sp)
    ldw     r2, 8(sp)
    ldw     r3,12(sp)
    ldw     r4,16(sp)
    ldw     r5,20(sp)
    ldw     r6,24(sp)
    ldw     r7,28(sp)
    ldw     r8,32(sp)
    ldw     r9,36(sp)
    ldw    r10,40(sp)
    ldw    r11,44(sp)
    ldw    r12,48(sp)
    ldw    r13,52(sp)
    ldw    r14,56(sp)
    ldw    r15,60(sp)
    ldw    r16,64(sp)
    ldw    r17,68(sp)
    ldw    r18,72(sp)
    ldw    r19,76(sp)
    ldw    r20,80(sp)
    ldw    r21,84(sp)
    ldw    r22,88(sp)
    ldw    r23,92(sp)
    ldw    r26,96(sp)
    ldw    r28,100(sp)
    ldw    r31,104(sp)
    ldw     ea,0(sp)        # Special case
    addi    sp,sp,108

    eret                    # Return from exception

#
# End of exception handling code.
#
################################################################

################################################################
#
# Startup code.
#
# When the system is started, Altera-supplied code initializes the
# Nios II CPU and cache memories, and then calls alt_main.
#

.global alt_main
alt_main:
    wrctl   status,r0       # Disable interrupts. status is register 0
    wrctl   ienable,r0      # Clear all bits in IENABLE. ienable is internal interrupt-enable bits

    # Now copy the stub.

    movia   r8,oslab_internal_stub
    movia   r9,de2_nios2_interrupt_address
    ldw     r10,0(r8)
    stw     r10,0(r9)
    ldw     r10,4(r8)
    stw     r10,4(r9)
    ldw     r10,8(r8)
    stw     r10,8(r9)

    # Initialize timer_1.

    movia   r8,de2_timer_1_base
    movia   r9,de2_timer_1_timeout_value
    srli    r10,r9,16
    stw     r10,12(r8)      # Write periodh
    andi    r10,r9,0xffff
    stw     r10,8(r8)       # Write periodl
    movi    r10,7           # Continuous, interrupt on timeout, and start
    stw     r10,4(r8)

    # Initialize CPU for interrupts from timer_1.

    movi    r10,de2_timer_1_intmask
    wrctl   ienable,r10
    movi    r10,1
    wrctl   status,r10

    # Call to main. Do not jump, main is a subroutine,
    # and may execute a ret instruction.

    subi    sp,sp,4
    stw     ra,0(sp)        # PUSH r31
    movia   r8,main
    callr   r8
    ldw     ra,0(sp)        # POP r31
    addi    sp,sp,4

    # If main returns, we will return directly to the routine
    # that called us (that called alt_main).

    ret

#
# End of startup code.
#
################################################################

################################################################
#
# Helper functions for initialization and thread handling.
#

.text
.align 2
.global oslab_internal_get_gp
oslab_internal_get_gp:
    mov     r2,gp
    ret

.global oslab_begin_critical_region
oslab_begin_critical_region:
    wrctl   status,r0
    ret

.global oslab_end_critical_region
oslab_end_critical_region:
    movi    r8,1
    wrctl   status,r8
    ret

.global oslab_get_internal_globaltime
oslab_get_internal_globaltime:
    movia   r2,oslab_internal_globaltime
    ldw     r2,0(r2)
    ret

.global oslab_get_internal_tickcount
oslab_get_internal_tickcount:
    movia   r2,oslab_internal_tickcount
    ldw     r2,0(r2)
    ret

.global oslab_yield
oslab_yield:
    trap
    ret

#
# End of helper functions.
#
################################################################
#
# ********************************************************
# *** You don't have to study the code below this line ***
# ********************************************************
#
################################################################
#
# A simplified printf() replacement.
# Implements the following conversions: %c, %d, %s and %x.
# No format-width specifications are allowed,
# for example "%08x" is not implemented.
# Up to four arguments are accepted, i.e. the format string
# and three more. Any extra arguments are silently ignored.
#
# The printf() replacement relies on routines
# out_char_uart_0, out_hex_uart_0,
# out_number_uart_0 and out_string_uart_0
# in file oslab_lowlevel_c.c
#
# We need the macros PUSH and POP - definitions follow.

# PUSH reg - push a single register on the stack

.macro PUSH reg
    subi sp,sp,4    # reserve space on stack
    stw  \reg,0(sp) # store register
.endm

# POP  reg - pop a single register from the stack

.macro POP  reg
    ldw  \reg,0(sp) # fetch top of stack contents
    addi sp,sp,4    # return previously reserved space
.endm

.text
.global printf
printf:
    PUSH    ra      # PUSH return address register r31.
    PUSH    r16     # R16 will point into format string.
    PUSH    r17     # R17 will contain the argument number.
    PUSH    r18     # R18 will contain a copy of r5.
    PUSH    r19     # R19 will contain a copy of r6.
    PUSH    r20     # R20 will contain a copy of r7.
    mov     r16,r4  # Get format string argument
    movi    r17,0   # Clear argument number.
    mov     r18,r5  # Copy r5 to safe place.
    mov     r19,r6  # Copy r6 to safe place.
    mov     r20,r7  # Copy r7 to safe place.
asm_printf_loop:
    ldb     r4,0(r16)   # Get a byte of format string.
    addi    r16,r16,1   # Point to next byte
    # End of format string is marked by a zero-byte.
    beq     r4,r0,asm_printf_end
    cmpeqi  r9,r4,92    # Check for backslash escape.
    bne     r9,r0,asm_printf_backslash
    cmpeqi  r9,r4,'%'   # Check for percent-sign escape.
    bne     r9,r0,asm_printf_percentsign
asm_printf_doprint:
    # No escapes present, just print the character.
    movia   r8,out_char_uart_0
    callr   r8
    br      asm_printf_loop
asm_printf_backslash:
    # Preload address to out_char_uart_0 into r8.
    movia   r8,out_char_uart_0
    ldb     r4,0(r16)   # Get byte after backslash
    addi    r16,r16,1   # Increase byte count.
    # Having a backslash at the end of the format string
    # is illegal, but must not crash our printf code.
    beq     r4,r0,asm_printf_end
    cmpeqi  r9,r4,'n'   # Newline
    beq     r9,r0,asm_printf_backslash_not_newline
    movi    r4,10       # Newline
    callr   r8
    br      asm_printf_loop
asm_printf_backslash_not_newline:
    cmpeqi  r9,r4,'r'   # Return
    beq     r9,r0,asm_printf_backslash_not_return
    movi    r4,13       # Return
    callr   r8
    br      asm_printf_loop
asm_printf_backslash_not_return:
    # Unknown character after backslash - ignore.
    br      asm_printf_loop
asm_printf_percentsign:
    addi    r17,r17,1   # Increase argument count.
    cmpgei  r8,r17,4    # Check against maximum argument count.
    # If maximum argument count exceeded, print format string.
    bne     r8,r0,asm_printf_doprint
    cmpeqi  r9,r17,1    # Is argument number equal to 1?
    beq     r9,r0,asm_printf_not_r5 # beq jumps if cmpeqi false
    mov     r4,r18      # If yes, get argument from saved copy of r5.
    br      asm_printf_do_conversion
asm_printf_not_r5:
    cmpeqi  r9,r17,2    # Is argument number equal to 2?
    beq     r9,r0,asm_printf_not_r6 # beq jumps if cmpeqi false
    mov     r4,r19      # If yes, get argument from saved copy of r6.
    br      asm_printf_do_conversion
asm_printf_not_r6:
    cmpeqi  r9,r17,3    # Is argument number equal to 3?
    beq     r9,r0,asm_printf_not_r7 # beq jumps if cmpeqi false
    mov     r4,r20       # If yes, get argument from saved copy of r7.
    br      asm_printf_do_conversion
asm_printf_not_r7:
    # This should not be possible.
    # If this strange error happens, print format string.
    br      asm_printf_doprint
asm_printf_do_conversion:
    ldb     r8,0(r16)   # Get byte after percent-sign.
    addi    r16,r16,1   # Increase byte count.
    cmpeqi  r9,r8,'x'   # Check for %x (hexadecimal).
    beq     r9,r0,asm_printf_not_x
    movia   r8,out_hex_uart_0
    callr   r8
    br      asm_printf_loop
asm_printf_not_x:
    cmpeqi  r9,r8,'d'   # Check for %d (decimal).
    beq     r9,r0,asm_printf_not_d
    movia   r8,out_number_uart_0
    callr   r8
    br      asm_printf_loop
asm_printf_not_d:
    cmpeqi  r9,r8,'c'   # Check for %c (character).
    beq     r9,r0,asm_printf_not_c
    # Print character argument.
    br      asm_printf_doprint
asm_printf_not_c:
    cmpeqi  r9,r8,'s'   # Check for %s (string).
    beq     r9,r0,asm_printf_not_s
    movia   r8,out_string_uart_0
    callr   r8
    br      asm_printf_loop
asm_printf_not_s:
asm_printf_unknown:
    # We do not know what to do with other formats.
    # Print the format string text.
    movi    r4,'%'
    movia   r8,out_char_uart_0
    callr   r8
    ldb     r4,-1(r16)
    br      asm_printf_doprint
asm_printf_end:
    POP     r20
    POP     r19
    POP     r18
    POP     r17
    POP     r16
    POP     ra
    ret

#
# End of simplified printf() replacement code.
#
################################################################
.end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T02:20:28.403

先说“语境”；那么陷阱就很容易理解了。

当您编写传统的汇编代码时，您最终会用对代码的那部分重要的值填充各种寄存器。

子程序调用是明确指定要调用的子程序的位置的特殊指令，通常直接指定子程序的地址。当该代码调用子例程时，子例程调用本身将程序计数器保存在某个众所周知的位置，以便子例程在完成时可以将 PC 设置为保存的 PC，从而将控制权返回给调用点。

在子程序完成后，在子程序调用点已填充的寄存器包含相同的值通常很有用。子程序本身可能会损坏其中的一些或大部分，并且通常不知道在调用点什么是重要的。为了保存已经填充的寄存器，程序员可以在调用指令之前插入指令以将这些寄存器保存在安全的地方，并在程序员调用之后插入以恢复保存的寄存器。有时甚至控制处理器状态的条件代码或其他模式位（在 x86 上，“方向”位就是其中之一）需要保存和恢复。

所有这些要保存的信息都是子程序调用时计算的“上下文”。

保存的 PC 和其他寄存器的存储位置通常位于由机器管理的下推堆栈上，或者仅由（但有用的）编程约定管理。在没有堆栈或没有广泛使用这种约定的机器上，这些位置可以只是程序员选择的位置。重要的是在某处留出空间来存储“上下文”，并从中恢复上下文。

陷阱现在很容易理解。陷阱*指令*（或所谓的“软件中断”）就像子程序调用一样工作，只是目标位置没有直接编码到陷阱中。陷阱指令类似于调用指令，其中有一个操作码，可能还有一个操作数字段来区分陷阱。程序员可以在他的代码中放置这样的陷阱，以使陷阱例程（无论它可能是什么，通常是操作系统服务函数）运行。因此，就像子程序调用一样，它将 PC 保存在安全的地方。可以坚持让程序员决定在陷阱调用之前/之后保存/恢复哪些寄存器/上下文。但是，陷阱例程通常由程序员构建，与编写陷阱调用的程序员无关，并且通常执行复杂的任务，供大量受众使用，因此方便是关键。*所有*寄存器、条件代码和模式位（“完整上下文”），完成其工作（修改保存的完整上下文以显示任何结果），恢复完整上下文，并将控制权交还给调用者；因此用户程序员可以方便地不必做这项工作。这是非常有用和常见的，以至于许多处理器为陷阱提供了特殊的支持，这会导致上下文的关键部分被保存（其余的由陷阱例程完成）。

因此，陷阱很容易使用：只需在可能已经编写了对服务的子例程调用进行编码的地方对它们进行编码，然后它们的效果就会发生。（通常陷阱例程提供者必须在硬件的某个地方设置特殊向量，陷阱指令会自动使用这些向量来查找陷阱例程。这一切都在用户程序启动之前完成）。

A *trap* (note: not instruction!) is an action which occurs because of program condition. For instance, if the user program divides by zero, the CPU may force an implied trap call to a special routine to handle division by zero. (It may patch up the result, or abort the program, or do whatever else is deemed useful). Such a trap works just trap instruction; the particular vector it chooses is usually determined by the specific trap condition. Note that traps occur synchronously with respect to the stream of instructions seen by the processor, as provided by the programmer. Notice also that for traps one cannot conveniently establish user-level context saves and restores, especially if the variety of traps is wide and varied. Thus for such traps, the context save/restore is virtually always done by the trap routine.

（硬件）*中断*是一个异步事件。它被实现为程序指令流中任意位置的陷阱。通过保存完整的上下文，中断的陷阱例程（称为“中断例程”）可以处理异步条件（服务磁盘等），恢复完整的上下文，并且用户代码可以继续，就好像中断已经从未发生过。

因此，陷阱基本上只是保存和恢复上下文的子程序调用。问题是，它何时会发生，保存/恢复了多少上下文，以及谁来进行保存/恢复。

# c - 无法交换数组 [2][2] 中的行。似乎它做了一些超出数组的事情

> ID：15593591
> 
> 赞同：1
> 
> 时间：2013-03-24T00:11:42.270
> 
> 标签：c, arrays

无法交换数组 [2][2] 中的行。似乎它做了一些超出数组的事情。*（我怀疑这段代码已经疯了（疯了）*

**1）**我打印它。**2）** *尝试交换*（认为问题就在附近）。**3)**我再打印一次。（但现在元素的值不像以前那样了）

```
#include <stdio.h>#
#include <stdlib.h>
#include <time.h>
#define RANGE 99

int main()
{
    int l1,l2;
    int i,j;
    int arr[2][2];       // There should be arr[3][3]. FOR MORE 
    int temp_line[2];    // DETAILS SEE THE ACCEPTED ANSWER.

    srand((unsigned)time(NULL));

    /* Filling in */
    for (i = 0; i <= 2; i++)
    {
        for (j = 0; j <= 2; j++)
            arr[i][j] = 1 + rand()%RANGE;
        printf("\n");
    }

    /* Displaying */
    for (i = 0; i <= 2; i++)
    {
        for (j = 0; j <= 2; j++)
            printf("%2.d ", arr[i][j]);
        printf("\n");
    }

    printf("\nEnter the No. of lines to swap them.\n"); // Remember about the 0th element.
    scanf("%d%d", &l1, &l2);   // The 1-st and the 2-nd lines.

    /** Swapping lines. PROBLEM!  */
    for (j = 0; j <= 2; j++)
            temp_line[j] = arr[l1][j];  // Remember the 1-st required line.

    for (j = 0; j <= 2; j++)
        arr[l1][j] = arr[l2][j];    // Copying each element of the 2-nd required line 1-st one.

    for (j = 0; j <= 2; j++)
        arr[l2][j] = temp_line[j];  //  Copying "Remembered" 1-st required line.

    /* Displaying */
    for (i = 0; i <= 2; i++)
    {
        for (j = 0; j <= 2; j++)
            printf("%2.d ", arr[i][j]);
        printf("\n");
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:17:14.137

您的 3x3 数组应声明为：

```
int arr[3][3];  // Array 3x3 
```

声明数组时，数字表示要分配多少“槽”。由于您想要一个 3x3 数组，因此您需要指定一个`3`.

访问数组时，您指定索引。索引从 0 开始，因此如果要访问第一个元素，请使用`0`.

计数和索引是两个不同的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:16:33.070

该数组有 2 个元素，但有`for (i = 0; i <= 2; i++)`您在末尾迭代一个。

一定是 `for (i = 0; i < 2; i++)`。

# r - RgoogleMaps 文本未显示

> ID：15593594
> 
> 赞同：1
> 
> 时间：2013-03-24T00:11:49.210
> 
> 标签：r, rgooglemaps

我正在尝试注释使用 RgoogleMaps 包制作的绘图，但未显示文本。这是代码：

```
library(RgoogleMaps)
library(PBSmapping)
library(maptools)

lat <- c(6,37.5)
lon <- c(67,98)
center = c(mean(lat), mean(lon))
zoom <- 4

terrmap <- GetMap(center=center, size=c(440,440), maptype="terrain", 
zoom=zoom, path="&style=feature:all|element:labels|visibility:off", 
destfile="/home/simon/Rplots/india_terrain.png") 
png(filename="/home/simon/Rplots/india_terrain2.png", width=175, height=175, 
units="mm", pointsize=12, bg="transparent", res=240)
PlotOnStaticMap(terrmap, lat=85,lon=32.5, add=FALSE, FUN=text,labels="Bhimgodha basin")
dev.off() 
```

谁能看到出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:43:44.317

一切正常，您只需**调整纬度/经度**即可。

交换`lat`，`lon`你会看到你的文字

```
 PlotOnStaticMap(terrmap, lon=85,lat=32.5, add=FALSE, FUN=text, labels="Bhimgodha basin") 
```

* * *

作为一般的经验法则，调试时`PlotOnStaticMap`：如果您没有收到任何错误，那么这些图可能会出现在视野之外。检查你的坐标，一切都应该很好

# sql - INSERT INTO 语句访问 VBA

> ID：15593596
> 
> 赞同：0
> 
> 时间：2013-03-24T00:12:14.617
> 
> 标签：sql, vba, button, insert, command

好的，我对 Access 还很陌生。我试图完成的是使用命令按钮将短文本插入表中的特定字段。例如，在我的主表单中，我想要一个命令按钮，当按下它时，将文本“A1”插入到我的主库存表的位置字段中。我尝试使用 INSERT INTO 语句来完成此操作，但我没有运气。这是最好的方法，还是有更简单的方法？如果这是最好的方法，那我做错了什么？这是我使用的代码：

```
'add data to Master Inventory Table
CurrentDb.Execute "INSERT INTO MasterInventoryTable (Location) " & _
" VALUES ('A1') " 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:38:18.927

我认为您的上述语法没有任何问题。尝试做的是在 MasterInventoryTable 表中插入一个新行，并将 Location 字段设置为“A1”。

我的猜测是您在该表中有其他列阻止该语句运行（您收到什么错误）。检查您的表格设计，看看是否需要任何其他字段。

# c# - 将参数传递给getter/setter？

> ID：15593597
> 
> 赞同：1
> 
> 时间：2013-03-24T00:12:43.373
> 
> 标签：c#, parameter-passing, getter-setter

我有一个子类将参数传递给超类，如下所示：

```
public int CountMenuItems(List<string> Items)
{    
    //Returns sub-class total item count
    return Items.Count;
} 
```

我所有的子类都将使用上面的代码。

现在，我在超类中有这个：

```
public int Iterator
{
    get
    {
        return iterator;
    }
    set
    {
        iterator = value;
        if (iterator > <Count list here>  - 1) iterator = 0;
        if (iterator < 0) iterator = <Count list here>  - 1;
    }
} 
```

我想从 CountMenuItems() 方法中获取参数值并将其放入 getter/setter 中。

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:29:50.710

在你的超类中声明另一个属性是 List 然后在那里引用它呢？

```
public int Iterator
{
    get
    {

        return iterator;
    }
    set
    {
        iterator = value;
        if (iterator > Items.Count  - 1) iterator = 0;
        if (iterator < 0) iterator = Items.Count  - 1;
    }
}

public List<string> Items
{
    get; set;
} 
```

在引用迭代器之前，只需在子类中设置超类中的属性即可。

```
var yourClass = new YourClass();
yourClass.Items = items;
yourClass.Iterator = 500;
Console.Write(yourClass.Iterator.ToString()); 
```

另一种选择是创建一个新的构造函数，它将 List 项作为参数并在构造函数中设置您的属性。

# audio - WP8在锁屏下播放音频

> ID：15593600
> 
> 赞同：0
> 
> 时间：2013-03-24T00:12:50.263
> 
> 标签：audio, background, windows-phone-8

我看到诸如白噪声和睡眠之类的应用程序会播放音频，并且在屏幕锁定后音频继续播放。应用程序不使用 WP 音频播放代理，因为通用音量控制不可用。

我正在尝试重新创建所述功能，但我阅读的每个线程要么是关于 WP 音频播放代理，要么是关于 UserIdleDetectionMode = IdleDetectionMode.Disabled，它们都没有重新创建我正在寻找的内容。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:39:41.183

我在发布后几分钟就找到了答案，但我不会让我回答我自己的问题。

ApplicationIdleDetectionMode = IdleDetectionMode.Disabled 成功了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:37:24.627

使用背景`AudioPlayerAgent`并将设置`PlayerControls`为。`AudioTrack``EnabledPlayerControls.None`

[EnabledPlayerControls 枚举](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.backgroundaudio.enabledplayercontrols%28v=vs.105%29.aspx)

我现在无法检查，这可能只是禁用它们，但这是另一种选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T00:30:03.460

> 应用程序不使用 WP 音频播放代理

看来你已经知道答案了。如果您想在锁定屏幕下播放音频，您可以使用音频播放代理。

# hadoop - 在 Hadoop MapReduce 中将 RecordReader 上下文设置为段落

> ID：15593601
> 
> 赞同：0
> 
> 时间：2013-03-24T00:12:54.963
> 
> 标签：hadoop, mapreduce

我想编写自己的 RecordReader，它以整个段落的形式返回上下文，而不是 TextInputFormat 中的一行。

我尝试了以下功能，但绝对是它的**方式**

```
public boolean nextKeyValue() throws IOException, InterruptedException {
    if (key == null) {
        key = new LongWritable();
    }
    key.set(pos);
    if (value == null) {
        value = new Text();
    }
    value.clear();
    final Text endline = new Text("\n");
    int newSize = 0;

        Text v = new Text();
        while (v!= endline) {
            value.append(v.getBytes(),0, v.getLength());
            value.append(endline.getBytes(),0, endline.getLength());
            if (newSize == 0) {
                break;
            }
            pos += newSize;
            if (newSize < maxLineLength) {
                break;
            }
        }
    if (newSize == 0) {
        key = null;
        value = null;
        return false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-08T01:06:58.307

您实际上不需要努力编写自己的 RecordReader。相反，只需扩展 TextInputFormat 并更改分隔符。以下是 TextInputFormat 的库代码，仅更改了分隔符：

```
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.InputSplit;
import org.apache.hadoop.mapreduce.JobContext;
import org.apache.hadoop.mapreduce.RecordReader;
import org.apache.hadoop.mapreduce.TaskAttemptContext;
import org.apache.hadoop.mapreduce.lib.input.LineRecordReader;
import org.apache.hadoop.mapreduce.lib.input.TextInputFormat;

import com.google.common.base.Charsets;

public class ParagraphInputFormat
extends TextInputFormat {
    private static final String PARAGRAPH_DELIMITER = "\r\n\r\n";

    @Override
    protected boolean isSplitable(JobContext context, Path file) {
        return false;
    }

    @Override
    public RecordReader<LongWritable, Text>
    createRecordReader(InputSplit split, TaskAttemptContext context) {
        String delimiter = PARAGRAPH_DELIMITER;
        byte[] recordDelimiterBytes = null;
        if (null != delimiter) {
            recordDelimiterBytes = delimiter.getBytes(Charsets.UTF_8);
        }
        return new LineRecordReader(recordDelimiterBytes);
    }
} 
```

# jquery - 有什么办法可以让fancybox切换大小按钮，在新窗口中打开完整图像？

> ID：15593603
> 
> 赞同：0
> 
> 时间：2013-03-24T00:13:03.510
> 
> 标签：jquery, fancybox, fancybox-2

我正在使用最新的带有按钮助手的fancybox；有什么办法可以让切换大小按钮在新窗口中单独启动图像，而不是在fancybox中显示完整图像？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T10:37:56.113

如果我理解您的问题，单击*切换大小按钮助手*应该在新的浏览器窗口/选项卡中打开当前图像，对吗？

如果是这样，首先考虑fancybox切换大小按钮帮助器html结构：

```
<a href="javascript:;" title="Toggle size" class="btnToggle"></a> 
```

选择器`.btnToggle`在 fancybox 脚本中绑定到一个切换当前图像大小的函数，并且更改该行为可能非常棘手（取消绑定/销毁该函数并分配一个新函数等）

我会做的是

1）。用另一个类克隆切换按钮助手（我将调用它`.btnToggleClone`）并将其 css 属性设置为与原始类完全相同，`.btnToggle`以便它可以使用相同的图像精灵 (./helpers/fancybox_buttons.png)：

```
#fancybox-buttons a.btnToggleClone {
    background-position: 3px -60px;
    border-left: 1px solid #111111;
    border-right: 1px solid #3E3E3E;
    width: 35px;
} 
```

2）。将事件绑定到新类以在新窗口`click`中打开当前图像 ( )：`el`

```
$("body").on("click", ".btnToggleClone", function () {
    window.open(el);
}); 
```

**请注意**，我使用`.on()`的是委托形式，因此我的类将绑定到任何当前或未来的 DOM 元素（打开 fancybox 时，按钮助手会动态附加到 DOM。）

参数`el`（元素）将通过一个fancybox回调传递（见下文）

3）。使用 API 选项将我的新*类*放入fancybox 按钮助手模板中，`tpl`例如：

```
helpers: {
    buttons: {
        // replace the class "btnToggle" by "btnToggleClone" 
        tpl: '<div id="fancybox-buttons"><ul><li><a class="btnPrev" title="Previous" href="javascript:;"></a></li><li><a class="btnPlay" title="Start slideshow" href="javascript:;"></a></li><li><a class="btnNext" title="Next" href="javascript:;"></a></li><li><a class="btnToggleClone" title="Toggle size" href="javascript:;"></a></li><li><a class="btnClose" title="Close" href="javascript:jQuery.fancybox.close();"></a></li></ul></div>'
    }
} 
```

4）。`el`在 fancybox`afterShow`回调中传递参数，例如：

```
afterShow: function () {
    el = $(this.element).attr("href");
} 
```

`$(this.element).attr("href")`目标图像 URL在哪里。

一共？

```
$(".fancybox").fancybox({
    closeBtn: false,
    helpers: {
        buttons: {
            // replace class "btnToggle" by "btnToggleClone" 
            tpl: '<div id="fancybox-buttons"><ul><li><a class="btnPrev" title="Previous" href="javascript:;"></a></li><li><a class="btnPlay" title="Start slideshow" href="javascript:;"></a></li><li><a class="btnNext" title="Next" href="javascript:;"></a></li><li><a class="btnToggleClone" title="Toggle size" href="javascript:;"></a></li><li><a class="btnClose" title="Close" href="javascript:jQuery.fancybox.close();"></a></li></ul></div>'
        }
    },
    afterShow: function () {
        el = $(this.element).attr("href");
    }
}); 
```

见**[JSFIDDLE](http://jsfiddle.net/mcgrE/)**

**注意**：`.on()`需要 jQuery v1.7+

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:32:31.707

我不确定切换大小按钮如何出现在页面上，但一个简单的 jQ 解决方案可能类似于下面的代码。

```
$('.sizeButton').on('click',function(e){
   e.preventDefault();
   activeImgURL = $('.fancybox-inner img').attr('src');
   window.open(activeImgURL);
}); 
```

只是一个想法....**编辑** [这里是一个小提琴](http://jsfiddle.net/wCQqg/1/)。

**编辑 2--------------**

好的，我看到了这个问题，因为第一次加载页面时元素不存在，您必须将处理程序绑定到尚未创建的任何元素的类。

请查看[您的 zip 的此编辑版本](http://goo.gl/3OfD7)。

我添加的只是第 125 行的以下代码。

```
$('body').on('click','.btnToggle' ,function(e){
   e.preventDefault();
   activeImgURL = $('.fancybox-inner img').attr('src');
   window.open(activeImgURL);
}); 
```

# asp.net - Response.Flush 在 Windows Vista、7、8 上为页面写入 HTML，但在 Server 2008 上不写入

> ID：15593607
> 
> 赞同：0
> 
> 时间：2013-03-24T00:13:18.153
> 
> 标签：asp.net, html, download, response, flush

我正在从页面上的链接生成 CSV 并将其发送回用户。我希望维护页面上下文。这段代码在我的 2008 Dev box 上完美地运行在 IE、Chrome 和 Firefox 上，但是当在 Vista、Win 7 或 Win 8 上运行时，该文件会附加页面的 HTML。

我对传递文件的方法进行了相当多的阅读，并得出结论，response.flush() 是最好的方法。

```
 // Convert to Bytes for Binary Write
        Byte[] bytes = Utils.Instance.ReadStreamToByte(streamWriter.BaseStream);

        // Call ContentType followed by clear so no extraneous content is sent. see http://msdn.microsoft.com/en-us/library/system.web.httpresponse.aspx
        HttpContext.Current.Response.ContentType = "text/csv";
        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.AppendHeader("content-length", bytes.Length.ToString());
        HttpContext.Current.Response.AppendHeader("content-Disposition", "attachment;filename=" + "MyAccount Sales Report " + MonthDDL.SelectedItem.Text + "-" + YearDDL.SelectedItem.Text + ".csv");
        HttpContext.Current.Response.BinaryWrite(bytes);
        HttpContext.Current.Response.Flush(); 
```

我已经搜索了为什么会发生这种情况，但尚未找到任何相关帮助。我确实改变了 Clear(); 的位置；根据上面评论中列出的 Microsoft 文章，但这没有影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:54:07.237

在刷新后添加了 Response.End() ，它似乎对事件发布后页面的操作没有不利影响。为什么 Server 2008 的行为不同，仍然有点神秘！

# javascript - 使用 Mocha 测试一个 Brunched 应用程序并包括 shims

> ID：15593613
> 
> 赞同：1
> 
> 时间：2013-03-24T00:14:02.187
> 
> 标签：javascript, backbone.js, mocha.js, amd, brunch

我正在尝试使用 Mocha 测试我的 Brunch+Backbone 应用程序

一个`require`各种各样的摩卡规格`devDependencies`工作正常。只要我调整变量，`requires`我的应用程序和模块就可以工作的 Mocha 规范`devDependencies``NODE_PATH`

```
> NODE_PATH=./app mocha
:) 
```

当我的d 应用程序模块需要从文件夹`require`中填充的代码时，就会发生故障。`vendor/scripts`这些对`require`系统来说根本不可用，我不清楚如何在加载我的应用程序代码*之前将它们纳入范围。*

我可以尝试`brunch test`在较新的版本中使用，但截至今天似乎已被破坏。我收到一个错误，抱怨`test.js`该函数`helpers.findTestFiles`不存在。该问题已提交，但它让我相信早午餐没有坏，我只是做错了事。

使用 Mocha 测试使用 AMD 要求和填充供应商脚本（jQuery、Lodash、Backbone、Marionette）的早午餐应用程序的*正确方法是什么？*

# css - 在没有编译器的情况下如何在 Joomla 中使用 CSS LESS？

> ID：15593616
> 
> 赞同：0
> 
> 时间：2013-03-24T00:15:16.043
> 
> 标签：css, joomla, less, interpreted-language

我有一个要转换为 Joomla 模板的网页。我正在使用 LESS 文件并允许它在运行时解释而不是编译它。我看到 Joomla 具有 LESS 功能，甚至拥有运行 LESS 的所有库。问题是，无论我将 less.js 指向哪里，它都不起作用。我什至将 less.js 上传到模板文件夹和默认的 joomla 文件夹中，并指向每个位置，但它仍然无法正常工作。我不想使用编译器，至少现在不想，因为我仍然在搞乱布局和颜色等，这将是我现在不想处理的额外的几个步骤。

是否可以在 Joomla 上解释性地运行 LESS，还是只允许通过编译器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:55:26.607

有一个系统插件，如果发生变化，它会自动编译服务器上的 LESS 文件并从中生成 CSS。然后，您只需在模板中包含已编译的 CSS。该插件在 JED 上：[http ://extensions.joomla.org/extensions/miscellaneous/development/22424](http://extensions.joomla.org/extensions/miscellaneous/development/22424)

这也可能满足您的需求，并且最终可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:25:19.920

这里有几种可能性。

1.  如果您的 less.js 不起作用，请将路径更改为绝对路径 src="http://www.yourdomain.com/js/less.js" 而不是 "../../js/less.js"

2.  还要检查加载脚本时的顺序，您需要先加载 less.js，然后再加载 less 文件。

重要提示：使用 less.js 或任何实时解释器会降低性能，如果用户禁用 JavaScript，您的网站将根本没有布局。

如果您改变了对编译器的看法，那么适用于 windows 和 mac 的编译器都会在您保存 less 文件后立即自动更新您的 css 文件。

# c# - 呈现多个sql表

> ID：15593618
> 
> 赞同：1
> 
> 时间：2013-03-24T00:15:37.057
> 
> 标签：c#, winforms, tsql, linq-to-sql

抱歉，如果以前有人问过这个问题，但我在任何地方都找不到我要找的东西。

**设置：**我有一个带有 3 个表的 MS SQL 数据库

**表**- FoodInfo
**列**- FoodId(PK)、DanName

**表**- CompName
**列**- CmpId(PK)、CmpName

**表**- 营养素（连接表）
**列**- FoodId(FK)、CmpId(fk)、BestLoc

对于每个 DanName 行，关联大约 8 个 CmpName，对于每个 CmpName，关联 1 个 BestLoc

当我在我的 winform 中显示数据时，这导致 DanName 重复 8 次。

问题是，我想在一行中显示 DanName 以及相关的 CmpName 及其值。

类似于：DanName - CmpName1 - BestLoc 值 - CmpName2 - BestLoc 值 - CmpName3 - BestLoc 值..等等。

我对解决方案非常灵活，但我不确定要遵循什么路径。我应该尝试在数据库中创建一个看起来像我想要的表并将其放入 DataGridView 中，还是应该尝试使用 Linq-To-SQL 解决它并将其放入列表视图中？

如前所述，我对解决方案非常灵活，我只是不希望文本框中的数据。我还希望可以使用我检索到的数据并在我的程序的其他地方使用它。

如果有人有解决方案，我很乐意看到一个例子。

**编辑：** 更详细一点，并带有一些代码示例。

我的 DAL 类与 linq

```
void bw_DoWork(object sender, DoWorkEventArgs e)
{
    Table<FoodInfo> FoodInfo = db.GetTable<FoodInfo>();
    Table<CompName> CompName = db.GetTable<CompName>();
    Table<Nutrient> Nutrients = db.GetTable<Nutrient>();

    var foods =
        from compname in CompName
        join nutrients in Nutrients on compname.CompId equals nutrients.CompId
        join foodinfo in FoodInfo on nutrients.FoodId equals foodinfo.FoodId
        where foodinfo.DanName.StartsWith(searchWord) && (compname.CompId >= 0
                                                      && compname.CompId < 8)
        select new { foodinfo.DanName, compname.CmpNamDK, nutrients.BestLoc };

    foreach (var food in foods)
    {
        DanName = food.DanName;
        Compname = food.CmpNamDK;
        BestLoc = food.BestLoc;

        OnSearchResultArgs OSR = new OnSearchResultArgs(DanName, Compname, BestLoc);
        onResult(this, OSR);
    }
} 
```

它在我的表单中触发一个事件处理程序并发送结果并执行此代码：

```
listView1.FullRowSelect = true;
listView1.Columns.Add("DanName", 100);
listView1.Columns.Add("CompName", 150);
listView1.Columns.Add("BestLoc", 50);

private void UpdateControls(object sender, OnSearchResultArgs e)
{
    var item = new ListViewItem();
    item.Text = e.DanName;
    item.SubItems.Add(e.CompName);
    item.SubItems.Add(e.BestLoc);
    listView1.Items.Add(item);
} 
```

UpdateControl 正在被调用，但我认为没有必要将其放在这里。

通过这个我得到以下信息：
![](../Images/7699ff7683d0b60b70a9e9b647de9507.png)

我想把这 8 行变成 1 行。喜欢：
![](../Images/04a4b008b82c336bfd42fdc4ecbcc601.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:07:50.630

我有两个解决方案，都有各自的缺点。

第一个解决方案是手动旋转数据，但这不是很动态，因为如果您开始拥有超过 8 个 CmpName，则必须更改查询，而第二个解决方案是将所有 CmpName 和 BestLoc 值放在一个列中。

下面的 T-SQL 应该演示这两种解决方案。

```
--** Set up test data
DECLARE @FoodInfo Table (FoodId INT, DanName varchar(50));
DECLARE @CompName TABLE (CmpId INT, CmpName VARCHAR(50));
DECLARE @Nutrients TABLE (FoodId INT , CmpId INT, BestLoc VARCHAR(50));

INSERT INTO @FoodInfo (FoodId, DanName)
VALUES  (1, 'Abrikos, torret');

INSERT INTO @CompName (CmpId, CmpName)
VALUES  (1, 'Energi'),(2, 'Protein, total'),(3, 'total-N'),(4, 'Fedt, total'),(5, 'Maettede fedtsyrer'),(6, 'monoumaett, fedtsyrer'),(7, 'polyumaett, fedtsyrer'),(8, 'kulhydrat, tilgaengelig');

INSERT INTO @Nutrients(FoodId, CmpId, BestLoc)
VALUES  (1,1,1159),(1,2,2.9),(1,3,0.5),(1,4,1.7),(1,5,0.1),(1,6,0.6),(1,7,0.6),(1,8,57.2);

--** Standard query
SELECT fi.DanName
     , cn.CmpName
     , n.BestLoc
  FROM @FoodInfo AS fi
  JOIN @Nutrients AS n
    ON fi.FoodId = n.FoodId
  JOIN @CompName AS cn
    ON n.CmpId = cn.CmpId;

--** Manual Pivot
WITH sortCTE AS (
        SELECT fi.DanName
             , cn.CmpName
             , n.BestLoc
             , ROW_NUMBER() OVER (PARTITION BY fi.FoodId ORDER BY cn.CmpId) AS 'col'
          FROM @FoodInfo AS fi
          JOIN @Nutrients AS n
            ON fi.FoodId = n.FoodId
          JOIN @CompName AS cn
            ON n.CmpId = cn.CmpId)
SELECT s.DanName
     , MAX(CASE WHEN s.col = 1 THEN s.CmpName END) AS Cmp1
     , MAX(CASE WHEN s.col = 1 THEN s.BestLoc END) AS BestLoc1
     , MAX(CASE WHEN s.col = 2 THEN s.CmpName END) AS Cmp2
     , MAX(CASE WHEN s.col = 2 THEN s.BestLoc END) AS BestLoc2
     , MAX(CASE WHEN s.col = 3 THEN s.CmpName END) AS Cmp3
     , MAX(CASE WHEN s.col = 3 THEN s.BestLoc END) AS BestLoc3
     , MAX(CASE WHEN s.col = 4 THEN s.CmpName END) AS Cmp4
     , MAX(CASE WHEN s.col = 4 THEN s.BestLoc END) AS BestLoc4
     , MAX(CASE WHEN s.col = 5 THEN s.CmpName END) AS Cmp5
     , MAX(CASE WHEN s.col = 5 THEN s.BestLoc END) AS BestLoc5
     , MAX(CASE WHEN s.col = 6 THEN s.CmpName END) AS Cmp6
     , MAX(CASE WHEN s.col = 6 THEN s.BestLoc END) AS BestLoc6
     , MAX(CASE WHEN s.col = 7 THEN s.CmpName END) AS Cmp7
     , MAX(CASE WHEN s.col = 7 THEN s.BestLoc END) AS BestLoc7
     , MAX(CASE WHEN s.col = 8 THEN s.CmpName END) AS Cmp8
     , MAX(CASE WHEN s.col = 8 THEN s.BestLoc END) AS BestLoc8
  FROM sortCTE AS s
 GROUP BY s.DanName;

--** All in one column
SELECT fi.DanName
     , ISNULL(SUBSTRING((SELECT ', ' + cn.CmpName + ' - ' + CONVERT(VARCHAR(8), n.BestLoc)
                           FROM @Nutrients AS n
                           JOIN @CompName AS cn
                             ON n.CmpId = cn.CmpId
                          WHERE fi.FoodId = n.FoodId
                       ORDER BY cn.CmpId ASC FOR XML PATH('') ), 3, 5000), '') AS 'Cmp'
  FROM @FoodInfo AS fi; 
```

很抱歉，但我不知道 LINQ 中的等效查询是什么样的，但这可以让您了解您的目标。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T11:11:14.697

如果有人遇到与我相同的问题，请进行更新。

首先，我使用 T-SQL 尝试了@JonPayne 的解决方案。它解决了我的问题，但对我来说工作得非常慢。可能我做错了。我不知道。

我最终从我在这里找到的指南中制作了一个枢轴方法：http: [//www.codeproject.com/Articles/22008/C-Pivot-Table](http://www.codeproject.com/Articles/22008/C-Pivot-Table)

非常简单，我从 SQL-Server 查询我的无序数据，将其放入数据表中并使用数据透视方法格式化数据表，该方法返回有序数据表。

# android - 使用放置在列表视图中的按钮从数据库中删除产品（不在列表视图中显示）

> ID：15593628
> 
> 赞同：0
> 
> 时间：2013-03-24T00:17:03.367
> 
> 标签：android

我的问题出在标题中（我一直在寻找关于 stackoverflow 的答案，但在我的情况下没有解决方案）。我一直在尝试使用`setOnItemClickListener`，但是单击 row in`ListView`什么也没做。我也尝试过使用`myClick()`- 这是单击按钮时的操作，但在这里我不知道如何将单击的按钮与数据库中的行连接起来。

我的布局活动：http: [//pastebin.com/6KLBm80Q](http://pastebin.com/6KLBm80Q)

数据库类 + 适配器 + listview 行的布局 [http://pastebin.com/G2HufNgS](http://pastebin.com/G2HufNgS)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:29:12.243

您必须`getView()`在您的`Adapter`和设置`setOnClickListener()`（和/或`setOnLongClickListener()`）中覆盖列表项中的项目。该项目将获得点击。

# javascript - jQuery - 返回 0 或 -1 的索引

> ID：15593635
> 
> 赞同：0
> 
> 时间：2013-03-24T00:17:42.210
> 
> 标签：javascript, jquery

我遇到了麻烦，使用 jQuery .index() 函数。所以我想做的是，当我点击 span(.edit) 时，我想提醒输入字段的索引（上面一个）。我正在测试一些东西，并且 index() 总是返回 0 或 -1。

```
<div id="wrapper">
    <input class="editInput" type="text" />
    <span>Mr. Foo</span>
    <div>
        <span class="edit">Full name</span>
    </div>

    <input class="editInput" type="text" />
    <span>Foo Town</span>
    <div>
        <span class="edit">City</span>
    </div>
</div> 
```

jQuery 语句

```
$(".edit").click(function(){
    alert($(this).parent().siblings(".editInput").index());
} 
```

我尝试了很多类似的东西，但都没有奏效。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:23:46.860

`$(this).parent().siblings(".editInput")`在这种情况下将选择所有`.editInput`元素，并且`.index()`不带参数调用将获得第一个选定元素（第一个`.editInput`元素）相对于其兄弟元素的位置，该兄弟元素将始终`0`在此处。

* * *

如果要获取输入元素相对于其他输入元素的索引，则必须首先选择所有元素：

```
var $inputs = $('#wrapper .editInput'); 
```

`input`然后，您必须从 clicked中找到最接近的前一个元素`span`，您可以使用[`.prevAll` *^([docs])*](http://api.jquery.com/prevAll/)和[`.first` *^([docs])*](http://api.jquery.com/first/)执行此操作：

```
var $closest_input = $(this).parent().prevAll('.editInput').first(); 
```

然后在元素集上调用[`.index` *^([docs])*](http://api.jquery.com/index/)`input`，传递刚刚找到的`input`：

```
var index = $inputs.index($closest_input); 
```

以这种方式调用时，`.index`将返回所选元素集中传递的元素的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:22:54.307

尝试

```
$("span.edit").click(function(){
    $(this).closest("#wrapper").find(".editInput").each(function(){
        alert($(this).index(":parent .editInput"));
    });
}); 
```

[http://jsfiddle.net/XZEAS/1](http://jsfiddle.net/XZEAS/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T00:23:04.477

```
$("span.edit").click(function(){
    alert($(this).parent().siblings(".editInput").index());
}); 
```

这是你想要做的吗？

[http://jsfiddle.net/uJsg8/](http://jsfiddle.net/uJsg8/)

# sql - 如何识别触发了哪个触发器（更新或删除）

> ID：15593636
> 
> 赞同：4
> 
> 时间：2013-03-24T00:17:42.503
> 
> 标签：sql, triggers

如果我使用的触发器在我的付款表的每次更新或删除时触发，我如何识别发生的触发器类型（如果我解释更多，由于更新记录或删除记录而调用的触发器函数。）

因为我需要将这些信息存储在我的另一张桌子上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T07:58:18.767

**说明**：向表中插入数据时，只有 'inserted' 有新插入的行；当您从表中删除数据时，只有“已删除”具有已删除的行；当您更新表时，“插入”保存新行，“删除”保存旧行。

我认为这个样本可以给你一个提示。（SQL Server 2012）
**示例：**
示例表定义：

```
 create table Customer (
          ID int identity(1,1) not null, 
          FirstName varchar(30), 
          LastName varchar(30)) 
```

扳机：

```
 CREATE TRIGGER TrackAction
ON Customer
AFTER INSERT, UPDATE, DELETE
AS 
BEGIN
   DECLARE @DELETEDCOUNT INT
   DECLARE @INSERTEDCOUNT INT
   SELECT @DELETEDCOUNT = COUNT(*) FROM deleted
   SELECT @INSERTEDCOUNT = COUNT(*) FROM inserted
   IF(@DELETEDCOUNT&@INSERTEDCOUNT > 0 )
       PRINT 'Trigger by update action'
   ELSE IF (@DELETEDCOUNT > 0 )
       PRINT 'Trigger by delete action'
   ELSE IF (@INSERTEDCOUNT > 0 )
       PRINT 'Trigger by insert action'
END
```

测试代码：

```
 insert into Customer 
values ('Bob','Ryan')
update customer 
set FirstName = 'Bob Jr.'
where FirstName = 'Bob'
delete customer 
where FirstName = 'Bob Jr.' 
```

测试结果：
1.插入动作
触发 2.更新动作
触发 3.删除动作触发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:56:46.520

微软 SQL 服务器？

你没有。

**SQL 中有单个命令会同时**导致更新、插入和删除（例如，参见 MERGE）。触发器将被调用一次，并填充 [deleted]、[inserted] 和 [updated] 伪表。谈论一个或另一个是否发生是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T22:38:09.823

我在调试时使用的一个技巧是在引用触发器名称的触发器内使用 PRINT。如果包含`COUNT(*) FROM INSERTED`and `COUNT(*) FROM DELETED`，则可以观察消息输出（至少在 SSMS 中）以查看触发了哪些触发器、它们触发的顺序以及触发它的是否是插入、更新或删除。插入将具有`COUNT(*)=0`DELETED，删除将具有`COUNT(*)=0`INSERTED，更新将具有`COUNT(*)>0`INSERTED 和 DELETED。

# c++ - 缓存对齐的堆栈变量

> ID：15593637
> 
> 赞同：6
> 
> 时间：2013-03-24T00:17:43.533
> 
> 标签：c++, c++11, memory-alignment

使用新的 C++11 对齐工具，我想确保一组临时（堆栈）变量位于一个缓存行中。我的第一次天真的尝试如下：

```
int main() {
    alignas(64) int a; // 0x7fffc58aac80, properly aligned at 64
    int b; // 0x7fffc58aac7c
    int c; // 0x7fffc58aac78
    return 0;
} 
```

愚蠢的我！堆栈不会以这种方式分配变量，因此`a`将位于不同的缓存行`b`上`c`。

这是否意味着*正确对齐多个变量的唯一方法是通过聚合*？

```
struct alignas(64) Abc {
   int x;
   int y;
   int z;
};

int main() {
   Abc foo;
   // x 0x7fff40c2d3c0 (aligned at 64)
   // y 0x7fff40c2d3c4
   // z 0x7fff40c2d3c8   
   return 0;
} 
```

编译器：Clang 3.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T18:20:03.337

要正确对齐多个变量，您必须使用聚合，因为未定义自动变量的布局。我在 C++11 标准中找不到任何说明必须按照定义的顺序在堆栈上分配具有自动存储功能的变量的任何内容。标准的第 5.9 节坚持只定义了几种指针比较，并且具有自动存储的变量之间的比较不在定义的列表中。

# facebook - API 错误代码：191 与 HybridAuth

> ID：15593649
> 
> 赞同：0
> 
> 时间：2013-03-24T00:19:45.520
> 
> 标签：facebook, hybridauth

我正在使用 Laravel 框架，并且正在迁移到 Laravel 4 和 HybridAuth。我正在构建的网站通过 Facebook 和 Linkedin 登录，Linkedin 工作正常，而 Facebook 给了我 API 错误代码：191。

我按照[本](http://www.mrcasual.com/on/coding/laravel4-package-management-with-composer/)指南使用 Laravel4 进行设置，因此我的基本网址位于：[http](http://mywebsite.com/social/auth) ://mywebsite.com/social/auth 根据[此](http://hybridauth.sourceforge.net/userguide/IDProvider_info_Facebook.html)页面，facebook 的回调 url 应为[http://mywebsite.com/path_to_hybridauth /?hauth.done=Facebook](http://mywebsite.com/path_to_hybridauth/?hauth.done=Facebook)，所以我尝试将我的站点 URL@Facebook 设置为[http://mywebsite.com/auth/social/?hauth.done=Facebook](http://mywebsite.com/auth/social/?hauth.done=Facebook)没有成功。

在重定向到 facebook 后查看 URL 时（当我看到错误时）有一个 redirect_uri GET 参数，如下所示：http://mywebsite.com/auth/social?hauth.done=Facebook&state=[random-numbers ]&scope=email&display=page，这是我需要在 Facebook 的站点 URL 中指定的地址吗？然而这是不可能的，因为它里面有随机数。

我还设置了在获得 HybridAuth 之前不需要的应用域。

我对 HybridAuth 用户的问题是，如何设置站点 URL，以免出现 191 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T18:28:22.233

您无需为 Facebook 上的“站点 URL”输入整个 URL。我将其设置为仅域名，它对我来说很好用。“应用程序域”是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:38:40.140

您必须在 facebook 应用程序设置“应用程序域”字段中输入域/子域。

# struts2 - Struts2 - 来自外部 jar 文件的 REST 控制器问题

> ID：15593651
> 
> 赞同：2
> 
> 时间：2013-03-24T00:20:03.283
> 
> 标签：struts2

需要更新到 Struts 2.3.12（以及所有依赖项）。现在我无法让 REST 接口工作。由于控制器位于外部 jar 文件中。

在之前版本的struts2中，struts.properties中设置了如下常量：

```
struts.convention.action.includeJars = .*/myJar-Rest(.*)?.jar(!/)? 
```

并且工作正常。

现在，我无法让其余插件正常工作。它无法加载外部 jar 中的操作。这是在类路径中。

**启动时输出：**

```
2013-03-24 00:18:23,957 [org.apache.struts2.convention.PackageBasedActionConfigBuilder]   
WARN - <The includeJars pattern [.*/myJar-Rest(.*)?.jar(!/)?] did not match any 
jars in the classpath> 
```

有人可以帮我吗？

# ios - iPad 故事板不能与 SplitViewController 一起使用

> ID：15593657
> 
> 赞同：0
> 
> 时间：2013-03-24T00:21:29.843
> 
> 标签：ios, xcode, ipad, uisplitviewcontroller, uistoryboard

我正在创建一个从 flickr 获取图片的 iOs 应用程序。我正在修改我的项目，让它在 iPhone 和 iPad 上都能工作，但我的 iPad 故事板不起作用：它根本没有在 SplitViewController 的详细视图中显示图片，在控制器的主视图中，表格视图的行看起来像是被选中的。我遵循了一个非常相似的代码，我也看了看故事板，我认为我是对的，但它真的不起作用。

我截取了一张截图，但如果你想看看整个故事板或代码，它在[https://github.com/noloman/StanfordFlickrFetcher](https://github.com/noloman/StanfordFlickrFetcher)

![在此处输入图像描述](../Images/1c53195c879e17f963ead2d0c605574c.png)

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:52:48.203

看起来您将 segue 连接到控制器本身 (PhotosTVC) 而不是单元。

# c++ - STL通过map C++反向循环

> ID：15593662
> 
> 赞同：1
> 
> 时间：2013-03-24T00:22:37.767
> 
> 标签：c++, loops, map, stl

```
const map<player, int>::iterator beginning = game->begin(); 
const map<player, int>::iterator inserted = game->find(player(x, y));
map<player, int>::iterator left = inserted;
while(left != beginning)
{
//some operations here
--left;
} 
```

正如你所见，我想反向循环遍历地图，访问我刚刚插入的元素之前的所有元素。问题是，上面的结构不能访问第一个元素，我不知道为什么。有什么建议吗？game->begin() 是第一个元素吗？如果是这样，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:27:04.147

您可以使用`rbegin()`和`rend()`。

请参阅此处[http://www.cplusplus.com/reference/map/map/rbegin/](http://www.cplusplus.com/reference/map/map/rbegin/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T00:28:28.397

`game.begin()`是第一个元素的迭代器。

您可以通过将迭代器分配给从地图的末尾开始`rbegin`

```
map<player, int>::reverse_iterator it = game.rbegin()

for (it = game.rbegin(); it != game.rend(); it++)
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T00:29:15.087

以下将访问刚刚插入的元素之前的所有元素（不包括刚刚插入的元素）。它还可以防止在插入元素“之前”没有元素的情况：

```
if (left != beginning) { 
    do {
        --left;
        //some operations here
    } while (left != beginning);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T00:48:35.940

循环中的条件是错误的。当迭代器为 时，您要求跳过循环`begin`，但在这种情况下您实际上想要执行它。

您可以做不同的事情，对代码影响较小的事情可能是将循环更改为无限并在更改迭代器之前添加退出条件：

```
while (true) {
   // do something
   if (it == begin()) break;
   --it;
} 
```

或者，您可以使用反向迭代器（您可以使用当前迭代器对其进行初始化）并针对`rend()`.

# install4j - 如何在 install4j 生成的启动器中使用自定义图标？

> ID：15593668
> 
> 赞同：0
> 
> 时间：2013-03-24T00:23:25.830
> 
> 标签：install4j

我有一个 install4j 生成的启动器。它在桌面上显示自定义图标，但是当它在 ubuntu 中运行时，应用程序图标（按 ALT+Tab 时看到的图标）是 install4j 图标（带有绿色箭头的计算机）。在 windows 和 mac 中看起来不错。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T14:33:34.127

这在 Ubuntu 13.04 上对我有用，使用 Gnome Shell 3：

通过从终端运行以下命令来识别应用程序的启动类：

```
xprop | grep WM_CLASS | awk '{print $4}' 
```

单击您的应用程序窗口，查看返回到终端的内容。对于由 Install4j 创建的启动器，该类可能是 com-install4j-runtime-Launcher。

使用 StartupWMClass 属性更新应用程序的 .desktop 文件，设置为 xprop 命令返回的值，例如：

```
StartupWMClass=com-install4j-runtime-Launcher 
```

最后，将应用程序的 .desktop 文件重命名为启动类的名称，其中有一个重要区别：将类名中的大写字母更改为小写。例如：

```
com-install4j-runtime-launcher.desktop 
```

关闭应用程序并重新启动。

# css - 如何在 flex 元素中垂直居中文本？

> ID：15593669
> 
> 赞同：3
> 
> 时间：2013-03-23T21:39:33.680
> 
> 标签：css, html, vertical-alignment, text-alignment, flexbox

有没有一种特殊的方法可以使用弹性框（或其他纯 CSS）在元素中垂直居中文本？

小提琴：http: [//jsfiddle.net/WK_of_Angmar/JZZWg/](http://jsfiddle.net/WK_of_Angmar/JZZWg/)

```
<body>
<div id="main">
    <section id="a">Test1</section>
    <section id="b">Test2</section>
</div> 
```

```
#a {
    flex: 1 0 auto;
}
#b {
    flex: 0 0 auto;
    min-height: 3em;
    background-color: yellow;
}
#a {
    background-color: blue;
}
#main {
    display: flex;
    flex-direction: column;
    height: inherit;
}

body {height: inherit;}
html {height: 100%;} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T22:01:24.603

使用`line-height`是一种解决方案，这是Fiddle的**[链接。](http://jsfiddle.net/JZZWg/7/)**

**更新：**我对 flex 模型产生了更多的兴趣并发现了居中属性，所以我想这对你来说是一个更好的解决方案（尽管由于所有的前缀而不是那么整洁和优雅）。这是使用 flex 属性进行对齐的 Fiddle的**[链接。](http://jsfiddle.net/JZZWg/27/)**

这是一个解释属性用法的**[链接。](http://www.html5rocks.com/en/tutorials/flexbox/quick/)**

# .htaccess - 字符数的 RewriteRule 问题

> ID：15593674
> 
> 赞同：2
> 
> 时间：2013-03-24T00:24:04.343
> 
> 标签：.htaccess, mod-rewrite

我的 .htaccess 文件中有这个规则：

```
RewriteRule ^[A-Z]{3}[0-9]$  http://www.mysite.com/redirect.php?ql=$0 [L] 
```

此规则适用于地址：

*   `mysite.com/CSN4`

但不适用于具有多个数字的人：

*   `mysite.com/CSN42`
*   `mysite.com/CSN490`

我总是有 3 个字母后跟 1 到 3 个数字。我怎样才能使规则适用于其中任何一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:26:35.870

为您的号码集添加限制（根据您的笔记）将解决此问题：

`RewriteRule ^[A-Za-z]{3}[0-9]{1,3}$ http://www.mysite.com/redirect.php?ql=$0 [L]`

# objective-c - CFNumber 到 int 还是 NSNumber？

> ID：15593675
> 
> 赞同：4
> 
> 时间：2013-03-24T00:24:06.227
> 
> 标签：objective-c, json, nsdictionary, nsnumber

我正在使用 NSJSONSerialzation 解析 JSON 字符串，然后将其转换为 NSDictionary 以使用键值对。JSON 字符串中的一些值是由服务器作为整数发送的，但是，NSDictionary 将它们表示为 CFNumber，例如

```
<CFNumber 0xa581270 [0x1d7b4d8]>{value = +0, type = kCFNumberSInt32Type} 
```

我怎样才能将它巧妙地转换为 int 或 NSNumber ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T00:27:36.200

[由于免费桥接](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFDesignConcepts/Articles/tollFreeBridgedTypes.html#//apple_ref/doc/uid/20002401-767858)，您可以直接投射它

```
NSNumber *num = (NSNumber *)cfnum; 
```

如果启用了 ARC

```
NSNumber *num = (__bridge NSNumber *)cfnum; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:31:46.717

NSNumber 和 CFNumberRef 是免费桥接的，这意味着将一个转换为另一个您所要做的就是将您拥有的任何一个转换为您想要的类型。在将 CFNumberRef 转换为 NSNumber 的 ARC 代码中，使用 (__bridge NSNumber*) theCFNumberRef。

# c# - DataGridTemplateColumn 中的 ComboBox.SelectedItem 不绑定到它自己的 DataGridRow

> ID：15593678
> 
> 赞同：0
> 
> 时间：2013-03-24T00:24:57.743
> 
> 标签：c#, wpf, data-binding, datagrid, combobox

经过 1.5 天的头疼、消耗咖啡的努力，我终于屈服并呼吁您的明智建议 :)。

我发现了很多关于`ComboBox DataBinding`inside 的帖子`DataGrid TemplateColumn`，但似乎没有一个对我有帮助。

这是我的问题：

我有一个`ViewSource`包含有关 Excel 列信息的对象：列名、列索引和一个包含数据库列信息的对象。

我的第二个`ViewSource`是带有数据库列信息的那些对象的列表。

我的目标是加载`Excel`a 中的所有列，`WPF DataGrid`并`ComboBox`在每一行中列出所有数据库列。

当我使用 a 时这很好用`DataGridComboBoxColumn`，但我不喜欢用户必须单击 3 次才能打开 ComboBox。无论如何，您需要单击它在视觉上并不是很明显。（好吧，也许我可以设计它）。

所以我把一个正常`WPF ComboBox`的，`DataGridTemplateColumn`但所有组合框都有 SelectedItem 绑定到 DataGrid.SelectedItem，而不是它们所属的实际行。无论我尝试什么，我都无法让它表现出来！:)

```
 <DataGrid x:Name="ColumnMappings" DataContext="{StaticResource ColumnMappingsViewSource}" ItemsSource="{Binding}" Margin="10,146,10,40" Background="{DynamicResource ControlContainerBackgroundBrush}" BorderBrush="{DynamicResource ControlContainerBorderBrush}" AlternationCount="2" HeadersVisibility="Column" GridLinesVisibility="Horizontal" AutoGenerateColumns="False" SelectionMode="Single" RowBackground="{DynamicResource RowBackGroundBrush}" AlternatingRowBackground="{DynamicResource RowAlternatingBackGroundBrush}" CanUserDeleteRows="False" CanUserAddRows="False">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding ColumnName}" ClipboardContentBinding="{x:Null}" Header="Excel Kolom" Width="5*"/>
            <DataGridComboBoxColumn ItemsSource="{Binding Source={StaticResource EntityPropertiesViewSource}}" SelectedItemBinding="{Binding EntityProperty}" DisplayMemberPath="DisplayName" Header="Database Kolom" Width="5*"/>
            <DataGridTemplateColumn Header="Database Kolom" Width="5*">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <ComboBox DataContext="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}, Path=DataContext}"
                                  ItemsSource="{Binding Source={StaticResource EntityPropertiesViewSource}}"
                                  DisplayMemberPath="DisplayName" 
                                  SelectedItem="{Binding EntityProperty}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:47:25.000

我想我现在可以开始工作了。诀窍是避免为 ItemSource 使用单独的 DataContext ...

```
 <DataGrid x:Name="ColumnMappings" DataContext="{StaticResource ColumnMappingsViewSource}" ItemsSource="{Binding}" Margin="10,146,10,40" Background="{DynamicResource ControlContainerBackgroundBrush}" BorderBrush="{DynamicResource ControlContainerBorderBrush}" AlternationCount="2" HeadersVisibility="Column" GridLinesVisibility="Horizontal" AutoGenerateColumns="False" SelectionMode="Single" RowBackground="{DynamicResource RowBackGroundBrush}" AlternatingRowBackground="{DynamicResource RowAlternatingBackGroundBrush}" CanUserDeleteRows="False" CanUserAddRows="False" IsReadOnly="True">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding ColumnName}" ClipboardContentBinding="{x:Null}" Header="Excel Kolom" Width="5*"/>
            <DataGridComboBoxColumn ItemsSource="{Binding Source={StaticResource EntityPropertiesViewSource}}" SelectedItemBinding="{Binding EntityProperty}" DisplayMemberPath="DisplayName" Header="Database Kolom" Width="5*"/>
            <DataGridTemplateColumn Header="Database Kolom" Width="5*">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <ComboBox ItemsSource="{Binding EntityProperties}"
                                  DisplayMemberPath="DisplayName" 
                                  SelectedItem="{Binding EntityProperty, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

唯一的缺点是我的每个 ColumMapping 对象都需要拥有 EntityProperties 完整列表的副本：

```
public class ColumnMapping
{
    public ColumnMapping(string columnName, int columnIndex, EntityProperty entityProperty, List<EntityProperty> entityProperties)
    {
        ColumnName = columnName;
        ColumnIndex = columnIndex;
        EntityProperty = entityProperty;
        EntityProperties = entityProperties;
    }

    public string ColumnName { get; private set; }
    public int ColumnIndex { get; private set; }
    public EntityProperty EntityProperty { get; set; }
    public List<EntityProperty> EntityProperties { get; private set; }
}

public class EntityProperty
{
    public EntityProperty(string displayName, string name)
    {
        DisplayName = displayName;
        Name = name;
    }

    public string DisplayName { get; private set; }
    public string Name { get; private set; }
} 
```

如果有人可能知道更好（更清洁）的解决方案，请告诉我:)

# javascript - 使用 HTTPS 时取消对 rails 3 服务器的 ajax 请求

> ID：15593691
> 
> 赞同：0
> 
> 时间：2013-03-24T00:27:25.933
> 
> 标签：javascript, ajax, ruby-on-rails-3, spree

我正在使用 spree 1.2.4 和 Rails 3.2.11 运行电子商务平台，在结帐过程中，我试图向我的服务器运行 ajax 调用以更新一些信息。整个结帐过程使用 SSL（网址中包含 https）。ajax 调用似乎被取消了。我假设它是因为 SSL 加密。如果我查看 chrome，HTTP 状态只会显示“（已取消）”。我的ajax调用是：

```
 $.ajax({
        url: '/orders/get_update_cart_fields'
    }).done(update_cart_fields); 
```

`ssl_required :get_update_cart_fields`我的订单控制器中也有

任何人都知道为什么会发生这种情况，以及如何解决它以便我的 ajax 调用工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:44:31.720

如果网页是从 http 域加载的，那么对同一域但使用 https 协议的 Ajax 调用被视为跨域请求。通常这会失败，因为浏览器强制执行[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

好消息是，对于绝大多数浏览器，您可以通过正确配置服务器来启用跨域资源共享。如何执行此操作的详细信息取决于您的服务器。请参阅[此站点](http://enable-cors.org/)以获取指导和更多信息。基本上，唯一的要求是您的服务器在 Ajax 响应中包含以下标头：

```
Access-Control-Allow-Origin: * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:28:50.413

好的，解决了。这是我必须做的才能让它工作：

阿贾克斯：

```
 $.ajax({
        'url': location.protocol + '//' + location.host + '/' + '/orders/get_update_cart_fields'
    }).done(update_cart_fields); 
```

在订单控制器中：

```
ssl_allowed :get_update_cart_fields 
```

after i did both of those things, i got it working. According to many sources ajax calls should automatically determine whether its http(s) but for some reason i had to manually do it.

# python - 如何在 python 脚本中调用此方法？

> ID：15593695
> 
> 赞同：2
> 
> 时间：2013-03-24T00:27:37.997
> 
> 标签：python

我正在尝试修改这个 用于控制 3D 打印机的python 应用程序{- [https://github.com/kliment/Printrun/blob/master/pronsole.py 。](https://github.com/kliment/Printrun/blob/master/pronsole.py)基本上我正在尝试获取应用程序的命令行版本并添加 udp 接收，因此我可以从我制作的 iphone 应用程序中控制它。我有 python 应用程序接收 udp，解密它收到的不同消息等。这个 python 脚本中有一个类，它定义了所有使用的方法。这是一个非常精简的版本，它的方法给我带来了问题-

```
class pronsole(cmd.Cmd):
    def __init__(self):
        cmd.Cmd.__init__(self)
        if not READLINE:
            self.completekey = None
        self.p = printcore.printcore()
        self.p.recvcb = self.recvcb
        self.recvlisteners = []
        self.prompt = "PC>"
        self.p.onlinecb = self.online
        self.f = None
    ...

    def do_connect(self, l):
        a = l.split()
        p = self.scanserial()
        port = self.settings.port
        if (port == "" or port not in p) and len(p)>0:
            port = p[0]
        baud = self.settings.baudrate or 115200
        if(len(a)>0):
            port = a[0]
        if(len(a)>1):
            try:
                baud = int(a[1])
            except:
                print "Bad baud value '"+a[1]+"' ignored"
        if len(p) == 0 and not port:
            print "No serial ports detected - please specify a port"
            return
        if len(a) == 0:
            print "No port specified - connecting to %s at %dbps" % (port, baud)
        if port != self.settings.port:
            self.settings.port = port
            self.save_in_rc("set port", "set port %s" % port)
        if baud != self.settings.baudrate:
            self.settings.baudrate = baud
            self.save_in_rc("set baudrate", "set baudrate %d" % baud)
        self.p.connect(port, baud) 
```

类中还有另一个名为“do_move”的方法可以移动打印机，我在收到 udp 时调用该方法。我想我说得对-

```
a = pronsole()
a.do_move("X 29") 
```

它试图调用它，但由于我尚未连接到打印机而无法调用它。所以我试着打电话——

```
a = pronsole()
a.do_connect("") 
```

在课程结束时，但我收到错误消息-“为设置端口保存失败：pronsole 实例没有属性'rc_filename'”

尝试使用 'rc_filename' 的方法是 -

```
def save_in_rc(self, key, definition):
    """
    Saves or updates macro or other definitions in .pronsolerc
    key is prefix that determines what is being defined/updated (e.g. 'macro foo')
    definition is the full definition (that is written to file). (e.g. 'macro foo move x 10')
    Set key as empty string to just add (and not overwrite)
    Set definition as empty string to remove it from .pronsolerc
    To delete line from .pronsolerc, set key as the line contents, and definition as empty string
    Only first definition with given key is overwritten.
    Updates are made in the same file position.
    Additions are made to the end of the file.
    """
    rci, rco = None, None
    if definition != "" and not definition.endswith("\n"):
        definition += "\n"
    try:
        written = False
        if os.path.exists(self.rc_filename):
            import shutil
            shutil.copy(self.rc_filename, self.rc_filename+"~bak")
            rci = codecs.open(self.rc_filename+"~bak", "r", "utf-8")
        rco = codecs.open(self.rc_filename, "w", "utf-8")
        if rci is not None:
            overwriting = False
            for rc_cmd in rci:
                l = rc_cmd.rstrip()
                ls = l.lstrip()
                ws = l[:len(l)-len(ls)] # just leading whitespace
                if overwriting and len(ws) == 0:
                    overwriting = False
                if not written and key != "" and  rc_cmd.startswith(key) and (rc_cmd+"\n")[len(key)].isspace():
                    overwriting = True
                    written = True
                    rco.write(definition)
                if not overwriting:
                    rco.write(rc_cmd)
                    if not rc_cmd.endswith("\n"): rco.write("\n")
        if not written:
            rco.write(definition)
        if rci is not None:
            rci.close()
        rco.close()
        #if definition != "":
        #    print "Saved '"+key+"' to '"+self.rc_filename+"'"
        #else:
        #    print "Removed '"+key+"' from '"+self.rc_filename+"'"
    except Exception, e:
        print "Saving failed for", key+":", str(e)
    finally:
        del rci, rco 
```

我尝试过通过命令行调用 do_connect 方法，这很有效，所以我不明白为什么我不能在 python 脚本中以同样的方式调用它。我猜这与我在做这件事时引用了一个 pronsole 的实例有关 -

```
a = pronsole()
a.do_connect("") 
```

我尝试将其设为静态方法，但这会产生其他问题。所以我的问题是，我该怎么做才能用 python 脚本调用这个“do_connect”方法？就像我说的，我是蟒蛇菜鸟；我在弄清楚如何让 udp 工作和集成方面取得了一些成功，但我一直坚持这一点，我觉得这真的很简单。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T00:30:09.370

我最近也想这样做，并通过将 python 脚本的输出传递到 pronsole.py 程序来解决它。

因此，我没有修改 pronsole 代码，而是在另一个 python 程序中实现了我的所有套接字功能，并通过 stdout 将命令发送到 pronsole。我的程序被称为“pronsole_interface”，所以从命令行我这样称呼它：

```
python pronsole_interface.py | pronsole.py 
```

# java - 数据报包大小限制

> ID：15593696
> 
> 赞同：0
> 
> 时间：2013-03-24T00:27:40.300
> 
> 标签：java, networking, bits, datagram

我想对我用 Java 编写的程序做的是让用户能够使用数据报包与“服务器”程序对话。

唯一的问题是，服务器要发回客户端刚刚请求的信息，它会发回大量的文本。当我了解数据报包时，它总是告诉我制作 256 位大小的包。这是为什么？有没有更好的方法来发送数据？还是我只需要处理以 256 位的多条消息发送数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:55:41.467

UDP 数据报普遍接受的实际限制是 534 字节左右，因为要求所有主机和路由器不要在低于此大小的情况下进行分段。IPv4 中的最大可能值为 65507 字节，但这甚至无法通过一台路由器：它甚至可能无法*进入*发送方的套接字发送缓冲区，更不用说进入网络了。

我不知道你从哪里得到 256，但你当然可以加倍。它是字节，而不是位。

# python - Python：凯撒密码加密

> ID：15593697
> 
> 赞同：2
> 
> 时间：2013-03-24T00:27:46.520
> 
> 标签：python, encryption, shift

大家好，我有一个问题。为什么以下代码不产生任何输出或错误？

这是对用户代码进行加密和解密的代码

```
alpha = ['a','b','c','d','e','f',
     'g','h','i','j','k','l',
     'm','n','o','p','q','r',
     's','t','u','v','w','x',
     'y','z']

shift = range(26)

def user_info():
    info = input("\nPress 'e' to encrypt or 'd' to decrypt: ").lower()
    if info == 'e' or 'd':
       return info

def user_message():
    code = input("What is your message?: ")
    return code

def user_shift():
     shift = int(input("What is your shift number?: "))
     while True:
         if shift == int(shift):
             return shift

def True_Message(info, code, shift):

    if info[0] == 'd':     #This encrypts the code 
         shift = -shift    

    for letter in code:
        if letter in alpha:
        alpha_2 = ord(letter) + shift
        secret_message = ""
    if alpha_2 in range (0, len(alpha)):
        final_mix = chr(alpha)
        secret_message += final_mix

return secret_message

info = user_info()
code = user_message()
shift = user_shift()
print(True_Message(info, code, shift)) 
```

没有任何错误，所以我不知道出了什么问题。我是这个加密的新手，我不确定这是否在正确的轨道上，有什么想法吗？谢谢你。

**更新！！！！！**

抱歉，我希望代码能够根据用户的选择加密和解密代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:37:28.173

您需要检查您的缩进和`or`运算符的使用情况：

```
alpha = ['a','b','c','d','e','f',
     'g','h','i','j','k','l',
     'm','n','o','p','q','r',
     's','t','u','v','w','x',
     'y','z']

shift = range(26)

def user_info():
    info = input("\nPress 'e' to encrypt or 'd' to decrypt: ").lower()
    if info in ('e', 'd'): # 'or' does not work how you think it does
        return info

def user_message():
    code = input("What is your message?: ")
    return code

def user_shift():
     while True:
         shift = int(input("What is your shift number?: "))
         if shift == int(shift):
             return shift

def True_Message(info, code, shift):

    if info[0] == 'd':     #This encrypts the code 
         shift = -shift    

    for letter in code:
        if letter in alpha:
            alpha_2 = ord(letter) + shift
            secret_message = ""
    if alpha_2 in range (0, len(alpha)):
        final_mix = chr(alpha)
        secret_message += final_mix

    return secret_message 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:31:28.363

Python 是一种对缩进敏感的语言。你到处都有缩进错误。

你怎么能说“没有任何错误” - 你在运行脚本吗？python 解释器会告诉你它们的确切位置。当我运行你的脚本时：

```
C:\Users\Jonathon\temp>python caesar.py
  File "caesar.py", line 22
    return shift
         ^
IndentationError: expected an indented block 
```

所以你的第一个错误在这里：

```
def user_shift():
     shift = int(input("What is your shift number?: "))
     while True:
         if shift == int(shift):
         return shift              # ---> Should be indented one more level 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T00:53:04.083

正如其他人所说，你有一些缩进问题。

对于逻辑级别，您应该明确检查是否`secret_message = ""`是您想要的。其他要点：

*   如果`letter`是`Z`并且你添加了一个班次怎么办？（[检查 ASCII 表](http://www.asciitable.com/)）
*   您确定要让班次`range(26)`排在首位吗？尝试`print(list(range(26)))`查看范围的情况。

不要气馁，玩 ASCII 起初可能会令人沮丧，但一旦熟悉它会非常有趣！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-02-01T10:20:04.970

不，看看这个。

```
from tkinter import *

                        #Functions. The first three do the job. The rest are about GUI
def wordlist(a):
    word_list=(list(a))
    return (word_list)

def length(a):
    return(len(wordlist(a))-1)

def encrypt(a,b):
    thelist=wordlist(a)
    i=0
    while i<=(length(a)):
        thelist[i]=(chr(ord(wordlist(a)[i])+(b)))
        i=i+1
    return (''.join(thelist))

def callback():    
    e.focus_set()
    a=e.get()

    e2.focus_set()
    b=int(e2.get())

    e3.delete(0, (length(a)+1))
    e3.insert(0,(encrypt(a,b)))

                        #User Interface

root = Tk(className="_Caesar Cipher Encryptor")

frame1 = Frame(root)
frame1.pack()

frame2= Frame(root)
frame2.pack()

frame3=Frame(root)
frame3.pack()

enter=Label(frame1, text="Enter Text:", bd=3, font="Ariel")
enter.pack(side=LEFT,fill=X)

shift=Label(frame2, text="Shift:", font="Ariel")
shift.pack(side=LEFT,fill=X)

result=Label(frame3,text="Encrypted Code:", font="Ariel")
result.pack(side=LEFT)

e= Entry(frame1,width=50, font="Ariel")
e.pack(side=RIGHT)

e2= Entry(frame2,width=10, font="Ariel")
e2.pack(side=LEFT)

e3=Entry(frame3, font="Ariel")
e3.pack(side=RIGHT)

b = Button(frame2, text="Encrypt", width=10, command=callback, font="Ariel")
b.pack(side=RIGHT)

mainloop() 
```

# c++ - 是否有任何免费的 Windows 调试器允许使用 C++ 向后步进

> ID：15593703
> 
> 赞同：4
> 
> 时间：2013-03-24T00:28:24.823
> 
> 标签：c++, windows, visual-studio-2012

通过向后步进，我并不是指平均调用堆栈功能。但我指的是也称为“重放调试”、“反向调试”、“时间机器调试”、“历史调试”和“全知调试”的东西。

由于 Visual Studio 的 IntelliTrace 功能不适用于 C++。

我正在寻找：

A：一个免费的 C++ 调试器，支持“向后步进”。这可以与视觉工作室（带有扩展或其他东西）集成或并行运行而没有任何问题。

B：某种方式赋予常规调试器“向后步进”功能。通过扩展或其他方法。

据我了解，Gdb（gnu 调试器）现在支持此功能。但是我发现没有免费的 Windows 端口（用于调试 Windows 应用程序）。

我个人使用的是 Visual Studio 2012 ，但是将这个问题概括为任何版本的 Visual Studio 都是可以接受的。

# java - 使用 Sanselan 编写 EXIF XPKEYWORDS

> ID：15593707
> 
> 赞同：3
> 
> 时间：2013-03-24T00:29:05.403
> 
> 标签：java, exif

我一直在研究将标签写入图像的方法，类似于 Windows Live 照片库的工作方式。我玩过几个不同的库（元数据提取器、jhead、jheader、sanselan），但只是真正找到了 Sanselan 来适应写回我需要的数据。

我跟着 Apache 的[WriteExifMetadataExample](http://commons.apache.org/proper/commons-imaging//xref-test/org/apache/sanselan/sampleUsage/WriteExifMetadataExample.html)到了一个 T & 它完美地更新了 GPS 数据和 Aperture。

然后我尝试修改示例以更新`EXIF_TAG_XPKEYWORDS`而不是`EXIF_TAG_APERTURE_VALUE`.

在上面链接的示例中，我用`TiffOutputField.create`以下内容替换了该行：

```
String currentTagsAsString = new String((byte[]) jpegMetadata.findEXIFValue(ExifTagConstants.EXIF_TAG_XPKEYWORDS).getValue());
System.out.println("current tags: '" + currentTagsAsString + "'");
String newTag = "h e l l o";
String newTagsAsString = currentTagsAsString.trim() + " ; " + newTag + "   ";
System.out.println("new desired tags: '" + newTagsAsString + "'");
TiffOutputField keywords = new TiffOutputField(ExifTagConstants.EXIF_TAG_XPKEYWORDS, FieldType.FIELD_TYPE_BYTE, newTagsAsString.length(), newTagsAsString.getBytes());
exifDirectory.removeField(ExifTagConstants.EXIF_TAG_XPKEYWORDS);
exifDirectory.add(keywords); 
```

除了注释掉光圈和 GPS 更新代码之外，其余的我都不管了。我承认字节数组的格式让我有点困惑，所以这很可能是问题所在。

我没有收到警告/错误/等。该过程正常完成，但新的图像文件不包含更新的标签。为什么新图像不包含更新的标签？有没有更简单/更好的方法？

*更新：我已经编辑了代码以使用 1.0 RC commons-imaging API，但是结果是一样的。为了完整起见，我在这里包含了我使用的代码*

```
TiffImageMetadata metadata = toTiffMetadata(Imaging.getMetadata(inputFile));
System.out.println(metadata.getFieldValue(MicrosoftTagConstants.EXIF_TAG_XPKEYWORDS));
TiffOutputSet outputSet = metadata.getOutputSet();
TiffOutputDirectory exif = outputSet.getOrCreateExifDirectory();
exif.removeField(MicrosoftTagConstants.EXIF_TAG_XPKEYWORDS);
exif.add(MicrosoftTagConstants.EXIF_TAG_XPKEYWORDS, "helloworld;goodbye;");
writeFileWithNewTag(inputFile,destinationFile,outputSet); 
```

*如果我使用类似的东西，新代码效果很好`EXIF_TAG_XPAUTHOR`，但使用`EXIF_TAG_XPKEYWORDS`不会产生任何错误或警告或消息，并且新文件根本不包含新标签数据*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T07:24:57.860

我使用以下代码成功添加了 XP 关键字标签：

```
private static void rewriteXpKeywords(String fileIn, String fileOut) throws Exception {
    TiffImageMetadata exif;
    IImageMetadata meta = Imaging.getMetadata(new File(fileIn));
    if (meta instanceof JpegImageMetadata) {
        exif = ((JpegImageMetadata)meta).getExif();
    } else if (meta instanceof TiffImageMetadata) {
        exif = (TiffImageMetadata)meta;
    } else {
        return;
    }
    TiffOutputSet outputSet = exif.getOutputSet();
    TiffOutputDirectory exifDir = outputSet.findDirectory(TiffDirectoryConstants.DIRECTORY_TYPE_EXIF);
    exifDir.removeField(AllTagConstants.EXIF_TAG_XPKEYWORDS);
    exifDir.add(AllTagConstants.EXIF_TAG_XPKEYWORDS, "helloworld;goodbye;");

    ExifRewriter rewriter = new ExifRewriter();
    FileOutputStream fos = null;
    try {
        fos = new FileOutputStream(new File(fileOut));
        rewriter.updateExifMetadataLossy(new File(fileIn), fos, outputSet);
    } finally {
        if (fos != null) {
            fos.close();
        }
    }
} 
```

你怎么知道它没有“修改数据”？你用什么检查？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T07:53:50.877

我有同样的问题并得到了解决方案。你可以试试下面的代码

```
public static TiffOutputField getTiffOutputFieldKeyword(
TiffOutputSet outputSet, String metaDataToChange) {
TiffOutputField imageHistoryPre = outputSet
    .findField(TiffConstants.EXIF_TAG_XPKEYWORDS);
 if (imageHistoryPre != null) {
outputSet.removeField(TiffConstants.EXIF_TAG_XPKEYWORDS);
 }

 TiffOutputField tiffOutputField = new TiffOutputField(
    TiffConstants.EXIF_TAG_XPKEYWORDS,
    TiffFieldTypeConstants.FIELD_TYPE_BYTE,
    metaDataToChange.getBytes("UTF-16").length, metaDataToChange.getBytes("UTF-16"));

return tiffOutputField;
} 
```

[在 Exif 中编写 XPKeywords](https://stackoverflow.com/questions/25603990/writing-xpkeywords-in-exif/25639015#25639015)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T09:00:11.213

这不再是编写新标签的推荐方式。Microsoft XP 标签是一个特殊的问题，因为它们声称是字节类型，但数据实际上是 UTF-16LE。

而是使用处理所有这些的新 API - 例如[http://svn.apache.org/viewvc/commons/proper/imaging/trunk/src/test/java/org/apache/commons/imaging/formats/ jpeg/exif/MicrosoftTagTest.java?view=markup](http://svn.apache.org/viewvc/commons/proper/imaging/trunk/src/test/java/org/apache/commons/imaging/formats/jpeg/exif/MicrosoftTagTest.java?view=markup)

# ios - iOS RestKit 无法将本地实体保存到数据库

> ID：15593709
> 
> 赞同：12
> 
> 时间：2013-03-24T00:29:13.573
> 
> 标签：ios, core-data, restkit, nsmanagedobjectcontext

我正在使用 RestKit 0.20 解析 JSON 数据并保存到数据库。这是一个映射实体SchoolClass，由RestKit处理并保存良好。我有另一个名为 MyClass 的实体，它存储我选择的类。这仅在设备上是本地的。

这是我创建并保存 MyClass 实体的代码

```
 NSManagedObjectContext *managedObjCtx = [RKManagedObjectStore defaultStore].mainQueueManagedObjectContext;
 MyClass* course = [managedObjCtx insertNewObjectForEntityForName:@"MyClass"];

 .. set the data for course here

 NSError *executeError = nil;
 if(![managedObjCtx save:&executeError]) {
      NSLog(@"Failed to save to data store");
 } 
```

这是初始化托管数据存储的代码

```
 // Initialize managed object store
    NSManagedObjectModel *managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];
    RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];
    objectManager.managedObjectStore = managedObjectStore;

   /**
     Complete Core Data stack initialization
     */
    [managedObjectStore createPersistentStoreCoordinator];
    NSString *storePath = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"RKMainDb.sqlite"];
    NSString *seedPath = [[NSBundle mainBundle] pathForResource:@"RKSeedDatabase" ofType:@"sqlite"];
    NSError *error;
    NSPersistentStore *persistentStore = [managedObjectStore addSQLitePersistentStoreAtPath:storePath fromSeedDatabaseAtPath:seedPath withConfiguration:nil options:nil error:&error];
    NSAssert(persistentStore, @"Failed to add persistent store with error: %@", error);

    // Create the managed object contexts
    [managedObjectStore createManagedObjectContexts];

    // Configure a managed object cache to ensure we do not create duplicate objects
    managedObjectStore.managedObjectCache = [[RKInMemoryManagedObjectCache alloc] initWithManagedObjectContext:managedObjectStore.persistentStoreManagedObjectContext]; 
```

看来保存是成功的，在 MyClasseTableViewController 中我可以读取保存的 MyClass 条目。但是，在我关闭应用程序并重新启动后。MyClassTableViewController 是空的，因为获取的结果是空的。我使用 SQLiteBrowser 打开了 sqlite 文件，而 MyClass 表是空的。看起来 MyClass 实体只保存在缓存中，而不是持久存储中。我需要调用RestKit提供的一些API来保存它吗？我试图通读文档但找不到它。请帮忙。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-25T20:08:36.803

感谢 Tom 的带领，我发现 RestKit 有 NSManagedObjectContext (RKAdditions)，它有一个方法：

```
- (BOOL)saveToPersistentStore:(NSError **)error 
```

是的，它确实具有处理嵌套托管对象上下文的逻辑。这是有效的新代码，只更改了一行，但花了很多时间来找到正确的调用:(

```
#import "NSManagedObjectContext+RKAdditions.h"
     NSManagedObjectContext *managedObjCtx = [RKManagedObjectStore defaultStore].mainQueueManagedObjectContext;
     MyClass* course = [managedObjCtx insertNewObjectForEntityForName:@"MyClass"];

     .. set the data for course here

     NSError *executeError = nil;
     if(![managedObjCtx saveToPersistentStore:&executeError]) {
          NSLog(@"Failed to save to data store");
     } 
```

# c++ - c++字符串连接解决方 案

> ID：15593710
> 
> 赞同：-2
> 
> 时间：2013-03-24T00:29:14.393
> 
> 标签：c++, string

为什么这段代码不起作用？错误消息：main.cpp:147:5: error: expected ';' 在'fin'之前</p>

```
 string file;
    ifstream fin;
    fin.clear();

    cout << "\n\t--------------------------------Enter Person's name then surname to display------";
    cin>>file;

    file +=".txt"
    fin.open(file.c_str());

    char word[50];
    fin>>word;
    while(fin.good()){

        cout << word << " ";
        fin >> word;
    }

    system("pause");
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:32:19.697

您需要在此行末尾添加一个分号：

```
file +=".txt" 
```

那应该可以解决错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:44:00.983

您在下面的行中缺少一个分号。

```
file +=".txt"   <-------- put a semi colon HERE
    fin.open(file.c_str()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T00:32:48.890

那么你错过了`;`after `file +=".txt"`。

```
string file;
ifstream fin;
fin.clear();

cout << "\n\t--------------------------------Enter Person's name then surname to display------";
cin>>file;

file +=".txt";
fin.open(file.c_str());

char word[50];
fin>>word;
while(fin.good()){

    cout << word << " ";
    fin >> word;
}

system("pause");
return 0; 
```

}

# design-patterns - 为什么不（通常）在单个 API 中实现日志记录和单元测试？

> ID：15593713
> 
> 赞同：0
> 
> 时间：2013-03-24T00:29:26.630
> 
> 标签：design-patterns, logging, architecture

我一直在开发一个使用 CasperJS/PhantomJS（无头 webkit）的程序，并且一直在使用 Casper 的内置测试单元测试工具。它使用标准`assert(test, "message")`模式。我认为将通过测试的日志级别设置为很好，`info`但是这两个 API 是分开的，看起来我将不得不为两者复制测试逻辑，或者将其中一个侵入另一个。

回想一下我对 JUnit 和 PHP 的（有限）经验，我不记得有任何日志记录选项。Google 为 JUnit 提供了一些日志记录选项，但看起来它已被固定。

这只是 CasperJS 还是有不同的日志记录/单元测试 API 很常见？如果是这样，这仅仅是不同遗产的结果，还是有两个独立设施的建筑/语言原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:58:20.257

单元测试和日志记录是有些正交的概念。

单元测试在失败时应该提供一个明确的指针来指出哪里出了问题，并留给你做进一步的调查。他们通常不应该在通过时打印任何内容。该框架只会打印出多少通过和多少失败的摘要。

# scala - SBT 不会解决对任何存储库的传递依赖，除了 Typesafe 的

> ID：15593715
> 
> 赞同：3
> 
> 时间：2013-03-24T00:29:32.420
> 
> 标签：scala, maven, sbt

我有一个无法解决的传递依赖，我为此而烦恼。

具体的依赖是`org.apache.maven.wagon#wagon-provider-api;1.0-beta-2!wagon-provider-api.jar`虽然我不确定哪个直接依赖包括它。

该文件在默认的 Maven 存储库中是有效的。然而，出于某种原因，SBT 只是拒绝在那里检查它，尽管它很高兴在那里寻找其他依赖项：

```
[warn]  [NOT FOUND  ] org.apache.maven.wagon#wagon-provider-api;1.0-beta-2!wagon-provider-api.jar (52ms)
[warn] ==== Typesafe Releases Repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/org/apache/maven/wagon/wagon-provider-api/1.0-beta-2/wagon-provider-api-1.0-beta-2.jar
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::              FAILED DOWNLOADS            ::
[warn]  :: ^ see resolution messages for details  ^ ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.apache.maven.wagon#wagon-provider-api;1.0-beta-2!wagon-provider-api.jar
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] (*:update) sbt.ResolveException: download failed: org.apache.maven.wagon#wagon-provider-api;1.0-beta-2!wagon-provider-api.jar
[error] Total time: 3 s, completed Mar 23, 2013 7:22:05 PM 
```

我已删除`.ivy2`,`.m2`并`.sbt`从我的主目录中删除。我跑了`sbt update`。我跑`play clean`了`play clean-all`一遍又一遍。从SBT`resolvers`提示运行显示 Maven 存储库在列表中。

我已经尝试下载 jar 并将其添加到我的 Ivy 缓存、我的 Ivy 存储库、我的 Play！存储库。

还有什么可以尝试的？

我的 Build.scala：

```
import sbt._
import Keys._
import play.Project._

object ApplicationBuild extends Build {

  val appName         = "conspire"
  val appVersion      = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    // Add your project dependencies here,
    javaCore,
    javaJdbc,
    "mysql" % "mysql-connector-java" % "5.1.18",
    "org.apache.cayenne.plugins" % "maven-cayenne-plugin" % "3.0.2",
    "org.objectstyle.ashwood" % "ashwood" % "2.0",
    "commons-collections" % "commons-collections" % "3.1",
    "commons-lang" % "commons-lang" % "2.6",
    "commons-logging" % "commons-logging" % "1.1"
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    externalResolvers += "Local Maven Repository" at "file:///"+Path.userHome+"/.m2/repository",
    resolvers ++= Seq(DefaultMavenRepository,
                      "Objectstyle repository" at " http://objectstyle.org/maven2/")
  )

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:48:38.837

尝试

```
resolvers := // which overrides current resolvers 
```

代替

```
resolvers ++= // which appends to current resolvers 
```

不过不要问我解释，因为我不知道它为什么会起作用。刚刚与 JUnit 有类似的问题，[这个链接](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/32KHF25b0IE)建议这样做，这有助于......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T21:06:19.280

代替 ：

```
resolvers := 
```

（它的缺点是不允许多个解析器。）我发现

```
resolvers += 
```

工作正常，并且不会出现来自 OP 的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T17:22:26.027

我有一个类似的问题。但是 SBT 甚至会在 maven repo 中搜索它所说的链接不起作用，实际上是有效的。

我通过在默认播放 stuf 之前移动我自己的依赖项来解决它：

**前**

```
val appDependencies = Seq(
    // Add your project dependencies here,
    javaCore,
    javaJdbc,
    "mysql" % "mysql-connector-java" % "5.1.32"
  ) 
```

**后**

```
val appDependencies = Seq(
    "mysql" % "mysql-connector-java" % "5.1.32",
    javaCore,
    javaJdbc    
  ) 
```

希望这对其他人有帮助。干杯

# java - 泽西岛，如何发布 JSON 对象列表？

> ID：15593720
> 
> 赞同：12
> 
> 时间：2013-03-24T00:30:28.957
> 
> 标签：java, json, rest, jersey

我正在使用 Jersey 1.11 在 Java 中构建 RESTful Web 服务，并且在实现使用 JSON 化实体列表的方法时遇到问题。单实例方法工作正常。

我得到的错误是：

```
Status 400 - Bad Request. The request sent by the client was syntactically incorrect. 
```

我的方法签名如下所示：

```
@POST
@Path("/some-path/{someParam}")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public String createBatch(List<MyEntity> myEnts, @PathParam("someParam") String someParam)
{
   ... 
} 
```

我在请求中发送的 JSON 是一个`MyEntity`JSON 对象数组：

```
[{"field1" : value1, "field2" : value2}, {"field1" : value3, "field2" : value4}, ...] 
```

之前已经提出过类似的问题，一个直接的建议是将使用的媒体类型更改为文本并[手动反序列化 JSON，](https://stackoverflow.com/questions/11237102/jax-rsjersey-to-consumes-array-of-json-object-in-post-request)但我更喜欢更清洁的解决方案。

我发送的 JSON 在这种情况下是否有效，还是我需要一个顶级的`{}`即包装实体？这似乎也有点不自然。

谢谢，

/大卫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T00:34:35.937

我认为 PathParam 以及应该由 Jersey(JAX-RS) 解组的 Param 是不可能的。请尝试删除 PathParam 参数。

如果您需要第二个参数，请创建一个像这样的新类

```
@XmlRootElement(name = "example")
public class Example {
  @XmlElement(name = "param")
  private String param;
  @XmlElement(name = "entities")
  private List<MyEntity> entities;
} 
```

并修改您的 Methode ：

```
@POST
@Path("/some-path")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public String createBatch(Example example)
{
   ... 
} 
```

你的 JSON 应该是这样的：

```
{
 "param":"someParam",
 "entities":[
   {"field1" : value1, "field2" : value2}, {"field1" : value3, "field2" : value4}, ...]
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T22:44:54.147

好的，所以最后我使用一个简单的包装类解决了这个问题，以便生成`{ items : [{ <myEnityInstanceJson1> }, { <myEnityInstanceJson2> }, ... ]}`. 我想有一种方法可以使用通用[包装器](http://blog.bdoughan.com/2012/11/creating-generic-list-wrapper-in-jaxb.html)，但现在可以这样做：

```
@XmlRootElement
public class MyEntityWrapper implements Serializable {

    private static final long serialVersionUID = 1L;

    private List<MyEntity> items;

    public MyEntityWrapper() {
        this.items = new ArrayList<MyEntity>();
    }

    public MyEntityWrapper(List<MyEntity> items) {
        this.items = items;
    }

    public List<MyEntity> getItems() {
        return items;
    }

    public void setItems(List<MyEntity> items) {
        this.items = items;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-29T15:40:31.823

问题是通用列表类型，由于类型擦除，它在运行时不可用，所以 Jersey 不知道要解组哪种 POJO。

`MessageBodyReader`我认为在这种情况下，最简单的解决方案（我知道至少在您的 .

```
public String createBatch(@PathParam("someParam") String someParam, MyEntity[] myEnts) 
```

是的，结合`@PathParam`和消耗/未编组的主体参数应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T00:39:56.747

这是数组的有效 JSON：

```
{"elements": [
        {"field1" : value1, "field2" : value2}, 
        {"field1" : value3, "field2" : value4},
        ...]
}; 
```

（见[这里](http://www.json.org/js.html)的例子）

您不需要发送文本，您可以将其作为 JSON 发送。您也`MyEntity`应该拥有`@XmlRootElement`它（参见[此处](http://jersey.java.net/nonav/documentation/1.5/json.html)，第 5.2 节的示例）。

您不需要`PathParam`在您的参数中，如果您在您的方法签名中`someParam`留下请求，则在发布请求时可用。`@Path("/some-path/{someParam}")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-14T20:51:11.357

包装类工作。 `MyEntity[] myEnts`不起作用。

这就是我所做的，并且奏效了。

```
public String createBatch(@PathParam("someParam") String someParam,
                                                  String content) 
```

用于`ObjectMapper`转换为对象列表。

```
List<MyEntity> entities = om.readValue(content, 
                                       new TypeReference<List<MyEntity>>(){}). 
```

# c++ - 无法输出到 dat、out 或 txt，但可以将数据附加到输入文件，

> ID：15593722
> 
> 赞同：0
> 
> 时间：2013-03-24T00:30:46.173
> 
> 标签：c++, fstream

第一篇文章，所以我希望这不是我的新手。无法让 Visual Studio 在任何地方使用 cpp 创建任何类型的输出文件，但我可以在输入文件中附加我的数据，所以我认为我的代码是正确的。这就是我所拥有的；

```
#include<iostream>
#include<string>
#include<iomanip>
#include<fstream>
#include<ostream>
using namespace std;

int main()
{
    //declarations
    string regions;
    string regionsNum;
    double qu1;
    double qu2;
    double qu3;
    double qu4;
    double average = 0.0;
    double total = 0.0;
    int regct;
    int count;
    //file declarations
    ifstream inregions;
    ofstream outregions;
    inregions.open("C:\\regions.txt", ios::in);
    if(inregions.fail() == 1)
    {
        cout << "Input failure" << endl;
        char response;
        cin.ignore(1, '\n');
        cin.get(response);
        return 1;
    }
    outregions.open("C:\\regions.dat", ios::app);
    if(outregions.fail() == 1)
    {
        cout << "Output failure" << endl;
        char response;
        cin.ignore(1, '\n');
        cin.get(response);
        return 1;
    }

    outregions << fixed << showpoint << setprecision(2);
    cout << fixed << showpoint << setprecision(2);

    for(regct = 0; regct < 4; regct++)
    {

        inregions >> regions;
        inregions.ignore(1);
        inregions >> regionsNum;
        cout << regions << regionsNum << endl;
        inregions.ignore(1);
        inregions >> qu1;
        inregions.ignore(1);
        inregions >> qu2;
        inregions.ignore(1);
        inregions >> qu3;
        inregions.ignore(1);
        inregions >> qu4;

        total = qu1 + qu2 + qu3 + qu4;
        cout << total << endl;
        average = total / 4;
        outregions << regions << " " << regionsNum << " average sales $" << average << endl;
    }
    cout << "Results found in C:\\regions.txt" << endl;
    char response;
    cin.ignore(1, '\n');
    cin.get(response);

    return 0;
 } 
```

我有这个设置来告诉我.open 之后的输出失败，我已经附加了文件，所以我知道其余的工作。提前感谢大家.....mrbrenzo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:37:27.033

也许您无权在`C:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:47:17.873

这是 C++ 和文件处理的一个很好的参考[www.cplusplus.com](http://www.cplusplus.com/doc/tutorial/files/)注意读取和写入文件的默认设置。我希望它会有所帮助。

# clojure - 将 core.logic 扩展到自定义类型

> ID：15593724
> 
> 赞同：5
> 
> 时间：2013-03-24T00:31:24.847
> 
> 标签：clojure, protocols, logic-programming, clojure-core.logic

我正在试验[core.logic](https://github.com/clojure/core.logic)，并希望使我自己的自定义数据类型能够参与逻辑表达式：

```
(deftype Expression [node vars]
  ....) 
```

基本上，这表示数学表达式树中的一个节点，包含一个节点树和一组使用的未绑定变量。`node`是常量、符号或`(Operator Expression Expression....)`树节点。我希望能够使用 core.logic 来操作数学表达式，并匹配此类表达式的子树。

如果可能的话，我该怎么做？

我从 core.logic 源代码中看到，有[许多协议](https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/protocols.clj)看起来可以很好地扩展（例如`IUnifyTerms`，`IReifyTerms`等等），但并不完全清楚这些协议是如何使用的，以及哪些是我真正的需要延长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:12:12.740

core.logic 旨在扩展为自定义类型。然而，这并没有得到很好的记录，因为随着我们了解究竟需要什么，协议可能会发生变化。值得检查`clojure.core.logic.nominal`命名空间以了解将 core.logic 扩展到自定义类型所需的内容。

# javascript - QML - 我如何从 javascript 缩放项目？

> ID：15593726
> 
> 赞同：2
> 
> 时间：2013-03-24T00:31:41.673
> 
> 标签：javascript, qml, qtquick2

从 javascript 使用创建对象后：

```
function createNextItem(item, where) {
    component = Qt.createComponent(val);
    sprite = component.createObject(where, {
                                    "id": "currentitem",
                                    "anchors.left": nextlabel.right,
                                    "anchors.leftMargin": units.gu(4),
                                    "anchors.verticalCenter": nextlabel.verticalCenter
                                });

    if (sprite === null) {
        // Error Handling
        console.log("Error creating object");
    }
} 
```

如果我尝试添加`"transform": Scale { xScale: 0.5 ; yScale: 0.5}`我得到一个`SyntaxError: Unexpected token {`但如果我做这样的事情`"transform": "Scale { xScale: 0.5 ; yScale: 0.5}"`，它不起作用......有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T01:03:15.303

Never mind... i got it by making a container parent item, scaling it and then creating the new object in it, something like this:

```
Item {
    id: currentitem
    transform: Scale { xScale: 0.5; yScale: 0.5}
    Component.onCompleted: { Jsfile.createItemObjects(ChkItem.getCurrentItem(), currentitem)
        }
    } 
```

# c# - 似乎无法修复未分配的局部变量

> ID：15593729
> 
> 赞同：1
> 
> 时间：2013-03-24T00:32:15.253
> 
> 标签：c#, arrays, methods, unassigned-variable

所以我一直在为一个项目编写这个程序，一切似乎都很好。我一直在用我的导师代码检查我的工作，但我没有前 40 行代码的副本可供检查，我不知道是什么导致了这个问题

```
 static void Main(string[] args)
    {
        int count = 0;
        string[] names = new string[MAX_SIZE];
        int[] scores = new int[MAX_SIZE];
        string[] splitInput = new string[MAX_SIZE];

        int sum = 0;
        int minScore = 0;
        int maxScore = 0;

        string input;

        string minName;
        string maxName;

        Console.WriteLine("===============Saturday Night Coders================");
        Console.WriteLine("===============Bowling Score Program================");

        for (int i = 0; i < MAX_SIZE; i++)
        {

            Console.WriteLine("\n Please Enter a name and a score separated by a space");
            Console.WriteLine("Enter a blank line when finished");

            input = Console.ReadLine();

            if (input == "")

            {
                Console.WriteLine("===========INPUT COMPLETE=========");
                break;
            }

            splitInput = input.Split();

            string name = splitInput[0];
            int score = int.Parse(splitInput[1]);

            names[i] = name;
            scores[i] = score;
            sum += score;

            if (minScore > score)
            {
                minScore = score;
                minName = name;
            }
            if (maxScore < score)
            {
                maxScore = score;
                maxName = name;
            }

            count = i + 1;
        }

        double average = sum / count;
        Console.WriteLine("Here are the scores for this game");
        PrintScores(names, scores, count);
        Console.WriteLine("Congratulations {0}, your score of {1} was the highest", maxName, maxScore);
        Console.WriteLine("{0} , your score of {1} was the lowest, Maybe you should find a new hobby", minName, minScore);
        Console.WriteLine("\n The team average was {0:f2}", average);
        Console.WriteLine("Press any key to continue...");
        Console.ReadKey();
    }
    static void PrintScores(string[] names, int[] scores, int count)
    {
        for (int i = 0; i < count; i++)
        {
            Console.Write("{0} \t {1}", names[i], scores[i]);
            if (scores[i] == MAX_SCORE)
            {
                Console.WriteLine("*");
            }
            else
            {
                Console.WriteLine("");
            }
            Console.WriteLine();
        }
    }

} 
```

我遇到的问题是这里的这段代码

```
if (minScore > score)
            {
                minScore = score;
                minName = name;
            }
            if (maxScore < score)
            {
                maxScore = score;
                maxName = name;
            }

            count = i + 1;
        }

        double average = sum / count;
        Console.WriteLine("Here are the scores for this game");
        PrintScores(names, scores, count);
        Console.WriteLine("Congratulations {0}, your score of {1} was the highest", maxName, maxScore);
        Console.WriteLine("{0} , your score of {1} was the lowest, Maybe you should find a new hobby", minName, minScore); 
```

局部变量的未分配使用错误与 minName 和 maxName 值有关。如果我用 minName = ""; 声明它们 最大名称 = ""; 代码将编译，但得分最低的人的名字将是“”，得分将为 0。这一切似乎都有效，直到我添加了 PrintScores 方法。任何帮助表示赞赏，我已经摆弄了一个多小时，但似乎仍然无法找到解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:38:20.377

您声明`minName`并`maxName`在您的 for 循环之外。您只在 for 循环内分配它们......问题：如果 for 循环不运行，则不会分配变量。因此编译器禁止使用它们。

解决方案：只需使用有意义的值初始化它们，例如`string.Empty`.

# php - php 类无法调试任何错误，如何使用 php 类，OOP PHP 不工作，cURL JSON API

> ID：15593736
> 
> 赞同：0
> 
> 时间：2013-03-24T00:32:58.293
> 
> 标签：php, class, curl

这个问题实际上是一个处理身份验证的愚蠢问题（密钥错误）所以基本上这就是我没有收到任何响应的原因。谢谢你，对不起所有的麻烦。我会投票删除这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:45:54.310

尝试：

```
$c = new dnsClass();
$zone = $c->createZone($domain);
print_r($zone); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:40:47.777

[error_reporting](http://www.php.net/manual/en/function.error-reporting.php)采用 PHP 常量 E_ALL 等。要打开错误，请使用：

`error_reporting(E_ALL)`， 不是`"E_ALL"`

此外，您正在设置 $ch 上的所有选项，这应该是从`curl_init()`. 由于缺少此功能，因此没有任何事情发生。如果您将代码修改为以下内容，您至少应该会看到一些结果。

```
public function theCurl($url, $postFields){
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $url);
    ... 
```

另外，正如另一个答案中提到的，您需要创建一个`new`dnsClass。

```
$c = new dnsClass();
$c->createZone($domain);
print_r($c); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T00:49:32.313

看看krumo()，它非常适合调试。

# version-control - Mercurial：从 HG 存储库中永久删除敏感数据？

> ID：15593739
> 
> 赞同：8
> 
> 时间：2013-03-24T00:33:12.510
> 
> 标签：version-control, mercurial

我知道在 Mercurial 中，“历史是神圣的”。

但是假设有人不小心提交了他们不应该提交的内容，例如包含密码或其他内容的设置文件。甚至可以说在任何人意识到它之前已经过去了一段时间，所以它已经徘徊了几个提交。显然，发现者随后会从存储库中删除敏感数据。

有没有办法从提交历史记录中永久清除该文件或敏感数据，就好像它从未存在过一样？或者这些敏感数据会永远永远是回购的永久部分吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:17:41.493

有几种方法可以做到这一点。所有这些都需要在引入更改后克隆您的存储库或从中提取变更集的每个人的合作。

使用哪种方法取决于提交数据的确切性质以及它在历史记录中的位置。所有这些都需要使用 Mercurial 扩展，并且无法使用核心 Mercurial 来完成。幸运的是，所有必需的扩展都默认随 Mercurial 一起提供，只需启用即可。

我不会在这里详细介绍这些方法，因为有几个答案在这个问题中给出了不同的方法，这是一个骗局。我只是想明确一点，该问题中接受的答案在技术上是正确的，但没有用。这实际上是可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-24T12:19:31.097

当且仅当此存储库**没有逃到野外**时，您可以通过实质上克隆到新存储库来从历史记录中删除文件，同时在此过程中过滤敏感文件，使用***hg convert*** [Hg Convert Extension doc here](https://www.mercurial-scm.org/wiki/ConvertExtension "汞转换扩展手册")

通常，当我们在发布或交付给客户端之前审核存储库时，我们会发现一些东西，例如带有密码的 web.config 或 ini 文件。

默认情况下未启用该扩展，但我使用的所有客户端都包含该扩展，您需要先启用它，然后 Mercurial 才能识别转换命令。

如果使用 Tortoise Hg 或 Kiln，例如：

1.  打开 Tortoise Hg -> 全局设置 -> 扩展
2.  选中“转换”旁边的框
3.  点击确定

或者直接编辑 Mercurial.ini：

```
[extensions]
convert = 
```

转到存储库上方的目录（在我的示例中，我的存储库是 HelloApp）：

1.  创建一个名为 filemap.txt 的文件

2.  添加一行，其中包含要排除的文件名的完整路径。

    ```
    exclude HelloApp/sensitive.config 
    ```

3.  打开命令提示符，cd 到包含您的 filemap.txt 的同一目录，然后运行 ​​hg convert

    ```
    cd C:\projects

    hg convert --filemap filemap.txt HelloApp HelloApp_clean 
    ```

4.  然后获取最新的工作副本：

    ```
    cd HelloApp_clean
    hg update 
    ```

您需要使用干净的副本在服务器上创建一个全新的克隆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T17:18:32.370

不，不是。如果您可以说服有权删除和重新克隆的每个人，您可以从将来的访问权限中删除该文件。

但是，例如，如果您将 root 密码推送到公共 Bitbucket 存储库 - ？你应该改变它。您的信息现在是公开的和泄露的，应该被视为这样。对不起。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T14:29:44.230

我还没有研究钩子如何工作的细节，所以这个想法可能不会完全发挥出来。可以设置挂钩来禁止提交、推送和拉取敏感文件。在提交或推送 ( ) 之前会运行一些钩子`precommit and preoutgoing`。**Mercurial: The Definitive Guide**还讨论了保护钩子使其不被规避的另一个问题。

# lucene - Lucene：如何获得查询和文本之间的相似度

> ID：15593743
> 
> 赞同：0
> 
> 时间：2013-03-24T00:33:31.387
> 
> 标签：lucene, information-retrieval, similarity

我对一个文本有很多查询。示例“北美”、“欧洲”、“亚洲”（查询）和一个文本（例如关于美国的大文本（例如 Wikipedia 文章））。

现在我建立一个大文本的索引，然后我发送上面提到的查询。现在 Lucene（版本 4）计算一个分数。但正如我通过不同的搜索所知道的那样，这不是真正的百分比，也不是查询和文本之间的真正相似性。使用 TFIDFSimilarity 我只能得到非常小的分数（<0.05）

但我希望得到以下相似之处：“北美”==> 90% “欧洲”、“亚洲”==> 40%

..或其他东西，但它应该是一个真正的相似之处。

我能做些什么？有人有什么想法吗？

# java - 接口如何用作类？

> ID：15593747
> 
> 赞同：1
> 
> 时间：2013-03-24T00:33:58.170
> 
> 标签：java, interface, resultset

也许这是一个非常愚蠢的问题。

我正在尝试学习使用 Java 连接到 MySql 数据库，并且我已经完成了。我的问题是：

```
ResultSet rs=statement.executeQuery(sql); 
```

这段代码工作正常。然后使用

```
rs.next(); 
```

我可以得到我想要的信息。

但是 ResultSet 是一个接口吗？怎么会有方法？

我的文件顶部有这个导入：

```
import java.sql.ResultSet; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T00:36:12.723

`ResultSet`是`interface`由 的返回类型实现的`statement.executeQuery()`。`ResultSet`简单地说“对于任何人来实现我的类型，他们必须至少提供这些操作/方法”。如果返回类型`statement.executeQuery()`想要实现 ResultSet，则由该类提供接口中所有方法的实现。

由于`polymorphism`，您可以使用任何类[`implements`](https://stackoverflow.com/questions/4558111/what-does-implements-do-on-a-class)ResultSet 作为 ResultSet 对象本身。

您可以[在此处阅读有关多态性的更多信息。](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T00:41:36.703

`ResultSet`确实是一个`interface`- 它指定了一个合同。`Object`退货方必须履行本`statement.executeQuery(sql);`合同。

所以`statement.executeQuery(sql);`返回一些`Object`，因此必须`implements`为`ResultSet` `interface`合同中定义的所有方法提供具体的实现。

一个简单的例子

```
public static interface MyInterface {

    void doStuff();
}

public static class MyInterfaceImplementer implements MyInterface {

    @Override
    public void doStuff() {
        System.out.println("Doing stuff");
    }
}

public static void main(String[] args) throws InterruptedException {
    final MyInterface mi = new MyInterfaceImplementer();
    mi.doStuff();
} 
```

输出：

```
Doing stuff 
```

因此`MyInterface`提供了一个实现对象必须具有`public void doStuff()`方法的合同。`MyInterfaceImplementor`表示 if 通过声明 it 来履行该合同`implements MyInterface`。

因此，我可以将我的引用分配给`MyInterface`它的具体实现者，`interface`并且实际调用的方法是`MyInterfaceImplementer`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T00:36:04.383

这是面向对象编程的主要特征之一，它被称为继承。

这意味着任何子类都可以在声明了母类的地方使用。

在您的情况下，该方法`statement.executeQuery(sql);`返回一个`ResultSet`. 在这种情况下，语句正在创建一个实现`ResultSet`并返回它的子类。作为子类，所有母类方法都已实现并可调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T00:36:26.557

包中的接口`java.sql`是数据库厂商在为你编写JDBC驱动时实现的。

加载 JDBC 驱动程序时会加载实现类。

这就是您的代码只需切换 JDBC 驱动程序 JAR 并更改连接参数即可更改数据库的方式。（只要您坚持直接使用 JDBC 并且不使用任何供应商特定的 SQL。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-24T00:43:15.853

接口具有方法，在设计良好的系统中，您使用接口声明的方法。任何实现接口的类都必须定义接口声明的所有方法并为它们提供实现。

因此，当您在接口 ResultSet 上使用方法时，您实际上是在使用在该接口的实现上声明的方法。

# android - NDK javah 失败：类文件的版本错误 50.0，应该是 49.0

> ID：15593748
> 
> 赞同：0
> 
> 时间：2013-03-24T00:34:14.923
> 
> 标签：android, eclipse, android-ndk, javah

我查看了有关**javah**失败的各种帖子，但我没有发现任何与此错误有关的信息：

```
error: cannot access com.acme.ndktest.Sample
bad class file: bin/classes/com/acme/ndktest/Sample.class
class file has wrong version 50.0, should be 49.0
Please remove or make sure it appears in the correct subdirectory of the classpath.
com.sun.tools.javac.util.Abort
    at com.sun.tools.javac.comp.Check.completionError(Check.java:169)
    at com.sun.tools.javadoc.DocEnv.loadClass(DocEnv.java:149) 
```

我在 Internet 上能找到的最接近的信息是 [http://yonghoon.wikidot.com/ndk#toc4](http://yonghoon.wikidot.com/ndk#toc4)

> JVM 的每个新版本都会增加类文件的版本号。下面的列表显示了我知道 Java 6 的类版本号：50.0 版 Java 5 (1.5)：49.0 版 Java 1.4.2：48.0 版

我不明白我使用的是 1.6，Eclipse 设置为 JDK 合规性 1.6，我从 /usr/lib/jvm/java-6-sun/jdk1.6.0_31/bin/javah 文件夹运行 javah。

/usr/lib/jvm/java-6-sun/jdk1.6.0_31/bin/javah -classpath bin/classes -jni com.acme.ndktest.Sample

当我使用 1.6 时，我不确定为什么它说应该是 49。

更多信息 javac -version -> javac 1.6.0_31 javap -v -classpath bin/classes com.acme.ndktest.Sample | grep 版本次要版本：0，主要版本：50

在 /etc/alternatives 中，大多数 java 项目都指向 java-6-sun，如 java 和 javac 但 javaws 指向 java-6-openjdk-amd64

我正在运行 Eclipse 3.7 Ant 是否与构建这些标头有任何关系

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T10:26:09.560

问题是某些软件包已被另一个应用程序安装到 /usr/java/packages/lib/ext 中。

javac 使用这些来确定要使用的最大可能 jdk 版本。所以这样做会失败

```
javac SomeFile.java -target 1.6 
```

给出此错误消息**Javac 版本 1.6 无法为目标 1.6 构建**

当您使用详细选项 javac -verbose -version SomeFile.java 运行它时

它将列出 /usr/java/packages/lib/ext 中的所有文件

将所有文件移出 /usr/java/packages/lib/ext

它编译得很好。

# php - mysqli 准备语句不起作用

> ID：15593755
> 
> 赞同：0
> 
> 时间：2013-03-24T00:35:54.260
> 
> 标签：php, mysql, mysqli

我一直坚持这个mysqli statment。我看不出它有什么问题，我可以显示错误，这样我就可以看到哪里出错了。

你能帮我解决这个错误吗，或者请向我解释如何显示错误，以便我修复它。

这是我的代码

```
$add_record = $db->prepare('UPDATE vehicles SET name= ?, VINnum= ?, maker= ?, model= ?, color= ?, year= ?, oilChange= ?, registrationExp= ?, insuranceExp= ?, dailyRate= ?, weekleyRate= ?, monthleyRate= ?, currentMillage= ?, oilChangeMillage= ?, licensePlate= ?, vehicleCost= ? WHERE Vehicles_id = ?');

            $add_record->bind_param('sssssisssdddsssdi', $name, $VIN, $maker, $model, $color, $year, $oilChange, $registration, $insurance, $dailyRate, $weekleyRate, $monthleyRate, $currentMillage, $changeOilMillage, $plate, $cost, $id);                      

            if( $add_record->execute() ){
                $pass_list = '<li>Good to go</li>'; 
            } else {
                $error_list .= '<li>SQL error</li>';
                echo $db->error;    
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:16:08.703

哦，我的上帝，我讨厌这些小错误。我在这个非常简单的错误上浪费了超过 5 个小时。表单中我的操作路径中的文件路径指向了不正确的文件，这就是我不断收到此错误的原因。

谢谢你们的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:43:59.360

查看错误，更改

```
if( $add_record->execute() ){
                $pass_list = '<li>Good to go</li>'; 
            } else {
                $error_list .= '<li>SQL error</li>';
                echo $db->error;    
            } 
```

至

```
if( $add_record->execute() ){
            $pass_list = '<li>Good to go</li>'; 
        } else {
            $error_list .= '<li>SQL error</li>';
            echo $add_record->error."<br/>";    // <--- this is what you need to change
            echo $db->error."<br/>";    // <--- this is what you need to change

        } 
```

完成后不要忘记关闭语句

```
$add_record->close(); 
```

此外，根据您回显错误的位置，它可能不会显示在 html 页面上。要检查这一点，请查看您的页面源

# php - Javascript 和 PHP 之间的时间戳

> ID：15593759
> 
> 赞同：25
> 
> 时间：2013-03-24T00:36:01.040
> 
> 标签：php, javascript, timestamp

Javascript：

我有一些日期的对象单元格

```
params.date = cell.getDate();
params.timestamp = cell.getDate().getTime() / 1000;
console.log(params); 
```

*对象{日期：Thu May 09 2013 00:00:00 GMT+0800（中国标准时间），时间戳：1368028800}*

然后我尝试检查 PHP 中的时间戳

```
$date = '1368028800';
echo date('Y-m-d', $date); 
```

*2013-05-08*

一日之差。为什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-12-10T18:23:58.987

当您从 Javacript 日期对象获取时间戳时：

它的输出将以毫秒为单位

```
 <script>
        var d = new Date();
        alert(d.getTime());

     </script> 
```

输出：1386746353000

以秒为单位的 php 日期对象时间戳

```
<?php 
        $date = new DateTime();
        echo $current_timestamp = $date->getTimestamp();
     ?> 
```

输出：1386746353

因此，当您打算将 javascript 日期对象时间戳与 php 日期对象一起使用时，您应该将 javascript 的时间戳除以 1000 并在 php 中使用它

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-24T00:41:42.320

```
params.date = cell.getDate(); 
```

返回日期而不是时间。

```
params.timestamp = cell.getDate().getTime() / 1000; 
```

正在将日期转换为日期+时间 - 不读取当前时间。

但即使您在 javascript 中获取时间戳，PHP 日期函数的输出也将取决于它所在的时区。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-24T07:40:24.363

The UNIX Timestamp 1368028800 corresponds to the date Wed, 08 May 2013 16:00:00 GMT. In your example, you are on the China Standard Time (GMT+8), so Javascript display the datetime for this timezone (8 hours later -> 09 May)

# java - 为什么我在 if != null 检查中得到 NullPointerException

> ID：15593766
> 
> 赞同：1
> 
> 时间：2013-03-24T00:37:04.310
> 
> 标签：java, nullpointerexception

我已经查看了很多关于这个陈旧问题的问题，但我找不到答案来解释为什么我在检查 null 时会得到 NPE。我自己和另一个伙伴正在构建一个自平衡二分搜索，只需使用旋转，因此如果新根有一个需要放置在另一侧的子节点，我们需要存储一个临时节点。

在这里，我们检查 nextRoots 左或右孩子是否为空，如果不是，我们将其存储在临时节点中以供将来放置。

```
 Node temp = null;
            nextRoot = root.rightChild; // Set the next root
            oldRoot = root; // Hold the old root

            // If next roots left child is NOT null
            // Lets store it and null it now

            if (nextRoot.leftChild != null) // This check throws NPE, not nextRoot, just the nextRoot.leftChild
            {
                temp = nextRoot.leftChild;
                nextRoot.leftChild = null;
            } 
```

我的印象是 if 检查应该是规避这个问题的方法，但它本身就是导致问题的原因。任何帮助将不胜感激，如果您需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:41:09.093

如果 nextRoot.leftChild 抛出 NPE... nextRoot 为空。尝试检查代码行为是否正确。如果是...修改 if 如下：

`if (nextRoot != null && nextRoot.leftChild != null)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T00:42:41.747

检查是否`nextRoot`不为空除了`nextRoot.leftChild`

```
if (nextRoot != null && nextRoot.leftChild != null) 
```

如果您可以调试此代码，则很容易确定原因而不是将其发布在此处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T00:40:24.987

您必须获得 NPE，因为 nextRoot 被设置为空。请检查设置 nextRoot 的行。

# vb.net - 使用 EF5 Linq to Entities 作为 DAL 到 BLL 到 ObjectDataSource

> ID：15593767
> 
> 赞同：0
> 
> 时间：2013-03-24T00:37:06.277
> 
> 标签：vb.net, linq, objectdatasource, entities, bll

我正在与 Linq to Entites 斗争。我是 EF5 和 Linq 的新手。我正在用 VB.NET 编程。我一直在使用将数据集作为 DAL 返回到 BLL 中的表适配器，然后我将其链接到 ObjectDataSource。现在我从 VS2005 ASP.NET 2.0 升级到 VS2012 到 ASO，.NET 4.0 以使用 EF5，并且我已将 EF5 设置为 DAL，我正在尝试重写 BAL 以使用 Linq to Entities 转到 ObjectDataSource。我可以使用我用外键设置的导航对多个表进行一些复杂的查询，但我不明白如何让返回类型与需要数据集的 ObjectDataSource 一起使用。

```
ContentQ = From ct In DAL.Contents, cd In ct.ContentDuplicateTypes, ce In ct.ContentEditors _
           Where ct.ContentId = Contentid And cd.ShowOnWeb = ShowOnWeb And cd.Hide = Hide And ce.UserId = UserId And ct.websiteId = websiteid Select ct, cd, ce 
```

对于返回单个表，例如 ContentQ= From ct in DAL.Contents select ct

为什么这在下面起作用？为什么我必须使用 include 方法填充这个类以使用 1 对多的 2 个表将其放入 ObjectDataSource 中？

```
<System.ComponentModel.DataObjectMethodAttribute(ComponentModel.DataObjectMethodType.Select, True)> _
Public Function GetContentFiles() As ContentData
    Dim objContentData As New ContentData

    Using _SBEF As New SBEF5
        Dim objContentDuplicateType = From d In _SBEF.ContentDuplicateTypes.Include("Content") Select d

        For Each objQuery In objContentDuplicateType.ToList
            With objContentData
                'Content

                .Description = objQuery.Content.Description
                .FileName = objQuery.Content.FileName
                .Draft_Path = objQuery.Content.Draft_Path
                .Live_Path = objQuery.Content.Live_Path
                .HeaderTitle = objQuery.Content.HeaderTitle

                'ContentDuplicateType
                .ContentId = objQuery.ContentId
                .DisplayHeader = objQuery.DisplayHeader
                .OrderNumber = objQuery.OrderNumber
                .ShowOnWeb = objQuery.ShowOnWeb
                .Hide = objQuery.Hide
                .DateCreated = objQuery.DateCreated
                .ContentTypeID = objQuery.ContentTypeId
            End With
        Next

        GetContentFiles = objContentData

    End Using

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:00:41.400

你为什么不使用[EntityDataSource](http://blogs.msdn.com/b/adonet/archive/2008/06/18/tutorial-entity-data-source-control.aspx)？

# java - 通过单击按钮创建变量

> ID：15593769
> 
> 赞同：0
> 
> 时间：2013-03-24T00:37:10.373
> 
> 标签：java, android, xml

我想知道单击按钮后如何获取 EditText 中的文本，并将此值存储在一个新变量中，清除我的 EditText，然后再次执行相同的操作，因此将值存储在不同的变量中，然后进行计算，我的大问题是将每个值存储在不同时间的变量中，如果有人可以提供帮助，不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:39:25.727

```
Button myButton = (Button)findViewById(R.id.BUTTON_ID);
EditText myEditText = (EditText)findViewById(R.id.EDITTEXT_ID);
myButton.setOnClickListener(new OnClickListener(){
    public void onClick(View v){
        String myText = myEditText.getText().toString();
        //do whatever with myText;
        myEditText.setText("");
    }
}); 
```

其中 BUTTON_ID 和 EDITTEXT_ID 是在您的 XML 文件中分别分配给每个的 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:51:10.820

ArrayList listString = new ArrayList();

```
Button myButton = (Button)findViewById(R.id.BUTTON_ID);
EditText myEditText = (EditText)findViewById(R.id.EDITTEXT_ID);
myButton.setOnClickListener(new OnClickListener(){
public void onClick(View v){
    listString.add(myEditText.getText().toString());
    myEditText.setText("");
}
}); 
```

获取字符串值

```
for(int i=0;i<listString.size();i++)
{
           System.out.println("String values..."+listString.get(i).toString());
} 
```

# python - Python - 用连字符连接字符串表达式？

> ID：15593775
> 
> 赞同：0
> 
> 时间：2013-03-24T00:38:09.067
> 
> 标签：python, string, variables, hyphen

“给定三个已赋值的 int 变量，areaCode、exchange 和 lastFour，编写一个字符串表达式，其值是由单个连字符 (-) 连接的每个这些变量的字符串等价物所以如果 areaCode、exchange 和 lastFour，有值 800、555 和 1212，表达式的值将是“800-555-1212”。

这是我的代码，但我很困惑为什么它不起作用......

```
str("areaCode" + "exchange" + "lastFour") 
```

但是我在哪里放置连字符？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:42:44.040

```
'-'.join([str(num) for num in [areaCode, exchange, lastFour]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T00:39:54.517

您需要从变量中删除引号`"`，代码才能正常工作。问题是，如果你包装变量，它们将被视为文本，而不是变量。只需通过删除引号来修改您的代码应该允许您运行您的程序。

此外，根据您的分配，您应该`"-"`在变量之间添加连字符。

```
str(areaCode + "-" + exchange + "-" + lastFour) 
```

如果您想使代码更干净，您可以采用以下方法之一。

```
"%s-%s-%s" % (areaCode, exchange, lastFour) 
```

或者

```
"{}-{}-{}".format(areaCode, exchange, lastFour) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T00:40:13.980

```
>>> areaCode, exchange, lastFour = 800, 555, 1212
>>> '{0}-{1}-{2}'.format(areaCode, exchange, lastFour)
'800-555-1212' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T00:40:48.517

首先，您没有正确获取变量。

```
areaCode, exchange, lastFour 
```

和

```
"areaCode", "exchange", "lastFour" 
```

非常不同。不带引号的版本指的是变量，但带引号的版本指的是文字字符串“areaCode”、“exchange”和“lastFour”。

作为 python 解释器的快速演示

**字符串字面量**

```
>>> areaCode = "5555"
>>> print("areaCode")
areaCode 
```

**多变的**

```
>>> areaCode = "5555"
>>> print(areaCode)
5555 
```

至于连字符，请尝试

```
'%s-%s-%s' % (areaCode, exchange, lastFour) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-24T00:40:02.510

你会想要类似的东西

```
areaCode = "555"
exchange = "555"
lastFour = "5555"
phonenumber = "-".join([areaCode, exchange, lastFour]) 
```

# sql-server-2008 - MyGeneration 或 SQL Server 性能问题

> ID：15593776
> 
> 赞同：0
> 
> 时间：2013-03-24T00:38:11.567
> 
> 标签：sql-server-2008, mygeneration

我对 mygeneration doodad 对象有一个有趣的问题。我正在使用 doodad 存储过程将从文件中读取的大约 25K 记录输入到我的 SQL Server 数据库中。我需要填满 5 张桌子。每次我运行调用 doodads 的 C# 程序时，我发现前 8K 记录在 1-2 分钟内输入，而其余 16K 记录则需要数小时。这让我发疯，但我不知道出路。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:15:46.510

您是否有权访问 SQL Server 客户端工具？如果是这样，并且您可以运行 SQL Profiler，您可以查看针对 SQL Server 执行的语句及其频率。从这里，您可以查看服务器的吞吐量，并且您可以查看请求本身是否在变慢（结束和开始之间的时间正在增加），或者它们是否只是花费越来越长的时间来执行（开始和开始之间的时间）端正在增加）。

另外，您说前 8K 记录非常快，而其余的（17K 左右）则非常慢。性能会随着时间的推移而下降（每个 1K 比之前的 1K 慢），还是性能变慢然后保持稳定？如果性能稳步下降，您可能会看到内存泄漏或数据布局问题 - 如果您多次执行程序，或者数据已经在表中，会发生什么？如果将其他数据放入表中，然后运行插入程序会给您相同的性能情况，那么我会查看应用程序。如果预先填充数据会立即将性能降低到无法接受的水平，那么您的数据库可能需要一些索引，或者存在存储问题。

# bash - Bash 程序不会进入 if 语句。（完全初学者）

> ID：15593779
> 
> 赞同：0
> 
> 时间：2013-03-24T00:38:24.780
> 
> 标签：bash, conditional

有人可以帮我更正这段代码。我不明白为什么它不会运行我的条件语句。for 循环应该确保输入不等于数组中的任何项目。如果检查它是否假设运行最后一个 if 语句，但事实并非如此。

```
 echo "Enter a Course Number"
  read input
  declare -i testVar=0

  for j in "${courseName[@]}"
  do
      if [$input -eq $j]
      then
        testVar=1
        echo "Course Already Exists"
        sleep 2
      fi
  done

 if [$testVar -eq 0]
  then
    echo "successful" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:40:36.917

您需要尊重 , 之前和之后的`[`空格`]`：

```
if [ $input -eq $j ]

# and

if [ $testVar -eq 0 ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:41:18.330

[ 和 ] 周围必须有空格，将它们视为保留字，例如 fi 或 if。在 bash 中，它们是内置的 shell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T01:12:22.883

@sudo_O 是正确的，你应该包括什么`courseName`。

但是，在我看来，您在比较`$input`and时使用了错误的运算符`$j`。`-eq`是算术运算符，而运算符`=`用于比较字符串。

尝试：

```
if [ "$input" = "$j" ] 
```

# c# - 从 JSON 对象中提取 Base64 编码的 WAV

> ID：15593780
> 
> 赞同：1
> 
> 时间：2013-03-24T00:38:27.643
> 
> 标签：c#, json, base64

创建一个调用 PHP 服务器的 .Net 3.5 程序集。返回值一个 JSON 对象。JSON 对象有一个 Base64 编码的 WAV 文件（见下文）。尝试使用 Newtonsoft.Json 将 WAV 从“值”转换。花了8个小时尝试...

这是我尝试过的代码

```
int count = 0;
byte[] buf = new byte[8192];
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
Stream resStream = response.GetResponseStream();
count = resStream.Read(buf, 0, buf.Length);
string json = Encoding.ASCII.GetString(buf, 0, count);

JObject jo = JObject.Parse(json);
//JObject jo = (JObject)JsonConvert.DeserializeObject(json); 
```

这就是我卡住的地方。错误读取：

***“未终止的字符串。预期的分隔符：\”。路径‘result.value’，第 1 行，位置 3449。”***

几乎就像字符串太长了......

甚至还没有得到我从互联网上获取的需要调整的 Base64 转换代码

```
char[] base64CharArray;
inFile = new System.IO.StreamReader(inputFileName,System.Text.Encoding.ASCII);
base64CharArray = new char[inFile.BaseStream.Length];
inFile.Read(base64CharArray, 0, (int)inFile.BaseStream.Length);
base64String = new string(base64CharArray); 
```

解决方案是周一上线第一件事......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:58:45.910

这应该可以正常工作。虽然可能不是最有效的解决方案。不要忘记关闭你的流，因为它们实现了`IDisposable`.
我在`WebClient`这里使用，但实际上并没有什么不同。我认为`HttpWebRequest`在这种情况下这是多余的。

```
 WebClient client = new WebClient();
            Stream stream = client.OpenRead("http://waps.repli-con.com/services/ivrservices/getUserNameRecording/10000");
            StreamReader reader = new StreamReader(stream);

            JToken token = JObject.Parse(reader.ReadToEnd().ToString());

            string base64string = token.SelectToken("result").SelectToken("value").ToString();
            Byte[] b = Convert.FromBase64String(base64string);
            System.IO.File.WriteAllBytes(@"C:\Users\user\Desktop\test.wav", b);   
            stream.Close(); 
```

# c - C中的结构数组，告诉我我的成员不在结构或联合中

> ID：15593784
> 
> 赞同：0
> 
> 时间：2013-03-24T00:38:53.930
> 
> 标签：c, arrays, function, pointers, struct

C新手在这里。我一直在寻找论坛，似乎无法获得我需要的帮助。我想做的很简单。我已经在我的标题中声明了一个结构，然后我创建了一个这个结构的数组。

然后我调用一个函数，传入一个指向这个结构数组的指针，但是在函数中我得到了错误：

> 错误：在不是结构或联合的情况下请求成员“XXXXX”

我相信这个错误是我将结构数组传递给函数的方式，但我似乎无法找出正确的方法。

我的 header.h 如下：

```
#ifndef HEADER_H_INCLUDED
#define HEADER_H_INCLUDED

typedef struct PhoneNumber
{
    char name[40];
    unsigned char number[10];

} PhoneNumber;

#endif // HEADER_H_INCLUDED 
```

我还没有真正使用我的显示功能，我的代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include "header.h"

int main()
{
struct PhoneNumber PhoneNumbers[10];

//input phone number
inputPhoneNumbers(&PhoneNumbers);

//display PhoneNumber
displayPhoneNumbers(&PhoneNumbers);

return EXIT_SUCCESS;
}

int inputPhoneNumbers(int size, PhoneNumber *details[size])
{
    size = 0;
    printf("Enter a name\n");
    scanf("%s\n", &details[size].name);
    printf("Enter %s's number\n", details[size]->name);
    scanf("%s\n", &details[size].number);

   return EXIT_SUCCESS;
}

int displayPhoneNumbers(PhoneNumber *number)
{
    printf("%s\n",number->name);
    printf(number->number);

} 
```

有人可以指出我正确的方向吗？

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:42:11.883

符号需要保持一致。你有：

```
scanf("%s\n", &details[size].name);
printf("Enter %s's number\n", details[size]->name);
scanf("%s\n", &details[size].number); 
```

我认为应该是：

```
scanf("%s\n", details[size]->name);
printf("Enter %s's number\n", details[size]->name);
scanf("%s\n", details[size]->number); 
```

但是，还有许多其他问题，我仍在努力解决。

* * *

这是一个单一的文件 SSCCE（[简短、自包含、正确的示例](http://sscce.org/)）。

```
#include <stdio.h>
#include <stdlib.h>

typedef struct PhoneNumber
{
    char name[40];
    unsigned char number[10];
} PhoneNumber;

int inputPhoneNumbers(int size, PhoneNumber details[size]);
void displayPhoneNumbers(PhoneNumber *number);

int main(void)
{
    struct PhoneNumber PhoneNumbers[10];

    inputPhoneNumbers(10, PhoneNumbers);

    displayPhoneNumbers(PhoneNumbers);

    return EXIT_SUCCESS;
}

int inputPhoneNumbers(int size, PhoneNumber details[size])
{
    size = 0;
    printf("Enter a name\n");
    scanf("%s\n", details[size].name);
    printf("Enter %s's number\n", details[size].name);
    scanf("%s\n", details[size].number);

    return EXIT_SUCCESS;
}

void displayPhoneNumbers(PhoneNumber *number)
{
    printf("%s\n", number->name);
    printf("%s\n", number->number);
} 
```

这里的主要变化是`inputPhoneNumbers()`函数类型的变化；你想传递一个数组`PhoneNumber`，而不是一个指针数组`PhoneNumber`。这意味着一致的符号使用`.`而不是`->`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:44:11.733

改变`int inputPhoneNumbers(int size, PhoneNumber *details[size])`

到`int inputPhoneNumbers(int size, PhoneNumber *details)`

并这样称呼它 `inputPhoneNumbers(10,PhoneNumbers);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T00:59:42.650

这是一个让你不迷惑的尝试（希望我自己不会迷惑）。同样正如乔纳森所说，要保持一致，我会尝试使用最简单的符号。

**访问结构**

```
PhoneNumber a;
printf("%s", a.name); // Note a.name is a char pointer to the first byte of name 
```

**通过指针**

```
PhoneNumber *a;
printf("%s", a->name); // Uninitialized pointer, would need allocation 
```

**结构数组**

```
PhoneNumber a[10];
printf("%s", a[0].name);
printf("%s", (a+0)->name); // note a is a PhoneNumber pointer to the a[0] 
```

**指向结构的指针数组**

```
PhoneNumber *a[10];
printf("%s", a[0]->name); // Note a[0] is an uninitialized pointer
printf("%s", (*a[0]).name); // One would need to allocate storage 
```

**指向结构数组的指针**

```
PhoneNumber (*a)[10];
printf("%s", (*a)[0].name);
printf("%s", a[0][0].name);
// Sometimes, when you have the right address, you can simply cast:
printf("%s", ((PhoneNumber*)a)->name); 
```

以下是您可能想要在这里执行的操作：

```
int main()
{
   struct PhoneNumber PhoneNumbers[10]; // Array of structs, contiguous in memory

   //input phone number
   inputPhoneNumbers(PhoneNumbers); // Pass a pointer to the first element

   //display PhoneNumber
   displayPhoneNumbers(PhoneNumbers);

   return EXIT_SUCCESS;
}

int inputPhoneNumbers(int size, PhoneNumber *details) // Take a pointer to a PhoneNumber
{
   /// ...
} 
```

# refactoring - 优化和减少 Flask 路由中的冗余

> ID：15593785
> 
> 赞同：1
> 
> 时间：2013-03-24T00:39:12.037
> 
> 标签：refactoring, flask, flask-security

我有许多对象，`User`，`Role`，`Post`，`Category`可能还有更多，并且有许多管理视图，基本上只显示和处理与这些对象关联的表单。我当前的代码如下所示：

```
admin = Blueprint('admin', __name__)

@login_required
@admin.route('/users')
def users():
  return list_object(User)

@roles_required('admin')
@admin.route('/users/new',  methods = ['GET', 'POST'])
def create_user():
    return create_object(User, UserForm)

@roles_required('admin')
@admin.route('/users/delete/<int:user_id>',  methods = ['GET', 'POST'])
def delete_user(user_id):
   return delete_object(User, user_id)

@roles_required('admin')
@admin.route('/users/<int:user_id>',  methods = ['GET', 'POST'])
def edit_user(user_id):
    return edit_object(User, user_id, UserForm)

@login_required
@admin.route('/categories')
def categories():
  return list_object(Category)

@roles_accepted('admin', 'editor')
@admin.route('/categories/new',  methods = ['GET', 'POST'])
def create_cat():
    return create_object(Category, CategoryForm)

@roles_accepted('admin', 'editor')
@admin.route('/categories/delete/<int:cat_id>',  methods = ['GET', 'POST'])
def delete_cat(cat_id):
   return delete_object(Category, cat_id)

@roles_accepted('admin', 'editor')
@admin.route('/categories/<int:cat_id>',  methods = ['GET', 'POST'])
def edit_cat(cat_id):
    return edit_object(Category, cat_id, CategoryForm) 
```

等等。`edit_object`, `list_object`&c 也被定义。我的问题是：我怎样才能减少这里的冗余？`@login_required`并由`@roles_required`提供`flask-security`。如何优化此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:47:01.943

当您拥有这些相同的设置时，您可能需要查看[Flask-Restless Extension](https://flask-restless.readthedocs.org/en/latest/)。如果这不能满足您的需求，您可以使用 Flask 的[可插入（基于类）视图](http://flask.pocoo.org/docs/views/)：

```
from flask.views import View

LIST, NEW, EDIT, DELETE = "list", "new", "edit", "delete"
METHODS = (LIST, NEW, EDIT, DELETE)

class AbstractManager(View):
    DataClass = None
    Form = None

    methods = ["GET", "POST"]
    decorators = [login_required, create_roles_decorator_for("admin", "editor")]

    def dispatch_request(self, method=LIST, id=None):
        if not method in METHODS:
            abort(404)

        if method == LIST and id is not None:
            method = EDIT

        return getattr(self, method)(id)

    def list(self, id):
        if request.method != "GET":
            abort(405)
        return list_object(self.DataClass)

    def new(self, id):
        return create_object(self.DataClass, self.Form)

    def edit(self, id):
        return edit_object(self.DataClass, id, self.Form)

    def delete(self, id):
        return delete_object(self.DataClass, id)

class UserManager(AbstractManager):
    DataClass = User
    Form = UserForm

class CategoryManager(AbstractManager):
    DataClass = Category
    Form = CategoryForm 
```

或者，您[可以避免编写愚蠢的类](http://me.veekun.com/blog/2013/03/03/the-controller-pattern-is-awful-and-other-oo-heresy/)而只使用一个函数：

```
def register_api_for(DataClass, ClassForm, name=None, app=None):
    name = name if name is not None else DataClass.__name__.rsplit(".", 1)[1]
    base_route = "/" + name

    @login_required
    @app.route(base_route, endpoint="list_" + name)
    def list():
        return list_object(DataClass)

    # remaining implementation left as an exercise for the reader 
```

# python - Intellij IDEA 12：如何即时获取 PEP8

> ID：15593786
> 
> 赞同：4
> 
> 时间：2013-03-24T00:39:13.087
> 
> 标签：python, intellij-idea, pycharm, pep8

[PyCharm 2.7](http://blog.jetbrains.com/pycharm/2013/02/long-awaited-pep-8-checks-on-the-fly-improved-doctest-support-and-more-in-pycharm-2-7/)似乎已经支持这一点

我怎样才能为我的 IntelliJ IDEA 12 获得它？目前对于每个文件我都这样做

![在此处输入图像描述](../Images/c934221d4c53b20f921026dad92b7d7f.png)

**更新**
正如@CrazyCoder 所述，更新到IDEA 12.1 后，我可以在输入时看到PEP8 建议

![在此处输入图像描述](../Images/7ec597d10da1de2e176b07fffadde881.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T00:54:25.740

可在[IDEA 12.1](http://confluence.jetbrains.com/display/IDEADEV/IDEA+12.1+EAP)中使用新的 Python 插件 (2.10.1)：

![pep8](../Images/e4d220dcba3776936aa9008931541aca.png)

![插入](../Images/db4fcacc4660717bd9dd5437a0e09453.png)

# php - Ajax 拒绝获取服务器时间

> ID：15593787
> 
> 赞同：0
> 
> 时间：2013-03-24T00:39:17.563
> 
> 标签：php, javascript, ajax

我一直在关注我一直在阅读的 Ajax 书中的一个示例。

我已按照说明将代码放在一起。这个想法是获取 php 服务器时间并在单击按钮时显示它。

该出版物是 2006 年出版的，我不确定我所写的任何内容是否已过时并且可能不再受支持而导致其损坏？

如有任何指导，我将不胜感激，谢谢！

AJAX 页面

```
<!DOCTYPE html>
<html>
<head>
    <title>Ajax Demonstration</title>
    <style>
        .displaybox{
            width: 150px;
            margin:0 auto;
            background-color: #fff;
            border: 2px solid #000;
            padding: 10px;
            font:24px normal verdana, helvetica, arial, sans-serif;
        }
    </style>
    <script language="JavaScript" type="text/javascript">
        function getXMLHTTPRequest(){
            try{
                reg = new XMLHttpRequest();
            }
            catch(err1){
                try{
                    req = new ActiveXObject("Msxm12.XMLHTTP");
                }
                catch(err2){
                    try{
                        req = new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    catch(err3){
                        req = false;
                    }
                }
            }
        }

        var http = getXMLHTTPRequest();

        function getServerTime(){
            var myurl = 'telltimeXML.php';
            myRand = parseInt(Math.random()* 999999999999999);
            //add random number to URL to avoid cache problems
            var modurl = myurl+"?rand="+myRand;
            http.open("GET", modurl, true);
            //set up the callback function
            http.onreadystatechange = useHttpResponse;
            http.send(null);
        }

        function useHttpResponse(){
            if(http.readyState == 4){
                if(http.status == 200){
                    var timeValue = http.responseXML.getElementsByTagName("timenow")[0];
                    document.getElementById('showtime').innerHTML = timeValue.childNodes[0].nodeValue;
                }
            }
            else{
                document.getElementById('showtime').innerHTML = '<img src="anim.gif">';
            }
        }
    </script>
</head>
<body style="background-color:#ccc; text-align:center" onLoad="getServerTime()">
    <h1>Ajax Demonstration</h1>
    <h2>Getting the server time without page refresh</h2>
    <form>
        <input type="button" value="Get Server Time" onClick="getServerTime()" />
    </form>
    <div id="showtime" class="displaybox"></div>
</body> 
```

PHP 页面

```
<?php
header('Content-Type: text/xml');
echo "<?xml version='1.0' ?><clock1><timenow>".date('H:i:s')."</timenow></clock1>";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:56:59.223

这一行：

```
var http = getXMLHTTPRequest(); 
```

期待`getXMLHttpRequest()`实例`return`。但是，`function`而是尝试直接设置`req`：

```
// ...

req = new XMLHttpRequest();

// ... 
```

可能最简单的解决方案是将每个更改`req =`为`return`：

```
function getXMLHTTPRequest(){
    try{
        return new XMLHttpRequest();
    }
    catch(err1){
        // etc.
    }
} 
```

不过，您也可以提前声明`http`并直接设置它：

```
var http;

function getXMLHTTPRequest(){
    try{
        http = new XMLHttpRequest();
    }
    catch(err1){
        // etc.
    }
}

getXMLHttpRequest(); // no need for `http =` here, since they're in the function 
```

# jsf-2 - 在 JSF 应用程序中使用 Glassfish 集群避免丢失 Session 和 ViewState 数据

> ID：15593790
> 
> 赞同：2
> 
> 时间：2013-03-24T00:39:33.583
> 
> 标签：jsf-2, glassfish-3, failovercluster, session-replication

我们在集群应用程序中使用此配置：

glassfish-web.xml ：

```
<session-config>
    <session-manager persistence-type="replicated">
        <manager-properties>
            <property name="persistenceFrequency" value="web-method" />
            <property name="relaxCacheVersionSemantics" value="true" />
        </manager-properties>
        <store-properties>
            <property name="persistenceScope" value="session" />
        </store-properties>
    </session-manager>
    <session-properties />
    <cookie-properties />
</session-config> 
```

会话由 Glassfish 存储和复制，问题是如果集群出现问题并且需要重新启动，我们将丢失所有 Session 和 ViewState 数据。

有没有办法插入像 memcached 或 mysql 这样的外部存储来存储 Session 和 ViewState 信息，以确保我们永远不会丢失我们的客户端数据？

PS：我们广泛使用@ManagedBean @ViewScoped，我们真的希望将视图状态保持在安全的地方

# mysql - 在一列，两列或两者上的索引？

> ID：15593794
> 
> 赞同：2
> 
> 时间：2013-03-24T00:39:56.560
> 
> 标签：mysql, sql

假设我有一个简单的表`user_id`(INT)、`date`(DATE) 和`earnings`(FLOAT)。我正在尝试决定如何索引此表。

目前，我将 PRIMARY 键设置为`user_id`, `date`。

但并非所有查询都使用此键。我在下面粘贴了一些示例查询。所有这些都经常运行。

```
SELECT SUM(earnings) FROM stats WHERE user_id=? //Get total earnings
SELECT SUM(earnings) FROM stats WHERE user_id=? AND date between ? AND ? //Get earnings for date range

SELECT user_id FROM stats WHERE date=$today ORDER BY earnings DESC LIMIT 0,5 //Get todays highest earners
SELECT user_id FROM stats WHERE date>$month ORDER BY earnings DESC LIMIT 0,5 //Get months highest earners 
```

如您所见，前两个查询很好地使用了索引，但后两个没有。

我正在考虑在 上创建一个索引`date`，`earnings`但感觉很奇怪，因为`date`它已经在一个索引中。这是正确的解决方案吗？

如果没有，索引该表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:47:32.817

> 我正在考虑创建一个关于日期、收入的索引，但因为日期已经在索引中，所以对此感到很奇怪。

可以根据需要在多个索引中包含同一列。创建一个索引`date,earnings`肯定是可以的，但是一个索引`date`也可能就足够了。您还可以考虑单独建立索引`date`，`user_id`看看第二个查询是否在大致相同的时间执行（应该）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:48:36.207

这取决于作为日期谓词结果的数据大小。如果它很大（数千条记录），那么它`ORDER BY`可以从收益指数中受益匪浅。如果它相对较小，那么您可能不会从索引中看到太多好处，事实上，如果在此表上经常发生这种情况，您可能会对插入、更新和删除造成伤害。

在您的示例中，您有一个谓词 only `date`，复合主键 of`(user_id, date)`不会使您受益，因为复合键索引从左到右工作，这意味着在 and 上有一个索引查找`user_id`，`user_id, date`但不是`date`单独的。

离题，但`float`不是货币的好数据类型。

# ruby-on-rails - Rails 3.2 + Ruby 1.9.3，created_at 返回时区错误

> ID：15593803
> 
> 赞同：1
> 
> 时间：2013-03-24T00:40:43.207
> 
> 标签：ruby-on-rails, ruby, activerecord, timezone

我升级到 Rails 3.2 和 Ruby 1.9.3，我得到了一个非常奇怪的行为

我有一个名为 Entry 的模型。创建新条目时，它会以当前日期和时间插入到数据库中。

但是当我运行时，`Entry.find_by_id(THE_ENTRY_ID).created_at`我得到了在日期时间创建的“正确”，但在不同的时区中，例如：在数据库中：

> 2013-03-24 00:05:29

在 Rails 控制台和应用程序中：

> 2013 年 3 月 23 日星期六 20:05:29 EDT -04:00

为什么突然返回错误的时区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:11:21.000

阅读 DOCS 并看到此 rails casts 后确定： [http ://railscasts.com/episodes/106-time-zones-revised](http://railscasts.com/episodes/106-time-zones-revised)

现在一切都清楚了。

```
config.time_zone = 'Eastern Time (US & Canada)' 
```

此设置是负责将所有时间对象转换为当前时区的实际设置。这就是我将其视为-4的方式

这个设置：

```
config.active_record.default_timezone 
```

是决定如何在数据库中保存时间的那个，但是......它只获得 2 个可能的值： :local 和 :UTC ，默认值为 :UTC

当我使用 rails 控制台查看我的条目时，显示的时间是在转换为“东部时间”之后，以便查看存储在数据库中的实际日期使用：

```
created_at_before_type_cast 
```

它返回 UTC 时间，因为它是默认值

我认为在数据库中它存储在我的时区 +2 中的原因是因为我使用了 MySQL Workbench，它的 GUI 只是向我显示了本地机器时间中的日期时间值。

概括：

真正重要的设置：

```
config.time_zone 
```

它工作得很好。通过 DOCS 很重要

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:43:07.627

检查中的配置`application.rb`。如果未设置时区，rails 将采用操作系统的默认时区。要解决此问题，请将 UTC 设置为时区。

# compression - 为什么从 .mp3 文件创建的 .wav 文件的大小要大得多？

> ID：15593806
> 
> 赞同：5
> 
> 时间：2013-03-24T00:41:00.903
> 
> 标签：compression, mp3, wav, file-format

众所周知，.wav 是一种用于未压缩音频文件的格式。另一方面，.mp3 文件通常是音频文件压缩后的结果。例如，只有频率太接近的两个音调中较大的一个（以至于它们相互掩盖）在压缩后被保留。此外，量化噪声被引入在感知上不重要的时间或频谱部分（例如太高或太低的频率）。显然，大量（感知上的）冗余信息被丢弃，从而可以减小文件大小。

我的**问题**是：为什么从 .mp3 获得的 .wav 文件比 .mp3 文件大得多？从信息论的角度来看，不能添加与歌曲相关的额外信息，那么为什么要增加大小呢？这仅仅是数据以 .wav 格式存储的结果吗？任何答案/参考将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T00:51:01.197

两者存储音频的方式日夜不同。简而言之，WAV 文件（即 PCM 音频）存储的数据比 MP3 文件多得多。

PCM 音频量化每个样本的压力。采集了很多样本​​。CD 质量的音频每通道每秒使用 44,100 个样本。这里的红线是样本：

![在此处输入图像描述](../Images/d7396805c27cf1f96f1135a7d8446096.png)

图表来自： [http ://en.wikipedia.org/wiki/Sampling_rate](http://en.wikipedia.org/wiki/Sampling_rate)

MPEG-1 第 3 层（和许多其他有损音频压缩编解码器）使用不同的方法来编码音频。他们不是随时间测量压力，而是随时间测量频率分量。MP3 编码器确定信号中短时间（称为帧）中存在哪些频率。一帧可能有 576 个样本或这么长。对于这些样本，它们会播放一组频率。

现在，所有这些都被过度简化了。MP3 有很多很好的技巧来过滤掉会被其他人掩盖的频率，并且播放的一些很好的平滑以使其听起来接近原始。

您可能会在这里更深入地找到我的答案： [https ://video.stackexchange.com/a/635/129](https://video.stackexchange.com/a/635/129)

# python - 使用 pygame 将多帧/移动 .gif 图像加载到 python 中

> ID：15593813
> 
> 赞同：2
> 
> 时间：2013-03-24T00:41:47.307
> 
> 标签：python, loading, gif

有谁知道使用 pygame 将 .gif 图像加载到 python 中的简单方法？我尝试使用 'pygame.image.load(path)' 加载 .gif 图像，尽管只加载了第一帧，但它仍然有效。因为我不得不使用循环一次显示多个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:45:41.413

简单地说，你不能在 Pygame 中显示多帧 GIF，除非你使用额外的库。相反，爆炸你的 GIF。您必须手动完成所有操作，因为 Pygame 不控制流时间等，而这对于动画 GIF 是必需的。

# android - 如何将 Google Map API 路由发送到 Android Navigator？

> ID：15593818
> 
> 赞同：2
> 
> 时间：2013-03-24T00:42:10.590
> 
> 标签：android, google-maps-api-3

几个学期前，我开始了一个班级的项目，但从未完成，因为我不知道该怎么做！我这门课得了B，但它一直困扰着我。

我可以获取您的位置并在您的 android 上绘制通往各个预先确定的位置（足球场）的路线：http: [//www.billynair.com/school/dgm3790/final/](http://www.billynair.com/school/dgm3790/final/)（抱歉，目前还不能在桌面上运行) 使用谷歌地图 API。它会向您显示路线，您可以放大和缩小，但我希望它发送到您设备的导航应用程序。我四处打听，搜索到我的手指流血，一年后仍然没有答案。

有没有办法将此 API 生成的路由发送到 Android 的导航应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:36:19.097

您可以尝试以下方法。它应该将您获得的坐标转发到默认导航应用程序。

```
String tag = "google.navigation:q=" + the_latitude + "," + the_longitude;
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(tag));
startActivity(intent); 
```

然而，这种方法似乎完全是非官方的，而且文档很少。

# java - Java中“this”的真正含义是什么？

> ID：15593827
> 
> 赞同：0
> 
> 时间：2013-03-24T00:43:06.803
> 
> 标签：java, this

我查看了[为什么在引用静态方法中的字段时不能使用关键字“this”？](https://stackoverflow.com/questions/15593420/why-cant-i-use-the-keyword-this-when-referring-to-fields-in-static-methods)

并认为通过引用变量访问静态成员是可以的，但使用`this`访问此类成员是不行的。看看下面的代码。

```
static int month; 

public static void setMonth(int x)
{ 
Date date = new Date();
date.month = x;  //fine, why ?
    this.month = x;  //compiler error, why ?
} 
```

它清楚地表明它`this`与参考变量不同。如果是这样，那么它到底是什么？我需要理解它的真正含义，`this`才能理解为什么它不能从静态上下文中访问。

**请不要给我指向随机博客或 oracle 教程的链接，这些链接说`this`不能从静态上下文中使用——我已经知道了。**我想超越这一点，了解为什么不能使用它。

链接问题中的代码 -

```
public class Date
{

static int month; 

public static void setMonth(int x)
{ 
 this.month = x;  //compiler error
}

public static int getMonth()
{
 return month;  //compiles just fine, no error
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:51:59.283

当您调用非静态方法时，例如 myObject.myMethod()，编译器会添加一个额外的秘密参数，其值为“myObject”，该参数在方法中可用作“this”。

当您调用静态方法时，例如 MyClass.myStaticMethod()，没有对象可以分配秘密参数的值，因此没有额外的秘密参数，因此“this”在静态方法中不能有值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T00:46:14.887

```
public static void setMonth(int x)
{ 
 this.month = x;  //compiler error
} 
```

`this`指当前对象实例。静态方法中没有这样的东西，因为静态方法与整个类相关联，而不是任何特定实例。

所以你根本不能`this`在静态方法中使用。

您引用的字段 ( `month`) 实际上是静态字段而不是实例字段并不重要。你不需要`this`在这里，但如果你试图访问它，编译器会阻止你。

```
public static int getMonth()
{
 return month;  //compiles just fine, no error
} 
```

`month`是一个静态字段。就像静态方法一样，它属于类本身，不需要实例来解析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T06:25:18.130

在您的代码中，`date.month = x;`完全等同于`Date.month = x;`编译器在编译时所做的事情。你放在左边的东西实际上并不重要。出于这个原因，非常不鼓励通过引用访问静态字段或方法——看起来点左边的东西很重要，但事实并非如此；只有表达式的编译时类型很重要。考虑

```
(new Date()).month = x;
((Date)null).month = x;
// suppose SubDate is a subclass of Date, with its own static "month" field
((Date)new SubDate()).month = x; 
```

上面所有的事情都做同样的事情。

所以当你说

> 并认为通过引用变量访问静态成员是可以的

永远不应使用通过引用变量访问静态成员。因为这是一个巨大的错觉，导致了许多误解和错误；并且可能永远不应该在 Java 中被允许。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T00:58:44.660

这真的很简单，一旦你明白什么`static`意思。

关键字（以这种`this`方式使用时）表示“当前对象”。

当您将方法声明为`static`时，您是说该方法将始终被调用，而不指定特定对象作为当前对象。所以，当你在一个`static`方法中时，没有“当前”对象......作为逻辑结果你不能使用`this`，因为它没有意义。

如果您在实例方法或构造函数中，则只有一个“当前”对象¹。在前一种情况下，“当前”对象是您调用该方法的对象。在后一种情况下，它是您正在创建的对象。

* * *

^(1 ...或实例初始化程序块)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T01:10:55.957

为了完整起见，`this`确实可以用来引用静态字段，前提是它是在非静态代码中完成的，因此`this`存在。它只是不能在`this`不存在的地方完成。

```
public class Test {
  static int month;
  public static void main(String[] args) {
    new Test().setMonth(5);
    System.out.println(month);
  }
  public void setMonth(int x)
  { 
      this.month = x;
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-24T00:50:50.667

关键字`this`引用当前对象实例。

您不能从上下文中使用它，因为在 java`static`中没有定义 of 概念的实例。*所有实例*都可以访问`static`一个方法。`static`

 *一个例子

```
public static final class MyClass {

    public static final class MyInnerClass {

        public void doStuff() {
            System.out.println(this.toString());
        }

        @Override
        public String toString() {
            return "MyInnerClass toString.";
        }
    }

    public void doStuff() {
        System.out.println(this.toString());
        new MyInnerClass().doStuff();
    }

    @Override
    public String toString() {
        return "MyClass toString.";
    }
}

public static void main(String[] args) throws InterruptedException {
    new MyClass().doStuff();
} 
```

输出

```
MyClass toString.
MyInnerClass toString. 
```

所以`this`in`doStuff`方法中的 in`MyClass`指的是`MyClass`from inside`doStuff`被调用的实例。

`this`in`MyInnerClass`不是指调用它的实例，而是`MyClass`指调用`MyInnerClass`它的实例`doStuff`。

`this` **总是**指在其中使用关键字的对象的实例。如果没有实例，如方法中的情况`static`，`this`则不能使用关键字。*

# java - 具有供客户端使用的通用变量持有者的部分可变 API 类

> ID：15593832
> 
> 赞同：0
> 
> 时间：2013-03-24T00:43:43.267
> 
> 标签：java, api, design-patterns, immutability

我正在构建一个 API。它的功能之一是执行一些资源分析（想象一个文档、URI 或 DB，不重要什么）并返回一个 POJO`List<Finding>`所在的位置。`Finding`我希望一旦从 API 返回不可变，所有数据都由 API 返回，但是，为了方便客户端 `Finding`，我希望有一个方法。`setUserNote(String)`

这样做的原因是客户端获得了`Finding`s 的列表，它可以在处理它们的同时`setUserNote`将自己的数据保存在对象本身中，就像一个普通的笔记一样。我认为这将是一种简洁的便利，而不是客户端必须扩展`Finding`只是添加一个变量或将其封装为实例变量，然后`ExtendedFinding.someMethod() { return this.finding.someMethid(); }`对于 `Finding`. 此外，至少可以说，对于客户端来说，从他从 API 中获取的内容中进行构建会很`ExtendedFinding`麻烦`Finding`。这就是为什么我打算只给他们一个他们可以方便使用的字段。

问题：

1.  这是糟糕的设计吗？为什么？我以前从未做过这样的事情，也从未见过 API 类带有任意数据持有者变量以方便客户使用。

2.  假设这是一个糟糕的设计。什么是适用的设计模式，可以轻松地传播 Find 以由客户端构造 ExtendedFinding？当然，您可以拥有类似 public 的东西，`ExtendedFinding(Finding) { /* copy vars one by one */ }`但这远非优雅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:58:47.757

First your third point, `final` in no way makes a class immutable - it signifies that the class cannot be inherited from. So you cannot `extend` a `final` class.

For your main problem, why don't you cast your POJO to an `interface` and return a list of that rather than the underlying POJO. You can then make your actual POJO class package private so that the client cannot cast it back:

```
public static interface Finding {
    //all public getters

    void setUserNote();
}

static final class FindingImpl implements Finding {

    @Override
    public void setUserNote() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }
}
private final Collection<FindingImpl> findingImpls = new ArrayList<>();

public Collection<Finding> getFindings() {
    final Collection<Finding> findings = new ArrayList<>();
    for (final FindingImpl fi : findingImpls) {
        findings.add(fi);
    }
    return findings;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:58:36.373

这不一定是糟糕的设计。不过这听起来并不常见。在设计 API 时牢记 API 的可能用途很重要，但我觉得这有点过分了：

*   它打破了单一职责原则：该类现在既可以表示用户`Findings` *，*也可以作为用户指定数据的容器。
*   它限制用户使用`String`笔记而不是任意对象。例如，如果需要，他们将无法使用 Map 或自定义 POJO。（不过，这可以使用泛型轻松解决。）

更好的解决方案可能是在类中定义`equals`和`hashCode`方法`Finding`。通过这种方式，这些对象可以用作 a 的键`Map`，并且用户可以将他们的笔记存储在您的 API 之外。

另一种解决方案可能定义一个新类来表示 a`Finding`和用户注释对。这比在其他不可变的类中存储笔记具有更清晰的“感觉” `Finding`，但增加的复杂性可能使其不值得付出努力。哪种解决方案最好取决于具体情况；没有正确或错误的答案。

（顺便说一句，`final`关键字不会使类不可变。这只是意味着您不能为它定义子类。您可以创建最终的可变类 - 例如[`StringBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T02:47:28.103

我很困惑。如果你返回一个发现给我，你认为它是不可变的，那么我一次能够在那个对象中注入一个音符，这有什么意义呢？假设其他人可能会看到相同的发现，不是吗？

这里的正确答案是你应该有另一个类：FindingComment，带有评论者的 id、Finding 的 id 和时间戳。

您将课程扩展到对评论进行评论的直觉肯定是正确的！

# c - 为什么 Makefile 认为它是最新的，尽管进行了更改？

> ID：15593837
> 
> 赞同：0
> 
> 时间：2013-03-24T00:44:06.643
> 
> 标签：c, makefile

**C 生成文件**

这个问题有一个密切的重复，但我仍然无法解决我的问题。

我有以下 Makefile：

```
CFLAGS0 = 
CFLAGS1 = -O1
CFLAGS2 = -O2
CFLAGS3 = -O3
CFLAGS4 = -O4

mountain:   timer.o mountain.o
    gcc -o mountain timer.o mountain.o

timer.o: timer.c timer.h
    gcc -c -O2 timer.c       

mountain.o: mountain.c timer.h
    gcc -c $(CFLAGS1) mountain.c   #I'm trying to make changes here

clean:
    rm *.o mountain 
```

我正在尝试通过更改标志以不同的优化级别进行编译。但是当我尝试制作时，我被告知“山”是最新的？我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:56:24.113

makefile 查看每个配方的源代码的修改时间，以决定它们是否应该更改。如果您要更改 makefile 本身，它不会注意到。但是您可以根据每个食谱告诉它：

```
mountain.o: mountain.c timer.h Makefile
    gcc -c $(CFLAGS1) mountain.c 
```

显然，如果您的 makefile 被命名为不同的名称，您将不得不更改它以匹配。

此外，如果您使用的是 GNU Make，您可以告诉它*始终*认为某个特定配方已过时。但是你应该避免这种情况，因为它消除了 make 的主要优化；

```
.phony : mountain.o
mountain.o: mountain.c timer.h
    gcc -c $(CFLAGS1) mountain.c 
```

这适用于抽象规则，例如`clean`.

# android - 在 Eclipse 中使用 android-maven-plugin 进行简单的非 API Android JUnit 测试？

> ID：15593842
> 
> 赞同：4
> 
> 时间：2013-03-24T00:44:36.817
> 
> 标签：android, eclipse, junit, android-maven-plugin

我每天都在 Eclipse 中运行非 Android JUnit 测试。今天我想测试我的一些 Android 库类。哦，痛苦。

我有一个使用 android-maven-plugin 的 Android 库项目。我有源文件`src/main/java`，我的（新）单元测试在`src/test/java`. 我的 POM 具有适当的 JUnit 依赖项和 android-maven-plugin 引用。

有时我会`Uri`从`File`. 有时我有一个现有的 Java`URI`实例，该实例是从 a 创建的`File`，然后我将其转换为`Uri`. 由于我既不信任 Java 也不信任 Android 的文件和 URI（不要让我开始了解 Java 如何破坏 URI 中的 UNC 路径，或者 Java 如何破坏`equals()`URI 中的合同），我想创建一个简单的单元测试来创建一个临时文件，`Uris`从两种不同的方法创建，并确保它们相等。

所以我像以前一样做了一个小的 JUnit 单元测试，并尝试在 Eclipse 中使用`Ctrl+F11`. Eclipse 询问我这是“Android JUnit 测试”还是“JUnit 测试”。好吧，显然是Android。所以我选择第一个选项并得到：

```
[2013-03-23 21:37:10 - mylib] ------------------------------
[2013-03-23 21:37:10 - mylib] Android Launch!
[2013-03-23 21:37:10 - mylib] adb is running normally.
[2013-03-23 21:37:10 - mylib] Could not find mylib.apk! 
```

嗯……那不是很成功。所以我删除了运行配置并尝试“JUnit Test”。现在我得到一个不同的对话框，要求我选择我喜欢的启动器，“Android JUnit Test Launcher”或“Eclipse JUnit Test Launcher”。我选择哪个并不重要；我得到：

```
Class not found com.example.MyUnitTest
java.lang.ClassNotFoundException: com.example.MyUnitTest
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClass(RemoteTestRunner.java:693)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClasses(RemoteTestRunner.java:429)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我已经阅读了 android-maven-plugin，如果他们只使用 Android jar 中的类但不进行任何 API 调用，我可以在 Eclipse 中本地运行单元测试，这就是我在这里所做的。那我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-16T19:20:23.233

一种解决方法是单击工具栏中的“运行方式...”按钮，然后选择“运行配置...”。如果您选择您创建的 JUnit 启动器并转到其“类路径”选项卡，您可以将`bin/classes`文件夹添加到 JUnit 启动器类路径。现在应该运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T00:54:50.953

不要将`Run As - Android JUnit Test`其仅用于运行[Android 测试项目](http://developer.android.com/tools/testing/testing_eclipse.html#CreateTestProjectEclipse)。

使用`Run As - JUnit Test`时，**`ClassNotFoundException`**是由于 ADT 和 Eclipse 内置的 JUnit Test Runner 对项目输出文件夹的不一致。ADT 会生成 .class 下的所有文件**`bin/classes`**，而内置的 JUnit Test Runner 会在 .class 下查找 .class 文件**`target/classes`**。您在 Eclipse 中的 Android 项目从不使用**`target/classes`**，所以它仍然是空的，这就是您得到**`ClassNotFoundException`**异常的原因。

~~AFAIK 无法更改 Eclipse 内置的 JUnit Test Runner 以使用与默认目标/类不同的文件夹。~~ **查看[Ricardo 的答案](https://stackoverflow.com/questions/15593842/simple-non-api-android-junit-test-in-eclipse-with-android-maven-plugin/17136833#17136833)，了解如何添加`bin/classes`到内置 JUnit Test Runner 的类路径。**另请注意，您不能将 Android 项目的默认输出文件夹更改为其他文件夹**`../bin/classes`**，因为它会破坏 ADT 构建过程。

肮脏的解决方法（用于解决 ClassNotFoundException）是手动将所有内容复制**`bin\classes`**到**`target\classes`**，请注意，每次更改源代码时都需要这样做。

`mvn test`从命令行或通过 Eclipse运行时，这不是问题，因为 Maven 使用**`target\classes`**并知道如何正确填充它。请注意，通过使用这种方法，您将无法在 Eclipse 中使用带有漂亮红色/绿色错误栏的 JUnit 窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:31:36.790

一个 android junit 测试应该位于一个单独的模块中，作为 Android Maven 插件示例项目中的设置（例如 morseflash 示例）。这是由于路径设置过载以及需要构建 apk 并将其部署在设备/模拟器上以运行测试。Android junit 测试根本不是单元测试，而是集成测试（或者在这种情况下称为仪器测试）。

# python - 使用 Python 从文本文件中提取数据

> ID：15593844
> 
> 赞同：4
> 
> 时间：2013-03-24T00:45:21.057
> 
> 标签：python, text, python-3.x

所以我有一个大文本文件。它包含以下格式的一堆信息：

```
|NAME|NUMBER(1)|AST|TYPE(0)|TYPE|NUMBER(2)||NUMBER(3)|NUMBER(4)|DESCRIPTION| 
```

抱歉含糊不清。所有信息都采用上述格式，每个描述符之间是分隔符“|”。我希望能够在文件中搜索“NAME”并在它自己的标签中打印每个描述符，例如这个例子：

```
Name
Number(1):
AST:
TYPE(0):
etc.... 
```

如果我仍然感到困惑，我希望能够搜索名称，然后打印出每个用“|”分隔的信息。

任何人都可以帮忙吗？

编辑这是文本文件一部分的示例：

|特雷弗·琼斯|70|AST|白|地球|3||500|1500|住在养老院的老人|

这是我到目前为止的代码：

```
 with open('LARGE.TXT') as fd:
    name='Trevor Jones'
    input=[x.split('|') for x in fd.readlines()]
    to_search={x[0]:x for x in input}
    print('\n'.join(to_search[name])) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:50:48.547

就像是

```
#Opens the file in a 'safe' manner
with open('large_text_file') as fd:
    #This reads in the file and splits it into tokens, 
    #the strip removes the extra pipes  
    input = [x.strip('|').split('|') for x in fd.readlines()]
    #This makes it into a searchable dictionary
    to_search = {x[0]:x for x in input} 
```

然后搜索

```
to_search[NAME] 
```

根据您希望使用答案的格式

```
print ' '.join(to_search[NAME]) 
```

或者

```
print '\n'.join(to_search[NAME]) 
```

提醒一句，此解决方案假定名称是唯一的，如果它们不是更复杂的解决方案，则可能需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T00:51:01.873

首先，您需要以某种方式分解文件。我认为字典是这里最好的选择。然后你可以得到你需要的东西。

```
d = {}
# Where `fl` is our file object
for L in fl:
    # Skip the first pipe
    detached = L[1:].split('|')
    # May wish to process here
    d[detached[0]] = detached[1:]
# Can do whatever with this information now
print d.get('string_to_search') 
```

# javascript - 尝试在 node.js 中使用 http.get 访问 API 时出错

> ID：15593848
> 
> 赞同：0
> 
> 时间：2013-03-24T00:45:46.743
> 
> 标签：javascript, node.js

我是 node.js 的初学者，现在我正在尝试从 http.get 获取 API 的结果。但是，在运行代码时，我收到了这个错误：

```
Error: getaddrinfo ENOTFOUND
Error: getaddrinfo ENOTFOUND
at errnoException (dns.js:37:11)
at Object.onanswer [as oncomplete] (dns.js:124:16) 
```

我正确地要求http（我已经测试过了）这是我说明问题的函数：

```
function getData(apiUrl, getUrl) {

    var options = {
        host : apiUrl,
        port : 80,
        path : getUrl
    };

    var content = "";

    http.get(options, function(res) {
        console.log("Got response: " + res.statusCode);

        res.on("data", function(chunk) {

            content += chunk;
            console.log(content);

        });

    }).on('error', function(e) {
        console.log("Error: " + e.message); 
        console.log( e.stack );
    });

} 
```

并这样称呼它：

```
getData('https://api.twitter.com', '/1/statuses/user_timeline.json?&screen_name=twitter&callback=?&count=1'); 
```

希望你能帮助我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:14:17.360

您必须使用 https 而不是 http 模块。参见[http://nodejs.org/api/https.html](http://nodejs.org/api/https.html) 在选项对象中，“host”应该只是主机名，即 api.twitter.com。指定端口不是必须的，但在 https 的情况下“80”是错误的。除非另有明确说明，否则 HTTPS 为 443。

您可以生成正确的选项，如下所示：

```
 parseURL = require('url').parseURL;
    parsedURL = parseURL(apiURL);
    var options = {
        hostname : parsedURL.hostname,
        path : getUrl
    }; 
```

为了提高效率，最好在 getData 函数之外定义 parseURL 函数。

如果您的 getData 函数同时支持 http 和 https url 很重要，您可以检查 parsedURL.protocol。如果“https”，则使用`https.get`，如果“http”，则使用`http.get`.

# javascript - 基于对象属性对数组进行排序 - Javascript

> ID：15593850
> 
> 赞同：21
> 
> 时间：2013-03-24T00:46:01.087
> 
> 标签：javascript, arrays, sorting

我有一个名为`canvasObjects`.

每个对象都有一个名为 的属性`z`。

我想根据 objects 对这个数组进行排序`z`。如何使用该`sort()`方法执行此操作？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-24T00:59:50.997

You just need to pass in a comparator to the sort function

```
function compare(a,b) {
  if (a.attr < b.attr)
     return -1;
  if (a.attr > b.attr)
    return 1;
  return 0;
}

canvasObjects.sort(compare); 
```

Or inline

```
canvasObjects.sort(function(a,b) {return (a.attr > b.attr) ? 1 : ((b.attr > a.attr) ? -1 : 0);} ); 
```

See this [POST](https://stackoverflow.com/questions/1129216/sorting-objects-in-an-array-by-a-field-value-in-javascript)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-24T01:27:04.103

尝试了此处发布的其他答案，但后来我发现以下方法效果最好。

**升序**：

```
canvasObjects.sort(function(a,b) { return parseFloat(a.z) - parseFloat(b.z) } ); 
```

**降序**：

```
canvasObjects.sort(function(a,b) { return parseFloat(b.z) - parseFloat(a.z) } ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T01:06:58.980

将匿名函数发送到返回属性“z”的减法的排序方法

```
var arr = [{z:2},{z:4},{z:5},{z:1},{z:3}];

arr.sort(function(a,b) {return a.z - b.z}); 
```

上面将 z 中的数字按 1、2、3、4、5 排序。要反转顺序，使其返回“bz - az”。

# knockout.js - 将属性添加到由敲除映射插件生成的 viewModel 中的子对象

> ID：15593857
> 
> 赞同：1
> 
> 时间：2013-03-24T00:46:49.433
> 
> 标签：knockout.js

我有以下视图模型：

```
var ViewModel = function(setData, dummyCard) {
    var self = this;
    ko.mapping.fromJS(setData, {}, self);

    self.cardCount = ko.computed(function() {
        //debugger;
        return self.cards().length;
    });

    self.editing = ko.observable(false);

    self.edit = function () {
        debugger;
        self.editing(true);
    };

}; 
```

此 viewModel 用于显示属于 Set 的卡片列表。我试图允许用户通过以下方式编辑这些卡片的面（同时双面）：

```
<!-- ko foreach: cards -->
      <!-- ko foreach: sides -->
         <div data-bind="visible: !$root.editing()" class="span5 side-study-box">
             <p data-bind="text: content">SIDE 1</p>
         </div>
      <!-- /ko -->
<!-- /ko --> 
```

我在这里的示例中添加了编辑功能（参见 Bert Bertington 的 hasFocus 示例）：[http ://knockoutjs.com/documentation/hasfocus-binding.html](http://knockoutjs.com/documentation/hasfocus-binding.html)

这并不完全有效，因为 Edit 属性附加到 $root (Set) 对象，而不是 $parent (Card) 对象。我*认为*完成这项工作的方法涉及“创建”方法，如下所示：[向使用 Knockout JS 映射插件创建的视图模型添加属性](https://stackoverflow.com/questions/8673928/adding-properties-to-the-view-model-created-by-using-the-knockout-js-mapping-plu)

将这些属性带到一方的父级需要什么语法？

编辑：到目前为止，我有：

```
var ViewModel = function(setData, dummyCard) {
    var self = this;

    var cardModel = function(data) {
        debugger;
        ko.mapping.fromJS(data, {}, this);

        this.editing = ko.observable(false);

        this.editing = function() {
            debugger;
            this.editing(true);
        };
    };

    var mapping = {
        'cards': {
            create: function(options) {
                return new cardModel(options.data);
            }
        }
    };

self.cardCount = ko.computed(function() {
        //debugger;
        return self.cards().length;
    }); 
```

不过，它并不能完全与 js 的其余部分一起使用 - 现在“cards()”是未定义的。现在深入研究它，但如果有人有任何提示，我会全神贯注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:36:48.780

尽管您已经在此模型中定义了“cardModel”并调用了 KO 映射，但在应用 KO 绑定时，函数体（即模型定义）默认不会被执行。此外，您的代码将“cards”映射到“cardModel”，因此，“cards”数组在根模型视图中不可用。这些都是您看到未定义卡的原因。

我还注意到“编辑”属性的问题。似乎您有一个可观察的和一个具有相同名称“编辑”的函数，这将导致无休止的递归。

根据您给出的描述，我假设您正在尝试映射一个包含卡片元素的 JSON 数组，并定义了一种完成您想要完成的操作的方法。该代码在[这个小提琴](http://jsfiddle.net/omegasilva/9prVp/4/)中可用。

为了方便读者，下面提到了小提琴中的代码

JavaScript

```
var cardsJSON = {
    "cards" : [{
        "cardName" : "Card1",
        "sides" : ["Side1", "Side2"]
    }, {
        "cardName" : "Card2",
        "sides" : ["Side1", "Side2"]
    }, {
        "cardName" : "Card3",
        "sides" : ["Side1", "Side2"]
    }]
};

function ViewModel() {
    var self = this;

    var testFcn = function() {
        alert("In Function");
    };

    self.cards = ko.observableArray([]);
    self.cardCount = ko.computed(function() {
        return self.cards().length;
    });
};

function Card() {
    var self = this;
    self.editing = ko.observable(false);

    self.edit = function() {
        self.editing(true);
    };

    self.doneEdit = function() {
        self.editing(false);
    };
};

function createCard(data) {
    var card = new Card();
    ko.mapping.fromJS(data, {}, card);

    return card;
};

var viewModel = new ViewModel();
function init() {
    var mapping = {
        "cards" : {
            create : function(options) {
                return createCard(options.data);
            }
        }
    };

    ko.mapping.fromJS(cardsJSON, mapping, viewModel);
};

init();
ko.applyBindings(viewModel); 
```

HTML

```
<table border="1">
    <thead>
        <tr>
            <th>Card</th>
            <th colspan="2">Sides</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <!-- ko foreach: cards -->
        <tr>
            <td data-bind="text: cardName"></td>
            <!-- ko foreach: sides -->
            <td>
                <span  data-bind="text: $data, visible: !$parent.editing(), click: $parent.edit"></span>
                <input data-bind="value: $data, visible:$parent.editing"></input>
            </td>
            <!-- /ko -->
            <td><input value="Done" type="button" data-bind="click: doneEdit"></input></td>
        </tr>
        <!-- /ko -->
    </tbody>
</table> 
```

代码可能比它应该的要复杂一些，但目的是为了更好地解释。

如您所见，有一个单独的视图模型来表示卡片，它包含自己的属性，例如“编辑”、“编辑”等。当我们通过映射插件映射 JSON 时，我们会覆盖卡片的创建方式。我们基本上要做的是创建一个 Card 视图模型并应用映射，以便它包含预定义的属性以及 JSON 中的属性。

这必须明确地完成（根据我的理解）。完成映射后，根视图模型包含一个可观察的卡片数组，每个卡片实例都包含自己的“编辑”函数和“编辑”属性，您可以在数据绑定中使用它们。

希望这可以帮助。

# php - 如何修改客户区的登录 php 脚本

> ID：15593863
> 
> 赞同：1
> 
> 时间：2013-03-24T00:47:39.233
> 
> 标签：php, redirect, login

我有这个 php 脚本，它根据用户名和密码将用户重定向到特定页面。

一旦您登录并重定向到您的页面，然后离开（例如转到主页）然后再次单击客户端登录以返回您的页面，会弹出一条消息说您已经登录单击此处查看你的页面。如何让它重定向回登录用户的页面？

如果您理解有困难，请访问我的网站查看（用户：tyler pass：tyler 用于登录信息）[splitlinemedia.com](http://www.splitlinemedia.com)

登录.php

```
<?php
    if(!defined("SESSION")){
    session_start();
    define("SESSION", true);
 }
    if(isset($_GET["log_out"])){
    unset($_SESSION["logged_in"]);
    header('refresh: 3; url=login.php');
    echo "You're logged out, and will be redirected in about 3 seconds";
    exit;
 }

 $login = true;
 require "protect.php";

 $logins[0]["user"] = "tyler";
 $logins[0]["pass"] = "tyler";
 $logins[0]["redirect"] = "test.php";

 $logins[1]["user"] = "x";
 $logins[1]["pass"] = "y";
 $logins[1]["redirect"] = "z.php";

  // No need to edit below, except the errors

 if(isset($_POST['submit'])){ //is the form submitted?
   if(empty($_POST['user']) || empty($_POST['pass'])){
     echo "You have to fill out the user name and password!";
     exit;
   } //check for empty user name or password
   $is_logged = false; 
   foreach($logins as $login){
      $user = $_POST;
      if(($user["user"] == $login["user"]) && ($user["pass"] == $login["pass"])) {
         $is_logged = true;
         $_SESSION["logged_in"] = array($login["redirect"], true); 
         header("Location: ".$login["redirect"]);
     exit;
     }
 }
 if(!$is_logged){ echo '<script type="text/javascript">alert("Inncorect username or     password");window.history.go(-1);</script>'; } 
 }
 ?> 
```

保护.php

```
<?php
if(!defined("SESSION")){
   session_start();
   define("SESSION", true);
}
   if((!isset($_SESSION["logged_in"])) || !$_SESSION["logged_in"][1]){
     if(!isset($login)){
        header("Location: login.php"); //check to see if logged in, otherwise go to the login
    exit;
   }
  } else if (isset($login) || isset($index)){
  echo "Your already logged in!! <a href='login.php?log_out'>Click here</a>, to logout.   Or, go back to your <a href='{$_SESSION['logged_in'][0]}'>page</a>.";
  exit;
 }
?> 
```

然后在我的 test.php 页面的顶部

```
<?php
include("protect.php");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:54:50.307

在**protect.php 中**，只需将表示他们已经登录的**回**显行替换为标头重定向行，例如：`header("Location: ".$_SESSION['logged_in'][0]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:00:02.760

这可能会帮助你，

```
<?php
if(!defined("SESSION")){
session_start();
define("SESSION", true);
}
 if((!isset($_SESSION["logged_in"])) || !$_SESSION["logged_in"][1]){
 if(!isset($login)){
 header("Location: login.php"); //check to see if logged in, otherwise go to the login
exit;
}
} else if (isset($login) || isset($index)){
header("Location: " . $_SESSION['logged_in'][0]);
}
?> 
```

# javascript - 二维数组中的字符计数器

> ID：15593866
> 
> 赞同：0
> 
> 时间：2013-03-24T00:47:50.703
> 
> 标签：javascript

我试图创建一个二维数组并将四个`X`放在同一列中。我创建了一个循环来检测和计算`X`s 的数量，但它不起作用。

```
 var creatematrix = function (nbRang, nbColumn) {
    var result = Array(nbRang);
    for (var i=0; i<nbRang; i++) {
        result[i] = Array(nbColumn);
    }
    return result;
};

var m = creatematrix(2, 6);

m[1][2] = "X";
m[1][3] = "X";
m[1][4] = "X";
m[1][5] = "X";

   var sumX = 0

   for(var k = 0; k < 6 ; k++){

                  if(m[1][k]== "X"){
                    sumX += 1;   

             }else if(sumX == 4){

                   alert("player won");  
                }   

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:27:12.807

您的代码永远不会命中`sumX == 4`，因为它在最后一次检查时落入第一个 if 语句，然后循环结束。您应该在另一个 if 语句而不是 else if 中进行检查。

```
if(m[1][k]== "X"){
    sumX += 1;
}
if(sumX == 4){
    alert("player won");
    break;
} 
```

# python - 需要推导回文函数

> ID：15593869
> 
> 赞同：0
> 
> 时间：2013-03-24T00:48:04.457
> 
> 标签：python, palindrome

我需要派生一个函数，它接受一个字符串并返回该字符串是否是回文，如果不考虑空格，我的函数应该在回文字符串上返回 True（所以它应该说'a man a plan a canal panama”或“was it eliots toilet i saw”是回文），但它不需要考虑大小写或标点符号的变化（因此它可能在“A man, a plan, a canal - Panama!”和“Was it Eliot's”上返回 False我看到的厕所？'）。

我努力了

```
def palindrome(s):
    return len(s) < 2 or s[0] == s[-1] and palindrome(s[1:-1]) 
```

和

```
def ispalindrome(word):
    if len(word) < 2: return True
    if word[0] != word[-1]: return False
    return ispalindrome(word[1:-1]) 
```

但两者都没有工作。有什么建议么？我正在使用 python 3.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T00:49:52.677

```
>>> text = 'a man a plan a canal panama'
>>> x = ''.join(text.split())
>>> x == x[::-1]
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:28:00.980

# 大纲

如果第 i 个字符与第 len-i 个字符相同，则短语是回文。由于该系列是镜像，因此您只需走到中间即可。

为了获得您正在寻找的效果，您可以在计算字符串是否为回文之前对空格、标点符号和字符串大小写进行规范化。

# 代码

```
from string import punctuation

def is_palindrome(s):
    return all(s[i] == s[-(i + 1)] for i in range(len(s)//2))

def normalized_palindrome(s):
    return is_palindrome("".join(c for c in s.replace(" ","").lower() if c not in punctuation)) 
```

您还可以使用`zip`and`reversed`对字母进行成对迭代：

```
def is_palindrome(s):
    return all(a == b for a, b in zip(s, reversed(s))) 
```

当然，这并不止于中间。

# 测试

```
>>> tests = [
...     "able was I ere I saw Elba",
...     "a man, a plan, a canal: Panama!",
...     "Was it Eliot's toilet I saw?",
... ]
>>> 
>>> for test in tests:
...     print normalized_palindrome(test)
... 
True
True
True 
```

# 你的代码

至于您的原件，我是正确的：

```
>>> s = "able was I ere I saw Elba".lower()
>>> def ispalindrome(word):
...     if len(word) < 2: return True
...     if word[0] != word[-1]: return False
...     return ispalindrome(word[1:-1])
... 
>>> ispalindrome(s)
True
>>> s = "a man a plan a canal panama"
>>> ispalindrome(s)
False
>>> ispalindrome(s.replace(" ",""))
True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-03T18:56:32.297

您可以存储没有特殊字符和空格的字符串，然后检查它是否是回文。

```
def isPalindrome(s: str) -> bool:
    mystring = s.lower()
    mystring2 = ""
    for i in mystring:
        if i.isalnum():
            mystring2 += i

    return (mystring2 == mystring2[::-1]) 
```

# javascript - 函数中未显示总和

> ID：15593870
> 
> 赞同：1
> 
> 时间：2013-03-24T00:48:16.243
> 
> 标签：javascript, arrays, sum

我试图从数组中返回一个总和，但由于某种原因它没有显示。我尝试了各种方法，但由于某种原因它没有返回数组的总和。当我`tableSum(sum)`从控制台调用时，它会返回它，但它不会在 JavaScript 中发生。

这是我的代码：

```
var tableSum = function () {
    'use strict';
    var sum = 0,
        i;
    for (i = 0; i < numberArray.length; i += 1) {
        sum += numberArray[i];
    }
    return sum;
    document.getElementById('sum').innerHTML = sum;
}; 
```

HTML：

```
<table border="1">
    <tr>
        <td style = "text-align:right;">Sum:</td>
        <td style="width:100px" id = "sum">&#160;</td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:51:59.563

该`return`语句退出函数并阻止执行它下面的行，您尝试将结果分配给 DOM 元素。来自[Mozilla 的文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/return)：

> 一个函数在调用 return 时立即停止。

请尝试以下操作：

```
var tableSum = function () {
    'use strict';
    var sum = 0, i;
    for (i = 0; i < numberArray.length; i += 1) {
        sum += numberArray[i];  
    }

    return sum;
};

document.getElementById('sum').innerHTML = tableSum(); 
```

将渲染与您的函数分离使其更加灵活和可重用，并允许您使用相同的函数来更新其他 DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:52:01.170

看起来您是在更新 DOM 之前从函数返回的。

尝试将 return 语句移到 DOM 操作之后：

```
document.getElementById('sum').innerHTML = sum;
return sum; 
```

# java - 小程序绘画

> ID：15593871
> 
> 赞同：0
> 
> 时间：2013-03-24T00:48:28.847
> 
> 标签：java

我试图在油漆部分中找到光标的点，然后简单地画一个椭圆。虽然没有运气！

```
public void paint(Graphics g){
     Point ComponentPoint = PaintPanel.getLocationOnScreen();
     Point CursorPoint=   MouseInfo.getPointerInfo().getLocation(); //gets cursor point

     int ComPX =  ComponentPoint.x;
     int ComPY =  ComponentPoint.y;
     int CurPX =  CursorPoint.x;
     int CurPY =  CursorPoint.y;
     int FinalX = CurPX - ComPX;
     int FinalY =  CurPY - ComPY;
     g.drawOval(FinalX, FinalY, 20, 20);
}

private void PaintPanelMouseDragged(java.awt.event.MouseEvent evt) {                                        
    //when mouse is moved over paintpanel

    //PaintPanel.repaint();
    not working
} 
```

这是没有paint方法的，图像：

[http://i.stack.imgur.com/VOyhr.png](http://i.stack.imgur.com/VOyhr.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:05:40.637

你不能像这样在paint方法中添加代码。您不会在paint 方法中引用MouseInfo 类，因为您无法控制何时调用paint() 方法。您应该使用 MouseListener 和 MouseMotionListner 进行自定义绘画。此外，不应在绘画方法中进行自定义绘画。

有关两种解决方案，请参阅[自定义绘画方法](http://tips4java.wordpress.com/2009/05/08/custom-painting-approaches/)。

# python - 祖先查询不显示结果

> ID：15593872
> 
> 赞同：0
> 
> 时间：2013-03-24T00:48:31.570
> 
> 标签：python, google-app-engine, python-2.7, google-cloud-datastore, jinja2

我无法让我的[祖先查询](https://developers.google.com/appengine/docs/python/datastore/queries#Ancestor_Queries)显示与存储在数据存储中的[Tom 的照片相关联的链接。](https://developers.google.com/appengine/docs/python/datastore/queries#Ancestor_Queries)即使数据存储中有多个链接，数据存储也不会显示任何内容。任何帮助将不胜感激。提前致谢。

**主文件**

```
import webapp2
import jinja2
import os

from google.appengine.ext import db

jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class MainPage(webapp2.RequestHandler):
    def get(self):          

        tom = Person(key_name='Tom')

        wedding_photo = Photo(parent=tom)
        wedding_photo.image_url='http://pinterest.com/pin/200691727117011230/'
        wedding_photo.put()

        baby_photo = Photo(parent=tom)
        baby_photo.image_url='http://pinterest.com/pin/518828819542052681/'
        baby_photo.put()

        dance_photo = Photo(parent=tom)
        dance_photo.image_url='http://pinterest.com/pin/257197828689352707/'
        dance_photo.put()

        dog_photo = Photo()
        dog_photo.image_url='http://pinterest.com/pin/279575089339614779/'
        dog_photo.put()

        photo_query = Photo.all()
        photo_query.ancestor(tom)

        message = "Photos"

        template_values = {
            'message': message,
            'photo_query': photo_query,     
        }       

        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

class PhotoStore(webapp2.RequestHandler):
    def post(self):
        photo = Photo()
        photo.image_url = self.request.get('image_url')     
        photo.put() 
        self.redirect('/')      

class Person(db.Model):
    name = db.StringProperty()

class Photo(db.Model):
    image_url = db.StringProperty()

app = webapp2.WSGIApplication([('/', MainPage),
                                ('/new_photo',PhotoStore)], debug=True) 
```

**索引.html**

```
<html>
    <body>                      
        <form action="/new_photo" method="post">            
            <label for="photo">Photo</label>
            <div><textarea name="image_url" rows="1" cols="60" id="image_url"></textarea></div>         
            <input type="submit" value="Submit">
        </form>
        <hr></hr>
        <div><b>{{ message }}</b></div>             
        <b>{% for p in photo_query.run(limit=5): %}</b>
        <div>{{ p }}</div>
        <b>{% endfor %}</b>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:03:24.580

如果打开生成的 html 源代码，您会看到什么？我假设代码`{{ p }}`只显示`Photo`对象的字符串表示，这导致显示的字符串`<__main__.Photo object at 0xfcbd9ef0>`被解释为 HTML 标记，并且不会显示在呈现的 HTML 中。

# java - 如何截断两点之间的线？

> ID：15593877
> 
> 赞同：0
> 
> 时间：2013-03-24T00:48:50.097
> 
> 标签：java, math, vector, java-canvas

我想在画布上画一条线。因此，我使用用户两次单击来定义起点`S`和终点`E`。

```
ctx.moveTo(sx, sy);
ctx.lineTo(ex, ey); 
```

我还想在直线的两侧减去一个静态偏移量，例如`static int offset = 10;` 我的问题是：我怎么知道我必须添加或减去偏移量的方向（北、东、南、西）？

如果这条线从上到下，我必须`(0, +10)`在起点 S 和`(0, -10)`终点应用。当直线穿过坐标空间对角线时会变得更复杂。

可能这可能是一个“简单”的数学问题，但我缺少正确的关键字来找到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:31:54.013

你只需要使用一些基本的数学。

1.  找到 x 和 y 位移
2.  找到角度 theta
3.  创建位移矢量
4.  从您的观点中添加或获取此信息

如果这不起作用，请告诉我。

```
int offset = 10;

int[] point1 = {15, 25}; //start point
int[] point2 = {42, 37}; //end point

int xDisplacement = point2[0] - point1[0];
int yDisplacement = point2[1] - point1[1];

double theta = Math.toDegrees(Math.atan2(yDisplacement, xDisplacement));        

double[] diplacementVector = {offset*Math.cos(theta), offset*Math.sin(theta)};

point1[0] += diplacementVector[0];
point1[1] += diplacementVector[1];

point2[0] -= diplacementVector[0];
point2[1] -= diplacementVector[1]; 
```

# php - PDO JSON 编码多个 HTML 表格行

> ID：15593878
> 
> 赞同：-1
> 
> 时间：2013-03-24T00:48:55.300
> 
> 标签：php, json, pdo

我正在构建一个应该响应 jQuery Ajax 调用的 PHP 函数，具体取决于提交的 id。可以有多个具有相同 ID 的表单，我无法弄清楚为什么它没有发回多个记录。PS：如果我在星期一之前不解决这个问题，我爸爸会杀了我......

我的PHP：

```
<?php
  if (!empty($_GET['id'])) {
    $id = $_GET['id'];
    try {
      $objDb = new PDO('mysql:host=localhost;dbname=blankett', 'root', 'root');
      $objDb->exec('SET CHARACTER SET utf8');
      $sql = "SELECT * 
              FROM `forms`
              WHERE `id` = '$id'";
      $statement = $objDb->prepare($sql);
      $list = $statement->fetchAll(PDO::FETCH_ASSOC);
      if (!empty($list)) {
        $out = array();
        foreach ($list as $row ) {
          $out[] = '<tr><td><a href="'.$row['link_form'].'">'.$row['name_form'].'</a></td> <td>'.$row['date_added'].'</td></tr>';
        }
        echo json_encode(array('error' => false, 'list' => $out));
      } else {
        echo json_encode(array('error' => true));
      }
    } catch(PDOException $e) {
      echo json_encode(array('error' => true));
    }
  } else {
    echo json_encode(array('error' => true));
  }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:11:32.567

您错误地使用了准备好的语句。首先，您不应该将变量放在语句中。其次，您需要*执行*该语句。

这是来自 php.net 站点的示例：

```
$sql = 'SELECT name, colour, calories
FROM fruit
WHERE calories < :calories AND colour = :colour';
$sth = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
$sth->execute(array(':calories' => 150, ':colour' => 'red'));
$red = $sth->fetchAll();
$sth->execute(array(':calories' => 175, ':colour' => 'yellow'));
$yellow = $sth->fetchAll(); 
```

以下是你的做法：

```
$sql = "SELECT * 
FROM `forms`
WHERE `id` = :formID";

$statement = $objDb->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
$statement ->execute(array(':formID' => $id));
$list= $statement ->fetchAll(); 
```

# ocaml - 无法在 Windows 上启动 ocamlbrowser

> ID：15593880
> 
> 赞同：0
> 
> 时间：2013-03-24T00:49:06.097
> 
> 标签：ocaml

问题： ocamlbrowser 无法在 Windows 8 上启动。

我在windows上安装ocaml时，它抱怨无法下载Tcl包。我手动下载了ActiveState ActiveTcl8.5.13；但是，ocamlbrowser 仍然无法启动。我不知道我的安装或配置是否有任何问题。在我看来，ocamlbrowser 是一个有用的工具，尤其是对于初学者。有人可以帮我解决这个问题吗？

操作系统：Windows 8、64 位。Ocaml：4.00.1（使用官方windows二进制安装程序安装） Tcl：ActiveTcl8.5.13（在ocaml安装后安装。）

谢谢！缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T00:09:21.767

您需要安装 32 位版本的 Active Tcl（“x86”），您安装的是 64 位，而该安装程序中的 ocamlbrowser 与 32 位链接。

试试这个依赖浏览器自己看看。[http://www.dependencywalker.com/](http://www.dependencywalker.com/)

# c# - 在不关闭应用程序的情况下关闭和重新打开表单

> ID：15593881
> 
> 赞同：1
> 
> 时间：2013-03-24T00:49:08.873
> 
> 标签：c#, winforms, reset

我正在尝试重置我的主表单，以便我可以轻松地重置所有文本框和变量。我在我的 Progam.cs 中添加了一个布尔值，以使应用程序在表单关闭然后重新打开时保持打开状态。当我尝试关闭它时， on_closure 甚至会触发两次。我不知道该怎么做才能阻止它发生，但我知道它必须是简单的。

程序.cs：

```
static class Program
{
    public static bool KeepRunning { get; set; }
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main(string[] args)
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        KeepRunning = true;
        while (KeepRunning)
        {
            KeepRunning = false;
            Application.Run(new Form1());
        }

    }
} 
```

表格1：

```
private void button1_Click(object sender, EventArgs e)
    {
        Program.KeepRunning = true;
        this.Close();
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        DialogResult dialogResult = MessageBox.Show("You have unsaved work! Save before closing?", "Save?", MessageBoxButtons.YesNoCancel, MessageBoxIcon.Exclamation);
        if (dialogResult == DialogResult.Yes)
        {
            e.Cancel = true;
            MessageBox.Show("saving then closing");
            Application.Exit();
        }

        if (dialogResult == DialogResult.No)
        {
            MessageBox.Show("closing");
            Application.Exit();
        }

        if (dialogResult == DialogResult.Cancel)
        {
            e.Cancel = true;
            MessageBox.Show("canceling");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:29:38.647

删除你的`Application.Exit()`. 由于您已经在 FormClosing 事件处理程序中，如果`Program.KeepRunning`设置为 false，应用程序将退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:32:07.043

发生这种情况是因为您调用了 Application.Exit()。由于您的表单尚未关闭，因此如果您尝试关闭应用程序，该指令将尝试关闭表单拳头，而后者又会再次调用事件处理程序。

另外，我认为您不需要 Application.Exit() 因为这是您唯一的表单，因此应用程序将自动关闭（至少在我的 VB6 旧时代就是这样！）

# php - 需要用 str_replace 做一点改变

> ID：15593882
> 
> 赞同：0
> 
> 时间：2013-03-24T00:49:21.673
> 
> 标签：php, str-replace

我有 2 个这样的链接：
[http ://www.site.com/report/4fbb14](http://www.site.com/report/4fbb14)
[http://www.site.com/4fbb14](http://www.site.com/4fbb14)

所以`$_SERVER['REQUEST_URI']`对他们来说就像：

> /报告/4fbb14
> /4fbb14

我只需要得到`4fbb14`

我用过

```
$r_url = str_replace("/","",$_SERVER['REQUEST_URI']); 
```

但是我需要它对两个链接都有效，这样的事情可以接受吗？

```
$r_url = str_replace("(/ or report)","",$_SERVER['REQUEST_URI']); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T00:52:45.240

更简单的是

```
$r_url = end(explode('/', $_SERVER['REQUEST_URI'])); 
```

这给了你最后一个正斜杠之后的任何东西

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T01:03:23.773

All the previous answers will work, except for php NoOb's, but if all the links will have the same format you can just do this:

```
$r_url = $_SERVER['REQUEST_URI'];
$r_url = str_replace("report","",$r_url);
$r_url = str_replace("/","",$r_url);
echo $r_url; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T00:55:36.013

**使用*正则表达式***

寻找字符串末尾的值，就在`/`.

```
if ( preg_match("/\/(\d+)$/", "http://www.site.com/report/4fbb14", $result) )
{
  $value = $result[1];
} 
```

**使用`parse_url`和简单`explode`**

```
$values = parse_url("http://www.site.com/report/4fbb14");
$parts_of_the_url = explode("/", $values['path']);
$result = end($parts_of_the_url); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T00:57:32.563

如果你想得到`4fbb14`

```
<?php 

$ex = explode('/', 'http://www.site.com/4fbb14');
echo $ex['3']; 
```

# java - 禁用加速度计并使用按键输入进行模拟

> ID：15593885
> 
> 赞同：3
> 
> 时间：2013-03-24T00:49:53.303
> 
> 标签：java, android, accelerometer, android-sensors

我想创建一个 android 应用程序，让用户玩需要通过按键输入倾斜屏幕的游戏。按下某个键时是否可以模拟加速度计数据？同时，当我的应用程序运行时，我可以用一些代码禁用真正的加速度计吗？

**编辑：**我忘了提到我可以访问完整的 android 源代码以及内核源代码，所以我什至可以添加特定代码或创建一些 java 代码来禁用或“伪造”加速度计输入源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:51:46.157

你不能。

加速度计是一项系统服务，您无法控制其他应用程序如何使用它，因此您无法禁用/覆盖它。

通过将数据写入 /dev/ 部分的适当部分，可以在有根设备上伪造值，但我不知道那是哪一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-13T14:43:29.717

按照[本](https://github.com/libgdx/libgdx/wiki/A-simple-game)教程，您可以轻松禁用加速度计。

注意线条

```
package com.badlogic.drop;

import android.os.Bundle;

import com.badlogic.gdx.backends.android.AndroidApplication;
import com.badlogic.gdx.backends.android.AndroidApplicationConfiguration;

public class AndroidLauncher extends AndroidApplication {
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      AndroidApplicationConfiguration config= new AndroidApplicationConfiguration();
      config.useAccelerometer = false;
      config.useCompass = false;

      initialize(new Drop(), config);
   }
} 
```

链接中的教程适用于 libgdx，而 libgdx 是一个 Java 游戏开发框架，它提供了一个统一的 API，适用于包括 android 在内的所有受支持的平台。

# mysql - ncurses从mysql打印到屏幕

> ID：15593887
> 
> 赞同：0
> 
> 时间：2013-03-24T00:50:02.220
> 
> 标签：mysql, c, ncurses

抱歉，我是 mysql 的 c api 的新手，我只是想使用我的查询的选定输出作为要打印到我的 ncurses 窗口的字符。

我正在尝试这个：

```
mysql_query(conn, "SELECT 10 as x, 10 as y, 'x' as ch");
result = mysql_use_result(conn);
row = mysql_fetch_row(result);
move(atoi(row[1]),atoi(row[0]));
addch((char)(int)(intptr_t)row[2]); //<-- built from random suggestions on the internets 
```

这（最终）成功地将我的光标移动到屏幕上的 10,10 位置，但是它会打印

```
^G 
```

我也试过

```
printw("%.*s", row[2]) 
```

哪个打印

```
(null) 
```

但显然 row[2] 不为空。它应该是“x”。

请问你，我错过了什么？

# python - Python/Django 模型

> ID：15593894
> 
> 赞同：1
> 
> 时间：2013-03-24T00:51:03.170
> 
> 标签：python, django, django-models

我对 Python/Django 相当陌生。我想做的是单独存储汽车的描述，但同时我想（在 django admin 中）标记汽车描述，如下所示：

```
class CarDescription(models.Model):

    length = models.IntegerField(max_length=10)
    def __unicode__(self):
        return "description of the car no %d" % (Car.id)

class Car(models.Model):

    description = models.OneToOneField(CarDescription) 
```

我知道 Car.id 在那里是错误的（循环引用）。有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:11:27.857

所有你需要的是：

```
类汽车（模型。模型）：

    描述 = models.CharField(max_length=20)

```

完毕。更多的领域很好。否则，您会使事情复杂化。

您需要研究所谓的“关系建模”。

你正在做的是“过早的优化”，可能是“悲观化”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T04:17:58.627

您应该像这样构建模型：

```
class Car(models.Model):

    # everything that has to do _only_ with a car

class CarDescription(models.Model):

    car = models.ForeignKey(Car) # each description can belong to only one car
    length = models.IntegerField(max_length=10)
    # other fields that have only to do with a description

    def __unicode__(self):
        return unicode("description of the car no %d" % (self.car.pk)) 
```

Django 有一个非常好的 API 用于查找你应该通过的[相关对象（一旦你完成了](https://docs.djangoproject.com/en/dev/topics/db/queries/#related-objects)[教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T07:12:14.267

您可以查看 django 的文档，[https://docs.djangoproject.com/en/dev/topics/db/queries/#one-to-one-relationships](https://docs.djangoproject.com/en/dev/topics/db/queries/#one-to-one-relationships)。

如文档中所述，您可以直接访问一对一字段，

```
class CarDescription(models.Model):

    length = models.IntegerField(max_length=10)
    def __unicode__(self):
        return "description of the car no %d" % (self.car.id) 
```

它仅适用于汽车和汽车描述实例，否则将引发异常。

# python - python 扩展执行的奇怪时机或使用 --threading=single 构建 boost.python

> ID：15593898
> 
> 赞同：0
> 
> 时间：2013-03-24T00:51:31.220
> 
> 标签：python, multithreading, boost, thread-safety, boost-python

我使用 boost.python 库构建的 python 扩展的行为非常奇怪。即，在这段代码中：

```
import my_ext

j = 0
while j<5:
    print j
    my_ext.do_something(j)
    j = j + 1 
```

我没有看到 j 被打印出来，而扩展代码 ( `my_ext.do_something(j)`) 正在为不同的 j 做一些工作（比如说打印第 j 个文件）。此外，它只打印 j = 0 和 j = 1 的 2 个文件，然后整个脚本完成，没有错误或其他通知。

所有这一切让我觉得代码是并行执行的（多线程），但没有正确处理这种并行化。我想这可能与我构建的 boost.python 库默认使用 --threading=multi 选项有关。但是，尝试使用选项 --threading=single 进行重建不会产生任何效果，它仍然被构建为多线程库。这篇文章[http://mail.python.org/pipermail/cplusplus-sig/2010-October/015771.html](http://mail.python.org/pipermail/cplusplus-sig/2010-October/015771.html) 报告了类似的构建过程问题，但没有得到答复。

所以我的问题是如何构建 boost 库和 boost.python 特别是单线程的。或者，问题可能与 boost.python 库的单/多线程以外的其他问题有关。

附加信息：我正在使用 cygwin、boost_1.50.0、python2.6，我的操作系统是 Win 7，具有多核 CPU 和 nvidia vram（后一种硬件可能支持我的扩展程序的多线程执行而不让我知道）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:53:38.460

Boost.Python 往往是 Boost 构建系统中的一个特例，因为它与 Python 构建的 Python 版本和配置相耦合。例如，如果 Python 是在没有调试的情况下构建的，那么 Boost.Python 将在没有调试的情况下构建，即使 Boost 被明确告知构建一个调试变体。我相信 threading 属性也是如此，因为它会通过 include 间接`pyconfig.h`包含`Python.h`.

Python 默认在单线程中运行程序，无论 Python 是否使用线程支持构建。Boost.Python 不会改变这种行为。作为一般经验法则，只有在需要并发性时，线程才会成为 Boost.Python 的一个因素。例如，如果`my_ext.do_something()`要将一个大文件读入内存，那么最好在不[锁定解释器](http://wiki.python.org/moin/GlobalInterpreterLock)的情况下执行读取。

考虑从扩展的简化实现开始，然后对其进行扩展。例如，当我构建`my_ext`为：

```
#include <iostream>
#include <boost/python.hpp>

void do_something(unsigned int j)
{
  std::cout << "do_something(): " << j << std::endl;
}

BOOST_PYTHON_MODULE(my_ext)
{
  namespace python = boost::python;
  python::def("do_something", &do_something);
} 
```

我的测试脚本：

```
import my_ext

for j in xrange(5):
    print j
    my_ext.do_something(j) 
```

产生：

```
0
做某事（）：0
1
做某事（）：1
2
做某事（）：2
3
做某事（）：3
4
做某事（）：4
```

另一种方法是构建 Python 和 Boost.Python 的调试版本，然后使用调试器逐步执行程序。可以在[此处](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/building.html#python-debugging-builds)找到有关调试版本的更多信息。

# ruby-on-rails - 对象的 ActiveRecord::RecordNotFound，明显的路由错误

> ID：15593903
> 
> 赞同：0
> 
> 时间：2013-03-24T00:52:04.643
> 
> 标签：ruby-on-rails, routing, rails-routing

我是 Rails 新手，正在努力解决似乎是路由错误。

我有一个 Site 对象，其中包含有关网站以及如何抓取它的信息。我想测试我的代码与站点的连接。在我的应用程序中单击“测试站点”会产生错误：

> ```
> Couldn't find Site without an ID
> 
> app/controllers/sites_controller.rb:86:in `test_site' 
> ```

**路线.rb**：

```
...
      post "/test_site" => "sites#test_site" 
      get "home/index"
      resources :sites, :logins
... 
```

**index.html.erb**

```
...    
      <% @sites.each do |site| %>
      <tr>
        <td>
            <%= form_tag test_site_path(site) do -%>
            <div><%= submit_tag 'Test site' %></div>
            <% end -%>
... 
```

**站点控制器.rb**

```
...
      def test_site
        @site = Site.find(params[:id])
... 
```

看起来站点控制器没有从 test_site_path(site) 获取站点：id。我不确定如何设置路线并正确传递 ID。

谢谢！

**编辑**：我尝试将此代码添加到我的 routes.rb 中：

```
resources :sites do 
  get "/test_site", :action => "test_site", :on => :member 
end 
```

我收到此错误：

```
No route matches {:controller=>"sites", :action=>"test_site", :format=>#<Site id: 11, ... 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:57:51.890

对于新手，我可以告诉您的最好的事情是在添加新功能时开始编写控制器测试，因为它有助于调试此类问题。使用安静的动作而不是创建自己的动作。尝试使用 index、new、edit、create、update、show、destroy 代替。

sites_controller_spec.rb

```
require 'spec_helper'

describe SitesController do
  let(:site) { Site.create() } #Add to create what a site requires, eventually this will become a fixture but don't worry about that now
  describe "#show" do
   before { get :show, id: site.to_param }
   it "responds with success" do
     response.should be_success
   end
  end
end 
```

运行此测试。它会告诉你没有路线

路线.rb

> 资源：站点，仅：%w[显示]

运行此测试。它会失败并告诉您创建站点控制器和显示操作：

```
class SitesController < ApplicationController
  def show
  end
end 
```

再次运行测试。它现在会抱怨，因为没有视图。

> 查看 -> 创建目录（站点） -> 在里面创建一个文件 show.html.erb

再次运行测试。现在正在过去。您的路由现在使用 REST 正常工作，并且检查它是否工作现在是自动化的。

现在这可能看起来有点模仿，但我保证如果你养成这种习惯，它将成为第二天性，你将不必再次处理路由错误。

# ruby - .rvmrc 未在 gnome-terminal 中读取

> ID：15593904
> 
> 赞同：0
> 
> 时间：2013-03-24T00:52:16.147
> 
> 标签：ruby, rvm, gnome-terminal, rvmrc

在一个目录中，我有这些文件：

```
$ ls -1a
.
..
Gemfile
Gemfile.lock
.rvmrc
test.rb 
```

但是`.rvmrc`当我们切换到这个目录时文件不会被读取。

我已经配置了 gnome-terminal，因为这个页面说：[https ://rvm.io/integration/gnome-terminal/](https://rvm.io/integration/gnome-terminal/)

它似乎被禁用，因为可以使用`rvm_project_rvmrc=0`in`/etc/rvmrc`或`~/.rmvrc`.

更改目录时如何启用 .rvmrc 加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T21:22:35.673

在您的终端首选项中切换“以登录 shell 方式运行命令”的值。应该有帮助。

# mysql - 使用键/值对从表中过滤和分组数据

> ID：15593907
> 
> 赞同：1
> 
> 时间：2013-03-24T00:52:35.813
> 
> 标签：mysql

我正在努力从用于数据收集环境的 CSV 样式数据的“标准化”数据库中提取数据。这将使用 PHP/MySQL/JSON 完成，目的是绘制数据。我想我有过滤部分，但我需要旋转方面的帮助。这个想法是使用 keyNames 字段作为数据的过滤器。

这是查询：

```
select d.testId,d.rowId,f.keyName,f.keyValue from tests t 
inner join data d on t.testId = d.testId 
inner join data c on t.testId = c.testId and c.rowId = d.rowId 
join data f on f.testId = t.testId and f.rowId = d.rowId 
where (d.keyName = 'voltage' and d.keyValue < 5) and (c.keyName = 'temperature' and c.keyValue = 30) and (t.testType = 'testType1'); 
```

结果：

```
+--------+-------+-------------+----------+
| testId | rowId | keyName     | keyValue |
+--------+-------+-------------+----------+
|      1 |     1 | voltage     |        4 |
|      1 |     1 | temperature |       30 |
|      1 |     1 | velocity    |       20 |
|      1 |     2 | voltage     |        4 |
|      1 |     2 | temperature |       30 |
|      1 |     2 | velocity    |       21 |
|      2 |     1 | voltage     |        4 |
|      2 |     1 | temperature |       30 |
|      2 |     1 | velocity    |       30 |
|      2 |     2 | voltage     |        4 |
|      2 |     2 | temperature |       30 |
|      2 |     2 | velocity    |       31 |
+--------+-------+-------------+----------+ 
```

我想将其转为： testId,rowId,voltage,temperature,velocity ，例如：

```
+--------+-------+---------+-------------+----------+
| testId | rowId | voltage | temperature | velocity |
+--------+-------+---------+-------------+----------+
|      1 |     1 |       4 |          30 |       20 |
|      1 |     2 |       4 |          30 |       21 |
|      2 |     1 |       4 |          30 |       30 |
|      2 |     2 |       4 |          30 |       31 |
+--------+-------+---------+-------------+----------+ 
```

有任何想法吗？我觉得我很接近这个：

```
mysql> select f.testId,f.rowId,(if(f.keyName='voltage',f.keyValue,NULL)) as 'voltage',(if(f.keyName='temperature',f.keyValue,NULL)) as 'temperature',(if(f.keyName='velocity',f.keyValue,NULL)) as 'velocity' from tests t  inner join data d on t.testId = d.testId  inner join data c on t.testId = c.testId and c.rowId = d.rowId  join data f on f.testId = t.testId and f.rowId = d.rowId  where (d.keyName = 'voltage' and d.keyValue < 5) and (c.keyName = 'temperature' and c.keyValue = 30) and (t.testType = 'testType1');
+--------+-------+---------+-------------+----------+
| testId | rowId | voltage | temperature | velocity |
+--------+-------+---------+-------------+----------+
|      1 |     1 |       4 |        NULL |     NULL |
|      1 |     1 |    NULL |          30 |     NULL |
|      1 |     1 |    NULL |        NULL |       20 |
|      1 |     2 |       4 |        NULL |     NULL |
|      1 |     2 |    NULL |          30 |     NULL |
|      1 |     2 |    NULL |        NULL |       21 |
|      2 |     1 |       4 |        NULL |     NULL |
|      2 |     1 |    NULL |          30 |     NULL |
|      2 |     1 |    NULL |        NULL |       30 |
|      2 |     2 |       4 |        NULL |     NULL |
|      2 |     2 |    NULL |          30 |     NULL |
|      2 |     2 |    NULL |        NULL |       31 |
+--------+-------+---------+-------------+----------+ 
```

以下是表定义和数据源供参考：

```
CREATE TABLE IF NOT EXISTS `data` (
  `ptId` int(11) NOT NULL AUTO_INCREMENT,
  `testId` int(11) NOT NULL,
  `rowId` int(11) NOT NULL,
  `keyName` text NOT NULL,
  `keyValue` int(11) NOT NULL,
  PRIMARY KEY (`ptId`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=33 ;

INSERT INTO `data` (`ptId`, `testId`, `rowId`, `keyName`, `keyValue`) VALUES
(1, 1, 1, 'voltage', 4),
(2, 1, 1, 'temperature', 30),
(3, 1, 1, 'velocity', 20),
(4, 1, 2, 'voltage', 4),
(5, 1, 2, 'temperature', 30),
(6, 1, 2, 'velocity', 21),
(7, 1, 3, 'voltage', 3),
(8, 1, 3, 'temperature', 35),
(9, 1, 3, 'velocity', 22),
(10, 1, 4, 'voltage', 3),
(11, 1, 4, 'temperature', 35),
(12, 1, 4, 'velocity', 23),
(13, 2, 1, 'voltage', 4),
(14, 2, 1, 'temperature', 30),
(15, 2, 1, 'velocity', 30),
(16, 2, 2, 'voltage', 4),
(17, 2, 2, 'temperature', 30),
(18, 2, 2, 'velocity', 31),
(19, 2, 3, 'voltage', 5),
(20, 2, 3, 'temperature', 35),
(21, 2, 3, 'velocity', 32),
(22, 2, 4, 'voltage', 5),
(23, 2, 4, 'temperature', 35),
(24, 2, 4, 'velocity', 33),
(25, 4, 1, 'voltage', 4),
(26, 4, 1, 'velocity', 30),
(27, 4, 2, 'voltage', 4),
(28, 4, 2, 'velocity', 31),
(29, 4, 3, 'voltage', 5),
(30, 4, 3, 'velocity', 32),
(31, 4, 4, 'voltage', 5),
(32, 4, 4, 'velocity', 33);

CREATE TABLE IF NOT EXISTS `tests` (
  `testId` int(11) NOT NULL AUTO_INCREMENT COMMENT 'Unique Test ID',
  `testType` text NOT NULL,
  `startDate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `userName` text NOT NULL,
  `testSoftware` text NOT NULL,
  `comments` text,
  `dutID` text,
  PRIMARY KEY (`testId`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ;

INSERT INTO `tests` (`testId`, `testType`, `startDate`, `userName`, `testSoftware`, `comments`, `dutID`) VALUES
(1, 'testType1', '2013-03-23 21:06:10', 'testUser1', 'testSoftware1', NULL, 'dut1'),
(2, 'testType1', '2013-03-23 21:10:32', 'testUser1', 'testSoftware1', NULL, 'dut1'),
(3, 'testType1', '2013-03-23 21:10:32', 'testUser1', 'testSoftware1', NULL, 'dut1'),
(4, 'testType2', '2013-03-23 21:10:32', 'testUser1', 'testSoftware1', NULL, 'dut1'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:51:44.920

您的部分问题是您在 SELECT 列表中使用聚合函数，但您没有使用`GROUP BY`. 您应该使用`GROUP BY`与此类似的：

```
GROUP BY d.testId, d.rowId 
```

每当您使用聚合函数并且您的选择中有其他列时，它们应该在 group by 中。所以你的完整查询应该是：

```
select d.testId,
  d.rowId,
  max(if(f.keyName='voltage',f.keyValue,NULL)) as 'voltage',
  max(if(f.keyName='temperature',f.keyValue,NULL)) as 'temperature',
  max(if(f.keyName='velocity',f.keyValue,NULL)) as 'velocity' 
from tests t  
inner join data d 
  on t.testId = d.testId  
inner join data c 
  on t.testId = c.testId 
  and c.rowId = d.rowId  
join data f 
  on f.testId = t.testId 
  and f.rowId = d.rowId  
where (d.keyName = 'voltage' and d.keyValue < 5) 
  and (c.keyName = 'temperature' and c.keyValue = 30) 
  and (t.testType = 'testType1')
GROUP BY d.testId, d.rowId 
```

请注意，虽然您的实际数据结构未出现在您的原始问题中。看来这可以合并为以下几点：

```
select d.testid,
  d.rowid,
  max(case when d.keyName = 'voltage' and d.keyValue < 5 then d.keyValue end) voltage,
  max(case when d.keyName = 'temperature' and d.keyValue =30 then d.keyValue end) temperature,
  max(case when d.keyName = 'velocity' then d.keyValue end) velocity
from tests t
left join data d
  on t.testid = d.testid
group by d.testid, d.rowid 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/07c99/1)。这给出了只有一个`data`表连接的结果：

```
| TESTID | ROWID | VOLTAGE | TEMPERATURE | VELOCITY |
-----------------------------------------------------
|      1 |     1 |       4 |          30 |       20 |
|      1 |     2 |       4 |          30 |       21 |
|      2 |     1 |       4 |          30 |       30 |
|      2 |     2 |       4 |          30 |       31 | 
```

# firefox - Selenium Web 驱动程序取消 Firefox 下载

> ID：15593908
> 
> 赞同：1
> 
> 时间：2013-03-24T00:52:42.263
> 
> 标签：firefox, selenium, webdriver

我正在尝试使用 selenium 取消 Firefox 中的弹出下载窗口。我可以切换窗口并关闭警报窗口，但我似乎无法选择下载窗口。有任何想法吗？

环顾四周，Selenium RC 似乎无法处理下载窗口，因为它们依赖于操作系统。但是，这个问题对于 Selenium Web 驱动程序是否相同？我知道可以用 autoit 来解决这个问题，但如果可能的话，我想把它全部保存在 Java selenium 中。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T02:43:54.583

WebDriver 不能直接与对话框窗口交互，这是因为对话框窗口是操作系统的域而不是网页。然而，它可以使用名称空间 System.Windows.Forms 的 SendKeys 类方法 SendWait() 在对话框窗口上执行操作

```
using System.Windows.Forms; 
```

在下面的示例代码中，按下了 PLUpload 按钮，这将打开一个 Windows 对话框以选择要上传的文件。

编写以下行以将键值发送到显示的对话窗口。

```
SendKeys.SendWait(@"C:\Users\Public\Pictures\Sample Pictures\Dock.jpg");
SendKeys.SendWait(@"{Enter}"); 
```

C#中SendKeys类的详细参考可以在[http://msdn.microsoft.com/en-au/library/system.windows.forms.sendkeys.aspx找到](http://msdn.microsoft.com/en-au/library/system.windows.forms.sendkeys.aspx)

```
using System;
using System.Windows.Forms;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium;
using OpenQA.Selenium.Support;
using OpenQA.Selenium.Interactions;
using NUnit.Framework;
namespace BusinessCreation
{
    class PlUpload
    {
        static void Main(string[] args)
        {
            IWebDriver driver = new FirefoxDriver();
            driver.Navigate().GoToUrl("http://www.plupload.com/example_queuewidget.php");
        driver.FindElement(By.XPath("//object[@data='/plupload/js/plupload.flash.swf']")).Click();
           SendKeys.SendWait(@"C:\Users\Public\Pictures\Sample Pictures\Dock.jpg");
           SendKeys.SendWait(@"{Enter}");
        }
     }
} 
```

# c - 如何使用 malloc 将 int 变量转换为 C 中的 char *array？

> ID：15593909
> 
> 赞同：0
> 
> 时间：2013-03-24T00:52:45.047
> 
> 标签：c, arrays, malloc

我正在做一个学校项目，这个问题出现了。顺便说一句，我不能使用图书馆。

如何将 int 变量转换为 char 数组？我已经尝试过，但它没有用，尝试了很多其他的东西，甚至魔法也不起作用......

```
char *r = malloc(sizeof(char*));
int i = 1;
r[counter++] = (char) i; 
```

有人能帮我吗？感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:58:57.217

In your code, you should allocate for `char` size and not `char *`. Please try with this code segment

```
char *r = malloc(sizeof(char) * N); // Modified here
int i = 1;
r[counter++] = i & 0xff; // To store only the lower 8 bits. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:01:14.647

You could also try this:

```
char *r = malloc(sizeof(char));
char *s = (char*)&i; 
r[counter++] = s[0]; 
```

This is an other funny way to proceed and it allows you to access the full int with: `s[0]`, `s[1]`, etc...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T16:17:08.390

嗯...下面的代码有什么问题

```
char *r = malloc(sizeof(char) * ARR_SIZE);
int i = 1;
sprintf(r,"%d",i);

printf("int %d converted int %s",i,r); 
```

它现在对你有用吗

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T01:05:06.707

如果你不能使用这个库，你就不能使用`malloc`.

但这会起作用：

```
int i = 0;
char *p = (char *)&i;
p[0] = 'H';
p[1] = 'i';
p[2] = '!';
p[3] = '\0';
printf("%s\n", p); 
```

假设您`int`是 32 位或更多（而您`char`是 8 位）。

然后，如果您有：

```
int i[100]; 
```

`char`您可以将其视为大小等于的数组`sizeof (i)`。IE

```
int i[100];
int sz = sizeof(i);     // probably 400
char *p = (char *)i;    // p[0] to p[sz - 1] is valid. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T01:46:44.257

如果您不想包含数学库：

```
unsigned long pow10(int n);

void main(){
    char test[6] = {0};
    unsigned int testint = 2410;
    char conversion_started = 0;
    int i=0,j=0;float k=0;
    for(i=sizeof(test);i>-1;i--){
        k=testint/pow10(i);
        if(k<1 && conversion_started==0) continue;
        if(k >= 0 && k < 10){
            test[j++]=k+0x30;
            testint = testint - (k * pow10(i));
            conversion_started=1;
        }
    }
    test[j]=0x00;
    printf("%s",test);
}

unsigned long pow10(int n){
    long r = 1;
    int q = 0;
    if(n==0) return 1;
    if(n>0){
        for(q=0;q<n;q++) r = r * 10;
        return r;
    }
} 
```

注意：我不太关心 char 数组的长度，所以你最好明智地选择它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-24T01:18:59.717

您可以使用 a`union`代替。假设`sizeof int == 4`,

```
typedef union {
    int i;
    char[4] cs;
} int_char;

int_char int_char_pun;
int_char_pun.i = 4;
for (int i = 0; i < 4; i++) {
    putchar(int_char_pun.cs[i]);
} 
```

当心; int_char.cs 通常不是以 null 结尾的字符串，或者它可能是，但长度 < 4。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-24T01:11:27.310

你介意失去精度吗？char 通常是 8 位，而 int 通常更多。任何超过 255 的 int 值都将转换为其模 255 - 除非您想将 int 转换为容纳 int 所需的尽可能多的字符。

你的标题*似乎是*这样说的，但到目前为止没有一个答案给出。

如果是这样，您需要声明一个 char 数组，它是`sizeof(int) / sizeof(char)`并循环多次，`i >> 8`进入`r[looop_var]`. 根本不需要 malloc，除非你的老师告诉你这样做。在这种情况下，不要忘记处理 malloc 失败。

让我们说一些类似的东西（我正在编码这个没有编译它，所以要小心）

```
int numChars = sizeof(int) / sizeof(char);
char charArry[numChard];      // or malloc() later, if you must (& check result)
int convertMe = 0x12345678;
int loopVar;

for (loopVar = 0; loopvar < numChars)
{
  charArry[loopVar ] = convertMe ;
  convertMe = convertMe  >> 8;
} 
```

# c# - 取消使用 lambda 设置的 Backgroundworker

> ID：15593913
> 
> 赞同：1
> 
> 时间：2013-03-24T00:52:49.547
> 
> 标签：c#, lambda, backgroundworker

我有一个使用 lambda 创建的后台工作程序，如下所示：

```
BackgroundWorker fileCountWorker= new BackgroundWorker();
fileCountWorker.WorkerSupportsCancellation = true;
fileCountWorker.DoWork += new DoWorkEventHandler((obj, e) => GetFileInfo(folder, subs));
fileCountWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler((obj, e) => UpdateCountInFolderListViewForItem(index));
fileCountWorker.RunWorkerAsync(); 
```

我希望能够取消后台工作程序，然后知道它是在 RunWorkerCompleted 函数中使用 RunWorkerCompletedEventArgs e.Canceled 属性取消的。

到目前为止，我一直无法找到一种将参数传递给 RunWorkerCompleted 函数并仍然保持访问 RunWorkerCompletedEventArgs 的能力的方法。

我尝试将 RunWorkerCompletedEventArgs 参数添加到 RunWorkerCompleted 调用的函数中，然后像这样传递 RunWorkerCompletedEventArgs：

```
fileCountWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler((obj, e) => UpdateCountInFolderListViewForItem(index, e)); 
```

但这似乎不起作用。

有没有办法做到这一点？

**编辑**：

根据以下评论，我进行了以下更改：

我将 DoWork 事件更改如下（在工作函数中添加 obj 和 e 作为参数）：

```
fileCountWorker.DoWork += new DoWorkEventHandler((obj, e) => GetFileInfo(folder, subs,obj,e)); 
```

然后我将 RunWorkerCompleted 函数更改如下（在 RunWorkerCompleted 函数中添加 obj 和 e 作为参数）：

```
fileCountWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler((obj, e) => UpdateCountInFolderListViewForItem(index, obj, e)); 
```

从我的 UI 线程中，我调用 CancelAsync：

```
if (bgw.WorkerSupportsCancellation)
   {
      bgw.CancelAsync();
   } 
```

然后从后台工作人员中检查取消挂起，例如：

```
BackgroundWorker bwAsync = sender as BackgroundWorker;
if (bwAsync.CancellationPending)
   {
      e.Cancel = true;
      return;
   } 
```

结果是，当我取消backgroundworker时，它确实停止了worker函数，但是RunWorkerCompleted函数（UpdateCountInFolderListViewForItem）中的RunWorkerCompletedEventArgs仍然有一个Canceled属性设置为False，所以函数无法判断worker被取消了。

所以我仍然坚持让 RunWorkerCompleted 函数知道工人被取消而不是正常完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:09:58.670

你只需要打电话`BackgroundWorker.CancelAsync()`。

你的工作代码需要检查`BackgroundWorker.CancellationPending`并停止它正在做的“取消”......但是，你的 lambda 没有做任何你可以真正取消的事情。

通常你会做的是这样的：

```
//...
fileCountWorker.DoWork += (obj, e) =>
{
    for (int i = 0; i < 1000 && fileCountWorker.CancellationPending; ++i)
    {
        Thread.Sleep(500);/* really do other work here */
    }
    e.Cancel = fileCountWorker.CancellationPending;
};

fileCountWorker.RunWorkerAsync(); 

//...

fileCountWorker.CancelAsync(); 
```

如果您提供 的一些详细信息`GetFileInfo`，也许可以提供更多详细信息。

# android - 在 Android Eclipse 项目中包含 cwac-loaderex 库

> ID：15593915
> 
> 赞同：2
> 
> 时间：2013-03-24T00:53:06.820
> 
> 标签：android, eclipse, commonsware-cwac

我正在尝试在我的 Android 应用程序中使用[cwac-loaderex库。](https://github.com/commonsguy/cwac-loaderex)我克隆了存储库并将包含的项目导入到我的 Eclipse 项目中。

此时我在 Eclipse 中没有任何编译错误，但是当我尝试在模拟器中运行应用程序时，我得到：

> 03-23 20:34:16.895: E/dalvikvm(652): 找不到类 'com.commonsware.cwac.loaderex.SQLiteCursorLoader'，引用自方法 com.alwaysorderdessert.AlwaysOrderDessertActivity.onCreateLoader

如何确保这些外部依赖项与我的应用程序一起加载到模拟器中，并且也（通过扩展？）包含在我的分布式 .apk 中？

谢谢！

* * *

### 更新

我已将 .jar 文件添加到我的项目并包含在构建路径中，所以现在我的项目资源管理器窗口如下所示：

![项目资源管理器片段](../Images/759513e50d5085bbe6503bd9d6c654b2.png)

但是，我仍然在模拟器中遇到同样的错误。有任何想法吗？

再次感谢。

### 更新 2

经过一番谷歌搜索并感谢[这个 SO 答案](https://stackoverflow.com/questions/2316445/how-to-use-and-package-a-jar-file-with-my-android-app)，我发现我只需要在**Java Build Path > Order and Exports**选项卡中检查 .jar 文件。

![订单导出片段](../Images/9126507f35d64cad908e7f450ee4b2e0.png)

### 更新 3

正如下面答案中的评论所指出的，我应该将 .jar 文件复制到`libs/`目录而不是`lib/`. 这使得其他更改变得不必要（即，将 .jar 添加到构建路径，选择它进行导出）。一封信有多大的不同！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:24:28.280

将 JAR 放在您的`libs/`目录中，这就足够了。

我注意到我的 README 已经过时了，告诉你把它添加到你的 Eclipse 构建路径中。一年前这是正确的，但不再需要，并且可能会导致您的问题。因此，如果您手动调整了构建路径，请撤消该操作。我为陈旧的指示道歉。

# c - Can't get my C program to compile. Makefile error

> ID：15593919
> 
> 赞同：-2
> 
> 时间：2013-03-24T00:53:48.023
> 
> 标签：c, makefile

I am trying to create a new C program, but I can't get the program to compile. This is because my makefile seems to be wrong. I keep getting "No rule to make target 'all'" and "No rule to make target 'clean'". Here is what I have so far:

Main program:

```
#include <stdio.h>

Sleepy() {

main (); {
    printf("Hello world");
}

} 
```

Header (Although I haven't done anything to it yet):

```
#ifndef SLEEPY_H_
#define SLEEPY_H_

#endif /* SLEEPY_H_ */ 
```

And the Makefile:

```
CC = gcc
CFLAGS = -c

Sleepy.o: Sleepy.c Sleepy.h
$(CC) $(CFLAGS) Sleepy.c

Sleepy: Sleepy.o
$(CC) -o Sleepy.exe Sleepy.o

all: Sleepy

clean:
rm -rf *.0 a.out

make = all 
```

I've been reading all kinds of tutorials, but I can't seem to get it to work. Would someone help me with this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:25:15.347

To achieve your compilation, following changes are required.

**Sleepy.c**

```
#include <stdio.h>

int main (void) {
    printf("Hello world");
} 
```

**Makefile**

```
CC = gcc
CFLAGS = -c

all: Sleepy

Sleepy.o: Sleepy.c Sleepy.h
    $(CC) $(CFLAGS) Sleepy.c

Sleepy.exe: Sleepy.o
    $(CC) -o Sleepy.exe Sleepy.o

clean:
    rm -rf *.o Sleepy.exe 
```

Please note the change in `clean` rule of your `Makefile`. You will have to remove the executable which is `Sleepy.exe`

**NOTE:** The rules for `Sleepy.o` and `Sleepy` should be offset by a `TAB` and not space. Else, you will run into this error: [`makefile:5: *** missing separator. Stop`](http://www.delorie.com/djgpp/v2faq/faq22_17.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:26:31.070

try this one,

```
All: sleepy

sleepy: sleepy.c sleepy.o sleepy.h 
        gcc sleepy.c -o sleepy
clean:
        rm -f *.o 
```

# javascript - Ajax成功函数中的问题

> ID：15593920
> 
> 赞同：0
> 
> 时间：2013-03-24T00:53:51.100
> 
> 标签：javascript, jquery, ajax

```
$.ajax({
    type: "GET",
    dataType: "jsonp",
    jsonp: "jsoncallback",
    data: {
        //some data
    },
    url: "http://mydomain.com/checkRequest.php?jsoncallback=?",
    success: function (result) {
        if (result[0].data.NameB == "") {
            alert("123");
        } else {
            alert("456");
        }
    },
    error: function (jqXHR, textStatus) {
        alert("Request failed: " + textStatus);
    }
}); // end of ajax 
```

我有上面的代码，当且仅当有东西返回时它才能成功。但是，如果 PHP 没有返回任何内容，则字符串变为： `jQuery191025216468679718673_1364086240540([]);`

我希望它会转到其他部分，警报 456。但是，它跳过了整个成功功能。那么，我应该如何修改编码呢？

如果我将 if 子句更改为`if (result!="")`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:57:17.910

[看看控制台。](http://www.netmagazine.com/tutorials/javascript-debugging-beginners)我确定您会收到类似的错误

> 无法读取未定义的属性“数据”。

如果数组为空，`result[0]`将返回`undefined`并且后续的属性访问将导致运行时错误，从而立即终止脚本。首先检查数组是否为空：

```
if (result.length > 0 && result[0].data.NameB == "") 
```

您可能还必须测试是否存在`result[0].data`，具体取决于数据。

# c# - 证明文件存在？以及如何在浏览网站时停止程序冻结

> ID：15593921
> 
> 赞同：0
> 
> 时间：2013-03-24T00:54:15.337
> 
> 标签：c#, file, download, html-agility-pack, freeze

嘿，我开始同时学习 C# 和 HtmlAgilityPack，到目前为止，我正在做一个小测试项目。我遇到的一个问题是检查文件是否已经存在，以便不下载两次。

另一个问题是，在抓取网站/下载图像时，我的整个程序会冻结一段时间，然后才能再次运行，有没有办法解决这个问题？

```
if (!File.Exists(@"Res\" + pokeName + ".jpg"))
        {
            var item = doc.DocumentNode.SelectNodes("//a[@class='image']//img")[0];
            if (doc.DocumentNode.SelectNodes("//a[@class='image']//img") != null)
            {
                getImage(item.GetAttributeValue("src", ""));
                pictureBox1.Load(@"Res\" + pokeName + ".jpg");
            }
        }
        else
        {
            pictureBox1.Load(@"Res\" + pokeName + ".jpg");
        } 
```

和

公共无效getImage（字符串网址）{

```
 string imageUrl = @""+ url;
        string saveLocation = @"Res\"+ pokeName + ".jpg";

        byte[] imageBytes;
        HttpWebRequest imageRequest = (HttpWebRequest)WebRequest.Create(imageUrl);
        WebResponse imageResponse = imageRequest.GetResponse();

        Stream responseStream = imageResponse.GetResponseStream();

        using (BinaryReader br = new BinaryReader(responseStream ))
        {
            imageBytes = br.ReadBytes(500000);
            br.Close();
        }
        responseStream.Close();
        imageResponse.Close();

        FileStream fs = new FileStream(saveLocation, FileMode.Create);
        BinaryWriter bw = new BinaryWriter(fs);
        try
        {
            bw.Write(imageBytes);
        }
        finally
        {
            fs.Close();
            bw.Close();
        }
    } 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:10:29.533

您的程序可能会冻结，因为您在 UI 线程上有长时间运行的项目。

您可能希望查看使用前面提到的后台工作程序，或者（如果您使用的是 .Net 4.5）新的异步/等待系统

GetStreamAsync 非常适合这种情况，当您有潜在的长时间等待或大量项目要使用而不是迭代地获取它们时 [http://msdn.microsoft.com/en-gb/library/vstudio/hh551738.aspx](http://msdn.microsoft.com/en-gb/library/vstudio/hh551738.aspx)

另外作为旁注，如果我有 3 张图片 {1.jpg, 2.jpg, foo/1.jpg} 你输入的代码你不会得到第三张，因为名称与第一张图片匹配，还有很多比 jpeg/jpg 更多的图像扩展 :)

# python - 使用 Python Mechanize 下载图像

> ID：15593925
> 
> 赞同：4
> 
> 时间：2013-03-24T00:54:55.137
> 
> 标签：python, mechanize

我正在尝试编写一个 Python 脚本来下载图像并将其设置为我的墙纸。不幸的是，机械化文档很差。我的脚本正确地跟随链接，但我很难将图像实际保存在我的计算机上。根据我的研究， .retrieve() 方法应该可以完成工作，但是如何指定文件应该下载到的路径？这是我所拥有的...

```
def followLink(browser, fixedLink):
    browser.open(fixedLink)

if browser.find_link(url_regex = r'1600x1200'):

    browser.follow_link(url_regex = r'1600x1200')

elif browser.find_link(url_regex = r'1400x1050'):

    browser.follow_link(url_regex = r'1400x1050')

elif browser.find_link(url_regex = r'1280x960'):

    browser.follow_link(url_regex = r'1280x960')

 return 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T02:54:39.063

```
import mechanize, os
from BeautifulSoup import BeautifulSoup

browser = mechanize.Browser()
html = browser.open(url)
soup = BeautifulSoup(html)
image_tags = soup.findAll('img')
for image in image_tags:
    filename = image['src'].lstrip('http://')
    filename = os.path.join(dir, filename.replace('/', '_'))
    data = browser.open(image['src']).read()
    browser.back()
    save = open(filename, 'wb')
    save.write(data)
    save.close() 
```

这可以帮助您从网页下载所有图像。至于解析html你最好使用BeautifulSoup或lxml。下载只是读取数据，然后将其写入本地文件。您应该将自己的值分配给 dir。这是你的图像存在的地方。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-16T23:52:32.473

不知道为什么这个解决方案没有出现，但您也可以使用该`mechanize.Browser.retrieve`功能。也许这只适用于较新的版本，`mechanize`因此没有被提及？

无论如何，如果你想缩短zhangyangyu[的](https://stackoverflow.com/users/2189957)[答案](https://stackoverflow.com/a/15594661/476371)，你可以这样做：

```
import mechanize, os
from BeautifulSoup import BeautifulSoup

browser = mechanize.Browser()
html = browser.open(url)
soup = BeautifulSoup(html)
image_tags = soup.findAll('img')
for image in image_tags:
    filename = image['src'].lstrip('http://')
    filename = os.path.join(dir, filename.replace('/', '_'))
    browser.retrieve(image['src'], filename)
    browser.back() 
```

另请记住，您可能希望将所有这些放入一个`try` `except`像这样的块中：

```
import mechanize, os
from BeautifulSoup import BeautifulSoup

browser = mechanize.Browser()
html = browser.open(url)
soup = BeautifulSoup(html)
image_tags = soup.findAll('img')
for image in image_tags:
    filename = image['src'].lstrip('http://')
    filename = os.path.join(dir, filename.replace('/', '_'))
    try:
        browser.retrieve(image['src'], filename)
        browser.back()
    except (mechanize.HTTPError,mechanize.URLError) as e:
        pass
        # Use e.code and e.read() with HTTPError
        # Use e.reason.args with URLError 
```

当然，您需要根据自己的需要进行调整。如果遇到问题，也许您希望它爆炸。这完全取决于您想要实现的目标。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T01:00:20.650

You can get/download the image by opening the url of the img src.

```
image_response = browser.open_novisit(img['src']) 
```

to save the file now, just use fopen:

```
with open('image_out.png', 'wb') as f:
    f.write(image_response.read()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-05T01:08:56.790

这真的很糟糕，但它对我来说“有效”，有[0xc0000022l](https://stackoverflow.com/users/476371/0xc0000022l) anwer's

从 BeautifulSoup 导入 mechanize, os 导入 BeautifulSoup 导入 urllib2

```
def DownloadIMGs(url): # IMPORTANT URL WITH HTTP OR HTTPS
    print "From", url
    dir = 'F:\Downloadss' #Dir for Downloads
    basicImgFileTypes = ['png','bmp','cur','ico','gif','jpg','jpeg','psd','raw','tif']

    browser = mechanize.Browser()
    html = browser.open(url)
    soup = BeautifulSoup(html)
    image_tags = soup.findAll('img')
    print "N Images:", len(image_tags)
    print
    #---------SAVE PATH
    #check if available
    if not os.path.exists(dir):
        os.makedirs(dir)
    #---------SAVE PATH
    for image in image_tags:

        #---------SAVE PATH + FILENAME (Where It is downloading)
        filename = image['src']
        fileExt = filename.split('.')[-1]
        fileExt = fileExt[0:3]

        if (fileExt in basicImgFileTypes):
            print 'File Extension:', fileExt
            filename = filename.replace('?', '_')
            filename = os.path.join(dir, filename.split('/')[-1])
            num = filename.find(fileExt) + len(fileExt)
            filename = filename[:num]
        else:
            filename = filename.replace('?', '_')
            filename = os.path.join(dir, filename.split('/')[-1]) + '.' + basicImgFileTypes[0]
        print 'File Saving:', filename
        #---------SAVE PATH + FILENAME (Where It is downloading)

        #--------- FULL URL PATH OF THE IMG
        imageUrl = image['src']
        print 'IMAGE SRC:', imageUrl

        if (imageUrl.find('http://') > -1 or imageUrl.find('https://') > -1):
            pass
        else:
            if (url.find('http://') > -1):
                imageUrl = url[:len('http://')]
                imageUrl = 'http://' + imageUrl.split('/')[0] + image['src']
            elif(url.find('https://') > -1):
                imageUrl = url[:len('https://')]
                imageUrl = 'https://' + imageUrl.split('/')[0] + image['src']
            else:
                imageUrl = image['src']

        print 'IMAGE URL:', imageUrl
        #--------- FULL URL PATH OF THE IMG

        #--------- TRY DOWNLOAD
        try:
            browser.retrieve(imageUrl, filename)
            print "Downloaded:", image['src'].split('/')[-1]
            print
        except (mechanize.HTTPError,mechanize.URLError) as e:
            print "Can't Download:", image['src'].split('/')[-1]
            print
            pass
        #--------- TRY DOWNLOAD
    browser.close()

DownloadIMGs('https://stackoverflow.com/questions/15593925/downloading-a-image-using-python-mechanize') 
```

# c++ - 我错过了什么？未定义参考

> ID：15593926
> 
> 赞同：0
> 
> 时间：2013-03-24T00:54:59.030
> 
> 标签：c++, compiler-errors, undefined-reference

到现在我已经编程了 7 个小时了，实在是太累了，看不出问题。我需要一些额外的眼睛。

为什么这段代码不编译？？？

```
bool readFromFile(const char*, Graph[5]);
bool writeToFile(Graph[5]);

int main(int argc, char* argv[]) {
    .
    .
    .

    Graph graph[5];
    if(readFromFile(argv[1], graph) == false){    //read and error check
        cout << "Returning from main(). . ." << endl;
        return -1;
    }

    if(writeToFile(graph) == false){
        cout << "Returning from main(). . ." << endl;
        return -1;
    }

    return 0;
}

bool writetoFile(Graph graph[5]){
    FILE* fp;
    fp = fopen("output2.txt","w");
    if(fp == NULL){
        cout << "Error opening file: output2.txt" << endl;
        return false;
    }

    //count pairs
    int pairCount[5] = {0};

    fclose(fp);
    return true;
} 
```

使用 NetBeans，实际上当我按 F9（编译）时它会编译，但是当我尝试运行时：

```
g++     -o dist/Debug/GNU-Linux-x86/algorithm_hw1_task2 build/Debug/GNU-Linux-x86/Graph.o build/Debug/GNU-Linux-x86/main.o build/Debug/GNU-Linux-x86/Node.o  
build/Debug/GNU-Linux-x86/main.o: In function `main':
/home/varaquilex/NetBeansProjects/algorithm_hw1_task2/main.cpp:40: undefined reference to `writeToFile(Graph*)'
collect2: error: ld returned 1 exit status
make[2]: *** [dist/Debug/GNU-Linux-x86/algorithm_hw1_task2] Error 1
make[2]: Leaving directory `/home/varaquilex/NetBeansProjects/algorithm_hw1_task2'
make[1]: *** [.build-conf] Error 2
make[1]: Leaving directory `/home/varaquilex/NetBeansProjects/algorithm_hw1_task2'
make: *** [.build-impl] Error 2 
```

当我尝试使用 g++ 编译时

```
/tmp/ccM7A6te.o: In function `main':
main.cpp:(.text+0x187): undefined reference to `writeToFile(Graph*)'
collect2: error: ld returned 1 exit status 
```

注意：我会尽快删除问题，感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:56:38.040

`writeToGraph()`当你调用它时，你在原型和代码中命名了你的函数，但是你`writetoGraph()`在定义它时命名了它（注意大小写的不同）。

结果，它没有链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:59:20.233

你打错了：`writetoFile`而不是`writeToFile`在函数定义中。

# javascript - 无法让单选按钮出现在页面上

> ID：15593928
> 
> 赞同：0
> 
> 时间：2013-03-24T00:55:30.743
> 
> 标签：javascript, object, button, radio

我需要在我的 javascript 中为我的网络应用程序制作一组 2 个单选按钮。到目前为止，我有这个代码：

```
 //radio buttons start
    var AddRadio = function(options){
    var _dom_element = document.createElement("radio");

        for ( var i = 0; i < options.length; i++ ) {
        var _option = document.createElement("radio");
            _option.value = options[i];
            _option.innerHTML = options[i];

            _dom_element.appendChild(_option);
            };

            this.getDomElement = function() {
                return _dom_element;
            }
    }
    //radio buttons end

var _temp_radio = new AddRadio(['Max Temp', 'Min Temp']);

container_element.appendChild(_temp_radio.getDomElement()); 
```

问题是只有“Max Temp”和“Min Temp”字符串出现，实际的单选按钮不存在。谢谢如果你能以任何方式提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:01:36.423

radio buttons are

```
<input type="radio">. 
```

You are creating a

```
<radio> 
```

tag instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:01:08.747

Use an `<input type="radio"/>` tag.

e.g.

```
var option = document.createElement('input');
option.type = 'radio'; 
```

[http://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)

# iphone - 我在 UITableViewCell 中有一个按钮抽屉。如何获取单元格的 indexPath 并将其删除？

> ID：15593929
> 
> 赞同：0
> 
> 时间：2013-03-24T00:55:34.910
> 
> 标签：iphone, ios, objective-c

我已经实现了这个按钮抽屉，并添加了一些按钮。也就是说，我不确定如何从抽屉中的这些按钮向适当的委托方法发送消息，以从我的 tableView 中删除该项目。

如何获得正确的 indexPath？我应该为已切换检查按钮的 uitableviewcells 创建一个新的 NSIndex 吗？

谢谢

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    HHPanningTableViewCell *cell = (HHPanningTableViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    NSInteger directionMask = indexPath.row % 5;
    if (cell == nil) {
        cell = [[HHPanningTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    UIView *drawerView = [[UIView alloc] initWithFrame:cell.frame];

    drawerView.backgroundColor = [UIColor grayColor];
    cell.drawerView = drawerView;
        UIImage *checkImage = [UIImage imageNamed:@"check.png"];
        UIButton *checkButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [checkButton setImage:checkImage forState:UIControlStateNormal];
        cell.frame = CGRectMake(0, 0, cell.frame.size.width, cell.frame.size.height);
        checkButton.frame = CGRectMake(10, 10, checkImage.size.width, checkImage.size.height);
        [drawerView addSubview:checkButton];

        [checkButton addTarget:nil action:@selector(onCheckMarkTap:) forControlEvents:UIControlEventTouchUpInside];

    }

- (void)onCheckMarkTap {
    NSLog(@"Delete the cell");

}

-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:18:00.810

这个问题已经[有了答案](https://stackoverflow.com/a/1802875/836263)。您可以使用带有事件的目标/动作或通过手势识别器获取在表格视图的坐标系中点击的按钮的坐标，然后使用 UITableView 的方法[-indexPathForRowAtPoint:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006943-CH3-SW8)来获取包含该按钮的单元格的 indexPath。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:04:25.393

Within `cellForRowAtIndexPath:`

```
checkButton.tag = indexPath.row 
```

Also inside onCheckMarkTap, do this:

```
- (void)onCheckMarkTap : (id) sender
{
    if (sender.tag == 0)
    ///code
    else if (sender.tag == 1)
    ///code

} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-24T01:04:42.023

我在自己的代码中处理此类问题的方法是对“ `UIButton`”进行子类化，其中我将“ `NSIndexPath`”或“ `tableRow`”ivar 添加到子类化按钮中。让我们的名字是“ `StangButton`”。

使用子类按钮，您可以在通过“”组成单元格时填充“ `indexPath`” ivar `cellForRowAtIndexPath:`。

然后，当按下按钮时，您将知道按下了哪个按钮以及它在哪一行。

您还可以检查[`"tableView:didSelectRowAtIndexPath:"`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3adidSelectRowAtIndexPath%3a)在单元格中触摸按钮时是否调用了表格视图委托方法。

# r - 为什么 -qnorm 不能在 sapply 中使用？

> ID：15593934
> 
> 赞同：3
> 
> 时间：2013-03-24T00:56:18.923
> 
> 标签：r

```
> sapply(c(0.05,0.01),function(k){-qnorm(k)})
[1] 1.644854 2.326348
> -sapply(c(0.05,0.01),qnorm)
[1] 1.644854 2.326348 
```

但是下面不能运行，为什么`-qnorm`不能在sapply中运行？

> sapply(c(0.05,0.01),-qnorm) -qnorm
> 中的错误：一元运算符的参数无效

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T01:06:59.017

`Compose`对这样的事情有好处：

```
require(functional)
sapply(c(0.05,0.01), Compose(qnorm, `-`))
[1] 1.644854 2.326348 
```

`-`请注意，此处需要反引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T02:53:12.847

问题的原因与实际上是**两个**功能`-qnorm(.)`的组合有关。首先你计算然后你拿。**`qnorm(.)``negative`**

 **`sapply`期待一个**单一**的功能。

当您`sapply( <..>, -qnorm)` `R`尝试计算*“减去函数 qnorm”*时，这对函数没有意义。
（只需键入`-qnorm`，您将得到相同的错误。）

`-qnorm(k)`起作用的原因是因为`R`计算`qnorm(k)`得到一个数字，然后取该数字的负数。

同样， `sapply(<..>, qnorm)`给出一个向量。这就是为什么当你在它前面添加负号时，你会得到你想要的输出。**

# java - 服务器启动时调用方法

> ID：15593935
> 
> 赞同：9
> 
> 时间：2013-03-24T00:56:21.533
> 
> 标签：java, jboss, ejb-3.0

我试图在我的 web 应用程序启动时调用一个方法。目的是启动一个计时器，该计时器以定义的时间间隔执行某些工作。当我的 jboss 7.1 Web 应用程序启动时，我如何调用函数 helloworld？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T01:25:43.273

如果您想在您的 Web 应用程序为您的任何客户端提供服务之前运行一些代码，您需要一个 ServletContextListener。

创建你的监听器类

```
import javax.servlet.*;

public class MyServletContextListener implements ServletContextListener {

 public void contextInitialized(ServletContextEvent e) {
   //Call your function from the event object here
 }

 public void contextDestroyed(ServletContextEvent e) {

 }
} 
```

把类放在 WEB-INF/classes

在 web.xml 文件中放置一个 < *listener > 元素。*

```
<listener>
  <listener-class>
     com.test.MyServletContextListener
  </listener-class>
</listener> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T01:26:03.347

除了 ContextListeners，您还可以在启动时加载 web.xml 中的 servlet：

```
<servlet>
    <servlet-name>mytask</servlet-name>
    <servlet-class>servlets.MyTaskServlet</servlet-class>
    ...
    <load-on-startup>1</load-on-startup>
</servlet> 
```

此 servlet 可以使用您想要的任何方式启动您的任务，例如，请参见此[链接](https://stackoverflow.com/questions/7814089/how-to-schedule-a-periodic-task-in-java)。

但是你不应该使用这种方法，恕我直言。

使用经过验证的框架/lib，例如[quartz](http://quartz-scheduler.org/)或类似工具。在 Web 服务器中运行和同步任务存在很多问题/问题，最好使用一些经过验证的工具，而不是重复这些工具已经遇到和解决的错误。可能需要一点时间才能掌握，但会避免很多头痛。

Jboss 本身有一些为此目的的工具：调度和管理任务。没用过所以不推荐。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T01:07:28.140

查看[Quartz 调度程序](http://quartz-scheduler.org/)。您可以使用[CronTrigger](http://quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/crontrigger)以定义的时间间隔触发。例如，每 5 分钟将如下所示：

`"0 0/5 * * * ?"`

这个想法是实现作为`Job`要运行的任务的接口，使用`SchedulerFactory`/安排它`Scheduler`，构建`Job`并`CronTrigger`启动它。

[这里](http://quartz-scheduler.org/documentation/quartz-2.1.x/examples/Example3)有一个非常清楚的例子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T01:06:57.517

使用[`ServletContextListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)在您的`web.xml`. 在方法中编写启动计时器的代码`contextInitialized`。

# c# - 通过 ASP.net 页面进行 FTP 传输

> ID：15593937
> 
> 赞同：2
> 
> 时间：2013-03-24T00:56:30.673
> 
> 标签：c#, asp.net, ftp

我对开发还很陌生，我遇到了一个我还没有解决的问题。无论如何，我似乎无法找到是否有可能解决..

我想创建一个允许用户从 ftp 服务器下载整个文件夹的 asp 页面。ftp 服务器本身与 asp 站点不在同一台物理服务器上。使问题进一步复杂化的是，我想使用似乎无法在浏览器中工作的显式或隐式传输。

该网页充当客户端和 ftp 服务器之间的中介，旨在尽可能地方便用户使用。例如。用户只需按下载，它会自动从 ftp 服务器下载，而无需使用已安装的本地客户端。

1.  客户端 -> asp 页面 -> ftp 服务器
2.  客户端 <- ftp 服务器

我的问题是asp页面没有在客户端系统上创建文件的权限。我已设法连接到 ftp 并尝试下载文件夹中的所有文件，但这些文件没有出现在目标文件夹中的客户端上。

我可能只是在寻找错误的术语，但我会很感激任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:34:28.697

从我们问题的评论讨论中，您似乎希望为用户提供一个选项来下载您从 ftp 服务器在服务器端收集的文件

```
//Connect to your file
FileStream sourceFile = new FileStream(Server.MapPath(@"FileName"), FileMode.Open);
float FileSize= sourceFile.Length;

//Write the file content to a byte Array 
byte[] getContent = new byte[(int)FileSize];
sourceFile.Read(getContent, 0, (int)sourceFile.Length);
sourceFile.Close();

//Build HTTP Response object
Response.ContentType = "application/octet-stream";
Response.AddHeader("Content-Length", getContent.Length.ToString());
Response.AddHeader("Content-Disposition", "attachment; filename=" + FileName);
Response.BinaryWrite(getContent);
Response.Flush();
Response.End(); 
```

请查看上面的代码是否有帮助。另外，请查看[HTTP 响应文件附件讨论](https://stackoverflow.com/questions/3688211/how-to-add-a-file-attachment-to-the-response-when-the-file-path-is-a-uri-in-mvc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:21:50.497

您的 ASP 站点将无法直接写入最终用户的系统。试想一下，您是否希望任何网站都可以直接访问您的文件系统？

您可以将文件下载到 Web 服务器上的临时文件夹，然后在响应中使用 write it 来提示用户下载它。

[这是关于在 ASP.NET 中下载文件的 SO 问题](https://stackoverflow.com/questions/8897458/asp-net-download-file-to-client-browser)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T01:10:11.653

当您说“客户端”时，我假设您指的是 asp.net 服务器。在这种情况下，您需要检查您网站的应用程序池在哪个用户下运行。然后，您需要确保用户对存储 ftp 文件的文件夹具有写入权限。

用户很可能是网络服务。

# c - 舍入一个浮点数并乘以它（c）*更新

> ID：15593945
> 
> 赞同：-2
> 
> 时间：2013-03-24T00:58:00.433
> 
> 标签：c, concatenation

任何人都可以帮助以下代码吗？
来自python的c新手，所以我知道我的代码是错误的。我试图制作一个可以舍入浮点数并将字符乘以所述浮点数的代码

```
float avg;
char star='*';
float top;
float bottom;

top=50;
bottom=80;

avg=(top/bottom*10);
star*=avg;
printf("%c\n",star);
printf("%d\n",top);
printf("%d\n",bottom);
printf("%f\n",avg); 
```

输出必须是

```
* * * * * *   
50  
80     
6.25 
```

我得到的是

```
♠ 
50
80
6.25 
```

我也尝试过使用 floor 来舍入平均值，但这只会将黑桃变成不同的字符，而 6.25 变为 6.00000000000000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:04:44.447

你需要的是一个`for`循环：

```
for(int i=0; i<avg ; ++i)
   printf("%c",star);
printf("\n"); 
```

在 C 中，当您将 an`char`和一个浮点数相乘时，您会得到另一个浮点数（您的第一个浮点数乘以 的 ascii 代码`char`），因为您像 char 一样打印`printf`会将浮点数转换为 char 并打印相应的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T01:06:53.003

您应该使用循环来显示您`*`的 s;

```
for( int i = 0; i < avg; ++ i ) {
    printf( "* " );
}
printf( "\n" ); 
```

（摆脱`star`变量）。

为了解释你看到的行为：当你这样做时`star *= avg;`，实际发生的是star的ascii值，即`*`=> 42，乘以avg，即6.25。这将产生 262.5，将其缩短（模 256）为 6.5，并删除小数点 (6)，以再次适合 char。ascii 中的 6 通常不是可见字符（从技术上讲，它是“确认”），但在您使用的代码页中，事实证明它被绘制为黑桃符号。

# ms-access - 如何使用组合框过滤特定记录并在子表单中显示

> ID：15593946
> 
> 赞同：1
> 
> 时间：2013-03-24T00:58:00.523
> 
> 标签：ms-access, ms-access-2007, vba

我正在尝试从组合框中过滤记录，如果我选择开普敦，只有开普敦记录必须显示在子表单中，但如果我选择德班，只有德班记录必须显示在子表单中。我没有收到任何错误，但是如果我选择开普敦只有开普敦记录显示，并且一旦我选择德班，开普敦记录仍然显示它不会更改以在子表单中显示德班记录。下面是我的代码，任何帮助将不胜感激谢谢

```
 If Me.Combo0.Value Then
   strFilters = "Sites = 'Cape Town'"

   DoCmd.OpenForm "Home"
Forms!Home![Plant Transaction subform].Form.Filter = strFilters
Forms!Home![Plant Transaction subform].Form.FilterOn = True

   ElseIf Me.Combo0.Value Then
   strFilters = "Sites = 'Durban'"

      DoCmd.OpenForm "Home"
Forms!Home![Plant Transaction subform].Form.Filter = strFilters
Forms!Home![Plant Transaction subform].Form.FilterOn = True

End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T13:00:53.053

只要您的表格设置正确，您就应该能够用很少/根本不用编码来做到这一点。

让我们创建一个名为 destinations 的表，并在其中放置 3 个字段：Unique ID、Townname 和 Area：示例：

> # 身份证 | 城镇名称 | 领域
> 
> 计算机断层扫描 | 开普敦 | PlaceWithinCapetown
> CT | 开普敦 | 另一个地方
> D | 德班 | PlaceHereAswell

依此类推。

假设您的表单上有 2 个元素。一个组合框和一个列表框。

**ComboBox -**城镇
**列表 ListBox -**城镇区域列表。

假设组合框称为 cboTowns 和 ListBox 称为 lstAreas

单击组合框，然后在 Row Source 中放置您的查询，例如：

```
 SELECT DISTINCT destinations.ID, destinations.TownName FROM destinations; 
```

在这里，我要求提供唯一 ID 和城镇名称，并将绑定列设置为 2（因此，当用户选择一个时，仅显示城镇名称），现在您的组合框填充了城镇，您会注意到城镇不止一次列出. 您需要更改查询的属性以仅允许唯一值转到行源，单击 3 个点，这需要您查询构建器选择一个空白区域，然后在右侧找到设置唯一值，将其设置为是，组合框是完全的。

现在我有了城镇列表和唯一 ID，我们可以让列表框开始工作。在您继续之前，如果您将所有信息都列在 1 个表格中，如上所述，则更容易查找数据。如果超过 2 个表，则需要在 Access 中创建关系。在继续之前。

完成后转到列表框，然后再次在您的行源中输入以下内容：

```
SELECT DISTINCT destinations.ID, destinations.Areas FROM destinations WHERE (((destinations.ID)=[Forms]![FormName]![cboTowns])) ORDER BY destinations.Areas; 
```

所以在这里我告诉它查找通过组合框设置的唯一 ID，然后查找附加到该唯一 ID 的区域。

每次用户从下拉框中选择一个条目时，列表框都会立即更新。无需其他编码。如果您有更多信息并需要显示其他内容，则可以使用 DLookup 函数填充您可能拥有的任何其他字段。

我还要说，如果您不想重组您已经查看您提供的代码的内容，我注意到您没有重新查询任何内容。如果要刷新表单，您将需要一个 Me.requery 结束后。否则它不会更新任何东西。

# php - 如果 MySQL 值为空回显，则回显？

> ID：15593947
> 
> 赞同：-1
> 
> 时间：2013-03-24T00:58:01.093
> 
> 标签：php, mysql

我试图回应“没有输入解释”。如果 MySQL 数据库中的 health_info 值为空，则使用以下代码。但是，无论该行是否为空，它总是回显“未输入解释”。我错过了什么或做错了什么？谢谢！！

```
<?php   
    if (empty($health_info)) {
        echo "No explanation entered.";
    } else {
        echo $health_info;
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:21:03.097

```
<?php   
    if (empty($health_info)) {
        echo "No explanation entered.";
    } else {
        echo $health_info;
    }
?> 
```

在您的代码中，您正在评估未定义的 $health_info （如果代码是您发布的）。

做一个`var_dump( $health_info );`，你就会知道价值是什么。

# ios - 如何在不创建同一视图的重复版本的情况下返回视图？

> ID：15593950
> 
> 赞同：0
> 
> 时间：2013-03-24T00:58:28.573
> 
> 标签：ios, uisplitviewcontroller, segue

我有一个拆分视图，其中拆分的顶部显示一些问题，底部显示一些其他内容。问题是每次用户选择一个问题时，我都会将其写入“推送”到一个新视图。这显然不太理想，因为用户可以输入相同问题的 15 个副本（或多或少，取决于用户选择问题的次数）以返回的情况。

我认为一个简单的解决方案是在用户选择一个问题时设置一个 BOOL，但事实证明，这会引入一个新的错误，用户可以选择一个问题一次，但如果他们回去，他们就不走运了. 我有点卡在这里，任何指导将不胜感激。

程序流程：

首先，您需要了解我正在尝试做的事情。我正在构建一个历史探究应用程序，专注于让教师支持学生学习历史探究。因此，有核心问题以及学生可以分析的文件。

根据应用程序出现的方式，JSLDetailViewController 显示核心问题，JSL_QuestionInteraction 显示用于分析文档的问题。

相关代码片段：

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if(indexPath.section == 0){
        if(!didSelectQuestion){
            [self performSegueWithIdentifier:@"questionDisplaySegue" sender:indexPath];
            didSelectQuestion = TRUE;
        } else {
            JSLDetailViewController *detailView = [JSLDetailViewController alloc];
            detailView.telegram = indexPath.row;
            [detailView setDetailItem:indexPath];
        }
    }else if(indexPath.section == 1){
            [self performSegueWithIdentifier:@"telegramQuestionDisplaySegue" sender:indexPath];
            JSL_QuestionInteraction *questionView = [[JSL_QuestionInteraction alloc] init];
            questionView.managedObjectContext = self.managedObjectContext;
    }
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"questionDisplaySegue"]){
        JSLDetailViewController *detailView = (JSLDetailViewController *)segue.destinationViewController;
        detailView.telegram = index.row;
        [detailView setDetailItem:index];
        JSLDetailViewController *controller = (JSLDetailViewController *)segue.destinationViewController;
        controller.managedObjectContext = self.managedObjectContext;
    } else if ([segue.identifier isEqualToString:@"telegramQuestionDisplaySegue"]){
        JSL_QuestionInteraction *questionView = [[JSL_QuestionInteraction alloc] init];
        questionView.managedObjectContext = self.managedObjectContext;
    }
} 
```

如果您需要任何其他详细信息来理解此问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:47:11.200

我不知道我在这里写的任何内容是否能解决您的问题，因为我仍然不太了解您的结构，但是我在您发布的代码中发现了一些错误。

首先，当你在做 segue 时，你不应该在代码中分配任何东西，segue 会为你实例化新的控制器。目前尚不清楚您在 didSelectRowAtIndexPath: 中使用 detailView 做什么，您在没有 init 的情况下执行了分配 - 您**永远**不应该在没有 init 的情况下执行分配。如果该 detailView 已经出现在屏幕上，您应该获取对该实例的引用并在其上设置电报和 detailItem。

在 prepareForSegue 的“if”子句中，您将 segue.destinationViewController 分配给两个不同的局部变量 detailView 和控制器——它们都指向同一事物，因此没有理由同时使用它们。

在“else”子句中，再次分配你的控制器，这是你不应该做的。您可能想要获取 segue 的目标视图控制器。

# r - R data.table efficient replication by group

> ID：15593961
> 
> 赞同：2
> 
> 时间：2013-03-24T00:59:45.180
> 
> 标签：r, data.table, replicate

I am running into some memory allocation problems trying to replicate some data by groups using data.table and rep.

Here is some sample data:

```
ob1 <- as.data.frame(cbind(c(1999),c("THE","BLACK","DOG","JUMPED","OVER","RED","FENCE"),c(4)),stringsAsFactors=FALSE)
ob2 <- as.data.frame(cbind(c(2000),c("I","WALKED","THE","BLACK","DOG"),c(3)),stringsAsFactors=FALSE)
ob3 <- as.data.frame(cbind(c(2001),c("SHE","PAINTED","THE","RED","FENCE"),c(1)),stringsAsFactors=FALSE)
ob4 <- as.data.frame(cbind(c(2002),c("THE","YELLOW","HOUSE","HAS","BLACK","DOG","AND","RED","FENCE"),c(2)),stringsAsFactors=FALSE)
sample_data <- rbind(ob1,ob2,ob3,ob4)
colnames(sample_data) <- c("yr","token","multiple") 
```

What I am trying to do is replicate the tokens (in the present order) by the multiple for each year.

The following code works and gives me the answer I want:

```
good_solution1 <- ddply(sample_data, "yr", function(x) data.frame(rep(x[,2],x[1,3])))

good_solution2 <- data.table(sample_data)[, rep(token,unique(multiple)),by = "yr"] 
```

The issue is that when I scale this up to 40mm+ rows, I get into memory issues for both possible solutions.

If my understanding is correct, these solutions are essentially doing an rbind which allocates everytime.

Does anyone have a better solution?

I looked at set() for data.table but was running into issues because I wanted to keep the tokens in the same order for each replication.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T01:18:26.327

一种方法是：

```
require(data.table)
dt <- data.table(sample_data)
# multiple seems to be a character, convert to numeric
dt[, multiple := as.numeric(multiple)]
setkey(dt, "multiple")
dt[J(rep(unique(multiple), unique(multiple))), allow.cartesian=TRUE] 
```

除了最后一行之外的所有内容都应该是直截了当的。最后一行在 的帮助下使用键列使用子集`J(.)`。对于`J(.)`对应值中的每个值，都与“键列”匹配，并返回匹配的子集。

也就是说，如果你这样做，`dt[J(1)]`你会得到子集 where `multiple = 1`。如果你仔细注意，这样做`dt[J(rep(1,2)]`会给你相同的子集，但是两次。`dt[J(1,1)]`请注意，传递和之间存在差异`dt[J(rep(1,2)]`。前者是将 (1,1) 的值分别与 data.table的*前两个键列匹配，而后者是通过将 (1 和 2) 与数据的**第一个键*列匹配来进行子集化。桌子。

因此，如果我们在 中将相同的列值传递 2 次`J(.)`，那么它会被复制两次。我们使用这个技巧来传递 1 1-time、2 2-times 等。这就是该`rep(.)`部分的作用。`rep(.)`给出 1,2,2,3,3,3,4,4,4,4.

如果连接产生的行数多于`max(nrow(dt), nrow(i))`（i 是内部的代表向量`J(.)`），则您必须明确使用`allow.cartesian = TRUE`来执行此连接（我猜这是 data.table 1.8.8 的新功能）。

* * *

**编辑：**这是我对“相对”大数据所做的一些基准测试。我没有看到这两种方法的内存分配有任何峰值。但是我还没有找到一种方法来监控 R 函数中的峰值内存使用情况。我确信我已经在 SO 上看到过这样的帖子，但它现在让我失望了。我会再回信。现在，这里有一个测试数据和一些初步结果，以防有人有兴趣/想自己运行它。

```
# dummy data
set.seed(45)
yr <- 1900:2013
sz <- sample(10:50, length(yr), replace = TRUE)
token <- unlist(sapply(sz, function(x) do.call(paste0, data.frame(matrix(sample(letters, x*4, replace=T), ncol=4)))))
multiple <- rep(sample(500:5000, length(yr), replace=TRUE), sz)

DF <- data.frame(yr = rep(yr, sz), 
                 token = token, 
                 multiple = multiple, stringsAsFactors=FALSE)

# Arun's solution
ARUN.DT <- function(dt) {
    setkey(dt, "multiple")
    idx <- unique(dt$multiple)
    dt[J(rep(idx,idx)), allow.cartesian=TRUE]
}

# Ricardo's solution
RICARDO.DT <- function(dt) {
    setkey(dt, key="yr")
    newDT <- setkey(dt[, rep(NA, list(rows=length(token) * unique(multiple))), by=yr][, list(yr)], 'yr')
    newDT[, tokenReps := as.character(NA)]

    # Add the rep'd tokens into newDT, using recycling
    newDT[, tokenReps := dt[.(y)][, token], by=list(y=yr)]
    newDT
}

# create data.table
require(data.table)
DT <- data.table(DF)

# benchmark both versions
require(rbenchmark)
benchmark(res1 <- ARUN.DT(DT), res2 <- RICARDO.DT(DT), replications=10, order="elapsed")

#                     test replications elapsed relative user.self sys.self
# 1    res1 <- ARUN.DT(DT)           10   9.542    1.000     7.218    1.394
# 2 res2 <- RICARDO.DT(DT)           10  17.484    1.832    14.270    2.888 
```

但正如里卡多所说，内存不足可能并不重要。因此，在这种情况下，必须在速度和内存之间进行权衡。我想验证的是这里两种方法中使用的峰值内存，以确定使用`Join`是否更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T01:47:25.250

您可以尝试先为所有行分配内存，然后迭代地填充它们。
例如：

```
 # make sure `sample_data$multiple` is an integer
  sample_data$multiple <- as.integer(sample_data$multiple)

  # create data.table
  S <- data.table(sample_data, key='yr')

  # optionally, drop original data.frame if not needed
  rm(sample_data)

  ## Allocate the memory first
  newDT <- data.table(yr = rep(sample_data$yr, sample_data$multiple), key="yr")
  newDT[, tokenReps := as.character(NA)]

  # Add the rep'd tokens into newDT, using recycling
  newDT[, tokenReps := S[.(y)][, token], by=list(y=yr)] 
```

* * *

### 两个注意事项：

(1) `sample_data$multiple`当前是一个字符，因此在传递给`rep`（在您的原始示例中）时会被强制。如果情况也是如此，可能值得仔细检查您的真实数据。

(2) 我使用以下方法确定每年所需的行数

```
S[, list(rows=length(token) * unique(multiple)), by=yr] 
```

# php - 如何使用最后一行值在 MySQL 或 php 中创建类似事务的值来计算

> ID：15593965
> 
> 赞同：0
> 
> 时间：2013-03-24T01:00:18.497
> 
> 标签：php, mysql, triggers, calculated-columns

MySQL/php 的新手，但我正在使用 xampp 并尝试创建一个简单的网页来充当分类帐（例如支票账户交易）。因此，我在要插入新记录的表中有借方、收益和余额列（以及其他一些列）：

html

```
<form id='chk-trans-form' action="example-api.php" method="post">
Detail: <input type='text' name='trans-detail'/><br/>
Date: <input type='text' id='trans-dts'/><br/>
Amount: <input type='text' id='trans-amount'/>
Debit <input type='radio' name='trans-type-group' value='debit' checked/> Gain <input type='radio' name='trans-type-group' value='gain'/>
<button id='submit-trans'>submit</button>
</form> 
```

数据库.php

```
<?php
   $conn = mysql_connect('localhost', 'root', '');
   $db   = mysql_select_db('financial');
?> 
```

示例-api.php

```
<?php
    include_once('database.php');

    $transDate = $_POST['trans-dts'];
    $transDetail = $_POST['trans-detail'];
  $transAmount = $_POST['trans-amount'];
  $transType = $_POST['trans-type-group'];

  if ($transType == 'debit')
  {
      if(mysql_query("INSERT INTO chktrans (chkDTS, chkDetail, chkDebit) VALUES ('$transDate','$transDetail', '$transAmount')"))
          echo "Successfully Added";
      else
          echo "Insertion Failed"; 
   } else {
    if(mysql_query("INSERT INTO chktrans (chkDTS, chkDetail, chkGain) VALUES ('$transDate','$transDetail', '$transAmount')"))
        echo $transType;
        else
            echo "Insertion Failed";    
   }
?> 
```

所以这是我学到的方法，它可以很好地将数据放到表格中，虽然我不确定它是否是最好的方法，只是我发现的。

所以下一部分我有点不确定......因为这是一个像表一样的交易，我需要最后余额+（借方+收益）=新余额之类的东西。所以我不确定这是我应该尝试在 php 中还是在 mysql 中做的事情......我找到了类似计算的字段方法的触发器（[here](https://stackoverflow.com/questions/5222044/column-calculated-from-another-column)），但我不确定这是否会工作是因为我不知道如何获取最后一个值，或者最好的方法是为此创建触发器，还是尝试提取值并使用 php 获取值，计算并将所有内容发送回？

一如既往地感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:09:06.770

只是`SELECT`您想要的列，将其存储在一个变量中，然后获取另一个。在这种情况下，您将获得“chkGain”和借记的必需品。最后的余额将保持不变，直到语句完成调用。

```
$currBalance = $currBalance + $debit + $gain; 
```

请注意，在您的等式中，“最后余额 +（借方 + 收益）”不需要括号。操作顺序，我的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T01:14:41.030

我会使用 SELECT 来计算余额，比如

```
select (currBalance + debit + gain) total_balance from chktrans; 
```

如果要获取最后一行（最后插入的），可以执行以下操作：

```
select * from chktrans where rowid in (select max(rowid) from chktrans); 
```

希望能帮助到你。

# git-merge - Checkout and merge a file from other branch in git

> ID：15593967
> 
> 赞同：1
> 
> 时间：2013-03-24T01:00:30.197
> 
> 标签：git-merge

I maintains two branches `master` and `pathogen` for my vim scripts. Both of them have their respective `vimrc` files. Now I want to merge both of them together and save it as `vimrc` of branch `pathogen`.

What I am doing now is checking-out vimrc from `master` branch and append it to the `vimrc` of pathogen. Is there a cooler way to do it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:24:30.840

```
$ git pull origin pathogen 
```

应该做的伎俩

# mysql - 返回匹配值，排除不匹配的值，删除重复的MYSQL

> ID：15593974
> 
> 赞同：1
> 
> 时间：2013-03-24T01:01:59.610
> 
> 标签：mysql, match

我有一个似乎无法解决的问题。我有一个跟踪用户 ID 和应用 ID 的表。该表如下所示：

```
Library:
ID        userID       appID
1           1          11122            
2           1          65324
3           1          43435
4           2          43435
5           2          50645
6           2          34343
7           4          11122
8           4          55343 
```

查询应执行以下操作：

*   返回所选用户共有的所有 appID 值。（如果选择了用户 4 和用户 1，并且两者都有应用程序 11122，则应显示应用程序 11122）
*   排除那些不匹配的（删除他们没有共同点的。在这个例子中，它将是删除 ids（55343、65324 和 43435）
*   删除重复的结果（它不应该两次列出同一个应用程序。所以 appID 11122 应该只显示一次）

这是我正在尝试做的 PHP 示例：

```
 $array1 = array("a" => "green", "red", "blue");
    $array2 = array("b" => "green", "yellow", "red");
    $result = array_intersect($array1, $array2); 
```

结果将是“绿色”和“红色”

这可以通过 MySQL 实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:11:47.680

我不确定我完全理解你的问题，但听起来你想返回 userID 1 和 2 因为它们与同一个 appID 相关联（实际上是两次）。如果是这样，那么这应该工作：

```
select L.userID, L.appID
from Library L
    join (
      select appID
      from Library
      group by appId
      having count(distinct userID) > 1
) L2 on L.appID = L2.appID 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/86e0f/2)

如果您只需要唯一的用户 ID，请从上述查询中删除 appID 并添加 DISTINCT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:04:44.630

**你可以试试这个：**

```
select a.appID from Library a
inner join
(select appID,count(ID) as ctr from Library where userID in(1,4) group by appID) b on b.appID = a.appID
where b.ctr > 1
group by a.appID; 
```

[sql小提琴](http://sqlfiddle.com/#!2/0a077/19)

**更新：**

我不确定您是否只想在 1 列中查看常用用户 ID

```
select a.appID,group_concat(a.userID) as user_ids from Library a
inner join
(select appID,count(ID) as ctr from Library where userID in(1,4) group by appID) b on b.appID = a.appID
where b.ctr > 1
group by a.appID; 
```

[SQL小提琴](http://sqlfiddle.com/#!2/e0ed6/1)

# orm - Error reading annotations with composite key in EBean

> ID：15593978
> 
> 赞同：1
> 
> 时间：2013-03-24T01:02:29.393
> 
> 标签：orm, ebean, composite-key

Following this [link](http://boris.kirzner.info/blog/archives/2008/07/19/hibernate-annotations-the-many-to-many-association-with-composite-key/)

I would like to use OneToMany instead ManyToMany annotation, having middle class with composite key in it using Ebean. I have this error:

> java.lang.RuntimeException: Error reading annotations for models.SoftwareTagPk

This is my SoftwareTagPk class:

```
@Embeddable
public class SoftwareTagPk  implements Serializable {

    @ManyToOne
    private Tag tag;

    @ManyToOne
    private Software software;

    ...
} 
```

And SoftwareTag class:

```
@Entity
public class SoftwareTag extends Model {

    @EmbeddedId
    private SoftwareTagPk pk = new SoftwareTagPk();

    @Transient
    public Tag getTag() {
        return pk.getTag();
    }

    public void setTag(Tag aTag) {
        pk.setTag(aTag);
    }

    @Transient
    public Software getSoftware() {
        return pk.getSoftware();
    }

    public void setSoftware(Software aSoftware) {
        pk.setSoftware(aSoftware);
    } 
} 
```

Also in logs:

> Error with association to [class models.Tag] from [models.SoftwareTagPk.tag]. Is class models.Tag registered?

How to fix it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-01T22:52:36.473

要使此代码正常工作，您必须执行以下操作：

1.  在你的`SoftwareTagPk`课堂上只放标签和软件的 id
2.  将`@ManyToOne`关系移动到`SoftwareTag`类
3.  添加`@JoinColumn`带有属性的注释`updatable`并`insertable`设置为 false。
4.  覆盖二传手`setTag`和课堂`setSoftware`。`SoftwareTag`在这些设置器中，您将 id 重写为复合键。

该解决方案的主要思想是`SoftwareTag`具有复合键和`@ManyToOne`关系，并且它们被映射到相同的列。

这是代码：

标签.java

```
@Entity 
public class Tag extends Model {
    @Id
    private Integer id;

    @OneToMany(mappedBy="tag")
    public List<SoftwareTag> softwareTags;

    public Integer getId() {
        return id;
    }

    public void setId(Integer aId) {
        id=aId;
    }

    public static Finder<Integer,Tag> find = new Finder<Integer,Tag>(
        Integer.class, Tag.class
    ); 
} 
```

软件.java

```
@Entity 
public class Software  extends Model {
    @Id
    private Integer id;

    @OneToMany(mappedBy="software")
    public List<SoftwareTag> softwareTags;

    public Integer getId() {
        return id;
    }

    public void setId(Integer aId) {
        id=aId;
    }
} 
```

软件标签.java

```
@Entity
public class SoftwareTag extends Model {

    SoftwareTag() {
        pk = new SoftwareTagPk();       
    }

    @EmbeddedId
    private SoftwareTagPk pk = new SoftwareTagPk();

    @ManyToOne
    @JoinColumn(name = "tag_id", insertable = false, updatable = false)
    private Tag tag;

    @ManyToOne
    @JoinColumn(name = "software_id", insertable = false, updatable = false)
    private Software software;

    public Tag getTag() {
        return tag;
    }

    public void setTag(Tag aTag) {
        tag = aTag;
        pk.tag_id = aTag.getId();
    }

    public Software getSoftware() {
        return software;
    }

    public void setSoftware(Software aSoftware) {
        software = aSoftware;
        pk.software_id = aSoftware.getId();
    }
} 
```

软件标签库.java

```
@Embeddable
public class SoftwareTagPk implements Serializable {

    public Integer tag_id;

    public Integer software_id;

    @Override
    public int hashCode() {
        return tag_id + software_id;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) 
            return true;
        SoftwareTagPk pk = (SoftwareTagPk)obj;
        if(pk == null)
            return false;
        if (pk.tag_id.equals(tag_id) && pk.software_id.equals(software_id)) {
            return true;
        }
        return false;
    }
} 
```

# java - 线程中的phantomjs异常

> ID：15593984
> 
> 赞同：0
> 
> 时间：2013-03-24T01:03:25.393
> 
> 标签：java, phantomjs

我已将 phantomjs 64 位下载到（全新的 VPS）Centos 5.8。Java 已安装并位于 PATH 中。当我在 phantomjs 的包含目录中输入“java phantomjs”时，我得到

```
"Exception in thread "main" java.lang.NoClassDefFoundError: phantomjs 
Caused by: java.net.URLClassLoader$1.run(URLClassLoader.java.200) at ....." 
```

以及一系列 ClassLoader 错误。我已经在网上搜索了导致这种情况的线索，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:06:06.273

您是如何想到 phantomjs 是 Java 应用程序的？`phantomjs`是 Linux 二进制文件，只需像这样运行它就`phantomjs`可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T01:13:16.743

从 phantomjs[快速入门](https://github.com/ariya/phantomjs/wiki/Quick-Start)页面。

> 该指令假定 PhantomJS 已安装并且其可执行文件位于 PATH 中的某个位置。

它是本机可执行文件，而不是 Java 应用程序。所以很自然，`java`命令无法运行它。执行快速入门文档所暗示的内容：

1.  将包含可执行文件的目录添加到 $PATH。
2.  使用 Linux 命令外壳键入“phantomjs”命令。

# php - wamp server ignore php files

> ID：15593985
> 
> 赞同：0
> 
> 时间：2013-03-24T01:03:26.887
> 
> 标签：php, wamp, wampserver

my wamp icon is green and I have access to the project folder. When I enter to the php file I just see blank white page.

the code :

```
<?php

phpinfo() ;

?> 
```

# c++ - How to build boost for i386 on 64bit osx?

> ID：15593986
> 
> 赞同：2
> 
> 时间：2013-03-24T01:03:46.037
> 
> 标签：c++, boost

I'm trying to get boost 1.53 to link to an app that is compiled for i386\. This is on a mac that is 64 bit. It seems that boost is getting built by default as 64 bit so when I try to link to it, I get this error:

> ld: warning: ignoring file /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk/usr/local/lib/libboost_system.dylib, file was built for unsupported file format which is not the architecture being linked (i386)

I tried building boost via this command:

> ./b2 toolset=darwin cxxflags="-arch i386" address-model=32 stage

But it doesn't seem to make a difference. My linker settings are

> -lboost_system -lboost_thread

Do I need to build boost a different way, or link to it differently?

**Edit**

Just figured out that this command seems to build it correctly:

> ./b2 toolset=darwin cxxflags="-arch i386" address-model=32 architecture=x86 stage

and do the same for install

> ./b2 install toolset=darwin cxxflags="-arch i386" address-model=32 architecture=x86 stage

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T01:08:44.117

您需要在目标配置中选择架构 i386：（`Valid Architectures`在`Build Setting`您的目标中）

**但是**，如果您正在构建应用程序，则有两种解决方案：

*   构建应用程序 32 位，构建库的 32 位版本。
*   构建 64 位应用程序。为此，请替换`i386`为`x86_64`和更改`Architectures`以及`Valid Architectures`。

![在此处输入图像描述](../Images/10f8b3aa31e4de5f7bb233149bbe99de.png)

# ruby-on-rails - 将索引变量传递给 fields_for 标记并在渲染部分内部

> ID：15593995
> 
> 赞同：0
> 
> 时间：2013-03-24T01:04:54.900
> 
> 标签：ruby-on-rails, cocoon-gem

我正在将茧用于动态/嵌套字段/表单。

但是，我无法在部分文件中传递索引变量。

这是我的 _form.html.erb 中的内容：

```
 <% @project_procurement_management_plan.items.each_with_index do |item, index | %>
  <%= f.fields_for :items, item, :child_index => index do |builder| %>
    <%= render 'item_fields', :f => builder, :g=>index %>
  <% end %>
<% end %>
<div>
  <%=link_to_add_association 'Add Item', f, :items, class:"btn btn-success totheleft" %>
</div> 
```

在我的 _item_fields.html.erb 中：

```
<%= f.select :category_id, Category.all.map{ |c| [c.code, c.id] }, {:prompt=>""},{class:"cat-code #{g}",required:true} %> 
```

它说：

**#<#:0x007f82dadeacd8> 的未定义局部变量或方法“g”**

很明显，`g`作为索引的变量无法在我的部分中读取。

是否有任何解决方法可以将索引变量正确传递给 fields_for 并进入我的渲染。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T22:13:00.720

I solved something like this (in haml) by setting a @parameter in mine like so:

questions.html.haml

```
- @answer_index = 0
.answers
  = f.fields_for :answers
  = f.link_to_add "Add an answer", :answers 
```

answers.html.haml

```
.answer
  .field
    = f.label :answer, "Answer #{('A'..'Z').to_a[@answer_index]}"
    = f.radio_button :correct , 1, {onclick: "check_answer(this);"}
    = f.text_field :answer
    %span.remove
      = f.link_to_remove "remove"

- @answer_index += 1 
```

Not sure if you can pass an @ variable like @answer_index

So for you it might look something like (but not exactly, I'm sure):

_form.html.erb

```
 <%= @item_index = 0 %>
  <%= f.fields_for :items do |builder| %>
    <%= render 'item_fields', :f => builder %>
    <%= @item_index += 1 %>
  <% end %>
<% end %>
<div>
  <%=link_to_add_association 'Add Item', f, :items, class:"btn btn-success totheleft" %>
</div> 
```

_item_fields.html.erb

```
<%= f.select :category_id, Category.all.map{ |c| [c.code, c.id] }, {:prompt=>""},{class:"cat-code #{@item_index}",required:true} %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:12:16.083

您不必自己迭代这些项目！`fields_for`会为你做的。

删除循环`<% @project_procurement_management_plan.items.each_with_index do |item, index | %>`。

你现在还需要索引吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T01:13:11.260

请考虑使用“本地人”

```
<%= render :partial => 'item_fields', :locals => { :g => index, :f => builder } %> 
```

# c# - 为什么 url 参数在 javascript 中没有正确的格式？

> ID：15593998
> 
> 赞同：0
> 
> 时间：2013-03-24T01:05:21.237
> 
> 标签：c#, javascript, asp.net

我必须使用 C# 在页面后面的代码中创建一个包含 url 的 javascript。但是javascript里面的url参数用C#生成后没有正确的格式。

例子：

**网址参数：http:** [//google.com](http://google.com)

**Javascript:** javascript:dnnModal.show(' [http://google.com](http://google.com) ',false,365,206,false)

**C#代码：**

```
string link = "http://google.com?popUp=true";
string googleIcon = "<a href='javascript:dnnModal.show('" + link +',false,365,206,false)'><img border='0' src='~/Icons/gIcon.png'></a>"; 
```

从页面视图后面的代码生成后，url 格式不正确。我使用“查看选择源”查看aspx页面代码后，有googleIcon的代码：

```
<a href="javascript:dnnModal.show(" http:="" google.com?popup="true',false,365,206,false)'"><img src="~/Icons/gIcon.png" border="0"></a> 
```

当我将鼠标移到它上面时，图标上的超链接只会显示这个：

```
javascript:dnnModal.show( 
```

网址丢失了，提醒字符串也丢失了。

我需要一些关于我的问题的帮助，以展示如何使用 C# 将 url 参数传递到 javascript 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T01:08:21.970

应该是这样的，

```
string googleIcon = "<a href=\"javascript:dnnModal.show('" + link + "',false,365,206,false)'\"><img border='0' src='~/Icons/gIcon.png'></a>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T01:14:14.100

我同意其他两个答案，但是您可能应该尝试将此类任务封装在用户控件中。但如果这不可能，我建议`System.Web.UI.HtmlControls`改用它，因为它会给你更多的灵活性。
像这样的东西：

```
 HtmlLink myHtmlLink = new HtmlLink();
            myHtmlLink.Href = @"javascript:dnnModal.show(\"" + link +"\",false,365,206,false)";
            HtmlImage myImage = new HtmlImage();
            myImage.Src = "~/Icons/gIcon.png";
            myImage.Border = 0;
            myHtmlLink.Controls.Add(myImage); 
```

我更喜欢这种方法，因为 Asp.net 负责创建 DOM，这意味着您将是安全的，并且可以保证获得有效的 XHTML 结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T01:09:31.090

您没有正确转义字符串

```
string googleIcon = "<a href='javascript:dnnModal.show(\"" + link +"\",false,365,206,false)'><img border='0' src='~/Icons/gIcon.png'></a>"; 
```