# StackOverflow 问答 15627000-15627999

# java - 在 Java 中为 RGB 像素着色

> ID：15627000
> 
> 赞同：0
> 
> 时间：2013-03-25T23:57:01.787
> 
> 标签：java, colors, rgb

伙计们。

我一直在研究一些代码，它涉及到绘制像素。我遇到了以下代码：

```
pixels[x + y * width] =  i * 128; 
```

我似乎无法理解的是：当**i**为奇数时，像素被绘制为蓝色；当**我**是偶数时，它们被画成黑色。我读过关于**rgb = 65536 * r + 256 * g + b**的内容，但我未能将这个问题纳入这个逻辑。例如，为什么 2688 (21 * 128) 和 2816 (23 * 128) 会绘制蓝色像素，而 2816 (22 * 128) 会绘制黑色像素？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:00:15.010

`i * 128`模 256 是蓝色值。如果`i`是奇数，则`i * 128`模 256 为 128，即中等蓝色。如果`i`是偶数，则`i * 128`模 256 为 0，没有蓝色分量。`i`如果是 21 ( `i * 128 / 256`)，这里的绿色分量是 10 ，如果`i`是 22 或 23 并且几乎是黑色，则为 11。这里的结果值不足以“溢出”并创建红色组件；`i`对于21 或 23 的值，此处为 0 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:11:43.540

蓝色值是 0 到 255，一旦超过 255，就开始设置绿色。rgb 值是以整数编码的字节，因此整数的第一个字节未使用，第二个字节为红色，第三个为绿色，第四个为蓝色。您可能会发现移动字节值比将数字乘以向上移动字节更容易。

# perl - Perl CGI 应用程序使用的图像出现 500 个错误

> ID：15627004
> 
> 赞同：-1
> 
> 时间：2013-03-25T23:57:18.993
> 
> 标签：perl, apache, cgi, foswiki

我已经安装了[Foswiki](http://foswiki.org/)，但是当我的应用程序尝试加载图像时出现问题。图片加载不出来...

我有一个解决方案，但我不确定是否正确......

这是我对 CGI 目录的配置

```
#
# "C:/Archivos de programa/Apache Software Foundation/Apache2.2/cgi-bin" should be changed to whatever your ScriptAliased
# CGI directory exists, if you have that configured.
#
<Directory "C:/Archivos de programa/Apache Software Foundation/Apache2.2/cgi-bin">
    AllowOverride All
    Options +ExecCGI 
    AddHandler cgi-script .cgi .pl
    AddHandler default-handler .jpg .png .gif .js .txt .bat .css 
    Order allow,deny
    Allow from all
</Directory> 
```

我必须一一添加扩展名:(...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:46:15.900

在这里有点冒险，但我猜，除了你的问题中包含的配置之外，这个目录也是一个`ScriptAlias`指令的目标（可能是`/cgi-bin`，并且可能在默认的 Apache 配置中，而不是在你已经明确做过的事情）。 `ScriptAlias`表示目录中的每个文件都是一个 CGI 脚本；请参阅[指令文档](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#scriptalias)。这就是为什么你必须用`AddHandler`.

如果您想控制哪些文件作为 CGI 脚本使用`AddHandler`文件扩展名（如.）来执行`.cgi`，请不要使用`ScriptAlias`. 如果没有`ScriptAlias`，默认情况下会将文件作为资源提供，除非您明确表示将其作为 CGI 脚本执行。

# java - 在使用 Ehcache 刷新之前，我是否需要锁定我的只读缓存？

> ID：15627009
> 
> 赞同：4
> 
> 时间：2013-03-25T23:57:34.803
> 
> 标签：java, multithreading, jakarta-ee, caching, ehcache

我正在多线程环境中实现 Ehcache。我有 1 个线程专门用于管理和刷新缓存，其他线程可以在任何给定时间调用它。

缓存是只读的，但每 30 分钟刷新一次。Ehchache 是否会在更新缓存时自动管理和锁定对缓存的读取访问权限？还是我需要用 acquireReadLockOnKey() 语句包装？

```
Ehcache cache = getCache();
cache.acquireReadLockOnKey(element);
try {
    cache.put(element); 
}
finally {
    cache.releaseReadLockOnKey(element);
} 
```

UDPATE：这里有更多关于实现的细节。上面的代码用于“updateCache()”方法，但下面是它最初的创建方式。

```
import net.sf.ehcache.Cache;
import net.sf.ehcache.CacheManager;
import net.sf.ehcache.Ehcache;

public class TTLCacheProviderHelper {   
    private CacheManager cacheManager = null;
    Ehcache myTtlCache = null;  
    private static final String CACHE_NAME = "myTTLCache";
    private static int TTL_VALUE = 1800;    
    private static EvictTimeClock evictTimeClock = null;

    /**
     * Constructor
     */
    public TTLCacheProviderHelper() {
        cacheManager = CacheManager.create();      
        Cache testCache = new Cache(CACHE_NAME, 100, false, false, 10, 10);
        Ehcache  originalCache = testCache;        
        cacheManager.addCache(originalCache);       
        myTtlCache = cacheManager.getCache(CACHE_NAME); 
        String ttlValue = AppConfigService.getInstance().getTTL();
        if(ttlValue!= null)
            TTL_VALUE = Integer.parseInt(ttlValue);
        evictTimeClock = new EvictTimeClock();
        setEvictTimeClock(TTL_VALUE);
    }

    Ehcache getCache(){
        return myTtlCache;
    }` 
```

及其配置：`

```
 <cache name="configCache" maxElementsInMemory="100000" eternal="true" overflowToDisk="false" />

    <cache name="validationTemporaryCache" maxElementsInMemory="10000"
        eternal="false" overflowToDisk="false" timeToIdleSeconds="500"
        timeToLiveSeconds="500" />

</ehcache>` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:11:52.953

如果您的场景是`read -> flush -> recalculate -> put -> read`，那么答案是否定的，Ehcache 不会自动阻止所有读取器，直到计算出新值。您需要做的是使用它的[`read-through`机制](http://ehcache.org/apidocs/net/sf/ehcache/constructs/blocking/UpdatingSelfPopulatingCache.html)或类似的东西。

但是，如果您的情况是`read -> recalculate -> replace -> read`，那么我认为不需要任何额外的锁定。

# iphone - 倾斜 iPhone 时 UIWebView 向下滑动

> ID：15627010
> 
> 赞同：0
> 
> 时间：2013-03-25T23:57:41.537
> 
> 标签：iphone, ios, objective-c, uiwebview

在模拟器中这似乎不会发生，因为您不能倾斜模拟器。

当我在我的设备上运行 UIWebView 并倾斜时，它似乎向下滑动并留下 44px 的间隙，它似乎是顶部 NavigationBar 的高度。

我没有任何代码可以发布，因为我不知道是什么原因造成的。当我转到另一个视图并返回此视图时，由于 iPhone 在出现之间没有移动，因此差距消失了。

关于如何阻止这种行为的任何想法？

我正在使用 iOS 6 和 Storyboard，如果我可以发布任何帮助，请告诉我。

![在此处输入图像描述](../Images/db84f931e86205f4788bf4de260564ac.png)

我已经从我的设备发布了一个屏幕截图，以显示实际发生的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:11:26.730

好吧，这可能是由于自动布局而发生的，可能有一个将其设置为 44px 以下的约束，检查一下希望这会有所帮助，此外，您可以从 Ray Wenderlitch 网站[http://www.raywenderlich.com获得有关 AutoLayout 功能的基本概念/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

# audio - 如何配置带通滤波器？

> ID：15627013
> 
> 赞同：5
> 
> 时间：2013-03-25T23:57:46.877
> 
> 标签：audio, web-audio-api

我正在尝试使用 Web Audio API 的带通滤波器功能，但我相信我的问题更笼统。我不明白带通滤波器的“Q”值。我希望能够配置滤波器以通过中频 X 赫兹的 Y 赫兹范围内的频率。

我对音频编程很陌生，所以我需要考虑其他变量来计算 Q 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T04:39:57.213

假设您有一个 1000Hz 的滤波器，并且您希望它以 500Hz 开始并以 2000Hz 结束。

首先，您会注意到它不会在每个方向上扩展相同数量的赫兹。这是因为滤波器带宽基于八度音程，而不是频率。所以在这种情况下，它向下扩展一个八度，向上扩展一个八度。换句话说，频率在低端被 2 分频，在高端被 2 倍 - 这使它的带宽为 2 个八度音程。

无论如何，假设您知道频率，这是计算它的方法：

`Q = center_frequency / (top_frequency - bottom_frequency)`

在这种情况下是`1000 / ( 2000 - 500 )`, 或 0.667。

只要您有目标带宽（以八度为单位），您也可以在不知道顶部和底部频率的情况下计算它：

```
function getQ( bandwidth ){
  return Math.sqrt( Math.pow(2, bandwidth) ) / ( Math.pow(2, bandwidth) - 1 )
} 
```

同样，如果您`2`作为带宽参数传递，您将得到相同的结果：Q = 0.667。

希望有帮助。

# html - IE9：按钮表现出奇怪的行为并且在第一次点击时不起作用，仅在 IE9 中

> ID：15627018
> 
> 赞同：3
> 
> 时间：2013-03-25T23:58:19.430
> 
> 标签：html, onclick, internet-explorer-9

我遇到了只能在 IE 9 中重现的问题，但我不知道为什么。当我在 IE 9 中单击一个按钮时，如果是第一次单击新加载的页面，则该按钮不会注册事件。如果我最初的点击在按钮区域之外，并且我随后点击了按钮，则执行该操作。

```
<button type="button" title="Request Quote" class="button btn-quote" onclick="setLocation('/quotes?partsno=188122-B22&amp;mfg=HP&amp;cond=New');">
<span>
<span>Request Quote</span>
</span>
</button> 
```

我只能在 IE9 中重现该问题。使用 IE9 用户代理字符串欺骗 Safari 不会重现该问题，并且可以将代码更改为任何有效的 javascript；onclick 仍然没有按预期被调用。可以在[此处](http://www.itpartsconnection.com/hp-188122b22.html)的请求报价按钮上找到一个示例：

[http://www.itpartsconnection.com/hp-188122b22.html](http://www.itpartsconnection.com/hp-188122b22.html)

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:03:45.343

尝试以下语法，即语义：

```
<input type="button" title="Request Quote" value="Request Quote" class="button btn-quote" onclick="setLocation('/quotes?partsno=188122-B22&amp;mfg=HP&amp;cond=New');" /> 
```

然后，将所有基于 CSS 的 CSS 放入您的`button`和`btn-quote`CSS 类中，而不是垃圾邮件。

# css - 垂直对齐链接框中的文本，否定继承的 CSS 属性

> ID：15627021
> 
> 赞同：0
> 
> 时间：2013-03-25T23:58:46.623
> 
> 标签：css, inheritance

小提琴：http: [//jsfiddle.net/jgallaway81/ax9wh/](http://jsfiddle.net/jgallaway81/ax9wh/)

```
<a href="lcars.jfx.php" class="leftbuttons buttonlinks antibutton">
  LCARS Locomotive O.S.
</a> 
```

我的问题是图形中的文本标签。我在整个网站上都使用了这个按钮设计，只有文本和它的大小不同。当我最初设计系统时（在页面上：http: [//www.fccorp.us/development/index.php](http://www.fccorp.us/development/index.php)然后再次在[http://www.fccorp.us/development/index.fccorp.php](http://www.fccorp.us/development/index.fccorp.php)上），我使用边距和填充 CSS 控件使文本在按钮内垂直居中。但这取决于`static`字体高度。现在我想使用更高的字体并且不能让东西自动居中高度。我试过了

```
.leftbuttons {
  width:335px;
  height:40px;
  padding:**auto**
  20px **auto**
  45px; font-size:1em;
  border-style:solid;
  border-width:0px;
  font-family:Arial;
  font-weight:900;
  margin-left:10px;
  margin-right:20px;
  margin-top:20px;
  margin-bottom:20px;
  text-align:center;
  display:inline-block;
  background-image: url(http://img580.imageshack.us/img580/1461/lcarssitebutton.png); 
```

}

但最终所做的只是将图像切碎。

我正在使用`.antibutton`来尝试覆盖其他类的一些细节，以便得到我想要得到的东西。如果我可以解决文本`vertical-align`问题（或者这里的一些不错的编码器可以弄清楚我搞砸了什么），我还想让按钮的底部与文本行对齐。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:06:52.177

您为什么不直接在`line-height:`您的独特案例中添加一个？

例如，我添加`line-height: 40px;`到`a.buttonlinks`它垂直居中就好了。

# android - 在 Android 中解析多部分响应

> ID：15627023
> 
> 赞同：3
> 
> 时间：2013-03-25T23:58:51.373
> 
> 标签：android, mime-types

我正在使用 Multipart HttpPost 将图像和 json 文本从 android 客户端发送到 tomcat 服务器，反之亦然。将多部分实体发送到服务器没什么大不了的，因为您可以使用`request.getPart(<name>)`. 但是在客户端，您只能以 Stream 的形式访问响应。所以我最终将JSON字符串和图像都附加到相同的`ServletOutputStream`位置，并且必须在客户端手动解析它们。我在网上找到了 apache-mime4j，但它几乎没有文档记录，我找不到如何使用它的单个示例。

在服务器端，我构建这样的响应：

```
ServletResponse httpResponse = ctx.getResponse();
ResponseFacade rf = (ResponseFacade) httpResponse;
rf.addHeader("Access-Control-Allow-Origin", "*");
rf.addHeader("Access-Control-Allow-Methods", "POST");
rf.addHeader("content-type", "multipart/form-data");
httpResponse.setCharacterEncoding("UTF-8");

MultipartResponse multi = new MultipartResponse((HttpServletResponse) httpResponse);
ServletOutputStream out = httpResponse.getOutputStream();

multi.startResponse("text/plain");
out.println(CMD + "#" + content);
multi.endResponse();

multi.startResponse("image/jpeg");
out.write(data);
multi.endResponse();

multi.finish();

ctx.complete(); 
```

在 Android 的客户端，我想访问文本和图像数据：

```
InputStream is = response.getEntity().getContent();

MimeStreamParser parser = new MimeStreamParser();
MultipartContentHandler con = new MultipartContentHandler();
parser.setContentHandler(con);

try {
    parser.parse(is);
        String json = con.getJSON();        //get extracted json string
        byte[] imgBytes = con.getBytes();   //get extracted bytes

} catch (MimeException e) {
        e.printStackTrace();
} finally {
    is.close();
}

class MultipartContentHandler implements ContentHandler{

    public void body(BodyDescriptor bd, InputStream in) throws MimeException, IOException {
        //if MIME-Type is "text/plain"
        //   process json-part
        //else
        //   process image-part
    } 
```

在该方法中，`body(BodyDescriptor bd, InputStream in)`我的整个响应被视为`text\plain`哑剧类型。所以我最后不得不再次手动解析每个字节，整个 apache-mime4j 都没用。你能告诉我我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:32:49.003

好的，我终于自己解决了。不，这就是我所做的：

首先，我需要`multipart/mixed`在服务器端创建一个响应。可以使用`apache-mime-4j`API 来完成：

```
ServletResponse httpResponse = ctx.getResponse();    
ResponseFacade rf = (ResponseFacade) httpResponse;
httpResponse.setCharacterEncoding("UTF-8");
httpResponse.setContentType("multipart/mixed");
MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE, "SEPERATOR_STRING",Charset.forName("UTF-8"));
entity.addPart("json", new StringBody(CMD + "#" + content, "text/plain",  Charset.forName("UTF-8")));
entity.addPart("image", new ByteArrayBody(data, "image/jpeg", "file"));

httpResponse.setContentLength((int) entity.getContentLength());

entity.writeTo(httpResponse.getOutputStream());
ctx.complete(); 
```

现在在客户端访问 HttpResponse 的 MIME 部分，我使用 javax.mail API。

```
ByteArrayDataSource ds = new ByteArrayDataSource(response.getEntity().getContent(), "multipart/mixed");
MimeMultipart multipart = new MimeMultipart(ds);    
BodyPart jsonPart = multipart.getBodyPart(0);
BodyPart imagePart = multipart.getBodyPart(1); 
```

但是您不能使用本机 API，而是使用这个[http://code.google.com/p/javamail-android/](http://code.google.com/p/javamail-android/)

现在您可以继续处理您的各个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T13:39:45.670

也可以`apache-mime-4j`：

```
HttpURLConnection conn = ...;
final InputStream is = conn.getInputStream();
try {
    final StringBuilder sb = new StringBuilder();
    sb.append("MIME-Version: ").append(conn.getHeaderField("MIME-Version")).append("\r\n");
    sb.append("Content-Type: ").append(conn.getHeaderField("Content-Type")).append("\r\n");
    sb.append("\r\n");

    parser.parse(new SequenceInputStream(new ByteArrayInputStream(sb.toString().getBytes("US-ASCII")), is));
} catch (final MimeException e) {
    e.printStackTrace();
} finally {
    is.close();
} 
```

# sql-server-2012 - 维度建模

> ID：15627025
> 
> 赞同：5
> 
> 时间：2013-03-25T23:58:53.530
> 
> 标签：sql-server-2012, data-warehouse, dimensional-modeling

我正在尝试为从多个表中采购的客户偏好建立一个维度。

源表示例如下：

![在此处输入图像描述](../Images/130e348b4dc73e251b70c461a776569b.png)

我已经构建了 Dim Customer，现在我必须设计 Customer Preference Dimension。新维度将是 SCD1；始终拥有客户的最新偏好。但是给定的客户可以有多种组合。

现在我的问题是：为每个首选项表设计维度是否好，我是否应该将客户的所有首选项属性放入一个单独的维度表中，如下所示：

![在此处输入图像描述](../Images/0c697552d4100dcd16c9ece869d8f0a6.png)

突出显示的列将使客户具有独特的偏好。*客户可以有多种偏好。

如果将来业务引入更多偏好并希望包含在维度中怎么办。然后我必须将这些属性以及使唯一的键带入上表。

是按照偏好做单个维度还是将所有维度合并到一个大维度中更好。

请提出建议。

**编辑：**

根据我的阅读，我了解到我必须在我的 Customer Dim 和其他 Customer Preference 维度之间设计一个桥接表。

我的计划是为每种偏好类型和所有组合创建 CustomerPreference Dimension。并将这些映射到一个可以有多对多客户偏好关系的桥接表中。

示例如下

这是正确的做法还是有任何最佳做法。

![在此处输入图像描述](../Images/fe2b20bffad58a75c17cceec82d080d9.png)

[或]这是正确的方法吗？

![在此处输入图像描述](../Images/7fce3135b7da5b119c11dee0b571c84e.png)

**编辑：27-03-2013**

根据 Pondlife 的建议，我将采用 Snowflake 方法，如下所示：

![在此处输入图像描述](../Images/c8032ee9f2013a0c991cd9c49f0d7cb0.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:46:26.513

你没有对你的事实表说任何话，这可能是决定的关键因素。如果偏好仅适用于客户并且与事实完全无关，那么您可以使用[雪花模型](http://en.wikipedia.org/wiki/Snowflake_schema)添加仅链接到客户维度的客户偏好表。

但是您提到了“每个偏好的各个维度”，这表明偏好可能与事实直接相关。在这种情况下，如果您对每个事实的可能偏好数量有限（从您提供的信息中并不清楚） ，则包含所有可能的偏好组合的[迷你维度](http://www.kimballgroup.com/2010/09/01/design-tip-127-creating-and-managing-mini-dimensions/)可能是更好的选择。

如果这没有帮助，我建议您澄清以下几点：

1.  事实表代表什么
2.  如果偏好与事实或客户相关
3.  如果一个客户（或事实？）最多有 3 个偏好（营销、平台和流派），或一个未定义的数字（例如 3 个营销偏好、10 个平台偏好、2 个流派偏好）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:44:51.170

对于客户偏好，您已经获得了可怕的“实体-属性-值”模型，因为开发人员认为在添加新偏好时不必更改数据库，从而使他们的生活“更轻松”。当然，这会让你的生活变得更加艰难。

我目前在类似的情况下工作，并且发现建模客户偏好的最简单方法是使用属性桥表，正如您自己发现的那样，尤其是当它确实是多对多时。

需要问的真正问题是将对这些偏好进行*什么样的分析？*如果您只是要根据偏好过滤客户，然后与那组客户一起了解事实，那么多对多桥应该可以解决问题。

# javascript - Javascript - 多个 XmlHttpRequests，并与它们关联目标 div

> ID：15627027
> 
> 赞同：0
> 
> 时间：2013-03-25T23:59:04.423
> 
> 标签：javascript, xmlhttprequest, closures

我有一个包含多个 XmlHttpRequest 调用的页面，并且我知道我想将哪个连接输出到哪个 div。

有没有一种方法可以重用函数的代码，以某种方式传递我希望输出写入的 divname。

现在，我实际上将这些功能复制了 6 次！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:09:20.727

当然可以。

如果你试图用 6 个不同的 div 做完全相同的事情，但是使用 6 个不同的调用和 6 个不同的响应，那么制作一个需要一个 div 的函数，并使用该函数 6 次......

```
var doSomethingAJAX = function (el, url) {
    var xhr = new XMLHttpRequest();
    xhr.open("GET", url, true);
    xhr.onload = function () { el.appendChild(document.createTextNode(xhr.responseText)); };
    xhr.onerror = function () { /* ... */ };
    xhr.send();
};

doSomethingAJAX(document.getElementById("div1"), "http://example.com/json1.json");
doSomethingAJAX(document.getElementById("div2"), "http://example.com/json2.json"); 
```

有更通用的方法可以做到这一点，但我不建议你制作一个 AJAX 框架，如果你试图解决 6`<div>`秒。

关键是，无论您重复的是什么工作，弄清楚如何将其转换为一个函数（或两个函数，或三个），然后调用该函数，只传入改变的部分。

如果这太离谱了，那么用例子更新你的问题，我们可以想出办法。

# c - 访问 C 中嵌套结构中的项

> ID：15627030
> 
> 赞同：1
> 
> 时间：2013-03-25T23:59:14.223
> 
> 标签：c

我尝试在另一个结构中访问“下一个”，但尽管我尝试了很多方法但失败了。

这是嵌套结构：

```
struct list_head {
    struct list_head *next, *prev;
};

typedef struct {
  char *key;
  char *value;
  struct list_head list;
}dict_entry; 
```

我想访问“下一步”。我初始化了一个新的dict_entry。

```
dict_entry *d;
while(d->list->next!=NULL){} 
```

但这是错误的。谁能给我一种访问“下一个”的方法？注意：我无法更改结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:00:11.713

`list`未声明为指针，因此您不使用`->`运算符来获取其成员，而是使用`.`运算符：

```
while (d->list.next != NULL) {
} 
```

* * *

不同的修复：

```
typedef struct {
  char *key;
  char *value;
  struct list_head *list;
}dict_entry; 
```

这样，您尝试引用的原始代码`next`将编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:03:14.623

在您的定义中，您定义`list`为如下对象

```
typedef struct {
    char *key;
    char *value;
    struct list_head list; // This is an object
}dict_entry; 
```

因此，您将`next`通过`.`运算符取消引用 as `d->list.next`。取消引用的第一级即`d->list`需要`->`操作符，因为`d`它被定义为指针。对于`next`，因为`list`是一个对象而**不是**一个指针，所以你必须使用`.`操作符。

# android - 如何使用“Android-Universal-Image-Loader”

> ID：15627031
> 
> 赞同：3
> 
> 时间：2013-03-25T23:59:16.337
> 
> 标签：android, listview, gridview

我想使用 Android-Universal-Image-Loader 进行网格视图和列表视图。

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

我下载并修改了它。

它工作正常，但是当我更改源并将其移动到另一个项目时，它就崩溃了。

我不知道为什么:(

没有错误和任何错误消息。

我认为这是空点错误或启动库。

我认为这部分会出现错误。

```
 listView = (GridView) findViewById(R.id.gridview);
    ((GridView) listView).setAdapter(new ImageAdapter()); 
```

和

```
 public class ImageAdapter extends BaseAdapter {
    @Override
    public int getCount() {
        Log.v("OWL","TEST1");
        return imageUrls.length;
    }

    @Override
    public Object getItem(int position) {
        Log.v("OWL","TEST2");
        return null;
    }

    @Override
    public long getItemId(int position) {
        Log.v("OWL","TEST3");
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Log.v("OWL","TEST4");
        final ImageView imageView;
        if (convertView == null) {
            imageView = (ImageView) getLayoutInflater().inflate(R.layout.item_grid_image, parent, false);
            Log.v("OWL","TEST5");
        } else {
            imageView = (ImageView) convertView;
            Log.v("OWL","TEST6");
        }

        imageLoader.displayImage(imageUrls[position], imageView, options);
        Log.v("OWL","TEST7");
        return imageView;
    }
} 
```

我在 LOGCAT 上看不到 TEST6、TEST7

我附上了原木打击。请帮助我或让我知道如何使用该库。

```
03-25 18:24:17.208: D/AndroidRuntime(312): Shutting down VM
03-25 18:24:17.208: W/dalvikvm(312): threadid=1: thread exiting with uncaught exception (group=0x41693438)
03-25 18:24:17.228: E/AndroidRuntime(312): FATAL EXCEPTION: main
03-25 18:24:17.228: E/AndroidRuntime(312): java.lang.IllegalStateException: ImageLoader must be init with configuration before using
03-25 18:24:17.228: E/AndroidRuntime(312):  at com.nostra13.universalimageloader.core.ImageLoader.checkConfiguration(ImageLoader.java:359)
03-25 18:24:17.228: E/AndroidRuntime(312):  at com.nostra13.universalimageloader.core.ImageLoader.displayImage(ImageLoader.java:200)
03-25 18:24:17.228: E/AndroidRuntime(312):  at com.nostra13.universalimageloader.core.ImageLoader.displayImage(ImageLoader.java:162)
03-25 18:24:17.228: E/AndroidRuntime(312):  at com.kmob.camera.ImageGridActivity$ImageAdapter.getView(ImageGridActivity.java:117)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.widget.AbsListView.obtainView(AbsListView.java:2449)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.widget.GridView.onMeasure(GridView.java:1030)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.View.measure(View.java:15364)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:617)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:399)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.View.measure(View.java:15364)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4824)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.View.measure(View.java:15364)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4824)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1396)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.View.measure(View.java:15364)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4824)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-25 18:24:17.228: E/AndroidRuntime(312):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2359)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.View.measure(View.java:15364)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1974)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1217)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1390)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1110)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4472)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.Choreographer.doCallbacks(Choreographer.java:555)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.Choreographer.doFrame(Choreographer.java:525)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.os.Handler.handleCallback(Handler.java:615)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.os.Looper.loop(Looper.java:137)
03-25 18:24:17.228: E/AndroidRuntime(312):  at android.app.ActivityThread.main(ActivityThread.java:4918)
03-25 18:24:17.228: E/AndroidRuntime(312):  at java.lang.reflect.Method.invokeNative(Native Method)
03-25 18:24:17.228: E/AndroidRuntime(312):  at java.lang.reflect.Method.invoke(Method.java:511)
03-25 18:24:17.228: E/AndroidRuntime(312):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
03-25 18:24:17.228: E/AndroidRuntime(312):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
03-25 18:24:17.228: E/AndroidRuntime(312):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T02:03:01.130

你解决了这个问题吗？您需要使用 UniversalImageLoader 上的示例代码初始化 imageLoader：

```
File cacheDir = StorageUtils.getCacheDirectory(context);
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context)
        .memoryCacheExtraOptions(480, 800) // default = device screen dimensions
        .discCacheExtraOptions(480, 800, CompressFormat.JPEG, 75)
        .taskExecutor(AsyncTask.THREAD_POOL_EXECUTOR)
        .taskExecutorForCachedImages(AsyncTask.THREAD_POOL_EXECUTOR)
        .threadPoolSize(3) // default
        .threadPriority(Thread.NORM_PRIORITY - 1) // default
        .tasksProcessingOrder(QueueProcessingType.FIFO) // default
        .denyCacheImageMultipleSizesInMemory()
        .memoryCache(new UsingFreqLimitedMemoryCache(2 * 1024 * 1024)) // default
        .memoryCacheSize(2 * 1024 * 1024)
        .discCache(new UnlimitedDiscCache(cacheDir)) // default
        .discCacheSize(50 * 1024 * 1024)
        .discCacheFileCount(100)
        .discCacheFileNameGenerator(new HashCodeFileNameGenerator()) // default
        .imageDownloader(new BaseImageDownloader(context)) // default
        .defaultDisplayImageOptions(DisplayImageOptions.createSimple()) // default
        .enableLogging()
        .build(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:04:37.027

看起来你在哪里创建你的`imageLoader`，你需要打电话`imageLoader.init(someConfigObject);`

`someConfigObject`是类型`ImageLoaderConfiguration`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-18T12:47:30.420

# 使用这个简单的代码正在工作

将 ImageLoader 初始化到你的适配器类中

```
imageLoader = ImageLoader.getInstance();
imageLoader.init(ImageLoaderConfiguration.createDefault(ctx)); 
```

然后在设置图像上使用下面的代码，它将工作......

```
DisplayImageOptions options=new DisplayImageOptions.Builder()
                .cacheInMemory(true)
                .resetViewBeforeLoading(true)
                .showImageOnFail(R.drawable.stories_holder_sq)
                .showImageForEmptyUri(R.drawable.stories_holder_sq)
                .showImageOnLoading(R.drawable.stories_holder_sq)
                .build();
        imageLoader.displayImage(naturalDashBoardBean.getImgUrl(), categoryViewHolder.categoryItemImg, options); 
```

# c - 隐藏的全局变量是不好的编程习惯吗？

> ID：15627034
> 
> 赞同：5
> 
> 时间：2013-03-26T00:00:02.317
> 
> 标签：c, oop, global-variables, fortran, linear-algebra

我正在编写一些线性代数代码（在 Fortran 2003 中，但在 Fortran 90 或 C 中将是相同的问题），它需要一些工作向量来进行计算。我处理这个问题的想法是制作一个工作`w(:,:)`数组是线性代数模块私有的，即在[讨论](http://c2.com/cgi/wiki?GlobalVariablesAreBad)为什么真正的全局变量很糟糕时定义的“隐藏的全局” 。

我想这是在黑板上有一个大问题要解决，对于问题的每个部分，你选择黑板上的一个区域来解决它。

按照这个类比，我还可以有一堆小白板：定义一个`work_array`数据类型并根据需要将它们传递给求解器。（PETSc 通过另一个抽象层有效地使用了这种方法；a`solver`是一种数据类型，其中包括一些指向所用方法的过程指针以及一些工作向量。）当从一个求解器到另一个求解器存在嵌套调用时，这会得到有点复杂，所以我更喜欢第一种方式。它也不需要太多的误导。

关于哪种方法有助于更好的编程实践的任何想法？

编辑：当我开始使用 OpenMP 时，我也不认为这会是一个问题，我已经在这段代码的旧版本中完成了。在设置问题后，每个线程仅访问其未知数部分，而不访问其他线程的未知数部分。尽管如此，并发问题可能是一般不使用静态变量的一个很好的理由。

如果每次调用求解器时都必须为临时数组动态分配空间，这通常不会产生很多开销吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T04:58:42.567

如果您在工作空间中进行任何重要的计算，则成本将由在分配空间中执行的计算成本支配，`malloc`并且`free`开销将近似为零。避免分配作为一种优化策略唯一有意义的情况是，在缓冲区上执行的工作量非常小，以至于获取缓冲区的时间可能占主导地位（或者至少，可能无法由另一个项主导）。可能发生这种情况的主要情况是构建字符串。

另一方面，全局状态有很多成本：

1.  它排除了多线程使用。
2.  如果该状态需要在多次调用之间保持不变，则它会阻止库的使用（该库一次不能被程序的多个部分使用，因为它们可能会破坏彼此的工作）。
3.  它排除了递归/重入使用。
4.  每当链接库时，它都会使用内存，即使从未调用过函数。
5.  即使您努力解决其中一些问题，这也是一种严重的*代码异味*，因此会耗费*人力时间*，也就是说，它会浪费下一个阅读您的代码的人在尝试确定全局状态是否为实际上在代码上引入了任何错误或使用限制。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T00:04:09.893

`static`当您编写并发程序时，“隐藏的全局变量”（在 C 世界中它们被称为 ）的最大危险出现了。一旦你开始涉足多线程，只有一块黑板就不够了：每个线程都需要自己的。对于这样的情况，动态分配更合适。如果您不担心多线程，那么拥有一个模块范围的“隐藏的全局”变量是非常好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T07:18:35.727

至于分配成本：您可以拥有一个包含所有工作数组的派生类型（在您的情况下为 array `w(:,:)`）。您可以进行一个初始化调用，将它们分配给正确的大小，然后尽可能频繁地将包含已分配数组的派生类型传递给求解器，遵循以下精神：

```
module test
   implicit none

    type :: buffer
        integer, allocatable :: work(:,:)
    end buffer

contains

    subroutine init(mybuffer, whatever_else_you_need_for_determinig_allocation_size)
        type(buffer), intent(out) :: mybuffer

         allocate(mybuffer%work(dim1, dim2))
     end subroutine init

     subroutine solver(mybuffer, whatever_else_you_need_for_the_solver)
         type(buffer), intent(inout) :: mybuffer

          ! You can access mybuffer%work here as it is allocated

      end subroutine solver

end module test 
```

但正如已经指出的那样，分配成本相对于您在求解器中花费的成本通常可以忽略不计。

# r - rollapply 与嵌入式参考

> ID：15627035
> 
> 赞同：0
> 
> 时间：2013-03-26T00:00:02.473
> 
> 标签：r, zoo

我目前的代码是这样的：

```
Model <- head(rollapplyr(z, width = 131, function(x)
  fitted(lm(y ~x1+ x2, data = as.data.frame(x))), by.column = FALSE)[,131],3429) 
```

我想这样做：

```
fit1 <- lm(y ~x1+ x2)
Model <- head(rollapplyr(z, width = 131, function(x) fitted(fit1),
  data = as.data.frame(x))), by.column = FALSE)[,131],3429) 
```

基本上，我只是想加入`fit1`回归方程，但我不断收到错误。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:17:53.060

目前尚不清楚您要做什么，但您可以像这样分解公式：

```
form <- y ~ x1 + x2
FUN <- function(x) fitted(lm(form, data = as.data.frame(x)))
rollapplyr(z, 131, FUN, by.column = FALSE) 
```

# php - YouTube 数据 API 可恢复视频上传请求错误

> ID：15627039
> 
> 赞同：2
> 
> 时间：2013-03-26T00:00:58.987
> 
> 标签：php, httpwebrequest, youtube-api

我的网络服务器上存储了视频文件，我希望能够以自动方式将其上传到 YouTube。这些视频是在我的网站上创建的，然后用户可以将其上传到他们的 YouTube 频道。

根据此处的可恢复视频上传过程，我正在尝试进行 HTTP 请求调用以自动化此视频上传过程：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_resumable_uploads](https://developers.google.com/youtube/2.0/developers_guide_protocol_resumable_uploads)

一切正常（获得用户的访问权限，发送视频的元数据），直到最后一步，即视频本身的上传。当我发出 PUT 请求时，它返回响应代码 417 并显示无效请求。像这样：

遇到以下错误：

```
Invalid Request 
```

HTTP 请求的某些方面无效。可能出现的问题：

```
Missing or unknown request method
Missing URL
Missing HTTP Identifier (HTTP/1.0)
Request is too large
Content-Length missing for POST or PUT requests
Illegal character in hostname; underscores are not allowed 
```

我查看了所有这些建议的可能问题，但我在代码中的任何地方都找不到错误。

错误信息只是含糊不清，不够具体，无法告诉我问题出在哪里。

我正在使用 PHP 的标准 Http Request 类执行视频上传过程的每一步。( [http://www.php.net/manual/en/class.httprequest.php](http://www.php.net/manual/en/class.httprequest.php) )

这是我的代码：

```
$videoFile = *Some Video File*;

$httpRequest = new httpRequest($_SESSION['youtube_data_api']['upload_url'], HttpRequest::METH_PUT);

$httpRequest->setContentType('video/mp4');
$httpRequest->setPutFile($videoFile);

$headersArr = array('Content-Length' => strlen($httpRequest->getRawRequestMessage()));
$httpRequest->setHeaders($headersArr);

$httpMessage = $httpRequest->send(); 
```

我在互联网上搜索了很多关于这个问题的信息，很多时候我发现人们使用 Zend 框架的 YouTube 库来完成这个，这更容易。不幸的是，以我现在网站的规模，花一些时间尝试将框架集成到我的网站中是不可行的。

对这个问题的任何见解都会有很大帮助！谢谢！

# java - 更改 ListView 中的 ArrayList 数据

> ID：15627041
> 
> 赞同：0
> 
> 时间：2013-03-26T00:01:15.663
> 
> 标签：java, android, listview, dynamic, arraylist

我需要创建许多警报，因此我需要一个列表视图，其中包含带有 DatePicker、TimePicker 和 Delete 按钮的项目。我尝试了各种方法，但我还没有找到解决这个问题的方法：

我希望能够更改 DatePicker 或 TimePicker 中的数据，这将更改相应警报的 ArrayList 中的数据。然而，要做到这一点，我需要位置，但由于它不是最终的，我不能使用它从我的适配器访问 ArrayList 中的警报。

我该怎么做呢？

谢谢

# database - 自定义结构的数据库设计

> ID：15627047
> 
> 赞同：0
> 
> 时间：2013-03-26T00:02:24.870
> 
> 标签：database, database-design

我需要允许用户在我的应用程序中拥有自定义表（我正在使用 PostgreSQL）。自定义用户数据的预期大小非常大，所以我正在寻找面向数据库的解决方案：

用户可以建表、删表、增删数据……

我考虑以下选项：

a）在我的应用程序数据库模式中创建其他表（每个表都以一些前缀开头，针对不同的用户）。

b）要在与我的应用程序相同的数据库中创建单独的模式，女巫表名称将以一些前缀开头，用于不同的用户

c) 制作 1 个单独的数据库和许多不同的模式（针对不同的用户）

d) 为每个用户建立新的数据库（将有 < 100 个用户可以制作自定义表格）

e）制作数据库服务器的新实例并实施解决方案a）

f) 实例化新的 HSQL 服务器并保存自定义用户数据。我认为每个用户的用户自定义数据将小于 1GB，并且在内存中拥有数据库会加快速度

解决方案 a) - e) 适用于 PostgreSQL

有什么想法吗？你会选择什么？**还有什么**？

# python - 子进程的奇怪 IO 行为

> ID：15627049
> 
> 赞同：-2
> 
> 时间：2013-03-26T00:02:40.577
> 
> 标签：python, subprocess, stdout

我在 python 中注意到了这种奇怪的行为——我试图记录一个进程的输出，然后读取这个输出并对其进行一些处理。即使在程序运行后打开文件时文件包含所有文本，我也无法读取任何内容。

它很简单

```
f=open("blah.txt",'w')
#I log the output of a program with subprocess
Cmdline="program.exe"
Dump= subprocess.Popen(CmdLine,stdout=f,stderr=subprocess.STDOUT)
#Waiting for it to finish
while(Dump.poll() is not None): #returns None while subprocess is running
        print "waiting on process to finish \n"
f.flush() #I flush everything to make sure it was written
sys.stdout.flush()
f.close()
#now i need to read from this file

f= open("blah.txt", 'r')
line=f.readline()
while line:
    print line
    line=f.readline()

f.close() 
```

我什么也没读，但是当我在运行程序后打开文件 blah.txt 时，一切都在那里。关于我可能做错了什么的任何提示？我根本没有从“等待过程完成”中得到任何打印，但该过程需要大约一秒钟的时间才能运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T00:20:55.087

等到您的转储过程完成：

```
Dump= subprocess.Popen(CmdLine,stdout=f,stderr=subprocess.STDOUT)
#Waiting for it to finish
Dump.wait() # or -> while(Dump.poll() is None): print... 
```

发生的情况是，由于您的等待循环是错误的，因此您不会在轮询之前对进程进行更改以启动，因此它甚至不会在关闭/打开文件之前等待它启动：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:13:08.383

您的代码中的错误是这部分

`while(Dump.poll() is not None): # While dump.pool is not None keep the loop going`

它应该是

`while(Dump.poll() is None): # While dump.pool is None keep the loop going`

在您的 while 循环中，您实际上是在保持循环运行，只要`Dump.poll()`没有任何内容。问题是`Dump.pool()`在过程完成之前返回 None 。这意味着 while 循环将被立即取消，然后您才能捕获该进程的任何输出。

这是您的代码的更新版本，我确认它按预期工作。

```
with open("blah.txt",'w') as w:
    #I log the output of a program with subprocess
    Cmdline="program.exe"
    Dump = subprocess.Popen(CmdLine,stdout=w,stderr=subprocess.STDOUT)
    #Waiting for it to finish
    while(Dump.poll() is None): #returns None while subprocess is running
        print "waiting on process to finish \n"
    w.flush() #I flush everything to make sure it was written
    sys.stdout.flush()

#now i need to read from this file
with open("blah.txt", 'r') as f:
    line=f.readline()
    while line:
        print line
        line=f.readline() 
```

我还建议您使用[with](http://docs.python.org/2/reference/compound_stmts.html#with)关键字来确保文件在完成任务后始终正确关闭。

# html - 将表单字段放在标签标签内是好主意还是坏主意？

> ID：15627050
> 
> 赞同：2
> 
> 时间：2013-03-26T00:02:44.793
> 
> 标签：html, forms, dom, label, standards

我在很多框架、自动生成代码 (Zend) 和布局模板中都注意到了这种趋势。我正在谈论的方法是这样的：

```
<label for="someField">
    <input id="someField" name="someName" />
</label> 
```

这种方法与常规方法相比有什么优缺点，为什么人们倾向于采用这种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:04:40.990

从 HTML4.01 和 HTML5的**[W3C 标准](http://www.w3.org/TR/html401/interact/forms.html#edef-LABEL)**来看，这似乎很好：

**HTML4：**

> “要将标签与另一个控件隐式关联，控件元素必须在 LABEL 元素的内容内。在这种情况下，LABEL 可能只包含一个控件元素。标签本身可能位于关联控件之前或之后。”

在此示例中，我们将标签与文本输入控件隐式关联：

```
<form action="..." method="post">
  <p>
    <label>
      First Name
      <input type="text" name="firstname">
    </label>
  </p>
</form> 
```

**从HTML5**开始仍然可以：

 **> “标签元素表示用户界面中的标题。标题可以与特定的表单控件相关联，称为标签元素的标签控件，可以使用 for 属性，也可以将表单控件放在标签元素本身内。- [**W3C。**](http://www.w3.org/html/wg/drafts/html/master/forms.html#labeled-control)**

# ide - 在线测试 MASM 程序

> ID：15627051
> 
> 赞同：3
> 
> 时间：2013-03-26T00:02:46.270
> 
> 标签：ide, x86, masm

我试图找到一种使用 MASM 语法在线测试汇编语言程序的方法，但我还没有找到任何方法来做到这一点。是否有任何在线工具可以在线测试 MASM 程序（如 jsfiddle 或 ideone，但对于 MASM？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-31T00:33:37.527

从今天早些时候开始，您可以在[tryitonline.net 上](https://tio.run/##XY1LDoJAEETX06doWSOB6MJ4Am/A0vTQnajpYQzT@Dn9iMKCWKuXVOUVpSTB63t7e1IKOVdMRhBHu4@G7LE4iWossY2D8qYAqLrIAudkNNgRXIgPFHqVuF/YT9yAUyGUbuJZtZT8LXfgrr3hL4f6snI0K0f9t5KecX7N@QM)。尽管从技术上讲，它是 JWasm 而不是 Masm，但 JWasm 是一个开源汇编编译器，其功能与 Masm 相同。

但是请注意，TIO 由 Linux 提供支持，因此 Windows 库不可用，并且系统调用的完成方式不同。

# php - 如何使用正确的“标题”回显 JSON 双重嵌套对象文字

> ID：15627055
> 
> 赞同：0
> 
> 时间：2013-03-26T00:03:15.443
> 
> 标签：php, mysql, ajax, json

我试图简单地回显一个 JSON 对象文字，其中包括我的数据库表中的每一行。

作为在我查看的许多其他类似问题中找到的方法的标准，我正在获取每一行并对其进行编码，如下所示：

```
$con=mysqli_connect("localhost","username","pass","markers");//markers is db table name
$result = mysqli_query($con,"SELECT * FROM markers");

$rows = array();

while($r = mysqli_fetch_array($result))
  {
       $rows[] = $r
       //or: $rows[] = array('data' => $r);
  }

echo json_encode($rows); 
```

类似于问题[PHP: can't encode json with multiple rows](https://stackoverflow.com/questions/9352057/php-cant-encode-json-with-multiple-rows) or [mysql table to json](https://stackoverflow.com/questions/4040307/mysql-table-to-json)，

我想回显一个如下所示的 JSON 对象：

```
 {
    "data1":   // how do I get "data1"?
        {
            name: John Smith,
            title: Mr,
            description: a man
        }
    }

    {
    "data2":{ // how do I get "data2"? 
            name:Bob Smith,
            title: Mr,
            description: another guy
        }

    } 
```

除了我不知道如何实现“标题”，第一级对象字符串的标题，例如“data1”或data2“。事实上，我的数据库表甚至不一定有那些值/那一列。

这就是它现在的样子： ![数据库表](../Images/ac7e173d396855e14dd9aa17fa112f2f.png)

**如何获得简单的数字“标题”，如“1”、“2”或“data1”、“data2”，而不必将“名称”列指定为“标题”？** （或者我必须为此设置一个专栏吗？）

我的目标是处理返回的 JSON 中每个“行”中的值。

我计划使用 jQ $.each 函数`$.each(data, function(dataNum, dataInfo)`——例如，data1 将被传递给 dataNum，而值将被传递给 dataInfo——并且能够通过 访问特定的表值`dataInfo.name`，但现在这不起作用。

提前感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:12:22.670

我认为你最好使用`mysqli_fetch_object()`将每一行作为它自己的对象。当你然后 json_encode`$rows`你会有一个对象数组。

这是代码：

```
$con=mysqli_connect("localhost","username","pass","markers");//markers is db table name
$result = mysqli_query($con,"SELECT * FROM markers");

$rows = array();

while($r = mysqli_fetch_object($result))
  {
       $rows[] = $r;
  }

echo json_encode($rows); 
```

你的 JSON 看起来像这样：

```
[
    {
        "name":"Some Name",
        "title":"Some Title",
        "description":"Some description"
    },
    {
        "name":"Some Other Name",
        "title":"Some Other Title",
        "description":"Some other description"
    },
    ...
] 
```

在 javascript 中，这为您提供了一个整数索引的对象数组。所以你的 javascript 可能看起来像这样：

```
var array = JSON.parse(jsonString);
$.each(array, function(key, value) {
    alert(key); // numerical index
    alert(value.name); // name
    alert(value.title); // title
    alert(value.description); // description
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:08:17.867

在 $rows 变量中创建索引：

```
<?php

$t['a'] = array ('name' => 'foo');
$t['b'] = array ('name' => 'bar');

echo json_encode ($t);
?> 
```

在您的情况下，一个简单的整数应该可以解决问题，或者类似于`$rows['data' . $i]`后跟 $i++ 的东西。

# c# - JQuery Autocomplete/ASP.NET Webhandler 包含另一个文本框的值

> ID：15627067
> 
> 赞同：0
> 
> 时间：2013-03-26T00:04:15.630
> 
> 标签：c#, jquery, asp.net, autocomplete

所以我已经有一段时间（超过一周）搜索谷歌和stackoverflow以及所有这些。似乎无法获得信息汇编来完成这项工作。

[ASPX 页面]

```
 <span>Make</span> <asp:TextBox ID="Make_SearchBox" runat="server" ToolTip="Enter Make"></asp:TextBox>
    <span>Model</span> <asp:TextBox ID="Model_SearchBox" runat="server" ToolTip="Enter Model"></asp:TextBox> 
```

[JavaScript]

```
 <%--Autocomplete Function--%>
<script type="text/javascript">
    var value = "";
    $(document).ready(function () {
        $("#PageContent_Make_SearchBox").autocomplete("/WebHandlers/AutoComplete.ashx",{
            extraParams: { field: "Make" },
            autoFill: false
        });

        $("#PageContent_Model_SearchBox").autocomplete("/WebHandlers/AutoComplete.ashx", {
            extraParams: { field: "Model" },
            autoFill: false
        });
    });
  </script> 
```

[ASHX WEBHANDLER - C#]

```
 public void ProcessRequest(HttpContext context)
    {
        // INITIALIZING NEEDED VARS
        string query = "";
        string sql = "";

        // CHECK "field" QUERY AND PASS TO SWITCH
        string field = context.Request.QueryString["field"];
        if (field != null)
        {
            switch (field)
            {
                case "Make":
                    query = context.Request.QueryString["q"];
                    sql = "Select DISTINCT Make from Vehicle Where Make LIKE '%" + query + "%'";
                    break;

                case "Model":
                    query = context.Request.QueryString["q"];
                    sql = "Select DISTINCT Model from Vehicle Where Model LIKE '%" + query + "%' AND Make LIKE (((MAKE TEXTBOX VALUE)));
                    break;
            }
        }

        string connStr = System.Configuration.ConfigurationManager.ConnectionStrings["ConnString"].ConnectionString;
        // CONNECT TO DATABASE, RUN QUERY AND RETURN DATA
        using (SqlConnection connection = new SqlConnection(connStr))
        using (SqlCommand command = new SqlCommand(sql, connection))
        {
            connection.Open();
            using (SqlDataReader reader = command.ExecuteReader())
            {
                while (reader.Read())
                {
                    context.Response.Write(reader.GetString(0) + Environment.NewLine);
                }
            }
        }
    } 
```

以上内容与**make**文本字段完全配合。**当我在make**字段中输入“toy”时，它会像这样传递：

```
GET http://localhost:26724/WebHandlers/AutoComplete.ashx?q=toy&field=Make 
```

***我想要***做的是在用户获得**品牌**并开始在**模型**字段中写入之后，它应该只搜索与该品牌相关的模型。我想 C# 方面很简单，只是 SQL 查询，但是如何让 JQuery 获取**make**文本字段的值并将其添加到查询字符串中。请注意，它只需要在**make**文本框已满而不是在 $document.ready 时才获取它的值。

谢谢大家。我一定会选择一个最佳答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:11:48.360

自动完成小部件有一个[选择事件](http://api.jqueryui.com/autocomplete/#event-select)，当用户选择一个项目时会触发该事件。您可以使用它来根据用户在第一个中选择的内容过滤第二个自动完成源。

这是一个简单的例子：http: [//jsfiddle.net/B5fWc/8/](http://jsfiddle.net/B5fWc/8/) ...

```
$("#tags").autocomplete({
        source: availableTags, 
        select: function(event, ui) {
            $("#books").autocomplete({
                source: filter(availableBooks, ui.item.value)
            });
        }
    }); 
```

您使用的是旧版本的自动完成功能吗？我认为当前版本中不存在 extraParams 。

我并没有完全按照你是如何得到这个`q=toy`部分的，但我认为这样的方法可以做你想要的。

```
$("#PageContent_Make_SearchBox").autocomplete({
    source: "/WebHandlers/AutoComplete.ashx?field=Make",
    select: function(event, ui) {
        $("#PageContent_Model_SearchBox").autocomplete({
            source: "/WebHandlers/AutoComplete.ashx?field=Model&Make=" + ui.item.value
        });
    }
}); 
```

然后在 C# 方面，您需要从“Make”查询字符串参数中获取他们为 Make 选择的值。

# wpf - 属性更改时XAML中的EventTrigger？

> ID：15627077
> 
> 赞同：2
> 
> 时间：2013-03-26T00:05:23.523
> 
> 标签：wpf, xaml, inotifypropertychanged, eventtrigger

我有这个代码（到目前为止它正在工作）；

```
<Image Name="img_person" Tag="{Binding Path=MyProperty1, NotifyOnTargetUpdated=True}" Canvas.Top="0" Canvas.Left="0">
  <Image.Triggers>
    <EventTrigger RoutedEvent="Binding.TargetUpdated">
      <BeginStoryboard>
        <Storyboard>
          <DoubleAnimation 
            Storyboard.TargetName="img_person" 
            Storyboard.TargetProperty="(Canvas.Top)" 
            By="64"
            Duration="0:0:0.8"
            AutoReverse="False" />
       </Storyboard>
     </BeginStoryboard>
   </EventTrigger>
 </Image.Triggers> 
```

我想改变这条线；

```
 <EventTrigger RoutedEvent="Binding.TargetUpdated"> 
```

对于这样的事情；

```
 <EventTrigger ThisParticularPropertyHasChanged="MyProperty1"> 
```

我想这样做，因为我将有几个情节提要，每个情节提要在特定属性更改时启动。有了 1 个属性，我一直将它绑定到图像的 Tag 属性，但现在我有几个要做（大约 8 个）我不知道该怎么做。

该类实现 INotifyPropertyChanged。

谢谢。

解决方案，感谢 sa_ddam213；

```
 <Style x:Key="PersonImageStyle" TargetType="{x:Type Image}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding UI_DirectionOfMovement}" Value="South">
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Top)" By="64" Duration="0:0:0.8" AutoReverse="False" />
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
            <DataTrigger Binding="{Binding UI_DirectionOfMovement}" Value="East">
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="(Canvas.Left)" By="64" Duration="0:0:0.8" AutoReverse="False" />
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

# c# - C# 等效于 ActionScript3 的 BitmapData

> ID：15627078
> 
> 赞同：0
> 
> 时间：2013-03-26T00:05:30.207
> 
> 标签：c#, actionscript-3

是否有任何与 ActionScript3 的 BitmapData 等效的 C#？我想将“as3delauny”库移植到 C# 中。但我真的没有在 C# 中找到任何具有类似方法的类......

或者那里有任何现有的端口？

谢谢R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:09:36.353

如果您需要原始图像数据操作部分， Bitmap 及其[Bitmap.LockBits](http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx)是您可能正在寻找的。

# ember.js - 具有多个主从视图的 Ember.js

> ID：15627080
> 
> 赞同：2
> 
> 时间：2013-03-26T00:05:35.277
> 
> 标签：ember.js

据我所知，`Ember.js`目前不支持在不启用实验`{{control}}`助手的情况下拥有单个控制器的多个实例的概念。

据我了解，执行排序列表的 Ember-y 方法是在执行排序的控制器上定义一个属性，例如：

```
App.BarController = Ember.ObjectController.extend({
  beers: (function() {
    return Ember.ArrayProxy.createWithMixins(Ember.SortableMixin, {
      sortProperties: ['rating'],
      content: this.get('content.beers')
    })
  }).property('content.beers')
}); 
```

在我的应用程序中，我想在酒吧显示所有的啤酒，并按评级对这些啤酒进行排序。**对于一个**使用正常主从模式的柱来说，这是相当简单的，给定一个`App.BarController`. 但是，如果我想并排显示两个条形图，这个模型突然就坏了。我不能`{{render}}`在一个内使用`{{each}}`（因为`render`只能调用一次），并且以下场景也会中断，因为数据绑定已更新为仅显示*最后一个*栏。

```
{{#each bar in controller}}
  {{#with bar as controller}}
    {{view BarView}}
  {{/with}}
{{/each}} 
```

最后，我不能只使用`{{view}}`它，因为它消除了按评级对数据进行排序的能力。视图必须绑定到控制器或其他一些排序机制。

**TL;DR：**给定一个`App.Bar`的`hasMany`实例`App.Beer`，使用`Ember.SortableMixin`可以直接创建一个排序列表。但是，如果我想同时显示*两个* `App.Bar`s （用于比较），则此方法会中断，因为它需要两个 s 实例`App.BarController`，这是不可能的。根据同一类的两个对象的内容获取两个排序列表的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:25:20.553

> 根据同一类的两个对象的内容获取两个排序列表的正确方法是什么？

通常，您希望坚持每个列表一个控制器。因此，在这种情况下，我建议说`App.LeftBarController`and `App.RightBarController`。

当然会有共享代码，但可以重构为基类或 mixin。

# ios - 你能在另一个 iOS 应用程序中运行一个 iOS 应用程序吗

> ID：15627082
> 
> 赞同：3
> 
> 时间：2013-03-26T00:05:50.013
> 
> 标签：ios, objective-c

我是否可以编写一个应该是其他几个应用程序的包装器的应用程序，然后在我的主应用程序中运行这些应用程序？

这个想法是有一个我只想写一次的菜单，但我想将它集成为许多其他应用程序的最顶层。

我想到的另一种方法可能是在顶层创建一个 UIWindow 并在其中运行它，但我在传递触摸时遇到了问题。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T00:06:55.550

我认为这是错误的整体方法。如果您希望您的代码可重用，请编写一个**库。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:56:39.723

您不能在一个应用程序中托管“多个应用程序”，因为据我所知，Apple 的沙盒可以防止这种情况发生，并且只允许应用程序一次运行一个。

不过，您有几个选项可以模拟您想要的功能：

*   使用`UINavigationController`or`UITabViewController`在不同的视图控制器之间导航，从而允许顶级菜单在应用程序中引导不同的“功能”。（这意味着您实际上并不需要显式使用 UIWindow；您可以使用 Storyboard 和 Storyboard segues 来连接这些不同的功能部分） 优势：这是一个应用程序。缺点：应用商店中的一个列表。

*   使用[自定义 URL 方案](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)在两个单独的 iOS 应用程序之间移动。每个 iOS 应用程序（通常）都是它自己的项目，（如果您不计算“目标”，它可以从每个构建中省略特定文件）并且并非每个应用程序都安装在每个设备上。但是假设客户拥有您的两个应用程序，您可以使用这样的 URL 方案从另一个应用程序打开一个应用程序，甚至传递数据。我自己的应用程序使用 URL 方案将数据从“精简”版本传递到“专业”版本。优点：应用商店上的多个列表。缺点：如果用户没有安装这两个应用程序将无法工作。

*   在多个应用程序中重用“顶级菜单”代码，然后执行一些逻辑，以便应用程序仅在安装其他应用程序时使用自定义 URL 方案。然后，您还可以将他们引导到他们尚未安装的任何应用的应用商店页面。优点：商店多listing，统一体验，如果还没有安装应用，可以将用户带到应用商店。（我还没有实现代码来检查是否安装了应用程序......看起来这个问题已经在[这里](https://stackoverflow.com/questions/5746289/determine-if-an-app-exists-and-launch-that-app-on-ios)问过了。）

编辑：[我读了你的另一个问题](https://stackoverflow.com/questions/15627547/running-a-plugin-on-an-ios-app?utm_source=twitterfeed&utm_medium=twitter)。看起来“顶级”是指在屏幕上以图形方式粘贴的东西，并且在用户导航应用程序时不会被其他视图删除？我不确定如何使用 Foundation 来做到这一点，但你可以使用 Quartz2D（面向实用程序）或 Cocos2D（面向游戏）来做到这一点。

# google-app-engine - 由于导入 _multiprocessing 导致的应用程序引擎错误

> ID：15627083
> 
> 赞同：0
> 
> 时间：2013-03-26T00:05:50.877
> 
> 标签：google-app-engine, python-2.7, multiprocessing, google-cloud-endpoints

我创建了一个应用引擎端点 api，我正在使用 GoogleAppengineLauncher 加载它。该 api 启动正常。但是当我尝试加载 api explorer 进行测试时，由于`from multiprocessing import Process`. 我的研究把我[带到了这个网站](http://www.alishabdar.com/2009/09/26/fixing-the-multiprocessing-error-while-developing-for-appengine/)。但这对我不起作用。有谁知道如何解决这一问题？

```
from multiprocessing import Process
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/__init__.py", line 84, in <module>
    import _multiprocessing
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/python/sandbox.py", line 861, in load_module
    raise ImportError
ImportError
INFO     2013-03-25 23:46:32,229 server.py:528] "POST /_ah/spi/BackendService.getApiConfigs HTTP/1.1" 500 -
INFO     2013-03-25 23:46:32,229 server.py:528] "GET /_ah/api/discovery/v1/apis HTTP/1.1" 500 60 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:04:06.900

在这个[组线程](https://groups.google.com/d/msg/google-appengine/TpIUau1Ikp8/4A9fK_DbodgJ)中，一位 Python 2.7 App Engine 运行时工程师指出了应该与新的 Python 2.7[线程支持一起使用的替代方案（即](https://developers.google.com/appengine/docs/python/runtime#The_Sandbox)[futures](https://pypi.python.org/pypi/futures)包） 。

或者，您可以使用这些[`fetch_data_async`](https://developers.google.com/appengine/docs/python/blobstore/functions#fetch_data_async)函数从 blob 中读取而不会阻塞。

```
fetch_data_rpc = blobstore.fetch_data_async(...)
other_processing()
upload_url = fetch_data_rpc.get_result() 
```

# python - 井字游戏显示网格

> ID：15627085
> 
> 赞同：1
> 
> 时间：2013-03-26T00:05:57.673
> 
> 标签：python

我目前正在用 Python 制作井字游戏，我想让用户在每次移动时都能看到棋盘。用户正在与计算机对战（我已经对其进行了编码，以便计算机分析棋盘并采取行动），然后每个玩家都关闭，直到玩家获胜、平局或失败。我想打印的是这样的：

```
moveList=[['X','-','-'],['O','X','-'],['X','O','-']])

<------->
< x - - > #element 1 of the list, so the first sublist
< o x - > #element 2 of the list, so the second sublist
< x o - > #element 3 of the list, so the third sublist
<-------> 
```

我在哪里建立页眉和页脚（我知道如何做到这一点），并使用存储移动的 2D 列表以在每次进行新移动时显示它们。这将通过使用两个 for 循环和换行符来完成，但我不确定如何做到这一点。任何提示将不胜感激！- 注意：我只需要一些帮助来打印 2D 列表的行，其他一切都很好。

编辑：

我尝试了一个双循环：

```
for a in range(len(moveList)):
     for b in range(len(moveList[a])):
          print moveList[a][b], 
```

但是没有成功，因为我需要它一次只打印三个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:20:32.550

由于`moveList`是可迭代的，因此最好直接迭代它，而不是迭代一个范围，然后用它来索引列表。

```
print '<------->'
for row in moveList:
  print '< ' + ' '.join(row) + ' >'
print '<------->' 
```

一个聪明的替代方法`str.join`可能是使用带有`*`符号的列表解包，例如

```
for row in moveList:
  print '< {} {} {} >'.format(*row) 
```

# amazon-web-services - 为什么 mon-put-data 不接受多个值？

> ID：15627086
> 
> 赞同：1
> 
> 时间：2013-03-26T00:06:07.103
> 
> 标签：amazon-web-services, amazon-cloudwatch

我下载了命令行工具 CloudWatch-2010-08-01.zip（据我所知是最新版本）。根据[在线文档，](http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/cli-mon-put-data.html)我应该能够一次发送多个统计信息：

```
-m, --metric-name VALUE1,VALUE2,VALUE3...
The name of the Metric to be gathered. Required. 
```

但是我的 mon-put-data 副本告诉我，我一次只能发送一个 - 这是来自它打印出的使用信息：

```
-m, --metric-name VALUE
   The name of the Metric to be gathered. Required. 
```

是我搞砸了，还是亚马逊把他们的版本搞混了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:24:12.537

一次一个，因为这是 Web 服务 API 所支持的。

最新版本的 CLI 工具实际上是[AWS Unified CLI Tools](https://github.com/aws/aws-cli)。它与 Web 服务 API 1:1 映射，因此应该更清楚如何使用它。自动完成功能也很方便。

如果您还安装了推荐的[jq](http://stedolan.github.com/jq/) CLI 工具，您可以执行以下操作：

```
提示 > aws cloudwatch list-metrics | jq ".Metrics[].MetricName" | 排序 | 独特的
“CPU利用率”
“数据库连接”
“磁盘队列深度”
“磁盘读取字节”
“磁盘读取操作”
“磁盘写入字节”
“磁盘写入操作”
“自由存储空间”
“自由记忆”
“HTTPCode_Backend_2XX”
“HTTPCode_Backend_3XX”
“HTTPCode_Backend_4XX”
“HTTPCode_Backend_5XX”
“健康主机计数”
“潜伏”
“网络进”
“网络输出”
“已发布消息数”
“传递的通知数”
“NumberOfNotificationsFailed”
"ProvisionedReadCapacityUnits"
“ProvisionedWriteCapacityUnits”
“发布大小”
“读取 IOPS”
“读取延迟”
“读取吞吐量”
“请求计数”
“状态检查失败”
“StatusCheckFailed_Instance”
“状态检查失败_系统”
“交换使用”
“不健康主机计数”
“音量空闲时间”
“卷队列长度”
“卷读字节”
“卷读操作”
“VolumeTotalReadTime”
“VolumeTotalWriteTime”
“卷写字节”
“卷写操作”
“写 IOPS”
“写延迟”
“写入吞吐量”

提示 >

```

从那里，您可以查看[GetMetricStatistics](http://docs.aws.amazon.com/AmazonCloudWatch/latest/APIReference/API_GetMetricStatistics.html)的 API 参考并将此查询放在一起：

```
aws cloudwatch get-metric-statistics \
    --metric-name CPUUtilization \
    --statistics Average \
    --namespace AWS \
    --period 600 \
    --start-time 20130320 \
    --end-time 20130323 
```

# ruby-on-rails - 将基础图标与 AddThis 社交插件一起使用

> ID：15627092
> 
> 赞同：2
> 
> 时间：2013-03-26T00:06:53.423
> 
> 标签：ruby-on-rails, icons, zurb-foundation, addthis

我想知道是否有人能够使用来自[http://foundation.zurb.com/icon-fonts.php](http://foundation.zurb.com/icon-fonts.php)的 Foundation 图标，[http:](http://www.zurb.com/playground/foundation-icons) //www.zurb.com/playground/foundation-icons 和 AddThis 社交插件 - [http ://www.addthis.com/social-plugins#.UVDkahyk85o](http://www.addthis.com/social-plugins#.UVDkahyk85o) - 或者知道如何做到这一点。

绝对有一种方法可以使用自定义图像而不是默认的 AddThis 图标。但是，我看到这样做的唯一方法是这样的：

`<div class="addthis_toolbox addthis_default_style"> <a class="addthis_button_facebook_send"><img src="..."></a> </div>`

您所做的就是将您的自定义图像放入`<a>`标签中。但是对于 Foundation Icons，它们是通过`<i>`标签实现的。

我真的很想使用 Facebook 发送按钮，但要使用我的 facebook Foundation Icon。任何人都可以帮忙吗？

# assembly - 装配MOVS指令

> ID：15627098
> 
> 赞同：1
> 
> 时间：2013-03-26T00:07:49.710
> 
> 标签：assembly, x86, mov

我是汇编语言的初学者..我对这段代码有疑问..它只是一直给我这个错误-在代码上-不是.. :? 这个函数应该反转一个数字

```
 rev proc _x:word
uses EAX, EDX, EBX, ECX
LOCALS
MOV EBX, 0
MOV Cx,10
MOV AX, _x
CWD
DIV CX
iMUL EBX,10
MOVS EDX,DX ; error Operand types do not match.. 
push EAX
MOV AX, DX
Again:CWDE
Add EBX, EAX
POP EAX
cmp EAX, 0
JA again
ret
endp rev 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:12:36.297

汇编器可能认为您需要该`MOVSB/MOVSW/MOVSD`指令。它的操作数（隐式）确实具有相同的大小。

写`MOVSX`而不是`MOVS`.

# ruby-on-rails - 为什么分配给 mongo 文档字段有时不会进入数据库？

> ID：15627102
> 
> 赞同：0
> 
> 时间：2013-03-26T00:08:36.567
> 
> 标签：ruby-on-rails, mongodb

我有一个 mongo 数据库，其中包含我通过 rails 控制台访问的几千个“票证”文档。对于其中一些（但不是全部）文档，当我从控制台执行以下命令时，我得到了意想不到的结果：字段的值没有更新。导轨 1.9.3-p194，蒙戈 2.0.4

```
Ticket.where("title" => /failing example/).first.status
=> "Assigned"
Ticket.where("title" => /failing example/).first.status='Completed' 
=> "Completed" 
Ticket.where("title" => /failing example/).first.status
"Assigned" 
```

嗯？好的，让我们尝试另一种方式。

```
Ticket.where("title" => /failing example/).first do |t|
    t.status='Completed'
    t.save
 end
 "Completed"
 Ticket.where("title" => /failing example/).first.status
 "Assigned" 
```

这让我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:32:37.653

请尝试以下操作，以便您知道您使用的是同一张票：

```
@ticket = Ticket.where("title" => /failing example/).first
@ticket.status
=> "Assigned"
@ticket.status = 'Completed'
=> "Completed"
@ticket.status
=> ... 
```

好的，从您尝试的编辑到我的回答，对象似乎没有通过验证并被正确保存。仔细检查`Ticket`模型中的验证并确保所有必需的列都存在。

# php - 将图像的 id 传递到另一个页面

> ID：15627104
> 
> 赞同：0
> 
> 时间：2013-03-26T00:08:43.797
> 
> 标签：php, html, mysql

这可能有点无聊，但我不知道从哪里开始解决我的问题。非常感谢您朝着正确的方向友好地轻推。

我正在尝试拥有一个材料库，材料的图像存储在数据库中，现在我想让用户点击他们喜欢的材料的特定图像，这将引导他们进入下一页计算价格。

所以我想我的问题是，我如何将他们选择的这个变量从画廊带到下一页？

非常感谢任何帮助

顺便说一句，这是我从数据库中获取图像的代码：

```
<?php

  mysql_connect("localhost","root","");
  mysql_select_db ("imagez");

  $res=mysql_query("select * from imgz");

  while($row=mysql_fetch_array($res))
  {

    echo "<a href=\"page.php?id={$row['id']}\" />    
    <img src=\"{$row['img']}\>  </a>";

  }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:11:24.123

您可以设置 URL 参数，因此当他们单击它时，您将有一个参数，例如；

[http://example.com/pricecheck.php?photoid=435](http://example.com/pricecheck.php?photoid=435)

然后在你会做的页面上；

$photo = $_GET['photoid'];

然后您将在页面上获得该照片的 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:22:55.077

您可以使用 cookie 来存储变量并进行计算以进行检查，而不是通过 URL 传递变量。

```
<?php  
$expire=time()+60*60*24*30;
setcookie("price", "$54", $expire);

echo $_COOKIE['price'];
?> 
```

现在该变量`$price`可用于您的每个网页，最后不要忘记清除 cookie `setcookie("hp","", $expire);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T00:24:18.463

您可以通过...将值移交给另一个页面

**(1) 查询字符串 (URL)**

```
page.php?do=show&id=5 
```

通过从数据库中提取记录的唯一 ID 并创建链接来创建它们：

```
echo "<a href=\"page.php?id={$row['id']}\" />{$row['name']}</a>"; 
```

假设您的表`imgz`具有字段 id、name。

在 page.php 中，您可以使用

```
$_GET['do']; $_GET['id']; 
```

**pro** : quick & easy
**contra** : 可以很容易地被邪恶的用户操纵 - 他们改变查询字符串并让你的脚本做一些奇怪的事情。

**(2) 邮寄**

创建一个包含您要传递的“id”`<form method="post" action="page.php">`的隐藏字段。`id`添加`<submit>`- 按钮以将数据发送到 page.php。

在 page.php 中，您可以通过以下方式获取这些值：

```
$_POST['id']; 
```

**亲：**安全，因为邪恶的用户不能摆弄 POST
**contra：**开销

**(3) 会议：**

在每一页的顶部调用`session_start();`，通过...将您的数据写入会话中

```
$_SESSION['id'] = $id; $_SESSION['do'] = "show"; 
```

这些变量将保留在页面之间，在 page.php 中，您可以简单地使用`S_SESSION['id']`并拥有该值 - 如果您调用`session_start()`.

**亲：**简单而安全，PHP 将为您完成工作（例如处理 cookie 等）
**对：**如果您的网站上的流量增加，则会在您的网络服务器上增加负载。

# iphone - ZoomingPDFViewer 不在启用分页的 UIScrollViewer 内缩放

> ID：15627107
> 
> 赞同：1
> 
> 时间：2013-03-26T00:08:56.180
> 
> 标签：iphone, ios

我正在尝试显示水平放置的单页 PDF，以便可以通过向左或向右滑动来浏览页面。当然，我需要缩放页面。

我在启用了分页`UIWebView`的容器中使用 s实现了它。用作 PDF 查看器并处理页面更改。但是这个实现不是很好，它占用了太多内存，所以我决定使用 Apple 的而不是.`UIScrollViewer``UIWebView``UIScrollView``ZoomingPDFViewer``UIWebView`

我`UIWebView`的 s 原始代码如下所示：

```
for (int i=0; i<n; i++)
{
    CGRect frame;
    frame.origin.y = 0;
    frame.origin.x = self.scrollviewer.frame.size.width * i;
    frame.size = self.scrollviewer.frame.size;

    UIWebView *pageViewer = [[UIWebView alloc] initWithFrame:frame];
    pageViewer.scalesPageToFit = TRUE;
    pageViewer.multipleTouchEnabled = TRUE;

    [self.scrollviewer addSubview:pageViewer];

    NSURL *url = [NSURL URLWithString:address];
    NSURLRequest *req = [NSURLRequest requestWithURL:url];

    [pageViewer loadRequest:req];
}

self.scrollviewer.contentSize = CGSizeMake(nPages * self.scrollviewer.frame.size.width, self.scrollviewer.frame.size.height); 
```

这很完美，但当我有超过 25 页时它会很慢并且 Apple 不建议使用`UIWebView`inside a`UIScrollView`或者`UITableView`因为触摸事件可能会产生意想不到的结果。

`UIWebView`所以我想改成`ZoomingPDFViewer`苹果给出的例子。我的新代码`ZoomingPDFViewer`如下所示：

```
for (int i=0; i<n; i++)
{
    CGRect frame;
    frame.origin.y = 0;
    frame.origin.x = self.scrollviewer.frame.size.width * i;
    frame.size = self.scrollviewer.frame.size;

    PDFScrollView *pageViewer = [[PDFScrollView alloc] initWithFrame:frame];

    [self.scrollviewer addSubview:pageViewer];

    NSURL *url = [NSURL URLWithString:address];
    CGPDFDocumentRef PDFDocument = CGPDFDocumentCreateWithURL((__bridge CFURLRef)url);

    CGPDFPageRef PDFPage = CGPDFDocumentGetPage(PDFDocument, 1);
    [(PDFScrollView *)pageViewer setPDFPage:PDFPage];

    CGPDFDocumentRelease(PDFDocument);
}

self.scrollviewer.contentSize = CGSizeMake(nPages * self.scrollviewer.frame.size.width, self.scrollviewer.frame.size.height); 
```

此代码显示我的 PDF 页面，我可以在页面之间滑动，但无法放大页面。

我不知道该怎么办。你能帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T20:50:25.567

我找到了解决方案。

问题是当您以`UIScrollView`编程方式创建它时，它默认设置`minimumZoomScale`为`maximumZoomScale`1.0。所以实际上我的代码正在工作，但我不知道它正在工作，因为它没有放大或缩小。

所以我在我的代码中添加了两行，它起作用了！！！这是我的代码中的更改

```
PDFScrollView *pageViewer = [[PDFScrollView alloc] initWithFrame:frame];
pageViewer.minimumZoomScale = 0.2;
pageViewer.maximumZoomScale = 5.0;

[self.scrollviewer addSubview:pageViewer]; 
```

当我插入两条线时，它起作用了，但我能够无限放大或缩小。我想以 5 的最大比例缩放。所以我更改`scrollViewDidEndZooming`了文件中给出的方法`PDFScrollView.m`

Apple 附带的默认代码`ZoomingPDFViewer`如下所示：

```
// Set the new scale factor for the TiledPDFView.
_PDFScale *= scale;

// Calculate the new frame for the new TiledPDFView.
CGRect pageRect = CGPDFPageGetBoxRect(_PDFPage, kCGPDFMediaBox);
pageRect.size = CGSizeMake(pageRect.size.width*_PDFScale, pageRect.size.height*_PDFScale); 
```

修改后的样子：

```
// Set the new scale factor for the TiledPDFView.
_PDFScale *= scale;

self.minimumZoomScale *= 1 / scale;
self.maximumZoomScale *= 1 / scale;

// Calculate the new frame for the new TiledPDFView.
CGRect pageRect = CGPDFPageGetBoxRect(_PDFPage, kCGPDFMediaBox);
pageRect.size = CGSizeMake(pageRect.size.width*_PDFScale, pageRect.size.height*_PDFScale); 
```

现在它起作用了。

# javascript - 在 JavaScript 中计算跳跃动画

> ID：15627112
> 
> 赞同：4
> 
> 时间：2013-03-26T00:09:21.433
> 
> 标签：javascript, jquery, animation, geometry

我正在尝试使用 3 个变量为跳跃设置动画：跳跃距离、跳跃高度和跳跃“速度”。

[这是一个有效的 JSFiddle 演示](http://jsfiddle.net/Mottenmann/EhWAR/)。但是，我希望动画跳跃是完美的抛物线。

```
var y = 300;
var x = 0;
var jh = 100;
var jw = 200;
var c = 0;

    var inter = setInterval(function () {
        c++;
        // if box reaches jump height it should fall down
        y = (c >= jh) ? y + 1 : y - 1;
        // if box reaches jump distance
        if (x == jw) clearInterval(inter);

        x++;

        $('.box').css({
            'top': y + 'px',
            'left': x + 'px'
        });

    }, 20); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:31:27.167

我在想正弦？假设 jh 是“跳跃高度”并且 jw 是“距离”而不清理现有代码，您可以执行以下操作：

```
var y = 300;
var x = 0;
var jh = 100;
var jw = 200;
var c = 0;
var speed = 3;

var inter = setInterval(function () {
    c++;
    y = getHeightAtX(x);
    if (x >= jw) clearInterval(inter);

    x+=speed;

    $('.box').css({
        'bottom': y + 'px',
        'left': x + 'px'
    });

}, 20);

function getHeightAtX(x) {
 return jh*Math.sin(x*Math.PI/jw)   
}; 
```

# javascript - Azure 移动服务 javascript 从插入函数更新

> ID：15627114
> 
> 赞同：1
> 
> 时间：2013-03-26T00:09:33.823
> 
> 标签：javascript, mobile, azure

我正在为 windows phone 8、iOs android 创建一个移动应用程序。我正在使用 windows azure 来保存一些配置文件应用程序和一些设备信息。我对 JavaScript 的经验很少，尽管我一整天都把头撞在砖墙上，我想它开始点击了。话虽这么说，您可能会在下面嘲笑我的代码。

这（下）是一个名为 Devices 的表的插入语句。

如果当前没有用户 ID 的任何记录，我正在尝试进行正常插入。

如果已经有记录，则改为更新该记录。

```
function insert(item, user, request) {
  item.userId = user.userId;

  var deviceTable = tables.getTable('Devices');

  deviceTable
    .where({
      userId: user.userId
    }).read({
    success: function(results) {
      if (results.length > 0) {
        // Device record was found. Continue normal execution.
        deviceTable.where({
        userID : user.userId}).update({
           //i put this here just because i thought there had to be a response
           success: request.respond(statusCodes.OK, 'Text length must be under 10')
        }) ;
        console.log('updated position ok');

      } else {
        request.execute();
        console.log('Added New Entry',user.userId);
        //request.respond(statusCodes.FORBIDDEN, 'You do not have permission to submit orders.');
      }
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:58:53.107

我想你会想要这样的东西：

```
function insert(item, user, request) {
  item.userId = user.userId;
  var deviceTable = tables.getTable('Devices');
  deviceTable
    .where({
      userId: user.userId
    }).read({
    success: function(results) {
      if (results.length > 0) {
        //We found a record, update some values in it
        results[0].fieldName = X;
        //Update it in the DB
        deviceTable.update(results[0]);
        //Respond to the client
        request.respond(200, results[0]);
        console.log('updated position ok');

      } else {
        //Perform the insert in the DB
        request.execute();
        console.log('Added New Entry',user.userId);
        //Reply with 201 (created) and the updated item
        request.respond(201, item);
      }
    }
  });
} 
```

# php - Wordpress 侧边菜单小部件

> ID：15627118
> 
> 赞同：1
> 
> 时间：2013-03-26T00:10:08.153
> 
> 标签：php, wordpress, plugins, menu, widget

我正在开发一个新的 WP 站点（3.5.1），我正在尝试设置一个侧面菜单。我有一个像这样的主菜单：

```
Top 1
  sub 1
  sub 2
  sub 3
Top 2
  sub 1
  sub 2
Top 3 
```

我正在尝试使用它并进行设置，以便在我位于 Top 1 时，我会在旁边获得一个菜单，该菜单将显示：

```
Top 1
  sub 1
  sub 2
  sub 3 
```

前 2 名也会显示自己和孩子。这在 Joomla 中很容易做到，但我很难在 WP 中找到如何做到这一点。我可以向侧边栏添加自定义菜单，但它会一直显示相同的菜单。这意味着`Top 1`菜单将显示在页面`Top 2`上。`Top 3`有谁知道一个好的插件可以做到这一点？我发现的一切都是棒状菜单和大型下拉菜单，但我只需要一些简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:24:00.493

子菜单有很多插件。其中许多似乎可以满足您的需求。[WordPress 子菜单插件](http://wordpress.org/extend/plugins/tags/submenu)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:10:41.980

这正是我想要的。简单易用。

[http://wordpress.org/extend/plugins/custom-menu-wizard/](http://wordpress.org/extend/plugins/custom-menu-wizard/)

# c++ - 选择性地忽略串行端口上的帧错误

> ID：15627119
> 
> 赞同：2
> 
> 时间：2013-03-26T00:10:15.547
> 
> 标签：c++, linux, windows, serial-port

由于遗留原因，我需要让我的程序能够与可用的有限规格的第三方设备通信。这本身并不是一个真正的问题，当它忽略所有串行错误时，我有一些代码可以很好地与之对话。

不过，我希望它不要忽略错误——但问题是从设备接收到的每条消息都会在第一个字节上产生一个帧错误（由于制造商的一些奇怪的设计决定）。

当设备发送响应时，它似乎在线路上断言一个空格 6 位时间，然后一个标记 2 位时间，然后进入正常帧（1 个空格起始位，8 个数据位，2 个标记停止位） . 或者换一种说法：传输的第一个字节似乎使用 5 位帧，而随后的每个字节都使用 8 位帧；或者第一个字节实际上是一个非常短的中断条件。（除了这个怪癖之外，消息格式设计得相当好并且明确。）我假设这是作为某种中断唤醒信号，虽然我不知道为什么它不使用相同的帧消息的其余部分，或真正的长于一个字符的中断条件。

不出所料，这会惹恼操作系统，当它看到第一个“字节”时会产生帧错误。目前我正在使用基于 Windows 的程序与此设备通信（但可能稍后会迁移到 Linux）。在 Windows 上，我使用重叠 I/O`ReadFileEx`来读取实际数据并`ClearCommError`检测错误情况。不幸的是，这意味着我得到独立于数据报告的帧错误——然后这被视为正在读取的整个数据块的错误（通常一次 8 个字节，但有时更多），我似乎真的不能进一步本地化。

（帧错误偶尔也会破坏传入消息中的第二个字节，但幸运的是，这不会导致解释此特定消息格式时出现任何问题。）

我希望能够确定哪些字节专门导致了帧错误，以便端口处理代码可以将其传递给协议处理代码，并且它可以忽略消息重要部分之外发生的错误。但我不想降低性能（如果我尝试逐字节读取，我怀疑会发生这种情况；而且我不确定这是否会起作用）。

有没有好的方法来做到这一点？还是我最好忘记整个想法而完全忽略框架错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:23:59.853

我不是 100% 确定这是一个强大的解决方案，但到目前为止它似乎对我有用。

我已经做到了，当它检测到帧错误时，下一次读取将只读取一个字节，然后之后的一个字节（假设仍然没有帧错误）将尽可能多地返回读取。这似乎可以清除错误并毫无问题地接收以下字节。（至少当这些字节本身没有任何框架问题时。我不确定如何测试它们的作用。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-25T14:06:24.553

大约六个月前，我在使用 RTMmouse 时遇到了一个可屏蔽的框架错误。我已经用 DOS 7.10 调试修复了它，但现在我又得到了它......为什么？我已经在我的 DOS 7.10 主分区上安装了 WIN95 并转换了我所有的辅助分区......除了我的引导分区。我在它的分区上正常​​工作后重新安装了 windows 到 win95 主分区。这激活了 NMI -可以屏蔽到不可屏蔽。我如何找到错误。它就在引导程序上[我有一个断点，在调用 lockdrv.bat 并提供 CSDPMI 服务器后通过鼠标驱动程序进行 RTM.EXE 重定向。

因此，在初始启动后，我立即执行此操作：

C>调试-u

我从执行 autoexec.bat 中生成了一堆代码

准确地跟踪 8 位操作数我可以看到 CPU 正在通过这种方法提供 NMI - 不确定该结构从内存中的准确性，但类似于 lockdrv.bat 的 AX 计算，用于锁定 %% 中的每个 %f

然后是推动 AX。然后 CPU 会执行其他操作 - 它推动 AX，然后将 ah 设置为零

push ax mov ah,00

这是被禁用的位 - 保持 otehr 数据位完整。这是平面组装中的帧 eroor --- 在此之前，al 调用是通过 bx 中的 si 和 dx 进行的：

添加 [si+dx];al

好吧，计算机可以识别调制解调器数据位，但我没有发送或接收[我在最后一晚使用 Ralf Browns 中断列表和调试] 这很有趣。但是这是一个帧错误。我验证了 int 14 错误中断 0C 作为帧错误 - win95 必须生成它，因为它不喜欢我的断点 [通过 v86 不应再存在该断点，但是生成 NMI - 帧错误仍然是次要的，如果 CPU 使用 NMI不承认它 - 是可能导致的基本或更简单的 NMI 之一。NMI 意味着不可屏蔽或意味着没有例外。一个例子是除法溢出，由于 IRQ 冲突或其他中断冲突，它的绝对答案不能偏离，这将形成 16 位一般保护错误，当两个或多个程序冲突时通常在实模式下或在 WIN95 中发生在 ral 模式下尝试使用 DOS GUI 进行多任务 - 因为 WIN 95 不支持 DOS 实模式共享程序进行文件锁定和文件共享。

# html - 额外的黑色边框线

> ID：15627122
> 
> 赞同：1
> 
> 时间：2013-03-26T00:10:26.020
> 
> 标签：html, css, media-queries

当您缩小浏览器窗口时，您会看到 iphone 的不同布局我在滑块下方看到一条额外的黑线...如何删除黑线...我删除了边框属性但它没有被删除...在下面提供我的代码....

[http://jsfiddle.net/CAARt/1/](http://jsfiddle.net/CAARt/1/)

```
#slider li div {
border-radius: 4px;
border-top: 1px #fff solid;
background: #F7F9FA;
-webkit-box-shadow: 0px 1px 2px #0D0F11;
-moz-box-shadow: 0px 1px 2px #0D0F11;
box-shadow: 0px 1px 2px #0D0F11;
color: #DDE1E4;
font-size: 12px;
text-align: center;
text-shadow: 0 1px 0 #fff;
color: #A4AEB7;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:44:52.420

当窗口大小减小时，您看到的边框是由此引起的

```
#gallery nav {
border-top:1px solid #3A4146;
} 
```

将该边框更改为 0px 或无，它将消失。

# c# - 以编程方式在按钮内添加图像

> ID：15627123
> 
> 赞同：8
> 
> 时间：2013-03-26T00:10:29.873
> 
> 标签：c#, wpf, button, children

在 WPF 中：

```
<Button Width="24" Height="24" >
    <Image Source="pack://application:,,,/res/x.png" VerticalAlignment="Center"/>
</Button> 
```

我如何在 C# 中模仿这个？我在类中找不到任何`Button`添加孩子的方法。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-26T00:29:48.163

`Button`是一个`Content`控件，所以你只需要使用该`Buttons` `Content`属性

例子：

```
Button myButton = new Button
{
    Width = 24,
    Height = 24,
    Content = new Image
    {
        Source = new BitmapImage(new Uri("image source")),
        VerticalAlignment = VerticalAlignment.Center
    }
}; 
```

# ssis - 每个单行输入从脚本组件输出多行

> ID：15627124
> 
> 赞同：2
> 
> 时间：2013-03-26T00:10:38.497
> 
> 标签：ssis

尽管我在 SQL 和 C# 以及其他技术方面有丰富的经验，但我对 SSIS 非常缺乏经验。

我正在将我作为独立 c# 控制台应用程序编写的任务转换为 SSIS 包。

我有一个 OLEDB 输入源，它是一个 SQL 命令，它收集数据库中的某些数据，然后我将这些数据输入脚本组件转换。我将输入字段用作基于 OAuth 的 RESTful Web 服务的参数，这需要大量自定义 C# 代码来完成。Web 服务返回一个 XML 响应，其中包括必须为每个输入行输出的许多行。

我对脚本转换如何工作的理解是，它或多或少是一排进一排。

我真的有几个问题。

1.  以这种方式使用输入源是个好主意吗？或者有没有更好的方法将输入行输入到我的 Web 服务中？
2.  脚本组件转换是在这里使用的正确工具吗？我不能使用普通的 Web 服务，因为 Web 服务不是基于 SOAP 或 WCF 的，并且在请求中需要 OAuth。（或者有没有办法以这种方式使用 Web 服务组件？）
3.  如何为每个输入行输出多行？
4.  SSIS 是否支持获取 XML 结果（包含多行）并将它们映射到脚本转换中输出字段的行的方法？我知道有一个 XML 输入源，但这不是真的。我在想一些需要 XML 输入并吐出数据行的东西

更新：

来自 Web 服务的数据如下所示（省略了多余的内容）：

```
<user>
  <item>
    <col1>1</col1>
    <col2>2</col2>
    <col3>3</col3>
  </item>
  <item>
    <col1>1</col1>
    <col2>2</col2>
    <col3>3</col3>
  </item>
  ....
</user> 
```

本质上，SQL DataSource 返回用户数据集。用户数据集被输入脚本并用作 Web 服务调用的参数。Web 服务调用返回一组 XML 结果，其中包含必须从脚本输出的多“行”数据。

在上述数据中，对于输入源中提供的每个用户，脚本的输出将是多行 col1、col2 和 col3。我需要一种方法来提取这些元素并将它们放入每行 xml 数据的输出缓冲区的列中。或者，一种简单地使 xml 成为脚本的输出并将该输出提供给另一个组件以将 xml 解析为行的方法（就像 XML 源一样，但显然您不能将 XML 源放在数据中间流动）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:56:18.727

尽我所能回答

## 以这种方式使用输入源是个好主意吗？或者有没有更好的方法将输入行输入到我的 Web 服务中？

这取决于但通常情况下，如果您的数据在数据库中，OLE DB 或 ADO.NET 源是您将其注入管道的首选组件。更好的？这取决于您的需求，但您是否有理由认为*不*建议这样做？使用数据流的好处在于缓冲、并行、日志记录、配置等。我假设或其他原因导致您将 .NET 应用程序移动到集成服务包中，所以我想如果您重新进入这个空间，全力以赴。

## 脚本组件转换是在这里使用的正确工具吗？

确实。内置的网络服务的东西不及工业强度。您已经熟悉 .NET，因此可以充分利用该组件。

## 如何为每个输入行输出多行？

是的。您对 1:1 输入：输出的假设仅适用于默认行为。默认情况下，脚本组件是同步的，因此如您所见，每一行都有一个输出。但是，通过将脚本组件更改为[异步](http://msdn.microsoft.com/en-us/library/ms136133.aspx)组件，您可以将 1B 行转换为单行输出，或者让 1 行源代码生成 N 行输出。对于物料清单类型的问题，我必须执行后者——我会收到一个父 ID，并且我必须查找与父关联的所有子行。无论如何，链接的 MSDN 文章描述了如何使其异步。

## SSIS 是否支持获取 XML 结果的方法

我不太明白你要求解决这个问题。为这个假人做一些例子，我会看看它是否点击。

# jdbc - 无法使用 JDBC 连接到 netbeans 上的 Derby DB

> ID：15627125
> 
> 赞同：0
> 
> 时间：2013-03-26T00:10:48.230
> 
> 标签：jdbc

我正在尝试在 NetBeans 上操作 Apache Derby DB，但连接起来很困难。

它看起来很简单，但它就是无法连接。

请帮忙。提前致谢！

```
import java.sql.*;

public class JDBCtutorial {
    private static String tableName = "Diseases";

    private static Connection conn = null;
    private static Statement stmt = null;

    public static void createConnection() {
        try {
            Class.forName("org.apache.derby.jdbc.ClientDriver");
        } catch(ClassNotFoundException cnfe) {
            System.out.println(cnfe);
        }
        try {
            conn = DriverManager.getConnection("jdbc:derby://localhost:1527/DBName", "user", "password");
        } catch (Exception e) {
            System.out.println("Cannot connect. . .");
        }
    }

    public static void main(String[] args) {
        createConnection();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:22:52.390

您正在使用 Derby ( `org.apache.derby.jdbc.EmbeddedDriver`) 的嵌入式驱动程序，但您尝试通过网络连接，在这种情况下，您应该使用网络驱动程序`org.apache.derby.jdbc.ClientDriver`.

所有这些都在[Derby 文档](http://db.apache.org/derby/papers/DerbyTut/ns_intro.html)中进行了详细解释，非常好。

此外，由于 getConnection 可能引发异常，可能会提示问题的原因，请尝试 pinting 堆栈跟踪，它应该提供该信息：

```
 } catch (Exception e) {
        System.out.println("Cannot connect:");
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T14:25:04.947

您只需在项目中添加一个库文件。 [在这里下载](http://mvnrepository.com/artifact/org.apache.derby/derbyclient)

Eclipse：右键单击项目然后>构建路径>配置构建路径>添加外部JAR（并选择您下载的文件）>完成

NetBeans：右键单击项目然后>属性>库>添加JAR /文件夹“并选择您下载的文件”>确定（运行）

永久添加：将文件添加到 c:/program files/java/JRE/lib/ 文件夹

# javascript - chrome 扩展代码不是作为扩展运行，而是作为不同的网页运行

> ID：15627127
> 
> 赞同：0
> 
> 时间：2013-03-26T00:10:54.693
> 
> 标签：javascript, google-chrome-extension

我编写了以下代码来创建一个 chrome 扩展，用于在 codechef 网站上显示比赛。[www.codechef.com/contests](http://www.codechef.com/contests)

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript">
function fetchPage(url) {
    $.ajax({
        type: "GET",
        url: url,
        error: function(request, status) {
            alert('Error fetching ' + url);
        },
        success: function(data) {

            var textstring = "";
            var $divelem = $("div.table-questions",$(data));
            var $headers = $("h3",$(data));
            var contsite = $divelem.size();
            for(i = 0;i < contsite;i++)
            {
                var ob = $divelem.eq(i);
                var tr = $('tr',ob);
                var trsize = tr.size();
                textstring += "<b>"+$headers.eq(i).html()+"</b><br>";
                for(j = 1;j < Math.min(10,trsize);j++)
                {
                    var td = $('td',tr[j]);
                    var tdsize = td.size();
                    for(k = 0;k < tdsize;k++)
                    {
                        textstring += "\t"+td.eq(k).html()
                    }
                    textstring += "<br>";
                }

            }

            var element = document.createElement("div");
            element.innerHTML = textstring; 
            document.body.appendChild(element);
        }
    });

}

    document.addEventListener('DOMContentLoaded', function() 
    {
        fetchPage("http://www.codechef.com/contests");
    });

</script>
</head>

<body>
</body>

</html> 
```

我已将浏览器上的代码作为网页运行。它工作正常，但是当作为扩展运行时，它没有显示任何内容。我在网上找不到任何可以解决这个问题的东西。manifest.json 文件如下：

```
{
  "manifest_version": 2,

  "name": "Codechef Plugin",
  "description": "This extension demonstrates a codechef event.",
  "version": "1.0",

  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "main.html"
  }
} 
```

# javascript - 如果值大于（在 foreach 上），则淘汰 JS 删除选项

> ID：15627128
> 
> 赞同：0
> 
> 时间：2013-03-26T00:11:01.587
> 
> 标签：javascript, jquery, knockout.js

我有一个具有设备名称和数量的 json 数组。如果数量是两个，并且用户为该名称向 foreach 添加了两个项目（他们从下拉字段中选择），我想从下拉菜单中隐藏该设备名称选项。

****编辑**** Rune 似乎有正确的答案，但是我不知道如何将它集成到我的代码中。这是我的代码：http: [//jsfiddle.net/QTUqD/1/](http://jsfiddle.net/QTUqD/1/)

```
<form id="extMngForm">
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Extension</th>
                <th>Name</th>
                <th>Email</th>
                <th>Voicemail Pin</th>
                <th>Device</th>
                <th>MAC Address</th>
                <th>Ship To</th>
                <th style="width: 100px; text-align:right;" />
            </tr>
        </thead>
       <tbody data-bind=" template:{name:templateToUse, foreach: pagedList }"></tbody>
    </table>

    <!-- ko if: pagedList().length < extQty() -->
    <p class="pull-right"><a class="btn btn-primary" data-bind="click: $root.add" href="#" title="edit"><i class="icon-plus"></i> Add Extension</a></p>
    <!-- /ko -->

    <div class="pagination pull-left">
        <ul><li data-bind="css: { disabled: pageIndex() === 0 }"><a href="#" data-bind="click: previousPage">Previous</a></li></ul>
        <ul data-bind="foreach: allPages">
            <li data-bind="css: { active: $data.pageNumber === ($root.pageIndex() + 1) }"><a href="#" data-bind="text: $data.pageNumber, click: function() { $root.moveToPage($data.pageNumber-1); }"></a></li>
        </ul>
        <ul><li data-bind="css: { disabled: pageIndex() === maxPageIndex() }"><a href="#" data-bind="click: nextPage">Next</a></li></ul>
    </div>

    <br clear="all" />
    <script id="extItems" type="text/html">
       <tr>
            <td style="width:20px;" data-bind="text: extension"></td>
            <td data-bind="text: name"></td>
            <td data-bind="text: email"></td>
            <td style="width:20px;" data-bind="text: vmpin"></td>
            <td data-bind="text: device"></td>
            <td data-bind="text: macAddress"></td>
            <td data-bind="text: shipTo"></td>
            <td class="buttons">
                <a class="btn" data-bind="click: $root.edit" href="#" title="edit"><i class="icon-edit"></i></a>
                <a class="btn" data-bind="click: $root.remove" href="#" title="remove"><i class="icon-remove"></i></a>
            </td>
        </tr>
    </script>

    <script id="editExts" type="text/html">
        <tr>
            <td style="width:20px;"><input data-errorposition="b" class="required" name="extension" data-bind="value: extension" /></td>
            <td><input data-errorposition="b" class="required" name="name" data-bind="value: name" /></td>
            <td><input data-errorposition="b" class="required" name="email" data-bind="value: email" /></td>
            <td style="width:20px;"><input data-errorposition="b" class="required" name="vmpin" data-bind="value: vmpin" /></td>
            <td>

            <select style="width:100px;" data-bind="options: $root.devices, optionsText: 'name', optionsValue: 'id', value: device"></select>

            </td>
            <td><input data-errorposition="b" name="macAddress" data-bind="value: macAddress" /></td>
            <td><select style="width:100px;" data-bind="options: $root.addressList, optionsText: 'locationName', optionsValue: 'shipping_address_street', value: shipTo"></select></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="click: $root.save" href="#" title="save"><i class="icon-ok"></i></a>
                <a class="btn" data-bind="click: $root.remove" href="#" title="remove"><i class="icon-remove"></i></a>
            </td>
        </tr>
    </script>
</form>
<form id="extMngForm">
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Extension</th>
                <th>Name</th>
                <th>Email</th>
                <th>Voicemail Pin</th>
                <th>Device</th>
                <th>MAC Address</th>
                <th>Ship To</th>
                <th style="width: 100px; text-align:right;" />
            </tr>
        </thead>
       <tbody data-bind=" template:{name:templateToUse, foreach: pagedList }"></tbody>
    </table>

    <!-- ko if: pagedList().length < extQty() -->
    <p class="pull-right"><a class="btn btn-primary" data-bind="click: $root.add" href="#" title="edit"><i class="icon-plus"></i> Add Extension</a></p>
    <!-- /ko -->

    <div class="pagination pull-left">
        <ul><li data-bind="css: { disabled: pageIndex() === 0 }"><a href="#" data-bind="click: previousPage">Previous</a></li></ul>
        <ul data-bind="foreach: allPages">
            <li data-bind="css: { active: $data.pageNumber === ($root.pageIndex() + 1) }"><a href="#" data-bind="text: $data.pageNumber, click: function() { $root.moveToPage($data.pageNumber-1); }"></a></li>
        </ul>
        <ul><li data-bind="css: { disabled: pageIndex() === maxPageIndex() }"><a href="#" data-bind="click: nextPage">Next</a></li></ul>
    </div>

    <br clear="all" />
    <script id="extItems" type="text/html">
       <tr>
            <td style="width:20px;" data-bind="text: extension"></td>
            <td data-bind="text: name"></td>
            <td data-bind="text: email"></td>
            <td style="width:20px;" data-bind="text: vmpin"></td>
            <td data-bind="text: device"></td>
            <td data-bind="text: macAddress"></td>
            <td data-bind="text: shipTo"></td>
            <td class="buttons">
                <a class="btn" data-bind="click: $root.edit" href="#" title="edit"><i class="icon-edit"></i></a>
                <a class="btn" data-bind="click: $root.remove" href="#" title="remove"><i class="icon-remove"></i></a>
            </td>
        </tr>
    </script>

    <script id="editExts" type="text/html">
        <tr>
            <td style="width:20px;"><input data-errorposition="b" class="required" name="extension" data-bind="value: extension" /></td>
            <td><input data-errorposition="b" class="required" name="name" data-bind="value: name" /></td>
            <td><input data-errorposition="b" class="required" name="email" data-bind="value: email" /></td>
            <td style="width:20px;"><input data-errorposition="b" class="required" name="vmpin" data-bind="value: vmpin" /></td>
            <td>

            <select style="width:100px;" data-bind="options: $root.devices, optionsText: 'name', optionsValue: 'id', value: device"></select>

            </td>
            <td><input data-errorposition="b" name="macAddress" data-bind="value: macAddress" /></td>
            <td><select style="width:100px;" data-bind="options: $root.addressList, optionsText: 'locationName', optionsValue: 'shipping_address_street', value: shipTo"></select></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="click: $root.save" href="#" title="save"><i class="icon-ok"></i></a>
                <a class="btn" data-bind="click: $root.remove" href="#" title="remove"><i class="icon-remove"></i></a>
            </td>
        </tr>
    </script>
</form> 
```

* * *

```
window.ExtListViewModel = new function () {
    var self = this;
    window.viewModel = self;

    self.list = ko.observableArray();

    self.pageSize = ko.observable(10);
    self.pageIndex = ko.observable(0);
    self.selectedItem = ko.observable();
    self.extQty = ko.observable();
    self.devices = ko.observableArray(['devices']);

    self.addressList = ko.observableArray(['addressList']);
    self.edit = function (item) {
        if($('#extMngForm').valid()) {
            self.selectedItem(item);
        }
    };

    self.cancel = function () {
        self.selectedItem(null);
    };

    self.add = function () {
        if($('#extMngForm').valid()) {
            var newItem = new Extension();
            self.list.push(newItem);
            self.selectedItem(newItem);
            self.moveToPage(self.maxPageIndex());
        }
    };
    self.remove = function (item) {

            if (confirm('Are you sure you wish to delete this item?')) {

                    self.list.remove(item);
                    if (self.pageIndex() > self.maxPageIndex()) {
                        self.moveToPage(self.maxPageIndex());
                    }

            }
            $('.error').hide();
    };
    self.save = function () {
        if($('#extMngForm').valid()) {
            self.selectedItem(null);
        };
    };

    self.templateToUse = function (item) {
        return self.selectedItem() === item ? 'editExts' : 'extItems';
    };

    self.pagedList = ko.dependentObservable(function () {
        var size = self.pageSize();
        var start = self.pageIndex() * size;
        return self.list.slice(start, start + size);
    });
    self.maxPageIndex = ko.dependentObservable(function () {
        return Math.ceil(self.list().length / self.pageSize()) - 1;
    });
    self.previousPage = function () {
        if (self.pageIndex() > 0) {
            self.pageIndex(self.pageIndex() - 1);
        }
    };
    self.nextPage = function () {
        if (self.pageIndex() < self.maxPageIndex()) {
            self.pageIndex(self.pageIndex() + 1);
        }
    };
    self.allPages = ko.dependentObservable(function () {
        var pages = [];
        for (i = 0; i <= self.maxPageIndex() ; i++) {
            pages.push({ pageNumber: (i + 1) });
        }
        return pages;
    });
    self.moveToPage = function (index) {
        self.pageIndex(index);
    };

};

ko.applyBindings(ExtListViewModel, document.getElementById('extMng'));

function Extension(extension, name, email, vmpin, device, macAddress, shipTo){
    this.extension = ko.observable(extension);
    this.name = ko.observable(name);
    this.email = ko.observable(email);
    this.vmpin = ko.observable(vmpin);
    this.device = ko.observable(device);
    this.macAddress = ko.observable(macAddress);
    this.shipTo = ko.observable(shipTo);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:37:17.007

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:22:29.953

这是一种基于在主视图模型对象上为可用设备添加新计算值以及辅助函数的方法。这并不适合所有情况，可能有方法可以简化它，但我现在已经没有果汁了：P

```
self.availableDevices = ko.computed(function() {        
    var usedQuantities = {}; // for each device id, store the used quantity
    ko.utils.arrayForEach(self.list(), function(item) {
        var device = item.device();
        if (device) {
            usedQuantities[device.id] = 1 + (usedQuantities[device.id] || 0);
        }
    });

    return ko.utils.arrayFilter(self.devices(), function(device) {
        var usedQuantity = usedQuantities[device.id] || 0;
        return device.quantity > usedQuantity;
    });
});

// need this to add back item's selected device to its device-options,
// and to maintain original order of devices
self.devicesForItem = function(item) {        
    var availableDevices = self.availableDevices();
    return ko.utils.arrayFilter(self.devices(), function(device) {
        return device === item.device() || availableDevices.indexOf(device) !== -1;
    });
} 
```

以及相应的绑定（注意：不使用 optionsValue）：

```
<select style="width:100px;" data-bind="options: $root.devicesForItem($data), optionsText: 'name', value: device"></select> 
```

更新 JSFiddle：http: [//jsfiddle.net/antishok/QTUqD/6/](http://jsfiddle.net/antishok/QTUqD/6/)

我对你的小提琴做了一些其他的小改动，所以它会起作用：将 extQty 更改为 20，添加示例设备，为 ko.applyBindings 固定元素 ID，评论表单验证内容.. 可能还有更多；p（还包括不同的引导 css )

# iphone - 制作我自己的瓷砖系统导致滞后

> ID：15627132
> 
> 赞同：2
> 
> 时间：2013-03-26T00:11:51.027
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

```
- (void) loadStartingTiles //16 by 24
{
    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:
     @"clonespritesheet.plist"];

    for(int x = 0; x < 16; x++) //minus 1 for one at the begining
    {
        for(int y = 0; y < 26; y++)
        {
            CCSprite *tempsprite;
            switch (currentscreen[x][y])
            {
                case 0:
                    tempsprite = [CCSprite spriteWithSpriteFrameName:@"block0.png"];
                break;
                case 1:
                    tempsprite = [CCSprite spriteWithSpriteFrameName:@"block1.png"];
                break;
            }
            tempsprite.position = ccp(y*20+10,(16-x)*20-10); //+10 for align for tile size
            [self addChild:tempsprite z:3];
            [tiles addObject:tempsprite];
        }
    }

} 
```

所以我从一个 int 数组中制作了一堆精灵，告诉它们它们应该在哪里，然后我将它们添加到 nsmutable 数组图块中。然后我将阵列中的所有内容缓慢地向左移动，并且我损失了大约 20 FPS。制作瓷砖系统的更有效方法是什么？我的目标是稍后制作随机生成的瓷砖。

```
- (void) manageTiles:(CGFloat)dt
{
    int tileamount = [tiles count];
    for(int i = 0; i < tileamount; i++)
    {
        CCSprite *tempsprite = [tiles objectAtIndex:i];
        tempsprite.position = ccp(tempsprite.position.x-20*dt,tempsprite.position.y);
    }
} 
```

编辑：遮阳篷是

```
int themap = -20;
- (void) manageTiles:(CGFloat)dt
{
    tiles.position = ccp(tiles.position.x-10*dt,tiles.position.y);

    NSLog(@"%d",themap);
    if(tiles.position.x < themap)
    {
        CCSprite *tempsprite;
        for(int i = 0; i < 16; i++)
        {
            [tiles removeChildAtIndex:0 cleanup:YES];
        }
        for(int i = 0; i < 16; i++)
        {
            switch (tilewall[i])
            {
                case 0:
                    tempsprite = [CCSprite spriteWithSpriteFrameName:@"block1.png"];
                    break;
                case 1:
                    tempsprite = [CCSprite spriteWithSpriteFrameName:@"block1.png"];
                    break;
            }
            tempsprite.position = ccp((themap*-1)+500+10,((16-i)*20-10));
            [tiles addChild:tempsprite];
        }
        themap = themap-20;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:18:31.110

在循环外预加载`tempsprite`变量：

```
CSprite *sprite0 = [CCSprite spriteWithSpriteFrameName:@"block0.png"];
CSprite *sprite1 = [CCSprite spriteWithSpriteFrameName:@"block1.png"]; 
```

然后在循环中引用它们：

```
 switch (currentscreen[x][y])
        {
            case 0:
                tempsprite = sprite0;
            break;
            case 1:
                tempsprite = sprite1;
            break;
        } 
```

甚至更好：

```
tempsprite = currentscreen[x][y] ? sprite1 : sprite0; 
```

哦，你的内循环应该是 24，而不是 26。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:25:31.767

你出错的地方是，你没有使用 CCSpriteBatchNode。CCSpriteBatchNode 将在一次绘制操作中绘制所有图块，而不是对每个图块执行一次绘制操作。缺点是，批处理节点中的每个图块都将具有相同的 zOrder（在某种程度上），并且每个批处理节点都必须使用一个源 spritesheet。所以基本上，如果您想要不同 zOrders 的不同层，或者不同层使用不同的源图像作为图块，您将必须创建多个批处理节点，每个节点一个。

[http://www.cocos2d-iphone.org/api-ref/0.99.5/interface_c_c_sprite_batch_node.html](http://www.cocos2d-iphone.org/api-ref/0.99.5/interface_c_c_sprite_batch_node.html)

# ruby - Ruby 嵌套哈希 - 确定单独的事件

> ID：15627133
> 
> 赞同：0
> 
> 时间：2013-03-26T00:11:52.623
> 
> 标签：ruby, windows, events, logging, hash

我在 XML 中有许多独特的事件，我已将它们转换为大约 300 个键的大型散列。这些键中的大多数的值都是哈希值，其中一些键的值又是哈希值。我不知道哈希嵌套会有多深。

我想将原始 300 的每个哈希及其所有键和值（无论它可能有多少）写入无模式数据库。

我已经设法编写了一个（混乱的）方法来输出每个哈希的值，无论它的值可能包含多少个哈希。

我现在面临的问题是我无法确定一个哈希从哪里开始，一个哈希从哪里结束。因此，我无法将单独的事件写入数据库，因为我只剩下所有哈希的输出。

如何确定哪些是单独的事件？

这是我的代码：

```
require 'crack'
require 'awesome_print'

def printingOutHash(inputHash)
#ap inputHash
  if inputHash.kind_of?(Array)
    puts "array"
    inputHash.each do |x|
      printingOutHash(x)
    end
  end

  if inputHash.kind_of?(Hash)
    inputHash.each do |k, v|
      if v.kind_of?(Hash)
        printingOutHash(v)
      else
        ap "#{k}: #{v}"
      end
    end
  end
end

  h = Crack::XML.parse("<Events><Event><System><Provider Name='Service Control Manager' Guid='{555908d1-a6d7-4695-8e1e-26931d2012f4}' EventSourceName='Service Control Manager'/><EventID Qualifiers='16384'>7036</EventID><Version>0</Version><Level>4</Level><Task>0</Task><Opcode>0</Opcode><Keywords>0x8080000000000000</Keywords><TimeCreated SystemTime='2013-03-25T05:00:38.021800000Z'/><EventRecordID>17629</EventRecordID><Correlation/><Execution ProcessID='476' ThreadID='3028'/><Channel>System</Channel><Computer>AMAZONA-ONIST5V</Computer><Security/></System><EventData><Data Name='param1'>Windows Modules Installer</Data><Data Name='param2'>stopped</Data><Binary>540072007500730074006500640049006E007300740061006C006C00650072002F0031000000</Binary></EventData></Event><Event><System><Provider Name='Service Control Manager' Guid='{555908d1-a6d7-4695-8e1e-26931d2012f4}' EventSourceName='Service Control Manager'/><EventID Qualifiers='16384'>7040</EventID><Version>0</Version><Level>4</Level><Task>0</Task><Opcode>0</Opcode><Keywords>0x8080000000000000</Keywords><TimeCreated SystemTime='2013-03-25T05:00:37.741000000Z'/><EventRecordID>17628</EventRecordID><Correlation/><Execution ProcessID='476' ThreadID='3028'/><Channel>System</Channel><Computer>AMAZONA-ONIST5V</Computer><Security UserID='S-1-5-18'/></System><EventData><Data Name='param1'>Windows Modules Installer</Data><Data Name='param2'>auto start</Data><Data Name='param3'>demand start</Data><Data Name='param4'>TrustedInstaller</Data></EventData></Event></Events>")

 printingOutHash(h['Events']['Event']) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:48:44.920

在处理复杂或大型数据文件时，将 XML 转换为哈希不是一个好主意，因为与搜索 XML 相比，遍历哈希不是很方便。[使用像Nokogiri](http://nokogiri.org)这样的正确工具解析 XML 非常简单。

基于您的 XML：

```
require 'nokogiri'

xml = "
<Events>
    <Event>
        <System>
            <Provider Name='Service Control Manager' Guid='{555908d1-a6d7-4695-8e1e-26931d2012f4}' EventSourceName='Service Control Manager'/>
            <EventID Qualifiers='16384'>7036</EventID>
            <Version>0</Version>
            <Level>4</Level>
            <Task>0</Task>
            <Opcode>0</Opcode>
            <Keywords>0x8080000000000000</Keywords>
            <TimeCreated SystemTime='2013-03-25T05:00:38.021800000Z'/>
            <EventRecordID>17629</EventRecordID>
            <Correlation/>
            <Execution ProcessID='476' ThreadID='3028'/>
            <Channel>System</Channel>
            <Computer>AMAZONA-ONIST5V</Computer>
            <Security/>
        </System>
        <EventData>
            <Data Name='param1'>Windows Modules Installer</Data>
            <Data Name='param2'>stopped</Data>
            <Binary>540072007500730074006500640049006E007300740061006C006C00650072002F0031000000</Binary>
        </EventData>
    </Event>
    <Event>
        <System>
            <Provider Name='Service Control Manager' Guid='{555908d1-a6d7-4695-8e1e-26931d2012f4}' EventSourceName='Service Control Manager'/>
            <EventID Qualifiers='16384'>7040</EventID>
            <Version>0</Version>
            <Level>4</Level>
            <Task>0</Task>
            <Opcode>0</Opcode>
            <Keywords>0x8080000000000000</Keywords>
            <TimeCreated SystemTime='2013-03-25T05:00:37.741000000Z'/>
            <EventRecordID>17628</EventRecordID>
            <Correlation/>
            <Execution ProcessID='476' ThreadID='3028'/>
            <Channel>System</Channel>
            <Computer>AMAZONA-ONIST5V</Computer>
            <Security UserID='S-1-5-18'/>
        </System>
        <EventData>
            <Data Name='param1'>Windows Modules Installer</Data>
            <Data Name='param2'>auto start</Data>
            <Data Name='param3'>demand start</Data>
            <Data Name='param4'>TrustedInstaller</Data>
        </EventData>
    </Event>
</Events>" 
```

这是我如何获取数据的开始：

```
doc = Nokogiri::XML(xml)
pp doc.search('Event').map { |event|

  system_provider_node = event.at('System Provider')

  system = {
    provider: {
      name: system_provider_node['Name'],
      guid: system_provider_node['Guid'],
      event_source_name: system_provider_node['EventSourceName']
    }
  }

  event_data = event.search('EventData Data').map{ |data|
    {
      name: data['Name'],
      text: data.text
    }
  }

  {
    system: system,
    event_data: event_data
  }    

} 
```

结果是：

```
[{:system=>
  {:provider=>
    {:name=>"Service Control Manager",
      :guid=>"{555908d1-a6d7-4695-8e1e-26931d2012f4}",
      :event_source_name=>"Service Control Manager"}},
  :event_data=>
  [{:name=>"param1", :text=>"Windows Modules Installer"},
    {:name=>"param2", :text=>"stopped"}]},
{:system=>
  {:provider=>
    {:name=>"Service Control Manager",
      :guid=>"{555908d1-a6d7-4695-8e1e-26931d2012f4}",
      :event_source_name=>"Service Control Manager"}},
  :event_data=>
  [{:name=>"param1", :text=>"Windows Modules Installer"},
    {:name=>"param2", :text=>"auto start"},
    {:name=>"param3", :text=>"demand start"},
    {:name=>"param4", :text=>"TrustedInstaller"}]}] 
```

您不必构建散列数组。对于每一个`<Event>`，您都可以剥离元素并在数据库的各个表中构建单独的行。这真的取决于你的想法。

# android - 钛 iPhone 应用程序

> ID：15627140
> 
> 赞同：-1
> 
> 时间：2013-03-26T00:12:42.547
> 
> 标签：android, titanium, new-window

我需要快速回复，请帮帮我，我只需要知道 iPhone Titanium 中的一个非常基本的事情，即如何在按钮单击时调用新窗口。我的应用程序在 android 上运行，我使用这些代码行来调用另一个窗口，但它不能在 iPhone 上运行。

```
var MainMenuScreen = require('/ui/iphone/MenuScreen/MainMenuScreen');
MainMenu = new MainMenuScreen(json);
MainMenu.open(); 
```

但它不适用于iPhone，请快速帮助我。因为它只是我的登录屏幕，所以我必须在许多窗口和视图之间进行操作，所以我怎么能在 iPhone 上做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:37:23.380

穆罕默德，在您的代码中进行以下更改

```
var MainMenuScreen = require('ui/iphone/MenuScreen/MainMenuScreen'); 
```

我已从您的路径中删除了“/”。因为它只是 android 所需要的。阅读[全局方法要求](http://docs.appcelerator.com/titanium/latest/#!/api/Global-method-require)。上面的代码也适用于android。

您也可以参考[这个答案](https://stackoverflow.com/questions/14949025/titanium-mobile-cant-navigate-between-pages/14949895#14949895)，它讲述了窗口之间的导航。

希望这解决了您的问题

# eclipse - 如何在没有 f5 键的 mac book air 上使用 eclipse 中的“step into”

> ID：15627150
> 
> 赞同：1
> 
> 时间：2013-03-26T00:13:48.743
> 
> 标签：eclipse

我正在mac book air上使用eclipse helios进行开发。`F5`我想使用但没有`F5`在mac book air上进入代码。有人知道我应该按什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:20:24.957

重新绑定键：Window -> Preferences -> General -> Keys

# meteor - 避免使用 Session.set

> ID：15627153
> 
> 赞同：3
> 
> 时间：2013-03-26T00:13:54.917
> 
> 标签：meteor

我正在使用流星路由器编写一个简单的流星应用程序。我的问题是路由器知道请求参数，但模板不知道。所以我总结了这样的约定：

```
Meteor.Router.add({'/projects/:id', function(id) {
    Session.set('currentProjectId', id);
    return 'project';
}

Template.project.project = function() {
    return Projects.findOne(Session.get('currentProjectId'));
} 
```

有没有更简洁的方法来获取模板级别的当前请求 ID 参数，以避免所有这些会话变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T12:03:16.143

会话对象是一个全局（单音）注册表。有很多不使用它们的原因（只是谷歌“为什么（单调，全局对象，注册表模式）（是|是）不好”。

在 Meteor 中，情况有点特殊。Session 对象是一种非常简单的反应式存储变量的方法。这是您不在应用程序中使用全局变量的唯一原因。假设您不需要反应性-您会将其设为全局变量吗？可能不是。

您错误地使用会话将变量的内容从代码中的一个位置获取到另一个位置（作为其他两种不相关对象之间的内容的隐形“神秘桥梁”）。这既不是“流星”的方式，也不是干净的使用方式（参考上面的搜索结果）。这只是一个简单而肮脏的可能性。

**更清洁的方法**

如何避免这种情况：创建自己的反应变量。Meteor 为它提供了所有的手段，而且这样做真的很容易：

```
(function () {
    var currentProject;
    var currentProjectDependency = new Deps.Dependency();

    Meteor.Router.add({'/projects/:id', function(id) {
        currentProject = id;
        currentProjectDependency.changed();
        return 'project';
    }

    Template.project.project = function() {
        Deps.depend(currentProjectDependency);
        return Projects.findOne(currentProject);
    }
}()); 
```

现在我们不使用会话来存储信息，但也具有反应性。此外，我们不会污染全球空间。请注意，最新版本的 Meteor 会自动添加闭包。

这个例子可以扩展到更复杂的用例，反应性跨越多个对象（例如控制器）。看看我的[导航包](https://github.com/InnoAccel/ia-navigation)作为更复杂的例子。

**使用会话的原因**

那么为什么 Session 存在呢？两个原因：

为简单起见。Meteor 努力对初学者友好。由于对反应性和架构的理解，我描述的方法有点复杂。大多数项目都小到不关心这一点。

但更大的项目也可以使用 session: 来存储跨页面重新加载的信息，否则您无法恢复。在我看来，这是使用 session 的唯一原因。会话内容在来自代码推送的页面重新加载中“持久化”。如果这算坏事呢？不，因为只有一个对象依赖于会话的内容。请注意，这不适用于您的示例，因为您可以轻松地恢复信息。

# nginx - 亚马逊 Linux + Nginx + PHP 5.4

> ID：15627155
> 
> 赞同：2
> 
> 时间：2013-03-26T00:13:58.937
> 
> 标签：nginx, amazon-ec2, amazon

如何在 amazon linux ex2 上使用 nginx 将我的 php 版本更新到 5.4？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:22:08.550

`sudo yum upgrade php54-fpm php54-common -y`（假设您使用的是 PHP-FPM，这是与 Nginx 一起使用它的最常见原因）。尽管这应该作为配置/编排过程的一部分来完成。手动单独配置 EC2 表明您正在错误地使用该平台。

# python - FPM 和 WSGI 的区别

> ID：15627159
> 
> 赞同：5
> 
> 时间：2013-03-26T00:14:21.840
> 
> 标签：python, fastcgi, wsgi, php

这是我到目前为止所理解的。

PHP-FPM 和 WSGI 是 FastCGI 的层吗？

那么说 WSGI 是 Python 的 FPM 是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:02:00.603

WSGI 实际上并不是 FastCGI 上的一个层，而是一种用于编写 Python Web 应用程序的规范，该规范足够通用，可以附加到许多 Web 服务器或适配器，而这些服务器或适配器又可以与许多其他技术（*包括*FastCGI）对话。但是 FastCGI 本身，它是一个 Web 服务器连接到一个长时间运行的进程的协议，根本不需要参与 WSGI 安装——例如`mod_wsgi`Apache 模块，它直接从 Apache 将 WSGI 暴露给你的 Python 应用程序，并且不要求您运行一个单独的长时间运行的进程。

WSGI 在[PEP 333](http://www.python.org/dev/peps/pep-0333/)中定义。取自该规范的一个简单应用程序如下所示：

```
def simple_app(environ, start_response):
    """Simplest possible application object"""
    status = '200 OK'
    response_headers = [('Content-type', 'text/plain')]
    start_response(status, response_headers)
    return ['Hello world!\n'] 
```

# javascript - 在 Angular.js 中的控制器之间共享资源

> ID：15627161
> 
> 赞同：4
> 
> 时间：2013-03-26T00:14:38.357
> 
> 标签：javascript, rest, model-view-controller, angularjs

简单的问题。

我有这个资源：

```
var Company = $resource("/company/:_id", {_id: "@_id"}); 
```

我想在不同的控制器之间共享。

现在，我正在复制粘贴东西，但我还没有到我想添加更多代码和使用[角度共享服务的地步](https://stackoverflow.com/questions/12772255/angularjs-using-shared-servicewith-resource-to-share-data-between-controller)

还有其他选择吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T00:39:27.683

只需放入服务或工厂即可。

```
angular.module("myApp", []).
  factory("CompanyResource", function ($resource) {
    return $resource("/company/:_id", {_id: "@_id"}); 
  }); 
```

然后你可以在控制器中使用它

```
function MapCtrl($scope, $resource, $location, CompanyResource) {
   ...
   CompanyResource.query();
   ...
} 
```

请注意，工厂名称前不需要 $ 符号。

# javascript - 使用 onClick 下载文件？

> ID：15627165
> 
> 赞同：0
> 
> 时间：2013-03-26T00:15:30.533
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension, content-script

我正在学习制作我的第一个 google chrome 扩展程序。有一个网站有一个名为 songPath 的变量。I want to create a new button on the screen that when selected will download the url string inside songPath, instead of just opening it and playing it in the browser.

```
<div class="player">
    <script type="text/javascript">
    var songPath = "http://songurl.mp3";
    </script>
</div> 
```

任何人都可以向我指出一些执行类似操作的脚本代码或示例。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:49:15.880

Chrome 的“内容脚本”可以访问 DOM，但不能访问页面上的 JavaScript 环境。但是你可以通过注入一个引用你的脚本的脚本标签来做到这一点。

这里有一些很好的例子：[https ://stackoverflow.com/a/9517879/989516](https://stackoverflow.com/a/9517879/989516)

# javascript - css悬停时出现奇怪的噪音

> ID：15627172
> 
> 赞同：1
> 
> 时间：2013-03-26T00:16:11.953
> 
> 标签：javascript, jquery, css

我想在给开发者发电子邮件之前我会问你们所有人。是否有人熟悉 CSS 悬停时屏幕上出现的奇怪“噪音”？只有当我在 cssMap 函数中使用变量而不是数字时才会发生这种情况，如下所示。我正在使用[Winston Wolf 的 CSS Clickable Map](http://winstonwolf.pl/clickable-maps)。在这里查看实际操作：http: [//animalnecessity.com/company/where-to-buy](http://animalnecessity.com/company/where-to-buy)

```
var windowWidth=J(window).width();
            console.log(windowWidth);

            if (windowWidth>500 && windowWidth<750){
                var size= 750;
            }
            else if (windowWidth>750 && windowWidth<960){
                var size= 850;
            }
            else if (windowWidth>960){
                var size= 960;
            }
            else
                console.log('Not working');

            J(function(J)   
            {       
                J('#map-usa').cssMap(       
            {           
                'size' : size,          
                'tooltips' : 'floating',            
                'cities': false,                    
            });     
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:26:37.927

您的大陆图片似乎已损坏：[http ://animalnecessity.com/skin/frontend/default/animalnecessity/cssmap-continents/continents-960.png](http://animalnecessity.com/skin/frontend/default/animalnecessity/cssmap-continents/continents-960.png)

![大陆](../Images/6585a08fc0edf2c650f84fdbd93ab0ba.png)

它在 Chrome 中： ![在此处输入图像描述](../Images/414184ccca50d886090da1df77d57e0c.png)

# sql - 在sql表之间复制数据

> ID：15627173
> 
> 赞同：0
> 
> 时间：2013-03-26T00:16:17.503
> 
> 标签：sql, sql-server, sql-server-2012

我正在使用 sql server 2012 并拥有一个数据库。

在这个数据库中，我有 2 个表。1 表后端实时数据。另一个结构完全相同，但有一个临时表 - 没有实时系统对其进行处理。

我想编写一个 sql 查询以包含在存储过程/sql 作业中，该作业针对临时表运行并将数据更新/插入到实时表中。如果记录存在于实时表中，则更新它，如果没有插入到它。由于登台表每天需要运行时可能有大约 100,000 个 - 我担心性能，特别是实时表被锁定的可能性。在查询运行时，实时表可能正在从另一个源更新，因此可能需要在行级别进行锁定。

我已经概述了这个过程和我的担忧，所以我希望在编写查询时得到帮助。我不需要影响实时表的性能，但不确定在传输数据时没有其他系统更新每一行的行。我怎么能用 sql 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:00:52.367

你想要一个合并：

```
merge into Emp2 as Target
    using emp as Source on Target.FirstName=Source.Firstname and Target.LastName=Source.lastName
    when matched then 
        update set Target.FirstName=Source.FirstName,
                        Target.LastName = Source.LastName
    when not matched then
        insert (FirstName,LastName, LastTraining) values (Source.FirstName,Source.LastName,Source.LastTraining); 
```

# ruby-on-rails - 在 link_to 中传递参数

> ID：15627174
> 
> 赞同：3
> 
> 时间：2013-03-26T00:16:18.220
> 
> 标签：ruby-on-rails, parameters, link-to

好的，这听起来真的很微不足道，但我似乎无法做到正确。我只想将参数 :invite_code 与视图中的 link_to 一起传递给不相关的控制器。

看法：

```
<td><%= link_to 'Join', :action => 'invite', :invite_code => project.invite_code , :method => :post %></td> 
```

路线：

```
match 'invite' => 'database#invite', :via => :post 
```

数据库控制器：

```
def invite ...
  puts params
end 
```

控制台上的调试输出如下：

```
{"_method"=>"post", "authenticity_token"=>"..........", "action"=>"invite", "controller"=>"database"} 
```

一切正常，除了我似乎无法传递参数。我是菜鸟，但我在这条路上被困得太久了。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:19:25.770

尝试以下操作：

```
<%= link_to "Join", invite_path(invite_code: project.invite_code), method: :post %> 
```

您可能需要更新您的路线：

```
post 'invite' => 'database#invite', as: :invite 
```

# php - 在 Concrete5 中按多个 cID 过滤页面

> ID：15627175
> 
> 赞同：2
> 
> 时间：2013-03-26T00:16:28.643
> 
> 标签：php, concrete5

PageList 对象或concrete5 中的其他地方是否有使用PageID/ciD 数组取回多个页面的方法？就像是：

```
Page::getByIDs( array(23,343,44,334,6) ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:25:54.283

所以我想通了。我想这是我第一次回答自己的问题。耶我！

```
Loader::model('page_list');
$pl = new PageList();
$pl->filter('p1.cID', array(1,2,65,69,70), '=');
return $pl->get(); 
```

p1.cID 是 Concrete 正在生成的 SQL 查询的一部分。它是 page.cid 的别名和列名。该数组就是您要查找的 pageID 数组。"=" 是运算符（不是我认为的 IN。）

它有助于阅读文档：

[http://www.concrete5.org/documentation/developers/pages/searching-and-filtering](http://www.concrete5.org/documentation/developers/pages/searching-and-filtering)

# ruby-on-rails - ActiveMerchant::ConnectionError 与 NelixTransax TransaxGateway

> ID：15627179
> 
> 赞同：0
> 
> 时间：2013-03-26T00:16:48.373
> 
> 标签：ruby-on-rails, activemerchant

我已经尝试了[这里](https://github.com/Shopify/active_merchant#usage)的示例用法（在 rails 控制台中）并且它工作正常，但是当我尝试使用它并改变它时（对于 Nelix 的演示具有凭据）它不起作用。我得到的只是一个 ConnectionError （经过很长时间）。

```
gateway = ActiveMerchant::Billing::TransaxGateway.new(
            :login => 'demo',
            :password => 'password') 
```

当我浏览到他们的 test_url（与他们的 live_url 相同）时，它会立即返回。我怎样才能得到这个工作？任何调试这个的提示也将不胜感激。[我已经在 Rails 3.2.13 下使用 Ruby 1.9.3 和 2.0.0 进行了尝试。]

# asp.net - Global.asax 中的 Application_Error 不会触发

> ID：15627185
> 
> 赞同：1
> 
> 时间：2013-03-26T00:17:42.173
> 
> 标签：asp.net, vb.net, global-asax

在本地，应用程序错误执行良好（捕获错误然后将其放入数据库或通过邮件发送）。但是当我将它添加到我们的网站时，它不会执行 application_error 下的代码。任何帮助为什么它不会触发？

```
Sub Application_Error(ByVal sender As Object, ByVal e As EventArgs)

    Dim cookie As HttpCookie = Current.Request.Cookies("id")
    Dim Code As HttpCookie = Current.Request.Cookies("code")
    Dim ErrorMsg() As String
    If cookie Is Nothing Then
    Else

        Dim cDBConnection As clsDBConnection = New clsDBConnection(GetConnection, enumEgswFetchType.DataReader)
        If IsNothing(Code.Value) Then
            ErrorMsg = {0, Request.UserHostAddress.ToString, Me.Session.SessionID, Context.Request.RawUrl, Date.Now, Server.GetLastError.GetBaseException.Message, Server.GetLastError.GetBaseException.GetType.ToString, Server.GetLastError.GetBaseException.Data.ToString, Server.GetLastError.GetBaseException.Source, Server.GetLastError.GetBaseException.TargetSite.ToString, Server.GetLastError.GetBaseException.StackTrace}
            cDBConnection.InsertErrorLog(ErrorMsg(0), ErrorMsg(1), ErrorMsg(2), ErrorMsg(3), ErrorMsg(4), ErrorMsg(5), ErrorMsg(6), ErrorMsg(7), ErrorMsg(8), ErrorMsg(9), ErrorMsg(10))
            Response.Redirect("~/Error.aspx")
        Else
            ErrorMsg = {Code.Value, Request.UserHostAddress.ToString, cookie.Value, Context.Request.RawUrl, Date.Now, Server.GetLastError.GetBaseException.Message, Server.GetLastError.GetBaseException.GetType.ToString, Server.GetLastError.GetBaseException.Data.ToString, Server.GetLastError.GetBaseException.Source, Server.GetLastError.GetBaseException.TargetSite.ToString, Server.GetLastError.GetBaseException.StackTrace}

            cDBConnection.InsertErrorLog(ErrorMsg(0), ErrorMsg(1), ErrorMsg(2), ErrorMsg(3), ErrorMsg(4), ErrorMsg(5), ErrorMsg(6), ErrorMsg(7), ErrorMsg(8), ErrorMsg(9), ErrorMsg(10))
             Response.Redirect("~/Error.aspx")
        End If
        'End If

    End If

End Sub 
```

# android - 完成侦听器上的 Android 媒体播放器未按预期工作

> ID：15627190
> 
> 赞同：3
> 
> 时间：2013-03-26T00:18:28.307
> 
> 标签：android

我有一个在后台服务中运行的媒体播放器。MP3 文件是从我桌面上的服务器通过 TCP 设置的。调试应用程序时，歌曲被发送和接收。歌曲的选择由三个活动构成。专辑列表（列表视图）活动将您带到歌曲列表（列表视图）活动。您可以通过选择复选框并在选择时单击播放按钮来选择歌曲。播放按钮绑定到服务，并通过 tcp 请求歌曲。所有歌曲都添加到手机的存储空间。这是通过 tcp 接收 byte[] setn 的方法（这是 myMediaPlayer 类中的形式：

```
public void AddSong(byte[] toParse, String songName)
        {
            File cacheDir = new File(android.os.Environment.getExternalStorageDirectory(),"MusicStreamCache");
            if(!cacheDir.exists())
                cacheDir.mkdirs();

            File temp = new File(cacheDir, songName);
            FileOutputStream fos;
            try {
                fos = new FileOutputStream(temp);
                fos.write(toParse);
                fos.close();
            } catch (FileNotFoundException e) {

                e.printStackTrace();
            } catch (IOException e) {

                e.printStackTrace();
            }
            songs.add(temp);
            if(!mediaPlayer.isPlaying() && !isPaused)
            {
                MediaPlay();
            }

        }

        public void AddSong(File filein)
        {
            filein.deleteOnExit();
            songs.add(filein);
            if(!mediaPlayer.isPlaying() && !isPaused && CurrentSong == 0)
            {
                MediaPlay();
            }
        }

        public void MediaPlay()
        {
            if(!mediaPlayer.isPlaying() && CurrentSong <= songs.size())
            {
                mediaPlayer.reset();
                try{
                      @SuppressWarnings("resource")
                    FileInputStream fis = new FileInputStream(songs.get(CurrentSong));
                      mediaPlayer.setDataSource(fis.getFD());

                      mediaPlayer.prepare();
                      int length = mediaPlayer.getDuration();
                      mediaPlayer.start();
                      if(CurrentSong <= songs.size())
                      {
                           CurrentSong ++;   
                      }

                    }
                catch(Exception err)
                {
                    @SuppressWarnings("unused")
                    String error = err.getMessage();
                }

                mediaPlayer.setOnCompletionListener(completionListener);

            }
        }

        OnCompletionListener completionListener = new OnCompletionListener(){

            @Override
            public void onCompletion(MediaPlayer mp) {
                if(CurrentSong <= songs.size())
                {
                    MediaPlay();
                }

            }

         }; 
```

当手机连接到我的桌面并且我正在调试应用程序时，一切都按预期工作。我可以从专辑中添加一首歌曲，它会下载并播放。我可以添加专辑中的几首歌曲（或所有歌曲），它们将一首接着一首地下载和播放。我可以从几张不同的专辑中选择歌曲，它们都会一个接一个地下载并按顺序播放，即完成后的听众正在按预期工作。

当我选择从 Eclipse 运行我的应用程序（没有调试）然后从桌面分离（以测试 WiFi 信号何时弱或在房子周围的不同地方）时，会出现问题。如果我选​​择一首歌曲，它会下载并播放正常。但是，如果我选择多首歌曲，第一首歌曲播放正常，但其他歌曲将无法播放。当第一首歌曲停止播放下载歌曲列表中的下一首歌曲播放并且新选择的歌曲下载但未播放时，他们正在下载好像我选择了一首新歌曲。，我似乎无法弄清楚为什么会这样？

因为我在调试时没有这些问题。我想知道我的服务在未插入桌面时是否失去焦点？还是我错过了一些明显的东西？我为我的媒体播放器添加了部分唤醒锁定，但他似乎并没有缓解问题？？任何提示将不胜感激:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T01:12:01.243

找到了答案:-)

似乎拥有一个包含媒体播放器对象和一些自定义方法的媒体播放器类正在阻止 onCompletionListener 工作（调试时除外）。为了解决这个问题，我的服务现在实现了 OnCompletionListener，并且直接在服务中创建了一个媒体播放器对象。在 OnComplete 方法中，我释放当前的媒体播放器并创建一个新的。这一切都按预期工作。

如果有人能解释为什么我原来的解决方案不起作用，我想首先更好地理解我做错了什么！！！

# objective-c - 在Objective-C中循环遍历X个嵌套数组的动态方式

> ID：15627196
> 
> 赞同：1
> 
> 时间：2013-03-26T00:19:21.420
> 
> 标签：objective-c, loops, recursion, cocos2d-iphone, nsmutablearray

我正在创建一个 iPhone 游戏，并创建了 Line 对象，每个对象都有自己的属性，例如它们的 (x,y) 坐标和一个“连接”数组，该数组详细说明了当前接触“这条”线的所有其他线。

我想要做的是从一条起始线（Line1）开始，遍历它的其他连接线数组，然后从那里随机选择另一条线（比如 Line2）。然后我想重复这个逻辑并查看所有 Line2s 连接的线阵列并选择另一条连接的线，除了它刚刚来自的线（即不是 Line1）。简而言之，我想知道一组线是否完成了一个'电路'，即最后一行==第一条所以在

**伪代码：**

Line1->Line1Array->Line2->Line2Array->Line3->Line3Array->Line4->Line4Array->Line1->停止！

**视觉表现：**

![线条](../Images/b1986c4d00628eb883c608b3c8c640f0.png)

我已经设法通过对我在下面展示的这个特定的视觉表示进行硬编码来让它工作。问题是，一个电路可能并不总是由 4 个面组成，而且这个解决方案似乎不是特别健壮或优雅。如果我有一种方法可以遍历 X 个数组并简单地返回是否检测到电路，那就太好了。我遇到了使用递归，但对如何将它应用于这个特定问题感到困惑。

**实际代码：**

```
for(Line* line1 in allLines) {

   // contains all lines connected to this line
   NSMutableArray* connectedTo = [line1 getConnectedTo];

// lets loop through all lines connected to our line1
for(Line* line2 in connectedTo) {

      // contains all lines connected to line2
      NSMutableArray* secondConnectedTo = [line2 getConnectedTo];

// lets loop through all lines connected to line2
for(Line* line3 in secondConnectedTo) {

 // don't look back at line1 from line2
 if([line3 getLineCreationNumber] != [line1 getLineCreationNumber]) {

     // contains all lines connected to the 3rd line
     NSMutableArray* thirdConnectTo = [line3 getConnectedTo];

// lets loop through all lines connected to our 3rd line
for(Line* line4 in thirdConnectTo) {

      // contains all lines connected to the 4th line
      NSMutableArray* fourthConnectTo = [line4 getConnectedTo];

// 'line5' here is actually the same as line1 so check to confirm for circuit
for(Line* line5 in fourthConnectTo) {                   
      if([line5 getLineCreationNumber] == [line1 getLineCreationNumber]) {
       CCLOG(@"CIRCUIT FOUND");
}}}}}}} 
```

**更新代码：**

嗨@dasblinkenlight 感谢您的回答，它很有用。我觉得我非常接近解决这个问题，但仍然遇到一个问题。这是到目前为止的代码（注意我最初按照指令传递了一个空数组）：

```
-(bool) findCircuit:(NSMutableArray*) circuit {

for(Line* l in [self getConnectedTo]) {

// ensure line isn't in circuit found so far
if(![circuit containsObject: self]) {
    // add connected line to end of circuit
    [circuit addObject: l];
    // call find circuit on the latest connected line
    if([l findCircuit: circuit])
    return YES;
} else {
    [circuit removeLastObject];
    continue;
}}} 
```

我仍然对后面的部分感到困惑，即何时返回是/否以及这如何联系起来。我可以通过输出行 ID 看到，当有 3 行时，这些行正在按预期被拖网。这是 3 行的流程：

线路1->线路2->线路1->线路2->线路3->线路2

不幸的是，当 4 行链接时，程序变得非常慢（我可以看到创建了许多线程），我得到了以下循环：

Line1->Line2->Line1->Line4->Line3->Line4->Line1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T00:34:45.950

递归是朝着正确方向迈出的一步。正确应用它的诀窍是认为您一次使用一行，并假装您的递归方法已经完成。当您完成时，该方法将完成，因此您的代码可以工作（这听起来有点像魔术，一开始是可以的）。

首先，将此方法添加到您的`Line`类中：

```
-(BOOL)findCircuit:(NSMutableArray*)circuit {
    ...
} 
```

该`circuit`数组将包含您到目前为止找到的行列表；调用者会将最初为空的值传递`NSMutableArray`给您的函数。对象本身将`Line`提供您需要尝试的连接线。连接线上会有一个循环。在每次迭代中，您的代码将

*   检查连接的线路是否*不在*`circuit`您目前找到的线路上
*   如果不是，将连接的线添加到 的末尾`circuit`，**然后调用`findCircuit`**它。这就是魔法发生的地方：你还没有写完你的方法，但你可以调用它！
*   如果`findCircuit`返回`YES`，您的函数`YES`也会返回
*   如果`NO`返回，您的循环将删除您添加到的最后一行`circuit`，然后继续下一行
*   一旦循环中的所有连接线都用尽而没有返回`YES`，该方法将返回`NO`给它的调用者。

就是这样，真的！在要创建电路的行上调用此方法，将其传递给 empty `NSMutableArray`，然后查看该方法是否返回`YES`。如果是这样，您传递的数组将包含您的电路。

# perl - 如何从模板工具包中的数组中获取元素？

> ID：15627199
> 
> 赞同：5
> 
> 时间：2013-03-26T00:19:31.190
> 
> 标签：perl, catalyst, template-toolkit

```
[% a = ['one', 'two', 'four'] %]
[% a.1 %] # it prints two. OK! 
```

但是当我想要这个时：

```
[% a = ['one', 'two', 'four'] %]
[% n = 1 %]
[% a.n %] # it doesn't work 
```

如何使用 var n 从数组中获取定义的元素？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T11:40:51.150

Template Toolkit 通过点运算符对列表和哈希元素具有相同的访问权限。在您的代码中，TT 认为您希望通过键“n”在哈希 a 中获取值。解决方案是在点运算符中的实际变量之前使用前缀 $，在您的情况下：

```
[% a = ['one', 'two', 'four'] %]
[% n = 1 %]
[% a.$n %] # now it works 
```

# php - 通过 Ajax 将多个 PHP 变量发布到 PHP 处理程序

> ID：15627202
> 
> 赞同：0
> 
> 时间：2013-03-26T00:19:44.657
> 
> 标签：php, jquery, ajax, variables

`<span>`通过 Ajax 将多个 php 变量（或数据库表字段）从用作图标的元素传递到我的处理程序的最佳方法是什么？提前感谢您的帮助！

桌子

```
art_id  art_title  art_company    art_featured
1       lorem 1    lorem ipsum 1  1
2       lorem 2    lorem ipsum 2  0 
```

HTML/PHP

```
<section class="row">
    <?php
    $sql_categories = "SELECT art_title, art_company, art_id, art_featured FROM app_articles"; 

        if($result = query($sql_categories)){
            $list = array();

            while($data = mysqli_fetch_assoc($result)){
                array_push($list, $data);
            }

            foreach($list as $i => $row){ 
            ?>
                <div class="row">
                    <div class="column two"><p><?php echo $row['art_title']; ?></p></div>
                    <div class="column two"><p><?php echo $row['art_company']; ?></p></div>
                    <div class="column one"><span id="<?php echo $row['art_id']; ?>" class="icon-small star"></span></div>
                </div>
            <?php
            }
        }
        else {
            echo "FAIL";
        }
    ?>
    </section> 
```

jQuery

```
 $(".star").click(function(){

        var art_id = $(this).attr('id');

        $.ajax({
        type: "POST",
        data: {art_id:art_id},
        url: "ajax-feature.php",
        success: function(data){
            if(data != false) {

            } 
            else {

            }  
        }
        });

    }); 
```

MYSQL/PHP

```
 if(isset($_POST['art_id'])) {

    $sql_articles = "UPDATE `app_articles` SET `art_featured` = 1 WHERE `art_id` =".$_POST['art_id'];

    if(query($sql_articles)) {
        echo "YES";
    }
    else {
        echo "NO";
    }
}
else {
    echo "FAIL";
} 
```

我想要做的是将字段的值`art_featured`从 0 更改为 1，比如如果`art_featured`是 0，那么我想将数据库字段更新为 1，反之亦然。我正在`article_id`使用 jquery ajax 发送 via 帖子，但我不知道如何发送该`article_feature`字段。因为我猜最后会做的是这样的事情

```
 if($_POST['art_featured']==0) {
        $sql_articles = "UPDATE `app_articles` SET `art_featured` = 1 WHERE `art_id` =".$_POST['art_id'];

    }
    else {
        $sql_articles = "UPDATE `app_articles` SET `art_featured` = 0 WHERE `art_id` =".$_POST['art_id'];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:27:15.907

```
 ('span').click(function(){

    jQuery.ajax({type:'POST',
    data:'id=8391283&length=8943&north='+variable+'&typ=normal,

    url:'yourUrl',
    success:function(data,textStatus){alert('success')},
    error:function(XMLHttpRequest,textStatus,errorThrown){}
    }); 
```

});

这是使用多个参数发出 ajax 请求的一种可能方式

# jquery - 内容中的具体5页- 不可编辑

> ID：15627211
> 
> 赞同：0
> 
> 时间：2013-03-26T00:20:31.413
> 
> 标签：jquery, html, loader, editing, concrete5

我正在使用 jquery 将我的内容加载到 div 中，如下所示：

```
function loadContent(elementSelector, sourceUrl) {
$(""+elementSelector+"").html('<img src="preloader.gif " />')
$(""+elementSelector+"").load(""+sourceUrl+"");
} 
```

当我将页面包含到 C5 时，一切仍然有效，除了页面不可编辑。如果我手动打开内容页面，例如 MY_PATH/index.php?cID=116 或通过仪表板，它们是可编辑的。

有人知道什么可能会产生这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:20:12.583

我不确定为什么它会在一个 url 而不是另一个 url 上工作——我唯一能想到的可能是你的 sourceUrl 变量是从浏览器中获取 url，而你正在调用的加载函数不会像“漂亮的 url”，但与“丑陋的”(index.php?cID=123) 一样好用？

另外，请检查您的浏览器控制台（Chrome/Safari 中的开发人员工具，Firefox 中的 Firebug），看看是否有任何 javascript 错误——这也可能导致问题（尽管我不知道为什么它有时会起作用而不是其他人）。

# java - 拆分和存储数组的正确方法？

> ID：15627212
> 
> 赞同：0
> 
> 时间：2013-03-26T00:20:31.557
> 
> 标签：java, arrays, string, arraylist, joptionpane

我最近在这里问了一个问题，并学习了如何拆分我的阵列。现在我正在处理存储分离的数组。我知道这段代码可能是非常错误的，因为我只是想自己弄清楚。此代码的预期目的是查看在拆分数组（最多 10 个名称和 10 度）后是否可以存储输入。System.out 的目的是查看它们是否正在存储。我不断收到无法找到符号结果的错误。任何帮助表示赞赏。

```
import java.util.ArrayList;
import java.util.Arrays;
import javax.swing.JOptionPane;

public class PeerTutoring
{
public static void main(String[] args)
{
    ArrayList<String> list = new ArrayList<String>();

    int a = 0;
    int b = 1;
    int c = 0;
    int d = 1;

    for(int i=0;i<20;i++) {
        String line;
        line = JOptionPane.showInputDialog("Please enter tutor name and their highest earned degree.");
        String[] result = line.split("\\s+");
        String[] name = new result[a];
        String[] degree = new result[b];
        a++;
        b++;
        System.out.println(name[c]);
        System.out.println(degree[d]);
        c++;
        d++;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:22:48.730

`new result[a]`是...某种...语法，用于初始化包含`result`实例的数组，大小为`a`。但这不是你的意思——你没有一个名为 的类`result`，你只想从名为 的数组中*取出*`result`元素。正确的？

只需删除, 和声明中`new`的额外内容。`[]``name`

```
String name = result[a];
String degree = result[b]; 
```

我想您会发现[Java 教程：数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)非常有用。

* * *

未来使用提示：如果你想打印一个数组，你不需要做所有这些跑腿的工作。只需使用`Arrays#toString()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:36:27.717

除了马特鲍尔之前说的，你还需要做

 `````
 System.out.println(name);
    System.out.println(degree); 
````  `并删除 a++、b++、c++ 和 d++。原因是，当您拆分时，result[0] 和 result[1] 分别保存 name 和 degree 的值。

您将需要一个单独的机制来将这些值存储在列表中。``

# xpath - 使用 xpath 获取所有图像

> ID：15627216
> 
> 赞同：3
> 
> 时间：2013-03-26T00:20:51.943
> 
> 标签：xpath

我正在尝试使用 Hpple 和 xpath 从您的 HTML 列表中获取所有图像，但没有任何好处

我的 HTML 节点像这样

```
<ul id="week_slider">
      <div id="week_program_img">
            <img id="Img1" src="imageurl">    
      </div>
</ul> 
```

但有时（img）标签在（a）这样的标签内

```
<a href="url">
       <img id="Img1" src="imageurl"> 
</a> 
```

当将此路径放入 xpath 时，我只能获取图像（不在“a”标签中）

```
//ul[@id='week_slider']//div[@id='week_program_img'] 
```

当将此路径放入 xpath 时，我也可以获得图像（在“a”标签中）

```
//ul[@id='week_slider']//div[@id='week_program_img']/a 
```

但我想同时获取所有图像，无论是否带有标签，我如何在同一个 xpath 中做到这一点？我尝试像这样使用 (or) 、 (|) 、 (and) 运算符

```
//ul[@id='week_slider']//div[@id='week_program_img'] | //ul[@id='week_slider']//div[@id='week_program_img']/a 
```

但它不能正常工作

我的完整代码：

> NSString *tutorialsXpathQueryStringimage1 = @"//ul[@id='week_slider']//div[@id='week_program_img']";
> 
> ```
> NSArray *newsNodesimage1 = [newsParser searchWithXPathQuery:tutorialsXpathQueryStringimage1];
> 
> NSMutableArray *image1 = [[NSMutableArray alloc] initWithCapacity:0];
> for (TFHppleElement *element in newsNodesimage1) {
> 
>     Tutorial *tutorial = [[Tutorial alloc] init];
>     [image1 addObject:tutorial];
> 
>     for (TFHppleElement *child in element.children) {
>         if ([child.tagName isEqualToString:@"img"]) {
> 
>             tutorial.imageUrl = [child objectForKey:@"src"];
>         }
>     }
> 
> } 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T02:15:27.060

**使用**：

```
//ul[@id='week_slider']//div[@id='week_program_img']//img 
```

**或者，如果您想选择每个此类图像的父级，这似乎是基于提供的 XPath 表达式的情况，请使用**：

```
//ul[@id='week_slider']//div[@id='week_program_img']/descendant-or-self::*[img] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-07T15:19:37.350

聚会迟到了，但这是另一种方式：

```
//ul[@id='week_slider']//descendant::img 
```

好消息是，后代选择了当前节点的所有后代（子、孙等）。在这种情况下，所有存在于 中的`div`图像`id='week_slider`。

您也可以按索引选择图像，即

```
//descendant::img[1] 
```

# php - curl没有通过phpsessid

> ID：15627217
> 
> 赞同：7
> 
> 时间：2013-03-26T00:20:52.163
> 
> 标签：php, curl

尽我所能，我无法让 curl 传递`PHPSESSID`cookie。我的设置与其他几个人所描述的类似，但我无法让任何建议的解决方案发挥作用。

我有一个向`pageA.php`. `pageA.php`需要来自另一台服务器上的一些信息`pageB.php`，所以我正在使用 curl。 `pageB`维护我需要进出我的页面的会话状态。

我可以从 to 传递其他 cookie `pageA`，`pageB`但不能传递`PHPSESSID`cookie。

以下工作（一个cookie到达`pageB`）：
`$options[CURLOPT_COOKIE] = "myPHPSESSID=" . $sessionId;`

以下没有：

```
$options[CURLOPT_COOKIE] =  "PHPSESSID=" . $sessionId; 
```

（我构建了一个 $options 数组，然后将其传递给`curl_set_opt_array`）

事实上，后者会导致某种我无法辨别的错误，因为我对`curl_exec`永不返回的调用（并且`pageB`永远不会到达）。

我尝试设置标题而不是使用 CURLOPT_COOKIE，但也没有成功：

```
$options[CURLOPT_HTTPHEADER][] = "Cookie: myPHPSESSID=" . $sessionId; 
```

以上工作正常，但

```
$options[CURLOPT_HTTPHEADER][] = "Cookie: PHPSESSID=" . $sessionId; 
```

才不是。

PHP 显然不希望我手动设置 PHPSESSID。我不确定它是否相关，但我从来没有在 pageA 上调用过`start_session()`（尽管我尝试这样做并且得到了相同的结果）。

我意识到我可以（可能）只是将会话 ID 作为不同名称的 cookie 传递，并调用 pageB`set_session_id()`或类似的东西。但我真的很想知道为什么我正在做的事情不起作用，因为我宁愿修复我做错的事情而不是创建一个解决方法。如果有帮助，我可以提供一些正在搜索的各种标题的转储，但我认为这个问题现在已经足够长了。

谢谢...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T19:04:16.710

在你的curl_exec`session_write_close();`之前调用。

这救了我的命： http: [//kmak.1funkybit.com/](http://kmak.1funkybit.com/?p=126) ?p=126 （阅读解释）。

例子：

```
<?php
session_start();
var_dump($_SESSION); //See what's in session
echo "<br>";

$c = curl_init('http://192.168.100.204/logintest/index.php?r=AccessTest/CheckAcess');
$parametros_post = 'action=verChau';
curl_setopt($c, CURLOPT_POST, true);
curl_setopt($c, CURLOPT_POSTFIELDS, $parametros_post);
curl_setopt($c, CURLOPT_VERBOSE, TRUE);
curl_setopt($c, CURLOPT_COOKIE, 'PHPSESSID=' . $_COOKIE['PHPSESSID']);
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
session_write_close();
$page = curl_exec ($c);
echo "<br>";
echo "<br>";
echo $page;
curl_close ($c);

?> 
```

# javascript - 如何使用 Javascript/JQuery CSS 获得平滑的正弦波交替

> ID：15627220
> 
> 赞同：1
> 
> 时间：2013-03-26T00:21:04.280
> 
> 标签：javascript, jquery, html, css

我在尝试让 html 和 jQuery 在 div 的字体大小上创建平滑的正弦波脉冲时遇到了一些麻烦。我有交替工作，但它似乎太波涛汹涌。是否有更数学的方法来优化 setTimeout() 中的 javascript 的 math.sin() 以便以 px 为单位的字体大小可以以更平滑的速率增加和减少？

```
$(document).ready(function(e){
  var i = 10;
  var fontsize;
  function pulseLoop() {
        fontsize = (Math.sin(i) * 10) + 50;
        $(".changer-container").css("font-size",fontsize + "px");
        i = i + .5;
    setTimeout(pulseLoop, 100);
  }
  pulseLoop();

  $(document).focus();
}); 
```

[http://jsfiddle.net/MdQxh/2/](http://jsfiddle.net/MdQxh/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T00:26:53.740

您需要调整`timeout`持续时间。

100 ms 相当于**10fps**（按 1000/100 计算）。

为了看起来流畅，您至少需要 24-30 fps，因此将延迟设置为至少`40`ms 或ms 或（对于*60fps*`30`甚至ms ）以获得流畅的*动画*。`16`

 **这就是为什么你会看到动画不连贯的原因。

这是 60fps 的小提琴，我将`i`增量从更改`i = i + .5;`为：http `i = i + .2;`: [//jsfiddle.net/amyamy86/mecPv/](http://jsfiddle.net/amyamy86/mecPv/)**

# foursquare - Foursquare API Venues.search() “categoryId”参数问题与“near”参数与“ll”参数

> ID：15627222
> 
> 赞同：1
> 
> 时间：2013-03-26T00:21:10.087
> 
> 标签：foursquare

使用 Foursquare 的 API 端点`Venues.search`：

如果`categoryId`参数与参数耦合`ll`，则返回预期的响应；按类别过滤场地。

但是，如果我将`categoryId`参数与参数一起使用`near`，则响应不会过滤场地。

样本：

[请求`ll`](https://api.foursquare.com/v2/venues/search?limit=50&ll=34.1449,-118.1485713&categoryId=4bf58dd8d48988d129951735,4bf58dd8d48988d12d951735,4bf58dd8d48988d130951735,4bf58dd8d48988d17b941735,4bf58dd8d48988d17c941735,4bf58dd8d48988d17f941735,4bf58dd8d48988d181941735,4bf58dd8d48988d182941735,4bf58dd8d48988d18e941735,4bf58dd8d48988d193941735,4bf58dd8d48988d1e1931735,4bf58dd8d48988d1e2931735,4bf58dd8d48988d1e3931735,4bf58dd8d48988d1e4931735,4bf58dd8d48988d1e5931735,4bf58dd8d48988d1ef931735,4bf58dd8d48988d1ef941735,4bf58dd8d48988d1f1931735,4bf58dd8d48988d1f2931735,4bf58dd8d48988d1f6931735,4bf58dd8d48988d1fa931735,4bf58dd8d48988d1fc931735,4bf58dd8d48988d1fd931735,4bf58dd8d48988d1fe931735,4d4b7105d754a06374d81259,4d4b7105d754a06376d81259,4d4b7105d754a06378d81259,4e4c9077bd41f78e849722f9,4eb1bc533b7b2c5b1d4306cb,4f04b25d2fb6e1c99f3db0c0,4fceea171983d5d06c3e9823,5032792091d4c4b30a586d5c&radius=150&intent=checkin&oauth_token=YEUBXINMZIZEO0GE5XRBS2SLPVJPACS1DUZJZT1IYUGPVME5&v=20130325)返回按 categoryId 过滤的场所。

[请求`near`](https://api.foursquare.com/v2/venues/search?limit=50&near=Los%20Angeles,%20CA&categoryId=4bf58dd8d48988d129951735,4bf58dd8d48988d12d951735,4bf58dd8d48988d130951735,4bf58dd8d48988d17b941735,4bf58dd8d48988d17c941735,4bf58dd8d48988d17f941735,4bf58dd8d48988d181941735,4bf58dd8d48988d182941735,4bf58dd8d48988d18e941735,4bf58dd8d48988d193941735,4bf58dd8d48988d1e1931735,4bf58dd8d48988d1e2931735,4bf58dd8d48988d1e3931735,4bf58dd8d48988d1e4931735,4bf58dd8d48988d1e5931735,4bf58dd8d48988d1ef931735,4bf58dd8d48988d1ef941735,4bf58dd8d48988d1f1931735,4bf58dd8d48988d1f2931735,4bf58dd8d48988d1f6931735,4bf58dd8d48988d1fa931735,4bf58dd8d48988d1fc931735,4bf58dd8d48988d1fd931735,4bf58dd8d48988d1fe931735,4d4b7105d754a06374d81259,4d4b7105d754a06376d81259,4d4b7105d754a06378d81259,4e4c9077bd41f78e849722f9,4eb1bc533b7b2c5b1d4306cb,4f04b25d2fb6e1c99f3db0c0,4fceea171983d5d06c3e9823,5032792091d4c4b30a586d5c&intent=checkin&oauth_token=YEUBXINMZIZEO0GE5XRBS2SLPVJPACS1DUZJZT1IYUGPVME5&v=20130325)返回未按 categoryId 过滤的场所。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:42:44.317

这里的问题是次要类别匹配。结果似乎没有正确过滤，因为搜索的响应仅显示主要类别。场地实际上匹配次要类别，您可以通过查看[场地详细信息](https://developer.foursquare.com/docs/venues/venues)响应来查看。

# image - Corona SDK 中的图像旋转和显示过渡

> ID：15627223
> 
> 赞同：0
> 
> 时间：2013-03-26T00:21:11.457
> 
> 标签：image, object, rotation, transition, coronasdk

我试图点击屏幕，让我的坦克桶旋转到我点击的地方。我现在已经让那段代码可以工作了。我正在尝试做的下一步是假设我的坦克桶指向右侧，如果我点击左侧，我的坦克桶将立即旋转到左侧。我希望我的坦克枪管从右侧过渡到左侧，这样我们就可以看到运动/运动发生了，而不是它只是从右到左出现。

所以我想再次看到坦克枪管实际上从右到左旋转/过渡，而不是它只是从右侧消失并重新出现在左侧（我试图模仿坦克枪管的真实旋转）。

点击屏幕和坦克桶指向那个方向的代码如下（还有一个代码在其中实现，如果我点击并按住，然后我可以将我的坦克桶拖到我试图摆脱的所需位置我只希望它点击并过渡到现在）。

```
local function rotateObj(event)
    local t = event.target
    local phase = event.phase
if event.y < 225 then        
    if (phase == "began") then
            display.getCurrentStage():setFocus( t )
            t.isFocus = true

    local diffX = tankbarrel.x - event.x
    local diffY = tankbarrel.y - event.y
  tankbarrel.rotation = math.atan2(diffY, diffX) / RADIANS_TO_DEGREES + 180          

            -- Store initial position of finger
            t.x1 = event.x
            t.y1 = event.y

    elseif t.isFocus then

            if (phase == "moved") then
                    t.x2 = event.x
                    t.y2 = event.y

                    angle1 = 180/math.pi * math.atan2(t.y1 - t.y , t.x1 - t.x)
                    angle2 = 180/math.pi * math.atan2(t.y2 - t.y , t.x2 - t.x)
                    print("angle1 = "..angle1)
                    rotationAmt = angle1 - angle2 

                    --rotate it 
                    tankbarrel.rotation = tankbarrel.rotation - rotationAmt
                    print ("tankbarrel.rotation = "..tankbarrel.rotation)

-- set limits to how far the barrel can rotate                    
if tankbarrel.rotation < 210 then 
                    tankbarrel.rotation = 209
                    end

                    if tankbarrel.rotation > 330 then
                        tankbarrel.rotation = 329
                        end

                    t.x1 = t.x2
                    t.y1 = t.y2

            elseif (phase == "ended") then

                    display.getCurrentStage():setFocus( nil )
                    t.isFocus = false
            end
    end
end
    -- Stop further propagation of touch event
    return true
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:53:20.180

这可能会帮助你...

```
local tankbarrel = ..........  -- create your tank  

local function immediateTransRotation(e)
    if(e.x<tankbarrel.x)then
       transition.to(tankbarrel,{time=100,rotation=0})    -- rotate, if clicked on left side of the tank
    else
       transition.to(tankbarrel,{time=100,rotation=180})  -- rotate, if clicked on right side of the tank
    end
end
Runtime:addEventListener("tap",immediateTransRotation) 
```

继续编码...... :)

# java - 按联系人列表数组中的姓氏排序

> ID：15627224
> 
> 赞同：1
> 
> 时间：2013-03-26T00:21:13.100
> 
> 标签：java, arrays, sorting

我正在尝试按姓氏对数组进行排序，但我在代码中遇到了障碍，我不知道该怎么做，也找不到任何对我有帮助的东西。我的主要问题在于

```
 public void sortByLastName(){
         Collections.sort(list);
     } 
```

这两段代码在两个不同的类中，有问题吗？

```
 public int compareTo(Person p){
    int compareResult = this.lastName.compareTo(p.lastName);
    if(compareResult == 0){
        return 0;
    }
        else
            if(compareResult > 0){
                return 1;
            }
            else
                return -1;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:28:59.383

如果您希望以一种以上的方式对任何内容进行排序，您将很快确定最好的做法是将比较函数作为参数传递给`Collections.sort`.

```
public void sortByLastName(){
    Collections.sort(list, new Comparator<Person>() {
        public int compare(Person lhs, Person rhs){
            return lhs.lastName.compareTo(rhs.lastName);
        }
    } );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:33:27.537

你可以试试：

```
public int compareTo(Person p){
    return lastName.compareToIgnoreCase(p.lastName);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T00:35:38.450

您的`compareTo`方法需要在您的`Person`课程中。你的`Person`班级需要`implement Comparable<Person>`。`Collections.sort`然后将工作 -

```
private static final class Person implements Comparable<Person> {

    private String firstName;
    private String lastName;

    public Person(String firstName, String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public int compareTo(Person o) {
        int c = getLastName().compareTo(o.getLastName());
        if (c != 0) {
            return c;
        }
        return getFirstName().compareTo(o.getFirstName());
    }

    @Override
    public String toString() {
        return getFirstName() + " " + getLastName();
    }

}

public static void main(String[] args) {
    final List<Person> people = new LinkedList<Person>();
    people.add(new Person("John", "Smith"));
    people.add(new Person("Hans", "Mustermann"));
    people.add(new Person("John", "Doe"));
    System.out.println(people);
    Collections.sort(people);
    System.out.println(people);
} 
```

输出：

```
[John Smith, Hans Mustermann, John Doe]
[John Doe, Hans Mustermann, John Smith] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T01:07:58.253

我已经制作了一个函数，通过模型类中的特定变量对对象列表进行排序。它可能与您需要的不直接匹配，但也许您可以接受这个想法。我正在使用反射来对具有任何数据类型的任何类模型进行排序。

```
 public Vector sort(Vector list, String kelas, String s, String asc) throws NoSuchMethodException {

        try {
            // Creates an object of type Class which contains the information of
            // the class String
            Object[] obj = list.toArray();
            Object[] args = {};
            Class cl = Class.forName(kelas);
            Method toSort = cl.getMethod(s, null);
            if (asc.equalsIgnoreCase("desc")) {
                if (toSort.getReturnType().toString().equalsIgnoreCase("int") || toSort.getReturnType().toString().equalsIgnoreCase("double")) {
                    for (int i = 0; i < obj.length; i++) {
                        for (int j = i; j < obj.length; j++) {
                            try {
                                if (Double.parseDouble(toSort.invoke(obj[i], args).toString()) < Double.parseDouble(toSort.invoke(obj[j], args).toString())) {
                                    Object temp = obj[i];
                                    obj[i] = obj[j];
                                    obj[j] = temp;
                                }
                            } catch (IllegalAccessException ex) {
                                Logger.getLogger(DbBean.class.getName()).log(Level.SEVERE, null, ex);
                            } catch (IllegalArgumentException ex) {
                                Logger.getLogger(DbBean.class.getName()).log(Level.SEVERE, null, ex);
                            } catch (InvocationTargetException ex) {
                                Logger.getLogger(DbBean.class.getName()).log(Level.SEVERE, null, ex);
                            }
                        }
                    }
                } else {
                    for (int i = 0; i < obj.length; i++) {
                        for (int j = i; j < obj.length; j++) {
                            try {
                                if (toSort.invoke(obj[i], args).toString().compareToIgnoreCase(toSort.invoke(obj[j], args).toString()) < 0) {
                                    Object temp = obj[i];
                                    obj[i] = obj[j];
                                    obj[j] = temp;
                                }
                            } catch (IllegalAccessException ex) {
                                Logger.getLogger(DbBean.class.getName()).log(Level.SEVERE, null, ex);
                            } catch (IllegalArgumentException ex) {
                                Logger.getLogger(DbBean.class.getName()).log(Level.SEVERE, null, ex);
                            } catch (InvocationTargetException ex) {
                                Logger.getLogger(DbBean.class.getName()).log(Level.SEVERE, null, ex);
                            }
                        }
                    }
                }
            } else {
                if (toSort.getReturnType().toString().equalsIgnoreCase("int") || toSort.getReturnType().toString().equalsIgnoreCase("double")) {
                    for (int i = 0; i < obj.length; i++) {
                        for (int j = i; j < obj.length; j++) {
                            try {
                                if (Double.parseDouble(toSort.invoke(obj[i], args).toString()) > Double.parseDouble(toSort.invoke(obj[j], args).toString())) {
                                    Object temp = obj[i];
                                    obj[i] = obj[j];
                                    obj[j] = temp;
                                }
                            } catch (IllegalAccessException ex) {
                                Logger.getLogger(DbBean.class.getName()).log(Level.SEVERE, null, ex);
                            } catch (IllegalArgumentException ex) {
                                Logger.getLogger(DbBean.class.getName()).log(Level.SEVERE, null, ex);
                            } catch (InvocationTargetException ex) {
                                Logger.getLogger(DbBean.class.getName()).log(Level.SEVERE, null, ex);
                            }
                        }
                    }
                } else {
                    for (int i = 0; i < obj.length; i++) {
                        for (int j = i; j < obj.length; j++) {
                            try {
                                if (toSort.invoke(obj[i], args).toString().compareToIgnoreCase(toSort.invoke(obj[j], args).toString()) > 0) {
                                    Object temp = obj[i];
                                    obj[i] = obj[j];
                                    obj[j] = temp;
                                }
                            } catch (IllegalAccessException ex) {
                                Logger.getLogger(DbBean.class.getName()).log(Level.SEVERE, null, ex);
                            } catch (IllegalArgumentException ex) {
                                Logger.getLogger(DbBean.class.getName()).log(Level.SEVERE, null, ex);
                            } catch (InvocationTargetException ex) {
                                Logger.getLogger(DbBean.class.getName()).log(Level.SEVERE, null, ex);
                            }
                        }
                    }
                }
            }

            list = new Vector();
            for (int i = 0; i < obj.length; i++) {
                list.add(obj[i]);
            }
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
        return list;
    } 
```

您可以像这样简单地调用该函数：

```
Vector sortedList=sort(UnsortedList, "bean.Items", "getItemName", "asc"); 
```

此行将根据项目名称升序对我的项目列表（项目是模型类）进行排序

# php - 回显 intval 会产生大量空白

> ID：15627225
> 
> 赞同：0
> 
> 时间：2013-03-26T00:21:13.417
> 
> 标签：php, wordpress

我有一个长小数（2.34353）的变量，我想将它四舍五入为2。所以我在变量上使用了intval。然后我回显 intval 并且值是正确的，除了它在值之前和之后吐出一堆空格。在 var_dump 它只显示数字，因此（除非 var_dump 从不显示空格）我假设回显它出于某种原因添加了空格。

在回显之前，我在变量上尝试了 str_replace 和 preg_replace，但问题仍然存在。我在 Wordpress 上开发，所以我觉得它可能是罪魁祸首。

关于下一步尝试什么的任何想法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:22:36.950

尝试使用[round()](http://php.net/manual/en/function.round.php)函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:22:40.630

```
echo trim(intval($myvar)); // should clear out any wrapping whitespace 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T00:30:10.723

1.  Intval 不是舍入函数。它只是删除数字的小数部分。使用[round](http://php.net/round)进行四舍五入。

2.  echo 或 intval 没有问题。问题就在那里。尝试回显空字符串`echo '';`，看看你得到了什么。

# crystal-reports - 多个表上的左外连接使用选择专家隐藏数据 - Crystal Reports

> ID：15627228
> 
> 赞同：1
> 
> 时间：2013-03-26T00:21:38.797
> 
> 标签：crystal-reports, outer-join, multiple-tables

我在以一对多关系报告两个表时遇到水晶报表的问题。

* * *

示例表：

**dbo.stock**

```
Barcode   Qty   
12345     3     
11111     5     
22222     6 
```

**dbo.sales**

```
Barcode    SalesDate    QtySold<br/>
12345      1/1/2013     1          
12345      1/1/2012     1
12345      1/1/2010     1
11111      1/1/2000     1 
```

表通过链接

```
dbo.stock Left Outer Join On dbo.sales 
```

* * *

报告配置：

```
Group 1 Header |
Sales          |Sales.barcode Sales.QtySold
Group 1 Footer |Group(Barcode) Sum(QtySold) Stock.Qty 
```

* * *

问题：显示销售和库存（无销售日期限制）

```
Barcode    Sold    OnHand
12345      3       3
11111      1       5
22222              6 
```

But when a data range is selected then output removes valid products with sales outside the selected data range. 说 2012 年 1 月 1 日 - 2013 年 1 月 1 日

```
Barcode    Sold    OnHand
12345      2       3
22222              6 
```

* * *

我有一个使用子报表的版本，但是开销太大了，因为子报表为每一行运行。

可以想办法解决这个问题吗？（不使用子报告）

谢谢乙

* * *

系统说明：
Crystal 8.5 数据库 .dbf 文件通过 ODBC 驱动程序访问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:25:11.470

问题是，即使您正在执行左外连接，您也正在选择右侧表格中的日期范围，这有效地使其成为内连接。如果您`{Sales.SalesDate}={?DateParameter}`的记录选择公式中有类似内容，请删除它。

相反，使用取消详细信息部分，`isnull({Sales.SalesDate}) or {Sales.SalesDate}<>{?DateParameter}`以便仅在报告中显示所需日期的销售额。要处理组页脚中的“已售数量”，请仅对日期范围内的记录使用运行总计而不是直接求和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:41:33.547

所以你想要所有的条形码信息，但只想要日期范围内的销售额？

如果 dbo.sales.SalesDate 在 {?daterange} 然后 {dbo.sales.QtySold} 其他 0，请详细尝试这个公式

将摘要插入组页脚

注意：您可能需要在公式编辑器中切换到 Null 的默认值或在公式中考虑 NULL 值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T15:02:02.457

当您想在水晶报表中加入两个表并使用左连接同时想要基于右表过滤报表时，例如 sales.SalesDate>='1-JAN-2014' 连接将转换为等连接来解决有些人建议使用的问题 (ISNULL(sales.SalesDate) OR sales.SalesDate>='1-JAN-2014')

上述解决方案仅适用于库存销售量为 0 并且您仍想显示这些库存但如果某些库存的销售量超过 0 并且销售日期为 ON 或“2013 年 12 月 31 日”之前怎么办。在这种情况下 ISNULL(sales.SalesDate) 将不起作用。要解决此类问题，您需要添加命令对象或为销售表创建视图，如下所示

1.  使用以下 sql 创建命令对象 Select stock.Barcode, sales.Salesdate from stock left outer join order on stock.Barcode=order.Barcode and sales.SalesDate>='1-JAN-2014'

2.  第二种解决方案是为销售创建一个视图，创建或替换视图 view_Sales 作为 Select * from sales where sales.SalesDate>='1-JAN-2014' 然后使用报表中的视图而不是订单表作为右表。

# javascript - JS与函数参数相同的对象

> ID：15627240
> 
> 赞同：0
> 
> 时间：2013-03-26T00:22:50.943
> 
> 标签：javascript, object

[jiddle](http://jsfiddle.net/ckpvC/) - 我有`x*y array`一些默认创建的函数`value`。我希望这个值是一些 2 长的数组。但似乎通过传递`new Array(2)`，因为`parameter`它总是传递相同的对象，所以稍后更改数组中的任何单元格都会影响所有单元格。如何使这个数组`default`的每个单元格的每个值都相同，但`independent`也一样。

在小提琴上，我更改了某些字段的值并警告依赖于第一个字段的其他字段，因为每个单元格都具有作为同一对象的默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:45:29.173

> 我有创建`x*y`具有一些默认值的数组的函数。我希望这个值是一些 2 长的数组

但是它不再是一个`x*y`二维数组，而是一个`x*y*2`3 维数组！为此，您需要一个不同的功能。

> 似乎通过`new Array(2)`作为参数传递它总是传递相同的对象，因此稍后更改数组中的任何单元格都会影响所有单元格。

是的。`new Array(2)`创建*一个*对象，您的代码构造一个二维数组，每个字段都指向它。

> 如何让他们独立？

您需要使用不同的功能，例如

```
function newB(x, y, z) {
    var result = new Array(x);
    for (var i=0; i<x; i++) {
        result[i] = new Array(y);
        for (var j=0; j<y; j++) {
            result[i][j] = new Array(z);
        }
    }
    return result;
}

var fields = newA(5, 5, 2); 
```

或者为了更通用，你可以使用一些工厂函数作为参数，它构造了独立的值：

```
function newB(x, y, valuemaker) {
    if (typeof valuemaker != "function") {
        var value = valuemaker || 0;
        valuemaker = function(){ return value; };
    }
    var result = new Array(x);
    for (var i=0; i<x; i++) {
        result[i] = new Array(y);
        for (var j=0; j<y; j++) {
            result[i][j] = valuemaker();
        }
    }
    return result;
}

var fields = newA(5, 5, function() {
    return new Array(2);
}); 
```

# sed - 提取版本号子字符串

> ID：15627244
> 
> 赞同：2
> 
> 时间：2013-03-26T00:23:20.077
> 
> 标签：sed, grep, substring, vmware-workstation

我有这个：

```
Product Name         Product Version     
==================== ====================
vmware-workstation   9.0.2.1031769 
```

我可以通过以下方式获得该`vmware-workstation`部分：

```
$ vmware-installer -l | grep -Po "(?=v)[^ ]*(?= )" 
```

如何获取版本号部分（没有构建，仅表示`9.0.2`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:39:31.623

使用 sed：

```
vmware-installer -l | sed -n 's/[^ ]* *\(.*\)\.[0-9]*/\1/p' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:27:40.307

```
$ vmware-installer -l | grep -Po "^v\S+\s+\K\d+\.\d+\.\d+"
9.0.2

$ vmware-installer -l | grep -Po "(?:\d+\.){2}\d+"
9.0.2 
```

这个 ：

```
(?:) 
```

避免不需要的捕获组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T01:11:57.023

另一种使用 grep 的方法：

`vmware-installer -l | grep -Po "(\d+\.){2}\d+"`

# java - JSTL 函数 fn:split 和 fn:join 不起作用

> ID：15627247
> 
> 赞同：1
> 
> 时间：2013-03-26T00:23:44.763
> 
> 标签：java, jsp, jstl

这是不工作的代码片段：

```
<%@taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%! String[] strings = {"happy","in 7th heaven","on cloud 8"}; %>
${fn:join(strings , '&')}
${fn:split("some/word/goes/here", "/")} 
```

非常感谢我提出的任何问题，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:20:55.733

您正在尝试将老式*脚本*与现代 EL 混合。这是行不通的。EL 在页面、请求、会话和应用程序范围内搜索变量作为属性。它根本不搜索在（全局）*scriptlet*范围内声明的变量。

为了为 EL 准备变量，您需要将其设置为所需范围内的属性。通常，您会为此使用 servlet 或过滤器，或者可能使用请求/会话/上下文侦听器，但对于快速原型制作，您可能仍想使用老式的 *scriptlet*。这是一个将其置于请求范围内的示例：

```
<%
    String[] strings = { "happy", "in 7th heaven", "on cloud 8" };
    request.setAttribute("strings", strings);
%> 
```

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)
*   [如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)

# ruby-on-rails - Rails“渲染和返回”模式的 DRY-er 替代方案

> ID：15627252
> 
> 赞同：0
> 
> 时间：2013-03-26T00:24:30.853
> 
> 标签：ruby-on-rails

我的 Rails 控制器中有以下模式：

```
def get_details
  # check params for valid input
  ...
  if !valid
    render :json, error_info, :status => 400 and return
  end

  begin
    ...
    ...
    ...
    render :json => result, :status => 200 and return
  rescue Exception => e
    if e.is_a? ActiveRecord::RecordNotFound
      render :json => error_info, :status => 404 and return
    end
  end

end 
```

由于渲染不返回，我必须添加`and return`到每个渲染调用，这对我来说似乎不太干燥。这种模式有替代品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:18:00.580

**You can write it as follows**

```
def get_details
  # check params for valid input
  ...
  if !valid
    return render_with(error_info, 400)
  else
    begin
      ...
      ...
      ...
      return render_with(result, 200)
    rescue Exception => e
      if e.is_a? ActiveRecord::RecordNotFound
        return render_with(error_info, 404)
      end
    end    
  end
end

private

def render_with(result_info, status_code)
  render :json => result_info, :status => status_code
end 
```

# php - 如何从原始 HTTP 响应中检索特定的标头字段？

> ID：15627257
> 
> 赞同：0
> 
> 时间：2013-03-26T00:25:16.357
> 
> 标签：php, http-headers

这是`$result`返回的内容：

```
HTTP/1.1 200 OK
Server: SERVER
Content-Type: text/xml;charset=utf-8
Connection: close
Expires: Tue, 26 Mar 2013 00:28:45 GMT
Cache-Control: max-age=0, no-cache, no-store
Pragma: no-cache
Date: Tue, 26 Mar 2013 00:28:45 GMT
Content-Length: 290
Connection: keep-alive
Set-Cookie: KEY=isbgvigbiwsb124252525252; Domain=www.website.com; Expires=Tue, 26-Mar-13 02:28:44 GMT; Path=/; HttpOnly
Set-Cookie: session=12345566789:abc1231552662626262; Domain=www.website.com; Expires=Thu, 25-Apr-2013 00:28:43 GMT; Path=/

<login>
  <success>1</success>
  <player>
     <id>1234567</id>
     <AnotherId>123456</AnotherId>
     <email>email@email.com</email>
      <accountinformation>
          <id>123456</id>
          <name>namehere</name>
          <number>1234360</number>
       </accountinformation>  
   </player>
</login> 
```

我想`KEY`从响应中检索 cookie。目前我的代码如下

```
//a cURL function would be here
$result = curl_exec($ch); 

list($body, $split) = explode("\r\n\r\n", $result, 2);
$arr = explode("\r\n", $body);   

$start = explode(":", $arr[10]);    
$end = explode(";", $start[1]);
$INFO_I_NEED = $end[0]; 
```

执行此操作的更简单方法是什么？因为它需要针对不同的解析区域进行 3/4 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:12:39.877

看起来[`preg_match_all`](http://www.php.net/manual/en/function.preg-match-all.php)可能是您正在寻找的东西。使用[这个答案](https://stackoverflow.com/a/895858/971556)作为灵感尝试：

```
preg_match_all('/^Set-Cookie:\s*([^;]*)/mi', $result, $m); 
```

然后你可以写一个这样的函数：

```
function getCookies($result) {
    preg_match_all('/^Set-Cookie:\s*([^;]*)/mi', $result, $m);
    return($m)
}

$result = curl_exec($ch);
$cookiesArray = getCookies($result); 
```

该函数的返回值将是一个包含所有 cookie 值的数组。所以`$cookiesArray`会举行：

```
array (
  0 => 'KEY=isbgvigbiwsb124252525252',
  1 => 'session=12345566789:abc1231552662626262',
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:30:58.203

将它放在一个函数中，以便您可以在需要时重用：

```
<?php
//a cURL function would be here
$result = curl_exec($ch); 

$INFO_I_NEED = myExplode($result);

function myExplode($data){

    list($body, $split) = explode("\r\n\r\n", $result, 2);
    $arr = explode("\r\n", $body);   

    $start = explode(":", $arr[10]);    
    $end = explode(";", $start[1]);

    return($end[0]);

}
?> 
```

# awk - 针对括号的 awk 错误消息

> ID：15627261
> 
> 赞同：0
> 
> 时间：2013-03-26T00:25:34.780
> 
> 标签：awk

我正在运行这个 awk 命令，但我找不到为什么它一直告诉我这是错误的，所有变量都被实例化（我在这里用字符串替换了它们以显示错误，但错误是一样的），大括号都是正确关闭，有什么建议吗？

```
 key=$(echo "hello,there" | awk -F"," -v index=2 '{for(i=1; i<=NF; i++) if ($i ~ $index) print i}') 
```

我不是完美的 awk 用户，但我真的无法在这里发现问题有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T00:28:11.837

`index`是一个内置函数（关键字），因此您不能将其用作变量名。将其更改为：

```
awk -F"," -v idx=2 '{for(i=1; i<=NF; i++) if ($i ~ idx) print i}') 
```

字段说明符 ,`$`前缀`idx`也不正确，您想按原样使用字符串。

# sql-server - 计算下一个到期日

> ID：15627262
> 
> 赞同：0
> 
> 时间：2013-03-26T00:25:37.613
> 
> 标签：sql-server, tsql, date, getdate

我是 T-SQL 的新手，遇到了一段代码，想知道是否有人可以帮助我了解正在发生的事情。代码的重点是计算下一次付款的日期。

```
CASE 
WHEN MONTH(table.field-10) < MONTH(GETDATE())
     THEN CONVERT(DATE,((MONTH(GETDATE()) - MONTH(table.field-10)) *30)  + (table.field))
WHEN MONTH(table.field-10) = MONTH(GETDATE())
     THEN CONVERT(DATE,FA_NEXTDUE)
WHEN MONTH(table.field-10) > MONTH(GETDATE()) 
     THEN CONVERT(DATE,(table.field) - ((MONTH(table.field-10) - MONTH(GETDATE())) *30))
END AS CurrentDueDate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:22:41.993

这看起来写得很糟糕，因为它使用了一个不考虑年份的“月”函数。它似乎试图确定“字段”中的日期前十天是否与当前日期在同一月份。但是，由于这没有考虑到年份，因此输出有点不稳定。

更好的方法是使用 datediff 函数。

```
CASE WHEN DATEDIFF(month, getdate(), (dateadd(day, -10, table.field))) < 0 then dateadd(month, DATEDIFF(month, getdate(), (dateadd(day, -10, table.field))), table.field)
CASE WHEN DATEDIFF(month, getdate(), (dateadd(day, -10, table.field))) = 0 then CONVERT(Date, fa_nextdue)
CASE WHEN DATEDIFF(month, getdate(), (dateadd(day, -10, table.field))) > 0 then dateadd(month, DATEDIFF(month, getdate(), (dateadd(day, -10, table.field))), table.field) 
```

即使进行了这种更正，我也怀疑输出是否是业务所需的。您可能想深入研究一下需求，看看究竟应该在这里返回什么。

*FYI table.field-10 =“字段”日期前十天。*

# java - Java命令行退出命令？

> ID：15627264
> 
> 赞同：3
> 
> 时间：2013-03-26T00:26:14.507
> 
> 标签：java, command-line, terminal, keylistener, shutdown

我正在制作一个服务器，它位于基于文本的 Raspberry Pi 上。基本上，一切都是从命令行运行的，所以当服务器运行时，没有图形，它使用`System.out.println();`. 所以我的问题是，不是有一个运行`shutdown()`方法的按钮，而是我怎样才能在任何时间点做到这一点，我可以按下“e”，然后程序将运行该`shutdown()`方法？我已经进行了一些搜索，但不确定如何表达这个问题。我正在考虑添加一个`keylistener`，但我不确定它是否可以添加到任何图形中？无论如何，任何帮助将不胜感激！！！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:59:35.493

要注册键盘事件，您首先需要关注您的程序，为此您需要一个 gui。我建议：

```
1.- Create a JLabel(and a scrollbar).

2.- Instead of using System.out.print("text");, use myJLabel.append("text" + "/n");. 

3.- Add a keyboard listener. Register key events so that the x key closes your server, the s key stops it, ... 
```

正如您描述的应用程序一样，您不能将输入写入服务器，您只能从中读取输出。我推荐第4步。

```
4.-Add a JTextFiel to send input to the server.

5.-To make it user-friendly , you could use a JEditorPane instead of a JLabel, and add HTML to your output. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:06:44.213

如果你不想有一个可见的 gui，你可以用听众创建一个“始终聚焦的不可见图形界面”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T00:44:01.487

好吧，所以根据评论（顺便说一句，我投了赞成票），我做了一个线程，经常用来`scanner`查看我是否输入了“退出”。感谢所有的帮助！

# php - MySQL 查询中不能使用 INT 字段

> ID：15627268
> 
> 赞同：0
> 
> 时间：2013-03-26T00:26:34.087
> 
> 标签：php, mysql, int

我的查询遇到了这个烦人的问题：

我有表**tbl_profissao**字段 **idtbl_profissao** (INT(11), AI,UNSIGNED, NOT NULL), **cbo** (INT(6), UNSIGNED, ZERO FILL) 和 **profissao** (VARCHAR(110))。

我将查询分成两个 PHP 页面 - **profissao_busca.php**和**profissao_busca_input.php**，代码如下：

对于 profissao_busca.php：

```
<?php include "header.php"; ?>
<body>
<h2>PESQUISA: PROFISSÃO (CBO) </h2>
<form id="form_profissao_busca" method="post" action="profissao_busca.php?go">
<p>Por favor, escreva o número CBO da profissão que quer encontrar:<br/><br/>
<input name="busca_cbo" type="text" id="busca_cbo" size="11" maxlength="11" />
<input name="submit" type="submit" value="PROCURAR" /></p>
</form>
<?php
  if(isset($_POST['submit'])){
  if(isset($_GET['go'])){
  if(preg_match("/^[  a-zA-Z]+/", $_POST['busca_cbo'])){
  $name=$_POST['busca_cbo'];

    $db=mysql_connect  ("localhost", "root",  "root") or die ('Não foi possível conectar-se ao Banco de Dados (erro No.): ' . mysql_error());
    $mydb=mysql_select_db("grcc_db_pr");
    $sql="SELECT idtbl_profissao, cbo, profissao FROM tbl_profissao WHERE profissao LIKE '%$name%' OR idtbl_profissao LIKE '%$name%' OR cbo LIKE '%$name%'";
    $result=mysql_query($sql);
    while($row=mysql_fetch_array($result)){
        $Pessoa=$row['cbo'];
        $ident=$row['idtbl_profissao'];
        $prof=$row['profissao'];
  echo "<ul>\n";
  echo "<li> CBO requisitado: " . $Pessoa . "</li><li> Identificador: ". $ident . "</li><li>Ocupação:" . $prof . "</li><li>
  <form id=\"form_profissao_busca\" method=\"post\" action=\"profissao_busca_input.php?go\">
  <input name=\"button\" type=\"submit\" value=\"BUSCAR ESTE CBO\" />
  <input name=\"busca_cbo\" type=\"hidden\" value=\"". $ident. "\" /></form></li>\n";
  echo "</ul>";
  }
  }
  else{
  echo  "<p>Este número não existe no Banco de Dados</p>";
  }
  }
  }
?>
</body> 
</html> 
```

对于 profissao_busca_input.php：

```
<?php include "header.php";
$nome_proc = $_POST['busca_cbo'];
        // ================== Dados pessoais e documentos
$listagem =  "SELECT idtbl_profissao, cbo, profissao FROM tbl_profissao WHERE profissao LIKE '%$name%' OR idtbl_profissao LIKE '%$name%' OR cbo LIKE '%$name%'";
$resultado = mysql_query($listagem);
$listagem = mysql_fetch_array($resultado);

print "<ul><li> CBO requisitado:  $listagem[1] </li><li> Identificador: $listagem[0] </li><li>Ocupação: $listagem[2] </li></ul>"; 
```

有一个表的小样本：

idtbl_profissao,cbo,profissao

```
1,'010205','Oficial da aeronáutica'
2,'010210','Oficial do exército'
3,'010210','X5020'
4,'010215','Oficial da marinha'
5,'010215','X6020'
6,'010215','X6030' 
```

问题是，当我输入属于“cbo”列的任何值时，结果是“Este número não existse no Banco de Dados”（意味着数据库中不存在该值）。每当我从“profissao”列中输入一个单词或字母数字值时，它都可以正常工作。

现在我不知道发生了什么，或者我是否因为“cbo”是 INT 格式而错过了什么。

无论如何，提前感谢您的关注。

妮可

# html - 垂直对齐百分比 Div

> ID：15627272
> 
> 赞同：0
> 
> 时间：2013-03-26T00:27:10.583
> 
> 标签：html, css

我正在尝试在另一个 div 中垂直对齐一个 div。出现问题是因为两者都有百分比高度。这是我的 jsfiddle：http: [//jsfiddle.net/QeF23/1/](http://jsfiddle.net/QeF23/1/)

```
html, body {
    height: 100%;
    padding: 0px;
    margin: 0px;
}
#outerdiv {
    height: 50%;
    width: 100%; 
    background-color: #000000;
}    
#innerdiv {
    height: 90%;
    background-color: red;
    float: right;
} 
```

如果我不想要百分比高度，这将很容易解决。

我已经尝试使用 display: table-cell 方法，但还没有让它工作。可能是我实施错了。

任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:36:51.453

你的 JS 小提琴看起来是正确的 - 如果你想在中间对齐它，可以尝试添加

```
#outerdiv {
    height: 50%;
    width: 100%; 
    background-color: #000000;
    position:absolute;
    top:25%;
} 
```

编辑-如果您希望红色 div 以黑色为中心-使用相同的原则：

[http://jsfiddle.net/QeF23/30/](http://jsfiddle.net/QeF23/30/)

```
#outerdiv {
    height: 50%;
    width: 100%; 
    background-color: #000000;
    position:absolute;
    top:25%;
}       
#innerdiv {;
    position:absolute;
    width: 100%; 
    top:5%;
    height: 90%;
    background-color: red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:37:01.800

阅读这篇文章[http://css-tricks.com/centering-in-the-unknown/](http://css-tricks.com/centering-in-the-unknown/)。在文章的最后，他解释了一个使用幽灵元素的技巧。我之前尝试过，它对我来说非常有效。

# django - 如何从网站漏洞利用错误消息中获取更多信息

> ID：15627275
> 
> 赞同：0
> 
> 时间：2013-03-26T00:27:26.663
> 
> 标签：django, django-urls, django-errors, django-email

我从我的 django 网站收到了很多这样的错误邮件。它们看起来像是由一些自动漏洞触发的。这是一个例子。

```
Referrer: http://example.com/fck/editor/filemanager/upload/test.html
Requested URL: /fck/editor/filemanager/upload/test.html
User agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows 98; Win 9x 4.90)
IP address: 127.0.0.1 
```

请帮我回答2个问题：

1.  如何配置 Django 以记录利用者的真实 ip 来源，即 REMOTE_ADDR 而不是 localhost ip。

2.  有没有办法拒绝虚假推荐人的请求？请求和引用的 URL 肯定不是来自我自己的 example.com 站点的有效链接，而且从来没有。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:15:39.903

我发现了我自己的问题，所以如果其他人需要这个信息，这里就...

我一直在错误电子邮件中获取 localhost ip，因为我的 django 服务器位于同一台机器上的反向代理后面。在这种情况下`REMOTE_ADDR`，始终是 localhost 地址。

没有模板或自定义错误报告机制可以将其他变量放入断开的链接电子邮件中，因为电子邮件是在 django 中硬编码的`CommonMiddleware`。以前的评论中提到的自定义错误报告与此无关。

所以为了得到真实的ip地址，我写了一个中间件来`REMOTE_ADDR`代替`HTTP_X_FORWARDED_FOR`. 假设存在一个安全问题，因为`HTTP_X_FORWARDED_FOR`可以很容易地伪造，但如果没有 CommonMiddleWare 补丁来实际包含两个 ip 变量，就可以做到这一点。

# redis - 如何在 openshift 上为 redis 配置 redis.conf

> ID：15627277
> 
> 赞同：0
> 
> 时间：2013-03-26T00:27:29.927
> 
> 标签：redis, openshift

有一个问题，通过遵循回购

[https://github.com/razorinc/redis-openshift-example](https://github.com/razorinc/redis-openshift-example)

当我启动 redis 服务器时，它显示“[12010] 25 Mar 20:14:53 #Opening port 6379: bind: Permission denied”

我尝试将端口 0 更改为端口 3128，但仍然出现相同的错误....不知道为什么

--更新当我尝试升级到redis 2.6并使用--port参数绑定到3128时，它仍然说remote: [6844] 25 Mar 20:49:00.206 #Opening port 3128: bind: Permission denied

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:30:15.223

这是带有建议修改的 OpenShift 论坛主题： [https ://www.openshift.com/forums/openshift/how-to-configure-redisconf-on-openshift-for-redis](https://www.openshift.com/forums/openshift/how-to-configure-redisconf-on-openshift-for-redis)

看起来调用 redis-server 使用的默认 conf 参数在 OpenShift 齿轮环境中无法正常工作，因此对 redis.conf 文件进行建议的更改并将其传递给 redis-server 是可行的方法。也有关于预启动和预停止挂钩的建议。

# css - 全宽屏幕图像

> ID：15627280
> 
> 赞同：0
> 
> 时间：2013-03-26T00:27:49.017
> 
> 标签：css, background-image

我正在尝试将这张图片放在我页面的背景中`div`。我正在尝试使其全屏“宽度”。所以图片的大小是`980x420`，但它根本不起作用。我知道我错过了一些东西，但我无法在任何地方找到它。

CSS

```
.Sil{
  max-width: 100%;
  height: 300px;
  background: url(../Images/TALENT.png) no-repeat;
} 
```

HTML

```
<div class="Sil"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:33:33.407

您的图像可能小于 980 像素。如果是这种情况，您可以从`max-width: 100%;`变成`width: 100%'. Other option is to use`background-size:cover;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:01:17.787

[欲了解更多信息](http://www.w3schools.com/cssref/css3_pr_background-size.asp)！去结帐...

# python - Python：熊猫内存错误

> ID：15627282
> 
> 赞同：3
> 
> 时间：2013-03-26T00:28:02.087
> 
> 标签：python, pandas

我有一个相当大的数据集，大约 5287657，大约有 15 列。我试图创建一个数据透视表，它`MemoryError` **在尝试创建 DataFrame 时**给了我一个。
以下是我看到的错误消息：

```
File "C:\Python27\lib\site-packages\pandas\core\frame.py", line 411, in __init__
  arrays, columns = _to_arrays(data, columns, dtype=dtype)
File "C:\Python27\lib\site-packages\pandas\core\frame.py", line 5472, in _to_arrays
  dtype=dtype)
File "C:\Python27\lib\site-packages\pandas\core\frame.py", line 5500, in _list_to_arrays
  coerce_float=coerce_float)
File "C:\Python27\lib\site-packages\pandas\core\frame.py", line 5555, in _convert_object_array
  for arr in content]
File "inference.pyx", line 393, in pandas.lib.maybe_convert_objects (pandas\lib.c:32941)
MemoryError 
```

在发生内存错误之前，我们可以使用 Pandas 操作的数据是否有任何限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:23:21.453

使用[read_csv](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html)创建您的 DataFrame，它已针对此任务进行了大量优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T04:14:43.280

一种方法是[分块分析数据](http://www.pandas-docs.com/dev/io.html#iterating-through-files-chunk-by-chunk)。另一种方法是加载数据的随机样本 - 我已经写了一篇关于此的简短文章 - [https://nikolaygrozev.wordpress.com/2015/06/16/fast-and-simple-sampling-in-pandas-何时从文件加载数据/](https://nikolaygrozev.wordpress.com/2015/06/16/fast-and-simple-sampling-in-pandas-when-loading-data-from-files/)

# hibernate - 解决 Netbeans 中的 Maven 依赖错误

> ID：15627284
> 
> 赞同：0
> 
> 时间：2013-03-26T00:28:11.973
> 
> 标签：hibernate, jakarta-ee, maven, struts2

为什么我会收到以下错误？我正在使用 netbeans，但不确定我应该使用哪个命令行来重新运行 maven 并按照错误说明进行操作。我也发现了这个，但仍然不确定命令行在哪里[Link](http://blog.dawouds.com/2008/11/missing-indirectly-referenced-artifact.html)

我已经下载了以下[代码](http://www.mkyong.com/struts2/struts-2-hibernate-integration-example/)并尝试运行它，但它遇到了以下错误

```
Failed to execute goal on project Struts2Example: Could not resolve dependencies for project com.mkyong.common:Struts2Example:war:com.mkyong.common: The following artifacts could not be resolved: javax.transaction:jta:jar:1.0.1B, javax.security:jacc:jar:1.0: Failure to find javax.transaction:jta:jar:1.0.1B in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -> [Help 1]

To see the full stack trace of the errors, re-run Maven with the -e switch.
Re-run Maven using the -X switch to enable full debug logging.

For more information about the errors and possible solutions, please read the following articles:
[Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:43:06.293

jta.jar 的特定版本不再存在于 maven 存储库中。尝试将版本更改为 1.1 并重建。

虽然，那个版本的 jacc 也不是。所以可能还是有问题。

# iphone - NSInternalInconsistencyException - 根据 CGPoint 位置删除一行

> ID：15627285
> 
> 赞同：0
> 
> 时间：2013-03-26T00:28:23.137
> 
> 标签：iphone, ios, objective-c

所以我有一个带有按钮抽屉的滑动 UITableViewCell。对于另一个用户，我被引导到一个非常好的实现来获取 UITableViewCell 的 indexPath。不幸的是，当我尝试删除该行时出现错误。该对象*确实*删除成功。

```
-(void)checkButtonWasTapped:(id)sender event:(id)event {
    NSSet *touches = [event allTouches];
    UITouch *touch = [touches anyObject];
    CGPoint currentTouchPosition = [touch locationInView:self.tableView];
    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint: currentTouchPosition];
    NSLog(@"%@", indexPath);
    if (indexPath != nil)
    {
        PFObject *object = [self.listArray objectAtIndex:indexPath.row];
        [object deleteInBackgroundWithBlock:^(BOOL succeeded, NSError *error) {
            NSLog(@"%@", indexPath);
            [self.tableView beginUpdates];
            [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                                  withRowAnimation:UITableViewRowAnimationFade];
            [self.tableView endUpdates];
            [self.tableView reloadData];
        }];
    }

} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:37:46.740

看起来您正在使用 Parse，这是一项非常好的服务，IMO。`deleteInBackground:`负责云删除，但您尚未从支持表的本地阵列中删除。尝试添加该行：

```
[self.listArray removeObject:object]; 
```

在你得到`PFObject *object`. 如果它不是一个可变数组，那么你需要一些额外的代码：

```
NSMutableArray *changeMyArray = [self.listArray mutableCopy];  // assume you're using ARC
[changeMyArray removeObject:object];
self.listArray = [NSArray arrayWithArray:changeMyArray]; 
```

此外，由于本地删除是快速同步发生的，因此您无需在云删除的完成块中进行表更新。把它放在内联...

```
 PFObject *object = [self.listArray objectAtIndex:indexPath.row];
    [self.listArray removeObject:object];

    [self.tableView beginUpdates];
    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                              withRowAnimation:UITableViewRowAnimationFade];
    [self.tableView endUpdates];

    [object deleteInBackgroundWithBlock:^(BOOL succeeded, NSError *error) {
        NSLog(@"%@", indexPath);
    }]; 
```

# java - 如何在客户端连续显示控制器响应？

> ID：15627286
> 
> 赞同：0
> 
> 时间：2013-03-26T00:28:33.167
> 
> 标签：java, jquery, spring-mvc

在 Spring MVC 3.2 中，我创建了一个带有 textarea 的 (JSP) 网页。从客户端我触发了一个在服务器上执行的控制台应用程序。我想在浏览器的文本区域中显示此控制台应用程序的输出。

我确实收到了显示控制台 cmd 输出的响应。但是问题是在程序完成后控制台输出会立即显示出来。我想看到每个输出行立即更新 textarea。

**控制器代码**

```
@RequestMapping(value = "/url", method = RequestMethod.POST)
public void Console(HttpServletResponse response) throws Exception {

    Process p = Runtime.getRuntime().exec("cmd /C cd \"C:\\appl\"" + "&" + "consoleApp.bat");

    BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));  

    String line = null; 
    while ((line = in.readLine()) != null) {
          response.getWriter().println(line);
          response.getWriter().flush();
          logger.info(line);
      }

 } 
```

**客户端代码**

```
$(function(){
    $('#someTag').click(function(){
        $.post("url","data",
                function(response){  
                    $('#console').append(response);     
                    var psconsole = $('#console');
                    psconsole.scrollTop(
                        psconsole[0].scrollHeight - (psconsole.height() - 10)
                    );
             });            

    });
}); 
```

### **更新**

我实现了一个轮询机制（见下面的代码）。然而，这是一种比我想象的更间接的方法。如果有人有更简洁的实现或简单的服务器推送示例，我想看看。

**控制器代码**

```
@RequestMapping(value = "/deploy", method = RequestMethod.POST)
public @ResponseBody String console(@RequestParam(value="request", required=false) String request) throws Exception {

    logger.info("status " + request);       

    if(request.equals("start")){
        Process p = Runtime.getRuntime().exec("cmd /C dir C:\\");

        in = new BufferedReader(new InputStreamReader(p.getInputStream()));

        return "started";
    }      

    while ((line = in.readLine()) != null) {
        logger.info(line);
        return line;
      }        

    logger.info("status finished");     
    return "finished";
 } 
```

**客户端代码**

```
 var status = "start";
        var console = $('#console');                        

        console.append("starting" + '\r');              

        (function poll(){                   
           setTimeout(function(){
              $.ajax({ 
                  url: "deploy",
                  data: {request:  status},
                  type: "post",
                  success: function(data){     

                        if(data.indexOf("finished") !== -1){
                            console.append(data + '\r');                                
                            setTimeout(function()
                                    {console.scrollTop(console[0].scrollHeight - console.height());}
                                    , 20);                              
                            status = "finished";
                        }else if(data === ""){
                            console.append('\r');                               
                            setTimeout(function()
                                    {console.scrollTop(console[0].scrollHeight - console.height());}
                                    , 20);
                            status = "processing";                              
                            poll();                             
                        }else{
                            console.append(data + '\r');                                
                            setTimeout(function()
                                    {console.scrollTop(console[0].scrollHeight - console.height());}
                                    , 20);                              
                            status = "processing";
                            poll();
                        }                       
              }, dataType: "text"});
          }, 100);

        })(); 
```

# xcode - 自定义单元加载 NIb 在 ios 6 上工作，但在 ios 5 上崩溃

> ID：15627287
> 
> 赞同：0
> 
> 时间：2013-03-26T00:28:47.113
> 
> 标签：xcode, uitableview, xcode4.5, loadnibnamed

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomCell";
    CustomCell *cell = (CustomCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];

    } 
```

与 ios 6 模拟器完美配合，但在 ios 5 模拟器上崩溃并出现以下错误：“NSInternalInconsistencyException”，原因：“NIB 数据无效。

苹果改变了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:30:05.830

这里有一些建议！

如果您使用最新版本的 Xcode（Xcode 4.5 或 4.6）创建此项目，CustomCell 笔尖默认打开自动布局。但是 iOS 5 中没有自动布局。

此外，您的代码在 iOS 5 和 iOS 6 中都是错误的。如果您从笔尖获取单元格，请不要使用`loadNibNamed:`. 相反，将 nib 注册到表格视图中，使用`registerNib:forCellReuseIdentifier:`. 现在，当您调用`dequeueReusableCellWithIdentifier:`nib 时，如有必要，将自动加载。请注意，此 nib 中必须只有*一个*顶级对象，并且必须是单元格。这是一个愚蠢的规则，但事实就是如此。

# xslt - 使用 对于增量元素名称

> ID：15627290
> 
> 赞同：1
> 
> 时间：2013-03-26T00:28:55.773
> 
> 标签：xslt, xpath, foreach, xslt-1.0

我有一个从 java 映射转换的 XML。所以所有的映射键都被转换成节点名称。XML结构如下

```
<map>
    <firstName>AAA</firstName>
    <firstName1>BBB</firstName1>
    <firstName2>CCC</firstName2>
    <firstName3>DDD</firstName3>
</map> 
```

我正在尝试编写一个 for-each 循环来从此 XML 中提取数据以创建输出 XML。我已经尝试了大多数可用的选项，例如 name()、local-name()、contains() 等，但无法提出可行的方法。由于增量节点名称可以达到 100 或更多，因此有哪些可用选项。对循环进行编码的任何输入都会有很大帮助。我正在使用 XSLT 1.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:51:47.130

**有很多方法可以选择顶部元素 ( `map`) 的子元素：**

```
/*/* 
```

**这将选择作为 XML 文档顶部元素的子元素的所有元素。**

```
/*/*[starts-with(name(), 'firstName')] 
```

**这将选择所有顶部元素的子元素，其名称以字符串开头`'firstName'`。**

```
/*/*[starts-with(name(), 'firstName') 
   and floor(substring-after(name(), 'firstName')) = substring-after(name(), 'firstName')) ] 
```

**这将选择所有顶部元素的子元素，其名称以字符串开头，`'firstName'`其后的剩余子字符串是整数。**

```
/*/*[starts-with(name(), 'firstName') 
   and translate(name(), '0123456789', '') = 'firstName')) ] 
```

**这将选择所有顶部元素的子元素，其名称以字符串开头，`'firstName'`之后的剩余子字符串仅包含数字。**

**最后，在 XPath 2.0 (XSLT 2.0) 中可以使用正则表达式**：

```
/*/*[matches(name(), '^firstName\d+$')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:23:32.340

这将选择所有第一级元素及其信息，然后您可以根据需要使用它们：

```
<xsl:for-each select="/*/*">
    <xsl:value-of select="local-name()"/>
    <xsl:value-of select="."/>
</xsl:for-each> 
```

# forms - 将计算机添加到安全组 - Powershell GUI？

> ID：15627293
> 
> 赞同：1
> 
> 时间：2013-03-26T00:29:11.517
> 
> 标签：forms, user-interface, powershell

本周我的任务是处理问题：如何使用由各种计算机名称输入法组成的功能强大的 Powershell GUI 界面将计算机添加到 OU 中的安全组：-

*   本地主机
*   手动主机名输入
*   从文件加载计算机列表

因为我在网上找不到类似的东西所以我想我会在这里发布这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:18:50.860

我设法自己编写代码。

唯一需要更新才能在另一个环境中工作的是 $OU 变量（在代码的顶部）。

复制代码段并另存为 .ps1

该代码依赖于 ActiveDirectory 模块，如果在本地不可用，它将连接到域控制器并运行远程 Powershell 会话。

注意：如果本地未安装 ActiveDirectory 模块，代码假定 DC 上的 WinRM 服务已设置为远程管理。

![安装软件应用](../Images/0e640c381099b88c4f66b0f2169cdd34.png)

享受！

**这是完整且有效的代码：-**

```
#Generated Form Function
function GenerateForm {
########################################################################
# Code Generated By: SAPIEN Technologies PrimalForms (Community Edition) v1.0.10.0
# Generated On: 25/03/2013 4:56 PM
# Generated By: MrMeaner
########################################################################

#Custom OU variable
$OU = "OU=TESTScripts,OU=Groups,OU=Company,DC=Company,DC=local"

#Runs load_module function that tests for ActiveDirectory module
load_module

#region Import the Assemblies
[reflection.assembly]::loadwithpartialname("System.Drawing") | Out-Null
[reflection.assembly]::loadwithpartialname("System.Windows.Forms") | Out-Null
#endregion

#region Generated Form Objects
$form1 = New-Object System.Windows.Forms.Form
$radioButton3 = New-Object System.Windows.Forms.RadioButton
$radioButton2 = New-Object System.Windows.Forms.RadioButton
$radioButton1 = New-Object System.Windows.Forms.RadioButton
$label3 = New-Object System.Windows.Forms.Label
$textHostname = New-Object System.Windows.Forms.Label
$txtHostname = New-Object System.Windows.Forms.TextBox
$Install = New-Object System.Windows.Forms.Button
$label1 = New-Object System.Windows.Forms.Label
$Browse = New-Object System.Windows.Forms.Button
$ListApps = New-Object System.Windows.Forms.ComboBox
$InitialFormWindowState = New-Object System.Windows.Forms.FormWindowState
#endregion Generated Form Objects

#----------------------------------------------
#Generated Event Script Blocks
#----------------------------------------------
#Provide Custom Code for events.

$Browse_OnClick= 
{
#When Browse button is clicked
$FileName = Select-FileDialog
    if (!$FileName) {}
    else {
        $Computers = Get-Content $FileName
        $Install.enabled = $true
    }
}

$Install_OnClick= 
{
#Add computer to security group script

    if (!$ListApps.SelectedItem) {
        [System.Windows.Forms.MessageBox]::Show("Please select an SCCM application install group name from the drop down menu","Sorry!",[windows.forms.messageboxbuttons]::Ok, [windows.forms.messageboxicon]::Warning) 
        }

    else {

        $AppGroup = $ListApps.SelectedItem.ToString()

        $Group = Get-ADGroup -Identity $AppGroup 

            foreach ($Hostname in $Computers){

                $member = Get-ADComputer -Identity "$Hostname" -Properties MemberOf | Select-Object MemberOf
                $pc = Get-ADComputer "$Hostname" | Select -expand SamAccountName

                if ($member.Memberof -like "$Group"){
                    [System.Windows.Forms.MessageBox]::Show("$Hostname is already a member of $AppGroup","Whoops!",[windows.forms.messageboxbuttons]::Ok, [windows.forms.messageboxicon]::Question)
                }

                else {
                    Add-ADGroupMember $AppGroup $pc -passthru
                    [System.Windows.Forms.MessageBox]::Show("$Hostname has been added to $AppGroup", "Success!",[windows.forms.messageboxbuttons]::Ok, [windows.forms.messageboxicon]::Information)  

                }
            }  
    }

}

$handler_radioButton1_CheckedChanged= 
{
#Localhost radio button
$txtHostname.enabled = $false
$Browse.enabled = $false
$Computers = $env:computername
$Install.enabled = $true

}

$handler_radioButton2_CheckedChanged= 
{
#Enter Hostname radiobutton
$Install.enabled = $false
$txtHostname.enabled = $true
$Browse.enabled = $false
}

$handler_radioButton3_CheckedChanged= 
{
#Load list of computers radiobutton
$Install.enabled = $false
$Browse.enabled = $true
$txtHostname.enabled = $false

}

$handler_textBox1_TextChanged= 
{
#Hostname textbox
$Computers = $txtHostname.Text.ToString()

    if (!$computers) {
        [System.Windows.Forms.MessageBox]::Show("Please enter hostname","Try Again!",[windows.forms.messageboxbuttons]::Ok, [windows.forms.messageboxicon]::Warning)
    }
    else {   

        $queryCount = @(dsquery computer -name $computers).count

        if ($queryCount -eq 1) {
            $Install.enabled = $true
        }

        elseif ($queryCount -gt 1) {
            [System.Windows.Forms.MessageBox]::Show("Ambiguous name: $computers","Try Again!",[windows.forms.messageboxbuttons]::Ok, [windows.forms.messageboxicon]::Warning)
            $Install.enabled = $false
        }

        else {
            [System.Windows.Forms.MessageBox]::Show("Computer not found in AD: $computers","Try Again!",[windows.forms.messageboxbuttons]::Ok, [windows.forms.messageboxicon]::Warning)
            $Install.enabled = $false
        }

    }
}

$handler_form1_Load= 
{
#Runs when script is loaded
$txtHostname.enabled = $false
$Browse.enabled = $false
$Install.enabled = $false
$AppGroupList = Get-ADGroup -Filter {GroupCategory -eq "security"} -SearchBase "$OU" | Select -expand Name | Sort-Object

#Fill the list with the groupnames  
$AppGroupList | % { $ListApps.Items.Add($_) }
}

$OnLoadForm_StateCorrection=
{#Correct the initial state of the form to prevent the .Net maximized form issue
    $form1.WindowState = $InitialFormWindowState
}

#----------------------------------------------
#region Generated Form Code
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 271
$System_Drawing_Size.Width = 284
$form1.ClientSize = $System_Drawing_Size
$form1.DataBindings.DefaultDataSourceUpdateMode = 0
$form1.Name = "form1"
$form1.Text = "Install Software - TEST OU"
$form1.add_Load($handler_form1_Load)

$radioButton3.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 188
$System_Drawing_Point.Y = 58
$radioButton3.Location = $System_Drawing_Point
$radioButton3.Name = "radioButton3"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 51
$System_Drawing_Size.Width = 88
$radioButton3.Size = $System_Drawing_Size
$radioButton3.TabIndex = 10
$radioButton3.TabStop = $True
$radioButton3.Text = "Load List of Computers"
$radioButton3.UseVisualStyleBackColor = $True
$radioButton3.add_CheckedChanged($handler_radioButton3_CheckedChanged)

$form1.Controls.Add($radioButton3)

$radioButton2.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 102
$System_Drawing_Point.Y = 54
$radioButton2.Location = $System_Drawing_Point
$radioButton2.Name = "radioButton2"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 58
$System_Drawing_Size.Width = 80
$radioButton2.Size = $System_Drawing_Size
$radioButton2.TabIndex = 9
$radioButton2.TabStop = $True
$radioButton2.Text = "Enter Hostname"
$radioButton2.UseVisualStyleBackColor = $True
$radioButton2.add_CheckedChanged($handler_radioButton2_CheckedChanged)

$form1.Controls.Add($radioButton2)

$radioButton1.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 7
$System_Drawing_Point.Y = 59
$radioButton1.Location = $System_Drawing_Point
$radioButton1.Name = "radioButton1"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 48
$System_Drawing_Size.Width = 76
$radioButton1.Size = $System_Drawing_Size
$radioButton1.TabIndex = 8
$radioButton1.TabStop = $True
$radioButton1.Text = "LocalHost"
$radioButton1.UseVisualStyleBackColor = $True
$radioButton1.add_CheckedChanged($handler_radioButton1_CheckedChanged)

$form1.Controls.Add($radioButton1)

$label3.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 7
$System_Drawing_Point.Y = 9
$label3.Location = $System_Drawing_Point
$label3.Name = "label3"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 20
$System_Drawing_Size.Width = 185
$label3.Size = $System_Drawing_Size
$label3.TabIndex = 7
$label3.Text = "SCCM Application Install Groups:-"

$form1.Controls.Add($label3)

$textHostname.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 140
$System_Drawing_Point.Y = 113
$textHostname.Location = $System_Drawing_Point
$textHostname.Name = "textHostname"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 27
$System_Drawing_Size.Width = 135
$textHostname.Size = $System_Drawing_Size
$textHostname.TabIndex = 6
$textHostname.Text = "Manual hostname entry"
$textHostname.add_TextChanged($handler_label2_Click)

$form1.Controls.Add($textHostname)

$txtHostname.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 7
$System_Drawing_Point.Y = 113
$txtHostname.Location = $System_Drawing_Point
$txtHostname.Name = "txtHostname"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 20
$System_Drawing_Size.Width = 124
$txtHostname.Size = $System_Drawing_Size
$txtHostname.TabIndex = 5
$txtHostname.add_MouseLeave($handler_textBox1_TextChanged)

$form1.Controls.Add($txtHostname)

$Install.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 7
$System_Drawing_Point.Y = 181
$Install.Location = $System_Drawing_Point
$Install.Name = "Install"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 82
$System_Drawing_Size.Width = 269
$Install.Size = $System_Drawing_Size
$Install.TabIndex = 4
$Install.Text = "Install"
$Install.UseVisualStyleBackColor = $True
$Install.add_Click($Install_OnClick)

$form1.Controls.Add($Install)

$label1.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 140
$System_Drawing_Point.Y = 155
$label1.Location = $System_Drawing_Point
$label1.Name = "label1"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 23
$System_Drawing_Size.Width = 140
$label1.Size = $System_Drawing_Size
$label1.TabIndex = 3
$label1.Text = "Load computers from file"

$form1.Controls.Add($label1)

$Browse.DataBindings.DefaultDataSourceUpdateMode = 0

$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 7
$System_Drawing_Point.Y = 150
$Browse.Location = $System_Drawing_Point
$Browse.Name = "Browse"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 23
$System_Drawing_Size.Width = 124
$Browse.Size = $System_Drawing_Size
$Browse.TabIndex = 2
$Browse.Text = "Browse"
$Browse.UseVisualStyleBackColor = $True
$Browse.add_Click($Browse_OnClick)

$form1.Controls.Add($Browse)

$ListApps.DataBindings.DefaultDataSourceUpdateMode = 0
$ListApps.FormattingEnabled = $True
$System_Drawing_Point = New-Object System.Drawing.Point
$System_Drawing_Point.X = 7
$System_Drawing_Point.Y = 32
$ListApps.Location = $System_Drawing_Point
$ListApps.Name = "ListApps"
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Height = 21
$System_Drawing_Size.Width = 269
$ListApps.Size = $System_Drawing_Size
$ListApps.TabIndex = 0

$form1.Controls.Add($ListApps)

#endregion Generated Form Code

#Save the initial state of the form
$InitialFormWindowState = $form1.WindowState
#Init the OnLoad event to correct the initial state of the form
$form1.add_Load($OnLoadForm_StateCorrection)
#Show the Form
$form1.ShowDialog()| Out-Null

} #End Function

#Select File Explorer Function
function Select-FileDialog {

[void] [System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
$Filter = "Csv files (*.csv)|*.csv|Txt files (*.txt)|*.txt|All files (*.*)|*.*"
$ofd = New-Object System.Windows.Forms.OpenFileDialog
$ofd.Filter = $Filter
$ofd.InitialDirectory = "c:\scripts"
$ofd.ShowHelp=$true
if($ofd.ShowDialog() -eq "OK") { $ofd.FileName }

} #End Function

#Test to see if ActiveDirectory module is install and if not run remote PSsession from domain controller
function load_module($name)
{ 
    if (-not(Get-Module -Name $name)) 
    {
        if (Get-Module -ListAvailable | Where-Object { $_.name -eq $name })
        {
            Import-Module $name  
            return $true
        }
        else
        {   
            return $false
        }
    }
    else
    {
        return $true
    }
}

$moduleName = "ActiveDirectory"

try 
{
    if (load_module $moduleName)
    {
        Write-Host "Loaded $moduleName module on localhost"
    }

    else
    {
        Write-Host "Failed to load $moduleName module"

        #Get Domain Controller name
        $ComputerInfo = get-wmiobject -class "Win32_NTDomain" -namespace "root\CIMV2"
        $DC = ($ComputerInfo[1].DomainControllerName).Replace(“\”,”")

        #Load remote PSsession from domain controller
        Write-Host "Loading remote PSsession to $DC"
        $Session = New-PSsession -Computername $DC
        Invoke-Command -Command {Import-Module "ActiveDirectory"} -Session $Session
        Import-PSSession -AllowClobber -Session $Session -DisableNameChecking -Module $moduleName | Out-Null

    }
}
catch 
{
    Write-Host "Exception caught: $_" 
}

#Call the Function
GenerateForm 
```

# c++ - 圆上的点，有限制。如何计算没有角度，但半径和中心点？

> ID：15627295
> 
> 赞同：2
> 
> 时间：2013-03-26T00:29:30.463
> 
> 标签：c++, excel, geometry

这解释起来很复杂，所以我会尽力而为，如果有什么遗漏的地方，请告诉我，我会改正的。

我的问题是，我的任务是画出这个形状，

[![新月](../Images/fb8b5f72baa66c2248964c275e9336cd.png)](https://i.stack.imgur.com/WlcK1.gif)
[（来源：[learnersdictionary.com](http://www.learnersdictionary.com/art/ld/crescent.gif)）]

这将使用 C++ 编写代码来计算此形状上的点。

重要细节。

用户输入 - 中心点 (X, Y)、要显示的点数、字体大小（影响半径）

输出 - 形状上的坐标列表。

一旦我有了这些点，总体目标就是将它们放入 Excel 上的图表中，并希望它会以用户输入的大小为我绘制它！

我知道最大半径为 165 毫米，最小为 35 毫米。我决定我的基本[字体大小](https://www.sherriwyche.com/tools/fontconversion.html "字体大小")应该是 20。然后我想了想，想出了这个等式。

半径 =（选择的字体大小/20）*130。这只是一个估计，我意识到它可能不对，但我认为它至少可以作为一个模板。

然后我决定我应该创建两个不同的圆，两个不同的中心点，然后将它们连接在一起以创建形状。我认为 INSIDE 线必须有一个更大的半径和一个沿 X 轴更远的中心点（Y 保持不变），因为它可以切入外线。

所以我将第二个中心点定义为 (X+4, Y)。（再次，只是估计，认为它们相距多远并不重要）。

然后我决定 Radius 2 = (Chosen Font Size/20)*165 (max radius)

所以，我有我的 2 个半径和两个中心点。

现在要计算圆圈上的点，我真的很努力。我决定最好的方法是创建一个增量（这里是模板）

```
for(int i=0; i<=n; i++) //where 'n' is users chosen number of points
{ 
  //Equation for X point
  //Equation for Y Point
  cout<<"("<<X<<","<<Y<<")"<<endl;
} 
```

现在，对于我的一生，我无法找出一个方程式来计算分数。我找到了[涉及角度](https://stackoverflow.com/questions/14096138/find-the-point-on-a-circle-with-given-center-point-radius-and-degree "涉及角度")的方程，但因为我没有，所以我很挣扎。

本质上，我是在尝试在这里计算“P”点，除了一直绕着圆圈。 [（来源：][[tutorvista.com](http://images.tutorvista.com/cms/images/67/equation-circle.png)][）][![圆上的点](../Images/b04025d77343500a7e80dd13f026a4a3.png)](https://i.stack.imgur.com/tdDWt.png)

我想的另一点可能是一个问题是对计算出的值施加限制以仅显示形状上的值。？除了使外线成为一个完整的半圆以使我有最大半径之外，不确定如何选择限制？

所以。有没有人可以与我分享有关如何准确进行的任何提示/提示/链接？

再次感谢，问题有任何问题，如果你让我知道，对不起，我会尽力纠正。

干杯

更新;

```
R1 = (Font/20)*130;
R2 = (Font/20)*165;

for(X1=0; X1<=n; X1++)
{
    Y1 = ((2*Y)+(pow(((4*((pow((X1-X), 2)))+(pow(R1, 2)))), 0.5)))/2;
    Y2 = ((2*Y)-(pow(((4*((pow((X1-X), 2)))+(pow(R1, 2)))), 0.5)))/2;
    cout<<"("<<X1<<","<<Y1<<")";
    cout<<"("<<X1<<","<<Y2<<")";
} 
```

观点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:48:04.320

根据 Code-Guru 对该问题的评论，内圈看起来更像是一个半圈而不是外圈。使用 Code-Guru 答案中的方程式计算内圈的点。然后，看看[这个问题](https://math.stackexchange.com/questions/5170/find-the-radius-of-a-circle-based-off-of-its-intersection-with-another)如何计算与你的圆相交的圆的半径，给定距离（你可以任意设置）和交点（你知道，因为它是一个半圆）。从这里你可以画出任何给定距离的外弧，你需要做的就是改变距离，直到你产生一个你满意的形状。

[这个问题](https://stackoverflow.com/questions/15525941/find-points-on-circle)可以帮助您应用 Code-Guru 的方程式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T00:35:28.200

圆的方程是

```
(x - h)^2 + (y - k)^2 = r^2 
```

使用一点代数，您可以迭代`x`从`h`到`h+r`递增某个适当的范围，`delta`并计算 y 的两个对应值。这将绘制一个完整的圆圈。

下一步是找到两个圆相交的 x 坐标（假设月亮形状由两个适当的圆定义）。同样，一些代数和铅笔和纸会有所帮助。

**更多细节：**

要在不使用极坐标和三角函数的情况下绘制圆，您可以执行以下操作：

```
for x in h-r to h+r increment by delta
    calculate both y coordinates 
```

要计算 y 坐标，您需要求解 y 的圆方程。最简单的方法是将其转换为形式`A*y^2+B*y+C=0`的二次方程并使用二次方程：

```
(x - h)^2 + (y - k)^2 = r^2
(x - h)^2 + (y - k)^2 - r^2 = 0
(y^2 - 2*k*y + k^2) + (x - h)^2  - r^2 = 0
y^2 - 2*k*y + (k^2 + (x - h)^2  - r^2) = 0 
```

所以我们有

```
A = 1
B = -2*k
C = k^2 + (x - h)^2  - r^2 
```

现在将这些代入二次方程，并在 for 循环中为每个 x 值取出两个 y 值。（很可能，您会希望在单独的函数中进行计算——或函数。）

如您所见，这非常混乱。用三角函数和角度来做这件事会更干净。

**更多想法：**

即使问题中描述的用户输入中没有角度，也没有内在的原因为什么您不能在计算期间使用它们（除非您有其他特定要求，比如因为您的老师告诉您不要这样做）。话虽如此，使用极坐标使这变得容易得多。对于一个完整的圈子，您可以执行以下操作：

```
for theta = 0 to 2*PI increment by delta
    x = r * cos(theta)
    y = r * sin(theta) 
```

要绘制圆弧而不是完整的圆，您只需更改`theta`for 循环中的限制。例如，圆圈的左半部分从`PI/2`到`3*PI/2`。

# javascript - Utilities.formatString() 新的 Apps 脚本方法，未按预期工作

> ID：15627298
> 
> 赞同：4
> 
> 时间：2013-03-26T00:29:52.347
> 
> 标签：javascript, google-apps-script

我正在使用新方法：Utilities.formatString()

在[Google 文档](https://developers.google.com/apps-script/class_utilities#formatString)中说它类似于 sprintf %-style。

我搜索并阅读[了这篇](http://php.net/manual/en/function.sprintf.php)关于 PHP 中 sprintf 的文章。

我似乎无法让它按预期工作。这意味着用 4 个前导零填充这 8 个字符的字符串。我知道还有其他方法可以做到这一点，但我正在尝试处理这个 sprintf / formatString 事情。

```
var noFormat = "12345678";
var formatted = Utilities.formatString("%012s", noFormat); 
```

我希望格式化的 var 等于“000012345678”。我的调试器告诉我formatted = 0，或者有时它会抛出一个错误..

我很困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T07:23:29.113

像这样尝试：

```
function xxx(){
  var noFormat = '12345678'
  var formatted = Utilities.formatString("%012d", noFormat);
Logger.log(formatted)
} 
```

可以使用的不同参数在网络上很容易找到，[这里有一个例子](http://www.php.net/manual/en/function.sprintf.php)解释了如何在 php 中评估参数，但用法是相同的。

记录器结果：

![在此处输入图像描述](../Images/4f48b38ff6e5a330f274c9c66b1bebea.png)

# sql - 在多对多关系中使用“AND”

> ID：15627299
> 
> 赞同：-1
> 
> 时间：2013-03-26T00:29:54.440
> 
> 标签：sql, sql-server, sql-server-2008, tsql, select

我有一张`Users`桌子和一张`Groups`桌子。用户可以通过“UserInGroup”表在多个组中，组可以有一个“GroupTypeId”。

```
[User]
--------------
Id | Name
1  | Bob
2  | James

[UserInGroup]
-----------------
UserId | GroupId
1        1
1        2

[Group]
Id | Name      | TypeId
------------------------
1  | Directors | 1
2  | IT        | 1
3  | London    | 2 
```

我想创建一个查询以返回例如同时位于“Directors”和“London”（而不是“Directors”或“London”）的用户。但是，我只想 AND 不同“类型”的组，我想 OR 相同类型的组。我可以为每个组类型创建一个单独的表，但我不能，因为它们是动态创建的。

理想情况下，我希望能够查询“Directors”或“IT”和“London”中的用户。

这样做最有效的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:34:01.307

这个问题通常被称为`Relational Division`.

```
SELECT  a.Name
FROM    [user] a
        INNER JOIN UserInGroup b
            ON a.ID = b.UserID
        INNER JOIN [Group] c
            ON b.groupID = c.TypeId
WHERE   c.Name IN ('Directors','London')
GROUP   BY a.Name
HAVING  COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/155b2/3)
*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

但是，如果没有对`UNIQUE`each 强制执行约束，则需要使用关键字来过滤掉唯一组：`GROUP``USER``DISTINCT`

```
SELECT  a.Name
FROM    [user] a
        INNER JOIN UserInGroup b
            ON a.ID = b.UserID
        INNER JOIN [Group] c
            ON b.groupID = c.TypeId
WHERE   c.Name IN ('Directors','London')
GROUP   BY a.Name
HAVING  COUNT(DISTINCT c.Name) = 2 
```

* * *

*两个查询的*输出

 *```
╔══════╗
║ NAME ║
╠══════╣
║ Bob  ║
╚══════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:16:23.327

我得出了以下解决方案（在 JW 和[本文](https://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/ "本文")的帮助下）：

```
SELECT  
  u.Name UserName
FROM [User] u
INNER JOIN [UserInGroup] uig
  ON uig.UserId = u.Id
INNER JOIN [Group] g
  ON g.Id = uig.GroupId
WHERE 
  g.Id IN (1,2,3) -- these are the passed in groupids
GROUP BY 
  u.Name
having count(distinct g.TypeId)
  = (select count(distinct g1.TypeId) 
     from [group] g1 where g1.Id IN (1,2,3)) 
```

这使我可以通过鉴别器字段对关系划分进行分组。另一种选择是：

```
SELECT  a.Name
FROM    [User] a
    INNER JOIN
    (
      SELECT  b.UserID
      FROM    UserInGroup b
              INNER JOIN [Group] c
                  ON b.groupID = c.Id
      WHERE   c.Name IN ('Directors','IT')
      GROUP   BY b.UserID
      HAVING  COUNT(DISTINCT c.Name) >= 1
    ) b ON a.ID = b.UserID
    INNER JOIN
    (
      SELECT  DISTINCT b.UserID
      FROM    UserInGroup b
              INNER JOIN [Group] c
                  ON b.groupID = c.Id
      WHERE   c.Name = 'London'
    ) c ON a.ID = c.UserID 
```

每个 GroupTypeId 都有一个额外的连接。执行计划看起来很相似，所以我选择了第一个选项。*

# hex - windbg中的十六进制转十进制

> ID：15627300
> 
> 赞同：1
> 
> 时间：2013-03-26T00:30:04.990
> 
> 标签：hex, decimal, windbg

看起来 WinDbg 的默认值是以十进制显示整数，以十六进制显示无符号整数。有没有办法以十进制显示所有内容？

我尝试使用[这里提到](http://msdn.microsoft.com/en-us/library/windows/hardware/ff552287%28v=vs.85%29.aspx)`n`的命令

虽然它给了我语法错误：

```
:086> n[10]
      ^ Syntax error in 'n[10]' 
```

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T01:13:13.707

似乎您不应该使用方括号。在[MSDN 页面上](http://msdn.microsoft.com/en-us/library/windows/hardware/ff552287%28v=vs.85%29.aspx)，这些方括号用于显示 radix 参数是可选的。

当参数被取消时，当前的基数会显示给您。

```
0:000> n
base is 10 
```

当您提供参数（没有方括号）时，当前基数会更改并回显给您。

```
0:000> n 16
base is 16 
```

设置基数后，一个常用的技巧是使用`?`( [Evaluate Expression](http://msdn.microsoft.com/en-us/library/windows/hardware/ff566240%28v=vs.85%29.aspx) ) 命令将数字转换为新的基数（在本例中，基数为 16）。

```
0:000> ? 0n10
Evaluate expression: 10 = 0000000a

0:000> ? 0y11
Evaluate expression: 11 = 00000003 
```

要将十六进制（以 16 为基数）转换回十进制：

```
0:000> ? a
Evaluate expression: 10 = 0000000a 
```

请记住，一旦设置了基数，输入和输出都会受到影响，这意味着当您要输入一个不是当前基数的数字时，您需要像上面最后一个示例中所做的那样指定基数。有关如何在类似 MASM 的语法中处理数字的进一步阅读可[在此处](http://msdn.microsoft.com/en-us/library/ff552157%28v=vs.85%29.aspx)获得。

但回到你原来的问题......

是的，`n 10`应该足以强制数字以十进制显示。如果由于某种原因出现问题，您始终可以使用`?`如上所示的命令来执行转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:21:44.140

描述 WinDbg 如何评估表达式的扩展文章（包括有关 n 命令影响的详细信息）可在此处获得：

[https://www.osronline.com/article.cfm?id=540](https://www.osronline.com/article.cfm?id=540)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T12:10:09.737

尝试使用命令：-

.enable_long_status 0

# java - 意图使我的应用程序崩溃

> ID：15627302
> 
> 赞同：2
> 
> 时间：2013-03-26T00:30:06.467
> 
> 标签：java, android, android-intent

一旦用户通过意图登录并使用Bundle接收它，我目前正在发送一个变量。

我已经检查了 LogCat 并收到了变量，但是一旦我收到它，应用程序就会崩溃......下面是我的代码。

```
Bundle bundle = getIntent().getExtras();
    final int cameraId = 0;
    final TextView welcomeText = (TextView) findViewById(R.id.WelcomeText);
    final TextView relocationId = (TextView) findViewById(R.id.RelocationID);
    final TextView addressOne = (TextView) findViewById(R.id.addressOne);
    final TextView addressTwo = (TextView) findViewById(R.id.addressTwo);
    final String RelocationId = bundle.getString("UID");
    relocationId.setText("Your Relocation: #" + RelocationId); 
```

这就是我的包在接收端的样子（但之后崩溃）。如果我注释掉最后两行，它会像往常一样继续。

日志猫：

```
03-25 18:35:50.749: E/AndroidRuntime(19145): FATAL EXCEPTION: main
03-25 18:35:50.749: E/AndroidRuntime(19145): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.testingapp/com.testingapp.MoveContactsActivity}: java.lang.NullPointerException
03-25 18:35:50.749: E/AndroidRuntime(19145):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at android.os.Looper.loop(Looper.java:137)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at java.lang.reflect.Method.invokeNative(Native Method)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at java.lang.reflect.Method.invoke(Method.java:511)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at dalvik.system.NativeStart.main(Native Method)
03-25 18:35:50.749: E/AndroidRuntime(19145): Caused by: java.lang.NullPointerException
03-25 18:35:50.749: E/AndroidRuntime(19145):    at com.testingapp.MoveContactsActivity.onCreate(MoveContactsActivity.java:69)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at android.app.Activity.performCreate(Activity.java:5206)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-25 18:35:50.749: E/AndroidRuntime(19145):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
03-25 18:35:50.749: E/AndroidRuntime(19145):    ... 11 more 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:39:38.607

这意味着在你膨胀`TextView`的那个中不存在。`Layout`检查您的 xml 是否正确拼写了名称。如果您仍然无法修复错误，请发布您在 xml中添加`Layout`可能的位置。`onCreate()`既然你`TextView`是`null`你，`NPE`当你尝试调用`setText()`它时，你会得到一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:39:46.710

你确定你之前真的添加了额外的东西吗？从文档

```
Returns the map of all extras previously added with putExtra(), 
or null if none have been added. 
```

我怀疑 getExtras() 方法返回 null，因为在您调用它之前没有向意图添加任何额外内容。

您是直接运行新活动，还是使用意图（设置了附加功能）开始此活动。

或者正如其他人所提到的，问题可能出在您的文本视图上。一个非常简单的测试方法就是注释掉最后一个like。如果这解决了问题，那么问题就是您的文本视图。

# html - 在@media print css 中使用命名页面

> ID：15627304
> 
> 赞同：3
> 
> 时间：2013-03-26T00:30:15.533
> 
> 标签：html, css, printing, media

我在[使用命名页面](http://www.w3.org/TR/2013/WD-css3-page-20130314/#page)时遇到了麻烦。

```
@page mypage{
    margin:0; 
}
div.mypage{
    page:mypage;
}

<div class="mypage">Some content</div> 
```

但也许真正的问题是：是否有人浏览器支持此规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:45:39.210

@page 规则基本支持（css2.1）得到很好的支持。您在示例中使用的页面类型选择器是 css3（[http://dev.w3.org/csswg/css3-page/#using-named-pages](http://dev.w3.org/csswg/css3-page/#using-named-pages)...as) ）...至于浏览器支持，您的猜测也一样好作为我的。它没有显示在 caniuse.com 上，也没有显示在 mdn 上。

# python - 有限嵌入式设备上的纪元秒到日期转换

> ID：15627307
> 
> 赞同：6
> 
> 时间：2013-03-26T00:30:51.137
> 
> 标签：python, datetime, embedded, epoch, ntp

我试图找出从纪元秒（自 NTP 纪元 1900-01-01 00:00 起）转换为日期时间字符串（MM/DD/YY，hh:mm:ss）的最佳方法，无需任何库/模块/外部功能，因为它们在嵌入式设备上不可用。

我的第一个想法是查看[Python 日期时间模块源代码](http://svn.python.org/projects/python/trunk/Modules/datetimemodule.c)，但这对我来说不是很有用。

我在 Python 中的最初尝试使用从 0001-01-01 到日期的天数转换，使用从[C++ 源](http://qt.gitorious.org/qt/qt/blobs/4.7/src/corelib/tools/qdatetime.cpp#line132)`getDateFromJulianDay`适应 Python并结合模运算来获取时间。它有效，但有更好的方法吗？

```
def getDateFromJulianDay(julianDay):
    # Gregorian calendar starting from October 15, 1582
    # This algorithm is from:
    # Henry F. Fliegel and Thomas C. van Flandern. 1968.
    # Letters to the editor:
    #     a machine algorithm for processing calendar dates.
    # Commun. ACM 11, 10 (October 1968), 657-. DOI=10.1145/364096.364097
    # http://doi.acm.org/10.1145/364096.364097
    ell = julianDay + 68569;
    n = (4 * ell) / 146097;
    ell = ell - (146097 * n + 3) / 4;
    i = (4000 * (ell + 1)) / 1461001;
    ell = ell - (1461 * i) / 4 + 31;
    j = (80 * ell) / 2447;
    d = ell - (2447 * j) / 80;
    ell = j / 11;
    m = j + 2 - (12 * ell);
    y = 100 * (n - 49) + i + ell;
    return y,m,d

# NTP response (integer portion) for Monday, March 25, 2013 at 6:40:43 PM
sec_since_1900 = 3573225643

# 2415021 is the number of days between 0001-01-01 and 1900-01-01,
#     the start of the NTP epoch
(year,month,day) =  getDateFromJulianDay(2415021 + sec_since_1900/60/60/24)

seconds_into_day = sec_since_1900 % 86400
(hour, sec_past_hour) = divmod(seconds_into_day,3600)
(min, sec) = divmod(sec_past_hour,60)
print 'year:',year,'month:',month,'day:',day
print 'hour:',hour,'min:',min,'sec:',sec 
```

为什么我要这样做：我从 NTP 服务器获取当前时间，并将这个时间用于更新仅接受日期、时间和时区的硬件实时时钟 (RTC)：MM/DD/ YY,hh:mm:ss,±zz。我计划在以后实现真正的 NTP 功能。时间同步方法的讨论最好留在别处，例如[这个问题](https://stackoverflow.com/questions/5642946/small-footprint-clock-synchronization-without-ntp)。

笔记：

*   我的嵌入式设备是一个 Telit GC-864 蜂窝调制解调器，它运行 Python 1.5.2+，只有有限的运算符（主要是 C 运算符），没有模块，以及一些预期的内置 Python 类型。确切的功能在[这里](http://www.telit.com/module/infopool/download.php?id=617)，如果您有兴趣。我为这个设备编写 Python，就好像我在编写 C 代码一样——我知道，不是很 Pythonic。
*   我意识到 NTP 最好仅用于时间偏移，但是由于选项有限，我使用 NTP 作为绝对时间源（我可以在 2036 年添加对 NTP 翻转的检查以启用另外 136 年的运行）。
*   具有最新固件的 GC-864-V2 设备确实具有 NTP 功能，但我需要使用的 GC-864 卡在以前的固件版本上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T23:28:27.757

最初提出的`getDateFromJulianDay`函数计算量太大，无法在嵌入式设备上有效使用，其中包含对大型`long`变量或最初用 C++ 编写的变量[`longlong`的](http://qt.gitorious.org/qt/qt/blobs/4.7/src/corelib/tools/qdatetime.cpp#line140)许多乘法和除法运算。

我想我为嵌入式设备找到了一个有效的时代算法。

谷歌搜索无果后，我发现自己又回到了 Stack Overflow，找到了[Converting epoch time to “real” date/time](https://stackoverflow.com/questions/1692184/converting-epoch-time-to-real-date-time)这个问题，询问自写的 epoch time to date implementation 并提供了一个合适的算法。该问题的[答案](https://stackoverflow.com/a/1692210/2209295)引用了[gmtime.c 源代码](http://www.raspberryginger.com/jbailey/minix/html/gmtime_8c-source.html)，并提供了编写 Python 转换算法所需的 CI 源代码：

```
/*
 * gmtime - convert the calendar time into broken down time
 */
/* $Header: /opt/proj/minix/cvsroot/src/lib/ansi/gmtime.c,v 1.1.1.1 2005/04/21 14:56:05 beng Exp $ */

#include        <time.h>
#include        <limits.h>
#include        "loc_time.h"

struct tm *
gmtime(register const time_t *timer)
{
        static struct tm br_time;
        register struct tm *timep = &br_time;
        time_t time = *timer;
        register unsigned long dayclock, dayno;
        int year = EPOCH_YR;

        dayclock = (unsigned long)time % SECS_DAY;
        dayno = (unsigned long)time / SECS_DAY;

        timep->tm_sec = dayclock % 60;
        timep->tm_min = (dayclock % 3600) / 60;
        timep->tm_hour = dayclock / 3600;
        timep->tm_wday = (dayno + 4) % 7;       /* day 0 was a thursday */
        while (dayno >= YEARSIZE(year)) {
                dayno -= YEARSIZE(year);
                year++;
        }
        timep->tm_year = year - YEAR0;
        timep->tm_yday = dayno;
        timep->tm_mon = 0;
        while (dayno >= _ytab[LEAPYEAR(year)][timep->tm_mon]) {
                dayno -= _ytab[LEAPYEAR(year)][timep->tm_mon];
                timep->tm_mon++;
        }
        timep->tm_mday = dayno + 1;
        timep->tm_isdst = 0;

        return timep;
} 
```

另外，[分析](https://stackoverflow.com/a/3136466/2209295)一下[为什么gmtime是这样实现的？](https://stackoverflow.com/questions/3136341/why-is-gmtime-implemented-this-way)帮助确认该`gmtime`功能相当有效。

使用[raspberryginger.com minix Doxygen 文档站点](http://www.raspberryginger.com/jbailey/minix/html/)，我能够从[loc_time.h中](http://www.raspberryginger.com/jbailey/minix/html/loc__time_8h-source.html)[找到 gmtime.c](http://www.raspberryginger.com/jbailey/minix/html/gmtime_8c-source.html)中包含的 C 宏和常量。相关代码片段：

```
#define YEAR0           1900                    /* the first year */
#define EPOCH_YR        1970            /* EPOCH = Jan 1 1970 00:00:00 */
#define SECS_DAY        (24L * 60L * 60L)
#define LEAPYEAR(year)  (!((year) % 4) && (((year) % 100) || !((year) % 400)))
#define YEARSIZE(year)  (LEAPYEAR(year) ? 366 : 365)
#define FIRSTSUNDAY(timp)       (((timp)->tm_yday - (timp)->tm_wday + 420) % 7)
#define FIRSTDAYOF(timp)        (((timp)->tm_wday - (timp)->tm_yday + 420) % 7)
#define TIME_MAX        ULONG_MAX
#define ABB_LEN         3

extern const int _ytab[2][10]; 
```

并且在[misc.c](http://www.raspberryginger.com/jbailey/minix/html/lib_2ansi_2misc_8c-source.html#l00082)`extern const int _ytab`中定义：

```
const int _ytab[2][12] = {
                { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 },
                { 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 }
        }; 
```

我发现的其他一些东西：

*   gmtime.c[文件参考](http://www.raspberryginger.com/jbailey/minix/html/gmtime_8c.html)对于查找依赖项非常有帮助。
*   该`gmtime`函数从数字 0 开始索引月份、星期几和一年中的某一天（最大范围分别为 0-11、0-6、0-365），而月份日期从数字 1 开始， (1-31)，请参阅[IBM`gmtime()`参考资料](http://publib.boulder.ibm.com/infocenter/zvm/v6r1/index.jsp?topic=/com.ibm.zvm.v610.edclv/gmtime.htm)。

* * *

`gmtime`我为 Python 1.5.2+重新编写了函数：

```
def is_leap_year(year):
    return ( not ((year) % 4) and ( ((year) % 100) or (not((year) % 400)) ) )

def year_size(year):
    if is_leap_year(year):
        return 366
    else:
        return 365

def ntp_time_to_date(ntp_time):
    year = 1900         # EPOCH_YR for NTP
    ytab =  [ [ 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
              [ 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31] ]

    (dayno,dayclock) = divmod(ntp_time, 86400L)
    dayno = int(dayno)

    # Calculate time of day from seconds on the day's clock.
    (hour, sec_past_hour) = divmod(dayclock,3600)
    hour = int(hour)
    (min, sec) = divmod(int(sec_past_hour),60)

    while (dayno >= year_size(year)):
        dayno = dayno - year_size(year)
        year = year + 1
    month = 1                           # NOTE: month range is (1-12)
    while (dayno >= ytab[is_leap_year(year)][month]):
        dayno = dayno - ytab[is_leap_year(year)][month]
        month = month + 1
    day = dayno + 1

    return (year, month, day, hour, min, sec) 
```

我将 C++`gmtime`函数重构为 Python 函数的修改`ntp_time_to_date(ntp_time)`：

*   将纪元从 1970 年的 UNIX 纪元更改为 1900 年的 NTP 纪元（NTP[的主要纪元](http://www.eecis.udel.edu/~mills/y2k.html#era)）。
*   稍微简化了一天中的时间计算。
    *   `gmtime`比较一天中的时间计算`ntp_time_to_date`：
        *   `(dayclock % 3600) / 60`和都发生在和`dayclock / 3600`的幕后。`divmod(dayclock,3600)``divmod(sec_past_hour,60)`
        *   唯一真正的区别是`divmod(sec_past_hour,60)`避免`dayclock`通过 60对 (0-86399) 取`dayclock % 60`模，而是在`sec_past_hour`内对 (0-3599) 取 60 取模`divmod(sec_past_hour,60)`。
*   删除了我不需要的变量和代码，例如星期几。
*   将月份的索引更改为从 1 开始，因此月份范围是 (1-12) 而不是 (0-11)
*   `long`值小于 65535 时立即 键入强制类型转换变量，以大大减少代码执行时间。
    *   需要长变量是：
        *   `ntp_time`, 自 1900 年以来的秒数 (0-4294967295)
        *   `dayclock`, 秒到一天 (0-86399)
    *   其余变量中最大的是该日期内的计算年份。

* * *

Python`ntp_time_to_date`函数（及其依赖项）在 Python 1.5.2+ 的嵌入式版本以及 Python 2.7.3 上的 Telit GC-864 上成功运行，但当然可以使用 datetime 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T14:00:21.510

# TL;博士

如果您使用的是 Telit GC-864，Python 解释器似乎会在每行代码执行之间插入某种延迟。

对于 Telit GC-864，我的问题`getDateFromJulianDay(julianDay)`中的函数比我的答案中的函数快，`ntp_time_to_date(ntp_time)`.

# 更多详情

在 GC-864 上，代码*行的数量比代码的**复杂性*更能支配执行时间——我知道，这很奇怪。我的问题中的函数`getDateFromJulianDay(julianDay)`有一些复杂的操作，可能有 15 行代码。我的答案中的函数`ntp_time_to_date(ntp_time)`具有更简单的计算复杂度，但`while`循环会导致 100 多行代码执行：

*   一个循环从 1900 年计数到当前年份
*   另一个循环从第 1 个月计数到当前月份

# 试验结果

每次试验使用相同的 NTP 时间输入（每个函数输出“3/25/2013 18:40”）在实际 GC-864（注意：**不是GC-864-V2）上运行的计时测试结果。**使用 printf 语句调试进行计时，计算机上的串行终端将为 GC-864 发送的每一行打上时间戳。

`getDateFromJulianDay(julianDay)`试验：

*   0.3802 秒
*   0.3370 秒
*   0.3370 秒
*   平均：0.3514 秒

`ntp_time_to_date(ntp_time)`试验：

*   0.8899 秒
*   0.9072 秒
*   0.8986 秒
*   平均：0.8986 秒

可变性部分源于定期服务蜂窝网络任务的 GC-864 蜂窝调制解调器。

为了完整起见，尽可能快地对`long`变量进行类型转换的优化具有相当显着的效果。没有这个优化：`int``ntp_time_to_date(ntp_time)`

*   2.3155 秒
*   1.5034 秒
*   1.5293 秒
*   2.0995 秒
*   2.0909 秒
*   平均：1.9255 秒

在 Python 1.5.2+ 中运行 .pyo 文件的 Telit GC-864 上执行任何涉及计算的操作都不是一个好主意。对于遇到此问题的人来说，使用具有内置 NTP 功能的 GC-864-V2 是一种可能的解决方案。此外，更新的机器对机器 (M2M) 也就是物联网 (IoT) 手机调制解调器功能更强大。

如果您对 GC-864 有类似问题，请**考虑使用更新、更现代的手机调制解调器**。

# jquery-mobile - JQuery Mobile 1.3.0 可折叠嵌套列表未正确呈现

> ID：15627310
> 
> 赞同：0
> 
> 时间：2013-03-26T00:31:04.210
> 
> 标签：jquery-mobile

我有一个动态插入 DOM 的 JQM 页面，并且每次都必须重新生成，因为数据可能会发生变化。第一次显示页面时，一切正常，但如果用户稍后返回此页面，我会遇到以下渲染问题。这是关闭的列表：

![可折叠列表，已关闭](../Images/8f52393b28fce286de24cacb740241cf.png)

这是第二次查看屏幕时打开的列表：

![在此处输入图像描述](../Images/72a3ef58929257dcbf2a01723ef3f6b3.png)

我已经尝试了、 和的各种组合`$(id-selector).trigger('create')`，但到目前为止，没有什么能让页面第二次像第一次那样工作。`.remove()``.empty()`

对于它的价值，因为这似乎是 JQM 的一个问题，我正在寻求解决方法，这里是构建这个列表的代码：

```
var url_base_key = resource.url + '_base';
html += '<div data-role="collapsible-set" data-inset="false" id="per-back-issues">';
if (window.per_info.back_issues.length > 0){
    html += '<br /><p><b>' + Label('label_back_issues') + '</b></p>';
    for (var i = 0; i < window.per_info.back_issues.length; i++){
        var group = window.per_info.back_issues[i];
        if (group.issues.length > 0){
            html += '<div data-role="collapsible" class="per_group" id="per-group-' + group.group + '"><h2 id="group-label-' + group.group + '">' + group.group + '</h2><ul data-role="listview">';
            for(var j = 0; j < group.issues.length; j++){
                var issue = group.issues[j];
                var url_base = window.orgbase_api[url_base_key];
                var url = url_base + issue.formats[0].file;
                var id = resource.orgbaseapi_url + '-' + issue.year + '-' + issue.month + '-lit_menu_item';
                var item = '<li class="per_item">' + GetPdfLink(resource.id, id, url, GetLongMonth('gregorian', issue.month)) + '</li>'
                html += item;
            }
            html += '</ul></div>';
        }
    }
}
html += '</div>'; 
```

此内容包装在 JQM 页面容器中

```
<div id="newsletter" data-role="page" data-theme="b" data-content-theme="b">
    <div data-role="header">
        <a href="#" data-rel="back" data-role="button" data-icon="back" data-mini="true" class="ui-btn-left" data-iconpos="notext" data-direction="reverse" data-transition="slide">Back</a>
        <h1>Newsletter</h1>
        <a href="#home" data-role="button" data-icon="home" data-mini="true" class="ui-btn-right" data-iconpos="notext" data-direction="reverse" data-transition="slide">Home</a>
    </div>
...
</div> 
```

并且每次都添加到 DOM

```
var new_screen = $(html);
new_screen.appendTo($.mobile.pageContainer); 
```

如果我尝试在 appendTo() 之前执行 $('#newsletter').remove()，则 appendTo() 不起作用。我不能使用扩展事件来强制列表重新绘制自身，因为该事件在扩展发生*之前触发。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:04:01.837

好的，问题似乎是`new_screen.appendTo($.mobile.pageContainer)`同一个id多次使用。`$('#' + id).empty().remove()`如果它在 之前已经存在，我曾尝试将其删除`appendTo()`，但我无法再次添加它（也许有人可以帮助我理解为什么我不能这样做）。因此，如果容器已经存在并且解决了问题，我尝试仅更新容器。我想了解多次添加该项目如何导致我得到的结果。

```
if ($('#' + id).length > 0){
    var html = script + body;
    //update existing page container
    $(id).html(html);
} else {
    var html = '<div id="' + id + '" data-role="page" data-url="' + id
        + '" data-theme="' + theme + '" data-content-theme="' + theme + '" class="screen_section">'
        + script + body + '</div>';
    var new_screen = $(html);            
    //add new page container to DOM
    new_screen.appendTo($.mobile.pageContainer);
} 
```

# regex - 可以将字符添加到字符串作为正则表达式 (regex) 的一部分

> ID：15627311
> 
> 赞同：0
> 
> 时间：2013-03-26T00:31:10.833
> 
> 标签：regex

我使用一个应用程序在 XML 记录的自由文本字段中查找特定的文本模式。它使用正则表达式来识别模式，然后在 XML 中对其进行标记。对于一个特定的项目，如果我可以在我必须使用的模式之一前面添加 2 个字符 27，那将是一个很好的节省时间（我正在处理大约 1800 万条记录）。

这可以完成还是我只需要走很长的路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:33:51.680

不，你不能有一个不存在的正则表达式匹配文本。正则表达式将只能返回作为原始文本一部分的文本。

但是，如果您匹配到组，您可能会使用组名称来获取有关您匹配的内容的额外信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:35:25.823

如果您想编辑 XML 文件，Regex 不是正确的工具。相反，使用 Python、Perl、Ruby、PHP、Java 等现代语言和适当的 XML 解析器模块。如果你像 shell 一样在 Unix 中工作，我推荐[`xmlstarlet`](http://xmlstar.sourceforge.net/)

也就是说，如果您想继续进行替换，可以尝试[sed](/questions/tagged/sed "显示标记为“sed”的问题")（风险自负）：

```
sed -i -r 's/987654/27&/g' files*.xml 
```

（仅使用`-i`switch 仅用于*就地*修改）

# python - 我在切片范围中使用什么值来包含 numpy 数组中的最后一个值？

> ID：15627312
> 
> 赞同：18
> 
> 时间：2013-03-26T00:31:17.827
> 
> 标签：python, numpy, scipy

想象一些 numpy 数组，例如`x = np.linspace(1,10)`.

`x[i:j]`让我了解`x`范围`[i,j)`。我喜欢我也可以做`x[i:-k]`的，它排除了最后一个`k`元素。

但是，为了包含我需要做的最后一个元素`x[i:]`。

我的问题是：例如，如果我需要遍历`k`.

说我想这样做：

```
l = list()
for k in [5,4,3,2,1]:
    l.append(x[:-k])
l.append(x[:]) 
```

让我恼火的是最后一行。当然，在这个简单的例子中，它并没有太大的区别，但有时这会变得更烦人。我想念的是更干燥的东西。

以下片段课程不会产生预期的结果，但代表了我寻求的代码风格：

```
l = list()
for k in [5,4,3,2,1,0]:
    l.append(x[:-k]) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-26T00:42:20.080

这有点痛苦，但由于`-0`与 相同`0`，因此没有简单的解决方案。

一种方法是：

```
l = list()
for k in [5,4,3,2,1,0]:
    l.append(x[:-k or None]) 
```

这是因为 when`k`是 0，`-k or None`是`None`，并且`x[:None]`会做你想做的事。对于 的其他值`k`，`-k or None`将是`-k`。

我不确定我自己是否喜欢它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-26T00:49:47.220

你不能，因为 -0 在 python 中不会那样切片（它变成 0）

你可以做老派：

```
l = list()
for k in [5,4,3,2,1,0]:
    l.append(x[:len(x)-k]) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-26T00:46:04.940

切片中的 value`None`与不放任何内容相同。换句话说，`x[:None]`与 相同`x[:]`。所以：

```
l = list()
for k in [-5,-4,-3,-2,-1,None]:
    l.append(x[:k]) 
```

但是……这段代码写成列表理解要容易得多：

```
l = [x[:k] for k in (-5,-4,-3,-2,-1,None)] 
```

或者......你可能想看看你正在尝试做的任何事情，看看是否有更高级的抽象是有意义的，或者可能只是另一种组织更易读的东西的方式（即使它有点冗长） . 例如，根据`x`实际表示的内容，这可能更容易理解（当然也可能更难理解）：

```
l = []
for k in range(6):
    l.insert(0, x)
    x = x[:-1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T00:42:13.490

那么，也许是这样：

```
l = list()
for k in [5,4,3,2,1,None]:
    l.append(x[:-k if k else None]) 
```

如果`x`是简单`range(10)`的，上面的代码将产生：

```
[[0, 1, 2, 3, 4],
 [0, 1, 2, 3, 4, 5],
 [0, 1, 2, 3, 4, 5, 6],
 [0, 1, 2, 3, 4, 5, 6, 7],
 [0, 1, 2, 3, 4, 5, 6, 7, 8],
 [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]] 
```

# objective-c - CRL 在 Cocoa 应用中的实现

> ID：15627314
> 
> 赞同：0
> 
> 时间：2013-03-26T00:31:23.073
> 
> 标签：objective-c, xcode, cocoa, nsurlconnection

我正在开发一个 Cocoa 应用程序，它必须执行客户端到服务器和客户端到客户端的通信。我计划`NSURLConnection`在使用 HTTPS 协议时实现 CRL（证书撤销列表）。

我没有找到足够的文档。指向此信息的指针将有很大帮助。

# javascript - 谷歌地图：多边形和标记 Z 索引

> ID：15627325
> 
> 赞同：34
> 
> 时间：2013-03-26T00:32:31.080
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一个带有许多标记（黄色圆圈）的谷歌地图，我实现了一个在标记上绘制多边形的工具。但是，多边形在绘制时位于标记的后面（完成时留在后面）。

![标记下方的活动多边形绘图工具。](../Images/d6e14ab5a4001a753e403b70e97954b5.png)

我尝试在标记和多边形中更改 ZIndex，但它似乎改变了标记相对于其他标记的显示方式，而不是相对于多边形。我也试过

```
polygon.setZIndex(google.maps.Marker.MAX_ZINDEX + 1); 
```

如何将多边形带到前面？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-28T04:27:38.940

这不会解决问题，但它会解释为什么你尝试的东西不起作用。

Maps API以固定的 Z 顺序使用多个称为[MapPanes的层：](https://developers.google.com/maps/documentation/javascript/reference#MapPanes)

*   4：浮动窗格（信息窗口）
*   3：overlayMouseTarget（鼠标事件）
*   2：markerLayer（标记图像）
*   1：overlayLayer（多边形、折线、地面叠加层、瓦片层叠加层）
*   0：mapPane（地图图块上方的最低窗格）

因此，第 2 层中的标记图像始终位于第 1 层中的多边形之上。当您调整标记上的 z-index 时，您只是在相对于彼此调整它们。这没有任何好处，因为它们都在多边形上方的一层中。

你能做些什么呢？我能想到的唯一解决方案是为多边形或标记创建自己的[OverlayView](https://developers.google.com/maps/documentation/javascript/reference#OverlayView)，这样你就可以将它们放在你想要的 MapPane 中。

您的标记是可点击的，还是只是静态图像？如果它们不可点击，您可以自己在`mapPane`. 然后你的多边形将在它们之上。或相反：您可以自己在较高层之一中绘制多边形，也许在`floatShadow`.

`canvas`那么问题是您必须使用元素或 DOM 图像进行所有自己的绘图。如果它们是可点击的，你自己的鼠标点击测试也是如此。

那里没有很多好的`OverlayView`例子，但我会提到我自己的一个：我不久前编写的一个名为[PolyGonzo](https://github.com/geary/polygonzo)的小库，其中的[polyGonzo.js](https://github.com/geary/polygonzo/blob/master/code/polygonzo.js)文件有`OverlayView`实现。代码不是很好——我太匆忙把它放在一起——但它可能有助于给你一些想法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-13T14:46:51.213

我知道这个问题很老，但对于未来的用户，我想分享我的方法：

具有较高`zIndex`值的​​形状显示在具有较低值的形状前面。对于此示例，我使用的是 Polygon，但其他形状也类似：

```
var globalZIndex = 1; //Be sure you can access anywhere
//... Other instructions for creating map, polygon and any else
polygon.setOptions({ zIndex: globalZIndex++ }); 
```

请注意，标记有一个方法`setZIndex(zIndex:number)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-20T12:57:21.943

我找到了这个解决方案

要创建**符号**，请使用下面的代码

```
var lineSymbol = {
                path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,
                strokeColor: '#181727',
                fillColor: '#50040B', 

            };

            var dashedSymbol = {
                path: 'M 0,-1 0,1',
                strokeOpacity: 1,
                scale: 4

            };

 [![function  MakeMarker(pinColor){
                var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor,
                        new google.maps.Size(21, 34),
                        new google.maps.Point(0,0),
                        new google.maps.Point(10, 34));

                return pinImage;

            }][1]][1]

FlowMarkersdashed(new google.maps.LatLng(positionorigin[0], positionorigin[1]),
                                new google.maps.LatLng(positiondestination[0], positiondestination[1]), myObject[i]['flowfluxphysique'][j]['colorFlux'], dashedSymbol, j);

            function FlowMarkersdashed(latlngOrgin, latlngDest, ColorFlow, Symbol,  indexvar){

                var flightPlanCoordinates = [
                    latlngOrgin,
                    {lat: latlngOrgin.lat() + (indexvar) * 2, lng: latlngOrgin.lng()},
//                    {lat: -18.142, lng: 178.431},
                    latlngDest,
                ];
                var line = new google.maps.Polyline({
                    path: flightPlanCoordinates,
                    strokeOpacity: 0,
                    icons: [{
                        icon: Symbol,
//                        offset: '100%',
                        offset: '0',
                        repeat: '20px'

//                    repeat: '20px'
                    }],
                    strokeColor: "#"+ColorFlow,
                    geodesic: true,

//                    editable: true,

                    map: map
                });
            } 
```

并创建一个**流标记**试试这个代码

```
FlowMarkers(new google.maps.LatLng(positionorigin[0], positionorigin[1]),
                               new google.maps.LatLng(positiondestination[0], positiondestination[1]), myObject[i]['flowfluxinformation'][j]['colorFlux'], lineSymbol,j);

function FlowMarkersdashed(latlngOrgin, latlngDest, ColorFlow, Symbol,  indexvar){

                var flightPlanCoordinates = [
                    latlngOrgin,
                    {lat: latlngOrgin.lat() + (indexvar) * 2, lng: latlngOrgin.lng()},
//                    {lat: -18.142, lng: 178.431},
                    latlngDest,
                ];
                var line = new google.maps.Polyline({
                    path: flightPlanCoordinates,
                    strokeOpacity: 0,
                    icons: [{
                        icon: Symbol,
//                        offset: '100%',
                        offset: '0',
                        repeat: '20px'

//                    repeat: '20px'
                    }],
                    strokeColor: "#"+ColorFlow,
                    geodesic: true,

//                    editable: true,

                    map: map
                });
            } 
```

这是我的结果

[![在此处输入图像描述](../Images/b7547264841bc1fecdeb87af4e5b08ee.png)](https://i.stack.imgur.com/np54D.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-22T12:27:54.627

更改此方法调用：

```
polygon.setZIndex(google.maps.Marker.MAX_ZINDEX + 1); 
```

对此：

```
polygon.setZIndex(4); 
```

# cuda - CUDA 矩阵乘法锁定并显示零矩阵

> ID：15627328
> 
> 赞同：0
> 
> 时间：2013-03-26T00:32:40.503
> 
> 标签：cuda, freeze, matrix-multiplication

我正在尝试编写一个简单的矩阵乘法程序，该程序不断地将两个矩阵的乘积添加到第三个结果矩阵中（我实际上是在给 GPU 一个锻炼，同时我用一个单独的设备测量功耗）。

当我指定大量迭代时，就会出现我的问题。我已经尝试过使用 BLOCK_SIZE 和矩阵维度值的几种组合，并且我注意到迭代次数可以随着更小的矩阵维度而增加，但是 BLOCK_SIZE 必须是矩阵维度（方阵）的平方根。

在这种情况下，产生的错误是 39 秒（不管迭代值如何，只要它“太多”）冻结，然后是全零矩阵输出。有趣的是，我用 20000 次迭代运行了一次，它运行良好。我再次运行它并得到冻结错误。

有任何想法吗？提前致谢！

核心：

```
//********************************************************************
// matrixMultiplication_kernel.cu
//
// Kernel for a basic CUDA matrix multiplication program.
//********************************************************************

#ifndef MATRIXMULTIPLICATION_KERNEL
#define MATRIXMULTIPLICATION_KERNEL

#define BLOCK_SIZE 16 // Set thread block size
#define colsA 256     // Set matrix A column dimension
#define rowsA 256     // Set matrix A row dimension
#define colsB 256     // Set matrix B column dimension
#define rowsB colsA   // Set matrix B row dimension
#define colsC colsB   // Set matrix C column dimension
#define rowsC rowsA   // Set matrix C row dimension

//--------------------------------------------------------------------
// matrixMultiplication() - Multiplies matrixA and matrixB, storing
//                          the result in device memory for matrixC.
//
// PRE:  matrixA, matrixB, and matrixC are float pointers; numColsA
//       numColsB are integers.
// POST: The result of multiplying matrixA and matrixB is stored in
//       matrixC.
//--------------------------------------------------------------------
__global__ void matrixMultiplication(float * matrixA, float * matrixB,
                     float * matrixC, int numColsA,
                     int numColsB) {

    /* Declare matrix-multplication holder value ouside of for loop */
    float val;

    /* Set block and thread index positions */
    int blockX = blockIdx.x;
    int blockY = blockIdx.y;
    int threadX = threadIdx.x;
    int threadY = threadIdx.y;

    /*
    Set starting and ending indices of the first sub-matrix of A
    and sub-matrix size for matrix A
    */
    int startA = numColsA * BLOCK_SIZE * blockY;
    int endA = startA + numColsA - 1;
    int subSizeA = BLOCK_SIZE;

    /*
    Set starting index of the first sub-matrix of B and sub-matrix
    size for matrix B
    */
    int startB = BLOCK_SIZE * blockX;
    int subSizeB = BLOCK_SIZE * colsB;

    /* Perform matrix multiplication 20000 times */
    for (int iteration = 0; iteration < 20000; iteration++) {

        /* Loop through matrix A and matrix B's sub-matrices */
        for (int i = startA, j = startB; i <= endA; i += subSizeA,
             j += subSizeB) {

        /*
            Declare shared memory arrays for matrix A and B
            sub-matrices
        */
        __shared__ float subA[BLOCK_SIZE][BLOCK_SIZE];
        __shared__ float subB[BLOCK_SIZE][BLOCK_SIZE];

        /* Fill sub-matrices */
        subA[threadY][threadX] =
            matrixA[i + colsA * threadY + threadX];
        subB[threadY][threadX] =
            matrixB[j + colsB * threadY + threadX];

        /* Ensure that the matrices are loaded */
        __syncthreads();

        /* Loop through the block */
        for (int k = 0; k < BLOCK_SIZE; ++k) {

            /* Compute product of two matrix indices */
            val += subA[threadY][k] * subB[k][threadX];
        }

        /*
            Ensure completion before the next set of sub-matrices
            begin computation
        */
        __syncthreads();
    }

    /* Set device memory for this sub-matrix */
    int position = colsB * BLOCK_SIZE * blockY + BLOCK_SIZE * blockX;   
    matrixC[position + colsB * threadY + threadX] = val;
    }
}

#endif 
```

主持人：

```
//********************************************************************
// matrixMultiplication.cu
//
// A basic CUDA matrix multiplication program.
//********************************************************************

/* Include necessary libraries and kernel */
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <matrixMultiplication_kernel.cu>

/* Function declarations */
void fillMatrix(float * matrix, int numIndices);

//*************
// Main Program
//*************
int main(int argc, char** argv) {

    /* Declare device memory */
    float * deviceA;
    float * deviceB;
    float * deviceC;

    srand(2013); // Set random seed

    /* Determine total number of indices in each matrix */
    unsigned int numIndicesA = colsA * rowsA;
    unsigned int numIndicesB = colsB * rowsB;
    unsigned int numIndicesC = colsC * rowsC;

    /* Determine memory size of each matrix */
    unsigned int memoryA = sizeof(float) * numIndicesA;
    unsigned int memoryB = sizeof(float) * numIndicesB;
    unsigned int memoryC = sizeof(float) * numIndicesC;

    /* Allocate memory for each matrix */
    float * matrixA = (float *) malloc(memoryA);
    float * matrixB = (float *) malloc(memoryB);
    float * matrixC = (float *) malloc(memoryC);

    /* Set contents of matrices A and B (matrix C is all zeros) */
    fillMatrix(matrixA, numIndicesA);
    fillMatrix(matrixB, numIndicesB); 

    /* Allocate device memory for each matrix */
    cudaMalloc((void **) &deviceA, memoryA);
    cudaMalloc((void **) &deviceB, memoryB);
    cudaMalloc((void **) &deviceC, memoryC);

    /* Copy host memory to device memory for matrices A and B */
    cudaMemcpy(deviceA, matrixA, memoryA, cudaMemcpyHostToDevice);
    cudaMemcpy(deviceB, matrixB, memoryB, cudaMemcpyHostToDevice);

    /* Set thread count to BLOCK_SIZE x BLOCK_SIZE */
    dim3 tCount(BLOCK_SIZE, BLOCK_SIZE);

    /* Set thread block count */
    dim3 tbCount((colsC / tCount.x), (rowsC / tCount.y));

    /* Run kernel */
    matrixMultiplication <<< tbCount, tCount >>> (deviceA, deviceB,
                          deviceC, colsA,
                          colsB);

    /* Copy device memory to host memory for matrix C */
    cudaMemcpy(matrixC, deviceC, memoryC, cudaMemcpyDeviceToHost);

    for(int i = 0; i < 256; i++) {
        printf("%f ", matrixC[i]);
    }
    printf("\n");

    /* Free up host and device memory for each matrix */
    free(matrixA);
    free(matrixB);
    free(matrixC);
    cudaFree(deviceA);
    cudaFree(deviceB);
    cudaFree(deviceC);
}

//--------------------------------------------------------------------
// fillMatrix - Assigns a random float value to each indice of the
//              matrix.
//
// PRE:  matrix is a pointer to a block of bytes in memory; numIndices
//       is the number of indicies in the matrix being instantiated.
// POST: Each index of the matrix has been filled with random float
//       values.
//--------------------------------------------------------------------
void fillMatrix(float * matrix, int numIndices) {

    /* Loop through each index of the matrix */
    for (int i = 0; i < numIndices; ++i) {

    /*
        Assign a random float between 0 and 1 for this index of
        the matrix
    */
    matrix[i] = rand() / (float)RAND_MAX;
    }
} 
```

生成文件：

```
GCC = nvcc
CUDA_INSTALL_PATH := /usr/local/cuda
INCLUDES := -I. -I$(CUDA_INSTALL_PATH)/include
CUDA_LIBS := -L$(CUDA_INSTALL_PATH)/lib -lcudart

matrixMultiplication.o:     matrixMultiplication.cu
                    $(GCC)  $(INCLUDES) -c matrixMultiplication.cu -o $@ 

matrixMultiplication:       matrixMultiplication.o
        $(GCC)  -o $@ matrixMultiplication.o $(CUDA_LIBS)

clean:
        $(RM)   *.o *~ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:26:38.843

问题解决了！由于内核的持续时间长，这是一个系统超时问题。通过切换仅终端模式，我能够规避这个问题。

感谢所有的帮助家伙！

# vb.net - 错误消息：未为字符串“定义运算符“+”并键入“字典（字符串，对象）”

> ID：15627329
> 
> 赞同：0
> 
> 时间：2013-03-26T00:32:47.623
> 
> 标签：vb.net, json, serialization

尝试反序列化 JSON 对象时收到此错误消息

错误信息

`+`未为字符串“JPY:”和类型定义运算符`Dictionary(Of String,Object)`。

这是我试图反序列化的 json 对象

> {“JPY”：{“7d”：“6510.92”，“30d”：“4434.76”，“24h”：“7027.46”}，“USD”：{“7d”：“65.09”，“30d”：“48.77” ", "24h": "74.26"}, "AUD": {"7d": "64.99", "30d": "49.10", "24h": "71.91"}, "CHF": {"7d": “66.86”、“30d”：“58.14”、“24h”：“69.5​​7”}、“RUB”：{“7d”：“1896.79”、“30d”：“1472.11”、“24h”：“2206.51”} ，“时间戳”：1364257203，“THB”：{“30d”：“1100.31”}，“CNY”：{“7d”：“417.58”，“30d”：“324.35”，“24h”：“466。92"}，"SLL"：{"7d"："16719.16"，"30d"："11865.62"，"24h"："19185.45"}，"DKK"：{"7d"："388.47"，"30d" ：“350.27”，“24h”：“436.34”}，“BRL”：{“7d”：“166.21”，“30d”：“106.56”，“24h”：“182.34”}，“ILS”：{“ 7d：“236.79”，“30d”：“218.19”，“24h”：“259.00”}，“GBP”：{“7d”：“44.16”，“30d”：“31.73”，“24h”：“ 49.22"}, "NZD": {"7d": "80.21", "30d": "59.29", "24h": "88.60"}, "PLN": {"7d": "218.66", "30d" ：“163.68”、“24h”：“249.94”}、“CAD”：{“7d”：“68.76”、“30d”：“50.16”、“24h”：“76.43”}、“SEK”：{“7d” "："445.63"，"30d"："315.11"，"24h"："510.58"}，"SGD"：{"7d"："87.88"，"30d"："61.97"，"24h"："93.35 "}, "HKD": {"7d": "550.10", "30d": "396.68", "24h": "571.82"}, "EUR": {"7d": "51.85", "30d": "38.65", "24h": "58.69"}}76.43"}, "SEK": {"7d": "445.63", "30d": "315.11", "24h": "510.58"}, "SGD": {"7d": "87.88", "30d" : "61.97", "24h": "93.35"}, "HKD": {"7d": "550.10", "30d": "396.68", "24h": "571.82"}, "EUR": {" 7d”：“51.85”，“30d”：“38.65”，“24h”：“58.69”}}76.43"}, "SEK": {"7d": "445.63", "30d": "315.11", "24h": "510.58"}, "SGD": {"7d": "87.88", "30d" : "61.97", "24h": "93.35"}, "HKD": {"7d": "550.10", "30d": "396.68", "24h": "571.82"}, "EUR": {" 7d”：“51.85”，“30d”：“38.65”，“24h”：“58.69”}}30d：“396.68”，“24h”：“571.82”}，“EUR”：{“7d”：“51.85”，“30d”：“38.65”，“24h”：“58.69”}}30d：“396.68”，“24h”：“571.82”}，“EUR”：{“7d”：“51.85”，“30d”：“38.65”，“24h”：“58.69”}}

这是我的代码

```
Dim js As New System.Web.Script.Serialization.JavaScriptSerializer
    Dim testObj = js.Deserialize(rt, New Object().GetType())

    out = "JPY: " + testObj("JPY") + Environment.NewLine
    out += "7days: " + testObj("7d") + Environment.NewLine
    out += "30days: " + testObj("30d") + Environment.NewLine
    out += "24hours: " + testObj("24h") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:10:15.623

请务必使用调试器，它可以向您展示反序列化对象的外观。它是一个字典字典，等效的 VB.NET 声明将是 Dictionary(Of String, Of Dictionary(Of String, String))。这使得这是正确的代码：

```
 Dim currency = testObj("JPY")
    out = "JPY: " + Environment.NewLine
    out += "7days: " + currency("7d") + Environment.NewLine
    out += "30days: " + currency("30d") + Environment.NewLine
    out += "24hours: " + currency("24h") 
```

# vb.net - 是否在注册表中存储试用使用值

> ID：15627330
> 
> 赞同：-1
> 
> 时间：2013-03-26T00:32:56.487
> 
> 标签：vb.net, visual-studio-2012, registry, store, trial

我开发了一个 Visual Basic.Net 应用程序并希望有 15 次的有限使用。存储当前使用时间的最佳位置在哪里？

注册表是最好的地方吗？我知道用户可以只监视对注册表的 API 调用，然后可以修改该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:15:10.377

也许你可以使用加密。此外，如果您进行一些谷歌搜索，您会发现所有程序员达成的共识是，没有万无一失的方法可以防止黑客等（尤其是在许可/安全/试用方面。

请参阅我的许可系统上的帖子。

我建议将它存储在几个地方，而不是作为原始值（可能是加密、压缩、散列？），然后检查所有存储的值是否相等（或者更好的是，将 uo 添加到某个值，或者在使用时calcualtion，等于一个指定的值。这是我实现的。

希望这可以帮助 ：）

# html - 用 div 代替表格布局

> ID：15627332
> 
> 赞同：3
> 
> 时间：2013-03-26T00:33:05.753
> 
> 标签：html, css, html-table

我想知道将表格布局替换为 div 的最佳方法是什么。我自己一直在尝试，但它把我的 4x4 div 搞砸了。我猜这在有经验做这些事情时并不难完成，但我对 div 很陌生，并试图学习这一点:)

看看这个并分享你对表格是否应该保持原样或者是否应该用 div 替换的意见：http: [//jsfiddle.net/CZdux/](http://jsfiddle.net/CZdux/)

```
<table align="center" border="0">
  <tr>
    <td width="430" rowspan="3">    
        <div class="container">
            <div id="a1" class="card"></div>
            <div id="a2" class="card"></div>
            <div id="a3" class="card"></div>
            <div id="a4" class="card"></div>
            <div id="a5" class="card"></div>
            <div id="a6" class="card"></div>
            <div id="a7" class="card"></div>
            <div id="a8" class="card"></div>
            <div id="a9" class="card"></div>
            <div id="a10" class="card"></div>
            <div id="a11" class="card"></div>
            <div id="a12" class="card"></div>
            <div id="a13" class="card"></div>
            <div id="a14" class="card"></div>
            <div id="a15" class="card"></div>
            <div id="a16" class="card"></div>
        </div>   
    </td>
    <td width="161" height="95" align="center" valign="middle">LOGO</td>
  </tr>
  <tr> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T13:46:17.460

将表格布局替换为 div 最好的方法是什么？

**使用display**属性重新格式化所有内容，如表格。;)

HTML

```
<div class="table-div" style="width:100%">
    <div class="tr-div">
        <div class="td-div">td-div 1a</div>
        <div class="td-div">td-div 2a</div>
        <div class="td-div">td-div 3a</div>
    </div>
    <div class="tr-div">
        <div class="td-div">td-div 1b</div>
        <div class="td-div">td-div 2b</div>
        <div class="td-div">td-div 3b</div>
    </div>
</div> 
```

CSS

```
.table-div{display:table}
.tr-div{display:table-row}
.td-div{display:table-cell;border:1px solid silver} 
```

[jsFiddle在这里](http://jsfiddle.net/sPm9M/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T02:24:22.693

**浮动柱**

在这种情况下，不需要 HTML 表格。

HTML 表格适用于数据网格，但对于一般布局（建立列等），浮动几乎总是最好的选择（正如@GrantMynott 建议的那样）。尽管此页面上的卡片以网格模式出现，但它并不是真正的数据网格。

如果向 CSS 文件添加 clearfix，可以大大简化浮点数的使用（和创建列）。每次你有一个带有浮动列的容器时，你都会将 clearfix 类添加到容器中。那么你就不用担心清除浮动列的细节了。

这是一个示例，使用传统版本的 clearfix（这是一个很好的开始版本）：

```
/* Traditional clearfix */
.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}
.clearfix {display: inline-block;}
* html .clearfix {height: 1%;}
.clearfix {display: block;}

/* Custom CSS for the page layout */
.columns .column1 {
    float: left;
    width: 430px;
}
.columns .column2 {
    float: left;
    width: 161px;
}
....
<div class="columns clearfix">
    <div class="column1">Card grid goes here...</div>
    <div class="co1umn2">All content to the right of card grid goes here...</div>
</div>
<div id="msg"></div> 
```

此示例使用 CSS 类的通用名称（“columns”、“column1”、column2”）。可以根据需要使用对相关页面更有意义的名称。

**更新**

查看您修改后的演示后：

*   有一个类名为“co12”的错字阻止该列被浮动。我将名称更新为“column2”，以减少这种错字的可能性。
*   为了安全起见，最好也为卡片容器添加一个clearfix（因为卡片是浮动的）。目前，cards 容器是左侧列本身，因此将在此处添加。
*   这可能是个人喜好，但我发现将所有列浮动在同一方向（通常是左侧）比混合一些向左浮动和一些向右浮动更安全。在某些情况下（或者至少在旧版浏览器上），在同一个容器中混合方向并不那么稳定，尽管在大多数情况下这样做是安全的。

[更新的演示](http://jsfiddle.net/Matt_Coughlin/RqSL9/2/)

此时，您只需要为右侧列中的内容添加高度或垂直边距（或填充）。我在徽标图像周围添加了一个 div 容器，以使其更容易一些。按钮周围也可以有一个 div 容器，尽管您可能没有一个也可以管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T00:52:22.283

我认为您正在寻找 CSS 浮动属性。

您需要将游戏方块浮动到左侧，并在右侧有另一个用于统计/徽标等的容器：

```
.game-container { float: left; width: 430; }
.stats-container { float: right; width: 161; }
.logo { height: 95; width: 100%; }
.scoreboard { height: 148; width: 100%; }
.restart { height: 148; width: 100%; }
#msg { clear: both; } /* Append to pre-existing identifier to display below immediate left and right floated content */ 
```

然后像这样将您的内容放入其中，因为 div 是一个块元素，那些在 stats 容器中的元素将垂直显示：

```
<div class="game-container">
    <div class="container">
        <div id="a1" class="card"></div>
        ...
    </div>
</div>
<div class="stats-container">
    <div class="logo">LOGO</div>
    <div class="scoreboard"></div>
    <div class="restart"><input id="clicky" type="button" value="Restart"/></div>
</div>
<div id="msg"></div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-25T08:39:11.490

以上所有内容都非常好，但是......直到所有实验性 css 属性在浏览器上不可用，你会发现很难用 divs dl dt dd 元素替换表格关于垂直对齐或背景高度，它需要例如，当您调整窗口大小或在具有嵌套 div 的 dl dt dd 的情况下，以及将文本包装在其中时，也是相同的。我仍然认为，在许多情况下，用其他元素替换表格是一种不好的方法。尽管所有的想法都很好，但表格可以让您完全控制显示元素，就像它们需要的那样。

# ruby-on-rails - 在 Rails 中使用变量名作为属性

> ID：15627334
> 
> 赞同：2
> 
> 时间：2013-03-26T00:33:22.037
> 
> 标签：ruby-on-rails, ruby

我想通过创建一个可以重用的通用方法来干燥我的 Rails 代码。为此，我必须创建一些字段/属性和代码变量中使用的类名，以便它可以用于具有相同代码的三个模型（及其字段）。我试图从这个[问题](https://stackoverflow.com/questions/3913860/how-to-use-a-variable-as-object-attribute-in-rails)和[这个](https://stackoverflow.com/questions/3256171/ruby-on-rails-how-do-i-set-a-variable-to-a-constant-where-part-of-the-name-of)问题中学习，但我无法让它发挥作用。

在我的模型中，我有这个：

```
def self.update_percentages    
  update_percentages_2(User, "rank", "top_percent")   
end   

def self.update_percentages_2(klass, rank_field, percent_field)
  rank_class = (klass.name).constantize
  total_ranks = rank_class.maximum(rank_field)
  top_5 = (total_ranks * 0.05).ceil 

  rank_class.find_each do |f|
    if f.send("#{rank_field}") <= top_5
      f.send("#{percent_field}", 5)
      f.save
    end
  end 
end 
```

使用此代码，我得到`ArgumentError: wrong number of arguments (1 for 0)`. 当我开始注释行以缩小问题范围时，似乎是`f.send("#{percent_field}", 5)`导致错误的原因。

如果我添加： `percent_field = (percent_field).constantize`

我得到：`Name Error: wrong constant name top_percent`。

有人可以帮我确定我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:37:50.600

如果要分配给属性，则需要带有等号的方法名称：

```
f.send("#{percent_field}=", 5) 
```

另外，这个：

```
rank_class = (klass.name).constantize 
```

相当于：

```
rank_class = klass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:23:24.020

我会重写你的方法来更新交易中的所有合格记录。

```
def self.update_percentages_2(klass, rank_field, percent_field)
  top_5 = ( klass.maximum(rank_field) * 0.05).ceil   
  klass.where("#{rank_field} <= ?", top_5).update_all(percent_field => 5)
end 
```

**顺便提一句**

这是您原始问题的[答案。](https://stackoverflow.com/questions/3913860/how-to-use-a-variable-as-object-attribute-in-rails/3913887#3913887)

# php - 如何简化这个基本循环？

> ID：15627336
> 
> 赞同：0
> 
> 时间：2013-03-26T00:33:32.820
> 
> 标签：php, loops, for-loop

我有几乎可以做到这一点的代码......

```
//get the row info
$Row1 = $FullTable->find('div[class=ismPitchRow1]',0);  
$Row2 = $FullTable->find('div[class=ismPitchRow2]',0);  
$Row3 = $FullTable->find('div[class=ismPitchRow3]',0);  
$Row4 = $FullTable->find('div[class=ismPitchRow4]',0);  
$Row5 = $FullTable->find('div[class=ismPitchRow5]',0);  

//Loop 5 times. One for each row on the pitch.
for ($i=1; $i<=5; $i++)
    {
    if ($i = 1) { echo $Row1; }
    if ($i = 2) { echo $Row2; }  
    if ($i = 3) { echo $Row3; }
    if ($i = 4) { echo $Row4; }
    if ($i = 5) { echo $Row5; }
    } 
```

它可以工作，但正如您所见，它效率不高，设计也很糟糕。我将如何简化这一点？我知道有很多更小的方法可以完成这种循环。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:41:57.303

使用数组的伟大发明：

```
//get the row info
$Row[1] = $FullTable->find('div[class=ismPitchRow1]',0);  
$Row[2] = $FullTable->find('div[class=ismPitchRow2]',0);  
$Row[3] = $FullTable->find('div[class=ismPitchRow3]',0); 
```

或者，更聪明...

```
for ($i = 1; $i <= 5; $i++) {

    $find = "div[class=ismPitchRow$i]"; 
    $Row[$i] = $FullTable->find($find,0);

} 
```

对回显做同样的事情：

```
for ($i = 1; $i <= 5; $i++) {

    echo $Row[$i];

} 
```

但为什么不在 1 个循环中做所有事情呢？

```
for ($i = 1; $i <= 5; $i++) {

    $find = "div[class=ismPitchRow$i]"; 
    echo $FullTable->find($find,0);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:42:46.823

我将存储`$Row1`在`$Row5`an 中`array`并使用 foreach 循环遍历它。

```
<?php
$YourArray = array(); 

array_push($YourArray,$FullTable->find('div[class=ismPitchRow1]',0),$FullTable->find('div[class=ismPitchRow2]',0),$FullTable->find('div[class=ismPitchRow3]',0),$FullTable->find('div[class=ismPitchRow4]',0),$FullTable->find('div[class=ismPitchRow5]',0));

foreach($YourArray as $row){
echo $row;
}
?> 
```

# jquery - Jquery Isotope 和 Twitter Bootstrap 网格

> ID：15627338
> 
> 赞同：4
> 
> 时间：2013-03-26T00:33:35.507
> 
> 标签：jquery, twitter-bootstrap, jquery-isotope

我正在尝试将 jQuery Isotope 与我的 Twitter Bootstrap 网格一起实现，但我被卡住了。

我有一个通常的列引导标记。我有三行（.row-fluid），每行里面有三列（.span4）

现在，当我在上述列上调用 Isotope 时，我得到的是行内的第三个元素进入新行，即使在顶行有空间。你能帮忙吗。

我的 jQuery 是这样的（忽略 jsfiddle 上的其他变量）：

```
pGrid.isotope({
    hiddenStyle  : { opacity : 0 },
    visibleStyle : { opacity : 1 }, 
    itemSelector : '.span4',
    layoutMode   : 'fitRows',
    resizable: false
}); 
```

我已经设置了在 jsfiddle 上发生这种情况的示例：http: [//jsfiddle.net/HASg6/](http://jsfiddle.net/HASg6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T16:40:17.897

我无法确定您的代码到底出了什么问题，但是您确实需要摆弄 CSS 以使 Bootstrap 和 Isotope 能够很好地协同工作。您可能还想尝试将所有同位素细胞放入一个容器中，而不是行。

下面是 Bootstrap 和 Isotope 的演示：http: [**//www.bootply.com/60295**](http://www.bootply.com/60295)这个演示还使用媒体查询来确保图像大小根据屏幕大小响应调整。

# c# - 如何使用 Redis 支持的 ServiceStack ICacheClient 存储和检索枚举值

> ID：15627339
> 
> 赞同：2
> 
> 时间：2013-03-26T00:33:37.337
> 
> 标签：c#, .net, asp.net-mvc, redis, servicestack

我正在使用 ICacheClient 和 Redis 在我的应用程序中缓存值。

在一种情况下，我需要缓存枚举的值。

枚举看起来像这样

```
public enum Status
{
    OK,
    Warn,
    Error
} 
```

我正在将值添加到缓存中：

```
cacheClient.Add<Status>(myKey, Status.Warn); 
```

当我去检索这样的值时：

```
Status status;
status = cacheClient.Get<Status>(myKey); 
```

由于缓存客户端返回的值与枚举值不匹配，因此引发异常。

我似乎得到了一个已经逃脱`"`标记的值，例如：`\"Warn\"`

难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:18:28.983

修复似乎正在使用 ServiceStack 版本 3.9.42.0 或更高版本。缓存将字符串数据存储为 JSON，因此问题可能与最近关闭的 ServiceStack.Text[修复有关。](http://github.com/ServiceStack/ServiceStack.Text/issues/242)

# javascript - 获取价值当 JS 包含非数字字符时

> ID：15627341
> 
> 赞同：11
> 
> 时间：2013-03-26T00:33:42.477
> 
> 标签：javascript, html, textinput

[这个 jsfiddle 演示了以下问题。](http://jsfiddle.net/pyS9c/)

最简单的例子是：

```
<input id="number" type="number" value="1">
console.log(document.getElementById('number').value); 
```

这将按预期记录 1。然而，这：

```
<input id="number" type="number" value="1A">
console.log(document.getElementById('number').value); 
```

只记录一个空字符串''，因为值中的非数字字符。某些设备+浏览器（例如 Chrome）允许您在这些输入中输入非数字字符。

这很烦人，因为我想要支持它的设备（例如 iPhone、iPad 数字键盘）的 type="number" 输入。但是我想使用 javascript 来阻止输入脏输入 - 这需要获取 keyup 上的值 - 然后正则表达式替换非数字字符。

看来 jQuery 的 .val() 方法给出了相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T23:21:46.333

这就是我一直在寻找的：

```
$('input[type=number]').keypress(function(e) {
  if (!String.fromCharCode(e.keyCode).match(/[0-9\.]/)) {
    return false;
  }
}); 
```

我知道阻止用户输入可能很烦人，但这仍然允许无效输入，例如`1.2.3`

然而，在这种情况下，这正是我所需要的。希望它对其他人有用。感谢@int32_t 的建议。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T01:07:13.207

你不应该使用`<input type=number>`不是数字的东西（在非常数学意义上 - 它也不适用于电话号码或邮政编码）并且清除值是故意的。

您可以测试设备是否支持`type=number`并仅在不支持时附加您的后备：

```
var input = document.createElement('input');
input.setAttribute('type','number');
if (input.type != 'number') { // JS property won't reflect DOM attribute
   polyfill_number();
} 
```

或者（特别是如果您的号码是邮政编码、序列号等），您可以使用：

```
<input type=text pattern="[0-9]*"> 
```

这也会改变键盘。

# python - 图片显示问题

> ID：15627342
> 
> 赞同：0
> 
> 时间：2013-03-26T00:33:44.977
> 
> 标签：python, image, tkinter, transparency, python-imaging-library

当我加载透明图像时：

```
def load_image(path):
    img = Image.open(path)
    return ImageTk.PhotoImage(img)

class Home_Screen(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
        self.home = Tk()
        self.home.resizable(width = False,height = False)
        self.home.geometry("700x500+300+100")
        self.start()

    def run(self):
        self.images()
        Label(self.home, image = self.background).pack() # Put it in the display window
        button_instructions = Label(self.home,image = self.b_instructions).place(x = 300,y = 200)
        self.home.mainloop()

    def images(self):
        self.background = load_image("Images/night-sky.jpg")
        self.b_instructions = load_image("button_instructions.png")

    def start_game(self):
        self.home.destroy()

Home = Home_Screen() 
```

我得到一个带有白色边框的图像。有谁知道为什么没有保留原来的透明度？如果可以，请您提供解决方案。

![错误图片](../Images/336a31c786faef0c5292e25c99984842.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:14:05.933

使用画布而不是标签小部件。透明度不会丢失，因为您看到的是小部件的背景。

```
def run(self):
    img_sky = ImageTk.PhotoImage(file="Images/night-sky.jpg")
    img_button = ImageTk.PhotoImage(file="button_instructions.png")
    self.canvas = Canvas(self.home, width=700, height=500)
    self.canvas.create_image(0, 0, image=img_sky)
    self.canvas.create_image(300, 200, image=img_button)
    self.canvas.pack()
    self.home.mainloop() 
```

# php - PHP MVC 模型和 RedBeanPHP - 关联

> ID：15627343
> 
> 赞同：1
> 
> 时间：2013-03-26T00:33:50.937
> 
> 标签：php, activerecord, redbean

我正在构建一个部分基于 CakePHP 并使用 RedBeanPHP 的自定义 MVC 框架。

现在我正在创建 DB CRUD。这是我的想法：

```
class Model extends RedBean_SimpleModel {

}

class Product extends Model {

var $beans = array(
'name',
'price',
...
);
} 
```

这似乎是让 RedBeanPHP 动态生成表“Products”和列的好方法。

现在我目前的疑问（因为我开始工作并了解 RedBeanPHP）问题是关联。

我真的很喜欢[CakePHP 的](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)方法，有“hasOne”、“hasMany”、“belongsTo”等。

有人可以指导我使用 RedBeanPHP 的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:57:36.727

无需使用 RedBeanPHP 的前期模型。RedBeanPHP 可以使用称为 FUSE 的系统为您自动连接您的 bean。这样可以节省很多代码。而且...更少的代码==更少的错误

```
$p = R::dispense('product');
$p->price = -6; //not a valid price
R::store($p); 
```

稍后您要添加验证并编写：

```
class Model_Product extends RedBean_SimpleModel {
    public function update() {
        if ($this->price < 0) throw new Exception('Price cant be negative!');
    ...}
} 
```

RedBeanPHP 会将产品 bean $p 与您的域模型中的模型 Model_Product 连接起来。您还可以添加新方法并使用 bean 调用它们：

```
$p->play(); //-- will call play() on Model_Product 
```

阅读有关保险丝的更多信息：

[http://www.redbeanphp.com/how_fuse_works](http://www.redbeanphp.com/how_fuse_works)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:48:24.540

您可以与 redbean 建立关系。

```
$child->parent=$parentBean; // parent relationship
$child->ownToy=array($toybean1,$toybean2); // 1 to many relationship
$child->sharedToy=array($toybean1,$toybean2); // many to many relationship 
```

所以现在的问题是，你将如何实现它？你可以有类似的东西：

```
var $relations=array(
    'fieldname'=>array('hasMany','names')
); 
```

然后，当您处理保存时，只需确保您调用了正确的函数：

```
if(array_key_exists('fieldname',$this->relations)){
//magic happens
} 
```

希望这能让你指出正确的方向。

# javascript - JavaScript/JQuery - 加载新的 img src 后如何获取 img 高度？

> ID：15627347
> 
> 赞同：0
> 
> 时间：2013-03-26T00:34:31.130
> 
> 标签：javascript, jquery, dom

我有一个正在处理的自定义轮播，下面是代码的一些部分......它很大，所以我不会费心放置一个完整的工作示例。

无论如何，我从 php 传递了一个 JSON 对象，其中包含图像的文件名。单击右箭头时，元素，

```
<img id="carousel_image" src="http://example.org/image/image.jpg" /> 
```

使用 jQuery 更改为新的 src，

```
$('#arrow_right').click(function(){
        $('#carousel_image').attr('src', storedSlides[currentSlide]);
        $('#carousel_image').ready(function(){
           console.log($('#carousel_image').height()); //returns 1000
        });
        console.log($('#carousel_image').height()); //returns 1000
    }); 
```

两个日志都返回 1000，即点击前原始图像的高度。如何获得新图像的真实高度（完全加载后）？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:37:27.003

您需要使用`load`事件，而不是在渲染`ready`时触发 ready 。当图像加载到元素上时触发。`DOM``load``img`

[http://www.w3schools.com/jsref/event_img_onload.asp](http://www.w3schools.com/jsref/event_img_onload.asp)

```
$('#arrow_right').click(function(){
    $('#carousel_image').attr('src', storedSlides[currentSlide]);
    $('#carousel_image').on("load", function(){
       console.log($('#carousel_image').height());
    });
    console.log($('#carousel_image').height());
}); 
```

# jquery - jQuery将文本大小调整为窗口

> ID：15627351
> 
> 赞同：0
> 
> 时间：2013-03-26T00:35:12.607
> 
> 标签：jquery, fonts, resize

我正在`em`为我的文本使用单位，但是，它似乎不起作用。在大屏幕分辨率中，文本不够宽/不足以填满屏幕，在小屏幕分辨率中，它会换行。我该如何控制这个？

基本上，如果我可以根据实际的窗口大小来控制文本的大小，那就太好了。因此，如果窗口被缩小和/或放大，文本会适应它，并且布局应该始终看起来相同（在所有浏览器屏幕宽度中）。

我怎样才能做到这一点？一直在玩 jQuery resize 事件，但不知道如何将它用于我的目的。也许有人可以让我在这里朝着正确的方向开始？

以下是执行此操作的 jsFiddle 示例：http: [//jsfiddle.net/vqbCL/2/](http://jsfiddle.net/vqbCL/2/)

但是，对于表格元素，我没有使用任何表格元素。尝试流畅的布局。因此，如果我可以将该技术应用于页面上所有元素的字体大小，那就太好了。

这是我在尝试执行此操作时尝试使用的代码：

```
jQuery(document).ready(function($){
    $(window).bind("resize", function(){
        var containerSize  = $("body").width(),
            bodyFontSize = $("body").css("font-size");
            textPercentage = parseInt(bodyFontSize.substring(0, bodyFontSize.length - 2)) / $("body").width(),
            textRatio      = containerSize * textPercentage,
            textEms        = textRatio / parseInt(bodyFontSize.substring(0, bodyFontSize.length - 2));
            alert("Text Percentage = " + textPercentage + "\nTextRatio = " + textRatio + "\nNew EM font-size = " + textEms);

        $('body').css('fontSize', textEms+'em');
    }).trigger("resize");
}); 
```

这里发生的事情是这样的：

```
containerSize = 974 (might be different for you depending on your browser width).
bodyFontSize = 16px
textPercentage = 16/974 = 0.01642710472279261
textRatio = 974 * 0.01642710472279261 = 16
textEm = 16 / 16 = 1em; 
```

需要确定如何获得正确的 textRatio 并从中获得正确的 textEm。

*** 更新到上面的最新代码 ***

你可以看到我在这里尝试实现这个：http: [//dream-portal.net/Test/index.html](http://dream-portal.net/Test/index.html)

基本上，Text Ratio（16 像素）和 EM Font-Size 始终为 1em（它们始终相同），然而，这里唯一改变的是`Text Percentage`on window resize。但是字体大小始终为 1em，文本比率始终 = 16（如 16 像素，这是`body.css("font-size")`值。在某处计算此值的公式中一定存在某种缺陷。

# node.js - Node.js / express - 将护照与redis一起使用，使会话未经授权

> ID：15627358
> 
> 赞同：5
> 
> 时间：2013-03-26T00:35:45.360
> 
> 标签：node.js, express, redis, passport.js

我正在尝试使用 redis 和 express 来创建用户登录和会话。我使用这个 curl 脚本测试路线：

```
curl -d 'email=testEmail&password=testPass' http://localhost:3000/users/session 
```

当我这样做时，护照通过序列化工作正常，然后它返回http 302。我还没有弄清楚序列化后它会做什么，但是当我在浏览器中使用我的登录html表单而不是curl尝试它时，它显示了我“未经授权” 401，我看不到任何控制台日志。这是我的 app.js：

```
var express = require('express')
    , fs = require('fs')
    , cons = require('consolidate')
    , http = require('http')
    , flash = require('connect-flash')
    , passport = require('passport')
    , RedisStore = require( "connect-redis" )(express) //for sessions (instead of MemoryStore)
    , redis = require('redis')
    , env = process.env.NODE_ENV || 'development'
    , config = require('./config/config')[env]
    , db = redis.createClient(config.db.port, config.db.host);

db.select(config.db.users)
db.auth(config.db.auth);

var app = express();

//require passport strategies (see code block below)
require('./config/passport')(passport, config, app)

app.use('/assets', express.static(__dirname + '/public'));
app.use('/', express.static(__dirname + '/'));
app.set('views', __dirname + '/views');
app.set('view engine', 'html');

app.configure(function(){
    app.set('config', config);
    app.set('db', db);
    app.set('port', process.env.PORT || 3000);
    app.engine('.html', cons.swig);
    app.use(express.logger('dev'))
    app.use(express.favicon(__dirname + '/public/img/favicon.ico'));
    app.use(express.cookieParser())
    app.use(express.bodyParser()) //enables req.body
    app.use(express.methodOverride()) //enables app.put and app.delete (can also just use app.post)
    app.use(express.session({
        secret: 'topsecret',
        cookie: {secure: true, maxAge:86400000},
        store: new RedisStore({
            client:db,
            secret:config.db.auth
        })
    }));

    app.use(flash())
    app.use(passport.initialize())
    app.use(passport.session())
    app.use(app.router)
});

// Bootstrap routes
require('./config/routes')(app, passport);

http.createServer(app).listen(app.get('port'), function(){
    console.log("Express server listening on port " + app.get('port')+', mode='+env);
}); 
```

和会话 POST 路由：

```
app.post('/users/session', passport.authenticate('local', {successRedirect: '/', failureFlash: 'Invalid email or password.', successFlash: 'Welcome!'}), users.session); 
```

我只能用 mongodb 找到护照的例子，所以我不确定以下内容。我试图找到一个用户，但我不确定回调或当我返回完成时护照对用户信息做了什么：

```
passport.use(new LocalStrategy({ usernameField: 'email', passwordField: 'password' },
    function(email, password, done) {

        var db = app.get('db')
        var multi = db.multi();

        db.get('email:'+email, function(err, uid){
            if (err) { console.log(err); return err }
            if (!uid) { console.log('no uid found'); return null }

            console.log('found '+uid)
            db.hgetall('uid:'+uid, function(err, user){
                if (err) { console.log(err); return err }
                if (!user) {
                    console.log('unkwn usr')
                    return done(null, false, { message: 'Unknown user' })
                }

                if (password != user.password) {
                    console.log('invalid pwd')
                    return done(null, false, { message: 'Invalid password' })
                }
                console.log('found user '+user) //I see this fine with curl, but no logs with browser
                return done(null, user)
            });
        });      
    }
)) 
```

护照序列化：

```
passport.serializeUser(function(user, done) {
    console.log('passport serializing...'+user.name)
    done(null, user.name) //no idea what happens to it after this. returns a 302 with curl, and 401 with browser
}) 
```

为什么浏览器的行为与 curl 的行为不同？非常感谢任何帮助或评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:05:45.590

弄清楚了！要将护照与*任何*数据库（不仅仅是 mongo）一起使用，我建议先用一个虚拟用户尝试它。这就是我所做的。

登录表单（login.html）：

```
<form method="post" action="http://localhost:3000/users/session" name="loginform">
    <input id="login_input_username" type="text" name="email" />
    <input id="login_input_password" type="password" name="password" autocomplete="off" />
    <input type="submit"  name="login" value="Submit" /> 
</form> 
```

路由（route.js）：

```
app.post('/users/session', passport.authenticate('local'), 
    function(req, res){
        res.end('success!');
    }); 
```

Passport 本地策略设置 (passport.js)：

```
passport.use(new LocalStrategy({ usernameField: 'email', passwordField: 'password' },
    function(email, password, done) {
        //find user in database here
        var user = {id: 1, email:'test', password:'pass'};
        return done(null, user);
    }
));

passport.serializeUser(function(user, done) {
    //serialize by user id
    done(null, user.id)
});

passport.deserializeUser(function(id, done) {
    //find user in database again
    var user = {id: 1, email:'test', password:'pass'};
    done(null, user);
}) 
```

虽然我想知道是否有必要在我的数据库中查找用户两次，或者我是否错误地使用了反序列化。

# haskell - 什么是弃用 Data.Conduit.Util 的 zip 的“更简单的方法”？

> ID：15627359
> 
> 赞同：12
> 
> 时间：2013-03-26T00:35:52.437
> 
> 标签：haskell, zip, conduit

开始使用`conduit`，我注意到在[Data.Conduit.Util](http://hackage.haskell.org/packages/archive/conduit/latest/doc/html/Data-Conduit-Util.html)中：

> 来自旧版本管道的实用程序功能。这些应该被视为已弃用，因为现在有更简单的方法来处理它们的用例。此模块仅用于向后兼容。

我特别关心的是`zip :: Monad m => Source m a -> Source m b -> Source m (a, b)`。这对我来说似乎非常有用——我可以独立地研究一种产生`a`s 的方式和一种产生 s 的方式`b`，然后`zip`在我需要它们时将它们放在一起，而不必在过程的早期混合关注点。

但是，就像我说的，我是管道方面的新手，所以我很无知。这些“处理用例的更简单方法”是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T17:03:21.503

这实际上是文档中的一个错误。util 模块现在提供的功能没有被弃用，该注释适用于以前的版本。我将发布一个带有更正文档的新版本。

# windows - 梨配置显示目录

> ID：15627360
> 
> 赞同：1
> 
> 时间：2013-03-26T00:35:57.173
> 
> 标签：windows, wamp, pear, config

我在win7x64上的wamp2.1（Apache2.2.17，PHP5.3.5 MSVC6x32）上安装pear都是为了安装PHPUnit，一切顺利，但是当我执行

```
pear config-show 
```

我得到一个意外的输出

特殊目录和我安装时设置的不一样，这正常吗？

```
C:\wamp21\bin\php\php5.3.5\PEAR>pear config-show
CONFIGURATION (CHANNEL PEAR.PHP.NET):
=====================================
PEAR executables directory     bin_dir          C:\wamp21\bin\php\php5.3.5\PEAR
PEAR documentation directory   doc_dir          C:\php\pear\docs
PHP extension directory        ext_dir          c:/wamp21/bin/php/php5.3.5/ext/
PEAR directory                 php_dir          C:\wamp21\bin\php\php5.3.5\PEAR\pear
PEAR configuration file        cfg_dir          C:\php\pear\cfg
directory
PEAR data directory            data_dir         C:\php\pear\data
..... 
```

这是 pear cli 安装的摘录：

```
C:\wamp21\bin\php\php5.3.5\PEAR>php -d phar.require_hash=0 go-pear.phar

 1\. Installation base ($prefix)                   : C:\wamp21\bin\php\php5.3.5\PEAR
 2\. Temporary directory for processing            : C:\wamp21\bin\php\php5.3.5\PEAR\tmp
 3\. Temporary directory for downloads             : C:\wamp21\bin\php\php5.3.5\PEAR\tmp
 4\. Binaries directory                            : C:\wamp21\bin\php\php5.3.5\PEAR
 5\. PHP code directory ($php_dir)                 : C:\wamp21\bin\php\php5.3.5\PEAR\pear
 6\. Documentation directory                       : C:\wamp21\bin\php\php5.3.5\PEAR\docs
 7\. Data directory                                : C:\wamp21\bin\php\php5.3.5\PEAR\data
 8\. User-modifiable configuration files directory : C:\wamp21\bin\php\php5.3.5\PEAR\cfg
 9\. Public Web Files directory                    : C:\wamp21\bin\php\php5.3.5\PEAR\www
10\. Tests directory                               : C:\wamp21\bin\php\php5.3.5\PEAR\tests
11\. Name of configuration file                    : C:\wamp21\bin\php\php5.3.5\PEAR\pear.ini
12\. Path to CLI php.exe                           : C:\wamp21\bin\php\php5.3.5
.... 
```

我会在 C:\wamp21\bin\php\php5.3.5\PEAR 中安装 pear 但现在我有两个目录数据，文档，测试

C:\php\梨\数据

C:\php\pear\docs

C:\php\梨\测试

C:\wamp21\bin\php\php5.3.5\PEAR\data

C:\wamp21\bin\php\php5.3.5\PEAR\docs

C:\wamp21\bin\php\php5.3.5\PEAR\tests

和他们的子目录

一个相关问题[Installing pear on windows, wrong paths](https://stackoverflow.com/questions/13251222/installing-pear-on-windows-wrong-paths?rq=1) [similar question](https://stackoverflow.com/questions/13251222/installing-pear-on-windows-wrong-paths?rq=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:18:22.003

可能是您未使用存储安装设置的 PEAR 配置文件。您可以通过使用以下`-c`选项手动指定它来修复它：

```
$ pear -c /path/to/config/file config-show 
```

或者只是将其移动到当前显示的位置`pear config-show`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T18:31:05.030

设置`PHP_PEAR_SYSCONF_DIR`为您所在的目录`pear.ini`。

```
SETX PHP_PEAR_SYSCONF_DIR C:\wamp21\bin\php\php5.3.5\PEAR /M 
```

# sql-server-2008 - 如果一条记录不正确，则省略字段

> ID：15627361
> 
> 赞同：0
> 
> 时间：2013-03-26T00:36:10.797
> 
> 标签：sql-server-2008

我的目标是仅显示 bofa 提款的索赔。当我做我的代码时，它只给我 2，或者在工作时它给我索赔 110329100082，它有 bofa w/ds 但我只想要索赔nbr，他的争议只是美国银行。最后我想要的是：

索赔br 121104101432, 130101104813, 130202100467, 130326100004

使用索赔 GO

```
SELECT A.ClaimNbr

FROM dbo.CCMSClaimCore A
 LEFT JOIN dbo.CCMSTransactionCore B
 ON A.ClaimNbr = B.ClaimNbr

WHERE A.Frdtyp IN('Counterfiet', 'Counterfeit', 'CardSecure')
  AND B.merchantNm = 'BKOFAMERICA%WITHDR%'
  OR A.ClaimTypCd = 'ATMWP' 
```

这是一些要放入数据库的代码

```
CREATE TABLE CCMSClaimCore 
(
ClaimNbr  varchar(50) Not NUll,
ClaimTypCd varchar(8) Not Null,
FraudTyp varchar(15) Not Null,
)

INSERT INTO CCMSClaimCore (ClaimNbr, ClaimTypCd, FraudTyp)
VALUES (110329100082,   'FATMD',    'CardSecure')
INSERT INTO CCMSClaimCore (ClaimNbr, ClaimTypCd, FraudTyp)
VALUES (110330101000,   'FATMD',    'CardSecure')
INSERT INTO CCMSClaimCore (ClaimNbr, ClaimTypCd, FraudTyp)
VALUES(121104101432,    'FATMD',    'Counterfeit')
INSERT INTO CCMSClaimCore (ClaimNbr, ClaimTypCd, FraudTyp)
VALUES(130101104813,    'ATMWP',    'CardSecure')
INSERT INTO CCMSClaimCore (ClaimNbr, ClaimTypCd, FraudTyp)
VALUES(130101109216,    'FATMD',    'Counterfiet')
INSERT INTO CCMSClaimCore (ClaimNbr, ClaimTypCd, FraudTyp)
VALUES(130202100467,    'ATMWP',    'Counterfiet')
INSERT INTO CCMSClaimCore (ClaimNbr, ClaimTypCd, FraudTyp)
VALUES(130326100004,    'FATMD',    'CardSecure')

Create table CCMSTransactionCore
(
ClaimNbr varchar(12) Not null ,
DisputeNbr varchar(12) Not Null ,
MerchantNm varchar(50) Not Null 
```

)

```
INSERT INTO CCMSTransactionCore (ClaimNbr, DisputeNbr, MerchantNm)
VALUES(110329100082,    110329200082,   'BKOFAMERICA ATM 03/28 #000007450           WITHDRWL')
INSERT INTO CCMSTransactionCore (ClaimNbr, DisputeNbr, MerchantNm)
VALUES(110329100082,    110329200083,   'MPX1            03/27 #000918793 WITHDRWL')
INSERT INTO CCMSTransactionCore (ClaimNbr, DisputeNbr, MerchantNm)
VALUES(110329100082,    110329200084,   'BKOFAMERICA ATM 03/28 #000007450 WITHDRWL')
INSERT INTO CCMSTransactionCore (ClaimNbr, DisputeNbr, MerchantNm)
VALUES(110330101000,    110330201000,   'PNC             01/17 #300918765     WITHDRWL')
INSERT INTO CCMSTransactionCore (ClaimNbr, DisputeNbr, MerchantNm)
VALUES(121104101432, 121104201432,  'BKOFAMERICA ATM 01/06 #000007450 WITHDRWL')
INSERT INTO CCMSTransactionCore (ClaimNbr, DisputeNbr, MerchantNm)
VALUES(121104101432, 121104201433,  'BKOFAMERICA ATM 01/06 #000007450 WITHDRWL')
INSERT INTO CCMSTransactionCore (ClaimNbr, DisputeNbr, MerchantNm)
VALUES(130101104813, 130101104813,  'BKOFAMERICA ATM 12/06 #000007450 WITHDRWL')
INSERT INTO CCMSTransactionCore (ClaimNbr, DisputeNbr, MerchantNm)
VALUES(130101109216, 130101207892,  'MPX1            03/27 #000918793 WITHDRWL')
INSERT INTO CCMSTransactionCore (ClaimNbr, DisputeNbr, MerchantNm)
VALUES(130101109216, 130101207893,  'PNC         03/24 #300918765 WITHDRWL')
INSERT INTO CCMSTransactionCore (ClaimNbr, DisputeNbr, MerchantNm)
VALUES(130101109216, 130101207894,  'BKOFAMERICA ATM 03/06 #000007450 WITHDRWL')
INSERT INTO CCMSTransactionCore (ClaimNbr, DisputeNbr, MerchantNm)
VALUES(130202100467, 130202200467,  'BKOFAMERICA ATM 02/14 #000007450 WITHDRWL')
INSERT INTO CCMSTransactionCore (ClaimNbr, DisputeNbr, MerchantNm)
VALUES(130202100467, 130202200468,  'BKOFAMERICA ATM 02/14 #000007450 WITHDRWL')
INSERT INTO CCMSTransactionCore (ClaimNbr, DisputeNbr, MerchantNm)
VALUES(130326100004, 130326200004,  'BKOFAMERICA ATM 03/08 #000007450 WITHDRWL') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:45:39.647

我认为您是说您想要相关表中的商家名称为 BKOFAMERICA%WITHDR% 且**只有**BKOFAMERICA%WITHDR% 的索赔编号。如果它有 BOFA，例如 PNC，那么不要显示该索赔编号，对吗？尝试这个：

```
Use Claim
GO

;WITH BOFAOnlyClaims AS (
    SELECT  B.ClaimNbr
    FROM    dbo.CCMSTransactionCore B
    GROUP BY B.ClaimNbr
    HAVING MAX(CASE WHEN B.merchantNm = 'BKOFAMERICA%WITHDR%' THEN 1 ELSE 2 END) = 1
)
SELECT  A.ClaimNbr
FROM    dbo.CCMSClaimCore A
        JOIN BOFAOnlyClaims BOC ON A.ClaimNbr = BOC.ClaimNbr
WHERE   A.Frdtyp IN('Counterfiet', 'Counterfeit', 'CardSecure')
        OR A.ClaimTypCd = 'ATMWP'; 
```

# css - 单独使用CSS，你怎么能有一个从右到左的Border-bottom渐变？

> ID：15627362
> 
> 赞同：4
> 
> 时间：2013-03-26T00:36:18.027
> 
> 标签：css

我想知道是否可以单独使用 CSS 来做一个边框底部，渐变从右到左而不是从中心向外。

在我寻找答案的过程中，我发现了一个[JSFiddle](http://jsfiddle.net/necolas/vqnk9/)链接，它表明可以有一个从上到下透明的边框渐变；

**方法一** /* 只使用背景渐变 */

```
.one { 
    width: 400px;
    padding: 20px 25px;
    border-top: 5px solid #000;
    margin: 40px auto;
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#000), to(transparent));
    background-image: -webkit-linear-gradient(#000, transparent);
    background-image:
        -moz-linear-gradient(#000, transparent),
        -moz-linear-gradient(#000, transparent)
    ;
    background-image:
        -o-linear-gradient(#000, transparent),
        -o-linear-gradient(#000, transparent)
    ;
    background-image: 
        linear-gradient(#000, transparent),
        linear-gradient(#000, transparent)
    ;
    -moz-background-size:5px 100%;
    background-size:5px 100%;
    background-position:0 0, 100% 0;
    background-repeat:no-repeat;
} 
```

**方法二** /* 使用伪元素和背景渐变 */

```
.two {
    position: relative;
    width: 400px;
    padding: 20px;
    border: 5px solid transparent;
    border-top-color: #000;
    margin: 40px auto;
}

.two:before,
.two:after {
    content: "";
    position: absolute;
    top: -5px;
    bottom: -5px;
    left: -5px;
    width: 5px;
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#000), to(transparent));
    background-image: -webkit-linear-gradient(#000, transparent);
    background-image: -moz-linear-gradient(#000, transparent);
    background-image: -o-linear-gradient(#000, transparent);
    background-image: linear-gradient(#000, transparent);
}

.two:after {
    left: auto;
    right: -5px;
} 
```

我不明白上面的 CSS 是如何让页面知道方向的，我认为它只是一个小小的、简单的、被忽视的编辑，我现在似乎无法及时找到，因此我提出了这个问题寻求帮助。

我还想知道如果边框是虚线还是虚线，这是否可行？

感谢您提前提供任何帮助和/或建议。

最好的问候，蒂姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T01:01:11.110

**注意**- 编辑 CSS 以使渐变跨越元素的宽度，而不仅仅是边框宽度。

这就是我想出的，这或多或少是 h3n 建议填充更多特定于供应商的属性：

```
border-right: 5px solid #000; /* Don't forget to modify to the right border. */
background-image: 
    -webkit-gradient(linear, 0 0, 0 100%, from(#000), to(transparent));
background-image: 
    -webkit-linear-gradient(180deg, #000, transparent),
    -webkit-linear-gradient(180deg, #000, transparent)
;
background-image: 
    -moz-linear-gradient(180deg, #000, transparent),
    -moz-linear-gradient(180deg, #000, transparent)
;
background-image:
    -o-linear-gradient(180deg, #000, transparent),
    -o-linear-gradient(180deg, #000, transparent)
;
background-image: 
    linear-gradient(90deg, #000, transparent),
    linear-gradient(90deg, #000, transparent)
;
-moz-background-size: 100% 5px; /* This get flipped. */
background-size: 100% 5px; /* This get flipped. */
background-position: 0 0, 0 100%; /* The last argument gets flipped. */
background-repeat: no-repeat; 
```

[http://jsfiddle.net/vqnk9/1548/](http://jsfiddle.net/vqnk9/1548/)

MDN 也有一个关于如何处理这个跨浏览器的[合理教程。](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient)

现在，如果您仔细观察，您可能会注意到非供应商`background-image`使用`90deg`而不是`180deg`. 我最初的想法是`-90deg`，所以这对我来说当然是有道理的（？），但至于它们为什么不同，这里是[W3 规范](http://dev.w3.org/csswg/css3-images/#linear-gradients)（关于这种差异背后的原因，请参见最后的引用）：

> **4.1.1。线性梯度（）语法**
> 
> 线性梯度语法是：

```
<linear-gradient> = linear-gradient(
    [ [ <angle> | to <side-or-corner> ] ,]? 
    <color-stop>[, <color-stop>]+
)

<side-or-corner> = [left | right] || [top | bottom] 
```

> 该函数的第一个参数指定渐变线，它为渐变提供方向并确定如何定位色标。可以省略；如果是这样，它默认为“到底部”。
> 
> 渐变线的方向可以通过两种方式指定：
> 
> **使用角度**
> 
> 就本论点而言，“0deg”指向上方，正角表示顺时针旋转，因此“90deg”指向右侧。
> 
> **使用关键字**
> 
> 如果参数是“to top”、“to right”、“to bottom”或“to left”，则渐变线的角度分别为“0deg”、“90deg”、“180deg”或“270deg” .
> 
> 如果参数指定了盒子的一个角，例如“到左上角”，则渐变线必须倾斜，使其指向与指定角相同的象限，并且垂直于与两个相邻角相交的线。渐变框。这会导致 50% 的色标与两个相邻的角相交（参见示例）。
> 
> 从渐变框的中心开始，在两个方向上以指定的角度延伸一条线。终点是渐变线上的点，垂直于渐变线的线将在指定方向上与渐变框的角相交。起点的确定方式相同，但方向相反。

并且来自 MDN，一些关于为什么学位不同的[行政人员（怪苹果？）：](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient)

> 最后的语义好奇心仍然存在于带前缀的变体和不带前缀的提议之间。按照最初的 Apple 提议，语法的前缀变体都使用`<angle>`定义的极角，即`0deg`代表东方。为了与 CSS 的其余部分保持一致，规范定义了一个`0deg` 表示北方的角度。**为了防止使用该属性的前缀版本的站点突然损坏，即使在适应其他向前兼容的最终语法时，它们仍保留原始角度定义`(0deg = East)`。取消属性前缀时，它们将切换到正确的规范。**此外，由于它们并非不兼容，Gecko 支持带前缀和不带 to 关键字的语法。同样，在取消前缀时，没有关键字的语法将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:44:24.450

至少对于 webkit，它设置了从右到左的角度：-webkit-linear-gradient(180deg, black, white)

# javascript - tinyMCE链接列表是否需要由外部文件生成

> ID：15627364
> 
> 赞同：2
> 
> 时间：2013-03-26T00:36:39.017
> 
> 标签：javascript, tinymce

我正在尝试在 tinyMCE 中填充链接列表，但值需要根据用户在其他表单字段中输入的内容进行更改。包含这些值的页面上已经填充了一个数组，因此想知道是否可以使用它而不是像此处描述的那样填充外部文件：

[http://www.tinymce.com/wiki.php/Configuration:external_link_list_url](http://www.tinymce.com/wiki.php/Configuration:external_link_list_url)

编辑

那么是否有“external_link_list_url”的替代方案。例如说'external_link_list_var'

```
tinyMCE.init({
    ...
    external_link_list_url : "myexternallist.js"
}); 
```

我会的

```
tinyMCE.init({
    ...
    external_link_list_var : SomeVar
}); 
```

如果不是，我想一种方法是通过查询字符串将值传递给 php 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:37:38.897

您可以根据需要重新启动编辑器实例并设置 external_link_list。要正确关闭 tinymce，请查看有关 tinymce 的一些 stackoverflow 问题。

# sparql - 如何让这个 sparqle 查询工作？

> ID：15627366
> 
> 赞同：2
> 
> 时间：2013-03-26T00:36:51.727
> 
> 标签：sparql, semantic-web

我想在 Sparql 中进行以下查询：“涉及巴拉克奥巴马和其他两个与伊利诺伊州有某种联系的人的社会三合会。” 社会三合会是由三个人组成的一组，每对之间都有联系。

```
# Find social triads involving Barack Obama and two other people who
# have some connection to the state of Illinois.  A social triad is a
# group of three people where there is a link between every pair.
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX dbpr: <http://dbpedia.org/resource/>
PREFIX dbpo: <http://dbpedia.org/ontology/>
PREFIX dbpprop: <http://dbpedia.org/property/>
PREFIX dbpedia: <http://dbpedia.org/resource/>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
SELECT  distinct ?P1 ?P2
WHERE { 
    ?P1 a dbpo:Person.
    ?P2 a dbpo:Person.
    ?P1 dbpprop:state dbpr:Illinois.
    ?P2 dbpprop:state dbpr:Illinois.
    ?prop a rdf:Property. 

    {?P1 ?prop ?P2} UNION {?P2 ?prop ?P1}.
    {dbpedia:Barack_Obama ?prop ?P1} UNION {?P1 ?prop dbpedia:Barack_Obama}. 
    {dbpedia:Barack_Obama ?prop ?P2} UNION {?P2 ?prop dbpedia:Barack_Obama}. 

  } 
```

但是我没有得到任何结果。我怎样才能让它工作？此外，我希望 ?P1 和 ?P2 是不同的人。这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T10:13:50.433

如果我对您的理解正确，那么这可能就是您想要的：

```
SELECT  distinct ?P1 ?P2
WHERE { 
  ?P1 a dbpo:Person.
  ?P2 a dbpo:Person.
  ?P1 dbpprop:state dbpr:Illinois.
  ?P2 dbpprop:state dbpr:Illinois.

  # all three are connected via prop
  ?P1 ?prop ?P2, dbpedia:Barack_Obama .
  ?P2 ?prop ?P1, dbpedia:Barack_Obama .
  dbpedia:Barack_Obama ?prop ?P1, ?P2 .

  # P1 and P2 are not the same, and not Barack Obama
  FILTER (?P1 != ?P2)
  FILTER (?P1 != dbpedia:Barack_Obama)
  FILTER (?P2 != dbpedia:Barack_Obama)
} 
```

请注意，这仅**查询具有****相同属性**的人**的**“三合会” ，**而不是**由**任何属性**连接的三合会。 **`?prop`**

# iphone - nsmutablearray 到 tableview

> ID：15627370
> 
> 赞同：0
> 
> 时间：2013-03-26T00:37:22.520
> 
> 标签：iphone, ios, uiviewcontroller

我有一个 nsmutablearray，我试图在表格视图上显示。我有一个 uiviewcontroller 并手动添加了表格视图。我已经通过将委托和源拖到文件所有者来在 xib 上添加委托和源。这是我的 .h 文件

```
#import <UIKit/UIKit.h>   

@interface ViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>
{
    IBOutlet UILabel *label;
    IBOutlet UITextField *texto;
    IBOutlet UIWebView *link;
    //IBOutlet UILabel *links;
    IBOutlet UITextView *links;    
    // IBOutlet UITableView *tableView;
    NSMutableArray *jsonArray;
}

@property (nonatomic,retain) IBOutlet UITableView *tableView;
//@property (nonatomic,retain) NSMutableArray *jsonArray;

-(IBAction)button;
-(IBAction)field;

-(void)populateArray;

@end 
```

这是我的 .m 文件

```
#import "ViewController.h"

@interface ViewController ()
@end

@implementation ViewController

NSString *one;
NSString *jsonreturn;

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSURL *url = [NSURL URLWithString:@"www.myphpfile.com"];
    jsonreturn = [[NSString alloc] initWithContentsOfURL:url]; // Pulls the URL
NSLog(jsonreturn); // Look at the console and you can see what the restults are
    NSData *jsonData = [jsonreturn dataUsingEncoding:NSUTF32BigEndianStringEncoding];
    NSError *error = nil;
    jsonArray = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers|NSJSONReadingAllowFragments error:&error];

    NSLog(@"jsonList: %@", jsonArray);

    if(!jsonArray)
    {
        NSLog(@"Error parsing JSON:%@", error);
    }
    else
    {
        // Exception thrown here.
        for(NSDictionary *item in jsonArray)
        {
            NSLog(@"%@", item);
        }
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{    
    return [jsonArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell==nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSLog(@"Im HERE!!!");

    cell.textLabel.text = [jsonArray objectAtIndex:[indexPath row]];
    NSLog(@"Cell is %@", [jsonArray objectAtIndex:indexPath.row]);
    return cell;
} 
```

我的问题是，我无法让单元格显示日期，我有 ns 日志，它显示它正在拉动它，我也得到一个线程 1，断点 1.1 错误，其中创建了单元格并发出警告行sayin tableView 是本地的并隐藏实例变量，有什么想法吗？谢谢您的帮助！

更新：我的程序要编译，但它抛出异常：2013-03-26 22:28:48.691 Hello[79888:11303] ***由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:] ：这个类对于键 tableView 不符合键值编码。

这是否与我提供表格的信息或我错误地创建表格有关？再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:29:17.440

首先分配你的 NSMutableArray，像这样“ ArrayName = [[NSMutableArray alloc] init];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:07:16.390

您收到警告是因为您调用了一个实例变量`tableView`，并且在表视图数据源方法`tableView`中也作为参数传入。更改此变量名称或实例变量名称将解决问题。因为他们都指的是同一件事，所以没关系。

如果它只是停在一个点上说`Stopping at Breakpoint 1`你可能已经设置了一个断点。它看起来像一个蓝色箭头标记，位于代码的左侧。您可以通过再次单击它（变为较浅的阴影）或删除它来禁用它 - 将断点拖出或右键单击断点并删除。

![断点](../Images/874e370e1e392b393d0edf04d03fa362.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:10:50.797

查看你的 tablview 的变量名

```
IBOutlet UITableView *tableView 
```

它与 UITableView 使用的内置方法相同

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

这就是为什么它给你警告，“tableView 是本地的并且隐藏实例变量”

为了避免它，只需将您的 UITableView 变量名更改为“myTableView”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T03:10:38.840

如果您已通过界面构建​​器/故事板添加了 tableview，请尝试添加：

```
@synthesize tableView; 
```

在 .m 文件中的 @implementation 下。然后确保在 IB 中正确连接了 tableview。（以 View Controller 作为数据源和委托，然后将 VC 形成为 tableview 作为 tableView。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T03:57:29.970

```
NSString *one;
NSString *jsonreturn; 
```

这两种说法缺乏标准化。

如果你没有使用 ARC，jsonreturn 会泄漏。

# java - 无法从 zk 列表框中检索值

> ID：15627373
> 
> 赞同：0
> 
> 时间：2013-03-26T00:37:31.690
> 
> 标签：java, listbox, zk

假设我有一个包含十个项目的列表框，然后我为每个页面设置五个项目，所以现在列表框有两个页面

问题是每次我想获取列表框中的值时，它只会得到五个项目而不是十个项目。

我在我的列表框上使用 ListItemRenderer

下面是我的代码：

```
AnnotationConfiguration config = new AnnotationConfiguration();
SessionFactory sessionFactory = config.configure().buildSessionFactory();

Session session = sessionFactory.openSession();
String str = "from Users";
Query q = session.createQuery(str);

List<Users> user = q.list();
session.close();
sessionFactory.close();

list.setModel(new ListModelList<Users>(user));
list.setItemRenderer(new ListitemRenderer() {

    @Override
    public void render(Listitem item, Object data, int index)
            throws Exception {
        Users user = (Users) data;
        item.setValue(user);

        new Listcell(user.getUsername()).setParent(item);
        new Listcell(user.getUserrole()).setParent(item);
    }
}); 
```

}

在我的代码下方获取值：

```
String name ="";
String role ="";

Users user = new Users();
Listbox box = (Listbox) list.getFellow("win").getFellow("list");
List<Listitem> lists = box.getItems();

//membaca setiap row yang ada pada list
for(Listitem currentList : lists){

    List<Component> com = currentList.getChildren();

    //membaca setiap column pada row
    for (Component currentComp : com){
        Listcell lc = (Listcell) currentComp;
        if(lc.getColumnIndex() == 0){
            name = lc.getLabel();
            System.out.println("name = " + name);
        }

        if(lc.getColumnIndex()==1){
            role = lc.getLabel();
            System.out.println("role = " + role);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:54:47.633

这是正确的行为。正如您所描述的，列表是`View`并且`View`
永远不会超过 5 个`Items`。

你想得到`Model`所以得到`Model`。

```
ListModelList lists = (ListModelList)box.getModel(); 
```

# python - 当有多个类时，如何访问列表中的类实例？

> ID：15627374
> 
> 赞同：0
> 
> 时间：2013-03-26T00:37:34.490
> 
> 标签：python, oop, python-3.x

我是一名初级程序员，正在构建一个程序，该程序模拟具有多个银行账户的银行，用户可以提取/存入现金、创建账户、获取汇率等。目前，我正在尝试访问一组实例我的班级都是我的帐户班级的对象。Account Manager 类负责管理这些帐户对象并在需要用户输入时帮助组织它们。现在，我正在尝试在我的菜单上模拟我的第三个选项，该选项获取有关用户选择的帐户的信息（他们必须手动输入其帐户的 ID 以检索其信息、提取/存入现金等.)。尽管我已经设法将所有这些类实例存储在一个列表中，但我似乎无法使用我的 get_account 方法来检索这些以供使用。我将在下面发布我的所有代码。如果您发现其他任何不合适的地方，请随时告诉我。代码：

```
# Virtual Bank
# 3/21/13

# Account Manager Class
class AccountManager(object):
    """Manages and handles accounts for user access"""
    # Initial
    def __init__(self):
        self.accounts = []

    # create account
    def create_account(self, ID, bal = 0):
        # Check for uniqueness? Possible method/exception??? <- Fix this
        account = Account(ID, bal)
        self.accounts.append(account)

    def get_account(self, ID):
        for account in self.accounts:
            if account.ID == ID:
                return account
            else:
                return "That is not a valid account. Sending you back to Menu()"
                Menu()

class Account(object):
    """An interactive bank account."""
    wallet = 0
    # Initial
    def __init__(self, ID, bal):
        print("A new account has been created!")
        self.id = ID
        self.bal = bal

    def __str__(self):
        return "|Account Info| \nAccount ID: " + self.id + "\nAccount balance: $" + self.bal

# Main        
AccManager = AccountManager()
def Menu():
    print(
        """
0 - Leave the Virtual Bank
1 - Open a new account
2 - Get info on an account
3 - Withdraw money
4 - Deposit money
5 - Transfer money from one account to another
6 - Get exchange rates(Euro, Franc, Pounds, Yuan, Yen)
"""
        ) # Add more if necessary
    choice = input("What would you like to do?: ")
    while choice != "0":
        if choice == "1":
            id_choice = input("What would you like your account to be named?: ")
            bal_choice = float(input("How much money would you like to deposit?(USD): "))
            AccManager.create_account(ID = id_choice,bal = bal_choice)
            Menu()
        elif choice == "2":
            acc_choice = input("What account would you like to access?(ID only, please): ")
            AccManager.get_account(acc_choice)
            print(acc_choice)

Menu() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:40:24.237

您的`Account`对象实际上似乎没有`ID`属性；相反，它们具有`id`属性。Python 区分大小写；尝试更改`if account.ID == ID`为`if account.id == ID`.

编辑：

在第一次不匹配之后，您也会返回。您需要从块中删除一级缩进，`else`以便首先通过整个循环，事实上，您的`else`块甚至不应该是`else`块，因为您实际上并没有匹配`if`; **只有在没有**帐户与给定 ID 匹配时，该方法才会失败。

编辑2：

此外，您实际上并没有将返回值分配`get_account()`给任何东西，因此它丢失了。我不确定你期望在那里发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:06:25.077

错误出现在第 31 和 35 行。您写的是“id”而不是“ID”。充分利用这两件事：

```
class Account(object):
    """An interactive bank account."""
    wallet = 0
    # Initial
    def __init__(self, ID, bal):
        print("A new account has been created!")
        self.ID = ID
        self.bal = bal

    def __str__(self):
        return "|Account Info| \nAccount ID: " + self.ID + "\nAccount balance: $" + self.bal 
```

请让我们知道代码在此之后是否有效。

# ios - 无法从应用委托调用 View Controller 方法

> ID：15627382
> 
> 赞同：0
> 
> 时间：2013-03-26T00:38:06.477
> 
> 标签：ios, objective-c, uistoryboard

我正在尝试从 facebook iOS SDK 构建示例应用程序，但我使用的是故事板，所以它有点不同。

我正在我的 AppDelegate.m 应用程序中进行此检查`didFinishLaunchingWithOptions:`

```
 if (FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded) {
    // To-do, show logged in view
} else {
    // No, display the login page.
    [self showLoginView];
}

return YES; 
```

我已经创建了一个从主`ViewController`控制器到导航控制器的 segue。如果我使用`ViewController`视图中的按钮触发 segue，则 segue 可以正常工作，但我无法从`AppDelegate`.

方法的名称（执行segue）是`-displayLoginView`，但我找不到指向`ViewController` 在启动时处于活动状态的特定实例的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:43:48.843

您`UIApplicationDelegate`不是视图控制器，因此它无法启动任何 segue。

您可能想调用`self.window.rootViewController`以获取相关`viewcontroller`问题，但将该代码放入您`viewController`的 's`viewDidAppear`或`viewWillAppear`方法而不是应用程序委托中可能更容易。

# c++ - fstream 的问题

> ID：15627384
> 
> 赞同：1
> 
> 时间：2013-03-26T00:38:26.383
> 
> 标签：c++, fstream

我正在将一个向量数组写入一个 ofstream 文件，但是某些值没有被写入，IE：

```
#include <iostream>
#include <vector>
#include <fstream>
#include <string>
#include <cstdlib>
using namespace std;
int main (){
    char * hold = new char [100];
    vector<double> fx(2049);
    ifstream inputFile;
    ofstream myFile;
    inputFile.open("data.txt");
    myFile.open("test.txt");
    for (int c=0; c<2049; c++){
         inputFile.getline(hold, 100);
         fx[c] = atof(hold);
    }
    for (int c=0; c<2049; c++){
         myFile << fx[c] << "\n";
    }
} 
```

在 fx 内，后半部分都等于 0。（fx[1024] 到 fx[2048]==0）。然而，在 test.txt 中，这些 0 值都不存在，在应用回车时。有什么想法吗？谢谢！（这些问题的格式是新的......任何使这更容易理解的提示将不胜感激。）

注意：我意识到这个程序是相当多余的。实际的程序有更多的功能，这只是一个工作不正确的区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:26:46.217

尝试这个

```
#include <iostream>
#include <vector>
#include <fstream>
#include <string>
#include <cstdlib>

#define MAX_FILE_LINES 2048

using namespace std;

//genarate random double number
double fRand()
{
    double fMin = 100, fMax = 200;
    double f = (double)rand();    
    return fMin + (f / (fMax - fMin));  
}

//init file (if you need to create sample file with list of double numbers, you can use this function)
void fileInit(){    
    ofstream sourceFile;    
    sourceFile.open("D:\\source.txt");
    if (sourceFile.is_open())
    {
        for (int i=0; i<MAX_FILE_LINES; i++){
            sourceFile << fRand() << endl;
        }
    }
}

int main (){
    string buffer;
    vector<double> fx(MAX_FILE_LINES);  
    ifstream sourceFile;
    ofstream destinationFile;
    sourceFile.open("D:\\source.txt");
    destinationFile.open("D:\\destination.txt");

    //reading file lines to vector
    int lineCount =0;
    if (sourceFile.is_open())
      {
        while ( sourceFile.good() )
        {
          getline (sourceFile,buffer);
          fx[lineCount] = atof(buffer.c_str());
          lineCount++;
          if (lineCount == (MAX_FILE_LINES-1)){
              break;
          }
        }
        sourceFile.close();
      }

    //write lines to new file
    if (destinationFile.is_open())
    {
        for (int i=0; i<MAX_FILE_LINES; i++){
         destinationFile << fx[i] << endl;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:17:33.637

为什么要一次性使用手卷缓冲器？您无法节省考虑周期成本的百万分之一，没有足够的浪费来弥补。

首先考虑消除不必要的陈述和未经检查的失败。

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>
#include <vector>
using namespace std;
int main()
{
    vector<float> data;
    {
        ifstream ids("source.txt",ios_base::in);
        int linenr = 0;
        for ( string line ; getline(ids,line) ; ) {
            ++linenr;
            decltype(data)::value_type x;
            istringstream s(line);
            if ( s >> x ) 
                data.push_back(x);
            else
                cerr << "crap line "<<linenr<<" ignored: " << line << '\n';
        }
    }
    ofstream ods("object.txt");
    for ( auto x : data )
        ods << x << '\n';
} 
```

# dom - DOM 中的 HTMLCollection 和 NodeList 有什么区别？

> ID：15627385
> 
> 赞同：12
> 
> 时间：2013-03-26T00:38:56.900
> 
> 标签：dom, nodelist, htmlcollection

我尝试了我的 Google-fu，但我似乎找不到该问题的任何好的答案。请帮忙。

编辑：好的，所以我找到[了这篇](http://alebelcor.blogspot.hk/2011/03/htmlcollections-nodelists.html)博文。所以它们来自不同的DOM级别，但除此之外它并没有说太多......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-30T18:02:17.930

正如您所说，NodeList 在 DOM-Level-3-Core 中定义，HTMLCollection 在 DOM-Level-2-HTML 中定义。

他们的接口是：

```
interface HTMLCollection {
  readonly attribute unsigned long   length;
  Node               item(in unsigned long index);
  Node               namedItem(in DOMString name);
};

interface NodeList {
  Node               item(in unsigned long index);
  readonly attribute unsigned long   length;
}; 
```

所以*NodeList*是*HTMLCollection*的继承者，以更通用的形式（对于 xml）。

# sql - SQL 日期计算

> ID：15627394
> 
> 赞同：0
> 
> 时间：2013-03-26T00:39:38.657
> 
> 标签：sql

```
select emp# 
from emp 
where dateadd(YY,1,[Completed Date]) in (getdate() - 30,getdate()) 
```

我正在检查完成日期是否为一年，应该是下一个开始日期的 30 天。

例如：培训于 2012 年 3 月 22 日完成

需要在 22/3/2013 重考

我需要证明他在接下来的 30 天批次中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:53:01.497

如果您想查看下一次培训（最后一次培训 + 1 年）的所有人都在接下来的 30 天内，或者 PAST DUE，试试这个：

```
select *, dateadd(YY, 1, [Completed Date]) nextTraining
from emp
where dateadd(YY, 1, [Completed Date]) < getdate()+30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:45:25.347

您不能`IN`像上面尝试的那样使用。相反，您可以使用`BETWEEN`或我的首选，大于和小于：

```
select emp# 
from emp 
where dateadd(YY,1,[Completed Date]) >= getdate()-30
   and dateadd(YY,1,[Completed Date]) <= getdate() 
```

不确定您是否需要该子句`AND`中的标准`WHERE`，但如果您这样做，它就在那里。我还建议使用“year”而不是“YY”，但它们都可以。

# java - 基于 Java 的库，用于提供特定长度的素数

> ID：15627400
> 
> 赞同：3
> 
> 时间：2013-03-26T00:40:13.200
> 
> 标签：java

有谁知道一个基于 Java 的库，它可以用来提供一定长度（k）的所有素数。例如，如果 k = 2，库将提供：11、13、17.. 87。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:52:58.357

我不知道任何库，但这[是一种在此](https://stackoverflow.com/questions/586284/finding-prime-numbers-with-the-sieve-of-eratosthenes-originally-is-there-a-bet)[SO](http://en.wikipedia.org/wiki/Sieve_of_Erastosthenes)答案中推荐的查找素数的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:03:51.520

我也不知道图书馆。但这里有一些我写的代码可以做到这一点。我认为它也可以用于其他需求：

```
package com.sandbox;

import org.junit.Test;

import static junit.framework.Assert.assertEquals;
import static junit.framework.Assert.assertTrue;

public class SandboxTest {

    @Test
    public void whenGettingNextThenItIsNextPrime() {
        Primes primes = new Primes();
        assertEquals((Long) 2L, primes.next());
        assertEquals((Long) 3L, primes.next());
        assertEquals((Long) 5L, primes.next());
        assertEquals((Long) 7L, primes.next());
        assertEquals((Long) 11L, primes.next());
    }

    @Test
    public void whenPassingIn2ThenIsPrime() {
        assertTrue(new Primes().isPrime(2));
    }

    @Test
    public void getAllPrimesOfLength2() {  //this does what your question asks
        Primes primes = new Primes();
        while (true) {
            Long prime = primes.next();
            int length = String.valueOf(prime).length();
            if (length > 2) {
                return; //we found them all
            } else if (length == 2) {
                System.out.println(prime);
            }
        }
    }
} 
```

这是实现：

```
package com.sandbox;

import java.util.Iterator;

public class Primes implements Iterator<Long>{
    private long currentPrime = 1;

    public boolean hasNext() {
        return true;
    }

    public Long next() {
        currentPrime++;
        while (!isPrime(currentPrime)) {
            currentPrime++;
        }
        return currentPrime;
    }

    /**
     * Optimize this on your own
     */
    public boolean isPrime(long numberInQuestion) {
        for (int i = 2; i < numberInQuestion - 1; i++) {
            if (numberInQuestion % i == 0) {
                return false;
            }
        }
        return true;
    }

    public void remove() {
        throw new UnsupportedOperationException();
    }
} 
```

# html - 定心 不使用“边距：自动；”

> ID：15627401
> 
> 赞同：7
> 
> 时间：2013-03-26T00:40:14.560
> 
> 标签：html, css, google-chrome

我正在寻找一种在 Google Chrome 页面中水平居中 div 的方法。

我尝试使用 margin: auto; 但我读过 Google Chrome 不支持此功能。结果，我的 div 保持与屏幕左侧对齐。

例如，如果我使用 margin-left: 100px; div 确实向页面中心移动，但我不想手动将其居中。

HTML：

```
<body>
    <div id="header">
        <p>John Doe</p>
        <p>email</p>
    </div>   
</body> 
```

CSS：

```
body 
{
    background-color: #f0f0f0;
}

div 
{
    border-radius: 5px;    
}

#header 
{
    position: fixed;
    background-color: #3399ff;
    color: white;
    width: 60%;
    margin: auto;
}

#header p 
{
    display: inline;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T00:51:09.810

`margin: auto`不适用于固定（或绝对）位置的 div。相反，您需要将`left: 50%`左边距设置为元素宽度的负一半。

```
#header 
{
    position: fixed;
    width: 60%;
    left: 50%;
    margin-left: -30%;
} 
```

[http://jsfiddle.net/ZAqJM/](http://jsfiddle.net/ZAqJM/)

更新：到目前为止，大多数浏览器都将支持`transfrom: translate`，因此您可以轻松地执行以下操作：

```
{
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T00:46:25.447

居中`<div>`使用`margin: auto;`跨浏览器的作品。您需要确保要居中的 div 包含在**块级**元素中。

```
<div class="headerContainer">
    <div id="header">
        <p>John Doe</p>
        <p>email</p>
    </div>
</div> 
```

要正确居中，您`div#header`需要是*块级*的，并且必须有一个`width`并且是*块级*元素的子元素。（技术上`<body>`是*块级*，但您可能希望维护标题的“容器”）

因此，删除`position: fixed`from `#header { ... }`。请参阅工作示例：http: [//jsfiddle.net/amyamy86/2sXdC/](http://jsfiddle.net/amyamy86/2sXdC/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-10T14:02:57.213

我知道这已经很老了，但我认为值得一提的是，以下内容就像魔术一样：

```
#header {
  left: 50%;
  transform: translateX(-50%);
} 
```

供日后参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T00:53:08.353

margin:auto 用于具有宽度并设置左右边距相等的对象。

Div 基本上是带有 FULL-WIDTH (100%) 的 BLOCK，因此设置 margin:auto 不会得到任何东西，因为宽度对父级已满。

为了让它工作，你可以通过两种方式做到这一点，

1.  对 div 使用 text-align:center -> 这将在 div 中心对齐文本
2.  在 div 中包含宽度属性（即宽度：200px），它会正常工作。

# ruby-on-rails - 如何从回形针附加的图像中读取 exif 数据？

> ID：15627402
> 
> 赞同：4
> 
> 时间：2013-03-26T00:40:23.530
> 
> 标签：ruby-on-rails, ruby, paperclip, exif

我正在尝试从我使用 exifr gem 用回形针上传的 jpeg 图像中读取 exif 数据，并将焦距等保存到属性中，但我似乎无法做到。我是一名 Rails 初学者，如果有人能提供帮助，我将不胜感激。

我的 photo.rb 模型：

```
class Photo < ActiveRecord::Base

attr_accessible :date, :exif, :name, :photo
has_attached_file   :photo, :styles => { :small => "200x200#" , :medium => "1280x720#" },
:url  => "/assets/photos/:id/:style/:basename.:extension",
:path => ":rails_root/public/assets/photos/:id/:style/:basename.:extension"

after_photo_post_process :load_exif

validates_attachment_presence :photo
validates_attachment_content_type :photo, :content_type => ['image/jpeg']

def load_exif
  exif = EXIFR::JPEG.new(photo.queued_for_write[:original])
  return if exif.nil? or not exif.exif?
  self.exposure = exif.exposure_time.to_s
  self.f_stop = exif.f_number.to_f.to_s
  self.focal_length = exif.focal_length.to_f.round.to_s
  self.iso = exif.iso_speed_ratings
  self.date = exif.date_time.to_date
  rescue
    false
  end
end 
```

我的表格（使用 SimpleForm）：

```
<%= simple_form_for @photo, :html => {:multipart => true}  do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :name %>
    <%= f.file_field :photo, :label => 'Attach photo' %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

show.html.erb 带有我要显示的字段：

```
<p>
  <b>Name:</b>
  <%= @photo.name %>
</p>

<p>
  <b>Date:</b>
  <%= @photo.date %>
</p>

<p>
  <b>Exposure:</b>
  <%= @photo.exposure %>
</p> 
```

我可能错过了一些愚蠢的东西，所以如果是这样，我很抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:43:24.403

尝试将方法中的第一行更改`load_exif`为：

```
exif = EXIFR::JPEG.new(photo.queued_for_write[:original].path) 
```

`.path`最后，我不相信它会返回文件路径。

# assembly - 在 emu8086 的另一个扇区中加载程序

> ID：15627404
> 
> 赞同：1
> 
> 时间：2013-03-26T00:40:35.440
> 
> 标签：assembly, x86

我使用了 micro_os_loader 并制作了自己的内核，它工作得很好。内核必须在第 2 扇区，这没关系，但我想在第 4 扇区编写一个程序，并希望在内核中作为子程序运行它。但我该怎么做呢？在内核中，我应该怎么做才能让我的程序在第 4 扇区运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:42:14.380

这在很大程度上取决于您的内核是如何工作的。

您需要将程序代码读入内存，为其创建一个进程，然后……嗯……下一步已经非常依赖于设计了。

基本上你需要让 CS:IP 指向程序的入口点。

例如，如果您正在处理多任务，您可能会使用一个处理程序设置定时器中断，该处理程序保存 PCB 中的所有寄存器并从进程队列中选择另一个进程。然后它从属于该进程的 PCB 加载寄存器，篡改堆栈上的返回地址以指向从该进程执行的下一条指令，并发出*iret*以赋予进程控制权。

同时，内核在一个循环中空闲 - 例如：

```
idle:
    hlt
    jmp idle 
```

从这里开始，内核没有任何线性工作要做。相反，它处于空闲状态，等待来自进程的系统调用和来自硬件的中断来处理。系统调用通常以中断处理程序的形式实现，因此系统中发生的各种异步事件都可以统一处理。

[编辑]

对于另一个示例，我们将使用抢占式多任务处理，愚蠢地将调度程序硬编码到计时器 IRQ 处理程序中，而没有深入了解所有细节。例如，实现进程队列取决于您（它只是内存中某处的 PCB 列表）。我们不会重新编程计时器，因为它不是必需的（它已经在运行并生成 IRQ 0）。但是，您可以根据需要对其进行重新编程，以便以不同于默认 8253/8254 设置提供的速率切换任务。另外，请注意 IRL 您还需要保存 FPU 状态和其他一些东西......

```
; cdecl calling convention
; ugly pieces of code appear! DO NOT COPY-PASTE OR OTHERWISE USE THIS! this is just for illustration

proc timerInterruptHandler
    cli                     ; disabling interrupts so they don't mess up anything. no need to worry about re-enabling them as FLAGS is implicitly saved on the stack
    push ax                 ; let's first save our current CPU state on the stack
    push cx
    push dx
    push bx
    push bp
    push sp
    push si
    push di
    push es
    push ss
    push ds

    push bp
    mov bp,sp

    call getCurrentProcess    ; get the current process instance. let's now assume that the context is simply saved at relative address 0
    mov di,ax
    lea si,[bp + 2]
    mov cx,14
    rep movsw                 ; save the contents of each register to the buffer

    call selectNextProcess    ; we'll select the next process from the queue (or the first when the current is the last one).
    mov si,ax
    lea di,[bp + 2]
    mov cx,14
    rep movsw                 ; overwrite the saved registers on the stack with the saved state of our new process
                              ; upon returning from the handler (the next steps), the state of the new process will be loaded

    mov sp,bp
    pop bp

    pop ds
    pop ss
    pop es
    pop di
    pop si
    pop sp
    pop bp
    pop bx
    pop dx
    pop cx
    call acknowledgeMasterPICInterrupt  ; every IRQ must be acknowledged to the corresponding PIC (both if the IRQ is triggered by the salve PIC, i.e. IRQ8+)
    pop ax
    iret
endp timerInterruptHandler

; void setUpTaskScheduler(void)
proc setUpTaskScheduler                ; here we assume that no IRQ remapping is done, thus IRQ 0 (timer) is at INT 8.
    pushf
    cli
    push bx
    push ds

    mov cx,2                           ; multiplying the interrupt number by 4 gives you the address of the IVT record to modify
    mov bx,8
    shl bx,cx

    xor ax,ax
    mov ds,ax

    lea ax,[cs:timerInterruptHandler]   ; write the offset first
    mov [word ptr ds:bx + 0],ax
    mov ax,cs
    mov [word ptr ds:bx + 2],ax         ; then the segment

    pop ds
    pop bx
    popf
    ret
endp setUpTaskScheduler

; void acknowledgeMasterPICInterrupt(void)
proc acknowledgeMasterPICInterrupt
    mov al,20h
    out 20h,al
    ret
endp acknowledgeMasterPICInterrupt

; void acknowledgeSlavePICInterrupt(void)
proc acknowledgeSlavePICInterrupt
    mov al,20h
    out 0A0h,al
    call acknowledgeMasterPICInterrupt
    ret
endp acknowledgeSlavePICInterrupt

_main:
    ; ...
    call setUpTaskScheduler
    ; Once interrupts are enabled the scheduler will start doing its work
    ; ... 
```

[/编辑]

**[在这里](http://wiki.osdev.org/Programmable_Interval_Timer)**您可以找到重新编程 PIT 的代码示例。

# jquery - 复选框上的 jQuery .addclass

> ID：15627405
> 
> 赞同：1
> 
> 时间：2013-03-26T00:40:55.647
> 
> 标签：jquery, forms, class, checkbox, addclass

我正在尝试向表单中的多个元素添加一个类。这是我的 jQuery 代码：

```
$('input[type="text"],input[type="password"],select,input[type="submit"],input[type="checkbox"]').addClass("idleField"); 
```

它适用于除复选框之外的所有人。知道为什么吗？

注意：我也尝试过使用以下语法：

:复选框

#myForm :复选框

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:05:11.357

`**[LIVE DEMO](http://jsbin.com/otoras/1/edit)**`

```
$(':text, :password, :submit, select, :checkbox').addClass("idleField"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:49:32.197

它对我来说非常好。也许您的复选框样式不正确？

[jsFiddle](http://jsfiddle.net/sjxUu/)

**HTML**

```
<input type="checkbox" /> 
```

**CSS**

```
.idleField {
    display:block;
    width:100px;
    height:100px;
} 
```

**JS**

```
$(document).ready(function () {
    $('input[type="text"],input[type="password"],select,input[type="submit"],input[type="checkbox"]').addClass("idleField").addClass("idleField");
}); 
```

## 更新

它在你的 jsFiddle 中工作，但你的样式不能应用于复选框。复选框（和单选按钮）由您的操作系统确定，并且不能以与文本框相同的方式设置样式。通常样式复选框或单选按钮涉及隐藏原始输入，然后创建一个新的 div（或标签）和样式，可能使用伪元素。

![在此处输入图像描述](../Images/2e9de5c94a1d399a930770f7c56eace5.png)

# php - 友好的 URL cakephp 2.3

> ID：15627407
> 
> 赞同：0
> 
> 时间：2013-03-26T00:41:05.853
> 
> 标签：php, cakephp, url-rewriting, friendly-url, cakephp-2.3

我是使用 cakephp 的新手，我正在尝试为我的网站设置友好的 URL，但我遇到了问题。

我已经完成了 cakephp 2.3 Book 所说的所有步骤，并且我的 apache 配置表明正在执行 mod_rewrite。

当我进入 cake 的主页时，它说没有配置 URL 重写，当我想访问我的 web 时，我需要通过 www.mysite.com/index.php/controller/function 当然，我想要这个：www.mysite.com/controller/function，如果我尝试这条路线，它说在我的服务器中找不到（并且我已经创建了控制器和函数）。

这是我的 .htacces 文件：

根目录：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

应用目录：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$    webroot/    [L]
   RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

网络根目录：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:34:30.437

我解决了它。在文件 /etc/apache2/sites-enabled/000-default 中，目录指向 /var/www，而我的 cakephp 目录位于 /var/www/html/myapp/cakephp。我改变了它，现在它的工作！:)

# mysql - 如何根据每个可预订实体每天有不同时间表的时间段构建和查询预约系统？

> ID：15627408
> 
> 赞同：28
> 
> 时间：2013-03-26T00:41:28.253
> 
> 标签：mysql, database-design, relational-database

我正在开发一个律师预约系统，一个人可以在给定日期的给定时间（下一个律师有空的日子）预约。

假设它是*针对律师的 ZocDoc*。相同的结构，基于时间的约会：http: [//goo.gl/djUZb](http://goo.gl/djUZb)

*我正在使用 MySQL 和 PHP。*

* * *

# 表架构：

```
CREATE TABLE `laywer_appointments` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `lawyer_id` INT unsigned,
  `day_of_week` tinyint(3) unsigned DEFAULT '1',
  `slot_date` date DEFAULT NULL,
  `slot_time` time DEFAULT NULL,
  `status` tinyint(4) NOT NULL DEFAULT '0',
  `client_id` int(11) DEFAULT NULL, -- client_id = NULL means free slot
); 
```

* * *

# 第 1 点）

每个律师都有基于星期几的默认时间段（状态 = 0 表示可用）。插入默认插槽时，我不提供日期，只提供 day_of_week。示例数据：

```
+-----------+-------------+-----------+-----------+
| lawyer_id | day_of_week | slot_time | status    |
+-----------+-------------+-----------+-----------+
| 1         | 1           | 08:00     | 0         |
| 1         | 1           | 08:30     | 0         |
| 1         | 1           | 09:00     | 0         |
| 1         | 1           | 10:30     | 0         |
| 1         | 4           | 14:30     | 0         |
| 1         | 4           | 16:40     | 0         |
| 2         | 1           | 10:20     | 0         |
| 2         | 1           | 14:00     | 0         |
| 2         | 3           | 15:50     | 0         |
+-----------+-------------+-----------+-----------+ 
```

# 第 2 点）

律师可以**为特定日期添加时间段**（*即使这一天与他的默认时间段不同*）**，也可以锁定**（*状态=-1*）特定日期的默认时间段之一（即他正在开会或生病）：

```
+-----------+-------------+-----------+-----------+-----------+
| lawyer_id | day_of_week | slot_time | slot_date | status    |
+-----------+-------------+-----------+-----------+-----------+
| 1         | 1           | 16:00     | 12/03/13  | 0         |
| 1         | 6           | 11:00     | 26/04/13  | 0         |
| 1         | 6           | 12:00     | 26/04/13  | 0         |
| 2         | 1           | 10:00     | 01/01/13  | -1        |
+-----------+-------------+-----------+-----------+-----------+ 
```

# 第 3 点）

然后我们预约了。在这种情况下，我们填写 slot_date 和 client_id：

```
+-----------+-------------+-----------+-----------+-----------+
| lawyer_id | day_of_week | slot_time | slot_date | client_id |
+-----------+-------------+-----------+-----------+-----------+
| 1         | 1           | 10:30     | 12/03/13  | 10        |
+-----------+-------------+-----------+-----------+-----------+ 
```

例如，通过上述预订并假设仍然是同一天（13 年 12 月 3 日）的 6:30，必须打印的可用空位为：

```
8:00 - default slot
8:30 - default slot
9:00 - default slot
16:00 - Specific slot inserted in point 2 for 12/03/13 
```

* * *

# 问题：

我必须返回下一个可用日期和相关的空闲时间（默认的、特定的减去锁定的和预订的）。我不能只说“从 2013 年 10 月 10 日星期一开始的返回时间”。

在搜索结果页面中，**我将列出所有律师以及每个**. 因此，这意味着每次进行搜索时，每位律师都会有不同的时间表。

我不能简单地说*“SELECT time FROM [bunch of joins] WHERE date = today”*。

我提出了这个查询，它忽略了锁定（状态 = -1）或预订（client_id 不为空）的插槽，但当然它不会返回最近一天的空闲时间以及可用时间（或从今天开始）：

```
SELECT p.day_of_week, p.slot_date, p.slot_time
FROM laywer_appointments p
WHERE p.client_id IS NULL AND p.status = 0
     AND p.slot_time NOT IN (
              SELECT s.slot_time FROM laywer_appointments s
              WHERE (s.slot_date IS NOT NULL AND s.client_id IS NOT NULL 
              OR s.status = -1) AND s.day_of_week = p.day_of_week
     )
GROUP BY p.day_of_week, p.slot_date, p.slot_time
ORDER BY p.day_of_week ASC, p.slot_time ASC; 
```

**另一个问题：**如果今天是 day_of_week = 5，但给定律师的下一个可用 day_of_week 是 2，我该如何查询？

如何返回下一个最接近且可用的 day_of_week 并聚合为从这一天开始的返回时间，而不是所有天？

# 一种可能的解决方案

我带来的一件事是创建 3 个表而不是一个：

*   default_slots：3 列：lawyer_id、day_of_week、time
*   插槽：laywer_id、day_of_week、时间、日期、状态
*   约会：有关预约的所有信息

**然后，我会将实际日期的每一天的所有空闲时间段存储在每个律师的时间段表中，最多一年。**（取自 default_slots 的时隙）。

```
+-----------+-------------+-----------+-----------+-----------+
| lawyer_id | day_of_week | slot_time | slot_date | status    |
+-----------+-------------+-----------+-----------+-----------+
| 1         | 1           | 16:00     | 12/03/13  | 0         |
| 1         | 1           | 16:00     | 12/03/13  | 0         |
| 1         | 2           | 08:00     | 13/03/13  | 0         |
| 1         | 2           | 09:00     | 13/03/13  | 0         |
... next week
| 1         | 1           | 16:00     | 19/03/13  | 0         |
| 1         | 1           | 16:00     | 19/03/13  | 0         |
| 1         | 2           | 08:00     | 20/03/13  | 0         |
| 1         | 2           | 09:00     | 20/03/13  | 0         |
... up to an year
| 1         | 1           | 16:00     | 20/03/14  | 0         |
| 1         | 1           | 16:00     | 20/03/14  | 0         |
| 1         | 2           | 08:00     | 21/03/14  | 0         |
| 1         | 2           | 09:00     | 21/03/14  | 0         |
+-----------+-------------+-----------+-----------+-----------+ 
```

我还将有一些每周运行的 cron 作业，在表槽中添加另一周的空闲槽记录，并删除过去的记录以减少表大小和未使用的数据。

律师还可以将时间直接锁定到插槽中，以及添加特定时间（第 2 点）。

**对于列表，这将是获得等于或大于今天的空闲时间的日期的插槽的问题，因为每个日期的每个时间都会有一行**。

对这个解决方案的影响： 1）第一天我们将有 2500 名律师（第二个月大约 6000 名）。假设 8 个可能的时段/每天 X 20 天工作/月 X 12 个月 =**每位律师 1920 条时段记录。**

**2500 层 x 1920 条记录 = 第一天的 480 万条记录。**（第二个月~12M）

这些记录将一直被更新、插入和删除。*slot 表有一些索引，所以我无法想象在一个有 12M+ 记录和一些索引的表上不断进行写操作。*每秒更新的索引对我来说并不明智。

**我真的无法提供合理且可扩展的解决方案。我的解决方案只有一张表可以工作，但我根本想不出查询的方式。并且非规范化的槽表将是巨大的，同时需要不断的写入操作。**

有小费吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-27T23:37:26.680

我做了与您尝试做的类似的事情，所以我了解它有多复杂:)

这是在 MSSQL 中完成的，因此您需要将其转换为 MySql。

![约会的例子](../Images/741e19b7b79c8471808474592a443b6d.png)

**这些是我们最终得到的表格：**

***时隙：***

我们将每个员工的默认时隙和修改后的时隙都存储在此表中（我们在此表中有一个名为“SlotType”的列。SlotType 1 = DEFAULT TIMESLOTS & SlotType 2 = MODIFIED TIMESLOTS）。如果您查看上图中的“2013 年 4 月 30 日星期二”，您会看到我们修改了当天的时间段，只显示该特定工作人员的上午 9 点预约。

***休息日：***

这是关闭日的列表 - 例如，一名工作人员在他的生日和圣诞节不工作。

***约会：***

这是已预订（或等待预订确认）的约会列表。

**获取可用约会的 SQL 查询：**

为了检查约会，我们在存储过程中使用了以下 SQL。它检查指定日期的一名工作人员的任命。我们使用的最终存储过程在一周中的每一天通过页面上的每个员工循环来获取所有约会。使用此查询来获取未来 7 天的 10 名员工约会 = 总共 70 次查询 & 大约需要 300 毫秒，每个表中有 100 万条记录。我们正在通过 ajax 加载约会，因此我们可以使用 300 毫秒，并且可能会更改它以通过 ajax 分别获取每个员工的约会（因此一次 7 个查询）以在未来进一步提高性能。

```
DECLARE @MyDate date, @MyDayName nvarchar(10);
IF @StartDate IS NULL
    SET @StartDate = GETDATE();
SET @MyDate = CAST(@StartDate AS date);
SET @MyDayName = DATENAME(dw, @MyDate );

--NOTES:
--@SlotType = 1 (DEFAULT TIMESLOTS), 2 (MODIFIED TIMESLOTS)

    --***CHECK TO SEE IF DOCTOR IS CLOSED TODAY***
    IF NOT EXISTS (SELECT [ClosedDays].[ID] FROM [ClosedDays] WHERE [ClosedDays].[StaffID] = @StaffID AND [ClosedDays].[BusinessID] = @BusinessID AND [ClosedDays].[Active] = 1 AND @MyDate BETWEEN [ClosedDays].[StartDate] AND [ClosedDays].[EndDate])
    BEGIN
        --***THE DOCTOR IS NOT CLOSED TODAY SO GET THE AVAILABLE TIMESLOTS***
        --***CHECK TO SEE IF DOCTOR IS HAS MODIED TIMESLOTS TODAY***
        IF NOT EXISTS (SELECT [TimeSlots].[ID], @MyDate AS SlotDate FROM [TimeSlots] WHERE  [TimeSlots].[StaffID] = @StaffID AND [TimeSlots].[BusinessID] = @BusinessID AND [TimeSlots].[Active] = 1 AND [TimeSlots].[SlotType] = 2 AND [TimeSlots].[SlotDay] = @MyDayName AND @MyDate BETWEEN [TimeSlots].[StartDate] AND [TimeSlots].[EndDate] AND [TimeSlots].[ID] NOT IN (SELECT [Appointments].[TimeSlotID] FROM [Appointments]) )
            BEGIN
                --***THE DOCTOR HAS NO MODIFIED TIMESLOTS FOR TODAY USE THE DEFAULT ONES***
                SELECT [TimeSlots].[ID] AS SlotID, [TimeSlots].[StaffID], [TimeSlots].[BusinessID], CONVERT(nvarchar(10), @MyDate, 103) AS SlotDate, [TimeSlots].[SlotDay], LTRIM(RIGHT(CONVERT(nvarchar(10), [TimeSlots].[SlotTime], 100), 7))AS SlotTime FROM [TimeSlots]  
                WHERE  [TimeSlots].[StaffID] = @StaffID AND [TimeSlots].[BusinessID] = @BusinessID AND [TimeSlots].[Active] = 1 AND [TimeSlots].[SlotType] = 1 AND [TimeSlots].[SlotDay] = @MyDayName AND @MyDate BETWEEN [TimeSlots].[StartDate] AND [TimeSlots].[EndDate] AND NOT EXISTS (SELECT [Appointments].[TimeSlotID] FROM [Appointments] WHERE [Appointments].[TimeSlotID] = [TimeSlots].[ID])
            END
            ELSE
            BEGIN
                --***THE DOCTOR HAS MODIFIED TODAYS TIMESLOTS SO USE THE MODIFIED TIMESLOTS***
                SELECT [TimeSlots].[ID] AS SlotID, [TimeSlots].[StaffID], [TimeSlots].[BusinessID], CONVERT(nvarchar(10), @MyDate, 103) AS SlotDate, [TimeSlots].[SlotDay], LTRIM(RIGHT(CONVERT(nvarchar(10), [TimeSlots].[SlotTime], 100), 7))AS SlotTime FROM [TimeSlots]  
                WHERE  [TimeSlots].[StaffID] = @StaffID AND [TimeSlots].[BusinessID] = @BusinessID AND [TimeSlots].[Active] = 1 AND [TimeSlots].[SlotType] = 2 AND [TimeSlots].[SlotDay] = @MyDayName AND @MyDate BETWEEN [TimeSlots].[StartDate] AND [TimeSlots].[EndDate] AND NOT EXISTS (SELECT [Appointments].[TimeSlotID] FROM [Appointments] WHERE [Appointments].[TimeSlotID] = [TimeSlots].[ID])
            END
    END
    ELSE
    BEGIN
            --***NO APPOINTMENTS WERE FOUND***
            --***DUMMY QUERY TO RETURN NO RECORDS***
            SELECT [TimeSlots].[ID] AS SlotID, [TimeSlots].[StaffID], [TimeSlots].[BusinessID], CONVERT(nvarchar(10), @MyDate, 103) AS SlotDate, [TimeSlots].[SlotDay], LTRIM(RIGHT(CONVERT(nvarchar(10), [TimeSlots].[SlotTime], 100), 7))AS SlotTime FROM [TimeSlots]  
            WHERE  [TimeSlots].[ID] = -0
    END 
```

希望这是有道理的，如果其他人对如何优化它有一些想法，请告诉我！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T01:27:05.777

你是对的，你会有一张大桌子。但尚不清楚您的应用程序是否会因此而失败。MySQL（和所有 DBMS 软件）旨在允许快速访问大型表。

良好的专用 MySQL 服务器硬件（具有 64 位操作系统、两个或四个快速处理器、大量 RAM 和出色的文件 I/O——SAS 接口快速磁盘）和正确配置的服务器软件将处理此工作负载。

您可能希望将 slot_time 和 slot_date 合并到单个 DATETIME 或 TIMESTAMP 字段中，可以对其进行索引以便于搜索。如果您选择使用 TIMESTAMP 数据项，如果您做对了，您将获得一些不错的时区处理优势。

您可能想弄清楚如何使用一种方案对大表进行分区，该方案允许您在该月或一周过去后离线获取一个月甚至一周的数据。

有 2,500 名律师在使用您的系统，您会想把这件事做好。为什么不花点钱找一个像样的数据库管理员呢？他们每小时的费用低于大多数律师。Sheeri Cabral 写了一篇关于如何找到的很好的总结。[http://www.sheeri.org/how-to-find-a-dba/](http://www.sheeri.org/how-to-find-a-dba/)

# iphone - 这是使用其中一个 UIGestureRecognizer 处理手势的安全方法吗？

> ID：15627414
> 
> 赞同：1
> 
> 时间：2013-03-26T00:42:29.060
> 
> 标签：iphone, ios, cocoa-touch, uigesturerecognizer

想知道以下是否可以处理 UIGestureRecognizer 触摸：

```
 if (pinchGestureRecognizer.state == UIGestureRecognizerStateBegan || pinchGestureRecognizer.state == UIGestureRecognizerStateChanged)
        {
            //process touches
        }
        else if (pinchGestureRecognizer.state == UIGestureRecognizerStateEnded)
        {
            //do whatever after gesture recognizer finishes
        } 
```

基本上，我想知道是否`UIGestureRecognizerStateEnded`应该发生`UIGestureRecognizer`静止过程触摸，或者此时所有触摸都完成了？我得到了奇怪的值，`translationInView`所以只想在这里问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:28:11.997

您问：

> 基本上，我想知道是否`UIGestureRecognizerStateEnded`应该发生`UIGestureRecognizer`静止过程触摸，或者此时所有触摸都完成了？

当你得到`UIGestureRecognizerStateEnded`时，是的，手势就完成了。但显然，除非您在该点从视图中移除手势识别器，否则如果用户开始一个新手势，则手势识别过程会从`UIGestureRecognizerStateBegan`.

此外，你说：

> 我得到了奇怪的值，`translationInView`所以只想在这里问。

您的代码示例表明您正在处理捏合手势，但这并不适用`translationInView`，所以我不确定您得到了什么“奇怪的值”。您可以通过设置手势`delegate`并实现两个同时手势`shouldRecognizeSimultaneouslyWithGestureRecognizer`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIPinchGestureRecognizer *pinch = [[UIPinchGestureRecognizer alloc] initWithTarget:self
                                                                                action:@selector(handlePinch:)];
    pinch.delegate = self;
    [self.view addGestureRecognizer:pinch];

    UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self
                                                                          action:@selector(handlePan:)];
    pan.delegate = self;
    [self.view addGestureRecognizer:pan];
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    if ([gestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]] && [otherGestureRecognizer isKindOfClass:[UIPinchGestureRecognizer class]])
        return YES;
    if ([gestureRecognizer isKindOfClass:[UIPinchGestureRecognizer class]] && [otherGestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]])
        return YES;
    return NO;
}

- (void)handlePinch:(UIPinchGestureRecognizer *)gesture
{
    CGFloat scale = [gesture scale];
    NSLog(@"%s: %@: scale=%.2f", __FUNCTION__, [self stringFromGestureState:gesture.state], scale);
}

- (void)handlePan:(UIPanGestureRecognizer *)gesture
{
    CGPoint translation = [gesture translationInView:gesture.view];
    NSLog(@"%s: %@: translation=%@", __FUNCTION__, [self stringFromGestureState:gesture.state], NSStringFromCGPoint(translation));
} 
```

上面的代码有效，其中`handlePan`返回 pan，`handlePinch`返回 pinch，并且`translationInView`of`handlePan`看起来没有异常。也许你可以向我们展示你是如何使用捏合手势和获取`translationInView`的，并告诉我们你得到的值有什么奇怪的地方。

# javascript - 如何从 javascript 中的字符串中删除特定元素或检查它是否存在

> ID：15627416
> 
> 赞同：-3
> 
> 时间：2013-03-26T00:42:38.730
> 
> 标签：javascript

我有一个快速的问题

我有字符串`var str="0-12345";`

如果 Javascript 中有一个破折号，我如何才能真正从字符串中删除破折号。如何检查字符串是否有破折号，如果有，则从中删除破折号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:47:36.077

> **你在这里问之前忘了做功课，无论如何**

```
var str="0-12345";
var is_dashed=(str.indexOf("-") !== -1);
str= str.replace('-',''); //many more ideas , it seems simple to remove all '-' 
```

# ios - 关闭视图控制器时发生奇怪的崩溃，自动布局是罪魁祸首？

> ID：15627419
> 
> 赞同：8
> 
> 时间：2013-03-26T00:43:08.897
> 
> 标签：ios, autolayout

我遇到了一个非常奇怪的崩溃，这是回溯。

```
* thread #1: tid = 0x2403, 0x3379516c CoreFoundation`CFHash + 8, stop reason = EXC_BREAKPOINT (code=EXC_ARM_BREAKPOINT, subcode=0xdefe)
    frame #0: 0x3379516c CoreFoundation`CFHash + 8
    frame #1: 0x33797a9c CoreFoundation`CFBasicHashRemoveValue + 1408
    frame #2: 0x337974ee CoreFoundation`CFDictionaryRemoveValue + 166
    frame #3: 0x3420988e Foundation`-[NSISEngine removeConstraintWithMarker:] + 562
    frame #4: 0x34211dbe Foundation`-[NSLayoutConstraint _removeFromEngine:] + 230
    frame #5: 0x35a954ec UIKit`-[UIView(UIConstraintBasedLayout) _layoutEngine_willRemoveLayoutConstraint:] + 44
    frame #6: 0x358488fc UIKit`__48-[UIScrollView _setAutomaticContentConstraints:]_block_invoke_0 + 148
    frame #7: 0x34208882 Foundation`-[NSISEngine withAutomaticOptimizationDisabled:] + 166
    frame #8: 0x35848838 UIKit`-[UIScrollView _setAutomaticContentConstraints:] + 116
    frame #9: 0x35848e6c UIKit`-[UIScrollView _rememberDependentConstraint:] + 112
    frame #10: 0x35a9e3ae UIKit`___updateViewDependenciesForConstraint_block_invoke_0 + 30
    frame #11: 0x35a954ba UIKit`_updateViewDependenciesForConstraint + 202
    frame #12: 0x35a953da UIKit`-[UIView(UIConstraintBasedLayout) _layoutEngine_didAddLayoutConstraint:roundingAdjustment:mutuallyExclusiveConstraints:] + 154
    frame #13: 0x35a95534 UIKit`-[UIView(UIConstraintBasedLayout) _tryToAddConstraintWithoutUpdatingConstraintsArray:roundingAdjustment:mutuallyExclusiveConstraints:] + 36
    frame #14: 0x3567c2e0 UIKit`-[UIView(Internal) _didMoveFromWindow:toWindow:] + 376
    frame #15: 0x356d34fe UIKit`-[UIScrollView _didMoveFromWindow:toWindow:] + 50
    frame #16: 0x3567c5c6 UIKit`-[UIView(Internal) _didMoveFromWindow:toWindow:] + 1118
    frame #17: 0x35676e52 UIKit`-[UIView(Hierarchy) _postMovedFromSuperview:] + 138
    frame #18: 0x3565e7dc UIKit`-[UIView(Internal) _addSubview:positioned:relativeTo:] + 1300
    frame #19: 0x3565e2c2 UIKit`-[UIView(Hierarchy) addSubview:] + 30
    frame #20: 0x356f68e8 UIKit`-[UITransitionView transition:fromView:toView:removeFromView:] + 972
    frame #21: 0x35937618 UIKit`__91-[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:]_block_invoke_0238 + 388
    frame #22: 0x357499b8 UIKit`-[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] + 4824
    frame #23: 0x357b9814 UIKit`-[UIViewController _dismissViewControllerWithTransition:from:completion:] + 1708
    frame #24: 0x357057c4 UIKit`-[UIViewController dismissViewControllerWithTransition:completion:] + 912
    frame #25: 0x000ccd40 Capture`-[INFTagSearchViewController cancelButtonTouched:](self=0x1f09ed50, _cmd=0x001b9d5f, sender=0x1e0265c0) + 76 at INFTagSearchViewController.m:48
    frame #26: 0x357470c4 UIKit`-[UIApplication sendAction:to:from:forEvent:] + 72
    frame #27: 0x35747076 UIKit`-[UIApplication sendAction:toTarget:fromSender:forEvent:] + 30
    frame #28: 0x35747054 UIKit`-[UIControl sendAction:to:forEvent:] + 44
    frame #29: 0x3574690a UIKit`-[UIControl(Internal) _sendActionsForEvents:withEvent:] + 502
    frame #30: 0x35746e00 UIKit`-[UIControl touchesEnded:withEvent:] + 488
    frame #31: 0x3566f5f0 UIKit`-[UIWindow _sendTouchesForEvent:] + 524
    frame #32: 0x3565c800 UIKit`-[UIApplication sendEvent:] + 380
    frame #33: 0x3565c11a UIKit`_UIApplicationHandleEvent + 6154
    frame #34: 0x373655a2 GraphicsServices`_PurpleEventCallback + 590
    frame #35: 0x373651d2 GraphicsServices`PurpleEventCallback + 34
    frame #36: 0x33829172 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 34
    frame #37: 0x33829116 CoreFoundation`__CFRunLoopDoSource1 + 138
    frame #38: 0x33827f98 CoreFoundation`__CFRunLoopRun + 1384
    frame #39: 0x3379aebc CoreFoundation`CFRunLoopRunSpecific + 356
    frame #40: 0x3379ad48 CoreFoundation`CFRunLoopRunInMode + 104
    frame #41: 0x373642ea GraphicsServices`GSEventRunModal + 74
    frame #42: 0x356b0300 UIKit`UIApplicationMain + 1120
    frame #43: 0x000a297c Capture`main(argc=1, argv=0x2fd60cfc) + 116 at main.m:16
    frame #44: 0x3bb2bb20 libdyld.dylib`start + 4 
```

您会注意到第 25 帧是我的代码进行的唯一调用`cancelButtonTouched`，看起来就是这样。

```
- (IBAction)cancelButtonTouched:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

我不知道发生了什么，我以前从未遇到过这样的问题，根据系统调用，它似乎是一个自动布局问题。我验证了在崩溃发生之前在呈现视图控制器上调用了 viewWillApper，所以我假设它是在呈现视图布局期间发出的。

关于如何将此问题缩小到特定布局约束的任何想法？还是有其他想法？

这可以在某些设备上重现，而在其他设备上则很少发生。所以是断断续续的。

**更新**

断点截图。

![在此处输入图像描述](../Images/70baa05df984495ca04504cf5bda4549.png)

**更新 2**

所以这绝对是一个问题，解散到`presentingViewController`，解散两个深度（`[self.presentingViewController.presentingViewController dismissViewControllerAnimated:YES completion:nil]`）工作正常，但显然不是预期的结果，我只想回到 1 级。这进一步使我相信存在“重新布局”视图的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-17T18:46:04.373

我似乎记得这样的事情，虽然不确定是不是完全一样的事情。在我的情况下，这是由于调用 addSubview: (或 insertSubview:...) 的视图已经是一个子视图。虽然通常我认为 UIView 可以解决这个问题，但使用自动布局似乎可以将一些相关信息添加到其他地方两次，并且在尝试清除该相关信息时可能会发生崩溃。就我而言，解决方案是确保我只添加了一次子视图，然后这个崩溃（或者我的类似崩溃）就消失了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-06T17:02:38.890

基于 Carl Lindberg 的想法，我准备并使用了以下 iOS 类别，并且不再崩溃：

UIView+AddSubviewWithRemovingFromParent.h

```
#import <UIKit/UIKit.h>

@interface UIView (AddSubviewWithRemovingFromParent)

- (void)addSubviewWithRemovingFromParent:(UIView *)view;

@end 
```

UIView+AddSubviewWithRemovingFromParent.m

```
#import "UIView+AddSubviewWithRemovingFromParent.h"

@implementation UIView (AddSubviewWithRemovingFromParent)

- (void)addSubviewWithRemovingFromParent:(UIView *)view {
    if (view.superview != nil) {
        [view removeFromSuperview];
    }
    [self addSubview:view];
}

@end 
```

现在您可以使用 addSubviewWithRemovingFromParent 方法添加 subView 而不是 addSubview 方法，如下所示：

```
UITableViewCell *cell = [[UITableViewCell alloc] init];
[cell.contentView addSubviewWithRemovingFromParent:<viewToAdd>]; 
```

把它们加起来：

1.  在应用程序崩溃的控制器中找到 addSubView 的所有引用
2.  导入类别 UIView+AddSubviewWithRemovingFromParent.h
3.  使用方法 addSubviewWithRemovingFromParent 而不是 addSubView

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-07T20:56:37.853

在我的情况下，当我在情节提要中有一个视图控制器但从具有与文件所有者相同的视图控制器的 NIB 加载视图内容时，发生了这种崩溃。这通常工作正常，但我`view`在故事板和 NIB 中都设置了插座，这触发了 iOS6“添加子视图两次”错误。通过清除NIB中的视图出口，一切都得到了修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-30T10:13:19.337

我有/有同样的问题。
当我以模态方式呈现两个视图控制器并希望返回到第一个时，我也会遇到同样的问题。**为第一个呈现的视图**禁用自动布局只能解决我的问题。
就您而言`self.presentingviewcontroller`
，不幸的是，我无法进一步缩小范围。

# php - 搜索 Web Git 客户端

> ID：15627421
> 
> 赞同：0
> 
> 时间：2013-03-26T00:43:39.990
> 
> 标签：php, git, web, client

我正在寻找一个用 PHP 编写的 Web Git 客户端，我可以将它安装在我的服务器上以管理我的存储库。类似于 MySQL 的 phpMyAdmin。我发现[www.gitphp.org](http://www.gitphp.org/)有很多选项，但界面非常简陋。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:50:34.107

你研究了什么？

你读过任何 git 文档吗？

[简单的基于 Web 的可视化工具](http://git-scm.com/book/en/Git-on-the-Server-GitWeb "简单的基于 Web 的可视化工具")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:08:11.307

从评论：

如果`PhP`不是严格要求，我建议[`gitlab`](http://gitlab.org/)。

[这个问题](https://stackoverflow.com/questions/438163/whats-the-best-web-interface-for-git-repositories)涵盖了许多其他`git`Web 客户端。

# javascript - JQuery .hide...不隐藏

> ID：15627427
> 
> 赞同：0
> 
> 时间：2013-03-26T00:44:12.100
> 
> 标签：javascript, jquery

这可能是一个简单的，但我似乎无法让它工作。

我有以下代码：

```
<ul>
    <li class='jSH'>Users: <span>0</span></li>
    <li class='jSH'>Cars: <span>1</span></li>
</ul> 
```

本质上，我正在尝试编写一个函数，如果 span == 0 的内容隐藏 li。这是 jquery 代码，但由于某种原因它不起作用：

```
if ($('.jSH span').text() == "0")
    $(this).closest('li').hide();
    alert("should hide"); 
```

因此，在这种情况下，我会收到第一个 li 的警报（因为 span == 0 的内容），但 li 并没有隐藏。

在这种情况下使用“this”有问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:47:54.640

您会想要使用`.each`，因为您当前的代码返回多个对象及其内容 -`.each`将它们分成一个类似循环的过程，其中每个单独的元素都将被处理。小提琴： http: [//jsfiddle.net/fEEFq/](http://jsfiddle.net/fEEFq/)
Javascript 代码：

```
 $('.jSH span').each(function(){
        if ($(this).text() == "0"){
            $(this).closest('li').hide();
            alert("should hide"); 
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T00:47:43.200

您的问题出在`$(this)`- 在 jQuery 的上下文中，这仅在事件回调（例如鼠标悬停或单击）中有效。您应该将该行修复为：

```
$('.jSH span').closest('li').hide(); 
```

此外，您没有`{}`if 语句的主体。这将导致仅执行 if 之后的第一条语句。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T01:02:36.063

您可以使用 $.filter

```
$('.jSH').filter(function() {
  return $('span',this).text() == "0";
}).hide(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T00:48:38.677

您指`this`的是条件语句，它不会返回您想要的结果。

反而：

```
$('.jSH span').each(function(){
    if ($(this).text() == "0"){  // now `this` is referring to every span in the jQuery collection
        $(this).closest('li').hide();
    }
}); 
```

[http://api.jquery.com/each/](http://api.jquery.com/each/)

# c# - 每组过滤后选择前N条记录

> ID：15627429
> 
> 赞同：1
> 
> 时间：2013-03-26T00:44:12.810
> 
> 标签：c#, linq

我是 .NET 中的老蜜蜂，但对 Linq 很陌生！经过一些基本阅读后，我决定检查我的技能，但我完全失败了！我不知道我在哪里犯错。

我想为每个人选择最高的 2 个订单，而 Amount % 100 == 0。

这是我的代码。

```
var crecords = new[] {
               new { 
                    Name = "XYZ", 
                    Orders = new[] 
                    { 
                        new { OrderId = 1, Amount = 340 }, 
                        new { OrderId = 2, Amount = 100 }, 
                        new { OrderId = 3, Amount = 200 } 
                    } 
               },
               new { 
                    Name = "ABC", 
                    Orders = new[] 
                    { 
                        new { OrderId = 11, Amount = 900 }, 
                        new { OrderId = 12, Amount = 800 }, 
                        new { OrderId = 13, Amount = 700 } 
                    } 
                }
            };

        var result = crecords
                            .OrderBy(record => record.Name)
                            .ForEach
                                (
                                    person => person.Orders
                                    .Where(order => order.Amount % 100 == 0)
                                    .OrderByDescending(t => t.Amount)
                                    .Take(2)
                                );

        foreach (var record in result)
        {
            Console.WriteLine(record.Name);
            foreach (var order in record.Orders)
            {
                Console.WriteLine("-->" + order.Amount.ToString());
            }
        } 
```

谁能集中注意力告诉我什么是正确的查询？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T01:04:53.677

试试这个查询：

```
var result = crecords.Select(person => 
             new
                {
                    Name = person.Name, 
                    Orders = person.Orders.Where(order => order.Amount%100 == 0)
                                          .OrderByDescending(x => x.Amount)
                                          .Take(2)
                }); 
```

使用你的 foreach 循环打印生成的 IEnumerable，它的输出是：

```
XYZ
-->200
-->100
ABC
-->900
-->800 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:25:20.157

这已经得到解答，但如果您不想创建新对象并简单地修改现有的`crecords`，则代码将看起来像这样。但是您将无法使用示例中所示的匿名结构。这意味着您必须创建人员和订单类

```
 private class People
 {
      public string Name;
      public IEnumerable<Order> Orders;
 }

 private class Order
 {
      public int OrderId;
      public int Amount;
 }

 public void PrintPeople()
 {
      IEnumerable<People> crecords = new[] {
           new People{ 
                Name = "XYZ", 
                Orders = new Order[] 
                { 
                    new Order{ OrderId = 1, Amount = 340 }, 
                    new Order{ OrderId = 2, Amount = 100 }, 
                    new Order{ OrderId = 3, Amount = 200 } 
                } 
           },
           new People{ 
                Name = "ABC", 
                Orders = new Order[] 
                { 
                    new Order{ OrderId = 11, Amount = 900 }, 
                    new Order{ OrderId = 12, Amount = 800 }, 
                    new Order{ OrderId = 13, Amount = 700 } 
                } 
            }
        };
        crecords = crecords.OrderBy(record => record.Name);
        crecords.ToList().ForEach(
                person =>
                {
                    person.Orders = person.Orders
                          .Where(order => order.Amount%100 == 0)
                          .OrderByDescending(t => t.Amount)
                          .Take(2);
                }
            );

        foreach (People record in crecords)
        {
            Console.WriteLine(record.Name);
            foreach (var order in record.Orders)
            {
                Console.WriteLine("-->" + order.Amount.ToString());
            }
        }
    } 
```

# ruby - 如何在 Ruby 中使用 RegEx 更改字符串中字母的大小写

> ID：15627434
> 
> 赞同：15
> 
> 时间：2013-03-26T00:44:31.063
> 
> 标签：ruby, regex

假设我有一个字符串：“hEY”

我想把它转换成“嘿”

```
string.gsub!(/([a-z])([A-Z]+ )/, '\1'.upcase) 
```

这就是我的想法，但是当我在 gsub 方法中使用 upcase 方法时，它似乎什么也没做。这是为什么？

编辑：我想出了这个方法：

```
string.gsub!(/([a-z])([A-Z]+ )/) { |str| str.downcase!.capitalize! } 
```

有没有办法在正则表达式中做到这一点？我真的不明白 '\1' '\2' 的事情。那是反向引用吗？这是如何运作的

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T02:25:24.027

@sawa 有一个简单的答案，你已经用另一种机制编辑了你的问题。但是，要回答您的两个问题：

> *有没有办法在正则表达式中做到这一点？*

不，Ruby 的正则表达式不像[其他一些正则表达式风格那样](https://stackoverflow.com/questions/1159343/convert-a-char-to-upper-case-using-regular-expressions-editpad-pro)支持大小写更改功能。您可以通过查看 1.9 和 2.0 的官方 Ruby 正则表达式文档并搜索“case”一词来“证明”这一点：

*   [https://github.com/ruby/ruby/blob/ruby_1_9_3/doc/re.rdoc](https://github.com/ruby/ruby/blob/ruby_1_9_3/doc/re.rdoc)
*   [https://github.com/ruby/ruby/blob/ruby_2_0_0/doc/re.rdoc](https://github.com/ruby/ruby/blob/ruby_2_0_0/doc/re.rdoc)

> *我真的不明白 '\1' '\2' 的事情。那是反向引用吗？这是如何运作的？*

您的使用`\1`是一种反向引用。当您`\1`在搜索模式中使用等时，可能会出现反向引用。例如，正则表达式`/f(.)\1/`将查找字母`f`，后跟任意字符，再跟同一个字符（例如“foo”或“f!!”）。

在这种情况下，在传递给类似方法的替换字符串中`String#gsub`，反向引用确实引用了先前的捕获。从文档：

> “如果替换是字符串，它将替换匹配的文本。它可能包含对格式的模式捕获组的反向引用`\d`，其中`d`是组号，或者`\k<n>`，其中`n`是组名。如果它是双-带引号的字符串，两个反向引用之前必须有一个额外的反斜杠。”

在实践中，这意味着：

```
"hello world".gsub( /([aeiou])/, '_\1_' )  #=> "h_e_ll_o_ w_o_rld"
"hello world".gsub( /([aeiou])/, "_\1_" )  #=> "h_\u0001_ll_\u0001_ w_\u0001_rld"
"hello world".gsub( /([aeiou])/, "_\\1_" ) #=> "h_e_ll_o_ w_o_rld" 
```

现在，您必须了解代码何时运行。在您的原始代码中……</p>

```
string.gsub!(/([a-z])([A-Z]+ )/, '\1'.upcase) 
```

…你正在做的是调用`upcase`字符串`'\1'`（没有效果）*然后*调用`gsub!`方法，传入一个正则表达式和一个字符串作为参数。

最后，实现相同目标的另一种方法是使用块形式，如下所示：

```
# Take your pick of which you prefer:
string.gsub!(/([a-z])([A-Z]+ )/){ $1.upcase << $2.downcase }
string.gsub!(/([a-z])([A-Z]+ )/){ [$1.upcase,$2.downcase].join }
string.gsub!(/([a-z])([A-Z]+ )/){ "#{$1.upcase}#{$2.downcase}" } 
```

在 gsub 的块形式中，捕获的模式被设置为全局变量`$1`,`$2`等，您可以使用它们来构造替换字符串。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-26T00:48:08.453

我不知道您为什么要尝试以复杂的方式进行操作，但是通常的方法是：

```
"hEY".capitalize # => "Hey" 
```

如果您坚持使用正则表达式 and `upcase`，那么您还需要`downcase`：

```
"hEY".downcase.sub(/\w/){$&.upcase} # => "Hey" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-26T08:04:54.253

如果您真的只想交换字符串中每个字母的大小写，则可以完全避免正则表达式的复杂性，因为 There's A Method For That™。

```
"hEY".swapcase # => "Hey"
"HellO thERe".swapcase # => "hELLo THerE" 
```

也有`swapcase!`破坏性的做法。

# android - 在eclipse崩溃中导出android应用程序？

> ID：15627435
> 
> 赞同：1
> 
> 时间：2013-03-26T00:44:32.143
> 
> 标签：android

我的应用程序已经在 playstore 上，我开发了具有相同包名的新项目，当我尝试使用相同的密钥库文件导出它时，Eclipse CRASH .. 但是如果我使用新的密钥库导出，它工作正常......我需要用旧的密钥库导出它，这样我就可以在 Play 商店中更新它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:35:27.387

您可能想尝试使用命令行工具来构建用于发布的 apk。使用“蚂蚁释放”。见谷歌[指南](http://developer.android.com/tools/building/building-cmdline.html)

# ruby-on-rails - 如何修改 Refinery CMS 菜单部分中的标记

> ID：15627437
> 
> 赞同：0
> 
> 时间：2013-03-26T00:44:41.203
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refinerycms

我已经对 _header、_menu 和 _menu_branch.html.erb 文件进行了 rake 覆盖。我想做的是修改菜单的标记，以便在标题旁边显示一个图标。

我认为我想要的文件是 menu.html.erb，如下：

```
 <ul>
    <%= render :partial => '/refinery/menu_branch', :collection => roots,
           :locals => {
             :hide_children => hide_children,
             :sibling_count => (roots.length - 1),
             :menu_levels => local_assigns[:menu_levels],
             :apply_css => true #if you don't care about class='first' class='last' or class='selected' set apply_css to false for speed.
   } -%>
 </ul> 
```

我没有得到的是似乎无处添加允许我指定图标的跨度元素或锚标记。我在哪里可以找到该代码？我知道我的问题可能暴露了 Refinery 构建其页面的方式根本缺乏理解 - 您可以指出我在介绍文档之外的任何资源将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:07:03.687

```
render :partial => '/refinery/menu_branch', 
```

调用另一个部分，其中指定了列表项

# javascript - 如何检查多维数组是否具有特定数组？

> ID：15627440
> 
> 赞同：3
> 
> 时间：2013-03-26T00:45:13.500
> 
> 标签：javascript, arrays

如何检查是否`arrays`有`array`？

```
var arrays = [[1, 1], [2, 2]];
var array = [1,1];

[1, 1] === [1, 1]; // false
arrays.includes(array); // false
arrays.indexOf(array); // -1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T00:54:08.790

indexOf 使用严格相等 ( `===`) 进行比较。您的元素必须是完全相同的对象。

所以

```
var a = [1,1];

var b = [a,[1,2]];

b.indexOf(a)// 0 
```

因为`a === a`

但

```
b.indexOf([1,1])// -1 
```

因为 [1,1] 是一个不同的对象，`a`所以它们并不严格相等。

[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

为了做你想做的事，你需要做更多的事情。您可以遍历这些值并使用类似于[此问题答案中的内容](https://stackoverflow.com/questions/1068834/object-comparison-in-javascript)来进行比较

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:47:36.463

[`indexOf`如果在数组中找不到匹配项，则返回 -1](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)。您的数组`a`不包含 element `b`。

编辑：

为了澄清@JonathanLonowski 所说的内容，没有匹配的原因是因为您正在进行严格的比较，比较引用而不是值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-23T16:24:20.303

[`<Array>.some`](https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Array/some)方法测试多维数组中的至少一个数组是否通过了提供的函数实现的测试。

[`<Array>.every`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every)方法测试数组中的所有数组项是否通过提供的函数实现的测试。

这两种方法结合起来可以检查多维数组中的所有项目是否值得寻找。

```
const checkArray = (arrays, array) => arrays.some(a => {
  return (a.length > array.length ? a : array).every((_, i) => a[i] === array[i]);
});

const arrays = [[0, 1], [2, 2], [0, 3, 2, 1]];

[
  [0, 1],          // true
  [2, 2],          // true
  [0, 3, 2, 1],    // true
  [1, 0, 3, 2, 1], // false
  [2, 2, 1],       // false
  [0, 0],          // false
  [1, 2],          // false
  [0, 1, 2]        // false
].forEach(array => {
  console.log(checkArray(arrays, array));
});
```

# javascript - 使用 JQuery 生成 HTML，然后使用 .html() 对其进行更改。在 FF 中可以，但在 Chrome 中不行？

> ID：15627441
> 
> 赞同：1
> 
> 时间：2013-03-26T00:45:13.777
> 
> 标签：javascript, jquery, dom, jquery-selectors

我正在使用 JQuery 循环插件。

该插件会生成一个带有编号链接的图像滑块，以在图像之间进行交换。我想将编号链接更改为我自己的一些 HTML（例如：将“1”更改为“我的字符串”），所以我创建了：

```
$('#nav a').html(function(i, html) {
    return $.trim(html) == '1' ? '<h2>Lorem</h2>' : html;
    return $.trim(html) == '2' ? '<h2>Dolar Sit</h2>' : html;
    return $.trim(html) == '3' ? '<h2>Amet</h2>' : html;
    return $.trim(html) == '4' ? '<h2>Ipsum</h2>' : html;

}); 
```

这在 Fire Fox 中运行良好，但在 Chrome 中运行良好。我相信这是因为编号的链接不是原始 DOM 的一部分，因此 Chrome 很难返回查找和更改它。

有谁知道如何正确地做到这一点？

编辑：

我在 chrome 中看到的是：

> 1 2 3 4 5

我在 Fire Fox 中看到的（以及我想要实现的）是：

> Lorem Dolar Sit Amet Ipsum

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:26:47.280

在第一个之后，您的倍数`returns`无法访问`return`。这导致JS错误。

实现期望的便捷方法可能是：

`**[LIVE DEMO](http://jsbin.com/amicuf/1/edit)**`

```
$(function(){ // DOM READY

    var definedText = {
        1 : "<h2>Lorem</h2>",
        2 : "<h2>Dolar Sit</h2>",
        3 : "<h2>Amet</h2>",
        4 : "<h2>Ipsum</h2>"
    };

    $('#nav a').html(function(i, html) {

      var trHTML = $.trim(html);
      return definedText[trHTML] || html;

    });

}); 
```

definedText 只是一个用于比较修剪后的 HTML 的对象。
如果未找到匹配项，则只会返回已经存在的 HTML。

# java - 使用 Spring “forward:” 前缀导致 StackOverflowError

> ID：15627444
> 
> 赞同：1
> 
> 时间：2013-03-26T00:45:31.293
> 
> 标签：java, spring, jsp, spring-mvc

我正在尝试使用 Spring 的“转发：”前缀将从一个控制器收到的请求转发到第二个控制器。但是，不是像我期望的那样将请求转发到第二个控制器，而是由第一个控制器一遍又一遍地处理请求（直到我收到 StackOverflowError）。这让我认为它可能会将“/app/pong”视为某种相对路径，但我不确定为什么会这样。我是否误解了“前进：”应该如何工作？有什么我在这里想念的吗？

控制器：

```
@Controller
public class ControllerOne {
  @RequestMapping(value = "/ping", method = RequestMethod.GET)
  public String doPing(HttpServletRequest request) {
    log.debug("Ping?");
    return "forward:/app/pong";
  }
}

@Controller
public class ControllerTwo {
  @RequestMapping(value = "/pong", method = RequestMethod.GET)
  public String doPong(HttpServletRequest request) {
    log.debug("Pong!");
    return "pong";
  }
} 
```

servlet 映射：

```
<servlet-mapping>
  <servlet-name>test-servlet</servlet-name>
  <url-pattern>/app/*</url-pattern>
</servlet-mapping> 
```

查看解析器：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
  <property name="prefix" value="/WEB-INF/jsp/" />
  <property name="suffix" value=".jsp" />
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:44:14.740

我认为问题`InternalResourceViewResolver`在于您配置的问题。因为这个viewResolver的内部逻辑，它会自动转发，你可以配置另外一种viewResolver：UrlBasedViewResolver。
以下是我在官方文档中找到的信息：

> 也可以为最终由 UrlBasedViewResolver 和子类解析的视图名称使用特殊的 forward: 前缀。这将围绕视图名称的其余部分创建一个**InternalResourceView**（最终执行 RequestDispatcher.forward()），这被认为是一个 URL。**因此，此前缀对InternalResourceViewResolver**和 InternalResourceView没有用 （例如，对于 JSP）。但是，当您主要使用另一种视图技术，但仍希望强制转发资源以由 Servlet/JSP 引擎处理时，前缀可能会有所帮助。（请注意，您也可以链接多个视图解析器。）

# java - WeakReference 和 ReferenceQueue 性能很重要

> ID：15627445
> 
> 赞同：0
> 
> 时间：2013-03-26T00:45:47.287
> 
> 标签：java, weak-references

我使用 RefQueue 来跟踪哪些 WeakRef 不再指向对象。但我想知道它是如何工作的。当我告诉 WeakReference 在特定队列中注册它自己，然后过了一段时间我这样做：

```
private void removeDumpReferences() {
    Reference<? extends E> ref = null;

    while ((ref = garbageQueue.poll()) != null) {
        list.remove(ref);
    }
} 
```

它是否贯穿所有已注册的引用（测试 ref 是否指向 null），或者实际上有太多队列用于注册的，而第二个用于 GC 认为“未使用”的那些？或者也许它的工作方式非常不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:31:49.500

只有在被引用的对象被 GC'd 之后，引用才会在引用队列中排队。

# linux - 查找和基本名称不能很好地播放

> ID：15627446
> 
> 赞同：52
> 
> 时间：2013-03-26T00:45:52.283
> 
> 标签：linux, find

我想在 linux 命令行上回显 find 的文件名部分。我尝试使用以下内容：

```
find www/*.html -type f -exec sh -c "echo $(basename {})" \; 
```

和

```
find www/*.html -type f -exec sh -c "echo `basename {}`" \; 
```

以及一大堆其他组合的转义和引用文本的各个部分。结果是路径没有被剥离：

```
www/channel.html
www/definition.html
www/empty.html
www/index.html
www/privacypolicy.html 
```

为什么不？

更新：虽然我在下面有一个可行的解决方案，但我仍然对为什么“basename”没有做它应该做的事情感兴趣。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-26T01:14:39.037

您最初尝试的问题：

```
find www/*.html -type f -exec sh -c "echo $(basename {})" \; 
```

是`$(basename {})`代码在执行命令之前执行一次`find`。单曲的输出`basename`是`{}`因为这是`{}`作为文件名的基本名称。因此，find 执行的命令是：

```
sh -c "echo {}" 
```

对于找到的每个文件，但`find`实际上每次都替换原始（未修改的）文件名，因为`{}`字符出现在要执行的字符串中。

如果你想让它工作，你可以使用单引号而不是双引号：

```
find www/*.html -type f -exec sh -c 'echo $(basename {})' \; 
```

但是，将本来会写入标准输出的`echo`内容重复到标准输出`basename`有点毫无意义：

```
find www/*.html -type f -exec sh -c 'basename {}' \; 
```

当然，我们还可以进一步减少：

```
find www/*.html -type f -exec basename {} \; 
```

* * *

> 您能否在这里解释一下单引号和双引号之间的区别？

这是常规的 shell 行为。让我们使用一个稍微不同的命令（但只是略有不同——文件的名称可以在`www`目录下的任何位置，而不仅仅是向下一层），并查看单引号 (SQ) 和双引号 (DQ) 版本的命令：

```
find www -name '*.html' -type f -exec sh -c "echo $(basename {})" \;   # DQ
find www -name '*.html' -type f -exec sh -c 'echo $(basename {})' \;   # SQ 
```

单引号将包含的材料直接传递给命令。因此，在 SQ 命令行中，启动的 shell`find`删除了封闭的引号，`find`命令将其`$9`参数视为：

```
echo $(basename {}) 
```

因为外壳删除了引号。相比之下，双引号中的材料是由shell处理的。因此，在 DQ 命令行中，shell（启动`find`的——不是由 启动*的* `find`）看到`$(basename {})`字符串的一部分并执行它，然后返回`{}`，所以它`find`作为`$9`参数传递给的字符串是：

```
echo {} 
```

现在，`find`它的`-exec`动作何时执行，在这两种情况下，它都会用`{}`它刚刚找到的文件名替换 （为了论证，`www/pics/index.html`）。因此，您会执行两个不同的命令：

```
sh -c 'echo $(basename www/pics/index.html)'    # SQ
sh -c "echo www/pics/index.html"                # DQ 
```

那里有一个（轻微的）符号作弊 - 这些是您在 shell 中键入的等效命令。在这`$2`两种情况下，启动的 shell 实际上都没有引号——启动的 shell 看不到任何引号。

如您所见，DQ 命令只是回显文件名；SQ 命令运行`basename`命令并捕获其输出，然后回显捕获的输出。一点还原论的想法表明，DQ 命令可以写成 as`-print`而不是 using `-exec`，而 SQ 命令可以写成`-exec basename {} \;`.

如果您使用的是 GNU `find`，它支持[格式指令](http://www.gnu.org/software/findutils/manual/html_mono/find.html#Format-Directives)`-printf`可以遵循的操作，因此无需运行。但是，这仅在 GNU 中可用；此处讨论的其余部分适用于您可能遇到的任何版本。`basename``find``find`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-26T00:47:59.563

试试这个：

```
 find www/*.html -type f -printf '%f\n' 
```

如果你想用管道来做（需要更多资源）：

```
find www/*.html -type f -print0 | xargs -0 -n1 basename 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-17T14:45:35.377

这就是我如何使用 imagick 批量调整文件大小，从源重新分配输出文件名

```
find . -name header.png -exec sh -c 'convert -geometry 600 {} $(dirname {})/$(basename {} ".png")_mail.png' \; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-16T18:53:09.807

我必须完成类似的事情，并发现遵循提到的避免循环 find 的输出并将 find 与 sh 一起使用的做法完全回避了这些`{}`问题`-printf`。

你可以这样尝试：

```
find www/*.html -type f -exec sh -c 'echo $(basename $1)' find-sh {} \; 
```

摘要是“不要直接在 sh -c 内部引用 {}，而是将其作为参数传递给 sh -c，然后您可以在 sh -c 内部使用数字变量引用它`find-sh`” dummy 来使用`$0`，这样做和使用`{}`for有更多的实用性`$1`。

我假设使用`echo`确实是为了简化概念和测试功能。正如其他人所提到的，有更简单的方法可以简单地回显，但这种情况的理想用例可能是使用`cp`,`mv`或任何更复杂的命令，您希望在命令中多次引用找到的文件名并且您需要获取摆脱路径，例如。当您必须在源和目标中指定文件名或重命名时。

例如，如果您只想将 html 文档复制*到*您的`public_html`目录（为什么？因为 Example！），那么您可以：

```
 find www/*.html -type f -exec sh -c 'cp /var/www/$(basename $1) /home/me/public_html/$(basename $1)' find-sh {} \; 
```

在 unix stackexchange 上，用户通配符关于使用 find 循环的答案进入了一些关于`-exec`and使用的伟大宝石`sh -c`。（你可以在这里找到它：[https](https://unix.stackexchange.com/questions/321697/why-is-looping-over-finds-output-bad-practice) ://unix.stackexchange.com/questions/321697/why-is-looping-over-finds-output-bad-practice ）

# java - 你如何在java中创建两个优先级队列数组？/Linux 恒定时间调度器

> ID：15627448
> 
> 赞同：0
> 
> 时间：2013-03-26T00:46:05.007
> 
> 标签：java, linux, multithreading, scheduling

这是我的任务中的一个步骤，看起来很容易，但对我来说似乎有点困惑。考虑到这件事明天到期，帮助会很大。代码格式响应会很棒。这是步骤：

您将需要创建两个优先级队列数组：一个活动数组和一个过期数组。在我们的例子中，我们将简化并且只有 0 到 4 的优先级值，即活动数组和过期数组将分别由 5 个队列组成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:57:40.967

Java 类是`PriorityQueue`，而不是“优先级数组”。我想你误解了任务。

假设您有一个具有优先级值的对象，我们将在此处省略限制。你可以自己把它放进去。

```
public class Task {
    private Integer priority;  // Let's not have priorities change by accident.
    private String name;
    private double cost;
    // Constructors, getters, setters elided.
} 
```

现在，PriorityQueue 需要属于 Comparable 类或使用 Comparator 制作。让我们使用后者，因为我假设相同的优先级具有相同的权重，并且`Task`.

```
public class TaskComparator implements Comparator<Task> {
    public int compare(Task left, Task right) {
        return left.getPriority() - right.getPriority();
        // Only because the numbers are limited. 
    }
} 
```

您可以使用创建任务的 PriorityQueue

```
PriorityQueue<Task> active = new PriorityQueue<Task>(10, new TaskComparator()); 
```

你用这个做什么是你自己的了望。

# ruby-on-rails - Pygments 代码块格式化程序为 Markdown 代码块添加了奇怪的空格

> ID：15627454
> 
> 赞同：0
> 
> 时间：2013-03-26T00:47:32.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, markdown, pygments, redcarpet

如下图所示：

![在此处输入图像描述](../Images/f35e622aaf6f2d2fb20de60fb1ecf44e.png)

为了明确指出我在说什么，我的意思是每个**.** , **+** , **]** , **|** , 和**=**。以及可能出现在其他地方的其他标点符号。

我正在使用 pygments.rb 和 Redcarpet gem 来格式化要添加到降价的代码块。每个代码块都包含在一个 .codebox div 中，该 div 使用此 SASS 样式（在实际文件中右击）：

```
.highlight
  pre
    white-space: pre
    overflow: scroll
    word-wrap: normal

.codebox
    margin: auto
    margin-top: 15px
    margin-bottom: -5px
    padding-right: 8px
    padding-left: 8px
    padding-top: 5px
    padding-bottom: 5px
    padding-top: -20px
    background-color: $codebox
    p
        font-family: 'Rockwell Bold'
        &::selection
            background: $pigPink
            color: #fff
        &::moz-selection
            background: $pigPink
            color: #fff
    pre
        font-family: 'Rockwell Bold'
        font-size: 90% 
```

然后，当然，markdown `` 反引号。如果相关，这是我的 pygments 配置设置：`

 `**application_helper.rb**

```
 class HTMLwithPygments < Redcarpet::Render::HTML
    def block_code(code, language)
      Pygments.highlight(code, lexer: language)
    end
  end

  def markdown(text)
    renderer = HTMLwithPygments.new(hard_wrap: true)
    options = {
      nowrap: true,
      autolink: true,
      no_intra_emphasis: true,
      fenced_code_blocks: true,
      lax_html_blocks: true,
      strikethrough: true,
      superscript: true
    }
    Redcarpet::Markdown.new(renderer, options).render(text).html_safe
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:45:08.880

正如我在评论中所说，您可能想使用 web 检查器检查生成的代码块的 css。Pygments 通过将不同的 css 规则应用于生成的代码块的不同标记来工作。您拥有的某些 css 可能与此输出发生冲突并产生您所看到的效果，或者您的代码块的默认样式表导致了这种情况。这应该是一个简单的修复。`

# json - 将对象添加到 JSON 中的数组

> ID：15627455
> 
> 赞同：0
> 
> 时间：2013-03-26T00:47:32.530
> 
> 标签：json

我正在尝试将数组中的对象添加到 JSON 对象中的项目中。

我正在寻找的结果是：

```
{ "AvailableFacets":[ "color", "sheenlevel" ], 
  "Selections":[ 
      { "Facet":"color", "Value":"red" }, 
      { "Facet":"color", "Value":"blue" } 
  ]
} 
```

但是在执行以下操作时出现错误“TypeError：myJsonObject.Selection.push 不是函数”：

```
var testJson = function () {
    var myJsonObject = $.parseJSON('{"AvailableFacets":["color", "sheenlevel"]}');
    myJsonObject.Selection = "[]";
    var newObject1 = $.parseJSON('{"Facet":"color", "Value":"red"}');
    var newObject2 = $.parseJSON('{"Facet":"color", "Value":"blue"}');
    myJsonObject.Selection.push(newObject1);

    return myJsonObject;
}; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:49:08.560

`"[]"`!== `[]`。那有帮助吗？您使用了错误的类型。此外，您正在寻找一个输出，`"Selections"`但您正在尝试定义`"Selection"`，但我认为这是一个错字。这应该有效：

```
myJsonObject.Selection = [{"Facet":"color", "Value":"red"},{"Facet":"color", "Value":"blue"}]; 
```

但是，如果您想将 JSON 字符串解析为 JSON，那么只需更改

```
myJsonObject.Selection = "[]"; 
```

至：

```
myJsonObject.Selection = []; 
```

# java - 获取菜单项视图 Robotium

> ID：15627464
> 
> 赞同：2
> 
> 时间：2013-03-26T00:48:08.370
> 
> 标签：java, android, unit-testing, testing, robotium

我知道我可以使用 getViews 获取屏幕的当前视图，然后我可以断言它们或发送适当的命令。但是我也可以获得菜单项的类似视图吗？可能是使用机器人菜单的视图列表？

谢谢。

# macos - PyQt getOpenFileName 默认目录

> ID：15627470
> 
> 赞同：1
> 
> 时间：2013-03-26T00:48:35.673
> 
> 标签：macos, python-2.7, pyqt, pyqt4, qfiledialog

我正在使用 Qt.Gui.QFileDialog.getOpenFileName 方法打开文件。如果我将默认文件目录设置为`"/Users/me/Documents/data/2013/today/"`打开的对话框`"/Users/me/Documents/data/2013/"`并`"today"`选择文件夹。如何获得要在窗口中打开的正确默认文件夹？

```
fname = QtGui.QFileDialog.getOpenFileName(self, 'Open file', "/Users/me/Documents/data/2012/20121102/images/",'*.npy') 
```

在 中打开一个对话框`/Users/me/Documents/data/2012/20121102`。我想打开窗户`/Users/me/Documents/data/2012/20121102/images/`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:11:55.380

最可能的原因是在您请求打开该文件时该文件不存在。打开文件夹使用[`QtGui.QFileDialog.getExistingDirectory`](http://doc-snapshot.qt-project.org/4.8/qfiledialog.html#getExistingDirectory)：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.pushButtonOpen = QtGui.QPushButton(self)
        self.pushButtonOpen.setText("Open Folder")
        self.pushButtonOpen.clicked.connect(self.on_pushButtonOpen_clicked)

        self.layoutHorizontal = QtGui.QHBoxLayout(self)
        self.layoutHorizontal.addWidget(self.pushButtonOpen)

    @QtCore.pyqtSlot()
    def on_pushButtonOpen_clicked(self):
        folderName = QtGui.QFileDialog.getExistingDirectory(
            self, "Open Directory",
            "/path/to/folder",
            QtGui.QFileDialog.ShowDirsOnly | QtGui.QFileDialog.DontResolveSymlinks,
        )

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-14T05:58:30.070

对于某人的信息（即使 8 年过去了）

您可以将`directory`参数传递给`getOpenFileName`PyQt5 中的默认文件夹。

# matlab - MATLAB中逻辑回归系数的正则化

> ID：15627473
> 
> 赞同：1
> 
> 时间：2013-03-26T00:49:07.617
> 
> 标签：matlab, statistics, regression

我正在尝试使用正则化（L1 或 L2）实现逻辑回归。mnrfit() 函数不实现正则化。是否有任何内置函数可以进行正则化，或者我必须推出自己的正则化代码？如果是这样，有没有我可以看的教程？我一直在看的论文在数学上相当密集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:53:20.530

Liblinear 是我们使用的标准。

[http://www.csie.ntu.edu.tw/~cjlin/liblinear/](http://www.csie.ntu.edu.tw/~cjlin/liblinear/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:10:31.140

L1 和 L2 正则化非常容易实现。

L1 正则化通过在每个训练步骤后减去**固定量**的权重绝对值来工作。因此，如果 L1 正则化系数为 0.01，您的权重 (1.0, -2.0, 3.0) 将变为 (0.99, -1.99, 2.99)。

L2 正则化通过减去一定**百分比**的权重来工作。系数为 0.01，这意味着将权重向量乘以 1。- 0.01 = 0.99。权重 (1.0, -2.0, 3.0) 将变为 (0.99, -1.98, 2.97)。这也称为**重量衰减**。

正如你所看到的，L1 正则化将**小**权重拉向 0。另一方面，L2 正则化对小权重几乎没有影响，但大大减少**了**大权重。

# c - 使用数据报的并发服务器

> ID：15627475
> 
> 赞同：3
> 
> 时间：2013-03-26T00:49:22.617
> 
> 标签：c, pthreads, datagram, unix-socket

客户端必须向服务器发送 2 个字符串，服务器必须向客户端发送回一个字符串，并且还要并行处理客户端。这两个实体在 Unix 下使用数据报交换数据。我的问题是，当我使用线程时，我无法将数据发送回客户端，也无法读取它。即使我不使用线程，我也无法正确地将消息发送回客户端。

服务器是：

```
#include <sys/socket.h>
#include <netinet/in.h>
#include <pthread.h>
#include <stdio.h>
#include <string.h>
#include <stdint.h>
#include <signal.h>
#include <unistd.h>
#include <stdlib.h>

int sd = 0;
void* worker(void* argm) {
    struct sockaddr_in* adress = (struct sockaddr_in*) argm;
    char s[100],s2[100];
    int adressLen;

    recvfrom(sd, s, sizeof(s), 0, (struct sockaddr*) &adress, &adressLen);
    perror("recv"); 
```

Perror 显示 recv: 非套接字上的套接字操作

```
 printf("I received: %s\n",s);

    strcat(s2,"sample");
    s2[strlen(s2)]='\0';
    sendto(sd, &s2, sizeof(s2),  0, (struct sockaddr*) &adress,sizeof(adress));
    perror("send");

} 
```

最后`perror()`显示发送：非套接字上的套接字操作。这也导致客户端无限等待来自服务器的字符串。

```
int main(int argc, char* argv[]) {
    int sd;
    int servPort;

    struct sockaddr_in servAddr;  

    if (argc != 2){
        printf("usage %s <port server>\n", argv[0]);
        return 1;
    }

    if (1 != sscanf(argv[1], "%d", &servPort) || 0 > servPort || 0xffff < servPort){
        printf("%s invalid port\n",argv[1]);
        return 2;   
    }
        servPort = htons(servPort);

    sd = socket(AF_INET, SOCK_DGRAM, 0);
    perror("socket: ");

    servAddr.sin_family = AF_INET;
    servAddr.sin_addr.s_addr = htonl(INADDR_ANY);
    servAddr.sin_port = servPort;

    bind(sd, (struct sockaddr *) &servAddr, sizeof(servAddr));
    perror("bind");

    for(;;) {
        char s[100];
        struct sockaddr_in client;
        client.sin_family=AF_INET;
        int clientLen;

        recvfrom(sd, s, sizeof(s), 0, (struct sockaddr*) &client, &clientLen);
        perror("recv");
        printf("I received: %s\n",s);

        pthread_t thread;
        pthread_create(&thread, NULL, worker, (void*) &client);
        pthread_join(thread, NULL);

        }
    close(sd);
    return 0;
} 
```

控制台打印的内容：

```
bind: Success
recv: Success
I received: da

recv: Socket operation on non-socket
I received: `���
send: Socket operation on non-socket
recv: Success
I received: nu

recv: Socket operation on non-socket
I received: `���
send: Socket operation on non-socket 
```

客户是：

```
 #include <arpa/inet.h>
#include <errno.h>
#include <netdb.h>
#include <netinet/ip.h>
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <time.h>
#include <unistd.h>

int main(int argc, char *argv[])
{
    int sd, r, lung, n;
    struct sockaddr_in servAddr;
    struct hostent *h;
    int servPort;

    if (argc != 3){
        printf("usage %s <IP server> <port server>\n", argv[0]);
        return 1;
    }

    h = gethostbyname(argv[1]);
    if(h==NULL) {
        printf("%s: unknown host '%s'\n",argv[0],argv[1]);
        return 1;
    }

        if (1 != sscanf(argv[2], "%d", &servPort) || 0 > servPort || 0xffff < servPort){
        printf("%s invalid port \n",argv[2]);
        return 2;   
    }
        servPort = htons(servPort);

    servAddr.sin_family = h->h_addrtype;
    memcpy((char *) &servAddr.sin_addr.s_addr, h->h_addr_list[0], h->h_length);
    servAddr.sin_port = servPort;

    sd = socket(AF_INET,SOCK_DGRAM,0);
    perror("socket ");

    char s[100],s2[100],s3[100];
    printf("enter text 1:\n");
    fgets(s, 101, stdin);
    printf("enter text 2:\n");
    fgets(s2, 101, stdin);

    s[strlen(s)] = '\0';
    s2[strlen(s2)]='\0';

    sendto(sd, &s, sizeof(s), 0, (struct sockaddr*) &servAddr, sizeof(servAddr));
    perror("send");

    sendto(sd, &s2, sizeof(s2), 0, (struct sockaddr*) &servAddr, sizeof(servAddr));
    perror("send");

    n = recvfrom(sd, s3, sizeof(s3), 0, (struct sockaddr*) &servAddr, &lung);
    perror("recv");

    printf("I received : %s", s3);

    close(sd);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T03:27:57.243

服务器中的主要问题是您`int sd = 0;`在文件顶部有一个全局变量，供 使用`worker()`，并且您也有一个局部变量`main()`- `int sd;`。变量 in`main()`被初始化为套接字；全局变量仍指向标准输入 (0)，因此您尝试在非套接字上执行套接字操作。

### 工作代码——`server.c`

使用 my`stderr.c`和`stderr.h`code 报告错误。如果您需要代码，请通过电子邮件与我联系（请参阅我的个人资料）。我没有做任何标题最小化。

```
#include <sys/socket.h>
#include <netinet/in.h>
#include <pthread.h>
#include <stdio.h>
#include <string.h>
#include <stdint.h>
#include <signal.h>
#include <unistd.h>
#include <stdlib.h>
#include "stderr.h"

int sd = 0;

static void *worker(void)
{
    struct sockaddr_in address;
    socklen_t          addressLen = sizeof(address);
    char msg[100];

    printf("%s(): sd = %d\n", __func__, sd);
    ssize_t n = recvfrom(sd, msg, sizeof(msg), 0, (struct sockaddr*) &address, &addressLen);
    if (n < 0)
        err_syserr("recvfrom() (worker) failed: ");
    else if (n == 0)
        err_report(ERR_EXIT, 0, "orderly shutdown by peer\n");

    err_remark("received: (%d bytes) %.*s\n", (int)n, (int)n, msg);
    msg[n] = '\0';

    strcat(msg, ": example");
    size_t len = strlen(msg);
    if ((n = sendto(sd, &msg, len, 0, (struct sockaddr*) &address, addressLen)) < 0)
        err_syserr("error on sendto(): ");
    err_remark("sent %d bytes\n", (int)n);
    return(0);
}

int main(int argc, char* argv[])
{
    int servPort;
    struct sockaddr_in servAddr;

    err_setarg0(argv[0]);
    err_setlogopts(ERR_PID|ERR_STAMP);  /* tag output with PID and time */

    if (argc != 2)
        err_usage("portnum");

    if (1 != sscanf(argv[1], "%i", &servPort) || 0 > servPort || 0xffff < servPort)
        err_error("invalid port %s\n", argv[1]);
    servPort = htons(servPort);

    if ((sd = socket(AF_INET, SOCK_DGRAM, 0)) < 0)
        err_syserr("error on socket(): ");

    servAddr.sin_family = AF_INET;
    servAddr.sin_addr.s_addr = htonl(INADDR_ANY);
    servAddr.sin_port = servPort;

    if (bind(sd, (struct sockaddr *) &servAddr, sizeof(servAddr)) < 0)
        err_syserr("error on bind(): ");

    for (;;)
    {
        char msg[100];
        struct sockaddr_in client;
        client.sin_family = AF_INET;
        socklen_t clientLen = sizeof(client);

        ssize_t n = recvfrom(sd, msg, sizeof(msg), 0, (struct sockaddr*) &client, &clientLen);
        if (n < 0)
            err_syserr("error on recvfrom(): ");
        if (n == 0)
            err_report(ERR_EXIT, 0, "orderly shutdown by peer\n");
        err_remark("received: (%d bytes) %.*s\n", (int)n, (int)n, msg);

        worker();
    }

    close(sd);
    return 0;
} 
```

### 工作代码——`client.c`

```
#include <arpa/inet.h>
#include <errno.h>
#include <netdb.h>
#include <netinet/ip.h>
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <time.h>
#include <unistd.h>
#include "stderr.h"

int main(int argc, char *argv[])
{
    int sd;
    ssize_t n;
    struct sockaddr_in servAddr;
    struct hostent *h;
    int servPort;
    socklen_t addrlen;

    err_setarg0(argv[0]);

    if (argc != 3)
        err_usage("hostname portnum");

    h = gethostbyname(argv[1]);
    if (h==NULL)
        err_syserr("unknown host %s: ", argv[1]);

    if (1 != sscanf(argv[2], "%d", &servPort) || 0 > servPort || 0xffff < servPort)
        err_error("invalid port %s\n", argv[2]);
    servPort = htons(servPort);

    servAddr.sin_family = h->h_addrtype;
    memcpy(&servAddr.sin_addr.s_addr, h->h_addr_list[0], h->h_length);
    servAddr.sin_port = servPort;

    if ((sd = socket(AF_INET,SOCK_DGRAM,0)) < 0)
        err_syserr("error on socket(): ");

    char s1[100],s2[100],s3[100];
    printf("enter text 1:\n");
    fgets(s1, sizeof(s1), stdin);
    printf("enter text 2:\n");
    fgets(s2, sizeof(s2), stdin);

    size_t s1_len = strlen(s1) - 1;
    size_t s2_len = strlen(s2) - 1;
    s1[s1_len] = '\0';  /* zap newline */
    s2[s2_len] = '\0';  /* zap newline */

    if (sendto(sd, &s1, s1_len, 0, (struct sockaddr*) &servAddr, sizeof(servAddr)) < 0)
        err_syserr("sendto() (s1) failed: ");

    if (sendto(sd, &s2, s2_len, 0, (struct sockaddr*) &servAddr, sizeof(servAddr)) < 0)
        err_syserr("sendto() (s2) failed: ");

    if ((n = recvfrom(sd, s3, sizeof(s3), 0, (struct sockaddr*) &servAddr, &addrlen)) < 0)
        err_syserr("recvfrom() (s3) failed: ");

    printf("Client received: (%d bytes) %.*s\n", (int)n, (int)n, s3);

    close(sd);
    return 0;
} 
```

### 样本输出

从构建程序、运行服务器和两次运行客户端程序开始跟踪。该`-I`目录包含`stderr.h`并且该`-L`目录包含`libjl.a`从`stderr.c`.

```
$ make server client
gcc -O3 -g -I/Users/jleffler/inc -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes -Wold-style-definition server.c -o server -L/Users/jleffler/lib/64 -ljl
gcc -O3 -g -I/Users/jleffler/inc -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes -Wold-style-definition client.c -o client -L/Users/jleffler/lib/64 -ljl
$ ./server 12345 &
$ ./client localhost 12345
enter text 1:
Goliath Beetle
enter text 2:
Golgafrincham Excesses
server: 2013-03-25 20:51:23 - pid=10895: received: (14 bytes) Goliath Beetle
worker(): sd = 3
server: 2013-03-25 20:51:23 - pid=10895: received: (22 bytes) Golgafrincham Excesses
server: 2013-03-25 20:51:23 - pid=10895: sent 31 bytes
Client received: (31 bytes) Golgafrincham Excesses: example
$ ./client localhost 12345
enter text 1:
Small talk - what people say to each other
enter text 2:
Smalltalk - an archetypal object-oriented programming language
server: 2013-03-25 20:52:14 - pid=10895: received: (42 bytes) Small talk - what people say to each other
worker(): sd = 3
server: 2013-03-25 20:52:14 - pid=10895: received: (62 bytes) Smalltalk - an archetypal object-oriented programming language
server: 2013-03-25 20:52:14 - pid=10895: sent 71 bytes
Client received: (71 bytes) Smalltalk - an archetypal object-oriented programming language: example
$ 
```

# maven - 练习 - Maven 示例书

> ID：15627477
> 
> 赞同：1
> 
> 时间：2013-03-26T00:49:43.430
> 
> 标签：maven, pom.xml

我正在尝试研究 Maven，因此我创建了一个简单的 Web 应用程序，如“Maven by Example”一书中提供的那样，并且在该应用程序中，我在 simple-parent 中拥有 simple-model 作为依赖项的 simple-weather maven 项目。

我刚刚复制了 pom.xml（仅对休眠工件版本进行了调整），当我在“simple-model”上运行“mvn install”时，它构建正常，但是当我在“simple”上运行“mvn install”时-weather”它没有构建好，因为它说它没有找到与简单模型依赖项相关的包。

注意：如果我创建了两个 Eclipse 项目并关联了 simple-model”，它可以编译，因此不存在与项目编译相关的问题。

参见 pom.xml。我想问题出在 pom.xml 上，但我不知道该怎么做。我已经尝试以多种方式修复，但根本没有成功。

我什至已经将组和工件 ID 从 simple-model 复制到 simple-weather 以保证这不是打字问题。:-(

//简单模型-> pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.sonatype.mavenbook.multispring</groupId>
        <artifactId>simple-parent</artifactId>
        <version>1.0</version>
    </parent>
    <artifactId>simple-model</artifactId>
    <packaging>jar</packaging>
    <name>Simple Object Model</name>
    <dependencies>
        <dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-annotations</artifactId>
    <version>3.5.6-Final</version>
</dependency>

<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-commons-annotations</artifactId>
    <version>3.2.0.Final</version>
</dependency>
    </dependencies>
</project> 
```

//简单天气 -> pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.sonatype.mavenbook.multispring</groupId>
        <artifactId>simple-parent</artifactId>
        <version>1.0</version>
    </parent>
    <artifactId>simple-weather</artifactId>
    <packaging>jar</packaging>
    <name>Simple Weather API</name>
    <dependencies>
        <dependency>
            <groupId>org.sonatype.mavenbook.multispring</groupId>
            <artifactId>simple-model</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>
        </dependency>
        <dependency>
            <groupId>dom4j</groupId>
            <artifactId>dom4j</artifactId>
            <version>1.6.1</version>
        </dependency>
        <dependency>
            <groupId>jaxen</groupId>
            <artifactId>jaxen</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.3.2</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

查看错误消息：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.
3.2:testCompile (default-testCompile) on project simple-weather: Compilation fai
lure: Compilation failure:
[ERROR] \mavenTest\ch-multi-spring\simple-parent\simple-weather\src\test\java\or
g\sonatype\mavenbook\weather\yahoo\YahooParserTest.java:[8,43] error: package or
g.sonatype.mavenbook.weather.model does not exist 
```

任何援助将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:56:46.277

简单模型中的来源实际上是否正确？

请注意，Maven 不会抱怨未解决的依赖关系。依赖项似乎是正确的，它是找不到包的编译错误`org.sonatype.mavenbook.weather.model`。这主要是因为这样的包既不能在 simple-web 项目本身中使用，也不能在其依赖项（即 simple-model）中使用。

检查在 simple-model 中创建的 JAR 是否包含正确的内容。

# c# - 制作一个通用的 Action 调度器 带有反应式扩展

> ID：15627481
> 
> 赞同：3
> 
> 时间：2013-03-26T00:50:06.603
> 
> 标签：c#, system.reactive

我正在对 Reactive Extensions 进行大量试验，现在我正在尝试创建一个系统，在该系统中，我可以对程序进行排队并以我想要的任何方式执行它们，同时能够向订阅者发送通知。

我目前将我的数据库访问封装在一个 UserAccess 类中，该类公开了添加用户的方法。在该方法中，我想排队一个将用户添加到数据库的操作。所以我创建了一个 T 类的 JobProcessor，它公开了一个方法 QueueJob(Action) 并让我的用户实现这个类。我的问题是我看不到如何从 Observable 的 OnNext 方法中调用 Action，因为该操作需要一个 User 参数。

我的攻角一定是错的，一定是我对设计的把握有问题。例如，我知道我应该以某种方式将我的用户传递给 QueueJob 过程，但我不知道如何以一种干净的方式进行操作。

```
 public class UserAccess : JobProcessor<User>
    {
        public void AddUser(User user)
        {
            QueueJob(usr =>
                     {
                         using (var db = new CenterPlaceModelContainer())
                         {
                             db.Users.Add(usr);
                         }

                     });
         [...]

    public abstract class JobProcessor<T>
    {
        // Either Subject<T> or Subject<Action<T>>
        private Subject<Action<T>> JobSubject = new Subject<Action<T>>();

        public JobProcessor()
        {
            JobSubject
            /* Insert Rx Operators Here */
            .Subscribe(OnJobNext, OnJobError, OnJobComplete);
        }

        private void OnJobNext(Action<T> action)
        {
            // ???
        }

        private void OnJobError(Exception exception)
        {

        }

        private void OnJobComplete()
        {

        }

        public void QueueJob(Action<T> action)
        {
            JobSubject.OnNext(action);
        }
    } 
```

**编辑 1：**

我试图将 QueueJob 的签名更改为

```
QueueJob(T entity, Action<T> action) 
```

现在我可以做

```
QueueJob(user, usr => { ... } ); 
```

但这似乎不是很直观。我还没有看到很多框架可以同时传递实体和动作。有了这个，我可能也不需要 JobProcessor。

**编辑 2：** 我将 JobProcessor 的主题类型更改为主题，完全删除了 T。因为我可以在外部引用它，所以不需要在过程中包含用户。现在唯一的问题是如果我传递给QueueJob的User的action在Action执行的实际时间之间发生了变化，用户会有修改的信息。不受欢迎，但我想我会继续寻找解决方案。

我的代码现在是（用于示例的缓冲区）：

```
public abstract class JobProcessor
{
   public Subject<Action> JobSubject = new Subject<Action>();

   public JobProcessor()
   {
       JobSubject
           .Buffer(3)
           .Subscribe(OnJobNext, OnJobError, OnJobComplete);
   }

   private void OnJobNext(IList<Action> actionsList)
   {
       foreach (var element in actionsList)
        {
            element();
        }
   }

   private void OnJobError(Exception exception)
   {

   }

   private void OnJobComplete()
   {

   }

   public void QueueJob(Action action)
   {
       JobSubject.OnNext(action);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:48:21.067

我最初的反应是 IObservable 通常最适合创建不可变数据结构的序列，而不是方法指针/委托/动作。

接下来，我建议如果您尝试“调度”以队列方式处理的操作，那么 Rx 中的 IScheduler 实现似乎非常合适！

或者，如果您实际上是在尝试创建一个 ProduceConsumer 队列，那么我认为 Rx 实际上并不是最适合这个的。即，如果您将一堆消息放入队列，然后让一些消费者读取这些消息并处理它们，我会寻找不同的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:20:41.233

首先，我必须同意 Lee 和 NSGaga 的观点，即您*可能*不想这样做 - 生产者/消费者队列的其他模式与您想要完成的（我认为）更加一致这里。

也就是说，由于我永远无法抗拒挑战……通过一些细微的调整，您可以消除“我将什么传递给行动？”的直接问题。通过捕获传入的用户参数并将其直接设置`Action`- 这是您的代码并进行了一些修改：

```
public class UserAccess : JobProcessor
{
    public void AddUser(User user)
    {
        QueueJob(() =>
                 {
                     using (var db = new CenterPlaceModelContainer())
                     {
                         db.Users.Add(user);
                     }

                 });
     [...]

public abstract class JobProcessor
{
    // Subject<Action>
    private Subject<Action> JobSubject = new Subject<Action>();

    public JobProcessor()
    {
        JobSubject
        /* Insert Rx Operators Here */
        .Subscribe(OnJobNext, OnJobError, OnJobComplete);
    }

    private void OnJobNext(Action action)
    {
        // Log something saying "Yo, I'm executing an action" here?
        action();
    }

    private void OnJobError(Exception exception)
    {
        // Log something saying "Yo, something broke" here?
    }

    private void OnJobComplete()
    {
        // Log something saying "Yo, we shut down" here?
    }

    public void QueueJob(Action action)
    {
        JobSubject.OnNext(action);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T01:02:11.400

坦率地说，我不确定您的“目标”是什么-但我认为您有点倒退了...

通常主题是通过诸如
`IObservable<Action<T>> NewJob {get{return _subject;}}`
...或其他东西的属性暴露出来的。（主题变得可观察 - 主题本质上是双重的 - 以及为什么它是特定的 - 并且有点争议 - 但适合玩耍等）

你只是`OnNext`从课堂内部打电话——就像你做的那样。

但是您通常不会自己订阅 observable
......您让外部用户通过“挂钩”到您的属性中来做到这一点 - 并定义 subscribe - 这会在他们到达时为他们获取新项目。

这当然是简化的，有很多案例和很多用途，但这可能会有所帮助，我希望

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:31:22.200

我完成了我的设计并找到了我喜欢的东西。如果其他人需要，这是代码。

```
public class JobProcessor<T> : IDisposable where T : new()
{
    private ISubject<Action<T>> jobsProcessor = new Subject<Action<T>>();

    private IDisposable disposer;

    private T _jobProvider = new T();

    public JobProcessor(Func<ISubject<Action<T>>, IObservable<IEnumerable<Action<T>>>> initializer)
    {
        Console.WriteLine("Entering JobProcessor Constructor");

        disposer = initializer(jobsProcessor)
            .Subscribe(OnJobsNext, OnJobsError, OnJobsComplete);

        Console.WriteLine("Leaving JobProcessor Constructor");
    }

    private void OnJobsNext(IEnumerable<Action<T>> actions)
    {
        Debug.WriteLine("Entering OnJobsNext");

        foreach (var action in actions)
        {
            action(_jobProvider);
        }

        Debug.WriteLine("Leaving OnJobsNext");
    }

    private void OnJobsError(Exception ex)
    {
        Debug.WriteLine("Entering OnJobsError");

        Debug.WriteLine(ex.Message);

        Debug.WriteLine("Leaving OnJobsError");
    }

    private void OnJobsComplete()
    {
        Debug.WriteLine("Entering OnJobsComplete");

        Debug.WriteLine("Leaving OnJobsComplete");
    }

    public void QueueJob(Action<T> action)
    {
        Debug.WriteLine("Entering QueueJobs");

        jobsProcessor.OnNext(action);

        Debug.WriteLine("Leaving QueueJobs");
    }

    public void Dispose()
    {
        disposer.Dispose();
    }
} 
```

我选择了一个通用的 make 来支持分层架构，我可以在一个并发层中使用 JobProcessor，在那里我可以选择执行的快慢。JobProcessor 构造函数接受一个 Func，用于在代码中的其他位置声明 Observable 序列，并生成一个处理器，该处理器按照序列描述的顺序执行作业。OnNext 接受一个 IEnumerable> 以便能够支持像 .Buffer(3) 这样同时返回一批动作的序列。不利的一面是，当创建一次返回单个动作的序列时，我需要这样做

```
var x = new JobProcessor<DatabaseAccess<User>>(subject => subject.Select(action => action.Yield())); 
```

T 的 Yield() 扩展方法返回单个元素的可枚举。我在这里找到了[将单个项目作为 IEnumerable<T> 传递](https://stackoverflow.com/questions/1577822/passing-a-single-item-as-ienumerablet)。

# knockout.js - foreach 没有绑定，但我可以使用 firebug 并查看数据已填充

> ID：15627484
> 
> 赞同：0
> 
> 时间：2013-03-26T00:50:21.707
> 
> 标签：knockout.js

我的 select 元素的 foreach 绑定遇到了一些问题。我之前有它工作过，不知道为什么它停止工作，尝试了很多不同的方法似乎没有任何效果。

这些是我的 js 文件中的相关项目：

数据模型js文件：

```
function ProviderModel(data) {
var self = this;

var defaultValue = '';

var firstName = defaultValue;
var lastName = defaultValue;
var salutation = defaultValue;

if (data != undefined) {
    firstName = data.FirstName;
    lastName = data.LastName;
    salutation = data.Salutation;
}

self.FirstName = ko.observable(firstName);
self.LastName = ko.observable(lastName);
self.Salutation = ko.observable(salutation);

self.formattedFullName = ko.computed(function () {
    return self.LastName() + ", " + self.FirstName() + " " + self.Salutation();
});
}

function PracticeModel(data) {
var self = this;

var defaultValue = '';

var street = defaultValue;
var street2 = defaultValue;
var city = defaultValue;
var state = defaultValue;
var postalCode = defaultValue;
var phone = defaultValue;
var taxId = defaultValue;

if (data != undefined) {
    street = data.Street;
    street2 = data.Street2;
    city = data.City;
    state = data.State;
    postalCode = data.PostalCode;
    phone = data.Phone;
    taxId = data.TaxId;
}

self.Street = ko.observable(street);
self.Street2 = ko.observable(street2);
self.City = ko.observable(city);
self.State = ko.observable(state);
self.PostalCode = ko.observable(postalCode);
self.Phone = ko.observable(phone);
self.TaxId = ko.observable(taxId);

self.displayPhone = ko.computed(function () {
    return "Phone #: " + format10DigitPhoneNumberByText(self.Phone());
});

self.displayTaxId = ko.computed(function () {
    return "Tax ID: " + self.TaxId();
});

self.formattedFullAddress = ko.computed(function () {
    return self.Street() + " " +
           self.Street2() + " " +
           self.City() + " " +
           self.State() + " " +
           self.PostalCode();
});
}

function ContactModel(data) {
var self = this;

var defaultValue = '';

var firstName = defaultValue;
var lastName = defaultValue;
var contactType = 0;
var otherContactTitle = defaultValue;
var contactTitles = [];

if (data != undefined) {
    firstName = data.FirstName;
    lastName = data.LastName;
    contactTitles = data.Titles;
    contactType = data.ContactType;
    otherContactTitle = data.OtherContactTitle;
}

self.FirstName = ko.observable(firstName);
self.LastName = ko.observable(lastName);
self.Titles = ko.observableArray(contactTitles);
self.ContactType = ko.observable(contactType);
self.OtherContactTitle = ko.observable(otherContactTitle);

self.BoxStyle = ko.computed(function () {
    if (self.FirstName() != "" && self.LastName() != "") {
        return "contactBoxSelected";
    }
    return "contactBoxUnselected";
}); 
```

}

这是 ViewModel js 文件：

```
function ProviderDetailsViewModel() {
var self = this;

self.Provider = ko.observable(new ProviderModel());
self.Practice = ko.observable(new PracticeModel());
self.Contact = ko.observable(new ContactModel());

self.DisplayOtherContactTextBox = ko.observable(false);

self.DataPopulated = ko.observable(false);

//subscriptions
self.Contact().ContactType.subscribe(function (newValue) {
    var result = Enumerable.From(self.Contact().Titles()).First(function (x) {
        if (x.Text() == "Other") { return x; }
        else { return null; }
    }).Value();

    if (result === newValue) {
        self.DisplayOtherContactTextBox(true);
    } else {
        self.Contact().OtherContactTitle('');
        self.DisplayOtherContactTextBox(false);
    }
}, self);

} //ProviderDetailsViewModel End 
```

这是我的单页应用程序 js 文件，我在其中应用绑定并进行页面加载

```
var spa = {
viewModels: {
    providerDetails: new ProviderDetailsViewModel(),
    patientSearch: new PatientSearchViewModel()
}
};

$(document).ready(function () {
$.getJSON('/Cardiology/NewRequest/ProviderDetails', function (response) {
    ko.mapping.fromJS(response, {}, spa.viewModels.providerDetails);
    spa.viewModels.providerDetails.DataPopulated(true);
});

ko.applyBindings(spa.viewModels.providerDetails);
}); 
```

从我的 asp.net MVC 控制器返回的示例 json：

```
{
"Provider":
{
"FirstName":"Bat",
"LastName":"Man",
"Salutation":"MD"
},
"Practice":
{
"Street":"19999 Batcave",
"Street2":null,
"City":"Cincinnati",
"State":"OH",
"PostalCode":"98122",
"Phone":"9999999999",
"TaxId":"45-77777777"
},
"Contact":
{
"FirstName":"Bat",
"LastName":"Man",
"Titles":
[
      {"Selected":false,"Text":null,"Value":null},
      {"Selected":false,"Text":"RN","Value":"725060000"},
  {"Selected":false,"Text":"MD","Value":"725060001"},
  {"Selected":false,"Text":"Physician's Assistant","Value":"725060002"},
  {"Selected":false,"Text":"Medical Assistant","Value":"725060003"},
  {"Selected":false,"Text":"Pharmacist","Value":"725060004"},
  {"Selected":false,"Text":"Office Staff","Value":"725060005"},
  {"Selected":false,"Text":"Office Manager","Value":"725060006"},
  {"Selected":false,"Text":"Billing Personnel","Value":"725060007"},
  {"Selected":false,"Text":"Finance Personnel","Value":"725060008"},
  {"Selected":false,"Text":"Claims Personnel","Value":"725060009"},
  {"Selected":false,"Text":"Receptionist","Value":"725060010"},
  {"Selected":false,"Text":"Other","Value":"725060011"}
]}  
} 
```

这是我的标记：

```
<section id="ProviderDetails" data-bind="with: spa.viewModels.providerDetails">
<table class="newRequestInnerTable2" width="100%" cellpadding="5" data-bind="visible: DataPopulated">
    <tr>
        <td width="120px" align="left">*Provider:</td>
        <td>
            <div id="selectedProvider">
                <table width=100% height="75">
                    <tr>
                        <td>
                            <div class="searchSelectedBox">
                                <span data-bind="text: Provider().formattedFullName"></span><br />
                                <span style="font-size: 12px;" data-bind="text: Practice().formattedFullAddress"></span><br />
                                <span textType="phoneNumber10" data-bind="text: Practice().displayPhone"></span><br />
                                <span style="font-size: 12px;" data-bind="text: Practice().displayTaxId"></span>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
    <tr>
    <td width="120px" align="left">*Contact:</td>
    <td data-bind="with: Contact">
        <div id="contactInfo" data-bind="css: BoxStyle">
            <table width="100%"> 
                <tr>
                    <td class="tdl">Contact First Name: </td>
                    <td  class="tdr">
                        <input id="ContactFirstName" type="text" data-bind="value: FirstName"/>
                    </td>

                    <td class="tdl">Contact Last Name: </td>
                    <td  class="tdr">
                        <input id="ContactLastName" type="text" data-bind="value: LastName"/>
                    </td>
                </tr>
                <tr>
                    <td class="tdl">Title/Position: </td>
                    <td colspan="3" class="tdr">
                        <select data-bind="foreach: Titles, value: ContactType">
                            <option data-bind="value: Value, text: Text"></option>
                        </select>
                        <input id="otherContactTitle" type="text" data-bind="visible: $parent.DisplayOtherContactTextBox, value: OtherContactTitle"/>
                    </td>
                </tr>
            </table>
            @*<p data-bind="text: ko.toJSON($data.Titles, null, 2)"></p>
            <pre data-bind="text: ko.toJSON($data, null, 2)"></pre>*@
        </div>
    </td>
</table>
</section>
<style type="text/css">
.tdl {text-align: right}
.tdr { text-align: left;padding-left: 4px;}
.tdr input { width: 175px;}
</style> 
```

我有一个非常简单的例子，我用这些数据做的，它正在工作，我无法弄清楚这里缺少什么。我真的需要“第二”双眼睛。

当我在 'spa.viewModels.providerDetails.Contact().Titles()' 上使用 firebug 时，它完全填充了适当的数据。页面上的所有其他数据都在显示，所以我知道我正在连接

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:40:13.513

感谢 Jason Haley 指出我使用错误绑定的愚蠢时刻。

答案是：

> 我会用选项替换foreach：标题，optionsValue：'Value'，optionsText：'Text'。查看此页面上的示例 3：knockoutjs.com/documentation/options-binding.html – Jason Haley

# ios - 移动时为多个帧设置动画的正确方法

> ID：15627485
> 
> 赞同：1
> 
> 时间：2013-03-26T00:50:24.350
> 
> 标签：ios, objective-c, animation

我想知道这是否是在游戏角色从 a 点移动到 b 点时为游戏角色设置动画的正确方法，同时显示不同的运动图像来模拟一个人的运动。

这是我所做的伪代码：

```
 [UIView animateWithDuration:dMAN_MOVEMENT_SPEED/3 animations:^{
            //Set Target Image
            //Set target position
    }completion:^(BOOL finished){
        //2nd to 3rd Frame
        [UIView animateWithDuration:dMAN_MOVEMENT_SPEED/3 animations:^{
            //Set Target Image
            //Set target position
        }completion:^(BOOL finished){
            //3rd to final Frame
            [UIView animateWithDuration:dMAN_MOVEMENT_SPEED/3 animations:^{
                //Set Target Image
                //Set target position
            }completion:^(BOOL finished){
                //do nothing
            }];
        }];
    }]; 
```

这是正确的方法吗？我这样做是因为我可以控制每一帧和每一帧的持续时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:35:30.903

似乎有更好的方法。如果您没有太多图像，我可能会建议使用then`animationImages`的属性：`UIImageView``startAnimating`

```
NSArray *images = @[[UIImage imageNamed:@"0.jpg"],
                    [UIImage imageNamed:@"1.jpg"],
                    [UIImage imageNamed:@"2.jpg"],
                    [UIImage imageNamed:@"3.jpg"],
                    [UIImage imageNamed:@"4.jpg"],
                    [UIImage imageNamed:@"5.jpg"],
                    [UIImage imageNamed:@"6.jpg"],
                    [UIImage imageNamed:@"7.jpg"]];

self.imageView.image = images[0];

self.imageView.animationImages = images;
self.imageView.animationDuration = kAnimationDuration;
self.imageView.animationRepeatCount = 1;

[self.imageView startAnimating];

[UIView animateWithDuration:kAnimationDuration
                 animations:^{
                     self.imageView.center = ... // set this to whatever you want
}]; 
```

如果您担心将所有这些加载到内存中，您还可以使用 a`CADisplayLink`来适当地加载图像，如下所示：

```
- (void)animateImageUsingDisplayLink
{
    self.imageNames = @[@"0.jpg",
                        @"1.jpg",
                        @"2.jpg",
                        @"3.jpg",
                        @"4.jpg",
                        @"5.jpg",
                        @"6.jpg",
                        @"7.jpg"];

    self.imageView.image = [UIImage imageNamed:self.imageNames[0]];

    [self startDisplayLink];

    [UIView animateWithDuration:kAnimationDuration
                     animations:^{
                         self.imageView.center = ... // set this to whatever you want
    }];
}

- (void)startDisplayLink
{
    self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(handleDisplayLink:)];
    self.startTime = CACurrentMediaTime();
    [self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
}

- (void)stopDisplayLink
{
    [self.displayLink invalidate];
    self.displayLink = nil;
}

- (void)handleDisplayLink:(CADisplayLink *)displayLink
{
    CFTimeInterval elapsed = displayLink.timestamp - self.startTime;

    // If you want it to repeat, then comment out the following `if` statement

    if (elapsed >= kAnimationDuration)
    {
        [self stopDisplayLink];
        return;
    }

    NSInteger frameNumber = ((NSInteger) elapsed * [self.imageNames count] / kAnimationDuration) % [self.imageNames count];

    if (frameNumber != self.currentFrameNumber)
    {
        self.imageView.image = [UIImage imageNamed:self.imageNames[frameNumber]];
        self.currentFrameNumber = frameNumber;
    }
} 
```

# c++ - C++ 通过套接字发送文件和文本

> ID：15627492
> 
> 赞同：11
> 
> 时间：2013-03-26T00:51:04.407
> 
> 标签：c++, c, sockets

我试图使用套接字发送图像，但我也必须发送文件名。我使用发送文件的代码，但是当我发送文件名时，我在客户端收到一些奇怪的字符。

客户：

```
#define PORT 20000
#define LENGTH 512 

int main(int argc, char *argv[]){
int sockfd; 
int nsockfd;
char revbuf[LENGTH]; 
struct sockaddr_in remote_addr;

/* Get the Socket file descriptor */
if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1)
{
    fprintf(stderr, "ERROR: Failed to obtain Socket Descriptor! (errno = %d)\n",errno);
    exit(1);
}

/* Fill the socket address struct */
remote_addr.sin_family = AF_INET; 
remote_addr.sin_port = htons(PORT); 
inet_pton(AF_INET, "127.0.0.1", &remote_addr.sin_addr); 
bzero(&(remote_addr.sin_zero), 8);

/* Try to connect the remote */
if (connect(sockfd, (struct sockaddr *)&remote_addr, sizeof(struct sockaddr)) == -1)
{
    fprintf(stderr, "ERROR: Failed to connect to the host! (errno = %d)\n",errno);
    exit(1);
}
else 
    printf("[Client] Connected to server at port %d...ok!\n", PORT);

/* Send File to Server */
//if(!fork())
//{
    char* fs_name = "house.jpg";
    char sdbuf[LENGTH]; 

            char buffer[256];
            int n;
            fgets(buffer,255,stdin);
            bzero(buffer,256);
            n = write(sockfd,buffer, strlen(buffer));
            if(n<0) printf("Error: sending filename");

    printf("[Client] Sending %s to the Server... ", fs_name);
    FILE *fs = fopen(fs_name, "r");
    if(fs == NULL)
    {
        printf("ERROR: File %s not found.\n", fs_name);
        exit(1);
    }

    bzero(sdbuf, LENGTH); 
    int fs_block_sz;
    while((fs_block_sz = fread(sdbuf, sizeof(char), LENGTH, fs)) > 0)
    {
        if(send(sockfd, sdbuf, fs_block_sz, 0) < 0)
        {
            fprintf(stderr, "ERROR: Failed to send file %s. (errno = %d)\n", fs_name, errno);
            break;
        }
        bzero(sdbuf, LENGTH);
    }
    printf("Ok File %s from Client was Sent!\n", fs_name);
//}

close (sockfd);
printf("[Client] Connection lost.\n");
return (0);
} 
```

发送文本的客户端部分：

```
char buffer[256];
int n;
fgets(buffer,255,stdin);
bzero(buffer,256);
n = write(sockfd,buffer, strlen(buffer));
if(n<0) printf("Error: sending filename"); 
```

服务器：

```
#define PORT 20000 
#define BACKLOG 5
#define LENGTH 512 

int main ()
{
int sockfd; 
int nsockfd; 
int num;
int sin_size; 
struct sockaddr_in addr_local; /* client addr */
struct sockaddr_in addr_remote; /* server addr */
char revbuf[LENGTH];

/* Get the Socket file descriptor */
if((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1 )
{
    fprintf(stderr, "ERROR: Failed to obtain Socket Descriptor. (errno = %d)\n", errno);
    exit(1);
}
else 
    printf("[Server] Obtaining socket descriptor successfully.\n");

/* Fill the client socket address struct */
addr_local.sin_family = AF_INET; // Protocol Family
addr_local.sin_port = htons(PORT); // Port number
addr_local.sin_addr.s_addr = INADDR_ANY; // AutoFill local address
bzero(&(addr_local.sin_zero), 8); // Flush the rest of struct

/* Bind a special Port */
if( bind(sockfd, (struct sockaddr*)&addr_local, sizeof(struct sockaddr)) == -1 )
{
    fprintf(stderr, "ERROR: Failed to bind Port. (errno = %d)\n", errno);
    exit(1);
}
else 
    printf("[Server] Binded tcp port %d in addr 127.0.0.1 sucessfully.\n",PORT);

/* Listen remote connect/calling */
if(listen(sockfd,BACKLOG) == -1)
{
    fprintf(stderr, "ERROR: Failed to listen Port. (errno = %d)\n", errno);
    exit(1);
}
else
    printf ("[Server] Listening the port %d successfully.\n", PORT);

int success = 0;
while(success == 0)
{
    sin_size = sizeof(struct sockaddr_in);

    /* Wait a connection, and obtain a new socket file despriptor for single connection */
    if ((nsockfd = accept(sockfd, (struct sockaddr *)&addr_remote, &sin_size)) == -1) 
    {
        fprintf(stderr, "ERROR: Obtaining new Socket Despcritor. (errno = %d)\n", errno);
        exit(1);
    }
    else 
        printf("[Server] Server has got connected from %s.\n", inet_ntoa(addr_remote.sin_addr));

            char buffer[256];
            bzero(buffer,256);
            int n = 0;
            n = read(nsockfd, buffer, 255);
            if (n < 0) error("ERROR reading from socket");
            printf("msg: %s\n",buffer);

    /*Receive File from Client */
    char* fr_name = "/house.jpg";
    FILE *fr = fopen(fr_name, "a");
    if(fr == NULL)
        printf("File %s Cannot be opened file on server.\n", fr_name);
    else
    {
        bzero(revbuf, LENGTH); 
        int fr_block_sz = 0;
        while((fr_block_sz = recv(nsockfd, revbuf, LENGTH, 0)) > 0) 
        {
            int write_sz = fwrite(revbuf, sizeof(char), fr_block_sz, fr);
            if(write_sz < fr_block_sz)
            {
                error("File write failed on server.\n");
            }
            bzero(revbuf, LENGTH);
            if (fr_block_sz == 0 || fr_block_sz != 512) 
            {
                break;
            }
        }
        if(fr_block_sz < 0)
        {
            if (errno == EAGAIN)
            {
                printf("recv() timed out.\n");
            }
            else
            {
                fprintf(stderr, "recv() failed due to errno = %d\n", errno);
                exit(1);
            }
        }
        printf("Ok received from client!\n");
        fclose(fr); 
    }
} 
```

}

接收文本的服务器部分：

```
char buffer[256];
bzero(buffer,256);
int n = 0;
n = read(nsockfd, buffer, 255);
if (n < 0) error("ERROR reading from socket");
printf("msg: %s\n",buffer); 
```

需要一些帮助。谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T02:31:47.480

在您的客户端的这段代码中：

```
 char buffer[256];
        int n;
        fgets(buffer,255,stdin);
        bzero(buffer,256);
        n = write(sockfd,buffer, strlen(buffer)); 
```

看起来您正试图从 读取文件名`stdin`并将其发送到`sockfd`. 但。在发送之前将缓冲区清零。

# html - 可从 webview 上的链接访问

> ID：15627495
> 
> 赞同：1
> 
> 时间：2013-03-26T00:51:34.687
> 
> 标签：html, ios, webview, reachability

我在 webview 中显示的资源包中有一个 html 文件。html页面上有访问网络网站的链接。每次在 html 页面上触摸链接时，我都想检查可访问性。我怎样才能做到这一点？

Reachability 的 iOS 示例代码直接对 html 页面进行了测试。如何检测何时在 html 页面上触摸链接。我猜这与设置通知有关，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:32:05.827

在 HTML 中使用这个 javascript 函数来了解可达性

```
function CheckOnlineStatus()
    {
        var returnValue = false;

        // do your thing!function checkConnection() {
        var networkState = navigator.network.connection.type;

        var states = {};
        states[Connection.UNKNOWN]  = 'offLine';
        states[Connection.ETHERNET] = 'Ethernet connection';
        states[Connection.WIFI]     = 'WiFi connection';
        states[Connection.CELL_2G]  = 'Cell 2G connection';//Cell 2G connection
        states[Connection.CELL_3G]  = 'Cell 3G connection';//Cell 3G connection
        states[Connection.CELL_4G]  = 'Cell 4G connection';//Cell 4G connection
        states[Connection.NONE]     = 'offLine';

        if(states[networkState] != 'offLine')
        {
            returnValue = true;
        }

        return returnValue;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:30:04.033

该`<UIWebViewDelegate>`方法`webView:shouldStartLoadWithRequest:navigationType:`将帮助您。在您的委托中实现它，并在那里执行您的可达性测试，并根据需要返回 YES 或 NO。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSLog(@"loading %@", request);
    return YES;
} 
```

# php - 如何使用 mysql 查询的结果 - 例如存储在另一个表中

> ID：15627507
> 
> 赞同：4
> 
> 时间：2013-03-26T00:53:11.967
> 
> 标签：php, sql

我从数据库中查询 mysql 以返回我以后要使用的字段。

我可以运行查询，并且可以使用 echo 从字段中打印数据，以证明结果符合预期。我尝试了各种脚本将结果字段存储为变量，但到目前为止没有成功。

任何人都可以提供帮助。

这是查询脚本 -

```
$query = mysql_query("SELECT ID FROM users WHERE username = ".$_SESSION['user']); 

while($row = mysql_fetch_object($query) )
{
echo "$row->ID<br />"; 
```

我现在需要将 ID 存储为变量以进行测试，并可能与其他数据一起存储在另一个表中。

我不是编码员，我正在尝试为这个家庭完成一个由其他人发起的项目。

谢谢。

**编辑 1**

我一直在尝试将数据放入临时数据库并且遇到问题。

如果我将它输入到 phpMyadmin 中，它可以工作

```
INSERT INTO tempusertrip (username,ID) SELECT username,ID FROM users WHERE ID=1 
```

但是，如果我将它添加到我的 php 脚本中，它不会，并且日志文件中没有错误。我这样添加

```
$query1 = ("INSERT INTO temp2 (username,ID) SELECT username,ID FROM users WHERE ID=1"); 
```

我的脚本显然有问题，但我似乎无法弄清楚它是什么。

理想情况下，我需要输入条件基于先前会话集中包含的用户名的数据 ($_SESSION['user'])，而不是使用“where ID=1”。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:03:42.020

首先，您需要为您的数据创建一个表。它可以是只有您的连接才能看到的临时表，也可以是常规表（如果其他连接需要数据）。您需要确定您需要源中的哪些列（如果不是全部）以及您正在执行的操作可能需要哪些额外的列（如果有的话）。通常，您只需要新表中原始表中的主键。对于 MySQL，如果新表与旧表相同，请使用`CREATE ... LIKE old_tbl_name`向前兼容的语法。

接下来（这可能是您首先要查找的内容），您将从旧表的选择中插入新表：

```
INSERT INTO new_tbl_name SELECT ... FROM old_tbl_name WHERE ... 
```

如果您有额外的列，则需要指定要复制的列：

```
INSERT INTO selected_users (username) SELECT username FROM users WHERE ... 
```

（列名不必同名，何必自找麻烦。）

# r - axis.Date 用另一种语言

> ID：15627508
> 
> 赞同：0
> 
> 时间：2013-03-26T00:53:12.240
> 
> 标签：r

我正在根据日期（x 轴）绘制现象的发生。问题是，在 R 中使用 axis.Date 函数时，日期轴是法语的。我希望它是英文的。对不起，如果这是一个简单的问题，但我无法找到答案。

这就是我所做的。

```
date <- as.Date(c("2011/5/12","2011/5/13","2011/5/14","2011/5/15","2011/5/16","2011/5/17","2011/5/18","2011/5/19","2011/5/20","2011/5/21","2011/5/22","2011/5/23","2011/5/24","2011/5/25","2011/5/26","2011/5/27","2011/5/28","2011/5/29","2011/5/30","2011/5/31","2011/6/1","2011/6/2","2011/6/3","2011/6/4","2011/6/5","2011/6/6","2011/6/7","2011/6/8","2011/6/9","2011/6/10","2011/6/11","2011/6/12","2011/6/13","2011/6/14","2011/6/15","2011/6/16","2011/6/17","2011/6/18","2011/6/19"))
example <- c(0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 3, 1, 1, 2, 5, 1, 3, 3, 8, 2, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)

plot(date, example,xlab="Date of birth", axes=F,ylab="", ylim=c(0,15), yaxt="n", xaxt="n",lwd= 10,type="h", cex.lab=1.2, cex.axis=1, cex=1)
axis(2, at=seq(0,15, 5), lwd=1, cex=1)
axis.Date(1, at=seq(as.Date("2001/5/12"), as.Date("2011/6/19"), "weeks"), cex.axis=1, lwd=1) 
```

但如果是系统配置问题，您可能看不到 x 标签是法语的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:03:19.593

例如，您可以这样做：

```
old.loc <- Sys.getlocale("LC_TIME")
Sys.setlocale("LC_TIME", "English") 
axis.Date(1, at=seq(as.Date("2001/5/12"), as.Date("2011/6/19"), "weeks"), 
          cex.axis=1, lwd=1)
Sys.setlocale("LC_TIME",old.loc) 
```

但是最好使用`format`参数`axis.Date`来设置你想要的格式。

# prolog - gprolog中的mod？

> ID：15627511
> 
> 赞同：0
> 
> 时间：2013-03-26T00:53:40.083
> 
> 标签：prolog

我正在尝试在 gprolog 1.3 中使用 mod 运算符并不断出错。这是我为演示该问题而制作的示例谓词：

```
test(N) :- N mod 10. 
```

当我查询 test(2) 时。我得到“未捕获的异常：错误（existence_error（procedure，（mod）/2，test/1）”。我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T01:06:34.120

尝试这个：

```
test(N,X) :- X is N mod 10. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:58:17.740

这根本不符合逻辑。在序言中，一切都像一个规则。头部和尾部应该是一个声明。我不记得清楚的语法，但它应该像

```
mod10Is2(N) :- N mod 10 = 2 
```

# php - MS SQL 存储过程在中途从 php 5 调用时失败

> ID：15627513
> 
> 赞同：1
> 
> 时间：2013-03-26T00:54:01.250
> 
> 标签：php, sql-server, stored-procedures

我已经把头撞在墙上几个小时了，如果你知道在哪里看，我怀疑答案很简单。

我在 MS SQL 2005 中有一个编译的存储过程，它运行良好。我已经测试过了，没有任何错误。

但是，当我从此处显示的 PHP 包含文件中调用相同的过程时，存储过程似乎开始运行（我的 mssql 跟踪显示要正确进行调用）然后中途停止。有时我会更新 15 条记录中的 10 条。其他时候我得到14分中的5分。

如果我复制从跟踪窗口运行的命令并直接在 MS SQL 管理工作室中运行它，它会完美运行。这让我认为这是某种超时，还是我在程序运行之前关闭了连接，所以 MS SQL 2005 认为它应该被终止？

```
<?php
session_start();
require ('../includes/config.inc.php'); 
require('../includes/mssql.php');

function include_booking($box, $offeredtolocumid, $surgery, $rate) {
    $dbc2 = mssql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    $q2 = "exec WEB_Surgery_Box_OfferBoxtoLocum '".$box."', '".$offeredtolocumid."', '".$surgery."'";
    $myresult = mssql_query($q2 ,$dbc2);

}     
    /* set out document type to text/javascript instead of text/html */
    header("Content-type: text/javascript");

    $offeredtolocumid = $_GET["locumid"];
    //$rate = $_GET["rate"];
    $rate = 15.99;
    $surgery = $_SESSION['surgeryid'];
    $box = $_SESSION['currentbox'];

    include_booking($box, $offeredtolocumid, $surgery, $rate);

    ?> 
```

我是 PHP / MS SQL 的新手，所以我知道上面的代码无论如何都不完美。

我有许多其他过程调用没有问题。只是这个没有。MS SQL 服务器完成此过程平均需要 0.1 秒。我希望有人有答案。

谢谢尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:48:37.583

今天经过大量测试并删除了 SET NO COUNT 选项，然后再次使程序崩溃，我相信这是问题所在。

所以要澄清。从 PHP 调用 MS SQL 存储过程时，我应该使用 SET NO COUNT 来防止返回任何不受欢迎的东西。

谢谢。

# java - 对子集和应用递归

> ID：15627520
> 
> 赞同：-1
> 
> 时间：2013-03-26T00:55:07.287
> 
> 标签：java, subset

我正在尝试编写一个代码，将子集中的所有整数相加，看看它们是否加起来为零。这是我到目前为止所得到的

```
 /**
   * Solve the subset sum problem for a set of integer values.
   * 
   * @param t
   *          a set of integer values
   * @return <code>true</code> if there exists a non-empty subset of
   *         <code>t</code> whose elements sum to zero.
   */
  public static boolean subsetSum(Set<Integer> t) {
    return subsetSum(new ArrayList<Integer>(t), null);
  }

  /**
   * Computes the sum of two Integers where one or both references are null. If
   * both references are null then the result is null; otherwise the result is
   * an integer equal to <code>a + b</code> where null references are treated as
   * being equal to zero.
   * 
   * @param a
   * @param b
   * @return the sum of <code>a</code> and <code>b</code>
   */
  private static Integer add(Integer a, Integer b) {
    if (a == null && b == null) {
      return null;
    } else if (a == null) {
      return b;
    } else if (b == null) {
      return a;
    }
    return a + b;
  }

  /**
   * Recursive solution for the subset sum problem.
   * 
   * <p>
   * <code>currentSum</code> holds the value of the subset under consideration;
   * it should be <code>null</code> if the current subset is empty.
   * 
   * @param t
   *          a list containing unique integer values (a set of integers)
   * @param currentSum
   *          the current subset sum so far
   * @return <code>true</code> if there exists a subset of <code>t</code> such
   *         that the sum of the elements in the subset and
   *         <code>currentSum</code> equals zero.
   */

******** THIS IS THE PART I HAD TO EDIT *************
  private static boolean subsetSum(List<Integer> t, Integer currentSum) {
      currentSum = 0;
      for (int i = 0; i < t.size(); i++) {
          currentSum = currentSum + (Integer)(t.get(i));
      }
      if (Lab9W.add(currentSum, t.get(0)) == 0) {
          return true;
      }
      else if (Lab9W.add(currentSum, t.get(1)) == 0) {
          return true;
      } else if (Lab9W.add(-t.get(0),t.get(0)) == 0) {
          return true;
      }
      else {
          return false;
      }

  }

} 
```

这是我收到的有关制作此代码的提示：

> 首先考虑集合的第一个元素，第一个元素和集合的其余部分是否存在零子集和？没有第一个和集合的其余部分，是否存在零子集和？如果 2 或 3 中的任何一个为真，则返回真，否则返回假

任何帮助，我一直在尝试一整天我无法让它为我的生活工作，在递归中我无法弄清楚如何自己调用该方法。

所以我的问题是我将如何在递归中编写这个方法？整个方法应该将子集的总和相加，看看它们是否等于零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:24:27.800

```
// return sum of array
    public Integer subsetSum(List<Integer> t, Integer sizeOfArray) 
    {
        if(sizeOfArray == 0)
            return t.get(0);
        return subsetSum(t, sizeOfArray - 1) + t.get(sizeOfArray);
    }
//now you can do this somewere

     public boolean check(List<Integer> t)
{
        Integer currentSum = subsetSum(t,t.size()-1); 

        if (Lab9W.add(currentSum, t.get(0)) == 0) // do something with these if statements
            {
                return true;
            }
            else if (Lab9W.add(currentSum, t.get(1)) == 0)
            {
                return true;
            }
            else if (Lab9W.add(-t.get(0),t.get(0)) == 0) 
            {
                return true;
            }
            else
            {
                return false;
            }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:35:29.200

好的，您可以为递归做这样的事情

```
 private static boolean subsetSum(List<Integer> t, Integer sizeOfArray,Integer currentSum){

      if(sizeOfArray == -1)
      {
        if (Lab9W.add(currentSum, t.get(0)) == 0)
        {
            return true;
        }
        else if (Lab9W.add(currentSum, t.get(1)) == 0)
        {
            return true;
        }
        else if (Lab9W.add(-t.get(0),t.get(0)) == 0) 
        {
            return true;
        }
        else
        {
            return false;
        }

       return subsetSum(t,sizeOfArray - 1,currentSum + t.get(sizeOfArray));
 } 
```

我没有检查就输入了它，但这就是概念。玩弄这个想法

第一个电话应该是这样的

```
subsetSum(array,array.size()-1,0); // i dont know if its array.size()-1 // it is... 
```

// 好的，你也可以这样做...

```
 // return sum of array
    public Integer subsetSum(List<Integer> t, Integer sizeOfArray) 
    {
        if(sizeOfArray == 0)
            return t.get(0);
        return subsetSum(t, sizeOfArray - 1) + t.get(sizeOfArray);
    } 
```

//现在你可以在某个地方做到这一点

```
 public boolean check(List<Integer> t)
{
        Integer currentSum = subsetSum(t,t.size()-1); 

        if (Lab9W.add(currentSum, t.get(0)) == 0)
            {
                return true;
            }
            else if (Lab9W.add(currentSum, t.get(1)) == 0)
            {
                return true;
            }
            else if (Lab9W.add(-t.get(0),t.get(0)) == 0) 
            {
                return true;
            }
            else
            {
                return false;
            }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-06T12:12:29.397

和这个问题类似吗？以及如何解决？

给定一组整块重量的石头，可以将它们分成重量完全相等的 2 组。编写递归函数

public static boolean canSplit（int [] 石头，int left，int right）

其中，给定一组权重的石头意味着函数可以分为两组）left和right-（这样整个团队都是值得的。必要时使用函数subArray。训练：查看第一块石头并递归决定哪个组有与之相关联。

# css - 仅使用 CSS 和 HTML 覆盖背景图像的一部分，而其他部分是透明的

> ID：15627522
> 
> 赞同：0
> 
> 时间：2013-03-26T00:55:24.957
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter Bootstrap (ver 2.3.1) 来建立一个网站，我正在努力实现以下目标：

[http://jsfiddle.net/MgcDU/2916/](http://jsfiddle.net/MgcDU/2916/)

在那个网站上，我使用一个大图像作为背景，`<section>`从屏幕的左边缘延伸到右边缘（一直穿过）。

我想在该图像上放置一个分页元素。导航元素本身是透明的（因此下面的图像可以通过），并且分页元素的左右空间设置为白色或页面背景颜色（它应该覆盖图像，仅此而已）。

我给了分页元素透明度：

```
.pagination li a, .pagination li span {
    background: transparent;
} 
```

我根本不知道如何获得分页周围的空白。

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:06:47.343

```
.pull-right { position: relative; top: 2em; background: #ccc } 
```

[http://jsfiddle.net/MgcDU/2917/](http://jsfiddle.net/MgcDU/2917/)

像这样的东西？

# php - 用php删除html元素

> ID：15627523
> 
> 赞同：1
> 
> 时间：2013-03-26T00:55:52.463
> 
> 标签：php, html

我想知道如果我有一个 HTML 页面，我将如何使用 php 删除一个元素，通过它的名称或 id。所以我可以有这样的 HTML 代码

```
<div>
    <span id='todelete' name='todelete'>This should be deleted</span>
    <?php
       delete('todelete');
    ?>
</div> 
```

或类似的东西，网络浏览器只会显示一个没有跨度的空div。这是可能的，还是只使用javascript来做这个更有用。

基本上，我要说的是在页面编译之前，你可以根据一些条件从中删除元素，而不是在页面加载之后

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T00:58:17.523

您似乎对[服务器端](http://en.wikipedia.org/wiki/Server-side_scripting)和[客户端](http://en.wikipedia.org/wiki/Client-side_scripting)脚本语言感到困惑。

PHP 是一种服务器端语言，这意味着一旦编译完成，就不能在用户浏览器中动态更改它。

另一方面，JavaScript 是一种客户端脚本语言，可以动态地操作页面上的内容。

因此，一旦页面被渲染，你要求做的事情是不可能使用纯 PHP 的。

您可以使用 AJAX 技术从已经在使用 JavaScript 的浏览器中的页面中调用 PHP 脚本。然后，您可以使用由 AJAX 请求调用的 PHP 脚本来返回可用于更新页面特定部分的内容，但是没有一种完全不涉及 JavaScript 的纯 PHP 方式来执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-24T21:55:55.420

只是一个想法...
您是否考虑过 PHP XPath 查询？

// **CSS** *不重要*

```
<style>
    div { border:1px solid rgba(255,0,0,0.5); background:rgba(255,0,0,0.1) }
    span{ border:1px solid rgba(0,255,0,0.5); margin:0px 2px; padding:0 20px; 
    background:rgba(0,255,0,0.5)}
</style> 
```

// **PHP** *你的 HTML，在这个例子中是一个字符串。*

```
<?php
$string = '
   <div>
       <span id="keep"> John </span>
       <span id="keep"> Susane </span>
       <span id="todelete"> Tree </span>
       <span id="keep"> Karin </span>
       <span id="keep"> Jack </span>
   </div>
';

echo $string; 
```

// **PHP** *开始新的类 DOMDocument 并进行查询*

```
$doc = new DOMDocument;
@$doc->loadHTML($string);

$xpath = new DOMXPath($doc);
$found = $xpath->query("//span[contains(@id, 'todelete')]"); 
```

// 更多**PHP** *我无法很好地解释这一点。**我希望别人可以吗？**
// 但是查询找到了包含属性 id 和 'todelete' 的跨度
// 我猜它输出为 HTML*

```
$element = $found[0]->ownerDocument->saveXML($found[0]);
/* ##### <span id="todelete"> Tree </span> ##### */
echo '<p>delete:' .  $element . '<p>'; 
```

//最后**PHP** *替换你的字符串中你发现的*什么都没有**

```
echo str_replace($element, '' , $string);

?> 
```

我希望它有用。XPath 非常强大并且经常被遗忘。试试看。我希望它足以满足您的需求。您可以复制上面的所有代码并将其粘贴到 .php 文档中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-16T15:10:28.447

您不能使用 php 删除 DOM 元素。您需要使用 javascript 或 jQuery 来完成。

使用**javascript**会是这样

```
var element = document.getElementById("todelete");
element.parentNode.removeChild(element); 
```

并使用**jQuery**（包括库后）

```
$(document).ready(function() {
    $("#todelete").remove();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-02T12:03:12.117

您不能真正使用 php 删除已呈现的 html，但您可以使用 php 代码中的条件来选择性地呈现 html 的某些部分，具体取决于您在 php 中执行的测试的结果...

# hbase - Thrift 的调试器？

> ID：15627524
> 
> 赞同：2
> 
> 时间：2013-03-26T00:55:55.670
> 
> 标签：hbase, thrift, thrift-protocol

我正在寻找一种可以通过 Thrift 嗅探、限制和修改消息的工具。与用于 Web 开发的 Charles Web Proxy 非常相似的东西。有这样的事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-09T17:21:39.987

吞吐量有多重要？如果它不是很重要（或至少作为指导），您可能对 thrift-tools 感兴趣：

[https://github.com/pinterest/thrift-tools/](https://github.com/pinterest/thrift-tools/)

它是用 Python 编写的，因此主要用于调试流量而不是重写真实流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T22:42:46.117

Thrift 支持许多非常不同的传输，因此几乎没有一种通用的调试器等适用于所有这些传输。然而，对于某些语言（主要是 C++ 和/或 Java、IIRC）的 AFAIK，有一些可用的协议可以作为调试辅助。除此之外，您必须使用与您正在使用的底层物理传输相匹配的工具，例如 Wireshark 等。

# ios - Apple Push 通知服务是否已过时？

> ID：15627525
> 
> 赞同：0
> 
> 时间：2013-03-26T00:55:55.660
> 
> 标签：ios, push-notification

我正在研究如何制作推送通知，常用的东西似乎是airpush之类的。但我也找到了 Apple 关于 Apple Push Notification Service 的文档。

这让我想知道我是在混合苹果和橙子，还是 Apple Push Notification Service 的文档是否已经过时。

任何人都可以请清除这个。谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T01:18:09.437

Apple 推送通知文档是最新的。如果您直接使用它，您有责任自己构建所有后端。

[Airpush](http://www.airpush.com)似乎是一种广告服务，而不是推送通知服务。

您可能会考虑[PushIO](http://push.io/features/)而不是 Airpush 吗？PushIO 是一种商业推送通知服务，它为通知和与 Apple PNS 服务器的通信提供了不可忽视的基础设施，以及大量分析、基于位置的定位和许多其他附加值。

# android - Android - 带有动画的可扩展 TextView

> ID：15627530
> 
> 赞同：66
> 
> 时间：2013-03-26T00:56:48.640
> 
> 标签：android, android-animation, textview

我有一个`TextView`首先显示一小部分长文本。

用户可以按下“查看更多”按钮来展开`TextView`并查看该文本的其余部分。

进行测试，我可以通过简单地将`TextView.setMaxLines`4 之间的值交换为折叠和 Integer.MAX_VALUE 为展开来实现。

现在，我希望这种行为伴随着动画。我知道在[这个问题](https://stackoverflow.com/questions/5927977/textview-expand-animation-like-in-android-market)上，一个解决方案几乎完成了，但我尝试实施它，但没有成功。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-09-06T22:49:51.233

你可以查看我在 ExpandableTexTView 上的博文：

这个想法是，最初 TextView 将显示一小部分长文本，当单击它时，它将显示其余文本。

所以这是我如何解决它的代码。

```
package com.rokonoid.widget;

import android.content.Context;
import android.content.res.TypedArray;
import android.text.SpannableStringBuilder;
import android.util.AttributeSet;
import android.view.View;
import android.widget.TextView;
/**
 * User: Bazlur Rahman Rokon
 * Date: 9/7/13 - 3:33 AM
 */
public class ExpandableTextView extends TextView {
    private static final int DEFAULT_TRIM_LENGTH = 200;
    private static final String ELLIPSIS = ".....";

    private CharSequence originalText;
    private CharSequence trimmedText;
    private BufferType bufferType;
    private boolean trim = true;
    private int trimLength;

    public ExpandableTextView(Context context) {
        this(context, null);
    }

    public ExpandableTextView(Context context, AttributeSet attrs) {
        super(context, attrs);

        TypedArray typedArray = context.obtainStyledAttributes(attrs, R.styleable.ExpandableTextView);
        this.trimLength = typedArray.getInt(R.styleable.ExpandableTextView_trimLength, DEFAULT_TRIM_LENGTH);
        typedArray.recycle();

        setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                trim = !trim;
                setText();
                requestFocusFromTouch();
            }
        });
    }

    private void setText() {
        super.setText(getDisplayableText(), bufferType);
    }

    private CharSequence getDisplayableText() {
        return trim ? trimmedText : originalText;
    }

    @Override
    public void setText(CharSequence text, BufferType type) {
        originalText = text;
        trimmedText = getTrimmedText(text);
        bufferType = type;
        setText();
    }

    private CharSequence getTrimmedText(CharSequence text) {
        if (originalText != null && originalText.length() > trimLength) {
            return new SpannableStringBuilder(originalText, 0, trimLength + 1).append(ELLIPSIS);
        } else {
            return originalText;
        }
    }

    public CharSequence getOriginalText() {
        return originalText;
    }

    public void setTrimLength(int trimLength) {
        this.trimLength = trimLength;
        trimmedText = getTrimmedText(originalText);
        setText();
    }

    public int getTrimLength() {
        return trimLength;
    }
} 
```

并在 attr.xml 中添加以下行

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="ExpandableTextView">
        <attr name="trimLength" format="integer"/>
    </declare-styleable>
</resources> 
```

将以下内容放入您的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="vertical"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent">

     <com.rokonoid.widget.ExpandableTextView
         android:id="@+id/lorem_ipsum"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"/>

 </LinearLayout> 
```

并测试您的活动

```
package com.rokonoid.widget;

import android.app.Activity;
import android.os.Bundle;

public class MyActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String yourText = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. " +
                "Ut volutpat interdum interdum. Nulla laoreet lacus diam, vitae " +
                "sodales sapien commodo faucibus. Vestibulum et feugiat enim. Donec " +
                "semper mi et euismod tempor. Sed sodales eleifend mi id varius. Nam " +
                "et ornare enim, sit amet gravida sapien. Quisque gravida et enim vel " +
                "volutpat. Vivamus egestas ut felis a blandit. Vivamus fringilla " +
                "dignissim mollis. Maecenas imperdiet interdum hendrerit. Aliquam" +
                " dictum hendrerit ultrices. Ut vitae vestibulum dolor. Donec auctor ante" +
                " eget libero molestie porta. Nam tempor fringilla ultricies. Nam sem " +
                "lectus, feugiat eget ullamcorper vitae, ornare et sem. Fusce dapibus ipsum" +
                " sed laoreet suscipit. ";

        ExpandableTextView expandableTextView = (ExpandableTextView) findViewById(R.id.lorem_ipsum);
        expandableTextView.setText(yourText);
    }
} 
```

参考：[Android - 可扩展的 TextView](http://codexplo.wordpress.com/2013/09/07/android-expandable-textview/)

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2015-04-15T01:04:15.680

使用[ObjectAnimator](http://developer.android.com/reference/android/animation/ObjectAnimator.html)。

```
ObjectAnimator animation = ObjectAnimator.ofInt(yourTextView, "maxLines", tv.getLineCount());
animation.setDuration(200).start(); 
```

这将在 200 毫秒内完全扩展您的 TextView。您可以替换`tv.getLineCount()`为您希望将其折叠回来的多行文本。

- - 更新 - -

以下是一些您可以使用的便捷方法：

```
private void expandTextView(TextView tv){
    ObjectAnimator animation = ObjectAnimator.ofInt(tv, "maxLines", tv.getLineCount());
    animation.setDuration(200).start();
}

private void collapseTextView(TextView tv, int numLines){
    ObjectAnimator animation = ObjectAnimator.ofInt(tv, "maxLines", numLines);
    animation.setDuration(200).start();
} 
```

如果您使用的是 API 16+，则可以使用 textView.getMaxLines() 轻松确定您的 textView 是否已扩展。

```
private void cycleTextViewExpansion(TextView tv){
    int collapsedMaxLines = 3;
    ObjectAnimator animation = ObjectAnimator.ofInt(tv, "maxLines", 
        tv.getMaxLines() == collapsedMaxLines? tv.getLineCount() : collapsedMaxLines);
    animation.setDuration(200).start();
} 
```

笔记：

如果 maxLines 尚未设置，或者您已[设置 textView 的高度（以像素为单位](http://developer.android.com/reference/android/widget/TextView.html#getMaxLines())），则可能会出现 ArrayIndexOutOfBounds 异常。

上面的例子总是需要 200 毫秒，无论它们扩展 3 行还是 400 行。如果你想要一个一致的扩展率，你可以这样做：

```
int duration = (textView.getLineCount() - collapsedMaxLines) * 10; 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-05-12T09:54:57.797

我为此创建了一个开源库，因为我对在互联网上找到的其他解决方案不满意。我已经把它放在了 GitHub 上，任何人都可以免费使用。

```
public class ExpandableTextView extends TextView
{
    // copy off TextView.LINES
    private static final int MAXMODE_LINES = 1;

    private OnExpandListener onExpandListener;
    private TimeInterpolator expandInterpolator;
    private TimeInterpolator collapseInterpolator;

    private final int maxLines;
    private long animationDuration;
    private boolean animating;
    private boolean expanded;
    private int originalHeight;

    public ExpandableTextView(final Context context)
    {
        this(context, null);
    }

    public ExpandableTextView(final Context context, final AttributeSet attrs)
    {
        this(context, attrs, 0);
    }

    public ExpandableTextView(final Context context, final AttributeSet attrs, final int defStyle)
    {
        super(context, attrs, defStyle);

        // read attributes
        final TypedArray attributes = context.obtainStyledAttributes(attrs, R.styleable.ExpandableTextView, defStyle, 0);
        this.animationDuration = attributes.getInt(R.styleable.ExpandableTextView_animation_duration, BuildConfig.DEFAULT_ANIMATION_DURATION);
        attributes.recycle();

        // keep the original value of maxLines
        this.maxLines = this.getMaxLines();

        // create default interpolators
        this.expandInterpolator = new AccelerateDecelerateInterpolator();
        this.collapseInterpolator = new AccelerateDecelerateInterpolator();
    }

    @Override
    public int getMaxLines()
    {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN)
        {
            return super.getMaxLines();
        }

        try
        {
            final Field mMaxMode = TextView.class.getField("mMaxMode");
            mMaxMode.setAccessible(true);
            final Field mMaximum = TextView.class.getField("mMaximum");
            mMaximum.setAccessible(true);

            final int mMaxModeValue = (int) mMaxMode.get(this);
            final int mMaximumValue = (int) mMaximum.get(this);

            return mMaxModeValue == MAXMODE_LINES ? mMaximumValue : -1;
        }
        catch (final Exception e)
        {
           return -1;
        }
    }

    /**
     * Toggle the expanded state of this {@link ExpandableTextView}.
     * @return true if toggled, false otherwise.
     */
    public boolean toggle()
    {
        if (this.expanded)
        {
            return this.collapse();
        }

        return this.expand();
    }

    /**
     * Expand this {@link ExpandableTextView}.
     * @return true if expanded, false otherwise.
     */
    public boolean expand()
    {
        if (!this.expanded && !this.animating && this.maxLines >= 0)
        {
            this.animating = true;

            // notify listener
            if (this.onExpandListener != null)
            {
                this.onExpandListener.onExpand(this);
            }

            // get original height
            this.measure
            (
                MeasureSpec.makeMeasureSpec(this.getMeasuredWidth(), MeasureSpec.EXACTLY),
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED)
            );

            this.originalHeight = this.getMeasuredHeight();

            // set maxLines to MAX Integer
            this.setMaxLines(Integer.MAX_VALUE);

            // get new height
            this.measure
            (
                MeasureSpec.makeMeasureSpec(this.getMeasuredWidth(), MeasureSpec.EXACTLY),
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED)
            );

            final int fullHeight = this.getMeasuredHeight();

            final ValueAnimator valueAnimator = ValueAnimator.ofInt(this.originalHeight, fullHeight);
            valueAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener()
            {
                @Override
                public void onAnimationUpdate(final ValueAnimator animation)
                {
                    final ViewGroup.LayoutParams layoutParams = ExpandableTextView.this.getLayoutParams();
                    layoutParams.height = (int) animation.getAnimatedValue();
                    ExpandableTextView.this.setLayoutParams(layoutParams);
                }
            });
            valueAnimator.addListener(new AnimatorListenerAdapter()
            {
                @Override
                public void onAnimationEnd(final Animator animation)
                {
                    ExpandableTextView.this.expanded = true;
                    ExpandableTextView.this.animating = false;
                }
            });

            // set interpolator
            valueAnimator.setInterpolator(this.expandInterpolator);

            // start the animation
            valueAnimator
                .setDuration(this.animationDuration)
                .start();

            return true;
        }

        return false;
    }

    /**
     * Collapse this {@link TextView}.
     * @return true if collapsed, false otherwise.
     */
    public boolean collapse()
    {
        if (this.expanded && !this.animating && this.maxLines >= 0)
        {
            this.animating = true;

            // notify listener
            if (this.onExpandListener != null)
            {
                this.onExpandListener.onCollapse(this);
            }

            // get new height
            final int fullHeight = this.getMeasuredHeight();

            final ValueAnimator valueAnimator = ValueAnimator.ofInt(fullHeight, this.originalHeight);
            valueAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener()
            {
                @Override
                public void onAnimationUpdate(final ValueAnimator animation)
                {
                    final ViewGroup.LayoutParams layoutParams = ExpandableTextView.this.getLayoutParams();
                    layoutParams.height = (int) animation.getAnimatedValue();
                    ExpandableTextView.this.setLayoutParams(layoutParams);
                }
            });
            valueAnimator.addListener(new AnimatorListenerAdapter()
            {
                @Override
                public void onAnimationEnd(final Animator animation)
                {
                    // set maxLines to original value
                    ExpandableTextView.this.setMaxLines(ExpandableTextView.this.maxLines);

                    ExpandableTextView.this.expanded = false;
                    ExpandableTextView.this.animating = false;
                }
            });

            // set interpolator
            valueAnimator.setInterpolator(this.collapseInterpolator);

            // start the animation
            valueAnimator
                .setDuration(this.animationDuration)
                .start();

            return true;
        }

        return false;
    }

    /**
     * Sets the duration of the expand / collapse animation.
     * @param animationDuration duration in milliseconds.
     */
    public void setAnimationDuration(final long animationDuration)
    {
        this.animationDuration = animationDuration;
    }

    /**
     * Sets a listener which receives updates about this {@link ExpandableTextView}.
     * @param onExpandListener the listener.
     */
    public void setOnExpandListener(final OnExpandListener onExpandListener)
    {
        this.onExpandListener = onExpandListener;
    }

    /**
     * Returns the {@link OnExpandListener}.
     * @return the listener.
     */
    public OnExpandListener getOnExpandListener()
    {
        return onExpandListener;
    }

    /**
     * Sets a {@link TimeInterpolator} for expanding and collapsing.
     * @param interpolator the interpolator
     */
    public void setInterpolator(final TimeInterpolator interpolator)
    {
        this.expandInterpolator = interpolator;
        this.collapseInterpolator = interpolator;
    }

    /**
     * Sets a {@link TimeInterpolator} for expanding.
     * @param expandInterpolator the interpolator
     */
    public void setExpandInterpolator(final TimeInterpolator expandInterpolator)
    {
        this.expandInterpolator = expandInterpolator;
    }

    /**
     * Returns the current {@link TimeInterpolator} for expanding.
     * @return the current interpolator, null by default.
     */
    public TimeInterpolator getExpandInterpolator()
    {
        return this.expandInterpolator;
    }

    /**
     * Sets a {@link TimeInterpolator} for collpasing.
     * @param collapseInterpolator the interpolator
     */
    public void setCollapseInterpolator(final TimeInterpolator collapseInterpolator)
    {
        this.collapseInterpolator = collapseInterpolator;
    }

    /**
     * Returns the current {@link TimeInterpolator} for collapsing.
     * @return the current interpolator, null by default.
     */
    public TimeInterpolator getCollapseInterpolator()
    {
        return this.collapseInterpolator;
    }

    /**
     * Is this {@link ExpandableTextView} expanded or not?
     * @return true if expanded, false if collapsed.
     */
    public boolean isExpanded()
    {
        return this.expanded;
    }

    public interface OnExpandListener
    {
        void onExpand(ExpandableTextView view);
        void onCollapse(ExpandableTextView view);
    }
} 
```

使用 ExpandableTextView 非常简单，它只是一个添加了一些额外功能的常规 TextView。通过定义 android:maxLines 属性，可以设置 TextView 折叠状态的默认行数。

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <at.blogc.android.views.ExpandableTextView
        android:id="@+id/expandableTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/lorem_ipsum"
        android:maxLines="5"
        android:ellipsize="end"
        app:animation_duration="1000"/>

    <!-- Optional parameter animation_duration: sets the duration of the expand animation -->

    <Button
        android:id="@+id/button_toggle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/expand"/>

</LinearLayout> 
```

在您的活动或片段中：

```
 final ExpandableTextView expandableTextView = (ExpandableTextView) this.findViewById(R.id.expandableTextView);
    final Button buttonToggle = (Button) this.findViewById(R.id.button_toggle);

    // set animation duration via code, but preferable in your layout files by using the animation_duration attribute
    expandableTextView.setAnimationDuration(1000L);

// set interpolators for both expanding and collapsing animations
expandableTextView.setInterpolator(new OvershootInterpolator());

// or set them separately
expandableTextView.setExpandInterpolator(new OvershootInterpolator());
expandableTextView.setCollapseInterpolator(new OvershootInterpolator());

    // toggle the ExpandableTextView
    buttonToggle.setOnClickListener(new View.OnClickListener()
    {
        @Override
        public void onClick(final View v)
        {
            expandableTextView.toggle();
            buttonToggle.setText(expandableTextView.isExpanded() ? R.string.collapse : R.string.expand);
        }
    });

    // but, you can also do the checks yourself
    buttonToggle.setOnClickListener(new View.OnClickListener()
    {
        @Override
        public void onClick(final View v)
        {
            if (expandableTextView.isExpanded())
            {
                expandableTextView.collapse();
                buttonToggle.setText(R.string.expand);
            }
            else
            {
                expandableTextView.expand();
                buttonToggle.setText(R.string.collapse);
            }
        }
    });

    // listen for expand / collapse events
    expandableTextView.setOnExpandListener(new ExpandableTextView.OnExpandListener()
    {
        @Override
        public void onExpand(final ExpandableTextView view)
        {
            Log.d(TAG, "ExpandableTextView expanded");
        }

        @Override
        public void onCollapse(final ExpandableTextView view)
        {
            Log.d(TAG, "ExpandableTextView collapsed");
        }
    }); 
```

您可以轻松地将此库作为 gradle 依赖项添加到您的 Android 项目中。查看 Github 上的项目以获取更多说明：

[https://github.com/Blogcat/Android-ExpandableTextView](https://github.com/Blogcat/Android-ExpandableTextView)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-09-07T07:43:50.220

平滑扩展（使用 heigh 和[ObjectAnimator](http://developer.android.com/reference/android/animation/ObjectAnimator.html)）
仅供参考：需要 API 11

```
public static void expandCollapsedByMaxLines(@NonNull final TextView text) {
    final int height = text.getMeasuredHeight();
    text.setHeight(height);
    text.setMaxLines(Integer.MAX_VALUE); //expand fully
    text.measure(View.MeasureSpec.makeMeasureSpec(text.getMeasuredWidth(), View.MeasureSpec.EXACTLY), View.MeasureSpec.makeMeasureSpec(ViewGroup.LayoutParams.WRAP_CONTENT, View.MeasureSpec.UNSPECIFIED));
    final int newHeight = text.getMeasuredHeight();
    ObjectAnimator animation = ObjectAnimator.ofInt(text, "height", height, newHeight);
    animation.setDuration(250).start();
} 
```

PS 我假设 TextView 受 maxLines 限制。
PSS 感谢[Amgi82](https://stackoverflow.com/users/2570623/amagi82)提供 ObjectAnimator 示例

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-10-03T07:34:27.633

如果你想根据行数来做，这里有一种方法：

（完整代码的[要点）](https://gist.github.com/vedant1811/21f536dcc94dd7f00801)

```
/**
 * Ellipsize the text when the lines of text exceeds the value provided by {@link #makeExpandable} methods.
 * Appends {@link #MORE} or {@link #LESS} as needed.
 * TODO: add animation
 * Created by vedant on 3/10/15.
 */
public class ExpandableTextView extends TextView {
    private static final String TAG = "ExpandableTextView";
    private static final String ELLIPSIZE = "... ";
    private static final String MORE = "more";
    private static final String LESS = "less";

    private String mFullText;
    private int mMaxLines;

    //...constructors...

    public void makeExpandable(String fullText, int maxLines) {
        mFullText =fullText;
        mMaxLines = maxLines;
        ViewTreeObserver vto = getViewTreeObserver();
        vto.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                ViewTreeObserver obs = getViewTreeObserver();
                obs.removeOnGlobalLayoutListener(this);
                if (getLineCount() <= maxLines) {
                    setText(mFullText);
                } else {
                    setMovementMethod(LinkMovementMethod.getInstance());
                    showLess();
                }
            }
        });
    }

    /**
     * truncate text and append a clickable {@link #MORE}
     */
    private void showLess() {
        int lineEndIndex = getLayout().getLineEnd(mMaxLines - 1);
        String newText = mFullText.substring(0, lineEndIndex - (ELLIPSIZE.length() + MORE.length() + 1))
                + ELLIPSIZE + MORE;
        SpannableStringBuilder builder = new SpannableStringBuilder(newText);
        builder.setSpan(new ClickableSpan() {
            @Override
            public void onClick(View widget) {
                showMore();
            }
        }, newText.length() - MORE.length(), newText.length(), 0);
        setText(builder, BufferType.SPANNABLE);
    }

    /**
     * show full text and append a clickable {@link #LESS}
     */
    private void showMore() {
        // create a text like subText + ELLIPSIZE + MORE
        SpannableStringBuilder builder = new SpannableStringBuilder(mFullText + LESS);
        builder.setSpan(new ClickableSpan() {
            @Override
            public void onClick(View widget) {
                showLess();
            }
        }, builder.length() - LESS.length(), builder.length(), 0);
        setText(builder, BufferType.SPANNABLE);
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-12-08T18:51:53.497

以下是使用上述一些响应对我有用的方法（我在示例中使用的是 ButterKnife）：

```
private static final MAX_LINE_COUNT = 3;    

@Bind(R.id.description)
TextView mDescription;    

@Override
protected void onCreate(Bundle savedInstanceState) {

  if(!TextUtils.isEmpty(mDescription)) {
    mDescription.setText(mItem.description);
    mDescription.setMaxLines(MAX_LINE_COUNT);
    mDescription.setEllipsize(TextUtils.TruncateAt.END);
  } else {
    mDescription.setVisibility(View.GONE);
  }

}

@OnClick(R.id.description)
void collapseExpandTextView(TextView tv) {

    if (tv.getMaxLines() == MAX_LINE_COUNT) {
        // collapsed - expand it
        tv.setEllipsize(null);
        tv.setMaxLines(Integer.MAX_VALUE);
    } else {
        // expanded - collapse it
        tv.setEllipsize(TextUtils.TruncateAt.END);
        tv.setMaxLines(MAX_LINE_COUNT);
    }

    ObjectAnimator animation = ObjectAnimator.ofInt(tv, "maxLines", tv.getMaxLines());
    animation.setDuration(200).start();
} 
```

当用户单击描述时，它将根据最大行折叠或展开。**这仅适用于 API 16+。**

我遇到的问题是行数在点处返回零，而行数和最大计数在某些点处是相同的值。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-10-22T21:16:09.953

你可以做这样的事情。它适用于任何类型的视图，无论是普通视图，还是 ListView 或 RecyclerView 中的视图：

在`onCreate()`或类似的地方，添加：

```
// initialize integers
int collapsedHeight, expandedHeight;

// get collapsed height after TextView is drawn
textView.post(new Runnable() {
    @Override
    public void run() {
        collapsedHeight = textView.getMeasuredHeight();
    }
});

// view that will expand/collapse your TextView
view.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        // number of max lines when collapsed
        if (textView.getMaxLines() == 2) {
            // expand
            textView.setMaxLines(Integer.MAX_VALUE);
            textView.measure(View.MeasureSpec.makeMeasureSpec(notifMessage.getMeasuredWidth(), View.MeasureSpec.EXACTLY), View.MeasureSpec.makeMeasureSpec(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED));
            expandedHeight = textView.getMeasuredHeight();
            ObjectAnimator animation = ObjectAnimator.ofInt(textView, "height", collapsedHeight, expandedHeight);
            animation.setDuration(250).start();
        } else {
            // collapse
            ObjectAnimator animation = ObjectAnimator.ofInt(textView, "height", expandedHeight, collapsedHeight);
            animation.addListener(new Animator.AnimatorListener() {
                @Override
                public void onAnimationStart(Animator animator) {

                }

                @Override
                public void onAnimationEnd(Animator animator) {
                    // number of max lines when collapsed
                    textView.setMaxLines(2);
                }

                @Override
                public void onAnimationCancel(Animator animator) {

                }

                @Override
                public void onAnimationRepeat(Animator animator) {

                }
            });
            animation.setDuration(250).start();
        }
    }
}); 
```

这将允许您通过单击所需的任何视图来展开/折叠 TextView。（您当然也可以选择 TextView 本身）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-11-07T10:27:19.603

您可以将新的 TransitionManager 用于动画并调用 maxLines 属性来设置数量

```
fun toggleReadMoreTextView(linesWhenCollapsed: Float) {
    if (viewDataBinding.textView.maxLines != Integer.MAX_VALUE) {
        // exapand
        viewDataBinding.textView.maxLines = Integer.MAX_VALUE
    } else {
        // collapse
        viewDataBinding.textView.maxLines = linesWhenCollapsed
    }
    // start animation
    TransitionManager.beginDelayedTransition(viewDataBinding.constraintLayout)
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-12-25T10:41:24.817

请参阅下面的链接以获取可扩展的 TextView，其中包含多行和更少文本的选项。

[可调整大小的文本视图（查看更多和更少查看）](http://www.androidmaster.info/android-resizeable-text-viewview-more-and-view-less-example/)

在 TextView 中设置文本后，在 Java 类中添加以下行。

```
// YourCustomeClass.class [your customized class]
// yourTextView [ TextView yourTextView = findViewById(R.id.yourTextView) ];

YourCustomeClass.doResizeTextView(yourTextView, 3, "More", true);

// 3 - No of lines after user wants to expand it. 
// "More" : text want to see end of your TextView after shrink
// True : flag for viewMore 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-25T20:04:19.973

[Cliffus 的回答](https://stackoverflow.com/a/37183425/5496177)与我所寻找的很接近，但它不支持使用该`setMaxLines()`方法，当您无法通过 XML 设置最大行数时会导致问题。

我已经[分叉了他们的库](https://github.com/zacharee/Android-ExpandableTextView)并做到了，这样使用`setMaxLines()`就不会破坏展开/折叠动作。我还更新了 Gradle 配置并将其迁移到 AndroidX。否则，用法与以前相同。

您可以使用 Jitpack 将其包含在您的项目中：

```
allprojects {
    repositories {
        ...
        maven { url 'https://jitpack.io' }
    }
} 
```

```
dependencies {
    implementation 'com.github.zacharee:Android-ExpandableTextView:Tag'
} 
```

`Tag`最新的提交标签在哪里（ [https://jitpack.io/#zacharee/Android-ExpandableTextView/](https://jitpack.io/#zacharee/Android-ExpandableTextView/)）。

用法与原始库的用法完全相同。在您的 XML 中包含 ExpandableTextView：

```
<at.blogc.android.views.ExpandableTextView
    ...
    android:maxLines="10"
    /> 
```

并在代码中展开/折叠：

```
if (expandable.isExpanded) {
    expandable.collapse()
else {
    expandable.expand()
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-16T14:33:47.863

这是一个具有类似方法的仓库： [https ://github.com/CorradiSebastian/ExpandableTextView](https://github.com/CorradiSebastian/ExpandableTextView)

它来自这个问题：

[自定义可扩展 TextView](https://stackoverflow.com/questions/52795628/custom-expandable-textview)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-20T11:25:38.570

[现在，使用这个很棒的库ExpandableTextView](https://github.com/Manabu-GT/ExpandableTextView)为请求的 TextView 提供动画和所有必需的控件变得更加容易，在这个库中，您只需将其添加到您的 gradle 中，然后在您的 xml 中定义如下：

```
 <com.ms.square.android.expandabletextview.ExpandableTextView
      xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:expandableTextView="http://schemas.android.com/apk/res-auto"
      android:id="@+id/expand_text_view"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      expandableTextView:maxCollapsedLines="4"
      expandableTextView:animDuration="200">
      <TextView
          android:id="@id/expandable_text"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:layout_marginLeft="10dp"
          android:layout_marginRight="10dp"
          android:textSize="16sp"
          android:textColor="#666666" />
      <ImageButton
          android:id="@id/expand_collapse"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:padding="16dp"
          android:layout_gravity="right|bottom"
          android:background="@android:color/transparent"/>
  </com.ms.square.android.expandabletextview.ExpandableTextView> 
```

然后在您的代码中使用它，例如：

```
TextView expandableTextView = (ExpandableTextView) findViewById(R.id.expand_text_view); 
```

如您所见，您可以控制所需的最大行数和动画持续时间以及 TextView 扩展技术所需的所有设置。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-01-07T00:55:09.020

主要是为了在文本末尾添加“查看更多”的情况，我向您展示我的截断文本视图。经过大量实验后，在 RecyclerView 项目视图中加载这些文本视图时，它似乎可以无缝工作。

```
package com.example.android.widgets;

import android.content.Context;
import android.support.annotation.Nullable;
import android.support.v7.widget.AppCompatTextView;
import android.text.Spannable;
import android.text.SpannableString;
import android.text.TextUtils;
import android.text.style.ForegroundColorSpan;
import android.text.style.RelativeSizeSpan;
import android.util.AttributeSet;

import com.example.android.R;

public class TruncatingTextView extends AppCompatTextView {
    public static final String TWO_SPACES = "  ";

    private int truncateAfter = Integer.MAX_VALUE;

    private String suffix;
    private RelativeSizeSpan truncateTextSpan = new RelativeSizeSpan(0.75f);
    private ForegroundColorSpan viewMoreTextSpan = new ForegroundColorSpan(Color.BLUE);
    private static final String MORE_STRING = getContext().getString(R.string.more);

    private static final String ELLIPSIS = getContext().getString(R.string.ellipsis);

    public TruncatingTextView(Context context) {
        super(context);
    }

    public TruncatingTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public TruncatingTextView(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    public void setText(CharSequence fullText, @Nullable CharSequence afterTruncation, int truncateAfterLineCount) {
        this.suffix = TWO_SPACES + MORE_STRING;

        if (!TextUtils.isEmpty(afterTruncation)) {
            suffix += TWO_SPACES + afterTruncation;
        }

        // Don't call setMaxLines() unless we have to, since it does a redraw.
        if (this.truncateAfter != truncateAfterLineCount) {
            this.truncateAfter = truncateAfterLineCount;
            setMaxLines(truncateAfter);
        }

        setText(fullText);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        if (getLayout() != null && getLayout().getLineCount() > truncateAfter) {
            int lastCharToShowOfFullTextAfterTruncation = getLayout().getLineVisibleEnd(truncateAfter - 1) - suffix.length() - ELLIPSIS.length();

            if (getText().length() <= lastCharToShowOfFullTextAfterTruncation) {
                // No idea why this would be the case, but to prevent a crash, here it is. Besides, if this is true, we should be less than our maximum lines and thus good to go.
                return;
            }

            int startIndexOfMoreString = lastCharToShowOfFullTextAfterTruncation + TWO_SPACES.length() + 1;

            SpannableString truncatedSpannableString = new SpannableString(getText().subSequence(0, lastCharToShowOfFullTextAfterTruncation) + ELLIPSIS + suffix);
            truncatedSpannableString.setSpan(truncateTextSpan, startIndexOfMoreString, truncatedSpannableString.length(), Spannable.SPAN_EXCLUSIVE_INCLUSIVE);
            truncatedSpannableString.setSpan(viewMoreTextSpan, startIndexOfMoreString, startIndexOfMoreString + MORE_STRING.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
            setText(truncatedSpannableString);
        }
    }
} 
```

您始终可以选择为 truncateAfter 添加自己的属性，并使用上述任何答案添加展开/折叠动画（我没有编写处理展开/折叠的代码，但使用上述动画答案之一很容易完成）。

对于那些试图为他们的文本视图找到“查看更多”功能的其他人，我把它放在这里更多。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-09-27T09:44:56.700

在 ListView 或 RecyclerView 中，我们总是使用 OnPreDrawListener 而不是使用 OnGlobalLayoutListener。在开始时也会为不可见的行触发此回调。来自官方文档：

```
private void makeTextViewResizable(final TextView tv, final int maxLine, final String expandText, final boolean viewMore){
        try {
            if (tv.getTag() == null) {
                tv.setTag(tv.getText());
            }
            //OnGlobalLayoutListener
            ViewTreeObserver vto = tv.getViewTreeObserver();
            vto.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {

                @Override
                public boolean onPreDraw() {

                        ViewTreeObserver obs = tv.getViewTreeObserver();
                       // obs.removeGlobalOnLayoutListener((ViewTreeObserver.OnGlobalLayoutListener) mActivity);
                        obs.removeOnPreDrawListener(this);
                        if (maxLine == 0) {
                            int lineEndIndex = tv.getLayout().getLineEnd(0);
                            String text = tv.getText().subSequence(0, lineEndIndex - expandText.length() + 1) + " " + expandText;
                            tv.setText(text);
                            tv.setMovementMethod(LinkMovementMethod.getInstance());
                            tv.setText(
                                    addClickablePartTextViewResizable(Html.fromHtml(tv.getText().toString()), tv, expandText,
                                            viewMore), TextView.BufferType.SPANNABLE);
                        } else if (maxLine > 0 && tv.getLineCount() >= maxLine) {
                            int lineEndIndex = tv.getLayout().getLineEnd(maxLine - 1);
                            String text = tv.getText().subSequence(0, lineEndIndex - expandText.length() + 1) + " " + expandText;
                            tv.setText(text);
                            tv.setMovementMethod(LinkMovementMethod.getInstance());
                            tv.setText(
                                    addClickablePartTextViewResizable(Html.fromHtml(tv.getText().toString()), tv, expandText,
                                            viewMore), TextView.BufferType.SPANNABLE);
                        } else {
                            int lineEndIndex = tv.getLayout().getLineEnd(tv.getLayout().getLineCount() - 1);
                            String text = tv.getText().subSequence(0, lineEndIndex) + " " + expandText;
                            tv.setText(text);
                            tv.setMovementMethod(LinkMovementMethod.getInstance());
                            tv.setText(
                                    addClickablePartTextViewResizable(Html.fromHtml(tv.getText().toString()), tv, expandText,
                                            viewMore), TextView.BufferType.SPANNABLE);
                        }

                    return true;
                }

            });
        } catch (Exception e) {
            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-12-05T18:07:48.867

在您的应用模块 gradle 中添加依赖项

```
dependencies {
          implementation 'com.github.arshadbinhamza:ViewMore:1.0.9'
}

 //        ViewMoreHolder.load(textView_description,text, Typeface of end Text,UnderLine,number_of_lines,click_for_end_text_only);
  //  ViewMoreHolder.load(tv_description,description, Typeface.DEFAULT,true,3,false); 
```

请查看我添加的示例（这是从以前的答案中提取的针对我的应用程序要求的解决方案）。我们可以根据请求更新/增强库

[https://github.com/arshadbinhamza/ViewMore](https://github.com/arshadbinhamza/ViewMore)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-10-06T11:47:01.787

[![在此处输入图像描述](../Images/6a6aebf7eca05ca289810efd2f0dd02f.png)](https://i.stack.imgur.com/VaV4q.png)

[![在此处输入图像描述](../Images/0981d5d8c1cde8a2d072e8a64ebf883e.png)](https://i.stack.imgur.com/QEus4.png)

**步骤1**

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient
        android:startColor="#11FFFFFF"
        android:centerColor="#33FFFFFF"
        android:endColor="#99FFFFFF"
        android:angle="270" />
</shape> 
```

**第2步**

```
<TextView
    android:id="@+id/overviewText"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_marginTop="8dp"
    android:maxLines="3"
    app:layout_constraintEnd_toEndOf="parent"
    app:layout_constraintHorizontal_bias="0.0"
    app:layout_constraintStart_toStartOf="@+id/textView8"
    app:layout_constraintTop_toBottomOf="@+id/textView8" />

    <ImageView
        android:id="@+id/seeMoreImage"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:background="@drawable/background_white"
        android:visibility="invisible"
        app:layout_constraintBottom_toBottomOf="@+id/overviewText"
        app:layout_constraintEnd_toEndOf="@+id/overviewText"
        app:layout_constraintStart_toStartOf="@+id/overviewText"
        app:srcCompat="@drawable/ic_arrow_down"
        tools:ignore="VectorDrawableCompat" /> 
```

**第 3 步**

```
 var isTextViewClicked = true
    if (binding.overviewText.lineCount > 3)
        binding.seeMoreImage.visibility = View.VISIBLE
    binding.seeMoreImage.setOnClickListener {
        isTextViewClicked = if(isTextViewClicked){
            binding.overviewText.maxLines = Integer.MAX_VALUE
            binding.seeMoreImage.setImageResource(R.drawable.ic_arrow_up)
            false
        } else {
            binding.overviewText.maxLines = 3
            binding.seeMoreImage.setImageResource(R.drawable.ic_arrow_down)
            true
        }
    } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-05-20T10:17:52.487

创建没有库和自定义类的简单解决方案。

首先使用（例如）两个创建 item.xml `TextView`。一个用于显示文本，它将被扩展，另一个用于按钮 - “显示更多”。

```
...

<TextView
    android:id="@+id/item_info_text"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="16sp"
    tools:text="Test long text info\nTest long text info\nTest long text info\nTest long text info | Test long text info | Test long text info"
    android:maxLines="@integer/info_collected_lines"
    android:fontFamily="@string/font_roboto_regular"
    android:textColor="@color/text_second"
    android:layout_marginTop="8dp"
    android:ellipsize="end"/>

<TextView
    android:id="@+id/item_more_text"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="12sp"
    android:text="@string/see_more"
    android:singleLine="true"
    android:fontFamily="@string/font_roboto_regular"
    android:textColor="@color/text_accent"
    android:ellipsize="marquee"/>

... 
```

其他资源：

```
<color name="text_accent">#0070AA</color>
<color name="text_second">#616161</color>

<string name="font_roboto_regular" translatable="false">sans-serif</string>
<string name="font_roboto_medium" translatable="false">sans-serif-medium</string>

<string name="see_more">Show more</string>

<integer name="club_info_collected_lines">4</integer>
<integer name="club_info_expanded_lines">10</integer> 
```

它看起来像这样：

[![XML 布局预览](../Images/7287307c65e0e830970ff745443e8940.png)](https://i.stack.imgur.com/FPllx.png)

下一步是为展开文本添加逻辑。我们在里面做`RecyclerView.ViewHolder`：

```
class ItemHolder(view: View) : RecyclerView.ViewHolder(view) {

    ...

    private val infoText = view.findViewById<TextView>(R.id.item_info_text)
    private val moreText = view.findViewById<TextView>(R.id.item_more_text)

    fun bind(item: Item, callback: Callback) {
        infoText.text = item.info

        // This is extension (show code later) need for getting correct [TextView.getLineCount]. Because before draw view it always == 0.
        infoText.afterLayoutConfiguration {
            val hasEllipsize = infoText.layout.getEllipsisCount(infoText.lineCount - 1) > 0

            moreText.visibility = if (hasEllipsize) View.VISIBLE else View.GONE

            if (hasEllipsize) {
                val maxLines = itemView.context.resources.getInteger(R.integer.club_info_expanded_lines)
                moreText.setOnClickListener {
                    infoText.maxLines = maxLines
                    it.visibility = View.GONE
                }
            }
        }

        ...
    }

    // Call this inside [RecyclerView.Adapter.onViewRecycled] for prevent memory leaks.
    fun unbind() {
        moreText.setOnClickListener(null)
    }
} 
```

扩大：

```
/**
 * Function for detect when layout completely configure.
 */
fun View.afterLayoutConfiguration(func: () -> Unit) {
    viewTreeObserver?.addOnGlobalLayoutListener(object : ViewTreeObserver.OnGlobalLayoutListener {
        override fun onGlobalLayout() {
            viewTreeObserver?.removeOnGlobalLayoutListener(this)
            func()
        }
    })
} 
```

我尝试使用动画，`TransitionManager.beginDelayedTransition`但里面看起来很丑`RecyclerView`。就像没有任何动画的样子。

# android - 角度 ng-view phonegap 不起作用

> ID：15627536
> 
> 赞同：0
> 
> 时间：2013-03-26T00:57:52.020
> 
> 标签：android, cordova, angularjs, angular-routing

我正在尝试在 android 中使用 angularjs 和 phonegap 制作基本应用程序。但这似乎不起作用。以下是我的源代码文件：

索引.html

```
 <!DOCTYPE html>
<html ng-app="main-app">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Insert title here</title>
</head>
<body>
<div class="body-content" ng-controller="MainCtrl">
    <div class="loader-ajax" ng-show="isViewLoading"></div>
    <div ng-view></div>
</div>
    <script src="js/angular.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="cordova-2.3.0.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
            app.initialize();
    </script>
</body>
</html> 
```

main.js

```
var mobileApp = angular.module("main-app", []);

mobileApp.config(function ($routeProvider,$compileProvider) {

    $routeProvider
        .when("/",
        {
            templateUrl: "partial/home.html",
            controller: "homeController"
        })
        .when("/home",
        {
            templateUrl: "partial/home.html",
            controller: "homeController"
        });
    $compileProvider.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel):/);
});
mobileApp.controller("MainCtrl",function($scope){
    alert('Coming here');
    $scope.isViewLoading=true;
});
mobileApp.controller("homeController",function($scope){
    alert('Home Coming here');

}); 
```

index.js

```
var app = {
    initialize: function() {
        this.bind();
    },
    bind: function() {
        document.addEventListener('deviceready', this.deviceready, false);
    },
    deviceready: function() {
        // note that this is an event handler so the scope is that of the event
        // so we need to call app.report(), and not this.report()
        app.report('deviceready');
        angular.bootstrap(document, ['main-app']);
    },
    report: function(id) { 
        console.log("report:" + id);
    }
}; 
```

当应用程序加载时，路由器似乎无法正常工作，因为它没有进入 Homecontroller。

从我在其他地方准备的内容来看，这段代码应该可以工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:58:53.037

我有同样的问题，我刚刚找到了解决方案。看看[Angular ng-view/routing not working in PhoneGap](https://stackoverflow.com/questions/15105910/angular-ng-view-routing-not-working-in-phonegap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:19:16.327

移动 `app.initialize();`到[PhoneGap 的 deviceready 事件](http://docs.phonegap.com/en/2.5.0/cordova_events_events.md.html#deviceready)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-16T19:13:16.477

我遇到了这个问题——我坚持了 3 个晚上——最终我将路由中的模板名称与实际文件名进行了比较——确保大小写匹配。

# ios - iOS6 应用程序在后台崩溃。如何解码崩溃日志？

> ID：15627537
> 
> 赞同：1
> 
> 时间：2013-03-26T00:57:52.177
> 
> 标签：ios, objective-c, cocoa-touch, background, crash

我的应用程序不断在后台崩溃。我确实有一些正在运行的后台任务连接到 Web 服务。我尝试过进行这些同步和异步调用。似乎没有任何帮助。令人抓狂的部分是崩溃日志没有告诉我究竟是什么导致了崩溃。除了我没有正确或在 600 秒内结束我的后台任务这一事实之外。回溯如何告诉我应用程序的位置以及导致崩溃的线程？

我也不确定崩溃是否是因为当应用程序已经在后台时，然后我调用了 web 服务并且它从未返回（即使我现在正在使用同步）或者是因为我在连接到 web 服务时应用程序进入后台，这就是导致崩溃的原因。

我已阅读有关此的所有 SO 帖子。此外，它永远不会在模拟器上使用后台应用程序以及我关闭网络或重新打开它时中断。请帮忙？

```
Hardware Model:      iPhone4,1
Process:         MyApp [6705]
Path:            /var/mobile/Applications/162096EB-66CC-46DB-916F-98ED5888CA26/MyApp.app/MyApp
Identifier:      MyApp
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-03-25 16:38:14.384 -0500
OS Version:      iOS 6.1.2 (10B146)
Report Version:  104

Exception Type:  00000020
Exception Codes: 0x000000008badf00d
Highlighted Thread:  0

Application Specific Information:
MyApp[6705] has active assertions beyond permitted time: 
{(
    <BKProcessAssertion: 0x1d569690> identifier: UIKitBackgroundCompletionTask process: MyApp[6705] permittedBackgroundDuration: 600.000000 reason: finishTask owner pid:6705 preventSuspend  preventIdleSleep ,
    <BKProcessAssertion: 0x1d56abb0> identifier: UIKitBackgroundCompletionTask process: MyApp[6705] permittedBackgroundDuration: 600.000000 reason: finishTask owner pid:6705 preventSuspend  preventIdleSleep ,
    <BKProcessAssertion: 0x1d56b580> identifier: UIKitBackgroundCompletionTask process: MyApp[6705] permittedBackgroundDuration: 600.000000 reason: finishTask owner pid:6705 preventSuspend  preventIdleSleep 
)}

Elapsed total CPU time (seconds): 58.900 (user 58.900, system 0.000), 5% CPU 
Elapsed application CPU time (seconds): 5.047, 0% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib          0x3a599eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3a59a048 mach_msg + 36
2   CoreFoundation                  0x32364040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x32362d5a __CFRunLoopRun + 810
4   CoreFoundation                  0x322d5eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x322d5d44 CFRunLoopRunInMode + 100
6   GraphicsServices                0x35eac2e6 GSEventRunModal + 70
7   UIKit                           0x341eb2fc UIApplicationMain + 1116
8   MyApp                       0x0006ff20 main (main.m:14)
9   libdyld.dylib                   0x3a4e3b1c start + 0

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x3a59a648 kevent64 + 24
1   libdispatch.dylib               0x3a4ca974 _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x3a4ca654 _dispatch_mgr_thread$VARIANT$mp + 32

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x3a599eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3a59a048 mach_msg + 36
2   CoreFoundation                  0x32364040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x32362d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x322d5eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x322d5d44 CFRunLoopRunInMode + 100
6   WebCore                         0x382df500 _ZL12RunWebThreadPv + 440
7   libsystem_c.dylib               0x3a50330e _pthread_start + 306
8   libsystem_c.dylib               0x3a5031d4 thread_start + 4

Thread 3 name:  com.apple.NSURLConnectionLoader
Thread 3:
0   libsystem_kernel.dylib          0x3a599eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3a59a048 mach_msg + 36
2   CoreFoundation                  0x32364040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x32362d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x322d5eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x322d5d44 CFRunLoopRunInMode + 100
6   Foundation                      0x32c223d0 +[NSURLConnection(Loader) _resourceLoadLoop:] + 304
7   Foundation                      0x32ca5e80 __NSThread__main__ + 968
8   libsystem_c.dylib               0x3a50330e _pthread_start + 306
9   libsystem_c.dylib               0x3a5031d4 thread_start + 4

Thread 4 name:  com.apple.CFSocket.private
Thread 4:
0   libsystem_kernel.dylib          0x3a5aa594 __select + 20
1   CoreFoundation                  0x323681f2 __CFSocketManager + 674
2   libsystem_c.dylib               0x3a50330e _pthread_start + 306
3   libsystem_c.dylib               0x3a5031d4 thread_start + 4

Thread 5 name:  AQClient
Thread 5:
0   libsystem_kernel.dylib          0x3a599eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3a59a048 mach_msg + 36
2   CoreFoundation                  0x32364040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x32362d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x322d5eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x322d5d44 CFRunLoopRunInMode + 100
6   AudioToolbox                    0x31db76fe GenericRunLoopThread::Entry(void*) + 134
7   AudioToolbox                    0x31d98882 CAPThread::Entry(CAPThread*) + 294
8   libsystem_c.dylib               0x3a50330e _pthread_start + 306
9   libsystem_c.dylib               0x3a5031d4 thread_start + 4

Thread 6 name:  JavaScriptCore::BlockFree
Thread 6:
0   libsystem_kernel.dylib          0x3a5aa08c __psynch_cvwait + 24
1   libsystem_c.dylib               0x3a4fbd2a _pthread_cond_wait + 642
2   libsystem_c.dylib               0x3a4fbaa0 pthread_cond_timedwait + 40
3   JavaScriptCore                  0x362a2c70 WTF::ThreadCondition::timedWait(WTF::Mutex&, double) + 104
4   JavaScriptCore                  0x363b4552 JSC::BlockAllocator::blockFreeingThreadMain() + 78
5   JavaScriptCore                  0x363c6fa8 _ZN3WTFL19wtfThreadEntryPointEPv + 12
6   libsystem_c.dylib               0x3a50330e _pthread_start + 306
7   libsystem_c.dylib               0x3a5031d4 thread_start + 4

Thread 7 name:  JavaScriptCore::Marking
Thread 7:
0   libsystem_kernel.dylib          0x3a5aa08c __psynch_cvwait + 24
1   libsystem_c.dylib               0x3a4fbd2a _pthread_cond_wait + 642
2   libsystem_c.dylib               0x3a505f14 pthread_cond_wait + 36
3   JavaScriptCore                  0x36347f3c JSC::SlotVisitor::drainFromShared(JSC::SlotVisitor::SharedDrainMode) + 144
4   JavaScriptCore                  0x36347e7c JSC::MarkStackThreadSharedData::markingThreadMain() + 140
5   JavaScriptCore                  0x363c6fa8 _ZN3WTFL19wtfThreadEntryPointEPv + 12
6   libsystem_c.dylib               0x3a50330e _pthread_start + 306
7   libsystem_c.dylib               0x3a5031d4 thread_start + 4

Thread 8:
0   libsystem_kernel.dylib          0x3a5aad98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a4f8cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3a4f8a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3a4f88a0 start_wqthread + 4

Thread 9:
0   libsystem_kernel.dylib          0x3a5aad98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a4f8cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3a4f8a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3a4f88a0 start_wqthread + 4

Thread 10:
0   libsystem_kernel.dylib          0x3a5aad98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a4f8cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3a4f8a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3a4f88a0 start_wqthread + 4

Thread 11:
0   libsystem_kernel.dylib          0x3a5aad98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a4f8cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3a4f8a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3a4f88a0 start_wqthread + 4

Unknown thread crashed with unknown flavor: 5, state_count: 1

Binary Images:
   0x6e000 -    0xd0fff +MyApp armv7  <12ba291b4714399cb208b80115eeabbe> /var/mobile/Applications/162096EB-66CC-46DB-916F-98ED5888CA26/MyApp.app/MyApp
0x2fe50000 - 0x2fe70fff  dyld armv7  <454baf45f9a831aa88e1ea4447c58d4e> /usr/lib/dyld
0x3139d000 - 0x314a6fff  IMGSGX543GLDriver armv7  <609224802968399ca46e3b0db6af8a08> /System/Library/Extensions/IMGSGX543GLDriver.bundle/IMGSGX543GLDriver
0x314b0000 - 0x31596fff  AVFoundation armv7  <320761e836883aeabf3cb5c53edb636d> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x31597000 - 0x31597fff  Accelerate armv7  <b68ff92e404931f3bcb6361720f77724> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x31598000 - 0x316d6fff  vImage armv7  <30522b92940d3dd184c8e46780594048> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x316d7000 - 0x317bafff  libBLAS.dylib armv7  <d8edada1cea133458ca779e34a3a7f88> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x317bb000 - 0x31a70fff  libLAPACK.dylib armv7  <9e08aead79d13043bab622402a270fba> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x31a71000 - 0x31acafff  libvDSP.dylib armv7  <09e2a5e3e9203950890ba57592523132> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x31acb000 - 0x31adcfff  libvMisc.dylib armv7  <7b7d4ccc9f2b364cb0da4251e745545d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x31add000 - 0x31addfff  vecLib armv7  <a7751c047dcc35ba8885212e1938b93f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x31ade000 - 0x31aeffff  Accounts armv7  <ea2de358b6cc3baab27d6ab809c31e39> /System/Library/Frameworks/Accounts.framework/Accounts
0x31af1000 - 0x31b55fff  AddressBook armv7  <3001f4364f9d3222b2a500a9f6897af8> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x31c20000 - 0x31d5afff  AudioCodecs armv7  <e5fa86b788b133178bb2b64d6a817708> /System/Library/Frameworks/AudioToolbox.framework/AudioCodecs
0x31d5b000 - 0x31fe3fff  AudioToolbox armv7  <bb11489c87e93a3b8c26aa995a2fdec9> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x31fe4000 - 0x320a9fff  CFNetwork armv7  <4771a5e4f9b83bceb252f0f3d166aaca> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x320aa000 - 0x32100fff  CoreAudio armv7  <5d534dbf76ff30f4a628f25f56c5f26a> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x32114000 - 0x322ccfff  CoreData armv7  <3930f672c76535a2abb768ee59958fa7> /System/Library/Frameworks/CoreData.framework/CoreData
0x322cd000 - 0x323fffff  CoreFoundation armv7  <fcb8d4e838543bcb9a52c9f232b8b4eb> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x32400000 - 0x32538fff  CoreGraphics armv7  <81e213f810a034d4ba411f9b505da2a6> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x3253a000 - 0x32575fff  libCGFreetype.A.dylib armv7  <a5d20b80ab1532d8831027a66d2d9eb5> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x32759000 - 0x32774fff  libRIP.A.dylib armv7  <ec1487f9bdb93597a3f8d434406ad9bf> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x32775000 - 0x3282afff  CoreImage armv7  <6ae4ae2461313e3f84c6a8102d5b1b0e> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x3282b000 - 0x32883fff  CoreLocation armv7  <4107e94cdf043d6089e99cbd30631b07> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x328b8000 - 0x3291dfff  CoreMedia armv7  <8592bdc268b83b8886acfc1fdab649ed> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x3291e000 - 0x329a6fff  CoreMotion armv7  <908cc54aecf5318e9719c4c9d70ef2e8> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x329a7000 - 0x329fdfff  CoreTelephony armv7  <c5a2e59bb15d35b8a8e356e129b78b5e> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x329fe000 - 0x32a60fff  CoreText armv7  <e135debbc8f937299f4986fc3e9459e3> /System/Library/Frameworks/CoreText.framework/CoreText
0x32a61000 - 0x32a70fff  CoreVideo armv7  <00f18bb26e663da9ae251a6ec36a19ec> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x32bf5000 - 0x32db8fff  Foundation armv7  <0179934581d13346aa7583165108b95c> /System/Library/Frameworks/Foundation.framework/Foundation
0x32f73000 - 0x32fbcfff  IOKit armv7  <a98ba9fefc7333e4a5a9169198848c62> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x32fbd000 - 0x33195fff  ImageIO armv7  <b5ce84bb074d3de4b07b55da9fd8bfd1> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x33196000 - 0x3320efff  MapKit armv7  <5c9f761b48a7381b818e253b56fc252f> /System/Library/Frameworks/MapKit.framework/MapKit
0x333aa000 - 0x33624fff  MediaToolbox armv7  <ed439fc5c9a03f8b9fae43af33de8a57> /System/Library/Frameworks/MediaToolbox.framework/MediaToolbox
0x336ac000 - 0x33705fff  MobileCoreServices armv7  <77da8a9e7f813f5baf37eaa4a87fae84> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x33732000 - 0x337f3fff  GLEngine armv7  <b3fd8a93778b317fab8630340a2d741b> /System/Library/Frameworks/OpenGLES.framework/GLEngine.bundle/GLEngine
0x337f4000 - 0x337fbfff  OpenGLES armv7  <f2ede6b206f336de82cc38619692e762> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x337fd000 - 0x337fdfff  libCVMSPluginSupport.dylib armv7  <2506af1c983f3f09ac69aca44f67e863> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x337fe000 - 0x33800fff  libCoreFSCache.dylib armv7  <761c0f0e263c3d39adbb5bf789cedde1> /System/Library/Frameworks/OpenGLES.framework/libCoreFSCache.dylib
0x33801000 - 0x33803fff  libCoreVMClient.dylib armv7  <af6ff28dce6031baaa850ccc79e5699b> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x33804000 - 0x33808fff  libGFXShared.dylib armv7  <a6ac1673a088379aa512ba5cac301f5b> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x33809000 - 0x33846fff  libGLImage.dylib armv7  <b8b8f3a1bfd0345e86aa0c2952534949> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x33847000 - 0x3396cfff  libGLProgrammability.dylib armv7  <0b3cb1b9a5003c4a975ec268cabca3fc> /System/Library/Frameworks/OpenGLES.framework/libGLProgrammability.dylib
0x33f41000 - 0x34056fff  QuartzCore armv7  <c086b6e6cd9d341399bcc3675c82f1fe> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x340a5000 - 0x340d3fff  Security armv7  <fbc24f15bd9e37539cdd6e3576bde938> /System/Library/Frameworks/Security.framework/Security
0x34142000 - 0x34151fff  StoreKit armv7  <e63a14831d2d315ba5cf654102d67f8c> /System/Library/Frameworks/StoreKit.framework/StoreKit
0x34152000 - 0x34191fff  SystemConfiguration armv7  <410d69b356e533d6a1d538cf33059634> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x34194000 - 0x346e8fff  UIKit armv7  <e138ca6a809b399691d933dd3d58d00e> /System/Library/Frameworks/UIKit.framework/UIKit
0x346e9000 - 0x34727fff  VideoToolbox armv7  <d2e8067306d9346ab4a448f10f336894> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
0x34728000 - 0x3473efff  iAd armv7  <e64ed3a1472d368e878a38e46803c73e> /System/Library/Frameworks/iAd.framework/iAd
0x34964000 - 0x34969fff  AITTarget armv7  <a06d2cb1f2c434fb8fcb57871a3075d2> /System/Library/PrivateFrameworks/AITTarget.framework/AITTarget
0x349bd000 - 0x349c9fff  AccountSettings armv7  <8db45acc4d3d3017af10fa5ee82c2306> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x34a15000 - 0x34a18fff  AggregateDictionary armv7  <a2170ad876f13ef1b944547913d05af2> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x34b15000 - 0x34e21fff  Altitude armv7  <d507155292c8341395d2cbde05ae448d> /System/Library/PrivateFrameworks/Altitude.framework/Altitude
0x34e44000 - 0x34e7ffff  AppSupport armv7  <921794b7d82a3558a0eb860979be199c> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x34ef2000 - 0x34efbfff  AssetsLibraryServices armv7  <de7ca29cd47433cd8eca9c04102f5508> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x34efc000 - 0x34f14fff  AssistantServices armv7  <fdec07136e153720bc82f5fae4de5f77> /System/Library/PrivateFrameworks/AssistantServices.framework/AssistantServices
0x34f2a000 - 0x34f41fff  BackBoardServices armv7  <585cc62d83c530ee82988de940c1e161> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices
0x34f4b000 - 0x34f6ffff  Bom armv7  <b5315d733e123a0781683efdc734064b> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x34fef000 - 0x34ff6fff  CaptiveNetwork armv7  <a4f4b86cc84839f78ff746f013bcee6f> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x34ff7000 - 0x350c1fff  Celestial armv7  <a688df527b65382da586ebc87f28c061> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x351a5000 - 0x351aafff  CommonUtilities armv7  <f8fea9ee6ca236b0a7fa6c00eb8a0d24> /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities
0x352b1000 - 0x352dafff  CoreHandwriting armv7  <560667170b94358a8c7c72fd5b4a5a3a> /System/Library/PrivateFrameworks/CoreHandwriting.framework/CoreHandwriting
0x35452000 - 0x3546ffff  CoreServicesInternal armv7  <09bda41ea1d935148d18c07a7102ede5> /System/Library/PrivateFrameworks/CoreServicesInternal.framework/CoreServicesInternal
0x35470000 - 0x35471fff  CoreSurface armv7  <6065f7e040e93d6ea2837e929592cc30> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x354de000 - 0x354e3fff  CrashReporterSupport armv7  <03ee46e3ca3f3920a7174e62096723fb> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x356b5000 - 0x356c7fff  DataAccessExpress armv7  <b9423867a9ef303b87d2e1eac1712957> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x356db000 - 0x356f0fff  DataDetectorsCore armv7  <58352df07a0139de878e5e275e27ab52> /System/Library/PrivateFrameworks/DataDetectorsCore.framework/DataDetectorsCore
0x356f2000 - 0x35705fff  DataDetectorsUI armv7  <331c11e50793340f9ce758435c9420ac> /System/Library/PrivateFrameworks/DataDetectorsUI.framework/DataDetectorsUI
0x35706000 - 0x35707fff  DataMigration armv7  <5903e08348b83f119022cbbf83ad100a> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x3570a000 - 0x35723fff  DictionaryServices armv7  <84669055e3e63d6ab56b8fe7b0476aaa> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x3572b000 - 0x35743fff  EAP8021X armv7  <82a73adcf1db3d2f9e57cd22f71e44c9> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x35758000 - 0x35795fff  FTServices armv7  <89c066d12a6031038a9b8c61221abc0a> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x35796000 - 0x35ba9fff  FaceCoreLight armv7  <43de0b31da3b39e4acf85ec2c8d5c65c> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x35bf6000 - 0x35bfbfff  libGPUSupportMercury.dylib armv7  <4366fa0d1a0938a794bd8346e286d6f8> /System/Library/PrivateFrameworks/GPUSupport.framework/libGPUSupportMercury.dylib
0x35da1000 - 0x35dadfff  GenerationalStorage armv7  <d77ad2367fff37d485480aa39df7d325> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x35dae000 - 0x35ea6fff  GeoServices armv7  <206a365f6bfe3278a9aecc1601015c7d> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x35ea7000 - 0x35eb2fff  GraphicsServices armv7  <d4b7fd6509753bff9525fef374ddc359> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x35ff5000 - 0x3605efff  IMAVCore armv7  <7cf5c5830730339484703ca3a03a9e2d> /System/Library/PrivateFrameworks/IMAVCore.framework/IMAVCore
0x3605f000 - 0x360d7fff  IMCore armv7  <d5f1d98ec53d3acbb51b116e93923d9c> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x3619e000 - 0x361eafff  IMFoundation armv7  <797535fc363c3f818bcd1424251393bf> /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation
0x361f1000 - 0x361f2fff  IOAccelerator armv7  <9655464326203d258d3d0fc7e94651e2> /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator
0x361f3000 - 0x361f8fff  IOMobileFramebuffer armv7  <f38c374982a931d5a47458dd3c34ac59> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x361f9000 - 0x361fdfff  IOSurface armv7  <a55bf03c35de3fd9b56dce82083c3d10> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x36242000 - 0x36246fff  IncomingCallFilter armv7  <1b921222496e3006bf6d1f66456ab2bb> /System/Library/PrivateFrameworks/IncomingCallFilter.framework/IncomingCallFilter
0x36247000 - 0x363edfff  JavaScriptCore armv7  <a5780997f4b738659172f40877c9a7d9> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x364b9000 - 0x36511fff  ManagedConfiguration armv7  <44bbb2ba85c8320bb9e73c654b90f8c0> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x36512000 - 0x36517fff  Marco armv7  <da45fc9b228b3d1fad95e03071441585> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x36528000 - 0x3659efff  MediaControlSender armv7  <9fb205b64b5333a495ac61c149e0304b> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x366e8000 - 0x36715fff  MobileAsset armv7  <3a9e6258ae1230f5b12f1638b09cb974> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
0x3675a000 - 0x3675dfff  MobileInstallation armv7  <c63e4b1ae40635cd9c6a7de851c80d10> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x3675e000 - 0x36764fff  MobileKeyBag armv7  <35882c57076334aeb0641969a9b69ff3> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x367c1000 - 0x367c4fff  MobileSystemServices armv7  <10b4eee2739c353183ac2cfe4e39a443> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
0x367dc000 - 0x367e5fff  MobileWiFi armv7  <bb4efbe3c7273c0fb534f12789756089> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x36975000 - 0x36977fff  OAuth armv7  <575df12a2f2436af92e31494c3b74465> /System/Library/PrivateFrameworks/OAuth.framework/OAuth
0x370b1000 - 0x370d6fff  OpenCL armv7  <5bf059a9deb632678d70099f14f51b82> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x37437000 - 0x37454fff  PersistentConnection armv7  <c773b3dc885832f8a916de67f24f9f92> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x376ea000 - 0x37712fff  PrintKit armv7  <3f0b9c58a458358eb506858e8ff9e1fe> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x37713000 - 0x37787fff  ProofReader armv7  <9cb25467554637bcb268ba30527d3c0f> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x37788000 - 0x37790fff  ProtocolBuffer armv7  <d1f2888d5e5a39cca6a6179a35c86770> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x377ad000 - 0x37805fff  SAObjects armv7  <e00a21cdda433d8788f5878d2b1f90d3> /System/Library/PrivateFrameworks/SAObjects.framework/SAObjects
0x378cc000 - 0x378ddfff  SpringBoardServices armv7  <e2571f80a0ad3dc580c69794457bd887> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x3793f000 - 0x37a1afff  StoreServices armv7  <6d45f42eff2736d18cdd81af0473dd5a> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x37a68000 - 0x37a6afff  TCC armv7  <d5bef30a5bda315194173b862975f9fb> /System/Library/PrivateFrameworks/TCC.framework/TCC
0x37a89000 - 0x37a96fff  TelephonyUtilities armv7  <803d7a92439238ee942086999c481eb6> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities
0x37a97000 - 0x37ebbfff  TextInput armv7  <d54d5ca42b503f26ab45e5efd4b87135> /System/Library/PrivateFrameworks/TextInput.framework/TextInput
0x37f19000 - 0x37fb9fff  UIFoundation armv7  <9a464526e26634bc834537e5ac3abf1f> /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation
0x37fd8000 - 0x3814efff  VectorKit armv7  <1f5d7d9b24cf379bb3dade61bbf7b3a7> /System/Library/PrivateFrameworks/VectorKit.framework/VectorKit
0x38287000 - 0x3829dfff  VoiceServices armv7  <02e2faf1aceb3d2c94ad4528c7a23837> /System/Library/PrivateFrameworks/VoiceServices.framework/VoiceServices
0x382b5000 - 0x382d4fff  WebBookmarks armv7  <77b65bc9c87b367ebea9a5b7984b13a5> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x382d5000 - 0x38c04fff  WebCore armv7  <ce52fd40ccc236c4b86c020beabb1bb0> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x38c05000 - 0x38ce2fff  WebKit armv7  <dee20c7689bc3e029172b488d8c5f772> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x38d8d000 - 0x38d94fff  XPCObjects armv7  <723fe314ab95381cbfa69a0000005692> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x3934a000 - 0x39364fff  TextInput_zh armv7  <9955ec20ab1a3656b0dbda157637199a> /System/Library/TextInput/TextInput_zh.bundle/TextInput_zh
0x39921000 - 0x39927fff  libAccessibility.dylib armv7  <f40705b5e9c43ce3b1f185fe690b9ac8> /usr/lib/libAccessibility.dylib
0x39928000 - 0x3993efff  libCRFSuite.dylib armv7  <5a8a3d18a1ff3c97bd773705fef2d81c> /usr/lib/libCRFSuite.dylib
0x39956000 - 0x39962fff  libMobileGestalt.dylib armv7  <ea41737238273d73b173ec09358d7b62> /usr/lib/libMobileGestalt.dylib
0x39974000 - 0x39974fff  libSystem.B.dylib armv7  <7aeeab280f7e361e9986d962d0fa5281> /usr/lib/libSystem.B.dylib
0x39a96000 - 0x39aa2fff  libbsm.0.dylib armv7  <3870b1c8b1783b788bd51da1a04eae6e> /usr/lib/libbsm.0.dylib
0x39aa3000 - 0x39aacfff  libbz2.1.0.dylib armv7  <b04d27fa0f2d31d8bd0745f8aa0d7f67> /usr/lib/libbz2.1.0.dylib
0x39aad000 - 0x39af7fff  libc++.1.dylib armv7  <ceb9fb64fb203d3a94063a9db6590ca4> /usr/lib/libc++.1.dylib
0x39af8000 - 0x39b0bfff  libc++abi.dylib armv7  <4b8520bc534231ae97ce146e076bc7bf> /usr/lib/libc++abi.dylib
0x39b3c000 - 0x39c29fff  libiconv.2.dylib armv7  <ac23bb84e91e35418c9a2fb4792658b2> /usr/lib/libiconv.2.dylib
0x39c2a000 - 0x39d73fff  libicucore.A.dylib armv7  <da9d04cc6f6d3825aa52636342ef1e04> /usr/lib/libicucore.A.dylib
0x39d7b000 - 0x39d7bfff  liblangid.dylib armv7  <a10d8f96815d35e0a1d2c7b998a941f3> /usr/lib/liblangid.dylib
0x39d7e000 - 0x39d85fff  liblockdown.dylib armv7  <996afbc31d8b3f2a907be2427509a4c8> /usr/lib/liblockdown.dylib
0x39d86000 - 0x39d9bfff  liblzma.5.dylib armv7  <4a1f38cbee783a9ea6de94af25d45cc1> /usr/lib/liblzma.5.dylib
0x39ec2000 - 0x3a065fff  libmecabra.dylib armv7  <0747e596e9983bd6a76cf8349da325e4> /usr/lib/libmecabra.dylib
0x3a066000 - 0x3a07bfff  libmis.dylib armv7  <7502589f14733beb963c542fa40438c8> /usr/lib/libmis.dylib
0x3a0a4000 - 0x3a1a2fff  libobjc.A.dylib armv7  <79e5d714945834e4b2587abfc6c7269c> /usr/lib/libobjc.A.dylib
0x3a266000 - 0x3a27bfff  libresolv.9.dylib armv7  <3ee61a04a99b322e97e179bc03c46cf1> /usr/lib/libresolv.9.dylib
0x3a2a0000 - 0x3a325fff  libsqlite3.dylib armv7  <cbefd01867b93d2a869a534825a1414c> /usr/lib/libsqlite3.dylib
0x3a326000 - 0x3a371fff  libstdc++.6.dylib armv7  <e3154b06ac5d360c948111abfb2bc339> /usr/lib/libstdc++.6.dylib
0x3a372000 - 0x3a398fff  libtidy.A.dylib armv7  <c43990ee3a5e389aacf288c3615a50dc> 
```

.... 为简洁起见省略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:02:07.460

请注意日志中的以下部分：

```
Application Specific Information:
MyApp[6705] has active assertions beyond permitted time: 
{(
    <BKProcessAssertion: 0x1d569690> identifier: UIKitBackgroundCompletionTask process: MyApp[6705] permittedBackgroundDuration: 600.000000 reason: finishTask owner pid:6705 preventSuspend  preventIdleSleep ,
    <BKProcessAssertion: 0x1d56abb0> identifier: UIKitBackgroundCompletionTask process: MyApp[6705] permittedBackgroundDuration: 600.000000 reason: finishTask owner pid:6705 preventSuspend  preventIdleSleep ,
    <BKProcessAssertion: 0x1d56b580> identifier: UIKitBackgroundCompletionTask process: MyApp[6705] permittedBackgroundDuration: 600.000000 reason: finishTask owner pid:6705 preventSuspend  preventIdleSleep 
)} 
```

似乎是您在`beginBackgroundTaskWithExpirationHandler:`没有相应呼叫的情况下进行`endBackgroundTask:`呼叫。

`endBackgroundTask`在以下[链接](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)中了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:03:57.780

## 将崩溃日志发送到 Xcode 并在那里进行符号化

如何？一种方式（我的头顶......它可能不理想）

1.  将您的应用程序构建为存档并将其保存在管理器中
2.  在设备上安装该存档版本
3.  让它崩溃
4.  连接您的手机并转到 Xcode 管理器、设备、崩溃报告
5.  单击重新符号化，它会使用您存档的应用程序使其可读

# ios - Objc (IOS) ，简单的自由落体动画坏了

> ID：15627538
> 
> 赞同：-2
> 
> 时间：2013-03-26T00:57:52.537
> 
> 标签：ios, objective-c, animation

我目前正在 ios 开发中迈出摇摇欲坠的第一步。我正在尝试为一个自由落体的球制作动画。我有一个连接到 IBAction 的按钮，以及包含我的球图像的 UIImageView。

在我的动作中，我有一个使用 NSTimeInterval 计时的 while 循环，并根据它计算一个新位置所花费的时间，直到球到达“地面”（是的，我意识到这可能是最不理想的方法。但是我很难掌握语法（这可能是我的问题所在），优化将不得不稍后进行）。据我所知， NSTimeInterval 以秒为单位返回经过的时间，因此即使它会增加非常小的步数，它也应该可以工作。但我可能有严重的脑放屁。

到目前为止，一切都很好。但是当我点击按钮时，球直接从起点移动到终点，没有动画。

```
-(IBAction)doshit:(id)sender{

int G = 10;
CGPoint center = [myImage center];
NSDate *startTime = [NSDate date];
NSTimeInterval T;

T = fabs([startTime timeIntervalSinceNow]);
while (center.y<480)
{

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:T];

    center.y=center.y+((G*T*T)/2);
    [myImage setCenter:center];

    T = fabs([startTime timeIntervalSinceNow]);
    [UIView commitAnimations];
}

} 
```

我欢迎所有建议！=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:07:37.900

一种方法是使用 CADisplayLink 来提供计时——它与 1/60 秒的显示刷新率相关联。如果您使用自动布局（现在默认启用），最好为约束设置动画，而不是设置框架。因此，此示例使用屏幕顶部的按钮，其对视图顶部的约束连接到 IBOutlet topCon。

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()
@property (nonatomic, strong) CADisplayLink *displayLink;
@property (weak,nonatomic) IBOutlet NSLayoutConstraint *topCon;
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self performSelector:@selector(startDisplayLink) withObject:nil afterDelay:2];
}

- (void)startDisplayLink {
    self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(handleDisplayLink:)];
    [self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
}

- (void)stopDisplayLink {
    [self.displayLink invalidate];
    self.displayLink = nil;
}

- (void)handleDisplayLink:(CADisplayLink *)displayLink {
    static BOOL first = YES;
    static double startTime = 0;
    if (first) {
        startTime = displayLink.timestamp;
    }
    first = NO;
    double T = (double)displayLink.timestamp - startTime;
    self.topCon.constant += ((10 * T * T)/2);
    if (self.topCon.constant > 420) {
        [self stopDisplayLink];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:20:41.973

正如 Carl 所指出的，您不能通过在方法调用过程中反复更改内容来执行动画。请参阅[强制 UIView 重绘的最可靠方法是什么？](https://stackoverflow.com/questions/1503761/what-is-the-most-robust-way-to-force-a-uiview-to-redraw/1503828#1503828)对此进行更多讨论。

您可能会怀疑，这不仅不是最佳选择，而且还与 iOS 对抗。iOS 有许多易于使用的技术来执行流畅的动画，而无需借助任何类型的计时器。这是一种简单的方法：

```
- (IBAction)dropAnimate:(id)sender {
  [UIView animateWithDuration:3 animations:^{
     self.circleView.center = CGPointMake(100, 300);
   }];
} 
```

在`animations`块中，您将要更改的内容更改为最终值（`myImage.center`在您的情况下）。UIKit 将对当前值和最终值进行采样，并找出在您请求的时间内到达那里的路径。有关具有一些其他功能（如链式动画）的完整、可运行示例，请参阅[iOS:PTL 第 9 章中的示例代码](https://github.com/iosptl/ios6ptl/blob/master/ch09/ViewAnimation/ViewAnimation/ViewAnimationViewController.m)。

上面的代码将使用默认的计时功能。一旦理解了这一点，您就可以继续自定义计时功能。请参阅[动画](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Animation_Types_Timing/Articles/Timing.html)类型和时序编程指南中的动画节奏。另外[如何使用 Core Animation 创建自定义缓动功能？](https://stackoverflow.com/questions/5161465/how-to-create-custom-easing-function-with-core-animation)和[核心动画中的参数加速曲线](http://www.cocoawithlove.com/2008/09/parametric-acceleration-curves-in-core.html)。但我会先让您了解简单的默认动画。

# javascript - Javascript对应字幕处理

> ID：15627539
> 
> 赞同：0
> 
> 时间：2013-03-26T00:57:52.260
> 
> 标签：javascript, jquery

我有一个包含 6 张图片的图片库，我使用 Javascript 来控制这些图片。当您单击图像时，它会淡出并加载新图像。缩略图位于“图库”div 中，主图像显示在空的“照片”div 中。

我不知道如何让一个段落与相应的图像一起加载。例如，我想加载一个图像，但也有一段文本，特定于该图像，加载它。

这必须用数组来完成吗？我需要一些想法。这是Javascript和html。

```
$('#gallery a').click(function(evt) {
evt.preventDefault();   
var imgPath = $(this).attr('href');
var oldImage = $('#photo img');
var newImage = $('<img src=" ' + imgPath + ' ">');
newImage.hide();
$('#photo').prepend(newImage);
newImage.fadeIn(1000);
oldImage.fadeOut(1000,function(){
$(this).remove();
});
});
$('#gallery a:first').click();

<div id="photo">
</div>

<div id="gallery">
<a href="images/home1_h.jpg"><img src="images/home1.jpg" alt="home 1"></a>
<a href="images/home2_h.jpg"><img src="images/home2.jpg" alt="home 2"></a>
<a href="images/home3_h.jpg"><img src="images/home3.jpg" alt="home 3"></a>
<a href="images/home4_h.jpg"><img src="images/home4.jpg" alt="home 4"></a>
<a href="images/home5_h.jpg"><img src="images/home5.jpg" alt="home 5"></a>
<a href="images/home6_h.jpg"><img src="images/home6.jpg" alt="home 6"></a>
</div> 
```

我想指出一切正常。我只是不知道从哪里开始以使用单击时加载的正确图像加载不同的段落。如果有兴趣，这里是现场网站：

[实时站点，您可以查看已经运行的内容](http://cisweb.bristolcc.edu/~rmailloux11/mm/Final/feat.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:08:00.870

您可以在锚标记内放置一个段落，其 display:none 样式如下：

```
<div id="gallery">
<a href="images/home1_h.jpg">
<img src="images/home1.jpg" alt="home 1">
<p style="display:none">this is a paragraph</p></a>
</div> 
```

并在您的脚本中获取段落内容并将其与图像一起显示

```
var paragraph=$(this).find("p:first").text(); 
```

在您的 html 中为您的段落添加一个 div：

```
<div id="photo"></div>
<div id="paragraph"></div> 
```

在您的 javascript 中，您应该填写此 div：

```
$('#gallery a').click(function(evt) {
evt.preventDefault();   
var imgPath = $(this).attr('href');
var oldImage = $('#photo img');
var newImage = $('<img src=" ' + imgPath + ' ">');
var paragraph=$(this).find("p:first").text();
newImage.hide();
$('#photo').prepend(newImage);
$('#paragraph').html(paragraph);
newImage.fadeIn(1000);
oldImage.fadeOut(1000,function(){
$(this).remove();
});
});
$('#gallery a:first').click(); 
```

# java - 如何使用post方法而不是get方法实现restful下载服务

> ID：15627540
> 
> 赞同：1
> 
> 时间：2013-03-26T00:57:55.137
> 
> 标签：java, rest, jax-rs, apache-wink

我正在编写一个服务来使用传递给我的服务的 json 返回一个 xls 文件。我正在使用 JAX-RS 和 WINk。由于传递给我的服务的 json 过于复杂，无法成为 url 中的 @QueryParam，所以我想使用 @POST 方法而不是 @GET。

问题是：如果我使用@GET，我知道我可以在浏览器中粘贴url来下载服务返回的文件，但是如果我使用@POST，我该如何下载服务返回的文件？

目标是当用户向该服务发布请求时，会弹出一个窗口询问“打开”、“下载”或“取消”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:43:00.623

最简单的方法是使用 HTML `form`：

```
<form action="rest/report/users" method="post">
ID: <input type="text" name="id"><br>
<input type="submit">
</form> 
```

和

```
@Path("/report")
public class ReportResource {

    @Path("users")
    @POST
    @Produces(MediaTypeUtils.MS_EXCEL)
    public Response getUsers(@FormParam("id") String id ) {

        // Build the report and get the instance of java.io.File

        ResponseBuilder response = Response.ok(file);
        response.header("Content-Disposition","attachment; filename=report.xls");
        return response.build();
    }
} 
```

该作品就像在 Chrome 和 IE 中显示保存对话框的魅力。

# ios - UIViewController 关闭少数控制器（iOS 4.3 及更高版本）

> ID：15627541
> 
> 赞同：0
> 
> 时间：2013-03-26T00:58:05.740
> 
> 标签：ios, uiviewcontroller, presentmodalviewcontroller

我有使用 presentModalViewController 方法呈现的 UIViewControllers 层次结构。

我有将所有呈现的视图控制器抓取到一个数组的单例。

例如，我展示了控制器 A，然后是 B，然后是 C。我将每个控制器插入到索引 0。

所以我的层次结构如下

C

乙

一个

这是我的单身

@implementation PresentHelper

```
- (id)init
{
    self = [super init];
    if (self) {
        self.viewControllers = [NSMutableArray new];
    }
    return self;
}

+ (PresentHelper *)sharedInstance
{
    static dispatch_once_t pred;
    static PresentHelper *sharedInstance = nil;
    dispatch_once(&pred, ^{
        sharedInstance = [[self alloc] init];
    });
    return sharedInstance;
}

- (void)backToViewControllerA
{
    for (UIViewController *controller in self.viewControllers) {
        [controller dismissModalViewControllerAnimated:NO];
    }
    [self.viewControllers removeAllObjects];
}

@end 
```

在`UIViewController`CI 调用`backToViewControllerA`方法中。

因此，当我调试此方法时，我想知道为什么`- viewDidLoad`在此行之后调用方法（对于 self.viewControllers 中的每个控制器），`[controller dismissModalViewControllerAnimated:NO];`因为我认为它不应该像这样工作，但它可以工作。

所以，也许这不是返回视图控制器 A 的一种方式，但无论如何我的问题都与 viewDidLoad 方法有关。

这也是我如何呈现每个控制器的代码。我有基类，每个（A、B、C 控制器都继承自它）。

```
- (void)presentModalViewController:(UIViewController *)modalViewController animated:(BOOL)animated
{
    PresentHelper *presentHelper = [PresentHelper sharedInstance];
    [presentHelper.viewControllers insertObject:modalViewController atIndex:0];
    [super presentModalViewController:modalViewController animated:animated];
} 
```

也收到了这条消息

NSArray 在枚举时发生了变异

所以我认为解雇后我失去了我的对象，也许这是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:51:32.463

这似乎不是一个很好的使用单例。

您可以通过多种方式返回 A。您不需要构造额外的委托方法或属性，因为每个控制器都通过其`presentingViewController`属性引用前一个控制器。（*我将重新表述...对于 iOS5+，您可以使用内置的 viewController 属性`presentingViewController`*）。要与 iOS4.3 保持兼容，请创建一个属性并将其放入您的基类中`@interface`：

```
 @property (nonatomic, assign) UIViewController* presentingController; 
```

同样在您的基类接口中，声明一个方法：

```
 - (void) dismissBackToA; 
```

在`@implementation`,`@synthesize`你的属性和定义`dismissBackToA`

```
 - (void) dismissBackToA
{
    if ([[self presentingController] respondsToSelector:@selector(dismissBackToA)]) {
           [[self presentingController] performSelector:@selector(dismissBackToA)];
    }
} 
```

在您的模态呈现代码中，在呈现的 VC 中设置对 self 的引用 - 例如：

```
 MasterViewController* BViewController = [[BViewController alloc] init];
   BViewController.presentingController = self;
   [self presentModalViewController:BViewController animated:YES]; 
```

现在你所要做的就是`dismissBackToA`在你的 AViewController 子类中重写：

```
- (void) dismissBackToA
{
    [self dismissModalViewControllerAnimated:YES];

} 
```

这将允许您以菊花链方式连接任意数量的模态视图控制器......泛型`dismissBackToA`会将链“展开”回 A。A 的覆盖方法将解除它的模态 (B)。这*应该*会清除链中的所有其他控制器。`presentController`几乎充当标准代表 - 我过度指定它以强调它与`presentingViewController`iOS5+ 中的相似性。我对非弧内存有点生疏，但我认为需要分配而不是保留。

恐怕我不能 100% 测试这个，因为我手头没有 iOS4.3 模拟器......

*更新*

你也可以只传递对 A 的引用，并`[self.referenceToA dismissModalViewControllerAnimated:YES]`在需要时发送，但这种方式感觉更通用。

您还应该注意这一点，`presentModalViewController:animated:`并且`dismissModalViewControllerAnimated:`在 6.0 中已弃用：现在您应该使用

```
- presentViewController:animated:completion: 
- dismissViewControllerAnimated:completion: 
```

在 5.0 中引入。

它们仍然可以工作，但把它当作一个警告——你必须准备好放弃对 4.3 的支持，或者让你的代码在未来以操作系统版本为条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:14:34.737

这不是解雇控制器的好方法。仅仅为此目的创建一个单例似乎是个坏主意。到目前为止，最简单的方法是在情节提要中使用 unwind segue 来完成，但这仅适用于我认为的 iOS 6（也许 iOS 5 也是如此）。如果您想在代码中执行此操作，那么您应该使用委托或 NSNotifications 让 A 解除 C（这也将解除 B）。此外，如果您要在代码中呈现模态视图控制器，则不应使用这种已弃用的方法，而是使用 presentViewController:animated:completion:。

编辑后：

您也可以从控制器 C 执行此操作：

```
[self.presentingViewController.presentingViewController dismissViewControllerAnimated:YES completion:nil]; 
```

# java - apache commons-fileupload 是否总是必须写入磁盘？

> ID：15627542
> 
> 赞同：1
> 
> 时间：2013-03-26T00:58:07.113
> 
> 标签：java, apache, jsp, servlets, apache-commons-fileupload

我以前使用过 fileUpload 将文件上传到我们的一台服务器上，但现在我必须做一些不同的事情。正在上传的文件永远不会被写入磁盘，而是应该逐行读取并插入到数据库中 - 每行代表一张优惠券/折扣 - 这是一个内部内容管理系统，因此文件永远不会被大于 10 行左右，最多 100 行。

我尝试调整我的工作代码以仅使用 BufferedReader 并在读入时对其进行处理，但我不断收到 NullPointerException （尽管缺少堆栈跟踪，因此我必须使用 log4j 才能获得正确的输出）。有没有人在网上看到过一个例子或者知道我做错了什么？

我的代码片段：

```
BufferedInputStream in = null;
FileItemFactory factory = new DiskFileItemFactory();
ServletFileUpload upload = new ServletFileUpload(factory);
List<FileItem> items = upload.parseRequest(request);
String enc = request.getCharacterEncoding();

for (FileItem item : items) {
    if (item.isFormField()) {
       if ("code".equalsIgnoreCase(fileItem.getFieldName()))
          this.code = fileItem.getString(enc);
       ... // set these to local variables
    } else {
        in = new BufferedInputStream(new FileInputStream(item.getInputStream()));
        String line;
        while ((line = br.readLine()) != null)   {
            insert2DB(line);
        }
    }
} 
```

我需要做其他事情还是必须先将其写入磁盘然后再读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:48:38.170

[用户指南](http://commons.apache.org/proper/commons-fileupload//using.html)有一些关于如何执行此操作的文档：

```
// Create a factory for disk-based file items
FileItemFactory factory = new DiskFileItemFactory();

// Create a new file upload handler
ServletFileUpload upload = new ServletFileUpload(factory);

// Parse the request
List /* FileItem */ items = upload.parseRequest(request);

Iterator iter = items.iterator();
while (iter.hasNext()) {
    FileItem item = (FileItem) iter.next();
    InputStream uploadedStream = item.getInputStream();
    // your database code goes here
    uploadedStream.close();
} 
```

根据[log4j](http://logging.apache.org/log4j)，您需要一个结构如下的属性文件：

```
# Root logger option
log4j.rootLogger=DEBUG, file, us
# Direct log messages to a plaintext log 
log4j.appender.file=org.apache.log4j.FileAppender
log4j.appender.file.File=public_html/news.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n
log4j.appender.stderr=org.apache.log4j.ConsoleAppender
log4j.appender.stderr.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1} %L - %m%n
log4j.appender.stderr.layout=org.apache.log4j.PatternLayout 
```

...并记录堆栈跟踪，在您的 catch 块中，放置`loggerInstance.error(exceptionInstance.getMessage(), exceptionInstance);`并记录完整的堆栈跟踪，假设也记录了 ERROR 级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:41:40.123

我得到的错误是：

NullPointerException：字符集名称

（没有堆栈跟踪 - 我假设我的 log4j 没有为这个 apache 项目设置）

不管怎样，这是因为我的旧版本使用了 apache 的 commons-fileupload-1.0，而新版本使用了 2.0。

在旧版本中（我忘记了上面的代码），它是这样做的：

```
String enc = request.getCharacterEncoding();

for (FileItem fileItem:fileItems) {
   if (fileItem.isFormField()) {
      if ("code".equalsIgnoreCase(fileItem.getFieldName()))
          this.code = fileItem.getString(enc);
                                         ^^^ 
```

胡萝卜标记是引发错误的原因。使用 1.0，这总是以非 null 的形式返回，而在 2.0 中，它以 null 的形式返回并在那里爆炸。

将其更改为：

```
this.code = fileItem.getString(); 
```

解决了问题

# ios - 如何在 Xcode 中添加额外的动画

> ID：15627545
> 
> 赞同：1
> 
> 时间：2013-03-26T00:58:22.227
> 
> 标签：ios, xcode4.5, uiviewanimation

我在 Xcode 4.5 中为我的 iPhone 应用程序提供了以下代码：

```
 [UIView transitionWithView:self.view
                duration:5.0f
                options:UIViewAnimationOptionTransitionCrossDissolve
                animations:^{
                    self.view = self.view;
                } completion:NULL]; 
```

代码完全按照我想要的方式工作，除了 1 件事。我有 self.view = self.view; 我想在此行之前的片刻，视图清除甚至变为黑屏，然后转换到下一个加载的 self.view。原因是我的一些屏幕非常相似，用户可能认为视图没有重新加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:33:50.113

self.view = self.view 不能合成动画

将 self.view.alpha 设置为零然后做动画。

```
self.view.alpha = 0.0f;
[UIView transitionWithView:self.view
                  duration:5.0f
                   options:UIViewAnimationOptionTransitionCrossDissolve
                animations:^{
                    self.view.alpha = 1.0f;
                } completion:NULL]; 
```

# google-analytics - 网站中每个网页的唯一元数据

> ID：15627548
> 
> 赞同：0
> 
> 时间：2013-03-26T00:58:37.930
> 
> 标签：google-analytics, metadata

下面是我的要求。

谷歌分析已被嵌入网站，搜索引擎优化试图编辑网站上所需页面的元数据，但无法编辑。

他们要求每个页面都有一个部分，因此输入的元数据对于每个页面都是唯一的。目前页面上的每个部分都是通用的，对一个部分所做的更改会影响其他部分。

我有一个通用的标题页，它包含在网站的每个页面中，其中包含元数据。

请有人帮助了解为实现上述要求而应使用的确切 php 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:41:02.153

以这样的方式编辑标题，元关键字是 php 变量，并在每个页面中包含之前将变量初始化为合适的值。

或者

在标题页中维护一个 php 关联数组。使用页面的名称作为索引和页面的元关键字作为值

然后在标题中

```
<meta keywword='<?php echo $arrayname[basename($_SERVER['PHP_SELF'], ".php");]?>'> 
```

# asp.net - VB.Net 中自动生成的代码标记错误？

> ID：15627553
> 
> 赞同：0
> 
> 时间：2013-03-26T00:59:20.137
> 
> 标签：asp.net, vb.net, visual-studio-2010

我在 Visual Studio 2010 中有一个 VB.Net 项目，旨在让用户上传视频，然后将其粘贴到数据库中。该文件称为“Media/Test.aspx.vb”。

当我尝试运行代码进行调试时，为名为 App_Web_nkhy2w0y.0.vb 的文件生成了大量错误

我在任何地方都找不到这个文件，而且我肯定没有写它，所以我双击错误，它打开了一个包含大约 350 行（显然）自动生成代码的文件，我不知道我在做什么确实导致它这样做。我也不知道如何解决它。

我承认我是 VB.Net 的新手，但我从未在网上看到过这样的事情，所以我一无所知。

下面是代码隐藏文件的原始代码，它只处理实际页面中的文件上传控件、按钮和标签。

```
Imports System.IO
Imports System.Data.SqlClient
Imports System.Data

Partial Class Media_Test

Inherits System.Web.UI.UserControl

Protected Sub TryMe_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles TryMe.Click
    Dim connection As SqlConnection
    'check the file
    Dim buffer As Byte()

    If testFile.HasFile AndAlso testFile.PostedFile IsNot Nothing AndAlso testFile.PostedFile.FileName <> "" Then
        Dim file As HttpPostedFile = testFile.PostedFile
        'retrieve the HttpPostedFile object

        buffer = New Byte(file.ContentLength - 1) {}
        Dim bytesReaded As Integer = file.InputStream.Read(buffer, 0, testFile.PostedFile.ContentLength)
        'the HttpPostedFile has InputStream porperty (using System.IO;)
        'which can read the stream to the buffer object,
        'the first parameter is the array of bytes to store in,
        'the second parameter is the zero index (of specific byte)
        'where to start storing in the buffer,
        'the third parameter is the number of bytes 
        'you want to read (do u care about this?)

        If bytesReaded > 0 Then
            Try
                Dim connectionString As String = ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString
                connection = New SqlConnection(connectionString)
                Dim cmd As New SqlCommand("INSERT INTO Videos (Video, Video_Name, Video_Size)" & " VALUES (@video, @videoName, @videoSize)", connection)
                cmd.Parameters.Add("@video", SqlDbType.VarBinary, buffer.Length).Value = buffer
                cmd.Parameters.Add("@videoName", SqlDbType.VarChar).Value = testFile.FileName
                cmd.Parameters.Add("@videoSize", SqlDbType.BigInt).Value = file.ContentLength
                Using connection
                    connection.Open()
                    Dim i As Integer = cmd.ExecuteNonQuery()
                    Label1.Text = "uploaded, " & i.ToString() & " rows affected"
                End Using
            Catch ex As Exception
                Label1.Text = ex.Message.ToString()
            End Try

        End If
    Else
        Label1.Text = "Choose a valid video file"
    End If
End Sub
End Class 
```

生成页面的顶部是：

```
#ExternalChecksum("C:\Users\handcm\Documents\Visual Studio 2010\WebSites\APPS\Media\Test.aspx","{406ea660-64cf-4c82-b6f0-42d48172a799}","F31F20662F14B4894B6FBF58215628CB")
'------------------------------------------------------------------------------
' <auto-generated>
'     This code was generated by a tool.
'     Runtime Version:4.0.30319.296
'
'     Changes to this file may cause incorrect behavior and will be lost if
'     the code is regenerated.
' </auto-generated>
'------------------------------------------------------------------------------ 
```

如果需要，我可以发布整个文件，但是有人可以对这里发生的事情有所了解吗？我不知道如何调试我没有编写或从未见过的文件。

编辑 2：我检查了“'InitializeCulture' 不是 'ASP.media_test_aspx' 的成员”错误，它通常是 aspx 页面上继承的类与 aspx.vb 文件中的不正确的类之间的差异。但是，在这种情况下，没有差异，因为它是正确的文件。

编辑：我收到的一些错误消息：

*   错误 4“GetWrappedFileDependencies”不是“ASP.media_test_aspx”的成员。C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\apps\f1b28c0f\bab8f810\App_Web_nkhy2w0y.0.vb 103
*   错误 2 类“media_test_aspx”必须为接口“System.Web.IHttpHandler”实现“ReadOnly Property IsReusable As Boolean”。实现属性必须具有匹配的“ReadOnly”或“WriteOnly”说明符。C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\apps\f1b28c0f\bab8f810\App_Web_nkhy2w0y.0.vb 84
*   错误 10“ProcessRequest”不是“Media_Test”的成员。C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\apps\f1b28c0f\bab8f810\App_Web_nkhy2w0y.0.vb 342
*   错误 1“InitializeCulture”不是“ASP.media_test_aspx”的成员。C:\Users\handcm\Documents\Visual Studio 2010\WebSites\APPS\Media\Test.aspx 1
    我什至不知道最后一个是指什么，因为页面上肯定没有“初始化文化” .

# c# - Visual C# (Visual Studio) 和 Mono C# GUI 之间的区别

> ID：15627554
> 
> 赞同：2
> 
> 时间：2013-03-26T00:59:20.817
> 
> 标签：c#, linux, visual-studio, window, monodevelop

我可以使用 GUI 程序在 Linux 平台上使用单声道框架发送和接收在 Windows (Visual Studio) 上编写的串行数据吗？

我发现 mono 使用不同的 IDE 进行 GUI 开发。

它们是否具有与 Visual Studio 中相同的组件（我不知道它在 .NET 中叫什么，我是 Java 人），是否具有相同的开发方式（例如，当我在 Visual Studio 中双击组件时） ，它会使用已经编写的适当方法名称或其他内容进入编码页面）。

基本上，我想在带有 Mono 的 Linux 上重用我的 GUI 基础串行程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T01:05:28.900

Mono 是[.NET 的跨平台运行时实现](http://www.mono-project.com/About)。该项目由 Novell 开发，受 MS 和 Novell 之间的专利共享协议保护。

由于 .NET 不是本机代码（使用 MS IL），只要 Mono 支持功能本身（并且[在代码中进行了某些基本调整](http://www.mono-project.com/Guidelines%3aApplication_Portability)），代码将是可移植的。这将允许您通过 Mono 在 Linux 上使用 .NET 程序集，并通过 .NET CLR 在 Windows 上使用。

用于绘制 Window 本身的代码会有所不同（因为 Mono 不是 .NET CLR），但用于生成该 Window 并与之交互的 C# 代码在实现之间不会有所不同（一般来说）。

**注意：**如果您希望在 MS .NET 运行时使用 Mono 相关代码，则必须确保使用 Mono 支持的 .NET 类和功能，反之亦然。参见：[Mono 技术](http://www.mono-project.com/Plans)

# mysql - MySQL全文搜索似乎不起作用

> ID：15627557
> 
> 赞同：1
> 
> 时间：2013-03-26T01:00:00.830
> 
> 标签：mysql, full-text-search

```
SELECT * FROM `pt_acf` WHERE `palavra` 
LIKE "%orai%" 
```

显示记录 #0-29（共 62 条，查询耗时 0.0608 秒）

```
SELECT * FROM `pt_acf` WHERE MATCH(`palavra`)
AGAINST("orai") 
```

显示记录 #0-17（共 18 条，查询耗时 0.0008 秒）

为什么在 LIKE 搜索中找到 62 条记录而在 FULLTEXT 中只有 18 条？时间很好，但它没有找到所有的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:04:05.177

这篇文章可能会帮助您了解全文搜索和类似之间的区别：

[什么是全文搜索与 LIKE](https://stackoverflow.com/questions/224714/what-is-full-text-search-vs-like)

# java - 设计：解决这个问题的最佳方法？

> ID：15627559
> 
> 赞同：2
> 
> 时间：2013-03-26T01:00:19.210
> 
> 标签：java, oop

到目前为止，我已经多次遇到这个设计问题，并且我总是通过以下方式解决它。但是，我只是想知道这是否是正确的方法，或者是否有更好的方法。语言是 Java，但我猜这个问题也会出现在其他强类型系统中。

问题是这样的：

```
abstract class P
{
   int p1; int p2;
}

class P1 extends P {
   int p3; int p4;
}

class P2 extends P {
   int p5; int p6;
}

abstract class PHandler {
    void handle(P p)
}

class P1Handler{
    void handle(P p) {
          P1 castedP = (P1) p;
          //.....handle logic with P1
    }
}

class P2Handler{
    void handle(P p) {
          P2 castedP = (P2) p;
          //.....handle logic with P2
    }
}

final class PHandlerFactory {
    PHandler getPhandler(P p) {
       //test on P , if/else on either InstanceOf or some attribute of P
       return concrete P
    }
}

// client code

P p = getPFromSomewhereAtRuntime();
PHandler pHandler = factory.get(p);
pHandler.handle(p); 
```

现在，这段代码从未让我完全满意。

第一，我不喜欢具体的 PHandler 中的铸造。具体的 PHandlers 知道他们想要在编译时处理的类型。为什么要等到运行时？（它是一种 Java 语言限制，可以通过诸如双重调度之类的任何技术来避免？无法理解它）

2、工厂紫罗兰OPEN-CLOSED-PRINCIPLE。我通常通过反射/属性文件来实现它以避免OCP。编辑：随着我们继续添加更多 P 实例，我们需要不断更改工厂（除非使用反射）

我还在 Concrete P 实现中使用了注解。再一次，它会破坏 OCP，更糟糕的是，P 可以有不同类型的 Handlers 用于不同的目的。

我真的很想知道专家对此的看法。同样，这段代码主要在 Spring 容器中运行，因此任何其他 AOP 解决方案也会让我感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:10:48.563

正如@bmorris591 所说，“泛型是整理它的方法”。但这可能只是因为您的示例足够简单，可以这样做。

这真的取决于上下文。您的代码编写方式让我想起[了访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。这是一种进行双重调度的方法。它有一些优点和缺点。最大的缺点是它会使您的代码复杂化。

在某些情况下，您使 P 成为 PHandler 的逻辑接口，如下所示：

```
interface P
{
   void handle();
}

class P1 implements P {
   int p3; int p4;
   void handle () {...}
}

class P2 implements P {
   int p5; int p6;
   void handle () {...}
} 
```

同样，这有利也有弊。从 OO 的角度来看，将句柄实现放在 P 实现中可能没有意义。这一切都与上下文有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:18:59.007

如果您知道 的具体实现`P`，即如果它们不是从某个地方提供的，那么您可以使用访问者模式：

```
abstract class P {

    int p1;
    int p2;

    abstract void visit(final PVisitor visitor);
}

class P1 extends P {

    int p3;
    int p4;

    @Override
    void visit(PVisitor visitor) {
        visitor.doStuff(this);
    }
}

class P2 extends P {

    int p5;
    int p6;

    @Override
    void visit(PVisitor visitor) {
        visitor.doStuff(this);
    }
}

interface PVisitor {

    void doStuff(P1 p);

    void doStuff(P2 p);
} 
```

所以你有一个`Collection<PVisitor>`访问者逻辑，然后你`P`用你的 s 访问你的实例，`PVisitor`多态性将计算出什么是什么。

**编辑**

根据 OP 的评论，我有一个想法。

抽象工厂模式与访问者模式和一些泛型相结合呢？

我们的想法是，我们知道如果我们添加一种新的类型，`Handler`那么就需要改变一些东西——从逻辑上讲，它应该是`HandlerFactory`实现而不是`P`s。如果我们有一个`abstract HandlerFactory`并且每个`P`实现负责返回一个处理它的实例怎么办。

然后，工厂有许多返回特定处理程序的方法，`getDatabaseHandler`例如等。这些`Handler`可以从泛型`Handler`类继承。

这个想法看起来像这样：

```
abstract class P {

    int p1;
    int p2;

    public abstract HandlerFactory<? extends P> getHandlerFactory();
}

class P1 extends P {

    int p3;
    int p4;

    @Override
    public HandlerFactory<P1> getHandlerFactory() {
        return new P1HandlerFactory(this);
    }
}

class P2 extends P {

    int p5;
    int p6;

    @Override
    public HandlerFactory<? extends P> getHandlerFactory() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }
}

abstract class HandlerFactory<T extends P> {

    private T t;

    public HandlerFactory(T t) {
        this.t = t;
    }

    public T getT() {
        return t;
    }

    public abstract DatabaseHandler<T> getDatabaseHandler();

    public abstract JMSHandler<T> getJMSHandler();
}

abstract class Handler<T extends P> {

    private final T t;

    public Handler(T t) {
        this.t = t;
    }

    public T getT() {
        return t;
    }
}

abstract class DatabaseHandler<T extends P> extends Handler<T> {

    public DatabaseHandler(T t) {
        super(t);
    }

    public abstract void persist(Connection con);
}

abstract class JMSHandler<T extends P> extends Handler<T> {

    public JMSHandler(T t) {
        super(t);
    }

    public abstract void send();
}

class P1HandlerFactory extends HandlerFactory<P1> {

    public P1HandlerFactory(P1 t) {
        super(t);
    }

    @Override
    public DatabaseHandler<P1> getDatabaseHandler() {
        return new P1DatabaseHandler(getT());
    }

    @Override
    public JMSHandler<P1> getJMSHandler() {
        return new P1JMSHandler(getT());
    }
}

class P1DatabaseHandler extends DatabaseHandler<P1> {

    public P1DatabaseHandler(P1 p1) {
        super(p1);
    }

    @Override
    public void persist(Connection con) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }
}

class P1JMSHandler extends JMSHandler<P1> {

    public P1JMSHandler(P1 p1) {
        super(p1);
    }

    @Override
    public void send() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }
} 
```

所以每个实现`P`都附带一个同伴`HandlerFactory`，添加一个新的实现`P`只需要`HandlerFactory`为它实现一个。例如，泛型的使用允许`P1A`并且`P1B`继承自，如果它们不需要任何更改，则`P1`仅使用 a 。`P1Handler`

如果`Handler`添加了一种新的类型，那么所有`HandlerFactory`实现都需要更改以拥有获取该类型的方法，`Handler`但`P`s 不需要更改。

用法看起来像

```
final P1 p1 = new P1();        
final DatabaseHandler<P1> databaseHandler = p1.getHandlerFactory().getDatabaseHandler(); 
```

因此，您可以从该实例获取该实例的特定数据库处理程序。

# jquery - var obj = jQuery.parseJSON(响应);

> ID：15627560
> 
> 赞同：-2
> 
> 时间：2013-03-26T01:00:23.897
> 
> 标签：jquery, ajax, json, parsing

我有这个脚本

```
var obj = jQuery.parseJSON(response); 
```

而响应是通过 AJAX 返回的 json 字符串。响应的值为

```
[
    {
        "value": "Michael"
    },
    {
        "value": "Murray"
    },
    {
        "value": "mfo91@aol.com"
    },
    {
        "value": "1941-06-23"
    }
] 
```

我将如何遍历所有值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:05:31.443

你有一个[对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object)[数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)。鉴于这些对象的当前结构，以下内容应该适合您：

```
for (var i = 0; i < response.length; i++) {
    console.log(response[i].value);
} 
```

[**演示**](http://jsfiddle.net/Daedalus/GQkd3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:01:47.053

这只是一个数组，因此您可以使用任何普通的数组循环方法对其进行循环。例如：

```
obj.forEach(function (elem) {
    console.log(elem.value);
}); 
```

# c++ - 类似于 C++ 的 Scala 工作表的东西？

> ID：15627561
> 
> 赞同：0
> 
> 时间：2013-03-26T01:00:30.407
> 
> 标签：c++, scala

有什么类似于 Scala 工作表的东西吗？如果没有，我想实施它，并想从哪里开始。

# xcode - 如何为 XCode4 项目添加 Gosu 框架？

> ID：15627564
> 
> 赞同：1
> 
> 时间：2013-03-26T01:01:06.103
> 
> 标签：xcode, macos, xcode4, osx-snow-leopard, libgosu

在编译语言方面，我对链接和引用文件/资源​​知之甚少（我是一名 Ruby 程序员）。

我正在尽力使用有关“如何将框架添加到 XCode 4 项目”的一般教程，但我很难理解我应该如何做到这一点，因为我所做的一切最终都失败了。

我只是创建了一个新的可可应用程序，去构建阶段/链接二进制与库并在那里添加了 Gosu.framework。我没有做任何其他事情。

现在，当我尝试运行应用程序时，出现此错误：

```
dyld: Library not loaded: @executable_path/../Frameworks/Gosu.framework/Versions/A/Gosu
  Referenced from: /Users/ellmo/Library/Developer/Xcode/DerivedData/gosuTest-hkmqdspnwjepredgslldpnmuhlvx/Build/Products/Debug/gosuTest.app/Contents/MacOS/gosuTest
  Reason: image not found 
```

我应该怎么办？

# c# - 用户单击“在线检查解决方案并关闭程序”后是否可以得到错误日志，并可能回复修复？

> ID：15627566
> 
> 赞同：0
> 
> 时间：2013-03-26T01:01:11.100
> 
> 标签：c#, .net, vb.net, error-handling, crash

有时程序崩溃并显示此通用错误消息：

> WindowsFormApplication1 已停止工作
> 
> Windows 可以在线检查问题的解决方案。
> 
> *   *在线检查解决方案并关闭程序*
> *   关闭程序
> *   调试程序

当用户点击“在线检查解决方案并关闭程序”时会发生什么？

**我的问题具体是：**

1.  我可以从以这种方式（通过 MS 或直接）遇到错误的客户那里获得这样的崩溃日志吗？

2.  Microsoft 是否在某处记录这些错误，以便我可以检查我的应用程序发生了哪些错误？

3.  我可以向 Microsoft 或其他地方提交我对这个错误的修复，以便它通知用户可能的修复吗？

# ios - iOS谷歌地图sdk无法连接

> ID：15627571
> 
> 赞同：4
> 
> 时间：2013-03-26T01:01:27.883
> 
> 标签：ios, google-maps-sdk-ios

**我是 iOS 开发的新手。**

我正在尝试使用谷歌地图视图（使用故事板作为[带有故事板的 Google ios sdk](https://stackoverflow.com/questions/15025864/google-ios-sdk-mapview-with-storyboards)地图视图）。我已经按照 SDK 的要求设置了项目，包含了所需的库，将包复制到了框架文件夹中......但是我在输出窗口中收到了这个错误 NSLog'd

```
2013-03-25 19:52:25.315 TaxiQ[688:7203] Google Maps SDK for iOS version: 1.1.1.2311
2013-03-25 19:52:25.354 TaxiQ[688:c07] Failed to make complete framebuffer object 8cd6
2013-03-25 19:52:25.365 TaxiQ[688:c07] GMSZoomTableQuadTree lacks root zoom table for tile type (mapType: 10)
2013-03-25 19:52:25.366 TaxiQ[688:c07] GMSZoomTableQuadTree lacks root zoom table for tile type (mapType: 15)
2013-03-25 19:52:26.783 TaxiQ[688:c07] ClientParametersRequest failed, 3 attempts remaining (0 vs 5). Error Domain=com.google.Maps.GMSDASHConnection Code=100 "The operation couldn’t be completed. (com.google.Maps.GMSDASHConnection error 100.)"
2013-03-25 19:52:26.933 TaxiQ[688:c07] ClientParametersRequest failed, 2 attempts remaining (0 vs 5). Error Domain=com.google.Maps.GMSDASHConnection Code=100 "The operation couldn’t be completed. (com.google.Maps.GMSDASHConnection error 100.)"
2013-03-25 19:52:31.068 TaxiQ[688:c07] ClientParametersRequest failed, 1 attempts remaining (0 vs 5). Error Domain=com.google.Maps.GMSDASHConnection Code=100 "The operation couldn’t be completed. (com.google.Maps.GMSDASHConnection error 100.)"
2013-03-25 19:52:39.209 TaxiQ[688:c07] ClientParametersRequest failed, 0 attempts remaining (0 vs 5). Error Domain=com.google.Maps.GMSDASHConnection Code=100 "The operation couldn’t be completed. (com.google.Maps.GMSDASHConnection error 100.)"
2013-03-25 19:52:39.209 TaxiQ[688:c07] Google Maps SDK for iOS cannot connect or validate APIKey: The operation couldn’t be completed. (com.google.Maps.GMSDASHConnection error 100.) 
```

我必须声明我必须以任何方式访问互联网吗？我来自一个你必须声明的android背景。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-05T04:46:14.280

When trying to add Google Maps I was receiving error due to the fact that I did not select both the "Google Maps API V3" and "Google Maps SDK for IOS" when authorizing my AIP access in the [google console](https://code.google.com/). Seems like a simple mistake, but if you do not have both of these services selected it's possible to get this "cannot connect or validate APIKey" error.

![enter image description here](../Images/0610d07775cc5cab13b6cbc8865adec9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-15T10:17:02.807

请检查您在项目中的包标识符 - 它应该与您在谷歌应用程序中输入的包标识符匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:42:22.740

我把它放在 url 标识符中，直到我意识到它应该在 IOS 应用程序目标标识符中（使用 Xamarin 工作室），它才起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T01:40:22.960

我的错，忘记了捆绑标识符是区分大小写的。

地图现在可以正常工作，因为我在 api 控制台中修复了标识符

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-17T10:11:34.323

有时我需要用未来和过去的日期来测试我的应用程序。由于证书回溯，它会使 APIKey 检查失败。

请务必使用实际日期设置您的设备。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-02T21:31:01.457

调试此问题的一个好方法是在 Google 的演示应用程序中测试您的 API 密钥。

[以下是使用 cocoapods 安装演示应用程序的文档中的说明](https://developers.google.com/maps/documentation/ios-sdk/code-samples#try-the-sdk-demos-using-cocoapods)。

*确保将演示应用程序中的捆绑包 ID 添加到 Google API Manager Web 界面的凭据部分中的 API 密钥。*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-18T10:45:07.607

如果您想将框架添加到项目中，请从[https://developers.google.com/maps/documentation/ios-sdk/releases#version_1130_-_march_29_2016下载 sdk 1.9 并遵循与](https://developers.google.com/maps/documentation/ios-sdk/releases#version_1130_-_march_29_2016)[https://developers.google.com](https://developers.google.com/maps/premium/ios-get-started)相同的步骤[/maps/premium/ios-get-started](https://developers.google.com/maps/premium/ios-get-started)

# node.js - NodeJS/Express 请求实体太大 - Heroku

> ID：15627573
> 
> 赞同：6
> 
> 时间：2013-03-26T01:01:40.047
> 
> 标签：node.js, heroku, express

我到处寻找，似乎无法找到对此的解释，这就是 Heroku 在我的日志中显示的内容：

```
45:45+00:00 app[web.7]: Error: Request Entity Too Large
45:45+00:00 app[web.7]:     at Object.error (/app/node_modules/express/node_modules/connect/lib/utils.js:44:13)
45:45+00:00 app[web.7]:     at Object.limit [as handle] (/app/node_modules/express/node_modules/connect/lib/middleware/limit.js:45:47)
45:45+00:00 app[web.7]:     at next (/app/node_modules/express/node_modules/connect/lib/proto.js:190:15)
45:45+00:00 app[web.7]:     at Object.logger [as handle] (/app/node_modules/express/node_modules/connect/lib/middleware/logger.js:157:5)
45:45+00:00 app[web.7]:     at next (/app/node_modules/express/node_modules/connect/lib/proto.js:190:15)
45:45+00:00 app[web.7]:     at Object.favicon [as handle] (/app/node_modules/express/node_modules/connect/lib/middleware/favicon.js:78:7)
45:45+00:00 app[web.7]:     at next (/app/node_modules/express/node_modules/connect/lib/proto.js:190:15)
45:45+00:00 app[web.7]:     at Object.expressInit [as handle] (/app/node_modules/express/lib/middleware.js:31:5)
45:45+00:00 app[web.7]:     at next (/app/node_modules/express/node_modules/connect/lib/proto.js:190:15)
45:45+00:00 app[web.7]:     at Object.query [as handle] (/app/node_modules/express/node_modules/connect/lib/middleware/query.js:44:5)
45:45+00:00 app[web.7]: POST /mls 413 1ms - 980 
```

我已经包含了最后一条日志记录，因为我不确定它是否暗示了发生这些错误的 HTTP URL，或者它是否是 Heroku dyno 正在处理的下一个请求的 URL（我们每秒收到数百个请求，所以它是跟踪有点疯狂）。

我的应用程序（**ExpressJS**）需要接收大型 POST 请求，这就是我提出的原因

```
app.use(express.limit('5mb')); 
```

在应用程序顶部以允许大型帖子请求（通常小于 2MB）。我不确定上述错误是否是由于接收到太大的请求或尝试向 S3 发送太大的请求或其他原因引起的。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-18T20:00:51.970

如果您使用 Express v4+，您可以执行以下操作：

```
app.use(bodyParser.json());
app.use(bodyParser({limit: '5mb'})); 
```

或者你可以试试下面的单行解决方案，但是我没有亲自测试过

```
app.use(bodyParser.json({limit: '1mb'})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-30T12:16:37.513

虽然该解决方案在某些情况下有效，但如果您尝试上传的内容中`app.use(bodyParser({limit: '5mb'}));`有很多 & 符号，它就无法正常工作。`&`这是因为正文解析器将基于`&`. `&`对我有用的解决方案是使用`encodeURIComponent('&')`Regex替换所有出现的。所以你有了：

```
contentToUpload = contentToUpload .replace(/&/g, encodeURIComponent('&')) 
```

# java - GSON GraphAdapterBuilder 因接口而失败

> ID：15627574
> 
> 赞同：4
> 
> 时间：2013-03-26T01:01:41.567
> 
> 标签：java, json, serialization, deserialization, gson

我正在尝试使用[GraphAdapterBuilder](https://code.google.com/p/google-gson/source/browse/trunk/extras/src/main/java/com/google/gson/graph/GraphAdapterBuilder.java?r=1117)来序列化具有循环引用的对象，它是 GSON 库的附加组件。它适用于类，但在尝试反序列化接口时失败。

要反序列化接口（默认情况下 GSON 不这样做），我使用的是[PropertyBasedInterfaceMarshal](https://stackoverflow.com/a/9106351/1293179)或[InterfaceAdapter](https://code.google.com/p/soum/source/browse/trunk/wdm/src/java/org/wdm/utils/InterfaceAdapter.java?spec=svn63&r=63)。这些被注册为接口的自定义类型适配器。

当使用上面的以太时，两者都无法反序列化接口，因为它们只传递了由 GraphAdapterBuilder 生成的图形 ID，如“0x4”。这在反序列化器中作为 JsonElement 传递。显然，在反序列化器中无法用这个 id 做任何事情。

这些不应该被 GraphAdapterBuilder 捕获而不是尝试反序列化吗？我无法解决这个问题，这是 GraphAdapterBuilder 的错误还是有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:01:08.283

好的，这是解决方案的（工作）存根。在意大利为时已晚，无法让它变得更好。

您需要这样的委托功能

```
package com.google.gson.graph;

/**
 * @author Giacomo Tesio
 */
public interface GenericFunction<Domain, Codomain> {
    Codomain map(Domain domain);
} 
```

像这样的 TypeAdapterFactory：

```
package com.google.gson.graph;

import com.google.gson.Gson;
import com.google.gson.TypeAdapter;
import com.google.gson.TypeAdapterFactory;
import com.google.gson.reflect.TypeToken;
import com.google.gson.stream.JsonReader;
import com.google.gson.stream.JsonToken;
import com.google.gson.stream.JsonWriter;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

/**
 * @author Giacomo Tesio
 */
public class InterfaceAdapterFactory  implements TypeAdapterFactory {

    final Map<String, GenericFunction<Gson, TypeAdapter<?>>> adapters;
    private final Class<?> commonInterface;
    public InterfaceAdapterFactory(Class<?> commonInterface, Class<?>[] concreteClasses)
    {
        this.commonInterface = commonInterface;
        this.adapters = new HashMap<String, GenericFunction<Gson, TypeAdapter<?>>>();
        final TypeAdapterFactory me = this;
        for(int i = 0; i < concreteClasses.length; ++i)
        {
            final Class<?> clazz = concreteClasses[i];
            this.adapters.put(clazz.getName(), new GenericFunction<Gson, TypeAdapter<?>>(){
                public TypeAdapter<?> map(Gson gson) {
                     TypeToken<?> type = TypeToken.get(clazz);
                     return gson.getDelegateAdapter(me, type);
                }
            });
        }
    }
    public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type) {
        final TypeAdapter<T> delegate = gson.getDelegateAdapter(this, type);
        if(!this.commonInterface.isAssignableFrom(type.getRawType())
           && !this.commonInterface.equals(type.getRawType()))
        {
            return delegate;
        }
        final TypeToken<T> typeToken = type;
        final Gson globalGson = gson;
        return new TypeAdapter<T>() {
           public void write(JsonWriter out, T value) throws IOException {
             out.beginObject();
             out.name("@t");
             out.value(value.getClass().getName());
             out.name("@v");
             delegate.write(out, value);
             out.endObject();
           }
           @SuppressWarnings({"unchecked"})
           public T read(JsonReader in) throws IOException {
               JsonToken peekToken = in.peek();
               if(peekToken == JsonToken.NULL) {
                   in.nextNull();
                   return null;
               }

               in.beginObject();
               String dummy = in.nextName();
               String typeName = in.nextString();
               dummy = in.nextName();
               TypeAdapter<?> specificDelegate = adapters.get(typeName).map(globalGson);
               T result = (T)specificDelegate.read(in);
               in.endObject();
               return result;
           }
        };
    }

} 
```

像这样的一对测试

```
public final class InterfaceAdapterFactoryTest extends TestCase {

    public void testInterfaceSerialization1(){
        SampleInterface first = new SampleImplementation1(10);
        SampleInterfaceContainer toSerialize = new SampleInterfaceContainer("container", first);

        GsonBuilder gsonBuilder = new GsonBuilder();

        new GraphAdapterBuilder()
            .addType(SampleInterfaceContainer.class)
            .addType(SampleImplementation1.class)
            .addType(SampleImplementation2.class)
            .registerOn(gsonBuilder);
        gsonBuilder.registerTypeAdapterFactory(new InterfaceAdapterFactory(
                SampleInterface.class, new Class<?>[] { SampleImplementation1.class, SampleImplementation2.class }
                ));
        Gson gson = gsonBuilder.create();

        String json = gson.toJson(toSerialize);
        System.out.println(json);
        SampleInterfaceContainer deserialized = gson.fromJson(json, SampleInterfaceContainer.class);

        assertNotNull(deserialized);
        assertEquals(toSerialize.getName(), deserialized.getName());
        assertEquals(toSerialize.getContent().getNumber(), deserialized.getContent().getNumber());
    }

    public void testInterfaceSerialization2(){
        SampleImplementation2 first = new SampleImplementation2(5, "test");
        SampleInterfaceContainer toSerialize = new SampleInterfaceContainer("container", first);
        first.Container = toSerialize;

        GsonBuilder gsonBuilder = new GsonBuilder();

        new GraphAdapterBuilder()
            .addType(SampleInterfaceContainer.class)
            .addType(SampleImplementation1.class)
            .addType(SampleImplementation2.class)
            .registerOn(gsonBuilder);
        gsonBuilder.registerTypeAdapterFactory(new InterfaceAdapterFactory(
                SampleInterface.class, new Class<?>[] { SampleImplementation1.class, SampleImplementation2.class }
                ));
        Gson gson = gsonBuilder.create();

        String json = gson.toJson(toSerialize);
        System.out.println(json);
        SampleInterfaceContainer deserialized = gson.fromJson(json, SampleInterfaceContainer.class);

        assertNotNull(deserialized);
        assertEquals(toSerialize.getName(), deserialized.getName());
        assertEquals(5, deserialized.getContent().getNumber());
        assertEquals("test", ((SampleImplementation2)deserialized.getContent()).getName());
        assertSame(deserialized, ((SampleImplementation2)deserialized.getContent()).Container);
    }
} 
```

和一些示例类（以验证测试是否通过）

```
public class SampleInterfaceContainer {
    private SampleInterface content;
    private String name;
    public SampleInterfaceContainer(String name, SampleInterface content)
    {
        this.name = name;
        this.content = content;
    }

    public String getName()
    {
        return this.name;
    }

    public SampleInterface getContent()
    {
        return this.content;
    }
}
public interface SampleInterface {
    int getNumber();
}
public class SampleImplementation1 implements SampleInterface{
    private int number;
    public SampleImplementation1()
    {
        this.number = 0;
    }
    public SampleImplementation1(int number)
    {
        this.number = number;
    }
    public int getNumber()
    {
        return this.number;
    }
}

public class SampleImplementation2 implements SampleInterface{
    private  int number;
    private String name;
    public SampleInterfaceContainer Container;
    public SampleImplementation2()
    {
        this.number = 0;
        this.name = "";
    }
    public SampleImplementation2(int number, String name)
    {
        this.number = number;
        this.name = name;
    }
    public int getNumber()
    {
        return this.number;
    }
    public String getName()
    {
        return this.name;
    }
} 
```

虽然这是一个快速而肮脏的黑客，但它就像一个魅力。

您只需要注意 GsonBuilder 初始化期间的操作顺序即可。您必须首先初始化并注册**GraphAdapterBuilder**，并且只有在注册此工厂之后。

这很有趣（因为我不是 Java 专家，所以有点棘手）。

# javascript - javascript命名空间问题jsfiddle

> ID：15627575
> 
> 赞同：1
> 
> 时间：2013-03-26T01:01:46.690
> 
> 标签：javascript

我在这里有代码[http://jsfiddle.net/morenoh149/HWbuv/1/](http://jsfiddle.net/morenoh149/HWbuv/1/)

这应该很容易解决。为什么找不到 itemClicked？

我的 html `13" tortilla<input id="1" type="checkbox" onClick="itemClicked()"> <a id="console">the</a>`

相关的 javascript

```
function itemClicked(element, id) {
if (element.checked) {
    list.push(item[id]);
    addItem(item[id]);
} else {
    for (x in list) {
        if (list[x].id == id) list.splice(x, 1);
    }
    subtractItem(item[id]);
}
var e = document.getElementById("console");
e.innerHTML = "blah";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T01:08:57.750

jsFiddle 将代码放在 window.onload 处理函数中，所以如果你在 Javascript 面板中声明一个函数，它就不是全局的。

通过将其分配给窗口使其成为全局：

```
function itemClicked(element, id) {
    /...
}
window.itemClicked = itemClicked; 
```

或者：

```
 window.itemClicked = function(element, id){...} 
```

# node.js - 给定一个 URL，使用 Node 检索该页面上最大的图像

> ID：15627580
> 
> 赞同：2
> 
> 时间：2013-03-26T01:02:26.070
> 
> 标签：node.js, express

我希望在 Angular.js 网络应用程序中构建一个功能，允许用户将 URL 粘贴到亚马逊或 Zappos 等电子商务网站，并从该页面检索主要产品图像。我的计划是将 url 发布到我的 express API 并在服务器上处理图像检索。

[我最初的计划是下载原始 html，用htmlparser](https://github.com/harryf/node-soupselect)解析出来，用[soupselect](https://github.com/tautologistics/node-htmlparser/)选择所有 html 图像元素并检索它们的 src 属性。理想情况下，我想实现一个可以在任何站点上工作的解决方案，而不仅仅是为特定零售商的站点硬编码值（使用特定的已知 css 类名称）。我做出的一个假设是页面上最大的图像可能是主要产品图像，根据这个逻辑，我决定尝试按文件大小对图像进行排序。我的想法是使用每个图像的 src url 发出 http 头请求，以使用 content-length 标头属性确定它们的大小。到目前为止，这种方法效果很好，但我真的很想避免发出如此多的 http 请求，即使它们只是头请求。

我觉得有更好的方法可以做到这一点，使用 PhantomJS 之类的东西来加载整个页面并以这种方式解析会更容易吗？我试图尽快完成这项工作，从而避免下载所有图像。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:11:18.480

我认为最好使用的图像不是文件大小最大的图像，而是页面上显示最大的图像。PhantomJS 或许可以帮助您确定这一点。加载页面，但指示 PhantomJS 不加载图像。然后选择计算尺寸最大的图像元素。这只有在页面使用 CSS 或 img 上的宽度和高度属性来赋予它尺寸时才有效。

或者，您可以将图像 URL 发送回客户端，让客户端获取图像并找出最大的图像。这限制了服务器必须发出的请求数量，并且如果最大的不是最好的，它允许用户快速选择不同的图像。

# html - 如何在 css 中添加元素之前等待一段时间？javascript？

> ID：15627584
> 
> 赞同：0
> 
> 时间：2013-03-26T01:02:54.653
> 
> 标签：html, function, css, sleep, wait

我有一个问题，我会解释。我正在用 HTML5 和 CSS3 制作动画。我的想法是一架飞机飞来飞去，过了一会儿它发射了一枚导弹。我要做的是让导弹在那之后出现。我考虑过一段时间（我选择的任何时间）使用 javascript 来更改我的 div 的 z-Index 属性（因为我将导弹图像放入 div 容器中）。为此，我在底部找到了睡眠功能。我创建了我知道它有效的“出现”函数，因为它改变了我的 zIndex 值，但它不会等待我想要的 2 秒。

我也认为我有使用可见性属性的解决方案，但我有同样的问题，睡眠功能根本不等待。

有什么建议么？谢谢

```
 function sleep(milliseconds) {
      var start = new Date().getTime();
      for (var i = 0; i < 1e7; i++) {
        if ((new Date().getTime() - start) > milliseconds){
          break;
        }
      }
    }

    function appear(object){

    sleep(200000);
    var objective = document.getElementById(object);

    objective.style.zIndex=1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:05:56.530

您可以将函数传递给`setTimeout`将在 x 毫秒内调用该函数的函数。

```
function waitForMe() {
    alert('triggered!');
}

// Call waitForMe in 200000ms
setTimeout(waitForMe, 200000); 
```

因此，对于您的示例，您可能希望使用 2000（2 秒），而不是 200000（200 秒）：

```
function appear(object) {
    setTimeout(function () {
        var objective = document.getElementById(object);
        objective.style.zIndex=1;
    }, 2000);
} 
```

**隐藏和显示元素**

您可以通过以下几种方式隐藏和显示方法：

1.  按照您的建议使用`z-index`，可能不是最好的方法，因为我们实际上可以隐藏它而不是将其发送到页面的后面。

    ```
    objective.style.zIndex = 1; 
    ```

2.  使用`display`，这完全隐藏了对象。

    ```
    // hide
    objective.style.display = 'none';
    // show
    objective.style.display = 'block'; 
    ```

3.  使用`visibility`，这将隐藏对象，但仍会占用页面空间。`position:fixed`如果您使用或，这无关紧要`position:absolute`。

    ```
    // hide
    objective.style.visibility = 'hidden';
    // show
    objective.style.visibility = 'visible'; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:07:07.583

您可以围绕目标创建一个 div，然后像这样使用 javascript 添加它

```
 document.getElementById('objectivespan').innerHTML=imagehere; 
```

除此之外，您可以使用

```
 objective.style.visibility='hidden'; 
```

并将其更改为objective.style.visibility='visible';

对于延迟，使用

```
 function sleep(){
      alert('slept');
  }
  SetTimeout('sleep', 10000); 
```

# jquery - code.jquery.com 对特定 IP 无响应。他们节流吗？

> ID：15627586
> 
> 赞同：1
> 
> 时间：2013-03-26T01:03:03.970
> 
> 标签：jquery

今天我们遇到了一个有趣的问题，code.jquery.com 对我们的一个 IP 地址没有响应。

我只是想知道他们是否有限制或使用限制，或者是否其他人在连接到他们的网站时遇到任何问题。

这尤其成问题，因为这意味着我们浏览到的任何站点都需要从 code.jquery.com 中提取库，也不会加载或加载缓慢，具体取决于它们包含库的方式。（即它只是在尝试下载 jquery***.js 组件时卡住了）。

希望有人能提供一些线索。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:12:52.010

根据我的经验，我从来没有遇到过任何节流问题，而且我知道不知道实施了任何节流。

如果出现这些问题，我已经开始使用本地回退，以便继续运行。您可以通过执行以下操作来做到这一点：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
if (!window.jQuery)
{
    document.write('<script src="/assets/js/jquery.js" type="text/javascript"><\/script>');
}
</script> 
```

如果您更新版本，只需使用 CDN 版本更新本地版本。这将为您提供两全其美的优势，一个 CDN 版本和一个本地版本，因此无论如何事情都会继续工作。

# mips - 使用移位进行除法的问题

> ID：15627589
> 
> 赞同：0
> 
> 时间：2013-03-26T01:03:40.413
> 
> 标签：mips, division

我在使用 MIPS 实现除法算法时遇到了一些麻烦，我假设它与我移动和设置最低有效位的方式有关，但我并不完全确定。

算法是这样的：

1) 余数寄存器减去除数寄存器，将结果放入余数寄存器。

2a) 如果余数 >= 0，则将商寄存器左移，将新的最右边位设置为 1

2b) 如果余数<0，则将除数寄存器与余数寄存器相加，并将结果存入余数寄存器（恢复余数先前的值）。将商寄存器右移，将最右边的位设置为 0。

3) 将除数寄存器右移一位

4) 重复 n+1 次。由于我们正在进行无符号 8 位除法，我认为这意味着 9 次重复

编辑：为了简单起见，我只设置了 $t0 = 12 和 $t1 = 5。但是对于商，我得到 63，余数得到 0

```
 .data
    quotient_a:     .asciiz "Quotient (a/b): "
    remainder_a:        .asciiz "Remainder (a/b):"
    quotient_b:     .asciiz "Quotient (b/a): "
    remainder_b:        .asciiz "Remainder (b/a):"
    error:          .asciiz "Sorry, divide-by-zero not allowed"
    new_line:       .asciiz "\n"

    .text
main:
    li $s0, 8   #8 bit

    li $t0, 12
    li $t1, 5

    ## Quotient  A message
    la $a0, quotient_a      # load the addr of display_sum into $a0.
    li $v0, 4           # 4 is the print_string syscall.
    syscall             # do the syscall.

    ##Computer the Quotient and remainder
    ## $t0 = a     $t1 = b
    ## $t0 = dividend       $t1 = divisor
    li $t2, 0       ##Quotient
    li $t3, 0       ##Remainder
    li $t9, 0       ##i
    li $s0, 9       ##count

loop:
    sub $t3, $t3, $t1
    blt $t3, 0, less_than
    ## >= 0
    sll $t2, $t2, 1
    addi $t2, $t2, 1
    j cont

less_than:
    add $t3, $t3, $t1
    sll $t2, $t2, 1

cont:   
    srl $t1, $t1, 1 
    addi $t9, $t9, 1
    bne $t9, $s0, loop

    ## print the quotient 
    move $a0, $t2
    li $v0, 1           # load syscall print_int into $v0.
    syscall             # make the syscall.

    ## new line
    la $a0, new_line        # load the addr of new_line into $a0.
    li $v0, 4           # 4 is the print_string syscall.
    syscall 

    ## Remainder A message
    la $a0, remainder_a         # load the addr of display_sum into $a0.
    li $v0, 4           # 4 is the print_string syscall.
    syscall             # do the syscall.

    ## print the remainder 
    move $a0, $t3
    li $v0, 1           # load syscall print_int into $v0.
    syscall             # make the syscall.

    #Exit Program
    li $v0, 10          # syscall code 10 is for exit.
    syscall             # make the syscall. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:15:25.220

算法的描述对我来说有点不对劲。这就是 C 中有效的 8 位除法算法的样子：

```
unsigned char Q,R;
unsigned char N=12,D=5;
int i;

Q = 0;
R = 0;
for (i = 0; i < 8; i++) {
    R <<= 1;
    R |= (N & 0x80) >> 7;
    N <<= 1;
    Q <<= 1;
    if (R >= D) {
        R -= D;
        Q |= 1;
    }
} 
```

将其转录成 MIPS 程序集应该不会太困难。

# linq - 是否可以在以下 LINQ 语句中过滤包含实体的结果

> ID：15627590
> 
> 赞同：0
> 
> 时间：2013-03-26T01:03:43.143
> 
> 标签：linq, filter

我想`Users`通过它包含的布尔属性过滤此 LINQ 语句中的实体。那可能吗？

```
var Subscriber = db.Subscribers
                           .Include(s => s.Users)
                           .Include(s => s.SubscriberNotes)
                           .Include(s => s.Orders)
                           .Include(s => s.Websites.Select(w => w.DomainNames))
                           .Single(s => s.SubscriberId == id); 
```

就像是`Where S.Users.isOwner = true`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:35:51.710

由于我没有可用的原始数据集，因此我会从头顶给您一些代码-我想您可以执行以下操作：

```
db.Subscribers.Include(s => s.Users.Where(user => user.IsOwner == true)) 
```

...然后继续其余的`Include`语句。

# javascript - 解析从 javascript JSON 调用返回的数据

> ID：15627595
> 
> 赞同：0
> 
> 时间：2013-03-26T01:05:11.007
> 
> 标签：javascript, json

此代码在 Button onClick 事件上：

```
function loadJSONData(url) {
  var headID = document.getElementsByTagName("head")[0];
  var newScript = document.createElement('script');
      newScript.type = 'text/javascript';
      newScript.src = url;
  headID.appendChild(newScript);
}

loadJSONData('http://api.lemonfree.com/listings?key=2806cdf10605dc9598b1cf3a2387acb7&make=HUMMER&model=H2&zip=80901&distance=100&per_page=25&sortby=Price&sortdir=ASC&year_from=2005&year_to=2008&format=json&callback=processJSONData'); 
```

* * *

此代码位于加载 JavaScript 区域

```
function processJSONData(data){
  alert( "Id: " + data.response.requestType );

  console.log( 'Id:' );
  console.log( data.response.requestType );
} 
```

* * *

当我按下按钮时，会触发 onclick 事件并返回以下 JSON 数据。

问题是我无法弄清楚如何用它来引用数据。

我已经尝试了我能想到的一切来访问数据元素。

```
data.response.requestType,
data.response.result[0].id

response.requestType,
response.result[0].id 
```

等等

www.jsonlint.com 将返回的数据验证为有效的 json，jsonviewer.stack.hu 也将返回的数据验证为有效的 json。

任何帮助将不胜感激。

标记

* * *

如果您在浏览器中输入此信息，您将收到返回的数据

[http://api.lemonfree.com/listings?key=2806cdf10605dc9598b1cf3a2387acb7&make=HUMMER&model=H2&zip=80901&distance=100&per_page=25&sortby=Price&sortdir=ASC&year_from=2005&year_to=2008&format=json&callback=processJSONData](http://api.lemonfree.com/listings?key=2806cdf10605dc9598b1cf3a2387acb7&make=HUMMER&model=H2&zip=80901&distance=100&per_page=25&sortby=Price&sortdir=ASC&year_from=2005&year_to=2008&format=json&callback=processJSONData)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:24:15.187

您的`loadJSONData`函数实际上使用[JSONP](http://en.wikipedia.org/wiki/JSONP)，因此您根本不需要解析任何东西 -`data`只是对象。

只有柠檬免费 api 似乎不支持 JSONP，您链接到的资源是纯 JSON - 缺少回调“填充”。[SOP](http://en.wikipedia.org/wiki/Same_origin_policy)会阻止您直接通过 Ajax 访问它，因此您需要使用某种代理。

# android - fffmpeg 从 rtsp 获取帧

> ID：15627601
> 
> 赞同：1
> 
> 时间：2013-03-26T01:06:06.117
> 
> 标签：android, ffmpeg, rtsp, ip-camera

我正在使用 IP CAMERA，我正在尝试在 Android中使用 ffmpeg[教程](https://github.com/chelyaev/ffmpeg-tutorial)

我得到框架并发送到位图并且运行良好

但是当它从 rtsp 获取帧时，错误的帧已损坏

我发现[了这个](https://github.com/chelyaev/ffmpeg-tutorial)和[这个](https://github.com/chelyaev/ffmpeg-tutorial)

但它不起作用

有人有解决方案吗？

```
[h264 @ 0xaacfe20] concealing 977 DC, 977 AC, 977 MV errors
[h264 @ 0xaacfe20] negative number of zero coeffs at 11 9
[h264 @ 0xaacfe20] error while decoding MB 11 9 
```

当我在电脑上运行教程时，我发现

这是我的代码

```
AVFormatContext *gFormatCtx = NULL;

AVCodecContext *gVideoCodecCtx = NULL;
AVCodec *gVideoCodec = NULL;
int gVideoStreamIdx = -1;

AVFrame *gFrame = NULL;
AVFrame *gFrameRGB = NULL;

struct SwsContext *gImgConvertCtx = NULL;

int gPictureSize = 0;
uint8_t *gVideoBuffer = NULL;

int openMovie(const char filePath[])
{
int i;

if (gFormatCtx != NULL)
    return -1;
/*
if (av_open_input_file(&gFormatCtx, filePath, NULL, 0, NULL) != 0)
    return -2;
*/
gFormatCtx = avformat_alloc_context();

if (avformat_open_input(&gFormatCtx, filePath,NULL,NULL) != 0)
    return -2;

if (av_find_stream_info(gFormatCtx) < 0)
    return -3;

for (i = 0; i < gFormatCtx->nb_streams; i++) {
    if (gFormatCtx->streams[i]->codec->codec_type == AVMEDIA_TYPE_VIDEO) {
        gVideoStreamIdx = i;

        break;
    }
}
if (gVideoStreamIdx == -1)
    return -4;

gVideoCodecCtx = gFormatCtx->streams[gVideoStreamIdx]->codec;

gVideoCodec = avcodec_find_decoder(gVideoCodecCtx->codec_id);
if (gVideoCodec == NULL)
    return -5;

if (avcodec_open(gVideoCodecCtx, gVideoCodec) < 0)
    return -6;

gFrame = avcodec_alloc_frame();
if (gFrame == NULL)
    return -7;

gFrameRGB = avcodec_alloc_frame();
if (gFrameRGB == NULL)
    return -8;

gPictureSize = avpicture_get_size(PIX_FMT_RGB565LE, gVideoCodecCtx->width, gVideoCodecCtx->height);
gVideoBuffer = (uint8_t*)(malloc(sizeof(uint8_t) * gPictureSize));

avpicture_fill((AVPicture*)gFrameRGB, gVideoBuffer, PIX_FMT_RGB565LE, gVideoCodecCtx->width, gVideoCodecCtx->height);

return 0;
}

int decodeFrame()
{
int frameFinished = 0;
AVPacket packet;

gVideoCodecCtx->time_base= (AVRational){1, 10};

while (av_read_frame(gFormatCtx, &packet) >= 0) {
    if (packet.stream_index == gVideoStreamIdx) {
        avcodec_decode_video2(gVideoCodecCtx, gFrame, &frameFinished, &packet);

        if (frameFinished) {
            gImgConvertCtx = sws_getCachedContext(gImgConvertCtx,
                gVideoCodecCtx->width, gVideoCodecCtx->height, gVideoCodecCtx->pix_fmt,
                gVideoCodecCtx->width, gVideoCodecCtx->height, PIX_FMT_RGB565LE, SWS_BICUBIC, NULL, NULL, NULL);

            sws_scale(gImgConvertCtx, gFrame->data, gFrame->linesize, 0, gVideoCodecCtx->height, gFrameRGB->data, gFrameRGB->linesize);

            av_free_packet(&packet);

            return 0;
        }
    }

    av_free_packet(&packet);
}

return -1;
}

void copyPixels(uint8_t *pixels)
{
memcpy(pixels, gFrameRGB->data[0], gPictureSize);
}

int getWidth()
{
return gVideoCodecCtx->width;
}

int getHeight()
{
return gVideoCodecCtx->height;
}

void closeMovie()
{
if (gVideoBuffer != NULL) {
    free(gVideoBuffer);
    gVideoBuffer = NULL;
}

if (gFrame != NULL)
    av_freep(gFrame);
if (gFrameRGB != NULL)
    av_freep(gFrameRGB);

if (gVideoCodecCtx != NULL) {
    avcodec_close(gVideoCodecCtx);
    gVideoCodecCtx = NULL;
}

if (gFormatCtx != NULL) {
    av_close_input_file(gFormatCtx);
    gFormatCtx = NULL;
}

} 
```

# php - 创建漂亮的数字 - 如何使用 log10 处理 < 0 的数字？

> ID：15627604
> 
> 赞同：0
> 
> 时间：2013-03-26T01:06:28.860
> 
> 标签：php, math

我整理了一个函数来创建“漂亮的数字”来显示标签。该函数`log10`用于规范化奇数。不幸的是，**`log10`不处理数字 < 0 但返回 NAN**。
现在，我有一个“丑陋”的数字，例如`-2.36`，如何获得最近的好数字，例如`-2.3`或`-2.0`？

如果我将其转换为`2.36`以便通过函数并将其乘以`-1`之后，我会得到`-2.4`---> 不行，因为它是必需的`nice-number > ugly-number`。

有任何想法吗？

定义漂亮数字等的链接：
[http :](http://wiki.tcl.tk/16640)
[//wiki.tcl.tk/16640 图表上“漂亮”网格线间隔的算法](https://stackoverflow.com/questions/361681/algorithm-for-nice-grid-line-intervals-on-a-graph)
[四舍五入到最接近的漂亮数字](https://stackoverflow.com/questions/7725278/round-to-nearest-nice-number)

这是我的代码：

```
function niceNum($range, $round) {
    // $exponent: exponent of range
    // $fraction: fractional part of range
    // $niceFraction: nice, rounded fraction  
    if ($range==0) return 0;

    $exponent = floor(log10($range));
    $fraction = $range / pow(10, $exponent);

    if ($round) {
        if ($fraction < 1.5)
            $niceFraction = 1;
        elseif ($fraction < 3)
            $niceFraction = 2;
        elseif ($fraction < 7)
            $niceFraction = 5;
        else
            $niceFraction = 10;
    } else {
        if ($fraction <= 1)
            $niceFraction = 1;
        elseif ($fraction <= 2)
            $niceFraction = 2;
        elseif ($fraction <= 5)
            $niceFraction = 5;
        else
            $niceFraction = 10;
    }
    return $niceFraction * pow(10, $exponent);
} 
```

# list - OCaml 中的轮换列表

> ID：15627607
> 
> 赞同：3
> 
> 时间：2013-03-26T01:06:45.323
> 
> 标签：list, rotation, ocaml

我想编写一个函数，该函数返回一个新列表，其中包含与向右“旋转”次数`rotate n l`相同的元素。例如，`l``n`

> `rotate 0 [1;2;3;4]`应该返回`[1;2;3;4]`
> `rotate 1 [1;2;3;4]`应该返回`[4;1;2;3]`
> `rotate 2 [1;2;3;4]`应该返回`[3;4;1;2]`
> `rotate 3 [1;2;3;4]`应该返回`[2;3;4;1]`
> `rotate 4 [1;2;3;4]`应该返回`[1;2;3;4]`
> 等等。

小于 0 的行为应该与等于 0 的行为相同。`rotate n`我想在不使用.`n``n``@``Pervasives`

**更新：**这是我写的旋转函数：

```
let rot1 l =
  let rec iterate acc = function
      [] -> []
    | [x] -> x :: List.rev acc
    | x :: l -> iterate (x :: acc) l
  in
  iterate [] l;; 
```

但我希望它在不使用`List.rev`. 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T01:25:47.850

同意杰弗里，向我们展示你的尝试。如果您需要开始，这里有一个小提示。如果您可以编写一个仅执行 1 次旋转的函数，即等效于`rotate 1 l`. （我称之为`one_rot`）。那么`rotate`可以很容易地定义为：

```
let rec rotate n l = 
  match n with 
  | 0 -> l
  | _ -> rotate (n-1) (one_rot l) 
```

你的解决方案对我来说非常好。不确定您对 List.rev 有什么看法，但这是一个完全独立的`one_rot`. 请注意，我们必须牺牲尾递归。你也可以把它缩短一点：

```
let rec last = function
  | [] -> assert false 
  | [x] -> x
  | x::xs -> last xs

let rec init = function
  | [] -> []
  | [x] -> []
  | x::xs -> x::(init xs)

let one_rot l = (last l)::(init l) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-03T02:45:31.820

This problem can be solved by combining these 3 functions:

cat(skip(list, places), take(list, places))

The implementation looks like:

```
let rec cat = function
    ([], y) -> y
    | (x::xs, y) -> x :: cat (xs, y)

let rec skip = function
    ([], _) -> []
    | (_::xs as xs1, c) -> if c > 0 then skip(xs, c - 1) else xs1

let rec take = function
    ([], _) -> []
    | (x::xs, c) -> if c > 0 then x :: take(xs, c - 1) else []

let cycle l i =
    cat (skip (l, i), take (l, i)) 
```

cycle ([1;2;3;4;5;6], 3);;

val it : int list = [4; 5; 6; 1; 2; 3]

# c# - 将 foreach 添加到我的班级

> ID：15627610
> 
> 赞同：0
> 
> 时间：2013-03-26T01:06:50.643
> 
> 标签：c#, class

我有一个我创建的测试类，我希望能够创建它的多个实例。然后我想使用 foreach 遍历每个实例。我看过几个论坛，`IEnumerate`但作为一个非常新的人，他们让我感到困惑。谁能给我一个新的例子。

我的课：

```
using System;
using System.Collections;
using System.Linq;
using System.Text

namespace Test3
{
  class Class1
  {
    public string   Name    { get; set; }
    public string   Address { get; set; }
    public string   City    { get; set; }
    public string   State   { get; set; }
    public string   Zip     { get; set; }  
  }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:11:21.120

您是否需要枚举类型的多个实例，或者创建一个本身可枚举的类型？

前者很简单：将实例添加到集合中，例如`List<T>()`which implement `IEnumerable<T>`。

```
// instantiate a few instances of Class1
var c1 = new Class1 { Name = "Foo", Address = "Bar" };
var c2 = new Class1 { Name = "Baz", Address = "Boz" };

// instantiate a collection
var list = new System.Collections.Generic.List<Class1>();

// add the instances
list.Add( c1 );
list.Add( c2 );

// use foreach to access each item in the collection
foreach( var item in list ){
   System.Diagnostics.Debug.WriteLine( item.Name );
} 
```

当您使用`foreach`语句时，[编译器会提供帮助并自动生成](http://forums.asp.net/t/1235252.aspx/1)与该语句交互所需的代码`IEnumerable`（例如列表）。换句话说，您不需要显式地编写任何额外的代码来遍历这些项目。

后者有点复杂，需要`IEnumerable<T>`自己实现。根据样本数据和问题，我认为这不是您想要的。

*   [如何实现 IEnumerable？](https://stackoverflow.com/questions/2789389/how-do-i-implement-ienumerable)
*   [IEnumerable vs List - 使用什么？它们是如何工作的？](https://stackoverflow.com/questions/3628425/ienumerable-vs-list-what-to-use-how-do-they-work)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:10:23.813

你的类只是一个“数据块”——你需要将你的类的多个实例存储到某种集合类中，并在集合上使用 foreach。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T01:10:46.603

```
// Create multiple instances in an array

Class1[] instances = new Class1[100];
for(int i=0;i<instances.Length;i++) instances[i] = new Class1();

// Use foreach to iterate through each instance
foreach(Class1 instance in instances) {

    DoSomething( instance );
} 
```

# ios5 - 在 iOS 5 中，如何解决我想用于 TabBar 的自定义设计的宽度问题。请看图片

> ID：15627613
> 
> 赞同：0
> 
> 时间：2013-03-26T01:07:11.667
> 
> 标签：ios5, custom-controls, tabbar, uiappearance

为了更改标签栏的外观，我的 App Delegate 中有以下代码：

```
[[UITabBar appearance] setBackgroundImage:[UIImage imageNamed:@"tabBar.png"]]; 
```

然而，结果并不是预期的！

[一只忙碌的猫 http://www.nashmexico.com/developerDocs/TabBarProblem.png](http://www.nashmexico.com/developerDocs/TabBarProblem.png)

为什么图片左下角不完整。我试过改变图像大小，结果是一样的。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:33:58.010

您设置标签栏图像的代码是正确的。

仔细检查图像的尺寸，它们应该是这样的：

低分辨率：320 x 48 72 像素/英寸 RCB 无 Alpha 通道高分辨率：640 x 96（相同）

在您提供的这个示例中，标签栏是否包含在任何其他控制器中？选项卡栏并不总是与其他控制器配合得很好，因此还有其他需要注意的地方。

# ruby-on-rails - 在 Ruby-Rails 文本中渲染卡片套装

> ID：15627617
> 
> 赞同：0
> 
> 时间：2013-03-26T01:07:29.147
> 
> 标签：ruby-on-rails, ruby, unicode, fonts

我想要一个用于纸牌手的网络应用程序，其中有一个价值下拉菜单和一个花色下拉菜单。我还希望西装实际显示为图标。我将如何渲染这些？统一码？网盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:33:36.647

您可以在 HTML 选项标签中使用编码的 unicode 字符，如下所示：

[http://jsfiddle.net/9wYyf/](http://jsfiddle.net/9wYyf/)

或者使用 rails 表单助手：

```
<% suits = [["&#9824;","spade"],["&#9829;","heart"],["&#9830;","diamond"],["&#9827;","club"]] %>

<%= select_tag 'suit', options_for_select(suits.map{|s|[s[0].html_safe, s[1]]}) %> 
```

好资源：[Unicode 中的扑克牌](http://en.wikipedia.org/wiki/Playing_cards_in_Unicode)

# javascript - 我可以直接更新所有元素的属性吗

> ID：15627618
> 
> 赞同：0
> 
> 时间：2013-03-26T01:07:34.257
> 
> 标签：javascript

例如：

```
var inputs = document.querySelectorAll('input[type="checkbox"]'); 
```

我想`checked`在所有输入上设置为 true。这可以像在 jQuery 中那样完成，而不使用 for 循环吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T01:22:03.613

`querySelectorAll`返回一个[`NodeList`](https://developer.mozilla.org/en-US/docs/DOM/NodeList)。您将需要遍历列表以更改其中的每个项目（jQuery 也在后台使用 .each 循环遍历整个集合）

您可以使用循环（for、while 等），也可以使用原型`forEach`上的方法`Array`

[https://developer.mozilla.org/en-US/docs/DOM/NodeList#Workarounds](https://developer.mozilla.org/en-US/docs/DOM/NodeList#Workarounds)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T01:17:27.907

不，如果不对节点进行某种形式的迭代，就无法做到这一点。jQuery 也会遍历节点，它只是对用户隐藏它。

最接近类似 jQuery 的样式是在支持它的浏览器中使用[`.forEach` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)：

```
[].forEach.call(inputs, function() {
    this.checked = true;
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T01:18:34.097

> 不使用 for 循环

在某些时候，您将需要某种形式的循环。你只是希望抽象它吗？

`NodeList`s 是`Array`-like，所以你可以[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)或[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)方法 from `Array.prototype`，包括[迭代器](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array#Iteration_methods)，如[`forEach()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach). [来自 MDN](https://developer.mozilla.org/en-US/docs/DOM/NodeList#Workarounds)的示例：

> 另一种不扩展 DOM 的方法：
> 
> ```
> var forEach = Array.prototype.forEach;
> 
> var links = document.getElementsByTagName('a');
> forEach.call(links, function(link){ // works in most browsers (please document here if you find browsers where it doesn't)
>   link.style.color = '#0F0';
> }); 
> ```

但请注意，这甚至`forEach()` [取决于循环](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach#Compatibility)（`while`在这种情况下）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T01:08:58.573

使用纯 JavaScript，您可以使用如下[`querySelectorAll()`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)函数：

```
var checkboxes = document.querySelectorAll('input[type="checkbox"]');

for(var i=0; i<checkboxes.length; i++) {  checkboxes[i].checked = true; } 
```

不幸的是，这并不能避免循环，我知道你想避免它，它也没有完美的跨浏览器兼容性，可以在[这里](http://caniuse.com/queryselector)检查IE 8 只能连接到 CSS 2.1 选择器和 Pre IE8 不被支持除了使用大量代码和避免使用 jQuery，这是最好的。

我知道您想避免使用 jQuery，但是，如果您改变主意，可以尝试以下方法：

```
$('input[type="checkbox"]').attr('checked', 'checked') 
```

这应该连接到任何复选框输入，并使用 jQuery`attr()`函数将其属性设置为选中。

如果这不起作用，请尝试为您的复选框提供自己的类名，例如复选框，然后尝试如下：

```
$('.checkbox').attr('checked', 'checked') 
```

这将有助于解决兼容性问题并避免循环，但如果您不想走 jQuery 路线，请忽略。

# javascript - 在 mouseleave 上保持 Twitter Bootstrap 工具提示打开

> ID：15627619
> 
> 赞同：17
> 
> 时间：2013-03-26T01:07:41.977
> 
> 标签：javascript, jquery, twitter-bootstrap, tooltip, preventdefault

对于特定情况和元素，我需要默认显示引导工具提示（一旦加载页面）并始终保持打开状态（即使在鼠标悬停和鼠标悬停时）。

这是我用来在元素上默认打开工具提示的代码：

```
$('#myelement').tooltip('show'); 
```

现在我不确定如何防止/禁用鼠标悬停和鼠标悬停时工具提示的默认操作。任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-26T11:09:49.603

找到解决方案。手动触发器可以解决问题 - 这是更新的代码：

```
$('.taskTooltip').tooltip({trigger: 'manual'}).tooltip('show'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-17T18:29:06.270

在 show 之后使用 unbind() ：它将删除所有事件处理程序，因此工具提示不会在 mouseleave 上隐藏

```
$(".circle").tooltip("show");
$(".circle").unbind();
```

```
.circle{
margin-left:100px;
margin-top:80px;
width:10px;
height:10px;
background-color:#0088ff;
border-radius:50%;
border:1px solid #ff8800;

}
```

```
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<div class="circle" data-toggle="tooltip" data-placement="top" title="Hello World !"></div>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-09T02:54:59.660

你也可以试试这个。

jsfiddle：[https ://jsfiddle.net/shuNaka/o1ncd6r7/](https://jsfiddle.net/shuNaka/o1ncd6r7/)

js：

```
$('.switch').on('click touch', function (e) {
  $('.tltip-element').not($(this).parents('.tltip-wrapper').find('.tltip-element')).fadeOut('fast');
  $(this).parents('.tltip-wrapper').find('.tltip-element').fadeToggle('fast');
}); 
```

html:

```
<div>
  <div class="tltip-wrapper">
    <a href="#" class="switch">
      click me 1 </a>
      <div class="tltip-element" style="display: block;">
        <div class="tltip-content">
          <span>
            test_1
          </span>
          <span class="">
            test_2
          </span>
        </div>
      </div>
  </div>
</div> 
```

CSS：

```
.tltip-wrapper {
  position: relative;
  cursor: default;
}

.tltip-wrapper .tltip-element {
  color: #525252;
  background-color: rgba(255, 255, 255, 0.8);
  box-shadow: 0px 6px 12px rgba(155, 183, 182, 0.4);
  border: solid 1px #83A7AD;
  border-radius: 3px;
  padding: 12px 12px 12px 12px;
  font-size: 12px;
  text-align: left;
  display: none;
  position: absolute;
  left: 10%;
  top: -10%;
}

.tltip-wrapper .tltip-element .tltip-content {
  line-height: 0;
} 
```

# jquery - 使用 jQuery Mobile 隐藏和显示动态生成的列表视图

> ID：15627623
> 
> 赞同：0
> 
> 时间：2013-03-26T01:08:03.840
> 
> 标签：jquery, cordova, jquery-mobile

我们正在构建一个与 Phonegap 一起使用的 jQuery Mobile 应用程序。列表上的内容是通过解析 XML 文档并从中创建多个列表视图来生成的。

这些列表视图中的每一个都用于不同的日期范围，IE Div #0 用于 2013 年 5 月 1 日至 2013 年 6 月 1 日，Div #1 用于 2013 年 6 月 2 日至 2013 年 7 月 1 日。

列表视图生成良好，但发生的问题是，一旦生成它们似乎无法隐藏，然后使用 jQuery 内置的隐藏功能再次显示它们。

在页面上有 4 个带有列表视图的 div，#list0 到 #list4

无论我尝试什么（在 Javascript 控制台或本机代码中），我都无法让它们在隐藏后显示出来，或者现在它们都可见，我无法让它们隐藏。

如果您直接进入页面而不是通过 jQuery Mobile 的内置导航系统，那么隐藏和显示工作正常。所以我认为这显然与他们的导航系统有关，但我尝试或查看的任何内容似乎都没有任何解释或额外信息。

如果您有任何建议，我很乐意听取他们的意见！我已经摆弄了好几个小时，却无处可去。

* * *

开发网址： http: [//ferriesapp.ca/app/jqm/routes/horseshoebay/freeindex.html](http://ferriesapp.ca/app/jqm/routes/horseshoebay/freeindex.html)

只需单击 Departure Bay 即可查看包含生成内容的页面。

版本：

*   jQuery 移动版 1.3.0
*   jQuery 版本 1.9.1
*   科尔多瓦 2.3.0 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:52:07.090

好的，我想我明白这里的问题是什么，当您从马蹄湾导航到出发湾时，您有两个具有相同 ID 的 div。所以为了隐藏/显示，首先你需要参考活动页面。以下是代码，我希望这对你有用。

```
$("div.ui-page-active").find('#list1').css('display','none'); 
```

# java - 在字符串正则表达式 C/W 中查找重复的单词

> ID：15627624
> 
> 赞同：5
> 
> 时间：2013-03-26T01:08:10.973
> 
> 标签：java, regex, string, duplicates, words

我目前正在使用 Java 中的正则表达式，并想尝试在字符串中查找重复的单词。如果我输入了一个字符串，例如'This this is great.'。我正在使用`\\b(\\w+) \\1\\b`，但它只能识别两个重复的单词，例如字符串中的“this this”。

对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:11:49.500

将“忽略大小写”开关添加`(?i)`到您的正则表达式：

```
(?i)\\b(\\w+) \\1\\b 
```

或者，您可以先将输入折叠为小写：

```
input.toLowerCase() 
```

注意：如果您使用`String.matches()`，则正则表达式必须匹配*整个*输入，因此您需要添加`.*`到正则表达式的两端：

```
.*(?i)\\b(\\w+) \\1\\b.* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-27T15:14:47.100

```
String pattern = "\\b(\\w+)(\\b\\W+\\b\\1\\b)*"; 
Pattern r = Pattern.compile(pattern, Pattern.CASE_INSENSITIVE); 
```

您可以使用`Matcher.group()`and`Matcher.group(1)`用这种方法替换所有重复的单词。

# asp.net-mvc - 如何向 MVC 授权属性添加重载？

> ID：15627631
> 
> 赞同：0
> 
> 时间：2013-03-26T01:09:17.237
> 
> 标签：asp.net-mvc, asp.net-membership, authorization

我过去经常使用`[Authorize]`属性，它还允许您执行以下操作：

```
[Authorize(Users = "test")] 
```

但是，我想添加另一个，

```
[Authorize(IsPermitted= PermissionsEnum.ThePermission)] 
```

我有写出的逻辑来决定是否允许用户获得该权限，但我不确定如何将该重载添加到授权属性。

如果可能的话，我宁愿不做一个完全独立的授权属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:06:49.973

好吧，正如@Dave A 在评论中所说，您可以扩展本机`Authorize`属性并实现自己的授权方法，例如：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    // create your custom property
    public PermissionsEnum IsPermitted { get; set; }

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        bool authorized = // create your own validation and return a bool value                
        if (authorized)
        {
            return false;       
        }

            // if you want to have the nativa validation, call it from the base method
        return base.AuthorizeCore(httpContext);
    }
} 
```

并记住使用您的自定义授权属性来装饰您的控制器/操作，例如：

```
[MyAuthorize(IsPermitted = PermissionsEnum.Sales)]
public class OrderController : Controller 
{
   // actions...    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:27:48.990

不幸的是你不能。您可以设置的唯一可能的属性是用户和角色。所以你必须创建一个单独的 Attribute 类。

# actionscript-3 - 在as3中使用面向对象编程时，在时间轴上放一些代码可以吗？

> ID：15627640
> 
> 赞同：0
> 
> 时间：2013-03-26T01:10:39.560
> 
> 标签：actionscript-3, object

我刚刚进入面向对象编程，我想知道，是否可以在时间轴上放置一些代码，例如 stop(); 和用于移动帧的鼠标点击事件，或者所有这些也应该在单独的文件中？如果它们确实属于其他文件，我将如何去做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T03:01:50.637

MPO是你应该学习的工具作为工具。我认为时间线是 Flash 最好的部分，如果你把它扔掉，你就会无缘无故地让你的生活变得更艰难。我认为*所有*工具都有“代码方式”和“其他”方式来完成他们所做的事情，大多数开发人员的默认设置是假设代码方式展示了您的技能，并且“其他方式”显然很容易，以至于不值得你花时间学习它。

IME，事实并非如此。我已经在几种工具/语言中学习了这些“其他方式”，并且您几乎总是因为了解两者而获得更多的力量和生产力，但有很大一部分开发人员因为他们假设而对您嗤之以鼻的风险如果您真的擅长“另一种方式”，那么您正在这样做，因为您不会编码。正因如此，真正了解时间线的全部深度和微妙之处的开发者很少，几乎没有人[会谈论](http://www.meetup.com/atlflex/files)如何[做好这件事](http://www.developria.com/2010/04/combining-the-timeline-with-oo.html)。

*实际上，我使用时间线*为您几乎可以肯定在过去几天内去过其商店的客户开发可扩展的企业级 Flash 应用程序，因此我在这方面确实有相当多的经验。我的经验法则是，如果 stop() 对程序的整体功能不重要（它只是视觉上的东西），它是可以的。但是，一段时间后继续添加它会变得乏味，因此当您到达没有截止期限压力的地方时，您可能会在某个时候将其替换为使用[addFrameScript](http://troyworks.com/blog/2007/09/22/as3-movieclipaddframescript/)执行 stop() 的类。

时间线代码的最佳用途是当您需要同步事物时（例如，使用流式声音，它具有绝对零的 Actionscript 句柄来获取它）。在叙述者说“单击 thingamajig”的精确点处生成冒泡事件，并且您已将光标移动到 thingamajig 上。然后，在使用流声音控制时间线父级的 AS 代码中（或祖父级，或其他任何位置——捕捉事件的位置），您会将 thingamjig 置于切换状态（例如通过更改数据模型thingamajig负责显示）。

非常非常偶尔，我会使用时间线代码来做一些更重要的事情。一个例子是，由 Flash Builder 编译的 swf 知道它的舞台是什么颜色，但由 Flash Pro 编译的一个不[读取 swf 的字节](http://blog.natebeck.net/2010/12/tip-of-the-day-getting-a-swfs-background-color/)就不会。我有一个淡化图形的类，有时只能获得真实的舞台颜色，具体取决于它的编译方式（我不会阅读字节的混乱——坦率地说，这很荒谬）。所以，我只是假设我们正在从白色或接近它的东西淡入（我们大部分时间都是这样）。对于不是这样的罕见情况，我在 Class 的 ASDOCs 中指出，只需从时间轴填充颜色变量即可，而不必担心如何通过依赖注入将其放入其中。我认为这是一个穷人[Flash 组件](http://www.actionscript.org/resources/articles/943/4/Actionscript-and-timelines/Page4.html)属性面板。

希望能为您指明正确的方向:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:11:11.697

我认为这取决于您的意思是否可以。（不，我不是比尔·克林顿）

您将很难得到对此的积极回应，因为 SO 社区的大多数人都是开发人员，并且通常不是使用 Flash IDE/时间线编码的忠实拥护者。

话虽如此，我还是尽量保持开放的心态，并意识到 Flash IDE 在快速创建动态图形等方面占有一席之地。没有什么说你不应该在时间轴上编码，如果你绝对不应该这样做，他们不会让这成为可能。

我认为当您开始与其他开发人员合作并且必须弄清楚他们在某些影响事物的电影剪辑中将一些代码埋在时间线上的位置时，就会出现问题。对于小型项目，这并不是一个真正的问题，进入更大的团队（一次 3-5 个开发人员，也许更多）然后能够独立和协作工作成为一个挑战。

最后一点，因为您说您只是在学习 OOP。AS3 是一门很棒的语言，非常有趣，运行时提供了许多功能，因此您可以跳过 C/C++ 等中的一些细节。但是时间轴的概念是 AS3 独有的。因此，如果您学习基于时间轴做所有事情，那么转向说 C++、Java 或 C# 或任何其他 OOP 可能会变得更加困难。现在我不会强调这一点，因为你刚刚开始滚动，但只是在你前进时要记住的一些事情。

**编辑（回应布兰肯希普女士的好回答和米尔先生的评论）**

我认为开发人员方面有些傲慢。我可以为自己说话，我通常不是 WYSIWYG 编辑器的粉丝（除非我尝试构建它们，然后它们就可以了 :)。

有几个原因：

1.  在我过去的经历中，它们非常糟糕（以 Word 或 DreamWeaver 的代码输出为例，尝试在一些妈妈和流行音乐家在其中一个应用程序中拼凑的网站上工作，你也会开始讨厌它）。

2.  如果有人能够完全正确地做到这一点，那将使我积累的很多知识无效（所以它让我进入防御立场，而不是客观有效的理由，我知道）。

3.  与更大的团队合作寻找代码是关键 + 代码编辑器很糟糕（与任何替代品相比，Flash Builder [我选择的工具]、FDT、FlashDevelop、IntelliJ [我朋友的选择工具]）。

4.  来自不包含与时间线类似的任何内容的 OOP 背景，并且可能会回到这些技术。你可以选择擅长一件事或擅长五件事你选择什么？（我大大简化了，但希望你能明白要点）。我学会了使用 Eclipse 编写 Java，我可以使用相同的工具编写 C++、C、PHP 等。这并不是说我实际上总是使用 Eclipse 来处理所有事情（最近一直在使用 SublimeText），但我喜欢它始终是一种选择。顺便说一句，我不是 Eclipse “纯血统”，我很早就开始在记事本中使用 Flash IDE 和 HTML/JS，使用 Visual Studio 一段时间，最终被推入 Eclipse，但我喜欢它万物一体。

归根结底，在这种开放式的情况下，有太多因素不能说一种解决方案就是一切都结束了。打个比方，如果你要建造一个鸟舍，你可能只需要一把锤子、一些钉子​​和一些木头。相反，如果您想建造自己的人类房屋，您将需要一些不同的工具（可能包括锤子、一些钉子​​和木头）。

还有一个相关的 SO 帖子（重新散列了许多相同的点）： [Why not use Interface Builder](https://stackoverflow.com/questions/3773571/why-not-use-interface-builder)

# sql - 如何使用 SQL Server 进行拆分？

> ID：15627641
> 
> 赞同：0
> 
> 时间：2013-03-26T01:10:41.907
> 
> 标签：sql, sql-server, tsql

我想以`2009-02-27 14:30:53`这样的方式拆分 SQL Server：

```
Y     M   D   T
-----------------------
2009  02  27  14:30:53 
```

谁能帮我使用“Substring”和“Charindex”来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T01:16:25.750

您应该能够使用以下[`DATEPART`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)函数和[日期转换](http://anubhavg.wordpress.com/2009/06/11/how-to-format-datetime-date-in-sql-server-2005/)来返回时间：

```
select
  datepart(year, yourDate) y,
  datepart(month, yourDate) m,
  datepart(day, yourDate) d,
  convert(char(8), yourdate, 108) t
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/0155e2/1)

这也可以写成使用[`YEAR`](http://msdn.microsoft.com/en-us/library/ms186313.aspx),[`MONTH`](http://msdn.microsoft.com/en-us/library/ms187813.aspx)和[`DAY`](http://msdn.microsoft.com/en-us/library/ms176052.aspx)函数：

```
select
  year(yourDate) y,
  month(yourDate) m,
  day(yourDate) d,
  convert(char(8), yourdate, 108) t
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/0155e2/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:47:04.663

我**强烈同意**，如果你是一名学生，你需要为自己考虑。如果您是学生，这不是正确的学习方式，您应该尝试自己做，研究并与同龄人交谈。如果您是学生，那么这种态度会导致当今市场上大量糟糕的程序员。

**但是**，如果您是正在寻找解决方案的在职成年人，那么我碰巧有一个通用的 StrSplit() 函数。你可以像这样使用它：

```
SELECT * FROM dbo.StrSplit('91,12,65,78,56,789',',') 
```

或者您可以将其用于您的目的：

```
SELECT  (SELECT Element FROM dbo.StrSplit('2009-02-27','-') WHERE rowid=0) AS Y
        , (SELECT Element FROM dbo.StrSplit('2009-02-27','-') WHERE rowid=1) AS M
        , (SELECT Element FROM dbo.StrSplit('2009-02-27','-') WHERE rowid=2) AS D
        , (SELECT Element FROM dbo.StrSplit('14:30:53',':') WHERE rowid=0) AS H
        , (SELECT Element FROM dbo.StrSplit('14:30:53',':') WHERE rowid=1) AS M
        , (SELECT Element FROM dbo.StrSplit('14:30:53',':') WHERE rowid=2) AS S 
```

这是定义：

```
CREATE FUNCTION dbo.StrSplit ( @pvsString VARCHAR(MAX), @pvsSeparator CHAR(1) )
RETURNS @fnorsList TABLE ([rowid] INT, [Element] NVARCHAR(500))
AS
BEGIN
    DECLARE @vsElement NVARCHAR(255)
    DECLARE @viPos INT
    DECLARE @viRow INT SET @viRow = 0

    WHILE CHARINDEX( @pvsSeparator, @pvsString) > 0
    BEGIN
        SELECT @viPos  = CHARINDEX(@pvsSeparator, @pvsString)  
        SELECT @vsElement = SUBSTRING(@pvsString, 1, @viPos-1)

        INSERT INTO @fnorsList ([rowid], [Element]) SELECT @viRow, @vsElement
        SELECT @pvsString = SUBSTRING(@pvsString, @viPos+1, LEN(@pvsString)-@viPos)
        SET @viRow = @viRow + 1
    END
    INSERT INTO @fnorsList ([rowid], [Element]) SELECT @viRow, @vsElement
    RETURN
END 
```

# ruby-on-rails-3 - 如何使用 Postgres 在 Rails 模型中进行 .group 和 .sum？

> ID：15627648
> 
> 赞同：0
> 
> 时间：2013-03-26T01:11:24.397
> 
> 标签：ruby-on-rails-3, postgresql, rails-postgresql

我的开发环境（SQLite）中有一个功能方法，看起来像这样：

```
def self.ytd
Production.find(
    :all,
    conditions: ["year == ?", Time.now.year],
    select: "carrier_id, amount, SUM(amount) as sum_amount",
    group: :carrier_id
    )
end 
```

此方法成功搜索由`:carrier_id`和`:amount`列组成的表。`:amount`然后它根据分组对列求和`:carrier_id`

我正在尝试使用 Postgresql 转换为生产环境。下面的代码成功地对记录进行分组，但是我无法对`:amount`. 我曾尝试修改`.sum("productions.amount")`该方法但没有成功。我相信有一个简单的解决方案，但它暗示我..有人可以帮忙吗？谢谢

```
def self.ytd
Production.select("DISTINCT ON (productions.carrier_id) productions.carrier_id, productions.amount ")
               .where("productions.year = (?)", "#{Time.now.year}")
               .group("productions.amount, productions.carrier_id, productions.id")
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:08:01.880

Removed `DISTINCT ON`， added`SUM(amount) as sum_amount`和 grouped on`:carrier_id`产生了预期的结果。

```
def self.ytd
Production.select("productions.carrier_id, SUM(amount) as sum_amount")
               .where("productions.year = (?)", "#{Time.now.year}")
               .group("productions.carrier_id")      
end 
```

# javascript - 从放大和缩小方法离开 jquery

> ID：15627653
> 
> 赞同：0
> 
> 时间：2013-03-26T01:12:12.580
> 
> 标签：javascript, jquery

我找到了由 Jack Moore [http://www.jacklmoore.com/zoom/](http://www.jacklmoore.com/zoom/)编写的用于在鼠标悬停或鼠标按下时放大图像的插件，我在隐藏前一张图像并添加第二张图像后使用它。我想返回到第一张图像 - 按下按钮选项或双击 - 但我意识到，只要调用缩放方法，就不可能做任何事情来离开放大功能。我的代码的简化版本如下：

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src='jquery.zoom.js'></script>
        <script>
            function changeimg() {
                $("#img1").hide();
                text = "<span id='onclickzoom'>";
                text += "<img src='img2.png' onclick='zoomfunc()' alt='hello'/></span>";
                $("body").append(text);
                zoomfunc();
            }
            function gbf() {
                $('#onclickzoom').remove();
                $("#img1").show();
            }
            function zoomfunc() {
                $('#onclickzoom').zoom({
                    on: 'click'
                }); /*I need to leave in a moment from this method using a button or double click*/
            }
        </script>
    </head>
    <body>
        <img src="img1.png" onclick='changeimg(this)'>
    </body>
</html> 
```

gbf() 函数用于恢复第一张图像，我不知道如何调用它或退出此缩放模式。有任何想法吗？

# python - 使用 python 存储基于日期的数据的好方法？

> ID：15627656
> 
> 赞同：3
> 
> 时间：2013-03-26T01:12:33.000
> 
> 标签：python, date, storage

我正在做一个小宠物项目，我想根据日期存储数据，最好使用 python。

要存储的数据基本上是活动日志，即您在某个日期的某个时间段内进行了许多活动。我希望每个日期的“活动”数量在 0 到 100 之间。

我想使用尽可能接近“标准”的方式存储数据。我对我应该使用什么格式有点犹豫。

什么是存储此类数据的好方法，以及如何使用 python（包括第三方库和/或服务）来完成？

编辑：我完全知道有很多不同的方法可以实现这一点，我正在寻找的是最合适的方法来完成它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T01:32:01.290

首先，您要使用[ISO 8601](http://www.cl.cam.ac.uk/~mgk25/iso-time.html)作为日期。这很简单，因为它简单、分类正确且对世界任何地方的人都没有歧义。

![ISO 8601 上的 XKCD](../Images/143da48ec797dfa063ec8d9588479bb6.png)

其次，我可能会将数据存储在 JSON 中。根据您的方法，它应该具有与 pickle 大致相同的简单性，但数据将可用于其他语言的程序。顺便说一句，您不必担心文件中的具体表示，就像您不必担心 pickle 格式的复杂性一样。您的数据可以是任何可序列化的对象（列表、字典等）。根据您描述的用例，您可能不会拥有特别大的数据集。使用 JSON 甚至 pickle 读取或写入存储的数据要简单得多。如果您的程序增长，使用 SQL 语句可能会更复杂。（此外，如果您需要在任何时候深入研究文件，JSON 或多或少是人类可读的。对我来说，这是处理相对较小的数据集时的主要优势。）

例如，我会做这样的事情：

```
import json

with open('file.dat','r') as f:
  data = json.load(f) 
```

您的 JSON 将始终可以被其他软件读取，包括不是用 Python 编写的东西。保存数据同样简单。

```
with open('file.dat','w') as f:
  json.dump(data, f) 
```

阅读[Python 的 JSON 库](http://docs.python.org/2/library/json.html)；他们很简单。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T01:47:53.390

只需使用 sqlite3 并将其存储为时间戳。这就是您遇到（和开发）的 90%（可能被夸大）的应用程序将如何存储他们以后可能需要报告的数据（日志文件等内容除外）

```
import sqlite3,time

db = sqlite3.connect("my_database.sql") #you can put whatever ... created if not exist
conn = db.cursor()

conn.execute("CREATE TABLE IF NOT EXISTS Activities (timestamp int, name text);")

def AddActivity(activityName):
    conn.execute("INSERT INTO Activities (timestamp,name) VALUES (?,?)",(time.time(),activityName))
    db.commit()

def GetAllActivitiesOnDate(month,day,year):
    start_time = time.mktime((year,month,day,0,0,0,0,0,0)) 
    end_time = time.mktime((year,month,day,23,59,0,0,0,0)) #use 1 for last  argument if you live somewhere with dst
    conn.execute("SELECT * FROM Activities WHERE timestamp > ? AND timestamp < ?",(start_time,end_time))
    return conn.fetchall() 
```

那么你会做类似的事情

```
AddActivity("Jumping Jacks")
time.sleep(10)
AddActivity("Push Ups")

import datetime
today = datetime.datetime.now()
activities = GetAllActivitiesOnDate(today.month,today.day,today.year)
print "Found %d Entries"%len(activities)
for activity in activities:
   print "Activity %s @ %s"%(activity[1],time.strftime("%x %X",
                                                 time.gmtime(int(activity[0])))) 
```

这种类型的存储具有高度可扩展性，并且易于查询您需要的确切方式......并且 sqlite 包含在 python 中，并且具有简单的界面和应用程序。它可以很好地扩展，如果您达到无法扩展的地步，用更高端的数据库替换它很简单

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T01:16:36.187

您可以使用[pickle](http://docs.python.org/2/library/pickle.html)或[JSON](http://docs.python.org/2/library/json.html)或[CSV](http://docs.python.org/2/library/csv.html)来存储它。

泡菜真的很简单：

```
import datetime
import pickle

dt=datetime.datetime(2013,3,25)

data={dt:['item 1','item 2','item 3']}

pickle.dump(data,open('/tmp/pickle.pik','wb'))

data2=pickle.load(open('/tmp/pickle.pik','rb'))

print data2==data    # True 
```

不利的一面是，pickle 对于共享数据不被认为是安全的。

# c - C用现有的常量变量初始化常量结构成员

> ID：15627657
> 
> 赞同：7
> 
> 时间：2013-03-26T01:12:36.893
> 
> 标签：c, struct, constants

我在 gcc 下使用默认 C。

我的代码：

```
typedef struct _OpcodeEntry OpcodeEntry; 
```

//

```
struct _OpcodeEntry
{
    unsigned char uOpcode;
    OpcodeMetadata pMetadata;
}; 
```

//

```
const OpcodeMetadata omCopyBytes1 = { 1, 1, 0, 0, 0, 0, &CopyBytes };

const OpcodeEntry pOpcodeTable[] =
{
    { 0x0, omCopyBytes1 },
}; 
```

错误：

```
error: initializer element is not constant
error: (near initialization for 'pOpcodeTable[0].pMetadata') 
```

如果我更改`omCopyBytes1`为上一行中实际设置的内容，则代码可以正常编译。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T01:23:45.023

您不能使用`omCopyBytes1`来初始化`pOpcodeTable[]`数组的成员，因为`omCopyBytes1`它是一个运行时常量，而不是编译时常量。C 中的聚合初始值设定项必须是编译时常量，这就是您帖子中的代码无法编译的原因。

作为一个变量，`omCopyBytes1`在内存中有自己的位置，它被初始化为一个项目数组。您可以通过指针使用此类变量，如下所示：

```
struct _OpcodeEntry {
    unsigned char uOpcode;
    const OpcodeMetadata *pMetadata;
};
...
const OpcodeEntry pOpcodeTable[] = {
    { 0x0, &omCopyBytes1 }, // This should work
}; 
```

或者，您可以将其设为预处理器常量：

```
#define omCopyBytes1 { 1, 1, 0, 0, 0, 0, &CopyBytes } 
```

如果以这种方式定义， the`omCopyBytes1`将不再是一个变量：它将是一个预处理器定义，在编译器完成之前就消失了。我建议不要使用预处理器方法，但如果你必须这样做，它就在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:23:02.527

在 C 中，静态存储持续时间的对象的初始值设定项必须是*常量表达式*。-`const`限定变量不是常量表达式。

# django - Apache 上基于 Django 的框架虚拟主机设置 https

> ID：15627659
> 
> 赞同：0
> 
> 时间：2013-03-26T01:12:42.057
> 
> 标签：django, https, apache2, mod-wsgi, django-wsgi

我正在使用基于 django 的框架，并且已经成功计算出 http 模式的 Apache 设置。基本上我已经正确地完成了设置`<VirtualHost *:80> ... </VirtualHost>`，当我这样做时， http: [//mysite.domain.com](http://mysite.domain.com)我被正确地路由到我的站点并且站点页面和皮肤得到正确呈现。

我已经设置[https://mysite.domain.com](https://mysite.domain.com)与 shibboleth 一起工作，shibboleth 正在工作，当使用 https 时，我通过 shibboleth 服务器被路由到登录凭据页面，成功登录后，我被重定向到[https://mysite。 domain.com](https://mysite.domain.com)但网站无法正确呈现，并且外观与[http://mysite.domain.com](http://mysite.domain.com)不同。

这是我的 Apache 设置，我试图了解我在这里做错了什么

```
<VirtualHost *:443>
     ServerAdmin myname@mydomain.com
     DocumentRoot /code/vEnviornment/mysite
     ServerName mydomain.com
     #<LocationMatch "^(?!/admin)">
     #<LocationMatch "^(?!/m)">
     #    RewriteEngine on
     #    RewriteRule django.wsgi(.*)$ https://mydomain.com:443$1 [L,R=301]
     #</LocationMatch>
     SSLEngine on
     #your SSL keys
     #I have removed this wasn't comfortable putting SSL key info
     #Alias /admin/media/ /usr/local/lib/python2.6/site-packages/django/contrib/admin/media/
     Alias /admin/media/ /usr/local/lib/python2.7/dist-packages/django/contrib/admin/media/
     WSGIScriptAlias /m/ /code/vEnviornment/mysite/django.wsgi
     <Directory "/">
     AuthType shibboleth
     ShibRequestSetting requireSession 1
     Require valid-user
     </Directory>
     Alias /Shibboleth.sso /tmp
     #    CustomLog /var/log/httpd/mysite/access_log common
     #    ErrorLog /var/log/httpd/mysite/error_log
    CustomLog /var/log/apache2/mysite/access_log common
    ErrorLog /var/log/apache2/mysite/error_log
</VirtualHost> 
```

这就是我如何拥有 hetup http：

```
<VirtualHost *:80>
     ServerAdmin myname@mydomain.com
     DocumentRoot /code/vEnviornment/mysite
     ServerName mysite.mydomain.com

     #aliases to serve static media directly
     #will probably need adjustment
     Alias /m/ /code/vEnviornment/mysite/static/
     Alias /upfiles/ /code/vEnviornment/mysite/myframework/upfiles/
     <DirectoryMatch "/code/vEnviornment/mysite/myframework/skins/([^/]+)/media">
        Order deny,allow
        Allow from all
     </DirectoryMatch>
     <Directory "/code/vEnviornment/mysite/myframework/upfiles">
        Order deny,allow
        Allow from all
     </Directory>
     #must be a distinct name within your apache configuration
     WSGIDaemonProcess mysite2
     WSGIProcessGroup mysite2
     WSGIScriptAlias / /code/vEnviornment/mysite/django.wsgi
     #make all admin stuff except media go through secure connection
     <LocationMatch "/admin(?!/media)">
     RewriteEngine on
         RewriteRule /admin(.*)$ https://128.101.35.71/admin$1 [L,R=301]
     </LocationMatch>
    # CustomLog /var/log/httpd/mysite/access_log common
    # ErrorLog /var/log/httpd/mysite/error_log
    CustomLog /var/log/apache2/mysite/access_log common
    ErrorLog /var/log/apache2/mysite/error_log
    LogLevel debug
</VirtualHost> 
```

我在这里做错了什么以通过**https 错误地呈现网站？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T13:17:48.227

```
Alias /m/ /code/vEnviornment/mysite/static/
 Alias /upfiles/ /code/vEnviornment/mysite/myframework/upfiles/ 
```

https 虚拟主机中缺少这两行

和

你的 WSGIScriptAlias 应该指向 / 而不是 /m/

# python - 模拟鼠标释放 Pyqt

> ID：15627661
> 
> 赞同：6
> 
> 时间：2013-03-26T01:12:49.530
> 
> 标签：python, qt, pyqt, signals, pyside

如何使用 Qt.SIGNAL 模拟鼠标释放动作？我需要在没有用户交互的情况下模拟 mouseRelease。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:03:22.757

[`clicked`](http://doc-snapshot.qt-project.org/4.8/qabstractbutton.html#clicked)这是使用 a 的信号的示例[`QPushButton`](http://doc-snapshot.qt-project.org/4.8/qpushbutton.html)：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.pushButtonSimulate = QtGui.QPushButton(self)
        self.pushButtonSimulate.setText("Simulate Mouse Release!")
        self.pushButtonSimulate.clicked.connect(self.on_pushButtonSimulate_clicked)

        self.layoutHorizontal = QtGui.QHBoxLayout(self)
        self.layoutHorizontal.addWidget(self.pushButtonSimulate)

    @QtCore.pyqtSlot()
    def on_pushButtonSimulate_clicked(self):
        mouseReleaseEvent = QtGui.QMouseEvent(
            QtCore.QEvent.MouseButtonRelease,
            self.cursor().pos(),
            QtCore.Qt.LeftButton,
            QtCore.Qt.LeftButton,
            QtCore.Qt.NoModifier,
        )

        QtCore.QCoreApplication.postEvent(self, mouseReleaseEvent)

    def mouseReleaseEvent(self, event):
        if event.button() == QtCore.Qt.LeftButton:
            print "Mouse Release"

        super(MyWindow, self).mouseReleaseEvent(event)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T03:46:46.063

您可以使用：

```
from PyQt4.QtTest import QTest

#(...) Where you want to release
QTest.mouseRelease(widget_to_release, Qt.LeftButton) 
```

这将释放小部件中心的鼠标。

还有用于`mousePress()`、`mouseClick()`和其他的方法。但是，如果您在 Windows 上测试拖放，请注意等效项`QTest.mousePress()`会阻塞，因为会`QDrag.exec_()`阻塞。

# varchar - SQL Server Varchar 到 VarBinary 的转换

> ID：15627664
> 
> 赞同：3
> 
> 时间：2013-03-26T01:13:03.550
> 
> 标签：varchar, sql-insert, varbinary

我必须将字符串“johnmelling”值插入到列为
[USERPASS] varbinary NOT NULL 的表中。

请任何人建议我，插入“johnmelling”的最佳转换是什么？

我试图插入如下，

```
Insert into table(column1)
Values(CONVERT(varbinary(1), 'johnmelling')) 
```

然后我得到了错误

第 1 行：字符串或二进制数据将被截断。

谢谢你，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-17T13:22:39.437

您正在转换为 varbinary(1)，因此您的目标数据类型是 varbinary，但您在括号中指定的整数是 1，这意味着您的数据类型的长度仅为 1；您收到该错误是因为您分配给该数据类型的长度太小。文字“johnmelling”是 11 个字符，但您试图将其存储在长度为 1 的数据类型中。

只需将括号中的整数更改为 11、50、255、最大值或任何您认为合适的长度，就不会出现该错误。

# oracle - Oracle fom Nhibernate 批量插入不起作用

> ID：15627666
> 
> 赞同：0
> 
> 时间：2013-03-26T01:13:20.303
> 
> 标签：oracle, nhibernate, batch-insert

```
<property name="adonet.batch_size">100</property> 
```

这是一些代码：

```
using (var session = SessionFactory.NHSessionFactory.OpenStatelessSession())
{
  using (var tx = session.BeginTransaction())
  {
    try
    {
      foreach (var entity in entities)
      {
        session.Insert(entity);
      }
      tx.Commit();
    }
    catch (Exception ex)
    {
    }
  }
} 
```

相同的代码，相同的配置。但 oracle 不是批量插入。

我尝试添加

```
<property name="adonet.factory_class">NHibernate.AdoNet.OracleDataClientBatchingBatcherFactory,NHibernate</property> 
```

抛出空对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T20:51:13.500

无状态会话不使用批处理。

而已。

# operating-system - 为什么 BIOS INT 0x19 在“0x7C00”处加载引导加载程序？

> ID：15627668
> 
> 赞同：8
> 
> 时间：2013-03-26T01:13:27.820
> 
> 标签：operating-system, bootloader

我们知道 BIOS 中断 (INT) 0x19 用于搜索引导签名 (0xAA55)。如果找到，则在 0x7C00 加载并执行我们的引导加载程序。

我的问题：为什么是 0x7C00？是什么原因 ？如何通过一些方法对其进行评价？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-08-31T12:19:50.193

可能是因为 MBR 被加载到内存中（通过 BIOS）到 0x7c00 地址然后 int 0x19 在扇区 0x7c00 上搜索 MBR 扇区签名 0xAA55

关于 0xAA55：

> 不是校验和，而是更多的签名。它确实提供了一些简单的证据来证明存在一些 MBR。
> 
> 0xAA55 也是一个交替的位模式：1010101001010101
> 
> 它通常用于帮助确定您是在小端还是大端系统上，因为它将读取为 AA55 或 55AA。我怀疑这是为什么将它放在 MBR 末尾的部分原因。

大约 0x7c00：

查看此网站（这可能有助于您找到答案）：[https ://www.glamenv-septzen.net/en/view/6](https://www.glamenv-septzen.net/en/view/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-22T19:09:04.017

这可能已经死了，但我要回答。

在任何引导加载程序的开始，当您将段的原点设置为`0x7c00`然后寄存器跳转地址也到那个。因此，理想情况下，如果您查看一些告诉您如何使用 int`0x19`命令的在线资源，它们将指导您如何跳转到另一个地址。

为了解决这个问题，您最好在每次跳转到新地址时将堆栈重置为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-02T11:58:51.003

（这似乎重复了以下问题：
[0000:7c00 处的内存对引导顺序有什么意义？](https://stackoverflow.com/q/2058690/1025073)
[BIOS 是否将 512 字节引导加载程序复制到 0x7c00](https://stackoverflow.com/q/32174806/1025073)）

受[前者答案的](https://stackoverflow.com/a/65337789/1025073)启发，我将引用两个来源：

*   [[笔记] 为什么在x86上MBR加载到0x7C00？（完整版）](https://gist-github-com.translate.goog/letoh/2790559?_x_tr_sl=auto&_x_tr_tl=en#int-19h-%E3%81%BE%E3%81%A7%E3%81%AE%E6%B5%81%E3%82%8Cmbr%E3%82%927c00h%E3%81%AB%E3%83%AD%E3%83%BC%E3%83%89)

> 所以，先从 David Bradley 的回复中回答关于 16KB 模型的问题：
> 
> > 它必须在 32KB 的机器上启动。DOS 1.0 至少需要 32KB，因此我们并不担心尝试以 16KB 进行引导。
> 
> 要执行 DOS 1.0，至少需要 32KB，所以没有考虑 16KB 模型。
> 
> 其次是“为什么是 32KB-1024B？”的答案：
> 
> > 我们希望为操作系统在 32KB 内加载自身留出尽可能多的空间。808x Intel 架构将内存范围的第一部分用于软件中断，然后是 BIOS 数据区。因此，我们将引导加载放在 0x7C00 (32KB-1KB) 处，以便在两者之间留出所有空间供操作系统加载。引导扇区是 512 字节，当它执行时，它需要一些空间来存放数据和堆栈，所以这是另外的 512 字节。所以 INT 19H 执行后的内存映射如下所示：

*   [为什么 BIOS 将 MBR 加载到 x86 中的 0x7C00 中？](https://www.glamenv-septzen.net/en/view/6#:%7E:text=DOS%201.0%20required%20a%20minimum%20of%2032KB,a%20boot%20in%2016KB.)

> 不，那个案子不在考虑范围之内。IBM PC 5150 ROM BIOS 开发团队成员之一，David Bradley 博士说：
> 
> > “DOS 1.0 至少需要 32KB，因此我们并不担心尝试以 16KB 启动。”
> 
> （注意：DOS 1.0 最低要求 16KiB 还是 32KiB？我不知道哪个正确。但是，至少在 1981 年的早期 BIOS 开发中，他们认为 32KiB 是 DOS 的最低要求。）
> 
> BIOS 开发团队决定 0x7C00 是因为：
> 
> 1.  他们希望为操作系统在 32KiB 内加载自身留出尽可能多的空间。
> 2.  8086/8088 使用 0x0 - 0x3FF 作为中断向量，后面是 BIOS 数据区。
> 3.  引导扇区为 512 字节，引导程序的堆栈/数据区域需要更多的 512 字节。
> 4.  因此，选择了 0x7C00，即 32KiB 的最后 1024B。
> 
> 一旦操作系统加载并启动，引导扇区在电源重置之前永远不会使用。因此，操作系统和应用程序可以自由使用 32KiB 的最后 1024B。

我希望这个答案足以确定它为什么/如何发生。

# php - 函数内的 if 语句不起作用

> ID：15627669
> 
> 赞同：0
> 
> 时间：2013-03-26T01:13:35.427
> 
> 标签：php, function, if-statement

已经发布了类似的问题，但我一直无法找到答案。

此 IF 语句本身可以正常工作。

```
$subject_id_top = "case studies";
if($subject_id_top == "case studies") {echo "active";} 
```

但是当我在函数中插入这个 IF 语句时，它不起作用。

```
<style>

.active {
color:#F00;
}
</style>

<?php 
$subject_id_top = "case studies";

function menu_active() {
 if($subject_id_top == "case studies") {echo "active";} 
}

<a class="<?php menu_active(); ?>" href="#">Case Studies</a>
?> 
```

这似乎是一个非常基本的问题，但对于我的生活，我一直无法弄清楚。社区的帮助会很大。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:16:25.590

因为`$subject_id_top`函数内部是指函数`$subject_id_top`范围之外（[全局范围](http://php.net/manual/en/language.variables.scope.php#language.variables.scope.global)），所以你必须“导入”它，可以这么说，使用以下语句：

```
global $subject_id_top; 
```

你的功能应该变成：

```
function menu_active() {
    global $subject_id_top;
    if($subject_id_top == "case studies") {echo "active";} 
} 
```

但是，以这种方式依赖外部范围的信息通常是不可取的。您可以重构您的函数以接受一个参数来规避这种行为，例如：

```
function menu_active( $subject_id_top ) {
    if($subject_id_top == "case studies") {echo "active";} 
} 
```

然后`$subject_id_top`在全局范围内使用 , 作为其参数调用该函数：

```
<?php menu_active( $subject_id_top ); ?> 
```

# php - 如何在 PHP 中创建变量并将它们传递给 Ruby？

> ID：15627671
> 
> 赞同：2
> 
> 时间：2013-03-26T01:14:17.587
> 
> 标签：php, ruby

我有一个在 Ruby 中运行的脚本，另一个在 PHP 中运行，并且，根据我的需要，不可能使其全部以相同的脚本语言运行。

我想使用 PHP 在 Ruby 中创建一个变量。目前，我有这个代码：

PHP：

```
$config = fopen("config.txt","w+");
fwrite($config,$sArguments);
fclose($config); 
```

红宝石：

```
while true do
file = File.new("config.txt", "r")
config = file.gets
file.close
end 
```

PHP 将在文件中写入下一个配置，而 Ruby 将读取它并将其转换为变量。它可以工作，但是 Ruby 必须努力读取和读取文件，并且有时无法正确读取它，因此这段代码的优化非常糟糕。

有没有更快的方法将信息从 PHP 脚本传递到 Ruby 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:06:50.693

我不是 PHP 方面的专家，但我认为“[如何从 Python（Python-Ruby 桥）运行 Ruby 代码](http://www.decalage.info/python/ruby_bridge)”提供了一些方法来完成两种语言之间的通信。尽管该页面谈到了 Ruby-Python 通信，但我很确定其中一些建议可以针对 Ruby 和 PHP 实现。

一种解决方案是使用 XML-RPC 将简单数据类型从 PHP 传输到 Ruby。Ruby 对 XML-RPC 有原生支持，我认为 PHP 有一些库可以支持 XML-RPC。

您也可以使用管道。也就是说，您通过 Ruby 的`IO.popen`. 我在“[使用管道进行 ruby​​-python 通信的可行性”中](https://stackoverflow.com/questions/14765120/feasibility-of-using-pipe-for-ruby-python-communication)为 Ruby-Python 做了类似的事情，但我还没有真正评估过性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:42:21.383

很难从给出的信息中确切地说出问题出在哪里，但是当您说 Ruby 有时无法读取时，我猜是您的 Ruby 脚本在 PHP 编写到一半时读取文件。

一个简单的解决方法是让 PHP 将其写入临时文件，然后移动或重命名临时文件，以便 Ruby 脚本可以获取它。移动/重命名是原子的，因此不可能读取半写文件。

您还可以进行一些改进：

*   使用诸如[listen](https://github.com/guard/listen) gem之类的东西仅在更新时读取文件。
*   我不确定你传递的是什么数据，但你可以使用 YAML 之类的东西作为交换格式。捕获任何解析异常并记录接收到的数据以帮助调试。

退后一步，如果您在“真正的 O/S”上，一个更简单的选择是通过 Unix 套接字使用基于消息的 IPC，假设持久性不是问题。[查看“ Ruby 中的 IPC 简介](http://www.jstorimer.com/2012/04/19/intro-to-ruby-ipc.html)”的此页面，了解有关在进程之间传递消息的示例的很好的介绍。

# c# - ReceiveAsync后如何处理数据

> ID：15627672
> 
> 赞同：0
> 
> 时间：2013-03-26T01:14:28.810
> 
> 标签：c#, websocket, buffer

目前我正在做：

```
WebSocketReceiveResult result = await Conn.ReceiveAsync(readBuffer, token);
for (int i = 1; i <= result.Count; i++)
{
    if (CurrentPosition+i > ProcessedPosition)
    {
        Console.ForegroundColor = ConsoleColor.Blue;
    }
    else
    {
        Console.ForegroundColor = ConsoleColor.Cyan;
    }
    Console.Write(readBuffer.Array[CurrentPosition+i]);
    Console.ResetColor();
}
CurrentPosition += result.Count; 
```

我什至在缓冲区中选择了正确的位置吗？如何逐字节分析？

# r - 在R中的图像矩阵上绘制矩形的效率

> ID：15627674
> 
> 赞同：1
> 
> 时间：2013-03-26T01:14:38.427
> 
> 标签：r, image-processing, matrix, rectangles

我有一个函数`drawRect`可以在矩阵上绘制一个矩形`n x m x 3`（每个颜色通道一层）。

它接受两个主要参数：矩形参数`c(xleft, xright, ytop, ybottom)`和图像矩阵`im`

```
drawRect <- function(rect, im, color=2){
  int = 255
  im[rect[3]:rect[4],rect[1],color] = int
  im[rect[3]:rect[4],rect[2],color] = int
  im[rect[3],rect[1]:rect[2],color] = int
  im[rect[4],rect[1]:rect[2],color] = int
  return(im)
} 
```

该功能按预期工作。但是，我正在尝试在`3400 x 5200 x 3`图像上绘制约 2000 个矩形，这就是它变得非常缓慢的地方。

我有一个`2000 x 4`矩形参数矩阵，看起来像：

```
#xleft xright ytop ybottom
313    413  143     243
413    513  143     243
513    613  143     243
613    713  143     243
713    813  143     243
811    911  143     243
... 
```

关于如何加快速度的任何想法？...

*请注意*，我的图像是使用包的功能读取的，并使用该`readJPEG`功能`jpeg`写入文件`writeJPEG`。

* * *

编辑：我尝试传入矩形参数矩阵并使用应用函数来避免多次调用该函数，但仍然没有显着改进。

```
drawRect2 <- function(rects, im, color=2, int = 255){

  x=apply(rects, 1, function(rect){
      im[rect[3]:rect[4],rect[1],color] = int
      im[rect[3]:rect[4],rect[2],color] = int
      im[rect[3],rect[1]:rect[2],color] = int
      im[rect[4],rect[1]:rect[2],color] = int
  })

  return(im)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T02:26:25.967

我不知道是否有矢量化版本，`rect`但您可以使用`poylygon`哪个是矢量化的。您只需要在矩形之间添加 NA 即可。这个答案的灵感来自[这里](https://stackoverflow.com/questions/15534032/suppress-redraw-when-calling-polygon-in-r/15534699#15534699)的优秀答案。

```
cuts <- function(x)
{
  n <- length(x) %/% 4
  map <- rep(c(rep(TRUE,4),FALSE), n)
  result <- rep(NA, n*5)
  result[map] <- x
  result
}

n <- 2000

xbottom <- runif(n)
ybottom <- runif(n)
xtop <- xbottom+runif(n)
ytop <- ybottom+runif(n)

x <- cbind(xbottom,xbottom,xtop,xtop)
y <- cbind(ybottom,ytop,ytop,ybottom)
cols <- heat.colors(n)[order(x[,1])]
plot(0, xlim=c(min(x),max(x)), ylim=c(min(y),max(y)))
polygon(x=cuts(t(x)), y=cuts(t(y)), col=cols) 
```

这将立即创建 2000 个矩形。

![在此处输入图像描述](../Images/54fca590c1fe37167a06d8da5cbab8a5.png)

# isabelle - 为什么 Isabelle 不简化我的“if _ then _ else”构造的主体？

> ID：15627676
> 
> 赞同：10
> 
> 时间：2013-03-26T01:14:41.123
> 
> 标签：isabelle

我有以下伊莎贝尔目标：

```
lemma "⟦ if foo then a ≠ a else b ≠ b ⟧ ⟹ False" 
```

战术`simp`, `fast`, `clarsimp`, `blast`,`fastforce`等都没有在目标上取得任何进展，尽管它非常简单。

为什么 Isabelle 不只是简化`if`构造体，使 "a ≠ a" 和 "b ≠ b" 都变为`False`，从而解决目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T01:14:41.123

## 一致性`if_weak_cong`规则

默认情况下，Isabelle 包含一组“一致性规则”，这些规则会影响简化发生的位置。特别是，默认的同余规则是`if_weak_cong`，如下所示：

```
b = c ⟹ (if b then x else y) = (if c then x else y) 
```

这个全等规则告诉简化器简化`if`语句的条件（the `b = c`），但从不尝试简化`if`语句的主体。

您可以使用以下方法禁用一致性规则：

```
apply (simp cong del: if_weak_cong) 
```

或者用一个替代的（更强大的）同余规则覆盖它：

```
apply (simp cong: if_cong) 
```

这两个都将解决上述引理。

## 为什么`if_weak_cong`在默认的conset中

另一个合理的问题可能是：“如果它导致上述问题，为什么会`if_weak_cong`在默认同余集中？”

一个动机是防止简化器无限展开递归函数，例如在以下情况下：

```
fun fact where
    "fact (n :: nat) = (if n = 0 then 1 else (n * fact (n - 1)))" 
```

在这种情况下，

```
lemma "fact 3 = 6"
  by simp 
```

解决了目标，而

```
lemma "fact 3 = 6"
  by (simp cong del: if_weak_cong) 
```

将简化器发送到循环中，因为定义的右侧`fact`不断展开。

第二种情况往往比原始问题中的情况更频繁地发生，这促使`if_weak_cong`成为默认情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T07:57:53.790

## 拆分规则

除了案例分析和同余规则，还有第三种方法可以用简化器解决这个目标：拆分器。拆分器允许简化器自行执行有限形式的案例分析。它仅在术语本身无法进一步简化时运行（拆分案例很容易导致目标爆炸）。

引理`split_if_asm`指示拆分器`if`在假设中拆分 an：

```
lemma "⟦ if foo then a ≠ a else b ≠ b ⟧ ⟹ False"
  by (simp split: split_if_asm) 
```

可以使用以下`split`方法执行单步拆分：

```
lemma "⟦ if foo then a ≠ a else b ≠ b ⟧ ⟹ False"
  apply (split split_if_asm)
  apply simp_all
  done 
```

请注意，`if`在结论 ( `split_if`) 中拆分 an 的规则是默认设置的一部分。

顺便说一句，对于每个 datatype `t`， datatype 包都提供了拆分规则`t.split`，并为涉及 type 的表达式`t.split_asm`提供了案例分析。`case``t`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-29T07:36:36.257

## 一致性规则

正如其他答案中已经指出的那样，`if_weak_cong`全等规则阻止简化器简化 if 语句的分支。在这个答案中，我想详细说明简化器对同余规则的使用。

有关详细信息，另请参阅[Isabelle/Isar 参考手册](http://isabelle.in.tum.de/dist/Isabelle2013/doc/isar-ref.pdf)中有关简化器的章节（特别是第 9.3.2 节）。

同余规则控制简化器如何降级为项。它们可用于限制重写并提供额外的假设。默认情况下，如果简化器遇到一个函数应用程序，它会在尝试重写生成的 term 之前`s t`同时下降到`s`and`t`将它们重写为`s'`and 。`t'``s' t'`

对于每个常量（或变量）c，可以注册一个同余规则。该规则`if_weak_cong`默认注册为常量`If`（这是`if ... then ... else ...`语法的基础）：

```
?b = ?c ⟹ (if ?b then ?x else ?y) = (if ?c then ?x else ?y) 
```

其内容为：“如果遇到一个术语`if ?b then ?x else ?y`并且`?b`可以简化为`?c`，则重写`if ?b then ?x else ?y`为`if ?c then ?x else ?y`”。由于全等规则*取代*了默认策略，因此禁止对`?x`和进行任何重写`?y`。

一种替代方法`if_weak_cong`是强同余规则`if_cong`：

```
⟦ ?b = ?c; (?c ⟹ ?x = ?u); (¬ ?c ⟹ ?y = ?v) ⟧
    ⟹ (if ?b then ?x else ?y) = (if ?c then ?u else ?v) 
```

注意两个假设`(?c ⟹ ?x = ?u)`和`(¬ ?c ⟹ ?y = ?v)`：它们告诉简化器，在简化 if 的左（或右）分支时，它可能假设条件成立（或不成立）。

例如，考虑简化器在目标上的行为

```
if foo ∨ False then ¬foo ∨ False else foo ⟹ False 
```

并假设我们对`foo`. 然后，

*   `apply simp`：有了规则`if_weak_cong`，这将被简化为 `if foo then ¬ foo ∨ False else foo ⟹ False`，只有条件被重写
*   `apply (simp cong del: if_weak_cong)`：没有任何同余规则，这将被简化为 `if foo then ¬ foo else foo ⟹ False`，因为条件和分支被重写
*   `apply (simp cong: if_cong del: if_cancel)`：有了规则`if_cong`，这个目标将简化为 `if foo then False else False ⟹ False`：条件`foo ∨ False`将被改写为`foo`。对于这两个分支，简化器现在重写 `foo ⟹ ¬foo ∨ False`和`¬foo ⟹ foo ∨ False`，这两个显然都重写为 False。

    （我删除了`if_cancel`，这通常会完全解决剩下的目标）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-26T02:23:06.380

在证明包含中取得进展的另一种自然方式`if _ then _ else _`是对条件进行案例分析，例如，

```
lemma "(if foo then a ~= a else b ~= b) ==> False"
  by (cases foo) simp_all 
```

或者 if`foo`不是一个自由变量，而是由一个最外层的元级通用量词绑定（在应用脚本中经常出现这种情况）：

```
lemma "!!foo. (if foo then a ~= a else b ~= b) ==> False"
  apply (case_tac foo)
  apply simp_all
done 
```

不幸的是，if`foo`受另一种量词的约束，例如

```
lemma "ALL foo. (if foo then a ~= a else b ~= b) ==> False" 
```

或通过嵌套假设中的元级通用量词，例如

```
lemma "True ==> (!!foo. (if foo then a ~= a else b ~= b)) ==> False" 
```

既不`cases`也不`case_tac`适用。

**注意：**另请参阅[此处](https://stackoverflow.com/a/13767196/476803)`cases`了解和之间的（轻微）差异`case_tac`。

# r - “没有可以拟合模型的观察结果”错误

> ID：15627678
> 
> 赞同：2
> 
> 时间：2013-03-26T01:14:53.963
> 
> 标签：r, tree

我有一个包含 125 个变量的数据框。有很多 NA，因为数据来自一项调查，其中有逻辑，只有在基于以前的答案有意义的情况下才会提出问题。

我正在尝试使用“tree”包构建分类树。当我尝试建造一棵树时

```
t1 <- tree(outcome ~ ., data=surveyData) 
```

我得到错误`"no observations from which to fit a model"`。

我不确定如何解释此错误，也没有在论坛或文档中找到任何内容。

我一直在尝试用一些较小的子集构建树，这似乎有效。

有人可以指出我正确的方向吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:07:37.873

我发现了问题。我有一些数据列有太多的 NA，这让树函数抱怨。我删除了这些变量并能够创建一棵树。

我删除了有问题的列并以这种方式构建了一棵树：

```
naCols <- vector(length=125)
for (i in 1:125){ naCols[i]<- sum(is.na(data[,i]))}
subset <- data[,which(naCols < 10)]
myTree <- (outcome ~ ., data=subset) 
```

我有一个更大的问题是找出处理我所有 NA 的最佳方法——但那是另一回事。

# r - 在 R 中增量绘图并且不重置

> ID：15627681
> 
> 赞同：3
> 
> 时间：2013-03-26T01:15:44.153
> 
> 标签：r, plot, updates

您将使用哪些选项（和包）来逐步绘制计算结果？

想象一下，我想绘制一个持续很长时间的计算结果，我不想等到最后才能看到一些结果。绘制每个点并不是一个好主意，因为每次启动 plot 命令都会非常慢。我将改为绘制每 N 个点（将它们保存在向量上）。

例如，如果我用斐波那契数列来做，将循环分成两个嵌套循环，以便每 10 次迭代绘制一次结果：

```
fibo=rep(0,112);fibo[1]=0;fibo[2]=1;
plot(fibo)              #to initialize 
for(ii in 0:10) {
  for(jj in 0:9) {
    fibo[ii*10+jj+3]=fibo[ii*10+jj+2]+fibo[ii*10+jj+1];
  }
plot(fibo)
} 
```

但它不会保留上一次迭代的图表。我该怎么做？这不是一个很好的例子，因为数字增长得太快了。并且绘图初始化事先不知道最大值 y 值。也许使用其他更好的图形包会更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T02:17:38.577

这是一个简单的示例，说明如何通过设置应绘制的点并仅`points`在满足此条件时添加：

```
# set the frequency with which to plot points
plotfreq <- 10

# set the x and y limits of the graph
x.limits <- c(1,100)
y.limits <- c(0,100)

# initialise a vector and open a plot
result <- vector(mode="numeric",length=100)
plot(result,ylim=y.limits,xlim=x.limits,type="n")

# do the plotting
plot.iterations <- seq(plotfreq,length(result),by=plotfreq)
for (i in seq_along(result)) {
  result[i] <- result[i] + i

  # only plot if the data is at the specified interval
  if (i %in% plot.iterations) {
    points(i,result[i])
  }

} 
```

# javascript - 使用 javascript 更改背景颜色文档

> ID：15627683
> 
> 赞同：1
> 
> 时间：2013-03-26T01:16:08.817
> 
> 标签：javascript, asp.net

我正在使用以下代码：

```
 <%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site1.master.cs" Inherits="WebApplication3.Site1" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="style.css" rel="stylesheet" />
    <script type="text/javascript">

        function change(color) {
            document.bgColor = color;
        }

    </script>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">

        <p>&nbsp;</p>
        <div class="green">
            <div id="slatenav">
                <ul>
                    <li><a href="WebForm3.aspx" id="green" onclick="change('green')">Home</a></li>
                    <li><a href="WebForm4.aspx"  id="red" onclick="change('red')">About Us</a></li>
                </ul>
            </div>
        </div>
        <div>
            <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
            </asp:ContentPlaceHolder>
        </div>
    </form>
</body>
</html> 
```

为什么它不能正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T01:24:06.713

虽然您不应该使用`document.bgColor`，但它仍然可以工作。问题不在于 - 而是您将它与取消 javascript 的链接一起使用（链接正在加载新页面）。

试试这个：

```
<script type="text/javascript">
     function change(color) {
     document.bgColor = color;
     return false;
     }
</script>
<div id="slatenav">
    <ul>
        <li><a href="WebForm3.aspx" id="green" onclick="return change('green');">Home</a></li>
        <li><a href="WebForm4.aspx"  id="red" onclick="return change('red');">About Us</a></li>
    </ul>
</div> 
```

和[样品小提琴](http://jsfiddle.net/LuJ7t/)

它不会加载新页面，但`Javascript`会启动。正如其他人所建议的那样，使用`document.body.style.backgroundColor`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:21:09.513

**document.bgColor**已弃用，请改用**document.body.style.backgroundColor**

来自[https://developer.mozilla.org/en/docs/DOM/document.bgColor](https://developer.mozilla.org/en/docs/DOM/document.bgColor)

# html - 删除单个列表项的边框

> ID：15627687
> 
> 赞同：1
> 
> 时间：2013-03-26T01:16:33.483
> 
> 标签：html, css, wordpress

我正在尝试删除其中一个菜单项旁边的分隔符，如下面的屏幕截图所示。

[http://img23.imageshack.us/img23/9454/36513837.jpg](http://img23.imageshack.us/img23/9454/36513837.jpg)

我可以在萤火虫中看到分隔符是使用边框属性创建的。我可以从**所有**菜单项中删除分隔符，但我看不到在哪里以及如何从单个菜单项中删除它。这可能吗？

[-> 网站 <-](http://tinyurl.com/cjy9lm3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:24:35.200

您可以使用 :nth-child CSS3 伪类。

在您的情况下，您可以使用选择器选择无序列表元素中的第 5 个子元素`ul:nth-child(5)`并以这种方式删除边框

# java - 将重复的数字移动到数组的末尾

> ID：15627689
> 
> 赞同：0
> 
> 时间：2013-03-26T01:16:44.543
> 
> 标签：java, methods

我需要在 Yahtzee 中做一个计算 smallStraight 的方法（小直意味着你有 4 个骰子增加一……例如，`1,2,3,4,6`是一个小直）。现在我正试图克服当你对数组进行排序时可能会有重复数字的障碍。
例如，如果您滚动然后排序，您可能会得到一个`1, 2, 2, 3, 4`. 现在我基本上需要删除数组末尾的第二个 2。这是我的代码。请注意，这显然不适用于嵌套的四个循环。我只是想知道解决这个问题的最佳方法。

```
public int setSmallStraight(int[] die)
{
    if (!isSmallStraightUsed)
    {
      int counter = 0;
      boolean found = false;
      Arrays.sort(die);

      for (int i = 0; i < die.length - 1; i++)
      {
          if (counter == 3)
              found = true;

          if (die[i + 1] == die[i] + 1)
          {
              counter++;
          }
          else if (die[i + 1] == die[i])
          {
              continue;
          }
          else
          {
              counter = 0;
          }
      }

      if (found)
      {
         smallStraight = 30; 
      }
      else
      {
          smallStraight = 0;
      }
      return smallStraight;
    }
   else
        return 0;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:42:08.473

让一个`int counter`计算数组中连续`+1`增加的次数怎么样？像这样的东西：

```
public boolean hasSmallStraight(int[] sortedValues) {
    int counter = 0;
    for (int i=0; i<sortedValues.length-1; i++) {
        if (counter == 3) return true;

        if (sortedValues[i+1] == sortedValues[i] + 1) {
            counter++;
        } else if (sortedValues[i+1] == sortedValues[i]) {
            continue;
        } else {
            counter = 0;
        }
    }

    return counter==3;
} 
```

注意：这只适用于小直道

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:49:01.217

这将为您工作：

```
public static void main(String[] args) {
Integer[] items = {0, 4, 2, 2, 10, 5, 5, 5, 2};
System.out.println(customSort(Arrays.asList(items)));
}

public static Collection<Integer> customSort(List<Integer> die) {
Collections.sort(die);
Stack<Integer> numbas = new Stack<Integer>();
List<Integer> dupes = new ArrayList<Integer>();
numbas.push(die.get(0));
for (int i = 1; i < die.size(); i++) {
    if (!die.get(i).equals(numbas.peek())) {
    numbas.push(die.get(i));
    } else {
    dupes.add(die.get(i));
    }
}
numbas.addAll(dupes);
return numbas;
} 
```

这产生了输出

```
[0, 2, 4, 5, 10, 2, 2, 5, 5] 
```

添加您认为合适的错误检查和处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T01:41:19.877

假设数组已排序，您可以使用如下算法。请阅读我发表的评论，希望它能清楚地解释它是如何工作的。同样作为预防措施 - 这绝不是最有效的实现，因此如果您的阵列很大，请考虑性能。

```
// Sequentially iterate array using 2 indices: i & j
// Initially i points to 1st element, j point to 2nd element
// The assumption is there's at least 2 element in the array.
// 'end' acts as a boundary limit to which element hasn't been checked
for(int i=0,j=1,end=array.length; j<end; ) {

    // If element pointed by i & j are equal, shift element pointed
    // by j to the end. Decrement the end index so we don't test element
    // that's already shifted to the back.
    // Also in this case we don't increment i & j because after shifting we
    // want to perform the check at the same location again (j would have pointed
    // to the next element)
    if(array[i] == array[j]) {

        // This for loop shifts element at j to the back of array
        for(int k=j; k<array.length-1; k++) {
            int tmp = array[k+1];
            array[k+1] = array[k];
            array[k] = tmp;
        }

        end--;

    // if element at i and j are not equal, check the next ones
    } else {
        i++;
        j++;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T04:01:43.570

尝试

```
 int[] a1 = { 1, 2, 2, 3, 4 };
    int[] a2 = new int[a1.length];
    int j = 0, k = 0;
    for (int i = 0; i < a1.length - 1; i++) {
        if (a1[i + 1] == a1[j]) {
            a2[k++] = a1[i + 1];
        } else {
            a1[++j] = a1[i + 1];
        }
    }
    System.arraycopy(a2, 0, a1, j + 1, k);
    System.out.println(Arrays.toString(a1)); 
```

输出

```
[1, 2, 3, 4, 2] 
```

# python - 将 thrift 服务器作为守护进程运行

> ID：15627698
> 
> 赞同：2
> 
> 时间：2013-03-26T01:18:11.177
> 
> 标签：python, thrift

现在我正在用 Apache Thrift 试水，我目前使用的是`TThreadedServer`用 Python 编写的，但是当我运行服务器时，它没有被守护。有没有办法让它作为守护进程运行，或者有没有另一种方法可以在生产环境中运行节俭？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:10:40.330

守护进程与节俭无关。Thrift 只为不同平台提供通信层，您可以使用 thrift 支持的几种编程语言之一运行服务器（即您能想到的绝大多数）。无论您是用 Java、C++（我已经尝试过）还是 python 编写服务器，它们都不会创建守护进程。不支持此功能（例如 PHP 本身不支持多线程也不支持守护进程）。

我刚刚看到 supervisord，并没有玩太多，但它似乎是管理像 thrift 服务器这样的进程的好选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:07:41.687

我想你正在寻找这个：nohup hbase thrift start &

这是我发现在与 Linuxsession 断开连接后保持节俭工作的唯一方法。

# dynamic-programming - 使用动态规划确定是否存在给定 n 个数字的 3 分区

> ID：15627699
> 
> 赞同：1
> 
> 时间：2013-03-26T01:18:32.257
> 
> 标签：dynamic-programming, partition-problem

我找到了 3-partition 问题的解决方案，即给定 n 个数字，您确定是否可以形成三个（不相交）子集，使得所有子集都相等（即每个子集的总和等于 n数字/3）。

一个类似的问题是：[3-PARTITION 问题](https://stackoverflow.com/questions/4803668/3-partition-problem)。但是，我正在寻找以下代码的解释。

简单地说，我不知道发生了什么。我不知道 T 是什么，i 或 j 是什么，k 是什么，或者为什么我们 k 和 j 从 N 开始并且正在递减，什么 "T[j + C[i]][k] = true; T[j][k + C[i]] = true" 意味着，或者我们为什么要返回 T[N/3]？

```
bool T[10240][10000];
bool partition( vector< int > C ) {
    // compute the total sum
    int n = C.size();
    int N = 0;

    for( int i = 0; i < n; i++ ) N += C[i];
    // initialize the table
    T[0][0] = true;
        memset(T, 0, 10000^2);

    // process the numbers one by one
    for( int i = 0; i < n; i++ ) {
                for (int j = N; j >= 0; --j) {
                        for (int k = N; k >= 0; --k) {
                                if (T[j][k]) {
                                        T[j + C[i]][k] = true;
                                        T[j][k + C[i]] = true;
                                }
                        }
                }
        }
    return T[N / 3];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:58:36.380

首先，返回值应该是T[N / 3][N / 3]。

T[i][j] 表示是否有可能得到总和为 i 的第一个分区和总和为 j 的第二个分区。显然，由于所有 n 个数之和为 N。所以 T[i][j] 为真意味着数组可以分为三个部分，总和分别为 i、j 和 Nij。

最初，T[0][0] 为真，其他均为假，这意味着一开始只能将数字分为三个部分：0、0 和 N。 i 的 for 循环迭代所有 n数字，并且每次都可以将数字 C[i] 分组到第一个分区或第二个分区。这就是为什么设置 T[j+C[i]][k] 和 T[j][k+C[i]] 为真。

变量 j 和 k 之所以从 N 开始递减，是为了避免对单个数字进行多次计数。这样考虑：例如，如果 j 从 0 开始到 N，则 T[j][k], T[j+C[i]][k], T[j+C[i]*2] [k], ... , T[j+C[i]*x][k] 都将设置为 true，这是不正确的。您可以简单地选择一个小案例来尝试自己模拟该过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-03T07:00:40.350

正确的 C++ 实现如下所示：

```
int partition3(vector<int> &A)
{
  int sum = accumulate(A.begin(), A.end(), 0);
  if (sum % 3 != 0)
  {
    return false;
  }
  int size = A.size();

  vector<vector<int>> dp(sum + 1, vector<int>(sum + 1, 0));
  dp[0][0] = true;

  // process the numbers one by one
  for (int i = 0; i < size; i++)
  {
    for (int j = sum; j >= 0; --j)
    {
        for (int k = sum; k >= 0; --k)
        {
            if (dp[j][k])
            {
                dp[j + A[i]][k] = true;
                dp[j][k + A[i]] = true;
            }
        }
    }
  }
  return dp[sum / 3][sum / 3];
} 
```

# r - R范围：在没有本地环境的函数中强制变量替换

> ID：15627701
> 
> 赞同：4
> 
> 时间：2013-03-26T01:18:43.633
> 
> 标签：r, scope

我在循环中定义函数并尝试强制评估循环变量而不必携带私有环境。

示例：一组函数`handlers$h1`, `handlers$h2`, ...,`handlers$h6`只是通过 1, 2, ..., 6 到另一个函数，如下所示：

```
handlers <- list()
for (i in 1:6) {
    handlers[[paste0('h', i)]] <- function () {
        message(i) # <-- example
    }
} 
```

`handlers$h1()`消息 1也应如此，`handlers$h2()`消息 2 也应如此，...

相反，所有函数都返回`6`的*当前*值`i`。

为了解决这个问题，我可以使用[这个问题中指定的闭包](https://stackoverflow.com/questions/2247111/evaluating-variable-within-r-loop)

```
msg <- function(i) {
    force(i)
    function () { message(i) }
}

for (i in 1:6) {
    handlers[[paste0('h', i)]] <- msg(i)
} 
```

现在每个函数都按预期工作，**但**每个函数都必须携带自己的环境：

```
handlers$h1
# function () { message(i) }
# <environment: 0x9342b80> 
```

**我怎样才能使它`handlers$h1`打印`function () { message(1) }`，即评估`i`并将其直接替换到定义中，从而消除对环境的需求？**

我能想到的唯一方法是：

*   使用`eval`（我不想做的事情）；
*   用直接替换的 1-6 手动写出每个定义（在这种情况下很好，只有 6 个函数，但通常不可扩展）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T01:39:17.483

以下是一些使用的方法`body<-`

你可以使用`bquote`

```
handlers <- list()

for (i in 1:6) {
  handlers[[paste0('h', i)]] <- function () {}
  body( handlers[[paste0('h', i)]]) <- bquote(message(.(i)))
}

handlers$h1
## function () 
##   message(1L) 
```

或者`substitute`

```
for (i in 1:6) {
  handlers[[paste0('h', i)]] <- function () {}
  body( handlers[[paste0('h', i)]]) <- substitute(message(i), list(i=i))
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T13:30:29.733

不幸的是，base R 缺少手动制作功能的功能，但 pryr 提供`make_function`：

```
library(pryr)

handlers <- list()
for (i in 1:6) {
  body <- substitute(message(i), list(i = i))
  f <- make_function(alist(), body)

  handlers[[paste0('h', i)]] <- f
} 
```

注意使用`substitute`手动修改引用的调用。

pryr 中另一个很酷的（IMO！）函数是`unenclose`，它通过替换封闭环境中定义的变量来取消封闭函数：

```
msg <- function(i) {
    force(i)
    function () message(i)
}
msg(1)
# function () message(i)
# <environment: 0x102dc6ca0>
unenclose(msg(1))
# function () 
# message(1) 
```

但是他们真的没有使用原始封闭的缺点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:55:48.463

这里有两种方法。除了每个中的 ## 行之外，它们是相同的：

**形式<-**

```
handlers <- list()
f <- function() message(i)
for (i in 1:6) { 
   formals(f) <- list(i = i) ##
   handlers[[paste0('h', i)]] <- f 
} 
```

**痕迹**

```
handlers <- list()
f <- function() message(i)
for (i in 1:6) { 
   trace(f, bquote(i <- .(i)), print = FALSE) ##
   handlers[[paste0('h', i)]] <- f 
} 
```

# php - if else 微波炉考试

> ID：15627702
> 
> 赞同：-1
> 
> 时间：2013-03-26T01:18:51.553
> 
> 标签：php, if-statement

请帮助我在下面回答这个问题。我不明白问题在说什么：

> 某微波炉厂家建议，加热两件时，加热时间增加50%，加热三件时，加热时间加倍。不建议一次加热三个以上的物品。
> 
> 编写一个程序，接受物品数量和单品加热时间。然后程序会写出推荐的加热时间。
> 
> 提示：使用四个连续的单分支 if 语句执行此操作，每个语句测试四种情况之一：1 项、2 项、3 项、超过 3 项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:22:41.737

您需要检查有多少物品进入微波炉并接受加热时间。如果有一个项目使用输入的加热时间，如果有两个项目加 50%，如果有三个则加倍。您还应该停止超过三个项目。

您可能希望执行以下操作：

```
$size = 3; // Any number
$time = 60;

// No need to check for one input because it doesn't affect time
// Check if two inputs
if ($size == 2) {
    $time += ($time * 0.5);
}
// I'll leave three and more than three inputs to you
echo $time; 
```

您也可能希望使用 case 语句并将默认值用于 0 或超过 3 个项目:)

```
$size = 3; // Any number
switch ($size) {
    case 1:
     // Do something
    break;
    // etc
    default:
} 
```

如果您对如何读取输入感到困惑，如果您使用的是 HTML 输入表单，则应该查看 $_GET 和 $_POST 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:27:19.787

就个人而言，我会说一系列`if`陈述是非常错误的方式。我会按照这些思路做一些事情：

```
// $item_count = number of items
// $single_time = time for one item
if( $item_count > 3) echo "It is not recommended to heat more than three items.";
else echo "Time: ".($single_time*(0.5+0.5*$item_count))." seconds"; 
```

基本上，我将三个有效案例转化为公式：

> `$item_count = 1`导致`0.5+0.5*1 = 1`：正常时间
> `$item_count = 2`导致`0.5+0.5*2 = 1.5`= 50% 额外
> `$item_count = 3`导致`0.5+0.5*3 = 2`= 双倍时间

# gmail - 我的 PHPMailer 脚本适用于我的笔记本电脑，但不适用于托管服务器

> ID：15627707
> 
> 赞同：0
> 
> 时间：2013-03-26T01:19:39.107
> 
> 标签：gmail, phpmailer

使用 PHPMailer 发送电子邮件时出现问题。

我知道对此有很多问题，但是在阅读了很多问题并且经过三天徒劳无功的尝试之后，我真的很绝望。所以，我正在尝试通过 PHPMailer 发送电子邮件：

```
require 'class.phpmailer.php';

$mail = new PHPMailer();
$mail->PluginDir = './';
$mail->IsSMTP();
$mail->Port = 465;
$mail->Host = 'smtp.gmail.com';
$mail->IsHTML(true); 
$mail->Mailer = "smtp";
$mail->SMTPSecure = 'ssl';

$mail->SMTPAuth = true;
$mail->Username = 'myname@gmail.com';
$mail->Password = 'mypassword';

$mail->From = "myname@gmail.com";
$mail->FromName = "MyName";
$mail->addAddress("myname@gmail.com");

$mail->Subject = "Success";
$mail->Body = "Success";

if(!$mail->Send()) echo $mail->ErrorInfo;
else echo "Message has been sent"; 
```

当我在笔记本电脑上测试这段代码时，它运行良好。本地 php 和 PHPMailer 版本分别为 5.3.5 和 5.2.4。当我尝试在我的网站上上传此脚本时出现问题。托管服务器上的 php 版本是 5.3.3。返回的错误是“以下发件人地址失败：myname@gmail.com : Called Mail() without being connected。” 我之前在我的机器上测试代码时遇到过这个错误。问题是 ssl 模块（php_openssl.dll）没有添加到 php.ini 中。我添加了它，一切都开始正常工作。所以很自然，当我看到这个错误时，我认为托管服务器上没有加载 openssl。但事实证明，情况并非如此——extension_loaded("openssl") 返回 true。此外，“openssl” 包含在从 get_loaded_extensions() 返回的加载模块数组中。你知道问题可能是什么吗？

# android - Java（Android）：如何在没有位图的情况下缩放可绘制对象？

> ID：15627712
> 
> 赞同：6
> 
> 时间：2013-03-26T01:20:19.070
> 
> 标签：android, scaling

我需要缩放按钮的背景图像，但不能将其变成位图。这是现在的代码：

```
int height = 50;
int width = 80;

Button b = new Button (this);
b. setBackgroundResource(R.drawable.btn); 
```

现在我需要根据“高度”和“宽度”来缩放“R.drawable.btn”。setBackgroundResource 不接受位图。我怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-26T01:26:45.700

您可以允许布局参数控制比例，也可以自己缩放图像。

允许布局缩放图像：

```
b.setBackground(getResources().getDrawable(R.drawable.btn)); 
```

手动缩放图像：

```
Bitmap original = BitmapFactory.decodeResource(context.getResources(), R.drawable.btn);
Bitmap b = Bitmap.createScaledBitmap(original, width, height, false);
Drawable d = new BitmapDrawable(context.getResources(), b);
button.setBackground(d); 
```

***警告**：图像可能不会完全按照您的预期显示在屏幕上。这是因为根据您的布局参数`Button`，Android 可能会根据您设备的硬件屏幕密度额外缩放图像。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:30:53.937

这会将位图变成可绘制的

```
image = new BitmapDrawable(getResources(),MenuScreen.image1); 
```

image 是可绘制的，而 image1 是位图

# tree - （方案）查找一个项目是否是树中叶子的成员？

> ID：15627714
> 
> 赞同：0
> 
> 时间：2013-03-26T01:20:29.247
> 
> 标签：tree, scheme

我正在制作一个函数来检查一个项目是否是树中叶子的成员。

这就是我到目前为止所拥有的。但它工作不正常。一些应该为真的输入返回假。请帮忙？

```
(define (leaf-member? item tr)
 (cond
  [(empty-tree? tr) #f]
  [(leaf? tr)
      (if (equal? item tr) #t
          #f)]
  [else (leaf-member? item (cdr tr))])) 
```

这是它应该返回的内容：

```
~(leaf-member? 'a (leaf 'a))
#t 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:13:27.173

在树中查找项目的代码取决于树的定义。特别是，如果您定义一棵由子树组成的树，那么这表明您将如何在树上递归。因此，您需要从“树”和“叶”的定义开始。

这是一个完整的解决方案，没有假设二叉树。

```
(define (make-tree item children)
  `(TREE ,item ,children))
(define (tree? thing)
  (and (list? thing)
       (= 3 (length thing))
       (eq? 'TREE (car thing))))
(define tree-item cadr)
(define tree-children caddr)

(define (make-leaf item)
  (make-tree item '()))
(define (leaf? tree) 
  (and (tree? tree) (null? (tree-children tree)))

(define (leaf-member? tester item tree)
  (and (tree? tree)
       (or (and (leaf? tree) (tester item (tree-item tree)))
           (let looking ((subtrees (tree-children tree)))
              (and (not (null? subtree))
                   (or (leaf-member? equal item (car subtrees))
                       (looking (cdr subtrees))))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:29:25.023

看来您不是在使用树，而是在使用列表。我这么说是因为如果你在一棵树中，那么你搜索的不是列表的其余部分（'cdr'），而是左右分支。

如果您发布如何创建非叶树以更好地建议您，这将有所帮助，但无论如何您的最终陈述不应该是这样的：

```
[else (leaf-member? item (cdr tr))] 
```

但像这样：

```
[else (or (leaf-member? item (left-branch tr))
          (leaf-member? item (right-branch tr)))] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T01:34:09.920

你已经接近答案了。要修复它，您必须：

1.  将提供的值与叶子中`item`的实际*值*进行比较（而不是叶子本身！）
2.  正确推进两个子树的递归。请注意，`cdr`在这里使用没有任何意义，这是我们正在遍历的*树*，而不是列表。

在这两种情况下，请使用适当的访问器过程。我会尝试猜测它们的名字，将它们调整为您自己的实现：

```
(define (leaf-member? item tr)
  (cond
    [(empty-tree? tr)
     #f]
    [(leaf? tr)
     (if (equal? item (tree-value tr))
         #t
         #f)]
    [else
     (or (leaf-member? item (tree-left tr))
         (leaf-member? item (tree-right tr)))])) 
```

# symfony - Symfony2 在 Angular js 中验证表单

> ID：15627717
> 
> 赞同：-2
> 
> 时间：2013-03-26T01:20:49.687
> 
> 标签：symfony, angularjs

我正在尝试将 anular js 与 symfony2 一起使用，但我正在努力将 Angular 集成到 Symfony2

我在 symfony2 中有以下表单类

```
public function buildForm(FormBuilder $builder, array $options)
{
     $builder
     ->add('name','text')
     ->add('address','textarea',array('required'=>false))
     ->add('city','text')
     ->add('state','text',array('required'=>false))
} 
```

我在twing中渲染表单，下面是代码

```
<form action="{{ path('customer_create') }}" method="post" name="form1" ng-controller="MainCtrl" {{ form_enctype(form) }} >
    {{ form_widget(form._token) }}
    <div>{{ form_label(form.name) }} {{ form_widget(form.name) }}</div>
    <div>{{ form_label(form.email) }} {{ form_widget(form.email) }}</div>
    <div>{{ form_label(form.address) }} {{ form_widget(form.address) }}</div>
    <div>{{ form_label(form.city) }} {{ form_widget(form.city) }}</div>
    <br><br><br> <button type="submit" style="float:left;text-align:left;margin-right:10px">{% trans %}Create{% endtrans %}</button>
</form> 
```

我如何在其中使用 Angular js？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:44:28.780

您需要更改 Angular JS`{{`和`}}`其他东西

检查[AngularJS-Twig 与双花括号的冲突以](https://stackoverflow.com/questions/13671701/angularjs-twig-conflict-with-double-curly-braces)获取详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-16T15:52:00.113

解决方案如下：

树枝：（我使用boostrap）

```
 <div class="form-group col-sm-12">
        {{ form_label(form.tipomoneda, 'Tipo Moneda') }}
        {{ form_widget(form.tipomoneda,{'attr': {'class':'form-control', 'placeholder':'Introducir tipo de moneda', 'ng-model':'tipomoneda' }}) }}
        {{ form_errors(form.tipomoneda) }}
        <span style="color:red" ng-show="{{ form.vars.name }}['{{ form.vars.name }}[{{ form.tipomoneda.vars.name }}]'].$dirty && {{ form.vars.name }}['{{ form.vars.name }}[{{ form.tipomoneda.vars.name }}]'].$invalid">
        <span ng-show="{{ form.vars.name }}['{{ form.vars.name }}[{{ form.tipomoneda.vars.name }}]'].$error.required">Field  required.</span>
        </span>
    </div> 
```

在哪里：

```
 <form name= "moneda" ...  will be = {{ form.vars.name }}
 <input type="text" name="moneda[tipomoneda]" ...  will be = {{ form.tipomoneda.vars.name }} 
```

所以解决方案是在点对象表示法上对对象（方括号）使用 Javascript 的属性样式访问器。因此，我们可以在字符串中使用方括号，并且不存在评估问题。

# jquery - 我如何绑定箭头键和mousehweel

> ID：15627718
> 
> 赞同：1
> 
> 时间：2013-03-26T01:20:55.093
> 
> 标签：jquery, bind, mousewheel

我希望箭头键和鼠标滚轮做同样的事情，

我正在使用鼠标滚轮插件：

```
$(function() {
   $("body").mousewheel(function(event, delta) {
      this.scrollLeft -= (delta * 30);
      event.preventDefault();
   });
}); 
```

我有我的代码来绑定密钥

```
$(document).keydown(function(e){
  if (e.keyCode == 37) { 
     alert( "left pressed" );
     return false;
  }
});
    }
    e.preventDefault();
}); 
```

我想把这两个结合起来，请帮忙？

# algorithm - 如何计算多核 CPU 的循环等待时间

> ID：15627724
> 
> 赞同：0
> 
> 时间：2013-03-26T01:21:25.377
> 
> 标签：algorithm, scheduling, round-robin

我有一个关于多核和多 Cpu RR 模拟的问题；我试图了解 WTime 是如何为多核和多 CPU 循环模拟算法派生的。我想弄清楚这个假设是否正确？

```
#CPU => 2;
#Cores => 2;
#Processes => 6;
TQ = 5;
Process#    BurstTime
1           5
2           6
3           7
4           8
5           9
6           10

Process RR Algorithm Data       
Process#    BTime       WTime   CPU#
1           5           0       1
2           5           0       1
3           5           5       2
4           5           5       2
5           5           10      1
6           5           10      1
2           1           17      2
3           2           17      2
4           3           21      1
5           4           21      1
6           5           26      2
Is the this correct? Specifically P2 WTime?
P1 => 0
P2 => 17 - 0 = 17
P3 => 17 - (5*1) - 0 = 12
P4 => 21 - (5*1) - 0 = 16
P5 => 21 - (5*1) - 0 = 21
P6 => 26 - (5*1) - 0 = 21 
```

计算进程的平均等待时间 => (0 + 17 + 12 + 16 + 21 + 21) / 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:55:59.313

我假设你只有一个全局队列，总共有 4 个核心，核心从 1/1 到 2/2 分配（如果多于一个空闲），上下文切换时间为 0：

```
Process #  core #  start  end  remaining    acc. waiting time  
1          1/1      0      5    0            0 *          
2          1/2      0      5    1            0       
3          2/1      0      5    2            0                
4          2/2      0      5    3            0
5          1/1      5      10   4            5
6          1/2      5      10   5            5
2          2/1      5      6    0            0=0+0*
3          2/2      5      7    0            0=0+0 * (core became idle)
4          2/1      6      9    0            1=0+1 * (core became idle)
5          1/1      10     14   0            5=5+0 *
6          1/2      10     15   0            5=5+0 * 
```

`*`标记最后累积的等待时间。

# actionscript-3 - AS3：一个带参数的类，或两个类似的类

> ID：15627726
> 
> 赞同：1
> 
> 时间：2013-03-26T01:21:48.237
> 
> 标签：actionscript-3, user-interface

如果创建两个相似的自定义 AS3 可视化组件，例如。按钮，外观不同，但功能相同，从代码执行、速度、性能方面，哪种方法更好、更高效？

1.  创建两个几乎相同的类，唯一的区别在于可视化组件，所以我必须编写两次按钮控制函数？
2.  创建一个类，参数输入定义了我想要什么样的按钮

**1：**

```
package {
            public class bigButton {
                public function bigButton() {
                    //make a bigButton
                }
            }
} 
```

和

```
 package {
                public class smallButton {

                    public function smallButton() {
                        //make a smallButton
                    }
                }
 } 
```

或者

**2：**

```
package {
        public class OneKindOfButton {
            public function OneKindOfButton(thisIsBigButton:Boolean) {
                if (thisIsBigButton == true) {
                     //make it big
                } else {
                     //make it small
                }
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:57:12.580

就关于这两种结构的学术争论（不是这个特定的例子）而言，我不得不争辩说第一个选择是“更好的”。尽管大多数 SO 社区通常认为基于意见的帖子毫无价值，但我有几点要提出并想听听反驳的论点。

对于这样做的第二种选择，首先它让我认为可能应该有一个包含所有原始功能的基类，然后是一个调整部分功能的子类。其次，它需要构造函数中的一个条件（并且可能在该类中的其他地方）来处理一个类正在处理的两种情况。我认为这里的部分问题是在 AS3 中倾向于将所有功能和视图逻辑混搭到一个类中，仅仅因为它是可能的，这并不是一个好主意。

总而言之，我可能会走一条包含按钮功能的基类的路线，然后制作一些在视觉上做不同事情的子类。

同样在运行时效率方面，我相信第一种情况会再次运行得更好，因为在第二种情况下必须在运行时检查额外的条件。在任何情况下，当性能和优化成为问题时，最好只运行一个测试（构建一个小测试应用程序，每个应用程序生成 10,000 个，运行几次并获得平均值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T01:41:16.860

我只想创建一种按钮类，因为您可以在其中绘制或添加其他显示对象。你甚至不需要一个布尔值来控制它。例如 ：

```
public class OneKindOfButton extends Sprite{

    public function OneKindOfButton(width:Number,height:Number) {
        create(width,height);
    }

    private function create(width:Number,height:Number):void
    {
        graphics.clear();
        graphics.beginFill(0xff0000,1.0);
        graphics.drawRect(0,0,width,height);
        graphics.endFill();
    }

} 
```

现在你可以使用这个类来创建任意大小的按钮。

```
var myButton:OneKindOfButton = new OneKindOfButton(200,20);
myButton.x = 100;
myButton.y = 300;
addChild(myButton); 
```

如果您想使用图像而不是绘制到按钮中，您也可以通过将位图添加到按钮精灵中来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T02:23:02.960

我认为所有这些答案都没有抓住 Flash 的重点。

首先，我认为 View 类不应该*在*Flash 中具有构造函数参数，因为您一开始就无法在时间线/舞台上使用它们。Flash 播放器不能（也不应该）提供这些构造函数参数。舞台和时间线是 Flash 的最大优势，因此，如果您不使用它们，您至少会浪费 25% 的时间（设置 x、y、宽度、高度、以编程方式绘制图形等的时间）那些不必要的废话）。为什么要将自己锁定在一个积极阻止您使用所有可用工具的设计中？

我这样做的方式是我有*一个*定义按钮*行为的类。*然后通过一个库符号来区分按钮，大按钮一个，小按钮一个，一个猪形按钮，一个看起来像宇宙飞船的按钮，等等。这些符号中的任何一个都将单个 Button 类作为基类（或者更有可能只是在库中定义为 Button，因此它们是 SimpleButton 的子类）。然后，我只需将库符号的一个实例放在舞台上，并将任何父类中的变量输入到我的按钮类或 SimpleButton。

这样做的好处是父类不需要知道具体的实现类型，只需要更通用的类型。这意味着库符号可以取消选中“在框架 N 中导出 Actionscript”，并且可以在使用它们的位置编译它们。这意味着初始加载时间可以减少到您可能不需要预加载器的程度，具体取决于您正在进行的其他操作。

有关此方法的更多信息，请参阅[在 AS3 中将时间线与 OOP 结合起来](http://www.developria.com/2010/04/combining-the-timeline-with-oo.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T01:53:19.313

如果两个按钮之间的唯一区别是它们的外观，但所有逻辑都是共享的，那么您绝对应该只使用一个公共类。

如果您正在处理火花按钮，那么您可以简单地为每个实例指定不同的皮肤（[关于火花皮肤](http://help.adobe.com/en_US/flex/using/WSC8DB0C28-F7A6-48ff-9899-7957415A0A49.html)）。

```
package
{
    import spark.component.Button;

    public class MyCustomButton extends Button
    {
        static public const SMALL:String = "smallButton";
        static public const BIG:String   = "bigButton";

        static private const DEFAULT_SIZE:String = SMALL;

        public function MyCustomButton(type:String = DEFAULT_SIZE)
        {
            super();

            if (type == SMALL)
            {
                setStyle("skinClass", SmallButtonSkin);
            }
            else
            {
                setStyle("skinClass", BigButtonSkin);
            }
        }
    }
} 
```

然后，您必须创建不同的皮肤类，您将在其中定义按钮的视觉逻辑。

# mysql - 如何优化此存储过程？

> ID：15627727
> 
> 赞同：0
> 
> 时间：2013-03-26T01:22:00.363
> 
> 标签：mysql, optimization, stored-procedures

我需要一些帮助来优化这个过程：

```
DELIMITER $$

CREATE DEFINER=`ryan`@`%` PROCEDURE `GetCitiesInRadius`(
    cityID  numeric (15), 
    `range`  numeric (15)
)
BEGIN 
    DECLARE lat1  decimal (5,2);
    DECLARE long1  decimal (5,2);
    DECLARE rangeFactor  decimal (7,6);
    SET rangeFactor = 0.014457;
    SELECT `latitude`,`longitude` into  lat1,long1
    FROM  world_cities as wc WHERE city_id = cityID;

    SELECT 
        wc.city_id, 
        wc.accent_city as city, 
        s.state_name as state, 
        c.short_name as country,
        GetDistance(lat1, long1, wc.`latitude`, wc.`longitude`) as dist
        FROM  world_cities as wc
        left join states s on wc.state_id = s.state_id
        left join countries c on wc.country_id = c.country_id
        WHERE
        wc.`latitude` BETWEEN lat1 -(`range` * rangeFactor) AND lat1 + (`range` * rangeFactor)
        AND wc.`longitude` BETWEEN long1 - (`range` * rangeFactor) AND long1 + (`range` * rangeFactor)
        AND GetDistance(lat1, long1, wc.`latitude`, wc.`longitude`) <= `range`
        ORDER BY dist limit 6;
END 
```

这是我对查询主要部分的解释：

```
+----+-------------+-------+--------+---------------+--------------+---------+--------------------------+------+----------------------------------------------+
| id | select_type | table | type   | possible_keys | key          | key_len | ref                      | rows | Extra                                        |
+----+-------------+-------+--------+---------------+--------------+---------+--------------------------+------+----------------------------------------------+
|  1 | SIMPLE      | B     | range  | idx_lat_long  | idx_lat_long | 12      | NULL                     | 7619 | Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | s     | eq_ref | PRIMARY       | PRIMARY      | 4       | civilipedia.B.state_id   |    1 |                                              |
|  1 | SIMPLE      | c     | eq_ref | PRIMARY       | PRIMARY      | 1       | civilipedia.B.country_id |    1 | Using where                                  |
+----+-------------+-------+--------+---------------+--------------+---------+--------------------------+------+----------------------------------------------+
3 rows in set (0.00 sec) 
```

以下是索引：

```
mysql> show indexes from world_cities;
+--------------+------------+---------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table        | Non_unique | Key_name      | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+--------------+------------+---------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| world_cities |          0 | PRIMARY       |            1 | city_id     | A         |     3173958 |     NULL | NULL   |      | BTREE      |         |
| world_cities |          1 | country_id    |            1 | country_id  | A         |       23510 |     NULL | NULL   | YES  | BTREE      |         |
| world_cities |          1 | city          |            1 | city        | A         |     3173958 |     NULL | NULL   | YES  | BTREE      |         |
| world_cities |          1 | accent_city   |            1 | accent_city | A         |     3173958 |     NULL | NULL   | YES  | BTREE      |         |
| world_cities |          1 | idx_pop       |            1 | population  | A         |       28854 |     NULL | NULL   | YES  | BTREE      |         |
| world_cities |          1 | idx_lat_long  |            1 | latitude    | A         |     1057986 |     NULL | NULL   | YES  | BTREE      |         |
| world_cities |          1 | idx_lat_long  |            2 | longitude   | A         |     3173958 |     NULL | NULL   | YES  | BTREE      |         |
| world_cities |          1 | accent_city_2 |            1 | accent_city | NULL      |     1586979 |     NULL | NULL   | YES  | FULLTEXT   |         |
+--------------+------------+---------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
8 rows in set (0.01 sec) 
```

您在查询中看到的函数我认为不会导致速度变慢，但这里是函数：

```
CREATE DEFINER=`ryan`@`%` FUNCTION `GetDistance`(lat1  numeric (9,6),
    lon1  numeric (9,6), 
    lat2  numeric (9,6),
    lon2  numeric (9,6)  ) RETURNS decimal(10,5)
BEGIN 
    DECLARE  x  decimal (20,10);
    DECLARE  pi  decimal (21,20); 
    SET  pi = 3.14159265358979323846; 
    SET  x = sin( lat1 * pi/180 ) * sin( lat2 * pi/180  ) + cos( 
        lat1 *pi/180 ) * cos( lat2 * pi/180 ) * cos( (lon2 * pi/180) -
        (lon1 *pi/180)
    );
    SET  x = atan( ( sqrt( 1- power( x, 2 ) ) ) / x );
    RETURN  ( 1.852 * 60.0 * ((x/pi)*180) ) / 1.609344;
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:14:10.320

据我所知，您的逻辑并没有直接错误会使这变慢，所以问题最终是您不能在此查询中使用任何索引。

MySQL 需要进行全表扫描并将 WHERE 子句的功能应用于每一行以确定它是否通过了条件。目前使用了 1 个索引：`idx_lat_long`.

这有点糟糕的索引，该`long`部分永远不会被使用，因为该`lat`部分是一个浮点数。但至少您设法有效地过滤掉了`latitude`范围之外的所有行。但这很可能..这些仍然很多。

实际上，在经度上你会得到稍微好一点的结果，因为人类只生活在地球的中间 30%。我们在水平方向上非常分散，但不是在垂直方向上。

无论如何，进一步最小化该字段的最佳方法是尝试过滤掉一般区域中的尽可能多的记录。现在它是地球上一个完整的垂直条带，试着让它成为一个边界框。

你可以天真地把地球切成 10x10 段。在最好的情况下，这将确保查询仅限于地球的 10% ;)。

但是，一旦您的边界框超出分隔线段，则只能在索引中使用第一个坐标（纬度或经度），您最终会遇到同样的问题。

所以当我想到这个问题时，我开始以不同的方式思考这个问题。相反，我将地球分成了 4 个部分（比如说，地图上的东北、西北、东南、西南）。所以这给了我这样的坐标：

*   0,0
*   0,1
*   1,0
*   1,1

我没有将 x 和 y 值放在 2 个单独的字段中，而是将其用作位字段并同时存储两者。

然后我再次划分了 4 个盒子中的每一个，这给了我们 2 组坐标。外坐标和内坐标。我仍然在同一个字段中对此进行编码，这意味着我们现在将 4 位用于我们的 8x8 坐标系。

我们能走多远？如果我们假设一个 64 位整数字段，这意味着 32 位可以用于 2 个坐标中的每一个。这为我们提供了一个 4294967295 x 4294967295 的网格系统，全部编码到一个数据库字段中。

该字段的美妙之处在于您可以对其进行索引。这有时被称为（我相信）四叉树。如果您需要在数据库中选择一个大区域，您只需计算 64 位左上角坐标（在 4294967295 x 4294967295 网格系统中）和左下角，并且可以保证该框中的任何内容也将是两个数之内。

你怎么得到这些数字。让我们偷懒，假设我们的 x 和 y 坐标的范围都在 -180 到 180 度之间。（y 坐标当然是一半，但我们很懒惰）。

首先，我们将其设为正数：

```
// assuming x and y are our long and lat.

var x+=180;
var y+=180; 
```

所以现在这些最大值是 360，并且（4294967295 / 360 大约是 11930464）。

因此，要转换为我们的新网格系统，我们只需：

```
var x*=11930464;
var y*=11930464; 
```

现在我们必须区分数字，我们需要将它们变成 1 个数字。x 的第 1 位，然后 y 的第 1 位，x 的第 2 位，y 的第 2 位，依此类推。

```
// The 'morton number' 
morton = 0
// The current bit we're interleaving
bit = 1
// The position of the bit we're interleaving
position = 0

while(bit <= latitude or bit <= longitude) {

  if (bit & latitude) morton = morton | 1 << (2*position+1)
  if (bit & longitude) morton = morton | 1 << (2*position)

  position += 1
  bit = 1 << position

} 
```

我称最终变量为 'morton'，是 1966 年提出它的人。

所以这最终给我们留下了以下内容：

1.  对于数据库中的每一行，计算 morton 数并将其存储。
2.  每当您进行查询时，首先确定最大边界框（作为 morton 数）并对其进行过滤。

这将大大减少您需要检查的记录数量。

这是我编写的一个存储过程，它将为您进行计算：

```
CREATE FUNCTION getGeoMorton(lat DOUBLE, lng DOUBLE) RETURNS BIGINT UNSIGNED DETERMINISTIC 
BEGIN

  -- 11930464 is round(maximum value of a 32bit integer / 360 degrees) 

  DECLARE bit, morton, pos BIGINT UNSIGNED DEFAULT 0;  

  SET @lat = CAST((lat + 90) * 11930464 AS UNSIGNED);
  SET @lng = CAST((lng + 180) * 11930464 AS UNSIGNED);
  SET bit = 1;

  WHILE bit <= @lat || bit <= @lng DO 

    IF(bit & @lat) THEN SET morton = morton | ( 1 << (2 * pos + 1)); END IF;
    IF(bit & @lng) THEN SET morton = morton | ( 1 << (2 * pos)); END IF;

    SET pos = pos + 1;

    SET bit = 1 << pos;

  END WHILE; 

  RETURN morton;
END; 
```

一些警告：

1.  绝对最坏的情况仍然会扫描整个表的 50%。不过，这种机会非常低，而且我已经看到大多数实际查询的性能绝对显着提高。
2.  在这种情况下，边界框假定为[欧几里得空间](http://en.wikipedia.org/wiki/Euclidean_space)，意思是.. 一个平面。实际上，您的边界框不是精确的正方形，当靠近两极时它们会严重扭曲。只要让盒子大一点（取决于你想要的精确度），你就可以走得很远。大多数现实世界的数据通常也不靠近两极；）。请记住，此过滤器只是一个“粗略过滤器”，可以最大限度地去除可能不需要的行。
3.  这是基于所谓的[Z-Order 曲线](http://en.wikipedia.org/wiki/Z-order_curve)。为了获得更好的性能，如果您喜欢冒险……您可以尝试选择[希尔伯特曲线](http://en.wikipedia.org/wiki/Hilbert_curve)。这条曲线奇怪地旋转，这确保了在最坏的情况下，您只会扫描大约 25% 的桌子。神奇！一般来说，这也会过滤掉更多不需要的行。

这一切的来源：当我遇到同样的问题并试图创造性地找到解决方案时，我写了 3 篇关于这个主题的博文。与 MySQL 的 GEO 索引相比，我获得了更好的性能。

*   [http://www.rooftopsolutions.nl/blog/229](http://www.rooftopsolutions.nl/blog/229)
*   [http://www.rooftopsolutions.nl/blog/230](http://www.rooftopsolutions.nl/blog/230)
*   [http://www.rooftopsolutions.nl/blog/231](http://www.rooftopsolutions.nl/blog/231)

# cuda - cudaThreadSynchronize & 性能

> ID：15627730
> 
> 赞同：0
> 
> 时间：2013-03-26T01:22:07.707
> 
> 标签：cuda, synchronization, thrust

几天前，我正在比较我的一些代码的性能，其中我执行了相同算法的非常简单的替换和推力实现。我发现一个数量级的不匹配（！）有利于 Thrust，所以我开始让我的调试器“冲浪”到他们的代码中，以发现魔法发生的地方。

令人惊讶的是，我发现我非常直接的实现实际上与他们的非常相似，一旦我摆脱了所有仿函数的东西并进入了本质。我看到 Thrust 有一个聪明的方法来决定 block _size 和 grid_size （顺便说一句：确切地说，它是如何工作的？！），所以我只是接受他们的设置并再次执行我的代码，因为它们非常相似。我获得了一些微秒，但情况几乎相同。然后，最后，我不知道为什么，只是“尝试”我在内核和 BINGO 之后删除了 cudaThreadSynchronize()！我将差距归零（并且更好）并获得了整个数量级的执行时间。访问我的数组的值，我看到它们完全符合我的预期，因此执行正确。

现在的问题是：我什么时候可以摆脱 cudaThreadSynchronize (et similia)？为什么会造成如此巨大的开销？我看到 Thrust 本身最后没有同步（如果未定义宏 __THRUST_SYNCHRONOUS 且未定义，则为 NOP，synchronize_if_enabled(const char* message)）。详细信息和代码如下。

```
// my replace code
template <typename T>
__global__ void replaceSimple(T* dev, const int n, const T oldval, const T newval)
{
    const int gridSize = blockDim.x * gridDim.x;
    int index = blockIdx.x * blockDim.x + threadIdx.x;
    while(index < n)
    {
        if(dev[index] == oldval)
            dev[index] = newval;
        index += gridSize;
    }
}

// replace invocation - not in main because of cpp - cu separation
template <typename T>
void callReplaceSimple(T* dev, const int n, const T oldval, const T newval)
{       
    replaceSimple<<<30,768,0>>>(dev,n,oldval,newval);
    cudaThreadSynchronize();
}

// thrust replace invocation
template <typename T>
void callReplace(thrust::device_vector<T>& dev, const T oldval, const T newval)
{
    thrust::replace(dev.begin(), dev.end(), oldval, newval);
} 
```

参数详细信息：数组：n=10,000,000 个元素设置为 2，oldval=2，newval=3

*   执行推力调用替换（推力）的时间：0.057 ms
*   同步执行 callReplaceSimple 的时间：0.662 毫秒
*   不同步执行 callReplaceSimple 的时间：0.011 毫秒

我使用了包含 Thrust 的 CUDA 5.0，我的显卡是 GeForce GTX 570，我有一个四核 Q9550 2.83 GHz 和 2 GB RAM。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T01:38:43.747

内核启动是异步的。如果删除该`cudaThreadSynchronize()`调用，则仅测量内核启动时间，而不是直到内核完成的时间。

# javascript - CSS动画播放状态问题：动画在恢复时跳回初始帧？

> ID：15627732
> 
> 赞同：2
> 
> 时间：2013-03-26T01:22:10.253
> 
> 标签：javascript, css, animation, webkit, css-animations

我得到了类似以下的内容，这是一个在两个图像之间交叉淡入淡出的 CSS 动画：

**HTML**

```
<div id="bg">
    <img src="bg_01.jpg">
    <img src="bg_02.jpg">
</div> 
```

**CSS**

```
body {
    background: black;
    overflow-y: hidden;
}
#bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
img {
    width: 100%;
    position: fixed;
    top: 0;
    left: 0;
}
img:last-child {
    -webkit-animation: test 30s infinite alternate;
}
@-webkit-keyframes test {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
} 
```

并且有一个像这样的 JavaScript 片段可以定期打开和关闭动画：

**JavaScript**

```
var state = 'running';

setInterval(function() {
    $('img:last-child').css({
        '-webkit-animation-play-state': state
    });

    state === 'running' ? state = 'paused' : state = 'running';
}, 1000); 
```

问题是，当动画恢复（“暂停”->“正在运行”）时，有可能会出现一些显示故障，并且这种可能性会根据您运行页面的设备类型而有所不同。

如果你在一些最先进的机器上运行页面，事情看起来很顺利；但是，如果您切换到另一个浏览器选项卡，然后再切换回来，您可能会看到您的动画非常明显地从动画中间跳回到第一帧（**`img:last-child`不透明度突然回到 1**）并重新开始。

另一方面，如果您在弱设备上运行，您可以在不切换浏览器选项卡的情况下看到故障：几乎每次动画恢复时，都会有一个闪烁的时刻，即**`img:last-child`'s opacity 被短暂设置为 1**并在视觉上“出现” ，在动画可以从上一个正确状态恢复并继续之前。

这仅仅是一个 WebKit 错误，我无法避免，还是有一些棘手的方法来调整我的代码，以便可以处理初始帧的这种烦人的闪烁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T09:59:18.430

在 java 脚本中更改条件值。不要使用**播放**状态。仅在 1000 秒后使用**暂停状态...**

# php - PHP mkdir 失败且没有错误

> ID：15627741
> 
> 赞同：1
> 
> 时间：2013-03-26T01:22:44.907
> 
> 标签：php, upload, mkdir

我正在尝试在我家的本地网络上设置一个小型文件共享服务器，但上传器遇到了一些大问题。它似乎失败的步骤是目录创建步骤，但是，当我第一次发布此内容时，Apache 日志文件中没有错误，但事实证明这是滞后文件权限问题的结果。

这是相关的日志条目。

```
[Mon Mar 25 18:43:05 2013] [error] [client 10.0.0.17] PHP Warning:  mkdir(): Permission denied in /server/upload_movie.php on line 10, referer: http://10.0.0.17/upload_movie.html 
```

它让我感到困惑，因为我已经运行 sudo chmod 0777 /server/* sudo chmod 0777 /server 并且 /server/ 是 rood 目录。

我的代码如下

```
<?php
echo "starting". "<br>";
$allowedExts = array("mp4", "mpg", "avi", "mkv");
$extension = end(explode(".", $_FILES["uplodedfile"]["name"]));
echo "filetype parsed". "<br>";
$path = "/downloads/movies/unsorted/";
echo "checking upload directory". "<br>";
if(!is_dir($path)){
    echo "upload directory not found, creating...";
    if (mkdir($path,0777,true))
        {
        echo "directory creation complete". "<br>";
        }
    else
        {
        echo "directory creation failed at ".$path."<br>";
        }
}
echo "checking file". "<br>";
if (false)
  {
  echo "filetype and size passed". "<br>";
  if ($_FILES["uplodedfile"]["error"] > 0)
    {
    header('Location:  upload_failure.php?file='.$_FILES["uplodedfile"]['name'].'&error='.$_FILES["uplodedfile"]["error"]);
    exit();
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["uplodedfile"]["name"]))
      {
       echo $_FILES["file"]["name"] . " already exists on server. ". "<br>";
      }
    else
      {
      echo "creating perminant copy of file". "<br>";
      move_uploaded_file($_FILES["uplodedfile"]["tmp_name"],
      $path."/" . $_FILES["uplodedfile"]["name"]);
      echo "Stored in: " . "movie_uploads/" . $_FILES["file"]["name"]. "<br>";
      }
    }
    header('Location:  upload_success.php?type=movie');
    exit();
  }
else
  {
  echo "error:<br>";
  echo "Type: " . $_FILES["file"]["type"] . "<br>";
  echo "Name: " . $_FILES["file"]["name"] . "<br>";
  echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
  echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";
  echo "extension: ".$extension;
  exit();
  // echo "Invalid file";
  }
?> 
```

输出如下

```
starting
filetype parsed
checking upload directory
upload directory not found, creating...directory creation failed at /downloads/movies/unsorted/
checking file
error:
Type: 
Name: 
Size: 0 kB
Temp file: 
extension: 
```

调用它的代码是

```
<form enctype="multipart/form-data" action="upload_movie.php" method="POST">
<input name="uploadedfile" type="file" /><br />
<input type="submit" value="Upload File" />
</form> 
```

我已经尝试了[PHP mkdir 中的所有建议：权限被拒绝问题](https://stackoverflow.com/questions/5246114/php-mkdir-permission-denied-problem)，我关闭了 selinux。我正在使用 Fedora 17。服务器正在一个 ext4 分区上运行，该分区不包含其他任何内容。

正如评论中所建议的，我尝试了 $error = error_get_last(); 回声 $error['message']; 哪个是未定义的索引：文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:55:15.880

您的错误消息告诉了其中的所有内容。这是文件写权限问题。如果您想在 /downloads/movies/unsorted/ 中写入文件，则需要为所有目录设置写入权限（777）。但是您是说，您已经检查了下载目录的权限，但您可能没有设置重复目录的权限。所以在上传文件之前尝试下面的命令。

```
Sudo chmod -R 777 /download 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:59:45.053

您似乎已经为 /server-directory 设置了正确的权限。但是您的服务器想要写入 /downloads- 目录。您应该使用以下命令启动并运行：

```
Sudo chmod 777 /download 
```

# model-view-controller - 在 ST2 应用程序中正确使用组件

> ID：15627742
> 
> 赞同：0
> 
> 时间：2013-03-26T01:22:47.617
> 
> 标签：model-view-controller, extjs, architecture, sencha-touch-2

我有一个非常简单的移动应用程序，我想用 Sencha Touch 2 构建。我对 ExtJs 有很多经验，但对他们的 MVC 架构并不真正了解。我想要实现的是：

*   首先是一个带有工具栏的主屏幕，中间呈现一些图标，用于浏览应用程序功能。
*   单击其中一个图标应切换到具有可滚动列表的屏幕。

我正在努力的是定义视图和控制器的正确位置。以及例如主屏幕是否应该使用控制器？我应该手动创建视口吗？

我现在所拥有的，除了工具栏之外没有渲染任何东西：

应用程序.js

```
Ext.application({
    name: 'SG',

    views: [
        'Main',
        'MainScreen'
    ],

    launch: function() {
        // Destroy the #appLoadingIndicator element
        Ext.fly('appLoadingIndicator').destroy();

        // Initialize the main view
        Ext.Viewport.add(Ext.create('SG.view.Main'));
    }
}) 
```

主.js

```
Ext.define('SG.view.Main', {
    extend: 'Ext.Container',
    requires: [
        'Ext.TitleBar',
        'ShopGun.view.MainScreen'
    ],
    config: {
        layout : 'fit',

        items: [
            {
                title: 'Welcome',
                iconCls: 'home',
                position: 'top',
                scrollable: true,

                items: [
                    {
                        docked: 'top',
                        xtype: 'titlebar',
                        title: 'SG Alpha 1'
                    }
                    Ext.create('SG.view.MainScreen', {
                        docked: 'bottom'
                    })
                ]
            }
        ]
    }
}); 
```

MainScreen.js

```
Ext.define('SG.view.MainScreen', {
    extend: 'Ext.Container',
    xtype: 'mainScreen',

    initialize : function(){

        Ext.define("MenuIcon", {
            extend: "Ext.data.Model",
            config: {
                fields: [
                    {name: "Name", type: "string"},
                    {name: "Icon",  type: "string"}
                ]
            }
        });

        this.store = Ext.create('Ext.data.Store', {
            model: 'MenuIcon',
            data: [
                {
                    Name: "A",
                    Icon: "a.png"
                },
                {
                    Name: "B",
                    Icon: "b.png"
                }
            ]
        });

        this.html = 'foo';

        this.callParent(arguments);
    }
}); 
```

最后是我想要得到的图像：

![在此处输入图像描述](../Images/bba058924c4416c9e624e4749218d8a8.png)

* * *

编辑：

这里有一个 senchafiddle 演示：[http](http://www.senchafiddle.com/#jSqtV) ://www.senchafiddle.com/#jSqtV （根本不渲染，但不会抛出任何错误）。

# c++ - 防止为给定类型实例化模板化成员函数

> ID：15627747
> 
> 赞同：4
> 
> 时间：2013-03-26T01:23:42.680
> 
> 标签：c++, templates, c++11, metaprogramming

我有一个模板化的矩阵类，我为各种 POD 类型和自定义类类型显式实例化。然而，一些成员函数对一些这样的自定义类型没有意义。例如：

```
Matrix<int> LoadFile(....); // This makes sense
Matrix<My_custom_class> LoadFile(...); //This doesn't make sense in the context of the custom class 
```

我可以阻止选择类型对象的`LoadFile`函数（它是一个成员函数）的实例化吗？`Matrix`到目前为止，我通过创建`LoadFile`一个朋友函数然后显式控制它的实例化来避免这个问题。但我想知道我是否可以`LoadFile`在`Matrix`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T01:49:52.650

第一个问题是你是否真的需要控制它。如果他们在存储的矩阵上调用该成员函数会发生什么`My_custom_class`？你能在你的类（或模板）中提供支持，以便成员函数能够工作吗？

如果您真的想禁止对某些特定类型使用这些成员函数，那么您可以使用专门化来阻止特定实例化：

```
template <typename T>
struct test {
   void foo() {}
};
template <>
inline void test<int>::foo() = delete; 
```

或者甚至只是`static_assert`在通用实现中添加 s 来验证允许或禁止哪些类型的先决条件？

```
template <typename T>
struct test {
   void foo() {
       static_assert(std::is_same<T,int>::value || std::is_same<T,double>::value,
                     "Only allowed for int and double");
       // regular code
   }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T02:03:08.017

，`std::enable_if`这是我能想到的最好的

```
template< typename T >
struct Matrix {
    template< typename T >
    Matrix< typename std::enable_if<std::is_integral<T>::value, T>::type >
        LoadFile() 
    {
        return Matrix<T>();
    }
};

Matrix<int> a;
Matrix<int> b = a.LoadFile<int>() 
```

只输入`int`compile 而其他不输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T12:10:19.677

如果选定的类型集在编译时已知，并且您使用 c++11 和支持[类型别名](http://en.cppreference.com/w/cpp/language/type_alias)、[统一初始化](http://www.informit.com/articles/article.aspx?p=1852519)和[constexpr](http://www.cprogramming.com/c++11/c++11-compile-time-processing-with-constexpr.html)（例如 gcc 4.7）的编译器，您可以像这样使您的代码更清晰（来自上面的 yngum 示例）：

```
template <bool Cond, class T = void>
using enable_if_t = typename std::enable_if<Cond, T>::type;

    template< typename T >
    struct Matrix {

    template< typename T >
    //std::is_integral has constexpr operator value_type() in c++11\. This will work thanks to uniform init + constexpr. With the alias, no more need for typename + ::type
    Matrix<enable_if_t<std::is_integral<T>{}>>
    LoadFile() 
    {
        return Matrix<T>();
    }
};

Matrix<int> a;
Matrix<int> b = a.LoadFile<int>(); 
```

但是请注意此代码的兼容性，因为这些功能最近才得到支持，而一些编译器还没有支持。[您可以在此处](http://cpprocks.com/c11-compiler-support-shootout-visual-studio-gcc-clang-intel/)查看有关 c++11 编译器支持的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T01:44:48.027

> 我可以防止为选择类型的 Matrix 对象实例化 LoadFile 函数（它是一个成员函数）吗？

您最好的选择是使用`static_assert`当您尝试在使用阻塞类型实例化的类版本中调用该方法时会产生编译器错误的方法。使用`std::enable_if`, 和其他可以选择性地“禁用”方法本身的方法将要求您创建带有和不带有相关方法的类的部分或全部特化，以防止编译器错误。例如，AFAIK，您**不能**执行以下操作：

```
template <typename T>
struct test
{
    static const bool value = false;
};

template<>
struct test<double>
{
    static const bool value = true;
};

template<typename T>
struct example
{
    void print() { cout << "Printing value from print()" << endl; }

    typename enable_if<test<T>::value, T>::type another_print() 
    { 
        cout << "Printing value from another_print()" << endl;
        return T(); 
    }
}; 
```

如果您尝试实例化`example<int>`等，您最终会在对象类型的实例化点出现编译器错误。你不能简单地打电话`example<int>::print()`就没事，只有当你选择打电话时才会遇到问题`example<int>::another_print()`。的专业化`example<T>`可以让你解决这个问题，但这可能有点混乱。正如最初推测的那样，a`static_assert`可能是最容易处理的情况，同时还会向最终用户发送一条很好的消息来解释问题所在。

请记住，创建编译器错误**是**目标，这是一个很好的目标。如果您阻止了一个方法被实例化，并且最终用户决定调用它，那么无论哪种方式，您最终都会遇到编译器错误。没有 的版本`static_assert`会留下很多令人头疼的问题，因为您的类的用户试图解析可能非常冗长的编译器错误消息，因为该`static_assert`方法是直接且切中要害的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T18:40:18.507

如果您可以使用（[http://www.amazon.com/Modern-Design-Generic-Programming-Patterns/dp/0201704315](https://rads.stackoverflow.com/amzn/click/com/0201704315)）中的 TypeLists - Loki，您可以实现类似：

```
template<bool>
struct Static_Assert;

template<>
struct Static_Assert<true>{};

class B{};

template<typename T>
class A{
public:
  A(){
    Static_Assert< 0 == utils::HasType<T, TYPELIST_2(B,int) >::value >();
  }
}; 
```

那么您的 HasType 将类似于：

```
template<typename T, typename TList>
struct HasType{
  enum { value = 0+HasType< T, typename TList::Tail >::value };
};

template<typename T>
struct HasType< T, NullType >{
  enum { value = 0 };
};

template<typename T, typename U>
struct HasType< T, TypeList<T, U> >{
  enum { value = 1 };
}; 
```

在列表中，您可以添加您希望阻止作为模板参数传递的类。

# python - Tic Tac Toe - 寻找空的网格图块

> ID：15627749
> 
> 赞同：0
> 
> 时间：2013-03-26T01:23:53.827
> 
> 标签：python, tic-tac-toe

这是我之前关于井字游戏的问题的延续。我正在制作一个函数，它将收集井字棋棋盘的所有空网格图块，并将它们返回到一个列表中。这个函数将是递归的，因为它会不断寻找与移动相邻的空网格图块。像这样的东西：

```
<------->
< X O - >
< - - X >
< O X - >
<-------> 
```

因此，假设用户（或者在这种情况下，我为与计算机对战的计算机编写的代码）想通过选择一个图块来了解哪些网格图块是空的。对于上面的示例，瓷砖将被编号

```
0 1 2
3 4 5 
6 7 8 
```

所以假设计算机选择了瓷砖 1 - 它会搜索相邻的瓷砖（所以在这种情况下，顶部、左侧、右侧和底部）并查看它是否可以在那里移动。如果它发现相邻的图块是空的，它也会找到该图块的相邻图块，直到用尽所有可能性。因此，我希望能够使用当前棋盘和 playerMove 调用我的函数，并找到相邻的空白图块，并将它们附加到列表中。有小费吗？

```
def whatIsEmpty(moveList,move):
     emptyTiles = []
     #something that allows you to find the adjacent tiles of the move
     #something that allows you to find the adjacent tiles of the tiles found above, until all are found 
```

我知道我需要几个 for 循环，但我不知道如何开始。我所知道的是我想在一个假想的 3x3 网格的中间移动，并找到它的相邻图块，看看它们是否是空的，等等。所以在二维列表中，我会使用这样的东西：

```
moveList[x-1][y]
moveList[x][y+1]
moveList[x+1][y]
moveList[x][y+1] 
```

其中每一个对应于顶部、右侧、左侧和底部，这将被递归使用。非常感谢任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:33:41.177

在这种情况下，递归策略可能不是最好的。考虑您自己提供的示例：

```
<------->
< X O - >
< - - X >
< O X - >
<-------> 
```

假设下一步是在中间的瓷砖上进行的。如果递归函数只检查与其相邻的四个图块，那么它将错过与其余部分“切断”的图块（右下角）。如果你要编写一个函数来检查所有 8 个相邻的瓦片（包括对角相邻的），你不妨迭代地编写它。

```
for i in range(3):
   for j in range(3):
      pass # Replace with code to add empty tile to list 
```

# entity-framework-5 - 具有 EF 复杂类型的 WCF 数据服务

> ID：15627757
> 
> 赞同：2
> 
> 时间：2013-03-26T01:24:51.940
> 
> 标签：entity-framework-5, wcf-data-services

我只是在玩 EF5 和数据服务。决定测试暴露SP。将其映射到 FirmInfo 复杂类型。在这个愚蠢的错误中运行。似乎无法弄清楚。

我为我创建了这个复杂类型的 .tt 模板

```
public partial class FirmInfo
{
    public int FirmID { get; set; }
    public string Name { get; set; }
} 
```

我添加了这个以将其公开给 MyDataService.svc.cs 类：

```
[WebGet]
public IQueryable<FirmInfo> pSPTest(int id)
{
    return CurrentDataSource.pSPTest(id).AsQueryable();
} 
```

我可以在浏览器中看到它：

```
- <pSPTest xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
- <element m:type="DB.FirmInfo">
    <FirmID m:type="Edm.Int32">1</FirmID> 
    <Name>Firm Name</Name> 
  </element>
  </pSPTest> 
```

但是当由 c# 客户端应用程序使用时，我不断收到此错误：“Client.ServiceReference.FirmInfo”类型上不存在属性“元素”。确保仅使用类型定义的属性名称。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:02:27.690

您如何使用 C# 客户端应用程序使用结果？如果您使用的是 WCF 数据服务客户端，您应该调用`Execute<T>()`.`DataServiceContext`

有关如何使用 WC 数据服务客户端调用服务操作的指导，请查看此文档：http: [//msdn.microsoft.com/en-us/library/hh230677.aspx](http://msdn.microsoft.com/en-us/library/hh230677.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T12:17:43.303

您还可以通过将操作结果声明为您期望的集合类型来实现这一点，就像这样。

```
var query = context.CreateQuery<ObservableCollection<wsAccountView.organisation>>("GetOrganisationsByUserName").AddQueryOption("UserName", @"'SFN\AO'");
var Organisations = query.ToList(); 
```

# java - 使用 mmscomputing 进行内存异常扫描

> ID：15627774
> 
> 赞同：1
> 
> 时间：2013-03-26T01:27:23.267
> 
> 标签：java, twain

我试图用 TwainAppletExample.java （更新方法）设置扫描分辨率并抛出这个：

> uk.co.mmscomputing.device.twain.TwainFailureException：调用 twain 源时失败。cc=没有足够的内存来执行操作

我知道 2009 年 4 月 23 日有一个固定的内存[错误](http://thorntonzone.com/manuals/Compression/Fax,%20IBM%20MMR/MMSC/mmsc/uk/co/mmscomputing/news/index.html)，但我只是在[这里](http://aigleon.blogspot.com/2011/03/no-se-si-alguien-encuentre-esto-asi-que.html)找到了一个旧版本 （最后一次更新是 2008 年 7 月 25 日），所以可能是版本问题。

我究竟做错了什么？

# iphone - 检索和更改 iPhone 照片库中的数据

> ID：15627777
> 
> 赞同：1
> 
> 时间：2013-03-26T01:27:31.877
> 
> 标签：iphone, photo-gallery

现在，我已经设法使用此模块获取专辑和照片列表.. [https://github.com/quickstonesw/Appcelerator-Urban-Image-Library](https://github.com/quickstonesw/Appcelerator-Urban-Image-Library)。

因此，在我的应用程序中，我可以创建新相册、删除相册、将照片从相册移动到另一个相册以及删除照片。当我创建相册和删除相册时，它在应用程序中运行良好，但在创建新相册后，当签入默认照片库时，相册不存在。现在，我正在处理移动照片和删除照片。

我的问题是：

1）如果可能的话，如何将我在应用中创建的相册添加到默认照片库中？

2）如果问题1是可能的，我该如何删除它？

3) 如何将照片从相册移动到相册并将其反映回默认照片库？

4）如果我在我的应用程序中删除了照片，请从照片库中删除照片

上面的所有问题都可以做吗？我可以使用另一个模块来实现它吗？我正在使用钛最新的 SDK 3.0.2，并且只为 iPhone 构建。

# linux - 在 Puppet 的节点声明中更改类变量

> ID：15627779
> 
> 赞同：3
> 
> 时间：2013-03-26T01:27:36.713
> 
> 标签：linux, puppet

我正在尝试为我的所有服务器创建一个“模板”。我有2个配置。一个 NTP 客户端（在基类类中处理。我想通过在节点声明中声明特定内容来创建特定于 NTP 服务器的覆盖。类似于“baseclass::ntp:restrict => true”。或者或者，我将如何从 baseclass::ntp 更改已声明的变量之一？

有没有人有任何想法主机这样做？

这是我到目前为止所拥有的：

模板.pp

```
class baseclass {
    include defaultusers
    include sudoers
    include issue

    class { ntp:
            ensure => running,
            servers => ['ntpserver1.host.com',
                        'ntpserver2.host.com',],
            autoupdate => false,
    }
} 
```

节点.pp

```
node default {
    include baseclass
}

node "ntpserver1.host.com" inherits default {
    <some code here to declare new variable in baseclass::ntp>
    <some code here to change existing variable, such as "ensure">
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T03:25:53.797

您遇到了参数化类的问题：它们不支持覆盖。他们应该这样做，但是由于在 Puppet 中初始化事物的顺序存在各种问题，您不能将参数覆盖到类中。一旦你设置它们，你就完成了。这与定义不同，其中覆盖参数按您的预期工作。有一个[公开的错误](https://tickets.puppetlabs.com/browse/PUP-1367)，我们中的一些人已经投票支持并正在关注，但似乎进展甚微。

鉴于此，我的建议是将您的参数化 ntp 类重新转换为定义，因为定义将完全按照您的需要工作。将类更改为：

```
define ntp($servers, $autoupdate = false, $ensure = 'running') {
  # ... put code from class here ...
} 
```

然后将基类更改为：

```
ntp { $fqdn:
  servers => [ 'ntpserver1.host.com',
               'ntpserver2.host.com',],
} 
```

您必须更改类结构以添加新类，因为您不能从节点中的类继承，因此将节点更改为：

```
node "ntpserver1.host.com" inherits default {
  include hosts::ntpserver1
} 
```

或者您想命名每个主机的配置类。然后，在该课程中，您可以完全按照您的预期去做：

```
class hosts::ntpserver1 inherits baseclass {
  Ntp["$fqdn"] { ensure => 'stopped' }
} 
```

我知道这似乎是一个巨大的变通，特别是如果你习惯在节点内做一堆东西（不参与类继承树）。但是如果不能覆盖类的参数，似乎没有一个好的选择。（我们使用这种方法管理 500 多个节点和大约 100 个完全独立的服务定义，具有数百个模块和主机之间的*大量*变化，包括每个主机的覆盖，并且效果非常好。）

**TL,DR 摘要**：您不能覆盖类参数。一旦你将参数传递给 Puppet 中的类，你就完成了。您可以覆盖定义参数。因此，您想要覆盖的任何内容都最好写成定义而不是类。但是，请记住覆盖层次结构意味着您必须将节点定义的核心放在一个类中，因为只有类可以继承并覆盖另一个类。因此，如果您大量使用覆盖，请养成让您的节点定义变得微不足道的习惯（只包括一个完成所有工作的类），以便您的类可以从基类继承并覆盖定义的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T21:38:54.333

我接受了 rra 的回答，但我找到了一个更适合我的解决方案。我想这是一个轻微的黑客攻击：

模板.pp

```
class baseclass ($ntprestrict = 'false') {
    include defaultusers
    include sudoers
    include issue

    class { ntp:
            ensure => running,
            servers => ['ntpserver1.host.com',
                        'ntpserver2.host.com',],
            autoupdate => false,
            restrict => $ntprestrict,
    }
} 
```

节点.pp

```
node "ntpserver1.host.com" {
    class { baseclass: ntprestrict => 'true' }
}
node "client.host.com" {
    class { baseclass: ntprestrict => 'false' }
} 
```

# sql - 存储和重用 INSERT 返回的值 ... RETURNING

> ID：15627781
> 
> 赞同：10
> 
> 时间：2013-03-26T01:28:27.750
> 
> 标签：sql, postgresql, variables, primary-key, common-table-expression

在 PostgreSQL 中，可以放在语句`RETURNING`的末尾`INSERT`以返回，例如，当该值由`SERIAL`类型自动设置时，该行的主键值。

问题：

如何将此值存储在可用于将值插入其他表的变量中？请注意，我想将生成的插入`id`到多个表中。据我了解，`WITH`子句仅对单个插入有用。我认为这可能必须在 PHP 中完成。

这确实是糟糕设计的结果；没有自然键，除非您有主键句柄，否则很难获取唯一行；

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-26T01:47:35.783

> ...可用于将值插入其他表？

[您甚至可以使用数据修改 CTE](https://www.postgresql.org/docs/current/queries-with.html#QUERIES-WITH-MODIFYING)在单个 SQL 语句中执行此操作：

```
WITH ins1 AS (
   INSERT INTO tbl1(txt)
   VALUES ('foo')
   RETURNING tbl1_id
   )
INSERT INTO tbl2(tbl1_id)
SELECT * FROM ins1 
```

需要 PostgreSQL 9.1 或更高版本。

*db<>fiddle [here](https://dbfiddle.uk/?rdbms=postgres_13&fiddle=e080bb694d3664ded6f8b92865ffdbf1)* (Postgres 13)
[旧[sqlfiddle](http://www.sqlfiddle.com/#!17/4da8b/1) (Postgres 9.6)]

### 回复问题更新

您还可以在单​​个查询中插入*多个表：*

```
WITH ins1 AS (
   INSERT INTO tbl1(txt)
   VALUES ('bar')
   RETURNING tbl1_id
   )
 , ins2 AS (
   INSERT INTO tbl2(tbl1_id)
   SELECT tbl1_id FROM ins1
   )
INSERT INTO tbl3(tbl1_id)
SELECT tbl1_id FROM ins1; 
```

# oauth - 谷歌用户 ID vs.userProfileId

> ID：15627783
> 
> 赞同：0
> 
> 时间：2013-03-26T01:28:42.667
> 
> 标签：oauth, oauth-2.0, google-oauth, google-openid

以下 URL 返回的 userId 和 userProfileId 有什么区别？ [http://www.google.com/reader/api/0/user-info](http://www.google.com/reader/api/0/user-info)

（需要登录 google 才能查看来自上述 URL 的 json 结果”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:05:03.950

userId 似乎是您的谷歌阅读器帐户的 ID。
虽然 userProfileId 是您的 Google Plus 帐户的 ID

因此，您可以通过以下方式访问您的 Google 阅读器帐户中的所有项目：[http](http://www.google.com/reader/view/#stream/user/) ://www.google.com/reader/view/#stream/user/ {UID}/state/com.google/reading-list。

您的 Google Plus 帐户位于： https: [//plus.google.com/](https://plus.google.com/) {userProfileId}

# php - Windows 上的 Doctrine Cli

> ID：15627784
> 
> 赞同：15
> 
> 时间：2013-03-26T01:28:42.840
> 
> 标签：php, doctrine-orm, command-line-interface

我在 Windows 8、php 5.4 上配置教义 orm 时遇到了一些问题。我已经使用 Composer 安装了 Doctrine。

我已经按照文档进行了操作，但是当我运行任何命令时，`php vendor/bin/doctrine orm:schema-tool:create`例如，我的命令行只输出

```
SRC_DIR="`pwd`"
cd "`dirname "$0"`"
cd "../doctrine/orm/bin"
BIN_TARGET="`pwd`/doctrine"
cd "$SRC_DIR"
"$BIN_TARGET" "$@" 
```

我也尝试过 php `vendor/bin/doctrine.php`.... 但它只是打印出上面的内容。

我遵循了 Doctrine 的信函指南。有没有人见过这个，如果有，你能建议什么吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-05T08:42:59.487

我找到了解决方案

在 vendor/doctrine/orm/bin/ 中还有一个 bin 文件夹，你可以像这样使用这个

> php 供应商/学说/orm/bin/学说 orm:schema-tool:create

确保您有根文件夹，并且根文件夹中存在 cli-config.php 文件。

下面是我找到解决方案的位置

[https://groups.google.com/forum/#!msg/doctrine-user/_ph183Kh-5o/_P_coljB-dcJ](https://groups.google.com/forum/#!msg/doctrine-user/_ph183Kh-5o/_P_coljB-dcJ)

这对我来说很好。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-09-19T16:53:51.190

我有同样的问题。以下解决方案对我有用：

```
"vendor/bin/doctrine.bat" orm:schema-tool:create 
```

所以，基本上你：

*   使用 Doctrine 提供的“.bat”文件和
*   将对该“.bat”文件的调用括在引号中。

## 我的环境

Windows 7 专业版 (x64)
PHP 5.5.12
学说 ORM 2.4.4

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-04T05:20:21.887

不要写“php...”（它会写文件内容）

只需“vendor\bin\doctrine orm:schema-tool:create”就可以完成这项工作（来自项目根目录，例如 c:\php\theProject）。

接下来，您将需要项目根目录中的“cli-config.php”...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-05-06T02:15:44.960

对于 Window 版本，使用反斜杠**“\”**

`vendor\bin\doctrine orm:schema-tool:create`

不是正斜杠**“/”**

`vendor/bin/doctrine orm:schema-tool:create`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-26T05:42:33.753

您可以安装[git bash](http://msysgit.github.com/)之类的东西，也可以简单地使用脚本的 PHP 版本：

```
php vendor\bin\doctrine.php orm:info 
```

显然，`php`二进制目录应该在您的`PATH`环境变量中，否则，它类似于：

```
C:\path\to\php.exe vendor\bin\doctrine.php orm:info 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-16T04:02:40.750

我发现它没有从教义.php.bat 中返回任何内容。原来这是我的 cli-config.php 文件中的 PHP 错误

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-29T23:36:43.827

1.  复制doctrine.bat（位于vendor/bin/doctrine.bat）到你的项目根目录
2.  `bootstrap.php`在项目根目录内的任意路径中 创建一个文件，内容如下：

    ```
    use Doctrine\ORM\Tools\Setup;
    use Doctrine\ORM\EntityManager;

    $paths = array("../model");
    $isDevMode = false;
    $dbParams = array(
        'driver'   => 'pdo_mysql',
        'host' => 'localhost',
        'user'     => 'root',
        'password' => '',
        'dbname'   => 'angular_php',
    );

    $config = Setup::createAnnotationMetadataConfiguration($paths, $isDevMode);
    $entityManager = EntityManager::create($dbParams, $config); 
    ```

3.  `cli-config.php`在您的项目根目录中创建一个包含以下内容的文件：

    ```
    <?php

    use Doctrine\ORM\Tools\Console\ConsoleRunner;

    // replace with file to your own project bootstrap
    require_once 'path/to/file/bootstrap.php';

    return ConsoleRunner::createHelperSet($entityManager); 
    ```

4.  从命令行窗口（CMD）执行：

    ```
    c:\path\to\project\root\directory>doctrine --help 
    ```

5.  完成！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-08T13:35:39.910

在 Windows 上使用 Cygwin 并通过作曲家安装了学说，遇到了同样的问题

通过以下方式解决：

供应商/bin/doctrine.bat orm:convert-mapping

如果您仍然遇到问题，您可以使用 php 运行 cli 脚本来运行控制台工具：

例如

php cli-config.php orm:schema-tool:create

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-24T18:11:25.227

这个问题的所有答案要么过时，要么完全不正确。就我而言，我观察到，在安装库后，“\vendor\doctrine\orm\”文件夹完全为空。文档要求您运行 vendor/bin/doctrine，然后它会尝试调用“vendor\doctrine\orm\bin\doctrine[.php]”（php 文件扩展名是可选的）。发现这一点后，我从 git 存储库下载了库并替换了 composer 安装的版本。

```
php vendor/doctrine/orm/bin/doctrine 
```

然后工作正常。

此外，请注意 cli-config.php 文件必须存在于项目的根目录中的常见误解。将它留在您的配置文件夹中很好

# ruby-on-rails - 如何为多个模型上的嵌套资源抽象 link_tos

> ID：15627788
> 
> 赞同：1
> 
> 时间：2013-03-26T01:29:12.697
> 
> 标签：ruby-on-rails

我在 Rails 3.2 应用程序中有一个嵌套资源。

```
resources :users do
  resources :posts
end

resources locations do
  resources :posts
end

resources categories 
  resources :posts
end 
```

在用户、位置和类别显示页面上显示的共享侧边栏模块中，我有一个指向嵌套资源的链接

```
<% if controller.class == UsersController %>
  <%= link_to "Posts", user_posts_path(@user) %>
<% elsif controller.class == LocationsController %>
  <%= link_to "Posts", location_posts_path(@location) %>
<% elsif controller.class == CategoriesController %>
  <%= link_to "Posts", category_posts_path(@category) %>
<% end %> 
```

有没有聪明的方法来干燥这个？我在想类似的东西`<%= link_to "Posts", controller_name_posts_path(@current_object) %>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:21:48.393

它没有那么聪明，但我会通过在每个控制器中定义 @resource_path （实际上我可能会公开一个方法）来简化第一步，以便将视图模板简化为类似

```
<%= link_to "Posts", @resource_path %> 
```

在控制器动作中 - 类似于：

```
@resource_path = user_posts_path(@user) 
```

或类似的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:43:53.267

使用[content_for](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for)（或仅提供）也应该可以解决问题。

无需触摸控制器，即可在视图显示文件的顶部添加对**content_for的调用：**

用户/节目示例：

```
<% content_for :resource_path, user_posts_path(@user) %> 
```

在您的共享侧边栏模块中，将您的代码块更改为：

```
<%= link_to "Posts", yield :resource_path %> 
```

# jquery - mouseleave，清除间隔和停止脚本

> ID：15627790
> 
> 赞同：0
> 
> 时间：2013-03-26T01:29:46.903
> 
> 标签：jquery

我有这段代码：

```
slider.controls.next.bind('mouseenter', function() {
    setInterval(clickNextBind, 300);
}); 
```

使用 bxslider 以便如果用户将鼠标悬停在“下一步”按钮上，幻灯片会自动滚动。但是当用户离开“下一步”按钮时，我需要它停止。

我试过这个：

```
slider.controls.next.bind('mouseleave', function() {
    clearInterval();
}); 
```

但它不会停止滚动。我应该怎么做？

MTIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:31:32.680

您需要将特定的间隔 id 传递给[`clearInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)：

```
var interval = 0;
slider.controls.next.bind('mouseenter', function() {
    interval = setInterval(clickNextBind, 300);
});

slider.controls.next.bind('mouseleave', function() {
    clearInterval(interval);
}); 
```

# java - 初始化 bean 中的字段的顺序

> ID：15627792
> 
> 赞同：0
> 
> 时间：2013-03-26T01:29:52.680
> 
> 标签：java, spring, nullpointerexception, in-class-initialization

我有一个这样的豆子：

```
@Component
@DependsOn("SomeType")
Class A{

@Autowired
SomeType one;

String two = one.someMethod();

int three;

}

In my application context xml, I have:

<bean id="two" class="a.b.c.SomeType"></bean>

<context:component-scan base-package="a.b.c"/>
<context:annotation-config/> 
```

但是当 Spring 实例化 bean 时，它会抛出一个`NullPointerException`. 所以我想知道该字段`two`是否在 field 之前初始化`one`，导致 NPE。谁能告诉我在 bean 中初始化字段的顺序是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T02:05:48.613

你的类`A`声明被编译成这个：

```
class A {
    @Autowired 
    SomeType one;
    String two;
    int three;

    public A() {
        this.two = one.someMethod();
    }
} 
```

因此，当 Spring 创建一个实例`A`以将一个实例`SomeType`注入其中时，它会调用`A`的默认构造函数，因此您会得到一个`NPE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:54:40.503

首先我不得不说`String two = one.someMethod();` 这行代码非常非常糟糕。然后让我解释一下 NPE 是如何发生的。Spring 实例化 bean 时，先实例化 bean: `A`，然后尝试绑定字段`one`，此时 bean SomeType 可能没有实例化，所以 Sping 会将其标记为`await to instant`，然后继续绑定其他字段，它移动到即时`two`，然后引起问题。

# javascript - 在 Razor 视图中访问 C# 代码 @{ 堵塞

> ID：15627798
> 
> 赞同：2
> 
> 时间：2013-03-26T01:30:36.610
> 
> 标签：javascript, asp.net

如果我的术语不正确，我深表歉意。我刚刚开始了一个使用 Javascript 和 asp.net 的项目。我对两者都不是很熟悉，正在尝试实现一些简单的功能或修复错误。目前剃刀视图看起来像：

```
@{
    string rootUrl = Url.Action(MVC.Files.Files(Model.Id, null));
    Html.Telerik().ScriptRegistrar().Scripts(wa => wa.AddSharedGroup(@Url.AssetName(AssetGroups.FileBrowser))
                                                     .AddSharedGroup(@Url.AssetName(AssetGroups.SinglePageApps)))
    .OnDocumentReady(
    @<text>
        window.fileBrowser = fileBrowser('ls', 'file_breadcrumb', '@Model.Path', '@rootUrl');

         var runLink = "@Url.Action(MVC.Runs.Run(Model.Id, Model.ExperimentName.ToLegalUrl()))";

         // checking for the model
         if (@((Model.HasSettings.ToString().ToValue()) == true)) {
console.log("true");
         }
         else {
console.log("false");
}

         window.leftNav = new NavView({
            el: "#navview",
            collection: new NavItems(),
            items: [ 
```

我的页面模型有一个属性 HasSettings。基于 HasSettings，我想`items`用某些项目填充代码底部的数组。我无法弄清楚这个的语法。

我最初是从

`if ('@Model.HasSettings') {`

并且一直在尝试不同的形式，但我真的不确定检查它的语法是什么，所以我可以填充我的 items 数组。我知道如果我在这个 @ 块之外查看 Model.HasSettings，它的计算结果为 True 或 False。然后在我运行页面时在控制台中显示 True 或 False 未定义。

我的第一个问题是正确的语法是什么？

我的第二个问题是，我是否应该复制并粘贴整个块

```
window.leftNav = new NavView({
            el: "#navview",
            collection: new NavItems(),
            items: [ 
```

进入每个 if/else 语句，只有 items 数组不同。还是有更清洁的方法来做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:11:51.063

```
window.leftNav = new NavView({
  el: "#navview",
  collection: new NavItems(),
  items: [
@foreach(Setting item in Model.Settings){
    .... output items as javascript objects here
}
  ]}); 
```

# mysql - Mysql的find_in_set的derby等价物

> ID：15627800
> 
> 赞同：0
> 
> 时间：2013-03-26T01:30:44.550
> 
> 标签：mysql, database, derby

我正在寻找 Mysql 的 find_in_set 的 derby 等价物。在 mysql 中，

```
SELECT FIND_IN_SET('b','a,b,c,d'); 
```

我计划将 db 从 mysql 迁移到 derby。如何为德比实现它？由于逗号分隔的字符串被视为一个集合，因此 locate() 函数无法实现相同的效果。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:58:16.610

This might be a good use of Derby's CREATE FUNCTION feature: [http://db.apache.org/derby/docs/10.9/ref/rrefcreatefunctionstatement.html](http://db.apache.org/derby/docs/10.9/ref/rrefcreatefunctionstatement.html)

Create a custom function in Derby which implements the mysql FIND_IN_SET function.

You might try asking on the derby-user mailing list; some other user might have already written such a function.

# c++ - 用作地图值的列表的默认值

> ID：15627804
> 
> 赞同：2
> 
> 时间：2013-03-26T01:30:54.767
> 
> 标签：c++, list, map

嗨，我想知道我是否有一个以 int 作为元素和 int 列表作为值的地图，并且我尝试访问不在地图中的键。运算符返回一个默认值。但是什么是 list 的默认值？默认构造函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T01:33:46.467

是的，它会默认构建一个列表。[见这里](http://www.cplusplus.com/reference/map/map/operator%5b%5d/)。

如果这不是您想要的行为，您可以使用`std::map::at`（[参见此处](http://www.cplusplus.com/reference/map/map/at/)）而不是`std::map::operator[]`访问元素，如果键不存在，这将引发异常，而不是插入新元素。

注意：我的回答假设您`std`在问题中指的是命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:34:46.980

如果`key`不在地图中，则`operator []`插入一个新元素`key`并使用，您可以[在此处](http://www.cplusplus.com/reference/map/map/operator%5b%5d/)`default constructor`阅读更多信息

构造容器的[默认构造](http://www.cplusplus.com/reference/list/list/list/)函数。`std::list``empty`

# c# - 如何暂停“for”循环直到得到响应

> ID：15627806
> 
> 赞同：0
> 
> 时间：2013-03-26T01:31:09.830
> 
> 标签：c#, for-loop, voip

我正在使用`for`循环来拨打电话号码列表。我想从列表中取出第一个号码并拨打电话并等待响应，然后继续处理列表中的下一个号码。我曾经`AutoResetEvent`这样做过。但它不起作用。

```
for (int k = 0; k < list_Items.Count; k++) {
    Number_To_Call = "9" + list_Items[k].ToString();

    phoneCall.Start();

    waitingToPickUp.Set(); //AutoReset Event

    Thread.Sleep();

    waitingToPickUp.WaitOne();

    string detector = VoiceDetected;

    if (detector == "Machine") {
        //code
    } else if (detector == "Human") {
        //code
    } else {
        //code
    }
} 
```

从呼叫中获取响应的代码

```
void phoneCall_CallStateChanged(object sender, VoIPEventArgs<CallState> e)
        {
            if (e.Item.IsInCall())
            {
                phoneCallAudioReceiver.AttachToCall(phoneCall);
                phoneCallAudioSender.AttachToCall(phoneCall);
                manchineDetector.Start();
                waitingToPickUp.Set();

                string str = VoiceDetected;

            }
            else if (e.Item.IsCallEnded())
            {
                phoneCallAudioReceiver.Detach();
                phoneCallAudioSender.Detach();
                manchineDetector.Stop();
                phoneCall = null;

                //Number_To_Call = string.Empty;

                InvokeOnGUIThread(() =>
                {
                    Number_To_Call = string.Empty;
                });
            }
        } 
```

检测机器或人的代码

```
void manchineDetector_DetectionCompleted(object sender, VoIPEventArgs<AnswerMachineDetectionResult> e)
        {
            try
            {    
                string VoiceDetected = e.Item.ToString();    

            }
            catch (Exception ex)
            {
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:01:27.730

`Set`并且立即`WaitOne`没有意义 - 等待不需要等待任何东西并立即继续。

最有可能应该是reset-call-wait：

```
 waitingToPickUp.Reset(); 
  phoneCall.Start();
  waitingToPickUp.WaitOne(); 
```

# ruby-on-rails - 可以将“带错误的字段”附加到引发错误的输入标签的父级吗？

> ID：15627809
> 
> 赞同：5
> 
> 时间：2013-03-26T01:31:33.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, field-with-errors

所以我有一个像这样的输入元素。包装元素是关于，你知道的，一个视觉的东西。

```
<div class="input-wrap">
  <input class="blah-blah" />
</div> 
```

当`<input>`包含错误时，它将是这样的：

```
<div class="input-wrap">
  <div class="field-with-errors">
    <input class="blah-blah" />
  </div>
</div> 
```

但我想做的是：

```
<div class="input-wrap field-with-errors">
  <input class="blah-blah" />
</div> 
```

我找到了这个页面，它非常接近我的问题

[Rails 3：“field-with-errors”包装器改变了页面外观。如何避免这种情况？](https://stackoverflow.com/questions/5267998/rails-3-field-with-errors-wrapper-changes-the-page-appearance-how-to-avoid-t)

现在我知道我可以扔了

```
config.action_view.field_error_proc = Proc.new { |html_tag, instance| 
   "#{html_tag}".html_safe
} 
```

避免在`<input>`有错误的标签周围制作包装标签。但我真正想做的是，再次在`<input>`标签的直接父级上添加“字段错误”类。我可以这样做吗？ActionView 是否持有 DOM 节点的树结构？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-26T03:08:08.300

您可以将处理错误的代码放在任何您喜欢的地方，只需将其作为实例变量上的块调用，例如

```
if @instance.errors.any?
  <div class="field with errors">
  @instance.errors.full_messages.each do |msg|
    <p><%= msg %></p>
  end
end 
```

如果您经常使用它，最好将其拉出到帮助程序中并将实例变量作为参数传递。

# jquery - 在网站上保存用户偏好？

> ID：15627810
> 
> 赞同：0
> 
> 时间：2013-03-26T01:31:38.393
> 
> 标签：jquery, cookies, save

我正在建立一个 wordpress 网站，我想让读者能够更改布局和字体（有些人更喜欢使用衬线/无衬线来阅读）和文本大小。

虽然真的不喜欢要求用户注册，但这只会增加我目前正在做的事情的另一层复杂性，所以数据库的东西已经出来了。由于不同的设置是如此基本，我认为也许可以用 cookie 完成一些事情？

尽管我可以找到有关如何实际操作的宝贵信息。

所以，假设我有一个向元素添加类的函数，在页面重新加载后如何为用户保存它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:38:09.137

[您可以使用此插件http://www.kelvinluck.com/2006/05/switch-stylesheets-with-jquery/](http://www.kelvinluck.com/2006/05/switch-stylesheets-with-jquery/)切换样式表，当用户选择主题时，您可以将主题的名称存储在 cookie 中。[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)然后在页面重新加载时检索名称并加载该样式表。

这是一个使用示例`cookies`

[http://jsfiddle.net/btevfik/f7mXV/](http://jsfiddle.net/btevfik/f7mXV/)

我将两个事件处理程序绑定到两个按钮，并获取存储字体的 cookie。并将字体设置为存储的 cookie。

```
 $(document).ready(function () {

     $("#button1").click(function () {
         setFont('serif')
     });
     $("#button2").click(function () {
         setFont('sans-serif')
     });

     var font = getCookie("username");
     $("body").css("font-family", font);
 }); 
```

事件处理程序调用此函数以使用选定字体设置 cookie 并更改当前字体。

```
 function setFont(font) {
     setCookie("username", font, 365);
     $("body").css("font-family", font);
 } 
```

# java - 将应用程序从 Jboss 7.1 AS 迁移到 Jboss EAP 6

> ID：15627813
> 
> 赞同：0
> 
> 时间：2013-03-26T01:32:01.850
> 
> 标签：java, jakarta-ee, jboss, jboss7.x, jboss-eap-6

使用 Jboss 7.1 AS 开发的应用程序可以在 Jboss 6 EAP 上运行吗？我应该注意哪些事项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:24:21.203

如果您要迁移到 EAP 6.0.x，唯一可能会影响您的是日志记录的更改，这可能会导致不显示任何日志。要解决此问题，您可以设置 -Dorg.jboss.as.logging.per-deployment=false 或永久设置它[https://community.jboss.org/thread/220732](https://community.jboss.org/thread/220732)

除此之外应该没有什么大问题，但这主要取决于您的应用程序。EAP 6.0.x 基本上是 7.1.1.Final 修复了大量错误。

但是如果您要升级到 EAP 6.1.x（目前有 6.1.0.Alpha1 免费提供）可能会有一些更大的变化，但是再次从 7.1.1 升级到任何 EAP 应该像使用旧的standalone.xml 一样简单启动 EAP，它应该会自动升级所有配置。

鉴于 EAP6.1 中有许多更改和新功能，您的应用程序可能存在一些问题，但这实际上取决于您的应用程序做什么以及如何做。

# database-normalization - 确定关系是否在 BCNF 中

> ID：15627814
> 
> 赞同：0
> 
> 时间：2013-03-26T01:32:16.070
> 
> 标签：database-normalization

我在 Wikipedia 上查看 BCNF 的定义

```
A relational schema R is in Boyce–Codd normal form if and only if for every one of its dependencies X → Y,
at least one of the following conditions hold:[4] 
X → Y is a trivial functional dependency (Y ⊆ X)
X is a superkey for schema R 
```

现在如果 R={P,Q,S} 和 F={PQ->S, PS->Q, QS->P}

我认为它不在 BCNF 中，对吗？如果我错了，你能告诉我为什么吗？否则，如果我们被问到哪个 FD 违反了 BCNF，因为 FD 中的任何行列式都可能是超级密钥，我们应该给出什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:05:24.457

非正式地，如果每个 FD 的每个箭头都是候选键外的箭头，则关系属于 BCNF。在这种情况下，候选键是 PQ、PS 和 QS，因此每个箭头*都是*候选键中的一个箭头。我认为它在 BCNF 中。

# ruby - 两个字符之间的匹配

> ID：15627822
> 
> 赞同：0
> 
> 时间：2013-03-26T01:34:05.397
> 
> 标签：ruby, regex

这可能吗？

从这个字符串：

```
string = "lsdfh892pr23hr4342pr3j4r\n\nwww.foobar.com•\nyahoogooglebing" 
```

我想提取`"www.foobar.com"`.

而且，从这个：

```
string = "lsdfh892pr23hr4342pr3j4r\n\ninfo@google.com•\nyahoogooglebing" 
```

我想提取`"info@google.com"`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T01:42:14.957

我不知道 ruby​​ 语法，但是这个正则表达式应该可以工作：

```
/\n\n([^•]*)•/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:10:10.540

我不会打扰正则表达式：

```
string = "lsdfh892pr23hr4342pr3j4r\n\nwww.foobar.com•\nyahoogooglebing"
string.split("\n")[2][0..-2]
=> "www.foobar.com"

string = "lsdfh892pr23hr4342pr3j4r\n\ninfo@google.com•\nyahoogooglebing"
string.split("\n")[2][0..-2]
=> "info@google.com" 
```

# git - Gitblit“权威”ssh密钥生成失败

> ID：15627824
> 
> 赞同：1
> 
> 时间：2013-03-26T01:34:34.947
> 
> 标签：git, ssh-keys, gitblit

我已经在本地服务器上安装了[gitblit](http://gitblit.com)，但不知道为什么我不能运行“Authority”密钥生成器。

它失败了

> C:\Program Files (x86)\gitblit>authority INFO Using JCE Unlimited Strength Jurisdiction Policy files ${baseFolder} 设置为 C:\Program Files (x86)\gitblit\data 线程“AWT-EventQueue-0”java 中的异常。 lang.NullPointerException at com.gitblit.authority.GitblitAuthority.load(GitblitAuthority.java:305) at com.gitblit.authority.GitblitAuthority.initialize(GitblitAuthority.ja va:193) at com.gitblit.authority.GitblitAuthority$1.run( GitblitAuthority.java:16 3) 在 java.awt.event.event.InvocationEvent.dispatch(Unknown Source) 在 java.awt.EventQueue.dispatchEventImpl(Unknown Source) 在 java.awt.EventQueue.access$200(Unknown Source) 在 java.awt .EventQueue$3.run(Unknown Source) at java.awt.EventQueue$3.run(Unknown Source) at java.security。AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source) at java.awt.EventQueue.dispatchEvent(Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt。 EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread。运行（未知来源）EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread。 java.awt.EventDispatchThread.run（未知源）上的 pumpEvents（未知源）EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread。 java.awt.EventDispatchThread.run（未知源）上的 pumpEvents（未知源）
> 
> C:\Program 文件 (x86)\gitblit>

这是服务运行和服务停止的情况。我完全不知道如何在我的系统上生成和使用 SSH 密钥。

附带说明一下，如果/当我开始工作时，如何将它与 Windows 中的另一个 git ssh 密钥（github）并排安装，以与 Powershell 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:04:57.607

触发该异常的代码是[这样的](https://github.com/gitblit/gitblit/blob/master/src/com/gitblit/authority/GitblitAuthority.java#L300-L306)：

```
 config.load();
  // replace user certificate model with actual data
  List<UserCertificateModel> list = UserCertificateConfig.KEY.parse(config).list;   
  for (UserCertificateModel ucm : list) {   
    ucm.user = userService.getUserModel(ucm.user.username);
    map.put(ucm.user.username, ucm);
  } 
```

所以配置必须包含一些可疑的东西，它返回一个 ' `null`' `ucm.user`。

旁注：使用几种 ssh 密钥是使用 ssh 配置文件完成的，如“[如何临时更改 git ssh 用户以进行远程推送？](https://stackoverflow.com/a/15551505/6309) ”中所示。

# php - .href.replace 给我双域 (http://localhosthttp://mydomain.com)

> ID：15627830
> 
> 赞同：2
> 
> 时间：2013-03-26T01:35:05.637
> 
> 标签：php, javascript, jquery, replace

我正在处理一段代码，在该代码中，我使用 file_get_contents 通过 php 从另一台服务器获取 html。

然后一些链接需要将原始域放到它上面，以便它们链接到正确的位置，因为我的大多数链接我只是能够替换整行，因为它们是静态的，但是这个是动态的，我需要替换只是其中的一部分。

我是这样做的：

```
<script>$(document).ready(function(){
  $(".view").each(function(){
        this.href = this.href.replace("/tourney/", "http://binarybeast.com/tourney/");
    })
});</script> 
```

但是，我遇到的问题是，即使在第一个链接中没有像这样创建域，在执行此操作时我也会获得双域：

```
<a class="view" href="http://localhosthttp://binarybeast.com/tourney/load_match/169049">View Details</a> 
```

原线：

```
<a class="view" href="/tourney/load_match/169049">View Details</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:01:08.073

这是一种稍微不同的看待它的方式：

```
$(document).ready(function(){
    $(".view").each(function(){
        var parts = this.href.split('/').slice(3);

        if (parts[0] == 'tourney') {
            this.href = '/' + parts.join('/');
        }
    });
}); 
```

[http://jsfiddle.net/userdude/aAXYM/](http://jsfiddle.net/userdude/aAXYM/)

之所以可行，是因为 in 中的 url`this.href`将始终被扩展，因此您可以删除第一部分（域在 中`parts[2]`）、测试并重新组装。如果要添加`http://yoursite.com`，只需将其添加到第一部分，如`'http://yoursite.com/' +`或使用：

```
window.location.protocol + '//' + window.location.hostname + '/' + ... 
```

如果合适的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:03:38.573

该`href`属性返回完整的绝对 url。将替换正则表达式更改为`/.*?\/tourney\//`，或分配给[`host`属性](https://developer.mozilla.org/en-US/docs/DOM/HTMLAnchorElement#Properties)：

```
this.host = "binarybeast.com"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T01:37:35.353

用于`attr("href")`访问属性：

```
this.href = $(this).attr("href").replace(...) 
```

或者没有 jQuery 的[`getAttribute`](https://developer.mozilla.org/en/docs/DOM/element.getAttribute)功能。

该`href`属性将始终返回绝对路径。这是一个例子：

```
$("<a href='test'>")[0].href
//"http://stackoverflow.com/questions/15627830/href-replace-giving-me-double-domain-http-localhosthttp-mydomain-com/test"
$("<a href='test'>").attr("href")
//"test" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T01:37:45.853

尝试这个：

```
this.setAttribute("href",this.getAttribute("href").replace("/tourney/","http://.../")); 
```

这会在您编写时访问属性，而不是浏览器解析的属性。

# ruby-on-rails - 为什么在日期选择字段上呈现 3 个 jquery datepickers？

> ID：15627836
> 
> 赞同：0
> 
> 时间：2013-03-26T01:36:14.873
> 
> 标签：ruby-on-rails

在 Rails 应用程序中，我有一个 textfield/jquery datepicker，它降级为日期选择字段（日、月、年）。我正在进行重大更新，包括更新 gems 和 Rails 版本。我的 jquery 函数现在呈现三个日期选择器（每个选择字段一个）。为什么会发生这种情况？或者，Rails 内部发生了什么变化会导致这种情况？

我的代码

```
<%= simple_form_for(@model,...... do |f| %>
  <%= f.input :date, as: :date, order: [:day, :month, :year], input_html: { class: "date-selector" %>
<% end %> 
```

和咖啡脚本

```
jQuery -> 
  data = $(".date-selector").data('date')
  $(".date-selector").replaceWith(
    $("<input type='text' class='date-picker' id='prerep_date' value='" + data + "' name='prerep[date]' >").datepicker) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:01:17.630

查看浏览器中输出的 HTML 并查看检​​查以查看选择框的包含 HTML 标记，将其用作 JQuery 代码中的替换指针。

据我了解，三盒输出现在是 rails 的标准配置。

# ruby-on-rails-3 - 在 Heroku 中部署应用程序后重复资产

> ID：15627838
> 
> 赞同：0
> 
> 时间：2013-03-26T01:36:56.253
> 
> 标签：ruby-on-rails-3, heroku

我对使用 Heroku 进行 Rails 开发和部署非常陌生。

所以最近我发现一些 JavaScript 文件似乎是重复的。例如，我在一个文件（sample.js）中创建了一个 javascript 函数，然后我删除了这个文件，并将该函数放在 application.js 中。

在我的测试开发下，它运行完美。但是当我将更改提交给heroku时，我最终拥有两次相同的功能！

javascript 文件位于文件夹 /app/assets/javascripts/ 下

那么我怎样才能告诉 heroku 删除重复的文件呢？

在将我的应用程序的新版本发送到 heroku 之前，我是否错过了一些步骤？

任何帮助将不胜感激

ruby 1.9.2p290（2011-07-09 修订版 32553）[i686-linux] Rails 3.1.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:19:20.157

当您使用该`git rm`命令时，您只会从存储库中删除文件。即使您删除了实际文件，它仍然在 repo 中，并且不会被`git add -f *`命令更改（仅添加更改的文件）。

您应该能够通过运行以下命令从 heroku 中删除该文件：

```
$ git rm app/assets/javascripts/sample.js
$ git commit -m 'your commit message'
$ git push heroku master 
```

# c# - 如何在c#中存储每2个字符

> ID：15627843
> 
> 赞同：-1
> 
> 时间：2013-03-26T01:37:44.580
> 
> 标签：c#, store

有没有办法将每 2 个字符存储在一个字符串中？

例如

1+2-3-2-3+

所以它将是“1+”、“2-”、“3-”、“2-”、“3+”作为单独的字符串或数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T01:41:19.877

最简单的方法是使用循环遍历字符串，并从当前位置获取两个字符的子字符串：

```
var res = new List<string>();
for (int i = 0 ; i < str.Length ; i += 2)
    res.Add(str.Substring(i, 2)); 
```

高级解决方案可以使用 LINQ 做同样的事情，并避免显式循环：

```
var res = Enumerable
    .Range(0, str.Length/2)
    .Select(i => str.Substring(2*i, 2))
    .ToList(); 
```

第二种解决方案稍微紧凑一些，但更难理解，至少对于不熟悉 LINQ 的人来说是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:46:07.843

这对于正则表达式来说是一个很好的问题。你可以试试：

```
\d[+-] 
```

只需找到如何编译该正则表达式 ( [HINT](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx) ) 并调用一个返回所有匹配项的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T01:52:01.740

使用 for 循环，并使用[string.Substring()](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)方法提取字符，确保不会超出字符串的长度。

例如

```
string x = "1+2-3-2-3+";
const int LENGTH_OF_SPLIT = 2;
for(int i = 0; i < x.Length(); i += LENGTH_OF_SPLIT)
{
    string temp = null; // temporary storage, that will contain the characters

    // if index (i) + the length of the split is less than the
    // length of the string, then we will go out of bounds (i.e.
    // there is more characters to extract)
    if((LENGTH_OF_SPLIT + i) < x.Length())
    {
        temp = x.Substring(i, LENGTH_OF_SPLIT);
    }
    // otherwise, we'll break out of the loop
    // or just extract the rest of the string, or do something else
    else
    {
         // you can possibly just make temp equal to the rest of the characters
         // i.e.
         // temp = x.Substring(i);
         break; // break out of the loop, since we're over the length of the string
    }

    // use temp
    // e.g.
    // Print it out, or put it in a list
    // Console.WriteLine(temp);
} 
```

# vb.net - 如果两个复选框都被选中，两个余额将不会相加

> ID：15627846
> 
> 赞同：-2
> 
> 时间：2013-03-26T01:37:49.117
> 
> 标签：vb.net, winforms

我正在编写一个程序，该程序应该使用给定信息计算余额（他们选择哪个复选框（储蓄（7％），公司（5％），或两者，然后他们选择的年份（2015，2016，2017），最后他们在提示输入余额时投入的金额（这取决于他们在第一步中选择的账户类型）。除了他们选择两种账户类型（储蓄和公司）。对我来说，如果两者都被选中，它们应该是一条只添加两个总数的行，但事实并非如此。至少对我来说不是。

如果我输入 2000 美元的储蓄余额并选择 2015 年，我得到的总额是 2289.80 美元，这是正确的，然后如果我为公司账户选择 2015 年并输入 1000 美元，那么总额是 1102.50 美元。因此，如果我选择了两个帐户并输入了相同的数字，但同时选中了两个复选框，我将得到 3434.70 美元，但我应该得到 3392.30 美元！

这是我的代码，任何帮助将不胜感激！（我认为它可能实际上只是一行代码，它正在杀死我！）

```
Public Class Form1

Private Sub btnMediaEstimatedFund_Click(sender As Object, e As EventArgs) Handles btnMediaEstimatedFund.Click

    Dim interestRate, initialBalanceSavings, initialBalanceCorporate, finalBalance, year, theYear, subTotal As Double
    Dim savingsInterestRate As Double = 0
    Dim corporateInterestRate As Double = 0
    Dim savingsSubTotal As Double = 0
    Dim corporateSubTotal As Double = 0

    txtBoxEstimatedBudget.Enabled = False
    txtBoxAgenciesNeeded.Enabled = False

    If radButtonTraditional.Checked Then

        txtBoxAgenciesNeeded.Text = 3

    ElseIf radButtonEMedia.Checked Then

        txtBoxAgenciesNeeded.Text = 2

    End If

    If checkBoxSavings.Checked Then

        savingsInterestRate = 0.07

    ElseIf checkBoxCorporate.Checked Then

        corporateInterestRate = 0.05
    End If

    If checkBoxSavings.Checked = False And checkBoxCorporate.Checked = False Then

        MsgBox("Please chose an account type to proceed!", MsgBoxStyle.Critical, "Error")

    End If

    If radButton2015.Checked Then

        theYear = 2015

    ElseIf radButton2016.Checked Then

        theYear = 2016

    ElseIf radButton2017.Checked Then

        theYear = 2017

    End If

    Dim inputtedData As String

    If checkBoxSavings.Checked Then
        Do

            inputtedData = InputBox("Please enter a balance for SAVINGS account between $500.00 and $3000.00", "Initial Savings Balance", "0.00")

            If inputtedData = "" Then

                MsgBox("User chose to cancel calculation!")

                Exit Sub

            Else

                initialBalanceSavings = CType(inputtedData, Single)

                If initialBalanceSavings > 3000 Or initialBalanceSavings < 500 Then MsgBox("Please enter a balance for SAVINGS account equal to or above $500.00 and no more than $3000.00", MsgBoxStyle.Critical, "Error")

            End If

        Loop Until initialBalanceSavings >= 500 And initialBalanceSavings <= 3000

    End If

    If checkBoxCorporate.Checked Then

        Do

            inputtedData = InputBox("Please enter a balance for CORPORATE account between $500.00 and $3000.00", "Initial Corporate Balance", "0.00")

            If inputtedData = "" Then

                MsgBox("User chose to Cancel calculation!")

                Exit Sub

            Else

                initialBalanceCorporate = CType(inputtedData, Single)

                If initialBalanceCorporate > 3000 Or initialBalanceCorporate < 500 Then MsgBox("Please enter a balance for CORPORATE account equal to or above $500.00 and no more than $3000.00", MsgBoxStyle.Critical, "Error")

            End If

        Loop Until initialBalanceCorporate >= 500 And initialBalanceCorporate <= 3000

    End If

    savingsSubTotal = initialBalanceSavings
    corporateSubTotal = initialBalanceCorporate

    For year = 2013 To theYear - 1

        If savingsInterestRate > 0 Then

            savingsSubTotal = savingsSubTotal * (1 + savingsInterestRate)

        End If

        If corporateInterestRate > 0 Then

            corporateSubTotal = corporateSubTotal * (1 + corporateInterestRate)

        End If

    Next

    finalBalance = savingsSubTotal + corporateSubTotal
    txtBoxEstimatedBudget.Text = FormatCurrency(finalBalance)

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T02:03:01.587

我相信错误的逻辑出现在这段代码中：

```
finalBalance = initialBalanceSavings + initialBalanceCorporate

For year = 2013 To theYear - 1
    subTotal = finalBalance * (1 + interestRate)
    finalBalance = subTotal
Next 
```

结合这段代码：

```
If checkBoxSavings.Checked Then
    interestRate = 0.07
ElseIf checkBoxCorporate.Checked Then
    interestRate = 0.05
End If 
```

在上面，即使选中了**两个**复选框，利率也设置为 0.07，所以在你的循环中，如果有人计算 2015，你会做一些事情，比如给你一个最终的总数：`3000 * 1.07 * 1.07`，而你真的想要`(2000 * 1.07 * 1.07) + (1000 * 1.05 * 1.05)`

本质上，因为您只使用一个变量来保存利率（以及只有一个变量来保存小计），所以您的代码无法正确说明有人同时选择两个帐户的情况。我建议有两个变量来保持利率：

```
Dim savingsInterestRate as Double = 0
Dim corporateInterestRate as Double = 0 
```

和 2 个变量来保存小计：

```
Dim savingsSubTotal as Double = 0
Dim corporateSubTotal as Double = 0 
```

在你的 For 循环中做：

```
 savingsSubTotal = initialBalanceSavings
    corporateSubTotal = initialBalanceCorporate

    For year = 2013 To theYear - 1
        If savingsInterestRate > 0 Then
            savingsSubTotal = savingsSubTotal * (1 + savingsInterestRate)
        End If

        If corporateInterestRate > 0 Then
            corporateSubTotal = corporateSubTotal * (1 + corporateInterestRate)
        End If
    Next

    finalBalance = savingsSubTotal + corporateSubTotal 
```

并将您的利率支票更改为：

```
If checkBoxSavings.Checked Then
    savingsInterestRate = 0.07
End If

If checkBoxCorporate.Checked Then
    corporateInterestRate = 0.05
End If 
```

所以你可以考虑这个人的选择（使用`ElseIf`如果他们同时检查两者的方法，它将放弃公司利率，因为`checkBoxSavings.Checked`它已经是真实的，它永远不会落入`ElseIf`块中）

# javascript - jquery 画廊/旋转木马古怪

> ID：15627847
> 
> 赞同：0
> 
> 时间：2013-03-26T01:37:55.170
> 
> 标签：javascript, jquery

我有一个图像查看器，它结合了一个很棒的缩略图/大图像块......

看起来像这样：

```
<div id="gallery-large" ><img id="largeImage" src="" /></div>
<div id="gallery-scroller" >
    <ul class="holder">
    <li class="slide first"><img src="galleries/kids/01.jpg" data-large="galleries/kids/06.jpg" alt="1st image description" /></li>
    <li class="slide"><img src="galleries/kids/02.jpg" data-large="galleries/kids/07.jpg" alt="2nd image description" /></li>
    <li class="slide"><img src="galleries/kids/03.jpg" data-large="galleries/kids/08.jpg" alt="3rd image description" /></li>
    <li class="slide"><img src="galleries/kids/04.jpg" data-large="galleries/kids/09.jpg" alt="4th image description" /></li>
    <li class="slide"><img src="galleries/kids/05.jpg" data-large="galleries/kids/10.jpg" alt="5th image description" /></li>
</ul>
<div class="clear"></div>
</div>
<script>
$('.holder').delegate('img','click', function(){
$('#largeImage').attr( 'src',$(this).attr('data-large') );
});
</script> 
```

但是，当我尝试将其与旋转木马（我在这里找到的最简单的 - [http://www.flintstudio.biz/stuff/sliders/1.html](http://www.flintstudio.biz/stuff/sliders/1.html)）结合使用时

它停止工作...

代码看起来像这样

```
<div id="gallery-large" ><img id="largeImage" src="" /></div>
<div id="gallery-scroller" >
    <a class="button prev" ><img src="images/arrow_left.png"/></a>
    <a class="button next" ><img src="images/arrow_right.png"/></a>
        <ul class="holder">
            <li class="slide first"></li>
            <li class="slide"></li>
            <li class="slide"></li>
            <li class="slide"></li>
            <li class="slide"></li>
        </ul>
    <div class="clear"></div>
</div>  

<script>
$( window ).load(function(){
    var images = ['galleries/kids/01.jpg', 'galleries/kids/02.jpg', 'galleries/kids/03.jpg', 'galleries/kids/04.jpg', 'galleries/kids/05.jpg'];     

    $.preloadImages( images, init );

    function init() {
        $( '#gallery-scroller' ).imgSlider( images );
    }

$('.holder').delegate('img','click', function(){
    $('#largeImage').attr( 'src',$(this).attr('data-large') );
});
});
</script> 
```

从概念的角度来看，唯一的区别是列表是在窗口加载后填充的——我试过改变

```
.delegate('img','click', function(){ 
```

至

```
.on( 'click', 'img', finction(){ 
```

但这无济于事..

哦 - 重要的一点 - 我在 carousel.js 中更改了一行 - 所以它不是在做背景图像 css 更改，而是添加图像......

所以我改变了这个（第37行）

```
$( e ).find( '.holder > li' ).eq( i ).css( 'background', 'url('+images[i]+') no-repeat' ); 
```

至

```
$( e ).find( '.holder > li' ).eq( i ).html( '<img class="thumb" src="' + images[i] + '" />' ); 
```

我错过了什么……？？？

简单缩略图查看器的 jsfiddle... [http://jsfiddle.net/cBpvZ/](http://jsfiddle.net/cBpvZ/)

轮播版的jsfiddle... [http://jsfiddle.net/ZJzLd/](http://jsfiddle.net/ZJzLd/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:51:39.143

我认为您将事件绑定在错误的 DOM 对象上，因此应该是 LI 而不是 IMG。您可以使用 firebug 检查 HTML，并且可以看到 UL.holder 内没有 IMG 标签。试试下面的代码。

```
$('.holder').delegate('li','click', function(){
    var imgSrc = $(this).css('background-image').replace('url("','').replace('")','');
    $('#largeImage').attr( 'src',imgSrc);
}); 
```

理想情况下，我应该使用 RegExp 替换字符串，但是这样可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:07:49.820

谢谢马赫什

森林穿过树木......我看不到它，因为我已经摆弄了这么多......缺少对大数据的引用确实是问题所在。

解决方案是（由我定义）有两个数组 - 一个用于拇指，一个用于大..（我可以采取在图像名称中添加一些后缀或前缀的路径并以这种方式保持它们的相关性 - 但我选择不- 因此想要灵活地命名事物......这需要两个数组）

```
var images = ['galleries/kids/01.jpg', 'galleries/kids/02.jpg', 'galleries/kids/03.jpg', 'galleries/kids/04.jpg', 'galleries/kids/05.jpg'];
var large = ['galleries/kids/06.jpg', 'galleries/kids/07.jpg', 'galleries/kids/08.jpg', 'galleries/kids/09.jpg', 'galleries/kids/10.jpg'];

$('#gallery-scroller').append('<img src="images/loader.gif" id="gallery-loader" style="position:absolute; top:45%; left:45%;"/>');

$.preloadImages( images, init );

function init() {
$( '#gallery-loader' ).remove();
$( '#gallery-scroller' ).imgSlider( images, large );
} 
```

当然这意味着改变 carousel.js 来处理额外传递的数组 - 没有问题......

奇迹般有效。我现在可以用数据填充它，并将旋转木马放置在我需要的任何地方，并将大图像查看器放在我需要的地方......太棒了 - 感谢您的帮助。

# haskell - 在haskell中关闭惰性求值

> ID：15627849
> 
> 赞同：19
> 
> 时间：2013-03-26T01:38:12.613
> 
> 标签：haskell

是否可以在 Haskell 中关闭惰性求值？

是否有特定的库编译器标志来促进这一点？

我想用我不久前编写的旧程序尝试一些新的东西，看看我是否可以提高性能。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-26T01:55:07.667

有很多方法可以让懒惰的事情变得严格。你可以：

1.  显式插入虚假模式匹配。
2.  使用`seq`或其近亲`($!)`。
3.  使用`BangPatterns`.
4.  在您的类型上使用严格性注释。

更多信息[在这里](http://www.haskell.org/haskellwiki/Performance/Strictness)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-26T01:59:28.650

你不能关闭惰性，因为 Haskell 的 I/O 系统依赖于它。如果没有惰性求值，该程序将运行到一个繁忙的循环中，而不会输出任何内容：

```
main = forever (putStrLn "Hello!") 
```

这是因为`forever c`是一个无限程序。使用惰性求值时，程序仅在运行下一条指令所需的范围内进行计算。如果关闭惰性，每个函数都变得严格，包括`(>>)`，这基本上使`forever`函数发散：

```
forever c = let cs = c >> cs in cs 
```

但是，您可以向构造函数和模式添加严格性注释。当一个函数是严格的时，它的参数被强制作为结果评估的一部分，与是否需要参数无关。这类似于急切的评估。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-26T02:04:23.373

除了 Daniel Wagner 列出的内容之外，您可能还想看看类似的问题[Is there a Haskell compiler or preprocessor that uses strict evaluation？](https://stackoverflow.com/q/996052).

*   答案包括 DDC 编译器，它试图制作一个严格版本的 haskell，并且只显式地惰性化
*   [monad.reader 12](http://www.haskell.org/wikiupload/f/f0/TMR-Issue12.pdf)中描述的[ghc 插件](http://hackage.haskell.org/trac/ghc/wiki/Plugins)
*   “到处使用 nfdata 和 rnf” - solrize
*   和更多

主要的建议是使用分析工具并学习如何优化 Haskell，因为大多数人会认为它是一种关闭非严格评估的不同语言。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-27T02:45:41.500

Haskell 有一个变体，称为 pH（[http://csg.csail.mit.edu/projects/languages/ph.shtml](http://csg.csail.mit.edu/projects/languages/ph.shtml)），它使用热切评估，同时仍提供非严格语义。Haskell 报告谨慎地说它是一种非严格的语言。懒惰是描述和实施非严格性的明显方式。

因此，如果您的问题是“我们能否在保持非严格语义的同时使用不同的评估系统”，您可以查看 pH。如果您的问题是“是否有一个 Haskell 版本共享表面语法但默认情况下是严格的”，我认为它已被其他答案所涵盖。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-09-07T16:57:49.927

您可以在模块中启用`Strict`pragma，这将导致默认情况下所有内容都是严格的。

[https://ghc.haskell.org/trac/ghc/wiki/StrictPragma](https://ghc.haskell.org/trac/ghc/wiki/StrictPragma)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-26T06:35:42.427

简单回答是不。更复杂的答案是 Haskell 建立和评估函数的计算模型以惰性方式工作。正如您将在其他答案中读到的那样，有一些方法可以在正常之前强制评估某些功能，并且偶尔会这样做。但是有很大一部分有效的 Haskell 没有范式。这包括IO功能和大量的标准前奏。

结论：没有办法在 Haskell 中关闭惰性求值，然后有办法在 C 中关闭指针运算或在 Java 的 Ruby 中关闭 OO。我怀疑这比你要远得多，尽管这个问题会带你去。（没有`--strict`模式），但如果你真的想看看这个兔子洞有多深， Simon Peyton Jones 的“[在股票硬件上实现惰性函数式语言：无脊椎无标签 G 机器](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.53.3729)”是一次值得冒险的冒险。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-02-08T08:39:32.823

该`strict-identity`软件包具有严格的`Identity`monad 版本。

你可以在这里找到它： [https ://hackage.haskell.org/package/strict-identity](https://hackage.haskell.org/package/strict-identity)

用法如下所示：

```
foo = runStrictIdentity $! do
    x <- f a b
    y <- g x y
    return $! x + y 
```

每次使用`return`或 bind时`>>=`，都会使用 评估这两个部分`seq`，只要您的数据结构不太深，就可以合理保证严格性。这适用于数字和基本结构。

# android - Android选项菜单根本不显示

> ID：15627851
> 
> 赞同：0
> 
> 时间：2013-03-26T01:38:48.323
> 
> 标签：android, android-2.3-gingerbread

好的，这是我的 AndroidMenuActivity.java 文件。

```
package com.example.caliexpeditionapp;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.webkit.WebView;

public class AndroidMenuActivity extends Activity {
    private WebView browser;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        super.onCreateOptionsMenu(menu);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.option, menu);
        return true;
    }

    public boolean onContextItemSelected(MenuItem item)
    {
        onOptionsItemSelected(item);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        switch(item.getItemId())
        {
            case R.id.menu_refresh:
                browser = (WebView) findViewById(R.id.webkit);
                browser.reload();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }
} 
```

和我的 option.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@+id/menu_refresh"
          android:icon="@drawable/ic_menu_refresh"
          android:title="@string/refresh" />

</menu> 
```

最后是我的 manifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.caliexpeditionapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.INTERNET" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
        <activity android:name="com.example.caliexpeditionapp.MainActivity"
                  android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.example.caliexpeditionapp.AndroidMenuActivity">
        </activity>
    </application>

</manifest> 
```

加载没有问题。按下菜单按钮......什么都没有。没有错误，什么都没有。

我知道这很可能是一个重复的问题，但我不知道还要搜索什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:55:18.640

您说您的 XML 菜单文件是`options.xml`- 所以您需要更改`inflater.inflate(R.menu.option, menu);`为`binflater.inflate(R.menu.options, menu);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:47:04.480

添加`onMenuItemSelected()`.

**示例**：

```
/**
 * Hook called whenever an item in the options menu is selected.
 * @param item The menu item that was selected.
 * @return false to allow normal menu processing to proceed, true to consume it here.
 */
@Override
public boolean onMenuItemSelected (int featureId, MenuItem item) {
    final int itemId = item.getItemId();
    Toast.makeText(this, "Menu item clicked, index: " + itemId, Toast.LENGTH_SHORT).show();
    return super.onMenuItemSelected(featureId, item);
} 
```

# maven - gradle maven ssh

> ID：15627852
> 
> 赞同：3
> 
> 时间：2013-03-26T01:39:04.763
> 
> 标签：maven, gradle

我正在使用“mavenDeployer”在“uploadArchives”任务期间使用 ssh/scp，并使用 wagon ssh 实用程序。

我不想将密码编码到 build.gradle 中，而是依赖正确的 ssh 设置。具体来说，我想让用户指定他们的私钥，并将该私钥加载到他们的环境中（ssh-agent、ssh-add 等）。maven repo 有一个共享用户标识，所有真实用户都将他们的 .pub 密钥正确添加到共享用户标识的“authorized_keys”文件中。

虽然 maven/ant 似乎有一个“privateKey”属性，并且 Gradle DSL 接受它，但是当我设置它时它似乎没有任何效果：

```
 mavenDeployer {
            configuration = pr.configurations.publishJars
            String keyFile = System.properties["user.mavenKey"]
            repository(url: "scp://maven.company.com/path/to/maven") {
                    logger.info("Using SSH key: ${keyFile}")
                    authentication(userName: "maven", privateKey: keyFile)
            } 
```

如果我按照 gradle 文档中的示例输入实际密码，它确实有效，所以我知道一切正常。此外，将 privateKey 更改为 privatekey（全部小写）会导致属性错误，因此我知道该属性存在并且在某种程度上被识别。

而且我知道 ssh 密钥本身正在工作：

```
 % ssh -i ~/.ssh/mavenKey maven@maven.company.com ls /
  [ no errors, output trimmed ] 
```

但是当我运行它时，会提示我输入共享用户 ID 的密码：

```
 % gradle uploadArchives
  [... stuff ...]
  Using SSH key: /homes/klash/.ssh/mavenKey
  Password for maven@evomaven.englab.juniper.net: 
```

如您所见，它不会提示输入密钥的密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T08:55:55.830

确保您的私钥不需要密码。
您可以在不提示输入密码的情况下使用 ssh maven@evomaven.englab.juniper.net 从命令行访问远程吗？
如果不使用 ssh-copy-id 将您的公钥发送到服务器。

# javascript - 在 Apple 的 App Store 中将 HTML5 游戏制作为 iPhone/iPad 应用程序

> ID：15627858
> 
> 赞同：3
> 
> 时间：2013-03-26T01:39:33.347
> 
> 标签：javascript, iphone, ios, ipad, app-store

我们正在教如何制作 JavaScript 游戏。然后我们教如何使用 Apple 的自定义标签让 JavaScript 游戏成为一个伪应用程序，通过`meta`在主屏幕上添加一个网页使其看起来像一个应用程序。

有没有办法将 HTML5、CSS 和 JavaScript 打包成可以在 App Store 中出售的原生应用程序？我知道有像 PhoneGap 这样的工具，甚至可能 PhoneGap 就是答案，但看起来我们必须使用他们的 API 来创建应用程序。我想非常简单地让这些学生玩 JavaScript 游戏，在它们上运行命令并将它们提交给 Apple。

有没有一个很好的超级简单的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T01:43:04.007

您可以使用 PhoneGap 的 API 来访问本机功能，但您不必这样做。

它仍然不是超级简单，但是[build.phonegap.com](https://build.phonegap.com/)对一个应用程序是免费的，并且可以让您上传一个包含您的代码的 zip 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T01:58:08.130

您可以尝试编写一个简单的包装应用程序，该应用程序仅在 UIWebView 中显示您的 html。

至于发布，只有付费的 iOS 开发者会员才能向应用商店提交应用。这意味着要么您的学生必须付费，要么您为学生付费并提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T02:17:26.490

正如其他人所说， [Apache Cordova](http://cordova.apache.org/)（以前的 Phonegap）完全符合您的要求，并且不需要您使用他们的 API

请记住，Apple 不希望应用商店充满*练习*应用。他们有一个审批流程，可能需要长达 2 周的时间才能批准一个苹果。如果每个学生提交相同的应用程序或非常相似的应用程序，大多数人肯定会被拒绝。

教学目的：

*   使用可以放在网站上的纯网络方法可能会更好
*   或在没有严格应用政策的情况下将应用放入 Google Play 商店（一次性费用 25 美元）

**还有**Cydia 为越狱的 iphone 分发应用程序，但*我不会*教那个

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-07-08T09:07:00.927

```
<!DOCType HTML>
<html>
<head>
<title>Testing JavaScript</title>
</head>
<body>
<script type="text/javascript" src="write.js">
document.write("Text written using JavaScript code, done by 'el Jacko!");
</script>
</body>
</html> 
```

# vb.net - 在 VB.net 中登录尝试失败后系统锁定

> ID：15627866
> 
> 赞同：1
> 
> 时间：2013-03-26T01:40:50.943
> 
> 标签：vb.net, security, ms-access, login, block

我将此代码用于我的登录表单：

```
Private Sub btnLogin_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnLogin.Click
    Dim ErrorCount As Integer = 0

    If (ErrorCount = 3) Then
        MessageBox.Show(" The System has been Lock ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)
        Form3.Show()
    Else

        Dim con As OleDbConnection = New OleDbConnection( _
                   "Provider=Microsoft.Jet.OLEDB.4.0;Data Source= UserPass.mdb;")
        con.Open()
        Dim str As String
        str = "SELECT * FROM UserPass WHERE Username='" & txtUsername.Text & "' AND Password='" & txtPassword.Text & "'"
        Dim cmd As OleDbCommand = New OleDbCommand(str, con)
        cmd.Parameters.AddWithValue("user", txtUsername.Text)
        cmd.Parameters.AddWithValue("pass", txtPassword.Text)
        Dim sdr As OleDbDataReader = cmd.ExecuteReader()
        ' It will be case sensitive if you compare usernames here.   
        If sdr.HasRows Then
            If sdr.Read Then
                If txtPassword.Text <> sdr("Password").ToString Or txtUsername.Text <> sdr("Username").ToString Then
                    MessageBox.Show(" Incorrect Username/Password. Login Denied ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)
                    ErrorCount = ErrorCount + 1
                Else
                    MessageBox.Show(" You are now Logged In! ", " Welcome! ", MessageBoxButtons.OK, MessageBoxIcon.Asterisk)
                    frmOne.Show()
                    Me.Hide()
                End If
            End If
        Else
            MessageBox.Show(" Incorrect Username/Password. Login Denied ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)
        End If

        sdr.Close()
        con.Close()
    End If 
```

我试图做的是当用户登录系统 3 次失败时，系统将显示另一种形式，说明系统已锁定，用户需要输入系统密码才能尝试登录-再次进入。请帮忙。

我使用 ms 访问作为用户名和密码的数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:55:01.857

结合其他两个答案。您需要将声明更改为静态，以便它保持状态。`Dim ErrorCount As Integer = 0`至 `Static ErrorCount As Integer`

您还需要在用户输入无效用户名的代码路径中添加减量。

```
MessageBox.Show(" Incorrect Username/Password. Login Denied ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)
ErrorCount = ErrorCount + 1 'add this here 
```

然后移动 if 使其位于 SQL 之后，因此将其移至 after`con.close()`

```
If (ErrorCount = 3) Then
    MessageBox.Show(" The System has been Lock ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)
    Form3.Show()
Else 
```

此外，您似乎对参数化查询有些困惑。如果您使用参数化查询，那么您不需要连接您的 SQL，这应该是

```
 str = "SELECT * FROM UserPass WHERE Username=@user AND Password=@pass" 
```

在正常情况下，内部 if 也不应该为真

```
If txtPassword.Text <> sdr("Password").ToString Or txtUsername.Text <> sdr("Username").ToString Then 
     ' this code path is only evaluated if the database ignores the where clause or 
     ' the user changes the username or password textboxs whilst the database connection is proccessing and is therfore unnessacary 
     MessageBox.Show(" Incorrect Username/Password. Login Denied ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)
     ErrorCount = ErrorCount + 1
Else
     MessageBox.Show(" You are now Logged In! ", " Welcome! ", MessageBoxButtons.OK, MessageBoxIcon.Asterisk)
     frmOne.Show()
     Me.Hide()
End If 
```

最后不要将密码存储为明文。使用带有盐的[`System.Security.Cryptography`命名空间](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aspx)中的哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:51:56.667

我不完全确定我理解这个问题。但是这部分让我觉得你*在程序*中的登录尝试失败了 3 次后试图锁定*计算机的整个桌面：*

 *> 我试图做的是当用户登录系统 3 次失败时，系统将显示另一种形式，说明系统已锁定，用户需要输入系统密码才能尝试登录-再次进入。

我不确定这是个好主意。*仅仅将用户锁定在您的程序*之外而不是锁定整个计算机还不够吗？可以这样想：没有理由对本地违规行为施加全球惩罚。

但是，不管我是否认为这是一个好主意，VB.NET 完全可以做到这一点。您需要做的就是[`LockWorkStation`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376875.aspx)在您的计数器指示发生了 3 次失败的登录尝试后调用该函数。此函数作为 Win32 API 的一部分提供，因此要直接从 .NET 应用程序调用它，您需要使用 P/Invoke。这个函数有一个相对简单的签名，所以它的定义也不应该太难理解：

```
<DllImport("user32.dll", SetLastError=True)> _
Public Shared Function LockWorkStation() As Boolean
End Function 
```

这个函数的使用有一些重要的限制，即它只能被交互式桌面上运行的进程调用。不过，这对您来说不是问题，因为您正在构建一个只能在交互式桌面上运行的 GUI 应用程序，并且您知道如果有人输入了 3 次无效密码，那么他们肯定已经登录并坐在离键盘几英尺。

从代码中调用魔法相对简单，尽管函数可能会失败并且您应该处理这些错误情况（以免有人在您的应用程序中找到安全后门）：

```
If (FailedLogonAttempts < 3) Then
    ' Do whatever...
Else
    ' Lock 'em out!
    Dim success As Boolean = LockWorkstation()
    If Not success Then
        ' Uh-oh! An error occurred! You need to handle this, otherwise someone
        ' might be able to gain unauthorized access to the system.
        '
        ' For demonstration and debugging purposes, we'll throw an exception,
        ' but that's obviously not a secure long-term solution.
        Throw New Win32Exception(Marshal.GetLastWin32Error())
    End If
End If 
```

* * *

如果您只是询问如何修复现有代码，问题是您的`ErrorCode`变量永远不会超过 0。您已在`btnLogin_Click`方法顶部声明它，如下所示：

```
Dim ErrorCount As Integer = 0 
```

这是具有方法级范围的常规变量。这意味着每次方法运行并且不保留其值时，它都会重新初始化（就像您要求的那样为 0）。

如果要声明具有保留其值的方法级范围的变量，*则*需要使用[`Static`关键字](http://msdn.microsoft.com/en-us/library/z2cty7t8.aspx)声明变量，如下所示：

```
Static ErrorCount As Integer = 0 
```

测试这些东西并找出问题所在的一个好方法是在`btnLogin_Check`方法内部设置一个断点并准确查看变量的值！`ErrorCount`如果你这样做了，你会注意到，在执行通过第一行之后，每次都设置为 0。这将是您对问题所在的直接线索。然后你只需要弄清楚如何让价值坚持下去。现在您知道您使用`Static`关键字（或向上移动范围，例如使其成为 Form 类的成员，以便它与该类的对象一样长）来执行此操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T10:18:03.130

```
Imports System.Data.OleDb 
```

公共类 Form1 私人尝试 As Integer = 3

```
Private Sub cmdLogin_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdLogin.Click
    Dim cn As New OleDbConnection("Provider=Microsoft.Ace.Oledb.12.0; Data Source=" & My.Application.Info.DirectoryPath.ToString() & "\BackUp\testing.Accdb;")
    cn.Open()
    If txtpassword.Text = "" Then
        MsgBox("Please Enter Your Password !!!", MsgBoxStyle.Critical, "Attention...")
        Exit Sub
    End If

    Dim dr1 As OleDbDataReader
    Dim com1 As New OleDbCommand

    com1.CommandText = "select [UserID],[Pass] from userinfo where userid = '" & txtUserID.Text & "'"
    com1.Connection = cn
    If cn.State = ConnectionState.Closed Then cn.Open()
    dr1 = com1.ExecuteReader
    If dr1.Read Then
        If UCase(dr1("Pass")) = UCase(txtpassword.Text) Then
            MessageBox.Show("Welecome")
            Me.Close()
        Else
            MessageBox.Show("Wrong Password  [" & attempt - 1 & "]  Attempt(s) Remaing")
            attempt -= 1
            txtpassword.Focus()
            If attempt = 0 Then
                End
            End If
        End If
        Exit Sub

    Else
        MessageBox.Show("Wrong UserID  [" & attempt - 1 & "]  Attempt(s) Remaing")
        attempt -= 1
        txtpassword.Focus()
        If attempt = 0 Then
            End
        End If
    End If
    cn.Close()
End Sub

Private Sub cmdCancel_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdCancel.Click
    End
End Sub

Private Sub Form1_FormClosing(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing
    Me.Dispose()
End Sub 
```

结束类

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T01:54:48.363

你可以尝试这样的事情：

```
Dim ErrorCount As Int = 0

If (ErrorCount =3) Then
     MessageBox.Show(" The System has been Lock ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)

'Do stuff 
'Add Your Code to show new Form something like
 Me.Hide()
 Form3.Show()

Else 

Dim con As OleDbConnection = New OleDbConnection( _
           "Provider=Microsoft.Jet.OLEDB.4.0;Data Source= UserPass.mdb;")

con.Open()
Dim str As String
str = "SELECT * FROM UserPass WHERE Username='" & txtUsername.Text & "' AND Password='" & txtPassword.Text & "'"
Dim cmd As OleDbCommand = New OleDbCommand(str, con)
cmd.Parameters.AddWithValue("user", txtUsername.Text)
cmd.Parameters.AddWithValue("pass", txtPassword.Text)
Dim sdr As OleDbDataReader = cmd.ExecuteReader()
' It will be case sensitive if you compare usernames here.   
If sdr.HasRows Then
    If sdr.Read Then
        If txtPassword.Text <> sdr("Password").ToString Or txtUsername.Text <> sdr("Username").ToString Then
            MessageBox.Show(" Incorrect Username/Password. Login Denied ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)

             ErrorCount = ErrorCount + 1 

        Else
            MessageBox.Show(" You are now Logged In! ", " Welcome! ", MessageBoxButtons.OK, MessageBoxIcon.Asterisk)
            frmOne.Show()
            Me.Hide()
        End If
    End If
Else
    MessageBox.Show(" Incorrect Username/Password. Login Denied ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)
End If

    sdr.Close()
    con.Close()

End If 
```

此致*

# python - Python 子进程模块：如何将逗号分隔的输入传递给 Popen？

> ID：15627868
> 
> 赞同：0
> 
> 时间：2013-03-26T01:40:58.437
> 
> 标签：python, subprocess, popen

我有一个字符串列表和一个我想用 Popen 运行的命令。该命令将字符串作为输入参数。

如何轻松添加整个列表...

```
list=['asdf','qwer','zxcv',...] 
```

...作为逗号分隔的输入，如下所示：

```
Popen(['cmd','asdf','qwer','zxcv',...]) 
```

我将无法执行此操作，因为它不会将 list 隐式转换为 str：

```
Popen(['cmd',list]) 
```

也不是这个，因为它根本不允许字符串中的空格：

```
Popen(['cmd',' '.join(list)]) 
```

有替代方案吗？

**我不想使用 'shell=True' 选项。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:50:08.980

您可以执行以下操作以从两个（或更多）单独的列表创建**新**列表。

```
['cmd'] + list 
```

这将为您创建一个包含两者内容的新列表。正如您所提到的，语法看起来和执行完全符合您的预期，即将两个列表相加。

**注意：**我还想警告您不应该将`list`其用作变量名。因为这意味着您正在隐藏内置`list`类型。这可能会导致以后无法预料的问题。

# ravendb - NServiceBus 与 RavenDB api-keys

> ID：15627875
> 
> 赞同：0
> 
> 时间：2013-03-26T01:41:35.077
> 
> 标签：ravendb, nservicebus, nservicebus3

我正在尝试将 NServiceBus 3.3.5 设置为使用集中式 RavenDB，而不是在每个应用程序服务器上运行 RavenDB。我可以将 NServiceBus.Persistence 与 Windows 用户名/密码一起使用，并且可以正常工作。但是，如果可能的话，我想使用 APIKeys。

作品：

```
<add name="NServiceBus.Persistence"
     connectionString="Url=http://DBServerName:8080;Database=DBName;User=Domain\RavenDBTestUser;Password=**********;" /> 
```

不起作用：

```
<add name="NServiceBus.Persistence"
     connectionString="Url = http://DBServerName:8080/; ApiKey = NServiceBusClients/SecretKey; Database = DBName" /> 
```

启动服务时出现以下错误（RavenDB 返回 403）...

```
FATAL 06:32:23 Autofac.Core.DependencyResolutionException: An exception was thrown while invoking the constructor 'Void .ctor(Raven.Client.IDocumentStore)' on type 'RavenTimeoutPersistence'. ---> System.InvalidOperationException ---> System.Net.WebException: The remote server returned an error: (403) Forbidden.
   at System.Net.HttpWebRequest.GetResponse()
   at Raven.Client.Connection.HttpJsonRequest.ReadStringInternal(Func`1 getResponse) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\HttpJsonRequest.cs:line 279 
```

用户 Domain\RavenDBTestUser 和 api-key 在 RavenDB 中具有相同的访问权限。我已经经历了[这个](https://stackoverflow.com/questions/11240353/setting-ravendb-apikey-in-nservicebus-3-2-3)和[这个](https://groups.google.com/forum/#!msg/ravendb/fQape6ZFjLI/kcWBPCQqT00J)，但那些是从去年年中开始的，大约是 3.2.3 版。3.3.5 中还是一样还是我做错了什么？

PS 连接字符串是从 Raven Studio 复制粘贴的，所以没有错字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:35:19.880

NServiceBus v3.3.5 仍然使用 RavenDb v1，不幸的是我找不到太多关于在 Raven v1 中使用 APIKeys 的文档，我唯一找到的是[http://ravendb.net/docs/1.0/server/bundles/authentication](http://ravendb.net/docs/1.0/server/bundles/authentication)

上面的链接表明您需要“身份验证捆绑包”，您安装了吗？

另一方面，NServiceBus v4 使用 RavenDB v2，通过阅读[这个页面](http://ravendb.net/docs/2.0/server/authentication#oauth-authentication)，应该很容易设置它。NServiceBus v4 beta 刚刚发布，见[http://nservicebus.com/](http://nservicebus.com/)

# javascript - 如何通过 Javascript 将数据从 HTML 保存到 XML

> ID：15627880
> 
> 赞同：1
> 
> 时间：2013-03-26T01:42:20.580
> 
> 标签：javascript, html, xml

我在其他地方看到过这个问题的答案，尽管我正在阅读的教科书与我在网上看到的其他示例不同。

我想继续学习这本教科书教我的方式，因为我发现它很容易学习和遵循。

我正在尝试使用 HTML 表单来保存一个简单的名称和消息。然后我使用 Javascript 和 PHP 将其保存到 XML 文档中。

正如教科书所述，我正在服务器上使用我的所有代码（我的 Mac 上的 MAMP）。虽然，它仍然拒绝工作。我确信我所有的代码都是正确的，并且是从教科书中逐字复制的。

我已经在 IE、FF 和 Chrome 中进行了测试。如果有人有任何想法为什么它不起作用，将不胜感激！

我已将 index.htm 粘贴到 pastebin 中：http: [//pastebin.com/KsjxLjgj](http://pastebin.com/KsjxLjgj)

XML 和 PHP 在这里发布，因为它非常简单。

PHP：

```
<?php
//file_put_contents("messages.xml", "<?xml version=".$_POST['<?xml_version']);
file_put_contents("messages.xml", file_get_contents('php://input'));
?>
OK 
```

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<messages>
  <message>
   <text>
   <![CDATA[Some words that are the content of the message.]]>
   </text>
   <user>user 1</user>
   <date>10 MArch 2011</date>
  </message>
  <message>
   <text>
   <![CDATA[Some words that are the content of the message.]]>
   </text>
   <user>user 2</user>
   <date>17 July 2008</date>
  </message>
</messages> 
```

# java - 将while循环转换为for每个循环

> ID：15627883
> 
> 赞同：1
> 
> 时间：2013-03-26T01:42:28.643
> 
> 标签：java

我正在尝试将此 for 循环重写为 for each 循环。

```
 int k = 0;
  while(k < farmArray.length) {
     System.out.println(farmArray[k].getOwner());
     k++;
  } 
```

这是我尝试过的

```
int k = 0;
for(int Farm:farmArray)
{
  System.out.println(farmArray[k].getOwner());
 k += Farm;
} 
```

谁能指出我正确的方向？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T01:45:27.787

```
for (Farm farm : farmArray) {
    System.out.println(farm.getOwner());
} 
```

我觉得你想多了... :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T01:45:52.320

完全删除您的索引。

```
for(Farm farm : farmArray) {
    System.out.println(farm.getOwner());
} 
```

或者您可以跟踪您的索引

```
int k = 0;
for(Farm farm : farmArray) {
    System.out.println("Farm #" + k + " is owned by: " + farm.getOwner());
    k++;
} 
```

但是你应该为此使用 for 循环

```
for(int k = 0; k < farmArray.length; k++) {
    System.out.println("Farm #" + k + " is owned by: " + farmArray[k].getOwner());
} 
```

# perl - 从多个文件中查找公共键并将不同的值存储到数组中并计算差异

> ID：15627884
> 
> 赞同：0
> 
> 时间：2013-03-26T01:42:42.583
> 
> 标签：perl, hash

我对 Perl 很陌生，我想通过 perl 完成一项任务：

我有很多文件看起来像这样：（空格分隔，每个有 6 列和数千行；所有文件都以 *.hgt 结尾）

例子.hgt

```
ID     NAMES           Test1       Test2       Percentage       Height
1      abc100123        A            B          0.21            165
1      abc400123        A            B          0.99            162
1      abc300123        C            B          0.107           165
1      abc200123        A            E          0.31            167
1      abc500123        A            B          0.7             165
.... 
```

每个 NAMES 在每个 .hgt 文件中都是唯一的。我想找到所有 .hgt 文件中常见的名称并提取所有百分比并找到最高和最低数字之间的最大差异。

例如，如果我有 5 个 .hgt 文件并且它们都包含 NAMES = abc300123，并且相应的百分比是：0.107、0.1、0.4、0.9、0.8，那么 abc300123 的最大差异应该是 0.9 - 0.1 = 0.8

然后我想输出从我的所有文件中计算出的与该名称相关的名称和最大差异。输出的顺序按最大差异排序。每行前面都有一个整数 (0, 1, 2, 3, ...)。一个示例如下所示：

输出

```
0\. abc500123 0.1
1\. abc900123 0.3
2\. abc100123 0.7
3\. abc300123 0.8
4\. abc110123 0.9
.... 
```

我试图通读每个文件并将键 = NAMES 和值 = 百分比存储到数组中。我想对百分比数组进行排序并将最大值和最小值存储到新数组中并进行减法计算。在某种程度上，我被卡住了，无法把事情放在一起。

这是我到目前为止写的：

```
open(PIPEFROM, "ls *.hgt |") or die "no \.hgt files founded\!\n";  ## find the files that are ended with hgt
$i=0;
@filenames = "";

while($temp = <PIPEFROM>){

    $temp =~ m/\.hgt/;
    print out "$temp";
    $pre = $`; #gives file name without the dot and the hgt extension
    $filenames[$i] = $pre;
    $i++;
} 

%hash = ();
$j=0;
## read in files ended with .hgt
for ($i = 0; $i<=$filenames; $i++) {
$temp = $filenames[$i];

open(PIPETO, "cat $temp.hgt |") or die "no \.hgt files founded\!\n";

<PIPETO>;
while ($temp2 = <PIPETO> ){
    chomp $temp2;
    $temp2 = ~ s/^\s+//;
    @lst = split(/\s+/, $temp2);
    $NAMES = $lst[1];
    $Percentage = $lst[4];
    $hash{$NAMES} .= $Percentage . " ";
}
}
### manipulate the values
foreach $key (sort keys %hash){

    @values = split(/\s+/, $hash{$key});
    if ($#values == $#filenames){
    print "$j" . "\." . " " . "$key" . "\n";
    $j++;
                         ### got stuck
}
} 
```

我正在考虑将其包含在问题中，但我不知道该放在哪里：

```
my ($smallest, $largest) = (sort {$a <=> $b} @array)[0,-1]; 
```

这太令人沮丧了。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:41:28.757

基于 Joseph Myers 的回复，我做了一些更改来回答您关于如何仅获取所有文件中出现的数据、如何跳过标题行（输入文件中的第 1 行）以及对输出进行排序的问题按百分比从大到小，百分比相等时按名称排序。您运行程序的命令行条目如下：

`perl output.pl *.hgt`.

`my $file_count = @ARGV or die "invoke program as:\nperl $0 *.hgt\n";`

这会将所有 *.hgt 读入 @ARGV 数组（而不是像他的程序那样通过 cat 管道输入）。`$file_count`然后将记录读入的文件数。while循环读取包含在的文件`@ARGV`，类似于管道猫。

在第一个`for`循环中，检查是否在每个文件中都读入了名称 ( `if ($names{$name}{count} == $file_count)`)。如果是，它计算百分比之间的差异，如果不是，则从`%names`哈希中删除名称。

最后一个`for`循环使用自定义排序打印结果，`by_percent_name`.

```
#!/usr/bin/perl
use strict;
use warnings;

my $file_count = @ARGV or die "invoke program as:\nperl $0 *.hgt\n";

my %names;
while (<>) {
    next if $. == 1; # throw header out
    my ($name, $perc) = (split ' ')[1,4];
    $names{$name}{count}++;
    my $t = $names{$name}{minmax} ||= [1,0];
    $t->[0] = $perc if $perc < $t->[0];
    $t->[1] = $perc if $perc > $t->[1];
    close ARGV if eof; # reset line counter, '$.',  to 1 for next file
}

for my $name (keys %names) {
    if ($names{$name}{count} == $file_count) {
        $names{$name} = $names{$name}{minmax}[1] - $names{$name}{minmax}[0];
    }
    else {
        delete $names{$name};   
    }
}

my $i;
my $total = keys %names;
for my $name (sort by_percent_name keys %names) {
    printf "%*d. %s %.6f\n", length($total), ++$i, $name, $names{$name};
}

sub by_percent_name {
    $names{$b} <=> $names{$a}   || $a cmp $b
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:50:33.337

该程序完全按照您指定的方式执行：

```
# output.pl
# save this entire script as output.pl
# obtain output by running this command:
#
#   cat *.hgt | perl output.pl | more
# (in order to scroll the results--press "q" in order to quit)
#
#   cat *.hgt | perl output.pl > results-largest-differences-output-$$.txt
# in order to create a temporary results file
#
# BE CAREFUL because the second command overwrites whatever is in
# the output file using the ">" operator!
my %names;
my $maxcount = `ls *.hgt | wc -l`;
my %counts;
while (<>) {
my @fields = (m/(\S+)/g);
my $name = $fields[1];
my $perc = $fields[4];
next if $perc =~ m/[^.\d]/;
next unless $perc;
my $t = ($names{$name} ||= [1, 0]);
# initialize min to as high as possible and max to as low as possible
$t->[0] = $perc if $perc < $t->[0];
$t->[1] = $perc if $perc > $t->[1];
$counts{$name}++; # n.b. undef is auto-initialized to 0 before ++
}

for (keys %names) {
$names{$_} = $names{$_}->[1] - $names{$_}->[0];
}

my $n = 0;
for (sort { $names{$a} <=> $names{$b} || $a cmp $b } keys %names) {
next unless $counts{$_} == $maxcount;
$n++;
printf("%6s %20s %.2f\n", $n, $_, $names{$_});
} 
```

# opengl - 在OpenGL中获取球的位置，碰撞

> ID：15627885
> 
> 赞同：0
> 
> 时间：2013-03-26T01:42:45.727
> 
> 标签：opengl, matrix, 3d, collision-detection, transformation

假设我有一个球体和一个在 XY 中绘制的平面，我可以移动球。我想知道它是否会撞到飞机。我的想法是：

> - 获取球体位置（中心）
> 
> -比较（球体位置（Z坐标）+半径）与坐标Z = 0

如果为真，则表示 de sphere 击中了飞机。

但是如何获得球体位置？我可以使用转换矩阵吗？喜欢：

> GLfloat 矩阵[4][4];
> 
> glGetFloatv(GL_MODELVIEW_MATRIX, &matrix[0][0]);

绘制球体的代码是：

> glPushMatrix();
> 
> glTranslatef(1.0, altura_braco, 0.0);
> 
> glScalef(1.0, 1.0, 1.0);
> 
> glColor3f(0.0f, 1.0f, 1.0f);
> 
> glutSolidSphere(0.2, 100.0, 100.0);
> 
> glPopMatrix();

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T06:24:40.650

我认为您误解了 opengl 的用途。它的目的只是渲染事物。

话虽如此，它不支持碰撞检测。你必须实现自己，或者使用游戏引擎。

> 如果为真，则表示 de sphere 击中了飞机。但是如何获得球体位置？

你有球面方程和平面方程，并使用它们。如果检测到交叉点，则发生碰撞。[这个答案](https://stackoverflow.com/a/2223966/476681)解释了如何检测物体是否与球体相交。

平面方程为：

```
a*x + b*y + c*z = d 
```

球体的方程是：

```
(x-x0)^2 + (y-y0)^2 + (z-z0)^2 = r^2 
```

您可以通过求解这组方程来检查它们是否相交。

# xcode - 重命名 xcode 项目的标准方法

> ID：15627886
> 
> 赞同：6
> 
> 时间：2013-03-26T01:42:55.560
> 
> 标签：xcode

在创建项目名称（例如 Proj11）后，我想将名称更改为 Proj12。所以我用Project->Rename，然后把项目的名字改成Proj12 但是项目里面还是有几个文件夹名字Prlj11，我改了文件夹的名字后，项目就加载不出来了。那么重命名我的项目以及文件夹名称的标准方法是什么。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T03:38:31.180

单击项目文件夹（项目导航器顶部带有您的应用名称的蓝色文件夹）。拉起实用程序（右窗格），然后是文件检查器。您的项目名称在那里，将其更改为您想要的任何名称。然后它会要求保存，保留它为您选择的所有文件，然后按重命名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T01:39:27.950

我找到的最佳答案是在苹果开发者网站上。设想？您可以点击下面的链接，但本质上是：

1）单击xcode中的目标，在名称下的“识别和类型”右侧更改名称，然后按键盘上的ENTER按钮。

2) 将出现一个窗口，确认更改及其将更改的内容。一旦您确认它将进行更改。

[https://developer.apple.com/library/ios/qa/qa1625/_index.html](https://developer.apple.com/library/ios/qa/qa1625/_index.html)

或另一种更简单的方法：

左键单击名称项目并重命名。重命名后，它会询问您是否要重命名：

![在此处输入图像描述](../Images/41e0f27abf6f0e924e9750d55d400dc6.png)

![在此处输入图像描述](../Images/bc4731af6d00ffa7d5ea87b8e74ad442.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T03:28:35.933

您在 XCode 导航器中看到的文件夹不是实际的文件夹/目录，这些是虚拟文件夹，仅用于对您的文件进行分组。

而您在Finder中看到的文件夹，您为项目手动设置的路径，您需要手动重命名它们。

# c# - 使用文本框过滤列表框项目

> ID：15627887
> 
> 赞同：3
> 
> 时间：2013-03-26T01:42:56.713
> 
> 标签：c#, wpf

我有一个`ListBox`with some`Items`和一个`TextBox`. in 中的文本应与in &`TextBox`的起始字符匹配，应显示过滤结果。这个怎么做？谢谢。`Items``ListBox`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:32:11.530

我喜欢乔什的这个例子......

[http://joshsmithonwpf.wordpress.com/2007/06/12/searching-for-items-in-a-listbox/#](http://joshsmithonwpf.wordpress.com/2007/06/12/searching-for-items-in-a-listbox/#)

它与另一个链接的方法类似——但这个链接非常棒——在使用 WPF 时要牢记剪切优雅（以及如何以非常简单的方式完成工作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:16:18.587

谢谢大家，但我做了一些更简单的事情..希望有帮助..

声明一个列表：

```
 List<string> list = new List<string>(); 
```

在主窗口中：

```
 public MainWindow() {
        list.Clear();

        foreach (String str in lb1.Items)
        {
            list.Add(str);
        }
     } 
```

在 textchanged 事件中：

```
 public void t1_TextChanged(object sender, TextChangedEventArgs e)
{
        if (String.IsNullOrEmpty(t1.Text.Trim()) == false)
        {
            lb1.Items.Clear();
            foreach (string str in list)
            {
                if (str.StartsWith(t1.Text.Trim()))

                {
                    lb1.Items.Add(str);
                }
            } 
        }

        else if(t1.Text.Trim() == "")
        {
            lb1.Items.Clear();

            foreach (string str in list)
                {
                    lb1.Items.Add(str);
                }
            }                         
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T06:01:16.383

这取决于您的实施。您是否遵循 MVVM 模式？

如果是，那么您可以根据文本框的 set 事件过滤列表框。在设置器中，您可以更改列表框的内容。

```
<TextBox Text="{Binding SearchText}" />
private string _searchText;
public string SearchText
{
    get { return _searchText; }
    set
    {
        _searchText = value;
        // Change contents of list box.
    }
} 
```

如果你没有关注 MVVM，那么你需要在文本框上添加一个更改事件处理程序。选择 TextBox 并在属性窗口中检查其事件。其中有 TextChanged 事件。添加该事件。每当更改文本框文本时，这将为您提供一个功能。在该函数中，您可以实现过滤列表框的逻辑。

# objective-c - Objective-C 现有实例变量必须是 __unsafe_unretained 错误

> ID：15627889
> 
> 赞同：4
> 
> 时间：2013-03-26T01:43:01.107
> 
> 标签：objective-c, cocoa

相同的代码已经在这里受到质疑，但我处理了一个我自己无法解决的不同问题，可能是因为我是 Objective-C 的新手，所以我决定提出这个问题:)

webberAppDelegate.h：

```
#import <Cocoa/Cocoa.h>
#import <WebKit/WebKit.h>

@interface webberAppDelegate : NSObject <NSApplicationDelegate> {
    NSWindow *window;
    WebView *webber;
}

@property (assign) IBOutlet NSWindow *window;
@property (assign) IBOutlet WebView *webber;

@end 
```

webberAppDelegate.m：

```
#import "webberAppDelegate.h"

@implementation webberAppDelegate

@synthesize window;
@synthesize webber;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    NSString *urlString = @"http://www.apple.com";
    // Insert code here to initialize your application
    [[webber mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]]];
}

@end 
```

所以，在 webberAppDelegate.m 中，我想这是我对这个分数的问题：

```
 @synthesize window;
  @synthesize webber; 
```

谁给了我这么长的错误：

```
Existing instance variable 'window' for property 'window' with  assign attribute must be __unsafe_unretained 
```

对于其他 var "webber" 几乎相同：

```
Existing instance variable 'webber' for property 'webber' with  assign attribute must be __unsafe_unretained 
```

感谢您的帮助，我真的很感谢 Stackoverflow 社区！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T04:36:30.243

ARC 中实例变量的默认所有权资格是`strong`，并且像@robMayoff 提到的 assign 一样，`unsafe_unretained`因此您的代码如下所示：

```
@interface webberAppDelegate : NSObject <NSApplicationDelegate> {
   __strong NSWindow *window;
   __strong WebView *webber;
}

@property (unsafe_unretained) IBOutlet NSWindow *window;
@property (unsafe_unretained) IBOutlet WebView *webber; 
```

正如@Firoze 提供的链接答案中所述，财产声明和iVar 应具有匹配的所有权资格。所以解决方案是`__strong`在上面的代码中制作`__unsafe_unretained`或完全删除实例变量声明，以便编译器处理它。

*评论中的链接答案中提供了相同的解决方案。只是添加一些信息。*

# java - Collections.sort() 的正确转换是什么？

> ID：15627890
> 
> 赞同：2
> 
> 时间：2013-03-26T01:43:01.780
> 
> 标签：java

我有一个我希望排序的对象列表，但前提是列表的泛型类型符合`java.util.Comparable`. 我不确定正确的演员阵容是什么：

```
private <T extends Widget> void doAction(Class<T> clazz, List<T> list) {
    if (Comparable.class.isAssignableFrom(clazz)) {
        Collections.sort(list);
    }
    // Do more.
} 
```

`Collections.sort`需要类型参数来实现`java.util.Comparable`，所以我尝试了以下都不起作用：

```
Collections.sort((List<? extends Comparable<T>>)list);
Collections.sort((List<? extends Comparable>)list);
Collections.sort((List<? extends Comparable<? super T>>)list);
Collections.sort((List<T extends Comparable<? super T>>)list); 
```

还有其他的，我真的只是在猜测。我以为第一个会奏效。

任何帮助表示赞赏。

**更新**：为了说明这不起作用，编译器会引发以下错误：

```
com/mycompany/test/WidgetTest.java:[112,20] no suitable method found for sort(java.util.List<T>)
    method java.util.Collections.<T>sort(java.util.List<T>,java.util.Comparator<? super T>) is not applicable
      (cannot instantiate from arguments because actual and formal argument lists differ in length)
    method java.util.Collections.<T>sort(java.util.List<T>) is not applicable
      (inferred type does not conform to declared bound(s)
        inferred: T
        bound(s): java.lang.Comparable<? super T>) 
```

请注意，这`Widget`不符合`Comparable`，这是预期的，但`Widget`可能符合的子类是我要测试的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:26:35.470

尝试

```
private <T extends Widget> void doAction(Class<T> clazz, List<T> list) {
    if (Comparable.class.isAssignableFrom(clazz)) {
        Collections.sort((List)list);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:56:25.850

由于 T 被声明为 extends Widget，因此您不能将 List 转换为 List，因为它根本不兼容。

我相信你可以做一个非常丑陋的演员，`(List<Comparable>)(List)list`但它看起来太可怕了。

我建议您制作一个 dummy `Comparator`，它将输入对象转换为 Comparable 并直接进行比较。这样你就可以简单地做 `Collections.sort(list, new PassThroughComparator());`

# regex - Perl Regex 获取 URL 的根域

> ID：15627892
> 
> 赞同：4
> 
> 时间：2013-03-26T01:43:13.663
> 
> 标签：regex, perl

我怎么能得到网址的一部分？

例如：

```
http://www.facebook.com/xxxxxxxxxxx
http://www.stackoverflow.com/yyyyyyyyyyyyyyyy 
```

我只需要这一部分：

```
facebook.com
stackoverflow.com 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T02:37:40.400

```
use feature qw( say state );

use Domain::PublicSuffix qw( );
use URI                  qw( );

# Returns "domain.tld" for "subdomain.domain.tld". 
# Handles multi-level TLDs such as ".co.uk".
sub root_domain {
   my ($domain) = @_;
   state $parser = Domain::PublicSuffix->new();
   return $parser->get_root_domain($domain);
}

# Accepts urls as strings and as URI objects.
sub url_root_domain {
   my ($abs_url) = @_;
   my $domain = URI->new($abs_url)->host();
   return root_domain($domain);
}

say url_root_domain('http://www.facebook.com/');       # facebook.com
say url_root_domain('https://www.facebook.com/');      # facebook.com
say url_root_domain('http://mobile.google.com/');      # google.com
say url_root_domain('http://www.theregister.co.uk/');  # theregister.co.uk
say url_root_domain('http://www.com/');                # www.com 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T17:55:56.470

这可能会有所帮助...

`^https?:\/\/www\.([\da-zA-Z\.-]+)`

**样本输入：**

```
http://www.banglanews24.com/detailsnews.php
nssl=763daee77dc90b1c1baf0a361be2ff3c&nttl=20130416072403189462

http://www.prothom-alo.com/detail/date/2013-04-20/news/3463

http://www.facebook.com/xxxxxxxxxxx

http://www.stackoverflow.com/yyyyyyyyyyyyyyy 
```

**样本输出：**

```
banglanews24.com

prothom-alo.com

facebook.com

stackoverflow.com 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T15:19:20.760

我喜欢 URI 的答案。OP 请求了一个正则表达式，所以为了尊重这个请求并作为一个挑战，这是我想出的答案。公平地说，有时安装 CPAN 模块并不容易或不可行。我曾参与过一些使用非常特定版本的 Perl 强化的项目，并且只允许使用某些模块。

这是我对正则表达式答案的尝试。请注意，这`www.`是可选的。像这样的子域`mobile.`很荣幸。搜索`/`不是贪婪的，因此最终会正确解析带有目录的 URL。我不依赖于协议；它可以是`http, https, file, sftp`任何东西。输出被捕获在`$1`.

```
^.*://(?:[wW]{3}\.)?([^:/]*).*$ 
```

样本输入：

```
http://WWW.facebook.com:80/
http://facebook.com/xxxxxxxxxxx/aaaaa
http://www.stackoverflow.com/yyyyyyyyyyyyyyyy/aaaaaaa
https://mobile.yahoo.com/yyyyyyyyyyyyyyyy/aaaaaaa
http://www.theregister.co.uk/ 
```

样本输出：

```
facebook.com
facebook.com
stackoverflow.com
mobile.yahoo.com
theregister.co.uk 
```

**编辑：**感谢@ikegami 的额外挑战。:) 现在它支持`WWW`任何混合大小写和端口号，如`:80`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T05:47:36.910

```
$a="http://www.stackoverflow.com/yyyyyyyyyyyyyyyy";
if($a=~/\/\/\w+\.(.*)\// )
{   print $1; }
else
{ print "false";  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T02:08:30.607

我找到了一个方法：

```
my @urls = qw( http://www.facebook.com http://www.sadas.com/ );
for my $url (@urls) {
   $url =~ s/^https?:(?:www\.)?//ig;
   $url =~ s{/.*}{};
   print "$url\n";
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-26T01:54:16.820

只是一些简单的正则表达式的东西。

```
$facebook = "www.facebook.com/xxxxxxxxxxx";

$facebook =~ s/www\.(.*\.com).*/$1/; # get what is between www. and .com

print $facebook; 
```

**退货**

```
facebook.com 
```

您可能还想让这项工作适用于`.net`,`.org`等。例如：

```
s/www\.(.*\.(?:net|org|com)).*/$1/; 
```

# c++ - c++函数while循环

> ID：15627893
> 
> 赞同：0
> 
> 时间：2013-03-26T01:43:24.327
> 
> 标签：c++, function, while-loop

当我输入员工人数的小数时，它会无限次输出“请输入至少 1 的值”。但是小数点不应该被截断吗？我该如何解决这个问题，以便删除小数点。这也发生在 daysMissed 的输入中。

```
#include <iomanip> 
#include <iostream>

using namespace std;

int getNumEmployees();
int getDaysMissed(int);
double getAverageDays(int,int);

int main()
{
int numEmployees;
int daysMissed;
double average;

    //Get the number of employees
numEmployees = getNumEmployees();

//Get the number of days missed
daysMissed = getDaysMissed(numEmployees);

//Get the average days missed
average = getAverageDays(numEmployees, daysMissed);

cout << "The average number of days missed is: " << average << endl;

system("pause");
return 0;
}

int getNumEmployees()
{
    int employeeNum;

    cout << "Enter the number of company employees: ";
    cin >> employeeNum;

    while(employeeNum < 1)
        {
            cout << "Please enter a value of atleast 1 " << endl;
            cin >> employeeNum;
        }

    return employeeNum;
}

int getDaysMissed(int employeeNum)
{
int totalDays = 0;
int employee;

for(int count = 1; count <= employeeNum; count++)
{
    cout << "Enter the number of days employee " << count << " missed: ";
    cin >> employee;
    while(employee < 0)
        {
        cout << "Enter a positive number for days missed " <<     endl;
            cin >> employee;
        }

    totalDays += employee;
}
return totalDays;
 }

double getAverageDays(int employeeNum, int totalDays)
{
double averageDays;

averageDays = totalDays / employeeNum;

return averageDays;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:08:54.347

```
int employeeNum;
cin >> employeeNum; 
```

此代码尝试解析`int`from `std::cin`。首先，您实际上并没有在之后检查流状态 - 您假设`employeeNum < 1`充分传达了失败，但这通常不是最好的方法：输入流上可能存在 EOF 或错误条件。对于前者，您的程序可能需要终止，对于后者，您可能希望忽略该输入行的其余部分并在重试之前清除错误条件：

```
#include <limits>

if (std::cin >> employeeNum)
    break; // no need to retry input...
else if (std::cin.eof())
    throw std::runtime_error("EOF on input");
else
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n').clear(); 
```

> 但是小数点不应该被截断吗？我该如何解决这个问题，以便删除小数点。

如果你想输入一个实数然后使用它的“截断”值，你需要输入一个`double`或`float`然后将它转换成一个`int`代码。假设您不需要范围检查...

```
double x;
if (std::cin >> x)
{
    int x_int = x;
    ...use x_int...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T01:49:54.340

每次不成功`cin`的操作后，您需要使用：

```
cin.clear(); 
```

重置失败标志。
然后使用：

```
cin.ignore(); 
```

忽略刚刚导致错误的字符串，这样您就不会尝试再次解析它。

您应该执行以下操作：

```
int employeeNum = 0;
cout << "Enter the number of company employees: ";

while (!(cin >> employeeNum) || employeeNum < 1)
{
    if(cin.fail()) 
    {
        cout << endl << "Please enter a valid value: ";
        cin.clear ();   // reset the "failure" flag
    } 
    else if(employeeNum < 1) 
    {
        cout << "Please enter a value of at least 1: ";
    }
    // ignore the bad charactors
    // needed here incase '0.XX was entered
    cin.ignore(10000, '\n');
} 
```

如果您输入的值是小数，那么小数将被截断，而不是四舍五入。

默认`ignore`只跳过 1 个字符，但如果您希望得到一个长的无效字符串（如小十进制：0.23），您应该将其更改`ignore`为：

```
cin.ignore(10000, '\n') 
```

这将跳过最多 10000 个字符或直到下一个换行符。

# css - 他们是一种在css中向下滑动div的方法吗

> ID：15627895
> 
> 赞同：1
> 
> 时间：2013-03-26T01:43:40.663
> 
> 标签：css, html, hover, slide

我正在尝试获取它，因此当您将鼠标悬停在 a`<div>`上时，它会向下滑动 5px，我希望它是用 css 制作的。（如果可能的话）

`<div>`我试图移动的名字是“tothetop” 。

提前感谢所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:46:35.083

**CSS3 过渡**会很好地完成这项工作！

`**[LIVE DEMO](http://jsbin.com/oyujoy/1/edit)**`

HTML：

```
<div class="box"></div>
<div class="box"></div>
<div class="box"></div> 
```

CSS：

```
.box{
  width:160px;
  height:80px;
  background:#f46;
  float:left;
  margin:5px;
  border-radius:10px;
  -webkit-transition: 0.4s; // you can use also 400ms if you want
          transition: 0.4s;
}
.box:hover{
  margin-top:10px;
} 
```

* * *

**如果你想回退到 jQuery：**

`**[jQuery LIVE DEMO](http://jsbin.com/oyujoy/2/edit)**`

```
$('.box').on('mouseenter mouseleave', function( evt ){
  var pos = evt.type=='mouseenter' ? 10 : 5 ;
  $(this).stop().animate({marginTop : pos}, 500); 
}); 
```

^(（始终确保为您在 CSS 中为您的元素定义的 CSS 属性设置动画（在此示例中为`margin`））)

[http://api.jquery.com/on/](http://api.jquery.com/on/)
[http://api.jquery.com/stop/](http://api.jquery.com/stop/)
[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:45:00.250

使用 jquery 并在对象上调用 slidedown。

此处显示的示例：http: [//api.jquery.com/slideDown/](http://api.jquery.com/slideDown/)

或者如果您只是想移动东西而不是显示/隐藏，请使用 jquery animate

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T01:52:18.873

尝试这个：

HTML：

```
<div id="tothetop">
    this move down 5px
</div> 
```

CSS：

```
#tothetop {position:relative}
#tothetop:hover {top:5px} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T01:52:23.723

```
<style>
  div:hover {
  margin-top:15;
  }
</style> 
```

这个简单的代码会将 div 向下滑动 15 个像素，你明白了

# mysql - Codeigniter：根据给定条件从查询结果中获取行号

> ID：15627897
> 
> 赞同：0
> 
> 时间：2013-03-26T01:44:19.357
> 
> 标签：mysql, codeigniter

我有一个 mysql 表 - mytable，如下所示：

```
name | sales
Mark | 4
Steve | 2
Rick | 5
David | 1 
```

根据完成的销售数量获取结果时，例如：

```
$this->db->select('name,sales');
$this->db->where('sales >=', '2');
$this->db->order_by("sales", "desc"); 
$query = $this->db->get('mytable'); 
```

并放入一个带有等级的表格，它看起来像：

```
Rank | Name | Sales
1 | Rick | 5
2 | Mark | 4
3 | Steve | 2 
```

但是，我不想把它放在桌子上。相反，我想根据查询条件知道一个人的排名。例如，给定名称 Mark，我应该直接将他的行号（排名）设为“2”。使用 codeigniter 活动记录实现此目的的 mysql 查询是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:09:35.310

你想要完成的事情，是无法以这种方式解决的。这意味着 MySQL在使用任何东西*之前就*知道您认为的等级/职位。

唯一可行的方法是迭代您的结果，只打印您不想打印的内容。

```
$name = "Mark";
$rank = 0;
$this->db->select('name,sales');
$this->db->where('sales >=', '2');
$this->db->order_by("sales", "desc"); 
$query = $this->db->get('mytable');

foreach($query->result() as $row)
{
    $rank++;
    if( $row->name == $name )
    {
        echo $row->name . ' has rank ' . $rank;
        break; // No more iterating
    } 
} 
```

您应该考虑进行一些表更改 - 例如向表中添加自动递增的 ID 以识别行而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:04:57.313

```
$query='SELECT name,sales
FROM mytable
WHERE sales>=?
ORDER BY sales desc';
$params=array();
$params[]=2;
$result=$this->db->query($query,$params);
$result=$result->result_array();

print_r($result[2]); 
```

尽管您可能应该只使用限制来仅获得所需的结果：

```
$query='SELECT name,sales
FROM mytable
WHERE sales>=?
ORDER BY sales desc
LIMIT 1,1'; //offset 1, show 1 result
$params=array();
$params[]=2;
$result=$this->db->query($query,$params);
$result=$result->row_array();

print_r($result); 
```

# sql - SQL - 在计算中设置最小值或最大值

> ID：15627898
> 
> 赞同：1
> 
> 时间：2013-03-26T01:44:26.080
> 
> 标签：sql, select

我的数据库*项目*包含它们的规格（id、名称、长度、高度、重量、数量等）。

我想要

```
SELECT id, name, length*3 + height*5 as 'newVar' 
FROM items 
ORDER BY newVar DESC 
```

但是，为了让我的公式在计算中起作用`newVar`，如果“长度”小于 10，我希望它在计算中反映为 10。“高度”也是如此：如果它大于 10，我需要在计算中将其反映为 10。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T01:49:17.473

您可以通过几个`CASE`条件来完成它，它们分别返回`10`if`length`或`height`are`< 10`或`> 10`。

```
SELECT
  id,
  name,
  ((CASE WHEN length < 10 THEN 10 ELSE length END) * 3 + 
  (CASE WHEN height > 10 THEN 10 ELSE height END) * 5)  AS newVar
FROM items
ORDER BY newVar DESC 
```

[http://sqlfiddle.com/#!2/2bfb1/2](http://sqlfiddle.com/#!2/2bfb1/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:53:02.330

一种选择是使用`IF`（取决于您的 RDBMS）：

```
SELECT id, 
    name, 
    if(length<10,10,length)*3 + if(height>10,10,height)*5 as 'newVar' 
FROM items 
ORDER BY newVar DESC 
```

或者您可以使用`CASE`：

```
SELECT id, 
    name, 
    case when length<10 then 10 else length end * 3 + 
    case when height>10 then 10 else height end * 5 as 'newVar' 
FROM items 
ORDER BY newVar DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:39:35.500

可以更简单：

```
SELECT id, name, GREATEST(length, 10) * 3 + LEAST(height, 10) * 5 AS newVar
FROM   items
ORDER  BY newVar DESC 
```

`GREATEST`并且`LEAST`不在 SQL 标准中，但大多数 RDBMS 都有它们。

# java - 无限循环代码

> ID：15627899
> 
> 赞同：0
> 
> 时间：2013-03-26T01:44:37.513
> 
> 标签：java

我正在尝试编写一个 Integrate 类，它将使用梯形规则为我提供函数的积分。出于某种原因，我从未解析为值的代码并停留在“sum + =”步骤中：

```
public static double Trap(int exponent, int a, int b, int n) {
    double h = (double) (b-a)/n;

    double sum = 0;
    for(int i = a; i <= b; i+=h)
        sum += (Math.pow(i, exponent) + Math.pow(i+1, exponent))/2; //trouble!

    return h * sum;
}

public static void main(String[] args) {
    System.out.println(Trap(3,1,3,10)); //integral of x^3 from 1 to 3, 
    divided into 10 parts
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T01:49:05.590

您将 i 声明为 int，因此当您向其添加双精度 (1/3) 时，它会向下舍入并保持相同的值。

将 i 更改为 double。

事实上，你应该把所有东西都翻倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:52:37.323

您的代码在类型转换方面存在问题，特别是在循环增量表达式 i+=h 上。

在您的情况下，如果 h 是值为 0.2 的双精度数，并且 i 是整数，则 0.2 将被强制转换为 0。

为了说明这一点，请尝试运行以下代码示例：

```
public static void main(String[] args) {

    int i = 1;
    i += 0.2;

    System.out.println(i); // will always output 1
} 
```

# .net - .net 中 IPictureDisp 的 Image.FromHBitmap 到位图在计划任务下失败

> ID：15627904
> 
> 赞同：0
> 
> 时间：2013-03-26T01:45:17.303
> 
> 标签：.net, com-interop

我正在控制台应用程序中将 IPictureDisp 转换为位图。当我直接在服务器上运行它时它工作得很好，但是当我从计划任务运行它时它会失败，错误参数无效

```
Dim ipd As IPictureDisp = doc.GetPreviewBitmap(ReturnValue)
If ReturnValue = 0 Then
   Dim bm = Bitmap.FromHbitmap(ipd.Handle, ipd.hPal)
End If 
```

我怀疑它与[这个问题](http://forums.asp.net/t/1718460.aspx)有关，但我不确定如何解决它。计划任务以我的身份运行，并选中了最高权限框。

# python - Python：我正在尝试重命名（砍掉）单个目录中文件名的最后 15 个字符

> ID：15627908
> 
> 赞同：0
> 
> 时间：2013-03-26T01:45:33.387
> 
> 标签：python

Python：我正在尝试重命名（切掉）单个文件夹中所有文件的最后 15 个字符，而不切掉“mychoppingfile.py”。此外，程序只能为每个文件运行一次（我猜这将通过在处理后将输出文件移动到新目录来处理？）。这就是我所拥有的：

```
#!/usr/bin/python

import os
files = os.listdir('.')
for filename in files:
    os.rename(filename, filename[:-15]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:56:33.323

一种方法是使用字典：

```
import os
files = os.listdir('.')
seen = dict()
for filename in files:
  if len(filename) > 15 and filename != 'mychoppingfile.py':
    tofile = filename[:-15]
    if tofile not in seen:
      print filename + " -> " + filename[:-15]
      seen[tofile] = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:58:06.190

```
exclude = ['mychoppingfile.py'] # could add more exclusions to this list
for filename in files:  # see notes below
    if not filename in exclude:
        os.rename(filename, filename[:-15]) 
```

但是也有很多问题：

*   应该`os.walk`用来获取文件
*   需要处理文件名少于 16 个字符的情况
*   需要处理文件名截断导致冲突的情况（与现有文件名或此过程中的另一个冲突）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T01:54:14.180

您忘记指定您面临的问题。

无论如何，请注意，如果您的文件名少于 16 个字符，那么您将尝试将它们重命名为空字符串，这当然是错误的。也许这就是问题所在。

其他不好的事情是您可能还要重命名脚本本身。

# java - 在 Swing 中刷新 BufferedImage 像素的惯用方法

> ID：15627912
> 
> 赞同：2
> 
> 时间：2013-03-26T01:45:55.350
> 
> 标签：java, multithreading, swing, pixel, event-dispatch-thread

我有一个 Swing UI，其中一部分由`BufferedImage`我需要定期修改像素的部分组成。

创建一个并通过传递它`JLabel`来调用该`setIcon`方法似乎很常见：`JLabel`

```
new ImageIcon(bufferedImage) 
```

例如，这是 20K+ 代表的用户在此处接受的答案中在屏幕上显示 BufferedImage 的方式：

[将 bufferedImage 设置为单个彩色像素而不将图像放入其中的简单方法？](https://stackoverflow.com/questions/11501761/)

所以我也在做同样的事情：一个 JLabel ，它的 Icon 设置为 ImageIcon ，其中包含 BufferedImage ，我的问题与多线程和 Swing 重绘有关：我应该如何修改内部的像素`BufferedImage`以保证更改出现在用户面前？

我认为，如果我`BufferedImage`从一个不是 EDT 线程的线程修改，并且如果没有使用同步/锁定/内存屏障，那么没有任何东西可以保证更改将是可见的。

我可以直接在 EDT 上直接修改像素吗？

一旦我修改了像素，我应该调用`JPanel`'`repaint`方法吗？

这能保证我的更改始终可见吗？（这里的“可见”字面意思是“可见”，如在屏幕上可见和“对 EDT 可见”）。

我宁愿保持简单，也不想使用非 Swing API 或 3D API 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:30:41.823

> Can I simply modify the pixels directly on the EDT?

No. Several alternatives are mentioned [here](https://sites.google.com/site/drjohnbmatthews/threadwatch), but the main example treats the offscreen buffer as a model that evolves over time in a separate thread. A `javax.swing.Timer` periodically notifies the listening view that an update is available, synchronizing access to the shared data. Because *any* pixel in the model may change, the entire view is redrawn at each tick.

If the updated pixels are geometrically localized, you can try a variation of `drawImage()` that updates just a portion of the screen; but try to avoid inadvertent scaling.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T02:41:39.247

如果我正确理解了这个问题，则此示例采用 a`BufferedImage`并将该图像中的所有像素替换为红色像素。

这是通过使用`SwingWorker`. 基本上，这会复制原始图像并遍历像素数据，更新每个像素。然后，它通过复制该图像与 UI 重新同步该图像。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.util.List;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class PixelMe {

    public static void main(String[] args) {
        new PixelMe();
    }

    public PixelMe() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public BufferedImage createImage() {

        BufferedImage image = new BufferedImage(100, 100, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g = image.createGraphics();
        g.setColor(Color.WHITE);
        g.fillRect(0, 0, 100, 100);
        g.dispose();

        return image;

    }

    public class TestPane extends JPanel {

        private JLabel label;
        private BufferedImage master;

        public TestPane() {
            setLayout(new BorderLayout());
            label = new JLabel(new ImageIcon(createImage()));
            add(label);

            JButton update = new JButton("Update");
            add(update, BorderLayout.SOUTH);
            update.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    BufferedImage image = (BufferedImage) ((ImageIcon)label.getIcon()).getImage();
                    new UpdateWorker(image, label).execute();
                }

            });
        }

    }

    public class UpdateWorker extends SwingWorker<BufferedImage, BufferedImage> {

        private BufferedImage copy;
        private JLabel target;

        public UpdateWorker(BufferedImage master, JLabel target) {
            this.target = target;
            copy = makeCopy(master);
        }

        public BufferedImage makeCopy(BufferedImage master) {
            BufferedImage image = new BufferedImage(master.getWidth(), master.getHeight(), master.getType());
            Graphics2D g = image.createGraphics();
            g.drawImage(master, 0, 0, null);
            g.dispose();
            return image;
        }

        @Override
        protected void process(List<BufferedImage> chunks) {
            target.setIcon(new ImageIcon(chunks.get(chunks.size() - 1)));
        }

        @Override
        protected BufferedImage doInBackground() throws Exception {
            int pixel = Color.RED.getRGB();
            for (int row = 0; row < copy.getHeight(); row++) {
                for (int col = 0; col < copy.getWidth(); col++) {
                    copy.setRGB(col, row, pixel);
                    publish(makeCopy(copy));
                }
            }
            return null;
        }
    }
} 
```

应该注意的是，这是一个非常昂贵的示例，因为`BufferedImage`每次更改像素都会创建一个新示例。您可以建立一个图像池并使用它们，因为实际上只对最后一个图像感兴趣（在`process`方法内）或减少更新的数量，但这只是一个概念证明。

# java - 异常向上传播调用堆栈

> ID：15627917
> 
> 赞同：4
> 
> 时间：2013-03-26T01:46:32.093
> 
> 标签：java, exception, try-catch

我很难完全理解让异常传播到调用堆栈的概念或真正的用处。我知道如何创建它们，但我真的不知道它们什么时候会被使用，比如在一个简单的现实世界数学应用程序中。

```
public void method1(){
    try{
        method2();
    }
    catch(Exception e){
        e.printStackTrace();
    }
}

public void method2(){
      try{
          throw new Exception();
      }
      finally{
         System.out.println("no exception, try cleanup");
      }
} 
```

我知道这基本上就是它的工作方式，尽管它可能会更多地涉及更多的异常和函数，但我并没有真正理解使用这些而不是在每个函数中都有捕获。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T02:19:42.207

> ...但我并没有真正理解使用这些功能，而不仅仅是在每个函数中都有捕获。

关键是调用堆栈上的下一个函数可能不知道如何处理异常。例子：

```
public class Test {

    public Object doSomething(String source) throws IOException {
        try (InputStream is = openAsStream(source)) {
            // ... read and process stuff
            return ...
        }
    }

    public InputStream openAsStream(String name) throws IOException {
        String fileName = // ... do something with 'name'
        return new FileInputStream(name);
    }

    public static void main(String[] args) {
        // ...
        Test t = new Test();
        try {
            t.doSomething(args[0]);
        } catch (IOException ex) {
            System.err.println("Cannot handle '" + args[0] + "'");
        }
    }
} 
```

`openAsStream`调用`FileInputStream`可能`IOException`抛出. 该`openAsStream`方法无法从中恢复，因此它让它传播。该`doSomething`方法也不知道如何处理它，因此它允许它传播。最后，异常到达`main`... 它知道如何向用户解释问题。

* * *

现在您可以编写`openAsStream`来捕获`IOException`，打印错误消息并返回`null`. 但这将是一个很大的错误：

*   `openAsStream()`不（也不应该*）*知道是否/如何向用户报告问题。

*   如果它返回一个`null`给调用者，那么调用者必须测试以查看调用的结果是否是`null`......并采取替代行动。

关键是方法应该只处理可以在该级别充分处理的异常。应该允许其他人传播。（或者可能包含在另一个异常中......如果这是 API 设计所要求的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T02:02:51.393

默认情况下，异常传播使您的代码在错误时快速失败。

考虑异常传播的替代方法 - 返回错误代码。如果您的代码的调用者意外或故意不测试错误代码，那么他们可能会使用您的方法，而不知道您的对象现在处于不可用状态，并继续调用方法并导致未定义的行为/内存损坏。如果您改为抛出异常，那么如果调用者忘记捕获异常，那么它们不会做可怕的事情，而是快速失败，并且程序员可以被警告它被抛出的位置、原因以及如何处理它。异常是响亮而令人讨厌的，因为它们表明**需要**考虑的条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T01:58:34.927

通常，调用者有适当的上下文来处理问题，而执行生成异常的操作的代码却没有。假设我是一个高级程序，想要将一些数据写入文件。我正在调用的低级服务，我们称之为 writeFile() 可以出于各种原因抛出 IOException。

编写 writeFile() 的人将不知道 writeFile() 将被使用的上下文。如果 writeFile() 失败，它是否应该尝试重新写入文件？它应该尝试多少次？它应该放弃吗？因为在完成某些任务的方案中编写低级函数 writeFile() 的上下文的程序员已经陷入困境，程序员不可能预料到调用者会如何处理错误情况。

writeFile() 的程序员不是试图猜测调用者希望如何处理错误（不可能的任务），而是向调用 writeFile() 的客户端指示有一些“未解决的问题”需要在出现问题时回答出现。每个问题都由一个异常类指示，当客户端程序员捕获该异常时，客户端程序员正在使用客户端程序员永远不希望拥有的上下文来编写对该开放问题的答案。

简而言之，如果你看到一个方法列出了一个已检查的异常，那么编写该异常的程序员会说“调用此方法的人将有适当的上下文来决定如何处理该异常情况。我没有。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T01:48:55.757

有时生成异常的代码不知道如何正确处理它。如果您在一段事务代码中，并且发生了故障，则该方法/组件可能无法做更多的事情，而只是在尝试处理异常时记录该异常。另一方面，在一层或多层之上，您可能能够尝试重新建立连接，或向请求者提供详细的错误响应。

# python - 在 Python 中使用 Spynner 填写表格

> ID：15627920
> 
> 赞同：0
> 
> 时间：2013-03-26T01:46:36.230
> 
> 标签：python, html, spynner

我正在尝试在此站点上填写我的用户名和密码： [https ://www.imleagues.com/Login.aspx](https://www.imleagues.com/Login.aspx)

从那里，我想提交它并登录。我已经能够单击登录按钮，但它告诉我我的用户名和密码不正确。我应该如何填写这些？我以为我用这个：

```
URL = 'https://www.imleagues.com/Login.aspx'
address = "http://www.imleagues.com/School/Team/Home.aspx?Team=27d6c31187314397b00293fb0cfbc79a"

b = spynner.Browser()
b.show()
b.load(URL)
b.wk_fill('input[name=ctl00$ContentPlaceHolder1$inUserName]', '******')
b.wk_fill('input[name=ctl00$ContentPlaceHolder1$inPassword]', '******') 
```

但显然这不起作用。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:19:24.757

这对我有用：

```
import spynner
URL = 'https://www.imleagues.com/Login.aspx'
address = "http://www.imleagues.com/School/Team/Home.aspx?Team=27d6c31187314397b00293fb0cfbc79a"

b = spynner.Browser()
b.show()
b.load(URL)
b.runjs('$("#ctl00_ContentPlaceHolder1_inUserName").val("testUser")')
b.runjs('$("#ctl00_ContentPlaceHolder1_inPassword").val("testPass")') 
```

# javascript - 在给定的工作流程中，angularjs 和指令的最佳实践是什么？

> ID：15627925
> 
> 赞同：0
> 
> 时间：2013-03-26T01:46:59.370
> 
> 标签：javascript, angularjs, angularjs-directive

我们创建了一个三窗口向导。它们都是同一页面上的三个 div（或者如果出现更好的解决方案，它们可以分成部分）。我们使用 jquery 的淡入/淡出来转换向导的 div。它们都共享一些在向导期间必须了解的数据对象。第二个窗口只是一个“请稍等片刻”，在转换到第三个窗口之前等待来自 ajax 调用的回调。

我们已经将淡入/淡出加载到指令中并且它可以工作。问题是我们使用“标志”跟踪控制器中 DOM 元素的状态。

$scope.someDomId == '可见' 或 '隐藏'。

该指令监视所述 id 的更改，并在其更改时采取适当的措施。

这行得通，但对我来说似乎很难看。确实，我们已经从控制器中删除了 Dom 操作，但用一个粗略的标记系统代替了它。

这是最佳做法吗？这真的更好吗？是的，它现在可以更容易地进行单元测试，但这是我在这一点上看到的唯一可感知的好处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:16:36.357

您可以在与控制器中的一个标志变量相关的一页上遇到多个指令的情况。他们将以这种方式单独工作。

# paypal - “立即付款”按钮在 buttonmanager-sdk-dotnet SDK 示例项目中不起作用

> ID：15627933
> 
> 赞同：0
> 
> 时间：2013-03-26T01:47:39.447
> 
> 标签：paypal, paypal-sandbox

我想知道使用以下代码的“立即付款”按钮有什么问题。单击它后，它会显示来自站点（[https://securepayments.sandbox.paypal.com/cgi-bin/webscr](https://securepayments.sandbox.paypal.com/cgi-bin/webscr)）的错误消息“错误处理付款”。

我使用了 git hub 中的 buttonmanager-sdk-dotnet，并且按钮代码生成正常，如肥皂响应中所示。对于生成“立即购买”按钮，似乎可以，我可以单击并查看贝宝的付款页面而不是错误页面。

这真的让我很困惑。谁能帮我？

谢谢！

```
<form target="_top" action="https://securepayments.sandbox.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="HSS-BswQHPdTagwZHwncBBJAK6K0RKijQJ91">
<input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_paynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1"> 
</form> 
```

肥皂请求：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns="urn:ebay:api:smileytongue:ayPalAPI" xmlns:ebl="urn:ebay:apis:eBLBaseComponents" xmlns:cc="urn:ebay:apis:CoreComponentTypes" xmlns:ed="urn:ebay:apis:EnhancedDataTypes"><soapenv:Header><ns:RequesterCredentials><ebl:Credentials><ebl:Username>jb-us-seller_api1.paypal.com</ebl:Username><ebl:smileytongue:assword>WX4WTU3S8MY44S7F</ebl:smileytongue:assword><ebl:smileyfrustrated:ignature>AFcWxV21C7fd0v3bYYYRCpSSRl31A7yDhhsPUU2XhtMoZXsWHFxu-RWy</ebl:smileyfrustrated:ignature></ebl:Credentials></ns:RequesterCredentials></soapenv:Header><soapenv:Body><ns:BMCreateButtonReq><ns:BMCreateButtonRequest><ebl:Version>98.0</ebl:Version><ns:ButtonType>PAYMENT</ns:ButtonType><ns:ButtonCode>TOKEN</ns:ButtonCode><ns:ButtonVar>item_name=Widget</ns:ButtonVar><ns:ButtonVar>return=</ns:ButtonVar><ns:ButtonVar>business=jb-us-seller_paypal.com</ns:ButtonVar><ns:ButtonVar>notify_url=</ns:ButtonVar><ns:ButtonVar>subtotal=2.00</ns:ButtonVar></ns:BMCreateButtonRequest></ns:BMCreateButtonReq></soapenv:Body></soapenv:Envelope> 
```

肥皂反应：

```
<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cc="urn:ebay:apis:CoreComponentTypes" xmlns:wsu="http://schemas.xmlsoap.org/ws/2002/07/utility" xmlns:saml="urn:oasis:names:tc:SAML:1.0:assertion" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/12/secext" xmlns:ed="urn:ebay:apis:EnhancedDataTypes" xmlns:ebl="urn:ebay:apis:eBLBaseComponents" xmlns:ns="urn:ebay:api:PayPalAPI"><SOAP-ENV:Header><Security xmlns="http://schemas.xmlsoap.org/ws/2002/12/secext" xsi:type="wsse:SecurityType"></Security><RequesterCredentials xmlns="urn:ebay:api:PayPalAPI" xsi:type="ebl:CustomSecurityHeaderType"><Credentials xmlns="urn:ebay:apis:eBLBaseComponents" xsi:type="ebl:UserIdPasswordType"><Username xsi:type="xs:string"></Username><Password xsi:type="xs:string"></Password><Signature xsi:type="xs:string"></Signature><Subject xsi:type="xs:string"></Subject></Credentials></RequesterCredentials></SOAP-ENV:Header><SOAP-ENV:Body id="_0"><BMCreateButtonResponse xmlns="urn:ebay:api:PayPalAPI"><Timestamp xmlns="urn:ebay:apis:eBLBaseComponents">2013-03-26T00:47:07Z</Timestamp><Ack xmlns="urn:ebay:apis:eBLBaseComponents">Success</Ack><CorrelationID xmlns="urn:ebay:apis:eBLBaseComponents">4077039977e32</CorrelationID><Version xmlns="urn:ebay:apis:eBLBaseComponents">98.0</Version><Build xmlns="urn:ebay:apis:eBLBaseComponents">5479129</Build><Website xsi:type="xs:string"><form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post"><input type="hidden" name="cmd" value="_xclick"><input type="hidden" name="business" value="jb-us-seller@paypal.com"><input type="hidden" name="item_name" value="Widget"><input type="hidden" name="button_subtype" value="products"><input type="hidden" name="bn" value="TWLK53YN7GDM6:PP-BuyNowBF_P"><input type="hidden" name="no_note" value="0"><input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_buynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"><img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1"></form></Website><Email xsi:type="xs:string">https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_xclick&business=jb%2dus%2dseller%40paypal%2ecom&item_name=Widget&button_subtype=products&bn=TWLK53YN7GDM6%3aPP%2dBuyNowBF_P&no_note=0</Email></BMCreateButtonResponse></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:49:37.173

我设法改用“立即购买”按钮。我希望 PayPal 文档可以更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:24:32.093

尝试使用以下行而不是您当前使用的行

```
<form target="_top" action="https://www.paypal.com/cgi-bin/webscr" method="post"> 
```

# jquery - $.each() 与嵌套数组

> ID：15627934
> 
> 赞同：3
> 
> 时间：2013-03-26T01:47:53.027
> 
> 标签：jquery, json, each

首先，如果我没有确定正确的数组类型，请原谅我，但我似乎无法弄清楚这一点。

我正在尝试在查询中运行此数组：

```
var myArray = {"artists":[{
            "a1":"Adam Sandler",
            "a2":"Adam Lambert",
            "a3":"Avril Levine",
            "a4":"Backstreet Boys",
            "a5":"Blackstreet",
            "a6":"Black Eye Peas",
            "a7":"Cool and the Gang",
            "a8":"Chicago",
            "a9":"Charlie Manson"

        }],
        "songs":[{
            "s1":"Grow Old With You",
            "s2":"Whatdaya Want From Me",
            "s3":"Yea yea",
            "s4":"Quit Playing Games With My Heart",
            "s5":"No Digity",
            "s6":"Meet Me Half way",
            "s7":"Doo wa ditty",
            "s8":"Fight for your honor",
            "s9":"Charlies Song"
        }],
        "genre":[{
            "g1":"Pop",
            "g2":"Pop",
            "g3":"Alternative",
            "g4":"R & B",
            "g5":"R & B",
            "g6":"Hip-Hop",
            "g7":"Funk",
            "g8":"Soft Rock",
            "g9":"Rock"
        }]}; 
```

当我单击一个按钮（比如标题）时，我不知道如何让它自动通过数组。这就是我的按钮：

```
 $.each(myArray.songs, function(e,i){
                    console.log("e:"+e+" - i:"+i+" - "+myArray.songs[e].i);

                }); 
```

这确实有效，但是当它到达 console.log 时，这就是我得到的：

> e:0 - i:[object Object] - 未定义

我不知道如何让“i”工作，它总是给我 [Object Object]。我将 I 替换为数组中的实际 id，它可以工作。

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T02:04:04.137

如果你想使用`$.each`你可以试试这个： -

```
$.each(myArray.songs, function (i, ob) {
    $.each(ob, function (ind, obj) {
        console.log("key:" + ind + " value:" + obj);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T01:59:20.260

如果您尝试循环播放所有歌曲，`myArray.songs`则 是一个包含一个对象的数组。

尝试这个：

```
$.each(myArray.songs[0], function(e, i) {
  console.log('e:' + e + ' - i:' + i);
}); 
```

并查看这个 jsFiddle [http://jsfiddle.net/TsJP5/1/](http://jsfiddle.net/TsJP5/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T01:58:25.450

您的结构有点奇怪 - 歌曲是一个数组，其中包含一个包含键值对的 json 元素。尽管如此，要遍历这些元素，您应该这样做：

```
 var songsElement = myArray.songs[0];
    for (var key in songsElement) {
        if (songsElement.hasOwnProperty(key)) {
            console.log(key + " -> " + songsElement[key]);
        }
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T02:09:54.573

除非您需要迭代 jQuery 元素的集合，否则我不会使用 $.each() （这是个人偏好）。相反，利用 Array 上的原生 forEach() 方法：

```
function each(obj, onSuccess, recursive) {
    if (obj && (typeof obj === 'object' || typeof obj === 'array')) {
        Object.keys(obj).forEach(function(key) {
            var val = obj[key];
            if (onSuccess && val && key) {
                var quit = onSuccess(val, key);
                if (false === quit) {
                    return false;
                }
            }
            if (true === recursive) {
                each(val, onSuccess, true);
            }
        });
    }
} 
```

这处理 Array 和 Object 实例以及递归。[总是使用 Object.keys() 来获取成员名称会稍微影响性能](http://jsperf.com/diff-between-object-keys-foreach-and-foreach)，但我认为即使在非常大的数据集上它最终也可以忽略不计。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T02:38:20.630

我不完全确定您的数据意味着什么，但它看起来像是一堆歌曲/艺术​​家/流派组合在一起。例如，

```
[{"song":"Losing My Religion",
  "artist":"R.E.M.",
  "genre":"alternative"},
 {"song":"Bizarre Love Triangle",
  "artist":"New Order",
  "genre":"electronica"}] 
```

我不确定为什么 s1、a1 或 g1 有用，所以我将它们排除在外。然后老实说，我认为为此使用 jquery 并没有帮助。我会这样做：

```
for (var i = 0; i < myArray.length; i++)
  console.log(myArray[i].song + " by " + myArray[i].artist + " is of the " + myArray[i].genre + " ilk."); 
```

# java - 空闲的简单 Java Swing 应用程序内存泄漏

> ID：15627939
> 
> 赞同：3
> 
> 时间：2013-03-26T01:48:52.470
> 
> 标签：java, swing, memory-leaks, actionlistener, weak-references

我目前正在调查我们的一个应用程序中的内存泄漏。经过进一步调查，我想出了两个简单的 java swing 应用程序的测试，它们闲置了将近 14 个小时。这两个应用程序都包含 30 个 JButton。

第一个应用程序对其动作侦听器使用强引用：

```
jButton1.addActionListener(new java.awt.event.ActionListener() {
     public void actionPerformed(java.awt.event.ActionEvent evt) {
           jButton1ActionPerformed(evt);
     }
}); 
```

第二个应用程序对其动作侦听器使用弱引用：

```
jButton1.addActionListener(new WeakActionListener(new MyActionListener(), this.jButton1)) 
```

这是 WeakActionListener 的实现：

```
public class WeakActionListener implements ActionListener {

    private WeakReference weakListenerReference;
    private Object source;

    public WeakActionListener(ActionListener listener, Object source) {
        this.weakListenerReference = new WeakReference(listener);
        this.source = source;
    }

    public void actionPerformed(ActionEvent actionEvent) {
        ActionListener actionListener = (ActionListener) this.weakListenerReference.get();
        if(actionListener == null) {
            this.removeListener();
        } else {
            actionListener.actionPerformed(actionEvent);
        }
    }

    private void removeListener() {
        try {
            Method method = source.getClass().getMethod("removeActionListener", new Class[] {ActionListener.class});
            method.invoke(source, new Object[] {this});
        } catch(Exception ex) {
            ex.printStackTrace();
        }
    }

} 
```

我使用 JConsole 对这两个应用程序进行了 14 小时的概要分析。我只是让他们在那个时间范围内闲置。它表明，无论是使用弱引用还是强引用，这两个应用程序的内存堆消耗都会随着时间的推移而增加。

我的问题是，这是 Java Swing API 中的错误吗？解决这种内存泄漏的其他选择是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:58:13.090

JDK实际上包含很多内存泄漏，但是您所描述的情况不是其中之一。内存消耗很严重，因为即使应用程序处于空闲状态，操作系统也不会 - 它有时会向应用程序发送输入事件。处理这些事件需要一些内存分配，因此您会看到越来越多的堆。而且它可能没有被收集，因为它不需要 - 应用程序在堆中有大量可用内存，因此它不会太频繁地 GC。

此外，您在 Java 中使用错误的方法进行内存泄漏分析。正确的将是以下内容：

1.  您创建了一个简单的应用程序，其中包含您想要分析内存泄漏的功能。
2.  您执行所有步骤，之后您认为内存应该为 GC 做好准备。对于与 GUI 相关的应用程序，我建议添加一个调用来`((SunToolkit)Toolkit.getDefaultToolkit()).realSync()`处理所有异步调用和事件。这是一个内部 API，因此不应该在真实的应用程序上使用它，但它对于此类实验性应用程序非常有用。
3.  之后，您尝试分配一些大对象以导致 OutOfMemoryError。您可以确定在抛出 OOME 之前，Java 会收集所有空闲对象。在 OOME 的 catch 块中，您只需退出应用程序`System.exit(0);`

现在最有趣的部分是：您应该运行应用程序`-Xmx20M`来为堆和`-Xrunhprof:format=b,file=<Path to output file>`. 因此，当应用程序完成时，您可以确定所有空闲对象都已被 GC，因为您导致了 OutOfMemory，并且 hprof 将转储所有剩余对象的堆。您可以使用 jhat 或 eclipse 中的一些工具等可用工具之一来分析堆。

# linux - Mono DllNotFound 错误

> ID：15627951
> 
> 赞同：1
> 
> 时间：2013-03-26T01:49:27.517
> 
> 标签：linux, mono

我发现自己无法在 Mono 3.0（在 OpenSUSE 12.3 x64 上）中运行任何 WinForms 应用程序。我得到的问题是`System.TypeInitializationException: An exception was thrown by the type initializer for System.Windows.Forms.XplatUI ---> System.TypeInitializationException: An exception was thrown by the type initializer for System.Drawing.GDIPlus ---> System.DllNotFoundException: /usr/local/lib/libgdiplus.so`。找不到 libgdiplus.so 的原因是它不在`/usr/local/lib`我的系统中，而是在`/usr/lib64`. 我知道`/usr/lib64`在 ldconfig 的路径中的一个事实，并且我还尝试将 gdiplus 的 dllmap 条目更改为`/etc/mono/config`直接指向它，并且错误仍然存​​在。

我有一个完整的尝试在`MONO_LOG_LEVEL="debug"` [这里运行 MoMA 的日志。](http://pastebin.com/71j8F2ns)它似乎忽略了配置文件并直接在错误的地方寻找 SO。

有没有办法让它在正确的地方寻找这个 SO？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-26T01:54:24.180

@PrinceBilliard - 根本原因是对*/data/config.in*的更改将（部分）硬编码路径添加到 libgdiplus.so。真正的解决方法是修改源代码以从条目中删除路径，只在条目中留下*libgdiplus.so*。
如果配置文件中有路径，Mono 将使用该路径并忽略 ldconfig 缓存和 LD_LIBRARY_PATH。如果没有路径，Mono 将尝试使用不同后缀的库名称以及引用 ldconfig 缓存和 LD_LIBRARY_PATH。

我在包规范中处理它的方式是添加一个 %post 任务来编辑 /mono/config 并从条目中删除路径。罗布卢姆

# jquery - jQuery onclick 切换类名

> ID：15627955
> 
> 赞同：33
> 
> 时间：2013-03-26T01:50:00.300
> 
> 标签：jquery

使用 jQuery，我如何在点击时将 classA 切换到 classB：

```
<a class="switch" href="#">Switch</a>
<div class="classA"></div>

$('.switch').on('click', function(e){
    $('.classA').removeClass('classA').addClass('classB');
    e.preventDefault();
}; 
```

如何切换课程，而不是像我在这里所做的那样替换它？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-26T01:51:43.537

jQuery 有一个[toggleClass](http://api.jquery.com/toggleClass/)函数：

```
<button class="switch">Click me</button>

<div class="text-block collapsed pressed">some text</div>

<script>    
    $('.switch').on('click', function(e) {
      $('.text-block').toggleClass("collapsed pressed"); //you can list several class names 
      e.preventDefault();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-04-11T06:42:58.133

[你可以用](https://api.jquery.com/toggleClass/) `toggleClass()` 它来切换类它真的很方便。

情况1

```
<div id='mydiv' class="class1"></div>

$('#mydiv').toggleClass('class1 class2');

output: <div id='mydiv' class="class2"></div> 
```

案例：2

```
<div id='mydiv' class="class2"></div>

$('#mydiv').toggleClass('class1 class2');

output: <div id='mydiv' class="class1"></div> 
```

案例：3

```
<div id='mydiv' class="class1 class2 class3"></div>

$('#mydiv').toggleClass('class1 class2');

output: <div id='mydiv' class="class3"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-29T16:53:03.160

它甚至可以依赖于另一个属性的变化。像这样：

```
$('.classA').toggleClass('classB', $('input').prop('disabled')); 
```

在这种情况下，`classB`每次输入时都会添加`disabled`

# android - 从 GPS 获取当前位置

> ID：15627956
> 
> 赞同：1
> 
> 时间：2013-03-26T01:50:07.433
> 
> 标签：android, android-location

使用`Criteria.ACCURACY_COARSE`我得到位置，但它不准确。我想使用 GPS `Criteria.ACCURACY_FINE`，但`onLocationChanged(Location location)`没有调用该方法。
我做了一些研究，但不知道为什么。
StackOverflow 上有很多类似的问题，但不幸的是我找不到一个可以解决我的问题的问题。
下面是我的源代码：

```
private void locationInformationSettings(){
    Criteria criteria= new  Criteria();;
    criteria.setAccuracy(Criteria.ACCURACY_FINE); //using Criteria.ACCURACY_COARSE works
    //criteria.setPowerRequirement(Criteria.POWER_LOW);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    String providername = locationManager.getBestProvider(criteria, true);

    myLocationListener = new MyLocationListener();

    locationManager.requestLocationUpdates(
            providername, //LocationManager.GPS_PROVIDER, 
            Utils.MINIMUM_TIME_BETWEEN_UPDATES, 
            Utils.MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            myLocationListener
    );      
}

private class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location location) {

        locLongitude = location.getLongitude();
        locLatitude = location.getLatitude();
        String message = String.format(
                "New Location \n Longitude: %1$s \n Latitude: %2$s",
                locLongitude, locLatitude);
        Toast.makeText(RecordActivity.this, message, Toast.LENGTH_LONG).show();
        Log.e(TAG, "Location information received:(" + locLongitude + "," + locLatitude +")");
        locationManager.removeUpdates(myLocationListener);
    }

    public void onStatusChanged(String s, int i, Bundle b) {
        Toast.makeText(RecordActivity.this, "Provider status changed",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderDisabled(String s) {
        Toast.makeText(RecordActivity.this,
                "Provider disabled by the user. GPS turned off",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderEnabled(String s) {
        Toast.makeText(RecordActivity.this,
                "Provider enabled by the user. GPS turned on",
                Toast.LENGTH_LONG).show();
    }

} 
```

清单文件权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

为什么使用网络提供商有效而 GPS 提供商无效？
我已经在我的设备设置中检查了 GPS 服务，并在 Android 4.3 和 Android 2.3.3 上进行了测试。
提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T08:41:29.050

干得好

```
package com.test.locationmanager;

import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.location.LocationProvider;
import android.os.Bundle;
import android.widget.TextView;

public class LocationManagerStatus extends Activity {

private LocationManager locationManager;
private TextView textView;
private final LocationListener gpsLocationListener = new LocationListener() {

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        final String tvTxt = textView.getText().toString();
        switch (status) {
        case LocationProvider.AVAILABLE:
            textView.setText(tvTxt + "GPS available again\n");
            break;
        case LocationProvider.OUT_OF_SERVICE:
            textView.setText(tvTxt + "GPS out of service\n");
            break;
        case LocationProvider.TEMPORARILY_UNAVAILABLE:
            textView.setText(tvTxt + "GPS temporarily unavailable\n");
            break;
        }
    }

    @Override
    public void onProviderEnabled(String provider) {
        textView.setText(textView.getText().toString()
                + "GPS Provider Enabled\n");
    }

    @Override
    public void onProviderDisabled(String provider) {
        textView.setText(textView.getText().toString()
                + "GPS Provider Disabled\n");
    }

    @Override
    public void onLocationChanged(Location location) {
        locationManager.removeUpdates(networkLocationListener);
        textView.setText(textView.getText().toString()
                + "New GPS location: "
                + String.format("%9.6f", location.getLatitude()) + ", "
                + String.format("%9.6f", location.getLongitude()) + "\n");
    }
};
private final LocationListener networkLocationListener = new LocationListener() {

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        final String tvTxt = textView.getText().toString();
        switch (status) {
        case LocationProvider.AVAILABLE:
            textView.setText(tvTxt + "Network location available again\n");
            break;
        case LocationProvider.OUT_OF_SERVICE:
            textView.setText(tvTxt + "Network location out of service\n");
            break;
        case LocationProvider.TEMPORARILY_UNAVAILABLE:
            textView.setText(tvTxt
                    + "Network location temporarily unavailable\n");
            break;
        }
    }

    @Override
    public void onProviderEnabled(String provider) {
        textView.setText(textView.getText().toString()
                + "Network Provider Enabled\n");
    }

    @Override
    public void onProviderDisabled(String provider) {
        textView.setText(textView.getText().toString()
                + "Network Provider Disabled\n");
    }

    @Override
    public void onLocationChanged(Location location) {
        textView.setText(textView.getText().toString()
                + "New network location: "
                + String.format("%9.6f", location.getLatitude()) + ", "
                + String.format("%9.6f", location.getLongitude()) + "\n");
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    textView = (TextView) findViewById(R.id.textview);
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
}

@Override
protected void onResume() {
    super.onResume();
    locationManager.requestLocationUpdates(
            LocationManager.NETWORK_PROVIDER, 5000, 0,
            networkLocationListener);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
            3000, 0, gpsLocationListener);
}

@Override
protected void onPause() {
    super.onPause();
    locationManager.removeUpdates(networkLocationListener);
    locationManager.removeUpdates(gpsLocationListener);
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T08:49:37.267

新的 Google Maps API 引入了 OnMyLocationChangeListener。
您不需要实现 LocationListener。检查这个答案：[https ://stackoverflow.com/a/16240460/1769013](https://stackoverflow.com/a/16240460/1769013)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T07:18:55.857

好吧，在将近 2 个月没有回应之后，我决定采用以下方法。
希望它可以帮助其他人节省一些时间。

```
public class GpsLocationService extends Service implements LocationListener{

    private final String TAG = getClass().getSimpleName();

    private LocationManager locationManager;
    private String provider;

    @Override
    public void onCreate() {
        super.onCreate();
        Log.i(TAG, "onCreate()");
        // Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the locatioin provider -> use
        // default
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        Location location = locationManager.getLastKnownLocation(provider);

        // Initialize the location fields
        if (location != null) {
            Log.d(TAG, "Provider " + provider + " has been selected.");
            onLocationChanged(location);
        } 
        else {
            Log.d(TAG, "Location not available!");
        }

    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.i(TAG, "GpsLocationService has started!");

        locationManager.requestLocationUpdates(provider, 400, 1, this);

        return START_STICKY;
    }

    @Override
    public void onDestroy() {
        Log.i(TAG, "GpsLocationService is destroyed!");
        super.onDestroy();
        locationManager.removeUpdates(this);
    }

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onLocationChanged(Location location) {
        double lat = location.getLatitude();
        double lng =  location.getLongitude();
        Log.i( TAG, "onLocationChanged() lat = " + lat + " long = " + lng);     
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

} 
```

并且在您的清单文件中不要忘记添加以下权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" /> 
```

还要提及您的服务：

```
<service android:name=".GpsLocationService"></service> 
```

# r - 用于对两个向量进行所有成对比较的 R 函数

> ID：15627958
> 
> 赞同：7
> 
> 时间：2013-03-25T21:42:40.983
> 
> 标签：r

我猜这已经存在于 R 中的某个地方，所以也许你可以指出我。

我有两个数值向量，A 和 B。

```
A <- c(1,2,3)
B <- c(2,3,4) 
```

我正在寻找一个函数，它可以在 A 和 B 之间进行每个可能的比较，并返回这些比较的 T/F 向量。

所以在这种情况下，它会比较： 1>2 然后 1>3 然后 1>4 然后 2,2 然后 2>3 然后 2>4 然后 3>2 然后 3>4 并返回：

```
FALSE FALSE FALSE FALSE FALSE FALSE FALSE TRUE FALSE 
```

如果它返回差异就可以了，因为它可以很容易地转换。

这样的功能是否已经存在？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T22:05:11.537

`outer`可能是您想要的功能。但是，它返回一个矩阵，所以我们需要得到一个向量。这是许多方法中的一种：

```
 a <- 1:3
 b <- 2:4
 as.vector(outer(a,b,">"))
[1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE 
```

（这不是您指定的顺序；但是，它是一致的顺序）

还：

```
 as.vector(t(outer(a,b,">")))
[1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE 
```

现在差异：

```
> as.vector(outer(a,b,"-"))
[1] -1  0  1 -2 -1  0 -3 -2 -1 
```

我觉得这`outer`非常有用。我经常使用它。

# java - 通过匹配和不匹配正则表达式的内容拆分字符串

> ID：15627960
> 
> 赞同：0
> 
> 时间：2013-03-26T01:50:29.373
> 
> 标签：java, regex, string, parsing, arraylist

我目前有一个程序可以找到字符串中的所有正则表达式，但是对于不同的部分，我想要与正则表达式匹配的部分和不匹配的部分。

因此，如果我有，`<h1> hello world </h1>`我希望能够将其拆分为 [ `<h1>`, `hello world`, `</h1>`]。

有没有人对他们将如何去做有任何想法？

这是我的代码，它拆分字符串以查找正则表达式部分

```
ArrayList<String> foundTags = new ArrayList<String>();
Pattern p = Pattern.compile("<(.*?)>");
Matcher m = p.matcher(HTMLLine);
while(m.find()){
    foundTags.add(m.group(0));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:26:54.517

[例如](https://stackoverflow.com/questions/275768/is-there-a-way-to-split-strings-with-string-split-and-include-the-delimiters)：

```
String text = "testing<hi>bye</hi><b>bla bla!";
Pattern p = Pattern.compile("<(.*?)>");
Matcher m = p.matcher(text);
int last_match = 0;
List<String> splitted=new ArrayList<>();
while (m.find()) {
        splitted.add(text.substring(last_match,m.start()));
        splitted.add(m.group());
        last_match = m.end();
    }
    splitted.add(text.substring(last_match));
System.out.println(splitted.toString()); 
```

印刷`[testing, <hi>, bye, </hi>, , <b>, bla bla!]`

那是你要的吗？如果您不想要它们，您可以轻松地修复代码以省略空元素：

```
while (m.find()) {
    if(last_match != m.start())
        splitted.add(text.substring(last_match,m.start()));
    splitted.add(m.group());
    last_match = m.end();
}
if(last_match != text.length())
    splitted.add(text.substring(last_match)); 
```

请记住，正如评论中所指出的：使用正则表达式来解析任意 HTML/XML 通常是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:35:43.580

您可以使用正则表达式分组功能来检索匹配的不同部分。例如：

```
ArrayList<String> list = new ArrayList<String>();
Pattern p = Pattern.compile("(<.*?>)(.*)(<.*?>)");
Matcher m = p.matcher("<h1> Hello World </h1>");
while(m.find()){
    list.add(m.group(1));
    list.add(m.group(2));
    list.add(m.group(3));
} 
```

会给你你想要的清单：`["<h1>", " Hello World ", "</h1>"]`。请注意，组号 0 是完全匹配的表达式。

# ios - GLKQuaternion 没有正确访问 w 变量

> ID：15627961
> 
> 赞同：0
> 
> 时间：2013-03-26T01:51:04.250
> 
> 标签：ios, objective-c, opengl-es, glkit

我试图找出 GLKQuaternions 的一个奇怪问题。尝试打印四元数的信息时，w = 0 的值每次。虽然，在调试器区域，它清楚地表明 -4.37114e-08 存储在该值中。我不知道为什么。我的印刷声明说：

```
NSLog(@"\n\nSLERP: Animation.Current:x:%f,y:%f,z:%f,w:%f and Animation.End:x:%f,y:%f,z:%f,w:%f", animation.Current.x, animation.Current.y, animation.Current.z, animation.Current.w, animation.End.x, animation.End.y, animation.End.z, animation.End.w); 
```

我的结构是

```
typedef struct{
    GLKQuaternion Start; //starting orientation
    GLKQuaternion End; //ending orientation
    GLKQuaternion Current; //current interpolated orientation
    float Elapsed; //time span in seconds for a slerp fraction between 0 and 1
    float Duration; //time span in seconds for a slerp fraction between 0 and 1
}Animation; //enables smooth 3D transitions 
```

调试器显示以下内容：

![在此处输入图像描述](../Images/c7f69a763e502ecd6d79f984eccab5c2.png)

请注意，animation.End.w = -4.37114e-08 同时在调试器中声明它 = 0。我在打印语句之后设置了断点。有谁知道这会导致什么？我认为它干扰了我与 w 变量相关的计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:29:50.820

`%f`将值输出到小数点后 6 位。

一个示例，用于`%.9f`输出到小数点后 9 位。显然，`-4.37114 * 10^-08`将需要超过 6 个小数位，因此您需要更改 NSLog 中的格式。

# r - 将绘图参数添加到 R 中的临时变量

> ID：15627962
> 
> 赞同：1
> 
> 时间：2013-03-26T01:51:07.153
> 
> 标签：r, plot

是否可以将带有参数的绘图函数分配给变量并将其用作模板？

例如，如果我有类似的东西

```
tmp_plot <- plot(my_data, xlabel="x", ylabel="y", ...) 
```

我可以添加另一个参数，例如，`main="caption"`在不再次输入整个函数的情况下重新绘制绘图吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T01:53:51.257

创建一个作为 with 包装器的`plot`函数`main = 'caption'`

```
mplot <- function(...) plot(..., main = 'caption')
mplot(1:10,1:10) 
```

![在此处输入图像描述](../Images/a2fb7088135c0a5bdfd64ed9c5b05e0b.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T02:03:33.137

我想知道您是否正在寻找该`title`功能？它将向位于交互式图形设备上的现有绘图添加新文本。有一个`dev.copy`函数试图创建一个新图形，该图形可以被其他允许添加的基本图形函数或任何其他基本图形函数`title`进一步更改。`points`另请参阅`savePlot`X11() 设备的函数。您提供的代码的问题是基本图形范例中的大多数“绘图”函数将返回 NULL，因此 temp_plot 将是......什么都没有。可能的例外是实际使用 lattice 或 ggplot2 的 S4 绘图函数（见下文）。

相反，如果您尝试将绘图保存为 R 结构，那么您需要查看 lattice 和 ggplot2 绘图函数，它们通过将绘图数据和结构存储在列表对象中来实现这一点。

# mongoose - 为什么猫鼬在更新时不验证？

> ID：15627967
> 
> 赞同：70
> 
> 时间：2013-03-26T01:51:58.787
> 
> 标签：mongoose

我有这个代码

```
var ClientSchema = new Schema({
  name: {type: String, required: true, trim: true}
});

var Client = mongoose.model('Client', ClientSchema); 
```

使用 express，我用这段代码创建了一个新客户端

```
var client = new Client(req.body);
client.save(function(err, data) {
  ....
}); 
```

如果我将表单上的名称字段留空，则猫鼬不允许创建客户端，因为我在架构上根据需要设置了它。此外，如果我在名称前后留有空格，猫鼬会在保存之前删除该空格。

现在，我尝试使用此代码更新客户端

```
var id = req.params.id;
var client = req.body;
Client.update({_id: id}, client, function(err) {
  ....
}); 
```

它让我可以更改名称，但如果我在表单上将其留空，猫鼬不会验证并保存一个空名称。如果我在名称前后添加空格，则会用空格保存名称。

为什么猫鼬在保存时验证而不是在更新时验证？我做错了？

mongodb：2.4.0 猫鼬：3.6.0 express：3.1.0 节点：0.10.1

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2015-04-05T17:20:32.543

从 Mongoose 4.0 开始，您可以在新标志上[运行验证器](http://www.mongodb.com/blog/post/introducing-version-40-mongoose-nodejs-odm)并`update()`使用它。`findOneAndUpdate()``runValidators: true`

> Mongoose 4.0 引入了一个选项来运行验证器`update()`并 `findOneAndUpdate()`调用。`update()`打开此选项将为您的调用尝试的所有字段运行验证器`$set`或`$unset`.

例如，给定 OP 的 Schema：

```
const ClientSchema = new Schema({
  name: {type: String, required: true, trim: true}
});

const Client = mongoose.model('Client', ClientSchema); 
```

**在每次更新时传递标志**

您可以像这样使用新标志：

```
const id = req.params.id;
const client = req.body;
Client.update({_id: id}, client, { runValidators: true }, function(err) {
  ....
}); 
```

**`pre`在钩子上使用标志**

如果您不想在每次更新某些内容时设置标志，您可以设置一个`pre`钩子`findOneAndUpdate()`：

```
// Pre hook for `findOneAndUpdate`
ClientSchema.pre('findOneAndUpdate', function(next) {
  this.options.runValidators = true;
  next();
}); 
```

然后，您可以`update()`使用验证器而无需`runValidators` 每次都传递标志。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-03-26T04:38:50.683

您没有做错任何事情，[`validation`](http://mongoosejs.com/docs/validation.html)它是作为 Mongoose 中的内部中间件实现的，并且中间件不会在运行期间执行，`update`因为这基本上是对本机驱动程序的传递。

如果您希望验证您的客户端更新，您需要`find`更新对象，将新的属性值应用到它（参见下划线的[`extend`](http://underscorejs.org/#extend)方法），然后调用`save`它。

**猫鼬 4.0 更新**

如评论和 victorkohl 的回答中所述，当您在调用中包含选项时，Mongoose 现在支持验证`$set`和运算符的字段。`$unset``runValidators: true``update`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-12-19T17:13:09.747

默认情况下，MongoDB 不会对更新进行验证。

为了在更新发生时默认进行验证，就在连接到 MongoDB 之前，您可以只设置全局设置，如下所示：

```
mongoose.set('runValidators', true); // here is your global setting

mongoose.connect(config.database, { useNewUrlParser: true });
mongoose.connection.once('open', () => {
    console.log('Connection has been made, start making fireworks...');
}).on('error', function (error) {
    console.log('Connection error:', error);
}); 
```

因此，任何内置或自定义验证也将在任何更新上运行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-16T18:48:11.260

您可以通过设置选项在更新时运行验证`runValidators: true`。

### 示例 1：

```
 const Kitten = db.model('Kitten', kittenSchema);

const update = { color: 'blue' };
const opts = { runValidators: true };
Kitten.updateOne({}, update, opts, function() {
  // code
}); 
```

### 示例 2：

```
const Kitten = db.model('Kitten', kittenSchema);

const update = { color: 'blue' };
const opts = { runValidators: true };
Kitten.updateOne(
  {
    _id: req.params.id
  },
  {
    $set: { ...update },
  },
  opts
).then(result => {
    // code
}) 
```

阅读更多：[https ://mongoosejs.com/docs/validation.html#update-validators](https://mongoosejs.com/docs/validation.html#update-validators)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-13T01:42:20.020

如果您在 mongoose 的配置中添加此选项，它将起作用：

```
mongoose.set('runValidators', true) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-27T13:35:38.707

`upsert`如果您在`findOneAndUpdate`选项中使用，接受的答案将不起作用。解决此问题的方法是创建一个模型静态方法，该方法执行`findOne`然后`updateOne`或`create`在引擎盖下。`create`自动运行验证。

```
export async function findOneAndUpdateWithValidation(
  this: LocationModel,
  filter: FilterQuery<LocationDocument>,
  update: UpdateQuery<LocationDocument>,
  options?: QueryOptions
) {
  const documentFound = await this.findOne(filter);

  if (!documentFound) return this.create(update);

  return this.updateOne(filter, update, options);
}

locationSchema.statics = {
  findOneAndUpdateWithValidation
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-05-04T10:52:28.813

在您的模型中，例如。Category.js 文件：

```
const CategorySchema = mongoose.Schema({
category_name : {
type : String,
required : [true, 'Category Name Is Required !'],
trim : true,
maxlength : [30, 'Category Name Is To Long !'],
unique : true,
});
const Category = module.exports = mongoose.model("Category",CategorySchema); 
```

在您的路线文件中：

```
router.put("/",(req,res,next)=>{
  Category.findOneAndUpdate(
  {_id : req.body.categoryId},
  {$set : {category_name : req.body.category_name} },
  **{runValidators: true}**, function(err,result) {
    if(err){
      if(err.code === 11000){
       var duplicateValue = err.message.match(/".*"/);
       res.status(200).json({"defaultError":duplicateValue[0]+" Is Already Exsist !"});
       }else{
         res.status(200).json({"error":err.message} || {"defaultError":'Error But Not Understood !'});
       }
    }else{
     console.log("From category.js (Route File) = "+result);
     res.status(200).json({"success":"Category Updated Successfully!!"});
    }
}); 
```

# list - 恒定时间 Haskell 列表（时间复杂度？Haskell 数据类型？） - 作业相关

> ID：15627971
> 
> 赞同：1
> 
> 时间：2013-03-26T01:52:24.403
> 
> 标签：list, haskell, functional-programming, time-complexity

我目前正在 Haskell 上 CS 课程，但在理解某些材料时遇到了一些严重的问题。

对于我的一项任务，我得到了 2 种数据类型，并要求我编写一个具有恒定时间追加的追加函数。

我得到：

```
data NNList a = Sing a | Append ( NNList a) ( NNList a) deriving (Eq)
data CList a = Nil | NotNil ( NNList a) deriving (Eq) 
```

我被要求写一个函数：

```
CListAppend :: CList a -> CList a -> CList a 
```

我不确定我在 CS 教育中错过了什么，但我经常发现自己对时间和空间复杂性感到困惑，我怎么知道函数是否是`constant time`? 任何人都可以向我提供有关如何处理这个问题的一些想法吗？

我的尝试：

```
CListAppend :: CList a -> CList a -> CList a
CListAppend Nil rl = rl
CListAppend ll Nil = ll
CListAppend ll rl = NotNil $ Append ll rl 
```

这报告和返回 NNList 而不是 CList 的错误。反正有转换吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T02:41:16.670

*时间复杂度是一种描述相对于输入大小*计算答案需要多少*步*的方法。什么构成一个*步骤*以及如何计算*大小*取决于问题。

 ***例如，如果您有一堆未分类的名片，则搜索特定的名片将需要与名片数量成正比的多个步骤。如果您将牌堆的大小翻倍，则您必须检查的平均牌数也将翻倍。

另一方面，如果你预先对牌进行分类，你可以玩“高低”游戏，每次看牌时将牌堆的大小减半。现在，在寻找特定卡片时，将牌堆的大小加倍只需要*一个额外的步骤。*

这些分别是线性和对数时间复杂度的例子。在您的情况下，您需要恒定的时间复杂度。这意味着无论两个列表有多大，附加它们都需要*相同数量的步骤*。

您通常可以通过使用不同输入在纸上浏览算法来获得一个想法，但还有更精确的方法。下面是一个使用标准列表实现的*附加函数示例：*`[]`

```
append []     bs = bs
append (a:as) bs = a : append as bs 
```

我们将递归调用*append*算作一个步骤；或者，我们可以计算 的调用次数`(:)`。当第一个参数是一个空列表时，`[]`没有递归调用。当列表包含单个元素时`[1]`，我们评估`1 : append [] bs`，所以我们有一个递归调用。现在将输入大小加倍`[1,2]`并计算递归调用。然后用 等再次加倍`[1,2,3,4]`。然后您可以粗略估计输入大小的步数是否为常数、线性、对数、指数等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:04:32.370

最后一个定义是错误的。If `ll`is `NotNil x`and `rl`is`NotNil y`那么你的定义应该是

```
CListAppend (NotNil x) (NotNil y) = NotNil ( Append x y ) 
```

但是，您将 Append 应用于 type 的值`CList a`。

此解决方案也是恒定时间。Append 构造函数不进行任何处理。模式匹配也在恒定时间内发生。***

# jquery - jQuery：标题高度在后续页面上返回 0

> ID：15627973
> 
> 赞同：1
> 
> 时间：2013-03-26T01:52:33.617
> 
> 标签：jquery, jquery-mobile

我真的不明白我现在遇到的问题。我有这个代码：

```
$(document).on("pageshow", "[data-role=page]", function(){
   var $height = $("[data-role=header]").height();
   alert($height);
}); 
```

此代码在第一页（索引）上运行良好，实际上返回 50 的警报。但是，当我导航到不同的页面时，警报返回高度 0，除非我进行完全刷新。

我也尝试了窗口加载功能，它返回 0。我想要做的是获取每个页面的标题高度并使用它来正确对齐 ui-content。

谁能向我解释发生了什么以及正确的方法是什么？除了字体和按钮之外，标题中没有太多内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:02:18.387

您应该明确指定您真正想要的标题高度。检查以下代码，希望这对您有用。

```
var $height = $("[data-role=header]:visible").height(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:01:36.633

我不完全确定你也在尝试做什么。您是在使用带有按钮的 div 还是其他东西？

但我会做这样的事情：http: [//jsfiddle.net/zJxgh/](http://jsfiddle.net/zJxgh/)

```
$(function() {
    var header = $('#header').height();
    alert(header);
}); 
```

# html - 基本 CSS 定位（相对与绝对）

> ID：15627975
> 
> 赞同：1
> 
> 时间：2013-03-26T01:52:59.340
> 
> 标签：html, css

我最近编写、设计并上传了我的第一个网站[http://www.autismsees.com](http://www.autismsees.com)。

我今天第一次把它放到网上，我意识到在许多浏览器上，整个页面看起来像是向右移动的。

这是因为我对所有元素都使用了绝对定位，而不是通常首选的相对定位。这是一个我非常渴望纠正的错误，但我很难理解应该如何切换到相对定位。

网页的 css 可以在[http://autismsees.com/style/stylesheet.css](http://autismsees.com/style/stylesheet.css)找到。

我想知道是否有人可以就如何更改样式表给我一些建议，或者提供有助于教我如何更改样式表的在线资源。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T02:40:45.887

哇.. 看到你的 HTML 和 CSS 代码我很惊讶，我记得我第一次学习 HTML 和 CSS。但只是一个建议，也许你需要改进结构并整理你的 HTML 代码。可以这样：

```
<html>
<head>......</head>
<body>
<div id="wrapper">
   <div id="container">
   ......
   <!-- YOUR CONTENT HERE -->
   ......
   </div>
</div>
</body>
</html> 
```

我使用两种方法（使用 CSS）可以使网页居中：

```
#container{
    position: relative;
    margin : 0 auto;
    width: 900px; 
} 
```

或者

```
#container{
    position: absolute;
    width: 900px;
    left: 50%;
    margin-left : -450px;
} 
```

这是小提琴：http: [//jsfiddle.net/z9vVu/](http://jsfiddle.net/z9vVu/)

希望这有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T02:30:17.157

也许这个网络广播可以帮助你更好地理解定位：-

[http://css-tricks.com/video-screencasts/110-quick-overview-of-css-position-values/](http://css-tricks.com/video-screencasts/110-quick-overview-of-css-position-values/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T01:56:51.807

`200`从所有`left`属性中减去，然后环绕
`<div style="position:relative; margin:0 auto;">...</div>`整个页面（就在 内部`<body>...</body>`）。这应该可以很好地解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T03:06:23.953

我的建议是学习所有关于[盒子模型](http://css-tricks.com/the-css-box-model/)以及[浮动](http://css-tricks.com/all-about-floats/)在 CSS 中的工作原理。在用 HTML 和 CSS 构建设计时，这将是非常重要的。*抛弃绝对定位并改用流。*

要研究的另一件事是类和 id 之间的区别。请记住，id 用于元素/样式的单个实例，而类可以应用于页面上的许多元素。使用类的好处是您可以获得大量代码重用，并且最终您的整体文件大小要小得多。我通常保留 id 仅用于 JavaScript。

最后，我会研究一个像[Twitter Bootstrap](http://twitter.github.com/bootstrap/)这样的网格框架。在查看您网站的源代码时，您似乎已将 Bootstrap CSS 包含为“slidestyle.css”。这个文件有一些很棒的可重复使用的风格化元素。正如弗雷迪所提到的，你可能应该尝试这样的事情：

```
<!doctype html>
<html>
    <head>
        <title>AutismSees</title>

        <link rel="stylesheet" href="slidestyle.css">
        <link rel="stylesheet" href="stylesheet.css">
    </head>
    <body>
        <div class="container">
            <header class="row span12">
              <!-- Header and Navigation Here -->
            </header>
            <div class="row span12">
              <!-- Slide control here -->
            </div>
            <!-- Create the three content columns -->
            <div class="row">
              <div class="span4">
                <h2>Contribute</h2>
                <p>Text here.</p>
              </div>
              <div class="span4">
                <h2>Stay Connected</h2>
                <p>Text here.</p>
              </div>
              <div class="span4">
                <h2>Our Friends</h2>
                <p>Text here.</p>
              </div>
            </div>
            <footer class="row span12">
              <p class="copyright">&copy; 2013 AutismSees.</p>
            </footer>
        </div>
    </body>
</html> 
```

、`container`、`span4`和`span12`类`row`都来自 Twitter Bootstrap。在 Bootstrap 中使用这些和其他有用的类实际上将有助于加快页面布局。

为了帮助说明所有这些，我创建了一个结构可能看起来像的粗略草稿：http: [//jsfiddle.net/matthewkimber/JmsSx/10/embedded/result/](http://jsfiddle.net/matthewkimber/JmsSx/10/embedded/result/)。这只是其中的一部分，但您可以看到我没有使用绝对或相对定位。只是流动和漂浮。如果调整浏览器大小，则页面居中并保持居中。稍作调整，您就可以轻松地将其变成您当前的外观和感觉。

# python - Python 子序列运算符如何绕过索引错误？

> ID：15627976
> 
> 赞同：2
> 
> 时间：2013-03-26T01:52:59.177
> 
> 标签：python, string

好的，所以我正在学习[Udacity](http://www.udacity.com)课程，并且一直试图通过 Python 字符串操作找出这个特殊的怪癖。

鉴于这种情况，

```
 1     x = ''    
 2     print x[0] 
```

我应该在第 2 行得到一个“索引超出范围”错误，因为空字符串中没有第 0 个位置。

但在*这种*情况下，

```
 1     x = ''    
 2     print x[0:] 
```

无论如何都不会出现索引错误。**这是为什么**？子序列运算符如何绕过看似应该存在的索引错误？

提前感谢您的帮助！

* * *

如果我不清楚，[这里](https://www.youtube.com/watch?v=AFYigYIunQ4&feature=player_embedded)是一个 80 秒解决我正在谈论的问题的链接（对我当前的问题的解释不太令人满意）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T01:56:08.433

`x[0]`预计将返回单个元素，甚至可以是`None`. （例如，`[None][0] == None`）那么当索引 0 处没有任何内容时，它会返回什么？它不能返回任何东西——它甚至不能返回，因为它实际上是在那个索引处`None`是模棱两可的。`None`它必须引发异常。

`x[0:]`另一方面，返回一个包含 0 个或更多元素的列表，因此它可以通过返回一个空列表来返回 'I found nothing'。（请注意，这`x[0:]`不是通过调用`x[0]` `x[1]`等实现的，而是使用不同的底层代码。）

# scala - 在 SLICK 中带有伴随对象的映射投影

> ID：15627981
> 
> 赞同：10
> 
> 时间：2013-03-26T01:53:41.527
> 
> 标签：scala, slick

我有嵌套的类/对象，并希望使用 SLICK 在数据库中存储（和检索）它们。我知道使用 SLICK 映射投影将是关键。此外，我使用伴随对象在嵌套对象和平面结构之间进行映射（存储在 DB 表中）。我想做这样的事情（简化示例）：

```
case class Foo(id: Int, myBar: Bar)

case class Bar(myInt: Int, myString: String)

object Foo {
  def apply(id: Int, myInt: Int, myString: String): Foo = Foo(id, Bar(myInt, myString))

  override def unapply(f: Foo) = (f.id, f.myBar.myInt, f.myBar.myString)
}

object TTable extends Table[Foo]("FOO") {
    def id = column[Int]("id",  O.PrimaryKey)
    def myInt = column[Int]("myInt", O NotNull)
    def myString = column[String]("myString", O NotNull)

    def * = id ~ myInt ~ myString <> (Foo.apply _, Foo.unapply _)

    def query(db: Database, id: Int): Option[Foo] = db withSession { //s: Session =>
        (for { b <- TTable if b.id is id} yield b).firstOption
    }
} 
```

但是编译失败并出现几个错误：“方法 unapply 定义了两次”，“对重载定义的模糊引用，两个方法都应用 [...] 匹配预期类型？” 和“重载方法值 <> 与替代品”

[我发现映射投影“我目前无法理解的 scala slick 方法](https://stackoverflow.com/questions/13906684/scala-slick-method-i-can-not-understand-so-far)”和“[映射投影与 <> 到带有 Slick 中伴随对象的案例类](https://stackoverflow.com/questions/15175659/mapped-projection-with-to-a-case-class-with-companion-object-in-slick)”的出色解释，但建议的解决方案都不适合我。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-26T06:18:11.790

而不是`unapply`and `apply`，您可以只传递执行您想要的操作的 lambda：

```
 def * = id ~ myInt ~ myString <> (
    (id,myInt,myString) => Foo(id, Bar(myInt, myString)),    /* from a row to a Foo */
    (f:Foo) => Some((f.id, f.myBar.myInt, f.myBar.myString)) /* and back */) 
```

这样，从表行到案例类的映射保留在表定义中，案例类保留为简单案例类，这还不错。

另一种方法是不使用 case 类`Foo`，而是使用常规类，这样您就可以自由定义自己的对象`apply`和`unapply`伴随对象，如下所示：

```
// untested code
class Foo private (val id: Int, val myBar: Bar) 
case class Bar(myInt: Int, myString: String)
object Foo {
  def apply(id: Int, myInt: Int, myString: String): Foo = new Foo(id, Bar(myInt, myString))
  def unapply(f: Foo) = Some((f.id, f.myBar.myInt, f.myBar.myString))
} 
```

如果你想做`def * = id ~ myInt ~ myString <> (Foo.apply _, Foo.unapply _)`

您将在一定程度上获得类似案例类的用法，但您可能会错过其他好东西，例如拥有`equals`和`toString`免费的实际案例类。我宁愿保留 case 类（以及它们的 default `apply` `unapply`），以便在正常约定中将它们视为代数数据类型。

这里真正的问题是案例类有自己的`unapply`，所以你不能（据我所知）在你的同伴类中有类似的方法（相同的名称和相同的参数）。您可以简单地使用另一个方法名称。毕竟，你想做的在语义上并不等同于`unapply`：

```
object Foo {
  def fromRow(id: Int, myInt: Int, myString: String): Foo = Foo(id, Bar(myInt, myString))
  def toRow(f: Foo) = Some((f.id, f.myBar.myInt, f.myBar.myString))
} 
```

然后在您的表架构中：

```
def * = id ~ myInt ~ myString <> (Foo.fromRow _, Foo.toRow _) 
```

# php - DateTime/DateInterval 每次刷新增加 25 小时会产生完全不同的结果

> ID：15627982
> 
> 赞同：5
> 
> 时间：2013-03-26T01:53:42.967
> 
> 标签：php, datetime, dateinterval

这是我的代码：

```
$timezone = new \DateTimeZone('America/New_York');
    $date1 = new \DateTime (date("Y:m:d H:i:s", time()), $timezone);
    $date1->add(new \DateInterval ("PT24H"));
    echo $date1->format('Y-m-d h:s:m'); 
```

这应该将当前时间增加 24 小时。问题是，每次我刷新页面时，我都会得到不同的结果。我指的不是人们预期的几秒钟，而是很多分钟。有些高于实际时间，有些低于实际时间。

现在晚上 9:51 进行三次刷新，结果如下：2013-03-26 09:09:03、2013-03-26 09:17:03、2013-03-26 09:30:03

为什么我看不到实时？到底是怎么回事？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T01:55:31.723

错误在您的最后一个 echo 语句中

```
echo $date1->format('Y-m-d h:s:m'); 
```

将其更改为：

```
echo $date1->format('Y-m-d h:i:s'); 
```

每次刷新都会刷新您设置为秒而不是分钟的中间值，因此例如每 3 秒更新一次显示为 3 分钟更新。此外，您的分钟显示为 m，这是月份数字的日期格式，因此它显示为 3 表示三月的数字表示。我已将其更改为 i 以表示分钟。

我得到了您的代码，上面的代码在伦敦工作，代码如下：

```
$date1 = new DateTime('America/New_York');
$date1->add(new DateInterval("PT24H"));
echo $date1->format('Y-m-d h:i:s'); 
```

现在显示 3 月 26 日晚上 10:07，比纽约当前时间晚 24 小时

# jquery - 当鼠标在指定元素中移动时停止 mouseout 事件

> ID：15627984
> 
> 赞同：0
> 
> 时间：2013-03-26T01:53:56.087
> 
> 标签：jquery

我知道的所有`mouseover`事件`mouseout`，这些事件在鼠标移入和移出元素及其后代时触发。让我举个例子，假设你有一个如下所示的 dom 结构：

```
<div id="top">
   <div class="container">
      <!--<div class="head">
      </div>-->
      <div class="content">
         <!--maybe there are many nested `div.contiainer` as children directly or not directly.-->
      <div>
   </div>
</div> 
```

假设鼠标移动在`div.container`我们那里追加一个`div.head`。当鼠标移出时，我们删除鼠标进入`div.head`时创建的。

所以代码如下所示。

```
 $("div.container").on("mouseover",function(){//append div.head})
.on("mouseout",function(){//remove the div.head}); 
```

所以我的问题是我想`mouseout`在鼠标移入时是否有可能停止事件`div.head`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:20:30.057

`.mouseout`当你离开它绑定的元素时会触发 - 即使它是一个子元素。你最好使用`.mouseleave`它只会在你离开元素时触发（而不是悬停在孩子身上）[http://api.jquery.com/mouseleave/](http://api.jquery.com/mouseleave/)

小提琴：http: [//jsfiddle.net/zN4FF/](http://jsfiddle.net/zN4FF/)

# android - 选择 ActionBar Icon 会使应用程序崩溃

> ID：15627988
> 
> 赞同：-1
> 
> 时间：2013-03-26T01:54:17.477
> 
> 标签：android, android-actionbar

我一直在关注[这里](http://www.vogella.com/articles/AndroidActionBar/article.html)的帖子，以了解有关 Android 中 ActionBar 的更多信息。

在我的应用程序中，我试图从每个页面上的操作栏图标导航到 HomeActivity .....这就是我现在处理它的方式，但它不会工作并使应用程序崩溃。

```
public boolean onOptionsItemSelected(MenuItem item){
        switch(item.getItemId()){
        case android.R.id.home:
            Intent intent = new Intent(this, HomeActivity.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

日志猫在这里：

```
03-25 20:02:26.306: E/AndroidRuntime(11346): FATAL EXCEPTION: main
03-25 20:02:26.306: E/AndroidRuntime(11346): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.testingapp/com.testingapp.HomeActivity}: java.lang.NullPointerException
03-25 20:02:26.306: E/AndroidRuntime(11346):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at android.os.Looper.loop(Looper.java:137)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at java.lang.reflect.Method.invokeNative(Native Method)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at java.lang.reflect.Method.invoke(Method.java:511)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at dalvik.system.NativeStart.main(Native Method)
03-25 20:02:26.306: E/AndroidRuntime(11346): Caused by: java.lang.NullPointerException
03-25 20:02:26.306: E/AndroidRuntime(11346):    at com.testingapp.HomeActivity.onCreate(HomeActivity.java:49)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at android.app.Activity.performCreate(Activity.java:5206)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-25 20:02:26.306: E/AndroidRuntime(11346):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
03-25 20:02:26.306: E/AndroidRuntime(11346):    ... 11 more 
```

菜单.xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="never"
    android:title="@string/menu_settings"/>

</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:06:59.423

检查第 49 行，您在该行中使用的水对象，请在第 49 行之前使用 Log.i 打印。罪魁祸首是那个为空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:07:03.517

如果您为菜单项添加了菜单 ID，则需要使用`R.id.home`而不是获取菜单 ID：`android.R.id.home`

```
<item
    android:id="@+id/home" //<<< here
     ..../> 
```

或者要使用默认 ID，您必须将菜单 ID 声明为`android:id="@+id/android:home"`

# perl - Perl - 脚本时间计算器

> ID：15627991
> 
> 赞同：-1
> 
> 时间：2013-03-26T01:54:54.043
> 
> 标签：perl

在这方面需要帮助。

我想创建一个脚本，它将接收具有以下格式的 2 个参数（时间）`AA:BB`（AA 从 00 到 200，BB 从 0 到 59）。

它应该将这些添加到时间并给出结果，如果结果超过 24 小时，它会成为 1 天，如果它是一周超过 7 天。

例如，23:03 11:05 将给出 1 天和 10:08，而 35:05 162:01 将给出 1 周、1 天和 5:06。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:00:29.590

在开始之前，我想提醒您，并非每一天都是 24 小时。一天的长度可以是 22、23、24、25 或 26 小时。这意味着您想要做的事情会固有地将错误添加到您的数据中。

我通常会是第一个指示您使用模块的人，因为一个好的日期/时间模块旨在防止您完全按照您的要求进行操作。这意味着从头开始解决问题比使用模块更容易。事实上，使用我通常使用的模块 DateTime 甚至不可能做你想做的事。

```
my ($hours1, $minutes1) = split /:/, $arg1;
my ($hours2, $minutes2) = split /:/, $arg2;

my $hours   = $hours1   + $hours2;
my $minutes = $minutes1 + $minutes2;

$hours   += ($minutes - ($minutes % 60)) / 60;  $minutes %= 60;
my $days  = ($hours   - ($hours   % 24)) / 24;  $hours   %= 24;
my $weeks = ($days    - ($days    %  7)) /  7;  $days    %=  7; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:02:35.223

看来您需要使用这两个：[DateTime](http://search.cpan.org/perldoc/DateTime)和[DateTime::Duration](http://search.cpan.org/perldoc/DateTime%3a%3aDuration)。

第一个可以表示*日期*，第二个可以表示要添加的*时间量。*然后，查看 中的`add_duration`方法`DateTime`。

# php - PhoneGap 拍摄/选择图像，然后在输入字段中输入名称，然后上传图像/表格 onclick

> ID：15627992
> 
> 赞同：1
> 
> 时间：2013-03-26T01:55:02.457
> 
> 标签：php, jquery, json, cordova, mobile

我能够从我的 PhoneGap 应用程序将图像上传到我的网络服务器就好了。但我想要做的是拍照而不是让它自动上传，而是等到我在表单输入字段中输入我的名字，然后当我点击提交时，它会提交表单并上传图像。然后处理文件的 php 脚本会将名称连接到图像名称上，这样我就可以知道是谁上传了它。

我希望人们能够为比赛提交照片，但我需要一种将用户与他们提交的照片相匹配的方法。如果不是太复杂，也许还有另一种方法？

这是我上传的javascript

```
function captureSuccess(mediaFiles) {
                var i, len;
                for (i = 0, len = mediaFiles.length; i < len; i += 1) {
                    uploadFile(mediaFiles[i]);
                }

            }

            // Called if something bad happens.
            //
            function captureError(error) {
                var msg = 'Something went wrong'
                navigator.notification.alert(msg, null, 'Uh oh!');
            }

            // A button will call this function
            //
            function captureImage() {
                // Launch device camera application,
                // allowing user to capture up to 2 images
                navigator.device.capture.captureImage(captureSuccess, captureError, {limit: 2});
            }

            // Upload files to server
            function uploadFile(mediaFile) {

                var ft = new FileTransfer(),
                path = mediaFile.fullPath,
                name = mediaFile.name;

                ft.upload(path,
                          "http://www.example.com/upload.php",
                          function(result) {

                          console.log('Upload success: ' + result.responseCode);
                          console.log(result.bytesSent + ' bytes sent');
                          var user_id = Math.floor(Math.random()*1001)
                          var day_uploaded = new Date().getDay();
                          var hour_uploaded = new Date().getHours();
                          var minute_uploaded = new Date().getMinutes();
                          var sec_uploaded = new Date().getSeconds();
                          var msg = 'Your file was uploaded! Your picture ID is ' + day_uploaded + hour_uploaded + minute_uploaded + sec_uploaded;
                          navigator.notification.alert(msg, null, 'Thanks!');
                          },
                          function(error) {

                          console.log('Error uploading file ' + path + ': ' + error.code);
                          },
                          { fileName: name });   
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:15:45.400

是的你可以

```
var _uploadPhoto = function(id, name, data) {
    var _data = {
        'id' : id,
        'fileName' : name,
        'image' : data
    };
    $.ajax({
        type : 'POST',
        data : JSON.stringify(_data),
        url : 'your_url'
        success : function(data) { },
        error: function(error) { }
    });
}; 
```

# facebook - grails spring security facebook重定向uri

> ID：15627995
> 
> 赞同：0
> 
> 时间：2013-03-26T01:55:11.523
> 
> 标签：facebook, apache, tomcat, grails, spring-security

在apache后面运行tomcat时需要什么特殊配置吗？

我的 grails 应用程序在端口 80 上的 apache 后面的 tomcat 8080 上运行。当我进行 facebook 登录时，它失败并出现以下错误：

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: Invalid redirect_uri: Given URL is not allowed by the Application configuration. 
```

我的 **https.conf中有以下配置**

```
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
LoadModule proxy_module modules/mod_proxy.so
<VirtualHost *:80>
ServerName mydomain.com
<Proxy *>
AddDefaultCharset Off
Order deny,allow
Allow from all
</Proxy>

ProxyPass / ajp://localhost:8080/
ProxyPassReverse / ajp://localhost:8080/
</VirtualHost> 
```

**tomcat6 server.xml**

```
<Connector port="8080" protocol="HTTP/1.1"
connectionTimeout="20000"
redirectPort="8443" /> 
```

facebook 应用程序配置：应用程序域：mydomain.com 网站网址：[http ://mydomain.com:8080/myapp](http://mydomain.com:8080/myapp)