# StackOverflow 问答 15473000-15473999

# c# - 调试黑盒 DbContext.SaveChanges() 时没有

> ID：15473002
> 
> 赞同：1
> 
> 时间：2013-03-18T09:07:13.510
> 
> 标签：c#, entity-framework-5

我有一个非常简单的示例程序来开始掌握 Entity Framework 5 的实际情况。我已经阅读了相当多的理论，一切似乎都很好，但我立即遇到了保存到数据库的问题。

我遇到的问题是 DbContext.SaveChanges() 既没有抛出异常（我预期的）也没有保存数据。

继承人的代码：

```
 public class PhysicalAddressType
        {
            [Key]
            public long AddressTypeIndexCode { get; set; }

            public string TName { get; set; }

            public long ClientId { get; set; }

            public Guid UserId { get; set; }

            public DateTime LastModified { get; set; }

        }

        public class TestContext : DbContext
        {
            public TestContext() : base("Name=Basd.ContactManagement") { }

            public DbSet<PhysicalAddressType> Addresses { get; set; }
        }

     static void Main(string[] args)
            {
                try
                {

                    using (var ctx = new TestContext())
                    {
                        var ph = new PhysicalAddressType();
                        ph.ClientId = 500;
                        ph.UserId = Guid.NewGuid();
                        ph.TName = "test1";
                        ph.LastModified = DateTime.Now;
                        ctx.Addresses.Add(ph);
                        ctx.SaveChanges();

                    }
                }
                catch (Exception ex)
                {
                    System.Diagnostics.Debug.WriteLine(ex.Message);
}
        } 
```

我希望代码会引发异常，因为我没有提供到数据库中表的映射。这是表的架构：

```
CREATE TABLE [erp_crm].[PhysicalAddressType](
    [AddressTypeIndexCode] [bigint] IDENTITY(1000,1) NOT NULL,
    [TName] [nvarchar](50) NOT NULL,
    [ClientId] [bigint] NULL,
    [UserId] [uniqueidentifier] NULL,
    [LastModified] [smalldatetime] NOT NULL,
 CONSTRAINT [PK_PhysicalAddressType] PRIMARY KEY CLUSTERED 
(
    [AddressTypeIndexCode] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

但它不会也不会在数据库中存储记录。

所以我的问题是此时我该如何调试？我的第一个问题是它是否甚至击中数据库，不是因为连接字符串错误（在 app.config 中），而是出于其他原因。“静默失败”是 EF 体验的真正组成部分吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T09:21:02.430

> 我的第一个问题是它是否会影响数据库，

为此，您可以使用[SQL Server 探查器](http://msdn.microsoft.com/en-us/library/ms181091.aspx)（或来自独立供应商的任何其他自定义探查器）。它显示正在执行的所有原生连接和查询。我还建议您尝试从上下文中读取以检查您是否点击了数据库。

> 所以我的问题是此时我该如何调试？

您是否尝试过使用[逐步进入框架源代码](http://msdn.microsoft.com/en-us/library/cc667410.aspx)调试功能？

您也确实将[源代码](http://entityframework.codeplex.com/)作为最后的手段（您可以构建它并针对生成的二进制文件调试您的应用程序）。

# c - 将 Fortran/C 程序从 32 位升级到多架构

> ID：15473004
> 
> 赞同：2
> 
> 时间：2013-03-18T09:07:22.063
> 
> 标签：c, pointers, fortran, 32bit-64bit, fortran-iso-c-binding

我正在查看一个稍旧的 Fortran 程序，它带有适用于 32 位系统的 C 调用，但会引发对 64 位编译器的警告和担忧。该程序将指向动态分配内存的 C 指针的地址存储为`int`，在 Fortran 端共享为`INTEGER`。我担心的是，在 64 位整数系统上，来自 C 指针的转换可能大于可以存储为`int`/的值`INTEGER`。我已经使用两个文件将现有程序简化为这个示例。

# Fortran： `this.f`

```
 program this
        integer,pointer :: iptr
        allocate(iptr)
        call that_allocate(iptr)
        write(*,'(A, Z12)') 'Fortran: iptr address', iptr
        call that_assemble(iptr)
        call that_free(iptr)
        end program this 
```

# C：`that.c`

```
#include <stdlib.h>
#include <stdio.h>

typedef struct data {
    int a;
    float b;
} data;

void that_allocate_(int* iptr)
{
    data *pData = calloc(1, sizeof(data));
    *iptr = (int)pData;
    printf("C: Allocated address %p (or %d)\n", pData, pData);
    return;
}

void that_assemble_(int* iptr)
{
    data *pData = (data *) *iptr;
    pData->a = 42;
    pData->b = 3.1415926;
    return;
}

void that_free_(int* iptr)
{
    data *pData = (data *) *iptr;
    printf("C: Freeing data %d and %g at %p\n", pData->a, pData->b, pData);
    free(pData);
    return;
} 
```

# 编译

`-m32`该程序可以使用32 位（这里没有问题）和`-m64`64 位的 GNU 编译器进行编译。编译 C 代码会引发一些警告：

```
$ gcc -m64 -c that.c
that.c: In function ‘that_allocate_’:
that.c:12: warning: cast from pointer to integer of different size
that.c: In function ‘that_assemble_’:
that.c:19: warning: cast to pointer from integer of different size
that.c: In function ‘that_free_’:
that.c:27: warning: cast to pointer from integer of different size 
```

而其余的编译和链接都很好，并且程序可以正常工作：

```
$ gfortran -m64 -o prog this.f that.o
$ ./prog 
C: Allocated address 0x1130b40 (or 18025280)
Fortran: iptr address     1130B40
C: Freeing data 42 and 3.14159 at 0x1130b40 
```

# 问题

虽然我看到`calloc`返回的地址可以满足 4 字节整数的数据限制，但是否存在`calloc`返回更大整数地址的风险？强制转换`(intptr_t)`将使编译警告静音，但我怀疑如果尝试将指针强制转换为截断地址，它将截断任何更高位和“分段错误”。它是否正确？

我该怎么办？修复需要在 Fortran 代码上进行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T10:11:03.997

是的，存在潜在的位数问题。如果您希望您的代码在面对编译器和平台更改时保持稳健，那么您应该做很多事情，其中​​大部分依赖于 Fortran 2003 的 C 互操作性特性。这些语言特性由最近的 gfortran 支持和最积极维护的 Fortran 编译器。

从您的示例中不清楚 Fortran 代码是否真的需要知道指向结构的指针的值`data`作为整数（在您的示例中您打印此值，但我怀疑这只是为了调试）。如果 Fortran 代码只需将指针视为不透明句柄，则 ISO_C_BINDING 内部模块中的 C_PTR 类型与 C 指针等效。如果由于某种原因 Fortran 代码确实需要将指针的值作为整数知道，那么 C_INTPTR_T 类型的整数（同样来自 ISO_C_BINDING 内部模块）是合适的。更进一步，如果您希望 fortran 代码能够使用实际结构本身，那么您可以定义一个 BIND(C) 派生类型并以各种方式使用它。

此外，您的 C 代码假定 Fortran 编译器使用特定的调用约定，包括过程名称被修改以形成链接器名称的方式。您可以在 Fortran 端的接口块中使用 BIND(C,NAME='xxx') 属性来指定 Fortran 编译器使用与其配套 C 编译器兼容的调用约定，并指定过程的 C 名称.

请注意，鉴于您的示例的其余部分，整数及其后续分配的 POINTER 声明不相关。

全部完成（在自由形式中，固定形式已经有一段时间了）：

```
PROGRAM this
  USE, INTRINSIC :: ISO_C_BINDING, ONLY: C_PTR, C_INTPTR_T
  IMPLICIT NONE
  ! Interfaces required due to BIND(C).  Also allows the Fortran 
  ! compiler to do better error checking.  Note that the default 
  ! binding label is a lowercase variant of the Fortran name, but
  ! we specify it explicitly here anyway for clarity.
  INTERFACE
    SUBROUTINE that_allocate(the_c_ptr)  &
        BIND(C,NAME='that_allocate')
      USE, INTRINSIC :: ISO_C_BINDING, ONLY: C_PTR
      IMPLICIT NONE
      ! Note passing a pointer by reference.
      TYPE(C_PTR), INTENT(OUT) :: the_c_ptr
    END SUBROUTINE that_allocate

    SUBROUTINE that_assemble(the_c_ptr)  &
        BIND(C,NAME='that_assemble')
      USE, INTRINSIC :: ISO_C_BINDING, ONLY: C_PTR
      IMPLICIT NONE
      ! Note passing a pointer by value.
      TYPE(C_PTR), INTENT(IN), VALUE :: the_c_ptr
    END SUBROUTINE that_assemble

    SUBROUTINE that_free(the_c_ptr)  &
        BIND(C,NAME='that_free')
      USE, INTRINSIC :: ISO_C_BINDING, ONLY: C_PTR
      IMPLICIT NONE
      ! Note passing a pointer by value.
      TYPE(C_PTR), INTENT(IN), VALUE :: the_c_ptr
    END SUBROUTINE that_free
  END INTERFACE

  TYPE(C_PTR) :: the_c_ptr
  CALL that_allocate(the_c_ptr)
  ! Use transfer to convert the C address to an integer value.
  PRINT "('Fortran: ptr address',Z12)",  &
      TRANSFER(the_c_ptr, 0_C_INTPTR_T)
  CALL that_assemble(the_c_ptr)
  CALL that_free(the_c_ptr)
END PROGRAM this 
```

并在 C 端进行简化：

```
#include <stdlib.h>
#include <stdio.h>

typedef struct data {
  int a;
  float b;
} data;

void that_allocate(data** pData)
{
    *pData = (data*) calloc(1, sizeof(data));
    printf("C: Allocated address %p\n", *pData);
    return;
}

void that_assemble(data* pData)
{
    pData->a = 42;
    pData->b = 3.1415926;
    return;
}

void that_free(data* pData)
{
    printf("C: Freeing data %d and %g at %p\n", pData->a, pData->b, pData);
    free(pData);
    return;
} 
```

# android - timer.setText("setTextHere") 在线程内不起作用

> ID：15473006
> 
> 赞同：1
> 
> 时间：2013-03-18T09:07:25.617
> 
> 标签：android, multithreading, settext

`timer.setText("setTextHere")`在线程内部不起作用。

```
Thread thread1 = new Thread(){ 

            TextView timer;
            int t;
            public void run(){
                timer=(TextView) findViewById(R.id.timer);      
                try{
                    timer.setText("setTextHere");
                    sleep(5000);

                }
                catch(Exception e){ 
                    e.printStackTrace();                        
                }
                finally{
                    Intent new1 = new Intent("com.example.app1.MENU");
                    startActivity(new1);                    
                }                   
            }               
        };
        thread1.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:21:17.093

```
_t = new Timer();
_t.scheduleAtFixedRate( new TimerTask() {
        @Override
        public void run() {
            _count++;
            runOnUiThread(new Runnable() //run on ui thread
             {
              public void run() 
              {
                _tv.setText( "" + _count );
              }
             });
        }
    }, 1000, 1000 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:12:00.410

您无法从后台线程触摸 UI。尝试使用 AsyncTask [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T16:47:54.360

您可以在初始化线程之前使用它并初始化 setText

```
 Thread thread1 = new Thread(){ 

        int t;
        public void run(){    
            try{
                sleep(5000);

            }
            catch(Exception e){ 
                e.printStackTrace();                        
            }
            finally{
                Intent new1 = new Intent("com.example.app1.MENU");
                startActivity(new1);                    
            }                   
        }               
    };
    TextView timer;
    timer=(TextView) findViewById(R.id.timer);  
    timer.setText("setTextHere");
    thread1.start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T09:28:57.333

在你的 onCreate() 添加：

```
h = new Handler(); 
```

在某处添加这个：

```
class SetText implements Runnable {
    public void run() {
       // do UI task
       timer.setText("setTextHere");
    }
} 
```

在 someFunction() 上修改如下：

```
...
try 
{
    h.post( new SetText() );
    sleep(5000);
}
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T10:06:01.093

```
final TextView timer = (TextView) findViewById(R.id.timer);
new Thread(new Runnable() {
    public void run() {
        try {
            Thread.sleep(2000);
            timer.post(new Runnable() {
                public void run() {
                    timer.setText("setTextHere");
                }
            });
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            Intent new1 = new Intent("com.example.app1.MENU");
            startActivity(new1);
        }
    }
}).start(); 
```

# python - 如何继承模型和删除不需要的字段 OpenERP。？

> ID：15473012
> 
> 赞同：0
> 
> 时间：2013-03-18T09:07:36.040
> 
> 标签：python, xml, openerp

在我的模型类中，我继承了 hr.employee 模型。但我不需要该模型中的某些字段。如何删除这些字段。？

```
class madulsima_plucker(osv.osv):
    _name = "madulsima.plucker"
    _description = "This table is for keeping personal data of madulsima pluckers"
    _inherit = "hr.employee"
    _columns = {
        'reg_no': fields.char('Registration Number', size=256, required=True),
        'worker_name': fields.char('Worker Name', size=256, required=True)
    }

madulsima_plucker() 
```

我还尝试使用 view.xml 根据开发人员书籍删除这些字段。它不起作用。我的问题在哪里。？

```
<?xml version="1.0"?>
<openerp>
    <data>
        <!-- 1st part of the sim_view start -->
        <record model="ir.ui.view" id="madulsima_plucker_form">
            <field name="name">madulsima.plucker.form</field>
            <field name="model">madulsima.plucker</field>
            <field name="inherit_id" ref="hr.view_employee_form" />
            <field name="type">form</field>
            <field name="arch" type="xml">
                <notebook position="inside">
                    <page string="Madulsima Plucker Fields">
                        <field name="reg_no" />
                        <field name="worker_name" />
                        <field name="ssnid" position="replace" />
                        <field name="sinid" position="replace" />
                    </page>
                </notebook>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_plucker_registration">
            <field name="name">Plucker Registration</field>
            <field name="res_model">madulsima.plucker</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
        </record>

        <menuitem id="menu_madulsima_plucker" name="Madulsima/Checkroll" />

        <menuitem id="menu_madulsima_plucker_registration" name="Plucker Registration"
            parent="menu_madulsima_plucker" action="action_plucker_registration" />
    </data>
</openerp> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-10T07:07:23.340

你`arch`错了。用这个：

```
 <field name="arch" type="xml">
           <field name="ssnid" position="replace" />
           <field name="sinid" position="replace" />
        </field> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-11T12:38:55.117

使用属性不可见......我认为这是最好的解决方案不要替换它也许其他领域取决于它

```
<field name="arch" type="xml">
    <xpath expr="//field[@name='ssnid']" position="attributes">
      <attribute name="invisible">True</attribute>
    </xpath>
</field> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T03:57:45.053

```
<field name="ssnid" position="attributes" >
    <attribute name="invisible">True</attribute>
</field> 
```

在您的 view.xml 中，只需使用上面的代码来隐藏您想要隐藏的任何字段，将其更改为`<field name="ssnid"`

# jsf - 如何为多个输入重用查找（弹出）组件

> ID：15473013
> 
> 赞同：0
> 
> 时间：2013-03-18T09:07:38.820
> 
> 标签：jsf, richfaces, composite-component

这是我想要实现的目标：我有一个页面，其中包含许多（自动完成）输入，用于选择相同类型的对象（都在不同的上下文中）。每个输入都必须提供打开弹出窗口的能力，用户可以在其中进行特定查找（使用更多过滤器选项并从搜索结果列表中选择所需的对象）。

所以我认为这将是完美的可重用组件并编写了以下复合组件：

```
<cc:interface>
    <cc:attribute name="value" type="MySelectedObjectType" />
    <cc:attribute name="render" type="java.lang.String" />
</cc:interface>
<cc:implementation>
    <rich:popupPanel id="dialog" header="#{msg.search}" autosized="true">
        <h:form id="form">
            <h:panelGroup class="searchPane" layout="block">
                <h:panelGrid>
                    <o:outputLabel for="name" value="#{msg.name}" />
                    <h:inputText id="name" value="#{lookupModel.name}" />

                    ...
                </h:panelGrid>
                <div class="extSearchPaneButton-cntr">
                    <a4j:commandButton value="Suchen" action="#{lookupModel.doSearch}" render="searchResult" styleClass="buttonDefault" />
                </div>
            </h:panelGroup>
            <h:panelGroup id="searchResult" layout="block" class="searchResult-cntr">
                <rich:dataTable id="resultTable" value="#{lookupModel.searchResults}" var="entry" >
                    <rich:column>
                        #{entry.name}
                    <rich:column>
                    ...
                    <a4j:ajax event="rowclick" listener="#{lookupModel.selectionListener}" />
                </rich:dataTable>
            </h:panelGroup>
            <div class="resultButton-cntr">
                <a4j:commandButton id="apply" value="#{msg.apply}" execute="searchResult" oncomplete="#{rich:component('dialog')}.hide()"
                    styleClass="button" render="#{cc.attrs.render}">
                    <f:setPropertyActionListener target="#{cc.attrs.value}" value="#{lookupModel.selected}" />
                </a4j:commandButton>
                <a4j:commandButton id="cancel" value="#{msg.cancel}" onclick="#{rich:component('dialog')}.hide(); return false;"
                    styleClass="button" />
            </div>
        </h:form>
    </rich:popupPanel>
</cc:implementation> 
```

lookupModel 是一个 ViewScoped（使用 RequestScope 无法在数据表中选择一行）ManagedBean，它独立于页面上使用的 ManagedBean（用于在另一个页面中重用它）。

我现在的问题是，如果我有 5 个使用此弹出窗口的输入，我必须在我的页面中放置 5 个弹出窗口，使组件树和生成的页面大小膨胀，一次只能激活一个。我想知道必须做些什么才能在我的页面上只使用一个查找组件并将其重用于需要它的每个输入。我面临的问题是，我不知道如何移交查找应在应用时设置的目标值（请参阅 setPropertyActionListener）。

作为旁注，每次显示查找时，它的内容都会被重置（重置支持 bean 并呈现页面内容），无需记住最后的搜索结果。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:47:55.637

怀疑这是否可能。

对于这样的事情，我或多或少会跳过 JSF 进行渲染，并制作一个 Javascript 来完成您的复合组件现在所做的事情。然后更改组件，使其简单地使用所需数据初始化 Javascript 并处理来自 Javascript 的输入，以便将其解析为托管 bean。

# batch-file - 从提升的脚本以受限用户身份启动进程

> ID：15473015
> 
> 赞同：6
> 
> 时间：2013-03-18T09:07:47.383
> 
> 标签：batch-file, console, uac, elevation, process-elevation

我有一个运行一些 bat 文件的提升控制台。让这个控制台在提升模式下运行是强制性的，因为它能够执行一些任务，比如管理网络共享等，而无需请求权限。但有时脚本还必须启动一些不希望运行提升的应用程序。所以我们希望我们的高架球棒在非高架模式下开始应用。在 Windows 上有没有内置的方法可以做到这一点？进程是使用 DOS 命令 START 启动的。

顺便说一句，该机器是Windows 7 Ultimate Edition x64。

我知道这个问题已经在许多问题中以编程方式进行了讨论（[这收集了](https://stackoverflow.com/questions/3927790/start-non-elevated-process-from-elevated-process)许多问题），但我们的要求是在 cmd 上运行的 bat 脚本，以及任何可能有助于我们任务的独立可执行文件，如 nircmd、7z 等。

*澄清：我们已经有一个计划任务启动控制台提升，提升控制台不是这个答案的问题。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T22:33:04.347

**内置 Windows 方式**：`START RUNAS ...`允许您以受限用户身份运行进程。这是一个例子：

```
runas /trustlevel:0x20000 cmd.exe 
```

无论如何，以这种方式执行的进程的执行权限与另一个从启用 UAC 的 UI 启动的进程的执行权限之间存在一些内部差异（explorer.exe 通过正常的用户交互，我的意思是，从文件浏览器或从开始菜单执行）。

*   在通过 runas（右）启动的过程中，我们错过了一些禁用的权限： ![显示执行权限差异的 Process Explorer 屏幕截图](../Images/39e70d105192f05b26d97e79d7160437.png)
*   在通过 runas（右）启动的进程中，管理员对进程设置了一些权限： ![进程资源管理器屏幕截图显示了进程的用户权限差异](../Images/23fca4727e23235fd54f596605827ad4.png)

**第三方应用方式：我们可以使用**[PSExec](http://technet.microsoft.com/es-es/sysinternals/bb897553)来实现我们的目标，这是一个独立的可执行文件，我们可以在 Windows Sysinternals 的 PSTools 上找到。这是一个例子：

```
psexec -l -d cmd.exe 
```

我已经深入研究了这个问题，我注意到任何运行权限或安全标志都没有区别。

来自[Microsoft Technet 博客](http://blogs.technet.com/b/markrussinovich/archive/2006/03/02/running-as-limited-user-the-easy-way.aspx)：

> PsExec 使用[CreateRestrictedToken API](http://windowssdk.msdn.microsoft.com/library/default.asp?url=/library/en-us/secauthz/security/createrestrictedtoken.asp)创建称为令牌的安全上下文，这是其自身的精简版本，删除了管理权限和组成员身份。在生成一个类似于 Windows 分配给标准用户的令牌后，Process Explorer 调用 CreateProcessAsUser 以使用新令牌启动目标进程。

这些是我经过数小时研究后得到的最好的结论；任何可以提供更多详细信息的人都将受到欢迎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:17:06.473

真的不是我的专业领域，但会`START RUNAS ...`或可能`AT`符合要求吗？

# php - PHP（已弃用）mysql 模块与 MySQLi 和 PDO 的漏洞

> ID：15473019
> 
> 赞同：12
> 
> 时间：2013-03-18T09:07:57.457
> 
> 标签：php, mysql, web-services, security, sql-injection

我负责维护和扩展一个 PHP 代码库，该代码库始于 2007 年并使用原始`mysql`模块。所有用户输入都使用转换为预期为数字的值进行转义，`mysql_real_escape_string()`使用单引号对字符串进行引用，可能会进一步过滤`in_array()`字段`ENUM`或字段`array_intersect()`。`SET`然后，所有不受约束的字符串字段都通过`htmlspecialchars()`或者`htmlentities()`在输出 HTML 时传递。如果一个值代表一个外键，则首先验证该键是否存在。
我相信通过严格遵循这些程序，该应用程序将尽可能安全地抵御注入和其他形式的攻击。（加分：我是对的吗？如果不是，我错过了什么？）

将此应用程序转换为`mysqli`PDO 将是一项相当大的任务（并且，为了避免意外损坏，我不想自动化）。所以最后我的问题是：**使用旧模块时是否有任何特定漏洞无法缓解`mysql`，需要迁移到新模块？**

**赏金信息：**
明确地说，我希望得到一份 CVE 编号列表或 PHP 开发人员的声明，即该`mysql`模块已针对某某日期的所有已知漏洞进行了修补。我还假设在使用该模块时遵循最佳当前实践不会使我暴露于其他攻击媒介。BCP 已经包含在将数据插入新语句之前从数据库中提取的转义数据。不断地讨论这个问题并不能真正解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T09:25:46.867

我只有两个反对意见

*   `All user input is escaped`是一个严重故障，导致[二阶喷射](http://www.cisco.com/web/about/security/intelligence/sql_injection.html#5)。“SQL 的所有动态数据”是正确的方法和措辞
*   您的帖子中没有提到任何[标识符](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)，但我不敢相信自 2007 年以来您的代码中没有包含动态标识符的查询。

还有一个小不便：几年后（可能是 3-4 年），您的 PHP 将开始发出 E_DEPRECATED 级别的错误。但它们可以简单地关闭。

无论如何，只是机械地从一个 API 转移到另一个 API 并没有太大意义。
重构您的 SQL 处理代码只是为了利用一些抽象机制，无论是 ORM、AR、QueryBuilder 还是其他任何可以从应用程序代码中清除原始 API 调用的技术。它不仅可以让您的代码不那么臃肿，而且还可以使其独立于将来会打击 PHP 开发人员的任何其他奇思妙想。

回答编辑后的问题。

旧的 mysql ext 中没有本质的漏洞。它常用的唯一**方法是易受攻击且容易出错。**
因此，与其在模块上寻找压力，不如更好地审核您的代码。如果它没有使用**集中式库**进行数据库交互，利用**准备好的语句**，很可能它很容易受到攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-06T19:55:28.233

我的回答会有些偏离，而不是回答你的具体问题，我宁愿建议一种能真正帮助你的方法。

无论将来使用 mysql 可能留下或可能出现什么漏洞，也无论您当前的代码库方法多么可靠（而不是避免）SQLinjection（不过，它似乎做得很好），我觉得您仍然会无论如何，宁愿迁移到 mysqli，但目标是通过查看短期可能性来推迟这样做，以进一步破解不安全和完全弃用的 mysql。

我建议重构。时期。就这样做吧。请记住重构，而不是在这样做时更改或扩展您的代码库 - 这是一个令人讨厌的陷阱。尽管这将是一些工作 - 重构，但只需开始您的重构过程（当然是分支的）。完成它会非常令人满意。期待一些长尾问题。

我假设您描述的每个功能都已包装，因此重构应该是相当可行的。如果事情没有被包装......（$#@！），找出一种方法来唯一地跟踪你的函数调用（包括上下文）项目范围，（可能使用正则表达式来查找它们）并替换为新的唯一到 -被使用的包装函数。首先探索这个，彻底。在半天之内，您将能够获取您需要的所有正则表达式。所以首先计划它，首先探索你的路径。

用当前（旧的）功能代码填充新的包装器，看看是否一切都照常工作。

然后开始迁移到 mysqli，并在内部重建你的包装器。

似乎是一种尽可能简单的方法，避免了所有将留在脑海中的问题和问题，尽管您尝试做任何事情来深入了解常见的 mysql。我不需要告诉你mysqli会带来什么好处，你已经知道了。此外，每隔一段时间实际一劳永逸地处理这类问题，这只是一种很好的做法。计划、讨论、分支、尝试、做、测试、完成和征服！最重要的是：确保您在重构时不会错过扩展代码库和功能范围的机会 - 您会很想这样做：只需重构即可。稍后添加、扩展或改进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-06T15:20:33.757

好的，所以我做了一些研究，我发现的关于 mysql 扩展的唯一漏洞似乎也同样影响 mysqli 扩展是[CVE-2007-4889](http://www.cvedetails.com/cve/CVE-2007-4889/) ，这是一个“安全模式绕过”漏洞，并且已经修复了很长时间以前更重要的是 mysql.so 和 mysqli.so 模块共享几乎相同的导入，可以看出 -

/usr/lib/php5/20090626/mysql.so：

```
 0x0000000000000001 (NEEDED)             Shared library: [libmysqlclient.so.18]
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
 0x000000000000000e (SONAME)             Library soname: [mysqli.so] 
```

/usr/lib/php5/20090626/mysqli.so：

```
 0x0000000000000001 (NEEDED)             Shared library: [libmysqlclient.so.18]
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
 0x000000000000000e (SONAME)             Library soname: [mysql.so] 
```

由于它们共享的导入性质，也有可能在两个模块中出现新的漏洞并且总是有可能来自这些模块之一的实际代码的独特缺陷。但到目前为止，这两个模块的漏洞记录似乎与该日期几乎相同

正如这里提到的，我会投入更多时间来审核 PHP 源代码，以确保几件事 -

1.  SQL 注入 -[参数化 SQL](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)查询是针对此类缺陷的最佳解决方案。

2.  XSS(Cross Site Scripting) - 使用 htmlspecialchars() 过滤危险字符

3.  CSRF（跨站点请求伪造） - 始终对表单执行推荐人检查，以确保数据来自正确的位置

4.  文件包含 - 确保没有用户输入可以直接影响文件的包含（require()、require_once()、include()、include_once()）

5.  文件上传 - 如果由于某种原因启用了文件上传，请确保不要让用户控制文件扩展名或保存文件并将其权限设置为“非执行”。这样做是为了防止攻击者上传恶意文件并在您的服务器上执行代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-04T10:41:23.953

我觉得没有资格明确回答您的问题，因此请谨慎使用我提供的信息，但我在管理您可能正在查看的更改方面确实有一些经验。AFAICS 但是，如果您说的是真的，您的语句应该保护您免受 XSS 和 SQL 注入。

我最近开始了将整个大型应用程序从 mysql_ 迁移到 mysqli_ 的过程，在此过程中，我还设定了所有用户输入都应通过准备好的语句的目标。

针对 YC 的以下公平评论进行编辑：为避免歧义，我总是将用户通过准备好的语句生成的任何内容放入其中，即使它已经存储在数据库中。我尽可能避免使用重新插入用户数据，因为它不可靠，因此系统功能往往依赖于自动生成的索引。

平心而论，页面很短（不超过 1000 行），因此修复每个页面不需要很长时间，并且它们几乎没有查询，因此性能下降并不明显，而且自从我编写原始代码以来，服务器技术的改进肯定会吃掉. 我怀疑您会发现转义等的减少将远远超过对准备语句的任何性能影响，尽管您必须检查它是否至关重要。

在进行这次审查时，我在我的代码中发现了多少漏洞，这让我感到沮丧（我在编写代码时尽可能地包含了安全性，并为自己设置了与你的规则大致相同的规则），最终我发现需要重写大代码块以提高安全性。由于更丰富的经验和代码调整，性能也显着提高。

我要进行更改的方式是将 mysqli 连接添加到我的数据库头文件。所有新代码都使用它。当我找到时间时，我正在更新旧代码并使用没有旧 mysql 连接的头文件测试每个页面。在开发环境中以这种方式找到你错过的部分非常快，这可能是一种很好的利用时间的方法，否则会浪费时间，因为每个页面只需几分钟即可更新，因此可以在大脑衰退期间完成期间。

关于二阶注入 BTW 的注释，因为这是我内置的最常见的漏洞：

大多数 SQL 注入预防都假设注入攻击只会在登录时发生，来自恶意的非注册用户，一旦被挫败将永远不会返回，并且注册用户是可以信任的。不是这样。

可以想象，代码可以通过您的保护注入，然后再使用。这不太可能奏效，因为它严重依赖于笨拙的数据库和应用程序设计，但世界上一些最聪明的人是黑客。为什么要让他们的生活更轻松？

如果您的 sql 很简单并且您的应用程序使用先前从数据库中获得的数据进行任何子查询，则攻击的可能性更大。请记住

```
' OR 1=1 gets converted to
\' OR 1=1 by mysql_real_escape_string but is stored as 
' OR 1=1 in the db 
```

因此，如果检索并放入 PHP 变量中，然后在 sql 查询中未转义使用该变量，则它可能会导致问题，就像它从未被转义一样。如果您只对所有查询使用 prep 语句，则风险会永久消失，但请记住 prep 语句仍将存储恶意代码，因此当您下次需要使用已输入的数据时，您仍然必须再次使用准备好的语句。

[这个博客](http://www.esecforte.com/blog/second-order-sql-injection/)给出了一个体面的讨论和例子，所以我不会进一步扩展，但是如果你确保所有用户输入数据都通过准备好的语句传递，如果它被用作查询的一部分，即使它已经存储在db，你应该是安全的。

[冒着重复的风险，对OWASP 站点](https://www.owasp.org/%E2%80%8E)变得非常友好也是值得的，该站点具有有价值的安全讨论。

# oop - 什么是最适合逐帧视频处理应用程序的设计模式？

> ID：15473023
> 
> 赞同：0
> 
> 时间：2013-03-18T09:08:25.550
> 
> 标签：oop, design-patterns, video, computer-vision

我将编写一个加载视频的计算机视觉应用程序，逐帧进行一些图像处理，然后将其结果与原始视频并排显示。我还想实现播放、暂停和停止按钮以及其他 gui 的东西。

我读过的所有关于计算机视觉的教程和文章都是程序化的，但我想以 OOP 的方式来做。

这个问题的最佳设计模式是什么？

有关其他信息，我想我将为这个项目使用 OpenCV (C++) 和 Qt。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:33:09.573

我将从一个类似但不同的例子开始，它是一个真实的例子。

在实践中，比如说，当您拥有一个本地 C++ 库时，您可以创建一个 Java 类，通过本地方法访问该库（每个方法都是 C/C++ 函数调用的 Java 包装器），然后使用 Java 中的该类。（通常那个包装类从概念上看有点难看，就是它包含了奇怪的辅助方法、原生资源句柄等）

OO设计是关于分配职责；在上述情况下，您将与该本地库交互的责任分配给一个类。然后，您让其他类根据应用程序逻辑使用该类。也许，您为该库包装类创建了一个包装器（一个提供更合理接口的适配器）。

现在谈谈你的情况。

您很可能有一些算法，它们要么已经编码，要么可以直接编码。*我会让算法尽可能地贴近书本。*（它不是 Java 的本机库，而是一本书中的算法库。）然后，您创建使用这个算法书包装类的任何类。

至于 UI，您创建一个普通的应用程序 UI。创建与数据的内部结构（或该数据可能发生的事件）匹配的 UI 是错误的；您只能使用“数据就绪”事件。

原因是你的 UI 的变化不能影响你的数据和算法，你的算法和数据结构的变化不能影响 UI。

# yii - 在 Controller 中获取 portlet 作为 HTML 变量？

> ID：15473028
> 
> 赞同：0
> 
> 时间：2013-03-18T09:08:40.700
> 
> 标签：yii, portlet

我有一个名为 CartController.php 的控制器，我有一个名为 _cartItem.php 的 portlet/view。如何以编程方式将 portlet 呈现给 PHP 变量，以便可以将其返回给另一个函数？IE。做这样的事情：

```
$data = new stdClass();
$data->productID = 123;
$data->title = 'My Title';

$HTML = someVoodoo('_cartItem', $data);

return $HTML; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:18:36.493

你有没有尝试过;

```
$HTML = $this->renderInternal('_cartItem', $data, true); 
```

这是 renderInternal() 的链接：[http ://www.yiiframework.com/doc/api/1.1/CBaseController#renderInternal-detail](http://www.yiiframework.com/doc/api/1.1/CBaseController#renderInternal-detail)

# javascript - 随机播放图像 javascript/jquery

> ID：15473029
> 
> 赞同：0
> 
> 时间：2013-03-18T09:08:46.893
> 
> 标签：javascript, jquery, arrays, image, list

如何让这个脚本插入所有图像，而不仅仅是其中一个？我只想让它随机插入所有图像。

```
<script type="text/javascript">
    var images = ['basketball.jpg', 'running.jpg', 'tennis.jpg', 'running-woman.jpg', 'swimming.jpg', 'cycling.jpg'];
$('<img src="images/large/' + images[Math.floor(Math.random() * images.length)] + '">').appendTo('#images');
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T09:13:24.397

要保持插入顺序**随机**，请使用 while 循环：

```
<script type="text/javascript">
    var images = ['basketball.jpg', 'running.jpg', 'tennis.jpg', 'running-woman.jpg', 'swimming.jpg', 'cycling.jpg'];

    while (images.length !== 0) {
        var index = Math.floor(Math.random() * images.length);
        $('<img src="images/large/' + images.splice(index, 1) + '">').appendTo('#images');
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:10:40.877

使用需要使用循环来附加所有图像....

```
<script type="text/javascript">
    var images = ['basketball.jpg', 'running.jpg', 'tennis.jpg', 'running-woman.jpg', 'swimming.jpg', 'cycling.jpg'];

    $.each(images,function(i,v){
     $('<img src="images/large/' + images[i] + '">').appendTo('#images');
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T09:28:52.250

您的代码选择一个图像，然后显示它。您需要对其进行重构，以便它会多次执行此操作。

首先，分解操作：

```
 var images = ... // fill array

    pick = Math.floor(Math.random() * images.length); // choose image

    tag = '<img src="images/large/' + images[pick] + '>'; // make tag

    $(tag).appendTo('#images'); // add tag 
```

然后，设置循环重复，直到数组耗尽：

```
 var images = ... // fill array

    while (images.length>0) {
       pick = Math.floor(Math.random() * images.length); // choose image
       tag = '<img src="images/large/' + images[pick] + '>'; // make tag
       images = images.splice(i,1); // take picked image out of array
       $(tag).appendTo('#images'); // add tag
    } 
```

我还没有运行这个，检查我用于“拼接”的数组索引是否正确，以便取出一张图像并从数组中取出正确的一张。您还可以获取 Array 删除功能，例如来自[http://ejohn.org/blog/javascript-array-remove/](http://ejohn.org/blog/javascript-array-remove/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T09:11:41.543

```
<script type="text/javascript">
    var images = ['basketball.jpg', 'running.jpg', 'tennis.jpg', 'running-woman.jpg', 'swimming.jpg', 'cycling.jpg'];

   for(var i=0;i<images.length;i++)
     $('<img src="images/large/' + images[i] + '">').appendTo('#images');

</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-22T11:54:00.453

您可以使用 Fisher Yates Shuffle 算法在 javascript 中随机播放图像

您可以将图像集合存储在数组中。如以下代码所示，您可以将数组传递给函数并构造您的 shuffle :)

```
def fisherYatesShuffle(array):
if len(array) < 2:
    return

firstElementIndex = uniform(0, len(array))
swap(array[0], array[firstElementIndex])
fisherYatesShuffle(array[1:]) 
```

# vim - 获取包含真实文件的缓冲区列表的最佳方法是什么？

> ID：15473034
> 
> 赞同：2
> 
> 时间：2013-03-18T09:09:13.667
> 
> 标签：vim

在我的 Vimscript 中，我想遍历所有/仅包含磁盘上文件的缓冲区。目前我这样做是为了获取缓冲区 id 数组：

`filter(range(1, bufnr('$')), 'buflisted(v:val)')`

然后稍后我使用以下命令测试每个缓冲区 ID：

`filereadable(fnamemodify(bufname(buffer_id), ':p'))`

我已经阅读了关于buflisted、bufloaded 和friends 的文档，但我仍然不清楚它们之间的区别。因此，我不确定我上面的片段是否是最佳的。

此外，这似乎是一项常见的任务，它会有一个内置函数，但我找不到。

这是最好的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:27:26.347

我猜“常用方式”只是使用`:bufdo`并让它失败`:write`未命名的、未持久的文件，但在插件中，做更多检查是件好事。

你的方法对我来说很好。`:help 'buflisted'`说：

> 如果它被重置，它不会用于 ":bnext"、"ls"、缓冲区菜单等。这个选项由 Vim 重置，用于仅用于记住文件名或标记的缓冲区。Vim 在开始编辑缓冲区时设置它。

所以假设你的插件做了类似的事情`:bufdo`，使用`buflisted()`是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:34:52.093

我认为 buffer_id -> 文件名转换可以通过以下方式更好地完成：

```
expand('#' . buffer_id . ':p') 
```

这可以与缓冲区列表结合到这个单行中：

```
filter(range(1, bufnr('$')), 'buflisted(v:val) && filereadable(expand("#" . v:val . ":p"))') 
```

# android - 将架构部署到 nexus

> ID：15473041
> 
> 赞同：1
> 
> 时间：2013-03-18T09:09:36.457
> 
> 标签：android, maven

`mvn archetype:create-from-project`我使用该命令从现有项目创建了一个原型。然后我使用 mvn deploy 将architype部署到我的nexus repo。现在其他开发人员如何使用这种架构？我可以`mvn archetype:generate -DarchetypeCatalog=local`用来访问本地机器上的原型安装，但是一旦我使用了 mvn deploy，其他开发人员可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:13:25.527

当您创建原型时，您为它分配了一个组和 artefactid，所以现在您可以运行以下命令。我还假设您已经将人工制品部署到 nexus（尽管您在问题中提到了这一点）并且所有开发人员计算机都已配置 maven 以使用您的本地 nexus 存储库（这很重要）

```
mvn org.apache.maven.plugins:maven-archetype-plugin:2.0-alpha-4:generate \
     -B -DarchetypeGroupId=<archetype groupId>           \
     -DarchetypeArtifactId=<archetype artifactId>        \
     -DarchetypeVersion=<archetype version>              \
     -DgroupId=new_project_group_id                      \
     -DartifactId=new_project_artefact_id                \
     -Dversion=1.0.0-SNAPSHOT 
```

这就是我运行的命令，以根据我们工作中的原型创建项目。你可能想知道原型插件有一个更新的版本可用，但是这个命令有效，所以我们没有改变它:)。

# xss - 如何为 ibm http 服务器做安全配置？

> ID：15473042
> 
> 赞同：0
> 
> 时间：2013-03-18T09:09:42.030
> 
> 标签：xss, httpserver, ibmhttpserver

我们正在使用 IBM HTTP Server 7.0 版

需要与 IBM http 服务器中的跨站点脚本预防相关的帮助。

以下链接中提到的 Sun Java System Web Server 7.0 中的跨站点脚本预防： [https ://blogs.oracle.com/meena/entry/cross_site_scripting_prevention_in](https://blogs.oracle.com/meena/entry/cross_site_scripting_prevention_in)

是否有任何与 IBM http server 相关的配置设置？

我们如何在 ibm http 服务器中进行实体编码或过滤设置？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:26:45.130

IHS 不包含用于修改响应正文或清理传入 URL 的模块。您可以从 Apache 构建自己的 mod_substitute 或分别使用 mod_security，但它们不包括在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-25T15:02:48.040

是的，可以在您的 IHS 中实施 XSS 保护。要设置它，将以下行添加到您的 httpd.conf

```
<IfModule mod_headers.c>
    Header set X-XSS-Protection "1; mode=block"
<IfModule> 
```

验证您的 IHS 页面的标题，它将如下所示

![xss-保护](../Images/d4340a4fde50fdb726c322ff350acbc6.png)

# c# - 创建一个 TextBoxSearch 以从 ListView WPF 中过滤

> ID：15473048
> 
> 赞同：4
> 
> 时间：2013-03-18T09:10:01.330
> 
> 标签：c#, wpf, listview, mvvm

我正在创建一个应用程序，允许用户`EntityFramework`使用 WPF 将一些员工详细信息添加到模型中。

到目前为止，我有一个`ListView`代表员工姓名的列表，当您选择员工姓名时，它会选择另一个中的特定数据`ListView`。我已经使用 a`Predicate`和 a完成了这一点`ICollectionSource`。

但是我现在想要实现的，是有一个所谓的搜索引擎。因此，当用户在 a 中输入`TextBox`员工姓名时，它会根据在搜索框中输入的内容过滤员工姓名的名称。

我已使用[此链接](http://joshsmithonwpf.wordpress.com/2007/06/12/searching-for-items-in-a-listbox/)作为指南，但我不太确定如何在我自己的设计中实现它；在示例中，他们使用了 a`Resource`并使用了`Array`.

这是我尝试过的，使用`Predicate`;

```
 private EmployeeListViewModel()
        : base("")
    {
        EmployeeList = new ObservableCollection<EmployeeViewModel>(GetEmployees());
        this._view = new ListCollectionView(this.employeeList);
    }

    private ListCollectionView _view;
    public ICollectionView View
    {
         get { return this._view; }
    }

    private string _TextSearch;
    public string TextSearch
    {
        get { return _TextSearch; }
        set
        {
            _TextSearch = value;
            OnPropertyChanged("TextSearch");

            if (String.IsNullOrEmpty(value))
                View.Filter = null;
            else
                View.Filter = new Predicate<object>(o => ((EmployeeViewModel)o).FirstName == value);
        }
    } 
```

在我看来;

```
<TextBox Height="23" Name="txtSearch" VerticalAlignment="Bottom" Margin="70,0,0,183" Width="100" Grid.Row="1"
          Text="{Binding TextSearch, UpdateSourceTrigger=PropertyChanged}"/> 
```

但是似乎发生的是当我输入一些东西时，它会抛出这个异常；

`Object reference not set to an instance of an object.`

所以我的问题是，我怎样才能实现这一点，以便它实际上使我能够过滤搜索框中的名称列表？

任何帮助将不胜感激或指导如何实现这一目标。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T13:03:50.437

好的，创建测试项目后我无法重现您的异常

## 这是我的工作代码：

**主窗口.xaml**

```
<Window x:Class="gregory.bmclub.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <TextBox Text="{Binding TextSearch,UpdateSourceTrigger=PropertyChanged}"/>
        <ListView Height="380" HorizontalAlignment="Left" Name="lsNames" VerticalAlignment="Top" Width="170" 
             ScrollViewer.VerticalScrollBarVisibility="Visible" 
             ScrollViewer.HorizontalScrollBarVisibility="Visible" 
             SelectedItem="{Binding SelectedEmployee}" 
             ItemsSource="{Binding View}" Grid.RowSpan="2" Grid.Row="1">
            <!--ItemsSource changed to "View"-->
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="FirstName" DisplayMemberBinding="{Binding FirstName}" Width="80" />
                    <GridViewColumn Header="Surname" DisplayMemberBinding="{Binding Surname}" Width="80" />
                </GridView>
            </ListView.View>
        </ListView>
    </StackPanel>
</Window> 
```

**主窗口.cs**

```
using System.Windows;

namespace gregory.bmclub
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            DataContext = new EmployeeListViewModel();
        }
    }
} 
```

**EmployeeViewModel.cs**

```
namespace gregory.bmclub
{
    public class EmployeeViewModel
    {
        string firstname;

        public string FirstName
        {
            get { return firstname; }
            set { firstname = value; }
        }
    }
} 
```

**EmployeeListViewModel.cs**

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Windows.Data;
using System.ComponentModel;

namespace gregory.bmclub
{
    class EmployeeListViewModel : INotifyPropertyChanged
    {
        #region INotifyPropertyChanged
        public event PropertyChangedEventHandler PropertyChanged;

        public void OnPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }
        #endregion

        public EmployeeListViewModel()//modified to public
        {
            EmployeeList = new ObservableCollection<EmployeeViewModel>(GetEmployees());
            this._view = new ListCollectionView(this.employeeList);
        }

        #region nonModifiedCode

        private ListCollectionView _employeeCol;
        public ICollectionView EmployeeCollection
        {
            get { return this._employeeCol; }
        }

        private ObservableCollection<EmployeeViewModel> employeeList;
        public ObservableCollection<EmployeeViewModel> EmployeeList
        {
            get { return employeeList; }
            set
            {
                employeeList = value;
                OnPropertyChanged("EmployeeList");
            }
        }

        private ListCollectionView _view;
        public ICollectionView View
        {
            get { return this._view; }
        }

        private string _TextSearch;
        public string TextSearch
        {
            get { return _TextSearch; }
            set
            {
                _TextSearch = value;
                OnPropertyChanged("TextSearch");

                if (String.IsNullOrEmpty(value))
                    View.Filter = null;
                else
                    View.Filter = new Predicate<object>(o => ((EmployeeViewModel)o).FirstName == value);
            }
        }

        #endregion

        //created for testing
        private List<EmployeeViewModel> GetEmployees()
        {
            var mylist = new List<EmployeeViewModel>();
            mylist.Add(new EmployeeViewModel() { FirstName = "nummer1" });
            mylist.Add(new EmployeeViewModel() { FirstName = "nummer2" });

            return mylist;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-18T21:28:24.837

我有以下代码与我一起工作，但我不得不放弃 Textsearch 方法并应用了一个不同的方法，我添加了查看代码行，希望能够使您的代码正常工作。

```
private EmployeeListViewModel()
    : base("")
{
    EmployeeList = new ObservableCollection<EmployeeViewModel>(GetEmployees());
    this._view = new ListCollectionView(this.employeeList);
     myEmployeeList = new CollectionViewSource();
        myEmployeeList.Source = this.EscortList;
        myEmployeeList.Filter += ApplyFilter;
}
    internal CollectionViewSource employeeList { get; set; }

        internal CollectionViewSource myEmployeeList { get; set; }
        private ObservableCollection<EmployeeViewModel> employeeList;
    public ObservableCollection<EmployeeViewModel> EmployeeList
    {
        get { return employeeList; }
        set
        {
            employeeList = value;
            OnPropertyChanged("EmployeeList");
        }
    }

private ListCollectionView _view;
// the collection below is the collection you will need to be your listview itemsource {Binding View}
public ICollectionView View
{
     //you need to return your CollectionViewSource here
     get { return myEmployeeList._view; }
}

// you need to use the following filtering methods as it did work for methods
 private void OnFilterChanged()
    {
        myEmployeeList.View.Refresh();
    }

    private string filter;

    public string Filter
    {
        get { return this.filter; }
        set
        {
            this.filter = value;
            OnFilterChanged();
        }
    }

    void ApplyFilter(object sender, FilterEventArgs e)
    {
        EmployeeViewModel svm = (EmployeeViewModel)e.Item;

        if (string.IsNullOrWhiteSpace(this.Filter) || this.Filter.Length == 0)
        {
            e.Accepted = true;
        }
        else
        {
        // you can change the property you want to search your model
            e.Accepted = svm.Surname.Contains(Filter);
        }
    } 
```

这是我绑定到 Listview 的 Xaml 代码

```
<ListView Name="lsvEscort" HorizontalAlignment="Left" Height="297" ItemsSource="{Binding View}"> 
```

这是我的文本搜索过滤器绑定路径

```
<TextBox x:Name="txtSearch"  Grid.Column="1" Text="{Binding Path=Filter,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" /> 
```

希望这能解决您的问题

# c - 当客户端请求连接时服务器不接受连接

> ID：15473049
> 
> 赞同：0
> 
> 时间：2013-03-18T09:10:01.573
> 
> 标签：c, sockets

我的服务器不接受客户端发送的连接请求，客户端什么也没收到。当客户端请求它时，我的服务器关闭。我的代码如下： 服务器代码：

```
*#include<sys/socket.h>
#include<netinet/in.h>
#include<stdio.h>
#include<sys/types.h>
#include<string.h>
int main()
{
    int sock,bnd,con,lis,size,clilen;
    char *msg="WELCOME!!!!!";
    struct sockaddr_in sockadd,cliadd;
    //Socket Created.....
    sock=socket(AF_INET,SOCK_STREAM,0);
    if(sock!=-1)
    printf("socket created");
    else
    printf("Not created");

        // defining  Address of sockets
    sockadd.sin_family=AF_INET;
    sockadd.sin_port=htons(5001);
    sockadd.sin_addr.s_addr=htonl(INADDR_ANY);
    bnd=bind(sock,(struct sockaddr *) &sockadd,sizeof(sockadd));
    if(bnd==-1)
    printf("NOT BOUND");
    else
    printf("BOUND");

    lis=listen(sock,10);
    if(lis!=-1)
    printf("listning");
    else
    printf("not listening");
    printf("\nWaiting for connection at %s port no %d\n",inet_ntoa(sockadd.sin_addr),ntohs(sockadd.sin_port));
    while(1)
    {
        clilen=sizeof(cliadd);
        con=accept(sock,(struct sockaddr *) &cliadd, &clilen);
        if(con==-1)
        printf("connected not");
        else
        printf("conneted");
        size=send(sock,msg,sizeof(msg),0);
        if(size==-1)
        printf("not sent");
        else
        printf("BYTES SENT: %d",size);
        close(con);
        sleep(2);
    }
    return(0);* 
```

和客户端代码是：

```
 int sock,bnd,con,lis,size;
    char msg[35];
    struct sockaddr_in sockadd;
    //Socket Created.....
    sock=socket(AF_INET,SOCK_STREAM,0);
    if(sock!=-1)
    printf("socket created");
    else
    printf("Not created");
    //return(0);        
        // defining  Address of sockets
    sockadd.sin_family=AF_INET;
    sockadd.sin_port=htons(5001);
    sockadd.sin_addr.s_addr=inet_addr("10.3.5.172");
    /*puts(sockadd.sin_family);
    puts(sockadd.sin_port); 
    puts(sockadd.sin_addr.s_addr);      
    if(inet_pton(AF_INET, argv[1], &sockadd.sin_addr)<=0)
       {
         printf("\n inet_pton error occured\n");
            return 1;
        } */
    con=connect(sock, (struct sockaddr *)&sockadd, sizeof(sockadd)) ;
    if(con==-1)
        {
        printf("\n Error : Connect Failed \n");
             return 1;
        } 
    else
    printf("successful");
    size=recv(sock,msg,sizeof(msg),0);
    printf("msg recieved:%s",msg);
    printf("bytes recieved:%d",size);
}* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:49:05.937

您正在尝试在服务器套接字上发送！

```
 size=send(sock,msg,sizeof(msg),0); // ERROR, this is a server socket! 
```

尝试在新连接上发送：

```
 size=send(con,msg,sizeof(msg),0); 
```

# javascript - 如何获取模态框jquery UI的输入值

> ID：15473050
> 
> 赞同：5
> 
> 时间：2013-03-18T09:10:05.993
> 
> 标签：javascript, jquery

```
<div id="befor-box">
   <form id="newsletter-form" name="newsletter-form" action="/sub/" method="post">{% csrf_token %}
      <input name="email" type="text" value="Enter your Email here" class="text"/> 
      <input class="submit" onclick="showDialog();" value="Subscribe!" />
   </form>
</div> 
```

如何从以下位置获取 EMAIL 值：

`<input name="email" type="text" value="Enter your Email here" class="text"/>`

到：

`<input name="email" type="text" value="" class="text"/>`

从这里：

```
<div id="dialog-modal" style="display:none;">
   <form name="newsletter-form" action="/sub/" method="post">
      <input name="email" type="text" value="" class="text"/>
      <input name="fname" type="text" value="First name" class="text"/>
      <input name="lname" type="text" value="Last name" class="text"/>
      <input type="submit" class="submit" value="Subscribe!" />
   </form>
</div>
<script type="text/javascript">
   function showDialog()
   {
   $( "#dialog-modal" ).dialog({

   });
   }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T09:26:15.743

使用对话框的打开事件，称为 whn 对话框打开...所以替换那里的值..

```
$( "#dialog-modal" ).dialog({
 open: function( event, ui ) {
     var boxInput=$("#befor-box").find('input[name="email"]').val(); //get the value..
     $("#dialog-modal").find('input[name="email"]').val(boxInput); //set the valu

 }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T09:19:55.333

伊曼纽尔，首先阅读一些有用的信息：

[http://www.w3schools.com/jquery/jquery_selectors.asp](http://www.w3schools.com/jquery/jquery_selectors.asp) 特别是“#id 选择器”一章。

之后，您可以将“id”属性添加到您的 DOM 结构并检索输入值，就像

```
$('#my-input-id').val() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T09:20:13.830

在两个输入上添加一个 id：

```
<input name="email" type="text" value="Enter your Email here" class="text" id="email_orig"/>

<input name="email" type="text" value="" class="text" id="email_dst"/> 
```

然后覆盖 open 事件：

```
 function showDialog()
    {
    $( "#dialog-modal" ).dialog({
         open: function(){
         $("#email_dst").val($("#email_orig").val())
    }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-27T07:44:48.840

您可以使用：

```
$("input[name=email]"); 
```

对于引导模式：

```
$('.modal-body input[name=email]').val(email); 
```

# utf-8 - 在 C++11 中读取/写入/打印 UTF-8

> ID：15473051
> 
> 赞同：9
> 
> 时间：2013-03-18T09:10:06.380
> 
> 标签：utf-8, c++11, wchar-t, utf-32, codecvt

我一直在探索 C++11 的新 Unicode 功能，虽然[其他 C++11 编码问题非常有帮助，但我对](https://stackoverflow.com/questions/6796157/unicode-encoding-for-string-literals-in-c11)[cppreference](http://en.cppreference.com/w/cpp/locale/codecvt_utf8_utf16)中的以下代码片段有疑问 。代码写入然后立即读取以 UTF-8 编码保存的文本文件。

```
// Write
std::ofstream("text.txt") << u8"z\u6c34\U0001d10b";

// Read
std::wifstream file1("text.txt");
file1.imbue(std::locale("en_US.UTF8"));
std::cout << "Normal read from file (using default UTF-8/UTF-32 codecvt)\n";
for(wchar_t c; file1 >> c; ) // ?
   std::cout << std::hex << std::showbase << c << '\n'; 
```

我的问题很简单，为什么循环`wchar_t`中需要a ？可以使用简单的方式声明字符串文字`for`，并且 UTF-8 编码的位布局应该告诉系统字符的宽度。似乎有一些从 UTF-8 到 UTF-32 的自动转换（因此是），但如果是这种情况，为什么需要进行转换？`u8``char *``wchar_t`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T10:53:22.983

您使用`wchar_t`是因为您正在使用`wifstream`;读取文件 如果您正在阅读使用，`ifstream`您将使用`char`, 并且类似地用于`char16_t`and `char32_t`。

*假设*（如示例那样）它`wchar_t`是 32 位的，并且它表示的本机字符集是 UTF-32 (UCS-4)，那么这是将文件读取为 UTF-32 的最简单方法；它在示例中如此呈现，以与以 UTF-16 格式读取文件形成对比。更可移植的方法是使用`basic_ifstream<char32_t>`和`std::codecvt_utf8<char32_t>`显式，因为这可以保证从 UTF-8 输入流转换为 UTF-32 元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T09:23:39.690

您使用的 cppreference 代码片段的想法是展示如何将 UTF-8 文件读入 UTF-16 字符串，这就是为什么他们使用 ofstream 编写文件但使用 wifstream 读取文件的原因（因此使用 wchar_t）。

# solr - solr 结果按查询部分分组

> ID：15473054
> 
> 赞同：0
> 
> 时间：2013-03-18T09:10:12.643
> 
> 标签：solr, grouping

假设我有以下 solr 查询

```
(
    (name:("lasagne al forno")) // segment 1
OR 
    (name:("lasagne")) // segment 2
)
AND state:(1) 
```

是否可以按查询段对搜索结果进行分组？

我知道我可以在任一语句中添加提升，但我需要查看哪个结果项来自哪个段。

谢谢您的帮助。

# c++ - openCV中的imshow函数

> ID：15473055
> 
> 赞同：5
> 
> 时间：2013-03-18T09:10:16.190
> 
> 标签：c++, opencv

我正在使用 imshow 函数在 OpenCV 中显示图像。它工作正常，不过有一点：我为图像写的标题没有正确显示。

例如，当我写“原始”或“倒置”时，它们会在开头显示一些额外且难以理解的数据。但是，当我写“阈值图像”时，会显示一长串难以理解的单词而不是标题......

它不会影响其他任何东西，但对我来说似乎很奇怪。你知道为什么会这样吗？

这是我的代码：

```
IplImage* image=cvLoadImage("Black&White.jpg");
Mat image1;
image1=Mat(image,false);
imshow("Image",image1);
cvWaitKey(0); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T09:58:04.277

首先，您可以互换使用 C 和 C++ 库 - IpIImage 属于 C 而 Mat 属于 C++，这可能是您问题的根源。相反，尝试只使用 C++ 接口，您的代码将如下所示：

```
Mat image = imread("Black&White.jpg"); 
imshow("Image",image);
waitKey(0); 
```

那应该可以解决您的问题，如果没有，请尝试使用C接口

```
IplImage* image = cvLoadImage("Black&White.jpg");
cvNamedWindow( "Image", CV_WINDOW_AUTOSIZE );
cvShowImage("Image", image);
cvWaitKey(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T20:59:15.173

你真的检查过你使用了正确的文件链接吗？就我而言，我通常通过以下方式检查它：

```
image = imread( "C:\\\CloudStation\\\Bestanden\\\VisualStudio2010\\\Projects\\\TMerger\\\Debug\\\black_and_white.tif") 
```

所以就我而言，我必须使用双反斜杠。

希望能帮助到你。

问候，弗洛里斯。

# python - 用于读取单个点属性的 ArcGIS Python 工具

> ID：15473058
> 
> 赞同：0
> 
> 时间：2013-03-18T09:10:25.583
> 
> 标签：python, hyperlink, attributes, add-in, arcgis

我希望为 ArcGIS 创建一个 python 插件工具，其工作方式类似于使用 python 的 ArcGIS 识别工具。该工具必须是这样的，当我单击一个点或要素时，它会从要素中读取特定属性。

具体来说，我希望开发一个超链接工具。但目前只能从要素类或图层的字段中读取超链接。我还可以创建一个带有按钮的 GUI，这些按钮充当打开我的照片和已链接到我的功能的全景图的超链接。

我已经包含我的代码来澄清我的问题。亲切的问候。以下是我目前拥有的代码：

```
 #!/usr/bin/env python
import PyQt4
import sys
from PyQt4 import QtGui
from PyQt4 import QtCore
import Image
import os, sys
import webbrowser
import arcpy

class HyperlinkWindow(QtGui.QMainWindow):

    def __init__(self, win_parent = None):
        #Init the base class
        QtGui.QMainWindow.__init__(self, win_parent)
        self.create_widgets()

    def create_widgets(self):
        #Widgets
       self.panorama_button = QtGui.QPushButton("Panorama")
       self.photo_button = QtGui.QPushButton("Photo")

#connect signal
       QtCore.QObject.connect(self.panorama_button
           , QtCore.SIGNAL("clicked()")
           , self.on_hello_clicked)
       QtCore.QObject.connect(self.photo_button
                   , QtCore.SIGNAL("clicked()")
                   , self.on_photo_clicked)

#Horizontal layout
        h_box = QtGui.QHBoxLayout()
        h_box.addWidget(self.panorama_button)
        h_box.addWidget(self.photo_button)
#Create central widget, add layout and set
        central_widget = QtGui.QWidget()
        central_widget.setLayout(h_box)
        self.setCentralWidget(central_widget)

    def on_hello_clicked(x):

            featureClass = "My_Featureclass"
            rows = arcpy.SearchCursor(featureClass)
            row = rows.next()

            while row:
                webbrowser.open(row.Panorama)
                print row.panorama
                row = rows.next()
    def on_photo_clicked(y):
            featureClass1 = "My_Featureclass"

            rows1 = arcpy.SearchCursor(featureClass1)
            row1 = rows1.next()

            while row1:

                webbrowser.open (row1.Photo)
                print row1.Photo
                row1 = rows1.next() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:18:53.987

对不起。我已经意识到，要实现这一点，必须选择功能。如果选择了特征/点，则脚本仅读取此类点的属性。我已经设法编写了一个我认为应该如我所愿的脚本。但问题是每当我运行加载项 ArcGIS 时，总是崩溃......

我将在此处附上脚本以供任何希望使用它的人使用....：

```
 import arcpy
    import pythonaddins
    import PyQt4
    import sys
    from PyQt4 import QtGui
    from PyQt4 import QtCore
    import Image
    import os, sys
    import webbrowser

    class HyperlinkWindow(QtGui.QMainWindow, HyperlinkXAButton):

         def __init__(self, win_parent = None):
    #Init the base class
            QtGui.QMainWindow.__init__(self, win_parent)
            self.create_widgets()

         def create_widgets(self):
    #Widgets
             self.panorama_button = QtGui.QPushButton("Panorama")
             self.photo_button = QtGui.QPushButton("Photo")

    #connect signal
             QtCore.QObject.connect(self.panorama_button
                , QtCore.SIGNAL("clicked()")
                , self.on_hello_clicked)
             QtCore.QObject.connect(self.photo_button
                        , QtCore.SIGNAL("clicked()")
                        , self.on_photo_clicked)

    #Horizontal layout
            h_box = QtGui.QHBoxLayout()
            h_box.addWidget(self.panorama_button)
            h_box.addWidget(self.photo_button)
    #Create central widget, add layout and set
            central_widget = QtGui.QWidget()
            central_widget.setLayout(h_box)
            self.setCentralWidget(central_widget)

        def on_hello_clicked(x):
        #x = "Push Me!"
                if x:
                    arcpy.env.workspace = "MyDatabase"
                    featureClass = arcpy.MakeFeatureLayer_management("MyFeatureClass","q")
                    fld = "Panorama"
                    rows = arcpy.SearchCursor(featureClass)
                    for row in rows:
                        webbrowser.open (row.getValue(fld))

        def on_photo_clicked(y):
                if y:
                    arcpy.env.workspace = "MyDatabase"
                    featureClass = arcpy.MakeFeatureLayer_management(MyFeatureClass","u")
                    fld = "Photo"
                    rows = arcpy.SearchCursor(featureClass)
                    for row in rows:
                        webbrowser.open (row.getValue(fld))

     if __name__ == "__main__":
# Someone is launching this directly
# Create the QApplication
        app = QtGui.QApplication(sys.argv)
#The Main window
        main_window = HyperlinkWindow()
        main_window.show()
# Enter the main loop
        app.exec_()

    class HyperlinkButton(object):
        """Implementation for HyperlinkButton_addin.button (Button)"""
        def __init__(self):
            self.enabled = True
            self.checked = False
        def onClick(self):
                 self.w = HyperlinkWindow()
                 self.w.show()
            return 
```

或者，可以使用插件工具代替按钮...

# oracle - Oracle 所有列的列宽

> ID：15473059
> 
> 赞同：9
> 
> 时间：2013-03-18T09:10:26.563
> 
> 标签：oracle, sqlplus

例如，执行用于显示各种列的长语句时的问题之一

```
 select g.guestid, g.forename, g.surname, b.bookingid,
 b.arrivedate, b.departdate, br.floorno, br.roomno from... 
```

linux终端上的列大小似乎是一个问题。例如，Forename VarChar(80) 列在执行上述语句时占据了屏幕的大部分宽度，减少它的一种方法是：

```
SET COLUMN FORENAME FORMAT A10 
```

例如。但是，许多列需要反复经过，这很长。IE

```
SET COLUMN FORENAME FORMAT A10
SET COLUMN SURNAME FORMAT A10 
```

等等...

有没有办法说根据文本宽度调整列宽，以便每个都很好地适应。而不是这样的..

![在此处输入图像描述](../Images/edce090c768bb0c845e3962562beabda.png)

我更喜欢一些不涉及使用功能的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:04:40.937

不，没有简单的方法可以使 SQL*Plus 将列宽“自动调整”为文本宽度。

但是，脚本可以让您的生活更轻松。

首先，减少打字。不要这样做`SET COLUMN FORENAME FORMAT A10`，而是做类似的事情`@c forename 10`。

```
17:33:31 SYSTEM@dwal> cl col
columns cleared
17:33:33 SYSTEM@dwal> select * from dual;

D
-
X

Elapsed: 00:00:00.01
17:33:37 SYSTEM@dwal> @c dummy 10
17:33:43 SYSTEM@dwal> select * from dual;

DUMMY
----------
X

Elapsed: 00:00:00.01
17:33:45 SYSTEM@dwal> get s:\c.sql
  1* col &1\. for a&2.
17:33:50 SYSTEM@dwal> 
```

或者像这样快速隐藏宽列：

```
17:48:44 SYSTEM@dwal> select owner, table_name from all_tables where rownum = 1;

OWNER                          TABLE_NAME
------------------------------ ------------------------------
SYS                            CON$

Elapsed: 00:00:00.24
17:48:49 SYSTEM@dwal> @np owner
17:48:53 SYSTEM@dwal> select owner, table_name from all_tables where rownum = 1;

TABLE_NAME
------------------------------
CON$

Elapsed: 00:00:00.26
17:48:56 SYSTEM@dwal> get s:\np
  1  col &1 noprint
  2* @undef 
```

这些只是我每天使用的众多脚本中的两个。这种方法需要时间和一些个人的关注来适应它并使其有效，但会大大减少您按下的按键数量。

其次，还有 glogin.sql。这是一个脚本，每次连接到某个地方时都会执行。我假设您知道使您的行换行的“长”列的列表。

只需在此处列出它们，然后您的

```
SET COLUMN FORENAME FORMAT A10
SET COLUMN SURNAME FORMAT A10 
```

每次（重新）连接时都会设置列参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T07:03:35.170

Tom Kyte 编写了一个[print_table 过程](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:1035431863958)，它以垂直方式显示结果集。

例如：

```
SQL> exec print_table('select g.guestid, g.forename, ... from ...')
GUESTID                       : 210
FORENAME                      : DINGLE
...
etc...
....
-----------------

PL/SQL procedure successfully completed. 
```

这个过程很方便，尤其是当结果集很小时，理想情况下不超过 10 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T16:41:07.600

[`ansiconsole`](http://www.thatjeffsmith.com/archive/2015/02/a-quick-4-1-trick-set-sqlformat/)SQL 格式可能是您正在寻找的。

```
set sqlformat ansiconsole;
select g.guestid, g.forename, g.surname, b.bookingid,
   b.arrivedate, b.departdate, br.floorno, br.roomno from... 
```

或者：

```
select /*ansiconsole*/ g.guestid, g.forename, g.surname, b.bookingid,
   b.arrivedate, b.departdate, br.floorno, br.roomno from... 
```

此格式根据查询结果的大小自动调整列的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-21T14:59:01.383

正如其他用户已经说过的，sqlplus 没有简单的解决方案。也许使用`glogin.sql`or`login.sql`文件会有所帮助（@René Nyffenegger 提供了[一篇关于这些文件](http://www.adp-gmbh.ch/ora/sqlplus/login.html)的文章）。您可以将列定义放在这些文件中。如果您总是查询相同的查询，或者您的列名称一致，这可能会有所帮助。

或者您将列语句放在您调用的脚本中

```
@scriptname.sql 
```

如果要使用列格式。您将脚本放在作为[`SQLPATH`变量](https://docs.oracle.com/cd/B28359_01/server.111/b31189/ch2.htm)一部分的目录中，以便可以从任何目录调用它。

或者您使用其他工具。一位用户已经指向[SQLcl](http://www.thatjeffsmith.com/archive/2015/02/oracle-sqlcl-slidedeck-overview-of-our-new-command-line-interface/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-15T10:13:24.583

`set`从语句中删除：

`COLUMN FORENAME FORMAT A10`

`SET COLUMN SURNAME FORMAT A10`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-18T09:59:45.197

会话在运行查询之前不知道要返回的字符串的最大长度是多少。当然，该列的大小应该适当，但也许你真的会得到一个 80 个字符长的名字列表——如果不是，那么你的数据类型长度太大了。

正如 Eric 所说，GUI 工具更好，而 Oracle 的 SQL Developer 是免费的，而且很好。

# facebook - 仅在 12 月之前获得 Facebook 朋友的生日

> ID：15473061
> 
> 赞同：0
> 
> 时间：2013-03-18T09:10:32.373
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-android-sdk, android-facebook

我正在编写一个应用程序，其中我使用当前日期按升序*获取所有 Facebook 好友生日列表。*

**问题：**

直到今年我才收到 Facebook 朋友的生日，简而言之，我没有收到明年生日即将到来的朋友列表。

**例子：**

今天是 2013 年 3 月 18 日 - 所以我在这里获取那些生日在 3 月 18 日至 12 月 31 日之间的朋友名单

**我想要的是：**

现在我想获取所有即将到来的 Facebook 好友生日列表，将在 3 月 18 日至 3 月 17 日（明年）

要获取我所有 Facebook 好友的列表，我使用以下查询：

```
Calendar cal = Calendar.getInstance();
Date today = cal.getTime();
SimpleDateFormat formatter = new SimpleDateFormat("MM/dd");
String today_formatted = formatter.format(today);
String query = "select name, birthday, uid, pic_square FROM user " +
"WHERE uid in (SELECT uid2 FROM friend WHERE uid1 = me()) AND birthday_date != 'null' " +
"AND birthday_date >= '" + today_formatted + "'ORDER BY birthday_date ASC"; 
```

# matlab - 将数据拟合到正态分布

> ID：15473064
> 
> 赞同：3
> 
> 时间：2013-03-18T09:10:44.490
> 
> 标签：matlab, gaussian, normal-distribution

我想要一些数据来拟合相应的高斯分布。

数据本来就应该是高斯分布，但由于某些过滤原因，它们不会完全匹配规定和预期的高斯分布。因此，我的目标是减少数据和所需分布之间的现有分散。

例如，我的数据拟合高斯分布如下（预期平均值为 0，标准差为 0.8）：

![在此处输入图像描述](../Images/bcb09e557e20310861c08ee96125e3b6.png)

![在此处输入图像描述](../Images/f55f3ef47d99199af47756610e822c32.png)

近似值已经很不错了，但我真的很想处理模拟数据和预期分布之间仍然有形的分散。

我怎样才能做到这一点？

**编辑**

到目前为止，我已经引入了一种安全系数，定义为：

```
SF = expected_std/actual_std; 
```

进而

```
new_data = SF*old_data; 
```

这样标准偏差与预期值相匹配，但从我的理解来看，这个过程看起来很差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:04:36.783

如果您不想对分布进行任何非线性变换，您所能做的就是调整均值和标准差。

```
%# 1\. adjust the mean (do this even if the offset is small)
data = data - mean(data);

%# 2\. adjust the standard deviation
data = data/std(data) * expected_SD; 
```

# prolog - HiLog 术语在现代 Prolog 中仍然有用吗？

> ID：15473065
> 
> 赞同：8
> 
> 时间：2013-03-18T09:10:47.283
> 
> 标签：prolog, iso-prolog, xsb, meta-predicate

Hilog 项（即具有任意项作为函子的化合物）是否仍然被视为 XSB Prolog（或任何其他 Prolog）中的强大功能？目前有很多 XSB 项目使用这个功能吗？例如，他们中的哪一个？

我问，因为据我了解，使用 ISO 内置 call/N 进行高阶编程同样可能。

具体来说，我想了解 XSB 是否只是出于历史原因使用 Hilog 术语，或者与当前的 ISO 标准相比，Hilog 术语是否具有相当大的优势。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T18:04:28.150

在 XSB 中，Hilog 术语与 XSB 独有的模块系统密切相关。XSB 有一个基于函子的模块系统。也就是说，在同一范围内`length(X)`可能属于一个模块，而`length(L, N)`可能属于另一个。因此，`call(length(L), N)`可能会引用一个模块和`call(length(L, N))`另一个模块：

```
[Patch date: 2013/02/20 06:17:59]
| ?- use_module(basics,length/2).
yes
| ?- length(Xs,2).             
Xs = [_h201,_h203]
yes
| ?- call(length(Xs),2).
Xs = [_h217,_h219]
yes
| ?- use_module(inex,length/1). 
yes
| ?- length(Xs,2).
Xs = [_h201,_h203]
yes
| ?- call(length(Xs),2).
++Error[XSB/Runtime/P]: [Existence (No module inex exists)]  in arg 1 of predicate load
| ?- call(call(length,Xs),2).
Xs = [_h228,_h230]; 
```

可能是在这种情况下，`call/N`和 Hilog 术语之间存在差异。但是，到目前为止，我还没有找到一个。

从历史上看，Hilog 术语是在 1987-1989 年引入的。在那个时候， NU 和Quintus Prolog`call/N`中已经作为内置插件存在，[只有粗略的文档](http://quintus.sics.se/isl/quintus/html/quintus/lib-abs.html#lib-abs)。它[由 Richard O'Keefe 于 1984 年](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/#plstd)提出。另一方面，Hilog 的作者显然不知道，如 Weidong Chen、Michael Kifer、David Scott Warren 的 p.1101 所示：HiLog: A First-Order Semantics for Higher-Order Logic Programming Constructs。NACLP 1989\. 1090-1114。麻省理工学院出版社。`library(call)``call/N`

> ... 通用传递闭包也可以在 Prolog 中定义：
> 
> ```
>  closure(R, X, Y) :- C =.. [R, X, Y], call(C).
>     closure(R, X, Y) :- C =.. [R, X, Z], call(C), closure(R, Z, Y). 
> ```
> 
> 然而，与 HiLog 相比，这显然是不优雅的（参见第 2.1 节），因为这涉及从列表中构造一个术语并使用“调用”将该术语反映到一个原子公式中。这个例子的要点是，Prolog 中缺乏高阶结构的理论基础导致语法晦涩难懂，这部分解释了为什么涉及这种结构的 Prolog 程序出了名地难以理解。

现在，可以这样做`call/N`：

```
closure(R, X, Y) :- call(R, X, Y).
closure(R, X, Y) :- call(R, X, Z), closure(R, Z, Y). 
```

这比`(=..)/2`-version 更通用，因为`R`不再局限于作为原子。顺便说一句，我宁愿写：

```
closure(R_2, X0,X) :- call(R_2, X0,X1), closure0(R_2, X1,X).

closure0(_R_2, X,X).
closure0(R_2, X0,X) :- call(R_2, X0,X1), closure0(R_2, X1,X). 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-12-01T02:15:52.420

HiLog 允许目标，例如

```
foo(X(a, Y(b))). 
```

而 ISO Prolog 没有。在 ISO Prolog 中，您必须编写

```
foo(T), T=..[X, a, R], R=..[Y, b]. 
```

这不太方便，可能会更慢。

# php - 主控制器检查登录和循环重定向（codeigniter）

> ID：15473066
> 
> 赞同：0
> 
> 时间：2013-03-18T09:10:51.157
> 
> 标签：php, codeigniter

我的主控制器检查**用户是否是管理员**，然后重定向到**用户/登录**，这是主控制器的子类，它再次检查用户是否是**管理员**......所以重定向**处于循环**中，不知道把登录功能放在哪里比较好？

```
Admin_Controller -> {

  child1_Controller -> {

    function login()
    {
       //render login page, but can't because the main class constructor is checking login and redirecting again here

    }

  } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:20:13.533

查看运行 pre_controller 挂钩来检查用户详细信息，而不是使用构造函数

[http://ellislab.com/codeigniter/user-guide/general/hooks.html](http://ellislab.com/codeigniter/user-guide/general/hooks.html)

# django - 有没有一种惯用的方法来 get_or_create 然后更新 Django 中的对象？

> ID：15473074
> 
> 赞同：10
> 
> 时间：2013-03-18T09:11:04.720
> 
> 标签：django, django-models, idioms

我有一个名为 StaffSettings 的 Django 模型，其中包含我的 Django 应用程序中用户的各种配置选项。每个用户在 StaffSettings 表中最多有一个条目。

假设一个设置是 default_year_level，我有我的用户对象的代码，例如：

```
def set_default_year_level(u, year_level):
    obj, _created = StaffSettings.objects.get_or_create(user=u)
    obj.default_year_level = year_level
    obj.save() 
```

我希望函数的主体适合一行，因为它似乎是一个常见的用例，但如果我将它定义为

```
def set_default_year_level(u, year_level):
    StaffSettings.objects.filter(user=u).update(default_year_level=year_level) 
```

如果有问题的用户在 StaffSettings 表中已经有一行，那么它工作正常，但如果它不存在，它将不会创建相关行。

编写此代码的惯用/最佳方式是什么？（例如，是否有某种`filter_or_create`功能？或者其他人是否编写装饰器/辅助功能来处理这个习语？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T09:20:44.057

我看不出你的第一个函数有任何问题，我会为这个用例写同样的。

但是，如果您在模型的许多字段上需要相同的功能并且您不想重复自己，则可以将该字段作为参数传递：

```
def set_default_value(u, field, value):
  obj, _created = StaffSettings.objects.get_or_create(user=u)
  setattr(obj, field, value)
  obj.save() 
```

无论如何我都会远离*update()*函数，因为该函数旨在一次更新多个对象，并且不会触发 save() 方法或模型上的信号（请参阅[https://docs.djangoproject.com/en /dev/topics/db/queries/#updating-multiple-objects-at-once](https://docs.djangoproject.com/en/dev/topics/db/queries/#updating-multiple-objects-at-once)）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-17T10:33:18.643

从 Django 1.7 开始，您可以使用[`update_or_create()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#update-or-create)：

```
def set_default_year_level(u, year_level):
    obj, _created = StaffSettings.objects.update_or_create(
        user=u,
        default_year_level=year_level
    ) 
```

或者，对于上一个答案中解释的更通用的情况：

```
def set_default_values(u, **kwargs):
    obj, _created = StaffSettings.objects.update_or_create(user=u, defaults=kwargs) 
```

这也满足您的额外要求

> 我希望函数的主体适合一行

# java - 在 ILOG CPLEX Optimizer java API 中开始使用 MIP

> ID：15473076
> 
> 赞同：1
> 
> 时间：2013-03-18T09:11:06.597
> 
> 标签：java, mathematical-optimization, cplex, integer-programming

我找不到在 CPLEX java API 中有效使用 MIP 启动的方法。

我有一个线性问题，我需要通过仅更改一个约束或更改目标来解决多次，因此我认为从解决方案开始（使用 MIP 启动）可能是加快计算速度的好方法。

因此，为了做到这一点，在我第一次解决问题后，我将所有变量保存在一个 IloNumVar 数组中，并使用 cplex.addMIPStart 将其加倍传递给我的其他 cplex 对象。

问题是它并没有加快任何速度，而是让它变慢并给我这个消息：

警告：从 1 个 MIP 开始没有找到解决方案。

所以也许我不应该给 MIP 启动所有变量，但我怎么知道要给它什么变量？

我也试图改变 MIP 启动努力，但它似乎没有任何区别......

为什么它不能使计算更快？有没有更好的方法来解决只有一些差异的许多问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:17:18.573

此消息通常意味着您没有为模型中的足够决策变量指定值，或者您为 cplex 提供的值不可行。您可以通过对变量使用 IloNumVar.setBounds 然后尝试求解模型来检查可行性。如果这不可行，那么您可以编写一个[iis](http://eaton.math.rpi.edu/cplex90html/usrcplex/solveLP22.html)文件。CPLEX 尝试，但无法使用您的 mipstart，因此运行速度较慢。良好的 MIP 启动可以显着缩短求解时间，特别是如果 cplex 很难找到第一个可行的解决方案并且您的 MIP 启动具有接近最优的目标函数值，但在许多情况下，它不会产生任何区别。热启动 MIP 比热启动 LP 困难得多。

# python - 在 Python 中使用自定义步骤生成列表序列

> ID：15473077
> 
> 赞同：1
> 
> 时间：2013-03-18T09:11:07.670
> 
> 标签：python

好吧，我真的被那个单线卡住了。

然而试图用 zip 和 map 完成我的任务，但我想要的都没有。所以我的问题是：我可以用这样的自定义步骤生成一个列表吗？

```
>>wicked cool code snippet
>>[101, 105, 109, 115, 121] 
```

这背后的想法是我有一个序列 X 的开始等于 101。然后我加 4，然后再加 4。然后我将 6 加到前一个结果中，然后我再次加 6。

```
I believe it should look like this mathematically speaking: 
```

An = A1+4d,A2+4d,A3+6d,A4+6d。

**UPD**

好吧，让我说得更清楚。

> > > range(101, 120, 3) <-经典算术级数

```
[101, 104, 107, 110, 113, 116, 119] < - The output 
```

我需要的是其中两个的组合。就像将 +4 加到每个元素 n 次，然后将 +6 加到 add 4 序列的最后一个元素 n 次。

希望，现在更清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:24:53.783

有点硬编码：

```
In [42]: step=[0,3,6,11,16]

In [43]: [i+step[n] for n, i in enumerate(range(101, 106))]
Out[43]: [101, 105, 109, 115, 121] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:29:17.640

不确定这是否是一个很酷的代码片段，但它会用一行代码返回您的答案：

```
 >>> map(lambda x: x+100 if x == 1 else (x+103 if x == 2 else (x+106 if x == 3 else (x+111 if x == 4 else x+116))), range(1,6))
 [101, 105, 109, 115, 121] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T09:29:23.073

这对我有用：

```
>>> reduce(lambda acc, i: acc + [acc[-1] + i], [4,4,6,6], [101])
[101, 105, 109, 115, 121] 
```

不幸的是，这并不是您所要求的，而且恐怕它不能单独完成`map`，`zip`因为这些操作不涉及任何类型的累加器。

# android - 如何在 Switch 条件下随机化案例？

> ID：15473078
> 
> 赞同：0
> 
> 时间：2013-03-18T09:11:09.140
> 
> 标签：android, random, switch-statement, shuffle

在此代码中，我想在切换条件下随机化或随机化我的 5 个案例***单击“正确”按钮后，图像将全屏显示并返回相同的案例。而不是这个，我想从剩余案例中加载图像随机的。***

```
public class MainActivity extends Activity{

ImageButton ib1,ib2,ib3,ib4,ib5,ib6,ib7,ib8,ib9,ib10,ib11,ib12,ib13,ib14,ib15;
ImageView iv;
Handler handler = new Handler();

int x;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    iv = (ImageView)findViewById(R.id.img);

    ib1 = (ImageButton)findViewById(R.id.imgbt1);
    ib2 = (ImageButton)findViewById(R.id.imgbt2);
    ib3 = (ImageButton)findViewById(R.id.imgbt3);
    ib4 = (ImageButton)findViewById(R.id.imgbt4);
    ib5 = (ImageButton)findViewById(R.id.imgbt5);
    ib6 = (ImageButton)findViewById(R.id.imgbt6);
    ib7 = (ImageButton)findViewById(R.id.imgbt7);
    ib8 = (ImageButton)findViewById(R.id.imgbt8);
    ib9 = (ImageButton)findViewById(R.id.imgbt9);
    ib10 = (ImageButton)findViewById(R.id.imgbt10);
    ib11 = (ImageButton)findViewById(R.id.imgbt11);
    ib12 = (ImageButton)findViewById(R.id.imgbt12);
    ib13 = (ImageButton)findViewById(R.id.imgbt13);
    ib14 = (ImageButton)findViewById(R.id.imgbt14);
    ib15 = (ImageButton)findViewById(R.id.imgbt15);

    Random rand = new Random();
    x = rand.nextInt(5);

    switch (x) {
    case 1:

        Toast.makeText(getApplicationContext(), "Select red", Toast.LENGTH_SHORT).show();
        ib1.setVisibility(View.VISIBLE);
        ib1.setBackgroundResource(R.drawable.carrot);

        //ib1.setOnClickListener(myListener);
        ib1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                handler.postDelayed(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        iv.setVisibility(View.GONE);
                        x++;

                    }
                }, 2000);

                iv.setVisibility(View.VISIBLE);
                iv.setBackgroundResource(R.drawable.carrot);

            }
        });

        ib2.setVisibility(View.VISIBLE);
        ib2.setBackgroundResource(R.drawable.ic_launcher);
        //ib2.setOnClickListener(myListener);

        ib3.setVisibility(View.VISIBLE);
        ib3.setBackgroundResource(R.drawable.ic_launcher);
        //ib3.setOnClickListener(myListener);

        break;

    case 2:
        ib4.setVisibility(View.VISIBLE);
        ib4.setBackgroundResource(R.drawable.ic_launcher);
        ib4.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                handler.postDelayed(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        iv.setVisibility(View.GONE);
                        x++;
                    }
                }, 2000);

                iv.setVisibility(View.VISIBLE);
                iv.setBackgroundResource(R.drawable.ic_launcher);
                //ib4.setOnClickListener(myListener);

            }
        });

        ib5.setVisibility(View.VISIBLE);
        ib5.setBackgroundResource(R.drawable.ic_launcher);
        //ib5.setOnClickListener(myListener);

        ib6.setVisibility(View.VISIBLE);
        ib6.setBackgroundResource(R.drawable.ic_launcher);
        //ib6.setOnClickListener(myListener);

        break;

    case 3:
        Toast.makeText(getApplicationContext(), "Select Violet", Toast.LENGTH_SHORT).show();

        ib7.setVisibility(View.VISIBLE);
        ib7.setBackgroundResource(R.drawable.brinjal);
        //ib7.setOnClickListener(myListener);
        ib7.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                handler.postDelayed(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        iv.setVisibility(View.GONE);
                        x++;
                    }
                }, 2000);

                iv.setVisibility(View.VISIBLE);
                iv.setBackgroundResource(R.drawable.brinjal);
            }
        });

        ib8.setVisibility(View.VISIBLE);
        ib8.setBackgroundResource(R.drawable.ic_launcher);
        //ib8.setOnClickListener(myListener);

        ib9.setVisibility(View.VISIBLE);
        ib9.setBackgroundResource(R.drawable.ic_launcher);
        //ib9.setOnClickListener(myListener);

        break;

    case 4:

        Toast.makeText(getApplicationContext(), "Select Any thing", Toast.LENGTH_SHORT).show();

        ib10.setVisibility(View.VISIBLE);
        ib10.setBackgroundResource(R.drawable.ic_launcher);
        //ib10.setOnClickListener(myListener);
        ib10.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                handler.postDelayed(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        iv.setVisibility(View.GONE);
                        x++;
                    }
                }, 2000);

                iv.setVisibility(View.VISIBLE);
                iv.setBackgroundResource(R.drawable.ic_launcher);

            }
        });

        ib11.setVisibility(View.VISIBLE);
        ib11.setBackgroundResource(R.drawable.ic_launcher);
        //ib11.setOnClickListener(myListener);

        ib12.setVisibility(View.VISIBLE);
        ib12.setBackgroundResource(R.drawable.ic_launcher);
        //ib12.setOnClickListener(myListener);

        break;

    case 5:
        Toast.makeText(getApplicationContext(), "Select Blue", Toast.LENGTH_SHORT).show();

        ib13.setVisibility(View.VISIBLE);
        ib13.setBackgroundResource(R.drawable.blue_bird);
        //ib13.setOnClickListener(myListener);

        ib13.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                handler.postDelayed(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        iv.setVisibility(View.GONE);
                        x++;
                    }
                }, 2000);

                iv.setVisibility(View.VISIBLE);
                iv.setBackgroundResource(R.drawable.blue_bird);

            }
        });

        ib14.setVisibility(View.VISIBLE);
        ib14.setBackgroundResource(R.drawable.ic_launcher);
        //ib14.setOnClickListener(myListener);

        ib15.setVisibility(View.VISIBLE);
        ib15.setBackgroundResource(R.drawable.ic_launcher);
        //ib15.setOnClickListener(myListener);

        break;          

    default:
        break;
    }
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:16:31.440

因为Button onclick只会执行我们在onClick中给出的代码，所以你还没有在按钮的onClick中调用你的switch语句。

在单独的方法中调用 Switch 语句并在单击按钮时调用它

在你的 onClick 电话上像这样

```
int num= rand.nextInt(5);
setRandomImages(num) 
```

像这样在单独的方法中编写您的 switch 语句

```
public void setRandomImages(int n)
{
//your switch statement here
} 
```

# database - 如何在jsp中使用jstl arraylist

> ID：15473080
> 
> 赞同：-1
> 
> 时间：2013-03-18T09:11:22.390
> 
> 标签：database, eclipse, jsp, jstl

我在 jstl 的帮助下在 jsp 页面中显示数据时遇到问题。我有代码和错误；我的 JSP 页面是

```
 <body>
    <table border="1">
        <thead>
                <tr>
                    <th>UserId </th>
                    <th>First Name </th>
                    <th>Last Name </th>
                    <th>DOB </th>
                    <th>Email Id </th>
                    <th colspan="2" >Action</th>
                </tr>
        </thead>
        <tbody>
          <c:forEach items="${users}" var="user" >
             <tr>
                    <td><c:out value="${user.userid}" /></td>
                    <td><c:out value="${user.firstName}" /></td>
                    <td><c:out value="${user.lastName}" /></td>
                    <td><fmt:formatDate pattern="yyyy-MMM-dd" value="${user.dob}" /></td>
                    <td><c:out value="${user.email}" /></td>
                    <td><a href="UserController?action=edit&userId=<c:out value="${user.userid}"/>">Update</a></td>
                    <td><a href="UserController?action=delete&userId=<c:out value="${user.userid}"/>">Delete</a></td>
                </tr>

                </c:forEach>

        </tbody>
    </table>
    <p><a href="UserController?action=insert">Add User</a> 
```

我们获取 ALLUSERLIST IS 的这段代码： public ArrayList getAllUsers() {

```
ArrayList<User> USER = new ArrayList<User>();
    try
    {
        iduQuery = "select * from user";
        Statement st = conn.createStatement();
        ResultSet rs =st.executeQuery(iduQuery);
        while(rs.next())
        {
            User user =new User();

            user.setUserid(rs.getString("userid"));
            System.out.println("USER ID :    " + user);
            user.setFirstname(rs.getString("firstname"));
            user.setLastname(rs.getString("lastname"));
            user.setDob( new java.sql.Date(rs.getDate("dob").getTime()));
            user.setEmail(rs.getString("email"));
            USER.add(user);
        }

    }catch(Exception e)
    {
            e.printStackTrace();
            System.out.println("Error : GetALLUSER   " + e);
    }
    return USER; 
```

}

我们称之为jsp页面的地方：

```
 forward ="/listUser.jsp";
            ArrayList<User> myList = new ArrayList<User>();
        myList = userdao.getAllUsers();
        System.out.println("THis List of data arte : " + myList);
        request.setAttribute("users", myList); 
```

并且错误显示：HTTP Status 500 -

```
org.apache.jasper.JasperException: org.apache.jasper.JasperException: An exception occurred processing JSP page /listUser.jsp at line 33
30:         <tbody>
31:           <c:forEach items="${users}" var="user">
32:              <tr>
33:                     <td><c:out value="${user.userid}" /></td>
34:                     <td><c:out value="${user.firstName}" /></td>
35:                     <td><c:out value="${user.lastName}" /></td>
36:                     <td><fmt:formatDate pattern="yyyy-MMM-dd" value="${user.dob}" /></td> 
```

用户类

```
 package com.d.model;
import java.util.Date;;

public class User {
    private String userid;
    private String firstName;
    private String lastName;
    private Date dob;
    private String email;

    public String getUserid() {

        return userid;
    }
    public void setUserid(String userid) {

        this.userid = userid;

    }
    /**
     * @return the firstname
     */
    public String getFirstname() {
        return firstName;
    }
    /**
     * @param firstname the firstname to set
     */
    public void setFirstname(String firstName) {
        this.firstName = firstName;

    }
    /**
     * @return the dob
     */
    public Date getDob() {
        return dob;
    }
    /**
     * @param dob the dob to set
     */
    public void setDob(Date dob) {
        this.dob = dob;
    }
    /**
     * @return the email
     */
    public String getEmail() {
        return email;
    }
    /**
     * @param email the email to set
     */
    public void setEmail(String email) {
        this.email = email;
    }
    /**
     * @return the lastname
     */
    public String getLastname() {
        return lastName;
    }
    /**
     * @param lastname the lastname to set
     */
    public void setLastname(String lastName) {

        this.lastName = lastName;

    }

    @Override
    public String toString() {
        return "User [userid= " + userid + ", firstName= '" + firstName
                + "', lastName=" + lastName + ", dob=" + dob + ", email="
                + email + "]";
    }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:13:23.053

拼写错误`setUsrid`.change it setUserid

您正在设置`usrid`，但您正在访问`userid`

```
user.setUsrid(rs.getString("userid")); //usrid

${user.userid} // userid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T05:50:37.260

拼写错误`setUsrid`。将其更改为`setUserid`

您正在设置 usid 但您正在访问用户 ID

```
user.setUsrid(rs.getString("userid")); //usrid

${user.userid} // userid 
```

# sql-server - 用delphi查询路径tp mssql服务器表

> ID：15473087
> 
> 赞同：0
> 
> 时间：2013-03-18T09:11:45.340
> 
> 标签：sql-server, delphi, ado

在[MSSQL ATTACH DATABASE SQL](https://stackoverflow.com/questions/3829271/how-can-i-clone-an-sql-server-database-on-the-same-server-in-sql-server-2008-exp/3830948#3830948)下有一个很好的脚本来附加/分离 MSSQL 服务器上的数据库。Delphi中是否有任何系统变量可以用来通过源代码检测数据库文件的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:24:02.597

如果要获取某个数据库的数据文件的路径，则需要查询该[`sys.master_files`](http://msdn.microsoft.com/en-us/library/ms186782.aspx)表。在其`physical_name`列中存储了数据库数据文件的文件名，因此运行这样的查询应该可以满足您的需求：

```
SELECT
  physical_name
FROM
  sys.master_files
WHERE
  database_id = DB_ID(N'your_database_name') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:39:30.753

您可以将您的数据库文件放在您想要的任何位置（当然，网络驱动器除外），只要 SQL-Server 帐户对该文件具有适当的权限。

如果您想坚持使用默认设置，即默认数据库位置/路径，请参阅[本文](https://stackoverflow.com/questions/1883071/how-do-i-find-the-data-directory-for-a-sql-server-instance)了解详细信息。

# python - tkinter中的“给定额外参数”错误

> ID：15473094
> 
> 赞同：0
> 
> 时间：2013-03-18T09:12:10.667
> 
> 标签：python, tkinter

**问题**

我写了一个小程序来实现秒表。此秒表将在按下时开始`s`运行，并在按下时停止运行`l`。为此，我使用了以下代码：

```
 f = self.frame
        w = self.window

        info = Label(f,text="\nPress \'s\' to start running and \'l\' to stop running\n")
        info.pack()

        w.bind('<KeyPress-s>',self.startrunning)
        w.bind('<KeyPress-l>',self.stoprunning) 
```

stoprunning 和 start running 函数如下：

```
def startrunning(self):
        r = Frame(self.window)
        r.pack()
        self.start = time.time()

        start = Label(r,text="\nStarted running")
        start.pack()  

def stoprunning(self):
        r = Frame(self.window)
        r.pack()
        self.stop = time.time()
        self.timeConsumed = self.stop - self.start

        Label(r,text='\nstopped running').pack()
        end = Label(r,text="\nTime consumed is: %0.2f seconds" %self.timeConsumed)
        end.pack(side = "bottom") 
```

**错误**

按下`s`键时，我收到以下错误：

```
>>> 
Exception in Tkinter callback
Traceback (most recent call last):
  File "C:\Python25\lib\lib-tk\Tkinter.py", line 1414, in __call__
    return self.func(*args)
TypeError: startrunning() takes exactly 1 argument (2 given) 
```

**规格** Python 2.7

我是 tkinter 编程新手，无法理解显示此错误的内容或原因。请告诉我我是否正确使用了代码。另外请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:23:54.450

采用

```
def startrunning(self,ev):
def stoprunning(self,ev): 
```

将发送事件绑定到子例程（[http://effbot.org/tkinterbook/tkinter-events-and-bindings.htm](http://effbot.org/tkinterbook/tkinter-events-and-bindings.htm)）。

替代，您可以将绑定描述为

```
w.bind('<KeyPress-s>',lambda ev:self.startrunning())
w.bind('<KeyPress-l>',lambda ev:self.stoprunning()) 
```

# windows-8 - 如何以编程方式在 Windows Phone 8 中的枢轴控件之间移动

> ID：15473098
> 
> 赞同：3
> 
> 时间：2013-03-18T09:12:30.067
> 
> 标签：windows-8, windows-phone-8

我有一种情况，我需要在 Windows Phone 8 的数据透视页面上移动到不同的数据透视，但我无法找到实现这一目标的方法。

这是屏幕截图： ![在此处输入图像描述](../Images/7e88823b5f6d1caefea4cfadc11d09b4.png)

当我点击任何 LongListItem 时，我想切换到“地图”支点。

C#+XAML+WP8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:38:00.937

其实很简单，你只需要知道你想移动到哪个索引

```
 YourPivotControl.SelectedIndex = selectedIndex; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T13:31:11.820

枢轴控件主要基于列表并沿数据点进行枢轴。基本上，如果您有由列表项驱动的应用程序，那么 Pivot 控件是您的最佳选择：

在所描述的页面中选择一个项目与 Pivot 控件无关，Pivot 控件仅帮助您通过 Map 从 List 转到 AddP。

并滚动页面；见附件示例![在此处输入图像描述](../Images/734f94757b45f193d3c18411ac7dd143.png)：

希望这会有所帮助。

问候

# igraph - igraph中基于直接邻居的节点值计算

> ID：15473104
> 
> 赞同：0
> 
> 时间：2013-03-18T09:12:49.930
> 
> 标签：igraph, nearest-neighbor

我是 igraph 的新手。我正在尝试计算混合中心性（例如：节点的混合度中心性（v）是其所有直接邻居的度中心性的总和）。我有大约 1500 个节点，那么如何计算 igraph 中的混合中心性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:32:31.677

在 R 中，使用该`neighbors()`函数获取节点的相邻顶点，然后用它索引您预先计算的度向量。

# ruby-on-rails - 如何使用 FriendlyId、rails 显示路径

> ID：15473105
> 
> 赞同：0
> 
> 时间：2013-03-18T09:12:51.547
> 
> 标签：ruby-on-rails, path, friendly-id

我的任务是能够在浏览栏中看到当前类别或产品的路径。

此时我只能看到这样的当前类别

本地主机：3000/类别/smalcinataji

但我想要这样

本地主机:3000/类别/atkritumu-parstrades-tehnika/smalcinataji

为了创建漂亮的 url，我使用了这个示例中名为 FriendlyId 的 gem [http://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:56:01.097

FriendlyId 可以采用[一种方法来构造 slug](http://rubydoc.info/github/norman/friendly_id/master/FriendlyId/Slugged#label-Column+or+Method%3F)。

```
class Person < ActiveRecord::Base
  friendly_id :category_and_subcategory

  def category_and_subcategory
    "#{my_category_method}/#{my_subcategory_method}"
  end
end 
```

请注意，由于额外的斜线可能会导致路由问题，但如果需要，肯定也有解决此问题的方法。

# xml - 优化我的 XSLT 选择器

> ID：15473108
> 
> 赞同：0
> 
> 时间：2013-03-18T09:13:02.610
> 
> 标签：xml, xslt, orbeon

我正在使用 orbeon 表单构建器，并希望为某些元素的类属性添加一个值。为此，我使用下面的代码，但我想知道如何优化此代码。必须可以组合每 2 个模板标签，因为唯一的区别是案例 1 我将类属性设置为一个值，而在案例 2 中我将一些文本添加到类属性..

也许甚至可以将所有这些代码组合成 1 个模板标签？（一个具有多个选择器（匹配）并具有设置/附加类属性？

```
Case 1: 
   <xsl:template match="xforms:input/@id">
        <xsl:attribute name="id" select="."/> 
        <xsl:attribute name="class">tsbinput-<xsl:value-of select="."/></xsl:attribute>      
   </xsl:template> 
Case 2:
   <xsl:template match="xforms:input/@class">
        <xsl:attribute name="class"><xsl:value-of select="."/> tsbinput-<xsl:value-of select="../@id"/></xsl:attribute>      
   </xsl:template>

Case 1:    
    <xsl:template match="fr:number/@id">
        <xsl:attribute name="id" select="."/> 
        <xsl:attribute name="class">tsbinput-<xsl:value-of select="."/></xsl:attribute>      
   </xsl:template> 
Case 2:
   <xsl:template match="fr:number/@class">
        <xsl:attribute name="class"><xsl:value-of select="."/> tsbinput-<xsl:value-of select="../@id"/></xsl:attribute>      
   </xsl:template>

Case 1:
   <xsl:template match="fr:textcount/@id">
        <xsl:attribute name="id" select="."/> 
        <xsl:attribute name="class">tsbinput-<xsl:value-of select="."/></xsl:attribute>      
   </xsl:template> 
Case 2:
   <xsl:template match="fr:textcount/@class">
        <xsl:attribute name="class"><xsl:value-of select="."/> tsbinput-<xsl:value-of select="../@id"/></xsl:attribute>      
   </xsl:template> 
```

请帮我。谢谢，尼科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:35:40.420

是的，这些模板可以简化一点。您可以用以下三个替换您拥有的六个：

```
 <xsl:template match="@id[parent::xforms:input or 
                           parent::fr:number or 
                           parent::fr:textcount]">
    <xsl:copy />
    <xsl:attribute name="class">
      <xsl:value-of select="concat(../@class, ' tsbinput-', .)"/>
    </xsl:attribute>
  </xsl:template>

  <xsl:template match="@class[../@id]
                             [parent::xforms:input or 
                              parent::fr:number or 
                              parent::fr:textcount]" />

  <xsl:template match="@class[not(../@id)]
                             [parent::xforms:input or 
                              parent::fr:number or 
                              parent::fr:textcount]">
    <xsl:copy />
  </xsl:template> 
```

如果可以保证`xforms:input`, `fr:number`, 和`fr:textcount`总是**有**一个`@id`属性，那么你可以删除第三个模板。

进一步简化的一种方法是将此键添加到 XSLT 的顶部：

```
 <xsl:key name="kAdjustClass" 
           match="xforms:input | fr:number | fr:textcount"
           use="name()" /> 
```

然后您可以将上述三个模板更改为：

```
 <xsl:template match="@id[key('kAdjustClass', name(..))]">
    <xsl:copy />
    <xsl:attribute name="class">
      <xsl:value-of select="concat(../@class, ' tsbinput-', .)"/>
    </xsl:attribute>
  </xsl:template>
  <xsl:template match="@class[../@id][key('kAdjustClass', name(..))]" />
  <xsl:template match="@class[not(../@id)][key('kAdjustClass', name(..))]">
    <xsl:copy />
  </xsl:template> 
```

# c# - 在配置中设置 Windows 服务帐户

> ID：15473109
> 
> 赞同：0
> 
> 时间：2013-03-18T09:13:03.707
> 
> 标签：c#, configuration, windows-services, service-accounts, service-installer

我需要在配置文件中为 Windows 服务设置 serviceaccount。但我无法访问安装程序中的配置值。我读[了这个](https://stackoverflow.com/questions/7633918/windows-service-installer-not-reading-app-config-file)问题，但我不想使用安装参数。有没有办法做到这一点？

**编辑：** 我也尝试[了一些解决方案，](https://stackoverflow.com/questions/379276/windows-service-cant-access-app-config-from-within-my-installers-constructor)但我无法在安装程序类中访问 Configuration 或 ConfigurationManager ......我应该添加一些参考吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:04:14.993

经过大量研究，我找到了自己的解决方案......

首先添加对 System.Configuration 的引用

然后在安装程序类中添加以下代码

```
Assembly service = Assembly.GetAssembly(typeof(ProjectInstaller));
string assemblyPath = service.Location;
Configuration config = ConfigurationManager.OpenExeConfiguration(assemblyPath);
KeyValueConfigurationCollection mySettings = config.AppSettings.Settings;
processInstaller.Account = (ServiceAccount)Enum.Parse(typeof(ServiceAccount), mySettings["Account"].Value); 
```

我现在很开心！！:)

# c# - 当键包含在第二个字典中时，从字典中选择所有元素

> ID：15473118
> 
> 赞同：1
> 
> 时间：2013-03-18T09:13:24.573
> 
> 标签：c#, .net, linq, dictionary

我有两个字典： `Dictionary<DateTime, decimal> d1;`和`Dictionary<DateTime, decimal> d2;`

我想要两个执行 linq 查询以从 d1 中选择所有元素`d2..ContainsKey(d1.key);`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T09:17:25.573

```
var results = d1.Where(x => d2.ContainsKey(x.Key)).Select(x => x.Value).ToList(); 
```

或者从选定的数据创建另一个字典：

```
var results = d1.Where(x => d2.ContainsKey(x.Key)).ToDictionary(x => x.Key, x => x.Value); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T09:19:10.550

如果您想要十进制值作为结果：

```
IEnumerable<decimal> result = d2.Keys.Intersect(d1.Keys).Select(k => d1[k]); 
```

如果您想从交集处获取新字典：

```
Dictionary<DateTime, decimal> result = d2.Keys.Intersect(d1.Keys)
                                              .ToDictionary(k => k, k => d1[k]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T09:17:23.653

```
from rec in d1 where d2.ContainsKey(rec.key) select d1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T09:17:27.863

试试这个：

```
var values = d1.Where(kvp => d2.ContainsKey(kvp.Key)).Select(kvp => kvp.Value); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T09:27:41.237

```
d1.Keys.Intersect(d2.Keys).ToDictionary( x => x, x => d1[x]); 
```

或者

```
d1.Keys.Where(k => d2.ContainsKey(k)).ToDictionary( x => x, x => d1[x]); 
```

# c - 如何使用 unix 命令插入文件？

> ID：15473119
> 
> 赞同：-2
> 
> 时间：2013-03-18T09:13:24.607
> 
> 标签：c, unix, command

我想使用 unix 命令插入文件

```
New_IP=New_IP=strtok(Network_config,delimeter);
system("sed -i ' i '$New_IP'  ' Network_settings.txt"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:35:00.827

您不能`$New_IP`像在其他脚本语言中那样在 C 字符串中使用。

例如，在 c 中，您必须以这种方式插入变量

```
char *command;

asprintf(command, "sed -i ' i '%s'  ' Network_settings.txt", New_IP);
system(command);
free(command) // if command is useless in your code then free it 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:32:03.817

将这样的值作为环境变量传递给命令行，并让 shell 扩展它们是最安全的。这避免了大量的字符串转义麻烦。所以也许：

```
New_IP=strtok(Network_config,delimeter);
setenv("New_IP", New_IP);
system("sed -i \" i $New_IP  \" Network_settings.txt"); 
/* note backshaled \" in string above are for C compiler */ 
```

注意：如果`New_IP`不小心包含换行符，上面将不起作用，因为*sed在使用**sed* `i`命令时希望那些用反斜杠转义。此外，允许换行将允许输入有更多的 sed 命令，这可能会做一些讨厌的事情，例如使用 sed`w`命令。所以`New_IP`应该为*sed*清理 definitiley ，但幸运的是，这比清理 shell 简单得多，这可以通过使用 env 变量来避免。

# java - 在java中读取字节数组backwords

> ID：15473124
> 
> 赞同：0
> 
> 时间：2013-03-18T09:13:39.333
> 
> 标签：java, android, bytearray

我有一个非常大的字节数组。我想向后阅读它，直到找到像**BEGIN:VCARD** OR **END:VCARD**等这样的字符串。如果可能的话，我想逐行访问数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:19:48.990

这应该是一个简单的编码问题，使用[`String.lastIndexOf(String str, int fromIndex)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#lastIndexOf%28java.lang.String,%20int%29). 剩下的就看你了。

* * *

如果字节数组太大以至于将其转换为单个字符串会占用太多内存，则向后扫描数组以查找行边界，为每行创建一个字符串，并`lastIndexOf`在每行字符串上使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T09:20:38.523

如果性能不是那么重要，您可以首先通过字节数组构造函数 (new String(byte[] bytes)) 构建一个字符串，然后 String.lastIndexOf(String str) 是您的朋友。它将为您提供给定字符串**最后一次出现的位置。**

# ios - 为什么我会漏水？

> ID：15473128
> 
> 赞同：5
> 
> 时间：2013-03-18T09:13:50.863
> 
> 标签：ios, objective-c, xcode, instruments, gamekit

我有一个只包含这个的应用程序：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //Authenticate Local GameCenter player
    [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:^(NSError *error)
     {
         [GKTurnBasedMatch loadMatchesWithCompletionHandler:^(NSArray *matches, NSError *error)
          {

          }];
     }];
} 
```

马上，我得到了大量的泄漏。难道我做错了什么？我使用 ARC。

![在此处输入图像描述](../Images/7f6dd8a057893df7462d8f3ad42fff8c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T09:44:35.980

`loadMatchesWithCompletionHandler:`方法的泄漏`GKTurnBasedMatch`是 iOS 6.0.1 中的一个已知问题，[已在 iOS 6.1 中修复](https://stackoverflow.com/q/14561526/335858)。

PS 该`authenticateWithCompletionHandler:`方法在 iOS 6 中已弃用，但不对泄漏负责。

# c# - IE 9 上未显示 Favicon 图标

> ID：15473129
> 
> 赞同：0
> 
> 时间：2013-03-18T09:13:51.177
> 
> 标签：c#, asp.net, html, .net, vb.net

Favicon 图标在 chrome、mozilla firefox 上显示，我也尝试过其他浏览器，但在 IE 9 中没有显示。我无法找到问题所在。

我将下面的代码粘贴在 MasterPage 内的 head 标记内（使用 Visual Studio）

```
<head runat="server">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
    <title>DemoPage</title>
    <link href="css/patrika.min.css" rel="stylesheet" />

    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head> 
```

但是 IE 9 中仍然没有显示 favicon。有没有其他方法可以做到这一点.. 或者我做错了什么，因为它在其他浏览器上运行良好 - chrome，firefox ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:18:53.340

为了获得最一致的结果，请使用域根文件夹中 favicon.ico 文件的绝对路径：

```
<link href="//yourdomain/favicon.ico" rel="shortcut icon" type="image/x-icon" /> 
```

您还必须检查的其他情况是： 1\. 您是否将 jpg 重命名为 ico？如果是这样，请将文件创建为 ico，它将按预期工作。2\. 如果站点是封闭站点，需要登录，图标不会显示。在 web.config 中为 favicon.ico 添加一个例外：

```
<location path="favicon.ico">
  <system.web>
     <authorization>
       <allow users="*" />
     </authorization>
  </system.web>
</location> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:19:56.347

查看您的网络浏览器的访问日志文件。你实际上可以看到各种浏览器在哪里寻找 favicon.ico 文件，然后把它放在那里 IE9 正在寻找它。

众所周知，如果某些浏览器在第一次尝试时没有这样做，就很难触发重新读取 favicon.ico 文件。因此，请确保您看到它正在尝试检索，包括重新启动浏览器并在必要时清除其缓存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:19:22.693

伙计们！感谢您的回答和支持！！

我现在得到了解决方案我们必须在 head 标签内添加这样的内容

```
<link rel="shortcut icon" href="~/favi.ico" type="text/x-html-insertion" /> 
```

Favicon 现在也在 IE 9 中工作。希望这对您将来也有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T09:39:44.097

使用图标的完整路径

```
<link rel="shortcut icon" href="http://www.yourdomain.com/images/favicon.ico" type="image/x-icon" /> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-18T09:17:44.187

只需刷新页面或删除缓存并刷新它，favicon 的浏览器之间没有区别。

# javascript - 用于 Windows 8 javascript 的语义缩放

> ID：15473135
> 
> 赞同：4
> 
> 时间：2013-03-18T09:14:17.483
> 
> 标签：javascript, windows-8

我正在使用 JavaScript 开发应用程序并希望使用[**`SemanticZoom`**](http://msdn.microsoft.com/en-us/library/windows/apps/hh465492.aspx).

我们只使用一个列表视图，但我的页面中有多个列表视图。

这是我现在正在使用的示例代码：

```
 <section>
 <table><tr><td style="width: auto; height: 100%; display: none;" id="myDealsSection">
                        <table style="height: 100%; margin-left: 80px; margin-bottom: 
      50px;">
                            <thead>
                                <tr>
        <td ><span id="MyDealsHead" style="font-size: 20pt; font-family: 'Segoe UI
       Light'; padding-left: 5px;">My Deals</span><span id="myDealsHdrArrw"style="font-             
    size:20pt;"> &#xe013;</span></td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
               <td style="width: auto; height: 100%; vertical-align: top;">
      <div id="homePageDealsList" aria-label="List of this group's items"style="height:
   100%; width: auto;" data-win-control="WinJS.UI.ListView" data-win-options="{
   selectionMode: 'none',layout: {type:WinJS.UI.GridLayout} }"></div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
       <td style="width: 100%; height: 100%; display: none;" id="pinnedDealsSection">
                        <table style="height: 100%; margin-left: 80px;">
                            <thead style="width: 100%;">
                                <tr>
                                    <td><span id="pinnedDeals" style="padding-left: 
   5px; font-size: 20pt; font-family: 'Segoe UI Light';">Pinned Deals</span><span 
   id="pinnedDealsHdrArrw" style="font-size:20pt;"> &#xe013;</span></td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="width: auto; height: 100%; vertical-
     align: top;">
                                        <div id="pinnedDealsList" 
   class="pinnedDealsItemsList" aria-label="List of this group's items" style="height:
 100%; width: auto; margin-bottom: 50px;" data-win-control="WinJS.UI.ListView" data-
  win-options="{ selectionMode: 'none', layout: {type:WinJS.UI.GridLayout} }"></div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td></tr></table>
 </section> 
```

**如何将两个列表视图添加到放大视图？** 我无法理解如何做到这一点。

`SemanticZoom`示例访问： http : [//msdn.microsoft.com/en-us/library/windows/apps/hh465492.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465492.aspx)

# c# - FlowDocumentScrollViewer FontSize 不会更改 FlowDocument 内容 FontSize

> ID：15473141
> 
> 赞同：4
> 
> 时间：2013-03-18T09:14:44.310
> 
> 标签：c#, wpf, xaml, flowdocument, flowdocumentscrollviewer

谁能解释一下我为什么下面的代码不起作用

```
<UserControl x:Class="FlowDocReader.FlowDocumentScrollViewerIssues"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">

        <FlowDocumentScrollViewer FontSize="56">
            <FlowDocument>
                <Paragraph>
                    this text should be FontSize 56
                </Paragraph>
            </FlowDocument>
        </FlowDocumentScrollViewer>

</UserControl> 
```

如您所见，`FontSize`不是 56，我不知道出了什么问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-18T07:37:24.003

嗨，在我再次遇到同样的问题后，我能够解决这个问题

您可以使用样式进行简单更改，但前提是 FontSize 不固定

**不会工作**

```
 <FlowDocumentScrollViewer FontSize="56">
        <Style TargetType="{x:Type FlowDocument}">
            <Setter Property="FontSize" Value="56"/>
        </Style>
        <FlowDocument FontSize="56">
            <Paragraph>
                this text should be FontSize 56
            </Paragraph>
        </FlowDocument>
    </FlowDocumentScrollViewer> 
```

**将工作**

```
 <FlowDocumentScrollViewer FontSize="56">
        <Style TargetType="{x:Type FlowDocument}">
            <Setter Property="FontSize" Value="56"/>
        </Style>
        <FlowDocument>
            <Paragraph>
                this text should be FontSize 56
            </Paragraph>
        </FlowDocument>
    </FlowDocumentScrollViewer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:56:24.710

拿着这个：

```
 <FlowDocumentScrollViewer >
            <FlowDocument FontSize="50">
                <Paragraph>
                    this text should be FontSize 56
                </Paragraph>
            </FlowDocument>
        </FlowDocumentScrollViewer> 
```

# translation - 微软翻译 API

> ID：15473146
> 
> 赞同：1
> 
> 时间：2013-03-18T09:15:04.607
> 
> 标签：translation, microsoft-translator, translators

**我对 Microsoft Translator API 有一些疑问**

1.如果我在字符限制结束之前使用试用期，我会从 datamarket.azure.com 中配置的电子邮件中获取任何电子邮件。我已经看到当我们的订阅余额为每月限额的 15% 并且我们的余额完全用完时，我们的帐户中会出现通知，但我认为这些通知将显示在我们的 www.datamarket.azure.com 帐户中。定期检查我们的帐户是不好的。那么微软还有其他方法吗？

2.付费服务是否也有任何特定的每日限定字符或交易？

我提到了这个链接，但我没有得到太多细节

[https://datamarket.azure.com/help-overview-purchasing-subcribing-data-apps#x_taxes](https://datamarket.azure.com/help-overview-purchasing-subcribing-data-apps#x_taxes)

请为我提供上述问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:35:26.980

微软翻译支持已针对上述查询发送回复如下

1.此时余额不足的通知仅出现在您的 Windows Azure Marketplace 帐户中。余额不足的电子邮件通知是我们希望在未来版本的 Marketplace 中包含的优先功能。如果您订阅按月付费订阅，上周为付费翻译 API 订阅者添加了一个名为“自动重新填充”的新功能，您可能会发现这很有用，具体取决于您的使用场景。

如果您为您的付费翻译 API 订阅启用此功能，则您允许 Marketplace 在您的余额达到每月订阅限额的 10% 或更少时自动补充您的订阅。更多关于自动充值的信息可以在这里找到。

2.您目前每个请求最多可以翻译 10000 个字符，但我们建议将每个请求保持在 2000 到 5000 个字符之间以优化响应时间。

# mysql - 在外键中输入的不在主键中的值

> ID：15473149
> 
> 赞同：0
> 
> 时间：2013-03-18T09:15:11.063
> 
> 标签：mysql

我正在使用 xampp 并且我为两个表创建了 realation .. 我的意思是在第一个表中我有一个主键，第二个表有一个引用主键的列。当我在第二个表中输入一个值（主键中没有输入 id）时，该值输入完美，没有显示任何错误。如何避免？

# python-2.7 - 使用python的statsmodel中的相关性

> ID：15473156
> 
> 赞同：1
> 
> 时间：2013-03-18T09:15:47.773
> 
> 标签：python-2.7, statsmodels

你能帮我找到这两个列表在python中导入stats-model的相关性吗？

```
 a=[1.0,2.0,3.0,2.0]
  b=[789.0,786.0,788.0,785.0] 
```

使用一些内置函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:22:05.410

```
>>> import numpy as np
>>> a = np.array([1.0,2.0,3.0,2.0])
>>> b = np.array([789.0,786.0,788.0,785.0])
>>> np.corrcoef(a,b)
array([[ 1\.       , -0.2236068],
       [-0.2236068,  1\.       ]]) 
```

只需使用索引来提取正确的：

```
np.corrcoef(a,b)[0,1] 
```

# mysql - sudo 用于使用 mysql 与匿名用户连接的脚本

> ID：15473161
> 
> 赞同：1
> 
> 时间：2013-03-18T09:16:01.203
> 
> 标签：mysql, bash, sudo, anonymous-users

我有以下脚本：

```
[root@localhost:~]# cat /mnt/start_discovery
#!/bin/sh
InterfaceNumber=$((65471 - $1))
mysql --user=' ' --execute="insert into dc.discovery_commands(device, job_ttd) select $InterfaceNumber, DATE_ADD( UTC_TIMESTAMP(), INTERVAL 12 HOUR);" 
```

和 3 个允许执行命令的用户：root、ste 和 www。用户 ste 和 www 使用 sudo 执行命令，root 工作没有 sudo。

```
[root@localhost:~]# cat /etc/sudoers
root    ALL=(ALL)   ALL
ste     ALL=(ALL)   ALL
www     ALL=/mnt/start_discovery *,\
            sh -xv * 
```

当我从用户 www 运行命令时 - 一切都很好：

```
[www@localhost:~]$ sudo sh -xv /mnt/start_discovery 0
#!/bin/sh
InterfaceNumber=$((65471 - $1))
+ InterfaceNumber=65471
mysql --user=' ' --execute="insert into dc.discovery_commands(device, job_ttd) select $InterfaceNumber, DATE_ADD( UTC_TIMESTAMP(), INTERVAL 12 HOUR);"
+ mysql --user=  --execute=insert into dc.discovery_commands(device, job_ttd) select 65471, DATE_ADD( UTC_TIMESTAMP(), INTERVAL 12 HOUR); 
```

但对于用户 ste：

```
[ste@localhost:~]$ sudo sh -xv /mnt/start_discovery 0
#!/bin/sh
InterfaceNumber=$((65471 - $1))
+ InterfaceNumber=65471
mysql --user=' ' --execute="insert into dc.discovery_commands(device, job_ttd) select $InterfaceNumber, DATE_ADD( UTC_TIMESTAMP(), INTERVAL 12 HOUR);"
+ERROR 1045 (28000): Access denied for user ' '@'localhost' (using password: YES) 
```

相同，对于用户 root：

```
[root@localhost:~]# sh -xv /mnt/start_discovery 0
#!/bin/sh
InterfaceNumber=$((65471 - $1))
+ InterfaceNumber=65471
mysql --user=' ' --execute="insert into dc.discovery_commands(device, job_ttd) select $InterfaceNumber, DATE_ADD( UTC_TIMESTAMP(), INTERVAL 12 HOUR);"
+ERROR 1045 (28000): Access denied for user ' '@'localhost' (using password: YES) 
```

对于用户 root 和 ste，我在文件 ~/.my.cnf 中有 mysql 的密码，对于用户 www - 没有任何访问 mysql 的权限。创建 mysql 的用户：

```
[root@localhost:~]# mysql -e "select user,host,password from mysql.user;"
+------+-----------+-------------------------------------------+
| user | host      | password                                  |
+------+-----------+-------------------------------------------+
| root | localhost | *48A8ACDAF5434778D6B5D0254833B2AEC555514A |
| ste  | localhost | *425AF4AF33C4FB42AC52A0A6630DEE61AB94A67A |
|      | localhost |                                           |
+------+-----------+-------------------------------------------+ 
```

任何想法为什么会这样？以及如何更好地使所有用户都有可能执行此脚本（脚本具有权限 750 并且需要 sudo）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:44:29.437

`ste`尝试 #2 和 #3（以或运行脚本`root`）时出现的错误提及“ `(using password: YES)`”，尽管在脚本的调用行上没有提供密码。

这两个用户必须有一个自定义的个人配置文件 (~/.my.cnf)，其中包含一个`password`子句（在这种情况下，默认情况下总是提供这样的密码）。

尝试在脚本中添加以下选项：`--password=''`

# asp.net - 获取 DNN 模块中新记录的 id

> ID：15473163
> 
> 赞同：0
> 
> 时间：2013-03-18T09:16:12.573
> 
> 标签：asp.net, asp.net-mvc, linq, dotnetnuke, dotnetnuke-module

我是 DNN 模块开发和使用 MVC 和 Linq 的新手。已经建立了一个类和控制器，允许我在数据库的表中创建记录。谁能告诉我检索新创建记录的 id 的最佳方法？用于创建记录的控制器部分如下。

```
class BlockController
{
    public void CreateBlock(Block b)
    {
        using (IDataContext ctx = DataContext.Instance())
        {
            var rep = ctx.GetRepository<Block>();
            rep.Insert(b);
        }
    }
} 
```

从代码调用控制器

```
 var bC = new BlockController();
            var b = new Block()
            {
                SectionId = int.Parse(ddlPickSection.SelectedValue),
                PlanId = int.Parse(ddlPickPlan.SelectedValue),
                BlockName = bId,
                BlockDesc = "",
                xPos = bX,
                yPos = bY,
                width = arrBWidths[i],
                ModuleId = ModuleId,
                CreatedOnDate = DateTime.Now,
                CreatedByUserId = UserId,
                LastModifiedOnDate = DateTime.Now,
                LastModifiedByUserId = UserId,
            };

            bC.CreateBlock(b); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:13:19.127

当您提交更改（在 DB 中插入记录）时，ID 将在 b 对象中可用：

```
...
rep.InsertOnSubmit(b);
ctx.SubmitChanges();

int desireID = b.id; 
```

# php - 使用自定义导航菜单时找不到帖子

> ID：15473170
> 
> 赞同：0
> 
> 时间：2013-03-18T09:16:32.870
> 
> 标签：php, wordpress

我正在使用 Wordpres Bootstrap 主题/框架。在 header.php 页面中，我创建了一个脚本，用于构建导航菜单并在需要时自动添加下拉子菜单（带有子链接）。该脚本运行良好，但问题是当我查看帖子（在我的情况下是页面）时，我得到“未找到”。相反，如果我禁用脚本并使用默认菜单，则会正确显示帖子（页面）。我认为我的脚本有问题。我把它贴在这里，希望有人能解开这个谜。

```
<?php

    $menu_name = 'main_nav';

    if ( ( $locations = get_nav_menu_locations() ) && isset( $locations[ $menu_name ] ) ) {
        $menu = wp_get_nav_menu_object( $locations[ $menu_name ] );
        $menu_items = wp_get_nav_menu_items($menu->term_id);

        // --- Menu ---
        echo '<ul id="menu-' . $menu_name . '" class="nav">';

        foreach ( (array) $menu_items as $key => $menu_item ) {
            $title = $menu_item->title;
            $url = $menu_item->url;

            $args_post = array(
                'category_name' => $title,
                'post_type' => 'page',
                'orderby' => 'name',
                'order' => 'ASC'
            );  
            query_posts($args_post); 

            if (have_posts()){
?>
                <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#"><?php echo $title; ?><b class="caret"></b></a>

                <!-- Sub-menu -->
                <ul class="dropdown-menu submenu">
                <?php
                    while (have_posts()) : the_post();  
                ?>

                    <li><a href="<?php the_permalink() ?>" title="<?php the_title_attribute(); ?>"><?php the_title(); ?></a></li>

                <?php 
                    endwhile;
                ?>
                </ul> <!-- end Sub-menu -->

<?php
            wp_reset_query();

            } else {
                echo '<li class="">';
                echo '<a href="' . $url . '">' . $title . '</a>';               
            } 

            echo '</li>'; 
        } // foreach
        echo '</ul>'; 

    } else {
        echo '<ul><li>Menu "' . $menu_name . '" not defined.</li></ul>';
    }

?> 
```

# php - 警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果 - PHP

> ID：15473172
> 
> 赞同：0
> 
> 时间：2013-03-18T09:16:37.387
> 
> 标签：php, mysql, sql, arrays

我有这段 php 代码：

```
$dcs = mysql_query("SELECT `locations.l_name`, `locations.location_id`
                    FROM `locations`, `cabinet`
                    WHERE `locations.location_id` = `cabinet.datacentre_id`
                    GROUP BY `locations.location_id`
                    ORDER BY `locations.l_name`");
while ($row = mysql_fetch_array($dcs)) {
echo '<option value="' .$row['location_id']. '">' .htmlspecialchars($row['l_name']). '</option>';                               } 
```

但是当我运行它时，我得到了这个错误：

`Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource`

我很确定这是数据库的问题，而不是代码的问题。任何想法可能是什么问题？或者我需要注意什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:18:28.107

您的`SELECT`查询不正确。您将表名和列名包装为一个，导致服务器找不到列名。它们应该单独包装。

```
SELECT  `locations`.`l_name`, 
        `locations`.`location_id`
FROM    `locations`, `cabinet`
WHERE   `locations`.`location_id` = `cabinet`.`datacentre_id`
GROUP   BY `locations`.`location_id`
ORDER   BY `locations`.`l_name` 
```

由于它们都不是mysql中的保留关键字，`backticks`因此是可选的。

```
SELECT  locations.l_name, 
        locations.location_id
FROM    locations, cabinet
WHERE   locations.location_id = cabinet.datacentre_id
GROUP   BY locations.location_id
ORDER   BY locations.l_name 
```

还有一件事，请使用较新的连接语法。

```
SELECT  locations.l_name, 
        locations.location_id
FROM    locations 
        INNER JOIN cabinet 
            ON locations.location_id = cabinet.datacentre_id
GROUP   BY locations.location_id
ORDER   BY locations.l_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:30:00.687

对我来说效果很好......虽然当然要注意这个 PHP 方法已被“弃用”！......

```
<?php

 include('path/to/connection/stateme.nts');
 $query = "
 SELECT DISTINCT l.l_name
               , l.location_id
            FROM locations l
            JOIN cabinet c
              ON c.datacentre_id = l.location_id  
           ORDER 
              BY l.l_name;
              ";

 $result = mysql_query($query) or die(mysql_error());

 while ($row = mysql_fetch_array($result)) 
 {
 echo '<option value="' .$row['location_id']. '">' .htmlspecialchars($row['l_name']). '</option>';
 }
 ?> 
```

# jquery - 如何根据条件在全日历中添加按钮或链接

> ID：15473174
> 
> 赞同：0
> 
> 时间：2013-03-18T09:16:54.963
> 
> 标签：jquery, fullcalendar

我是 Fullcalendr 的新手。我想在完整的日历单元格中添加一个按钮或链接，如果该日期的事件数大于 3。此外，当用户单击该按钮时，我想附加一个 div，这将显示所有我的事件。我试过

```
 $(".fc-day-number").prepend("(+) "); 
```

这个，但它为所有单元格添加了一个加号。谢谢，我会这样做吗，Naeem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-05T06:39:45.037

例如。健康）状况。在这里，它在存在事件描述的单元格上设置绿色：

* * *

事件渲染：函数（事件，元素）{

```
 if (event.description != null) {
            element.css('background-color', 'Green');
        }

    } 
```

# android - 拉动刷新并加载到列表视图中

> ID：15473175
> 
> 赞同：4
> 
> 时间：2013-03-18T09:16:58.193
> 
> 标签：android, listview, custom-adapter, pull-to-refresh

我需要在listview 中实现pull 刷新和加载。我使用自定义适配器创建listview。如何使用适配器类实现pull 刷新和加载。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T10:28:25.807

这是适合您要求的现成参考演示。只需查看以下链接以了解 Pull To Refresh 实施。

1)[拉动刷新](https://github.com/johannilsson/android-pulltorefresh)
2)可刷新的[ListView](https://github.com/woozzu/RefreshableListView)
3) [Android 拉动刷新](https://github.com/chrisbanes/ActionBar-PullToRefresh)

我希望它能指导你。

谢谢。

# c# - 在休眠会话中获取集合

> ID：15473178
> 
> 赞同：0
> 
> 时间：2013-03-18T09:17:07.210
> 
> 标签：c#, hibernate, nhibernate

一处房产有很多照片。一张照片属于一个财产。

在我的 mvc 控制器中，我得到了整数参数数组。这些整数代表我要删除的 Photo 的 id。

我正在使用 nhibernate 会话和事务与数据库交互。

```
public ActionResult DeleteImgs(int[] data)
{
   Property p = null;
   using (ISession session = ....)
   {
      using(ITransaction transaction session.BeginTransaction())
      {            
         Photo photo = session.Get<Photo>(data[0]);
         p = session.Get<Property>(photo.Id);
         // found images and delete them
         foreach(int id in data)
         {
            Photo ph = session.Get<Photo>(id);
            //remove property from association so I can delete photo
            ph.Property = null;
            session.Delete(ph);
            session.SaveOrUpdate(ph);
         }
         //load property now with collection of remaining photos
         // here IS THE PROBLEM, Even there is photos inside collection
         // in debug I'm getting empty collection
         p = session.Query<Property>().
             .Fetch(x=>x.Photos).ToList() //empty?
             .FirstOrDefault;

         transaction.Commit();
      }
   }
   return View(); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:39:54.247

由于我只是将 IEnumrable 的照片发送到视图问题是这样解决的，而不是发送延迟加载属性照片集合，我正在发送 IEnumerable 的照片像这样

```
IEnumerable<Photo>photos = session.Query<Photo>().Where(x => x.Property == p).ToList(); 
```

# android - 安卓谷歌地图不出现

> ID：15473186
> 
> 赞同：0
> 
> 时间：2013-03-18T09:17:40.777
> 
> 标签：android, google-maps

这是我的清单文件：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library android:name="com.google.android.maps"/>
    <activity
        android:name="com.docuart.maps.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

   <com.google.android.maps.MapView
  android:id="@+id/mapGoogle"
  android:enabled="true"
  android:clickable="true"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"                 
             android:apiKey="my api key" />

</LinearLayout> 
```

这是我的代码：

```
public class MainActivity extends MapActivity {

private static final int MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1;//metre 
private static final int MINIMUM_TIME_BETWEEN_UPDATES = 1000;//milisaniye

protected LocationManager locationManager;
MapView mView;
MapController mapController;
GeoPoint gPoint;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mView = (MapView) findViewById(R.id.mapGoogle);

    mView.displayZoomControls(true);
    mView.setBuiltInZoomControls(true);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,   MINIMUM_TIME_BETWEEN_UPDATES , MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, new MyLocationListener());

    Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

    if(location != null){
        gPoint = new GeoPoint((int)(location.getLatitude()*1000000),(int)(location.getLongitude()*1000000));

        mapController = mView.getController();
        mapController.animateTo(gPoint);            
        mapController.setZoom(14);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public class MyLocationListener implements LocationListener{
    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
 gPoint = new GeoPoint((int)(location.getLatitude()*1000000),(int)(location.getLongitude()*1000000));

        mapController = mView.getController();
        mapController.animateTo(gPoint);

        mapController.setZoom(14);
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }}

   protected boolean isRouteDisplayed() {
            return false;
        }    
} 
```

项目正在运行，但我看不到我的位置。我找不到哪里可能有问题。要查看屏幕截图：[http](http://sdrv.ms/Wyf1Z1) ://sdrv.ms/Wyf1Z1感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:21:08.633

在您的布局中添加您的实际 2.0 auth api 密钥 `android:apiKey="my api key" />`，您必须从[api 密钥控制台](https://code.google.com/apis/console/#project:889157863689)获取。

# javascript - Ajax 请求在 IE 和 OPERA 上不起作用

> ID：15473192
> 
> 赞同：-2
> 
> 时间：2013-03-18T09:17:49.123
> 
> 标签：javascript, jquery, ajax, internet-explorer

出于某种原因，我在使用 ajax 请求时没有得到响应。它不适用于 Internet Explorer 和 Opera。它适用于 Firefox 和 Chrome。这是代码：

```
$(document).ready(function() {
    $("#registration").submit(function (e) {
        e.preventDefault();
        var str = $(this).serialize();
        $.ajax({
            type: "POST",
            url: "/ajax.php",
            data: str,
            success: function (msg) {
            alert(msg);
            }
        });
    });
}); 
```

我添加`AddDefaultCharset utf-8`到`.htaccess`文件中，但仍然无法在 IE 和 Opera 上运行。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:13:47.270

过去我也遇到过同样的问题。解决它的方法是将 .ajax 调用放在 var 上。

```
var callAjax =   function(){
$.ajax({
        type: "POST",
        url: "/ajax.php",
        data: str,
        success: function (msg) {
        alert(msg);
        } 
```

};

还尝试将以下内容放在 jquery Click 事件之外。（全球的）

```
var str = $(this).serialize(); 
```

我希望这有帮助。

# php - 在php中合并两个对象

> ID：15473194
> 
> 赞同：15
> 
> 时间：2013-03-18T09:17:57.543
> 
> 标签：php, object

我使用一个 API 将我返回到给定这样一个数组的电子邮件地址：

```
标准类对象
(
    [状态] => 好的
    [联系方式] => 标准类对象
        (
            [id] => 0000000
            [电子邮件] => toto@free.fr
            [last_activity] => 1362131446
            [last_update] => 0
            [created_at] => 1356617740
            [发送] => 5
            [打开] => 1
            [点击] => 1
            [垃圾邮件] => 0
            [反弹] => 0
            [阻塞] => 0
            [排队] => 0
        )
[列表] => 数组
        (
            [0] => 标准类对象
                (
                    [活跃] => 1
                    [取消订阅] => 1
                    [unsub_at] => 1363078528
                )

        )

)

```

如何在单个对象中将信息 [联系人] 与 [列表] [0] 合并？

感谢您的帮助

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-18T09:26:00.560

```
$info = yourstuff;
$arrContact = (array) $info->contact;
$arrList = (array) $info->lists[0];
$merged = array_merge($arrContact, $arrList);
var_dump($merged, 'have fun'); 
```

相当琐碎;)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-18T09:30:54.597

```
 <?php
$a = new stdClass;
$a->name = 'Anthony';

$b = new stdClass;
$b->location = 'UK';

$c = (object)array_merge((array)$a, (array)$b);

var_dump($c);

/*
    object(stdClass)#3 (2) {
      ["name"]=>
      string(7) "Anthony"
      ["location"]=>
      string(2) "UK"
    }
*/ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-14T11:17:42.917

怎么样：

```
foreach ($info->lists[0] as $key => $value {
  $info->contact->$key = $value;
} 
```

避免在数组和对象之间来回转换

# mysql - 使用月份的日期差异

> ID：15473196
> 
> 赞同：-1
> 
> 时间：2013-03-18T09:18:06.397
> 
> 标签：mysql, datediff

例如，我的数据库中有月份名称。`tomonth`和`frommonth`。存储的数据如“JAN”、“FEB”等。

我该怎么做才能得到`tomonth` 和之间的区别`frommonth`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:40:33.780

试试下面的查询

```
select (tomonth-frommonth) as monthdiff from
( SELECT case when `frommonth` = 'Jan' then 1 
   when frommonth = 'Feb' then 2  
   when frommonth = 'Mar' then 3 
   when frommonth = 'Apr' then 4  
   when frommonth = 'May' then 5  
   when frommonth = 'Jun' then 6  
   when frommonth = 'Jul' then 7  
   when frommonth = 'Aug' then 8  
   when frommonth = 'Sep' then 9  
   when frommonth = 'Oct' then 10  
   when frommonth = 'Nov' then 11  
   when frommonth = 'Dec' then 12 
   end frommonth, 
( case when tomonth = 'Jan' then 1
   when tomonth = 'Feb' then 2  
   when tomonth = 'Mar' then 3 
   when tomonth = 'Apr' then 4  
   when tomonth = 'May' then 5  
   when tomonth = 'Jun' then 6  
   when tomonth = 'Jul' then 7  
   when tomonth = 'Aug' then 8  
   when tomonth = 'Sep' then 9  
   when tomonth = 'Oct' then 10  
   when tomonth = 'Nov' then 11  
   when tomonth = 'Dec' then 12 
   end ) as tomonth from table) a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:57:43.383

您可以使用 STR_TO_DATE：

```
SELECT
  MONTH(STR_TO_DATE(tomonth,'%b'))-MONTH(STR_TO_DATE(frommonth,'%b')) as montdiff
FROM
  yourtable 
```

# ssrs-2008 - SSRS 允许访问安全的 Web 服务作为数据源吗？

> ID：15473198
> 
> 赞同：0
> 
> 时间：2013-03-18T09:18:17.097
> 
> 标签：ssrs-2008

我试图从 SSRS RDL 访问安全的 XML Web 服务作为数据源。但它给出了错误“无法为指定的 URL 准备 Web 请求”。

不确定 SSRS 是否允许访问安全的 Web 服务作为数据源？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:42:58.973

SSRS 允许带有 basicHttpBinding 的 HTTPs。在我的 wcf 服务中，我正在使用 wsHttpBinding，这就是它失败的原因。现在我正在使用 basicHttpBinding 作为我的 SSRS 报告中的数据源来访问它。

# c# - 我想加入两个表，并希望两个表的列都使用 linq

> ID：15473204
> 
> 赞同：0
> 
> 时间：2013-03-18T09:18:27.427
> 
> 标签：c#, linq

我想加入两个表，并希望两个表的列都使用 linq

我有类似的东西

```
var k = (from t in Uow.Transactions.GetAllWithReferences()
         join q in Uow.TransactionDetails.GetAll() on t.TransactionId equals q.TransactionId
         select t) 
```

而不仅仅是 t 和 q 的 tu wabt 列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:21:04.667

使用匿名对象从两个表中选择所有列：

```
var k = from t in Uow.Transactions.GetAllWithReferences()
        join q in Uow.TransactionDetails.GetAll() 
             on t.TransactionId equals q.TransactionId
        select new { t.Column1, t.Column2, q.Colum3 }; 
```

或者只选择匿名对象中的两个实体：

```
var k = from t in Uow.Transactions.GetAllWithReferences()
        join q in Uow.TransactionDetails.GetAll() 
             on t.TransactionId equals q.TransactionId
        select new { Transaction = t, Details = q }; 
```

甚至更好 - 使用[急切加载](http://msdn.microsoft.com/en-us/data/jj574232.aspx)细节。然后代码将如下所示：

```
var k = Uow.Transactions.GetAllIncluding(t => t.Details); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:22:40.457

使用 lambda 语法，创建包含这两项的匿名结果：

```
 var joinResult =  Uow.Transactions.GetAllWithReferences()
          .Join(Uow.TransactionDetails.GetAll(), transaction => transaction,
                   details => details, (transaction, details) => new 
                                          { 
                                             Transaction = transaction,
                                             Details = details
                                          }); 
```

# python - BeautifulSoup 'href' 列表给出了模棱两可的 TypeErrors？

> ID：15473208
> 
> 赞同：0
> 
> 时间：2013-03-18T09:18:30.197
> 
> 标签：python, unicode, types, beautifulsoup

我正在使用 beautifulsoup 从网页中抓取网址。一切都很顺利，直到某些 url 中包含非 ascii 字符。

```
requests.get('http://www.reddit.com')
soup = BeautifulSoup(req.content)

urls = [i.get('href') for i in soup.findAll('a') if
        'keyword' in str(i.get('href'))] 
```

列表推导将返回一个`UnicodeError`.
所以我想把这个列表理解分成两部分：

```
urls = [i.get('href') for i in soup.findAll('a')]

urls = [i.encode('utf-8') for i in urls] 
```

这是我拿到的时候`AttributeError`，说是物品`NoneType`。

我检查了他们的类型：

```
print [type(i) for i in urls] 
```

其中显示了所有 unicode 类型。似乎在说他们是`None`并且`unicode`同时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:30:00.480

你一定错过了`None`价值。我查了一下`www.reddit.com`，果然有：

```
<a name="content"></a> 
```

它的href是`None`。`None`您可以执行以下操作，而不是打印所有值并手动搜索：

```
urls = [(i, i.get('href')) for i in soup.findAll('a')]
print [u for u in urls if u[1] is None] 
```

# c# - .net 中的并发函数

> ID：15473209
> 
> 赞同：1
> 
> 时间：2013-03-18T09:18:31.003
> 
> 标签：c#, .net, multithreading, concurrency, thread-safety

我在多线程业务逻辑中运行以下代码：

```
using System;
using System.Threading.Tasks;

namespace Test
{
    class Program
    {
        static void Main(string[] args)
        {
            var biz1 = new Biz { Some = 1, Value = "a" };
            var biz2 = new Biz { Some = 2, Value = "b" };
            var foo = new Foo();

            //thread 1
            new Task(() => foo.Run(biz1)).Start();
            //thread 2
            new Task(() => foo.Run(biz2)).Start();
            //more threads here for other Biz objects....

            Console.Read();
        }
    }

    public class Biz
    {
        public int Some { get; set; }
        public string Value { get; set; }
    }

    public class Foo
    {
        public void Run(Biz biz)
        {
            //base on the biz object do some task here

        }
    }
} 
```

线程在`biz`任何时候都不会更改对象

问题：

*   `foo.Run`线程安全吗？
*   实例化单个`Foo`对象以运行每个`Biz`对象（这`Run`是唯一的函数`Foo`）会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:34:18.750

> *   foo.Run 线程安全吗？

听起来您的 Foo.Run() 是安全的，这当然取决于访问的其他数据。

> *   实例化单个 Foo 对象以运行每个 Biz 对象是否更好（Run 是 Foo 中的唯一函数）？

假设它是安全的，即它不使用 Foo 的任何实例数据，`Run()`可以而且应该是`static`. 这至少会向读者传达更好的信息。

```
public static class Foo
{
    public static void Run(Biz biz)
    {
        //base on the biz object do some task here

    }
} 
```

# windows - Windows中的智能卡通信建立

> ID：15473212
> 
> 赞同：2
> 
> 时间：2013-03-18T09:18:41.443
> 
> 标签：windows, smartcard, ioctl, smartcard-reader

当我在收到 ATR 后将智能卡插入读卡器时，我可以在驱动程序日志中看到许多 IOCTL 不是由我的应用程序发送的（因为没有运行）。

我的问题是是否有任何文件，描述 Windows 中的智能卡通信建立？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:25:46.547

在 Windows 平台内有用于与智能卡通信的 Win32 API，形式为 SCardXXX。在 Muscle 项目下开发了类似的 Linux 实现，如 PC/SC Lite API。在 Windows 平台上将使用以下函数：

*   ScardEstablishContext
*   SCardListReaders
*   SCardConnect
*   SCard重新连接
*   SCardDisconnect
*   SCardRelease上下文
*   SCardTransmit

图显示了智能卡如何与 Windows 平台上的应用程序结合。

![在此处输入图像描述](../Images/97106684598e5ac74e743a183a35756f.png)

有关更多信息，请参阅[此处](http://www.fi.muni.cz/~xsvenda/docs/SC_BasicsPCSC.pdf)

# php - javascript变量值到php变量并默认加载选项卡内容

> ID：15473213
> 
> 赞同：0
> 
> 时间：2013-03-18T09:18:46.767
> 
> 标签：php, jquery, mysql, jquery-ui

```
var Result; 
$(document).ready(function(){  
location.href="index.php?Result=" +1;  
    $("a").click(function(){        
        Result=$(this).attr('id');   
        location.href="index.php?Result=" + Result;

    })
});

<div id="tabs">
    <ul> 
        <?php include "config.php"; 
        $query = "select * from tabs"; 
        $result = mysql_query($query); 
        while ($row = mysql_fetch_array($result)) { 
            $name = $row['name']; $tabid = $row['tabid']; 
            echo '<li><a id="' . $tabid . '" href="#' . $name . '"> ' . $name . '</a></li>'; 
        } ?> 
    </ul>
</div> 
```

嗨，我有七个选项卡，它们是使用 mysql 查询从数据库中获取的，在每个选项卡上单击时将选项卡值从 javascript 传递到 php 变量，并使用该选项卡值运行所需的查询以将数据加载到选项卡中，我的问题是默认情况下我无法加载第一个选项卡内容，单击第一个选项卡内容正在正确加载，我希望默认情况下加载第一个选项卡内容这里使用 jquery ui 选项卡，当我通过在 onclick 之前调用第一个选项卡来遵循上述代码时它正在加载多次....默认情况下甚至焦点都移动到第一个选项卡...建议任何解决方案......谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:34:54.363

```
var Result; 
$(document).ready(function(){  
    $("a").click(function(){        
        Result=$(this).attr('id');   
        location.href="index.php?Result=" + Result;

    })
} 
```

和身体标签

```
<body onload="location.href='index.php?Result=1'"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:36:11.033

这将自动触发第一次选项卡单击。

```
<script type="text/javascript">
$('.parent > a').trigger('click');
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T09:49:26.643

原因是，您正在从同一个文件重定向到 index.php。因此，在第一次执行文档就绪功能期间，它会将您重定向到具有不同查询字符串参数的同一文件。但是由于文档准备功能现在将再次执行，因此它会继续重新加载。

最简单的方法是在 PHP 中处理此问题，当未设置“Result”参数时，将其设为 1。

以 javascript 方式，您可以获取查询字符串值并检查是否设置了“结果”参数。如果未设置，则将页面重定向到 index.php?Result=1。

下面是获取查询字符串参数的 javascript 方法。

```
function param(name)
{
var url = window.location.search.substring(1);
var query = url.split('?')[0];
var data = query.split('&');
    for(var i in data)
    {
      if(data[i].split('=')[0] == name)
      {
         return data[i].split('=')[1];
      }
    }
} 
```

您可以使用它来调用它

```
var page_num = param('Result');
if(page_num == null)
{
   location.href = 'index.php?Result=1';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T09:30:08.987

尝试这个

```
var Result = 1; 
 $(document).ready(function(){  
   location.href="index.php?Result=" + Result;  
   $("a").click(function(){        
      Result=$(this).attr('id');   
      location.href="index.php?Result=" + Result;

  })
}) 
```

# php - 在 PHP 中存储其他页面的变量

> ID：15473214
> 
> 赞同：-5
> 
> 时间：2013-03-18T09:18:51.960
> 
> 标签：php, variables

我有一个 PHP 项目，我做了一个注册表单。
在注册表中，我做了三个步骤，
数据会在第三步存储，但在第三步
我从第1页存储的变量消失了！！

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:22:46.920

现在是你学习 PHP 的时候了`sessions`

[http://www.php.net/manual/en/book.session.php](http://www.php.net/manual/en/book.session.php)

使用 PHP 会话，您可以在后续访问中保留某些数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:20:52.340

查看 PHP 文档中的会话。特别是`$_SESSION`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T09:21:49.457

使用 session、post 或 get 方法将数据从一个页面传递到另一个页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T09:30:38.697

使用会话，并从第三页的会话中读取数据并取消设置会话

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T09:25:28.633

我在会话方面遇到了一些问题，尽管它们似乎正是您正在寻找的。如果您需要，这里有一个替代方案：

如果您需要向后兼容并且前两页不包含任何“私人”数据，您可以使用一些发布系统将信息发送到下一页，但请注意，这会为任何试图注入的人打开一个入口点进入你的数据库，确保你去掉斜线和什么不。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T09:26:13.687

单击第二页时将所有第一页帖子值保存到会话中，例如 $_SESSION['page']=$_POST ，并在单击第三页时也存储第二页帖子值，将所有第三页帖子值保存在会话中，最后你从会话中获取所有值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T09:24:07.600

你错过的事情是：

*   不维护所有页面的单个会话请放置 session_start(); 在每个页面上维护单个会话

*   要使用 $_SESSION[$variable_name] = $value 存储变量以动态存储值并在任何页面上使用并了解会话，请[点击此处的链接](http://www.php.net/manual/en/book.session.php)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-18T09:27:40.447

如果您使用表单按钮执行步骤。您可以在 $_POST['data1'], $_POST['data2'], ...

# c# - 如何使用千位分隔符和小数分隔符格式化 Windows 窗体文本框以进行数字输入

> ID：15473216
> 
> 赞同：10
> 
> 时间：2013-03-18T09:18:53.183
> 
> 标签：c#, winforms, formatting

我是 Windows 窗体的新手并尝试做一些事情。我正在使用 C#。

我正在使用 Windows 窗体，并且在窗体上放置了八个文本框，并且都是带有十进制值的数字。

我喜欢实现以下结果。我的小数分隔符是逗号，千位分隔符是点。我见过像##.###,## 之类的东西，但不记得了....我怎样才能实现以下方法？

所以这个想法是，当我输入 1234 并将焦点从文本框中移开时，它应该格式化，当我再次回到文本框时，千位分隔符不应该只格式化小数分隔符。

我想我必须使用一些事件，比如 LostFocus。

**输入结果**

1234 1.234,00

12.34 12,34

12,34 12,34

1234567 1.234.567,00

12,34 12,34

12345,67 12.345,67

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T09:25:43.840

在文本框中的 LostFocus 事件中，使用：

```
textBox1.Text = string.Format("{0:#,##0.00}", double.Parse(textBox1.Text)); 
```

在应用上述逻辑之前，请确保文本首先是双精度/整数，否则将引发异常。这个解决方案相当苛刻，艰难。

如果您希望格式采用特定文化而不是您当前计算机的文化，那么

```
textBox1.Text = string.Format(System.Globalization.CultureInfo.GetCultureInfo("id-ID"), "{0:#,##0.00}", double.Parse(textBox1.Text)); 
```

上面的例子是印度尼西亚货币格式，其中千位分隔符使用点（“.”）而不是逗号（“，”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T09:54:47.263

也许您可以使用[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)。

您可以在失去焦点时根据输入长度调整遮罩。

# android - 整个屏幕上的android弹出布局

> ID：15473222
> 
> 赞同：0
> 
> 时间：2013-03-18T09:19:37.690
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/popup"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/popup_bg"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Popup"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:text="This is a simple popup" />

    <Button
        android:id="@+id/close"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="10dp"
        android:text="Close" />

</LinearLayout> 
```

这是我用于弹出窗口的 xml 布局。但我希望这种布局几乎覆盖整个屏幕，而不仅仅是这么小。我该如何扩展它？我用代码来称呼它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:31:20.577

采用

```
android:layout_width="match_parent"
android:layout_height="match_parent" 
```

在`LinearLayout`

```
final Dialog dialog = new Dialog(MainAppActivity.this, R.style.PopupDialog);
dialog.setContentView(R.layout.popup);
dialog.setCancelable(true);
Button cancelButton = (Button)dialog.findViewById(R.id.close);
cancelButton.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        dialog.cancel();
    }
});

dialog.show(); 
```

把它放在 res/values/styles.xml

```
<style name="PopupDialog" parent="@android:style/Theme.Translucent.NoTitleBar"></style> 
```

# android - 适配器如何为 Android 中的按钮分配背景图像？

> ID：15473223
> 
> 赞同：0
> 
> 时间：2013-03-18T09:19:46.587
> 
> 标签：android, listview, button, adapter

我正在尝试一种方法，我的适配器如何基于解析数据将背景图像分配给 ListView 中的行中的按钮。我的应用程序所做的是从服务器下载 json 数据。然后它被解析并用于加载一个适配器，该适配器显示一个待办/已完成任务的列表。每个任务旁边都有一个按钮，指示它是否已完成/尚未完成。任何指针都非常感谢。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:30:29.880

假设您知道如何获取和解析 json 数据，创建具有所需文本和图像的项目布局的列表视图，使用以下异常来创建您的自定义适配器。

在创建每个视图期间，`getView(...)`将您想要的图像传递到适配器运行时。每次刷新适配器数据时，调用 adapter.notifyDataSetChanged();

```
 public class MyAdapter extends ArrayAdapter<Item> {

    private ArrayList<Item> items;
    private ViewHolder Holder;

    private class ViewHolder {
        TextView title, cost;
        Button delete;
    }

    public MyAdapter(Context context, int tvResId, ArrayList<Item> items) {
        super(context, tvResId, items);
        this.items = items;
    }

    @Override
    public View getView(int pos, View convertView, ViewGroup parent) {
        View v = convertView;

        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getActivity()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.cost_estimate_list_item, null);

            Holder = new ViewHolder();
            Holder.title = (TextView) v.findViewById(R.id.tvCEListText);
            Holder.cost = (TextView) v.findViewById(R.id.tvCEListPrice);
            Holder.delete = (Button) v.findViewById(R.id.bCEListDelBtn);

            v.setTag(Holder);

        } else
            Holder = (ViewHolder) v.getTag();

        final Item item = items.get(pos);

        if (item != null) {
            Holder.title.setText(item.getTitle());
            Holder.cost.setText("Rs." + item.getPrice());
        }
        Holder.delete.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                items.remove(item);
                notifyDataSetChanged();
                updateTotal();
            }
        });

        return v;
    }

}

class Item {
    private String title, price;

    public String getTitle() {
        return title;
    }

    public String getPrice() {
        return price;
    }

    public Item(String t, String p) {
        title = t;
        price = p;
    }
} 
```

如果您仍然需要这方面的帮助，请告诉我。

# php - 解析 JSON 对象时出错

> ID：15473237
> 
> 赞同：0
> 
> 时间：2013-03-18T09:20:10.670
> 
> 标签：php, android, getjson, json

我正在开发一个 Android 应用程序，我需要从我的 php 论坛中检索主题列表，但是当我运行代码时，我得到了这个我无法弄清楚的错误

```
03-18 09:11:43.221: E/JSON(286): <br />
03-18 09:11:43.221: E/JSON(286): <b>Parse error</b>:in  <b>C:\xampp\htdocs\android_login_api\include\list_of_topics.php</b> on line <b>26</b><br />
03-18 09:11:43.322: E/JSON Parser(286): Error parsing data org.json.JSONException: Value <br of     type java.lang.String cannot be converted to JSONObject 
```

这是我的 php

```
<?php

/*
 * Following code will list all the products
 */

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . 'DB_Connect.php';

// connecting to db
$db = new DB_CONNECT();

// get all products from products table
if(isset($_GET['parent']))
{
    $id = intval($_GET['parent']);}
$result = mysql_query("select t.id, t.title, u.username as author,  from topics as t  left join user as u where t.parent="'.$id.'" and t.id2=1 group by t.id order by t.timestamp2 desc');
") or die(mysql_error());

// check for empty result
if (mysql_num_rows($result) > 0) {
    // looping through all results
    // products node
    $response["topics"] = array();

    while ($row = mysql_fetch_array($result)) {
    // temp user array
    $topic = array();
    $topic["tid"] = $row["t.id"];
    $topic["name"] = $row["t.title"];
    $topic["author"] = $row["u.username"];

    // push single product into final response array

    array_push($response["topics"], $topic);
    echo json_encode($response);
    }
    // success
    $response["success"] = 1;

    // echoing JSON response
    echo json_encode($response);
} else {
    // no products found
    $response["success"] = 0;
    $response["message"] = "No topics found";

    // echo no users JSON
    echo json_encode($response);
}
?> 
```

这是 JSON 解析器类，我有 2 个 JSONOBJECT 一个用于用户 reg&login，第二个用于主题列表

```
package com.example.androidhive.library;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");

            }
            is.close();
            json = sb.toString();
            Log.e("JSON", json);
        } catch (Exception e) {
            //Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);            
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }       

        // return JSON String
        return jObj;

    }

     public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

            }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
            }
            is.close();
            Log.e("JSON", sb.toString());
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

        }

} 
```

这是来自 Android 端的 .java 文件

```
package com.example.androidhive;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

import com.example.androidhive.library.JSONParser;

public class Topics_list extends ListActivity {

// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> TopicsList;

// url to get all products list
private static String url_all_topics = "http://10.0.2.2/android_login_api/include/list_of_topics.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_TOPICS = "topics";
private static final String TAG_TOPICSID = "t.id";
private static final String TAG_TOPICTITLE = "t.title";
private static final String TAG_TOPICAUTHOR = "u.username";

// products JSONArray
JSONArray topics = null;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.topics_list);

// Hashmap for ListView
TopicsList = new ArrayList<HashMap<String, String>>();

// Loading products in Background Thread
new LoadAllTopics().execute();

// Get listview
ListView lv = getListView();

// on seleting single product
// launching Edit Product Screen
lv.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    // getting values from selected ListItem
    String tid = ((TextView) view.findViewById(R.id.tid)).getText()
        .toString();
    }
   });

   }

    /*// Starting new intent
    Intent in = new Intent(getApplicationContext(),
        EditProductActivity.class);
    // sending pid to next activity
    in.putExtra(TAG_PID, pid);

    // starting new activity and expecting some response back
    startActivityForResult(in, 100);
    }
});

}

// Response from Edit Product Activity
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);
// if result code 100
if (resultCode == 100) {
    // if result code 100 is received
    // means user edited/deleted product
    // reload this screen again
    Intent intent = getIntent();
    finish();
    startActivity(intent);
}

}*/

/**
* Background Async Task to Load all product by making HTTP Request
* */
class LoadAllTopics extends AsyncTask<String, String, String> {

/**
 * Before starting background thread Show Progress Dialog
 * */
@Override
protected void onPreExecute() {
    super.onPreExecute();
    pDialog = new ProgressDialog(Topics_list.this);
    pDialog.setMessage("Loading products. Please wait...");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(false);
    pDialog.show();
}

/**
 * getting All products from url
 * */
protected String doInBackground(String... args) {
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    // getting JSON string from URL
    JSONObject json = jParser.makeHttpRequest (url_all_topics, "GET", params);

    // Check your log cat for JSON reponse
    Log.d("All topics: ", json.toString());

    try {
    // Checking for SUCCESS TAG
    int success = json.getInt(TAG_SUCCESS);

    if (success == 1) {
        // products found
        // Getting Array of Products
        topics = json.getJSONArray(TAG_TOPICS);

        // looping through All Products
        for (int i = 0; i < topics.length(); i++) {
        JSONObject c = topics.getJSONObject(i);

        // Storing each json item in variable
        String id = c.getString(TAG_TOPICSID);
        String topict = c.getString(TAG_TOPICTITLE);
        String username = c.getString(TAG_TOPICAUTHOR);

        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();

        // adding each child node to HashMap key => value
        map.put(TAG_TOPICSID, id);
        map.put(TAG_TOPICTITLE, topict);
        map.put(TAG_TOPICAUTHOR, username);

        // adding HashList to ArrayList
        TopicsList.add(map);
        }
    } else {
        // no products found
        // Launch Add New product Activity
       /* Intent i = new Intent(getApplicationContext(),
            NewProductActivity.class);
        // Closing all previous activities
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(i);*/
    }
    } catch (JSONException e) {
    e.printStackTrace();
    }

    return null;
}

/**
 * After completing background task Dismiss the progress dialog
 * **/
protected void onPostExecute(String file_url) {
    // dismiss the dialog after getting all products
    pDialog.dismiss();
    // updating UI from Background Thread
    runOnUiThread(new Runnable() {
    public void run() {
        /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(
           Topics_list.this, TopicsList,
            R.layout.list_item, new String[] { TAG_TOPICSID,TAG_TOPICTITLE,
                TAG_TOPICAUTHOR},
            new int[] { R.id.tid, R.id.title });
        // updating listview
        setListAdapter(adapter);
    }
    });

}

}
 } 
```

最新的 .php 代码版本

```
<?php

/*
 * Following code will list all the products
 */

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . 'DB_Connect.php';

// connecting to db
$db = new DB_CONNECT();

// get all products from products table

if(array_key_exists('parent', $_GET)){
      $id = intval($_GET['parent']);
 } else {
 exit();}
 //echo json_encode ("wrong");
      // something to stop this processing
     // $response["success"]=0;
     //$response["message"] = "No";
 //echo json_encode((object)$response);}

$result = mysql_query("select  t.id, t.title, u.username,  from topics as t  left join user as u where t.parent= '$id' and t.id2=1 group by t.id order by t.timestamp2 desc")
or die(mysql_error());

// check for empty result

//if (mysql_num_rows($result) > 0) {
    // looping through all results
    // products node
   // $response["topics"] = array();
    //echo json_encode((object)$response);

   // while ($row = mysql_fetch_array($result)) {
    // temp user array
    //    $topic = array();
    //    $topic["tid"] = $row["t.id"];
     //   $topic["name"] = $row["t.title"];
      //  $topic["author"] = $row["u.username"];

    // push single product into final response array

      /  array_push($response["topics"], $topic);

//}
if (mysqli_num_rows($result) > 0) {
    // looping through all results
    // products node
    $response['topics'] = array();
    while (true) {
       $row = mysqli_fetch_array($result);
       if(!$row)break;
       // temp user array
       $topic = array();
       $topic["tid"] = $row["t.id"];
       $topic["name"] = $row["t.title"];
       $topic["author"] = $row["u.username"];
       // push single product into final response array
       array_push($response["topics"], (object)$topic);
    }

    // success
    $response["success"] = 1;

    // echoing JSON response
    echo json_encode($response);
    } else{
    // no products found
    $response["success"] = 0;
    $response["message"] = "No topics found";

    // echo no users JSON
    //echo json_encode($response);
    echo json_encode((object)$response);
}
?> 
```

我希望有人能帮助我。感谢你的帮助。对我有耐心，我不是很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:27:31.913

好吧，我认为您正在构建一个 mulformed json 响应。

此外，不推荐使用 Mysql，请使用 mysqli 接口。

不要单独回显每个数据库记录。

您还试图将 key => value 关联数组传递到一个普通的 json 数组中，这会导致打嗝，当您这样做时，请使用以下转换：

```
json_encode((object)$keyValueArray); 
```

因为 Json 没有键值对数组，但它有对象。

这是更正和重新格式化的代码。

我的评论以 // * * * 开头

```
<?php

/*
 * Following code will list all the products
 */

// *** this will be the database connection 
$db = null; 

// *** We will first check for the $_GET, since if it fails, no need to 
// *** use resources, open databases etc...

// *** I have to warn you about $_GET, anything which is not numeric will
// *** give an $id of 0 so I added a numeric check..
if( (isset($_GET['parent'])) && (is_numeric($_GET['parent'])) ){
     $id = intval($_GET['parent']);
} else {
// *** Examine the function responseFailure I appended to source
// *** Inform about bad id and exit.
     responseFailure("Bad id");
}

// *** Your DB_Connect.php uses mysql commands which are deprecated
// *** So I cancelled it and put an alternative 

// include db connect class
// require_once __DIR__ . 'DB_Connect.php';
// connecting to db
// $db = new DB_CONNECT();

// *** To use mysqli interface please use the code below.  
// *** Replace the values of $dbHost, $dbUser, $dbPass & $dbName
// *** With your own connection information

$dbHost = 'Your Database Server Name';    
$dbUser = 'Your Username On That Server';
$dbPass = 'Your Password On That Server';
$dbName = 'Your Database Name On That Server';

// *** Now lets try to connect
$db = mysqli_connect($dbHost, $dbUser, $dbPass, $dbName);
//  *** inform if connect fails and exit.
if(!$db)responseFailure("Unable to connect database server");

// get all products from products table 

// *** your query is complex, so build it into a string for clarity.
// *** one bug in your code was "..."'.$id.'"...' which will give a parse error

$query = "select t.id, t.title, u.username as author, " 
        ."from topics as t left join user as u where t.parent='"
        .$id
        ."' and t.id2=1 group by t.id order by t.timestamp2 desc";

$result = mysqli_query($db, $query);
//  *** inform if query fails and exit.
if(!$result)responseFailure("Database Query failed");

// check for empty result
// *** Now if no rows, leave, no need too much code depth
if(mysqli_num_rows($result) == 0) responseFailure("No topics found");

// array for JSON response
// *** We guaranteed the success now :)
$response = array('topics' => array(), 'success'=> 1);
// *** here for programming clarity I modified
// *** while ($row = mysqli_fetch_assoc($result)) {
// *** which is generally considered as a bad practice.
while (true) {
    $row = mysqli_fetch_assoc($result);
    if(!$row)break;
    // temp user array
    $topic = array();
    $topic["tid"] = $row["t.id"];
    $topic["name"] = $row["t.title"];
    $topic["author"] = $row["u.username"];
    // push single product into final response array
    // *** Yes we will echo it later
    // *** And since it is a key => value associated array
    // *** We will cast it into object while adding
    array_push($response["topics"], (object)$topic);
} // *** end while
// *** Since it is a key => value associated array
// *** We will cast it into object while encoding
echo json_encode((object)$response); // *** you can echo it now.
if($db)mysqli_close($db);            // *** close database connection
exit(0);                             // *** Job done say goodbye

// *** we may fail in multiple points
// *** so writing this as a seperate function is optimal
// *** This function exits the php script, it does not return back

function responseFailure($msg) {
    $r = array("success" => 0, "message" => $msg); // *** build response
    echo json_encode((object)$r);  // *** build json and send it
    if($db)mysqli_close($db);      // *** close database connection if open
    exit();                        // *** stop processing
}
?> 
```

我希望这些有帮助。

# asp.net-mvc-4 - 相同的网址但不同的控制器？

> ID：15473241
> 
> 赞同：0
> 
> 时间：2013-03-18T09:20:22.620
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing

是否可以为同一个 url 使用两个不同的控制器？

这是必需的，因为我需要 URL 始终保持不变，但它应该使用不同的控制器。我的控制器（`Apples`,`Bananas`等）和视图被分离到每个自己的项目中。

我需要在我的主 MVC 项目中执行一个操作，以根据某些逻辑从`Bananas`or项目返回一个操作/视图。`Apples`

那么我将如何继续使用相同的 url 但从不同的控制器返回操作/视图？

我正在使用 MVC 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:24:31.493

我写了这些代码。我希望它可以帮助你。我使用隐藏字段来了解将运行哪种方法。

这些是我的模型：

```
namespace MvcSameController.Models
{
    public class RouteModel
    {
        public SampleModel1 SampleModel1 { get; set; }
        public SampleModel2 SampleModel2 { get; set; }
    }

    public class SampleModel1
    {
        public int Id { get; set; }
        public string Name { get; set; }

    }

    public class SampleModel2
    {
        public int Id { get; set; }
        public string Surname { get; set; }

    }
} 
```

这是控制器：

```
using System.Web.Mvc;
using MvcSameController.Models;

namespace MvcSameController.Controllers
{
    public class SameController : Controller
    {
        //
        // GET: /Same/

        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public void Index(RouteModel routeModel, string type)
        {

            if (type == "1")
            {
                //Code for type 1
            }

            else if (type == "2")
            {
                //Code for type 2
            }

        }
    }
} 
```

并查看：

```
@{
    ViewBag.Title = "Index";
}
@model MvcSameController.Models.RouteModel

    <section id="loginForm">
        <h2>Type1 </h2>
        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true)

            @Html.Hidden("type",1)

            <fieldset>
                <legend>Type1 Form</legend>
                <ol>
                    <li>
                        @Html.LabelFor(m => m.SampleModel1.Name)
                        @Html.TextBoxFor(m => m.SampleModel1.Name)
                        @Html.ValidationMessageFor(m => m.SampleModel1.Name)
                    </li>
                </ol>
                <input type="submit" value="Run Method1" />
            </fieldset>
        }
    </section>

    <section id="loginForm">
        <h2>Type2</h2>
        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true)
             @Html.Hidden("type",2)
            <fieldset>
                <legend>Type2 Form</legend>
                <ol>
                    <li>
                        @Html.LabelFor(m => m.SampleModel2.Surname)
                        @Html.TextBoxFor(m => m.SampleModel2.Surname)
                        @Html.ValidationMessageFor(m => m.SampleModel2.Surname)
                    </li>
                </ol>
                <input type="submit" value="Run Method2" />
            </fieldset>

        }
    </section> 
```

[你可以从这里](http://www.muslumozturk.com/downloads/MvcSameController.rar)下载我的样本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:53:42.817

您的 URL 应该是选择控制器的逻辑所在。也许您需要重新组织您的项目以拥有一个控制器并将其他逻辑放入控制器操作中以填充模型？

但是，如果您坚持走这条路线，您可能需要在 中重写`CreateController`，`DefaultControllerFactory`这是实例化您的控制器的类，通常基于您的控制器名称。这是我的一个项目中的一个示例：

```
public class ErrorHandlingControllerFactory : DefaultControllerFactory
{
    /// <summary>
    /// Injects a custom attribute
    /// on every action that is invoked by the controller
    /// </summary>
    /// <param name="requestContext">The request context</param>
    /// <param name="controllerName">The name of the controller</param>
    /// <returns>An instance of a controller</returns>
    public override IController CreateController(
        RequestContext requestContext,
        string controllerName)
    {
        var controller =
            base.CreateController(requestContext,
            controllerName);

        var c = controller as Controller;

        if (c != null)
        {
            c.ActionInvoker =
                new ErrorHandlingActionInvoker(
                    new HandleErrorWithELMAHAttribute());
        }

        return controller;
    }
} 
```

您需要设置路由以传递已知的控制器名称（可怕的魔术字符串......），测试此控制器名称，如果检测到运行您的逻辑以获取实际的控制器名称并将其传递给`base.CreateController`.

# flash - Flex Dcm 文件加载

> ID：15473242
> 
> 赞同：0
> 
> 时间：2013-03-18T09:20:23.210
> 
> 标签：flash, apache-flex, flash-builder, dicom

处理需要在 flex 中加载 dicom 文件的项目。关于在 flex 应用程序中加载 DCM(Dicom) 文件的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T18:24:48.000

我是[Stratos-viewer](http://sourceforge.net/projects/stratos-viewer/)的作者，这是一个基于 Flash 的查看器，显示通过 WADO 从 PACS 获得的 Jpeg 图像。不幸的是，这个项目大约在 5 年前被放弃了。

之后，我在 flex (actionscript) 中进行了一些测试，并且能够加载未压缩的 Dicom 图像（Explicit VR，little endian）的原始二进制数据。您仍然可以在[此处](http://dicom.netpatia.com/dicom/)查看演示。能够做到这一点的关键是在 ActionScript中引入了[URLLoader 类。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html)这个项目也被放弃了（2009 年），最终只是一个概念证明。好消息是可以在 flex 中加载（和显示）一个 Dicom 文件。

现在我已经放弃了 flash / flex 方式，我正在开发一个 html5 Dicom 查看器，但这是另一段历史。

# css - h2 标头在移动 Safari 上具有不同的颜色

> ID：15473243
> 
> 赞同：2
> 
> 时间：2013-03-18T09:20:26.137
> 
> 标签：css, mobile, colors, safari

我已经建立了网站（[www.dubovik.org](http://www.dubovik.org)，它在俄语上，但与问题无关）除了移动 Safari（在 iphone 和 ipad 上）之外，一切看起来都很好。只有**一个 h2**（带有电话号码）具有蓝色而不是白色（与其他 h2 一样）。这是标题有问题的 html：

```
 <h2 class="heading" id="left">694-29-29 <br> 7-911-922-35-97</h2> 
```

和CSS：

```
h2 {
    clear: both;
    color:#444444;
    text-align: center;
    font-size: 1.2em;
    font-family: Helvetica,  italic;

}

.heading {
    width: 650px;
    color: #fff; 
    text-align: right;
    text-transform: uppercase;      
    text-shadow: 0 3px 5px rgba(0,0,0,0.7);
    line-height: 1em;
}

#left {
    position: absolute;
    top: 335px;
    left: 1.5%;
    z-index: 5;
    float: left;
    width: 500px;
    color: #fff; 
    text-align: left;
    text-transform: uppercase;      
    text-shadow: 0 3px 5px rgba(0,0,0,0.7);
    font-size: 3.5em; 
    line-height: 1em;
} 
```

尝试了一切（样式不同，给它不同的类和 id 并以不同的方式设置它们） - 移动 Safari 使用蓝色的电话号码呈现 h2 标题。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T09:25:44.777

iOS 会自动将电话号码变成链接。你可以阻止它这样做：

```
<meta name="format-detection" content="telephone=no"> 
```

或者您可以将数字保留为链接并设置如下样式：

```
a[href^=tel]{
    color:inherit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:22:40.710

你可以试试这个：

```
color: #fff !important; 
```

# jquery - blueimp 文件上传 vb.net 没有显示缩略图

> ID：15473252
> 
> 赞同：0
> 
> 时间：2013-03-18T09:21:02.263
> 
> 标签：jquery, vb.net, blueimp, jquery-file-upload

我在 vb.net 中使用 blueimp 文件上传时遇到问题。我是这样实现的：

```
sb.Append("<div id='fileupload'>" & _
                    "<form method='POST' enctype='multipart/form-data'>" & _
                        "<div class='fileupload-buttonbar'>" & _
                            "<label class='fileinput-button'>" & _
                                "<span>Add files...</span>" & _
                                "<input id='file' type='file' name='files[]' multiple>" & _
                            "</label>" & _
                            "<button type='submit' class='start'>Start upload</button>" & _
                            "<button type='reset' class='cancel'>Cancel upload</button>" & _
                            "<button type='button' class='delete'>Delete files</button>" & _
                        "</div>" & _
                    "</form>" & _
                    "<div class='fileupload-content'>" & _
                        "<table class='files'></table>" & _
                        "<div class='fileupload-progressbar'></div>" & _
                    "</div>" & _
                "</div>") 
```

所有 fileupload.js 的链接都很好。但选择文件后，不显示缩略图。我尝试使用[此处](http://www.webtrendset.com/2011/06/22/complete-code-example-for-using-blueimp-jquery-file-upload-control-in-asp-net/)的 asp.net 示例。

当我调用 index.html 时，一切顺利。如果我尝试在我的 vb.net 项目中使用它，则不会显示缩略图。

任何想法，将不胜感激。

**编辑：**我的来源看起来像这样：

```
 <div id="fileupload">
        <form method="POST" enctype="multipart/form-data">
        <div class="fileupload-buttonbar">
        <label class="fileinput-button"><span>Add files...</span>
        <input id="file" type="file" name="files[]" multiple=""></label>
        <button type="submit" class="start">Start upload</button>
        <button type="reset" class="cancel">Cancel upload</button>
        <button type="button" class="delete">Delete files</button>
        </div>
        </form>
        <div class="fileupload-content">
        <table class="files"></table><div class="fileupload-progressbar">
        </div>
        </div>
  </div> 
```

**编辑2：**似乎有些东西覆盖了“添加”功能。如果我使用下载的 .zip 中的示例 index.html，我可以 console.log 进行添加。在我的 vb.net 项目中，我不能......有人知道如何找出哪个文件覆盖了那个文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:52:32.357

我现在开始工作了！

问题是这个参考对我不起作用：

```
<script type="text/javascript" src="http://blueimp.github.com/JavaScript-Templates/tmpl.min.js"></script> 
```

有了这个，它就像一个魅力：

```
downloadTemplate: function (o) {
            var rows = $();
            $.each(o.files, function (index, file) {
                var row = $('<tr class="template-download fade">' +
                (file.error ? '<td></td><td class="name"></td>' +
                    '<td class="size"></td><td class="error" colspan="2"></td>' :
                        '<td class="preview"></td>' +
                            '<td class="name"><a></a></td>' +
                            '<td class="size"></td><td colspan="2"></td>'
                ) + '<td class="delete"><button>Delete</button> ' +
                    '<input type="checkbox" name="delete" value="1"></td></tr>');
                row.find('.size').text(o.formatFileSize(file.size));
                if (file.error) {
                    row.find('.name').text(file.name);
                    row.find('.error').text(
                    locale.fileupload.errors[file.error] || file.error
                );
                } else {
                    row.find('.name a').text(file.name);
                    if (file.thumbnail_url) {
                        row.find('.preview').append('<a><img></a>')
                        .find('img').prop('src', file.thumbnail_url);
                        row.find('a').prop('rel', 'gallery');
                    }
                    row.find('a').prop('href', file.url);
                    row.find('.delete button')
                    .attr('data-type', file.delete_type)
                    .attr('data-url', file.delete_url);
                }
                rows = rows.add(row);
            });
            return rows;
        } 
```

# c++ - 搜索二叉树函数不起作用c ++

> ID：15473257
> 
> 赞同：1
> 
> 时间：2013-03-18T09:21:11.323
> 
> 标签：c++

我试图实现一个二叉搜索树：

```
template <typename T>
bool Tree<T>::search(TreeNode<T> *ptr, const T &key) {
if (ptr == 0) {
 cout<<"No such data: "<<key<<" in the tree"<<endl; 
 return false;
 }
else{
if (ptr->data == key) {
    cout<<"Find a node whose data is "<<key<<endl;
      return true;
} 
else if (ptr->data < key)  return search(ptr->leftPtr,key);

else  return search(ptr->rightPtr,key);
}
} 
```

但无论树是否包含键值，结果总是返回 false。你们可以帮我检查代码吗？我试过调试，但还是不知道。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:28:42.367

您的左树下降遍历比较器是向后的。因此，一旦您错误地下降到*正确*的树中，您就没有机会找到该值。只有根，而且只有根，才能正确找到。

这：

```
if (ptr->data < key)
    return search(ptr->leftPtr,key);
else
    return search(ptr->rightPtr,key); 
```

应该是这样的：

```
if (key < ptr->data) // <== note key is LESS THAN node.
    return search(ptr->leftPtr,key);
else
    return search(ptr->rightPtr,key); 
```

* * *

也就是说，考虑一下：

```
template <typename T>
bool Tree<T>::search(TreeNode<T> *ptr, const T &key)
{
    if (ptr == 0) {
        cout<<"No such data: "<<key<<" in the tree"<<endl;
        return false;
    }

    if (key < ptr->data)
        return search(ptr->leftPtr, key);
    else if (ptr->data < key)
        return search(ptr->rightPtr, key);

    cout<<"Found a node whose data is "<< key << endl;
    return true;
} 
```

# python - 在另一个函数中重复运行/停止函数

> ID：15473258
> 
> 赞同：2
> 
> 时间：2013-03-18T09:21:13.350
> 
> 标签：python, scheduling

为了在另一个函数中重复运行/停止函数，我编写了下面的代码。但是，很尴尬。是否有一种漂亮的方法可以在另一个功能中运行/停止一个功能。换句话说，每 2 秒运行一个函数，但如果运行另一个函数的函数终止，则另一个应该停止。（我是用 Timer().start 写的）

假设有一个schedule函数，用来模拟我想要的

```
 def foo():
         print 2
         arg = 10
         schedule(5, bar, arg).start()
         while True :
             if q_pressed():
                 schedule(5, bar, arg1).stop()

 def bar(arg):
        print arg 
```

# ms-access - 更新 Access 链接表以使用 UNC 路径

> ID：15473263
> 
> 赞同：8
> 
> 时间：2013-03-18T09:21:35.143
> 
> 标签：ms-access, vba

我有一个带有表列表的 Access 2010 数据库**A.mdb**，其中一个是链接表，从同一服务器上的另一个 Access 数据库**B.mdb链接。**这些数据库位于开发机器上`xxx.xxx.xxx.xxx`，在我的计算机上映射为`R://`，然后在`yyy.yyy.yyy.yyy`服务器上在线发布。

如果我想在本地处理数据库，我需要更改表的链接。但是，如果我通过文件系统（使用“链接表管理器”）更改它，链接就会变成`R://....`，当我查看请求这些数据的 ASP 页面时，它会因为路径错误而损坏。另外，如果我在本地更改链接，它将无法在在线服务器上运行。

有没有办法“以编程方式”更改链接？也就是说，不使用链接表管理器？

我搜索了一个答案，但我不是那个专家，我只是明白我必须写一个“模块”？“宏”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T10:46:54.017

表链接可以是 UNC 路径。例如，假设我有一个链接表指向一个`\\192.168.1.2\Public\`映射到 drive的数据库`P:`。如果我启动 VBA 编辑器 ( `Alt`+ `F11`)，打开即时窗口 ( `Ctrl`+ `G`) 并键入...

`?CurrentDB.TableDefs("remoteTable").Connect`

……它会回来的……

`;DATABASE=P:\B.accdb`

`P:`...因为我在创建链接时指向了驱动器。

现在，如果我创建并运行 VBA 函数...

```
Function linkToUnc()
Dim cdb As DAO.Database
Set cdb = CurrentDb
cdb.TableDefs("remoteTable").Connect = ";DATABASE=\\192.168.1.2\Public\B.accdb"
cdb.TableDefs("remoteTable").RefreshLink
Set cdb = Nothing
End Function 
```

...链接现在是 UNC 路径。

顺便说一句，如果您浏览到“网络”、“机器名称”、“共享名称”，您可以在链接表管理器中创建 UNC 链接，但这会给您机器名称（在我的情况下`\\PICO\Public\B.accdb`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:40:57.693

您可以右键单击链接表并选择**Linked table Manager**。选择您要处理的链接表，然后勾选**始终提示新位置**的窗口下方的复选框，然后单击确定按钮。

系统将要求您提供新位置。浏览并选择文件，然后单击确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-08T21:41:52.067

我喜欢在一个共享文件夹上设置一个文件 DSN，该文件夹可以通过对我们整个网络的读取访问权限访问，然后使用链接表管理器访问 UNC 路径。为此，我使用了链接表管理器并在我的桌面上设置了一个文件 DSN。然后我将 DSN 文件复制并移动到共享的 UNC 目录中。然后，我进入 Access 并删除链接表并重新创建链接表。为此，在删除链接表后，我执行以下操作：

1.  我单击 ODBC 数据库-->通过创建链接表链接到数据源-->确定。
2.  单击“选择数据源”窗口中的“文件数据源”选项卡。在对话框的底部，您将看到“DSN 名称：”，然后是一个文本框和一个新建按钮。您将在该文本框中输入整个 UNC 路径和文件名（因此这指向您复制到 UNC 路径的文件）。例如，我输入 \ATD-SERVER1\AccessShare\ContactsApp.accdb.dsn。然后单击确定。

假设您对要链接的服务器具有访问权限，将显示“链接表”对话框，然后您可以从那里选择您的链接表！如果他们尝试过，微软就不能让它变得不那么直观。

# c++ - “类型名称{}”在 C++ 中是什么意思？

> ID：15473264
> 
> 赞同：1
> 
> 时间：2013-03-18T09:21:43.033
> 
> 标签：c++, syntax

我在源代码中发现了以下结构：

```
variable_type variable_name{func(arg1, arg2, arg3)}; 
```

在下一个版本的代码中，此构造已被以下构造替换：

```
variable_type variable_name = func(arg1, arg2, arg3); 
```

所以，我的问题是第一行是什么意思，它与第二行有什么不同？我也想知道为什么使用第一行而不是第二行可能更好或更差？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:30:02.410

第一行是 C++11 的一个新特性，称为[统一初始化](http://en.wikipedia.org/wiki/C%2B%2B11#Uniform_initialization)。这种初始化风格也可以用在定义了一个构造函数的类上[`std::initializer_list`](http://en.cppreference.com/w/cpp/utility/initializer_list)，在这种情况下，这样的构造函数具有优先权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:26:15.467

这是 C++11 大括号初始化的示例。

例如，请参阅以下文章：

[https://www.informit.com/articles/article.aspx?p=1852519](https://www.informit.com/articles/article.aspx?p=1852519)

# c++ - 如何比较输入与 ASCII 码？

> ID：15473265
> 
> 赞同：3
> 
> 时间：2013-03-18T09:21:44.610
> 
> 标签：c++, while-loop, compare, ascii

我正在尝试编写一个控制台程序，它从输入中获取一个数字并将其放入一个数组中。只要用户没有点击“空格”按钮，读入就会持续。我已经尝试了几件事，但我的程序不会将输入与“空格”的 ASCII 码进行比较。提前致谢！

```
#include <iostream>
using namespace std;

int main()
{
    int fabcd[25],number_of_items = 0;
    cout << "The read in loop lasts while you don't hit space:\n";
    while((char)cin.get() != 32)
    {
            cin >> fabcd[number_of_items];
            number_of_items++;      
    }   
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T09:44:08.500

您的代码有几个问题。最基本的是每次通过循环执行两个输入，第一个在 中`while`，第二个`>>`在循环中使用。另请注意，第二个将跳过任何空格，然后将输入转换为整数。如果输入不能合法地转换为整数（例如下一个字符是`'a'`），则输入进入错误状态，并且`cin.get()`总是返回`EOF`。当然，如果您正在输入数字，您可以轻松输入超过`25`，并超出缓冲区。

如果您只想输入一个数字序列，那么：

```
std::vector<int> fabcd;
int tmp;
while ( std::cin >> tmp ) {
    fabcd.push_back( tmp );
} 
```

是你所需要的全部。（数字必须用空格分隔。）如果你想输入*数字*，直到你遇到一个空格，像下面这样的东西应该可以工作：

```
std::vector<int> digits;
int tmp = std::cin.get();
while ( tmp != EOF && ! std::isspace( tmp ) ) {
    digits.push_back( tmp /* or tmp - '0' */ );
    tmp = std::cin.get();
} 
```

请注意， 的结果`std::cin.get()`被分配给 a `int`，*而不是*a `char`。此函数`int` 有意返回一个，因为它必须能够返回带外值`EOF`。这有几个变体：如果您使用 `std::cin::peek()`, 而不是`std::cin::get()`，您实际上不会提取字符（您必须在循环中执行此操作）；并且还有`std::get( char& )`，它将字符提取到给定`char`中，前提是它不在 EOF 处。使用此函数，循环将是：

```
std::vector<int> digits;
char tmp;
while ( std::get( tmp ) && ! std::isspace( tmp ) ) {
    digits.push_back( tmp );
} 
```

（您可能还想使用`std::isdigit`, 而不是`! std::ispace`控制循环。）

## 编辑：

最后一点：空格或其他任何内容的实际数字代码取决于实现，不一定是*32。*此外，您需要类似地处理制表符和换行符。您应该始终使用`isspace`等功能。或者，如果您确实想检查一个空格，并且只检查一个空格，请与 比较`' '`，而不是 32。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:29:33.537

空格的 acii 代码是 32。所以你应该替换 64 或 13，即回车到 32：

```
while((char)cin.get() != 32) 
```

但是问题可能是 cin 可能会在某些字符上停止，例如空格：您可以通过设置禁用此行为： cin.unsetf(ios::skipws); 根据[C ++，用户输入检查'\ 0'在空格处停止吗？](https://stackoverflow.com/questions/13014272/c-user-input-check-for-0-stops-at-spaces)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T09:49:19.897

这是答案：

```
int fabcd[25],number_of_items = 0;
cout << "The read in loop lasts while you don't hit space:\n";
char a;
while((a=cin.get()) != ' ')
{

        fabcd[number_of_items]=a;
        number_of_items++;      
}   
return 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T09:52:15.610

尝试这个 ：

```
 #include <iostream>
#include <conio.h >
using namespace std;

int main()
{
    int fabcd[25],number_of_items = 0;
    cout << "The read in loop lasts while you don't hit space:\n";
    while( _kbhit() != 32  )
    {
            char ch =getche();
            if (ch != 32 )
            {
           cin >> fabcd[number_of_items];
            number_of_items++;
            }
            else
                break;

    }   
    cout << "\nnumber of items:"<<number_of_items;
    cin.get();
    cin.get();
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T09:24:51.250

(char)13 是回车而不是空格。

不是你会做的事情：

```
((char)cin.Get()) !=' ' 
```

# asp.net-mvc - 在控制器 MVC3 Razor 中获取下拉列表选择的值

> ID：15473267
> 
> 赞同：0
> 
> 时间：2013-03-18T09:21:45.107
> 
> 标签：asp.net-mvc, razor

嗨，在我使用 RAZOR 的 MVC3 项目中，我有一个疑问。

我有一个名为 CatlogPage.cshtml 的页面。在那个页面我有一个下拉列表控件。

```
 @(Html.Telerik().DropDownListFor(m => m.CatalogName)
     .BindTo(Model.CatalogName).HtmlAttributes(new { style = "width:235px" }))
   <input type="submit" value="Next" /> 
```

我有一个名为 Hierarchy.cs 的控制器：在该控制器中，

```
 public ActionResult Hierarchy()
       {

          // Need to get the selected value in DropDownList
          return View("Hierarchy");
       } 
```

如何从 dropDownList 获取值（CatalogName）到控制器？

这是我的模型代码。

```
public List<SelectListItem> GetCatalogNameModel()
        {
            try{
                var cat = from s in _entities.Catalogs.ToList()
                          select new SelectListItem()
                                  {
                                      Text = s.CatalogName,
                                      Value = s.CatalogName
                                  };
                return cat.ToList();}
            catch (Exception ex)
            {
                CreateLogFiles.ErrorLog(HttpContext.Current.Server.MapPath("~/Logs/ErrorLog"), ex, "CatalogService", "GetCatlogName");
                return null;
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:41:34.263

因此，假设第一个代码片段来自强类型视图（对象 DatabaseModel.CatalogModel），并且您正在将表单提交给 Hierachy 方法，那么传入 CatalogModel 并访问 CatalogName 应该是您的目标吗？

IE

```
public ActionResult Hierarchy(DatabaseModel.CatalogModel inputModel)
       {

          inputModel.CatalogName; //This will be the value from the drop down list
          return View("Hierarchy");
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:01:42.557

对于 DropDownList，我使用 Int 道具来接收选定的 Id。所以我的回答是：将此属性添加到您的 ViewModel：

```
public Int32 SelectedCatalogId {get;set;} 
```

并将其绑定到 DropDownList：

```
@Html.DropDownListFor(m => m.SelectedCatalogId, Model.GetCatalogNameModel()) 
```

# android - 谷歌地图 v2 标记使用两个片段

> ID：15473270
> 
> 赞同：0
> 
> 时间：2013-03-18T09:21:50.707
> 
> 标签：android, google-maps, google-maps-markers

下午好。是否可以添加一个标记的几个片段？适用于 Android 版本 2 的 Google 地图

```
 Marker melbourne = mMap.addMarker(new MarkerOptions()
                          .position(MELBOURNE)
                          .title("Melbourne")
                          .snippet("Population: 4,137,400")); 
```

这是我的信息窗口

```
class MyInfoWindowAdapter implements InfoWindowAdapter{

           private final View myContentsView;

               MyInfoWindowAdapter(){
               LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams((w*2)/3, LayoutParams.WRAP_CONTENT);

               myContentsView = getLayoutInflater().inflate(R.layout.custom_info_contents, null);
               myContentsView.setLayoutParams(lp);
               }

       public View getInfoContents(Marker marker) {

               tvTitle = ((TextView)myContentsView.findViewById(R.id.title));
               tvTitle.setText(marker.getTitle());
               tvSnippet = ((TextView)myContentsView.findViewById(R.id.snippet));
               tvSnippet.setText(marker.getSnippet());

           return myContentsView;
       }

       public View getInfoWindow(Marker marker) {
              // TODO Auto-generated method stub
              return null;
       }

   } 
```

我想在必要时显示不同片段的不同标记。我该怎么做呢？这有可能吗？

**更新：** 您可能没有理解或错误地解释了我的解释。

```
public void ParseQueryMap() {
          ParseQuery query = new ParseQuery("MyObject");
          query.findInBackground(new FindCallback() {
          public void done(List<ParseObject> myObject, ParseException e) {
          if (e == null) {

                    for ( int i = 0; i < myObject.size(); i++) {

                          commGet =  myObject.get(i).getString("Comment");
                          bugGet = myObject.get(i).getObjectId();   

                          geo1Dub = myObject.get(i).getParseGeoPoint("location").getLatitude();
                          geo2Dub = myObject.get(i).getParseGeoPoint("location").getLongitude();

                         Location aLocation = new Location("first");
                         aLocation.setLatitude(geo1Dub);
                         aLocation.setLongitude(geo2Dub);
                         Location bLocation = new Location("second");
                         bLocation.setLatitude(location.getLatitude());
                         bLocation.setLongitude(location.getLongitude());
                         int distance = (int)aLocation.distanceTo(bLocation);

                              if (distance<rad) {
                                  myMap.addMarker(new MarkerOptions().position(new LatLng(geo1Dub,geo2Dub)).title(commGet).snippet(snippet)
                                      .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_RED)));     

                               } else {

                               }                                                      

                         }

             } else {
                    Toast.makeText(MainActivity.this, "Error!", Toast.LENGTH_SHORT).show();
              }
          }
      }); 
```

我想为每个标记获取 bugGet，用户 bugGet 不显示，但是当她点击 infowindow 时，我可以学习 bugGet 特定标记。“bugGet”它“id”我数据库中的每个标记。用户不需要，我需要你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:48:47.367

这是示例，您可以检查标记的坐标，然后决定`infoWindow`要显示的内容。

```
 map.setInfoWindowAdapter(new InfoWindowAdapter() {

            // Use default InfoWindow frame
            @Override
            public View getInfoWindow(Marker args) {
                return null;
            }

            // Defines the contents of the InfoWindow
            @Override
            public View getInfoContents(Marker args) {

                // Getting view from the layout file info_window_layout
                View v = getLayoutInflater().inflate(R.layout.info_window_layout, null);

                // Getting the position from the marker
                clickMarkerLatLng = args.getPosition();

                TextView title = (TextView) v.findViewById(R.id.tvTitle);
                title.setText(args.getTitle());

                map.setOnInfoWindowClickListener(new OnInfoWindowClickListener() {          
                    public void onInfoWindowClick(Marker marker) 
                    {
                        if (SGTasksListAppObj.getInstance().currentUserLocation!=null)
                        {   
                            if (String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLatitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) &&
                                    String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLongitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                            {
                                Toast.makeText(getApplicationContext(), "This your current location, navigation is not needed.",  Toast.LENGTH_SHORT).show();
                            }
                            else
                            {
                                FlurryAgent.onEvent("Start navigation window was clicked from daily map");
                                tasksRepository = SGTasksListAppObj.getInstance().tasksRepository.getTasksRepository();
                                for (Task tmptask : tasksRepository)
                                {
                                    String tempTaskLat = String.valueOf(tmptask.getLatitude());
                                    String tempTaskLng = String.valueOf(tmptask.getLongtitude());

                                    Log.d(TAG, String.valueOf(tmptask.getLatitude())+","+String.valueOf(clickMarkerLatLng.latitude).substring(0, 8));

                                    if (tempTaskLat.contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) && tempTaskLng.contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                                    {  
                                        task = tmptask;
                                        break;
                                    }
                                }

                                Intent intent = new Intent(getApplicationContext() ,RoadDirectionsActivity.class);
                                intent.putExtra(TasksListActivity.KEY_ID, task.getId());
                                startActivity(intent);

                            }
                        }
                        else
                        {
                            Toast.makeText(getApplicationContext(), "Your current location could not be found,\nNavigation is not possible.",  Toast.LENGTH_SHORT).show();
                        }
                    }
                });

                // Returning the view containing InfoWindow contents
                return v;

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:58:23.373

在我的一个项目中，我创建了一个新类`MarkerSnippet`并将所有信息添加到该类中，例如：

```
public class MarkerSnippet {
  private String foo;
  private String bar;
  public MarkerSnippet(String foo, String bar) {
    this.foo = foo;
    this.bar = bar;
  }
  // getter and setter for foo and bar
} 
```

然后我为每个标记创建一个实例，`MarkerSnippet`并使用 GSON 将其添加为 JSON 字符串（因为该片段仅接受字符串）：

```
Gson gson = new Gson(); // remark: only one Gson instane is needed
String fooContent = "myFoo";
String barContent = "myBar";

String snippetString = gson.toJson(new MarkerSnippet(fooContent, barContent));
map.addMarker(
  new MarkerOptions().position(position)
    .title(title)
    .snippet(snippetString)
); 
```

然后在您的 InfoWindowAdapter 中，您需要将您的 JSON 字符串转换为`MarkerSnippet`并仅将片段的这一部分添加到您要显示的视图中。

# codeigniter - 代码点火器形式

> ID：15473278
> 
> 赞同：0
> 
> 时间：2013-03-18T09:22:07.780
> 
> 标签：codeigniter

我有一个看法。在这个视图中

```
<form id="validate'>
some fields are here.
</form>
<form>
</form>
<input type="Submit" value ="Submit" > 
```

现在提交按钮将不起作用，因为它在下面，我希望表单 id="validate" 被发布。

因为我必须对表单 id="validate" 进行一些 JS 验证，所以这也行不通。

我的问题是如何发布表格并验证表格。让他们知道，如果我在这里不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:30:04.277

如果您使用它，使用 JQuery 很容易

```
<form id="validate'>
    some fields are here.
</form>

var validation  =   $('#validate').validate(); 
```

如果验证成功

```
$('#validate').submit(); 
```

别的

```
//do something else 
```

# c# - 在 C# 中启用和禁用 ToolStripMenu 条目？

> ID：15473279
> 
> 赞同：0
> 
> 时间：2013-03-18T09:22:09.040
> 
> 标签：c#, arrays, foreach, toolstripmenu

我有一个`Form`包含`Menu`两个条目的 a ，它们是*Menu*和*Tools*。这两个菜单有一些`SubMenus`。

现在我有一个`TextBox`被叫`txtSelect`和一个`Button`被叫`btnVisible`，如果我在 中输入 1,2，则`TextBox`中的`SubMenu`s`Menu`应该不可见。我写了下面的代码，有点硬写。

```
ToolStripMenuItem[] mstrip = new ToolStripMenuItem[] { msO1, msO2, msO3, msP1, msP2, msP3 };
if (txtSelect.Text.Length > 2)
{
    string word = txtSelect.Text;
    string[] splt = word.Split(',');
    for (int x = 0; x < mstrip.Length; x++)
        mstrip[x].Visible = true;
    for (int x = 0; x < splt.Length; x++)
    {
        int y = Convert.ToInt32(splt[x].ToString()) - 1;
        if (y >= 0 && y < mstrip.Length)
            mstrip[y].Visible = false;
        textBox1.AppendText(mstrip[y].Text);
        textBox2.AppendText(mstrip[y].OwnerItem.Text);
    }
} 
```

我想`foreach`在 Click 事件中使用循环，`Button`并尝试了以下操作，但结果与上面的代码不同。

```
foreach (ToolStripMenuItem mnItem in msMenus.Items)
{
    MessageBox.Show(mnItem.Text);
    for (int i = 0; i < mnItem.DropDown.Items.Count; i++)
    {
        MessageBox.Show(mnItem.DropDown.Items[i].Text);
        mnItem.DropDown.Items[i].Visible = true;
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:04:21.013

好吧，也许你想要这样的东西：

```
List<Int32> lstindex = new List<Int32>();
String[] splt = txtSelect.Text.Split(',');

// initialize list of indexed for textbox
foreach (String str in splt)
{
    lstindex.Add(Convert.ToInt32(str) - 1);
}

// for each menu
foreach (ToolStripMenuItem mnItem in msMenus.Items)
{
     // for each menu item
    foreach (ToolStripItem item in mnItem.DropDown.Items)
    {
        // if index of item is in the list of indexed, set visible to false, otherwise to true
        item.Visible = lstindex.Contains(mnItem.DropDown.Items.IndexOf(item)) ? false : true;
    }
} 
```

# linux - 用于设置环境变量的 shell 脚本

> ID：15473281
> 
> 赞同：2
> 
> 时间：2013-03-18T09:22:21.483
> 
> 标签：linux, shell, unix, environment-variables

我正在编写一个 shell 脚本来设置其值在文件中可用的环境变量。下面是我写的shell脚本，

```
VARIABLE_FILE=env-var.dat
if [ -f ${VARIABLE_FILE} ] ; then
   . ${VARIABLE_FILE}
   if [ ! -z "${TEST_VAR1}" ] ; then
      export TEST_VAR1="${TEST_VAR1}"
   fi
   if [ ! -z "${TEST_VAR2}" ] ; then
      export TEST_VAR2="${TEST_VAR2}"
   fi
fi 
```

上面的代码仅在 bash shell 中有效，因为我使用 export 命令设置环境变量，如果我将它与任何其他 shell 一起使用，它会失败。是否有任何命令可以设置适用于任何 shell 的环境变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:43:29.330

像 bash 和 zsh 这样的“更高级”的 shell 允许您设置变量并将其同时导出为环境变量，如下所示：

```
export FOO=bar 
```

使用标准的 POSIX bourne shell，可以通过两个命令来实现：

```
FOO=bar
export FOO 
```

请注意，一旦您导出了一个变量，您可以稍后在脚本中将其重置为不同的值，并且它仍然被导出（您不需要再次导出它）。此外，您可以一次导出多个变量：

```
FOO=bar
BAZ=quux
export FOO BAZ 
```

您在评论中提到了 tcsh，但 csh 和衍生品与基于 bourne 的 shell 完全不同（不推荐使用！）。您很少可以同时使 shell 脚本与 sh 和 csh 兼容。对于 csh，请查看`setenv`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:30:12.520

如果你真的想让这发生，它是可以做到的，但这很棘手。一种方法是使用 awk 输出正确的语法并评估从 awk 返回的文本。要在主要的 sh 和 csh 风格之间共享单个环境变量值文件，文件中的以下命令会将变量值文件导入环境：（是的，是的，这是一个巨大的行，由于某些 shell 处理的不灵活方式反引号。如果你不介意也有一个 .awk 文件，你可以使用 awk -f...)

```
eval `awk '{ var = $1; $1="";  val=substr($0,2); if ( ENVIRON["SHELL"] ~ /csh$/) { print "setenv", var, " \"" val "\";" } else { print var "=\"" val "\"" ; print "export", var }}' $HOME/env_value_file` 
```

变量值文件采用以下格式：

```
FOO value for foo
BAR foo bar
BAZ $BAR plus values $FOO 
```

用于教育目的的设计说明：

1.  在 awk 中，访问字段 2-NF 没有简单的方法，所以如果我们的变量值中可能有空格，我们需要修改 $1 以使 $0 接近以获得我们想要的值。
2.  为了让它工作，因为总是设置一个 SHELL 变量，但不是作为环境变量，也不是一致的大写，你必须从 shell 的值中润湿一个 SHELL 环境变量，如下所示。在使用脚本之前作为环境变量。
3.  此外，如果您希望在导入环境脚本之后出现新的环境值，则需要获取环境脚本。
4.  如果 shell 不能很好地进行 eval，则必须调整脚本。

对于 bourne shell 风味（bash、sh、ksh、zsh）：

```
export SHELL
. import_environment 
```

对于 csh 风格：（shell 变量在 csh shell 中往往是小写的）

```
setenv SHELL "$shell"
source import_environment 
```

# .net - MS SQL 中的 VFP 宏功能

> ID：15473283
> 
> 赞同：0
> 
> 时间：2013-03-18T09:22:25.097
> 
> 标签：.net, sql-server, macros, visual-foxpro

我有一个任务，我不知道怎么称呼它……反正，

我需要为具有不同设置的多个人做一份报告，我在想哪一个是最好的方法。我使用**MsSQL**加载数据和一些存储过程来提取和创建导出文件。

为了显示，

```
MGR1  ->wants net sales, tax, discount
MGR2  ->wants net sales, gross sales, adjustments, tax
ACCT1 ->wants tax, discounts 
```

我试图让事情尽可能地充满活力，并且能够满足未来的需求（如果有的话）……这最终是不可避免的。

这是我的计划，

```
1\. I will create 2 table reference:
   a: Table1 stores all the fields required for all personnel (the table will grow in columns)
   b. Table2 stores all the formula for each personnel for each field (the table will grow in rows) 
```

我想知道这是否是正确的做事方式，为什么我要这样做是因为一些要求尚不清楚，但从某种意义上说，我已经拥有了所有我需要的东西，只是我试图消除去的过程每次需求发生变化时都通过脚本更改表中的值（公式）。

基本上，这可以做到吗？有哪些优点和缺点，可以实施哪些可能的设计来支持这些要求？

# web-config - mvc 4 - web.config 转换是否可能有 3 个或更多

> ID：15473290
> 
> 赞同：5
> 
> 时间：2013-03-18T09:22:44.367
> 
> 标签：web-config, transformation

我正在尝试确定是否可以进行 2 个以上的 web.config 转换？

我经常遇到我想要 3 的情况，因为我经常必须将新版本的测试/演示版本放在沙盒环境中供客户签署，例如

web.debug.config
web.prerelease.config
web.release.config

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T09:31:45.903

它是并且它是一个非常好的和强大的功能。我只为我的版本使用[转换](http://msdn.microsoft.com/en-us/library/dd465326.aspx)，但可以使用额外的暂存配置。见[这篇文章](http://msdn.microsoft.com/en-us/vs2010trainingcourse_webdevelopment_topic4.aspx)。

# oracle - 如何使用 jmx fetchlet 收集 HashMap

> ID：15473291
> 
> 赞同：1
> 
> 时间：2013-03-18T09:22:45.690
> 
> 标签：oracle, jmx, oracle-enterprise-manager

我正在使用 OEM 云控制 12.1c。我有一个 java 进程，用于在我的应用程序中收集一些指标。jmx 属性之一是 Map (java.util.Map)。

现在，我想创建一个定期收集此地图的 OEM 插件。我尝试使用 jmxcli 实用程序生成目标元数据，但该工具要求我输入地图的键。密钥是动态生成的，因此在创建目标元数据时无法输入这些密钥。

你们中有人遇到过这个问题吗？我该如何解决这个问题？我不想硬编码密钥，需要在我的插件主页中显示完整的地图。

这是我选择地图时控制台中的一个片段：

```
JavaBean (of type Map) is : TypeDistributionMap
0: empty
1: ** User defined Name Values **
Select one or more items as comma separated indices: 1
*** Getting values for User Defined properties

Looping through all user defined Keys. Enter '..' to exit loop.

Enter the key: [This key is dynamic, what should I enter here?]
Enter the DATATYPE of the value: [java.lang.String] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:22:55.820

与其使用 HashMap（或 Map），不如返回 TabularData，这是 JMX 的最佳实践（我猜 JMX fetchlet 不支持 Maps）。当我使用 TabularData 时，我能够使用 jmxcli 实用程序生成元数据。

# java - 在 TFS 中使用 Jenkins TFS 插件？

> ID：15473292
> 
> 赞同：1
> 
> 时间：2013-03-18T09:22:46.587
> 
> 标签：java, tfs, jenkins

是否有可能使用 TFS 作为主系统并从 TFS 本身启动 Jenkins 的[TFS 插件](https://wiki.jenkins-ci.org/display/JENKINS/Team+Foundation+Server+Plugin)并将（代码质量）结果从 Jenkins 推送到 TFS？通过这种方式，您可以在 TFS 中按下一个按钮以使用例如 Sonar 启动 Jenkins 构建，并在 TFS 中查看该构建的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-08T19:43:01.313

目前，使用 Team Build（TFS 构建环境）支持声纳多维数据集的集成，因此如果您的目标是声纳多维数据集，则可以使用它；[http://www.sonarqube.org/announcing-sonarqube-integration-with-msbuild-and-team-build/](http://www.sonarqube.org/announcing-sonarqube-integration-with-msbuild-and-team-build/)。但是如果你真的需要触发 jenkins，那么有很多选择；[TFS 构建后触发 Jenkins](https://stackoverflow.com/questions/17731683/triggering-jenkins-after-tfs-build)

# android - 如何使用 stripDrawable 和间距自定义 PagerTabStrip

> ID：15473295
> 
> 赞同：4
> 
> 时间：2013-03-18T09:23:08.337
> 
> 标签：android, android-viewpager

我有一个 Viewpager 并想为其设置标题。我能够做到这一点。但是定制相同的东西给我带来了问题。

1）。我不想要标题下方的默认条，而是希望我的选择栏在那个地方。我知道我们可以更改条带的颜色，但是否可以提供相同的可绘制对象。

2）。我只有 3 个 ViewPager 页面，所以我希望所有 3 个标题同时可见。

3）。我们可以定义标题下方条带的宽度吗

请提供相同的建议。我卡在这中间。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-19T08:49:15.240

我不确定我是否正确理解了您的第一个问题，但请尝试阅读这篇文章：

[android: 如何从 Android Support Lib 版本 4 向 PagerTabStrip 添加图标/drawables？](https://stackoverflow.com/questions/11839031/android-how-to-add-icons-drawables-to-the-pagertabstrip-from-the-android-suppor)

# python - 使用 pycharm 快速运行应用程序

> ID：15473297
> 
> 赞同：-2
> 
> 时间：2013-03-18T09:23:18.090
> 
> 标签：python, bash, pycharm, canonical-quickly

我想知道如何`quickly`使用`pycharm`. 我希望这样做的方式不是说：

```
$ quickly run 
```

在终端，我希望我可以改为说类似的话

```
$ python bin/myapp.py 
```

（这是[这里](https://askubuntu.com/questions/205403/quickly-with-python-3-or-how-to-start-a-quickly-app-without-quickly-run)的建议，但它似乎对我不起作用）。这意味着我不必在 python 解释器上做任何奇怪的设置。但是，如果需要，我可以调整`pycharm's`设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:00:05.603

好的，我在寻找添加解释器时找到了答案。去运行>编辑配置。

我不知道这是否有必要，但我只是将项目解释器的工作目录设置为应用程序之一（默认情况下它可能会这样做）。

在其下方，有一个带有 + 图标的地方。单击此处添加外部工具。

该工具的必要设置是程序：“快速”和参数：“运行”（均不带引号）。

同样，我不确定在这里设置工作目录是否必要，但我这样做只是为了安全。

# c++ - 切换枚举类的所有项目时的默认案例编译

> ID：15473298
> 
> 赞同：5
> 
> 时间：2013-03-18T09:23:34.050
> 
> 标签：c++, c++11, enums

为什么下面的开关甚至编译默认情况，因为它涵盖了枚举类的所有项目？我会认为这就是`enum class`首先拥有强大的原因。

至于为什么即使我知道我涵盖了所有情况，我仍希望违约：这可以保护我免受我未来的粗心大意（以及其他同事的粗心大意）

```
enum class E {
    a,
    b
};

int main()
{
    E c = E::b;
    switch (c) {
        case E::a:
        case E::b:
            std::cout << "pass" << std::endl;
            break;
        default:
            static_assert(false, "This explodes!");
    }    
} 
```

[证明](http://coliru.stacked-crooked.com/view?id=da4d489de0341eeebc838ef39edafb54-cf309a81c3a64a9a75c8145c94b8ae21)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T09:29:15.633

因为编译无法知道是否有人将非法值转换为枚举类型。考虑：

```
E c = static_cast<E>( 42 ); 
```

当您明确告诉编译器“我知道我在做什么，不要检查值”时，演员表将在没有警告（甚至错误）的情况下编译。在实践中，可悲的是，这种情况发生的频率比你想象的要多。:(

此外，所有代码都必须是有效的，即使它后来因为无法访问而被删除。A`static_assert(false,...)`将在编译时触发，与运行时发生的情况无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:37:39.063

枚举不限于您命名的值。它们仅限于适合基础类型的值，这是一个足够大以容纳所有值的整数类型。例如：

```
enum flags {
    first = 0x01,
    second = 0x02,
    third = 0x04,
    fourth = 0x08
};

flags operator | (flags f0, flags f1) {
    return flags((int)f0 | (int)f1);
}

flags f = first | second; // okay; f holds 0x03 
```

# batch-file - 用于检查文件大小并发送邮件（如果更大）的批处理脚本

> ID：15473303
> 
> 赞同：0
> 
> 时间：2013-03-18T09:23:50.140
> 
> 标签：batch-file

我一直在研究一个批处理脚本，它检查文件的大小并在大小大于 0 字节的情况下发送电子邮件：

```
set V_TMP_FILE="D:\pmserver\Tgtfiles\XLI_stage\f_cdc_flag1.out" 
set minbytesize=0  
if exist %V_TMP_FILE% (
FOR %%A IN ('%V_TMP_FILE%') DO set size=%%~zA
if %size% GTR %minbytesize% (
    %V_EMAIL_PATH%\postie -host:internalmail.usa.xl -to:"%V_TO_EMAIL_ID%" -from:%COMPUTERNAME%@xlgroup.com -s:"%V_SRC_TABLE_NM% %V_SUBJ%" -msg:"%V_MSG%" 
) else (
    echo %V_TMP_FILE% is EMPTY
) 
```

* * *

我收到以下错误 -

标准输出和错误：

```
h file. 0 was unexpected at this time.

D:\Informatica91\server\bin>if  GTR 0 ( 
```

* * *

请帮我解决这个问题，这真的需要我花时间去挖掘这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:39:15.140

在执行之前，批处理会解析整个命令，即使它分布在多行中。作为该过程的一部分，它用任何 %var% 变量替换`VAR`它被解析时的值 - 即在它被执行**之前。**

`SIZE`在解析之前**没有**设置`IF...`，所以它的值被 (nothing) 替换，因此命令被解释为`IF (nothing) GTR 0`

此外，文件名周围的单引号会改变文件名，因为`'`它是一个有效的文件名字符。

治愈次数：似乎最简单

```
if exist %V_TMP_FILE% (
FOR %%A IN (%V_TMP_FILE%) DO (
if %%~zA GTR %minbytesize% (
    %V_EMAIL_PATH%\postie -host:internalmail.usa.xl -to:"%V_TO_EMAIL_ID%" -from:%COMPUTERNAME%@xlgroup.com -s:"%V_SRC_TABLE_NM% %V_SUBJ%" -msg:"%V_MSG%" 
) else (
    echo %V_TMP_FILE% is EMPTY
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:39:21.427

我们不得不回答这个问题多少次......

好的，请查看我可能在一周前写的[这个答案。](https://stackoverflow.com/questions/15291341/a-batch-file-to-read-a-file-and-replace-a-string-with-a-new-one/15291885#15291885)它解释了***一切***...

# jquery - 我的 Rails 地址选择器（address_picker-rails）适用于第一个输入，但不是第二个输入？

> ID：15473304
> 
> 赞同：0
> 
> 时间：2013-03-18T09:23:53.337
> 
> 标签：jquery, ruby-on-rails, jquery-ui, geolocation

我正在使用 address_picker-rails gem，它非常适合第一个输入，但由于某种原因不是第二个。我现在经历了一百万次。有什么想法吗？

下面带有 Jquery 的 _new 表单代码：

```
 <%= form_for(@post) do |f| %>
  <% if @post.errors.any? %>
  <div id="error_explanation">
  <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being      
   saved:</h2>

  <ul>
  <% @post.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
 </div>
 <% end %>
<fieldset>
 <div class="field">
  <%= f.label :from %><br />
 <%= f.text_field :from, :class => 'address-picker-input' %>
</div>
 </fieldset>
<fieldset>
<div class="field">
 <%= f.label :to %><br />
 <%= f.text_field :to, :class => 'address-picker-input' %>

</div>
</fieldset>

<script type="text/javascript">

    //AddressPickerRails.Pickers.applyOnReady({
    //    'onLoad':function (railsPicker) {
    //        console.debug("callback for a single post with ID '%s'",   
           railsPicker.getIdPrefix());
    //    }
    //});

    AddressPickerRails.Pickers.apply({
        'onLoad':function (railsPicker) {
            console.debug("callback for a single post with ID '%s'", 
             railsPicker.getIdPrefix());
        }
    });
</script>

 <div class="actions">
 <%= f.submit %>
 </div>
 <% end %> 
```

HTML 代码：

```
<div class="field">
<label for="post_to">To</label><br>
<input class="address-picker-input ui-autocomplete-input" id="post_to" name="post[to]"   
size="30" type="text" autocomplete="off"><span role="status" aria-live="polite"   
class="ui-helper-hidden-accessible">19 results are available, use up and down arrow 
keys to navigate.</span>
</div>

<div class="field">
<label for="post_from">From</label><br>
<input class="address-picker-input" id="from_field" name="post[from]" size="30" 
type="text">
</div> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:53:54.647

您需要为每个地址字段添加一个地图元素：

```
<div id="post_to_map_wrapper" class="address-picker-map-wrapper">
  <div id="post_to_map" class="address-picker-map"></div>
</div>

<div id="post_from_map_wrapper" class="address-picker-map-wrapper">
  <div id="post_from_map" class="address-picker-map"></div>
</div> 
```

新的 0.3.0 版本修复了这个问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:29:47.257

检查 dom 并确保这两个字段具有不同的 dom ID。此外，您是否在控制台中看到任何 javascript 错误或调试输出？

**更新：** 明确设置 id（以保证唯一性）而不是让 rails 猜测：

```
<%= f.text_field :from, :class => 'address-picker-input', :id => 'from_field' %> 
```

# javascript - 仅在文件上传完成后执行函数。Javascript

> ID：15473309
> 
> 赞同：1
> 
> 时间：2013-03-18T09:24:06.887
> 
> 标签：javascript

如何（通过使用javascript）仅在文件上传完成后才执行函数？我的意思是 'uploading2' 仅在 'submit()' 完成后执行。

```
function uploadimg1() {
  document.forms.imgupload.act.value='upload';
  document.forms.imgupload.submit();
}
function uploadimg2() {
  doc = frames['frm1'].document;
  imgs=doc.getElementsByTagName('img').length-1;
  img = doc.getElementById(imgs);
  opener.document.forms[0].src.value = '<?php echo $IMGURL ?>/'+img.alt;
  window.close();
}
function uploadimg() {
  uploadimg1();
  uploadimg2();
} 
```

# asp.net-mvc - Colnames <> Colmodel 问题的长度 JQGrid

> ID：15473314
> 
> 赞同：0
> 
> 时间：2013-03-18T09:24:27.717
> 
> 标签：asp.net-mvc, json, jqgrid

我正在尝试使用 Ajax 调用将列动态加载到 JQGrid，如此处提到的[jqGrid 和动态列绑定](https://stackoverflow.com/questions/2277962/jqgrid-and-dynamic-column-binding)

我刚刚做了一个 1 列的样本。我的列名 JSON

```
"Data":["Airport"]  which working just fine. 
```

问题出在下面的 ColumnModel JSON

```
{"colModelData":{"items":[{"name":"Airport"}]} 
```

它不工作。我需要如何更改我的 JSON 以便 JQGrid 接受

我怎样才能让它工作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:58:44.213

我认为您只是以错误的方式使用发布的数据。可能您使用`colModel: result.colModelData`的不是`colModel: result.colModelData.items`哪个更对应于 JSON 数据。

顺便说一句，您可以`label`在 of 的项目中使用属性`colModel`并且*不指定任何`colNames`*.

# neo4j - 如何将 org.neo4j.rest.graphdb.entity.RestNode 转换为 Spring Data Neo4j 节点实体

> ID：15473316
> 
> 赞同：0
> 
> 时间：2013-03-18T09:24:44.963
> 
> 标签：neo4j, spring-data, spring-data-neo4j

我正在使用 Spring Data for Neo4j 来访问 Neo4j 图表。我有一个`UserRepository`带注释的查询，如下所示：

```
package com.abc.graph.repository;

import java.util.List;
import java.util.Map;

import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.neo4j.annotation.Query;
import org.springframework.data.neo4j.repository.GraphRepository;
import org.springframework.data.neo4j.repository.NamedIndexRepository;
import org.springframework.data.neo4j.repository.RelationshipOperationsRepository;

import com.abc.graph.entity.User;

public interface UserRepository extends GraphRepository<User>, NamedIndexRepository<User>,
        RelationshipOperationsRepository<User> {
    public User findById(String id);

    public Page<User> findByNameLike(String name, Pageable page);

    @Query("START user=node:User(id={0}) " +  
            "MATCH user-[:VISITS]->(location)<-[:VISITS]-(similar_user) " +
            "RETURN similar_user, collect(location) as locations, count(*) as count " + 
            "ORDER BY count desc ")
    public List<Map<String, Object>> findSimilarUsersByPlaceVisited(String userId);
} 
```

我试图从图表中检索的是去过类似地方的用户列表，对于每个用户，他们去过的常见地方是什么。该方法将返回一个列表`Map<String, Object>`。每个地图都将包含类似`similar_user`和`locations`的键`count`。

从调试语句中我可以看到这`similar_user`是`org.neo4j.rest.graphdb.entity.RestNode`. 有没有办法将它转换为我的 Spring Data 节点实体`com.abc.graph.entity.User`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:15:23.017

您可以使用以下方法手动执行此操作：

`template.createEntityFrom[Stored]State(userNode[,User.class)`

或者，您将一个`Iterable`或定义为使用 getter 为三列`Collection`注释的接口的结果。`@MapResult`它要么自动将 getter 名称映射到结果列，要么您可以提供要映射到的名称。

```
@MapResult
interface SimilarUser {

   @ResultColumn("count") int getCount();
   @ResultColumn("similar_user") User getUser();
   @ResultColumn("locations") Collection<Location> getLocations();
} 
```

# jquery - 在 Rails 中就地编辑 X-editable No Route Matches [POST]

> ID：15473318
> 
> 赞同：2
> 
> 时间：2013-03-18T09:24:51.750
> 
> 标签：jquery, ruby-on-rails, json

我正在使用 Rails 3 和[X-editable](http://vitalets.github.com/x-editable/)进行就地编辑。添加必要的文件后，当我尝试更新时，它返回`No route matches [POST]`.

我尝试了以下不同的代码行：

```
<a href="#" id="username" data-type="text" data-pk="1" data-url="/post" data-original-title="Enter username">superuser</a>

<a href="#" id="username" data-type="text" data-resource="post" data-pk="1" data-url="/post" data-original-title="Enter username">superuser</a>

<a href="#" id="username" data-type="text" data-model="post" data-pk="1" data-url="/post" data-original-title="Enter username">superuser</a> 
```

我已经对我的控制器进行了编码以接受 JSON，但似乎根本没有向控制器提供数据。

我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:40:36.050

@muttonlamb 是对的。我应该正确检查。`post`不在路线中，`put`而是在路线中。

根据[Rails 路由指南](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)，要编辑现有记录，`put`应该使用，而不是`post`. `post`仅用于新记录。

x-editable 的默认 ajax 调用是`post`，但我可以将其更改为`put`使用以下内容：

```
$().editable({
  ajaxOptions: {
    type: 'put'
  }
}); 
```

更多选项可以在这里找到：http: [//vitalets.github.com/x-editable/docs.html#editable](http://vitalets.github.com/x-editable/docs.html#editable)

# android - 使用 photoview 和 photoviewattacher 删除时 Viewpager 视图更新错误

> ID：15473319
> 
> 赞同：1
> 
> 时间：2013-03-18T09:24:52.603
> 
> 标签：android, android-viewpager, photo-gallery, android-pageradapter

我使用了来自 Chris Banes 开源 photoview 库的 photoview 以及 ViewPager 中的 Universal Imager Loader 库来制作图库应用程序。问题是当我尝试删除图像时，从 sdcard 中删除图像文件，更新关联的数据列表，当我调用 notifyDataSetChagned() 时，没有任何反应，视图保留在寻呼机内并且没有改变。

覆盖 getItemPosition() 并返回 POSITION_NONE 会从 PhotoAttacher 返回错误：E/AndroidRuntime(18407): java.lang.IllegalStateException: ImageView 不再存在。您不应再使用此 PhotoViewAttacher。

正如我所提到的，没有它，就没有任何变化。有任何想法吗？

下面是代码的链接：

[http://pastie.org/private/ezvnfcdi6iicosxys1c5g](http://pastie.org/private/ezvnfcdi6iicosxys1c5g)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T10:14:08.597

我没有使用 an`ImageView`并在其上附加 a `PhotoViewAttacher`，而是在 xml 布局中使用它`uk.co.senab.photoview.PhotoView`来代替`ImageView`它并且它起作用了。

# sqlite - 在 SQLite 数据库中插入当前日期和时间

> ID：15473325
> 
> 赞同：42
> 
> 时间：2013-03-18T09:25:05.223
> 
> 标签：sqlite, android-sqlite

我想在 SQLite 中创建一个表，其中一个字段是日期，当前实例的日期和时间应该保存在其中。我应该使用哪种数据类型？

我打算使用“时间戳”。如何将当前时间戳值插入字段？另外如何为此日期字段编写内容值？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-18T09:45:00.127

SQLite 支持标准 SQL 变量`CURRENT_DATE`、`CURRENT_TIME`和`CURRENT_TIMESTAMP`：

```
INSERT INTO Date (LastModifiedTime) VALUES(CURRENT_TIMESTAMP) 
```

SQLite 中[日期/时间](http://www.sqlite.org/datatype3.html#datetime)的默认数据类型是`TEXT`.

`ContentValues`不允许使用通用 SQL 表达式，只能使用固定值，因此您必须在 Java 中读取当前时间：

```
cv.put("LastModifiedTime",
       new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(new Date())); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-18T09:30:27.910

```
INSERT INTO Date (LastModifiedTime) VALUES(DateTime('now')) 
```

使用此[站点](http://www.sqlite.org/lang_datefunc.html)以供进一步参考。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-13T17:32:46.510

要获取当前本地（系统）时间，请添加 'localtime' 选项：

选择日期时间（'现在'，'本地时间'）；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T17:04:17.530

我在我的应用程序中经常使用时间戳。对我来说，保持时间戳的最佳方式是以毫秒为单位进行转换。之后，很容易将其转换为任何语言环境。

如果您需要当前时间，请使用 System.currentTimeMillis()。内容值很容易使用，你只需加上字段和值，比如：

```
ContentValues ins_reminder = new ContentValues();
ins_reminder.put("REMIND_TIMESTAMP", System.currentTimeMillis()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-21T17:23:48.183

从 SQLite 3.38.0 开始，有一个`unixepoch()`函数以整数形式返回 UNIX 时间戳。做同样的事情`strftime('%s')`。

参考：

*   [发布日志草稿](https://www.sqlite.org/draft/releaselog/current.html)
*   [报到](https://sqlite.org/src/info/19c51b46e4095ee28badb10f4e08bbd330bda320c9a8806e93b8fc60ba211a2e)

# java - 如何在 Netbeans 中更改 toString() 代码片段的功能

> ID：15473326
> 
> 赞同：2
> 
> 时间：2013-03-18T09:25:07.510
> 
> 标签：java, netbeans

Netbeans IDE 中是否有可能如何从上下文菜单中更改其在“toString()...”(Alt+Shift+S) 代码片段函数中的行为？

我想在最终生成的 toString() 方法中包含从类及其超类中选择的方法（主要是 getter）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:55:57.753

我不知道是否可以“覆盖”“*生成”（Alt + 插入）*`toString()`菜单的默认行为，但您可以为您的自定义方法创建自己的代码生成器。*`toString()`*

 *您需要创建一个“Netbeans 模块项目”。在这里你有一个完整的指南：

**代码生成器集成**- [http://platform.netbeans.org/tutorials/nbm-code-generator.html](http://platform.netbeans.org/tutorials/nbm-code-generator.html)*

# r - 子集数据框

> ID：15473327
> 
> 赞同：0
> 
> 时间：2013-03-18T09:25:08.223
> 
> 标签：r, subset

我有一个数据框，其中包含几个不同站点的鹅数量。目的是在 9 月至 4 月之间的所有 8 个月中，在连续冬季期间对每个地点的鹅进行每月计数。冬季定义为 9 月至 4 月之间的 8 个月。

如果该方法已按计划执行，数据将如下所示：

```
df <- data.frame(site=c(rep('site 1', 16), rep('site 2', 16), rep('site 3', 16)),
                   date=dmy(rep(c('01/09/2007', '02/10/2007', '02/11/2007', 
                              '02/12/2007', '02/01/2008',  '02/02/2008', '02/03/2008',  
                              '02/04/2008', '01/09/2008', '02/10/2008', '02/11/2008', 
                                  '02/12/2008', '02/01/2009',  '02/02/2009', '02/03/2009',  
                                  '02/04/2009'),3)),
                   count=sample(1:100, 48)) 
```

最终出现的情况是，某些站点在某些 9 月至 4 月期间具有全部 8 个计数，但在其他 9 月至 4 月期间则没有。此外，一些站点在 9 月至 4 月期间从未达到 8 个计数。这些玩具数据看起来像我的实际数据：

```
df <- df[-c(11:16, 36:48),] 
```

我需要从数据框中删除不属于 9 月至 4 月期间连续 8 次计数的行。使用玩具数据，这是我需要的数据框：

```
df <- df[-c(9:10, 27:29), ] 
```

我尝试了使用`ddply()`from `plyr`package 的各种命令，但没有成功。这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:08:41.703

我能想到的一种方法是从您的日期中**减去四个月**，这样您就可以按`year`. 要减去4个月得到对应的日期，我建议你使用`mondate`包。有关减去月份时会遇到什么问题以及如何克服它的绝佳答案，请参见[**此处。**](https://stackoverflow.com/questions/5225823/how-to-subtract-months-from-a-date-in-r)

```
require(mondate)
df$grp <- mondate(df$date) - 4
df$year <- year(df$grp)
df$month <- month(df$date)
ddply(df, .(site, year), function(x) {
    if (all(c(1:4, 9:12) %in% x$month)) {
        return(x)
    } else {
        return(NULL)
    }
})

#      site       date count        grp year month
# 1  site 1 2007-09-01    87 2007-05-02 2007     9
# 2  site 1 2007-10-02    44 2007-06-02 2007    10
# 3  site 1 2007-11-02    50 2007-07-03 2007    11
# 4  site 1 2007-12-02    65 2007-08-02 2007    12
# 5  site 1 2008-01-02    12 2007-09-02 2007     1
# 6  site 1 2008-02-02     2 2007-10-03 2007     2
# 7  site 1 2008-03-02   100 2007-11-02 2007     3
# 8  site 1 2008-04-02    29 2007-12-03 2007     4
# 9  site 2 2007-09-01     3 2007-05-02 2007     9
# 10 site 2 2007-10-02    22 2007-06-02 2007    10
# 11 site 2 2007-11-02    56 2007-07-03 2007    11
# 12 site 2 2007-12-02     5 2007-08-02 2007    12
# 13 site 2 2008-01-02    40 2007-09-02 2007     1
# 14 site 2 2008-02-02    15 2007-10-03 2007     2
# 15 site 2 2008-03-02    10 2007-11-02 2007     3
# 16 site 2 2008-04-02    20 2007-12-03 2007     4
# 17 site 2 2008-09-01    93 2008-05-02 2008     9
# 18 site 2 2008-10-02    13 2008-06-02 2008    10
# 19 site 2 2008-11-02    58 2008-07-03 2008    11
# 20 site 2 2008-12-02    64 2008-08-02 2008    12
# 21 site 2 2009-01-02    92 2008-09-02 2008     1
# 22 site 2 2009-02-02    69 2008-10-03 2008     2
# 23 site 2 2009-03-02    89 2008-11-02 2008     3
# 24 site 2 2009-04-02    27 2008-12-03 2008     4 
```

使用的替代解决方案`data.table`：

```
require(data.table)
require(mondate)
dt <- data.table(df)
dt[, `:=`(year=year(mondate(date)-4), month=month(date))]
dt.out <- dt[, .SD[rep(all(c(1:4,9:12) %in% month), .N)], 
           by=list(site,year)][, c("year", "month") := NULL] 
```

# css - 突破范围

> ID：15473328
> 
> 赞同：2
> 
> 时间：2013-03-18T09:25:10.313
> 
> 标签：css, less, media-queries, dry

理想情况下，我想这样做：

```
@w: 4px;

@media (max-width:900px) {
    @r: 3px; 
}
@media (min-width:900px) {
    @r: 5px; 
}

.myclass {
    border-radius: @w + @r;
} 
```

这不会编译，因为`@r`没有在我定义的范围内定义`.myclass`。显而易见的解决方案是`.myclass`在`@media`blocs`@media`内部定义或在`.myclass`.

但是，一旦您`@r`在许多课程中使用，这两种解决方案都很混乱并且涉及许多重复。

有干净的干燥溶液吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T11:04:35.127

只需使用一个 mixin，它会根据媒体查询计算属性值。没有必要通过导入来做到这一点。

**较少的：**

```
@w: 4px;
.bordermixin(@w,@r) {
  .myclass{
    border-radius: @w + @r;
  }
}
@media (max-width:900px) {
    .bordermixin(@w,3px);
}
@media (min-width:900px) {
    .bordermixin(@w,5px);
} 
```

**CSS：**

```
@media (max-width: 900px) {
  .myclass{
    border-radius: 7px;
  }
}
@media (min-width: 900px) {
  .myclass{
    border-radius: 9px;
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T10:06:04.927

我找到了一个基于 的解决方案，`@import`它可以让我保持干爽。

我制作了两个文件：

**类.less**

```
@w: 4px;

.myclass {
    border-radius: @w + @r;
} 
```

**媒体宽度.less**

```
@media (max-width:900px) {
    @r: 3px; 
    @import "classes.less";
}
@media (min-width:900px) {
    @r: 5px; 
    @import "classes.less";
} 
```

**生成的 CSS ：**

```
@media (max-width: 900px) {
  .myclass {
    border-radius: 7px;
  }
}
@media (min-width: 900px) {
  .myclass {
    border-radius: 9px;
  }
} 
```

这样我就不必重复许多类定义，而只需重复导入。

* * *

我接受了 Martin 的回答，在最常见的情况下，当只有少数几个变量要传递时，这会更清晰。一旦您有更多变量并且您的类在许多文件中定义时，我的解决方案可能会更干燥和更清洁。

# visual-studio-2012 - WiX 引导程序应用程序

> ID：15473332
> 
> 赞同：2
> 
> 时间：2013-03-18T09:25:17.267
> 
> 标签：visual-studio-2012, installation, wix, packaging, bootstrapper

我想要一个引导程序在安装我的[setup.msi之前安装](http://en.wikipedia.org/wiki/Windows_Installer)[.NET](http://en.wikipedia.org/wiki/.NET_Framework) 4.5（如果不可用）。如果机器有 .NET 4.5，那么我只想安装产品 setup.msi。

以下是我的代码：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">

    <Bundle Name="AAA" Version="1.0.0.0"  UpgradeCode="8DA460D6-B4CB-4ED0-A1FE-44F269070647">
        <BootstrapperApplicationRef Id="ManagedBootstrapperApplicationHost">
        </BootstrapperApplicationRef>

        <Chain>
            <PackageGroupRef Id="Netfx45FullP"/>

            <MsiPackage Compressed="yes" Vital="yes"  Id="PMService" Cache="yes" Visible="no"
                SourceFile="C:\Users\abc.msi">
            </MsiPackage>
        </Chain>
    </Bundle>

    <Fragment>
        <WixVariable Id="WixMbaPrereqPackageId" Value="Netfx45Full" />
        <WixVariable Id="WixMbaPrereqLicenseUrl" Value="NetfxLicense.rtf" />

        <util:RegistrySearch Root="HKLM" Key="SOFTWARE\Microsoft\Net Framework Setup\NDP\v4\Full" Value="Version" Variable="Netfx4FullVersion" />
        <util:RegistrySearch Root="HKLM" Key="SOFTWARE\Microsoft\Net Framework Setup\NDP\v4\Full" Value="Version" Variable="Netfx4x64FullVersion" Win64="yes" />

        <PackageGroup Id="Netfx45FullP">
            <ExePackage Id="Netfx45" Cache="no" Compressed="yes" PerMachine="yes" Permanent="yes" Vital="yes"
                        InstallCommand="/q"
                        SourceFile="dotNetFx45_Full_x86_x64.exe"
                        DetectCondition="(Netfx4FullVersion=&quot;4.5.50709&quot;) AND (NOT VersionNT64 OR (Netfx4x64FullVersion=&quot;4.5.50709&quot;))"
                        InstallCondition="(VersionNT >= v6.0 OR VersionNT64 >= v6.0) AND (NOT (Netfx4FullVersion=&quot;4.5.50709&quot; OR Netfx4x64FullVersion=&quot;4.5.50709&quot;))"/>
        </PackageGroup>
    </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:52:22.030

您需要删除`AND (NOT (Netfx4FullVersion=&quot;4.5.50709&quot; OR Netfx4x64FullVersion=&quot;4.5.50709&quot;)`安装条件的一部分。

检测条件将处理判断是否安装了 .NET Framework 的情况。如果检测到已安装，则不会再次安装。

安装条件将确定是否应允许软件包在机器上。如果它评估为假，则将从机器上卸载包。

通过将检测条件添加到安装条件，您基本上可以确保软件包可以安装在机器上并留在机器上。:)

# java - java数组中4个元素的总和等于k，重复的数组元素

> ID：15473335
> 
> 赞同：-1
> 
> 时间：2013-03-18T09:25:31.673
> 
> 标签：java, arrays, sum

我有一个代码作业，它在一个总和等于 k ​​的数组中搜索四个数字（在这个例子中，k = 10）。相同的数组元素可以多次使用。换句话说，它将数组的四个元素相加，将和与值 k 进行比较，如果相等则返回 true，否则移动到其他元素。到目前为止，代码将数组的四个不同元素相加，但我需要对其进行更改，以便在四个元素的总和中多次使用任何单个元素时它也可以工作，例如如果 array[2] * 4 == k 或 array[0] * 2 + array[1] * 2 == k，它返回 true。

代码中的“static int[][] esim”是示例输入。例如，{1, 2, 3, 4} 返回 true，因为当 k = 10 时 1 + 2 + 3 + 4 == k。{4, 3, 1, 5, 5, 6, 6} 在 true 时返回 false是预期的，因为代码没有考虑重复的元素，因此忽略了 2 * 4 + 2 * 1 == k。类似地，当期望为 true 时，{2, 3} 返回 false，尽管 2 * 2 + 2 * 3 == k。

任何人都可以给我一个提示如何实现我想要的？

```
import java.util.Arrays;

public class Etsinta2 {

    public static boolean etsi(int[] tl, int k) {
        Arrays.sort(tl);
        for (int i = 0; i < tl.length; i++) {
            int b = i + 1;
            int c = i + 2;
            int d = tl.length - 1;
            while (b < d) {
                if (tl[i] + tl[b] + tl[c] + tl[d] == k) {
                    return true;
                } else if (tl[i] + tl[b] + tl[c] + tl[d] < k) {
                    b++;
                    c++;
                } else {
                    d--;
                }
            }
        }
        return false;
    }

    static int[][] esim = new int[][]{{5},
        {2, 3},
        {1, 1, 1, 1},
        {1, 2, 3, 4},
        {4, 2, 3, 1},
        {4, 6, 5, 5},
        {6, 4, 5, 5},
        {6, 6, 6, 4},
        {4, 4, 1, 1, 1, 6, 6},
        {9, 1, 1, 1, 1, 5, 6},
        {4, 3, 1, 5, 5, 6, 6}};

    public static void main(String[] args) {
        for (int[] taulu : esim) {
            System.out.println(Arrays.toString(taulu) + " 10 : " + etsi(taulu, 10));
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:50:55.157

Are you checking if the total sum of elements is a multiple of k? If so, you could just sum all elements and check if % (mod) k is zero (i.e. no remainder after dividing by k).

**Edit:** Okay I read the question again and I think the question is to find 4 numbers from the array (and duplicating the numbers are okay) to sum to k.

(Sorry I tried to delete this answer but couldn't easily)

So here's a swing at the solution: Have four nested loops, one for each "number slot". Let each loop pick one number at a time from the array (therefore allowing duplicate selections). Check the sum in the inner-most loop. If it's k, break w/ `true`. If not true at the end, `false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:51:36.663

好的，我找到了一个不同的解决方案，它应该将时间复杂度提高到 O(n^2 log n)。这使用了一个辅助列表，该列表存储数组元素对的所有可能的总和，然后将这些总和的对的总和与 k 进行比较。这是我使用 ArrayList 的编辑方法。它工作得很好，只是它仍然太慢：作业是通过机器人测试仪提交的，而隐藏的测试显然是用大量数字进行的测试，时钟为 27.0 毫秒，而所需的最大值为 25.0 毫秒。有什么办法可以通过一些小的改动来加快代码的速度吗？

```
public static boolean etsi(int[] tl, int k) {
    ArrayList<Integer> summat = new ArrayList<Integer>() 
    Arrays.sort(tl);

    for (int i = 0; i < tl.length; i++) {
        for (int j = 0; j < tl.length; j++) {
            summat.add(tl[i] + tl[j]);
        }
    }
    int a = 0;
    int b = summat.size() - 1;

    for (int i = 0; i < summat.size(); i++) {
        if (summat.get(a) + summat.get(b) == k) {
            return true;
        } else if (summat.get(a) + summat.get(b) < k) {
            a++;
        } else {
            b--;
        }
    }

    return false;
 } 
```

# java - 休眠一对多出错，外键错误

> ID：15473337
> 
> 赞同：0
> 
> 时间：2013-03-18T09:25:37.937
> 
> 标签：java, hibernate, db2, sequence

我有两个表，orders 和 order_items。它们之间的关系是一对多的。Order_items.fk_orders 是外键。Orders.ID 是主键。

我先保存订单再保存order_items，但是order_items.fk_orders和orders.ID不同，order_items.fk_orders的值很长（比如'3213148'，但正常值是'425618'），才出现问题有时。

```
Orders.hbm.xml as below:
....
 <id name="id" column="ID" type="java.lang.Long">
            <generator class="native">
            </generator>
 </id>

<set name="orderProduct" lazy="false" cascade="all"
             sort="unsorted">

            <key column="FK_ORDERS"></key>

            <one-to-many
                    class="com.arvato.ecommerce.model.base.OrderItems"/>

</set>
....

OrderItem.hbm.xml as below:
....
 <id name="id" column="ID" type="java.lang.Long">
            <generator class="native">
            </generator>
 </id>
<many-to-one name="orders"
                     class="com.arvato.ecommerce.model.base.Orders" cascade="none"
                     outer-join="auto" update="true" insert="true" lazy="false"
                     column="FK_ORDERS"/>
....

The code as below:
//save order
Orders orders = new Orders();
....
....

orders.setOrderItems(null);//(I think it is strange I don't know why set the null value to OrderItems?)

session = getSession();
session.save(object);
session.flush()

//save order items
....
Collection orderItems = orders.getOrderItems();
if (orderItems != null) {
                OrderItem orderItem;
                for (Iterator itemIterator = orderItems.iterator(); itemIterator.hasNext(); orderdao.insertOrderProduct(orderItem)) {
                    orderItem = (OrderItem) itemIterator.next();
                    orderItem.setOrders(orders);

                }
            }

....

public int insertOrderProduct(OrderItem orderItem)
            throws DaoException {
            Session session =null;
        try {

            session = getSession();
            session.save(orderItem);

            session.flush();

            return 1;
        } catch (Exception e) {
            e.printStackTrace();

            return 0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:44:36.803

您的映射似乎是正确的，这就是您使用它的方式是错误的。既然你使用`cascade="all"`了，所有`OrderItems`列在一个实例中的`Orders`都会在你保存`Orders`实例的时候自动持久化！

下面的代码应该足够了：

```
Orders orders = new Orders();
orders.addItem(new OrderItem());
...

session = getSession();
session.save(object);
session.flush() 
```

addItem 方法如下所示：

```
public void addItem(OrderItem item) {
    if (items == null) {
        items = new ArrayList<OrderItem>();
    }
    item.setOrders(this);
    items.add(item);
} 
```

# javascript - kendo ui网格中组的排序顺序

> ID：15473339
> 
> 赞同：4
> 
> 时间：2013-03-18T09:25:41.847
> 
> 标签：javascript, kendo-ui, kendo-grid

在这里，我编写了基于 id 获取 CategoryName 值的存储过程，值将像印度、美国、巴西一样提供服务，但在 UI 部分中，值会自动按字母顺序排序，显示美国、巴西、印度等组。我想按照印度、美国、巴西格式的顺序显示。我究竟做错了什么？提前致谢。

```
$(document).ready(function () {
var grid = $("#grid").kendoGrid({
    dataSource: {
        type: "GET",
        transport: {
            read: {
                url: "some url placed here",
                dataType: "jsonp"
            }
        },
        pageSize: 20,
        serverSorting: false,
        group: {
            field: "CategoryName",
            aggregates: [{
                field: "abc",
                aggregate: "count"
            }, {
                field: "def",
                aggregate: "sum"
            }, {
                field: "ghi",
                aggregate: "sum"
            }]
        },
        aggregate: [{
            field: "abc",
            aggregate: "count"
        }, {
            field: "def",
            aggregate: "sum"
        }, {
            field: "ghi",
            aggregate: "sum"
        }]
    },
    columns: [
    //column section goes here.....
    ],
    sortable: false
    //...
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-28T20:14:03.620

我记得在 kendo ui 文档中的某处（可能是数据源>组）它说，如果你定义组，分组需要排序的数据。删除所有组并以普通的香草网格显示数据，看看是否有一些自动排序被申请;被应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:39:22.153

这是一个完整的猜测，但是您是否尝试过将 ServerSorting 属性设置为 true？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-01T13:11:41.850

Kendo UI Grid Grouping`ListSortDirection.Ascending`默认为您提供排序。如果你想做其他事情，你必须设置它。如果您正在使用 WebApi 接口并为该`Kendo.mvc.dll`方法生成一个 kendoRequest，`.ToDataSourceResult(kendoRequest);`那么您可以尝试以下操作：

```
var sort = kendoRequest.Sorts.FirstOrDefault();
var group = kendoRequest.Groups.FirstOrDefault(); 
if(sort != null && group != null) {
   if(sort.Member == group.Member && sort.SortDirection == ListSortDirection.Descending) {
      kendoRequest.Groups[0].SortDirection = sort.SortDirection;
   }
} 
```

这样，网格中的排序功能会在匹配时影响按列分组。

# whoosh - whoosh 不会搜索像“C#”这样的短词

> ID：15473342
> 
> 赞同：1
> 
> 时间：2013-03-18T09:25:44.953
> 
> 标签：whoosh

我正在使用 whoosh 索引超过 200,000 本书。但我遇到了一些问题。whoosh 查询解析器为“C#”、“C++”等带有元字符的词以及其他一些短词返回 NullQuery。这个词用在一些文件的标题和正文中，所以我没有为它们使用关键字类型。我想问题出在搜索或索引的分析或查询解析阶段，但我不能盲目地触摸我的数据。谁能帮我纠正这个问题。肿瘤坏死因子。

我通过创建一个符合我要求的正则表达式模式的 StandardAnalyzer 解决了这个问题，这里是正则表达式模式：

'\w+[#+.\w]*'

这将使字段的标记化成功完成，并且搜索也很顺利。但是当我使用诸如“some query++*”或“some##*”之类的查询时，解析的查询将是一个每个查询，只是“*”。我还发现这与我的分析器无关，这是 Whoosh 的默认行为。所以这是我的新问题：这种行为正确还是错误？

注意：从查询解析器中删除 WildcardPlugin 解决了这个问题，但我还需要 WildcardPlugin。

* * *

现在我正在使用以下代码：

```
from whoosh.util import rcompile
#for matching words like: '.NET', 'C++' and 'C#'
word_pattern = rcompile('(\.|[\w]+)(\.?\w+|#|\+\+)*')
#i don't need words shorter that two characters so i don't change the minsize default
analyzer = analysis.StandardAnalyzer(expression=word_pattern) 
```

...现在在我的架构中：

```
...
title = fields.TEXT(analyzer=analyzer),
... 
```

这将解决我的第一个问题，是的。但主要问题在于搜索。我不想让用户使用`Every`查询或`*`. 但是当我解析像我这样的查询时，`C++*`我最终得到了一个`Every(*)`查询。我知道有一些问题，但我无法弄清楚它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:21:48.930

我有同样的问题，发现默认`StandardAnalyzer()`使用`minsize=2`。因此，在您的架构中，您必须以其他方式告诉它。

```
schema = whoosh.fields.Schema(
  name = whoosh.fields.TEXT(stored=True, analyzer=whoosh.analysis.StandardAnalyzer(minsize=1)),
  # ...
) 
```

# api - knockout.js api 搜索表单

> ID：15473348
> 
> 赞同：0
> 
> 时间：2013-03-18T09:26:06.410
> 
> 标签：api, knockout.js

我的代码的目标是搜索 API 搜索字符串：

因此，如果您填写表格，您将获得 hits bij 名称。

我使用了以下 Knockout.js 脚本：

```
var viewModel=
{
    query : ko.observable("wis"),
};

function EmployeesViewModel(query)
{
    var self = this;
    self.employees = ko.observableArray();
    self.query = ko.observable(query);
    self.baseUri = BASE + "/api/v1/search?resource=employees&field=achternaam&q=";

    self.apiurl = ko.computed(function() {
        return self.baseUri + self.query();
    }, self);
    //$.getJSON(baseUri, self.employees);
    //$.getJSON(self.baseUri, self.employees);
    $.getJSON(self.apiurl(), self.employees);
};

$(document).ready(function () {
    ko.applyBindings(new EmployeesViewModel(viewModel.query()));
}); 
```

html绑定是：

```
<input type="text" class="search-query" placeholder="Search" id="global-search" data-bind="value: query, valueUpdate: 'keyup'"/> 
```

但是，如果我填写文本框，我只能得到默认的“wis”员工？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:57:07.597

不完全确定这里出了什么问题，但是您是否对其进行了调试并查看了 apiurl 中查询的值是什么？

一个潜在的问题是您将员工`getJSON`作为可观察对象而不是底层数组传递给，因此您可以尝试：

```
$.getJSON(self.apiurl(), self.employees()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:00:14.837

经过一番挖掘，我找到了解决方案。

```
var employeesModel = function(){

        var self = this;

        self.u = base +'/api/v1/search';
        self.resource = 'employees';
        self.field = 'achternaam';
        self.employees = ko.observableArray([]);
        self.q = ko.observable();

        //Load Json when model is setup
        self.dummyCompute = ko.computed(function() {
            $.getJSON(self.u,{'resource': self.resource, 'field': self.field, 'q':self.q }, function(data) {
                    self.employees(data);
             });

        }, self);
    };

    ko.applyBindings(new employeesModel()); 
```

# ios - 使用 OTA 的企业应用程序分发在 safari 中给出错误消息？

> ID：15473352
> 
> 赞同：2
> 
> 时间：2013-03-18T09:26:22.573
> 
> 标签：ios, distribution, enterprise, ota

我们使用 OTA 分发我们的企业应用程序。当我们第一次在 iPhone 浏览器中打开“应用程序下载 URL”时，它会显示“您要安装应用程序”警报。

![在此处输入图像描述](../Images/e3645aa62befdf4d94158bc878e42f1b.png)

如果用户点击取消按钮并在同一选项卡中再次重新打开“应用程序下载 URL”。它显示“在“App Store”中打开此页面？” 警报，当用户点击打开按钮时，它会显示“你想安装应用程序”。

![在此处输入图像描述](../Images/0b9b1deda5924ee0eef9708deb08ec92.png)

有人可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:31:52.027

您需要有一个带有 plist 文件链接的登录页面：

> itms-services://?action=download-manifest&url=YOUR_LINK_TO_PLIST

# java - 哈希码值相同

> ID：15473353
> 
> 赞同：0
> 
> 时间：2013-03-18T09:26:23.227
> 
> 标签：java

为什么哈希码值相同？

```
public static void main(String args[])
{
    String s1="abc";
    String s2=new String("abc");
    System.out.println("Hashcode s1-:"+ s1.hashCode());
    System.out.println("Hashcode s2-:"+ s2.hashCode());
    if(s1==s2){
        System.out.println("==true:");
    } 
} 
```

输出

```
Hashcode s1-:96354
Hashcode s2-:96354 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T09:28:04.950

两个相等对象的哈希码应该相等。

在这种情况下，对象是字符串，它们被认为是相等的，因为它们包含相同的字符序列“abc”。

如果您想要一个基于对象标识而不是相等的哈希码，请使用[`System.identityHashCode()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#identityHashCode%28java.lang.Object%29).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T09:28:49.380

为什么他们不一样？是根据字符串的`hashcode`内容计算的，因此它们对于两者都是相同的。

`==`比较对象引用，并且因为你用于`new String`引用`s2`的引用不一样。

您应该使用该`equals`方法根据字符串的值来测试字符串的相等性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T09:28:59.463

因为**哈希码**是使用仅包含字符串中存在的字符的公式计算的。a 中的相同字符`String`将产生相同的**哈希码**。

[计算公式的Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#hashCode%28%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T09:28:08.853

`String`这是因为在 java 中是如何计算 hashcode 的。

检查javadoc：[http ://docs.oracle.com/javase/6/docs/api/java/lang/String.html](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)

而且，您的两个字符串相等，因此它们的哈希码必须相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T09:28:52.117

这是代码......因此两个equals对象的结果是相同的：

```
public int hashCode() {
int h = hash;
    int len = count;
if (h == 0 && len > 0) {
    int off = offset;
    char val[] = value;

        for (int i = 0; i < len; i++) {
            h = 31*h + val[off++];
        }
        hash = h;
    }
    return h;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T09:29:10.977

根据规则，那些 equals 方法返回 true 的对象应该具有相同的哈希码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T09:31:58.233

`String`类在其中实现了自己的`hashcode`方法。它的方法将计算哈希码为：`s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1]`

所以对于相同的字符序列哈希码将是相同的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-18T09:29:42.660

字符串的哈希码是根据其字符计算的，因此是`equals()`

它计算为

```
s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1] 
```

其中 s[i] 是每个字符`0<=i<n`，n 是它的长度。

您的两个字符串都具有相同的内容，因此哈希码是相同的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-18T10:10:46.227

如果它已经存在，JVM 不会创建新的 String，它只是返回引用。当您尝试更改其中一个变量中的实际字符串时，将创建一个新字符串。您可以在调试应用程序时检查它，String 对象将具有不同的内存地址，但内部的值将具有完全相同的内存地址。

# php - PHP_PDO 浮点到字符串的转换不同于 SQLSRV 本身

> ID：15473357
> 
> 赞同：2
> 
> 时间：2013-03-18T09:26:47.597
> 
> 标签：php, sql-server, pdo

谷歌搜索后，我发现 PDO_SQLSRV 返回字符串值，根据 PDO 的 php 规范

但是，**当 sql 查询将值转换为 varchar 时，为什么 PDO 返回的值与 sql 不同？**

PHP：

```
myDbWrapperFunction("SELECT CAST(CAST(0.03 as varchar(250))as FLOAT)"); // 2.9999999999999999E-2
myDbWrapperFunction("SELECT 0.03"); // .03
myDbWrapperFunction("SELECT CAST(0.03 as varchar(250))"); // 0.03 
```

然而，在 SQL 本身中：

```
select cast(cast(0.03 as varchar(250))as float) //0.03
select cast(0.03 as varchar(250)) //0.03
select 0.03 //0.03 
```

我希望

```
myDbWrapperFunction("SELECT CAST(CAST(0.03 as varchar(250))as FLOAT)"); // 2.9999999999999999E-2 
```

返回相同的值

```
select cast(0.03 as varchar(250)) //0.03 
```

sql 是否使用浮点值作弊？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T15:51:45.067

对于 SQL Server，您需要使用 STR 而不是 CAST 转换为 VARCHAR：

选择 STR(MyField,10,2)

资料来源：http: [//jwcooney.com/2013/09/25/sql-server-rounds-floats-when-casting-to-varchar/](http://jwcooney.com/2013/09/25/sql-server-rounds-floats-when-casting-to-varchar/)

# java - 如何将方法传递给 List 而不是列表 ?

> ID：15473359
> 
> 赞同：4
> 
> 时间：2013-03-18T09:27:00.390
> 
> 标签：java, oop, collections, interface

我有一些实现通用接口的对象。假设我`Apple`和其他一些`Fruits`实施`HasSeed`并返回他们的种子数量的人。

然后我有一个服务方法，在这里调用它`FruitProcessor`，带有一个`addAll(List<HasSeed>)`类。我想我可以传入一个实现`HasSeed`接口的对象列表，比如一个苹果列表。

但我不能，编译器抱怨它不适用于参数。还有一件事：我无法`List<Apple>`将`List<HasSeed>`. 但是我需要一个可以在我的 FruitProcessor 中获取任何对象列表的方法，然后`getSeeds()`无论它是什么对象都可以调用。

我该如何适应以下内容？

```
class Fruit {};
class Apple extends Fruit implements HasSeed {
   @Override
   int getSeeds() {
       return 5; //just an example
   }
}

class FruitProcessor {
    static void addAll(List<HasSeed> list) {
        for (HasSeed seed : list) {
            Sysout("the fruit added contained seeds: " + list.getSeeds());
        }
    }
}

class FruitStore {
    List<Apple> apples;
    FruitProcessor.addAll(apples); //The method addAll(List<HasSeed>) in the type FruitProcessor is not applicable for the arguments (List<Apple>)
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T09:29:41.983

你必须使用`List<? extends HasSeed>`

背后的原因是它`List<Apple>`不扩展`List<HasSeed>`。当您`List<? extends HasSeed>`在签名中写入时，这意味着您接受任何实现该`HasSeed`接口的元素列表。这就是为什么你可以`List<Apple>`通过`List<? extends HasSeed>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:30:51.343

使用`static void addAll(List<? extends HasSeed> list)`，因为您将列表声明为 a`List<Apple>`而不是`List<HasSeed>`。

# javascript - 在回调中为对象的属性/变量赋值

> ID：15473361
> 
> 赞同：0
> 
> 时间：2013-03-18T09:27:06.617
> 
> 标签：javascript

```
var obj1={
    var1:"val1",
    init:function(){
        this.var1="val2";
        var self=this;
        setTimeout(function(){self.var1="val3"},1);
        setTimeout(function(){obj1.var1="val3"},1);
    }
}

obj1.init();
console.log(obj1.var1);
console.log(obj1); 
```

如何在 setTimeout 回调中为 var1 设置/分配一个值。分配 val3 没有任何效果，如屏幕截图所示，我们现在有两个属性称为 var1。1 是 var1=val2 和 other 是 var1=val3 ，但是 this.var1 总是返回 val2 而不是 val3

![在此处输入图像描述](../Images/174c4d10d86218650f51d4fe8858b7eb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:42:58.997

实际上，该值在您的代码中设置为“var3”。但是在您的演示中，控制台打印“var2”是因为该`console.log()`触发比该 setTimeout() 更早。打印出来后变量会发生变化。

检查[这个 jfFiddle](http://jsfiddle.net/b6HZE/1/)以获得正确的结果。

# sql-server-2008 - 在选择中计算日期范围

> ID：15473363
> 
> 赞同：1
> 
> 时间：2013-03-18T09:27:09.250
> 
> 标签：sql-server-2008

我正在设计一个网站来接受我网站的广告。我的网站将获得有效广告列表（经过验证且有信用的广告）并显示它们。我的广告表有这些验证广告的字段：

*   TotalDaysToShow int '广告展示的总天数
*   开始日期日期时间
*   验证位
*   LastShowed 日期时间

例如，我想展示 4 个广告 - 使用类似于以下的查询：

```
SELECT TOP 4 ImageId,
             Url
FROM   ads
WHERE  verified = 1 AND .......... 
ORDER  BY LastShowed ASC 
```

这里的问题是，如果 TotalDaysToShow 对于所有广告都相同，我可以简单地使用：

`declare @d= dateadd(day, @TotalDaysToShow, starttime)`然后像这样使用它：

```
SELECT TOP 4 ImageId,
             Url
FROM   ads
WHERE  verified = 1
       AND @d > Getdate()
ORDER  BY LastShowed ASC 
```

是否可以为每个人计算它？

```
SELECT TOP 4 ImageId,
             Url
FROM   ads
WHERE  verified = 1
       AND Dateadd(day, TotalDaysToShow, startdate) > Getdate()
ORDER  BY LastShowed ASC 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:59:24.870

是的，但我相信你会发现这个 SQL 子句更有效率

```
AND startdate BETWEEN Dateadd(day, -TotalDaysToShow, getdate()) AND getdate() 
```

因为它将表字段与两个常量进行比较。

# ruby-on-rails - 设计和简单的私人消息实现

> ID：15473364
> 
> 赞同：0
> 
> 时间：2013-03-18T09:27:10.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, messaging, messagebox, inbox

我想构建一个用户收件箱系统并选择这个简单的私人消息 gem 作为主干。然而，这个 gem 的文档相当原始。我已经生成了这个 gem 的脚手架，但是，我不知道 gem 用于定义接收者/发送者的键。

我希望 current_user 能够通过其个人资料页面的链接向特定用户发送消息，然后它会自动将用户名填充到“to”字段中。

任何人都可以构建一个演示应用程序来说明这个gem的实现，非常感谢。

请指教。

# javascript - 在 Javascript 中实现多重继承

> ID：15473369
> 
> 赞同：3
> 
> 时间：2013-03-18T09:27:26.350
> 
> 标签：javascript, prototype, prototypal-inheritance

我观察到通过在 Javascript 中使用“原型”属性（并间接建立原型链），可以在 JavaScript 中实现多级继承。但是是否可以通过某种方式在 Javascript 中实现多重继承？任何简单的例子都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T09:31:16.190

要实现简单的继承，您通常会这样做

```
MyClass.prototype = new MySuperClass(); 
```

但您也可以复制另一个“类”的内容：

```
MyClass.prototype = new MySuperClass();
var myOtherSuperClass = new MyOtherSuperClass();
for (var key in myOtherSuperClass) {
     MyClass.prototype[key] = myOtherSuperClass[key];
} 
```

当然，您可以使用像[jQuery.extend](http://api.jquery.com/jQuery.extend/)这样的实用程序来做到这一点，或者自己动手做。

一个限制是`instanceof`不会检测到`MyOtherSuperClass`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T21:23:48.417

需要明确的是，JS 没有多重继承。

每个对象只能有一个原型。

然而，由于一切都是可变的，它可以支持“混合”，这就是扩展方法的全部内容。他们只是将一个对象的键复制到另一个对象。不过，这实际上不是继承。通常，在该方案中，生成的对象将只有一个**proto**，即 Object.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-13T12:54:18.760

在 JavaScript 中实现多重继承是可能的，尽管很少有库能做到。我知道的唯一例子是[Ring.js](http://ringjs.neoname.eu)。

当然它不仅仅依赖于原型，所以`instanceof`不起作用。但是图书馆提供了一个替代品，所以这没什么大不了的。

# python - Numpy 内存映射数组分配的内存问题

> ID：15473377
> 
> 赞同：4
> 
> 时间：2013-03-18T09:27:47.223
> 
> 标签：python, memory, numpy

在以下代码中：

```
@profile
def do():

    import random
    import numpy as np

    image = np.memmap('image.np', mode='w+', dtype=np.float32, shape=(10000, 10000))

    print("Before assignment")

    x = random.uniform(1000, 9000)
    y = random.uniform(1000, 9000)
    imin = int(x) - 128
    imax = int(x) + 128
    jmin = int(y) - 128
    jmax = int(y) + 128
    data = np.random.random((256,256))
    image[imin:imax, jmin:jmax] = image[imin:imax, jmin:jmax] + data

    del x, y, imin, imax, jmin, jmax, data

    print("After assignment")

do() 
```

与第一个打印语句末尾相比，第二个打印语句使用的内存增加了 - 这是 memory_profiler 输出：

```
Line #    Mem usage    Increment   Line Contents
================================================
     1                             @profile
     2                             def do():
     3    10.207 MB     0.000 MB   
     4    10.734 MB     0.527 MB       import random
     5    21.066 MB    10.332 MB       import numpy as np
     6                             
     7    21.105 MB     0.039 MB       image = np.memmap('image.np', mode='w+', dtype=np.float32, shape=(10000, 10000))
     8                             
     9    21.109 MB     0.004 MB       print("Before assignment")
    10                             
    11    21.109 MB     0.000 MB       x = random.uniform(1000, 9000)
    12    21.109 MB     0.000 MB       y = random.uniform(1000, 9000)
    13    21.109 MB     0.000 MB       imin = int(x) - 128
    14    21.109 MB     0.000 MB       imax = int(x) + 128
    15    21.113 MB     0.004 MB       jmin = int(y) - 128
    16    21.113 MB     0.000 MB       jmax = int(y) + 128
    17    21.625 MB     0.512 MB       data = np.random.random((256,256))
    18    23.574 MB     1.949 MB       image[imin:imax, jmin:jmax] = image[imin:imax, jmin:jmax] + data
    19                             
    20    23.574 MB     0.000 MB       del x, y, imin, imax, jmin, jmax, data
    21                             
    22    23.574 MB     0.000 MB       print("After assigment") 
```

RAM 从 21.109Mb 增加到 23.574Mb。如果我将该代码块放入循环中，这会导致问题：

```
Line #    Mem usage    Increment   Line Contents
================================================
     1                             @profile
     2                             def do():
     3    10.207 MB     0.000 MB   
     4    10.734 MB     0.527 MB       import random
     5    21.066 MB    10.332 MB       import numpy as np
     6                             
     7    21.105 MB     0.039 MB       image = np.memmap('image.np', mode='w+', dtype=np.float32, shape=(10000, 10000))
     8                             
     9    21.109 MB     0.004 MB       print("Before assignment")
    10                             
    11   292.879 MB   271.770 MB       for i in range(1000):
    12                             
    13   292.879 MB     0.000 MB           x = random.uniform(1000, 9000)
    14   292.879 MB     0.000 MB           y = random.uniform(1000, 9000)
    15   292.879 MB     0.000 MB           imin = int(x) - 128
    16   292.879 MB     0.000 MB           imax = int(x) + 128
    17   292.879 MB     0.000 MB           jmin = int(y) - 128
    18   292.879 MB     0.000 MB           jmax = int(y) + 128
    19   292.879 MB     0.000 MB           data = np.random.random((256,256))
    20   292.879 MB     0.000 MB           image[imin:imax, jmin:jmax] = image[imin:imax, jmin:jmax] + data
    21                             
    22   292.879 MB     0.000 MB           del x, y, imin, imax, jmin, jmax, data
    23                             
    24   292.879 MB     0.000 MB       print("After assignment") 
```

并且每次迭代使用的 RAM 都会增加。有没有办法避免这个问题？这是一个 Numpy 错误还是我做错了什么？

编辑：这是在 MacOS X 上，我看到 Python 2.7 和 3.2 以及 Numpy 1.6.2 及更高版本（包括开发版本）的问题。

编辑 2：我也在 Linux 上看到了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:46:28.340

我的猜测是 numpy 首先将数据写入缓冲区，然后才写入文件。可能是出于性能原因。

我做了一些测试，在你的分配行之后，文件`image.np`没有改变。该文件仅在我删除对象`image`或执行`image.flush()`. 如果内存是最重要的，你可以尝试`image.flush()`在你的循环中加入一个，看看它是否能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:03:43.823

出于优化原因，在调用`np.memmap`析构函数 for 之前可能不会写入数据。您可以通过以写时复制`image`方式打开来避免这种情况：`image`

```
image = np.memmap('image.np', mode='c', dtype=np.float32, shape=(10000, 10000)) 
```

或者您可以调用`del image`然后在每个循环中重新打开一次 - 但这听起来不是一个好主意。

# java - 从java中的对象数组中检索分配给特定类成员的值数组

> ID：15473383
> 
> 赞同：1
> 
> 时间：2013-03-18T09:28:08.610
> 
> 标签：java, arrays, class, object, member

假设我有一个复杂数据类型对象的数组。例如：`FullName[100]`。每个`FullName`对象都有 2 个类成员变量：`String FirstName`和`String LastName`. 现在，从这个`FullName`对象数组中，我想检索一个`String FirstNames[]`.

如果没有广泛的 for 循环应用程序，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:32:36.547

您可以尝试查看[Java 中的函数式编程](https://stackoverflow.com/questions/1267297/functional-programming-in-java)并应用`map`其中一个库中的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:38:17.650

我不确定为什么避免循环如此重要，但您可以这样做：您可以将名称存储在字符串数组中，并为您的 FullName 类使用享元模式。因此，您的 FullName 实例包含对这些数组的引用，以及指向数组中正确元素的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-28T20:44:16.583

在 Java 8 中，您可以执行以下操作：

```
public class Test {
    class FullName {
        private String firstName;
        String getFirstName(){return firstName;}
    }

    void main(String... argv) {
        FullName names[] = {new FullName()};
        String[] firstNames = Arrays.stream(names).map(FullName::getFirstName).toArray(String[]::new);
    }
} 
```

# web-services - 用于生成 WSDL 文件的 TeamCity 构建步骤

> ID：15473388
> 
> 赞同：0
> 
> 时间：2013-03-18T09:28:23.330
> 
> 标签：web-services, wsdl, continuous-integration, teamcity

对于一个项目，我们需要将 wsdl 文件发布到 artifacts 文件夹中。

对于持续集成，我们使用 TeamCity。项目类型是 Windows 通信服务项目。

是否有可能有一个从 web 服务项目生成 wsdl 文件的构建步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:06:03.930

是的，你可以从项目中做到这一点。使用可以为您执行命令行的 nant 脚本或类似脚本。让脚本针对您的项目执行该工具，例如，您可以使用 CmdHelper。[http://www.stephan-brenner.com/?page_id=82](http://www.stephan-brenner.com/?page_id=82)

# javascript - 使用 Javascript 更改 td 元素文本

> ID：15473391
> 
> 赞同：7
> 
> 时间：2013-03-18T09:28:33.490
> 
> 标签：javascript, html, html-table

我正在为 html 文件编写代码，该文件将显示 36000 个掷骰子的每个骰子总和的数量。我编写了代码，一切似乎都很好，我打印了每个总和的数字并得到了数字，但是当我尝试将它们放在 td 元素中时，我在表中什么也看不到。我在 stackoverflow 和谷歌上搜索，都说了同样的话，但它不起作用。这是我的代码：

```
<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
        <script type="text/javascript">
            <!--

            /*

                Position #0 : Sum of Dices = 2
                Position #1 : Sum of Dices = 3
                Position #2 : Sum of Dices = 4
                Position #3 : Sum of Dices = 5
                Position #4 : Sum of Dices = 6
                Position #5 : Sum of Dices = 7
                Position #6 : Sum of Dices = 8
                Position #7 : Sum of Dices = 9
                Position #8 : Sum of Dices = 10
                Position #9 : Sum of Dices = 11
                Position #10: Sum of Dices = 12

            */
            var sums = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];

            for (var i = 0; i < 36000; i++) {
                var dice1 = Math.floor(Math.random() * 6) + 1;
                var dice2 = Math.floor(Math.random() * 6) + 1;
                var sum = dice1 + dice2;

                switch(sum) {
                    case 2:
                        sums[0]++;
                        break;
                    case 3:
                        sums[1]++;
                        break;
                    case 4:
                        sums[2]++;
                        break;
                    case 5:
                        sums[3]++;
                        break;
                    case 6:
                        sums[4]++;
                        break;
                    case 7:
                        sums[5]++;
                        break;
                    case 8:
                        sums[6]++;
                        break;
                    case 9:
                        sums[7]++;
                        break;
                    case 10:
                        sums[8]++;
                        break;
                    case 11:
                        sums[9]++;
                        break;
                    case 12:
                        sums[10]++;
                        break;
                    default:
                        break;
                }
            }

            document.getElementById("sum2").innerHTML = sums[0];
            document.getElementById("sum3").innerHTML = sums[1];
            document.getElementById("sum4").innerHTML = sums[2];
            document.getElementById("sum5").innerHTML = sums[3];
            document.getElementById("sum6").innerHTML = sums[4];
            document.getElementById("sum7").innerHTML = sums[5];
            document.getElementById("sum8").innerHTML = sums[6];
            document.getElementById("sum9").innerHTML = sums[7];
            document.getElementById("sum10").innerHTML = sums[8];
            document.getElementById("sum11").innerHTML = sums[9];
            document.getElementById("sum12").innerHTML = sums[10];

            // -->
        </script>
    </head>

    <body>

        <h1>Roll Dice 36,000 Times</h1>

        <table border="1">
            <th>Sum of Dice</th>
            <th>Total Times Rolled</th>

            <tr>
                <td>2</td>
                <td id="sum2"></td>
            </tr>
            <tr>
                <td>3</td>
                <td id="sum3"></td>
            </tr>
            <tr>
                <td>4</td>
                <td id="sum4"></td>
            </tr>
            <tr>
                <td>5</td>
                <td id="sum5"></td>
            </tr>
            <tr>
                <td>6</td>
                <td id="sum6"></td>
            </tr>
            <tr>
                <td>7</td>
                <td id="sum7"></td>
            </tr>
            <tr>
                <td>8</td>
                <td id="sum8"></td>
            </tr>
            <tr>
                <td>9</td>
                <td id="sum9"></td>
            </tr>
            <tr>
                <td>10</td>
                <td id="sum10"></td>
            </tr>
            <tr>
                <td>11</td>
                <td id="sum11"></td>
            </tr>
            <tr>
                <td>12</td>
                <td id="sum12"></td>
            </tr>
        </table>
    </body>
</html> 
```

有人说要使用 innerText 和 textContent，但似乎都不起作用。为什么它不起作用？

我不知道这是否有帮助，但我在 Mac OS X 上使用 Google Chrome

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-18T09:33:56.240

使用 windows.onload 函数确保 html 已加载：

```
window.onload=function(){

        document.getElementById("sum2").innerHTML = sums[0];
        document.getElementById("sum3").innerHTML = sums[1];
        document.getElementById("sum4").innerHTML = sums[2];
        document.getElementById("sum5").innerHTML = sums[3];
        document.getElementById("sum6").innerHTML = sums[4];
        document.getElementById("sum7").innerHTML = sums[5];
        document.getElementById("sum8").innerHTML = sums[6];
        document.getElementById("sum9").innerHTML = sums[7];
        document.getElementById("sum10").innerHTML = sums[8];
        document.getElementById("sum11").innerHTML = sums[9];
        document.getElementById("sum12").innerHTML = sums[10];
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T09:34:14.053

你的 JS 在 DOM 准备好之前运行。把你的脚本放进`window.onload`去再试一次，

```
 <script type="text/javascript">
    <!--
       window.onload = function(){

                /*

                    Position #0 : Sum of Dices = 2
                    Position #1 : Sum of Dices = 3
                    Position #2 : Sum of Dices = 4
                    Position #3 : Sum of Dices = 5
                    Position #4 : Sum of Dices = 6
                    Position #5 : Sum of Dices = 7
                    Position #6 : Sum of Dices = 8
                    Position #7 : Sum of Dices = 9
                    Position #8 : Sum of Dices = 10
                    Position #9 : Sum of Dices = 11
                    Position #10: Sum of Dices = 12

                */
                var sums = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];

                for (var i = 0; i < 36000; i++) {
                    var dice1 = Math.floor(Math.random() * 6) + 1;
                    var dice2 = Math.floor(Math.random() * 6) + 1;
                    var sum = dice1 + dice2;

                    switch(sum) {
                        case 2:
                            sums[0]++;
                            break;
                        case 3:
                            sums[1]++;
                            break;
                        case 4:
                            sums[2]++;
                            break;
                        case 5:
                            sums[3]++;
                            break;
                        case 6:
                            sums[4]++;
                            break;
                        case 7:
                            sums[5]++;
                            break;
                        case 8:
                            sums[6]++;
                            break;
                        case 9:
                            sums[7]++;
                            break;
                        case 10:
                            sums[8]++;
                            break;
                        case 11:
                            sums[9]++;
                            break;
                        case 12:
                            sums[10]++;
                            break;
                        default:
                            break;
                    }
                }

                document.getElementById("sum2").innerHTML = sums[0];
                document.getElementById("sum3").innerHTML = sums[1];
                document.getElementById("sum4").innerHTML = sums[2];
                document.getElementById("sum5").innerHTML = sums[3];
                document.getElementById("sum6").innerHTML = sums[4];
                document.getElementById("sum7").innerHTML = sums[5];
                document.getElementById("sum8").innerHTML = sums[6];
                document.getElementById("sum9").innerHTML = sums[7];
                document.getElementById("sum10").innerHTML = sums[8];
                document.getElementById("sum11").innerHTML = sums[9];
                document.getElementById("sum12").innerHTML = sums[10];

      }
   // -->
   </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T09:37:27.067

试试这个：

```
$(function(){
    var sums = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];

            for (var i = 0; i < 36000; i++) {
                var dice1 = Math.floor(Math.random() * 6) + 1;
                var dice2 = Math.floor(Math.random() * 6) + 1;
                var sum = dice1 + dice2;

                switch(sum) {
                    case 2:
                        sums[0]++;
                        break;
                    case 3:
                        sums[1]++;
                        break;
                    case 4:
                        sums[2]++;
                        break;
                    case 5:
                        sums[3]++;
                        break;
                    case 6:
                        sums[4]++;
                        break;
                    case 7:
                        sums[5]++;
                        break;
                    case 8:
                        sums[6]++;
                        break;
                    case 9:
                        sums[7]++;
                        break;
                    case 10:
                        sums[8]++;
                        break;
                    case 11:
                        sums[9]++;
                        break;
                    case 12:
                        sums[10]++;
                        break;
                    default:
                        break;
                }
            }

            document.getElementById("sum2").innerHTML = sums[0];
            document.getElementById("sum3").innerHTML = sums[1];
            document.getElementById("sum4").innerHTML = sums[2];
            document.getElementById("sum5").innerHTML = sums[3];
            document.getElementById("sum6").innerHTML = sums[4];
            document.getElementById("sum7").innerHTML = sums[5];
            document.getElementById("sum8").innerHTML = sums[6];
            document.getElementById("sum9").innerHTML = sums[7];
            document.getElementById("sum10").innerHTML = sums[8];
            document.getElementById("sum11").innerHTML = sums[9];
            document.getElementById("sum12").innerHTML = sums[10];
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T09:36:04.173

尝试类似的东西

```
for(var i = 0; i <sums.length; i++){
    document.getElementById("sum" + (i + 2)).innerHTML = sums[i];
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/QkyNC/1/)

# c# - Ninject.Extensions.Interception 拦截参数构造函数

> ID：15473392
> 
> 赞同：3
> 
> 时间：2013-03-18T09:28:41.693
> 
> 标签：c#, constructor, ninject

绑定：

```
IKernel kernel = new StandardKernel();
kernel.Bind<ILog>().ToMethod(context => LogManager.GetLogger(context.Request.Target.Type));
kernel.Bind<TSyncService>().ToSelf().Intercept().With<TimingInterceptor>();
ISyncService syncService = kernel.Get<TSyncService>(); 
```

消耗：

```
public class TSyncService:ISyncService
{
    ILog log;
    public TSyncService(ILog log)
    {
        this.log = log;
    } 
```

问题：

**Ninject**无法**注入**动态代理**构造函数** `'TSyncService(ILog log)'`

# c++ - 多维稀疏矩阵压缩

> ID：15473402
> 
> 赞同：5
> 
> 时间：2013-03-18T09:29:15.280
> 
> 标签：c++, c, indexing

任何人都可以建议一个好的 C++ 库来存储多维稀疏矩阵，该矩阵专注于矩阵中数据的压缩。矩阵的维数会很大（比如 80 维）。任何帮助都是最受欢迎的:)。

编辑：
矩阵高度稀疏，大约为 0.0000001 （或） 1x10 ^(-6)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:16:20.503

在 c# 中，我使用键值对或“字典”来存储稀疏填充的数组。我认为对于 80 个维度，您必须构建一个基于字符串的键。使用一个函数来创建它应该保持一致的键。只需连接一个逗号分隔的维度列表。不幸的是，我不知道一个好的密钥对，用于 c++ 的字典库。如果您以前使用过它，可能是 STL，但我不推荐它。

# svn - SVN 为工作副本重新定位存储库

> ID：15473406
> 
> 赞同：0
> 
> 时间：2013-03-18T09:29:19.010
> 
> 标签：svn, svn-repository, svn-switch

这是工作副本的**svn 信息**。

```
URL: svn://192.168.1.10/svn/MyRepos
Repository Root: svn://192.168.1.10 
```

这就是我所期望的

```
URL: svn://192.168.1.10/MyRepos
Repository Root: svn://192.168.1.10/MyRepos 
```

我该怎么办？提前致谢。^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:35:02.257

如果您使用 Tortoise SVN 1.7+，您可以右键单击该文件夹，然后按“切换”。在那里，您可以选择源的新路径。还要确保您拥有浏览该路径的所有权限。

# objective-c - `NSJSONSerialization`没有可见的@interface ...使用iOS> = 5.0？

> ID：15473412
> 
> 赞同：0
> 
> 时间：2013-03-18T09:29:31.763
> 
> 标签：objective-c, xcode

我正在尝试使用 NSJSONSerialization。

基础 SDK 是“最新的 iOS (iOS 6.1)”。

部署目标设置为 6.1。

我`#import <Foundation/NSJSONSerialization.h>`在课堂上使用它。

但我仍然得到一个`No visible @interface for 'NSJSONSerialization' declares the selector 'dataWithJSONObject:options:error:'`.

我错过了什么？

这是代码：

```
NSMutableArray* arr = [[NSMutableArray alloc] init];
NSError* error;
NSJSONSerialization* ser = [[NSJSONSerialization* alloc] init];

[ser dataWithJSONObject:arr options:nil error:error]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:47:13.123

`dataWithJSONObject`是类方法，而不是实例方法，所以你要做的就是调用`[NSJSONSerialization dataWithJSONObject:arr options:nil error:error];`

检查文档：[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

# php - 应用内计费检查程序

> ID：15473414
> 
> 赞同：0
> 
> 时间：2013-03-18T09:29:40.460
> 
> 标签：php, android, sql, openssl, in-app-purchase

我有一个关于应用内计费和检查策略的一般性问题：

我有几个应用程序，我想为它们提供完整功能的试用期（14 天），然后收取使用费。我想按照[http://developer.android.com/guide/market/billing/billing_best_practices.html](http://developer.android.com/guide/market/billing/billing_best_practices.html)并检查我自己的 SQL 服务器上的签名。有很好的例子，看[Android应用内购买服务器签名验证使用php OpenSSL](https://stackoverflow.com/questions/5645418/android-in-app-purchase-server-signature-verification-using-php-openssl?rq=1)

我的想法如下，（如果不可能，请纠正我）：

1.  启动应用程序并联系谷歌服务器以获取用户 ID（从谷歌播放安装应用程序的帐户
2.  使用该 ID 联系我的 SQL 服务器（发送 ID 和应用程序名称），如果不存在，则创建带有日期的条目以检查试用期，并获取公钥、试用期等
3.  使用公钥联系谷歌服务器并检查该用户的应用内购买状态
4.  根据谷歌答案更新应用程序（功能齐全，试用期有效/过期）

这是一个好方法吗？

有没有一些很好的例子可以做到这一点？我查了一下论坛，有方法，但不是那个。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:38:27.817

我不太确定是否可以在应用内购买，但你可以做一件事，假设你有一个可供购买的物品，创建一个计时器或某种计数器，并检查你指定的试用期，如果（ inTrialPeriod){ 不显示任何购买选项，只需从您的应用程序中以不同的项目 ID 免费提供它们) 否则（显示来自 google play 的项目购买选项）。

# silverlight - 错误添加库 TomShane.Neoforce.Controls.dll

> ID：15473419
> 
> 赞同：1
> 
> 时间：2013-03-18T09:29:50.857
> 
> 标签：silverlight, dll, xna

我的项目使用 library `TomShane.Neoforce.Controls.dll`。它给了我以下错误消息：

> 错误 6 找不到类型或命名空间名称“TomShane”（您是否缺少 using 指令或程序集引用？）

![在此处输入图像描述](../Images/ba19048ad477b425ee0f51049696e95f.png) ![在此处输入图像描述](../Images/e70d0118e3201cc79acb89208c8107b0.png)

# c - GDB不断崩溃

> ID：15473427
> 
> 赞同：1
> 
> 时间：2013-03-18T09:30:01.270
> 
> 标签：c, gdb

我的程序正在经历一个无限循环，我试图找出原因。（这不是我要问的）。我通常会去 GDB 找出问题所在，但实际上在我的程序开始时，它总是因这条消息而崩溃。

__strcmp_ia32 () 在 ../sysdeps/i386/i686/multiarch/../strcmp.S:34

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

//Prototypes and linked lists here

int debugMode(int argc, char** argv)
{
    if(strcmp(argv[argc-1], "-d") == 0) // GDB stops right here.
       return 1;

    else
        return 0;
}

int main(int argc, char** argv)
{
    int debug, integer;
    char choice;
    node *head = NULL;
    node *current;

    debug = debugMode(argc, argv);
    // stuff here
} 
```

请记住，我确实有一个函数原型。谢谢你的帮助。

编辑：顺便说一句，我没有发送任何论据。我正在使用重定向来找出导致我的程序执行无限循环的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:15:17.503

> 不断与此消息崩溃。

```
__strcmp_ia32 () at ../sysdeps/i386/i686/multiarch/../strcmp.S:34 
```

您的 glibc 版本有这个（最近修复的）错误： http: [//sourceware.org/bugzilla/show_bug.cgi ?id=13786](http://sourceware.org/bugzilla/show_bug.cgi?id=13786)

（注意：sourceware.org 本周因硬件升级而关闭，如果您得到“无路可走”，请稍后再试。）

# django - 在 Django 的 RSS 提要中添加 Favicon

> ID：15473435
> 
> 赞同：0
> 
> 时间：2013-03-18T09:30:14.783
> 
> 标签：django, rss

我在 django 中使用过 RSS Feed，

我参考了以下链接 [https://docs.djangoproject.com/en/dev/ref/contrib/syndication/](https://docs.djangoproject.com/en/dev/ref/contrib/syndication/)

并正确创建了 RSS，但现在我想为 RSS 提要页面添加 favicon。

有人可以建议我吗？

谢谢。

我的代码是：

**在提要/feed.py**

```
class LatestArticlesFeed(Feed):

    title='News -RSS'
    link='/' # URI of site
    description='Latest Article Entries'

    def get_object(self, request):
        category_slug = request.GET.get('category_slug')
        category = Category.objects.get(slug = category_slug)

    def items(self, obj):
        article_list = Article.objects.filter(category =obj)[:10]
        return article_list

    def item_title (self, item):
        return item.headline 
```

在 urls.py

```
(r'^feeds/article/$', LatestArticlesFeed()), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:35:35.817

将此添加到您的 urls.py 文件中：

```
(r'^favicon\.ico$', 
 'django.views.generic.simple.redirect_to', 
 {'url': '/media/favicon.ico'}), 
```

如果您正在谈论 WebFaction Django 安装，您应该能够编辑应用程序目录中 apache2 目录中的 .conf 文件并添加*Redirect /favicon.ico [http://example.com/static/favicon.ico](http://example.com/static/favicon.ico)*

请注意，您还可以在 HTML 中指定网站图标：

```
<link rel="shortcut icon" href="http://example.com/myicon.ico" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T14:05:29.427

从 Django 1.5 开始，像 Plymorphin 的答案这样的简单视图不再存在。下面介绍了执行此操作的现代方法。

假设您的网站图标与其他静态文件位于：**your_app/static/favicon.ico**，您可以将其添加到主 urls.py：

```
from django.contrib.staticfiles.templatetags import staticfiles
from django.views.generic import base

...

urlpatterns += patterns(
    '',
    url('^favicon\.ico$',
        base.RedirectView.as_view(url=staticfiles.static('favicon.ico'))),
) 
```

或内联扩展现有模式。

# sencha-touch - 从数组中设置地图标记标题

> ID：15473436
> 
> 赞同：1
> 
> 时间：2013-03-18T09:30:25.987
> 
> 标签：sencha-touch, sencha-touch-2, google-maps-markers

我正在尝试使用地理编码从数组创建地图标记。我将地址以及地址的标题存储在数组中。问题出在我的循环中，标题被设置为我最后一个数组的最后一个值，尽管标记是从数组中的地址正确设置的。这是我的代码：

```
maprender : function (comp, map) {
  new google.maps.Marker({
    animation: google.maps.Animation.DROP,
    position: new google.maps.LatLng(this._geo.getLatitude(), this._geo.getLongitude()),
    map: map
  });

  var names = new Array("ABC","DEF","GHI"),
      mapAdd = new Array();

  mapAdd[0] = "Address 1";
  mapAdd[1] = "Address 2";
  mapAdd[2] = "Address 3";

  var geocoder = new google.maps.Geocoder(); 

  for (var i = 0; i < mapAdd.length; i++) {
    var lat = 0,
        lng = 0,
        x = names[i];

    geocoder.geocode({
      'address': mapAdd[i]}, 
      function (results,status) {
        if (status === google.maps.GeocoderStatus.OK) {
          lat = results[0].geometry.location.lat();
          lng = results[0].geometry.location.lng();

          console.log(lat + " " + lng);
          new google.maps.Marker({
            position: new google.maps.LatLng(lat, lng),
            title: x,
            map: map
          });
          console.log(x);
        }
      }
    });

  }

} 
```

标题在所有标记上都返回“GHI”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:01:06.397

基于[http://blog.jbrantly.com/2010/04/creating-javascript-function-inside.html](http://blog.jbrantly.com/2010/04/creating-javascript-function-inside.html)

试试这个方法

```
function geocode(i) {

  var lat = 0,
      lng = 0,
      x = names[i];

  geocoder.geocode({
    'address': mapAdd[i]},
    function (results,status) {
      if (status === google.maps.GeocoderStatus.OK) {
        lat = results[0].geometry.location.lat();
        lng = results[0].geometry.location.lng();

        console.log(lat + " " + lng);
        new google.maps.Marker({
          position: new google.maps.LatLng(lat, lng),
          title: x,
          map: map
        });
        console.log(x);
      }
    }
  });

}

for (var i = 0; i < mapAdd.length; i++) {
  geocode(i);
} 
```

希望这可以帮助

# eclipse - 用 Eclipse 打开一个 SVN 标签

> ID：15473440
> 
> 赞同：0
> 
> 时间：2013-03-18T09:30:36.003
> 
> 标签：eclipse, svn

我用 Tortoise SVN 标记了我的 Eclipse 工作区。现在我必须对标签进行一些更改，所以我将工作区切换到标签文件夹，我发现工作区里面没有项目，并且没有复制旧的工作区设置。如何打开带有所有旧设置和项目的标记工作区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:39:11.377

您可以使用以下 [插件](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/)，这是一个谷歌产品，它将存储您的偏好并自动应用于工作区

# php - 查找相同时间间隔内的平均速度

> ID：15473446
> 
> 赞同：1
> 
> 时间：2013-03-18T09:30:58.743
> 
> 标签：php

我有两个向量。一个有时间值和其他速度值。我需要获得相同时间间隔的平均速度值。前任。

```
$time=array('18:00:00', '18:00:00', '19:15:00', '19:15:00', '20:30:00');
$v=array(10, 20, 30, 70, 60); 
```

我需要得到向量：`$v_optimized(15, 50, 60)`; `10`值“15”是值和`20`in的平均速度`$v`，对应`18:00:00`于所有值的相同时间“”，依此类推。

我已经写了这段代码，但我错过了一些东西。请有人帮助我。

```
$time=array('18:00:00', '18:00:00', '19:15:00', '19:15:00', '20:30:00');
$v=array(10, 20, 30, 70, 60);
$time_opt= array();
$v_opt= array();
$start=0;
$count=0;
$end=0;
$sum=0;
$nr=count($time);
for($i=0; $i<$nr-2; $i++){
for($j=$i+1; $j<$nr-1; $j++){
$start = $i;

if($time[$j]==$time[$j+1]){
$time_opt[$i]=$time[$i];
$count++;
$sum+= $v[$j];
}
else{
$avg = $sum / $count;
array_push($v_opt, $avg);
//$count = 0;
}
}}
for($k=0;$k<count($v_opt); $k++)
echo $v_opt[$k].'<br>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:58:40.143

据我所知，这就是你想要的..试一试

```
<?php

        $time=array('18:00:00', '18:00:00', '19:15:00', '19:15:00', '20:30:00');
        $v=array(10, 20, 30, 70, 60);

        // get total of vector for a given time
        $temp_arr = array();

        foreach($time as $key=>$value)
        {
           $temp_arr[$value] = $temp_arr[$value]+$v[$key] ;
        }

        // count the repititons
        $count_val_time = array_count_values($time);

        // your required array
        $req_arr = array();

        foreach($temp_arr as $key=>$value)
        {
           $req_arr[$key] = $value/($count_val_time[$key]);
        }

        print_r($req_arr);

        ?> 
```

# c - 打印二维数组的无限循环

> ID：15473448
> 
> 赞同：0
> 
> 时间：2013-03-18T09:31:02.583
> 
> 标签：c, arrays

```
#include <stdio.h>

void main()
{
    char plaintext[50];
    char key[20];
    int plain=0,max1=0,max2=0; // max2 amount of coloumn n max1 for row on chip
    char chip[30][30];
    int i,j,k=0,c=0;

    printf("Enter key :");
    scanf("%s",&key);

    for(i=0;key[i]!='\0';i++)
    {
        max2++; 
    }

    printf("Enter plaintext :");
    scanf("%s",&plaintext);

    for( i = 0; plaintext[i] != '\0'; i++ ) 
    {
        plain++; 
    }
    if (plain%max2==0)
    max1=plain/max2;
    else
    max1=plain/max2+1;
    while(plaintext[k]!='\0')
    {

        for (i=0;i<max1;i++)
        {
            for (j=0;j<max2;j++)
            {
            chip[i][j]=plaintext[k];
            k++;
            }
        }
    }
    printf("%s",chip[0][0]);
} 
```

第一次我试图将普通（1D 数组）上的字符串移动到 2D 上具有动态数组的芯片（2d 数组）中，但是当我尝试运行此代码时，它只显示停止工作.. 我的 2D 数组有什么问题吗?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:55:00.493

我在 Linux 上编译它（在省略 void 之后，因为在 Linux main 中必须返回一个值），我得到了“分段错误”。我猜是因为`printf("%s",chip[0][0]);`，应该是`printf("%s",chip[0]);`

我的意思是芯片[0][0] 返回芯片[0] 中的特定字符，并且您想打印芯片数组中的第一个字符串，对吗？

# jquery - 使用jquery动态应用右边距

> ID：15473450
> 
> 赞同：4
> 
> 时间：2013-03-18T09:31:06.303
> 
> 标签：jquery, css

```
#dock > li ul
        {
            position: absolute;
            bottom: 0px;
            left: -180px;
            z-index: 1;
            width: 180px;
            display: none;
            background-color: #F1F1F1;
            border: solid 1px #969696;
            padding: 0px;
            margin: 0px;
            list-style: none;
        } 
```

这是我的 css 类，我想使用 jquery 动态应用右边距。任何想法表示赞赏。我试过这个：

`$('#dock').children('li').children('ul').css({ 'margin-right': rmargin });`

但它似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T09:32:15.720

尝试

```
$('#dock').find('ul').css({ 'margin-right': rmargin }); 
```

`ul`必须是 a`child`或 a `grand child`of `#dock`other wise 它可能不起作用

在这种情况下，您可以使用

```
$('#dock > li ul').css({ 'margin-right': rmargin }); 
```

文档[http://api.jquery.com/find](http://api.jquery.com/find)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:54:05.030

```
$('#dock > li ul').css({ 'margin-right': rmargin }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T09:32:55.610

如下使用它，

```
$('#dock > li ul').css({ 'margin-right': rmargin }); 
```

`$('#dock > li ul')`这将选择标签`UL`内的所有内容，这是DOM的**直接子代。**`LI`**`#dock`**

# jquery - 动态创建画布元素

> ID：15473451
> 
> 赞同：0
> 
> 时间：2013-03-18T09:31:11.243
> 
> 标签：jquery, canvas, html5-canvas

我正在尝试为用户创建一个工具来上传和注释图像，然后保存到数据库。该工具允许绘制线条、添加文本和擦除。现在在添加文本时，svg 解决方案可能会更好，但还没有找到动态加载背景图像的解决方案。

无论如何，用户需要能够添加多段文本并将它们移动到图像上。为此，我需要能够动态地为文本片段创建图层，即当单击文本按钮并且文本字段中有一些文本时。

目前，文本被添加到画布顶部的相同位置。如何循环创建图层，例如在此函数中：

```
function draw_text() {
ctx.fillStyle = "blue";
ctx.font = "12pt Helvetica";
ctx.fillText($('#text_entry').val(), 10, 250);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:23:08.623

我不是 100% 确定你在问什么，但我会根据你的标题给出答案*动态创建画布元素*。

这是我用来创建新画布的功能。更改它以满足您的需求。

**要使用它：**

```
var myCanvas = createLayer(500, 500);
var myContext = myCanvas.getContext('2d'); 
```

**功能**

```
function createLayer (w, h) {

    var canvas = document.createElement('canvas');

    canvas.width = w;
    canvas.height = h;
    canvas.style.width = w + "px";
    canvas.style.height = h + "px";
    canvas.style.position = "absolute";

    var body = document.getElementsByTagName("body")[0];
    body.appendChild(canvas);

    return canvas;
}, 
```

然后，您还可以将上下文存储在数组中，也允许您循环遍历每一层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:22:12.040

您可以创建一个拥有自己的 draw_text() 的图层对象。所有的 Layers 对象都被推入一个数组，你通过调用所有的渲染方法。

图层对象：

```
function Layer(_posX, _posY, _text, _context, _font, _color){
    this.posX = _posX;
    this.poxY = _posY;
    this.text = _text;
    this.ctx = _context; //canvas context
    this.font = _font;   //String
    this.color = _color; //String "rgb(255, 255, 255)" or "#FFFFFF"

    this.draw_text = function(){
       this.ctx.fillStyle = this.color;
       this.ctx.font = this.font;
       this.ctx.fillText(this.text, this.posX, this.posY);
} 
```

使成为 ：

```
RenderPile = [];
for(elt in RenderPile){
   elt.draw_text();
} 
```

如果我不清楚，请提出问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:36:43.320

感谢您对此的建议。我决定实现 canvas.js 并且效果很好。很容易实现。

[帆布](http://fabricjs.com/)

# node.js - 在 node.js 中如何要求不在当前文件同一文件夹中的模块

> ID：15473455
> 
> 赞同：1
> 
> 时间：2013-03-18T09:31:22.420
> 
> 标签：node.js, require

下面是我的 node.js 项目结构。在“lib”文件夹中，我有“Notification.js”文件，我想在其中需要“index.js”文件。如果该 index.js 文件在 lib 文件夹中可用，我可以使用`var module=require(./index)`. 但现在它在 lib 文件夹之外不可用。

```
 MyProject
      |
      |
      index.js
      lib
        |
        |
        Notification.js 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:32:54.673

您可以使用相对导入。在您的 Notification.js 中：

```
var module = require('../index'); 
```

# youtube-api - 任何用于视频流的 youtube 部分数据 api？

> ID：15473468
> 
> 赞同：0
> 
> 时间：2013-03-18T09:32:21.933
> 
> 标签：youtube-api

这是我几天前的问题。 [https://stackoverflow.com/questions/15387167/can-i-sectionize-and-concat-with-youtube-api](https://stackoverflow.com/questions/15387167/can-i-sectionalize-and-concat-with-youtube-api)

我搜索了一周的实现该目标的示例 iPhone 应用程序。DragonTape [https://itunes.apple.com/app/dragontape/id427536318?mt=8#](https://itunes.apple.com/app/dragontape/id427536318?mt=8#)

DragonTape 可以使用以下 URL 流式传输一些部分 youtube 视频流.. [http://r13---sn-i3b7sn7d.c.youtube.com/videoplayback?expire=1363623193&key=yt1&sparams=cp%2Cid%2Cip%2Cipbits%2Citag% 2Cratebypass%2Csource%2Cupn%2Cexpire&id=f0a815a965703fad&sver=3&ratebypass=yes&ip=124.66.184.4&ms=au&cp=U0hVSFZNUV9OTUNONV9OR1VCOjF6SjRwWGVhVTdQ&mv=m&source=youtube&upn=EoRgd9rUIhE&itag=18&ipbits=8&fexp=919113%2C923127%2C916626%2C902530%2C920704%2C912806%2C902000%2C919512%2C929901 %2C913605%2C906938%2C931202%2C931401%2C908529%2C930803%2C920201%2C929602%2C930101%2C930603%2C926403%2C900824&mt=1363598111&newshard=yes&signature=3211547465FA17203E41F50540FF66BE0B4E33B5.3DE28CA09A9E45F1ACC242F3C91BB4259381C6FF](http://r13---sn-i3b7sn7d.c.youtube.com/videoplayback?expire=1363623193&key=yt1&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&id=f0a815a965703fad&sver=3&ratebypass=yes&ip=124.66.184.4&ms=au&cp=U0hVSFZNUV9OTUNONV9OR1VCOjF6SjRwWGVhVTdQ&mv=m&source=youtube&upn=EoRgd9rUIhE&itag=18&ipbits=8&fexp=919113%2C923127%2C916626%2C902530%2C920704%2C912806%2C902000%2C919512%2C929901%2C913605%2C906938%2C931202%2C931401%2C908529%2C930803%2C920201%2C929602%2C930101%2C930603%2C926403%2C900824&mt=1363598111&newshard=yes&signature=3211547465FA17203E41F50540FF66BE0B4E33B5.3DE28CA09A9E45F1ACC242F3C91BB4259381C6FF)

但我找不到任何用于创建上述 URL 的 youtube DATA API。这只是由 JavaScript/iFrame/Flash Youtube Player API 生成的。但不能通过 youtube 数据 API。我认为这有点被黑了。

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:10:23.607

请参阅我关于[如何对 YouTube 视频进行后期处理以获得简单视频效果的回答？](https://stackoverflow.com/questions/15457559/)

这种 URL 违反了[Youtube TOS](http://www.youtube.com/static?template=terms)并被阻止。

# c# - EditText 输入格式

> ID：15473471
> 
> 赞同：0
> 
> 时间：2013-03-18T09:32:37.263
> 
> 标签：c#, xamarin

我想制作一个格式如下的 EditText 字段：0000 AA。

是否可以让数字键盘在前 4 个数字出现然后自动创建一个空格然后出现普通键盘？

我怎么能用 C# 做到这一点？

有人出主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:02:52.530

这应该可以解决问题：

```
EditText zipcode = FindViewById<EditText>(Resource.Id.zipcode);
zipcode.InputType = Android.Text.InputTypes.ClassNumber;
bool numberMode = true;
zipcode.TextChanged += (object sender, Android.Text.TextChangedEventArgs e) => {
    if(zipcode.Text.Length == 4){
        if(numberMode){
            numberMode = false;
            zipcode.Text = zipcode.Text + " ";
            zipcode.SetSelection(zipcode.Text.Length);
        }
    }

    if(zipcode.Text.Length > 4){
        numberMode = false;
        zipcode.InputType = Android.Text.InputTypes.ClassText;
    }

    if(zipcode.Text.Length <= 4){
        numberMode = true;
        zipcode.InputType = Android.Text.InputTypes.ClassNumber;
    }
}; 
```

# highcharts - 左对齐多类别 xaxis highchart

> ID：15473478
> 
> 赞同：1
> 
> 时间：2013-03-18T09:32:58.610
> 
> 标签：highcharts, alignment, axis, categories

**图 1**

![在此处输入图像描述](../Images/c7aebf0a4a9c26d31180122b96b692fd.png)

**图 2**

![在此处输入图像描述](../Images/8423dae2b45ed386a5bf878c5eede67d.png)

我想将**标签****左对齐**，但是当我这样做时，标签会像**Image 2**一样堆叠在其他标签上。

 ****请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-28T13:29:34.317

这个没有固定宽度的作品：

```
.highcharts-axis-labels span {
  left: 0 !important;
} 
```

由于它使用最大标签的宽度并通过提高“左”值移动较小的一次，您可以通过将其设置为 0 来防止这种情况发生。因此不需要固定宽度或“对齐：左”。

更新：

标签“useHTML”设置必须设置为true才能工作！

```
xAxis: {
  labels: {
    useHTML: true, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:51:56.837

您还可以将 useHTML 设置为 true，对标签使用格式化程序，然后使用 CSS 样式。

[http://api.highcharts.com/highcharts#xAxis.labels.useHTML](http://api.highcharts.com/highcharts#xAxis.labels.useHTML) [http://api.highcharts.com/highcharts#xAxis.labels.formatter](http://api.highcharts.com/highcharts#xAxis.labels.formatter)

编辑：

[http://jsfiddle.net/2QREQ/3/](http://jsfiddle.net/2QREQ/3/)

```
xAxis: {

            labels: {
                //align: 'center'
                useHTML:true,
                formatter:function(){

                    return '<div class="label">'+this.value+'</div>';
                }
            }
        }, 
```

CSS

```
.label {
text-align:left;
width:60px; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T09:51:14.353

给绿色和蓝色条一个容器 div/span。然后为标签和容器 span/div 申请一个 'display: inline-block' css。

通过这样做，您将强制条形图为标签“留出空间”。****

# c# - 禁用解决方案中特定项目的 stylecop 分析

> ID：15473481
> 
> 赞同：15
> 
> 时间：2013-03-18T09:33:04.683
> 
> 标签：c#, stylecop

有没有办法轻松阻止 StyleCop 警告在解决方案的特定项目中显示。或者，更明确地说，一种选择 Visual Studio 应该对哪些项目进行 StyleCop 分析的方法？

我们有一个包含 9 个项目的解决方案。我实际上只希望看到 StyleCop 警告的 2 个项目，因此我`StyleCop.Settings`在这些项目根目录中创建了文件。这意味着，对于其余项目，将应用默认规则集，并且每次打开课程时都会收到一个充满警告的屏幕。

我能想到删除这些警告的唯一方法是在`StyleCop.Settings`文件夹级别上方添加另一个文件，关闭所有规则，并在我感兴趣的特定设置文件上设置合并选项，以便不与此父文件合并。但这只是感觉不对。有没有更清洁的选择，或者这是我唯一的选择？

更新：我正在专门寻找一种方法来阻止警告出现在 Visual Studio 中。我已将`Settings.StyleCop`文件添加到解决方案文件夹并禁用所有规则。我在我的一个测试项目中运行 StyleCop 分析，并且没有报告任何错误。但是，打开一个测试类会显示大量 StyleCop 警告，我想禁止这些警告。这可能是 ReSharper 插件的 StyleCop 吗？我创建了一个代码清理配置文件并在其中禁用了某些规则，但这在我的测试类中似乎没有任何区别。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-18T09:45:27.680

请查看[文件列表](http://stylecop.codeplex.com/wikipage?title=Using%20File%20Lists&referringTitle=Documentation)配置 - 默认情况下，它们允许每个项目禁用规则：

> **默认启用或禁用**
> 
> 此外，新设置允许您确定默认情况下应启用还是禁用规则。这可以在项目级别或 SourceFileList 级别进行设置。例如，以下是您如何设置项目，默认禁用所有规则，并且仅显式启用两个规则：

```
<StyleCopSettings Version="4.3">
    <GlobalSettings>
        <BooleanProperty Name="RulesEnabledByDefault">False</BooleanProperty>
    </GlobalSettings> 
```

# java - 我已经创建了霍夫曼树，但我在生成代码时遇到了问题

> ID：15473482
> 
> 赞同：-1
> 
> 时间：2013-03-18T09:33:06.040
> 
> 标签：java, huffman-code

**这是我的函数，我用我的树的根节点和树内的一个字符来播种它。它成功地将要搜索的字母返回给我，但它没有给我元素的路径。我有点卡住了，任何帮助都会得到帮助**

公共节点遍历树（节点根，字符串 charToFind）{

```
 Node tempRoot = root;

    if (root != null){

        if (charToFind.equals(root.getAlphabet()))
        {
            //Another Point of consideration
            System.out.print(root.getAlphabet());
            System.out.println(": "+pathCodes);
            pathCodes.clear();
            return root;
        }
        Node result;

        if ((result = traversingTree(root.leftChild, charToFind)) != null){

            pathCodes.add("0");
            return result;

        }else
            pathCodes.add("1");
            return traversingTree(root.rightChild, charToFind); 
        }

        }
    pathCodes.clear();

     return null; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:56:06.480

您并没有确切地说出您*得到*了什么，但是查看您的代码，您的右手递归是在继续向下查找适当的节点*之前添加“1”。*但是，您*清除*叶节点处的代码，这将在添加所有 '1' 后发生。所以我希望你的代码只包含'0'，因为'0'是在递归*后*附加的。

此外，我怀疑当您在返回树的途中添加字符时*，*代码将回到前面。

在重新考虑你的递归时，我建议*不要*像这样使用霍夫曼树。搜索代码效率很低——我建议遍历树一次，构建一个字母+代码表，然后简单地对其进行索引。

优选地，仅使用树来计算代码长度，并使用规范编码生成代码。

# c# - 如何用灰色（不仅仅是文本高度）为整个 RichTextBox 行着色？

> ID：15473486
> 
> 赞同：0
> 
> 时间：2013-03-18T09:33:18.547
> 
> 标签：c#, wpf, richtextbox

我想要网格状的外观`RichTextBox`- 一段是浅灰色，然后是白色，依此类推......这段代码：

```
Paragraph pargrph = new Paragraph();
pargrph.Background = Brushes.LightGray;
this.richTextBox.Document.Blocks.Add(pargrph); 
```

仅使文本高度变灰，而不是整行高度：

![测量演示](../Images/6d2bb49225ea286795cfd2d9f22941f2.png)

如何用灰色为整条线着色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:27:04.410

我认为您需要更改边距和/或填充：

```
pargrph.Margin = new Thickness(0);
pargrph.Padding = new Thickness(0); 
```

另请参阅此[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.documents.block.margin.aspx)文章。

# android - 旧的 apk 文件始终只在 android 模拟器上运行

> ID：15473492
> 
> 赞同：0
> 
> 时间：2013-03-18T09:33:35.930
> 
> 标签：android, android-emulator, apk

我创建了一个安卓应用程序。

我必须运行该应用程序，这意味着它在 android 模拟器和设备上运行良好。

之后我必须更改一些布局高度和重量（一些设计更改）。现在我必须运行这些更新的 apk 文件，这意味着旧的布局设计只能在 android 模拟器上工作......为什么旧的 apk 设计在 android 模拟器上工作。 ..我希望在 android 模拟器上使用新的 apk 文件...

我该如何解决这些错误？？？请帮我 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:50:59.313

每当我遇到这种混乱时，我都做了一件简单的事情来解决我的问题！1.打开您的模拟器 2.转到设置>管理应用程序或应用程序（4.1版）>您的应用程序 3.现在从模拟器中卸载您的应用程序。4\. 清理您的项目，然后进行更改 5\. 再次运行新的应用程序 6\. 如果您仍然遇到问题，您的应用程序现在正在运行，然后在评论中讨论：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:35:54.660

请执行下列操作：-

1.  确保项目中的任何内容都没有错误`XML`。
2.  再次清理并构建您的项目。
3.  在您的模拟器上运行应用程序（现在将在 bin 文件夹中生成新的 apk）。

如果上述方法不起作用，请尝试在启动新的模拟器实例时清除用户数据，然后尝试运行更新后的应用程序。

# iphone - 如何在 ios 设备中下载 HLS/M3U8 块？

> ID：15473493
> 
> 赞同：9
> 
> 时间：2013-03-18T09:33:42.617
> 
> 标签：iphone, objective-c, http-live-streaming, offline-mode, m3u8

如何在 ios 设备中使用来自 url 的所有块 (.ts) 本地存储 m3u8 文件。如果可能的话怎么做？

我有开发功能，如.. 在 ios 本地存储中下载带有块（.ts）的 .m3u8 文件，然后在修改 .m3u8 后将播放离线模式。

如果对上述问题有任何解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:03:08.083

您可以这样做的唯一方法是设置一个 HTTP 服务器，以便在您下载文件后在本地提供这些文件。

以下是一些相关答案：[IOS 设备可以使用 html5 视频和 phonegap/cordova 从本地文件系统流式传输 m3u8 分段视频吗？](https://stackoverflow.com/questions/13271624/can-ios-devices-stream-m3u8-segmented-video-from-the-local-file-system-using-htm)

# android - 在android中检索当前拨出电话号码时没有得到正确的值

> ID：15473508
> 
> 赞同：2
> 
> 时间：2013-03-18T09:34:24.663
> 
> 标签：android, phone-state-listener

我正在使用以下广播接收器来检索传出电话号码。

```
@Override
public void onReceive(Context context, Intent intent) {
    mContext = context;
    mIntent = intent;
    TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    int events = PhoneStateListener.LISTEN_CALL_STATE;
    tm.listen(phoneStateListener, events);
}

private final PhoneStateListener phoneStateListener = new PhoneStateListener() {
    @Override
    public void onCallStateChanged(int state, String incomingNumber) {

        switch (state) {
        case TelephonyManager.CALL_STATE_IDLE:

            break;

        case TelephonyManager.CALL_STATE_OFFHOOK:

                dialingNumber = mIntent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
                Toast.makeText(mContext, "Local Call Number- " + dialingNumber,Toast.LENGTH_SHORT).show();

                break;
            }
                return;
        }

        Log.i(">>>Broadcast", "onCallStateChanged " + callState);
        super.onCallStateChanged(state, incomingNumber);
    }
}; 
```

有时它返回 null 或我之前拨打的号码。是否有另一种方法来检索当前呼叫的呼入/呼出电话号码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T15:40:56.937

对于拨出电话，请使用：

显现：

```
<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />

<receiver android:name=".MyPhoneReceiver" >
    <intent-filter>
        <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
    </intent-filter>
</receiver> 
```

代码：

```
...
@Override
public void onReceive(final Context context, final Intent intent) {
    Log.d("APP", "ACTION:" + intent.getAction());

    if (Intent.ACTION_NEW_OUTGOING_CALL.equals(intent.getAction())) {
        final String originalNumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
        Log.d("APP", "outgoing,ringing:" + originalNumber);
    }
    ... 
```

对于来电，使用这个：

显现：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<receiver android:name=".MyPhoneReceiver" >
    <intent-filter>
        <action android:name="android.intent.action.PHONE_STATE" />
    </intent-filter>
</receiver> 
```

代码：

```
@Override
public void onReceive(final Context context, final Intent intent) {
    Log.d("APP", "ACTION:" + intent.getAction());
    final String stringExtra = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
    if (TelephonyManager.EXTRA_STATE_RINGING.equals(stringExtra)) {
            final String incomingNumber = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);
            Log.d("APP", "incoming,ringing:" + incomingNumber);
        } else if (stringExtra.equals(TelephonyManager.EXTRA_STATE_IDLE)) {
            final String incomingNumber = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);
            Log.d("APP", "hanged" + incomingNumber );
        } else if (stringExtra.equals(TelephonyManager.EXTRA_STATE_OFFHOOK)) {
            final String incomingNumber = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);
            Log.d("APP", "answered" + incomingNumber );
        }
    } 
```

# java - 顶部带有标签的选项卡式窗格

> ID：15473511
> 
> 赞同：3
> 
> 时间：2013-03-18T09:34:29.813
> 
> 标签：java, swing, user-interface, overlay, jtabbedpane

如图所示，我需要添加一个 JLabel/JPanel。在调整框架大小时，选项卡式窗格和标签/面板都应该驻留。选项卡式窗格内的标签和面板是独立的。我怎样才能做到这一点？

![在此处输入图像描述](../Images/359b548b3f6cd5c61653013d1b754dec.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:45:26.037

这是一个使用 JLayer 的快速示例（如 mKorbel 建议的那样）：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.plaf.*;

public class TopRightCornerLabelLayerUITest {
  public static JComponent makeUI() {
    JTabbedPane tab = new JTabbedPane();
    tab.addTab("New tab1", new JLabel("1"));
    tab.addTab("New Tab2", new JLabel("2"));
    JPanel p = new JPanel(new BorderLayout());
    p.add(new JLayer<JComponent>(tab, new TopRightCornerLabelLayerUI()));
    return p;
  }
  private static void createAndShowUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.getContentPane().add(makeUI());
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowUI();
      }
    });
  }
}
class TopRightCornerLabelLayerUI extends LayerUI<JComponent> {
  private JLabel l = new JLabel("A Label at right corner");
  private JPanel rubberStamp = new JPanel();
  @Override public void paint(Graphics g, JComponent c) {
    super.paint(g, c);
    Dimension d = l.getPreferredSize();
    int x = c.getWidth() - d.width - 5;
    SwingUtilities.paintComponent(g, l, rubberStamp, x, 2, d.width, d.height);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T09:59:56.043

> 如图所示，我需要添加一个 JLabel/JPanel。在调整框架大小时，选项卡式窗格和标签/面板都应该驻留。选项卡式窗格内的标签和面板是独立的。如果有人有解决方案，请帮助我。

您可以使用：

1.  [基于JXLayer(Java6)的JLayer(Java7)](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)

2.  [例如](https://stackoverflow.com/a/9734016/714968)，GlassPane

* * *

如果可能的话，我会使用 JLayer（需要 Java7）。

# asp.net-mvc-4 - MVC4 Simple Membership with custom database and database first issue

> ID：15473514
> 
> 赞同：1
> 
> 时间：2013-03-18T09:34:49.417
> 
> 标签：asp.net-mvc-4, simplemembership

我正在使用自定义数据库在我的 MVC4 网站中实现成员资格和安全性。一切正常，但是当我使用 .EDMX(Designer) 添加我的数据库表成员身份时，安全性开始出现错误。**我也知道原因：这是由于重复的类文件，因为默认成员使用代码优先方法，而我使用的是数据库优先方法。**我的问题是有什么解决方案可以让我首先使用数据库（EDMX），而且我的安全性和会员功能也可以正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:24:55.863

以下帖子详细介绍了将 SimpleMembership 与数据库优先方法一起使用时要采取的步骤：[将 MVC 4 SimpleMembership 与现有的数据库优先 EF 模型一起使用](https://stackoverflow.com/questions/15112214/using-mvc-4-simplemembership-with-an-existing-database-first-ef-model/15234074#15234074)

此外，您可能会发现以下链接包含有关 SimpleMembership 的一些有用信息：[http ://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new -asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

# java - 从文本文件填充 ArrayList 并在所需输出中删除 forwardSlash

> ID：15473515
> 
> 赞同：3
> 
> 时间：2013-03-18T09:34:49.760
> 
> 标签：java, string, split

嗨，SO专家，

第 1 步。我创建了一个类 DVDInfo，它具有标题、流派、leadActor 以及相应的 getter 和 setter，如下面的代码所示。

问题：我必须从具有“正斜杠 /”的 dvdInfo.txt 文件中填充 Arraylist，并且所需的输出应该包含不带“正斜杠 /”的 arrayList。

```
------------------------------------
       dvdInfo.txt file
------------------------------------

Donnie Darko/sci-fi/Gyllenhall, Jake
Raiders of the Lost Ark/action/Ford, Harrison
2001/sc-fi/??
Caddy Shack/comedy/Murray, Bill
Star Wars/sc-fi/Ford, Harrison
Lost in Translation/comedy/Murray, Bill
Patriot Games/action/Ford, Harrison

-------------------------------------    

    import java.util.*;     
    import java.io.*;

    class DVDInfo{
      private String title;
      private String genre;
      private String leadActor;

    DVDInfo(String t,String g,String a){
       this.title = t;
       this.genre =g;
       this.leadActor=a;
   }

   public String getTitle() {
     return title;
   }

   public void setTitle(String title) {
     this.title = title;
   }

   public String getGenre() {
      return genre;
   }

   public void setGenre(String genre) {
      this.genre = genre;
   }

   public String getLeadActor() {
    return leadActor;
   }

   public void setLeadActor(String leadActor) {
     this.leadActor = leadActor;
   }

   @Override
   public String toString() {
     return "DVDInfo [title=" + title + ", genre=" + genre + ", leadActor="
            + leadActor + "]";
   }

}

public class TestDVD {
    /*
     * //access dvdInfo.txt file and populate the arrayList by removing forward slash.
     */
    public static void populateList() throws Exception {      
      BufferedReader br = new BufferedReader(new FileReader(new File("C:\\src\\dvdInfo.txt")));
      //read each line of dvdInfo.txt below
      String line=br.readLine();
      while(line !=null) {
          DVDInfo = new DVDInfo(t,g,a);
          // Step 1.Wanted to create a DVDInfo Instance for each line of data we read in from dvdInfo.txt file.//failed to do so
          // Step 2.for each DVDInfo Instance ,we need to parse the line of data and populate DVDInfo's 3 instance variables --no clue.
          // Step 3.Finally put all DVDInfo instances into the ArrayList--- i dont know how to proceed(no clue)       
      } 
    }

    public static void main(String[] args) {
        ArrayList<DVDInfo>  dvdList= new ArrayList<DVDInfo>();
        try{
            populateList();
        }catch(Exception e){
            System.out.println("Exception caught"+e.getMessage());
        }
        System.out.println(dvdList);
    }

}

  ------------------------------------------------------
  output of populateList should be without forward slash
  ------------------------------------------------------    

  Donnie Darko sci-fi Gyllenhall, Jake
  Raiders of the Lost Ark action Ford, Harrison
  2001 sc-fi ??
  Caddy Shack comedy Murray, Bill
  Star Wars sc-fi Ford, Harrison
  Lost in Translation comedy Murray, Bill
  Patriot Games action Ford, Harrison 
```

请帮助我使用 java 1.5 版中 PopulateList 方法的代码，我对此感到困惑。

谢谢一切工作！向所有 SO 专家干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T09:40:38.077

**填充列表（）**

```
//Signature of method changed to add List<DVDInfo> as a parameter    

    public static void populateList(List<DVDInfo> info) throws Exception {
            BufferedReader br = new BufferedReader(new FileReader(new File("C:\\src\\dvdInfo.txt")));
            //read each line of dvdInfo.txt below
             String line = null;
             while ((line = br.readLine()) != null) { //check line in loop
                String[] tokens = line.split("/");
                DVDInfo infoItem = new DVDInfo(tokens[0],tokens[1],tokens[2]);
                info.add(infoItem);      
            } 
          } 
```

**主要的（）**

```
//dvdList is now passed to the method.
public static void main(String[] args) {
    ArrayList<DVDInfo>  dvdList= new ArrayList<DVDInfo>();
    try{
        populateList(dvdList);
    }catch(Exception e){
        System.out.println("Exception caught"+e.getMessage());
    }
    System.out.println(dvdList);
} 
```

**无限循环问题**

这部分代码将导致无限循环。

```
 String line=br.readLine();
      while(line !=null) {
          DVDInfo = new DVDInfo(t,g,a);

      } 
```

这是因为从缓冲区中读取了一行，然后在该行不为空时执行了一个循环。由于永远不会从缓冲区中读取新行，因此该行永远不会为空，从而创建无限循环。这可以使用以下方法修复：

```
 String line = null;
            while ((line = br.readLine()) != null) { //check line in loop

            } 
```

此循环构造将缓冲区中的行分配给`Strin

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T09:36:18.887

在 / 上拆分线，您应该得到所需的值。试试 line.split("/");

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T09:52:35.450

您必须填充数据并将列表返回给您的主要功能：

```
 public static ArrayList<DVDInfo> populateList() throws Exception { 
         ArrayList<DVDInfo>  dvdList= new ArrayList<DVDInfo>();     
              BufferedReader br = new BufferedReader(new FileReader(new File("C:\\src\\dvdInfo.txt")));
              //read each line of dvdInfo.txt below
              String line=br.readLine();

            while (( String line = br.readLine()) != null) {
                //for each line use 
                String[] tokens = line.split("/");
                DVDInfo dvdInfo = new DVDInfo(tokens[0],tokens[1],tokens[2]); //step 1 & 2
                dvdList.add(dvdInfo );//step 3
            } 
          return dvdList;
       } 
```

# c# - 多列组合框或 DataGridCombo Box 列缩小

> ID：15473517
> 
> 赞同：3
> 
> 时间：2013-03-18T09:34:55.907
> 
> 标签：c#, winforms, gdi+, datagridcomboboxcolumn, datagridviewcombobox

我有一个多列组合框。当我第一次使用它时，它工作正常，然后当我清除它并再次输入数据时，所有列都会缩小，每行只能看到 1-2 个字母。但我想显示文本，例如表格中的所有字母都可见，就像第一张图片一样。

![在运行时](../Images/f56d7611ebfa8d7df32c0af2f01ff591.png) ![保存后](../Images/4a1d4c85f012ef21fe1fdd0f685e6b65.png)

**代码：**

```
namespace MultiColumnComboBoxDemo

{

public class MultiColumnComboBox : ComboBox
{
    public MultiColumnComboBox()
    {
        DrawMode = DrawMode.OwnerDrawVariable;           
    }

    public new DrawMode DrawMode
    {
        get
        {
            return base.DrawMode;
        }
        set
        {
            if (value != DrawMode.OwnerDrawVariable)
            {
                throw new NotSupportedException("Needs to be DrawMode.OwnerDrawVariable");
            }
            base.DrawMode = value;
        }
    }

    public new ComboBoxStyle DropDownStyle
    {
        get
        {
            return base.DropDownStyle;
        }
        set
        {
            if (value == ComboBoxStyle.Simple)
            {
                throw new NotSupportedException("ComboBoxStyle.Simple not supported");
            }
            base.DropDownStyle = value;
        }
    }

    protected override void OnDataSourceChanged(EventArgs e)
    {
        base.OnDataSourceChanged(e);

        InitializeColumns();
    }

    protected override void OnValueMemberChanged(EventArgs e)
    {
        base.OnValueMemberChanged(e);

        InitializeValueMemberColumn();
    }

    protected override void OnDropDown(EventArgs e)
    {
        base.OnDropDown(e);
        this.DropDownWidth = (int)CalculateTotalWidth();
    }

    const int columnPadding = 5;
    private float[] columnWidths = new float[0];
    private String[] columnNames = new String[0];
    private int valueMemberColumnIndex = 0;

    private void InitializeColumns()
    {
        PropertyDescriptorCollection propertyDescriptorCollection = DataManager.GetItemProperties();

        columnWidths = new float[propertyDescriptorCollection.Count];
        columnNames = new String[propertyDescriptorCollection.Count];

        for (int colIndex = 0; colIndex < propertyDescriptorCollection.Count; colIndex++)
        {
            String name = propertyDescriptorCollection[colIndex].Name;
            columnNames[colIndex] = name;
        }
    }

    private void InitializeValueMemberColumn()
    {
        int colIndex = 0;
        foreach (String columnName in columnNames)
        {
            if (String.Compare(columnName, ValueMember, true, CultureInfo.CurrentUICulture) == 0)
            {
                valueMemberColumnIndex = colIndex;
                break;
            }
            colIndex++;
        }
    }

    private float CalculateTotalWidth()
    {
        float totWidth = 0;
        foreach (int width in columnWidths)
        {
            totWidth += (width + columnPadding);
        }
        return totWidth + SystemInformation.VerticalScrollBarWidth;
    }

    protected override void OnMeasureItem(MeasureItemEventArgs e)
    {
        base.OnMeasureItem(e);

        if (DesignMode)
            return;

        for (int colIndex = 0; colIndex < columnNames.Length; colIndex++)
        {
            string item = Convert.ToString(FilterItemOnProperty(Items[e.Index], columnNames[colIndex]));
            SizeF sizeF = e.Graphics.MeasureString(item, Font);
            columnWidths[colIndex] = Math.Max(columnWidths[colIndex], sizeF.Width);
        }

        float totWidth = CalculateTotalWidth();

        e.ItemWidth = (int)totWidth;
    }

    protected override void OnDrawItem(DrawItemEventArgs e)
    {
        base.OnDrawItem(e);

        if (DesignMode)
            return;

        e.DrawBackground();

        Rectangle boundsRect = e.Bounds;
        int lastRight = 0;

            //Shakir
            //using (Pen linePen = new Pen(SystemColors.GrayText))
            using (Pen linePen = new Pen(Color.Black))
            {
                using (SolidBrush brush = new SolidBrush(e.ForeColor))
                //using (SolidBrush brush = new SolidBrush(BackColor))
                {
                    if (columnNames.Length == 0 && e.Index >=0 )
                    {
                        e.Graphics.DrawString(Convert.ToString(Items[e.Index]), Font, brush, boundsRect);
                    }
                    else
                    {
                        for (int colIndex = 0; colIndex < columnNames.Length; colIndex++)
                        {
                            string item = Convert.ToString(FilterItemOnProperty(Items[e.Index], columnNames[colIndex]));

                            boundsRect.X = lastRight;
                            boundsRect.Width = (int)columnWidths[colIndex] + columnPadding;
                            lastRight = boundsRect.Right;

                            if (colIndex == valueMemberColumnIndex)
                            {
                                using (Font boldFont = new Font(Font, FontStyle.Bold))
                                {
                                    e.Graphics.DrawString(item, boldFont, brush, boundsRect);
                                }
                            }
                            else
                            {
                                e.Graphics.DrawString(item, Font, brush, boundsRect);
                            }

                            if (colIndex < columnNames.Length - 1)
                            {
                                e.Graphics.DrawLine(linePen, boundsRect.Right, boundsRect.Top, boundsRect.Right, boundsRect.Bottom);
                            }
                        }
                    }
                }
            }

            e.DrawFocusRectangle();

    }

}
} 
```

**这是将数据填充到多列组合框中的代码：**

SupplierDisplay 是一个 DataTable SupplierMaster 是数据库中的表 DBRdRw 是类

```
SupplierDisplay = DbRdRw.SqlDbRead("Select SupplierID, SupplierName From SupplierMaster", "SupplierMaster");//data filled to a datatable
    //data loading starts
              mcbxSupplier.DataSource = SupplierDisplay;
              mcbxSupplier.ValueMember = "SupplierName";
    mcbxSupplier.DisplayMember = "SupplierName";//ends 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:05:09.793

当您在 SQL 语句之前重新加载多列组合框时添加一个空表这里是完整代码

```
 DataTable dummytable = new DataTable;
          mcbxSupplier.DataSource = dummytable;
          SupplierDisplay = DbRdRw.SqlDbRead("Select SupplierID, SupplierName From SupplierMaster", "SupplierMaster");//data filled to a datatable
          //data loading starts
          mcbxSupplier.DataSource = SupplierDisplay;
          mcbxSupplier.ValueMember = "SupplierName";
          mcbxSupplier.DisplayMember = "SupplierName";//ends 
```

# scala - akka.actor.ActorRef 询问/告诉快捷方式在哪里？！在 API 中定义？

> ID：15473521
> 
> 赞同：3
> 
> 时间：2013-03-18T09:35:09.963
> 
> 标签：scala, akka

我在哪里可以找到 ActorRef. 的 API？和 ActorRef.! 在[http://doc.akka.io/api/akka/current](http://doc.akka.io/api/akka/current)？每个都有多个版本，但我无法在任何地方找到它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T09:45:44.410

`!`在[`akka.actor.ActorRef`](http://doc.akka.io/api/akka/current/akka/actor/ActorRef.html#!(message:Any)(implicitsender:akka.actor.ActorRef):Unit)

`?`在[`akka.pattern.AskSupport`](http://doc.akka.io/api/akka/current/akka/pattern/AskSupport.html#ask(actorSelection:akka.actor.ActorSelection):akka.pattern.AskableActorSelection)

# android - 以编程方式检查网站兼容性

> ID：15473522
> 
> 赞同：0
> 
> 时间：2013-03-18T09:35:13.800
> 
> 标签：android

有没有办法找到输入的 URL 是否与 Android 手机兼容？

例如，在我的应用程序中，当用户输入任何 URL（google.com）时，它将显示其兼容性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:42:44.703

正如我在评论中已经说过的那样，没有办法确定网站的移动版本是否存在。但是，您可以尝试一种启发式算法，该算法可以“猜测”它是否兼容。我脑海中浮现的几个想法：

**域**
*域*
移动站点通常在以`m`or开头的域上提供，`mobile`而不是`www`这样检查类似`m.domain.com`or的内容`mobile.domain.com`。

*Url Path*
我还看到移动版本的网站是在一个特殊的路径上提供的——关键字与域部分中的相同——所以检查`www.domain.com/m/...`or`www.domain.com/mobile/...`或`www.domain.com/android/...`。

**HTML Source**
*Doctype*
如果网站使用 HTML5，那么很有可能该网站已针对移动查看进行了优化 - 所以请求该网站并检查 doctype 是否为`<!DOCTYPE html>`

*Meta Tag(s)*
检查是否`<meta name="viewport" ...`设置了元标记。如果提供此标签，则很有可能，该网站已针对移动视图进行了优化。

*CSS 查询*
检查所请求的网站是否在 CSS 上有特殊的媒体查询 - 例如：`<link rel="stylesheet" media="handheld...`这也可能表明网站已针对移动查看进行了优化。

# php - 表单mysql读写

> ID：15473524
> 
> 赞同：0
> 
> 时间：2013-03-18T09:35:16.287
> 
> 标签：php, html, mysql, forms

所以我能够从数据库中读取数据以按照我想要的方式填充表单。

```
<?php
$dbQuery_custom_toggle = "SELECT * "; 

$dbQuery_custom_toggle .= "FROM custompage"; 
$result_custom_toggle = mysql_query($dbQuery_custom_toggle) or die("Couldn't get file        list");
while($row = mysql_fetch_array($result_custom_toggle)) {
?>
<?php echo $row['np_menu_titel'];?>&nbsp;<input type="checkbox" name="np_menu_active_post" value="" <?php if($row['np_menu_active'] == "1"){echo 'checked="checked"';}?> />  <br />

<?php
 }
 ?> 
```

因此，这将使用所有可用行填充表单。这意味着这将使我获得与数据库中条目一样多的复选框（带有名称）

我遇到的问题是，我如何将每个值返回到数据库？

```
 update custompages SET np_menu_active ='?' , 
```

我在这里没有任何线索，感谢任何帮助，我希望在提交表单时将 1 发送回与复选框对应的每一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:39:44.907

最好使复选框成为一个数组。

```
<input type="checkbox" name="np_menu_active_post[]" value="" <?php if($row['np_menu_active'] == "1"){echo 'checked="checked"';}?> /> 
```

然后将其发布到您想要的任何地方并像这样处理。

```
$chekbox_vals = $_POST['np_menu_active_post']; // This will pass the selected checkbox values as an array

if(count($chekbox_vals) > 0) {
     // Loop it and update the values in DB

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:57:12.247

如果您的数据库有一个 id 字段，您可以使用 AJAX 使用`onchange()`事件更新数据库

```
<?php echo $row['np_menu_titel'];?>&nbsp;<input type="checkbox" name="np_menu_active_post" id="<?php echo $row['id'];?>"value="" onchange="doAJAX(<?php echo $row['id'];?>)"<?php if($row['np_menu_active'] == "1"){echo 'checked="checked"';}?> />  <br /> 
```

# android - Android：在 singleTop/singleTask 模式下绑定应用程序 (AIDL)

> ID：15473525
> 
> 赞同：1
> 
> 时间：2013-03-18T09:35:16.407
> 
> 标签：android, aidl, back-stack, launchmode

我用 AIDL 文件绑定了 2 个 android 应用程序。A和B应用程序之间的交换如下：

*   A应用通过AIDL接口连接到B应用
*   A应用调用B服务的方法
*   B 服务返回一个 PendingIntent
*   应用程序启动 PendingIntent
*   当 B 应用程序中的操作完成时：返回 A 应用程序

但是，如果 B 应用程序在交换之前启动，则在调用“finish()”方法后，用户将被重定向到 B 应用程序的最后一个活动，而不是在 A 应用程序中。

在我的 A 应用程序中：

```
@Override
protected void onCreate(Bundle savedInstanceState) {

    ...
    Intent i = new Intent();
    i.setClassName(Utils.BILLING_PACKAGE,Utils.BILLING_INTERFACE);

    try {
       Boolean ret = bindService(i, mConnection, Context.BIND_AUTO_CREATE);
    } catch (Exception e) {}

}

//ServiceConnection class    
private ServiceConnection mConnection = new ServiceConnection() {

       public void onServiceConnected(ComponentName name, IBinder boundService) {
          service = InBillingInterface.Stub.asInterface((IBinder) boundService);
          Utils.debug(mContext, "connection status : "+ service );
    }

       public void onServiceDisconnected(ComponentName name) {
          service = null;
       }

};

...
//launch the second application
Bundle response = service.prepareForBillingService(data);
PendingIntent pIntent = response.getParcelable(Utils.RESPONSE_P_INTENT);

        try {
            Intent in = new Intent();
            in.setFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
            pIntent.send(mContext, 0, in);
        } catch (PendingIntent.CanceledException e) {
            Utils.error("Sending contentIntent failed:" + e.getMessage());
        } 
```

我尝试在 A 应用程序清单文件中将 android:launchMode 设置为 singleTask 或 singleTop 但问题仍然存在。如您所见，我在发送活动时还放置了一个“FLAG_ACTIVITY_MULTIPLE_TASK”标志。

我的 B 应用程序中的代码：

*创建 PendingActivity*

```
public class InBillingService extends Service {

    private static final String TAG = "my tag";

    @Override
    public void onCreate() {
        super.onCreate();
        Log.d(TAG, "Welcome！");
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.d(TAG, "Byebye!");
    }

    /**
     * Method for AIDL interface
     */
    @Override
    public IBinder onBind(Intent arg0) {

       return new InBillingInterface.Stub() {

          //a method that return a pendingIntent
          @Override
          public Bundle prepareForBillingService(String appId,String encryptedData) throws RemoteException {

             Bundle bundle = new Bundle();
             Intent intent = new Intent();   
             intent.setFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
             intent.setClass(InBillingService.this, xx.xxx.activities.BilingActivity.class);
             intent.putExtra(Consts.PENDING_INTENT_INFO, result);

             PendingIntent pendingIntent = PendingIntent.getActivity(InBillingService.this, 0, intent, 0);                         

             bundle.putParcelable(Consts.PENDING_INTENT, pendingIntent);

             return bundle ;

}

    };

    } 
```

在计费活动中

```
//if no problems
finish() 
```

感谢您的阅读！

- -更新

我的 B 活动清单文件：

```
 <activity
        android:name=".activities.BillingActivity"
        android:configChanges="orientation|keyboardHidden"
        android:launchMode="singleTask"
        android:label="@string/title_activity_billing" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:45:40.797

为了在应用程序 B 中完成 BillingActivity 后返回应用程序 A，请执行以下操作：

在应用程序 B 的清单文件中，使 BillingActivity 启动模式 singleInstance 如下所示：

```
<activity
    android:name="xx.xxx.activities.BillingActivity"
    android:launchMode="singleInstance" >
</activity> 
```

根据此[链接](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)：

> “singleTask”和“singleInstance”模式也仅在一个方面彼此不同：“singleTask”活动允许其他活动成为其任务的一部分。它始终位于其任务的根部，但其他活动（必须是“标准”和“singleTop”活动）可以启动到该任务中。另一方面，“singleInstance”活动不允许其他活动成为其任务的一部分。这是任务中的唯一活动。如果它启动另一个活动，则该活动被分配给不同的任务——就好像 FLAG_ACTIVITY_NEW_TASK 在意图中一样。

# solr - 将 Solr 用于预订系统是否可能（或明智）？

> ID：15473528
> 
> 赞同：1
> 
> 时间：2013-03-18T09:35:19.027
> 
> 标签：solr

我对 Solr 比较陌生，需要帮助来确定它是否是适合我的任务的工具（如果是，应该如何使用）。

我有一个用例，其中一些实体具有多种资源类型，用户需要找到具有足够免费资源的实体。为了不那么抽象，假设有几家汽车租赁公司和几种汽车类型（SUV、面包车、卡车......）；我们跟踪每个公司/汽车类型/天组合的可用汽车数量。用户想要在给定的时间跨度内租用一定数量的汽车，我们需要找出哪些公司可以满足该请求。

搜索的其他方面，Solr 似乎很匹配（每个实体都有许多属性，比如公司位置、价格、是否存在绿色租赁政策等，这些需要可搜索，使用范围过滤器和分面搜索，并根据用户反馈分数进行排序），因此如果资源分配方面可以硬塞到 Solr 中，那就太好了。那可能吗？出于某种原因，这是一个坏主意吗？您能否推荐一个更适合该任务的工具？

* * *

浏览 Solr 文档后，我想出了这个方案：

*   公司就是文件
*   每天/汽车类型组合是一个动态字段，其中包含给定类型的免费汽车数量，在该公司的给定日期
*   然后条件将是一个巨大的布尔表达式，由诸如`field_<car_type>_<day>:[<required_number> TO *]`

我不确定有几个原因：

*   它需要数千个字段——这会导致性能问题吗？
*   据我了解，Solr 将范围查询解压缩为许多相等性检查 OR-ed 在一起，因此查询最终将有数千个术语 - 再次，这会导致性能问题吗？
*   每次用户进行预订时，字段值都会改变 - 据我所知，这将强制重新索引，这很慢，所以与上面的问题相同。

我将不胜感激有关如何处理此问题的任何指示（例如要使用的其他一些搜索工具，或者 Solr 如何与一些进行预订检查的自定义代码进行交互）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:17:02.193

您的问题似乎与酒店业和购物业面临的问题相似。您可能会发现[Gilt 的演示](http://www.slideshare.net/trenaman/personalized-search-on-the-largest-flash-sale-site-in-america)很有帮助。

基本观点似乎是您可能需要重新定义您的*文档*，使其比您最初的想法更细粒度。在您的情况下，这可能会将*可用性*索引为 Solr*文档*，并为每个可用性槽复制附加信息或使用[Solr 连接](http://wiki.apache.org/solr/Join)运算符。

# jsp - 如何使用struts2上传文件并将路径存储在数据库中

> ID：15473529
> 
> 赞同：0
> 
> 时间：2013-03-18T09:35:32.443
> 
> 标签：jsp, struts2

我一直在尝试完成这项任务，但无法成功。我可以上传可以存储在“C:\apache-tomcat-6.0.33\work”中的文件，但我不知道如何将路径存储在数据库中。这是我的代码。

```
package com.rajesh.action;

import java.io.File;
import org.apache.commons.io.FileUtils;
import java.io.IOException; 

import com.opensymphony.xwork2.ActionSupport;

public class UploadFile extends ActionSupport{
private File myFile;
private String myFileContentType;
private String myFileFileName;
private String destPath;

public String execute()
{
/* Copy file to a safe location */
destPath = "C:/apache-tomcat-7.0.37/upload";

try{
System.out.println("Src File name: " + myFile);
System.out.println("Dst File name: " + myFileFileName);

File destFile  = new File(destPath, myFileFileName);
FileUtils.copyFile(myFile, destFile);

}catch(IOException e){
e.printStackTrace();
return ERROR;
}

return SUCCESS;
}

public File getMyFile() {
  return myFile;
}
public void setMyFile(File myFile) {
  this.myFile = myFile;
}
public String getMyFileContentType() {
  return myFileContentType;
}
public void setMyFileContentType(String myFileContentType) {
  this.myFileContentType = myFileContentType;
}
public String getMyFileFileName() {
  return myFileFileName;
}
public void setMyFileFileName(String myFileFileName) {
  this.myFileFileName = myFileFileName;
}
} 
```

这是我上传文件的jsp。

```
<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
<head>
<title>Struts 2 - Login Application | ViralPatel.net</title>
</head>

<body>
<h2>Struts 2 - Login Application</h2>
<s:actionerror />
<s:form action="login" method="post">
<s:textfield name="username" key="label.username" size="20" />
<s:password name="password" key="label.password" size="20" />
<s:submit method="execute" key="label.login" align="center" />
</s:form>
</body>
</html> 
```

这是我的 struts.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
<constant name="struts.enable.DynamicMethodInvocation"
value="false" />
<constant name="struts.multipart.maxSize" value="1000000" />
<constant name="struts.devMode" value="false" />
<constant name="struts.custom.i18n.resources"
value="ApplicationResources" />

<package name="default" extends="struts-default" namespace="/">
<action name="login" class="com.rajesh.action.LoginAction">
<result name="success">admin.jsp</result>
<result name="error">loginstruts.jsp</result>
</action>
<action name="upload" class="com.rajesh.action.UploadFile">
<result name="success">/success.jsp</result>
<result name="error">/error.jsp</result>
</action>
</package>
</struts> 
```

请帮帮我，我是这个struts2的新手，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T06:19:57.417

将文件上传到目标路径后，在您的操作中编写数据库逻辑，或者您可以创建 DAO 类来连接数据库并将记录插入其中并在 struts 操作中使用该类。您需要在这行代码之后放置数据库连接代码。 .

**FileUtils.copyFile(myFile, destFile);**

示例代码：

```
//To be write after above line in your action class
String filePathToStoreInDB = destPath+"\\"+myFileFileName;
MyDAO myDAO = new MyDAO();
String result = myDAO.insertRecord(filePathToStoreInDB);
if(result.equals("success")){
//proceed your logic
}else{
//your logic to display errro message
}

//logic in DAO class to insert record
public class MyDAO{
//Your code to insert record in database
return "success"; //if record inserted successfully
retrun "fail"; //if record failed to insert
}
} 
```

注意：您可以将数据库中的列类型作为 Varchar2 或 Varchar 取决于您的要求。

# c# - .NET 功能和 C# 功能有什么区别？（请举例）

> ID：15473531
> 
> 赞同：1
> 
> 时间：2013-03-18T09:35:34.863
> 
> 标签：c#, .net, clr

我觉得这很容易被误解，我总是在两者之间感到困惑。当我们说 CLR 功能（.NET 功能）或 C# 功能时，它们是相同还是不同

编辑：我觉得大多数人都误解了我的问题。我不是在问 C# 和 .NET 之间的核心区别，而是对功能明智的分类有点好奇。就像垃圾收集是 CLR 功能或匿名类型是语言功能，依此类推

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T09:39:34.533

语言特性、库特性和运行时特性之间值得非常清楚。

一些例子：

*   空合并`??`运算符、部分类和 lambda 表达式完全是语言特性
*   垃圾收集几乎是一个纯粹的运行时特性。语言通过终结器与它交互，但仅此而已
*   泛型是语言和运行时特性的混合体——尽管值得注意的是，CLR 在 F# 公开它之前就已经显着支持泛型变化。当然，库使用泛型。
*   可空类型是所有三种类型的混合：CLR 需要了解它们以用于装箱（以及泛型的结构约束），`Nullable<T>`类型本身在库中定义，C# 语言以各种方式支持它们（例如使用`?`类型后缀）

# c# - 窗口形式标准形式尺寸

> ID：15473533
> 
> 赞同：3
> 
> 时间：2013-03-18T09:35:36.797
> 
> 标签：c#, winforms, screen-resolution

我正在使用 VS 2008，我已经进行了一些表单设计，但是我遇到了表单设置不正确的问题。

屏幕上只显示了一半的表格。我的屏幕分辨率是 1280*800，我想为每个屏幕分辨率设置我的窗体大小为固定大小，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T09:40:15.143

您可以将`System.Windows.Forms.Form.WindowState`属性设置为`FormWindowState.Maximized`或使用[Windows 窗体中的自动缩放](http://msdn.microsoft.com/en-us/library/ms229605.aspx)

# ruby-on-rails - 多个附件上的 Solr 索引

> ID：15473539
> 
> 赞同：0
> 
> 时间：2013-03-18T09:35:56.687
> 
> 标签：ruby-on-rails, ruby, solr

我正在努力寻找解决方案来解决我试图根据关联索引附件的情况。

更详细地解释它：

 `````
Model: job.rb
has_many :job_attachments
attachment :document_attachment, :multiple=>true
def document_attachment
    job_attachments.map do |j|
        "#{Rails.root}/public/#{j.attachment.url}"
    end
end 
````  ``````
Model job_attachment.rb
belongs_to :job
has_attached_file :attachment,
  :url  => "/system/attachment/:job_id/:basename.:extension" 
````  `在此之后，每当我运行 rake sunspot:reindex 时，我的文档都没有被索引，也没有出现任何错误。rake 任务正在成功执行。我在这里做错了吗？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:52:58.077

不确定 Solr gem 如何处理它，但 Solr Extract Handler 仅支持每个文档一个附件（除非在 4.X 中更改）

Solr 确实允许对 zip 文件进行索引（[patch](https://issues.apache.org/jira/browse/SOLR-2416)），这将索引文件的内容。
因此，您可以将文件打包成一个 zip 文件并将其提供给 Solr，该文件将被索引为单个文档。````

# java - 在Android中计算距离

> ID：15473545
> 
> 赞同：0
> 
> 时间：2013-03-18T09:36:11.553
> 
> 标签：java, android, distance

我想用它来计算我当前位置和标记之间的距离

```
private double distance(double lat1, double lon1, double lat2, double lon2) {
  double theta = lon1 - lon2;
  double dist = Math.sin(deg2rad(lat1)) * Math.sin(deg2rad(lat2)) +   Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.cos(deg2rad(theta));
  dist = Math.acos(dist);
  dist = rad2deg(dist);
  dist = dist * 60 * 1.1515;
   return (dist);
}

  private double deg2rad(double deg) {
  return (deg * Math.PI / 180.0);
}
private double rad2deg(double rad) {
  return (rad * 180.0 / Math.PI);
} 
```

我可以通过将其放入 onLocationChanged 方法来定期更新它吗？我知道这`proximity`将是一个更优雅的解决方案，但我遇到了问题，而且我的日程安排很紧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:46:16.863

看看[计算纬度/经度点之间的距离、方位角等](http://www.movable-type.co.uk/scripts/latlong.html)。

```
private double distance(double lat1, double lon1, double lat2, double lon2) {
    int R = 6371; //km
    double dLat = deg2rad(lat1 - lat2);
    double dLon = deg2rad(lon1 - lon2);
    double a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2); 
    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
    return c * R;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:59:28.633

试试这个代码来计算距离。

```
 public double CalculationByDistance(GeoPoint StartP, GeoPoint EndP) {  
  double lat1 = StartP.getLatitudeE6()/1E6;  
  double lat2 = EndP.getLatitudeE6()/1E6;  
  double lon1 = StartP.getLongitudeE6()/1E6;  
  double lon2 = EndP.getLongitudeE6()/1E6;  
  double dLat = Math.toRadians(lat2-lat1);  
  double dLon = Math.toRadians(lon2-lon1);  
  double a = Math.sin(dLat/2) * Math.sin(dLat/2) +  
     Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *  
     Math.sin(dLon/2) * Math.sin(dLon/2);  
  double c = 2 * Math.asin(Math.sqrt(a));  
  return Radius * c;  
 } 
```

# php - 邮件在 PHP 中运行（使用：to、from、cc、header、attachment）并进行验证？

> ID：15473547
> 
> 赞同：-3
> 
> 时间：2013-03-18T09:36:17.060
> 
> 标签：php

我如何使用邮件发送电子邮件以使用带有附件的 PHP 并在发送之前验证电子邮件..（使用：to、from、cc、header、attachment）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:39:06.743

这里有一些有用的链接来使用 PHP 发送邮件，希望你能自己弄清楚。

**使用 PHP`mail()`函数**

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

**使用 PHPMailer 库**

[https://code.google.com/a/apache-extras.org/p/phpmailer/](https://code.google.com/a/apache-extras.org/p/phpmailer/)

**对于验证**，用于`filter_var`验证电子邮件或任何数据

[http://www.php.net/manual/en/function.filter-var.php](http://www.php.net/manual/en/function.filter-var.php)

示例： http: [//php.net/manual/en/filter.examples.validation.php](http://php.net/manual/en/filter.examples.validation.php)

# php - 来自mysql的分页php

> ID：15473549
> 
> 赞同：0
> 
> 时间：2013-03-18T09:36:26.647
> 
> 标签：php, pagination

请不要关闭我的类别页面的分页真的需要帮助。我用聪明的。我的主页分页工作正常。我也希望类别页面也一样。我的桌子

```
1\. products-(contains image, details). 
2\. product_tags-(contains tag, perma) 
3\. product_tag_joins-(contains tag_id, product_id) 
```

**我的 category.php 代码：**

此代码工作正常，根据类别名称显示产品。请对此进行分页。

```
if (@$tag){
$tag = $product->getCategoryByPerma($tag);
if ($tag){
    $tagid = $tag['id'];
    $tag = $tag['tag'];

    $tagproducts = $product->getProductsByCategory($tagid);
    if (!count($tagproducts)){
        $tagproducts = '';
    } else {
    sort($tagproducts);
        foreach($tagproducts as $key => $val){
            @extract($val);
            $description = nl2br(stripslashes($description));
            if (strlen($description)>=220) $description = substr($description,0,220)."...";
            $tagmovies[$key]['description']=$description;
            $tagmovies[$key]['title']=stripslashes($title);
        }
    }
    $smarty->assign("tagproducts",$tagproducts);

}} else {$tag = '';}$seodata['category']=$tag;$smarty->assign("tag",$tag); 
```

与`getCategoryByPerma:`

```
public function getCategoryByPerma( $perma );
{
    $perma = mysql_real_escape_string( $perma );
    if ( !( $e = mysql_query( "SELECT id,tag FROM product_tags WHERE perma='{$perma}'" ) ) )
    {
        exit( mysql_error( ) );
    }
    if ( mysql_num_rows( $e ) )
    {
        extract( mysql_fetch_array( $e ) );
        return array(
            "id" => $id,
            "tag" => $tag
        );
    }
    return "";
} 
```

与`getProductsByCategory`

```
public function getProductsByCategory( $tagid )
{
    $tagid = mysql_real_escape_string( $tagid );
    if ( !( $e = mysql_query( "SELECT * FROM products WHERE id IN (SELECT product_id FROM product_tags_join WHERE tag_id='{$tagid}')" ) ) )
    {
        exit( mysql_error( ) );
    }
    $product = array( );
    while ( mysql_num_rows( $e ) && ( $s = mysql_fetch_array( $e ) ) )
    {
        extract( $s );
        $products[$id] = array( );
        $products[$id]['title'] = $title;
        $products[$id]['description'] = $description;
        $products[$id]['thumbnail'] = $thumb;
        $products[$id]['permalink'] = $perma;
    }
    return $products;
} 
```

这是我的分页主页 php 代码，它工作正常。我也希望类别页面也一样。

```
$maxperpage = $settings->getSetting("maxproductsperpage"); $displaymode = $settings->getSetting("display_mode_product");   if (!@$p) $p = 1;if (((is_array($displaymode)) && (empty($displaymode))) || ($displaymode==0)){
if ($maxperpage){
    $count = $product->getRealProductCount();
    $productlist = $product->getRealProduct($p,$maxperpage);
    if ($seolinks){
        $pagination = $product->getBasicPagination($count,$p,$maxperpage,$baseurl."/products/");
    } else {
        $pagination = $product->getBasicPagination($count,$p,$maxperpage,$baseurl."/index.php?menu=products&p=");
    }
} else {
    $productlist = $product->getRealProducts();
    if ($seolinks){
        $pagination = '<a href="'.$baseurl.'/products">1</a>';
    } else {
        $pagination = '<a href="'.$baseurl.'/index.php?menu=products">1</a>';
    }
}

if (count($productlist)){
    foreach($productlist as $key => $val){
        @extract($val);
        $description = nl2br(stripslashes($description));
        if (strlen($description)>=380) $description = substr($description,0,380)."...";
        $productlist[$key]['description']=$description;
        $productlist[$key]['title']=stripslashes(stripslashes($title));
    }
} else {
    $productlist = '';
}

$smarty->assign("productlist",$productlist);
$smarty->assign("pagination",$pagination);
$smarty->assign("displaymode","0");} 
 else {
    $productlist = '';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:07:30.957

下面我列出了一些资源链接，这些链接可能会让您开始尝试实现的目标

[**Smarty Paginate**](http://www.phpinsider.com/php/code/SmartyPaginate/)是一个与 smarty 模板引擎一起工作的分页插件。

一些与该主题相关的 SO 链接

[使用 Smarty 进行分页（上一个 | 下一个）](https://stackoverflow.com/questions/6491431/pagination-previous-next-with-smarty)

[php-sql-smarty 分页](https://stackoverflow.com/questions/7314794/php-sql-smarty-pagination)

浏览这些资源并找到[更多](http://google.com)资源，然后在实施解决方案时询问您是否遇到任何*特定*问题/错误

# c# - 字符串操作和拆分

> ID：15473552
> 
> 赞同：0
> 
> 时间：2013-03-18T09:36:54.963
> 
> 标签：c#, string, c#-4.0, ascii

我有一个数据`string data2 = " %04%02%BC%94%BA%15%E3%AA%08%00%7F%00";`，我试图将`%`符号之间的每两位数字分开并将其放入一个数组中。

除此之外，如果有多余的数字，即多于 2 位，则转换为十六进制并将其添加到数组中。

我的代码有时可以工作，但是当我在倒数第二个位置添加额外的数字时，它会给出错误的值。

```
 string data = " %04F%02%BC%94%BA%15%E3%AA%08%00%7FF%00";

        List<string> Values = new List<string>();

        string[] val = Regex.Split(data2, "%");
        byte[] TempByte = new byte[val.Length - 1];

        for (int i = 0; i < val.Length; i++)
        {
            Values.Add(val[i]);

            if (Values[i].Length > 2)
            {
                //count
                int count = 0;
                int n = 2;                       //start from digit 2(if ther is any)
                foreach (char s in Values[i])
                {
                    count++;
                }
                int index = count - 2;         //index starting at 2

                while (n <= Values[i].Length -1)    
                {
                    string temp = string.Join(string.Empty, Values[i].Substring(n, 1).Select(c =>
                                                        ((int)c).ToString("X")).ToArray());

                    Values.Add(temp);
                    n = n + 1;
                }
                //remove the extra digit
                Values[i] = Values[i].Replace(Values[i].Substring(2, 1), string.Empty);

            }
        }

        Values.RemoveAt(0);                        //since digit 0 is always zero
        string[] TagTemp = Values.ToArray();

//Convert to array

        for (int i = 0; i < val.Length - 1; i++)
        {
            TempByte[i] = Convert.ToByte(TagTemp[i], 16);
        } 
```

当额外的数字被添加到第一个位置时，即`04F`，输出是正确的：

![在此处输入图像描述](../Images/4649b795ff7c583a5eea2ba626d27d04.png)

当它被添加到倒数第二个位置时，即`7FF`代替`7F 46`它只给出`7`.

![在此处输入图像描述](../Images/8038732623ffa14b151312c1862ea3b9.png)

你们看到什么是错的以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:45:24.947

您不能将三位十六进制字符串转换为字节。一个字节可以容纳的最大值是 FF。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T11:42:05.217

```
 string data = " %04F%02%BC%94%BA%15%E3%AA%08%00%7FF%00";

     // You need to pick an encoding -- are these things ASCII?
     var encoding = Encoding.ASCII;
     var values = new List<byte>();

     // Walk over the data (note that we don't increment here).
     for (int i = 0; i < data.Length;)
     {
        // Is this the start of an escaped byte?
        if (data[i] == '%')
        {
           // Grab the two characters after the '%'.
           var escaped = data.Substring(i + 1, 2);
           //Console.WriteLine(escaped);

           // Convert them to a byte.
           byte value = Convert.ToByte(escaped, 16);
           values.Add(value);

           // Increment over the three characters making up the escaped byte.
           i += 3;
        }
        else
        {
           // It's a non-escaped character.
           var plain = data[i];
           //Console.WriteLine(plain);

           // Convert it to a single byte.
           byte[] bytes = encoding.GetBytes(new[] { plain });
           Debug.Assert(bytes.Length == 1);
           byte value = bytes[0];

           values.Add(value);

           // Increment over that character.
           i += 1;
        }
     }

     // Print it out, in hex, separated by commas.
     Console.WriteLine(string.Join(", ",
                       values.Select(v => string.Format("{0:X2}", v))));

     // Alternatively...
     Console.WriteLine(BitConverter.ToString(values.ToArray())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T09:49:53.553

`Values[i].Replace(Values[i].Substring(2, 1), string.Empty);`正在替换两个 F 而不仅仅是一个

[字符串.替换（）](http://msdn.microsoft.com/en-us/library/czx8s9ts.aspx)

有关位置替换的示例，请参见[这篇文章。](https://stackoverflow.com/questions/11050858/c-sharp-replace-string-by-position)

# c# - 需要高效稳定的 PriorityQueue 实现

> ID：15473554
> 
> 赞同：1
> 
> 时间：2013-03-18T09:36:59.573
> 
> 标签：c#, .net, algorithm, priority-queue

我有一个 A-* 的实现，用于最初使用[Eric Lippert 的使用 SortedDictionary 的 PriorityQueue 实现](http://blogs.msdn.com/b/ericlippert/archive/2007/10/10/path-finding-using-a-in-c-3-0-part-three.aspx)的棋盘游戏，但是对于我的棋盘大小来说，性能并不令人满意。

使用 PriorityQueue 的 MinHeap 实现给了我在长对角路径上的 *2 加速（5-6 秒降低到 2-3 秒）；但后来我意识到它提供了一种不稳定的排序。对于这个应用程序，我需要一个稳定的排序。

是否有任何众所周知的 PriorityQueue 实现结合了 MinHeap 的效率，但以 SortedDictionary 的方式提供了稳定的排序？

**更新：**来自以下评论的其他详细信息：

*   需要优先队列操作：Enqueue()、Dequeue() & Count；
*   在 A-* 的每次迭代中： IsEMpty 和 Dequeue() 每次调用一次，Enqueue() 调用 6 次；

**解析度：**

虽然 和 的复杂性`SortedDictionary<uint,Queue<TValue>>`相同`MinListHeap<KeyValuePair<TPriority,TValue>>`，但维护插入顺序的额外代码复杂性似乎是一个恒定的时间损失。这可能不是确定的，但我正在寻找在这个细化阶段容易实现的目标。

此外，当我更多地考虑这个问题时，我意识到稳定性只需要短路径，而不是长路径；因此可以根据从起点到目标的距离的初始启发式估计，在进入 FindPath() 时选择所需的 PriorityQueue 实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:50:03.633

这应该是一个评论，但它太长了。所以这里是：

在您建议的链接之后，我找不到优先级队列的实现作为排序字典，但是谷歌搜索表明这个优先级队列是使用二叉搜索树实现的。**如果**是这种情况，那么这些似乎不是自平衡搜索树，因为我不明白通过用堆替换 BST 会产生 2 倍的改进。自平衡 BST 在`insert()`和上为您提供有保证的 log(n) 性能`find()`。`deque()`(= )也是如此`removeMin()`：它也应该是一个有*保证*的log(n)：你只是向左走，直到没有更多的左孩子。

好的，所以对于二叉搜索树 (BST) 的每个操作，我们都有 log(n)。堆呢？好吧，对于您正在查看的操作，它是相同的：`removeMin()`(= `dequeue()`) 返回具有最高/最低键的节点（这是 O(1)），但随后将最后一个节点放在初始位置并将其下沉通过递归地比较它和它的孩子。这需要在每个级别进行 2 次比较，并且通常涉及 log(n) 级别。`removeMin()`O(log(n) ) 操作也是如此 。怎么样`insert()`（=`enqueue()`)? 在这里，在通常的实现中，我们将新项目放在最后，然后通过与其父项进行比较，将其浮动。在通常情况下，这需要 0.5*log(n) 次操作，即 O(log(n) )。这意味着 BST 和堆在 enqueue() 和 dequeue() 上都应该具有 log(n) 性能。并且两种数据结构都应该在`isEmpty()`.

这个推理，如果正确的话，表明以下之一：

*   BST 实现中的常数因子使 minHeap 优先级队列中的常数因子相形见绌
*   使用的 BST 不是自平衡的。

有人可能还认为`0.5*log(n)`heap on`insert()`可能比 BST 更好`insert()`，但是 BST 插入实际上也通常`0.5*log(n)`在现实中，所以我认为这不可能。常数因素是合理的：*如果*minHeap 被实现为自动调整大小的数组（或者更好的是非调整大小的数组），那么 minHeap 可能不需要在 上分配额外的存储空间`enqueue`，而 BST 实现必须这样做。

BST 也有可能不是自平衡的。在这种情况下，在最坏的情况下，the`dequeue()`或 the`enqueue()`将花费 O(n) 时间，具体取决于添加项目的顺序。所以这将是一些值得关注的事情。

**编辑1**：可以使常规BST实现稳定的方式是采用一种约定，即如果我们插入具有相同键的节点，则新节点将成为（例如）具有相同键的节点的右子节点。这样，具有相同键的第一个节点将被出列。对于自平衡 BST，这可能需要更多的工作，因为旋转可能会违反这个期望的不变量。在这种情况下，我想我会做什么（考虑[红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)，而不是[AVL 树](http://en.wikipedia.org/wiki/AVL_tree)）是在旋转两个节点时 A 和 BI 会检查它们的键是否实际上相同，如果是，则切换节点数据同时保持节点结构。但是对于这个问题可能有更好的解决方案。

**EDIT 2** According to [this acticle](https://www.simple-talk.com/blogs/2011/10/05/sorteddictionary-and-sortedlist/), SortedDictionary is in fact based on red-black tree. This in turn suggests either a bug in the implementation (doubtful but not unheard of) or constant factors as a culprit.

# php - 如何制作缩略图？

> ID：15473556
> 
> 赞同：0
> 
> 时间：2013-03-18T09:37:04.827
> 
> 标签：php, web, thumbnails

嘿，我有一个任务，我需要制作一个画廊。我现在的这段代码只显示了图片，但我想为这些图片制作缩略图。

我怎样才能做到这一点？有什么建议么？

```
<html>
<head>
<style type="text/css"> 

ul {
    list-style:none;
}

</style>

</head>
<body>
<ul>
<?php
    $imgdir = 'images/';
    $allowed_types = array('png', 'jpg', 'jpeg', 'gif');
    $dimg = opendir($imgdir);
    while($imgfile = readdir($dimg)) {
        if(in_array(strtolower(substr($imgfile, -3)), $allowed_types) or in_array(strtolower(substr($imgfile, -4)), $allowed_types)) {
            $a_img[] = $imgfile; 
        }
    }
    echo "<ul>";

    $totimg = count($a_img);
    for($x=0; $x < $totimg; $x++) {
        echo "<li><img src='" . $imgdir . $a_img[$x] . "' /></li>";
    }
    echo "</ul>";

?>
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:40:19.943

试试[想象](http://imagine.readthedocs.org/en/latest/)库。它是强大的图像处理库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:45:24.667

这个问题/答案将帮助您，并让您了解如何重新调整图像大小。

[PHP中的图像大小调整](https://stackoverflow.com/questions/1533639/image-resize-issue-in-php-gd-creates-ugly-resized-images)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T09:53:39.127

您可以使用`Imagick`扩展程序。

像这样的东西：

```
<?php

header('Content-type: image/jpeg');

$image = new Imagick('tc5.jpg');

// If 0 is provided as a width or height parameter,
// aspect ratio is maintained
$image->thumbnailImage(100, 0);

echo $image;

?> 
```

[http://php.net/manual/en/imagick.cropthumbnailimage.php](http://php.net/manual/en/imagick.cropthumbnailimage.php)

# jquery - jQuery通过API调用在DIV中填充HTML代码

> ID：15473557
> 
> 赞同：0
> 
> 时间：2013-03-18T09:37:12.160
> 
> 标签：jquery

我有一个通过调用以下函数显示 DIV 的超链接：

```
<div id="btn" onclick="showUI()">I'm a button</div>
<div id="panel" style="display: none">I'm hidden initially.</div>
<script>
function showUI(element) {
    $('#panel').html('Loading...');
    $('#panel').show();
    var content = api_call();
    $('#panel').html(content);
    return false;
}
function api_call() {
    $.ajax({
        type: 'POST',
        url: 'ajax/myAPI/',
        async: false,
        data: {q: 'fetch_sth_great', id: 1, token: '123456'},
        success: function(data, status, xhr) {
            return data;
        }
    }).fail(function(xhr, status) {
        if (status == "error") {
            return "Sorry but there was an error: " + xhr.status + " " + xhr.statusText;
        }
    });
}
</script> 
```

在 Google Chrome 的开发控制台中，AJAX 调用以结构良好的 XML 响应，其中包含我想在 DIV 中显示的内容`$('#panel')`和 status `200 OK`。但是，该函数`api_call()`返回`undefined`.

但是，当我将以下代码用于另一个 API 调用时，DIV 已成功填充数据。

```
$('#panel').load('ajax/myAPI/', {q: 'fetch_sth_great', id: id, token: '123456'}, function(response, status, xhr) {
        if (status == "error") {
            var msg = "Sorry but there was an error: ";
            $("#panel").html(msg + xhr.status + " " + xhr.statusText);
        }
    }); 
```

我正在尝试通过 onclick 函数从我的 API 中获取内容（返回有效的 XML / HTML 内容），并将其显示在特定的 DIV 中。但在显示响应内容之前，我必须在其前后添加更多内容。因此，我不能使用`$.load()`方法。

我在上面的代码中错过了什么？

将 jQuery 1.9.1 与 jQuery Migrate 1.1.0 一起使用

*注意：*整个过程中没有 JavaScript 或服务器端错误。

**更新：** XML 返回的示例 XML 内容

```
<?xml version="1.0" encoding="utf-8" ?>
<response>
  <ui><![CDATA[some html here]]></ui>
</response> 
```

我想获取xpath的内容：`/response/ui`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:15:53.740

我会这样做

```
<div id="btn" onclick="showUI()">I'm a button</div>
<div id="panel" style="display: none">I'm hidden initially.</div>
<script>
function showUI(element) {
    $('#panel').html('Loading...');
    $('#panel').show();
    api_call(function(content){
            //Note: Content would be the XML returned from the AJAX call
            // So traversing to find the data required would need to be done here
            // Something like:
            var exValue = $(content).find('node').text();
            $('#panel').html(exValue);
        });

    return false;
}
function api_call(successCallback) {
    $.ajax({
        type: 'POST',
        url: 'ajax/myAPI/',
        async: false,
        data: {q: 'fetch_sth_great', id: 1, token: '123456'},
        success: function(data, status, xhr) {
            successCallBack(data);
        }
    }).fail(function(xhr, status) {
        if (status == "error") {
            return "Sorry but there was an error: " + xhr.status + " " + xhr.statusText;
        }
    });
}
</script> 
```

# delphi - 为什么 TJvFormStorage 不能正确存储表单位置？

> ID：15473558
> 
> 赞同：1
> 
> 时间：2013-03-18T09:37:15.743
> 
> 标签：delphi, jedi, jvcl, tform

我有一个名为`fmTest`. 如果程序终止，我使用[JVCL](http://jvcl.delphi-jedi.org/) [TJvFormStorage](http://wiki.delphi-jedi.org/wiki/JVCL_Help%3aTJvFormStorage)将表单位置、表单大小和表单位置存储在 INI 文件中。

但是，如果我尝试在运行时将 windows 控件拖到底部，直到它只在任务栏附近看到标题部分，然后我释放它并终止程序，程序`fmTest`启动时不会在该位置启动再次。

有人建议我使用`StoredProps`and`StoredValues`方法，`TJvFormStorage`但我真的不明白如何使用这些方法。

为什么 TJvFormStorage 不能正确存储表单位置？有什么方法可以正确存储表单位置`TJvFormStorage`吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:22:25.777

当表单关闭时，实际保存在 INI 文件中的是什么？

也许，只是也许，JFS 偶尔会采取措施不将表格带到显示之外，从而忽略太极端的值。尝试跟踪 INI 加载序列以查看它在哪种情况下被忽略。要缩小目标，请尝试发布和跟踪[`RestorePlacement`](http://wiki.delphi-jedi.org/wiki/JVCL_Help%3aTJvFormStorage.RestorePlacement)方法。

现在您已经引用了 ini 文件，这似乎是正确的行：*NormPos=135,734,623,1367* 因此，再次添加对上述的调用`RestorePlacement`并逐行跟踪它。您会看到未读取 INI 文件或未应用值。

很可能你会`procedure InternalRestoreFormPlacement`以`JvJVCLUtils.pas`. 继续跟踪它以查看未从 INI 读取数据或未能分配数据的位置和原因。

同样，即使您无法解决，您还有两个选择：

1.  使用`StoredProps`属性（非方法）很简单：双击 JSF 组件，将 Form 的 Left/Top/Width/Height 属性添加到保存列表中，`form position`然后从保存列表中取消选中。

2.  使用`StoredValues`属性（不是方法）很简单：双击pproperty，然后添加一个字符串属性或4个整数属性。使用组件`OnRestorePlacement`和`OnSavePlacement`事件将它们从/更新到表单的实际位置。

PS。采取安全措施，如果用户更改显示、显示计数或显示分辨率，则窗口不会位于屏幕之外。

聚苯乙烯。JvFormPlacement 和 JvFormStorage 示例可以检查为 d:\DelphiProjects\Libs\JediVCL\jvcl\examples\JvAppStorage\*.*

购买力平价。JediVCL 官方论坛在[http://newsportal.delphi-jedi.org/index.php](http://newsportal.delphi-jedi.org/index.php)

# ios - NSXMLParser，如何知道标签中写入的编码和版本（如果存在）

> ID：15473559
> 
> 赞同：2
> 
> 时间：2013-03-18T09:37:16.823
> 
> 标签：ios, objective-c, xml, xml-parsing, nsxmlparser

正如标题所说，当我使用 NSXMLParser 解析器解析文件时，有没有办法知道标签是否存在？而且，如果是，我怎样才能获得其属性的值（如果存在）？

我尝试了 NSXMLParserDelegate 的所有方法，但没有一个能解决我的问题……我应该手动解析那个标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:54:18.640

理论上，您应该收到一个`-foundProcessingInstructionWithTarget:data:`委托回调，但实际上这不会发生（至少在 iOS 上，我没有检查 OS X）。

如果您想明确检查，您将需要自己解析文件的开头，寻找 XML 指令。简短的读取和扫描`NSScanner`可能就足够了（通过使用`NSScanner`而不是简单的字符串测试，您将获得更好的空白处理）。

显然，这不是您最初要寻找的答案，但由于 XML 无论如何都会有一个声明的字符集，您可能只想用`utf-8`声明写出来，并假定任何正在读取您修改的文件的内容（因为如果相同则不需要重写），还可以读取处理指令并正确处理字符集。

# ajax - 两个 Ajax 调用并在同一页面上返回

> ID：15473563
> 
> 赞同：0
> 
> 时间：2013-03-18T09:37:35.553
> 
> 标签：ajax

我试图弄清楚如何对从以前的 ajax 调用返回的 php 表单进行 ajax 调用。

第一个电话工作正常：

```
 function submit() {
    $input = $("#search_bar").val();

    $.ajax({
    type: "POST",
    url: "search.php",
    data: "input="+$input,
    success: function(result) {
        $("#results_box").html(result).show();
    }
});

return false; 
```

};

它返回一个表单，其中包含搜索字段中请求的信息。我的第二个 ajax 调用将引用第一个 ajax 调用返回的表单，这就是我卡住的地方。

所以我的问题是：如何使用 ajax 调用请求的表单并再次使用 ajax 提交此表单数据？

# json - 将 JSONObject 传递给 JSP 并打印数据

> ID：15473568
> 
> 赞同：0
> 
> 时间：2013-03-18T09:37:58.207
> 
> 标签：json, jsp

在 servlet 中，我创建了一个 JSONObject 并将该对象传递给 JSP。

```
JSONObject jo=new JSONObject();
jo.put("site","java4s.com");
jo.put("content","Java");
jo.put("TotalLinks",927);
HttpSession session=request.getSession(true);
session.setAttribute("jsonObject", jo);
RequestDispatcher rd = request.getRequestDispatcher("viewpage.jsp");
rd.forward(request, response); 
```

这是我的 JSP 页面

```
<%@page import="com.google.gson.JsonObject"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>View Json</title>
<%
JSONObject jsonObject=(JSONObject)session.getAttribute("jsonObject");
%>

</head>
<body>
<h6>JSON View</h6>
<br>
<%=jsonObject%>
</body>
</html> 
```

但是 JSP 页面显示**JSONObject**无法解析为类型的错误。但是我已经添加了 jar 文件，并且在 Servlet 中它没有显示错误。我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:40:05.580

将页面导入：更改`<%@page import="com.google.gson.JsonObject"%>`为`<%@page import="com.google.gson.JSONObject"%>`

注意**`JSON`**in `JSONObject`。

# jquery - 将表单变量动态传递给 Django 模板标签

> ID：15473569
> 
> 赞同：0
> 
> 时间：2013-03-18T09:37:59.560
> 
> 标签：jquery, django

我想动态地将一个变量传递给 django 模板标签，但我无法成功。

```
<input id="country" />
<div id="button"> Button </div>

$('#button').click(function(){
    var dynamicVar=$('#country').val(); 
    var tags= {    
    source: {% url myView dynamicVar %}  /* but {% url myView 'someValue' %} works */
    select: function(event, s){
        $("#city").val(s.label);
        };
    $("#city").autocomplete(tags);
}); 
```

我收到这个 NoReverseMatch 错误，说 dynamicVar 没有通过。

长话短说：我正在尝试获取 2 个级联下拉列表。用户选择一个国家，然后城市输入变为可用。我希望城市字段是自动完成的字段。目前，没有国家字段，它可以工作，但查询很慢。所以我想预先过滤它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:17:36.737

`{% url myView dynamicVar %}`在服务器端呈现，因此您必须：

```
var dynamicVar = $('#country').val(); 
var url = 'http://your_site.com/autocomplete_country/' + dynamicVar + '/' 
```

为避免在模板中硬编码服务器名称，请使用[`request.get_host`](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.get_host)

# git - git am 从我的提交消息中阻塞字符

> ID：15473573
> 
> 赞同：3
> 
> 时间：2013-03-18T09:38:08.357
> 
> 标签：git, format-patch, git-am

我在我的 git 提交消息中使用了一些私有注释。

例如，当我修复 module`MOD_A`中的某些内容时，提交消息如下所示：

```
FIX [MOD_A] Fixed something 
```

只要`FIX`前面有`[MOD_A]`，如果我使用生成补丁，一切正常

```
git format-patch 
```

将此补丁作为附件发送到某个地方，然后使用

```
git am --keep-cr *.patch 
```

为了将此提交存储在另一个仓库中。

**但是：**如果我在(ie )`FIX`前面没有，则在做. 整个提交消息只是.`[MOD_A]``[MOD_A] Fixed something``git am``Fixed something`

我的怀疑是它与生成的电子邮件**主题**`git format-patch`行的格式有关：

```
Subject: [PATCH 23/27] [MOD_A] Fixed something 
```

似乎是因为`[PATCH 23/27]`被括在方括号中，也`[MOD_A]`被忽略了。

有没有办法让我`[MOD_A]` **不**被忽视？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:51:26.150

如果您可以在不`[PATCH x/x]`自动添加到主题行的情况下生活，那么您可以这样[`git format-patch -k`](https://www.kernel.org/pub/software/scm/git/docs/git-format-patch.html)做[`git am -k ...`](https://www.kernel.org/pub/software/scm/git/docs/git-am.html)

我认为只是将您的补丁推送到另一个仓库不是一种选择

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-09T18:44:51.153

使用 git 作为版本 '1.8.4' （可能之前），您还可以使用：`git am --keep-non-patch`. 它将`-b`标志传递给`git mailinfo`：

> -b
> 
> ```
>  When -k is not in effect, all leading strings bracketed with [ and ] 
>        pairs are stripped. This option limits the stripping to only the pairs
>        whose bracketed string contains the word "PATCH". 
> ```

伊曼纽尔

# ruby-on-rails-3 - RoR + Gem execjs-1.4.0/lib/execjs/run times.rb:51:in `autodetect': 找不到 JavaScript 运行时

> ID：15473580
> 
> 赞同：1
> 
> 时间：2013-03-18T09:38:38.437
> 
> 标签：ruby-on-rails-3

在 Windows 平台上，我正在尝试运行我的一个应用程序，但在控制台上却出现了一些奇怪的问题。

> 问题：C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/run times.rb:51:in `autodetect': 找不到 JavaScript运行。有关可用运行时的列表，请参阅 https://github.com/sstephenson/execjs。

我没有在我的 Gemfile 中添加 execjs gem，但即使它在列表中显示 gem 的名称。即使我尝试卸载它，但在运行 bundle install 时再次出现，它再次出现。正因为如此，我无法运行控制台。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:41:15.547

经过大量谷歌搜索后，我发现由于一些依赖关系，安装了 execjs。安装包时，由于 sprockets 依赖关系，execjs 会被加载到机器中。

> 第 1 步：从 C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems 中删除文件夹 'execjs-1.4.0'
> 
> 第 2 步：使用 gem 卸载从系统中删除依赖项（ sprockets gem ）。
> 
> 第 3 步：删除 Gemfile.lock 并运行捆绑安装

这样，我的机器上的问题就解决了。非常感谢 Thomas 的宝贵建议。

**更新：2013 年 3 月 26 日**

参考此链接安装 NODE.JS ->[点击这里](https://stackoverflow.com/questions/12520456/execjsruntimeerror-on-windows-7-trying-to-follow-rubytutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T03:44:26.187

将此行添加到 Gemfile

```
gem 'therubyracer' 
```

然后运行*捆绑安装*

# php - WordPress 和 APC 的“无法为池分配内存”

> ID：15473581
> 
> 赞同：1
> 
> 时间：2013-03-18T09:38:39.133
> 
> 标签：php, wordpress, apc

我有一个典型的 cPanel 服务器运行我正在运行大约 20 个小型 WordPress 站点的常规服务器。每个站点都安装了 W3TC，并使用推荐的设置进行了配置。服务器有 2GB 的 RAM。

现在，每隔一段时间，我就会遇到“无法分配内存池”错误。我已经多次详细地研究了[这个特定的问题及其答案。](https://stackoverflow.com/questions/3723316/what-is-causing-unable-to-allocate-memory-for-pool-in-php)我已经尝试了那里的建议，但没有帮助，所以我希望能为我的案例得到一些答案。

APC shmsize 目前设置为 256M。APC.ttl 为 120，APC.gc_ttl 为 3600。

为什么我仍然看到错误？是否建议我进一步增加 shmsize？还是我在这里遗漏了其他东西？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T18:29:35.503

1.  请记住在更改配置后重新启动您的 WEB 服务器（apache、php-fpm 或其他）。

2.  如果错误仍然存​​在，您可以添加更多内存（尝试 400M 甚至更多），20 个小站点，可能有大量文件要存储在缓存中。请记住，您的服务器仅限于 2GB 内存。

3.  您也可以将 gc_ttl 更改为 1800 （这将减少存储时间，但如果您的每个站点的流量都很小，则会对您有所帮助）

4.  如果您仍然有问题，您应该配置 apc 状态页面，并检查您的服务器中的 APC 使用情况。这篇文章可以帮助你：[http ://www.cyberciti.biz/faq/linux-unix-php-warning-unable-to-allocate-memory-for-pool/](http://www.cyberciti.biz/faq/linux-unix-php-warning-unable-to-allocate-memory-for-pool/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T10:55:19.923

更改您的 apc.ini 设置，如下所示

```
apc.mmap_file_mask=/dev/zero
apc.shm_size=64M
apc.ttl=0 
```

有用

参考[apc.configuration.php](http://php.net/manual/en/apc.configuration.php)

# java - Amazon S3 预签名 URL 转义密钥中的斜杠

> ID：15473582
> 
> 赞同：5
> 
> 时间：2013-03-18T09:38:42.380
> 
> 标签：java, amazon-s3, urlencode

我正在使用 Java Amazon SDK 与 S3 一起存储上传的文件。我想保留原始文件名，并将其放在密钥的末尾，但我也在使用虚拟目录结构 - 类似于`<dirname>/<uuid>/<originalFilename>`.

问题是，当我想使用 api 生成预签名 URL 以进行下载时，例如：

```
URL url = s3Client.generatePresignedUrl(generatePresignedUrlRequest);
return url.toExternalForm(); 
```

sdk url 转义了整个密钥，包括斜杠。虽然它仍然有效，但这意味着下载的文件的名称包括整个密钥，而不是最后的原始文件名位。我知道在不转义斜杠的情况下应该可以做到这一点，但我试图避免重写 SDK 中已有的大量代码。有一个通用的解决方案吗？我知道我使用的网络应用程序遵循相同的模式并且没有斜线转义问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T17:03:13.820

这是当前 Java SDK 中的一个错误：

如果您查看[https://github.com/aws/aws-sdk-java/blob/master/src/main/java/com/amazonaws/services/s3/AmazonS3Client.java#L2820](https://github.com/aws/aws-sdk-java/blob/master/src/main/java/com/amazonaws/services/s3/AmazonS3Client.java#L2820)

内部调用的方法 presignRequest 代码如下：

```
 String resourcePath = "/" +
        ((bucketName != null) ? bucketName + "/" : "") +
        ((key != null) ? ServiceUtils.urlEncode(key) : "") +
        ((subResource != null) ? "?" + subResource : ""); 
```

密钥是在签名之前在这里编码的 URL，我认为这是错误的。

您也许可以继承`AmazonS3Client`并覆盖该函数来解决此问题。

在某些地方，建议使用`url.getQuery()`原始 awsURL ( [https://forums.aws.amazon.com/thread.jspa?messageID=356271](https://forums.aws.amazon.com/thread.jspa?messageID=356271) ) 并为其添加前缀。但是，正如您自己所说，这会产生错误，因为资源密钥与签名不匹配。

以下问题也可能与此有关，我没有查看建议的解决方法：

[如何使用 amazon sdk 为虚域生成预签名的 Amazon S3 url？](https://stackoverflow.com/questions/9592298/how-to-generate-pre-signed-amazon-s3-url-for-a-vanity-domain-using-amazon-sdk/9592937#comment12386535_9592937)

亚马逊之前发现并修复了一个类似的错误： [https ://forums.aws.amazon.com/thread.jspa?messageID=418537](https://forums.aws.amazon.com/thread.jspa?messageID=418537)

所以我希望它会在下一个版本中得到修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:32:20.567

我仍然希望有一个比这更好的解决方案，但是看到@aKzenT 已经证实了我的结论，即我写了一个没有解决方案的现有解决方案。它只是 AmazonS3Client 的一个简单子类。我担心它很脆弱，因为我不得不从我覆盖的方法中复制很多代码，但这似乎是最简单的解决方案。我可以确认它在我自己的代码库中运行良好。[我在gist](https://gist.github.com/genericallyloud/5221160)中发布了代码，但为了获得完整的答案：

```
import com.amazonaws.AmazonWebServiceRequest;
import com.amazonaws.HttpMethod;
import com.amazonaws.Request;
import com.amazonaws.auth.AWSCredentials;
import com.amazonaws.handlers.RequestHandler;
import com.amazonaws.services.s3.AmazonS3Client;
import com.amazonaws.services.s3.Headers;
import com.amazonaws.services.s3.internal.S3QueryStringSigner;
import com.amazonaws.services.s3.internal.ServiceUtils;

import java.util.Date;

/**
 * This class should be a drop in replacement for AmazonS3Client as long as you use the single credential
 * constructor. It could probably be modified to add additional constructors if needed, but this is the one we use.
 * Supporting all of them didn't seem trivial because of some dependencies in the original presignRequest method.
 *
 * The only real purpose of this class is to change the behavior of generating presigned URLs. The original version
 * escaped slashes in the key and this one does not. Pretty url paths are kept intact.
 *
 * @author Russell Leggett
 */
public class PrettyUrlS3Client extends AmazonS3Client{
    private AWSCredentials awsCredentials;

    /**
     * This constructor is the only one provided because it is only one I needed, and it
     * retains awsCredentials which might be needed in the presignRequest method
     *
     * @param awsCredentials
     */
    public PrettyUrlS3Client(AWSCredentials awsCredentials) {
        super(awsCredentials);
        this.awsCredentials = awsCredentials;
    }

    /**
     * WARNING: This method is an override of the AmazonS3Client presignRequest
     * and copies most of the code. Should be careful of updates to the original.
     *
     * @param request
     * @param methodName
     * @param bucketName
     * @param key
     * @param expiration
     * @param subResource
     * @param <T>
     */
    @Override
    protected <T> void presignRequest(Request<T> request, HttpMethod methodName, String bucketName, String key, Date expiration, String subResource) {

        // Run any additional request handlers if present
        if (requestHandlers != null) {
            for (RequestHandler requestHandler : requestHandlers) {
                requestHandler.beforeRequest(request);
            }
        }
        String resourcePath = "/" +
                ((bucketName != null) ? bucketName + "/" : "") +
                ((key != null) ? keyToEscapedPath(key)/* CHANGED: this is the primary change */ : "") +
                ((subResource != null) ? "?" + subResource : "");

        //the request apparently needs the resource path without a starting '/'
        request.setResourcePath(resourcePath.substring(1));//CHANGED: needed to match the signature with the URL generated from the request
        AWSCredentials credentials = awsCredentials;
        AmazonWebServiceRequest originalRequest = request.getOriginalRequest();
        if (originalRequest != null && originalRequest.getRequestCredentials() != null) {
            credentials = originalRequest.getRequestCredentials();
        }

        new S3QueryStringSigner<T>(methodName.toString(), resourcePath, expiration).sign(request, credentials);

        // The Amazon S3 DevPay token header is a special exception and can be safely moved
        // from the request's headers into the query string to ensure that it travels along
        // with the pre-signed URL when it's sent back to Amazon S3.
        if (request.getHeaders().containsKey(Headers.SECURITY_TOKEN)) {
            String value = request.getHeaders().get(Headers.SECURITY_TOKEN);
            request.addParameter(Headers.SECURITY_TOKEN, value);
            request.getHeaders().remove(Headers.SECURITY_TOKEN);
        }
    }

    /**
     * A simple utility method which url escapes an S3 key, but leaves the
     * slashes (/) unescaped so they can stay part of the url.
     * @param key
     * @return
     */
    public static String keyToEscapedPath(String key){
        String[] keyParts = key.split("/");
        StringBuilder result = new StringBuilder();
        for(String part : keyParts){
            if(result.length()>0){
                result.append("/");
            }
            result.append(ServiceUtils.urlEncode(part));
        }
        return result.toString().replaceAll("%7E","~");
    }
} 
```

*更新*我更新了要点和此代码以解决我遇到的问题 ~'s。即使使用标准客户端也会发生这种情况，但取消转义 ~ 修复了它。有关更多详细信息/跟踪我可能进行的任何进一步更改，请参阅要点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-07T14:46:49.050

Java SDK 1.4.3 版似乎已经解决了这个问题。也许，它早先已修复，但我可以确认它在 1.4.3 中正常工作。

# iphone - 我们可以将 NSDecimal 值转换为 UIImage 吗？

> ID：15473587
> 
> 赞同：4
> 
> 时间：2013-03-18T09:39:12.960
> 
> 标签：iphone, ios, objective-c, image, nsdecimalnumber

我正在发送一些数据并将 UIImage（将 UIImage 转换为 NSData）发送到服务器，我的客户端正在返回我们发送的响应。

但是，这里我的客户给 UIImage 像下面的格式

```
FaceImage":[255,216,255,224,0,16,74,70,73,70,0,1,1,1,1,44,1,44,0,0,255,219,0,67,0,8,6,6,7,6,5,8,7,7,7,9,9,8,10,12,20,13,12,11,11,12,25,18,19,15,20,29,26,31,30,29,26,28,28,32,36,46,39,32,34,44,35,28,28,40,55,41,44,48,49,52,52,52,31,39,57,61,56,50,60,46,51,52,50,255,219,0,67,1,9,9,9,12,11,12,24,13,13,24,50,.................................................................] 
```

我测试了上面的一个来测试我们使用这个日志得到的结果

```
NSLog(@"testingImageView.image is =%@",[[[datadic valueForKey:@"FaceImage"] objectAtIndex:0] class]); 
```

**响应是：** testingImageView.image 是 =NSDecimal。

如果是 NSData 我们可以转换成 UIImage，但是这里是十进制格式。

我的问题是，我可以将其转换为 UIImage 吗？即，UIImage 的十进制值。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T09:53:28.803

您的响应包含所有图像字节作为十进制数字。（`255,216`是`FF,D8`十六进制，表示 JPEG 图像的开始）。以下代码应该可以`UIImage`从数字数组中创建一个：

```
NSArray *array = [datadic objectForKey:@"FaceImage"];
NSMutableData *imageData = [NSMutableData dataWithLength:[array count]];
uint8_t *imageBytes = [imageData mutableBytes];
for (NSUInteger i = 0; i < [array count]; i++) {
    imageBytes[i] = [array[i] unsignedCharValue];
}
UIImage *image = [UIImage imageWithData:imageData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:59:40.780

```
NSDecimalNumber *myNSDecimalNumber = [NSDecimalNumber decimalNumberWithDecimal:myNSDecimal]; 
NSInteger myInt = [myNSDecimalNumber intValue];// convert nsdeimal to nsdecimal number and then to nsinteger

NSUInteger index = (NSUInteger)myInt;
NSData *payload = [NSData dataWithBytes:&index length:sizeof(index)];// convert nsinteger to nsdata

UIImageView *imgv = [[UIImageView alloc]
                     initWithFrame:CGRectMake(100, 100, 200, 200)];
imgv.image = [UIImage imageWithData:retrievedData];// converting into image th nsdata
[self.view addSubview:imgv]; 
```

# mongodb - 为日期范围（和其他字段）创建覆盖索引

> ID：15473591
> 
> 赞同：0
> 
> 时间：2013-03-18T09:39:19.883
> 
> 标签：mongodb, indexing

这是使用 mongodb 2.0.4。我们已经考虑过升级，但只是想看看我们是否可以在不这样做的情况下解决这个问题，因为使用我们的设置进行升级并不容易。

我有很多更新查询，其中“查找”部分如下所示：

```
timestamp:
{
    $gte: ISODate('xxxxx'),
    $lt: ISODate('xxxxx')
},
id: "string"
processed: false 
```

它基本上在特定日期范围内搜索特定 ID 的记录，并将更新处理从 false 处理为 true（这是一个“工作”进程）。

我尝试创建一个包含所有 3 个字段（以及 _id）的索引，但`explain()`仍然返回`indexOnly: false`. 奇怪的是，它还为 indexBounds 返回了这个：

```
"indexBounds" : {
    "processed" : [
        [
            false,
            false
        ]
    ]
} 
```

有人可以给我一个关于如何解决这个问题的提示，以便 mongodb 正确使用索引（覆盖索引），还是日期范围根本不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:40:45.490

重要的不仅仅是拥有一个包含所有三个字段的索引，而是这些字段的*顺序*。

我推荐这篇[文章](http://emptysquare.net/blog/optimizing-mongodb-compound-indexes/)以获取有关如何使用复合索引的更多详细信息。

要记住的主要事情是，您测试相等性的字段需要在您测试范围的字段之前（特别是因为您使用的是旧版本，并且没有在更高版本中进行一些优化）。

# c# - 拆分数字字符串并查找总和

> ID：15473598
> 
> 赞同：-1
> 
> 时间：2013-03-18T09:39:31.067
> 
> 标签：c#, algorithm, language-agnostic

我如何编写一个方法，它接受一个参数。单个参数是一个字符串**s**，它只包含非零数字。

此函数应打印 s 的最长连续子串的长度，使得子串的长度为**2*N**位（字符串的最大长度为 49）并且最左边 N 位的和等于最右边的和N 位数。如果没有这样的字符串，你的函数应该打印 0

我是 C# 的学习者。我看到了这个谜题，没有做。

样本输入：123231，预期输出为 6

解释：

1 + 2 + 3 = 2 + 3 + 1\. 最长子串的长度 = 6 其中第一半的总和 = 第二半

示例输入#2：986561517416921217551395112859219257312 输出为 36

```
static int myMethod(string s) {

 var input = "123231";
 bool expected = 
 new System.Text.RegularExpressions.Regex("^[1-9]+$").IsMatch(input);

 return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:10:59.007

一个使用 LINQ 的解决方案，希望对您有所帮助。“诀窍”是您必须检查整个字符串的新版本，即第一个 int 的 lop 和最后一个 int。这个问题之前已经在 SO 上提出过，但是作为一个 c++ 问题。它在 C# 中看起来好多了:)

```
int GetSumString(string s)
{
  // Convert everything to int[], easier that way in .NET
  var numbersOrg = s.Select(t => int.Parse(t.ToString())).ToArray();

  // Its possible to optimize by using ienumerable and lazy evaluation i guess, but I'm lazy :)
  var queue = new Queue<int[]>();
  queue.Enqueue(numbersOrg);

  while (queue.Any())
  {
      var numbers = queue.Dequeue();   

      var firstHalf = numbers.Take(numbers.Length / 2).Sum();
      var secondHalf = numbers.Skip(numbers.Length / 2).Sum();
      // It must be of even length (% 2) and the sum of the first half must be equal to the last half.
      if (numbers.Length % 2 == 0 && firstHalf == secondHalf)
          return numbers.Length;

      // Console.WriteLine("tried: " + string.Join("", numbers) + " gave (" + firstHalf + "," + secondHalf + ")");
      // Only enqueue when we have something left in the array
      if (numbers.Length > 1)
      {
          queue.Enqueue(numbers.Take(numbers.Length - 1).ToArray());
          queue.Enqueue(numbers.Skip(1).ToArray());
      }
  }
  return 0;
} 
```

解决方案就是以正确的顺序进行检查，即保证第一个“解决方案”是最长的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:51:06.897

只需遍历可能的组合。`123231`字符串示例：

```
1=2         -> fail
1+2=3+2     -> fail
1+2+3=2+3+1 -> len=6, longest so far
2=3         -> fail
2+3=2+3     -> len=4, not longer
3=2         -> fail
3+2=3+1     -> fail
2=3         -> fail
3=1         -> fail 
```

像这样的东西：

```
int longest = 0;
for (int i = 0; i < str.Length; i++) {
  for (j = longest + 1; i + j * 2 <= str.Length; j++) {
    if (sum(str, i, j) == sum(str, i + j, j)) {
      longest = j;
    }
  }
}

int sum(string str, int offset, int len) {
  int s = 0;
  for (int i = 0; i < len; i++) s += (int)(str[offset + i] - '0');
  return s;
} 
```

# java - 像这样嵌套 try/finally 子句是否安全？

> ID：15473599
> 
> 赞同：7
> 
> 时间：2013-03-18T09:39:31.837
> 
> 标签：java, nested, try-finally

由于这是一个关于 try/finally 子句行为的学术问题，因此我尝试使用一个非常通用的示例。像这样嵌套 try/finally 子句有什么危险吗？

```
openDatabaseConnection();
try {
    // Methods unrelated to cursor
    // ...

    String cursor_id = openCursor();
    try {
        useCursor(cursor_id);
    } finally {
        closeCursor(cursor_id);
    }

    // Methods unrelated to cursor
    // ...
} catch (Exception e) {
    genericLogError();
} finally {
    closeDatabaseConnection();
} 
```

具体来说，我很想知道是否`closeCursor()`保证在之前被调用`closeDatabaseConnection()`。是否有理由嵌套一个 finally 子句之类的应该被视为不好的做法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T09:42:29.377

是的，这是有保证的。

假设在 期间发生了一些异常`useCursor(cursor_id)`，现在将执行*内部的 finally块。*（由于异常发生在内部`try`块中）。在此之后将被调用（因为在包含内部`genericLogError()`的外部发生了异常。并且只有在它被执行之后（外部的）。这是一个可以更好地解释它的图表：`try``try``closeDatabasConnection()``finally``try`

**（内部try的异常→内部try的finally）** →**这被认为是外部try的异常**→外部try**的catch** →外部try**的finally。**

您可以通过从块中打印来测试它。

但为什么不这样做呢？

```
try {
  useCursor(cursor_id);
} catch(Exception e) {
  genericLogError();
} finally {
  closeCursor(cursor_id);
  closeDatabaseConnection();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T09:59:13.430

假设您首先需要像这样嵌套 try-catch 块，这没有任何问题。[对于您提供的示例， Maroun 的](https://stackoverflow.com/a/15473648/43662)回答会更好。如果您在“光标”清理中涉及大量局部变量，则您建议的方法更适合的示例可能是：

```
openDatabaseConnection();
try {
    Cursor cursor = openCursor();
    CursorHelper helper = new CursorHelper(cursor);
    String cursor_id = cursor.getId();
    String something_else = cursor.getSomethingElse();
    try {
        useCursor(cursor_id, something_else, helper);
    } finally {
        closeCursor(cursor_id, something_else, helper);
    }
} catch (Exception e) {
    genericLogError();
} finally {
    closeDatabaseConnection();
} 
```

父 try 块将捕获嵌套块抛出的异常，但嵌套`finally`块将首先被调用。这将游标变量的范围保持在第一个`try/catch`块中。

如果您想将所有这些代码拉到一个`try/catch`块中，则必须在该块之外声明一些变量，这可能会开始影响可读性：

```
openDatabaseConnection();
CursorHelper helper = null;
String cursor_id = null;
String something_else = null;
try {
    Cursor cursor = openCursor();
    helper = new CursorHelper(cursor);
    cursor_id = cursor.getId();
    something_else = cursor.getSomethingElse();
    useCursor(cursor_id, something_else, helper);
} catch (Exception e) {
    genericLogError();
} finally {
    if (cursor_id != null) {
        closeCursor(cursor_id, something_else, helper);
    }
    closeDatabaseConnection();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T09:45:20.410

是的，在这种情况下，`closeCursor()`保证在之前被调用。`closeDatabaseConnection()`

您可以将两个调用放在一个`finally`块中（将调用移动到您调用`closeCursor()`的同一块），但这需要在外部范围内声明游标，这可能是不可取的。例如，您可能希望将所有使用光标的代码放入单独的方法中；在这种情况下，您可能希望在这个新方法中拥有关闭光标的块。`finally``closeDatabaseConnection()``finally`

一般来说，我不认为嵌套`finally`子句应该被认为是一种不好的做法。人们应该考虑代码的一般可读性，比如一个方法中的行数——也许最好将你的方法分成两个，在这种情况下会有两个`finally`块，每个方法一个。或者，如果您的代码足够简单且足够短，可以采用一种方法，您可以将代码重新组织为只有一个`finally`块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T09:45:45.287

当控制离开 try 块时，finally 子句的执行得到保证。这里控制在外部块之前离开内部try块，因此执行顺序得到保证。

没有理由认为这应该被认为是不好的做法，除了你正在制作一个可以分成两个或更多的大方法这一事实之外。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T09:45:01.167

使用 try/chatch 然后最后。
然后你的代码就很好了。
始终关闭光标和连接是一种很好的编码习惯，在这里你必须在调用`closeCursor(cursor_id)`之前调用`closeDatabaseConnection()`你已经完成的操作。
由于 finally 块将始终执行，尽管`Exception`在各个块的执行过程中会发生一些情况，所以在您的代码中，光标将首先关闭，然后数据库连接将关闭，所以这是完美的。

**请找到修改后的代码片段供您参考：**

```
 openDatabaseConnection()
    try {
        // Methods unrelated to cursor
        // ...

        String cursor_id = openCursor();
        try {
            useCursor(cursor_id);
        } 
        catch (Exception e) { //Added the catch block.
        genericLogError();
       } 
        finally {
            closeCursor(cursor_id);
        }

        // Methods unrelated to cursor
        // ...
    } catch (Exception e) {
        genericLogError();
    } finally {
        closeDatabaseConnection();
    } 
```

或者您可以删除内部尝试并可以在外部最终本身中关闭两者，例如：

```
//outer try block
try{
....
}catch(Exception e){
genericLogError();
}
finally {
         closeCursor(cursor_id);
        closeDatabaseConnection();
    } 
```

这也行。

# windows-phone-8 - Windows Phone 上的多个预定敬酒

> ID：15473600
> 
> 赞同：0
> 
> 时间：2013-03-18T09:39:32.230
> 
> 标签：windows-phone-8, scheduled-tasks

我正在编写一个应用程序（windows phone 8），它必须在给定时间显示多个祝酒词。为此，我使用了一个“ScheduledTaskAgent”项目。

```
protected override void OnInvoke(Microsoft.Phone.Scheduler.ScheduledTask task)
{

    ShellToast toast = new ShellToast();
    toast.Content = task.Description;
    toast.Show();

    NotifyComplete();

    ScheduledActionService.Remove(task.Name);
} 
```

并添加一个新的任务/祝酒我做：

```
 private static void AddToSchedule(DateTime date, string id, Toast toast)
{
    PeriodicTask periodicTask = new PeriodicTask(toast.Id);

    periodicTask.Description = toast.Title;
    ScheduledActionService.Add(periodicTask);
    var showIn = date - DateTime.Now;
    ScheduledActionService.LaunchForTest(toast.Id, showIn);
} 
```

如果我添加一项任务/吐司它正在工作。但如果我想添加更多，我有一个 System.InvalidOperationException。

（这意味着：BNS 错误：此类型的 ScheduledAction 的最大数量已被添加。）。

我如何更改它以便能够向一项任务添加祝酒词。

更新 ：

我改变了我的 AddToSchedule() 现在它正在工作。

```
 private static void AddToSchedule(DateTime date, string id, Toast toast)
{
    Reminder reminder = new Reminder(toast.Id);
    reminder.Title = toast.Title;
    reminder.Content = toast.Title;
    reminder.BeginTime = DateTime.Now.AddMinutes(1);
    reminder.ExpirationTime = reminder.BeginTime.AddSeconds(5.0);
    reminder.RecurrenceType = RecurrenceInterval.None;
    ScheduledActionService.Add(reminder);
} 
```

有没有办法使用 toast 而不是提醒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:52:03.843

如果您想在特定时间向用户显示提醒，您有几个选项：

如果您想从设备发出通知，您可以使用`Alert`或`Reminder`。

如果要显示`Toast`通知，则必须使用`Push Notification`.

# python - 使用python从多个同名XML文件的标签中打印选定的部分

> ID：15473602
> 
> 赞同：1
> 
> 时间：2013-03-18T09:39:42.723
> 
> 标签：python, xml-parsing

1.  您好，我的 XML 文件是这样的，有人可以帮我从 XML 文件中获取特定标签吗：

    ```
     <A1>
                <A><B>TEST1</B></A>
                <A><B>TEST2</B></A>
                <A><B>TEST3</B></A>
               </A1>

                <A1>
                <A><B>TEST4</B></A>
                <A><B>TEST5</B></A>
                <A><B>TEST6</B></A>
               </A1> 
    ```

到目前为止，我正在像这样在 python 中处理它：

```
 for A in A1.findall('A'):
                   B = A.find('B').text
                   print B

      print B is giving me output like this:

          Test1
          Test2
          Test3
          Test4
          Test5
          Test6

   I want output from only first tag like this:

          Test1
          Test4

   What changes should I do to make it work? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:48:47.097

好吧，让我们再试一次。因此，在修订之后，我们想要搜索整个文档，并且每次父标签（A1）出现时，我们都想要获取每个集合中第一个标签的内容。

让我们尝试一个递归函数：

```
xmlData = open('xml.txt').readlines()
xml = ''.join(xmlData)

def grab(xml):
        """ Recursively walks through the whole XML data until <A1> is not found"""

        # base case, if the parent tag (<A1>) isn't there, then return
    if xml.find('<A1>') == -1:
        return 
    else:
                # find the location of the parent tag
        open_parent = xml.find('<A1>')
        close_parent = open_parent + 4

        # find the first child tag
        open_child = xml.find('<a><b>', close_parent)
        close_child = xml.find('</b></a>', open_child)

                # grab the data within that tag
        child_data = xml[open_child + 6 : close_child]
        print(child_data)

                # recursively call the grab() function
        return grab(xml[close_child:]) 
```

出于兴趣，您是否已经有一个您不介意分享的解决方案？

# java - 读取文件并根据多个条件剪切每一行

> ID：15473605
> 
> 赞同：3
> 
> 时间：2013-03-18T09:39:49.690
> 
> 标签：java, python, perl, bash

我发现很难为这个问题想出一个合适的标题。因此，如果它具有误导性，如果您能帮助改进它，我将不胜感激。

我已经提取了一个 xml 文件的属性值，现在我得到了如下示例行中提到的输出：

```
category:buffer overflow  analyzer:data flow analyzer:buffer 
```

我需要将其拆分为

```
category:buffer overflow
analyzer:data flow
analyzer:buffer 
```

我不确定如何使用 Java、Perl 或 Python 来完成这项工作。

到目前为止，我所拥有的只是一个简单的 Perl 脚本，它将其拆分为“：”。

所有建议都会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T09:47:50.407

合适的正则表达式将起作用。这是 Python`re`模块的实现：

```
import re

s = 'category:buffer overflow  analyzer:data flow analyzer:buffer'

print(re.findall(r"(\w+:[\w ]+)(?: |$)", s))
#prints ['category:buffer overflow ', 'analyzer:data flow', 'analyzer:buffer'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T09:55:33.043

这个**sed 单线**在这里工作：

```
sed -r 's/ ([^ ]+:)/\n\1/g' input 
```

测试：

```
kent$  echo "category:buffer overflow  analyzer:data flow analyzer:buffer" |sed -r 's/ ([^ ]+:)/\n\1/g'                                                                     
category:buffer overflow 
analyzer:data flow
analyzer:buffer 
```

这个**java**行也在这里工作：

```
System.out.println("category:buffer overflow  analyzer:data flow analyzer:buffer".replaceAll("\\s([^\\s]+:)", "\n$1")); 
```

又一条**蟒蛇**线：

```
In [1]: import re

In [2]: s = 'category:buffer overflow  analyzer:data flow analyzer:buffer'                                                                                                 

In [3]: print re.sub(r"\s(?=[^\s]*:)",'\n',s)
category:buffer overflow 
analyzer:data flow
analyzer:buffer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T09:59:12.743

在 Java 中，这看起来像这样：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Extractor {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Pattern pattern = Pattern
                .compile("(\\w+:[\\w ]+)(?: |$)");
        Matcher matcher = pattern
                .matcher("category:buffer overflow  analyzer:data flow analyzer:buffer");
        while (matcher.find()) {
            System.out.println(matcher.group());
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T10:48:34.057

在 perl 中：

```
$s = "category:buffer overflow  analyzer:data flow analyzer:buffer";
$s .= " "; 
@keyz = split(/:[A-Za-z\d\s]*\s/, $s);
print "@keyz\n";
@params = split(/[A-Za-z\d]*:/, $s);
print "@params\n"; 
```

产生数组@keyz = ("category", "analyzer", "analyzer") 和数组@params=("buffer overflow", "data flow", "buffer")

# php - PHP Dom Parser 获取跨度值

> ID：15473607
> 
> 赞同：1
> 
> 时间：2013-03-18T09:40:00.160
> 
> 标签：php, parsing, dom

我正在寻找从外部 URL 收集信息，并将其剥离为值。

例如

```
<span id="ctl00_cphRoblox_rbxUserStatisticsPane_lFriendsStatistics">149</span> 
```

我找不到使用 PHP Dom 获取“149”的方法

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:01:06.163

一种解决方法是使用`preg_match()`，但我只会将它与 curl() 一起使用...

```
$row = '<span id="ctl00_cphRoblox_rbxUserStatisticsPane_lFriendsStatistics">149</span>';
preg_match_all('/<span.*?>.*?<\/[\s]*span>/s', $row, $matches2);
var_dump($matches2); 
```

另一种选择是使用 simple_html_dom.php：

```
include('simple_html_dom.php');
$html = str_get_html($row);

var_dump($html->find('span', 0)->plaintext); 
```

第三个是使用内置的 DOMDocument。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:59:19.857

```
function DOMRemove(DOMNode $from) {
    $sibling = $from->firstChild;
    do {
        $next = $sibling->nextSibling;
        $from->parentNode->insertBefore($sibling, $from);
    } while ($sibling = $next);
    $from->parentNode->removeChild($from);    
}

$dom = new DOMDocument;
$dom->load('test.html');

$nodes = $dom->getElementsByTagName('span');
foreach ($nodes as $node) {
    DOMRemove($node);
}
echo $dom->saveHTML(); 
```

来源：[https ://stackoverflow.com/a/4663865/1675369](https://stackoverflow.com/a/4663865/1675369)

*   另外：有一个为 PHP 解析 HTML 的库。[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

# ios - iOS 推送通知 SSL 证书

> ID：15473610
> 
> 赞同：2
> 
> 时间：2013-03-18T09:40:17.100
> 
> 标签：ios, ssl, server-side, apple-push-notifications

是否生成证书以发送特定于服务器的推送通知，或者如果我更改我的服务器，我可以在任何其他服务器上使用它？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:42:19.750

您可以在任何服务器中使用它。Apple 推送通知 SSL 证书并不特定于任何服务器。

示例：parse.com、xtify.com 等。

![在此处输入图像描述](../Images/723026be9d5144376c599edd4c5d7c06.png)

![在此处输入图像描述](../Images/27e5643cf16172f2595e6035acc6960b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:42:24.890

您可以在任何服务器上使用它——重要的是证书及其相应的私钥，而不是建立连接的 IP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-24T07:13:56.100

您可以在任何服务器中使用它。Apple 推送通知 SSL 证书并不特定于任何服务器。

[https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW1](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW1)

# wpf - ItemsControl - 自定义 ItemContainer

> ID：15473619
> 
> 赞同：0
> 
> 时间：2013-03-18T09:40:46.407
> 
> 标签：wpf, itemscontrol

我想创建一个自定义的“向导”-控件。

所以我从 Selector 派生了一个“Wizard”，并创建了一个从 HeaderedContentControl 派生的“WizardPage”。当我将“WizardPages”直接添加到“Wizard”的内容本身时，一切正常。

在代码中：这有效

```
<ctrl:Wizard>
    <ctrl:WizardPage Header="Page 1" Content="Some Stuff" />
</ctrl:Wizard> 
```

然后我想：嘿，如果你可以在向导的内容中放入随机的东西，如果需要的话，他会在它周围创建一个包装器，就像 ListBox 和 ListBoxItems 一样（我肯定需要一个包装器，因为 WizardPage 需要属性“CanLeavePage”和“AlreadyVisited”）。

在代码中：我希望它有效（组是一个列表，我可以在某个地方模板到 WizardPage）

```
<ctrl:Wizard ItemsSource="{Binding Groups}" /> 
```

所以我尝试了：

```
protected override bool IsItemItsOwnContainerOverride(object item)
{
    return item is WizardPage;
}

protected override DependencyObject GetContainerForItemOverride()
{
    return new WizardPage();
} 
```

当我在这两个方法上设置断点时，我可以看到 IsItemItsOwnContainer 被调用，但 GetContainerForItemOverride 永远不会被调用。

我在这里想念什么？

这个概念看起来像这样：

![设置向导](../Images/7135baa47a4e2b5838698feeed81085a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:12:39.513

好的，检查您的代码后，它清楚为什么它不起作用。您的向导类是一个选择器，因此它是一个 ItemsControl，但是在您的向导控件模板中，您不使用任何 ItemsControl 东西，在模板内您使用一个 ListBox，它本身就是一个 ItemsControl，并且您将向导 ItemsSource 绑定到列表框的 ItemsSource。所以现在在 ListBox 中调用了 ItemContainerGenerator 来生成 ListBoxItems，因为实际上列表框正在完成所有工作，而向导除了重新路由 ItemsSource 属性之外什么都不做。

您需要大幅修改您的向导模板以使其工作。顺便提一句。您可以轻松地从 ListBox 派生 Wizard 类。

# python - 自定义Json（反）序列化？

> ID：15473622
> 
> 赞同：2
> 
> 时间：2013-03-18T09:40:57.340
> 
> 标签：python, json

我正在将一些代码从 .Net 移植到 python。

在某一时刻，我们需要将任意复杂的 json 从一种格式转换为另一种格式。

例如：

```
{"Query": 
    {
        "Boolean": {
            "Operator": "And",
            "Parameters": [
                {"Equal": {"Name": "Bob"}},
                {"Boolean": ...}
            ]
        }
    }
} 
```

到...

```
{"Query": 
    {
        "Left": {"Name":"Bob"},
        "Right": {...},
        "Operator": "And"
    }
} 
```

我们使用 Json.Net 的优秀`Newtonsoft.Json.JsonConverter`来连接到序列化/反序列化过程。我们有 2 `JsonConverter`s 从相同的对象转换到/从这些格式中的每一种。

```
Public Overrides Function CanConvert(objectType As Type) As Boolean
    Return GetType(QueryDefinition).IsAssignableFrom(objectType)
End Function 
```

这意味着我们可以手动挑选出我们想要处理的位，并允许库存转换器处理我们不需要特别处理的所有属性/值。

Python中是否有任何等效的机制/框架？还是我必须手动递归地解析每个属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T09:42:08.663

您可以对默认 JSONEncoder 进行子类化。

来自：[http ://docs.python.org/2/library/json.html](http://docs.python.org/2/library/json.html)

*“要使用自定义 JSONEncoder 子类（例如，覆盖 default() 方法以序列化其他类型的子类），请使用 cls kwarg 指定它；否则使用 JSONEncoder。”*

[http://docs.python.org/2/library/json.html#json.JSONEncoder](http://docs.python.org/2/library/json.html#json.JSONEncoder)

使用示例：[Python 2.7 中的自定义 JSON 编码器插入纯 JavaScript 代码](https://stackoverflow.com/questions/13188719/custom-json-encoder-in-python-2-7-to-insert-plain-javascript-code?rq=1)

# javascript - 使用 Zurb 基金会和 Symfony2

> ID：15473624
> 
> 赞同：2
> 
> 时间：2013-03-18T09:41:05.987
> 
> 标签：javascript, css, symfony, zurb-foundation, assetic

在我的 Symfony2 应用程序中，我使用 Zurb Foundation 来构建我的布局。这一直让我头疼...... css 工作得很好，但 js 经常不起作用。文件已加载并且没有报告任何错误（Zurb 工作正常），但例如在单击选项卡时没有任何反应。

我希望通过 Assetic 找到加载基础文件的错误。我没有使用任何过滤器，但我需要 Assetic 从 app\resources\public 加载文件。由于这是一个非网络文件夹，如果我直接加载这些文件，我会得到“禁止”错误。

你们将来自 Foundation 的全局 css 和 js 文件放在 Symfony2 应用程序中的什么位置？像我一样在捆绑包或公用文件夹中？您对如何使其顺利运行有什么建议吗？

**编辑：**似乎我的 Zurb Foundation js 根本没有工作......但是它已经加载而没有错误。如果存在的话，这方面的文档似乎非常罕见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T21:44:01.903

如果你还在寻找一种更简洁的方法，这个人很不错，可以为 Foundation 以及 jQuery 和 Modernizr 制作一个捆绑包。

[https://github.com/bmatzner/BmatznerFoundationBundle](https://github.com/bmatzner/BmatznerFoundationBundle)

这就是你所需要的：

```
<head>
  //...
{% block stylesheets %}
<link href="{{ asset('bundles/bmatznerfoundation/css/foundation.min.css') }}" media="screen, projection" rel="stylesheet"/>
{% endblock %}
<script src="{{ asset('bundles/bmatznerjquery/js/jquery.min.js') }}"></script>
<script src="{{ asset('bundles/bmatznerfoundation/js/foundation.min.js') }}"></script>
</head> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:15:44.787

“加载顺序”是答案...... js 文件以错误的顺序读取并导致问题。

这是解决方案：

链接到您的 js 库时，请确保单独提及每个文件，以便确定顺序。*接下来，最后*链接到 app.js 文件。如果不这样做，所有文件都将被找到并正确加载，但 Zurb 基金会不会使用它们。如果您查看 app.js 文件，您会看到它加载了库，并为每个未找到的库返回 null - 在那个特定的时刻。

因此，不要像这样链接到您的 js 文件：

```
{% javascripts 
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/*'
%}
<script src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

像这样做：

```
{% javascripts 
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/jquery.placeholder.js'
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/modernizr.foundation.js'
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/foundation.min.js'
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/jquery.foundation.accordion.js'
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/jquery.foundation.alerts.js'
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/jquery.foundation.buttons.js'
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/jquery.foundation.forms.js'      '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/jquery.foundation.mediaQueryToggle.js'
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/jquery.foundation.navigation.js'
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/jquery.foundation.topbar.js'
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/jquery.foundation.reveal.js'
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/jquery.foundation.tabs.js'
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/jquery.foundation.tooltips.js'
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/app.js'
 '@UnknownblissZurbfoundationBundle/Resources/public/javascripts/*'
 %}
<script src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

这样，*您*确定加载顺序而不是 Symfony2。以通配符链接结尾仍然是一个明智的主意，因此您可能忘记的任何内容仍将被链接。

看起来使用 Assetic 的所有额外好处都以这种方式被抛弃了，但您仍然拥有使用命名空间的优势，并且通过使用过滤器，您可以让 Assetic 将这些文件合二为一。这将限制所需的请求数量。所以唯一真正的缺点是需要额外的代码......

PS 上面选择的订单对我来说很好，但您可能想提出自己的订单。

# python - 在烧瓶中重定向时发出 POST 请求

> ID：15473626
> 
> 赞同：62
> 
> 时间：2013-03-18T09:41:11.703
> 
> 标签：python, redirect, flask

我正在使用烧瓶。我处于需要将发布请求重定向到另一个保留请求方法（即“POST”方法）的 url 的情况。当我将“GET”请求重定向到另一个接受“GET”请求方法的 url 时很好。这是我在上面尝试的示例代码..

```
@app.route('/start',methods=['POST'])
def start():
    flask.redirect(flask.url_for('operation'))

@app.route('/operation',methods=['POST'])
def operation():
    return "My Response" 
```

我想向“/start” url 发出“POST”请求，该请求在内部也向“/operation”url 发出“POST”请求。如果我像这样修改代码，

```
@app.route('/operation',methods=['GET'])
def operation():
    return "My Response" 
```

代码适用于“GET”请求。但我也希望能够发出 POST 请求。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-03-18T15:46:32.087

中提供的`redirect`功能`Flask`默认向客户端发送 302 状态码，正如[Wikipedia](https://en.wikipedia.org/wiki/HTTP_302)上所提到的：

> 许多网络浏览器以违反此标准的方式实现此代码，将新请求的请求类型更改为 GET，而不管原始请求中使用的类型（例如 POST）。[1] 出于这个原因，HTTP/1.1 (RFC 2616) 添加了新的状态代码 303 和 307 以消除两种行为之间的歧义，其中 303 要求将请求类型更改为 GET，而 307 则保留最初发送的请求类型。

因此，发送 307 状态码而不是 302 应该告诉浏览器保留使用的 HTTP 方法，从而获得您期望的行为。您的呼叫`redirect`将如下所示：

```
flask.redirect(flask.url_for('operation'), code=307) 
```

# paypal - 无法在沙盒中创建按钮

> ID：15473630
> 
> 赞同：3
> 
> 时间：2013-03-18T09:41:15.840
> 
> 标签：paypal

按照标题。我已经有 PayPal 开发者帐户。当我在单击应用程序-> 沙盒帐户-> 单击沙盒时，我已经登录，但是当我尝试创建按钮时，Web 服务器将指向真正的教皇网站。并给了我真正的立即购买按钮。我只想尝试沙盒中的“立即购买”按钮，请帮助，非常感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-08-07T08:45:09.637

显然，在沙箱中创建测试按钮的 URL 是这样的：

[https://www.sandbox.paypal.com/c2/cgi-bin/webscr?cmd=_button-management](https://www.sandbox.paypal.com/c2/cgi-bin/webscr?cmd=_button-management)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:56:51.940

新的开发者/沙盒网站的推出存在一些问题。作为一种解决方法，当它引导您到现场时，只需将现场更改为沙箱的现场即可。因此，如果它将您定向到[https://www.paypal.com/webscr](https://www.paypal.com/webscr)，您只需将其更改为以下格式[https://www.sandbox.paypal.com/webscr](https://www.sandbox.paypal.com/webscr)。您还可以从您的 PayPal 帐户创建一个非托管的明文按钮，然后只需修改 HTML 代码以指向沙箱。您只需将按钮代码中的 URL 更改为从实时站点指向沙盒，您只需更改业务变量并将其设置为您的沙盒帐户的电子邮件地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-02T07:29:51.533

我遇到了同样的问题..

当我单击“为您的网站创建付款按钮”时，它会重定向到此链接[www.paypal.com/us/webapps/mpp/standard-integration](http://www.paypal.com/us/webapps/mpp/standard-integration)，这是实时贝宝网站。您的测试帐户在那里不存在，因此您无法使用沙盒测试帐户完成其余操作。

我通过以下方式解决了它..

重定向到上述链接后...您可以编辑链接。

放“沙盒”。在链接中。编辑后的链接将是[www.sandbox.paypal.com/us/webapps/mpp/standard-integration](http://www.sandbox.paypal.com/us/webapps/mpp/standard-integration)

现在您可以创建自定义按钮.. 生成的 HTML 将是这样的

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" target="_top">
      <input type="hidden" name="cmd" value="_s-xclick">
      <input type="hidden" name="hosted_button_id" value="5GW6UJKLK47R6">
      <input type="image"   src="https://www.sandbox.paypal.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
      <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

# c# - 如何查找单词并拆分字符串中的整数和字符

> ID：15473642
> 
> 赞同：0
> 
> 时间：2013-03-18T09:42:11.930
> 
> 标签：c#, string, split

请告诉我这个问题的答案请...

```
string ss="pradeep rao having 2years exp"; 
```

在上面的字符串中，我想找到年份（或）年份的单词，如果匹配该单词，我不想像这样拆分单词

```
string s="2";
string s1="years(or)year" 
```

谢谢 pradeep

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:49:40.497

最简单的方法是使用像这样的正则表达式：

```
Regex = new Regex("(\d+)(years?)");

Match match = regex.Match(ss);
if(match.Success)
{
  string s = match.Groups[1];
  string s1 = match.Groups[2];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:48:32.640

没有解决方案，但在正确的方向提示：

1.  在 ss 字符串中搜索文本字符串“years”。你会得到一个索引。（例如 21）
2.  使用字符串 ss 的开头，直到索引查找数字。（从 21 岁开始，然后回去工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T09:53:54.087

```
string ss = "pradeep rao having 2years exp";

            string[] SPLIT = ss.split(' ');

            for (int i = 0; i < SPLIT.Length; i++)
            {
                if (SPLIT[i].Contains("years") || SPLIT[i].Contains("year"))
                {
                    //SPLIT[i] is the required word split it or use Substring property to get the desired result
                    break;
                }
            } 
```

# c++ - C++11：条件编译：成员

> ID：15473643
> 
> 赞同：4
> 
> 时间：2013-03-18T09:42:13.830
> 
> 标签：c++, c++11, conditional-compilation

我正在尝试使用条件成员创建一个结构，这意味着不同的成员仅存在于特定的专业化中。但是，我希望这些课程尽可能快。我以三种不同的方式尝试过：

**方式一：**

```
 template<typename T, bool with_int = false>
 struct foo
 {
     template<typename... Args>
     foo(Args&&... args) : m_t(forward<Args>(args)...)
     {}

     T m_t;
 }

 template<typename T>
 struct foo<T, true>
 {
     template<typename... Args>
     foo(Args&&... args) : m_t(forward<Args>(args)...), m_id(0)
     {}

      T m_t;
      int m_id;
 }; 
```

*   缺点：每个专业都有重复的代码。

**方式二：**

```
 template<typename T, bool with_int = false>
 struct foo
 {
     template<typename... Args>
     foo(Args&&... args) : m_t(forward<Args>(args)...)
     {}

     virtual ~foo() {}

     T m_t;
 }

 template<typename T>
 struct foo<T, false> : public foo<T>
 {
      using foo<T>::foo;

      int m_id = 0;
 }; 
```

*   优点：代码少。
*   缺点：vtables/inheritance/etc 的使用：更多时间用于构建或访问成员？但是，在其他方面，我不会假装使用“引用”来访问基类。这种方法的真正优点或缺点是什么？

**方式3**

```
 using nil_type = void*;
 using zero_type = nil_type[0];

 template<typename T, bool with_int = false>
 struct foo
 {
    template<typename... Args, typename = typename enable_if<with_int>::type>
    foo(Args&&... args) : m_t(forward<Args>(args)...), m_int(0)
    {}

    template<typename... Args, typename = typename enable_if<!with_int>::type>
    foo(Args&&... args) : m_t(forward<Args>(args)...)
    {}        

    T m__t;
    typename conditional<with_int, int, zero_type>::type m_int;
 }; 
```

*   Ventages：一次编写代码；什么时候，字段的大小`with_int`为0（几乎使用 gcc 4.7.2）。`false``m_int`
*   优点：更多地使用模板（降低可读性），我不确定编译器如何处理大小为 0 的成员。我确实不知道大小为 0 的字段在多大程度上是危险的或有意义的。重复构造函数，但也许这是可以避免的。

最好的方法或方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T09:51:45.467

你考虑过继承吗？

```
template< bool >
struct foo_int_base
{
  // stuff without the int
  void f(); // does not use m_id
};

template<>
struct foo_int_base< true >
{
  // stuff with the int
  int m_id = 0;
  void f(); // uses m_id
};

template< typename T, bool with_int = false >
struct foo : foo_int_base< with_int >
{
  // common stuff here
}; 
```

# c# - 包含类型未实现接口 IMessageFilter

> ID：15473650
> 
> 赞同：2
> 
> 时间：2013-03-18T09:42:37.773
> 
> 标签：c#

我仍在尝试找出此错误发生的情况：

> *OCR.test.IMessageFilter.PreFilterMessage(ref System.Windows.Forms.Message)：包含类型未实现接口 System.Windows.Forms.IMessageFilter*

这是我的代码：

```
bool IMessageFilter.PreFilterMessage(ref Message m) // Error with this line
{
    TwainCommand cmd = tw.PassMessage(ref m);
    if (cmd == TwainCommand.Not)
        return false;

    switch (cmd)
    {
        case TwainCommand.CloseRequest:
        {
            EndingScan();
            tw.CloseSrc();
            break;
        }
        case TwainCommand.CloseOk:
        {
            EndingScan();
            tw.CloseSrc();
            break;
        }
        case TwainCommand.DeviceEvent:
        {
           break;
        }
        case TwainCommand.TransferReady:
        {
            ArrayList pics = tw.TransferPictures();
            EndingScan();
            tw.CloseSrc();
            picnumber++;
            for (int i = 0; i < pics.Count; i++)
            {
                IntPtr img = (IntPtr)pics[i];
                PicForm newpic = new PicForm(img);
                newpic.MdiParent = this;
                int picnum = i + 1;
                //newpic.Text = "ScanPass " + picnumber.ToString() + "_Pic " + picnum.ToString();
                newpic.Show();
            }
            break;
        }
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:52:25.530

实现 PreFilterMessage 方法的类需要从 IMessageFilter 接口派生。你可能错过了

```
public class Foo: IMessageFilter
{
   bool IMessageFilter.PreFilterMessage(ref Message m)
   {
       // your code
   }
} 
```

# android - 创建 layout-land 文件夹后运行应用程序时出现 java.lang.NullPointerException

> ID：15473652
> 
> 赞同：0
> 
> 时间：2013-03-18T09:42:52.000
> 
> 标签：android

我有在纵向模式下完美运行的 xml。但是我又为横向创建了一个文件夹作为 layout-land 并向其中添加了相同的 XML 并根据横向模式进行了一些更改，但是当我运行我的应用程序时出现以下错误。

```
03-18 09:30:59.276: E/AndroidRuntime(5753): FATAL EXCEPTION: main
    03-18 09:30:59.276: E/AndroidRuntime(5753): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.netserv.Pungry/com.netserv.Pungry.RestaurantDetails}: java.lang.NullPointerException
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at android.os.Handler.dispatchMessage(Handler.java:99)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at android.os.Looper.loop(Looper.java:137)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at android.app.ActivityThread.main(ActivityThread.java:5041)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at java.lang.reflect.Method.invokeNative(Native Method)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at java.lang.reflect.Method.invoke(Method.java:511)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at dalvik.system.NativeStart.main(Native Method)
    03-18 09:30:59.276: E/AndroidRuntime(5753): Caused by: java.lang.NullPointerException
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at com.netserv.Pungry.RestaurantDetails.onCreate(RestaurantDetails.java:44)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at android.app.Activity.performCreate(Activity.java:5104)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    03-18 09:30:59.276: E/AndroidRuntime(5753):     ... 11 more 
```

这是 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="right"
    android:orientation="vertical"
    android:weightSum="1.0" >

  <LinearLayout 
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:orientation="horizontal"
      android:background="@color/headerbgcolor"
      android:weightSum="1.0" 
      >  

     <Button
            android:id="@+id/restaurant_back"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.2"
            android:text="@string/back" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="0.6"
            android:gravity="center"
            android:text="@string/restauran_details" />

        <Button
            android:id="@+id/restaurant_home"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.2"
            android:text="@string/home" />
     </LinearLayout>

  <RelativeLayout
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      >

      <Button
          android:id="@+id/Refresh"
          android:layout_width="wrap_content"
          android:layout_height="20dp"
          android:gravity="left"
          android:text="@string/refresh" />
  </RelativeLayout>

  <LinearLayout 
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical"
      android:weightSum="1">

     <TextView
        android:layout_width="fill_parent"
        android:layout_height="30dp"
        android:text="@string/restaurant_name" 
        />

     <TextView
         android:layout_width="fill_parent"
         android:layout_height="match_parent"
         android:text="@string/restaurant_address" />

     </LinearLayout>
     <ScrollView
         android:layout_width="fill_parent"
         android:layout_height="wrap_content" >
     <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:orientation="vertical"
        android:weightSum="1" >
     <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/restaurant_rating"
        android:layout_weight="0.1"  />

     <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/restaurant_timings" 
        android:layout_weight="0.1"  />

     <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/cost_for_two" 
        android:layout_weight="0.1" />

     <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/restaurant_cuisine" 
        android:layout_weight="0.1" />

     <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/restaurant_location" 
        android:layout_weight="0.1" />

     <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/restaurant_city" 
        android:layout_weight="0.1" />

</LinearLayout>
</ScrollView>

     <TextView
        android:layout_width="fill_parent"
        android:layout_height="20dp"
        android:text="@string/restaurant_phone"
        />

<!--      <RelativeLayout -->
<!--         android:layout_width="fill_parent" -->
<!--         android:layout_height="wrap_content" > -->

<!--         <ImageView -->
<!--             android:id="@+id/imageView1" -->
<!--             android:layout_width="fill_parent" -->
<!--             android:layout_height="wrap_content" -->
<!--             android:layout_alignParentBottom="true" -->
<!--             android:background="#808000" -->
<!--             android:src="@drawable/btn_bg_cuisine" /> -->
<!--     </RelativeLayout> -->

</LinearLayout> 
```

这是我的 RestaurantDetails 课程

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.restaurantdetails);
        btnback = (Button) findViewById(R.id.back);
        btnhome = (Button) findViewById(R.id.restaurant_home);
        btnRefresh = (Button) findViewById(R.id.Refresh);
        btnRefresh.setVisibility(View.GONE);
        Restaurant_name = (TextView) findViewById(R.id.Restaurant_name);
        Restaurant_add = (TextView) findViewById(R.id.Restaurant_add);
        Restaurant_costfortwo = (TextView) findViewById(R.id.Restaurant_cstfortwo);
        Restaurant_rating = (TextView) findViewById(R.id.Restaurant_rating);
        Restaurant_timings = (TextView) findViewById(R.id.Restaurant_timings);
        Restaurant_phone = (TextView) findViewById(R.id.Restaurant_phone);
        Restaurant_phone.setAutoLinkMask(Linkify.PHONE_NUMBERS);
        Restaurant_phone.setLinksClickable(true);

        Restaurant_Locationname = (TextView) findViewById(R.id.Restaurant_location);
        Restaurant_cityname = (TextView) findViewById(R.id.Restaurant_city);
        Restaurant_cuisinename = (TextView) findViewById(R.id.Restaurant_cuisine);
        imgfooter = (ImageView) findViewById(R.id.footerimage);

        btnhome.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                startActivity(new Intent(RestaurantDetails.this, Home.class));
            }
        });

        Restaurant_name.setText(GlobVariables.restaurant_response
                .get(GlobVariables.RestaurantName).restaurant_name);
        Restaurant_add.setText(GlobVariables.restaurant_response
                .get(GlobVariables.RestaurantName).address);
        Restaurant_costfortwo.setText(GlobVariables.restaurant_response
                .get(GlobVariables.RestaurantName).costoftwo);
        Restaurant_rating.setText(GlobVariables.restaurant_response
                .get(GlobVariables.RestaurantName).rating);
        Restaurant_timings.setText(GlobVariables.restaurant_response
                .get(GlobVariables.RestaurantName).timings);
        Restaurant_phone.setText(GlobVariables.restaurant_response
                .get(GlobVariables.RestaurantName).Phone);
        Restaurant_Locationname.setText(GlobVariables.restaurant_response
                .get(GlobVariables.RestaurantName).Location_name);
        Restaurant_cityname.setText(GlobVariables.restaurant_response
                .get(GlobVariables.RestaurantName).city_name);
        Restaurant_cuisinename.setText(GlobVariables.restaurant_response
                .get(GlobVariables.RestaurantName).Cuisine_name); 
```

我能知道我在做什么错吗？..谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:54:43.087

中的错误`btnback = (Button) findViewById(R.id.back);`。

布局 xml中没有按钮具有 id `back`。

我想你想用`restaurant_back`

`btnback = (Button) findViewById(R.id.restaurant_back);`.

此外，所有 TextView 都应该在 xml 布局中具有 id。

```
Restaurant_name = (TextView) findViewById(R.id.Restaurant_name);
        Restaurant_add = (TextView) findViewById(R.id.Restaurant_add);
        Restaurant_costfortwo = (TextView) findViewById(R.id.Restaurant_cstfortwo);
        Restaurant_rating = (TextView) findViewById(R.id.Restaurant_rating);
        Restaurant_timings = (TextView) findViewById(R.id.Restaurant_timings);
        Restaurant_phone = (TextView) findViewById(R.id.Restaurant_phone);
        Restaurant_Locationname = (TextView) findViewById(R.id.Restaurant_location);
        Restaurant_cityname = (TextView) findViewById(R.id.Restaurant_city);
        Restaurant_cuisinename = (TextView) findViewById(R.id.Restaurant_cuisine);

    and Image View

imgfooter = (ImageView) findViewById(R.id.footerimage); 
```

为所有在 xml 布局中添加这个`android:id="@+id/...."`

```
<....
             android:id="@+id/...."
            .
            .
            .
            /> 
```

# php - 无法使 get_file_contents 读取西里尔文文件名。PHP

> ID：15473653
> 
> 赞同：0
> 
> 时间：2013-03-18T09:43:03.087
> 
> 标签：php, urlencode

这是我的 news.php 文件：

```
<form action="create_file.php" method="post" class="form-horizontal"/>
   <label class="control-label">Заглавие:</label>
      <div class="controls">
         <input name="name" type="text" width="40" class="span6 m-wrap" />
         <input type="submit" value="Продължи..." class="btn red"></input>
      </div>
</form> 
```

这是我的 create_file.php

```
<?php
$pre_file_name = $_POST['name'];

$ext = ".txt";

$file_name = $pre_file_name.$ext;

fopen($file_name,'w');
?>
<form action="edit_file.php" method="post" class="form-horizontal"/>
   <label class="control-label">Въведете новината (текст):</label>
      <div class="controls">
         <span class="field"><textarea class="span6 m-wrap" name="edit" cols="1600" rows="10"></textarea></span><p>
         <input type="hidden" name="file_name" value="<?php echo $file_name; ?>">
         <input class="btn red" type="submit" value="Създай!">
      </div>
</form> 
```

这是我的edit_file.php：

```
<?php
$edit = $_POST['edit'];

$file_name = $_POST['file_name'];

$file = fopen($file_name, 'w');

fwrite($file,$edit);

fclose($file);

header("Location: news-success.php");

?> 
```

删除.php

```
 <?php 
$file = $_GET['name'];
unlink($file);

header('Location: news-delok.php');

?> 
```

编辑.php

```
<?php
$file_name = $_GET['name'];

$file_read = fopen($file_name,"r");
$contents = fread($file_read, filesize($file_name));
fclose($file_read);

?>
<html>
<form action="edit_file.php" method="POST">
  <label>Title:</label>
  <input class="span6 m-wrap" type="text" placeholder="<?php $array = explode(".",$file_name); echo $array[0] ?>" disabled=""><br>
  <label>Text:</label>
  <textarea class="span6 m-wrap" name="edit" cols="420" rows="10"><?php echo $contents ?></textarea><p>
  <input type="hidden" name="file_name" value="<?php echo $file_name ?>">
  <input class="btn red" type="submit" value="Update!">
                            </form> 
```

如何使脚本检查文件名中是否有空格（例如 News 1.txt）并用 + 替换它们（例如 News+1.txt）？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:52:53.633

对于您的**create_file.php**，请执行以下操作（经过测试）。

例如：如果您的页面标题是“ **page 1** ”，中间有一个空格，它将创建页面“ **page_1.txt** ”，并在其间添加下划线。如果需要，下划线可以替换为“ **+** ”或任何其他有效字符。

```
<?php
$ext = ".txt";
$pre_file_name = $_POST['name'];
$file_name = $pre_file_name.$ext;
$file_name = str_replace(" ", "_", $pre_file_name.$ext);
fopen($file_name,'w');
?>
<form action="edit_file.php" method="post" class="form-horizontal"/>
<label class="control-label">Enter the new (text):</label>
<div class="controls">
<span class="field"><textarea class="span6 m-wrap" name="edit" cols="1600" rows="10"></textarea></span><p>
<input type="hidden" name="file_name" value="<?php echo $file_name; ?>">
<input class="btn red" type="submit" value="Create one!">
</div>
</div>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:42:43.083

删除文件名之间的空格 在以下行之后 使用**str_replace()**`$pre_file_name = $_POST['name'];`

你的代码将是

```
$pre_file_name = $_POST['name'];

$new_file_name = str_replace(" ", "+", $pre_file_name); 
```

# sql - 为 UUID 插入触发器之前的 MariaDB

> ID：15473654
> 
> 赞同：2
> 
> 时间：2013-03-18T09:43:05.763
> 
> 标签：sql, triggers, uuid, mariadb

我在Windows 64 平台上使用**MariaDB 5.5.29 。**我创建了这张表：

```
CREATE TABLE DM_COUNTRIES
(
    COUNTRY_UUID BINARY(16) NOT NULL,
    C_NAME VARCHAR(255) NOT NULL UNIQUE,
    C_LOCALNAME VARCHAR(255) DEFAULT NULL,
    C_COUNTRYCODE VARCHAR(255) DEFAULT NULL,
    PRIMARY KEY (COUNTRY_UUID)
)
ENGINE=InnoDB; 
```

现在我想确保，如果未提供 UUID（将其作为主键）会自动插入。因此，我创建了这个触发器：

```
DELIMITER |
CREATE TRIGGER TRIG_BI_DM_COUNTRIES
BEFORE INSERT ON DM_COUNTRIES
FOR EACH ROW
BEGIN
    IF NEW.COUNTRY_UUID IS NULL THEN
        SET NEW.COUNTRY_UUID = UUID();
    END IF;
END|
DELIMITER ; 
```

确保所有内容都已提交（即使架构更改不需要它）：

```
COMMIT; 
```

现在，当我尝试用这个插入新行时：

```
INSERT INTO DM_COUNTRIES
    (C_NAME, C_LOCALNAME, C_COUNTRYCODE)
VALUES
    ('Großbritannien', 'Great Britain', 'UK'); 
```

我希望触发器将新的 UUID 放置到位，然后成功插入表中。但是会发生什么：

```
错误代码：1364。字段 'COUNTRY_UUID' 没有默认值
```

这绝对是正确的答案，因为我没有提供 UUID。触发器应该自动填充它。

我试图用 unhex 来制定触发器，只是为了确保生成的值适合该字段：

```
DELIMITER |
CREATE TRIGGER TRIG_BI_DM_COUNTRIES
BEFORE INSERT ON DM_COUNTRIES
FOR EACH ROW
BEGIN
    IF NEW.COUNTRY_UUID IS NULL THEN
        SET NEW.COUNTRY_UUID = UNHEX(REPLACE(UUID(), '-', ''));
    END IF;
END|
DELIMITER ; 
```

结果还是一样。

问题是：我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T10:45:19.870

我认为问题在于该列没有定义默认值 - 我们不能放`DEFAULT NULL`，因为它是主键。

尝试`DEFAULT 0`在列定义中添加一个值并将触发器内的条件更改为`IF NEW.COUNTRY_UUID = 0 THEN`：

```
DELIMITER |

CREATE TABLE DM_COUNTRIES
(
    COUNTRY_UUID BINARY(16) NOT NULL DEFAULT 0,         -- changed here
    C_NAME VARCHAR(255) NOT NULL UNIQUE,
    C_LOCALNAME VARCHAR(255) DEFAULT NULL,
    C_COUNTRYCODE VARCHAR(255) DEFAULT NULL,
    PRIMARY KEY (COUNTRY_UUID)
)
ENGINE=InnoDB |

CREATE TRIGGER TRIG_BI_DM_COUNTRIES
BEFORE INSERT ON DM_COUNTRIES
FOR EACH ROW
BEGIN
    IF NEW.COUNTRY_UUID = 0 THEN                        -- and here
        SET NEW.COUNTRY_UUID = UUID();
    END IF;
END |

INSERT INTO DM_COUNTRIES
    (C_NAME, C_LOCALNAME, C_COUNTRYCODE)
VALUES
    ('Großbritannien', 'Great Britain', 'UK') |

DELIMITER ; 
```

在**[SQL-Fiddle](http://sqlfiddle.com/#!2/90e2d/1)**测试（在 MySQL 5.5，没有可用的 MariaDB 实例）

# db2 - 使用内部联接的 DB2 更新

> ID：15473658
> 
> 赞同：1
> 
> 时间：2013-03-18T09:43:24.057
> 
> 标签：db2, sql-update, inner-join

我想使用 INNER JOIN 在 DB2 表上创建一个 UPDATE 语句我试试这个

```
update TABLE1 set FIELDVALUE='text/html' from TABLE1 as T1 
inner join TABLE2 as T2 on T1.PROFILE_ID = T2.PROFILE_ID 
inner join TABLE3 as T3 on T2.MSGTYPE_ID = T3.MSGTYPE_ID 
where T1.NAME='contentType' and T3.NAME='Order'; 
```

我提到选择工作正常

```
select * from TABLE1 as T1 inner join TABLE2 as T2 
on T1.PROFILE_ID = T2.PROFILE_ID 
inner join TABLE3 as T3 on T2.MSGTYPE_ID = T3.MSGTYPE_ID 
where T1.NAME='contentType' and T3.NAME='Order'; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T19:41:58.623

Db2 不允许“更新 + 加入”语法。但是，您可以像这样重写您的 sql（未经测试）：

```
update TABLE1 set FIELDVALUE='text/html' 
where table1.primary_key in (
(
    select t1.primary_key
    TABLE1 as T1 
    inner join TABLE2 as T2 on T1.PROFILE_ID = T2.PROFILE_ID 
    inner join TABLE3 as T3 on T2.MSGTYPE_ID = T3.MSGTYPE_ID 
    where T1.NAME='contentType' and T3.NAME='Order'
); 
```

# mysql - 版本化池中的最新变量

> ID：15473662
> 
> 赞同：1
> 
> 时间：2013-03-18T09:43:39.643
> 
> 标签：mysql

对于一个项目，我需要跟踪大量变量。它需要被记录，哪个用户更改了哪个变量等。该表看起来（简化为一种变量类型）像这样（id 是一个替代键，用于区分版本化条目）：

```
id | variable_id | change_time | change_user | change_task | revision | value
1    1             some date     1             123           1          Hello World
2    2             some date     1             123           1          22.5
3    1             some date     2             456           2          Foo Bar 
```

要检索最新的修订集（此处为条目 2 和 3），我使用此处描述的解决方案： [检索每个组中的最后一条记录](https://stackoverflow.com/questions/1313120/retrieving-the-last-record-in-each-group)

结果查询如下所示：

```
SELECT 
   v1.id,
   v1.value 
FROM 
  variable_history AS v1
LEFT JOIN 
  variable_hisotry AS v2 
ON 
  (
    v1.variable_id = v2.variable_id AND 
    v1.revision < v2.revision
  ) 
WHERE 
  v2.id IS NULL 
```

现在我需要修改该查询，以便适用以下规则：

*   查询最新变量应返回第 2 行和第 3 行
*   *查询任务 456*的最新变量应返回第 2 行和第 3 行
*   *查询任务 123*的最新变量应返回第 1 行和第 2 行（出于历史目的）

棘手的是，并非每个任务都一直在更改（更新）所有变量，所以我不能简单地查询任务 X 的所有变量。相反，我必须为任务 X 获取变量，如果有的话，但对于所有其他变量，来自 ANY task < X 但具有最高修订版本的变量。（并排除后期任务的修订）

对于任何情况，结果都应包含所有变量。所以在这个小例子中，它总是应该有 2 行。

编辑：

* * *

查询

```
 SELECT 
       v1.id,
       v1.value 
    FROM 
      (SELECT * FROM variable_history WHERE change_task <= 123) AS v1
    LEFT JOIN 
      (SELECT * FROM variable_history WHERE change_task <= 123) AS v2 
    ON 
      (
        v1.variable_id = v2.variable_id AND 
        v1.revision < v2.revision
      ) 
    WHERE 
      v2.id IS NULL 
```

按预期工作。然而，每天有大约 10.000 个条目，我不满意双子*选择*，然后是一个连接......

[http://sqlfiddle.com/#!2/cfda03/2](http://sqlfiddle.com/#!2/cfda03/2)

编辑：嗯，另一方面：variable_history 的每一行也绑定到一个 entity_id 和 ofc。将 2 个子选择限制为一个有问题的实体会将表大小减少到某处。像150个不同的变量......所以不应该是一个性能问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:08:36.107

```
SELECT v.*
FROM   (
         SELECT   variable_id, MAX(revision) revision
         FROM     variable_history
         GROUP BY variable_id
       ) very_latest LEFT JOIN (
         SELECT   variable_id, MAX(revision) revision
         FROM     variable_history
         WHERE    change_task = ?
         GROUP BY variable_id
       ) task_latest USING (variable_id)
  JOIN variable_history v
    ON v.variable_id = very_latest.variable_id
   AND v.revision = COALESCE(task_latest.revision, very_latest.revision) 
```

# r - 在 1 个函数内的 1 个 PDF 中创建 3 个 GGplots

> ID：15473666
> 
> 赞同：0
> 
> 时间：2013-03-18T09:43:49.097
> 
> 标签：r, ggplot2

我想创建 2 个简单矩阵（见下文）和 3 个简单图的 .PDF。

我遇到的问题是，如果我尝试在 1 个 PDF 中制作 3 个 ggplots，我只会得到 PDF 中的最后一个图。

我做了两个矩阵的一些例子：

```
testM1<-structure(c(3.97324499399863e-10, 3.4941052533535e-09, 0.000223879747651954, 
0.000317346286270709, 4.95475331444513e-05, 9.37455248795082e-06, 
0.00479174197985962, 0.0117719601999346, 1.95538874649056e-05, 
0.0112286943879835, 0.00938438613835775, 4.94275399906971e-05, 
0.0707123514324416, 0.272635105975824, 0.0017364758608557, 2429999.00716101, 
647545.748442555, 376514.280488326, 357881.804554609, 312416.957044385, 
311751.97469005, 307725.707067659, 290422.886020279, 263015.211836681, 
257847.262909701, 249313.738258419, 236842.707415477, 229077.242836832, 
225838.837415727, 222252.913031706), .Dim = c(15L, 2L), .Dimnames = list(
    NULL, c("tRapAffinities", "score")))

testM2<-structure(c(0.541113046067412, 0.0702310495185636, 6.51934974465011, 
7.32828989739312, 6.15333571096081, 5.41881440001279, 3.90607027852561, 
6.73133704899702, 6.39382638746547, 5.08064000102212, 4.82103531583203, 
5.4283713899347, 6.24047041218676, 8.8615052151427, 5.67248639940994, 
2429999.00716101, 647545.748442555, 376514.280488326, 357881.804554609, 
312416.957044385, 311751.97469005, 307725.707067659, 290422.886020279, 
263015.211836681, 257847.262909701, 249313.738258419, 236842.707415477, 
229077.242836832, 225838.837415727, 222252.913031706), .Dim = c(15L, 
2L), .Dimnames = list(NULL, c("mashAffinities", "score"))) 
```

要使用该`GGPLOT()`函数，我需要转换 data.frame 中的矩阵（参见函数）

```
plotAll<-function(rankedtRapdf = testM1, rankedMashdf = testM2) {
  rankedtRapdf <- as.data.frame(rankedtRapdf)
  rankedMashdf <- as.data.frame(rankedMashdf)
  l<- ggplot()
  l + geom_point(aes(x=rankedtRapdf$tRapAffinities,y=rankedtRapdf$score)) + scale_x_log10() + scale_y_log10()

  t <- ggplot()
  t + geom_point(aes(x=rankedMashdf$mashAffinities,y=rankedMashdf$score), colour = "red")

  k <- ggplot()
  k + geom_point(aes(x=rankedMashdf$mashAffinities,y=log10(rankedtRapdf$tRapAffinities), colour = "darkred"))+
    ggtitle('Measured Mash affinities VS. measured tRap affinities') +
    theme_bw() + labs(x="MASH affinities", y="log10() tRap affinities") +
    theme(axis.title=element_text(face="bold.italic", size="12", color="brown"), legend.position="top")
} 
```

当我尝试在调用中运行此函数时，`pdf()`我只能得到最后一个情节。

我怎样才能一次制作这 3 个图，以便它可以应用于多个数据集？

ps 我遇到的另一个问题是，如果我在函数中将矩阵转换为 data.frame，我会收到以下错误： eval 中的错误（expr，envir，enclos）：找不到对象 'rankedMashdf'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:35:13.633

是否有某些原因需要使用函数来绘制这些？

你可以像这样更简单地做到这一点。您正在寻找的选项是`onefile = TRUE`.

```
rankedtRapdf <- as.data.frame(testM1)
rankedMashdf <- as.data.frame(testM2)
l <- ggplot( rankedtRapdf  )+
  geom_point( aes( x = tRapAffinities , y = score ) ) + 
  scale_x_log10() + 
  scale_y_log10()

t <- ggplot( rankedMashdf )+
  geom_point(aes( mashAffinities , y = score ), colour = "red")

k <- ggplot( rankedMashdf ) +
  geom_point( aes( mashAffinities , y = log10( rankedtRapdf$tRapAffinities ), colour = "darkred"))+
  ggtitle('Measured Mash affinities VS. measured tRap affinities') +
  theme_bw() + labs(x="MASH affinities", y="log10() tRap affinities") +
  theme(axis.title=element_text(face="bold.italic", size="12", color="brown"), legend.position="top")

# Print all plots to pdf
pdf( "~/myplots.pdf" , onefile = TRUE )
print(l)
print(t)
print(k)
dev.off() 
```

![在此处输入图像描述](../Images/242f041c2b175994e8b784f621f5b2bb.png)

# android - 如何从列表中获取最佳当前地址 对于相同的纬度和经度？

> ID：15473667
> 
> 赞同：0
> 
> 时间：2013-03-18T09:43:54.733
> 
> 标签：android, gps, location

我正在构建一个检测用户当前位置的 android 应用程序。我能够获得最佳位置。但是当我这样做时我没有获得最佳地址：

```
List<Address> addresses = gc.getFromLocation(lat, lng, 1); 
```

当我为相同的纬度和经度检索超过 1 个地址时，其中一个地址是正确的。

```
List<Address> addresses = gc.getFromLocation(lat, lng, 3); 
```

我的问题是如何比较收到的地址列表以获得最佳当前地址。任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:04:28.520

getFromLocation 返回结果或结果取决于 maxResults 参数。如果将其设置为 1，您将获得 1 个结果，如果将其设置为 3，您将获得 3 个结果（如果有）。

但你无法知道哪个是最好的，但你可以假设 1\. 是最好的

> 参数
> 
> 纬度 纬度 搜索点
> 
> longitude 经度 搜索点
> 
> maxResults **要返回的最大地址数。建议使用较小的数字（1 到 5）**

# asp.net - 从列表视图中删除项目时出错

> ID：15473670
> 
> 赞同：0
> 
> 时间：2013-03-18T09:44:10.067
> 
> 标签：asp.net

你好，

我这里有问题。我得到了一个数据表，数据显示在列表视图中。这是后面的代码功能。

```
Protected Sub ListView1_ItemCommand(ByVal sender As Object, ByVal e As ListViewCommandEventArgs)
        If (e.CommandName) = "Sort" Then
            Dim txteno As Label = DirectCast(e.Item.FindControl("lblID"), Label)
            /* Error here Dim deletecommand As String = "delete from dt where ID=" & Convert.ToInt32(txteno.Text)
            Session("dt").DeleteCommand = deletecommand
        End If
    End Sub 
```

事情是当我按下删除按钮时出现错误，说“输入字符串的格式不正确”。有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:05:21.360

您的问题是您无法`e.Item.FindControl`从该`ListView_ItemCommand`方法访问。

`FindControl`唯一适用于渲染时间，即在方法`ListView_ItemDataBound`中。

一种可能的解决方案是从列表中或直接从数据库中检索项目。为此，您可以使用`e.Item.DataItemIndex`来检索行的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:53:49.150

问题是由

`Convert.ToInt32(txteno.Text)`

并且 的值`txteno.Text`不是有效的整数。

`txteno.Text`尝试运行代码时的价值是什么？

作为一种解决方法，请`Integer.TryParse`改用。

```
Dim number As Integer

If Integer.TryParse(txteno.Text, number) Then

 ' Do the delete....
End If 
```

# c# - C# 在 LINQ 中定义 LET

> ID：15473671
> 
> 赞同：2
> 
> 时间：2013-03-18T09:44:16.333
> 
> 标签：c#, linq, templates, let

我有多个使用相同 LET 变量的 LINQ 查询，我想以某种方式预定义这些查询。

```
IQueryable<RouteQueryModel> query =
    (from b in db.routes
     let avg_rating = b.ratings.Any() ? 
         b.ratings.Select(r => r.rating1).Average() : 
         0
     let distance_to_first_from_me = b.coordinates.
         Select(c => c.position).
         FirstOrDefault().
         Distance(DbGeography.FromText(currentLocation, 4326))
     let distance_to_last_from_me = b.coordinates.
         OrderByDescending(c => c.sequence).
         Select(d => d.position).
         FirstOrDefault().
         Distance(DbGeography.FromText(currentLocation, 4326))
     let distance_to_from_me = distance_to_first_from_me < distance_to_last_from_me ? 
         distance_to_first_from_me : 
         distance_to_last_from_me
     where b.endpoints.Any(e => values.Any(t => t == e.town.town_id))
     select new RouteQueryModel 
     { 
         b = b, 
         distance_to_from_me = distance_to_from_me.Value, 
         avg_rating = avg_rating
     }
 ); 
```

我在 8 个不同的查询中使用这三个 distance_to LET，有没有办法为我可以在查询中使用的模板制作模板？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T09:58:06.583

有一种[预编译 LINQ 查询](http://msdn.microsoft.com/en-us/library/bb896297.aspx)的简单方法：

```
var distanceToFirstFromMe =
    CompiledQuery.Compile<Route, GeoCoordinates, Distance>((route, currentLocation) => {
        return route.coordinates
            .Select(c => c.position)
            .FirstOrDefault()
            .Distance(DbGeography.FromText(currentLocation, 4326));
    }); 
```

要在查询中使用它们，您可以简单地调用它们：

```
IQueryable<RouteQueryModel> query =
    (from b in db.routes
     let avg_rating = b.ratings.Any() ? 
         b.ratings.Select(r => r.rating1).Average() : 0
     let distance_to_first_from_me = distanceToFirstFromMe(b, currentLocation)
     // ... 
```

# asp.net - 将下拉列表绑定到已在编辑时网格视图上的 ItemTemplate 中显示的值

> ID：15473673
> 
> 赞同：0
> 
> 时间：2013-03-18T09:44:27.040
> 
> 标签：asp.net, c#-4.0

我必须将我的下拉列表值绑定到我的编辑模板。下面是我的下拉列表的代码。

```
 protected void GridView2_RowDataBound(object sender, GridViewRowEventArgs e)
{
    //Check if this is our Blank Row being databound, if so make the row invisible
    if (e.Row.RowType == DataControlRowType.DataRow)
    {

        if (((DataRowView)e.Row.DataItem)["CertificateNo"].ToString() == String.Empty) e.Row.Visible = false;
        //Check if is in edit mode
       if ((e.Row.RowState & DataControlRowState.Edit) > 0)
        {
            DropDownList DropDownListStatus = (DropDownList)e.Row.FindControl("DropDownListStatus");
            //Bind status data to dropdownlist
            DropDownListStatus.DataTextField = "Status";
            DropDownListStatus.DataValueField = "Status";
            DropDownListStatus.DataSource = RetrieveStatus();
            DropDownListStatus.DataBind();
            DataRowView dr = e.Row.DataItem as DataRowView;
            DropDownListStatus.SelectedValue = dr["Status"].ToString();
           }

    }
}

private DataTable RetrieveStatus()
{
    //fetch the connection string from web.config
    string connString = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
    //SQL statement to fetch entries from products
    string sql = @"Select distinct Status from cpd_certificates";
    DataTable dtStatus = new DataTable();
    //Open SQL Connection
    using (SqlConnection conn = new SqlConnection(connString))
    {
        conn.Open();
        //Initialize command object
        using (SqlCommand cmd = new SqlCommand(sql, conn))
        {
            SqlDataAdapter adapter = new SqlDataAdapter(cmd);
            //Fill the result set
            adapter.Fill(dtStatus);
        }
    }
    return dtStatus;
} 
```

上面的代码填充了我的下拉列表。但是，当我单击编辑时，我的下拉列表未填充。这是我的下拉列表代码：

```
<asp:TemplateField HeaderText="Status" SortExpression="Status">
                                            <ItemTemplate><%# Eval("Status")%></ItemTemplate>
                                            <EditItemTemplate>
                                                <asp:DropDownList ID="DropDownListStatus" runat="server">
                                                </asp:DropDownList>

                                            </EditItemTemplate>
                                            <FooterTemplate>
                                                <asp:DropDownList ID="DropDownListStatus" runat="server" >

                                                </asp:DropDownList>

                                            </FooterTemplate>
                                        </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:41:27.560

快速浏览一下您的代码，您发现将值分配给下拉列表的顺序有误。首先将数据源分配给下拉列表，然后在数据源分配后分配 datavalue-field 和 datatext-field 属性。

```
 DropDownListStatus.DataSource = RetrieveStatus();
 DropDownListStatus.DataTextField = "Status";
 DropDownListStatus.DataValueField = "Status"; 
```

# web-applications - 用于大型应用程序的主干.js

> ID：15473674
> 
> 赞同：2
> 
> 时间：2013-03-18T09:44:29.373
> 
> 标签：web-applications, backbone.js, scalability

我目前正在阅读 Backbone.js，以深入研究这个漂亮、轻量级的框架，同时也决定这是否适合我在未来的一些项目中使用。在阅读 Backbone 时，我似乎总是遇到一件事，它是一个主要为小型（或更小）大小的 Web 应用程序创建和使用的框架，例如Backbone.js 官方网站上的教程示例**todos 。**

我有兴趣了解其他人使用 Backbone.js 及其可扩展性的经验。人们通常会反对将 Backbone.js 用于结构更复杂、功能更多的 Web 应用程序，而不仅仅是一个简单的“待办事项”应用程序等吗？

我已经阅读了一些关于 SO 的其他问题，这些问题为我提供了一些见解，但我仍然想念关于这个的“讨论”。

每一个输入都将受到高度赞赏。

干杯，
-梅斯蒂卡

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T10:47:17.270

我认为您错过了关于 todomvc 项目的要点，该项目旨在演示各种 JavaScript 框架（包括更全功能的框架，如[ember](http://emberjs.com/)和[Angular](http://angularjs.org/)）的使用，并允许比较您使用每种框架所采用的方法。

todo 项目被选为一个相当简单的例子，它仍然可以用来演示各种框架的许多核心特性。如果示例应用程序更复杂，那么它作为快速比较的方法就没有那么有用了。

Backbone，尽管非常轻量级和非限制性，仍然可以用作更复杂的 Web 应用程序的基础，特别是如果您将它与诸如[requirejs](http://requirejs.org/)（用于模块化 JavaScript 开发）和[Marionette](https://github.com/marionettejs/backbone.marionette)（用于 Backbone 的复合应用程序库）等支持库结合使用.

如果您仍然需要说服力，请查看[此页面](https://github.com/documentcloud/backbone/wiki/Projects-and-Companies-using-Backbone)，其中列出了一些基于骨干网的野外应用程序。

# twitter-bootstrap - 使用 Twitter Bootstrap 的 2 列布局

> ID：15473680
> 
> 赞同：0
> 
> 时间：2013-03-18T09:44:45.270
> 
> 标签：twitter-bootstrap

我正在尝试使用 Twitter Bootstrap 进行 2 列布局。为了简单起见，假设我们使用 Jade：

```
.container
  .row
    .span3
      label Email:
      input(type="text")
      label Password:
      input(type="text")
      input(type="submit")
    .span9
      h1 Hello, world!
      p This is a paragraph. 
```

所以，我的主要问题是**输入的宽度小于 span3，当我为输入指定 .span3 时，它会破坏网格布局，同时调整 .span3 的大小**。

还有一个常见的问题：BS 中元素类的主要规则是什么？我应该将所有元素包装在 .spanN 中吗？这段代码：

```
.row
  .span3
    h1 Hello 
```

工作方式与简单相同：

```
.row
  h1.span3 Hello 
```

一切都在我的脑海里搞砸了:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:39:47.093

尝试在您的输入上使用“输入块级”类。

例如

```
<input type="text" class="btn input-block-level"> 
```

要拥有全宽的按钮元素，您可以尝试将它们的宽度设置为 100% 并使它们显示块，例如

```
button {
    display: block;
    width: 100%;
} 
```

请记住，为该按钮添加填充和/或边框会使按钮的宽度大于 100%，因此在这种情况下，您还可以在其上设置 box-sizing。

```
button { 
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

# php - Javascript 大小和下载速度

> ID：15473681
> 
> 赞同：0
> 
> 时间：2013-03-18T09:44:48.593
> 
> 标签：php

我有一堆 javascript/css/img 源。我想计算它们的大小以及下载它们需要多长时间。可以使用 cURL 吗？希望看到关于我应该为此使用什么 cURL 函数的建议。或者我应该为此使用其他东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:48:26.520

在这种情况下，我真的不知道 curl，但一个有用的工具是 Firefox 的“Why Slow”或 YSlow 扩展：

[https://addons.mozilla.org/en-US/firefox/addon/yslow/](https://addons.mozilla.org/en-US/firefox/addon/yslow/)

它分析您的页面下载的每个资源，并以非常有用的方式呈现它，每个资源使用的毫秒数等。它还提供了如何改进结果的提示。

YSlow 也可以集成到 Firebug 中。

当然，它给你的东西很大程度上取决于你使用的连接，结果会根据每个客户端使用的每个连接而有所不同。但是，它可以让您大致了解哪些资源正在耗尽品牌，瓶颈在哪里等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:48:36.000

**您无法使用 curl 进行预先计算。**

但是您可以在完成请求后使用[curl_getinfo](http://www.php.net/manual/en/function.curl-getinfo.php)**进行后****计算**。

 **它将返回有关请求的一系列信息。

你需要的这个数组的键是：

CURLINFO_TOTAL_TIME - 上次传输的总事务时间（以秒为单位） CURLINFO_NAMELOOKUP_TIME - 名称解析完成前的时间（以秒为单位） CURLINFO_CONNECT_TIME - 建立连接所用的时间（以秒为单位） CURLINFO_PRETRANSFER_TIME - 从开始到文件传输开始之前的时间（以秒为单位） CURLINFO_STARTTRANSFER_TIME - 直到完成的时间（以秒为单位）第一个字节即将被传输

对于尺寸：

CURLINFO_SIZE_UPLOAD - 上传的
总字节数 CURLINFO_SIZE_DOWNLOAD - 下载的总字节数

希望能帮助到你。**

# java - Java 在 return 语句后执行方法吗

> ID：15473682
> 
> 赞同：1
> 
> 时间：2013-03-18T09:44:57.407
> 
> 标签：java, return

如果将执行 return 语句之后的方法或者它只是被视为一个变量，我只是感到困惑。例子：

```
public boolean onSystemChecked(boolean dubug){
  if(this.isActivated()) {
    return this.ActivateAction();
  } else {
    if(debug) {   
      System.out.println("[Debug] System Off!");
    } 
  }
  return false;
} 
```

this.ActivateAction() 会执行吗？非常感谢你！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:46:58.957

> this.ActivateAction() 会执行吗？

是的。

```
return this.ActivateAction(); 
```

相当于

```
boolean b = this.ActivateAction();
return b; 
```

> 如果将执行 return 语句之后的方法

`this.ActivateAction()`不在 return 语句之后，而是 return 语句**的一部分。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T09:46:25.440

> this.ActivateAction() 会执行吗？

是的。否则该方法将不知道返回什么！

return 语句首先*计算*表达式，然后返回该值。当然，对于只有一个 return 语句的 void 方法

```
return; 
```

没有什么可评价的。

[有关详细信息，请参阅Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.17)的第14.17 节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T09:53:14.413

'return' 实际上返回值，而不是方法。所以方法的目的是处理并提供一个结果，只有在'return'之后才能返回一个值（value = this.ActivateAction()的输出）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T09:46:30.823

**是**的，它将被执行。它不是在您的`return`声明之后，而是该`return`方法的值也将成为`return`该方法的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T09:47:51.663

是的，`this.ActivateAction()`将被执行并返回该方法的答案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T09:59:41.307

**是的。** `this.ActivateAction()`即使是`recursive`方法调用也会执行并返回最后一个结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T10:03:50.473

'this' 是对当前实例的引用

所以当你写

```
this.ActivateAction() 
```

您正在使用当前实例来调用方法，因为您的对象不是 null ，因此将调用方法 'ActivateAction'。

调用后，该方法执行并根据其定义返回一些值。

所以无论你是否在它之前写return都没有关系

```
this.ActivateAction() 
```

将始终使用当前实例并调用“ActivateAction”方法并返回一些值。

现在因为它返回一些值

因此

```
return this.ActivateAction() 
```

仅表示返回该值，此处的“返回”没有特殊作用。

# c - C如何比较2个未知类型的元素

> ID：15473684
> 
> 赞同：0
> 
> 时间：2013-03-18T09:45:00.170
> 
> 标签：c, equality

```
vector_dinamic *creeaza_vector()
{
    vector_dinamic *v=malloc(sizeof(vector_dinamic)*capacitate_initiala);
    v->Element=malloc(sizeof(Elements)*capacitate_initiala);
    v->lungimea=0;
    v->capacitatea=capacitate_initiala;
    return v;

} 
```

这是一个动态向量，其中lunimea 是长度，capacitatea 是容量。capcacitatea_initiala 是 100，这意味着我可以存储 100 个元素。

```
typedef void* Elements;

typedef struct{
    Elements * Element;
    int lungimea;
    int capacitatea;

} vector_dinamic; 
```

我也有这种类型的元素，为了能够在我的向量中存储不同类型的元素，我已经设法进行了添加，但我的问题是如何比较相同类型的两个元素，我想实现删除功能，但我正在努力比较两个元素

```
typedef struct{
    int numar_apartament;
    int suma;
    char * tipul;
} Cheltuieli; 
```

我有这个元素类型，现在有人可以告诉我如何通过“numar_apartament”比较我的通用向量中的元素吗？

```
void modifica(vector_dinamic * vector, int numar_apartament)
{
    int i,a=0;
    for (i=0;i<vector->lungimea;i++)
    {
        if (vector->Element[i]->numar_apartament)==element->numar_apartament)
            a=1;
    }
    return a;

} 
```

这是我尝试过的，但我得到了很多错误而且它不起作用......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:53:44.567

`void`指针没有任何特定的类型，这就是为什么它们可以指向任何东西。您必须将`void`指针转换为它们指向的实际类型，以便能够取消引用它们：

```
((Cheltuieli *) vector->Element[i])->numar_apartament 
```

你也有括号的问题，你缺少一个左括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:01:14.813

主要思想是获取指向要比较的变量的指针并使用 memcmp 进行比较。还纠正了一些编译错误，下面是修改后的代码。检查它是否有帮助！

```
#include "malloc.h"
#include "memory.h"

typedef void* Elements;

typedef struct{
    Elements * Element;
    int lungimea;
    int capacitatea;

} vector_dinamic;

typedef struct{
    int numar_apartament;
    int suma;
    char * tipul;
} Cheltuieli;

vector_dinamic *creeaza_vector()
{
    int capacitate_initiala = 10;
    vector_dinamic *v = (vector_dinamic *)malloc(sizeof(vector_dinamic)*capacitate_initiala);
    v->Element= (Elements *)malloc(sizeof(Elements)*capacitate_initiala);
    v->lungimea = 0;
    v->capacitatea = capacitate_initiala;
    return v;

}

int modifica(vector_dinamic *vector, int numar_apartament)
{
    int i, a = 0;
    Cheltuieli **tmp = (Cheltuieli **)&(vector->Element);
    for (i = 0; i < vector->lungimea; i++)
    {
        if ((memcmp(&(tmp[i])->numar_apartament, &numar_apartament, sizeof(int)) == 0))
            a = 1;
    }
    return a;

} 
```

# python - WxPython 文件对话框

> ID：15473689
> 
> 赞同：0
> 
> 时间：2013-03-18T09:45:06.640
> 
> 标签：python, wxpython, tkinter

我正在 wxPython 中构建一个应用程序，我在博客的某个地方读到，您不能同时在同一个应用程序上使用 wx.FD_OPEN 和 wx.FD_SAVE，这是真的吗？

如果这是真的，这是否意味着我必须搬到 Tkinter？

**编辑**：我目前拥有的。

```
 SAVE_FILE_ID = wx.NewId()
      self.Bind(wx.EVT_MENU, self.saveFile, id=SAVE_FILE_ID)

      LOAD_FILE_ID = wx.NewId()
      self.Bind(wx.EVT_MENU, self.loadFile, id=LOAD_FILE_ID)

      accel_tbl = wx.AcceleratorTable([(wx.ACCEL_CTRL,  ord('O'), LOAD_FILE_ID ),
                                       (wx.ACCEL_CTRL,  ord('S'), SAVE_FILE_ID )])

      self.SetAcceleratorTable(accel_tbl)

      def saveFile(self, event):
        saveFileDialog = wx.FileDialog(self, "Save As", "", "", 
                                      "Python files (*.py)|*.py", 
                                      wx.FD_SAVE | wx.FD_OVERWRITE_PROMPT)

        self.text.SaveFile(saveFileDialog.GetPath())
        event.Skip()

      def loadFile(self, event):
        openFileDialog = wx.FileDialog(self, "Open", "", "", 
                                      "Python files (*.py)|*.py", 
                                      wx.FD_OPEN | wx.FD_FILE_MUST_EXIST)

        self.text.LoadFile(openFileDialog.GetPath())
        event.Skip() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:39:22.530

我不确定我是否理解问题所在。当我将此代码放入实际运行的东西中时，它对我来说很好：

```
import wx

class MyForm(wx.Frame):

    #----------------------------------------------------------------------
    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY, "Tutorial", size=(500,500))

        # Add a panel so it looks the correct on all platforms
        panel = wx.Panel(self, wx.ID_ANY)

        SAVE_FILE_ID = wx.NewId()
        self.Bind(wx.EVT_MENU, self.saveFile, id=SAVE_FILE_ID)

        LOAD_FILE_ID = wx.NewId()
        self.Bind(wx.EVT_MENU, self.loadFile, id=LOAD_FILE_ID)

        accel_tbl = wx.AcceleratorTable([(wx.ACCEL_CTRL,  ord('O'), LOAD_FILE_ID ),
                                         (wx.ACCEL_CTRL,  ord('S'), SAVE_FILE_ID )]
                                        )
        self.SetAcceleratorTable(accel_tbl)

    #----------------------------------------------------------------------
    def loadFile(self, event):
        openFileDialog = wx.FileDialog(self, "Open", "", "", 
                                       "Python files (*.py)|*.py", 
                                       wx.FD_OPEN | wx.FD_FILE_MUST_EXIST)
        openFileDialog.ShowModal()
        openFileDialog.GetPath()
        openFileDialog.Destroy()

    #----------------------------------------------------------------------
    def saveFile(self, event):
        saveFileDialog = wx.FileDialog(self, "Save As", "", "", 
                                       "Python files (*.py)|*.py", 
                                       wx.FD_SAVE | wx.FD_OVERWRITE_PROMPT)
        saveFileDialog.ShowModal()
        saveFileDialog.GetPath()
        saveFileDialog.Destroy()

# Run the program
if __name__ == "__main__":
    app = wx.App(False)
    frame = MyForm()
    frame.Show()
    app.MainLoop() 
```

我在 Windows 7 上使用 wxPython 2.8.12.1 和 Python 2.6.6

# c# - 使用 C# 的 web 应用程序中的独立线程

> ID：15473692
> 
> 赞同：0
> 
> 时间：2013-03-18T09:45:23.860
> 
> 标签：c#, multithreading, web-applications

是否可以创建一个在服务器上运行的服务器端线程，即使网页从网页启动后关闭。之后，如果我需要停止，然后我再次打开我的页面，然后如果该线程正在运行，则按钮应显示停止。

例如，我在网页上有一个按钮。单击它会启动一个新线程，即使我关闭我的网页，它也会将当前日期和时间写入指定的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:55:42.543

您可以按请求创建一个线程，并且在处理该请求后它将继续运行。您还可以将对该线程的引用存储在静态变量中，以便下一个请求知道该线程存在并可以中止它。

然而，这根本不是一个健壮的应用程序设计。IIS 可以随时根据请求计数、内存使用情况、应用程序运行时间等多种因素回收您的应用程序池。发生这种情况时，您的线程可能会在处理过程中中止。因此，更好的设计是拥有一个单独的 Windows 服务来处理此类后台操作。

# c++ - ferror() 返回值的消息文本

> ID：15473699
> 
> 赞同：10
> 
> 时间：2013-03-18T09:45:38.553
> 
> 标签：c++, c, error-handling, io

如何获取由返回的错误代码的消息`int ferror(FILE*)`？因为`errno`有`char * strerror(int)`. ferror 返回的代码是什么？如果`char * strerror(int)`对它也有好处，那么我需要它的参考（我没有找到适合这种情况的任何指标）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T09:50:51.413

从[这个参考页面](http://pubs.opengroup.org/onlinepubs/009695399/functions/ferror.html)：

> ferror *()*函数应测试 stream 指向的流的错误指示符。

这意味着`ferror`返回一个布尔值，告诉你是否有错误，仅此而已。但根据 POSIX 规范`errno`，如果发生故障， 的值将包含错误代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-16T19:57:15.503

该库`libexplain`可以返回 ferror 的字符串。[https://linux.die.net/man/3/explain_ferror](https://linux.die.net/man/3/explain_ferror) 来自文档：

```
if (ferror(fp) < 0)
{
    fprintf(stderr, "%s\n", explain_ferror(fp));
    exit(EXIT_FAILURE);
} 
```

# php - Zend Framework 多维表单数组

> ID：15473702
> 
> 赞同：1
> 
> 时间：2013-03-18T09:45:50.747
> 
> 标签：php, zend-framework, zend-form

我需要使用 zend 框架创建一个多维数组形式。当我发布表格时，我应该能够获得以下结果作为帖子。

```
Array
(
    [Address] => Array
        (
            [customer] => Array
                (
                    [name] => Customer Name
                )

            [guest] => Array
                (
                    [name] => Guest Name
                )

        )

) 
```

由于某种原因，我无法获得上述结果。到目前为止，我得到的结果是这样的。

```
Array
(
     [customer_name] => Customer Name
     [guest_name] => Guest Name
) 
```

所以我的问题是 Zend_Form 是否支持多维表单数组？如果是怎么办？

提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T09:51:10.443

这个问题不是关于 ZF，而是关于`<form>`系统。要检索多维表单数组，您必须提供良好的**名称**属性。

在 ZF 中，要操作名称，您可以使用：

`$form->myelement->setAttrib('name', 'myname');`或者 `$form->myelement->setName('myname');`

要做到你所期望的，你必须使用如下命名形式：

```
$form->element1->setName('[address][customer][name]');
$form->element2->setName('[address][guest][name]'); 
```

使用此命名，您将能够检索多维数组中的 POST 数据。

使用子表单，您只能操作第一个维度。因此元素将具有如下命名形式：

```
$subform1->setName('customer');
$subform1->element1->setName('[address][name]');
[...]//do it for each element

$subform2->setName('guest');
$subform2->element1->setName('[address][name]');
[...]//do it for each element 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T09:29:04.887

Zend_Form_Element 的 setName() 方法被过滤并且不允许 [ 和 ]。

setBelongsTo() 方法就是为此而生的。但我不确定 setName() 和 setBelongsTo() 对可以处理多个维度。

# qlineedit - 程序从行编辑中获取输入并在行编辑中显示

> ID：15473703
> 
> 赞同：0
> 
> 时间：2013-03-18T09:45:53.067
> 
> 标签：qlineedit

嗨，我是 QT 新手，我需要一个程序来从行编辑中获取输入，并使用这些值使用这些值执行一些操作，然后将输出提供给行编辑....我写了一些代码，但它不起作用....请核实。代码：

```
enter code here
MainWindow::~MainWindow()
{
delete ui;
}

void MainWindow::on_pushButton_clicked()
{
int x,az,el,EL,AZ,a,b,c,d,e,f,g,X,Y,y;
QLineEdit lineEdit
QString az=lineEdit1->text();
QString el=lineEdit2->text();

    AZ=((az*pi)/180);
    EL=((el*pi)/180);

        a=sin(AZ);
        b=cos(AZ);
        c=cos(EL);
        d=cot(EL);
        e=b*d;
        f=-1*e;
        X=atan(f);
        g=c*a;
        Y=asinn(g);
    x=(X*180)/pi;
    y=(Y*180)/pi;

  this->ui->lineEdit3->setText("x");
  this->ui->lineEdit4->setText("y");

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T11:55:00.683

你需要的是执行一些铸造。您已经检索`az`到`el`并`QString`没有实际使用它们。

```
int x,az,el,EL,AZ,a,b,c,d,e,f,g,X,Y,y;
AZ=((az*pi)/180);// undefined int az is used here 
EL=((el*pi)/180);// undefined int el is used here 
```

还`setText ( const QString & )`需要 QString 作为参数，所以你需要转换`int x`为 QString

# magento - 处理您的请求时出现错误，错误日志记录号

> ID：15473705
> 
> 赞同：37
> 
> 时间：2013-03-18T09:45:59.327
> 
> 标签：magento, magento-1.7

我安装了 Magento，登录管理面板。但是，如果我按下任何链接以打开 CMS 页面或用户配置，我会收到如下错误：

> 处理您的请求时出错 出于安全原因，默认情况下禁用异常打印。
> 
> 错误日志记录号：673618173351

该错误日志记录号看起来像一个链接，但按下它没有任何反应。我试图在 magento 文件中查找一些日志文件，但没有找到。

所以实际上我只能连接到管理面板，但不能在这里做任何事情。

有什么问题？我安装了最新的 Magento 版本（magento-1.7.0.2）。默认前端打开并工作。

附言

.如果需要任何其他信息，请说出来

更新：

所以在日志中每个错误都是相同的（只是访问的资源不同）。

> a:5:{i:0;s:71:"无法确定临时目录，请手动指定 cache_dir";i:1;s:4546:"#0 /home/geniusinsi/domains/example.com/public_html /lib/Zend/Cache/Backend.php(197): Zend_Cache::throwException('不能阻止...')

据我了解，我需要在某处指定现金目录？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-03-18T09:48:24.573

转到`magento/var/report`并打开带有错误日志记录编号名称的文件，即`673618173351`在您的情况下。在该文件中，您可以找到错误的完整描述。

对于 和 等日志文件`system.log`，`exception.log`请转到`magento/var/log/`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-09T09:48:17.360

您可以从以下位置查看错误信息：

> Magento/var/报告

大多数情况下，这是由于数据库连接断开造成的，尤其是在本地服务器上，当人们忘记启动 XAMPP 或 WAMPP 服务器时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T10:01:13.763

您的 Magento 安装目录中有“tmp”文件夹吗？如果没有，做一个，看看是否有帮助！

编辑：如果失败，请检查 php.ini 中的 upload_tmp_dir - 确保已设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-13T19:36:58.693

在我的情况下，当 magento 自动更新时会出现这个问题。我恢复了备份并且宾果游戏开始正常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-15T17:17:41.950

从您的日志文件描述中，我看到您需要为您的 Magento 站点指定缓存文件夹。

导航到**/lib/Zend/Cache/Backend/File.php**，找到

```
'cache_dir' => null, 
```

并将其更改为

```
'cache_dir' => tmp/, 
```

请记住在 Magento 的根文件夹中创建 tmp 文件夹以使其正常工作。

参考来源：[https ://magentoexplorer.com/how-to-fix-magento-500-internal-server-errors-in-magento-and-magento-2](https://magentoexplorer.com/how-to-fix-magento-500-internal-server-errors-in-magento-and-magento-2)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-02T08:30:34.763

**将pub/local.xml.sample**重命名为**local.xml**。然后我会告诉你确切的错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-17T12:01:29.293

清除缓存，您的网站将正常运行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-24T19:09:51.027

大多数情况下，这是由于数据库连接断开造成的，尤其是在本地服务器上，当一个人忘记启动 XAMPP 或 WAMPP 服务器时，

**解决方案 -1** :- 将 pub/local.xml.sample 重命名为 local.xml 或将 pub/local.xml 重命名为 local.xml.sample 如果这不起作用尝试解决方案 2

解决方案 2：-[转到 php.ini 文件并增加 max_execution 时间并全新安装 magento 确认问题已解决](https://www.youtube.com/watch?v=jqJOohTRCgE&t=1s)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-17T08:27:53.457

一个常见的解决方案是通过运行此命令来升级 magento 设置

```
php bin/magento setup:upgrade && php bin/magento setup:di:compile 
```

否则只需检查`var/report/{error number}`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-17T07:05:36.287

我遇到了这样的问题，结果我不小心更改了 var/cache 文件夹的权限。只需删除缓存文件夹，magento 就可以自动创建具有正确权限的文件夹。

```
rm -rf root/var/cache 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2019-03-14T13:40:52.120

当 magento 模式为默认时，它会显示这样的错误 Change magento mode to developer with

```
php bin/magento deploy:mode:set developer 
```

然后在浏览器上检查您的错误并解决

# c# - 如何在运行inno setup时注册在c#中创建的com类

> ID：15473706
> 
> 赞同：1
> 
> 时间：2013-03-18T09:46:00.560
> 
> 标签：c#, com, inno-setup, pascal

我刚刚发现我可以在 c# 中编写我需要的功能，然后将其作为一个 com 库在 inno setup 中调用它。下面是我正在玩的代码。

C#代码：

```
namespace SetupUtility
{
[Guid("BC45B534-C9E7-4C43-B57C-56B77C1C6CEE")]
public interface IMyClass
{
    void WriteToFile(string filepath, string name, string orgName, string emailID);
}

 [Guid("9AB25B08-FF74-4ADA-9A16-62ADB4603A56"),
    ClassInterface(ClassInterfaceType.None)]
public class MyClass:IMyClass
{
    public void WriteToFile(string filepath,string name, string orgName, string emailID)
    {
        try
        {
            string[] strings = { name, orgName, emailID };
            File.WriteAllLines(filepath + "userDetails.txt", strings);
            MessageBox.Show("File Written Successfully");
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error: " + ex.ToString());
        }
    }
} 
```

}

下面是我努力编写的 pascal 脚本的摘录：

```
ExtractTemporaryFile('SetupUtility.dll');
Exec('{dotnet40}\regasm.exe','{tmp}\SetupUtility.dll', '', SW_SHOW,
 ewWaitUntilTerminated, ResultCode);
obj := CreateOleObject('SetupUtility.MyClass');
obj.WriteToFile('{tmp}',ContactPerson, OrgName, Email); 
```

代码编译得很好，但是当我运行设置时，我收到消息“类未注册”。错误来自哪里，可能的出路是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:14:58.543

在代码中使用和from`ExpandConstant`等常量时需要调用。`{dotnet40}``{tmp}`

您需要`[assembly:ComVisible(true)]`在您的 AssemblyInfo.cs 文件中。

不要忘记在安装完成时（包括未成功完成时）再次取消注册该组件。

就个人而言，我不会这样做——临时 COM 注册非常混乱。理想情况下，为设置任务编写本机 DLL（或者直接在 Inno 脚本中执行，如果您正在执行简单的操作，例如写入文件）。如果您出于某种原因肯定需要 .NET，那么请考虑编写一个控制台应用程序并运行它（如果需要，使用参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:50:24.297

您应该`COMVisible`首先用属性标记您的类型。查看客户端代码（创建实例的代码）也很有用。

如果您不将程序集放入 GAC（这需要您对其进行签名），则需要`regasm`使用`/codebase`switch 运行，以便注册表包含程序集的位置。我通常`/tlb`也会添加 switch，因为我喜欢有可用的类型库，并且在某些编组场景中可能需要它。

# c# - 在 CrystalReportViewer 中显示查询结果

> ID：15473711
> 
> 赞同：0
> 
> 时间：2013-03-18T09:46:24.427
> 
> 标签：c#, winforms, crystal-reports

我在我的 winform 中编写了这段代码以在 CrystalReportviewer 中显示 my_table 内容，但没有显示任何内容：

```
private void Form10_Load(object sender, EventArgs e)
        {
            String connString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\bank.mdf;Integrated Security=True;User Instance=True";
            SqlConnection conn = new SqlConnection(connString);
            SqlDataAdapter da = new SqlDataAdapter("SELECT * from my_table", conn);
            DataTable dt = new DataTable();
            da.Fill(dt);
            ReportDocument rd = new ReportDocument();
            rd.Load("CrystalReport2.rpt");
            rd.SetDataSource(dt);
            crystalReportViewer1.ReportSource = rd;
            crystalReportViewer1.Show();
        } 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:23:53.863

```
Check that your load method is getting the full path of the report,if not then use
rd.Load(Server.MapPath("CrystalReport2.rpt")) and change your programming like i
mentioned.

private void Form10_Load(object sender, EventArgs e)
        {
            String connString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\bank.mdf;Integrated Security=True;User Instance=True";
            SqlConnection conn = new SqlConnection(connString);
            SqlDataAdapter da = new SqlDataAdapter("SELECT * from my_table", conn);
            DataTable dt = new DataTable();
            da.Fill(dt);
            ReportDocument rd = new ReportDocument();
            rd.Load("CrystalReport2.rpt");
            rd.SetDataSource(dt);
            crystalReportViewer1.ReportSource = rd;
            rd.Refresh();
            this.crystalReportViewer1.ReportSource = rd;
        }
I think it will help for you. 
```

# java - Java中的PemReader

> ID：15473713
> 
> 赞同：0
> 
> 时间：2013-03-18T09:46:27.383
> 
> 标签：java, cryptography, rsa, bouncycastle, pem

我正在使用 PEMReader 并且我的这段代码不起作用。

```
protected static KeyPair doReadKeyPair(InputStream is) throws Exception {
    PemReader r = new PemReader(new InputStreamReader(is));
    return (KeyPair) r.readObject();
} 
```

错误：

```
This method readObject is undefined forfor the type PemReader. 
```

但是在许多网站上我都看到了这个解决方案，那么为什么它对他们有用而不对我有用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:53:54.167

你想做什么？PEMReader 的 javadoc 说它已被弃用，您应该使用 PEMParser

[http://www.bouncycastle.org/docs/pkixdocs1.4/org/bouncycastle/openssl/PEMReader.html](http://www.bouncycastle.org/docs/pkixdocs1.4/org/bouncycastle/openssl/PEMReader.html)

# python - 列表理解不起作用？

> ID：15473715
> 
> 赞同：-1
> 
> 时间：2013-03-18T09:46:31.937
> 
> 标签：python, list, list-comprehension

我有一个这样的for循环：

```
 for k in file1:
            shared_username = User.objects.filter(id__in= Share.objects.filter(users_id = log_id, files__file_name=k).values_list('shared_user_id', flat=True)) 
```

# 列表理解

```
shared_username = [User.objects.filter(id__in= Share.objects.filter(users_id = log_id, files__file_name=k).values_list('shared_user_id', flat=True)) for k in file1] 
```

但我得到空条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:50:00.003

您不应在此类构造中使用相等运算符。也许尝试：

```
a_list = [User.objects.filter(id__in= Share.objects.filter(users_id = log_id, files__file_name=k).values_list('shared_user_id', flat=True)) for k in file1] 
```

# java - Spring AOP - 从 catch 块调用建议

> ID：15473725
> 
> 赞同：4
> 
> 时间：2013-03-18T09:46:59.380
> 
> 标签：java, spring, aop, spring-aop

目的：每次在执行业务逻辑时发生异常时向管理员发送电子邮件。

到目前为止，我遇到了“抛出建议”，这很好，并且在目标方法引发异常时执行。

这对我来说可能效果很好，但我必须在设置请求属性和下一页方面做一些额外的处理。我不认为通过使这些对象静态来共享来自目标类的对象和建议不是一个好主意。代码场景如下图：

```
try{
   //normal processing
} catch (AuthenticationException ae) {
   ae.printStackTrace();
   req.setAttribute("msg", ae.getMessage());

   //execute advice at this point

   return loginPage;
} 
```

请。查看我想要执行建议的地方并相应地提出解决方案。

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:30:44.063

我知道您想避免使用完整的 AspectJ 而不是 Spring AOP。`handler()`（顺便说一句，我想知道为什么很多人这么害怕它。）无论如何，在 AspectJ 中，通过切入点拦截异常处理程序执行（=catch 块）真的很容易。但是有一个限制：它只适用于`before()`建议，而不是`after()`or `around()`。这是由于编译器的限制。查看异常处理程序的 JVM 字节码，您会发现无法检测处理程序块的结束。无论如何，因为这个概念与原始问题有关，所以我想在这里展示它是如何完成的。我创建了一个小驱动程序应用程序和一个非常简单的方面：

```
import java.util.Random;
import javax.naming.AuthenticationException;

public class Application {
    public static void main(String[] args) {
        Application app = new Application();
        System.out.println(app.foo(1, "two", 3d));
        System.out.println(app.bar("one", 2d, 3));
        System.out.println(app.zot(1d, 2, "three"));
    }

    public String foo(int i, String string, double d) {
        try {
            if (new Random().nextBoolean())
                throw new AuthenticationException("wrong password");
        }
        catch (AuthenticationException e) {
            return "return value from catch block";
        }
        return "normal return value";
    }

    public String bar(String string, double d, int i) {
        try {
            if (new Random().nextBoolean())
                throw new IllegalArgumentException("I don't like your arguments");
        }
        catch (IllegalArgumentException e) {
            return "return value from catch block";
        }
        return "normal return value";
    }

    public String zot(double d, int i, String string) {
        try {
            int n = 2/0;
        }
        catch (Throwable t) {
            return "return value from catch block";
        }
        return "normal return value";
    }
} 
```

如您所见，方法`foo`和`bar`抛出异常基于 ca. 50% 的情况，而`zot`总是抛出除以零异常。所以输出会因运行而异。

那么，如果所有异常都被默默吞下并且没有记录下来，我们如何找出发生了什么？像这样：

```
import java.util.logging.Logger;

public aspect ExceptionLoggingAspect {
    final Logger log = Logger.getLogger(ExceptionLoggingAspect.class.getName());

    before(Throwable t) : handler(Throwable+) && args(t) {
        log.warning(thisJoinPointStaticPart + "  ->  " + t);
    }
} 
```

这非常简单而优雅，并且适用于您的整个应用程序。这是一些测试输出：

```
Apr 6, 2013 12:15:43 PM ExceptionLoggingAspect ajc$before$ExceptionLoggingAspect$1$3d90b181
WARNING: handler(catch(AuthenticationException))  ->  javax.naming.AuthenticationException: wrong password
return value from catch block
Apr 6, 2013 12:15:43 PM ExceptionLoggingAspect ajc$before$ExceptionLoggingAspect$1$3d90b181
WARNING: handler(catch(IllegalArgumentException))  ->  java.lang.IllegalArgumentException: I don't like your arguments
return value from catch block
Apr 6, 2013 12:15:43 PM ExceptionLoggingAspect ajc$before$ExceptionLoggingAspect$1$3d90b181
WARNING: handler(catch(Throwable))  ->  java.lang.ArithmeticException: / by zero
return value from catch block 
```

在建议中，您可以做更多事情，例如访问`this`和读取/更新某些属性等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:37:25.697

**好的，在阅读了Spring in Action 之**类的参考书之后，我开始知道我们无法在我们的 java 代码中的任意点调用 spring 建议。Spring in Action 一书建议查看 AspectJ 以对切点进行细粒度控制。

为了避免添加 AspectJ，我遇到了以下解决方案，它可以帮助他人并节省他们宝贵的时间：

1) 对仅在发生异常时要调用通知的方法使用 Around 通知。就像我的情况一样，我想在发生异常并且我们退出 catch 块时发送电子邮件通知。基本上我想在调用建议之前在 catch 块中进行一些处理。

2) 在使用 Around 通知时，我们可以读取目标对象的成员变量作为方法参数。如果您想与建议共享一些数据，这也是其中一种方式。就我而言，我想从目标对象中获取有关电子邮件主题和正文的详细信息。

**周围建议的代码：**

```
import java.lang.reflect.Method;
import org.springframework.aop.AfterReturningAdvice;

public class NotificationAdvice implements AfterReturningAdvice  {
    public void afterReturning(Object returnValue, Method method,
            Object[] args, Object target) throws Throwable {
            System.out.println(returnValue);
            System.out.println(method.getName());
            System.out.println(args[0]);
            System.out.println(((target)target).flag);
    }
} 
```

请分享您对这种方法的反馈/疑问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T12:24:17.877

据我了解，为什么在业务逻辑代码中会抛出 AuthenticationException。如果您真的想使用 aop，请让我们的业务代码远离横切关注点。在您的情况下，您可以从业务逻辑中取出 AuthenticationException 代码。在进入业务逻辑操作之前应用 aop。例如

```
public class SecurityInterceptor extends HandlerInterceptorAdapter{

    //before the actual handler will be executed
    public boolean preHandle(HttpServletRequest request, 
        HttpServletResponse response, Object handler)
        throws Exception {

        // check here possible case for exception from request .If exception throw yours custom exception before executing business logic

    }

    //after the handler is executed
    public void postHandle(

        }
    }
} 
```

自定义异常

```
public class Handler
        implements HandlerExceptionResolver
    {

        public Handler()
        {
        }

        public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)
        {
            if(ex instanceof AuthenticationException))
            {
                 ModelAndView test = new ModelAndView("errorpage1jsppage");
return test;
            } else
            if(ex instanceof ErrorType2Exception))
            {
                 ModelAndView test1 = new ModelAndView("errorpage2jsppage");
return test1
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T11:36:20.213

AFAIK对此没有切入点表达式...

你应该考虑配置你的记录器来做你需要的事情。替换`ae.printStackTrace();`为类似`logger.warn(ae)`（将堆栈跟踪打印到控制台无论如何都是非常糟糕的做法），并配置日志工具的电子邮件发送附加程序之一，例如[log4j](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SMTPAppender.html)或[logback 的](http://logback.qos.ch/manual/appenders.html#SMTPAppender)SMTPAppender。此外，为了使您的配置更容易，您可以使用业务专用的记录器。

如果您真的想在这里使用方面，我认为您必须期望您的所有业务异常都会出现至少一种方法，以便使用[afterThrowing](http://www.eclipse.org/aspectj/doc/next/aspectj5rt-api/org/aspectj/lang/annotation/AfterThrowing.html)建议。

# wpf - 在 dowork 事件中调用方法时出错（后台工作人员）

> ID：15473727
> 
> 赞同：0
> 
> 时间：2013-03-18T09:47:09.700
> 
> 标签：wpf, multithreading, c#-4.0, methods, backgroundworker

我的代码中有两个相同的大段代码，所以我创建了一个方法并将其放在那里。我在我的代码中两次调用该方法，第一次正常调用，第二次我想从*doWork*事件（后台工作人员）调用它。问题是当它执行时（在doWork中）我的程序停止响应......所以我的问题是。如何从*doWork*事件中调用方法？

编辑：一些代码

```
private void parseHtmlFile(string file)
{
// here i parse an html file and fill some arraylists.
}

// this is the event where i call method on click
private void MenuItem_NewPr(object sender, RoutedEventArgs e)
{
parseHtmlFile(file);// in this case program works well.
}

// do work 
worker.DoWork += (s, e) =>
{
var file = e.Argument as string;
parseHtmlFile(file);// in this case program stop responding.
} 
```

编辑2：我在方法中改变了一些东西，现在它没有崩溃，但我现在有另一个问题。dowork 方法不执行存在于我的方法调用语句下方的代码。我在那里放了一个断点，从不去那里......

# android - 选择自定义位置保存文件

> ID：15473728
> 
> 赞同：3
> 
> 时间：2013-03-18T09:47:10.033
> 
> 标签：android

我只有 2 周的 android 经验，想做一些我不知道该怎么做的事情。我的要求是，我想在我的应用程序中保存和读取文件，而不是在固定位置，而是在用户想要的位置当我们下载文件时，就像在 UC 浏览器中一样保存和检索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:50:46.770

您可以为此使用[Android 目录选择器](http://www.bgreco.net/directorypicker/)。

# c++ - 将字符串转换为指针

> ID：15473729
> 
> 赞同：0
> 
> 时间：2013-03-18T09:47:11.993
> 
> 标签：c++, string, pointers, hex, memory-address

我正在尝试使用以下代码将指针转换为字符串，并将字符串转换回指针（词法转换）。从指针到字符串的转换工作正常，但反之则不行。

**为什么会这样？还有其他方法可以将字符串转换为指针吗？**

我不担心字符串格式不正确导致的错误。我试图转换为指针的字符串将始终通过将指针转换为字符串来生成。

这是代码：

```
//TB_ConvertToString.cpp

#include<iostream>
#include<cstdio>
#include<sstream>
#include<string>

//Functions to convert data types to and from strings   
template <typename T> std::string ToString ( T Number )
{
    std::stringstream ss;
    ss << Number;
    return ss.str();
};

template <typename T> 
T FromString ( const std::string &Text )
{
    std::stringstream ss(Text);
    T result;
    ss >> result;
    return result;
}
//-------------------------------------------------

using namespace std;

int main()
{
    int a =10;  
    int* p1 = &a;
    // this works------------
    string s1 = ToString<int *>(p1);
    printf("\n ptr: %s",s1.c_str());
    //----------------------

    //this gives compilation errors -----
    //int * p2 = FromString<int *>(s1);
    //printf("\n ptr: %p",p2);
    //----------------------

    cout<<"\n\n";
    return 0;
}; 
```

取消注释问题部分会出现以下编译错误：

```
nehak@Marvin:~/Desktop$ g++ TB_ConvertToString.cpp 
TB_ConvertToString.cpp: In function ‘T FromString(const string&) [with T = int*, std::string = std::basic_string<char>]’:
TB_ConvertToString.cpp:39:33:   instantiated from here
TB_ConvertToString.cpp:21:2: error: no match for ‘operator>>’ in ‘ss >> result’
TB_ConvertToString.cpp:21:2: note: candidates are:
/usr/include/c++/4.6/istream:122:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_istream<_CharT, _Traits>::__istream_type& (*)(std::basic_istream<_CharT, _Traits>::__istream_type&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
/usr/include/c++/4.6/istream:122:7: note:   no known conversion for argument 1 from ‘int*’ to ‘std::basic_istream<char>::__istream_type& (*)(std::basic_istream<char>::__istream_type&) {aka std::basic_istream<char>& (*)(std::basic_istream<char>&)}’
/usr/include/c++/4.6/istream:126:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_istream<_CharT, _Traits>::__ios_type& (*)(std::basic_istream<_CharT, _Traits>::__ios_type&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>, std::basic_istream<_CharT, _Traits>::__ios_type = std::basic_ios<char>]
/usr/include/c++/4.6/istream:126:7: note:   no known conversion for argument 1 from ‘int*’ to ‘std::basic_istream<char>::__ios_type& (*)(std::basic_istream<char>::__ios_type&) {aka std::basic_ios<char>& (*)(std::basic_ios<char>&)}’
/usr/include/c++/4.6/istream:133:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(std::ios_base& (*)(std::ios_base&)) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
/usr/include/c++/4.6/istream:133:7: note:   no known conversion for argument 1 from ‘int*’ to ‘std::ios_base& (*)(std::ios_base&)’
/usr/include/c++/4.6/istream:169:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(bool&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
/usr/include/c++/4.6/istream:169:7: note:   no known conversion for argument 1 from ‘int*’ to ‘bool&’
/usr/include/c++/4.6/istream:173:7: note: std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::operator>>(short int&) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.6/istream:173:7: note:   no known conversion for argument 1 from ‘int*’ to ‘short int&’
/usr/include/c++/4.6/istream:176:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(short unsigned int&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
/usr/include/c++/4.6/istream:176:7: note:   no known conversion for argument 1 from ‘int*’ to ‘short unsigned int&’
/usr/include/c++/4.6/istream:180:7: note: std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::operator>>(int&) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.6/istream:180:7: note:   no known conversion for argument 1 from ‘int*’ to ‘int&’
/usr/include/c++/4.6/istream:183:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(unsigned int&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
/usr/include/c++/4.6/istream:183:7: note:   no known conversion for argument 1 from ‘int*’ to ‘unsigned int&’
/usr/include/c++/4.6/istream:187:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(long int&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
/usr/include/c++/4.6/istream:187:7: note:   no known conversion for argument 1 from ‘int*’ to ‘long int&’
/usr/include/c++/4.6/istream:191:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(long unsigned int&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
/usr/include/c++/4.6/istream:191:7: note:   no known conversion for argument 1 from ‘int*’ to ‘long unsigned int&’
/usr/include/c++/4.6/istream:196:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(long long int&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
/usr/include/c++/4.6/istream:196:7: note:   no known conversion for argument 1 from ‘int*’ to ‘long long int&’
/usr/include/c++/4.6/istream:200:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(long long unsigned int&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
/usr/include/c++/4.6/istream:200:7: note:   no known conversion for argument 1 from ‘int*’ to ‘long long unsigned int&’
/usr/include/c++/4.6/istream:205:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(float&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
/usr/include/c++/4.6/istream:205:7: note:   no known conversion for argument 1 from ‘int*’ to ‘float&’
/usr/include/c++/4.6/istream:209:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(double&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
/usr/include/c++/4.6/istream:209:7: note:   no known conversion for argument 1 from ‘int*’ to ‘double&’
/usr/include/c++/4.6/istream:213:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(long double&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
/usr/include/c++/4.6/istream:213:7: note:   no known conversion for argument 1 from ‘int*’ to ‘long double&’
/usr/include/c++/4.6/istream:217:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::operator>>(void*&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>]
/usr/include/c++/4.6/istream:217:7: note:   no known conversion for argument 1 from ‘int*’ to ‘void*&’
/usr/include/c++/4.6/istream:241:7: note: std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::operator>>(std::basic_istream<_CharT, _Traits>::__streambuf_type*) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__streambuf_type = std::basic_streambuf<char>]
/usr/include/c++/4.6/istream:241:7: note:   no known conversion for argument 1 from ‘int*’ to ‘std::basic_istream<char>::__streambuf_type* {aka std::basic_streambuf<char>*}’
/usr/include/c++/4.6/bits/basic_string.tcc:998:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.6/bits/istream.tcc:957:5: note: template<class _CharT2, class _Traits2> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, _CharT2*)
/usr/include/c++/4.6/bits/istream.tcc:925:5: note: template<class _CharT, class _Traits> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, _CharT&)
/usr/include/c++/4.6/istream:709:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, unsigned char&)
/usr/include/c++/4.6/istream:714:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, signed char&)
/usr/include/c++/4.6/istream:756:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, unsigned char*)
/usr/include/c++/4.6/istream:761:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, signed char*)
nehak@Marvin:~/Desktop$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T09:59:01.443

您的问题实际上可以缩小到这个简单的测试用例：

```
std::stringstream ss("0xbf845748");
int* p2;
ss >> p2; 
```

这不起作用，因为没有这样的`>>`运算符重载会初始化您的指针。为了使指针的这种提取工作，您可以使用`void*`或者甚至可以提取整数，它足够大以保存该地址，然后使用`reinterpret_cast<T>`使您的指针指向该地址，只是要小心不要以`char*`重载结束因为这可能会导致你现在正在处理的更糟糕的问题。

请注意，尝试使用存储在其中的地址来初始化指针`std::string`是非常糟糕的主意。在你决定让它工作之前，确保它真的是你想要的。很可能有更合理的方法来避免这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:08:25.857

问题是任何类型的指针都可以隐式转换为`void*`，但`void*`不能转换为*任何*类型的指针。在您的情况下，您应该`FromString`为所有指针专门化功能。像这样

```
template <typename T> 
T FromString ( const std::string &Text,
    std::enable_if< ! std::is_pointer< T >::value >::type * = nullptr )
{
    std::stringstream ss(Text);
    T result;
    ss >> result;
    return result;
}

template <typename T> 
T FromString ( const std::string &Text,
    std::enable_if< std::is_pointer< T >::value >::type * = nullptr )
{
    std::stringstream ss(Text);
    void * result;
    ss >> result;
    return (T)result;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T10:17:46.033

@LihO，谢谢！这样可行。我不得不在提取指针时使用 std::hex 。

```
 string s1 = "0x7fff3e8aee1c";
    stringstream ss;
    ss<<s1;
    long long unsigned int i;
    ss>>std::hex>>i;
    int * i_ptr=reinterpret_cast<int *>(i); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-11T19:11:30.777

我最终使用了 std::stoul。

```
void *p = std::stoul(str.c_str(), 0, 16); 
```

# jquery - Tipsy live 不适用于 jQuery 1.9.0

> ID：15473731
> 
> 赞同：21
> 
> 时间：2013-03-18T09:47:14.587
> 
> 标签：jquery, jquery-plugins, tooltip, live, tipsy

我们最近将 jQuery 升级到 1.9.0，但它破坏了我们的醉酒插件。它的`live`功能现在会导致错误。

```
$('.tooltip, abbr').tipsy({
    live: true
});

TypeError: this[binder] is not a function 
```

是否有任何修复或补丁？谷歌搜索并没有带来任何有用的东西。

* * *

**更新：**

感谢您的回答。我决定尝试自己解决这个问题，因为我找不到任何补丁。

经检查，错误似乎很容易追踪。Tipsy 插件可以很容易地被修补以使用该`on`功能而不是已弃用的`live`功能。在tipsy插件中，我替换了以下代码：

```
if (options.trigger != 'manual') {
    var binder = options.live ? 'live' : 'bind',
        eventIn = options.trigger == 'hover' ? 'mouseenter' : 'focus',
        eventOut = options.trigger == 'hover' ? 'mouseleave' : 'blur';
    this[binder](eventIn, enter)[binder](eventOut, leave);
} 
```

和：

```
if (options.trigger != 'manual') {
    var eventIn = options.trigger == 'hover' ? 'mouseenter' : 'focus',
        eventOut = options.trigger == 'hover' ? 'mouseleave' : 'blur';
    if (options.live)
        $(document).on(eventIn, this.selector, enter).on(eventOut, this.selector, leave);
    else
        this.bind(eventIn, enter).bind(eventOut, leave);
} 
```

奇迹般有效。:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T09:48:41.343

您需要包含 jquery 迁移插件，因为您正在使用`live:true`它利用[jquery.live](http://api.jquery.com/live/)已[在 jquery 1.9 中删除](http://jquery.com/upgrade-guide/1.9/#live-removed)。

为了向后兼容，他们创建了一个[迁移插件](https://github.com/jquery/jquery-migrate/)，可以在[此处下载](http://jquery.com/upgrade-guide/1.9/#live-removed)并包含迁移插件以添加对已删除方法和实用程序的支持。

我会做类似的事情

```
if (options.trigger != 'manual') {
    var eventIn  = options.trigger == 'hover' ? 'mouseenter' : 'focus',
        eventOut = options.trigger == 'hover' ? 'mouseleave' : 'blur';
    if(options.live){
      $(this.context).on(eventIn, this.selector, enter).on(eventOut, this.selector, leave);
    } else {
      this.on(eventIn, enter).on(eventOut, leave);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:53:09.003

问题是这个插件仍然`.live()`用来让`live`你在那里使用的方法工作，它已被弃用并已被替换为`.on()`.

您应该尝试搜索插件的更新版本或尝试自行替换它。

# google-api - Google Calendar API：超出日历使用限制

> ID：15473732
> 
> 赞同：15
> 
> 时间：2013-03-18T09:47:19.780
> 
> 标签：google-api, google-calendar-api

我们有一个在 Google Apps 域之间进行迁移的应用程序。对于日历迁移，我们使用 Import API ( [https://developers.google.com/google-apps/calendar/v3/reference/events/import](https://developers.google.com/google-apps/calendar/v3/reference/events/import) )。在过去的六个月里，我们做了很多日历迁移。但大约一周前，我们遇到了新的导入 API 错误：

```
 "error"=>
  {"errors"=>[
    {"domain"=>"usageLimits",
    "reason"=>"quotaExceeded",
    "message"=>"Calendar usage limits exceeded."}], 
  "code"=>403, 
  "message"=>"Calendar usage limits exceeded." 
```

上周我们收到了很多“超出日历使用限制”。来自不同域的用户的错误。根据 Google API 控制台，我们没有达到每日配额限制。对于我们的应用程序，我们使用 2legged 授权。

请帮助我们了解“超出日历使用限制”是什么意思。意思是？我们如何防止这个错误？我们在哪里可以找到有关日历使用限制的信息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-28T08:59:32.903

我找到了这个官方支持文档，下面是一些简短的信息，希望对您有所帮助： [https ://support.google.com/a/answer/2905486?hl=en](https://support.google.com/a/answer/2905486?hl=en)

超出日历使用限制。这是 API 调用的结果。（不要将其与“超出每日配额”的消息混为一谈，后者表示 API 配额不足。）

如果用户看到其中一条消息，可能是由于以下原因之一：

*   **创建太多事件**

如果用户在短时间内在其日历中创建了超过 10,000 个事件，则该用户可能会失去日历编辑权限。

*   **创建太多日历**

如果用户在短时间内创建超过 25 个新日历，则该用户的日历可能会进入只读模式。

*   **向外部客人发送过多邀请或电子邮件**

为了防止垃圾邮件，Google 日历限制了用户可以发送给外部客人的邀请数量。此限制因行动而异，通常在 100-300 位客人之间。

Google Apps 用户可以从其主域或与其主域关联的辅助域向任意数量的来宾发送邀请。

*   **与太多用户共享日历**

如果用户在短时间内与许多其他用户共享一个或多个日历，Google 日历可能会切换到该用户的只读模式。通过手动更新共享设置几乎不可能达到此限制，但某些基于 API 的工具或第三方应用程序可能会发生这种情况。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-22T22:25:55.693

有同样的问题。

我正在使用版本 3 代码，TwoLeggedOAuthCredentials 并且该程序是授权注册客户端（IOW：日历是代表多个帐户创建的。）

上次成功的大型导入：2013-01-21、4929 个 Google 请求和 2013-01-22、1103 个 Google 请求（分布在多个用户中）

在我们配额的大约 4% 处（[https://code.google.com/apis/console/b/0/#project:1077083635926:quotas](https://code.google.com/apis/console/b/0/#project:1077083635926:quotas)）程序开始出现以下错误：https://www.googleapis.com /calendar/v3/calendars?alt=json 返回“超出日历使用限制。”>

如果程序在一段时间（15 分钟以上）后重新运行，它将在收到相同的错误之前再运行几个请求。如果在“冷静”期后重新运行，它之前出错的日历信息将成功。代码本身休眠的次数是它收到错误的次数乘以 20 秒并尝试十次（第一个错误后等待 20 秒，第二个错误后等待 40 秒），但它大大增加了运行程序的时间。

我昨天将每个用户的限制从 5 个请求/秒/用户增加到 10.0 个请求/秒/用户。到目前为止，这在行为上没有明显变化。缓慢地单步执行代码似乎也没有影响，这让我相信它与每秒的请求数无关。

如果这是一个未记录的每用户配额（而不是他们有据可查的请求/秒/用户配额），则它是新的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-27T04:57:14.497

分析日志后发现

用户的免费 G​​oogle Apps 帐户：最初：**100 个外部访客域电子邮件限制** 累积：**1 个外部访客 40 分钟**

例如：如果你有一个新的令牌，你可以发送任何一个 *. 50 场活动，有 100 位客人 - 每个活动有 2 位客人 *。25 场有 100 位宾客的活动 - 每个活动有 4 位宾客

每个限制

**日**: 36 位客人

**周**: 252 位客人

**月**: ~1080 位客人

购买的 GSuite 日历 API 提供**1000 次访客请求的初始限制**

[https://github.com/manjeshpv/gsuite-google-calendar-api-limits](https://github.com/manjeshpv/gsuite-google-calendar-api-limits)

您每天登录后将收到 1000 封（您域外的来宾电子邮件）+ 每 40 分钟收到 1 封来宾电子邮件邀请。当您超出此限制时，您会收到此错误

**使用 Google 日历 ****Google 日历**( [https://calendar.google.com](https://calendar.google.com) )

*无法保存活动 您已达到可编辑活动数量的限制。请等待几个小时，以便审核您的帐户。感谢您的耐心等待。注意：这可能是您安装的与 Google 日历交互的第三方应用程序的结果，例如同步应用程序。*

**使用基于 API 的方法**

*错误：超出日历使用限制。代码：403，错误：[ { 域：'usageLimits'，原因：'quotaExceeded'，消息：'超出日历使用限制。' } ] }*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T00:52:22.267

除了应用程序配额之外，还有一些独立于应用程序的每用户限制。如果某人是日历的重度用户，或者如果您为一小部分用户执行大量活动，那么即使您的应用程序低于其总 API 配额，该应用程序也可能会受到限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T17:10:42.703

我在向我的 Google Apps 域之外的受邀人员插入大量活动时遇到了这个问题。我从 Google Apps 支持收到以下回复：

> “日历对您可以从一个日历中邀请的活动数量施加了限制。如果邀请发送给不在 Google Apps 中的用户，那么很快就会达到限制。”

希望能帮助到你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T05:51:25.193

我有同样的问题，发现您可以邀请多少外部客人（住在另一个域的客人）有配额。此配额记录在此处：

[http://support.google.com/a/bin/answer.py?hl=en&answer=2905486](http://support.google.com/a/bin/answer.py?hl=en&answer=2905486)

我目前不知道任何解决方案，但如果你找到一个，我会发现它也很有帮助。祝你好运。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-15T05:52:26.160

外部参加者的限制似乎非常严格，并且积极积累。

要在 G Suite 上进行测试，最好只同步主域中的与会者。

# asp.net - 无法加载文件或程序集“System.Management.Automation”

> ID：15473734
> 
> 赞同：9
> 
> 时间：2013-03-18T09:47:29.230
> 
> 标签：asp.net, visual-studio, powershell, windows-server-2008-r2, gac

我在本地机器上编写了一个 asp.net MVC 3 Web 应用程序（'ADReporter'），它使用 Powershell 来检索一些数据。如果我在本地运行此应用程序，一切正常。现在我试图在我的 Windows 2008 服务器上运行它，但是当我试图访问它时，我得到以下堆栈跟踪：

```
Server Error in '/ADReporter' Application.

Could not load file or assembly 'System.Management.Automation' or one of its dependencies. Strong name signature could not be verified.  The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045)

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.IO.FileLoadException: Could not load file or assembly 'System.Management.Automation' or one of its dependencies. Strong name signature could not be verified.  The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045)

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Assembly Load Trace: The following information can be helpful to determine why the assembly 'System.Management.Automation' could not be loaded.

Stack Trace: 

[FileLoadException: Could not load file or assembly 'System.Management.Automation' or one of its dependencies. Strong name signature could not be verified.  The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045)]

[FileLoadException: Could not load file or assembly 'System.Management.Automation, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. Strong name signature could not be verified.  The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045)]
System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +34
System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +152
System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean forIntrospection) +77
System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +16
System.Reflection.Assembly.Load(String assemblyString) +28
System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +38

[ConfigurationErrorsException: Could not load file or assembly 'System.Management.Automation, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. Strong name signature could not be verified.  The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045)]
System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +752
System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +218
System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +130
System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +170
System.Web.Compilation.BuildManager.GetPreStartInitMethodsFromReferencedAssemblies() +91
System.Web.Compilation.BuildManager.CallPreStartInitMethods(String preStartInitListPath) +258
System.Web.Compilation.BuildManager.ExecutePreAppStart() +135
System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +516

[HttpException (0x80004005): Could not load file or assembly 'System.Management.Automation, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. Strong name signature could not be verified.  The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045)]
System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9873784
System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +101
System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +254 
```

**编辑**
程序集绑定日志查看器的输出：

```
*** Assembly Binder Log Entry  (18/03/2013 @ 11:17:06) ***

The operation failed.
Bind result: hr = 0x80131045\. No description available.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\Windows\SysWOW64\inetsrv\w3wp.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = IIS APPPOOL\ASP.NET v4.0
LOG: DisplayName = System.Management.Automation (Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: System.Management.Automation | Domain ID: 2
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = file:///C:/inetpub/wwwroot/ADReporter/
LOG: Initial PrivatePath = C:\inetpub\wwwroot\ADReporter\bin
LOG: Dynamic Base = C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\adreporter\96209fa5
LOG: Cache Base = C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\adreporter\96209fa5
LOG: AppName = f817618b
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\inetpub\wwwroot\ADReporter\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/adreporter/96209fa5/f817618b/System.Management.Automation.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/adreporter/96209fa5/f817618b/System.Management.Automation/System.Management.Automation.DLL.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/ADReporter/bin/System.Management.Automation.DLL.
LOG: Assembly download was successful. Attempting setup of file: C:\inetpub\wwwroot\ADReporter\bin\System.Management.Automation.dll
LOG: Entering download cache setup phase.
LOG: Assembly Name is: System.Management.Automation, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
LOG: A partially-specified assembly bind succeeded from the application directory. Need to re-apply policy.
LOG: Using application configuration file: C:\inetpub\wwwroot\ADReporter\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Post-policy reference: System.Management.Automation, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
LOG: GAC Lookup was unsuccessful.
ERR: Setup failed with hr = 0x80131045.
ERR: Failed to complete setup of assembly (hr = 0x80131045). Probing terminated. 
```

可以请人帮助我吗？我已经找了几天这个错误了......提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T10:49:08.437

问题是我没有在服务器上正确安装 Windows Management Framework 3.0。

下载链接：[http ://www.microsoft.com/en-us/download/details.aspx?id=34595](http://www.microsoft.com/en-us/download/details.aspx?id=34595)

# javascript - 用于 JavaScript 的 LESS CSS @import

> ID：15473736
> 
> 赞同：0
> 
> 时间：2013-03-18T09:47:46.623
> 
> 标签：javascript, import

你知道是否有某种工具，比如 LESS CSS，但对于 Javascript，它允许你导入例如“plugin-1.js”；在我的 .js 文件中。我正在为 LESS 使用 sublime text 2 构建（它引用 dotless.exe），所以如果你尝试过类似的东西，如果你能与我们分享它会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:50:06.783

如果您在`HTML`Web 中使用 JavaScript，则可以使用[require.js 之](http://requirejs.org/)类的库来组织导入，或者简单地在 HTML 中已经使用的脚本标签之上添加另一个脚本标签。

```
<script src="plugin-1.js" type='text/javascript'> </script> 
```

否则，如果您使用的是 node.js，则可以使用`require()`指令来完成

```
var otherModuleToRequire = require("plugin-1.js"); 
```

之后它将在文件中可用。

值得一提的是，虽然这与`@import`功能相似，但它们通过在*运行时*进行导入而不是将所有文件捆绑到一个文件中而表现不同，这就是 @import 所做的。

如果你真的关心打包文件（例如在负载下的生产环境中），你可以使用压缩器和优化器，如[闭包编译器](https://developers.google.com/closure/compiler/)或[require.js 优化器](http://requirejs.org/docs/optimization.html)（如果你选择使用 require.js）。

# shell - 如何使用 find 编译所有子目录中的所有文件？

> ID：15473743
> 
> 赞同：1
> 
> 时间：2013-03-18T09:48:05.587
> 
> 标签：shell, find

我有很多彼此无关的 c++ 程序，每个程序都只在一个文件中。目录结构如下所示：

```
dir1
    program1.cpp
    program1.h
    program2.cpp
    program2.h
dir2
    program3.cpp
    program3.h
    program4.cpp
    program4.h
dir3
    program5.cpp
    program5.h
    program6.cpp
    program6.h
.. 
```

我试图想出一个shell脚本来编译它们并给可执行文件不同的名称。我一直在尝试`find`这样：

```
find . -type f -name *.cpp -exec g++ -llibname '{}' \; 
```

这会编译所有文件，但会`a.out`为每个文件生成，所以我最终只得到一个可执行文件。如何剥离文件扩展名并将其作为可执行文件名？（例如`program1.cpp`我需要`g++ program1.cpp -o program1`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T10:00:48.250

你可以这样做：

```
find . -type f -name '*.cpp' -exec sh -c 'g++ {} -o $(basename {} .cpp)' \; 
```

这会将所有可执行文件放在启动命令的目录中。如果您希望将它们保存在与源文件相同的目录中，则应该这样做：

```
find . -type f -name '*.cpp' -exec sh -c 'g++ {} -o $(dirname {})/$(basename {} .cpp)' \; 
```

（请记住引用文件名模式，否则如果您`.cpp`在当前目录中有文件，您的命令将开始中断。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:39:28.563

你也可以试试：

```
find . -type f -name '*.cpp'| sed 's/.cpp$//' | xargs make 
```

# applescript - 蚂蚁命令的Applescript

> ID：15473758
> 
> 赞同：-3
> 
> 时间：2013-03-18T09:49:03.707
> 
> 标签：applescript

谁能帮我写一个苹果脚本来写一个蚂蚁命令？

Ant 命令为： ant init clean compile run

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:08:05.213

```
do shell script "ant init clean compile run" 
```

[Applescript 参考：做 shell 脚本](https://developer.apple.com/library/mac/#documentation/applescript/conceptual/applescriptlangguide/reference/ASLR_cmds.html#//apple_ref/doc/uid/TP40000983-CH216-SW40)

# c# - 在 asmx Web 服务上上传文件

> ID：15473761
> 
> 赞同：0
> 
> 时间：2013-03-18T09:49:12.133
> 
> 标签：c#, javascript, iframe, upload, asmx

通过 asmx 网络服务上传文件时出现问题。

这是我的 HTML 代码：

```
<form method="post" action="/_wscommunity_/PublicCommunity.asmx/UploadTempPicture"      encoding="multipart/form-data" enctype="multipart/form-data" id="form_upload" target="upload_target">
<input type="file" name="file[]" id="file_upload">
<input type="submit" name="action" value="Upload">
<iframe name="upload_target" id="upload_target">&nbsp;</iframe>
</form> 
```

在 OnChange 事件的我的 Javascript 文件中：

```
$("form_upload").target = 'upload_target'; 
$("form_upload").submit(); 
```

提交表单后，我在 POST 中收到：

零件多部分/表单数据

> 文件[] GIF89a �÷�������3��f����Ì��ÿ�+��+3�+f�+�+Ì�+ÿ�U��U3�Uf� U�UÌ�Uÿ���3�f��Ì�ÿ�ª��ª3�ªf�ª�ªÌ�ªÿ�Õ��Õ3�Õf�Õ�ÕÌ�Õÿ�ÿ��ÿ3�ÿf� ÿ ìf.² 3fÌÿª�ª3ªfªªÌªÿÕ�Õ3ÕfÕÕÌÕÿÿ�ÿ3ÿfÿÿÌÿÿÌ��Ì�3Ì�fÌ�Ì�ÌÌ�ÿÌ+�Ì+3Ì+fÌ+Ì+ÌÌ+ÿÌU�ÌU3ÌUfÌUÌUÌÌUÿÌ�Ì3ÌfÌÌÌÌÿÌª�Ìª3ÌªfÌªÌªÌÌªÿÌÕ�ÌÕ3ÌÕfÌÕÌÕÌÌÕÿÌÿ�Ìÿ3ÌÿfÌÿÌÿÌÌÿÿÿ��ÿ�3ÿ�fÿ �®设+3〜+3〜+g+gr+gr. �� ����÷ H° A�*\È0 �;

来源--------------------------292403007321689

```
Content-Disposition: form-data; name="file[]"; filename="Untitled.gif"
Content-Type: image/gif 
```

> GIF89a �÷�������3��f����Ì��ÿ�+��+3�+f�+�+Ì�+ÿ�U��U3�Uf�U�UÌ �Uÿ����3�f��Ì�ÿ�ª��ª3�ªf�ª�ªÌ�ªÿ�Õ��Õ3�Õf�Õ�ÕÌ�Õÿ�ÿ��ÿ3�ÿf�ÿ�ÿÌ 。 f+3f+ff+f+f+ìfu3fufu3fufuìfuγf.f3fff3fff3ffìfª3fª3fª3fª3fªfªfªfªfªfªfªfªfªfªfª �Õ3ÕfÕÕÌÕÿÿ�ÿ3ÿfÿÿÌÿÿÌ��Ì�3Ì�fÌ�Ì�ÌÌ�ÿÌ+�Ì+3Ì+fÌ+Ì+ÌÌ+ÿÌU�ÌU3ÌUfÌUÌUÌÌUÿÌ�Ì3ÌfÌÌÌÌÿÌª�Ìª3ÌªfÌªÌªÌÌªÿÌÕ�ÌÕ3ÌÕfÌÕÌÕÌÌÕÿÌÿ�Ìÿ3ÌÿfÌÿÌÿÌÌÿÿÿ��ÿ�3ÿ�fÿ�ÿ� 码 ^+3〜+3〜+f。 ���÷ H° A�*\È0 �; ------------------292403007321689--

最后在我的 asmx webservice 中：

```
 [WebMethod]
    public AjaxResponse UploadTempPicture()
    {
        AjaxResponse response = new AjaxResponse();
        HttpFileCollection MyFileCollection;
        HttpPostedFile MyFile;
        MyFileCollection = HttpContext.Current.Request.Files;
        MyFile = MyFileCollection[0];
        ....
     } 
```

Web 服务正在调用，但我收到此错误：

> System.Web.Services.Protocols.SoapException：System.Web.Services.Protocols.SoapException：服务器无法处理请求。---> System.Exception：上传文件时出现问题：索引超出范围。必须是非负数且小于集合的大小。参数名称：索引

# javascript - 以编程方式合并两个 svg 路径元素

> ID：15473765
> 
> 赞同：10
> 
> 时间：2013-03-18T09:49:22.583
> 
> 标签：javascript, jquery, svg

我正在用 SVG 路径渲染地图（使用[jVectormap](http://jvectormap.com/)）。

在某些情况下，一个区域必须与相邻区域合并。

不幸的是，这两个区域没有相互接触，我必须进行插值以填充两者之间的空间。

![将两个区域合并为一个](../Images/48ee1fe56c5915d74bd472da117e3624.png)

jVectormap 使用非常简单的 SVG 路径`M`来设置绝对起点并`l`连接相对点。

任何 SVG 库都包含这样的操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:26:09.013

我还没有尝试过，但是您可以通过[在 jVectormap](http://jvectormap.com/documentation/gis-converter/)上使用以下参数运行转换器来解决它：

```
--buffer_distance=0
--where="ISO='region_1' OR ISO='region_2'" 
```

您需要合并的两个区域的位置`region_1`和位置。`region_2`

以这种方式解决问题还意味着生成的 SVG 路径与原始坐标一致，而后续修复可能会导致一些（可能是次要的）不一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:33:06.110

这可能不是您要寻找的答案，但使用 Raphael.js，您可以遍历一个区域的整个路径长度[`getPointAtLength()`](http://raphaeljs.com/reference.html#Element.getPointAtLength)，并将其与第二个区域的所有点进行比较。如果坐标比`n`第二个区域上的任何坐标的像素更近，而先前的坐标不是，则可以将其视为“胶水”点。然后，您将跳到第二个区域并开始循环遍历它，如果下一个点仍然比`n`点更近，则朝相反的方向前进，如果仍然更近，则改变方向并沿着路径走得更远，直到找到离更远的点原始区域比`n`像素。继续朝那个方向循环，直到再次找到一个新的“胶水”点，您将再次以所描述的方式切换到原始区域，并且可以丢弃最终循环中未覆盖的所有点（或者您可以简单地根据您在原始区域长度上循环时遇到的点创建一个新形状。

确实，它不是最容易制作的脚本，但我相信它应该非常可行，尤其是当您可以使用诸如`getPointAtLength`查找定义的 svg 点之间的点之类的功能时（尽管您只需要“记录”定义的点，这是一条艰难的道路，因为 Raphael.js 没有任何功能可以帮助解决这个问题，即使*手动*匹配也不应该太难（当然是在代码中））。

# javascript - 如何使用 Javascript 将动态生成的按钮拆分为列？

> ID：15473768
> 
> 赞同：1
> 
> 时间：2013-03-18T09:49:37.203
> 
> 标签：javascript, multiple-columns

我有 Javascript 代码可以生成两种类型的按钮。一个标题按钮，然后是下面不同数量的内容按钮。我使用 CSS3 将按钮拆分为带有“-webkit-column-break”的列，但这在 Internet Explorer 或 Safari 中无法正常工作。

我想到了一种自定义 Javascript 的方法。我只是想知道这是否可能，以及我如何实现它。这是我的伪代码；

```
create 3 divs - 1, 2, and 3

count header array.
divide count by 3 to find number to place in each column.

create a counter.
for each header placed increase count by 1.
if count is equal to column maximum then use div 2.
if div2 count is equal to column maximum then use div 3. 
```

我可以看到这种方法的一个问题是它没有考虑标题下方的不同数量的列。如果可能的话，我希望第 1 列和第 2 列的长度相等，或者所有 3 列都相等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:29:17.077

固定的。我是这样做的

[JS小提琴在这里](http://jsfiddle.net/T52E4/)

```
 var mycars = new Array();
mycars[0] = "Saab";
mycars[1] = "Volvo";
mycars[2] = "BMW";
mycars[3] = "Porsche";
mycars[4] = "Daewoo";
mycars[5] = "MG";

var arrayCount = mycars.length;

var columnLength = arrayCount / 3;

for (var i=0; i < mycars.length; i++)
{

if (i<columnLength)
{
      document.getElementById('carList').innerHTML += '<button class="countryButtons"> '+       mycars[i]+' </button><br />';
}
else if(i< columnLength*2)
{
 document.getElementById('carList2').innerHTML += '<button class="countryButtons"> '+    mycars[i]+' </button><br />';
 }
    else if(i< columnLength*3)
{
 document.getElementById('carList3').innerHTML += '<button class="countryButtons"> '+      mycars[i]+' </button><br />';
   }
  } 
```

# jquery - 首先删除然后将 href 属性添加到锚标记

> ID：15473770
> 
> 赞同：-1
> 
> 时间：2013-03-18T09:49:40.777
> 
> 标签：jquery, href

我有一个锚标签：

```
<a href="#" onclick="ToggleLinks('boothsizeDiv');"> 
```

在同一个函数中，我想首先根据某些条件删除 href 属性，然后根据另一个条件重新附加它。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:52:19.957

您的条件是您自己的责任，我猜不出来，但是您可以使用 jQuery 使用`attr`方法管理事物的属性，例如...

获取`href`：

```
var href = $("#url").attr("href"); 
```

设置`href`：

```
$("#url").attr("href", "some link"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:52:04.810

使用`attr`方法设置`href`值。

```
<a id="link" href="#" onclick="ToggleLinks('boothsizeDiv');">

 $("#link").click(function() {
     var element = $(this);
        if (yourCondition) {
             element.attr("href", "#");
        }  else {
             element.attr("href", "value");
       }
 }); 
```

或者，您可以在 ToggleLinks 函数中执行此操作：

```
 function ToggleLinks() {
      var element = document.getElementById("link");
      if (condition) { element.href = "#"; }
      else { element.href = "yourvalue"; }
 } 
```

[http://api.jquery.com/attr/](http://api.jquery.com/attr/)

# drupal - Drupal 7：如何根据 User_Menu 中菜单项的选择来控制主菜单的可见性？

> ID：15473771
> 
> 赞同：0
> 
> 时间：2013-03-18T09:49:41.733
> 
> 标签：drupal, menu, drupal-7

我有 Main_Menu 这是我的主要和 User_Menu 这是我的次要链接菜单。当用户单击 User_Menu 中的菜单项之一时，我想显示 Main_Menu。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:43:07.257

我不确定我是否理解单击二级菜单后显示主菜单的用例。这似乎与“主要”和“次要”的含义相矛盾。:)

但是您可能会从菜单块模块中得到一些用处：http: [//drupal.org/project/menu_block](http://drupal.org/project/menu_block)

# mongodb - 如何从字符串转换为日期数据类型？

> ID：15473772
> 
> 赞同：12
> 
> 时间：2013-03-18T09:49:42.680
> 
> 标签：mongodb, date, csv, type-conversion

![在此处输入图像描述](../Images/f852ea0622f3d4f9c28ceba14bc82801.png)

我正在将数据从 csv 文件上传到 MongoDB。`OrderDate`由于在使用 BI 工具创建报告时面临问题，它被视为字符串数据类型。我的收藏中有大约 10000 条记录。

谁能帮助我如何通过`OrderDate`单个查询更改日期的数据类型？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-18T10:12:36.700

我认为您不能通过单个查询来更改字段的类型。最简单的方法是在插入过程中使用函数将数据字符串转换为`Date`格式。`ISODate`但是，如果要处理已经插入的数据，可以使用 mongodb 控制台使用以下代码进行处理：

```
db.collection.find().forEach(function(element){
  element.OrderDate = ISODate(element.OrderDate);
  db.collection.save(element);
}) 
```

此代码将处理集合中的每个元素并将字段`collection`类型从 更改为。`Orderdate``String``Date`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-07T03:51:26.927

```
db.messages.find().forEach(function(doc) {
  doc.headers.datestamp = new Date(Date.parse(doc.headers.Date.toString())); 
  db.messages.save(doc);
  }) 
```

这很好地转换了这种文本：Tue, 14 Nov 2007 03:22:00 -0800 (PST)

文本来自一个名为安然语料库的电子邮件档案。

# java - Java Ws 捕获拦截器错误

> ID：15473775
> 
> 赞同：0
> 
> 时间：2013-03-18T09:49:53.310
> 
> 标签：java, web-services, jboss, cxf

我正在尝试捕获 Web 服务错误但也无法捕获，我该如何捕获此错误？请注意，我正在使用 Java-Ws（不是 Spring）和 JBoss

```
11:19:54,457 WARNING [org.apache.cxf.phase.PhaseInterceptorChain] 
(http--0.0.0.0-8080-1) Interceptor for {http://services.com/}OppService#{http:
//services.com/}getopp has thrown exception, unwinding now:
org.apache.cxf.interceptor.Fault: Unmarshalling Error: Not a number: asdas 
```

如果我向它发送了一个数字，一切正常，但我希望代码中断以便我可以捕获错误，问题是我似乎无法捕获它，因为它没有到达 java 代码或处理程序。错误甚至在处理程序之前。

请注意，我正在使用 Java 注释来构建 wsdl

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:27:07.350

看看[DefaultValidationEventHandler](http://docs.oracle.com/javaee/5/api/javax/xml/bind/helpers/DefaultValidationEventHandler.html)。根据文档：

> 接收验证警告或错误通知。ValidationEvent 将嵌入一个 ValidationEventLocator，指示错误或警告发生的位置。如果从此方法引发未经检查的运行时异常，则 JAXB 提供程序会将其视为该方法返回 false 并中断当前的解组、验证或编组操作。

所以基本上你需要做的是扩展那个类，覆盖`handleEvent(ValidationEvent event)`方法并检查例如：

```
if (event.getSeverity() == ValidationEvent.WARNING) {
    return super.handleEvent(event);
} else {
    throw new RuntimeException("build your own message.");
} 
```

# ios - 如何从点击的单词 UITextview 中获取字符范围

> ID：15473777
> 
> 赞同：0
> 
> 时间：2013-03-18T09:49:57.250
> 
> 标签：ios, uitextview, uitextinput, uitextposition

我需要从 UITextView 的点击单词中获取字符范围。`UITapGestureRecognizer`我已经在我的实例上设置了一个`UITextView *tv`.

我目前有一个解决方案可以告诉我被点击的*单词*，如该解决方案中所述：[Get word from tap in UITextView](https://stackoverflow.com/questions/12884520/get-word-from-tap-in-uitextview)。

我需要被点击的单词的字符范围，而不仅仅是单词本身，最好以我可以将开始和结束值作为整数访问的方式提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:48:13.417

我使用的解决方案是：

```
int posOfSelected = [tv offsetFromPosition:tv.beginningOfDocument
                        toPosition:textRange.start]; 
```

我得到了被点击单词的第一个字母的字符索引，作为从文档开头的偏移量。

# android - 三星的氧化锆许可证检查器出错

> ID：15473781
> 
> 赞同：1
> 
> 时间：2013-03-18T09:50:01.547
> 
> 标签：android, licensing, samsung-mobile

我想使用 Zirconia 许可证检查器来保护三星移动商店的应用程序，所以我遵循[了这个](http://developer.samsung.com/android/technical-docs/How-to-protect-your-app-from-illegal-copy-using-Samsung-Application-License-Management-Zirconia)todo 并且在我测试它时一切正常，但是当我生成签名 apk 时，我收到了这个错误：

```
java.lang.UnsatisfiedLinkError: Couldn't load nativeinterface from loader dalvik.system.PathClassLoader: findLibrary returned null 
```

但是当我尝试以 zip 格式打开签名的 .apk 时，我发现它`\lib\armeabi\libnativeinterface.so`存在。有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T14:44:22.740

这是迟到的回应，但我遇到了同样的问题。我通过将“armeabi”文件夹重命名为“armeabi-v7a”解决了这个问题。

# php - 如何更改文件的前 512 个字节？

> ID：15473784
> 
> 赞同：2
> 
> 时间：2013-03-18T09:50:10.357
> 
> 标签：php, file, file-io, stream

我在 PHP 中有一个大文件，我想用其他 512 个字节替换其中的前 512 个字节。是否有任何 PHP 函数可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T09:50:10.357

如果您想有选择地创建一个文件并对其进行读写（不截断它），您需要使用以下模式打开[`fopen()`](http://php.net/fopen)文件`'c+'`：

```
$handle = fopen($filename, 'c+'); 
```

PHP 然后具有[`stream_get_contents()`](http://php.net/stream_get_contents)允许将具有特定长度（以及从文件中的特定偏移量）的字节块读取到字符串变量中的功能：

```
$buffer = stream_get_contents($handle, $length = 512, $offset = 0); 
```

但是，没有`stream_put_contents()`将字符串缓冲区写回特定位置/偏移量的流的功能。一个相关的功能是[`file_put_contents()`](http://php.net/file_put_contents)，但它不允许在特定偏移量处写入文件句柄资源。但是有[`fseek()`](http://php.net/fseek)并且[`fwrite()`](http://php.net/fwrite)可以做到这一点：

```
$bytes_written = false;
if (0 === fseek($handle, $offset)) {
    $bytes_written = fwrite($handle, $buffer, $length);
} 
```

这是完整的图片：

```
$handle = fopen($filename, 'c+');
$buffer = stream_get_contents($handle, $length = 512, $offset = 0);

// ... change $buffer ...

$bytes_written = false;
if (0 === fseek($handle, $offset)) {
    $bytes_written = fwrite($handle, $buffer, $length);
}
fclose($handle); 
```

如果 的长度`$buffer`不固定，这将无法正常工作。在这种情况下，最好使用两个文件并[`stream_copy_to_stream()`](http://php.net/stream_copy_to_stream)按照[*如何使用数据库表头更新 csv 列名*](https://stackoverflow.com/q/13874441/367456)中所述使用，或者如果文件不大，也可以在内存中执行此操作：

```
$buffer = file_get_contents($filename);

// ... change $buffer ...

file_put_contents($filename, $buffer); 
```

# ssis - 使用 SSIS 的 csv 文件的命名约定

> ID：15473786
> 
> 赞同：0
> 
> 时间：2013-03-18T09:50:17.763
> 
> 标签：ssis

我需要使用 SSIS 生成一个带有表达式 13-MAR-2013 的 csv 文件。

我能够提取日期和年份，但在月份方面遇到了困难。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:56:29.937

像这样的东西怎么样：

```
(MONTH(GETDATE()) == 1 ? "Jan" : MONTH(GETDATE()) == 2 ? "Feb" : MONTH(GETDATE()) == 3 ? "Mar" :
MONTH(GETDATE()) == 4 ? "Apr" : MONTH(GETDATE()) == 5 ? "May" : MONTH(GETDATE()) == 6 ? "Jun" :
MONTH(GETDATE()) == 7 ? "Jul" : MONTH(GETDATE()) == 8 ? "Aug" : MONTH(GETDATE()) == 9 ? "Sep" :
MONTH(GETDATE()) == 10 ? "Oct" : MONTH(GETDATE()) == 11 ? "Nov" : MONTH(GETDATE()) == 12 ? "Dec" : "InvalidMonth") 
```

# iphone - 确实为多个标记选择了注释

> ID：15473787
> 
> 赞同：0
> 
> 时间：2013-03-18T09:50:17.923
> 
> 标签：iphone, mkannotation, mkannotationview

我正在像这样在地图视图中添加多个标记，

```
markers = [jsonDict objectForKey:key];
            for (id k in markers) {

                if ([k isEqualToString:@"latitude"]) {

                    mlat = [markers objectForKey:k];
                    dlat = [mlat doubleValue];
                }

                else if ([k isEqualToString:@"longitude"]) {

                    mlng = [markers objectForKey:k];
                    dlng = [mlng doubleValue];
                }

                else if ([k isEqualToString:@"file"]){
                    murl = [markers objectForKey:k];
                }

                else if ([k isEqualToString:@"comment"]){
                    mcomment = [markers objectForKey:k];
                }

            }
            annotationCoord.latitude = dlat;
            annotationCoord.longitude = dlng;
            MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
            annotationPoint.coordinate = annotationCoord;
            [self.navimap addAnnotation:annotationPoint]; 
```

`comment`现在，我想`file`为`didSelectAnnotationView`. 如果有人在这方面帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:50:25.573

You should create a custom annotation class and use it rather than MKPointAnnotation:

```
#import <MapKit/MapKit.h>

@interface Marker : NSObject <MKAnnotation>

@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;
@property (nonatomic) CLLocationCoordinate2D coordinate;
@property (nonatomic,copy) NSString* url;
@property (nonatomic,copy) NSString* comment;

@end 
```

You would then implement `didSelectAnnotationView` like this:

```
-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{        
    if ([view.annotation isKindOfClass:[Marker class]]) {
        Marker* marker = view.annotation;
        NSLog(@"selected marker %@", marker);
    }
} 
```

# asp.net-mvc - 使用依赖项（资源）呈现外部 html 页面

> ID：15473790
> 
> 赞同：0
> 
> 时间：2013-03-18T09:50:25.177
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个 ASP.NET MVC3 应用程序。在我的应用程序中，我需要能够呈现外部 HTML 页面。这些 HTML 页面存储在一个简单的文件结构中，图像、CSS 和 JS 文件存储在文件夹中。基本上打开 HTML 文件将呈现页面，因为它应该呈现。我想要的是能够以编程方式呈现此页面。

到目前为止，我已经尝试过这样的东西：

`Response.WriteFile(path)`

`return new FilePathResult("~/Path", "text/html");`

问题是资源（图像、CSS 和 JS 文件）没有被加载，因为我只加载了 html 源代码。

我该怎么做才能正确地使用其他包含的文件呈现 html 文件？

PS：我知道这个功能可能是我的应用程序中的一个安全漏洞。谢谢！

**编辑**：正如 Darin 指出的，我可以使用 iframe 将呈现的 HTML 页面放置在我的视图中。这是我目前正在使用的，但我想实现一个更安全的解决方案，一个不允许访问实际 HTML 页面的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:06:13.780

> 我该怎么做才能正确地使用其他包含的文件呈现 html 文件？

您可以使用 iframe：

```
<iframe src="/somepage.html"></iframe> 
```

也应该有效，只是此 HTML 页面中引用的`return new FilePathResult("~/Path", "text/html");`静态资源（CSS、javascript、图像...）需要相对于当前 url 或绝对 url（如果它们是静态 HTML，则更难）。

# android - 如何在 GridView 中对图像进行分类以制作自定义图库

> ID：15473792
> 
> 赞同：1
> 
> 时间：2013-03-18T09:50:31.450
> 
> 标签：android, android-gallery, android-gridview

我*使用 GridView 制作了几个图库模块，*我使用了本教程：[http](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/) ://www.androidhive.info/2012/02/android-gridview-layout-tutorial/ ，

但现在这一次我想让它更适合我的使用，我**想分类图像**，请参见下面的屏幕截图

我*将在特定类别下使用静态图像*

如何制作这种图片库：

![在此处输入图像描述](../Images/6347798b210e9c51da978bf4115c55ed.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T04:56:03.620

我从未尝试过，但我找到了这个示例代码，请尝试根据需要自定义它：

[http://blog.blundell-apps.com/infinite-scrolling-gallery/](http://blog.blundell-apps.com/infinite-scrolling-gallery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:57:13.650

创建一个具有 TextView 和自定义 ListView 的布局。在每个listItem 中都有一个GridView。并加载 GridItems。

TextView 用于类别名称。

基本上你必须结合自定义 ListView 实现和 GridView 实现来实现你的目标。你可以在同一个 androidhive 网站上找到单独的教程来做同样的事情。但是，您必须努力将它们合二为一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T09:54:10.140

你可以通过实现 Jeff Shrkey 的 SeperatedListadapter 来做到这一点

[http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)

你可以

[看 1](http://androidexam.blogspot.com/2011/09/listview-sectioned-headers-in-android.html)
[看 2](https://stackoverflow.com/questions/7522454/android-separatedlistadapter-how-to-get-accurate-item-position-on-onclick)

> 创建这些分离的列表没有简单的方法，所以我将分离列表适配器放在一起，它可以快速完成。总而言之，我们正在创建一个新的 BaseAdapter，它可以包含其他几个适配器，每个适配器都有自己的节标题。

# php - 重新设计页面：更改生成 HTML 的 PHP 代码

> ID：15473793
> 
> 赞同：-1
> 
> 时间：2013-03-18T09:50:31.610
> 
> 标签：php, html, css

我正在尝试重新设计一个 Web 应用程序，但我被这段代码难住了：

```
foreach ($this->cells1 as $c) {
            $s .= $c[2] ? $c[2] : '';
            $s .= '<div style="clear:both"><table><tr><td nowrap="nowrap"' . ($c[0] ? (' ' . $c[0]) : '') . '>';
            $s .= $c[1] ? $c[1] : '&nbsp;';
            $s .= '</td>';
            $s .= $c[3] ? $c[3] : '';
        }
        $s .= '</tr></table></div>'; 
```

它正在生成 HTML 代码，例如：

```
<div style="clear:both"></div>
<table>
   <tbody>
      <tr>
        <td nowrap="nowrap">Search:</td>
        <form action="some-action" method="post"></form>
      </tr>
   </tbody>
 </table>

 <div style="clear:both"></div>
 <table>
   <tbody>
      <tr class="alt-row">
        <td nowrap="nowrap">
          <input type="text">
        </td>
      </tr>
   </tbody>
 </table>

 <div style="clear:both"></div>
 <table>
   <tbody>
     <tr>
       <td nowrap="nowrap">&nbsp;</td>
       <form action="some-action" method="post"></form>
     </tr>
   </tbody>
 </table>

and so on. . . . 
```

它看起来像这样：

![忽略按钮的大小。 这是故意的](../Images/94683348fe397fa58170cd063c71001d.png)

我只想将它们全部放在一个我可以根据自己的口味设计的 div 中。任何人都可以向我解释那部分代码，以便我可以使用它吗？或者更好地向我展示一种使它们适合 div 的替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:38:20.650

您需要澄清您的问题以提及您希望删除表结构。

这里发生的是应用程序正在为该数组中的每个项目返回一个数组 $this->cells1 它正在使用它包含的元素创建一个单独的表。

下面是一个三元 if 语句，它的意思是如果 c[2] 存在 echo c[2] if not echo '' 行中的第一件事是问题，然后是问号，如果问题是真的该怎么办然后是一个冒号，如果问题是错误的该怎么办。

```
$c[2] ? $c[2] : ''; 
```

要将其更改为仅创建 div，您真正需要做的就是删除表格标记并将其替换为您需要的任何内容。

例如：

```
foreach ($this->cells1 as $c) {
            $s .= $c[2] ? $c[2] : '';
            $s .= '<div><p>' . ($c[0] ? (' ' . $c[0]) : '');
            $s .= $c[1] ? $c[1] : '&nbsp;';
            $s .= '</p>';
            $s .= $c[3] ? $c[3] : '';
        }
        $s .= '</div>'; 
```

将生成一个 div，其中第一个元素包裹在 ap 标签中。

就个人而言，我会做的是单独回显每个项目以查看它返回的内容，然后相应地构造 foreach，因为老实说，它看起来也有一些从数据库返回的 HTML。

```
foreach($this->cells1 as $c) {

    echo 'c0:' . $c[0];
    echo 'c1:' . $c[1];
    echo 'c2:' . $c[2];
    echo 'c3:' . $c[3];
} 
```

这将为您提供每个元素返回的内容的列表，这样您就可以弄清楚数据的样子，在您知道如何处理它会让生活变得更轻松之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:57:57.773

```
 echo "<div id='mycustomdiv'>";
foreach ($this->cells1 as $c) {
            $s .= $c[2] ? $c[2] : '';
            $s .= '<div style="clear:both"><table><tr><td nowrap="nowrap"' . ($c[0] ? (' ' . $c[0]) : '') . '>';
            $s .= $c[1] ? $c[1] : ' ';
            $s .= '</td>';
            $s .= $c[3] ? $c[3] : '';
        }
        $s .= '</tr></table></div>';

echo "</div>"; 

```

请参阅上面的代码，那里有您的自定义 div 的回声和关闭该 div 的回声。添加这些回声。如果您需要解释代码，请告诉我。

# c# - 什么是原生客户端？

> ID：15473794
> 
> 赞同：0
> 
> 时间：2013-03-18T09:50:32.563
> 
> 标签：c#, windows

什么是原生客户端？

原生客户端和胖客户端一样吗？

任何人都可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:22:30.130

对我来说，本地客户端传统上意味着不由虚拟执行环境或沙箱解释，而是由 CPU 执行并绑定到操作系统（想想 Win32）。我会将本机与 HTML、JVM、CLR 等进行对比。

对我来说，胖客户端传统上意味着一些业务逻辑在客户端上执行（想想 WPF、WinForms），而不是 Web/浏览器或其他轻量级表示容器，其中大多数业务逻辑在（Web）服务器上执行，而最小逻辑在客户。

传统上，这两个区别是不相关的，“本地客户”通常是“厚实的”。然而，随着设备的引入，这种区别变得扭曲了，因为如果仍然可以将小型设备上的原生应用程序视为厚实，就不再那么清楚了。许多人避免说“厚”，而是指“富”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:03:05.227

我很确定目前，Native Client 一词仅用于指代 Google Native Client (NaCl)，它是一种在浏览器中运行本机代码的工具，是的，在这种情况下，[Google 绝对可以解释它给你](https://developers.google.com/native-client/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:04:00.363

我只能猜测，因为缺乏上下文。我猜您提到的 Native Client 与 Google Chromium 有关，对吗？

Chromium 是基于网络浏览器的操作系统，这意味着开发人员不应该能够比浏览器更深入。没有直接操作硬件，或者在 CPU 级别优化代码，诸如此类。

但是需求是存在的，所以 Native Client 是一种技术，它提供了一个沙箱，用于在 Web 浏览器中运行 Native 代码（不是真正的原生代码，只是你用典型的原生语言编写的）。

您可以看到它与厚客户端不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T09:54:29.630

虽然本地客户端可能是关于任何东西的（例如，一个美洲原住民付钱让你为他编写软件），但我想说的是，就软件而言，本地客户端是一些被编译为 CPU 字节码的软件，而不是编译成字节码的软件，运行时由执行环境（Java、.NET等）编译成CPU字节码。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-19T06:02:39.313

Nishakant，既然你在我的推文中问了这个问题，让我解释一下我的意思。在这种情况下，本机是指本机 Windows 8 应用程序，这又意味着符合新的现代 UI 准则的应用程序，在 WinRT 上运行，从 Windows 8 商店下载和安装，并在 Windows 8 计算机上本地运行。它不是 Web 应用程序，而是本地安装的。您可以将其与常规桌面世界中的胖客户端应用程序相关联。

此外，这个特定的应用程序是由 Twitter 本身构建的，因此原生一词的另一个微妙含义

# javascript - 我有一个字符串，因为我想用正确的嵌套搜索括号对，并且它必须在 javascript 中有一些值

> ID：15473795
> 
> 赞同：0
> 
> 时间：2013-03-18T09:50:32.710
> 
> 标签：javascript

我有一个 string ，因为我想搜索带有正确嵌套的括号对，并且它必须在 javascript 中具有一些值。例如，

```
String = "@PriceMovement@-(@AssetProof@-(@TradeImpact@)/45)-@UninvestedCashImpact@" 
```

在上面的字符串中，所有变量都用**@**符号覆盖。根据上面的语句`TradeImpact`将首先除以 45 并进行剩余计算，如果用户将输入如下，那么我应该显示错误使用了错误的括号（我不能用下面的打开和关闭大括号的计数来做到这一点字符串也将具有相等的开始和结束括号）。请帮助我验证它提前谢谢。

```
String = "@PriceMovement@-(@AssetProof@-(@TradeImpact@))/45)-((@UninvestedCashImpact@)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:59:05.183

最简单的方法是用值替换变量并应用于`eval`结果字符串：

```
str = "@PriceMovement@-(@AssetProof@-(@TradeImpact@))/45)-((@UninvestedCashImpact@)"
values = {
    PriceMovement: 1,
    AssetProof: 2,
    TradeImpact: 3, 
    UninvestedCashImpact: 5
}

try {
    str = str.replace(/@(\w+)@/g, function($0, $1) {
        return values[$1]
    })
    result = eval(str)
    alert(result)
} catch(e) {
    alert("Error: " + e)
} 
```

这也捕获了其他类型的语法错误，例如无效的运算符。

要仅检查括号的嵌套，请在循环中替换`(...)`，直到没有更多匹配项为止。然后，检查字符串是否包含不成对的左括号或右括号：

```
re = /\([^()]*\)/g
while(str.match(re))
    str = str.replace(re, '')
if(str.match(/[()]/))
    alert("INVALID NESTING") 
```

# xml - 'SimpleXMLElement' 的序列化不允许在会话 xml 值中插入错误

> ID：15473797
> 
> 赞同：5
> 
> 时间：2013-03-18T09:50:34.020
> 
> 标签：xml, serialization, simplexml, php

大家好，我有一个用 codeigniter 开发的网站。我正在解析从服务器检索的 xml，并且我想将返回值放入会话变量中。但是给我这个错误：

> 致命错误：未捕获的异常 'Exception' 与消息 'SimpleXMLElement' 的序列化是不允许的

我的 vps 上的 PHP 版本是：PHP 版本 5.3.10-1ubuntu3.4

这是我的代码：

```
$xml = new SimpleXMLElement(curl_exec($ch2));
$error2=curl_getinfo( $ch2, CURLINFO_HTTP_CODE );
curl_close($ch2);
foreach ($xml->DATA as $entry){
    $code_travco = $entry->attributes()->COUNTRY_CODE;
    $name_en =  $entry->COUNTRY_NAME;
    $newdata = array(
        'code'  => $code_travco,
        'name_en'     =>  $name_en
    );
    $this->session->set_userdata($code_travco.'_nation_en', $newdata);      
 } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T09:56:16.263

可能会在添加之前尝试将其更改为字符串，例如：

```
foreach ($xml->DATA as $entry){
    $code_travco = (string) $entry->attributes()->COUNTRY_CODE;
    $name_en =  (string) $entry->COUNTRY_NAME;
    $newdata = array(
        'code'  => $code_travco,
        'name_en'     =>  $name_en
    );
    $this->session->set_userdata($code_travco.'_nation_en', $newdata);      
 } 
```

# ios - 使用 Objective-C/C 查找 DST（夏令时）时间戳？

> ID：15473801
> 
> 赞同：6
> 
> 时间：2013-03-18T09:50:50.540
> 
> 标签：ios, objective-c, c, cocoa-touch, dst

有没有办法使用 C 或 Objective-C 获取每个国家/地区的日光浴开始和结束的具体日期（方式）？

在墨西哥，夏令时从 4 月的第一个星期日凌晨 2:00 开始，到 10 月的最后一个星期日凌晨 2:00 结束。在许多 POSIX 系统中，这被写成

```
M4.1.0/2,M10.5.0/2
(Begins: Month 4, 1st Sunday at 02:00AM, Ends: Month 10, last Sunday at 02:00AM) 
```

我知道有可能知​​道夏令时是否正在使用

```
NSTimeZone* systemTimeZone = [NSTimeZone systemTimeZone];
BOOL dstIsOn = [systemTimeZone isDaylightSavingTime]; 
```

并且有可能获得时间直到下一次`Daylight Savings`开始

```
NSTimeZone* systemTimeZone = [NSTimeZone systemTimeZone];
NSTimeInterval delta = [systemTimeZone daylightSavingTimeOffset]; 
```

**但是：我将如何找到夏令时开始/结束的具体日期？**

那里有一些我找不到的杀手桌吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T10:03:22.580

是的，有 - 你可以使用`[NSTimeZone nextDaylightSavingTimeTransitionAfterDate:]`方法。这将返回一个`NSDate`，您可以使用它`daylightSavingTimeOffsetForDate`来确定偏移量是多少。

通常您会使用它来查找下一个偏移量，但您显然可以使用不同的日期多次运行它以获得一系列即将到来的夏令时更改。还有一个方便的方法`nextDaylightSavingTimeTransition`总是返回下一个转换。

# iis-7 - IIS7 GZIP 压缩 - httpCompression 部分

> ID：15473803
> 
> 赞同：3
> 
> 时间：2013-03-18T09:50:52.050
> 
> 标签：iis-7, web-config, gzip

我试图`httpCompression`在 IIS7 上进行配置。通过谷歌搜索，我发现它可以使用`httpCompression`配置中的部分进行。问题是，我无法通过 web.config 使其工作。

当我在所有内容中进行配置时，`applicationHost.config`一切都可以根据需要进行，但我希望能够针对每个应用程序而不是全局进行此配置。

我将部分定义更改`applicationHost.config`为`<section name="httpCompression" overrideModeDefault="Allow" />`并将`httpCompression`部分移动到 web.config：

```
<httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
      <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" />
      <staticTypes>
        <add mimeType="text/*" enabled="true" />
        <add mimeType="message/*" enabled="true" />
        <add mimeType="application/x-javascript" enabled="true" />
        <add mimeType="application/atom+xml" enabled="true" />
        <add mimeType="application/xaml+xml" enabled="true" />
        <add mimeType="*/*" enabled="false" />
      </staticTypes>
      <dynamicTypes>
        <add mimeType="text/*" enabled="true" />
        <add mimeType="message/*" enabled="true" />
        <add mimeType="application/x-javascript" enabled="true" />
        <add mimeType="application/json" enabled="true" />
        <add mimeType="application/json; charset=utf-8" enabled="true" />
        <add mimeType="*/*" enabled="false" />
      </dynamicTypes>
    </httpCompression> 
```

我错过了什么？看起来 IIS 根本没有从 web.config 读取压缩配置。

每次更改后，我都会使应用程序池回收，所以这不是问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-12T19:13:01.783

根据此 ServerFault 答案：[https](https://serverfault.com/a/125156/117212) ://serverfault.com/a/125156/117212 - 您无法更改 web.config 中的 httpCompression，它需要在 applicationHost.config 文件中完成。这是我在 Azure Web 角色中用于修改 applicationHost.config 文件并添加 mime 类型以进行压缩的代码：

```
using (var serverManager = new ServerManager())
{
    var config = serverManager.GetApplicationHostConfiguration();
    var httpCompressionSection = config.GetSection("system.webServer/httpCompression");
    var dynamicTypesCollection = httpCompressionSection.GetCollection("dynamicTypes");

    Action<string> fnCheckAndAddIfMissing = mimeType =>
    {
        if (dynamicTypesCollection.Any(x =>
        {
            var v = x.GetAttributeValue("mimeType");
            if (v != null && v.ToString() == mimeType)
            {
                return true;
            }

            return false;
        }) == false)
        {
            ConfigurationElement addElement = dynamicTypesCollection.CreateElement("add");
            addElement["mimeType"] = mimeType;
            addElement["enabled"] = true;
            dynamicTypesCollection.AddAt(0, addElement);
        }
    };

    fnCheckAndAddIfMissing("application/json");
    fnCheckAndAddIfMissing("application/json; charset=utf-8");

    serverManager.CommitChanges();
} 
```

`ServerManager`来自`Microsoft.Web.Administration`NuGet 中的包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T11:42:40.340

您应该检查整个[配置文件层次结构](http://weblogs.asp.net/jgalloway/archive/2012/01/17/10-things-asp-net-developers-should-know-about-web-config-inheritance-and-overrides.aspx)。

如果您从中删除了该部分，`applicationHost`则可能是从父目录继承`machine.config`或继承自`web.config`父目录。

# c# - 如果 UI 元数据存储在数据库中怎么办？在设计此类应用程序之前我需要考虑哪些场景？

> ID：15473804
> 
> 赞同：0
> 
> 时间：2013-03-18T09:50:52.647
> 
> 标签：c#, .net, database

我正在开发一个 .NET 应用程序，我们将 UI 元素存储在数据库中（UI 界面元数据）。有人可以指导我在设计时在维护、性能、部署、应用程序升级方面需要考虑哪些场景吗？

将 UI 元数据存储在 XML 中和将 UI 元数据存储在数据库中的权衡是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:00:58.897

我认为这将有助于定义您正在存储的元数据的一些示例。

当你说 UI 的元数据时，我会想到一些事情：

1.  下拉菜单的值。以状态列表为例。
2.  动态创建的 UI 元素。可以通过数据库将文本框添加到表单中。
3.  颜色、字体、对齐方式等。“向左对齐的红色按钮”

每个人在数据库中都有优点和缺点。

根据经验，当将过多的 UI 信息放入数据库时​​，应用程序变得很难推理。您将渲染 UI，但它看起来不正确。然后你花半天时间检查你的代码和你的数据库试图找出原因。您将在数据库中翻转一些位并再次呈现 UI，并想知道为什么它不起作用。

当在数据库中存储太多关于 UI 的信息时，还会生成大量样板代码。

每个 UI 元素需要回答的一些问题：

“如果只是在 UI 中硬编码，这会更容易维护吗？” 在 HTML 编辑器中更改 HTML 比通过数据库更容易。

“这个 UI 元素是否需要随着时间的推移发生很大变化？” 除非某些用户需要更新/更改/修改该元素，否则将其保留为硬编码。

“我真的需要大量用于 UI 元素的数据库表吗？” 维护它可能成为一场噩梦。例如，对问题和答案的调查可能会产生 5-10 个表格。

我建议尽量在应用程序中保留 UI 元素。只有在绝对必要时才应将它们写入数据库。

# excel - 检查电子表格“X.xls”是否打开？

> ID：15473813
> 
> 赞同：1
> 
> 时间：2013-03-18T09:51:43.473
> 
> 标签：excel, vba

有没有一种简单的方法可以从 VBA 检查当前 Excel 会话中是否打开了一个特别命名的电子表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:56:33.343

```
 Dim wBook As Workbook 
             'Check that Summary worksheet is available for update.
 on error goto ErrHandler
            Set wBook = Workbooks("CommittedSummary.xls") 
               If wBook Is Nothing Then 
        msgbox("Not Open")
            Else 'It is open
                MsgBox("The 'CommittedSummary.xls' workbook is already in use and 
                cannot be updated.  Please try again when the workbook Is available", _ 
                vbCritical, "Committed Request Edit") : exit sub
               End If 
    errhandler: msgbox("Workbooks is already open"):exit sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T11:43:59.237

使用错误处理如下

```
Sub Working()
Dim Wb As Workbook
Dim strFile As String
strFile = "X.xls"
On Error Resume Next
Set Wb = Workbooks(strFile)
On Error GoTo 0
If Not Wb Is Nothing Then
MsgBox strFile & " is open in this Excel instance"
Else
MsgBox strFile & vbNewLine & " is Closed in this Excel instance", vbCritical
End If
End Sub 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T17:28:35.643

不要使用`On Error Resume Next`

仅仅因为代码会在该行崩溃并不意味着工作簿实际上没有打开。这只是意味着您的代码崩溃了。

如果您有两个 Excel.Application 实例，每个实例都有一个工作簿集合。并且可能没有在正确的工作簿集合中寻找。然后你的代码就会崩溃。您的代码崩溃可能还有其他原因。

不要在代码的正常流程中使用错误处理程序，这是不好的编程，会导致问题。错误处理是针对不可预见的问题。

# javascript - 试图获取 response.name 或 id

> ID：15473818
> 
> 赞同：0
> 
> 时间：2013-03-18T09:52:07.927
> 
> 标签：javascript, facebook

在我的页面上，人们可以按下分享按钮并在 Facebook 上发帖。我使用这段代码：

```
window.fbAsyncInit = function() {
    FB.init(
    {
        "appId"  : "<?php echo $fbid; ?>",
        "status" : true,
        "cookie" : true,
        "xfbml"  : true,
        "oauth"  : true
    }); 
```

单击功能 showStreamPublish 开始：

```
function showStreamPublish() {
        FB.ui(
           {
             method: 'feed',
             name: 'Text',
             caption: 'Text',
             link: 'Link',
             picture:'Pic',
             description: 'ni',
             user_message_prompt: 'Share it!'

           },
           function(response) {
                 if (response && response.post_id) {

                    FB.api('/me', function(response) 
        {alert(response.name);
        });  ... 
```

在我使用以下代码的地方，我想显示做 Sahre 的人的用户名，但它没有:(

```
FB.api('/me', function(response) 
        {alert(response.name);
        }); 
```

如何获取分享的用户名或用户 ID？它打开警报框 - 内容为“未定义”。谢谢你的帮助。

我试图获取 response.status，但奇怪的是：即使我通过我的应用程序连接并在 Facebook 上发帖，我也会收到一条消息，即我没有通过我的应用程序连接。使用该代码：

```
 if (response.status === 'connected') {
    // the user is logged in and has authenticated your app
    alert('All good');
    }else if (response.status === 'not_authorized') {
   // the user is logged in but NOT through your app
   alert('Not good');
   }else{
    alert('What the heck?');// the user isn't logged in to Facebook.
  }
 }); 
```

尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:26:42.693

我看到两件事我觉得不好：

*   `FB.api`调用包含在`FB.ui`.
*   你使用`response`了两次：
    *   `FB.ui({...}, function(response) {...`,
    *   `FB.api('/me', function(response) {...`.

这两个问题可能相关或无关。但这将使它：

```
function showUserName() {
    FB.api('/me', function(response) {
        alert('Post was published by ' + response.name);
    });
}
function showStreamPublish() {
    FB.ui({
        method: 'feed',
        name: 'Text',
        caption: 'Text',
        link: 'Link',
        picture: 'Pic',
        description: 'ni',
        user_message_prompt: 'Share it!'
    }, function(response) {
        if (response && response.post_id) {
            showUserName();
        } else {
            alert('Post was not published.');
        }
    }
); 
```

# asp.net - 从正文绑定时如何执行自定义模型绑定器？

> ID：15473822
> 
> 赞同：6
> 
> 时间：2013-03-18T09:52:17.893
> 
> 标签：asp.net, asp.net-web-api

我一直在尝试使用模型绑定来使我们的 API 更易于使用。使用 API 时，当数据在正文中时，我无法让模型绑定绑定，只有当它是查询的一部分时。

我的代码是：

```
public class FunkyModelBinder : IModelBinder
{
    public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)
    {
        var model = (Funky) bindingContext.Model ?? new Funky();

        var hasPrefix = bindingContext.ValueProvider
                                      .ContainsPrefix(bindingContext.ModelName);
        var searchPrefix = (hasPrefix) ? bindingContext.ModelName + "." : "";
        model.Funk = GetValue(bindingContext, searchPrefix, "Funk");
        bindingContext.Model = model;
        return true;
    }

    private string GetValue(ModelBindingContext context, string prefix, string key)
    {
        var result = context.ValueProvider.GetValue(prefix + key);
        return result == null ? null : result.AttemptedValue;
    }
} 
```

当查看我只看到的`ValueProvider`属性时，我认为这意味着如果数据在正文中，我将不会得到它。我该怎么做？我想支持以 json 或表单编码的形式发布数据。`bindingContext``QueryStringValueProvider``RouteDataValueProvider`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-04T03:29:32.677

我也在调查这个。

WebApis Model Binder 带有两个内置的 ValueProviders。

QueryStringValueProviderFactory & RouteDataValueProviderFactory

调用时会搜索哪些内容

```
context.ValueProvider.GetValue 
```

这个问题有一些关于如何从正文绑定数据的代码。

[如何将结果模型对象传递出 System.Web.Http.ModelBinding.IModelBinder。绑定模型？](https://stackoverflow.com/questions/28892332/how-to-pass-the-result-model-object-out-of-system-web-http-modelbinding-imodelbi)

您也可以创建一个自定义 ValueProvider 来执行此操作，这可能是一个更好的主意 - 将搜索与键匹配的值。上面的链接只是在模型绑定器中执行此操作，这将 ModelBinder 限制为仅在正文中查看。

```
public class FormBodyValueProvider : IValueProvider
{
    private string body;

    public FormBodyValueProvider ( HttpActionContext actionContext )
    {
        if ( actionContext == null ) {
            throw new ArgumentNullException( "actionContext" );
        }

        //List out all Form Body Values
        body = actionContext.Request.Content.ReadAsStringAsync().Result;
    }

    // Implement Interface and use code to read the body
    // and find your Value matching your Key
} 
```

# python - 开发 Mac OSX/Windows Daemon 服务的工具包

> ID：15473833
> 
> 赞同：2
> 
> 时间：2013-03-18T09:52:47.113
> 
> 标签：python, scala, service, cross-platform, daemons

我需要开发一个也存在于系统托盘中的守护程序服务。系统托盘图标允许用户通过右键菜单自定义/访问一些选项。它可能会打开一个窗口，并以更好的方式管理这些选项。

该应用程序主要与 RESTful 服务通信，发布和下载文件。

现在我知道对于任何守护程序服务，它都需要是本地的。然而，我们没有奢侈地维护 3 个不同的开发管道，特别是因为该应用程序是实验性的（但可能会落入用户手中）

我有 Java/Scala 方面的经验，其次是 C++/Python/JS。我更喜欢 java/Scala（现有代码库），但对其他语言的框架开放。

我正在考虑做一个基于 scala 的应用程序，带有用于窗口的摇摆，但它并不漂亮。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:11:48.040

我们有一个应用程序，基本代码相同，使用这两组组件在 Windows、OSX 和 Linux（带系统托盘）上运行：

*   Tanuki [Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/download.jsp)处理应用程序的生命周期。它还允许将组件安装为“本机”Windows 服务。如果有帮助，3.2.3 版在 LGPL 下。

*   大多数平台都支持的 Java 6 [java.awt.SystemTray 。](http://docs.oracle.com/javase/6/docs/api/java/awt/SystemTray.html)在 OSX 上，我们使用[macify](http://simplericity.com/2007/10/02/1191336060000.html)的修改版本来实现 OSX 特定的噱头，如 doc 图标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:00:41.437

您可以使用 JavaFX 和[ScalaFX](https://code.google.com/p/scalafx/)绑定。它们看起来得到了非常积极的维护，语法看起来很干净。唯一的问题是它似乎对使用系统托盘的支持很差 - 有关详细信息和一些解决方法，请参阅[此讨论](https://forums.oracle.com/forums/thread.jspa?messageID=9994963)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:27:53.857

您可以使用[Real Studio](http://www.realsoftware.com)创建 Windows 服务和 OS X/Linux 守护程序。Real Studio 为 Windows、OS X 和 Linux 创建本机应用程序。

# python - 如何更改python中列表的主要顺序？

> ID：15473835
> 
> 赞同：3
> 
> 时间：2013-03-18T09:52:54.783
> 
> 标签：python, list

我有一个 N 个列表的列表，每个子列表包含 M 个元素。

如何创建一个包含 N 个元素的 M 个列表的列表，每个列表包含初始列表中的第 n 个元素？

假设我有这个

```
myList = [[1, 2, 3],[4, 5, 6]] 
```

我希望有

```
[[1, 4],[2, 5],[3, 6]] 
```

性能也很重要。我有数百万个元素的子列表（尽管，一维总是很小：比如 1.000.000 x 8 ）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:56:01.370

这将给出元组，但扩展它以包含列表是微不足道的：

```
zip(*myList) 
```

IE

```
[list(i) for i in zip(*myList)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T09:56:18.903

```
>>> lst = [[1, 2, 3], [4, 5, 6]]
>>> zip(*lst)
[(1, 4), (2, 5), (3, 6)] 
```

[`zip`](http://docs.python.org/2/library/functions.html#zip)在 Python 2 中返回一个列表，但在 Python 3 中返回一个迭代器，如果需要，您必须将其转换为列表 ( `list(zip(lst))`)

另请参阅：[Python 中的矩阵转](https://stackoverflow.com/q/4937491/1907098)置、[转置/解压缩函数（zip 的倒数）？](https://stackoverflow.com/questions/19339/a-transpose-unzip-function-in-python)

* * *

`zip(*lst)`所做的是将使用运算符的元素*解压缩*到函数的单独参数中。`lst``*``zip`

我们知道当我们将两个列表放入时会发生什么：

```
>>> zip([1, 2, 3], [4, 5, 6])
[(1, 4), (2, 5), (3, 6)] 
```

因此，如果我们有一个包含这两个列表的列表，`*`则将解包该列表以形成两个单独的参数——相当于上面的调用。

```
>>> zip(*[[1, 2, 3], [4, 5, 6]])
[(1, 4), (2, 5), (3, 6)] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T09:56:47.510

采用

```
myList = [[1, 2, 3],[4, 5, 6]] 
zip(*myList ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T09:56:38.123

也许在[itertools.izip()的帮助下](http://docs.python.org/2/library/itertools.html#itertools.izip)

```
itertools.izip(*myList) 
```

要从此迭代器创建列表，请执行以下操作：

```
map(list, itertools.izip(*myList)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T10:00:33.753

既然你提到了效率，我用[PyPy](http://pypy.org/)尝试了这些，在 100x1000 左右它们开始比`zip`（在 CPython 上但它们更差）：

```
myList = [[1, 2, 3],[4, 5, 6]]
newList = [[] for _ in xrange(len(myList[0]))]
    for innerList in myList:
        for elIdx in xrange(len(innerList)):
            newList[elIdx].append(innerList[elIdx])

print newList 
```

我的第一次尝试（更糟），但仍然比`zip`PyPy 更好：

```
newList = [[None for i in xrange(len(myList))] for j in xrange(len(myList[0]))]
for i in xrange(len(myList)):
    for j in xrange(len(myList[i])):
        newList[j][i] = myList[i][j]

print newList 
```

# php - 是否可以在 php 中通过 SID 加载会话？

> ID：15473838
> 
> 赞同：2
> 
> 时间：2013-03-18T09:53:06.850
> 
> 标签：php, api, session

我正在研究 API，默认情况下使用 cookie，但也应该可以通过 sid 加载会话数据。

因此，场景如下所示：

1.  客户端使用 cookie 和/或 SID 参数发出请求
2.  我们检查是否定义了 SID - 我们通过 SID 加载会话数据
3.  如果未定义 SID - 我们使用在 cookie 中定义的 SID

我的第一个想法是使用`session_id()`函数来加载指定 SID 的会话数据，但我发现这个函数没有这样做 - 它只是覆盖当前会话 id，但不加载指定 SID 的任何数据。

是否可以在 PHP 中为不同的 SID 加载不同的会话？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T09:55:29.347

您需要在调用`session_id` *之前使用*`session_start`

# php - 我不能从 mysql 数据库中获取多行到数组中？

> ID：15473844
> 
> 赞同：3
> 
> 时间：2013-03-18T09:53:17.027
> 
> 标签：php, mysql, arrays, select, for-loop

我不能从 mysql 数据库中获取多行到数组中？我有代码，但是当我回显到文本框时它不工作或不显示所有行？

```
<?php 
if(is_array($_SESSION['pid']))
{
  $pid = join(',',$_SESSION['pid']); 
  $result=mysql_query("SELECT id AS wid FROM mywishlist where pid='$pid'") 
            or die("Id    Problem"."<br/><br/>".mysql_error());
  $results= array();
  $i=0; // add the new line
  while($row=mysql_fetch_array($result)){
    $results[$i] = $row['wid'];
    $i++;
  }
  $results;
}
$max=count($results);
for($j=0; $j<$max; $j++)
{
?>
<input type="text" name="wid[]" value="<?php echo $results[$j]; ?>" />
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:57:51.170

您的查询错误，请使用此查询

```
$result=mysql_query("SELECT id AS wid FROM mywishlist where pid IN($pid) ") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T09:56:34.227

这行`join(',',$_SESSION['pid'])`让我觉得你想通过他们的`pid`. 尝试使用`IN`运算符：

```
SELECT id AS wid FROM mywishlist
WHERE pid IN ($pid) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T09:56:55.223

尝试

```
$results= array();

while($row=mysql_fetch_array($result))
{
    $results[] = $row['wid'];
} 
```

和 For 循环一样。

```
$max = count($results);
for($j=0; $j<$max; $j++)
{
?>
    <input type="text" name="wid[]" value="<?php echo $results[$j]; ?>" />
<?php
}
?> 
```

# ios - 如何在另一个视图中显示在一个视图中选择的图像

> ID：15473845
> 
> 赞同：0
> 
> 时间：2013-03-18T09:53:20.827
> 
> 标签：ios, objective-c, uiimageview

我在 iOS 中使用下面的代码从照片库中选择图像。我需要在不同的视图中显示此图像。我应该如何进行？

```
//delegate methode will be called after picking photo either from camera or library
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [self dismissViewControllerAnimated:NO completion:nil];
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
    NSArray *theViewControllers = [self.tabBarController viewControllers];

    [imgview setImage:image]; //set in image view

    [self performSegueWithIdentifier:@"NextView" sender:nil];
} 
```

我尝试了下面的代码在下一个视图中显示图像，但它不起作用？？

```
//delegate methode will be called after picking photo either from camera or library
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [self dismissViewControllerAnimated:NO completion:nil];
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
    NSArray *theViewControllers = [self.tabBarController viewControllers];

    //[imgview setImage:image]; //set in image view
    ImageViewController *adjViewController = (ImageViewController *)[theViewControllers objectAtIndex:0];
    [adjViewController.imageview1 setImage :image]; 

    [self performSegueWithIdentifier:@"NextView" sender:nil];        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:59:52.433

您可以将`UIImage *image`（从您的`imagePickerController`方法）设为全局到其视图控制器，然后将其传递给`prepareForSegue`.

例如：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"NextView"]) {
        ImageViewController *vc = [segue destinationViewController];
        [vc setImage:image];
    }
} 
```

然后在你的`ImageViewController.h`你只需要这样的东西：

```
@interface ImageViewController : UIViewController {
    UIImage *image;
}
@property (nonatomic, retain) UIImage *image; 
```

并在 .m 中合成它并将图像设置为您的`imageView`in `viewWillAppear`。您可以阅读`prepareForSegue` [此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW84)的文档。

# facebook - facebook之类的社交插件不起作用

> ID：15473848
> 
> 赞同：1
> 
> 时间：2013-03-18T09:53:26.663
> 
> 标签：facebook, facebook-like, facebook-social-plugins

我正在尝试使用带有点赞和发送按钮的 facebook like 插件。我页面的源代码如下 -

```
<html>
<body>
hello
 <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
 js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=138876406236026";
 fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-send"></div>
</body> 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:51:22.470

它不适用于您的本地系统，您应该将其放在您的网站中，例如：www.sample.com，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:36:35.800

facebook 社交按钮在计算机上本地工作。当您将它们放在您的网站上时，它们会起作用 :)

# spring-security - 会话管理在 Spring Security 中不起作用

> ID：15473851
> 
> 赞同：-1
> 
> 时间：2013-03-18T09:53:33.800
> 
> 标签：spring-security

我的 Spring-security.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:p="http://www.springframework.org/schema/p" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/security 

            http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <!-- This is where we configure Spring-Security  -->

    <security:global-method-security pre-post-annotations="enabled" />
    <!-- <security:global-method-security secured-annotations="enabled" /> -->

    <security:http auto-config="false" use-expressions="true" access-denied-page="/access-deniad" 
            entry-point-ref="authenticationEntryPoint">
        <security:intercept-url pattern="/RetailEnterpriseSuite/login.do" access="permitAll"  requires-channel="https" />
        <security:intercept-url pattern="/admin" access="hasRole('ROLE_ADMIN')" requires-channel="https"/>
        <!-- <security:intercept-url pattern="/common" access="hasRole('ROLE_USER')"/> -->
        <security:intercept-url pattern="/users" access="hasRole('ROLE_USER')"/>
        <security:intercept-url pattern="/*" access="permitAll" requires-channel="any"/>

        <security:logout 
                invalidate-session="true" 
                logout-success-url="/login.html" 
                logout-url=""/>

        <!-- 
            Querying the SessionRegistry for currently authenticated users and their sessions
            http://static.springsource.org/spring-security/site/docs/3.1.x/reference/session-mgmt.html#list-authenticated-principals 
        -->
        <security:custom-filter ref="authenticationFilter" position="FORM_LOGIN_FILTER"/>
        <security:custom-filter ref="concurrencyFilter" position="CONCURRENT_SESSION_FILTER"/>
        <security:custom-filter ref="singleEntryFilter" after="FORM_LOGIN_FILTER"/>
        <security:session-management session-authentication-strategy-ref="sas"/>
    </security:http>

    <bean id="singleEntryFilter" class="com.stc.res.filter.SingleEntryFilter" 
            p:redirectURI="/login.html">
            <property name="guardURI">
                <list>
                    <!-- <value>/index.html</value> -->
                    <value>/index.html</value>
                    <!-- <value>/index.html</value>
                    <value>/index.html</value>
                    <value>/index.html</value>
                    <value>/index.html</value> -->
                </list>
            </property>
    </bean>
    <bean id="authenticationFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter"
        p:sessionAuthenticationStrategy-ref="sas"
        p:authenticationManager-ref="authenticationManager" 
        p:authenticationFailureHandler-ref="customAuthenticationFailureHandler"
        p:authenticationSuccessHandler-ref="customAuthenticationSuccessHandler"/>

    <!-- We just actually need to set the default failure url here -->
    <bean id="customAuthenticationFailureHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler"
        p:defaultFailureUrl="/loginfailed" />

     <!-- We just actually need to set the default target url here -->

     <bean id= "customAuthenticationSuccessHandler"  class="org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler">
        <property name="redirectStrategy" ref="customSuccessRedirStrategy" />
     </bean>
    <!-- <bean id="customAuthenticationSuccessHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler"
         p:redirectStrategy-ref="customSuccessRedirStrategy" /> -->

    <bean id= "customSuccessRedirStrategy"  class=" com.stc.res.customeredirection.CustomSuccessRedirection"> </bean>   

    <!-- The AuthenticationEntryPoint is responsible for redirecting the user to a particular page, like a login page,
            whenever the server sends back a response requiring authentication -->
    <!-- See Spring-Security Reference 5.4.1 for more info -->
    <bean id="authenticationEntryPoint"  class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint"
        p:loginFormUrl="/login.html"/>

    <!-- Declare an authentication-manager to use a custom userDetailsService -->
    <!-- It's important to set the alias here because it's used by the authenticationFilter -->
    <security:authentication-manager alias="authenticationManager">
       <security:authentication-provider user-service-ref="userservice">
        <security:password-encoder ref="passwordEncoder">
                  <security:salt-source ref="saltSource"/>
        </security:password-encoder>
        </security:authentication-provider>
         <security:authentication-provider user-service-ref="jdbcUserService"/> 
    </security:authentication-manager>

    <bean id="userservice"  class="com.stc.res.service.UserLoginService" >
        <property name="usrlogindao" ref="userLogindao"/>
    </bean> 

    <bean id="userLogindao" class = "com.stc.res.dao.UserLoginDao" />

    <bean id="jdbcUserService" class="com.stc.res.service.JdbcUserService">
        <property name="customJdbcDao" ref="custjdbcDao"/>
    </bean>

    <bean id="custjdbcDao"  class= "com.stc.res.dao.CustomJdbcDaoImpl">
        <property name="dataSource" ref="dataSource"/>
    </bean>

    <bean id="jdbcAdminUserService" class="com.stc.res.controller.JdbcAdminUserService">
        <property name="dataSource" ref="dataSource"/>
        <property name="authenticationManager" ref="authenticationManager"/>
    </bean>

    <!-- Use a Sha  encoder since the user's passwords are stored as Md5 in the database -->
    <bean class="org.springframework.security.authentication.encoding.ShaPasswordEncoder" id="passwordEncoder"/>
    <bean class="org.springframework.security.authentication.dao.ReflectionSaltSource" id="saltSource">
            <property name="userPropertyToUse" value="username"/>
    </bean>

    <!-- <security:bean id="rememberMeServices" class="org.springframework.security.ui.rememberme.PersistentTokenBasedRememberMeServices"> 
        <property name="tokenRepository" ref="jdbcTokenRepository" /> 
        <property name="userDetailsService" ref="userservice" /> 
        <property name="key" value="springRocks" /> 
        <property name="alwaysRemember" value="false" /> 
   </security:bean>

   Uses a database table to maintain a set of persistent login data 
    <security:bean id="jdbcTokenRepository" class="org.springframework.security.ui.rememberme.JdbcTokenRepositoryImpl"> 
        <property name="createTableOnStartup" value="false" /> 
        <property name="dataSource" ref="dataSource" /> 
    </security:bean> 
   -->

     <!-- An in-memory list of users. No need to access an external database layer.
            See Spring Security 3.1 Reference 5.2.1 In-Memory Authentication -->
     <!-- john's password is admin, while jane;s password is user  -->

    <!-- Filter required by concurrent session handling package 
            The ConcurrentSessionFilter requires two properties, sessionRegistry, which generally points to an 
            instance of SessionRegistryImpl, and expiredUrl, which points to the page to display when a session has expired.
            See: http://static.springsource.org/spring-security/site/docs/3.1.x/reference/session-mgmt.html#list-authenticated-principals -->
    <bean id="concurrencyFilter" class="org.springframework.security.web.session.ConcurrentSessionFilter"
            p:sessionRegistry-ref="sessionRegistry" 
            p:expiredUrl="/login.html" />

    <!--  Defines a concrete concurrent control strategy 
             Checks whether the user in question should be allowed to proceed, by comparing the number of 
             sessions they already have active with the configured maximumSessions value. The SessionRegistry 
             is used as the source of data on authenticated users and session data.
             See: http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/session/ConcurrentSessionControlStrategy.html-->
    <bean id="sas" class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy"
            p:maximumSessions="1"  error-if-maximum-exceeded="true" >
            <constructor-arg name="sessionRegistry" ref="sessionRegistry" />
    </bean>

    <!-- Maintains a registry of SessionInformation instances
           See: http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/session/SessionRegistry.html -->
    <bean id="sessionRegistry" class="org.springframework.security.core.session.SessionRegistryImpl" /> 

</beans> 
```

我在 web.xml 中配置了：

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>ERROR</dispatcher>
  </filter-mapping>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <filter>
    <display-name>MycustomFilter</display-name>
    <filter-name>MycustomFilter</filter-name>
    <filter-class>com.stc.res.filter.MycustomFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>MycustomFilter</filter-name>
    <url-pattern>/MycustomFilter</url-pattern>
  </filter-mapping>

 listener>
    <listener-class>
    org.springframework.security.web.session.HttpSessionEventPublisher
    </listener-class>
  </listener> 
```

请让我知道此代码中的错误在哪里，并请指导我。我是弹簧安全的新手。即使用户可以从不同的浏览器登录，而无需注销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:32:41.867

您是否尝试过官方文档中的这段代码（防止多次登录）：

```
<security:http ... >

    ....

    <security:session-management>
        <security:concurrency-control max-sessions="1" error-if-maximum-exceeded="true" />
    </security:session-management>        
</security:http> 
```

# jquery - 在 MVC 中创建动态 Html 控件的最佳方法

> ID：15473857
> 
> 赞同：2
> 
> 时间：2013-03-18T09:53:53.353
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我需要创建动态 Html 控件并使用 .Net 中的 MVC 在视图中显示它，而且我需要做一些基本的验证，即 - 如果它是文本框，那么它不应该为空，如果它是复选框并验证复选框被选中或不。成功验证后的同一时间，我需要将其保存在数据库中。

您能告诉我哪种方法最适合实现这一目标吗？它不应该影响性能。我有一些选项列表 1\. 使用 HTMLhelperclass、字符串生成器、标签生成器。2.jQuery

我不知道哪个选项容易且最好实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:58:13.433

`HTMLHelper`课程会有很大帮助。如果您需要实现基本验证，如`Required`字段或一些，`RegEx`那么您可以依赖 MVC 提供的验证属性并将其与您的`Model` 例如

```
[Required]
Public string FirstName {get; set;} 
```

您还可以编写自己的自定义属性并将其用于您的`Model`类

[这可能会有很大帮助](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)

动态 UI 的粗略草图

编写一个`model`绑定到您的数据库的类（这将包含您的 UI 控件`type,name,attributes`等的详细信息）。当您的默认`controller`操作第一次被击中时，初始化您的`model`并将其传递给对应的`View`，它绑定到您的`Model`. 那么它非常简单，您可以读取模型值并使用方法`View`相应地放置您的 UI 元素`HTMLHelper`

# uml - 视觉范式：嵌套协作

> ID：15473867
> 
> 赞同：0
> 
> 时间：2013-03-18T09:54:19.033
> 
> 标签：uml, visual-paradigm

我正在尝试创建嵌套协作，就像这样：![在此处输入图像描述](../Images/90b74e30a17b08931ff129583f68d93d.png)

但是，实际上，`Collaboration 2`不是的子节点`Collaboration 1`：![在此处输入图像描述](../Images/e45cfa76b520e72815d2c14479cb12e2.png)

所以，比如说，当我拖动第一个（更大）时，第二个保持在原位。我必须选择两个项目（`Collaboration 1`和`Collaboration 2`），然后拖动。还有类似的问题，很烦人。

我尝试了很多东西来获得我需要的东西，但这似乎是不可能的。我在做/理解错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:27:31.117

看起来您想在旧的 UML 1.x 中建模一些东西。在 UML 2 中，您应该改为使用复合结构图对其进行建模。有关绘制复合结构图的更多详细信息，请参见

[http://linkvp.com/rxwvajog](http://linkvp.com/rxwvajog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:17:55.383

我找到了解决方案：我需要使用`Model`而不是`Collaboration`. 模型可以嵌套。不知道为什么协作不能，但是，这对我来说不是主要的，所以问题就解决了。

# java - 哈希集大小问题

> ID：15473871
> 
> 赞同：5
> 
> 时间：2013-03-18T09:54:32.370
> 
> 标签：java, hashset

在下面的示例中，我创建了哈希集，其中我添加了三个字符串值 s1、s2、s3，尽管它显示了哈希集 1 的大小。为什么？

```
public static void main(String args[])
{
    String s1="abc";
    String s2=new String("abc");
    String s3="abc";
    Set setdemo=new HashSet();
    setdemo.add(s1);
    setdemo.add(s2);
    setdemo.add(s3);

    System.out.println("s1 hashcode -:"+ System.identityHashCode(s1));
    System.out.println("s2 hashcode -:"+ System.identityHashCode(s2));
    System.out.println("s3 hashcode -:"+ System.identityHashCode(s3));
    System.out.println("Set size is -:"+setdemo.size());
} 
```

输出：

```
s1 hashcode -:17523401
s2 hashcode -:8567361
s3 hashcode -:17523401
Set size is -:1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T09:56:12.683

Set 不允许重复。当字符串被放入池中时，它们都指向同一个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T09:58:55.790

`Duplicate`被标识为具有**等效的哈希码**，并`true`在测试**相等**时返回。

在您的情况下，所有 3 个`Strings`都被标识为**重复项**，并且由于`Set`消除了重复项，因此大小适合`1`您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:03:31.600

检查输出

```
s1.equals(s2)
s2.equals(s3) 
```

它的`String`类 equals 方法不允许您一次又一次地添加相同的对象，因为 HashSet 使用 equals 方法来识别对象是否相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T09:57:38.343

因为在 HashSet 中只保存唯一的条目。这里“abc”被添加了 3 次，所以即使你添加了 String abc 也只会保存它的次数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T09:59:10.887

HashSet 不存储多个相等对象 - 它是一个“集合”。您应该使用 MultiSet（也称为 Bag）实现，例如来自 Apache Commons Collections 或来自 Guava - 这些还存储您添加的副本数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-30T09:31:11.907

每当我们创建 String 类的对象时，它都会检查值是否已存储在其他字符串中。喜欢

```
String s1 = "hello";
String s2 = "hello"; 
```

在这种情况下，它不会为 s1 和 s2 分配两个内存位置，而只会分配一个。当我们使用 .equals() 操作数检查时，它会检查内存位置是否相同。在 ：

```
setdemo.add(s1);
setdemo.add(s1);
setdemo.add(s1); 
```

我们正在创建三个内存位置（简单来说），但是当 HashSet 内部检查（再次简单来说）.equals 时，它告诉它相同的内存位置，因此 HashSet 的大小为 1。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T10:00:09.097

[`HashSet.add`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html#add%28E%29)

> 如果集合不包含任何元素，则将指定元素添加`e`到此集合`e2`中`(e==null ? e2==null : e.equals(e2))`

因此，在上述添加操作期间：

`s2.equals(s1)`返回`true`，`s2`不会被添加。

`s3.equals(s1)`return `true`，`s3`也不会添加到 the`setdemo`中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-18T10:39:03.007

每个字符串都将具有由 hash() 函数返回的类似 hashCode。并且 Set 不允许重复，它肯定会覆盖该位置的先前值。

# r - 您可以将 ggplot2 图形的比例从正方形更改为矩形吗？

> ID：15473877
> 
> 赞同：19
> 
> 时间：2013-03-18T09:54:56.987
> 
> 标签：r, ggplot2, timeline

我`geom_segment`用来绘制活动时间表。它都在同一条线上，因为我想将它与其他图表一起呈现，我宁愿让 y 轴更小。似乎 ggplot2 中灰色图形区域的大小始终是正方形的，无论我将其放大还是缩小。有没有办法说我想要 x=500 y=50 或类似的东西？

```
df2 <- structure(list(Activities =
                      structure(c(2L, 1L, 2L, 1L, 2L, 3L, 1L, 2L, 2L, 2L, 2L, 5L,
                                  4L, 3L, 2L, 2L), 
                                .Label = c("authoring", "hacking", "learning", 
                                           "surfing", "tasks"), 
                                class = "factor"), 
                      Start = c(14895L, 15005L, 16066L, 16226L, 16387L, 16394L,
                                27030L,27532L, 27600L, 27687L, 28660L, 28713L, 
                                29154L, 30264L, 30345L, 32245L), 
                      End = c(15005L, 16066L, 16226L, 16387L,16394L, 16509L, 
                              27491L, 27591L, 27628L, 28450L, 28704L, 29109L, 
                              30250L, 30345L, 31235L, 33794L)),
                 .Names = c("Activities", "Start", "End"), 
                 class = "data.frame", row.names = c(NA, -16L))
a <- 0:23 
```

这是我的情节：

```
ggplot(df2, aes(colour=Activities)) + 
  geom_segment(aes(x=Start, xend=End, y=0, yend=0), size=10) +
  scale_x_continuous(breaks=a * 60 * 60, labels=a) +
  xlab("Time") + ylab("") + 
  scale_y_continuous(breaks=NULL, limits=c(-.1, .1)) 
```

[![示例时间线图](../Images/d2e2b1baaf92a8568600f1e54c86a5ca.png)](https://i.stack.imgur.com/nEEKk.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-18T10:56:35.923

要将 x 和 y 轴上的比率固定为某个值（例如 1 或 0.2），您可以使用`coord_fixed()`：

```
g + coord_fixed(ratio = 0.2) 
```

`g`你原来的情节在哪里。你必须玩一点才能得到你需要的东西。此外，就像@Andrie 所说，您还可以修复画布大小，例如使用`ggsave`：

```
print(g)
ggsave("/tmp/plt.png", width = 16, height = 9, dpi = 120) 
```

我会尝试两者，或者将它们结合起来。另请参阅[此较早的帖子](https://stackoverflow.com/questions/7056836/r-how-to-fix-the-aspect-ratio-in-ggplot)。

# javascript - 模态中的 Twitter bootstrap href 不起作用

> ID：15473886
> 
> 赞同：5
> 
> 时间：2013-03-18T09:55:34.090
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog

```
 <div id="deleteModal" class="modal hide fade" tabindex="-1" role="dialog">
     <div class="modal-body">
        <span><i class=" icon-info-sign"></i>
     </div>
     <div class="modal-footer">
       <a class="trashconfirm btn btn-info" data-dismiss="modal" href="javascript:void(0)">Yes</a>
       <a class="btn btn-info" data-dismiss="modal">No</a>
    </div>
  </div> 
```

我正在使用 jquery 来设置 hre。

```
 $(".accordion").on('click','.dairytrash',function() {
   var id = $(this).closest('tr').attr('id');
   var ele = $(".modal-footer .trashconfirm ");
   ele.attr('href','<c:url value="/delete?id='+id+'" />');
     }); 
```

href 也设置正确，但是当我单击时没有任何反应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T10:22:08.493

如果您`data-dismiss="modal"`在按钮上使用（您这样做），Bootstrap 将在其上附加一个单击处理程序以在单击按钮时隐藏模式。该处理程序调用`preventDefault()`事件，因此`href`将不再触发任何默认操作（如遵循 a ）。

如果您想在单击按钮时调用 URL*并*隐藏模式，则必须使用 Javascript 将事件处理程序附加到您的按钮，该事件处理程序将调用 URL 并隐藏模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T17:39:40.720

使用 Bootstrap 文档 ( [http://twitter.github.io/bootstrap/javascript.html](http://twitter.github.io/bootstrap/javascript.html) ) 中描述的事件挂钩之一，如下所示：

```
$('#myModal').on('hidden', function () {
  // do something…
}) 
```

# python - 娱乐后窗口失去键盘焦点

> ID：15473889
> 
> 赞同：0
> 
> 时间：2013-03-18T09:55:42.810
> 
> 标签：python, tkinter

**问题**

我已经为秒表编写了代码。其中有一个重置秒表的功能。为此：我首先销毁当前窗口，然后创建一个新窗口。但在此过程中，窗口失去了键盘焦点。如何强制新窗口具有键盘焦点？

**代码**

```
def reset(self,event=None):
    self.quitwin()  ##Closing the window that is open now

    self.__init__()  ##Creating a new window

def quitwin(self,event=None):
    self.window.destroy() 
```

**规格**Python 2.7

如果有人能指出更好的实施方式（例如清除当前窗口并再次编写内容），我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:12:19.807

尝试模块 tkMessageBox 和 tkCommonDialog，在它们中你可以找到答案。
查看他们的源代码，它们包含在 Python
文件夹 Python\Lib\lib-tk\
中，是否需要删除窗口，也许只是更改内容？
对于按钮，您可以这样做：

```
>>> import tkinter
>>> r=Tkinter.Tk()
>>> b=Tkinter.Button(r,text='aaa')
>>> b.pack()
>>> b['text']='bbb' 
```

对于文本小部件，您可以这样做

```
>>> t=Tkinter.Text(r)
>>> t.pack()
>>> t.insert('1.0','aaa')
>>> t.delete('1.0','end') # clear text widget
>>> t.insert('1.0','bbb') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:00:33.803

我找到了解决方案。只需破坏当前框架并再次创建框架而不影响窗口。

通过这样做，窗口不会失去键盘焦点，并且会像以前一样重新创建事物。

**代码**

```
def reset(self,event=None):
        self.frame.destroy()

        self.frame = Frame(self.window,width=300,height=200)  ##The frame instance
        self.frame.pack_propagate(0)  ##Making sure that the window does not shrink

        self.frame.pack(fill=None) 
```

# c# - WF8 & C# & SQLite & 自动增量 & 失败

> ID：15473895
> 
> 赞同：3
> 
> 时间：2013-03-18T09:55:59.243
> 
> 标签：c#, sqlite, windows-phone-8, auto-increment

我尝试使用 WP8 的 SQLite 库。

我定义了一个表：

```
class ShoppingItem
{
  [SQLite.PrimaryKey]
  public int Id {get; set;}
  public string Name {get; set;}
  public string Shop {get; set;}
  public bool isActive {get; set;}
} 
```

根据[http://www.sqlite.org/autoinc.html](http://www.sqlite.org/autoinc.html)`Id`，如果没有给出值，则 sqlite会自动分配一个值`Id`。对？

所以我尝试通过

```
using (var db = new SQLiteConnection(m_DatabasePath)) {
    db.Insert(new ShoppingItem() {
      Name = anItem,
      Shop = aShop,
      isActive = aIsActive,
    });
} 
```

当我插入第一个项目时，它的 ID 为 0。好吧，为什么不呢。当我插入第二个项目时，我得到一个带有令人敬畏的消息“约束”的 SQLiteException。那么如何在不提供 id 的情况下插入新条目？

顺便说一句：作为替代解决方案，我尝试将空值添加到 id，但这导致编译错误。:(

```
...
db.Insert(new ShoppingItem() {
  Id = null, // <- does not compile
  Name = anItem,
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T10:40:03.323

您`ShoppingItem`不知道该字段是自动递增的，因此它分配的默认值为零。

采用：

```
[SQLite.PrimaryKey, SQLite.AutoIncrement]
public int Id {get; set;} 
```

# javascript - 使用 JavaScript 文件创建 Ruby gem (Rails 3)

> ID：15473900
> 
> 赞同：3
> 
> 时间：2013-03-18T09:56:10.173
> 
> 标签：javascript, ruby, ruby-on-rails-3, rubygems

我打算创建一个简单的 Ruby gem。该功能取决于某些`.js`文件。我的计划是通过 Github 安装 gem。

我的问题是：

1.  我应该写一个生成器来复制js文件吗？
2.  保存 js 文件的最佳位置是什么（是供应商/资产/javascripts？）
3.  如何为此（rspec2）编写测试用例？

我正在使用 Rails > 3、Ruby 1.9.x 和 Ruby 2.x。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:17:32.383

我们可以通过以下方式轻松地在 ruby​​ 中使用 Javascripts 库 -

1）我们可以把所有的js库放在Vendor部分，为了它们的使用，我们可以通过以下方式定义application.js

//= 需要数据表分页。.

2）接下来，如果您想使用自己的javascript，那么您将它们放入您的资产文件夹并以上述方式使用application.js。

3）如果你想制作自己的js库，那么你可以把你的js库放在lin文件夹中。

# c# - 如何关闭 Microsoft.Practices.EnterpriseLibrary.Data.ExecuteNonQuery 的连接

> ID：15473907
> 
> 赞同：4
> 
> 时间：2013-03-18T09:56:24.277
> 
> 标签：c#, sql-server, enterprise-library

我正在使用库 microsoft.practices.enterpriselibrary 来访问 SQL Server 数据库。我想知道当我使用 ExecuteNonQuery 方法时如何关闭连接？

IE：

```
using Microsoft.Practices.EnterpriseLibrary.Data.Sql;

SqlDatabase db = null;
try
{
    db = new SqlDatabase(stringConnection);
    db.ExecuteNonQuery("storedprocedure", someParams);
}
catch (Exception ex)
{
} 
```

我不能做类似的事情

```
finally
{
    if (db != null)
    {
        ((IDisposable)db).Dispose();
    }
} 
```

那么......我怎样才能避免连接泄漏？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T19:00:14.837

您可以将代码放在“使用”块中。这将确保连接完成后关闭。

```
using Microsoft.Practices.EnterpriseLibrary.Data.Sql;

SqlDatabase db = new SqlDatabase(stringConnection);
using (DbConnection con = db.CreateConnection())
{
    db.ExecuteNonQuery("storedprocedure", someParams);
} 
```

或者您可以使用 con.Close()。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-11T15:50:38.650

通常您无需担心关闭连接，因为数据访问块可以更有效地管理连接。检查以下链接中的“管理连接”部分：http: [//msdn.microsoft.com/en-us/library/ff953187 (v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/ff953187(v=pandp.50).aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-24T14:27:14.643

```
Database db = DatabaseFactory.CreateDatabase();
DbCommand cmd = db.GetStoredProcCommand("GetProductsByCategory"); 
db.AddInParameter(cmd, "@requestId", DbType.Int32, requestId);
db.ExecuteNonQuery(cmd); 
```

企业库为您处理关闭连接，使用数据读取器的情况除外。使用 IDataReader 时，应使用 close 或 using 调用 dispose（与调用 close 相同）

```
Database db = DatabaseFactory.CreateDatabase();

DbCommand cmd = db.GetSqlStringCommand("Select Name, Address From Customers");
using (IDataReader reader = db.ExecuteReader(cmd))
{
   // Process results
} 
```

在这种情况下， dispose 将关闭连接。他们在文档中有很好的关于连接处理的部分。

[https://msdn.microsoft.com/en-us/library/ff648933.aspx](https://msdn.microsoft.com/en-us/library/ff648933.aspx)

# twitter - 运行 Twitter Websocket 示例时在 Pom.xml 中出现错误？

> ID：15473909
> 
> 赞同：-1
> 
> 时间：2013-03-18T09:56:29.283
> 
> 标签：twitter, websocket, apache-camel

从 apache camel 2.10 错误运行 twitter websocket 示例时出错，

说明 资源路径位置类型 maven-remote-resources-plugin（目标“进程”）被 m2e 忽略。pom.xml /camel-example-twitter-websocket line 26 Maven项目构建生命周期映射问题

而我的 Pom.xml 文件是，

```
<?xml version="1.0" encoding="UTF-8"?>

<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>org.apache.camel</groupId>
    <artifactId>examples</artifactId>
    <version>2.10.4</version>
    <relativePath>..</relativePath>
  </parent>

  <artifactId>camel-example-twitter-websocket</artifactId>
  <name>Camel :: Example :: Twitter WebSocket</name>
  <description>An example that pushes new tweets to a web page using web-socket</description>

  <dependencies>

    <dependency>
      <groupId>org.apache.camel</groupId>
      <artifactId>camel-core</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.camel</groupId>
      <artifactId>camel-twitter</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.camel</groupId>
      <artifactId>camel-websocket</artifactId>
    </dependency>

    <!-- logging to the console -->
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-log4j12</artifactId>
    </dependency>
    <dependency>
      <groupId>log4j</groupId>
      <artifactId>log4j</artifactId>
    </dependency>

  </dependencies>

  <build>
    <plugins>
      <!-- Allows the example to be run via 'mvn compile exec:java' -->
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <configuration>
          <mainClass>org.apache.camel.example.websocket.CamelTwitterWebSocketMain</mainClass>
          <includePluginDependencies>false</includePluginDependencies>
        </configuration>
      </plugin>
    </plugins>

    <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.apache.felix</groupId>
                                    <artifactId>
                                        maven-bundle-plugin
                                    </artifactId>
                                    <versionRange>
                                        [2.3.7,)
                                    </versionRange>
                                    <goals>
                                        <goal>cleanVersions</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore></ignore>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
  </build>

</project> 
```

希望你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:08:09.443

我不认为这是一个错误。它很可能只是 Maven 写了一条 WARN 消息或其他东西。

您不能按照文档运行示例吗？ [http://camel.apache.org/twitter-websocket-example.html](http://camel.apache.org/twitter-websocket-example.html)

# java - 附加 __pm 的 JNDI 资源名称。部署失败

> ID：15473918
> 
> 赞同：10
> 
> 时间：2013-03-18T09:56:48.860
> 
> 标签：java, jakarta-ee, netbeans, glassfish, ear

我正在尝试运行一个非常简单的耳朵应用程序。我似乎恰好遇到了这个问题，但是这里的讨论对我不起作用 [JDBC 资源名称被容器修改（`__pm`被附加到它上面）](https://stackoverflow.com/questions/15065661/jdbc-resource-name-being-modified-by-container-pm-being-appended-to-it)

在我的情况下，数据源名称也由`__pm`. 我不知道它来自哪里，但服务器日志指出这样一个事实，即不是搜索`databasename`它而是搜索`databasename__pm`并失败了部署。

持久性.xml：-

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="FCK-ejbPU" transaction-type="JTA">
    <jta-data-source>FCKDatabase</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties/>
  </persistence-unit>
</persistence> 
```

Glassfish原木：

```
 Error occurred during deployment: Exception while preparing the app : Invalid resource : { ResourceInfo : (jndiName=java:app/jdbc/FCKDatabase__pm), (applicationName=FCK) }. Please see server.log for more details.
        Exception while invoking class org.glassfish.persistence.jpa.JPADeployer prepare method : java.lang.RuntimeException: Invalid resource : { ResourceInfo : (jndiName=java:app/jdbc/FCKDatabase__pm), (applicationName=FCK) }
        Invalid resource : { ResourceInfo : (jndiName=java:app/jdbc/FCKDatabase__pm), (applicationName=FCK) } 
```

如您所见，我的资源的 JNDI 名称附加了`__pm`.

同样在 Glassfish 服务器控制台上，资源正确显示为 FCKDatabase 而不是 FCKDatabase_pm

知道这`__pm`是从哪里来的吗？

系统：

*   网豆 7.3
*   Glassfish 服务器 3.1.2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T12:01:54.837

问题是 mysql 连接器 jar 文件未放入 glassfish 服务器。这引发了一系列问题。我在上面发布的只是服务器日志包含的错误消息之一。我建议浏览整个错误消息列表并尝试从那里进行调试。以下链接帮助我将 jar 文件放置在正确的位置：

*   [未设置将 MySQL 数据库连接到 Glassfish 类路径或类名错误](https://stackoverflow.com/questions/8349970/connecting-a-mysql-database-to-glassfish-classpath-is-not-set-or-classname-is-wr)
*   [博客类名错误或类路径未设置为：com.mysql.jdbc.jdbc2.optional.MysqlDataSource](http://bhapca.blogspot.sg/2009/06/class-name-is-wrong-or-classpath-is-not.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-07T12:32:55.637

由于 Netbeans 7.1 在 IDE 生成`persistence.xml`字段`jta`并且`glassfish-resouces`JDNI 名称生成时带有前缀`java:module/`，因此必须在两个文件中删除它，它必须看起来像`jdbc/[anyName]`. 这是在 Netbeans 8.1 和 Glassfish 4.0 上测试的。

[在图像中，第二个选项显示了生成的名称，该名称在 Glassfish 中无效，因为“：”](https://i.stack.imgur.com/4Rw9q.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-03T07:15:37.437

这是我找到的另一个解决方案，它对任何人都有帮助。

复制您面临问题的资源名称，然后按照以下步骤操作。

1.  登录 Glassfish 控制台
2.  转到资源
3.  JDBC --> JDBC 资源
4.  点击新建按钮添加资源
5.  在 JNDI 名称字段中输入复制的资源并选择池名称并输入描述。
6.  点击确定按钮

重新部署应用程序并检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-03T12:09:20.633

就我而言，我只是移动了我的`glassfish-resources.xml`文件，

**从：**

my_web_app / src / main / **webapp / WEB-INF**

**到：**

my_web_app / src / main / **setup**

GlassFish 开始识别创建资源的文件。

# android - 如何为单个 facebook 消息帖子提供不同的多个 url 超链接

> ID：15473920
> 
> 赞同：2
> 
> 时间：2013-03-18T09:56:56.027
> 
> 标签：android, facebook, url, post, hyperlink

我正在向 facebook 墙上发送消息，我的帖子包含图像和标题以及标题和描述。我想为我的单个帖子的不同项目提供不同的超链接。我成功地在 facebook 墙上发送帖子。但无法提供多个 url超链接。我的代码在这里

```
 Bundle postParams = new Bundle();
        postParams.putString(Facebook.TOKEN, facebook.getAccessToken());
        postParams.putString("name", "LangGuage");
        postParams.putString("href", "http://www.facebook.com");
        postParams.putString("caption",msg);
        postParams.putString("picture",url1);
        postParams.putString("description","Powered by::Hunka Technology Pvt. Ltd.");

        postParams.putString("link", "http://www.hunkatech.com"); 
```

我的图片、消息和标题都有相同的链接。如何为所有人提供不同的网址。

更新：我也尝试过这样做，但得到了这个：{“error”：{“message”：“（＃100）缺少消息或附件”，“type”：“OAuthException”，“code”：100}}

```
 JSONObject attachment = new JSONObject();

            attachment.put(Facebook.TOKEN, facebook.getAccessToken());
            attachment.put("message", "hi ");
            attachment.put("name", "LangGuage");
            attachment.put("link", "http://www.facebook.com");
            attachment.put("caption", msg);

            JSONObject media = new JSONObject();
            media.put("type", "image");
            media.put("picture", url1);
            media.put("link","http://www.google.com");
            attachment.put("media", new JSONArray().put(media));

            JSONObject properties = new JSONObject();

            JSONObject prop1 = new JSONObject();

            prop1.put("text", "Powered by::Hunka Technology Pvt. Ltd.");
            prop1.put("link", "http://www.hunkatech.com");
            properties.put("Get the App for free", prop1);

            attachment.put("properties", properties);

            Log.d("FACEBOOK", attachment.toString());

            Bundle params = new Bundle();
            params.putString("attachment", attachment.toString());

            String res = facebook.request("me/feed", params, "POST");
            System.out.println("----resp" + res); 
```

有没有可能从任何方式..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:04:05.297

首先，`href`a 不存在该字段`post`，但这将被忽略。

你得不到你想要的。帖子可以包含：

*   允许任意数量链接的消息，
*   **只有一个**标题链接（标题有标题、描述、图片和网址）。

此示例代码：

```
Bundle postParams = new Bundle();

postParams.putString(Facebook.TOKEN, facebook.getAccessToken());

/* Caption information (to highlight one link only) */
postParams.putString("caption", "Stack Overflow");
postParams.putString("picture", "http://myrrix.com/wp-content/uploads/2012/06/stackoverflow.png");
postParams.putString("description","A language-independent collaboratively edited question and answer site for programmers.");
postParams.putString("name", "stackoverflow.com"); //Name of the link
postParams.putString("link", "http://stackoverflow.com");
/* End of the caption information */

response = facebook.request("me/feed", postParams, "POST"); 
```

...结果：

![带有多个链接的帖子链接](../Images/cb4127c310fab0acbdcae11ef6b7db1d.png)

您在上图中看到的划分实际上是**一个链接**，由`link`字段指定的链接。所有其他字段仅是文本和图片信息。在 HTML 中它将是：

```
<a href="http://stackoverflow.com"><div id="caption"> ... </div></a> 
```

# c# - 根据另一个集合设置 ListBox SelectedItems

> ID：15473921
> 
> 赞同：3
> 
> 时间：2013-03-18T09:56:56.597
> 
> 标签：c#, wpf, mvvm, .net-4.0

我有一个`ListBox`绑定到`MyCollection`的类型`IEnumerable<string>`。

```
 <ListBox x:Name="ListBox" ItemsSource="{Binding MyCollection, Mode=OneWay}" SelectionMode="Multiple"/> 
```

我有另一个`List<string>` `SubCollection`包含一个子集`MyCollection`

每当`SubCollection`发生变化时，我希望`SelectedItems`根据`SubCollection`

是否有任何`Binding`或`Behaviour`任何其他方式来实现这一点？

**编辑：**

假设我`ListBox`一定要`MyCollection` `{ "Orange", "Mango", "Stawberry", "Pineapple" }`

假设我按下一个按钮从数据库加载数据，结果是“Orange”、“Mango”，然后放入 to 中`SubCollection`。`ListBox`现在应该有 "Orange", "Mango" 作为它的`SelectedItems`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T09:31:16.240

我有一个建议给你。

您可以绑定`IsSelected`到`ListBoxItem`.

为此，您必须使用`collection of objects`（比如说`MyListBoxItem`）而不是字符串集合。

```
public class  MyListBoxItem
{
    public string Description { get; set; }
    public bool IsSelected { get; set; }
} 
```

使用这个类的“ ”属性`IsSelected`来`MyListBoxItem`绑定.`IsSelected``ListBoxItem`

例如：在您查看模型中，

```
this.MyCollection = new ObservableCollection<MyListBoxItem>();

MyListBoxItem item1 = new MyListBoxItem()
item1.Description = "Mango";
item1.IsSelected = true;
MyCollection .add(item1);

MyListBoxItem item2 = new MyListBoxItem()
item2 .Description = "Orange";
item2 .IsSelected = false;
MyCollection .add(item2 ); 
```

XAML（内部`ListBox`）

```
<ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}">
        <Setter Property="IsSelected" Value="{Binding Mode=TwoWay, Path=IsSelected}"/>
    </Style>
</ListBox.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T06:22:28.927

您可以创建一个`List` `AttachedProperty`用于在列表更改时`ListBox`将项目添加到 的。`ListBox.SelectedItems`

该`AttachedProperty`解决方案保持`WPF`清洁和您的`MVVM`模式，而且它使这个功能在您的所有项目中都可以重用:)

这是一个例子：

## 附加属性：

```
public static class ListBoxExtensions
{
    // Using a DependencyProperty as the backing store for SearchValue.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty SelectedItemListProperty =
        DependencyProperty.RegisterAttached("SelectedItemList", typeof(IList), typeof(ListBoxExtensions),
            new FrameworkPropertyMetadata(null, new PropertyChangedCallback(OnSelectedItemListChanged)));

    public static IList GetSelectedItemList(DependencyObject obj)
    {
        return (IList)obj.GetValue(SelectedItemListProperty);
    }

    public static void SetSelectedItemList(DependencyObject obj, IList value)
    {
        obj.SetValue(SelectedItemListProperty, value);
    }

    private static void OnSelectedItemListChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var listbox = d as ListBox;
        if (listbox != null)
        {
            listbox.SelectedItems.Clear();
            var selectedItems = e.NewValue as IList;
            if (selectedItems != null)
            {
                foreach (var item in selectedItems)
                {
                    listbox.SelectedItems.Add(item);
                }
            }
        }
    }
} 
```

## Xaml 用法：

```
<ListBox ItemsSource="{Binding Items}" SelectionMode="Multiple"
         local:ListBoxExtensions.SelectedItemList="{Binding SelectedItems}" /> 
```

* * *

* * *

## 演示：

如果你想测试的工作示例：

xml:

```
<Window x:Class="WpfApplication17.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication17"
        Title="MainWindow" Height="227" Width="170" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}">
        <ListBox ItemsSource="{Binding Items}" SelectionMode="Multiple"
                 local:ListBoxExtensions.SelectedItemList="{Binding SelectedItems}"  Margin="0,0,0,37"   >
                 <ListBox.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="{x:Static SystemColors.HighlightColor}" />
                    <Style TargetType="ListBoxItem">
                       <Style.Triggers>
                          <Trigger Property="IsSelected" Value="True">
                             <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                          </Trigger>
                       </Style.Triggers>
                    </Style>
                 </ListBox.Resources>
        </ListBox>
        <Button Content="Populate SelectedItemList" Click="Button_Click" Height="32" Margin="2,0,1,2" VerticalAlignment="Bottom"/>
    </Grid>
</Window> 
```

代码：

```
namespace WpfApplication17
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window, INotifyPropertyChanged
    {
        private List<string> _selectedItems = new List<string>();
        private ObservableCollection<string> _items = new ObservableCollection<string> 
        { "Orange", "Mango", "Stawberry", "Pineapple", "Apple", "Grape", "Banana" };

        public MainWindow()
        {
            InitializeComponent();
        }

        public ObservableCollection<string> Items
        {
            get { return _items; }
            set { _items = value; }
        }

        public List<string> SelectedItems
        {
            get { return _selectedItems; }
            set { _selectedItems = value; OnPropertyChanged("SelectedItems"); }
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            SelectedItems = new List<string> { "Orange", "Pineapple", "Apple" };
        }

        public event PropertyChangedEventHandler PropertyChanged;
        public void OnPropertyChanged(string e)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(e));
        }
    }

    public static class ListBoxExtensions
    {
        // Using a DependencyProperty as the backing store for SearchValue.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty SelectedItemListProperty =
            DependencyProperty.RegisterAttached("SelectedItemList", typeof(IList), typeof(ListBoxExtensions),
                new FrameworkPropertyMetadata(null, new PropertyChangedCallback(OnSelectedItemListChanged)));

        public static IList GetSelectedItemList(DependencyObject obj)
        {
            return (IList)obj.GetValue(SelectedItemListProperty);
        }

        public static void SetSelectedItemList(DependencyObject obj, IList value)
        {
            obj.SetValue(SelectedItemListProperty, value);
        }

        private static void OnSelectedItemListChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var listbox = d as ListBox;
            if (listbox != null)
            {
                listbox.SelectedItems.Clear();
                var selectedItems = e.NewValue as IList;
                if (selectedItems != null)
                {
                    foreach (var item in selectedItems)
                    {
                        listbox.SelectedItems.Add(item);
                    }
                }
            }
        }
    }
} 
```

结果：

![在此处输入图像描述](../Images/3cff879788bc8dd5054ca439df2acf63.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T06:47:11.450

标准数据绑定不起作用，因为 SelectedItems 属性是只读的。

一种简单的方法是手动迭代 MyCollection 并根据 SubCollection 中的项目设置每个项目的 IsSelected 属性。为此，MyCollection 列表中的项目应包含从 ListBoxItem 继承的对象，这将公开 IsSelected 属性。

***这是一个示例 WPF 应用程序来演示它：***

单击按钮将根据 SubCollection 列表中的项目更新所选项目。现在我已经硬编码了 SubCollection 列表的值。

根据您的实现，您可以更新您的 SubCollection，并将按钮单击事件中的代码适当地挂钩到任何其他事件。（例如将 SubCollection 列表设置为 ObservableCollection 并挂钩到 ObservableCollection.CollectionChange）

**主窗口.xaml**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        Title="MainWindow" Height="250" Width="255">
    <Grid>
        <StackPanel Orientation="Vertical">
            <ListBox x:Name="ListBox" ItemsSource="{Binding MyCollection}" SelectionMode="Extended" Margin="10,10"/>
            <Button Content="UpdateSelection"  Click="Button_Click" Margin="10,10"/>
        </StackPanel>
    </Grid>
</Window> 
```

**主窗口.xaml.cs**

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            _myCollection = new ObservableCollection<MyListBoxItem>() { new MyListBoxItem("Orange"), new MyListBoxItem("Mango"), new MyListBoxItem("Stawberry"), new MyListBoxItem("Pineapple") };

            //Items to be selected on this.MyCollection ListBox
            this.SubCollection = new List<string>() { "Pineapple", "Mango" };

            this.DataContext = this;
        }

        private ObservableCollection<MyListBoxItem> _myCollection;
        public ObservableCollection<MyListBoxItem> MyCollection
        {
            get { return _myCollection; }
            set
            {
                this._myCollection = value;
            }
        }

        public IList<string> SubCollection { get; set; }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            // Clear all the selected items in the ListBox
            this.MyCollection.ToList().ForEach(item => item.IsSelected = false);

            // SELECT only the items in MySubCollection into this.MyCollection ListBox
            this.MyCollection.Where(item => this.SubCollection.Contains(item.Content.ToString())).ToList().ForEach(item => item.IsSelected= true);
        }
    }

    public class MyListBoxItem : ListBoxItem
    {
        public MyListBoxItem(string displayName)
        {
            this.Content = displayName;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T10:05:21.777

查看这篇博文：[how-to-databind-to-selecteditems](http://blog.functionalfun.net/2009/02/how-to-databind-to-selecteditems.html)。有一个附有代码的演示项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T11:33:58.047

使用`SelectedValue`ListBox 的“”属性。（因为您正在使用字符串集合来绑定列表框。）

1.  在您的视图模型中定义一个字符串类型属性（比如说`MySelectedValue`）。
2.  然后将其绑定到`SelectedValue`两个列表框的“”属性。（记得`Mode = TwoWay`在你的主列表框中设置）
3.  假设当您在子集合列表框中选择一个项目时将执行一个方法。（必须触发`SelectionChanged`子集合列表框的事件）
4.  就是这样。

> 所以。你要做的是：
> 
> 使用相同的属性绑定两个列表框的“SelectedValue”属性。

假设您想将一组对象绑定到列表框。然后使用`SelectedItem`属性来完成这个任务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-01T06:40:43.223

如果您知道要选择的索引号，可以使用

```
int[] index = {1, 2, 5};
for( int i in index) 
{    
   listBox.SetSelected( i, true );
} 
```

# android - google api android 验证后端调用

> ID：15473923
> 
> 赞同：1
> 
> 时间：2013-03-18T09:57:03.747
> 
> 标签：android, google-api

我试图得到这个：[http](http://android-developers.blogspot.ro/2013/01/verifying-back-end-calls-from-android.html) ://android-developers.blogspot.ro/2013/01/verifying-back-end-calls-from-android.html工作。我在 google api 控制台中创建了 1 个项目并生成了 2 个 oAuth2 客户端 ID

*   Web 应用程序的客户端 ID 客户端 ID：XXXXXXXXXX-qngfta2rcn6trlnrg2cmc7ai0qtkd04m.apps.googleusercontent.com 这个 id 对我来说看起来很奇怪，所有示例都像 XXXXXXXXXX.apps.googleusercontent.com ？！

*   已安装应用程序（android）的客户端 ID 我正在使用 eclipse 并得到：keytool -exportcert -keystore c:\Users\alex.android\debug.keystore -list -v XX:07:8D:E4:XX:35:11 :21:E9:6F:XX:4D:C5:43:E9:XX:95:B5:XX:XX 客户端 ID：XXXXXXXXXX-0lp5o4od3ebkvpr96fsk5jj0tcqj8j5p.apps.googleusercontent.com 这看起来也很奇怪生成的客户端 ID

现在，在项目中：

private static final String SCOPE="audience:server:client_id:{Web 应用程序的客户端 ID} ...

...

异步任务

GoogleAuthUtil.getToken(mActivity, mEmail, mScope);

mActivity - 我的主要活动

mEmail - 通过 AccountManager 获取

mScope = 范围

问题是我从 google api 得到空响应，并且在 Google api 控制台/报告中没有请求？！？！？

我怀疑是来自我的客户 ID 的东西，但我不知道出了什么问题，我一步一步地做所有事情，就像在[http://android-developers.blogspot.ro/2013/01/verifying-back-end -calls-from-android.html](http://android-developers.blogspot.ro/2013/01/verifying-back-end-calls-from-android.html)。

谢谢，

# android - 在没有 Google Play 的设备上使用 Google Maps API v2

> ID：15473927
> 
> 赞同：1
> 
> 时间：2013-03-18T09:57:13.687
> 
> 标签：android, google-maps, android-maps

与 v1 相比，适用于 Android 的 Google Maps API V2 是一个巨大的飞跃：更好的渲染、片段支持……但我试图澄清一个灰色区域关于它的使用。

我期待为**没有 Google Play**的 Android 设备创建一个基于地图的应用程序，例如低端平板电脑或汽车收音机，并在第三方市场上分发它。使用 V1 API 的此类应用程序是可能的。

V2 依赖于 Google Play 服务，该服务仅适用于具有 Google Play 的设备。这是否意味着上述设备肯定无法使用 V2 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:52:56.973

> 我期待为没有 Google Play 的 Android 设备创建一个基于地图的应用程序，例如低端平板电脑或汽车收音机，并在第三方市场上分发它。使用 V1 API 的此类应用程序是可能的。

只是因为这些设备的制造商盗版了 Maps 代码，因为 Maps V1 和 Maps V2 仅适用于通过验证和许可该代码的制造商。

> 这是否意味着上述设备肯定无法使用 V2 API？

除非有类似的盗版，是的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:44:09.773

您可以尝试手动安装 Google 地图所需的 bin 文件，就像您想让模拟器运行 Google Map API V2 时一样。

您可以从我写的以下博客文章中获得有关它是如何完成的更多信息：

[关联](https://blog-emildesign.rhcloud.com/?p=527)

我不知道此解决方案是否适用于这些设备，但您可以尝试一下。

# android - 安卓线程加入

> ID：15473931
> 
> 赞同：0
> 
> 时间：2013-03-18T09:57:28.343
> 
> 标签：android, multithreading, join

在我的代码中，我在一个线程中有一个代码，它首先尝试从数据库中更新某些内容，如果更新不成功，则尝试插入。我的问题是这段代码被调用了两次（我知道这不好，但我们暂时忽略它），因此插入被调用了两次，因为更新没有完成（至少这是我的想法）。我在谷歌上搜索了我想使用`thread.join()`的 . 我的问题是`thread.join()`在我的情况下是否可以使用。

谢谢

```
 public void persistChangesToDatabase() {

    final Thread backThread = new Thread(new Runnable() {
        @Override
        public void run() {
                try {

                    openDataBase();

                     <-- SOME CODE -->

                    //First, an UPDATE is tried
                    int rowsAffected = updateTable();

                    // If update fails an INSERT is tried
                    if (rowsAffected == 0) {

                        //Insert
                        insert();
                    } 

                } catch (SQLException e) {
                    e.printStackTrace();                       
                }
            }

    });
    backThread.start();
    try {
        backThread.join();
    } catch (InterruptedException e) {
        e.printStackTrace(); 
    }

} 
```

# javascript - 未设置本地存储

> ID：15473936
> 
> 赞同：1
> 
> 时间：2013-03-18T09:57:57.380
> 
> 标签：javascript, html, local-storage

有人可能会建议为什么以下代码不会存储样式表选择。

设置.PHP

```
<?php
session_start();
?>
<!doctype html>
<html>
<head> 
<script type="text/javascript">
function changeStyle(title) {
var lnks = document.getElementsByTagName('link');
for (var i = lnks.length - 1; i >= 0; i--) {
if (lnks[i].getAttribute('rel').indexOf('style')> -1 && lnks[i].getAttribute('title')) {
lnks[i].disabled = true;
if (lnks[i].getAttribute('title') == title) lnks[i].disabled = false;
}}}
function getActiveStyleSheet() {
var i, a;
 for(i=0; (a = document.getElementsByTagName("link")); i++) {
  if(a.getAttribute("rel").indexOf("style") != -1
  && a.getAttribute("title")
  && !a.disabled) return a.getAttribute("title");
  }
  return null;
} 
localStorage.setItem('activeStylesheet', getActiveStyleSheet())
</script>
<meta charset="utf-8">
<title>Intapp.Com</title>
<link rel="stylesheet" type="text/css" href="dwcss.css">
<link rel="alternate stylesheet"  type="text/css"  title="girly" href="style1.css">
<link rel="alternate stylesheet" type="text/css" title="default" href="dwcss.css">
<link rel="alternate stylesheet"  type="text/css"  title="neutral" href="style2.css">
<meta name="viewport" content="width=320.1, initial-scale=1.0, user-scalable=0 minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes" />
</head>
<body>
<div class="header">
<h1> User Settings </h1>
</div>
<div id="box2">
To change to this style click here
<button onclick="changeStyle('girly')">Girly</button>
<button onclick="changeStyle('default')">Default</button>
<button onclick="changeStyle('neutral')">Neutral</button>  
</div> 
<div class="footer">
</div>
</body>
</html> 
```

这是我在浏览器中测试时尝试检索本地存储值的地方，默认样式表在 index.php 上被激活，如果有人可以提供帮助，我看不出我做错了什么，将不胜感激。

索引.PHP

```
<html>
<head> 
<script>
window.onload=setstyle()
{
localStorage.getItem('activeStylesheet')
}
</script>
<meta charset="utf-8">
<link rel="apple-touch-startup-image" href="appsplash.png">
<title>Intapp.Com</title>
<link rel="stylesheet" type="text/css" href="dwcss.css">
<link rel="alternate stylesheet" type="text/css" title="default" href="dwcss.css">
<link rel="alternate stylesheet"  type="text/css"  title="neutral" href="style2.css">
<meta name="viewport" content="width=320.1, initial-scale=1.0, user-scalable=0 minimum-scale=1.0, maximum-scale=1.0">
<link rel="apple-touch-icon" href="applogo.png"/>
<meta name="apple-mobile-web-app-capable" content="yes" />
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:07:42.803

在`getActiveStylesheet`中，您的 for 循环设置`a`为`document.getElementsByTagName("link")`每次迭代，而您应该迭代它：

```
function getActiveStyleSheet() {
  var lnks = document.getElementsByTagName('link');
  for (var i = lnks.length - 1; i >= 0; i--) {
    if (lnks[i].getAttribute('rel').indexOf('style')> -1 && lnks[i].getAttribute('title') && !lnks[i].disabled) {
      return lnks[i].getAttribute("title");
    }
  }
  return null;
} 
```

此外，不要在页面加载时设置 activeStylesheet，而应在每次更改样式时设置它，即在 changeStyle 结束时：

```
function changeStyle(title) {
  var lnks = document.getElementsByTagName('link');
  for (var i = lnks.length - 1; i >= 0; i--) {
    if (lnks[i].getAttribute('rel').indexOf('style')> -1 && lnks[i].getAttribute('title')) {
      lnks[i].disabled = true;
      if (lnks[i].getAttribute('title') == title) lnks[i].disabled = false;
    }
  }
  localStorage.setItem('activeStylesheet', getActiveStyleSheet())
} 
```

在 index.php 上，应该有代码来实际设置样式，例如：

```
window.onload = function () {
  var
    lnks = document.getElementsByTagName('link'),
    activeStylesheet = localStorage.getItem('activeStylesheet');
  for (var i = lnks.length - 1; i >= 0; i--)
    if (lnks[i].getAttribute('rel').indexOf('style') > -1 && lnks[i].getAttribute('title'))
      lnks[i].disabled = lnks[i].getAttribute('title') != activeStylesheet;
}; 
```

当然，您应该尝试在某个时候排除这三个代码块之间共享的重复代码。

PS：一般来说，如果你缩进你的代码，它会更容易阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:21:28.940

我假设您从[http://alistapart.com/article/alternate](http://alistapart.com/article/alternate)传递地复制了此代码。如果是这样，您可以只使用[http://d.alistapart.com/alternate/styleswitcher.js](http://d.alistapart.com/alternate/styleswitcher.js)，并进行以下更改：

*   将调用替换为`readCookie(name)`调用`localStorage.getItem(name)`
*   将调用替换为`createCookie(name, value, days)`调用`localStorage.setItem(name, value)`

# mysql - MySQL 事务隔离

> ID：15473942
> 
> 赞同：1
> 
> 时间：2013-03-18T09:58:12.037
> 
> 标签：mysql, percona

我正在使用 Percona 服务器 (MySQL)，目前正在开发一个具有多个使用该应用程序的用户的网络桌面应用程序。我的应用程序数据库 innodb 带有事务，但我在选择必须使用***的事务隔离***时遇到问题，我的应用程序很敏感，因为它有财务记录。那么，有人可以帮我决定我必须使用哪个事务隔离吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T02:13:36.763

@deceze 和 @zerkms 是正确的 - 决定最佳事务隔离的不是数据的性质。这是您的应用程序及其查询的性质。您甚至可能会发现在同一应用程序中同时使用两种隔离级别的情况。

**可重复读取**事务确保您可以在给定事务期间多次查询相同的数据，并且您的查询将返回不变的数据——即使同时其他会话正在更改数据。您的会话将不会看到这些更改，即使它们已被提交，直到您的会话开始一个新事务。例如，这对于所有数据的逻辑转储很有用。还有需要多个步骤的复杂报告，您需要多次阅读相同的表格。

**已提交读**还允许其他会话同时更改数据，但您的事务将始终看到最新提交的数据状态。因此，即使在同一事务期间，相同的查询也可以返回不同的（更新的）结果。这很有用，因为它减少了数据库为长时间运行的事务而保留旧行版本的需要。

还有可*序列化*和*未提交读的*隔离级别，但很少使用。

# mongodb - “1”在组聚合中表示什么？

> ID：15473946
> 
> 赞同：0
> 
> 时间：2013-03-18T09:58:20.777
> 
> 标签：mongodb, aggregation-framework

在以下示例（[http://docs.mongodb.org/manual/reference/aggregation/group/#_S_group](http://docs.mongodb.org/manual/reference/aggregation/group/#_S_group)）中有一个源示例：

```
db.article.aggregate(
    { $group : {
        _id : "$author",
        docsPerAuthor : { $sum : 1 }, // here goes the question
        viewsPerAuthor : { $sum : "$pageViews" }
    }}
); 
```

我的问题是：**`1`**实际上指的是什么（哪个领域）？可以改写什么？`$author`例如可以吗？

而且，一般来说 - 我应该如何*“阅读”*这个：`viewsPerAuthor : { $sum : "$pageViews" }`- 它是*“viewsPerAuthor 是 pageViews 的总和”*吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:20:29.107

让我们一点一点地过一遍：

```
docsPerAuthor : { $sum : 1 }, 
```

意味着为该组中的每个文档（每个作者）创建一个新字段`docsPerAuthor`，并`$inc`通过`1`或创建其初始字段值`1`。

```
viewsPerAuthor : { $sum : "$pageViews" } 
```

意味着对于该组中的每个文档，汇总`pageViews`与该特定组匹配的文档的字段。

它与以下内容基本相同：

```
SELECT COUNT(*) as docsPerAuthor, SUM(pageViews) AS viewsPerAuthor 
       FROM article GROUP BY author 
```

# uitableview - 如何在不知道它在 iOS 中的确切标签值的情况下访问按钮？

> ID：15473948
> 
> 赞同：0
> 
> 时间：2013-03-18T09:58:30.153
> 
> 标签：uitableview, ios6, uibutton

我有一个`UITableView`显示一些歌曲列表。每个都`Cell`包含一个按钮来播放每个单元格歌曲。当我单击第一个单元格的播放按钮时，它应该播放相关的单元格歌曲。如果我单击另一个单元格的播放按钮，它应该停止当前播放的歌曲并开始播放新单元格的歌曲。

我的问题是如何使用它的`tag`值更改单击按钮的背景图像。

我是这样做的

```
-(IBAction)PlayButtonClickinSearch:(id)sender
{
        audioPlayer=[Singleton sharedManager];
       UIButton *btn=(UIButton *)sender;
       if ([strWicharray isEqualToString:@"copyListOfItems"]) {
        strWhichSong=[copyListOfItems objectAtIndex:btn.tag];
}

else if ([strWicharray isEqualToString:@"arrSongList"])
{
        strWhichSong=[arrSongList objectAtIndex:btn.tag];
}

strSongPlayingStatus=[audioPlayer searchPlay:strWhichSong :btn.tag];

if ([strSongPlayingStatus isEqualToString:@"playing"]) 
{
        [btn setBackgroundImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];

}   

else if ([strSongPlayingStatus isEqualToString:@"stop"])
{
        [btn setBackgroundImage:[UIImage imageNamed:@"play.png"] forState:UIControlStateNormal];
}  
} 
```

根据此代码，当我单击另一个单元格中的另一个按钮时，我无法重置先前单击的 btn 图像。有没有办法在`tag`不给出确切`tag`值的情况下更改具有此特定值的按钮的背景。

像这样

```
-(void)play :(int)tag
{  

    [btn(tag) setbackgroundImage :backImage];
} 
```

请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:05:47.207

像这样尝试，这里取一个变量并将先前选择的按钮标签分配给该变量，然后通过使用该值您可以更改背景。在下面的代码`index`中是一个 int 类型变量。

```
UIButton *button = (UIButton *)[self.view viewWithTag:index];
    button.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"your image name"]]; 
```

我希望它会帮助你。

# jqplot - jqplot：堆积条形图的元素丢失

> ID：15473949
> 
> 赞同：1
> 
> 时间：2013-03-18T09:58:30.717
> 
> 标签：jqplot, stacked

我已经在以下问题上苦苦挣扎了一段时间。希望有人可以帮助我。

**我正在尝试做的事情：** 使用 jqplot 我正在尝试将水平堆积条形图与折线图结合起来。堆积条形图应包含五个值。折线图应穿过堆积条形图。

**到目前为止我的想法是：** 我已经成功地构建了水平堆积条形图，并且线条应该穿过它。

**问题：** 我的堆叠条形图现在显示三个块（值：1、4 和 16）。我应该看到五个块（值：1、2、4、8 和 16）。

**我使用的代码：**

```
<script type="text/javascript">

    $(document).ready(function() {
        var x1 = [[1,1]];
        var x2 = [[2,1]];
        var x3 = [[4,1]];
        var x4 = [[8,1]];
        var x5 = [[16,1]];
        var x6 = [[1,0.5],[1,1.5]];

        var plot2 = $.jqplot('thema1chart', [x1, x2, x3, x4, x5, x6], {
            stackSeries: true,
            seriesDefaults: {
                renderer: $.jqplot.BarRenderer,
                rendererOptions: {
                    barDirection: 'horizontal'
                },
                pointLabels: {
                    show: false,
                    stackedValue: true
                }
            },
            series: [{shadow: false, color:'#666666'},
            {shadow: false, color:'#FFFFFF'},{shadow: false, color:'#b4d2dd'},{shadow: false, color:'#FFFFFF'},{shadow: false, color:'#666666'},
                     { 
                     shadow: false,
                         disableStack : true,//otherwise it wil be added to values of previous series
                renderer: $.jqplot.LineRenderer,
                lineWidth: 2,
                label:'Benchmark',
                color:'#666666',
                showLine:false, 
                pointLabels: {
                    show: false
                },
                markerOptions: {
                    size: 7, style:"plus" 
                }}],
            axes: {
                xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer
                }
                ,
                yaxis: {
                    autoscale: true
                }
            }
        });
    });
    </script> 
```

非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:28:19.420

您需要将 CategoryAxisRenderer 应用于 yaxis （而不是 xaxis ）：

```
yaxis: {
   renderer: $.jqplot.CategoryAxisRenderer
} 
```

请参阅[此处的工作示例](http://jsfiddle.net/AnthonyLeGovic/HJL9E/)

**编辑：**如果要绑定 xaxis，请将 xaxis:{min:0} 添加到轴选项

# jquery - jquery插件方法返回值不是对象

> ID：15473951
> 
> 赞同：4
> 
> 时间：2013-03-18T09:58:40.603
> 
> 标签：jquery, plugins, methods, return-value

我写了一个 jq 插件，我首先要在其中初始化选定的元素（所有这些元素）。稍后在代码中，我想获取由方法生成的字符串。但它返回的只是对象，而不是我的字符串。

我在互联网上做了很多研究，但一方面我不知道如何使插件“可链接”，另一方面又不知道如何“返回任何值”。

你怎么看？

```
(function($){
    var methods = {
        init: function(val){
            // Actions to initialize ALL selected Elements
        }
        ,
        returner: function(val){
            alert('working with every selected element: '+$(this).width());
            // return anything
            return 'STRING PRODUCED BY THIS FUNCTION!';
        }
    }

    $.fn.myplug = function(method){
        var args = arguments;
        var init = 'init-myplug';
        return this.each(function(){
            var is_init = $(this).data(init);
            if (is_init && methods[method]){
                return methods[method].apply($(this), Array.prototype.slice.call(args, 1));
            } else if (!is_init && (typeof method === 'object' || !method)){
                $(this).data(init, true);
                return methods.init.apply($(this), Array.prototype.slice.call(args, 0));
            }
        });
    };
})(jQuery);

$('.selects_5_elements').myplug(); // init

$('.selects_5_elements').myplug('returner'); // get the string 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-22T15:55:54.807

The first step would be to gather the results from your method. At the moment you are trying to return the result of the method through the *each* callback, which isn't going to work (the return value in the *each* callback is used to break out of the loop).

I would suggest gathering all the results in an array like this:

```
var results = [];
this.each(function(){
    var is_init = $(this).data(init);
    if (is_init && methods[method]){
        results.push(methods[method].apply($(this), Array.prototype.slice.call(args, 1)));
    } else if (!is_init && (typeof method === 'object' || !method)){
        $(this).data(init, true);
        results.push(methods.init.apply($(this), Array.prototype.slice.call(args, 0)));
    }
}); 
```

At this point you could simply return the *results* array. But if you want to allow some methods to be chainable, while others return the results of the method call, then you would need to check the method name to decide what value to return.

```
if (method == 'returner')
    return results;
else
    return this; 
```

Also, note that we are returning an array here, not a string. The reason is that your method is going to be called for every element matching the selector. So if you have five matching elements you are going to get an array of 5 strings.

If you really just want a single string back, then you need to decide how to handle all the duplicates. Do you want to join all the strings together? Or only return the first string? Or only the last string? All options are easy enough to do - which you choose will depend on your requirements.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T12:51:35.070

您唯一需要做的就是将其放入每个回调中：

```
if ( args.length === 0 ) {
   // Init your plugin
   return this;
}

if ( args[0] === "returner" ) {
   // Generate your string
   return "STRING PRODUCED BY THIS FUNCTION!";
} 
```

# hibernate - GWT：EntityManager NullPointerException

> ID：15473955
> 
> 赞同：0
> 
> 时间：2013-03-18T09:58:47.470
> 
> 标签：hibernate, gwt, jpa, jboss, smartgwt

我正在使用 GWT 和 SmartGWT 库来制作应用程序，并将其部署在 JBoss 服务器上。为了验证我的用户，我创建了一个 JPA 实体和一个 ManagerBean。但是，当我尝试在此 ManagerBean 中使用 EntityManager 时，我得到了 NullPointerException。EntityManager 适用于所有其他类，但不适用于 AppUser 类。

来自 AppUserManagerBean 的代码：

```
@PersistenceContext(unitName = "test")
private EntityManager em;

private Logger logger = Logger.getLogger("be.test.server.AppUserManagerBean");

public boolean checkUser(String username,String password){

    logger.info("ENTITY MANAGER: " + em.toString());
    AppUser user = null;
    Query query = em.createQuery("SELECT OBJECT(a) FROM AppUser a WHERE a.username = :username AND a.password = :password");
    query.setParameter("username", username);
    query.setParameter("password", password); 
```

错误日志：

```
java.lang.NullPointerException
    be.test.server.auth.AppUserManagerBean.checkUser(AppUserManagerBean.java:23)
    be.test.server.auth.CustomAuthenticationProvider.authenticate(CustomAuthenticationProvider.java:29)
    org.springframework.security.authentication.ProviderManager.doAuthentication(ProviderManager.java:130)
    org.springframework.security.authentication.AbstractAuthenticationManager.authenticate(AbstractAuthenticationManager.java:48)
    org.springframework.security.authentication.ProviderManager.doAuthentication(ProviderManager.java:148)
    org.springframework.security.authentication.AbstractAuthenticationManager.authenticate(AbstractAuthenticationManager.java:48)
    org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:97)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:199)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167) 
```

我知道这可能还不够信息，所以请随时在评论中向我询问更多信息。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:12:25.047

确保 AppUserManagerBean 也由容器而不是您自己实例化。

# android - 应用程序被杀死时Android服务重新启动

> ID：15473957
> 
> 赞同：11
> 
> 时间：2013-03-18T09:58:55.037
> 
> 标签：android, service

我是安卓新手。我正在开发一个记录传感器数据的应用程序。我有一个带有两个按钮的活动。当用户按下开始按钮时，我希望启动服务并记录传感器数据，直到用户按下停止按钮。我不确定我想使用哪种类型的服务。我阅读了有关本地服务与远程服务的信息，但我并没有真正理解它们的区别。

**我到目前为止所尝试的：**

我创建了一个带有两个按钮的活动，用于启动和停止本地服务：

```
//Start Service
startService(new Intent(this, MyService.class));

//Stop Service
stopService(new Intent(this, MyService.class)); 
```

我还创建了一个`onStartCommand()`开始记录传感器数据的粘性服务：

```
public int onStartCommand(Intent intent, int flags, int startId) {
    mSensorManager.registerListener(this, accelerometer,
            SensorManager.SENSOR_DELAY_FASTEST);
    mSensorManager.registerListener(this, magnetometer,
            SensorManager.SENSOR_DELAY_UI);
    mSensorManager.registerListener(this, lightSensor,
            SensorManager.SENSOR_DELAY_UI);
    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
    return Service.START_STICKY;
} 
```

AndroidManifest.xml：

```
<service android:name=".MyService" android:enabled="true" android:process=":HelloSensors_background"/> 
```

它运行良好，但问题是当我[终止启动该服务的应用程序](http://www.youtube.com/watch?v=XVyXCrM-3zw)时，该服务重新启动并丢失所有以前记录的数据。我应该使用什么才能使服务平稳运行并在应用程序被终止时继续运行，以免丢失任何记录的数据？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T10:19:05.390

在你澄清杀人事件后：

您可能希望在与您`Service`的不同的进程中运行您的进程`Application`，您可以通过清单中的这样一个声明来实现：

```
<service
    android:name=".ServiceClassName"
    android:process=":yourappname_background" >
    ... 
```

`android:process`对清单中的任何`receiver`声明使用相同的属性。

如果您只想接收可以在清单中声明的​​事件，则可以考虑使用`IntentService`，由于其活动时间跨度短，用户几乎永远不会看到它。但是，如果您需要收听只能在以编程方式注册接收器时接收的事件（在这种情况下，显然`receiver`清单中的子句没有意义），那么您不能对用户（或“智能”之一应用程序杀手”）杀死您的服务。优点仍然是用户希望了解您的应用程序可以被杀死，而您`Service`不能（如果他们希望它做某事）。

此外，您可以[将您`Service`带到前台](http://developer.android.com/guide/components/services.html#Foreground)。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-18T10:03:12.123

我认为您必须在 AndroidManifest.xml 中声明该服务。

# codeigniter - 不等于 Codeigniter 活动记录中的比较

> ID：15473965
> 
> 赞同：2
> 
> 时间：2013-03-18T09:59:11.297
> 
> 标签：codeigniter, activerecord

我对收到此代码的此错误感到非常困惑

```
$this->db->order_by('uid','DESC')->where('type!=',"Admin")->get('user_profile',$config['per_page'], $this->uri->segment(3)); 
```

这是我得到的错误

```
Error Number: 1064

You have an error in your SQL syntax; check the manual that corresponds to your MySQL      server version for the right syntax to use near ''Admin' ORDER BY `uid` DESC LIMIT 10' at line 3

SELECT * FROM (`user_profile`) WHERE `type!=` 'Admin' ORDER BY `uid` DESC LIMIT 10

Filename: C:\wamp\www\proposal\system\database\DB_driver.php

Line Number: 330 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T10:01:32.630

尝试这样的查询。管理员使用单逗号而不是双逗号。和 <> 而不是 !=

```
$this->db
    ->where('type <>','Admin')
    ->order_by('uid','DESC')
    ->get('user_profile',$config['per_page'], $this->uri->segment(3)); 
```

# android - 如何像在演示文稿中一样缓慢滚动放大的图像？

> ID：15473969
> 
> 赞同：1
> 
> 时间：2013-03-18T09:59:16.487
> 
> 标签：android, image, animation, scroll, zooming

## 背景

我有一些高质量的图像，我希望在它们之间进行一些过渡，比如在演示文稿中。

## 问题

由于Android有许多屏幕类型，对于“演示文稿”的每个“帧”，我希望将图像放大到特定区域/角落（如果需要）并在某个方向缓慢自动滚动（取决于位置我放大了）。

这样的事情发生在某些网站和显示您的图像库的屏幕保护程序上。

这意味着在某些屏幕中，只会显示图像的一部分，而在滚动时会显示其他部分。

每次慢速滚动后，我切换到下一个图像并执行相同的过程。

## 我试过的

我找不到这个功能的名称，因此我不知道在哪里可以找到它。

## 例子

图像被缩放到左上角，并且正在慢慢滚动到右下角。

## 问题

有没有办法使用 API 来实现它？也许这项工作有一个图书馆？

当然，无论图像质量如何，解决方案都不能使用过多的内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-25T13:15:42.917

好的，我找到了一个名为[**NotBoringActionBar**](https://github.com/flavienlaurent/NotBoringActionBar)的好项目，它具有以我要求的相同方式在图像之间交换的相同效果。

负责此的类称为“KenBurnsView.java”。

原始库是[**KenBurnsView**](https://github.com/flavioarfaria/KenBurnsView)。

编辑：请注意，这不适用于动态创建的位图，我已经在[这里](https://stackoverflow.com/questions/23680066/implementation-of-kenburns-effect-on-android-with-dynamic-bitmaps-setting)发布了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:08:23.290

我还没有尝试过，但这是一个想法 - 您可以通过编程方式放大 ImageView 的特定部分，并定期放大可以由线程提示的其他部分。

[有关缩放实现详细信息，请参阅此答案](https://stackoverflow.com/a/6650484/1369222)

例子：

首先放大左上角。

一个线程将运行并每 200 毫秒左右通知您一次。

收到通知后，您再次调用缩放功能，但这次稍微调低一点，以便在动画时看起来向下滚动。

继续直到到达右下端。

希望这可以帮助。

# ios - 自动检测没有声音 AVrecorder

> ID：15473970
> 
> 赞同：0
> 
> 时间：2013-03-18T09:59:19.373
> 
> 标签：ios, objective-c, avaudiorecorder, avaudiosessiondelegate

我想在录制时检测声音。如果声音停止 2-3 秒，则录音应自动停止。

有什么办法吗？我已经完成了录制：-

```
NSArray *dirPaths;
        NSString *docsDir;

        dirPaths = NSSearchPathForDirectoriesInDomains(
                                                       NSDocumentDirectory, NSUserDomainMask, YES);
        docsDir = [dirPaths objectAtIndex:0];
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"ddMMyyyyhh:mm:ss"];

        NSDate *now = [[NSDate alloc] init];
        NSString *dateString = [dateFormatter stringFromDate:now];
        dateString=[NSString stringWithFormat:@"%@.caf",dateString];
        soundFilePath = [docsDir
                                   stringByAppendingPathComponent:dateString];
        NSLog(@"soundFilePath==>%@",soundFilePath);
        NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
        [soundFilePath retain];
        NSDictionary *recordSettings = [NSDictionary
                                        dictionaryWithObjectsAndKeys:
                                        [NSNumber numberWithInt:AVAudioQualityMin],
                                        AVEncoderAudioQualityKey,
                                        [NSNumber numberWithInt:16],
                                        AVEncoderBitRateKey,
                                        [NSNumber numberWithInt: 2],
                                        AVNumberOfChannelsKey,
                                        [NSNumber numberWithFloat:44100.0],
                                        AVSampleRateKey,
                                        nil];
        NSError *error = nil;
        recorder = [[AVAudioRecorder alloc]
                    initWithURL:soundFileURL
                    settings:recordSettings
                    error:&error];
        if (error)
        {
            NSLog(@"error: %@", [error localizedDescription]);
        } else {
            [recorder prepareToRecord];
        }
        [recorder record]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:07:20.480

您应该使用`AVAudioRecorder`对音频电平计量的支持来跟踪音频电平并在电平低于某个阈值时停止录制。要启用计量 -

```
[anAVAudioRecorder setMeteringEnabled:YES]; 
```

然后你可以定期调用：

```
[anAVAudioRecorder updateMeters];
power = [anAVAudioRecorder averagePowerForChannel:0];
if (power > threshold && anAVAudioRecorder.recording==NO)
    [anAVAudioRecorder record];
else if (power < threshold && anAVAudioRecorder.recording==YES)
    [anAVAudioRecorder stop]; 
```

> 阈值：给定音频通道当前平均功率的浮点表示，以分贝为单位。返回值 0 dB 表示满量程或最大功率；返回值 -160 dB 表示最小功率（即接近静音）。
> 
> 如果提供给音频播放器的信号超过±满量程，则返回值可能超过0（即可能进入正范围）。

[[苹果文档]](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)

# webdriver - 将网页上的元素建模为 WebDriver 中的类以进行抽象和重用的理想方法

> ID：15473972
> 
> 赞同：1
> 
> 时间：2013-03-18T09:59:22.993
> 
> 标签：webdriver, selenium-webdriver, ui-automation, abstraction, pageobjects

为了抽象和可重用性，将网页上的元素建模为类的理想方法是什么？
目前，我创建的是一个包含以下成员变量的 BaseElement.java 类：

```
WebDriver webdriver; 
```

构造函数：

```
protected BaseElement(WebDriver driver)
 {
  //Initialization.
 } 
```

然后我将这个类扩展到代表网页上某个元素的其他类中。
例如，我有一个扩展 BaseElement.java 的 Button.java 类。

```
 public class ButtonElement extends BaseElement {

        String locator;
        By by;
        WebElement button;

        protected ButtonElement(WebDriver driver, String locator, By by) {
            super(driver);
            this.by = by;
            this.locator = locator;

           //code to find the element using driver.findElement()
           // I am not sure how to use By in here depending upon what I pass in the constructor when I create an object of this class. Any suggestions?
        }

        public void click() {

          button.click();
        }

        //Other methods which will interact with the element in other ways.
  } 
```

因此，在我的 PageObject 类中，我将使用上述内容：

```
Button loginButton = new Button(driver,"btn-Login",By.id);
loginButton.click(); 
```

这是正确的方法吗？有没有更好的方法来抽象，在单个类中隐藏复杂的逻辑，并从 webdriver 的角度重用按钮、文本框、选择列表等元素？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:57:01.840

Well, in this case, there is more than one correct way to do it.

1st **do not reinvent the wheel** - there exists PageObject which does probably the same as you want: [Read about it here](http://code.google.com/p/selenium/wiki/PageObjects)

2nd my personal approach is to have Class for every page I visit and model methods to describe what they are doing. Something like this:

```
 class InitPage {
   private Webdriver driver;

   public InitPage(){
     driver = new FirefoxDriver();
     driver.get("http://my-test-page.com");
   }

    public WebDriver getDriver(){
     return driver;
    }

    public AdminPage loginToSite(String username, String Password){#
     WebElement login = driver.FindElement(By.id("adm-login");
     login.sendKeys(username);
     WebElement pwd = driver.FindElement(By.id("adm-pwd");
     pwd.sendKeys(password);
     WebElement confirmButton = driver.FindElement(By.id("login-submit");\
     confirmButton.click();
     return new AdminPage(this);

   }

 }

class AdminPage{
  private InitPage initPage

  public AdminPage(InitPage init){
     this.initPage = init;
  }

  public String getLoggedInUser();
  WebElement user = initPage.getDriver().findElement(By.id("usr-credential-name")); //just show off how you approach the webDriver
  return user.getText();   

} 
```

And later on in the tests:

```
@Test
public void TestLoging(){
  InitPage firstPage = new InitPage();
  AdminPage administration = firstPage.login("Pavel", "omgTooSecretToTellYou!");
  Assert.assertEquals(administration.getLoggedInUser(), "Pavel"); //example how you can do the tests
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T21:36:27.720

我不相信每次定位元素时都传递驱动程序是要走的路，但我知道您的目标是避免重复代码。相反，您可以拥有一个访问驱动程序类的类，该类在您的代码开始时被实例化。通过这种方式，您可以传入一个“类型”和“属性”，它将定位任何已实现的元素。例如。类型：Id、Class、XPath；和属性：“文本”、“//div[@class="class"]/div[2]”。

因此，
**DriverClass**：有一个 WebDriver 实现 FindElement 并为每种类型提供一个开关。
**WrapperClass**：它具有诸如“Click”或“DoesElementExist”之类的类，它们使用DriverClass 来实现功能。
**TestClass**：使用对 WrapperClass 的调用来实现您的代码逻辑。

您可以更进一步，在另一个使用 WrapperClass 的类中实现常见的动作分组，这样 TestClass 就变得更干净了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-08T14:07:03.830

我部分同意 Abhijeet 和 Pavel 的观点，当抽象一个 Web 元素时，扩展一个已经实现了 Webelements 接口的所有方法的类对你有好处，否则正如 Pavel 所说，这就像重新发明轮子一样，我个人的看法是是抽象更大的WebElements，例如Forms，它又具有多个Webelements，例如。表格就像较小的页面......但这也是我的个人意见。

# php - PHP MySQL 插入行数限制

> ID：15473974
> 
> 赞同：1
> 
> 时间：2013-03-18T09:59:25.270
> 
> 标签：php, mysql

目前我有一个 PHP 脚本，可以将大约 2000 多行插入到 mysql 数据库中。

但就我而言，它在 500 多行后停止。知道可能是什么问题吗？

我还通过在插入之前显示数据进行了验证，它显示了所有 2000 多行数据。

遇到这个发布的[MySQL 插入限制？](https://stackoverflow.com/questions/9336012/mysql-insert-limit)但我目前在 Windows 中使用 MySQL。

我怎样才能取消限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T10:02:36.053

发生这种情况是因为时间限制超过 30 秒......要克服这个问题，您可以按照以下步骤操作

```
1\. Use this code 
 set_time_limit(0);
 in your php before inserting into db 
```

或者

```
2\. Change the time limit in your php.ini file ... 
```

1个选项更好，但临时措施

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:16:25.113

打开**Php.ini**并转到**第号行。442** . 你会得到以下行

```
 max_execution_time = 30 
```

**将**max_execution_time设置**为“0”**，这意味着没有限制或以秒为单位设置其他值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-08T08:51:04.300

您可以在插入数据库之前将此 PHP 代码

```
ini_set('max_execution_time', -1);
ini_set('memory_limit', -1); 
```

# mongodb - 用于在单个实体上进行大规模更新和读取的数据库

> ID：15473976
> 
> 赞同：-1
> 
> 时间：2013-03-18T09:59:29.683
> 
> 标签：mongodb, machine-learning, distributed-computing, database, nosql

我目前正在实施一个分布式在线机器学习框架。基本上这个系统处理样本的数据流。模型（例如感知器层）将随每个样本更新。

所以，我正在寻找一个可以支持大规模更新和读取单个实体的数据库。我认为 mongodb 及其“就地更新”是一个不错的选择，但也许有一个数据库更适合我的需求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:51:32.207

我冒昧的回答一下...

我将声明我已经成为 Mongo 的忠实粉丝，所以请考虑到这一点。=)

Mongo 是读取的不错选择，但前提是*您*愿意让数据稍微不一致。Mongo 有一个叫做副本集的东西，它基本上是一个集群。

副本集只有*一*台可以接收写入/更新的机器。它可以很好地处理它们，但这是需要考虑的事情。这不是主/主复制设置。

随着写入/更新的到来，它们被复制到副本集中的其他节点。这就是最终一致性的来源。

你可以考虑像 Couchbase/CouchDB 这样的东西，它也有一个集群概念，它是主/主。您可以写入任何节点，它最终将在其他节点上可用。

有些事情要考虑。

编辑：

我会和Mongo一起去。=)

# android - 在android中处理箭头键

> ID：15473983
> 
> 赞同：0
> 
> 时间：2013-03-18T09:59:41.867
> 
> 标签：android, android-layout, android-activity, android-tabhost, android-tabactivity

我想控制android中的箭头键事件。我正在三星 I5500 手机中测试该应用程序。该应用程序由选项卡组成。我成功地使用侦听器捕获事件。

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    Log.i(TAG_NAME, "key event: " + keyCode);
    if(keyCode == KeyEvent.KEYCODE_DPAD_CENTER) {
        Log.i(TAG_NAME, "Directional centre pad pressed");
    }
} 
```

例如，第三个选项卡中的活动包含 3 个项目的列表视图

```
Item A
Item B
Item C 
```

我使用向右箭头导航到第三个选项卡，然后单击向下箭头以选择上述项目之一。单击 DPAD_CENTER 键会触发附加到 listView 的 ItemClick 侦听器。到目前为止一切都很好。但是，在此之后，当前选项卡焦点移动到主页（选项卡 0）。尝试呈现 UI 的适配器无法加载，因为它位于不同的选项卡中。最终它崩溃了。

有谁之前经历过这个吗？我在互联网上搜索。我没有找到足够值得的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:53:51.440

如果您正在考虑使用 DPAD 键来查找不同 UI 项的焦点，那么您应该设计 XML 布局以了解要关注哪个视图。请参阅[http://developer.android.com/reference/android/view/View.html#FocusHandling](http://developer.android.com/reference/android/view/View.html#FocusHandling)

**您需要为每个元素指定 nextFocusUp/nextFocusDown/nextFocusRight/nextFocusLeft。**

对于 ListViews 和 Tabs，存在一个默认实现，出于同样的原因，您可以向下和向上滚动列表视图。

遵循这些准则将使您的应用程序对 DPAD 事件的响应更加灵敏，并提供无缝的用户交互（使用 AIR 鼠标/dpad 控制器等时）

# wordpress - 如何为 Wordpress 等 codeigniter 构建功能

> ID：15473986
> 
> 赞同：-1
> 
> 时间：2013-03-18T09:59:54.540
> 
> 标签：wordpress, codeigniter, function, helper

我将数据获取到视图，**$article['article_title']**是文章标题

```
<?php
foreach ($articles as $article)
{
?>
    <a href="#"><?php echo $article['article_title']; ?></a>
    <!-- some code here -->
<?
}
?> 
```

**如何为$article['article_title']**创建使用**the_title()**（相同的 wordpress 功能）替换的助手；

 **```
<?php
foreach ($articles as $article)
{
?>
    <a href="#"><?php echo the_title(); ?></a>
    <!-- some code here -->
<?
}
?> 
```

我创建了一个使用 id（段）的函数，但主页不起作用，因为它没有分段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:25:41.403

这实际上是一个很好的问题。

你可以这样做：

创建一个助手，例如：

```
function the_title() 
{
    $ci =& get_instance();

    // if your url looks like http://localhost/this-is-my-page-name
    $slug = $ci->uri->segment(1);

    if($slug) {
        $query = $ci->db->where('slug', $slug)->get('pages')->row();
        $result = $query->title;
    }
    return $result;
} 
```

然后你可以在你的文章中使用它，比如：

```
<?php echo the_title(); ?> 
```

顺便提一句。我的示例是针对一个结果，如果您想通过 foreach 循环获得 aricles 列表，则需要修改代码。**

# php - Aptana 3：如何设置 PHP 以将 php 文件作为脚本执行？

> ID：15473988
> 
> 赞同：2
> 
> 时间：2013-03-18T10:00:02.587
> 
> 标签：php, eclipse, ide, aptana, aptana3

我是 PHP 世界的新手，现在我已经安装了 Apatana 3 Studio，我有一些关于这个开发环境中 PHP 配置的问题。

似乎我的配置运行良好，但我不知道它是否以智能方式配置......

我使用 Ubuntu 并安装了 Apache 2 Web 服务器

执行一个包含 phpinfo() 函数的简单 php 文件（位于我的 /var/www 文件夹中）：

```
<?php phpinfo(); ?> 
```

我获得了一些信息，似乎我已经在此路径下安装了 Apache 2 Web 服务器：/etc/php5/apache2 并且 php.ini 文件具有此路径：/etc/php5/apache2/php.ini

事实上，这是我获得的 phpinfo() 输出的一部分：

```
Configuration File (php.ini) Path   /etc/php5/apache2
Loaded Configuration File   /etc/php5/apache2/php.ini 
```

作为 Web 服务器，我使用 Apache+PHP 的外部版本，它运行良好。我的疑问与将 PHP 文件作为脚本执行（不在 Web 服务器上）有关：

如果我在项目中选择了一个 PHP 文件并执行以下操作： Run As --> PHP Script 会出现一条错误消息，告诉我我必须设置 PHP 可执行文件位置并打开一个向导来执行此操作。

所以现在我处于：首选项---> Aptana Studio ---> PHP ---> PHP Interpretes，这是无效的。

所以我做了以下操作：单击添加按钮并在向导中设置以下值：

> ```
> Name: PHP
> 
> Executable Path: /usr/bin/php5 (php5 is the executable file, I don't know if this setting is right)
> 
> PHP ini file: /etc/php5/apache2/php.ini (I have obtained this path from the phpinfo() function)
> 
> PHPDebbugger: XDebug (setting by default) 
> ```

所以我单击完成并给我以下错误消息：保存 /etc/php5/apache2/php.ini 时出错

为什么？也许我没有这个文件的写权限？

但是现在，如果我尝试将我的 php 文件作为脚本执行似乎效果很好，并且我在控制台选项卡中获得了所需的输出

这个配置对不对？

# jquery - 更改css属性不起作用

> ID：15473993
> 
> 赞同：0
> 
> 时间：2013-03-18T10:00:17.427
> 
> 标签：jquery

大家好！更改css属性不起作用。请帮忙！

```
$('#container_logo p').hover(
        function(){
            $(this).animate(
            {
                text-shadow: "#363535 10px 10px 10px"
            },
            5000);
        },
        function(){
            $(this).animate(
            {
                text-shadow: "#363535 1px 1px 1px"
            },
            5000);
    }); 
```

这是一个[http://jsfiddle.net/pZnWx/3/](http://jsfiddle.net/pZnWx/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:05:53.230

你可以试试css

```
#container_logo p {
    -webkit-transition:text-shadow 5s ease-in-out;
    -moz-transition:text-shadow 5s ease-in-out;
    -o-transition:text-shadow 5s ease-in-out;
    -ms-transition:text-shadow 5s ease-in-out;
    transition:text-shadow 5s ease-in-out;    

    text-shadow:#363535 1px 1px 1px;   
}

#container_logo p:hover {
    text-shadow:#363535 10px 10px 10px;   
} 
```

# javascript - 在两列高图中显示图例项

> ID：15473996
> 
> 赞同：7
> 
> 时间：2013-03-18T10:00:31.937
> 
> 标签：javascript, html, css, highcharts, highstock

在 highcharts 中是否可以在垂直堆叠的两列中显示图例？

我正在尝试找出显示图例项目的最佳方式，目前我们的图例项目都堆叠在一起。

图表上最多有 4 个系列。

我不太确定如何处理这个问题，我看到了 useHTML 的选项，但是我似乎找不到任何关于如何处理 HTML 的示例。

[http://jsbin.com/oyicuc/9/edit](http://jsbin.com/oyicuc/9/edit)

任何建议都会非常有帮助，谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-18T14:56:27.907

您是否尝试过使用 itemWidth 参数？

请看一下

[http://jsfiddle.net/B9L2b/1266/](http://jsfiddle.net/B9L2b/1266/)

```
 legend: {
    width: 200,
    itemWidth: 100
}, 
```

[http://api.highcharts.com/highcharts#legend.itemWidth](http://api.highcharts.com/highcharts#legend.itemWidth)

编辑：

[http://jsbin.com/oyicuc/31/](http://jsbin.com/oyicuc/31/)

```
width:600,
        itemWidth:300,
        itemStyle: {
          width:280
        } 
```

[http://api.highcharts.com/highstock#legend.itemStyle](http://api.highcharts.com/highstock#legend.itemStyle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-26T07:29:51.443

```
function renderElements() {
      if (this.legend) {
       this.legend.destroy();
      }
      //distance between 2 elements
      let itemDistance = this.legend.options.itemDistance;
      //the biggest element
      let maxItemWidth = this.legend.maxItemWidth;
      //make the width of the legend in the size of 2 largest elements + 
      //distance  
      let nextLegendWidth = (maxItemWidth * 2) + itemDistance;
      //container width
      let boxWidth = this.plotBox.width;
      //if the length of the 2 largest elements + the distance between them 
      //is less than the width of           container, we make 1 row, else 
      //set legend width 2 max elements + distance between
    if (boxWidth < nextLegendWidth) {
     this.legend.options.width = maxItemWidth;
    } else {
     this.legend.options.width = nextLegendWidth;
  }

  this.render()   
}

chart: {
    events: {
      load: renderElements,
      redraw: renderElements
  }
} 
```

[https://jsfiddle.net/jecrovb7/38/](https://jsfiddle.net/jecrovb7/38/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:17:09.070

也许您可以使用图例的“labelFormater”。

[http://api.highcharts.com/highcharts#legend.labelFormatter](http://api.highcharts.com/highcharts#legend.labelFormatter)

然后您可以创建一个表格并按照您的意愿排列图例文本。

查看文档页面上的示例。