# StackOverflow 问答 15486000-15486999

# regex - RegExp VBS 5.5，是否可以转义长字符序列？(\Q...\E)

> ID：15486001
> 
> 赞同：1
> 
> 时间：2013-03-18T20:12:35.493
> 
> 标签：regex, vbscript

是否可以在 Microsoft VBS 5.5 正则表达式中做这样的事情：

```
\QLong.String?!With.Random,Ch\aract\er\s.\E 
```

所以它会找到“Long.String?!With.Random,Ch\aract\er\s”。没有将点转换为“任何字符”等？此正则表达式在 Notepad++ 中工作正常，但在 VBS 中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:11:29.737

不幸的是，不，这是不可能的。根据 MSDN 上的正则[表达式语法（脚本）文档，](http://msdn.microsoft.com/en-us/library/1400241x%28v=vs.84%29.aspx)`\Q..\E`不支持元字符转义序列。

在 VBScript 中确实没有替代品，除了在运行 rexex 之前在保留字符之前插入转义符之外。

# jquery - Servlet 在新窗口中打开 PDF

> ID：15486002
> 
> 赞同：2
> 
> 时间：2013-03-18T20:12:36.187
> 
> 标签：jquery, ajax, spring, servlets

我的应用程序要求在新窗口中打开 PDF。要求是仅当 PDF 数据可用时才打开一个新窗口。我正在拨打服务电话以将 PDF 内容作为**bytearray**获取。如果服务返回 PDF 字节数组，那么我只需要打开一个新窗口来显示 PDF。我正在使用 jQuery 和 Spring。

我试过了`window.open target="_blank"`。但问题是它在访问服务器之前立即打开一个窗口。下面是我刷新 PDF 的控制器代码。

```
response.setContentLength(pdfBytes.length);
ServletOutputStream out = response.getOutputStream();
out.write(pdfBytes);
out.flush();
out.close(); 
```

我尝试使用 Ajax，这样一旦我得到响应，我就可以`window.open`打开一个窗口来显示 PDF——但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:29:30.550

我认为您应该在呈现页面时（或之前）检查 pdf 内容并显示链接`target="_blank"`（如果有 pdf 内容）或仅显示纯文本（如果没有内容可用）。

# python - python - 如何加载重载方法

> ID：15486005
> 
> 赞同：1
> 
> 时间：2013-03-18T20:12:42.117
> 
> 标签：python, constructor

问题：

1.  python 是否以这种方式加载方法 - 谁最后谁赢？即使您有两个方法共享确切的名称，即使使用不同的参数（不同的签名），最后一个方法会否决所有以前的方法而不会给出运行时错误？
2.  如果python没有重载，那么python推荐的JAVA重载方法是什么？

下面的例子：

```
class Base(object):
    def __init__(self):
        print "Base created without args"
    def __init__(self, a):
        print "Base created " + a + "\n" 
```

`print Base("test")`给我：

```
Base created test

<__main__.Base object at 0x1090fff10> 
```

虽然`print Base()`给了我：

```
Traceback (most recent call last):
File "${path to super file}/super.py", line 27, in <module>
print Base()
TypeError: __init__() takes exactly 2 arguments (1 given) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:20:55.967

1.  基本上，您已经自己回答了这个问题。Python 不关心方法签名，只关心名称。这也适用于模块级函数。
2.  与 Java 不同，Python 允许您为方法参数指定默认值（我认为这更方便）：

    ```
    class Base(object):
        def __init__(self, a=None):
            if a is None:
                print "Base created without args."
            else:
                print "Base created with %s" % a

    a = Base()    # prints "Base created without args."
    b = Base(123) # prints "Base created with 123." 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:58:47.677

您可以使用装饰器滚动您自己的方法重载器：

```
class OverloadFunction(object):

    def __new__(cls, f):
        self = object.__new__(cls)
        setattr(self, "_dct", {})
        return self.overload(())(f)

    def overload(self, signature):
        def wrapper(f):
            self._dct[signature] = f
            return self
        return wrapper

    def __call__(self, *args, **kwargs):
        return self._dct[self._get_signature(args)](*args, **kwargs)

    def _get_signature(self, obj):
        return tuple(type(x) for x in obj)

@OverloadFunction
def hello():
    print "hello, no args"

@hello.overload((int,))
def hello(i):
    print "hello with an int argument:", i

@OverloadFunction
def add(): pass

@add.overload((int, int))
def add(a, b):
    print "integer addition, %d + %d = %d" % (a, b, a + b)

@add.overload((str, int))
def add(a, b):
    print "string concatentation, %r + %d = %r" % (a, b, a + str(b))

hello()
hello(1)
add(2, 3)
add("a", 3) 
```

哪个输出：

```
hello, no args
hello with an int argument: 1
integer addition, 2 + 3 = 5
string concatentation, 'a' + 3 = 'a3' 
```

# python - 指定配置文件的最 Pythonic 方法是什么？

> ID：15486008
> 
> 赞同：6
> 
> 时间：2013-03-18T20:13:02.120
> 
> 标签：python

我正在用 Python 编写一个守护程序脚本，并希望能够在程序期望读取的文件（如 .conf 文件）中指定设置。标准库有 configparser 和 xdrlib 文件格式，但看起来都不是 Python 的；前者是 Microsoft 标准，后者是 Sun Microsystems 标准。

我可以自己编写，但我宁愿坚持一个众所周知且有记录的标准，也不愿重新发明轮子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T20:17:58.990

除非您有任何特别复杂的需求，否则使用 configparser 没有任何问题。这是一种简单的平面文件格式，很多人都容易理解和熟悉。如果这真的让您感到不快，那么总是可以选择使用 JSON 或 YAML 配置，但这些是更重量级的格式。

第三种流行的选择是只使用 Python 作为您的配置文件。这为您提供了更大的灵活性，但也增加了通过“仅”修改配置文件来引入奇怪错误的几率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:20:46.597

恕我直言：永远不要触摸 ConfigParser 模块，它已经过时（阅读：显然没有更新）并且有很多怪癖。用于评论的 API？忘了它！访问默认部分？哈哈！想知道未解析的配置字段吗？好吧，猜猜看：ConfigParser 迭代所有配置文件并静默失败（涂上光泽），可能最终对所有错误进行浓缩的异常跟踪。找出哪个错误属于哪个文件并不容易。没有嵌套的配置部分...

而是 CSV，然后是 ConfigParser！

IMO：将 Json 用于配置文件。python 数据结构和 Json-String 表示之间的非常灵活、直接的映射是可能的，并且仍然是人类可读的。顺便提一句。不同语言之间的交流非常容易。

文件中的花括号不是那么漂亮，但你不能拥有它！;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T23:14:39.680

我也是从 configparser 和 optionsparser 开始的，但对我来说，最流畅的方法就是在 .py 文件中定义字典并将其作为模块导入。然后，您可以直接访问配置而无需任何进一步处理。

```
#
# example.py
#
config = {
    "dialect"   :   "sqlite",
    "driver"    :   "",
    "database"  :   "testdb",
    "host"      :   "localhost",
    "port"      :   "0"
} 
```

只要您需要访问，只需执行以下操作：

```
from example import config

print config["database"] 
```

# c# - Xamarin NSNotificatioCenter：如何让 NSObject 被传递？

> ID：15486010
> 
> 赞同：11
> 
> 时间：2013-03-18T20:13:04.940
> 
> 标签：c#, ipad, xamarin.ios, nsnotificationcenter

我正在尝试使用 NSNotificationCenter 从我的应用程序的视图中发布通知到另一个应用程序。因此，在我的目标类中，我按如下方式创建了我的观察者：

```
NSNotificationCenter.DefaultCenter.AddObserver ("ChangeLeftSide", delegate {ChangeLeftSide(null);}); 
```

我有我的方法：

```
public void ChangeLeftSide (UIViewController vc)
{
    Console.WriteLine ("Change left side is being called");
} 
```

现在从另一个 UIViewController 我发布通知如下：

```
NSNotificationCenter.DefaultCenter.PostNotificationName("ChangeLeftSide", this); 
```

如何访问在我的目标类的发布通知中传递的视图控制器？在 iOS 中，这非常简单，但我似乎无法在 monotouch (Xamarin) 中找到自己的方式......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T20:49:47.753

当你 时`AddObserver`，你想以稍微不同的方式来做。尝试以下操作：

```
NSNotificationCenter.DefaultCenter.AddObserver ("ChangeLeftSide", ChangeLeftSide); 
```

并声明您的`ChangeLeftSide`方法符合`Action<NSNotification>`预期`AddObserver`- 给您实际的`NSNotification`对象。：

```
public void ChangeLeftSide(NSNotification notification)
{
    Console.WriteLine("Change left side is being called by " + notification.Object.ToString());
} 
```

因此，当您`PostNotificationName`将 UIViewController 对象附加到通知时，可以`NSNotification`通过`Object`属性在您的通知中检索该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T14:26:19.103

我找到了答案，以下是我在问题中发布的代码需要进行的更改：

```
public void ChangeLeftSide (NSNotification notification)
{
    Console.WriteLine ("Change left side is being called");
    NSObject myObject = notification.Object;
    // here you can do whatever operation you need to do on the object
} 
```

并创建了观察者：

```
NSNotificationCenter.DefaultCenter.AddObserver ("ChangeLeftSide", ChangeLeftSide); 
```

现在您可以强制转换或键入检查 NSObject 并使用它做任何事情！完毕！

# for-loop - 通过 IP 地址文本文件的批处理文件 FOR 循环不起作用

> ID：15486011
> 
> 赞同：1
> 
> 时间：2013-03-18T20:13:05.867
> 
> 标签：for-loop, batch-file, cmd

感谢任何帮助。

一直在尝试编写一个批处理文件，它只是从文本文件中 ping 一个 IP 地址列表。

我知道可以使用以下代码来完成：

```
FOR /F %i in (yourFile.txt) DO yourcommand %i 
```

并使用该格式创建以下内容：

```
::@echo off
pause
for /F %%a in (vlans.txt) do (

pause
ECHO Checking connection to subnet %%a, please wait....
PING -n 1 %%a|find "Reply from " >NUL
IF NOT ERRORLEVEL 1 goto :SUCCESS
IF ERRORLEVEL 1 goto :FAIL

:FAIL
ECHO Subnet %%a is unreachable
pause

:SUCCESS
ECHO Subnet %%a has passed!
pause

)

ECHO All subnets have now been tested....................
Pause 
```

它需要一点整理，我已经注释掉了@Echo，这样我就可以看到发生了什么。输出如下：

```
C:\for /F "tokens=*" %a in (vlans.txt) do (

pause
ECHO Checking connection to subnet %a, please wait....
PING -n 1 %a  | find "Reply from "  1>NUL
IF NOT ERRORLEVEL 1 goto :SUCCESS
IF ERRORLEVEL 1 goto :FAIL

ECHO Subnet %a is unreachable
pause

ECHO Subnet %a has passed!
pause
)

C:\>(

pause
ECHO Checking connection to subnet 10.169.169.129, please wait....
PING -n 1 10.169.169.129  | find "Reply from "  1>NUL
IF NOT ERRORLEVEL 1 goto :SUCCESS
IF ERRORLEVEL 1 goto :FAIL

ECHO Subnet 10.169.169.129 is unreachable
pause

ECHO Subnet 10.169.169.129 has passed!
pause
)

Press any key to continue . . .

Checking connection to subnet 10.169.169.129, please wait....

C:\>ECHO Subnet %a has passed!

Subnet %a has passed!

C:\>pause

Press any key to continue . . . 
```

那里发生了很多我不理解或没想到的事情，比如它没有循环遍历文本文件中的每个 IP 地址。它重复自己，首先没有填写变量，然后是变量。此外，在批处理文件运行时，某些变量不会进一步填充 IP 地址。

我是编写批处理文件的新手，所以我知道我的语法是错误的，但不确定我哪里出错了？

vlan.txt 只有一个 IP 地址列表，每行一个。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:39:13.443

代码有一个大问题。

`GOTO`在循环中（或在任何代码块中）打破循环/块。
所以在第一个`GOTO :somewhere`循环之后立即结束。
并且块中的标签会导致奇怪的错误，因此也应该避免这种情况。

这两条线可以优化

```
IF NOT ERRORLEVEL 1 goto :SUCCESS
IF ERRORLEVEL 1 goto :FAIL 
```

至

```
IF ERRORLEVEL 1 ( echo FAIL ) ELSE (echo Success) 
```

另一个问题是`IF ERRORLEVEL 1`语法本身。
如果 ERRORLEVEL 等于**或大于**该数字，则为 true。
因此我更喜欢更明显的语法

```
IF !ERRORLEVEL! EQU 0 echo SUCCESS 
```

在块中，您无法使用百分比扩展访问错误级别，因为百分比扩展是在解析块时完成的，而不是在执行块时完成的。

对于延迟扩展（带有感叹号），您需要先通过`setlocal EnableDelayedExpansion`.

```
@echo off
setlocal EnableDelayedExpansion
for /F %%a in (vlans.txt) do (
    ECHO Checking connection to subnet %%a, please wait....
    PING -n 1 %%a >NUL
    IF !ERRORLEVEL! == 0 (
        ECHO Subnet %%a has passed^^!
    ) else (
        ECHO Subnet %%a is unreachable
    )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-30T04:08:09.367

上面的大多数示例将因各种原因而失败
我下面的示例在 Win7

问题中使用上面的示例=
1。您不能 %Errorlevel% 检查 ping，因为它总是返回零 (0) 错误级别，
. . . 除非 IP-Protocol 堆栈完全被冲洗掉。
PING.EXE 命令的错误级别仅表明 PING.EXE 按预期“运行”，
. . . 并且没有说明响应或输出是什么。
* * * * * * * *

2\. GREAT-IDEA 通过“FIND”命令传送 PING 命令，
*（... prev 我将 PING 命令传送到 txt 文件，
然后针对该 TXT 进行“查找” -文件。）*
-------但是，“回复”中的“查找”：
. . 由于这个原因是失败的：

```
用 32 字节的数据 ping 192.168.1.100：
来自 192.168.1.34 的回复：无法访问目标主机。

```

*在这种情况下，192.168.1.34（第二行）是您的本地主机，报告目标是“无法访问”*
----------------------------- --------------
注意：任何成功的 ping 响应总是有 TTL=（一些小于 65 的数字）

```
用 32 字节的数据 ping 192.168.1.1：
来自 192.168.1.1 的回复：bytes=32 time
```

要点：将您的 ping 输出通过管道传输到 FIND.EXE，使用“TTL=”代替*
* * * * * * *

= = = = = 我的工作示例：

```
@ECHO 关闭
setlocal EnableDelayedExpansion

对于 (cpuipaddrs.txt) 中的 /F %%a 执行 (
    回声。
    ECHO PINGING %%a，请稍候....
    PING -n 2 %%a|找到“TTL=”>NUL
    如果！错误级别！neq 0 (ECHO UNREACHABLE, %%a 是 UNREACHABLE
       ) ELSE (ECHO %%a 已成功 ping 通)
)
```

= = = = = 上面的屏幕输出：

```
PINGING 192.168.1.1，请稍候......
 192.168.1.1 ping 通成功

PINGING 192.168.1.100，请稍候......
      无法访问，192.168.1.100 无法访问

PINGING 192.168.1.111，请稍候......
 192.168.1.111 ping 通成功
```

关于此 BATFILE 的附加说明：
1.请注意，在“FOR-Loop”内，我将 %ERRORLEVEL% 引用为 !ERRORLEVEL！
阅读“EnableDelayedExpansion”以了解为什么正常的 %Percent-Variables 在这些循环中不能正常工作。

2\. 还要特别注意我如何拆分“打开”和“关闭”括号，
特别是在第 3 行的“DO”之后和第 8 行的“ELSE”之前
*关于如何换行有一些愚蠢的规则, 带有'parens', DO's, ELSE's, & etc*

3\. 在这个例子中 cpuipaddrs.txt 是一个有 3 行的常规 txt 文件，

```
192.168.1.1
192.168.1.100
192.168.1.111
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:48:24.530

尝试这个：

```
@echo off
for /F %%a in (vlans.txt) do (
    ECHO Checking connection to subnet %%a, please wait....
    PING -n 1 %%a|find "Reply from " >NUL
    IF %ERRORLEVEL% neq 0 (ECHO Subnet %%a is unreachable) else ECHO Subnet %%a has passed!
)
ECHO All subnets have now been tested....................
Pause 
```

# three.js - three.js 删除形状线并使其成为 3d

> ID：15486013
> 
> 赞同：0
> 
> 时间：2013-03-18T20:13:14.203
> 
> 标签：three.js

我看到了three.js的这个例子：http://mrdoob.github.com/three.js/examples/webgl_geometry_shapes.html[我](http://mrdoob.github.com/three.js/examples/webgl_geometry_shapes.html) 试图可视化一个多边形（2d）并给它一个高度使其成为3d。现在我有两个问题：

首先，我怎样才能删除向量之间的这些线？

其次，我试图给它一个高度，但它不起作用。我要在***var extrudeSettings***中写点什么吗？

# oracle - 无法弄清楚为什么触发器无效？

> ID：15486014
> 
> 赞同：2
> 
> 时间：2013-03-18T20:13:19.853
> 
> 标签：oracle, plsql, triggers

正在创建以下触发器，但在插入时，出现错误“触发器无效并且重新验证失败”

```
 create or replace trigger check_dept
BEFORE INSERT ON employees
FOR EACH ROW
DECLARE
c number(1);
BEGIN
 select count(*) INTO c from departments where departments.department_id=:new.department_id;

IF c = 0 THEN
insert into departments(department_id,department_name) values (:new.department_id,'others');
END IF;

END; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:01:23.520

假设您使用的是默认`HR`模式，则触发器编译得很好。

```
C:\Users\jcave>sqlplus hr/hr

SQL*Plus: Release 11.2.0.1.0 Production on Mon Mar 18 16:55:42 2013

Copyright (c) 1982, 2010, Oracle.  All rights reserved.

Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options

SQL> create or replace trigger check_dept
  2  BEFORE INSERT ON employees
  3  FOR EACH ROW
  4  DECLARE
  5  c number(1);
  6  BEGIN
  7   select count(*) INTO c from departments where departments.department_id=:new.department_id;
  8
  9  IF c = 0 THEN
 10  insert into departments(department_id,department_name) values (:new.department_id,'others');
 11  END IF;
 12
 13  END;
 14  /

Trigger created.

SQL> ed
Wrote file afiedt.buf

  1  insert into employees( employee_id, first_name, last_name, email, hire_date, job_id, department_id)
  2*    values( -1, 'Justin', 'Cave', 'foo@bar.com', sysdate, 'AC_ACCOUNT', 10 )
SQL> /

1 row created. 
```

如果您的触发器无效，则您发布的触发器与您实际编译的触发器有一些不同，或者您没有使用默认`HR`模式，在这种情况下，您需要告诉我们您的表是什么样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:48:32.353

也许您需要在代码末尾添加“COMMIT”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:10:46.383

也许是一个愚蠢的想法，但您是否有权访问触发器正在访问的视图或表？如果它是一个视图，那么也许必须添加一个授权。

# firefox - Firefox Addon SDK 内容脚本拦截 window.navigator 调用？

> ID：15486015
> 
> 赞同：1
> 
> 时间：2013-03-18T20:13:20.933
> 
> 标签：firefox, firefox-addon-sdk

我有这段代码来记录对一堆 window.navigator 属性的调用：

```
 var navigatorProperties = [ "appCodeName", "appMinorVersion", "appName", "appVersion", "cookieEnabled", "cpuClass", "onLine", "opsProfile", "platform", "product", "systemLanguage", "userAgent", "userLanguage", "userProfile" ];

        var contentStorage = {}; 

        navigatorProperties.forEach(
            function(property) {
                contentStorage["window.navigator." + property] = window.navigator[property];

                Object.defineProperty(window.navigator, property, {
                    configurable: true,
                    get: function() { logValue("window.navigator." + property, contentStorage["window.navigator." + property], "get"); return contentStorage["window.navigator." + property] },
                    set: function(value) { logValue("window.navigator." + property, contentStorage["window.navigator." + property], "set"); contentStorage["window.navigator." + property] = value; } 
                });
            }); 
```

当此代码位于常规网页中时，对已定义和监视属性的任何调用，例如 console.log('local page: ' + window.navigator.product); 工作正常，也就是说，我得到 logValue 执行输出。但是，我希望此代码存在于插件 SDK 构建的扩展内容注入脚本中，该脚本通过页面 mod API 注入。当我这样做并转到修改或访问我观察的属性的页面时，永远不会触发 logValue。我试过用 unsafeWindow 替换 window 但也没有运气。任何人都可以告诉我为什么通过插件注入此代码时该代码不起作用？

# css - 水平滚动低于 1000 宽度

> ID：15486016
> 
> 赞同：1
> 
> 时间：2013-03-18T20:13:23.433
> 
> 标签：css, background, scroll

现在我挣扎了几天，我找到了一个似乎不起作用的解决方案。

无论如何，我要做的是在有人拖动**宽度小于 1000 像素**的窗口时“锁定”屏幕。我的意思是，**水平滚动条必须出现，背景图像必须停止调整大小，文本停止移动**。当达到低于 1000 像素以及文本时，背景必须变为可水平滚动。

希望有人可以帮助我，现在尝试了两天：s

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Hup</title>

<style type="text/css">
html{

    background: url(jup.png) no-repeat center center fixed;
    min-width:500px;
    max-height: 500px;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size:auto 580px;
    background-position: center 120px;
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='jup.png',     sizingMethod='scale');
    -ms-filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='jup.png', sizingMethod='scale');
}

#menu {
    position:absolute;
    margin-top:80px;
    margin-left:20px;
    position:absolute;
right:20px;
}
.menu_container {
    width:500px;
    overflow:hidden;
    position:absolute;
    display:none;
    height:100px;
}
#bottom {
    position:absolute;
    margin-top:720px;
    position:absolute;
    left:20px;
    white-space: nowrap;
}
.bottom_container {
    width:500px;
    overflow:hidden;
    position:absolute;
    display:none;
    height:100px;

}
body,td,th {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    color: #000000;

}
body {
    min-width:1024px;
    background-color: #000;
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
}
</style>
</head>

<body>

<div id="menu">
<div class="container">
Text here
</div>

</div>
<div id="bottom">
<div class="container">
Text here
</div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:15:36.300

简单的：

```
body { min-width: 1000px; } 
```

# r - 将包含具有 3 个字符串值的列的 R 数据集拆分为包含 2 个字符串值的 2 个数据集

> ID：15486020
> 
> 赞同：0
> 
> 时间：2013-03-18T20:13:50.993
> 
> 标签：r, dataframe, subset

考虑我是一个 n00b，但我已经在这里搜索了我的特定查询，但我还没有找到答案。我的问题如下。考虑以下代表我的数据集的简化 csv 文件 r_split.csv：

```
id,v1,v2,v3,v4,str
1,2.4,2.4,345.5,234.2,gbbc
2,4.5,2.56,7.45,34.6,ebird
3,3.4,5.6,4.45,6.3,ebird_can 
```

第一行包含标题名称。您可以看到 str 列包含 3 个不同的字符串值，即`gbbc, ebird, ebird_can`. 我的目标是*将这个大数据集分成 2 个数据集*。第一个将仅包含所有 str 值 = `gbbc`，第二个将包含所有 str 值并重`ebird`命名`ebird_can`为`allebird`。

我可以使用以下命令将数据集拆分为 3 个不同的数据集：

```
splitted<-split(rsplit,rsplit$str) 
```

但是，我无法弄清楚如何使用 str 列的 2 个不同值并将它们组合成第三个。有人可以帮帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:28:46.543

首先，确保`str`列不是`factor`. 使用`stringsAsFactors = FALSE`选项内`read.csv(.)`将所有字符串加载为字符而*不是*因子。

其次，可以`subset`在交互式会话期间使用。然而，正如[**这篇文章**](https://stackoverflow.com/questions/9860090/in-r-why-is-better-than-subset)（或[**直接链接到 hadley 的 wiki**](https://github.com/hadley/devtools/wiki/Evaluation)很好地解释的那样，在你的函数中使用它是不明智的。

我建议使用`[`.

```
df1 <- df[df$str == "gbbc", ]
df2 <- df[df$str != "gbbc", ]
df2$str <- "allebird"
> df1
#   id  v1  v2    v3    v4  str
# 1  1 2.4 2.4 345.5 234.2 gbbc
> df2
#   id  v1   v2   v3   v4      str
# 2  2 4.5 2.56 7.45 34.6 allebird
# 3  3 3.4 5.60 4.45  6.3 allebird 
```

或者，如果只有两个值“gbbc”和“allebird”，那么您可以先用“allebird”替换除“gbbc”之外的所有内容，然后，正如您所提到的，使用拆分。

```
df3 <- df
df3$str[df3$str != "gbbc"] <- "allebird"
split(df3, df3$str)
# $allebird
#   id  v1   v2   v3   v4      str
# 2  2 4.5 2.56 7.45 34.6 allebird
# 3  3 3.4 5.60 4.45  6.3 allebird
# 
# $gbbc
#   id  v1  v2    v3    v4  str
# 1  1 2.4 2.4 345.5 234.2 gbbc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:50:49.197

您可以使用该`levels`功能来更改和合并因子的水平。对于您的情况（假设 str 已经是默认级别排序的一个因素），您可以执行以下操作：

```
levels(rsplit$str) <- c('allebird','allebird','gbbc')
splitted<-split(rsplit,rsplit$str) 
```

您可能需要先制作 rsplit 的副本并修改副本而不是原始版本（如果您想保留原始级别的原始版本）。

对于更复杂的示例，您可以使用 、 或 gsubfn 包等工具`grep`来`gsub`创建新的因子水平向量。

# c++ - boost同步客户端错误

> ID：15486022
> 
> 赞同：-1
> 
> 时间：2013-03-18T20:14:00.403
> 
> 标签：c++, linux, boost

我是 boost::asio 库的新手，在尝试这个基本的同步客户端时，它给出了这个错误

```
#include <iostream>
#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <boost/thread.hpp>
#include <boost/shared_ptr.hpp>

using namespace std;

using namespace boost::asio;

int main()
{

    io_service service;
    ip::tcp::endpoint ep( ip::address::from_string("127.0.0.1"), 80);
    ip::tcp::socket sock(service);
    sock.connect(ep);

} 
```

编译时出错，

```
[root@kris server]# g++ -o test1 test1.cpp
tmp/ccnLbhhW.o: In function `__static_initialization_and_destruction_0(int, int)':
test1.cpp:(.text+0x11b): undefined reference to `boost::system::get_system_category()'
test1.cpp:(.text+0x127): undefined reference to `boost::system::get_generic_category()'
test1.cpp:(.text+0x133): undefined reference to `boost::system::get_generic_category()'
test1.cpp:(.text+0x13f): undefined reference to `boost::system::get_generic_category()'
test1.cpp:(.text+0x14b): undefined reference to `boost::system::get_system_category()'
/tmp/ccnLbhhW.o: In function `boost::system::error_code::error_code()':
test1.cpp:(.text._ZN5boost6system10error_codeC2Ev[_ZN5boost6system10error_codeC5Ev]+0x17): undefined reference to `boost::system::get_system_category()'
/tmp/ccnLbhhW.o: In function `boost::asio::error::get_system_category()':
test1.cpp:(.text._ZN5boost4asio5error19get_system_categoryEv[boost::asio::error::get_system_category()]+0x5): undefined reference to `boost::system::get_system_category()'
/tmp/ccnLbhhW.o: In function `boost::asio::detail::posix_thread::~posix_thread()':
test1.cpp:(.text._ZN5boost4asio6detail12posix_threadD2Ev[_ZN5boost4asio6detail12posix_threadD5Ev]+0x26): undefined reference to `pthread_detach'
/tmp/ccnLbhhW.o: In function `boost::asio::detail::posix_thread::join()':
test1.cpp:(.text._ZN5boost4asio6detail12posix_thread4joinEv[boost::asio::detail::posix_thread::join()]+0x2b): undefined reference to `pthread_join'
/tmp/ccnLbhhW.o: In function `boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context>::~posix_tss_ptr()':
test1.cpp:(.text._ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceINS1_13epoll_reactorILb0EEEEEE7contextEED2Ev[_ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceINS1_13epoll_reactorILb0EEEEEE7contextEED5Ev]+0x15): undefined reference to `pthread_key_delete'
/tmp/ccnLbhhW.o: In function `boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context>::posix_tss_ptr()':
test1.cpp:(.text._ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceINS1_13epoll_reactorILb0EEEEEE7contextEEC2Ev[_ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceINS1_13epoll_reactorILb0EEEEEE7contextEEC5Ev]+0x28): undefined reference to `pthread_key_create'
collect2: ld returned 1 exit status 
```

我在 centos 6.3 上使用以下库

```
boost-thread-1.41.0-11.el6_1.2.x86_64
boost-serialization-1.41.0-11.el6_1.2.x86_64
boost-test-1.41.0-11.el6_1.2.x86_64
boost-devel-1.41.0-11.el6_1.2.x86_64
boost-system-1.41.0-11.el6_1.2.x86_64
boost-wave-1.41.0-11.el6_1.2.x86_64
boost-iostreams-1.41.0-11.el6_1.2.x86_64
boost-filesystem-1.41.0-11.el6_1.2.x86_64
boost-python-1.41.0-11.el6_1.2.x86_64
boost-regex-1.41.0-11.el6_1.2.x86_64
boost-program-options-1.41.0-11.el6_1.2.x86_64
boost-date-time-1.41.0-11.el6_1.2.x86_64
boost-signals-1.41.0-11.el6_1.2.x86_64
boost-graph-1.41.0-11.el6_1.2.x86_64
boost-1.41.0-11.el6_1.2.x86_64 
```

有任何想法吗？

更新：

与运行

```
 [root@kris server]# g++ -o test1 test1.cpp -lboost_system 
```

产生此错误：

```
 /tmp/ccwHGnkt.o: In function `boost::asio::detail::posix_thread::~posix_thread()':
    test1.cpp:(.text._ZN5boost4asio6detail12posix_threadD2Ev[_ZN5boost4asio6detail12posix_threadD5Ev]+0x26): undefined reference to `pthread_detach'
    /tmp/ccwHGnkt.o: In function `boost::asio::detail::posix_thread::join()':
    test1.cpp:(.text._ZN5boost4asio6detail12posix_thread4joinEv[boost::asio::detail::posix_thread::join()]+0x2b): undefined reference to `pthread_join'
    /tmp/ccwHGnkt.o: In function `boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context>::~posix_tss_ptr()':
    test1.cpp:(.text._ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceINS1_13epoll_reactorILb0EEEEEE7contextEED2Ev[_ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceINS1_13epoll_reactorILb0EEEEEE7contextEED5Ev]+0x15): undefined reference to `pthread_key_delete'
    /tmp/ccwHGnkt.o: In function `boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service<boost::asio::detail::epoll_reactor<false> > >::context>::posix_tss_ptr()':
    test1.cpp:(.text._ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceINS1_13epoll_reactorILb0EEEEEE7contextEEC2Ev[_ZN5boost4asio6detail13posix_tss_ptrINS1_10call_stackINS1_15task_io_serviceINS1_13epoll_reactorILb0EEEEEE7contextEEC5Ev]+0x28): undefined reference to `pthread_key_create'
    collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:24:26.927

您必须在命令行中添加`-lboost_system`和，如下所示：`-lpthread``g++`

```
g++ -o test1 test1.cpp -lboost_system -lpthread 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:25:10.150

您声称您正在“使用”所有这些库，但您的`g++`行似乎不包含它们。

您必须告诉链接器应该将哪些目标文件和库链接在一起。

# ruby-on-rails - Rails - 使用查询结果作为条件

> ID：15486023
> 
> 赞同：0
> 
> 时间：2013-03-18T20:14:08.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个表单，它根据用户输入的设备名称以及其他一些数据创建一个新设备。我想在我的设备上运行查询以查看他们输入的名称是否已经存在，这样他们就不会创建具有重复名称的设备。无论我如何设置查询来进行搜索，该方法总是声明设备已经存在，即使它不存在。如果没有条件语句，代码会适当地创建设备。有什么想法可以解决这个问题吗？

设备控制器中的方法：

```
def create
 if Device.where('name' => params[:name])
  respond_to do |format|
   format.html { redirect_to :back, notice: 'Cannot create device. It already exists.' }
  end
  else

 #Code that creates device

 #respond_to code

 end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:17:20.050

之所以总是通过，是因为它返回一个空数组，`if []`会返回true。要查看是否存在具有该名称的用户，您可以使用以下命令：

```
Device.where(:name => params[:name]).exists? 
```

但你不应该那样做。您应该使用验证：

```
validates :name, :uniqueness => true 
```

查看指南以获取有关验证的更多信息以及如何使用它们： http: [//guides.rubyonrails.org/active_record_validations_callbacks.html](http://guides.rubyonrails.org/active_record_validations_callbacks.html)

另请参阅第二个答案以获得更详细的解释，这本书很好地解释了这样的内容： [http ://ruby.railstutorial.org/chapters/modeling-users#sec-presence_validation](http://ruby.railstutorial.org/chapters/modeling-users#sec-presence_validation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:17:47.203

您应该使用模型级验证来防止重复数据。

```
class Device < ActiveRecord::Base
  validates_uniqueness_of :name, :message => 'already exists'

...
end 
```

这样，在您的控制器中，您可以根据`save`方法做出决定。

```
@device = params[:device]
respond_to do |format|
  if @device.save
    format.html # successful save
   else
    format.html { render action: 'new' }
   end
end 
```

# .net - 文件上传控制突然不起作用

> ID：15486025
> 
> 赞同：0
> 
> 时间：2013-03-18T20:14:11.627
> 
> 标签：.net, file-upload

我正在编写一个 .net 2010 应用程序。在其中，我有一个标准的文件上传控件。当我单击上传按钮时，它会通过一些代码来显示图像。这是在测试中，所以我只在本地进行，并且运行良好。突然，它不起作用并一直试图访问网络。错误：您没有连接到网络。此外，尽管当我单击“上传”按钮时会发生这种情况，但它不会让我调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:06:32.150

发布您给出错误的代码部分。并检查您存储文件的文件**夹权限。**

# hibernate - 通过 Hibernate 作为 Web 应用程序中的持久层备份 PostgreSql 数据库

> ID：15486029
> 
> 赞同：1
> 
> 时间：2013-03-18T20:14:21.460
> 
> 标签：hibernate, postgresql

我有一个运行使用 PostgreSQL 的 Web 应用程序的 Tomcat Web 服务器。组织的所有手动过程都通过具有作为 Hibernate 的持久层的 Web 应用程序实现自动化。我想为用户提供备份和恢复选项。

备份会以某种方式从数据库中获取所有数据/模式（可能不是模式）并将其压缩并通过网络应用程序将其发送给用户，以允许他们将备份保存在本地计算机上。然后，他们可以选择此备份文件以将数据库恢复到进行备份时的状态。

我们使用 Tomcat 容器，Spring+Hibernate 和 PostgreSql。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:27:56.307

我见过人们将自定义备份例程放在一起。我真的，真的不推荐它。当事情出错时，他们往往会出错。

您最好的选择是使用经过良好测试的工具，这些工具是其他人的代码。IMO 的最佳选择是调用 shell 转义并运行 pg_dump。与您自己获得的相比，这为您提供了相当多的灵活性和更强的健壮性。然后打开文件，并将其发送给客户端。这就是我们用我们自己的持久层和 Perl 对 LedgerSMB 所做的，但在任何其他系统上它应该或多或少相同。

备份很重要。确保备份内部一致的主要代码最好不要保留在内部。

# c# - 使用 webclient 下载 XML 文件时出错

> ID：15486031
> 
> 赞同：1
> 
> 时间：2013-03-18T20:14:24.500
> 
> 标签：c#, webclient

我正在使用此代码从 URl 获取 XML 数据：

```
using (WebClient wc = new WebClient())
{
    wc.Credentials = new NetworkCredential("admin", "admin");
    string xml = wc.DownloadString("http://somedomain.com:8550/epe/postaglist");

    XmlDocument tournamentsXML = new XmlDocument();
    tournamentsXML.LoadXml(xml);

    XmlNodeList TagList = tournamentsXML.GetElementsByTagName("TAG");
    foreach (XmlNode node in TagList)
    {
        XmlElement TagElement = (XmlElement)node;
        string TagID = TagElement.GetElementsByTagName("tagid")[0].InnerText;
        string MAC = TagElement.GetElementsByTagName("mac")[0].InnerText;
        Messagbox.Show(TagID+","+MAC));
    }
} 
```

它工作正常 100%。但是当更改链接以添加这样的查询字符串时：

“ [http://somedomain.com:8550/epe/pos/taglist?fields=posgood](http://somedomain.com:8550/epe/pos/taglist?fields=posgood) ”

它给了我身份验证异常 401 请注意它在 IE 或 firefox 浏览器上工作正常！

我很累，因为从昨天开始仍在尝试解决这个异常，但我不能:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:16:15.117

我不确定这是否只是您的问题中的一个错误，或者它是否在您的代码中。在代码示例中，您尝试获取此 URL：

```
http://somedomain.com:8550/epe/postaglist 
```

但在你下面的讨论中，你有：

```
http://somedomain.com:8550/epe/pos/taglist 
```

无论如何，如果您收到 401 错误，则意味着您必须提供某种凭据。也许该站点需要用户名和密码。您需要考虑[设置](http://msdn.microsoft.com/en-us/library/system.net.webclient.credentials.aspx)`WebClient`.

另请参阅[如何验证 WebClient 请求？](https://stackoverflow.com/q/1883655/56778)，以及各种答案。

# wpf - 数据绑定在 WPF VB.NET 中不起作用

> ID：15486032
> 
> 赞同：0
> 
> 时间：2013-03-18T20:14:28.183
> 
> 标签：wpf, vb.net, data-binding

我一直在尝试处理数据绑定，但无法使其正常工作。有人可以指出我正确的方向吗？

我正在使用 VS2012 并在 WPF/vb.net 中编程。我有一个 xaml UI、一个更新属性的类和运行我的主循环的模块。我正在尝试根据模块中的动态数据更新 UI 中的文本块。

这是来自 UI 的重要 XAML：

```
<Page x:Class="pPage"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
  xmlns:local="clr-namespace:BMI_WPF_v1"
  mc:Ignorable="d" 
  Title="BMI">

<Page.Resources>
    <local:clsItemGUI x:Key="clsitemgui" />
</Page.Resources>

<TextBlock x:FieldModifier="public" x:Name="p_force" Text="{Binding Path=Force, UpdateSourceTrigger=PropertyChanged}" /> 
```

这是我在主模块中调用以尝试更新 GUI 的内容：

```
Dim bmiUI As New clsItemGUI
bmiUI.UpdateForce(currentForce) 
```

这是用于更新 GUI 的类：

```
Imports System.Collections.ObjectModel
Imports System.ComponentModel

Public Class clsItemGUI
Implements INotifyPropertyChanged

Private ForceValue As Double

Sub New()
End Sub

Public Sub UpdateForce(ByVal inputForce As String)
    Me.ForceValue = inputForce
End Sub

Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged

Public Property Force() As Double
    Get
        Return ForceValue
    End Get
    Set(ByVal value As Double)
        ForceValue = value
        OnPropertyChanged("Force")
    End Set
End Property

Protected Sub OnPropertyChanged(ByVal name As String)
    RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(name))
End Sub

End Class 
```

看起来我正在更新 ForceValue，但这并没有触发 UI 上的更新。显然我错过了一些愚蠢的东西，但我还没有偶然发现正确的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:35:06.120

您必须分配`DataContext`给根布局（在我的示例中是`Grid`）：

```
<Grid DataContext="{StaticResource clsitemgui}">
    <Grid.RowDefinitions>
        <RowDefinition Height="30" />
        <RowDefinition Height="30" />
    </Grid.RowDefinitions>

    <TextBlock x:FieldModifier="public" x:Name="p_force" Text="{Binding Path=Force, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />   
    <Button x:Name="btn" Grid.Row="1" Content="Change" Click="Button_Click" />        
</Grid> 
```

或者您可以`Source`在绑定时设置属性，如下所示：

```
<TextBlock x:FieldModifier="public" x:Name="p_force" Text="{Binding Path=Force, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" /> 
```

您的方法也有错误`UpdateForce`，您应该为`Force`属性分配新值而不是`ForceValue`字段。当您将此值分配给字段`OnPropertyChanged`时，它不会被调用。

```
Public Class clsItemGUI
    Implements INotifyPropertyChanged

    Private ForceValue As Double

    Sub New()
        Force = 2.5
    End Sub

    Public Sub UpdateForce(ByVal inputForce As Double)
        Me.Force = inputForce
    End Sub

    Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged

    Public Property Force() As Double
        Get
            Return ForceValue
        End Get
        Set(ByVal value As Double)
            ForceValue = value
            OnPropertyChanged("Force")
        End Set
    End Property

    Protected Sub OnPropertyChanged(ByVal name As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(name))
    End Sub

End Class 
```

当您更新时，您应该对分配为 a 的当前对象执行此操作，`DataContext`因此您应该强制转换此对象并`UpdateForce`在其上调用函数：

```
Private Sub Button_Click(sender As System.Object, e As System.Windows.RoutedEventArgs)
    Dim dt As clsItemGUI
    dt = CType(btn.DataContext, clsItemGUI)
    dt.UpdateForce(5.2)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:30:38.303

尝试这个

在页面资源下添加datacontext

```
<Page.DataContext>

  <local:clsItemGUI/>

</Page.DataContext> 
```

（模式=TwoWay）

```
<TextBlock x:FieldModifier="public" x:Name="p_force" Text="{Binding Path=Force, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" /> 
```

# c - 如何将 main 与 .h 链接。c 文件

> ID：15486038
> 
> 赞同：-1
> 
> 时间：2013-03-18T20:14:49.767
> 
> 标签：c, list

我正在研究双重链表。计算出 .h 和 .c 文件。

```
//.h -file

typedef struct Data_t{
        int d_sz;
        void * data;
    }data_t, * data_ptr_t;

    typedef struct List_t{
            int index;
            struct List_t * next;
            struct List_t * prev;
            data_t * d;
    }list_t, * list_ptr_t; 
```

// .c 文件

```
/**
 * Inserts a new element containing 'data' in 'list' at position 'index'  and returns a pointer to the new list. 
 * If 'index' is 0 or negative, the element is inserted at the start of 'list'. 
 * If 'index' is bigger than the number of elements in 'list', the element is inserted at the end of 'list'.
 */
list_ptr_t list_insert_at_index( list_ptr_t list, data_ptr_t data, int index){

                            // add data to newlist
        return newlist;
    } 
```

// 。主要的

```
int i;
    int value;

    data_ptr_t h;
    list_ptr_t l;
    printf("Enter a value:");
    scanf("%d",&value);

    l = list_insert_at_index( ? , ?, 0); 
```

// 如何让函数工作？这个功能到底是什么？只能是这个功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:23:15.187

`test.c`例如，如果您的 .h和.c 文件的名称是`test.h`，请将其放在 main.cpp 的顶部

```
#include "test.h" 
```

然后就可以使用头文件中定义的所有函数了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:24:09.103

在你的主要你需要

```
#include "YOUR.H" 
```

YOUR.H 是您在帖子顶部显示的 .h 文件的名称。

这将给 YOUR.MAIN.C 一个“承诺”，即当您编译/链接给定的数据类型和函数时将出现。它提供了足够的数据来准备 main 与 YOUR.c 链接

编译时请务必将所有三个文件都传递给编译器。它应该工作。您尝试过的更多细节将有助于获得更具体的答案。

# c# - 以编程方式在 Web 浏览器中打开文本文件

> ID：15486045
> 
> 赞同：2
> 
> 时间：2013-03-18T20:15:51.480
> 
> 标签：c#

我正在使用 C#，我想知道如何以编程方式打开一个 txt 文件，但不是在记事本中，你可以通过

```
 System.Diagnostics.Process.Start(@"C:\\textfile.txt"); 
```

我想打开一个文本文件，除了在浏览器中。如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T20:18:35.033

如果您有特定的浏览器，那么您大概可以启动浏览器进程并将文本文件作为参数传递给该进程。

假设您想要 Internet Explorer..

```
System.Diagnostics.Process.Start(@"iexplore.exe", "\"C:\\textfile.txt\""); 
```

[顺便说一句，这是 MSDN 上Process.Start](http://msdn.microsoft.com/en-us/library/h6ak8zt5.aspx)文档页面上的一个很好的讨论，它几乎可以解决您的确切问题。

当然，如果不是硬编码要启动哪个浏览器，而是想查询操作系统以查找用户的默认浏览器，事情就会变得更有趣。

如果这是您想要做的，那么您可以通过查询 Windows 注册表项来获取默认浏览器的路径：`HKEY_LOCAL_MACHINE\SOFTWARE\Classes\http\shell\open\command`并在调用时将其用作进程的完整路径`Process.Start(..)`

# jquery - jQuery分辨率改变css

> ID：15486049
> 
> 赞同：0
> 
> 时间：2013-03-18T20:16:00.653
> 
> 标签：jquery, css, responsive-design, resolution

我忙于响应式设计，我有这个 js 代码

```
$("#gradient #wrapper #camboxs .cambox:nth-child(5n)").not("#gradient #wrapper #footer .box #camboxs .combox").css("margin-right","0"); 
```

我希望当有人将浏览器的大小调整为小于 980px 或浏览器以 980px 或更小开始时，功能更改为：

```
$("#gradient #wrapper #camboxs .cambox:nth-child(2n)").not("#gradient #wrapper #footer .box #camboxs .combox").css("margin-right","0"); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:21:04.150

你为什么要为此使用javascript？可以用纯css完成：

```
#gradient #wrapper #camboxs .cambox:nth-child(5n):not(#gradient #wrapper #footer .box #camboxs .combox)
{
    margin-right: 0;
} 
```

然后使用媒体查询：

```
@media screen and (max-width: 980px), projection and (max-width: 980px)
{
    /* first undo the general styles */
    #gradient #wrapper #camboxs .cambox:nth-child(5n):not(#gradient #wrapper #footer .box #camboxs .combox)
    {
        margin-right: 10px; /* replace with the original margin */
    }
    #gradient #wrapper #camboxs .cambox:nth-child(2n):not(#gradient #wrapper #footer .box #camboxs .combox)
    {
        margin-right: 0;
    }
} 
```

就像安迪建议的那样，它可以用更少的代码来完成。

而对于后备：要对窗口调整大小做出反应，请在 jQuery 中使用以下内容（未经测试）：

```
$(window).resize(function() {
    if ($(window).width() <= 980) {
        $("#gradient #wrapper #camboxs .cambox:nth-child(5n)").not("#gradient #wrapper #footer .box #camboxs .combox").css("margin-right","");
        $("#gradient #wrapper #camboxs .cambox:nth-child(2n)").not("#gradient #wrapper #footer .box #camboxs .combox").css("margin-right","0");
    } else {
        $("#gradient #wrapper #camboxs .cambox:nth-child(2n)").not("#gradient #wrapper #footer .box #camboxs .combox").css("margin-right","");
        $("#gradient #wrapper #camboxs .cambox:nth-child(5n)").not("#gradient #wrapper #footer .box #camboxs .combox").css("margin-right","0");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:37:30.167

我强烈建议使用媒体查询和 css3 选择器，然后使用 shim 或 polyfill。我们不应该为了一个 10 多年的浏览器而牺牲代码质量和性能。

所以，这里有一个 IE7/8 的媒体查询模拟器：

[http://ie7-js.googlecode.com/svn/version/2.0%28bet​​a3%29/IE8.js](http://ie7-js.googlecode.com/svn/version/2.0%28beta3%29/IE8.js)

这是 IE6/7/8 的 css3 polyfill：

[http://selectivizr.com/](http://selectivizr.com/)

玩得开心！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:20:34.103

```
@media only screen 
and (min-device-width : 980px)  {
    /* Styles */

    $("#gradient #wrapper #camboxs .cambox:nth-child(2n)").not("#gradient #wrapper #footer .box #camboxs .combox").css("margin-right","0");
} 
```

# flash - Ektron Flash 小部件崩溃

> ID：15486051
> 
> 赞同：0
> 
> 时间：2013-03-18T20:16:11.393
> 
> 标签：flash, ektron

我是 Ektron 的新手。团队（我刚刚加入的）一直在使用的项目使用 Page Builder 和 Ektron。但我认为这与我们在使用 Flash Widget 时遇到的问题没有任何关系。但它可能。突然间，没有任何人更改任何代码，flash 小部件就会显示此错误消息。谁能解释为什么？![http://i67.photobucket.com/albums/h292/Athono/Adobe/flashwidget_zpsdb07e04c.png](../Images/2688e2f1038a5190c4b535b392854403.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:01:20.680

您是否检查过您的许可证密钥是否已过期？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:49:54.063

如果您可以发布一些有用的源代码。

仅根据这些信息，我将进行调查：

1.  贵公司是否有提供测验的公司的有效帐户。
2.  如果他们没有获得有效帐户，则有权更新他们的帐户。
3.  如果他们确实有有效的帐户，请检查您是否将正确的凭据传递给提供测验的公司。通常，测验提供者会有一个常见问题解答。检查他们的源代码示例（如果有的话）并将其与 Ektron 生成的 HTML 进行比较。您始终可以寻求测验提供者的帮助，因为他们是一家服务公司，应该很乐意提供帮助。

# c++ - 引用是存储在堆上还是栈上？

> ID：15486052
> 
> 赞同：10
> 
> 时间：2013-03-18T20:16:14.367
> 
> 标签：c++, memory-management, reference

`c`我想知道这段代码中的引用变量是否如：

```
int a = 5;
int & c = a; 
```

从堆或堆栈中分配。任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T20:16:54.953

引用只是一个别名，C++11 标准未指定它是否需要实际存储。

根据 C++11 标准的第 8.3.2/4 段：

> 未指定引用是否需要存储 (3.7)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T20:17:22.490

引用只是别名，不必特别分配到任何地方。该标准没有指定这种细节，甚至根本不需要引用有任何存储空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T20:18:38.573

没关系，引用只是一个常量自动取消引用的指针，没有指针算术，也没有空值或不确定值的选项。

关于重新制定的问题 - 使用引用的方式意味着它们将主要是堆栈分配的。那是在所有非静态场景中，它们的存储不能省略。这就是 C++，一种高性能的编程语言，它忽略了任何没有被使用的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T20:21:52.833

大多数编译器将引用视为受限指针。

# java - Java 错误在 JPanel 中声明 serialVersionUID

> ID：15486053
> 
> 赞同：0
> 
> 时间：2013-03-18T20:16:14.460
> 
> 标签：java, swing, jpanel, jscrollpane, serialversionuid

我收到了这个错误，这让我对这段脚本感到非常沮丧......

```
 JPanel menu = new JPanel() {
            private static final long serialVersionUID = 1L;
            JTextArea output = new JTextArea(5, 30) {

                /**
                 * 
                 */
                private static final long serialVersionUID = 4714318125998709253L;
                this.setEditable(false);
            };
            JScrollPane scrollPane = new JScrollPane(output);

//          public void run() {
//              System.out.println("lol");
//              JPanel menu = this;
//              JButton restart = new JButton("Restart");
//              menu.add(restart);
//          }

        }; 
```

我正在尝试在 JTextArea 输出中声明 setEditable ......有什么想法吗？

编辑：错误是：

```
Exception in thread "AWT-EventQueue-0" java.lang.Error: Unresolved compilation problem: 
    Syntax error on token ";", < expected

    at citadelRPG.Server.createAndShowGUI(Server.java:94)
    at citadelRPG.Server.access$0(Server.java:16)
    at citadelRPG.Server$1.run(Server.java:162)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

出现在声明 serialVersionUID 的分号上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:21:16.317

该声明

```
this.setEditable(false); 
```

需要在方法、静态初始化程序或构造函数中，而不是在匿名实现的类块中`JTextArea` `output`。如果你真的希望在`output`类中有这个实现，你可以覆盖`isEditable`

```
@Override
public boolean isEditable() {
   return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:23:14.333

这`this.setEditable(false);`需要在构造函数或方法的上下文中定义。不能在这些上下文之外调用它。

我觉得人们坚持以这种方式实现类非常奇怪，但这只是我。

您没有向 中添加任何新功能`JPanel`，那么为什么不直接创建它， a `JTextarea`， a`JScrollPane`并一起添加它们。它将使您的代码更具可读性并解决此类愚蠢的错误。

就个人而言，更好的解决方案是......

```
JPanel menu = new JPanel() {
    private static final long serialVersionUID = 1L;
};
JTextArea output = new JTextArea(5, 30) {
    private static final long serialVersionUID = 4714318125998709253L;
};
output.setEditable(false);
JScrollPane scrollPane = new JScrollPane(output);
menu.add(scrollPane); 
```

# c# - 在 C# 中从整数生成声音

> ID：15486055
> 
> 赞同：-2
> 
> 时间：2013-03-18T20:16:17.530
> 
> 标签：c#, integer, soundcard

我想为整数生成声音，例如整数 1 到 10 的音调，然后将其发送到声卡。例如，1 500 Hz 的 440 Hz 音调到 3 的 2 600 Hz 等等……频率不是问题。问题是为许多整数生成音调，然后将这些音调保存到 .wave 文件中，然后播放该波形文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:28:24.587

最简单的方法是设置频率 = 现有的音乐标准。

```
var a = Math.Pow(2.0, 1.0/12.0);
var b = // Your Integer Here;

var f = 440 * Math.Pow(a, b); 
```

这将为您提供半音阶的频率。如果你想要一个主要的规模，你可以使用`b = 0, 2, 4, 5, 7, 9, 11, or 12`

音符公式链接：[http ://www.phy.mtu.edu/~suits/NoteFreqCalcs.html](http://www.phy.mtu.edu/~suits/NoteFreqCalcs.html)

# python - Python：Pyscripter 的可变大小问题

> ID：15486060
> 
> 赞同：0
> 
> 时间：2013-03-18T20:16:21.267
> 
> 标签：python, performance, size, pyscripter

我正在使用 Pyscripter 编写和执行 Python 代码。我有一个场景，我在一个循环中填充一个元组。而且，在程序结束时，我有 10 个这样的变量，每个变量都有 100 万个元素。当我尝试在此之后调用任何变量时，Pyscripter 挂起。

任何提示如何克服这个问题？工作区中变量的大小是否有任何限制？我的磁盘中有足够的空间来支持数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:51:38.640

如果要在循环中添加到元组，最好从列表开始，然后再将其转换为元组：

```
mylist = []
for i in range(million):
    mylist.append(something)
mytup = tuple(mylist) 
```

但是，如果您要追加一百万次，那么您的程序可能只需要时间来填充元组......

# python - python中的简单TCP服务器

> ID：15486064
> 
> 赞同：2
> 
> 时间：2013-03-18T20:16:30.277
> 
> 标签：python, socketserver

新手来了 我正在尝试创建一个简单的 TCP 服务器是使用 SocketServer 处理请求。不知何故，handle() 方法没有被调用。

版本：Linux 上的 2.4.3

以下是相关代码：

```
#!/usr/bin/python -u
import socket;
import SocketServer
import time;
import threading;
class EchoRequestHandler(SocketServer.BaseRequestHandler):

    def handle(self):
        # Echo the back to the client
        data = self.request.recv(1024)
        self.request.send(data)
        return
class MyThreads(threading.Thread):
    def __init__(self):
        self.server = None;
        threading.Thread.__init__(self);
    def run(self):
        if self.server == None:
            address = ('localhost', 40000);
            self.server = SocketServer.TCPServer(address, EchoRequestHandler);
            # The following line partially fixed the problem
            self.server.serve_forever();
if __name__ == '__main__':
    thr = MyThreads();
    thr.setDaemon(True);
    thr.start();
    # Connect to the server
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect(('localhost', 40000))
    # Send the data
    message = 'Hello, world'
    print 'Sending : "%s"' % message
    len_sent = s.send(message)
    # Receive a response
    print 'Sending : "%s"' % message
    response = s.recv(len_sent)
    print 'Received: "%s"' % response 
```

代码正在创建套接字，我可以使用 netstat 从命令行中看到它。但是在调试器（python -m pdb）中，我根本看不到 run() 方法中的代码正在执行。并且 handle() 也没有被调用。所以它连接到套接字，但没有收到任何返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:33:36.483

您需要调用`serve_forever()`以让您的`SocketServer`对象开始侦听连接。`serve_forever()`顾名思义，该方法永远不会返回。鉴于这一事实，您可能希望在线程中调用它以允许其余代码继续执行。例如：

```
class MyThreads(threading.Thread):
    def __init__(self):
        self.server = None;
        threading.Thread.__init__(self);
    def run(self):
        if self.server == None:
            address = ('localhost', 40000);
            self.server = SocketServer.TCPServer(address, EchoRequestHandler);

        self.server.serve_forever() 
```

如果您的客户端代码在套接字侦听之前尝试连接，您可能会在此处遇到竞争条件。可能`time.sleep(...)`会在这里帮助你。

# android - 插入按钮单击

> ID：15486065
> 
> 赞同：3
> 
> 时间：2013-03-18T20:16:32.977
> 
> 标签：android, sqlite

为什么单击我的应用程序会崩溃`button`，如何解决？

单击按钮时，`row`我需要在其中插入一个。`SQLite` `database`它包含两个值，这应该很容易。一个是`date`, 使用`simpledateformatter`. 另一个只是一个位置`ArrayList`。我的代码中没有红线，但是当我按下该`insert`行的按钮时，我的应用程序崩溃了。下面是来自`Java`相互交互的 3 个文件的代码。我有一种预感，问题出在我的 Model.java 中，但它可能不止于此。如果需要更多代码，请询问。

**MainActivity.java**

```
public class MainActivity extends Activity {
final String TAG = "*** DEBUG ***";

public static final String SMOKIN_DATA_FILE = "smokin.dat";
public static final int EDIT_ACTIVITY = 1;

public static Model model = null;
public static MySmokinDatabase mySmokinDatabase;
public static Cursor cursor;
public static SimpleCursorAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    restoreModel();

    if (mySmokinDatabase == null)
        mySmokinDatabase = new MySmokinDatabase(this);

    refreshView();
}

@Override
protected void onResume() {
    super.onResume();

    if (model == null)
        restoreModel();

    refreshView();
}

protected void onPause() {
    super.onPause();

    saveModel();
}

private void refreshView() {
    Spinner spinner = (Spinner) findViewById(R.id.location_spinner);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
             android.R.layout.simple_spinner_item, model.getLocationsArray());

    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinner.setAdapter(adapter);

    SimpleDateFormat sdf = new SimpleDateFormat("E, MMM dd");

    TextView dateText = (TextView) findViewById(R.id.date);
    TextView countText = (TextView) findViewById(R.id.count);
    TextView daysText = (TextView) findViewById(R.id.days);
    TextView totalText = (TextView) findViewById(R.id.total);
    TextView aveText = (TextView) findViewById(R.id.ave);

    GregorianCalendar now = new GregorianCalendar();
    dateText.setText(sdf.format(now.getTime()));
    //get today's count from data in the SQLite table - count entries with today's date
    countText.setText("" + "");
    //mySmokinDatabase.getTodaysCount());

    // Table data
    daysText.setText("" + String.format("%10d", model.getDays()));
    totalText.setText("" + "get total count from data in SQLite table - count total rows");

    if (model.getDays() > 0)
        aveText.setText("calc average from SQLite and model info");

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)  { 
    super.onActivityResult(requestCode, resultCode, data); 
    if (resultCode == RESULT_OK && requestCode == EDIT_ACTIVITY) { 
        saveModel();
    }
}

public void smokedHandler(View view) {
    Spinner spinner = (Spinner) findViewById(R.id.location_spinner);

    String s = spinner.getSelectedItem().toString();
    String d = model.getDates();

    mySmokinDatabase.insertSmokinValues(new Model(s,d));

    cursor = mySmokinDatabase.getAllSmokinCursor();
    adapter.changeCursor(cursor);   

    refreshView();
}

public void restoreModel() {
    // Restore from disk, or start with an empty model
    try {
        ObjectInputStream ois = new ObjectInputStream(
                openFileInput(SMOKIN_DATA_FILE));

        model = (Model) ois.readObject();
        ois.close();
    }
    catch (Exception e){
        Log.v("*** DEBUG ***", "Error writing to file: " + e);
        model = new Model();
    }
}

public void saveModel() {
    Log.v("*** AJ ***", "In onPause");

    try {
        ObjectOutputStream oos = new ObjectOutputStream(
                openFileOutput(SMOKIN_DATA_FILE, Context.MODE_PRIVATE));

        oos.writeObject(model);
        oos.close();
    }
    catch (Exception e){
        Log.v("*** MatchIt ***", "Error writing to file: " + e);
    }
} 
```

**数据库文件**

```
public long insertSmokinValues(Model model) {
    ContentValues newSmokinValues = new ContentValues();
    newSmokinValues.put(KEY_DATE, model.getDates());
    newSmokinValues.put(KEY_LOCATION, model.getLocations());        
    SQLiteDatabase db = smokinDBOpenHelper.getWritableDatabase();

    return db.insert(SmokinDBOpenHelper.INCIDENTS_TABLE, null, newSmokinValues);
}

public Cursor getAllSmokinCursor() {
    SQLiteDatabase db = smokinDBOpenHelper.getWritableDatabase();

    return db.query(SmokinDBOpenHelper.INCIDENTS_TABLE, new String[] 
            {KEY_ID, KEY_LOCATION, KEY_DATE}, null, null, null, null, null);        
} 
```

**模型文件**

```
private ArrayList<String> locations = new ArrayList<String>();
public String [] defaultLocations = {"Home", "Work", "Commuting", "School", "Bar", 
"Restaurant", "Social Gathering", "Other"};

public Model(GregorianCalendar date){
    startDate = date;

    for (String s : this.defaultLocations)
        locations.add(s);
}

public Model(String s, String d) {
    place = s;
    dates = d;      
}

public String getDates() {
    GregorianCalendar gc = new GregorianCalendar();
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm");
    dates = sdf.format(gc.getTime());       

    return dates;
}   

public String getLocations() {
    for (String s : this.locations)
        place = s;
    return place;
} 
```

**根据要求的日志猫：**

```
 03-18 15:52:42.397: W/dalvikvm(676): threadid=1: thread exiting with uncaught  
 exception
 (group=0x40a13300)
 03-18 15:52:42.457: E/AndroidRuntime(676): FATAL EXCEPTION: main
03-18 15:52:42.457: E/AndroidRuntime(676): java.lang.IllegalStateException: Could not    
execute method of the activity
03-18 15:52:42.457: E/AndroidRuntime(676):  at    
android.view.View$1.onClick(View.java:3591)
03-18 15:52:42.457: E/AndroidRuntime(676):  at   
android.view.View.performClick(View.java:4084)
03-18 15:52:42.457: E/AndroidRuntime(676):  at   
android.view.View$PerformClick.run(View.java:16966)
03-18 15:52:42.457: E/AndroidRuntime(676):  at   
android.os.Handler.handleCallback(Handler.java:615)
03-18 15:52:42.457: E/AndroidRuntime(676):  at   
android.os.Handler.dispatchMessage(Handler.java:92)
03-18 15:52:42.457: E/AndroidRuntime(676):  at android.os.Looper.loop(Looper.java:137)
03-18 15:52:42.457: E/AndroidRuntime(676):  at   
android.app.ActivityThread.main(ActivityThread.java:4745)
03-18 15:52:42.457: E/AndroidRuntime(676):  at    
java.lang.reflect.Method.invokeNative(Native Method)
03-18 15:52:42.457: E/AndroidRuntime(676):  at 
java.lang.reflect.Method.invoke(Method.java:511)
03-18 15:52:42.457: E/AndroidRuntime(676):  at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-18 15:52:42.457: E/AndroidRuntime(676):  at    
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-18 15:52:42.457: E/AndroidRuntime(676):  at dalvik.system.NativeStart.main(Native   
Method)
03-18 15:52:42.457: E/AndroidRuntime(676): Caused by: 
java.lang.reflect.InvocationTargetException
03-18 15:52:42.457: E/AndroidRuntime(676):  at   
java.lang.reflect.Method.invokeNative(Native Method)
03-18 15:52:42.457: E/AndroidRuntime(676):  at   
java.lang.reflect.Method.invoke(Method.java:511)
03-18 15:52:42.457: E/AndroidRuntime(676):  at   
android.view.View$1.onClick(View.java:3586)
03-18 15:52:42.457: E/AndroidRuntime(676):  ... 11 more
03-18 15:52:42.457: E/AndroidRuntime(676): Caused by: java.lang.NullPointerException
03-18 15:52:42.457: E/AndroidRuntime(676):  at     
com.example.smokin4ThomasSullivan.MainActivity.smokedHandler(MainActivity.java:119)
03-18 15:52:42.457: E/AndroidRuntime(676):  ... 14 more 
```

> 第 119 行：adapter.changeCursor(cursor); 所涉及的方法发布在我的数据库文件中

一如既往地感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:30:55.120

日志说明了一切：您正在尝试使用`adapter`这一`null`行中的内容：

```
adapter.changeCursor(cursor); 
```

编辑：

正如我所想，你`adapter`在这里声明你的领域：

```
public static SimpleCursorAdapter adapter; 
```

但是你没有初始化它，正如你在 Java 中应该知道的，如果你声明一个没有初始化的字段，它被设置为`null`. 这就是为什么你得到你的错误。

我没有亲自使用过`SimpleCursorAdapter`类，但你可能想看看它在 android 文档中描述的构造函数：http: [//developer.android.com/reference/android/widget/SimpleCursorAdapter.html](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)

所以基本上内部`onCreate()`方法，你应该做这样的事情：

```
adapter = new SimpleCursorAdapter( this, 
                                   R.layout.some_layout,
                                   cursor,
                                   columns,
                                   to,
                                   0 ); 
```

使用的构造函数的参数在我之前发布链接的文档中进行了描述。

您可能还想检查使用以下代码的代码`SimpleCursorAdapter`： [http ://www.mysamplecode.com/2012/07/android-listview-cursoradapter-sqlite.html](http://www.mysamplecode.com/2012/07/android-listview-cursoradapter-sqlite.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:34:02.407

**编辑：** 就像其他人说的那样。`adapter`负责人是正确的`NPE`

但是，通过处理 Sqlite 采用正确的方法也很重要`cursor`。

执行以下操作很重要

**代替**

```
public Cursor getAllSmokinCursor() {
    SQLiteDatabase db = smokinDBOpenHelper.getWritableDatabase();

    return db.query(SmokinDBOpenHelper.INCIDENTS_TABLE, new String[] 
            {KEY_ID, KEY_LOCATION, KEY_DATE}, null, null, null, null, null);        
} 
```

**和**

```
public List<Model> getAllSmokinCursor() {
   List<Model> models= new ArrayList<Model>();
    SQLiteDatabase db = smokinDBOpenHelper.getWritableDatabase();

    Cursor cursor= db.query(SmokinDBOpenHelper.INCIDENTS_TABLE, new String[] 
            {KEY_ID, KEY_LOCATION, KEY_DATE}, null, null, null, null, null);        

 cursor.moveToFirst();
      while (!cursor.isAfterLast()) {
         Model device = fromCursorToObject(cursor);

         models.add(device);
         cursor.moveToNext();
      }
      // Make sure to close the cursor
      cursor.close();
      return models; 
```

}

我在这里使用一个列表，因为您的 requestpublic static Device 没有任何限制

```
fromCursorToObject(Cursor cursor) {
      Model model = new Model();
      int i = 0;
      model.setId(cursor.getLong(i++));
      model.setLocation(cursor.getString(i++));
      model.setDate(cursor.getString(i++));
      return model;
   } 
```

我假设您必须将 getter/setter 添加到您的 Model 类以及 ID 字段（私有 Long id）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:44:06.887

首先你应该在这些函数中关闭数据库：

```
public long insertSmokinValues(Model model) {
    ContentValues newSmokinValues = new ContentValues();
    newSmokinValues.put(KEY_DATE, model.getDates());
    newSmokinValues.put(KEY_LOCATION, model.getLocations());        
    SQLiteDatabase db = smokinDBOpenHelper.getWritableDatabase();

    return db.insert(SmokinDBOpenHelper.INCIDENTS_TABLE, null, newSmokinValues);
}

public Cursor getAllSmokinCursor() {
    SQLiteDatabase db = smokinDBOpenHelper.getWritableDatabase();

    return db.query(SmokinDBOpenHelper.INCIDENTS_TABLE, new String[] 
            {KEY_ID, KEY_LOCATION, KEY_DATE}, null, null, null, null, null);        
} 
```

其次，如果您不想在没有结果的情况下更改适配器中的光标，`gestSmokinCursor`只需检查`moveToFirst`光标是否包含结果，如果不抛出自定义异常，请说明`EmptyCursorException`您在获得光标时可以处理的异常。

您还需要考虑如何关闭游标，因为我不确定您的适配器是否在您更改游标以及活动被破坏时关闭游标，但这也是您的责任。

* * *

如果你`NullPointerException`在这条线上：

```
adapter.changeCursor(cursor); 
```

然后你的适配器很简单`null`，需要启动，这与数据库无关，但是你的代码仍然有很多问题需要解决，否则当人们开始使用应用程序时你会遇到错误和泄漏。

# c# - 清除所有项目

> ID：15486067
> 
> 赞同：0
> 
> 时间：2013-03-18T20:16:37.373
> 
> 标签：c#, .net, winforms, datagridview

如何通过按刷新按钮刷新（重新开始）所有数据？我试过了`item.clear`，`refresh`也没有用。

```
gvAdminResults.Refresh();
cmbCategory.Items.Clear();
cmbUsers.Items.Clear();
cmbTests.Items.Clear();
this.Refresh(); 
```

![在此处输入图像描述](../Images/580afbf4165c522a060048cefefb2469.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:19:16.200

从组合框中清除数据：

```
comboBox.SelectedIndex = -1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:30:58.847

您正在使用我假设的数据绑定。无论您将控件绑定到什么（列表或其他）。您需要清除该列表。

```
List<item> itemsBoundtoControl=new List<item>();
itemsBoundToControl.Clear(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:31:01.903

如果您使用`BindingSource`将数据绑定到您的中`DataGridView`，则可以使用[`.Clear Method`](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.clear.aspx)of`BindingSource`

```
bindingSource.Clear(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T20:25:13.113

清除 DataGridView 行：

```
dataGridView1.Rows.Clear(); 
```

或清除来源：

```
dt_dataGridView1Source.Rows.Clear(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T20:19:05.973

将源设置为空。

```
item.DataSource = null; 
```

我相信这应该有效。

正如 Areks 指出的那样，这仅在使用数据源时才有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T20:42:14.937

对于最终答案，我们需要知道您是如何填充数据网格和组合框的。

我建议你尝试：

```
gvAdminResults.Rows.Clear(); 
```

# linux - 从另一个脚本调用脚本时想摆脱标准输出

> ID：15486069
> 
> 赞同：-1
> 
> 时间：2013-03-18T20:16:37.907
> 
> 标签：linux, bash, shell, unix, scripting

我应该从脚本 1 调用脚本 2，脚本 2 在脚本 2 中调用脚本 3。在脚本 3 中，当我从脚本 1 调用脚本 2 时，会打印一些 STDOUT 语句。如果我调用脚本 2 使用脚本 1的*n*次来自脚本 3 的 STDOUT 语句不断打印*n*次。

如何在不对脚本 2 和脚本 3 进行任何更改的情况下解决此问题？我想在我的脚本 1 中进行更改以解决此问题。请帮助我。

在下面的代码中，我`pri_000_table_truncate.ksh`每次都调用脚本，并且该脚本再次调用另一个名为的脚本`pri_000_functions.ksh`，如果我从脚本 1 进行调用，则每次都会打印相同的消息，如下所示。

示例代码：

```
if [[ ${PRI_TRNC1_FLG} = 'R' ]]
then
    echo
    echo "Truncating Table ${PRI_NZTBL1} of set $i..."
    echo "Calling truncate generic shell script for the table ${PRI_NZTBL1}..."
    echo
    ${PRI_EXE}/pri_000_table_truncate.ksh ${PRI_NZ_BATCH_DB} ${PRI_NZTBL1}

    if [[ $? -ne 0 ]]
    then
        echo
        echo "Truncate Failed for Table ${PRI_NZTBL1}..."
        echo
        exit 1
    else
        echo
        echo "Successfully Truncated Table ${PRI_NZTBL1}..."
        echo
    fi
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:23:50.190

您可以输出到`> /dev/null`，例如

```
#!/bin/bash

# Do stuff
# ...

# Call another script
./script1.sh $arg1 $arg2 > /dev/null 
```

如果您正在调用一个 unix 实用程序，有些可以`-s`选择`--silent`，或类似的东西。

正如我之前的评论者所说，很难阅读您的问题的解释（不会头晕），所以这些只是一些一般性的评论。

# ruby-on-rails - 哪个狮身人面像宝石？

> ID：15486076
> 
> 赞同：0
> 
> 时间：2013-03-18T20:17:02.723
> 
> 标签：ruby-on-rails, sphinx

我正在使用 Sphinx 开发我的第一个 Rails 应用程序，但在使用[Sphinx gem](https://github.com/kpumuk/sphinx)时遇到了麻烦：

```
Sphinx::SphinxInternalError: searchd error: client version is higher than daemon version (client is v.1.29, daemon is v.1.25) 
```

Rails 3.2.13、sphinx gem 2.1.1.3212、Sphinx 2.0.6-release (r3473)。

其他 Sphinx gem 表示一个 sphinx.yml 文件，我没有看到这个 gem。

狮身人面像是否有一致的“最佳”宝石？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:55:10.110

Thinking Sphinx 可能是最常用的。

当前版本是 3.0，在 README 文件中有记录： [https ://github.com/pat/thinking-sphinx/](https://github.com/pat/thinking-sphinx/)

“官方”文档仍然是指旧版本，其工作方式不同： http: [//pat.github.com/ts/en/](http://pat.github.com/ts/en/)

对于新代码，建议使用较新的版本。

# postgresql - 在查询中使用平均值 (PostgreSQL)

> ID：15486078
> 
> 赞同：5
> 
> 时间：2013-03-18T20:17:12.770
> 
> 标签：postgresql, average

我在想出一个查询来从以下模式中找到每个巴士公司使用的巴士的平均年龄时遇到了麻烦：

巴士公司

```
company_id | name
 1           NED
 2           JIM 
```

总线型

```
type_id | date_made
 1        2006-01-26
 2        1999-05-05
 3        2000-09-01 
```

路线

```
route_id | bustype | bus_company
 1         2         1
 2         1         1
 3         1         1
 4         3         2
 5         3         2
 6         1         2
 7         2         2 
```

在此示例中，假设今天是 2013 年 3 月 18 日，NED 的平均巴士车龄为 4246.666 = 4247 天。

整个查询会是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:29:14.027

我现在无法测试，但类似：

```
-- assuming "date_made" is a pg DATE column
--
   SELECT buscompany.name, ROUND(AVG(CURRENT_DATE - date_made))
     FROM buscompany
LEFT JOIN route
          ON route.bus_company = buscompany.company_id
LEFT JOIN bustype
          ON route.bustype = bustype.type_id
 GROUP BY 1 
```

应该做你想做的（tm）。pg中的日期减法给出了天数的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:51:40.223

以下（基于我制作的样本表）给了我平均天数。

```
select extract(day from avg(current_date-birthday)) from stuff; 
```

avg 给你一个间隔而不是天数，所以我做了提取。

如果你*想*处理间隔而不是天数，那么你可以这样做

```
select avg(age(birthday)) from stuff; 
```

# actionscript-3 - 从函数设置 TextField 的 defaultTextFormat

> ID：15486079
> 
> 赞同：0
> 
> 时间：2013-03-18T20:17:17.500
> 
> 标签：actionscript-3, flash, flashdevelop

以为这会奏效...

```
var bFormat:TextFormat, bStartText:TextField, bQuitText:Textfield;

bFormat = getFormat();

bStartText = getText("Start");
bStartText.defaultTextFormat = bFormat;

bQuitText = getText("Quit");
bQuitText.defaultTextFormat = bFormat;

stage.addChild(bStarText);
stage.addChild(bQuitText);

function getFormat():TextFormat {
  var bFormat:TextFormat = new TextFormat();
  bFormat.font = "Arial";
  bFormat.color = 0X000000;
  bFormat.size = 28;
  bFormat.align = "center";
  return bFormat;
}

function getText(sText):TextField {
  var bText:TextField = new TextField();
  bText.text = sText;
  bText.x = -4;
  bText.y = 4;
  return bText;
} 
```

两个文本字段都显示在舞台上，但是我没有得到 getFormat() 中指定的任何格式。我已将 getFormat() 中的代码放在主代码中（而不是作为它自己的函数），它工作正常。我是否错误地通过了它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:24:09.407

`defaultTextFormat`更改之前需要设置`text`。由于您`text`在 getText 中设置 TextField ，因此它没有任何效果。

试试这个 ：

```
var bFormat:TextFormat, bStartText:TextField, bQuitText:Textfield;

bFormat = getFormat();

bStartText = getText("Start",bFormat);

bQuitText = getText("Quit",bFormat);

stage.addChild(bStarText);
stage.addChild(bQuitText);

function getFormat():TextFormat {
  var bFormat:TextFormat = new TextFormat();
  bFormat.font = "Arial";
  bFormat.color = 0X000000;
  bFormat.size = 28;
  bFormat.align = "center";
  return bFormat;
}

function getText(sText:String, tf:TextFormat):TextField {
  var bText:TextField = new TextField();
  bText.defaultTextFormat = tf;
  bText.text = sText;
  bText.x = -4;
  bText.y = 4;
  return bText;
} 
```

如果您想更改已设置的文本字段的格式，您可以`setTextFormat`在`TextField`课堂上使用。

# javascript - 如何获取调用jquery对话框的元素ID

> ID：15486081
> 
> 赞同：0
> 
> 时间：2013-03-18T20:17:22.197
> 
> 标签：javascript, jquery

我正在使用 jquery 对话框在按钮单击时打开弹出窗口。

```
 <script>
        $(document).ready(function(){
            $("#dialog-form").dialog({
                autoOpen : false,
                height : 300,
                width : 350,
                modal : true,
                buttons : {
                    "Add" : function() {

                        $(this).dialog("close");
                    },
                    Cancel : function() {
                        $(this).dialog("close");
                    }
                },
                close : function() {
                    //if button1 is clicked 
                    alert("hello");
                   //if button2 is clicked
                   alert("bye");
                }
            });

        });
        function openWindow(){
            $("#dialog-form").dialog("open");
            }

    </script>
<button id="nameButton" onclick="openWindow()">click</button>
<button id="titleButton" onclick="openWindow()">click</button> 
```

如何在jquery对话框的close方法中获取按钮的id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:24:22.897

如果您要使用 onclick 属性，则需要将一些信息传递给函数，以便您可以访问触发事件的元素。

```
<button id="nameButton" onclick="openWindow(this)">click</button>
<button id="titleButton" onclick="openWindow(this)">click</button> 
```

* * *

```
function openWindow(button){
    alert(button.id);
    $("#dialog-form").dialog("open");
} 
```

不过，如果您改为给按钮一个类并使用 jQuery 绑定事件，那会*“更好” 。*

```
<button class="open-window" id="nameButton">click</button>
<button class="open-window" id="titleButton">click</button> 
```

* * *

```
$(document).ready(function(){
    //... your existing code ...
    $(".open-window").click(function(){
        alert(this.id)
        $("#dialog-form").dialog("open");
    });
}); 
```

接下来，无论您使用两种方法中的哪一种，您都需要将该数据存储在对话框中。

```
$("#dialog-form").dialog("open").data("opener",this.id); 
```

现在您可以使用

```
$("#dialog-form").data("opener") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:28:25.577

或者您可以使用**on**或**bind**或*click*事件，例如：

```
$(#nameButton).bind('click', function(event){});
$(#nameButton).on('click', function(event){});
$(#nameButton).click(function(event){}); 
```

在**事件**参数上，您可以获得所需的所有信息...

# javascript - 查看未找到 expressjs 并在 expressjs 上部署客户端 js 和 css

> ID：15486084
> 
> 赞同：0
> 
> 时间：2013-03-18T20:17:26.353
> 
> 标签：javascript, node.js, view, express

这是我的 js 文件，它与我的 html 文件在同一目录中，我想渲染它。

它能有多难？我不知道我错过了什么。

```
var express = require('express');
var app = express();

app.engine('html',require('ejs').renderFile);
app.set('views', __dirname + '/'); //Edit #1

app.use(express.directory('public'));
app.use(express.static('public'));

app.get('/', function(req, res){
   //res.send('hello world');
   res.render('gapijs.html');
});

app.listen(8090); 
```

在阅读 expressjs 文档后，我使用了 express.directory 和 express.static（我不确定它是否正确）。我已在该目录中安装并牢固链接所有部门。（使用 npm 链接）

**编辑：**我必须按照@Stan 的评论中提到的那样设置视图之后，我在香草节点中得到了与 res.write 相同的效果。

这是我面临的另一个问题，如何部署 gapijs.html 所需的 js 和 css 文件，我是否必须做任何事情来处理每次加载网页时下载的 js？

**编辑 2：**这是我的最终版本的代码（按我想要的方式工作）。

```
var express = require('express');
var app = express();

app.engine('html',require('ejs').renderFile);
app.set('views', __dirname + '/public');
app.use(express.static(__dirname + '/public'));

app.get('/', function(req, res){
   //res.send('hello world');
   res.render('gapijs.html');
});

app.listen(8090); 
```

gapijs.html 在 /public 和 js 文件 public/js 和 css 在 public/css ， js 和 css 文件的放置方式，使用 express 命令生成项目时。

将 html 中的这些文件称为 src="/js/blabla.js"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:43:28.423

您需要将视图设置为如下所示：

```
app.set('views', __dirname + '/'); 
```

您可以将 JS 和 CSS 文件放在**public 目录**的 /js 和 /css 中，并按如下方式引用它们（因为这是约定）：

```
<script src="/js/jquery.js"></script> 
```

这应该可以解决您的问题。祝你好运

# c# - 使用 C# 排列货架位置上的项目

> ID：15486090
> 
> 赞同：2
> 
> 时间：2013-03-18T20:17:41.020
> 
> 标签：c#, linq, permutation, combinations

我正在尝试解决排列问题，但遇到了一些问题。

我有一个可以放置各种物品的“架子”。货架按位置划分，物品有一个“尺寸等级”，表明货架本身占用了多少空间。

我想为 4 个位置的货架生成最大`(1,2,3,4)`所有填充组合，其中 3 个项目`(A,B,C)`的尺寸等级占 1 个位置。`(eg. AAAA, AAAB, AAAC, BBBB, BBBA, ...)`.

下一步，我需要使用占据 2 个位置的项目生成排列。所以我需要生成 2 个位置`(A,B,C)`和 1 个位置`(D,E,F)` `(eg. AAD, AAE, ABD, ...)`

我试过在[这里](http://www.codeproject.com/articles/26050/permutations-combinations-and-variations-using-c-g)使用这个库，但我的解决方案远非很好（而且它不能解决第二个例子）

```
using System;
using System.Linq;
using System.Collections.Generic;
using Facet.Combinatorics;

namespace iCombine
{
    class MainClass
    {
        public static void Main (string[] args)
        {
            char[] inputSet = "ABCABCABCABC".ToCharArray ();
            IList<string> uniques = new List<string>(); 

            var combinations = new Combinations<char> (inputSet, 4, GenerateOption.WithoutRepetition);
            foreach (var combination in combinations) {
                var permutations = new Permutations<char> (combination, GenerateOption.WithoutRepetition);
                foreach (IList<char> permutation in permutations) {     
                    string token = new string (permutation.ToArray(), 0, 4);
                    if (!uniques.Contains(token))
                        uniques.Add(token);
                }
            }                   
        }
    }
} 
```

欢迎任何建议:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:44:30.077

这将为您的第一个示例生成所有 81 个排列：

```
var items = new List<char>{'A', 'B', 'C'};

var perms = from a in items
            from b in items
            from c in items
            from d in items
            select new string(new char[]{a, b, c, d}); 
```

例如

```
AAAA 
AAAB 
AAAC 
AABA 
AABB 
... 
```

这是您的第二个示例的 27 个排列：

```
var items = new List<char>{'A', 'B', 'C'};
var items2 = new List<char> {'D', 'E', 'F'};

var perms = from a in items
            from b in items
            from c in items2
            select new string(new char[]{a, b, c}); 
```

等效的方法语法使用[Enumerable.SelectMany](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)，它将序列的每个元素投影到 an`IEnumerable<T>`并将结果序列展平为一个序列。

所以上面的查询可以写成：

```
var items = new List<char> { 'A', 'B', 'C' };
var items2 = new List<char> { 'D', 'E', 'F' };

var perms = items.SelectMany(a => items, (a, b) => new { a, b })
            .SelectMany(t => items2, (t, c) => new string(new[] { t.a, t.b, c })); 
```

# python - panda3d - 如何重新开始游戏

> ID：15486091
> 
> 赞同：1
> 
> 时间：2013-03-18T20:17:41.990
> 
> 标签：python, application-restart, panda3d

我有一个用 Python 编写的游戏，我使用 Panda3d。现在我想有重启的可能，也就是我想按下一个按钮，结果是再次执行main，就好像游戏的当前实例不存在一样。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:39:55.357

并不真地。Panda3D 并没有真正进行这种抽象，这取决于应用程序开发人员。“重启”的真正含义取决于具体情况；是否要关闭现有窗口然后重新打开一个新窗口？如果不是，那么这意味着您必须保留许多 Panda3D 对象并且不能简单地重新创建 ShowBase 实例。但是你想卸载任何加载到内存中的模型吗？是否要将 UI 对象的几何图形重新发送到显卡？

因此，根据您的特定需求，您必须卸载并删除需要重新启动然后重新创建它们的对象。如果您使用面向对象的方法并正确构建对象，这应该很简单 - 即，您在 Game 对象上实现 unload() 卸载特定于该游戏的内容，然后让对该对象的引用消失（导致它被垃圾收集），并创建一个新的。（当心循环引用！如果你有它们，它们可能会将你的对象的旧实例保留在内存中，即使它们已经超出范围。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-05T12:30:01.633

如果你想重新启动，你必须手动创建一个函数并让它做你需要它做的事情。Panda 网站上有一篇关于这件事的帖子，网址为[https://www.panda3d.org/forums/viewtopic.php?t=11422](https://www.panda3d.org/forums/viewtopic.php?t=11422)

# c# - 非标准字体样式

> ID：15486093
> 
> 赞同：0
> 
> 时间：2013-03-18T20:17:50.140
> 
> 标签：c#, winforms, fonts

如何将 FontStyle 设置为 Condensed Bold ？还是浓缩粗体斜体？FontStyle 属性没有标准值以外的值。

我的确切字体是：Myriad Pro 字体样式：Bold Condensed

如何基于此 truetype 创建字体？

注意：字体为 .OTF OpenType

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:26:24.920

我*认为*这样的事情应该这样做。

```
FontFamily fontFamily = new FontFamily("Condensed Bold");
Font font = new Font(
   fontFamily,
   16,
   FontStyle.Regular,
   GraphicsUnit.Pixel); 
```

列出可用的字体系列（来自评论中的链接）

```
private void PopulateListBoxWithFonts()
{
    listBox1.Width = 200;
    listBox1.Location = new Point(40, 120);
    foreach ( FontFamily oneFontFamily in FontFamily.Families )
    {
        listBox1.Items.Add(oneFontFamily.Name);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:59:39.427

从类似的[答案](https://stackoverflow.com/a/4649685/1218809)：

您不能只使用控制面板中显示的字体名称吗？大多数不是常规、粗体或斜体的字体实际上都有一个“常规”子家族类型。如果您从 Microsoft 下载字体属性扩展，您可以在名称选项卡上看到它。控制面板列出它们的方式和 .Net 了解它们的方式有时会有所不同，因此从 .Net 的角度列出所有字体是个好主意：

```
var installed_fonts = new InstalledFontCollection();
    var families = installed_fonts.Families;
    var allFonts = new List<string>();
    foreach(FontFamily ff in families){
        allFonts.Add(ff.Name);
    }
    allFonts.Sort();
    foreach(String s in allFonts){
        Console.WriteLine(s);
    } 
```

这是一个使用 Franklin Gothic Demi Cond 的示例（在 CP 中被列为“Franklin Gothic Cond Demi”）

```
e.Graphics.DrawString("Test", new Font("Franklin Gothic Demi Cond", 12), new Solid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:26:23.393

使用按位`or`组合 FontStyles

```
FontStyle ItalicBoldUnderline = FontStyle.Italic | FontStyle.Bold | FontStyle.Underline; 
```

# html - 如何使用引导程序“均匀”分布奇数列？

> ID：15486094
> 
> 赞同：3
> 
> 时间：2013-03-18T20:17:52.947
> 
> 标签：html, css, twitter-bootstrap

我必须使用引导响应 css 显示日历的所有工作日（即 7 个​​）均匀分布在 12 个跨度行中。

我试过了

```
<div class ="span12">
 <div class="span2"> Monday </div>
 .......
 ......
 <div class="span2"> Sunday </div>
</div> 
```

这将超过 12 个跨度并将最后一列包装到下一行。

任何人都知道这样做的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:34:56.690

谢谢！我只是增加了 .row-fluid span2 的百分比宽度并将其创建为一个单独的类。有效！

```
.row-fluid .daySpan {
  width: 14.192978723404255%;
  *width: 14.192978723404255%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:23:48.487

您需要使用自己的类而不是网格来设置自定义宽度。我可能会将它与现有的引导网格类结合起来，以引入其边距等。

不要忘记行 div，它提供负的左右边距。

[http://jsfiddle.net/2n8Cx/1](http://jsfiddle.net/2n8Cx/1)（仅适用于在此演示中启用响应式的一个宽度范围。）

```
.span1.spanDays {width: 86px;}

<div class="span12">
  <div class="row">
    <div class="span1 spanDays"> Monday </div>
     .......
     ......
    <div class="span1 spanDays"> Sunday </div>
  </div>
</div> 
```

[http://twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

# php - 使用 JQUERY 发布时值不传递

> ID：15486095
> 
> 赞同：0
> 
> 时间：2013-03-18T20:17:53.960
> 
> 标签：php, jquery, html

发布我的表单时，它不会发布任何值，但是当我使用 GET 时它会发布。

jQuery代码：

```
$('#lagg_till_kund_link').click(function() {
    $('#lagg_till_kund').submit();
    $('#loading').show();
    $.post(
        'skapa.php',
        $(this).serialize(),
        function(data){
        $('#main_content_hoger_hogerspalt').html(data)
        $('#loading').hide()
        }   
    );
    return false; 
}); 
```

简单的模式：

```
<form method="post" id="lagg_till_kund" name="lagg_till_kund">
<input type="text" name="name" />
</form> 
```

在 skapa.php 上执行的代码：

```
 $insert = array();

$qry = "UPDATE kunder SET ";
foreach($_POST as $key => $value) {
    $value = mysql_real_escape_string($value);
    $key = mysql_real_escape_string($key);
    if(!empty($value) and !empty($key)) {
        $insert[] = " ".$key." = {'".$value."'}";
    }
}
$qry.= implode(', ', $insert);

echo $qry; 
```

我找不到为什么这些值不会传递到页面“skapa.php”

我已将代码修改为尽可能简单，以便您帮助我。一整天都在为此苦苦挣扎。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:19:43.643

`$(this).serialize()`可能需要更改为`$('#lagg_till_kund').serialize()`.

# c# - C#提供的事件封装？

> ID：15486096
> 
> 赞同：2
> 
> 时间：2013-03-18T20:17:54.023
> 
> 标签：c#, events

有人可以解释事件如何为访问委托提供封装，而不是您不能使用赋值`=`运算符，而只能使用`+=`and `-=`。我不明白的部分是这样的：

```
public delegate void CarEngineHandler(string msgForCaller);

public CarEngineHandler listOfHandlers; 
```

如果是这样`public`，那么我们可以这样做`listOfHandlers.invoke("hello");`。我明白了，但是事件如何提供封装？

```
public events CarEngineHandler listOfHandlers;

listOfHandlers("hello"); //fire the event 
```

不是随时触发事件并调用代表吗？封装在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:24:50.663

`Events`只能由提供它们的类触发。您可以订阅一个类的公共事件，但不能从不同的类触发它。

有关事件，请参阅[MSDN 。](http://msdn.microsoft.com/en-us/library/8627sbea%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:30:18.547

事件通过允许对事件的响应发生在对象之外来提供封装，而对象仍然不知道该信息。

```
class A
{
    private event Action _event;
    public event Action Event { add { _event += value; } remove { _event -= value; } }
    int counter = 0;
    public void AddOne()
    {
        counter++;
        if (counter > 0)
        {
            OnEvent();
        }
    }
    private void OnEvent()
    {
        if (_event != null)
            _event();
    }
}
class Program
{
    int Main()
    {
        string outsidestring = "THE CLASS HAS NO IDEA WHO I AM";
        A a = new A();

        a.Event += new Action(()=>Console.WriteLine(outsidestring));

        while (true)
        {
            Console.ReadLine();
            a.AddOne();
        }
    }
} 
```

在此示例中，当 A 的计数器达到 10 时，它可以对外部字符串执行某些操作，而无需了解外部字符串的任何信息。

# mysql - 使用关系与不分配关系的 MYSQL 性能

> ID：15486099
> 
> 赞同：4
> 
> 时间：2013-03-18T20:18:05.257
> 
> 标签：mysql

我有一个相当大的数据库，100 多个表。数据库的设计是传统的关系数据库。我在与外键关联的表中有主键。但是，我在实际的 mysql dba 中并没有建立任何关系。我使用 PHP 访问网站的数据，所有查询都将通过将 ON 设置为主键 = 外键的连接语句连接表。关系的知识真的都在我的脑海里，而且我使用了一个非常简单的命名约定。所有的主键都是以PK结尾的tablename，即tablenamePK，所有的外键都是tablenamde，以id结尾，即tablenameID。在创建 SQL 以供 PHP 运行时，很容易看到什么是主键，什么是外键。也就是说，我 我一直在争论我是否应该在我的 MySQL DBA 中真正创建这些关系。这样做会提高性能吗？直到最近，性能才成为一个大问题，现在我希望在考虑升级硬件之前尽可能提高效率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:22:54.690

外键不会获得任何通过在“FK”列上创建普通索引无法实现的性能。也就是说，为了性能，您不一定需要*约束。*

外键约束旨在防止数据异常。

* * *

回复您的评论：

对，索引是为给定 PRIMARY KEY、UNIQUE KEY 或 FOREIGN KEY 约束的列隐式创建的。

索引是否会带来好处与表无关，或者即使它们具有引用其他表的列。它与您运行的查询有关。

例如：

```
CREATE TABLE Departments (ID INT PRIMARY KEY, name VARCHAR(10));

CREATE TABLE Employees (ID INT PRIMARY KEY, name VARCHAR(10), DeptID INT NOT NULL); 
```

显然这些表是相关的，但我们没有定义索引或外键约束。

Employees.DeptID 上的索引将有助于此查询返回培训部门的所有成员。该查询首先按名称查找部门，然后使用它使用索引查找相应的员工。

```
SELECT ... FROM Departments d JOIN Employees e ON d.ID = e.DeptID  
WHERE d.name = 'training'; 
```

但是该索引对于返回特定员工的部门名称的查询没有任何作用。该查询首先按名称查找员工，然后使用它通过主键 id 查找相应的部门。

```
SELECT ... FROM Departments d JOIN Employees e ON d.ID = e.DeptID  
WHERE e.name = 'Bill'; 
```

# cocos2d-iphone - 我如何跟踪印刷机的顺序？

> ID：15486100
> 
> 赞同：0
> 
> 时间：2013-03-18T20:18:05.347
> 
> 标签：cocos2d-iphone, kobold2d

我有一系列闪烁的按钮，完成后用户必须重复此顺序。我想检测是否按下了正确的顺序，或者检测用户按下的顺序是否不正确，（用户必须按照相同的顺序进行）。

我该怎么做呢？我不知道。请尽可能简单地解释一下，我对此很陌生。

PS我正在使用kobold2D。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:22:03.467

创建一个`NSMutableArray`实例变量。当游戏/关卡开始时，您将其清空。当用户点击一个按钮时，您将一些标识符添加到数组中（例如按钮编号或标题，甚至是按钮对象本身）。最后，实现一个将该数组与准备好的数组进行比较的方法（正确的解决方案）。

**编辑：**

这是一个起点。

```
@interface SomeClassWhereYourButtonsAre
// Array to store the tapped buttons' numbers:
@property (nonatomic) NSMutableArray *tappedButtons;
// Array to store the correct solution:
@property (nonatomic) NSArray *solution;
...
@end 
```

```
@implementation SomeClassWhereYourButtonsAre
...
- (void)startGame {
    self.tappedButtons = [[NSMutableArray alloc] init];
    // This will be the correct order for this level:
    self.solution = @[@3, @1, @2, @4];
    // You probably will have to load this from some text or plist file, 
    // and not hardcode it.
}
- (void)buttonTapped:(Button *)b {
    // Assuming your button has an ivar called number of type int:
    [self.tappedButtons addObject:@(b.number)];
    BOOL correct = [self correctSoFar];
    if (!correct) {
        if (self.tappedButtons.count == self.solution.count) {
            // success!
        } else {
            // correct button, but not done yet
    } else {
        // wrong button, game over.
    }
}
- (BOOL)correctSoFar {
    // if he tapped more buttons then the solution requires, he failed.
    if (self.tappedButtons.count > self.solution.count)
        return NO;
    for (int i = 0; i < self.tappedButtons; i++) {
        if (self.tappedButtons[i] != self.solution[i]) {
            return NO;
        }
    }
    return YES;
}
@end 
```

# javascript - 每次创建要部署在 glassfish 上的新 Java EE 包时，如何避免复制整个 dojo 库？

> ID：15486102
> 
> 赞同：1
> 
> 时间：2013-03-18T20:18:08.113
> 
> 标签：javascript, jakarta-ee, dojo, glassfish, cometd

我正在学习彗星编程，使用 cometd 实现和 javascript dojo 库，然后将我的战争文件部署到 GlassFish。每次我创建一个新项目时，我都必须将整个 dojo 库包含到每个 war 文件中，我尝试仅复制 dojo 库中需要的元素，保留相同的路径结构，但它不起作用。

那么，每次创建要部署在 GlassFish 上的新 Java EE 包时，我是否可以避免包含整个 dojo 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:08:46.987

在 GlassFish 中，有一个“备用文档根”的概念，它允许您将应用程序外部的资源映射到其上下文中。在您的 WAR 中，您可以将条目添加到 {sun|glassfish}-web.xml 文件以捕获这些绑定。这样，您就可以将代码放在服务器的中心位置，在 Glassfish 之外，并将其映射到您的每个 WAR。

请注意，这是 GlassFish 特有的，不能移植到其他 Java EE 容器（尽管其他容器可能有类似的机制）。

# assembly - 汇编堆栈指针

> ID：15486104
> 
> 赞同：1
> 
> 时间：2013-03-18T20:18:09.463
> 
> 标签：assembly, x86

堆：

```
0xDDDD
0xCCCC
0xBBBB
0xAAAA 
```

流行斧的意思：

*   0xAAAA 将被放置在 ax 中
*   SS:SP 现在将指向 0xBBBB。

现在，我明白了。

```
0xDDDD
0xCCCC
0xBBBB 
```

我想保存 ax 的价值。

```
push ax.

0xDDDD
0xCCCC
0xBBBB
0xAAAA 
```

我又来了。

```
mov ax, [ss:sp+2] 
```

0xBBBB 将被加载到 ax 中。

在我的函数完成后，我想从堆栈中删除 0xAAAA 和 0xBBBB。首先，我将恢复斧头。

```
pop ax. (Now loaded with 0xAAAA) 
```

如何从堆栈中删除 0xBBBB？我只是简单地“弹出”而不带参数（这存在吗？）还是添加 sp, 2 ？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:26:44.823

只需将堆栈指针调整为指向堆栈中较早的位置，如`add sp, $2`. 语法可能因您使用的汇编程序而异。`$2`旨在表示“立即值 2”。

您可以下载[Intel 64 和 IA-32 架构软件开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)。

（请注意，使用 16 位寄存器相当陈旧。根据您编写的平台，可能需要将堆栈对齐保持为 4 个字节或更多字节的倍数，特别是在调用或从例程返回时。）

# c# - 避免使用单独的线程从 BlockingCollection 获取重复值

> ID：15486105
> 
> 赞同：2
> 
> 时间：2013-03-18T20:18:12.270
> 
> 标签：c#, .net, multithreading, timer, duplicates

我正在从历史数据库接收大约 50 Hz 的数据。我想以 10 Hz 左右的频率将其从另一端流出。为了实现这一点，我生成了两个计时器，一个用于从历史数据库中获取数据（我运行它的速度是发送计时器的两倍）。第二个定时器为 200 毫秒（10 赫兹）。第一个计时器将它获得的每个值都存储在 BlockingCollection 中（我也尝试了 ConcurrentQueue）。由于两个不同的线程读取/写入集合，我无法使用普通的列表/队列。挑战在于它没有给我一个 50Hz 的频率。我希望每次调用都能得到大约 5 个值，但它会给我突发的数据（即有时什么都没有，有时是 15 个）。因此，我将 BlockingCollection 作为发送计时器从中获取数据的缓冲区。发送定时器使用递归的方法来获取列表中间的数据。它检查是否发送了该值，如果已经是（50Hz -> 10Hz），则获取下一个第 5 个值，如果没有发送该值。现在来解决问题；即使我锁定了对象，递归方法有时也会两次发送相同的值。我们已将问题定位为锁定未按预期工作，但我们不知道为什么或如何解决它。

有什么建议么？附加的代码不是真正的代码，但它说明了问题，实际上给你重复的值，虽然不是很频繁。

```
class Program {

    private readonly ConcurrentDictionary<int, BlockingCollection<TestObject>> _pipes = new ConcurrentDictionary<int, BlockingCollection<TestObject>>();
    private const int Interval = 5;

    private Timer inTimer;
    private Timer outTimer;

    static void Main() {
        Program program = new Program();
        program.Run();
        Console.ReadLine();
    }

    private void Run() {
        _pipes[100] = new BlockingCollection<TestObject>();
        _pipes[200] = new BlockingCollection<TestObject>();
        _pipes[300] = new BlockingCollection<TestObject>();

        inTimer = new Timer(InTimer, null, 0, 100);
        Thread.Sleep(1000);
        outTimer = new Timer(OutTimer, null, 0, 200);
    }

    private void OutTimer(object state) {
        foreach (TestObject testObject in GetNotSentTestObjects()) {
            Console.WriteLine("{0};{1};{2}", testObject.PipeId, testObject.Timestamp.ToString("o"), testObject.Value);
        }
    }

    private IEnumerable<TestObject> GetNotSentTestObjects() {
        List<TestObject> testObjects = new List<TestObject>();

        foreach (KeyValuePair<int, BlockingCollection<TestObject>> pipe in _pipes) {
            TestObject testObject = GetLatestTestObjectNotSent(pipe.Key, (pipe.Value.Count / 2));
            if (testObject == null) {
                return null;
            }
            testObjects.Add(testObject);
        }
        return testObjects;
    }

    private TestObject GetLatestTestObjectNotSent(int key, int locationInList) {

        BlockingCollection<TestObject> pipe = _pipes[key];
        TestObject testObject;
        lock (pipe) {
            testObject = pipe.ElementAt(locationInList - 1);

            if (testObject.Sent) {
                int nextLocationInList = locationInList + Interval;
                GetLatestTestObjectNotSent(key, nextLocationInList);
            }
            testObject.Sent = true;
        }
        testObject.PipeId = key;
        return testObject;
    }

    private void InTimer(object sender) {
        Random random = new Random();
        for (int i = 0; i < random.Next(0,20); i++) {
            foreach (KeyValuePair<int, BlockingCollection<TestObject>> pipe in _pipes) {
                pipe.Value.Add(new TestObject());
            }
            i++;
        }
    }
}

internal class TestObject {
    public DateTime Timestamp { get; set; }
    public string Value { get; set; }
    public bool Sent { get; set; }
    public int PipeId;

    public TestObject() {
        Value = Guid.NewGuid().ToString().Substring(0, 8);
        Timestamp = DateTime.Now;
    }
} 
```

注意， Thread.Sleep 是让列表被填充。在我的代码中，我也有一段时间后修剪列表的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:56:19.343

A`BlockingCollection`是一个队列。它不是为随机访问而设计的，尝试随机访问它会给你带来无穷无尽的麻烦。您也没有从队列中删除项目，这意味着最终您将耗尽内存。

您可能遇到的一个问题是，虽然您在使用 访问列表时锁定了列表，`ElementAt`但在添加项目时并没有锁定它。但是锁定并发数据结构的整个想法应该让你重新考虑你的设计。您永远不必锁定并发数据结构。

据我了解，您想挑选每 5 个尚未处理的项目。如果您不想丢弃未处理的项目（即项目 1-4），这将是一个相当困难的问题。如果您要丢弃这些项目，那么只需调用`Take`五次即可：

```
TestObject o;
for (int i = 0; i < 5; ++i)
{
    o = pipe.Take();
}
// You now have the 5th item from the queue
// The other items have been discarded 
```

如果您想保留这些项目以供以后可能的处理，您必须以某种方式将它们添加回队列。但是它们会排到队列的末尾，这意味着您将在处理较旧的项目之前处理较新的项目。

此外，在某些时候你会填满队列，因为生产者添加东西的速度比消耗它们的速度要快。

您需要更多地考虑您希望此应用程序如何工作，或者更好地向我们解释它。您所描述的内容和您发布的代码......令人困惑，我们无法提供好的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:59:44.917

经过大量的抨击，事实证明，当我使用递归方法时，我需要返回......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:33:26.913

同一个线程可以多次获取同一个锁。看这个例子

```
object o = new object();
lock (o) lock (o) Console.WriteLine("Acquired lock two times"); 
```

您应该使用其他同步原语，如 Mutex、Semaphore、AutoResetEvent 等...

# jquery - 如何使用 jquery 获取最后一个通用子节点？

> ID：15486112
> 
> 赞同：11
> 
> 时间：2013-03-18T20:18:50.383
> 
> 标签：jquery, html, css

我有大约 4000 个网站，所有网站的导航 html 都略有不同，但最终子节点始终是基于文本的节点，并且 html 的布局方式并没有真正的统一性。

基于以下html示例，我如何以通用方式获取每个li或a或div的最后一个子节点

```
<!-- want to be able to get each span and its text -->
<ul id="nav">
  <li><a href="#"><span>Menu Item</span></a></li> 
  <li><a href="#"><span>Menu Item</span></a></li>
  <li><a href="#"><span>Menu Item</span></a></li>
</ul>

<!-- want to be able to get each a and its text -->
<ul id="nav">
  <li><a href="#">Menu Item</a></li> 
  <li><a href="#">Menu Item</a></li>
  <li><a href="#">Menu Item</a></li>
</ul>

<!-- want to be able to get each a and its text -->
<div id="nav">
  <div><a href="#">Menu Item</a></div> 
  <div><a href="#">Menu Item</a></div>
  <div><a href="#">Menu Item</a></div>
</div>

<!-- want to be able to get each a and its text -->
<div id="nav">
  <a href="#">Menu Item</a>
  <a href="#">Menu Item</a>
  <a href="#">Menu Item</a>
</div> 
```

这些只是导航在某些站点中实现的一些方式，它们通常都有一个 id 为 nav 的根元素，然后是一组子元素，这些子元素可以有孙子，甚至更远。

我不想为每个选择器编写一个单独的选择器，所以我试图找到一种通用方法来对#nav 中的第一个子元素执行每个操作，然后找到包含某些文本的特定元素的最后一个子元素.

到目前为止，我只设法为每种导航类型编写了需要自定义选择器的任何内容，所以恐怕我没有任何代码可以开始发布。

有谁知道他们将如何使用 jquery 找到这些最终的孩子？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T20:49:16.870

使用单个语句/选择器的最简单方法：

```
$("#nav").children().each(function(i, item) {
    alert($(item).find(':not(:has(*))').text());
}); 
```

JSFiddle：http: [//jsfiddle.net/qUx4A/](http://jsfiddle.net/qUx4A/)

一点解释：

1.  $("#nav").children().each() - 为 #nav 元素中的每个元素做正文（对于每个 li, a, div ....

2.  :has(*) - 选择具有任何子元素的元素

3.  :not(:has(*)) - 2 的负数。（选择没有任何子元素的元素） - 最内部
4.  .text() - 这种最内部元素的文本内容

希望，这就够了，我不确定我能否更准确地解释它。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:40:05.217

试试这个：

```
var container = $('#nav');
var children = container.children();
var element = children.eq(0);
while(children.length) {
    children = children.children();
    if (children.length)
        element = children.eq(0);
}
var elements = container.find(element.get(0).tagName); 
```

它将最深的孩子存储在其中`element`，然后根据找到的选择所有这些孩子`tagName`。它适用于您的所有示例。如果您有相同类型的嵌套元素，它将失败。

**演示**

[先试后买](http://jsfiddle.net/T2gYR/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:43:49.527

这就是我想出的：

```
$('.nav').each(function(){
    console.log('Nav '+$(this).index());
    $(this).children().each(function(){
        var $d = $(this);
        while($d.children().length==1){
            $d = $($d.children()[0]);
        }
        console.log($d.text());
        console.log($d);
        console.log('');
    });
}); 
```

[http://jsfiddle.net/ymjaG/](http://jsfiddle.net/ymjaG/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T20:27:43.703

怎么样的东西：

```
$("#nav").children(":last-child").text(); 
```

[http://jsfiddle.net/RyanWalters/uhN94/](http://jsfiddle.net/RyanWalters/uhN94/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T20:48:28.890

ID***必须***是唯一的。将其更改为一个类并执行以下操作：

```
$('.nav').children(':last-child').text() 
```

# r - R中的GLMNET项目响应理论

> ID：15486113
> 
> 赞同：1
> 
> 时间：2013-03-18T20:18:55.657
> 
> 标签：r, glmnet

我正在尝试使用惩罚回归来拟合 2 参数项目响应模型，作为我正在从事的项目的一部分。为此，我一直在尝试使用 R 中的 glmnet 包。这样做的问题是 glmnet 想要将参数惩罚为零。相反，我想对斜率参数进行惩罚，使其因远离一个而受到惩罚（对于那些熟悉 IRT 的人，我试图让数据来指导是否需要估计辨别参数）。有没有办法在 glmnet 中做到这一点？

可以在[此处](http://onlinelibrary.wiley.com/doi/10.1111/j.1541-0420.2007.00806.x/abstract?deniedAccessCustomisedMessage=&userIsAuthenticated=false)找到类似的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T23:43:01.130

有很多包可以做 IRT。如果您无法使其与 一起使用`glmnet`，请尝试使用不同的方法。您可以在心理测量任务视图中找到一个列表：http: [//cran.r-project.org/web/views/Psychometrics.html](http://cran.r-project.org/web/views/Psychometrics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T19:00:05.033

这可能不像你想的那么优雅，但是 offset 参数可以做到这一点。如果你想惩罚（比如说）变量 w 偏离 1 的系数，只需在 glmnet 调用的参数列表中添加 offset = w ，然后在模型拟合后将 1 添加到 w 的系数。

如果你想惩罚 w1 和 w2 的系数偏离 1，你可以添加 offset = w1 + w2，然后在模型拟合后将 w1 和 w2 的系数都加 1。

# sql - 在同一查询中选择 DISTINCT 和 MAX

> ID：15486131
> 
> 赞同：1
> 
> 时间：2013-03-18T20:19:50.460
> 
> 标签：sql

我有一个包含以下结构的行/数据的表

```
-----------
| SURVEY_ID |
------------
|  1       |
|  2       |
|  2       |
|  3       |
|  4       |
----------- 
```

我想在同一个查询中获取不同的 ID 和最大 ID。我试过

```
select distinct(survey_id) as survey_id , max(survey_id) as current 
from survey_main 
group by survey_id 
```

这似乎没有返回正确的结果。我错过了什么？

编辑：需要的结果

```
        ----------------------
        | 区别| 最大 |
        ----------------------
        | 1 | 4 |
        | 2 | 4 |
        | 3 | 4 |
        | 4 | 4 |
        ----------------------

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:35:21.573

我认为*Itay Moav-Malimovka*的解决方案非常完美，但是如果你真的想要两列，你可以使用....

```
select distinct(survey_id) as identifier, 
       (select max(survey_id) from survey) as "current" 
  from survey_main; 
```

干杯!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T20:26:47.513

如果您在一个查询中计算了所有survey_ids 和最大值，请尝试以下操作：

```
select count(distinct survey_id) as number_of_survey_ids 
     , max(survey_id) as current 
from survey_main 
```

如果你想为每一行添加最大值**并且**你的数据库支持窗口函数，试试这个：

```
select survey_id 
     , max(survey_id) over () as current 
from survey_main 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T20:24:51.693

```
SELECT DISTINCT *
FROM T
ORDER BY SURVEY_ID DESC 
```

第一个结果是 MAX，整个 Dataset 是不同的

# svn - 如何从源代码管理中永久删除文件/文件夹？

> ID：15486132
> 
> 赞同：0
> 
> 时间：2013-03-18T20:19:53.027
> 
> 标签：svn, version-control, coda

我正在尝试从我的站点在 Coda 2 for Mac 下的源代码控制中删除一个文件夹及其文件和子文件夹，并且遇到各种错误。我很欣赏有关如何正确管理此问题的任何指导，因为 Google 搜索似乎只是让一个简单的问题显得更复杂。

*   在站点>“ **/l** ”中创建/发布新目录
*   在 site/l/ > " **index.cfm** "中创建/发布了新文件
*   在 site/l/ > " **_includes** "中创建/发布了新的子目录
*   在 site/l/_includes >“ header.cfm ”中创建/发布**新**文件
*   然后将已提交的**/l/**和**/l/_includes**文件夹添加到源代码管理
*   最后，添加并提交 .cfm 文件到源代码管理

从那时起，我已经编辑并重新发布了这些 .cfm 文件，没有任何问题，但是将它们提交到源代码控制并进行更改一直是个问题。尝试在 Coda 2 中提交或更新时出现以下错误：

**缺少包含工作副本管理区域的 svn 提交失败**

**svn：服务器发送了意外的返回值（405 方法不允许）响应 MKCOL 请求“[此处的 svn 文件夹路径]”**

如何在源代码控制下*完全*删除 /l 文件夹和其中的所有文件，以便重新开始？非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:01:38.923

签出新的工作副本。很可能，问题出在您的工作副本中，而新的工作副本将毫无问题地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:43:51.287

看起来你的工作副本很无聊，首先进行清理，看看你是否可以从那里继续。如果清理后没有继续，请查看您是否可以验证管理区域（不知道如何从 coda 执行此操作）如果仍然无法正常工作，请尝试从 repo 重新结帐。

# timer - Meteor 中的会话变量和时间：在提交一段时间后隐藏表单

> ID：15486135
> 
> 赞同：0
> 
> 时间：2013-03-18T20:20:04.170
> 
> 标签：timer, meteor, session-variables

我有一个表单，我想在提交后为特定用户禁用 X 时间。我知道我必须使用[Timers](http://docs.meteor.com/#timers)和[Session](http://docs.meteor.com/#session)变量，但由于我没有看到任何使用 Timers 在线的示例，我不知道如何实现它。

这是我的提交事件地图：

```
Template.myform.events({
  'submit': function (e, t) {
    e.preventDefault();
    submitme();
    tempmarker.dragging.disable();
  }
}); 
```

我对会话变量有一个更具体的问题：它们有多“安全”？我的意思是，用户可以通过清空本地缓存来重置它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:35:50.500

您可以像正在做的那样在事件处理程序中禁用表单，然后只需设置一个超时，在特定时间后重新启用它：

```
Template.myform.events({
  'submit': function (e, t) {
    e.preventDefault();
    submitme();
    tempmarker.dragging.disable();
    // re-enable after 5s
    Meteor.setTimeout(function() { tempmarker.dragging.enable(); }, 5000);
  }
}); 
```

`Session`在 Meteor 中只是一个由 Meteor 在客户端的内存中管理的对象。它没有被缓存——如果你重新加载页面，Meteor 将再次启动并且你的所有`Session`数据都将重新初始化。使用会话来存储应用程序状态，但构建您的应用程序时，如果我弄乱了控制台中的会话值，它可以自行恢复。

# c# - WP8/C# - 从集合中填充网格？

> ID：15486136
> 
> 赞同：0
> 
> 时间：2013-03-18T20:20:05.493
> 
> 标签：c#, windows-phone-8

我正在创建一个纯粹用于学习目的的音板类型应用程序。我想做的是定义声音对象的集合——我的声音对象包含名称、文件路径和图像属性——并用这些对象填充网格。

是否可以从集合中填充网格？我知道这可以通过列表来完成，但我使用网格以网格格式在 XAML 中布置我的声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:33:46.097

这篇文章展示了如何创建数据的视图模型，并将它们绑定到网格：

**Windows Phone 中的 DataBinding C# 对象**
[http://diggthedrazen.com/2011/07/07/binding-clr-objects-to-your-uiwindows-phone/](http://diggthedrazen.com/2011/07/07/binding-clr-objects-to-your-uiwindows-phone/)

> 在这篇文章中，我们将看到如何将项目集合绑定到 ListBox 并为每个 ListBoxItem 生成简单的模板。我们还将了解 C# 以及如何定义集合以及在绑定数据时应该使用哪些类型的集合。

# java - Gson 2.2.2 Json 为 JsonElement 自定义 JsonWriter 以避免转义字符串？

> ID：15486137
> 
> 赞同：4
> 
> 时间：2013-03-18T20:20:14.350
> 
> 标签：java, json, gson

我有一个用例，其中我有一个预先转义的有效字符串作为 JsonElement 返回。但是，内部使用 JsonWriter 的 JsonElement 将解析字符串以尝试进行字符串转义/字符替换。

请参阅[https://code.google.com/p/google-gson/source/browse/trunk/gson/src/main/java/com/google/gson/stream/JsonWriter.java](https://code.google.com/p/google-gson/source/browse/trunk/gson/src/main/java/com/google/gson/stream/JsonWriter.java)

私有 void string() 方法

出于性能原因，我想避免这样做，因为我的 String 元素已预先转义。

我进行了搜索，发现这个用例很相似： [https ://code.google.com/p/google-gson/issues/detail?id=239](https://code.google.com/p/google-gson/issues/detail?id=239)

尽管上述链接中的解决方案适用于 gson1.5，但 Escaper 类已在最新的 gson (2.2.2) 中删除。

如何扩展 JsonElement（或它内部的 JsonWriter），以便避免特定类型的 JsonWriter 字符串替换开销？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-27T06:39:03.713

这似乎有效。

```
OutputStream rawStream = ...
JsonWriter writer = new JsonWriter(new OutputStreamWriter(rawStream, "UTF-8"));

... /* normal gson/json usage */

// about to write object including a base 64 big byte[]
/* don't using binding API for images, too big, too slow */
String b64 = Base64.encodeToString(blob, Base64.NO_WRAP);
writer.beginObject();
writer.flush();
/* gson.JsonWriter doesn't understand the string is b64 encoded,
   and hence doesn't need escaping, so lets use an ASCII encoder
   for a little while
*/
OutputStreamWriter asciiWriter = new OutputStreamWriter(rawStream, "ASCII");
asciiWriter.write(
    String.format("\"id\": \"%d\", \"raw\": \"", param.id)
);
asciiWriter.write(b64);
asciiWriter.write("\" ");
asciiWriter.flush();
writer.endObject(); 
```

虽然不是“在 API 中”，但它应该继续工作，因为

*   开始一个 JSON 对象是一个已知点（例如，在 { 之后没有要保留的“状态”）
*   结束一个空的 JSON 对象也是一个已知点（'可以放大括号 }）
*   这反过来意味着同时将有效的 JSON 写入 ascii 不需要影响 JSON 写入器的状态。

请注意，我已经对此进行了测试，它有效，并且比使用 JsonWriter.value(String value) 快得多。

# java - 使用普通旧 XML (POX) 创建 Spring Web 服务

> ID：15486140
> 
> 赞同：1
> 
> 时间：2013-03-18T20:20:30.007
> 
> 标签：java, web-services, spring, spring-ws

所以，我正在为一个已经存在的应用程序编写一个 Spring Web Service 来与之交谈。我让服务工作到它将接收请求并对其进行响应的位置，但问题是，应用程序希望响应采用普通旧 XML (POX) 格式。我的响应当前附加了 SOAP 标头，如下所示：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
        <Person>
            <FirstName>John</FirstName>
            <LastName>Smith</LastName>
        </Person>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我需要它返回的是：

```
<Person>
    <FirstName>John</FirstName>
    <LastName>Smith</LastName>
</Person> 
```

根据我的发现，Spring 非常有能力做到这一点，我认为这与`DomPoxMessageFactory`我发现的所有示例都与 Spring WS 的旧版本（如 v1.5）有关。甚至 Spring 发行版中的 POX 样本也是 3 年前编写的。谢谢你的帮助！

编辑：我也在使用 spring-ws v2.1.2。到目前为止，我的代码非常类似于您将在此处找到的代码：http: [//static.springsource.org/spring-ws/sites/2.0/reference/html/tutorial.html](http://static.springsource.org/spring-ws/sites/2.0/reference/html/tutorial.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:04:27.300

您可以实现[EndpointInterceptorAdapter](http://static.springsource.org/spring-ws/sites/2.0/apidocs/org/springframework/ws/server/endpoint/interceptor/EndpointInterceptorAdapter.html)并更改覆盖 handleResponse 的响应。：

```
@Override
public boolean handleResponse(MessageContext messageContext_, Object endpoint_) 
throws IOException {

WebServiceMessage _webServiceMessage = messageContext_.getResponse();
SoapMessage _soapMessage = (SoapMessage) _webServiceMessage;
// modify the content 
```

**但**我不确定您可以在多大程度上修改响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T15:44:51.057

对我来说，我所需要的只是在基于 java 的配置中：

```
@Bean(name = "messageFactory")
public WebServiceMessageFactory messageFactory() {
    return new DomPoxMessageFactory();
} 
```

这意味着 MessageDispatcherServlet 将切换到 POX 而不是默认的 SOAP。

如果您使用基于 XML 的配置，应该这样做：

```
<bean id="messageFactory" class="org.springframework.ws.pox.dom.DomPoxMessageFactory" /> 
```

来自@loshad-vtapkah 的[评论：](https://stackoverflow.com/questions/15486140/creating-a-spring-web-service-using-plain-old-xml-pox/39598468?noredirect=1#comment67648293_39598468)

> 只有在 request.xml 中指定了命名空间时，此修改才有效。对于您提供的链接上指定的案例，将省略命名空间。因此，您需要为 CountryEndpount 设置空命名空间（检查 PayloadRoot 注释）或扩展 DomPoxMessage.createWebServiceMessage() 方法来更新文档节点命名空间。

# java - 如何遍历节点列表并获取子元素？

> ID：15486142
> 
> 赞同：0
> 
> 时间：2013-03-18T20:20:45.187
> 
> 标签：java, xml, xmlnode, nodelist

我有一些这样的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<person>
    <version>1.1</version>
    <lname>xxxx</lname>
    <fname>yyyy</fname>
    <address>
        <city>zzzz</city>
        <state>ffff</state>
        <country>aaaa</country>
    <address>
    <dob>xx-xx-xxxx</dob>
    <familymembers>
        <father>
            <fname>bbbb</fname>
            <lname>dddd</lname>
        </father>
        <mother>
            <fname>zzzz</fname>
            <lname>aaaa</lname>
        </mother>
        <sibling>
            <fname>bbbb</fname>
            <lname>dddd</lname>
        </sibling>
    </familymembers>
</person> 
```

我的要求是应该遍历所有子元素并将其作为键值对放置在地图中，如下所示：

```
persion.version --> 1.1
persion.lname --> xxxx
persion.fname --> yyyy
person.address.city --> zzzz
person.address.state --> ffff
person.address.country --> aaaa
person.familymembers.father.fname --> bbbb
person.familymembers.father.lname --> dddd
person.familymembers.mother.fname --> zzzz
person.familymembers.mother.lname --> aaaa
person.familymembers.sibling.fname --> bbbb
person.familymembers.sibling.lname --> dddd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:46:28.887

使用 jdom 或 dom4j 解析 xml 文件，您可以轻松完成这项工作。

# objective-c - 视图的帧重新定位上的动画与另一个视图重叠

> ID：15486145
> 
> 赞同：0
> 
> 时间：2013-03-18T20:20:49.470
> 
> 标签：objective-c, commitanimations

如果有人可以帮助我找到下一种情况的解决方案，我将不胜感激。

我想将 UIView 的重新定位动画化到一个点到另一个点（我能够做到这一点，请检查下面的代码），但我在中间有另一个 UIView .. 事实上，第二个视图位于视图之后我想搬家。我想要完成的基本上是避免在第二个视图上看到动画。

```
 //second view placed at position x = 100, width = 20, height = 20
    UIView *secondView = [[UIView alloc] initWithFrame:CGRectMake(100, 0, 20, 20)];
    seconView.backgroundColor = [UIColor redColor];
    [self.superview addSubview:secondView];

    //from now on, this code occurs when tapping a button

   //main view placed at position x = 0, width = 100, height = 20
   UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 20)];
   view.backgroundColor = [UIColor yellowColor];

   [self.superview addSubview:view];

   [UIView beginAnimations:@"moveView" context:nil];
   [UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
   [UIView setAnimationDuration:0.7f];
   //main view will be moved to position x = 120, meaning that it will go through the second view.
   subView.frame = CGRectOffset(view.frame, view.frame.size.width + seconView.frame.size.width, 0);

    [UIView commitAnimations]; 
```

我一直在玩 zposition、opaque、opacity、alpha 和 BringToFront 属性，但完全没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:49:00.003

我已经想通了。

我的问题是我有 UIBUtton，所以我将它们放在 UIViews 中，并为第二个视图设置更大的 zposition，并且背景颜色必须是来自超级视图的颜色。

# php - 查询输出数据两次

> ID：15486152
> 
> 赞同：0
> 
> 时间：2013-03-18T20:21:06.130
> 
> 标签：php, mysql, arrays, echo

我有以下片段：

```
<?php
$query = mysql_query("SELECT * FROM users") or die(mysql_error());
echo "<table>";

while ($row = mysql_fetch_array($query))
{
    echo "<tr>";

    foreach($row as $value)
    {
        echo "<td>".$value."</td>";
    }

    echo "</tr>";

}

echo "</table>";?> 
```

我认为，这个片段应该从表中输出每条数据一次。问题是，我得到了两次。所以，例如

> me@email.com me@email.com 乔乔博客博客

为什么它会这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T20:22:26.823

默认情况下，[`mysql_fetch_array`](http://php.net/manual/en/function.mysql-fetch-array.php)同时使用数字和关联 ( `MYSQL_BOTH`)，分别为您提供两个键。

如果你想要数字键，使用

```
while ($row = mysql_fetch_array($query, MYSQL_NUM)) 
```

如果你想要关联数组，请使用：

```
while ($row = mysql_fetch_array($query, MYSQL_ASSOC)) 
```

另请注意，这些`mysql_*`函数已**弃用**，您应该改用 MySQLi 或 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:25:46.440

更改您的代码：

```
while ($row = mysql_fetch_assoc($query)) {
... 
```

并且... mysql_* 函数已弃用，请考虑迁移到 mysqli_* 或 PDO。

在那里，您会发现将一行或所有行提取到数组中的可能性......

*   仅使用数字索引
*   仅具有关联索引
*   两者都有（--在你的情况下是双输出）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:26:41.777

[MySQL 获取数组](http://php.net/manual/en/function.mysql-fetch-array.php)

该函数默认使用`MYSQL_BOTH`它将为您提供一个关联数组和一个编号数组。例如：

桌子：

```
name | emai
joe     joe@email.com 
```

返回的数组将有

```
$row{
    [0] = "joe",
    ['name'] = "joe",
    [1] = "joe@email.com",
    ['email'] = "joe@email.com",
    } 
```

您将不得不使用`MYSQL_ASSOC`or`MYSQL_NUM`作为第二个参数

**注意**：不要使用 MySQL_* 函数，因为它们自 PHP 5.5 起已被弃用。改用 PDO 或 MySQLi_*

# javascript - 何时使用 `#` 符号获取 DOM 元素？

> ID：15486154
> 
> 赞同：0
> 
> 时间：2013-03-18T20:21:09.243
> 
> 标签：javascript, html, dom, getelementbyid

有时我需要得到这样的元素：

```
var object = document.getElementById('ObjectName'); 
```

有时像这样：

```
var object = document.getElementById('#ObjectName'); 
```

他们之间有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T20:22:42.253

不，你看不到

```
var object = document.getElementById('#ObjectName'); 
```

你看不到，因为这意味着元素的 id 以开头，`#`而 HTML4 id 只能[以 "with a letter ([A-Za-z])" 开头](http://www.w3.org/TR/html4/types.html#type-id)。

你看到的是有时人们使用[jQuery](http://jquery.com/)库，其中查询语言允许你使用

```
var elem = $('#objectId'); 
```

将来你会看到越来越多的人使用类似的查询语言和[querySelector](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)或[querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T20:22:48.500

`#`是[CSS 中 ID 选择器的](http://www.w3.org/TR/CSS2/selector.html#id-selectors)一部分。有一些库和方法支持 CSS 选择器来选择元素，例如 jQuery 和原生 DOM 方法[`querySelector`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)和[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll).

但在“传统”的 DOM 方法中，`#`没有特殊含义。*将选择一个字面上*具有 ID`getElementById('#ObjectName')`的元素，即.*`#ObjectName``<div id="#ObjectName">`*

 ** * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-18T20:22:51.323

前者得到一个带有 的元素`id="ObjectName"`。后者获得一个带有 的元素`id="#ObjectName"`。

在[Selector](http://www.w3.org/TR/selectors/)的上下文中（例如，由 CSS 使用，`document.querySelector`但不与 一起使用`getElementById`），该`#`字符表示它后面的文本是一个 id。

`document.querySelector('ObjectName')`（使用类型选择器）会得到`<ObjectName />`（无效的 HTML），而`document.querySelector('#ObjectName')`会得到一个带有`id="ObjectName"`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-18T20:24:19.847

```
'#ObjectName' 
```

JQuery（**编辑：**或其他 JavaScript 库）

```
'ObjectName' 
```

DOM (getElementById)*

# sql-server - 分组和多个所有值？

> ID：15486155
> 
> 赞同：2
> 
> 时间：2013-03-18T20:21:10.117
> 
> 标签：sql-server, sql-server-2008, tsql

实现一组价值观的产品的最佳方式是什么？

```
select Col1, multiple(V) -- returns v1*v2*...*vn
from Table
group by Col1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:23:49.097

[`product()`您可以通过执行以下操作来伪造](http://sqlserverpedia.com/blog/sql-server-bloggers/the-aggregate-function-product/)聚合函数：

```
SELECT Col1, EXP(SUM(LOG(V)))
FROM Table
GROUP BY Col1 
```

为什么这行得通？

举个例子：

```
DECLARE @x INT, @y INT

SET @x = 7
SET @y = 8

-- Both return 4.02535
PRINT LOG(@x * @y)
PRINT LOG(@x) + LOG(@y)

-- Both return 56.
PRINT EXP(LOG(@x) + LOG(@y))
PRINT @x * @y 
```

所以对于对数，`LOG(x * y) = LOG(x) + LOG(y)`...由于我们有一个`SUM()`函数但没有一个`PRODUCT()`函数，如果我们将每个值传递给`LOG()`然后`SUM()`这些结果，它就相当于将每个值相乘然后将结果传递给`LOG()`。

最后，`EXP()`对 执行`SUM()`以反转`LOG()`。

虽然有一些规定可以正常工作......例如每个值都必须大于零。

# .net - 如何参数化 SignalR 路由？

> ID：15486171
> 
> 赞同：0
> 
> 时间：2013-03-18T20:22:35.317
> 
> 标签：.net, url-routing, signalr

我希望能够将 SignalR 路由配置为具有 MVC 样式的路由参数，如下所示：

/{社区}/signalr

这将允许信号器请求与我的应用程序 url 结构的其余部分并行，并使授权更加简单。我怀疑有可能以某种方式调整 Owin 路由来做到这一点，但我并不真正熟悉它。这是可以相当容易地完成的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T02:56:12.960

没有简单的方法来做你所要求的。但是，您可以设置一个`qs`参数。

```
$.connection.hub.qs = { "community" : communityName };
$.connection.hub.start().done(function() { /* ... */ }); 
```

这意味着向 SignalR 发出的每个请求都将附加“&community={community name}”。

在 a`Hub`中，您可以通过以下方式访问社区名称`Context`：

```
Context.QueryString["community"] 
```

# c++ - 使用 sfml 和 open gl 的简单对象加载器

> ID：15486173
> 
> 赞同：1
> 
> 时间：2013-03-18T20:22:36.970
> 
> 标签：c++, opengl, sfml, .obj

我创建了一个 obj 加载器并检查了模型加载器功能是否正常工作。它输出所有相关信息，让我认为这不是我遇到的问题。一切似乎都工作正常，但对象只是没有绘制到 opengl 窗口。

```
glEnableClientState(GL_VERTEX_ARRAY);

// tell OpenGL where the vertices are with glVertexPointer()
glVertexPointer(3, GL_FLOAT, 0, &vertices[0]);

//*************************************************************
// Set color and depth clear value
glClearDepth(1.f);
glClearColor(0.f, 0.f, 0.f,    0.f);

// Enable Z-buffer read and write
glEnable(GL_DEPTH_TEST);
glDepthMask(GL_TRUE);

// Setup a perspective projection
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(90.f, 1.f, 1.f, 500.f); 
```

这就是我认为可能是问题所在。或在这里..

```
if((float)Clock.GetElapsedTime()>REFRESH_RATE){
        // Clear colour and depth buffer
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        //glTranslatef(0.f, 0.f, -50.f);

        //draw the triangles with glDrawArrays() and then with       glDrawElements()
        Clock.Reset();
        glDrawArrays(GL_TRIANGLES, 0, vertices.size()/3);

    } 
```

这是模型加载器功能...

```
bool ModelLoader(string fileName, vector<GLfloat>& vertices, vector<GLushort>& indices, vector<GLfloat>& normals)
GLushort ind1, ind2, ind3; // declaring gl variables and variables
GLfloat vertex[3];
GLushort texel[3];
GLfloat normal[3];
GLuint indvalue = 1;
fstream objectFile;
string dataLine;
stringstream mystream;
GLfloat x, y, z;
vertices.clear();
indices.clear();
vector<GLfloat> localVertices;

for (int i = 0; i < 3; i++)
{
    vertices.push_back(0);
    cout << endl << "Vertices Pushed Back" << endl;
}

for (int i = 0; i < 3; i++)
{
    localVertices.push_back(0);
    cout << endl << "Local Vertices Pushed Back" << endl;
}

objectFile.open("objs/Cube.obj"); 
if (!objectFile.good()) // error checking to see if object file is loaded
    cout<<endl<<"Error: Could not load object "<<endl;

while (!objectFile.eof())
{
    getline(objectFile, dataLine,'\n'); // get line of the file
    mystream.clear(); // clear stream
    mystream.str(dataLine); // stream = dataline
    if (dataLine.empty()) // skip line if empty
    {
        cout << endl << " line is empty: Skipped line" << endl;
    }
    else if (dataLine[0] == 'v' && dataLine[1] == ' ') // if first char is v and second is space
    {
        mystream.ignore(2); // ignore the first two chars
        mystream >> x >> y >> z; // input local vertices to x, y and z
        localVertices.push_back(x); // push back each vertex
        localVertices.push_back(y);
        localVertices.push_back(z);
        printf("\nVertices: %f, %f, %f", x, y, z); // output for debugging
        cout << endl << "Local x, y and z vertices pushed back" << endl;
    }
    else if (dataLine[0] == 'f' && dataLine[1] == ' ') // if the first characted of the line is an f and the second is a space
    {
        cout << endl << "f found" << endl; // output for debugging
        cout << mystream.str() << endl;

        mystream.ignore(2); // ignore first two characters

        for(int i = 0; i < 3; ++i)
        {
            cout << endl << mystream.str()<< endl;

            mystream >> vertex[i]; // put value of mystream into vertex i 
            cout << endl << vertex[i] << endl; // output for debugging 

            mystream.ignore(1);

            if (mystream.peek() == '/') // if the next char = /
            {
                mystream.ignore(1); // ignore that char
            }

            else
            {
                mystream >> texel[i]; // input  value from my stream into texel i
                cout << endl << texel[i] << endl;
                mystream.ignore(1);
            }
            // ****************************** //
            mystream >> normal[i];
            cout << endl << normal[i] << endl;
            // ****************************** //
        }

        vertices.push_back(localVertices[vertex[0]* 3 + 0]); // x value  push back local vertices
        vertices.push_back(localVertices[vertex[0]* 3 + 1]); // y value 
        vertices.push_back(localVertices[vertex[0]* 3 + 2]); // z value 
        vertices.push_back(localVertices[vertex[1]* 3 + 0]); // x value 
        vertices.push_back(localVertices[vertex[1]* 3 + 1]); // y value 
        vertices.push_back(localVertices[vertex[1]* 3 + 2]); // z value 
        vertices.push_back(localVertices[vertex[2]* 3 + 0]); // x value 
        vertices.push_back(localVertices[vertex[2]* 3 + 1]); // y value 
        vertices.push_back(localVertices[vertex[2]* 3 + 2]); // z value 
        indices.push_back(indvalue); ++indvalue;  // push back indvalues 
        indices.push_back(indvalue); ++indvalue;
        indices.push_back(indvalue); ++indvalue;
        cout << endl << "vertices and indices pushed back" << endl;

    }

    mystream.clear(); // clear the stream
}
objectFile.close(); // close the file
cout << endl << "Function complete" << endl;
return true;
} 
```

# php - 访问另一页后保留浏览器滚动位置

> ID：15486174
> 
> 赞同：3
> 
> 时间：2013-03-18T20:22:38.200
> 
> 标签：php, javascript, jquery, ajax

我正在使用 JS、JQuery 和 PHP，试图解决无限滚动问题。问题是，如果您在页面向下滚动很长一段距离并使用 ajax 加载更多页面，然后单击链接转到新页面，使用浏览器时如何自动转到旧页面中的同一位置新页面上的后退按钮？

. 使用 ajax 在滚动时加载新页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-19T17:47:21.533

我对我的问题提出的解决方案是在离开页面之前将每个页面与相关数据一起存储。

保持滚动位置需要以下信息：

*   **页面 ID**（页面唯一）
*   **页面数据**（所有页面的 html，小心过期的数据）
*   **分页页码**（仅当此页面是 Feed 时适用）
*   **当前 X、Y 滚动位置**
*   **时间戳**

加载下一页时，可以使用本地存储存储以前的信息。返回上一页时，在 storage 中查找 PageID。如果存在，则抓取 X 或 Y 坐标并将页面移动到该位置。这需要一些战略思考，因为如果页面是延迟加载（无限滚动）类型的页面或提要，您需要已经拥有数据或准备好根据页面的位置查找数据。

构建这个系统最简单的方法是，如果您的整个站点都是基于 javascript 的并且您使用的是 HTML 5 History Api。防止整页重新加载有助于减轻服务器的一些负担。如果您担心某些过期数据的更新，您可以将页码发送到服务器并获取相应的数据以填写过期内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T21:05:38.320

你可以得到 $(window).scrollTop(); 值，然后将其保存为 php 中名为“pageTop”的变量，并在 DOM 就绪时调用它：

```
$(window).load(function() {
    $(window).scrollTo(pageTop);
}); 
```

让我知道情况如何。

# java - XML 格式未知时的 Java XPath 命名空间

> ID：15486175
> 
> 赞同：0
> 
> 时间：2013-03-18T20:22:38.600
> 
> 标签：java, xpath, namespaces

我已经看过很多关于 Java/XPath 和 Namepsaces 主题的讨论，但我不确定这些问题的答案是否有助于解决我的特定问题。

我有一个获取一些 XML 的程序 - 我不知道预先的格式，但它可能包含名称空间。用户可以提供用于从 XML 中提取特定数据的 xpath 表达式。代码是通用的——我不能在任何命名空间或类似的东西中编译，因为我不知道预先 XML 的格式。

所以 XML 可能看起来像这样：

```
<ns1:item id='myroot' xmlns:ns1='http://www.myplace.com/place'>
    <ns1:category id='cat1'>
        <ns1:item id='item1'>
            <ns1:category id='cat2'></ns1:category>
        </ns1:item>
    </ns1:category>
</ns1:item> 
```

用户输入的 xpath 可能是：

```
/ns1:item[@id='myroot']/ns1:category[@id='cat1'] 
```

但是使用以下代码，我总是什么也得不到（无论我尝试什么 XPath）：

```
public static String evaluate(String xml, String xpathExpression) throws Exception
{
    String result = "";
    InputSource is = new InputSource(new StringReader(xml));
    XPath xPath = XPathFactory.newInstance().newXPath();
    result = xPath.evaluate(xpathExpression, is);
    System.out.println("result=" +result);
} 
```

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:16:15.140

本质上，像

```
/ns1:item[@id='myroot']/ns1:category[@id='cat1'] 
```

除非您知道 ns1 指的是什么，否则它是没有意义的。因此，如果用户以这种形式提供表达式，那么他们还需要告诉您 ns1 的含义。

XPath 3.0（终于）提供了一种定义 XPath 表达式的方法，它不依赖于知道前缀绑定：您可以编写

```
/Q{http://www.myplace.com/place}item[@id='myroot']/Q{http://www.myplace.com/place}category[@id='cat1'] 
```

但是在 1.0 和 2.0 中实现这一点的唯一方法是编写

```
/*[local-name()='item' and namespace-uri()='http://www.myplace.com/place'][@id='myroot']/*[local-name()='category' and namespace-uri()='http://www.myplace.com/place'][@id='cat1'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:52:54.843

“MadProgrammer”的评论帮助我找到了我正在寻找的答案：

```
String result = "";

DocumentBuilderFactory xmlFactory = DocumentBuilderFactory.newInstance();

xmlFactory.setNamespaceAware(false);

DocumentBuilder builder = xmlFactory.newDocumentBuilder();
InputSource is = new InputSource(new StringReader(xml));
Document document = builder.parse(is);
XPath xPath = XPathFactory.newInstance().newXPath();

result = xPath.evaluate(xpathExpression, document);

return result; 
```

谢谢。

# azure - Azure 服务总线通知中心是否与 websockets 和 javascript 一起使用？

> ID：15486176
> 
> 赞同：8
> 
> 时间：2013-03-18T20:22:40.057
> 
> 标签：azure, azureservicebus

我对使用 Azure 服务总线通知中心很感兴趣。然而，我的第一个“客户端”将是一个基于 websocket 的连接到一个带有 Knockout 的 ASP.NET MVC 站点。目前，我正在尝试 SignalR 向客户端推送通知。

但是，如果我可以使用 SB 通知中心，这看起来会容易得多。所有 [示例](http://msdn.microsoft.com/en-us/library/windowsazure/jj927170.aspx)都是 Windows 或 iOS。

可以将 Azure 服务总线通知中心与基于 WebSocket 的 HTML 客户端一起使用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T00:59:19.490

我是 Service Bus 团队的项目经理。没有计划支持 HTML 上的 WebSockets 作为通知中心的输出管道。目前最好的办法是使用 SignalR，它可以使用服务总线进行扩展。

通知中心的哪些特点让您说它比 SignalR 更可取？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T21:00:03.520

我们花了几天时间尝试按照您的描述进行操作，但我们无法让 SignalR/WebSockets 在 Azure Cloud 上运行。SignalR/WebSockets 每次都失败，产生连接失败/重新连接的无限循环。我们能够让 SignalR/LongPolling（不是 WebSockets）在 Azure 云上成功运行。从那以后，我们了解到 Azure Cloud 上的 VM 显然根本不支持 WebSockets。我们的经验表明，您可能无法将基于 WebSocket 的 HTML 客户端与在 Azure 云上运行的 SignalR 一起使用，但您可能可以让 LongPolling 正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-01T23:31:19.570

虽然现在没有支持。由于这些功能请求，此答案可能会在将来更新（顺便标记为“已计划”）。

您还可以将您的投票添加到这些以更快地推动它们： [https ://feedback.azure.com/forums/218849-notification-hubs/suggestions/4621850-add-support-for-azure-notification-hubs-to-推我](https://feedback.azure.com/forums/218849-notification-hubs/suggestions/4621850-add-support-for-azure-notification-hubs-to-push-me)

和这里：

[https://feedback.azure.com/forums/34192--general-feedback/suggestions/32466415-web-socket-support-in-notification-hubs](https://feedback.azure.com/forums/34192--general-feedback/suggestions/32466415-web-socket-support-in-notification-hubs)

# sql - SQL SERVER 2008 表中的自动 CREATED_BY、CREATED_ON、UPDATED_BY、UPDATED_ON 字段（不使用触发器）

> ID：15486181
> 
> 赞同：0
> 
> 时间：2013-03-18T20:22:50.170
> 
> 标签：sql, sql-server-2008, auditing

我正在寻找一种方法来存储不依赖 SQL Server 2008 中的触发器的行被更新、插入、谁插入/更新它（db 用户帐户）的日期/时间。这可能吗？有什么建议么？

# slickgrid - SlickGrid scrollCellIntoView 不垂直滚动

> ID：15486187
> 
> 赞同：0
> 
> 时间：2013-03-18T20:22:56.937
> 
> 标签：slickgrid

根据此处的 SlickGrid 文档：

[https://github.com/mleibman/SlickGrid/wiki/Slick.Grid#wiki-scrollCellIntoView](https://github.com/mleibman/SlickGrid/wiki/Slick.Grid#wiki-scrollCellIntoView)

如果 cell 参数指定的列当前不在视图中，听起来 scrollCellIntoView 方法应该水平和垂直滚动。因此，如果我有一个包含 200 行的网格，并且当前前 50 行可见且第 7 列不可见，则以下方法调用应水平和垂直滚动以将第 90 行单元格 7 处的单元格显示在视图中。

```
mySlickGrid.scrollCellIntoView(90, 6); 
```

但是，看起来此方法仅水平滚动，将列置于视​​图中，而不将行置于视图中。这是一个演示该行为的 jsfiddle：

[http://jsfiddle.net/3hvye/3/](http://jsfiddle.net/3hvye/3/)

有谁知道这是否是预期的行为，一个错误，或者我错过了一些简单的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:40:25.260

`scrollCellIntoView`实际上根本不滚动该行。与 结合使用`scrollRowIntoView`。这是一个疏忽，将得到修复。（将`scrollCellIntoView`a`row`作为参数的原因是它需要 colspan 支持。没有它，SlickGrid 将无法唯一标识单元格。）

# ruby-on-rails - Mongoid 和 Rails 重叠的日期范围

> ID：15486189
> 
> 赞同：1
> 
> 时间：2013-03-18T20:23:01.780
> 
> 标签：ruby-on-rails, ruby, mongoid

我正在做一个为特定属性放置“预订”的项目。为了防止属性被重复预订，我试图返回在给定时间范围内不可用的属性的结果。在我的预订模型中，我有 :check_in 和 :check_out 日期字段。我当前的查询仅返回包含给定范围的日期。

例如：日期 1 = 2013 年 4 月 1 日 日期 2 = 2013 年 4 月 15 日

返回放置在该范围内的所有预订。但是，如果进行了预订，例如在 2013 年 3 月 15 日至 2013 年 4 月 5 日，我也需要它来返回该结果。

这是我当前的查询：

```
bookings = Booking.where(check_in: {'$gte' => params[:check_in].to_date, '$lte' =>   params[:check_out].to_date}, check_out: {'$gte' => params[:check_in].to_date,'$lte' => params[:check_out].to_date}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T18:49:34.280

您要使用的算法是：

```
( start1 <= end2 and start2 <= end1 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T05:18:49.403

我不确定这是否是最优雅的解决方案，但我得到了以下查询来产生预期的结果：

```
bookings = current_user.organization.corporate_bookings.or(check_in: (params[:check_in].to_date..params[:check_out].to_date)).or(check_out: (params[:check_in].to_date..params[:check_out].to_date)).or(check_in: {"$lte" => params[:check_in].to_date}, check_out: {'$gte' => params[:check_out].to_date}) 
```

# php - PHP 代码兼容性

> ID：15486190
> 
> 赞同：0
> 
> 时间：2013-03-18T20:23:12.363
> 
> 标签：php

我想知道是否有人可以提供帮助，因为我不确定在哪里寻找。

我有一个旧站点，它在我几乎无法控制的共享服务器上运行。我有一个在我的其他站点上运行良好的脚本，并希望将其添加到这个较旧的站点，但是它不能正确显示时间。我所有的其他站点都在 PHP 5+ 上运行，但是这是我现在发现运行 PHP 4.4.8 的旧站点上的第一个 php 脚本。

因此，我已将问题缩小到更大脚本中的函数，并认为这就是不兼容的地方。该代码基本上采用提供的数据并将其转换为天、小时、分钟和秒。

```
 function time_left ($e_time) {
  $e_time = strtotime($e_time);
  $e_time = substr($e_time, 0, 10);
  $time_stamp = explode("-", date('n-d-Y-H-i-s', $e_time));
  $e_time = mktime($time_stamp[3], $time_stamp[4], $time_stamp[5], $time_stamp[0], $time_stamp[1], $time_stamp[2]);
  $server_time = time();
  $diff_time = ($e_time - $server_time);
  if ($diff_time < 0) $diff_time = 0;
  unset($time_stamp);

  # get days remaining
  $time_stamp[1] = floor($diff_time/60/60/24);
  if($time_stamp[1] <= 0){$time_stamp[1] = "";} else {$time_stamp[1] .= "d ";}

  # get hours remaining
  $time_stamp[3] = floor(($diff_time - $time_stamp[1]*60*60*24)/60/60);
  if($time_stamp[3] <= 0){$time_stamp[3] = "";} else {$time_stamp[3] .= "h ";}

  # get minutes remaining
  $time_stamp[4] = floor(($diff_time - $time_stamp[1]*60*60*24 - $time_stamp[3]*60*60)/60);
  if($time_stamp[4] <= 0){$time_stamp[4] = "";} else {$time_stamp[4] .= "m ";}

  return $time_stamp[1] . $time_stamp[3] . $time_stamp[4];

} 
```

任何人都可以在上面的代码中发现您认为可能与 PHP 4.4 不兼容的任何内容吗？

目前，如果我回显原始时间数据变量，它会以原始形式显示它，但是当它通过上面的函数时，它什么也不显示。正如我所说，我在运行 PHP 5+ 的服务器上对这种编码没有任何问题

非常感谢您的帮助！

***添加

好的，我想我已经隔离了问题所在，那就是 strtotime

strtotime 得到的原始输入是这样的：2013-03-18T21:38:58.000Z

目前因为脚本在 PHP 4.4 下运行，如果我回显这一点：

$e_time = strtotime($e_time);

它总是返回 -124 的值，但我不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:32:06.367

消除

```
unset($time_stamp); 
```

这条线。

不知道为什么要在之后立即对其进行操作时取消设置它。希望有帮助

# c# - ASP.NET 4.5 SQL Server 2012 部署到 IIS

> ID：15486193
> 
> 赞同：0
> 
> 时间：2013-03-18T20:23:15.627
> 
> 标签：c#, asp.net, iis, sql-server-2012

我的问题是这个错误：

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：50 - 发生本地数据库运行时错误。无法创建自动实例。有关错误详细信息，请参阅 Windows 应用程序事件日志。*

每次打开我在 IIS 中部署的网站时，都会出现错误。这是我第一次部署 ASP.NET 4.5 和 SQL Server 2012。但是当我使用 VS2010 ASP.NET 4.0 和 SQL Server 2008 时没有问题。

希望大家能帮帮我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:26:14.497

```
The server was not found or was not accessible 
```

该错误意味着 sql 服务器不在请求的 IP 地址/端口号。

```
 Verify that the instance name is correct and that 
SQL Server is configured to allow remote connections. 
```

您应该做的第一件事是尝试使用 SQL Management Studio 连接到 sql 服务器。如果失败了，那么你需要找出原因。可能是以下之一：

*   防火墙问题；SQL Browser 服务未运行；
*   SQL Browser 服务配置错误；
*   SQL Server 甚至没有安装在您尝试部署它的位置；
*   您的站点引用了一个甚至无法访问的 SQL 服务器；
*   你的网卡没有插上......

如果它有效，那么您需要使用正确的连接信息更新您的项目。

# c++ - 使用运算符删除动态但仍然存在内存泄漏

> ID：15486204
> 
> 赞同：0
> 
> 时间：2013-03-18T20:24:14.993
> 
> 标签：c++, memory-leaks

我编写了一个代码来计算地图中区域温度的平均值。

在开始时，`initial()`将调用 then `loadtempdata()`then`averagetemp()`和 finally `cleanup()`。

而且我在函数中使用了一个全局指针来指向一个堆动态数组，以便它可以在其他函数中使用。最后，我用`delete[] table`来回收内存，但结果显示我仍然有内存泄漏，我发现它很久了，找不到原因。

为什么还有内存泄漏？

提前谢谢。

```
#include<iostream>
namespace TEST
{
    double *table = 0;
    const double *mtx = 0;
    int n = 0, m = 0;

    void LoadTempData(const double* matrix_row_major, int M, int N){
        table = new double [(M + 1) * (N + 1)];
        mtx = matrix_row_major;
        m = M;
        n = N;
        for(int i = 1; i < M + 1; i ++){
            for(int j = 1; j < N + 1; j ++){
                table[j + i * (N + 1)] = matrix_row_major[(j - 1) + (i - 1) * N]
                + table[j - 1 + i * (N + 1)]
                + table[j + (i - 1) * (N + 1)]
                - table[j - 1 + (i - 1) * (N + 1)];
            }
        }
    }
    double RegionAvgTemp(int y1, int x1, int y2, int x2){
        if(y1 == y2){
        return (table[x2 + 1 + (y2 + 1) * (n + 1)]
        - table[x2 + 1 + (y2 - 1 + 1) * (n + 1)]
        - table[x1 - 1 + 1 + (y1 + 1) * (n + 1)]
        + table[x1 - 1 + 1 + (y1 - 1 + 1) * (n + 1)]) / (x2 - x1 + 1);
        }
        else if(x1 == x2){
        return (table[x2 + 1 + (y2 + 1) * (n + 1)]
        - table[x1 + 1 + (y1 - 1 + 1) * (n + 1)]
        - table[x2 - 1 + 1 + (y2 + 1) * (n + 1)]
        + table[x1 - 1 + 1 + (y1 - 1 + 1) * (n + 1)]) / (y2 - y1 + 1);
        }
        else if ((y1 == y2) && (x1 == x2)){
            return mtx[x1 + y1 * n];
        }
        else{
        return (table[x2 + 1 + (y2 + 1) * (n + 1)]
        + table[x1 - 1 + 1 + (y1 - 1 + 1) * (n + 1)]
        - table[x2 + 1 + (y1 - 1 + 1) * (n + 1)]
        - table[x1 - 1 + 1 + (y2 + 1) * (n + 1)]) / ((y2 - y1 + 1) * (x2 - x1 + 1));
        }
        return 0;
    }

    void Init()
    {

    }

    void Cleanup()
    {
        delete[] table;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:41:13.200

在调用 Cleanup() 之前，您或法官系统是否有可能多次调用 LoadTempData？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:44:24.977

根据您的前提条件，我能想到的内存泄漏的唯一原因如下：多次调用`LoadTempData`. `LoadTempData`您应该在函数的开头添加以下代码：

```
if (table != 0)
    Cleanup(); 
```

否则 2 次调用`LoadTempData`将导致第一个数据指针被简单地覆盖而不实际释放它。

# sql - 合并多个表

> ID：15486208
> 
> 赞同：1
> 
> 时间：2013-03-18T20:24:30.623
> 
> 标签：sql, postgresql, full-outer-join

假设有以下三个 PostgreSQL 表要与公共 ID 列合并。

```
table A  
ID V1
2  100
3  200
4  250

table B
ID V2
1  200
3  140

table C
ID V3
2  90
3  100
4  10
5  200 
```

我想将这三个表合并如下：

```
merged table
ID V1   V2   V3
1       200  
2  100       90
3  200  140  100
4  250       10
5            200 
```

我感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:33:48.083

```
 select A.*,B.V2,C.V3
    from 
    A 
    full outer join B on A.id = B.id
    full outer join C on C.id = coalesce(A.id,B.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:40:37.823

由于您只希望 id 列在结果中出现一次，因此显而易见的选择是与`USING`子句等值连接：

```
SELECT id, v1, v2, v3
FROM   a 
FULL OUTER JOIN b USING (id)
FULL OUTER JOIN c USING (id) 
```

这样你也根本不需要`COALESCE`- 这很快就会被很多桌子弄得一团糟。

[**-> SQLfiddle 演示**](http://www.sqlfiddle.com/#!1/a22a1/1)

# ruby-on-rails - 如何将变量变成Rails中的按钮

> ID：15486209
> 
> 赞同：0
> 
> 时间：2013-03-18T20:24:39.023
> 
> 标签：ruby-on-rails, button

在我的代码中，我有一个变量`<%= phone_number_link(@user.wphone) %>`，我想从中创建一个更大的可点击按钮。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:26:56.093

您可以添加一个 CSS 类来设置元素的样式。

```
<%= link_to phone_number_link(@user.wphone), class: "button" %> 
```

# jtextarea - 从 JTextArea 获取文本时如何删除断线

> ID：15486216
> 
> 赞同：0
> 
> 时间：2013-03-18T20:24:54.080
> 
> 标签：jtextarea

我目前正在构建一个即时通讯程序，一旦关闭聊天框，聊天历史就会存储到数据库中。我实现了一种方法，该方法可以从聊天框中检索所有文本，然后将其发送到执行整个处理的服务器。聊天框包含一个 JTextArea，其中包含两个用户进行过的所有聊天，但是每当我使用 getText() 方法时，它都会带回整个聊天，包括断线，例如：-

Guy1：你好 Guy2：你好 Guy1：这不是一个糟糕的例子 Guy2：是的，我知道

我设置输出流的方式是使用 Print Writer，因此无论何时我想通​​过它发送此消息都必须作为字符串发送。但是，我似乎无法将整个对话设置为字符串变量，它只返回对话的第一句。事后看来，我应该使用 ObjectOutputStreams，因为它会使生活更轻松，但我只是发现使用打印编写器更容易使用。有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T19:08:51.530

尝试使用 JTextArea 具有的内置编写器。所有 JTextComponents 都有一个内置的 .write() 方法。

[JTextComponent.write()](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#write%28java.io.Writer%29)

# c# - 模拟框架如何工作？

> ID：15486217
> 
> 赞同：9
> 
> 时间：2013-03-18T20:24:55.007
> 
> 标签：c#, mocking, implementation

大多数模拟框架只能模拟接口，有些可以模拟类的虚拟方法。一些 Java 模拟框架甚至能够模拟静态类。

例如犀牛模拟：

```
var mock = MockRepository.GenerateMock<..>(); 
```

生成模拟方法中有什么“魔法”？C# 模拟框架不允许模拟静态类有什么原因吗？或者这只是一个“设计选择”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T20:33:37.673

研究这些框架的源代码并自己找到答案实际上是非常有趣和令人着迷的。[Rhino Mocks](https://github.com/ayende/rhino-mocks)以及[Moq](https://github.com/Moq/moq)和[许多其他](https://stackoverflow.com/questions/37359/what-c-sharp-mocking-framework-to-use)软件都是开源的。我肯定会建议潜入其中之一。

至于内部实现（从[这里](http://codevanced.net/post/Touching-a-hot-iron-Rhino-Mocks.aspx)）：

> 但是，该框架不能模拟非虚拟方法，因此我们需要将 TouchIron 方法设为虚拟。原因很深：Rhino Mocks 使用[Castle Dynamic Proxy](http://www.castleproject.org/projects/dynamicproxy/)来处理代理它需要模拟的类型，而 Dynamic Proxy 无法拦截对非虚拟、非抽象方法的调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T20:52:20.540

大多数开源模拟框架都使用[Castle Windsor 的动态代理](http://www.castleproject.org/projects/dynamicproxy/)在运行时自动生成一个类型，该类型可以通过预期的行为进行编程。这就是为什么大多数这些框架都需要一个接口或一个抽象类的原因——它们无法模拟任何不是虚拟方法的东西。

还有其他（商业）模拟框架确实可以模拟静态和常规（密封）类，包括基于非托管[CLR Profiler API](http://msdn.microsoft.com/en-us/magazine/cc300553.aspx)的 CLR 类型。基本上，模拟框架充当分析器，并且能够在 JIT 编译之前修改内存中的 MSIL 指令。这就是它能够用预定义值替换任何方法的主体的方式。其中一些框架是免费的*（Microsoft Fakes，Visual Studio 2012 Ultimate 的一部分），另一些是付费产品，例如[Typemock](http://www.typemock.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:36:33.630

几乎所有的 .NET 模拟框架都利用了[Castle Windsor 的动态代理](http://www.castleproject.org/projects/dynamicproxy/)功能。我会建议通过其中一些。

# ruby-on-rails - 如何避免 devise_invitable 发送确认电子邮件？

> ID：15486218
> 
> 赞同：2
> 
> 时间：2013-03-18T20:25:01.443
> 
> 标签：ruby-on-rails, devise, devise-confirmable, devise-invitable

从文档中我认为它不应该发送确认电子邮件，但它正在这样做。

这是我对邀请动作的设置：

```
class Users::InvitationsController < Devise::InvitationsController

def multiple_create
    if params[:multiple_emails].blank?
        build_resource
        render :new, notice: "something went wrong"
    else
        params[:multiple_emails].each do |email|
            User.invite!({email: email}, current_user) # current_user will be set as invited_by
        end
        if current_user.errors.empty?
            set_flash_message :notice, :send_instructions, :email => params[:multiple_emails]
            respond_with current_user, :location => after_invite_path_for(current_user)
        else
            respond_with_navigational(current_user) { render :new }
        end
    end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-04-30T09:14:26.497

对于必须`:confirmable`用于用户注册并希望避免发送带有邀请的确认信的情况：

```
class User < ApplicationRecord
  after_create :skip_confirmation_notification!, unless: Proc.new { self.invitation_token.nil? }
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T22:45:51.413

为避免设计确认邮件，您必须`:confirmable`从用户模型中排除选项。

例如，更改：

```
 class User  
   devise :registerable, :confirmable
 end 
```

到：

```
 class User  
   devise :registerable
 end 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-19T20:33:24.477

[github](https://github.com/scambra/devise_invitable)上 devise_invitable repo 的文档非常清楚如何跳过发送邀请电子邮件。查看**Usage**下的第二个代码片段，它前面有以下文本：

> 如果要创建邀请但不发送，可以将 skip_invitation 设置为 true。

# sharepoint - 无法更新 Sharepoint 列表。回发未定义？

> ID：15486226
> 
> 赞同：0
> 
> 时间：2013-03-18T20:25:26.473
> 
> 标签：sharepoint, webforms, postback

我们最近将 2007 内容数据库升级到 SharePoint 2010，现在我们无法保存列表项。当我打开 IE 开发者工具时，我看到了错误：

SCRIPT5009：“WebForm_PostBackOptions”未定义

有人熟悉这个或知道解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:26:55.547

我想到了。有一个 HTTP 重定向到与我们的备用访问映射相关联的站点根目录。我删除了这个重定向，一切正常，没有 404。这一定是影响了我们的相对 URL

# url-rewriting - IIRF 重定向

> ID：15486227
> 
> 赞同：0
> 
> 时间：2013-03-18T20:25:36.600
> 
> 标签：url-rewriting, iirf

我只是想弄清楚下面的代码块对 URL 做了什么，这样我就可以找到它处理的文件。谁能帮我吗？

```
RewriteCond %{HTTP_URL}             !/*.deploy?(.*)                                       [I]
RewriteCond %{HTTP_URL}             !/*.manifest?(.*)                                       [I]
RewriteCond %{HTTP_URL}             !/Webresource.axd?(.*)                                       [I]
RewriteCond %{HTTP_URL}             !/Trace.axd(.*)                                              [I]
RewriteCond %{REQUEST_FILENAME}     !-d
RewriteCond %{REQUEST_FILENAME}     !-f
RewriteRule ^(.*)$                    /Default.aspx?404;http://%{HTTP_HOST}$1                    [U,L] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:03:58.470

前 6 行是必须满足的**条件，才能执行包含重写****规则**的最后一行。

这意味着：如果 URL 确实匹配前 4 个条件（意思是：*不*匹配 后的前 4 个正则表达式`!`），*不是*目录*也不*是文件，则将 URL 附加到`default.aspx?404;http://`并返回该页面。

您处理的文件是`Default.aspx`.

# java - 用俄罗斯方块填充整个二维数组（俄罗斯方块板），没有剩余空间（Java）

> ID：15486229
> 
> 赞同：4
> 
> 时间：2013-03-18T20:25:40.643
> 
> 标签：java, arrays, 2d, fill, tetris

假设我有一个 2D int 数组..

```
int[][] board = new int[10][20];

public void initBoard()
{
    for(int r = 0; r < 10; r++)
        for(int c = 0; c < 20; c++)
            board[r][c] = 0;
} 
```

0 表示没有棋子 棋子用 1-7 表示；

1 - Z 形

2 - S 形

3 - 线条形状

4 - T 形

5 - 盒子形状

6 - L 形

7 - 向后 L 形

用随机形状填充整个数组并且没有剩余空间的最佳方法是什么。

注意：我的游戏可以运行，我只是在尝试让它适应不同的东西，同时仍在使用俄罗斯方块游戏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:34:27.203

这实际上是您要问的一个非常复杂的问题。在计算机科学中，它被称为[打包问题](http://en.wikipedia.org/wiki/Packing_problem)，并且有许多可能的算法和可能的方法，具体取决于您想要完成的确切性质。

在一般情况下，这个问题很难，真的很难，实际上，找到一个最优的一般解决方案是 NP-hard 的。有关更多信息，请查看[麻省理工学院 Demaine 等人](http://erikdemaine.org/papers/Tetris_COCOON2003/paper.pdf)的研究论文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:34:34.027

这并不像看起来那么容易。事实上，这是一个[NP-hard 问题](http://en.wikipedia.org/wiki/NP-hard)。[包装矩形是类似](https://stackoverflow.com/questions/2570268/how-do-i-pack-multiple-rectangles-in-a-2d-box-tetris-style)的，你可以从一个更简单的问题开始。

# python - Appfog Django 应用程序分发包错误

> ID：15486231
> 
> 赞同：1
> 
> 时间：2013-03-18T20:25:46.107
> 
> 标签：python, django, appfog

我是 appfog 的新手，想将我的 django 项目推送到服务器中，但似乎我无法安装分发包。我不知道是什么阻止了这个问题，也找不到访问 shell 的方法。知道发生了什么或如何解决它？

下面的崩溃消息

```
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (53K): OK   
Push Status: OK
Stopping Application 'stargazer': OK
Staging Application 'stargazer': OK                                             
Starting Application 'stargazer': ..........
Error: Application [stargazer] failed to start, logs information below.

====> /logs/staging.log <====

Requirement already satisfied (use --upgrade to upgrade): pip==1.1 in ./python/lib/python2.7/site-packages/pip-1.1-py2.7.egg
Cleaning up...
Requirement already satisfied (use --upgrade to upgrade): django in /usr/lib/python2.7/dist-packages
Cleaning up...
Downloading/unpacking gunicorn
  Running setup.py egg_info for package gunicorn

Installing collected packages: gunicorn
  Running setup.py install for gunicorn

    Installing gunicorn_paster script to /tmp/d20130318-32281-1qsiluq/staged/python/bin
    Installing gunicorn script to /tmp/d20130318-32281-1qsiluq/staged/python/bin
    Installing gunicorn_django script to /tmp/d20130318-32281-1qsiluq/staged/python/bin
Successfully installed gunicorn
Cleaning up...
Downloading/unpacking Django==1.5 (from -r requirements.txt (line 1))
  Running setup.py egg_info for package Django

    warning: no previously-included files matching '__pycache__' found under directory '*'
    warning: no previously-included files matching '*.py[co]' found under directory '*'
Downloading/unpacking MySQL-python==1.2.4 (from -r requirements.txt (line 2))
  Running setup.py egg_info for package MySQL-python
    The required version of distribute (>=0.6.28) is not available,
    and can't be installed while this script is running. Please
    install a more recent version first, using
    'easy_install -U distribute'.

    (Currently using distribute 0.6.24 (/tmp/d20130318-32281-1qsiluq/staged/python/lib/python2.7/site-packages/distribute-0.6.24-py2.7.egg))
    Complete output from command python setup.py egg_info:
    The required version of distribute (>=0.6.28) is not available,

and can't be installed while this script is running. Please

install a more recent version first, using

'easy_install -U distribute'.

(Currently using distribute 0.6.24 (/tmp/d20130318-32281-1qsiluq/staged/python/lib/python2.7/site-packages/distribute-0.6.24-py2.7.egg))

----------------------------------------
Command python setup.py egg_info failed with error code 2 in /tmp/d20130318-32281-1qsiluq/staged/python/build/MySQL-python
Storing complete log in /root/.pip/pip.log
Requirement already satisfied (use --upgrade to upgrade): django in /usr/lib/python2.7/dist-packages
Cleaning up...
Requirement already satisfied (use --upgrade to upgrade): gunicorn in ./python/lib/python2.7/site-packages
Cleaning up... 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T16:12:04.747

将 MySQL-Python 要求降级到 1.2.3 似乎可以解决这个问题，因为他们已经安装了该版本。

# python - 在 HTML 中将 PDF 显示为图像

> ID：15486233
> 
> 赞同：0
> 
> 时间：2013-03-18T20:25:48.140
> 
> 标签：python, html, pdf

使用 HTML 在浏览器中显示 pdf 的最佳方式是什么？

这里的主要目标是像普通图像一样显示 pdf。该网站的用户上传一个pdf文件，该文件使用PyPDF在他的不同页面中分离，然后每个页面都应该显示在网页上。因此，每个页面都作为不同的图像。

这将是理想的：

```
<img src="test_page1.pdf">
<img src="test_page2.pdf"> 
```

我一直在尝试通过使用 ImageMagick (Python) 将我的 pdf 转换为图像来做到这一点，但这会导致一些困难：

*   有时会崩溃
*   图像质量严重下降
*   尺寸增加

有没有更好的方法来完成这个？如果存在，我更喜欢不依赖服务器的方法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:44:18.020

不是客户端，而是...

```
exec("convert sample.pdf sample.jpeg") 
```

使用`ImageMagick`，[http](http://www.imagemagick.org/script/index.php) : //www.imagemagick.org/script/index.php/http: [//www.imagemagick.org/script/api.php#python](http://www.imagemagick.org/script/api.php#python)

我认为你真的很难做到这一点。服务器端可能更强大，可以更快地创建质量更好的图像，并且具有更多的定制性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T07:20:14.403

convert 没问题，但我用[evince-thumbnailer](https://wiki.gnome.org/Apps/Evince)得到了最好的结果。对于同等质量 (YMMV)，它的执行速度提高了大约 8 倍。

不利的一面是，虽然 evince-thumbnailer 没有 ghostscript 依赖项，但它*确实*引入了其他几个与 gnome 相关的依赖项，例如 glib 和 gtk。

您还可以使用诸如 pdftops之类的[poppler工具之一。](http://poppler.freedesktop.org/)这些也比转换快得多，并且几乎没有依赖关系，但质量不会相同。

这是后代的一些命令行..我已经运行了整页 300dpi 测试并添加了结果。注意我使用非常大的输出文件来放大缩略图。您也可以使用较小的 jpg 来获得更快的结果。

```
# This produces perfect png at 2480 pixels width.
# Takes averagely long (45sec).
# 2480 is A4 pixel width at 300dpi
evince-thumbnailer -s 2480 -l input.pdf /tmp/output.png
convert /tmp/output.png -quality 85% output.jpg

# This renders perfect jpg at 2400 pixels width.
# Takes extremely long. (6m)
# Quality is comparable
convert -density 300x300 input.pdf -resize 2400x -units PixelsPerInch \
    -quality 85% output.jpg

# This uses poppler to convert to ps and then converts to jpg.
# Takes averagely long (45sec)
# Does not compete quality-wise.
pdftops -l 1 -r 2400 -paper A4 input.pdf /tmp/output.ps
convert /tmp/output.ps output.jpg 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-23T20:31:05.413

试试这个[http://view.samurajdata.se/](http://view.samurajdata.se/)。您可以使用此工具将 PDF 显示为 HTML 中的图像。它开源且易于使用。

请注意此方法使用 PHP。

# c++ - c++字符串表.res文件

> ID：15486235
> 
> 赞同：0
> 
> 时间：2013-03-18T20:26:03.543
> 
> 标签：c++, string

我使用eclipse和mingw32。我在 .rc 文件中创建了一个 STRINGTABLE：

```
STRINGTABLE
BEGIN
    IDS_HELLO,   "Hello"
    IDS_GOODBYE, "Goodbye"
END 
```

并编译成 .res 文件

我想在应用程序中使用这个 STRINGTABLE。也许我应该创建一个dll文件？或者是什么？

这是我想使用的主要应用程序：

```
#include <windows.h>
#include <iostream>

int main () {
        // text.LoadString(IDS_HELLO) ; somewhere here...
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:32:02.780

请参阅[参考资料](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380599%28v=vs.85%29.aspx)。你必须：

1.  调整链接器选项，以便编译的 .res 将包含在您的 .exe 输出中（不，dll 不是强制性的）；
2.  使用[`LoadResource`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648046%28v=vs.85%29.aspx)WinAPI 函数获取资源句柄。

# cocoa-touch - 如何在 Route Me 开源地图上找到加载地图块的边界？

> ID：15486236
> 
> 赞同：0
> 
> 时间：2013-03-18T20:26:11.833
> 
> 标签：cocoa-touch, gps, cllocationmanager, route-me

使用以下开源 Route Me 应用程序我正在加载 Maptiles

```
mapview = [[RMMapView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 320.0f, 460.0f)];
[mapview setBackgroundColor:[UIColor whiteColor]];
mapview.delegate = self;

id <RMTileSource> tileSource = [[[RMDBMapSource alloc] initWithPath:"@tilefile.db"] autorelease];

RMMapContents *rmcontents = [[RMMapContents alloc] initWithView:mapview tilesource:tileSource]; 
[self.view addSubview:mapview];//attached to mapview 
```

如果 RMMapContents 中有一种方法可以让我将地图 4 个角作为 CLLocationCoordinate2D 获取，那就太好了？有一个

```
- (RMSphericalTrapezium) latitudeLongitudeBoundingBox; 
```

如何从上述方法中获得 4 个角的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:00:01.647

你必须给自己写一个这样的方法：

```
RMSphericalTrapezium trap;
CLLocationCoordinate2D nePoint = CLLocationCoordinate2DMake(
    trap.northeast.latitude,
    trap.northeast.longitude); 
```

其余3个点，用东南、西南、西北，同上。

# node.js - NodeJS 域模块没有干净地退出

> ID：15486237
> 
> 赞同：4
> 
> 时间：2013-03-18T20:26:12.150
> 
> 标签：node.js, error-handling, node.js-domains

我一直在试验节点 JS 中的域。代码完成了我的预期，但是当代码完成时，节点没有干净地退出，这让我觉得有一些未收集的垃圾或我不明白的东西。有什么建议么？这是一个精简的例子：

```
var https = require('http');
var domain = require('domain');

function getUrl(aHost, aPath, okCallback) {
  var options = { host : aHost, path : aPath, method : 'GET' }
    , responseBody = ''
    , request = https.request(options, handleRequest);

  request.end();

  function handleRequest(httpsResponse) {
    httpsResponse.setEncoding('utf8');
    httpsResponse.on('data', function(chunk) { responseBody += chunk; });
    httpsResponse.on('end',  function(){ okCallback(httpsResponse.statusCode, responseBody); });
  }
}

function fetch(aHost, aPath, okCallback) {
  var d = domain.create();
  d.on('error', function(err) { 
    console.log('It all went awry: ' + err.toString());
    d.dispose();
  });

  d.run(function() { getUrl(aHost, aPath, d.bind(storeResult)); });

  function storeResult(statusCode, responseBody) {
    if (statusCode >= 400) {
      throw new Error("Oops");
    } else {
      okCallback(responseBody);
    }
  }
}

// works fine and exits cleanly with a valid path (like '/')
fetch('www.google.com', '/invalidPath', function(body) { console.log('Received: ' + body); }); 
```

# php - 使用 PHP 的 XSLT 显示参数

> ID：15486242
> 
> 赞同：1
> 
> 时间：2013-03-18T20:26:19.897
> 
> 标签：php, xslt, coldfusion, parameters

我`movieID`在以下 XSLT 代码中传递参数

```
<xsl:template match="movie">
  <xsl:element name="a">
  <xsl:attribute name="href">movie_details.php?movieID=<xsl:value-of select="@movieID"/></xsl:attribute>
  <xsl:value-of select="title"/>
  </xsl:element>
  <xsl:element name="br" />
</xsl:template> 
```

我想通过并将其显示在名为`movie_details.php`.

这是我的 movie_details.php 代码：

```
<?php
$xml = new DOMDocument();
$xml->load('movies.xml');

$xsl = new DOMDocument;
$xsl->load('movie_details.xsl');

$proc = new XSLTProcessor();
$proc->importStyleSheet($xsl);

$params = $_GET['movieID'];

echo $proc->transformToXML($xml,$params);
?> 
```

movie_details.xsl 页面顶部包含以下参数：

```
<xsl:param name="movieID"/> 
```

我得到一个空白页，根本没有显示任何信息。

我可以通过使用以下 ColdFusion 代码 (movie_details.cfm) 让它工作

```
<cfset MyXmlFile = Expandpath("movies.xml")>
<cffile action="READ" variable="xmlInput"  file="#MyXmlFile#">
<cfset MyXslFile = Expandpath("movie_details.xsl")>
<cffile action="READ" variable="xslInput"  file="#MyXslFile#">

<cfset xslParam = StructNew() >
<cfset xslParam["movieID"] = "#url.movieID#" >

<cfset xmlOutput = XMLTransform(xmlInput, xslInput, xslParam )>
<!--- data is output --->
<cfcontent type="text/html" reset="yes">
<cfoutput>#xmloutput#</cfoutput> 
```

但是，我想对 PHP 做同样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:36:08.060

问题：

*   参数名称
*   将参数传递给变压器

# 参数名称

使用`$movieID`（而不是`@movieID`）：

```
<xsl:stylesheet>
<xsl:param name="movieID" />

<xsl:template match="movie">
  <xsl:element name="a">
  <xsl:attribute name="href">movie_details.php?movieID=<xsl:value-of select="$movieID"/></xsl:attribute>
  <xsl:value-of select="title"/>
  </xsl:element>
  <xsl:element name="br" />
</xsl:template>

</xsl:stylesheet> 
```

# 传递参数

您将不得不更改您的 PHP 代码以调用[setParameter](http://php.net/manual/en/xsltprocessor.setparameter.php)，因为[transformToXML](http://php.net/manual/en/xsltprocessor.transformtoxml.php)不采用其他参数。

```
<?php
$xml = new DOMDocument();
$xml->load('movies.xml');

$xsl = new DOMDocument;
$xsl->load('movie_details.xsl');

$proc = new XSLTProcessor();
$proc->importStyleSheet($xsl);

$params = $_GET['movieID'];
$proc->setParameter('', 'movieID', $params );

echo $proc->transformToXML( $xml );
?> 
```

# c - sys/stat.h 返回错误的大小

> ID：15486245
> 
> 赞同：0
> 
> 时间：2013-03-18T20:26:24.503
> 
> 标签：c, stat, unistd.h

我在用

1.  unistd.h
2.  系统/stat.h

有趣的是它`st_size`大于之后返回的值`read()`？ `st.st_size`回报`644`-`read()`回报`606`，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:57:16.353

内存以多个块 (st_blocks) 的形式分配。您注意到的剩余字节是由于块对齐。

如果您检查 的值，`st.st_blocks`您会发现它是 的一个很好的除数`644`，而不是 606。

因此，如果您想知道数据占用的实际大小，请不要使用`st_size`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:57:58.333

文件大小和流大小可能不匹配。例如，当您以文本模式打开文件时，操作系统可以将多字节 EOL 序列转换为单个字符。这在 Windows 上通常是可见的，但如果你在 Linux 上有一个 Windows 文件，效果可能是一样的。

# xml - XSD：默认整数值范围

> ID：15486246
> 
> 赞同：10
> 
> 时间：2013-03-18T20:26:26.747
> 
> 标签：xml, xsd, xml-validation

在 XSD 文件中定义特定数据类型的元素时是否存在隐含的默认值范围？例如，如果我定义一个整数类型的元素：

```
<xs:element name="MyIntegerElement" type="xs:integer"/> 
```

这是否具有将验证的隐含最小值和最大值？我知道我可以像这样明确定义有效范围：

```
<xs:element name="MyIntegerElement">
   <xs:simpleType>
      <xs:restriction base="xs:integer">
         <xs:minInclusive value="1"/>
         <xs:maxInclusive value="16"/>
      </xs:restriction>
   </xs:simpleType>
</xs:element> 
```

但是，如果我在验证 XML 文件时不这样做，它会默认为一系列有效值吗？我一直在研究 XSD 文档，但还没有找到答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T20:49:48.527

好吧，这取决于数据类型...

如果您查看[at w3的](http://www.w3.org/TR/xmlschema-2/#integer)[定义`integer`](http://www.w3.org/TR/xmlschema-2/#integer)：

> 整数的值空间是无限集{...,-2,-1,0,1,2,...}

本质上，这意味着对于整数，默认情况下没有最小值/最大值范围，因为可以表示任何整数。

另一方面，[对于一个`int`](http://www.w3.org/TR/xmlschema-2/#int)：

> (...) maxInclusive 为 2147483647，minInclusive 为 -2147483648。

名单还在继续`longs`，`shorts`等等......

您可以在此处更详细地阅读它：http: [//www.w3.org/TR/xmlschema-2/#typesystem](http://www.w3.org/TR/xmlschema-2/#typesystem)

# java - IBM ILOG 的 Java 接口

> ID：15486253
> 
> 赞同：1
> 
> 时间：2013-03-18T20:26:45.017
> 
> 标签：java, ilog

我在操作系统为 Red Hat Linux 的服务器上安装了 IBM ILOG v12.2 for Linux。我编写了 Java 接口，当我在服务器上运行它时，显示以下错误：

```
Native code library failed to load: ensure the appropriate library (opl<VERSION>.dll/.so) is in your path.
Exception in thread "main" java.lang.ExceptionInInitializerError
    at ilog.concert.cppimpl.concert_wrap.setDebugWrappers(concert_wrap.java:34)
    at ilog.opl.IloOplFactory.setDebugMode(IloOplFactory.java:152)
    at MainNetworkVirtulization.main(MainNetworkVirtulization.java:185)
Caused by: java.lang.RuntimeException: Native code library failed to load: ensure the appropriate library (opl<VERSION>.dll/.so) is in your path.
    at ilog.concert.IloJNILoader.loadJNI(IloJNILoader.java:79)
    at ilog.concert.cppimpl.concert_wrapJNI.<clinit>(concert_wrapJNI.java:15)
    ... 3 more
Java Result: 1 
```

顺便说一句，这个 Java 接口代码在我的另一台 Windows 笔记本电脑上运行良好。有谁知道如何纠正上述错误？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:32:39.587

您需要添加`LD_LIBRARY_PATH`到您的环境变量，以便可以加载 ILOG 库。

例如，在 my 中`.profile`，我有以下内容（使用 cplex，而不是 Concert，但你明白了。）：

```
export LD_LIBRARY_PATH=/opt/cplex125/cplex/bin/x86-64_sles10_4.1 
```

您也可以运行`-Djava.library.path <path>`并将其传递给您的虚拟机，但我发现上面的麻烦要少得多，因为您不必为每次调用记住该参数。

# servicestack - 使用 OrmLite 调用带有可选参数的存储过程

> ID：15486256
> 
> 赞同：2
> 
> 时间：2013-03-18T20:26:56.420
> 
> 标签：servicestack, ormlite-servicestack

我正在使用 OrmLite 调用具有可选参数的存储过程。

```
_dbConnection.SqlList<CustomerDTO>("sp_getcustomers @name", new { name = request.Name }); 
```

此语句正在生成以@name 作为参数的动态 sql 语句。但我不知道如何将 null 传递给这个参数，我尝试使用 DBNull.Value 但它不起作用。例外：*给定的键不存在于字典*中。

```
_dbConnection.SqlList<CustomerDTO>("sp_getcustomers @name", new { name = request.Name ??  System.Data.SqlTypes.SqlString.Null}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:25:32.430

有关如何有效利用 OrmLite api 的示例，请参阅这些[SqlProviderTests](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/tests/ServiceStack.OrmLite.Tests/SqlServerProviderTests.cs)`Sql*`。

调用它的正确方法是：

```
Db.SqlList<CustomerDTO>("EXEC sp_getcustomers @Name", new { request.Name }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T07:44:06.283

Ormlite 有一个[T4 文件](https://github.com/ServiceStack/ServiceStack.OrmLite/tree/master/src/T4)来为 SP（用于 SqlServer）生成 C# 函数等价物；生成的文件允许您传递空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-21T14:35:32.033

[在提交 e6ef83a](https://github.com/ServiceStack/ServiceStack.OrmLite/commit/e6ef83a6fcadb8fa41a1107063332302c37eaf86)中添加了对存储过程中空参数的支持，并与 ServiceStack.OrmLite 的[3.9.56 版本一起](https://www.nuget.org/packages/ServiceStack.OrmLite.SqlServer/3.9.56)发布。

# php - 常规搜索有效，但是当我尝试在组合中添加通配符时，没有结果

> ID：15486258
> 
> 赞同：0
> 
> 时间：2013-03-18T20:27:06.980
> 
> 标签：php, ms-access, search, wildcard

所以我已经成功地创建了一个搜索框，它链接到我的 MS 数据库并返回搜索，但是当我尝试在查询中实现通配符时，我现在遇到了一些问题。我已经阅读了很多人关于通配符的帖子，但我仍然对将它与当前代码放在哪里感到困惑。我尝试了几种方法，但幸运的是，没有任何效果。我是否需要更改某些内容才能使通配符起作用？我使用了“ *”而不是“%”，因为人们说 MS Access 只支持“*“。我想要做的是允许用户搜索像“娃娃”这样的词，并且所有带有“娃娃”这个词的产品都会出现在该字段中。也有可能，当用户点击 ninjaturtle 并且所有信息都将在那里时，将结果与附加到“ninjaturtle”之类的超链接一起返回？但首先，我只想知道如何让通配符搜索工作。我的代码发布在下面。任何帮助是极大的赞赏。谢谢！

表：产品字段：Suit_Name、Product_Description

```
<form action="dirsuits.php" method="post">
<ul><input type="text" name="designername" /></ul>
<ul><input type="submit" value="Search" /></ul></form>
</ul>
<p>&nbsp;</p>
<!-- end .sidebar1 --></div>
<div class="content">
<h1>Ninja Suits:</h1>

<p><?php
$productname=filter_input (INPUT_POST, "productName");

$conn = new COM("ADODB.Connection") or die("Cannot start ADO"); 
$connString= "Provider=Microsoft.Jet.OLEDB.4.0;Data     Source=\\server\\KP\\Database\\DesignerProducts.mdb";
$conn->Open($connString);
$selectCommand="SELECT Product_Description, Suit_Name FROM DesignerProducts WHERE     Suit_Name='".$suitname."'";
$rs=$conn->Execute($selectCommand);
if (!$rs->EOF){
$Suit_Name=$rs->Fields("Suit_Name");
echo "Results: $Suit_Name";
}
else  {
echo "We are out";
$rs->Close;}
?>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:31:50.710

从 PHP 访问 Access 时要使用的通配符是`%`，并且您需要使用 LIKE（而不是 =）在 SQL 中进行通配符匹配。所以你需要类似的东西

```
$selectCommand="SELECT Product_Description, Product_Name FROM Products WHERE Product_Name LIKE '%".$productname."%'"; 
```

**注意**：我不了解 PHP，但将`$productname`变量（看起来直接来自用户输入）与字符串连接以构建 SQL 语句可能会使您面临安全漏洞（SQL 注入）。

# c# - FlexPaper 本地化不起作用

> ID：15486259
> 
> 赞同：0
> 
> 时间：2013-03-18T20:27:06.830
> 
> 标签：c#, localization, flexpaper

抱歉，如果这个问题断章取义，但我不知道还能去哪里看，而 StackOverflow 往往会提供最好的支持。我遇到了[FlexPaper](http://flexpaper.devaldi.com/)没有为 HTML 呈现选项加载语言环境的问题。它似乎适用于 Flash 版本，没有问题，但不适用于 HTML 查看器。

这是将控件加载到页面上的配置：

```
var searchServiceUrl = escape(ashxDir + "containstext.ashx?doc=" + guid + "&page=[page]&searchterm=[searchterm]"), 
 docUrl = escape("{" + ashxDir + "view.ashx?guid=" + guid + "&numPages=" + numPages +"&format={format}&page=[*,0]," + numPages + "}"),
 configObj = {
  DOC: docUrl,
  ...
  DocSizeQueryService: ashxDir + "swfsize.ashx?doc=" + guid,
  jsDirectory: "/FlexPaper/js/",
  JSONDataType: "jsonp",
  localeDirectory: "/FlexPaper/locale/",
  localeChain: "en_US"
 }; 
```

这正是我在查看文档和其他所有内容时发现它的方式，但它根本不适合我。我已经搜索了互联网，但似乎没有其他人有这个问题。不幸的是，当我单击打印按钮时，我的所有标签和按钮都显示为“null”。这是我尝试在 HTML 查看器中加载页面时得到的屏幕截图：

![空本地化字符串](../Images/0e8b2540064a2890c4abe815eee49491.png)

如果您在上面的配置中注意到，localeDirectory 被设置为 js 目录的同级目录。locale 目录下包含所有有效目录，其中包含各种语言的本地化字符串（即 en_US、zh_CN 等）。我什至尝试在系统周围移动区域设置目录，看看它是否期待不同的“根”，但再次无济于事......

任何信息将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T05:57:53.413

我在我的 flex 文件的 PHP 设置中遇到了“空”问题，因为我将 locale & js 文件夹放在我的位置，所以它没有获取正确的路径，所以我把正确的路径放在默认页面中， `$('#documentViewer').FlexPaperViewer({` 我只是把定义放在路径下面：

```
jsDirectory:"http://{xxx}/subdirectory/assets/js/",
localeDirectory:"http://{xxx}/subdirectory/assets/locale/", 
```

可能这会帮助别人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T20:30:29.693

我们发现了问题，我意识到我从未用“答案”更新案例。该修复与将本地化字符串提供给对话框的错误 url 直接相关。我们只能通过使用 Chrome Web 工具询问 HTTP 请求来追踪它。这不是一个复杂的修复，但事实证明，正确追踪和诊断是一个复杂的问题。

希望有一天这对某人有所帮助。

# java - 打开 JXDatePicker 以获得焦点

> ID：15486261
> 
> 赞同：1
> 
> 时间：2013-03-18T20:27:12.243
> 
> 标签：java, swing, datepicker, swingx, jpopup

我正在尝试扩展 JXDatePicker 以便在获得焦点时打开它。搜索了提示我理解没有成功。有没有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:28:00.740

令人惊讶的是，这实际上是不可能的:-(

这一次，JXDatePicker 本身没有 api 来显示/隐藏弹出窗口（只有 BasicDatePickerUI 有）。再加上 ui 委托有一些内部魔法（阅读：hacks ...咳），这使得 FocusListener 比通常在复合组件中更难处理。

一个片段来玩：

```
final JXDatePicker picker = new JXDatePicker();
FocusListener l = new FocusListener() {

    @Override
    public void focusGained(FocusEvent e) {
        // no api on the picker,  need to use the ui delegate
        BasicDatePickerUI pickerUI = (BasicDatePickerUI) picker.getUI();
        if (!pickerUI.isPopupVisible()) {
            pickerUI.toggleShowPopup();
        }
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                // opening the popup moves the focus to ... ? 
                // need to grab it back onto the editor
                picker.getEditor().requestFocusInWindow();
            }
        });
    }

    @Override
    public void focusLost(FocusEvent e) {
    }
};
// need to register the listener on the editor
picker.getEditor().addFocusListener(l);
JComponent content = new JPanel();
content.add(new JButton("dummy"));
content.add(picker); 
```

不太令人满意，因为在再次转移焦点*时*自动关闭弹出窗口不能可靠地工作，需要两个选项卡（不知道为什么）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-13T14:26:38.600

我有同样的问题。这对我有用：

```
jXDatePicker.getEditor().addFocusListener(new FocusListener() {
    @Override
    public void focusGained(FocusEvent e) {
        BasicDatePickerUI pickerUI = (BasicDatePickerUI) jXDatePicker.getUI();
        if (!pickerUI.isPopupVisible() && e.getOppositeComponent() != getRootPane() && e.getOppositeComponent() != jXDatePicker.getMonthView()) {
            pickerUI.toggleShowPopup();
        }
    }
    @Override
    public void focusLost(FocusEvent e) {}
}); 
```

这段代码用于避免焦点问题：

```
 e.getOppositeComponent() != getRootPane() 
```

# heroku - ENV 变量没有被读取 sinatra

> ID：15486262
> 
> 赞同：0
> 
> 时间：2013-03-18T20:27:16.883
> 
> 标签：heroku, sinatra, environment-variables, activesupport

所以我试图在本地提供来自 Amazon s3 的静态资产，而对于 Heroku，我正在加载一个 yml 文件，但这不起作用，因为 Heroku 不接受符号链接。

所以我得到了使用 ENV 变量的建议，因为 Heroku 也使用这些变量。我有一个 rake 任务将资产预编译到 AWS。目前有两个问题

1) 我的 ENV 变量没有被读取。（雾目录不能为空，Aws 访问密钥不能为空，Aws 秘密访问密钥不能为空

2) 运行 rake 任务时，我还收到错误“已初始化常量 VALID_CHARACTER”

那么 activesupport 常量被加载了两次？

我的设置

环境.rb

```
ENV['aws_bucket'] = 'bucketname'
ENV['aws_access_key'] = 'myaccesskey'
ENV['aws_secret_key'] = 'mysecretkey' 
```

耙文件

```
require 'bundler/setup'
 Bundler.require(:default)
 require './env' if File.exists?('env.rb')

AssetSync.configure do |con|
con.fog_provider = 'AWS'
con.fog_region = 'eu-west-1'
con.fog_directory = ENV['aws_bucket']
con.aws_access_key_id = ENV['aws_access_key']
con.aws_secret_access_key = ENV['aws_secret_key']
con.prefix = "assets"
con.public_path = Pathname("./public")   
end

namespace :assets do
 desc "Precompile assets"
task :precompile do
AssetSync.sync
end 
```

宝石文件

```
source :rubygems
gem 'sinatra'
gem 'pony'
gem 'sinatra-flash'
gem 'heroku'
gem 'asset_sync', git: 'git://github.com/ejholmes/asset_sync.git', branch: 'sinatra' 
```

更新

AssetSync 在它的 gemspec 中具有积极的支持，因此可以以任何方式包含在内。它似乎与小马 gemspec 的邮件 gem 中定义的常量冲突。

因此，删除 Pony gem 后，我可以在本地预编译资产，但是当我尝试为 heroku 编译时，什么也没有发生，它会启动 rake 任务，但随后会返回终端准备执行新命令。

另一件事是我的邮件需要 Pony，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:23:40.937

为了消除 Pony 和在本地运行 Rake 之间的冲突，[将 gems 放入不同的组](http://yehudakatz.com/2010/05/09/the-how-and-why-of-bundler-groups/)中，例如

```
# Gemfile
group :assets do
  gem 'asset_sync', git: 'git://github.com/ejholmes/asset_sync.git', branch: 'sinatra'
end

group :mail do
  gem "pony"
end

# more… 
```

在 Rakefile 中

```
Bundler.require(:assets,:database,:whatever_else_you_need) 
```

在 rackup/app 文件中

```
Bundler.require(default,:assets,:database,:mail,:whatever_else_you_need) 
```

至于您的其他问题，您应该通过`heroku config`（请参阅[https://devcenter.heroku.com/articles/config-vars](https://devcenter.heroku.com/articles/config-vars)）设置用于生产的环境变量，并使用 Rakefile 在本地加载它们，[正如我在您询问的另一个问题中所说的那样这个](https://stackoverflow.com/questions/15466627/environment-variables-locally-and-heroku)。环境变量将在 Ruby 进程的范围内存在，因此如果您通过 Rake 加载它们并在同一个 Rake 进程*中*启动本地服务器，您将让 Sinatra 获取所有环境变量。

* * *

编辑： env vars 将持续与添加它们的进程一样长，因此如果您将它们放在依赖任务中，则以下任务将可以访问它们：

```
namespace :assets do

  task :environment do
    AssetSync.configure do |con|
      con.fog_provider = 'AWS'
      con.fog_region = 'eu-west-1'
      con.fog_directory = ENV['aws_bucket']
      con.aws_access_key_id = ENV['aws_access_key']
      con.aws_secret_access_key = ENV['aws_secret_key']
      con.prefix = "assets"
      con.public_path = Pathname("./public")   
    end
  end

 desc "Precompile assets"
 task :precompile => :"assets:environment" do
   AssetSync.sync
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:12:54.330

您可能希望将其拆分为不同的问题。这样可以更轻松地帮助您。至于您的第一个问题：我假设您没有将`env.rb`版本控制在版本控制之下？

**为什么您的环境变量没有被 Sinatra 拾取？**因为您在 Rakefile 中配置了 Fog，而 Simatra 永远不会看到该文件。它仅由 rake 使用。

我建议您将 Fog 配置放入第三个文件中，并将`require`其放入 Rakefile 和 Sinatra 应用程序中。

# openfire - 登录匿名openfire

> ID：15486264
> 
> 赞同：0
> 
> 时间：2013-03-18T20:27:40.483
> 
> 标签：openfire, strophe

我跟着这个：

[使用 Strophe 在 Openfire 中匿名登录](https://stackoverflow.com/questions/5114259/anonymous-login-in-openfire-with-strophe)

我把域作为用户名和密码空。openfire 属性 xmpp.auth.anonymous = true

我尝试了很多配置 e 没有任何效果。我错过了什么？

我正在使用主干和下划线。这是我的代码

```
 _.extend(Chat.prototype, Backbone.Events, {
    connect : function() {
        var self = this;    
        this.connection = new Strophe.Connection(BOSH_SERVICE);
        this.connection.connect('brent029', null, function(status) {
            self.onConnect(status);   
        });
    },

    onConnect : function(status) {
        switch(status) {
            case Strophe.Status.CONNECTED:
                this.sendPresConference();
                break;
            default:
                break;
       }
    },

    sendPresConference : function(){
        this.connection.send(
            $pres({
                to : 'room@conference_service/nick'
            })
            .c('x',{ 
                xmlns : Strophe.NS.MUC 
            }).tree()
        );
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:39:42.200

我解决了。

openfire 有一个属性 sasl.mechs

该属性的值是“PLAIN”。

我将值更改为“ANONYMOUS，PLAIN”。

然后，我重新启动了 openfire，现在工作正常。

# xpages - 自定义控件加载的属性是否正常工作？

> ID：15486268
> 
> 赞同：0
> 
> 时间：2013-03-18T20:27:45.797
> 
> 标签：xpages

我想要做的是创建一个自定义控件，它自己确定是否应该加载它。所以我查看了自定义控件的加载属性，但它没有按我预期的方式工作。它至少似乎忽略了这个属性。我整理了一个小测试控件来演示。

```
<?xml version="1.0" encoding="UTF-8"?>
 <xp:view xmlns:xp="http://www.ibm.com/xsp/core" pageTitle="Test" loaded="false">
   This is a test custom control.
 </xp:view> 
```

控件始终显示，即使它的加载属性设置为 false。Nw 我能做的是将自定义控件放在我的页面上并在那里设置加载的属性。这很好用，但我想避免每次使用控件时都必须设置该属性。我想将代码放在控件中，看看是否应该加载它。

我错过了什么吗？

是的，我知道我可以将所有内容放在控件上的 div 中而不加载 div，但我宁愿根本不加载控件，如果不应该加载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:20:22.077

I'm not entirely sure why the loaded attribute is even available on the root element, because what it does is inherently impossible to evaluate at that level.

As opposed to rendered, which determines whether any representation of the component will be sent to the consumer, loaded determines whether or not the component is even created. So if rendered is false, it just doesn't display... if loaded is false, it doesn't even exist. The component needs to exist for the view tag attributes to be evaluated, so it's too late by then to stop it from existing since it needs to exist in order to be told not to exist.

As a result, in order to use loaded to suppress the entire control, the attribute needs to be set on the control reference. In other words, when adding the control to an XPage (or another custom control), set a loaded expression on the tag for the control. If it evaluates to false, then the control will never be loaded.

Remember, all of this ends up executing as Java... if you block construction of a class instance, you don't have a class instance to ask whether it should have been constructed. Conversely, if you create a class instance, then ask it whether it should exist... too late, it already exists. If the custom control should own the logic for whether its contents should exist, then specifying that logic in the loaded attribute of a single child container is the "right" approach.

# apache-flex - 检查数据提供者中是否存在项目

> ID：15486271
> 
> 赞同：0
> 
> 时间：2013-03-18T20:27:50.590
> 
> 标签：apache-flex, dataprovider

下午好。

在添加数据提供者之前，我需要检查该项目是否已经存在。但是当我尝试在我的数组中进行此检查时，indexOf 方法总是返回 -1。谁能帮助我？谢谢你。

```
var contacts:Array = new Array();

for each(var i:Object in windowAddContact.selectedContacts)  {

  if(contacts.indexOf(i) == -1) {

    contacts.push(i);               
  }
}

contactList.dataProvider = contacts; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:41:03.313

给定代码；您已提供；我不希望 indexOf 返回 -1 以外的任何内容；除非你在 windowAddContact.selectedContacts 中有同一个对象的多个实例；这是可能的，但似乎不太可能。

联系人数组一开始是空的，这段代码所做的只是将集合中的项目复制到数组中。尝试这个：

```
var contacts:Array = new Array();
contacts.add(windowAddContact.selectedContacts[0]);
for each(var i:Object in windowAddContact.selectedContacts)  {

  if(contacts.indexOf(i) == -1) {

    contacts.push(i);               
  }
} 
```

而且我敢打赌，您会看到 indexOf(i) 一次返回 -1 以外的值。不过，我不清楚你想做什么。为什么需要循环？你不能这样做：

```
contactList.dataProvider = windowAddContact.selectedContacts; 
```

# excel - 如何挑出整个电子表格中的唯一记录？

> ID：15486279
> 
> 赞同：0
> 
> 时间：2013-03-18T20:28:11.163
> 
> 标签：excel

在 EXCEL 2010 中，我有 2 列包含电子邮件地址。我只需要在整个电子表格（两列中）中找到那些只出现一次并将它们单独列出，这意味着如果第 1 列和第 2 列中存在一条记录，则删除这两条记录，只留下那些从未出现过多次的记录。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:34:11.027

## 预处理

将它们全部放在同一列中。如有必要，请使用`LOWER()`以确保它们都是相同的情况。`TRIM()`必要时使用以删除多余的空格。对它们进行排序（用 不是必需的`COUNTIF()`，但会使抽查变得容易）。

## 主要加工

假设您的电子邮件地址位于 A 列，来自`A2:A1000`.

在单元格 B2 中，输入以下公式：

```
COUNTIF($A$2:$A$1000,A2) 
```

这将产生每次`A2`出现在列中的电子邮件地址的计数。将其复制到 B 列。

使用 Excel 的过滤器功能来过滤您的列表，找出那些恰好`1`在 B 列中的列表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T20:36:30.043

=IF(COUNTIF($A:$B;A1)=1;A1;"不唯一")

如果您的电子邮件地址在第 1 列和第 2 列，请在第 3 列尝试此公式

# php - 如何删除与其他行具有重复用户名的一行？

> ID：15486283
> 
> 赞同：1
> 
> 时间：2013-03-18T20:28:25.453
> 
> 标签：php, sql, delete-row, corresponding-records

这是表格：

```
username:     id:

john          1
john          2
john          56
john          75
john          98 
```

现在我想查询并随机删除其中一行并保留其他四行——假设我不知道“ID”的值，因为它是自动递增的。

这是代码，我不确定要添加什么，所以它只会删除与“john”关联的行之一

```
$query = ("DELETE FROM table WHERE username='$name' && id=''"); 
```

如何修改它以删除带有名称的一行`john`而不是全部？

**固定代码**

有效的简单解决方案。

```
$query = ("DELETE FROM table WHERE username='$name' LIMIT 1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:31:53.077

我不确定它是否可能，但也许将结果限制为 1？

```
$query = ("DELETE FROM table WHERE username='$name' LIMIT 1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:39:29.737

I believe this will work:

```
$name = 'john';

$query = ("DELETE FROM table WHERE id = (SELECT id FROM table WHERE username = '$name' ORDER BY RAND() LIMIT 1)"); 
```

# jquery - jQuery hide() 和 show() 的问题

> ID：15486285
> 
> 赞同：0
> 
> 时间：2013-03-18T20:28:28.590
> 
> 标签：jquery, html, css

这是我隐藏#edit的方法：body中有一个加载图像，当设备准备好时，它会隐藏$edit并显示加载图像。在 getDetail 中完成操作时，隐藏 #load 并显示 #edit。

但是，现在的问题是，打开页面时，加载和编辑都显示，并且在getDetail函数后正常工作。

我应该如何修改代码？

```
<script type="text/javascript">

    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() {
        $('#edit').hide();
        getDetail();
    }

</script> 
```

js

```
function getDetail() {

        $('#load').hide();
        $('#edit').show();  

} 
```

html部分

```
 <div id='load'>
    <img src="loading.gif" 
    style="margin-left:auto; margin-right:auto; ">
    </div><!-- /load -->

    <div id='edit'></div> 
```

**额外问题 **我需要`return false;` 在 getDetail() 的最后一行吗？因为我所有的 javascripts 都放在一个 js 文件中。getDetail() 是第一个函数。运行此功能后，我发现其他功能都不起作用，即使是简单的点击功能来提醒某些东西，这些功能只有将脚本以内联样式放在正文中才能起作用。

附言。修复了一些复制和粘贴错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:30:12.513

只需修改

```
<div id='edit'></div> 
```

到

```
<div id='edit' style="display:none;"></div> 
```

并删除该行：

```
$('#edit').hide(); 
```

它没有任何效果，因为它在隐藏后立即显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:30:36.460

您有语法错误

getDetail() 方法中有额外的右括号。语法错误不仅会影响这部分代码，还会破坏整个脚本。

然后你应该最初`#edit`使用 CSS 隐藏元素

```
#edit {display: none;} 
```

这使得隐藏此元素的语句无用。只需删除部分`$('#edit').hide()`

并且：您不应该`<script>`在 Javascript 代码结束之前关闭标签。

# c# - DatePicker 奇怪的验证

> ID：15486288
> 
> 赞同：0
> 
> 时间：2013-03-18T20:28:30.680
> 
> 标签：c#, wpf, datetime, datepicker

我有一个 DatePicker，它是通过以下 XAML 定义的：

```
<DatePicker Grid.Row="3" Grid.Column="1" Margin="4" 
    Text="{Binding Birthday, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
    DisplayDateStart="01.01.1900" DisplayDateEnd="{Binding CurrentDate, Mode=OneTime}"/> 
```

如果我选择像“02.03.1979”这样的日期，一切都很好。但是，如果我选择“27.12.1979”，则 DatePicker 的字段会出现红色边框。我没有验证这个日期。

为什么有些日期是红色的？

生日是日期时间类型的属性。Currendate 是 DateTime 类型的属性，它返回实际日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:45:55.493

你的 xml 代码没问题。如果您想对多个 DatePicker 使用相同的 DateTime 格式，请将此代码片段添加到您的启动窗口 - 您可以编辑模式：

```
Thread.CurrentThread.CurrentCulture = (CultureInfo)Thread.CurrentThread.CurrentCulture.Clone();
Thread.CurrentThread.CurrentCulture.DateTimeFormat.ShortDatePattern = "dd. MMM. yyyy"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:30:09.893

我通过绑定到 DisplayDate 而不是 Text 解决了这个问题。代码现在看起来像：

```
<DatePicker Grid.Row="3" Grid.Column="1" Margin="4" 
DisplayDate="{Binding Birthday, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
DisplayDateStart="01.01.1900" DisplayDateEnd="{Binding CurrentDate, Mode=OneTime}"/> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T20:46:24.733

如果您不特别关注日期值的顺序.. 试试这个

```
<DatePicker Grid.Row="3" Grid.Column="1" Margin="4" 
    Text="{Binding Birthday, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
    DisplayDateStart="01.01.1900" DisplayDateEnd="{Binding CurrentDate, Mode=OneTime}" Format="Custom" FormatString="MMM dd yyyy"/> 
```

# algorithm - 用于查找具有至少单个“1”的行和列的空间和时间优化算法

> ID：15486290
> 
> 赞同：0
> 
> 时间：2013-03-18T20:28:51.473
> 
> 标签：algorithm

对于仅具有 0 或 1 的给定矩阵 NxN。找出至少出现一个 1 的行数和列数。

例如

0 0 0 0

1 0 0 1

1 0 0 1

1 1 0 1

至少有一次为 1 的行数：3

Col 计数有 1 至少一次：3

头脑被冻结想不出比正常双循环更好的方法给我 O(n^2) 期待一些帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:05:47.710

该解决方案证明您不能读取小于 O(N^2) 的矩阵，但如果您对这个问题的意思是您想在搜索中计算您的结果：我认为这不是做它或说我需要比 O(2*(n^2)) 更好地解决这个问题。

您需要了解数组中的每个单元格。假设您有一个图表，每个顶点都指向矩阵中的一个单元格。要查找您应该在图表中搜索的单元格的值。您可以使用 DFS 来做到这一点。命令。

> [DFS](http://en.wikipedia.org/wiki/Depth-first_search)的时间和空间分析根据其应用领域的不同而不同。在理论计算机科学中，DFS 通常用于遍历整个图，并且需要时间 O(|E|)，与图的大小成线性关系。在这些应用程序中，它还在最坏的情况下使用空间 O(|V|) 来存储当前搜索路径上的顶点堆栈以及已经访问过的顶点集。因此，在这种情况下，时间和空间界限与广度优先搜索相同，选择使用这两种算法中的哪一种较少取决于它们的复杂性，而更多地取决于两种算法产生的顶点排序的不同属性.

并且您的图形中有 N^2 个顶点 - 数组至少 (O(V+E) >= O(V))。所以你不能比使用每个数据结构的 O(n^2) 做得更好。（因为计算这个顺序与边缘结构无关）。

```
maxcol=0;
for(int i=0;i<n;i++)
{
  sumcol=0;
  for(int j=0;j<n;j++)
  {
    if (a[i][j]==1)
     {
       sumcol=sumcal+1;
     }  
  }
  if (sumcol>maxcol)
   {
     maxcol=sumcol;
   }
} 
```

对行重复此操作。这是非常简单的解决方案，但此代码具有最小空间。您无法通过算法思想对其进行改进。您应该注意算法复杂性的方法。您可以通过一次搜索来解决它，但只会增加复杂性你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:41:35.753

思路：将每行每列的数字总和存储在矩阵中。

附加存储：O(n * log(n)) - 假设 O(log(n)) 位存储一个数字。

计算非零行和列所需的时间：O(n)。

这是一种时间优化算法，而不是“空间和时间优化算法”——它需要更多空间但更少时间。

# maven - 如何在nexus中为不同的构建配置多个代理

> ID：15486291
> 
> 赞同：1
> 
> 时间：2013-03-18T20:29:05.763
> 
> 标签：maven, automation, jenkins, continuous-integration, nexus

我需要将我们的 Nexus 存储库配置为具有多个采购组，并根据工作类型让不同的 Jenkins 作业引用不同的组。

例如，对于 CI 工作，我需要能够代理一堆存储库。对于部署或发布作业，我需要使用采购和控制的代理组。CI 可能允许用户访问尚未批准的工件，但对于发布，工件首先经过审查和批准。

在 Nexus 中创建组和进行采购似乎很简单。但是，我不知道如何让 Jenkins 工作使用不同的组。我在 maven .settings.xml 中只能有一个 mirrorOf 标记，并且不能在配置文件中设置镜像。

有没有人试过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:52:09.347

对于访问不同组的不同作业，您必须有不同的 settings.xml 文件。Hudson 的 Maven 3 集成可以在服务器中执行此操作并自动使用正确的。对于 Jenkins，您必须以不同的方式手动管理它。例如，通过在 CI 服务器上使用不同名称的不同 settings.xml 文件，然后使用 mvn 调用的 -s 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:44:21.287

“CI 可能允许用户访问尚未批准的工件，但对于发布，工件首先经过审查和批准。”

我想知道你用 CI 做什么。通常，CI 仅用于连续构建您的项目，而不是用于在您的开发人员和您的 repos 管理器服务器之间任意操作。

也许您可以在 setting.xml 中的多个配置文件中配置代理，并根据需要使用属性/环境变量激活它们。

# python - cx-freeze 找不到所有依赖项

> ID：15486292
> 
> 赞同：10
> 
> 时间：2013-03-18T20:29:06.217
> 
> 标签：python, cx-freeze

我有一个 python 脚本（2.7），顶部有一些“有趣的”导入。我最初想使用 py2exe 将其编译成一个我可以更容易分发的 exe（[py2exe 找不到所有依赖项](https://stackoverflow.com/questions/15480906/py2exe-doesnt-find-all-dependencies)）。

我已经放弃并尝试使用 cx-freeze 代替。但是，我也有问题。问题似乎是我添加到 Python 中的库（jinja2 和 restkit）。我在我的 python 目录 ./Lib/site-packages/Jinja2-2.6-py2.7.egg/jinja2 和这里 ./Lib/site-packages/restkit-4.2.1-py2.7.egg/restkit 中看到了它们。

这是我脚本中的导入：

```
import datetime
from jinja2 import Environment, PackageLoader
from optparse import OptionParser
from datetime import date, timedelta
from restkit import Resource, BasicAuth, request 
```

我正在使用带有 cx-freeze 的 setup.py。这是 setup.py：

```
from cx_Freeze import setup, Executable

packages  = ["restkit", "jinja2" , "restkit.client" ]
includes = []
includefiles = []
eggsacutibull = Executable(
    script = "myScript.py",
    initScript = None,
    targetName = "myScript.exe",
    compress = True,
    copyDependentFiles = True,
    appendScriptToExe = False,
    appendScriptToLibrary = False,
    icon = None
    )

setup(
        name = "myScript",
        version = "0.1",
        author = 'vickery',
        description = "MyScript description",
        options = {"build_exe": {"includes":includes, "include_files": includefiles, "packages": packages}},
        executables = [eggsacutibull]
        ) 
```

我像这样运行 cxfreeze：

```
cxfreeze myScript.py --target-dir exe 
```

我在我的构建中得到了这个：

```
Missing modules:
? __pypy__ imported from jinja2.debug
? http_parser.http imported from restkit.client
? jinja2._debugsupport imported from jinja2.debug
? jinja2._markupsafe._speedups imported from jinja2._markupsafe
? jinja2.debugrenderer imported from jinja2.debug
? markupsafe imported from jinja2.utils
? pretty imported from jinja2.utils
? socketpool imported from restkit.conn 
```

而且，当我尝试运行 exe 时，我得到了这个：

```
Traceback (most recent call last):
  File "c:\Python27\lib\site-packages\restkit-4.2.1-py2.7.egg\restkit\__init__.py", line 9, in <module>
    from restkit.conn import Connection
  File "c:\Python27\lib\site-packages\restkit-4.2.1-py2.7.egg\restkit\conn.py", line 14, in <module>
    from socketpool import Connector
ImportError: No module named socketpool
Traceback (most recent call last):
  File "c:\Python27\lib\site-packages\cx_Freeze\initscripts\Console.py", line 27, in <module>
    exec code in m.__dict__
  File "myScript.py", line 12, in <module>
ImportError: cannot import name Resource 
```

**编辑：** 我现在像这样正确运行 cxfreeze：

```
python setup.py build 
```

我还在 setup.py 中添加了 socketpool：

```
packages = [ "restkit", "jinja2" , "restkit.client", "restkit.conn", "socketpool" ] 
```

但是，当我现在尝试构建时，出现构建错误：

```
$ python setup.py build
running build
running build_exe
Traceback (most recent call last):
  File "setup.py", line 32, in <module>
    executables = [eggsacutibull]
  File "c:\python27\lib\site-packages\cx_Freeze\dist.py", line 365, in setup
    distutils.core.setup(**attrs)
  File "c:\python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "c:\python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "c:\python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "c:\python27\lib\distutils\command\build.py", line 127, in run
    self.run_command(cmd_name)
  File "c:\python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "c:\python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "c:\python27\lib\site-packages\cx_Freeze\dist.py", line 235, in run
    freezer.Freeze()
  File "c:\python27\lib\site-packages\cx_Freeze\freezer.py", line 570, in Freeze
    self.finder = self._GetModuleFinder()
  File "c:\python27\lib\site-packages\cx_Freeze\freezer.py", line 325, in _GetModuleFinder
    finder.IncludePackage(name)
  File "c:\python27\lib\site-packages\cx_Freeze\finder.py", line 534, in IncludePackage
    module = self._ImportModule(name, deferredImports)
  File "c:\python27\lib\site-packages\cx_Freeze\finder.py", line 274, in _ImportModule
    raise ImportError("No module named %r" % name)
ImportError: No module named 'socketpool' 
```

我在这里感到困惑的是，我的脚本编译得很好。此外，我可以从 python shell 导入这些模块。例如：

```
$ python
Python 2.7.1 (r271:86832, Nov 27 2010, 18:30:46) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import socketpool
>>> from restkit import Resource, BasicAuth, request
>>> 
```

python如何解析与cxfreeze不同的模块？

**Edit2：** 从 python 我可以这样做：

```
>>> import socketpool
>>> print socketpool.__file__
c:\python27\lib\site-packages\socketpool-0.5.2-py2.7.egg\socketpool\__init__.pyc 
```

那是寻找包裹的非标准地方吗？我可以使用 PYTHONPATH 强制 cxfreez 到那里寻找 socketpool 吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-17T23:52:09.757

我知道这个线程很旧，但我只花了 4 天的时间来解决这个问题，它可能对其他人有帮助，所以这里是：

cx_freeze 中对 include_files 选项的描述具有误导性。如果你想使用 build_exe 的 include_files 选项，这里有一个例子说明你是如何做到的

```
include_files=[
           (r"C:\Python27\Scripts\mk2ifcoremd.dll",               "mk2ifcoremd.dll"),
           (r"C:\Python27\Scripts\mk2ifportmd.dll",               "mk2ifportmd.dll"),
           (r"C:\Python27\Scripts\mk2imalloc.dll",                "mk2imalloc.dll"),
           (r"C:\Python27\Scripts\mk2iomp5md.dll",                "mk2iomp5md.dll"),
           (r"C:\Python27\Scripts\mk2mmd.dll",                    "mk2mmd.dll"),] 
```

您必须有一个元组列表，其中源的绝对路径和目标的***只有文件名***。我遇到了 cx_freeze 的问题，因为它没有/没有将所有必需的 DLL 复制到 dist 目录中。所以我的 exe 在我的机器上测试得很好，但在另一台没有安装 Python 的机器上没有工作。为了调试它，我不得不反复移动我的 Python 安装（将 C:\Python27 重命名为 C:_Python27）并查看是否缺少库。

这是一个适用于我的示例 setup.py 文件：

```
# invoke using:
#  python setup.py build

from cx_Freeze import setup, Executable

import sys
import glob
import os
import zlib
import shutil

# Remove the existing folders folder
shutil.rmtree("build", ignore_errors=True)
shutil.rmtree("dist", ignore_errors=True)

########################################
# Here is a list of the Executable options
########################################

#"script":               #the name of the file containing the script which is to be frozen
#"initScript":           #the name of the initialization script that will be executed before the actual script is executed; this script is used to set up the environment for the executable; if a name is given without an absolute path the names of files in the initscripts subdirectory of the cx_Freeze package is searched
#"base":                 #the name of the base executable; if a name is given without an absolute path the names of files in the bases subdirectory of the cx_Freeze package is searched
#"path":                 #list of paths to search for modules
#"targetDir":            #the directory in which to place the target executable and any dependent files
#"targetName":           #the name of the target executable; the default value is the name of the script with the extension exchanged with the extension for the base executable
#"includes":             #list of names of modules to include
#"excludes":             #list of names of modules to exclude
#"packages":             #list of names of packages to include, including all of the package's submodules
#"replacePaths":         #Modify filenames attached to code objects, which appear in tracebacks. Pass a list of 2-tuples containing paths to search for and corresponding replacement values. A search for '*' will match the directory containing the entire package, leaving just the relative path to the module.
#"compress":             #boolean value indicating if the module bytecode should be compressed or not
#"copyDependentFiles":   #boolean value indicating if dependent files should be copied to the target directory or not
#"appendScriptToExe":    #boolean value indicating if the script module should be appended to the executable itself
#"appendScriptToLibrary":#boolean value indicating if the script module should be appended to the shared library zipfile
#"icon":                 #name of icon which should be included in the executable itself on Windows or placed in the target directory for other platforms
#"namespacePackages":    #list of packages to be treated as namespace packages (path is extended using pkgutil)
#"shortcutName":         #the name to give a shortcut for the executable when included in an MSI package
#"shortcutDir":          #the directory in which to place the shortcut when being installed by an MSI package; see the MSI Shortcut table documentation for more information on what values can be placed here.
MY_TARGET_EXE = Executable(
    # what to build
    script = "main.py",
    initScript = None,
    base = 'Win32GUI',
    targetDir = r"dist",
    targetName = "MyProgram.exe",
    compress = True,
    copyDependentFiles = True,
    appendScriptToExe = False,
    appendScriptToLibrary = False,
    icon = None
    )

########################################
#Here is a list of the build_exe options
########################################
#1) append the script module to the executable
append_script_to_exe=False
#2) the name of the base executable to use which, if given as a relative path, will be joined with the bases subdirectory of the cx_Freeze installation; the default value is "Console"
base="Console"
#3) list of names of files to exclude when determining dependencies of binary files that would normally be included; note that version numbers that normally follow the shared object extension are stripped prior to performing the comparison
bin_excludes=[]
#4) list of names of files to include when determining dependencies of binary files that would normally be excluded; note that version numbers that normally follow the shared object extension are stripped prior to performing the comparison
bin_includes=[] 
#5) list of paths from which to exclude files when determining dependencies of binary files
bin_path_excludes=[]
#6) list of paths from which to include files when determining dependencies of binary files
bin_path_includes=[]
#7) directory for built executables and dependent files, defaults to build/
build_exe="dist/"
#8) create a compressed zip file
compressed=False
#9) comma separated list of constant values to include in the constants module called BUILD_CONSTANTS in form <name>=<value>
constants=[]
#10) copy all dependent files
copy_dependent_files=True
#11) create a shared zip file called library.zip which will contain all modules shared by all executables which are built 
create_shared_zip=True
#12) comma separated list of names of modules to exclude
excludes = ['_gtkagg', '_tkagg', 'bsddb', 'curses', 'email', 'pywin.debugger',
            'pywin.debugger.dbgcon', 'pywin.dialogs', 'tcl',
            'Tkconstants', 'Tkinter']
#13) include the icon in the frozen executables on the Windows platform and alongside the frozen executable on other platforms
icon=False
#13) comma separated list of names of modules to include
includes = ['sip', 'matplotlib.backends.backend_wxagg']
#15) list containing files to be copied to the target directory; 
#  it is expected that this list will contain strings or 2-tuples for the source and destination; 
#  the source can be a file or a directory (in which case the tree is copied except for .svn and CVS directories); 
#  the target must not be an absolute path
#
# NOTE: INCLUDE FILES MUST BE OF THIS FORM OTHERWISE freezer.py line 128 WILL TRY AND DELETE dist/. AND FAIL!!!
# Here is a list of ALL the DLLs that are included in Python27\Scripts 
include_files=[
           (r"C:\Python27\Scripts\mk2ifcoremd.dll",               "mk2ifcoremd.dll"),
           (r"C:\Python27\Scripts\mk2ifportmd.dll",               "mk2ifportmd.dll"),
           (r"C:\Python27\Scripts\mk2imalloc.dll",                "mk2imalloc.dll"),
           (r"C:\Python27\Scripts\mk2iomp5md.dll",                "mk2iomp5md.dll"),
           (r"C:\Python27\Scripts\mk2mmd.dll",                    "mk2mmd.dll"),
           (r"C:\Python27\Scripts\mk2_avx.dll",                   "mk2_avx.dll"),
           (r"C:\Python27\Scripts\mk2_blacs_ilp64.dll",           "mk2_blacs_ilp64.dll"),
           (r"C:\Python27\Scripts\mk2_blacs_intelmpi_ilp64.dll",  "mk2_blacs_intelmpi_ilp64.dll"),
           (r"C:\Python27\Scripts\mk2_blacs_intelmpi_lp64.dll",   "mk2_blacs_intelmpi_lp64.dll"),
           (r"C:\Python27\Scripts\mk2_blacs_lp64.dll",            "mk2_blacs_lp64.dll"),
           (r"C:\Python27\Scripts\mk2_blacs_mpich2_ilp64.dll",    "mk2_blacs_mpich2_ilp64.dll"),
           (r"C:\Python27\Scripts\mk2_blacs_mpich2_lp64.dll",     "mk2_blacs_mpich2_lp64.dll"),
           (r"C:\Python27\Scripts\mk2_blacs_msmpi_ilp64.dll",     "mk2_blacs_msmpi_ilp64.dll"),
           (r"C:\Python27\Scripts\mk2_blacs_msmpi_lp64.dll",      "mk2_blacs_msmpi_lp64.dll"),
           (r"C:\Python27\Scripts\mk2_cdft_core.dll",             "mk2_cdft_core.dll"),
           (r"C:\Python27\Scripts\mk2_core.dll",                  "mk2_core.dll"),
           (r"C:\Python27\Scripts\mk2_def.dll",                   "mk2_def.dll"),
           (r"C:\Python27\Scripts\mk2_intel_thread.dll",          "mk2_intel_thread.dll"),
           (r"C:\Python27\Scripts\mk2_mc.dll",                    "mk2_mc.dll"),
           (r"C:\Python27\Scripts\mk2_mc3.dll",                   "mk2_mc3.dll"),
           (r"C:\Python27\Scripts\mk2_p4n.dll",                   "mk2_p4n.dll"),
           (r"C:\Python27\Scripts\mk2_pgi_thread.dll",            "mk2_pgi_thread.dll"),
           (r"C:\Python27\Scripts\mk2_rt.dll",                    "mk2_rt.dll"),
           (r"C:\Python27\Scripts\mk2_scalapack_ilp64.dll",       "mk2_scalapack_ilp64.dll"),
           (r"C:\Python27\Scripts\mk2_scalapack_lp64.dll",        "mk2_scalapack_lp64.dll"),
           (r"C:\Python27\Scripts\mk2_sequential.dll",            "mk2_sequential.dll"),
           (r"C:\Python27\Scripts\mk2_vml_avx.dll",               "mk2_vml_avx.dll"),
           (r"C:\Python27\Scripts\mk2_vml_def.dll",               "mk2_vml_def.dll"),
           (r"C:\Python27\Scripts\mk2_vml_mc.dll",                "mk2_vml_mc.dll"),
           (r"C:\Python27\Scripts\mk2_vml_mc2.dll",               "mk2_vml_mc2.dll"),
           (r"C:\Python27\Scripts\mk2_vml_mc3.dll",               "mk2_vml_mc3.dll"),
           (r"C:\Python27\Scripts\mk2_vml_p4n.dll",               "mk2_vml_p4n.dll"),
# These next DLLs appear to be copied correctly or as needed by cxfreeze...   
#           (r"C:\Python27\Scripts\libgcc_s_sjlj-1.dll",           "libgcc_s_sjlj-1.dll"),
#           (r"C:\Python27\Scripts\libgfortran-3.dll",             "libgfortran-3.dll"),
#           (r"C:\Python27\Scripts\libssp-0.dll",                  "libssp-0.dll"),
#           (r"C:\Python27\Scripts\libstdc++-6.dll",               "libstdc++-6.dll"),
#           (r"C:\Python27\Scripts\pythoncom27.dll",               "pythoncom27.dll"),
#           (r"C:\Python27\Scripts\pywintypes27.dll",              "pywintypes27.dll"),
            ]
             #,("Microsoft.VC90.MFC", mfcfiles), ]
#16) include the script module in the shared zip file
include_in_shared_zip=True
#17) include the Microsoft Visual C runtime DLLs and (if necessary) the manifest file required to run the executable without needing the redistributable package installed
include_msvcr =False
#18) the name of the script to use during initialization which, if given as a relative path, will be joined with the initscripts subdirectory of the cx_Freeze installation; the default value is "Console"
init_script=""
#19) comma separated list of packages to be treated as namespace packages (path is extended using pkgutil)
namespace_packages=[]
#20) optimization level, one of 0 (disabled), 1 or 2
optimize=0
#21) comma separated list of packages to include, which includes all submodules in the package
packages = ['numpy.linalg']
#22) comma separated list of paths to search; the default value is sys.path
path = []
#23) Modify filenames attached to code objects, which appear in tracebacks. Pass a comma separated list of paths in the form <search>=<replace>. The value * in the search portion will match the directory containing the entire package, leaving just the relative path to the module.
replace_paths=[]
#24) suppress all output except warnings  
silent=False
#25) list containing files to be included in the zip file directory; it is expected that this list will contain strings or 2-tuples for the source and destination
zip_includes=[]

setup(
    version = "0.0",
    description = "This is a program that works",
    author = "Your Name Here",
    name = "A text description",

    options = {"build_exe": {
#                            "append_script_to_exe": append_script_to_exe,
#                            "base":                 base,
#                            "bin_excludes":         bin_excludes,
#                            "bin_includes":         bin_includes,
#                            "bin_path_excludes":    bin_path_excludes,
#                            "bin_path_includes":    bin_path_includes,
                            "build_exe":            build_exe,
                            "compressed":           compressed,
#                            "constants":            constants,
                            "copy_dependent_files": copy_dependent_files,
#                            "create_shared_zip":    create_shared_zip,
                            "excludes":             excludes,
#                            "icon":                 icon,
                            "includes":             includes,
                            "include_files":        include_files,
#                            "include_in_shared_zip":include_in_shared_zip,
#                            "include_msvcr":        include_msvcr,
#                            "init_script":          init_script,
#                            "namespace_packages":   namespace_packages,
#                            "optimize":             optimize,
                            "packages":             packages,
                            "path":                 path,
#                            "replace_paths":        replace_paths,
#                            "silent":               silent,    
#                            "zip_includes":         zip_includes, 
                             }
               },

    executables = [MY_TARGET_EXE]
    ) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T21:55:17.097

如果有人遇到过这个问题，问题似乎是 cxfreeze 不能很好地处理鸡蛋。一旦我从 egg 中提取代码（将其重命名为 zip 并解压缩），并为代码创建例如：Python27\Lib\site-packages\socketpool，然后运行构建，一切似乎都很好。

看起来像一个黑客。是时候洗澡了。

# localization - MonoTouch 和上传的二进制文件中的本地化

> ID：15486294
> 
> 赞同：2
> 
> 时间：2013-03-18T20:29:13.430
> 
> 标签：localization, xamarin.ios

将我的二进制文件上传到应用商店后，我转到二进制详细信息页面，发现它只显示一种语言？

```
Localizations :     ( "en" ) 
```

在上一个版本中，它看起来像

```
Localizations :     ( "en", "sv" ) 
```

我确实将目标从 iOS 6.1 更改为 iOS 5。

问题是，这有关系吗？该应用程序似乎运行良好？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:37:20.790

发布问题后自己发现了它。

en.lproj 和 sv.lproj 中的 .strings 文件必须设置为内容。它们被设置为捆绑资源。

# php - 加载使用 jQuery 滚动时动态创建的内容

> ID：15486298
> 
> 赞同：2
> 
> 时间：2013-03-18T20:29:39.867
> 
> 标签：php, javascript, jquery, ajax, scroll

是否可以使用像[Infinite Ajax Scroll](http://www.fieg.nl/infinite-ajax-scroll-a-jquery-plugin)这样的 jQuery 插件来加载使用 JavaScript 动态创建的内容？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:41:25.867

这是基础

```
$(window).scroll(function(){

if($(this).scrollTop()+$(this).height() == $("body").get(0).scrollHeight){  
// call function 
}

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:47:43.700

您的问题的答案是“是的，有可能”。

请阅读有关如何发布适当问题的指南，以便您充分利用社区。

该插件有大量文档，我建议您先阅读它。

[https://github.com/webcreate/Infinite-Ajax-Scroll#readme](https://github.com/webcreate/Infinite-Ajax-Scroll#readme)

和演示：

[http://www.fieg.nl/ias-demo](http://www.fieg.nl/ias-demo)

查看演示中的源代码以获得更好的解释如何使用它。

# c# - 在 JavaScript 中将 C# .NET DateTime.ticks 转换为天/小时/分钟

> ID：15486299
> 
> 赞同：11
> 
> 时间：2013-03-18T20:29:41.193
> 
> 标签：c#, javascript, .net, datetime

在我的系统中，我在 Ticks 中存储了一个持续时间，它被传递给我的客户端移动应用程序，然后我想从那里将​​ ticks 转换为人类可读的形式。在我的情况下，天，小时和分钟。

我的客户端移动应用程序是使用 Javascript 编码的，所以这就是我用来将持续时间转换为天/小时/分钟的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T20:29:41.193

在 C# .NET 中，单个滴答表示一百纳秒，或百万分之一秒。[[来源]](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)。

因此，为了从滴答数（四舍五入到最接近的整数）计算天数，我先乘以千万秒数，然后再乘以一天中的秒数（60以秒为单位，以 60 分钟为小时，以 24 小时为单位）。我使用模数运算符 (%) 来获取构成小时和分钟持续时间的余数。

```
var time = 3669905128; // Time value in ticks
var days = Math.floor(time/(24*60*60*10000000)); // Math.floor() rounds a number downwards to the nearest whole integer, which in this case is the value representing the day
var hours = Math.round((time/(60*60*10000000)) % 24); // Math.round() rounds the number up or down
var mins = Math.round((time/(60*10000000)) % 60);

console.log('days: ' + days);   
console.log('hours: ' + hours);   
console.log('mins: ' + mins); 
```

因此，在上面的示例中，滴答数等于 6 分钟（向上取整）。

再举一个例子，有 2,193,385,800,000,000 个滴答声，我们得到 2538 天 15 小时 23 分钟。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-09-28T19:24:26.497

```
var ticks = 635556672000000000; 

//ticks are in nanotime; convert to microtime
var ticksToMicrotime = ticks / 10000;

//ticks are recorded from 1/1/1; get microtime difference from 1/1/1/ to 1/1/1970
var epochMicrotimeDiff = Math.abs(new Date(0, 0, 1).setFullYear(1));

//new date is ticks, converted to microtime, minus difference from epoch microtime
var tickDate = new Date(ticksToMicrotime - epochMicrotimeDiff); 
```

根据[此页面](http://www.w3schools.com/jsref/jsref_setfullyear.asp)，setFullYear 方法返回“一个数字，表示日期对象与 1970 年 1 月 1 日午夜之间的毫秒数”。

查看[此页面](http://www.w3schools.com/js/js_date_methods.asp)以了解来自 javascript Date 对象的所有方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T21:03:13.497

你需要考虑两件事：

**.Net 的 DateTime 中的分辨率**
刻度为 0.1 微秒，而 Javascript 以毫秒为单位。

**偏移**
量 此外，.Net 从 1.1.0000 开始计数，而 Javascript 从 1.1.1970 开始计数。

[TeaFiles.Net](https://github.com/discretelogics/TeaFiles.Net)有一个 Time 类，它使用 Java = Javascript 滴答声。它有一个比例属性和一个预定义的 Timescale.Java 比例，可以从 .Net 转换为 Javascript。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-01T16:25:53.743

在**服务器端**，您可以使用扩展方法，如下所示：

```
public static class DateTimeExtensions {
    private static readonly long UnixEpochTicks = (new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc)).Ticks;

    public static long? ToJavascriptTicks(this DateTime? value) {
        return value == null ? (long?)null : (value.Value.ToUniversalTime().Ticks - UnixEpochTicks) / 10000;
    }
    public static long ToJavascriptTicks(this DateTime value) {
        return (value.ToUniversalTime().Ticks - UnixEpochTicks) / 10000;
    }
} 
```

使用这个扩展，您可以获得 javascript 滴答声，然后您只需将它们传递给客户端。

如果您使用的是 MVC：

你有 ViewModel：

```
public class MyViewModel {
   public long MyJsTicks { get; set; }
} 
```

和控制器：

```
public ActionResult Action() {
    long myJsTicks = DateTime.UtcNow.ToJavascriptTicks(); //<-- use the extension method

    MyViewModel viewModel = new MyViewModel();
    viewModel.MyJsTicks = myJsTicks;

    return View(viewModel);
} 
```

在**客户端**：

```
var jsticks = <the js ticks obtained from server-side>;
var mydatetime = new Date(jsticks); 
```

如果您为移动应用程序使用 Razor 视图引擎，则使用内联表达式从服务器端获取计算的 js 刻度非常简单：

```
var jsticks = @(Model.MyJsTicks);
var mydatetime = new Date(jsticks); 
```

最后，要从 javascript Date 对象中获取天数、小时数和分钟数：

```
var hours = mydatetime.getHours();
var minutes = mydatetime.getMinutes();
var seconds = mydatetime.getSeconds(); 
```

（正如您在 javascript“日期”对象参考中看到的那样：[https](https://www.w3schools.com/jsref/jsref_obj_date.asp) ://www.w3schools.com/jsref/jsref_obj_date.asp ）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-18T15:15:45.353

让我们让它更简单，壳我们？...

根据微软： public const long TicksPerDay = 864000000000；

[https://docs.microsoft.com/en-us/dotnet/api/system.timespan.ticksperday?view=net-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.timespan.ticksperday?view=net-5.0)

```
private int GetDaysDiff(DateTime fromDate, DateTime toDate)
{
    long ticksPerDay = 864000000000;

    long ticksDiff = Math.Abs(fromDate.Ticks - toDate.Ticks);

    var days = ticksDiff / ticksPerDay;

    return (int)days;
} 
```

就是这样！

# java - 如何在 Java 中创建具有一对一关系的唯一数据库记录文件？

> ID：15486307
> 
> 赞同：2
> 
> 时间：2013-03-18T20:29:51.030
> 
> 标签：java, hibernate, one-to-one

我有许多表与表客户端具有一对一的关系，由 Hibernate 映射。

在使用线程对这些表中的每一个进行选择后，我需要创建一个唯一客户端文件。

这些表格中的每一个（例如 Invoice、Service 等）也将包含在文件中，但在客户列表之后（政府要求，不要问为什么......）。

我想到了 3 种不同的方法来做到这一点：

**方法一：使用HashSet**

每次选择后，我将 Client 对象添加到 HashSet。遗憾的是，此解决方案不可扩展，因为表 B 可能有数百万条唯一记录，并可能导致 OutOfMemory 错误。

**方法2：使用视图**

我还可以创建一个加入表格的视图。问题是这些选择有许多复杂的规则并且经常变化。维护将是一场噩梦，因为它需要我更改程序和视图。

**方法三：使用临时表**

我可以创建一个临时表来存储在每个表中找到的客户端对象，然后对该表执行选择。

到目前为止，方法 3 似乎是最好的解决方案，但我想知道是否有更好的方法来做到这一点。如何改进我的设计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:50:24.007

我以错误的视角看待问题。

我专注于在每个线程中选择数据库并创建不同的文件（即一个用于发票，一个用于服务等），然后将所有文件合并为一个文件。这当然是一种解决方案，但它提出了上述问题。

第二种方法是首先选择数据库上的记录（线程和所有）。然后，可以使用模板引擎（例如 FreeMarker、Chunk...）或自定义格式化程序来创建文件。

使用线程有很多方法可以做到这一点（即使 run() 方法返回 void）：

*   使用带有 FutureTask 的 ExecutorService 来获取模型列表；
*   使用具有同步方法的静态对象来保存模型；
*   使用依赖注入将所述对象注入 Runnable 对象，使其成为单例。

# mule - 使用 MuleStudio 创建/部署用户 jar（不是流程）

> ID：15486311
> 
> 赞同：0
> 
> 时间：2013-03-18T20:30:01.613
> 
> 标签：mule, mule-studio

我有一个要作为用户 jar 部署到 Mule 的类。它包含一个扩展 AbstractTransformer 的类。

我在 Mule 中创建了一个简单的 Java 项目，并添加了我的类。它有错误，因为 AbstractTransformer 没有解决。

在项目属性、Java 构建路径、库选项卡中，我单击“添加库”并选择“Mule Runtime”库。出现一个弹出窗口，提示“已在 Studio 类路径中。无事可做。单击“完成””。

但是当我扩展那个库时，没有一个骡子罐子出现，骡子 AbstractTransformer 仍然没有解决。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:32:26.573

发生这种情况是因为影响工作室的[错误。](http://www.mulesoft.org/jira/browse/STUDIO-2694)它最近已修复，它将成为 Studio 3.4 的一部分。

高温高压

# r - 如何从结果矩阵创建回归摘要？

> ID：15486314
> 
> 赞同：0
> 
> 时间：2013-03-18T20:30:15.243
> 
> 标签：r, loops, latex

鉴于许多回归结果来自 xtable 不支持导出到 Latex 的类，我正在尝试创建自己的回归结果摘要。到目前为止，我已经能够创建以下矩阵：

```
> coef <- coefficients(summary(tob1))[,1]
> se <- sqrt(diag(vcov(tob1)))
> pvals <- 2*(1-pt(abs(coef)/se, df.residual(tob1)))
> ttob1 <- cbind(coef,se,pvals)
> ttob1
      coef           se            pvals
X1 175.1252128   19.861699207   0.000000e+00
X2 -0.3377459    0.252531805    1.810945e-01
X3 -113.7189271  14.943601767   2.864375e-14
X4 50.8150461    13.863303952   2.475501e-04
X5 -244.2535872  12.739088876   0.000000e+00
X6 -244.4901871  13.447635109   0.000000e+00
X7 -3.5817039    1.675738225    3.257835e-02 
```

现在我想创建一些函数来创建一个具有以下格式的表

```
X1 175.12
   (19.86)
X2 -.3377
   (.25)
X3 -113.72
   (14.94) 
```

我该怎么做？

# c - C 导航，无法编译

> ID：15486320
> 
> 赞同：-4
> 
> 时间：2013-03-18T20:30:37.803
> 
> 标签：c

作为学校项目的一部分，我必须构建一个程序，让用户穿过房子的房间。我是 C 新手，所以我有点卡在一个我无法解决的错误上。

该程序背后的概念是用户将通过带有数字的控制台输入方向命令，数字表示北，南，东，西的方向。

这是我的代码：

```
#include <stdio.h>
#include <string.h>
#include <conio.h>

#define North 0
#define East 1
#define South 2
#define West 3

typedef struct{
    char Description[200];
    unsigned int Exit[4];
}
location;

void SetupRooms();
void DescribeRoom(unsigned int RoomNumber);
void DescribeExits(unsigned int RoomNumber);
int GetDirection(unsigned int RoomNumber);

location Room[8]; 

void main(){
    unsigned int RoomNumber=1;
    signed int Direction;
    SetupRooms();

    while(1){
        //system("cls");
        DescribeRoom(RoomNumber);
        DescribeExits(RoomNumber);
        Direction = GetDirection(RoomNumber);
        if(Direction ==-1)
        {
            printf("\n BYE BYE!\n");
            break;//exit(0);
        }
        if(Direction > 0) 
            RoomNumber = Direction;
        else 
            printf("\n You just walked into a wall! \n");
    }
}

void SetupRooms()
{
    strcpy(Room[1].Description,"Hallway. ");
    Room[1].Exit[North] =5;
    Room[1].Exit[East]  =7;
    Room[1].Exit[South] =-1;
    Room[1].Exit[West]  =2;

    strcpy(Room[2].Description,"Dining Room. ");
    Room[2].Exit[North]=4;
    Room[2].Exit[East]=1;
    Room[2].Exit[South]=0;
    Room[2].Exit[West]=3;

    strcpy(Room[3].Description, "Kitchen. ");
    Room[3].Exit[North]=-1;
    Room[3].Exit[East]=2;
    Room[3].Exit[South]=0;
    Room[3].Exit[West]=0;

    strcpy(Room[4].Description, "Main Bedroom. ");
    Room[4].Exit[North] =0;
    Room[4].Exit[East]=5;
    Room[4].Exit[South]=2;
    Room[4].Exit[West]=-1;

    strcpy(Room[5].Description, "Bathroom. ");
    Room[5].Exit[North]=0;
    Room[5].Exit[East]=6;
    Room[5].Exit[South]=1;
    Room[5].Exit[West]=4;

    strcpy(Room[6].Description, "Kids Bedroom. ");
    Room[6].Exit[North]=0;
    Room[6].Exit[East]=0;
    Room[6].Exit[South]=7;
    Room[6].Exit[West]=5;

    strcpy(Room[7].Description, "Lounge. ");
    Room[7].Exit[North]=6;
    Room[7].Exit[East]=-1;
    Room[7].Exit[South]=0;
    Room[7].Exit[West]=1 ;

}

void DescribeRoom(unsigned int RoomNumber)
{
    printf("The room you are in is the: %s",Room[RoomNumber].Description);
}

void DescribeExits(unsigned int RoomNumber)
{
    if (Room[RoomNumber].Exit[North] != -1)
        printf("To the North is the: %d",Room[RoomNumber].Exit[North]);

    else 
        printf("No Exit to the North");

    if (Room[RoomNumber].Exit[East] != -1)
        printf("To the East is the: %d",Room[RoomNumber].Exit[East]);

    else 
        printf("No Exit to the East");

    if (Room[RoomNumber].Exit[South] != -1)
        printf("To the South is the: %d",Room[RoomNumber].Exit[South]);

    else 
        printf("No Exit to the South");

    if (Room[RoomNumber].Exit[West] != -1)
        printf("To the West is the: %d",Room[RoomNumber].Exit[West]);

    else 
        printf("No Exit to the West");

}

int GetDirection(unsigned int RoomNumber)
{
    int RetVal = -1;
    char Input = _getch();
    switch(Input)
    {
    case 'n':
        RetVal = 0;
        break;
    case 's':
        RetVal = 1;
        break;
    case 'e':
        RetVal = 2;
        break;
    case 'w':
        RetVal = 3;
        break;
    }
    return RetVal;
} 
```

这是我运行后得到的错误

```
;============ Building Project hose2 ============
;============ Linking ============
    Linker Error (Severity 4)
    No matching files for file specification:
    "|:\\acfs5\dt11\dt11ddf\my documents\cc386 projects\assign.prac.2.obj"
    Error: Unresolved External "_main" in Module "C:\tools\cc\clibs\platform\WIN32\pe\c0.c"
    Linker Error (Severity 255)
    Trouble opening "|:\\acfs5\dt11\dt11ddf\my documents\cc386 projects\hose2.lss" for output.
    Compile done.  Errors: 3,  Warnings: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:40:20.283

```
Error: Unresolved External "_main" in ... 
```

means the linker can't find the symbol called "_main" it was looking for. The `main` function is supposed to look like this:

```
int main() { ... } 
```

or, if you need command-line arguments, like this:

```
int main(int argc, char *argv[]) { ... } 
```

For future reference, you'll get a better response if you show you tried to narrow down the problem - here you could have removed *all* your code apart from `void main() {}` and still seen the same error. That would have been a pretty strong clue.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:35:22.587

您的 main 函数需要返回一个整数（非零被解释为错误）。

# javascript - 使用 Java Script 或 jQuery 计算特定项目并创建哈希图

> ID：15486330
> 
> 赞同：0
> 
> 时间：2013-03-18T20:31:14.993
> 
> 标签：javascript, jquery

我有这样的数据：

```
A,10,USA
B,20,UK
A,5,USA 
```

并且输出必须是这样的：

```
A has ran 15 miles with average of 7.5
B has ran 20 miles with average of 20 
```

在 jQuery 中，我编写了这样的代码：

```
$(document).ready(function(){
               $('#calculate').click(function(){
                $('#report').empty();
                var data = $('#input').val();

                 $.each($.csv.toArrays(data), function(_, row) {

                     var namecount = 0
                     $(row[0]).each(function(){
                        namecount++; 
                     });

                     var totalevents = 0;
                     $(row[1]).each(function(){
                        totalmiles++; 
                     });

                     var average = totalmiles / namecount;

                     $('#report').append('<div>' + row[0] + ' has ran ' + totalmiles +"  "+'miles with an average of'+"  "+average +'</div>');
                 });
               });
            }); 
```

但代码将总里程数和平均值计为 0 和 NaN。我曾尝试在 jQuery 中使用 Hashtable 来解决这个问题，但我还没有找到一个很好的指南来告诉我如何通过 javascript 或 jQuery 来实现这些计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:06:29.287

试试这是你的主要代码：

```
var aggregates = {};

$.each($.csv.toArrays(data), function(_, row) {
    var id = row[0];
    var miles = row[1];
    if (aggregates[id] === undefined) {
        aggregates[id] = {
            count : 0,
            miles : 0
        };
    }
    aggregates[id].miles += parseInt(miles);
    aggregates[id].count++;
});

for (id in aggregates) {
    $("#report").append(id + " ran " + aggregates[id].miles + " miles with average of " + (aggregates[id].miles / aggregates[id].count));
} 
```

这是它的小提琴：http: [//jsfiddle.net/7Ev7V/](http://jsfiddle.net/7Ev7V/)

在这里，聚合对象用作哈希表，以 id 作为键，对象以计数和英里作为值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:45:09.440

有几个问题，但最大的问题是您需要一个循环来收集信息，并需要第二个循环来显示它。如果不尝试，我怀疑这是完全正确的。

```
var totals = {};

$.each($.csv.toArrays(data), function(_, row) {

   var prev = totals[row[0]];
   if (!prev) {
      prev = {};
      prev.miles = 0;
      prev.count = 0;
      totals[row[0]] = prev;
   }

   prev.miles += row[1];
   prev.count++;
});

for (key in totals) {
   value = totals[key];
   $('#report').append('<div>' + key + ' has run ' + value.miles +"  miles with an average of  "+(value.miles / value.count)+'</div>');
} 
```

# lua - 用矩形种植一棵视觉树？

> ID：15486331
> 
> 赞同：1
> 
> 时间：2013-03-18T20:31:17.993
> 
> 标签：lua, geometry

给定矩形条（例如，大小为 50x10），我如何将它们绘制成看起来像一棵树的东西？给定一个起点，添加一个半随机条，然后在旧旋转的每一端添加一个或两个新条，自行旋转，并在其末端添加新条，依此类推到某个点. 我想这是一个几何问题——我如何找到正确的杆端来粘贴新的旋转杆？

我正在使用 Lua，但任何伪代码都会有所帮助，谢谢！

![在此处输入图像描述](../Images/e9fa2f0474bed7764748b59ce75b3f36.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:24:53.603

看看[L 系统](http://en.wikipedia.org/wiki/L-system)。它们可用于创建类似植物的结构。Wikipedia 文章有许多对网站的引用，您可以在其中玩弄这些网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:12:13.517

让我们看看我是否理解你问题的核心：你有一个段（条），你围绕它的一侧旋转某个角度，然后你想知道条另一端的位置。

您正在寻找的不只是正弦和余弦的几何定义吗？

见下文，对不起我糟糕的绘画技巧:)

![在此处输入图像描述](../Images/7b58a7c5f092c917c2d00999e7125e4c.png)

要使其“粘”，只需根据角度围绕矩形的右上角旋转，如下所示：

![在此处输入图像描述](../Images/4bb1dae377a0544d0e485e4b08f96a66.png)

# php - 即使文件/目录/位置存在，如何通过查询将 URL 重写为 index.php？

> ID：15486335
> 
> 赞同：0
> 
> 时间：2013-03-18T20:31:27.460
> 
> 标签：php, apache, url, rewrite

我正在尝试使用包含请求路径的查询参数将所有内容从我的网站重写为文件 index.php，但是当我只是简单地执行`RewriteRule ^(.*)$ index.php?url=$1 [L]`我的 index.php 文件时，会显示 url 包含 index.php ...简单地说，我想要键入 localhost/123 或 localhost/123.php 并始终在我的 url 参数中获取路径部分。

`print_r($_GET['url'])``Array ( [url] => index.php )`无论路径部分是什么，都输出。

对不起我的英语，希望你能明白我的意思:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:53:12.637

尝试在 RewriteRule 中使用不同的标志

而不是 [L]

> RewriteRule ^(.*)$ index.php?url=$1 [L]

尝试类似 [QSA]

> RewriteRule ^(.*)$ index.php?url=$1 [QSA]

有关不同类型标志的列表和信息，请查看 Apache 的文档

[http://httpd.apache.org/docs/current/rewrite/flags.html](http://httpd.apache.org/docs/current/rewrite/flags.html)

# actionscript-3 - 循环 3 次然后停止 - Flash AS3

> ID：15486338
> 
> 赞同：0
> 
> 时间：2013-03-18T20:31:36.310
> 
> 标签：actionscript-3, flash, loops, banner

这是我在我的主机上的代码。我需要页面只从上到下读取代码 3 次。即使你能想到我怎么做才能让它停止 45 秒。对不起，我脑死了，不能再思考了。有什么建议吗？

```
import com.greensock.*;
import com.greensock.easing.*;

import flash.utils.*;

function doStuff() {

    //startValues
    box1.back.rotationY = -90;
    box1.back.alpha=0;

    var flipSpeed:Number = .25; 
    var flipSpeedbea:Number = .04; 

    var tl:TimelineMax = new TimelineMax({delay:2});
    tl.append(TweenMax.to(box1.front, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
    tl.append(TweenMax.to(box1.back, 0, {alpha:1, immediateRender:false}))
    tl.append(TweenMax.to(box1.back, flipSpeed, {rotationY:0, ease:Linear.easeNone}))
    tl.append(TweenMax.to(box1.front, flipSpeed, {rotationY:0, visible:true, ease:Linear.easeNone}))
    var tb:TimelineMax = new TimelineMax({delay:4});

    box2.back2.rotationY = -90;
    box2.back2.alpha=0;

    tb.append(TweenMax.to(box2.front2, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
    tb.append(TweenMax.to(box2.back2, 0, {alpha:1, immediateRender:false}))
    tb.append(TweenMax.to(box2.back2, flipSpeed, {rotationY:0, ease:Linear.easeNone}))
    tb.append(TweenMax.to(box2.front2, flipSpeed, {rotationY:0, visible:true, ease:Linear.easeNone}))

    var ins:TimelineMax = new TimelineMax({delay:6});

    box3.back3.rotationY = -90;
    box3.back3.alpha=0;

    ins.append(TweenMax.to(box3.front3, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
    ins.append(TweenMax.to(box3.back3, 0, {alpha:1, immediateRender:false}))
    ins.append(TweenMax.to(box3.back3, flipSpeed, {rotationY:0, ease:Linear.easeNone}))
    ins.append(TweenMax.to(box3.front3, flipSpeed, {rotationY:0, visible:true, ease:Linear.easeNone}))

    var per:TimelineMax = new TimelineMax({delay:7});

    person.back_person.rotationY = -90;
    person.back_person.alpha=0;

    per.append(TweenMax.to(person.front_person, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
    per.append(TweenMax.to(person.back_person, 0, {alpha:1, immediateRender:false}))
    per.append(TweenMax.to(person.back_person, flipSpeed, {rotationY:0, ease:Linear.easeNone}));

    var bea:TimelineMax = new TimelineMax({delay:7});

    be_a.bea_back.rotationY = -90;
    be_a.bea_back.alpha=0;

    bea.append(TweenMax.to(be_a.bea_front, flipSpeedbea, {rotationY:90, visible:false, ease:Linear.easeNone}))
    bea.append(TweenMax.to(be_a.bea_back, 0, {alpha:1, immediateRender:false}))
    bea.append(TweenMax.to(be_a.bea_back, flipSpeedbea, {rotationY:0, ease:Linear.easeNone}));
    bea.append(TweenMax.to(be_a.bea_front, flipSpeedbea, {rotationY:0, visible:true, ease:Linear.easeNone}))

    stop();

    setTimeout(doStuff, 15000);
}

doStuff(); 
```

是否可以在 doStuff 上设置一个函数以仅继续运行 45 秒？基本上我需要功能“doStuff”以每次 15 秒播放 3 次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:26:09.877

如果您想调用`doStuff`3 次，间隔 15 秒，请`setTimeout`从内部删除对 的调用`doStuff`，然后执行以下操作：

```
var stuffTimer:Timer = new Timer(15000, 2);
stuffTimer.addEventListener(TimerEvent.TIMER, doStuff)
doStuff(null);
stuffTimer.start(); 
```

您需要更改`doStuff`方法以接受 TimerEvent：

```
function doStuff(e:TimerEvent):void
{
    [...]
} 
```

无关，您应该将您的导入移出`doStuff`方法并将它们与您的第一个导入语句组合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:32:04.283

第一个解决方案是使用变量作为计数器，这样您就不需要使用 Timer：

```
import com.greensock.*;
import com.greensock.easing.*;

import flash.utils.*;

var box1:Object;
var box2:Object;
var box3:Object;
var person:Object;
var be_a:Object;

function stop() {}

var stuffCount:uint = 0;

function doStuff() {

    stuffCount++;

    //startValues
    box1.back.rotationY = -90;
    box1.back.alpha=0;

    var flipSpeed:Number = .25; 
    var flipSpeedbea:Number = .04; 

    var tl:TimelineMax = new TimelineMax({delay:2});
    tl.append(TweenMax.to(box1.front, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
    tl.append(TweenMax.to(box1.back, 0, {alpha:1, immediateRender:false}))
    tl.append(TweenMax.to(box1.back, flipSpeed, {rotationY:0, ease:Linear.easeNone}))
    tl.append(TweenMax.to(box1.front, flipSpeed, {rotationY:0, visible:true, ease:Linear.easeNone}))
    var tb:TimelineMax = new TimelineMax({delay:4});

    box2.back2.rotationY = -90;
    box2.back2.alpha=0;

    tb.append(TweenMax.to(box2.front2, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
    tb.append(TweenMax.to(box2.back2, 0, {alpha:1, immediateRender:false}))
    tb.append(TweenMax.to(box2.back2, flipSpeed, {rotationY:0, ease:Linear.easeNone}))
    tb.append(TweenMax.to(box2.front2, flipSpeed, {rotationY:0, visible:true, ease:Linear.easeNone}))

    var ins:TimelineMax = new TimelineMax({delay:6});

    box3.back3.rotationY = -90;
    box3.back3.alpha=0;

    ins.append(TweenMax.to(box3.front3, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
    ins.append(TweenMax.to(box3.back3, 0, {alpha:1, immediateRender:false}))
    ins.append(TweenMax.to(box3.back3, flipSpeed, {rotationY:0, ease:Linear.easeNone}))
    ins.append(TweenMax.to(box3.front3, flipSpeed, {rotationY:0, visible:true, ease:Linear.easeNone}))

    var per:TimelineMax = new TimelineMax({delay:7});

    person.back_person.rotationY = -90;
    person.back_person.alpha=0;

    per.append(TweenMax.to(person.front_person, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
    per.append(TweenMax.to(person.back_person, 0, {alpha:1, immediateRender:false}))
    per.append(TweenMax.to(person.back_person, flipSpeed, {rotationY:0, ease:Linear.easeNone}));

    var bea:TimelineMax = new TimelineMax({delay:7});

    be_a.bea_back.rotationY = -90;
    be_a.bea_back.alpha=0;

    bea.append(TweenMax.to(be_a.bea_front, flipSpeedbea, {rotationY:90, visible:false, ease:Linear.easeNone}))
    bea.append(TweenMax.to(be_a.bea_back, 0, {alpha:1, immediateRender:false}))
    bea.append(TweenMax.to(be_a.bea_back, flipSpeedbea, {rotationY:0, ease:Linear.easeNone}));
    bea.append(TweenMax.to(be_a.bea_front, flipSpeedbea, {rotationY:0, visible:true, ease:Linear.easeNone}))

    stop();

    if (stuffCount < 3)
    {
        setTimeout(doStuff, 15000);
    }
}

doStuff(); 
```

第二种解决方案`Timer`：

```
import com.greensock.;
import com.greensock.easing.*;

import flash.events.TimerEvent;
import flash.utils.*;

function doStuff() {

    //startValues
    box1.back.rotationY = -90;
    box1.back.alpha=0;

    var flipSpeed:Number = .25; 
    var flipSpeedbea:Number = .04; 

    var tl:TimelineMax = new TimelineMax({delay:2});
    tl.append(TweenMax.to(box1.front, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
    tl.append(TweenMax.to(box1.back, 0, {alpha:1, immediateRender:false}))
    tl.append(TweenMax.to(box1.back, flipSpeed, {rotationY:0, ease:Linear.easeNone}))
    tl.append(TweenMax.to(box1.front, flipSpeed, {rotationY:0, visible:true, ease:Linear.easeNone}))
    var tb:TimelineMax = new TimelineMax({delay:4});

    box2.back2.rotationY = -90;
    box2.back2.alpha=0;

    tb.append(TweenMax.to(box2.front2, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
    tb.append(TweenMax.to(box2.back2, 0, {alpha:1, immediateRender:false}))
    tb.append(TweenMax.to(box2.back2, flipSpeed, {rotationY:0, ease:Linear.easeNone}))
    tb.append(TweenMax.to(box2.front2, flipSpeed, {rotationY:0, visible:true, ease:Linear.easeNone}))

    var ins:TimelineMax = new TimelineMax({delay:6});

    box3.back3.rotationY = -90;
    box3.back3.alpha=0;

    ins.append(TweenMax.to(box3.front3, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
    ins.append(TweenMax.to(box3.back3, 0, {alpha:1, immediateRender:false}))
    ins.append(TweenMax.to(box3.back3, flipSpeed, {rotationY:0, ease:Linear.easeNone}))
    ins.append(TweenMax.to(box3.front3, flipSpeed, {rotationY:0, visible:true, ease:Linear.easeNone}))

    var per:TimelineMax = new TimelineMax({delay:7});

    person.back_person.rotationY = -90;
    person.back_person.alpha=0;

    per.append(TweenMax.to(person.front_person, flipSpeed, {rotationY:90, visible:false, ease:Linear.easeNone}))
    per.append(TweenMax.to(person.back_person, 0, {alpha:1, immediateRender:false}))
    per.append(TweenMax.to(person.back_person, flipSpeed, {rotationY:0, ease:Linear.easeNone}));

    var bea:TimelineMax = new TimelineMax({delay:7});

    be_a.bea_back.rotationY = -90;
    be_a.bea_back.alpha=0;

    bea.append(TweenMax.to(be_a.bea_front, flipSpeedbea, {rotationY:90, visible:false, ease:Linear.easeNone}))
    bea.append(TweenMax.to(be_a.bea_back, 0, {alpha:1, immediateRender:false}))
    bea.append(TweenMax.to(be_a.bea_back, flipSpeedbea, {rotationY:0, ease:Linear.easeNone}));
    bea.append(TweenMax.to(be_a.bea_front, flipSpeedbea, {rotationY:0, visible:true, ease:Linear.easeNone}))

    stop();
}

function onTimer(event:TimerEvent):void
{
    doStuff();
}

var myTimer:Timer = new Timer(15000, 3);
myTimer.addEventListener(TimerEvent.TIMER, onTimer);
myTimer.start();
doStuff(); 
```

# twitter-bootstrap - 带有选项卡和轮播的 Angular Bootstrap

> ID：15486339
> 
> 赞同：0
> 
> 时间：2013-03-18T20:31:38.100
> 
> 标签：twitter-bootstrap, angularjs

我有一系列 Angular Bootstrap 选项卡（每个都包含一个轮播），我的 HTML 看起来像这样：

```
<tabs>
    <pane>
        <carousel>
            <slide>
                <div>Some content (Pane 1, Slide 1)</div>
            </slide>
            <slide>
                <div>Additional content (Pane 1, Slide 2)</div>
            </slide>
        </carousel>
    </pane>
    <pane>
        <carousel>
            <slide>
                <div>Some more content (Pane 2, Slide 1)</div>
            </slide>
            <slide>
                <div>Even more content (Pane 2, Slide 2)</div>
            </slide>
        </carousel>
    </pane>
</tabs> 
```

我需要能够判断单击选项卡时，哪张幻灯片处于活动状态。然后我获取幻灯片的标题并将其显示在另一个 div 上。有什么想法吗？

# java - 带有通配符和空值的sql语句

> ID：15486342
> 
> 赞同：0
> 
> 时间：2013-03-18T20:31:48.000
> 
> 标签：java, sql, null, wildcard

我有 4 个带有值的组合框，也可能是通配符“%”。如您所知，不会返回 NULL 值。

我使用了（COLUMN_NAME LIKE 'VALUE' OR COLUMN_NAME IS NULL），它以某种方式起作用，但这不是我需要的。例如，在这种情况下，我需要返回 NULL 值：

```
NAME = '%'
LASTNAME = '%'
ZIPCODE = '12345'
EMAIL = '%' 
```

基本上，我希望它返回所有邮政编码，如“12345”以及其他 3 个（姓名、姓氏、电子邮件）的空值。

不知道我是否清楚:(

如果我不是，请告诉我，

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:19:51.310

use LIKE operator in your SQL statements. According to your database, use NVL,ISNULL,IFNULL.

**Oracle;** NVL(NAME,' ') LIKE '%'
**MSSQL;** ISNULL(LASTNAME,' ') LIKE '%'
**MySQL;** IFNULL(EMAIL,' ') LIKE '%'

And use prepared statements. Do not build your SQL statements with merging string values. Prevent SQL injection.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:43:28.373

如果您不关心值是什么，也不关心它是否`null`存在，那么甚至不要在 where 子句中包含该列：

```
where zipcode = '12345' 
```

另外，我猜您的 '%' 值是用户选择不按该值搜索的结果。我会在你的程序中用不同的方式表示，可能是一个 Java`null`或一个空字符串“”，所以 '%' 仍然可能意味着更接近它在 SQL“like” where 子句片段中的含义——除`null`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:52:54.620

这是你想要的 -

```
 (lastname_col like :lastname or :lastname = '%' ) and 
    (zipcode_col like :zipcode or :zipcode = '%' ) and  
    and so on 
```

即使 :zipCode 为 '12345' 并且其余值为空，上面的 sql 也应该为您提供结果。

# c - 是否保证 pthread_cond_signal 会唤醒等待的线程？

> ID：15486346
> 
> 赞同：12
> 
> 时间：2013-03-18T20:31:53.940
> 
> 标签：c, pthreads, condition-variable

这是一个普遍的问题。例如，当前有两个子线程调用`pthread_cond_wait(&cond1,&mutex)`了，它们都在等待。然后，父线程调用

```
pthread_cond_signal(&cond1);
pthread_cond_signal(&cond1); 
```

接下来，我的问题是，是否保证两个等待线程都会被唤醒？（假设第一个被唤醒的线程稍后在某个执行阶段释放互斥锁，以便第二个线程可以获取它）。

我问这个问题的原因是，对于 Unix 系统级别的信号，信号（比如`SIGCHLD`）没有排队，因此如果连续传递多个相同类型的信号，它们可能会丢失。所以我想知道是`pthread_cond_signal`用不同的方式实现的，这样如果调度程序碰巧让父线程连续两次发出信号，它们就不会丢失？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T20:35:36.293

**快速回答：**

`pthread_cond_signal()`将唤醒**至少一个**在条件变量上被阻塞的线程 - 但不能保证超过这个值（作为参考，用于`pthread_cond_broadcast()`唤醒所有被阻塞的线程）。

从[这里](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_cond_signal.html)：

> pthread_cond_signal() 调用至少解除阻塞在指定条件变量 cond 上的线程之一（如果有任何线程在 cond 上阻塞）。
> 
> pthread_cond_broadcast() 调用解除对指定条件变量 cond 上当前阻塞的所有线程的阻塞。

**更长的答案：**

所以，根据规范，我假设解除阻塞是同步发生的，也就是说，第一次调用解除阻塞的线程将被`pthread_cond_signal()`第二次调用视为解除阻塞`pthread_cond_signal()`，因此另一个线程将被唤醒向上。

但是，我不知道您的特定 pthread 实现是否是这种情况（并且 glibc 网站目前非常狡猾，因此无法访问代码查看）。

**可能尚未实现但符合规范的答案：**

不过应该注意的是，该规范最近对如何确定在给定条件变量上实际阻塞哪些线程进行了略微改写`pthread_cond_signal()`，`pthread_cond_broadcast()`但我认为并非所有实现都已经赶上。

可以在[此处](http://austingroupbugs.net/view.php?id=609)找到有关该主题的长时间讨论，新规范为：

> pthread_cond_broadcast() 和 pthread_cond_signal() 函数应自动确定哪些线程（如果有）在指定的条件变量 cond 上被阻塞。该确定应在 pthread_cond_broadcast() 或 pthread_cond_signal() 调用期间的未指定时间发生。然后 pthread_cond_broadcast() 函数应解除对所有这些线程的阻塞。pthread_cond_signal() 函数应至少解除对这些线程之一的阻塞。

所以，结论：如果不是规范的专家解释者，我会说新文本支持这种同步发生的假设 - 因此两个连续调用`pthread_cond_signal()`两个可用的阻塞线程将唤醒两个线程。

不过，我不是 100% 确定这一点，所以如果有人可以详细说明，请随时这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-26T01:31:21.827

查看`pthread_cond_signal()`实现，有一条注释简要解释了代码的作用：

> 加载服务员序列号，它代表我们对任何服务员的相对排序。宽松的 MO 就足够了，因为：
> 
> 1.  我们可以选择外部happens-before约束允许的任何位置。特别是，如果`__pthread_cond_wait`我们之前发生了另一个电话，这个服务员必须有资格被我们叫醒。建立这种发生之前的唯一方法是在获得与 关联的互斥锁时发出信号，`condvar`并确保信号的关键部分发生在等待者之后。因此，互斥锁确保我们看到服务员的`__wseq`增加。
> 2.  一旦我们选择了一个位置，我们就不需要通过发生在我们设置的之前将其传达给程序：首先，任何唤醒都可能是虚假唤醒，因此程序不能解释唤醒作为服务员在特定信号之前发生的指示；其次，程序无法检测服务员是否尚未被唤醒（即，它无法区分未唤醒的服务员和已被唤醒但尚未恢复执行的服务员），因此它无法尝试推断出信号发生在特定服务员之前。

如前所述，在`pthread_cond_wait()`实现中有更多关于算法的信息：

> 这种`condvar`实现保证所有对信号和广播的调用以及每个等待调用的所有三个虚拟原子部分（即，（1）释放互斥体并阻塞，（2）解除阻塞，以及（3）重新获取互斥体）以某种与调用程序中的发生前关系一致的总顺序发生。但是，此顺序不一定会导致建立额外的先发生关系（这与允许的虚假唤醒非常吻合）。
> 
> `__wseq`所有服务员都在 64b 服务员序列 ( )中获得特定位置。此序列确定允许哪些服务员使用信号。广播等于发送与未阻塞的服务员一样多的信号。`__wseq`当一个信号到达时，它以一个宽松的MO负载（即下一个服务员将获得的位置）对当前值进行采样。（这已经足够了，因为它与happens-before一致；调用者可以通过在持有互斥锁的同时调用信号来强制执行更强的排序约束。）只有位置小于`__wseq`信号观察到的值的等待者才有资格使用这个信号。
> 
> 如果服务员只是旋转，这将很容易实现，但我们需要让他们使用 futexes 阻塞。Futex 不能保证按 FIFO 顺序唤醒，所以如果我们只使用一个 futex，我们就不能可靠地唤醒符合条件的服务员。另外，futex 词的大小是 32b，但是我们需要区分超过 1<<32 个状态，因为我们需要表示唤醒的顺序（以及因此哪些服务员有资格消费信号）；futex 中的阻塞不是原子的，等待者确定其在等待者序列中的位置，因此我们需要 futex 字来可靠地通知等待者他们不应再尝试阻塞，因为同时它们已经被发出信号。虽然 32b 值的 ABA 问题很少见，但当我们意识到它时忽略它也不是正确的做法。
> 
> 因此，我们使用 64b 的计数器来表示等待者序列（在仅支持 32b 原子的架构上，我们少用了几位）。为了使用 futexes 处理阻塞，我们维护了两组等待者：
> 
> *   G1 组由所有有资格消费信号的服务员组成；传入信号将始终向该组中的服务员发出信号，直到 G1 中的所有服务员都已发出信号。
> *   G2 组由在 G1 出现时到达的服务员组成，并且仍然包含尚未发出信号的服务员。当 G1 中的所有服务员都发出信号并且有新的信号到达时，新的信号会将 G2 转换为新的 G1，并为未来的服务员创建一个新的 G2。
> 
> 由于 process-shared ，我们无法分配新内存`condvars`，所以我们只有两个组槽，它们在 G1 和 G2 之间改变角色。每个都有一个单独的 futex 字、许多可供消费的信号、一个大小（组中尚未发出信号的服务员的数量）和一个引用计数。
> 
> 组引用计数用于维护正在使用组的 futex 的服务员数量。在一个组可以改变它的角色之前，引用计数必须表明没有服务员不再使用 futex；这可以防止 futex 字上的 ABA 问题。
> 
> 为了表示这些组覆盖了等待者序列中的哪些间隔（以及因此哪个组槽包含 G1 或 G2），我们使用 64b 计数器来指定 G1（包括）的起始位置，并使用等待者序列计数器中的单个位来表示表示当前包含 G2 的组槽。这允许我们以原子方式切换组角色。服务员在服务员序列中获得一个位置。G1 开始位置允许服务员确定他们是否在已经完全发出信号的组中（即，当前 G1 是否在服务员位置之后的位置开始）。服务员无法确定他们目前是在 G2 还是 G1 - 但他们也没有，因为他们只关心是否有可用的信号，
> 
> 信号员保持 G1 的初始大小，以便能够确定 G2 从何处开始（G2 在变为 G1 之前始终是开放式的）。他们跟踪一个组的剩余大小；当服务员取消等待时（由于 PThreads 取消或超时），他们也会减少这个剩余大小。
> 
> 为了实现`condvar`销毁要求（即，`pthread_cond_destroy`可以在所有等待者都收到信号后立即调用），等待者在开始等待之前增加一个引用计数，并在他们停止等待之后但就在他们获取与`condvar`.
> 
> `pthread_cond_t`因此由以下内容组成（用于标志的位，不是每个字段的主值的一部分，但对于使某些事物具有原子性或因为数据结构中的其他地方没有空间容纳它们是必需的）：
> 
> `__wseq`：服务员序列计数器
> 
> *   LSB 是当前 G2 的索引。
> *   服务员在获取与`condvar`. Signalers 加载它并同时对其进行 fetch-xor。 `__g1_start`：G1（含）起始位置
> *   LSB 是当前 G2 的索引。
> *   在获得`condvar`-internal 锁并由服务员同时观察时由信号员修改。 `__g1_orig_size`: G1 的初始大小
> *   两个最低有效位表示`condvar`-internal 锁。
> *   仅在获得`condvar`-internal 锁时访问。 `__wrefs`: 服务员参考计数器。
> *   如果服务员在删除最后一个引用时应该运行 futex_wake，则位 2 为真。 `pthread_cond_destroy`将此用作 futex 字。
> *   第 1 位是时钟 ID ( `0 == CLOCK_REALTIME`, `1 == CLOCK_MONOTONIC`)。
> *   如果这是一个进程共享，则位 0 为真`condvar`。
> *   服务员和 pthread_cond_destroy 使用的简单引用计数。（如果格式`__wrefs`改变，更新`nptl_lock_constants.pysym`和漂亮的打印机。）对于这两组中的每一个，我们都有： `__g_refs`: Futex 服务员引用计数。
> *   `futex_wake`如果服务员在删除最后一个引用时应该运行，则 LSB 为真。
> *   服务员与已获取 condvar 内部锁的信号器同时使用的引用计数。 `__g_signals`：仍然可以消耗的信号数。
> *   被服务员用作 futex 词。服务员和信号员同时使用。
> *   如果该组已完全发出信号（即，它已关闭），则 LSB 为真。 `__g_size`：保留在该组中的服务员（即尚未发出信号的服务员。
> *   由取消等待的信号器和服务员访问（两者都只有在获得`condvar`-internal 锁时才会这样做。
> *   G2 的大小始终为零，因为直到组变为 G1 才能确定。
> *   尽管这是无符号类型，但我们依靠使用无符号溢出规则来使其有效地保持负值（特别是当 G2 中的服务员取消等待时）。
> 
> A`PTHREAD_COND_INITIALIZER` `condvar`的所有字段都设置为零，这会产生`condvar`G2 从位置 0 开始的 a 和封闭的 G1。
> 
> 因为服务员在获取位置时不声明对组的所有权，`__wseq`但在使用 futex 阻塞时只对组进行引用计数，因此可能会在服务员增加引用计数之前关闭组。因此，服务员必须使用 . 检查他们的组是否已经关闭`__g1_start`。他们还必须在试图从`__g_signals`. 请注意，对于这些检查，使用宽松的 MO 加载`__g1_start`就足够了，因为如果服务员可以看到足够大的值，它也可能会消耗服务员组中的信号。
> 
> 服务员试图在`__g_signals`不持有引用计数的情况下从其中获取信号，这可能导致在他们自己的组已经关闭后从更新的组中窃取信号。他们不能总是检测到他们是否真的偷了，因为他们不知道他们什么时候偷了，但他们可以保守地向他们偷窃的群体添加一个信号；如果他们不必要地这样做，所发生的一切都是虚假的唤醒。为了降低这种可能性，`__g1_start`还包含当前 g2 的索引，这允许服务员检查组槽上是否存在别名；如果没有，他们没有从当前的 G1 窃取，这意味着他们窃取的 G1 肯定已经关闭，他们不需要修复任何东西。
> 
> 中的最后一个字段必须`pthread_cond_t`是`__g_signals[1]`: 前一个`condvar`使用了一个指针大小的字段 in `pthread_cond_t`，因此`PTHREAD_COND_INITIALIZER`该`condvar`实现中的 a 可能仅将 4 个字节初始化为零，而不是我们需要的 8 个字节（即总共 44 个字节而不是 48 个字节）我们需要）。 `__g_signals[1]`在第一个组切换（G2 从索引 0 开始）之前不被访问，这将在无害提取之后将其值设置为零 - 或者其返回值被忽略。这有效地完成了初始化。
> 
> 限制：
> 
> *   这`condvar`不仅仅是为了允许`__PTHREAD_COND_MAX_GROUP_SIZE * (1 << 31)`调用`__pthread_cond_wait`.
> *   `__PTHREAD_COND_MAX_GROUP_SIZE`不支持多于并发的服务员。
> *   除了 POSIX 允许的错误或记录在案的错误之外，我们还可以返回以下错误：
>     *   `EPERM`如果 MUTEX 是递归互斥体并且调用者不拥有它。
>     *   `EOWNERDEAD`或者`ENOTRECOVERABLE`在使用健壮的互斥锁时。与其他错误不同，这可能在我们重新获取互斥锁时发生；POSIX 不允许这样做（这要求所有错误在我们释放互斥锁或更改`condvar`状态之前虚拟发生），但我们真的无能为力。
>     *   使用的时候`PTHREAD_MUTEX_PP_* mutexes`，我们也可以返回所有返回的错误`__pthread_tpp_change_priority`。在这种情况下，我们已经释放了互斥锁，所以调用者不能期望拥有 MUTEX。
> 
> 其他注意事项：
> 
> *   我们使用 __pthread_mutex_unlock_usercnt(m, 0) / __pthread_mutex_cond_lock(m) 代替普通的互斥锁解锁/锁定函数，因为这些不会改变互斥锁内部用户计数，因此可以在 condvar 仍与特定关联时检测到互斥锁，因为有一个服务员在使用这个互斥锁的这个 condvar 上被阻塞。

从该文档中我们了解到，您可以从任何地方调用`pthread_cond_signal()`and `pthread_cond_broadcast()`。如果您从锁外部调用这些函数，那么除了以下内容之外，您没有非常强的保证：

1.  将`pthread_cond_signal()`至少唤醒一个线程，但如果两个调用*同时*到达那里，那么同一个线程可能会被拾取两次。
2.  `pthread_cond_broadcast()`无论如何都会唤醒所有线程。

但是，如果您使用互斥锁并`pthread_cond_signal()`在锁定区域内调用 from，则每次调用都会唤醒一个线程。（但是请注意，您的所有人都`pthread_cond_signal()`应该受到保护。）

因此，以下代码将被认为是安全的：

```
pthread_mutex_lock(mutex);
...
pthread_cond_signal(cond1);    // no mutex reference, these calls could happen
pthread_cond_signal(cond1);    // while the mutex is not locked...
pthread_cond_unlock(mutex); 
```

并且等待也使用锁：

```
pthread_mutex_lock(mutex);
...
pthread_cond_wait(cond1, mutex);
...
pthread_mutex_unlock(mutex); 
```

由于我们使用的是锁定的互斥体，因此信号和等待在内部按顺序处理，因此它完全按预期工作。

虽然有限制，但我们可能无法在普通应用程序中真正达到。例如`__PTHREAD_COND_MAX_GROUP_SIZE`，它代表服务员的最大数量，并且是一个疯狂的大数：

```
#define __PTHREAD_COND_MAX_GROUP_SIZE ((unsigned) 1 << 29) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-25T23:01:25.807

我知道这是一个旧线程（没有双关语），但典型的实现是这样的：

条件变量中将有一个当前处于睡眠状态的线程队列，等待它发出信号。

锁将有一个线程队列，这些线程已被置于睡眠状态，因为它们试图获取它但它被另一个线程持有。

cond_wait 将正在运行的线程添加到条件变量的队列中，释放锁，并使自己进入睡眠状态。

cond_signal 只是将一个休眠线程从条件变量队列移动到锁队列。

当正在运行的线程释放锁时，从锁的队列中移除一个休眠线程，锁的所有权转移给该休眠线程，并且该休眠线程被唤醒。

不要问我为什么规范说 cond_signal 可能会唤醒多个线程......

# c - 用指针交换变量

> ID：15486369
> 
> 赞同：0
> 
> 时间：2013-03-18T20:32:51.570
> 
> 标签：c, pointers, stack

```
void swap (int *px, int *py) {
int temp;
temp = *px;
*px = *py;
*py = temp;
} 
```

这将交换两个变量，这对我来说看起来不错。

现在如果我把它改成

```
void swap (int *px, int *py) {
int *temp;
*temp = *px;
*px = *py;
*py = *temp;
} 
```

注意 int *temp

无论如何，这仍然有效，但是 temp 在没有初始化的情况下被取消引用。

这不适合什么价值？

就像如果我想创建一个名为 proc 的方法，我怎么能保证程序会崩溃？我想我应该在堆栈上留下一些东西。

```
int main () {
int a = 1, b = 2;
proc(/* Some args might go here */);
swap(&a, &b);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:07:06.393

既然`int`是基本类型，为什么不...

`void swap (int *px, int *py) { int temp; temp = *px; *px = *py; *py = temp; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:11:25.273

您所做的是依靠好运气：未初始化的会`int *temp;`使用堆栈中的一些垃圾，如果您足够幸运，它的取消引用将使用 SIGSEGV（Windows 上的 AccessViolation）使程序崩溃，否则（而且更糟！）它会破坏一些现有内存位置的数据可能对程序至关重要，但它会在很久以后作为一个神秘的 geizenbug 出现。

因此，未初始化指针的行为完全取决于堆栈的状态，这实际上是随机的：取决于之前调用过的函数以及它们使用的数据量以及它们的局部变量。

# bash - 仅列出与模式匹配的目录名称

> ID：15486373
> 
> 赞同：33
> 
> 时间：2013-03-18T20:33:08.340
> 
> 标签：bash, shell

我对要获取的命令或修饰符有点困惑：名称包含模式的目录列表（仅目录，不包括子目录）。

提前致谢。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-18T20:34:58.860

您可能在`-d`切换后`ls`：

```
ls -d *pattern*/
ls --directory *pattern*/ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T20:34:47.737

使用这个小技巧：

```
printf '%s\n' *pattern*/ 
```

如果您更喜欢同一行：

```
echo *pattern*/ 
```

或使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")数组：

```
arr=( *pattern*/ )
printf '%s\n' "${arr[@]%/}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:12:17.257

这对我有用。

但它还输出目录特征、权限、日期等，我只想显示目录名称。

```
ls -t | grep '^d' | grep 'pattern' 
```

# python - Django推迟外键查找

> ID：15486375
> 
> 赞同：0
> 
> 时间：2013-03-18T20:33:25.520
> 
> 标签：python, database, django, query-optimization

工作一个 django 项目并试图加快调用速度。我注意到 Django 会自动执行第二个查询来评估任何外键关系。例如，如果我的模型看起来像：

```
Model Person:
    name = model.CharField("blah")

Model Address:
    person = model.ForeignKey(Person) 
```

然后我做：

```
p1 = Person("Bob")
address1 = Address(p1)
print (p1.id) #let it be 1 cause it is the first entry 
```

然后当我打电话时：

```
address1.objects.filter(person_id = "1") 
```

我得到：

查询 #1：选择`address`。`id`,`address.person_id`从`address`

查询 #2：选择`person`。`id`,`person.name`从`person`

我想摆脱第二个电话，查询＃2。我曾尝试使用 django 文档中的“延迟”，但这不起作用（实际上它会进行更多调用）。“价值观”是一种可能性，但在实际实践中，我想提取更多领域。我唯一想做的就是不评估外键。我很乐意取回 person_id，或者不取回。这大大减少了运行时间，尤其是当我执行如下命令时：Address.objects.all()，因为 Django 会评估每个外键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:28:13.953

Having just seen your other question on the same issue, I'm going to guess that you have defined a `__unicode__` method that references the ForeignKey field. If you query for some objects in the shell and output them, the `__unicode__` method will be called, which requires a query to get the ForeignKey. The solution is to either rewrite that method so it doesn't need that reference, or - as I say in the other question - use `select_related()`.

Next time, please provide full code, including some that actually demonstrates the problem you are having.

# javascript - JavaScript 函数 onhover in

> ID：15486376
> 
> 赞同：14
> 
> 时间：2013-03-18T20:33:26.697
> 
> 标签：javascript, html

我在 HTML 中得到了这段代码：

```
<div id="choice" onHover="npcRoll()">
    <p>Choose your weapon!</p>
    <button id="rock" onClick="choose(1)">Rock</button>
    <button id="paper" onClick="choose(2)">Paper</button>
    <button id="scissors" onClick="choose(3)">Scissors</button>
    <p>You chose <span id="userChoice"></span>!</p>
</div> 
```

这是我的 JavaScript 代码：

```
// Random
var random = function(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
};  

// NPC
var npc;
function npcRoll(){
    npc = random(1, 3);
} 
```

这是CSS代码：

```
#choice {
    margin: 0 auto;
    border: 2px solid gray;
    width: 350px;
} 
```

这个想法是每次用户将鼠标悬停在 NPC 上时都会滚动 NPC 编号，`<div>`但它不起作用。你能帮我吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-18T20:34:36.327

没有`onHover`事件，使用[`onmouseover`](http://www.w3.org/WAI/UA/TS/html401/cp0102/0102-ONMOUSE.html)：

```
<div id="choice" onmouseover="npcRoll()"> 
```

# ruby-on-rails - 将下拉值传递给 link_to

> ID：15486378
> 
> 赞同：0
> 
> 时间：2013-03-18T20:33:29.073
> 
> 标签：ruby-on-rails, drop-down-menu, link-to

我有多个link_tos，用于根据当前用户在数据库中创建记录。

我希望当前用户能够代表其他用户添加记录 - 例如通过添加一个下拉菜单，当前用户可以选择他想要代表哪个用户创建记录。

我有以下代码，需要对其进行调整以满足上述需求 - 请提供任何帮助:)

```
<%= collection_select(:user, :id, User.where(:department_id => current_user.department_id).all, :id, :firstname, :selected => current_user.id) %>

<% @myTemplates.where(:pickable => true).each do |template| %>
    <%= link_to shifts_path(:template_id => template.id, :shift_date => date), :method => :post do %>
        <%= template.type.name %>
    <% end %>
<% end %> 
```

在控制器中，我尝试了以下不起作用的方法 - 出现 NillClass 错误。

```
params[:user][:id] 
```

编辑：

```
21:38:38 web.1     | Started POST "/shifts?shift_date=2013-03-19&template_id=2" for 127.0.0.1 at 2013-03-19 21:10:31 +0100
21:38:38 web.1     | Processing by ShiftsController#create as HTML
21:38:38 web.1     |   Parameters: {"authenticity_token"=>"PMpPcxD9f1xh/KmTx2f0b8KZkYu91Q3n3zM7f5ie4zU=", "shift_date"=>"2013-03-19", "template_id"=>"2"}
21:38:38 web.1     |   User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
21:38:38 web.1     |   Template Load (0.1ms)  SELECT "templates".* FROM "templates" WHERE "templates"."id" = ? LIMIT 1  [["id", "2"]]
21:38:38 web.1     | Completed 500 Internal Server Error in 2ms
21:38:38 web.1     | 
21:38:38 web.1     | NoMethodError - undefined method `[]' for nil:NilClass:
21:38:38 web.1     |   app/controllers/shifts_controller.rb:14:in `create'
21:38:38 web.1     |   (gem) actionpack-3.2.11/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
21:38:38 web.1     |   (gem) actionpack-3.2.11/lib/abstract_controller/base.rb:167:in `process_action'
21:38:38 web.1     |   (gem) actionpack-3.2.11/lib/action_controller/metal/rendering.rb:10:in `process_action'
21:38:38 web.1     |   (gem) actionpack-3.2.11/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
21:38:38 web.1     |   (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:436:in `_run__200718806994229589__process_action__4067499974676832569__callbacks'
21:38:38 web.1     |   (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
21:38:38 web.1     |   (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
21:38:38 web.1     |   (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
21:38:38 web.1     |   (gem) actionpack-3.2.11/lib/abstract_controller/callbacks.rb:17:in `process_action'
...
... 
```

我的创建操作包含以下内容

```
@template = Template.find(params[:template_id])

submission_hash = {"user_id"      => params[:user][:id],
                   "type_id"      => @template.type_id,
                   "paytypes_id"  => @template.paytypes_id,
                   "shiftdate"    => params[:shift_date],
                   "shiftstart"   => @template.shiftstart,
                   "shiftend"     => @template.shiftend}

@shift = Shift.new(submission_hash) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:40:22.393

It doesn't really work this way... once the page is rendered you need to call JS to change it. Your options here are really 3

1.  Create an ajax endpoint that renderes the link_to and swap out the content of a container with the response. You could post the value of your dropdown onchange to the endpoint via XMLHTTPRequest

2.  Create a link_to for every item in your dropdown and show/hide them conditionally based on the value of the dropdown after an onchange event

3.  Bind the link itself and consturct it dynamically based on the content.

.

```
jQuery("a#link").bind("click", function (e) {
  e.preventDefault();
  var sel = jQuery("#dropdown").val();
  document.location = "/something/"+sel;

} 
```

Per the concept of doing this as a post, why not just parse the param of the dropdown in your controller to determine the action. I don't really understand the link_to thing?

# c++ - 在用 C++ 编写的 RTD 服务器中处理未知主题的正确方法是什么？

> ID：15486379
> 
> 赞同：1
> 
> 时间：2013-03-18T20:33:35.103
> 
> 标签：c++, excel, rtd

我正在用 C++ 为 Excel 编写一个 RTD 服务器。我已经实现了我的服务器，并且在大多数情况下它都可以工作。我遇到的问题是，当单元格调用 RTD 时，主题无效。例如，我可能有一个看起来像这样的调用： =RTD("MyRTDServer", "", "realtime", A1, "IOPerSec")

单元格 A1 最终将具有性能计数器的名称。第一次调用 ConnecteData 时，主题可能不是空白或无效，但在稍后的某个时间点，主题会因为 A1 的内容发生变化而发生变化。我想我会接到另一个 ConnectData 电话。

我的问题是：

1.  您可以在 ConnectData 中做一些事情来告诉 Excel 该主题无效吗？
2.  如果不能告诉 Excel 该主题无效，如何将 N/A 返回到 Excel？

# firebase - FirebaseAuthClient 中的回调参数可以带上下文参数吗？

> ID：15486383
> 
> 赞同：0
> 
> 时间：2013-03-18T20:33:38.903
> 
> 标签：firebase

我看到`on`Firebase ref 的方法可以采用回调上下文中的`context`参数。`this`这非常有用。我想知道 - 并希望 - 提供的回调函数`FirebaseAuthClient`也可以接受回调，但是我对示例、入门和 SDK 文档的严格审查没有提到它。我试图冲刷缩小`firebase-auth-client.js`，但我的理智仍然完好无损。

一个相关问题：FirebaseAuthClient 似乎不包含在 JavaScript SDK 区域中。它在任何地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:43:49.497

[Firebase 工程师]

Firebase 简单登录构造函数现在接受一个上下文参数作为其第三个参数。例如，要调用您的简单登录回调`myContextObj`作为其上下文：

```
var ref = new Firebase('https://<my-firebase>.firebaseio.com');
var simpleLogin = new FirebaseSimpleLogin(ref, function(error, user) { ... }, myContextObj); 
```

# jquery - 如何写“不是父母”

> ID：15486388
> 
> 赞同：1
> 
> 时间：2013-03-18T20:33:50.000
> 
> 标签：jquery

我想删除除跨度及其父母之外的某个“选择”之外的所有内容：

```
$('*').not('span:parents').remove(); 
```

这对我不起作用，尝试了很多没有运气的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T20:37:19.653

而不是选择所有元素，只需选择必须删除的顶级元素，其任何子元素`body`都没有`span`元素作为后代：

```
$('body').children().not($('span').parents()).remove(); 
```

`$('span').parents()`还将包含`body`必须保留的孩子。

演示：http: [//jsfiddle.net/dirtyd77/BaLAb/](http://jsfiddle.net/dirtyd77/BaLAb/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:37:11.897

我建议保存元素，删除其余元素，然后重新放置：

```
var saved = $('#a').closest('body>*').detach();
$(document.body).children().remove();
$(document.body).append(saved); 
```

[示范](http://jsbin.com/ocumer/1/edit)

编辑：使用费利克斯的回答，事实上你不必保存并放回去......

# java - Java中的实例和类（静态）变量有什么区别

> ID：15486392
> 
> 赞同：8
> 
> 时间：2013-03-18T20:34:02.777
> 
> 标签：java, static, instance-variables, class-variables

这个问题的标题实际上是以前的考试问题，我正在寻找澄清/答案。

请注意，我正在学习 Java，并且正在熟悉它的语法。

我知道这个问题之前可能已经被问过，如果可以的话，有人可以告诉我在哪里可以访问这个问题吗？如果是这种情况，请接受我的道歉。为了表明我一直在研究这个领域，我自己的理解是实例变量属于某个类（模板）的对象/实例，并且可以在需要时在该实例/对象内更改（变异）。

类变量是只有一个副本的变量，可以访问但不能修改（变异？），但根据需要对所有类都可用？

我在正确的轨道上吗？

另外，“静态”到底是做什么的？如果类的实例位于类的主实例中，它是否只是静态的？

非常感谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T20:36:08.240

静态变量由类的所有实例共享，而实例变量对类的每个实例都是唯一的。

静态变量的内存在编译时分配，它们在加载时加载并在类初始化时初始化。在实例变量的情况下，上述所有操作都是在运行时完成的。

## 这是一个有用的例子：

每个对象都有一个实例变量：每个对象都有自己的实例变量副本。

```
public class Test{

   int x = 5;

 }

Test t1 = new Test();   
Test t2 = new Test(); 
```

t1 和 t2 都有自己的 x 副本。

每个类一个静态变量：该类的每个对象共享同一个静态变量。

```
public class Test{

   public static int x = 5;

 }

Test t1 = new Test();   
Test t2 = new Test(); 
```

t1 和 t2 都将共享相同的 x。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T20:35:48.717

您可以创建类的多个实例。当您声明一个实例变量时，每个实例都会获得该变量的唯一副本。当您声明一个静态变量时，它是所有实例的相同变量和值。

```
public class Foo
{
    public int instanceVariable;
    public static int staticVariable;
}

Foo instance1 = new Foo();
Foo instance2 = new Foo();
instance1.staticVariable = 1;
instance1.instanceVariable = 2;
instance2.instanceVariable = 3;

instance1.staticVariable == 1 // true
instance2.staticVariable == 1 // true

instance1.instanceVariable == 2 //true
instance2.instanceVariable == 3 //true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:41:48.023

静态变量存储一个值，该值在定义它的类的所有实例（或非实例）之间共享。作为实例变量，每次按名称创建它的新副本。当创建新对象时。

# java - 无法使用 wsdl2java 从 wsdl 生成 java 类

> ID：15486395
> 
> 赞同：3
> 
> 时间：2013-03-18T20:34:29.227
> 
> 标签：java, webservice-client, wsdl2java

[我有使用StackService](http://www.servicestack.net/)从 .NET 应用程序生成的这个[wsdl](http://prehomol.apimobile.zap.com.br/soap11)文档。我正在使用[Apache CXF](http://cxf.apache.org/docs/wsdl-to-java.html)来获取一些生成的 java 类。

我正在运行以下命令（Windows）：

D:\SomePath>wsdl2java -dd:\temp [http://mywsdl.com](http://mywsdl.com)

结果如下：

*WSDLToJava 错误：*

*摘要：失败：50，警告：0*

*<<< 错误！*

*消息中的部分 <{ [http://schemas.servicestack.net/types](http://schemas.servicestack.net/types) }CadastroUsuarioOut> 引用类型 <{ [http://schemas.servicestack.net/types](http://schemas.servicestack.net/types) }CadastroUsuarioResponse> 在架构中找不到*

*消息中的部分 <{ [http://schemas.servicestack.net/types](http://schemas.servicestack.net/types) }ContratoImovelIn> 引用的类型 <{ [http://schemas.servicestack.net/types](http://schemas.servicestack.net/types) }ContratoImovel> 在模式中找不到*

再加上 48 个类似这些的部分消息错误

WSDL 是自动生成的，并且正在被其他系统成功使用。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-20T10:42:40.510

我收到了相同的错误消息（当然使用不同的 wsdl），并且我看到您的*<wsdl:type中有**<xsd:import* s。

 *我的问题的解决方案是将*schemaLocation*添加到*<xsd:import* s。

旧示例

```
<xsd:import namespace="http://schemas.servicestack.net/types"/> 
```

示例新

```
<xsd:import namespace="http://schemas.servicestack.net/types" schemaLocation="types.xsd" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:41:01.200

Check the 'types' section of the wsdl. The 'types' section defines various xml types used to exchange data in the SOAP message. Check out the sample wsdl file -

[http://heasarc.gsfc.nasa.gov/itwg/wsdl_all.html](http://heasarc.gsfc.nasa.gov/itwg/wsdl_all.html)

Verify if the 'types' section for your wsdl is valid and defines all the datatypes that are used by the service.

By looking at the error it looks like 'CadastroUsuarioResponse' and 'ContratoImovel' are missing in 'types' definition.*

# c# - 如何在 Sandcastle 帮助文件中包含自定义文档注释元素？

> ID：15486401
> 
> 赞同：1
> 
> 时间：2013-03-18T20:34:39.460
> 
> 标签：c#, sandcastle

在 C# 中，如果我有一个添加 XML 文档的方法，默认情况下会生成以下内容：

```
/// <summary>
/// Does something
/// </summary>
public string SomeValue { get; set; } 
```

我想添加我自己的文档注释，如下所示，这在 VS.NET 构建中很好：

```
/// <summary>
/// 
/// </summary>
/// <usage>Required</usage>
public string SomeValue { get; set; } 
```

问题是我没有看到输出文件`<usage>`上显示的新注释值。`.chm`我对使用 Sandcastle 很陌生，所以我可能很容易错过它，但我没有看到我在文档中寻找的内容。

有谁知道如何将`<usage>`值合并到我的输出帮助文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:39:03.060

[在 Sandcastle 中支持自定义标签](http://blogs.msdn.com/b/sandcastle/archive/2006/11/22/supporting-custom-tags-in-sandcastle.aspx?Redirected=true)是一篇旧文章，但可能仍然相关或至少为您指明了正确的方向。

# oop - Doctrine2 ORM 不保存对 DateTime 字段的更改

> ID：15486402
> 
> 赞同：24
> 
> 时间：2013-03-18T20:34:40.437
> 
> 标签：oop, doctrine-orm, encapsulation

我有一个用户实体：

```
use Doctrine\ORM\Mapping as ORM;

/**
 * ExampleBundle\Entity\User
 *
 * @ORM\Entity()
 */
class User
{
    // ...

    /**
     * @ORM\Column(type="service_expires_at", type="date", nullable=true)
     */
    private $service_expires_at;

    public function getServiceExpiresAt()
    {
        return $this->service_expires_at;
    }

    public function setServiceExpiresAt(\DateTime $service_expires_at)
    {
        $this->service_expires_at = $service_expires_at;
    }
} 
```

当我`service_expires_at`如下更新用户时，更新的`service_expires_at`值**不会**保存回数据库：

```
$date = $user->getServiceExpiresAt(); 

var_dump($date->format('Y-m-d')); // 2013-03-08

$date->modify('+10 days');

var_dump($date->format('Y-m-d')); // 2013-03-18

$user->setServiceExpiresAt($date);

$em->persist($user);
$em->flush(); 
```

但是，如果我将新`DateTime`对象传递给`service_expires_at`，则更新的值将正确保存：

```
$date = $user->getServiceExpiresAt(); 

$date->modify('+10 days');

$user->setServiceExpiresAt(new \DateTime($date->format('Y-m-d'));

$em->persist($user);
$em->flush(); 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-03-18T22:31:53.857

返回的`DateTime`实例`ExampleBundle\Entity\User#getServiceExpiresAt()` 是存储在实体本身中的相同对象，这会破坏[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。

Doctrine ORM 中的[UnitOfWork 对变更集进行严格比较](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/UnitOfWork.php#L581-L584)，这基本上意味着在包含对象的实体的属性的情况下，如果对象实例没有更改，则 ORM 不会检测到更改。

严格比较，以下是正确的：

```
$dateTime1 = new \DateTime('@0');
$dateTime2 = new \DateTime('@0');
$dateTime3 = $dateTime1;

var_dump($dateTime1 !== $dateTime2); // true
var_dump($dateTime1 === $dateTime3); // true

$dateTime1->modify('+1 day');

var_dump($dateTime1 === $dateTime3); // true 
```

这是 OOP 编程新手中非常常见的错误，可以通过修复 getter 和 setter 来快速解决，这样原始实例就不会在对象之外共享，如下例所示：

```
public function getServiceExpiresAt()
{
    return clone $this->service_expires_at;
}

public function setServiceExpiresAt(\DateTime $service_expires_at)
{
    $this->service_expires_at = clone $service_expires_at;
} 
```

这也将解决您的 Doctrine ORM 问题。

另外，请注意，这修复了您的逻辑中可能存在的泄漏。例如，以下代码有缺陷且难以调试（应用当前损坏的 getter/setter 时）：

```
$bankTransaction1 = $someService->getTransaction(1);
$bankTransaction2 = $someService->getTransaction(2);

// leak! Now both objects reference the same DateTime instance!
$bankTransaction2->setDateTime($bankTransaction1->getDateTime());

// bug! now both your objects were modified!
$bankTransaction1->getDateTime()->modify('+1 day'); 
```

因此，无论问题中的 ORM 部分如何，请不要破坏封装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T09:10:18.007

考虑为您的日期/时间属性使用[DateTimeImmutable类。](http://php.net/manual/en/class.datetimeimmutable.php)因此，请注意*DateTimeImmutable 不是 DateTime 的实例*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T08:42:53.197

当我尝试插入具有过去日期的实体时，我遇到了完全相同的问题（我也在尝试将旧数据库迁移到带有数据的新模式）。

我试图在 setter 和 getter 中克隆对象，但它没用。Doctrine 2 保存当前日期。检查架构，该字段是日期时间而不是时间戳，默认为空。

怎么会这样？

编辑：

请原谅我缺乏关注，我的同事开发添加了一个 prePersist 事件：

```
/**
 * @ORM\PrePersist
 */
function onPrePersist() {
    $this->created_at = new \DateTime('now');
} 
```

# alfresco - 露天 FTS 搜索

> ID：15486416
> 
> 赞同：0
> 
> 时间：2013-03-18T20:35:35.713
> 
> 标签：alfresco

有没有办法使用 FTS 搜索将结果列表限制为特定的模型类型？

另外，有没有办法对 FTS 搜索的结果进行分组？例子：

```
Node 1
  prop_A: ABC
  prop_B: 1/1/2013
  prop_C: this is some string description specific to node 1
  prop_D: 1

Node 2
  prop_A: ABC
  prop_B: 1/1/2013
  prop_C: this is some string description specific to node 2
  prop_D: 1

Node 3
  prop_A: DEF
  prop_B: 1/2/2013
  prop_C: this is some string description specific to node 3
  prop_D: 1 
```

你能创建一个只返回节点 1 和节点 3 的查询吗？由于 prop_A 和 prop_B 属性值相同，节点 1 和节点 2 应该组合在一起。

我正在使用[javascript webscript 搜索对象](http://wiki.alfresco.com/wiki/4.0_JavaScript_API#Search_API)。

```
var queryDef =
{
    query: "=prop_A:ABC",
    language: "fts-alfresco",
    onerror: "exception"
};

try
{
    model.articles = [];
    var nodes = search.query( queryDef );
}
catch(e) {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:42:27.857

这里有两个问题：

“有没有办法，使用 FTS 搜索，将结果列表限制为特定的模型类型？”

使用 TYPE:"cm:content" 子句按类型缩小结果。

对于分组问题，您应该在 Alfresco 中查找 solr facet support 的示例，并检查这是否符合您的要求。

# javascript - 使用 Greasemonkey 添加表单标签

> ID：15486420
> 
> 赞同：2
> 
> 时间：2013-03-18T20:35:47.553
> 
> 标签：javascript, forms, greasemonkey, labels

供应商的网络应用程序要求我在广播组中选择一个缩略图，然后点击保存，我必须这样做超过 300 次。而且他们没有礼貌地使单选按钮内容可点击。我以为 GM 会允许我这样做，但我不知道如何编写脚本。如果我可以让单选按钮继续并触发提交按钮，那就更好了。这是代码：

```
<div id="image1" class="image_selection">
<input type="radio" id="" class="" name="selectimageid" value="1"/>
<img id="1" class="thumb" src="/images/thumb1.jpg" /> 
</div>

<div id="image2" class="image_selection">
<input type="radio" id="" class="" name="selectimageid" value="2"/>
<img id="2" class="thumb" src="/images/thumb2.jpg" /> 
</div>

<input type="submit" id="" class="save_button" name="" value="" /> 
```

谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:41:28.500

要添加标签，请使用[jQuery](http://jquery.com/)和[jQuery 的`.wrap()`function](http://www.jqapi.com/#p=wrap)。这样的事情应该这样做：

```
$("input[name='selectimageid']").wrap ('<label></label>'); 
```

* * *

但是，我假设您希望缩略图成为标签的可点击部分。一个**完整的工作 Greasemonkey 脚本**是：

```
// ==UserScript==
// @name     _YOUR_SCRIPT_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

var imgRadioBtns = $("input[name='selectimageid']");

imgRadioBtns.each ( function () {
    var radBtn  = $(this);
    var toWrap  = radBtn.nextAll ("img.thumb").addBack ();

    toWrap.wrapAll ('<label></label>');
} ); 
```

# svg - 为 ajax 重新初始化 SVGweb

> ID：15486422
> 
> 赞同：2
> 
> 时间：2013-03-18T20:35:49.403
> 
> 标签：svg, svgweb

当页面被简单地加载（打开）时，我使用 SVGweb 没有问题。

如何重新初始化 SVGweb 以重绘页面上的所有 SVG？

换句话说，我需要 SVGweb 重新扫描和重新渲染页面上的所有内容。

来源（来自此）：

```
<script type="image/svg+xml">
  <svg>
    ...
  </svg>
</script> 
```

对此（就像 SVGweb si 在打开页面时那样做）：

```
<svg>
...
</svg> 
```

我需要这个，因为我使用 ajax 更改了 SVG 图形并且需要在页面上重新呈现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-26T05:20:28.943

我需要相同的功能，并想出了如何在不修改 svgweb 源或`_onDOMContentLoaded()`手动调用处理程序的情况下正确执行此操作。事实上，它是原生支持的。

诀窍是将您的 SVG 元素（重新）附加到 DOM`window.svgweb.appendChild()`上，这会导致节点由 svgweb 处理，如[svgweb 手册中所述](http://svgweb.googlecode.com/svn/trunk/docs/UserManual.html#dynamic_root)。

**例如，使用 jQuery：**

```
// Iterate over all script elements whose type attribute has a value of "image/svg+xml".
jQuery('body').find('script[type="image/svg+xml"]').each(function () {
    // Wrap "this" (script DOM node) in a jQuery object.
    var $this = jQuery(this);
    // Now we use svgweb's appendChild method. The first argument is our new SVG element
    //  we create with jQuery from the inner text of the script element. The second
    //  argument is the parent node we are attaching to -- in this case we want to attach
    //  to the script element's parent, making it a sibling.
    window.svgweb.appendChild(jQuery($this.text())[0], $this.parent()[0]);
    // Now we can remove the script element from the DOM and destroy it.
    $this.remove();
}); 
```

为了使其正常工作，我建议使用专用 div 包装所有 SVG 脚本标签，以便在附加 SVG 元素时将其附加到不包含其他节点的父元素。这消除了在此过程中无意中重新排序节点的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:26:04.447

使用新的 SVGweb 代码（通过 Ajax）更改 DOM 后

```
<script type="image/svg+xml">
  <svg>
    ...
  </svg>
</script> 
```

需要执行这个：svgweb._onDOMContentLoaded();

但是之前需要在svg-uncompressed.js或者svg.js的核心源码中注释一行

svg-uncompressed.js 来自

```
 if (arguments.callee.done) {
      return;
    } 
```

到

```
 if (arguments.callee.done) {
      //return;
    } 
```

svg.js：找到并删除这个：

```
arguments.callee.done=true; 
```

或替换为

```
arguments.callee.done=false; 
```

**编辑**：

另一个适用于 IE9 的修复：

对于 svg.js

从

```
var a=document.getElementById("__ie__svg__onload");if(a){a.parentNode.removeChild(a);a.onreadystatechange=null} 
```

到

```
var IEv=parseFloat(navigator.appVersion.split("MSIE")[1]);if(IEv<9){var a=document.getElementById("__ie__svg__onload");if(a){a.parentNode.removeChild(a);a.onreadystatechange=null;a=null;}} 
```

对于 svg-uncompressed.js

从

```
 // cleanup onDOMContentLoaded handler to prevent memory leaks on IE
    var listener = document.getElementById('__ie__svg__onload');
    if (listener) {
      listener.parentNode.removeChild(listener);
      listener.onreadystatechange = null;
      listener = null;
    } 
```

到

```
 // cleanup onDOMContentLoaded handler to prevent memory leaks on IE
    var IEv=parseFloat(navigator.appVersion.split("MSIE")[1]);
    if (IEv<9) {
        var listener = document.getElementById('__ie__svg__onload');
        if (listener) {
          listener.parentNode.removeChild(listener);
          listener.onreadystatechange = null;
          listener = null;
        }
    } 
```

# ios - 将收藏夹添加到 FBFriendPickerViewController

> ID：15486424
> 
> 赞同：2
> 
> 时间：2013-03-18T20:35:58.567
> 
> 标签：ios, facebook, cocoa-touch

我有一个 FBFriendPickerViewController 提示我的用户选择朋友。很多时候朋友都是一样的，所以我想在顶部创建一个名为“收藏夹”的部分，在其中添加一些最常用的参与者。

如何访问好友列表并添加用户？

# mysql - SQL 查询中的多个 WHERE 子句

> ID：15486426
> 
> 赞同：2
> 
> 时间：2013-03-18T20:36:02.373
> 
> 标签：mysql, sql

在我添加另一个 where 子句`T.TokenType = facebook`.

我们可以有尽可能多的 where 子句吗？

还是我在其他地方搞砸了。

仅供参考，我有一个成员的 facebookID，并想获取他/她的**facebook**访问令牌和**系统**memberID。

```
SQL = "SELECT M.MemberID, M.FacebookID, T.MemberID, T.TokenType, T.Token_Code"
    SQL = SQL & " FROM MEMBERS M, TOKENS T"
    SQL = SQL & " WHERE M.FacebookID = "& strUserID &" AND M.MemberID = T.MemberID AND T.TokenType = facebook"
    Set objMember = objConn.Execute(SQL) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:37:34.987

`facebook`似乎是一个字符串，所以我会说你缺少引号，尝试`T.TokenType = facebook`用`T.TokenType = 'facebook'`. 是的，你可以有尽可能多的条件......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:38:45.717

难道是这样，而不是

```
T.TokenType = facebook 
```

你要

```
T.TokenType = 'facebook' 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:37:35.720

您需要将字符串值封装在引号中，即`T.TokenType = "facebook"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T20:37:56.993

可能，`facebook`不是列名。尝试添加引号：

```
AND T.TokenType = 'facebook' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T20:39:58.603

你有错误吗？普通 sql 将允许尽可能多的子句，因此添加另一个子句无关紧要。另外，令牌是字符串吗？如果是这样，它需要引号。

# ios - 获取 CABasicAnimation 的即时值

> ID：15486430
> 
> 赞同：1
> 
> 时间：2013-03-18T20:36:10.277
> 
> 标签：ios, objective-c, layer, cabasicanimation

当我在实现一个游戏时，我只是在前面，我认为这很容易，但不知道如何解决它。从我的声誉可以看出，我在 Objective-c 方面有点新意 :(

问题是，我有一个动画，它可以正常工作。这是代码：

```
CABasicAnimation * bordgauche = [CABasicAnimation animationWithKeyPath:@"transform.translation.x"];
bordgauche.fromValue = [NSNumber numberWithFloat:0.0f];
bordgauche.toValue = [NSNumber numberWithFloat:749.0f];
bordgauche.duration = t;
bordgauche.repeatCount = 1;
[ImageSuivante.layer addAnimation:bordgauche forKey:@"bordgauche"]; 
```

我想得到我的形象的当前位置。所以我使用：

```
CALayer *currentLayer = (CALayer *)[ImageSuivante.layer presentationLayer];
currentX = [(NSNumber *)[currentLayer valueForKeyPath:@"transform.translation.x"] floatValue]; 
```

但我没有立即明白。当我使用 nslog 打印它时，我得到一次“Current = 0.0000”，这是起始值，但之后没有其他值。我一直不知道如何获取我的图像 currentX 的即时位置。

我想我是不稳定的。谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T16:52:18.753

您可以从图层的表示层获取值。

```
CGPoint currentPos = [ImageSuivante.layer.presentationLayer position];
NSLog(@"%f %f",currentPos.x,currentPos.y); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T21:18:11.887

我认为您在这里有 3 个选项（如果有更多选项，请发表评论）：

**选项1：**将您的第一个动画分成两部分，当前半部分结束时开始动画的后半部分加上另一个动画

```
...
bordgauche.toValue = [NSNumber numberWithFloat:749.0f / 2];
bordgauche.duration = t/2;
bordgauche.delegate = self // necessary to catch end of anim
[bordgauche setValue:@"bordgauche_1" forKey: @"animname"]; // to identify anim if more exist

...

- (void)animationDidStop:(CAAnimation *)theAnimation finished:(BOOL)flag {
    if ([theAnimation valueForKey: @"animname"]==@"bordgauche_1") {
         CABasicAnimation * bordgauche = [CABasicAnimation
                  animationWithKeyPath:@"transform.translation.x"];
         bordgauche.fromValue = [NSNumber numberWithFloat:749.0f / 2];
         bordgauche.toValue = [NSNumber numberWithFloat:749.0f];
         bordgauche.duration = t/2;
         bordgauche.repeatCount = 1;
         [ImageSuivante.layer addAnimation:bordgauche forKey:@"bordgauche_2"];

         // plus start your second anim 
} 
```

**选项 2：**设置 NSTimer 或 CADisplayLink（这更好）回调并不断检查动画层的参数。测试触发第二个动画所需值的参数。

```
displayLink = [NSClassFromString(@"CADisplayLink") displayLinkWithTarget:self selector:@selector(check_ca_anim)];
[displayLink setFrameInterval:1];
[displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];

... or
animationTimer = [NSTimer scheduledTimerWithTimeInterval:(NSTimeInterval)(1.0 / 60.0) target:self selector:@selector(check_ca_anim) userInfo:nil repeats:TRUE];
[[NSRunLoop mainRunLoop] addTimer:animationTimer forMode:NSRunLoopCommonModes];

- (void) check_ca_anim {
    ...
    CGPoint currentPosition = [[ImageSuivante.layer presentationLayer] position];
    // test it and conditionally start something
    ...
} 
```

**选项3：**设置一个CADisplayLink（现在可以称为“gameloop”）并通过计算和设置动画对象的适当参数自己管理动画。不知道你想创建什么样的游戏我会说游戏循环可能对其他游戏特定的原因有用。另外在这里我提到了 Cocos2d，它是一个很棒的游戏开发框架。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T20:39:49.977

您可以尝试从图层的表示层获取值，该值应该接近屏幕上显示的内容：

```
[ [ ImageSuivante.layer presentationLayer ] valueForKeyPath:@"transform.translation.x" ] ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-30T14:57:49.530

我会在*@codedad*指出的内容中添加一个选项。有趣的是，它可以精确地获取动画层的即时值（您可以查看 CALayer 的[动画属性列表](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/AnimatableProperties/AnimatableProperties.html)），而且非常简单。

如果你覆盖方法

```
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx; 
```

在您的 UIView 类中（是的，您需要为您的“ImageSuivante”视图实现一个从*UIView*派生的自定义类），然后在那里传递的参数*层将为您提供您所需要的。*它包含用于绘图的精确值。

例如，在这种方法中，您可以更新一个适当的即时变量（以便稍后使用），然后如果您不用手绘制，则调用 super：

```
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)context {
    self.instantOpacity = layer.opacity;
    self.instantTransform = layer.transform;
    [super drawLayer:layer inContext:context];
} 
```

请注意，此处的*层*通常与*self.layer***不同**的对象（其中*self*是您的自定义 UIView），因此例如*self.layer.opacity*会给您目标不透明度，但不是即时的，而*self.instantOpacity*在代码之后上面将包含您想要的即时值。

 ***请注意，这是一种**绘图**方法，它可能会被非常频繁地调用，因此无需进行不必要的计算或任何繁重的操作。

这个想法的来源是 Apple 的[Custom Animatable Property](https://developer.apple.com/library/ios/samplecode/sc2284/Introduction/Intro.html#//apple_ref/doc/uid/DTS40014302-Intro-DontLinkElementID_2)项目。***

# c# - 从货币中删除小数点

> ID：15486431
> 
> 赞同：2
> 
> 时间：2013-03-18T20:36:13.913
> 
> 标签：c#, string-formatting, currency

我正在转换数据以进行导出。

该文件以美分而不是美元显示数据。

所以 1234.56 需要打印为 123456

有没有办法做到这一点`string.Format`？

或者是乘以 100 的唯一解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:37:57.973

您可以使用 string.Replace(".", string.empty)。但这并不是完全本地化的。您可以添加检查“，”以及国际货币的情况。但这就是我会做的。

[编辑]

也刚刚发现：http: [//msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

“N”数字说明符允许您更改用于分隔整数和小数部分的符号。

```
<code>

decimal num = 123.456m;
NumberFormatInfo ci = CultureInfo.CurrentCulture.NumberFormat;
ci.CurrencyDecimalSeparator = " "; // You can't use string.Empty here, as it throws an exception.
string str = num.ToString("N", ci).Replace(" ", string.Empty);

</code> 
```

像这样的东西应该可以解决问题，并且是本地化的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:42:50.447

那是渲染问题。当然，乘以 100 得到美分就可以了。

美国使用小数点来区分美元和美分。但并非所有国家都这样做。您的“乘以 100”解决方案仅适用于使用 100 个小数单位表示单个整数的货币。（日元在日本并非如此。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:39:16.900

If it is that simple, just do `String.Replace('.','');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T20:46:00.610

如果您知道这些值将始终有 2 个小数位，那么这样做非常简单

```
var strVar = 1234.56;
var somevalues   = string.Format("{0:######}", strVar * 100); 
```

`output = 123456`

# asp.net - 你如何从后面的代码发送 - signalR 1.0.1？

> ID：15486433
> 
> 赞同：0
> 
> 时间：2013-03-18T20:36:18.530
> 
> 标签：asp.net, signalr

我有一种使用 signalR 和 asp.net 的情况。[我的实现与asp.net](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)上的聊天示例非常相似

我的问题是如何从后面的代码发送？所有示例都使用旧版本的 SignalR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:47:10.513

在您的集线器内创建一个`void`这样的：

```
public static void UpdateClients()
{
    var context = GlobalHost.ConnectionManager.GetHubContext<NameOfHub>();
    context.Clients.All.ClientSideFunction();
} 
```

然后用作：

```
NameOfHub.UpdateClients(); 
```

# internet-explorer - 在 Internet Explorer 中设置元素状态

> ID：15486439
> 
> 赞同：3
> 
> 时间：2013-03-18T20:36:30.907
> 
> 标签：internet-explorer, internet-explorer-10

我是跨浏览器测试和调试我的网站，专门测试Internet Explorer 10版本。我用的是IE的F12开发者工具，我想设置一个元素状态，比如hover或者active，所以我可以修改关联的css元素。我发现使用 Google Chrome 和 Firefox-Firebug 很容易做到这一点。有谁知道如何用 IE 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T12:26:07.040

您可以*查看*在各种状态下应用的 CSS，但不能*设置*集合。

* * *

要查看在某个状态下应用的 CSS：

1.  找到你需要的元素
2.  打开开发者工具
3.  聚焦开发者工具的窗口
4.  悬停你想要的元素
5.  按 F5 不移动鼠标
6.  Ctrl+B 并单击元素

**来源：**所以答案 -[有没有办法在 IE 开发人员工具中测试 CSS :hover？](https://stackoverflow.com/questions/13573302/is-there-a-way-to-test-css-hover-in-ie-developer-tools/18868482#18868482)

# android - Android WiFi-直接连接和广播

> ID：15486441
> 
> 赞同：0
> 
> 时间：2013-03-18T20:36:34.703
> 
> 标签：android, connection, broadcast, wifi-direct

1) Android 设备与另一台 Android 设备建立 WiFi-Direct 连接需要多长时间？我从 GM 那里看到了一些消息，他们正在开发一些带有 WiFi-Direct 的系统，他们声称他们可以在大约 1 秒内连接。（但他们不适用于 Android 手机）。从 Android SDK 来看，WiFi-Direct 的工作方式与蓝牙非常相似：发现、配对、连接......

我想知道在 Android 手机上连接设备（从发现到建立连接）的速度有多快。

2) 是否可以使用 WiFi-Direct 进行广播？例如，设备 A 有 WiFi-Direct 与设备 B、C、D、E 连接，它想要广播一些信息。

我手头没有支持 WiFi Direct 的设备，只是想问一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:08:12.380

是的。如果它充当组所有者，它可以广播。例如，在您的情况下，如果 A 充当组所有者，它将向 B、C、D、E 广播数据。现在，如果您想知道什么是组所有者，那么具有 WIFI 的设备在连接时直接形成一个组，组外的一个设备充当组所有者。

# jsf - 带有 PrimeFaces AjaxBehavior 的 Facelet 标记文件导致 javax.el.PropertyNotFoundException: Target Unreachable

> ID：15486443
> 
> 赞同：0
> 
> 时间：2013-03-18T20:36:42.707
> 
> 标签：jsf, jsf-2, primefaces, facelets, tagfile

我最近发现了 Facelet 标记文件作为复合组件的替代品，这要归功于 BalusC 编写的许多 stackoverflow 答案，并且一直在使用它们来解决 PrimeFaces 数据表的问题。我想将 p:dataTable 的一堆杂项属性标准化为一个组件/facelet，但是一些我希望是可选的属性，比如“selectionMode”，不能评估为空字符串，否则组件会被破坏（参见[http:/ /forum.primefaces.org/viewtopic.php?f=3&t=29066](http://forum.primefaces.org/viewtopic.php?f=3&t=29066)）。使用 Facelet 标记文件，我根据存在的可选属性有条件地呈现了备用 p:dataTables。

但是现在我对嵌套在 dataTable 中的 AjaxBehaviors 的 EL 表达式有一个新问题。

/WEB-INF/tags/dataTable.xhtml 的简化示例：

```
<ui:composition>
  <p:dataTable var="row"
               value="#{value}"
               filteredValue="#{state.filteredValue}"
               first="#{state.first}"
               rows="#{state.rows}">
    <f:event type="preRenderComponent" listener="#{state.onPreRenderComponent}"/>
    <p:ajax event="page" listener="#{state.onPage}"/>
    <p:ajax event="sort" listener="#{state.onSort}"/>
    <p:ajax event="filter" listener="#{state.onFilter}"/>
    <ui:insert/>
  </p:dataTable>
</ui:composition> 
```

使用标签文件的示例页面：

```
<my:dataTable value="#{mybean.list}" state="#{mybean.state}">
  <p:column headerText="Name"
            sortBy="#{row.name}"
            filterBy="#{row.name}">
    #{row.name}
  </p:column>
</my:dataTable> 
```

看起来我的“状态”表达式处理得很好，直到三个 p:ajax 事件被执行。事件被破坏（即分页/排序无效）并记录以下堆栈跟踪：

```
 12:36:06,660 WARNING [javax.enterprise.resource.webcontainer.jsf.lifecycle] (http--0.0.0.0-8080-3) Target Unreachable, identifier 'state' resolved to null: javax.el.PropertyNotFoundException: Target Unreachable, identifier 'state' resolved to null
    at org.apache.el.parser.AstValue.getTarget(AstValue.java:98) [jbossweb-7.0.13.Final.jar:]
    org.apache.el.parser.AstValue.invoke(AstValue.java:244) [jbossweb-7.0.13.Final.jar:]
    org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278) [jbossweb-7.0.13.Final.jar:]
    org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    org.primefaces.component.behavior.ajax.AjaxBehaviorListenerImpl.processCustomListener(AjaxBehaviorListenerImpl.java:70) [primefaces-3.5.jar:]
    org.primefaces.component.behavior.ajax.AjaxBehaviorListenerImpl.processArgListener(AjaxBehaviorListenerImpl.java:59) [primefaces-3.5.jar:]
    org.primefaces.component.behavior.ajax.AjaxBehaviorListenerImpl.processAjaxBehavior(AjaxBehaviorListenerImpl.java:47) [primefaces-3.5.jar:]
    org.primefaces.event.data.SortEvent.processListener(SortEvent.java:45) [primefaces-3.5.jar:]
    javax.faces.component.behavior.BehaviorBase.broadcast(BehaviorBase.java:106) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final] 
```

当实现为复合组件时，不存在此问题，即正确使用#{cc.attrs.state} 函数与这些AjaxBehaviors。

我对 Facelet 标记文件的范围和生命周期、它们的属性和 EL 表达式的理解是有限的。我是否遇到了 p:ajax 的错误，或者我的“状态”表达式仅在早期阶段有效？

仅供参考，“mybean”和“state”对象使用 CDI 和 CODI，定义如下：

```
@Named("mybean")
@ViewAccessScoped
@SuppressWarnings("serial")
public class MyBean implements Serializable {

    private List<SomeEntiy> list;

    @Inject
    private DataTableState state;

    public List<SomeEntity> getList() {
        return list;
    }

    public DataTableState getState() {
        return state;
    }

    // Details about loading the list hidden

} 
```

...和...

```
@Dependent
@SuppressWarnings("serial")
public class DataTableState implements Serializable {

    private final static Logger log = Logger.getLogger(DataTableState.class.getName());

    private List<?> filteredValue;
    private int first;
    private int rows = 20;

    private Map<String,String> filters = new HashMap<String,String>();

    private ValueExpression sortBy;
    private String sortOrder;

    public List<?> getFilteredValue() {
        return filteredValue;
    }

    public void setFilteredValue(List<?> filteredValue) {
        this.filteredValue = filteredValue;

        if (filteredValue == null && !filters.isEmpty()) {
            if (log.isLoggable(Level.FINEST))
                log.finest("setFilteredValue: Resetting filters");
            filters.clear();
        }
    }

    public int getFirst() {
        return first;
    }

    public void setFirst(int first) {
        this.first = first;
    }

    public int getRows() {
        return rows;
    }

    public void setRows(int rows) {
        if (log.isLoggable(Level.FINEST))
            log.finest("setRows: " + rows);

        this.rows = rows;
    }

    public Map<String,String> getFilters() {
        return filters;
    }

    public void onPreRenderComponent(ComponentSystemEvent event) {
        DataTable source = (DataTable) event.getSource();
        if (sortBy != null)
            source.setValueExpression("sortBy", sortBy);
        if (sortOrder != null)
            source.setSortOrder(sortOrder);
    }

    public void onPage(PageEvent event) {
        DataTable source = (DataTable) event.getSource();
        first = source.getFirst();
    }

    public void onSort(SortEvent event) {
        UIColumn column = event.getSortColumn();
        sortBy = column.getValueExpression("sortBy");

        if (event.isAscending())
            sortOrder = "ascending";
        else
            sortOrder = "descending";
    }

    public void onFilter(FilterEvent event) {
        Map<String,String> filters = event.getFilters();
        this.filters.clear();
        this.filters.putAll(filters);
    }

} 
```

# php - 如何使用用户输入编写一个 mysql where 查询（使用 PHP 的 XML 过滤器）

> ID：15486446
> 
> 赞同：0
> 
> 时间：2013-03-18T20:36:58.233
> 
> 标签：php, xml

我需要一些帮助。我正在尝试将特定行从 sql 过滤到 XML 文件中

```
$query = "SELECT * FROM lbs_ WHERE 1"; 
```

如果我使用它，它会显示 SQL 数据库中的所有行，我想要做的只是显示一个等于来自表单的查询的行

表单代码如下

```
<a href="phpsqlajax_genxml3.php?msisdn=<? echo $rows['msisdn']; ?>" class="update"> 
```

如果我使用以下内容：

```
$query="SELECT * FROM lbs_ WHERE msisdn='$msisdn'"; 
```

URL 显示了查询，但它不只过滤该行，然后在 XML 文件中不显示任何数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:41:01.967

您可能只需要使用`$_GET`超全局数组：

```
$msisdn = $_GET['msisdn'];
$query = "SELECT * FROM lbs_ WHERE msisdn='$msisdn'"; 
```

在现代 PHP 主机上，URL 参数不会自动转换为变量（这是一个安全问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:41:11.820

您必须将 URL（GET 变量）中的值读取到 PHP 变量中：

```
 $msisdn = $_GET['msisdn']; 
```

然后，在将其放入查询之前进行验证（例如，使用[`mysqli_real_escape_string`](http://php.net/manual/en/mysqli.real-escape-string.php)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:42:58.150

试试这个

```
$query="SELECT TOP 1 * FROM lbs_ WHERE msisdn='$msisdn'"; 
```

您可能还想在最后包含某种排序顺序。

# javascript - 使用交互式帖子在 google+ 上发布图片

> ID：15486449
> 
> 赞同：2
> 
> 时间：2013-03-18T20:37:05.970
> 
> 标签：javascript, google-plus

有什么方法可以将图像添加到 google+ 上的交互式帖子中？

[https://developers.google.com/+/web/share/interactive](https://developers.google.com/+/web/share/interactive)

看起来它从`contenturl`参数中提取图像。但我似乎无法以任何方式控制这个图像。也许我们可以在这个页面上放置某种类似开放图的标记？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:57:02.740

如您所述，交互式帖子共享的标题、描述和图像数据基于 contenturl 参数。特别是，它使用来自该页面的片段信息，如[https://developers.google.com/+/web/snippet/中所述](https://developers.google.com/+/web/snippet/)

您可以使用开放图形标记，它应该可以正常工作，尽管最近出现了一些问题。正如代码片段文档所述，最好使用 schema.org 微数据。

# javascript - JS Date() 需要不正确的数据才能返回正确的结果

> ID：15486463
> 
> 赞同：-1
> 
> 时间：2013-03-18T20:37:49.933
> 
> 标签：javascript, date, cookies

我正在创建一个必须“永不”过期的 cookie，尽管我不确定这是否可行，所以作为一种妥协，我决定将“过期：”日期设置为 2099/12/31 23:59:59。但是，要获得此日期，我需要将其设置如下：

```
var killdate = new Date(2099, 11, 31, 23, 59, 59); 
```

现在，除非我错过了什么，否则没有 11 月 31 日，那我为什么要这样设置日期呢？

这更像是一个好奇的事情，而不是我的代码的主要问题（虽然，我想确保我没有搞砸任何事情），但我的在线研究并没有成功地为我清理它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:39:56.347

来自[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)：

> **month**
> 表示月份的整数值，从 0 开始表示 1 月到 11 表示 12 月。

月份从 0 到 11，而不是 1 到 12。实际上，您设置的日期是 2099 年 12 月 31 日。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:42:04.620

请注意，某些浏览器存在日期过去的问题`2038`（`unix epoch time`超过 a时`32-bit` `int`）

```
var killdate = new Date(2099, 11, 31, 23, 59, 59); 
```

*现在，除非我错过了什么，否则没有 11 月 31 日，那我为什么要这样设置日期*呢？

这只是未来使用的日期，离现在还很远。在您的示例中，日期实际上是 `31-Dec-2099 23:59:59`（月数从 0 到 11）

只是为了了解**您的好奇心**：

JS Date 对象是从 Java 1.0 移植过来的，这就是原因。继承了它的所有缺陷。

除日期外的所有内容都是从 0 开始的，[请参阅此处以获取包括范围在内的完整列表](http://www.w3schools.com/jsref/jsref_obj_date.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:42:51.370

这些天数是指任何给定月份中较长的天数，而不是特定的天数。

```
Max hours = 23
Max minutes = 59
Max seconds = 59
Max days = 31
Max months = 12
Max years = varies/changes 
```

They never depend on each other. I think that if you're using UNIX timestamps they account for the days of the month.

# jquery - Rails 通过 erb 与 jquery 通信

> ID：15486465
> 
> 赞同：0
> 
> 时间：2013-03-18T20:37:52.300
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我正在查询 Rails 是否通过 erb 中的 has many through 关系存在记录：

```
<% if @hack.serials %> 
```

最终，如果“@hack”中不存在“序列”，我想通过 jquery 将“显示：无”添加到 div 的类中。

有没有一种通过erb在rails和jquery之间进行通信的模式？

**编辑**

这里的想法是，如果没有数据，那么我不希望选项卡及其内容出现。并且在编辑“hack”并重新加载页面之前，div“chart-table”将没有数据，因此不需要变得可见。

```
<div class = "chart-table" 
  <% if @hack.serials %>
    <%= raw 'style="display:block"' %>
  <% end %>>
<!-- TABS -->
<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Chart</a></li>
    <li><a href="#tabs-2">Last 5 Table</a></li>
  </ul>
<!-- CHART -->
<div id="tabs-1">
  <div id="container" style="height: 500px; min-width: 500px"></div>
</div>
<!-- TABLE -->
<div id="tabs-2">
  <table class = "table-condensed">
    <%= @hack.id %>
    <% @hack.serials.each do |s| %>  
    <tr>
       <th>Series Title</th>
        <th>Series Name</th>
        <th>Series Id</th>
      <% s.observations.sort{|a,b| a.id <=> b.id}.last(5).each do |o| %>
        <th><%= o.date %></th>
      <% end %>
    </tr>    
    <tr>
      <td><%= link_to s.title, [@hack, s] %></td>
      <td><%= s.series_name %></td>
      <td><%= s.id %></td>
    <% s.observations.sort{|a,b| a.id <=> b.id}.last(5).each do |o| %>
      <% if s.units_short == 'Mil. of $' %>
        <td><%= number_to_currency(convertMtoBHack(o.value), :precision => 0) %></td>
        <% else %>
          <td><%= number_to_currency(o.value, :precision => 0) %></td>
        <% end %>
      <% end %>
    </tr>
    <tr>
      <td><%= s.frequency_short %></td>
      <td><%= s.units_short %></td>
    </tr>
    <% end %>
  </table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:04:46.760

我不确定你为什么觉得需要通过 jQuery 来做这件事。

为什么不直接写div的style属性呢？

```
<div <%= @hack.serials ? 'style="display:none"' : '' %>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:02:55.580

就像是：

```
<script>
    <% unless @hack.serials.map(&:name).include? "My Serial" %>
        $('#my_serial_id').css('display', 'none');
    <% end %>
</script> 
```

如果您正在寻找名称为“我的序列”的序列并且没有找到它，则停止显示相应的 div。

Rails 代码在服务器端执行，然后呈现给执行 javascript 的客户端。所以你可以将任何你想要的东西从 Rails 传递给 javascript。

FIY 将 javascript 传递给 Rails 需要其他技巧和神奇的东西（例如 ajax）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:12:22.230

在某些 ajax 类之后（在 DOM 重新加载之前）会显示这个 div 吗？如果没有，我会质疑你是否应该写它。

我会对 Mark Hollands 的回答保持警惕，因为尽管它有效，但如果您将来对该元素进行任何 UI 更改，它可能会出现问题。如果您需要编写元素，我会坚持使用直接条件并将“静态”代码放在部分中：

```
<% if @hack.serials %>
  <div>
    <%= render 'something' %>
  </div>
<% else %>
  <div style='display:none'>
    <%= render 'something' %>
  </div>
<% end %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T03:19:51.643

Rails 热线的好人帮我找到了答案。

```
<% if @hack.serials.present? %>
  <div class = "chart-table">
    <!-- TABS -->
    <div id="tabs">
      <ul>
        <li><a href="#tabs-1">Chart</a></li>
        <li><a href="#tabs-2">Last 5 Table</a></li>
      </ul>
    </div>
  </div>
<% end %> 
```

如果 "empty" @hack.serials 返回一个空数组但返回 true。使用@hack.serials.present？如果它是一个空数组，这是我正在寻找的行为，则返回 false。

# dojo - 零散的 Dojo 构建文档

> ID：15486468
> 
> 赞同：2
> 
> 时间：2013-03-18T20:38:00.603
> 
> 标签：dojo

我一直在寻找一种方法来自动从其他层中排除公共层中包含的模块，以减少我们构建中重复代码的数量。[在进行谷歌搜索时，我遇到了来自https://dojotoolkit.org/reference-guide/1.8/build/profiles.html?highlight=layerdependencies](https://dojotoolkit.org/reference-guide/1.8/build/profiles.html?highlight=layerdependencies "这里")的“layerDependencies” 。在此之前，我一直在查看 writeAMD 文档，在[此处输入链接描述](http://dojotoolkit.org/reference-guide/1.7/build/transforms/writeAmd.html#build-transforms-writeamd "这里")。这两个页面似乎都是针对 Dojo 1.8 的，但包含的似乎是层定义中可以包含的内容的互斥定义（例如，“copyright”与“copyrightFile”）。

我的直觉告诉我其中一个文档已经过时，应该被弃用，可悲的是，我的直觉也告诉我它可能是以前的链接。但是，当与 writeAMD 的语法混合时，layerDependencies 在我的构建中起作用。

这两个文件都有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:53:13.637

您是对的，`layerDependencies`是旧（1.7 之前）构建系统的一部分。当前构建代码`layerDependencies`移至`exclude`.

**util\build\v1xProfiles.js**

```
layer.exclude = transformLayerDependencies(layer.layerDependencies, layer.name); 
```

这是我在创建构建时使用的教程。

[http://dojotoolkit.org/documentation/tutorials/1.8/build/](http://dojotoolkit.org/documentation/tutorials/1.8/build/)

* * *

编辑 - 澄清我对 exclude 属性的使用

exclude 是要排除的模块数组，而不是层。所以在配置文件中，我定义了一个包含一组模块的变量，

```
var profile = (function(){

    var coreRequires = [        
        "dojo/_base/declare",
        "dojo/_base/fx",
        "dojo/_base/lang",
        "dojo/currency",
        "dojo/fx",
        "dojo/number",
        "dojo/on",
        "dojo/query"
    ];

    ... 
```

然后我在定义层的包含和排除时使用这个变量。

```
 layers: {
        "myApp/core": {
            include:    coreRequires
        },

        "myApp/appLayer1": {
            include:    [
                "myApp/CustomWidget1",
                "myApp/CustomWidget2",
                ...
            ],
            exclude: coreRequires
        }
    } 
```

# c# - 将通用实例转换为非通用实例

> ID：15486469
> 
> 赞同：2
> 
> 时间：2013-03-18T20:38:06.847
> 
> 标签：c#, generics, types

我有一个定义如下的类：

```
class ProxyWithSetter<T> : ProxyValue where T : Value 
```

它有一个类型的字段

```
Action<T> Setter; 
```

假设我有一个`ProxyValue`实例列表，其中一些也是`ProxyWithSetter`，我怎样才能将一个类型为 的子类的对象传递给我确定为 a`Value`的那些 s 之一？`ProxyValue``ProxyWithSetter`

这里的问题是我需要将其中一个`ProxyValue`s 转换为 a `ProxyWithSetter`，但转换还需要一个类型参数。我无法提供，因为我要传递给函数的对象的**确切类型****在编译时是未知的**。我只知道它应该是 的子类型`Value`。

基本上，我想这样做

```
(p as ProxyWithSetter<Value>).Setter(val); 
```

强制转换返回 null 因为`p`它不是 type `ProxyWithSetter<Value>`，但是没有办法知道它的确切类型。我也不**知道**. `val`只知道它确实是一个`Value`.

我可以理解为什么它不起作用。我只是在寻找可行的解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:01:34.980

您可以使用以下方式获取有关类型的信息

```
p.GetType() 
```

使用它，您将获得一个类型对象，其字符串表示形式类似于

```
ProxyWithSetter[Value] 
```

您可以访问泛型类型

```
p.GetType().GenericTypeArguments 
```

由所有类型对象组成的数组，这些类型对象是您的类的通用参数。然后检查

```
p.getType().GenericTypeArguments == typeof(Value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:04:16.367

你不能按照你的要求去做。即使您制作了一个包含`Setter`（必须是属性，而不是字段）的逆变接口，它也只能获取类型`T`或更多派生的项目。

For instance, if you have a class `SuperValue` which subclasses `Value` and then you have an instance of `ProxyWithSetter<SuperValue>`, you cannot pass an instance of `Value` to it. It MUST be `SuperValue` or something subclassing `SuperValue`.

So the problem is that not every `ProxyWithSetter<T>` can accept an input of type `Value` to its `Setter`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:48:30.570

You might create this interface:

```
interface IProxyWithSetter
{
    Action<Value> Setter { get; }
} 
```

And implement it something like:

```
class ProxyWithSetter<T> : ProxyValue, IProxyWithSetter where T : Value
{
    Action<Value> IProxyWithSetter.Setter { get { return x => this.Setter((T)x); } }

    //other things
} 
```

That way, in a context where the type is statically known, your `Setter` will take a `T`, but in your method you're speaking of, you can do an `as IProxyWithSetter` and then call `Setter(val)`.

# python - 为现有 Python 应用程序添加 IPC 支持

> ID：15486470
> 
> 赞同：1
> 
> 时间：2013-03-18T20:38:12.897
> 
> 标签：python, ipc, cpython

我从 Python 开始，我试图了解 Cpython 如何与 OS shell 中的常用“Python 控制台”和某些应用程序提供的 Python API 一起工作，现在我需要某种可以提供回调机制的解决方案以及与其他进程/应用程序的通信通道。

我想知道是否有一种简单的方法，例如在编译 Cpython 或我的 Python API 的模块之前修改 2-3 个键值，毕竟这些特性对于现代应用程序的要求非常普遍。

那么，Cpython 是否有任何隐藏的 IPC 相关功能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:42:04.453

您需要将函数和对象显式映射到远程 API，没有自动方法可以将所有代码变为远程感知（尽管某些代码可以按原样变为远程感知）。然而，由于 Python 的动态特性，创建自动“映射器”并不是很困难。

有一些常见的远程过程调用 (RPC) 和进程间事件通知协议 Python 支持开箱即用，或者很容易使用附加包

*   zerorpc [https://github.com/dotcloud/zerorpc-python](https://github.com/dotcloud/zerorpc-python)（从示例来看，看起来集成工作最少）

*   XML-RPC [http://docs.python.org/2/library/xmlrpclib.html](http://docs.python.org/2/library/xmlrpclib.html)

*   ProtoRPC（由 Google 提供）[https://developers.google.com/appengine/docs/python/tools/protorpc/overview](https://developers.google.com/appengine/docs/python/tools/protorpc/overview)

*   DBUS (Linux) [http://dbus.freedesktop.org/doc/dbus-python/doc/tutorial.html](http://dbus.freedesktop.org/doc/dbus-python/doc/tutorial.html)

# asp.net-mvc-3 - MVC3 电子邮件到自己的地址

> ID：15486472
> 
> 赞同：0
> 
> 时间：2013-03-18T20:38:15.270
> 
> 标签：asp.net-mvc-3, system.net.mail

在有人发布问题后，我正在尝试向自己发送电子邮件。虽然我收到了一封电子邮件，但这不是我需要的：发件人邮件地址是我自己的，而不是提出问题的人。

是否可以向自己发送邮件（我不知道提问者的 smtp 主机、用户名或密码）。

如果您需要，我会添加一些代码。

QuestionsController.cs

```
MailMessage msg = new MailMessage();
msg.From = new MailAddress(question.Author + "<" + question.MailAuthor + ">");
msg.To.Add("myGmailAddress");
msg.Subject = question.Title;
msg.Body = question.Message;
msg.Sender = new MailAddress(question.MailAuthor);
SmtpClient client = new SmtpClient();
client.Send(msg); 
```

我的代码首先不包含 msg.sender，但我通过添加发件人进行了尝试，但这也没有帮助。

Web.config（在视图文件夹之外）

```
<system.net>
    <mailSettings>
      <smtp from="myGmailAddress">
        <network 
          host="smtp.gmail.com" 
          password="myPassword" 
          userName="myGmailAddress" 
          port="587" 
          enableSsl="true" 
          defaultCredentials="false" />
      </smtp>
    </mailSettings>
</system.net> 
```

还尝试了没有 from 部分和 defaultCredentials="false"。

当我调试代码时，我可以看到 msg 中的 from 以我的 gmail 地址开头，并在他通过 msg.From 部分时发生变化。但是当我去我的邮件时，我得到了这个： ![在此处输入图像描述](../Images/ab90313924784b7539adb6c68e7b1b19.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:50:49.353

感谢 sylon 的评论，我决定创建一个 noreply 地址来通知人们新问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T20:49:46.150

我遇到了同样的问题，并且没有使用 noreply 就可以解决它，我认为您的主机服务器没有像 Gmail 那样的问题，您可以尝试这样做：
1\. 通过您的主机服务器发送电子邮件（我没有使用 Web.config ):

```
 [HttpPost]
 public ActionResult SendMail(Question question)
  {
    string retValue = "There was an error submitting the form, please try again later.";
    if (!ModelState.IsValid)
        {
           return Content(retValue);
        }

    if (ModelState.IsValid)
        {                    
           using (var client = new SmtpClient
           {                  

              host="mail.yourDomain.com" //mail.yourDomain.be,if your using belgium,
              Port = 587,
              EnableSsl = true,
              UseDefaultCredentials=false,
              Credentials = new NetworkCredential("yourDomainEmailAddress","PasswordOfDomainMail"), 
                        DeliveryMethod = SmtpDeliveryMethod.Network})
         {
              var mail = new MailMessage();

              mail.To.Add("yourDomainEmailAddress"); 
              mail.From = new MailAddress(question.MailAuthor, question.Author);
              mail.Subject = String.Format(question.Title);
              msg.Body = question.Message;                       
              mail.ReplyToList.Add(yourDomainEmailAddress);
            try 
                {           
                 client.Send(mail);
                     retValue = "Your Request for Contact was submitted successfully. We will contact you shortly.";
                }
                        catch (Exception)
                        {

                            throw;
                        }
                    }
                }
                return Content(retValue);
            } 
```

1.  在您的主机服务器上将您的域电子邮件地址转发到您的 Gmail 地址。
2.  在您的 gmail 帐户上单击**设置**=>**帐户**=>**发送邮件作为**添加您的域电子邮件地址，您将被要求填写确认码，只需将其关闭返回到您的 gemail，您将获得一个链接，单击它即可完成。

# login - 雅虎 OAUTH 登录网站

> ID：15486473
> 
> 赞同：0
> 
> 时间：2013-03-18T20:38:15.910
> 
> 标签：login, oauth, yahoo

朋友们，

我已经使用 OAUTH 为网站实现了雅虎登录

我正在使用[https://api.login.yahoo.com/oauth/v2/request_auth?oauth_token=j5nyp6](https://api.login.yahoo.com/oauth/v2/request_auth?oauth_token=j5nyp6)来显示权限屏幕。

但是，每次用户都需要允许应用程序的权限。理想情况下，如果许可被授予一次，则进一步的请求不需要许可，除非给定的许可被撤销。（谷歌和推特登录以这种方式工作，我可以实现）

这是可以完成雅虎登录的唯一方法还是有任何解决方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:17:32.410

您是否存储访问令牌？还是您每次都强制用户通过完整的 OAuth 流程？

如果您要存储访问令牌，那么这就是在初始 OAuth 过程之后访问服务所需的全部内容。

# regex - 可以使用 Bash 扩展的通配符模式来匹配不包含特定字符的路径吗

> ID：15486474
> 
> 赞同：2
> 
> 时间：2013-03-18T20:38:34.093
> 
> 标签：regex, bash, glob

在 bash 脚本中，我想查找其路径不包含具有*“双扩展名”*的子目录的文件。例如，如果我正在查找`/my/home`for的子目录`path/to/my/file`并且存在以下内容，则脚本将仅找到第一个：

```
/my/home/subdirectory.1/path/to/my/file
/my/home/subdirectory.1.2/path/to/my/file 
```

这是一个简化的例子：`1`and`2`可以是任何字符串；关键是它们就像文件扩展名（即用句点分隔）。

我可以用`ls`

```
$ ls /my/home/subdirectory.*/path/to/my/file 
```

但这两者都返回-我想替换`.*`为，`.[^.]*`但这是一个正则表达式，并且通配符不使用正则表达式。我已经尝试过扩展通配符，但我无法让它工作（*我很高兴承认我不熟悉扩展通配符*）：

```
$ shopt -s extglob
$ ls /my/home/subdirectory.!(.*)/path/to/my/file 
```

我知道我可以`find`这样做：

```
$ find /my/home/subdirectory* -regex "/my/home/subdirectory.[^.]*/path/to/my/file" 
```

但我希望 glob 更快。但是，在阅读了此内容后，我认为这超出了 Bash 的 globbing、扩展或其他方式的能力。但我认为这是一个值得讨论的好问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:59:57.870

尝试：

```
ls /my/home/subdirectory!(.*.*)/path/to/my/file 
```

或者

```
ls /my/home/subdirectory.!(*.*)/path/to/my/file 
```

取决于您是否希望匹配没有扩展名的目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T21:00:15.567

我想你想要的是

```
ls /my/home/direcectory.+([!.])/path/to/my/file 
```

这将匹配扩展名中的一个或多个非`.`字符。

# python - Python matplotlib 如何处理二进制数据？

> ID：15486477
> 
> 赞同：3
> 
> 时间：2013-03-18T20:38:45.373
> 
> 标签：python, matplotlib

我正在尝试使用 matplotlib 绘制从文件中读取的二进制数据：

```
import matplotlib.pyplot as plt

try:
    f = open(file, 'rb')
    data = f.read(100)
    plt.plot(data)
except Exception as e:
    print(e)
finally:
    f.close() 
```

但我收到以下错误：

```
'ascii' codec can't decode byte 0xfd in position 0: ordinal not in range(128) 
```

我正在阅读的文件由二进制数据组成。那么 matplotlib 是如何处理二进制数据的呢？它是无符号的还是有符号的 1 字节数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-16T07:55:20.667

正如您在问题的评论中所指出的那样，您传递给 plot 的字节是不明确的。您需要将这些字节转换为 numpy 数组（或列表/元组），然后再将其传递给 matplotlib。

一个简单的例子来证明这一点：

```
import numpy as np
import matplotlib.pyplot as plt

orig_array = np.arange(10, dtype=np.uint8)
with open('my_binary_data.dat', 'wb') as write_fh:
    write_fh.write(orig_array)

with open('my_binary_data.dat', 'rb') as fh:
    loaded_array = np.frombuffer(fh.read(), dtype=np.uint8)

print loaded_array
plt.plot(loaded_array)
plt.show() 
```

我已经绕过房子来演示使用 numpy.frombuffer 和您读入“数据”变量的字节，但实际上您只需使用 numpy.fromfile 以便加载行看起来像：

```
loaded_array = np.fromfile(fh, dtype=np.uint8) 
```

高温高压

# html - 图像作为链接和 attribute Following on from my questions in this StackOverflow thread, I'm trying to use an image as a link. The image is an 问问题 问问题 2013-03-18T20:38:52.210 88 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Following on from my questions in this StackOverflow thread, I'm trying to use an image as a link. The image is an SVG file and the link is to a simple static HTML page. In the question I've referred to it was suggested that I add an attribute of onclick="window.location='URLHERE'; return false;" to the object. I've tried a number of configurations (putting this in the  tag, in the tag, creating a small Javascript function and placing it in there) but it doesn't work - the link isn't rendered at all. My jsFiddle is here. Can anyone please give me a pointer? Please assume that I know very little about Javascript or even HTML for that matter. Thank you. CSS: .center {text-align: center;} #sfimages {padding:15px;} #sfimages:hover { background-image: url(http://ubuntuone.com/1SRrDB8i8cBtpm3Smxaz5r); background-repeat: no-repeat; background-position:center; } HTML:

| ![](http://ubuntuone.com/12qOaTGCZYzQtqFJpaGbPV)  | ![](http://ubuntuone.com/54AaqhQUU8npACF2vXzKFp)  | ![](http://ubuntuone.com/4CXw05d1dsSf9VhAIPNZf6)  |

You can always reload the module you're working in via the command :r. This will throw away any interactive bindings you have made, and that might not always be practical if you're just poking around. This also works if you're not actually using a module. htmlcss 4 1 回答 1 This answer is useful 1 为什么不用链接标签围绕图像，[并且](YOUR LINK)？ 于 2013-03-18T23:00:51.010 回答 Related 2 c# - 为什么这个替换反斜杠不起作用？ 0 java - Jasper 报表图表主题和配置 6 xcode - 在 Xcode 4 的外部构建中的断点处停止 1 c# - WebBrowser 和 DocumentCompleted 事件 1 c - 使用固定宽度字体作为工具提示 3 java - 使用callable传递两个参数并返回参数数组 2 html - 如何使整个 TD 区域变得可点击？ 4 javascript - 类型错误 $ 不是函数 3 php - SQL 表中是否可以有一个 SQL 表？（对于动态生成的表格） 1 function - Backbone.js 和 require.js 教程误区 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15486480
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html, css

Following on from my questions in [this](https://stackoverflow.com/questions/15482357/image-with-a-background-image-as-link) StackOverflow thread, I'm trying to use an image as a link. The image is an SVG file and the link is to a simple static HTML page.

In the question I've referred to it was suggested that I add an attribute of `onclick="window.location='URLHERE'; return false;"` to the object. I've tried a number of configurations (putting this in the `<img>` tag, in the `<object>` tag, creating a small Javascript function and placing it in there) but it doesn't work - the link isn't rendered at all.

My jsFiddle is [here](http://jsfiddle.net/cvh2013/em6qq/). Can anyone please give me a pointer? Please assume that I know very little about Javascript or even HTML for that matter. Thank you.

CSS:

```
.center {text-align: center;}

#sfimages {padding:15px;}

#sfimages:hover {
background-image: url(http://ubuntuone.com/1SRrDB8i8cBtpm3Smxaz5r);
background-repeat: no-repeat;
background-position:center;     
} 
```

HTML:

```
<table style="width: 100%">
    <tr>
        <td class="center">
            <div id="sfimages">
                <object class="images" type="image/svg+xml"
                    data="http://ubuntuone.com/5b5ZUS86nHAffWiOirDwFr">
                    <img src="http://ubuntuone.com/12qOaTGCZYzQtqFJpaGbPV" alt=""
                        onclick="window.location='http://ubuntuone.com/3JHwAhFuNUCVfq1QOOjBGG'; return false;" />
                </object>
            </div>
        </td>
        <td class="center">
            <div id="sfimages">
                <object type="image/svg+xml"
                    data="http://ubuntuone.com/6tkHm9c2r1eH9PMB9Nr3Ux">
                    <img src="http://ubuntuone.com/54AaqhQUU8npACF2vXzKFp" alt="" />
                </object>
            </div>
        </td>
        <td class="center">
            <div id="sfimages">
                <object type="image/svg+xml"
                    data="http://ubuntuone.com/7Ur09JXlGVvF2GhXFbLXlx">
                    <img src="http://ubuntuone.com/4CXw05d1dsSf9VhAIPNZf6" alt="" />
                </object>
            </div>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:00:51.010

为什么不用链接标签围绕图像，`<a href="YOUR LINK">`并且`</a>`？

# javascript - localStorage - clear() or removeItem()?

> ID：15486484
> 
> 赞同：12
> 
> 时间：2013-03-18T20:39:16.200
> 
> 标签：javascript, html, local-storage

Should I use `clear()` to obliterate everything in `localStorage`, or should I just manually `removeItem()` the ones I've set on that particular site (which is easy enough to keep track of)?

I ask because I don't want to end up wiping out users' `localStorage` if they have other values set. I'm testing this in localhost and noticed that by using `clear()`, everything I'd set previously in other projects was wiped out.

EDIT: I should have mentioned that I know localStorage is domain-locked. I'm running a site that follows this structure:

```
public-html
(localStorage)
--project1
----files
--project2
----files
--project3
----files 
```

Where each file uses it's own separate localStorage variables. If I `localstorage.clear()` inside project2, project1 and project3's settings will be lost as well.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T20:48:28.760

localstorage 键控到源。因此，如果您的所有项目都在 localhost 上运行，那么您将在使用时擦除所有值`clear()`，唯一安全的方法是单独删除。

在生产环境中，每个项目都应该有自己的域并且`clear`应该是安全的。

所以这是一个知道当前原点上还有什么的问题。如果您控制当前原点上的所有内容并且不介意将其全部擦除，那么这`clear()`是最佳选择，并且专为此目的而设计。如果您的代码的其他部分使用本地存储或托管在同一源上的其他项目，那么您将希望更有选择性并使用`removeItem()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T20:47:58.027

`clear()`清除当前来源的所有内容（[https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)）。在 example.com 上使用`clear()`不会影响 example2.com 的 localStorage。它正在清除您计算机上所有项目的数据，因为您拥有的所有测试文件都位于同一来源（`http://localhost`或`file:///C:\`）。因此，使用它会很好`clear()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-10T17:15:52.630

**`Clear() Method`**

1.  将清除本地存储中的所有内容
2.  不接受任何争论

**removeItem() 方法**

1.  只会删除您作为参数引用的那些 localStorage 项目。
2.  要使**removeItem**工作，您必须需要传入一个参数。例如：

removeItem("list") 只会删除这个 "list" 关键项目

//**为了更好地理解下面的代码**

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id="clear-method">Clear Method</button>
    <button id="removeItem-method">RemoveItem Method</button>

    <script>
        const clearMethod = document.getElementById("clear-method");
        const removeItemMethod = document.getElementById("removeItem-method");

        // declaring arraay for localStorage
        const computer = [
    {
        Brand: "Asus",
        Model: "Unknown"
    }
];

const phone = [
    {
        Brand: "Realme",
        Model: "Unknown"
    }
]

// setting up items on localStorage
localStorage.setItem("computer", JSON.stringify(computer));
localStorage.setItem("phone", JSON.stringify(phone));

        clearMethod.addEventListener("click", ()=>{
        localStorage.clear();
        })

        removeItemMethod.addEventListener("click", ()=>{
            localStorage.removeItem("phone");
        })
    </script>

</body>
</html>
```

# c++ - Qt quint32 Little-Endianness with QDataStream

> ID：15486487
> 
> 赞同：3
> 
> 时间：2013-03-18T20:39:28.613
> 
> 标签：c++, qt, endianness, qbytearray

I'm using QDatastream to populate a quint32 array from a QByteArray on an Little-Endian ARM machine like below:

```
 // Modify the header
    QByteArray header = QByteArray::fromRawData((const char*)dataPtr,HEADER_SIZE);
    QDataStream dataStream(header);
    dataStream.setByteOrder(QDataStream::LittleEndian);
    quint32 headerBuffer[NUMBER_HEADER_ENTRIES];
    int bufferCnt = 0;
    while ( !dataStream.atEnd() ) {

        // Pop off a 32 bit int
        quint32 temp;
        dataStream >> temp;

        // insert into buffer
        headerBuffer[bufferCnt] = temp;

        // Increment counter
        bufferCnt++;

    } 
```

The problem is with byte order. I need to grab the last 4 bits of the 32bit field in headerBuffer[113], so I tried to AND that entry in headerBuffer with 0xf. The expected value to check against this field is "3". However, this AND operation gives me "a", as shown below. If I swap the bytes so that the entry is "0x1a13 & 0x000f", then I get "3". You can see below a few other examples of the values that are expected, versus what I am seeing. So, I am setting the ByteOrder of the QDataStream to LittleEndian, but still not getting the desired results. What am I doing wrong? How can I get 0x1a13 instead of 0x131a? Thanks!

```
 qDebug() << "ONE: " << QString("%1").arg(headerBuffer[0], 0, 16); // This prints: 494d0152 -- Should be: 4d495201
        qDebug() << "TWO: " << QString("%1").arg(headerBuffer[1], 0, 16); // This prints: 5400 -- Should be: 54
        qDebug() << "THREE: " << QString("%1").arg(headerBuffer[113] & 0x000f, 0, 16); // This prints: a -- Should be: 3 ( headerBuffer[113] is always 0x131a )
        qDebug() << "FOUR: " << QString("%1").arg(0x1a13 & 0x000f, 0, 16); // This prints: 3 -- Should be: 3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T21:15:48.570

看起来字节顺序在您的字节数组中有点不寻常。即，它包含在大端词中，但具有低端词序。

如果您采用`494d0152`LE 形式，则数组中的字节序列为：

```
52 01 4d 49 
```

当您期望`4d 49 52 01`清楚时，“低”字是`4d 49`按BE顺序排列的。高字也一样。

所以你可能会尝试修改你的代码：

```
QDataStream dataStream(header);
dataStream.setByteOrder(QDataStream::BigEndian);
...
quint16 low, high;
quint32 temp;
dataStream >> low >> high;
temp = (high << 32) | low; 
```

# javascript - jQuery syntax error?

> ID：15486488
> 
> 赞同：0
> 
> 时间：2013-03-18T20:39:29.077
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

I found an example here on stackoverflow that I am trying to recreate and use a solution. here is the link to the example: [Refreshing Partial View in MVC 3](https://stackoverflow.com/questions/8977043/refreshing-partial-view-in-mvc-3)

what is wrong with my syntax?

```
function RefreshPartial() {
        $('#invited-teams').load('/Challenge/GetInvitedTeams', {Model.ChallengeId});
    } 
```

will this work? or does it need to have the curly brackets?

```
function RefreshPartial() {
        $('#invited-teams').load('/Challenge/GetInvitedTeams', "<%= Model.ChallengeId %>" );
    } 
```

UPDATE:

```
 function RefreshPartial() {
        $('#invited-teams').load('/Challenge/GetInvitedTeams',
            {'paramname' : <%:Model.ChallengeId %> });
    } 
```

my partial view:

```
 <div id="invited-teams">
                <% Html.RenderPartial("InvitedTeams", Model.InvitedTeams); %>
            </div> 
```

So, this is what my refreshPartial method is looking like:

```
function RefreshPartial() {
        alert("in refresh partial");
        alert("<%:Model.ChallengeId %>");
        $('#invited-teams').load('/Challenge/GetInvitedTeams', { 
            'paramname': '<%:Model.ChallengeId %>'
        });

    } 
```

it alerts both alerts correctly, with the 2nd one having the correct ChallengeID. The page is still going blank though. hmm..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:44:09.147

您的函数未指定参数名称。

```
function RefreshPartial() {
    $('#invited-teams').load('/Challenge/GetInvitedTeams', {
       'paramname' :'<%:Model.ChallengeId %>'//Or your ASP wrapper here
    });
} 
```

# c# - 如何在 C# 中使用嵌套集合建模键值对？

> ID：15486500
> 
> 赞同：0
> 
> 时间：2013-03-18T20:39:58.977
> 
> 标签：c#, javascript, dynamic, data-structures

我正在尝试在 C# 中构建一个数据结构来保存在 JavaScript 中创建并用 JSON 表示的动态数据。我正在寻找有关如何设计 C# 数据结构以易于搜索的方式保存 JSON 数据的建议。我目前正在使用 .NET 4.0；4.5 是这个特定项目的一个方法。

数据具有以下属性：

*   键值对的集合
*   键是唯一的
*   这些值可以是`true`、`false`、某些字符串值或键值对的嵌套集合中的任何一个
*   几十个顶级属性，嵌套集合的属性在集合中有六对

以下是 JavaScript 数据的示例：

```
{ 
    foo:  true,
    bar:  false,
    baz:  {
        a: true,
        b: false,
        c: "maybe"
    }
    quux: "maybe"
} 
```

我想通过以下方式处理数据：

*   **1 次初始化：**一旦我创建了数据结构，我只需要读取它，所以一个不可变的结构就可以了。
*   **搜索是否存在键：**我需要能够确定给定键是否存在于数据中。有些键是众所周知的，有些是动态的，所以直到运行时我才会知道它们的所有名称，所以我必须使用字符串查找键。在上面的示例中，假设我提前知道`foo`,`bar`和`baz`, 但`quux`对我来说是新的，并且我不提前知道它是否存在，是否存在，以及它是否将具有平面或嵌套值。
*   **获取键的 'flat' 值：**值是`true`，`false`以及 'flat' 成员的一些 'maybe'`string`值。如有必要，我可以将其转换为真正的布尔值（将“可能”值视为`true`），但我更愿意保留“可能”值。我想我可以预先知道所有“可能”的值，所以我也可以建立一个`Enum`持有这些值的值，并且也可以在那里抛出`true`，`false`所以我有一个单一的值类型。
*   **获取嵌套数据的键和值：**一些键的值本身就是键值对的集合。我需要能够区分这些成员，并搜索嵌套键及其值。从我所看到的输入数据来看，我认为嵌套的深度不会超过 1 级。

由于键是独一无二的，我对字典的查找速度和易用性很感兴趣。但是我有点难以理解将嵌套集合与平面值一起表示。这在 JavaScript 这样的动态语言中非常容易。C#中对应的成语是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:51:16.867

C# 中真正对应的结构是匿名对象/类。我个人更喜欢使用字典，或者将它与对象一起用作值类型（然后，检查一个键的值是否是另一个字典，这样你就知道你是否有一个嵌套集合）或者使用一个包装类，它保存一个字典或一个平面值，并有一些字段，如 IsNestedCollection 和您需要的任何内容。

# asp.net-mvc-4 - 使用 ASP.NET MVC4 和 StructureMap 配置 NServiceBus

> ID：15486503
> 
> 赞同：0
> 
> 时间：2013-03-18T20:40:08.803
> 
> 标签：asp.net-mvc-4, dependency-injection, structuremap, nservicebus3

我通过从 nuget 安装 structuremap 和 structuremap.mvc4 创建了一个 ASP.NET MVC 4 Web 应用程序。然后我添加了同样来自 nuget 的 nservicebus 和 nservicebus.structuremap 包。

我之前用结构映射创建了几个 mvc4 应用程序，没有任何问题，并且我遵循了一些关于使用 nservicebus 和结构映射的基本 pub/sub 教程并让它工作。

但是，当我尝试时，将 nservicebus 放入带有结构映射的 mvc4 并不能很好地工作。我遇到的问题是下面列出的 mvc 和 DI 与 MVC 的 nservice 总线教程似乎希望开发人员使用内置的依赖注入容器。

[http://support.nservicebus.com/customer/portal/articles/894008](http://support.nservicebus.com/customer/portal/articles/894008)
[http://support.nservicebus.com/customer/portal/articles/894123](http://support.nservicebus.com/customer/portal/articles/894123)

如果您以前使用过结构映射，那么 nuget 包会很好地添加解析器并使用 WebActivator 运行初始设置。之后，我不确定容器会发生什么，所以我无法使用它来设置 Configure.With().StructureMapBuilder(StructureMap Container) 中的 NServiceBus Builder。

为了使 nservicebus 和 structuremap 在 asp.net MVC4 中运行良好，我需要做什么？我知道它的操作员错误，但我不确定此时该怎么办？另外，版本 3 不是在某个地方有一个带有一些漂亮配置角色的 messageendpointconfig 吗？这不适用于网络环境吗？我想我可以得到一个容器的引用然后去，但情况似乎并非如此。

编辑：添加了一些代码

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();

        Configure.With()
            .StructureMapBuilder(ObjectFactory.Container) //this obviously won't work
            .JsonSerializer()
            .Log4Net()
            .MsmqTransport()
                .IsTransactional(false)
                .PurgeOnStartup(true)
            .UnicastBus()
                .ImpersonateSender(false)
            .CreateBus()
            .Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install());

    } 
```

编辑 2：即使我通过将依赖解析器设置为 Application_Start() 的位置来解决 StructureMap 的问题，NServiceBus 仍然需要配置 MessageForwardingInCaseOfFaultConfig 和 MsmqTransportConfig。

我想我记得那些属性应该由通过端点配置上的接口设置的角色自动配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:56:14.110

您需要将这些部分添加到您的 web.config 文件中：

```
<configuration>
  <configSections>
    <section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
    <section name="MsmqTransportConfig" type="NServiceBus.Config.MsmqTransportConfig, NServiceBus.Core"/>
  </configSections>

  <MessageForwardingInCaseOfFaultConfig ErrorQueue="error"/>
  <MsmqTransportConfig NumberOfWorkerThreads="1" MaxRetries="5"/>
</configuration> 
```

NServiceBus v3 不会自动创建这些！

# ruby-on-rails - Rails 计算并显示平均值

> ID：15486504
> 
> 赞同：3
> 
> 时间：2013-03-18T20:40:19.637
> 
> 标签：ruby-on-rails, ruby, average

我正在尝试对特定类别中的分数进行平均。我有一张表，其中包含导演、电影、流派、收视率和分数的列表。当用户点击一部电影时，我希望他们能够看到该类型所有其他电影的平均得分。

我认为我必须结合条件使用平均方法。也就是说，我无法在网上找到任何关于这个特定主题的有用文档。如果有人可以向我指出指南或文章的方向，该指南或文章解释了如何计算带有条件的平均值并将它们显示在视图中，我将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T20:46:10.423

与其他计算一起，ActiveRecord 提供了一种称为[average](http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-average)的方法。您可以通过实现以下内容来使用它：

```
class Movie
  def self.average_by_genre(genre)
    average(:rating).where(:genre => genre)
  end
end 
```

或者，您也可以将其实现为 Movie 模型的实例方法。

```
class Movie
  def average_rating
    self.class.average(:rating).where(:genre => self.genre)
  end
end 
```

这将让您直接从您的视图中调用该方法。

```
<article>
  <header>
    <h1><%= @movie.title %></h1>
  </header>
  <p>
    <span>Average rating for genre <%= @movie.genre %>:</span> 
    <%= @movie.average_rating  %>
  </p>
</article> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T20:46:02.653

一些原始 SQL 怎么样？

```
SELECT AVG(score) FROM movies WHERE category_id = 42 
```

或在导轨中：

```
Movie.where(category_id: 42).average("score") 
```

在此处阅读更多信息：http: [//guides.rubyonrails.org/active_record_querying.html#average](http://guides.rubyonrails.org/active_record_querying.html#average)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-17T04:42:00.287

您如何将`SQL`原始查询移至`database view`：

```
# movies_view
SELECT m.id, AVG(m.score) avg_score, c.category_id
FROM movies m
JOIN category c
ON m.category_id 
```

所以你需要从`MovieView`

```
MovieView.find(:movie_id).avg_score 
```

# jquery - dotted underline link style with opacity gradient

> ID：15486506
> 
> 赞同：4
> 
> 时间：2013-03-18T20:40:21.827
> 
> 标签：jquery, css, hyperlink, underline

I would like to underline my links with some kind of dotted gradient from 100% opacity to 0%. I made a screen of what I should look like:

![dotted links](../Images/59cba445ca967fdaf098abc21c555ae6.png)

I would do sth like

```
a {
  border-bottom: 2px dotted #007acc;
} 
```

but there is no gradient to 0 opacity and the space between the single dots is way too small.

Another question regarding this problem: I have some :before content (the '+') and I don't want the border-bottom to hit that content, as you can see.

Is this even possible or do I have to use a png background?

Jquery would be ok too.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:55:45.690

这是一个简单的例子。不知道是否符合你的需求。

```
body{
    background:#111;
}
ul{
    padding:0;
    margin:0;
}
li{
    margin-left:20px;
    width:200px;
    list-style:none;
    border-bottom:dotted 2px #99f;
    color:#99f;
    position:relative;
}
li:before{
    content:'+';
    position:absolute;
    left:-15px;
}
li:after{
    content:'';
    position:absolute;
    height:2px;
    width:100%;
    top:100%;
    background:red;
    left:0;

background: -moz-linear-gradient(left, rgba(17,17,17,0) 0%, rgba(17,17,17,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(17,17,17,0)), color-stop(100%,rgba(17,17,17,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(left, rgba(17,17,17,0) 0%,rgba(17,17,17,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(left, rgba(17,17,17,0) 0%,rgba(17,17,17,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(left, rgba(17,17,17,0) 0%,rgba(17,17,17,1) 100%); /* IE10+ */
background: linear-gradient(to right, rgba(17,17,17,0) 0%,rgba(17,17,17,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00111111', endColorstr='#111111',GradientType=1 ); /* IE6-9 */
} 
```

[http://jsfiddle.net/KZPbf/](http://jsfiddle.net/KZPbf/)

方便的跨浏览器渐变生成器：http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:52:06.147

您可以使用具有线性渐变背景的伪元素覆盖在边框顶部。

```
a {
  border-bottom: 2px dotted #007acc;
}
a:after {
  content: '';
  display: block;
  position: absolute;
  width: 100%;
  height: 2px;
  top: 100%;
  background: linear-gradient(left, rgba(22, 23, 25, 1) 0%, rgba(22, 23, 25, 0) 100%);
} 
```

您的背景可能需要保持相同的颜色，但这应该可以完成工作。根据您计划支持的浏览器，您仍然需要供应商前缀和正确的颜色代码。

# php - How to get specific data from array

> ID：15486508
> 
> 赞同：0
> 
> 时间：2013-03-18T20:40:22.297
> 
> 标签：php, html, arrays

I have data like this:

```
Array
(
    [data] => Array
        (
            [0] => Array
                (
                    [name] => xxxxxxxxxxxx
                    [category] => yyyyyyyy
                    [id] => 12345666666
                    [data] => ABCDE
                )

            [1] => Array
                (
                     [name] => ZZZZZZZZZZZ
                    [category] => JJJJJJ
                    [id] => 88888888888888
                    [data] => ABCDEHIJK
                )

        )

) 
```

I need to get the data from the first array only. I don't want to use a loop. I have tried this:

```
$name = $data['data'][0]['name']; 
```

but that doesn't get the name. Does anyone know how I can get the specific name only from the first array?

EDIT** my code:

```
$movie_details_tmdb = $tmdb->searchMovie($search);
$movie_details_tmdb_results = json_decode(json_encode($movie_details_tmdb), true);
$id = $movie_details_tmdb_results['results'][0]['id']; 
```

it's in the same format as the code above.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:47:07.930

也许你对json有问题？

**（PHP 5 >= 5.2.0，PECL json >= 1.2.0）**

将对象转换为数组的更好方法：

```
$arr = (array) $obj; 
```

# twitter-bootstrap - Twitter Bootstrap is too wide for mobile

> ID：15486510
> 
> 赞同：1
> 
> 时间：2013-03-18T20:40:31.887
> 
> 标签：twitter-bootstrap

I did a simple design for my site using Twitter Bootstrap. Code is as follows:

```
<!DOCTYPE html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="pl-PL"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="pl-PL"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="pl-PL"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="pl-PL"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="pl-PL"><!--<![endif]-->

<head>

    <meta charset="UTF-8">  
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">  
    <title></title> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="http://localhost/images/fav.ico">
    <link rel="stylesheet" href="http://localhost/bootstrap.css">
    <link rel="stylesheet" href="http://localhost/style.css">

    <!--[if lt IE 9]>
    <script src="http://localhost/js/html5shiv.js"></script>
    <script src="http://localhost/js/respond.js"></script>
    <![endif]-->

    <link rel="alternate" type="application/rss+xml" title=" &raquo; Kanał z wpisami" href="http://localhost/feed/" />
<link rel="alternate" type="application/rss+xml" title=" &raquo; Kanał z komentarzami" href="http://localhost/comments/feed/" />
<link rel='stylesheet' id='contact-form-7-css'  href='http://localhost/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=3.2' type='text/css' media='all' />
<script type='text/javascript' src='http://localhost/wp-includes/js/jquery/jquery.js?ver=1.8.3'></script>
<style type="text/css">
sup {
    vertical-align: 60%;
    font-size: 75%;
    line-height: 100%;
}
sub {
    vertical-align: -10%;
    font-size: 75%;
    line-height: 100%;
}
.amp {
    font-family: Baskerville, "Goudy Old Style", "Palatino", "Book Antiqua", "Warnock Pro", serif;
    font-weight: normal;
    font-style: italic;
    font-size: 1.1em;
    line-height: 1em;
}
.caps {
    font-size: 90%;
}
.dquo {
    margin-left:-.40em;
}
.quo {
    margin-left:-.2em;
}
/* because formatting .numbers should consider your current font settings, we will not style it here */
</style>
    <style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
</head>

<body class="home blog">    
    <div id="wrap" class="container">
        <!-- #header -->
        <header id="header" class="span12">
            <div class="navbar">
                <div class="navbar-inner">
                    <div class="container">
                        <h1 class="brand"><a href="http://localhost"></a></h1>
                        <div class="nav-collapse collapse hidden-mobile">
                            <ul class="nav pull-right">
                                <li><a href="#about" title="O mnie">O mnie</a></li>
                                <li><a href="#showcase" title="Realizacje">Realizacje</a></li>
                                <li><a href="#contact" title="FAQ / Kontakt">FAQ i kontakt</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- /#header -->

<!-- #slider -->
<section id="slider" class="hidden-phone carousel slide">
    <div>
        <article class="item"></article>
        <article class="item"></article>
    </div>
</section>

    </div>

    <script type='text/javascript' src='http://localhost/wp-content/plugins/contact-form-7/includes/js/jquery.form.js?ver=3.09'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/192.168.1.2\/\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"Wysy\u0142anie..."};
/* ]]> */
</script>
<script type='text/javascript' src='http://localhost/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=3.2'></script>
<script src="http://localhost/js/jquery.js"></script>
<script src="http://localhost/js/bootstrap.min.js"></script>
<script src="http://localhost/js/plugins.js"></script>
<script src="http://localhost/js/script.js"></script>

<!--

<script>

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXX-XX']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
-->

</body>

</html> 
```

I did include Bootstrap's both css files (combined into one - bootstrap.css first and bootstrap-responsive.css next) and bootstrap.js on the bottom. But I have a very weird problem (first time since I use Twitter Bootstrap) - on my phone (Huawei Ascend) body is too wide (no matter the orientation). It seemed like it has some padding - so I removed `body`'s padding, but it didn't help. Problem is visible even if I remove my CSS and keep only Bootstrap's.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-07T13:48:53.177

问题中没有指定 Bootstrap 版本，尽管它是在 v3.0 发布之前发布的。

无论如何，如果有人碰巧遇到这个话题并且对 v3.x 有同样的问题，这就是我所做的。YMMV 取决于您的 .container div 是否直接位于 <body> 下方。

```
/* Fix for viewport being too wide below smallest breakpoint */
@media (max-width: 767px) {
    body > .container { overflow: hidden; } /* fix */
    body > .container > * { overflow: visible; } /* reset back to normal */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T19:06:29.797

这是一个非常糟糕的解决方案。尝试更改`.container`为`.container-fluid`，看看会发生什么...

将宽度设置为 100% 会给您带来其他麻烦...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-02T18:09:08.987

尝试更改`.container`为`.container-fluid`并添加`<div class="row-fluid">`为`.container-fluid`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:25:09.110

环境

```
.container { width: 100% !important } 
```

帮助。我仍然不知道为什么会发生这种情况。

# maven - Karaf OSGi: JAX-RS with CXF: ClassNotFoundException: org.apache.cxf.jaxrs.impl.RuntimeDelegateImpl

> ID：15486511
> 
> 赞同：2
> 
> 时间：2013-03-18T20:40:33.310
> 
> 标签：maven, osgi, cxf, jax-rs, classnotfoundexception

When installing a CXF web service bundle in Karaf OSGi (built with maven), the following error is logged:

```
2013-03-18 15:08:29,050 | ERROR | rint Extender: 2 | BlueprintContainerImpl           | container.BlueprintContainerImpl  393 | 7 - org.apache.aries.blueprint.core - 1.1.0 | Unable to start blueprint container for bundle service-server
org.osgi.service.blueprint.container.ComponentDefinitionException: Error setting property: PropertyDescriptor <name: serviceBeans, getter: null, setter: [class org.apache.cxf.jaxrs.JAXRSServerFactoryBean.setServiceBeans(interface java.util.List)]
    at org.apache.aries.blueprint.container.BeanRecipe.setProperty(BeanRecipe.java:941)[7:org.apache.aries.blueprint.core:1.1.0]
    at org.apache.aries.blueprint.container.BeanRecipe.setProperties(BeanRecipe.java:907)[7:org.apache.aries.blueprint.core:1.1.0]
    at org.apache.aries.blueprint.container.BeanRecipe.setProperties(BeanRecipe.java:888)[7:org.apache.aries.blueprint.core:1.1.0]
    at org.apache.aries.blueprint.container.BeanRecipe.internalCreate2(BeanRecipe.java:820)[7:org.apache.aries.blueprint.core:1.1.0]
    at org.apache.aries.blueprint.container.BeanRecipe.internalCreate(BeanRecipe.java:787)[7:org.apache.aries.blueprint.core:1.1.0]
    at org.apache.aries.blueprint.di.AbstractRecipe$1.call(AbstractRecipe.java:79)[7:org.apache.aries.blueprint.core:1.1.0]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)[:1.6.0_41]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)[:1.6.0_41]
    at org.apache.aries.blueprint.di.AbstractRecipe.create(AbstractRecipe.java:88)[7:org.apache.aries.blueprint.core:1.1.0]
    at org.apache.aries.blueprint.container.BlueprintRepository.createInstances(BlueprintRepository.java:245)[7:org.apache.aries.blueprint.core:1.1.0]
    at org.apache.aries.blueprint.container.BlueprintRepository.createAll(BlueprintRepository.java:183)[7:org.apache.aries.blueprint.core:1.1.0]
    at org.apache.aries.blueprint.container.BlueprintContainerImpl.instantiateEagerComponents(BlueprintContainerImpl.java:668)[7:org.apache.aries.blueprint.core:1.1.0]
    at org.apache.aries.blueprint.container.BlueprintContainerImpl.doRun(BlueprintContainerImpl.java:370)[7:org.apache.aries.blueprint.core:1.1.0]
    at org.apache.aries.blueprint.container.BlueprintContainerImpl.run(BlueprintContainerImpl.java:261)[7:org.apache.aries.blueprint.core:1.1.0]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)[:1.6.0_41]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)[:1.6.0_41]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)[:1.6.0_41]
    at org.apache.aries.blueprint.container.ExecutorServiceWrapper.run(ExecutorServiceWrapper.java:106)[7:org.apache.aries.blueprint.core:1.1.0]
    at org.apache.aries.blueprint.utils.threading.impl.DiscardableRunnable.run(DiscardableRunnable.java:48)[7:org.apache.aries.blueprint.core:1.1.0]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)[:1.6.0_41]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)[:1.6.0_41]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)[:1.6.0_41]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)[:1.6.0_41]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)[:1.6.0_41]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)[:1.6.0_41]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)[:1.6.0_41]
    at java.lang.Thread.run(Thread.java:662)[:1.6.0_41]
Caused by: java.lang.ExceptionInInitializerError
    at org.apache.cxf.jaxrs.utils.JAXRSUtils.<clinit>(JAXRSUtils.java:107)
    at org.apache.cxf.jaxrs.model.ClassResourceInfo.getConsumeMime(ClassResourceInfo.java:239)
    at org.apache.cxf.jaxrs.model.OperationResourceInfo.checkMediaTypes(OperationResourceInfo.java:171)
    at org.apache.cxf.jaxrs.model.OperationResourceInfo.<init>(OperationResourceInfo.java:74)
    at org.apache.cxf.jaxrs.utils.ResourceUtils.createOperationInfo(ResourceUtils.java:354)
    at org.apache.cxf.jaxrs.utils.ResourceUtils.evaluateResourceClass(ResourceUtils.java:221)
    at org.apache.cxf.jaxrs.utils.ResourceUtils.createClassResourceInfo(ResourceUtils.java:207)
    at org.apache.cxf.jaxrs.JAXRSServiceFactoryBean.setResourceClassesFromBeans(JAXRSServiceFactoryBean.java:218)
    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.setServiceBeans(JAXRSServerFactoryBean.java:295)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.6.0_41]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)[:1.6.0_41]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)[:1.6.0_41]
    at java.lang.reflect.Method.invoke(Method.java:597)[:1.6.0_41]
    at org.apache.aries.blueprint.utils.ReflectionUtils$MethodPropertyDescriptor.internalSet(ReflectionUtils.java:628)
    at org.apache.aries.blueprint.utils.ReflectionUtils$PropertyDescriptor.set(ReflectionUtils.java:378)
    at org.apache.aries.blueprint.container.BeanRecipe.setProperty(BeanRecipe.java:939)
    ... 26 more
Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: org.apache.cxf.jaxrs.impl.RuntimeDelegateImpl
    at javax.ws.rs.ext.RuntimeDelegate.findDelegate(RuntimeDelegate.java:122)
    at javax.ws.rs.ext.RuntimeDelegate.getInstance(RuntimeDelegate.java:91)
    at javax.ws.rs.core.MediaType.<clinit>(MediaType.java:44)
    ... 42 more
Caused by: java.lang.ClassNotFoundException: org.apache.cxf.jaxrs.impl.RuntimeDelegateImpl
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)[:1.6.0_41]
    at java.security.AccessController.doPrivileged(Native Method)[:1.6.0_41]
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)[:1.6.0_41]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)[:1.6.0_41]
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)[:1.6.0_41]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)[:1.6.0_41]
    at javax.ws.rs.ext.FactoryFinder.newInstance(FactoryFinder.java:37)
    at javax.ws.rs.ext.FactoryFinder.find(FactoryFinder.java:133)
    at javax.ws.rs.ext.RuntimeDelegate.findDelegate(RuntimeDelegate.java:105)
    ... 44 more 
```

This changed from the previous `Caused by: java.lang.ClassNotFoundException: com.sun.rs.ws.ext.RuntimeDelegateImpl` when, based on the suggestion from several locations, I added the following line my `ext/system.properties` file:

```
javax.ws.rs.ext.RuntimeDelegate=org.apache.cxf.jaxrs.impl.RuntimeDelegateImpl 
```

I'm also explicitly importing this package in my pom with:

```
<build>
    ...
    <plugins>
        ...
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <version>2.3.6</version>
            <extensions>true</extensions>
            <configuration>
                <instructions>
                    ...
                    <Import-Package>org.apache.cxf.jaxrs.impl,*</Import-Package>
                </instructions>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

The only bundles exporting anything related (as far as I can tell) are:

```
Apache ServiceMix :: Specs :: JSR-311 API 1.1.1(org.apache.servicemix.specs.jsr311-api-1.1.1)
    Exporting:
        javax.ws.rs,version=1.1.1
        javax.ws.rs.core,version=1.1.1
        javax.ws.rs.ext,version=1.1.1
Apache CXF Bundle Jar(org.apache.cxf.bundle)
    Exporting
        ~25 org.apache.cxf.jaxrs.____ or so packages (including impl) 
```

Can anyone help? I haven't managed to find any fixes that resolve the issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:10:06.630

不是一个真正的答案，但我的解决方案是完全放弃 CXF。现在使用简单的 servlet (javax.servlet)

# mysql - Using Spring's "jdbc:initialize-database", how do I run a script with a stored procedure?

> ID：15486516
> 
> 赞同：3
> 
> 时间：2013-03-18T20:41:01.263
> 
> 标签：mysql, spring, stored-procedures, junit, initialization

I'm using Spring 3.1.1.RELEASE, JUnit 4.8.1, and MySQL 5.5\. I want to truncate all my table data before each test, but am getting errors in Spring even though I can execute the following script (truncate_tables.sql) fine via the command line …</p>

```
drop procedure if exists truncate_tables;

delimiter #
create procedure truncate_tables()
begin
 declare tab_name varchar(64);
 declare done tinyint unsigned default 0;

 declare table_cur cursor for select t.table_name
 from
  information_schema.schemata s
  inner join information_schema.tables t on s.schema_name = t.table_schema
 where
   s.schema_name = database() and t.table_type = 'BASE TABLE';

 declare continue handler for not found set done = 1;

 open table_cur;
 repeat
   fetch table_cur into tab_name;
   set @cmd = concat('truncate table ', tab_name);

   prepare stmt from @cmd;
   execute stmt;
 until done end repeat;

 close table_cur;
end #

SET FOREIGN_KEY_CHECKS=0;
CALL truncate_tables;
SET FOREIGN_KEY_CHECKS=1; 
```

However, using this Spring application context …</p>

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/my_db" />
    <property name="username" value="myuser" />
    <property name="password" value="bypass" />
</bean>
...
<jdbc:initialize-database data-source="dataSource">
    <jdbc:script location="classpath:truncate_tables.sql"/>
    <jdbc:script location="classpath:db-test-data.sql"/>    
</jdbc:initialize-database> 
```

However, I get the error

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &apos;delimiter # create procedure truncate_tables() begin  declare tab_name varchar(6&apos; at line 1
    at sun.reflect.GeneratedConstructorAccessor419.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2618)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2568)
    at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:842)
    at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:681)
    at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.executeSqlScript(ResourceDatabasePopulator.java:184)

    ... 50 more 
```

Any way I can fix the above script? It is not an option to use the "extends AbstractTransactionalJUnit4SpringContextTests" extension in my JUnit tests.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-07T09:39:08.227

`<jdbc:script />` doesn't allow usage of DELIMITER statement in the included script but you can use the `separator` property with same result.

In your `truncate_tables.sql` use only the `#` delimiter and specify it in the `separator` property like so:

```
drop procedure if exists truncate_tables#

create procedure truncate_tables()
begin
 declare tab_name varchar(64);
 declare done tinyint unsigned default 0;

 declare table_cur cursor for select t.table_name
 from
  information_schema.schemata s
  inner join information_schema.tables t on s.schema_name = t.table_schema
 where
   s.schema_name = database() and t.table_type = 'BASE TABLE';

 declare continue handler for not found set done = 1;

 open table_cur;
 repeat
   fetch table_cur into tab_name;
   set @cmd = concat('truncate table ', tab_name);

   prepare stmt from @cmd;
   execute stmt;
 until done end repeat;

 close table_cur;
end #

SET FOREIGN_KEY_CHECKS=0#
CALL truncate_tables#
SET FOREIGN_KEY_CHECKS=1# 
```

and in the application context...

```
<jdbc:initialize-database data-source="dataSource">
    <jdbc:script separator="#" location="classpath:truncate_tables.sql"/>
    <jdbc:script location="classpath:db-test-data.sql"/>    
</jdbc:initialize-database> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:29:30.637

它不起作用，因为分号用作语句分隔符。您可以使用自定义分隔符定义`ResourceDatabasePopulator`和`DataSourceInitializer`bean： [http ://static.springsource.org/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/jdbc/datasource/init/ResourceDatabasePopulator.html#setSeparator(java .lang.String)](http://static.springsource.org/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/jdbc/datasource/init/ResourceDatabasePopulator.html#setSeparator(java.lang.String))。

请参阅（未解决） [https://jira.springsource.org/browse/SPR-8817](https://jira.springsource.org/browse/SPR-8817)。

# python - 在 django 模型中制作树结构？

> ID：15486520
> 
> 赞同：12
> 
> 时间：2013-03-18T20:41:11.113
> 
> 标签：python, django, activerecord, django-models

我想要一个有 2 个字段的模型，孩子和父母。我如何在 django 中做到这一点？我有这样的东西

```
from django.db import models
class FooModel(models.Model)
    parent = models.ForeignKey('self', blank=True, null=True)
    children = models.ManyToOneRel('self', blank=True, null=True)

    def __init__(self, *args, **kwargs):
        super(FooModel, self).__init__(*args, **kwargs)
        self.parent.children.add(self) 
```

但我认为我不应该像这样使用 ManyToOneRel（尤其是因为它在“空白”上给了我一个关键字错误）。有什么建议吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-18T21:37:07.637

`ManyToOneRel`是一个内部实现类，它不适用于您的模型。

但是为什么你认为你仍然需要它？正如文档中详细解释的那样，当您定义 ForeignKey 时，您会自动获得反向关系。因此，在您的情况下，如果您定义，`parent`那么您将自动获得：并且您可以通过使用参数`self.foomodel_set`使其更加明确：`related_name`

```
parent = models.ForeignKey('self', blank=True, null=True, related_name='children') 
```

请注意，如果您打算用树做复杂的事情，您可能想要使用[django-mptt](https://django-mptt.readthedocs.io/en/latest/)库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T21:18:52.910

```
class FooModel(models.Model)
    parent = models.ForeignKey('self', blank=True, null=True, related_name='children')

FooModel.objects.get(pk=1).children.all() 
```

如果您希望缓存使用您想要的任何内容：在某处缓存查询，将所有子项存储在父项中作为 pks 的平面列表，但不要忘记处理新实体以更新此列表。ManyToOneRel 用于 django 的内部需求，而且它不是 Field 类的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:13:39.620

我找不到它的文档，`ManyToOneRel`所以我查找了[它的代码](https://github.com/django/django/blob/master/django/db/models/fields/related.py#L922)：

```
def __init__(self, to, field_name, related_name=None, limit_choices_to=None,
        parent_link=False, on_delete=None): 
```

如您所见，没有`blank`争论。

# java - 转换原始二叉树以将其装饰为预排序索引

> ID：15486523
> 
> 赞同：1
> 
> 时间：2013-03-18T20:41:13.547
> 
> 标签：java, recursion, tree, traversal

我试了一下，它适用于左子树，但不适用于右子树。

我很接近，但我的逻辑是错误的，任何人都可以帮助纠正并解释这个逻辑。

```
public static MyNode preOrderNumbering(MyNode n) {
            if (n != null) {
                n.obj = 0; // Set root decoration to 0;
                preOrderHelper(n, 1); // Set decorations according to preorder.
            }
            return n;
        }

        public static MyNode preOrderHelper(MyNode n, int counter) {
            if (n != null) {
                if (n.left != null) {
                    n.left.obj = counter++; // Set the left object decoration to current count + 1;
                    preOrderHelper(n.left, counter);
                }
                if (n.right != null) {
                    n.right.obj = counter++; // Set the left object decoration to current count + 1;
                    preOrderHelper(n.right, counter);
                }
            }
            return n;
        } 
```

前：![http://puu.sh/2k2H7.png](../Images/1d86af4bb415a06932cef3d254e1bc20.png)

后： ![在此处输入图像描述](../Images/2000aea7b2645fb11f413dcf0428f203.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:12:02.390

`counter`在`left`转到`right`. _

像这样的东西：

```
public static int preOrderNumbering(MyNode n, int count){
    if(n != null){
        n.obj = ++count;

        count = preOrderNumbering(n.left, count);
        count = preOrderNumbering(n.right, count);

    }
    return count;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:05:42.867

您是`counter`按值传递，而不是按引用传递（因为这就是 Java 的工作方式），因此当递归展开时，计数器也将展开。

您可以通过从递归调用返回当前值来更新计数器。

# ruby - 将 db 日期转换为 rfc3339

> ID：15486525
> 
> 赞同：0
> 
> 时间：2013-03-18T20:41:22.067
> 
> 标签：ruby, ruby-on-rails-3

我有一个收集日期时间的表格，如下所示：2013-05-21 00:00:00 UTC

这需要转换为与 XML 兼容的格式。我尝试使用以下`.rfc3339`方法：

```
DateTime.rfc3339('2013-05-21 00:00:00 UTC') 
```

我收到以下错误：`convert ActiveSupport::TimeWithZone to String`

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:57:58.267

类`DateTime::rfc3339` *方法*解析一个 RFC3339 字符串并返回一个日期对象。要将日期对象转换为 RFC3339 字符串，请使用以下代码：

```
DateTime.parse('2013-05-21 00:00:00 UTC').rfc3339 
```

# jquery - 使用 idtabs jquery 插件查找单选按钮选择

> ID：15486526
> 
> 赞同：0
> 
> 时间：2013-03-18T20:41:23.907
> 
> 标签：jquery, radio-button

我正在使用以下 html 以及 idTabs jquery 插件来创建选项卡式注册/登录/匿名发布表单。

```
 <div id="form_tabs">
        <ul>
          <li id="tab_radio_1"><span class="corner_fix"></span><input class="input_radio" type="radio" name="registered" value="1" checked="checked" /> <a class="selected" href="#tab1">Yep, I'm new here</a></li>
          <li id="tab_radio_2"><input class="input_radio" type="radio" name="registered" value="2" /> <a href="#tab2">Nope, I'm registered</a></li>
          <li id="tab_radio_3"><input class="input_radio" type="radio" name="registered" value="3" /> <a href="#tab3">I don't want to register</a></li>
        </ul>
 //more divs, radio buttons and text boxes below// 
```

问题是，如果我单击 href 链接以更改选项卡（并随后更改选定的单选按钮），它似乎不会触发单选按钮的值已更改的事件。

我需要找出当前选择了哪个单选按钮，到目前为止，用于查找此问题的“正常”Jquery 代码都没有工作。

非常感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:53:32.393

一种方法是

```
$("#form_tabs ul li a").on('click',function(e){
 if($(this).closest("li> :radio").is(':checked'))
  console.log('im checked');
 else
   console.log('im NOT checked');
}); 
```

# c++ - Boost::spirit::qi 为 nullaries 定义一个计算器

> ID：15486531
> 
> 赞同：4
> 
> 时间：2013-03-18T20:41:36.843
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi, abstract-syntax-tree

我正在尝试为数学表达式编写一个解析器，其中命名变量在`boost::spirit`（版本 1_51_0）中是空值，对此我是全新的。我定义`typedef boost::function<double()> Value`并且我的规则将像这样声明：`qi::rule<Iterator, Value()> expression, term, others, ...;`

我用这个宏在空值上定义二元运算符

```
#define BINARY_FUNCTOR(name, op)                        \
struct name                                             \
{                                                       \
  name(Value x, Value y): x_(x), y_(y) {}               \
  double operator()() { return x_() op y_(); }          \
  Value x_, y_;                                         \
}; 
```

并且有`ADD`,`SUB`等。从我看到的例子中，我希望规则是这样定义的：

```
expression = term
             >> *( (lit('+') >> term[ADD(_val, _1)])
                 | (lit('-') >> term[SUB(_val, _1)])
                 ); 
```

但这似乎不是正确的语法，因为我收到一个错误

```
boost/spirit/home/support/action_dispatch.hpp:162: error: no match for call to ‘(const<unnamed>::SUB) (boost::function<double ()()>&, boost::spirit::context<boost::fusion::cons<boost::function<double ()()>&, boost::fusion::nil>, boost::fusion::vector0<void> >&, bool&)’
SRParser.cpp:38: note: candidates are: double<unnamed>::SUB::operator()() 
```

在我看来，这与`_1`我期望的不太一样，即`Value`与下一个术语相关联。定义这样的规则的正确语法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T23:10:45.407

解析器表达式看起来没问题。

您对构建 AST 感到困惑。显然，您已决定使用语义动作来做到这一点，但您的努力太粗略，我无法了解如何（甚至决定您基于什么样本）。

本质上：您想对您似乎*神奇地*“将”到您的规则中的 'ADD'/'SUB' 实例*做什么？*

 *现在，您只需*将*实例*直接*用作语义操作。这会导致显示的错误消息直接告诉您该实例作为语义操作*无效。*

我假设您确实想使用 Phoenix 分配将二进制操作分配给暴露的属性。这看起来像：

```
expression = term
     >> *( (lit('+') >> term[ _val = phx::construct<ADD>(_val, _1)])
         | (lit('-') >> term[ _val = phx::construct<SUB>(_val, _1)])
         ); 
```

您会看到这与传统的表达式语法更加匹配。

为了好玩，我根据您的`Value`类型改编了一个完整的表达式解析器并创建了这个工作演示： http: **[//liveworkspace.org/code/3kgPJR$0](http://liveworkspace.org/code/3kgPJR%240)**

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>
#include <boost/spirit/include/phoenix.hpp>

namespace qi    = boost::spirit::qi;
namespace karma = boost::spirit::karma;
namespace phx   = boost::phoenix;

typedef std::function<double()> Value;

#define BINARY_FUNCTOR(name, op)                        \
struct name                                             \
{                                                       \
  name(Value x, Value y): x_(x), y_(y) {}               \
  double operator()() { return x_() op y_(); }          \
  Value x_, y_;                                         \
}; 

BINARY_FUNCTOR(ADD, +)
BINARY_FUNCTOR(SUB, -)
BINARY_FUNCTOR(MUL, *)
BINARY_FUNCTOR(DIV, /)

struct LIT
{
  LIT(double x): x_(x) {}
  double operator()() { return x_; }
  double x_;
}; 

struct NEG
{
  NEG(Value x): x_(x) {}
  double operator()() { return -x_(); }
  Value x_;
}; 

template <typename It, typename Skipper = qi::space_type>
    struct parser : qi::grammar<It, Value(), Skipper>
{
    parser() : parser::base_type(expression)
    {
        using namespace qi;
        expression =
            term                    [_val = _1]
            >> *( ('+' >> term  [_val = phx::construct<ADD>(_val, _1)])
                | ('-' >> term  [_val = phx::construct<SUB>(_val, _1)])
                );

        term =
            factor                [_val = _1]
            >> *( ('*' >> factor  [_val = phx::construct<MUL>(_val, _1)])
                | ('/' >> factor  [_val = phx::construct<DIV>(_val, _1)])
                );

        factor =
            double_               [_val = phx::construct<LIT>(_1)]
            |   '(' >> expression [_val = _1] >> ')'
            |   ('-' >> factor    [_val = phx::construct<NEG>(_1)])
            |   ('+' >> factor    [_val = _1]);

        BOOST_SPIRIT_DEBUG_NODE(expression);
        BOOST_SPIRIT_DEBUG_NODE(term);
        BOOST_SPIRIT_DEBUG_NODE(factor);
    }

  private:
    qi::rule<It, Value(), Skipper> expression, term, factor;
};

Value doParse(const std::string& input)
{
    typedef std::string::const_iterator It;
    parser<It, qi::space_type> p;
    Value eval;

    auto f(begin(input)), l(end(input));

    if (!qi::phrase_parse(f,l,p,qi::space,eval))
        std::cerr << "parse failed: '" << std::string(f,l) << "'\n";
    if (f!=l) 
        std::cerr << "trailing unparsed: '" << std::string(f,l) << "'\n";

    return eval;
}

int main()
{
    auto area = doParse("2 * (3.1415927 * (10*10))");
    std::cout << "Area of a circle r=10: " << area() << "\n";
} 
```

它会打印

```
Area of a circle r=10: 628.319 
```*

# php - 我的 PHP 代码需要显示所有行；怎么能做到这一点

> ID：15486536
> 
> 赞同：2
> 
> 时间：2013-03-18T20:41:56.497
> 
> 标签：php, mysql, database, search

这是显示我的问题的网站

[http://teetimeqc.com/paypage.php](http://teetimeqc.com/paypage.php)

我想显示 1 整行与列 'cust_no' 上的搜索查询词完全匹配

其他列是“prog_id”、“balance”、“cust5_id”

因此，用户搜索“140594”，如果它与该行的“cust_no”完全匹配，则显示整个**1**行。

所以他们看到这样的结果：

ID# Prog ID# Cust No# Balance #

**更新代码！**

感谢到目前为止 jtherman 的帮助

```
<code>

 <?php

 $db_host="***";
$db_username="****";
$db_password="****";
$db_name="***";
$db_tb_name="cust";
$db_tb_atr_name="cust_no";

  $db_prog="prog_id";
$db_bal="balance";
mysql_connect("****","*******","*****");
mysql_select_db("db461563732");

$query=mysql_real_escape_string($_GET['query']);

$query_for_result=mysql_query("SELECT * FROM $db_tb_name WHERE 

 $db_tb_atr_name  = '".$query."'");
echo "<h2>Search Results</h2>";
while($data_fetch=mysql_fetch_array($query_for_result))

   echo ($data_fetch[$db_tb_atr_name]);

   echo ($data_fetch[$db_prog]);

mysql_close();

?> 
```

这是桌子的样子；Cust5_ID 并不重要，它只是我用作主键的自动增量值.....我应该将主键更改为“cust_no”吗？：

```
TABLE `cust`
(
    `cust5_id` Integer auto_increment primary key, 
    `prog_id` Integer not null,
    `cust_no` Integer null,
    `balance` Decimal(12, 2) null
) DEFAULT CHARACTER SET utf8 ENGINE=InnoDB;

INSERT INTO `cust`
(`cust5_id`,`prog_id`,`cust_no`,`balance`)
VALUES
(1,217770,145094,-178.01),
(2,219885,145113,-390.86),
(3,219888,145164,-206.55),
(4,226227,145279,0),
(5,227700,145340,0),
(6,219911,145344,0),
(7,227795,145410,-44.1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:51:34.150

**更新** 由于问题已更新，错误已更改。现在你的问题是`while()`循环的语法有错误。使用大括号开始和结束 while 循环：

```
while($data_fetch=mysql_fetch_array($query_for_result)) { // <- here
  echo $data_fetch[$db_tb_atr_name];
  echo ", ";
  echo $data_fetch[$db_prog];
} // <- and here 
```

但是 - 如果您的数据库对于每个 cust_no 始终只包含一行，那么您可能会考虑添加一个唯一索引或使其成为主键，具体取决于应该如何生成数字。那么你也不需要`while()`循环，因为你的查询总是只会返回一行：

```
$data_fetch = mysql_fetch_assoc($query_for_result); // <-load the single row into $data_fetch
echo $data_fetch[$db_tb_atr_name];
echo ", ";
echo $data_fetch[$db_prog]; 
```

还要 100% 确保您拥有正确的数据库凭据。我建议您使用

```
mysql_connect($db_host, $db_username, $db_password); 
```

现在看来，您在代码中编写了两次凭据（标记为*****）？

最好，从您的评论中可以看出，现在使用已弃用的 mysql_* 函数是不好的做法，您应该真正使用 PDO 函数转换代码，请参阅[http://www.php.net/manual/en/pdo.connections。 php](http://www.php.net/manual/en/pdo.connections.php) 然而，这不是这个问题的范围。

**以前的答案**

换行

```
 $db_tb_atr_name  like '%".$query."%'"); 
```

到

```
 $db_tb_atr_name  = '".$query."'"); 
```

那将是完全匹配的...

然后换行

```
echo substr($data_fetch[$db_tb_atr_name], 0,10); 
```

到

```
echo $data_fetch['cust5_id'].",".$data_fetch['prog_id'].",".$data_fetch['cust_no'].",".$data_fetch['balance']; 
```

查看以您想要的方式格式化的结果。

也改变

```
echo "</li><hr/>"; 
```

到

```
echo "</li>"; 
```

该`<hr/>`部分可能会使某些浏览器无法正确呈现列表...实际上仅显示一个结果时显示有序列表没有意义...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:52:30.537

```
$query_for_result=mysql_query("SELECT * FROM $db_tb_name WHERE 

$db_tb_atr_name like '%".$query."%'"); 
```

我想是

`"SELECT * FROM FROM ".$db_tb_name." WHERE ".$db_tb_atr_name."like '%".$query."%'"`

您将整数与字符串进行比较，如果它是精确值，为什么要使用 %？

`"SELECT * FROM FROM ".$db_tb_name." WHERE ".$db_tb_atr_name." = ".$query`

# php - 静态页面错误上的 PHP 自动版本控制

> ID：15486547
> 
> 赞同：2
> 
> 时间：2013-03-18T20:43:01.447
> 
> 标签：php, apache, .htaccess, static, versioning

我正在使用 PHP 脚本以及一些`.htaccess`缓存清除规则，以便在静态网站上自动对文件进行版本控制。

脚本的来源在这里： http: [//www.particletree.com/notebook/automatically-version-your-css-and-javascript-files/](http://www.particletree.com/notebook/automatically-version-your-css-and-javascript-files/)

我更改了变量和函数的名称，但我认为这不是问题所在。

header.php 中的脚本：

```
<?php
function VERSIONING($url){
$path = pathinfo($url);
$ver = '.'.filemtime($_SERVER['DOCUMENT_ROOT'].$url).'.';
echo $path['dirname'].'/'.str_replace('.', $ver, $path['basename']);
}
?> 
```

在 header.php 中使用脚本、css 等函数：

```
<?php VERSIONING('/resources/css/stylesheet.css'); ?>
<?php VERSIONING('/resources/js/script.js'); ?>
<?php VERSIONING('/resources/img/logo.png'); ?> 
```

.htaccess 缓存清除规则：

```
<IfModule mod_rewrite.c>
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)\.(\d+)\.(js|css|jpe?g|png|gif|ico)$ $1.$3 [L]
</IfModule> 
```

现在问题来了。它工作得很好，但每隔 10-24 小时左右，我的文件中就会收到`error_log`我正在使用的每个文件的错误`VERSIONING`。

每个错误如下所示：

```
[16-Mar-2013 09:06:24] PHP Warning:  filemtime(): stat failed for /usr/local/apache/htdocs/resources/js/script.js in /home5/username/public_html/resources/header.php on line 42 
```

第 42 行包含以下内容：

```
$ver = '.'.filemtime($_SERVER['DOCUMENT_ROOT'].$url).'.'; 
```

我不知道问题可能是什么。我唯一的猜测是 DOCUMENT_ROOT 的解释有时会有所不同，并且在版本控制期间无法正确定位文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:47:27.190

看起来您的问题是您正在将相对 URL 传递给版本控制功能，这需要光盘上的文件路径，和/或您在共享平台上，并且 $_SERVER['DOCUMENT_ROOT'] 是服务器而不是您的站点

作为一个快速的修复，我会为你的根定义一个常量，看起来可能是这样

```
define('SITE_ROOT', '/home5/username/public_html'); 
```

然后尝试

```
function VERSIONING($url){
  $path = SITE_ROOT.$url;
  $ver = '.'.filemtime($path).'.';
  echo str_replace('.', $ver, $url);
} 
```

# r - map-ggplot2 上的比例尺和指北针

> ID：15486551
> 
> 赞同：4
> 
> 时间：2013-03-18T20:43:06.577
> 
> 标签：r, ggplot2

使用ggplot2在地图上绘制比例尺和指北针的任何解决方案

```
library(mapdata); library(ggplot2); 
nl.map=data.frame(map('worldHires', 'Netherlands')[c('x', 'y')])
ggplot(nl.map, aes(x, y))+geom_path() 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T21:08:04.793

几年前，我编写了一些可以绘制比例尺的代码（另见[r-sig-geo 上的这篇文章](https://stat.ethz.ch/pipermail/r-sig-geo/2010-December/010382.html)），这是我当时写的代码。你可以试一试：

首先是一些支持功能：

```
makeNiceNumber = function(num, num.pretty = 1) {
   # Rounding provided by code from Maarten Plieger
   return((round(num/10^(round(log10(num))-1))*(10^(round(log10(num))-1))))
}

createBoxPolygon = function(llcorner, width, height) {
   relativeCoords = data.frame(c(0, 0, width, width, 0), c(0, height, height, 0, 0))
   names(relativeCoords) = names(llcorner)
   return(t(apply(relativeCoords, 1, function(x) llcorner + x)))
} 
```

而真正的功能：

```
addScaleBar = function(ggplot_obj, spatial_obj, attribute, addParams = 
list()) {
   addParamsDefaults = list(noBins = 5, xname = "x", yname = "y", unit = "m", 
        placement = "bottomright", sbLengthPct = 0.3, sbHeightvsWidth = 1/14)
   addParams = modifyList(addParamsDefaults, addParams)

   range_x = max(spatial_obj[[addParams[["xname"]]]]) - min(spatial_obj[[addParams[["xname"]]]])
   range_y = max(spatial_obj[[addParams[["yname"]]]]) -  min(spatial_obj[[addParams[["yname"]]]])
   lengthScalebar = addParams[["sbLengthPct"]] * range_x
   ## OPTION: use pretty() instead
   widthBin = makeNiceNumber(lengthScalebar / addParams[["noBins"]])
   heightBin = lengthScalebar * addParams[["sbHeightvsWidth"]]
   lowerLeftCornerScaleBar = c(x = max(spatial_obj[[addParams[["xname"]]]]) - (widthBin * addParams[["noBins"]]), y = min(spatial_obj[[addParams[["yname"]]]]))
   scaleBarPolygon = do.call("rbind", lapply(0:(addParams[["noBins"]] - 1), function(n) {
     dum = data.frame(createBoxPolygon(lowerLeftCornerScaleBar + c((n * widthBin), 0), widthBin, heightBin))
     if(!(n + 1) %% 2 == 0) dum$cat = "odd" else dum$cat = "even"
     return(dum)
   }))
   scaleBarPolygon[[attribute]] = min(spatial_obj[[attribute]])
   textScaleBar = data.frame(x = lowerLeftCornerScaleBar[[addParams[["xname"]]]] + (c(0:(addParams[["noBins"]])) * widthBin), y = lowerLeftCornerScaleBar[[addParams[["yname"]]]],
                             label = as.character(0:(addParams[["noBins"]]) * widthBin))
   textScaleBar[[attribute]] = min(spatial_obj[[attribute]])

   return(ggplot_obj +
     geom_polygon(data = subset(scaleBarPolygon, cat == "odd"), fill = "black", color = "black", legend = FALSE) +
     geom_polygon(data = subset(scaleBarPolygon, cat == "even"), fill = "white", color = "black", legend = FALSE) +
     geom_text(aes(label = label), color = "black", size = 6, data = textScaleBar, hjust = 0.5, vjust = 1.2, legend = FALSE))
} 
```

还有一些示例代码：

```
library(ggplot2)
library(sp)

data(meuse)
data(meuse.grid)
ggobj = ggplot(aes(x = x, y = y, color = zinc), data = meuse) + geom_point()
# Make sure to increase the graphic device a bit
addScaleBar(ggobj, meuse, "zinc", addParams = list(noBins = 5)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-06T02:15:33.940

有一个名为[**ggsn**](http://oswaldosantos.github.io/ggsn/)的库，它允许您自定义比例尺和指北针。

```
ggplot() +
  geom_path(aes(long, lat, group=group), data=worldUk, color="black", fill=NA) +
  coord_equal() +
  ggsn::scalebar(worldUk, dist = 100, st.size=3, height=0.01, dd2km = TRUE, model = 'WGS84') 
```

[![在此处输入图像描述](../Images/69e6f395f028502ee9deee01c7cc9e37.png)](https://i.stack.imgur.com/6yFsH.jpg)

# php - 丢失 php $_SESSION 变量

> ID：15486552
> 
> 赞同：0
> 
> 时间：2013-03-18T20:43:09.600
> 
> 标签：php

我帮助某人创建了一个在线研究。该调查由不同的调查和游戏组成。在研究开始时，我将这个人的信息插入到参与者数据库中，并为他分配了一个唯一的序列号。对于其他调查/游戏，我将序列号传递到 php 会话变量中，并将其与其他信息一起插入到每个调查/游戏数据库表中。

但是，在某些情况下，会话变量会丢失并且为 NULL，这会使事情变得混乱。什么类型的事情会导致这种情况？刷新页面会清除会话变量吗？我有什么办法可以确保用户不会丢失会话变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:45:27.193

*   会话可能会超时。
*   用户可以清除他们的 cookie。
*   您的代码清除会话数据时可能存在错误。

您不能保证会话永远不会丢失，但您可以更改会话的超时期限以延长会话的寿命。另请参阅： [如何在 30 分钟后使 PHP 会话过期？](https://stackoverflow.com/q/520237/362536)

# wix - 判断是否安装了SqlLocalDB

> ID：15486554
> 
> 赞同：3
> 
> 时间：2013-03-18T20:43:16.667
> 
> 标签：wix, localdb, wix3.7

我正在寻找一种在 WiX 中确定是否安装了 SQLLocalDB 的方法。我怎样才能做到这一点？- 我可以检查注册表项吗？- 如果是，哪个键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:32:50.153

RegistrySearch 应该这样做：

```
<Property Id="LOCALDB">
   <RegistrySearch Id="SearchForLocalDB" Root="HKLM" 
                   Key="SOFTWARE\Microsoft\Microsoft SQL Server\MSSQL11E.LOCALDB\MSSQLServer\CurrentVersion"
                   Name="CurrentVersion"
                   Type="raw" />
</Property> 
```

那会给你版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-06T18:30:40.370

从注册表检查可能不会一直有效，因为如果用户卸载 localDb，那么注册表项可能仍然存在。

这是我用来从命令行识别 localDB 安装的功能 -

```
 internal static bool IsLocalDBInstalled()
    {
        // Start the child process.
        Process p = new Process();
        // Redirect the output stream of the child process.
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.RedirectStandardOutput = true;
        p.StartInfo.FileName = "cmd.exe";
        p.StartInfo.Arguments = "/C sqllocaldb info";
        p.StartInfo.CreateNoWindow = true;
        p.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        p.Start();
        // Do not wait for the child process to exit before
        // reading to the end of its redirected stream.
        // p.WaitForExit();
        // Read the output stream first and then wait.
        string sOutput = p.StandardOutput.ReadToEnd();
        p.WaitForExit();

        //If LocalDb is not installed then it will return that 'sqllocaldb' is not recognized as an internal or external command operable program or batch file.
        if (sOutput == null || sOutput.Trim().Length == 0 || sOutput.Contains("not recognized"))
            return false;
        if (sOutput.ToLower().Contains("mssqllocaldb")) //This is a defualt instance in local DB
            return true;
        return false;
    } 
```

# iphone - 如何在 Safari 中获取/查看/读取当前 URL？

> ID：15486557
> 
> 赞同：2
> 
> 时间：2013-03-18T20:43:39.960
> 
> 标签：iphone, objective-c, url

做了很多搜索，只是想出了“如何在 Safari 中打开 URL ......”

寻找打开 Safari 时如何获取/查看/读取当前 URL 的方法。

编辑：我的应用程序使用 Safari 打开一个 URL，如下所示：

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:myURL]]; 
```

假设，经过网站的一些验证，结束 URL 有一些附加信息。所以我试图从 Safari 获取最终 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:11:02.373

这是不可能的，您无权访问任何外部应用程序。然而，大多数这些身份验证/验证技术的工作原理（如 facebook / dropbox 登录等）是它们使用某种回调回应用程序。

您可以向您的应用程序注册一个特定的 url 方案，该方案可以具有参数，这样您就可以在 url 中获取您需要的信息。该网站将需要支持回调，或者您需要能够访问该网站以自己提供。

关于如何使用 URL 方案，您可以查看本教程：

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:17:03.920

正如其他海报所说，您无法查看此信息。您需要做的是使用您自己的网站将应用程序的用户与网站上的用户进行匹配。

例如，您可以在将用户发送到您的网站时向您的网站发送一个随机数buy.php?id=123445。然后通过 iPhone 请求（定期和/或按下按钮）来自您网站的结果。检查.php?id=123445。

这也可以通过 cookie 和 php 会话来完成。

# actionscript-3 - 突围碰撞箱系统

> ID：15486561
> 
> 赞同：0
> 
> 时间：2013-03-18T20:43:53.077
> 
> 标签：actionscript-3, breakout

我已经为此工作了几个星期，我可以让它像它一样工作。它几乎就在那里，我想我只是缺少一些东西。我基本上不能让块和球之间的碰撞检测像我想让它们工作一样工作。

[转储 SWF](http://www.newgrounds.com/dump/item/0f00904c7385c28ca939bdaab95596bd)

球仍然有机会在几秒钟内犁出大量的块。我很想听听有类似问题的人的意见。

这是代码；

```
private function checkCollision():void
    {
        grdx = Math.floor((ball.x) / 28);
        grdy = Math.floor((ball.y) / 14);
        ngrdx = Math.floor((ball.x + dx) / 28);
        ngrdy = Math.floor((ball.y + dy) / 14);

        if (grdy <= level.length - 1 && ngrdy <= level.length - 1 && grdy >= 0 && ngrdy >= 0) 
        {   

            if(level[grdy][ngrdx] > 0) 
            {

                level[grdy][ngrdx] = 0;
                bnm = "Block_" + grdy + "_" + ngrdx;    
                if (this.getChildByName(bnm) != null)
                {

                    this.removeChild(this.getChildByName(bnm));
                    dx *= -1;   
                    totalBreaks++;

                    trace("Hit on X");
                    trace("Block: " + totalBreaks + " / " +  totalBlocks);
                }

            }
            else if(level[ngrdy][grdx] > 0) 
            {               

                bnm = "Block_" + ngrdy + "_" + grdx;
                level[ngrdy][grdx] = 0; 
                 if (this.getChildByName(bnm) != null)
                {

                    this.removeChild(this.getChildByName(bnm));
                    dy *= -1;
                    totalBreaks++;
                    trace("Hit on Y");
                    trace("Block: " + totalBreaks + " / " +  totalBlocks);
                }
            }
            if(level[ngrdy][ngrdx] > 0) 
            {               

                bnm = "Block_" + ngrdy + "_" + ngrdx;
                level[ngrdy][ngrdx] = 0;    
                if (this.getChildByName(bnm) != null)
                {

                    this.removeChild(this.getChildByName(bnm));
                    dy *= -1;
                    dx *= -1;
                    totalBreaks++;
                    trace("hit on X,Y");
                    trace("Block: " + totalBreaks + " / " +  totalBlocks);
                }

            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:53:50.193

我不确定我是否正确，但我认为您的`if else if`陈述可能存在一个问题。

从您的示例中，调用 to可能会更改您和vars 的`checkCollision()`两倍，从而导致球在击中砖块时继续朝同一方向移动。`dx``dy`

如果我是对的，那么您可以重构您的`if`陈述，如下所示：

```
if (level[ngrdy][ngrdx] > 0)
{
    [...]
}
else if (level[grdy][ngrdx] > 0)
{
    [...]
}
else if (level[ngrdy][grdx] > 0)
{
    [...]
} 
```

此外，将简单的测试用括号括起来是一个好习惯。因此，不要这样写：

```
if (grdy <= level.length - 1 && ngrdy <= level.length - 1 && grdy >= 0 && ngrdy >= 0) 
```

我会写这个：

```
if ((grdy <= level.length - 1) && (ngrdy <= level.length - 1) && (grdy >= 0) && (ngrdy >= 0)) 
```

从而使代码更具可读性。

干得好，继续加油！

编辑：正如您的评论表明这不是一个正确的答案，我再挖掘一点，现在我有另一个建议，使用一些布尔值来检查方向是否应该在两个轴上翻转。我还做了一些重构：

```
private function checkCollision():void
{
    grdx = Math.floor((ball.x) / 28);
    grdy = Math.floor((ball.y) / 14);
    ngrdx = Math.floor((ball.x + dx) / 28);
    ngrdy = Math.floor((ball.y + dy) / 14);

    var flipX:Boolean = false;
    var flipY:Boolean = false;

    if ((grdy <= level.length - 1) && (ngrdy <= level.length - 1) && (grdy >= 0 && ngrdy >= 0))
    {
        if (testBlock(grdx, ngrdy))
        {
            flipY = true;
        }
        if (testBlock(ngrdx, grdy))
        {
            flipX = true;
        }
        if (testBlock(ngrdx, ngrdy))
        {
            flipX = true;
            flipY = true;
        }

        dx *= flipX ? -1 : 1;
        dy *= flipY ? -1 : 1;
    }
}

private function testBlock(xPos:int, yPos:int):Boolean
{
    if (level[yPos][xPos] > 0)
    {
        trace("hit on X,Y");
        level[yPos][xPos] = 0;
        breakBlock("Block_" + yPos + "_" + xPos);
        trace("Block: " + totalBreaks + " / " + totalBlocks);
        return true;
    }
    return false;
}

private function breakBlock(blockName:String):void
{
    if (this.getChildByName(blockName))
    {
        this.removeChild(this.getChildByName(blockName));
        totalBreaks++;
    }
} 
```

如果它碰巧是正确的解决方案，我会清理这个答案......

# cassandra - 将新节点添加到 Cassandra 集群以使集群保持平衡的确切过程是什么？

> ID：15486562
> 
> 赞同：4
> 
> 时间：2013-03-18T20:43:54.917
> 
> 标签：cassandra

我已经阅读了我能找到的相关文档，但我仍然有疑问。

我读到的

来自[http://wiki.apache.org/cassandra/Operations#Moving_nodes](http://wiki.apache.org/cassandra/Operations#Moving_nodes)

> 如果您将节点添加到集群中，您的环将不平衡，获得完美平衡的唯一方法是为每个节点计算新令牌并使用 nodetool move 命令手动将它们分配给每个节点。

并来自[http://www.datastax.com/docs/1.1/operations/cluster_management#adding-capacity-to-an-existing-cluster](http://www.datastax.com/docs/1.1/operations/cluster_management#adding-capacity-to-an-existing-cluster)

> 如果需要通过不均匀数量的节点来增加容量，则必须为整个集群重新计算令牌，然后使用 nodetool move 将新令牌分配给现有节点。使用新的令牌分配重新启动所有节点后，运行 nodetool cleanup 以删除所有节点上未使用的密钥

但我不清楚这些事情的顺序。

你能解释一下如何在以下场景中做到这一点吗？

*   我使用的是 cassandra 1.1.9，所以没有使用虚拟节点。
*   我有一个有 5 个节点的集群环，每个节点拥有 20%
*   他们的代币是
    *   0
    *   34028236692093846346337460743176821145
    *   68056473384187692692674921486353642291
    *   102084710076281539039012382229530463436
    *   136112946768375385385349842972707284582

我想添加 2 个额外的节点。

我必须遵循哪些步骤？我知道我应该安装和配置 cassandra，使用原来的 5 作为种子，并计算它们的新令牌，但是我应该按照什么顺序移动数据`nodetool move`？是一次一个吗？
当我移动第一个数据时，数据会发生什么？是否随时可用？
我应该在将原来的 5 个节点移动到他们的新令牌之前启动两个新节点吗？

一步一步的指南将是理想的。

请注意，我需要在 1.2 版之前进行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:02:16.010

新的令牌应该是

*   0
*   24305883351495604533098186245126300818
*   48611766702991209066196372490252601636
*   72917650054486813599294558735378902454
*   97223533405982418132392744980505203272
*   121529416757478022665490931225631504090
*   145835300108973627198589117470757804908

使用 2^127/7 * {0-7} 计算。

> 我必须遵循哪些步骤？我应该以什么顺序使用 nodetool move 移动数据？

你应该

1.  在 48611766702991209066196372490252601636 的一个节点中引导
2.  在 121529416757478022665490931225631504090 引导另一个节点
3.  将 34028236692093846346337460743176821145 移至 24305883351495604533098186245126300818
4.  将 68056473384187692692674921486353642291 移至 72917650054486813599294558735378902454
5.  将 102084710076281539039012382229530463436 移至 97223533405982418132392744980505203272
6.  将 136112946768375385385349842972707284582 移至 145835300108973627198589117470757804908

（我试图最小化传输的数据量 - 可能不是最佳的，但考虑到您可能已经拥有的数据不平衡，已经足够接近，不会产生太大影响。）

> 是一次一个吗？

您应该一次引导一个节点并一次移动一个令牌。这样可以避免在流式传输数据时在集群上施加过多的负载。

> 当我移动第一个数据时，数据会发生什么？是否随时可用？

移动期间数据完全可用。该节点参与新旧范围的读写，因此您可以在移动期间进行读写。

> 我应该在将原来的 5 个节点移动到他们的新令牌之前启动两个新节点吗？

在集群中拥有更多节点总是更好 - 如果您先移动，您将拥有一些节点的数据量是其他节点的两倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T20:43:03.597

从 Cassandra 1.2 开始，由于新的 vnodes（每个节点多个种子）功能，在添加节点时保持集群平衡非常容易。Cassandra 现在会自动为您平衡集群。如果您从早期版本升级，则[必须自己激活 vnode 功能](https://stackoverflow.com/questions/15362657/how-to-migrate-single-token-cluster-to-a-new-vnodes-cluster-without-downtime)

# objective-c - 按比例自动调整高度和宽度界面生成器

> ID：15486564
> 
> 赞同：0
> 
> 时间：2013-03-18T20:43:58.560
> 
> 标签：objective-c, uiview, ios6, interface-builder, autoresize

我有一个 UIImageView 设置为根据 Superview 的高度自动调整其高度，即当通话状态栏下降时。如何使整个视图按比例调整大小，以便 UIImageView 的宽度在高度发生变化时发生变化？

我想在 Interface Builder 中执行此操作，但也可以以编程方式使用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:54:48.280

iOS 6 中最简单的方法是使用（iOS 6 中的新功能）自动布局功能。使视图的宽度始终与其高度的固定比例非常容易。

否则，您必须检测视图控制器中的更改`layoutSubviews`并使用代码来调整 UIImageView 的大小。

但是，请考虑让*图像*调整大小而不是整个图像视图的替代方案。如果你给 UIImageView 赋予 right `contentMode`，如果视图的高度发生变化，它会自动按比例调整图像大小。

# sql - 基于字段值的增量和记录创建

> ID：15486569
> 
> 赞同：2
> 
> 时间：2013-03-18T19:27:10.737
> 
> 标签：sql, ms-access

访问 2003

最终，我需要创建一个用于打印标签“Sample ID, Jar x of x”的报告。

我的表有样品 ID 和罐子数。是否可以创建一个给我 3 个字段的查询：样品 ID、罐子编号、罐子数 - 其中罐子编号根据罐子数以增量创建记录？

```
 Query:  Sample ID - Jar Number - Number of Jars
          Sample 1    1            4
          Sample 1    2            4
          Sample 1    3            4
          Sample 1    4            4
          Sample 2    1            2
          Sample 2    2            2 
```

表信息为：

```
 Table:  Sample ID - Number of Jars
          Sample 1    4
          Sample 2    2 
```

我想避免为每个罐子创建一个表记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:48:11.160

您可以利用数字表：

```
SELECT samples.[Sample ID], 
       samples.[Number of Jars], 
       Numbers.Number AS [Jar Number] INTO NewSamples
FROM samples, Numbers
WHERE Numbers.Number<=[Number of Jars] 
```

Samples 是您当前表的名称。

数字表包含介于 1 和您可以为罐子获得的最高数字（例如 100）之间的整数。

如果您已经有一个从零开始的数字表，您可以使用：

```
WHERE Numbers.Number Between 1 And [Number of Jars] 
```

# python - Arduino 和 PyBluez 之间的蓝牙通信

> ID：15486570
> 
> 赞同：3
> 
> 时间：2013-03-18T20:44:11.593
> 
> 标签：python, bluetooth, arduino, bluez

我正在尝试使用 Python PyBluez 在 Arduino Uno 板（带有蓝牙屏蔽）和我的 Linux 操作系统之间建立蓝牙通信。

我已成功将笔记本电脑与 Uno 配对。我可以连接到板子，但是板子没有读取正在发送的数据，也无法发送数据。

这是Arduino草图

```
#include <SoftwareSerial.h>

#define RxD 0    //receive data on digital 0
#define TxD 1 //transmit on digital 1

SoftwareSerial blueToothSerial(RxD, TxD);
int counter = 0;
int incoming;
void setup(void){
  Serial.begin(9600);
  //pinMode(RxD,INPUT);
  //pinMode(TxD,OUTPUT);
  setupBlueToothConnection();
}

void setupBlueToothConnection(){
  blueToothSerial.begin(19200);
  blueToothSerial.print("\r\n+STWMOD=0\r\n"); //set the bluetooth work in slave mode
  blueToothSerial.print("\r\n+STNA=SeeedBTSlave\r\n"); //set the bluetooth name as     "SeeedBTSlave"
  blueToothSerial.print("\r\n+STOAUT=1\r\n"); // Permit Paired device to connect me
  //blueToothSerial.print("\r\n+STAUTO=0\r\n"); // Auto-connection should be forbidden here
  delay(2000); // This delay is required.
  blueToothSerial.print("\r\n+INQ=1\r\n"); //make the slave bluetooth inquirable
  Serial.println("The slave bluetooth is inquirable!");
  delay(2000); // This delay is required.
  blueToothSerial.flush();
} 

void loop(){
  if(blueToothSerial.available())
     Serial.println(blueToothSerial.read());
  blueToothSerial.write('x');
} 
```

还有我的 Python 模块：

```
import bluetooth
import sys
bd_addr = "00:12:10:23:10:18" #itade address

port = 1
sock=bluetooth.BluetoothSocket( bluetooth.RFCOMM )
sock.connect((bd_addr, port))
print 'Connected'
sock.settimeout(1.0)
sock.send("x")
print 'Sent data'

data = sock.recv(1)
print 'received [%s]'%data

sock.close() 
```

我有 Arduino IDE 1.0.4，我的笔记本电脑运行的是 Ubuntu 11.10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-26T14:40:12.390

你的这一行：

```
data = sock.recv(1) 
```

可能没有收到足够的字节，所以试试 Tim 发布的这个信息： [只从套接字接收一个字节](https://stackoverflow.com/questions/13229688/only-receiving-one-byte-from-socket)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T21:52:35.293

使用 Itade Studio 蓝牙屏蔽，您必须在没有附加屏蔽的情况下上传代码，然后附加屏蔽。我很好奇其他蓝牙设备是否也是如此。

为了完成，在您的笔记本电脑和 Arduino Uno w/BT shield 之间建立通信：

1.  将您的笔记本电脑与蓝牙防护罩配对

2.  上传带屏蔽层的 Arduino 代码。

3.  装上防护罩

4.  运行python模块。

在 itade shield 上，当 D1 LED 变为绿色常亮时，您知道何时建立连接，而不是闪烁的绿色。

# c++ - 在 C++ 中打印阿拉伯字符串

> ID：15486572
> 
> 赞同：5
> 
> 时间：2013-03-18T20:44:18.603
> 
> 标签：c++

我是 C++ 的初学者

我想使用 Borland C 在 C++ 中打印阿拉伯语语句，但失败了，我还尝试将文件保存为 UTF-8，但没有帮助。

因此，如果有人对此或问题所在或如何配置编译器以打印阿拉伯语有任何了解，请帮助我。

```
#include<iostram.h>
#include<conio.h>
void main()
{
   clrscr();
   char x [5] = {'ا','ح','م','د'};
   for(int i = 0; i< 5; i++)
       cout << x[i];
   getche();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:59:23.040

首先，您假设您的源代码可以包含阿拉伯字符。这是一个非常糟糕的主意，并且取决于编译器在与编辑器编写源文件相同的代码页中解释源文件的假设。

在 Windows C++ 中处理阿拉伯语或其他任意 Unicode 的最安全方法是使用 _UNICODE 进行编译，声明 wchar_t （和朋友）的变量，并使用 Unicode 常量，如`'\u6041'`阿拉伯字符。如果你必须用'char'做事，你必须*在正确的代码页*`\x`中为你的阿拉伯字符提供多字节序列，并处理单个不能保存 UTF- 中的阿拉伯字符的事实。 8.*`char`*

 *最后，由于您使用的是 cout，因此仅当您的 DOS 框的当前代码页是阿拉伯语代码页时，它才会向您显示阿拉伯语。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T20:50:21.580

如果你的 BorlandC++ 在 DOS 下

默认情况下，您没有任何字符集将其显示为阿拉伯语。但是那些日子里，有些应用程序可以将扩展的 ASCII 字符更改为其他语言，例如阿拉伯语、波斯语……。

你应该做的步骤：

*   如果您使用的是 Windows Vista/7+，首先您应该使用 DosBox（您需要全屏模式）

*   您必须更改内存中的默认 ASCII 字体表

*   类似`vegaf.com`定义波斯语/阿拉伯语 alpha-beta 的东西

*注意：此系统未定义 UTF-8*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T20:55:58.620

C++11 是唯一可以为 UTF-8（和其他 UTF 字符集）编码提供本机支持的 ​​C++ 标准。

[在 C++11 之前的版本中，如果您需要像这样](http://site.icu-project.org/)的 UTF-8 支持，您可以简单地使用第三方库。*

# c# - 使用由属性标识的数据序列化 XML

> ID：15486573
> 
> 赞同：1
> 
> 时间：2013-03-18T20:44:19.937
> 
> 标签：c#, .net, xml, xml-serialization

我正在尝试序列化包含由 id 属性标识的“字段”元素中的数据的 XML：

```
<data>
  <row>
   <field id="firstName">Stef</field>
   <field id="lastName">Ben</field>
   <field id="city">LA</field>
   <field id="state">CA</field>
  </row>
  <row>
   <field id="firstName">Ann</field>
   <field id="lastName">Brown</field>
   <field id="city">NY</field>
   <field id="state">NY</field>
  </row>
</data> 
```

我的目标是创建一个如下所示的类：

```
class User
{
    private string firstName;
    [XmlElement("firstName")]
    public string FirstName { get; set; }     
    [XmlElement("lastName")]
    public string LastName { get; set; }
    [XmlElement("city")]
    public string City { get; set; }
    [XmlElement("state")]
    public string State { get; set; }
} 
```

你有什么想法如何序列化和反序列化这个 XML 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:48:14.427

您可以使用 LINQ to XML 来查询您的 XML：

```
var doc = XDocument.Load("Input.txt");
var users = doc.Root.Elements("row")
                    .Select(r => new User
                    {
                        FirstName = (string)r.Elements("field")
                                             .Single(f => (string)f.Attribute("id") == "firstName"),
                        LastName = (string)r.Elements("field")
                                            .Single(f => (string)f.Attribute("id") == "lastName"),
                        City = (string)r.Elements("field")
                                        .Single(f => (string)f.Attribute("id") == "city"),
                        State = (string)r.Elements("field")
                                         .Single(f => (string)f.Attribute("id") == "state"),
                    }).ToList(); 
```

从`User`s 集合中获取 XML：

```
var dox = new XDocument(new XElement("data",
                (from u in users
                select new XElement("row",
                    new XElement("field",
                        new XAttribute("id", "firstName"),
                        new XText(u.FirstName)),
                    new XElement("field",
                        new XAttribute("id", "lastName"),
                        new XText(u.LastName)),
                    new XElement("field",
                        new XAttribute("id", "city"),
                        new XText(u.City)),
                    new XElement("field",
                        new XAttribute("id", "state"),
                        new XText(u.State)))))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:21:24.523

You could put an xslt style sheet in between. Serialize and deserialize with attributes to "normal" XML and from there transform to the desired form.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:57:27.343

如何使用 Linq 并创建字典列表

```
var xDoc = XDocument.Parse(xml); //XDocument.Load(filename);
var rows = xDoc.Descendants("row")
               .Select(r => r.Elements()
                             .ToDictionary(f=>f.Attribute("id").Value,f=>f.Value))
               .ToList();

Console.WriteLine(rows[0]["firstName"]); 
```

# android - 动态设置 RadioButton 已选中

> ID：15486582
> 
> 赞同：0
> 
> 时间：2013-03-18T20:44:57.663
> 
> 标签：android, xml, if-statement, radio-button, oncreate

我正在开发 Android 应用程序，但我遇到了一个问题。我有 Radiobutton 组：

```
<RadioGroup
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
<RadioButton
android:id="@+id/niezakonczoneRadio"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginBottom="4dp"
android:layout_marginLeft="6dp"
android:layout_marginRight="14dp"
android:layout_marginTop="0dp"
android:onClick="niezakonczoneRadio"
android:text="Niezakończone" />

<RadioButton
android:id="@+id/zakonczoneRadio"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginBottom="4dp"
android:layout_marginLeft="6dp"
android:layout_marginRight="14dp"
android:layout_marginTop="0dp"
android:onClick="zakonczoneRadio"
android:text="Zakończone" />

</RadioGroup> 
```

我想在 if...else 语句（在 onCreate 中）中动态检查其中一个，如下所示：

```
if (status=="Zakończone"){
          RadioButton radioTak = (RadioButton) findViewById(R.id.zakonczoneRadio);

          radioTak.setChecked(true);
          status_radio="1";  
      } else {
          RadioButton radioNie = (RadioButton) findViewById(R.id.niezakonczoneRadio);
          radioNie.setChecked(true);
          status_radio="0";  
      }; 
```

即使“状态”变量是“Zakończone”，也会检查 niezakonczoneRadio。这里有什么问题？一般都是一直勾选一个按钮，不管哪个值有变量。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:47:10.887

您的问题显然是条件：

```
if (status == "Zakończone") { } 
```

这总是返回**false**（您正在比较引用而不是字符串值）。请记住，无论何时要比较字符串，都必须使用`equals()`方法。

所以改成：

```
if (status.equals("Zakończone")) { // or equalsIgnoreCase() } 
```

现在它可以工作了。我强烈建议您阅读以下内容：

*   [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

并记住一条**黄金法则**：始终想要比较的字符串`equals()`成为您最亲密的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:47:31.637

```
status.equals("Zakończone") 
```

使用字符串`equals`方法

# text - 在 C# 中将文本数据发送到声卡

> ID：15486583
> 
> 赞同：0
> 
> 时间：2013-03-18T20:44:59.257
> 
> 标签：text, wave

我想向声卡发送文本数据，例如“我的名字是亚历克斯”？我怎样才能做到这一点？我必须先将其转换为 .wav 吗？如果是，那么如何将文本转换为 wav 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:10:03.570

您可以在 C# 4.0中使用内置的[SpeechSynthesis](http://msdn.microsoft.com/en-us/library/system.speech.synthesis.speechsynthesizer%28v=vs.100%29.aspx)

```
using(var tts = new System.Speech.Synthesis.SpeechSynthesizer())
{
   tts.SetOutputToDefaultAudioDevice();
   tts.Speak("Hello");

   tts.SetOutputToWaveFile("myHello.wav");
   tts.Speak("Hello Again");
} 
```

在网络浏览器中，您可以使用 Google 的 text2speech（真正翻译）：

[http://translate.google.com/translate_tts?q=HelloWorld&tl=en](http://translate.google.com/translate_tts?q=HelloWorld&tl=en)

# java - NoClassDefFoundError：com/google/gdata/client/GoogleService

> ID：15486584
> 
> 赞同：0
> 
> 时间：2013-03-18T20:44:59.547
> 
> 标签：java

我从[http://www.java2s.com/Code/Jar/g/Downloadgdataclient10jar.htm](http://www.java2s.com/Code/Jar/g/Downloadgdataclient10jar.htm)下载了 .jar 文件 ，它缺少我正在尝试运行的应用程序使用的 GoogleService 类。那么我的问题是：我可以从哪里下载带有 GoogleService 类的 gdata-client-1.0.jar ？

# django - Django 1.5：如何使用通用视图？

> ID：15486586
> 
> 赞同：0
> 
> 时间：2013-03-18T20:45:08.430
> 
> 标签：django, django-generic-views, django-1.5

我正在尝试使用 Django 1.5 中的通用视图，这有点令人困惑。到目前为止，我一直在使用 views.py 中的函数。我同意函数方法有更多的样板代码，但同时作为开发人员，你对它有更多的控制权。不过为了学习。让我们考虑这个部分代码：

```
if request.method == 'POST':
        if 'invitation' in request.session:
            invitation = Invitation.objects.get(id=request.session['invitation'])
            profile = invitation.sender.get_profile()            
            form = RegistrationForm(request.POST, is_accept_invite = True, _email = invitation.email)
        else:
            form = RegistrationForm(request.POST)
        if form.is_valid():
        ... 
```

我理解它的方式，通用视图考虑三种状态：GET，POST -> Valid，POST -> invalid()。

但是上面的代码是 POST -> form.validation 之前的条件，以相应地实例化表单

这将是我提出的一个通用视图：

```
class RegisterView(FormView):
    template_name = 'register.html'
    form_class = RegisterForm
    success_url = '/registration_successfull/'

    def form_valid(self, form):
        ...

    def form_invalid(self, form):
        ... 
```

我想我需要重写`get_form(form_class)`或`get_form_kwargs()`检查我的 request.session 并相应地实例化 RegistrationForm。那是对的吗？有什么例子可以做到这一点吗？我在文档中找不到任何示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:09:01.723

```
class RegisterView(FormView):
    template_name = 'register.html'
    form_class = RegisterForm
    success_url = '/registration_successfull/'

    def get_form_kwargs(self):
        kwargs = super(RegisterView, self).get_form_kwargs()
        if 'invitation' in self.request.session:
            kwargs['invitation'] = invitation = Invitation.objects.get(id=self.request.session['invitation'])
            kwargs['profile'] = invitation.sender.get_profile()
        return kwargs

    def form_valid(self, form):
        ...

    def form_invalid(self, form):
        ... 
```

# c# - 为什么更喜欢 var strList = new List (); 列表 strList = 新列表 ();?

> ID：15486589
> 
> 赞同：2
> 
> 时间：2013-03-18T20:45:17.127
> 
> 标签：c#, coding-style, var

为什么在创建对象时首选使用**var**关键字而不是实际类型？

```
var strList  = new List<string>(); //good?
List<string> strList  = new List<string>(); //why bad? 
```

问题不只是关于`List<T>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:51:48.873

var 关键字非常适合**隐藏噪音**。当你有这样的声明时

```
List<string> strList  = new List<string>(); 
```

您可以确定 strList 是 List 类型。键入两次是浪费您的时间。如果您决定稍后更改类型，则必须在两个地方都进行更改。

我的偏好是在指定类型时始终使用 var**已经明显指定了附近**。当类型不重要时，我经常将 var 用于任何实例变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:57:03.847

这不是一个`var`好，另一个是坏的。这是一种个人喜好。

如果您希望我更具体，我认为您应该`var`仅在类型完全明显时使用，例如：

```
var employee = new Employee(); 
```

另一方面，这可能是一个可怕的想法：

```
var e = GetEmployees(); 
```

因为很难判断 if`e`是`Employee`对象，还是 List、数组等。

当它为您节省一些精力而又不降低可读性时，使用它也可能是正确的：

```
ReallyLongClassName someidentifier = new ReallyLongClassName(); 
```

VS

```
var explanatoryIdentifier = new ReallyLongClassName(); 
```

但最后，这归结为个人喜好，如果您破坏可读性，**请不要为您保存一些字符。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:47:00.530

这只是一个很好的练习使用`List<string> strList = new List<string>();`（显式输入）。它使代码更具*可读性*，但它们是等价的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T20:50:55.000

为什么 var 很好的论点是它消除了声明类型的重复。这意味着如果您想修改 strList（这是一个坏名字）的类型，您可以在一个地方进行。

# wpf - EventTrigger 未触发 UserControl 的 Loaded 事件

> ID：15486594
> 
> 赞同：11
> 
> 时间：2013-03-18T20:45:28.097
> 
> 标签：wpf, mvvm

我有一个带有以下事件触发器的 UserControl：

```
<UserControl x:Class="TestApp.Views.MyUserControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
         >

<i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
        <i:InvokeCommandAction Command="{Binding OnLoadedCommand}" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

它是通过 UserControl 的构造函数设置的（请忽略 ServiceLocator ..这只是一个快速原型）：

```
public MyUserControl()
{
    InitializeComponent();

    DataContext = ServiceLocator.Current.GetInstance<DirectorySearchViewModel>();
} 
```

在我的视图模型中，我有以下内容：

```
 public ICommand OnLoadedCommand { get; private set; }

    public MyUserControl()
    {
        OnLoadedCommand = new DelegateCommand(OnLoaded);
    }

    public void OnLoaded()
    {
    } 
```

OnLoaded 永远不会被调用。如果我将 EventName 更改为 ..MouseDown，那么它可以工作，但它不适用于 Loaded

很确定这是一个愚蠢的错误（发誓我过去已经做过一百万次了）但现在似乎无法弄清楚

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T21:03:27.230

```
public MyUserControl()
{
    DataContext = ServiceLocator.Current.GetInstance<DirectorySearchViewModel>();
    InitializeComponent();
} 
```

贵族。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-20T10:39:03.950

对于偶然发现此问题的其他任何人，您可以在没有这样的代码的情况下做到这一点：

```
<UserControl x:Class="TestApp.Views.MyUserControl"
    ... etc...
     x:Name="theControl"
     >

    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction
                Command="{Binding ElementName=theControl, Path=OnLoadedCommand}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers> 
```

# c# - 没有 ScatterItem 的多点触控拖放

> ID：15486595
> 
> 赞同：1
> 
> 时间：2013-03-18T20:45:29.050
> 
> 标签：c#, wpf, drag-and-drop, pixelsense

除了使用 SurfaceDragDrop 之外，还有其他方法可以在 WPF 中进行多点触控拖放操作吗？我目前正在使用它作为参考：http: [//msdn.microsoft.com/en-us/library/ee957380.aspx](http://msdn.microsoft.com/en-us/library/ee957380.aspx)

SurfaceDragDrop 的问题：

1.  它将所有内容转换为分散项，在我的应用程序上下文中看起来有些奇怪
2.  拖动项目的宽度和高度似乎取决于它被拖动的位置 - 我只能从一个相当小的区域拖动它，但我需要更大的预览。将源指定为更大的东西（即父元素）会导致元素太大或（/和）不在接触点下的元素

# c++ - Allegro5 中的 masked_blit 错误

> ID：15486596
> 
> 赞同：0
> 
> 时间：2013-03-18T20:45:35.467
> 
> 标签：c++, allegro, allegro5

我`masked_blit()`在我的程序中使用透明显示 .bmp（使用完美的粉红色）。但是当我构建时，它说：

> 错误：未在此范围内声明“masked_blit”

我包括了 Allegro 的 .h，当然我没有忘记所有这些：

```
-lallegro -lallegro_font -lallegro_ttf -lallegro_image 
```

这是我编写的代码的摘录：

```
#include <allegro5/allegro.h>
#include <allegro5/allegro_image.h>
[...]
 head = al_load_bitmap("head.bmp");
 masked_blit(head, display, 0,0,0,0,10,10);
 al_clear_to_color(al_map_rgb(0,0,0));
 al_draw_bitmap(head, screen_w / 2, screen_h / 2, 0);
[..] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:09:56.863

`masked_blit`是 Allegro 4 函数。它在 Allegro 5 中不存在。

[这是 Allegro 5 中的图形功能](http://alleg.sourceforge.net/a5docs/5.0.9/graphics.html)

`al_draw_bitmap_region`是与 最相似的函数`masked_blit`，但透明度规则不同（8 位 alpha 通道与 1 位粉红色作为 alpha）。

`al_convert_mask_to_alpha(ALLEGRO_BITMAP *bitmap, ALLEGRO_COLOR mask_color)`可能在这里有用。

# c# - 从 C# 连接到 .accdb。“无法识别的数据库格式”错误

> ID：15486600
> 
> 赞同：1
> 
> 时间：2013-03-18T20:45:57.393
> 
> 标签：c#, ms-access

我正在为一个客户端编写一个简短的实用程序，它将在访问数据库上运行一系列查询，并将结果数据表保存到一个 excel 文件中。我无法建立与访问文件的初始连接。

访问查询的设置如下： 我正在连接的文件（我们称之为 Access1）存储了我需要运行的查询。查询的表位于单独的访问文件 (Access2) 中。当我尝试打开连接时，程序会抛出异常。

这是我的连接方法

```
 private static OleDbConnection GetConnection()
    {
        var connection = new OleDbConnection
        {
            ConnectionString = String.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Persist Security Info=False", accessFilename)
        };

        connection.Open();

        return connection;
    } 
```

我遵循了其他一些答案的建议（特别是[这里](https://stackoverflow.com/questions/2373355/connecting-to-accdb-format-ms-access-database-through-oledb)），但仍然收到错误消息。

我并不完全相信问题出在代码本身，因为我能够在我们办公室大约一半的计算机上成功运行该程序。这让我认为它是驱动程序或办公版本的问题。

我的机器（不会运行该程序）正在运行 Office 2010 64 位和 64 位 Windows 7。据我所知，这是该机器上安装的唯一版本的 windows/office。

我主管的机器（将运行它）运行着完全相同版本的 office 和 windows。此外，我不必在他的机器上安装任何额外的东西来运行程序。他的机器已经出现过几次了，并且可能在某个时候有早期版本的 Office 2007 或 32 位 2010。他记不清了。

它成功运行的其他 office/windows 版本是 -Windows 7 64 位 / Office 2007 32 位 -Windows XP / Office 2007 32 位。

要添加另一个皱纹，如果我将文件名更改为任何其他访问文件，连接会在我的机器上打开而不会出现问题。当我这样做时，查询都无法运行，因为它是一个完全不同的文件，但连接打开得很好。

由于我可以成功连接到除我需要的文件之外的任何其他访问文件，我需要更改一个访问文件中的某些设置以允许外部程序连接到它吗？我认为不会，因为其他计算机可以做到这一点。

或者是否有一些驱动程序或参考或任何我忽略并需要安装才能连接到 MS Access 的东西？如果是这样，我如何能够连接到其他 Access 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-31T18:11:47.243

将目标平台更改为“AnyCPU”后，它对我有用并且能够连接到 .accdb 数据库。我使用“x86”是为了让我在 64 位机器上调试期间更改代码。谢谢 DJ KRAZE！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-17T05:54:56.567

你可以试试

```
Provider=Microsoft.Jet.OLEDB.4.0 
```

或者

```
Provider=Microsoft.ACE.OLEDB.12.0 
```

根据访问文件。这对我有用

# arrays - 如何在 perl 中访问数组的数组？

> ID：15486604
> 
> 赞同：0
> 
> 时间：2013-03-18T20:46:08.443
> 
> 标签：arrays, perl, join, multidimensional-array, perl-data-structures

嗨，我有一个数组作为 myarray。我想创建一个列表作为 '1 2 3' 加入第一个子数组。我的字符串正在打印我想的内存位置而不是列表。任何帮助将不胜感激。

```
@myarray = [[1,2,3],[4,5,6],[7,8,9]];
for (my $i=0; $i < @myarray; $i++) {
my @firstarray = $myarray[$i];
my $mystring = join("", @firstarray);
print "My string ".$mystring . ". "\n";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:48:14.537

您应该使用该`Data::Dumper`模块，这样可以帮助您了解如何解析数据结构：

```
print Dumper \@myarray; # force passing array as ref
$VAR1 = [
          [
            [
              1,
              2,
              3
            ],
            [
              4,
              5,
              6
            ],
            [
              7,
              8,
              9
            ]
          ]
        ]; 
```

但是使用`@` [sigil](http://en.wikipedia.org/wiki/Sigil_%28computer_programming%29) (array) 来存储*ARRAY ref*很奇怪，`$`大多数时候使用 sigil (scalar) 来达到这个目的。（*引用*就像一个`C`指针：一个内存单元的地址。所以它是一个简单的字符串，除了标量之外不需要其他东西来存储它）

然后，您需要*取消*对`->`操作员的引用。

前任 ：

```
$ perlconsole
Perl Console 0.4

Perl> my $arrayref = [[1,2,3],[4,5,6],[7,8,9]];

Perl> print join "\n", @{ $arrayref->[2] }
7
8
9 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T20:52:06.480

您必须取消对内部数组引用的引用`@{ ... }`。此外，不要`[...]`用于顶部结构 - 使用普通括号（方括号创建数组引用，而不是数组）。您的线路上的连接也存在问题`print`：

```
@myarray = ( [1,2,3], [4,5,6], [7,8,9] );
for (my $i=0; $i < @myarray; $i++) {
    my @firstarray = @{ $myarray[$i] };
    my $mystring = join("", @firstarray);
    print "My string " . $mystring . ".\n";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T20:52:18.703

你实际上有一个数组数组。

*   外部数组有一个元素，即对数组的引用。
    `$myarray[0]`
*   该引用数组具有三个元素，每个元素都是对数组的引用。
    `$myarray[0][0..2]`
*   每个引用的数组都有三个元素，三个数字。
    `$myarray[0][0..2][0..2]`

你要

```
my @aoa = ([1,2,3],[4,5,6],[7,8,9]);
   ^       ^       ^       ^
   |        \------+------/
   |            3 inner
1 outer

$aoa[$i][$j]

for my $inner (@aoa) {
   print(join(', ', @$inner), "\n");
} 
```

或者

```
my $aoa = [[1,2,3],[4,5,6],[7,8,9]];
          ^^       ^       ^
          | \------+------/
          |      3 inner
       1 outer

$aoa->[$i][$j]

for my $inner (@$aoa) {
   print(join(', ', @$inner), "\n");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T21:07:26.500

您需要更改初始化数组的方式，以便`()`用于外部数组边界和`[]`内部数组，这意味着它们被声明为引用，稍后需要转换为它们的本机数组格式以进行处理 ( `my @subarray = @{$myarray[$i]};`)

```
my @myarray = ([1,2,3], [4,5,6], [7,8,9]);

for (my $i=0; $i < @myarray; $i++) 
{
    my @subarray = @{$myarray[$i]};
    my $subarrayStr = join("", @subarray);
    print $i.". Subarray Str = ".$subarrayStr."\n";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T21:04:52.400

```
$myarray = [[1,2,3],[4,5,6],[7,8,9]];
printf "My string %s\n", join(" ", @{$myarray->[0]}); 
```

`[[1,2,3],[4,5,6],[7,8,9]]`返回对列表列表的引用，而不是列表。

将 into 更改`@`为`$`, 以`$myarray`生成变量。

`@{$myarray->[0]}`将取消引用第一个子列表并返回您可以使用的列表。

要打印所有三个列表：

```
$myarray = [[1,2,3],[4,5,6],[7,8,9]];
map{printf "My string %s\n", join(" ",@{$_})} @{$myarray}; 
```

# javascript - Javascript在对象内组合变量

> ID：15486606
> 
> 赞同：1
> 
> 时间：2013-03-18T20:46:14.320
> 
> 标签：javascript

好的，这看起来很简单，但我无法让它工作。我需要在一个对象中组合变量。像这样的东西：

```
var i = {
    a: 1,
    b: " sheep",
    c: this.a + this.b
} 
```

这样以后我可以做类似的事情：

```
i.a = 3;
console.log(i.c); 
```

并获得“3只羊”。

这只是愚蠢吗？或者最接近它的东西是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T20:47:28.887

使用一个函数。

```
var i = {
    a: 1,
    b: " sheep",
    c: function () {
        return this.a + this.b;
    }
}

i.a = 3;
console.log(i.c()); 
```

> 这看起来像它，但无论如何要避免函数调用（）。我见过 get 和 set 在对象中使用。这是被广泛使用的东西吗？

当然，您可以使用 getter，[但它们在 IE <9 中不起作用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/get#Browser_compatibility)（而上面的代码可以），并且由于它依赖于全新的语言语法，因此无法对其进行填充。

```
var i = {
    a: 1,
    b: " sheep",
    get c() {
        return this.a + this.b;
    }
}

i.a = 3;
console.log(i.c); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T20:47:33.013

仅当您这样做时，才有可能在*对象文字中：*

```
var i = {
    a: 1,
    b: " sheep",
    c: function() { return this.a + this.b; }
};

console.log( i.c() ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T20:47:36.657

```
var i = {
    a: 1,
    b: " sheep",
    c: function () { return this.a + this.b }
}

i.a = 3;
console.log(i.c()); 
```

# html - 从 HTML 中获取特定参数

> ID：15486608
> 
> 赞同：0
> 
> 时间：2013-03-18T20:46:18.680
> 
> 标签：html, vb.net

我想检查我的在线钱包是否有来自这个网站 [instawallet.org](http://instawallet.org)的新交易。
如何获取放置 0 BTC 的值并将其设置为变量？

这是我的代码不起作用：

```
 Dim WebClient As New WebClient()
    Dim Btc As String = WebClient.DownloadString(Mywallet-generate one of your own by going to instawallet.org)
    Btc = Split(Btc, "<span class='digits' title='")(1).Split("</span>")(0).Split(">")(1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:07:57.187

您需要查找以下标签

```
<div id="balance"> 
```

这样做的原因是

```
<span> 
```

标签不包含 ID 属性，但包含在

```
<div id="balance"> 
```

标签。

尝试下载/查找/提取 id 为“balance”的 DIV 标签，它将包含带有实际余额的 span 标签。

# coldfusion - 如何在维护元数据的同时使用 ColdFusion 将 JPEG、PNG 等图像转换为 WebP？

> ID：15486609
> 
> 赞同：4
> 
> 时间：2013-03-18T20:46:21.743
> 
> 标签：coldfusion, webp

我正在寻找一种将许多图像自动转换为 WebP 图像格式的有效方法。我对保留元数据或允许我添加或编辑元数据的方法特别感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T23:23:55.307

最简单的方法是`<cfexecute>`使用`cwebp` [https://developers.google.com/speed/webp/docs/precompiled](https://developers.google.com/speed/webp/docs/precompiled)

至于元数据...

> WebP 格式确实支持 EXIF/XMP 元数据。下一个版本的 WebP 库 (libwebp) 将具有支持处理 EXIF/XMP 元数据的适当 API，以及支持将 JPEG/PNG 转换为 WebP 格式的实用程序二进制文件，保留原始文件中的元数据。

引自 WebP Google Group。同时，关注第 52 期以获得最新更新？[https://code.google.com/p/webp/issues/detail?id=52](https://code.google.com/p/webp/issues/detail?id=52)

# matlab - 如何在MATLAB中的所有特殊字符之前添加\？

> ID：15486611
> 
> 赞同：3
> 
> 时间：2013-03-18T20:46:51.067
> 
> 标签：matlab

我正在尝试在 MATLAB 中的字符串中的所有特殊字符之前添加“\”，有人可以帮帮我吗？这是示例：

```
tStr = 'Hi, I'm a Big (Not So Big) MATLAB addict; Since my school days!'; 
```

我希望将此字符串更改为：

```
'Hi\, I\'m a Big \(Not so Big \) MATLAB addict\; Since my school days\!' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T21:06:54.737

Matlab 中的转义字符是单引号 (')，而不是 C 语言中的反斜杠 (\)。因此，您的字符串必须是这样的：

```
tStr = 'Hi\, I\''m a Big (Not so Big ) MATLAB addict\; Since my school days!' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T21:25:18.950

我使用了 Mathworks 网页上定义的特殊字符列表来执行此操作：

```
special = '[]{}()=''.().....,;:%%{%}!@';

tStr = 'Hi, I''m a Big (Not So Big) MATLAB addict; Since my school days!';

outStr = '';
for l = tStr
    if (length(find(special == l)) > 0)
        outStr = [outStr, '\', l];
    else
        outStr = [outStr, l];
    end
end 
```

这将自动添加那些\s。您确实需要使用两个单引号 ('') 代替输入字符串中的撇号。如果 tStr 是通过函数 input() 或类似函数获得的，那么这个过程仍然有效。

编辑：

或者使用正则表达式：

```
regexprep(tStr,'([[\]{}()=''.(),;:%%{%}!@])','\\$1') 
```

# r - 2参数函数的优化

> ID：15486612
> 
> 赞同：4
> 
> 时间：2013-03-18T20:46:53.230
> 
> 标签：r, optimization

我的问题可能很常见，但我不知道如何调整这个问题的答案

我有一个带有两个参数（a，b）的函数 F，我必须找到这个函数的最大值。

现在，我这样做：

```
optimization_of_F<-function(a,b){
  solution=c(0,0,0) #initialization 
  a=seq(0, 5, by=0.1)
  b=seq(0.1, 5, by =0.1)

  for (d in a){ 
    for (k  in b){ 
      if  ( F(d, k) > solution[1] )  {
        solution[1]= F(d,k)
        solution[2]= d
        solution[3]= k
      }  
    }     
  }
  return(solution)
} 
```

但是这种方式太长了，我想优化一下。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T23:18:29.710

Try this, where `F` is your function, `c(0,0)` an initial guess, `c=2` and `d=pi/3` are fixed parameters fed to `F`,

```
optim(c(0,0), F, c=2, d=pi/3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:55:09.620

我觉得这会让你更接近你正在寻找的东西：

```
a=seq(0, 5, by=0.1)
b=seq(0.1, 5, by =0.1)
outer(a, b, FUN=F) 
```

# sql - 乘法表sql

> ID：15486617
> 
> 赞同：1
> 
> 时间：2013-03-18T20:47:25.683
> 
> 标签：sql, database, oracle

如何创建一个 SELECT 查询来输出[乘法表](http://i.stack.imgur.com/giBMZ.png) 而不使用连接或子查询之类的东西？可以使用一些新的支持表。

**更新：**

```
select 
x " ",
x*x1 "1", x*x2 "2", x*x3 "3", x*x4 "4", x*x5 "5", x*x6 "6", x*x7 "7", x*x8 "8", x*x9 "9",        x*x10 "10"
from num, res
where rownum < 11; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:50:52.947

```
SELECT 
    level AS C, 
    1*level AS R1, 
    2*level AS R2, 
    3*level AS R3, 
    4*level AS R4, 
    5*level AS R5, 
    6*level AS R6, 
    7*level AS R7, 
    8*level AS R8, 
    9*level AS R9, 
    10*level AS R10 
FROM dual CONNECT BY level < 11 
```

看？这里只有一个查询。并且不需要填充哑虚拟表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:00:50.727

```
select level*&n from dual connect by level<=10; 
```

在这里，您可以提供您想要的 mutiplicaion 表的任何数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:49:34.703

将值插入到单个表中，从表中选择两次，在两个表之间不提供连接，然后瞧一个笛卡尔积。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-20T23:52:54.730

```
CREATE TABLE Multiplctable(c1 int ,c2 int ,c3 int,c4 int,c5 int,c6 int,c7 int,c8 int,c9 int ,c10 int,c11 int,c12 int)

DECLARE @Loopcon  int;--LOOP CONTROLL
Set @Loopcon=1;

WHILE(@Loopcon<=12)
    BEGIN;

            INSERT INTO Multiplctable 
            VALUES(@Loopcon*1,@Loopcon*2,@Loopcon*3,@Loopcon*4,@Loopcon*5,@Loopcon*6,
            @Loopcon*7,@Loopcon*8,@Loopcon*9,@Loopcon*10,@Loopcon*11,@Loopcon*12);

            SET @Loopcon=@Loopcon+1;
  END;

  SELECT M.c1 [1],M.c2 [2],M.c3 [3],M.c4 [4],M.c5 [5],M.c6 [6],M.c7 [7],M.c8 [8],M.c9 [9],M.c10 [10],M.c11 [11],M.c12 [12]
  FROM Multiplctable M 
```

# air - 添加 SQLite 代码后出现“验证错误：错误 #1014：找不到类 flash.data::SQLConnection”

> ID：15486621
> 
> 赞同：0
> 
> 时间：2013-03-18T20:47:34.530
> 
> 标签：air, flashdevelop, flash-cs6

我正在使用 Flash Pro CS6 和 FlashDevelop 4.3.0 开发移动 AIR 应用程序。

将 SQLite 添加到我的应用程序并尝试使用 FlashDevelop 调试器后，FlashDevelop 在输出面板中显示此错误：

```
"VerifyError: Error #1014: Class flash.data::SQLConnection could not be found.". 
```

我想问题是我在这里混合了几个软件产品，但是在添加 SQLite 代码之前一切都很好。对于如何解决这个问题，有任何的建议吗？

# xpages - XPages servlet 无法访问其他类

> ID：15486624
> 
> 赞同：0
> 
> 时间：2013-03-18T20:47:43.963
> 
> 标签：xpages

我使用[中文开发人员作品文章中的本教程编写了一个 servlet](http://www.ibm.com/developerworks/cn/lotus/xpage-servlet/index.html)

这个 servlet 可以很好地用于 Helloworld 打印，但是如果编写一个类并尝试从 servlet doGet 访问它，我会得到错误 500。

我的 servlet 类和 ServletFactory 与上面我的参考链接中的相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:24:03.633

您自己的类也必须实现 IServletFactory 接口。您还必须在 Web-Inf/META_INF/services/com.ibm.xsp.adapter.servletFactory 文件中定义您的类名（带有整个包名）。

只需添加这样的一行：

com.myclasses.MyClass

# ruby-on-rails - Rails排序列表不使用模型列

> ID：15486626
> 
> 赞同：0
> 
> 时间：2013-03-18T20:47:53.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我认为有下表：

```
 <table class="table table-bordered">
  <tr>
  <th><h3>Department</h3></th>
  <th><h3>Average Rating</h3></th>
  </tr>
  <tr>
  <%@unique_dept.each do |prod| %>
  <td><p class="text-center"><h4><%= prod.dept.capitalize %></h4></p></td>
  <td><p class="text-center"><h4><%= RatingSet.avg_rating_by_dept(prod.dept) %></h4></p></td>
  </tr>
  <%end%>
  </table> 
```

我的控制器动作：

```
 def index
     @unique_dept = Product.find_by_sql("SELECT dept FROM products WHERE dept <> '' GROUP BY dept")
  end 
```

我的模型方法：

```
 def self.avg_rating_by_dept(dept)
    RatingSet.joins(:products).where("dept = ?","#{dept}").average(:product_rating).to_f.round(2)
  end 
```

我该如何排序`Department`，`Average Rating`因为它们与我的模型中的列没有关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:04:01.977

你可以做

```
@unique_dept = Product.find_by_sql("SELECT dept FROM products WHERE dept <> '' GROUP BY dept") 
@unique_dept = @unique_dept.sort_by{ |prod| prod.dept } 
```

对于评级做

```
RatingSet.joins(:products).where("dept = ?","#{dept}").average(:product_rating).to_f.round(2).order('products.product_rating') 
```

# html - 媒体查询不适用于一页html

> ID：15486628
> 
> 赞同：0
> 
> 时间：2013-03-18T20:47:55.537
> 
> 标签：html, responsive-design, media-queries

我只是想知道为什么我不能在这一页面中应用媒体查询，而其他页面可以......谁能告诉我为什么？

这是链接， [http://blackbox-webstudio.com/demo/isamare/album1.html](http://blackbox-webstudio.com/demo/isamare/album1.html)

我尝试为 768px 分辨率（ipad potrait 视图）创建媒体查询，它在其他页面上是成功的，但不是在这个页面上......

是因为 responsiveslide.js 吗？但我也在那个网页主页中使用了那个javascript并且查询正在工作..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:02:09.933

我可能错了，但是您的 query.css 没有包含在此页面的头部，但它包含在主页中。

# excel - Excel VBA 宏中的数组

> ID：15486630
> 
> 赞同：1
> 
> 时间：2013-03-18T20:47:59.157
> 
> 标签：excel, user-defined-functions, dynamic-arrays, vba

我有一个包含许多文件的文件夹，我需要从中：打开本周的文件，将它们存储在一个数组中，将它们传递给一个子，然后循环它们以获取摘要信息。

我可以从下面的代码中获取所需的日期文件。但是代码在将其存储在数组中并将其传递给数组时会引发错误。

```
Sub BatchProcessing()
    firstday = Date - Weekday(Date) + 2  'To get the 1st day of week
    lastday = Date - Weekday(Date) + 6   'To get the 5th day of week
    MyPath = "P:\Data\"                  'Path where my files were present       
    Dim Day
    Dim strArray(0 To 5) As String
     iCount=0
       For Day = firstday To lastday     'To loop through all 5 day files
          formatted_date = Format(Day, "yyyyMd")
          MyTemplate = "TestFile" & formatted_date & ".xlsx"   ' Set the template.
          Workbooks.Open MyPath & MyTemplate
          strArray(iCount) = ActiveWorkbook.Name   
          iCount = iCount+1    
       Next

    CreateStats(strArray)    'Calling a sub which will do the required calculation 
End Sub

Sub CreateStats(strArray As String)
 For Each element in strArray
    set OriginalWorkbook = strArray(i)
     'Do the processing'
 Next
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:55:32.803

你的`strArray`变量是类型`Single`。如果您希望该变量是字符串数组，则必须将其声明为：

`Dim strArray(0 to 5) As String`

编辑：

现在您已将代码更改为使用`strArray() As String`而不是`strArray As Single`，您应该更新您的`CreateStats`子过程以接受一个数组作为参数。它现在应该看起来像这样：

`Private Sub CreateStats(myArray() As String)`

正如你现在所拥有的，你的过程只接受一个字符串。它必须接受一个字符串数组。一旦你有了它，你就可以遍历每个字符串并进行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T20:58:16.177

通过命名您的数组`strArray`，您似乎将拥有一个字符串数组，实际上您尝试在其中存储工作簿名称。但是，您将数组声明为 Single，它是一种数值数据类型。根据您的`CreateStats(strArray)`sub 所做的事情，您可能需要将其从 Single 更改为 String，或者可能设置另一个数组来保存 Single，而这个数组来保存 String。

# javascript - HTML, JavaScript

> ID：15486640
> 
> 赞同：-2
> 
> 时间：2013-03-18T20:48:26.283
> 
> 标签：javascript, html

**需要帮助来理解源代码...**

前段时间我访问了网站[bseindia.com ，当我检查其编码时，我无法理解单击顶部水平对齐的按钮时执行的操作（关于 BSE、市场等）。](http://www.bseindia.com)锚点具有 href 属性，其值仅为“#”。我可以在我即将到来的项目中使用类似的东西，所以我会很感激一些帮助。

请告诉在锚标签href中使用空“#”，如果有任何其他语言，如服务器端等，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:51:22.350

这是一种常见的做法。实际上，这类链接更像是“按钮”。我的意思是，url 不会改变，但是会发生一些动作，基于 javascript 实现。

请阅读这篇文章，了解更多信息：[我应该为 JavaScript 链接使用哪个“href”值，“#”还是“javascript:void(0)”？](https://stackoverflow.com/q/134845/240324)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:50:04.567

> 请告诉锚标签中空“#”的使用

它是当前页面顶部的相对 URL。

如果单击链接时发生任何其他情况，那是因为涉及到客户端 JavaScript。

将 JS 绑定到页面顶部的链接是一种常见的做法，但很糟糕。它既不是 [Progressive](http://en.wikipedia.org/wiki/Progressive_enhancement)也不是[Unobtrusive](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:55:10.837

这`#`是为了保持链接的样式（我认为这就是它的用途，不确定）。由于 javascript 在链接上注册了事件处理程序，因此发生了一个操作，例如：

html:

```
<a href="#" id="test">test</a> 
```

javascript:

```
document.getElementById('test').onclick=function(){
    alert('you clicked it!');
} 
```

这是一个jsfiddle：http: [//jsfiddle.net/fZ2JQ/](http://jsfiddle.net/fZ2JQ/)

# mysql - 为大型查询优化 MySql 数据库

> ID：15486643
> 
> 赞同：1
> 
> 时间：2013-03-18T20:48:30.453
> 
> 标签：mysql, optimization, query-optimization, performance-testing

我正在建立一个大数据库。我的一张表有 30 万条记录，另一张有 500 万条记录。我目前有所有外键和名为“ph.trigger_on”的列索引。

我的问题是如何优化我的表/查询以获得更快的结果？我尝试使用此代码创建一个视图，然后从该视图中我可以获取对该视图进行查询时所需的所有信息。

查询仍然很慢，我很难理解 EXPLAIN 显示的结果。这是我当前的查询

```
EXPLAIN SELECT
ac.account_name AS accountName,
tm.name AS teamName,
cp.name AS campaignName,
cc.call_code_name AS callCode,
rc.result_code_name AS resultCode,
zn.name AS zoneName,
ind.name AS industry,
(su.first_name + su.middle_name + su.last_name) AS owner_name,
su.login_user AS ownerLoginUser,
(su1.first_name + su1.middle_name + su1.last_name) AS firstAttemptBy,
(su2.first_name + su2.middle_name + su2.last_name) AS lastAttemptBy,
(su3.first_name + su3.middle_name + su.last_name) AS modifiedBy,
ci.name AS clientName,
ph.trigger_on AS triggerOn,
ph.created_on AS createdOn,
ph.first_attempt_on AS firstAttemptOn,
ph.call_subject AS callSubject,
ph.status,
ph.last_attempt_on AS lastAttemptOn,
ph.total_attempts AS totalAttempts,
ph.call_direction AS callDirection,
ph.call_notes AS callNotes,
ph.call_duration AS callDuration,
ph.modified_on AS modifiedOn

FROM phone_calls AS ph
INNER JOIN accounts AS ac ON ph.account_id = ac.account_id
INNER JOIN clients AS ci ON ac.client_id = ci.client_id
INNER JOIN industries AS ind ON ac.industry_id = ind.industry_id
INNER JOIN call_codes AS cc ON ph.call_code_id = cc.call_code_id
INNER JOIN time_zones AS zn ON ph.time_zone_id = zn.time_zone_id
INNER JOIN users AS su ON ph.owner_id = su.user_id

LEFT  JOIN teams AS tm ON ph.team_id = tm.team_id
LEFT  JOIN result_codes AS rc ON ph.result_code_id = rc.result_code_id
LEFT  JOIN campaigns AS cp ON ph.campaign_id = cp.campaign_id
LEFT  JOIN users AS su1 ON ph.first_attempt_by = su1.user_id
LEFT  JOIN users AS su2 ON ph.last_attempt_by = su2.user_id
LEFT  JOIN users AS su3 ON ph.modified_by = su3.user_id
WHERE ph.trigger_on < now()
LIMIT 1000 
```

这是我目前的输出。

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  ci  ALL PRIMARY             1   
1   SIMPLE  zn  ALL PRIMARY             1   Using join buffer (Block Nested Loop)
1   SIMPLE  su  ALL PRIMARY             1   Using join buffer (Block Nested Loop)
1   SIMPLE  ac  ref PRIMARY,client_id,industry_id   client_id   4   rdi_cms.ci.client_id    95917   
1   SIMPLE  ind eq_ref  PRIMARY PRIMARY 4   rdi_cms.ac.industry_id  1   
1   SIMPLE  ph  ref owner_id,call_code_id,account_id,time_zone_id,trigger_on    account_id  4   rdi_cms.ac.account_id   11  Using where
1   SIMPLE  tm  ALL PRIMARY             1   Using where; Using join buffer (Block Nested Loop)
1   SIMPLE  rc  eq_ref  PRIMARY PRIMARY 4   rdi_cms.ph.result_code_id   1   
1   SIMPLE  cc  eq_ref  PRIMARY PRIMARY 4   rdi_cms.ph.call_code_id 1   
1   SIMPLE  cp  ALL PRIMARY             1   Using where; Using join buffer (Block Nested Loop)
1   SIMPLE  su1 ALL PRIMARY             1   Using where; Using join buffer (Block Nested Loop)
1   SIMPLE  su2 ALL PRIMARY             1   Using where; Using join buffer (Block Nested Loop)
1   SIMPLE  su3 ALL PRIMARY             1   Using where; Using join buffer (Block Nested Loop) 
```

我可以做些什么来改进我的表格或查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:02:22.307

如果您将联接推送到查询的 SELECT 部分中的子查询中，可能会有所不同，如下所示：

```
SELECT
ac.account_name AS accountName,
tm.name AS teamName,
cp.name AS campaignName,
cc.call_code_name AS callCode,
rc.result_code_name AS resultCode,
(SELECT zn.name FROM time_zones AS zn WHERE ph.time_zone_id = zn.time_zone_id) AS zoneName,
(SELECT ind.name FROM industries AS ind WHERE ac.industry_id = ind.industry_id) AS industry,
(SELECT su.first_name + su.middle_name + su.last_name users AS su WHERE ph.owner_id = su.user_id) AS owner_name,
su.login_user AS ownerLoginUser,
(su1.first_name + su1.middle_name + su1.last_name) AS firstAttemptBy,
(su2.first_name + su2.middle_name + su2.last_name) AS lastAttemptBy,
(su3.first_name + su3.middle_name + su.last_name) AS modifiedBy,
ci.name AS clientName,
ph.trigger_on AS triggerOn,
ph.created_on AS createdOn,
ph.first_attempt_on AS firstAttemptOn,
ph.call_subject AS callSubject,
ph.status,
ph.last_attempt_on AS lastAttemptOn,
ph.total_attempts AS totalAttempts,
ph.call_direction AS callDirection,
ph.call_notes AS callNotes,
ph.call_duration AS callDuration,
ph.modified_on AS modifiedOn

FROM phone_calls AS ph
INNER JOIN accounts AS ac ON ph.account_id = ac.account_id
INNER JOIN clients AS ci ON ac.client_id = ci.client_id
INNER JOIN call_codes AS cc ON ph.call_code_id = cc.call_code_id
INNER JOIN time_zones AS zn ON ph.time_zone_id = zn.time_zone_id

LEFT  JOIN teams AS tm ON ph.team_id = tm.team_id
LEFT  JOIN result_codes AS rc ON ph.result_code_id = rc.result_code_id
LEFT  JOIN campaigns AS cp ON ph.campaign_id = cp.campaign_id
LEFT  JOIN users AS su1 ON ph.first_attempt_by = su1.user_id
LEFT  JOIN users AS su2 ON ph.last_attempt_by = su2.user_id
LEFT  JOIN users AS su3 ON ph.modified_by = su3.user_id
WHERE ph.trigger_on < now()
LIMIT 1000 
```

在这里，我将 3 个连接推入您的 SELECT 部分。

# c# - 如何将 Ninject 与 WebApi 一起使用？

> ID：15486645
> 
> 赞同：2
> 
> 时间：2013-03-18T20:48:33.867
> 
> 标签：c#, asp.net-web-api, ninject

我需要在 Web APi 应用程序上使用 Ninject（我使用空的 Web api 模板创建它）。

我安装了以下 nuget 包：

```
Ninject.Web.WebApi

Ninject.MVC3 
```

这是我的`application_start`

```
protected void Application_Start()
    {

        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);

    } 
```

我的`Ninject.Web.Common`

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(rb.rpg.backend.App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(rb.rpg.backend.App_Start.NinjectWebCommon), "Stop")]

namespace rb.rpg.backend.App_Start
{
    using System;
    using System.Web;

using Microsoft.Web.Infrastructure.DynamicModuleHelper;

using Ninject;
using Ninject.Web.Common;
using Raven.Client;
using RemiDDD.Framework.Cqrs;    
using System.Web.Http.Dependencies;
using System.Web.Http;
using System.Collections.Generic;
using Ninject.Web.WebApi;

public static class NinjectWebCommon
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start()
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);
        //System.Web.Mvc.DependencyResolver.SetResolver(new LocalNinjectDependencyResolver(kernel));
        GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {

        kernel.Bind<IDocumentSession>()
          .ToMethod(ctx => WebApiApplication.DocumentStore.OpenSession())
          .InRequestScope();
        kernel.Bind<MessageProcessor>()
            .ToMethod(ctx =>
            {
                var MessageProcessor = new MessageProcessor(kernel);

                /*...*/
                return MessageProcessor;
            })
            .InSingletonScope();
    }
}
} 
```

当我重建应用程序时，第一次加载很好，我的控制器得到了我的`IDocumentSession`. 但是当我重新加载同一页面时，我得到了错误

> “类型 .. 没有默认构造函数”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-22T05:15:04.767

Here is how I set it up in my Web API projects:

Download regular Ninject from nuget.org

```
PM> Install-Package Ninject 
```

In your Web API project add new folder named Infrastructure in that folder create 2 files:

**NInjectDependencyScope.cs** with content:

```
public class NInjectDependencyScope : IDependencyScope
{
    private IResolutionRoot _resolutionRoot;

    public NInjectDependencyScope(IResolutionRoot resolutionRoot)
    {
        _resolutionRoot = resolutionRoot;
    }

    public void Dispose()
    {
        var disposable = _resolutionRoot as IDisposable;

        if (disposable != null)
            disposable.Dispose();

        _resolutionRoot = null;
    }

    public object GetService(Type serviceType)
    {
        return GetServices(serviceType).FirstOrDefault();
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        var request = _resolutionRoot.CreateRequest(serviceType, null, new IParameter[0], true, true);

        return _resolutionRoot.Resolve(request);
    }
} 
```

and **NInjectDependencyResolver.cs** with content:

```
public class NInjectDependencyResolver : NInjectDependencyScope, IDependencyResolver
{
    private IKernel _kernel;

    public NInjectDependencyResolver(IKernel kernel) : base(kernel)
    {
        _kernel = kernel;
    }

    public IDependencyScope BeginScope()
    {
        return new NInjectDependencyScope(_kernel.BeginBlock());
    }
} 
```

In **Global.asax** file in Application_Start() method add:

```
//Ninject dependency injection configuration
        var kernel = new StandardKernel();
        kernel.Bind<IXyzRepository>().To<EFXyzRepository>();

        GlobalConfiguration.Configuration.DependencyResolver = new NInjectDependencyResolver(kernel); 
```

so that your final **Global.asax** file will look like this:

```
public class XyzApiApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        GlobalConfiguration.Configure(WebApiConfig.Register);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);

        //Ninject dependency injection configuration
        var kernel = new StandardKernel();
        //Your dependency bindings
        kernel.Bind<IXyzRepository>().To<EFXyzRepository>();            

        GlobalConfiguration.Configuration.DependencyResolver = new NInjectDependencyResolver(kernel);
    }
} 
```

An that is it!

Here is the example of usage:

```
public class PersonController : ApiController
{
    private readonly IXyzRepository repository;

    public PersonController(IXyzRepository repo)
    {
        repository = repo;

    }
...
...
... 
```

I hope this helps.

# c# - 如何修复错误“‘256’的值对‘蓝色’无效，‘蓝色’应大于或等于 0 且小于或等于 255。”

> ID：15486653
> 
> 赞同：1
> 
> 时间：2013-03-18T20:49:08.400
> 
> 标签：c#

当表单加载时会发生这种情况，它会根据用户设置设置文本框的背景色。

这是我设置颜色的时候：

```
Main_Box.BackColor = Color.FromArgb(Properties.Settings.Default.TCP_BackgroundR, Properties.Settings.Default.TCP_BackgroundG, Properties.Settings.Default.TCP_BackgroundB); 
```

这是我保存颜色的时间：

```
byte
    gBackgroundR, gBackgroundG, gBackgroundB;

// Color dialog
gBackgroundR = CD_BG.Color.R;
gBackgroundG = CD_BG.Color.G;
gBackgroundB = CD_BG.Color.B;

Properties.Settings.Default.TCP_BackgroundR = gBackgroundR;
Properties.Settings.Default.TCP_BackgroundG = gBackgroundG;
Properties.Settings.Default.TCP_BackgroundB = gBackgroundB; 
```

--

当我写这篇文章时，我试图复制这个问题，但不能......它几乎就像第一次错误一样......但为了安全起见：我发布的代码是保存/加载的正确方法吗颜色并设置它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:54:56.743

您可能已经在属性文件中为您的颜色手写了一个值为 256 的值。一旦您从程序内部保存了设置（或更改了在文件中手写的内容），它就会用有效值覆盖它，这就是错误不再发生的原因。

至于原来的问题：有效范围是0-255，所以当你传入值256时，它会出错。配置文件中的无效数据是您需要在代码中查找和处理的内容。

```
//Method 1 fix by setting a default value.
try
{
    Main_Box.BackColor = Color.FromArgb(Properties.Settings.Default.TCP_BackgroundR, Properties.Settings.Default.TCP_BackgroundG, Properties.Settings.Default.TCP_BackgroundB);
}
catch (ArgumentException)
{
    //If a invalid color was read in from the config file use white instead
    Main_Box.BackColor = Color.White;
}

//Method 2 fix by clamping values.
int red = Math.Min(Math.Max(Properties.Settings.Default.TCP_BackgroundR, 0), 255);
int green = Math.Min(Math.Max(Properties.Settings.Default.TCP_BackgroundG, 0), 255);
int blue = Math.Min(Math.Max(Properties.Settings.Default.TCP_BackgroundB, 0), 255);
Main_Box.BackColor = Color.FromArgb(red, green, blue); 
```

此外，您的 Properties 文件使用字节来存储数字，但`FromArgb`在有限范围内采用 int。我建议匹配 FromArgb 接受的内容（一个 int）并在你的属性文件中使用它。

# java - 如何遍历多维数组的列[行]

> ID：15486657
> 
> 赞同：8
> 
> 时间：2013-03-18T20:49:16.700
> 
> 标签：java

我正在使用多维数组来存储特定销售人员（1 到 4 名销售人员）销售的产品总量（产品范围 1 到 5）。

T 将 salesPersons 排列在第 1 到第 4 行中，并将产品 ID 排列在第 1 到第 5 列中。

我唯一不能做的就是专门遍历行以获得每个产品的总数，即第 1 列：第 1 行到第 4 行的总和 = 总产品 1，第 2 列：第 1 到 4 行的总和 = 产品 2 总等。

查看测试 salesTest 应用程序代码，后跟 Sales 类：

```
/*
test application for sales class
*/
package salestest;

import SalesLibary.Sales;

public class SalesTest {

    public static void main(String[] args) {
        // pass monthly stats to 4r(salespesons) * c5(products 1 to 5) using initialization method
        int monthlySales [][]=  {{13, 23, 45, 67, 56},
                                {43, 65, 76, 89, 90},
                                {43, 45, 76, 98, 90},
                                {34, 56, 76, 43, 87}};
        //pass default values to constructor when creating object of class
        Sales companySales = new Sales("Monneys Inc.", monthlySales);
        companySales.displayMessage();
        companySales.displaySales();
        }//end main
    }//end SalesTest class

    //class Sales with associated methods 
/*
 Chapter 7: Practical Question 2
 */
package SalesLibary;

public class Sales {

//declare fields/members
private int salesTotals[][];
private String companyName;

//passs string and two dimensional array of sales stats to constructor from application object
public Sales(String name, int monthlySales[][]) {
    companyName = name;
    salesTotals = monthlySales;

}//end constructor

public void setCompanyName(String name) {
    companyName = name;

}

public String getCompanyName() {
    return companyName;
}

public void displaySales() {
    //table heading
    System.out.printf("The monthly sales stats for company %s are: ", companyName);
    System.out.println("                                                         ");//set columns headings
    //create column headings representing products sold 1 to 5 by looping thru each colmn of row(salsperson)
    System.out.print("            ");
    for (int product = 0; product < salesTotals[0].length; product++) {
        System.out.printf("Product %d  ", product + 1);
    }
    System.out.println("Total ");

    //create rows of table represnting salespersons 1 too 4, ten loop through array and print element
    for (int salesPerson = 0; salesPerson < salesTotals.length; salesPerson++) {
        System.out.printf("SalesPerson %2d", salesPerson + 1);

        //use nested for loop to output all results
        for (int total : salesTotals[salesPerson]) {
            System.out.printf("%10d", total);
        }
        //call method to get total for each sales person by passing
        //a row of products sold for each sales person to method
        double total = getTotal(salesTotals[salesPerson]);
        System.out.printf("%10.2f\n", total);

    }//end outer for
    System.out.println("Product Total: ");
    double productSum = getTotalProduct();
    System.out.printf("%10.2f", productSum);
    //enumerate through each column and get sum to represent product total

}//end method Display sales

//method to calculate total, argument is array of results
public double getTotal(int salesTotals[]) {
    int total = 0;
    //loop thru array passed
    for (int count : salesTotals) {
        total += count;
    }

    return total;
}// end get salesPerson tital

//display message
public void displayMessage() {
    System.out.printf("\nWlecome to %s monthly sales summaries!!!\n\n", getCompanyName());
}//end display message

//get total product sold
public double getTotalProduct() {
    int productTotal[];
    int totalProduct = 0;
    //loop through array passed
    for (int salesPerson = 0; salesPerson < salesTotals.length; salesPerson++) {
        //go through each column of row[row]
        productTotal = salesTotals[salesPerson];
        //loop thirugh product total and get sum
        for (int count : productTotal) {
            totalProduct += count;
        }

    }//end outer for loop   
    return totalProduct;
}// end get salesPerson total
}//end Sales class 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-18T20:53:44.110

`k`要遍历二维数组中的单行：

```
for (int j = 0; j < multiarray[k].length; j++)
    multiarray[k][j]; // do something 
```

并迭代`k`二维数组中的单个列：

```
for (int i = 0; i < multiarray.length; i++)
    multiarray[i][k]; // do something 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-30T12:32:07.263

假设您有一个二维数组

```
int[][] salesData={{13, 23, 45, 67, 56},
                                {43, 65, 76, 89, 90},
                                {43, 45, 76, 98, 90},
                                {34, 56, 76, 43, 87}}; 
```

所以它是一个 4*5 矩阵

int[0] 表示第一行，即 {13, 23, 45, 67, 56} 如果您需要单个单元格中的值，则需要为每个循环迭代 2

```
 for (int[] rowData: salesData){
                for(int cellData: rowData)
                {
System.out.printn("the indiviual data is" +cellData);
                }
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:11:12.020

首先，如果不需要，不要使用所有代码。您只需要声明，也许还需要一个 for 循环。

遍历列：

```
for(int i=0; i<monthlySales[salesPerson].length; i++) {
    monthlySales[i][salesPerson]; //do something with it!
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T20:11:40.777

明白了：）有点头疼试图可视化阵列但最终到达那里，为帮助欢呼

```
//loop thorugh each column to get total products sold
    for (int product = 0; product < salesTotals[0].length; product++) {
        int totalProduct = 0;
        for (int salePerson = 0; salePerson < salesTotals.length; salePerson++) {

            totalProduct += salesTotals[salePerson][product];

        }//end inner for
        System.out.printf("%10d", totalProduct);

    }//end outer for 
```

# c# - 是否有强制最小值、最大值和增量值的 C#/.NET 控件？

> ID：15486658
> 
> 赞同：0
> 
> 时间：2013-03-18T20:49:17.690
> 
> 标签：c#, combobox, increment, numericupdown, coercion

我正在编写一个仪器控制器，用户需要在其中输入特定仪器参数的值。一个这样的参数是`Number of Samples`。我需要根据指定的最小值、最大值和增量来限制用户输入：

```
Min: 32
Inc: 32
Max: 2097120 
```

因此，它可能的值是：

```
32, 64, 96, 128, 160, ..., 2097120 
```

我曾考虑过使用`ComboBox`，但是对于这么多项目，加载列表不仅会很慢，而且用户在如此大的列表中选择一个值也会令人沮丧。

我也考虑过使用`NumericUpDown`，但该`Increment`参数仅控制按下向上或向下箭头时应用的增量。控件的值不会强制为指定的增量。例如，如果我输入 38，它应该强制转换为最接近的可能值，即 32。如果我输入 58，它应该强制转换为 64。

是否有一个控件可以让我做我想做的事？或者我是否必须继承`NumericUpDown`并处理值更改事件以强制值？也许有一个特殊的`ComboBox`实现只加载列表的一部分并在用户滚动时继续加载其余部分，所以他们不必等待整个列表加载多长时间？

谢谢。

编辑：我将扩展 NumericUpDown 类以提供我想要的。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:56:35.327

正如@FelicePollano 建议的那样，轨迹栏听起来像是您想要的东西。您可以创建一个跟踪栏以跟上实际值但使其不可见，然后允许用户通过按钮（或您想要的任何其他内容）与其交互，这些按钮只需通过其小或大的增量属性来增加跟踪栏的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:52:48.697

您可以尝试使用[TrackBar 控件](http://msdn.microsoft.com/en-us/library/9z8yazex.aspx)。

您可以指定步长和范围。

但是您将有 64K 个单独的步骤。用户将无法准确选择。您可以有两个滑块，一个用于粗略控制，一个用于精细控制。

或者你可以让他们输入数字，然后除以 32，然后再乘以 32。

# .net - 使用嵌套验证对复杂模型进行单元测试

> ID：15486659
> 
> 赞同：4
> 
> 时间：2013-03-18T20:49:19.180
> 
> 标签：.net, mocking, tdd, fluentvalidation

我正在使用 fluentvalidation 进行模型验证。我有一个包含几个嵌套类或类集合的类，每个类都有自己的 IValidator。最初我正在做这样的事情来设置嵌套验证器：

```
RuleFor(foo => foo.Header).SetValidator(new FooHeaderValidator()); 
```

这很好用。

当我开始实现更多的嵌套验证器时，我开始意识到我的单元测试对于顶级验证是多么脆弱。基本上，对子验证器的任何更改都可能导致意外行为并导致测试失败。显然这是由于我直接实例化了子验证器。我现在通过构造函数注入来获取这种依赖关系。这让我可以模拟`FooHeaderValidator`.

我现在有测试失败，`null reference`异常来自流利验证的某个地方。我只能假设在某个地方有人要求我的模拟没有提供。这是来自 fluentvalidation 的堆栈跟踪：

```
 at FluentValidation.Validators.ChildValidatorAdaptor.Validate(PropertyValidatorContext context)
   at FluentValidation.Validators.DelegatingValidator.Validate(PropertyValidatorContext context)
   at FluentValidation.Internal.PropertyRule.InvokePropertyValidator(ValidationContext context, IPropertyValidator validator, String propertyName)
   at FluentValidation.Internal.PropertyRule.<Validate>d__8.MoveNext()
   at System.Linq.Enumerable.<SelectManyIterator>d__14`2.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList(IEnumerable`1 source)
   at FluentValidation.AbstractValidator`1.Validate(ValidationContext`1 context)
   at FluentValidation.AbstractValidator`1.Validate(T instance) 
```

有没有人遇到过这个并知道我错过了什么？我是不是因为嘲笑这些验证者而疯狂？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T22:11:47.033

所以这实际上很简单。答案是您需要为`Validate`接受`ValidationContext<T>`. 在 RhinoMocks 中，这看起来像：

```
public static IValidator<T> GetMockedNestedValidator<T>()
{
    var mockedValidator = MockRepository.GenerateMock<IValidator<T>>();
    abstractValidator.Stub(x => x.Validate(Arg<ValidationContext<T>>.Is.Anything)).Return(new ValidationResult());
    return mockedValidator;
} 
```

起订量非常相似：

```
public static Mock<IValidator<T>> GetMockedNestedValidator<T>()
{
    var mockedValidator = new Mock<IValidator<T>>();
    abstractValidator.Setup(x => x.Validate(Arg<ValidationContext<T>>.Is.Anything)).Returns(new ValidationResult());
    return mockedValidator;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T03:45:46.973

很好的回答内森。

这是我对具有五个属性的模型的完整实现和单元测试：

```
/// <summary>
/// Validator for the MyModel.
/// </summary>
public class Validator : AbstractValidator<MyModel>
{
    /// <summary>
    /// Validate the MyModel.
    /// </summary>
    public Validator(
        IValidator<PropertyAModel> propertyAValidator,
        IValidator<PropertyBModel> propertyBValidator,
        IValidator<PropertyCModel> propertyCValidator,
        IValidator<PropertyDModel> propertyDValidator,
        IValidator<PropertyEModel> propertyEValidator)
    {
        RuleFor(o => o.PropertyA).SetValidator(propertyAValidator);
        RuleFor(o => o.PropertyB).SetValidator(propertyBValidator);
        RuleFor(o => o.PropertyC).SetValidator(propertyCValidator);
        RuleFor(o => o.PropertyD).SetValidator(propertyDValidator);
        RuleFor(o => o.PropertyE).SetValidator(propertyEValidator);
    }
}

[TestFixture]
public class ValidatorTests : TestBase
{
    private Mock<IValidator<PropertyAModel>> _mockPropertyAValidator;
    private Mock<IValidator<PropertyBModel>> _mockPropertyBValidator;
    private Mock<IValidator<PropertyCModel>> _mockPropertyCValidator;
    private Mock<IValidator<PropertyDModel>> _mockPropertyDValidator;
    private Mock<IValidator<PropertyEModel>> _mockPropertyEValidator;
    private Validator _validator;

    /// <Summary>
    /// Setup the unit test.
    /// </Summary>
    [SetUp]
    public void SetUp()
    {
        _mockPropertyAValidator = GetMockNestedValidator<PropertyAModel>();
        _mockPropertyBValidator = GetMockNestedValidator<PropertyBModel>();
        _mockPropertyCValidator = GetMockNestedValidator<PropertyCModel>();
        _mockPropertyDValidator = GetMockNestedValidator<PropertyDModel>();
        _mockPropertyEValidator = GetMockNestedValidator<PropertyEModel>();

        _validator = new Validator(
             _mockPropertyAValidator.Object,
             _mockPropertyBValidator.Object,
             _mockPropertyCValidator.Object,
             _mockPropertyDValidator.Object,
             _mockPropertyEValidator.Object);
    }

    [Test]
    public void Verify_Is_Successful()
    {
        //
        // Arrange.
        //
        var model = new MyModel
        {
            PropertyA = new PropertyAModel(),
            PropertyB = new PropertyBModel(),
            PropertyC = new PropertyCModel(),
            PropertyD = new PropertyDModel(),
            PropertyE = new PropertyEModel()
        };

        //
        // Act.
        //
        _validator.Validate(model);

        //
        // Assert.
        //
        VerifyMockNestedValidator(_mockPropertyAValidator);
        VerifyMockNestedValidator(_mockPropertyBValidator);
        VerifyMockNestedValidator(_mockPropertyCValidator);
        VerifyMockNestedValidator(_mockPropertyDValidator);
        VerifyMockNestedValidator(_mockPropertyEValidator);
    }

    /// <summary>
    /// Get a mock validator for a nested model type.
    /// </summary>
    /// <typeparam name="T">The type of the nested model.</typeparam>
    /// <returns>The mock validator.</returns>
    public static Mock<IValidator<T>> GetMockNestedValidator<T>()
    {
        var mockValidator = new Mock<IValidator<T>>();
        mockValidator.Setup(x => x.Validate(It.IsAny<ValidationContext>())).Returns(new ValidationResult());
        return mockValidator;
    }

    /// <summary>
    /// Verify the mock validator for a nested model has called the Validate() method exactly once.
    /// </summary>
    /// <typeparam name="T">The type of the nested model.</typeparam>
    /// <param name="mockValidator">The mock validator to verify.</param>
    public static void VerifyMockNestedValidator<T>(Mock<IValidator<T>> mockValidator)
    {
        mockValidator.Verify(x => x.Validate(It.IsAny<ValidationContext>()), Times.Once());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-07T10:14:38.390

只是为那些使用异步验证有相同问题的人补充一下。我需要覆盖以下内容（使用 NSubstitute）

```
validator.ValidateAsync(Arg.Any<ValidationContext>(), Arg.Any<CancellationToken>()).Returns(Task.FromResult(new ValidationResult())); 
```

*注意：在我的情况下，我需要覆盖 NON-generic ValidationContext*

# android - Android Instrumentation 单元测试需要引用活动的适配器

> ID：15486669
> 
> 赞同：3
> 
> 时间：2013-03-18T20:49:39.320
> 
> 标签：android, unit-testing, testing, junit, instrumentation

我继承了一些我正在尝试清理的凌乱代码。我开始的第一件事是在模块上编写一些单元测试，我打算保留一段时间。不幸的是，其中之一是一个自定义适配器，它需要一个指向活动的指针（因为它调用了 getWindowManager() ）。当我开始尝试编写此测试代码时，我立即发现我的测试知识存在差距。如何将指向活动的指针传递给我正在测试的对象？

我可以发起一个专门的测试活动吗？我应该查看 ActivityUnitTestCase 而不是 AndroidTestCase 吗？所有这些似乎都是一个相对普遍的问题的混乱解决方案？有谁知道如何在 android 仪器测试中传递指向活动的指针，而该活动实际上是被测对象？

提前致谢！！

阿凡达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:47:50.860

似乎正确的方法是使用 AndroidUnitTestCase 并使用您正在测试的实际对象可以指向的虚拟活动。如果有人有更好的建议，请告诉我！

# c - 什么是强指针和弱指针

> ID：15486676
> 
> 赞同：33
> 
> 时间：2013-03-18T20:49:50.370
> 
> 标签：c, android-source, android-binder

我对“强指针”和“弱指针”的概念感到困惑。黛安哈克伯恩自己说：

> 当有强指针时，对象将保留在周围；一旦最后一个被释放，它就会被销毁。使用弱指针所能做的就是比较并尝试提升为强指针；如果对象上没有其他强指针，后者将失败。

这对我来说很不清楚。强指针是否等同于 ( `boost::`) 共享指针？如果弱指针只是为了尝试将自己提升为强指针，那么弱指针的作用是什么？比如，我们什么时候需要弱指针和强指针？

**更新：**

谢谢大家，但我是专门询问android的内核`sp`和`wp`，它们与Java的引用完全无关。

基本上我正在尝试破解这里的代码[http://www.androidenea.com/2010/03/share-memory-using-ashmem-and-binder-in.html](http://www.androidenea.com/2010/03/share-memory-using-ashmem-and-binder-in.html) 而且不太了解和的`sp`使用`wp`

**更新：**

实际答案在于接受答案的评论。感谢 Gabe Sechan：

> 强指针和弱指针是不同的智能指针实现并且做同样的事情——当指针超出范围时，只要至少有一个强指针引用它，它就不会被释放。如果只有弱指针（或什么都没有）引用它。每当对它的强或弱引用被描述时，就会进行检查。
> 
> 如果我有 10 个引用同一个对象的弱指针，而这 10 个中的一个超出范围，那么该对象会被销毁吗？而使用强指针，只有当它们全部超出范围时，对象才会被销毁？
> 
> 是的，差不多。如果您只有 10 个弱指针，那么当最后一个强指针超出范围时，它可能已经超出范围。如果有空闲内存，该实现可能允许它停留一段时间，但如果您进入低内存条件，它将被切断，并且听起来他们的实现不像她引用的那样先进。而这个的使用还是主要是缓存——大致相当于一个boost shared_ptr和boostweak_ptr。所以基本上，弱指针可以让它引用的对象随时消失。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-19T06:05:12.157

sp表示Android中的StrongPointer，如果引用计数等于0，则被指向的对象占用的内存将被释放。wp表示WeakPointer，所以如果我有弱指针，我不在乎引用的对象是否活着. 它可能用于某些缓存和比较场景。

首先，快速浏览一下[StrongPointer.h](https://android.googlesource.com/platform/frameworks/native/+/android-4.2.2_r1/include/utils/StrongPointer.h)中的 sp 实现。

它只是一个引用计数的包装器。例如，

```
template<typename T> template<typename U>
sp<T>& sp<T>::operator = (U* other)
{
    if (other) ((T*)other)->incStrong(this);
    if (m_ptr) m_ptr->decStrong(this);
    m_ptr = other;
    return *this;
} 
```

如果您通过创建强指针`sp<IBinder> strongPointer`，则 m_ptr 是被引用的对象。正如你在源代码中看到的，sp 模板只代表一个强指针，因此只要我持有这个sp，系统就不会释放内存。它不维护引用计数器。计数器在[RefBase](https://android.googlesource.com/platform/frameworks/native/+/android-4.2.2_r1/include/utils/RefBase.h)类中维护。为了使用 StrongPointer，你的 obj 需要是 RefBase 的一个实例。

RefBase 类同时维护了强引用计数器和弱引用计数器，唯一的区别是如果强计数为 0，被引用的对象将被释放。此外，对于 Refbase 管理的对象，它可能同时被一些强指针和弱指针引用。

可以看到StrongPointers在Android框架中的应用非常广泛，大部分都在IBinder对象上，一个原生的Binder对象可以通过不同的进程。不同的进程可以持有指向同一个对象的强指针，只要一个进程还持有该指针，系统就不会撤销该对象。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-18T20:52:27.187

Android 旨在使用 Java 而非 C 进行编程。Android 团队的任何文档都将引用该语言。在 Java 中，有强引用和弱引用。弱引用不会阻止垃圾收集器清理它，强引用会。它们用于在某些操作系统上进行缓存，但在 Android 3.0 中仅持有对对象的弱引用意味着它将立即被收集。

C 没有弱引用，因为它没有垃圾收集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T20:56:24.220

这是一篇很好的文章，讨论了 Java 中的常规引用（或“StrongReference”）、`SoftReference`s、`WeakReference`s 甚至`PhantomReference`s 之间的区别，请欣赏： [http ://weblogs.java.net/blog/2006/05/04/understanding-弱引用](http://weblogs.java.net/blog/2006/05/04/understanding-weak-references)

# textbox - Visual Basic，搜索框并在列表框中显示结果

> ID：15486677
> 
> 赞同：0
> 
> 时间：2013-03-18T20:49:56.513
> 
> 标签：textbox, listbox

所以我试图解决的问题要求如果用户在文本框中输入他们的用户名并按回车，那么目录中的文件将显示在列表框中。我需要它只在 C:\Users 目录上工作。我是 Visual Basic 新手，但不是编程新手，所以任何基本建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:57:03.200

你需要做这样的事情：

```
 Dim di As New IO.DirectoryInfo("c:\")
Dim diar1 As IO.FileInfo() = di.GetFiles()
Dim dra As IO.FileInfo 
```

'列出指定目录下所有文件的名称 For Each dra In diar1 ListBox1.Items.Add(dra) Next

你可以从这个网站阅读更多，[http://www.developerfusion.com/code/3681/list-files-in-a-directory/](http://www.developerfusion.com/code/3681/list-files-in-a-directory/)

# php - 如何在mysql的子查询中替换limit？

> ID：15486683
> 
> 赞同：0
> 
> 时间：2013-03-18T20:50:19.523
> 
> 标签：php, mysql

我有这个查询，我知道我在 mysql 的子查询中不能有限制子句，无论如何用正确的语法写这个？

更新：（场景）我想维护已删除的访问者，当我们要选择已删除的访问者时，我应该选择不同的 ips

```
$deletedvisitors = $wpdb->get_var("
       SELECT count(DISTINCT ip)
       FROM $table_name
       WHERE feed=''
       AND spider=''$normallimit AND id IN ( SELECT * FROM ". $table_name . " order by id limit $delneeded)"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:53:27.790

您可以根据[此 SO 答案创建一个子查询并加入它](https://stackoverflow.com/questions/2856397/mysql-subquery-limit)

```
SELECT count(DISTINCT ip)
FROM    (
    SELECT  *
    FROM ". $table_name . "
    LIMIT 10
    ) q
JOIN    $table_name
ON      q.id = $table_name.id 
```

# android - 在选项卡中加载不同的活动

> ID：15486686
> 
> 赞同：4
> 
> 时间：2013-03-18T20:50:36.107
> 
> 标签：android, tabs

搜索 stackoverflow 和 google 花了很长时间，但找不到正确向我解释如何在我的应用程序中实现选项卡的指南。

我知道它不应该使用 TabActivity，我还阅读了关于不使用 TabHost 的建议（至少是这样的理解）。我的兴趣不仅仅是更改内容，而是在更改选项卡时运行完整的活动。

### 例子

```
MainActivity:
   - Tab1Activity
   - Tab2Activity
   - Tab3Activity 
```

我的目标是构建一个从 api 8 到最新版本的各种设备都支持的应用程序。我正在使用`android-support-v4.jar`.

我的第二个目标是在每个选项卡中加载一个活动，因为其中至少有两个会消耗足够的资源，并且速度应该始终占上风。

可以帮助我指导或解释实现这一目标的“正确”方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T20:55:11.150

您应该使用带有片段的标签。

看这个：[http ://android.codeandmagic.org/2011/07/android-tabs-with-fragments/](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T21:17:48.940

正如另一个建议的那样，在应用程序中实现选项卡的最佳方式是使用片段。

您不应使用当前已弃用的 tabactivity 中包含的活动。甚至官方文档也[建议使用片段](http://developer.android.com/reference/android/app/TabActivity.html)，并指出

> 新应用程序应该使用 Fragments 而不是这个类

但是，如果您仍然觉得*复古，*并且您真的想使用包含选项卡的活动，则需要使用 tabhost。可以在[这里](http://www.androidpeople.com/android-tabhost-tutorial-part-1)找到一个不错的教程，但我再次强烈建议您使用片段方式。

# javascript - Websockets-NodeJS。是否可以在没有客户端消息的情况下向所有连接的客户端（从服务器）广播消息

> ID：15486687
> 
> 赞同：0
> 
> 时间：2013-03-18T20:50:48.477
> 
> 标签：javascript, node.js, websocket, broadcast

使用 NodeJS 和 websockets，我正在尝试实现一个在线游戏服务器，对于一个乘数游戏，我让人们四处走动，能够看到彼此，但是当服务器产生新的敌人时，我希望能够广播向所有连接的客户端发送消息。

但是没有客户端首先向服务器发送消息。

例如 - 游戏产生一个敌人，向所有客户端发送信息。

到目前为止我的代码：

```
/**************************************************
** NODE.JS REQUIREMENTS
**************************************************/

var util = require("util"),                 
// Utility resources (logging, object inspection, etc)

    io = require("socket.io"),              
// Socket.IO

    Player = require("./Player").Player,    // Player class
    Zombie = require("./Zombie").Zombie;

// Socket controller

var socket, 

// Array of connected players   

    players,

    zombies;

var level = 1,
    score = 0,
    levelling = false;

function init() {
    // Create an empty array to store players

    players = [];

    zombies = [];

    // Set up Socket.IO to listen on port 8000

    socket = io.listen(8000);

    // Configure Socket.IO

    socket.configure(function() {
        // Only use WebSockets

        socket.set("transports", ["websocket"]);

        // Restrict log output

        socket.set("log level", 2);
    });

    // Start listening for events

    setEventHandlers();
}; 
```

blah blah blah -- tl;dr -- 游戏循环：

```
function mainLoop(){

//Main loop for the server. Called 60 times a second. May be modified for game  
     speed.
//setTimeout(mainLoop, 1000/5000);

this.broadcast.emit("update"); 

    //THIS broadcast.emit line is where the error is being thrown. I need to know how   
    to broadcast here without the client initializing first.
}; 
```

我尝试了一些东西，socket.broadcast.emit("update");，但没有成功。

我曾尝试遍历当前已知的用户并使用“this.emit”，但我总是得到“无法调用未定义的方法发射”，太烦人了。

但是当我让客户端首先发送消息时，例如，当客户端移动时，它会向服务器发送一些信息，服务器会做出以下反应：

```
 function onSocketConnection(client) {
        util.log("New player has connected: " + client.id);

        // Listen for client disconnected

        client.on("disconnect", onClientDisconnect);

        // Listen for new player message

        client.on("new player", onNewPlayer);

        // Listen for move player message

        client.on("move player", onMovePlayer);

        //listen for deaths

        client.on("death", onPlayerDeath);

        //listen for not moved message, to stop sprite animation

        client.on("not moved", notMoved);
    };

    // Player has moved

    function onMovePlayer(data) {
        // Find player in array

        var movePlayer = playerById(this.id);

        // Player not found

        if (!movePlayer) {
            util.log("Player not found: "+this.id + " when asking if moved");
            return;
        };

        // Update player position
        movePlayer.setX(data.x);
        movePlayer.setY(data.y);
        movePlayer.setDir(data.dir);

        // Broadcast updated position to connected socket clients

        this.broadcast.emit("move player", {id: movePlayer.id, x:
            movePlayer.getX(), y:movePlayer.getY(), dir: movePlayer.getDir()});
    }; 
```

然后“this.broadcast.emit”没有问题。不抛出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:50:57.517

好的，我解决了这个烦恼。我将在同一条船上为其他任何人发布答案。我不得不删除该`socket`变量，并将`io` `require`调用更改`io = require("socket.io")`为：

```
io = require("socket.io").listen(8000) 
```

有了这个，我需要更改依赖于变量的所有相应变量`socket`，例如：

### 从

```
socket.sockets.on("connection", onSocketConnection); 
```

### 到

```
io.sockets.on("connection", onSocketConnection); 
```

然后广播就可以了，例如：`io.sockets.emit("updates")`

# r - 按名称 rbind 2 个不同长度的向量

> ID：15486693
> 
> 赞同：2
> 
> 时间：2013-03-18T20:50:59.703
> 
> 标签：r

我有 2 个不同长度的向量：

```
vec1 <- rnorm(18, mean = 0.0018, sd = 0.0001)
names(vec1) <- c("CSF", "D10", "D13", "D16", "D18", "D1", "D21", "D22", "D3", "D5", "D7", "D8", "FGA", "PD", "PE", "TH", "TP", "vWA")

vec2 <- rnorm(20, mean = 0.0022, sd = 0.0002)
names(vec2) <-  c("CSF", "D10", "D12", "D13", "D16", "D18", "D19", "D1", "D21", "D22", "D2", "D2S", "D3", "D5", "D7", "D8", "FGA", "TH", "TP", "vWA") 
```

我需要用它们的名字来绑定这些向量。当一个向量中的名称在另一个向量中不存在时，应该产生一个 NA。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T20:58:50.147

`data.frames`我发现它比向量更容易处理。我会做这样的事情：

```
merge(stack(vec1), stack(vec2), by="ind", all=TRUE)

#    ind    values.x    values.y
# 1  CSF 0.001904712 0.001969627
# 2   D1 0.001794500 0.002450328
# 3  D10 0.001761172 0.002144368
# 4  D13 0.001792968 0.002037505
# 5  D16 0.001715555 0.002240566
# 6  D18 0.001770989 0.002459609
# 7  D21 0.001697098 0.002292614
# 8  D22 0.001673249 0.002057277
# 9   D3 0.001824599 0.002025163
# 10  D5 0.001762133 0.002066801
# 11  D7 0.001938889 0.002218919
# 12  D8 0.001804742 0.001930666
# 13 FGA 0.001723325 0.002153777
# 14  PD 0.001864792          NA
# 15  PE 0.001581331          NA
# 16  TH 0.001803464 0.002136557
# 17  TP 0.001737948 0.002294142
# 18 vWA 0.001681773 0.002168390
# 19 D12          NA 0.001907538
# 20 D19          NA 0.002243354
# 21  D2          NA 0.002040115
# 22 D2S          NA 0.002230522 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T21:01:14.940

试试这个，更好用`data.frame`

```
df1 = data.frame(v=vec1,n=names(vec1))
df2 = data.frame(v=vec2,n=names(vec2))
df = merge(df1,df2,by="n",all=TRUE)
> head(df)
    n         v.x         v.y
1 CSF 0.001772553 0.001985266
2  D1 0.001818434 0.001974980
3 D10 0.001658625 0.002339643
4 D13 0.001877724 0.002099361
5 D16 0.001738895 0.002249619
6 D18 0.001691192 0.002274924 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:07:54.903

您可以使用 plyr 中的 rbind.fill

```
library(plyr)
# convert to a list of lists
ll <- lapply(list(vec1, vec2), function(x){as.data.frame(as.list(x))})
bigdf <- rbind.fill(ll) 
```

# jquery - 使用jQuery检查输入是否为空？

> ID：15486694
> 
> 赞同：-1
> 
> 时间：2013-03-18T20:51:07.580
> 
> 标签：jquery, html

我正在创建一个带有验证的简单表单，并希望任何空输入或 textarea 添加一个类，但我不知道如何检查空输入。

目前，它添加到所有输入；我只想要**空**的输入/文本区域。任何人都可以帮忙吗？

HTML：

```
<form id="contactform">
    <input type="text" id="name" placeholder="name" autofocus >
    <input placeholder="email" >
    <textarea placeholder="message" ></textarea>
    <input type="submit">
    </input>
</form> 
```

jQuery：

```
$(function () {
    $("#contactform").submit(function () {
        if($("input, textarea").val() === ""){
        $("input").addClass("error");   
        return false;
        }
        $("input").removeClass("error");
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:01:21.467

试试这个：

```
 $("#contactform").submit(function (e) {
     e.preventDefault();
     $(":input").not("[type=submit]").removeClass('error').each(function () {
         if ($.trim($(this).val()).length == 0) $(this).addClass('error');
     });
 }); 
```

**[jFiddle 示例](http://jsfiddle.net/j08691/L9qkZ/)**

（注意 preventDefault 在那里，所以表单不会提交，你可以看到它工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:52:58.667

`.val()`不返回数字，它返回一个字符串。所以`$("input, textarea").val() == 0`改为`$("input, textarea").val() === ""`

**编辑**

根据评论，然后在您对空字段的测试中更加全面

```
$("input, textarea").each(function(){
    var self = $(this),
        thisVal = self.val();
    if($.trim(thisVal) === "" || thisVal.length === 0)
    {
        self.addClass("error");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:54:34.217

如果您以后真的想提交表格（采用接受的答案）。试试这个：

```
$("#submit_form").click(function () {
$submit = "yes";
$(":input").not("[type=button]").removeClass('error').each(function () {
    if ($.trim($(this).val()).length == 0) {
        $(this).addClass('error');
        $submit = "no";
    }
});
if ($submit == "yes") {
    $("#contactform").submit();
}
}); 
```

这将遍历每一个并验证它是否有内容，如果没有，它将不允许您提交表单。否则表单将提交。我还将您的提交按钮更改为一个按钮。它来自：

```
 <input type="submit"> 
```

使用按钮提交：

```
 <input type="button" id="submit_form" value="Submit" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-27T15:41:47.513

为了避免对必填字段进行自定义验证，请使用[https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.js](https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.js)。在刀片中添加这个库（在 javascript 部分的开头）。使用这个库，如果未填写必填字段，提交表单上会出现一个弹出窗口。验证将适用于所有“必需”数据类型。供参考：[https](https://jqueryvalidation.org/) ://jqueryvalidation.org/ 。这种方法对我有用。

# c++ - C++ ostream 和 ofstream 转换

> ID：15486695
> 
> 赞同：12
> 
> 时间：2013-03-18T20:51:13.440
> 
> 标签：c++, ofstream

我的代码有一个`ostream`对象，由各个模块累积并最终显示到控制台。我还想将此`ostream`对象写入文件，但我是否必须改用`ofstream`对象重写所有代码，或者有没有办法将一个对象转换为另一个（也许通过一个`stringstream`？）

例如，我现有的许多功能看起来像

```
ostream& ClassObject::output(ostream& os) const
{
    os << "Details";
    return os;
} 
```

我可以使用`ofstream`对象作为参数调用此函数并让该`ofstream`对象累积信息吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T20:57:16.810

是的你可以。这就是 OO 概念中称为[subtype polymorphism](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29#Subtype_polymorphism_.28or_inclusion_polymorphism.29)的要点。由于`ofstream`派生自`ostream`，每个实例`ofstream`同时也是 的实例`ostream`（概念上）。因此，您可以在任何需要实例的地方使用它`ostream`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-30T04:44:02.763

**ofstream 派生自 ostream 所以**

只需在**main.cpp中添加一些代码**

```
#include "ClassObject"
#include <fstream>
#include <iostream>

using namespace std;

int main()
{
     ClassObject ob;
     cout << ob; // print info to console window

     // save info to .txt file
     ofstream fileout;
     fileout.open("filename.txt", ios::app);
     fileout << ob;
     fileout.close();

     return 0;
} 
```

# javascript - 带有 parse.com 的 javascript/jquery/rest api

> ID：15486707
> 
> 赞同：0
> 
> 时间：2013-03-18T20:51:46.520
> 
> 标签：javascript, jquery, api, rest, parse-platform

我正在使用 javascript 和 jquery 使用他们的 rest api 通过 parse.com 发送一个简单的文本推送通知。这有效： -

```
$.ajax({
    type: 'POST',
    headers: {
        'X-Parse-Application-Id': "1234567890",
        'X-Parse-REST-API-Key': "1234567890"
    },
    url: "https://api.parse.com/1/push",
    data: '{"channel": "","type":"ios","expiration_interval":86400,"data":{"alert":"canned alert","badge" :0,"sound":""}}',
    contentType: "application/json"
}); 
```

但这不是：-

```
 var my_msg = "canned alert";
 $.ajax({
     type: 'POST',
     headers: {
         'X-Parse-Application-Id': "1234567890",
         'X-Parse-REST-API-Key': "1234567890"
     },
     url: "https://api.parse.com/1/push",
     data: '{"channel": "","type":"ios","expiration_interval":86400,"data":{"alert":my_msg,"badge" :0,"sound":""}}',
     contentType: "application/json"
 }); 
```

我找不到用变量而不是“罐头警报”替换成功发送警报的方法。我不是经验丰富的程序员，但即使是 parse.com 的 tesch 支持也无法解释原因；任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:55:46.387

从第二个片段中的单引号中取出 my_msg 变量，它的行为应该与第一个完全相同：

```
data: '{"channel": "","type":"ios","expiration_interval":86400,"data":{"alert":'+my_msg+',"badge" :0,"sound":""}}', 
```

您编写第二个片段的方式看起来像是将 JSON 字符串与对象文字混淆了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:56:28.217

您可以使用`JSON.stringify`从普通对象构建 JSON：

```
var my_msg = "canned alert";
$.ajax({
  type: 'POST',
  headers: {'X-Parse-Application-Id':"1234567890",'X-Parse-REST-API-Key':"1234567890"},
  url: "https://api.parse.com/1/push",
  data: JSON.stringify({
    "channel": "",
    "type":"ios",
    "expiration_interval": 86400,
    "data":{
      "alert": my_msg,
      "badge" :0,
      "sound":""
    }
  }),
  contentType: "application/json"
}); 
```

使用`JSON.stringify`将确保“my_msg”中的任何特殊字符都将被正确转义，从而保证您的 JSON 有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:58:43.860

您可以将数据作为对象传递，不需要任何引号，jQuery 会处理它：

```
var my_msg = "canned alert";
$.ajax({
    type: 'POST',
    headers: {
        'X-Parse-Application-Id': "1234567890",
            'X-Parse-REST-API-Key': "1234567890"
    },
    url: "https://api.parse.com/1/push",
    data: {
        channel: "",
        type: "ios",
        expiration_interval: 86400,
        data: {
            alert: my_msg,
            badge: 0,
            sound: ""
        }
    },
    contentType: "application/json"
}); 
```

# python - Python 对象实例化

> ID：15486711
> 
> 赞同：2
> 
> 时间：2013-03-18T20:52:02.617
> 
> 标签：python, object, instantiation

我对 python 很陌生，需要一些帮助来实例化一个对象。在实例化我定义的类的对象时，python 解释器给我带来了麻烦。有两个类，`BTNode`和`BST`（分别存储在文件`bst_node.py`中`bst.py`）：

```
# file: bst_node.py

class BTNode:

    """a binary search tree node implementation"""

    def ___init___(self, value):
        self.value = value
        self.left is None
        self.right is None
        self.parent is None

    def ___init___(self, value, left, right, parent):
        """set the parameters to corresponding class members"""
        self.value = value
        self.left = left
        self.right = right
        self.parent = parent

    def is_leaf(self):
        """check whether this node is a leaf"""
        if self.left.value is None and self.right.value is None:
            return True 
        return False 
```

* * *

```
# file: bst.py

from bst_node import *

class BST:

    """a binary search tree implementation"""
    def ___init___(self, value):
        self.root = BTNode(value)

    def insert(self, curRoot, newValue):
        if curRoot.is_leaf():
            if newValue < curRoot.value:
                newNode = BTNode(newValue, None, None, curRoot)
                curRoot.left = newNode
            else:
                newNode = BTNode(newValue, None, None, curRoot)
                curRoot.right = newNode
        else:
            if newValue < curRoot.value:
                self.insert(curRoot.left, newValue)
            else:
                self.insert(curRoot.right, newValue) 
```

所以，在口译员中，我这样做：

```
import bst as b
t1 = b.BST(8) 
```

我得到一个错误，说这个`constructor takes no arguments`

构造函数显然需要一个参数`value`，所以这里出了什么问题？我该如何解决这个错误？

谢谢，非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T20:56:49.637

第一个问题是您调用了函数`___init___`而不是`__init__`. 所有的“特殊方法”都使用两个下划线。

此代码中的第二个问题是`BTNode`您重新定义了`__init__`. 你不能在 python 中重载函数。当您重新声明时，`__init__`您实际上删除了第一个构造函数。

第三个问题是您对`is`. `is`是一个运算符，用于检查两个对象是否完全相同并返回`True`or `False`。在构造函数中，您有一些`self.left is None`正在检查`self.left`（尚未声明的）的值，并检查它是否为`None`. 要设置它，请`=`按如下方式使用：`self.left = None`

要解决第二个和第三个问题，您应该使用[默认参数值](http://docs.python.org/2/tutorial/controlflow.html#default-argument-values)。例如：

`def __init__(self, value, left=None, right=None, parent=None):`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T20:58:54.820

除了下划线的数量问题，你应该替换

```
def ___init___(self, value):
    self.value = value
    self.left is None
    self.right is None
    self.parent is None

def ___init___(self, value, left, right, parent):
    """set the parameters to corresponding class members"""
    self.value = value
    self.left = left
    self.right = right
    self.parent = parent 
```

和

```
def __init__(self, value, left=None, right=None, parent=None):
    """set the parameters to corresponding class members"""
    self.value = value
    self.left = left
    self.right = right
    self.parent = parent 
```

因为正如@Moshe 指出的那样，你不能重载函数，你应该使用默认参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T20:55:11.073

更改`___init___`为`__init__`应该修复它。（2 个下划线对 3 个）

# git - Windows上的Git：重命名文件后无法切换分支（仅更改大小写）

> ID：15486721
> 
> 赞同：14
> 
> 时间：2013-03-18T20:52:36.030
> 
> 标签：git, rename, case-sensitive, file-rename, ignore-case

我在 Windows 上使用 git，我的仓库中有一个文件，可以说“foo.txt”。今天我想把这个文件重命名为“Foo.txt”（大写）。正如[这个 SO question](https://stackoverflow.com/questions/1793735/git-change-case-of-a-file-on-windows)中所建议的那样，我使用`git mv -f foo.txt Foo.txt`了 ，它产生了预期的结果。我继续将更改*提交*到我的仓库。
*编辑：*我希望这是一个永久性更改，并且仍然能够签出在此更改之前的提交。

但是，在那之后我在尝试切换分支时遇到了错误：

```
# I'm on branch1  
git checkout branch2  
Aborting  
error: The following untracked working tree files would be overwritten by checkout:  
Foo.txt  
Please move or remove them before you can switch branches. 
```

经过一番摸索，我发现我的`.git/config`文件具有以下设置：

```
[core]  
    ignorecase=false 
```

将此更改为 true 似乎可以解决问题，并允许我正常在分支之间进行更改。

所以关于这个，我想知道：

1.  此设置是否有任何不利影响？它应该在 Windows 上总是正确的吗？如果我正在与其他开发人员一起工作并且他们没有为此设置相同的值怎么办？
2.  是否有另一种方法可以重命名文件而无需更改此设置？
3.  为什么会发生这种情况？当我提交更改时，git 正确地识别出该文件实际上已重命名（没有删除一个文件然后添加另一个文件）。那么当我尝试切换分支时到底发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T06:45:50.167

如“ [Unresolvable Git error: The following untracked working tree files will be overwritten by checkout](https://stackoverflow.com/questions/8839247/unresolvable-git-error-the-following-untracked-working-tree-files-would-be-over) ”中所述，设置`core.ignorecase`为`true`是​​允许签出继续进行的有效方式。

但我更愿意，如“ [GIT：以下未跟踪的工作树文件将被 checkout 覆盖](https://stackoverflow.com/questions/12323128/git-the-following-untracked-working-tree-files-would-be-overwritten-by-checkout)”，以：

*   `git add`我刚刚修改的内容（在您的情况下，`git mv`可能已经将重命名的文件添加到索引中）
*   `git stash`，保存索引
*   `git checkout -b anotherBranch`：这应该可以工作，因为索引是干净的
*   `git stash pop`, 如果您想在该新索引上恢复大小写更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T21:02:14.723

无需更改配置设置即可克服此问题的一种简单（但不优雅）的方法是删除文件并再次检查它。在我的情况下，这允许我的更改分支再次正常。

编辑：正如 Avivr 所指出的，我提出的解决方法并不能*永久*解决问题。我仍然不会删除此答案，因为在某些情况下它可能会作为临时*修补程序有所帮​​助。*

# java - 可以从 PGP PRIVATE KEY 生成公钥吗？

> ID：15486730
> 
> 赞同：0
> 
> 时间：2013-03-18T20:52:58.360
> 
> 标签：java, openpgp

我正在使用公钥使用 openpgp 创建我的 java 产品的许可证。该产品随附用于读取许可证文件的私钥。这是正确的方法吗？私钥可以用来生成公钥吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T20:54:17.443

不可以。私钥应该保密。

使用签名机制。使用您的私钥签名以创建签名，使用您的公钥验证该签名。然后公钥会随您的产品一起提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T17:03:53.020

“私钥可以用来生成公钥吗？”
至于你的这部分问题，我认为答案是肯定的。数据包标签 5（根据 RFC 4880）包含您需要的所有数据，包括公钥。至于正确使用，请将公钥视为您的借记卡号，将私钥视为您的 PIN。

# regex - 正则表达式包含一件事但排除另一件事

> ID：15486738
> 
> 赞同：5
> 
> 时间：2013-03-18T20:53:32.253
> 
> 标签：regex, regex-negation

我一直在寻找如何编写正则表达式以包含以指定短语开头的某些 URL 而排除另一个 URL 时遇到了很多麻烦。

我们希望包含以下开头的页面：

```
/womens
/mens
/kids-clothing/boys
/kids-clothing/girls
/homeware 
```

但我们想排除 URL 中包含 /sXXXXXXX 的任何内容 - 其中 X 是数字。

到目前为止，我已经写了这个来匹配下面的 URL，但它的行为非常奇怪。我应该使用环视还是什么？

```
\/(womens|mens|kids\-clothing\/boys|kids\-clothing\/boys|homeware).*[^s[0-9]+].*

/homeware/bathroom/s2522424/4-tier-pastel-pop-drawers-approx-91cm-x25cm-x-28cm
/homeware/bathroom/towels-and-bathmats
/homeware/bathroom/towels-and-bathmats/s2506420/boutique-luxury-towels
/homeware/bathroom/towels-and-bathmats?page=3&size=36&cols=4&sort=&id=/homeware/bathroom/towels-and-bathmats&priceRange[min]=1&priceRange[max]=14
/homeware/bathroom?page=3&size=36&cols=4&sort=&id=/homeware/bathroom&priceRange[min]=1&priceRange[max]=35
/homeware/bedroom
/homeware/bedroom/bedding-sets
/homeware/bedroom/bedding-sets/s2471012/striped-reversible-printed-duvet-set
/homeware/bedroom/bedding-sets/s2472706/check-printed-reversible-duvet-set
/homeware/bedroom/bedding-sets/s2475332/union-jack-duvet-set
/kids-clothing/boys/shop-by-age/toddler-3mnths-5yrs/s2520246/boys-lollipop-slogan-t-shirt
/kids-clothing/boys/shop-by-age/toddler-3mnths-5yrs/s2520253/boys-2-pack-dinosaur-t-shirts
/kids-clothing/girls/great-value/sale?page=1&size=36&cols=4&sort=price.asc&id=/kids-clothing/girls/great-value/sale&priceRange[min]=0.5&priceRange[max]=7
/kids-clothing/girls/mini-shops/ballet-outfits
/kids-clothing/girls/shop-by-age/baby--newborn-0-18mths
/kids-clothing/girls/shop-by-age/baby--newborn-0-18mths/s2484120/3-pack-frill-pants-pinks
/kids-clothing/girls/shop-by-age/baby--newborn-0-18mths/s2504431/3-pack-l-s-bodysuit
/mens/categories/tops?page=5&size=36&cols=4&sort=&id=/mens/categories/tops&priceRange[min]=2&priceRange[max]=22.5
/mens/categories/trousers-and-chinos
/mens/categories/trousers-and-chinos/s2438566/easy-essential-cuffed-jogging-bottoms
/mens/categories/trousers-and-chinos/s2438574/easy-essential-cuffed-jogging-bottoms
/mens/categories/trousers-and-chinos/s2458939/regatta-zip-off-lightweight-outdoor-trousers 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:01:12.960

你在正确的轨道上。负前瞻将做到这一点：

```
"^(?!.*\/s\d+)\/(womens|mens|kids\-clothing\/boys|kids\-clothing\/girls|homeware)\/.*" 
```

`^`锚点到字符串的开头。不能出现在字符串中任何位置的表示，其余部分与您所需的起始标记匹配`(?!.*\/s\d+)`。`"/sXXXXXXX"`

`[^s[0-9]+]`不起作用的原因是`[^xyz]`它只匹配一个字符。您实际上在说的是您正在寻找任何不是`"s"`,`"["`和`"0-9"`, 后跟`"]"`. 例如`"s[234[s]"`。

您需要将否定前瞻放在字符串开头的原因是根本没有匹配。如果将它放在 之后`\/(womens|mens|kids\-clothing\/boys|kids\-clothing\/girls|homeware)\/.*`，您仍然可以成功匹配 之前的所有内容`"/sXXXXXXX"`。即，对于数据的第 1 行，您将匹配“/homeware/bathroom/”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:07:53.960

是的，你需要一个消极的环顾四周：

```
/^\/(womens|mens|kids\-clothing\/boys|kids\-clothing\/boys|homeware)(?:\/(?:(?!s\d+).)*)+$/gm 
```

如果您一次比较一行，则不需要多行 (m) 标志。它的行为可能很奇怪，因为你有一个字符类（用方括号表示）嵌套在更多的方括号中，这是行不通的；你不能嵌套字符类。这已经过测试并适用于 refiddle。

# php - 使用 PHP 和 MySQL 从 2 个表中获取信息

> ID：15486752
> 
> 赞同：-3
> 
> 时间：2013-03-18T20:54:49.730
> 
> 标签：php, mysql, database

我想知道您是否可以帮助我解决有关 PHP 和 MySQL 的问题。我正在尝试从网站收件箱的 1 个整体查询中的 2 个表中获取信息。这意味着我要从消息表中查找：发件人、收件人、消息、时间等

从第二个表中，我想找到发件人的实际姓名、成员类型、年龄，也许还有其他一些数据。

谁能帮我解决这个问题。我已经读过，也许我需要使用 Join 或 Join Left 来连接表，但不能准确地弄清楚它在我的示例中是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:57:04.877

假设`OtherTable`包含一个`UserId`值等于`Sender`from的字段`MessagesTable`：

```
SELECT Sender, Recipient, ..., Name, MemberType, ... FROM MessagesTable
LEFT JOIN OtherTable ON OtherTable.UserId = MessagesTable.Sender 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:00:28.400

您需要某种形式的连接，例如：

```
SELECT messages.sender, messages.recipient, users.name FROM messages JOIN users ON users.id = messages.user_id 
```

看看这个[SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)，绝对值得收藏。

# netbeans - 从 Gradle 构建 NetBeans Ant 项目

> ID：15486753
> 
> 赞同：2
> 
> 时间：2013-03-18T20:54:50.950
> 
> 标签：netbeans, ant, gradle

我正在将我们的构建从 Ant 转换为 Gradle。我们的第一步是添加 Gradle 构建文件，以便我们可以开始使用 Gradle 作为我们的构建工具。这让我们可以使用现有的构建脚本来使用 Ant 进行构建，并随着时间的推移将它们转换为 Gradle。我只想让 Gradle 调用现有的 Ant 构建文件。我们的项目都是 NetBeans 项目，有 build.xml 和 nbproject/build-impl.xml 文件。一些项目需要 NetBeans 构建属性，可在 ~/.netbeans/6.5.1/build.properties 中找到。我已成功将 NetBeans user.properties.file 属性设置为 ~/.netbeans/6.5.1/build.properties。

当我使用 Ant 构建时，我会调用它：

```
ant -Duser.properties.file=~/.netbeans/6.5.1/build.properties dist 
```

这将执行 dist 目标，该目标取决于 init 目标，该目标取决于下面列出的目标：

```
pre-init, init-private, init-userdir, init-user, init-project, do-init, post-init, init-check, -init-taskdefs 
```

上面列出的目标按指定的顺序执行。*当我调用 'gradle dist' 时，它会调用 init Ant 目标，但随后它会以相反*的顺序执行上面列出的目标，从 -init-taskdefs 开始。在 -init-taskdefs 目标之前的目标中设置了一些必需的属性，这些属性在从 gradle 运行时不会被设置。

真的，我现在想做的就是使用 gradle 调用 Ant 来构建我的项目。由于使用 gradle 构建使用 Ant build.xml 文件似乎没有按预期工作，因此最好的方法是什么？我必须求助于使用 exec 吗？（我希望不是）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-27T20:59:35.043

我发现尝试使用 Gradle 的 Ant 与 Netbeans 项目的集成太困难且容易出错。相反，我使用 Gradle 的 exec() 命令。下面是一个示例，取自我构建名为“Common Library”的 NetBeans 项目的代码。

```
task commonLibrary {
    doLast {
        ant.echo("Building Common Library")
        exec () {
            workingDir = "../netbeans/nb/CommonLibrary"
            executable = "ant"
            args = ['clean', 'jar']
        }
    }
} 
```

我意识到这不是您希望的答案，但将其发布为其他人的可能解决方案，特别是那些无法开始重新处理 build.xml 文件的人。

# c# - WebApi 将正文绑定到 Json 字典

> ID：15486763
> 
> 赞同：1
> 
> 时间：2013-03-18T20:55:11.227
> 
> 标签：c#, asp.net-web-api, json.net

我正在尝试使用以下签名创建一个 WebApi 操作方法：

```
[System.Web.Http.HttpPost]
public object Execute([FromUri] string command, [FromUri] string method, [FromBody] IDictionary<string, JToken> arguments) 
```

但是，当我用请求点击此方法时，参数永远不会正确绑定（两个 URI 字段确实如此）。ModelState 在第一个字符处显示 Json.NET 解析错误。我已经尝试过看起来像：`id=50`和`arguments={ "id": 50 }`. 如何制定我的请求以允许 WebApi 正确绑定我的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:28:25.127

您不需要请求正文中的“id=”或“arguments=”。您应该能够发送如下所示的内容：

```
{"key1": 4, "key2": 50, "key3": {"member1": "value"}} 
```

让它工作。然后字典将包含 key1：值为 4 的 JValue，key2：值为 50 的 JValue，key3：值为“value”的 member1 成员的 JObject。

# mips - 交换 mips 变量未保存

> ID：15486765
> 
> 赞同：0
> 
> 时间：2013-03-18T20:55:40.500
> 
> 标签：mips

```
 .text
main:
    la  $a0,n1
    la  $a1,n2
    jal     swap
    li  $v0,1   # print n1 and n2; should be 27 and 14
    lw  $a0,n1
    syscall
    li  $v0,11
    li  $a0,' '
    syscall
    li  $v0,1
    lw  $a0,n2
    syscall
    li  $v0,11
    li  $a0,'\n'
    syscall
    li  $v0,10  # exit
    syscall

swap:
    xor $a0 $a0 $a1
    xor $a1 $a0 $a1
    xor $a0 $a0 $a1
    jr $ra

L1: 

    .data
n1: .word   14
n2: .word   27 
```

好的，所以我的目标是添加要交换的目标

但是，无论我对 swap 中的变量做什么，它似乎都没有被保存，我正在编辑 a0 和 a1，这不应该吗？

代码总是打印 14 和 27

# requirejs - requirejs 找不到返回未定义的模块

> ID：15486768
> 
> 赞同：1
> 
> 时间：2013-03-18T20:55:55.157
> 
> 标签：requirejs

我以前一直在使用require，但从未遇到过这个问题，也许我在某处弄错了路径，但这是我的文件结构：

```
js
├───main.js
│
├───app
│   ├───app.js
│   ├───hello.js
│   ├───world.js
│   │
│   └───models
│       └───game.js
│
└───vendor
    ├───jquery.js
    └───require.js 
```

main.js

```
require.config({
    paths: {
        'jquery':   '../js/vendor/jquery'
    },
    shim: {
        'jquery': {
            exports: '$'
        }
    }
});

require(['app/app', 'jquery', 'app/models/game'], function (App, $, Game) {
    console.log(arguments);
    $(function () {
        console.log('why is my App undefined?', App);
        App.init();

    });
}); 
```

应用程序/app.js

```
define('App', ['hello', 'world'], function (hello, world) {

    var App = {};

    App.init = function () {
        alert(hello + ' ' + world);
    };

    return App;
}); 
```

代码可以正常触发，但是我的依赖项似乎在 app 或 hello 或 world 模块上失败，App 日志为未定义，我的游戏模块也是如此。

app/app 应该是我的 App 模块的正确路径，还是我想错了？

**更新**

我认为 App 的大写 A 解决了这个问题（但同时我对 Jlange 的评论采取了行动，所以我`app/App`从 . 启动了模块`index.html`。这看起来不错，但在继续开发后它又出现了。

我可以很好地加载同一目录中的每个模块，但我不能从子目录中加载模块。

就像最初的示例无法从主模块中加载应用程序/应用程序一样，应用程序/应用程序模块也不能导入模型/游戏模块。

正如我之前所说，我真的不知道这可能是什么，我使用过 requirejs 并且没有遇到这个问题。

**更新 2** 如果我删除所有命名模块，我可以让它工作，

```
define([dependencies], function (dependencies) {}); 
```

效果很好，但是一旦我将其更改为命名模块，我就找不到它

```
define("moduleA", ['subdir/moduleB'], function (moduleB) {
    console.log(moduleB); // >> undefined
});
define("subdir/moduleB", [dependencies], function (dependencies) { return 'B'; }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:51:18.547

**已编辑**

经过多次尝试，修复了上面的代码，并在 requirejs 帮助页面中阅读，我发现了一个小段落，说最好不要使用命名模块，让优化器为你命名。

所以我决定删除所有模块名称

模块A.js

```
define(['subdir/moduleB'], function (moduleB) {
    console.log(moduleB); // >> 'B'
}); 
```

子目录/moduleB.js

```
define([dependencies], function (dependencies) { return 'B'; }); 
```

这工作得很好......不知道我是如何固定使用这些模块名称的，认为命名你的模块会更好。

# sql - 试图找到所有没有从一个城市直飞的城市（PostgreSQL）

> ID：15486771
> 
> 赞同：4
> 
> 时间：2013-03-18T20:56:01.040
> 
> 标签：sql, postgresql

我正在尝试编写一个查询来确定我不能直接从一个城市飞往哪些城市，比如伦敦。给定架构：

城市：

```
| c_id |   city_name    | 
```

航班：

```
| f_id | departure_city_id | destination_city_id | 
```

目前我的查询返回相反的结果，即它返回从伦敦直飞的城市

```
SELECT c2.city_name as "City"
FROM flights AS f
JOIN cities AS c2 ON f.destination_city_id != c2.c_id
JOIN cities AS c ON c.c_id = c.c_id
WHERE c.city_name = 'London'
AND c.c_id != c2.c_id
AND f.departure_city_id = c.c_id; 
```

我原以为很容易改变它以获得我想要的东西。我想把第三行改成

```
JOIN cities AS c2 ON f.destination_city_id = c2.c_id 
```

会成功的，但它没有。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:16:58.957

> 我不能*直接*从一个城市飞到的城市，比如伦敦。

这意味着一个人*可以*飞到那里，而不是直接从伦敦。所以（`JOIN`不是`LEFT JOIN`）`city`通过：`flight``destination_city_id`

```
SELECT DISTINCT c.city_name
FROM   cities c
JOIN   flights f ON f.destination_city_id = c.c_id
JOIN   cities c2 ON c2.c_id = f.departure_city_id
WHERE  c2.city_name <> 'London'; 
```

然后我只需要排除从伦敦出发的航班，申请`DISTINCT`获得唯一的城市名称，我们就完成了。

对这个问题的更复杂的解释是：
*“你可以从伦敦飞到的城市，只是不能直接飞”*
但是因为这看起来像基本功课，我不认为他们会期待你的*递归查询*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:02:17.117

尝试类似：

```
SELECT * 
FROM cities c
WHERE c.c_id NOT IN
(SELECT f.destination_city_id
 FROM flights f
 JOIN cities c2 ON f.departure_city_id = c.c_id
 WHERE c2.city_name = 'London') 
```

# php - cURL 给了我响应，但缺少一些回显语句

> ID：15486780
> 
> 赞同：0
> 
> 时间：2013-03-18T20:56:38.440
> 
> 标签：php, curl

我正在尝试通过 cURL 获取动态 php 页面的内容

网络上的回应似乎

```
James Bond

Male, 20 Apr 1991
Email: james@gmail.com
Mobile: 09394949494
Website: www.google.com
Address: Swat 
```

但是当我使用 cURL 获取这个 url

curl 给了我这个

```
Female, 
Email: 
Mobile: 
Website: 
Address: 
```

我正在使用此代码：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://localhost/cv/formats/1.php');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$my_html = curl_exec($ch);
echo $my_html;
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:25:52.297

我刚刚解决了

我正在使用会话变量作为条件检查器从 mysql 检索数据，但是该本地会话不适用于 cURL 请求，因此我必须将密钥作为查询字符串传递；）

# c# - 如何使用来自不同项目的模型类通过反射提供程序创建 WCF 数据服务 OData？

> ID：15486784
> 
> 赞同：2
> 
> 时间：2013-03-18T20:56:49.820
> 
> 标签：c#, wcf, reflection, wcf-data-services, odata

按照说明使用反射提供程序 ( [http://msdn.microsoft.com/en-us/library/dd728281.aspx](http://msdn.microsoft.com/en-us/library/dd728281.aspx) ) 一切正常，直到我将类 Order 和 Item 移动到类库并引用类库来自带有 SVC 文件的 Web 项目。

将 POCO 类移动到 WCF 项目中一切顺利。

将 POCO 类从 WCF 项目中移出到单独的程序集中，我得到一个 500 没有任何解释。

我希望能够将我的 poco 类保存在一个单独的项目中，并使用 OData 端点公开它们。我究竟做错了什么？

--UPDATE--
上述场景旨在说明我使用 WCF OData Reflection Provider 发现的一个问题。这不是我真正的问题，但为了说明目的更容易解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:50:16.250

如果您尚未升级到最新版本的 WCF 数据服务（当前为 5.3），请尝试升级。我使用 .Net 4.5 附带的 WCF 数据服务版本重现了您的问题，但是一旦我使用 NuGet 将两个程序集中的引用升级到 Microsoft.Data.Services 的最新版本，问题就消失了。

如果您已经在使用最新版本的 WCF 数据服务，请确保两个程序集都引用完全相同版本的 WCF 数据服务。

如果这些都不能解决您的问题，请将以下属性添加到您的 DataService 类以获得更详细的错误消息和堆栈跟踪：

```
[System.ServiceModel.ServiceBehavior(IncludeExceptionDetailInFaults = true)]
public class YourService : DataService<...> 
```

然后请用结果更新您的问题（如果解决方案没有立即从堆栈跟踪中跳出）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:25:04.810

（免责声明：我通常不喜欢那些不能帮助您解决问题的答案，而是解释为什么您的问题不是正确的问题，但我认为在这种情况下这是合理的 :)）

如果您考虑一下，您并不想这样做：
Order 和 Item 类根本不是真正的 POCO；它们*不是*“普通”的 C# 对象；它们具有数据属性，这使它们成为*数据传输对象*(DTO)。
它们属于您的服务与其客户端之间的接口；
域实体（或 POCO）Item 和 Order 很可能会更复杂一些，并且包含除数据之外的其他内容，例如操作和业务逻辑。

我相信正确的方法是拥有一个丰富的域模型，其中 Order 和 Item 包含一整套属性和操作，最重要的是，一个 DTO 层，它只包含您的服务客户端需要的那些属性。

通过电线发送 POCO 被称为“[剥离模式](http://ayende.com/blog/4011/the-stripper-pattern)”，我相信最好避免这种情况。

# mysql - MAMP Pro 错误：无法写入 MySQL 配置文件 my.cnf

> ID：15486785
> 
> 赞同：7
> 
> 时间：2013-03-18T20:56:51.050
> 
> 标签：mysql, macos, mamp, virtualhost

由于其易于虚拟主机管理，我尝试使用 MAMP Pro 在我的 Mac 上替换以前的 XAMPP。但是在我安装之后。MAMP，基本版有效，但专业版一直给我这个错误消息：

无法写入 MySQL 配置文件 my.cnf。

我用谷歌搜索了一段时间，有一些不同的解决方案，比如在 /etc/ 上创建 my.cnf，但这些都不起作用。错误日志也是空的。

有人遇到过这种情况吗？或者有谁知道我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T20:10:29.657

我刚刚购买了 MAMP PRO，我也遇到了这个错误。这是“修复”它的内容：

1.  打开终端并输入`sudo killall -9 mysqld`. 您可能会看到“没有找到属于您的匹配进程”，这很好，这意味着 MySQL 没有运行。
2.  现在，在 Applications 中，查找常规的 MAMP 文件夹。在此处打开 MAMP 并单击**Start Servers**
3.  现在打开 MAMP PRO 并且应该启动服务器

这只是一种解决方法，绝对不需要这些。至少，这应该让你启动并运行。

联系支持！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T06:33:24.097

文件 -> 恢复出厂设置

可能是权限问题，但我无法解决。以上为我修复了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-24T18:05:42.100

1.  卸载mamp。
2.  删除所有关于 mamp 的文件。
3.  重新安装mamp。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-25T13:53:23.443

我从“/etc”目录中删除了“my.cnf”。重新启动 MAMP pro。成功启动服务器......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-22T09:12:23.030

您的配置可能有误。

exp。

```
sql_mode = STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION # success 
```

或者

```
sql_mode = 'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' # error 
```

# javascript - IE TextRange.HtmlText 返回意外的换行符

> ID：15486786
> 
> 赞同：0
> 
> 时间：2013-03-18T20:56:53.347
> 
> 标签：javascript, asp.net, textselection, selectedtext

在一个空的 Asp.Net 项目中，我有以下代码：

我在 IE 8 中使用 TextRange.HtmlText 来检索用户在 DIV 元素中的文本选择。但是，由于某种原因，即使原始文本中没有换行符，所选的 html 也会包含 \r\n。有谁知道为什么会这样？

如果我改用 text 属性，则不会观察到相同的行为。

```
<script type="text/javascript">
    function OkClick() {
        var TextRange = document.selection.createRange();
        var SelectedText = TextRange.htmlText;
    }
</script>

<div>
This is a test with a long line of text on a single line with no line breaks.Why is there a line break returned from htmlText on the TextRange object
</div>

<button onclick="OkClick()">OK</button> 
```

以下分配给我的 SelectedText 变量：正如您所见，“为什么”一词后有一个换行符

```
This is a test with a long line of text on a single line with no line breaks.Why \r\nis there a line break returned from htmlText on the TextRange object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:01:06.510

我不知道它为什么这样做，但你可以用 C# 像这样修复它：

```
myString = myString.Replace("\r\n", string.Empty); 
```

或者像这样使用javascript：

```
myString = myString.replace("\r\n", ""); 
```

# c++ - c++编译时未定义符号

> ID：15486797
> 
> 赞同：9
> 
> 时间：2013-03-18T20:57:26.140
> 
> 标签：c++, compiler-errors, makefile, undefined-symbol

**修复：在头文件中有两次方法**

尝试编译我的项目时出现以下错误

```
% make
g++ -o p4 testTree.o tree.o node.o check.o
Undefined                       first referenced
 symbol                             in file
Tree::inTree(int)                   tree.o
ld: fatal: Symbol referencing errors. No output written to p4
collect2: ld returned 1 exit status
*** Error code 1
make: Fatal error: Command failed for target `p4' 
```

**生成文件**

```
p4: testTree.o tree.o node.o check.o
    g++ -o p4 testTree.o tree.o node.o check.o
testTree.o: testTree.cc tree.h node.h check.h
    g++ -c -Wall -Werror testTree.cc

tree.o: tree.h tree.cc node.h check.h
    g++ -c -Wall -Werror tree.cc
node.o: node.h node.cc check.h
    g++ -c -Wall -Werror node.cc
check.o: check.h check.cc
    g++ -c -Wall -Werror check.cc
clean:
    rm -f *~ *.o p4 
```

来自 tree.cc 和 tree.h 的相关代码：

**树.cc**

```
...
bool Tree::inTree(int k) const
{
     return locate(k,root) != NULL;
}
... 
```

**树.h**

```
#ifndef TREE_H
#define TREE_H

#include "node.h"
#include "check.h"
using namespace std;
class Tree
{
  private:
    Node *root;
  public:
    Tree();
    Tree(const Tree & t);
    const Tree & operator=(const Tree &t);
    friend ostream & operator<<(ostream &out, const Tree &t);
    bool inTree(int k) const;
    double & operator[](int k);
    double & operator[](int k) const;
    ~Tree();
    bool inTree(int index);
  private:
    Node * locate(int k, Node *rt) const;
    ostream & display(ostream &out, Node *r, int dir=Node::L) const;
    void add(int k, Node*&r);
    void kill(Node *&rt);
    void copy(Node *rt, Node *&newRt);
};
#endif 
```

我觉得这很简单，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T20:58:57.510

您收到的消息实际上来自**链接器**，而不是来自编译器。

您的成员函数之一`bool Tree::inTree(int index);`被正确声明并定义为`const`成员函数：

```
 // Declaration in tree.h
 bool inTree(int index) const;

 // Definition in tree.cc
 bool Tree::inTree(int k) const
 //                       ^^^^^ 
```

但是，`tree.h`您还定义了以下非`const`重载`inTree()`：

```
// Declaration in tree.h, definition (supposedly) nowhere
bool Tree::inTree(int k) 
```

**没有提供**定义。这就是链接器所抱怨的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T20:59:41.793

这是您的错误：

```
bool Tree::inTree(int k) const
{
 return locate(k,root) != NULL;
} 
```

在`.h`你定义

```
bool inTree(int); 
```

这是一个区别！

# qt - QDataWidgetMapper 和 QAbstractTableModel

> ID：15486801
> 
> 赞同：1
> 
> 时间：2013-03-18T20:57:41.347
> 
> 标签：qt, pyqt, qtableview, qabstracttablemodel

我有一个`QAbstractTableModel`由`QTableView`. 该表有 2 列和几行。每个单元格是一个`QLineEdit`. 我的问题是是否有一种方法可以`QDataWidgetMapper::addMapping`与我的自定义模型（用于`QLineEdit`单元格）一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:00:25.650

我认为您的意思是[QSignalMapper](http://doc-snapshot.qt-project.org/4.8/qsignalmapper.html)：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyLineEdit(QtGui.QLineEdit):
    focused = QtCore.pyqtSignal()

    def __init__(self, parent=None):
        super(MyLineEdit, self).__init__(parent)

        self.installEventFilter(self)

    def eventFilter(self, obj, event):
        if event.type() == QtCore.QEvent.FocusIn:
            self.focused.emit()

        return super(MyLineEdit, self).eventFilter(obj, event)

class MyTableModel(QtCore.QAbstractTableModel): 
    def __init__(self, data, headers, parent=None): 
        super(MyTableModel, self).__init__(parent)
        self.data    = data
        self.headers = headers

    def rowCount(self, parent=QtCore.QModelIndex()): 
        return len(self.data) 

    def columnCount(self, parent=QtCore.QModelIndex()): 
        return len(self.data[0]) 

    def data(self, index, role): 
        if not index.isValid(): 
            return QtCore.QVariant()

        elif role != QtCore.Qt.DisplayRole: 
            return QtCore.QVariant()

        return QtCore.QVariant(self.data[index.row()][index.column()])

    def headerData(self, section, orientation, role):
        if  orientation == QtCore.Qt.Horizontal \
        and role == QtCore.Qt.DisplayRole:
            return QtCore.QVariant(self.headers[0][section])

        elif orientation == QtCore.Qt.Vertical \
        and role == QtCore.Qt.DisplayRole:
            return QtCore.QVariant(self.headers[1][section])

        return QtCore.QVariant()

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        headers = [range(3), range(5)]
        data    = [
            str(x) * len(headers[0])
            for x in range(len(headers[1]))
        ]

        self.model = MyTableModel(data, headers, self)

        self.tableView = QtGui.QTableView(self)
        self.tableView.setModel(self.model)

        self.layoutHorizontal = QtGui.QHBoxLayout(self)
        self.layoutHorizontal.addWidget(self.tableView)

        self.signalMapper = QtCore.QSignalMapper(self)
        self.signalMapper.mapped.connect(self.on_signalMapper_mapped)  

        widgetNumber = 0
        for rowNumber in range(self.model.rowCount()):
            for columnNumber in range(self.model.columnCount()):
                cellIndex = self.model.index(rowNumber, columnNumber)

                lineEdit = MyLineEdit(self)
                lineEdit.setText("row: {0} col: {1}".format(rowNumber, columnNumber))
                lineEdit.focused.connect(self.signalMapper.map)

                self.signalMapper.setMapping(lineEdit, widgetNumber)

                self.tableView.setIndexWidget(cellIndex, lineEdit)

                widgetNumber += 1

    @QtCore.pyqtSlot(int)
    def on_signalMapper_mapped(self, i):
        print self.signalMapper.mapping(i).text()

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.resize(333, 222)
    main.show()

    sys.exit(app.exec_()) 
```

# android - 添加SQLCipher后如何测试数据库是否加密？

> ID：15486803
> 
> 赞同：3
> 
> 时间：2013-03-18T20:57:51.540
> 
> 标签：android, testing, sqlcipher

添加 SQLCipher 库并添加调用后

```
SQLiteDatabase.loadLibs(context); 
```

如何确认我的应用程序数据库已加密？

我尝试通过 adb 访问 .db。adb shell 在尝试访问 db 文件进行检查时说权限被拒绝或错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:06:16.177

> 我尝试通过 adb 访问 .db。adb shell 在尝试访问 db 文件进行检查时说权限被拒绝或错误。

使用模拟器和 DDMS 或`adb pull`（有关后者的 shell 脚本，请参阅[此博客文章](http://www.andreybutov.com/2013/03/14/a-quick-way-to-view-your-android-apps-sqlite-database-during-development/)）。

或者[在生产设备上](https://stackoverflow.com/a/8434477/115145)[使用`adb shell run-as`](https://stackoverflow.com/a/8434477/115145)，假设设备不是很旧。

但是，您仍然无法打开数据库，除非您使用启用了 SQLCipher 的副本`sqlite3`或其他一些客户端。

# java - 检查 PriorityQueue 中对象的字段

> ID：15486804
> 
> 赞同：0
> 
> 时间：2013-03-18T20:57:52.160
> 
> 标签：java, priority-queue

我需要使用 a`PriorityQueue`来对 FIFO 元素进行排序。该队列将包含一个 Message 对象，每个对象都将具有一个`double timestamp`以及一个`int counter`跟踪该消息已收到多少确认的消息。有两种类型的消息 - 带有数据的消息和带有确认消息的消息。只有带有数据的消息才能放入队列中。我正在编写一个比较器，用于对队列进行排序。只有当它收到所有确认时，我才会弹出队列的头部。

问题是，当收到确认消息时，我需要增加收到此确认的消息的确认计数器。为此，我需要通过检查队列中每条消息的特定字段（发送时间）来查找消息。

如何才能做到这一点？我想到了以下几点：

获取一个迭代器，然后遍历队列检查每个对象的特定字段。

不过，这对我来说似乎是一种残酷的方法。有没有更好的办法？我们可以像这样访问队列中的对象吗？

* * *

*注意*：我需要使用 PriorityQueue 因为我正在实现的功能（使用 Lamport 的逻辑时钟在分布式系统中的总有序多播）需要有一个有序队列。如果没有得到每个节点的确认，我无法将队列头部的消息传递给应用程序线程。此外，即使它已收到所有确认，我也无法传递不在队列头部的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:18:55.870

第一：是的，我们可以通过`PriorityQueue`这种方式访问​​，因为它实现了`Iterable`-interface。

当您想到性能问题时，您可以通过使用某种枢轴来记录复杂性（请参阅 参考资料`Quicksort`）。

如果你觉得它有点愚蠢：最好的解决方案有点愚蠢，但大部分都可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:32:24.513

在我看来，您使用的数据结构类型错误。如果您从队列（即 JMS 或类似）接收消息，那么如果您需要持久性，为什么不从队列中读取消息并将数据存储到更合适的数据结构中，例如 Map（例如 HashMap）或数据库。

收到确认后，您可以在 Map 中查找相应的对象并更新计数。如果您需要，地图可能具有更快的随机访问。

如果您增加确认计数并达到“我现在已收到所有确认”的阈值，那么您可以将消息推送到新队列以进行进一步处理（如果这是您想要的）。

一些值得深思的食物。希望我正确地解释了你的问题。

# jquery - 使用 jquery 查找具有特定值的数据属性的元素？

> ID：15486806
> 
> 赞同：0
> 
> 时间：2013-03-18T20:58:06.933
> 
> 标签：jquery, html

是否有一种通过 jquery 查找具有特定值的数据属性的所有元素并将这些元素作为数组返回的基本方法？

IE`<span data-productID="7">My product</span>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:59:44.843

选择具有特定属性值的元素的语法是：

```
[attr_name = attr_value] 
```

在您的具体情况下，这将是：

```
$('span[data-product="7"]'); 
```

这将返回一个 jQuery 集合（不是数组），但可以像使用数字索引的数组一样访问它。如果你真的需要一个数组（也许是为了使用数组原型方法），你可以使用：

```
$('span[data-product="7"]').makeArray(); 
```

# mysql - 根据同一张表中的另一行更新行

> ID：15486808
> 
> 赞同：0
> 
> 时间：2013-03-18T20:58:10.383
> 
> 标签：mysql

我有一张看起来像这样的桌子

```
id |game_id| player_id| 优胜者
----------------------------
 1 | 1 | 1 |    
 2 | 1 | 2 |
 3 | 1 | 3 |
 4 | 1 | 4 |
```

我有一个游戏 ID 和获胜者 ID，我想将获胜者更新为 1，将失败者更新为 0；

```
UPDATE tournament SET winner = '1' WHERE game_id= 1 AND  player_id = 1 
```

然后

```
UPDATE tournament SET winner = '0' WHERE game_id= 1 AND  player_id != 1 
```

输出

```
id |game_id| player_id| 优胜者
----------------------------
 1 | 1 | 1 | 1
 2 | 1 | 2 | 0
 3 | 1 | 3 | 0
 4 | 1 | 4 | 0
```

谁能告诉我如何使用单个查询来完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:00:02.273

```
UPDATE tournament SET winner = IF(player_id = 1, '1', '0') WHERE game_id= 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:47:43.737

询问

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/e2edee/3)**：

```
UPDATE tournament 
SET winner = CASE WHEN player_id = 1
                  THEN '1'
                  ELSE '0'END
WHERE game_id= 1 
```

# javascript - .svg('get') 是什么意思？

> ID：15486812
> 
> 赞同：2
> 
> 时间：2013-03-18T20:58:38.217
> 
> 标签：javascript, jquery, svg, jquery-svg

我在很多地方都看到过这种语法，但是在互联网上找不到任何解释这两行是做什么的，有人能解释一下吗？

```
$('#svgContainer').svg();           
var svg = $('#svgContainer').svg('get'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:01:54.047

这看起来像一个 jQuery 插件，它创建（第一行）然后返回（第二行）一个[SVG 元素](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)。可能[是这个](http://keith-wood.name/svg.html)？

从该插件的文档（通过单击“快速参考”找到）：

```
$(selector).svg('get') // Retrieve SVG wrapper 
```

# javascript - 检查多维数组中是否存在值并返回布尔值

> ID：15486815
> 
> 赞同：0
> 
> 时间：2013-03-18T20:58:47.337
> 
> 标签：javascript, jquery

我看过很多关于在 javascript 中搜索嵌套数组的帖子，但没有一个可以判断数组中是否不存在某个项目。

这可能听起来令人困惑，所以这里有一些例子：

我有 2 个数组`oldArray`和`newArray`

结构如下：

```
array(
      [0]=>array([name]:"name"
           [location]:"location")
      [1]=>array([name]:"name2"
           [location]:"location2")
 ) 
```

两个数组都是这样构造的。

我需要能够知道哪些名称存在于旧数组中而不是新数组中，反之亦然。

这是我尝试过的：

```
 var name= oldArray[key]['name'];

   for (var key in oldArray) {
       for(var i= 0, len = newArray.length; i < len; i++){
                if(newArray[i]['name'] == name){
                          //push to array
                }
                 else{
                      //push to different array
                 }
       }
 } 
```

这样，我将拥有一个包含两个数组中存在的所有名称的数组和一个仅包含 oldArray 中存在的名称的数组。

这似乎不起作用，因为它是一对一的比较。第一个数组是正确的，但应该只包含旧数组中存在的名称的数组是不正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:10:31.483

您是否为旧值初始化了数组？

你有例外吗？

你用 Chrome 调试过吗？

编辑：

我想如果你这样做：

对于所有旧值，如果存在则推送并再次询问并推送，它将在无限循环中继续推送。

尝试添加休息

```
 var name= oldArray[key]['name'];

       for (var key in oldArray) {
           for(var i= 0, len = newArray.length; i < len; i++){
                    if(newArray[i]['name'] == name){
                              //push to array

                    break;
                    }
                     else{
                         if(i==newArray.length-1)
                          //push to different array

                     }
           }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:59:43.663

使用布尔值来跟踪新数组中是否存在匹配项。然后在完成 newArray 的内部 for 循环后，检查布尔值以查看是否未找到匹配项，然后推送到其他数组。

```
var name= oldArray[key]['name'];

for (var key in oldArray) 
{
    var foundMatch=false
    for(var i= 0, len = newArray.length; i < len; i++)
    {
        if(newArray[i]['name'] == name)
        {
            //push to array
            foundMatch=true;
                    break;
        }
    }
    if(foundMatch==false)
    //push to different array

} 
```

# css - 如何在 twitter bootstrap 中获得圆角以在 ie8 中获得圆角？

> ID：15486819
> 
> 赞同：0
> 
> 时间：2013-03-18T20:58:55.590
> 
> 标签：css, internet-explorer, twitter-bootstrap, rounded-corners

我在 CodeIgniter 中有一个应用程序，我正在使用 twitter bootstrap，但我无法在 ie8 中获得圆角。

我试过 CSS3 pie 没有成功。我尝试将 .htc 文件放在不同的地方（`appname/PIE.htc`）并放置`AddType text/x-component .htc`，但也没有成功。

所以我现在尝试使用`border-radius.htc`。我的 CSS 和 ( `border-radius.htc`) 位于`appname/application/views/resources/css/`：

我的 css 文件如下所示：

```
@import url(bootstrap.css);

input[type="file"],
input[type="image"],
input,textarea,
input[type="file"]:focus, 
input[type="radio"]:focus,
input[type="checkbox"]:focus,
select:focus,
.input-prepend input,
.input-append input,
.input-prepend select,
.input-append select,
.input-prepend .uneditable-input,
.input-append .uneditable-input,
.input-prepend .add-on,
.input-append .add-on,
.input-prepend .btn,
.input-append .btn ,
.input-prepend .add-on:first-child,
.input-prepend .btn:first-child,
.input-append .add-on:last-child,
.input-append .btn:last-child,
.input-prepend.input-append .add-on:first-child,
.input-prepend.input-append .btn:first-child,
.input-prepend.input-append .add-on:last-child,
.input-prepend.input-append .btn:last-child,
.control-group.warning input:focus,
.control-group.warning select:focus,
.control-group.warning textarea:focus,
.control-group.error input:focus,
.control-group.error select:focus,
.control-group.error textarea:focus,
.control-group.success input:focus,
.control-group.success select:focus,
.control-group.success textarea:focus,
input:focus:required:invalid:focus,
textarea:focus:required:invalid:focus,
select:focus:required:invalid:focus,
.uneditable-input,
.btn,
.btn.active,
.btn:active,
.btn-group > .dropdown-toggle,
.btn-group.open .dropdown-toggle,
.btn-large,
.btn-group > .btn,
.btn-group > .btn:first-child,
.btn-group > .btn:last-child,
.btn-group > .dropdown-toggle,
.btn-group > .btn.large:first-child,
.btn-group > .btn.large:last-child,
.btn-group > .large.dropdown-toggle,
.navbar-inner,
.navbar-search .search-query,
.navbar-search .search-query:focus,
.navbar-search .search-query.focused,
.navbar .btn-navbar,
.navbar .btn-navbar .icon-bar,
.nav-tabs > li > a,
.nav-pills > li > a,
.nav-tabs.nav-stacked > li > a,
.nav-tabs.nav-stacked > li:first-child > a,
.nav-tabs.nav-stacked > li:last-child > a,
.nav-tabs .dropdown-menu,
.nav-pills .dropdown-menu,
.tabs-below > .nav-tabs > li > a,
.tabs-left > .nav-tabs > li > a,
.tabs-right > .nav-tabs > li > a,
.nav-collapse .dropdown-menu,
.nav-collapse .navbar-form,
.nav-collapse .navbar-search,
.nav-collapse .nav > li > a,
.nav-collapse .dropdown-menu a,
.nav-collapse .btn,
.nav-collapse .dropdown-menu,
.navbar-inner,
.navbar-fixed-top .navbar-inner,
.navbar-fixed-bottom .navbar-inner,
.navbar .btn-navbar .icon-bar,
.subnav,
.subnav .nav > li > a,
.subnav .nav > li:first-child > a,
.subnav .nav > li:first-child > a:hover,
.subnav .nav > .active > a,
.subnav .nav > .active > a:hover,
.search-query,
.breadcrumb,
.pagination ul,
.pagination li:first-child a,
.pagination li:last-child a,
.pager a,
.thumbnail,
a.thumbnail:hover,
.progress,
.progress .bar,
.popover-inner,
.popover-title,
.popover-content,
.modal,
.modal-footer,
.dropdown-menu,
.well,
.well-large,
.well-small,
.alert,
.hero-unit,
.tooltip-inner,
.typeahead,
.accordion-group
{
-moz-border-radius:10px;
-webkit-border-radius:10px;
behavior: url(border-radius.htc);
} 
```

这在ie8中仍然不起作用。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:08:28.793

我要说的第一件事是，将这样一个复杂的 Javascript 效果应用于许多 CSS 选择器将对 IE8 产生显着的性能影响。如果可能的话，我强烈建议你控制你对圆角的渴望。

我不会伤害你的 IE8 用户不得不牺牲一些眼睛糖果效果，但如果网站的性能明显不佳，他们可能会更痛苦。

但是暂时忽略这一点，让我们看看如何让它工作。

我建议再试一次 CSS3Pie —— 你提到你在它上没有取得任何成功，但你显然在其他脚本上也没有取得任何成功。CSS3Pie 是一款比 IE 中的任何其他各种圆角 hack 都好得多的软件。是的，Pie 有一些怪癖，但与其他人相比，它非常容易上手。

请记住，rounded-corner.htc 程序自 2009 年以来一直没有更新，因此它不了解 IE9 或 IE10。这些浏览器确实支持边界半径，但也会加载一个 htc 文件。我还没有尝试过，但这可能意味着你可能会得到一些不需要的效果。另一方面，CSS3Pie 是最新的，并且知道如何处理各种 IE 版本。

如果根本没有角落效果，最可能的问题是 htc 文件的 URL。您说您已经尝试了一些组合，但是您是否检查过 IE 开发工具以查看它实际访问的文件是什么？按 F12 将其调出，然后刷新您的页面。您应该看到所有正在下载的文件。查找 htc 文件，并查看 IE 尝试下载的 URL。如果它得到一个 404，那么你已经找到了你的问题。我怀疑这是问题所在，但显然我不看你的网站就无法判断。

另一种可能性是您在浏览器中关闭了 ActiveX。CSS3Pie 和 rounded-corner.htc 都使用 IE 的 VML 语言来创建它们的效果。但这是一个 activeX 控件，因此禁用了 activeX 的用户将看不到圆角。

如果 HTC 选项所有其他方法都失败了，您可以尝试 CSS3Pie 的纯 Javascript 选项。这允许您运行相同的代码，但作为页面中的常规 Javascript。它不如 HTC 选项那么简洁，但在某些无法使用 HTC 的情况下确实有帮助。

希望有帮助。

# php - iphone应用程序-Mysql数据库连接不起作用

> ID：15486822
> 
> 赞同：0
> 
> 时间：2013-03-18T20:58:58.883
> 
> 标签：php, iphone, mysql, objective-c, web-services

我正在尝试构建一个使用来自在线 mysql 数据库的数据的 iPhone 应用程序。（请注意，编程对我来说是新的）

我的应用程序中有这段代码，它应该连接到我的 php 文件：

```
 //loginAction

    - (void) loginAction
    {
        if ([email.text isEqualToString:@""] || [password.text isEqualToString:@""]) {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error!" message:@"please fill in everything":self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert show];
            return;
        }
        //database connection
        NSString *strURL = [NSString stringWithFormat:@"http://db.imagine-app.nl/login.php?email=%@&password=%@", email.text, password.text];

        //execute php
        NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

        //receive data
        NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

        if ([strResult isEqualToString:@"1"])
        {

        action:@selector(sendLogin);

        }else
        {
            //invalid information
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"E-mail or password wrong" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert show];
            return;

        }
    } 
```

在我的网站（由网络托管公司托管）上，我有一个名为“login.php”的 php 文件，其中包含下一个代码：

```
 <?php
if (isset($_GET["email"])  && isset($_GET["password"]) ){
                $email = $_GET["email"];
                $password = $_GET["password"];
                $result = login( $email, $password);
                echo $result;
                }

function makeSqlConnection()
{
$DB_HostName = "db.imagine-app.nl";
$DB_Name = "*************";
$DB_User = "*************";
$DB_Pass = "*************";

    $con = mysql_connect($DB_HostName,$DB_User,$DB_Pass) or die(mysql_error()); 

        mysql_select_db($DB_Name,$con) or die(mysql_error()); 

    return $con;
}

function disconnectSqlConnection($con)
{
    mysql_close($con);
}

function login($email, $password)
{

    $con = makeSqlConnection();

    $sql = "SELECT * from user  WHERE email = '$email' AND password = '$password';";
    $res = mysql_query($sql,$con) or die(mysql_error());

    $res1 = mysql_num_rows($res);

    disconnectSqlConnection($con);

     if ($res1 != 0) {
        return 1;
    }else{
        return 0;
    }// end else

}

?> 
```

这两段代码应该使我能够访问我的数据库，但是当我测试它时（在表格中输入电子邮件和密码并尝试从我的应用程序登录），iphone 模拟器卡住了一段时间，然后我告诉我我输入的值是错误的（这意味着查询没有返回值。）我必须以什么方式编辑这两段代码才能使其工作？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:10:10.890

让我们试试这段代码 NSURL *url = [NSURL URLWithString: [NSString stringWithFormat: @\" [http://www.example.com/file.php?data=this](http://www.example.com/file.php?data=this) \"]]; NSError *错误；NSString *mydata = [NSString stringWithContentsOfURL:url 编码:NSASCIIStringEncoding 错误:&error];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:08:40.507

这只是一个反复试验的问题。我可以自己把你所有的代码放到一个项目中并测试它，但这不是 Stack Overflow 的目的，我太懒了。

做所有其他程序员都会做的事情：在任何地方设置断点和/或使用`NSLog("result: %@",result)`. 转储您的 URL`NSLog`并使用您的网络浏览器进行尝试。如果有错误，请修复它并再次尝试您的项目，如果没有，请继续尝试。

另外，我以前从未见过这种语言`action:@selector(sendLogin);`它看起来像另一个复制/粘贴错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:02:24.023

在这一行：

```
NSString *strURL = [NSString stringWithFormat:@"http://db.imagine-app.nl/login.php?email=%@&password=%@, email.text, password.text]; 
```

您忘记使用双引号关闭字符串。应该：

```
NSString *strURL = [NSString stringWithFormat:@"http://db.imagine-app.nl/login.php?email=%@&password=%@", email.text, password.text]; 
```

# java - Java初始化一个纯结构

> ID：15486824
> 
> 赞同：0
> 
> 时间：2013-03-18T20:59:11.100
> 
> 标签：java

这是我正在尝试做的事情：

```
public class myClass
{
  int x;
  int y;
} 
```

我学过 c++，所以我尝试这样做：

```
myClass [] a  = new myClass[5];
for(int i =0; i < 4; i++)
    a[i].x = 0; 
```

这没有做任何事情，因为所有 a[i] 都是空的。

我知道这违反了 Java 的基本原则，但是有一个名为 Alljoyn 的产品，它迫使我这样做，请参阅：

[https://www.alljoyn.org/docs-and-downloads/documentation/guide-alljoyn-development-using-java-sdk-rev-j#unique_28](https://www.alljoyn.org/docs-and-downloads/documentation/guide-alljoyn-development-using-java-sdk-rev-j#unique_28)

AllJoyn 不允许在类中使用构造函数或其他方法。还有其他方法可以初始化纯结构吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T21:05:01.073

1.  在 Java 中没有结构这样的东西。你介绍的是一门课。
2.  正如您所观察到`a[i]`的那样`null`，因为您的数组中的引用被初始化为`null`. 您还没有创建任何对象。`a[i] = new myClass()`在你的循环中使用。这个类的 0 参数构造函数`myClass`将由 Java 生成。
3.  Java 中类的名称是按照`LikeThis`约定编写的。
4.  `a[i].x = 0`没用。[阅读](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)Java 中的原始数据类型。`int`默认情况下，编译器将字段初始化为 0。
5.  通过这样做`i < 4`，您不会初始化最后一个元素（第 5 个）。最好总是这样做`i < a.length`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T21:02:00.697

您没有初始化任何对象，请尝试：

```
myClass [] a  = new myClass[5];
for(int i =0; i < 4; i++){
    a[i] = new myClass();
    a[i].x = 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:02:02.537

您需要首先初始化所有`myClass`数组：

```
myClass[] a  = new myClass[5];
for(int i =0; i < 4; i++) {
    a[i] = new MyClass();
    a[i].x = 0;
} 
```

# javascript - 通过 Dojo/jQuery/Javascript 重组数组索引的最佳方法？

> ID：15486825
> 
> 赞同：0
> 
> 时间：2013-03-18T20:59:15.730
> 
> 标签：javascript, jquery, dojo

我列出了用户可以随意添加/删除输入字段行的组件列表，因此用户可以自由地动态删除/添加一行数据：

----| **_****|***|* ____| -删除按钮-**

 **----| **_****|***|* ____| -删除按钮-**

 **----| **_****|***|* ____| -删除按钮-**

 **----| **_****|***|* ____| -删除按钮-**

 **----添加按钮- ---- 保存按钮 ----

但是，这里出现了一个问题：数据被排列在 html 数组中，以便返回到 JSP/sevlet 模型，就像 thie

```
 <input id="row[0]" .../>
  <input id="row[1]" .../>
  <input id="row[2]" .../>
                ......
  <input id="row[n]" .../> 
```

因此，当用户删除一行时，尤其是在该部分的中间，那么数组序列肯定是混乱的，因为我只是使用基本的 jquery 命令来完成这项工作：

```
 if (confirm(message_confirm_delete)) {
            j(this).parent().remove();
        } 
```

所以问题是：当用户删除其中一个数组元素时，重新排列所有输入字段数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:17:22.123

如果我正确理解您的问题，您是说从中间删除一个后输入字段上的 id 不准确，对吗？如果是这种情况，这样的事情将在元素被删除后更新 id 属性。

```
<div>
    <input id="row[0]" type="text" class="removableInput"/><button class="remove">Remove</button>
</div>
<div>
    <input id="row[1]" type="text" class="removableInput"/><button class="remove">Remove</button>
</div>
<div>
    <input id="row[2]" type="text" class="removableInput"/><button class="remove">Remove</button>
</div>
<div>
    <input id="row[3]" type="text" class="removableInput"/><button class="remove">Remove</button>
</div>
<div>
    <input id="row[4]" type="text" class="removableInput"/><button class="remove">Remove</button>
</div>
<div>
    <input id="row[5]" type="text" class="removableInput"/><button class="remove">Remove</button>
</div>      

<script>
    $('button.remove').click(function() {
        $(this).parent('div').remove();

        $('input.removableInput').each(function(index) {
            $(this).attr('id', 'row[' + index + ']');
        });                                 
    });     
</script> 
```********

# javascript - Javascript：使用“this”访问“私有”子函数中的外部范围变量时出现“未定义”

> ID：15486830
> 
> 赞同：3
> 
> 时间：2013-03-18T20:59:35.153
> 
> 标签：javascript, this, scope

我习惯将所有变量设置为其父范围，而不是隐式调用它们：

```
function outer() {
    var x, y;
    function inner() {
        var x = this.x;
        x = ...// doing stuff here
        y = ....// implicit calling parent variable
    }
} 
```

这样如果我输入错误的变量，它就不会进入全局空间。但似乎`this`在私有函数中声明变量会返回我`undefined`：

```
function f() {
    var x = [0];
    function f1() { 
        console.log('f1:', this.x, x); 
        f2(); 
    }
    function f2() { 
        console.log('f2:', this.x, x); 
    }
    return { x:x , f1:f1 };
}

var foo = f();    
foo.f1();
    //output
    f1: [0] [0]
    f2: undefined [0] 
```

如果我理解正确，它不应该发生，因为两者都`f1`应该`f2`使用`this`. 我在这里缺少任何概念吗？还是我现在只能忍受？

`f1`更新：澄清一下，我主要关心的是为什么和之间存在差异`f2`。我更喜欢保持`f2`隐藏，因为它会做一些内部工作，而其他开发人员在声明来自`f()`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:20:14.123

也试试这个：

```
function f() {
    var x = [0];
    function f1() { 
        console.log('f1:', this.x, x); 
        f2.call(this); 
    }
    function f2() { 
        console.log('f2:', this.x, x); 
    }
    return { x:x , f1:f1 };
}

var foo = f();    
foo.f1(); 
```

这样 f2 的上下文将被正确设置。

在您的代码`this`中 f2 指的是窗口对象，因为 f2 没有被声明为方法。f1 在编写时被声明为返回对象的方法`{ x:x , f1:f1 }`。在 f2 中 x 是可见的，不是因为它在 f() 的范围内运行，而是因为 f2 将它作为闭包。这意味着在 f2 中，创建时位于同一范围内的所有变量都是可见的。

引用的`this`内容将在调用时设置。如果您将函数作为对象的属性运行，`foo.f1()`则将其视为方法，`this`并将被设置为对象。但是，当您只调用一个函数时，`f2()`其作用域将与调用它的作用域相同，在您的情况下它是窗口对象，因为 foo 是窗口对象中的全局对象。

在 f1 中 this 指的是隐藏的 f()，因此如果您希望 f2 也可以在该范围内运行，您可以使用`f2.call(this)`. .call() 的参数将是`this`运行时函数的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:12:24.467

当您的`f`函数返回一个对象时，它没有`f2`方法。`f2`方法是内部方法，`f`只存在于其范围内。

如果您使用此代码：

```
function f() {
    var x = [0];
    function f1() { 

        console.log('f1:', this.x, x); 
        this.f2(); 
    }
    function f2() { 
        console.log('f2:', this.x, x); 
    }
    return { x:x , f1:f1, f2:f2};
}

var foo = f();    
foo.f1(); 
```

然后`this`in`f1`方法将可以访问 的`f2`方法`this`，并且对象的`f2`方法将返回正确的`x`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:15:44.883

你从函数中返回了这个：

```
{ x : x, f1 : f1 } 
```

这会将`this`对象属性设置为上述内容。`f2`不是对象的一部分，因此它无法访问`this`它所引用的。

# jquery - 有谁知道如何实现这种“提升”效果？

> ID：15486831
> 
> 赞同：-3
> 
> 时间：2013-03-18T20:59:39.890
> 
> 标签：jquery, css, animation, hover, jquery-animate

我正在查看新 Teehan + Lax 网站的[故事页面，并在](http://www.teehanlax.com/story/teehan-lax/)[这些图像的悬停上看到了这种甜蜜的效果。](http://d.pr/i/23Dq)（您必须向下滚动到页面底部）。任何人都知道这将是多么容易实现？或者如果有一个插件可以做类似的事情？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:05:53.850

这是

```
-webkit-transform: rotateX(10deg);
-moz-transform: rotateX(10deg);
-o-transform: rotateX(10deg);
transform: rotateX(10deg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:03:50.200

```
.tl-site #making-tl .card .front:hover {
    transform: rotateX(10deg);
}
.tl-site #making-tl .card .front {
    transform-origin: 8px 8px 0;
    transform-style: preserve-3d;
    transition-duration: 0.75s; 
```

# git-extensions - 使用 Git Extensions 设置默认提交模板

> ID：15486843
> 
> 赞同：2
> 
> 时间：2013-03-18T21:00:11.413
> 
> 标签：git-extensions

Git Extensions 有一个称为[提交模板](https://github.com/gitextensions/gitextensions/pull/886)的功能，我在提交代码时经常使用它，以确保每行的字符数永远不会超过某个最大值，并且第二行始终为空白，基本上这样我的提交消息[格式正确](http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html)。

我只有 1 个提交模板集，但我仍然需要在提交时手动选择它。有什么方法可以在我开始新提交时自动选择此提交模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:04:17.493

这在 Git 扩展中是不可能的。提交面板保持其状态并且不能默认为任何值。例如，打开提交窗口并在提交区域输入“这是我的提交文本”或一些任意消息，然后关闭窗口和整个应用程序而不进行提交。重新启动应用程序后，文本仍将在提交区域中。这可能非常有用，但作为维护状态的副作用，我们似乎失去了除了空白消息之外的任何类型的默认值。

我知道的唯一解决方法是克隆 Git 扩展代码仓库并自己添加该功能并请求将其包含在未来的版本中。对你来说，工作可能比它的价值更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-05T10:47:45.443

对于 GitExtensions >您可以在-> -> ->`2.50.02`下添加模板 `Tools``Settings``Git Config``Path to commit template`

并添加您想要的任何路径。您可以`Settings source`在同一窗口下切换以影响所有回购或仅影响您的本地回购。

或者，如果您想使用命令行，您可以这样做：

`$ git config --global commit.template <path_to_your_.txt_template_file>`

就像[这里提到的](https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration)

# actionscript-3 - AS3 表格查询

> ID：15486845
> 
> 赞同：0
> 
> 时间：2013-03-18T21:00:15.827
> 
> 标签：actionscript-3, runtime-error

我对 AS3 比较陌生。目前我遇到了一些代码问题，希望在这个论坛上得到一些建议。基本上，我正在为我的网站创建一个表单。我有一个组合框，我希望用户在字段中输入他们的电子邮件地址和密码。然后单击提交按钮登录并验证他们输入的内容是否正确。当我实时运行我的代码时，我收到错误 1120：访问未定义的属性 status_Txt。我不知道 status_Txt 是什么意思。我从阅读的教程中复制了大部分代码。我的代码如下：有人可以告诉我如何解决这个问题。

```
 import flash.net.URLVariables;
 import flash.net.URLRequest;
 import flash.net.URLLoader;
 import flash.events.MouseEvent;
 import fl.data.DataProvider;
 import flash.events.Event;

 //Building the variables
 var phpVars:URLVariables = new URLVariables();

 //Requesting the php file
 var phpFileRequest:URLRequest = new URLRequest("http://www.example.com");
 phpFileRequest.method = URLRequestMethod.POST;

 phpFileRequest.data = phpVars;

 //Building the loader
 var phpLoader:URLLoader = new URLLoader();
 phpLoader.dataFormat = URLLoaderDataFormat.VARIABLES;
 phpLoader.addEventListener(Event.COMPLETE, showResult);

 //Variables ready for processing
 phpVars.email = txt_input.text;
 phpVars.p_swd = pass.text;

 phpLoader.load(phpFileRequest);

 btn_one.addEventListener(MouseEvent.CLICK, btnHandler);

 function btnHandler(event:MouseEvent):void{
trace("Login success");
 }

 //Validate form fileds
 function showResult(event:Event):void{
     status_Txt.text = "" + event.target.data.systemResult;
     trace(event.target.data.systemResult);

 }

 var cbox:Array = new Array();
 boy[0] = "Male";
 girl[1] = "Female";

 c_one.dataProvider = new DataProvider(cbox);
 c_one.addEventListener(Event.CHANGE, dataHandler);

 function dataHandler(e:Event):void{
trace(e.target.value);
 }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:18:40.143

您正在尝试访问一个不存在的对象。`status_Txt`被引用在：

```
function showResult(event:Event):void{
    status_Txt.text = "" + event.target.data.systemResult; //Either remove this or add a textfield to the stage with the instance name status_Txt
    trace(event.target.data.systemResult);
} 
```

# backbone.js - 骨干路由器和视图

> ID：15486846
> 
> 赞同：1
> 
> 时间：2013-03-18T21:00:19.647
> 
> 标签：backbone.js

我已经开始使用 Backbone.js，并试图了解路由到特定视图。在我的`HTML`我有`<a href="#project/1">`标签来呈现项目任务的视图。

**询问**

单击该链接时，它会将带有 的任务附加`id`到`DOM`，但是，当单击第二个链接时，它会将该任务附加到前一个链接的下方。我不确定`$.empty`View 的最佳实践是否然后调用该`show`方法？

我的路由器的片段：

```
routes: {
    'project/:id: 'showtasks'
},

showtasks: function(id) {
   Event.trigger('tasks:show', id);
} 
```

任务集合的片段

```
initialize: function() {
    Event.on('tasks:show', this.show, this);
},

show: function() {
    var task = this.collection.get(id);
    var taskView = new App.Views.Task({ model: task });
    this.$el.append(taskView.render().el);
} 
```

该系列

```
var tasks = new App.Collections.Tasks([
    {
        id: 1,
        title: 'First Task',
        content: 'Lots of Content...'
    },
    {
        id: 2,
        title: 'Second Task',
        content: 'Lots of Content...'
    },
    {
        id: 3,
        title: 'Third Task',
        content: 'Lots of Content...'
    }
]);

var tasksView = new App.Views.Tasks({ collection: tasks }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:52:15.503

Backbone 视图的几个很好的设计模式是：

*   `render`多次调用方法不应该有任何副作用。它应该正确渲染。

*   当您`append`在渲染中使用时，您基本上是在渲染方法中设置视图的流程，这基本上应该是您的视图模板的责任。

所以我建议你应该使用这个>

```
this.$el.html(taskView.render().el); 
```

这可以很好地工作，但是如果您有子视图，您会遇到问题。为此[阅读-（基本上，整个答案是对本文的无耻剽窃：P）](http://ianstormtaylor.com/rendering-views-in-backbonejs-isnt-always-simple/)

# tomcat - SSO 与 Apache 的集成

> ID：15486849
> 
> 赞同：1
> 
> 时间：2013-03-18T21:00:33.627
> 
> 标签：tomcat, single-sign-on, cas, josso

我正在尝试为我的应用程序实现 SSO。我的应用程序目前在 Tomcat 应用程序服务器上运行，我听说它不可能在应用程序服务器上实现 SSO（安装 Web 代理），而是我们需要一个将用户引导到应用程序的 Web 服务器（在应用程序服务器上运行）。是对的吗？有人可以确认吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:19:07.950

这取决于您用于 SSO 的工具/框架。例如 JOSSO 支持 Tomcat： [http://www.josso.org/confluence/display/JOSSO1/Setup+JOSSO+Agent+%28SP%29](http://www.josso.org/confluence/display/JOSSO1/Setup+JOSSO+Agent+%28SP%29)。如果支持 Tomcat，请查看您的产品支持矩阵。

此外，Tomcat 中还有 SSO 功能，允许在 Tomcat 中部署的应用程序之间执行 SSO：http: [//tomcat.apache.org/tomcat-7.0-doc/config/host.html#Single_Sign_On](http://tomcat.apache.org/tomcat-7.0-doc/config/host.html#Single_Sign_On)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:53:41.900

由于我们的 SSO 提供商不支持 tomcat 应用程序服务器，因此我使用 mod_jk 将 Apache webserver 与 tomcat 应用程序服务器集成。SSO 模块被加载到充当用户和 tomcat 应用程序服务器之间的中间层的 Apache 网络服务器。用户首先通过执行身份验证的网络服务器 IP 地址访问应用程序，一旦身份验证完成，它将用户路由到运行在 Tomcat 应用程序服务器上的应用程序。

# javascript - 让图像尽可能多地占据窗口，而不超出边界

> ID：15486850
> 
> 赞同：0
> 
> 时间：2013-03-18T21:00:40.823
> 
> 标签：javascript, html, css, image

现在问题的标题可能措辞错误。

我希望图像占据 100% 的宽度或高度（我猜以较大者为准）。有点像当你有一个照片浏览器并且在侧面或顶部有一个黑色边框，这取决于它是哪种方式。

显然，如果这是一个非常小的图像，我不希望它拉伸，我从不希望任何图像拉伸，我只是希望它们尽可能多地填充窗口。

例如，当您在 Google 上加载图片时，它不会显示其最大分辨率。如果它太大，它会缩小它以适应页面的边界。然后，您可以根据需要单击它进行放大。

我将如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:05:19.387

我认为您实际上需要以下内容：

```
.container img {
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
} 
```

这需要一个具有明确高度设置的容器才能工作。

例子：

[http://jsfiddle.net/AtxYb/4/](http://jsfiddle.net/AtxYb/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T21:02:48.707

单独使用 CSS 很容易做到这一点：

```
.container img {
    max-width: 100%;
    height: auto;
} 
```

`max-width`确保它永远不会超过其容器宽度的 100% 。`height`告诉浏览器正常调整图像大小（例如，它不会在宽度方向拉伸，但不会在高度方向拉伸），并且包含在旧浏览器中。

如果您希望匹配容器的高度而不是宽度，您当然也可以反转这一点。

编辑：

正如 pburgess 建议的那样，如果您希望图像与宽度*或*高度匹配，则需要同时声明两者。看到这个jsfiddle：http: [//jsfiddle.net/XxgkG/](http://jsfiddle.net/XxgkG/)

```
.container img {
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
} 
```

请注意，这在 IE6 中不起作用，并且在 IE7 中不稳定。如果你正在为这些悲伤、孤独的浏览器编写代码，你应该看看[这个答案](https://stackoverflow.com/questions/9442521/how-to-make-css-max-width-in-ie6-and-7)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:05:16.927

# [演示小提琴](http://jsfiddle.net/mohammadAdil/AtxYb/)

```
 img{height:auto;width:100%;} 
```

尝试重新调整窗口大小 - 图像将占用最大空间。

# asp.net-mvc - 重用具有视图模型属性的 DisplayAttributes

> ID：15486852
> 
> 赞同：0
> 
> 时间：2013-03-18T21:00:48.340
> 
> 标签：asp.net-mvc, viewmodel, data-annotations, asp.net-mvc-viewmodel

有没有办法`DisplayAttribute`在视图模型中使用实体的值？

```
public partial class Catalog
{
  [Display(ResourceType = typeof(Resources), Name = "ID")]
  public string ID { get; set; }

  [Display(ResourceType = typeof(Resources), Name = "CatalogName")]
  public string CatalogName { get; set; }
}

public class CatalogViewModel
{
  private readonly Catalog _catalog;

  // I want reuse Catalog.CatalogName's display values.
  public String CatalogName
  {
    get { return _catalog.CatalogName; }
  }
} 
```

我无法从视图模型访问资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:17:52.580

通常，您不会像在此处那样在视图模型中使用域对象。为什么它不是一个好的做法（尽管在功能上它会起作用）的解释[在这里](https://stackoverflow.com/questions/2597363/asp-net-mvc-should-a-view-model-encapsulate-domain-model)。您需要做的是从字符串和整数（基元）定义您的视图模型，并使用[AutoMapper](http://automapper.codeplex.com/)之类的东西在它们之间进行映射。在现实生活中的网站中，很少有领域模型一对一地映射到视图模型，通常视图模型是为特定视图量身定制的，其中包含来自多个表的所有必需信息。

回到您的问题：根据我刚刚描述的最佳实践定义视图模型，您当然可以（并且应该）定义所有注释和验证（使用[流利验证](http://fluentvalidation.codeplex.com)或[数据注释](http://msdn.microsoft.com/en-us/library/dd901590%28v=vs.95%29.aspx)）

希望这会有所帮助，如果没有，请告诉我。

# php - 使用特定文件夹中的所有文件制作下载链接

> ID：15486854
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:00:49.517
> 
> 标签：php, javascript, jquery

现在我正在开发的网站上有一个上传系统，用户可以将一些文档上传到特定文件。稍后我将需要使这些文件可下载。是否有一种简单的方法可以遍历特定目录中的所有文件并为文件创建下载链接？

就像是：

```
foreach($file){
   echo '<a href=""'somepath/'.$file.'">somefilename</a>';
} 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:03:18.887

```
if($dh = opendir('path/to/directory')) {
    while(($file = readdir($dh)) !== false) {
        if($file == "." || $file == "..") { continue; }
        echo '<a href="path/to/directory/' . $file . '">' . $file . '</a>';
    }
    closedir($dh);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:03:38.933

你应该看到[`opendir`](http://php.net/manual/en/function.opendir.php)。

该页面的示例适用于问题：

```
$dir = "/etc/php5/";

$path = "/webpath";

// Open a known directory, and proceed to read its contents
if (is_dir($dir)) {
  if ($dh = opendir($dir)) {
      while (($file = readdir($dh)) !== false) {
          echo "<a href=\"$webpath/$file\">$file</a>";
      }
      closedir($dh);
  }
} 
```

# c# - 获取导致绑定的控件

> ID：15486855
> 
> 赞同：0
> 
> 时间：2013-03-18T21:00:54.827
> 
> 标签：c#, wpf, xaml, data-binding

在 WPF 上，我有一个窗口，其中一个或多个文本框绑定到同一属性。

在我的`Set()`功能上，我希望能够知道是哪个控件导致了绑定。

我想知道这个绑定是从哪个控件引发的，以便在验证为假时强制焦点停留在这个控件中。

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:10:20.513

您可以在 xaml 中命名每个文本框，然后在文本框上设置一个事件以检查它何时更改，像这样吗？

```
<TextBox Mame="textBox1" TextChanged="OnTextChanged"/> 
```

这样你会得到一个事件调用，你可以在后面的代码中的那个事件调用中做任何你想做的事情，就像这样。

```
 private void OnTextChanged(object sender, RoutedEventArgs e)
    {
        var textbox= sender as TextBox;
        if(textbox.Name=="textBox1")
            //Do Something

    } 
```

# r - 导出出生日期 = 2 月 29 日的年龄

> ID：15486856
> 
> 赞同：7
> 
> 时间：2013-03-18T21:00:54.997
> 
> 标签：r

我正在寻找一种方法来得出年龄，以准确处理出生日期 = 2 月 29 日。我尝试使用包装`new_interval`上的功能 `lubridate`，但是对于 2004 年 2 月 29 日出生的孩子，这将返回 2006 年 2 月 28 日的 2 岁年龄。孩子将于 2006 年 3 月 1 日满 2 岁。
我也尝试过使用该`decimal_date`函数，但是当 date = 01-Jan-2006 时出现错误。

我正在使用 R 版本 2.15.3 (2013-03-01)——“安全毯”
这是我的代码：

```
library (lubridate)

MyTable <- data.frame(Eval.Date = c(as.Date("2006-01-01"), 
                                    as.Date(0:5, origin = "2006-02-26")),
                      Birth.Date = as.Date("2004-02-29"))

MyTable$Age <- floor(new_interval(MyTable$Birth.Date, MyTable$Eval.Date) / 
                     duration(num = 1, units = "years"))

MyTable$DecDate <- decimal_date(MyTable$Eval.Date)

MyTable[,c("Birth.Date","Eval.Date","Age","DecDate")] 
```

输出：

```
 Birth.Date  Eval.Date Age  DecDate
1 2004-02-29 2006-01-01   1      NaN
2 2004-02-29 2006-02-26   1 2006.153
3 2004-02-29 2006-02-27   1 2006.156
4 2004-02-29 2006-02-28   2 2006.159
5 2004-02-29 2006-03-01   2 2006.162
6 2004-02-29 2006-03-02   2 2006.164
7 2004-02-29 2006-03-03   2 2006.167 
```

帮助`decimal_date`或年龄计算将不胜感激。
谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T21:11:43.213

使用蛮力：

```
library(lubridate)

age <- function(ED, BD) {
    year(ED) - year(BD) - 1 +
    (month(ED) > month(BD) | 
       (month(ED) == month(BD) & day(ED) >= day(BD)))
}

transform(MyTable, age = age(Eval.Date, Birth.Date))
#    Eval.Date Birth.Date age
# 1 2006-01-01 2004-02-29   1
# 2 2006-02-26 2004-02-29   1
# 3 2006-02-27 2004-02-29   1
# 4 2006-02-28 2004-02-29   1
# 5 2006-03-01 2004-02-29   2
# 6 2006-03-02 2004-02-29   2
# 7 2006-03-03 2004-02-29   2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-21T02:04:38.327

Garrett Grolemund 于 2014 年 12 月 22 日在 CRAN 上发布的 lubridate 新版本 1.3.3 版已修复此错误。

尝试：

```
install.packages("lubridate")  
library(lubridate)

MyTable <- 
  data.frame(Eval.Date = c(as.Date("2006-01-01"), 
                           as.Date(0:1, origin = "2006-02-28"),
                           as.Date(0:2, origin = "2008-02-28")),
             Birth.Date = as.Date("2004-02-29"))

MyTable$Eval.Date.dec <- decimal_date(MyTable$Eval.Date)
MyTable$Birth.Date.dec <- decimal_date(MyTable$Birth.Date)

MyTable$Age <- 
  floor(MyTable$Eval.Date.dec - MyTable$Birth.Date.dec)

MyTable[, c("Birth.Date", "Eval.Date", "Age", 
            "Birth.Date.dec", "Eval.Date.dec")] 
```

输出：

```
 Birth.Date  Eval.Date Age Birth.Date.dec Eval.Date.dec  
1 2004-02-29 2006-01-01   1       2004.161      2006.000  
2 2004-02-29 2006-02-28   1       2004.161      2006.159  
3 2004-02-29 2006-03-01   2       2004.161      2006.162  
4 2004-02-29 2008-02-28   3       2004.161      2008.158  
5 2004-02-29 2008-02-29   4       2004.161      2008.161  
6 2004-02-29 2008-03-01   4       2004.161      2008.164 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T22:15:27.220

请注意，该错误`decimal_date`现已修复，请参阅[https://github.com/hadley/lubridate/issues/153](https://github.com/hadley/lubridate/issues/153)

# c# - 从 DataGridView 绘制饼图，列名称为系列

> ID：15486862
> 
> 赞同：2
> 
> 时间：2013-03-18T21:01:23.957
> 
> 标签：c#, datagridview, charts, legend, pie-chart

我在 C# 代码中有一个 datagridview“regionVolumeTable”和一个图表对象“pieChart”，datagridview 对象中有一行数据，布局如下

```
DATE   |  NY   |   MA  | CA   | FL  
3/1/13 |  100  |  120  | 150  | 200 
```

我正在努力使用 ("NY", "MA", "CA", "FL") 作为图例饼图和row[1]、column[1]、[2]、[3]、[4]（100、120、150、200）作为绘制饼图的值。

我知道我需要对 row[1] 中的 column[1...4] 求和以获得总和，然后划分每个扇区以获得要绘制的度数。

到目前为止，我有：

```
for (int colindex = 1; colindex < 5; colindex++)
{
   pieChart.Series.Add((string)regionVolumeTable.Columns[colindex].Name);

} 
```

而且我不知道如何继续完成以获取分配的值以绘制饼图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-27T10:07:15.637

对于`Pie`图表，您只能拥有一个`Series`. `DataPoints`为每个数据值添加一个：

```
Series s = pieChart.Series.Add("pie");
s.ChartType = SeriesChartType.Pie;
s.IsValueShownAsLabel = true;
for (int colindex = 1; colindex < regionVolumeTable.Columns.Count; colindex++)
{
    s.Points.AddXY(regionVolumeTable.Columns[colindex].HeaderText,
                   regionVolumeTable[colindex, 0].Value);
} 
```

[![在此处输入图像描述](../Images/121ec1abca389f5f7ff85fb2f2d9416c.png)](https://i.stack.imgur.com/DSC91.png)

请注意，图表**看起来**好像包含多个`Series`; 但在`Pie`图表中，每个**`DataPoint`**都显示在`Legend`！

# excel - 当 Vlookup 产生结果时，匹配索引得到 #n/a

> ID：15486866
> 
> 赞同：0
> 
> 时间：2013-03-18T21:01:41.610
> 
> 标签：excel, excel-formula

我可以`vlookup`在某事上运行并得到答案。当我将它作为*索引/匹配*运行时，我得到`#N/A`

我正在做一个日期的索引。我去看看日期是否相等，而它们不是。我不知道如何按摩日期以使它们匹配？它们看起来完全一样。我试图将它们格式化完全相同但无济于事。

有人可以给我建议吗？我已经尝试添加`+0`，`B26`但没有奏效。

```
=INDEX('sheet2'!B13:B20,MATCH(B26,'sheet2'!D13:D20,0)) 
```

为什么我工作正常时要切换到*索引/匹配*`vlookup`？因为我正在搜索的日期将在一年中的同一个月，但不是确切的日期。我想我会使用*索引/匹配*来最终找到月份/年份并以这种方式提取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:48:04.400

您可以创建一个新列，其中包含由部分日期和 MATCH 组成的字符串。您可能没有使用 VLOOKUP 并将最后一个参数设置为“false”，因此它会为您提供最接近的结果，而不是完全匹配，并且当您切换到索引/匹配时，它不再找到最接近的值。

例如，您可以让列（比如说 E）包含

```
=YEAR(B13)&"-"&MONTH(B13) 
```

然后使用：

```
=INDEX('sheet2'!B13:B20,MATCH(YEAR(B26)&"-"&MONTH(B26),'sheet2'!E13:E20,0)) 
```

# java - JBoss 上同一应用程序的两个实例抛出此异常： java.lang.Exception: Port 8083 already in use

> ID：15486871
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:02:08.943
> 
> 标签：java, exception, jboss, axis, i2b2

在 Windows Server 2008 机器上，我试图运行同一应用程序的两个实例。此应用程序 (i2b2) 正在使用 Apache Axis 2 Web 服务。JAX-WS Web 服务在端口 9090 上运行，并在端口 8083 上调用 JBoss 中的应用程序源代码。我制作了应用程序代码的完整副本（其中包括 Apache Axis 2 提取的 war 文件）以避免混淆，并且在 {jboss 文件夹}\server\default\deploy\jboss-webdeployer\server.xml 中将第二个实例上 Web 服务的端口连接从 9090 更改为 9091。

我可能会以错误的方式解决这个问题。我不太关心在不同的端口上运行，我只需要有两个实例。因此，如果复制应用程序编译的源代码并切换端口不是解决此问题的最佳方法，如果您有不同的想法，请告诉我。

```
<Connector port="9091" address="${jboss.bind.address}"    
     maxThreads="250" maxHttpHeaderSize="8192"
     emptySessionPath="true" protocol="HTTP/1.1"
     enableLookups="false" redirectPort="8443" acceptCount="100"
     connectionTimeout="20000" disableUploadTimeout="true" /> 
```

启动 JBoss 后，使用 JBoss bin 文件夹中的此命令，我得到以下异常。查看我发现引用端口 8083 的位置的更多详细信息。

```
run -b 0.0.0.0 > debug.txt 
```

**例外：**

```
14:39:04,011 INFO  [Server] Starting JBoss (MX MicroKernel)...
14:39:04,011 INFO  [Server] Release ID: JBoss [Trinity] 4.2.2.GA (build: SVNTag=JBoss_4_2_2_GA date=200710221139)
14:39:04,011 INFO  [Server] Home Dir: C:\i2b2\jboss-4.2.2.GA - QA
14:39:04,011 INFO  [Server] Home URL: file:/C:/i2b2/jboss-4.2.2.GA - QA/
14:39:04,011 INFO  [Server] Patch URL: null
14:39:04,011 INFO  [Server] Server Name: default
14:39:04,011 INFO  [Server] Server Home Dir: C:\i2b2\jboss-4.2.2.GA - QA\server\default
14:39:04,011 INFO  [Server] Server Home URL: file:/C:/i2b2/jboss-4.2.2.GA - QA/server/default/
14:39:04,011 INFO  [Server] Server Log Dir: C:\i2b2\jboss-4.2.2.GA - QA\server\default\log
14:39:04,011 INFO  [Server] Server Temp Dir: C:\i2b2\jboss-4.2.2.GA - QA\server\default\tmp
14:39:04,011 INFO  [Server] Root Deployment Filename: jboss-service.xml
14:39:04,395 INFO  [ServerInfo] Java version: 1.6.0_26,Sun Microsystems Inc.
14:39:04,395 INFO  [ServerInfo] Java VM: Java HotSpot(TM) 64-Bit Server VM 20.1-b02,Sun Microsystems Inc.
14:39:04,396 INFO  [ServerInfo] OS-System: Windows Server 2008 6.0,amd64
14:39:06,280 INFO  [Server] Core system initialized
14:39:07,778 INFO  [WebService] Using RMI server codebase: http://dev-himci2b2:8083/
14:39:07,779 INFO  [Log4jService$URLWatchTimerTask] Configuring from URL: resource:jboss-log4j.xml
14:39:07,893 WARN  [ServiceController] Problem starting service jboss:service=WebService
java.lang.Exception: Port 8083 already in use.
    at org.jboss.web.WebServer.start(WebServer.java:233)
    at org.jboss.web.WebService.startService(WebService.java:322)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
    at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
    at $Proxy0.start(Unknown Source)
    at org.jboss.system.ServiceController.start(ServiceController.java:417)
    at org.jboss.system.ServiceController.start(ServiceController.java:435)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy4.start(Unknown Source)
    at org.jboss.deployment.SARDeployer.start(SARDeployer.java:302)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:766)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy5.deploy(Unknown Source)
    at org.jboss.system.server.ServerImpl.doStart(ServerImpl.java:482)
    at org.jboss.system.server.ServerImpl.start(ServerImpl.java:362)
    at org.jboss.Main.boot(Main.java:200)
    at org.jboss.Main$1.run(Main.java:508)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.BindException: Address already in use: JVM_Bind
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:383)
    at java.net.ServerSocket.bind(ServerSocket.java:328)
    at java.net.ServerSocket.<init>(ServerSocket.java:194)
    at org.jboss.web.WebServer.start(WebServer.java:226)
    ... 50 more
14:39:07,919 WARN  [ServiceController] Problem starting service jboss:service=Naming
java.rmi.server.ExportException: Port already in use: 1098; nested exception is: 
    java.net.BindException: Address already in use: JVM_Bind
    at sun.rmi.transport.tcp.TCPTransport.listen(TCPTransport.java:310)
    at sun.rmi.transport.tcp.TCPTransport.exportObject(TCPTransport.java:218)
    at sun.rmi.transport.tcp.TCPEndpoint.exportObject(TCPEndpoint.java:393) 
```

**这是我发现引用端口 8083 的地方。我尝试将其更改为端口 8084，但它似乎仍在寻找端口 8083。**

```
jboss-4.2.2.GA\server\all\conf\jboss-service.xml 
```

**jboss-service.xml 的源代码：**

```
 <!-- ==================================================================== -->
   <!-- Class Loading                                                        -->
   <!-- ==================================================================== -->

   <!-- A mini webserver used for dynamic and class and resource loading --> 
   <mbean code="org.jboss.web.WebService"
      name="jboss:service=WebService">
      <!-- The Bind address and Port -->
      <attribute name="BindAddress">${jboss.bind.address}</attribute>      
      <attribute name="Port">8083</attribute>
      <!--  The address to use for the host portion of the RMI codebase URL -->
      <attribute name="Host">${java.rmi.server.hostname}</attribute>
      <!-- Should non-EJB .class files be downloadable -->
      <attribute name="DownloadServerClasses">true</attribute>
      <!-- Should resources other than .class files be downloadable. Both
         DownloadServerClasses and DownloadResources must be true for resources
         to be downloadable. This is false by default because its generally a
         bad idea as server configuration files that container security
         information can be accessed.
       -->
      <attribute name="DownloadResources">false</attribute>

      <!-- Use the default thread pool for dynamic class loading -->
      <depends optional-attribute-name="ThreadPool"
         proxy-type="attribute">jboss.system:service=ThreadPool</depends>
   </mbean> 
```

# 编辑@ 2013 年 3 月 18 日下午 4:20：

**将此端口更新为 8084：**

```
\jboss-4.2.2.GA\server\default\conf\jboss-service.xml 
```

**源代码：**

```
 <!-- ==================================================================== -->
   <!-- Class Loading                                                        -->
   <!-- ==================================================================== -->

   <!-- A mini webserver used for dynamic and class and resource loading --> 
   <mbean code="org.jboss.web.WebService"
      name="jboss:service=WebService">
      <!-- The Bind address and Port -->
      <attribute name="BindAddress">${jboss.bind.address}</attribute>      
      <attribute name="Port">8084</attribute>
      <!--  The address to use for the host portion of the RMI codebase URL -->
      <attribute name="Host">${java.rmi.server.hostname}</attribute>
      <!-- Should non-EJB .class files be downloadable -->
      <attribute name="DownloadServerClasses">true</attribute>
      <!-- Should resources other than .class files be downloadable. Both
         DownloadServerClasses and DownloadResources must be true for resources
         to be downloadable. This is false by default because its generally a
         bad idea as server configuration files that container security
         information can be accessed.
       -->
      <attribute name="DownloadResources">false</attribute>

      <!-- Use the default thread pool for dynamic class loading -->
      <depends optional-attribute-name="ThreadPool"
         proxy-type="attribute">jboss.system:service=ThreadPool</depends>
   </mbean> 
```

**现在我得到了这个例外：**

```
16:19:49,473 INFO  [Server] Starting JBoss (MX MicroKernel)...
16:19:49,475 INFO  [Server] Release ID: JBoss [Trinity] 4.2.2.GA (build: SVNTag=JBoss_4_2_2_GA date=200710221139)
16:19:49,475 INFO  [Server] Home Dir: C:\i2b2\jboss-4.2.2.GA - QA
16:19:49,475 INFO  [Server] Home URL: file:/C:/i2b2/jboss-4.2.2.GA - QA/
16:19:49,476 INFO  [Server] Patch URL: null
16:19:49,476 INFO  [Server] Server Name: default
16:19:49,476 INFO  [Server] Server Home Dir: C:\i2b2\jboss-4.2.2.GA - QA\server\default
16:19:49,476 INFO  [Server] Server Home URL: file:/C:/i2b2/jboss-4.2.2.GA - QA/server/default/
16:19:49,476 INFO  [Server] Server Log Dir: C:\i2b2\jboss-4.2.2.GA - QA\server\default\log
16:19:49,476 INFO  [Server] Server Temp Dir: C:\i2b2\jboss-4.2.2.GA - QA\server\default\tmp
16:19:49,477 INFO  [Server] Root Deployment Filename: jboss-service.xml
16:19:49,642 INFO  [ServerInfo] Java version: 1.6.0_26,Sun Microsystems Inc.
16:19:49,643 INFO  [ServerInfo] Java VM: Java HotSpot(TM) 64-Bit Server VM 20.1-b02,Sun Microsystems Inc.
16:19:49,643 INFO  [ServerInfo] OS-System: Windows Server 2008 6.0,amd64
16:19:49,871 INFO  [Server] Core system initialized
16:19:51,393 INFO  [WebService] Using RMI server codebase: http://dev-himci2b2:8084/
16:19:51,395 INFO  [Log4jService$URLWatchTimerTask] Configuring from URL: resource:jboss-log4j.xml
16:19:51,546 WARN  [ServiceController] Problem starting service jboss:service=Naming
java.rmi.server.ExportException: Port already in use: 1098; nested exception is: 
    java.net.BindException: Address already in use: JVM_Bind
    at sun.rmi.transport.tcp.TCPTransport.listen(TCPTransport.java:310)
    at sun.rmi.transport.tcp.TCPTransport.exportObject(TCPTransport.java:218)
    at sun.rmi.transport.tcp.TCPEndpoint.exportObject(TCPEndpoint.java:393)
    at sun.rmi.transport.LiveRef.exportObject(LiveRef.java:129)
    at sun.rmi.server.UnicastServerRef.exportObject(UnicastServerRef.java:190)
    at java.rmi.server.UnicastRemoteObject.exportObject(UnicastRemoteObject.java:293)
    at java.rmi.server.UnicastRemoteObject.exportObject(UnicastRemoteObject.java:256)
    at org.jnp.server.Main.initJnpInvoker(Main.java:354)
    at org.jnp.server.Main.start(Main.java:316)
    at org.jboss.naming.NamingService.startService(NamingService.java:284)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
    at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
    at $Proxy0.start(Unknown Source)
    at org.jboss.system.ServiceController.start(ServiceController.java:417)
    at org.jboss.system.ServiceController.start(ServiceController.java:435)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy4.start(Unknown Source)
    at org.jboss.deployment.SARDeployer.start(SARDeployer.java:302)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:766)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy5.deploy(Unknown Source)
    at org.jboss.system.server.ServerImpl.doStart(ServerImpl.java:482)
    at org.jboss.system.server.ServerImpl.start(ServerImpl.java:362)
    at org.jboss.Main.boot(Main.java:200)
    at org.jboss.Main$1.run(Main.java:508)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.BindException: Address already in use: JVM_Bind
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:383)
    at java.net.ServerSocket.bind(ServerSocket.java:328)
    at java.net.ServerSocket.<init>(ServerSocket.java:194)
    at org.jboss.net.sockets.DefaultSocketFactory.createServerSocket(DefaultSocketFactory.java:120)
    at org.jboss.net.sockets.DefaultSocketFactory.createServerSocket(DefaultSocketFactory.java:95)
    at sun.rmi.transport.tcp.TCPEndpoint.newServerSocket(TCPEndpoint.java:649)
    at sun.rmi.transport.tcp.TCPTransport.listen(TCPTransport.java:299)
    ... 61 more
16:19:51,594 INFO  [TransactionManagerService] JBossTS Transaction Service (JTA version) - JBoss Inc.
16:19:51,594 INFO  [TransactionManagerService] Setting up property manager MBean and JMX layer 
```

# 编辑 2013 年 3 月 18 日下午 6:35：

这些是最好的指示。 [http://darrellgrainger.blogspot.com/2010/02/changeing-ports-in-jboss.html](http://darrellgrainger.blogspot.com/2010/02/changing-ports-in-jboss.html) ...

`-->`好消息...是我能够通过移动XML 标记之前取消注释掉 xml 文件中的 JBoss port-01 部分。然后我制作了 jboss\default\ 文件夹的副本并将其重命名`default-qa`。所以 JBoss 的第二个实例现在应该使用端口 8183。默认情况下，文件夹的 port-default`default`仍应绑定到端口 8083。并通过从 jboss bin 文件夹中执行此操作来启动 JBoss 的第二个实例`run -b 0.0.0.0 -c default-qa > debug-qa.txt`。那工作得很好。

坏消息...应用程序代码具有 ${jboss.home}/server/default/deploy/ 硬编码，并且 Spring Web Framework *.properties 文件中的 Apache Axis 2 端口设置为 9090。由于 JBoss 的第二个实例依赖于 Apache Axis 9091，我想我现在需要制作另一个源代码副本并使用端口 9091，并且在第二个实例中保持相同的文件夹结构，但移动根文件夹别的地方。然后重新编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:06:10.373

如果您想在同一台机器上运行两个 JBoss 实例，您应该更改端口绑定（参见例如 JBoss 4.X[如何在一台机器上运行多个 JBoss 实例？](https://stackoverflow.com/questions/3021397/how-to-run-multiple-instances-of-jboss-in-a-one-single-machine0)。请注意，对于每个 JBoss 版本，此配置不同（[看到这个](http://www.eeblog.org/index.php/jboss-run-2-instances-in-the-same-environment-and-avoid-port-conflicts/)）。

也可能发生某些其他程序占用所需端口的情况。两个最常见的违规者是 MS Outlook 和 Skype。要检查此运行：

```
netstat -a -o 
```

这会给你一个被占用端口和进程ID的列表。您可以在任务管理器中检查哪个程序正在使用给定端口，并可能将其杀死。

# service - 在集成服务包 (.dtsx) 中使用类似 $(ProjectDir) 的变量

> ID：15486873
> 
> 赞同：0
> 
> 时间：2013-03-18T21:02:11.463
> 
> 标签：service, ssis, package, integration

这可能吗？

我有一个需要复制到三个 3 不同服务器的包。每个服务器用于不同的测试环境。所有三台服务器都具有相同的目录布局。布局如下： * *\SERVER\ConfigFiles** <- 这里是 .dtsConfig 文件。* *\SERVER\Packages** <- 这里是 .dtsx 文件。

我希望能够使用复制到三个 3 个不同服务器上的相同包而无需任何修改。3 个服务器之间的唯一区别是**.dtsConfig**文件中的内容。配置文件包含每个环境的 excel、日志和 SQL 服务器连接的目录。

例如。假设我有一个名为**Cars.dtsx**的包。此软件包在所有三台服务器中完全相同。包文件指向**ConfigFiles文件夹中的****.dtsConfig**文件（在所有三台服务器上都可以找到）。我想要一种方法让包指向每个服务器上的**ConfigFiles\Cars.dtsConfig**文件，但我想这样做而不必在目录中提供服务器的名称。

 ****我尝试使用的方法是使用**“$(ProjectDir)..\ConfigFiles\Cars.dtsConfig”**，如果我通过 .sln 文件而不是 .dtsx 文件运行包，这似乎可以工作。

我希望这不会太混乱。如果您需要更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:53:25.833

除非我遗漏了一些细微差别，否则您不需要做任何特别的事情。

您的包将有一个硬编码引用，`D:\ConfigFiles\Cars.dtsConfig`无论该包是从 ServerA、ServerB 还是 ServerZ 运行都无关紧要（只要您在这些服务器上具有相同的文件结构）。

凭借您提出的问题，您是否正在经历不同的事情？****

# html - 内容：属性（）；不能在 IE 10 中工作

> ID：15486879
> 
> 赞同：0
> 
> 时间：2013-03-18T21:02:19.507
> 
> 标签：html, css, internet-explorer

出于某种原因，IE 没有得到内容： attr(data-title) 如下设置。虽然适用于 FF 和 Chrome。

如何解决这个问题？

```
<a href="#" class="nav-roll">
            <span data-title="About">About</span> 
        </a>

    .nav-roll span:after {
    background: none repeat scroll 0 0 #0198cd;
    color: #FFF;
    content: attr(data-title);
    display: block;
    padding: 0 2px;
    position: absolute;
    left: 0;
    top: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:07:22.717

您尚未`<!DOCTYPE html>`在 HTML 文件的顶部添加 a，从而强制 IE 进入 Quirks 模式。IEQuirks 根本不支持`:after`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-23T10:18:52.840

我只是有一个类似的问题，但是是一个`<button>`元素而不是一个锚。事实证明这与最终无关，`attr(data-*)`对我来说，解决方法是添加`overflow: visible`到按钮本身。

把它留在这里，以防它将来对任何人有帮助。

# java - Java Map：键上的别名

> ID：15486884
> 
> 赞同：1
> 
> 时间：2013-03-18T21:02:40.137
> 
> 标签：java, map, key, alias

是否存在可以在现有键上添加别名的映射实现

```
SuperMap map = .....;
map.put("key1" , object1);
map.addAlias("key1" , "aliaskey"); // <== create alias
Object o = map.get("aliaskey"); // equals object1 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:38:45.023

不知道你想用它做什么，或者它是否值得麻烦，但到目前为止我在这个线程中看到的实现都存在别名与它的别名键断开连接的问题。例如，如果你说：

```
SuperMap<String, String> sm = new SuperMap<String, String>();
sm.put("Elvis", "Presley");

sm.addAlias("Priscilla", "Elvis");
System.out.println(sm.get("Elvis"));
System.out.println(sm.get("Priscilla"));

sm.put("Elvis", "Costello");
System.out.println(sm.get("Elvis"));
System.out.println(sm.get("Priscilla")); 
```

你会得到：

```
Presley
Presley
Costello
Presley 
```

*（注意：这是[SuperMap](https://stackoverflow.com/a/15486966/27358)的原始实现，不是编辑版本。）*

如果你想要一个真正的别名——如果你想得到`Presley, Presley, Costello, Costello`——你将需要一些更复杂的东西。

下面的代码未经测试（整个企业似乎有点疯狂），但它应该可以工作：

```
public class AliasMap<K, V> extends AbstractMap<K, V>
{
    private final Map<K, V> backingMap;
    private final Map<K, K> aliasToRealKey;

    public AliasMap ()
    {
        this( new HashMap<K, V>() );
    }

    public AliasMap ( Map<K, V> backingMap )
    {
        this.backingMap = backingMap;
        aliasToRealKey = new HashMap<K, K>();
    }

    @Override
    public Set<Entry<K, V>> entrySet ()
    {
        return new AliasAwareEntrySet<K, V>( aliasToRealKey, backingMap );
    }

    @Override
    public V put ( K k, V v )
    {
        if ( aliasToRealKey.containsKey( k ) )
        {
            throw new IllegalArgumentException( "An alias '" + k + "' already exists in the map" );
        }
        return backingMap.put( k, v );
    }

    @Override
    public V get ( Object o )
    {
        V v = backingMap.get( o );
        if ( v == null )
        {
            K realKey = aliasToRealKey.get( o );
            if ( realKey == null )
            {
                return null;
            }
            return backingMap.get( realKey );
        }
        return v;
    }

    public void alias ( K realKey, K alias )
    {
        if ( backingMap.containsKey( alias ) )
        {
            throw new IllegalArgumentException( "The key '" + alias + "' already exists in the map" );
        }
        aliasToRealKey.put( alias, realKey );
    }

    private static class AliasAwareEntrySet<K, V> extends AbstractSet<Entry<K, V>>
    {
        private Map<K, K> aliasToRealKey;
        private Map<K, V> backingMap;

        public AliasAwareEntrySet ( Map<K, K> aliasToRealKey, final Map<K, V> backingMap )
        {
            this.aliasToRealKey = aliasToRealKey;
            this.backingMap = backingMap;
        }

        @Override
        public Iterator<Entry<K, V>> iterator ()
        {
            return new AliasAwareEntryIterator<K, V>( backingMap, aliasToRealKey );
        }

        @Override
        public int size ()
        {
            return backingMap.size() + aliasToRealKey.size();
        }

    }

    private static class AliasAwareEntryIterator<K, V> implements Iterator<Entry<K, V>>
    {
        Set<Entry<K, V>> realEntries;
        Set<K> aliasKeys;
        Iterator<Entry<K, V>> realIterator;
        Iterator<K> aliasIterator;

        boolean isRealEntry = true;
        private Map<K, V> backingMap;
        private Map<K, K> aliasToRealKey;

        public AliasAwareEntryIterator ( final Map<K, V> backingMap, Map<K, K> aliasToRealKey )
        {
            this.realEntries = backingMap.entrySet();
            this.aliasKeys = aliasToRealKey.keySet();

            realIterator = realEntries.iterator();
            aliasIterator = aliasKeys.iterator();
            this.backingMap = backingMap;
            this.aliasToRealKey = aliasToRealKey;
        }

        public boolean hasNext ()
        {
            return realIterator.hasNext() || aliasIterator.hasNext();
        }

        public Entry<K, V> next ()
        {
            if ( realIterator.hasNext() )
            {
                return realIterator.next();
            }
            isRealEntry = false;

            final K alias = aliasIterator.next();
            final K realKey = aliasToRealKey.get( alias );
            return new AliasAwareEntry( alias, realKey );
        }

        public void remove ()
        {
            if ( isRealEntry )
            {
                realIterator.remove();
            }
            else
            {
                aliasIterator.remove();
            }
        }

        private class AliasAwareEntry implements Entry<K, V>
        {

            private final K alias;
            private final K realKey;

            public AliasAwareEntry ( K alias, K realKey )
            {
                this.alias = alias;
                this.realKey = realKey;
            }

            public K getKey ()
            {
                return alias;
            }

            public V getValue ()
            {
                return backingMap.get( realKey );
            }

            public V setValue ( V v )
            {
                return backingMap.put( realKey, v );
            }
        }
    }

    public static void main ( String[] args )
    {
        AliasMap<String, String> sm = new AliasMap<String, String>();
        sm.put( "Elvis", "Presley" );

        sm.alias( "Elvis", "Priscilla" );
        System.out.println( sm.get( "Elvis" ) );
        System.out.println( sm.get( "Priscilla" ) );

        sm.put( "Elvis", "Costello" );
        System.out.println( sm.get( "Elvis" ) );
        System.out.println( sm.get( "Priscilla" ) );

        for ( String s : sm.keySet() )
        {
            System.out.println(s);
        }

        for ( Iterator<Entry<String, String>> iterator = sm.entrySet().iterator(); iterator.hasNext(); )
        {
            Entry<String, String> entry = iterator.next();
            System.out.println( entry.getKey() + " : " + entry.getValue() );
            if ( "Priscilla".equals( entry.getKey() ) )
            {
                iterator.remove();
            }
        }

        for ( String s : sm.keySet() )
        {
            System.out.println(s);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T21:06:37.327

您可以使别名只是指向相同值的另一个键条目。

```
map.put("key1", object1);
map.put("aliaskey", map.get("key1")); // <== create alias

Object o = map.get("aliaskey"); // equals object1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T21:46:11.170

到目前为止，@DavidMoles 是唯一一个为您提供真正混叠的答案的人。所有其他人都只是制作副本，这意味着如果您使用“别名”键更新条目，则不会更新“原始”键。

然而，这一切对我来说似乎都是一个糟糕的设计。映射中的多个键指向同一个键不是映射的预期语义。相反，我建议您在地图*之外*进行别名映射，并创建一个新类型以强制您在进行查找之前始终正确地取消别名：

```
// AliasTest.java

import java.util.*;

public class AliasTest {

  public static void main(String[] args) {
    Map<Aliaser<String>.Key, Integer> map = new HashMap<Aliaser<String>.Key, Integer>();
    Aliaser<String> aliaser = new Aliaser<String>();
    map.put(aliaser.addKey("A"), 1);
    map.put(aliaser.addKey("B"), 2);
    map.put(aliaser.addKey("C"), 3);
    aliaser.addAlias("A", "X");
    map.put(aliaser.lookup("X"), 5);
    System.out.println(map.get(aliaser.lookup("A")));
  }

}

// Aliaser.java

import java.util.*;

public class Aliaser<T> {

  public class Key { }

  private Map<T, Key> aliases = new HashMap<T, Key>();

  public Key addKey(T alias) {
    Key key = new Key();
    aliases.put(alias, key);
    return key;
  }

  public void addAlias(T orig, T alias) {
    aliases.put(alias, aliases.get(orig));
  }

  public Key lookup(T alias) {
    return aliases.get(alias);
  }

} 
```

请注意地图如何具有 type`Map<Aliaser<String>.Key, Integer>`而不是`Map<String, Integer>`. 这有助于我们让 Java 编译器断言（通过类型检查）我们总是`String`在进行映射查找之前正确地取消所有键的别名。

如果您使用的是 Scala，则可以使用隐式转换自动执行所有`String`->`Aliaser<String>.Key`转换，但在 Java 中，您只能手动进行转换。不过，您始终可以声明一些本地方法以使其不那么冗长，或者只使用比我在示例中使用的更短的变量/方法名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T21:07:51.460

我不确定这样的实现是否已经存在，但请随意开发自己的：

```
public class SuperMap<K, V> extends HashMap<K, V> {

    private final HashMap<K, K> aliases = new HashMap<K, K>();

    public void addAlias(final K alias, final K key) {
        aliases.put(alias, key);
    }

    @Override
    public V get(final Object key) {
        if (keySet().contains(key)) {
            return super.get(key);
        } else if (aliases.keySet().contains(key)) {
            return super.get(aliases.get(key));
        }
        return null;
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T21:08:37.637

只需使用不同的键将值放入映射中：

```
Map<String, Integer> map = new HashMap<>();
Integer value = 42;
map.put("firstKey", value);
map.put("secondKey", value);
System.out.println(map.get("firstKey") == map.get("secondKey"));

> true 
```

# html - CSS 面包屑帮助格式化字体

> ID：15486885
> 
> 赞同：-1
> 
> 时间：2013-03-18T21:02:46.707
> 
> 标签：html, css, web, hyperlink, breadcrumbs

我在同一个 DIV 标签上更改字体颜色装饰等时遇到了一些困难。

我想做的是在我网站的某些页面上进行面包屑导航，我想尽量减少我使用的 Div 的数量，以便更容易维护。

这就是我拥有和想做的事情。

```
 <div id="product-breadcrumbs">
 <div id="breadcrumbs">(Link and color) //   (another link and another color) 
 </div>
 </div> 
```

CSS

```
 #product-breadcrumbs {
position: absolute;
left: 0px;
top: 66px;
width: 1024px;
height: 34px;
background-color: #E7E5F2;
 }

 #breadcrumbs {
position: relative;
padding-top: 7px;
padding-bottom: 7px;
text-align: left;
text-indent: 140px;
font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
font-size: 14px;
font-weight: bold;
color: #09C;
text-decoration: none;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:08:45.747

编辑：重读你的问题（你是对的，我确实读错了）。您可以通过为您的链接提供课程来实现这一点，不是吗？

```
 <div id="product-breadcrumbs">
      <div id="breadcrumbs">
           <a href="#" class="colorOne">A link</a>
           <a href="#" class="colorTwo">Another link</a> 
      </div>
 </div> 
```

使用以下 CSS：

```
 #breadcrumbs a.colorOne {
      color: black;
 }
 #breadcrumbs a.colorTwo {
      color: blue;
 } 
```

# c++ - 为什么我的快速排序仅在数组中的 1 个位置出错？

> ID：15486889
> 
> 赞同：0
> 
> 时间：2013-03-18T21:02:56.247
> 
> 标签：c++, quicksort

我为一个作业实现了快速排序，我已经完成了，但是排序后的数组只有一个地方是错误的。这是输出。

```
Array before QuickSort: 5 99 32 4 1 12 15 8 13 55
Array after QuickSort: 1 5 4 8 12 13 15 32 55 99 
```

**它为除 5 和 4 之外的**所有内容正确排序数组。我用调试器玩了几个小时，无法弄清楚为什么会这样，有人可以帮忙吗？Iv 在下面发布了我的快速排序代码。

```
int main()
{
int quickArray[SIZE] = { 5 ,99, 32, 4, 1, 12, 15 , 8, 13, 55};
int arrStartIndex = 0;
int arrEndIndex =9;

//Code to print array at start
QuickSort(quickArray,arrStartIndex,arrEndIndex);
//Code to print array after sort

return 0
} 
```

..................................................... ……………………………………………………………………………………………………………………………………

```
void QuickSort(int ar2[],int startIndex, int endIndex)
{
//Begin QuickSort
int Q;
if( startIndex < endIndex )
{
    Q =  Partition(ar2,startIndex,endIndex);
    QuickSort(ar2,startIndex,Q-1);
    QuickSort(ar2,Q+1,endIndex);
}
//End QuickSort
} 
```

..................................................... ..................................................

```
int Partition(int ar2[],int P, int R)
{
int x = ar2[R];
int i = P-1;
int temp;

for(int j = P; j <= R-1; j++)
{
    if( ar2[j] < x  )
    {
        i = i +1;
        temp = ar2[i];
        ar2[i] = ar2[j];
        ar2[j] = temp;
    }

    temp = ar2[R];
    ar2[R] = ar2[i+1];
    ar2[i+1] = temp;
}

return (i+1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:46:15.967

我认为这段代码，如果我理解正确的话，将枢轴移动到其最终位置应该在 for 循环之外

```
temp = ar2[R];
ar2[R] = ar2[i+1];
ar2[i+1] = temp; 
```

# c - 在 C 中解析命令行参数

> ID：15486890
> 
> 赞同：0
> 
> 时间：2013-03-18T21:02:56.530
> 
> 标签：c, parsing, command-line, pipe

我正在尝试实现一个程序，该程序接受一个进程，后跟一个由管道命令组成的字符串。如何将命令字符串分隔为{单个命令/任意数量的参数数组}“|” 是分隔不同命令的字符。

例如，如果我输入： pipe ls -lt | 猫 Lebowski | 光盘...

我如何让系统识别这里有三个单独的命令行参数要在不同的管道中表示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:08:37.897

首先，由于管道是一个特殊符号，因此在传递给程序时需要对其进行转义：

```
pipe ls -lt \| cat Lebowski \| cd .. . 
```

在您的主要功能中：

```
main(int argc, char *argv[]) { 
```

包含不同索引处的`argv`所有这些参数（ls、-lt、|、cat...）。例如，`argv[0]`是`ls`，`argv[2]`是`'|'`。`argc`是此类参数的总数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:11:59.810

如果您想自己执行此操作，perreal 的回答非常好。`getopt()`您也可以为此目的使用一个函数，并在此处记录[getopt()](http://linux.die.net/man/3/getopt)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:14:03.877

该`strtok_r()`功能是您的朋友：

```
char **explode(char *s, const char *sep, size_t *outsz)
{
    size_t allocsz = 4;
    size_t sz = 0;
    char **arr = malloc(allocsz * sizeof(*arr));
    if (arr == NULL) {
        *outsz = 0;
        return NULL;
    }

    char *p, *end;
    for (p = srtok_r(s, sep, &end); p; p = strtok_r(NULL, sep, &end)) {
        if (++sz > allocsz) {
            allocsz <<= 1;
            arr = realloc(arr, sizeof(*arr) * allocsz));
            assert(arr != NULL); // sorry
        }
        arr[sz - 1] = strdup(p);
    }

    *outsz = sz;
    return arr;
} 
```

用法：

```
int main()
{
    char sentence[] = "The quick brown fox jumped over the lazy dog.";
    size_t sz;
    char **arr = explode(sentence, " ", &sz);
    int i;
    for (i = 0; i < sz; i++) {
        printf("%s\n", arr[i]);
        free(arr[i]);
    }
    free(arr);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T21:15:58.730

自从 | 是大多数常见 shell 的特殊字符，您需要引用它们（正如其他人所说）。如果您引用双引号内的所有参数，例如

> 管道“ls -lt | cat Lebowski | cd ..”

你可以`argv[1]`用`strtok_r()`.

# .htaccess - .htaccess 重写规则不起作用 - 如何解决？

> ID：15486895
> 
> 赞同：0
> 
> 时间：2013-03-18T21:03:31.707
> 
> 标签：.htaccess

我正在尝试使用 /Drug-Charges/ 的链接将所有内容重定向到简单的 /

我一直在尝试 301 重定向和重写规则，但都没有运气。

```
RewriteCond %{REQUEST_URI} ^/Drug-Charges/(.*) [NC]
RewriteRule ^/Drug-Charges http://www.domain.com/$1 [R=301,L] 
```

我在这里做错了什么？我已经启用了重写引擎和一切。

这是整个顶部：

```
RewriteEngine on
RewriteBase /
RewriteRule ^(.*)\.aspx$ $1.html [R=permanent]
RewriteRule ^Landing-Pages/(.*) County-Resources/$1 [R=permanent]
#RewriteRule ^Practice-Areas/Sex-Crimes/(.*) /$1 [R=permanent]

rewriteRule ^index\.(php|html|htm|asp) http://www.domain.com/ [R=permanent,L] 

RewriteCond %{HTTP_HOST} ^domain.com
RewriteRule (.*) http://www.domain.com/$1 [R=301,L]

RewriteRule ^Drug-Charges/(.*) /%1 [R,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:12:40.627

您的规则中有两个问题

*   `(.*)`in a`RewriteCond`被访问为`%1`，而不是`$1`
*   在 .htaccess 上下文中，从请求 URL 路径中删除前导斜杠

`/Drug-Charges`要从请求 URL 中删除，您只需要

```
RewriteRule ^Drug-Charges/(.*)$ /$1 [R,L] 
```

永远不要在启用的情况下进行测试，有关详细信息`301`，请参阅此答案[提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:19:14.670

最好在不使用`REQUEST_URI`引用的情况下进行这种重定向。

```
RewriteRule ^Drug-Charges/?(.*)? $1[L,NC,R=301] 
```

该规则主要检查请求是否以 开头`Drug-Charges`，以及其后的任何可选内容，并相应地重定向。

请注意，您应该`REQUEST_URI`完全删除该引用。

# asp.net - 非 MVC 项目中的存储库和工作单元模式

> ID：15486910
> 
> 赞同：0
> 
> 时间：2013-03-18T21:04:13.693
> 
> 标签：asp.net, repository-pattern, unit-of-work

我们可以在非 ASP.Net MVC 项目中使用存储库和工作单元模式吗？如果是这样，请告诉我如何在普通的 ASP.NET 项目中实现这个（项目层/结构）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:08:31.737

当然可以和结构相同。我将有一个数据存储库项目、一个模型项目和一个业务逻辑项目。然后，我的 Web 应用程序将与模型和业务层对话。

我在这种类型的应用程序中加入了 AutoMapper 来在模型和数据模型之间进行转换。

然后我会将模型返回到 asp 页面，我也会在那里实现**MVP**。

这是在不了解您的项目或环境的情况下对您的问题的高度了解。

如果您想要更深入的答案，您可能需要给我们更多信息才能继续 OP

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/a25b0ea8-4bf8-4d29-945a-d65daf89c9ea/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/a25b0ea8-4bf8-4d29-945a-d65daf89c9ea/)

[http://www.codeproject.com/Articles/14642/Model-View-Presenter-with-ASP-NET](http://www.codeproject.com/Articles/14642/Model-View-Presenter-with-ASP-NET)

# node.js - 在页面上抓取链接，然后使用 node 和zombie.js 访问和检查每个链接

> ID：15486911
> 
> 赞同：4
> 
> 时间：2013-03-18T21:04:18.220
> 
> 标签：node.js, zombie.js

我正在尝试使用zombie.js在Node中构建一个简单的实用程序来访问页面，查找并打开页面上的所有链接，并确保每个子页面成功返回200。

这是此代码的示例（用 CoffeeScript 编写），爬取 stackoverflow.com 的主页

```
Browser = require('zombie')

browserOpts =
  runScripts: false
  site: 'http://www.stackoverflow.com'

home = new Browser browserOpts

home.visit '/', (e, browser) ->
  questions = browser.queryAll '#question-mini-list .summary h3 a'
  for q in questions
    qUrl = q.getAttribute 'href'
    page = new Browser browserOpts
    page.visit qUrl, (e, browser, statusCode, errors) ->
      console.log "Arrived at page #{browser.window.location} and found " + browser.html().length + " bytes"
      console.log statusCode
      browser.dump()
      return
  return 
```

如果您尝试运行此代码，您会注意到前几个链接已正确加载，并显示页面中的字节数。

但是，在第一批成功的页面加载（其大小似乎是随机的）之后，所有后续页面加载似乎都`visit`过早地执行回调。文档是空的（只是`<html><head></head><body></body></html>`），`statusCode`回调的参数是`undefined`.

我无法解释或弄清楚为什么会这样。任何提示将非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T21:12:39.977

请原谅我的 js 一个咖啡脚本问题

```
var async = require('async');
var Browser = require('zombie');

var browserOpts = {
  runScripts: false,
  site: 'http://www.stackoverflow.com'
};

var home = new Browser(browserOpts);

home.visit('/', function(e, browser) {
  var questions = browser.queryAll('#question-mini-list .summary h3 a');
  async.eachLimit(questions, 3, function (question, cb) {
    var qUrl = question.getAttribute('href');
    var page = new Browser(browserOpts);
    page.visit(qUrl, function(e, browser, statusCode, errors) {
      console.log(("Arrived at page " + browser.window.location + " and found ") + browser.html().length + " bytes");
      console.log(statusCode);
      browser.dump();
      cb(e);
    });
  }, function (err) {
    console.error('OOPS', err);
  });
}); 
```

在这里试试：[http ://runnable.com/UWh05t96qlJ8AAAC](http://runnable.com/UWh05t96qlJ8AAAC)

您一次发出了太多请求，而 stackoverflow 正在阻止您。据我所知，它的截止值是 4。

如果您确实需要来自 stackoverflow 的数据，请使用 api：[https ://api.stackexchange.com/docs](https://api.stackexchange.com/docs)

# z3 - Z3，求解器：在断言堆栈上推送一个空级别，如 smtlib2 中所定义：push(n=1)

> ID：15486913
> 
> 赞同：1
> 
> 时间：2013-03-18T21:04:31.627
> 
> 标签：z3, solver

目前我正在将 Z3 与 Python 一起使用。我想创建一个断言堆栈，我可以在其中推送一个级别并稍后弹出它。它应该与任何其他带有推送和弹出操作的“堆栈”一样工作。因此，SMTLIB2 标准定义了两个函数“push(n)”和“pop(n)”，可选数字为 n。在我的情况下，n 永远是 1。

但是Z3中似乎有一些奇怪的行为。为什么以下代码会导致“索引超出范围”？

```
s = Solver()
s.push()     # expected: one new level on the stack, reality: emtpy stack
s.pop(1)     # expected: stack is empty, reality: exception (index out of bounds) 
```

如果我添加一个断言，Z3 会按预期工作。

```
s = Solver()
s.push()
s.add(True)  # now there is one level on the stack,
s.pop(1)     # pop is successful 
```

即使这样也正确：

```
s = Solver()
s.add(True)
s.push()     # now there is one level on the stack,
s.pop(1)     # pop is successful 
```

问题是，我不知道在我的程序中创建了多少级别和多少断言。有可能根本没有断言，只有一个级别。然后程序会崩溃（或捕获异常）。一种解决方法是添加一些简单的公式，如“True”总是作为第一步，但这看起来很难看。

这是 Z3 中的错误还是这种行为正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:16:52.087

此错误已在`unstable`(working-in-progress) 分支中修复。它将在下一个正式版本中提供。同时，[这里](http://z3.codeplex.com/wikipage?title=Building%20the%20unstable%20%28working-in-progress%29%20branch&referringTitle=Documentation)有一些关于如何编译不稳定分支的说明。该修复程序也可在[codeplex提供的](http://z3.codeplex.com/releases)[每晚构建](http://research.microsoft.com/en-us/um/people/leonardo/blog/2013/02/15/precompiled.html)中使用。

# post - 尝试隐藏页面帖子时出错

> ID：15486914
> 
> 赞同：1
> 
> 时间：2013-03-18T21:04:36.090
> 
> 标签：post, hide, facebook-page

我试图通过将 is_hidden 设置为 true 来隐藏页面帖子。我发布到这个网址：

```
https://graph.facebook.com/[post ID]?is_hidden=true&access_token=[page access token] 
```

我收到此错误消息：

```
(#100) Cannot hide/unhide story posted by post itself 
```

它到底想告诉我什么？我可以使用 Facebook 的 GUI 隐藏帖子，所以我知道它可以被隐藏。有没有人有隐藏页面帖子的工作示例？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:28:26.520

我发现我使用了错误的字段。而不是 is_hidden，我需要使用 timeline_visibility 来解决这个问题。

如果您将timeline_visibility 设置为“隐藏”，则帖子不会出现在页面的时间线中。它仍然出现在新闻源中，这是我想要的行为。

此外，如果我在发布帖子的同时设置时间线可见性，它似乎不起作用。必须在帖子发布后设置。

我在 Facebook 的文档中找不到 timeline_visibility 字段，所以我不知道它是否受支持。

# amazon-s3 - 如何将我的自定义 AMI 保存到 S3？

> ID：15486915
> 
> 赞同：1
> 
> 时间：2013-03-18T21:04:39.680
> 
> 标签：amazon-s3, amazon-ec2, amazon-ami

我有快速启动一个 Ubuntu 实例并在其中安装一些软件。然后我从中创建了一个 AMI。如何将我自己的 AMI 保存到 S3 存储桶以供重复使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:07:37.570

从它创建 AMI 后，它会存储在 s3 中。但是，您无法访问或下载此 AMI。

您只能导出最初导入的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:52:20.593

原来的问题似乎有误会。您不需要“将 AMI 保存到 S3 存储桶以供重复使用”。如果您创建了 AMI，那么您只需使用该映像启动新实例即可。

# c# - asp.net中的html按钮类型和命令名

> ID：15486919
> 
> 赞同：0
> 
> 时间：2013-03-18T21:05:00.660
> 
> 标签：c#, asp.net, button, twitter-bootstrap, .net-3.5

我正在尝试将命令名分配给 html 按钮，但显然它不能很好地工作。这就是我想要实现的目标：

```
 <button type="submit" class="btn btn-info right" CommandName="Login" runat="server" id="loginBtn"><span class="icon16 icomoon-icon-enter white"></span> Login</button>

  <asp:Button ID="btnLogin" CommandName="Login" runat="server" CssClass="btn btn-info right" Text="Login" /> 
```

由于某种原因，样式不适用于 asp 按钮，但它适用于 html 按钮。现在，如果可能的话，我想以某种方式将 commandname 属性分配给 html 按钮。大家觉得可行吗？每条评论都值得赞赏。提前致谢， Laziale

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:15:33.897

`CommandName`仅适用于按钮服务器控件；不在 html 按钮中。

但是，您可以`LinkButton`按照自己的方式使用和设置样式。

![在此处输入图像描述](../Images/7c82619b5bdf87c430b8ed3af6684292.png)

![在此处输入图像描述](../Images/de038e6c24d9958376707d9574dc72cf.png)

```
<asp:LinkButton ID="btnLogin" class="button" runat="server"
CommandName="Login"><span>Login</span></asp:LinkButton>

.button
{   
    background: transparent url('/Images/ButtonLeft.gif') no-repeat top left;  
    display: block;
    float: left;
    line-height: 11px; /* 21px (Button Background) = 5px (padding-top) + 11px (font-size) + 5px(padding-bottom) */
    height: 21px; /* Button Background Height */
    padding-left: 9px;  
    text-decoration: none;
    font-weight: bold;
    color: white;
    font-size: 11px;    
}

a:link.button, a:visited.button, a:active.button
{
    color: white;
    text-decoration: none;
    margin-right: 10px;
}

a.button:hover
{ 
    background-position: bottom left;
}

a.button span, a.button span 
{
    background: transparent url('/Images/ButtonRight.gif') no-repeat top right;    
    display: block;
    padding: 5px 9px 5px 0; /*Set 9px below to match value of 'padding-left' value above*/
}

a.button:hover span
{ 
    background-position: bottom right;
    color: white;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T13:23:05.330

我用谷歌找到了这个问题的答案；但是，由于我找到了更完整的答案，所以我也在回答这个问题，即使它比较旧（以防其他谷歌用户找到它）。

在 asp.net 中，您可以使用 DataControlCommands 类来实现以下功能：

*   取消
*   删除
*   编辑
*   第一的
*   插入
*   最后的
*   新的
*   下一个
*   页
*   上一页
*   选择
*   种类
*   更新

意思是 ：

```
<asp:LinkButton runat="server" CommandName="Cancel" Text="Cancel" CausesValidation="false" /> 
```

除其他事项外。

它位于 System.Web.UI.WebControls (msdn.microsoft.com) 的库条目中

是的，您可以只放入 html 并使其正常工作-但是，如果您正在构建诸如动态实体站点（等）之类的东西，那么花时间学习 asp.net 是如何固有地做到这一点是值得的（imo） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-04T02:10:20.770

如果您将 HiddenField 放在 htmlbutton 中，然后 Find child 会更好

```
<button runat="server"
    ClientIDMode="Static"
    class="btn btn-success"
    ID="button_recalculate"
    OnServerClick="button_recalculate_OnClick"
    >
    <asp:HiddenField runat="server" ID="hidden" Value=<%#Eval("ID") %>/>
    Voir
</button> 
```

服务器

```
try
{
    var type = (HtmlButton) sender;
    var child = type.FindControl("hidden");
    var id = ((HiddenField) child).Value.TransformToInt();
    SendValueToServer(id);
}
catch (Exception)
{
    //
} 
```

# windows-mobile-6.5 - 签名的 .CAB 在 windows mobile 6.5 上导致“未知发布者”

> ID：15486921
> 
> 赞同：0
> 
> 时间：2013-03-18T21:05:03.477
> 
> 标签：windows-mobile-6.5, digital-certificate, authenticode

我从[http://www.ksoftware.net/](http://www.ksoftware.net/)购买了一个证书，我用它来签署一个 .CAB 文件，用于在 windows mobile 6.5 设备上安装我们的软件。但是，即使在签署 .CAB 之后，当尝试（通过 CAB）在设备上安装应用程序时，设备也会警告“未知发布者”。这些 CAB 文件是从 Web 服务下载的，并且应该使用 wceload 及其静默安装选项自动安装，但是由于 CAB 未被识别为已签名（一旦我手动安装了特定的 CAB 文件，wceload 将为此成功）未来的驾驶室）。

最初，我只在 Visual Studio 2008 部署属性和应用程序签名属性中设置了证书。我还尝试使用 signtool.exe，然后使用 cabsigntool.exe 对 CAB 中的所有其他文件进行签名。这些方法都不起作用。在 Windows 7 中检查 CAB 的属性时，该文件确实附加了安全证书，但任何尝试在设备上安装都会出现烦人的“未知发布者”弹出框。

有什么我想念的吗？什么可能导致设备仍将 CAB 文件视为未签名？签名似乎也不适用于普通的 exe。

请注意，我知道可以更改安全设置以不出现提示，但我有兴趣解决安全证书问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:59:59.050

我假设设备上不知道该标志的根证书：

![在此处输入图像描述](../Images/05bd6f59a671c80311f17c37742495b6.png)

您是否确认这些证书与 WindowsMo​​bile 兼容？

# ruby-on-rails - 当有人在 Rails 上订阅我的网站时，我如何获得通知

> ID：15486926
> 
> 赞同：-3
> 
> 时间：2013-03-18T21:05:23.253
> 
> 标签：ruby-on-rails, ruby, email

我有一个网站，我希望用户订阅以了解该网站，但我希望将他们的电子邮件发送到我的邮箱，我该如何提供帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:09:14.120

如果您创建联系人模型，则可以添加一个 on_create 过滤器，通过电子邮件通知您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:37:45.007

您可以使用用户模型中的 on_create 方法向管理员发送电子邮件。

像 after_create :subscribe_to_newsletter def subscribe_to_newsletter 代码在这里结束

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:37:24.983

您可以做的另一件事是 cron 作业。[发条](https://github.com/tomykaira/clockwork)是一个很好的宝石，可以帮助你创造一个。

# c++ - C++ 无法从模板化方法中调用方法（使用模板）

> ID：15486928
> 
> 赞同：5
> 
> 时间：2013-03-18T21:05:32.783
> 
> 标签：c++, templates, methods

我在名为“filter.h”的头文件中有以下方法：

```
namespace std{

//some code

template <class T, class S, class BorderMethod>
tImage<T> binomial(const tImage<T> &in, const size_t k = 3) {
   //do some computations

  tImage<T> img = in.convolve<T, BorderMethod>(in, kernel);
  return img;
}
} 
```

我注意到的第一件事：此方法的定义发生在头文件中。这是标准程序吗？

现在，实际问题是：对方法的调用`convolve`不起作用，即使`in`确实拥有这样的方法。这是`convolve`类中方法的定义`tImage<T>`：

```
tImage<T> convolve(const gravis::tImage<T>& image, const gravis::tArray<typename tImageTraits<T>::Float_t>& kernel); 
```

我该如何调用这个函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T21:09:11.830

> 我注意到的第一件事：此方法的定义发生在头文件中。这是标准程序吗？

是的。通常，函数模板的定义放在标题中。如果它们在单独的`.cpp`文件中被降级，编译器将无法在调用时隐式实例化它们，除非您采取适当的措施，否则这将导致链接器抱怨未定义的引用。有关更多信息，请参阅[StackOverflow 上的此问答。](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

> 对方法 convolve 的调用将不起作用，即使 in 确实拥有这样的方法。

`convolve()`是一个非`const`成员函数，您正试图通过对 . 的引用来调用它`const`。这是非法的，编译器会告诉你。

* * *

[此外，正如JBentley](https://stackoverflow.com/users/1227469/jbentley)在他的回答中正确指出的那样，您不能向命名空间添加新的声明或定义`std`。根据 C++11 标准的第 17.6.4.2.1/1 段：

> 如果 C++ 程序将声明或定义添加到命名空间 std 或命名空间 std 内的命名空间，则 C++ 程序的行为是未定义的，除非另有说明。[...]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T21:15:16.007

尽管不是问题的原因，但您的代码具有未定义的行为，因为您已将其非法放置在`std`命名空间内。

看到[这个问题](https://stackoverflow.com/questions/320798/adding-types-to-the-std-namespace)或[这个](https://stackoverflow.com/questions/5683794/bad-practice-to-declare-names-in-the-standard-namespace)问题。

# delphi - 列表框字符串的 OnClick 事件

> ID：15486929
> 
> 赞同：-5
> 
> 时间：2013-03-18T21:05:33.703
> 
> 标签：delphi

我想将 ListBox 中的字符串转换为事件。就像我有一个显示“Image5”的字符串一样，我想在我的过程中获取 Image5.Click 事件。是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:55:57.047

`ListBox`如果我正确理解您的问题，如果列表框中的所有组件都是相同类型（例如， ） ，则类似这样的事情应该可以工作（它是 的双击处理程序`TImage`）：

```
procedure TForm1.ListBox1DblClick(Sender: TObject);
var
  Image: TImage;
  Selected: string;
begin
  if ListBox1.ItemIndex = -1 then
    Exit;
  Selected := ListBox1.Items[ListBox1.ItemIndex];
  Image := FindComponent(Selected) as TImage;
  if Assigned(Image) then
    if Assigned(Image.OnClick) then
      // You can access Image.OnClick here. In this case, I'll
      // just call it directly with a nil Sender parameter.
      Image.OnClick(nil);
end; 
```

但是，如果您只想调用`Image.OnClick`，则可以更直接地进行调用（正如大卫在对我的回答的评论中提到的那样）：

```
if Assigned(Image) then
  Image.Click;    // Automatically calls OnClick if assigned 
```

# prolog - Prolog：如何计算谓词的通过和失败次数？

> ID：15486930
> 
> 赞同：1
> 
> 时间：2013-03-18T21:05:35.997
> 
> 标签：prolog

我想计算没有任何参数的谓词的成功和失败次数。为简单起见，我要测试的谓词是 test_arith/0。test_arith/0 对 is/2 进行了 3 个测试（再次，为了简单起见。我真的很想测试我正在编写的更复杂的谓词，但这些细节会分散这个问题的注意力。）（PS 我看到了另一个关于计算谓词为真的次数。我想一次性计算成功和失败。我不想在每个测试用例中多次运行真正的谓词，因为其中一些需要很长时间执行。aggregate/3 和 aggregate_all 似乎也是一心一意的，只考虑成功。）

```
test_arith(Passes, Failures) :-
    findall(P-F, (test_arith->(P=1,F=0);(P=0,F=1)), Scores),
    summarize_scores(Scores, 0, 0, Passes, Failures).

test_arith :- 5 is 3 +2\.  % Test #1: Should pass
test_arith :- 5 is 2 +2\.  % Test #2: Should fail
test_arith :- 4 is 2 +2\.  % Test #3: Should pass

summarize_scores([], Passes, Failures, Passes, Failures).
summarize_scores([P-F|Scores], Passes_SF, Failures_SF, Passes, Failures) :-
    Next_Passes is P + Passes_SF,
    Next_Failures is F + Failures_SF,
    summarize_scores(Scores, Next_Passes, Next_Failures, Passes, Failures). 
```

当我跑

```
test_arith(P,F). 
```

我明白了

```
P = 1,
F = 0. 
```

因为 test_arith 似乎只被调用一次。我应该得到

```
P = 2,
F = 1. 
```

谢谢你提供的所有帮助。

我试过了：

```
test_arith(Passes, Failures) :-
    bagof(P-F, A^(test_arith(A)->(P=1,F=0);(P=0,F=1)), Scores),
    summarize_scores(Scores, 0, 0, Passes, Failures).

test_arith(_) :- 5 is 3 +2.
test_arith(_) :- 5 is 2 +2.
test_arith(_) :- 4 is 2 +2.

test_arith2(Passes) :-
    aggregate(count, A^test_arith(A), Passes). 
```

test_arith(P,F) 得出：P = 1，F = 0。 test_arith2(P) 得出“2”。（这很好，但只有我正在寻找的 1/4。我需要失败计数，并且每个谓词在每次测试运行时只运行一次，在这种情况下需要 3 次调用。）

然后我尝试为每个测试用例添加一个数字：

```
test_arith(Passes, Failures) :-
    bagof(P-F, A^(test_arith(A)->(P=1,F=0);(P=0,F=1)), Scores),
    summarize_scores(Scores, 0, 0, Passes, Failures).

test_arith(1) :- 5 is 3 +2.
test_arith(2) :- 5 is 2 +2.
test_arith(3) :- 4 is 2 +2. 
```

并得到：

```
test_arith(P,F).
    P = 1,
    F = 0. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:08:16.577

我认为问题在于 (->)/2 中的“隐式剪切”。尝试

```
test_arith(Passes, Failures) :-
    findall(P-F, (test_arith, P=1,F=0 ; P=0,F=1), Scores),
    summarize_scores(Scores, 0, 0, Passes, Failures). 
```

你会得到

```
?- test_arith(P,F).
P = 2,
F = 1. 
```

*编辑*

OT，但我喜欢我可以使逻辑更紧凑，当然还有图书馆的一些帮助。这里有一个等价的定义：

```
test_arith(Passes, Failures) :-
    findall(R, (test_arith, R=1-0 ; R=0-1), Scores),
    aggregate(r(sum(A),sum(B)), member(A-B, Scores), r(Passes, Failures)). 
```

然后，为什么要建立一个立即扫描的列表？

```
test_arith(Passes, Failures) :-
    aggregate(r(sum(A),sum(B)), (test_arith, A=1,B=0 ; A=0,B=1), r(Passes, Failures)). 
```

*编辑*上面的代码不正确，无法统计失败。我被它似乎适用于特定测试用例的事实所愚弄。

在@false 的帮助下，这里是 reify_call/3，它是一个可以解决 OP 问题的构建块（在 SWI-Prolog 中测试，其中[条款](http://www.swi-prolog.org/pldoc/doc_for?object=clause/2)/2 可以说是在 ISO 兼容性方面进行了扩展，给定@false 评论问题）：

```
test_arith(Passes, Failures) :-
    aggregate(r(sum(T),sum(F)), reify_call(test_arith, T, F), r(Passes, Failures)).

:- meta_predicate reify_call(0, -, -).

reify_call(Pred, True, False) :-
    clause(Pred, Cl), (call(Cl) -> True = 1, False = 0 ; True = 0, False = 1). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:12:43.830

看起来你的 findall 中有一个错字，你的暗示的“else”将 F 绑定到 0 和 1，而不是 P 到 0 和 F 到 1。这是直接从你的代码中复制的吗？

如果是这样，那可以解释为什么聚合方法只接受真值；虚假案件永远不会过去。

**编辑添加：**

虽然我认为利用 findall 之类的功能是一种很好的做法，但有时你无法击败一个好的故障循环；内存使用率相当低，我发现性能相似。在 Sicstus prolog 中，我的方法几乎肯定是这样的：

```
## function is passed in.
## call(Foo) succeeds.
evaluate(Foo) :-
    call(Foo),
    incrementSuccess,
    !.
## call(Foo) fails.
evaluate(Foo) :-
    incrementFailure.

incrementSuccess :-
    success(N),
    N2 is N + 1,
    retract(success(N)),
    assert(success(N2)),
    !.
incrementSuccess :-
    assert success(1).

[very similar for incrementFailure].

## A fail loop that evaluates all possible bindings
tally(Foo, _Success, _Failure) :-
    evaluate(Foo),
    fail.
## The catch case that passes out the final tallies.
tally(_, Success, Failure) :-
    success(Success),
    failure(Failure). 
```

# dll - 如何检查从dll加载的地址是函数还是变量？

> ID：15486932
> 
> 赞同：0
> 
> 时间：2013-03-18T21:05:42.727
> 
> 标签：dll, shared-libraries, dllexport

所以我用这种语法加载函数：

```
typedef void* (*unknownf)(
#ifdef __cplusplus
...
#endif
);
unknown funci=(unknownf*)GetProcAddress(dll, "SomeFunction");` 
```

和这个数据

```
typedef void* (*unknownd);
conversiontype *some=(unknownd*)GetProcAddress(dll,"SomeData"); 
```

如何检查地址是否包含数据或函数？还能有什么？

编辑：请有一些编程方式如何检查它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:21:16.443

查看指针指向的前几个字节。如果你看到这样的东西：

```
55 89 e5 
```

（在 x86 上）或：

```
55 48 89 e5 
```

（在 x86-64 上）

那么它可能是一个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T20:52:19.403

我找到了一种方法来检查 DLL 的 IMAGE_DOS_HEADER 中的 .data .edata .rdata 和 .reloc 部分，然后我尝试确定哪个部分是名称。

# jquery - jQuery for 和加载等待图像

> ID：15486938
> 
> 赞同：0
> 
> 时间：2013-03-18T21:06:08.393
> 
> 标签：jquery, plugins, load

嗨，我的第一个插件有问题:-)

我在for循环中设置了一些变量问题是当我尝试删除图像时，我最终尝试删除3次#img-3，就像它稍后在变量已经更改值时执行一样

```
for (i=1; i<=3; i++) {

  var insertImg = arrImgs[i];
  var deleteImg = '#img-' + i;

  $('<img src="'+ insertImg +'">').hide().appendTo('#mydiv').load(function(){
      $(this).show(0, function() {
           deleteImg.remove();                          
      });
  });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:16:25.093

假设这`deleteImg.remove();`是一个错字，并且您实际上是要发布的`$(deleteImg).remove()`，这里有几个问题。

1.  您没有向要插入的图像元素添加 ID。尝试使用：

    ```
    $('<img src="'+ insertImg +'" id="' + i + '" />') 
    ```

2.  回调正在关闭`deleteImg`变量，并且仅在调用时使用存储在其中的值。看到它们被调用以响应事件（加载事件），这将*在*循环完成之后，此时的值为`deleteImg`“#img-3”。

    这个问题的一种解决方案是使用 IIFE 传递值`deleteImg`而不关闭变量。这看起来像：

    ```
    .load((function(d){
        return function(){
            $(this).show(0, function() {
                 d.remove();                          
            });
        }
    })(deleteImg)); 
    ```

# php - AWS EC2 实例上的 S3-php5-curl - 请求的域名与服务器的证书不匹配

> ID：15486940
> 
> 赞同：5
> 
> 时间：2013-03-18T21:06:17.680
> 
> 标签：php, linux, apache, amazon-s3, amazon-ec2

我正在使用[s3-php5-curl](https://github.com/julesbravo/s3-php5-curl)访问我的 AWS S3 存储桶。

当我自己托管 PHP 应用程序时，该`getBucket()`函数工作正常并检索结果，但是当我将完全相同的代码放入 AWS EC2 实例（默认 AIM - Linux、Apache、PHP）时，我收到以下错误：

`Warning: S3::getBucket(): [51] Unable to communicate securely with peer: requested domain name does not match the server's certificate. In /var/www/html/s3-php5-curl/S3.php on line 136 Warning: Invalid argument supplied for foreach() in /var/www/html/index.php on line 15`

我无法理解它。这是什么意思，我该如何解决？

**编辑：我确实将此标记为已回答，但我错了。无论您是使用 Amazon SDK 还是 php5-curl 库，我都已链接到潜在问题似乎是什么。**似乎存在一个普遍问题影响某些地区的 EC2 用户，他们尝试以编程方式访问与 SSL 认证相关的 S3 存储桶，其中存储桶名称包含句号（也称为句点）。它已被记录在案，但[在这里](https://forums.aws.amazon.com/message.jspa?messageID=435421)没有解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:50:48.353

尝试使用适用于 PHP 1.5.5 的 AWS 开发工具包并确保指定您的区域并设置`path_style`为 true。对我来说，我在新加坡，所以我的代码是：

```
 $s3 = new AmazonS3();
 $s3->set_region(AmazonS3::REGION_APAC_SE1);
 $s3->path_style = true; 
```

这似乎对我有用。

希望能帮助到你！

干杯，阿迪

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T21:13:42.530

`Unable to communicate securely with peer: requested domain name does not match the server's certificate.`

当 CURL 尝试验证证书时会发生此错误。虽然您可以使用 curl 选项禁用此设置，但存在证书名称不匹配的原因。

看起来您拥有的库有些过时了，您可能需要考虑使用它：[http ://aws.amazon.com/sdkforphp/](http://aws.amazon.com/sdkforphp/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T21:09:32.127

`s3-php5-curl/S3.php`您始终可以通过将第 1298-1299 行更改为：来指示 CURL 不检查有效的 SSL 证书：

```
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); 
```

这对于 xzs3.amazonaws.com 类型的存储桶来说是必要的，正如上面评论中的 datasage 所指出的，*.s3.amazonaws.com 的通配符 SSL 证书不包括这些。

# django - Django Query 设置延迟，只有不工作

> ID：15486945
> 
> 赞同：1
> 
> 时间：2013-03-18T21:06:48.427
> 
> 标签：django, query-optimization

我有 2 个模型，一个房子和一个消息。一条消息对一所房子有 FK：

```
model House:
   attribute1 = models.CharField("")
   ...more stuff...

model Message:
   house = models.ForeignKey(House)
   ...more stuff... 
```

我用 house_id = 3 创建了 15 条消息：Message(house_id = 3).save()

我的问题是查询的速度有多慢。当我做：

```
Message.objects.filter(house_id = 3) 
```

我收到以下查询：

```
{u'time': u'0.030', u'sql': u'SELECT `home_message`.`id`, `home_message`.`house_id`,       FROM `home_message` WHERE `home_message`.`house_id` = 3 '}
{u'time': u'0.027', u'sql': u'SELECT `home_house`.`id`, `home_house`.`is_active`,  FROM `home_house` WHERE `home_house`.`id` = 3 '}
{u'time': u'0.027', u'sql': u'SELECT `home_house`.`id`, `home_house`.`is_active`,  FROM `home_house` WHERE `home_house`.`id` = 3 '}
{u'time': u'0.027', u'sql': u'SELECT `home_house`.`id`, `home_house`.`is_active`,  FROM `home_house` WHERE `home_house`.`id` = 3 '} 
```

...（15 次，每条消息一个）

所以我看到我在我的消息中获得了每个 house_id 的数据库查询。请注意，我只查询 Messages ONCE（如预期的那样）。

显然这很慢，所以我尝试：

```
Message.objects.filter(house_id = 3).defer('house') 
```

令人惊讶的是，这使情况变得更糟。现在的查询是：

```
{u'time': u'0.028', u'sql': u'SELECT `home_message`.`id` FROM `home_message` WHERE `home_message`.`house_id` = 3 '}
{u'time': u'0.024', u'sql': u'SELECT `home_message`.`id`, `home_message`.`house_id` FROM `home_message` WHERE `home_message`.`id` = 1 '}
{u'time': u'0.027', u'sql': u'SELECT `home_house`.`id`, `home_house`.`is_active`, ` FROM `home_house` WHERE `home_house`.`id` = 3 '}
{u'time': u'0.024', u'sql': u'SELECT `home_message`.`id`, `home_message`.`house_id` FROM `home_message` WHERE `home_message`.`id` = 2 '}
{u'time': u'0.027', u'sql': u'SELECT `home_house`.`id`, `home_house`.`is_active`, ` FROM `home_house` WHERE `home_house`.`id` = 3 '}
...x15... 
```

我现在正在单独查询每个消息和每个房屋外键 - 基本上使呼叫次数增加了一倍。

那没有用。所以现在我“只”尝试 django。

```
Message.objects.filter(house_id = house_id).only("id").  # only get id! 
```

我现在发送的查询：

```
{u'time': u'0.025', u'sql': u'SELECT `home_message`.`id` FROM `home_message` WHERE `home_message`.`house_id` = 3 '}
{u'time': u'0.024', u'sql': u'SELECT `home_message`.`id`, `home_message`.`house_id` FROM `home_message` WHERE `home_message`.`id` = 1 '}
{u'time': u'0.026', u'sql': u'SELECT `home_house`.`id`, `home_house`.`is_active`,  WHERE `home_house`.`id` = 3 '}
{u'time': u'0.024', u'sql': u'SELECT `home_message`.`id`, `home_message`.`house_id` FROM `home_message` WHERE `home_message`.`id` = 2 '}
{u'time': u'0.026', u'sql': u'SELECT `home_house`.`id`, `home_house`.`is_active`,  WHERE `home_house`.`id` = 3 '} 
```

...x15...

所以再一次，我得到了可怕的房子对象查询和另一个按 id 查询完整消息的查询（如 defer 命令）。

我不明白这是否是 ONLY 和 DEFER 的正确行为。我希望只获取信息（作为一个对象，或者我会使用“值” - 顺便说一句。）而不评估 FK。

编辑：

错误出现在我调用 return self.house的**unicode中**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:19:40.237

You seem to have a few misunderstandings about Django querysets in general, and what `defer` and `only` are supposed to do in particular.

`defer(fieldname)` means "Don't query for 'fieldname' now, wait until I ask for it later". So naturally, since you then proceed to ask for 'house' immediately, you will get double queries.

`only(fieldname)` means - as the name implies - "only give me 'fieldname'". So I don't know why you would be surprised that then referring to other fields than 'id' would trigger a further query.

However, you should note that neither of those has anything to do with your actual problem: the correct tool to use there is `select_related()`, which as the documentation explains is for following the ForeignKey in a single query.

# scala - 一个一个地执行Scala中的方法序列，并且只有在前一个返回true时才继续

> ID：15486948
> 
> 赞同：1
> 
> 时间：2013-03-18T21:07:01.420
> 
> 标签：scala

我正在使用 scala 来包裹 STAF 以运行具有多个步骤的测试。

基本上每个步骤都是一个返回布尔值的方法调用。这些步骤按顺序执行。我想知道是否有一种方法可以告诉 Scala 只有在前一个返回 true 时才进入下一步？

谢谢，

*编辑*

在下面添加了一个示例。

这是我在测试后收集数据的步骤列表。它有 3 个步骤。1）压缩日志，2）将压缩存档复制到某处，3）清除日志目录

```
zipDir(handle, "testmachine1", """C:\Logs""", """C:\Logs.zip""")
copyFile(handle, "testmachine1", """C:\Logs.zip""", "RepoMachine", """c:\data""")
clearDirContent(handle, "testmachine1", """C:\Logs""") 
```

对我来说，只有正确执行了前面的步骤才有意义。例如，如果一开始创建 zip 文件时出错，则在第 2 步中复制 zip 文件是没有意义的。

为了说明我的观点，这里有一个详细的方法来完成我想要的：

```
var result = zipDir(handle, "testmachine1", """C:\Logs""", """C:\Logs.zip""")
if (result) 
    result = copyFile(handle, "testmachine1", """C:\Logs.zip""", "RepoMachine", """c:\data""")
if (result) 
    result = clearDirContent(handle, "testmachine1", """C:\Logs""") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:35:01.627

我不知道任何 scala，但使用纯 java 你只需将它们放在一起。一旦 func 返回 false，则表达式为 false 并停止执行。

```
val result = fun1() && func2() && func3() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T21:19:12.157

好吧，在您的情况下，您可以使用简单的布尔值和：

```
val result = zipDir(handle, "testmachine1", """C:\Logs""", """C:\Logs.zip""")
          && copyFile(handle, "testmachine1", """C:\Logs.zip""", "RepoMachine", """c:\data""")
          && clearDirContent(handle, "testmachine1", """C:\Logs""") 
```

`&&`不像`&`在第一个错误值上停止

**过时的答案：**

怎么样`listOfMethods.forall(f => f(x))`？它会短路，因此不会执行第一个 false 之后的操作：

```
scala> def a() = { println("A"); false } 
a: ()Boolean

scala> def b() = { println("B"); true }
b: ()Boolean                                          

scala> List(a _ ,b _ ).forall(f => f())
A
res2: Boolean = false 
```

重要提示：您必须将*闭包*放入您的集合中：如果您编写`List(a(1), b(2))`魔法不会发生：a(1) 和 b(2) 将在它们被放入列表之前被急切地执行。您可以编写如下内容：

```
def foo(x: Int) = { println ("Foo is " + x); false}
def bar(x: Int) = { println ("Bar is " + x); false}
List(
  () => foo(1), 
  () => bar(2)
).forall{ fun => fun() } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T21:32:11.183

我认为您希望通过返回 scalaz 的验证或某种形式的 Either 来理解，所以它会是

```
for {
  res1 <- func1
  res2 <- func2
  ...
} yield resN 
```

这样，当您的函数返回失败时，它将在您失败的地方停止。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T21:41:37.380

Scala 惯用的做法是使用[for-comprehension](http://www.scala-lang.org/docu/files/ScalaByExample.pdf#page=85)。您的中间方法需要返回一个定义了 .map 和 .flatMap 的类型——在这里，如果操作成功，您可以返回一个 Option ，否则返回 None 。如果要保留错误消息，请查看 Validation 或 Either。

```
var result = for {
  zipped <- zipDir(handle, "testmachine1", """C:\Logs""", """C:\Logs.zip""")
  copied <- copyFile(handle, "testmachine1", """C:\Logs.zip""", "RepoMachine", """c:\data""")
  cleared <- clearDirContent(handle, "testmachine1", """C:\Logs""")
} yield {
   cleared
} 
```

`result`如果所有 3 次操作都发生，则为 Some ，否则为 None 。如果任何中间步骤不返回，则操作短路；在引擎盖下，理解使用[map 和 flat-map](http://www.brunton-spall.co.uk/post/2011/12/02/map-map-and-flatmap-in-scala/)。

我之所以建议在短路 AND 上这样做是因为它更加灵活。例如，您可能不想再对文件名和路径进行硬编码，因此如果 zip 操作成功，您可以让 zipDir 返回压缩文件的完整路径。您的代码可能看起来像

```
val result = for {
  zipped  <- zipDir(handle, machine, filepath)
  copied  <- copyFile(handle, machine, zipped, newlocation)
  cleared <- clearDirContent(handle, machine, filepath)
} yield cleared 
```

# c++ - 为什么 std::result_of 将（不相关的）函数类型作为类型参数？

> ID：15486951
> 
> 赞同：20
> 
> 时间：2013-03-18T21:07:15.187
> 
> 标签：c++, boost, c++11, std

我意识到“为什么事情是这样的”问题通常不是最好的，但是在 SO 上有很多人都在关注标准委员会的讨论，所以我希望可以如实回答，因为我有理由好奇什么答案是。

基本上，当我第一次看到它的模板签名时，我花了很长时间才弄清楚它发生了什么`std::result_of`：我认为这是我以前从未见过的模板参数的全新构造。

```
template< class F, class... ArgTypes >
class result_of<F(ArgTypes...)>; 
```

经过一段时间的思考，我意识到这实际上是：`F(ArgTypes...)`是一个函数类型，但它**不是**正在评估其结果类型的函数的类型（这只是`F`）：它是一个接受`ArgTypes...`参数并**返回**类型的函数的类型`F`。

这不是……奇怪吗？有点骇人听闻？有谁知道委员会是否曾经讨论过任何替代方案，例如，以下...

```
template< class F, class... ArgTypes >
class result_of<F, ArgTypes...>; 
```

?

我想有可能存在第二个构造不能像第一个构造那样容易使用的情况，但是哪些情况呢？

我不是想对此做出判断，但这只是我第一次看到它时让我感到困惑，所以我很好奇是否有充分的理由。我意识到部分答案可能只是“因为 Boost 做到了”，但仍然留下了剩下的（事实）问题......

*   Boost 选择这种语法来编码类型信息而不是任何替代方法是否有技术原因？

*   C++11 委员会有没有讨论过标准化这一点有多合适，因为无论如何`std::result_of`都可以`decltype`相当容易地实现它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-19T01:04:37.743

将函数类型作为参数允许您拥有不受限制的“可变参数”类模板，即使在 C++03 中也是如此。想想看：在 C++03 中，我们没有可变参数模板。而且您不能像使用函数模板那样“重载”类模板 - 那么如何允许函数使用不同数量的“参数”呢？

使用函数类型，您可以为不同数量的参数添加任意数量的偏特化：

```
template<class Fty>
struct result_of;

template<class F>
struct result_of<F()>{ /*...*/ };

template<class F, class A0>
struct result_of<F(A0)>{ /*...*/ };

template<class F, class A0, class A1>
struct result_of<F(A0, A1)>{ /*...*/ };

// ... 
```

在 C++03 中执行此操作的唯一另一种方法是默认模板参数，并针对每种情况进行部分专门化 - 缺点是它看起来不再像函数调用，并且任何`result_of`内部使用的包装器都不能只是传递`Sig`。

* * *

现在，函数类型方式有一个缺点 - 您还可以对“参数”进行所有常见的转换：`R(Args...)`->`R(*)(Args...)`更重要的是`T[N]`->`T*`和顶级 cv-qualifiers 被丢弃（`§8.3.5/5`）：

```
struct X{
  bool operator()(int (&&arr)[3]);
  long operator()(void*);
};

static_assert(std::is_same<std::result_of<X(int[3])>::type, bool>(), "/cry"); 
```

[活生生的例子。](https://ideone.com/JB83Zd)输出：

> 错误：静态断言失败：/cry

另一个问题是顶级 cv 限定符被丢弃：

```
struct Y{};

struct X{
  bool operator()(Y const&);
  long operator()(Y&&);
};

Y const f();

static_assert(std::is_same<std::result_of<X(Y const)>::type, bool>(), "/cry"); 
```

[活生生的例子。](https://ideone.com/as47EJ)输出：

> 错误：静态断言失败：/cry

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-18T21:12:17.967

我认为只是有人认为您可以（ab）使用函数类型表示法来模仿相应仿函数调用的方式，并且它卡住了。所以，没有技术原因，只是审美原因。

```
// the result type of a call to (an object of) type F,
// passing (objects of) types A, B, and C as parameters.
result_of<F(A, B, C)>::type 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T21:09:10.800

`result_of`是 TR1 的一部分，它是在 decltype 被添加到语言之前出现的。但它是在设计时`decltype`考虑到的，因此更改`result_of`to use的实现`decltype`很简单。是的，这是一个 hack，但它确实有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T12:29:30.873

（这扩展了[JohannesD 的答案](https://stackoverflow.com/a/15487037/981959)和[Jesse Good 对此的评论](https://stackoverflow.com/questions/15486951/why-does-stdresult-of-take-an-unrelated-function-type-as-a-type-argument#comment21923349_15487037)，但这不适合评论。请投票给其他答案而不是这个答案。）

来自[N1454 语法和示例](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2003/n1454.html#id2800180)：

> 的行为的定义`result_of`很简单：给定类型`F`, `T1`, `T2`, ...,`TN`和左值`f`, `t1`, `t2`, ...,`tN`分别是这些类型的类型表达式

```
result_of<F(T1, T2, ..., TN)>::type 
```

> 计算为表达式的类型`f(t1, t2, ..., tN)`。

这不是滥用类型系统，它非常优雅！

# selector - NIO：SelectionKey 准备好究竟意味着什么？

> ID：15486955
> 
> 赞同：1
> 
> 时间：2013-03-18T21:07:17.403
> 
> 标签：selector, nio

我想知道对于 SelectionKey（实际上是它的 Channel）为特定类型的事件“准备好”意味着什么，是否有明确的答案？

key.isAcceptable)：是不是表示客户端已经建立了连接（发送了SYN，而服务器已经发出了SYN+ACK）？我相信情况就是这样，因为简单地绑定一个 ServerSocketChannel 并不能让它“可接受”（在测试中验证了这一点）

key.isReadable()：是不是说socket的接收缓冲区没有满（当然也包括空的）？或者这是否意味着其接收缓冲区中有未读字节？（我假设它是第一个，因为即使在 key.isReadable() 时 channel.read() 也可以等于 0） - 但同样肯定是一个“休眠”通道（一个打开但客户端不发送数据的通道）是不是在选择器的 selected-keyset 中重复返回？

我猜答案是“依赖于实现”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:42:09.990

> key.isAcceptable)：是不是表示客户端已经建立了连接（发送了SYN，而服务器已经发出了SYN+ACK）？

这意味着*至少有一个*客户这样做了。也许更多。所有这些客户都将坐在积压队列中。

> key.isReadable()：是不是说socket的接收缓冲区没有满（当然也包括空的）？

不。

> 或者这是否意味着其接收缓冲区中有未读字节？

这意味着套接字接收缓冲区中有数据。当您阅读它时，它会被删除，因此那里的所有数据都是“未读”的。

> （我假设它是第一个，因为即使在 key.isReadable() 时 channel.read() 也可以等于 0）

不，它不能。

> 但话又说回来，选择器的选定键集中不会重复返回“休眠”通道（打开但客户端未发送数据的通道）？

当然不是。只有准备好读取数据的通道。

你没有问，但是：

*   `isWritable()`: 表示套接字发送缓冲区中有*空间*。这几乎总是如此，这就是为什么您应该只`OP_WRITE`在确定不是这种情况时才注册，即在 a`write()`返回零之后，并且应该立即取消注册 a`write()`成功而不返回零。

*   `isConnectable()`: 表示您`connect()`以非阻塞模式调用了`OP_CONNECT`已注册的，您现在应该调用`finishConnect()`，如果它返回`true`，您应该取消注册`OP_CONNECT`，并且可能编写您的第一个请求，因为您是客户端。

# sql - ORA-04079: 无效的触发器规范 Oracle

> ID：15486956
> 
> 赞同：0
> 
> 时间：2013-03-18T21:07:19.653
> 
> 标签：sql, oracle, triggers

```
 ORA-04079: invalid trigger specification 
```

这是我的问题和代码

```
 CREATE OR REPLACE TRIGGER czwarty 
    INSTEAD OF INSERT 
    ON zlozona FOR EACH ROW
    AS BEGIN
    INSERT INTO klienci(id, imie, nazwisko)
    VALUES (4, imie, :NEW.nazwisko);
    END; 
```

怎么了？我几乎做了所有事情:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:18:53.783

`AS`之前不应该有`BEGIN`。如果需要在实际代码中声明局部变量，则需要使用`DECLARE`not an`AS`

```
CREATE OR REPLACE TRIGGER trigger_name
  INSTEAD OF INSERT ON view_name
  FOR EACH ROW
DECLARE
  local_variable_declarations_here
BEGIN
  code_here;
END; 
```

# geometry - thetaStart 和 thetaLength 是什么？

> ID：15486958
> 
> 赞同：0
> 
> 时间：2013-03-18T21:07:25.933
> 
> 标签：geometry, three.js

在 Three.js 的 CircleGeometry 类中有参数 thetaStart 和 thetaLength。据我所知，他们使圆圈起皱。它们的用途是什么以及它们是如何工作的？

[https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/CircleGeometry.js](https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/CircleGeometry.js)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T21:17:50.187

这些参数可以用来描述圆弧。默认`thetaStart`值为 =0 和`thetaLength`=2π，因此它们形成一个完整的圆。较小的值`thetaLength`将仅描述圆的一部分，您可以使用它`thetaStart`来定义该段开始的角度。

# ruby-on-rails - 思考狮身人面像搜索模型对象

> ID：15486970
> 
> 赞同：0
> 
> 时间：2013-03-18T21:07:55.023
> 
> 标签：ruby-on-rails, sphinx, thinking-sphinx

这是一个真正的菜鸟问题，但我无法在文档中找到明确的答复：

是否可以使用 Thinking Sphinx 搜索模型对象的关联。

例子：

```
@user.posts.search("I'm confused") 
```

我看到的所有示例都涉及搜索用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:31:45.793

是的，可以搜索模型对象的关联，例如针对上传模型关联创建索引的示例。

define_index 做索引标题索引描述索引uploads.file_file_name, :as => :upload_file_name 索引uploads.file_content_type, :as => :upload_file_content_type

```
has :id
has price
has user_id
has created_at
has purchase_count
has images.photo_file_size
has tags.id, :as => :tag_id, :facet => true
has tags.parent_id, :as => :tag_parent_id, :facet => true
has "state='active'", :as => :active, :type => :boolean, :facet => true
has "count(images.id) > 0", :as => :has_image, :type => :boolean
has "sum(uploads.file_file_size)", :as => :total_size, :type => :integer 
```

结尾

# javascript - 需要帮助使 WooCommerce 色板插件与云缩放 js 一起使用，而不是典型的 NoConflict 问题

> ID：15486975
> 
> 赞同：0
> 
> 时间：2013-03-18T21:08:08.430
> 
> 标签：javascript, jquery, wordpress, woocommerce

我正在使用 Blanco 主题（Wordpress）。这是来自主题森林的 WooCommerce 主题，其中在单个产品页面中内置了 Cloud Zoom JQuery。我也在使用“WooCommerce 变体样本和照片”插件。这会创建视觉样本来替换 WooCommerce 产品变体的下拉选择器菜单。

页面上的样本使用 js 突出显示已单击的样本，以便在将商品添加到购物车时突出显示。

图库图片使用js更改主图位置的附件src以进行云缩放。

我的客户希望在单击色板时也更改主图像，以便它显示与刚刚选择的颜色匹配的图像。

我已经编辑了色板插件，以便在编辑色板设置时提供一个选项来保存产品中每个属性的图像 url。设置此选项后，色板会将相同的代码添加到图库图像使用的标签中。这成功地将所选图像加载到所需的主图像位置。然而，样本不再被选中。

此外，当加载样本时，主图像上的“加载”也不会消失。但是当加载画廊图像时它会消失。

很难用语言来解释。如果您访问此产品页面：

[http://tummytrimmerz.com/shop/cami-with-jog-bra/](http://tummytrimmerz.com/shop/cami-with-jog-bra/)

您将看到尺寸样本 xs、s、m 、l ... 正在正常工作。您可以看到三种颜色样本的工作方式与尺寸不同，但它们正在加载主图像。

这是我添加到应该受样本 jquery 影响的潜水内的 a 标记的代码：

```
<a href="https://tummytrimmerz.com/wp-content/uploads/2013/02/Tummy-Trimmerz-Black-Cami-Pink-Bra-Front-View1-266x400.jpg" class="cloud-zoom-gallery" cloud-zoom-data="useZoom: 'zoom1', smallImage: 'https://tummytrimmerz.com/wp-content/uploads/2013/02/Tummy-Trimmerz-Black-Cami-Pink-Bra-Front-View1-266x400.jpg'" style="width:90px;height:90px;" title="Jet Black / Magenta"><img src="https://tummytrimmerz.com/wp-content/uploads/2013/03/Black-Pink.jpg" alt="Thumbnail" class="wp-post-image swatch-photopa_color_" width="90" height="90"></a> 
```

这是样本选择器 JQuery：

```
jQuery(document).ready( function($) {
var calculator = new variation_calculator(product_attributes, product_variations_flat, my_all_set_callback, my_not_all_set_callback);
calculator.reset_selected();
calculator.reset_current();

function my_not_all_set_callback() {

// Reset image
var img = $('div.images img:eq(0)');
var link = $('div.images a.zoom:eq(0)');
var o_src = $(img).attr('data-o_src');
var o_href = $(link).attr('data-o_href');

if ( o_src && o_href ) {
$(img).attr('src', o_src);
$(link).attr('href', o_href);
}

$('form input[name=variation_id]').val('').change();
$('.single_variation_wrap').hide();
$('.single_variation').text('');

if( $().uniform && $.isFunction($.uniform.update) ) {
$.uniform.update();
}

}

function my_all_set_callback(selected) {
var found = null;

for (sa in selected) {
$('#' + sa).val( selected[sa] );
}

for(var p = 0; p < product_variations.length; p++) {
var result = true;
for (attribute in product_variations[p].attributes) {
for(selected_attribute in selected) {
if (selected_attribute == attribute) {
var v = product_variations[p].attributes[attribute];
if (v != selected[selected_attribute]) {
    result = false;
}
}
}
}

if (result){
found = product_variations[p];
}

}

if (!found) {
for(var p = 0; p < product_variations.length; p++) {
var result = true;
for (attribute in product_variations[p].attributes) {
for(selected_attribute in selected) {
if (selected_attribute == attribute) {
    var v = product_variations[p].attributes[attribute];
    var vs = selected[selected_attribute];
    if (v != '' && v != vs) {
        result = false;
    }
}
}
}

if (result){
found = product_variations[p];
}
}
}

if (found) {
show_variation(found);
}
}

function show_variation(variation) {
swap_image(variation);

$('.variations_button').show();
$('.single_variation').html( variation.price_html + variation.availability_html );

if (variation.sku) {
$('.product_meta').find('.sku').text( variation.sku );
} else {
$('.product_meta').find('.sku').text('');
}

$('.single_variation_wrap').find('.quantity').show();

if (variation.min_qty) {
$('.single_variation_wrap').find('input[name=quantity]').attr('data-min', variation.min_qty).val(variation.min_qty);
} else {
$('.single_variation_wrap').find('input[name=quantity]').removeAttr('data-min');
}

if ( variation.max_qty ) {
$('.single_variation_wrap').find('input[name=quantity]').attr('data-max', variation.max_qty);
} else {
$('.single_variation_wrap').find('input[name=quantity]').removeAttr('data-max');
}

if ( variation.is_sold_individually == 'yes' ) {
$('.single_variation_wrap').find('input[name=quantity]').val('1');
$('.single_variation_wrap').find('.quantity').hide();
}

$('form input[name=variation_id]').val(variation.variation_id).change();

$('.single_variation_wrap').slideDown('200').trigger( 'show_variation', [ variation ] );
$('form.cart').trigger( 'found_variation', [ variation ] );

}

function swap_image(variation) {

var img = $('div.images img:eq(0)');
var link = $('div.images a.zoom:eq(0)');
var o_src = $(img).attr('data-o_src');
var o_title = $(img).attr('data-o_title');

var o_href = $(link).attr('data-o_href');

var variation_image = variation.image_src;
var variation_link = variation.image_link;
var variation_title = variation.image_title;    

if (!o_src) {
$(img).attr('data-o_src', $(img).attr('src'));
}

if (!o_title) {
$(img).attr('data-o_title', $(img).attr('title') );
}

if (!o_href) {
$(link).attr('data-o_href', $(link).attr('href'));
}

if (variation_image && variation_image.length > 1) {    
$(img).attr('src', variation_image);
$(img).attr('title', variation_title);
$(img).attr('alt', variation_title);
$(link).attr('href', variation_link);
$(link).attr('title', variation_title);
} else {
$(img).attr('src', o_src);
$(img).attr('title', o_title);
$(img).attr('alt', o_title);
$(link).attr('href', o_href);
$(link).attr('title', o_title);
}
}

var $variation_form = $('form.cart');

$('.variations select', $variation_form).unbind();
$('div.select-option').delegate('a', 'click', function(event) {
event.preventDefault();

var $the_option = $(this).closest('div.select-option');

if ($the_option.hasClass('disabled')) {
return false;
} else if ($the_option.hasClass('selected')) {
$the_option.removeClass('selected');

var select = $the_option.closest('div.select');
select.data('value', '');
$(this).parents('div.select').trigger('change', []);

} else {

var select = $(this).closest('div.select');
$(select).find('div.select-option').removeClass('selected');
$the_option.addClass('selected');

select.data('value', $the_option.data('value') );
$(this).parents('div.select').trigger('change', []);
}

return false;

});

$('div.select', $variation_form).bind('change', function() {

$variation_form.trigger( 'woocommerce_variation_select_change' );

var $parent = $(this).closest('.variation_form_section');
$('select', $parent).each( function(index, element) {
var optval = $(element).val();

optval = optval.replace("'", "&#039;");
optval = optval.replace('"', "&quot;");

calculator.set_selected( $(element).data('attribute-name'), optval );
});

$('div.select', $parent).each( function(index, element) {
calculator.set_selected( $(element).data('attribute-name'), $(element).data('value') );
});

var current_options = calculator.get_current();
$('select', $parent).each( function(index, element) {                
var attribute_name = $(element).data('attribute-name');
var avaiable_options = current_options[attribute_name];

$(element).find('option:gt(0)').each(function(index, option) {
var optval = $(option).val();

optval = optval.replace("'", "&#039;");
optval = optval.replace('"', "&quot;");

if (!avaiable_options[ optval ] ) {
$(option).attr('disabled','disabled');
} else {
$(option).removeAttr('disabled');
}
});   
});

$('div.select', $parent).each( function(index, element) {                
var attribute_name = $(element).data('attribute-name');
var avaiable_options = current_options[attribute_name];

$(element).find('div.select-option').each(function(index, option) {
if (!avaiable_options[ $(option).data('value') ] ) {
$(option).addClass('disabled','disabled');
} else {
$(option).removeClass('disabled');
}
});   
});

calculator.trigger_callbacks();

});

$('select', $variation_form).change(function() {
var $parent = $(this).closest('.variation_form_section');
$('select', $parent).each( function(index, element) {
var optval = $(element).val();

optval = optval.replace("'", "&#039;");
optval = optval.replace('"', "&quot;");
calculator.set_selected( $(element).data('attribute-name'), optval);
});

var current_options = calculator.get_current();
$('select', $parent).each( function(index, element) {                
var attribute_name = $(element).data('attribute-name');
var avaiable_options = current_options[attribute_name];

$(element).find('option:gt(0)').each(function(index, option) {
var optval = $(option).val();

optval = optval.replace("'", "&#039;");
optval = optval.replace('"', "&quot;");

if (!avaiable_options[ optval ] ) {
$(option).attr('disabled','disabled');
} else {
$(option).removeAttr('disabled');
}
});

});

$('div.select', $parent).each( function(index, element) {                
var attribute_name = $(element).data('attribute-name');
var avaiable_options = current_options[attribute_name];

$(element).find('div.select-option').each(function(index, option) {
if (!avaiable_options[ $(option).data('value') ] ) {
$(option).addClass('disabled','disabled');
} else {
$(option).removeClass('disabled');
}
});   
});

calculator.trigger_callbacks();

}); 

//Fire defaults
$('div.select-option[data-default=true]').find('a').click();
$('select', 'form.cart').trigger('change', []);

});

function variation_manager(variations) {
this.variations = variations; 
this.find_matching_variation = function(selected) {

for (var v = 0;v<this.variations.length;v++) {
var variation = this.variations[v];
var matched = true;

//Find any with an exact match. 
for( var attribute in variation.attributes ) {
matched = matched & selected[attribute] != undefined && selected[attribute] == variation.attributes[attribute];
}

if (matched) {
return variation;
}
}

//An exact match was not found.   Find any with a wildcard match
for (var v = 0;v<this.variations.length;v++) {
var variation = this.variations[v];
var matched = true;

//Find any with an exact match. 
for( var attribute in variation.attributes ) {
matched = matched & selected[attribute] != undefined && (selected[attribute] == variation.attributes[attribute] || variation.attributes[attribute] == '');
}

if (matched) {
return variation;
}
}

return false;
}
}

function variation_calculator(keys, possibile, all_set_callback, not_all_set_callback) {    
this.recalc_needed = true;

this.all_set_callback = all_set_callback;
this.not_all_set_callback = not_all_set_callback;

//The varioius variation key values available as configured in woocommerce. 
this.variation_keys = keys;

//The actual variations that are configured in woocommerce. 
this.variations_available = possibile;

//Stores the attribute + values that are currently available
this.variations_current = {};

//Stores the selected attributes + values
this.variations_selected = {};

this.reset_current = function( ) {
for(var key in this.variation_keys) {
this.variations_current[ key ] = {};
for( var av = 0; av < this.variation_keys[key].length; av++ ) {
this.variations_current[ key ][ this.variation_keys[key][av] ] = 0;
} 
}
};

this.update_current = function( ) {
this.reset_current();

for( var i = 0; i < this.variations_available.length; i++ ) {
for(var attribute in this.variations_available[ i ]) {

var available_value = this.variations_available[ i ][attribute];
var selected_value = this.variations_selected[attribute];

if (selected_value && selected_value == available_value ) {
this.variations_current[ attribute ][ available_value ] = 1;//this is a currently selected attribute value
} else {

var result = true;
//Loop though any other item that is selected, checking to see if any DO NOT match.
for(var other_selected_attribute in this.variations_selected) {

if (other_selected_attribute == attribute) {
    //We are looking to see if any attribute that is selected will cause this to fail. 
    continue;
}

var other_selected_attribute_value = this.variations_selected[other_selected_attribute];
var other_available_attribute_value = this.variations_available[i][other_selected_attribute];
if ( other_selected_attribute_value ) {
    if ( other_available_attribute_value ) {
        if (other_selected_attribute_value != other_available_attribute_value) {
            result = false;
        }
    }
}
}

if (result) {
if (available_value) {
    this.variations_current[ attribute ][ available_value ] = 1;
} else {
    for (var av in this.variations_current[ attribute ]) {
        this.variations_current[ attribute ][ av ] = 1;
    }
}
}

}
}
}

this.recalc_needed = false;
};

this.get_current = function() {
if (this.recalc_needed) {
this.update_current();
}

return this.variations_current;
};

this.get_value_is_current = function( key, value ) {
if (this.recalc_needed) {
this.update_current();
}

return this.variations_current[ key ][ value ] === true;
};

this.reset_selected = function() {
this.recalc_needed = true;
this.variations_selected = [];
}

this.set_selected = function(key, value) {
this.recalc_needed = true;
this.variations_selected[ key ] = value; 
};

this.get_selected = function() {
return this.variations_selected;
}

this.trigger_callbacks = function(){ 
var all_set = true;

for (var key in this.variation_keys) {
all_set = all_set & this.variations_selected[key] != undefined && this.variations_selected[key] != '';
}

if (all_set) {
this.all_set_callback( this.variations_selected );
} else {
this.not_all_set_callback();
}
}
}; 
```

我花了 6 天的时间试图让它正常工作，而且我是 JS 的新手，所以任何帮助都将不胜感激。

更新：抱歉，您无法在没有登录的情况下查看坐席，这里：

URL [https://tummytrimmerz.com/wp-login.php](https://tummytrimmerz.com/wp-login.php) 用户：堆栈密码：堆栈

莱昂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:23:05.063

好的，对于任何知道 jQuery 的人来说可能会找到问题。cloudzoom jquery 有一个命令：

```
return false; 
```

在点击处理程序中。当页面只想切换主图像时，这会阻止浏览器打开具有标签的图像。

所以起初我评论说：

```
// return false; 
```

在点击处理程序中。这使我上面的问题消失了，但是画廊图像会将浏览器重定向到该图像，就像普通标签一样。

所以接下来我只是更换了：

```
return false; 
```

和：

```
event.preventDefault(); 
```

这会阻止默认操作（例如跟随链接）并且样本仍然有效，因为那是 JS 事件。

# angularjs - AngularUI sortable 不适用于多个应用程序

> ID：15486976
> 
> 赞同：2
> 
> 时间：2013-03-18T21:08:09.010
> 
> 标签：angularjs, angular-ui

我创建了带有可排序列表的 angularjs 应用程序。我的应用程序可以与其他不同的应用程序一起多次包含到页面中。（每个角度应用程序都是独立的用户控制）

```
var myapp = angular.module('myapp', ['ui']);
myapp.controller('controller', function ($scope) {
    $scope.list1 = ["1", "2", "3"];
});

angular.bootstrap($("#app1"), ['myapp']);
angular.bootstrap($("#app2"), ['myapp']); 
```

[http://jsfiddle.net/X2h8W/](http://jsfiddle.net/X2h8W/)

对于这种情况， ui-sortable 仅适用于页面中的最后一个应用程序。此代码：`angular.bootstrap(document, ['myapp']);`修复问题，但我希望页面上有几个独立的应用程序。

这是 angular-ui 错误吗？这是角度 ui 的一些配置吗？

# mysql - 带视图的sql查询

> ID：15486977
> 
> 赞同：1
> 
> 时间：2013-03-18T21:08:11.657
> 
> 标签：mysql, sql

我有以下数据库架构：

![图式](../Images/41e4ffbff7e732282174fe49e7c51782.png) 高分辨率图像在这里[http://s18.postimage.org/mlyw5gea1/schema2.png](http://s18.postimage.org/mlyw5gea1/schema2.png)

如你看到的 ：

演讲者直接与会话相关联。

一个部分直接与一个会话相关联。

扬声器通过扬声器函数间接关联到一个部分，然后是 secion_speakerfunction-join-table 直到该部分。

如何让有间接会议的所有演讲者不是直接会议之一

欢迎任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:28:36.690

不幸的是，我无法缩放您的图形，因此以下涉及一些猜测。

正如您已经说过的，有两种方法可以从任何给定的会话中获得相关的演讲者。首先，您可以获得与会话直接关联的发言人列表：

```
SELECT speaker.* FROM `session-speaker-join-table`
JOIN speaker 
  ON speaker.id=`session-speaker-join-table`.speaker_id
WHERE `session-speaker-join-table`.session_id=1234 
```

以下是如何通过扬声器函数间接链接扬声器列表：

```
SELECT speaker.* FROM section
JOIN `section-speakerfunction-join-table` 
  ON `section-speakerfunction-join-table`.section_id=section.id
JOIN speakerfunction 
  ON speakerfunction.id=`section-speakerfunction-join-table`.speakerfunction_id
JOIN speaker 
  ON speaker.id=speakerfunction.speaker_id
WHERE section.session_id=1234 
```

编辑：阅读您的评论后，我了解您想要查询 2 的结果减去查询 1 的结果。这可以通过将 a 添加`LEFT JOIN`到第二个查询然后检查是否不匹配来完成，如下所示：

```
SELECT speaker.* FROM section
JOIN `section-speakerfunction-join-table` 
  ON `section-speakerfunction-join-table`.section_id=section.id
JOIN speakerfunction 
  ON speakerfunction.id=`section-speakerfunction-join-table`.speakerfunction_id
JOIN speaker 
  ON speakerfunction.speaker_id = speaker.id
LEFT JOIN `session-speaker-join-table` 
  ON `session-speaker-join-table`.session_id=section.session_id 
 AND `session-speaker-join-table`.speaker_id=speaker.speaker_id
WHERE section.session_id=1234 AND `session-speaker-join-table`.speaker_id IS NULL 
```

（我还更改了表名并包含了反引号，我希望我能全部抓住它们。还重新格式化了查询以提高可读性。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:41:32.233

通过阅读[A Visual Explanation of SQL Joins](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)和这篇关于[net.tutsplus](http://net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-relationships/)的清晰文章和一些头发拉扯来刷新我的记忆后，我能够提出一个有效的查询。

```
从扬声器中选择 * 作为 spk
内连接 SpeakerFunction 作为 spkfun
    开启（spkfun.speaker_id = spk.id）
内连接 section_speakerfunction-join-table as s_spkfun
    上（s_spkfun.speakerFunction_id = spkfun.id）
内连接部分为 s
    上（s.id = s_spkfun.section_id）
内部加入会话为 sess1
    上（sess1.id = s.session_id）
left join session-speaker-join-table as sess-spk
    开启（sess-spk.speaker_id = spk.id）
离开加入会话为 sess2
    上（sess2.id = sess-spk.session_id）
其中 sess-spk.session_id 为空

```

如您所见，有很多内连接，然后是左外连接，以便能够在空 session_id 上过滤（where 子句）。

谢谢大家！

# ios - libupnp下的ios多线程套接字挂在send()上

> ID：15486979
> 
> 赞同：0
> 
> 时间：2013-03-18T21:08:17.080
> 
> 标签：ios, multithreading, sockets, freeze, dlna

在我的 iOS 应用程序（DLNA 媒体播放器）中，我看到了一个我不明白的挂起......我希望有人能解释一下。

我的应用程序是在位于 C++ 库之上的 Objective C 中构建的，其中一部分是 libupnp。为了记录，在查看下面的代码时，设置了编译标志 SO_NOSIGPIPE。

从广义上讲，该应用程序运行良好，至少在运行 iOS 6 的 iPod 和我的 iPad 上运行良好。它可以处理所有媒体播放器之类的事情。

**编辑：我对 iPhone 4 上的操作系统有误，我认为它是 6.x，但它是 5.1.1，值得。**

当我开始在 iPhone 4 (iOS 5.1.1) 和 iPhone 5 (iOS 6) 上测试我的应用程序时，就会出现问题......这告诉我我的代码中存在时间问题。

用户选择要在远程数字媒体接收器 (DMR) 上播放/显示的媒体项目。

我的代码调用libupnp，创建soap 命令来实现这一点。然后它调用 http_RequestAndResponse()，它创建套接字，connect()s 到主机，并调用 http_SendMessage，它调用 sock_read_write（我将在后面的消息中包含这个函数）来发送我构建的请求（POST 命令播放 DMR 上的媒体）。然后，使用同一个套接字，调用 http_RecvMessage（它再次调用 sock_read_write() 来接收字节）。此时，调用 select() 等待 DMR 对播放命令做出响应。

在不同的线程上，libupnp 的 Web 服务器收到对我们刚才说要播放的媒体文件位的请求。所以在另一个线程上，我用字节调用 http_SendMessage 来响应请求，它调用 sock_read_write() 将字节写入客户端。

sock_read_write 中的这个 send() 挂起。它不仅挂起 libupnp，而且意味着任何线程上的套接字上都没有更多的通信。

这些挂起的套接字似乎没有超时、死亡或以其他方式终止。当然，它是我正在构建的 DLNA 媒体播放器，关于世界状态的许多命令和报告都通过这些套接字传输，所以我的应用程序实际上变成了僵尸：它响应鼠标点击等等，但是你不能做任何有意义的事情。

我试过让 send() 非阻塞。我已经尝试调用 fcntrl(sock,F_SETFL, O_NONBLOCK) 将其设置为非阻塞，并在调用 send() 之前如果因任何原因失败则返回。

我已经尝试在 send() 上使用类似 MSG_NOWAIT（对 iOS 没有影响）的标志来发送（）。

这似乎是一个时间问题。在 iPad 和 iPod 上，我可以一直播放音乐，直到奶牛回家。在 iPhone 4 和 iPhone 5 上，我遇到了挂起。

有什么建议么？（如果您告诉我哪些具体回答了这个问题，我们很乐意接受对 RTFM、阅读手册页、阅读书籍等的建议……）

哦，sock_read_write() 的代码（来自 libupnp 1.6.18）：

```
/*!
 * \brief Receives or sends data. Also returns the time taken to receive or
 * send data.
 *
 * \return
 *  \li \c numBytes - On Success, no of bytes received or sent or
 *  \li \c UPNP_E_TIMEDOUT - Timeout
 *  \li \c UPNP_E_SOCKET_ERROR - Error on socket calls
 */
static int sock_read_write(
    /*! [in] Socket Information Object. */
    SOCKINFO *info,
    /*! [out] Buffer to get data to or send data from. */
    char *buffer,
    /*! [in] Size of the buffer. */
    size_t bufsize,
    /*! [in] timeout value. */
    int *timeoutSecs,
    /*! [in] Boolean value specifying read or write option. */
    int bRead)
{
    int retCode;
    fd_set readSet;
    fd_set writeSet;
    struct timeval timeout;
    long numBytes;
    time_t start_time = time(NULL);
    SOCKET sockfd = info->socket;
    long bytes_sent = 0;
    size_t byte_left = (size_t)0;
    ssize_t num_written;

    if (*timeoutSecs < 0)
        return UPNP_E_TIMEDOUT;
    FD_ZERO(&readSet);
    FD_ZERO(&writeSet);
    if (bRead)
        FD_SET(sockfd, &readSet);
    else
        FD_SET(sockfd, &writeSet);
    timeout.tv_sec = *timeoutSecs;
    timeout.tv_usec = 0;
    while (TRUE) {
        if (*timeoutSecs == 0)
            retCode = select(sockfd + 1, &readSet, &writeSet,
                NULL, NULL);
        else
            retCode = select(sockfd + 1, &readSet, &writeSet,
                NULL, &timeout);
        if (retCode == 0)
            return UPNP_E_TIMEDOUT;
        if (retCode == -1) {
            if (errno == EINTR)
                continue;
            return UPNP_E_SOCKET_ERROR;
        } else
            /* read or write. */
            break;
    }
#ifdef SO_NOSIGPIPE
    {
        int old;
        int set = 1;
        socklen_t olen = sizeof(old);
        getsockopt(sockfd, SOL_SOCKET, SO_NOSIGPIPE, &old, &olen);
        setsockopt(sockfd, SOL_SOCKET, SO_NOSIGPIPE, &set, sizeof(set));
#endif
        if (bRead) {
            /* read data. */
            numBytes = (long)recv(sockfd, buffer, bufsize, MSG_NOSIGNAL);
        } else {
            byte_left = bufsize;
            bytes_sent = 0;
            while (byte_left != (size_t)0) {
                /* write data. */
                num_written = send(sockfd,
                    buffer + bytes_sent, byte_left,
                    MSG_DONTROUTE | MSG_NOSIGNAL);
                if (num_written == -1) {
#ifdef SO_NOSIGPIPE
                    setsockopt(sockfd, SOL_SOCKET,
                        SO_NOSIGPIPE, &old, olen);
#endif
                    return (int)num_written;
                }
                byte_left -= (size_t)num_written;
                bytes_sent += num_written;
            }
            numBytes = bytes_sent;
        }
#ifdef SO_NOSIGPIPE
        setsockopt(sockfd, SOL_SOCKET, SO_NOSIGPIPE, &old, olen);
    }
#endif
    if (numBytes < 0)
        return UPNP_E_SOCKET_ERROR;
    /* subtract time used for reading/writing. */
    if (*timeoutSecs != 0)
        *timeoutSecs -= (int)(time(NULL) - start_time);

    return (int)numBytes;
} 
```

谢谢！

-肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:46:15.943

嗯，现在是不是很有趣……

我的代码有两个问题：

1) 有人更改了配置文件，并方便地从编译中删除了 -DSO_NOSIGPIPE。总是值得检查细节。

2) libupnp 中的 sock_read_write() 似乎有一个错误。

如果定义了 -DSO_NOSIGPIPE，则每次尝试发送或接收时，都会完成一次选择，并且只有 /then/ 是应用于套接字的 SO_NOSIGPIPE 选项。操作完成后，套接字的原始状态将再次设置。

当我第一次测试 -DSO_NOSIGPIPE 时，有时我仍然会得到 SIGPIPE。我最终通过在我的 main.m 中做这样的事情来解决它：

```
void sighandler(int signum)
{
    NSLog(@"Caught signal %d",signum);
}

int main(int argc, char *argv[])
{
    signal(SIGPIPE,sighandler);

    ... 
```

比我更聪明的人在想“白痴，你在一个地方处理一些 SIGPIPE，而在另一个地方处理一些！”

原来 select() 语句也可以返回 SIGPIPE。

我删除了上面的 sighandler，然后将 SO_NOSIGPIPE 属性应用到选择上方的“#ifdef SO_NOSIGPIPE”部分移动，问题就完全消失了。

如果 select() 由于 EPIPE 而失败，则 select() 返回 -1，它在接下来的几行中被捕获，并且函数以 UPNP_E_SOCKET_ERROR 退出，o 它可以被正确处理，而不是简单地被忽略。

我完全有可能完全误解了这里发生的事情，在这种情况下，我绝对期待接受教育。

但是，我当然又享受到了可靠的网络通信。

希望这可以帮助某人。

-肯

# c# - 如何以最高性能复制对象

> ID：15486981
> 
> 赞同：1
> 
> 时间：2013-03-18T21:08:21.557
> 
> 标签：c#, object, copy

按照[这个](https://stackoverflow.com/questions/78536/deep-cloning-objects-in-c-sharp)答案，我成功复制了我的对象。

但是，性能是我当前项目中的最高优先级。所以我做了一些单元测试并检查了执行需要多长时间。结果是平均 2 秒，而我预计最多 200 毫秒！我发现 90% 的时间都花在了对象复制器上。

有没有办法提高这种性能？还有其他复制对象的方法吗？有谁知道复制数组或列表的速度有多快？我会考虑使用这样的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T21:11:47.757

如果速度问题不依赖于完全通用的解决方案（特别是在这种情况下，因为在这种情况下，问题在一般情况下很难解决，性能确实会受到影响；在一般情况下，更容易的问题可以有效地解决） ，其中大多数通常依赖于序列化，这本质上是不高效的，因为大量的时间/精力都花在了字符串操作上。只需根据您知道的对象类型手动创建对象，然后根据您知道需要复制的内容手动复制相关字段。

还要确保只对任何不可变对象进行浅拷贝，而不是深拷贝，因为没有办法观察浅拷贝/深拷贝之间的区别。

# opencv - 计算机中似乎缺少 opencv_core244d.dll

> ID：15486985
> 
> 赞同：2
> 
> 时间：2013-03-18T21:08:39.857
> 
> 标签：opencv

嘿，我在这里按照 Windows 7 上的 OpenCV 2.4.4 安装指南[http://www.youtube.com/watch?v=cgo0UitHfp8](http://www.youtube.com/watch?v=cgo0UitHfp8) 并将所有系统路径变量链接到它们各自的目录。我还按照他在链接器和 C/C++ 属性中包含库的所有步骤，但我使用的是 vc11 而不是 vc10（他使用的是 opencv 2.4.3）。而且我能够很好地构建项目，它知道库在哪里。但是一旦我运行它，就会弹出一个窗口，并显示以下错误消息“opencv_core244d.dll is missing from your computer”。即使我指向正确的目录，它似乎也找不到 .dll 文件。有什么建议么？

编辑：我在网上读到，如果 .dll 文件不在同一个项目目录中，就会发生这种事情。所以我添加了 dll 文件，然后在尝试运行时出现以下消息：“MSVCP100.dll is missing from your computer”

我不是 dll 文件方面的专家。这是我第一次使用 Visual Studio。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:59:14.187

*.lib 文件用于构建，与 lib 文件同名的 *.dll 文件用于运行您的程序。因此，运行时路径将用于查找您的 dll 文件。
尝试编辑您的系统 %PATH% 变量（将 your-opencv-dir/build/your-platform/vc11/ *bin*添加到您的 %PATH% 中）并重新启动 Visual Studio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T22:18:55.677

缺少的 .lib 文件在构建时用于链接器。丢失的 .dll 文件只需将它们与已编译的程序放在一起。

然后它工作正常，因为我刚刚完成它。

dll文件在bin目录下，lib文件在lib目录下。其他几点，两种类型的 lib 文件，一种是否带有广告，取决于您正在调试或发布的版本。在 VS 2013 上，链接器依赖项标志需要从 NO 更改为 YES。除此之外，它只是查找文件的路径。

# php - 如何使用 curl GET 而不是 POST

> ID：15486988
> 
> 赞同：17
> 
> 时间：2013-03-18T21:08:45.787
> 
> 标签：php, curl

我很想使用 curl 打印来自 url 的返回。到目前为止，我的代码如下所示：

```
<?php
    $street = $_GET['street'];
    $city = $_GET['city'];
    $state = $_GET['state'];
    $zip = $_GET['zip'];

    $url = 'http://eligibility.cert.sc.egov.usda.gov/eligibility/eligibilityservice';
    $query = 'eligibilityType=Property&requestString=<?xml version="1.0"?><Eligibility xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="/var/lib/tomcat5/webapps/eligibility/Eligibilitywsdl.xsd"><PropertyRequest StreetAddress1="'.$street.'" StreetAddress2="" StreetAddress3="" City="'.$city.'" State="'.$state.'" County="" Zip="'.$zip.'" Program="RBS"></PropertyRequest></Eligibility>';
    $url_final = $url.''.$url_query;

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS,$query);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    $return = curl_exec ($ch);
    curl_close ($ch);

    echo $return;

?> 
```

我知道的唯一明显问题是被查询的服务器使用`GET`而不是`POST`. 这种方法有`GET`替代品吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-18T21:10:24.840

```
curl_setopt($ch, CURLOPT_POST, 0); 
```

Curl 默认使用 GET。您将其设置为 POST。如果需要，您可以覆盖它`curl_setopt($ch, CURLOPT_HTTPGET, 1);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T21:13:06.323

使用 file_get_contents() 函数
[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)

或者
`curl_setopt($ch, CURLOPT_HTTPGET, 1);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-03T17:37:37.420

这些年来，没有人给出正确的答案；构建查询字符串的方法是[`http_build_query()`](http://php.net/manual/en/function.http-build-query.php)与数组一起使用。这会自动转义所有内容并返回一个简单的字符串。

```
$xml = '<?xml version="1.0"?><Eligibility xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="/var/lib/tomcat5/webapps/eligibility/Eligibilitywsdl.xsd"><PropertyRequest StreetAddress1="'.$street.'" StreetAddress2="" StreetAddress3="" City="'.$city.'" State="'.$state.'" County="" Zip="'.$zip.'" Program="RBS"></PropertyRequest></Eligibility>';
$data = [
    "eligibilityType" => "Property",
    "requestString" => $xml
];
$query = http_build_query($data);
$url .= "?$query"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-24T10:40:15.733

利用

```
curl_setopt_array($ch, array(
CURLOPT_RETURNTRANSFER => 1,
CURLOPT_URL => "http://yourlink.com",
CURLOPT_USERAGENT => 'Codular Sample cURL Request')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T21:10:19.617

您在 URL 中缺少问号。应该是这样的：

```
$query = '?eligibilityType=Property&...'; 
```

此外，您的 URL 中的 XML 需要编码，例如使用 PHP 中的[urlencode()](http://php.net/manual/en/function.urlencode.php)函数。

# dojo - Dojo 连接事件处理程序被多次调用

> ID：15486994
> 
> 赞同：0
> 
> 时间：2013-03-18T21:09:10.127
> 
> 标签：dojo, event-handling

我的 HTML 页面中有一个按钮，我正在使用`dojo.connect()`它来附加一个`onclick`事件处理程序`button`。我在完成 ajax 调用后分配此事件处理程序。我遇到了一个问题，当我单击一次按钮时，事件处理程序**被多次调用。**

如果我调用为同一按钮上的同一事件分配事件处理程序的方法，是否会为该事件调用两次处理程序？还是道场足够聪明，只做一次？例如，

```
var i=3;
while(i==0){
 dojo.connect(dojo.byId('mybutton'),'onclick','hanlderMethod');
 i--;
} 
```

如果我点击“ ”会`handlerMethod`被叫三遍吗`mybutton`

如果这是真的，那么我的问题与此有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:15:49.123

handlerMethod 不会被多次调用。每个事件只有一次。因此，只有当您更改关系**（事件、处理程序）**时，它才会再次触发。这是一个jsfiddle示例：

[http://jsfiddle.net/Ktnab/](http://jsfiddle.net/Ktnab/)

```
function test() {
alert("test");
}

function test2() {
alert("test");
}

dojo.connect(dojo.byId("btn"), "onclick", test);
dojo.connect(dojo.byId("btn"), "onclick", test); 
```

查看有关 dojo connect 的这篇有趣的文章。

[http://www.ibm.com/developerworks/web/library/wa-dojoconnect/index.html?ca=drs-](http://www.ibm.com/developerworks/web/library/wa-dojoconnect/index.html?ca=drs-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T10:57:50.143

我遇到了类似的问题，当事件附件在循环之外完成时，这个问题得到了解决。

问候， 纳姆拉塔

# antlr - ANTLR：setUnknownTokenBoundaries() 中的错误？

> ID：15486998
> 
> 赞同：0
> 
> 时间：2013-03-18T21:09:15.980
> 
> 标签：antlr, antlr3

[CommonTree#setUnknownTokenBoundaries()](http://grepcode.com/file/repo1.maven.org/maven2/org.antlr/antlr-runtime/3.5/org/antlr/runtime/tree/CommonTree.java#CommonTree.setUnknownTokenBoundaries%28%29) 通过使用节点的第一个和最后一个子节点的边界来更新 AST 节点的令牌边界。这似乎假设 AST 的孩子是按令牌顺序排列的。但是，在构建 AST 时不会强制执行这样的排序。

这是一个错误吗？是否应该更新 setUnknownTokenBoundaries() 以在所有孩子中选择最小值/最大值，而不仅仅是使用第一个和最后一个孩子？还是我错过了什么...

提前致谢。