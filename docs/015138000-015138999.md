# StackOverflow 问答 15138000-15138999

# mysql - 如何在 mysql 列中搜索 json 编码值？

> ID：15138001
> 
> 赞同：3
> 
> 时间：2013-02-28T14:29:02.813
> 
> 标签：mysql, json, search

我在 mysql 列 ( `extraData`) 中存储了一些额外的表单数据作为 json。

示例数据

```
{"1":{"name":"sadsdaf ","surname":"sdafa","occupation":"sdaas","email":"dsasdaf@asdf.nl","barcode":"052355491"},"2":{"name":"sadafd","surname":"sdafa","occupation":"sddaf","email":"sda@daf.nl","barcode":"052355492"}} 
```

我想做一个搜索查询，它还搜索存储在 json 编码字段中的条形码？所以不仅如此

```
$sql = "SELECT name FROM visitors WHERE barcode = '".$barcode."'"; 
```

但是也

```
 $sql = "SELECT name FROM visitors WHERE barcode = '".$barcode."' OR extraData = '".$barcode."'"; 
```

我需要做什么才能`extraData`检查可变条形码并获得相应的姓名、姓氏等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T19:00:48.753

```
SELECT TRIM(BOTH '"' FROM SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(V.extraData,'"name":', -1),',',1),'}',1) 
 FROM visitors V
 WHERE  V.extraData LIKE '%"barcode"%'
   AND :barcode = TRIM(BOTH '"' FROM SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(V.extraData,'"barcode":', -1),',',1),'}',1); 
```

**LIKE '%"barcode"%'**过滤带有包含条形码值的字段 extraData 的行: **barcode**表示要匹配的值，TRIM 是去掉多余的双引号，嵌套的 SUBSTRING_INDEX 搜索：

> 从 '"barcode":' 的第一个匹配结尾开始的文本直到 ',' 的下一个匹配（如果有更多键/值）直到 '}' 的下一个匹配（如果它是最后一个键/该级别的值）

1.  请记住，如果您发现某个键/值始终存在于每一行中并且在任何地方都可以访问，您应该考虑向表/数据模型添加一个额外的字段并从中创建一个索引（即姓名、姓氏） .

2.  检索到的值必须“总是”解码。

    ```
    "Einstürzende Neubauten" is stored as "Einst\u00fcrzende Neubauten" 
    ```

3.  进行搜索和比较数字是“好的”，就像在示例中一样（有时不需要修剪双引号，就好像你 json_encode 一个整数 var 它将被存储为 "number":99 ）。但小数的存储取决于语言环境“1,5”/“1.5”

4.  搜索和比较字符串更棘手：您必须“jsonencode”要匹配的值

    ```
    "https://www.google.com" is stored as "https:\/\/www.google.com" 
    ```

5.  检查您的[数据规范化](https://en.wikipedia.org/wiki/Database_normalization)技能。

6.  检查您的[优化](http://dev.mysql.com/doc/refman/5.0/en/optimization.html)技能

7.  使用[在线工具](http://www.functions-online.com/json_encode.html)查看您的数据将如何编码

# android - 将 Android SDK 更新到 API 级别 17 时出错

> ID：15138003
> 
> 赞同：2
> 
> 时间：2013-02-28T14:29:07.263
> 
> 标签：android, eclipse-plugin, adt

我已将 ADT 版本更新到 Ver 21。更新 ADT 并重新启动 Eclipse 后，我得到了下面的对话框......

![在此处输入图像描述](../Images/8ec3ba6a8f6dd2e40d1d917fbaa1360a.png)

打开 SDK 管理器后，我只能看到 API 级别 17 更新的一部分，但不是全部。

![在此处输入图像描述](../Images/117fa49b68bb5956fecbba1f9f0b1a1e.png)

一旦我尝试更新包，提示不允许我更新包，但它说 API 级别 17 丢失。

![在此处输入图像描述](../Images/cc24ed98061ad6e603fd00c3386c4946.png)

我正在运行 Eclipse 3.7。可以做些什么来正确更新 API 级别 17？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:41:55.080

在 Eclipse 中：

1.  转到`help`屏幕顶部。
2.  选择`check for updates`

您首先需要更新 IDE，然后更新 SDK。

这是因为 Android SDK 与 Eclipse 插件分开更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:34:39.270

您可能必须先去更新 sdk。您可以转到 - 帮助 - 并检查更新并更新 sdk。完成后，您可以重新启动 sdk 管理器并更新 APK。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:48:42.713

尝试从 重新加载您的 sdk 管理器`Packages->Reload`。愿它奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T14:40:43.717

我有同样的问题...看一下命令行，有一个在安装时无法重命名的文件夹。我通过手动重命名文件夹并重新安装更新来解决此问题。

我使用此链接更新[http://dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)

# jquery - Jquery 选项卡加载微调器

> ID：15138007
> 
> 赞同：0
> 
> 时间：2013-02-28T14:29:17.907
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

任何人都知道为什么这个 jsfiddle 中的微调器根本没有显示：

[http://jsfiddle.net/bJ9sq/1/](http://jsfiddle.net/bJ9sq/1/)

代码：

```
$(function() {
    $( "#tabs" ).tabs({
      beforeLoad: function( event, ui ) {
        ui.jqXHR.error(function() {
          ui.panel.html(
            "Couldn't load this tab. We'll try to fix this as soon as possible. " +
            "If this wouldn't be a demo." );
        });
      },
        spinner: '<img src="http://www.ajaxload.info/cache/FF/FF/FF/00/00/00/1-0.gif"/>'
    });
  }); 
```

我所有的搜索都说微调器选项应该在标签加载时显示一个图标，但我从来没有在这里看到它......

看来他们可能已经删除了这个选项？如果是这样，当前在加载缓慢的面板时显示微调器的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T14:40:14.977

两年前 jQuery UI 1.10（在 1.9 中已弃用）删除了微调器选项。

[http://jqueryui.com/upgrade-guide/1.9/#deprecated-spinner-option](http://jqueryui.com/upgrade-guide/1.9/#deprecated-spinner-option)

[http://forum.jquery.com/topic/tabs-api-redesign](http://forum.jquery.com/topic/tabs-api-redesign)

您需要使用 beforeLoad 事件来添加您自己的微调器，并使用 load 事件来移除它。

# android - 这个 Handler 还会泄漏 Context 吗？

> ID：15138011
> 
> 赞同：3
> 
> 时间：2013-02-28T14:29:36.453
> 
> 标签：android, android-context, android-handler

我知道，如果您`Handler`直接初始化 a 并在 a 中使用它，`Activity`它会泄漏`Context`（由[Alex Lockwood](http://www.androiddesignpatterns.com/2013/01/inner-class-handler-memory-leak.html)提供），例如

```
public class SampleActivity extends Activity {

  private final Handler mLeakyHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
      /* ... */
    }
  }
} 
```

所以我使用了以下方法

```
private static class StaticHandler extends Handler {

    private final WeakReference<SampleActivity> mSampleAct;

    private StaticHandler(SampleActivity act) {
        mSampleAct = new WeakReference<SampleActivity>(
                act);
    }

} 
```

然后我将它初始化如下

```
 public class SampleActivity extends Activity {
    private Handler myHandler = new StaticHandler(this) {
        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            processTask(msg.obj);
        }
    };
} 
```

我想知道我的`Handler`ie myHandler 是否仍然会泄漏`Context`，我怎么能确定它不会？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:33:33.597

使用 a`WeakReference`绝对是避免内存泄漏的明智方法。代码在上下文中看起来不错，但确保它不会泄漏内存的最佳方法是使用 DDMS 内存分析器。阅读更多：[android 中的内存分析器工具？](https://stackoverflow.com/questions/6080906/memory-analyzer-tool-in-android)

# uml - 如何在 UML 中建模既是实体对象又是参与者的概念？

> ID：15138016
> 
> 赞同：2
> 
> 时间：2013-02-28T14:29:57.337
> 
> 标签：uml

您将如何在 UML 中对以下情况进行建模：

服务员使用餐厅管理系统来跟踪餐桌上的服务。它还用于跟踪哪些服务员为哪些桌子服务。

这意味着服务员的概念既是参与者（因为服务员是系统的用户）又是实体对象（因为系统会跟踪哪个服务员服务于哪些表）。

然而，根据 UML，一个概念不能既是实体又是参与者，因为根据定义，“参与者是与系统交互的外部实体”。

我总是可以使用不同的名称来区分这些概念，但这似乎是人为的。

你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:42:23.137

![在此处输入图像描述](../Images/ec82cbff6f48358076298c6908e4b21a.png)

代表服务员的系统实体与实际服务员不同，后者是作用于系统的外部代理。

要么使用不同的名称，要么将参与者和实体放在不同的命名空间或模型中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:59:43.080

仅仅因为服务员使用该系统并不会强迫您将该演员命名为“服务员”。想想其他可能以同样方式使用该系统的员工，例如主持人/女主人或轮班经理。

使用该系统的演员通常履行可以在不同演员之间共享的角色。你必须概括演员所扮演的角色。如果任何员工可以参与该用例，则角色可能是“员工”。

即使您没有采用这种方法，您仍然可以使用其他同义词来区分实体和参与者。演员可能是“服务员”，实体可能是“服务员”。值得花时间想出好名字，尤其是常用术语。如果归根结底，请忘记 UML 关于使用不同名称的“说法”。自从UML问世以来，人们就一直在使用它，如果你决定重用一个名字，没有人会让你失望。

我想说的是 UML 试图给你一些好的建议，如果你使用相同的名字，它会在以后引起问题，也表明故事还有更多。

# facebook - 登录时启动应用程序

> ID：15138021
> 
> 赞同：1
> 
> 时间：2013-02-28T14:30:10.743
> 
> 标签：facebook, process, background

我正在尝试编写一个 facebook 应用程序，它将（我什至不知道它是否可能）在用户登录过程后开始运行。我的意思是，用户不必访问应用程序页面来执行我想做的事情，它就像一个后台进程，在登录后会在有限的时间内运行。

那么，这可能吗？我在我找过的任何地方都没有找到这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:41:59.750

我只能给你一个“也许”。

您的起始页将仅包含 facebook sdk 功能，以完成登录。如果登录完成重定向到应用程序的根页面，则设置一个计时器，以在有限的时间内授予访问权限。如果计时器用完 -> 重定向到登录页面。

# c# - Null 处理的扩展方法不适用于 linq for xml

> ID：15138024
> 
> 赞同：3
> 
> 时间：2013-02-28T14:30:23.297
> 
> 标签：c#, xml, linq-to-xml

尝试获取可能不存在的子树下的 xml 标记的值时，我遇到了 nullexception 问题。

扩展处理程序在无法在现有子树上找到标记时工作得很好，但在查找不存在的子树中的标记时似乎无法处理。

在这种情况下，子树是 summaryData，它可能存在也可能不存在，并且尝试获取 addressLine1 是它无法处理的地方`null`，我得到了错误

> System.NullReferenceException 发生，Message=Object 引用未设置为对象的实例。

这是 xml，为了清楚起见，删减了，但结构是正确的：

```
 <record>
  <accounts>
    <account >
    </account >
  </accounts>
  <summaryData>
    <Date>2013-02-04</Date>
    <address >
      <city>Little Rock</city>
      <postalCode>00000</postalCode>
      <state>AR</state>
      <addressLine1>Frank St</addressLine1>
    </serviceAddress>
  </summaryData>

</record> 
```

我的 C# 代码是：

```
 xmlDoc.Descendants("account")
                //select (string)c.Element("account") ;
                select new
                {
                    //this works fine
                    Stuffinxml = c.Element("stuffinxml").Value,
                    //this field may not be there, but the handler handlers the exception correctly here when it as the correct root (account)
                    otherstuff = CustXmlHelp.GetElementValue(mR.Element("otherstuff")),
                    //this is the problem, where the summaryData root does not exist (or moved somewhere else)
                    street_address = GetElementValue(c.Element("summaryData").Element("serviceAddress").Element("addressLine1"))

                }; 
```

我处理 null 的扩展方法是：

```
 public static string GetElementValue(this XElement element)
    {
        if (element != null)
        {
            return element.Value;
        }
        else
        {
            return string.Empty;
        }
    } 
```

任何帮助将不胜感激，因为我不明白为什么当子树不存在时它会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:36:20.887

> 汇总数据可能存在也可能不存在

这就是为什么。当您嵌套调用时，您必须对它们**全部**进行空检查。

其中任何一项都可能为空：

```
c.Element("summaryData").Element("serviceAddress").Element("addressLine1") 
```

如果没有复杂的条件，就没有*很好的*解决方法：

```
street_address = c.Element("summaryData") != null
    ? c.Element("summaryData").Element("serviceAddress") != null
        ? GetElementValue(c.Element("summaryData").Element("serviceAddress").Element("addressLine1"))
        : string.Empty
    : string.Empty; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:34:31.053

如果`summaryDate`元素不存在，则

```
c.Element("summaryData").Element("serviceAddress").Element("addressLine1") 
```

会抛出 a`NullReferenceException`因为你试图调用`Element()`一个空引用 ( `c.Element("summaryData")`)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T00:45:39.223

如前所述，您的例外是由于您正在传递多个嵌套查询

```
c.Element("summaryData").Element("serviceAddress").Element("addressLine1") 
```

是写作的等价物：

```
var x1 = c.Element("summaryData");
var x2 = x1.Element("serviceAddress")
var x3 = x2.Element("addressLine1") 
```

因此，如果 、 或 中的任何一个`c`为`x1`空`x2`，您将得到一个`NullReferenceException`.

`LINQ`使用多个空值检查的纯解决方案的一种可能替代方法是`XPath`用于构建表达式。

使用`XPath`，而不是在每个级别进行空检查，您可以改为编写表达式：

```
street_address = GetElementValue(c.XPathSelectElement("/summaryData/serviceAddress/addressLine1")) 
```

这将评估整个表达式，如果它不完整存在，它将返回`null`，但不会像您的纯 LINQ 查询那样抛出异常。

# iphone - 如何在 Facebook 共享期间显示应用名称代替“ios”

> ID：15138029
> 
> 赞同：0
> 
> 时间：2013-02-28T14:30:42.977
> 
> 标签：iphone, ios, objective-c, facebook, ios6

我正在使用此代码进行共享，但它显示 ios 作为应用程序。它如何显示我的应用程序名称？

```
- (IBAction)postToFacebook:(id)sender
{
    if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
        SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
        [controller setInitialText:@"First post from my iPhone app"];
        [self presentViewController:controller animated:YES completion:Nil];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:35:18.870

为此，您必须在 Facebook 上注册您的应用，并且必须通过 Facebook SDK（而不是社交框架）进行分享。

Facebook sdk 教程在[这里](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)

# fancybox - 将 Pinterest 按钮添加到 Fancybox 标题

> ID：15138031
> 
> 赞同：1
> 
> 时间：2013-02-28T14:30:49.450
> 
> 标签：fancybox, pinterest

我在网上找到了这个脚本，它在fancybox v2 中添加了一个pin it 按钮。这是工作示例：

[http://scottgale.com/blogsamples/fancybox-pinterest/index.html](http://scottgale.com/blogsamples/fancybox-pinterest/index.html)

我在 Hubspot CMS 上的一个网站上工作。对于熟悉的人，Fancybox 1.3.4 包含在 Hubspot 中。而且您真的无法编辑任何与之关联的文件或脚本。

Fancybox 用作图库模块（或小部件），因此用户可以上传图像。

我想知道是否有办法修改这个原始脚本以使用我的站点上实现的 fancybox 1。

这是我的页面：

[http://www.signdealz.com/gallery-test/](http://www.signdealz.com/gallery-test/)

这是脚本：

```
<script type="text/javascript">
        //NOTE: this uses fancybox 2
        $(document).ready(function() {
            $('.fancybox').fancybox({
                //set the next and previous effects so that they make sense
                //the elastic method is confusing to the user
                nextEffect: 'fade',
                prevEffect: 'fade',

                //set the position of the title
                helpers : {
                    title: {
                        // title position options:
                        // 'float', 'inside', 'outside' or 'over'
                        type: 'inside'
                    }
                },

                beforeShow: function () {

                    //if you already have titles
                    //on your fancybox you can append
                    if(this.title) {
                        //set description to current title
                        //this will set what posts
                        var description = this.title;

                        //add pinterest button for title
                        this.title = '<a href="http://pinterest.com/pin/create/button/?url='+
                                encodeURIComponent(document.location.href)+
                                '&media='+
                                //put the path to the image you want to share here
                                encodeURIComponent('http://scottgale.com/blogsamples/fancybox-pinterest/'+this.href)+
                                '&description='+description+'" class="pin-it-button" count-layout="horizontal">'+
                                '<img border="0" src="http://assets.pinterest.com/images/PinExt.png" title="Pin It" align="absmiddle"/></a>'
                                //add title information
                                +'<span>'+this.title+'</span>';

                    //if you don't already have titles
                    //you can just make the title the pinterest button
                    } else {
                        //add pinterest button for title
                        this.title = '<a href="http://pinterest.com/pin/create/button/?url='+
                                encodeURIComponent(document.location.href)+
                                '&media=http%3A%2F%2Fwww.homesburlingtonvermont.com'+
                                encodeURIComponent(this.href)+
                                '&description=Pin from ScottGale.com" class="pin-it-button" count-layout="horizontal">'+
                                '<img border="0" src="http://assets.pinterest.com/images/PinExt.png" title="Pin It" /></a>';

                    }
                }
            });
        });
    </script> 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:03:27.913

这是一个示例，**说明**如何使用*选项*和. 如果你的锚点有一个，那么它将沿着按钮显示，否则按钮将单独显示。**`title``titlePosition``titleFormat``title`**

 **此脚本基于您为 v2.x 找到的脚本，但调整为 v1.3.4 的选项。

```
$(".fancybox").fancybox({
    "titlePosition": "inside",
    "titleFormat": function () {
        return this.title ? 
              '<div class="myPint" style="height: 26px"><a href="http://pinterest.com/pin/create/button/?url='+
               encodeURIComponent(document.location.href)+
              '&media='+
               encodeURIComponent('http://scottgale.com/blogsamples/fancybox-pinterest/'+this.href)+
              '&description='+this.title+'" class="pin-it-button" count-layout="horizontal">'+
              '<img border="0" src="http://assets.pinterest.com/images/PinExt.png" title="Pin It" align="absmiddle"/></a>'+
              '<span>'+this.title+'</span></div>' 
              : 
              '<div class="myPint" style="height: 26px"><a href="http://pinterest.com/pin/create/button/?url='+
               encodeURIComponent(document.location.href)+
              '&media=http%3A%2F%2Fwww.homesburlingtonvermont.com'+
               encodeURIComponent(this.href)+
              '&description=Pin from ScottGale.com" class="pin-it-button" count-layout="horizontal">'+
              '<img border="0" src="http://assets.pinterest.com/images/PinExt.png" title="Pin It" /></a>'+
              '<span>&nbsp;</span></div>'
    }
}); 
```

见**[JSFIDDLE](http://jsfiddle.net/MF7JY/)**

**注意**：这是为 fancybox v1.3.4

* * *

**编辑**（2014 年 1 月 30 日）：

新`[JSFIDDLE](http://jsfiddle.net/4ztUL/)`使用 CDN 处理 fancybox 文件，以避免`403 forbidden`在从 fancybox.net 服务器提供文件时可能出现的错误。**

# html - 尝试在 Selenium IDE 中单击具有特定值的行的超链接

> ID：15138036
> 
> 赞同：0
> 
> 时间：2013-02-28T14:30:56.940
> 
> 标签：html, xpath, selenium-ide

我是 Selenium 的新手，我需要做两件事 1\. 记下 html 上的文件名，但它是字符串的一部分，所以不知道如何在 Selenium IDE 2 中连接它。在表格中，搜索相关文件后，我想单击该行的其他列之一中的链接。所以对于文件 EMED.pdf，我想点击 Requested 链接

HTML 片段：

```
<td>
<a class="OSfileLink" target="selenium_blank7934" href="/Practice/DownloadFile/8057329d-21df-4a44-baee-2068fc01b7dd" rel="EMED.pdf" style="background-color: transparent;">EMED.pdf</a>
</td>
<td></td>
<td> 27/02/2013 16:19:16 </td>
<td>
<a class="eApproval " data-toggle="modal" data-fileid="8057329d-21df-4a44-baee-2068fc01b7dd" href="#" rel="Requested (28/02/2013)" style="background-color: transparent;">Requested (28/02/2013)</a>
</td> 
```

到目前为止，我有：

命令：单击目标：//a[contains(text(),'Requested')]/following-sibling::a[contains(text(),'EMED.pdf')] 值：

这会引发一个错误：[error] Element //a[contains(text(),'Requested ')]/following-sibling::a[contains(text(),'EMED.pdf')] not found

我可以单独“查找”单个 xpath，但它们不能一起工作。任何帮助将不胜感激。

*   编辑仍然不喜欢连接，但可以通过点击被识别来解决它。任何有关连接的帮助将不胜感激

*****编辑连接：对于：href="/Practice/DownloadFile/8057329d-21df-4a44-baee-2068fc01b7dd" 我想要整个链接中的 guid：8057329d-21df-4a44-baee-2068fc01b7dd。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:26:19.843

看起来您的订单已交换，请尝试替换`following-sibling`为`preceding-sibling`. 另请注意，您需要`<a>`节点，但以下兄弟功能正在检查 之后的下一个节点`<a>`，即`<td>`，因此您需要从`<td>`节点开始并检查其中每个`<a>`节点的内容。

或者反过来，您可以更改开始搜索的节点。如果您想要“EMED.pdf”，但前提是下一个节点是“请求的”，请尝试以下操作：

`//td[contains(a/text(),'EMED.pdf')]/following-sibling::td[contains(a/text(),'Requested')]/a`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:49:28.517

根据您提出的 html，我认为这可行，我使用 firefox xpath tester 对其进行了测试

> //.[td[a[contains(text(),'EMED.pdf')]]]//a[contains(text(),'Requested')]

# java - 调用方法添加输入

> ID：15138040
> 
> 赞同：0
> 
> 时间：2013-02-28T14:31:16.890
> 
> 标签：java, methods

我正在编写一个程序，其中用户输入 10 个数字，并在输入时将它们加在一起，然后显示平均值。到目前为止，我有这个，我一直在想在循环体中放什么来实现这一点。谢谢！

```
import java.util.Scanner;

public class InputMethod
{
public static void main(String[] args)
{
    int loop_Value;
    int end_Value = 10;
    for(loop_Value =0; loop_Value < end_Value; loop_Value++)
    {
        readInteger();

    }
}

private static int readInteger()
{
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter an integer");
    while (!scan.hasNextInt()) 
    {
        scan.next();
        System.out.println ("Bad input. Enter an integer");
    }
    int input = scan.nextInt();
    {
        return input;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:32:56.867

添加一个整数值，求和。在循环体中放

```
sum += readInteger(); 
```

在末尾

```
System.out.println("The sum is " + sum); 
```

然后因为数字的数量是固定的。

```
System.out.println("The average is " + (sum / end_Value)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:50:56.077

您只阅读了输入：它缺少对*readInteger返回的单个数字的记忆*

*这是一种可怕*的工作代码，不符合 Oracle/Sun 准则。

```
public class InputMethod {

    List<Integer> numbers = new ArrayList<Integer>();

    public static void main(String[] args) {

        int endValue = 10;

        InputMethod inputMethod = new InputMethod();
        for (int loop_Value = 0; loop_Value < endValue; loop_Value++) {
            int number=inputMethod.readInteger();/*storage the input*/

            inputMethod.numbers.add(number);
        }
        int sum=0;
        for (int loop_Value = 0; loop_Value < inputMethod.numbers.size(); loop_Value++) {
            sum=sum+inputMethod.numbers.get(loop_Value); /*partial sum*/
        }

        System.out.println("Sum of "+inputMethod.numbers+"= "+sum);
        System.out.println("Average of "+inputMethod.numbers+"= "+(double)(sum/inputMethod.numbers.size()));

    }

    private int readInteger() {
        Scanner scan = new Scanner(System.in);
        System.out.println("Enter an integer");
        while (!scan.hasNextInt()) {
            scan.next();
            System.out.println("Bad input. Enter an integer");
        }
        int input = scan.nextInt();
        {

            return input;
        }

    }

} 
```

一些观察：

*   变量的名称没有*_*；仅当名称不稳定时才可以插入他；
*   最好不要在循环之外声明*for*循环的变量：每个变量都必须具有最小范围到程序中；
*   *System.out.println("输入错误。请输入一个整数");* 应该是*System.err.println ("Bad input. Enter an integer");* : sysout 表示正常消息，syserr 表示错误。

最好通过学习一门语言来了解和应用正确的约定；之后就更难了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:43:14.547

```
 int sum=0;
    for(loop_Value =0; loop_Value < end_Value; loop_Value++)
    {
      sum += (readInteger());
    }
    double avg = sum/end_value; 
```

# c++ - 如何设置字母的值？C++

> ID：15138049
> 
> 赞同：-1
> 
> 时间：2013-02-28T14:31:34.317
> 
> 标签：c++, arrays, string, letters, alphabet

好吧，我必须做一个任务，以独特的方式对数组元素进行排序。

因此，例如，如果我输入第一个字符串：BOB，我必须这样做：2+15+2（因为它们在字母表中的位置）然后除以字符数 /3 并对所有输入的字符串执行此操作，然后按从高到低对它们进行排序。:)

我的问题是，我如何为 A、B、C、D、E 设置值 1、2、3、4、5 ......（仅限大字母）。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:35:13.817

如果底层编码是顺序的，例如`ascii`.

```
letter - 'A' + 1 
```

一种更强大和更通用的方法是检查[`char_traits`](http://en.cppreference.com/w/cpp/string/char_traits)字符类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:36:53.143

你需要定义一个函数

```
int weight(const std::string& s); 
```

然后通过 char 迭代字符串 char 并执行以下操作：

```
w = ch - 'A' + 1 
```

您还可以检查字符是否在“A”和“Z”之前或假设。

您需要阅读有关[ASCII的更多信息](http://en.wikipedia.org/wiki/ASCII)

**编辑：** 权重函数代码（简化）：

```
int weight(const std::string& s) {
    int sum = 0, i = 0;
    for(i = 0; i < s.size(); i++) {
        char ch = s[i];
        sum += ch - 'A' + 1;
    }
    return sum/i;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T14:39:29.470

如果您正在使用 ASCII 机器，@StoryTeller 的答案有效。否则，您可以创建一个数组以在两者之间进行映射：

```
const char letters[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
static const int numbers [ 256 ] = { 0 };

for ( size_t index = 0; index < sizeof letters; ++index ) {
    numbers [ letters [ index ] ] = index + 1;
}

assert ( numbers [ 'A' ] == 1 )
assert ( numbers [ 'Z' ] == 26 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T14:37:23.970

要获取值，您可以使用以下代码：

```
int getValue(char which)
    {
    int ret = 0;
    switch(which)
       {
       case 'a' : ret = 1 ; break;
       case 'A' : ret = 27 ; break;
       case 'b' : ret = 2 ; break;
       case 'B' : ret = 28 ; break;
       // and so on....
       }
    return ret;
    }
  int result = 0;
  while(....)
     {
     result = result + getValue(myarray[counter]);
     } 
```

您只需要将字符串转义到数组并循环遍历它...

# javascript - 将所选类添加和删除到父 div

> ID：15138052
> 
> 赞同：2
> 
> 时间：2013-02-28T14:31:41.127
> 
> 标签：javascript, jquery, html, css

好的，现在我让滑动打开 ul 显示所有列表元素，现在我希望单击的标题栏添加一个选中状态，然后在关闭时删除该状态...

UL 上面的 div 有一个 .regionHeader 的类

这是一个标记的例子

```
<div class="regionHeader">title of the region</div>
<ul class="region"><li>the region i'm hiding/showing</li></ul> 
```

这是javascript

```
var stockists = {

start: function() {
        $('.region').hide();

            $('.regionTitle').each(function(){

                $(this).click(function(e){
                    e.preventDefault();

                    $(this).parent().next('.region').slideToggle(300);
                });                     
            });
        }            
};

$(stockists.start); 
```

我一直在尝试 addClass 但它似乎只是添加类而不是删除它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T14:34:27.910

你能不使用[toggleClass()](http://api.jquery.com/toggleClass/)

这样，当您需要时，该类将被添加/删除。

```
$(this).parent().toggleClass("className");
$(this).parent().next('.region').slideToggle(300); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:35:43.360

```
$(this).parent().toggleClass('activeTitle'); // toggling the class on the parent
$(this).parent().next('.region').slideToggle(300); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:34:21.030

要从元素中删除一个类，你必须使用[removeClass](http://api.jquery.com/removeClass/)

```
 $(element).removeClass("classname"); 
```

# c - 使用 #define 后的 C 语法错误

> ID：15138056
> 
> 赞同：-1
> 
> 时间：2013-02-28T14:31:55.120
> 
> 标签：c

我正在使用 Microsoft Visual Studio 2010 编写 C 代码。这是我定义的一段代码：

```
#define setImagVal_Matrix(matrix,type,x,y,val) \
(getImagVal_Matrix(matrix,type,x,y) = (val)) 
```

然后我在这个函数中使用它：

```
for(bands=0; bands < no_of_bands; bands++) {
outputmatrix[bands] =  new_Matrix(yrange,xrange,getDataType_Image(inputImage),getDataFormat_Image(inputImage));
    for(r=0; r < no_of_rows; r++) {
        for(c=0; c < no_of_cols; c++) {
            if(c<x1 || c>x2 || r<y1 || r>y2)
            {
                continue;
            }
            else
            {
                  setImagVal_Matrix(outputmatrix[bands],getDataType_Matrix(outputmatrix[bands]),c-x1,r-y1,123);
            }
        }
    }
} 
```

但是，它在 setImagVal_Matrix 函数调用上向我显示了此错误：
**“错误：预期表达式”**

当我构建解决方案时，这里是在同一行显示语法错误的输出：
**1>c:\cviplab-net-2010\cviplab\crop.c(50): error C2059: syntax error : ')'**

花了几个小时后，我仍然找不到错误的原因。知道如何解决吗？

编辑：
我分析了预处理文件并发现了语法错误，但我仍然不知道如何修复它。这是导致错误的行：
`((((((outputmatrix[bands])->data_type) **)((outputmatrix[bands])->iptr))[r-y1][c-x1]) = (123));`
错误是针对`)` 之后的`**`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:40:41.530

停止使用宏作为函数。尝试这个：

```
inline void setImagVal_Matrix(int matrix, int type, int x, int y, int val) {
    getImagVal_Matrix(matrix, type, x, y) = val;
} 
```

根据需要更改`int`类型，您将获得编译器帮助您提供有用的错误消息，而不是神秘的错误消息。哎呀，它甚至可以帮助您找出参数类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:41:11.727

在您的宏中，您对看起来不像左值的东西进行赋值。你的意思是`==`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:55:56.283

我想建议至少为宏参数使用括号：

```
#define setImagVal_Matrix((matrix),(type),(x),(y),(val)) \
       (getImagVal_Matrix((matrix),(type),(x),(y)) = (val)) 
```

另外，要查看它是否真的是括号问题，您可以尝试查看预处理文件。

但是，实际上为此目的使用宏并不是一个好的做法。如果您关心函数调用，您可以创建函数`inline`：

```
inline void setImagVal_Matrix(matrix,type,x,y,val) {
    getImagVal_Matrix(matrix,type,x,y) = val;
} 
```

尽管这`inline`只是**对编译器的建议**，但这将避免很多编译错误并且几乎不调试运行时错误。

# ios - 我失去了生成 .p12 的认证，如何生成新的？

> ID：15138059
> 
> 赞同：1
> 
> 时间：2013-02-28T14:32:05.900
> 
> 标签：ios, app-store, push-notification, csr

目前，我在 appStore 中发布了一个应用程序，但我不知道为什么推送通知不起作用。我的服务器中的 .p12 文件有问题，因为当我的服务器尝试生成推送并将其发送到 Apple 环境时，我可以在日志中看到下一个错误：

> 02-27 11:42:11,868 [IOSPushNotificationSender] 错误 javapns.notification.PushNotificationManager - 交付错误：javapns.communication.exceptions.InvalidCertificateChainException：无效证书链（收到致命警报：certificate_unknown）！验证您提供的密钥库是根据规范生成的...
> 
> 2013-02-27 11:42:11,874 [IOSPushNotificationSender] 错误 camMan.server.mobile.ApplePNSSender - javapns.communication.exceptions.InvalidCertificateChainException：无效证书链（收到致命警报：certificate_unknown）！验证您提供的密钥库是根据规范生成的...

好的，我尝试生成一个新的 .p12 文件，但我不记得到底哪个是原始证书 (.cer)。

我尝试从配置文件下载（.cer），但是当我使用钥匙串访问打开它时，该证书没有任何私钥。

所以，我迷路了，我不知道我能做什么......我可以生成一个新的 .p12 文件而不必修改我的应用程序中的任何认证或任何内容吗？我不想在 appStore 中上传我的应用程序的新版本......我只需要知道如何生成或下载或设置新的有效 .p12 文件并再次发送推送通知。

此外，我检查了配置门户中的所有设置，一切都已启用，像我拥有的​​其他应用程序一样活动......所以我认为唯一的问题是 .p12

此外，我仍然拥有与第 12 页相同的密钥/密码……只是我丢失了 CSR (.cer)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:11:18.657

听起来您的机器上缺少私钥 - 它已被删除，或者它属于另一台 Mac。

在任何一种情况下，您都可以通过上传新的 CSR（由 Mac 上的 Keychain Access 应用程序创建）简单地撤销现有的 vert 并创建一个新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:00:45.093

如果没有私钥，您的证书和配置文件将毫无价值。在仔细阅读 Apple 关于该主题的文档后，将它们全部撤消、全部删除并重新生成新的证书和规定。如果 Xcode 项目没有自动执行此操作，您必须修改 Xcode 项目中的构建设置以使用新设置。这不会影响已获批准且在 App Store 中的应用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:29:08.033

由于您在开发阶段有推送通知工作，因此您可能熟悉将证书安装到服务器的过程。

如果您丢失了旧文件，您可以随时创建和安装新证书。

您必须注意两件事：

**发展阶段：**

您正在使用开发推送 SSL 证书

你的目标服务器是：gateway.sandbox.push.apple.com

**生产阶段：**

您正在使用生产推送 SSL 证书

你的目标服务器是：gateway.push.apple.com

# sql - 列名错误

> ID：15138064
> 
> 赞同：1
> 
> 时间：2013-02-28T14:32:20.163
> 
> 标签：sql, sql-server, case-when

我有以下代码，我试图将客户的生日分成几代人，由于某种原因，它给了我一个列名错误，这就是我一直写我的 case when 语句的方式，但现在它似乎不起作用。而且我遇到了无法解析查询文本错误，我认为这与代码的 GenY 部分有关

```
SELECT Birthdate, (
    CASE WHEN Birthdate <= '12/31/2964' THEN BabyBoomer 
         WHEN Birthdate >= '1/1/1980' THEN GenY 
         WHEN Birthdate >='1/1/1965' AND <='12/31/1979' THEN GenY 
         ELSE NULL 
    END) AS Generation
FROM  dbo.All_Employee_Detail
GROUP BY Birthdate 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:33:13.610

如果这些值 ( *`BabyBoomer`,`GenY`* ) 是字符串而不是列，则需要用单引号将其括起来，因为它们是字符串文字而不是标识符。

```
SELECT Birthdate, 
      (CASE WHEN Birthdate <= '12/31/2964' 
              THEN 'BabyBoomer' 
            WHEN Birthdate >= '1/1/1980'  
              THEN 'GenY' 
            WHEN Birthdate BETWEEN '1/1/1965' AND '12/31/1979' 
              THEN 'GenY' 
            ELSE NULL 
       END) AS Generation
FROM  dbo.All_Employee_Detail
GROUP BY Birthdate 
```

**更新 1**

```
SELECT Birthdate, 
      (CASE WHEN Birthdate BETWEEN '1/1/1980' AND '12/31/2964' 
              THEN 'BabyBoomer' 
            WHEN Birthdate BETWEEN '1/1/1965' AND '12/31/1979' 
              THEN 'GenY' 
            ELSE NULL 
       END) AS Generation
FROM  dbo.All_Employee_Detail
GROUP BY Birthdate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:42:04.310

我认为这可能是您的日期字符串或列名或两者兼而有之。尝试将它们放入`ISO format`(ie; `yyyymmdd`) 并且如果`BabyBoomer`并且`GenY`不是列名，那么您需要将它们标记为字符串`'`

另外`CASE`声明应该*返回*一个`single data type`.

```
SELECT Birthdate, (
    CASE WHEN Birthdate >= '19650101' AND Birthdate <= '19800101' THEN 'GenY' 
         WHEN Birthdate >  '19800101' AND Birthdate <= '29641231' THEN 'BabyBoomer'
         ELSE NULL 
    END) AS Generation
FROM  dbo.All_Employee_Detail
GROUP BY Birthdate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:53:12.833

查看您的查询，我认为您可以按照 JW 所说的那样做并且仍然简化您的查询......因为看起来您在不需要时使用了另一个子句，因为两个子句会产生相同的结果。哦，我们离 2964 年还有点远。:p

```
 SELECT Birthdate, 
          (CASE WHEN Birthdate <= '12/31/1964' 
                  THEN 'BabyBoomer' 
                WHEN Birthdate > '12/31/1964'
                  THEN 'GenY' 
                ELSE NULL 
           END) AS Generation
    FROM  dbo.All_Employee_Detail
    GROUP BY Birthdate 
```

# asp.net - 本地主机不打开网站

> ID：15138067
> 
> 赞同：0
> 
> 时间：2013-02-28T14:32:24.280
> 
> 标签：asp.net, iis, iis-8

我在 Visual Studio 2012 的 ASP.NET 中创建了一个空白 Web 应用程序。

当我点击使用谷歌浏览器调试时，谷歌浏览器在导航栏上打开文本本地主机，但它没有打开网站并继续加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:34:13.957

转到项目属性页面并创建一个虚拟目录。确保您的起始页指向此。然后导航到`http://localhost/myapp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T15:09:04.510

您可以检查的一件事是以下内容（在 Windows 系统上运行）：

编辑“C:\Windows\System32\drivers\etc\hosts”，并确保您有这一行：“127.0.0.1 localhost”

就我而言，我在那里有“0.0.0.0 localhost”。我希望这会有所帮助。

# css - Flex 在运行时更改 css 属性

> ID：15138072
> 
> 赞同：2
> 
> 时间：2013-02-28T14:32:41.563
> 
> 标签：css, apache-flex, flex-spark, spark-skinning

我正在 flex 中开发一个仪表板应用程序，它是[flex 仪表板](http://www.adobe.com/devnet/flex/samples/dashboard.html)的副本。这里有多个面板显示不同的内容。我想要的是每当用户点击任何特定面板说例如“年度收入”时，我只想突出显示该特定面板。

所以基本上所有处于初始状态的面板都处于“非活动”状态，但是一旦用户点击它，它就会变为活动状态，为用户提供更好的体验，因为他知道他正在使用“xyz”面板，其余的会进入非活动状态。

所以我所说的“活动”和“非活动”状态是指，在任何 HTML 页面中，当我们将鼠标悬停在任何超链接上时，它会变为“蓝色”（例如），因此我将其称为活动和非活动状态。

现在，谈论面板。

该面板具有定义其布局的皮肤。为了满足我的要求，我尝试将“css”应用于面板。现在我以这种方式应用了css

```
 public class Pod extends Panel
    {
      ...properties
         public function init():void
         {
             setStyle('styleName',"panelOff"); 
         }
    } 
```

现在，在这个类本身中，我正在处理面板上的“CLICK”。所以在点击事件中我所做的基本上是，

```
setStyle('styleName',"panelOn"); 
```

由于面板正在应用皮肤，因此我需要更改皮肤中包含的组件的属性。这样我必须能够访问皮肤中的 css 属性。

在皮肤文件中我正在做这样的事情

```
override protected function updateDisplayList(unscaledWidth:Number,
                                                        unscaledHeight:Number):void
{                     
    setStyle('border-alpha', hostComponent.getStyle('border-alpha'));
} 
```

> 所以我的问题是，这是满足我要求的正确方法吗？
> 
> 如何访问皮肤类中主机组件的 css 属性？
> 
> 在我的 main.mxml 中，我定义了样式文件。因此，如果样式文件包含一个名为“panelOn”的样式类，并且如果我将该类提供给面板，那么它将能够访问与该类关联的样式吗？

请不要建议使用面板的 setStyle 方法放置每个 css 属性，因为这样对我来说使用 css 文件没有任何优势，而且 css 样式也会很糟糕。

如果还有其他更好的解决方案，请分享您的意见。我希望我很清楚。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:11:39.367

满足您要求的最佳方式 - 使用火花状态。面板组件和 Mxml 皮肤，有两种状态：活动和非活动（或您的新状态）。面板组件具有设置当前皮肤状态的逻辑。如果你想使用 css 来保存属性，每个州都应用自己的样式名作为皮肤。

主要应用：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" 
               xmlns:classes="classes.*">
    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";
        @namespace classes "classes.*";

        classes|Pod
        {
            skinClass : ClassReference("skins.PodSkin");
        }

        .active
        {
            backgroundColor: #ff0000;
        }

        .inactive
        {
            backgroundColor: #00ff00;
        }

    </fx:Style>

    <classes:Pod x="800" width="300" height="300" />
</s:Application> 
```

Pod 组件：

```
package classes
{
    import flash.events.MouseEvent;

    import spark.components.Panel;

    public class Pod extends Panel
    {

        private var _isActive:Boolean = false;

        public function Pod()
        {
            super();
        }

        override protected function childrenCreated():void 
        {
            super.childrenCreated();

            addEventListener(MouseEvent.CLICK, onClickHandler, false, 0, true);
        }

        protected function onClickHandler(event:MouseEvent):void
        {
            _isActive = !_isActive;

            invalidateSkinState();
        }

        override protected function getCurrentSkinState():String
        {
            if (_isActive)  return "active";

            return "inactive";
        }
    }
} 
```

以及为每个状态设置样式名称的 PodSkin mxml 皮肤的一部分：

```
 <s:SparkSkin 
        xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        xmlns:fb="http://ns.adobe.com/flashbuilder/2009" 
        blendMode="normal" mouseEnabled="false" 
        styleName.active="active" styleName.inactive="inactive"
        minWidth="131" minHeight="127" alpha.disabled="0.5" alpha.disabledWithControlBar="0.5">
<s:states>
    <s:State name="normal" />
    <s:State name="active" />
    <s:State name="inactive" />
    <s:State name="disabled" />
    <s:State name="normalWithControlBar" stateGroups="withControls" />
    <s:State name="disabledWithControlBar" stateGroups="withControls" />
</s:states> 
```

享受弹性

# html - 移动设备宽度和高度

> ID：15138076
> 
> 赞同：0
> 
> 时间：2013-02-28T14:32:46.850
> 
> 标签：html, mobile, responsive-design

目前我设计一个响应式网页设计。我使用流畅的设计，包括不同宽度的媒体查询。

我无法找到当前可用的不同尺寸的不同小工具，任何人都可以帮助提供适用于三星、黑莓、htc、诺基亚、亚马逊、LG、摩托罗拉、MicroMax 等的移动设备宽度类型。还有什么应该是常见的最广泛使用的宽度。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:34:25.920

这是“常见”设备和查询的列表...

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T02:11:55.193

这是另一个详细列表，其中包含许多特定设备...

[http://nmsdvid.com/snippets/#](http://nmsdvid.com/snippets/#)

它对于为不太常见的设备宽度等创建额外的响应式查询非常有用。

但请注意查询，它们是针对这些特定设备编写的，因此有些使用最小/最大宽度和高度的组合以及像素密度来定位特定设备（并排除其他设备）。

# java - html中的样式属性：文本表达式错误

> ID：15138077
> 
> 赞同：1
> 
> 时间：2013-02-28T14:32:47.153
> 
> 标签：java, jsp, styles, struts, scriptlet

我有以下标签：

```
<html:text styleClass="span2" property="groupManagerId" styleId="groupManagerId" maxlength="19" size="10" readonly="" /> 
```

哪个工作正常。当我添加一个`style`属性时：

```
<html:text styleClass="span2" style="display:<%=(""+FVConstants.NORMAL).equalsIgnoreCase(groupData.getGroupType())?"none":" "%>;" property="groupManagerId" styleId="groupManagerId" maxlength="19" size="10" readonly="" /> 
```

我收到以下错误：

```
org.apache.jasper.JasperException: /pages/POS0085_group_modify.jsp(95,61) Unterminated &lt;html:text tag 
```

我在 `label`和`div`标签下有相同的属性，它工作正常。我改为

```
 <%String displayValue=(""+FVConstants.NORMAL).equalsIgnoreCase(groupData.getGroupType())?"none":" ";
                                String displayAttr="display:"+displayValue; %> 
```

和

```
<html:text styleClass="span2" style="display:<%=displayValue%>" property="groupManagerId" styleId="groupManagerId" maxlength="19" size="10" readonly="" /> 
```

它有效。第一次尝试有什么问题？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:08:07.690

当初学者尝试使用`?`运算符评估字符串时，通常会发生此错误。评估的表达式应该用括号括起来

```
<html:text styleClass="span2" style="display:<%=((""+FVConstants.NORMAL).equalsIgnoreCase(groupData.getGroupType())?"none":" ")%>;" property="groupManagerId" styleId="groupManagerId" maxlength="19" size="10" readonly="" /> 
```

# javascript - Javascript中的递归异步回调

> ID：15138078
> 
> 赞同：0
> 
> 时间：2013-02-28T14:32:50.190
> 
> 标签：javascript, recursion, callback, closures

关于[这个问题](https://stackoverflow.com/questions/15122378/recursive-javascript-method-scope)，我正在尝试添加一个回调来取回数据。所以我尝试了这个：

```
var subgroupIds = [];
var that = this;
this.getSubGroups = function (groupId,callback) {
    var anotherObject = this;
    this.getGroups("groupId="+groupId, function(groups) {
        if ($.isEmptyObject(groups)) {
            return;
        } else {
            $.each(groups, function(index,group) {
                subgroupIds.push(group.id);
                that.getSubGroups(group.id);
            });
            anotherObject.callback(group.id);
        }
     });
} 
```

我以为在上一个问题之后我对闭包有了更好的理解，但我想我没有......我收到以下错误：

```
Uncaught TypeError: Object [object Window] has no method 'callback' 
```

我在这里做错了什么？

**编辑**

以下是 getGroups 的内容：

```
this.getGroups = function(filter,callback,error_callback) {
    this.getJSON('/'+apiVersion+'/groups/',function(data){
        // run through the filter engine
        output = runFilter(data, filter);
        callback(output);
    },error_callback);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:48:31.587

不需要`anotherObject.callback(group.id);`，你需要的是`callback(group.id);`

看起来您对对象感到`this`困惑`arguments`。

`arguments`保存传递给函数的所有参数：

```
var aFunction = function () {
    for (var i = 0; i < arguments.length; i++) {
        console.log(arguments[i]);
    }
};

aFunction(1, 2, 3, 4); // 1, 2, 3, 4 
```

虽然`this`基本上是指函数的“所有者”（粗略地说，就是在点之前发生的任何事情）：

```
var aFunction = function () {
    console.log(this);
};

var object1 = { f: aFunction, name: "object1" };
var object2 = { f: aFunction, name: "object2" };

object1.f(); // Object { name="object1", f=function()}
object2.f(); // Object { name="object2", f=function()}
aFunction(); // Window 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:40:25.517

回调是一个参数，它不绑定到上下文。

我想你想要的是调用回调`anotherObject`作为`this`值，对吧？

您可以通过以下方式实现：

```
$.proxy(callback, anotherObject)(group.id); 
```

或者如果你只想执行回调，并且你想使用闭包，你需要添加：

```
this.callback = callback; //before
var anotherObject = this; 
```

# java - 如果包含方法调用，则为单行

> ID：15138080
> 
> 赞同：0
> 
> 时间：2013-02-28T14:32:55.697
> 
> 标签：java

我有一个有条件地调用另一个的方法。例如：

```
public boolean contionallyDoSomething(boolean something){
    boolean didSomething = false;
    if(something){
        theSomething();
        didSomething = true;
    }
    return didSomething;
}

public void theSomething(){
    //do something
} 
```

我想我可以将其重写为：

```
public boolean contionallyDoSomething(boolean something){
    boolean didSomething =something && theSomething();
    return didSomething;
}

public boolean theSomething(){
    //do something
    return true;
} 
```

第二种方法感觉更整洁，我个人喜欢它。但是，我有点厌倦了编写这样的代码，因为它可能会回来咬我。缺点是什么？有什么优点/缺点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:36:29.250

这段代码的最大缺点是可读性，尤其是当它提交到共享存储库时。易于呈现意图，`if statement branching`因为压缩的代码需要第二次查看（对于普通人）来破译它在做什么。

至于优点，好吧，您编写的代码更少，并且在某种程度上编译器对其进行了优化以更快地运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:37:56.853

你为什么不试试这个？：

[http://en.wikipedia.org/wiki/Strategy_pattern](http://en.wikipedia.org/wiki/Strategy_pattern)

所以它将来不会咬你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:36:41.820

```
public boolean contionallyDoSomething(boolean something) {
    if (something) {
        theSomething();
    }
    return something;
} 
```

当然，这更有意义，而不是返回与通过的布尔值相同的第二个布尔值？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T14:42:08.747

你正在涉入主观的水域。所有的优点和缺点都与可读性有关。就个人而言，我会更进一步并将其写为：

```
public boolean contionallyDoSomething(boolean something) {
    return something && theSomething();
} 
```

但我发现代码的紧密性增加了可读性。其他人可能（并且将会）不同意。

# opengl - 为什么 glGetFramebufferAttachmentParameter 不起作用？

> ID：15138085
> 
> 赞同：2
> 
> 时间：2013-02-28T14:33:12.520
> 
> 标签：opengl, glew

我正在我的设备上尝试以下支持 OpenGL3 的代码（“OpenGL 版本字符串：3.3.0 NVIDIA 310.19”）：

```
glBindFramebuffer(GL_FRAMEBUFFER, 0);
checkGlError();
glGetFramebufferAttachmentParameteriv(GL_FRAMEBUFFER, GL_FRONT_LEFT, GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE, &ret);
checkGlError();

if (ret == GL_NONE)
    throw std::runtime_error("something is really bad there or FRONT_LEFT isn't your default buffer. Check it!");

glGetFramebufferAttachmentParameteriv(GL_FRAMEBUFFER, GL_FRONT_LEFT, GL_FRAMEBUFFER_ATTACHMENT_RED_SIZE, &ret);
checkGlError(); 
```

`checkGlError`是一个宏，它将检查 OpenGL 错误并告诉发生错误的行。

我尝试使用 Qt 和 SDL 初始化我的上下文。此外，我使用 glew 来访问该功能。

在第一次打电话给我时，`glGetFramebufferAttachmentParameteriv`我得到了 INVALID_ENUM 错误。会是什么？

# javascript - 使用现有 HttpProxy 添加嵌套 ajax 调用时，远程过滤值不会应用于网格

> ID：15138087
> 
> 赞同：0
> 
> 时间：2013-02-28T14:33:19.603
> 
> 标签：javascript, ajax, extjs, http-proxy

对于远程过滤，每当我单击过滤器/排序时，`Forms.asp`使用代理触发，并
在我尝试下面的脚本时自动重新加载，重新加载 extjs 网格并`Forms.asp`返回带有过滤网格数据的新 xml，它工作正常。

```
var gridStore = new Ext.data.Store({
            gridId  :'d_grid',
            reader: new Ext.data.XmlReader({ record: etc }, etc etc),
            proxy: new Ext.data.HttpProxy({ url: "Forms.asp?", 
            timeout: 120000 }),
            baseParams:{
                XML:$$("XML").value,                                
                some more params                
            },          
            data: doc,
            remoteSort: true}); 
```

但是当我尝试使用一些 WCF 调用来修改它时，例如：

```
var gridStore = new Ext.data.Store({
                gridId  :'d_grid',
                reader: new Ext.data.XmlReader({ record: etc }, etc etc),
                proxy: new Ext.data.HttpProxy({ url: "Forms.asp?", 
                timeout: 120000  ,

            success: function (response) {
                FilterXml = response.responseText;

                created new XmlDoc= with somechanges(FilterXml)

                Ext.Ajax.request({
                             method: 'POST',
                             url:'/mayo/Service.svc/GetnewXML',
                             params: {'strIPXML': XmlDoc.xml}});
            }}),
                baseParams:{
                    XML:$$("XML").value,                                
                    some more params                
                },          
                data: doc,
                remoteSort: true}); 
```

在这里，我正在捕捉早期 asp 的响应，并进一步修改它，将其发送到 Web 服务，新添加的 ajax 返回与上述情况相同的格式化 xml（使用检查`success: function{ alert etc}`），

但是“新的 xml 没有被馈送到网格，因为它在上面的情况下被馈送”
没有抛出错误..
使用 extjs 3.4
请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:28:06.853

经过大量阅读后解决了，问题是，我想，ajax 将`store.load`使用 HttpProxy 使用的重新加载数据，经过阅读和喧嚣后，我知道它可能不适用于 ajax，所以现在我使用`store.loaddata`它并且它工作了。

```
var gridStore = new Ext.data.Store({
                gridId  :'d_grid',
                reader: new Ext.data.XmlReader({ record: etc }, etc etc),
                proxy: new Ext.data.HttpProxy({ url: "Forms.asp?", 
                timeout: 120000  ,

            success: function (response) {
                FilterXml = response.responseText;

                created new XmlDoc= with somechanges(FilterXml)

                Ext.Ajax.request({
                             method: 'POST',
                             url:'/mayo/Service.svc/GetnewXML',
                             params: {'strIPXML': XmlDoc.xml}

                             success: function (response) {
                                                FormXML = PC.getXmlStr(response.responseXML);
                                                doc = OrchGenericObj.GetXMLObj(FormXML, 0);
                                                Ext.getCmp('dashboard_gd').store.loadData(doc);
                            }    });
            }}),
                baseParams:{
                    XML:$$("XML").value,                                
                    some more params                
                },          
                data: doc,
                remoteSort: true}); 
```

# c++ - CPP_TEST.exe 中 0x00af7230 处的未处理异常：0xC0000005：访问冲突写入位置 0x00abcdef

> ID：15138088
> 
> 赞同：-4
> 
> 时间：2013-02-28T14:33:24.837
> 
> 标签：c++, c, linux-kernel, operating-system, interrupt

我越来越`Access violation writing location at 0xABCDEF`。我尝试了很多方法来解决这个问题。但最后没能做到。

```
#define xyz 0xABCDEF
#define ptr (UINT16 *) (xyz)

int main()
{

    //int *ptr;
    //ptr = (int*)malloc(sizeof(int));
    *ptr = 0;
    return 0;
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:35:19.057

你不能这样做，因为你试图使用的内存位置不属于你的进程。您的程序实际上没有适当的权限来执行此操作。

尝试手动猜测和定义内存地址不是一个好习惯，因为使用此类地址基本上会导致未定义的行为情况。

实际上，`0xABCDEF`您尝试使用的地址看起来像是从某种教程中获取的示例。可能，您会将其替换为特定于您的系统和操作系统配置的实际地址？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:42:58.477

您无权将不属于您的进程的位置填充为零。

如果要在特定位置填充零，则必须首先分配该内存...您必须删除行“#define ptr ...”并在注释代码中执行类似操作：

```
#include <stdio.h>
#include <stdlib.h>

int main(){
    int* ptr = (int*) malloc(sizeof(int));
    *ptr = 0;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:05:26.740

操作系统只会为您的程序分配一定数量的内存。您可以使用 malloc() 请求额外的内存，然后您将从堆中获得一块连续的内存，此分配再次由操作系统完成。

记住这几点，

> 您的程序无法指定您希望分配内存的内存地址。
> 
> 您的程序无法访问任何随机内存地址，因为它将被虚拟内存管理器监控，任何违规都会引发硬件异常。
> 
> 将您的内存分配到一个特定的地址肯定是没有逻辑的。

# hibernate - 休眠带注释的本机更新到一列

> ID：15138091
> 
> 赞同：0
> 
> 时间：2013-02-28T14:33:32.387
> 
> 标签：hibernate, spring-data-jpa

我正在尝试将一列更新为空，但它给了我错误。我这样做了，将数据转换为变量，然后将其重置。但我很有趣为什么这不起作用：

```
@Modifying
@Query(value="UPDATE fact_header SET fact_id=null WHERE id=:ids", nativeQuery=true)
public void updateAssignedFact(@Param("ids") int id); 
```

我收到此错误：

```
Caused by: javax.persistence.TransactionRequiredException: Executing an update/delete query 
```

我看到了一些关于交易的提示。我正在使用 2 个数据库。

编辑，此代码有效：

```
@Modifying
@Transactional /* just added this line */
@Query(value="UPDATE fact_header SET fact_id=null WHERE id=:ids", nativeQuery=true)
public void updateAssignedFact(@Param("ids") int id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:49:11.607

你必须需要一笔交易。

根据您的特定环境，有不同的方法可以做到这一点：

[https://community.jboss.org/wiki/SessionsAndTransactions](https://community.jboss.org/wiki/SessionsAndTransactions)

您将在调用 updateAssignedFact 之前开始事务并在之后结束它。可能包括其他操作；我不知道你在做什么。我认为您不能（或不应该）尝试处理数据实体类中的事务。

# ruby-on-rails-3 - 使用 Javascript 更新 Rails 参数

> ID：15138093
> 
> 赞同：1
> 
> 时间：2013-02-28T14:33:44.120
> 
> 标签：ruby-on-rails-3, coffeescript

调用 Javascript 函数时是否可以更改 Params 哈希中的值？我有一个隐藏的 Div，比如说 DIV1，它根据选择字段中的选定值变得可见，在 DIV1 中，我有一个只读文本字段，其值设置为辅助方法返回的值。

这个帮助方法使用了一个动态的 find_by ，它取决于 Params 的值，但我猜当 select 的值发生变化时 param Hash 不会改变（因为它不是整页刷新？）。Please, how do I Achieve updating this so that when the select Value changes, the new value is reflected in the params hash. 我在 form_for 标签中有 :remote=>true 。有比我更好的方法吗？

rails 视图中的 Select 字段

```
#finance_year
<%=f.select :financeyear, options_for_select(finance_year),{ :include_blank => 'Select a
Financial Year' } %> 
```

以及该选择的 onchange 事件

```
jQuery ->
$('#finance').hide()
value = "Select a Financial Year"
$('#finance_financeyear').change ->
selected = $('#finance_financeyear :selected').text()
$('#finance').show()
$('#finance').hide() if selected is value 
```

辅助方法

```
def amount_owed(student)
financeyear = params[:financeyear]
@thisstudent = Finance.find_last_by_user_id(@student.user_id,
:conditions => {:financeyear => financeyear } )
if(@thisstudent)
  @amount_owed= @thisstudent.amount_owed
else
  student.department.amount
end
end 
```

我感谢任何帮助，我希望我能够聪明地提出这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:07:51.387

答案是 AJAX。

首先，我们需要添加一条新路由来`config/routes.rb`执行`amount_owed()`真正的操作：

```
get '/finance_years/amount_owed/:student_id/:financeyear' => "finance_years#amount_owed" 
```

接下来，我们将创建一个默认视图，以便在`amount_owed()`调用该操作时返回：

**/app/views/finance_years/amount_owed.html.erb**

```
<%= @amount_owed %> 
```

所以，那部分很容易。现在我们需要编辑 amount_owed 操作，以便它可以使用我们的参数：

**/app/controllers/finance_years_controller.rb**

```
def amount_owed(student)
    financeyear = params[:financeyear]
    @thisstudent = Finance.find_last_by_user_id(params[:student_id],
      :conditions => {:financeyear => financeyear } )

    if(@thisstudent)
       @amount_owed= @thisstudent.amount_owed
    else
       @amount_owed = student.department.amount
    end
end 
```

这样，我们可以从 params 哈希中传入财政年度和学生 ID，并每次获得一个 amount_owed。现在，为了让我们的 coffeeScript 访问当前的 student_id 和 finance_year 变量，我将在视图文件的表单中添加几个隐藏字段：

**/app/views/finance_years/_form.html.erb**

```
<%= hidden_field_tag :student_id, @student_id %>
<%= hidden_field_tag :finance_year, @finance_year %> 
```

The last trick is to edit the coffeeScript, firing an asynchronous GET request whenever the select box changes.

**/app/assets/javascripts/finance_years.js.coffee**

```
$('#finance_financeyear').change ->
   student_id = $("#student_id").val()
   finance_year = $("#finance_year").val()
   selected = $('#finance_financeyear :selected').text()
   $('#finance').show() unless selected == value
   $.get "/finance_years/amount_owed/#{student_id}/#{finance_year}", (response)->
      $('#finance input[type=text]').load(response) 
```

这就是我在离开我的 Rails 开发机器时所能做的一切。如果出现其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:43:10.020

我不是 Rails 专家，但您无法直接从 javascript 修改服务器端代码。您将需要调用服务器（通过表单提交或通过 ajax 请求）来告诉服务器进行自我更新。

澄清一下，服务器代码负责页面的初始渲染，但是一旦模板被渲染，它就不存在于客户端页面上。所以你不能直接从coffeescript/javascript 修改它。您需要将请求发送回服务器来处理。

# facebook - facebook graph api上的字段扩展功能是否算作使用更少的cpu而不是不使用它？

> ID：15138094
> 
> 赞同：0
> 
> 时间：2013-02-28T14:33:44.340
> 
> 标签：facebook, facebook-graph-api

最近我们在我们的 facebook 应用程序上收到了一些速率限制警告，所以我正在尝试优化 api 调用。我更关心的是与“Calls Are Too CPU Intensive”相关的“gr:get:Post 337%”。不幸的是，由于 facebook 上的这个错误 (#151246715012616)，我们被迫检索我们从以前的 feed api 调用中获得的帖子，因为更新的时间不正确，在这个错误解决之前我们无法阻止调用它。

我想弄清楚的是，如果使用指定我们需要的字段的字段参数调用 getPost API，是否会被认为比在没有字段限制的情况下调用它的 CPU 密集度更低。这些例子是：

[http://graph.facebook.com/?259479457407_10150913810457408?fields=id,updated_time](http://graph.facebook.com/?259479457407_10150913810457408?fields=id,updated_time) ,...

对比

[http://graph.facebook.com/?259479457407_10150913810457408](http://graph.facebook.com/?259479457407_10150913810457408)

谢谢，我非常感谢有类似问题的任何人分享他们的经验

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:49:07.130

在切换到检索必填字段后，只有许多 API 警告消失了，所以我认为它在 facebook 方面的 CPU 密集度较低。

# events - RFC 4733 事件持续时间在结束位

> ID：15138097
> 
> 赞同：1
> 
> 时间：2013-02-28T14:34:03.210
> 
> 标签：events, sip, rfc, dtmf

在阅读[RFC 4733](https://www.rfc-editor.org/rfc/rfc4733)时，它没有明确说明事件持续时间是否不应在最后 3 个电子位中增加。事件中的重要信息似乎是 m-bit、timestamp 和 e-bit。如果事件持续时间确实在最后 3 个 e-bits 中增加，将 3 个 e-bits 中的每一个视为单独的事件并将音调重复三倍是否有意义？还是应该接收到的第一个 e-bit 是事件的结束而最后 2 个 ebit 被忽略？我有一个 Wireshark 捕获，它显示事件持续时间在 3 个 ebit 中增加，我很想理解这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:56:54.573

鉴于事件的最后一个数据包[可能被传输 3 次](https://www.rfc-editor.org/rfc/rfc4733#section-2.5.1.4)，持续时间字段应该单调增加。在评论中的讨论中，我们因此看到三个数据包，每个数据包都设置了 E 位，持续时间分别为 720、800 和 880。这表明数据包间隔 80 毫秒发送，因为[数据包中的持续时间字段](https://www.rfc-editor.org/rfc/rfc4733#section-2.3.5)表明事件“一直持续到此参数所指示的时间”。

然而，它仍然是一个单一的事件，所以你的事件播放应该持续到你收到的第一个数据包的持续时间。

例如，您看到三个数据包到达，但如果第一个数据包（持续时间为 720）没有到达，您会看到第二个数据包（持续时间为 800），您应该播放 800 毫秒的音调。

也就是说，我希望发件人以*相同的*持续时间发送结束数据包，而不是您所看到的。这可能是发件人的错误。（[传输](https://www.rfc-editor.org/rfc/rfc4733#section-2.5.1.4)必须导致持续时间增加，但这是*重传*。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T09:39:30.617

发件人显然违反了 RFC，因为

1.  事件结束时应设置“E”位
2.  持续时间根据事件的持续时间增加

如果持续时间仍在增加，则显然事件尚未结束，但如果设置了 E 位，则事件已结束 - 即矛盾

另一方面（来自 2.5.2.2）

1.  一旦接收器收到事件的结束，它应该停止播放音调。
2.  一旦播放停止，接收器不应重新启动音调。
3.  接收方可以根据保留的历史记录以及当前数据包的时间戳和事件代码确定它对应于一个已经播放和失效的事件。在这种情况下，必须忽略该事件的进一步报告

ie你可以从时间戳看出事件已经结束，在这种情况下不应该重复事件

# python - Python中的Map Reduce错误

> ID：15138104
> 
> 赞同：0
> 
> 时间：2013-02-28T14:34:16.853
> 
> 标签：python, python-2.7, mapreduce

以下是 python 中的 map-reduce 脚本，用于查找特定列的计数。输入文件如下：

```
 301838690844557314|#awkwarddate first date at     quiznoes|334910568|gabriellarichh|20130213|awkwarddate|Point|40.456664|-74.265167
 301838679280861185|RT @jimmyfallon: Ended my very first date by saying, "Take it easy." And  then my dad drove me home.  #awkwarddate|618516844|heyitsbrooke456|20130213|awkwarddate|NULL|NULL|NULL
 301838678026768384|RT @jimmyfallon: Hashtag game! Tweet out a funny, weird, or embarrassing story about a date you've been on and tag w/ #awkwarddate. Could be on our show!|116973704|VegasPhotog|20130213|awkwarddate|NULL|NULL|NULL 
```

map reduce脚本是：map代码是：

```
import sys

def read_input(file):
    for line in file:
        # split the line into words
        yield line.split('|')

def main(separator='|'):
    # input comes from STDIN (standard input)
    data = read_input(sys.stdin)
    for words in data:
        # write the results to STDOUT (standard output);
        # what we output here will be the input for the
        # Reduce step, i.e. the input for reducer.py
        #
        # tab-delimited; the trivial word count is 1
        if len(words)==9:
            for word[5] in words:
                print '%s%s%d' % (word[5], separator, 1)

if __name__ == "__main__":
    main() 
```

减少代码是：

```
from itertools import groupby
from operator import itemgetter
import sys

def read_mapper_output(file, separator='|'):
    for line in file:
        yield line.rstrip().split(separator, 1)

def main(separator='|'):
    # input comes from STDIN (standard input)
    data = read_mapper_output(sys.stdin, separator=separator)
    # groupby groups multiple word-count pairs by word,
    # and creates an iterator that returns consecutive keys and their group:
    #   current_word - string containing a word (the key)
    #   group - iterator yielding all ["&lt;current_word&gt;", "&lt;count&gt;"] items
    for current_word, group in groupby(data, itemgetter(0)):
        try:
            total_count = sum(int(count) for current_word, count in group)
            print "%s%s%d" % (current_word, separator, total_count)
        except ValueError:
            # count was not a number, so silently discard this item
            pass

if __name__ == "__main__":
    main() 
```

当我在 hadoop 中运行上述脚本时，出现以下错误：

```
failed Map Tasks exceeded allowed limit. FailedCount: 1\. LastFailedTask: task_201302281754_0001_m_000000 
```

我想获得第 6 列的计数（awkwarddate）任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:15:57.770

让我们进一步分解一下，因为您想计算每行的第 6 列。

```
def to_std_out(line, sep='|'):
    words = line.split(sep)

    print '%s%s%d' % (words[5], sep, 1) 
```

现在在您的脚本入口点（在您的案例中表示为`main()`函数），逻辑可能是：

```
def main(sep='|'):
    # read in stdin line by line, usually you might need an indefinite loop
    # for the sake of simplicity, I'll be using while 1
    while 1:
        lines = sys.stdin.readlines()
        for line in lines:
            to_std_out(line, sep) 
```

希望这就是你要找的:)

# websphere-7 - WebSphere Application Server 7 - LTPA 的 httpOnly 和安全标志

> ID：15138106
> 
> 赞同：2
> 
> 时间：2013-02-28T14:34:21.737
> 
> 标签：websphere-7, websphere-portal, httponly

我在一个公共环境中工作，在 WebSphere Application Server 7 前面有一个 Apache http-Server（运行一个 WebSphere Portal Server 7），现在我正在尝试为 LTPA cookie 打开 httpOnly 和安全标志。

根据[会话 cookie Websphere 7 的 Secure 和 HttpOnly 标志](https://stackoverflow.com/questions/9193112/secure-and-httponly-flags-for-session-cookie-websphere-7)以及 IBM 的[支持节点，](http://www-01.ibm.com/support/docview.wss?uid=swg21422185)我在 WAS7 配置中添加了自定义属性 com.ibm.ws.security.addHttpOnlyAttributeToCookies -> true 并重新启动服务器。结果是设置了 httpOnly 标志而没有设置安全标志。

有没有人遇到同样的问题并找到了解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:06:08.957

好的，最后我找到了一个（不是）解决方案。我为 SSO 设置了需要 SSL 标志。这只是 IBM 提到的安全标志的独立解决方案。如何到那：

安全 -> 全局安全 -> Web 和 SIP 安全 -> 单点登录 (SSO) -> 选中“需要 SSL”

这已在带有修订包 7.0.0.27 的 IBM WebSphere Application Server 7 上完成。也许 IBM 的解决方案依赖于旧版本，同时他们改变了行为。

# android - 如何在不使用 Intent 和选择器的情况下显示电子邮件共享选项列表？

> ID：15138110
> 
> 赞同：1
> 
> 时间：2013-02-28T14:34:32.200
> 
> 标签：android, list, show, sharing

我希望我的 Android 应用程序在用户单击我的应用程序中的电子邮件地址时显示一个选择器，而无需添加代码以通过`Intent`.

我需要在其中包含什么`TextView`才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:41:17.930

如果您不想添加一个`Intent`来创建选择器，那么您可以只创建`TextView`一个 mailto 链接的内容。这是一个例子：

strings.xml 值

```
<string name="email_address">&lt;a href="mailto:example@example.com">example@example.com&lt;/a></string> 
```

编码：

```
TextView tv = (TextView)findViewById(R.id.email_address);
tv.setText(Html.fromHtml(getString(R.string.email_address)));
tv.setMovementMethod(LinkMovementMethod.getInstance()); 
```

这将打开可通过电子邮件共享的邮件客户端列表。但是有一个规定，如果用户只有一个邮件客户端设置或设置了默认客户端，则列表不会出现，它只会打开默认邮件客户端。

如果要添加附件、主题或默认消息等内容，则需要创建适当的 mailto 链接来完成此操作。此示例仅打开填写了“to”字段的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:39:52.320

使用意图 ACTION_SEND 创建共享列表：

```
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND); 
```

看看这个[教程](http://mobile.tutsplus.com/tutorials/android/android-sdk-implement-a-share-intent/)。

# wordpress - 如何按自定义属性过滤 WooCommerce 产品

> ID：15138113
> 
> 赞同：27
> 
> 时间：2013-02-28T14:34:44.220
> 
> 标签：wordpress, woocommerce, woothemes

我正在尝试按自定义属性过滤 WooCommerce 产品档案。

例如，有 5 个产品的属性“color”包含“red”，另外 3 个产品的属性“color”包含“blue”。

如何将过滤器应用于产品循环，以便仅显示包含“红色”的产品？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-28T15:17:10.230

在我的一个网站上，我必须通过大量数据进行自定义搜索，其中一些来自自定义字段，这里是我的 $args 对于其中一个选项的外观：

```
$args = array(
    'meta_query' => $meta_query,
    'tax_query' => array(
        $query_tax
    ),
    'posts_per_page' => 10,
    'post_type' => 'ad_listing',
    'orderby' => $orderby,
    'order' => $order,
    'paged' => $paged
); 
```

其中“$meta_query”是：

```
$key = "your_custom_key"; //custom_color for example
$value = "blue";//or red or any color
$query_color = array('key' => $key, 'value' => $value);
$meta_query[] = $query_color; 
```

在那之后：

```
query_posts($args); 
```

所以您可能会在这里获得更多信息：http: [//codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query) ，您可以在页面中搜索“meta_query”以获取信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T06:43:21.977

您可以使用[WooCommerce 分层导航小部件](https://docs.woothemes.com/document/woocommerce-widgets/#section-3)，它允许您使用不同的属性集作为产品的过滤器。这是“官方”的描述：

> 在小部件中显示自定义属性，可让您在查看产品类别时缩小产品列表范围。

如果您查看 plugins/woocommerce/widgets/widget-layered_nav.php，您可以看到它使用属性操作以设置过滤器的方式。然后 URL 如下所示：

[http://yoursite.com/shop/?filtering=1&filter_min-kvadratura=181&filter_max-kvadratura=108&filter_obem-ohlajdane=111](http://yoursite.com/shop/?filtering=1&filter_min-kvadratura=181&filter_max-kvadratura=108&filter_obem-ohlajdane=111)

...并且数字实际上是您要设置的不同属性值的 id-s。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-18T03:41:15.673

您可以使用[WooCommerce AJAX 产品过滤器](http://codecanyon.net/item/woocommerce-ajax-product-filter-wordpress-plugin/4640387)。您还可以观看插件如何用于产品过滤。

这是一个[屏幕截图](http://codenegar.com/woocommerce-ajax-product-filter/test/customize.png)：

[![在此处输入图像描述](../Images/11ef532bab8e75675d7f0fe75e3393bf.png)](https://i.stack.imgur.com/TgtWu.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-09T23:18:42.593

插件可能是您最好的选择。查看 wordpress 插件目录或 google 看看是否可以找到。我在下面找到了一个，这似乎很完美。

[https://wordpress.org/plugins/woocommerce-products-filter/](https://wordpress.org/plugins/woocommerce-products-filter/)

这个似乎完全符合您的要求

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-07T11:56:03.483

试试[WooCommerce 产品过滤器](http://mihajlovicnenad.com/product-filter/)，由[Mihajlovicnenad.com](http://mihajlovicnenad.com)开发的插件。您可以按任何标准过滤您的产品。此外，它与您的商店和存档页面完美集成。这是一个屏幕截图。这只是其中一种布局，您可以自定义和制作自己的布局。查看演示站点。谢谢！ [![在此处输入图像描述](../Images/2cfead710697fcd9508deba994fe75ee.png)](https://i.stack.imgur.com/6Un1L.jpg)

# java - 如何从 Jersey 400 响应代码返回 XML

> ID：15138117
> 
> 赞同：2
> 
> 时间：2013-02-28T14:34:48.493
> 
> 标签：java, jersey

当客户端执行 POST 时，我必须验证字符串参数是否存在错误字符。当我找到一个时，我需要返回一条消息以指出不正确的地方。通常我使用文本/纯文本，但我们的客户正在使用一些必须从 POST 请求中获取 XML 的 Oracle 工具（如图）。

我创建了一个自定义异常来创建响应：

```
public class RESTException extends WebApplicationException {
public RESTException(Response.Status status, String messageKey) {
    super(Response.status(status).entity("a messasge").type(MediaType.TEXT_PLAIN).build());
}
public RESTException(Response.Status status, String messageKey, boolean useEntity) {
    super(Response.status(status).entity(new CDSResponse(Integer.toString(status.getStatusCode()), PropertyFileAccessor.getInstance().getPropertyWithDefault(messageKey))).type(MediaType.APPLICATION_XML).build());
} 
```

通常我在创建错误时执行上面的第一个方法，但我用实体制作了第二个方法来返回 XML。

这是我用作端点的方法：

```
@POST
@Consumes({"application/assetId-v1+xml", "application/assetId-v1+json"})
@Produces({MediaType.APPLICATION_XML})
@Path("/{dealerCode}/{dcn}/{make}/{serialNumber}")
public Response postV1(AssetId assetId, @PathParam("dealerCode") String dealerCode, @PathParam("dcn") String dcn, @PathParam("make") String make, @PathParam("serialNumber") String serialNumber) {
    if (!StringUtils.isAlphanumeric(dealerCode)) {
        throw new RESTException(Status.BAD_REQUEST, "equipmentdata.400.invalid.dealer.code", true);
    } 
```

这是问题/错误：当我抛出 400 时，我得到以下响应：

```
cat.dds.cds.model.CDSResponse@29626a 
```

但是当我抛出任何其他状态代码时，我会得到 xml。这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:03:58.470

我的解决方案很简单。不要寄回400s。在这种特殊情况下，Oracle 工具只接受 200s，所以它不是很安静。所以一切都是 200 并且响应 XML 中有真正的代码。

# forms - 避免在 spring 中使用默认值对于 int 变量

> ID：15138118
> 
> 赞同：4
> 
> 时间：2013-02-28T14:34:51.280
> 
> 标签：forms, spring, spring-mvc, spring-webflow, spring-3

我正在为我的应用程序使用 Spring 3.1.0 JAR。我已经通过命令名称将我的 bean 类映射到视图中，我对它的映射没有任何问题。

问题是`int`我的 bean 类中有一个变量：

```
private int id; 
```

当我用 映射这个变量时，它会在文本框中给出我不想要`<'form:input path="id" />'`的默认值。`0`我怎样才能摆脱这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T14:45:02.927

我假设您指的是具有“id”作为`private`模型属性的表单模型。您是否尝试过使用 an`Integer`而不是`int`. Integer 是原始类型的类版本，`int`这可能会解决您的问题。

# oracle11g - 身份验证未启用+smtp+oracle UTL_SMTP

> ID：15138123
> 
> 赞同：0
> 
> 时间：2013-02-28T14:35:13.457
> 
> 标签：oracle11g, smtp

当我尝试使用 UTL_SMTP 发送电子邮件时，smtp 服务器返回此错误。请提出此错误的原因和解决方案。使用 zimbra 社区版的 smtp 服务器。

```
ORA-29279: SMTP permanent error: 503 5.5.1 Error: authentication not enabled 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:43:41.323

伙计，甚至我也遇到了同样的错误。实际上，oracle 可以非常安全地访问 util_file 和邮件包，因此您需要获得适当的权限才能访问这些包。如果您是 DBA，那么您可以很好地使用这些包。详细说明只需参考此 [https://forums.oracle.com/forums/thread.jspa?threadID=690557](https://forums.oracle.com/forums/thread.jspa?threadID=690557)。

# ruby - 如何在ruby中使用键值对将数组转换为哈希

> ID：15138127
> 
> 赞同：0
> 
> 时间：2013-02-28T14:35:24.697
> 
> 标签：ruby

红宝石菜鸟在这里....

我一直在关注哈希数组太久了。

我需要像这样转换一个数组......

```
myArray = ["X", "X", "O", "O", "O", "+", "+", "O", "X"] 
```

变成……像这样的哈希……</p>

```
myHash = {"X"=>0, "X"=>1, "O"=>2, "O"=>3, "O"=>4, "+"=>5, "+"=>6, "O"=>7, "X"=>8} 
```

我怎样才能做到这一点？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:52:51.637

其实这是*可以*做到的：

```
myArray = ["X", "X", "O", "O", "O", "+", "+", "O", "X"]
h = {}.compare_by_identity
myArray.each_with_index{|k,v| h[k] = v}
p h

#=>{"X"=>0, "X"=>1, "O"=>2, "O"=>3, "O"=>4, "+"=>5, "+"=>6, "O"=>7, "X"=>8} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:46:04.137

我假设你想要一个数组，而不是一个哈希

```
["X", "X", "O", "O", "O", "+", "+", "O", "X"].each_with_index.map do |obj, i|
  [obj,i]
end

=> [["X", 0], ["X", 1], ["O", 2], ["O", 3], ["O", 4], ["+", 5], ["+", 6], ["O", 7], ["X", 8]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:46:48.517

harbichidian 对相同的键提出了很好的观点。要以您指定的格式从数组中生成哈希：

```
myArray = ["X", "X", "O", "O", "O", "+", "+", "O", "X"]
myHash = {}

(0...myArray.length).each do |i|
    myHash[myArray[i]] = i
end 
```

但是，由于您有重复的键，这将导致：

```
{"X"=>8, "O"=>7, "+"=>6} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T14:49:35.863

看起来你想以某种方式处理数组中每个元素的位置

可以通过以下方式实现：

```
myHash = Hash.new
myArray.each_with_index do |x,i|
  myHash[i] = x
end

myHash: => {0=>"X", 1=>"X", 2=>"O", 3=>"O", 4=>"O", 5=>"+", 6=>"+", 7=>"O", 8=>"X"} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T15:02:52.250

我相信您还没有完全掌握哈希，或者您只是想销毁任何重复的值。

哈希不能有重复的键，因此“X”不能出现两次，这意味着：您的哈希将在转换中丢失所有重复的键：

```
['X','X','Y'] -> {"X"=> 0, "Y"=>1} or {"X"=> 0, "Y"=>2} 
```

这就引出了另一个问题：您想使用索引还是使用从零开始的递增整数？

使用索引破坏任何重复项：

```
h = Hash.new
arr.each_with_index {|x,i| if not h.has_key?(x) then h[x] = i;h} 
```

随着增量也破坏任何重复：

```
h = Hash.new
count = 0
arr.each{|x| 
  if not h.has_key?(x) then 
    h[x] = count
    count+=1
} 
```

这一切都是有道理的，但这实际上取决于您要解决的问题。正如其他人所建议的那样，您也可以反转使整数成为您的密钥的顺序。

指数的解决方案：

```
h = Hash.new
arr.each_with_index{|x,i| 
  h[i] = x
} 
```

希望任何解决方案都可能有效，但对于未来，请尝试更多地了解您想要解决的问题。

# django-permissions - 如何在 django Guardian 中获取对象具有特定权限的所有用户？

> ID：15138134
> 
> 赞同：7
> 
> 时间：2013-02-28T14:35:44.417
> 
> 标签：django-permissions, django-guardian

有

```
from guardian.shortcuts import get_objects_for_user 
```

但是关于

```
from guardian.shortcuts import get_users_for_object 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-06-20T22:02:40.960

实际上有一个捷径

[http://django-guardian.readthedocs.io/en/stable/api/guardian.shortcuts.html#get-users-with-perms](http://django-guardian.readthedocs.io/en/stable/api/guardian.shortcuts.html#get-users-with-perms)

```
>>> from django.contrib.flatpages.models import FlatPage
>>> from django.contrib.auth.models import User
>>> from guardian.shortcuts import assign_perm, get_users_with_perms
>>>
>>> page = FlatPage.objects.create(title='Some page', path='/some/page/')
>>> joe = User.objects.create_user('joe', 'joe@example.com', 'joesecret')
>>> assign_perm('change_flatpage', joe, page)
>>>
>>> get_users_with_perms(page)
[<User: joe>]
>>>
>>> get_users_with_perms(page, attach_perms=True)
{<User: joe>: [u'change_flatpage']} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-23T10:44:34.610

这是我的解决方法。这是模型方法。您可以将其封装在 mixin 中。

```
def get_users_with_perm(self, permission):
    '''
    Returns list of users(worn:not QuerySet) with specific permission for this object
    :param permission: permission string
    '''

    anyperm = get_users_with_perms(self, attach_perms=True)
    result = []
    for user, perms in anyperm.iteritems():
        if permission in perms: result.append(user)
    return result 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T14:41:52.817

这样的东西看起来不错：[https ://github.com/lukaszb/django-guardian/blob/master/guardian/shortcuts.py#L214](https://github.com/lukaszb/django-guardian/blob/master/guardian/shortcuts.py#L214)

```
 >>> from django.contrib.flatpages.models import FlatPage
    >>> from django.contrib.auth.models import User
    >>> from guardian.shortcuts import assign_perm, get_users_with_perms
    >>>
    >>> page = FlatPage.objects.create(title='Some page', path='/some/page/')
    >>> joe = User.objects.create_user('joe', 'joe@example.com', 'joesecret')
    >>> assign_perm('change_flatpage', joe, page)
    >>>
    >>> get_users_with_perms(page)
    [<User: joe>]
    >>>
    >>> get_users_with_perms(page, attach_perms=True)
    {<User: joe>: [u'change_flatpage']} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-28T14:37:40.570

I solved this issue using the built in [get_users_with_perms()](http://django-guardian.readthedocs.io/en/stable/api/guardian.shortcuts.html#get-users-with-perms) shortcut and then using python dictionary comprehension to return a list of users objects that have a specific permission on the given object.

```
from django.contrib.flatpages.models import FlatPage
from django.contrib.auth.models import User
from guardian.shortcuts import assign_perm, get_users_with_perms 
```

**Create a page object and give User 'Joe' change_flatpage permissions**

```
page = FlatPage.objects.create(title='Some page', path='/some/page/')
joe = User.objects.create_user('joe', 'joe@example.com', 'joesecret')
assign_perm('change_flatpage', joe, page) 
```

**Use Guardian to find users who have *any* permission to the specific page object**

```
perms = get_users_with_perms(page, attach_perms=True) 
```

**Use python dictionary comprehension to return a new list of users who contain specific permission**

```
perm_name = "change_flatpage"
change_flatpage_user_list = [ k for k, v in perms.items() if perm_name in v ] 
```

# android - 带有底部绘图自定义线的 Textview

> ID：15138138
> 
> 赞同：0
> 
> 时间：2013-02-28T14:35:49.633
> 
> 标签：android, textview, line, customization, draw

我只是想知道如何做这样的事情： ![在此处输入图像描述](../Images/23aa15a1f1a5c343d586de2dcfe296c6.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:38:01.177

设置`drawableBottom`为您的`TextView`喜欢：

```
<TextView
      android:id="@+id/my_txt"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:drawableBottom="@drawable/my_drawable" /> 
```

，`my_drawable`位于您的资源文件夹中的位置，这是您想要的`TextView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:41:01.220

你可以这样做`android:drawableBottom="@drawable/YourDrawing"`

像下面这样..

```
 <TextView
            android:id="@+id/TV"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="23:00"
            android:drawableBottom="@drawable/YourDrawing"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@color/blue"
            android:textStyle="bold" /> 
```

# php - 通过 Salesforce API 创建新的定期捐赠时出现问题

> ID：15138139
> 
> 赞同：1
> 
> 时间：2013-02-28T14:35:51.797
> 
> 标签：php, api, salesforce

最近我遇到了一个错误，如下所述：

错误：CANNOT_INSERT_UPDATE_ACTIVATE_ENTITY 消息：npe03.RecurringDonations：执行 AfterInsert 导致：System.NullPointerException：参数 1 不能为空 (npe03)

我正在用 PHP 编写，这就是我的数组的样子：

```
$newRecurring = array();
$newRecurring['Name'] = "Recurring: {$recurring['id']}";
$newRecurring['npe03__Amount__c'] = $recurring['amount'];
$newRecurring['npe03__Date_Established__c'] = date('Y-m-d', strtotime($recurring['date']));
$newRecurring['npe03__Installment_Period__c'] = 'Monthly';
$newRecurring['npe03__Organization__c'] = $account; //I double checked, it is a valid Id 
```

谁能帮我 ？

# c# - 将 ServiceStack ICacheClient 与 Redis 和 Ninject 一起使用

> ID：15138142
> 
> 赞同：1
> 
> 时间：2013-02-28T14:35:58.387
> 
> 标签：c#, asp.net, redis, ninject, servicestack

我正在使用`ICacheClient`来自 servicestack 库的 Redis 作为后端。

我也将 Ninject 用于 DI。

我试图找出绑定`PooledRedisClient`经理的范围。

我尝试了以下方法：

```
Bind<ICacheClient>().ToMethod(ctx => new PooledRedisClientManager(redisURI)).InSingletonScope(); 
```

这似乎工作正常，但我经常看到`RedisResponseExceptions`。

我想这是因为我的连接用完了。

也许 SingletonScope 不正确？

谁能指出我正确的方向？我正在使用 servicestack 版本：3.9.0

**编辑**

这是正确的用法吗？

```
Bind<ICacheClient>().ToMethod(ctx => new PooledRedisClientManager(redisURI).GetCacheClient()).InSingletonScope(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:00:14.697

```
Bind<ICacheClient>().ToMethod(ctx => new PooledRedisClientManager(redisURI).GetCacheClient()).InSingletonScope(); 
```

不熟悉 Ninject 语法，但似乎每次解析 ICacheClient 时，上面都可能创建一个新的 PooledRedisClientManager 实例？不确定“InSingletonScope”在链中的应用位置。

**也许 SingletonScope 不正确？**

**UPDATE** Singleton 是正确的，并且对于获得池化 CacheClients 的好处是必要的。拥有一个包含 CacheClients 集合（池）的 PooledRedisClientManager 实例将检索现有的 CacheClients 而不是打开新的。您可以通过在构造函数中传入 poolSize 参数来限制池大小（默认为 10？）。

您还可以使用 BasicRedisClientManager，它不会汇集连接并始终打开和处置 CacheClient。

~~SingletonScope 不正确。我的理解是，如果您将 PooledRedisClientManager 设为 Singleton，它将永远不会处理和关闭它创建的 RedisClients。~~Singleton 的想法是创建一个实例（在本例中为 PooledRedisClientManager），该实例将始终被使用而不被释放。每个由 PooledRedisClientManager 创建的 RedisClient（通过调用 GetClient()）都会推迟 PooledRedisClientManger 处理它。PooledRedisClientManager 的实例不想处理它们的 RedisClients，只是将它们作为非活动状态放回“池”中。

# c# - Zebra 打印机 KR403 端口号

> ID：15138145
> 
> 赞同：0
> 
> 时间：2013-02-28T14:36:01.867
> 
> 标签：c#, zebra-printers

我尝试打印到斑马打印机。Zebra 为我提供了 C# 中的标准代码示例，他们使用端口 9100 连接到打印机

```
 System.Net.Sockets.TcpClient client = new System.Net.Sockets.TcpClient();

    client.Connect("127.0.0.1", 9100); 
```

但是，每次我运行此代码时它都会崩溃，因为没有可用的端口号我也使用了 telnet 127.0.01 9100 并且确认没有任何东西在监听 9100 我还尝试了一些 Zebra 打印机使用的端口 6101 也没有成功。

我可以在dos命令中运行

```
 print /D:\\127.0.0.1\KR403 d:\print.txt 
```

这确实打印，并证明它以某种方式在内部侦听网络。该设备是 USB 打印机，这使得设置静态端口 ID 变得复杂。也许也奇怪上面的命令确实打印了条形码，但没有剪纸；当我使用记事本打印（我假设它不使用网络打印）时，它会剪纸，但纸长 40 厘米（很大）。所以我在司机战斗中接缝。

我希望做的是使用 C# 发送打印命令并使用 ZPL 命令打印 Microsoft 也写了一篇关于原始打印的文章，但是在这台打印机上失败了。

我要做的就是向这台打印机发送 ZPL 指令。Aslo 尝试了通用 txt 驱动程序，这适用于记事本，但不适用于 C#

使用的代码：

```
 using System;
   using System.Collections.Generic;
   using System.ComponentModel;
   using System.Data;
   using System.Drawing;
   using System.Linq;
   using System.Text;
   using System.Windows.Forms;

   // print /D:\\127.0.0.1\KR403 d:\print.txt

  namespace PrinterTest
  {
  public partial class Form1 : Form
  {
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        // Printer IP Address and communication port
        string ipAddress = @"192.168.2.109";
        int port = 6101; // 9100;//

        // ZPL Command(s)
        string ZPLString =
            "^XA" +
            "^FO50,50" +
            "^A0N50,50" +
            "^FDHello, World!^FS" +
            "^XZ";

        try
        {
            // Open connection
            System.Net.Sockets.TcpClient client = new System.Net.Sockets.TcpClient();
            //client.Connect(ipAddress, port);
           client.Connect(ipAddress, port);
           // string tmp = "\\127.0.0.1\KR403";
           // client.Connect(@"\\localhost",9100);

            // Write ZPL String to connection
            System.IO.StreamWriter writer = new System.IO.StreamWriter(client.GetStream());
            writer.Write(ZPLString);
            writer.Flush();

            // Close Connection
            writer.Close();
            client.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error");
        }
    }

  }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:18:36.947

好吧，经过一些精神崩溃（不是在开玩笑），因为我整天都在努力让这台打印机工作。我终于设法使用 RawPrinterHelper 打印到这台打印机，而且我还修复了该助手中的一个小错误。

我很高兴分享它，但不确定如何分享一个小型的 Visual Studio 10 项目如果有人知道如何在这里分享，我将其发布。

我的代码现在可以打印到本地 USB 打印机，也没有对话框/我可以剪纸。

（请评论我如何发布prj）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:42:29.157

您不能使用 a`TcpClient`连接到本地连接的设备，例如 USB。TcpClient 用于网络设备。如果您将打印机放在网络上，那么您可以使用`TcpClient`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T20:46:55.480

解决这些情况的方法是共享 USB 打印机，然后使用 net use 命令将 LTP 端口映射到资源

```
NET USE LPT1: \\[computer_ip]\[printer_sharname] /PERSISTENT:YES 
```

然后使用您的应用程序，您可以将字符串直接写入 LTP1 端口并打印。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-06T01:23:59.853

最后，我们对信号进行了逆向工程，为其编写了原始 USB 驱动程序，然后使用斑马标记语言进行打印。这深深嵌套在其他代码中，遗憾的是我无法分享它。

这种语言本身也不是那么好用的东西。您需要考虑处理错误代码的缓冲区状态，以及打印机停止响应，您将需要一些实时检查 - 等等。

因此，如果您可以使用 Windows 驱动程序，并且您的打印机并不重要，请尝试使用，否则编写您自己的原始驱动程序，并学习理解所有二进制错误代码，并记住即使大牌打印机仍然很容易卡纸，所以对我来说，如果我有选择的话，我会说放弃这台打印机，或者为一个有几个噩梦的大项目做好准备。如果您必须从头开始，这将花费您几个星期的时间。

# javascript - Javascript中CCS3比例变换的等价物是什么？

> ID：15138147
> 
> 赞同：1
> 
> 时间：2013-02-28T14:36:10.680
> 
> 标签：javascript, jquery

我在悬停时使用 css3 比例变换，我想为 Internet Explorer 用户重新创建效果。是否有任何平滑，类似的功能来完成这个？我看着用百分比改变宽度/高度，但效果不佳，所以我刮掉了那条路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:41:26.873

您知道转换在带有 -ms 前缀的 IE9 上确实有效吗？

否则，看看 jQuery 和[悬停](http://api.jquery.com/hover/)功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:40:08.533

您可以使用：

```
zoom: 2; /* IE */
-moz-transform: scale(2); /* Firefox */
-moz-transform-origin: 0 0;
-o-transform: scale(2); /* Opera */
-o-transform-origin: 0 0;
-webkit-transform: scale(2); /* Safari And Chrome */
-webkit-transform-origin: 0 0; 
```

此外，如果您可以在 CSS 中做到这一点，请不要在 JS 中做到这一点。CSS 是硬件加速的，而 JS 不是。

或者正如 Joe-R 指出的那样，您可以使用“-ms”前缀。在这里检查： http: [//caniuse.com/#search=transform](http://caniuse.com/#search=transform)

```
-ms-transform: scale(2); /* Internet explorer*/
-ms-transform-origin: 0 0; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T14:38:52.513

由于 CSS3 处理它的方式（通过缩放您选择的包含对象中的每个子元素），如果没有 CSS3，将很难制作。您始终可以更改事物的宽度、高度和字体大小，甚至可以对其进行动画处理。

# olap-cube - MOLAP 开源服务器？

> ID：15138150
> 
> 赞同：1
> 
> 时间：2013-02-28T14:36:13.240
> 
> 标签：olap-cube

请问有没有开源 MOLAP 服务器 + java API（为了构建基于 MOLAP 立方体的 Web 应用程序）？？--> 我找到了“palo”，但我想知道是否还有其他的。

# backbone.js - 在backbone.js 视图中，我如何从jquery $.each 调用另一个函数？

> ID：15138163
> 
> 赞同：0
> 
> 时间：2013-02-28T14:36:44.190
> 
> 标签：backbone.js, backbone-views

在我的backbone.js 视图中，我有一个包含以下代码的函数。我通常会使用 来调用这个函数`this.addLayerToList()`，但是因为它在`$.each`this 中。不是我想要的。有人可以在这里帮忙吗？我将如何调用我的函数 addLayerToList `$.each`？

```
initLayerList: function(){
   $.each(baseLayers, function() {
       this.addLayerToList(this);
   });
},

addLayerToList : function() {
     //...some code here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:39:12.880

这应该有效。

```
initLayerList: function(){
   var that = this;
   $.each(baseLayers, function(idx, layer) {
       that.addLayerToList(layer);
   });
},

addLayerToList : function() {
     //...some code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:55:34.737

由于您使用的是 Backbone，因此还包含[Underscore.js](http://underscorejs.org/)并可供您使用。您可以使用 Underscore 的[each](http://underscorejs.org/#each)方法，它可以让您传递`this`到循环的上下文中：

```
 initLayerList: function(){
      _.each(baseLayers, function(layer){
        this.addLayerToList(layer);
      }, this);

    },
    addLayerToList : function() {
         //...some code here
    } 
```

如果 baselyayers 是一个 Backbone[集合](http://backbonejs.org/#Collection)，您可以进一步简化代码：

```
 initLayerList: function(){
      baseLayers.each(function(layer){
        this.addLayerToList(layer);
      }, this);

    } 
```

# java - 在另一个线程使用地图时重新分配对地图的引用会引发异常吗？

> ID：15138164
> 
> 赞同：0
> 
> 时间：2013-02-28T14:36:45.800
> 
> 标签：java, multithreading, reference

在下面的代码中，静态方法`getCustomerIdByClientKey`将被高吞吐量环境中的多个线程使用。

静态方法`loadCustomers`将每 10 分钟左右调用一次，以使缓存无效并加载新的客户集。可以添加或删除客户。

我担心的线是`clientKeyToCustomerId = newClientKeyToCustomerId;`

如果一个线程在`clientKeyToCustomerId`重新分配时当前正在使用映射，该线程会抛出异常，还是会继续在它的内存空间中没有问题，或者它会杀死整个 JVM？:)

我不想同步访问地图的块，因为我认为这会对性能产生负面影响。

我不想`map.clear()`简单地调用，因为访问查找的线程将在不应该返回空结果时返回空结果。

如果更换地图会导致问题，你会采取什么方法来解决这个问题？

```
package com.mycompany.key;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import com.mycompany.dao.CustomerDao;
import com.mycompany.model.Customer;

public class CustomerManager {

    private static Map<String, String> clientKeyToCustomerId = 
                   new HashMap<String, String>();

    public static void loadCustomers() {
        List<Customer> allCustomers = new CustomerDao().loadAll();
        Map<String, String> newClientKeyToCustomerId = new HashMap<String, String>();
        for (Customer customer : allCustomers) {
            newClientKeyToCustomerId.put(customer.getActiveKey1(),
                    customer.getCustomerId());
            newClientKeyToCustomerId.put(customer.getActiveKey2(),
                    customer.getCustomerId());
        }
        clientKeyToCustomerId = newClientKeyToCustomerId;
    }

    public static String getCustomerIdByClientKey(String pClientKey) {
        return clientKeyToCustomerId.get(pClientKey);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:55:52.290

在被告知阅读 volatile 之后，我认为这个问题中接受的答案解决了[Volatile HashMap vs ConcurrentHashMap](https://stackoverflow.com/questions/10357823/volatile-hashmap-vs-concurrenthashmap)。我修改了下面的代码。volatile 关键字停止任何线程本地缓存映射的线程。

当前从旧地图读取的任何线程都将过时，但从业务角度来看这是可以的。

```
package com.mycompany.key;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import com.mycompany.dao.CustomerDao;
import com.mycompany.model.Customer;

public class CustomerManager {

    //private static Map<String, String> clientKeyToCustomerId = 
    // new HashMap<String, String>();
    private volatile static Map<String, String> clientKeyToCustomerId = 
               new HashMap<String, String>();

    public static void loadCustomers() {
        List<Customer> allCustomers = new CustomerDao().loadAll();
        Map<String, String> newClientKeyToCustomerId = new HashMap<String, String>();
        for (Customer customer : allCustomers) {
            newClientKeyToCustomerId.put(customer.getActiveKey1(),
                    customer.getCustomerId());
            newClientKeyToCustomerId.put(customer.getActiveKey2(),
                    customer.getCustomerId());
        }
        clientKeyToCustomerId = newClientKeyToCustomerId;
    }

    public static String getCustomerIdByClientKey(String pClientKey) {
        return clientKeyToCustomerId.get(pClientKey);
    }

} 
```

# c# - 如何在没有 SelectionStart 的情况下设置 TextBox 光标位置

> ID：15138165
> 
> 赞同：5
> 
> 时间：2013-02-28T14:36:45.887
> 
> 标签：c#, winforms, .net-2.0

我有一个带有后台线程的 Windows 窗体文本框，它每秒更新一次它的值。如果我将光标放在文本框中，它将在下次更新时失去其当前位置。与文本选择相同。

我试图这样解决它

```
 protected void SetTextProgrammatically(string value)
    {
        // save current cursor position and selection
        int start = textBox.SelectionStart;
        int length = textBox.SelectionLength;

        // update text
        textBox.Text = value;

        // restore cursor position and selection
        textBox.SelectionStart = start;
        textBox.SelectionLength = length;
    } 
```

它大部分时间都很好用。这是它不起作用的情况：
1）我将光标放在文本框中文本的末尾
2）按 SHIFT 并使用 <- 箭头键将光标向左移动
选择将无法正常工作。

它看起来像组合`SelectionStart=10`并`SelectionLength=1`自动将光标移动到位置 11（不是我想要的 10）。

如果有什么我能做的，请告诉我！我正在使用 Framework.NET 2.0。
必须有一种方法可以在文本框中设置光标位置，而不是`SelectionStart+SelectionLength`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:45:52.433

```
//save position
            bool focused = textBox1.Focused;
            int start = textBox1.SelectionStart;
            int len = textBox1.SelectionLength;
            //do your work
            textBox1.Text = "duviubobioub";
            //restore
            textBox1.SelectionStart = start;
            textBox1.SelectionLength = len ;
            textBox1.Select(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T06:50:19.150

我找到了解决方案！

```
 // save current cursor position and selection 
        int start = textBox.SelectionStart;
        int length = textBox.SelectionLength;

        Point point = new Point();
        User32.GetCaretPos(out point);

        // update text
        textBox.Text = value;

        // restore cursor position and selection
        textBox.Select(start, length);
        User32.SetCaretPos(point.X, point.Y); 
```

现在它的工作就像它应该的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-09T03:56:20.433

要在文本框中设置光标位置而不选择开始...！

```
textbox1.Select(textbox1.text.length,0); /* ===> End of the textbox  */
  textbox1.Select(0,0);                    /* ===> Start of the textbox  */ 
```

# vb.net - 未定义的函数调用lower()

> ID：15138166
> 
> 赞同：1
> 
> 时间：2013-02-28T14:36:48.083
> 
> 标签：vb.net, sqlite, dataset, typed

我的 sqlite 查询中出现以下异常：

> 表达式包含未定义的函数调用 lower()

我在 VS2012 中有一个非常简单的 SQLite 类型数据集。

我正在解析大量数据，并想在添加新行之前检查一行是否已经存在。

我正在使用该`.select()`方法返回一个数据行数组。如果数组的长度为零，我添加一个新的。简单的！

一切运行良好，但我添加了一个检查以防止在大小写错误时添加重复行。我正在存储文件名。

选择语句是：

```
"lower(FileName) = '" + EscapeFileName(strFileName).ToLower() + "'" 
```

**但是，我在lower(FileName)**上收到上述错误。如果我删除它可以正常工作，但显然检查不具有可比性。

该语句在 SQLiteAdmin 中按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:00:51.870

如果我理解正确，您有一个 .NET `DataTable`（查询的结果）并且您正在调用[`DataTable.Select(string)`](http://msdn.microsoft.com/en-us/library/det4aw50.aspx)传入 where 子句。

这个 where 子句由 .NET 处理，而不是由 SQLite 处理（正如 Tim 所指出的那样）。您不能在 DataTable 的 Select 函数中使用 SQLite（或任何其他 DBMS）函数。您可以使用以下功能：

> *   **CONVERT** – 将特定表达式转换为指定的 .NET Framework 类型
> *   **LEN** – 获取字符串的长度
> *   **ISNULL** – 检查表达式并返回检查的表达式或替换值
> *   **IIF** – 根据逻辑表达式的结果获取两个值之一
> *   **TRIM** – 删除所有前导和尾随空白字符，如 \r、\n、\t、‚ '</li>
> *   **SUBSTRING** – 获取指定长度的子字符串，从字符串中的指定点开始

有关详细信息，请参阅[DataView RowFilter 语法 [C#]](http://www.csharp-examples.net/dataview-rowfilter/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:43:56.010

`The statement works as expected in SQLiteAdmin.`

客户端数据对象不调用服务器端函数，而是调用客户端函数。

编辑： PS DataTable 有一个[CaseSensitive](http://msdn.microsoft.com/en-us/library/system.data.datatable.casesensitive.aspx)选项，可以设置为 false。

PPS 一旦您在 .NET 数据对象中获得记录集（即您的选择已被执行并且行集已被检索），数据对象的内置方法（选择、查找等）对数据的任何进一步过滤都是对本地、客户端*断开*的数据进行操作；与数据库的“对话”没有进行。这些客户端方法不是“将指令传递”到数据库。阅读断开连接的记录集模型。

# javascript - Facebook关注按钮未能加载资源

> ID：15138170
> 
> 赞同：2
> 
> 时间：2013-02-28T14:36:59.073
> 
> 标签：javascript, facebook, button

我看到这里有多个关于 stackoverflow 的帖子，还有其他关于这个问题的帖子。不用说，我无法从这些帖子中找到解决方案。显然这曾经是一个错误，但那是在 2009 年，他们现在肯定会修复这个问题。

我指的是[这个按钮](https://developers.facebook.com/docs/reference/plugins/follow/)。默认情况下，我们为按钮设置了 Zuck 先生本人，但是当我输入我的 facebook URL /deangrobler89 时，它不起作用。我还尝试了我的一些其他 FB 朋友，看看它是否适用于他们的个人资料，但也不能。

我在 Chrome 控制台中遇到的错误是：

> 无法加载资源。

资源是：

> 文件：//connect.facebook.net/en_US/all.js#xfbml=1

知道我怎样才能最终让这个按钮工作吗？多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:24:26.860

如果您退出 FB，您会在自己的个人资料上看到“关注”按钮吗？

您可能需要在个人资料设置中启用关注者。普通用户也可以有粉丝，你不需要成为名人！

账户设置->关注者->开启关注。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T06:59:57.697

我想我已经弄清楚了这一点。普通账户，像我和你这样的账户，不能有“关注”按钮。可以这么说，只有页面或 RSS 提要可以有关注页面。所以这主要是公司和品牌。不是人。

当然，扎克伯格也有一个 RSS，你可以订阅“关注”按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:28:26.997

在代码片段中，URI 为“//connect.facebook.net/en_US/all.js#xfbml=1&appId=0”；

这只有在您通过 http 或 https 查看时才有效。（URI 的“//”部分表示匹配父页面的协议。这是为了避免在 https 页面上加载 http JavaScript 时出现“不安全的 JS”警告。）

我猜您最初是在硬盘驱动器上使用本地 .html 文件尝试过此操作的？:)

因此，要么将“//”更改为“https://”，要么将该代码移至真正的网络主机。

# c# - 添加参考项目与 DLL

> ID：15138176
> 
> 赞同：1
> 
> 时间：2013-02-28T14:37:03.163
> 
> 标签：c#, dll

我在解决方案中的项目很少。添加参考时，我们有两种方法 -

1.  添加项目作为参考
2.  添加DLL直接引用

应该首选哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:38:23.980

如果您添加项目引用，您使用的 dll 将在您编辑项目文件时自动更新。

当您不处理 DLL 源时，您可以直接添加 DLL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:39:39.997

如果 dll 本身不打算更改，例如外部程序集或其他项目的选定稳定版本（即不一定是最新版本），您应该使用 DLL 引用。

如果您总是想使用被引用项目的最新版本（并且如果您想调试被引用项目），则应该使用项目引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:40:29.337

将其添加为项目参考。这将确保您在构建解决方案、调试或发布时拥有正确的 dll。

否则，您将不得不依赖于您的 dll 的位置，这将是调试或发布，甚至可能不是最新的。

# hadoop - 使用 Hive 将双引号和逗号分隔的 CSV 文件导入 Hbase

> ID：15138181
> 
> 赞同：3
> 
> 时间：2013-02-28T14:37:20.227
> 
> 标签：hadoop, hbase, hive

我有一个用双引号和逗号分隔的 CSV 文件。它看起来有点像下面这样：

> “来自供应商的文本”，“供应商名称，Inc.”，“等等等等”，“下一个字符串”，“”，1234

我正在尝试使用 Hive 将其导入 Hbase 中的表中。

我可以使用以下内容在 Hbase 中从 Hive 创建一个表：

```
hive> CREATE TABLE exampletable1(tax_numb int, tax_name string, tax_addr string, tax_city string, tax_stat string) 
STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'
WITH SERDEPROPERTIES ("hbase.columns.mapping" = ":key,cf:tax_name,cf:tax_addr,cf:tax_city,cf:tax_stat")
TBLPROPERTIES ("hbase.table.name" = "hiveexampletable1"); 
```

我还能够向 Hive 添加一个表，在该表中我使用以下命令导入了 CSV 文件（尽管双引号存在问题）：

> hive> create table example2(tax_numb int, tax_name string, tax_addr string, tax_city string, tax_stat string) 以“，”结尾的行格式分隔字段，存储为文本文件；

但是，我无法将“分隔字段”位集成到我在 Hbase 中创建外部表的命令中。

由于我对 Hive-Hbase 组合相对较新，所以在到达我认为最好向社区寻求帮助的地步之前，我阅读了许多教程。我在谷歌上进行了多次搜索，但无济于事。

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T16:38:42.810

我使用 org.apache.hadoop.hive.serde2.RegexSerDe 作为 serde 来解析这种文件。例如，如果我有一个包含 4 个字段的 csv，它们是整数、字符串、整数、字符串，我可以使用：

```
CREATE EXTERNAL TABLE mytable (
    F1 BIGINT, F2 STRING, 
    F2 INT, F4 STRING
)
row format SERDE 'org.apache.hadoop.hive.serde2.RegexSerDe'
with SERDEPROPERTIES ("input.regex" = "^\"([^\"]*)\",\"([^\"]*)\",\"([^\"]*)\",\"([^\"]*)\"$")
LOCATION "/somepath"; 
```

正则表达式 y 总是相同的，所以我用 python 生成它，如下所示：

```
>>> r = "^" + ",".join(['"([^"]*)"' for i in xrange(0,4)]) + "$"
>>> print str(r).replace('"', '\\"')
^\"([^\"]*)\",\"([^\"]*)\",\"([^\"]*)\",\"([^\"]*)\"$ 
```

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:58:44.773

在多次尝试找到一个漂亮的解决方案后，我最终不得不求助于老派并重新使用 awk。我使用的命令看起来像这样：

> $ cat inputCSVfile.csv | awk '{print substr ($0, 252, 20) echo "|" substr ($0, 133, 2) 回显“|” substr ($0, 297, 13)}'

这给了我我需要的东西。然后我将数据导入 Hive 并从那里弹出到 Hbase。希望它对将来的人有所帮助。

# excel - 用于创建组合的 VBA 宏

> ID：15138184
> 
> 赞同：1
> 
> 时间：2013-02-28T14:37:33.403
> 
> 标签：excel, vba

我正在尝试为下面提到的情况编写一个宏。

*输入是：*

```
Col A   Col B
A       B
A       C
B       D
C       A
C       B
C       E
D       A
D       B
E       A 
```

我正在尝试进行组合，例如 *输出：*

```
A   B   D   A       
A   C   A           
A   C   B   D   A   
A   C   E   A       
B   D   B           
C   A   B   D   A   C
C   A   C           
C   B   D   A   C   
C   E   A   C

|
|
| 
```

等等

输出可以在同一个工作表上。

输出的起点和终点应该相同。循环应该从第一行开始，并以起点和终点相同的方式寻找组合。

我根本无法弄清楚如何创建这样的循环。

请提出一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:32:47.720

有向图，避免循环和递归。美丽的挑战。代码需要很多改进，但现在是凌晨 1 点，我不得不在家安装 Excel：/

我假设您的数据在 A1:B9 范围内。解决方案打印在即时窗口中（您自己的格式工作）。

```
Option Explicit

Sub EveningFun()

    Dim rCell As Range
    Dim rRng As Range

    Dim goal As String

    Dim availablePaths(1 To 9) As Boolean

    Dim i As Integer

    For i = 1 To 9
        availablePaths(i) = True
    Next i

    Set rRng = Sheet1.Range("A1:A9")

    For Each rCell In rRng.Cells
        goal = rCell.value

        Call RecursiveFun(goal, rCell.Offset(0, 1).value, goal, availablePaths)

    Next rCell

End Sub

Sub RecursiveFun(goal As String, nextElement As String, path As String, availablePaths() As Boolean)

    Dim rCell As Range
    Dim rRng As Range

    Set rRng = Sheet1.Range("A1:A9")

    For Each rCell In rRng.Cells

        If goal = nextElement Then
            'Debug.Print path & nextElement
             Range("D" & Rows.Count).End(xlUp).Cells.Offset(1, 0) = path & nextElement
             Exit Sub
        End If

        If nextElement = rCell.value And availablePaths(rCell.Row) Then
            Dim onePathLess(1 To 9) As Boolean
            Call CopyArrays(availablePaths(), onePathLess())
            'some key place, we have to avoid cycles
            onePathLess(rCell.Row) = False

            Call RecursiveFun(goal, rCell.Offset(0, 1).value, path & nextElement, onePathLess())
        End If

    Next rCell

End Sub

Sub CopyArrays(source() As Boolean, target() As Boolean)

    Dim i As Integer

    For i = 1 To 9
        target(i) = source(i)
    Next i

End Sub 
```

+4 表示非常伟大的任务，但 -3 表示不尝试。

# jira - 如何在 JIRA 中找到添加到活动 sprint 的问题？

> ID：15138187
> 
> 赞同：19
> 
> 时间：2013-02-28T14:37:43.873
> 
> 标签：jira, jql

我们使用带有印刷敏捷卡片的软木板。我希望能够**在 JIRA 的问题导航器中创建过滤器，以查找在过去 24 小时、过去 2 天等内添加到活动 sprint 中的问题**。这样我就不必每天手动选择要打印的新问题。

我试图为此编写 JQL 查询，但我只做到了这一点：

```
project = "Our Project"
AND sprint = 1002
AND (created >= -1d OR (updated >= -1d AND status WAS Open BEFORE -1d)) 
```

这并不令人满意，因为：

1.  Sprint id 不会自动选择（activeSprint() 或类似的东西）。
2.  查询实际上并没有回答我的问题。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-03-11T14:52:49.413

您可以使用 JQL 子句在当前打开的 sprint 中找到问题：

```
sprint in openSprints() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:42:58.030

我认为您无法使用[标准 JQL](https://confluence.atlassian.com/display/JIRA/Advanced+Searching)实现您所要求的，我认为您必须创建自己的 JQL 搜索，查看[将 JQL 函数添加到 JIRA](https://developer.atlassian.com/display/JIRADEV/Plugin+Tutorial+-+Adding+a+JQL+Function+to+JIRA)以了解操作方法。

另一种选择是使用 Jira 的[远程 API](https://developer.atlassian.com/display/JIRADEV/JIRA+Remote+API+Reference)手动获取问题列表。

# node.js - 在 nodejs 和 mongodb 中获取集合数据

> ID：15138191
> 
> 赞同：-1
> 
> 时间：2013-02-28T14:37:50.210
> 
> 标签：node.js, mongodb, rest

请告诉我，如何使用客户端上的主干应用程序和服务器端的 nodejs + mongodb 创建 REST API。

我是 nodejs 的新手，无法理解所有基本的东西。

举个例子——我需要收集朋友。在我的客户端应用程序中，我说

```
var collection = new Backbone.Collection.exted({ 
  model: model,
  url: '/api/friends'
});
collection.fetch(); 
```

好的，在服务器上（nodejs + express）我可以用 app.get('/api/friends', friends.get);

在«friends»模块中，我有«get»功能。它连接到数据库，尝试从«friends»集合中获取数据（如果集合不存在，则必须创建）。如果集合为空，函数必须初始化对 vk.com（社交网络）服务器的数据请求。

```
/*
 * GET friends
 */
var https = require('https'),
  Db = require('mongodb').Db,
  Server = require('mongodb').Server;

var client = new Db('data', new Server('127.0.0.1', 27017, {})),
  friends;

function getAllFriends(err, collection) {
  if (!collection.stats()) {
    https.get('https://api.vk.com/method/friends.get?access_token=' + global['access_token'], function (d) {
      var chunk = '',
        response;
      d.on('data', function (data) {
        chunk += data;
      });

      d.on('end', function () {
        response = JSON.parse(chunk).response;
        response.forEach(function (friend) {
          collection.insert(friend, function (err, docs) {
            if (err) console.log(err);
          });
        });
      }).on('error', function (e) {
        console.error(e);
      });
    });
  }

  friends = collection.find({}, {
    limit: 1000
  }).toArray(function (err, docs) {
    return docs;
  });
}

exports.get = function (req, res) {
  client.open(function (err, pClient) {
    client.collection('friends', getAllFriends);
    res.send(friends);
  });
}; 
```

但是这段代码不起作用。我不知道为什么。

```
/node_modules/mongodb/lib/mongodb/connection/server.js:524
        throw err;
              ^
TypeError: Cannot read property 'noReturn' of undefined
    at Cursor.nextObject.commandHandler (/node_modules/mongodb/lib/mongodb/cursor.js:623:17)
    at Db._executeQueryCommand (/node_modules/mongodb/lib/mongodb/db.js:1702:5)
    at g (events.js:192:14)
    at EventEmitter.emit (events.js:126:20)
    at Server.Base._callHandler (/node_modules/mongodb/lib/mongodb/connection/base.js:130:25)
    at Server.connect.connectionPool.on.server._serverState (/node_modules/mongodb/lib/mongodb/connection/server.js:517:20)
    at MongoReply.parseBody (/node_modules/mongodb/lib/mongodb/responses/mongo_reply.js:127:5)
    at Server.connect.connectionPool.on.server._serverState (/node_modules/mongodb/lib/mongodb/connection/server.js:476:22)
    at EventEmitter.emit (events.js:96:17)
    at _connect (/node_modules/mongodb/lib/mongodb/connection/connection_pool.js:175:13) 
```

也许这段代码没有在需要时创建集合？

也许我做错了什么，所以你能给我一个很好的链接来阅读 nodejs 或 mongo 中的教程。

谢谢你的建议，对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:46:28.890

有很多代码在这里不起作用。以此为例：

```
 if (!collection.stats()) {
    fetchFriends().forEach(function (friend) {
      collection.insert(friend, function (err, docs) {
        if (err) console.log(err);
      });
    });
  }

  friends = collection.find({}, {
    limit: 1000
  }).toArray(function (err, docs) {
    return docs;
  });
} 
```

首先，您不能像使用 fetchFriends 那样做。该函数不返回任何内容，所有工作都在异步回调中完成。

其次，如果它是空的，您仍然会触发直接查找的调用，而不是等到插入结果完成。

甚至调用链的开头也被破坏了：

```
exports.get = function (req, res) {
  client.open(function (err, pClient) {
    client.collection('friends', getAllFriends);
    res.send(friends);
  });
}; 
```

你不能只在调用`res.send`后调用`client.colleciton`，你需要在 getAllFriends 中完成工作后在回调中执行此操作。

在你所做的事情中普遍缺乏对异步代码的理解，我认为现在不要担心 node/mongo 教程，而是先多玩 node，看看异步库和承诺，直到你对异步感到满意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:02:00.090

我不知道这段代码应该做什么。

*   减少您正在调试的代码量；
*   清楚地确定什么没有给你你所期望的；
*   使用控制台.log

您可能首先会发现：

```
exports.get = function (req, res) {
  client.open(function (err, pClient) {
    client.collection('friends', getAllFriends);
    res.send(friends);
  });
}; 
```

不起作用，因为变量“friends”不是您所期望的。

# java - 适用于 Windows 7 的 x64 ZeroMQ jzmq 构建过程

> ID：15138192
> 
> 赞同：0
> 
> 时间：2013-02-28T14:37:53.247
> 
> 标签：java, windows, 64-bit, zeromq

尝试按照此处找到的说明为 mw windows 7（64 位）构建 jzmq： [http](http://www.zeromq.org/bindings%3ajava) ://www.zeromq.org/bindings:java（底部有一个特定于 Win 64 机器的部分）当我到达第 5 步时“安装 NSIS 后，您可以跳转到构建包或只构建库。” 在 100% 构建后，我收到一长串未解析的外部符号：例如：

```
Linking CXX shared library lib\jzmq.dll
Creating library lib\jzmq.lib and object lib\jzmq.exp
Context.cpp.obj : error LNK2019: unresolved external symbol _zmq_errno reference
d in function _Java_org_zeromq_ZMQ_00024Context_construct@12
Socket.cpp.obj : error LNK2001: unresolved external symbol _zmq_errno
Context.cpp.obj : error LNK2019: unresolved external symbol _zmq_init referenced
 in function _Java_org_zeromq_ZMQ_00024Context_construct@12
Context.cpp.obj : error LNK2019: unresolved external symbol _zmq_term referenced
 in function _Java_org_zeromq_ZMQ_00024Context_finalize@8
Poller.cpp.obj : error LNK2019: unresolved external symbol _zmq_poll referenced
in function _Java_org_zeromq_ZMQ_00024Poller_run_1poll@24 
```

我在系统路径变量中设置了 C:\zmq\zeromq-3.2.2\lib\x64。我在第 101 行修改了 CMakeLists.txt 以指向我的 zeromq-3.2.2 目录，即

```
include_directories(
#   /zeromq/zeromq-2.1.10/include
    /zmq/zeromq-3.2.2/include
    ${JNI_INCLUDE_DIRS}
)
link_directories(
#   /zeromq/zeromq-2.1.10/build/lib
#   /zeromq/zeromq-2.1.10/build64/lib
    /zmq/zeromq-3.2.2/lib/x64
) 
```

我认为缺少另一个路径变量，或者我的 CMakeLists.txt 中的某些内容指向错误的位置，但目前我不确定我应该寻找什么。任何帮助我构建 jzmq 将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:16:20.220

我最终使用 Visual Studio 2010 pro 而不是 CMake。我为 x64 设置了一个新的构建配置并复制了所有 32 位设置，然后确保将库和资源变量定义到它们的位置，它构建没有问题。对不起CMake，下次好运。

# android - 自定义操作栏选项卡视图忽略 layout_gravity

> ID：15138193
> 
> 赞同：1
> 
> 时间：2013-02-28T14:37:57.157
> 
> 标签：android, android-layout, actionbarsherlock

我希望逐个选项卡覆盖选项卡样式，以便我可以将效果应用于某些选项卡，同时让其他选项卡保持正常。

这是我用于自定义选项卡的布局 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/CustomActionBarTabTextStyle"
    android:ellipsize="end"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:gravity="center_vertical"/> 
```

在 com.actionbarsherlock.internal.widget.ScrollingTabContainerView.TabView 中的 update() 实现之后，相应地设置了布局参数和文本椭圆。我的 CustomActionBarTabTextStyle 目前唯一覆盖的是文本大小。

选项卡的渲染与没有自定义视图的情况完全相同，只是文本在选项卡中是顶部对齐的。在层次结构查看器中快速运行显示 layout_gravity 显示为 NONE，而 layout_gravity 对于非自定义选项卡显示为 CENTER_VERTICAL。这怎么可能？有没有人有办法解决这个问题？我尝试将 android:layout_gravity="center_vertical" 放在各处的样式和主题中，但没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:25:01.253

我现在有一个可行的解决方案，但它不是很漂亮。当我设置自定义视图时，我必须明确地创建和设置我的 LayoutParams。

```
tab.setCustomView(customtabviewresourceid);
TextView tv = ((TextView)tab.getCustomView());
tv.setText(tab.getText().toString().toUpperCase());
LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
lp.gravity=Gravity.CENTER_VERTICAL;
tv.setLayoutParams(lp); 
```

我仍在寻找答案，因为我认为这不是最好的方法。理想情况下，这不应该在 Java 代码中完成。

# c# - 动作属性

> ID：15138195
> 
> 赞同：1
> 
> 时间：2013-02-28T14:37:59.227
> 
> 标签：c#, action

谁能解释一下这段代码摘录。

```
public abstract Action<int> serialpacket { set; get; } 
```

我对此有点困惑。我大致知道它的作用，但如果有人能稍微了解一下它会更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:40:34.283

`serialpacket`是一个抽象属性，在实现时将返回一个方法引用或 lamda，它接受一个整数参数并且不返回任何内容。

例如（忽略设置器）。

```
public override Action<int> serialpacket
{
    get { return i => Console.WriteLine(i); }
    set { ... }
} 
```

或者

```
public void Trousers(int i)
{
   Console.WriteLine(i);
}

public Action<int> serialpacket
{
    get { return Trousers; }
    set { ... }
} 
```

然后可以这样使用serialpacket：

```
serialpacket(10); 
```

因为它是一个带有 setter 的属性，所以也可以这样做：

```
public override Action<int> serialpacket { get; set; }

serialpacket = Trousers;
serialpacket(10);
// prints 10 to the console 
```

同上定义`Trousers`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:39:54.220

> 封装具有单个参数且不返回值的方法。

[http://msdn.microsoft.com/en-us/library/018hxwa8.aspx](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)

编辑：在您的示例中，它是您可以分配的属性（在派生类中 - 因为它是`abstract`）一个接受`int`并且不返回值的委托。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:40:23.990

这是类型的属性`Action<int>`。`Action<int>`是一个接受`int`参数但不返回值的函数。

您可以按如下方式使用它：

```
instance.serialpacket(42); 
```

该属性是`abstract`- 它必须在具体派生类中被覆盖。

`abstract`拥有一个带有公共设置器的属性有点奇怪。可能更好的是只读属性：

```
public abstract Action<int> serialpacket { get; } 
```

否则，如果属性可以公开设置，那么非抽象版本就足够了

```
public Action<int> serialpacket { get; set; } 
```

您还可以将设置器限制为派生类：

```
public Action<int> serialpacket { get; protected set; } 
```

# android - ScrollView 减少了我的 ListView

> ID：15138203
> 
> 赞同：0
> 
> 时间：2013-02-28T14:38:16.817
> 
> 标签：android, android-layout, scrollview

我想将带有搜索区域和 ListView 的布局制作成两者的 ScrollView。

但是 ListView 没有填满布局><

代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <EditText
                    android:id="@+id/edt_procura_cliente"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:ems="10" />

                <Button
                    android:id="@+id/button1"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="2.3"
                    android:lines="1"
                    android:text="Procurar" />
            </LinearLayout>

            <ListView
                android:id="@+id/list_clientes_visitas"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

            </ListView>
        </LinearLayout>
    </ScrollView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:41:09.153

你不能把a放在a`ListView`里面`ScrollView`。ListView 有自己的滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:58:59.293

在这里找到了解决方案：[如何将 ListView 放入 ScrollView 而不会崩溃？](https://stackoverflow.com/questions/3495890/how-can-i-put-a-listview-into-a-scrollview-without-it-collapsing/3495908#3495908)

对我来说很好

# java - 反射 - ClassNotFoundException

> ID：15138205
> 
> 赞同：0
> 
> 时间：2013-02-28T14:38:17.850
> 
> 标签：java, android, reflection

我正在尝试找到一种以编程方式和干净地关闭设备的方法。我的应用程序具有根/系统权限，因此我不想使用[其他答案中建议的](https://stackoverflow.com/a/12430612/1256219)方法来执行此操作，而是希望“正确”地执行此操作，因为系统会...

使用反射，我试图访问类[com.android.internal.app.ShutdownThread](http://www.java2s.com/Open-Source/Android/android-core/platform-frameworks-base/com/android/internal/app/ShutdownThread.java.htm)和其中的关闭方法。

```
private static final String SHUTDOWN_CLASS = "com.android.internal.app.ShutdownThread";
private static final String SHUTDOWN_METHOD = "shutdown";

Class<?> sdClass;
Method shutdown;
boolean sd;
boolean success = false;

try {
    sdClass = Class.forName(SHUTDOWN_CLASS);
    Object obj = sdClass.newInstance();

    shutdown = sdClass.getDeclaredMethod(SHUTDOWN_METHOD);

    shutdown.setAccessible(true);
    sd = (Boolean) shutdown.invoke(obj, ctx, false);

    success = sd;

} catch (ClassNotFoundException e) {
    e.printStackTrace();
} catch (NoSuchMethodException e) {
    e.printStackTrace();
} catch (IllegalArgumentException e) {
    e.printStackTrace();
} catch (IllegalAccessException e) {
    e.printStackTrace();
} catch (InvocationTargetException e) {
    e.printStackTrace();
} catch (InstantiationException e) {
    e.printStackTrace();
} 
```

我查看了[其他答案](https://stackoverflow.com/a/8328036/1256219)，指出我需要“确保编译的类文件实际上在类路径上” - 我认为它是（尽管有异常！），但也许我误解了“类路径”的含义。

我也不确定扩展“线程”的类是否也是一个问题？

我可以使用以下代码重新启动或重新启动到恢复/引导加载程序：

```
((PowerManager) ctx.getSystemService(Context.POWER_SERVICE)).reboot(action); 
```

我使用的操作字符串是 null、bootloader 或 recovery。我很有希望地尝试“关闭”，但它没有用。这些显然是发送到内核的消息，但我找不到在任何地方都可以使用的参考......

注意：在您发布“您不应该以编程方式执行此操作”之前，我的用户已经请求它并且完全了解我的应用程序具有的系统和 root 权限。这就是他们安装它的原因！

如果有人能指出我在做什么是不可能的，或者我第一次尝试使用反射时哪里出错了，我会很感激的。

* * *

## 更新

CommonsWare 的评论当然是绝对正确的，类路径不再存在。在 Jelly Bean 源代码中，它现在是[com.android.server.power.ShutdownThread](https://android.googlesource.com/platform/frameworks/base/+/master/services/java/com/android/server/power/ShutdownThread.java)

我尽我所能，但无法使用以下代码解决错误窗口令牌的问题。

```
boolean sd = false;
boolean success = false;

        try {
            Class<?> sdClass = Class.forName("com.android.server.power.ShutdownThread");

            for (Constructor<?> ctor : sdClass.getDeclaredConstructors()) {
                // Log output
            }

            Constructor<?> con = sdClass.getDeclaredConstructors()[0];
            con.setAccessible(true);

            for (Method m : sdClass.getDeclaredMethods()) {

                if (m.getName().matches("shutdown")) {
                    m.setAccessible(true);
                    sd = (Boolean) m.invoke(ctx, ctx, false);
                }
            }

            success = sd;

        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (NoSuchMethodException e) {
             e.printStackTrace();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
             e.printStackTrace();
        }

        return success; 
```

我现在得到的错误是：

> W/System.err(17002)：原因：android.view.WindowManager$BadTokenException：无法添加窗口 android.view.ViewRootImpl$W@41ae4a10 -- 此窗口类型的权限被拒绝
> 
> W/System.err(17002)：在 com.android.server.power.ShutdownThread.beginShutdownSequence(ShutdownThread.java:222)

我认为这是因为我是从服务中执行的，而它可能需要从前台活动中执行？如果有人有任何线索，我很想知道...

# wcf - 如何让 RavenDB 与 WCF 数据服务一起工作？

> ID：15138210
> 
> 赞同：1
> 
> 时间：2013-02-28T14:38:26.613
> 
> 标签：wcf, wcf-data-services, ravendb, odata

我将 WCF 数据服务 5.3.0 与反射数据提供程序一起使用。我的源数据存储在 RavenDB 中，所以我的所有查询都被推迟了。那么，在应用 OData 过滤器之后和结果返回给客户端之前，是否有一些方法可以为我的查​​询调用 .ToList()？

**更新：**我的 DataModel 属性声明

```
 public IQueryable<PositionModel> Positions
    {
        get
        {
            using (var session = OLAPDocumentStore.OpenSession())
            {
                return session
                    .Query<ConsolidatedApplicationPosition>()
                    .Select(x => new PositionModel
                                     {
                                         ApplicationId = x.ApplicationId,
                                         CategoryId = x.CategoryId,
                                         ID = x.Id,
                                         Platform = x.Platform,
                                         Position = x.Position,
                                         RegionalCode = x.RegionalCode,
                                         Timestamp = x.Timestamp,
                                         TopListId = x.TopListId
                                     })
                    .AsQueryable();
            }
        }
    } 
```

**解决方案**请参阅@matt-johnson 答案，并且不要忘记将 [DataMember] 添加到模型中的所有属性

```
[DataContract, DataServiceKey("Id")]
public class PositionModel
{
    [DataMember]
    public string Id { get; set; }
    [DataMember]
    public string ApplicationId { get; set; }
    [DataMember]
    public string CategoryId { get; set; }
    [DataMember]
    public int Position { get; set; }
    [DataMember]
    public string RegionalCode { get; set; }
    [DataMember]
    public DateTime Timestamp { get; set; }
    [DataMember]
    public string TopListId { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:37:42.800

好的，我不得不回忆一下 WCF 数据服务的工作原理。Shawn Wildermuth 有[一个很好的示例视频](http://msdn.microsoft.com/en-us/data/gg601461)。

主要问题是您正在尝试使用`Select`语句转换查询客户端。当您返回一个`IQueryable`, 应该直接挂接到 linq 提供程序 - 在这种情况下，是 RavenDB 查询的输出。您可以应用`Where`和`OrderBy`过滤，但不能对`Select`语句进行投影。这打破了查询链。

因此，如果您想从`ConsolidatedApplicationPosition`数据库中的`PositionModel`对象投影到要返回到 WCF 数据服务的对象，您将不得不以另一种方式进行。以下是一些选项：

1.  如果您需要投影的所有字段都已经在源数据中，那么您可以这样做：

    ```
    return session.Query<ConsolidatedApplicationPosition>()
                  .AsProjection<PositionModel>(); 
    ```

    这里唯一的问题是您的标识符不匹配。Raven 的默认标识符约定是`Id`（Pascal 大小写），而 WCF 是`ID`（大写）。您可以通过更改 Raven 的约定来排列它们：

    ```
    DocumentStore.Conventions.FindIdentityProperty = x => x.Name == "ID"; 
    ```

    或通过使用`DataServiceKey`属性更改 WCF 的约定：

    ```
    [DataContract, DataServiceKey("Id")]
    public class PositionModel
    {
        [DataMember]
        public int Id { get; set; }

        ...
    } 
    ```

2.  如果要保持标识符不匹配，或者要转换更多字段，则无法使用动态索引。相反，您必须创建一个静态索引并使用转换来控制投影：

    ```
    public class YourIndex : AbstractIndexCreationTask<ConsolidatedApplicationPosition>
    {
      public YourIndex()
      {
        Map = docs =>
          from doc in docs
          select new
          {
            // You need to map any fields that you might query
            // or sort on through the odata filters.
          };

        TransformResults = (database, docs) =>
          from doc in docs
          select new PositionModel
          {
            // if you need integer identifiers in your result,
            // you'll have to split them from the doc key, like this:
            ID = int.Parse(doc.Id.ToString().Split('/')[1]),

            // otherwise, just do this:
            ID = doc.Id,

            // bring over all of your other fields as well
            Platform = doc.Platform
            ... etc ...

         };
      }
    } 
    ```

    建立索引后，您可以像这样查询它：

    ```
    return session.Query<PositionModel, YourIndex>(); 
    ```

使用任一选项，查询中都没有 select 语句，因此无需执行`ToList`or `AsQueryable`。您只是将`IQueryable`RavenDB linq 提供程序的接口发送到 WCF 数据服务上下文中。

# python - 谷歌应用引擎中的二维码生成器

> ID：15138211
> 
> 赞同：3
> 
> 时间：2013-02-28T14:38:29.103
> 
> 标签：python, google-app-engine, qr-code

我想知道使用 google appengine python 生成 QRCode 的选项是什么目前我使用已弃用的 google chart API 有一个我知道的 Cython 示例以及 C（java 等）-纯 Python 实现将工作我想象有人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:29:40.507

不是你问的那样，但是使用[http://jeromeetienne.github.com/jquery-qrcode/](http://jeromeetienne.github.com/jquery-qrcode/)在客户端生成 QRCodes 对我有用（在 App Engine 提供的页面中，尽管在这种情况下这是巧合，因为很难部分在浏览器中完成）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:46:40.530

[PyQRNativeGAE](https://github.com/bernii/PyQRNativeGAE)似乎是您正在寻找的。

# java - java web 小程序是否有可能获取自己的 URL 并解析它？

> ID：15138212
> 
> 赞同：1
> 
> 时间：2013-02-28T14:38:30.323
> 
> 标签：java, japplet

我想知道 Java Web Applet 是否有可能获取自己的 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:41:18.077

您可以使用[Applet#getCodeBase](http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html#getCodeBase%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:51:11.993

认为这对你有帮助。 [Java URL 示例 - 用于下载和解析 URL 内容的 Java 类](http://alvinalexander.com/blog/post/java/java-program-download-parse-contents-of-url)

# c++ - 将 boost::units 类型转换为数字类型

> ID：15138214
> 
> 赞同：0
> 
> 时间：2013-02-28T14:38:37.063
> 
> 标签：c++, visual-c++, c++11

我正在使用`boost::units`图书馆。我的问题是我必须将长度向量转换为双向量以进行 cmath 计算：

```
 pow(tmpVector.at(cnt),cnt) 
```

cnt 是我的循环计数器。`boost::units::length`如果我在不强制转换的情况下尝试计算，我会再次出现into没有强制转换定义的错误`double`。

我尝试使用不起作用的 static_cast 和同样不起作用的 boost 库的 numeric_cast。在第二种情况下，我收到以下编译器错误：

```
e:\testvs12\libraries\thirdparty\boost\boost\numeric\conversion\converter_policies.hpp(187): error C2440: 'static_cast': 'const std::vector<_Ty>' can not convert into 'std::vector<_Ty>' 
```

我在互联网上一无所获 - 我希望你们中的一个可以帮助我

问题 1：是否有可能在循环内使用 pow`boost::units`和循环计数器作为指数？

问题 2：如何将`boost::units`类型转换为例如 double？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:21:25.540

将带有单位的值转换为标量的规范方法是除以一个度量单位，正如 Arne Mertz 在评论中所建议的那样。换句话说，类似：

```
 pow(tmpVector.at(cnt)/boost::units::meters,cnt) 
```

应该管用。

# java - 哈希表/插入新的键和值

> ID：15138217
> 
> 赞同：1
> 
> 时间：2013-02-28T14:38:49.950
> 
> 标签：java, hash, time-complexity

据我了解，java中有一个选项可以向HashTable插入一个新键。这是通过以下方式完成的：

```
 Hashtable<String,String> hashTable=new Hashtable<String,String>();
 hashTable.put("Donald", "Trump"); 
```

唐纳德是关键，特朗普是价值。如果我想将值“TrumpY”添加到“Donald”，则使用相同的操作：

```
 hashTable.put("Donald", "TrumpY"); 
```

我对此操作的时间复杂度有疑问。据我了解，时间复杂度是`O(1)`. 但这与第一次和第二次手术有关吗？因为第一个需要向哈希表添加一个新的键，而第二个只需要向已经存在的键添加一个值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:43:19.680

要找到必须添加值的槽，Map 必须找到该槽的位置。为此，它使用密钥的哈希码。根据底层实现，可能存在冲突处理（链接），...因此，如果密钥已经存在，则第二个操作通常需要哈希计算 + 查找 + 设置值所需的时间。

阅读有关该主题的更多信息：[http ://en.wikipedia.org/wiki/Hash_table](http://en.wikipedia.org/wiki/Hash_table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:55:08.820

第一次插入密钥将花费更多时间，因为它必须创建一个新的`java.util.Hashtable.Entry`.

而在替换键的现有值的情况下，它只需将新值分配给`value`现有`Entry`实例中的引用。

# javascript - Ember 数据保存关系

> ID：15138219
> 
> 赞同：9
> 
> 时间：2013-02-28T14:39:03.533
> 
> 标签：javascript, ember.js, ember-data

我很难在 ember 数据中保存一对多的关系。我有这样的关系：

```
App.ParameterSet = DS.Model
    name: DS.attr("string")
    regions: DS.hasMany("App.Region")

App.Region = DS.Model
    name: DS.attr("string") 
```

如果我要做这样的事情：

```
parameterSet = App.ParameterSet.find(5)
@transaction = @get("store").transaction()
@transaction.add(parameterSet)
region1 = App.Region.find(10)
region2 = App.Region.find(11)
parameterSet.set("name", "foo")
parameterSet.get("regions").pushObject(region)
@transaction.commit() 
```

然后我想看到一个带有这样有效负载的 PUT 请求：

```
api/ParameterSets/5

{parameterSet: {name: "foo", regionIds:[10, 11]}} 
```

但相反，我得到了这个：

```
{parameterSet: {name: "foo"}} 
```

我不关心从孩子到父母的关系，但如果我添加`parameterSet: DS.belongsTo("App.ParameterSet")`到 App.Region 模型，那么我会收到两个 PUT 请求到两个新关系的区域 url，这不是我真正想要的。

我想这是一个多对多的关系，我不确定它是否得到支持，但是关于如何实现我所描述的任何想法？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T21:16:34.747

关系的序列化`hasMany`由 的`addHasMany()`方法处理`json_serializer.js`。

[源代码](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/serializers/json_serializer.js#L113)中包含以下注释：

> 默认的 REST 语义是仅在嵌入的情况下添加具有-多关系。如果关系最初是由 ID 加载的，我们假设这是作为性能优化完成的，并且对 has-many 的更改应保存为子关系的外键更改。

要实现您想要的，一种选择是指示应将关系嵌入到您的适配器中。

```
App.Store = DS.Store.extend({
  adapter: DS.RESTAdapter.extend({
    serializer: DS.RESTSerializer.extend({
      init: function() {
        this._super();
        this.map('App.ParameterSet', {
          regions: { embedded: 'always' }
        });
      }
    })
  })
}); 
```

当然，现在您的后端将需要在参数集的 JSON 中实际嵌入关联区域的 JSON。如果您想保持原样，您可以简单地`addHasMany()`使用自定义序列化覆盖。

```
App.Store = DS.Store.extend({
  adapter: DS.RESTAdapter.extend({
    serializer: DS.RESTSerializer.extend({
      addHasMany: function(hash, record, key, relationship) {
        // custom ...
      }
    })
  })
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-16T15:44:07.933

我无法为 ahmacleod 的答案添加评论，但除了我注意到在修改子记录时父记录没有被标记为脏之外，它是正确的。在问题的示例中，不会出现问题，因为名称也在父记录上被修改。

但是，一般来说，如果您要遵循 ahmacleod 的第二个答案，则需要覆盖 RESTAdapter 上的方法dirtyRecordsForHasManyChange。否则，序列化程序中的 addHasMany 永远不会被调用，因为该记录甚至没有被标记为脏。

现有方法如下所示：

```
dirtyRecordsForHasManyChange: function(dirtySet, record, relationship) {
  var embeddedType = get(this, 'serializer').embeddedType(record.constructor, relationship.secondRecordName);

  if (embeddedType === 'always') {
    relationship.childReference.parent = relationship.parentReference;
    this._dirtyTree(dirtySet, record);
  }
}, 
```

所以我想你会想要这样的东西：

```
App.Store = DS.Store.extend({
  adapter: DS.RESTAdapter.extend({
    dirtyRecordsForHasManyChange: function(dirtySet, record, relationship) {
      relationship.childReference.parent = relationship.parentReference;
      this._dirtyTree(dirtySet, record);
    },

    serializer: DS.RESTSerializer.extend({
      addHasMany: function(hash, record, key, relationship) {
        // custom ...
      }
    })
  })
}); 
```

# hadoop - Zookeeper中的Leader和Follower配置

> ID：15138221
> 
> 赞同：0
> 
> 时间：2013-02-28T14:39:08.817
> 
> 标签：hadoop, apache-zookeeper

我想知道我必须在 Zookeeper 的哪里配置我的追随者和我的领导者？当我的配置文件中有这个时：

`server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888`

哪个是领导者，哪个是追随者？或者这是领导人选举的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T18:33:56.903

Zookeeper 中的任何服务器都可以随时成为领导者。如果当前的领导者宕机，或者大多数服务器无法连接到它，则会选举新的领导者。

唯一的例外是[观察者](http://zookeeper.apache.org/doc/trunk/zookeeperObservers.html)。

# wcf - 哪种架构更具可扩展性

> ID：15138222
> 
> 赞同：0
> 
> 时间：2013-02-28T14:39:09.913
> 
> 标签：wcf, azure, scale

我正在为*Windows **azure** cloud service*开发一个应用程序。

该应用程序的一般描述非常简单：MVC 4 上的前端、用于处理前端处理请求的中间层和 SQL Azure/Blob 后端......

到目前为止，我还没有开始编写代码，在此之前，我想获得一些反馈，说明以下哪种场景模型更具可扩展性以及可能的原因。如果您认为存在我没有考虑过的第 N 个选项，请公开它！

只是要明确单层应用程序是不可能的。

> **场景 1：**
> 前端使用中间层的 WCF 服务来执行所有处理。
> 
> **场景 2：**
> 前端在中间层使用 WCF 服务，该服务在 SB 上对该请求进行排队并等待。“第 3 层”使用消息并对其进行处理，还排队等待 WCF 服务响应的答案......
> 
> **场景 3：**
> 前端将消息排队并循环等待响应消息。“第 3 层”消费消息，对其进行处理并将其重新排队以供前端停止等待......

基本上所有的问题都恢复到“WCF 横向扩展的效果如何？”......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:43:57.647

消息传递始终是最具可扩展性的解决方案，因为您可以配置任意数量的工作人员来使用消息并处理它们。

但是，如果您仍希望 UI 同步操作，则切换到异步处理并非易事。您通常会切换到基于任务的 UI，其中不会向用户提供即时反馈（或伪造的反馈）。

我写过关于如何使用查询、域事件和命令来扩展的博客：http: [//blog.gauffin.org/2012/10/writing-decoupled-and-scalable-applications-2/](http://blog.gauffin.org/2012/10/writing-decoupled-and-scalable-applications-2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:32:26.160

你没有说前端需求是什么。这是一个需要数据响应的网站吗？通常，消息队列模式将更具可扩展性（但不是更快），因为您有许多选项来处理请求。然而，一旦你走上了这条路，就很难在没有一些技巧的情况下获得直接的类似同步的反馈给用户（SignalR 可能是这里的选择）。

对于它的价值，我倾向于在云中使用 CQRS 模式，因为它可以很好地扩展以满足我的需要。我必须处理命令被异步处理并且用户没有得到同步响应的事实。然后 UI 必须处理它。我们使用带有状态的命令处理表。网络（在这种情况下是我们的客户端）必须轮询该表以确定命令何时完成，以便知道何时尝试向客户端显示任何结果。对我们来说，为了获得我们正在寻找的规模（以及 CQRS 的其他好处），这是一个值得权衡的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T20:19:46.160

最具可扩展性的解决方案是您排除的解决方案——一个没有共享状态的单层 Web 应用程序，它可以拥有任意数量的节点。没有什么比负载均衡器后面的*n 个Web 服务器和**m*个分布式数据库节点更具*可扩展性了。*由于您已经排除了最具可扩展性的架构，因此您问错了问题，因为您可能不追求可扩展性。也许您正在研究其他一些架构原则，例如可用性。

 **为什么我们要在多个服务中分离出功能？有很多原因。异步处理允许更好的可用性（通过写入队列而不关心故障）。它还允许我们管理瓶颈，例如数据库。我们还将我们的应用程序分解为服务，以简化开发和部署。因此，它可能是可用性、可维护性、安全性、性能、可部署性、成本、可用性、可测试性、合规性或您正在寻找的其他东西。在抓住可扩展性锤之前，您需要自己回答这个问题。我专门写了[CALM](https://github.com/projectcalm/Azure-EN)来帮助提出和回答这些难题。

回到你的问题的细节。在 Windows Azure 上通常可扩展（如果这是您真正需要的话）的*事实上的*异步处理模式中没有 WCF。WCF 有特定的原因吗？它最好是一个好的，因为如果不需要，WCF 和服务总线会引入不必要的复杂性。在 Windows Azure 上，我们使用 Web 角色（托管 MVC 应用程序）实现异步处理，将消息放在 Windows Azure 队列上，这些由工作角色处理。如果您需要客户端（浏览器）了解结果，您可以手动滚动 CQRS 模式，或使用 SignalR，正如其他人提到的那样。我会认真考虑取出 WCF。

就您的场景而言：

> **场景 0：** 无状态 Web 服务器完成所有处理并直接与分布式数据库节点通信。这是最具可扩展性的，但还有其他缺点。
> 
> **场景 4：** 前端将消息放入 Azure 队列并将结果返回给客户端。Worker 角色处理消息并将结果*放在某处*（表存储或 blob）。浏览器 Javascript 轮询结果数据并在“完成”时将其呈现给客户端。这是CQRS-ish。（邓瑞的回答）
> 
> **场景 5：** 前端将消息放入 Azure 队列并将结果返回给客户端。Worker 角色处理消息并通过 SignalR 将结果发送给客户端。（jgauffin的回答）

我更喜欢场景5**

# jquery - 两个 jQuery 颜色选择器控制的类

> ID：15138225
> 
> 赞同：0
> 
> 时间：2013-02-28T14:39:20.983
> 
> 标签：jquery, html, color-picker

我的问题：[http ://www.danieldoktor.dk/test3/test3.html](http://www.danieldoktor.dk/test3/test3.html)

当您在任一调色板中选择颜色时，它会为两个框设置颜色。

我想要一个控制每个调色板的整体代码。

因此，当您从上框的调色板中选择颜色时，它只会更改上框的背景颜色，与下框相同。

我需要代码与类而不是 id 一起使用，因为稍后它将与 php 一起使用。

我的标记：

HTML

```
 <div class="lists">
        <header class="box_header" id="box1">
            <h1>HEADER 1</h1>
            <!--<div class="setting"></div>-->
            </header>
            <input type='text' class='flatPalette' value="#DDD" />
 </div>

 <div class="lists">
        <header class="box_header" id="box2">
            <h1>HEADER 2</h1>
            <!--<div class="setting"></div>-->
            </header>
            <input type='text' class='flatPalette' value="#DDD" />
 </div> 
```

jQuery

```
function updateBackground(color) {
    $(".lists").css("background", color.toHexString());
}

$(function() {

$(".flatPalette").spectrum({
    flat: true,
    showInput: true,
    showPaletteOnly: true,
    showPalette:true,
    maxPaletteSize: 10,
    palette: [
        ['black', 'white', 'blanchedalmond',
        'rgb(255, 128, 0);', 'hsv 100 70 50', "rgb(208, 224, 227)", "rgb(201, 218, 248)", "rgb(207, 226, 243)", "rgb(217, 210, 233)", "rgb(234, 209, 220)"],
        ['red', 'yellow', 'green', 'blue', 'violet']
    ],
    change: updateBackground
});

}); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:51:00.090

您使用 .lists 类来定位所有内容

因此，您要么需要将它们命名为不同的名称并为它们中的每一个调用它，要么分别针对它们并使用 $(this) 返回正确的

像这样的东西：

```
function updateBackground(color) {
     $(this).parents(".lists").css("background", color.toHexString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:50:53.207

您需要将颜色更改限制为已更改元素的父级，如下所示：

```
function updateBackground(color) {
    $(this).parents(".lists").css("background", color.toHexString());
} 
```

我没有尝试过该代码，但它应该可以正常工作。

# asp.net-mvc-4 - 在 EF5.x 中缺少对 PadLeft 的支持的任何解决方法？

> ID：15138234
> 
> 赞同：5
> 
> 时间：2013-02-28T14:39:52.107
> 
> 标签：asp.net-mvc-4, entity-framework-5

我正在 MVC4 和 Entity Framework 5 中开发一个应用程序，最近在执行我的查询时遇到了这个异常。

> {"LINQ to Entities 无法识别方法 'System.String PadLeft(Int32, Char)' 方法，并且此方法无法转换为存储表达式。"}

当我过去遇到类似错误时，我只是在查询之外创建了一个变量，然后在 LINQ 语句中使用了该变量。不幸的是，在这种情况下，我正在操纵行结果，所以我不确定如何去做，或者这是否是最好的方法。任何帮助，将不胜感激。我的查询如下：

```
 IQueryable<System.String> LEAPrograms = db.Datamart_Draft
            .Where(where => where.snapshot_id == snapshot_id
                && !String.IsNullOrEmpty(where.entity_program))
            .Select(sel => (sel.entity_program.PadLeft(PROGRAMLENGTH, '0'))).Distinct(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T15:37:31.057

它不是太优雅，但它可以完成工作：

```
...
.Select(sel => SqlFunctions.Replicate
                   ("0", PROGRAMLENGTH - sel.entity_program.Length)
             + sel.entity_program) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-07-31T14:41:07.013

我认为 Gert Arnold 的解决方案很优雅。这是基于他的回答的真正解决方案：

```
List<string> samplesWithoutMeasures = new List<string>();
samplesWithoutMeasures = (from mm in DB.MEDICIONESMUESTRA
   join mu in DB.MUESTRAS on mm.IDMUESTRA equals mu.IDMUESTRA
   where    (mu.IDESTADOMUESTRA >= 7 && mu.IDESTADOMUESTRA <= 8) && (mu.ESDUPLICADODE == null) &&
            (mm.IDESTADOMEDICIONMUESTRA == 1 &&  mm.IDPARAMETRO == Parameter.IDPARAMETRO) &&
            (mu.FECHARADICACION >= StartDate && mu.FECHARADICACION <= EndDate)
  select    SqlFunctions.Replicate("0", 15 - (SqlFunctions.StringConvert((double)mm.IDMUESTRA).Trim()).Length) 
            + SqlFunctions.StringConvert((double)mm.IDMUESTRA).Trim()
   ).ToList(); 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-02-28T18:10:14.767

我最终创建了一个列表，然后遍历结果。当我在列表上执行 .Distinct() 时，它会将其转换回 IEnumerable。我不确定性能方面哪个更好，但通过一些努力，我认为可以为 LINQ to Entities 创建一个 PadLeft，它做的事情大致相同。

```
 IEnumerable<String> LEAPrograms = db.Datamart_Draft.Where(wh => wh.snapshot_id == snapshot_id && !String.IsNullOrEmpty(wh.entity_program)).Select(se => se.entity_program).Distinct();
        // create and populate a List (because LINQ to Entities doesn't support PadLeft)
        List<String> PaddedPrograms = new List<String>();
        foreach (var row in LEAPrograms)
        {
            PaddedPrograms.Add(row.PadLeft(4, '0'));
        }
        LEAPrograms = PaddedPrograms.Distinct(); 
```

# apache - Apache URL 重写 - 匹配目录

> ID：15138236
> 
> 赞同：0
> 
> 时间：2013-02-28T14:39:54.347
> 
> 标签：apache, mod-rewrite, rewrite

我有一个具有以下规则的*.htaccess文件：*

```
RewriteRule ^api\/([A-Za-z0-9\-]+)\/?([0-9=a-zA-Z%]+)?\/?$   api.php?service=$1&param=$2 [QSA,L] 
```

出于某种原因，它在我的主机上运行，​​但不在我的本地 LAMP 安装上。有什么我做错了吗？

*Apache 版本：* Apache/2.2.22 (Ubuntu)

*错误消息：* 404 Not Found（“在此服务器上找不到请求的 URL /api/word/search/。”）

**编辑**：有另一个重写规则正在工作，所以 mod_rewrite 模块被激活：

```
RewriteRule ^([a-z]+)\.page$    index.php?template=$1 [QSA,L] 
```

Apache 站点配置是（本地）：

```
DocumentRoot /var/www/Development-Env
<Directory />
        Options FollowSymLinks
        AllowOverride All
</Directory>
<Directory /var/www/Development-Env/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
</Directory> 
```

**编辑 #2**我正在尝试匹配`http://localhost/api/service/method/`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:51:10.053

可能未启用 apache mod rewrite，或者未允许 htaccess。在这一切之前不要忘记

```
RewriteEngine On 
```

你也试试`RewriteRule ^api/(.*)/(.*)$ api.php?a=$1&d=$2 [NC]`

如果你需要一个 api 你有一个 api 我用这个

[http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:05:17.850

根据`Options Indexes FollowSymLinks MultiViews`你的问题，我猜问题是启用了 MultiViews。

您可以尝试在重写规则集之上添加这一行：

`Options +FollowSymlinks -MultiViews`

# magento - Magento 一个订单的多个优惠券代码，无需延期

> ID：15138237
> 
> 赞同：4
> 
> 时间：2013-02-28T14:39:57.077
> 
> 标签：magento

我已经工作了 3 天，试图在一个订单中应用多个优惠券代码。

我知道有可用的模块。但我不想花钱购买模块。我想要一些自定义代码，以便我可以在单个订单中应用超过 1 个优惠券代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T04:31:17.347

为了添加 2 个优惠券代码，我所做的是这样的：

1) 在 sales_flat_quote 表中添加列 coupon_code2

```
ALTER TABLE sales_flat_quote 
```

添加（ `coupon_code2`varchar（255））“；

2) 要添加您的新优惠券代码 2，只需将其保存在报价单中：

```
Mage::getSingleton('checkout/cart')->getQuote()->setCouponCode2($coupon_code)->save(); 
```

3）最后计算优惠券代码我在观察者文件中添加了函数：/magento/app/code/core/Mage/Sales/Model/Observer.php

```
 public function setDiscountCouponCode2(Varien_Event_Observer $observer)
{
    $couponCode2 = $observer->getEvent()->getQuote()->getCouponCode2();

    $oCoupon = Mage::getModel('salesrule/coupon')->load($couponCode2, 'code');
    $oRule = Mage::getModel('salesrule/rule')->load($oCoupon->getRuleId());
    $ruleData = $oRule->getData();
    $flag =0;
    if(isset($ruleData['product_ids'])){
        $product_ids = $ruleData['product_ids'];
        foreach(Mage::getSingleton('checkout/session')->getQuote()->getAllItems() as $_item){
                if($product_ids == $_item->getProductId()){
                        $flag = 1;
                }
        }
    }

if($flag){
        $ruleSimpleAction = $ruleData['simple_action'];
        $ruleDiscountAmount = $ruleData['discount_amount'];

        $quote=$observer->getEvent()->getQuote();
        $quoteid=$quote->getId();

        $discountAmount=$ruleDiscountAmount;
        if($quoteid) {
            if($discountAmount>0) {
                $total=$quote->getBaseSubtotal();
                $quote->setSubtotal(0);
                $quote->setBaseSubtotal(0);

                $quote->setSubtotalWithDiscount(0);
                $quote->setBaseSubtotalWithDiscount(0);

                $quote->setGrandTotal(0);
                $quote->setBaseGrandTotal(0);

                $canAddItems = $quote->isVirtual()? ('billing') : ('shipping'); 
                foreach ($quote->getAllAddresses() as $address) {

                    $address->setSubtotal(0);
                    $address->setBaseSubtotal(0);

                    $address->setGrandTotal(0);
                    $address->setBaseGrandTotal(0);

                    $address->collectTotals();

                    $quote->setSubtotal((float) $quote->getSubtotal() + $address->getSubtotal());
                    $quote->setBaseSubtotal((float) $quote->getBaseSubtotal() + $address->getBaseSubtotal());

                    $quote->setSubtotalWithDiscount(
                        (float) $quote->getSubtotalWithDiscount() + $address->getSubtotalWithDiscount()
                    );
                    $quote->setBaseSubtotalWithDiscount(
                        (float) $quote->getBaseSubtotalWithDiscount() + $address->getBaseSubtotalWithDiscount()
                    );

                    $quote->setGrandTotal((float) $quote->getGrandTotal() + $address->getGrandTotal());
                    $quote->setBaseGrandTotal((float) $quote->getBaseGrandTotal() + $address->getBaseGrandTotal());

                    $quote ->save(); 

                    $quote->setGrandTotal($quote->getBaseSubtotal()-$discountAmount)
                        ->setBaseGrandTotal($quote->getBaseSubtotal()-$discountAmount)
                        ->setSubtotalWithDiscount($quote->getBaseSubtotal()-$discountAmount)
                        ->setBaseSubtotalWithDiscount($quote->getBaseSubtotal()-$discountAmount)
                        ->save(); 

                    if($address->getAddressType()==$canAddItems) {
                        $address->setSubtotalWithDiscount((float) $address->getSubtotalWithDiscount()-$discountAmount);
                        $address->setGrandTotal((float) $address->getGrandTotal()-$discountAmount);
                        $address->setBaseSubtotalWithDiscount((float) $address->getBaseSubtotalWithDiscount()-$discountAmount);
                        $address->setBaseGrandTotal((float) $address->getBaseGrandTotal()-$discountAmount);
                        if($address->getDiscountDescription()){
                            $address->setDiscountAmount(-($address->getDiscountAmount()-$discountAmount));
                            $address->setDiscountDescription($address->getDiscountDescription().', Instant Exchange -'.$couponCode2);
                            $address->setBaseDiscountAmount(-($address->getBaseDiscountAmount()-$discountAmount));
                        }else {
                            $address->setDiscountAmount(-($discountAmount));
                            $address->setDiscountDescription('Instant Exchange -'.$couponCode2);
                            $address->setBaseDiscountAmount(-($discountAmount));
                        }
                        $address->save();
                    }
                }

                foreach($quote->getAllItems() as $item){
                    $rat=$item->getPriceInclTax()/$total;
                    $ratdisc=$discountAmount*$rat;
                    $item->setDiscountAmount(($item->getDiscountAmount()+$ratdisc) * $item->getQty());
                    $item->setBaseDiscountAmount(($item->getBaseDiscountAmount()+$ratdisc) * $item->getQty())->save();
                }
            }
        }
}else{
        Mage::getSingleton('checkout/cart')->getQuote()->setCouponCode2('')->save();
    }
} 
```

4) 最后通过更新同一文件中的 setQuoteCanApplyMsrp 函数调用上述函数：

```
 public function setQuoteCanApplyMsrp(Varien_Event_Observer $observer)
{
    /** @var $quote Mage_Sales_Model_Quote */
    $quote = $observer->getEvent()->getQuote();

    $canApplyMsrp = false;
    if (Mage::helper('catalog')->isMsrpEnabled()) {
        foreach ($quote->getAllAddresses() as $adddress) {
            if ($adddress->getCanApplyMsrp()) {
                $canApplyMsrp = true;
                break;
            }
        }
    }
    $this->setDiscountCouponCode2($observer);
    $quote->setCanApplyMsrp($canApplyMsrp);
} 
```

# c - 未提及的结构字段*总是*初始化为零（即当结构在堆栈上时）？

> ID：15138238
> 
> 赞同：4
> 
> 时间：2013-02-28T14:39:59.190
> 
> 标签：c, struct, initialization

通过实验（在 Clang 和 GCC 中，使用 -O2 和 -O0）*似乎*在以下代码中

```
typedef struct foo_s { int i; int j; } foo_t;
int main(void) {
    foo_t foo = {.i = 42};
    ... 
```

foo.j 自动为零。

是 C99 以后的保证，还是编译器特定的实现细节？

注意：我什至尝试将 0xFFs 写入堆栈下方的无效内存，位于 foo 稍后给出的地址。

更新：有几条评论指出这只是因为堆栈下方的内存恰好包含零。以下代码确保不是这种情况，并且可以证明 GCC -O0 正在清零内存。

-7 和 -6 的偏移量取决于编译器。他们需要在 Clang 中有所不同。

```
typedef struct foo_s { int i; int j; } foo_t;

int main(void) {
    int r;
    int *badstack0 = &r - 7;
    int *badstack1 = &r - 6;

    *badstack0 = 0xFF; // write to invalid ram, below stack
    printf("badstack0 %p, val: %2X\n", badstack0, *badstack0);
    *badstack1 = 0xEE; // write to invalid ram, below stack
    printf("badstack1 %p, val: %2X\n", badstack1, *badstack1);

    // struct test
    foo_t foo = {.i = 42};
    printf("&foo.i %p\n", &foo.i);
    printf("&foo.j %p\n", &foo.j);
    printf("struct test: i:%i j:%i\n", foo.i, foo.j);
    return 0;
} 
```

输出：

```
badstack0 0x7fff221e2e80, val: FF
badstack1 0x7fff221e2e84, val: EE
&foo.i 0x7fff221e2e80
&foo.j 0x7fff221e2e84
struct test: i:42 j:0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T14:42:17.570

如果您提供任何初始化程序，则未明确提及的成员将被初始化，就好像它们是静态的一样。6.7.9 (19) 中的标准保证了这一点：

> 初始化应按初始化程序列表顺序进行，为特定子对象提供的每个初始化程序都覆盖同一子对象的任何先前列出的初始化程序；**所有未显式初始化的子对象都应隐式初始化，与具有静态存储持续时间的对象相同**。

（重点由我添加）

如果不初始化任何成员，则所有成员的值都是不确定的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T15:15:38.897

C 保证只要数组/结构/联合* 的至少一个成员被显式初始化，那么所有其他成员都将被初始化，就好像它们具有静态存储持续时间一样，正如 Daniel Fischer 的回答中所引用的那样。换句话说，所有其他成员都自动设置为零或 NULL。

数组/结构/联合的存储类型无关紧要，无论它们是自动存储时间还是静态存储时间，它们都根据相同的规则进行初始化。

这不是 C99 或更高版本独有的东西，C*一直*有这个要求。所有符合标准的 C 编译器都遵循这个规则，它是*规范*的，而*不是*实现定义的。

这与“调试版本”归零无关。

事实上，这条规则解释了为什么你可以通过编写来将整个数组归零

`int array[100] = {0}`.

这段代码的意思是，“将第一个元素初始化为零，并将剩余的 99 个元素初始化，就好像它们具有静态存储持续时间一样，即也将它们设为零”。

* * *

(*) 这三种类型在 C 标准中被正式命名为“聚合类型”。

# java - Holo Everywhere 和 facebookSDK 不起作用

> ID：15138241
> 
> 赞同：0
> 
> 时间：2013-02-28T14:40:11.507
> 
> 标签：java, android, facebook, android-support-library, android-holo-everywhere

我正在尝试将 facebook SDK 与 holoeeverywhere 一起使用，但由于库 android v4 无法正常工作，似乎库与 sherlock facebook 不同，然后如何解决？有人已经实现了这个？

抱歉，我的英语不好。

泰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:04:10.593

我在使用 ActionBarSherlock 和兼容性库时遇到了问题。我所做的修复它是从我的项目和 ABS 中删除兼容性库，然后我右键单击 ABS 并执行 Android Tools->Add Support Library。之后，我还将它添加回我的项目。清理工作区，错误就消失了。希望这可以帮助！

# database - 如何动态计算数据库架构中所有表和列中具有空值的所有行

> ID：15138246
> 
> 赞同：0
> 
> 时间：2013-02-28T14:40:28.333
> 
> 标签：database, tsql, count, null, isnull

我需要创建一个异常报告，查看特定模式中的所有表，然后计算列和行，并列出每列有多少条目包含 NULL 值。

在不使用游标的情况下如何做到这一点？

*例子：*

> People_Table 有 3 列（NAME、SURNAME、CONTACT_NO）
> Entity_Table 有 5 列（ID、NAME、ADDRESS、TEL_NO、FAX_NO）

我需要生成一个输出，列出每个表和列名以及每个列中包含 NULL 值的记录数。

> People_Table : NAME (4), SURNAME (9), CONTACT_NO (120)
> Entity_Table : ID (0), NAME (4), ADDRESS (90), TEL_NO (120), FAX_NO (100)

请注意，输出可以是常规数据集格式，不需要看起来像条目的串联！我只是以这种方式列出它来描述数据输出。

这是针对随时间变化的动态数据库，作为在此阶段没有任何 NULL 条目的列，将来可能会有 NULL 条目，所以我需要跟踪它。到目前为止，我已经为这个解决方案做了其他事情，这是我现在需要的最后一个。有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:57:11.883

试试这个（虽然使用游标）：

```
DECLARE @tbl sysname
DECLARE @col sysname
DECLARE @sql nvarchar(max)
DECLARE @cnt INT

CREATE TABLE #result
(
    tbl sysname,
    col sysname,
    nulls int
)

DECLARE crs CURSOR FOR 
select t.name, c.name
from sys.columns c
join sys.tables t on c.object_id = t.object_id

OPEN crs

FETCH NEXT FROM crs INTO @tbl, @col

WHILE @@FETCH_STATUS=0
BEGIN

    SET @sql = 'select @cntOUT=count(*)  from '+@tbl+' where '+@col+' is null'

    SET @cnt = 0
    exec sp_executesql @sql, N'@cntOUT INT OUTPUT', @cntOUT=@cnt OUTPUT

    INSERT INTO #result (tbl, col, nulls)
    VALUES (@tbl, @col, @cnt)

    FETCH NEXT FROM crs INTO @tbl, @col
END

CLOSE crs
DEALLOCATE crs

SELECT * FROM #result

DROP TABLE #result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:14:00.650

```
DECLARE @dbname VARCHAR(100) = 'dbname'
DECLARE @schemaName VARCHAR(100) = 'schemaname'
DECLARE @result TABLE ([NullValues] int,col VARCHAR(4000))

SELECT  @dbname dbname
        ,t.name tbl
        ,c.name col
INTO    #Temp1
FROM    sys.columns c
JOIN    sys.tables t ON 
        t.object_id = c.object_id
JOIN    sys.schemas s ON 
        s.schema_id = t.schema_id
WHERE   c.is_nullable = 1
AND     s.name in (@schemaName)

DECLARE @sql NVARCHAR(MAX) =
STUFF(
(
    SELECT  'UNION ALL SELECT Count(*) as [NullValues],''' + @dbname + '.' + @schemaName + '.' + tbl + '.' + col + ''' FROM ' + @dbname + '.' + @schemaName + '.' + tbl + ' WHERE ' + col + ' IS NULL '
    FROM    #Temp1
    FOR     XML PATH('')
), 1, 10, '   ')

INSERT @result
EXEC(@sql)

SELECT  [NullValues], col
INTO #Nulls
FROM    @result
WHERE   col IS NOT NULL AND [NullValues] > 0

SELECT
       [TABLE_CATALOG] + '.' + [TABLE_SCHEMA] + '.' + [TABLE_NAME] + '.' + [COLUMN_NAME] as SchemaTableColumn
      ,[TABLE_CATALOG] as 'Database'
      ,[TABLE_SCHEMA] as 'Schema'
      ,[TABLE_NAME] as 'TableName'
      ,[COLUMN_NAME]
      ,[ORDINAL_POSITION]
      ,[DATA_TYPE]
INTO #Temp2
  FROM [DW_LandingCR].[INFORMATION_SCHEMA].[COLUMNS]
  WHERE
    [TABLE_SCHEMA] = @schemaName
  ORDER BY TABLE_SCHEMA,TABLE_NAME,ORDINAL_POSITION

SELECT sc.name as [Schema],ta.name as [TableName],SUM(pa.rows) RowCnt
INTO #Temp3
 FROM sys.tables ta
 INNER JOIN sys.partitions pa
 ON pa.OBJECT_ID = ta.OBJECT_ID
 INNER JOIN sys.schemas sc
 ON ta.schema_id = sc.schema_id
 WHERE ta.is_ms_shipped = 0 
 AND pa.index_id IN (1,0)
 AND sc.name = @schemaName
 GROUP BY sc.name,ta.name
 ORDER BY sc.name,ta.name

Select 
    tp2.*,tp3.RowCnt 
Into #Detail
From 
    #Temp2 tp2 
    inner join #Temp3 tp3 on tp2.[Schema]=tp3.[Schema] and tp2.[TableName]=tp3.[TableName]

Select
    det.*,
    n.[NullValues]
From
    #Nulls n
    Inner Join #Detail det on det.SchemaTableColumn=n.col
Order By
    det.[Database],
    det.[Schema],
    det.TableName,
    det.[ORDINAL_POSITION]

Drop Table #Nulls
Drop Table #Detail
Drop Table #Temp1
Drop Table #Temp2
Drop Table #Temp3 
```

# java - Android SQLite：如何使查询工作？

> ID：15138250
> 
> 赞同：-1
> 
> 时间：2013-02-28T14:40:35.953
> 
> 标签：java, android, database, sqlite

**这是 MainActivity.java**

```
package com.example.sqltwo;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class MainActivity extends Main {
public static final String KEY_NAMES = "";
public static final String KEY_VALUES = "";

private static final String DATABASE_NAME = "Database";
private static final String DATABASE_TABLE = "DBTable";
private static final int DATABASE_VERSION = 1;

private DbHelper qhelper;
private final Context qcontext;
private SQLiteDatabase qdatabase;

private static class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
            KEY_NAMES + " TEXT NOT NULL, " +
            KEY_VALUES + " TEXT NOT NULL);"
            );
}
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

    }
}
public MainActivity(Context c){
    qcontext = c;
}
public MainActivity open() throws SQLException{
    qhelper = new DbHelper(qcontext);
    qdatabase = qhelper.getWritableDatabase();
    return this;
}
public void close(){
    qhelper.close();
}

public long createEntry(String name, String value) {
    ContentValues cv = new ContentValues();
            cv.put(KEY_NAMES, name);
            cv.put(KEY_VALUES, value);
            return qdatabase.insert(DATABASE_TABLE, null, cv);
}
public String getData() {
    String[] columns = new String[]{KEY_NAMES, KEY_VALUES};
    Cursor c = qdatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iValue = c.getColumnIndex(KEY_VALUES);
    int iName = c.getColumnIndex(KEY_NAMES);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + c.getString(iName) + "\n" + c.getString(iValue) + "\n";
    }
    return result;  
}   
} 
```

**这是 Main.java**

```
package com.example.sqltwo;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class Main extends Activity implements OnClickListener{
Button sqlUpdate, sqlView, sqlQuery;
EditText sqlName, sqlValue, sqlQuery_value;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    sqlUpdate = (Button) findViewById(R.id.buttonupdate);
    sqlName = (EditText) findViewById(R.id.editname);
    sqlValue = (EditText) findViewById(R.id.editvalue);
    sqlView = (Button) findViewById(R.id.buttonview);
    sqlView.setOnClickListener(this);
    sqlUpdate.setOnClickListener(this);
    sqlQuery = (Button) findViewById(R.id.buttonsearch);
    sqlQuery_value = (EditText) findViewById(R.id.editquery);
}
public void onClick(View arg0) {
    switch (arg0.getId()) {
    case R.id.buttonupdate:
        String name = sqlName.getText().toString();
        String value = sqlValue.getText().toString();
        MainActivity entry = new MainActivity(Main.this);
        entry.open();
        entry.createEntry(name, value);
        entry.close();
        break;
    case R.id.buttonview:
        Intent intentone = new Intent();
        intentone.setClassName("com.example.sqltwo", "com.example.sqltwo.View");
        startActivity(intentone);
        break;
    }
}
} 
```

**我的错误**

```
02-28 09:23:07.334: E/AndroidRuntime(827): android.database.sqlite.SQLiteException: duplicate column name: TEXT (code 1): , while compiling: CREATE TABLE DBTable ( TEXT NOT NULL,  TEXT NOT NULL); 
```

我要这个做什么？

您可以输入名称和值并将数据更新到数据库中。视图功能尚未编码。我需要输入数据，没有崩溃。我需要在 MainActivity 中设置一个查询系统，它将与 Main 中的 switch-case 系统一起使用。如何做到这一点，当我输入查询时，它会将数据发送到 MainActivity，运行搜索，然后返回有效值列表？

-Extra：如何使每个查询返回的数据集显示在一个表行中，并在出现更多数据时添加行？

-Extra：我可以请人实时帮助我吗？要问的问题太多了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:49:31.383

创建对象时，您还没有列的名称。您必须使用列名传递参数或按照 Malaka 所说初始化变量。

```
public static final String KEY_NAMES = "column1";
public static final String KEY_VALUES = "column2"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:42:29.633

您需要为您的列 (`KEY_NAMES`和`KEY_VALUES`) 提供唯一名称。

尝试：

```
public static final String KEY_NAMES = "column1";
public static final String KEY_VALUES = "column2"; 
```

只要您记得在整个应用程序中使用相同的名称引用它们，您就可以更改`column1`和为您想要的任何两个不同的字符串。`column2`

> 如何做到这一点，当我输入查询时，它会将数据发送到 MainActivity，运行搜索，然后返回有效值列表？

只需使用输入的值在数据库上运行 SQL 语句。

> -Extra：如何使每个查询返回的数据集显示在一个表行中，并在出现更多数据时添加行？

有一个显示行的 UI。执行一个 select 语句，遍历返回的游标并填充每一行。更新数据库后，只需再次运行 select 语句并重新填充 UI。如果添加主键，则可以运行后续选择语句，该语句仅查找比最后一行的主键更新的数据。

> -Extra：我可以请人实时帮助我吗？要问的问题太多了？

雇用某人以获得独家帮助。

# javascript - 我不确定这是 JavaScript 中的闭包吗？

> ID：15138262
> 
> 赞同：0
> 
> 时间：2013-02-28T14:41:05.587
> 
> 标签：javascript

这是 JavaScript 中的闭包吗？

```
var test = function(b){
    var a = 1;
    return function(b){
        a + b
    }
};
var c = test(2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:48:13.650

引入了一个闭包，然后您在 test 中定义一个函数，该函数返回测试函数的本地属性。一个闭包的例子在这里：

```
;(function() {

    var local = 123

    window.foo = function() {
        return local
    }
})() 
```

您在示例中非常接近的是currying，它涉及一个返回函数以获取第二个参数的函数。例如：

```
function add(a) {
    return function(b) {
        return a + b;
    }
}

add(5)(6) // 11 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:29:42.753

变量一个; 外部函数的参数 b 是内部函数闭包的一部分。有关闭包的详细说明，请查看[常见问题解答](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

```
var test = function(b){ // <= param b is part of the closure of the inner function
    var a = 1;          // <= a is part of the closure of the inner function as well 
    return function(b){ // <= the inner function
        a + b           // <= here you are just add ind a and b together
                        //    return a + b; //would be more appropriate
    }
};
var c = test(2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-12T02:47:10.757

```
var globalVar = "xyz";

(function outerFunc(outerArg) {
    var outerVar = 'a';

    (function innerFunc(innerArg) {
    var innerVar = 'b';

    console.log(
        "outerArg = " + outerArg + "\n" +
        "innerArg = " + innerArg + "\n" +
        "outerVar = " + outerVar + "\n" +
        "innerVar = " + innerVar + "\n" +
        "globalVar = " + globalVar);

    })(456);
})(123);
```

**此代码与上面的代码相同，但写入结果和输出的新方法将相同** *})(123);* 这里首先自动调用外部函数传递参数 123 然后 *})(456);* 自动调用内部函数

注意这种方式没有退货要求

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-12T02:51:46.653

```
var globalVar = "xyz";

function outerFunc(outerArg) {
    var outerVar = 'a';

     var r3= function innerFunc(innerArg) {
    var innerVar = 'b';

    console.log(
        "outerArg = " + outerArg + "\n" +
        "innerArg = " + innerArg + "\n" +
        "outerVar = " + outerVar + "\n" +
        "innerVar = " + innerVar + "\n" +
        "globalVar = " + globalVar);

    };
	return r3;
};

var r=outerFunc(123);
r(456);
```

**变量 r=outerFunc(123); ...这里我们调用了外部函数并将这个结果返回到 r 变量中** ，我们不能直接使用内部函数。我们必须调用外部函数并在变量中分配它们的返回值，因为上面的代码返回函数

# c# - 使用 foreach 使用列表框选定项从列表中删除

> ID：15138266
> 
> 赞同：0
> 
> 时间：2013-02-28T14:41:16.480
> 
> 标签：c#

我正在尝试使用通过单击按钮运行的此方法，该方法将从列表框中检索所选项目，然后从列表中删除该项目。每当我运行代码时，我都会收到此错误：“此枚举器绑定到的列表已被修改。仅当列表未更改时才能使用枚举器。”。

我完全被难住了。

```
 public void DeleteSale()
    {
        foreach (BootSale b in lstBootSales.SelectedItems)
        {

            lstBootSales.Items.Remove(b.Id);
            lstBootSales.Items.Remove(b.Date);

            DisplayAllBootSales();
        }
    } 
```

`DisplayAllBootSales();`之后只需刷新列表框值

我有一个列表“BootSale”，我在其中存储写入列表框的信息。我希望能够单击列表框中的项目，然后单击删除，它将从系统中完全删除

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:43:05.017

错误消息说明了一切。您不能从正在迭代的列表中删除项目。`foreach`您必须删除循环之外的项目。一个简单的解决方法是改用常规`for`循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:43:09.427

做这个：

```
class Foo {

    BootSaleList bootsalelist;

    public void DeleteSale()
    {
        foreach (BootSale b in lstBootSales.SelectedItems.OfType<BootSale>().ToArray())
        {
            //temp.Remove(b); -- no more of this guy
            bootsalelist.ReturnList().Remove(b);
            lstBootSales.Items.Remove(b);

            // and no more of these guys:

            //lstBootSales.Items.Remove(b.Id); 
            //lstBootSales.Items.Remove(b.Date);
            //DisplayAllBootSales();
        }
    }

 } 
```

在哪里：

```
[Serializable]
public class BootSaleList : IDisplay
{
    private List<BootSale> bootsales;

    public List<BootSale> ReturnList()
    {
        return bootsales;
    }
} 
```

它会完美地工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T14:44:14.120

您不能从 foreach 中修改集合，但是可以使用临时列表，类似于：

```
public void DeleteSale()
{
    List<T> temp = lstBootSales;
    foreach (BootSale b in lstBootSales.SelectedItems)
    {
        temp.Items.Remove(b.Id);
        temp.Items.Remove(b.Date);

        DisplayAllBootSales();
    }

    lstBootSales = temp;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T14:54:03.390

最好的方法是循环列表 Top - Down （而不是 down - top）

```
for(int i = YourListItems.Count(); i > 0; i--)
{
    // Remove from list
} 
```

这种方式将防止任何索引错误。

祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T14:47:31.950

查看您的代码，我可能会假设，其中`lstBootSales`包含`BootSale`. 但是您正试图删除与 BootSale 不同的东西。也使用`for`代替 foreach：

```
 for (int i = 0; i < lstBootSales.SelectedItems.Count; i++)
        {
            lstBootSales.Items.Remove(lstBootSales.SelectedItems[i]);

            DisplayAllBootSales();
        } 
```

# sql - 如何获取 SQL 结果的出现频率？

> ID：15138270
> 
> 赞同：1
> 
> 时间：2013-02-28T14:41:25.013
> 
> 标签：sql, sql-server, sql-server-2012

我在 SQL Server 2012 中有一个非规范化表，其中包含来自 Windows 应用商店的公开可用数据。每个条目都是一个应用程序，我的表 ( `Apps`) 看起来像这样（简化）：

```
Id
StoreId
Name
Publisher
MainCategory
SubCategory
Rating
AmountofRatings 
```

我现在要查询的是每个发布者的应用数量出现频率的列表。很难描述，所以这里有一个例子：

> 我想知道有多少出版商在商店里有 10 个应用程序，有多少出版商在商店里有 20 个应用程序，等等。

我尝试了所有不同类型的查询（包括 中的子查询`GROUP BY`），但我就是不知道如何获取这些数据。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:44:29.177

这是频率查询的频率：

```
select cnt, count(*), min(publisher), max(publisher)
from (select publisher, count(*) as cnt
      from t
      group by publisher
     ) t
group by cnt
order by 1 
```

# c++ - 无法注册 DLL

> ID：15138277
> 
> 赞同：1
> 
> 时间：2013-02-28T14:41:50.603
> 
> 标签：c++, dll, atl, dllregistration

我正在做一个 ATL 项目。当我在 x64 系统下构建解决方案时，它不适用于 x86 架构，反之亦然。（我无法注册在不同架构中生成的 dll）。问题可能出在哪里？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:28:43.803

您提到的症状不太可能与描述的完全一样。是否构建无关紧要`Win32`，`x64`重要的是构建时选择的目标平台。然后，

> 我无法注册在不同架构中生成的 dll

在 32 位 Windows 中，您无法使用`x64`DLL，这是设计使然。但是，在 64 位系统中，您通常同时拥有 32 位和 64 位“环境”，您可以`Win32`在那里使用和注册 DLL。如果不能，典型的原因是缺少强制依赖项（CRT 或其他 DLL，[Dependency Walker](http://www.dependencywalker.com/)可能会有所帮助）。您需要检查一下，因为 Q 没有这方面的相关信息。

除了注册之外，另一个可能的问题可能与 DLL 的“使用”有关。如果您“使用”来自您的 .NET 应用程序构建`AnyCPU`平台的 DLL，并且该应用程序在 64 位 Windows 中作为 64 位进程运行，那么它将不会选择并使用您的 32 位 DLL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:00:33.377

```
[D:\命令]
>*键入 regsvr_32bit.bat*
@echo 关闭
rem "%SystemRoot%\Syswow64\regsvr32.exe" %s*
开始 "", regsvr_32bit.exe.lnk "%~f1"

[D:\命令]
> _

```

“.lnk”文件是一个普通的 Windows 快捷方式。

相反，您可以使用注释中显示的路径。

* * *

请注意，64 位可执行文件位于 [system32] 目录中，而 32 位可执行文件位于 [SysWOW64] 目录中。虽然这对于那些思考的人来说可能会很混乱，但对于那些不思考的人来说，这是 Just Works™ 的一种兼容性措施。因为我倾向于认为我为此挣扎了很长时间……

这是 regsvr32 的结果（例如）：

```
[C:\Program Files (x86)\Microsoft Visual Studio 11.0]
>*转储/标题“%SystemRoot%\Syswow64\regsvr32.exe”| 找到“机器”*
             14C机（x86）
                   32位字机

[C:\Program Files (x86)\Microsoft Visual Studio 11.0]
>*垃圾箱 /headers "%SystemRoot%\system32\regsvr32.exe" | 找到“机器”*
            8664机（x64）

[C:\Program Files (x86)\Microsoft Visual Studio 11.0]
> _

```

# opencv - OpenCV createsamples 和 traincascade 参数（宽度和高度）

> ID：15138287
> 
> 赞同：6
> 
> 时间：2013-02-28T14:42:09.697
> 
> 标签：opencv

我正在尝试创建训练样本（并随后训练分类器）。我对createsamples 和 traincascade 中使用的`-h`和参数感到困惑。`-w`我看到的示例通常使用较小的值，但我的训练图像（负和正）要大得多（480x640），而我正在训练的对象通常占据图像的 75-100%。这些参数似乎没有询问图像的大小（它可以简单地从图像中提取），但我怀疑它也没有询问图像中对象的大小。如果我必须猜测（我宁愿不猜测），更大的尺寸可能会导致更好的检测精度，但会增加训练期间的计算量。

有人可以描述这些参数的实际含义吗？我见过的大多数示例都使用 24x24 或超过 40x40 的默认值，但据我所知从未高出多少。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T15:01:20.940

这些小的图像值是您要为其训练分类器的正面（对象）。真实帧中的对象可能具有任意大小，因为级联分类器适用于图像的各种比例。

[这](http://note.sonots.com/SciSoftware/haartraining.html)是一个很好的教程，在我训练自己的分类器时帮助了我。您用于训练的裁剪图像的尺寸可能更大，但是当您运行时，`createsamples`您需要指定正纹理缩放的尺寸。这些新的微小样本是用于分类器的样本。这也会影响级联分类器的速度，这就是它们通常尺寸很小的原因。

如果我没记错的话，背景图像的尺寸可能会更大，但我记得我仍然将背景图像裁剪成更小的部分。

当您使用真实的 640x480 数据运行分类器时，您指定正数可以具有的最小大小的限制（当然这个值应该*至少*是您之前指定的 -w -h 的大小）以及最大预期大小。

haar 检测器将仅在测试图像中的窗口范围内搜索对象，该窗口范围可以任意大。

# facebook - Facebook OG 被 BackboneJS 网站重定向到索引页面

> ID：15138288
> 
> 赞同：2
> 
> 时间：2013-02-28T14:42:11.360
> 
> 标签：facebook, backbone.js, facebook-opengraph, scraper

我有一个使用 BackboneJS 创建的网站，我正在尝试实现 Facebook OG，以便当用户从 Facebook 状态粘贴我网站的 URL 时，它将显示标题、图像等。

我的问题是 FB 刮板总是被重定向到索引页面，因为 Apache 将所有流量重定向到索引页面，因此 BB 路由器可以正常工作。它只看到用于索引页面的 og 标题、og 图像等，而不是在我的其他页面上。

Facebook 爬虫/爬虫似乎没有通过 BB 路由器。它只是呈现静态 index.html 页面。

有没有人有这个解决方法/解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:09:52.840

我建议在您的网站 HTML 本身（不是 Backbone）中配置 Facebook Open Graph 标签。FB 具有用于生成小预览的特殊标签。[这](https://developers.facebook.com/docs/opengraphprotocol/)是文档。

Facebook 爬虫/爬虫没有通过主干路由可能是因为它不运行 javascript。

由于它不运行 JS，因此您可以设置一个脚本来在页面访问 index.html 时读取请求 uri，然后重定向到具有适当 OG 标签的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:07:22.843

您可以使用 Facebook Lint 工具来调试 OG 对象，它位于您的域链接之一上：

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fembedible.com%2Fvideo%2FamQ1Njg4QGdtYWlsLmNvbTI5OA%3D%3D](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fembedible.com%2Fvideo%2FamQ1Njg4QGdtYWlsLmNvbTI5OA%3D%3D)

请注意，显示[http://embedible.com/](http://embedible.com/)的 og:url 存在问题，尽管您的 OG 对象 url 实际上是[http://embedible.com/video/amQ1Njg4QGdtYWlsLmNvbTI5OA==](http://embedible.com/video/amQ1Njg4QGdtYWlsLmNvbTI5OA==)

你可以在 lint 调试器的**Redirect Path**部分看到它，被废弃的实际 url 是`http://embedible.com/`

在我的网站上，我们根据 url 使用不同的数据呈现相同的 html 模板。所以我有 2 个模板引擎，一个用于客户端的真实视图，一个用于填充元标记的服务器

底线：您必须替换服务器上的元标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T03:39:39.517

CamelBlues，我认为这不是我正在寻找的解决方案。首先，我已经在我的网站上使用了 OG 标签。其次，我认为爬虫不需要知道如何读取 JS，但 JS 呈现的页面取决于 URI……这就是 Backbone.js 路由器的工作原理。和，

“由于它不运行 JS，你可以设置一个脚本来在页面点击 index.html 时读取请求 uri，然后重定向到带有适当 OG 标签的页面。”

这就是 BB 路由器已经在做的事情，我的页面有适当的 OG 标签。:(

# php - Zend 创建一个具有间距的列名的模型

> ID：15138293
> 
> 赞同：0
> 
> 时间：2013-02-28T14:42:20.047
> 
> 标签：php, sql-server, zend-framework

我有一个 MS SQL Server 数据库，它的表和列名包含空格。我该如何去建模这个。在模型类中，如果有空格，我将如何放置列名？下面是我的数据库表

```
class Application_Model_DbTable_PurchInvHeader extends Zend_Db_Table_Abstract
{

    protected $_name = 'Spectrum Geo Limited$Purch_ Inv_ Header';

} 
```

该表称为`Spectrum Geo Limited$Purch_ Inv_ Header`。在此表中有许多带有空格的字段。我现在只需要获取所有记录。

在 SQL Server Management Studio 中，以下查询有效

```
SELECT * from [Navision].[dbo].[Spectrum Geo Limited$Purch_ Inv_ Header] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:49:07.417

您可以尝试使用 "`" 引用您的字段/列名称。它通常应该有助于将字段名称与特殊单词和单词组合区分开来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:59:25.653

也许你可以用更好的名字而不用空格来制作一些视图？

如果您不能直接在 MS Dynamics Navision 数据库中创建它们，则在同一服务器上创建一个新数据库。然后将该新数据库链接到 MS Dynamics Navision 数据库。然后（在您的新数据库中）创建基于 zend 的应用程序所需的所有视图、函数和存储过程等。

此外，在 MS Dynamics Navision 进行架构更改的情况下，视图将帮助您的应用程序。

# ios - 使用 CVOpenGLESTextureCache 将 GLKView 记录到 mov 文件

> ID：15138299
> 
> 赞同：0
> 
> 时间：2013-02-28T14:42:29.547
> 
> 标签：ios, opengl-es-2.0, glkit

我是opengl的新手，我正在尝试记录GLKView，到目前为止没有运气。这是我的代码：

```
 EAGLContext * _context = self.glkview.context;

#if COREVIDEO_USE_EAGLCONTEXT_CLASS_IN_API
    CVReturn err = CVOpenGLESTextureCacheCreate(kCFAllocatorDefault, NULL, _context, NULL, &_videoTextureCache);
#else
    CVReturn err = CVOpenGLESTextureCacheCreate(kCFAllocatorDefault, NULL, (__bridge void *)_context, NULL, &_videoTextureCache);
#endif
    if (err)
    {
        NSLog(@"Error at CVOpenGLESTextureCacheCreate %d", err);
        return;
    }

   CFDictionaryRef empty; // empty value for attr value.
CFMutableDictionaryRef attrs;
empty = CFDictionaryCreate(kCFAllocatorDefault, // our empty IOSurface properties dictionary
                           NULL,
                           NULL,
                           0,
                           &kCFTypeDictionaryKeyCallBacks,
                           &kCFTypeDictionaryValueCallBacks);
attrs = CFDictionaryCreateMutable(kCFAllocatorDefault,
                                  1,
                                  &kCFTypeDictionaryKeyCallBacks,
                                  &kCFTypeDictionaryValueCallBacks);

CFDictionarySetValue(attrs,
                     kCVPixelBufferIOSurfacePropertiesKey,
                     empty);

// for simplicity, lets just say the image is 640x480
CVPixelBufferCreate(kCFAllocatorDefault, 640, 480,
                    kCVPixelFormatType_32BGRA,
                    attrs,
                    &renderTarget);
// in real life check the error return value of course.

// first create a texture from our renderTarget
// textureCache will be what you previously made with CVOpenGLESTextureCacheCreate
CVOpenGLESTextureRef renderTexture;
CVOpenGLESTextureCacheCreateTextureFromImage (
                                              kCFAllocatorDefault,
                                              _videoTextureCache,
                                              renderTarget,
                                              NULL, // texture attributes
                                              GL_TEXTURE_2D,
                                              GL_RGBA, // opengl format
                                              640,
                                              480,
                                              GL_BGRA, // native iOS format
                                              GL_UNSIGNED_BYTE,
                                              0,
                                              &renderTexture);
// check err value

// set the texture up like any other texture
glBindTexture(CVOpenGLESTextureGetTarget(renderTexture),
              CVOpenGLESTextureGetName(renderTexture));
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

// bind the texture to the framebuffer you're going to render to 
// (boilerplate code to make a framebuffer not shown)

 glPixelStorei(GL_UNPACK_ALIGNMENT,4);

 glGenTextures(1, &_texureName);
 glBindTexture(GL_TEXTURE_2D, _texureName);
 glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
 glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
 glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE );
 glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE );
 glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, (GLsizei) 1024, (GLsizei) 768, 0, GL_RGBA, GL_UNSIGNED_BYTE, CVPixelBufferGetBaseAddress(renderTarget));

glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0,
                       GL_TEXTURE_2D, CVOpenGLESTextureGetName(renderTexture), 0); 
```

这是将它写入文件的方法。

```
- (void)writeVideoFrameAtTime:(CMTime)time {

    if (_videoTextureCache == NULL)
        return;

        BOOL success = [_assetWriterPixelBufferInput appendPixelBuffer:renderTarget withPresentationTime:time];
        //NSLog(@"writing");
        if (!success) {
            NSLog(@"Pixel Buffer not appended");
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T16:40:37.643

你可以试试这个，它是免费的，使用非常简单 [https://developers.everyplay.com](https://developers.everyplay.com)

# scheme - 从列表中选择 7 个。

> ID：15138300
> 
> 赞同：1
> 
> 时间：2013-02-28T14:42:31.473
> 
> 标签：scheme, racket

我正在尝试从列表中选择 7，这是我的代码：

```
(define (pick7 x)
  (cond ((null? x) x)
        ((= (car x) 7) pick7 (cdr x))
        (else (cons (car x) (pick7 (cdr x)))))) 
```

但是当我打电话时`(pick7 (1 3 (5 7) 9))`，它给了我一个错误。我想我看到了问题 -`(car x)`并不总是一个数字，所以我需要分解它。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:52:39.983

如果通过“挑选”您的意思是从列表中“删除”一个元素，那么对于任意嵌套列表的列表，您会这样做，请填写空白：

```
(define (pick7 x)
  (cond (<???> <???>)               ; if the list is null, return null
        ((not (pair? <???>))        ; if the first element is not a list
         (if <???>                  ;   if the first element is 7
             (pick7 <???>)          ;   advance recursion over rest of list
             (cons <???>            ;   else cons the first element and
                   (pick7 <???>)))) ;   advance recursion over rest of list
        (else (cons                 ; if the first element is a list, then cons
               (pick7 <???>)        ; the recursion over the first element
               (pick7 <???>)))))    ; and the recursion over the rest of list 
```

请注意，这是处理任意嵌套列表的标准模板，它适用于以下情况：

```
(pick7 '(1 3 (5 7 (8 7 (10 7 11))) 9 7))
=> '(1 3 (5 (8 (10 11))) 9) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:52:18.597

从列表中选择 7 个是什么意思？你的意思是去掉吗？如果是这样，您还需要检查第一个元素是否是列表。

```
(define (pick7 x)
  (cond ((null? x) x)
        ((<??>) (cons (pick7 (car x)) (pick7 (cdr x))))
        ((= (car x) 7) (pick7 (cdr x)) ; missing paren
        (else (cons (car x) (pick7 (cdr x)))))) 
```

# iis - URL 协议处理程序 - “此链接需要使用应用程序打开”

> ID：15138301
> 
> 赞同：1
> 
> 时间：2013-02-28T14:42:34.607
> 
> 标签：iis, registry, protocols

我已经为 URL 创建了一个自定义协议处理程序，以从浏览器中启动应用程序，这一切都按需要工作。

我确实遇到的问题是，在第一次启动时，需要向用户显示一个对话框，其中指出：

```
"this link needs to be opened with an application" 
```

有没有办法通过告诉操作系统该协议已经受信任并且应该继续启动应用程序来阻止这种情况？

据我了解，这是一个特定于浏览器的场景，因此我必须为每个安装的浏览器完成此步骤，因为我希望能够告诉整个系统该协议和相关应用程序是受信任的。

目前，协议处理程序是简单的 .exe，我手动将其复制到 Program Files 中，不确定在这种情况下这是否会影响信任级别。

# rtc - 如何使用 RTC jazz 将我的盒子上存在的代码获取到源代码控制中

> ID：15138304
> 
> 赞同：1
> 
> 时间：2013-02-28T14:42:44.037
> 
> 标签：rtc, jazz

基本上我不知何故在某个地方不同步。我们使用带有 RTC 3.0 的 VS 2010。在获得批准并通过官僚繁文缛节之前，我们无法升级到 RTC 4.0。我在 VS2012 中编辑了我的项目，因为我认为我会使用 RTC 客户端将我的更改交付给流；然而，这并没有奏效。我回到了 VS2010，我们已经内置了 RTC 功能。然而，这也是不同步的。当我对我的产品进行更改时，待定更改区域不再显示我有传出更改。

如何获取当前在我的盒子上的代码并将其重新放入 RTC 中的流中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:23:25.650

如果项目显示为不同步，您需要确保重新加载项目。

请参阅“[如何处理项目不同步](https://jazz.net/forum/questions/67602/how-to-handle-project-out-of-sync)”。

> 正确的答案是重新加载，使用“**重新加载项目不同步**”操作。根据我的经验，这永远不会覆盖您的任何本地更改，并且绝对不会更改当前加载的任何文件上的日期戳，并且与存储库中的内容同步。

（不过，请保存您的本地工作以防万一）

# android - 以编程方式设置 android:showAsAction="ifRoom|withText"

> ID：15138305
> 
> 赞同：22
> 
> 时间：2013-02-28T14:42:48.807
> 
> 标签：android, android-actionbar, actionbarsherlock

[是否可以按照此处](https://stackoverflow.com/questions/7189465/how-to-add-text-to-icons-in-actionbar) 的建议以编程方式设置标志`android:showAsAction="ifRoom|withText"`？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-28T14:57:00.053

对于每个`MenuItem`，请执行以下操作：

```
myMenuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-28T14:58:07.640

如果您想在运行时设置这些属性，那么您需要在 而`MenuItem`不是`ActionBar`.

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main_menu, menu);
    MenuItem item = menu.findItem(R.id.your_menu_item);
    item.setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T14:47:11.200

你有没有试过这个：

```
getSupportActionBar().setDisplayOptions(MenuItem.SHOW_AS_ACTION_IF_ROOM);
getSupportActionBar().setDisplayOptions(MenuItem.SHOW_AS_ACTION_WITH_TEXT); 
```

# codeigniter - 将 Code Igniter 应用程序移动到新服务器

> ID：15138310
> 
> 赞同：1
> 
> 时间：2013-02-28T14:43:07.883
> 
> 标签：codeigniter

我正在尝试在使用 Code Igniter 的网络应用程序上做一些工作。

他们给我邮寄了一个包含所有内容的 zip 文件，包括他们的应用程序文件夹。我对 Code Igniter 有足够的了解，知道这很重要。

我已经在我的开发笔记本电脑上安装了 Code Igniter。

如何验证此初始 Code Igniter 设置是否正确配置？我将主机名定义为 127.0.0.1 但是当我启动 Web 服务器并打开 127.0.0.1 时，我得到一个完全空白的屏幕。我想我会看到正在运行的 index.html 文件之一的内容。这比“找不到页面”屏幕要好 - 但它暗示配置错误。

另外，如何获取内容（从通过电子邮件发送给我的那个 zip 文件，包含应用程序文件夹的那个）显示在我的本地 Code Igniter 安装中？是不是像把zip文件应用文件夹的内容复制到我安装Code Igniter时创建的应用文件夹一样简单？与 zip 文件的应用程序文件夹处于同一级别的各种附加文件夹。那些也需要复制吗？有没有办法将 zip 文件解压缩到我的主目录中的某个位置并告诉 Code Igniter 从那里获取文件？

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:13:47.800

邮编是否包含：

*   index.php 文件
*   应用程序文件夹
*   系统文件夹

如果是这样，您应该能够将其提取到您的 htdocs 或子文件夹（如果您愿意）...

否则下载一个新的[CodeIgniter](http://ellislab.com/codeigniter)安装，替换应用程序文件夹。但是，您可能希望确定沿此路线创建应用程序的 CI 版本，以便您可以从该版本开始（如果需要升级最新版本）。

zip 是否还包含`.htaccess`文件？这可能包含一些关于 URL 结构的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:18:50.520

您必须编辑两个文件才能使配置在代码端正常工作：

1.  在 application/config/config.php 中，将您的“base_url”更改为您在本地主机上使用的任何 URL。在你的情况下，这听起来像`http://127.0.0.1/*foldername*`

2.  在 .htaccess 文件中（可能位于顶级目录中），如果正在使用 mod_rewrite，您将不得不更改您的基础。

That should get you set up on the code side of things. As for the server, make sure you have your virtualhost pointing towards the right directory if you are using Apache.

# php - XDebug PHP Eclipse - 错误没有找到适当的文件或没有选择文件

> ID：15138311
> 
> 赞同：8
> 
> 时间：2013-02-28T14:43:09.037
> 
> 标签：php, macos, web-applications, xdebug, eclipse-pdt

我正在尝试远程调试一个 php web 应用程序，但是每当我尝试启动调试会话时，Eclipse 都会给我带来一堆弹出窗口：

**调试器错误：“没有找到合适的文件或没有选择文件。调试终止”**。

![在此处输入图像描述](../Images/52f4288255d097c4849ca51115bf132e.png)

这是我当前的 Xdebug 2.2.1 配置：

```
[xdebug]
xdebug.remote_enable=1
xdebug.remote_autostart=0
xdebug.remote_host="localhost"
xdebug.remote_port=9000
xdebug.remote_handler="dbgp" 
```

这是我的 Eclipse 4.2.1 调试配置：

![在此处输入图像描述](../Images/3006e5ca54ada2bf5d317c966ae69866.png)

Xdebug 已正确安装，我在 phpinfo() 输出中看到它已启用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T16:57:06.423

我尝试调试 Eclipse 以了解我的 Mac OS X 中发生了什么。
首先找到当前的 Eclipse 运行进程：

```
$ ps -ef | grep eclipse
   501 15160   373   0  4:21PM ??         2:57.19 /Users/myuser/apps/eclipse/Eclipse.app/Contents/MacOS/eclipse -psn_0_651423 
```

然后跟踪 Eclipse 系统调用：

```
$ sudo dtruss -fp 15160

 [... omissis ...]
 accept(0xA0, 0x1224C37E8, 0x1224C37E4)      = 103 0
 setsockopt(0x67, 0xFFFF, 0x1002)        = 0 0
 setsockopt(0x67, 0xFFFF, 0x1001)        = 0 0
 read(0x67, "4\0", 0x1)      = 1 0
 read(0x67, "7\0", 0x1)      = 1 0
 read(0x67, "7\0", 0x1)      = 1 0
 read(0x67, "\0", 0x1)       = 1 0
 read(0x67, "<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n<init xmlns=\"urn:debugger_protocol_v1\" xmlns:xdebug=\"http://xdebug.org/dbgp/xdebug\" fileuri=\"file:///opt/local/var/db/php5/pear/pear-ini.php\" language=\"PHP\" protocol_version=\"1.0\" appid=\"14961\" idekey=\"ECLIPSE_DB", 0x1DD)         = 477 0
 read(0x67, "\0", 0x1)       = 1 0
 [... omissis ...] 
```

在这里，我捕获了从 xdebug 发送的第一行。
这是 eclipse 正在读取一段 XML 的行。我想这是 DBGp 部分。

```
 <?xml version="1.0" 
       encoding="iso-8859-1"?>
 <init xmlns="urn:debugger_protocol_v1" 
       xmlns:xdebug="http://xdebug.org/dbgp/xdebug"
       fileuri="file:///opt/local/var/db/php5/pear/pear-ini.php" 
       language="PHP" 
       protocol_version="1.0" 
       appid="14961" 
       idekey="ECLIPSE_DB 
```

看着`fileuri`我发现 Xdebug 正在尝试使用`/opt/local/var/db/php5/pear/pear-ini.php`. 该文件`pear-ini.php`在我的 Eclipse 项目中不存在。

所以我在我的 Eclipse 工作区中创建了一个新项目，在这里我复制了文件`/opt/local/var/db/php5/pear/pear-ini.php`

它起作用了，Eclipse PDT 现在找到了它正在寻找的文件，并且调试器终于正确启动了。它甚至问我是否想切换到调试视角。

**结论**
如果你遇到这个奇怪的错误：“*没有找到合适的文件或没有选择文件。* ”，那么这就是写的内容。好的，我的 Eclipse 无法找到该文件，但这也意味着它正在尝试查找其工作区之外的文件。可能是由于某种奇怪的原因从 PHP 引擎加载的文件。在我的情况下`pear-ini.php`由自动添加`pear.ini`

```
$ cat pear.ini 
 ; Do not edit this file; it is automatically generated by MacPorts.
 ; Any changes you make will be lost if you upgrade or uninstall php5-pear.
 ; To configure PHP, edit /opt/local/etc/php5/php.ini.
 auto_prepend_file = '/opt/local/var/db/php5/pear/pear-ini.php' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-04T19:34:03.947

我遇到了同样的问题，虽然 freedev 的回答为我指明了正确的方向，但它实际上并没有解决它。

使用 dtruss 没有帮助：我在`<init>`任何地方都没有看到那个 XML 元素。`xdebug.remote_log=/tmp/xdebug.log`但是一旦我设置，我就能够找到它`php.ini`，然后在`/tmp/xdebug.log`我尝试启动远程调试会话时跟踪文件。`/opt/local/var/db/php5/pear/pear-ini.php`再次被提及。但是我的文件系统中*有*那个文件，所以我不知道为什么我仍然收到这个关于文件丢失的模糊错误消息。

然而，既然我*知道*Pear 与问题有关，我尝试简单地卸载 Pear ( `sudo port uninstall php53-pear`)，因为我实际上不再使用它了。你瞧，这解决了它！我不再收到“没有适当的文件”错误消息，我可以正常调试。

卸载 php53-pear 后，`fileuri`该 XML 数据中的设置现在是`index.php`我一直在尝试调试的 Drupal 站点的文件。因此，我认为您应该期望 Web 请求的入口点文件出现在该 XML`<init>`元素中。不过，我希望我知道为什么安装 Pear 会更改该`fileuri`属性。能够将 Pear 配置为停止与 Xdebug 混淆会比卸载 Pear 好得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T14:03:15.153

我遇到了同样的问题，原因不是`pear.ini`或`pear-ini.php`如上所述。

原因很简单。我已经在我的 Eclipse 环境中安装了 PDT 和 Aptana PHP 插件。只需**将项目类型和调试配置类型都切换为 PDT**，一切正常。

感谢您发布一个不错的主题。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-05T12:06:20.647

我正在使用 Linux 并使用 strace 附加 Eclipse 进程（当然是真正的 Java 子进程）我无法捕捉到此类错误。

对于那些遇到同样问题但未能成功解决的人，如果您不久前完成了 Eclipse 或 PDT 更新，请尝试删除您的项目并重新创建它。它解决了我的 xdebug 调试和 Eclipse 项目清理没有的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-22T18:08:58.510

如果您的调试器过去可以工作，但突然开始抛出该消息，那么您可能只是为一个源文件添加了书签，而 Eclipse 并不认为它是项目的一部分，或者根本找不到它。

例如，当我调试为 Wordpress 编写的插件时，我为一些外部 Wordpress 文件添加了书签，似乎 Eclipse/Xdebug 无法访问/定位。一旦我删除该书签，一切都会恢复正常。

如果是这种情况，那么只需删除所有书签。

# javascript - Sharepoint 2010 沙盒解决方案文件托管 - 在下载中显示结果

> ID：15138314
> 
> 赞同：2
> 
> 时间：2013-02-28T14:43:13.567
> 
> 标签：javascript, jquery, sharepoint-2010, custom-action

我将一些文件放在一个模块中，用于 Sharepoint 2010 沙盒解决方案。有一个我要显示的 html 文件。为此，我在任务栏上添加了一个自定义操作按钮。

我正在为此执行一些javascript：

```
var child = window.open();
child.location = '{SiteUrl}/TaskBoardContent/LanesDashboard.html?SiteUrl={SiteUrl}&amp;ListUrl={ListUrlDir}&amp;isDlg=true';
child.focus(); 
```

不幸的是，会打开一个新选项卡，但 IE9 会从下载给定文件开始。我预计 SP 发送的服务器端标头存在问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:42:46.957

您应该能够在 webapplication 范围内配置它。我认为没有任何方法可以仅针对单个文件/站点覆盖此行为。或者，您可以尝试在模块中添加没有任何代码的简单 aspx 页面。

看看这个链接：

[http://www.sharepoint-insight.com/2012/03/25/solution-for-viewing-html-files-in-browser-from-sharepoint-document-library/](http://www.sharepoint-insight.com/2012/03/25/solution-for-viewing-html-files-in-browser-from-sharepoint-document-library/)

# google-apps-script - 尝试解析日期时遇到服务器错误

> ID：15138318
> 
> 赞同：2
> 
> 时间：2013-02-28T14:43:20.047
> 
> 标签：google-apps-script, google-cloud-sql

我已经编写了将数据从 CSV 导入 Google 电子表格的逻辑。作为下一步，我尝试使用 JDBC 服务将复制的数据推送到 Cloud SQL 实例。我有一个类型的列`DateTime`（在后端）。在将数据从 spreadhseet 推送到 Cloud SQL 的逻辑中，我正在使用`Jdbc.parseDate()`方法将电子表格中的值转换为 Mysql /Cloud SQL。

前任：`stmt.setDate(counter, Jdbc.parseDate(colValue));`

*在哪里：*

1.  计数器是索引和
2.  colValue 是 Google 电子表格中列下的值

在尝试这样做时，我收到错误：

> 很抱歉，发生服务器错误。请稍等，然后重试。

否则我没有收到任何错误，即使我使用

```
stmt.setDate(counter, Jdbc.newDate(colValue)); 
```

请告知如何解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:32:31.923

看起来这可能是类型混淆的问题。`Jdbc.newDate()`需要一个整数作为参数。您可能正在提供一个日期对象（取决于数据在电子表格中的存储方式）。

假设您将对象作为日期存储在电子表格中，您可以尝试使用`Jdbc.newDate(colValue.getTime())`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:31:27.900

最后对我有用的代码是：

// 遍历电子表格记录，

```
var tempDate = Utilities.formatDate(colValue, "IST",  "yyyy-MM-dd HH:mm:ss");
stmt.setObject(counter, tempDate); 
```

**在哪里：**

*   colValue：是从电子表格中读取的列的值

*   计数器：是索引，我必须在其中插入值

使用上面的代码，我能够从电子表格中读取日期并将其插入到云 SQL 数据库中表的列（日期时间类型）中。

# java - 在单例模式中使用 CDI

> ID：15138321
> 
> 赞同：14
> 
> 时间：2013-02-28T14:43:31.923
> 
> 标签：java, dependency-injection, singleton, cdi

我正在尝试在一个按照单例方法实现的类中注入一个记录器对象。

代码几乎是这样的：

`Logger`班级：

```
public class LoggerFactory {
    @Produces 
    public Logger getLogger(InjectionPoint caller){
        return Logger.getLogger(caller.getMember().getDeclaringClass().getName());
    }
} 
```

然后我创建一个需要记录器并实现单例模式的类：

```
public class MySingleton{
    @Inject
    private Logger logger;

    private MySingleton instance;

    /*
     * Private constructor for singleton implementation
     */
    private MySingleton(){
        logger.info("Creating one and only one instance here!");
    }

    public MySingleton getInstance(){

        if(instance == null) {
            instance = new MySingleton();
        }

        return instance;
    } 
```

}

如果我运行代码（在 Glassfish 3.1.2.2 上），我一尝试使用记录器就会得到 NPE。我做错了什么（`beans.xml`文件到位）？我也尝试过使用对象`@Inject`的 setter 方法，`Logger`但没有运气。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-28T14:55:31.137

注入发生在构造之后。所以你不能在构造函数中使用它。

一种方法是添加一个注解 @PostConstruct 的方法，该方法可以在注入后调用。

```
@PostConstruct
public void init() {
    logger.info("Creating one and only one instance here!");
} 
```

在旁注中，我认为您以错误的方式解决了问题。CDI 有很好的单例支持

创建一个带有 @Singleton 注释的类

```
@Singleton
public class MySingleton {

    @Inject
    Logger logger;

    @PostConstruct
    public void init() {
        logger.info("Creating one and only one instance here!");
    }

} 
```

以上假设您使用 CDI for java ee (JSR-299)。

如果您使用 JSR 330 依赖注入（guice 等）[链接](http://matthiaswessendorf.wordpress.com/2010/01/19/dependency-injection-the-jsr-330-way/)

您可以使用构造函数注入：

```
@Singleton
public class MySingleton {

    private final Logger logger;

    @Inject
    public MySingleton (Logger logger) {
        this.logger = logger;
        logger.info("Creating one and only one instance here!");
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T14:56:20.887

这是行不通的，因为如前所述，注入将在调用构造函数之后执行。

`@PostConstruct`在注入完成之后并且在对象本身将被提供给其他地方之前调用带有注释的方法。

但是，仅当您的类的实例由注入本身提供时，注入才有效。这是由于注入依赖于代理。

因此，您需要在任何需要的地方注入您的 MySingleton。为确保它是单例，请对其进行注释，`@Singleton`容器将为您解决问题。

Addiotnally beware, that singleton in terms of CDI spec does not mean only one *instantiation*, but rather only one *initialiation* of `@PostConstruct`.

# c++ - 我在哪里实现我的 MFC DLL 函数？

> ID：15138322
> 
> 赞同：1
> 
> 时间：2013-02-28T14:43:32.097
> 
> 标签：c++, windows, class, dll, mfc

我整个早上都在搜索谷歌，但我找不到我要找的东西。我正在为 MFC 修改的 Visual Studio 中创建一个常规 DLL。也就是说在项目向导中，我选择了

```
Win32 Project -> DLL -> MFC 
```

我**不**只是从向导的主列表中单击 MFC DLL，这是所有在线教程所描述的。

我的问题很简单。在 .cpp 文件中，**我只需要知道我应该在函数*内部*还是*外部*`_tmain`实现我的方法（在 .h 文件中声明） 。** 里面有一条评论说

```
//TODO: code your applications behavior here 
```

但我不确定这是否是我的实现所在。

作为参考，这里是 .cpp 文件：

```
// testmfcdllblah.cpp : Defines the exported functions for the DLL application.
//

#include "stdafx.h"
#include "testmfcdllblah.h"

#ifdef _DEBUG
#define new DEBUG_NEW
#endif

// The one and only application object

CWinApp theApp;

using namespace std;

int _tmain(int argc, TCHAR* argv[], TCHAR* envp[])
{
    int nRetCode = 0;

    HMODULE hModule = ::GetModuleHandle(NULL);

    if (hModule != NULL)
    {
        // initialize MFC and print and error on failure
        if (!AfxWinInit(hModule, NULL, ::GetCommandLine(), 0))
        {
            // TODO: change error code to suit your needs
            _tprintf(_T("Fatal Error: MFC initialization failed\n"));
            nRetCode = 1;
        }
        else
        {
            // TODO: code your application's behavior here.
        }
    }
    else
    {
        // TODO: change error code to suit your needs
        _tprintf(_T("Fatal Error: GetModuleHandle failed\n"));
        nRetCode = 1;
    }

    return nRetCode;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:52:11.667

由于您无法在其他函数中实现函数/方法，因此您的方法实现需要在`_tmain`函数之外进行。

您引用的注释块可以替换为您的库的初始化实现。

因此，如果您要声明这样的函数，`SayHello`则可能如下所示：

`testmfcdllblah.h`：

```
// Declaration
void SayHello(void); 
```

`testmfcdllblah.cpp`：

```
void _tmain(int argc, TCHAR* argv[], TCHAR* envp[])
{
    // .. all the other stuff ..

    // TODO: code your application's behavior here.
    SayHello();

    // .. the rest of the other stuff ..
}

void SayHello()
{
    AfxMessageBox("Hello!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:52:37.743

在 C++ 中，您不能定义本地函数。你永远不会在 _tmain 中实现任何功能。

当您使用向导创建 DLL 时，您应该添加一个头文件来定义您的 DLL 接口。你应该添加一个 .CPP 源文件来实现函数。

您可以在找到的那个地方**调用函数**

```
// TODO: change error code to suit your needs 
```

顺便说一句：我不知道为什么动态链接库的向导会创建一个主函数。

# c - perfstat_process 未在 AIX 6.1 上的 libperfstat.h 中声明

> ID：15138323
> 
> 赞同：2
> 
> 时间：2013-02-28T14:43:34.763
> 
> 标签：c, performance, monitoring, aix

我正在尝试编写一个程序来计算 AIX 6.1 上的 CPU 进程利用率，这需要考虑虚拟化处理器环境。更多信息来自以下链接：

[http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.basetechref/doc/basetrf1/perfstat_cpu.htm](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.basetechref/doc/basetrf1/perfstat_cpu.htm)

我的程序使用了一个名为“perfstat_process_t”的数据结构，它记录在 AIX 6.1 参考页中：

[http://pic.dhe.ibm.com/infocenter/aix/v6r1/index.jsp?topic=%2Fcom.ibm.aix.files%2Fdoc%2Faixfiles%2Flibperfstat.h.htm](http://pic.dhe.ibm.com/infocenter/aix/v6r1/index.jsp?topic=%2Fcom.ibm.aix.files%2Fdoc%2Faixfiles%2Flibperfstat.h.htm)

但是在我本地系统的 /usr/include/libperfstat.h 上，它没有那个数据结构声明和其他专门与进程信息收集相关的功能。在 libperfstat 头文件中，我只能找到用于计算整体 CPU 使用率的函数/数据结构，例如 perfstat_cpu()，而找不到进程级别的，例如 perfstat_process()。

我怀疑这可能是由于不同 AIX 版本之间的可用性，但从网上研究，与 perfstat_process_t 相关的功能应该从 AIX 5.3 开始可用。

只是想知道是否有人以前见过类似的差异？我的 AIX 6.1 版本如下：

bash-3.2$ oslevel -s 6100-02-08-1015

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:21:53.540

您需要一个具有 apar IZ94926 的系统：

[http://www-01.ibm.com/support/docview.wss?uid=isg1IZ94926](http://www-01.ibm.com/support/docview.wss?uid=isg1IZ94926)

或它的姐妹之一。我只能在 6.1 和 7.1 中找到它。我在 5.3 的任何地方都找不到它。

高温高压

# iphone - 如何填充 TableViewCell LeftDetail？

> ID：15138325
> 
> 赞同：0
> 
> 时间：2013-02-28T14:43:36.027
> 
> 标签：iphone, ios, xcode, tableview

我已经从我的 CoreData 中获取了一个对象并将其存储在一个数组中，我使用的原型单元格是 leftDetail，我想在我的 TableView 中填充单元格，其中属性内容作为我的标题，属性键作为左侧细节. 就像联系人应用程序一样。

怎么做到呢？

这就是我设置单元格内容的方式：

```
 if (matchingData.count <= 0)
{
    cell.textLabel.text = @"no item found";
}
else {
    NSString *displayData;
    for (NSManagedObject *obj in matchingData) {
        displayData = [obj valueForKey:@"Name"];
        cell.detailTextLabel.text = displayData;
        cell.textLabel.text = @"Name";

      }
   } 
```

但这只会给我一个和一个左侧细节的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:45:58.000

在`tableView:cellForRowAtIndexPath:`你只需要设置：

```
cell.detailTextLabel.text = yourText; 
```

# api - 搜索场地时出现神秘错误

> ID：15138326
> 
> 赞同：0
> 
> 时间：2013-02-28T14:43:37.320
> 
> 标签：api, eventbrite

当我搜索特定场地时 (id: 1515239)

[https://www.eventbrite.com/json/venue_get?app_key=EHHWMU473LTVEO4JFY&id=1515239](https://www.eventbrite.com/json/venue_get?app_key=EHHWMU473LTVEO4JFY&id=1515239)

我收到以下错误/响应，不知道这意味着什么：

```
{
  "error": {
    "error_type": "Not Found",
    "error_message": "Invalid email and/or password."
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:56:06.543

我很确定场地信息被视为私人数据。
您可能需要在请求中包含一些额外的用户凭据。

请参阅[http://developer.eventbrite.com/doc/authentication/](http://developer.eventbrite.com/doc/authentication/)

# javascript - 在 HTML5 验证之前捕获提交

> ID：15138329
> 
> 赞同：21
> 
> 时间：2013-02-28T14:43:54.907
> 
> 标签：javascript, jquery, html, validation

有没有办法`submit`在 HTML5 验证步骤之前捕获表单的操作？

这是[我尝试过](http://jsfiddle.net/Claudius/GFsEE/2/)的：

**HTML**

```
<form method='post' >
    <fieldset>
        <input type='email' name='foo' required />
        <input type='submit' />
    </fieldset>
</form> 
```

**jQuery**

```
$('form').submit(function() {
    $('fieldset').addStyle('error');
    return false;
}) 
```

但是`submit`只有在 HTML5 验证通过后才会触发。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T14:48:14.667

不，在所有浏览器中，HTML5 验证发生在任何提交事件之前，因此除了更改事件类型（例如单击按钮）之外，这是不可能的：

```
$('input[type="submit"]').on('click', function() {
    $('fieldset').addClass('error');
}); 
```

[**小提琴**](http://jsfiddle.net/GFsEE/4/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T14:49:32.717

在页面首次加载时使用 jquery 禁用表单验证，这样您就可以防止在`onsubmit`处理程序运行之前发生任何验证：

```
$(document).ready(function(){
   $('form').attr('novalidate','novalidate');
}) 
```

然后在`onsubmit`函数结束时，通过 javascript 对每个字段手动运行 HTML5 验证（使用`checkValidity()`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:55:04.467

将按钮从

```
<input type='submit' /> 
```

到常规按钮

```
<input type='button' id="submit" /> 
```

之后，只需捕获点击事件并自己提交

```
$('#submit').on('click', function() {
    $('fieldset').addStyle('error');

    // if everything is ok
    $('form').submit(); 
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-26T22:34:46.030

您可以拦截该`"invalid"`元素的事件，应用该类，然后`return false`取消它

[https://developer.mozilla.org/en-US/docs/Web/Events/invalid](https://developer.mozilla.org/en-US/docs/Web/Events/invalid)

我还添加了一个焦点和 keydown 事件来删除该类。

```
$('form').submit(function() {
    $('fieldset').addStyle('error');
    return false;
})
$('input').on("invalid", function(e){
   //Code: Action (like ajax...)
   $(e.target).addClass("error");
   return false;
});
$('input').on("focus", function(e){
   //Code: Action (like ajax...)
   $(e.target).removeClass("error");
});
$('input').on("keydown", function(e){
   //Code: Action (like ajax...)
   $(e.target).removeClass("error");
});
```

```
.error {
    border: 2px solid red;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<form method='post' >
    <fieldset>
        <input type='email' name='foo' required />
        <input type='submit' />
    </fieldset>
</form>
```

请注意，它可能具有与`HTMLFormElement.reportValidity()`

[https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/reportValidity](https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/reportValidity)

# iphone - 无法通过 Xcode Organizer/iTunes 安装 iPhone App 存档

> ID：15138334
> 
> 赞同：3
> 
> 时间：2013-02-28T14:44:07.147
> 
> 标签：iphone, xcode, code-signing, provisioning, verification

我花了很长时间试图解决以下问题：我们过去常常将 xcode 构建的产品（OurApp.app）提供给我们的客户进行测试（他们通常然后通过 iTunes 将它们拖到他们的测试设备上）。当然，所有这些设备都可以进行测试，即添加到我们构建应用程序的配置文件中。这已经有一段时间了。

现在，一位客户报告了安装问题（iOS 6.0），当我尝试将构建的存档拖到 Xcode Organizer 中设备的应用程序文件夹时，我可以在我的 iPhone 4 (6.1.2) 上重现它们。安装时设备控制台如下所示：

```
installd[54] <Error>: 0x2fef2000 handle_install: Install of "/var/mobile/Media/PublicStaging/OurApp.app" requested by mobile_installation_proxy
installd[54] <Error>: 0x2fef2000 MobileInstallationInstall_Server: Installing app ch.xxx.ourapp
installd[54] <Error>:  0x2fef2000  SecTrustEvaluate  [leaf CriticalExtensions IssuerCommonName]
installd[54] <Error>: 0x2fef2000 verify_signer_identity: MISValidateSignatureAndCopyInfo failed for /var/tmp/install_staging.Zq80Gw/OurApp.app/OurApp: 0xe8008015
installd[54] <Error>: 0x2fef2000 do_preflight_verification: Could not verify executable at /var/tmp/install_staging.Zq80Gw/OurApp.app
mobile_installation_proxy[4310] <Error>: 0x3d232b88 MobileInstallationInstall: failed with -1
mobile_installation_proxy[4310] <Error>: handle_install: Installation failed
installd[54] <Error>: 0x2fef2000 install_application: Could not preflight application install
installd[54] <Error>: 0x2fef2000 handle_install: API failed 
```

我尝试了以下方法：

*   通过 验证存档`codesign verify -vvvv`，一切正常
*   当我通过 Xcode > Run（相同的配置文件）部署应用程序时，可以在设备上安装和运行应用程序
*   在文本编辑器中查看存档的 embedded.mobileprovision，我看到我的设备的 UDID 确实包含在内
*   虽然最终失败，但通过 Organizer 安装成功将配置文件导入库中，并且它停留在那里并带有绿色复选标记，表示相应的证书也可用（我已将其删除并重试安装，只是观察到相同行为多次）
*   与某些人在论坛中所说的相反，确实可以通过 Xcode Organizer 安装使用开发配置文件构建的产品。您不需要为此的分发配置文件。我还有其他几个使用开发配置文件构建的应用程序，所描述的安装过程适用于这些应用程序。

任何想法这里可能有什么问题？我将不胜感激任何建议，因为我被困在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:57:26.587

如果我在将其压缩到 IPA 之前使用 Finder 浏览构建，我会看到类似的问题。我认为它正在创建`.DS_Store`明显未签名的文件。

你是如何创建 IPA 文件的？解压失败的 IPA 时可以验证代码签名吗？

另外，您知道 OTA 分发，对吗？使用 TestFlight 之类的东西比手动操作要简单得多。

# sql - 递归 sql 赋值，直到数量用完

> ID：15138343
> 
> 赞同：3
> 
> 时间：2013-02-28T14:44:43.623
> 
> 标签：sql, db2

我正在尝试使用 CTE 样式执行许可证 ID 号的递归连接分配，直到数量“用完”，联合所有递归语句，但我不能完全让这些部件一起工作。

我一直遇到的问题是许多许可证可以覆盖 1 个实例，所以当我加入许可证表时，我会得到很多行。任何建议都将受到欢迎。

```
TABLE: INSTALLEDSW      
INSTALLEDSW_ID  PRODUCT_ID  PRODUCT_NAME
200             1000        MY SOFTWARE
201             1000        MY SOFTWARE
202             1000        MY SOFTWARE
203             1000        MY SOFTWARE
204             1000        MY SOFTWARE
205             1000        MY SOFTWARE
206             1000        MY SOFTWARE
207             1000        MY SOFTWARE
208             1000        MY SOFTWARE

TABLE:  LICENSE          
LICENSE_ID  PRODUCT_ID  LICENSE_NAME    QUANTITY
100         1000        MY LICENSE      1 
101         1000        MY LICENSE      5 
102         1000        MY LICENSE      1

Desired Result Set  
INSTALLEDSW_ID      LICENSE_ID
200                 100
201                 101
202                 101
203                 101
204                 101
205                 101
206                 102
207                 (null)
208                 (null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:57:02.293

为此，您不需要递归 CTE。相反，您需要许可证的累积总和才能获得数量范围。最终结果只是在那之后的一个连接。

假设您使用的是支持此功能的 Postgres、SQL Server 2012 或 Oracle。在其他数据库中，您可以使用相关子查询而不是窗口函数进行必要的计算。

```
select l.*, SumQTy - Qty + 1 as StartQTY, QTY as EndQTY
from (select l.*,
             sum(quantity) over (partition by product_id order by license_id) as Sumqty
      from license l
     ) l 
```

因此，此许可证是 StaartQTY 和 EndQTY 之间的有效许可证。

接下来，您需要将这些应用到您的用户。为此，我们使用`row_number()`枚举安装的：

```
with l as (
     select l.*, SumQTy - Qty + 1 as StartQTY, QTY as EndQTY
     from (select l.*,
                  sum(quantity) over (partition by product_id order by license_id) as Sumqty
           from license l
          ) l
    )
select i.installedsw_id, l.licence_id
from (select i.*,
             row_number() over (partition by product_id order by installedsw_id) as num
      from installedsw i
     ) i left outer join
     l
     on i.installedsw_id = l.installedsw_id and
        i.num between l.startQty and l.endQty 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:54:58.173

尽可能避免递归，就此而言，避免累积和（它们都*非常*昂贵）。让自己成为一个整数表（你会经常使用的“实用刀”）：

```
CREATE TABLE integers (n smallint primary key clustered)
INSERT integers SELECT TOP 1000 row_number() over (order by o.id) from sysobjects o cross join sysobjects 
```

然后，当您：

```
 join (select * from LICENSE, integers where n <= quantity) LICENSE on... 
```

然后对每个表进行排名，加入排名，并在排名 <= #ofLicenses 时设置 License_ID。（我不熟悉 DB2，但您可能必须模拟临时表中的排名。）

```
SELECT ISW.INSTALLEDSW_ID, LICENSE_ID = case when LIC.rank <= [# of licenses] then LIC.LICENSE_ID else null end
FROM (     select *, rank = row_number over (order by INSTALLEDSW_ID) from INSTALLEDSW) ISW
    JOIN ( select *, rank = row_number over (order by LICENSE_ID)
           from (select * from LICENSE, integers where n <= quantity) t ) LIC on LIC.productid_id = ISW.productid AND LIC.rank = ISW.rank 
```

# javascript - JQuery“包含”混淆

> ID：15138347
> 
> 赞同：0
> 
> 时间：2013-02-28T14:44:51.930
> 
> 标签：javascript, html, css, jquery

我想使用这个 verical 滑块实现：[http](http://www.elmundio.net/projects/verticalSlider/) ://www.elmundio.net/projects/verticalSlider/它使用这个文件：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.css" />
        <link href="http://www.elmundio.net/projects/verticalSlider/verticalSlider.css" rel="stylesheet" type="text/css" />
        <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.js"></script>
        <script src="http://www.elmundio.net/projects/verticalSlider/verticalSlider.js"></script> 
```

但我还需要将此文件用于我的其他内容：

```
<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css"/>
        <script  src="jquery-1.9.1.js"> </script>
        <script  src="jquery-ui.min.js"></script> 
```

如何实现这些文件之间的兼容性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:45:38.793

您可以使用 JQuery 的[noConflict](http://api.jquery.com/jQuery.noConflict/)来实现您想要的兼容性。

# c++ - 如何将二进制文件读入无符号字符向量

> ID：15138353
> 
> 赞同：90
> 
> 时间：2013-02-28T14:45:04.503
> 
> 标签：c++, file-io, vector, binaryfiles

最近有人要求我编写一个函数，将二进制文件读入`std::vector<BYTE>`where `BYTE`is an `unsigned char`. 很快我就得到了这样的东西：

```
#include <fstream>
#include <vector>
typedef unsigned char BYTE;

std::vector<BYTE> readFile(const char* filename)
{
    // open the file:
    std::streampos fileSize;
    std::ifstream file(filename, std::ios::binary);

    // get its size:
    file.seekg(0, std::ios::end);
    fileSize = file.tellg();
    file.seekg(0, std::ios::beg);

    // read the data:
    std::vector<BYTE> fileData(fileSize);
    file.read((char*) &fileData[0], fileSize);
    return fileData;
} 
```

这似乎是不必要的复杂，`char*`而且我在调用时被迫使用的显式转换`file.read`并没有让我感觉更好。

* * *

另一种选择是使用[`std::istreambuf_iterator`](http://www.cplusplus.com/reference/iterator/istreambuf_iterator/)：

```
std::vector<BYTE> readFile(const char* filename)
{
    // open the file:
    std::ifstream file(filename, std::ios::binary);

    // read the data:
    return std::vector<BYTE>((std::istreambuf_iterator<char>(file)),
                              std::istreambuf_iterator<char>());
} 
```

这非常简单和简短，但`std::istreambuf_iterator<char>`即使在阅读`std::vector<unsigned char>`.

* * *

最后一个似乎非常简单的选项是使用[`std::basic_ifstream<BYTE>`](http://en.cppreference.com/w/cpp/io/basic_ifstream)，它明确地表达了*“我想要一个输入文件流并且我想用它来读取`BYTE`s”*：

```
std::vector<BYTE> readFile(const char* filename)
{
    // open the file:
    std::basic_ifstream<BYTE> file(filename, std::ios::binary);

    // read the data:
    return std::vector<BYTE>((std::istreambuf_iterator<BYTE>(file)),
                              std::istreambuf_iterator<BYTE>());
} 
```

但我不确定[`basic_ifstream`](http://en.cppreference.com/w/cpp/io/basic_ifstream)在这种情况下是否是一个合适的选择。

*将二进制文件读入的最佳方法是`vector`什么？*我还想知道*“幕后”发生了*什么以及我可能遇到的可能问题（除了流没有正确打开，这可以通过简单的[`is_open`](http://www.cplusplus.com/reference/fstream/ifstream/is_open/)检查来避免）。

有什么好的理由让人们更愿意在这里使用[`std::istreambuf_iterator`](http://www.cplusplus.com/reference/iterator/istreambuf_iterator/)吗？
（我能看到的唯一优点是简单）

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-02-15T20:06:39.160

在测试性能时，我会包括一个测试用例：

```
std::vector<BYTE> readFile(const char* filename)
{
    // open the file:
    std::ifstream file(filename, std::ios::binary);

    // Stop eating new lines in binary mode!!!
    file.unsetf(std::ios::skipws);

    // get its size:
    std::streampos fileSize;

    file.seekg(0, std::ios::end);
    fileSize = file.tellg();
    file.seekg(0, std::ios::beg);

    // reserve capacity
    std::vector<BYTE> vec;
    vec.reserve(fileSize);

    // read the data:
    vec.insert(vec.begin(),
               std::istream_iterator<BYTE>(file),
               std::istream_iterator<BYTE>());

    return vec;
} 
```

我的想法是方法 1 的构造函数触摸 中的元素`vector`，然后`read`再次触摸每个元素。

方法 2 和方法 3 看起来最有希望，但可能会遭受一个或多个`resize`'s。因此`reserve`在阅读或插入之前的原因。

我还会测试`std::copy`：

```
...
std::vector<byte> vec;
vec.reserve(fileSize);

std::copy(std::istream_iterator<BYTE>(file),
          std::istream_iterator<BYTE>(),
          std::back_inserter(vec)); 
```

最后，我认为最好的解决方案将避免`operator >>`（`istream_iterator`以及`operator >>`尝试解释二进制数据的所有开销和好处）。但我不知道使用什么可以让您直接将数据复制到向量中。

最后，我对二进制数据的测试显示`ios::binary`没有被兑现。`noskipws`因此from的原因`<iomanip>`。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-04-16T08:11:03.583

```
std::ifstream stream("mona-lisa.raw", std::ios::in | std::ios::binary);
std::vector<uint8_t> contents((std::istreambuf_iterator<char>(stream)), std::istreambuf_iterator<char>());

for(auto i: contents) {
    int value = i;
    std::cout << "data: " << value << std::endl;
}

std::cout << "file size: " << contents.size() << std::endl; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-28T15:05:33.777

由于您要将整个文件加载到内存中，因此最佳版本是将文件映射到内存中。这是因为内核无论如何都会将文件加载到内核页面缓存中，并且通过映射文件，您只需将缓存中的这些页面公开到您的进程中。也称为零拷贝。

当您使用`std::vector<>`它时，它会将数据从内核页面缓存复制到`std::vector<>`其中，当您只想读取文件时，这是不必要的。

此外，当将两个输入迭代器传递给`std::vector<>`它时，它会在读取时增加其缓冲区，因为它不知道文件大小。当`std::vector<>`首先调整到文件大小时，它不必要地将其内容归零，因为无论如何它都会被文件数据覆盖。这两种方法在空间和时间方面都是次优的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-28T15:06:55.970

我会认为第一种方法，使用大小和使用`stream::read()`将是最有效的。转换为的“成本”`char *`很可能为零 - 这种类型的转换只是告诉编译器“嘿，我知道你认为这是一种不同的类型，但我真的想要这种类型......”，并且不添加任何额外的指令 - 如果您想确认这一点，请尝试将文件读入 char 数组，并比较实际的汇编代码。除了一些额外的工作来确定向量内缓冲区的地址之外，应该没有任何区别。

与往常一样，确定在您的情况下什么是最有效的唯一方法是测量它。“在网上问”不是证据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-05T10:52:40.897

下面的类扩展了带有二进制文件加载和保存的向量。我已经多次返回这个问题，所以这是我下一次返回的代码 - 以及接下来将寻找二进制文件保存方法的所有其他人。:)

```
#include <cinttypes>
#include <fstream>
#include <vector>

class FileVector : public std::vector<uint8_t>
{
    public:

        using std::vector<uint8_t>::vector;

        void loadFromFile(const char *filename)
        {
            std::ifstream file(filename, std::ios::in | std::ios::binary);
            insert(begin(),
                std::istream_iterator<uint8_t>(file),
                std::istream_iterator<uint8_t>());
        }

        void saveTofile(const char *filename) const
        {
            std::ofstream file(filename, std::ios::out | std::ios::binary);
            file.write((const char *) data(), size());
            file.close();
        }
}; 
```

**注意：**对于负载优化，请考虑确定文件大小并预先分配所需空间，如此处其他评论中所述。

# android - MapView 在 Google Maps Android API v2 中显示为空

> ID：15138355
> 
> 赞同：2
> 
> 时间：2013-02-28T14:45:11.657
> 
> 标签：android, api, map, android-mapview

我在 Google Maps Android API v2 中使用了 MapFragment。它工作正常。

但是当我使用 MapView 时。它显示空白。我不知道会发生什么。

我的活动

```
package com.example.MapView;

import android.app.Activity;
import android.os.Bundle;

public class MyActivity extends Activity {
    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:53:06.770

你是什​​么意思空？如果你得到一个只有空网格的空白地图，通常这意味着你的 API 密钥是错误的。您是否在没有获得新的 api 密钥的情况下切换计算机或开始使用新的密钥库签署您的应用程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-18T01:44:05.370

[https://developers.google.com/maps/documentation/android/map#mapview](https://developers.google.com/maps/documentation/android/map#mapview)

> 该类的用户必须将所有 Activity 生命周期方法——例如 onCreate()、onDestroy()、onResume() 和 onPause()——转发给 MapView 类中的相应方法。

您需要转发这些调用，以便视图有机会呈现地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-20T11:23:21.253

对我来说，解决方案是将所有必要的生命周期方法从包含 MapView 的 Fragment 转发到 MapView 中的相应方法。就我而言，在 onCreate()创建 MapView 后，我在*onCreateView()**的*片段布局内将 MapView 动态添加到 FrameLayout 中。

```
public class MapFragment extends Fragment {

private MapView mapView;

    @Override
    public void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mapView = new MapView(requireContext()); // obtain the mapView before calling .onCreate() on it.
        mapView.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(final LayoutInflater inflater, ViewGroup container,
                          Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.fragment_map, null, false);
        mapContainer = (FrameLayout) rootView.findViewById(R.id.map_container);
        mapContainer.removeAllViews();
        mapContainer.addView(mapView);
        return rootView;
    }

    @Override
    public void onStart() {
        super.onStart();
        if (mapView != null) {
            mapView.onStart();
        }
    }

    @Override
    public void onResume() {
        super.onResume();
        if (mapView != null) {
            mapView.onResume();
        }
    }

    @Override
    public void onPause() {
        super.onPause();
        if (mapView != null) {
            mapView.onPause();
        }
    }

    @Override
    public void onStop() {
        super.onStop();
        if (mapView != null) {
            mapView.onStop();
        }
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        if (mapView != null) {
            mapView.onDestroy();
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        if (mapView != null) {
            mapView.onSaveInstanceState(outState);
        }
    }

    @Override
    public void onLowMemory() {
        super.onLowMemory();
        if (mapView != null) {
            mapView.onLowMemory();
        }
    }
} 
```

阅读[https://developers.google.com/maps/documentation/android-sdk/reference/com/google/android/libraries/maps/MapView](https://developers.google.com/maps/documentation/android-sdk/reference/com/google/android/libraries/maps/MapView)了解更多详情。

# php - 在会话中存储当前页面

> ID：15138356
> 
> 赞同：0
> 
> 时间：2013-02-28T14:45:18.380
> 
> 标签：php, html

在我的页面上，我有一个页脚文件，我将其包含在我网站的每个页面中。在页脚中，我想将当前 url 保存到会话变量中。

我有

```
$page = $_SERVER["REQUEST_URI"];
session_register("page");
echo "http://".$_SERVER['SERVER_NAME'].$_SESSION['page']; 
```

但如果我转到另一个页面，它只存储 1 个值并且不会更改。我知道还有其他方法，但我想要的是会话变量。

我希望有一个人可以帮助我 ？

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:47:39.193

```
$page = $_SERVER["REQUEST_URI"];
$_SESSION['page'] = $page;
echo "http://".$_SERVER['SERVER_NAME'].$_SESSION['page']; 
```

不推荐使用[session_register](http://php.net/manual/en/function.session-register.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-25T12:45:17.023

为了获取当前页面的 URL，PHP 提供了一个超全局变量`$_SERVER`。是 PHP的`$_SERVER`一个内置变量，用于获取当前页面的 URL。它是一个超全局变量，意味着它在所有范围内始终可用。

如果我们想要页面的完整 URL，那么我们需要检查协议（或方案名称），无论是`https`还是`http`. 请参见下面的示例：

```
<?php  
    if(isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on')   
         $url = "https://";   
    else  
         $url = "http://";   
    // Append the host(domain name, ip) to the URL.   
    $url.= $_SERVER['HTTP_HOST'];   

    // Append the requested resource location to the URL   
    $url.= $_SERVER['REQUEST_URI'];    

    session_start();
    $_SESSION['page'] = $url;

    echo  $_SESSION['page'];  

  ?> 
```

# r - 将 corrplot 导出到 .eps 文件

> ID：15138359
> 
> 赞同：1
> 
> 时间：2013-02-28T14:45:22.413
> 
> 标签：r, eps, r-corrplot

我有一个绘制的 a`corrplot`并且我希望它具有 .eps 文件格式。问题是在 .eps 文件中，圆圈内的数字消失了。有什么参数可以让他们回来吗？

```
library(corrplot)
test <- structure(c(100, 41.6411042944785, 69.6478873239437, 99.35956084172, 
 100, 99.9295774647887, 90.4849039341263, 54.409509202454, 100
 ), .Dim = c(3L, 3L), .Dimnames = list(c("x1", "x2", "x3"), c("x1", 
 "x2", "x3"))) 
```

没有 .eps 格式：（表现良好）

```
corrplot(round(test),tl.cex=1.5,title="test", method="circle",is.corr=FALSE,type="full",
    cl.lim=c(0,100),cl.cex=2,addgrid.col="blue",addshade="positive",col=col1, addCoef.col = rgb(0,0,0, alpha =0.6), mar=c(0,0,1,0), diag= FALSE) 
```

.eps 格式：

```
postscript("test.eps", height=8, width=8, paper="special", family="Helvetica", fonts="Helvetica", horizontal=FALSE, onefile=FALSE)
corrplot(round(test),tl.cex=1.5,title="test", method="circle",is.corr=FALSE,type="full",
         cl.lim=c(0,100),cl.cex=2,addgrid.col="blue",addshade="positive",col=col1, addCoef.col = rgb(0,0,0, alpha =0.6), mar=c(0,0,1,0), diag= FALSE)
dev.off() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:14:40.563

你看到警告说

> 警告消息：在 text.default(Pos[, 1], Pos[, 2], col = addCoef.col, labels = round((DAT - ：此设备不支持半透明：每页只报告一次

? 这意味着您尝试以半透明方式绘制的任何颜色（提示，提示：参数中的`alpha`设置`addCoef.col`）在 PostScript 图中都不起作用。

消除`alpha`如下设置（只是将颜色从 更改`rgb(0,0,0,alpha=0.6)`为`rgb(0,0,0)`，尽管您不妨说`"black"`）在我的系统上工作正常：

```
library("corrplot")
col1 <- "green"  ## you didn't tell us what col1 was so I made something up
postscript("test.eps", height=8, width=8, paper="special",
    family="Helvetica", fonts="Helvetica", horizontal=FALSE, onefile=FALSE)
corrplot(round(test),tl.cex=1.5,title="test", method="circle",
    is.corr=FALSE,type="full",
    cl.lim=c(0,100),cl.cex=2,
    addgrid.col="blue",addshade="positive",
    col=col1, addCoef.col = rgb(0,0,0), mar=c(0,0,1,0), diag= FALSE)
dev.off() 
```

# java - StAX JAVA 提取特定标签和数据

> ID：15138360
> 
> 赞同：0
> 
> 时间：2013-02-28T14:45:23.287
> 
> 标签：java, parsing, stax

我试图了解如何识别和特定 XML 并在其中一个标签处提取特定数据。

当我试图达到上述目标时，我一直在阅读文档和示例，然后分支和修改。

我正在使用 StAX

我的整个代码和 xml 文件在这篇文章的底部。

我有 2 个问题：1）我有一个问题，为什么我的部分代码没有按照我想象的方式运行。我有

```
String elem = se.getName().toString();
System.out.printf("elem = %s\n",elem);
if( se.getName().toString() == "{http://www.publishing.org}Date")
                        //if( elem == "1")
                        {
                            System.out.println("Here !!!!!!!!!!!!!!!!!");
                        } 
```

我的 System.out.printf(“elem = %s\n”,elem);

产量：elem = { [http://www.publishing.org](http://www.publishing.org) }日期

但我的 if 语句 if( se.getName().toString() == "{ [http://www.publishing.org](http://www.publishing.org) }Date") 从来都不是真的，这意味着我永远不会得到“这里！！！”</p >

问题 2，为什么我会得到：

```
{http://www.publishing.org}author
{http://www.publishing.org}Date
{http://www.publishing.org}ISBN 
```

而不仅仅是作者、日期和 ISBN？为什么每一行都给我{ [http://publishing.org](http://publishing.org) }？

```
public static void main(String[] args) throws FileNotFoundException, XMLStreamException
{
    // TODO code application logic here
    //System.out.println("Here");
    //String filename = null;
    String filename = "BookCatalog.xml";
    XMLInputFactory factory = XMLInputFactory.newInstance();
    XMLEventReader reader = factory.createXMLEventReader(new FileReader(filename));
    while(reader.hasNext())
            {
                XMLEvent event = reader.nextEvent();
                XMLEvent nextEvent = reader.peek();
                switch (event.getEventType())
                        {
                    case XMLEvent.START_ELEMENT:
                        StartElement se = event.asStartElement();
                        //System.out.println("Here");
                        //System.out.print("<" + se.getName());

                        System.out.print(" " + se.getName());
                        System.out.printf("\n");
                        String elem = se.getName().toString();
                        //String elem = "1";
                        System.out.printf("elem = %s\n",elem);
                        //String ele = event.getAttributeName();
                        if( se.getName().toString() == "{http://www.publishing.org}Date")
                        //if( elem == "1")
                        {
                            System.out.println("Here !!!!!!!!!!!!!!!!!");
                        }
                        Iterator attributes = se.getNamespaces();

                        while(attributes.hasNext())
                        {
                            Attribute attr= (Attribute)attributes.next();
                            System.out.print(" " + attr.getName() + "=\"" +attr.getValue() +"\"");
                            System.out.printf("\n");
                        }//end while loop
                    System.out.print(">");
                        if(nextEvent.isCharacters())
                        {
                            Characters c = reader.nextEvent().asCharacters();
                            if(!c.isWhiteSpace())
                            System.out.print(c.getData());
                            System.out.printf("\n");

                        }// end if
                    /*case XMLEvent.END_ELEMENT>
                        EndElement ee = event.asEndElement();
                        System.out.print("</"+ee.getName()+">");
                        break;
                        * */
                        }// end witch
            }// end while
    reader.close();
}//end Main 
```

和 XML：http://www.publishing.org"> Yogasana Dhirenda 1966 81-40 Dhirenda 11.50 Yogasana J.K 1954 0-06 Harper 2.95

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:55:38.557

问题 1：这看起来像 .equals() vs ==。我想你想要.equals()。

# c# - xna 获得正确的方向 3d

> ID：15138361
> 
> 赞同：0
> 
> 时间：2013-02-28T14:45:27.117
> 
> 标签：c#, xna

如果我有一个起始位置向量 3 和旋转向量 3，我如何获得指示行进方向的向量？我得到了一个归一化的向量来指示它是如何旋转的，但当然这只表示它是如何旋转的，而不是行进方向。即，如果我在 y 上旋转应该会影响 x 和 z 上的行进方向，而不是对在 y 上旋转的向量进行规范化，这将表明它已经在 y 上旋转。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:04:03.477

在某些时候，您可能会采用“旋转 Vector3”并从中制作一个矩阵。该矩阵有一个 Vector3 属性 ( `Matrix.Forward`)，它是对应于“旋转 Vector3”的方向。如果您不想弄乱已有的矩阵，则此方法应该可以完成工作。

```
Vector3 DirectionToTravel(bool rotationVecIsInRadians, Vector3 rotationVec)//rotation vec must not be normalized at this point
{
    Vector3 result;

    if (!rotationVecIsInRadians)
    {
        rotationVec *= MathHelper.Pi / 180f;
    }

    float angle = rotationVec.Length();
    rotationVec /= angle; //normalizes rotation vec

    result = Matrix.CreateFromAxisAngle(rotationVec, angle).Forward;

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:20:32.397

除了 Steve H 的回答，您可能会发现您需要使用 Quarternions 在 3D 空间中更有效地进行旋转。我提供了一些链接，如果您决定使用 Quarternions，可能会对您有所帮助。

[四元数结构 (MSDN)](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.quaternion.aspx)

[Quarternion 教程（MSDN 社交）](http://social.msdn.microsoft.com/Forums/en-US/xnaframework/thread/35090fe1-468b-4449-ba29-b08aee98359d/)

[XNA 中的四元数旋转（Stackoverflow 问题）](https://stackoverflow.com/questions/10307763/quaternion-rotation-in-xna)

# python - Python：将 JSON 字符串写入文件。

> ID：15138363
> 
> 赞同：3
> 
> 时间：2013-02-28T14:45:29.723
> 
> 标签：python, json, encoding

我有一个已序列化为`JSON`数据的自定义对象。序列化后，我将数据写回`JSON`文件。这似乎有效，但是我写回文件的 JSON 现在是一个字符串（即它以 a 开头并以 a`"`结尾`"`）。

因此，当我尝试将新文件加载到被解析时，我的解析器认为它是一个字符串并且我得到了错误：

```
 TypeError: string indices must be integers 
```

我通过执行以下操作序列化对象：

```
class myEncoder(JSONEncoder):
    def default(self, o):
        return o.__dict__ 
```

然后调用这个类：

```
with open('updatedMapData.json', 'w') as outfile:
            json.dump(myEncoder().encode(jsonToEncode) , outfile) 
```

`myEncoder().encode(data)`完美返回，但是当它写入时，文件是一个长字符串。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:55:47.760

做就是了：

```
outfile.write(myEncoder().encode(jsonToEncode)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:03:39.687

json.dump 的第一个参数是您要转换为 JSON 的对象，但是您可以将您的类作为`cls`参数传递，因此您需要这样调用它：

```
json.dump(jsonToEncode, outfile, cls=myEncoder) 
```

# python - Python 对多个级别和自定义顺序的列表进行排序

> ID：15138368
> 
> 赞同：6
> 
> 时间：2013-02-28T14:45:48.920
> 
> 标签：python, sorting, python-2.6

我有一个列表，`my_list`例如

```
[
['item 3.1', 'item 3.2', 'item 3.3', 'item 3.4', 'item 3.5'],
['item 3.1', 'item 3.2', 'item 3.2', 'item 3.2', 'item 3.2'],
['item 3.1', 'item 3.2', 'item 3.2', 'item 3.6', 'item 3.2'],
['item 3.1', 'item 2.2', 'item 2.4', 'item 2.7', 'item 2.5'],
['item 2.1', 'item 2.2', 'item 2.3', 'item 2.4', 'item 2.5'],
['item 1.1', 'item 1.2', 'item 1.3', 'item 1.4', 'item 1.5'],
['item 4.1', 'item 4.2', 'item 4.3', 'item 4.4', 'item 4.5'],
['item 1.1', 'item 1.2', 'item 1.3', 'item 1.5', 'item 1.5']
] 
```

我想在多个级别订购此列表，其中 1 个级别是客户订单，但不知道如何执行此操作。

例如，我想先按第一项然后在该订单中订购，然后按第三项订购，然后在该订单中订购，按第四项订购。但我希望第一项按此特定顺序而不是按字母顺序排序/排序：

```
item 4.1
item 2.1
item 3.1
item 1.1 
```

所以最终列表（排序后）将是：

```
[
['item 4.1', 'item 4.2', 'item 4.3', 'item 4.4', 'item 4.5']
['item 2.1', 'item 2.2', 'item 2.3', 'item 2.4', 'item 2.5'],
['item 3.1', 'item 3.2', 'item 3.2', 'item 3.2', 'item 3.2'],
['item 3.1', 'item 3.2', 'item 3.2', 'item 3.6', 'item 3.2'],
['item 3.1', 'item 3.2', 'item 3.3', 'item 3.4', 'item 3.5'],
['item 3.1', 'item 2.2', 'item 2.4', 'item 2.7', 'item 2.5'],
['item 1.1', 'item 1.2', 'item 1.3', 'item 1.4', 'item 1.5'],
['item 1.1', 'item 1.2', 'item 1.3', 'item 1.5', 'item 1.5'],
] 
```

我知道我可以通过以下方式对多个级别进行排序：

```
s = sorted(my_list, key=itemgetter(0,2,3)) 
```

但这会按字母顺序对它们进行排序，而我不知道该怎么做是将第一列设置为按自定义顺序排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:53:48.033

丑陋且效率低下，但可能有效：

```
order = ['item 4.1', 'item 2.1', 'item 3.1', 'item 1.1']
my_list.sort(key=lambda x: order.index(x[0])) 
```

重新订购`my_list`：

```
[['item 4.1', 'item 4.2', 'item 4.3', 'item 4.4', 'item 4.5'],
 ['item 2.1', 'item 2.2', 'item 2.3', 'item 2.4', 'item 2.5'],
 ['item 3.1', 'item 3.2', 'item 3.3', 'item 3.4', 'item 3.5'],
 ['item 3.1', 'item 3.2', 'item 3.2', 'item 3.2', 'item 3.2'],
 ['item 3.1', 'item 3.2', 'item 3.2', 'item 3.6', 'item 3.2'],
 ['item 3.1', 'item 2.2', 'item 2.4', 'item 2.7', 'item 2.5'],
 ['item 1.1', 'item 1.2', 'item 1.3', 'item 1.4', 'item 1.5'],
 ['item 1.1', 'item 1.2', 'item 1.3', 'item 1.5', 'item 1.5']] 
```

如果您想以自定义方式按第一列排序，然后按字母顺序按第三和第四列，只需展开`key`：

```
my_list.sort(key=lambda x: (order.index(x[0]), x[2], x[3])) 
```

返回

```
[['item 4.1', 'item 4.2', 'item 4.3', 'item 4.4', 'item 4.5'],
 ['item 2.1', 'item 2.2', 'item 2.3', 'item 2.4', 'item 2.5'],
 ['item 3.1', 'item 2.2', 'item 2.4', 'item 2.7', 'item 2.5'],
 ['item 3.1', 'item 3.2', 'item 3.2', 'item 3.2', 'item 3.2'],
 ['item 3.1', 'item 3.2', 'item 3.2', 'item 3.6', 'item 3.2'],
 ['item 3.1', 'item 3.2', 'item 3.3', 'item 3.4', 'item 3.5'],
 ['item 1.1', 'item 1.2', 'item 1.3', 'item 1.4', 'item 1.5'],
 ['item 1.1', 'item 1.2', 'item 1.3', 'item 1.5', 'item 1.5']] 
```

# javascript - 当用户在输入区域输入文本时显示警报

> ID：15138371
> 
> 赞同：0
> 
> 时间：2013-02-28T14:45:52.997
> 
> 标签：javascript, jquery

当用户在搜索框中输入文本但它不起作用时，我试图显示一个警报。请指导。

[http://jsfiddle.net/zcH54/](http://jsfiddle.net/zcH54/)

```
<div id="form" style="float:right;" >
    <form method="get" >
    <input type="submit" value="Search" class="btn" >
    <input name="q" type="text" id="search" size="32" maxlength="128" class="txt" >
    </form>
</div>  <!--form ends--> 
```

这是JS，

```
 $(document).ready(function() { 
                $("#search").keyup(function() {                                                         // function starts when a key is entered in the search bar
                    alert("I am an alert box!");
                });
     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:50:54.857

您的解决方案是有效的。您必须在 jsFiddle 中添加 jQuery 库

```
<script type="text/javascript" src="static/js/jquery-1.9.1.min.js"></script> 
```

[现在在这里](http://jsfiddle.net/markus85/zcH54/3/)尝试

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T14:51:47.207

这将起作用：

```
$('#element').bind('keyup', function() { alert('hi') } ); 
```

将元素名称更改为您的，享受:-)

如果您的 jquery 文件有问题，您可以将其添加到 js 文件的第一个位置：

```
if(!window.jQuery)
{
   var script = document.createElement('script');
   script.type = "text/javascript";
   script.src = "path/to/jQuery";
   document.getElementsByTagName('head')[0].appendChild(script);
} 
```

如果它仍然不存在，这将是第二次尝试。

# java - 多个错误：预期的类、接口或枚举

> ID：15138379
> 
> 赞同：0
> 
> 时间：2013-02-28T14:46:00.827
> 
> 标签：java

```
public static boolean prime(int n){
    if(n<=1)
        return false;
    int z=2;
    if(n==2)
        return true;
    while(z<Math.sqrt(n)){
        if(z mod n==0)
            return false;
        z++;
    }
    return true;
} 
```

任何线索我的代码有什么问题？我收到 7 个“类、接口或枚举”错误，期待...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:47:39.443

你不能执行独立的代码，一切都必须存在于类、接口或枚举中。

这需要住在一个类中。这应该在一个名为`MyClass.java`

例如

```
public class MyClass {

   public static boolean prime(int n){
       if(n<=1)
           return false;
       int z=2;
       if(n==2)
           return true;
       while(z<Math.sqrt(n)){
          if(z mod n==0)
              return false;
          z++;
       }
   return true;

   }  

} 
```

然后可以通过运行来调用它`MyClass.prime(7);`

正如其他人所说， mod 也是一个无效的关键字，应该用 % 运算符替换

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:47:05.713

如果这是您的所有代码，则需要将其括在 a`class`中，如错误所示:)

其次，Java中没有`mod`关键字，替换为`%`. 将2放在一起：

```
public class MyPrimeTest {

    public static void main(String[] args) {
        boolean primeCheck = prime(43);
        ...
    }

    public static boolean prime(int n) {
        if (n <= 1) {
            return false;
        }
        int z = 2;
        if (n == 2) {
            return true;
        }
        while (z < Math.sqrt(n)) {
            if (z % n == 0) {
                return false;
            }
            z++;
        }

        return true;
    }
} 
```

*   [课程](http://docs.oracle.com/javase/tutorial/java/javaOO/classes.html)
*   [模运算符](http://www.dreamincode.net/forums/topic/273783-the-use-of-the-modulo-operator/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:16:55.913

“预期的类、接口或枚举”错误主要是由于缺少 {} 大括号。彻底检查你的程序。

如果上面提到的是您的所有代码，那么您应该将它封装在一个类中。也别忘了写`main()`。

java中没有'mod'关键字。请改用“%”。

```
import java.util.*;

class Prime
{

public ...........main(.... args[])

{
//accept integer

if(prime(n))//calling prime()
..
} 
```

然后你的方法..干杯！

# objective-c - MPMoviePlayerController H.264 和多个音频流

> ID：15138380
> 
> 赞同：2
> 
> 时间：2013-02-28T14:46:01.860
> 
> 标签：objective-c, mpmovieplayercontroller, mpeg-4

我正在尝试查找有关如何支持来自单个 H.264/MPEG4 视频文件的多个音频流的一些信息。

到目前为止，我在谷歌搜索时发现的信息很少，我想知道是否有人有任何信息可以提供一些启示。

我想显示视频，然后可以选择从 H.264 格式播放哪个音频流。

有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:30:06.967

MPMoviePlayer 不能用于播放具有多个音频流的电影。

# asp.net - 在没有 asp.net URL 重定向的情况下阻止访问站点

> ID：15138382
> 
> 赞同：0
> 
> 时间：2013-02-28T14:46:03.763
> 
> 标签：asp.net, url-rewriting, url-redirection

我有三个网站。一个主站点和两个子站点位于位于一个 discountasp.Net 服务器上的文件夹中 - www.sitea.com、www.siteb.com 和 www.sitec.com。

我使用 web.config 文件中的 URL 重定向将流量重定向到子站点（siteb 和 sitec），因此：

```
<rule name="siteb" stopProcessing="true">
          <match url=".*" />
          <conditions>
            <add input="{HTTP_HOST}" pattern="^www.siteb.com$" />
            <add input="{PATH_INFO}" pattern="^/siteb/" negate="true" />
          </conditions>
          <action type="Rewrite" url="\siteb\{R:0}" />
        </rule>
        <rule name="sitec" stopProcessing="true">
          <match url=".*" />
          <conditions>
            <add input="{HTTP_HOST}" pattern="^www.sitec.com$" />
            <add input="{PATH_INFO}" pattern="^/sitec/" negate="true" />
          </conditions>
          <action type="Rewrite" url="\sitec\{R:0}" />
        </rule> 
```

我的问题是我不希望公众能够键入 www.sitea.com/siteb/ 并以这种方式访问​​子站点。

我将如何配置我的服务器来阻止它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:28:38.670

您可以创建第二条规则，将尝试访问的人重定向`www.sitea.com/siteb/`到`www.siteb.com`.

它看起来像：

```
<rules>
    <rule name="Rewrite to siteb.com" stopProcessing="true">
        <match url="^siteb/" negate="true" />
        <conditions>
            <add input="{HTTP_HOST}" pattern="^(www\.)?siteb\.com$" />
        </conditions>
        <action type="Rewrite" url="/siteb/" />
    </rule>
    <rule name="Prevent direct access">
        <match url="^siteb/" />
        <conditions>
            <add input="{HTTP_HOST}" pattern="^(www\.)?sitea\.com" />
        </conditions>
        <action type="Redirect" url="http://siteb.com" />
    </rule>
</rules> 
```

我已经改变了一点`Rewrite`规则以使其更短。
默认情况下`Redirect`发送 301（永久）。
每个试图`www.sitea.com/siteb/`直接访问的人都会被重定向到`www.siteb.com`，自己会重写第一个 ( `www.sitea.com/siteb/`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:05:51.020

当页面加载时，您可以获得页面引用，如下所示：

```
Dim myReferer as string = Request.UrlReferrer 
```

这将告诉您页面的来源。然后，您可以拆分该字符串并进行比较。

另一种可能更好的方法是通过重定向传递查询字符串。然后，当您的页面加载时，检查该查询字符串。如果它不存在，请重定向页面或显示错误。

使用查询字符串重定向示例：

```
Response.Redirect("myPage.aspx?myId=SomeId") 
```

然后检查 myPage 中的字符串：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
     myString as string =  Request.QueryString("myId")

end Sub 
```

# ios6 - chooseBestHostPlayerWithCompletionHandler 返回 null

> ID：15138384
> 
> 赞同：3
> 
> 时间：2013-02-28T14:46:08.233
> 
> 标签：ios6, cocos2d-iphone, game-center

以下代码将最佳主机返回为空。我怎样才能让它工作？

```
[gameKitHelper.match chooseBestHostPlayerWithCompletionHandler: ^(NSString *playerID) {
    gameKitHelper.hostingPlayer = [playerID retain];
    NSLog(@"Best host = %@",gameKitHelper.hostingPlayer);
}]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-27T14:59:07.023

我发现一个简单的解决方案（而不是生成需要额外协商和数据传输的随机数）是简单地将 [[GKLocalPlayer localPlayer] playerID] 与比赛中的 playerID 进行比较，然后选择第一个按升序排列的。这可以在所有设备上完成，保证唯一的 playerID 作为主机，并保证在所有设备上选择相同的唯一 playerID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:28:37.433

来自 Apple 的游戏中心指南

> 如果您打算使用此方法搜索最佳服务器，则比赛中的所有设备都必须在支持此方法的 Game Kit 版本上运行，并且比赛中的每个设备必须同时调用此方法。

你在你的应用程序中这样做吗？

此外，为了使其正常工作，所有客户端必须已经相互连接。

# ios - Xcode Code Sign 错误，因为钥匙串中没有钥匙

> ID：15138385
> 
> 赞同：5
> 
> 时间：2013-02-28T14:46:08.657
> 
> 标签：ios, xcode, key, keychain, signing

你可能会想，不再是这样一个已经有成千上万个话题的问题了。但是，我无法找到解决此问题所需的答案。

这些主题都没有钥匙串那么深入。

当我尝试将我的应用程序部署到 iPhone 时，我收到以下消息：

```
Code Sign error: The identity 'iPhone Developer: [Name] ([ID])' doesn't match any valid, non-expired certificate/private key pair in your keychains. 
```

现在，如前所述，我一直在寻找多个指南或修复程序，但是，它们似乎都没有解决这个问题。

我尝试过的事情：

*   无数次使用 Apple 的演练进行应用部署
*   在互联网上搜索应用程序部署指南
*   更改了“xcodeproj”包中“pbxproj”文件的内容。
*   使用 Xcode 4.6 中的 Refresh 按钮从 Apple 的服务器检索所有可用的配置文件（允许您自动获取）

在尝试了所有这些方法之后，我仍然无法解决问题。我看到的一个问题是，钥匙串中的证书首先显示无效状态，现在已解决。

但是，如果我是对的，证书应该附有两个密钥。公钥和私钥，这些都没有显示。

钥匙串访问的“钥匙”选项卡中也没有显示任何钥匙。

* * *

### 解决方案

（感谢 nsgulliver）

1.  做 nsgulliver 的帖子（标记为解决方案）所说的一切。
2.  如果您已经有一个有效的证书，请单击撤销按钮，这不会造成任何问题，您只需重新创建密钥，然后将生成一个新证书。
3.  确保您已安装 Apple 的 WWDR 以将证书颁发机构标记为有效。
4.  遵循默认的 Provisioning Assistant 准则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:49:53.103

设备上安装的或为目标签名的配置文件可能无效，请尝试`Organizer->Provisioning profile`查看配置文件是否具有有效状态？如果不尝试删除并刷新它们，如果它们在刷新后显示有效，那么它可能会解决您的问题，如果不是，那么您应该从`keychain`配置门户中删除所有条目并删除配置文件，并尝试从头开始创建，如果您仍然面临问题然后从[分步指南教程中获取帮助](http://www.raywenderlich.com/8003/how-to-submit-your-app-to-apple-from-no-account-to-app-store-part-1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:53:32.673

您无法重新创建匹配的密钥，这会破坏它们的全部目的。您需要找到旧密钥或从头开始签名过程。

您是否使用生成密钥的同一台机器？如果没有，请转到另一台机器，导出开发人员配置文件，然后将其导入新机器。

您可以从备份中恢复密钥吗？如果没有，请停止您正在执行的所有操作并配置您的计算机以进行备份，然后再执行其他操作。

如果你真的被卡住了，你必须从一开始就遵循签名程序，从证书颁发机构请求证书。这将生成新密钥，您必须创建匹配的配置文件，然后将您的应用程序设置为使用这些进行签名。删除旧的配置文件，如果没有旧密钥，它们将毫无用处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-06T00:20:49.267

您需要锁定钥匙串。请看截图：

[![在此处输入图像描述](../Images/415e7f102ec41833e1552f57140c528c.png)](https://i.stack.imgur.com/buCDj.jpg)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T16:06:53.240

遇到代码签名问题时需要阅读：

[技术说明 TN2250：**iOS 代码签名故障排除**](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933)

没有什么比真正了解证书中的内容和没有的内容、必要部分的保存位置以及它们的使用方式更能帮助您了。这不是您最后一次遇到代码签名问题，本技术说明提供了一份长清单，可以帮助您确保一切都在正确的位置，以帮助您开发应用程序并最终签名并提交给应用商店。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T14:55:27.410

当我过去遇到这个问题时，我刚刚删除了本地计算机上的所有内容并重新开始。所以：

1.  在 Keychain access 中删除与您的开发者帐户关联的密钥。
2.  在 XCode 中打开“组织者”（窗口-> 组织者）
3.  在设备（顶部菜单）和配置文件（左侧菜单）中，选择所有配置文件并将其删除。
4.  现在点击刷新。它将要求您登录以及是否要生成新密钥等，选择是并等待。

我发现这是解决任何配置/关键问题的最快方法，因为您可能会花费数小时发现您错过了一些小问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-30T19:33:59.770

删除所有旧配置文件 ( `~/Library/MobileDevice/Provisioning Profiles/`) 并更新 xCode 后，可以再次找到证书。

# dependencies - 您如何使用 NDepend 显示将 ClassA 连接到 ClassX 的关系？

> ID：15138386
> 
> 赞同：3
> 
> 时间：2013-02-28T14:46:10.433
> 
> 标签：dependencies, ndepend, cqlinq

**背景**

当开车经过一个未知的城市时，通常最好有一张可以帮助引导您到达目的地的地图。同样，当第一次查看遗留代码时，通常最好有一个可以概述应用程序内关系的图表。

**例子**

在这种情况下，我被要求查看一个遗留的 {以数据为中心的}应用程序，以更好地了解它如何管理它的数据库连接。或者更具体地说，我正在尝试生成一个概述 和 之间关系的类`Program`图`System.Data.Common.DbConnection`。

**问题**

我对 NDepend 比较陌生，并且难以编写适当的 CQLinq 语句。不幸的是，以下仅显示程序集及其彼此之间的关系。我将如何修改此查询以*显示两种类型之间的关系？*

您能提供的任何见解将不胜感激！

```
from t in Assemblies
where t.DepthOfIsUsedBy("MyCompany.MyProject.MyNamespace.Program") >=0 &&
t.DepthOfIsUsing("System.Data.Common.DbConnection") >=0
select new { t, t.NbLinesOfCode} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:33:52.877

`from t in Assemblies`表示 t 是一个程序集。

你应该尝试`from t in Application.Types`：

```
// <Name>Display relationships between two types</Name>
from t in Application.Types
where t.DepthOfIsUsedBy("Company.Project.NamespaceA") >=0 &&
t.DepthOfIsUsing("Company.Project.NamespaceZ") >=0
select new { t, t.NbLinesOfCode} 
```

# java - 轻松生成休息服务的解决方案？

> ID：15138392
> 
> 赞同：5
> 
> 时间：2013-02-28T14:46:32.950
> 
> 标签：java, sql, database, web-services, rest

我们有一个适用于 MySql 数据库的应用程序。现在我们正在实现我们应用程序的移动版本，我正在寻找 java 解决方案，以便从已经准备好的 sql 查询中轻松生成 rest 服务。

有关安全性和性能的详细信息：需要安全性 (LDAP)。性能 - 休息请求的工作时间应该大约等于 sql 请求的工作时间。

可以使用哪些解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:50:00.043

我认为最好的解决方案是[REST4Enterprise](http://www.exadel.com/web/portal/r4e) 也可以看看和[restSQL](http://restsql.org/doc/Overview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:20:13.887

我建议使用 [spring roo](http://www.springsource.org/spring-roo)非常好用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T16:08:03.960

我建议使用 netbeans 从数据库表中生成 REST Web 服务。Netbeans 还提供了从实体 bean（JPA 实体）生成 REST Web 服务的能力。看看[这个链接](http://netbeans.org/community/magazine/html/04/restfulws.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T05:40:57.207

如果您只是在寻找 CRUD REST 服务 - 其他人建议的上述工具之一可以提供帮助。

但要检查更多 - [Dropwizard](http://dropwizard.codahale.com/manual/)

我的2c

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T09:41:21.840

对于移动应用程序，REST 是最好的推荐架构。但是您必须确保在客户端进行会话处理（推荐）。

Eclipse -> Webservice -->Create a Sample Rest Webservice 将是一个很好的起点

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T11:53:03.730

您可以使用 spring-rest 或 grails 来开发休息服务。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-12T19:14:20.083

考虑用 PHP 做 Web 服务。除了 Tomcat，不需要任何东西，并提供 LDAP 验证。它的上市时间非常快，而且 PHP 与 MySql 非常无缝地协同工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-06T12:48:40.197

您可以看一下[开发 REST Web 服务教程](http://www.myeclipseide.com/documentation/quickstarts/webservices_rest/).. 不确定它是否是最好的解决方案，但可能是一个……我用了两次，发现它很有用而且非常简单。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-13T10:06:58.100

在 Java™ 世界中，您可以通过多种方式构建 RESTful Web 服务：有些人使用 JSR 311(JAX-RS) 及其参考实现 Jersey，其他人使用 Restlet 框架，有些人甚至可能从头开始实现。用于构建 Java EE 应用程序的 Spring 框架，在其 MVC 层也支持 REST。

[http://www.ibm.com/developerworks/webservices/library/wa-spring3webserv/index.html](http://www.ibm.com/developerworks/webservices/library/wa-spring3webserv/index.html)

下面的文章还介绍了使用 java 和 mysql 的 RESTful Web 服务 api

[http://www.9lessons.info/2012/09/restful-web-services-api-using-java-and.html](http://www.9lessons.info/2012/09/restful-web-services-api-using-java-and.html)

# java - 操作 JComboBox

> ID：15138398
> 
> 赞同：0
> 
> 时间：2013-02-28T14:46:54.837
> 
> 标签：java, swing, jcombobox

大家好，有人可以帮我完成我的程序吗？我有一个 JComboBox，里面有几个项目。我想要发生的是，每当用户单击组合框中的某个项目时，它应该显示其项目数量。例如，我点击 PM1 两次它应该显示数量为 2，如果我点击 PM4 五次它应该显示数量为 5。我的程序中有两个类，代码如下。顺便说一句，我还想在 CopyShowOrder 类中显示的项目旁边显示数量。任何帮助将不胜感激提前感谢和更多的力量！

CopyShow的代码：

```
import java.util.Scanner;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class CopyShow{

  private static String z  = "";
  private static String w  = "";
  private static String x  = "";
  JComboBox combo;
  private static String a  = "";

public CopyShow(){
String mgaPagkainTo[] = {"PM1 (Paa/ Spicy Paa with Thigh part)","PM2 (Pecho)","PM3 (Pork Barbeque 4 pcs.)","PM4 (Bangus Sisig)","PM5 (Pork Sisig)","PM6 (Bangus Inihaw)","SM1 (Paa)","SM2 (Pork Barbeque 2 pcs.)","Pancit Bihon","Dinuguan at Puto","Puto","Ensaladang Talong","Softdrinks","Iced Tea","Halo-Halo","Leche Flan","Turon Split"};
   JFrame frame = new JFrame("Mang Inasal Ordering System");
   JPanel panel = new JPanel();
   combo = new JComboBox(mgaPagkainTo);
   combo.setBackground(Color.gray);
   combo.setForeground(Color.red);
   panel.add(combo);
   frame.add(panel);
    combo.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){
        String str = (String)combo.getSelectedItem();
        a = str;
        CopyShowOrder messageOrder1 = new CopyShowOrder();
        messageOrder1.ShowOrderPo();
       }
    });

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(300,250);
    frame.setVisible(true);
  }

  public static void main(String[] args) {
  Scanner inp = new Scanner(System.in);
  boolean ulitinMoPows = true;
  boolean tryAgain = true;

    System.out.print("\nInput Customer Name: ");
    String customerName = inp.nextLine();
    w = customerName;
    System.out.print("\nInput Cashier Name: ");
    String user = inp.nextLine();
    z = user;
   do{
    System.out.print("\nInput either Dine In or Take Out: ");
    String dInDOut = inp.nextLine();
    x = dInDOut;
        if (x.equals("Dine In") || x.equals("Take Out")){
         System.out.print("");
         ulitinMoPows = false;
         }
        else{
         JOptionPane.showMessageDialog(null, "Try again! Please input Dine In or Take Out only!","Error", JOptionPane.ERROR_MESSAGE);
             ulitinMoPows = true;
             System.out.print ("\f");
            }
    }while(ulitinMoPows);
    do{
    System.out.print("\nInput password: ");
    String pass = inp.nextLine();
    if(pass.equals("admin")){
        CopyShowOrder messageShowMenu = new CopyShowOrder();
        messageShowMenu.ShowMo();
        tryAgain = false;
    }
    if(!pass.equals("admin")){
        JOptionPane.showMessageDialog(null, "Try again! Invalid password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
    tryAgain = true;
     System.out.print ("\f");
    }
}while(tryAgain);
CopyShow j = new CopyShow();
    }

  public static String kuhaOrder()
 {
  return a;
  }

public static String kuhaUserName()
{
return z;
}

public static String kuhaCustomerName()
{
return w;
}

public static String kuhaSanKainPagkain()
{
return x;
}  
} 
```

CopyShowOrder 的代码：

```
public class CopyShowOrder {

public void ShowMo(){
    String user = CopyShow.kuhaUserName();
    System.out.print("\n\n\t\tCashier: " +user);
    String dInDOut = CopyShow.kuhaSanKainPagkain();
    System.out.print("                          "+dInDOut);
    String customerName = CopyShow.kuhaCustomerName();
    System.out.print("\n\t\tCustomer Name: " +customerName);
}

public void ShowOrderPo() {
    String order = CopyShow.kuhaOrder();
    System.out.print("\t\t\t\t\n " +order);

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:18:51.783

我不确定这是否是你想要的，但它就是这样......你可以有一个想法......

```
import java.awt.BorderLayout;

public class StackOverflow extends JDialog {

private final JPanel contentPanel = new JPanel();
private JTable table;
private JComboBox comboBox = new JComboBox();
private JButton button = new JButton("+");
private JButton button_1 = new JButton("-");
private JScrollPane scrollPane = new JScrollPane();
private List<String> list = new ArrayList<String>();

/**
 * Launch the application.
 */
public static void main(String[] args) {
    try {
        StackOverflow dialog = new StackOverflow();
        dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        dialog.setVisible(true);
    } catch (Exception e) {
        e.printStackTrace();
    }
}

/**
 * Create the dialog.
 */
public StackOverflow() {
    setTitle("StackOverflow");
    setBounds(100, 100, 339, 228);

    comboBox.setModel(new DefaultComboBoxModel(new String[] {"ITEM 1", "ITEM 2", "ITEM 3", "ITEM 4", "ITEM 5", "ITEM 6"}));

    getContentPane().setLayout(new BorderLayout());
    contentPanel.setBorder(new EmptyBorder(5, 5, 5, 5));
    getContentPane().add(contentPanel, BorderLayout.CENTER);
    contentPanel.setLayout(null);
    {

        scrollPane.setBounds(10, 43, 303, 131);
        contentPanel.add(scrollPane);
        {
            table = new JTable();
            table.setModel(new DefaultTableModel(
                new Object[][] {
                },
                new String[] {
                    "Item", "Count"
                }
            ));
            scrollPane.setViewportView(table);
        }
    }

    //Gets the table model and clear it
    DefaultTableModel model = (DefaultTableModel) table.getModel();
    model.setRowCount(0);

    //Add comboBox items to table
    for (int i = 0; i < comboBox.getItemCount(); i++) 
        model.addRow(new Object[] { comboBox.getItemAt(i) , 0 });

    comboBox.setBounds(10, 12, 203, 20);
    contentPanel.add(comboBox);
    button.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            String selectedItem = (String) comboBox.getSelectedItem();
            for (int i = 0; i < table.getRowCount(); i++) {
                String tableItem = (String) table.getValueAt(i, 0);
                int count = (Integer) table.getValueAt(i, 1)+1;
                if (selectedItem.equals(tableItem)) {
                    table.setValueAt(count, i, 1);
                }
            }
        }
    });

    button.setBounds(223, 11, 41, 23);
    contentPanel.add(button);
    button_1.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            String selectedItem = (String) comboBox.getSelectedItem();
            for (int i = 0; i < table.getRowCount(); i++) {
                String tableItem = (String) table.getValueAt(i, 0);
                int count = (Integer) table.getValueAt(i, 1)-1;
                if (selectedItem.equals(tableItem)) {
                    table.setValueAt(count, i, 1);
                }
            }
        }
    });

    button_1.setBounds(272, 11, 41, 23);
    contentPanel.add(button_1);
} 
```

}

# ruby - 与数组中的每个数组相交 - Ruby

> ID：15138400
> 
> 赞同：1
> 
> 时间：2013-02-28T14:47:03.317
> 
> 标签：ruby, arrays, foreach, each, intersection

我想找到数组中每个数组元素的交点并取交点。

输入是数组数组，例如“'list_arrays'，如下面脚本中提到的”“过滤器”是需要对观察到的交叉点的总长度应用的限制输出预期为这样的数组“[[2 ,4]]"

```
list_arrays = [[1, 2, 3, 4], [2, 5, 6], [1, 5, 8], [8, 2, 4]]
filter = 2

first_element_array = Array.new
list_arrays.each_with_index do |each_array1, index1|        
 list_arrays.each_with_index do |each_array2, index2|
  unless index1 < index2
   intersection = each_array1 & each_array2
   if intersection.length == filter.to_i
    first_element_array.push(intersection)
   end
  end
 end
end
puts first_element_array 
```

上述过程需要很长时间，因为我的数组数组太长（以百万行为单位）。我需要一种简单的 rubistic 方法来处理这个问题。有人对此有任何简单的想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T14:54:12.847

解密您的代码似乎您要求的是“如果该交集具有一定大小（示例中为 2），则返回集合的对组合之间的交集”。我会写（功能方法）：

```
list_arrays = [[1, 2, 3, 4], [2, 5, 6], [1, 5, 8], [8, 2, 4]]
list_arrays.combination(2).map do |xs, ys|
  zs = xs & ys 
  zs.size == 2 ? zs : nil
end.compact
#=> [[2, 4]] 
```

建议的优化：1）使用集合，2）使用自定义抽象`Enumerable#map_compact`（相当于`map`+`compact`但它会动态丢弃`nil`s，自己编写）。3）过滤掉不满足谓词的子数组：

```
require 'set'
xss = list_arrays.select { |xs| xs.size >= 2 }.map(&:to_set)
xss.combination(2).map_compact do |xs, ys|
  zs = xs & ys 
  zs.size == 2 ? zs : nil
end
#=> [#<Set: {2, 4}>] 
```

# python - 如何使用 BeautifulSoup 4 替换或删除 HTML 实体，如“”

> ID：15138406
> 
> 赞同：22
> 
> 时间：2013-02-28T14:47:15.257
> 
> 标签：python, beautifulsoup

我正在使用 Python 和 BeautifulSoup 4 库处理 HTML，但找不到`&nbsp;`用空格替换的明显方法。相反，它似乎被转换为 Unicode 不间断空格字符。

我错过了一些明显的东西吗？  最好的替换方法是什么？使用 BeautifulSoup 的正常空间？

编辑添加我使用的是最新版本 BeautifulSoup 4，因此`convertEntities=BeautifulSoup.HTML_ENTITIES`Beautiful Soup 3 中的选项不可用。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-28T15:00:01.873

```
>>> soup = BeautifulSoup('<div>a&nbsp;b</div>')
>>> soup.prettify(formatter=lambda s: s.replace(u'\xa0', ' '))
u'<html>\n <body>\n  <div>\n   a b\n  </div>\n </body>\n</html>' 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-28T15:00:54.103

请参阅文档中的[实体](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#entities)。BeautifulSoup 4 为所有实体生成正确的 Unicode：

> 传入的 HTML 或 XML 实体总是被转换为相应的 Unicode 字符。

是的，`&nbsp;`变成了一个不间断的空格字符。如果您真的希望这些是空格字符，则必须进行 unicode 替换。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-12-28T00:46:23.827

您可以简单地将不间断空格 unicode 替换为普通空格。

```
nonBreakSpace = u'\xa0'
soup = soup.replace(nonBreakSpace, ' ') 
```

一个好处是，即使您使用的是 BeautifulSoup，也不需要这样做。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-11-04T11:40:31.503

我遇到了 soup.prettify() 无法修复的 json 问题，因此它与[unicodedata.normalize()](https://docs.python.org/3.5/library/unicodedata.html#unicodedata.normalize)一起使用：

```
import unicodedata
soup = BeautifulSoup(r.text, 'html.parser')
dat = soup.find('span', attrs={'class': 'date'})
print(f"date prints fine:'{dat.text}'")
print(f"json:{json.dumps(dat.text)}")
mydate = unicodedata.normalize("NFKD",dat.text)
print(f"json after normalizing:'{json.dumps(mydate)}'") 
```

```
date prints fine:'03 Nov 19 17:51'
json:"03\u00a0Nov\u00a019\u00a017:51"
json after normalizing:'"03 Nov 19 17:51"' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-04-21T10:43:58.807

诚然，这不是使用 BeautifulSoup，但今天更直接的解决方案可能是 和 的某种组合[`html.unescape`](https://docs.python.org/3/library/html.html#html.unescape)，[`unicodedata.normalize`](https://docs.python.org/3/library/unicodedata.html#unicodedata.normalize)具体取决于您的数据和您想要做什么。

```
>>> from html import unescape
>>> s = unescape('An enthusiastic member of the&nbsp;community')# Using the import here
>>> print(s)
>>> 'An enthusiastic member of the\xa0community'
>>> import unicodedata
>>> s = unicodedata.normalize('NFKC', s)
>>> print(s)
>>> 'An enthusiastic member of the community' 
```

# javascript - 如何更改javascript中的宽度属性？

> ID：15138410
> 
> 赞同：0
> 
> 时间：2013-02-28T14:47:30.313
> 
> 标签：javascript, html, google-chrome, css

我在 chrome 浏览器开发者模式下手动更改了 style 属性，达到了预期的效果。通过输入

```
element.style {
   width: 900px;
} 
```

之后，被操纵的 div 显示为：

```
<div id="rte-savebar" class="aui-toolbar" style="width: 900px;"> 
```

现在我正在使用以下命令尝试使用 javascript 实现相同的效果：

```
document.getElementById("rte-savebar").style="width:900px;"; 
```

这似乎根本没有效果。

为了更改javascript中的宽度，我需要做什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T14:48:50.640

```
document.getElementById("rte-savebar").style.width = "900px"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T14:49:08.677

您应该通过专门访问 width 属性来做到这一点，试试这个：

```
document.getElementById("rte-savebar").style.width="900px"; 
```

# objective-c - 从与 nsView 连接的按钮操作调用 appDelegate 中的方法

> ID：15138412
> 
> 赞同：0
> 
> 时间：2013-02-28T14:47:36.283
> 
> 标签：objective-c, xcode, macos, nsview, nstextfield

这是我的问题。我有一个 NSTextField 连接到我的应用程序委托。然后我的 MainManu.xib 中有一个 CustomView，与我创建的新类“myView”相关联，它是 NSView 的子类。最后是一个触发 myView.h 中声明的动作的按钮。（我从按钮拖放到自定义视图并选择操作 pushFromView）此操作在 myView.m 中以这种方式实现：

```
 -(IBAction)pushFromView:(id)sender{
    [self.myApp getMeFromView];
} 
```

myApp 是 AppDelegate 的一个实例，其中包含 getMeFromView 方法，该方法应该从文本字段中获取文本并记录它。

```
#import "GTAppDelegate.h"

@implementation GTAppDelegate
@synthesize myText;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
}  

-(void)getMeFromView{
    NSLog(@"valuefromView= %d",[myText intValue]);
}
@end 
```

现在，无论何时我按下按钮，它都会触发该方法，但即使文本字段中填充了数字，它也会返回零。相反，如果我创建一个与 appDelegate 中的操作连接的按钮，它可以正常工作。

myApp 的一个实例在 myView 标头和属性中声明。

我有点菜鸟，所以也许我用不恰当的方式解释了自己。我希望你能得到它。在此先感谢您的帮助。

卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:37:02.007

使用只是`[myApp getMeFromView]`代替`[self.myApp getMeFromView]`.

# r - 如何不覆盖R中的文件

> ID：15138414
> 
> 赞同：3
> 
> 时间：2013-02-28T14:47:37.970
> 
> 标签：r

我正在尝试将表格从 R 复制并粘贴到 Excel 中。[考虑上一个问题](https://stackoverflow.com/questions/14942917/array-of-tables)中的以下代码：

```
 data <- list.files(path=getwd())
    n <- length(list)
    for (i in 1:n) 
     {
      data1 <- read.csv(data[i])
      outline <- data1[,2]
      outline <- as.data.frame(table(outline))
      print(outline)   # this prints all n tables
      name <- paste0(i,"X.csv")
      write.csv(outline, name)
      } 
```

此代码将每个表写入单独的 Excel 文件（即“1X.csv”、“2X.csv”等）。有没有办法将每个表“移动”一些行而不是每次都重写前一个表？我也试过这段代码：

```
 output <- as.data.frame(output)
 wb = loadWorkbook("X.xlsx", create=TRUE)
 createSheet(wb, name = "output")
 writeWorksheet(wb,output,sheet="output",startRow=1,startCol=1)
 writeNamedRegion(wb,output,name="output")
 saveWorkbook(wb) 
```

但这不会将数据框完全复制到 Excel 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T15:03:06.383

我认为，正如评论中提到的，要走的路是首先合并 R 中的数据帧，然后将它们写入（一个）输出文件：

```
# get vector of filenames
filenames <- list.files(path=getwd())

# for each filename: load file and create outline
outlines <- lapply(filenames, function(filename) {
  data <- read.csv(filename)
  outline <- data[,2]
  outline <- as.data.frame(table(outline))
  outline
})

# merge all outlines into one data frame (by appending them row-wise)
outlines.merged <- do.call(rbind, outlines)

# save merged data frame
write.csv(outlines.merged, "all.csv") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T01:45:01.040

尽管微软希望你相信，.csv 文件不是 excel 文件，它们是一种常见的文件类型，可以被 excel 和许多其他程序读取。

最好的方法取决于你真正想要做什么。您是否希望所有表格都读入 Excel 中的单个工作表？如果是这样，您可以使用 the或其他函数的`append`参数写入单个文件。`write.csv`或者使用您保持打开的连接，以便附加每个新连接。您可能希望`cat`在每个新表之前放置几个换行符。

您的第二次尝试看起来像是使用 XLConnect 包（但您没有说，所以它可能是别的东西）。我认为这是最好的方法，结果与您的预期有何不同？

# google-apps-script - 从 UiApp 脚本在新窗口中打开模板 html

> ID：15138417
> 
> 赞同：0
> 
> 时间：2013-02-28T14:47:40.597
> 
> 标签：google-apps-script

我有一个在 flextable 中显示图像的 UiApp 脚本；我已经为图像分配了 mousedown 处理程序，以便在单击它时我希望它打开一个模板化的 HTML 页面（在一个新窗口中）。我写了以下代码；它被执行但它不返回任何东西。我应该怎么做才能让包含从分配的 imageurl 加载的图像的项目详细信息页面在新窗口中打开？

这是我的脚本和html代码：

```
 var page = HtmlService.createTemplateFromFile("Item Detail");
  var image = productDetails[i].imageurl;   
  page.imageurl = image;
  Logger.log(productDetails[i].imageurl);
  return page.evaluate();

<img src=<?=imageurl ?> alt="click for more info" height="100%" width="100%"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:35:54.413

您将需要`<img>`用`<a>`标签包围 。

```
<a href="URL_TO_OPEN_IN_NEW_WINDOW" target="_blank"><img ... ></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T21:14:37.923

所以假设你想制作一个可点击的图像。当您单击它时，您希望此图像在新窗口中打开。

```
var anchor = app.createAnchor("<img src='URL_TO_IMAGE' />",
                          true,
                          ScriptApp.getService().getUrl()+"?detailPage="+SOME_ID)
              .setTarget("_blank"); 
```

然后，当您单击该链接时，您的脚本将在另一个窗口中打开。而且，一个 GET 参数将与它一起传递。因此，在您的 doGet(e) 函数中，您可以处理是显示主 UiApp 还是显示 Html 详细信息页面。

```
function doGet(e) {
  if (e.parameter.detailPage) {
    //show the detail page
  } else {
    //show the normal UiApp
  }
} 
```

[阅读此其他答案](https://stackoverflow.com/questions/14914955/how-to-call-google-apps-script-from-web-page/14915184#14915184)的顶部，以更好地了解 GET 参数如何与 GAS 一起使用。

# php - 图像宽度和高度不是我指定的大小

> ID：15138418
> 
> 赞同：1
> 
> 时间：2013-02-28T14:47:55.757
> 
> 标签：php, css

所有，我有以下代码在我的页面上显示图像：

```
$output .= '<div id="bd-flickr">';
    for($i=0; $i<$count_photos; $i++){
        if($xml->channel->item[$i]){
                preg_match( $regx, $xml->channel->item[$i]->description, $matches );
                $img_url = str_replace("_m.jpg", "_z.jpg", $matches[1]);
                $output .= '<div class="bd-flickr-item">';
                $output .= '<a rel="flickr-widget" class="fancybox" title="&lt;a target=&quot;_blank&quot; href=&quot;'.$xml->channel->item[$i]->link.'&quot;&gt;View in Flickr&lt;/a&gt;" href="' . $img_url .'">';
                $output .= '<img src="'.$img_url.'" height="192px" width="192px" alt="'. $xml->channel->item[$i]->title .'" title="'. $xml->channel->item[$i]->title .'">';
                $output .= '</a>';
                $output .= '</div>';
        }
    }
    $output .= '</div><div style="clear:both; float:none"></div>';
    echo $output 
```

我试图指定我希望图像的宽度和高度为 192px X 192px，我认为通过指定它可以实现。虽然图像显示在不同的高度。我确实有一些主题附带的 CSS，这里是 CSS：

```
#bd-flickr {min-height:270px}

.bd-flickr-item {
    width:20%;  
    height:auto;  
    float:left; 
    margin:0!important;
    padding:0!important
}

.bd-flickr-item img{
    -moz-transition: 0.4s;
    -webkit-transition: 0.4s;
    -o-transition: 0.4s;
    transition: 0.4s;
    width:100%; 
    height:auto; 
    margin:0!important;
    padding:0!important; 
    display:block
}

html .bd-flickr-item img{
    box-shadow:none!important;
    -webkit-box-shadow:none!important;
    -moz-box-shadow:none!important;
    -o-box-shadow:none!important;
}

.bd-flickr-item img:hover{
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=50);
    opacity: 0.5;
}

a.bd-flickr-link {
    background:#000000 url(../img/camera.png) no-repeat center center; 
    display:block
} 
```

谁能明白为什么我的图片不是 192px X 192px？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:51:16.483

从您的 CSS 中删除此属性

```
.bd-flickr-item img{
/*width:100%; 
    height:auto; */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T14:51:38.163

看到这个：

```
.bd-flickr-item img{
    -moz-transition: 0.4s;
    -webkit-transition: 0.4s;
    -o-transition: 0.4s;
    transition: 0.4s;

    /* Issue here */
    width:100%; 
    height:auto; 

    margin:0!important;
    padding:0!important; 
    display:block
} 
```

指定了宽度和高度。只需删除它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:00:46.130

**我明白为什么您的图像不会是 192 像素 X 192 像素！**

在来自 javascript 输出的 html 标记中

```
$output .= '<img src="'.$img_url.'" height="192px" width="192px" alt="'. $xml->channel->item[$i]->title .'" title="'. $xml->channel->item[$i]->title .'">';

-->    height="192px" width="192px" 
```

用。。。来代替 ：

```
height="192" width="192" 
```

**为什么 ？**'width' 属性没有有效值：它必须是整数或整数百分比。

之后，从此 .css 选择器中删除宽度和高度

```
.bd-flickr-item img {
    -moz-transition: 0.4s;
    -webkit-transition: 0.4s;
    -o-transition: 0.4s;
    transition: 0.4s;
    /*width:100%; */
    /*height:auto;*/
    margin:0!important;
    padding:0!important; 
    display:block
} 
```

# php - 标题位置不起作用

> ID：15138419
> 
> 赞同：0
> 
> 时间：2013-02-28T14:47:58.003
> 
> 标签：php, html, mysql

我正在创建一个基本的登录和注册页面，并在完成更改密码表单后，我想重定向到 changepassword.php?success。如果进入浏览器，重定向页面可以正常工作，但是在提交表单时，它会重新加载 changepassword.php 页面而不是 ?success 并且从 php 代码块向下的所有内容都不会显示（即表单、右侧列和页脚）。下面是我的 changepassword.php 代码：

```
<!DOCTYPE html>
<html>
<?php 
include ("storescripts/init.php");
protect_page();
include ("includes/overall/head.php");

if (empty($_POST) ===  false){
$required_fields = array('current_password','password','password_again');
foreach ($_POST as $key=>$value) {
    if (empty($value) && in_array($key, $required_fields) == true) {
        $errors[] = 'Fields marked with an asterisk are required';
        break 1;
    }
}
if ($_POST['current_password'] === $member_data['mem_password']) {
    if(trim($_POST['password']) !== trim($_POST['password_again'])){
        $errors[] = 'Your new passwords do not match';
    } else if (strlen($_POST['password']) <6) {
        $errors[] = 'Your password must be at least 6 characters';
    }
} else {
    $errors[] = 'Your current password is incorrect';
}
}
?>
<body>
<?php include ("includes/overall/template_header.php");?>
<div id="mainDivShort">
    <h1>Change Password</h1>
    <div id="divBreak"></div>
    <?php include ("includes/overall/column_left.php"); ?>
    <div id="middleContent">
        <?php
        if (isset($_GET['success']) && empty($_GET['success'])) {
echo 'You have been registered successfully';
} else {

    if (empty($_POST) === false && empty($errors) === true) {
        //echo "**********************";
        change_password($session_mem_id, $_POST['password']);
        header('Location: changepassword.php?success');
        exit();
    } else if (empty($errors) === false) {
        echo output_errors($errors);
    }

    ?>
        <form action="" method="post">
            <ul>
                <li>Current Password*: <br> <input type="password"
                    name="current_password">
                </li>
                <li>New Password*: <br> <input type="password" name="password">
                </li>
                <li>Repeat New Password*: <br> <input type="password"
                    name="password_again">
                </li>
                <li><input type="submit" value="Change">
                </li>
            </ul>
        </form>
        <?php }?>
    </div>
    <?php include ("includes/overall/column_right.php"); ?>
</div>
<?php include ("includes/overall/template_footer.php");?>
</body>
</html> 
```

并且以防万一您需要查看更改密码功能：

```
function change_password($mem_id, $password) {
$mem_id = (int)$mem_id;

mysql_query("UPDATE `members` SET `mem_password` = '$password' WHERE `mem_id` = $mem_id");
} 
```

数据库上的密码更新正常，只是纯粹不会重定向到成功页面。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:56:05.577

标头指令必须位于内容、任何内容、包括换行符、空格、html 等之前……否则发送标头为时已晚。一旦发送了 1 位内容，标头就已经消失了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T14:51:28.850

`header('Location: changepassword.php?success');`输出任何内容后都不能放。重定向也`header`应该包含绝对路径。

# asp.net-mvc-3 - .net mvc 的 JQuery 自动完成问题

> ID：15138420
> 
> 赞同：0
> 
> 时间：2013-02-28T14:48:00.727
> 
> 标签：asp.net-mvc-3, jquery-ui, autocomplete

我在将自动完成功能与我项目中需要的其他 javascript 库结合使用时遇到问题。

当我运行这个简单的示例时，它第一次运行良好。它完美地显示了自动完成窗口，但如果我尝试更改我正在输入的单词，它会在 Chrome 中生成此错误：

未捕获的 ReferenceError：文件 jquery-1.4.4-vsdoc.js:2495 上未定义 pos

这是代码：

```
$(function () {
        var availableTags = [
          "ActionScript",
          "AppleScript",
          "Asp",
          "BASIC",
          "C",
          "C++",
          "Clojure",
          "COBOL",
          "ColdFusion",
          "Erlang",
          "Fortran",
          "Groovy",
          "Haskell",
          "Java",
          "JavaScript",
          "Lisp",
          "Perl",
          "PHP",
          "Python",
          "Ruby",
          "Scala",
          "Scheme"
        ];
        $("#txtPesquisar").autocomplete({
            source: availableTags
        });
    }); 
```

我在我的项目的母版页中引导所有这些 javascript。

我不知道为什么我会收到这个错误。

```
<link href="<%= Url.Content("~/Content/jquery-ui-1.10.1.custom.css") %>" rel="stylesheet" type="text/css" />

<script src="<%= Url.Content("~/Scripts/jquery-1.9.1.js") %>" type="text/javascript"></script>      
<script src="<%= Url.Content("~/Scripts/jquery-1.4.4-vsdoc.js") %>" type="text/javascript"></script>  
<script src="<%= Url.Content("~/Scripts/Utils.js") %>" type="text/javascript"></script>
<script src="<%= Url.Content("~/Scripts/jquery.form.js") %>" type="text/javascript"></script>
<script src="http://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>        

<script src="<%= Url.Content("~/Scripts/jquery-ui.js")%>" type="text/javascript"> </script>
<script src="<%= Url.Content("~/Scripts/JuridicOffice.js") %>" type="text/javascript"></script> 

<script src="<%= Url.Content("~/Scripts/jquery.validate.min.js") %>"  type="text/javascript" ></script>
<%--<script src="<%= Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js") %>"  type="text/javascript" ></script>             
<script src="<%= Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js") %>"  type="text/javascript" ></script>--%>

<script src="<%= Url.Content("~/Uploadify/swfobject.js") %>" type="text/javascript"></script>
<script src="<%= Url.Content("~/Uploadify/jquery.uploadify.v2.1.4.min.js") %>" type="text/javascript"></script>     

<script src="<%= Url.Content("~/Scripts/jgcharts.js") %>" type="text/javascript"></script>    
<script src="<%= Url.Content("~/Scripts/Mascara.js") %>" type="text/javascript"></script>
<script src="<%= Url.Content("~/Scripts/jquery.maskedinput-1.3.js") %>" type="text/javascript"></script>
<script src="<%= Url.Content("~/Scripts/jquery.color.js") %>" type="text/javascript"></script>
<script src="<%= Url.Content("~/Scripts/jquery.Jcrop.min.js") %>" type="text/javascript"></script> 
```

我在论坛里点了一些东西，它可能是一个回发功能，但我不知道如何弄清楚。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:16:57.943

你注意到了吗？文件 vsdoc 它比 jQuery 版本稍旧，即使您应该从运行时版本中删除 vsdoc.js。

如果打开 vsdoc 你可以找到这个注释。

```
 /*
 * This file has been commented to support Visual Studio Intellisense.
 * You should not use this file at runtime inside the browser--it is only
 * intended to be used only for design-time IntelliSense.  Please use the
 * standard jQuery library for all production use.
 *
 * Comment version: 1.4.4a
 */ 
```

# c# - 如何在所有派生类共享的根类中创建一些字典？

> ID：15138423
> 
> 赞同：2
> 
> 时间：2013-02-28T14:48:13.777
> 
> 标签：c#

我有一个抽象类和其他五个继承自它的类。
我想在这个抽象类中保存一个 Dictionary 实例 - 并让所有其他类能够从这个 Dictionary 中添加/删除值。

我宁愿不将此字典定义为“静态”。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:48:49.007

将其定义为

> 受保护的字典d ...

它将对所有子类可见。

static 关键字是错误的选择，因为它定义了一个共享给类的所有实例的字典。这是完全不同的事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:25:35.867

这样做的更好方法可能是拥有一个单独的 Singleton 类来保存您的字典，并使该 Singleton 类成为您的基类的属性。这将使您避免使用静态，同时确保封装字典的单例类的一个实例。使其成为抽象类的受保护成员允许访问包含字典的类的单个实例的所有子类。

# php - php 安全问题 - 文件上传

> ID：15138425
> 
> 赞同：2
> 
> 时间：2013-02-28T14:48:15.227
> 
> 标签：php, security

我的一位客户找我检查并修复被黑的网站。网站是由另一个开发人员开发的，非常缺乏经验的开发人员甚至没有考虑到基本的安全性。

那么问题是不知何故PHP文件被写入图像文件夹。黑客还写了一个 index.html 来显示网站被黑了。当我检查图像文件夹有 777 权限。所以我得出粗略的结论，这是因为文件夹权限。托管支持人员说，一些 PHP 文件的脚本编写不佳，允许任何扩展文件上传到服务器，然后黑客执行文件以获得访问权限或做任何他们想做的事情。

我有几个问题：

*   是否只有通过上传功能才能上传其他PHP文件？由于文件夹权限为 777，是否无法通过其他方式从远程写入文件？
*   Sit 有一些 fckeditors 编辑器和几个上传功能。我检查了它们，有足够的验证，所以当尝试上传图像或 PDF 以外的扩展时，它们只会返回 false 。
*   将文件夹权限设置为较低级别是否可以解决问题？

我要求支持人员更改文件夹权限，这将解决问题，但他说有一些 PHP 文件通过该文件编写了其他 PHP 文件，他希望修复该问题，否则网站无法上线。他说，即使文件夹权限被更改，黑客也可以再次将其更改为 777 并执行他想要的任何操作，因为那个写得不好的 PHP 文件。

我应该如何查找是否存在这样的 PHP 文件？任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:59:35.767

777 意味着*系统上的任何用户*（无论如何都对所有父目录具有执行访问权限）可以向该目录添加任何内容。但是，Web 用户不是系统用户，并且大多数 Web 服务器（包括 Apache）不会让随机客户端直接在其中写入文件。你必须明确告诉服务器允许这样做，我相当肯定这不是发生的事情。

但是，如果您允许任何文件上传，则上传文件夹至少需要 Web 服务器的用户（或网站的用户，如果您使用类似 suPHP 的话）是可写的。如果 Web 服务器可以写入该目录，那么*任何 PHP 代码*都可以写入该目录。您不能将权限设置得足够高以允许上传*，*也不能将权限设置得足够低以阻止 PHP 代码运行，除非使目录只写（这使得它对 fckeditor 等非常无用）。

几乎可以肯定，由于站点本身存在漏洞，因此发生了妥协。可能是文件上传脚本没有正确检查写入的位置，或者脚本盲目地接受要包含的内容的名称。由于 PHP 代码通常以 Web 服务器的用户身份运行，因此它对 Web 服务器具有写访问权限的所有内容具有写访问权限。（也有可能有人通过 FTP 进入，在这种情况下，您最好更改密码。但网络服务器出错的可能性充其量是微乎其微的。）

至于此时该做什么，最好的选择是擦除站点并从备份中恢复——正如多次提到的那样，一旦攻击者获得了在您的服务器上运行的任意代码，就不会有很多你可以再信任了。如果你不能这样做，至少找到任何具有最近修改时间的文件并删除它们。（漏洞利用几乎从来没有经历过那么大的麻烦来掩盖他们的踪迹。）

无论哪种方式，然后设置任何*非上传，非临时，非会话*目录的权限 - 以及所有现有脚本 - 以禁止写入，期间......特别是Web服务器。如果站点的代码以拥有文件的同一用户身份运行，您将希望将 555 用于目录，将 444 用于文件；否则，您可能可以使用 755/644。（Web 服务器只有在配置严重错误的情况下才能编写这些内容，而无能的托管公司很快就会倒闭*。*）

不过，坦率地说，“支持人员”的想法是正确的——我当然不会让一个站点在我的服务器上运行，因为我知道它将执行来自陌生人的任意代码。（即使它不能向本地文件系统写入任何内容，它仍然可以用来对*其他*服务器发起攻击。）目前最好的选择是暂时删除所有上传文件的能力。很明显，有人不知道如何安全地处理文件上传，现在有人知道你很脆弱，你很可能会一直被黑客入侵，直到你找到漏洞并堵住它。

至于要寻找什么......不幸的是，它是半模糊的，因为我们正在谈论单语句级别之上的概念。查找以任何方式从 $_GET、$_POST 或 $_COOKIE 派生的文件名中写入、或写入`include`的任何 PHP 脚本。`require`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:28:10.197

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T14:53:07.510

除非您使用 CGI，否则更改文件夹权限不会解决问题，因为 PHP 可能需要能够写入上传文件夹，而您的 Web 服务器可能需要能够从中读取。检查任何上传文件的扩展名！

（所以不，0777 权限并不意味着任何人都可以上传任何内容。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T15:35:53.270

您已经确定了 2 个问题：权限和缺少扩展检查但是您是否有任何证据表明这些是系统受到威胁的手段？你没有提供任何东西来支持这个断言。

将权限更改为更具限制性的内容不会对上传恶意 PHP 脚本的用户提供任何**保护。**

检查文件的扩展名可能会使将 PHP 代码注入站点变得更加困难，它**不会阻止它**。

从备份恢复可能会删除被破坏的内容，但**不会修复**代码中的漏洞。

你没有你的客户（他们可能为此付钱给你）需要解决这个问题的技能。与在这里阅读一些答案相比，获得这些技能的旅程要长得多（尽管这是一个开始）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T15:01:51.023

正如神秘所提到的，一旦黑客可以在您的服务器上运行代码，那么您必须假设所有文件都具有潜在危险。您不应该尝试自己解决此问题 - 从备份（从客户端或原始开发人员）恢复是解决此问题的唯一安全方法。

准备好备份文件后，删除您网站上的所有内容并上传备份 - 如果它是共享主机，您也应该联系他们，以防其他文件遭到破坏[虽然很少发生]。

# sql-server - 在打开的查询窗口之间导航的 SSMS 快捷方式

> ID：15138426
> 
> 赞同：26
> 
> 时间：2013-02-28T14:48:17.243
> 
> 标签：sql-server, keyboard-shortcuts, ssms, sql-server-2008

我有时会在 SSMS 2008 中打开大量查询窗口。

是否有在打开的查询窗口之间导航的键盘快捷键？转到上一个/下一个打开的查询窗口？

我知道有`Ctrl`+`Tab`可以让您选择一个查询窗口，但它只有在您命名窗口时才有用。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-28T15:05:43.197

**SSMS 2008**

`Ctrl`+`F6`将在两个最近的标签之间切换。老实说，`Ctrl`+ `Tab`/ `Ctrl`+ `Shift`+`Tab`的工作方式类似于下一个/上一个，除了你必须点击`Tab`两次（你可以忽略知道列表中选项卡的名称是什么）。

也就是说，您是否考虑过升级到 SQL Server 2012 Management Studio？它的许多功能都比 2008 版更加完善（您仍然可以管理 2008 版服务器）。您会在这里发现的一个挑战是“下一个”的真正含义是什么？由于您可以撕下标签，拆分 UI，甚至将标签移动到不同的显示器上，我认为“下一个”和“上一个”失去了一点意义，除非您知道它们以什么顺序打开......

**SSMS 2012**

*   `Ctrl`+`F6`将按显示顺序循环显示打开的选项卡，而`Ctrl`+ `Shift`+`F6`将按相反方向循环。
*   `Ctrl`+ `Tab`/ `Ctrl`+ `Shift`+`Tab`将打开一个临时窗口，并允许您按照上次打开的顺序循环打开查询。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-07-09T20:25:19.130

SSMS 的浏览器中的`Ctrl`+等价于下一个选项卡的+ +和上一个选项卡的+ + 。`Tab``Ctrl``Alt``PageDown``Ctrl``Alt``PageUp`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-09T19:32:30.903

这是我的方法，让我更接近编码乌托邦。确保您的 SSMS 查询窗口按名称从左到右排序。SQLQuery1.sql、SQLQuery2.sql 等。这些是 SSMS 在创建这些选项卡时为它们提供的默认名称（通过单击新建查询）。

要更改当前查询窗口选项卡，请按“alt”，然后按“w”，然后按“w”。将显示一个窗口，列出所有打开的查询窗口，按名称排序（它们的排列顺序应该与从左到右排列的顺序相同）。使用向上和向下箭头键突出显示要激活的选项卡，然后按 Enter。您想要的标签现在应该打开了。

这使我可以快速更改查询窗口，同时将手指放在键盘上（减少鼠标使用量）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-15T13:49:27.010

我知道这是一个*非常*古老的线程，但我想我会再添加一个建议，以防其他人遇到这个问题：Redgate 的 SQL 提示带有一个漂亮的“选项卡历史”小程序，它作为按钮添加到工具栏。我知道这意味着您必须离开键盘并伸手去拿鼠标才能访问它，但是界面及其功能是值得的！您不仅可以访问当前打开的选项卡（每个选项卡中代码的可视化迷你预览），还可以访问最近**关闭**的选项卡（是的，如果您不小心关闭了选项卡而不保存您的工作，它可能会为您节省...)

只是我的两分钱。最好的，拉斐尔

# c# - 让 G-WAN 与 Mono 一起工作

> ID：15138434
> 
> 赞同：2
> 
> 时间：2013-02-28T14:48:47.530
> 
> 标签：c#, mono, debian, g-wan

我已按照 G-WAN 站点常见问题解答中的说明阅读并阅读了手册，但我无法让 G-WAN 在我的 Debian 6 (x64) 设置上“看到” Mono 安装。

我已经尝试过推荐的 Mono 版本（3.0.2）和最新的（3.0.4）。

我正在使用最新（今天）版本的 G-WAN。

我错过了一些配置（例如环境变量...）还是需要将 Mono 作为守护程序运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:26:26.533

G-WAN在其`libmono*.so`下搜索`/usr/lib`并动态链接以编译 C# 脚本。

如果您在其他地方安装了 Mono，那么您应该提供链接或在正确的目录中重新构建和安装 Mono（从源代码）（这样做更简单）。

您可以通过运行来验证 Mono 的安装位置：

```
find -L /usr/lib -name 'libmono*.so'
/usr/lib/libmono-2.0.so 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:57:02.313

mono 默认安装在**"/usr/local"**上。

使用编译单声道 3.0.6

```
./configure --prefix=/usr
make
make install 
```

为我工作。它将在**“/usr/lib”上安装 libmono*.so**

# image-processing - 我可以确定 Corona SDK 中图像的平均透明度吗？

> ID：15138438
> 
> 赞同：0
> 
> 时间：2013-02-28T14:48:50.933
> 
> 标签：image-processing, coronasdk, alpha-transparency

使用 Corona SDK，我希望能够确定精灵帧是否为空白，如果是则忽略它。

在我的工作流程中，我使用 perl 脚本从多个单独的图像（使用 ImageMagick 的“蒙太奇”命令行工具）自动创建一堆大小相同的正方形图像/精灵表。

显然，根据原始图像尺寸，最终图像页的最后几帧可能是空白/透明的（换句话说，如果我生成一堆图像页，每个图像页有 4 x 5 帧并且我最初有 57 个图像，我将有 2 张图像表，每张 20 帧，我的最终图像表将有 17 帧，最后一行有 3 个空白帧）。

我不希望我的 Corona 应用程序中的代码依赖于图像/帧的数量等，所以我希望我的代码对我的每个图像表都进行相同的处理（我正在创建一个跨越多个图像/精灵表）。显然我不想在我的动画中显示几个空白帧，所以我的问题是我可以实时处理每一帧以确定它的透明度，或者做一些像素分析，看看我是否需要忽略框架？

也许我让这听起来比实际上更复杂......

## **更新**

好的，更简单的问题：是否可以在 Corona 中访问图像的像素数据以获取 alpha 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:37:08.203

Corona SDK 不允许您访问像素级数据，因此这两个问题的答案都是不，您不能。这是一个经常被问到的功能，但是 Corona SDK 使用 OpenGL 层的方式，使得获取这些信息变得非常困难。

# php - 如何在我的网站上播放视频？

> ID：15138445
> 
> 赞同：1
> 
> 时间：2013-02-28T14:49:09.707
> 
> 标签：php, html, video

我有一个视频网站，用户可以在其中上传视频。问题是上传的视频无法播放。

我试过mp4，avi，但它们不起作用。

```
<video id="myvideo">
<source scr="trial.mp4">
</video> 
```

视频上传到服务器，但没有播放控件。

谁能推荐一些视频播放器，格式转换等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:00:47.393

您有一个错字：
您必须在代码中将“scr”替换为“src”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:51:28.803

[JWPlayer](http://www.longtailvideo.com/jw-player/)是一个很棒的视频播放器，该网站有很多非常有用（而且写得很好）的建议，可以让视频在您的网站上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:07:36.823

编辑： **“视频已上传到服务器，但没有播放控件。”**

如果您使用的是 Video.js 并且没有正确显示任何播放器控件（假设您仍在使用您在回复评论中指定的代码），这很可能是因为您没有包含上面的 CSS 文件video.js 包括，如 Videojs 文档中所述

```
<link href="http://vjs.zencdn.net/c/video-js.css" rel="stylesheet"> 
```

如果这不是问题，并且视频根本没有播放（如您最初所说），那么我可能会想到其他事情。鉴于您是 Chrome 用户，如果您右键单击视频页面，请转到检查元素，然后单击控制台选项卡。

如果您与发送的错误 Mime 类型有任何关系，那么此处的信息可能会有所帮助：

[Safari 和 Firefox 中的 HTML5 视频（mp4 和 ogv）问题 - 但 Chrome 都很好](https://stackoverflow.com/questions/2643447/html5-video-mp4-and-ogv-problems-in-safari-and-firefox-but-chrome-is-all-goo)

具体[这个](https://stackoverflow.com/a/7727768/2119914)回复

如果没有进一步的解释/信息，我不确定我是否可以提供帮助。

* * *

指定视频类型。

例如

```
<source scr="trial.mp4" type="video/mp4"> 
```

# python - 使用 @property 在 Python 中构建一个类

> ID：15138451
> 
> 赞同：1
> 
> 时间：2013-02-28T14:49:25.110
> 
> 标签：python, class, optimization, coding-style

我不清楚使用`@property`（优点和缺点）。我想问一些使用在[Martijn](https://stackoverflow.com/questions/15136735/resolving-how-to-give-an-attribute-in-a-class-in-python)帮助下构建的类的示例。

数据（文本格式）始终具有`x`、`y`和`z`来表征一个点（文本文件的 1、2 和 3 列）。有时我有一个“ `classification`”（第 4 列）属性**和/或** `location`（第 5 列）。取决于文件的处理方式（有时更多属性）。

```
class Point(object):
    __slots__= ("x", "y", "z", "data", "_classification")
    def __init__(self, x, y, z):
        self.x = float(x)
        self.y = float(y)
        self.z = float(z)
        self.data = [self.x,self.y,self.z]

    @property
    def classification(self):
        return getattr(self, '_classification', None)

    @classification.setter
    def classification(self, value):
        self._classification = value
        if value:
            self.data = self.data[:3] + [value]
        else:
            self.data = self.data[:3]

    def __len__(self):
        return len(self.data)

p = Point(10,20,30)
len(p)
3
p.classification = 1
len(p)
4
p.data
[10.0, 20.0, 30.0, 1] 
```

我希望添加`location`when`classification`已经设置，以了解使用`@property`. 我尝试使用以下代码，但我不知道这是否是 pythonic：

```
class Point(object):
    __slots__= ("x", "y", "z", "data", "_classification",'_location')
    def __init__(self, x, y, z):
        self.x = float(x)
        self.y = float(y)
        self.z = float(z)
        self.data = [self.x,self.y,self.z]

    @property
    def classification(self):
        return getattr(self, '_classification', None)

    @classification.setter
    def classification(self, value):
        self._classification = value
        if value:
            self.data = self.data[:3] + [value]
        else:
            self.data = self.data[:3]

    @property
    def location(self):
        return getattr(self, '_location', None)

    @location.setter
    def location(self, value):
        self._location = value
        if value:
            self.data = self.data[:4] + [value]
        else:
            self.data = self.data[:4]

    def __len__(self):
        return len(self.data)

p = Point(10,20,30)
p.classification = 1
p.data
[10.0, 20.0, 30.0, 1]
p.location = 100
p.data
[10.0, 20.0, 30.0, 1, 100]

p = Point(10,20,30)
p.location = 100
p.data
[10.0, 20.0, 30.0, 100] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:29:31.280

因此，您的课程有效，您只是在询问它是否是 Pythonic。我不是专家，但我会向您[推荐 Python 之禅](http://www.python.org/dev/peps/pep-0020/)：

> 显式优于隐式。

对我来说，当您设置一个属性（位置、分类）并最终默默地修改其他属性时，这是隐式的，而不是显式的。我认为一个更好、更清晰理解的用例是拥有类似`assign_location`和/或`assign_classification`方法的东西。这样，使用 API 的人就可以知道他不仅仅是在设置一个属性，而是在调用一个函数，该函数有一个解释其作用的文档字符串。

至于房产的哲学是什么，我不确定它的包含是否基于哲学。物业装饰师所做的就是摆脱这样难看的东西：

```
class Foo:
    def __getattr__(self, attr):
        if attr == 'location':
            ...
        elif attr == 'classification':
            ... 
```

我非常喜欢的一种用途是使用属性来确保线程安全。例如：

```
class Foo(object):
    def __init__(self):
        self.lock = threading.Lock()
    @property
    def classification(self):
        return self.classification

    @classification.setter
    def classification(self, value):
        with self.lock:
            (something else thread-protected)
            self.classification = value 
```

最后，还有一条建议。除非您知道为什么要使用插槽，否则不要。除非您知道为什么*需要*插槽，否则您不需要它们。

# ruby-on-rails-3 - 节点加密和 Ruby Open SSL

> ID：15138452
> 
> 赞同：1
> 
> 时间：2013-02-28T14:49:27.283
> 
> 标签：ruby-on-rails-3, node.js, openssl

我在 ruby​​ 应用程序上加密数据并在节点服务器上解密，但我遇到了一些错误，我在节点服务器上复制了 ruby​​ 代码并注意到这 2 个库的工作方式不同

```
# Node crypto

var cipher = crypto.createCipher("aes256", key);
var key = crypto.createHash("sha512").update("foo", "utf8").digest("hex");
var crypt = cipher.update("bar", "utf8", "base64");
crypt += cipher.final("base64");
return crypt;

Result: BTK+S8ogCW7cK7NlA5RUJw==

# Ruby OpenSSL
cipher = OpenSSL::Cipher::Cipher.new('aes256').encrypt
cipher.key = Digest::SHA512.hexdigest("foo")
encrypted = cipher.update("bar".to_s)
encrypted += cipher.final
return Base64.encode64(encrypted)

Result: fnRH+EczVbJWwrPSITkhuw== 
```

我怎样才能解决这个问题

# ruby-on-rails-3 - 带有数组的 Rails 3 HABTM 查询，需要 AND 不需要 OR/IN

> ID：15138460
> 
> 赞同：0
> 
> 时间：2013-02-28T14:49:37.530
> 
> 标签：ruby-on-rails-3, activerecord

假设我有两个具有 HABTM 关系的模型。师生。这是我目前正在工作的示例：

```
student_ids = [1,2,3,4]

Teacher.joins(:students).where("students.id" => student_ids) 
```

问题是这将返回所有具有这些学生 id 的所有 Teacher 对象，但不需要所有这些对象：

```
SELECT `teachers`.* FROM `teachers` INNER JOIN `students_teachers` ON `students_teachers`.`teacher_id` = `teachers`.`id` INNER JOIN `students` ON `students`.`id` = `students_teachers`.`student_id` WHERE `students`.`id` IN (1, 2, 3, 4) 
```

我有两种情况，其中一种是 OR 条件，上面处理得很好，因为我只需要找到 Student.id 1 OR 2 OR 3 OR 4 的教师。另一种是 AND，我需要确保返回的教师包括所有 student_id，因此 Student.id 为 1 AND 2 AND 3 AND 4 的教师。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:00:35.620

您可以执行以下操作：

```
teachers = nil # so it wont be used in the first pass
Student.include(:teachers).where(id: student_ids).each do |student| 
  teachers = (teachers || s.teachers) & s.teachers
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:04:22.327

我会使用包含

这里的例子：

```
 clients = Client.includes(:address).limit(10) 
```

这就是会发生的事情：

```
SELECT * FROM clients LIMIT 10
SELECT addresses.* FROM addresses
WHERE (addresses.client_id IN (1,2,3,4,5,6,7,8,9,10)) 
```

你可以在这里读更多关于它的内容

[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

# html - 如何始终检测浏览器对 HTML5 搜索输入的支持？

> ID：15138472
> 
> 赞同：3
> 
> 时间：2013-02-28T14:49:59.767
> 
> 标签：html, cross-browser, internet-explorer-10, html-input, browser-feature-detection

我在需要在多个浏览器中工作的 HTML 5 页面上有一个搜索输入：

```
<input type="search" placeholder="type here..." /> 
```

我通过查看浏览器是否将其呈现为`search`输入或常规来检测浏览器是否支持搜索`text`：

```
var supportsHtml5Search = !!(inputDomElement.type !== 'text');
if (supportsHtml5Search) {
    inputDomElement.addEventListener('search', searchFunction);
}
else {
    // This browser doesn't support onsearch event, so handle keyup instead
    inputDomElement.addEventListener('keyup', searchFunction);
} 
```

这很好用——Chrome 和 Safari 使用了该`onsearch`事件（当它们点击清除`X`图标时也会触发），而 IE 使用了该`keyup`事件（此处未显示一些额外的检查）。

然而，这似乎在 IE10 中被破坏了，它显示 a`search`与 an 完全相同`<input type="text" />`（如 IE9 及更低版本）并`search`作为类型返回（如 Chrome/Webkit），但不会触发`onsearch`事件。

有没有更好的方法来检测搜索输入支持？

嗅探此功能支持的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T17:45:41.137

[本文](http://perfectionkills.com/detecting-event-support-without-browser-sniffing/)描述了一种检测事件支持本身的强大方法 - 因为当它与功能支持不同时，您的情况又是另一种情况。

基本上，必须测试相应元素的相应属性（例如，`onsearch`对于`search`事件）。像...

```
'onsearch' in document.documentElement; // true in Chrome, false in Firefox/Opera 
```

文章中指出，如果在错误的元素上完成检查，Firefox 将失败，但我实际上发现只有 Opera 的行为是这样的：

```
'onchange' in document.documentElement; // false in Opera, true in Firefox/Chrome
'onchange' in document.createElement('input'); // true in Opera too 
```

作为最后的手段，可以尝试为这个元素分配一个处理程序，然后再次检查这个属性：

```
var el = document.createElement('input'); 
el.setAttribute('onsearch', 'return;'); 
typeof el.onsearch; // 'function' in Chrome, 'undefined' in Firefox/Opera 
```

# c# - 无法在运行时在 webbrowser 控件中设置 Url 属性

> ID：15138475
> 
> 赞同：1
> 
> 时间：2013-02-28T14:50:05.837
> 
> 标签：c#, winforms, webbrowser-control

我的 Winform 应用程序中有一个`webbrowser`控件。

以下区域属于代码示例的划分。

**区域 1** 当前加载的 url 页面是“ [http://MyWebsite.com](http://MyWebsite.com) ”。我正在使用代码单击网页中的链接（例如“关于我们”）。此点击将带我到新的 url 页面（“ [http://MyWebsite.com/About_Us](http://MyWebsite.com/About_Us) ”）。在导航事件中，我正在记录这个新网址。

**区域 2** 现在我想获取这个新 url 的所有元素并单击一个新链接。但不知道该怎么做。在区域 2 中，我还将新 url 分配给 webbrowser 对象。但实例中没有任何反映。`webbrowser.url`仍然包含以前的 url 路径。

我有以下按钮单击代码：

```
 private void Button1Click(object sender, EventArgs e)
    {
        // Region 1---------------------------------------------
        HtmlElementCollection links = webBrowser1.Document.GetElementsByTagName("A");
        foreach (HtmlElement link in links)
        {
            if (link.InnerText != null && link.InnerText.Equals("Click to view magic"))
            {
                link.InvokeMember("Click");
                break;
            }
        }
        // EndRegion---------------------------------------------

        // Region 2---------------------------------------------
        webBrowser1.Url = new Uri(_url.AbsoluteUri, UriKind.Absolute);
        webBrowser1.Navigate(_url); //New Edit

        links = webBrowser1.Document.GetElementsByTagName("input");
        foreach (HtmlElement link in links)
        {
            if ((link.GetAttribute("Name") == "BooHoo"))
            {
                link.InvokeMember("Click");
                break;
            }
        }
        // EndRegion---------------------------------------------
    }

    private void WebBrowser1Navigating(object sender, WebBrowserNavigatingEventArgs e)
    {
        _url = e.Url;
    } 
```

谁能帮我做到这一点。这个问题可能不是很清楚。如果您需要更多详细信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:18:26.740

所以这有点棘手，否则我很粗心。我在调试模式下观察属性值。后来我注意到，在按下`F5`Visual Studio（继续调试）并运行所有方法后，`webbrowser`显示更改的值。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-13T08:13:16.003

您需要订阅 Navigated 事件，因为 WebBrowser 异步工作。

private void webBrowser1_Navigated(object sender, WebBrowserNavigatedEventArgs e) { --Do Something Here.... }

# java - 运行 Jenkins 插件的 JDOM NoClassDefFoundError

> ID：15138477
> 
> 赞同：1
> 
> 时间：2013-02-28T14:50:21.073
> 
> 标签：java, maven, plugins, jenkins, stack-trace

我正在编写一个使用我自己的 jar 的 Jenkins 插件。最后一个需要 JDOM。所以，我的 POM 中有 2 个依赖项：

*   我自己的使用 JDOM 的 JAR
*   JDOM

它成功构建（`mvn clean install`）但在运行期间，我遇到了这个错误：`org.jdom.JDOMException: java.lang.NoClassDefFoundError: org/jdom/Parent`.

[在这里](http://jenkins.361315.n4.nabble.com/Jenkins-plugin-and-External-libraries-td3433299.html)，[这里](http://jenkins.361315.n4.nabble.com/jaxen-JDOM-classloading-issues-td393493.html)和[这里](http://jenkins.361315.n4.nabble.com/classloading-issues-with-hpi-plugin-td369572.html)问，没有解决方案。

JDOM jar 确实存在于 HPI 中：`WEB-INF\lib\jdom-1.0.jar`. 我也尝试过使用 Tomcat 运行 Jenkins。而且，我尝试在我的 POM 中将JDOM 配置为[掩码类：](https://jenkins-ci.org/maven-hpi-plugin/run-mojo.html#maskClasses)

```
<build>
  <plugins>
    <plugin>
      <groupId>org.jenkins-ci.tools</groupId>
      <artifactId>maven-hpi-plugin</artifactId>
      <version>1.94</version>
      <configuration>
        <maskClasses>org.jdom.</maskClasses> <!-- HERE -->
        <pluginFirstClassLoader>true</pluginFirstClassLoader>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

没有成功。

* * *

### 我的插件的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>org.jenkins-ci.plugins</groupId>
    <artifactId>plugin</artifactId>
    <version>1.500</version><!-- which version of Jenkins is this plugin built against? -->
  </parent>

  <groupId>***</groupId>
  <artifactId>***</artifactId>
  <version>1.0</version>
  <packaging>hpi</packaging>

  <!-- get every artifact through repo.jenkins-ci.org, which proxies all the artifacts that we need -->
  <repositories>
    <repository>
      <id>repo.jenkins-ci.org</id>
      <url>http://repo.jenkins-ci.org/public/</url>
    </repository>
  </repositories>
  <pluginRepositories>
    <pluginRepository>
      <id>repo.jenkins-ci.org</id>
      <url>http://repo.jenkins-ci.org/public/</url>
    </pluginRepository>
  </pluginRepositories>
  <dependencies>
    <dependency>
      <groupId>com.***</groupId>
      <artifactId>***</artifactId>
      <version>12.2.01</version>
    </dependency>
    <dependency>
        <groupId>jdom</groupId>
        <artifactId>jdom</artifactId>
        <version>1.0</version>
    </dependency>
  </dependencies>
</project> 
```

* * *

### mvn 依赖：分析

```
[WARNING] Used undeclared dependencies found:
[WARNING]    org.mortbay.jetty:servlet-api:jar:2.5-20081211:test
[WARNING]    commons-lang:commons-lang:jar:2.6:provided
[WARNING]    org.kohsuke.stapler:json-lib:jar:2.1-rev7:provided
[WARNING]    commons-io:commons-io:jar:1.4:provided
[WARNING]    org.jvnet.hudson.dom4j:dom4j:jar:1.6.1-hudson-3:provided
[WARNING]    org.kohsuke.stapler:stapler:jar:1.199:provided
[WARNING] Unused declared dependencies found:
[WARNING]    jdom:jdom:jar:1.0:compile
[WARNING]    org.jenkins-ci.main:jenkins-war:war:1.500:test
[WARNING]    org.jenkins-ci.main:ui-samples-plugin:jar:1.500:test
[WARNING]    javax.servlet:servlet-api:jar:2.4:provided
[WARNING]    org.codehaus.mojo:animal-sniffer-annotations:jar:1.9:provided
[WARNING]    junit:junit:jar:3.8:test 
```

* * *

### 堆栈跟踪

```
org.jdom.JDOMException: java.lang.NoClassDefFoundError: org/jdom/Parent: org/jdom/Parent
        at org.jdom.xpath.XPath.newInstance(XPath.java:139)
        at com.***.util.IOFile.scriptBlock(IOFile.java:449)
        at com.***.util.IOFile.scriptBlock(IOFile.java:502)
        at com.***.util.IOFile.createFileFromTemplate(IOFile.java:211)
        at com.***.util.IOFile.createFileFromTemplate(IOFile.java:176)
        at com.***.delivery.task.BuildFromTemplates.execute(BuildFromTemplates.java:89)
        at com.***.delivery.DeliveryThread.integrateSuite(DeliveryThread.java:1586)
        at com.***.delivery.DeliveryThread.run(DeliveryThread.java:363)
        at com.***.pmj.DeliveryBuilder.perform(DeliveryBuilder.java:303)
        at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
        at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:814)
        at hudson.model.Build$BuildExecution.build(Build.java:199)
        at hudson.model.Build$BuildExecution.doRun(Build.java:160)
        at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:593)
        at hudson.model.Run.execute(Run.java:1568)
        at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
        at hudson.model.ResourceController.execute(ResourceController.java:88)
        at hudson.model.Executor.run(Executor.java:237)
Caused by: java.lang.NoClassDefFoundError: org/jdom/Parent
        at org.jaxen.jdom.JDOMXPath.<init>(JDOMXPath.java:91)
        at org.jdom.xpath.JaxenXPath.setXPath(JaxenXPath.java:281)
        at org.jdom.xpath.JaxenXPath.<init>(JaxenXPath.java:99)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        at org.jdom.xpath.XPath.newInstance(XPath.java:129)
        ... 17 more
Caused by: java.lang.ClassNotFoundException: org.jdom.Parent
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at winstone.classLoader.WebappClassLoader.loadClass(WebappClassLoader.java:83)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 25 more
Caused by: java.lang.NoClassDefFoundError: org/jdom/Parent
        at org.jaxen.jdom.JDOMXPath.<init>(JDOMXPath.java:91)
        at org.jdom.xpath.JaxenXPath.setXPath(JaxenXPath.java:281)
        at org.jdom.xpath.JaxenXPath.<init>(JaxenXPath.java:99)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        at org.jdom.xpath.XPath.newInstance(XPath.java:129)
        at com.***.util.IOFile.scriptBlock(IOFile.java:449)
        at com.***.util.IOFile.scriptBlock(IOFile.java:502)
        at com.***.util.IOFile.createFileFromTemplate(IOFile.java:211)
        at com.***.util.IOFile.createFileFromTemplate(IOFile.java:176)
        at com.***.delivery.task.BuildFromTemplates.execute(BuildFromTemplates.java:89)
        at com.***.delivery.DeliveryThread.integrateSuite(DeliveryThread.java:1586)
        at com.***.delivery.DeliveryThread.run(DeliveryThread.java:363)
        at com.***.pmj.DeliveryBuilder.perform(DeliveryBuilder.java:303)
        at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
        at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:814)
        at hudson.model.Build$BuildExecution.build(Build.java:199)
        at hudson.model.Build$BuildExecution.doRun(Build.java:160)
        at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:593)
        at hudson.model.Run.execute(Run.java:1568)
        at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
        at hudson.model.ResourceController.execute(ResourceController.java:88)
        at hudson.model.Executor.run(Executor.java:237)
Caused by: java.lang.ClassNotFoundException: org.jdom.Parent
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at winstone.classLoader.WebappClassLoader.loadClassmaven (WebappClassLoader.java:83)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 25 more
Caused by: java.lang.NoClassDefFoundError: org/jdom/Parent
        at org.jaxen.jdom.JDOMXPath.<init>(JDOMXPath.java:91)
        at org.jdom.xpath.JaxenXPath.setXPath(JaxenXPath.java:281)
        at org.jdom.xpath.JaxenXPath.<init>(JaxenXPath.java:99)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        at org.jdom.xpath.XPath.newInstance(XPath.java:129)
        at com.***.util.IOFile.scriptBlock(IOFile.java:449)
        at com.***.util.IOFile.scriptBlock(IOFile.java:502)
        at com.***.util.IOFile.createFileFromTemplate(IOFile.java:211)
        at com.***.util.IOFile.createFileFromTemplate(IOFile.java:176)
        at com.***.delivery.task.BuildFromTemplates.execute(BuildFromTemplates.java:89)
        at com.***.delivery.DeliveryThread.integrateSuite(DeliveryThread.java:1586)
        at com.***.delivery.DeliveryThread.run(DeliveryThread.java:363)
        at com.***.pmj.DeliveryBuilder.perform(DeliveryBuilder.java:303)
        at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
        at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:814)
        at hudson.model.Build$BuildExecution.build(Build.java:199)
        at hudson.model.Build$BuildExecution.doRun(Build.java:160)
        at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:593)
        at hudson.model.Run.execute(Run.java:1568)
        at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
        at hudson.model.ResourceController.execute(ResourceController.java:88)
        at hudson.model.Executor.run(Executor.java:237)
Caused by: java.lang.ClassNotFoundException: org.jdom.Parent
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at winstone.classLoader.WebappClassLoader.loadClass(WebappClassLoader.java:83)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 25 more 
```

如果您需要更多信息，请在评论中告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:01:10.993

**临时解决方法：**

令人惊讶的是，将 JDOM JAR 添加`jdom-1.0.jar`到 Jenkins 库文件夹`~\.jenkins\war\WEB-INF\lib\`中解决了这个问题！

# asp.net-mvc - 如何根据数组的长度构建参数？

> ID：15138478
> 
> 赞同：0
> 
> 时间：2013-02-28T14:50:20.460
> 
> 标签：asp.net-mvc, jquery

```
function BuildParams(arr)
{

// arr is an Array
// how to build params based on the length of the array?
// for example when arr.Length is 3 then it should build the below:

var params = {                       
                        'items[0]' : arr[0],       
                        'items[1]' : arr[1],
                        'items[2]' : arr[2]
             },

return params;

} 
```

然后我希望能够将它发送到我的 ajax 获取：

```
var arr = ['Life', 'is', 'great'];

 $.get('/ControllerName/ActionName', BuildParams(arr))
                .done(function(data, status) {
                    alert("Data: " + data + "\nStatus: " + status);
                })
                .fail(function(data) {
                    alert(data.responseText);
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:55:46.917

```
var result = {}
jQuery.each(['Life', 'is', 'great'], function(index, value){
    result['items[' + index + ']'] = value; 
}); 
```

[jQuery](http://api.jquery.com/jQuery.each/) .每个：

> 通用迭代器函数，可用于无缝迭代对象和数组。具有长度属性的数组和类数组对象（例如函数的 arguments 对象）通过数字索引进行迭代，从 0 到 length-1。其他对象通过其命名属性进行迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:53:39.633

只需遍历数组，将数组中的每个元素添加为`params`对象的新属性：

```
var params = {}; // start with an empty object
for(var i = 0; i < arr.length; i++) {
    params["items[" + i + "]"] = arr[i];
}

return params; // return the populated params object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:10:54.407

更改`BuildParams(arr)`为：

```
{items: arr} 
```

jQuery 将正确地将对象序列化为查询字符串，包括带有数组项的对象。

# php - 我不知道如何使这个 php 表单工作

> ID：15138480
> 
> 赞同：-1
> 
> 时间：2013-02-28T14:50:26.297
> 
> 标签：php, forms, simple-form

我不知道如何使这个简单的 PHP 表单工作。我做错了什么？

```
 <?php
$first = "firstNumber";
$second = "secondNumber";
$second * $first = "calc";
$calc = "calc";
echo("" . $_GET['$calc'] . "<br />\n");
?>

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body>
        <form action="new.php" method="get">
        <input type="text" name="firstNumber" id="first">
        <input type="text" name="secondNumber" id="second">
        <input style="background-color: #0094ff;" type="submit" name="calc" value="שלח" id="second">
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T14:53:29.213

## 简而言之

我猜你想要类似的东西

```
<?php
$first = $_GET["firstNumber"];
$second = $_GET["secondNumber"];
$calc = $second * $first;
echo $calc . "<br />";
?> 
```

## 展开

但是完整，因为如果您运行此程序，您会收到警告，因为您没有发送表单

```
<?php
   if(isset($_GET['calc'])) {
      $first = $_GET["firstNumber"];
      $second = $_GET["secondNumber"];
      $calc = $second * $first;
      echo $calc . "<br />";
   }
?>

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body>
        <form action="new.php" method="get">
        <input type="text" name="firstNumber" id="first">
        <input type="text" name="secondNumber" id="second">
        <input style="background-color: #0094ff;" type="submit" name="calc" value="שלח" id="second">
        </form>
    </body>
</html> 
```

## 例子

[http://codepad.viper-7.com/LZ7phd](http://codepad.viper-7.com/LZ7phd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:52:57.393

就个人而言，我保持输入字段的名称和输入字段的 id 相同。这可能对您有帮助，也可能对您没有帮助。

```
<form action="new.php" method="get">
    <input type="text" name="firstNumber" id="firstNumber">
    <input type="text" name="secondNumber" id="secondNumber">
    <input style="background-color: #0094ff;" type="submit" name="calc" value="שלח" id="second">
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:54:36.310

`$_GET['$calc']`在这里什么都不代表。您必须使用`$_GET['firstNumber']`和`$_GET['secondNUmber']`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T14:54:38.023

您不能使用 的`id`属性`input`来调用这些字段的值。您必须使用`$_GET`和输入字段的**名称**。您还错误地分配了变量：

```
<?php
$first = $_GET[firstNumber];
$second = $_GET[secondNumber];
$calc = $second * $first;
echo $calc . "<br />\n";
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T14:55:44.237

您没有从`$_GET`流中提取参数：

```
$first = $_GET['firstNumber'];
$second = $_GET['secondNumber'];
$calc = $first * $second; 
```

您的所有字段都在`$_GET`流中传递。

`$_GET['calc']`顺便说一句，实际上是您的提交按钮，而不是您的计算变量。

# php - 数据库设计/ERD - 测验引擎

> ID：15138482
> 
> 赞同：2
> 
> 时间：2013-02-28T14:50:35.363
> 
> 标签：php, mysql, database, database-design, erd

自从我开始上学以来，我就一直使用这个网站作为一个很好的资源——但我以前从来没有遇到过这么具体的问题，我希望能得到一些帮助。在搞清楚数据库结构方面，我从来都不是最好的，我的任务是创建一个具有一些相当具体规范的 PHP/MySQL 测试引擎。

所以你可以更好地理解我在这里的目的 - 我试图考虑以下几点：

*   需要管理员和学生登录，并提供不同级别的访问权限。
*   管理员应该能够构建一个或多个测试并将其分配给一个或多个学生。
*   对于管理员在测试中建立的每个问题，管理员应该能够分配一个分值。
*   测试应该能够提出一个或多个问题。
*   您的应用程序应支持三种基本问题类型：对错题、多项选择题和填空题。
*   最终结果将显示总分，以及学生对每个问题的回答。
*   学生应该能够看到他们有权访问的唯一测试的最终结果。
*   管理员应该看到来自多个学生的测试结果。
*   学生不得重考相同的考试。

大多数情况下，我正在尝试处理基本结构。一开始我有五张桌子，我将问题/答案部分压缩到一张桌子上——请原谅我在这里切换关系的糟糕尝试，因为我有 20 种不同的感觉：

![](../Images/ce4f80f0bb0036b13d390453f7da7aa2.png)

我在正确的轨道上吗？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:56:46.173

N-1 数据库设计的一个很好的经验法则。对于所有具有关系的表，您应该有 N-1 个关系（其中 N 是表的数量）。带有循环引用的表是禁止的。将作为安全组件并仅查看测试/问题/答案，您需要一个具有一些基本对象的设计：

1.  管理员（或教师）表
2.  测试台
3.  学生桌
4.  问题表

您没有在问题中提到它，但是如果您希望每个测试都与老师教授的课程相关联，那么您也需要它。使用这四个或五个表，您应该能够创建您的关系。提示：大多数这些关系是多对多的，因此需要一个外部参照表来解决这个问题。发回你对此做了什么，我们可以看看接下来会发生什么。

# opengl - VBO等使用的“OpenGL内存”在哪里以及是什么

> ID：15138483
> 
> 赞同：6
> 
> 时间：2013-02-28T14:50:36.173
> 
> 标签：opengl, graphics, opengl-es, gpu

我正在学习如何使用 VBO，正如书中所说，

> “...您可以通过将顶点数据移动到 GPU 上的 OpenGL 内存来释放 CPU 内存。”

那么，GPU 在这方面究竟能处理什么？假设“OpenGL 内存”可以存储数百万个多边形的顶点数据是否可以接受？移动设备中的 GPU 怎么样？

虽然开发人员习惯于对 CPU 的内存限制有一个参考框架，但学习 OpenGL 部分具有挑战性，因为我不太了解 GPU 以及对它们的硬件有什么期望。所以当我读到像上面这样含糊不清的陈述时，我会感到紧张。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T15:13:49.193

OpenGL 有一个抽象的设备和内存模型。从技术上讲，在 OpenGL 的世界中，没有 CPU 和 GPU 内存，而是*客户端*和*服务器*内存。OpenGL 缓冲区对象位于服务器端。服务器，这只是意味着 OpenGL 驱动程序抽象出来的所有内容。如果像缓存一样的 GPU 内存不足，OpenGL 驱动程序完全可以将数据从 GPU 交换到 CPU。因此，你的书说：

> > “...您可以通过将顶点数据移动到 GPU 上的 OpenGL 内存来释放 CPU 内存。”

不完全正确，因为 OpenGL 缓冲区对象中的数据很可能驻留在 CPU 内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T16:08:53.173

规格要求*最低*，但总的来说，GPU 内存量是相当广泛的可用信息，您在购买 PC 时肯定会注意到（被卖家夸大了）。但是，正如@datenwolf 所说，您无法真正知道数据的实际位置；重要的是您可以销毁临时缓冲区。

无论使用何种技术，您都应该考虑目标硬件的功能。

# sql-server - 参数化 SQL 查询抛出错误 - 语法不正确？

> ID：15138484
> 
> 赞同：0
> 
> 时间：2013-02-28T14:50:37.290
> 
> 标签：sql-server, vb.net, parameters

我将 SQL 和一组参数（从用户输入中捕获）传递给 OleDbDataAdapter，如下所示：

```
Dim sql As New StringBuilder
Dim theparams As String(,)
sql.Append(" select distinct acc.?,  ")
sql.Append(" isnull(acc.?, acc.?) ?, ")
sql.Append( _
    "    Case when ptree.brandid=220 then 99 else ptree.brandgroupid end brandgroupid, Case when ptree.brandid=220 then 'Multibrand Prepacks' else isnull(ptree.brandgroupname,'1') end brandgroupname, isnull(ptree.brandgroup2,'1') brandgroup2 , ptree.brandgroup3, ptree.brandid, ptree.brandname  ")
sql.Append(" from ")
sql.Append(" (select acc.?,  ")
sql.Append(" acc.? from ")
sql.Append(" vw_ACCOUNT_TREE acc")
sql.Append(" UNION")
sql.Append(" SELECT 'Unknown','Unknown'")
sql.Append(" ) acc")
sql.Append(" CROSS JOIN vw_Product_tree ptree  ")
sql.Append(" WHERE (BRANDGROUPNAME <> 'Unknown' or  ptree.brandid=220)  ")
sql.Append(" and brandenabled=1  ")

theparams = New String(5, 2) {}
theparams(0, 0) = "@0"
theparams(0, 1) = Level
theparams(0, 2) = "OleDbType.String"
theparams(1, 0) = "@1"
theparams(1, 1) = Level + "Description"
theparams(1, 2) = "OleDbType.String"
theparams(2, 0) = "@2"
theparams(2, 1) = Level
theparams(2, 2) = "OleDbType.String"
theparams(3, 0) = "@3"
theparams(3, 1) = Level + "Description"
theparams(3, 2) = "OleDbType.String"
theparams(4, 0) = "@4"
theparams(4, 1) = Level
theparams(4, 2) = "OleDbType.String"
theparams(5, 0) = "@5"
theparams(5, 1) = Level + "Description"
theparams(5, 2) = "OleDbType.String" 
```

然后我将 SQL 和参数数组传递给以下方法，该方法应创建一个数据表：

```
Public Function GetTable(ByVal sql As String, ByVal qParameters(,) As String) As DataTable
    Dim dt As DataTable = New DataTable()
    Try
        If sql.Length > 0 Then
            If ConnectToDB() Then
                Using oDa As New OleDbDataAdapter(sql, _conn)
                    If Not qParameters.GetValue(i, 0) Is Nothing Then
                        For i As Integer = 0 To (qParameters.Length / 3 - 1)
                            oDa.SelectCommand.Parameters.AddWithValue(qParameters(i, 0), qParameters(i, 1))
                            oDa.SelectCommand.Parameters(qParameters(i, 0)).OleDbType = GetOleParameterType(qParameters(i, 2))
                        Next
                    End If
                    Using oDs As New DataSet
                        oDa.Fill(oDs)
                        dt = oDs.Tables(0)
                    End Using
                End Using
            End If

        End If
    Catch ex As Exception
        _error = "Exception in GetTablewithParameters ~ " & ex.Message & " ~ " & sql
    End Try
    Return dt
End Function 
```

但是，它捕获了以下异常：

```
Line 1: Incorrect syntax near ')'.
Line 1: Incorrect syntax near '@P5'.
Line 1: Incorrect syntax near '@P1'. 
```

我的代码有什么问题？如果我用实际字符串替换参数并删除 each 和 every 的打开和关闭`sql.Append()`，则查询在 SQL Server Management Studio 中运行良好。我是否错误地使用了参数？

编辑：更多定义的错误：

```
Line 1: Incorrect syntax near '@P1'.
Line 8: Incorrect syntax near '@P5'.
Line 12: Incorrect syntax near ')'. 
```

这是按行分解的代码：

```
 1\.  select distinct acc.?,  
 2\.  isnull(acc.?, acc.?) ?, 
 3\.  Case when ptree.brandid=220 then 99 else ptree.brandgroupid end brandgroupid, 
 4\.  Case when ptree.brandid=220 then 'Multibrand Prepacks' 
 5\.  else isnull(ptree.brandgroupname,'1') end brandgroupname, isnull(ptree.brandgroup2,'1') 
 6\.  brandgroup2 , ptree.brandgroup3, ptree.brandid, ptree.brandname  
 7\.  from 
 8\.  (select acc.?,  
 9\.  acc.? from 
 10\. vw_ACCOUNT_TREE acc
 11\. UNION
 12\. SELECT 'Unknown','Unknown') acc
 13\. CROSS JOIN vw_Product_tree ptree  
 14\. WHERE (BRANDGROUPNAME <> 'Unknown' or  ptree.brandid=220)  
 15\. and brandenabled=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:26:07.003

如果您执行以下操作，这将更容易调试。

1.  在每个追加后添加一个换行符 (CR LF)。然后，您将始终获得明智且有用的行号，而不是第 1 行。
2.  在调试日志中输出实际字符串。然后你可以看到错误发生在哪一行。

# c++ - C++ 模板函数字符串类型不匹配？

> ID：15138486
> 
> 赞同：0
> 
> 时间：2013-02-28T14:50:38.847
> 
> 标签：c++, templates

我定义了一个函数：

```
template<class T> 
inline void _assert(const string& message, T expected, T actual); 
```

我一直在用它来断言 2 个整数是相等的。但是当我有：

```
_assert("Modifies(15, v) for v value", "h", varTable->getVarName(list.at(0)));
                                            ^ returns std::string 
```

它不起作用：

```
Error   1   error C2782: 'void _assert(const std::string &,T,T)' : template parameter 'T' is ambiguous  h:\dropbox\sch\cs3202\code\test\testqueryevaluator\testgetcandidatelist.cpp 183 
```

为什么？2个字符串不是同一类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:52:24.093

您的函数`getVarName()`返回一个`std::string`，但您提供的第二个参数`_assert()`是类型`const char[]`（衰减为`const char*`）。

这两种类型不相同，因此类型推导找不到 的有效匹配项`T`。

要修复它，您可以将字符串文字包装`"h"`到一个`std::string`对象中：

```
_assert(
    "Modifies(15, v) for v value", 
    string("h"), // <== Wrap the string literal
    varTable->getVarName(list.at(0))
    ); 
```

或者您可以只修改您的`_assert()`函数模板，以便它不会强制预期值和实际值属于同一类型：

```
template<typename T, typename Y> 
inline void _assert(const string& message, T expected, U actual); 
```

但请注意：如果您在`operator ==`内部使用相等比较 ( )来比较预期值和实际值，请确保如果要比较字符串，请`_assert`确保您的`T`和`U`不被推断为；`const char*`否则，您的比较将不会达到您的预期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:52:46.683

你的问题是它`"h"`是类型的`const char*`，而你的第二个参数是类型的`std::string`，所以它无法确定你想要哪个。

您应该使它们具有相同的类型：

```
_assert("Modifies(15, v) for v value", std::string("h"), varTable->getVarName(list.at(0))); 
```

或更改您的函数以采用两个不同的参数：

```
template<class T, class U> 
inline void _assert(const string& message, T expected, U actual); 
```

# android - Android 操作栏图片

> ID：15138496
> 
> 赞同：1
> 
> 时间：2013-02-28T14:50:55.173
> 
> 标签：android, android-actionbar

我想在操作栏的最右边显示一张图像。我希望根据一些代码检查在运行时设置此图像。有人可以指导我如何去做吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:56:03.993

用这个。此代码在右上角添加了一个刷新按钮，带有名为 R.drawable.refresh 的图标。只有在有足够空间时才会显示图标，否则它将显示在菜单上

```
 private Menu myMenu

    public void changeMenu (int resource) {

    myMenu.getItem(0).setIcon(resource); //here resource is your R.drawable.insertid

    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    // getMenuInflater().inflate(R.menu.activity_main, menu);
            myMenu = menu;
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.activity_main, menu);
    menu.add("Refresh").setIcon(R.drawable.refresh)
            .setOnMenuItemClickListener(new OnMenuItemClickListener() {

                @Override
                public boolean onMenuItemClick(MenuItem item) {
                                            doStuff();
                    return false;
                }
            }).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    return super.onCreateOptionsMenu(menu);
} 
```

只需在要更改代码的任何地方调用 changeMenu 并传递可绘制的 id。

编辑：将此粘贴到您的活动中并添加询问您的导入。您应该根据需要添加自己的可绘制对象。请记住，图标衡量

*   mdpi：32x32
*   高清：48x48
*   xhdpi：64x64

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T15:02:07.917

如果您想在运行时更改它，您需要制作菜单（在 onCreateOptionsMenu 中）并保存菜单项。像这样

```
MenuItem changeableMenuItem = menu.add("new Item"); 
```

现在您可以调用`changeableMenuItem.setIcon`更改图标，然后如果您在班级中创建`changeableMenuItem`一个字段，您可以在班级的任何地方更改图标。

如果您不确定如何制作菜单项，可以参考 Dante 的答案。

# ios - MFMessageComposeViewController 显示空白/白屏

> ID：15138497
> 
> 赞同：3
> 
> 时间：2013-02-28T14:50:56.690
> 
> 标签：ios, objective-c, cocoa-touch, uiviewcontroller

```
if([MFMessageComposeViewController canSendText])
{
    MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];

    controller.body = @"This is a test!";

    controller.recipients = [NSArray arrayWithObject:phones];

    controller.messageComposeDelegate = self;

    [self presentViewController:controller animated:YES completion:nil];
} 
```

此代码使整个屏幕变白/空白。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:25:45.013

问题出在这一行：

```
controller.recipients = [NSArray arrayWithObject:phones]; 
```

这是一个格式错误的电话号码数组。不知道为什么格式错误的电话 # 没有引发错误，但将其过滤掉可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T06:00:09.090

我遇到了同样的问题并发现了我的错误。

确保您发送给 controller.recipients 的电话号码是 NSString。我已经发送了一些长的 NSInteger 并且它进入空白屏幕。

# .net - NServiceBus - 空引用异常。响应处理程序失败

> ID：15138499
> 
> 赞同：1
> 
> 时间：2013-02-28T14:50:59.023
> 
> 标签：.net, nservicebus, nullreferenceexception

以下是我尝试处理消息时收到的错误消息片段。有什么我想念的吗。

```
 2013-02-28 09:17:35,362 [Worker.5] INFO  NServiceBus.Unicast.UnicastBus [(null)]     <(null)> - Received message AIS.TestApp.Messaging.GDataStatusResponse, AIS.TestApp.GCommon, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null with ID 7e7f5048-9f17-4d27-8499-42e92520ed42\32912973 from sender gca-gdata-service
    2013-02-28 09:17:35,394 [Worker.5] ERROR NServiceBus.Unicast.UnicastBus [(null)]
     <(null)> - ResponseHandler Failed handling message.
    System.NullReferenceException: Object reference not set to an instance of an object.
       at NServiceBus.Unicast.UnicastBus.<>c__DisplayClass10`1.<GetAction>b__f(Object o) in d:\BuildAgent-03\work\d692fe98ef9a76ca\src\unicast\NServiceBus.Unicast\UnicastBus.cs:line 909
       at NServiceBus.ObjectBuilder.Common.CommonObjectBuilder.NServiceBus.ObjectBuilder.IBuilder.BuildAndDispatch(Type typeToBuild, Action`1 action) in d:\BuildAgent-03\work\d692fe98ef9a76ca\src\impl\ObjectBuilder.Common\ObjectBuilder.Common\C
    ommonObjectBuilder.cs:line 117 
```

这就是我在 IWantToRunAtStartup 的 Run 方法中初始化我的总线的方式

```
Configure.With()
                    .Log4Net()
                    .DefaultBuilder()
                    .XmlSerializer(NServiceBusCommon.XmlSerializerNamespace)
                    .MsmqTransport()
                    .UnicastBus()
                    .CreateBus()
                    .Start(); 
```

下面是我试图处理请求的代码

```
public class ResponseHandler : IHandleMessages<GDataStatusResponse>,
    IHandleMessages<GDataReply>
{
    public void Handle(GDataStatusResponse message)
    {
            ....
    }
} 
```

如果您需要任何进一步的信息，请告诉我。

谢谢尼山特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:56:06.020

初始化不是在`IWantToRunAtStartup`!

这是一个如何初始化端点的示例：

```
class EndpointConfig : IConfigureThisEndpoint, AsA_Server, IWantCustomInitialization
{
    public void Init()
    {
        NServiceBus.Configure.With()
            .Log4Net()
            .DefaultBuilder()
            .XmlSerializer(NServiceBusCommon.XmlSerializerNamespace)
            .MsmqTransport()
            .UnicastBus()
    }
} 
```

欲了解更多信息，请阅读[http://support.nservicebus.com/customer/portal/articles/856698](http://support.nservicebus.com/customer/portal/articles/856698)

# android - ScaleTo 在 Libgdx 中不起作用

> ID：15138504
> 
> 赞同：4
> 
> 时间：2013-02-28T14:51:06.193
> 
> 标签：android, libgdx

我正在尝试使用动作来缩放我的演员。但它不起作用。我只希望我的演员在给定的时间内增加/减少它的大小。

Actor 只会等待我给出的 2 秒持续时间`ScaleTo`。它会根据`MoveTo`我给它的动作正确移动。

```
public class SpriteTest extends Actor {
       private Sprite sprite;
       private TextureAtlas atlas;
       Rectangle boundsd = new Rectangle();

       public SpriteTest(FirstGame game) {
           //super(game);
           Gdx.app.log( FirstGame.LOG, "spritetest's costructor" );
           atlas = new TextureAtlas(Gdx.files.internal("pages-info.atlas"));
           sprite = atlas.createSprite("Plus");
       }

       public void draw(SpriteBatch batch,float parentAlpha) {
            batch.draw(sprite, x, y);
       }

// We are adding the actor to the stage in another class

public class LevelScreen extends AbstractScreen {
   private Jumper2D jumper2d;
   SpriteTest obstacled = new SpriteTest(game); 

   public LevelScreen(FirstGame game) {
      super(game);
   }

   @Override
   protected boolean isGameScreen() {
      return true;
   }  

   @Override
   public void show() {
      super.show();

      stage.addActor(obstacled); 
      obstacled.action  
      (Forever.$
            (Sequence.$
               (ScaleTo.$(1.4f, 1.4f, 2),(MoveTo.$(100,120, 3f) ))
                         ));
      jumper2d = Jumper2D.create(getAtlas());
      stage.addActor(jumper2d);
      stage.draw();
   }

   public void render () {
      Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
      stage.act(Math.min(Gdx.graphics.getDeltaTime(), 1 / 30f));
      stage.draw();
   }
} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T16:45:30.710

您的`draw()`方法`SpriteTest`是忽略`Actor`. 您需要适当地绘制缩放/旋转/大小的精灵。（您可能还需要设置 Actor 的 x、y、宽度和高度 --- 参见 [`setBounds`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Actor.html#setBounds%28float,%20float,%20float,%20float%29)）

```
public void draw(SpriteBatch batch, float parentAlpha)
{
     final Color c = getColor();
     batch.setColor(c.r, c.g, c.b, c.a * parentAlpha);
     batch.draw(sprite, getX(), getY(), getOriginX(), getOriginY(), getWidth(), getHeight(), getScaleX(), getScaleY(), getRotation());
} 
```

# c# - 调用之间的 COM 对象中的状态不一致

> ID：15138511
> 
> 赞同：0
> 
> 时间：2013-02-28T14:51:27.110
> 
> 标签：c#, .net, com

我有一个 .NET COM 对象，用于从 C 代码调用。

```
[EventTrackingEnabled(true)]
[ComVisible(true)]
public class ComObject : IComObject
{
    private static XslCompiledTransform transformer = null;
    private static string transformerXsltPath = null;
    private static string TransformerXsltPath 
    {
        get
        {
            return transformerXsltPath;
        }
        set
        {
            transformerXsltPath = value;
        }
    }
    private static XslCompiledTransform Transformer
    {
        get
        {
            return transformer;
        }
        set
        {                
            transformer = value;                
        }
    }

    [ComVisible(true)]
    public bool TransformXML(String inputPath, String xsltPath, String outputPath)
    {       
        // ....
        if (Transformer == null || xsltPath != TransformerXsltPath)
        {
            Transformer = new XslCompiledTransform(true);
            Transformer.Load(xsltPath, new XsltSettings(true, true), new XmlUrlResolver());
        }
        // ...
    }
} 
```

我想保持 com 对象的状态，只要我调用这个方法。由静态成员。所以当我再次调用它时，状态成员将被初始化。

但问题是，只有`Transformer`对象在第二次调用中保持初始化，但`transformerXsltPath`字符串重新启动为 null。

怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:06:06.977

首先，为了在方法调用之间保留其值，字段不需要是静态的（只有在方法内部声明的变量才具有该属性）。静态是指该字段属于该类，不属于该类的任何实例，并且该字段只有一个实例，该字段由该类的所有实例共享（甚至可以在不创建该类的实例的情况下访问，如`Class.field`)。有关详细信息，请参阅[字段](http://msdn.microsoft.com/en-us/library/ms173118%28v=vs.80%29.aspx)和[静态字段](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)。

其次，当您不在任何地方修改它时，我看不到您期望如何修改transformerXsltPath 字段（它是私有的，这意味着它不能在类之外修改）。

# actionscript-3 - 如何避免紧耦合？

> ID：15138514
> 
> 赞同：1
> 
> 时间：2013-02-28T14:51:32.060
> 
> 标签：actionscript-3, data-structures, tightly-coupled-code

上周我一直在努力解决这个问题，但似乎找不到既不需要单例也不需要紧耦合的解决方案。我正在开发一款 3D 太空游戏，这里有一个早期的
演示
......从平视显示器（Hud 类）中选择。

游戏的结构是：
Game 类包含 Hud 和 ObjectsList 类。
ObjectsList 类包含各种游戏对象，包括玩家、各种船、行星和轨道（空间站）。
当玩家到达轨道的一定距离内时，任务会被实例化。
任务被添加到一个 MissionsList 类，它本身在 ObjectsList 中。
任务可能会变得不可用并在没有警告的情况下过期（就好像它们被另一个飞行员选择了一样），因此显示在 Hud 上的列表是动态的并且会定期更新。
以前，我已经让任务将事件发送到 Game，而 Game 又将更改通知 Hud。这对我来说似乎有点笨拙，因为信息需要传递到 Hud 的各种更深层次的“层次”。我最终得到了很多相同的功能。

我正在考虑的解决方案是将 MissionsList 类的引用注入到 Hud 中，使其能够监听来自 Missonslist 的更新。我听说将某物的状态与其显示混合是一种不好的做法，但我不知道如何将任务的“实时”列表获取到 Hud。相比之下，如果 Hud 只包含显示细节而不参考生成这些细节的任务对象，那么当玩家从 Hud 中选择一个任务时，我如何确定选择了哪个任务？在这种情况下紧耦合可以吗？还是我应该使用单例与 Hud 进行通信？如果我建议的任何事情存在根本性的错误，我欢迎被告知那是什么以及最佳解决方案是什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:00:55.630

那么简单的答案是为什么不通过中间接口耦合呢？

```
interface IMissionList
{
    ObservableCollection<IMission> Missions{get;}
} 
```

然后在您的依赖注入中将其绑定到可以解析为实例、单例或常量等的东西...

然后将其注入您的 Hud 的构造函数中

```
Hud(IMissionList missionList){} 
```

现在你松散地耦合到一个契约，它的实现可以在任何时候改变，只要实现遵守契约。此外，由于注入，您的 Hud 只需使用 IMissionList 而不是找到它。

[编辑] 抱歉，这是 C#，但希望这个想法有用。[参见 actionscript 接口](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f41.html)和[Actionscript 的依赖注入](http://www.adobe.com/devnet/flex/articles/dependency_injection.html)

# php - 哪种方法更适合搜索 mysql db？

> ID：15138517
> 
> 赞同：1
> 
> 时间：2013-02-28T14:51:40.053
> 
> 标签：php, mysql

我正在开发 php/mysql 网站，我必须添加站内搜索。我的网站有这些表格：

1.  帖子

2.  类别

3.  标签

4.  作者

问题是，我无法决定哪个更好地搜索我的关系数据库：

1.  使用蜘蛛索引另一个表中的数据（如：sphider、sphinx、...）。

2.  或者直接搜索数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:52:54.623

第一种方法。试试 ElasticSearch、Sphinx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:58:08.360

[像 Sphinx](http://sphinxsearch.com/)这样的专用搜索产品更好，因为它们的唯一存在就是提供搜索解决方案，而且它们做得很好。虽然 MySQL 确实支持全文搜索，但这只是其核心产品的一个功能。

有很多事情，特别是在复杂的情况下，MySQL 根本无法做到。浏览一下[Sphinx 文档](http://sphinxsearch.com/docs/)，您会看到大量示例。

最终，这取决于您的用例。如果速度、可扩展性和高级功能对应用程序不重要，那么专用的搜索引擎可能会过大。当然也值得评估 MySQL 的[全文搜索功能](http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html)，如果它们满足您的需求，实现起来会简单得多。

# regex - 重复数字序列的正则表达式

> ID：15138521
> 
> 赞同：-2
> 
> 时间：2013-02-28T14:52:08.707
> 
> 标签：regex, numbers, expression, repeat

我正在寻找一个允许 4 - 8 个数字之间的序列的 reg 表达式，但前两个和后两个不能相同。

例如

1245612 - 包含匹配
346731 - 不匹配
789287 - 不匹配
789278 - 包含匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:58:38.587

如果您希望前两位和后两位相同以匹配（您的示例表明这一点），那么正则表达式`^(\d\d)\d{0,4}\1$`是合适的。

有关示例的正则表达式，请参见[http://regexr.com?33uuu](http://regexr.com?33uuu)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:07:39.120

你有两种可能：

1.  当两对相同时匹配

    ```
    ^(\d{2})\d{0,4}\1$ 
    ```

    [在 Regexr 上](http://regexr.com?33uu9)查看

2.  当两对不同时匹配

    ```
    ^(\d{2})\d{0,4}(?!\1)\d{2}$ 
    ```

    [在 Regexr 上](http://regexr.com?33uuf)查看

`^`字符串开头和结尾的锚点`$`很重要，否则您将获得部分匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:01:28.840

如果您确实想要您所描述的内容（前两位和后两位**不**匹配），那么您可以执行以下操作：

```
(?!(\d\d)\d{0,4}\1)\d{4,8} 
```

表达式的第一部分断言它不*匹配*[两位数][0 到 4 个其他数字之间][再次相同的两位数] 形式的表达式，然后除此之外，它将匹配任何数字序列长度 4 到 8。

试试这个正则表达式（使用 Javascript 风格的正则表达式）：

[http://regexpal.com/?flags=g®ex=(%3F!(%5Cd%5Cd)%5Cd%7B0%2C4%7D%5C1)%5Cd%7B4%2C8%7D&input=3366](http://regexpal.com/?flags=g&regex=(%3F!(%5Cd%5Cd)%5Cd%7B0%2C4%7D%5C1)%5Cd%7B4%2C8%7D&input=3366)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T15:01:49.473

对于这个任务 reg 表达式不需要或者我不理解这个任务。你只需要将 i[0] 和 i[1] 与 i[n] 和 i[n-1] 进行比较。

# c# - 异步方法正确吗？更清晰的警告

> ID：15138523
> 
> 赞同：3
> 
> 时间：2013-02-28T14:52:09.703
> 
> 标签：c#, task-parallel-library, .net-4.5, async-await

在我的方法中，`RecalcChartAsync`我做了一些时间密集的事情。所以我想我会做一些异步的事情。

我想启动这两种方法`CreateHistogramAsync` `CalculatePropValuesAsync`，同时在我的方法中做一些事情`RecalcChartsAsync`，最后等待它完成。

```
 private async void RecalcChartsAsync()
{
    var histogram = CreateHistogramAsync();
    var propValues = CalculatePropValuesAsync();

    //do some other stuff

    await histogram;
    await propValues;
}

private async Task CreateHistogramAsync()
{
    //do some stuff
}

private async Task CalculatePropValuesAsync()
{
    //do some stuff
} 
```

我不确定我的做法是否正确，因为 ReSharper 在 CreateHistogramAsync 和 CalculatePropValueAsync 的异步关键字处给了我以下警告：

> 此异步方法缺少“等待”运算符，将同步运行。考虑使用 await 运算符来等待非阻塞 API 调用，...

现在我不确定我是否以正确的方式使用这个异步的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T14:57:00.287

> 现在我不确定我是否以正确的方式使用这个异步的东西。

听起来不像。仅仅因为你有一个`async`方法并不意味着它会在一个单独的线程上运行——听起来这就是你所期望的。当您执行一个`async`方法时，它会同步运行 - 即就像正常一样 - 直到它遇到第一个`await`表达式。如果您没有*任何*`await`表达式，这意味着它将正常运行，唯一的区别是它被包裹在状态机中的方式，完成状态（异常等）由任务表示。

我怀疑您应该将您的`CreateHistogramAsync`和`CalculatePropValuesAsync`方法更改为同步：

```
private void CreateHistogram()
{
    ...
}

private void CalculatePropValues()
{
    ...
} 
```

并用于[`Task.Run`](http://msdn.microsoft.com/en-gb/library/system.threading.tasks.task.run.aspx)并行执行它们：

```
private async void RecalcChartsAsync()
{
    var histogram = Task.Run((Action) CreateHistogram);
    var propValues = Task.Run((Action) CalculatePropValues);

    //do some other stuff

    await histogram;
    await propValues;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T14:55:46.770

在您的方法中没有您正在等待的任何内容，因此将其标记为`async`毫无意义。这就是 ReSharper 警告您的原因。

你应该从学习如何`async`/`await`工作开始：http: [//msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T14:57:35.780

如果您在最后两个方法中没有等待任何内容，则从声明中删除异步。在这种情况下，创建和返回任务将足以实现您想要的。

# multithreading - 主应用程序锁定使用 idPop3 检索邮件消息（即使在线程中）

> ID：15138529
> 
> 赞同：1
> 
> 时间：2013-02-28T14:52:23.257
> 
> 标签：multithreading, delphi, delphi-2010

我正在使用线程来访问 pop3 帐户并检索消息。它工作正常，但它会锁定我的应用程序，直到它完成。无法移动窗口，关闭，单击按钮，什么都没有。

它运行良好，允许我访问主应用程序，直到我注释掉的地方（或在 IdPOP31.Connect(); 之后）

//获取服务器拥有的消息数

然后它锁定

```
procedure TPopThread.Pop;
var
 vName, vEmail, vServerIn, vServerOut, vUserId, vPassword: String;
 vPop3Port, vSMTPPort, vSSL: String; vHTML: TStringList;
   MsgCount : Integer;
   i,j        : Integer;
   FMailMessage :  TIdMessage;
begin
   with frmMain do
   begin
   RzMemo1.Lines.Clear;
   vHTML:= TStringList.Create;
   GetAccount(lbxMain.SelectedItem,vName, vEmail, vServerIn, vServerOut, vUserId, vPassword,
   vPop3Port, vSMTPPort, vSSL, vHTML);
   IdPOP31.Host      := vServerIn;
   IdPOP31.Username  := vUserId;
   IdPOP31.Password  := vPassword;
   IdPOP31.Port      := StrToInt(vPop3Port);

  try
     Prepare(IdPOP31);
     IdPOP31.Connect();
//   {
//   //Getting the number of the messages that server has.
//   MsgCount := IdPOP31.CheckMessages;
//   for i:= 0 to Pred(MsgCount) do
//   begin
//     try
//       FMailMessage := TIdMessage.Create(nil);
//       IdPOP31.Retrieve(i,FMailMessage);
//       RzMemo1.Lines.Add('=================================================');
//       RzMemo1.Lines.Add(FMailMessage.From.Address);
//       RzMemo1.Lines.Add(FMailMessage.Recipients.EMailAddresses);
//       RzMemo1.Lines.Add(FMailMessage.Subject);
//       RzMemo1.Lines.Add(FMailMessage.Sender.Address);
//       RzMemo1.Lines.Add(FMailMessage.Body.Text);
//
//       for J := 0 to Pred( FMailMessage.MessageParts.Count ) do
//       begin
//        // if the part is an attachment
//        if ( FMailMessage.MessageParts.Items[ J ] is TIdAttachment) then
//        begin
//         RzMemo1.Lines.Add('Attachment: ' + TIdAttachment(FMailMessage.MessageParts.Items[J]).Filename);
//        end;
//       end;
//       RzMemo1.Lines.Add('=================================================');
//     finally
//       FMailMessage.Free;
//     end;
//     RzMemo1.Clear;
//   end;
//   }
   finally
     IdPOP31.Disconnect;
     vHTML.Free;
   end;
   end;
end; 
```

它实际上是在我添加线程之前执行此操作的，因此它与被注释掉的部分有关，而不是线程

我做错了什么或没有做什么？

这是我的执行

```
procedure TPopThread.Execute;
begin
  try
    Synchronize(Pop);
  except
    on Ex: Exception do
      fExceptionMessage := Ex.Message;
  end;
end; 
```

我是这样称呼它的

```
PopThread := TPopThread.Create(lbxMain.SelectedItem, frmMain.DonePopping); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:51:33.250

您正在自己*锁定*应用程序，因为您正在[同步](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TThread.Synchronize)对 pop 方法的调用。

> Synchronize 使 AMethod 指定的调用**使用主线程执行**，从而避免多线程冲突。
> 
> 当前线程在 AThread 参数中传递。
> 
> 如果您不确定方法调用是否是线程安全的，请从 Synchronize 方法中调用它，以确保它在主线程中执行。当方法在主线程中执行时，当前线程的执行被挂起。

因此，出于实际目的，您就像没有额外的线程，因为您的所有代码都在主线程中执行。

> 当您想**与 VCL 组件交互时，您想要使用 Synchronize 的一个示例**

另一方面，因为您直接从您的方法访问许多可视化控件，并且 VCL 不是线程安全的，所以您必须在主线程中执行您的方法。

您可以做的最好的事情是通过不从线程访问任何 VCL 组件，而是收集内存中的所有输入和输出值并在线程启动之前和之后从主线程设置/读取它，从而使您的线程独立于 VCL线程完成。

或者，如果出于某种原因您不想这样做，您可以剖析您的方法以分离需要访问 VCL 的部分并仅同步这些部分，例如：

```
type
  TPopThread = class
  private
    FMailMessage :  TIdMessage;  //now the message belongs to the class itself

  ...
  public
    //all the values are passed via constructor or the thread is 
    //created in suspended state, configured and then started
    property Host: string read FHost write FHost;
    property UserName: string read FUserName write FUserName;
    property Password: string read ...;
    property Port: Integer read ...;
  end;

procedure TPopThread.CopyMailToGUI;
var
  J: Integer;
begin
  frmMain.RzMemo1.Lines.Add('=================================================');
  frmMain.RzMemo1.Lines.Add(FMailMessage.From.Address);
  frmMain.RzMemo1.Lines.Add(FMailMessage.Recipients.EMailAddresses);
  frmMain.RzMemo1.Lines.Add(FMailMessage.Subject);
  frmMain.RzMemo1.Lines.Add(FMailMessage.Sender.Address);
  frmMain.RzMemo1.Lines.Add(FMailMessage.Body.Text);

  for J := 0 to Pred( FMailMessage.MessageParts.Count ) do
  begin
    // if the part is an attachment
    if ( FMailMessage.MessageParts.Items[ J ] is TIdAttachment) then
    begin
      frmMain.RzMemo1.Lines.Add('Attachment: ' + TIdAttachment(FMailMessage.MessageParts.Items[J]).Filename);
    end;
  end;
  frmMain.RzMemo1.Lines.Add('=================================================');
end;

procedure TPopThread.Pop;
var
  MsgCount : Integer;
  i,j        : Integer;
  Pop: TIdPOP3;
begin
  Pop := TIdPOP3.Create(nil);
  try
    Pop.Host      := FHost;
    Pop.Username  := FUserName;
    Pop.Password  := FPassword;
    Pop.Port      := FPort;
    Prepare(Pop);
    Pop.Connect();
    //Getting the number of the messages that server has.
    MsgCount := Pop.CheckMessages;
    for I := 0 to Pred(MsgCount) do
    begin
      try
        FMailMessage := TIdMessage.Create(nil);
        try
          IdPOP31.Retrieve(i,FMailMessage);
          Synchronize(CopyMailToGUI);
        finally
          FMailMessage.Free;
        end;
    end;
  finally
    Pop.Free;
  end;
end;

procedure TPopThread.Execute;
begin
  //no need of a try/except, if an exception occurs, it 
  //is stored in the FatalException property
  Pop;
end; 
```

现在，您的线程将*要求*主线程仅将处理后的消息*复制*到 VCL。在该*复制*期间，您的线程将阻塞并且您的应用程序将不会响应消息，因为主线程很忙，但这将是非常短的时间间隔，所以即使它不是理想的情况，我认为它可以满足您的需求.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:50:07.043

你把所有的逻辑都放在一个`Synchronize`调用中。`Synchronize`在主 VCL 线程中运行它的功能，因此您基本上已经取消了从一开始使用单独线程可能获得的任何好处。

删除对的调用，`Synchronize`以便`Pop`在您为其创建的线程中运行。

如果你还需要在主线程中执行一些操作，那就把它们放在子程序中，这样你就可以*只*在`Synchronize`. 我在该代码中看到的部分是您向备忘录控件添加行的地方。

# c++ - 如何编写字母数字文件解析器？

> ID：15138533
> 
> 赞同：0
> 
> 时间：2013-02-28T14:52:34.617
> 
> 标签：c++, parsing

到目前为止我有以下代码

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main(){
    ofstream outfile;
    ifstream infile;
    string line;

    infile.open ("input.DAT");
    outfile.open ("output.txt");

    while (infile.good()){
        getline (infile, line);
        outfile << line << endl;
    }

    outfile.close();
    infile.close();

    return 0;
} 
```

所有这一切都是获取它的 input.DAT 并将其输出到 output.txt。但是，输入文件并不干净。它采用这种格式：

> *（ASCII 垃圾）* 1:66 OS 波兰华沙*（ASCII 垃圾）*

示例图片：

![](../Images/8aff3dbfb02f3d890af2a9f2d841b4fc.png)

* * *

另一个例子：

![](../Images/17f95f65b5681380220446a44c46db70.png)

* * *

所以我想要做的是输出垃圾之间的东西，换行符分隔。但我不知道如何按字符迭代/输出，以及指示什么是有效输出的好方法（我的意思是我可以检查字符是否在我想的特定范围内，但我不知道这是怎么回事用 C++ 完成）。

我认为可能会有所帮助的是首先以 (Number)(Number)(Colon)(Number)(Space) 或 (Number)(Colon)(Number)(Space) 的形式搜索某些内容，然后将所有内容收集起来，直到不是字母/逗号/句号/等的东西，并添加换行符。这可以做到吗？

我希望这是有道理的！如果我需要澄清更多，请告诉我。

编辑：第一次尝试

```
#include <iostream>
#include <fstream>
#include <string>
#include <algorithm>
#include <cctype>
using namespace std;

int main(){
    ofstream outfile;
    ifstream infile;
    string line, res;

    infile.open ("input.DAT");
    outfile.open ("output.txt");

    while (infile.good()){
        std::getline(infile, line);

        res = "";
        for(std::string::size_type i = 0; i < line.length()-4; i++){
            if (isdigit(line[i+1]) && line[i+2]==":" && isdigit(line[i+3])){
                res+=line[i];
                i++;
                while (isalnum(line[i]) || line[i] == "/" || line[i] == "\\" || line[i] == "=" || line[i] == "#" || line[i] == ":" || line[i] == " " || line[i] == "." || line[i] == "," || line[i] == "-" || line[i] == "'" || line[i] == '"'){
                    res+=line[i];
                    i++;
                }
                outfile << res << endl;
                res = "";
            }  
        }

    }

    outfile.close();
    infile.close();

    return 0;
} 
```

但它无法编译，因为“ISO C++ 禁止指针和整数之间的比较”

编辑：我自己修复了这个，将引号更改为单引号。我想我在这里找到了自己的问题。它不会让我删除我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:08:48.950

我会让你决定什么是垃圾，什么不是。这是一个示例，说明如何在将其写入另一个文件之前从每一行中删除所有您不喜欢的符号：

```
#include <iostream>
#include <fstream>
#include <string>
#include <algorithm>

static bool is_garbage(char c)
{
    return !isalnum(c); // This is my perception on garbage. Yours might be different.
}

int main()
{
    std::ofstream outfile;
    std::ifstream infile;
    std::string line;

    infile.open("input.DAT");
    outfile.open("output.txt");

    while (infile.good()) {
        std::getline(infile, line);
        line.erase(std::remove_if(line.begin(), line.end(), is_garbage),
                   line.end());
        outfile << line << std::endl;
    }

    outfile.close();
    infile.close();
} 
```

上面的代码删除了所有非字母字符。这里有一些参考资料更详细地解释了每个功能：

*   [std::remove_if](http://en.cppreference.com/w/cpp/algorithm/remove)
*   [标准::字符串](http://en.cppreference.com/w/cpp/string/basic_string)
*   [盐沼](http://en.cppreference.com/w/cpp/string/byte/isalnum)

希望能帮助到你。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:10:33.553

所以，像这样的函数：

```
#include <cctype>

std::string clean_string(const std::string &str)
{
    std::string res;
    for(std::string::size_type i = 0; i < str.length(); i++)
    {
       if (std::isprint(str[i])
          res += str[i];
    }
    return res;
 } 
```

# android - TabsFragment 和 MapFragment

> ID：15138534
> 
> 赞同：0
> 
> 时间：2013-02-28T14:52:36.020
> 
> 标签：android, google-maps, tabs, android-fragments, google-maps-android-api-2

我有一个问题和一个问题。首先我不知道这是否可能：
我有一个带有标签的片段活动。在一个选项卡（这是一个片段）上，我有一张带有隐藏项目列表的地图。地图被放入该片段的框架中。列表已下载，按下按钮再次可见。在地图上，我有代表这些项目的标记。 我的问题是这样的：当我从我放入框架的片段中 使用时，
我总是得到地图。这可能吗？如果不是，你有什么推荐？提前致谢。`null``getMap()`

已编辑

```
public class MapExplore extends Fragment{
private FrameLayout frame;
    private ListView list;

    private String api_key;

    private GoogleMap map;
    private MapExploreAdapter adapter;

    private SupportMapFragment map_fragment;
@Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        api_key = Configuration.get_prefereence_string(getActivity(), "user_activation_key", null);

        adapter = new MapExploreAdapter();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.map_explore, null);
        frame = (FrameLayout) view.findViewById(R.id.frameMap);

        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);
        setUpMapFragment();
    }

    private void setUpMapFragment(){
        if(map_fragment == null){
            map_fragment = SupportMapFragment.newInstance();
            FragmentTransaction ft = getActivity().getSupportFragmentManager().beginTransaction();
            ft.add(frame.getId(), map_fragment, Utils.MAP_FRAGMENT_TAG);
            ft.commit();

        }
    }

    private void setUpMap(){
        Log.i("SET UP MAP", "Started");
        if(map == null){
            map = ((SupportMapFragment) map_fragment).getMap();
        }
        if(map != null){
            map.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(Utils.SF_LAT, Utils.SF_LON), 13));
        }       
    }
@Override
    public void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        setUpMap();
    } 
```

我用一些代码编辑了我的问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:02:03.617

如果您可以发布一些代码，则更容易诊断您的问题：

同时尝试如下动态创建您的 SupportMap 片段：

```
mMapFragment = new SupportMapFragment() {
            @Override
            public void onActivityCreated(Bundle savedInstanceState) {
                super.onActivityCreated(savedInstanceState);
                GoogleMap map = mMapFragment.getMap();
                if (map != null) {
                    //Your initialization code goes here
                }
            }
        }; 
```

在片段内使用 Mapview 的替代方法如下：

```
public class Yourfragment extends Fragment {

    private MapView mMapView;
    private GoogleMap mMap;
    private Bundle mBundle;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View inflatedView = inflater.inflate(R.layout.map_fragment, container, false);

        try {
            MapsInitializer.initialize(getActivity());
        } catch (GooglePlayServicesNotAvailableException e) {
            // TODO handle this situation
        }

        mMapView = (MapView) inflatedView.findViewById(R.id.map);
        mMapView.onCreate(mBundle);
        setUpMapIfNeeded(inflatedView);

        return inflatedView;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mBundle = savedInstanceState;
    }

    private void setUpMapIfNeeded(View inflatedView) {
        if (mMap == null) {
            mMap = ((MapView) inflatedView.findViewById(R.id.map)).getMap();
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    private void setUpMap() {
        mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
    }

    @Override
    public void onResume() {
        super.onResume();
        mMapView.onResume();
    }

    @Override
    public void onPause() {
        super.onPause();
        mMapView.onPause();
    }

    @Override
    public void onDestroy() {
        mMapView.onDestroy();
        super.onDestroy();
    }
} 
```

并将地图视图放入 XML 中，如下所示：

```
 <com.google.android.gms.maps.MapView
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /> 
```

这是[MapView官方文档的链接](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapView)

# php - 在 php mysql 中上传图像时出现致命错误

> ID：15138542
> 
> 赞同：-1
> 
> 时间：2013-02-28T14:52:54.103
> 
> 标签：php

我正在输入图像

```
<input type="file" name="uploaded_files[]" id="input_clone" multiple="multiple" /> 
```

在 .php 我使用这样

```
Error: the XML response that was returned from the server is invalid.
Received:
<br />
<b>Warning</b>:  Invalid argument supplied for foreach() in <b>C:\xampp\htdocs\olam\classes\class.xajax.php</b> on line <b>1135</b><br />
<br />
<b>Warning</b>:  Cannot modify header information - headers already sent by (output started at C:\xampp\htdocs\olam\classes\class.xajax.php:1135) in <b>C:\xampp\htdocs\olam\components\xajax\xajax.inc.php</b> on line <b>678</b><br />
<?xml version="1.0" encoding="utf-8" ?><xjx><cmd n="js"><![CDATA[xajax.loadingFunction();]]></cmd><cmd n="js"><![CDATA[document.location.replace('?p=complete');]]></cmd><cmd n="js"><![CDATA[xajax.doneLoadingFunction();]]></cmd></xjx> 
```

```
 echo $_FILES['uploaded_files']['name'];
     foreach($_FILES['uploaded_files']['name'] as $key=>$value)
     {
          if(is_uploaded_file($_FILES['uploaded_files']['tmp_name'][$key]) && $_FILES['uploaded_files']['error'][$key] == 0)
          {

                $filename = $_FILES['uploaded_files']['name'][$key];

                if(move_uploaded_file($_FILES['uploaded_files']['tmp_name'][$key], 'uploads/'. $filename))
                {

                }
                else
                {
                      die ('There was a problem uploading the pictures.');
                }
          }
          else
          {
            die ('There is a problem with the uploading system.');
          }
     } 
```

这给了我致命的错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:54:23.477

您可能忘记输入`enctype="multipart/form-data"`阻止文件上传的表单。结果`$_FILES`是空的，您会收到该错误。

# lua - 碰撞尝试索引全局（零值）

> ID：15138550
> 
> 赞同：0
> 
> 时间：2013-02-28T14:53:19.027
> 
> 标签：lua, coronasdk

当我尝试与 BCloud1.png 床发生碰撞时，我试图索引全局“BCoud1”（一个零值）？有什么简单的方法可以解决这个错误吗？

我已经这样做了：

```
function getRandomStar()
    local temp = starTable[math.random(1, #starTable)] -- Get a random star from starTable
    local randomStar = display.newImage(temp.imgpath) -- Set image path for object

    if ( temp.imgpath == "BCloud1.png" ) then
    temp.imgpath = "BCloud"..tostring(math.random(1, 3))..".png";
    physics.addBody( BCloud1, { density=3.0, friction=0.5, bounce=0.3 } )
    end

    if ( temp.imgpath == "BCloud2.png" ) then
    temp.imgpath = "BCloud"..tostring(math.random(1, 3))..".png";
    physics.addBody( randomStar, "static", { density=.1, bounce=.1, friction=.2, radius=45 } )  
    end

    if ( temp.imgpath == "BCloud3.png" ) then
    temp.imgpath = "BCloud"..tostring(math.random(1, 3))..".png";
    physics.addBody( randomStar, "static", { density=.1, bounce=.1, friction=.2, radius=45 } )  
    end

    randomStar.myName = "star" -- Set the name of the object to star
    randomStar.movementSpeed = temp.movementSpeed; -- Set how fast the object will move
    randomStar.x = math.random(-30, _W);    
    randomStar.y = -35;
    randomStar.rotation = math.random(0,20) -- Rotate the object

    starMove = transition.to(randomStar, {
        time=randomStar.movementSpeed, 
        y=500,
        onComplete = function(self) self.parent:remove(self); self = nil; 
        end
        }) -- Move the star
end--END getRandomStar()

local function onLocalCollision1( self, event )
    if ( event.phase == "began" ) then
print (" Collision1 ")
    elseif ( event.phase == "ended" ) then
    end
end
BCloud1.collision = onLocalCollision1
BCloud1:addEventListener( "collision", BCloud1.png) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:35:33.777

您在哪里创建一个名为 BCloud1 的显示对象？

在您的代码中：

```
BCloud1.collision = onLocalCollision1
BCloud1:addEventListener( "collision", BCloud1.png) 
```

BCloud1 需要存在，并且您发布的代码永远不会创建它。我怀疑它从您的 getRandomStar() 函数开始。您永远不会返回创建的对象。但同样在上面的 eventListener 设置中，您将 BCloud1.png 视为一个名为 BCloud1 的表，其成员名为 .png，尽管看起来，BCloud1.png 听起来像是图像的文件名。也许你错过了类似的东西：

BCloud1 = display.newImage("BCloud1.png")

# ruby-on-rails - 有没有办法在清单文件中向 require_tree 添加异常？

> ID：15138559
> 
> 赞同：20
> 
> 时间：2013-02-28T14:53:48.290
> 
> 标签：ruby-on-rails, asset-pipeline

有没有一种方法可以将一个目录中的所有文件都包含在一个目录中，或者包含一个目录之外的所有目录？所以像：

```
require_tree . :except 'this_one' 
```

只是想知道并且无法弄清楚清单文件中“require_tree”方法的文档在哪里。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2016-01-06T12:50:24.137

代替

> 要求树。：除了'this_one'

写

> 要求树“。”
> 
> 存根“this_one”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T17:27:17.387

根据您的环境版本，可能会出现以下情况：

```
//= require_tree "." exclude: "file1", "file2" 
```

请参阅此 SO 线程：[Rails 3.1 Sprockets 需要指令 - 有没有办法排除特定文件？](https://stackoverflow.com/questions/7602393/rails-3-1-sprockets-require-directives-is-there-a-way-to-exclude-particular-fi). 不过，我自己从未尝试过。

# wcf - 在 ASP.NET MVC3 中使用 Windsor (3.2.0.0) WcfFacility 解决服务时出错

> ID：15138565
> 
> 赞同：0
> 
> 时间：2013-02-28T14:53:58.403
> 
> 标签：wcf, dependency-injection, castle-windsor, wcffacility

仍在使用 Castle.Windsor 和 WcfFacility 找到我的方式，但这些让我摸不着头脑。我希望 Windsor 将 WCF 客户端注入它在我的存储库中看到该依赖项的位置。

我在 Visual Studio 中添加了一个服务引用，并将以下内容添加到我的引导代码中：

```
 container.AddFacility<WcfFacility>();
    container.Register(
        Component.For<IServiceContract>()
        .AsWcfClient(
            DefaultClientModel.On(
                WcfEndpoint.FromConfiguration("MyEndpoint")
                )
            )
        ); 
```

我的 web.config 包含一个`<client>`带有相应名称的端点的部分：

```
<client>
  <endpoint address="http://localhost:63988/MyService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IServiceContract"
    contract="IServiceContract"
    name="MyEndpoint" />
</client> 
```

当我运行我的应用程序时，我得到一个 YSOD：

> 在 ServiceModel 客户端配置部分中找不到名称为“服务”和合同“IServiceContract”的端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此名称匹配的端点元素。

非常不言自明，但为什么要寻找一个名为“ **service** ”的元素，我的元素名为“ **MyEndpoint** ”，我已正确传递给该`FromConfiguration`方法？

如果我更新我的 web.config 以将名称属性从“MyEndpoint”更改为“service” - YSOD 消失了，我的页面可以正常工作了！

```
<client>
  <!-- Changing the name attribute to "service" works? -->
  <endpoint address="http://localhost:63988/MyService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IServiceContract"
    contract="IServiceContract"
    name="service" />
</client> 
```

似乎该设施忽略了我给它的端点名称？

或者（更有可能）我没有正确注册我的服务并且该设施正在使用一些命名后备。

**编辑**

看来我的端点名称属性**必须**是“服务”！在我尝试过的每个测试中，如果属性是任何其他值，我总是会得到相同的错误 - 这是一个错误吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:22:18.100

好的 - 我已经设法解决了这个问题。

我编写了一个 MVC 和一个 WCF 的简单测试工具，并毫无问题地使用了 WcfFacility - 这让我相信它确实有效；o)。

我正在使用现有的代码库并重构以使用 WcfFacility，因此我将原始更改合并并重新开始。这一次，我没有任何问题。

我怀疑我一定错过了`<system.serviceModel>`元素中 web.config 中的一些重复项——尽管我发誓没关系！

干杯

# iphone - 图标 iphone 应用程序

> ID：15138576
> 
> 赞同：0
> 
> 时间：2013-02-28T14:54:26.603
> 
> 标签：iphone, ios, objective-c

是否可以以编程方式访问安装在 iPhone 上的其他应用程序的图标？

例如：如果我需要 Instagram 的图标，是否可以通过访问 Instagram 捆绑包中的图标在我的应用程序中显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:12:22.510

您不能访问其他应用程序包中的任何内容，但如果您知道 URL，则可以在 Web 上找到这些图标。图标图像位于应用商店页面中，可以通过（例如）[此处访问](https://itunes.apple.com/en/app/instagram/id389801252?mt=8)。该 URL 可能会更改，因此将副本保存到您自己的应用程序包将是确保访问它们的最佳方式。

[http://a3.mzstatic.com/us/r1000/060/Purple/v4/76/94/e2/7694e29c-3060-9f8e-0135-cbea67ec3af/mzl.qmyfwfsq.175x175-75.jpg](http://a3.mzstatic.com/us/r1000/060/Purple/v4/76/94/e2/7694e29c-3060-9f8e-0135-cbeea67ec3af/mzl.qmyfwfsq.175x175-75.jpg)

![在此处输入图像描述](../Images/ae23ba7b80b4d38237a71fa812387a37.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:56:27.270

不，如果你想使用它，你必须找到它。

不过，您有一个适用于 iO 的 instagram-sdk。也许你应该看看这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:56:49.560

您需要在其他地方获取图标。如果是 Instagram，您可以从他们的 SDK 中获取，但在大多数情况下，您需要自己找到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T15:07:46.777

据我所知，您必须在自己的应用程序中保留一组图标，您可以在某个时刻向用户显示这些图标。但我敢肯定，你不能像那样访问安装在手机上的应用程序的图标！

# jquery - 在 json 函数执行之前显示一个 span

> ID：15138577
> 
> 赞同：0
> 
> 时间：2013-02-28T14:54:29.047
> 
> 标签：jquery, json, toggle

我有一个点击搜索按钮，我想在搜索完成之前显示“搜索”文本。所以对于这个搜索文本，我有一个跨度，其中包含现在单击按钮时搜索的文本我无法显示跨度，因为控件似乎正在运行以完成 json 函数

```
<span id="searchWait" style="display:none">&nbsp;Searching...</span>

<script>
function getPromptSearchResults() {
    $('#searchWait').toggle();

    $.ajax({
        async: false,
        url: 'Application.aspx/getPromptSearchResults',
        data: JSON.stringify({
            some parameters
        }),
        success: function (data) {
            $('#searchWait').html('done');
            something
        },
        error: function (parameters) {
            something
        }
    });

    return something;
}
</script> 
```

有趣的事实是，如果我在 $('#searchWait').toggle(); 它显示文本搜索和警报，但如果我单击确定，警报将一直存在，直到功能成功完成。搜索完成后正确更改 span 的 html。无法理解 IE 8 中的这种奇怪行为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:00:22.690

尝试`show()`代替`toggle()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:12:21.767

我更喜欢将跨度 css 更改为切换取决于 jquery 事件

```
function getPromptSearchResults() {

            $('#searchWait').css('display','block');

    $.ajax({
        async: false,
        url: 'Application.aspx/getPromptSearchResults',
        data: JSON.stringify({            some parameters        }),
        success: function (data) {
$('#searchWait').html('done')
            something        },
        error: function (parameters) {
            something        }
    });

    return something;
} 
```

# c - 超级 Arduino 2560 和 Eclipse

> ID：15138580
> 
> 赞同：0
> 
> 时间：2013-02-28T14:54:46.177
> 
> 标签：c, eclipse, arduino, avr-gcc, avrdude

我有一个[Arduino Mega 2560](http://arduino.cc/en/Main/arduinoBoardMega2560)。我想让它与 Eclipse 通信，以便在其上设置程序。到目前为止，我已经设法使用[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)和[Arduino Pro Mini](http://arduino.cc/en/Main/ArduinoBoardProMini)。

但是，使用 Arduino Mega 2560，我得到了下图所示的错误。我曾在 57600 和 115200 的程序员“Arduino”、“STK500 v2”和“v1”上使用过。我在使用 Arduino 程序员时一直在照片上出现错误。使用[STK500](http://www.atmel.com/tools/STK500.aspx)，我收到一条错误消息：

> 尝试访问 AVRdude 程序员时超时”

有解决办法吗？

![错误的打印屏幕](../Images/5c82450eea97dd0a3f1d9f8bedfb982a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:58:25.660

AVRdude 发出这样的一行：

```
avrdude: Device signature = 0x1e9702 
```

它标识了设备，即它所连接的芯片的确切类型（以上是针对 ATmega128）。您的插件可能不知道为 ATmega2560 发出的特定签名。

如果您包含被错误对话框遮挡的 GUI，那就太好了，其中配置了 MCU 类型......

# android - 在android中处理子菜单的点击

> ID：15138581
> 
> 赞同：1
> 
> 时间：2013-02-28T14:54:49.477
> 
> 标签：android, submenu

我是 android 新手并且停留在我必须检测对 XML 文件中定义的子菜单的点击的地方

我的 XML 文件是：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item
        android:id="@+id/ccard_menu1"
        android:title="Select from Profile?"
        ></item>

    <item android:id="@+id/ccard_menu2"
        android:title="Add Field"
        >

        <menu >
            <item android:id="@+id/submenu1"
                android:title="Add Products"
                ></item>
            <item android:id="@+id/submenu2"
                android:title="Add Clients"
                ></item>

            <item android:id="@+id/submenu3"
                android:title="Add a Custom Field">s</item>

        </menu>
    </item>

</menu> 
```

如何在 onOptionsItemSelected 方法中检测对“子菜单 1、2、3”的点击？

我必须如何构造开关盒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:08:13.057

我你正在寻找这样的东西：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.your_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.submenu1:
            // do something
            return true;
        case R.id.submenu2:
            //do something else
            return true;

            // etc..
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

如果我错了，请纠正我。

# spring - @Secured 注解不适用于我在 JBoss EAP 6 中基于 Spring 3.1 的应用程序

> ID：15138582
> 
> 赞同：2
> 
> 时间：2013-02-28T14:54:50.060
> 
> 标签：spring, spring-security, spring-annotations

我正在使用 Spring 3.1 和 Spring Security 3.1 和 JBoss EAP 6。

我一直在尝试使用 Spring security @Secured 注解，但它不起作用。我认为我做对了，但显然有些地方是错的。

我已经在类、方法上尝试过@Secured，但我真正想要的地方是在接口上，这就是它在 Spring 文档中的说明。

**spring-security.xml 文件：**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
            xmlns:security="http://www.springframework.org/schema/security" 
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://www.springframework.org/schema/beans     
                                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                                http://www.springframework.org/schema/context   
                                http://www.springframework.org/schema/context/spring-context-3.0.xsd
                                http://www.springframework.org/schema/mvc       
                                http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
                                http://www.springframework.org/schema/security  
                                http://www.springframework.org/schema/security/spring-security-3.1.xsd">

        <security:global-method-security secured-annotations="enabled" />

        <security:http auto-config="true">
        <!-- Restrict URLs based on role -->
        <security:intercept-url pattern="/test/login*" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/test/logoutSuccess*" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/css/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/images/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/js/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/**" access="ROLE_USER, ROLE_ADMIN" />
        <security:intercept-url pattern="/test/admin**" access="ROLE_ADMIN" />      

        <!-- Override default login and logout pages -->
        <security:form-login login-page="/test/login" 
                     login-processing-url="/j_spring_security_check" 
                     default-target-url="/test/testHome" 
                     authentication-failure-url="/test/loginfailed" />
        <security:logout invalidate-session="true" logout-success-url="/test/logout" />
        </security:http>

        <security:authentication-manager>
            <security:authentication-provider>
                <security:user-service>
                    <security:user name="test_user" password="test" authorities="ROLE_ADMIN" />
                    <security:user name="test_admin" password="admin" authorities="ROLE_USER" />
                </security:user-service>
            </security:authentication-provider>
        </security:authentication-manager>

    </beans> 
```

**春天.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:jdbc="http://www.springframework.org/schema/jdbc"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:p="http://www.springframework.org/schema/p"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                                http://www.springframework.org/schema/jdbc
                                http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
                                http://www.springframework.org/schema/tx
                                http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                                http://www.springframework.org/schema/context
                                http://www.springframework.org/schema/context/spring-context-3.0.xsd">

        <context:annotation-config/>    
        <context:component-scan base-package="com.test.service"/>

    </beans> 
```

**mvc-config.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:mvc="http://www.springframework.org/schema/mvc"
        xsi:schemaLocation="http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
                http://www.springframework.org/schema/mvc     http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

        <context:component-scan base-package="com.test.service"/>

        <mvc:annotation-driven/>

        <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
            <property name="prefix" value="/WEB-INF/views/"/>
            <property name="suffix" value=".jsp"/>
        </bean>

        <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
            <property name="basenames">
                <list>
                    <value>mymessages</value>
                </list>
            </property>
        </bean>

    </beans> 
```

**客户端配置.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xmlns:oxm="http://www.springframework.org/schema/oxm"
        xsi:schemaLocation="http://www.springframework.org/schema/beans 
                            http://www.springframework.org/schema/beans/spring-beans.xsd
                    http://www.springframework.org/schema/oxm 
                    http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd">

        <oxm:jaxb2-marshaller id="marshaller" contextPath="com.test.service.ws" />

        <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
            <property name="location">
                <value>classpath:/environment.properties</value>
            </property>
        </bean>

        <bean id="webServiceTemplate" class="org.springframework.ws.client.core.WebServiceTemplate">
            <property name="marshaller" ref="marshaller" />
            <property name="unmarshaller" ref="marshaller" />
            <property name="defaultUri" value="${test.webServiceTemplate.defaultUri}" />
        </bean>

        <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
            <property name="location">
                <value>classpath:/activedirectory.properties</value>
            </property>
        </bean>

        <bean id="ldapActiveDirectoryAuthProvider" class="org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider">
            <constructor-arg value="${test.activeDirectory.domain}" />
            <constructor-arg value="${test.activeDirectory.activeDirectoryServer}" />
            <property name="userDetailsContextMapper" ref="tdrUserDetailsContextMapper" /> 
            <property name="useAuthenticationRequestCredentials" value="true" />        
            <property name="convertSubErrorCodesToExceptions" value="true"/>
        </bean>  

        <bean id="tdrUserDetailsContextMapper" class="com.test.service.web.user.impl.UserDetailsContextMapperImpl" />   

    </beans> 
```

**我的界面之一**

```
import org.springframework.security.access.annotation.Secured;

public interface TestService {

    @Secured ({"ROLE_XXX"})
    TestResponse getCustomer(TestRequest request);

} 
```

# c++ - 模板参数作为函数说明符和编译器优化

> ID：15138583
> 
> 赞同：3
> 
> 时间：2013-02-28T14:54:53.773
> 
> 标签：c++, cuda, nvcc

我发现[这篇](https://stackoverflow.com/questions/6179295/if-statement-inside-a-cuda-kernel/6179580#6179580)非常有用的帖子，我想澄清一下关于编译器优化的一些事情。假设我们有这个功能（和原来的帖子一样）：

```
template<int action>
__global__ void kernel()
{
    switch(action) {
       case 1:
       // First code
       break;

       case 2:
       // Second code
       break;
    }
} 
```

即使在我在编译时调用模板变量未知的函数的情况下，编译器是否会在消除无法访问的代码的意义上进行优化 - 比如创建两个单独的函数？例如：

```
kernel<argv[1][0]>(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:00:29.853

简短的回答：没有。

模板是在编译时实例化和生成的，因此您不能使用 argv 中的值，因为它们在编译时是未知的。

让我想知道为什么您不只是尝试一下并将该代码扔给编译器-它会告诉您模板参数必须是编译时常量。

**更新：** 由于您在评论中告诉我们它主要不是关于性能，而是关于可读性，我建议使用 switch/case：

```
template <char c> void kernel() {
  //...
  switch(c) { /* ... */ }
}

switch (argv[1][0]) {
  case 'a': 
    kernel<'a'>();
    break;
  case 'b': 
    kernel<'b'>();
    break;
  //...
} 
```

由于您必须在 (ie `argv[1][0]`) 上做出决定的值仅在运行时才知道，因此您必须使用运行时决定机制。其中，switch/case 是最快的，特别是如果没有太多不同的情况（但超过两个），特别是如果情况之间没有间隙（即'a'，'b'，'c'，而不是 1、55、2048）。然后编译器可以生成非常快速的跳转表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:47:05.887

作为模板的新手，我不得不研究一些基本问题。最后我想出了解决我的问题的方法。如果我想根据命令行参数调用带有模板参数的函数，我应该这样做：

```
if(argv[1][0] == '1')
    kernel<1><<< ... >>>();

if(argv[1][0] == '2')
    kernel<2><<< ... >>>(); 
```

我还检查了此类程序的 ptx 文件，发现编译器在这种情况下进行了优化，生成了两个不同的内核函数而没有`switch`声明。

# php - Cakephp ：与非常规表格的左右连接

> ID：15138584
> 
> 赞同：0
> 
> 时间：2013-02-28T14:54:53.797
> 
> 标签：php, database, cakephp, left-join

我正在使用现有的数据库（我无法更改它，并且它的表名不像蛋糕约定想要的那样），我想做一些左连接但不能正确执行：/

我已经定义了我的表，为它们提供了主键和模型中的关系。

这是我的问题：

表 Wysipage 可以有 0 到 n`wysipage_content`和 0 到 n `wysipage_menu`。一个元素 from`wysipage_content`对应于 1 且只有 1 个 Wysipage。来自的元素`wysipage_menu`对应于 0 或 1 个 Wysipage。

我想提出一个请求，他会给我一份来自 Wysipages 的所有元素的列表，以及它们最终的内容和菜单，所有这些都在一个表中，并且只有一个请求。

这是我的表定义（我避免使用整个架构，请注意有一个`wp_id`和一个`wp_name`列）：

```
class Wysipage extends AppModel {
var $actsAs = array('Containable');
    public $useTable = 'wysipage'; 
public $primaryKey = 'wp_id';
public $displayField = 'wp_name';
var $hasMany = array(
'un' => array(
    'Wysipage_contenu' => array(
        'className'     => 'Wysipage_contenu',
        'foreignKey'    => 'wpc_wp_id',
    )),
'deux' => array(
    'Wysipage_menu' => array(
        'className'     => 'Wysipage_menu',
        'foreignKey'    => 'wpm_wp_id',
    ))
);

class Wysipage_contenu extends AppModel {
var $actsAs = array('Containable');
    public $useTable = 'wysipage_contenu'; 
public $primaryKey = 'wpc_id';
public $displayField = 'wpc_h1';
public $belongsTo = array(
        'Wysipage' => array(
            'className'    => 'Wysipage',
            'foreignKey'    => 'wp_id'
        )
);

class Wysipage_menu extends AppModel {
var $actsAs = array('Containable');
public $useTable = 'wysipage_menu'; 
public $primaryKey = 'wm_id';
public $displayField = 'wm_lien';
public $belongsTo = array(
        'Wysipage' => array(
            'className'    => 'Wysipage',
            'foreignKey'    => 'wm_wp_id'
        )
); 
```

这是我尝试请求的代码（但失败）：

```
$this->loadModel('Wysipage_contenu');
    $this->loadModel('Wysipage_menu');

    $this->Wysipage->contain();
    $mes_wysipages = $this->Wysipage->find('all', array('joins' => array(
        array(
            'table' => 'wysipage_contenu',
            'alias' => 'wpc',
            'type' => 'LEFT',
            'conditions'=> array('wpc.wpc_wp_id = Wysipage.wp_id')
        ),
        array(
            'table' => 'wysipage_menu',
            'alias' => 'wpm',
            'type' => 'LEFT',
            'conditions'=> array('wpm.wm_wp_id = Wysipage.wp_id')
        )
    )));

    $this->set('wysipages', $mes_wysipages);
    $this->render(); 
```

我做错了什么？我的模型声明中有问题吗？还是我使用了错误的请求类型？:(

我想提出的要求很简单：

```
SELECT wp_id, wp_name, wpc_id, wpc_name
FROM wysipage
LEFT JOIN wysipage_contenu ON wysipage.wp_id = wysipage_contenu.wpc_wp_id 
```

只是这个 ：（

我什至不确定我想要左连接还是右连接，但无论如何问题仍然存在，这段代码给了我错误的答案，多次出现相同的行：/

谢谢 ：/

PS：对不起我的英语不好，这不是我的母语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:53:26.790

您不能在同一查询中连接 wp_id 上的内容和菜单表，因为它们都与 wp_id 具有多对一关系，并且对于内容中的每一行，在这种连接的结果中，菜单中的所有行都具有相同的 wp_id。您需要进行 2 次查询：一次查询内容，一次查询菜单。或者，如果列出两个表需要相同的列，则可以合并这两个查询的两个结果。

# ios - 当屏幕锁定时，如何让通过 AirPlay 流式传输的视频不暂停？

> ID：15138588
> 
> 赞同：3
> 
> 时间：2013-02-28T14:54:58.927
> 
> 标签：ios, objective-c, video, airplay

我同时使用 a`MPMoviePlayerViewController`和 a`MPMoviePlayerController`在我的应用程序中播放视频。我还允许使用 AirPlay 将这些视频流式传输到 Apple TV。

这一切都很好。唯一的问题是，当屏幕被锁定时，流媒体视频会暂停。

我注意到，很多应用程序都支持此功能，但我不知道如何实现此功能。

我试图设置：

```
moviePlayerViewController.moviePlayer.useApplicationAudioSession = NO; 
```

但这在 iOS 5 或 iOS 6 上都不起作用，所以我尝试使用：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

但这甚至没有编译。

两种方式都在这里讨论：`http://stackoverflow.com/questions/12814574/how-to-support-airplay-in-the-background-in-ios6`

我能做些什么？或者我做错了什么？

非常感谢！

安德烈亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:58:32.477

[这个答案](https://stackoverflow.com/a/14823268/1219698)和[这个答案也](https://stackoverflow.com/questions/12814574/how-to-support-airplay-in-the-background-in-ios6)应该对您有所帮助，我在我的一个应用程序中遇到了同样的问题，这些都有帮助。让我知道它是否不起作用。

# c# - 如果我们将数据存储在 .txt 文件中，如何验证和返回数据？

> ID：15138589
> 
> 赞同：3
> 
> 时间：2013-02-28T14:55:00.767
> 
> 标签：c#, streamreader

我有一个记事本 (.txt) 文件，其中包含三个字段，即 ID 名称和位置。我想使用 streamreader 在 C# 中读取这些数据并检查文件中是否存在 ID 的条件。如果是，我应该将该行作为输出，否则错误。

假设我有以下 txt 文件，其字段为

```
00125  JAMES  LONDON
00127  STARK  USA
00128  ARNOLD AUSTRALIA 
```

现在，我应该要求用户在那里输入 ID。如果 Id 匹配，那么我应该将该特定行作为输出。例如，如果用户输入 00127 那么我应该得到输出

```
00127 JAMES LONDON 
```

我知道如果数据存储在数据库中，这将非常简单。但是，如果数据存储在 .txt 文件中会怎样。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:11:21.590

最简单的解决方案（假设您有固定的 ID 格式 - 五位数字）：

```
var users = File.ReadAllLines("data.txt")
                .ToDictionary(line => line.Substring(0, 5)); 
```

这将创建字典，其中行作为值，id 作为键。用法：

```
string line = users["00125"]; // 00125  JAMES  LONDON 
```

* * *

那是最简单的解决方案。但实际上，我会介绍一些课程，例如：

```
public class User
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Location { get; set; }

    public static User Parse(string s)
    {
        var parts = s.Split(new []{' '}, StringSplitOptions.RemoveEmptyEntries);
        return new User {
            Id = Int32.Parse(parts[0]),
            Name = parts[1],
            Location = parts[2]
        };
    }

    public override string ToString()
    {
        return String.Format("{0:00000} {1} {2}", Id, Name, Location);
    }
} 
```

然后解析每一行并将用户放入类型的字典`Dictionary<int, User>`。这将使您的代码具有强类型并且更易于维护：

```
var users = File.ReadAllLines("data.txt")
                .Select(line => User.Parse(line))
                .ToDictionary(u => u.Id);

var user = users[127];
string name = user.Name; // STARK
Console.WriteLine(user); // 00127 STARK USA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:01:38.247

您可以使用`StreamReader`读取文件中的内容。

然后，您可以拆分`String`using `Split`。

这样，您就可以将所有项目添加到二维数组中。然后数组看起来像`{{00125, JAMES, LONDON}, {00127, STARK, USA}, {00128, ARNOLD, AUSTRALIA}}`. 使用它，您可以将输入与每个数组的第一个条目进行比较，并相应地返回数据。

这应该让您清楚地了解从现在开始的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:06:44.573

有几种选择：

*   每次收到请求时都要阅读该死的文件。如果文件很小并且请求不频繁，这将正常工作。您逐行阅读，并与`id`用户的`id`. 实施起来确实很快，但在资源利用方面非常愚蠢。运行时间复杂度为 O(N) - 在最坏的情况下您需要扫描整个文件。

*   您可以修改第一个选项并添加一层缓存。如果您经常查询相同的`id`内容，您将获得很好的性能提升。运行时间复杂度仍然是 O(N) - 在最坏的情况下您需要扫描整个文件。而这离快速还差得很远。

*   您也可以尝试对文件进行`ids`一次排序。使用最好的算法，这将需要`O(N x Log(N)`时间，即您在预处理数据时所花费的*时间*。但是，任何读取查询都可以`O(Log(N))`使用基于`id`.

如果您正在寻找代码片段，我会搜索`StreamReader`, `TextReader`, `StreamWriter`, `binary search`, `quick sort`. 野外有很多样品...

# php - 如何停止 jQuery 帖子页面刷新

> ID：15138590
> 
> 赞同：2
> 
> 时间：2013-02-28T14:55:03.460
> 
> 标签：php, jquery, forms, post, refresh

我正在通过 PHP 从 MySQL 数据库中获取数据。我正在使用 jQuery 从 PHP 发送和获取数据。这是代码。

```
$.POST("SubmitCode.php", $("#questionCodeForm").serialize(),'json').done(function(data) {}); 
```

现在的问题是，一旦我发送了这些数据，页面就会刷新。如何停止页面刷新。如果我删除“json”，则页面停止刷新，但问题是我想在不刷新页面的情况下获取 json 数据。我怎样才能做到这一点？

------------------------------------------编辑后------ -------------------------------------------------- ---------------------- 这是更新的代码

```
$(document).ready(function() {
    initialization();

    codeSubmission();
});

function initialization() {
    $("#answerForm").hide();
}

function codeSubmission() {
  $("#submitButton").click(function(e) {
    e.preventDefault();
    $.post("SubmitCode.php", $("#questionCodeForm").serialize()).done(function(data) {
        var questionName = data.questionName,
            options = data.options,
            pollingStatus = data.pollingStatus,
            codeExist = data.codeExist;

        alert(data);
        alert(data[1]);
        alert(questionName);
        alert(options);

        if(codeExist == true) {
            $("#questionTitle").text("questionName");

            for(rowNum=1;rowNum<=5;rowNum++) {
                $("#checkbox-"+rowNum).val("Answer1");
                $("#checkbox"+rowNum+"label").text("Answer"+rowNum);
            } 

            $("#answerForm").slideDown(500);

        } else if(codeExist == false) {
            alert("This quiz code is invalid");
        }   
    },'json');  
    //return false;
  });
    //return false;
} 
```

现在的问题是 alert(questionName) 的输出未定义。数据作为字符串传递。如何在正确的变量中获得正确的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:59:33.937

试试这个：（注意回调函数的位置，和小写的 .post 方法）

```
$.post("SubmitCode.php", $("#questionCodeForm").serialize(),function(data) {
  //manipulate your data here

 },'json'); 
```

还要确保触发帖子的任何内容都不是实际链接，如果是，您需要阻止默认操作的发生。例如：

```
<a href="submit.php">Click here to submit</a> 
```

javascript:

```
$(a).click(function(e) { 
e.preventDefault();
$.post("SubmitCode.php", $("#questionCodeForm").serialize(),function(data) {
  //manipulate your data here

 },'json');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:01:44.900

您还必须在客户端解析 json。您可以使用

obj = jQuery.parseJSON(数据);

# sql-server - nvarchar 连接/索引/nvarchar(max) 莫名其妙的行为

> ID：15138593
> 
> 赞同：12
> 
> 时间：2013-02-28T14:55:16.060
> 
> 标签：sql-server, sql-server-2012, string-concatenation, nvarchar

我今天在 SQL Server（2008R2 和 2012）中遇到了一个非常奇怪的问题。我正在尝试使用连接结合`select`语句来构建字符串。

我找到了解决方法，但我真的很想了解这里发生了什么以及为什么它没有给我预期的结果。有人可以向我解释吗？

[http://sqlfiddle.com/#!6/7438a/1](http://sqlfiddle.com/#!6/7438a/1)

根据要求，还有这里的代码：

```
-- base table
create table bla (
    [id] int identity(1,1) primary key,
    [priority] int,
    [msg] nvarchar(max),
    [autofix] bit
)

-- table without primary key on id column
create table bla2 (
    [id] int identity(1,1),
    [priority] int,
    [msg] nvarchar(max),
    [autofix] bit
)

-- table with nvarchar(1000) instead of max
create table bla3 (
    [id] int identity(1,1) primary key,
    [priority] int,
    [msg] nvarchar(1000),
    [autofix] bit
)

-- fill the three tables with the same values
insert into bla ([priority], [msg], [autofix])
values (1, 'A', 0),
       (2, 'B', 0)

insert into bla2 ([priority], [msg], [autofix])
values (1, 'A', 0),
       (2, 'B', 0)

insert into bla3 ([priority], [msg], [autofix])
values (1, 'A', 0),
       (2, 'B', 0)
;
declare @a nvarchar(max) = ''
declare @b nvarchar(max) = ''
declare @c nvarchar(max) = ''
declare @d nvarchar(max) = ''
declare @e nvarchar(max) = ''
declare @f nvarchar(max) = ''

-- I expect this to work and generate 'AB', but it doesn't
select @a = @a + [msg]
    from bla
    where   autofix = 0
    order by [priority] asc

-- this DOES work: convert nvarchar(4000)
select @b = @b + convert(nvarchar(4000),[msg])
    from bla
    where   autofix = 0
    order by [priority] asc

-- this DOES work: without WHERE clause
select @c = @c + [msg]
    from bla
    --where autofix = 0
    order by [priority] asc

-- this DOES work: without the order by
select @d = @d + [msg]
    from bla
    where   autofix = 0
    --order by [priority] asc

-- this DOES work: from bla2, so without the primary key on id
select @e = @e + [msg]
    from bla2
    where   autofix = 0
    order by [priority] asc

-- this DOES work: from bla3, so with msg nvarchar(1000) instead of nvarchar(max)
select @f = @f + [msg]
    from bla3
    where   autofix = 0
    order by [priority] asc

select @a as a, @b as b, @c as c, @d as d, @e as e, @f as f 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-01T17:10:41.937

**TLDR；**这不是用于跨行连接字符串的记录/支持的方法。它有时有效，但有时也会失败，因为这取决于您获得的执行计划。

而是使用以下有保证的方法之一

**SQL Server 2017+**

```
SELECT @a = STRING_AGG([msg], '') WITHIN GROUP (ORDER BY [priority] ASC)
FROM bla
where   autofix = 0 
```

**SQL Server 2005+**

```
SELECT @a = (SELECT [msg] + ''
             FROM   bla
             WHERE  autofix = 0
             ORDER  BY [priority] ASC
             FOR XML PATH(''), TYPE).value('.', 'nvarchar(max)') 
```

**背景**

VanDerNorth 已经链接的[知识库文章确实包含以下行](https://web.archive.org/web/20140724144829/http://support.microsoft.com/kb/287515)

> 聚合串联查询的正确行为未定义。

但随后通过提供一种似乎确实表明确定性行为是可能的解决方法继续使水域变得混乱。

> 为了从聚合串联查询中获得预期结果，请将任何 Transact-SQL 函数或表达式应用于 SELECT 列表中的列，而不是 ORDER BY 子句中的列。

您有问题的查询不会将任何表达式应用于`ORDER BY`子句中的列。

2005 年的文章[SQL Server 中的排序保证...](https://docs.microsoft.com/en-us/archive/blogs/sqltips/ordering-guarantees-in-sql-server)确实说明了

> 出于向后兼容性的原因，SQL Server 在最顶层范围内支持 SELECT @p = @p + 1 ... ORDER BY 类型的赋值。

在连接按预期工作的计划中，带有表达式的计算标量`[Expr1003] = Scalar Operator([@x]+[Expr1004])`出现在排序上方。

在它无法工作的计划中，计算标量出现在排序下方。正如2006 年的[连接项](https://web.archive.org/web/20101225221125/http://connect.microsoft.com/SQLServer/feedback/details/237268/select-x-x-y-with-multiple-rows-is-broken-in-2005)中所解释的，当表达式`@x = @x + [msg]`出现在为每一行评估它的排序下方时，但所有评估最终都使用 的预分配值`@x`。在2006 年的[另一个类似的 Connect Item](https://connect.microsoft.com/SQLServer/feedback/details/214424/wrong-result-of-concatenation-when-order-by-used-in-the-query)中，微软的回应谈到了“解决”这个问题。

Microsoft 对有关此问题的所有后续 Connect 项目的响应（并且有很多）声明这根本无法保证

[示例 1](https://connect.microsoft.com/SQLServer/feedback/details/345947/n-varchar-building-from-resultset-fails-when-order-by-is-added)

> 我们不对串联查询的正确性做出任何保证（例如使用变量赋值和特定顺序的数据检索）。SQL Server 2008 中的查询输出可能会根据计划选择、表中的数据等发生变化。即使语法允许您编写将有序行检索与变量赋值混合的 SELECT 语句，您也不应该依赖于这种一致的工作方式。

[示例 2](https://connect.microsoft.com/SQLServer/feedback/details/383641/in-variable-concatenation-and-order-by-filters-results-like-where-condition)

> 您看到的行为是设计使然。在带有 ORDER BY 子句的查询中使用赋值操作（本示例中的连接）具有未定义的行为。由于查询计划的更改，这可能会因版本而异，甚至在特定服务器版本中也会发生变化。即使有变通方法，您也不能依赖此行为。有关详细信息，请参阅下面的知识库文章：http:
> [//support.microsoft.com/kb/287515](http://support.microsoft.com/kb/287515) 唯一保证机制如下：
> 
> 1.  使用游标以特定顺序遍历行并连接值
> 2.  用于带有 ORDER BY 的 xml 查询以生成连接值
> 3.  使用 CLR 聚合（这不适用于 ORDER BY 子句）

[示例 3](https://connect.microsoft.com/SQLServer/feedback/details/522052/common-table-expression-fails-with-local-variable-in-case-statement)

> 您看到的行为实际上是设计使然。这与 SQL 作为一种集合操作语言有关。不能保证 SELECT 列表中的所有表达式（这也包括赋值）对于每个输出行都只执行一次。事实上，SQL 查询优化器尽可能少地执行它们。当您根据表中的某些数据计算变量的值时，这将给出预期的结果，但是当您分配的值取决于同一变量的先前值时，结果可能非常出乎意料。如果查询优化器将表达式移动到查询树中的不同位置，则它可能会被评估更少的时间（或仅一次，如您的示例之一）。这就是我们不建议使用“迭代”类型分配来计算聚合值的原因。

[示例 4](https://connect.microsoft.com/SQLServer/feedback/details/606786/concatenation-into-a-scalar-variable-using-linked-server-in-from-clause-fails-when-casting-or-converting-data)

> 即使没有 ORDER BY，我们也不保证 @var = @var + 将为影响多行的任何语句生成连接值。在查询执行期间，表达式的右侧可以被评估一次或多次，并且我所说的行为取决于计划。

[示例 5](https://connect.microsoft.com/SQLServer/feedback/details/704389/tvf-with-multi-row-string-concatenation-doesnt-concatenate)

> 带有 SELECT 语句的变量赋值是一种专有语法（仅限 T-SQL），如果产生多行，则行为未定义或依赖于计划。如果您需要进行字符串连接，则使用 SQLCLR 聚合或基于 FOR XML 查询的连接或其他关系方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:39:17.020

看起来有点像这篇文章：[VARCHAR(MAX) 在连接字符串时表现得很奇怪](https://stackoverflow.com/questions/4780513/varcharmax-acting-weird-when-concatenating-string)

那里的结论： *这种字符串连接的方法通常确实有效，但不能保证。 [知识库文章中针对类似问题的官方](http://support.microsoft.com/kb/287515/en-us)说法是“未定义聚合连接查询的正确行为”。*

# java - Spring 和日志记录属性文件

> ID：15138595
> 
> 赞同：0
> 
> 时间：2013-02-28T14:55:18.337
> 
> 标签：java, spring, apache-commons-logging

我正在尝试使用 Spring。Spring的一个依赖是

所以我已经添加`commons-logging-1.1.1.jar`到我的构建路径中。这一切都很好。我得到这样的东西：

```
Feb 28, 2013 2:40:39 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@c63a8af: startup date [Thu Feb 28 14:40:39 GMT 2013]; root of context hierarchy 
```

这一切都很好，但我不想把它打印到我的标准输出，我希望它被发送到一个文件中。

目录结构：

```
project
  src
    com.myproject.classes
    myspring.xml
    log4j.properties
  test
    com.myproject.classes
  logs
    myproject.log 
```

所以我想将所有日志从标准输出重定向到日志文件。这可能与春天？

我使用了这里的属性文件：[http](http://www.tutorialspoint.com/spring/logging_with_log4j.htm) ://www.tutorialspoint.com/spring/logging_with_log4j.htm ，我从那里得到了我的 Spring 示例。但这似乎没有任何区别。我也在那里添加了一些垃圾，看看是否有任何异常被抛出，但什么也没有。我尝试将文件移动到不同的目录，但它仍然不起作用。

这里是：

```
# Define the root logger with appender file
log4j.rootLogger = DEBUG, FILE

# Define the file appender
log4j.appender.FILE=org.apache.log4j.FileAppender
# Set the name of the file
log4j.appender.FILE.File=logs/myproject.log

# Set the immediate flush to true (default)
log4j.appender.FILE.ImmediateFlush=true

# Set the threshold to debug mode
log4j.appender.FILE.Threshold=debug

# Set the append to false, overwrite
log4j.appender.FILE.Append=false

# Define the layout for file appender
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.conversionPattern=%m%n 
```

有人有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:56:45.583

试试这个配置： http: [//forum.springsource.org/showthread.php?94000-org-springframework-util-Log4jConfigurer-is-overriding-my-log4j-xml](http://forum.springsource.org/showthread.php?94000-org-springframework-util-Log4jConfigurer-is-overriding-my-log4j-xml)

阅读配置类：[http ://static.springsource.org/spring/docs/1.1.x/api/org/springframework/util/Log4jConfigurer.html](http://static.springsource.org/spring/docs/1.1.x/api/org/springframework/util/Log4jConfigurer.html)

对于日志配置的源代码 - 通过这个：

[http://git.springsource.org/sandbox/cbeams/blobs/bb96df1ed8e3720f33353824b108104027289e5c/org.springframework.core/src/main/java/org/springframework/util/Log4jConfigurer.java](http://git.springsource.org/sandbox/cbeams/blobs/bb96df1ed8e3720f33353824b108104027289e5c/org.springframework.core/src/main/java/org/springframework/util/Log4jConfigurer.java)

# php - 带有 FOSUserBundle 的 Symfony2 - 如何向我的应用程序添加没有层次结构的角色

> ID：15138598
> 
> 赞同：0
> 
> 时间：2013-02-28T14:55:22.290
> 
> 标签：php, symfony, fosuserbundle

我正在创建一个需要 2 个角色的 Web 应用程序。医生和病人。它们通过多对多关系连接（患者可以有多个医生，反之亦然），并且医生应该能够查看其患者的数据，但不能对其进行编辑。

我正在使用 FOSUserBundle 并遵循有关使用角色的文档。但是，我看到的文档并不能帮助我创建这些角色。我尝试了 symfony2 文档的安全部分，但它显示了如何创建角色层次结构——对我来说没有帮助。

我该如何着手解决这个问题？

编辑：更准确地说：真正的问题是如何添加这两个角色。也许我不需要组...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:08:34.333

我想我解决了它：

[http://symfony.com/doc/current/book/security.html#roles](http://symfony.com/doc/current/book/security.html#roles)

> 这个角色不需要在任何地方定义——你可以开始使用它。

编辑：只需 $user->addRole("ROLE_MEDIC");

# c# - 启用下拉菜单

> ID：15138599
> 
> 赞同：0
> 
> 时间：2013-02-28T14:55:25.880
> 
> 标签：c#, .net, winforms, combobox

我想禁用 a `combobox`，但同时我想让用户看到其他可用选项（也就是说，我想启用`dropdown`）。

默认情况下，当`ComboBox.Enabled = false`，`dropdown`也被禁用（当我们单击 时没有任何反应`combobox`）。

我的第一个想法是让它保持启用状态并处理它`ComboBox.SelectedIndex event`以将其设置回默认值（我只需要以某种方式将其变灰。）

我想知道是否有任何像这样的本机功能是我缺少的，或者是否有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:00:44.237

如果您不想要组合框功能，请不要使用组合框。请改用 ListView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:03:11.290

“所见即所得”组合框似乎是个坏主意。我建议改用 ListBox。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:51:05.990

这是一个*hacky*解决方法，但它应该完成与您的请求类似的事情：

```
public partial class Form1 : Form
{
    ComboBox _dummy;

    public Form1()
    {
        InitializeComponent();

        // set the style
        comboBox1.DropDownStyle = 
            System.Windows.Forms.ComboBoxStyle.DropDownList;
        // disable the combobox
        comboBox1.Enabled = false;

        // add the dummy combobox
        _dummy = new ComboBox();
        _dummy.Visible = false;
        _dummy.Enabled = true;
        _dummy.DropDownStyle = ComboBoxStyle.DropDownList;
        this.Controls.Add(_dummy);

        // add the event handler
        MouseMove += Form1_MouseMove;
    }

    void Form1_MouseMove(object sender, MouseEventArgs e)
    {
        var child = this.GetChildAtPoint(e.Location);
        if (child == comboBox1)
        {
            if (!comboBox1.Enabled)
            {
                // copy the items
                _dummy.Items.Clear();
                object[] items = new object[comboBox1.Items.Count];
                comboBox1.Items.CopyTo(items, 0);
                _dummy.Items.AddRange(items);

                // set the size and position
                _dummy.Left = comboBox1.Left;
                _dummy.Top = comboBox1.Top;
                _dummy.Height = comboBox1.Height;
                _dummy.Width = comboBox1.Width;

                // switch visibility
                comboBox1.Visible = !(_dummy.Visible = true);
            }
        }
        else if (child != _dummy)
        {
            // switch visibility
            comboBox1.Visible = !(_dummy.Visible = false);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T15:55:56.073

如果使用 a`ListBox`作为建议的其他答案不方便。有一种方法是创建自定义组合框并添加`ReadOnly`属性。试试这个代码：

```
class MyCombo : System.Windows.Forms.ComboBox
{
    public bool ReadOnly { get; set; }
    public int currentIndex;

    public MyCombo()
    {
        currentIndex = SelectedIndex ;
    }

    protected override void OnSelectedIndexChanged(EventArgs e)
    {
        if (ReadOnly && Focused)
            SelectedIndex = currentIndex;

        currentIndex = SelectedIndex;

        base.OnSelectedIndexChanged(e);
    }

} 
```

通常只读控件的背景颜色不应该改变，所以我没有做那部分。

# java - EclipseLink 2.3 加 Oracle 11g 批量编写

> ID：15138603
> 
> 赞同：3
> 
> 时间：2013-02-28T14:55:32.533
> 
> 标签：java, oracle, eclipselink, dao, batch-processing

我有一个 Oracle 11g 数据库，我通过 EclipseLink 2.3 连接到它。我的项目中的一个实体应该经常持久化（例如，每秒 10 次），这比其他实体要多。为了提高交易的性能，我在 pesistence.xml 中添加了以下行来激活批量写入。

```
 <property name="eclipselink.jdbc.batch-writing" value="JDBC"/> 
```

但是，我认为它将打开所有实体的批量写入。我想问一下：

1) 除了将上述行添加到我的 persistence.xml 之外，我还需要更改我的 DAO 文件中的其他任何内容吗？

2) 如果批量编写对其他实体有任何不利之处，我如何才能在 EclipseLink 中只为一个实体打开批量编写？

3) 我应该保留值“JDBC”还是应该在属性中切换到“Oracle-JDBC”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:24:22.393

1.  **不**，这个配置指令是启用批量写入所需的一切。

2.  不可以，**只能为每个持久性单元设置批量写入**。
    从理论上讲，您可以将持久性单元拆分为更小的部分，并仅为其中一个启用批量写入。但我不会那样做。我认为启用批量写入没有问题。

3.  **我会保留 JDBC。**这是最兼容的（并且可能是经过最多测试的）方法。
    不同的是，Oracle-JDBC 使用 oracle 专有的原生批量写入，而 JDBC 则依赖 JDBC 标准。Oracle-JDBC 的性能可能会好一点，但很可能不值得这些缺点。
    但是，如果您担心插入性能，则应该测量差异。

*顺便说一句：每秒 10 个实体恕我直言，这并不是一个很大的数字。一些应用程序每秒执行 1000 次持久化（或更多）。*

# extjs3 - 我在 extjs 3 中有一个 getCmp

> ID：15138606
> 
> 赞同：-1
> 
> 时间：2013-02-28T14:55:42.167
> 
> 标签：extjs3

我想问一下定义

```
Ext.getCmp('').root.reload();
Ext.getCmp('').getForm().reset();
Ext.getCmp('').focus(false, 500);
Ext.getCmp('').getSelectionModel().getSelectedNode();
Ext.getCmp('').getForm().setValues();
Ext.getCmp('').getSelectionModel().getSelectedNode(); 
```

Ext.getCmp 和函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:03:53.087

你可以检查： [http ://docs.sencha.com/ext-js/4-0/#!/api/Ext-method-getCmp](http://docs.sencha.com/ext-js/4-0/#!/api/Ext-method-getCmp)

此外，不建议将 getCmp 用于编码。但对学习、调试和破解有帮助。我喜欢这个截屏视频： [http ://www.sencha.com/forum/showthread.php?109307-Screencast-quot-The-dangers](http://www.sencha.com/forum/showthread.php?109307-Screencast-quot-The-dangers)

# python - 如何使用 Python 读取 URL 的内容？

> ID：15138614
> 
> 赞同：108
> 
> 时间：2013-02-28T14:55:56.573
> 
> 标签：python

当我将它粘贴到浏览器上时，以下工作：

```
http://www.somesite.com/details.pl?urn=2344 
```

但是当我尝试用 Python 读取 URL 时，什么也没有发生：

```
 link = 'http://www.somesite.com/details.pl?urn=2344'
 f = urllib.urlopen(link)           
 myfile = f.readline()  
 print myfile 
```

我需要对 URL 进行编码，还是有什么我看不到的东西？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2013-02-28T14:59:55.040

要回答您的问题：

```
import urllib

link = "http://www.somesite.com/details.pl?urn=2344"
f = urllib.urlopen(link)
myfile = f.read()
print(myfile) 
```

你需要`read()`，而不是`readline()`

编辑（2018-06-25）：从 Python 3 开始，旧版本`urllib.urlopen()`被替换为（有关详细信息，请参阅[https://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen](https://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen)`urllib.request.urlopen()`的注释） .

如果您使用的是 Python 3，请参阅 Martin Thoma 或 innm 在此问题中的回答： [https](https://stackoverflow.com/a/28040508/158111) ://stackoverflow.com/a/28040508/158111 （Python 2/3 兼容） [https://stackoverflow.com/a/45886824 /158111](https://stackoverflow.com/a/45886824/158111)（Python 3）

或者，只需在此处获取此库：http: [//docs.python-requests.org/en/latest/](http://docs.python-requests.org/en/latest/)并认真使用它:)

```
import requests

link = "http://www.somesite.com/details.pl?urn=2344"
f = requests.get(link)
print(f.text) 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2017-08-25T17:38:01.280

对于`python3`用户，为了节省时间，请使用以下代码，

```
from urllib.request import urlopen

link = "https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html"

f = urlopen(link)
myfile = f.read()
print(myfile) 
```

我知道 error: 有不同的线程`Name Error: urlopen is not defined`，但认为这可能会节省时间。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2019-05-24T14:50:18.127

这些答案都不是非常适合 Python 3（在本文发布时已在最新版本上测试）。

这就是你的做法...

```
import urllib.request

try:
   with urllib.request.urlopen('http://www.python.org/') as f:
      print(f.read().decode('utf-8'))
except urllib.error.URLError as e:
   print(e.reason) 
```

以上是返回“utf-8”的内容。如果您希望python“猜测适当的编码”，请删除 .decode('utf-8') 。

文档： [https ://docs.python.org/3/library/urllib.request.html#module-urllib.request](https://docs.python.org/3/library/urllib.request.html#module-urllib.request)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-01-20T08:17:55.973

与 Python 2.X 和 Python 3.X 一起使用的解决方案利用了 Python 2 和 3 兼容性库[`six`](https://pythonhosted.org/six/)：

```
from six.moves.urllib.request import urlopen
link = "http://www.somesite.com/details.pl?urn=2344"
response = urlopen(link)
content = response.read()
print(content) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-08T09:21:12.743

我们可以读取网站 html 内容如下：

```
from urllib.request import urlopen
response = urlopen('http://google.com/')
html = response.read()
print(html) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-24T07:14:58.337

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
# Works on python 3 and python 2.
# when server knows where the request is coming from.

import sys

if sys.version_info[0] == 3:
    from urllib.request import urlopen
else:
    from urllib import urlopen
with urlopen('https://www.facebook.com/') as \
    url:
    data = url.read()

print data

# When the server does not know where the request is coming from.
# Works on python 3.

import urllib.request

user_agent = \
    'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.7) Gecko/2009021910 Firefox/3.0.7'

url = 'https://www.facebook.com/'
headers = {'User-Agent': user_agent}

request = urllib.request.Request(url, None, headers)
response = urllib.request.urlopen(request)
data = response.read()
print data 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-28T14:58:18.823

URL 应该是一个字符串：

```
import urllib

link = "http://www.somesite.com/details.pl?urn=2344"
f = urllib.urlopen(link)           
myfile = f.readline()  
print myfile 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-08-22T11:00:39.113

我使用了以下代码：

```
import urllib

def read_text():
      quotes = urllib.urlopen("https://s3.amazonaws.com/udacity-hosted-downloads/ud036/movie_quotes.txt")
      contents_file = quotes.read()
      print contents_file

read_text() 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-11-27T07:37:44.617

```
# retrieving data from url
# only for python 3

import urllib.request

def main():
  url = "http://docs.python.org"

# retrieving data from URL
  webUrl = urllib.request.urlopen(url)
  print("Result code: " + str(webUrl.getcode()))

# print data from URL 
  print("Returned data: -----------------")
  data = webUrl.read().decode("utf-8")
  print(data)

if __name__ == "__main__":
  main() 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-05-16T07:59:27.640

```
from urllib.request import urlopen

# if has Chinese, apply decode()
html = urlopen("https://blog.csdn.net/qq_39591494/article/details/83934260").read().decode('utf-8')
print(html) 
```

# pdf - fop pdf 空白偶数页

> ID：15138618
> 
> 赞同：1
> 
> 时间：2013-02-28T14:56:11.667
> 
> 标签：pdf, apache-fop

我正在使用 Apache FOP 生成 PDF。我要求仅在奇数页中显示内容并将偶数页留空。通过将“区域主体”的边距顶部设置为页面的整个高度，我设法在 FOP 0.95 及以下的情况下做到了这一点。

```
<fo:simple-page-master master-name="PageMaster-Even" page-height="279mm" page-width="216mm" margin-left="12mm" margin-top="0mm" margin-bottom="0mm">
  <fo:region-body margin-top="279mm"/>
</fo:simple-page-master> 
```

最近我将 FOP 版本更新到 1.1 以支持一些附加功能。现在使用 FOP 1.1，上述逻辑不起作用。感谢是否有人可以帮助我提出使我的文本仅出现在奇数页上的建议。请注意，我的数据以 xml 格式发送，我使用 xsl 将其转换为 fo 文件。

# jquery - window.scroll 事件行为不端

> ID：15138620
> 
> 赞同：0
> 
> 时间：2013-02-28T14:56:18.753
> 
> 标签：jquery, viewport

正如 john resig 在他的博客中所暗示的那样，将处理程序附加到事件是一种[非常](http://ejohn.org/blog/learning-from-twitter/)非常**糟糕的做法**，如果我应该像主要网站那样使用这种方法，或者在页面末尾显示**更多负载**`window.scroll`以获取，我只是感到困惑更多内容。 **`div`**

 **我正在使用以下测试代码：

```
$(document).ready(function() {
            $(window).scroll(function () {
 if ($(window).scrollTop() >= $(document).height() - $(window).height() - 200) {
  alert('end of page');
     }
});
        }); 
```

但是它的作用是，一旦触发该函数，滚动条就会开始出现异常行为，并且在移动鼠标时它会以某种方式继续滚动页面。

请帮助查找问题以及此功能的最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:04:44.907

我对这个比较有更好的运气：

```
$(window).scroll(function () {
    if ($(window).scrollTop() + $(window).height() >= $(document).height() - 65) {
        alert('end of page');
    }
}); 
```

希望这可以解决您的问题，如果不能更好地解释给您带来麻烦的滚动行为？

**更新：**

```
$(window).on('scroll', function () { do_things(); });

function do_things(){

    if ($(window).scrollTop() + $(window).height() >= $(document).height() - 65) {

        // Unbind the scroll
        $(window).off('scroll');

        // Log a message
        console.log('do some things here');

        // Wiat for 10 seconds
        setTimeout(function() {
            // Rebind the scroll
            $(window).on('scroll', function () { do_things(); });
        }, 10000);

    }
} 
```**

# scala - Scalatest 和 scalamock - 涉及 SuiteMixin 的依赖问题

> ID：15138623
> 
> 赞同：4
> 
> 时间：2013-02-28T14:56:22.657
> 
> 标签：scala, maven, mocking, dependency-management, scalatest

我正在尝试将我的项目设置为使用 scalatest 和 scalamock。我正在使用 scala 版本 2.10.0。
但是，我似乎无法获得正确的依赖关系。

我从这段代码开始：

```
class  ControllerTest extends org.scalatest.FunSuite 
                      with org.scalamock.scalatest.MockFactory {} 
```

我尝试了两种版本组合：

1)

*   org.scalatest：**scalatest_2.10**：**1.9.1**

*   org.scalamock：**scalamock-scalatest-support_2.10**：**3.0.1**

这就是我得到的：

```
scala: bad symbolic reference. 
A signature in MockFactory.class refers to type SuiteMixin in package org.scalatest which is not available. 
It may be completely missing from the current classpath, or the version on the classpath might be incompatible with the version used when compiling MockFactory.class. 
```

注意：在[scalamock 文档](http://scalamock.org/)中，指定的工件 id 没有尾随 _2.10，但 maven 找不到任何这样命名的工件。另外，我在他们的网站上找不到 scalamock 应该使用的 scalatest 版本。

2)

1.  org.scalatest：**scalatest_2.10**：**1.9.1**
2.  org.scalamock：**scalamock-scalatest-support_2.10.0-RC5**：**3.0-M8**

编译器说：

```
scala: overriding method nestedSuites in trait SuiteMixin of type => scala.collection.immutable.IndexedSeq[org.scalatest.Suite];
method nestedSuites in trait Suite of type => List[org.scalatest.Suite] has incompatible type
class ControllerTest extends FunSuite with MockFactory { 
```

和

```
scala: class ControllerTest needs to be abstract, since:
it has 5 unimplemented members.
/** As seen from class ControllerTest, the missing signatures are as follows.
 *  For convenience, these are usable as stub implementations.
 */
  def rerunner: Option[String] = ???
  def run(testName: Option[String],args: org.scalatest.Args): org.scalatest.Status = ???
  protected def runNestedSuites(args: org.scalatest.Args): org.scalatest.Status = ???
  protected def runTest(testName: String,args: org.scalatest.Args): org.scalatest.Status = ???
  protected def runTests(testName: Option[String],args: org.scalatest.Args): org.scalatest.Status = ??? 
```

那么，这个 SuiteMixin 特性是怎么回事？
如果我使用 scalatest-support_2.10.0-RC5:3.0-M8，它似乎存在于**scalatest lib**中。
如果我使用 scalatest-support_2.10:3.0.1，它似乎已经从所说的 scalatest 库中消失了。

这是什么魔法？而且，更重要的是，我应该使用什么版本组合来使其工作？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T18:24:12.230

如果你有这个依赖

```
"org.scalamock" %% "scalamock-scalatest-support" % "3.0.1" % "test" 
```

它将自动下载正确版本的 scalatest。在这种情况下

```
org.scalatest#scalatest_2.10;2.0.M5b!scalatest_2.10.jar 
```

在大多数情况下，一个库依赖于另一个库，您只需将那个库添加为依赖项。类似 Sbt 的工具将获得其他依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T19:07:31.787

EECOLOR 的回答是正确的。详细地说，问题的原因是您选择的 ScalaMock 版本是针对更高版本的 ScalaTest (2.0.M5b) 编译的，而不是您明确尝试使用的版本 (1.9.1)。

# performance - Scala 递归与循环：性能和运行时注意事项

> ID：15138624
> 
> 赞同：10
> 
> 时间：2013-02-28T14:56:25.163
> 
> 标签：performance, scala, stack-overflow, tail-recursion

我编写了一个简单的测试平台来测量三种阶乘实现的性能：基于循环、非尾递归和尾递归。

> *令我惊讶**的是，性能最差的是循环的（“while”被认为更有效，所以我提供了两者）** ，其成本几乎是尾递归替代方案的两倍。*

**回答：修复循环实现，避免*= 运算符，由于其内部«循环»变得最快，BigInt 的表现优于预期**

> 我经历过的另一个 «woodoo» 行为是 StackOverflow 异常，在非尾递归实现的情况下，对于相同的输入没有系统地抛出该异常。我可以通过逐步调用具有越来越大的值的函数来规避 StackOverlow ......我觉得很疯狂 :)**答：JVM 需要在启动期间收敛，然后行为是连贯和系统的**

这是代码：

```
final object Factorial {
  type Out = BigInt

  def calculateByRecursion(n: Int): Out = {
    require(n>0, "n must be positive")

    n match {
      case _ if n == 1 => return 1
      case _ => return n * calculateByRecursion(n-1)
    }
  }

  def calculateByForLoop(n: Int): Out = {
    require(n>0, "n must be positive")

    var accumulator: Out = 1
    for (i <- 1 to n)
      accumulator = i * accumulator
    accumulator
  }

  def calculateByWhileLoop(n: Int): Out = {
    require(n>0, "n must be positive")

    var accumulator: Out = 1
    var i = 1
    while (i <= n) {
      accumulator = i * accumulator
      i += 1
    }
    accumulator
  }

  def calculateByTailRecursion(n: Int): Out = {
    require(n>0, "n must be positive")

    @tailrec def fac(n: Int, acc: Out): Out = n match {
      case _ if n == 1 => acc
      case _ => fac(n-1, n * acc)
    }

    fac(n, 1)
  }

  def calculateByTailRecursionUpward(n: Int): Out = {
    require(n>0, "n must be positive")

    @tailrec def fac(i: Int, acc: Out): Out = n match {
      case _ if i == n => n * acc
      case _ => fac(i+1, i * acc)
    }

    fac(1, 1)
  }

  def comparePerformance(n: Int) {
    def showOutput[A](msg: String, data: (Long, A), showOutput:Boolean = false) =
      showOutput match {
        case true => printf("%s returned %s in %d ms\n", msg, data._2.toString, data._1)
        case false => printf("%s in %d ms\n", msg, data._1)
    }
    def measure[A](f:()=>A): (Long, A) = {
      val start = System.currentTimeMillis
      val o = f()
      (System.currentTimeMillis - start, o)
    }
    showOutput ("By for loop", measure(()=>calculateByForLoop(n)))
    showOutput ("By while loop", measure(()=>calculateByWhileLoop(n)))
    showOutput ("By non-tail recursion", measure(()=>calculateByRecursion(n)))
    showOutput ("By tail recursion", measure(()=>calculateByTailRecursion(n)))
    showOutput ("By tail recursion upward", measure(()=>calculateByTailRecursionUpward(n)))
  }
} 
```

**以下是 sbt 控制台的一些输出（在 «while» 实现之前）**：

```
scala> example.Factorial.comparePerformance(10000)
By loop in 3 ns
By non-tail recursion in >>>>> StackOverflow!!!!!… see later!!!
........

scala> example.Factorial.comparePerformance(1000)
By loop in 3 ms
By non-tail recursion in 1 ms
By tail recursion in 4 ms

scala> example.Factorial.comparePerformance(5000)
By loop in 105 ms
By non-tail recursion in 27 ms
By tail recursion in 34 ms

scala> example.Factorial.comparePerformance(10000)
By loop in 236 ms
By non-tail recursion in 106 ms     >>>> Now works!!!
By tail recursion in 127 ms

scala> example.Factorial.comparePerformance(20000)
By loop in 977 ms
By non-tail recursion in 495 ms
By tail recursion in 564 ms

scala> example.Factorial.comparePerformance(30000)
By loop in 2285 ms
By non-tail recursion in 1183 ms
By tail recursion in 1281 ms 
```

**以下是 sbt 控制台的一些输出（在 «while» 实现之后）**：

```
scala> example.Factorial.comparePerformance(10000)
By for loop in 252 ms
By while loop in 246 ms
By non-tail recursion in 130 ms
By tail recursion in 136 ns

scala> example.Factorial.comparePerformance(20000)
By for loop in 984 ms
By while loop in 1091 ms
By non-tail recursion in 508 ms
By tail recursion in 560 ms 
```

**接下来是 sbt 控制台的一些输出（在«向上»尾递归实施之后）世界恢复了理智**：

```
scala> example.Factorial.comparePerformance(10000)
By for loop in 259 ms
By while loop in 229 ms
By non-tail recursion in 114 ms
By tail recursion in 119 ms
By tail recursion upward in 105 ms

scala> example.Factorial.comparePerformance(20000)
By for loop in 1053 ms
By while loop in 957 ms
By non-tail recursion in 513 ms
By tail recursion in 565 ms
By tail recursion upward in 470 ms 
```

**以下是在 «loops» 中修复 BigInt 乘法后 sbt 控制台的一些输出：世界完全正常**：

```
 scala> example.Factorial.comparePerformance(20000)
By for loop in 498 ms
By while loop in 502 ms
By non-tail recursion in 521 ms
By tail recursion in 611 ms
By tail recursion upward in 503 ms 
```

BigInt 开销和我的*愚蠢*实现掩盖了预期的行为。

*PS.: 最后我应该把这篇文章重新命名为 «A lernt course on BigInts»*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T15:07:13.800

For 循环实际上并不完全是循环。它们用于范围内的理解。如果你真的想要一个循环，你需要使用`while`. （实际上，我认为`BigInt`这里的乘法已经足够重量级了，所以没关系。但是如果你乘以`Int`s，你会注意到。）

此外，您使用`BigInt`. 你的越大`BigInt`，你的乘法就越慢。因此，您的非尾循环计数*增加*，而您的尾递归循环计数*减少*，这意味着后者有更多的大数要相乘。

如果你解决了这两个问题，你会发现恢复了理智：循环和尾递归的速度相同，常规递归和`for`更慢。（如果 JVM 优化使其等效，正则递归可能不会变慢）

（此外，堆栈溢出修复可能是因为 JVM 开始内联，并且可能使调用本身进行尾递归，或者将循环展开足够远以便您不再溢出。）

最后，你用 for 和 while 得到了很差的结果，因为你是在右边而不是左边与小数相乘。事实证明，Java 的 BigInt 与左侧的较小数字相乘的速度更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-08T17:38:34.193

我知道每个人都已经回答了这个问题，但我想我可能会添加一个优化：**如果将模式匹配转换为简单的 if 语句，它可以加快尾递归。**

```
final object Factorial {
  type Out = BigInt

  def calculateByRecursion(n: Int): Out = {
    require(n>0, "n must be positive")

    n match {
      case _ if n == 1 => return 1
      case _ => return n * calculateByRecursion(n-1)
    }
  }

  def calculateByForLoop(n: Int): Out = {
    require(n>0, "n must be positive")

    var accumulator: Out = 1
    for (i <- 1 to n)
      accumulator = i * accumulator
    accumulator
  }

  def calculateByWhileLoop(n: Int): Out = {
    require(n>0, "n must be positive")

    var acc: Out = 1
    var i = 1
    while (i <= n) {
      acc = i * acc
      i += 1
    }
    acc
  }

  def calculateByTailRecursion(n: Int): Out = {
    require(n>0, "n must be positive")

    @annotation.tailrec
    def fac(n: Int, acc: Out): Out = if (n==1) acc else fac(n-1, n*acc)

    fac(n, 1)
  }

  def calculateByTailRecursionUpward(n: Int): Out = {
    require(n>0, "n must be positive")

    @annotation.tailrec
    def fac(i: Int, acc: Out): Out = if (i == n) n*acc else fac(i+1, i*acc)

    fac(1, 1)
  }

  def attempt(f: ()=>Unit): Boolean = {
    try {
        f()
        true
    } catch {
        case _: Throwable =>
            println(" <<<<< Failed...")
            false
    }
  }

  def comparePerformance(n: Int) {
    def showOutput[A](msg: String, data: (Long, A), showOutput:Boolean = true) =
      showOutput match {
        case true =>
            val res = data._2.toString
            val pref = res.substring(0,5)
            val midd = res.substring((res.length-5)/ 2, (res.length-5)/ 2 + 10)
            val suff = res.substring(res.length-5)
            printf("%s returned %s in %d ms\n", msg, s"$pref...$midd...$suff" , data._1)
        case false => 
            printf("%s in %d ms\n", msg, data._1)
    }
    def measure[A](f:()=>A): (Long, A) = {
      val start = System.currentTimeMillis
      val o = f()
      (System.currentTimeMillis - start, o)
    }
    attempt(() => showOutput ("By for loop", measure(()=>calculateByForLoop(n))))
    attempt(() => showOutput ("By while loop", measure(()=>calculateByWhileLoop(n))))
    attempt(() => showOutput ("By non-tail recursion", measure(()=>calculateByRecursion(n))))
    attempt(() => showOutput ("By tail recursion", measure(()=>calculateByTailRecursion(n))))
    attempt(() => showOutput ("By tail recursion upward", measure(()=>calculateByTailRecursionUpward(n))))
  }
} 
```

我的结果：

```
scala> Factorial.comparePerformance(20000)
By for loop returned 18192...5708616582...00000 in 179 ms
By while loop returned 18192...5708616582...00000 in 159 ms
By non-tail recursion <<<<< Failed...
By tail recursion returned 18192...5708616582...00000 in 169 ms
By tail recursion upward returned 18192...5708616582...00000 in 174 ms 
```

```
By for loop returned 18192...5708616582...00000 in 212 ms
By while loop returned 18192...5708616582...00000 in 156 ms
By non-tail recursion returned 18192...5708616582...00000 in 155 ms
By tail recursion returned 18192...5708616582...00000 in 166 ms
By tail recursion upward returned 18192...5708616582...00000 in 137 ms 
```

```
scala> Factorial.comparePerformance(200000)
By for loop returned 14202...0169293868...00000 in 17467 ms
By while loop returned 14202...0169293868...00000 in 17303 ms
By non-tail recursion <<<<< Failed...
By tail recursion returned 14202...0169293868...00000 in 18477 ms
By tail recursion upward returned 14202...0169293868...00000 in 17188 ms 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-08T01:14:42.140

Scala 静态方法`factorial(n)`（使用 scala 2.12.x，java-8 编码）：

```
object Factorial {

  /*
   * For large N, it throws a stack overflow
   */
  def recursive(n:BigInt): BigInt = {
    if(n < 0) {
      throw new ArithmeticException
    } else if(n <= 1) {
      1
    } else {
      n * recursive(n - 1)
    }
  }

  /*
   * A tail recursive method is compiled to avoid stack overflow
   */
  @scala.annotation.tailrec
  def recursiveTail(n:BigInt, acc:BigInt = 1): BigInt = {
    if(n < 0) {
      throw new ArithmeticException
    } else if(n <= 1) {
      acc
    } else {
      recursiveTail(n - 1, n * acc)
    }
  }

  /*
   * A while loop
   */
  def loop(n:BigInt): BigInt = {
    if(n < 0) {
      throw new ArithmeticException
    } else if(n <= 1) {
      1
    } else {
      var acc = 1
      var idx = 1
      while(idx <= n) {
        acc = idx * acc
        idx += 1
      }
      acc
    }
  }

} 
```

眼镜：

```
class FactorialSpecs extends SpecHelper {

  private val smallInt = 10
  private val largeInt = 10000

  describe("Factorial.recursive") {
    it("return 1 for 0") {
      assert(Factorial.recursive(0) == 1)
    }
    it("return 1 for 1") {
      assert(Factorial.recursive(1) == 1)
    }
    it("return 2 for 2") {
      assert(Factorial.recursive(2) == 2)
    }
    it("returns a result, for small inputs") {
      assert(Factorial.recursive(smallInt) == 3628800)
    }
    it("throws StackOverflow for large inputs") {
      intercept[java.lang.StackOverflowError] {
        Factorial.recursive(Int.MaxValue)
      }
    }
  }

  describe("Factorial.recursiveTail") {
    it("return 1 for 0") {
      assert(Factorial.recursiveTail(0) == 1)
    }
    it("return 1 for 1") {
      assert(Factorial.recursiveTail(1) == 1)
    }
    it("return 2 for 2") {
      assert(Factorial.recursiveTail(2) == 2)
    }
    it("returns a result, for small inputs") {
      assert(Factorial.recursiveTail(smallInt) == 3628800)
    }
    it("returns a result, for large inputs") {
      assert(Factorial.recursiveTail(largeInt).isInstanceOf[BigInt])
    }
  }

  describe("Factorial.loop") {
    it("return 1 for 0") {
      assert(Factorial.loop(0) == 1)
    }
    it("return 1 for 1") {
      assert(Factorial.loop(1) == 1)
    }
    it("return 2 for 2") {
      assert(Factorial.loop(2) == 2)
    }
    it("returns a result, for small inputs") {
      assert(Factorial.loop(smallInt) == 3628800)
    }
    it("returns a result, for large inputs") {
      assert(Factorial.loop(largeInt).isInstanceOf[BigInt])
    }
  }
} 
```

基准：

```
import org.scalameter.api._

class BenchmarkFactorials extends Bench.OfflineReport {

  val gen: Gen[Int] = Gen.range("N")(1, 1000, 100) // scalastyle:ignore

  performance of "Factorial" in {
    measure method "loop" in {
      using(gen) in {
        n => Factorial.loop(n)
      }
    }
    measure method "recursive" in {
      using(gen) in {
        n => Factorial.recursive(n)
      }
    }
    measure method "recursiveTail" in {
      using(gen) in {
        n => Factorial.recursiveTail(n)
      }
    }
  }

} 
```

基准测试结果（循环更快）：

```
[info] Test group: Factorial.loop
[info] - Factorial.loop.Test-9 measurements:
[info]   - at N -> 1: passed
[info]     (mean = 0.01 ms, ci = <0.00 ms, 0.02 ms>, significance = 1.0E-10)
[info]   - at N -> 101: passed
[info]     (mean = 0.01 ms, ci = <0.01 ms, 0.01 ms>, significance = 1.0E-10)
[info]   - at N -> 201: passed
[info]     (mean = 0.02 ms, ci = <0.02 ms, 0.02 ms>, significance = 1.0E-10)
[info]   - at N -> 301: passed
[info]     (mean = 0.03 ms, ci = <0.02 ms, 0.03 ms>, significance = 1.0E-10)
[info]   - at N -> 401: passed
[info]     (mean = 0.03 ms, ci = <0.03 ms, 0.04 ms>, significance = 1.0E-10)
[info]   - at N -> 501: passed
[info]     (mean = 0.04 ms, ci = <0.03 ms, 0.05 ms>, significance = 1.0E-10)
[info]   - at N -> 601: passed
[info]     (mean = 0.04 ms, ci = <0.04 ms, 0.05 ms>, significance = 1.0E-10)
[info]   - at N -> 701: passed
[info]     (mean = 0.05 ms, ci = <0.05 ms, 0.05 ms>, significance = 1.0E-10)
[info]   - at N -> 801: passed
[info]     (mean = 0.06 ms, ci = <0.05 ms, 0.06 ms>, significance = 1.0E-10)
[info]   - at N -> 901: passed
[info]     (mean = 0.06 ms, ci = <0.05 ms, 0.07 ms>, significance = 1.0E-10)

[info] Test group: Factorial.recursive
[info] - Factorial.recursive.Test-10 measurements:
[info]   - at N -> 1: passed
[info]     (mean = 0.00 ms, ci = <0.00 ms, 0.01 ms>, significance = 1.0E-10)
[info]   - at N -> 101: passed
[info]     (mean = 0.05 ms, ci = <0.01 ms, 0.09 ms>, significance = 1.0E-10)
[info]   - at N -> 201: passed
[info]     (mean = 0.03 ms, ci = <0.02 ms, 0.05 ms>, significance = 1.0E-10)
[info]   - at N -> 301: passed
[info]     (mean = 0.07 ms, ci = <0.00 ms, 0.13 ms>, significance = 1.0E-10)
[info]   - at N -> 401: passed
[info]     (mean = 0.09 ms, ci = <0.01 ms, 0.18 ms>, significance = 1.0E-10)
[info]   - at N -> 501: passed
[info]     (mean = 0.10 ms, ci = <0.03 ms, 0.17 ms>, significance = 1.0E-10)
[info]   - at N -> 601: passed
[info]     (mean = 0.11 ms, ci = <0.08 ms, 0.15 ms>, significance = 1.0E-10)
[info]   - at N -> 701: passed
[info]     (mean = 0.13 ms, ci = <0.11 ms, 0.14 ms>, significance = 1.0E-10)
[info]   - at N -> 801: passed
[info]     (mean = 0.16 ms, ci = <0.13 ms, 0.19 ms>, significance = 1.0E-10)
[info]   - at N -> 901: passed
[info]     (mean = 0.21 ms, ci = <0.15 ms, 0.27 ms>, significance = 1.0E-10)

[info] Test group: Factorial.recursiveTail
[info] - Factorial.recursiveTail.Test-11 measurements:
[info]   - at N -> 1: passed
[info]     (mean = 0.00 ms, ci = <0.00 ms, 0.01 ms>, significance = 1.0E-10)
[info]   - at N -> 101: passed
[info]     (mean = 0.04 ms, ci = <0.03 ms, 0.05 ms>, significance = 1.0E-10)
[info]   - at N -> 201: passed
[info]     (mean = 0.12 ms, ci = <0.05 ms, 0.20 ms>, significance = 1.0E-10)
[info]   - at N -> 301: passed
[info]     (mean = 0.16 ms, ci = <-0.03 ms, 0.34 ms>, significance = 1.0E-10)
[info]   - at N -> 401: passed
[info]     (mean = 0.12 ms, ci = <0.09 ms, 0.16 ms>, significance = 1.0E-10)
[info]   - at N -> 501: passed
[info]     (mean = 0.17 ms, ci = <0.15 ms, 0.19 ms>, significance = 1.0E-10)
[info]   - at N -> 601: passed
[info]     (mean = 0.23 ms, ci = <0.19 ms, 0.26 ms>, significance = 1.0E-10)
[info]   - at N -> 701: passed
[info]     (mean = 0.25 ms, ci = <0.18 ms, 0.32 ms>, significance = 1.0E-10)
[info]   - at N -> 801: passed
[info]     (mean = 0.28 ms, ci = <0.21 ms, 0.36 ms>, significance = 1.0E-10)
[info]   - at N -> 901: passed
[info]     (mean = 0.32 ms, ci = <0.17 ms, 0.46 ms>, significance = 1.0E-10) 
```

# javascript - 如何将 innerHTML 元素的值传递给全局变量？

> ID：15138626
> 
> 赞同：0
> 
> 时间：2013-02-28T14:56:26.907
> 
> 标签：javascript, variables, global, innerhtml, getelementbyid

Javascript/HTML5 的新手，如果术语没有意义，我们深表歉意

如何将全局变量设置为与一个函数中的 innerHTML 元素具有相同的值（最好是 int 或 double），然后使用全局变量来控制另一个函数中的循环？

我正在尝试设置一个循环，只要 innerHTML 元素“avgSpeed”在 0 到 60 之间，它就会每秒计数一次。有两个函数，一个填充元素，第二个是循环。我无法让循​​环使用从第一个函数的元素中读取的值。

在第一个函数中，我填充了元素“avgSpeed”：

```
document.getElementById("avgSpeed").innerHTML = (responseObj.average_speed!=undefined)?responseObj.average_speed: "Not available"; 
```

这很好用，如果我在 HTML 文件中打印元素，页面将显示我的 avgSpeed（例如：30 或 40，不显示为 30.0 或 40.0）

我尝试了以下方法：*`var miles`是我正在使用的全局变量*

```
miles=document.getElementById("avgSpeed").innerHTML;
miles=parseInt(document.getElementById("avgSpeed").innerHTML); 
```

我只是无法将“avgSpeed”链接到一个全局变量以用作循环控制。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:37:07.703

是的，您可以将 innerHTML 的值传递给全局变量...示例代码

`

```
<!DOCTYPE html>
<html>
<head>
<script>
function getValue() 
{ 
var x = parseInt(document.getElementById("myHeader").innerHTML);  
x=x+3;  
alert(x);  
}
</script>
</head>
<body>
<h1 id="myHeader" onclick="getValue()">123</h1>
</body>
</html>` 
```

我希望这能帮到您！

# fortran - 从 fortran 子例程调用 MPI_send MPI_recv

> ID：15138633
> 
> 赞同：0
> 
> 时间：2013-02-28T14:56:38.750
> 
> 标签：fortran, mpi

是否可以在子程序而不是主程序中调用 MPI_send 和 MPI_recv 命令？我已经为我正在尝试做的事情编写了一个最小的程序。它编译得很好，但它不工作。该程序只是挂在“sendrecv”子程序中。有什么想法我该怎么做？

主文件

```
 program   main

  implicit none 

  include  'mpif.h'

  integer me, np, ierror

  call  MPI_init( ierror )
  call  MPI_comm_rank( mpi_comm_world, me, ierror )
  call  MPI_comm_size( mpi_comm_world, np, ierror )

  call sendrecv(me, np)

  call mpi_finalize( ierror )

  stop
  end 
```

发送接收文件

```
 subroutine sendrecv(me, np)

  include 'mpif.h'

  integer np, me, sender, tag
  integer, dimension(mpi_status_size) :: status

  integer, dimension(1) :: recv, send

  if (me.eq.0) then

     do sender = 1, np-1
        call mpi_recv(recv, 1, mpi_integer, sender, tag,
 &           mpi_comm_world, status, ierror)

     end do
  end if

  if ((me.ge.1).and.(me.lt.np)) then
     send(1) = me*12

     call mpi_send(send, 1, mpi_integer, 0, tag,
 &        mpi_comm_world, ierror)
  end if

  return
  end 
```

# c++ - Eigen：是否有计算样本协方差的内置方法

> ID：15138634
> 
> 赞同：16
> 
> 时间：2013-02-28T14:56:47.720
> 
> 标签：c++, statistics, eigen

我在 C++ 中使用 Eigen 库：我目前正在自己​​计算协方差矩阵，如下所示：

```
Eigen::MatrixXd covariance_matrix = Eigen::MatrixXd::Constant(21, 21, 0);
data mean = calc_mean(all_data)
for(int j = 0; j < 21; j++){
    for(int k = 0; k < 21; k++){
        for(std::vector<data>::iterator it = all_data.begin(); it!= all_data.end(); it++){
            covariance_matrix(j,k) += ((*it)[j] - mean[j]) * ((*it)[k] - mean[k]);
        }
        covariance_matrix(j,k) /= all_data.size() - 1;
    }
} 
```

是否有内置/更优化的方法可以使用 Eigen 库执行此操作？例如，如果我将数据存储`MatrixXd`在每行是一个观察值而每列是一个特征的位置？

谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-28T18:01:40.847

使用 Eigen 表达式将利用 SIMD 和缓存优化算法，所以是的，它肯定会更快，并且无论如何，编写起来要简单得多：

```
MatrixXd centered = mat.rowwise() - mat.colwise().mean();
MatrixXd cov = (centered.adjoint() * centered) / double(mat.rows() - 1); 
```

此外，假设“data”是 double[21] 的 typedef，那么您可以使用 Map<> 功能将 std::vector 视为 Eigen 对象：

```
Map<Matrix<double,Dynamic,21,RowMajor> > mat(&(all_data[0][0], all_data.size(), 21); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T15:37:18.330

当每一行都是一个观察值时，您可以使用 wikipedia ( [http://en.wikipedia.org/wiki/Sample_mean_and_sample_covariance#Sample_covariance](http://en.wikipedia.org/wiki/Sample_mean_and_sample_covariance#Sample_covariance) )上显示的样本协方差矩阵的矩阵公式

![样本协方差，来源：上面链接的维基百科文章](../Images/9583c1fcbdd90bb08751bbfff8692b28.png).

就特征矩阵乘法等而言，这相当容易编写。对我来说，它是否会更高效并不明显，我怀疑优化器必须做得非常好（确保至少使用 -O2）。可能值得尝试和分析它。

# python - 浮点数末尾的后缀 e+number 在 python 中是什么意思？

> ID：15138635
> 
> 赞同：4
> 
> 时间：2013-02-28T14:56:48.510
> 
> 标签：python, python-2.7

我`random.uniform(1,2**100)`用来产生范围的随机浮点数`(0,2**100)`。一些结果是：

```
>>> random.uniform(1,2**100)
5.9798650563331964e+29
>>> random.uniform(1,2**100)
8.439133849811236e+29
>>> random.uniform(1,2**100)
1.1367823572756921e+30
>>> random.uniform(1,2**100)
6.467828850316163e+29
>>> random.uniform(1,2**100)
6.114089228136624e+29
>>> random.uniform(1,2**100)
5.8262139039159224e+29 
```

我无法`e+29`在每个数字的末尾得到解释。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-28T15:00:10.863

它被称为[E notation](http://en.wikipedia.org/wiki/Scientific_notation#E_notation)，它是[科学记数法](http://en.wikipedia.org/wiki/Scientific_notation)的纯文本表示。

`1.234e+56`表示`1.234 * 10**56`或以更易于阅读的形式 1.234 × 10 ^(56)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-12T11:44:22.577

“e+number”表示正数的 10 次方，如果是负数，则类似于“e-number”。

# php - 如何从 FQL 获取所有 facebook 照片

> ID：15138638
> 
> 赞同：2
> 
> 时间：2013-02-28T14:56:53.387
> 
> 标签：php, facebook, limit, facebook-fql

我`FQL`用来收集应用程序的所有 Facebook 照片，我在 facebook 上有 533 张照片，但问题是这`query`将只返回 400 条记录。

FQL查询

```
SELECT src_big,target_id FROM photo WHERE pid IN
(SELECT pid FROM photo_tag WHERE subject='".$session_fbuserid."') OR
pid IN (
    SELECT pid FROM photo WHERE aid IN
        (SELECT aid FROM album WHERE owner='".$session_fbuserid."' AND type!='profile')
) 
```

我的 Facebook 相册

![在此处输入图像描述](../Images/c933f93a8a139fe32b1cd3b626d2f109.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:15:53.390

添加`limit 1000`到查询的末尾。

```
SELECT src_big,target_id FROM photo WHERE pid IN (SELECT pid FROM photo_tag WHERE subject='".$session_fbuserid."') OR pid IN (SELECT pid FROM photo WHERE aid IN (SELECT aid FROM album WHERE owner='".$session_fbuserid."' AND type!='profile')) LIMIT 1000 
```

# asp.net - 自动启动 ASP.NET 应用程序 - 配置错误

> ID：15138642
> 
> 赞同：2
> 
> 时间：2013-02-28T14:57:00.477
> 
> 标签：asp.net, iis-7.5, autostart

我想使用自动启动工具来确保我的应用程序缓存始终被填充并准备就绪，如[ScottGu 的博客](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)中所述。我在配置它时遇到了一些问题。

该项目的工作名称为 IceCream，我使用的是 Windows 7、IIS 7.5、ASP.NET 4.5。

在 IIS 中，我创建了一个新的应用程序池，`IceCreamPool`并且我已`applicationHost.config`按照博文中的详细说明进行了修改。

首先：我在应用程序池中添加`startMode`了：`AlwaysRunning`

```
<applicationPools>
    ...
    <add name="IceCreamPool" autoStart="true" managedRuntimeVersion="v4.0" startMode="AlwaysRunning" />
    ...
</applicationPools> 
```

接下来，我在应用程序中添加了`serviceAutoStartEnabled`和`serviceAutoStartProvider`：

```
<application path="/IceCreamCMS" applicationPool="IceCreamPool">
    <virtualDirectory path="/" physicalPath="C:\Projects\IceCreamCMS\IceCreamCMS" serviceAutoStartEnabled="true" serviceAutoStartProvider="PreWarmMyCache" />
</application> 
```

`<sites>`然后我在元素之后添加了服务自动启动提供程序：

```
<sites>
    ...
</sites>

<serviceAutoStartProviders>
     <add name="PreWarmMyCache" type="IceCreamCMS.PreWarmCache, IceCreamCMS" />
</serviceAutoStartProviders> 
```

在应用程序中`IceCreamCMS`，我创建了`PreWarmCache`如下调用的类：

```
using System.Net.Mail;

public class PreWarmCache : System.Web.Hosting.IProcessHostPreloadClient
{
    public void Preload(string[] parameters)
    {
        // Perform initialisation and cache loading logic right here
        SmtpClient s = new SmtpClient("webmail.example.com");
        s.Send("website@example.com", "me@example.com", "Pre-warming the cache", "Hello there...");
    }
} 
```

然后我重建了应用程序，但没有收到任何电子邮件。

我执行了一个`iisreset`看看我是否收到了一封电子邮件，但是`iisreset`给了我一个错误：

> 应用程序池 'IceCreamPool' 的工作进程遇到错误 'Configuration file is not well-formed XML' 试图从文件 '\?\C:\inetpub\temp\apppools\IceCreamPool\IceCreamPool.config' 读取配置数据，行数字“3”。数据字段包含错误代码。

肯定`applicationHost.config`是格式正确的，我没有打出基本的错字，我通过一个 XML 验证器运行它来确认。所以，下一个明显的地方是它在错误中声明的配置文件，但它不存在，所以我猜因为它在 \temp\ 它不会停留足够长的时间让我看在。

我知道我的 C# 位或我如何配置 serviceAutoStartProviders 存在问题，因为如果我删除该`serviceAutoStartProviders`部分并从`<application>`元素中删除设置，只留下`startMode="AlwaysRunning"`应用程序池上的设置，那么我不会遇到任何问题。

所以 - 有什么想法吗？你如何将你的班级与`serviceAutoStartProvider`? 我试过让我的类没有命名空间，一个命名空间是应用程序的名称（`IceCreamCMS`）和一个更长的命名空间；一切都无济于事。

如果有人真的让这个工作，你能分享你的配置和 C# 代码吗？令人沮丧的是，原始博客文章没有给出最终的工作示例！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:01:28.800

好的 - 我刚刚尝试了完全相同的方法，但部署到了运行 Windows Server 2008 和 IIS7 的服务器上，并且运行良好。

所以它一定是关于在 Windows 7 上运行的 IIS - 但我很高兴它在服务器上运行，所以 - 不用担心。

# ruby - Aptana Studio 3 找不到带有 rvm 的宝石

> ID：15138645
> 
> 赞同：0
> 
> 时间：2013-02-28T14:57:08.020
> 
> 标签：ruby, rvm, aptana, aptana3

我正在尝试在我正在处理的 Ruby 项目中使用 Aptana Studio 3。我在 Mac OS X 10.8 上，并使用 RVM 安装了 Ruby。

当我尝试在 Aptana Studio 中执行 .rb 文件时，它给了我如下错误：

```
/Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': no such file to load -- resque (LoadError)
    from /Users/.../.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/.../q_test.rb:3:in `<main>' 
```

从 Aptana Studio 3 终端中，当我输入

```
rvm gemset list 
```

我可以看到选择了正确版本的 ruby​​，但似乎 Aptana 忽略了 gemset？

这是怎么回事？有人可以帮忙吗？

**更新**

我怀疑这个问题与此有关：

[https://aptanastudio.tenderapp.com/discussions/problems/3306-switching-rvm-ruby-and-gemsets-on-fly](https://aptanastudio.tenderapp.com/discussions/problems/3306-switching-rvm-ruby-and-gemsets-on-fly)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:08:28.320

应该可以使用**--default**选项定义[默认 gemset](https://rvm.io/gemsets/using/)

 **```
rvm 1.9.2-p320
rvm gemset create rails_gemset
rvm --default use ruby-1.9.2-p320@rails_gemset 
```

也许这有帮助？

顺便说一句，我建议使用简单的编辑器，例如 Sublime Text、Textmate 或 Emacs，而不是 Aptana Studio。它们比臃肿的 IDE（Java 需要，但 Ruby 不需要）更快、更精简、更整洁。**

# django - Django ForeignKey 表单域：显示值

> ID：15138648
> 
> 赞同：3
> 
> 时间：2013-02-28T14:57:10.657
> 
> 标签：django, django-forms

我可能只是有一个大脑放屁，但我真的无法弄清楚这一点。如何`ForeignKey`在模板中显示绑定表单中的字段值？`{{ field }}`呈现一个小部件，`{{ field.value }}`返回`pk`，我需要模型本身。

我正在为 django-crispy-forms 编写自定义模板；这就是为什么我在我的上下文中只得到一个表单字段，而不是一个模型字段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T16:18:29.017

你必须试试这个：{{ form.instance.field }}

# python - 带有自定义模板 unicodeerror 的 Django startapp

> ID：15138649
> 
> 赞同：0
> 
> 时间：2013-02-28T14:57:10.537
> 
> 标签：python, django, unicode, encoding

将 django startapp 命令与自定义应用程序模板一起使用时出现一个奇怪的错误。我创建了一个自定义应用程序模板，在那里我有一个`models.py`带有 unicode 字符的文件，如下所示：

```
# -*- coding: utf-8 -*-
from django.db import models
class {{app_name|capfirst}}(models.Model):
    """Toto je text dokumentace. Žluťoučký kůň"""
    pass 
```

当我运行文件时没有得到处理，我得到这个错误`python manage.py startapp --template=core/my_app_template application`：`models.py`

```
Traceback (most recent call last):
  File "manage.py", line 14, in <module>
    execute_manager(settings)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 459, in execute_manager
    utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/commands/startapp.py", line 25, in handle
    super(Command, self).handle('app', app_name, target, **options)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/templates.py", line 162, in handle
    new_file.write(content)
UnicodeEncodeError: 'ascii' codec can't encode character u'\u017d' in position 112: ordinal not in range(128) 
```

如何对文件进行编码以便对其进行处理？我想`# -*- coding: utf-8 -*-`就够了。或者我应该在里面设置`settings.py`什么？

我查看了代码，在将内容写入文件时抛出了错误：

```
with open(new_path, 'w') as new_file:
    new_file.write(content) 
```

所以我怀疑这是 django 的错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:06:58.583

```
with open(new_path, 'w') as new_file:
    new_file.write(content).encode('utf-8') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:07:59.313

我使用了 Django 1.4。Django 1.5 解决了这个问题。他们更新了代码并完全按照凯瑟琳的建议做了。

# gwt - smartgwt 从 TreeNode 禁用 [+]

> ID：15138654
> 
> 赞同：0
> 
> 时间：2013-02-28T14:57:24.730
> 
> 标签：gwt, smartgwt

我有简单的网格，我正在按需加载数据，因此 autofetchdata 设置为 false。

但是我还需要在这个网格中实现放置元素，以前当我加载数据时，我知道所有元素并且如果文件夹有子文件夹，我就会得到信息。如果文件夹有子文件夹，我将 setIsFrolder 添加到 true 或 false 如果没有，我没有图标 [+] 如果文件夹没有任何子文件夹。但是当我这样做时，我不能将任何元素放入空文件夹：/

所以我设置所有元素都是文件夹。但是当文件夹为空时，我有图标 [+]。我找不到任何标志来禁用它......有可能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:10:16.147

尝试`setChildren(new TreeNode[0])`在这些节点上调用。

# android - 如何为 ListView 制作自定义 ArrayAdapter

> ID：15138656
> 
> 赞同：-1
> 
> 时间：2013-02-28T14:57:33.897
> 
> 标签：android, android-listview, android-arrayadapter, android-ui

我必须根据`ArrayAdapter`收到的`JSON`回复进行定制。这是我的代码，我从中得到响应并将其简化`ArrayAdapter`为`android.R.layout.simple_list_item_1`

```
ListView lv = (ListView) findViewById(R.id.list);

    try {

        HttpClient hClient = new DefaultHttpClient();
        HttpGet hGet = new HttpGet(
                "API HERE");
        ResponseHandler<String> rHandler = new BasicResponseHandler();
        data = hClient.execute(hGet, rHandler);

        JSONObject rootObj = new JSONObject(data);
        JSONObject searchObj = rootObj.getJSONObject("searchdata");
        JSONArray titlesObj = searchObj.getJSONArray("titles");
        JSONArray descsObj = searchObj.getJSONArray("desc");
        JSONArray linksObj = searchObj.getJSONArray("links");

        String[] a = new String[titlesObj.length()];

        String[] b = new String[descsObj.length()];

        String[] c = new String[linksObj.length()];

        for (int i = 0; i < titlesObj.length(); i++) {
            String title = titlesObj.getString(i);
            a[i] = title;
        }

        for (int i = 0; i < descsObj.length(); i++) {
            String desc = descsObj.getString(i);
            b[i] = desc;
        }

        for (int i = 0; i < linksObj.length(); i++) {
            String link = linksObj.getString(i);
            c[i] = link;
        }

        ArrayList<String> al = new ArrayList<String>();
        for (int i = 0; i < linksObj.length(); i++)

        {
            al.add(" " + a[i] + " " + b[i] + "" + c[i] + "");
        }
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                MainActivity.this, android.R.layout.simple_list_item_1, al);

        lv.setAdapter(adapter);

    } catch (Exception e) {

    } 
```

这是我的观点的截图：

![我的代码的输出](../Images/e5993fd7263f8bd847f0667c0dbd1b6d.png)

我想显示一个视图，其中三个`TextView`标题为标题，另一个为 URL，最后一个为描述。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:08:19.583

制作自定义适配器。将该适配器设置为您的列表视图。您的适配器类应该扩展 ArrayAdapter。在 getView() 中，使用 3 个 textviews 为您的自定义 xml 充气。使用查看器来提高性能。

她的例子[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)。她的更多列表[查看 http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)。

[如何在列表视图中设置 json 解析数据，然后在其中添加搜索功能](https://stackoverflow.com/questions/15109406/how-to-set-json-parsed-data-in-a-listview-and-then-adding-search-functionality-i/15109592#15109592)。看看答案。我已经使用了 hashmap 并在 listview 中显示了相应的数据，并在 listview 项目上进行了搜索。根据您的需要进行相同的修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:07:22.013

Anupam，您可以放置​​小数据，例如

```
 al.add(" " + apple + " " + ball + "" +cat + ""); 
```

单行单行。如果您想在单行中保留这么多数据（上述图像中的单行）是不可能的。

# java - SOAP - PKIX 路径构建失败

> ID：15138660
> 
> 赞同：1
> 
> 时间：2013-02-28T14:57:54.310
> 
> 标签：java, soap, pkcs#12

我正在构建一个必须调用两个 Web 服务的服务器。Web 服务具有相同的 CA 证书 (PKCS12)。

第一个通过 GET 接收请求，另一个通过 SOAP 调用接收请求。

遵循为 GET 请求创建连接的部分代码

```
 InputStream inputStream = null;

            // is https protocol?
            if (url.getProtocol().toLowerCase().equals("https")) {

                trustAllHosts();
                // create connection
                HttpsURLConnection httpsUrlConnection = null;
                if(proxy != null){
                    httpsUrlConnection = (HttpsURLConnection) url.openConnection(proxy);
                } else {
                    httpsUrlConnection = (HttpsURLConnection) url.openConnection();
                }
                // set the check to: do not verify
                httpsUrlConnection.setHostnameVerifier(new HostnameVerifier() {
                    @Override
                    public boolean verify(String hostname, SSLSession session) {
                        return true;
                    }
                });

                setHeaders(httpsUrlConnection, headers);    

                //set del certificato

                log.debug("set certificate for get...");
                File cerp12 = new File(Utils.getWebAppLocalPath(),"WEB-INF"+String.valueOf(File.separatorChar)+PropConfig.getProperty("cer.p12"));
                ((HttpsURLConnection) httpsUrlConnection).setSSLSocketFactory(security(cerp12,PropConfig.getProperty("cer.pwd"))); 
                httpsUrlConnection.connect();

                inputStream = httpsUrlConnection.getInputStream();

            } else {
                HttpURLConnection httpUrlConnection = null;
                if(proxy != null){
                    httpUrlConnection = (HttpURLConnection) url.openConnection(proxy);
                } else {
                    httpUrlConnection = (HttpURLConnection) url.openConnection();
                }

                setHeaders(httpUrlConnection, headers);    

                inputStream = httpUrlConnection.getInputStream();
            }

            in = new BufferedReader(new InputStreamReader(inputStream));

            String inputLine;
            while ((inputLine = in.readLine()) != null) {
                result.append(inputLine);
            } 
```

这部分是针对 SOAP 请求的

```
 InputStream inputStream = null;

            // is https protocol?
            if (url.getProtocol().toLowerCase().equals("https")) {

                trustAllHosts();
                // create connection
                HttpsURLConnection httpsUrlConnection = null;
                if(proxy != null){
                    httpsUrlConnection = (HttpsURLConnection) url.openConnection(proxy);
                } else {
                    httpsUrlConnection = (HttpsURLConnection) url.openConnection();
                }
                // set the check to: do not verify
                httpsUrlConnection.setHostnameVerifier(new HostnameVerifier() {
                    @Override
                    public boolean verify(String hostname, SSLSession session) {
                        return true;
                    }
                });

                setHeaders(httpsUrlConnection, headers);    

                //set del certificato

                log.debug("set certificate for get...");
                File cerp12 = new File(Utils.getWebAppLocalPath(),"WEB-INF"+String.valueOf(File.separatorChar)+PropConfig.getProperty("cer.p12"));
                ((HttpsURLConnection) httpsUrlConnection).setSSLSocketFactory(security(cerp12,PropConfig.getProperty("cer.pwd"))); 
                httpsUrlConnection.connect();

                inputStream = httpsUrlConnection.getInputStream();

            } else {
                HttpURLConnection httpUrlConnection = null;
                if(proxy != null){
                    httpUrlConnection = (HttpURLConnection) url.openConnection(proxy);
                } else {
                    httpUrlConnection = (HttpURLConnection) url.openConnection();
                }

                setHeaders(httpUrlConnection, headers);    

                inputStream = httpUrlConnection.getInputStream();
            }

            in = new BufferedReader(new InputStreamReader(inputStream));

            String inputLine;
            while ((inputLine = in.readLine()) != null) {
                result.append(inputLine);
            } 
```

代码几乎相同

使用 GET 请求我没有问题，但是使用 SOAP 请求`httpsUrlConnection.connect();`会引发 PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效认证路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:11:05.433

以下是如何为 HTTPS 连接创建 ssl 上下文。

```
 SSLSocketFactory socketFactory = createSSLContext().getSocketFactory();

        HttpsURLConnection connection = (HttpsURLConnection) (url).openConnection();
        connection.setSSLSocketFactory(socketFactory); 
```

以及创建 SSL 上下文的方法。请注意，它从 .pem 文件（x509 格式）加载根服务器证书，从 .p12（pkcs12 格式）加载客户端证书。如果服务器不需要客户端证书，则为密钥管理器传递 null。如果已在 $JRE_HOME/lib/security/cacerts 中的授权颁发的服务器证书，则将 null 作为信任管理器传递。

还有一点需要注意：在 .pem 文件中，您应该将根证书存储在服务器证书的 PKIX 路径中。例如， github.com 那个站点有 PKIX 路径`CN = github.com`-> `CN = DigiCert High Assurance EV CA-1`-> `CN = DigiCert High Assurance EV Root CA`-> `CN = GTE CyberTrust Global Root`。所以你存储`GTE CyberTrust Global Root`

```
private final SSLContext createSSLContext()
            throws NoSuchAlgorithmException, KeyStoreException,
            CertificateException, IOException,
            UnrecoverableKeyException, KeyManagementException {

        KeyStore keyStore = KeyStore.getInstance("PKCS12");

        FileInputStream fis = null;
        try {
            fis = new FileInputStream(new File(Config.getString(Config.KEYSTORE_PATH)));
        } catch (Exception ex) {
            throw new IOException("not found keystore file: " Config.getString(Config.KEYSTORE_PATH), ex);
        }
        try{
            keyStore.load(fis, Config.getString(Config.KEYSTORE_PASSWORD).toCharArray());
        }finally {
            IOUtils.closeQuietly(fis);
        }
        CertificateFactory cf = CertificateFactory.getInstance("X.509");
        FileInputStream in = new FileInputStream(Config.getString(Config.HTTPS_SERVER_CERT));
        KeyStore trustStore = KeyStore.getInstance("JKS");
        trustStore.load(null);
        try {
            X509Certificate cacert = (X509Certificate) cf.generateCertificate(in);
            trustStore.setCertificateEntry("alias", cacert);
        } finally {
            IOUtils.closeQuietly(in);
        }

        TrustManagerFactory tmf = TrustManagerFactory.getInstance("SunX509");
        tmf.init(trustStore);

        KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
        kmf.init(keyStore, Config.getString(Config.KEYSTORE_PASSWORD).toCharArray());

        SSLContext sslContext = SSLContext.getInstance("SSL");
        sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), new SecureRandom());
        return sslContext;
    } 
```

# javascript - 可拖动在 Chrome/Safari 中不起作用

> ID：15138661
> 
> 赞同：0
> 
> 时间：2013-02-28T14:57:55.080
> 
> 标签：javascript, jquery, google-chrome, draggable

我正在建立这个网站，我被要求让摄影师的图像随机调整大小、排序和定位，并能够单击并拖动它们。除了这个主要问题之外，所有这一切都进行得很顺利。

尽管在 Firefox 中一切正常，但在 Chrome 或 Safari（可能是其他浏览器）中打开时，立即加载时在窗口中不可见的任何图像在您尝试拖动时似乎会消失。如果您在它“消失”后向上滚动，您会注意到图像实际上被发送到页面顶部，同时仍然跟随您的单击和拖动动作。

我以前遇到过这个错误，我相信它是通过删除一些不再需要的 javascript 来解决的。但是这次我似乎已经尝试了删除某些 JS 或链接到 jQuery 库的所有组合，但仍然找不到解决方法。

任何人都知道如何解决这个问题？

您可以在此处查看问题和我的代码：http: [//www.coreytegeler.com/jb/oddfuture/](http://www.coreytegeler.com/jb/oddfuture/)

**EDIT**似乎完全依赖于 Draggable 功能。我删除了除以下之外的所有 JavaScript 代码，但问题仍然存在

```
$(function() {
$( ".vert" ).draggable();
$( ".horiz" ).draggable();
}); 
```

**编辑**这看起来与问题有关

```
 var imgInit_x, imgInit_y, mouseInit_x, mouseInit_y, elem;
document.addEventListener('mousedown', startDrag, false);
document.addEventListener('mousedown', drag, false);
document.addEventListener('mousedown', endDrag, false);

function startDrag(e)
{
    if (e.target.tagName.toUpperCase == "IMG")
    {
        elem = e.target;
        imgInit_x = elem.style.left;
        imgInit_y = elem.style.top;
        mouseInit_x = e.layerX || e.offsetX;
        mouseInit_y = e.layerX || e.offsetX;
    }
}

function drag(e)
{
    try
    {
        currMouse_x = e.layerX || e.offsetX;
        currMouse_y = e.layerY || e.offsetY;
        elem.style.left = imgInit_x + currMouse_x - mouseInit_x;
        elem.style.top = imgInit_y + currMouse_y - mouseInit_y;
    }
    catch (err){}
}

function endDrag(e)
{
    elem = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:37:01.197

当我尝试修改您的代码时，我得到：

```
Uncaught ReferenceError: detector is not defined 
```

问题发生时，该`detector`变量似乎尚未初始化。你能具体说明它的用途吗？另外，我浏览了您的最后一个 Javascript 脚本，但找不到任何用途？尝试删除 Javascript，它可能会解决您的问题。

# html - 针对不同媒体查询的不同 CSS 文件

> ID：15138674
> 
> 赞同：8
> 
> 时间：2013-02-28T14:58:26.193
> 
> 标签：html, css, media-queries

有没有办法让 HTML 文件根据媒体属性使用不同的样式表？我知道该`link`方法采用媒体类型，但我找到的所有引用都只表示媒体类型，而不是扩展查询。我也不确定它将如何确保只选择一个，以及选择哪一个。

基本上在我当前的 CSS 文件中，我有一个像这样的媒体部分（简化仅供参考）：

```
@media (min-device-pixel-ratio: 1.5) {
  specific-media-rules
} 
```

我想要的是提供两个不同的文件，而不是让这个部分和其他媒体非常相似的部分。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-28T15:01:14.750

是的。一个示例如下：您想根据屏幕宽度使用不同的 CSS 文件（一个用于手机，一个用于小型平板电脑），您可以这样做：

```
<link rel="stylesheet" media='screen and (min-width: 140px) and (max-width: 380px)' href="phone.css"/>
<link rel="stylesheet" media='screen and (min-width: 381px) and (max-width: 700px)' href="tablet.css"/> 
```

**但是请注意**，您需要确保每个样式表的要求永远不会相同，就好像它们（例如，如果上面的两个样式表具有相同的最小宽度和最大宽度）**都将被应用**。

# jquery - jQuery - Fancybox 图像没有从 facybox 窗口打开？

> ID：15138681
> 
> 赞同：0
> 
> 时间：2013-02-28T14:58:48.717
> 
> 标签：jquery, fancybox

我通过 ajax 加载了一些内容，然后我触发了 fancybox 来显示该内容。

**检索内容的代码**：

```
jQuery('.trigger').click(function(event) {
        event.preventDefault();
        var someid = window.location.hash.substring(1);
        jQuery.ajax({
            type: "GET",
            url: "index.php",
            data: "?option=com_content&view=article&id="+someid+"&tmpl=component",
            success: function(data){
                jQuery("#ajax").html(jQuery(".article",jQuery(data)).html());
                jQuery("#ajax").fancybox().trigger('click'); 
            }
        });
    }); 
```

此代码有效 - 它加载一些内容并将其显示在 fancybox 窗口中。

问题是该内容还具有链接到另一个图像的缩略图图像，该图像必须再次在fancybox中打开。但是当我点击图像时，什么也没有发生。

一切正常，除了应该从检索到的内容中打开的图像。

但是，如果我不在fancybox 窗口中显示检索到的内容，即只是将其附加到某个元素，则图像将正常工作。

另请注意，在同一站点的另一部分，我不使用 ajax 我有“fancybox in fancybox thing”，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:51:48.133

通过添加解决：

```
jQuery('#ajax a').live('click', function(event) {
        event.preventDefault();
        if(jQuery(this).hasClass('fancybox')) {
            jQuery.parent().fancybox.close();
        }
    }); 
```

# c# - 关于打开/关闭多个数据库连接的最佳实践

> ID：15138682
> 
> 赞同：3
> 
> 时间：2013-02-28T14:58:53.000
> 
> 标签：c#, database, performance, web-applications

我在一个带有大量代码的**网络应用程序中有****一个方法。**在该方法的几乎相反的两端，我有数据库交互。

 ****最佳做法**是多次*打开/关闭其连接*还是*在第一次需要时打开其连接/在最后一次需要时关闭它*？

*多次*

```
connection.Open();
//execute db interaction
connection.Close();

//execute business logic

connection.Open();
//execute db interaction
connection.Close();

//execute business logic

connection.Open();
//execute db interaction
connection.Close();

//etc... 
```

*首先打开/最后关闭*

```
connection.Open();
//execute db interaction

//execute business logic

//etc...

//execute db interaction
connection.Close(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T15:01:13.713

解决此问题的理想方法是在初始连接中获取所有数据。但是，如果您有一个包含非常耗时的代码的大型方法，那么在方法调用的整个过程中保持连接打开是很昂贵的。

因此，打开和关闭两次（对于数据库）效率更高。数据库背后的想法是您希望尽快打开和关闭它们，这样您就不会消耗其他用户也使用的资源。

当我年轻的时候，我很难学会这一点，并且崩溃了一堆服务器。可以肯定的是，无论如何您都使用池连接（不确定是否必须手动设置）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T15:02:14.187

我每种方法使用一个连接：

```
public void MyMethod(){
  using(SqlConnection conn = new SqlConnection()){

    ..all of your code

  }
} 
```

知识渊博的人可能会提供更好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:00:45.703

[http://ericlippert.com/2012/12/17/performance-rant/](http://ericlippert.com/2012/12/17/performance-rant/)

> 如果您有两匹马，并且您想知道这两匹马中哪一个跑得更快，那么就让您的马匹比赛。不要对马匹进行简短的描述，将它们发布到互联网上，让随机的陌生人猜猜哪个更快！即使你得到了一个准确的答案，你又怎么能相信它的准确性呢？通过自己运行并用秒表测量它们，您可以轻松准确地发现两个程序中的哪个更快。

完成连接后始终关闭连接，因此它们底层的数据库连接可以返回池中并可供其他调用者使用。连接池的优化非常好，因此这样做不会有明显的损失。该建议与交易基本相同 - 完成后保持简短并关闭。**

# css - CSS - 主要内容有图案，子元素需要透明

> ID：15138684
> 
> 赞同：0
> 
> 时间：2013-02-28T14:59:01.210
> 
> 标签：css

代码：

```
<div id="slider_footer">

    <div class="slider_tabs container clearfix" >

        <span role="winter" class="current">
            <div class="slider_tabs_naslov">Zima</div>
            <div class="slidet_tabs_tekst">Lorem Ipsum Lorem</div>
        </span>

        <span role="summer">
            <div class="slider_tabs_naslov">Leto</div>
            <div class="slidet_tabs_tekst">Lorem Ipsum Lorem</div>
        </span>

        <span role="spring">
            <div class="slider_tabs_naslov">Prolece</div>
            <div class="slidet_tabs_tekst">Lorem Ipsum Lorem</div>
        </span>

        <span role="fall">
            <div class="slider_tabs_naslov">Jesen</div>
            <div class="slidet_tabs_tekst">Lorem Ipsum Lorem</div>
        </span>

    </div>
</div> 
```

**slider_footer**是容器元素，**slider_tabs**是子元素。**slider_footer**以 100% 的宽度覆盖图像（它绝对定位在图像上），并且该元素具有**png**图像模式。**slider_tabs**需要透明并显示图像。如何覆盖父元素（**slider_footer**）的模式并使**slider_tabs**透明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:32:09.140

这应该做

```
div#slider_footer {
    background: url(pattern.png);
}
div#slider_footer div.slider_tabs span {
    background: rgba(255,255,255,0.75);  /* R, G, B, Opacity */
} 
```

它让#slider_footer 有你的图案背景，你的内容有一个不透明的颜色，这让你的文本完全可见。

# android - 跨不同的活动或片段维护对话框和线程？

> ID：15138687
> 
> 赞同：0
> 
> 时间：2013-02-28T14:59:08.373
> 
> 标签：android, android-fragments, android-dialogfragment

我正在为 7" 平板电脑制作应用程序。我正在按照此处给出的示例[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)进行操作。

有两个片段。

TitlesFragment 包含列表 DetailsFragment 包含 webview 以在单击列表中的项目时显示结果

在横向模式下，它们彼此相邻。单击 TitlesFragment 列表项将在 DetailsFragment 中显示详细信息。都在同一个活动中。

然而，在纵向模式下，单击 TitlesFragment 会打开一个名为 DetailsActivity 的新 Activity，该 Activity 具有显示详细信息的 DetailsFragment。

当他在 DetailsActivity 切换到横向模式时，会完成 DetailsActivity 并返回 TitlesActivity，在那里他将看到前面解释的拆分视图。

现在的问题是——

假设他在纵向模式下的 DetailsActivity。他开始下载并显示带有活动下载进度条的对话框。现在他切换到横向模式。详细信息活动完成，我的下载对话框消失了。我该如何处理这种情况？

这似乎是一个常见问题，但我搜索后找不到解决方案。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:07:38.783

> 假设他在纵向模式下的 DetailsActivity。他开始下载并显示带有活动下载进度条的对话框。现在他切换到横向模式。详细信息活动完成，我的下载对话框消失了。我该如何处理这种情况？

我假设`Service`即使用户`DetailsActivity`通过切换到横向完成下载，下载也会继续（可能是？！）。在这种情况下，您可以让景观活动（将包含两个片段）知道这一点，并以某种方式指示下载仍在进行中，并且应该显示一个指示器。该指示器可以是一个对话框/`ProgressBar`仅位于该位置的顶部`DetailsFragment`（因此用户仍然可以完全使用该应用程序）或整个屏幕。

或者，您可能会丢失对话框并仅显示通知，让用户知道下载正在进行中，而无需对话框。如果下载很重要并且用户应该等待，这不是一个选项。

# ruby - 除了实际元素之外，Nokogiri XML.children 返回格式化元素。如何避免这种情况？

> ID：15138688
> 
> 赞同：2
> 
> 时间：2013-02-28T14:59:09.817
> 
> 标签：ruby, ruby-on-rails-3, nokogiri

我有以下 XML：

```
<attributes>
    <intelligence>27</intelligence>
    <memory>21</memory>
    <charisma>17</charisma>
    <perception>17</perception>
    <willpower>17</willpower>
</attributes> 
```

我想解析以下内容：

```
intelligence: 27, memory: 21, charisma: 17, perception: 17, willpower: 17 
```

当我尝试这段代码时：

```
def get_attributes(api)
  attributes = []
  api.xpath("//attributes").children.each do |attribute|
    name = attribute.name.tr('^A-Za-z0-9', '')
    text = attribute.text
    attributes << "#{name}: #{text}"
  end
  attributes
end 
```

我得到每个偶数孩子的换行数据（因为格式化）的结果：

```
#(Text "\n      ")
#(Element:0x3ffe166fdb9c { name = "intelligence", children = [ #(Text "20")] })
#(Text "\n      ")
#(Element:0x3ffe166f71ac { name = "memory", children = [ #(Text "25")] })
#(Text "\n      ")
#(Element:0x3ffe166f3818 { name = "charisma", children = [ #(Text "23")] })
#(Text "\n      ")
#(Element:0x3ffe166f0604 { name = "perception", children = [ #(Text "16")] })
#(Text "\n      ")
#(Element:0x3ffe166b52e8 { name = "willpower", children = [ #(Text "15")] })
#(Text "\n    ") 
```

Nokogiri 中是否有一种方法可以跳过这些“仅格式化”的孩子？还是我必须手动遍历奇数元素？

我希望`api.xpath("//attributes").children`导航实际的孩子，而不是格式化文本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T15:51:31.220

该[`children`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-children)方法将返回目标节点的所有子节点，包括文本节点。如果您只想要所有元素节点子节点，您可以在 XPath 查询中使用以下命令指定它`*`：

```
def attributes(api)
  api.xpath('//attributes/*').each_with_object([]) do |n, ary|
    ary << "#{n.name}: #{n.text}"
  end
end 
```

这将返回一个格式为 的字符串数组`name: value`，这就是您想要的样子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:35:43.940

我认为简短的回答是“不”。但是，您可以轻松地做到：

```
if attribute.element?
    name = attribute.name.tr('^A-Za-z0-9', '')
    text = attribute.text
    attributes << "#{name}: #{text}"
end 
```

以获得预期的效果。或者，此版本可能更具可读性：

```
if ! attribute.text?
   name = ...
   ...
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:38:24.200

如果您只想要孩子的文本节点，请使用：

```
require 'nokogiri'
require 'pp'

doc = Nokogiri::HTML(<<EOT)
<attributes>
    <intelligence>27</intelligence>
    <memory>21</memory>
    <charisma>17</charisma>
    <perception>17</perception>
    <willpower>17</willpower>
</attributes>
EOT

doc.at('attributes').children.map(&:text) 
```

返回：

```
["27", "21", "17", "17", "17"] 
```

从那里你可以轻松地做到：

```
'intelligence: %02d, memory: %02d, charisma: %02d, perception: %02d, willpower: %02d' % doc.at('attributes').children.map(&:text)
=> "intelligence: 27, memory: 21, charisma: 17, perception: 17, willpower: 17" 
```

如果你想让它更有条理，你可以这样做：

```
doc.at('attributes').children.each_with_object({}){ |o,h| h[o.name] = o.text }
=> {"intelligence"=>"27", "memory"=>"21", "charisma"=>"17", "perception"=>"17", "willpower"=>"17"} 
```

或者：

```
doc.at('attributes').children.each_with_object({}){ |o,h| h[o.name.to_sym] = o.text }
=> {:intelligence=>"27", :memory=>"21", :charisma=>"17", :perception=>"17", :willpower=>"17"} 
```

* * *

```
doc.at('attributes').children
=> [#<Nokogiri::XML::Element:0x3fc3245fb8fc name="intelligence" children=[#<Nokogiri::XML::Text:0x3fc3245fb6f4 "27">]>, #<Nokogiri::XML::Element:0x3fc3245fb4ec name="memory" children=[#<Nokogiri::XML::Text:0x3fc3245fb2e4 "21">]>, #<Nokogiri::XML::Element:0x3fc3245fb0dc name="charisma" children=[#<Nokogiri::XML::Text:0x3fc3245faed4 "17">]>, #<Nokogiri::XML::Element:0x3fc3245fecb4 name="perception" children=[#<Nokogiri::XML::Text:0x3fc3245feaac "17">]>, #<Nokogiri::XML::Element:0x3fc3245fe8a4 name="willpower" children=[#<Nokogiri::XML::Text:0x3fc3245fe69c "17">]>] 
```

# javascript - CSS更好地显示图像预览

> ID：15138692
> 
> 赞同：1
> 
> 时间：2013-02-28T14:59:23.090
> 
> 标签：javascript, jquery, html, css

我试图弄清楚什么是最好的，如果可以的话，以及需要的方法来获取上传的图像并在 CSS 中修剪图像以获得拇指。如果它不能在纯 CSS 中完成，那么在 JavaScript/jQuery 中完成它的方法是什么？图像可能有不同的大小，但我正在寻找一种图像将**在 center 上成方形**，然后缩小以适合的方式。下面的例子：

此图像为 413 x 300。

![在此处输入图像描述](../Images/6538de1e9d53ea61ec71f7b4724afbf2.png)

如果这张图片是从左到右为投资组合拇指修剪的，它将是 300 X 300：

![在此处输入图像描述](../Images/8f609fe7396a21e3ff62c05b83a21114.png)

然后需要将图像缩小为拇指 200 x 200 或拇指设置为显示的任何值：

![在此处输入图像描述](../Images/7713c8912a20c5058e759a68ae92216c.png)

**编辑** 我的理解，如果`#img_preview{width:200px;}`应用它会导致：

![在此处输入图像描述](../Images/cdd0ec8a5315e167152a48174ec2ba87.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T15:09:00.073

这里的例子：http: [//jsfiddle.net/cnWqQ/5/](http://jsfiddle.net/cnWqQ/5/)

像这样的CSS：

```
#img-wrap{
    height:200px;
    width: 200px;
    background-image: url('http://i.stack.imgur.com/yQ1j8.jpg');
    background-size: cover;
    background-position:center; 
} 
```

像这样的html：

```
<div id="img-wrap"></div> 
```

通过将图像作为背景放在 div 中的工作原理，始终适用于所有图像形状和大小。

它涉及一些css3。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T15:06:22.670

你可以在 CSS 中做到这一点，但它只适用于现代浏览器：

您将使用`background-image`属性：

```
<div id="myImageTrimed">
</div> 
```

和CSS：

```
#myImageTrimed {
    background-image: url('img/youImage.jpg');
    background-position: center; /* to make sure it trims the borders */
    background-size: cover; /* As large as possible */
    height: 200px; /* But only 200x200px are shown */
    width: 200px;
} 
```

如果您有更多浏览器限制，请发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:02:29.680

只需将 CSS 设置为`width`您需要的值，高度将自动调整以保持纵横比。

```
#img_preview{
    width:200px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T15:15:06.010

您可以使用以下命令屏蔽图像`div`：

你的分区： `height:200px; width:200px; overflow: hidden;`

你的形象： `position:absolute; height:inherit; margin-left:-15%;`

请参阅下面的演示：http: [//jsfiddle.net/jRCgP/](http://jsfiddle.net/jRCgP/)

# sitecore - sitecore：无法访问分析（登录失败）

> ID：15138694
> 
> 赞同：0
> 
> 时间：2013-02-28T14:59:25.913
> 
> 标签：sitecore, sitecore6, sitecore-dms

所有数据库都存储在我需要远程访问的远程服务器中。我需要从我的代码隐藏文件中访问 Analytic db 以获取查看次数最多的页面。所以，我尝试了这样的事情：

```
SqlConnection thisConnection = new SqlConnection("Data Source=xxx.xxx.xxx.xxx;database=xxxx ;User id=xxxx;Password=xxxx;"); 
```

但是抛出了一个异常（登录失败......）而且我发现很少有指南，但并不真正了解它是如何使用的。

[指南 1：使用http://learnsitecore.cmsuniverse.net/en/Developers/Articles/2009/09/mostviewedList.aspx](http://learnsitecore.cmsuniverse.net/en/Developers/Articles/2009/09/mostviewedList.aspx)中提到的创建 LINQ to SQL 类（O/R 设计器） 谁能告诉我或指导我应该做什么我愿意？我对这样做的想法完全为零。

指南 2：使用配置管理器（我还没有尝试过）

```
string connectionString = ConfigurationManager.ConnectionStrings["ApplicationServices"].ConnectionString;

using(SqlConnection SqlConnection = new SqlConnection(connectionString)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:05:53.583

您使用的是哪个版本的 Sitecore？您使用的是 OMS 还是 DMS？您链接到的文章用于查询 OMS，在 Sitecore 6.5/DMS 中，您应该只通过 Sitecore.Analytics API 进行查询，因此需要一个 sql 连接参考。

[如何使用 sitecore 6.5 Analytics API 获取项目页面浏览量](https://stackoverflow.com/questions/7733321/how-to-get-item-page-views-using-sitecore-6-5-analytics-api)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:18:11.643

[吉姆](https://stackoverflow.com/users/897938/jim)在这个[答案](https://stackoverflow.com/questions/11008249/sitecore-6-5-accessing-analytics-database)中提到他最终写了自己的电话。也许他可能是更多信息的来源。

此外，我不知道您的要求到底是什么，但请快速查看[此页面](https://github.com/Velir/Sitecore-Analytics)，看看此代码是否提供您所追求的。

希望这可以帮助。

# android - 如何在android的sdcard中制作文件夹

> ID：15138695
> 
> 赞同：1
> 
> 时间：2013-02-28T14:59:30.760
> 
> 标签：android, sd-card, android-sdcard

我正在尝试在文件夹中的**SD 卡上****备份**我的收件箱短信。但我无法在**SD 卡**上创建文件夹我正在使用此代码

 ****```
backup=(Button)findViewById(R.id.backup);
backup.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View arg0) {

        backupSMS();
    }
         public ArrayList<String> smsBuffer = new ArrayList<String>();
           String smsFile = "SMS-" + SystemClock.currentThreadTimeMillis() + ".csv";

    private void backupSMS() {
        smsBuffer.clear();
        Uri mSmsinboxQueryUri = Uri.parse("content://sms/inbox");
        Cursor cursor1 = getContentResolver().query(
                mSmsinboxQueryUri,
                new String[] { "_id", "thread_id", "address", "person", "date",
                        "body", "type" }, null, null, null);
        //startManagingCursor(cursor1);
        String[] columns = new String[] { "_id", "thread_id", "address", "person", "date", "body",
                "type" };
        if (cursor1.getCount() > 0) {
            String count = Integer.toString(cursor1.getCount());
            Log.d("Count",count);
            while (cursor1.moveToNext()) {

                 String messageId = cursor1.getString(cursor1
                        .getColumnIndex(columns[0]));

                 String threadId = cursor1.getString(cursor1
                        .getColumnIndex(columns[1]));

                String address = cursor1.getString(cursor1
                        .getColumnIndex(columns[2]));
                String name = cursor1.getString(cursor1
                        .getColumnIndex(columns[3]));
                String date = cursor1.getString(cursor1
                        .getColumnIndex(columns[4]));
                String msg = cursor1.getString(cursor1
                        .getColumnIndex(columns[5]));
                String type = cursor1.getString(cursor1
                        .getColumnIndex(columns[6]));

                smsBuffer.add(messageId + ","+ threadId+ ","+ address + "," + name + "," + date + " ," + msg + " ,"
                        + type);

            }           
            generateCSVFileForSMS(smsBuffer);
        }               
    }

     private void generateCSVFileForSMS(ArrayList<String> list)
    {

        try 
        {
            String storage_path = Environment.getExternalStorageDirectory().toString() + File.separator + smsFile;
            FileWriter write = new FileWriter(storage_path);

            write.append("messageId, threadId, Address, Name, Date, msg, type");
            write.append('\n');
            write.append('\n');

            for (String s : list)
            {
                write.append(s);
                write.append('\n');
            }
            write.flush();
            write.close();
        }

        catch (NullPointerException e) 
        {
            System.out.println("Nullpointer Exception "+e);
             //  e.printStackTrace();
         }
        catch (IOException e) 
        {
            e.printStackTrace();
        }
        catch (Exception e) 
        {
            e.printStackTrace();
       }

    }
}); 
```

使用此代码，我可以**备份**但不能在文件夹中。请帮助我，我是 android 新手，在此先感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T15:04:13.270

还要检查是否安装了 sdcard

```
if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
{
   // sd card mounted
}   

File direct = new File(Environment.getExternalStorageDirectory() + "/YourFolder");

if(!direct.exists())
{
    if(direct.mkdir()) 
      {
       //directory is created;
      }

} 
```

我忘了提到你需要在清单中提供权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

有了上述权限，您也将默认拥有阅读权限。

另外最好使用`File.seperator`而不是`/`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T15:02:18.440

如果您创建一个包装顶级目录的 File 对象，您可以调用它的 mkdirs() 方法来构建所有需要的目录。就像是：

```
// create a File object for the parent directory
File wallpaperDirectory = new File("/sdcard/Wallpaper/");
// have the object build the directory structure, if needed.
wallpaperDirectory.mkdirs();
// create a File object for the output file
File outputFile = new File(wallpaperDirectory, filename);
// now attach the OutputStream to the file object, instead of a String representation
FileOutputStream fos = new FileOutputStream(outputFile); 
```

*注意：*使用 Environment.getExternalStorageDirectory() 获取“SD 卡”目录可能是明智的，因为如果手机附带的东西不是 SD 卡（例如内置闪存，a'la the苹果手机）。无论哪种方式，您都应该记住，您需要检查以确保它确实存在，因为 SD 卡可能已被移除。

*更新：*由于 API 级别 4 (1.6)，您还必须请求许可。像这样的东西（在清单中）应该可以工作：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```****

# sencha-touch - 从列表 sencha touch 2 MVC 将数据加载到详细视图中

> ID：15138701
> 
> 赞同：0
> 
> 时间：2013-02-28T14:59:51.420
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-2.1

我正在尝试使用 .setActiveItem 在 Sencha 2.1 MVC 应用程序的列表视图（Ext.dataview.List）中显示项目的详细信息。问题是我无法获得加载数据的详细视图。

我尝试了许多不同的方法来获取详细视图以显示数据，包括 setData、setRecord 和 Update（有关我最近的一些尝试，请参见下文）。

我在论坛、stackoverflow 和谷歌搜索时得到的大多数结果都是针对不使用 MVC 模型的 sencha 应用程序。（哦，使用 .push 可以正常工作，但由于其他原因，我正在远离导航视图）。

从我的控制器：

```
showDetail: function(list, record) {
    /*this.getMain().push({
        xtype: 'labdetail',
        title: record.fullName(),
        data: record.getData()
    });*/
//The code above works, but only as long as I stay with navigation view...
    console.log("showDetail");
       //Ext.getCmp('labdetail').update(record.data);
       //LabDetail.update(record.data);
       //Ext.fly('labdetail').setData(record.data);
       //Ext.getCmp('labdetail').setData(record.data);
       //Ext.component('Labblistan.view.LabDetail').destroy();
       //Ext.getCmp('Labblistan.view.LabDetail').destroy();
       //Ext.fly('labdetail').destroy();
       //var DetailView = Ext.create('Labblistan.view.LabDetail'); //If I create the view the console complains I need to destroy previous views with the same ID, hence the different destroy() approaches above
       //DetailView.setRecord(record);
       Ext.getCmp('mainpanel').setActiveItem('labdetail'); //This navigates to the right view, but it's empty
}, 
```

我的详细视图：

```
Ext.define('Labblistan.view.LabDetail', {
extend: 'Ext.Panel',
xtype: 'labdetail',
id: 'labdetail',
config: {
    title: '{Analysis}',
    styleHtmlContent: true,
    scrollable: 'vertical',
    fullscreen: true,
    tpl: [
        '<div style=position:absolute;top:50px;><p>Info about {Analysis}</p><p>{Comment}</p></div>'
    ],
       },
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:12:50.460

不知道这是否是最佳实践，但这就是我的工作方式：

```
Ext.getCmp('mainpanel').setActiveItem({
       xtype: 'labdetail',
       title: 'Detaljinformation',
       data: record.getData()
}); 
```

# php - PHP mt_srand 函数

> ID：15138703
> 
> 赞同：0
> 
> 时间：2013-02-28T14:59:56.060
> 
> 标签：php, random

我编写了一个应该生成伪随机字符串的代码。我试图通过收集用户鼠标移动的熵来提高随机性。

这是我的代码：

```
// As described in the PHP documentation
function make_seed() {
    list($usec, $sec) = explode(' ', microtime());
    return (float) $sec + ((float) $usec * 100000);
}

function rand_string($entropy, $length, $chars) {
    mt_srand($entropy . make_seed()); // Here is the important line
    $return = '';
    $charlen = strlen($chars);
    for ($i=0;$i<$length;$i++) {
        $rand = mt_rand(0, $charlen) - 1;
        $return .= substr($chars, $rand, 1);
    }
    return $return;
}

$entropy = '18421828841384386426948169412548'; // Mouse movements, changes everytime
echo rand_string($entropy, 20, 'abcdefghijklmnopqrstuvwxz'); 
```

我运行了几次该功能。有些值非常频繁地出现，所以这是一个非常弱的功能。我不明白为什么。mt_srand 的参数有限制吗？它必须是一个数字吗？

编辑： mt_srand() 种子必须是 INT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:34:46.233

mt_srand() 采用无符号 32 位整数来初始化 mersenne twister。
[http://svn.php.net/viewvc/php/php-src/trunk/ext/standard/rand.c?revision=321634&view=markup](http://svn.php.net/viewvc/php/php-src/trunk/ext/standard/rand.c?revision=321634&view=markup)：

```
194     /* {{{ php_mt_srand
195     */
196     PHPAPI void php_mt_srand(php_uint32 seed TSRMLS_DC)
197     {
198     /* Seed the generator with a simple uint32 */
199     php_mt_initialize(seed, BG(state));
200     php_mt_reload(TSRMLS_C);
201     
202     /* Seed only once */
203     BG(mt_rand_is_seeded) = 1;
204     }
205     /* }}} */ 
```

我建议寻找底层系统的方法来收集熵/随机位。
这将是*nix 机器上的[rngd + /dev/random和 Windows 下的](http://linux.die.net/man/8/rngd)[CryptGenRandom](http://msdn.microsoft.com/en-us/library/aa379942.aspx)或（更简单但更慢）[CAPICOM Utilities.GetRandom()](http://msdn.microsoft.com/en-us/library/aa388182%28v=vs.85%29.aspx)。

根据您的需要，[mcrypt_create_iv()](http://docs.php.net/manual/en/function.mcrypt-create-iv.php)也可能是一个不错的选择（可能与从 iv 创建“可读”字符串的东西结合使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:30:23.020

我编写了自己的随机字符串生成器，没有使用 php 的 rand() 函数。

```
function rs($length,$chars)
{
    $hex = sha1(microtime()); //contains hexadecimal string
    $return = '';
    $seedLen = strlen($chars); //length of the source characters string
    $posLen  = strlen($hex); //length of the hex string
    for($i=0;$i<$length;$i++){
        $idx_hex = $i % ($posLen-1); //make sure the address is in the hex string (if $i is too big)
        $pos = hexdec($hex[$idx_hex].$hex[$idx_hex+1]);
        $return .= $chars[$pos % $seedLen];
    }
    return $return;
} 
```

它的工作方式是：它生成当前时间的 sha1 哈希（一个看起来像 06009da3e0d26f8569b65cb50a774bb6b431a777 的字符串）然后它一次从哈希中获取 2 个值，并将其用作 $chars 字符串中字符的十六进制“地址”。即在本例中，如果 $chars 字符串是“abcdefghijklmnopqrstuvwxyz”，那么“random”字符串中的第一个字符将是“g”——chars 字符串中索引为 06 的字母。限制：(1) 仅使用 $chars 字符串中的前 256 个字符（如果它长于 256 个字符）(2) 由于模运算符，此函数比 mt_rand() 慢。

编辑： mt_rand() 也使用模运算符，因此速度可能与此函数的顺序相同。我没有进行任何比较。

# prolog - Prolog 中的切割和失败

> ID：15138706
> 
> 赞同：7
> 
> 时间：2013-02-28T15:00:02.943
> 
> 标签：prolog, prolog-cut

考虑以下代码：

```
a(X) :- b(X),!,c(X),fail.
a(X) :- d(X).

b(1).
b(4).
c(1).
c(3).

d(4). 
```

查询`a(X).`产生

```
1 ?- a(X).
false.

2 ?- 
```

但有了这段代码

```
a(X) :- b(X),!,c(X).
a(X) :- d(X).

b(1).
b(4).
c(1).
c(3).

d(4). 
```

查询`a(X).`结果：

```
1 ?- a(X).
X = 1. 
```

所以我的问题是，为什么`fail/1`产生错误？它应该强制回溯，对吗？然后`b(1)`会`c(1).`被检查，我想，那为什么会失败呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:12:14.117

它失败了，因为`fail` *必须*失败。

剪切删除了替代项，然后禁止通过`X`绑定“返回”的值。尝试

```
a(X) :- b(X),c(X),fail.
... 
```

你会得到

```
?- a(X).
X = 4. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-22T18:46:25.017

例子 ：

```
a(X):- b(X),!,fail. %is the same as \+ a(X):- b(X). 
```

“！”的合并 和“失败”给你**a(X) 的否定**。

它被称为**失败的否定**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T17:15:50.087

正如@CapelliC 所说， must 的规则`a(X) :- b(X),!,c(X),fail.` *失败*了，因为他有`fail`component 。

在第一个代码示例中 - 检查开始`1`，组件`b(1)`满足，然后它到达`!`，因此不再执行可选检查。

有关 的更多说明，您可以检查`cut` 将`!``a(X) :- b(X),!,c(X),fail.`

像这样 -

```
a(X) :- b(X),c(X),fail,!.
a(X) :- d(X).

b(1).
b(4).
c(1).
c(3).

d(4). 
```

现在 -

```
?- a(X).
X = 4. 
```

因为`fail`是 在 之前`!`所以`!`是*不可达*所以`cut`不 影响 还是 另一个 可选 的 考虑 .

**编辑 ：**

`fail`只与他在那里写的规则有关，所以会`a(X) :- b(X),c(X),fail,!.`永远导致失败，而不是`a(X) :- d(X).`规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-17T00:36:58.440

```
a(X) :- b(X),c(X),fail.
a(X) :- d(X).

b(1).
b(4).
c(1).
c(3).

d(4).

a(X). 
X = 4

a(X) :- b(X),!,c(X).
a(X) :- d(X).

b(1).
b(4).
c(1).
c(3).

d(4).

a(X).
X = 1

a(X) :- b(X),!,c(X),fail.
a(X) :- d(X).

b(1).
b(4).
c(1).
c(3).

d(4).

a(X).
false 
```

# python - 在 Mac OS X Mountain Lion 上安装 gmpy

> ID：15138708
> 
> 赞同：2
> 
> 时间：2013-02-28T15:00:10.110
> 
> 标签：python, module, 32bit-64bit, gmp

我无法在没有警告的情况下在 OS X Mountain Lion 上安装 gmpy（1 或 2）。我试过`pip`了，我试过编译，我安装了 gcc 4.2.1 并尝试用 i386 arch 编译 gmp（虽然我的 Mac 是 64 位），但它们都没有工作！

问题是我可以在没有警告的情况下使用 Python 3+ 设置 gmpy，但不能使用 Python 2.7。

我使用时得到的详细信息：

`python setup.py install`对于 gmpy2 是：

```
running install
running build
running build_ext
building 'gmpy2' extension
creating build/temp.macosx-10.6-intel-2.7
creating build/temp.macosx-10.6-intel-2.7/src
gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -DWITHMPFR=1 -DWITHMPC=1 -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/gmpy2.c -o build/temp.macosx-10.6-intel-2.7/src/gmpy2.o
In file included from src/gmpy2.c:455:
src/mpz_pylong.c: In function ‘mpn_sizebits’:
src/mpz_pylong.c:55: warning: right shift count >= width of type
src/mpz_pylong.c:55: warning: right shift count >= width of type
creating build/lib.macosx-10.6-intel-2.7
gcc-4.2 -bundle -undefined dynamic_lookup -arch i386 -arch x86_64 -g build/temp.macosx-10.6-intel-2.7/src/gmpy2.o -lgmp -lmpfr -lmpc -o build/lib.macosx-10.6-intel-2.7/gmpy2.so
ld: warning: ignoring file /usr/local/lib/libgmp.dylib, file was built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386): /usr/local/lib/libgmp.dylib
ld: warning: ignoring file /usr/local/lib/libmpfr.dylib, file was built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386): /usr/local/lib/libmpfr.dylib
ld: warning: ignoring file /usr/local/lib/libmpc.dylib, file was built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386): /usr/local/lib/libmpc.dylib
running install_lib
copying build/lib.macosx-10.6-intel-2.7/gmpy2.so -> /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
running install_egg_info
Writing /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/gmpy2-2.0.0b4-py2.7.egg-info 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:58:53.467

IIRC，此错误是因为 python 作为 32 位应用程序运行但试图将 gmpy 编译为 64 位扩展而引起的。请参阅此问题报告：

[https://code.google.com/p/gmpy/issues/detail?id=11&can=1&q=Mac](https://code.google.com/p/gmpy/issues/detail?id=11&can=1&q=Mac)

# actionscript-3 - 如何在flex中访问自定义组件之外的公共功能？

> ID：15138710
> 
> 赞同：0
> 
> 时间：2013-02-28T15:00:11.630
> 
> 标签：actionscript-3, apache-flex

我有一个应用程序宽度的`mx:ViewStack`组件，每个组件下都有不同的视图组件`s:NavigatorContent`，如下所示。

```
<mx:ViewStack id="vsOne" resizeToContent="true">
    <s:NavigatorContent label="First">
        <package:MyFirstComponent id="myFirstComponent"/>
    </s:NavigatorContent>
    <s:NavigatorContent label="Second">
        <package:MySecondComponent id="mySecondComponent"/>
    </s:NavigatorContent>
</mx:ViewStack> 
```

这是`package.MyFirstComponent`重要的部分..

```
<s:Button label="Next" click="somethingToGoForward()"/> 
```

我试过的：

1.  调用`somethingToGoForward()`视图组件并尝试访问`parent` `vsOne`：不工作。
2.  调用`parent.somethingToGoForward()`（当此方法与 相同的 mxml 时`ViewStack`）：不工作

如何从包含它的 mxml 文件之外的任何地方更改我`ViewStack`的 's ？`selectedIndex`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:47:54.023

这是一个使用简单事件的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"     initialize="application1_initializeHandler(event)"
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"  xmlns:local="*">
    <fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        protected function application1_initializeHandler(event:FlexEvent):void
        {
            viewStack.selectedChild=one;

        }

        protected function one_changeViewHandler(event:FlexEvent):void
        {
            viewStack.selectedChild=two;
        }

        protected function two_changeViewHandler(event:FlexEvent):void
        {
            viewStack.selectedChild=one;

        }

    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<mx:ViewStack id="viewStack" >
    <local:ccomp id="one" changeView="one_changeViewHandler(event)" text="LAbel ONE">

    </local:ccomp>
    <local:ccomp id="two" changeView="two_changeViewHandler(event)" text="LAbel TWO" >

    </local:ccomp>
</mx:ViewStack>
</s:Application> 
```

ccomp 是一个自定义组件

```
<?xml version="1.0" encoding="utf-8"?>
    <mx:HBox xmlns:fx="http://ns.adobe.com/mxml/2009" 
     xmlns:s="library://ns.adobe.com/flex/spark" 
     xmlns:mx="library://ns.adobe.com/flex/mx" width="400" height="300">
<fx:Metadata>
    [Event(name="changeView", type="mx.events.FlexEvent")]  
</fx:Metadata>
<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        private var _text:String;

        public function get text():String
        {
            return _text;
        }
        [Bindable]
        public function set text(value:String):void
        {
            _text = value;
        }

        protected function button1_clickHandler(event:MouseEvent):void
        {
            this.dispatchEvent(new FlexEvent("changeView",true));               
        }
    ]]>
</fx:Script>

<fx:Declarations>
</fx:Declarations>
    <s:Button label="Change" click="button1_clickHandler(event)">
    </s:Button>
    <s:Label fontSize="24" text="{text}">
    </s:Label>
   </mx:HBox> 
```

戴维德

# vb.net - Sqlite 数据提供程序 .net 错误：不同的 SQL 响应命令提示符与 SQLite ADO.NET 提供程序

> ID：15138713
> 
> 赞同：0
> 
> 时间：2013-02-28T15:00:23.670
> 
> 标签：vb.net, sqlite, sqlite-net

我发现了一个问题，可能是 SQLite ADO.NET Provider 中的一个错误。

环境是 Windows 7 Pro，使用 Visual Studio 2012 Professional，带有 Visual Basic.net 和 ADO.NET 2.0。数据提供者版本 1.0.66.0 - v2.0.50727。

为了测试，我使用了一个只有一个表（“操作”）的简单 SQLite 数据库。

数据如下：

```
ID|TYPE|CODE|SIGN|DATE 
15|TE|MC_02|ACME|2007-02-13
132|TE|MC_02|ACME|2009-01-16
190|TE|MC_02|ACME|2011-02-18
596|M|MC_02|MA|2009-06-17
703|M|MC_02|MA|2009-11-30
796|M|MC_02|MA|2010-06-10
898|M|MC_02|NQ|2011-07-04
929|M|MC_02|NQ|2011-12-02
980|M|MC_02|NQ|2012-01-02
1011|M|MC_02|NQ|2012-06-29
1061|M|MC_02|NQ|2012-12-05
1062|M|MC_02|AB|2000-01-01 
```

如果我使用命令提示符运行以下 SQL SELECT 语句：

```
D:\DB>sqlite3 test.db

Sqlite>SELECT *, MAX(DATE) FROM operations WHERE CODE = 'MC_02' GROUP BY TYPE; 
```

我有（正确）：

```
1061|M|MC_02|NQ|2012-12-05|2012-12-05 
190|TE|MC_02|ACME|2011-02-18|2011-02-18 
```

相反，如果我使用下面的 VB.net 代码（只是一个带按钮的表单）：

```
Public Class Form1
    Dim arrSelect As New ArrayList
    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Dim strConnection As String = "data source= D:\DB\test.db"
        Dim strQuery As String = "SELECT *, MAX(DATE) FROM operations WHERE CODE = 'MC_02' GROUP BY TYPE"
        Dim strRecord As String = ""
        arrSelect = SelectSQL(strConnection, strQuery)
        If arrSelect IsNot Nothing Then
            For Each value As Array In arrSelect
                strRecord = ""
                For j As Integer = 0 To value.Length - 1
                    strRecord &= value(j) & "|"
                Next
                Console.WriteLine(strRecord)
            Next
        End If
    End Sub

    Function SelectSQL(ByVal strConn As String, ByVal strCommand As String) As ArrayList
        Try
            Dim SQLconnect As New SQLite.SQLiteConnection()
            Dim SQLcommand As New SQLite.SQLiteCommand
            SQLconnect.ConnectionString = strConn
            SQLconnect.Open()
            SQLcommand = SQLconnect.CreateCommand
            SQLcommand.CommandText = strCommand
            Dim SQLreader As SQLite.SQLiteDataReader = SQLcommand.ExecuteReader()
            Dim listLoc As New ArrayList
            Dim nc As Integer = SQLreader.FieldCount
            Dim arrLoc() As Object
            While SQLreader.Read()
                ReDim arrLoc(nc - 1)
                For j As Integer = 0 To nc - 1
                    arrLoc(j) = SQLreader.Item(j)
                Next
                listLoc.Add(arrLoc)
            End While
            SQLcommand.Dispose()
            SQLconnect.Close()
            Return listLoc
        Catch ex As Exception
            Return Nothing
        End Try
    End Function
End Class 
```

你有这个结果（错误）：

```
1062|M|MC_02|AB|2000-01-01
190|TE|MC_02|ACME|2011-02-18 
```

有人已经遇到过这种行为吗？

这是数据提供者的错误吗？或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:13:33.983

此类查询仅适用于 SQLite 3.7.11 及更高版本，因此您应将提供程序更新到 1.0.80.0 或更高版本。

# android - 在 ListView 中，当列表项有按钮时 onListItemClick 不起作用

> ID：15138716
> 
> 赞同：4
> 
> 时间：2013-02-28T15:00:32.660
> 
> 标签：android

在我的 ListView 中，我的列表项具有如下视图

这是我的 row.xml 布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/Peru"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:background="@drawable/et_back_yellow"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/ib_edit"
            android:layout_width="35dp"
            android:layout_height="30dp"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:layout_weight="1"
            android:background="@drawable/ib_selector"
            android:contentDescription="@string/edit"
            android:src="@drawable/edit" />

        <TextView
            android:id="@+id/tv_date"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="100"
            android:gravity="center_vertical|center_horizontal" />

        <TextView
            android:id="@+id/tv_time"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="100"
            android:gravity="center_vertical|center_horizontal" />

        <ImageButton
            android:id="@+id/ib_delete"
            android:layout_width="35dp"
            android:layout_height="30dp"
            android:layout_marginBottom="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="5dp"
            android:layout_weight="1"
            android:background="@drawable/ib_selector"
            android:contentDescription="@string/edit"
            android:src="@drawable/delete" />
    </LinearLayout>

    <EditText
        android:id="@+id/et_note"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/title"
        android:layout_alignRight="@+id/title"
        android:layout_below="@+id/title"
        android:layout_marginTop="5dp"
        android:ems="10"
        android:inputType="textMultiLine" 
        android:background="@color/yellow">

        <requestFocus />
    </EditText>

</RelativeLayout> 
```

当我单击列表项时，onListItemClick 方法不起作用。但是当我从 row.xml 中删除按钮时，它起作用了。任何人都可以帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T15:15:02.373

`LinearLayout`在你的and中使用这个属性`RelativeLayout`：

```
android:descendantFocusability="blocksDescendants" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:13:29.287

我认为问题的原因是图像按钮的布局权重。因此，请尝试为线性布局中的所有视图赋予权重，并将 weightSum 属性赋予线性布局本身。

我觉得 clickListener 不起作用的原因是 ImageButton 将自身包裹在整个行的宽度上，并且该项目不再具有侦听器代码可以执行的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:13:15.667

[如此处](https://stackoverflow.com/questions/3959840/listview-and-propagating-click-events-from-children-views-in-the-items)所述，您不能同时拥有a 的子视图`onItemClick`和子视图。启用焦点和单击，这将导致不触发。`onClick``ListView``Button``onItemClick`

# c# - 您如何让 C# 从众多图表中找出最高的两个，然后只添加那些作为结果？

> ID：15138718
> 
> 赞同：0
> 
> 时间：2013-02-28T15:00:39.960
> 
> 标签：c#

所以我正在做一个小计算器作为练习。比我注意到我不知道如何告诉 C# 只选择输入的两个最高数字并忽略其余数字。有人可以帮我解决这个问题吗？

示例：
`textBox1`输入**9**
`textBox2`输入**5**
`textBox3`输入**7**

我想得到两个最高的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:11:10.123

不知道这对你有没有帮助...

```
private static int addHighestTwo(IEnumerable<int> source)
{
    var sorted = new List<int>(source);
    sorted.Sort();
    return sorted[sorted.Count - 1] + sorted[sorted.Count - 2];
} 
```

在您的情况下，获取`int`Textboxes 中 Text 的值（提示：[Int32.TryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)），然后像这样调用此方法`addHighestTwo(new[] {valueFromTextBox1, valueFromTextBox2, valueFromTextBox3})`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:17:49.673

将数字放入列表中，如下所示（示例硬编码值）：

```
 List<int> MyList = new List<int> { 3, 4, 6, 7, 9, 3, 4, 5, 5 };
        MyList = MyList.OrderByDescending(p => p).ToList(); 
```

然后获取列表中的前两个整数并将它们相加

```
int sum = MyList[0] + MyList[1]; 
```

只需确保添加验证，以便您在列表中至少有两个值。

# ios - 强制 iOS 应用在 Safari 中打开外部链接

> ID：15138721
> 
> 赞同：3
> 
> 时间：2013-02-28T15:00:41.677
> 
> 标签：ios, cordova, jquery-mobile

我有一个使用 PhoneGap 和 JQuery mobile 制作的 iOS 应用程序。该应用程序有一些我想在移动 Safari 中打开的外部链接，但到目前为止，它们只是在应用程序视图中打开。链接是这样写的：

```
<a rel="external" href="wwww.example.com">Click Here</a> 
```

我阅读了 JQuery mobiles docs，它说添加`rel="external"`可以解决这个问题，但显然不是。有任何想法吗？请记住，这是一个基于 HTML 的应用程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T19:52:01.160

最终能够通过导航到 MainviewController.m 并查找它在其他帖子中提到的提到 webView 的部分然后从这里更改它来做到这一点

```
/* Comment out the block below to over-ride */

/*

- (void) webViewDidStartLoad:(UIWebView*)theWebView
{
    return [super webViewDidStartLoad:theWebView];
}

- (void) webView:(UIWebView*)theWebView didFailLoadWithError:(NSError*)error
{
    return [super webView:theWebView didFailLoadWithError:error];
}

- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
    return [super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
}
*/ 
```

对此

```
/**

 * Start Loading Request

 * This is where most of the magic happens... We take the request(s) and process the response.

 * From here we can re direct links and other protocalls to different internal methods.

 */

- (BOOL)webView:(UIWebView *)theWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType

{

    NSURL *url = [request URL];

    // add any other schemes you want to support, or perform additional

    // tests on the url before deciding what to do -jm

    if( [[url scheme] isEqualToString:@"http"] ||

       [[url scheme] isEqualToString:@"https"])

    {

        [[UIApplication sharedApplication] openURL:url];

        return NO;

    }

    else

    {

        return [ super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ];

    }

} 
```

我没有使用objective-c的经验，所以我不得不对此进行试验，所以我很高兴我让它发挥作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T11:07:32.790

很好帮助了我一点，但它会自动打开链接通过放置：

```
if (navigationType == UIWebViewNavigationTypeLinkClicked) { 
} 
```

它起作用了，现在当用户单击其中包含 http:// 或 https:// 的 url 时，它会在 safari 中打开

所以我完全得到了这个代码：

```
if (navigationType == UIWebViewNavigationTypeLinkClicked) {
if( [[url scheme] isEqualToString:@"http"] ||

   [[url scheme] isEqualToString:@"https"])

{

    [[UIApplication sharedApplication] openURL:url];

    return NO;

}

else

{

    return [ super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ];

}
} 
```

# ios - 表视图控制器、嵌入式表视图或此接口的其他内容？

> ID：15138722
> 
> 赞同：1
> 
> 时间：2013-02-28T15:00:42.520
> 
> 标签：ios, objective-c, xcode, uitableview

我试图弄清楚我应该使用哪种 iOS 用户界面元素来创建此界面：

![ios接口](../Images/84972ac57218ee8d62f44dbf226206ca.png)

在此视图的底部，有一个项目列表。这个项目列表可以任意长。因此，由于标准的详细信息披露指标等，这是一个表格视图是有道理的。

但是，顶部的项目不是表格视图单元格。那么显而易见的答案就是简单地在视图上放置一个tableview，即嵌入的tableview。但这导致了另一个明显的问题，即整个视图应该是可滚动的——在您需要能够滚动到的项目列表下方会有一个“添加项目”按钮，并且界面会很糟糕如果整个视图不滚动。

所以，我可以做到这一点，这样 tableview 是不可滚动的，并且和它需要的一样高，可以包含尽可能多的项目。然后，整个视图嵌入到一个滚动视图中，并正确滚动。我对此的担忧与内存管理有关，如果我这样做，我认为我不会利用动态单元格创建，它本质上是可滚动表格视图的一部分，而是会实例化数十个甚至数百个单元格当视图加载时。

另一种选择是使整个界面成为一个表格视图，顶部和底部按钮实现为不同于显示项目的单元格的自定义表格视图单元格。然而，在过去，我发现这也是一种痛苦，但也许这是我必须忍受的痛苦。

总的来说，我觉得我在这里缺少一个明显的方法，因为这似乎应该非常简单地实现，但我目前不知所措。帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:32:00.867

这都是一个具有单一单元格类型和 4 个部分的表格视图。该单元格具有可选的图像、标签和可选的披露指示符。如果这些不存在，则标签会扩展以包含整个空间。这很容易做到，非常标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:17:23.220

jjv360 正确地提到了它，这应该是 1 个带有部分和自定义单元格的 tableview。不同的外观来自漂亮的图像。

# css - 使用 CSS 垂直居中旋转文本

> ID：15138723
> 
> 赞同：84
> 
> 时间：2013-02-28T15:00:43.800
> 
> 标签：css, vertical-alignment, centering, vertical-text

我有以下 HTML：

```
<div class="outer">
    <div class="inner rotate">Centered?</div>
</div> 
```

`div.outer`是一个狭窄的垂直条。`div.inner`旋转了 90 度。我想要文本“居中？” 在其容器 div 中居中显示。我事先不知道任何一个 div 的大小。

这很接近：http: [//jsfiddle.net/CCMyf/2/](http://jsfiddle.net/CCMyf/2/)。您可以从 jsfiddle 中看到，在`transform: rotate(-90deg)`应用样式之前，文本垂直居中，但在应用样式之后有些偏移。`div.outer`这在短时尤其明显。

是否可以在不事先知道任何大小的情况下垂直居中此文本？我还没有找到`transform-origin`解决这个问题的任何值。

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2014-06-19T21:28:13.303

关键是将位置 top 和 left 设置为 50%，然后将 transformX 和 transformY 设置为 -50%。

```
.inner {
    position: absolute;
    top: 50%;
    left: 50%;
}

.rotate {  
    transform:  translateX(-50%) translateY(-50%) rotate(-90deg);
} 
```

见：http: [//jsfiddle.net/CCMyf/79/](http://jsfiddle.net/CCMyf/79/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-20T11:41:45.810

回答这个问题可能有点晚了，但我偶然发现了同样的问题，并通过添加另一个 div 找到了实现它的方法。

```
<div class="outer">
    <div class='middle'><span class="inner rotate">Centered?</span></div>
</div> 
```

并在该中间元素上应用 a`text-align: center`以及一些定位内容：

```
.middle {
    margin-left: -200px;
    width: 400px;
    text-align: center;
    position: relative;
    left: 7px;
    top: 50%;
    line-height: 37px;
} 
```

`.inner`还可以同时`display: inline-block;`启用`rotate`和`text-align`属性。

这是相应的小提琴：http: [//jsfiddle.net/CCMyf/47/](http://jsfiddle.net/CCMyf/47/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-26T19:17:15.970

将文本旋转 90 度并以 Y 轴为中心的另一个选项是：

```
.rotate-centered {
    top: 50%;
    right: 50%;
    position: absolute;
    transform: scale(-1) translate(-50%, 50%);
    writing-mode: vertical-lr;
 } 
```

```
<span class="rotate-centered">Text<span> 
```

示例：[https ://codepen.io/wwwebman/pen/KKwqErL](https://codepen.io/wwwebman/pen/KKwqErL)

但是由于 IE/EDGE 的不良支持在`writing-mode`那里不起作用： [https ://developer.mozilla.org/en-US/docs/Web/CSS/writing-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/writing-mode)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T15:04:12.023

您可以添加`margin: 0 auto;`到“旋转”类以使文本居中。

```
.rotate {
  -webkit-transform: rotate(-90deg);
  -ff-transform: rotate(-90deg);
  transform: rotate(-90deg);
  width: 16px;  /* transform: rotate() does not rotate the bounding box. */
  margin: 0 auto;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-30T10:35:05.077

'bjnsn' 的答案很好但并不完美，因为当文本中包含空格时它会失败。例如，他使用“居中？” 作为文本，但如果我们将文本更改为假设“居中？与否'那么它将无法正常工作，并将在空格后占用下一行。没有为内部 div 块定义宽度或高度。

```
.inner {
  font-size: 13px;
  font-color: #878787;
  position: absolute;
  top: 50%;
  left: 50%;
  background: #DDD;
} 
```

[https://jsfiddle.net/touqeer_shakeel/f1gfy1yy/](https://jsfiddle.net/touqeer_shakeel/f1gfy1yy/) 但是我们可以使整个文本正确居中对齐，通过设置内部div的宽度等于外部div的高度，内部div的行高等于外部的宽度div 并使用 align-items:center 和 justify-content:center 属性设置内部 div 的 display flex 属性。

```
.inner {
  font-size: 13px;
  font-color: #878787;
  position: absolute;
  top: 50%;
  left: 50%;
  display: flex;
  justify-content:center;
  align-items:center;
  line-height:40px;
}
$('#height').on('change', function(e) {
  $('.outer').css('height', $('#height').val() + 'px');
  $('.inner').css('width', $('#height').val() + 'px');
}); 
```

更新小提琴 [https://jsfiddle.net/touqeer_shakeel/cjL21of5/](https://jsfiddle.net/touqeer_shakeel/cjL21of5/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T15:08:25.287

你可以添加这个：

```
$('.inner').css('margin-top', $(this).parent().height() - 2*$(this).height()); 
```

到你的`.on('change')`功能，你可以在这里看到：http: [//jsfiddle.net/darkajax/hVhbp/](http://jsfiddle.net/darkajax/hVhbp/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-28T15:05:38.100

删除 : `margin-top: -7px;`from`.inner`使垂直旋转的文本以我为中心。它还使水平文本不居中。

只是删除上面的代码？

# performance - PostgreSQL：哪种数据类型更适合这种情况？

> ID：15138730
> 
> 赞同：1
> 
> 时间：2013-02-28T15:00:53.817
> 
> 标签：performance, postgresql, lookup-tables

我正在构建一个数据库，该数据库将用于定义和跟踪我组织内部使用的文档。这些文档中的每一个都有一个与之关联的类别。将每个文档的类别存储为主表中的“TEXT”会更有效，还是将每个文档的类别存储为“SMALLINT”并有一个查找表将该值等同于“文本”字段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T15:09:27.527

这与效率无关。这是关于参照完整性。使主表中的列引用类别表。

[http://en.wikipedia.org/wiki/Referential_integrity](http://en.wikipedia.org/wiki/Referential_integrity)

# wix - wix 主要升级未安装所有文件

> ID：15138731
> 
> 赞同：34
> 
> 时间：2013-02-28T15:00:55.483
> 
> 标签：wix, major-upgrade

我有一个非常简单的 WiX 项目（版本 3.7），它安装了一些文件（一个 .NET 程序版本 6.0.0.0）。我已准备好使用 WiX 中的 MajorUpgrade 功能发布新版本 6.0.1.0。

我在 Product 元素中保持 UpgradeCode 相同，并将版本从 6.0.0.0 更改为 6.0.1.0

```
<Product Id="*" Name="MyApp" Version="6.0.1.0" Manufacturer="Me" 
       UpgradeCode="$(var.TheUpgradeCodeGUID)"> 
```

在安装了 6.0.0.0 的机器上，我运行新的安装程序。

旧版本 6.0.0.0 的删除运行正常（正在删除所有已安装的文件），但是当安装程序继续安装新版本时，缺少 2 个文件：第 3 方 DLL 和第 3 方 EXE（没有已更改）未重新安装。

```
<Component Id="AutomaticUpdaterWPF.dll" Guid="*">
        <File Id="AutomaticUpdaterWPF.dll" Source="AutomaticUpdaterWPF.dll" KeyPath="yes" Checksum="yes" />
</Component>
<Component Id="wyUpdaterProgram" Guid="*">
        <File Id="wyUpdaterProgram" Source="wyUpdate.exe" KeyPath="yes" Checksum="yes" />
</Component> 
```

< ComponentGroup > 中的所有其他文件（一些已修改，一些未修改，包括其他第 3 方 DLL）在主要升级期间正确安装。

如果我在重大升级后单击“修复”，则丢失的 2 个文件会重新出现。另外，如果我是第一次安装 6.0.1.0 版本（不升级，而是在干净的机器上首次安装），那么这两个文件是直接正常安装的。（在多台 Windows 机器上测试（XP、7 和 8）

有人建议什么是错的以及如何解决它？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-28T15:52:54.153

提供的日志文件显示机器上已有一些文件的较新版本：

```
MSI (s) (0C:5C) [16:13:25:890]: Disallowing installation of component: {015A4DC1-56F4-562B-96B5-B3BE0D45FA5F} since the same component with higher versioned keyfile exists
MSI (s) (0C:5C) [16:13:25:890]: Disallowing installation of component: {4B6A1404-3892-5BEF-AB47-8FE3149211A4} since the same component with higher versioned keyfile exists 
```

我过去曾看到此更新程序存在此问题。克里斯托弗是对的。更新程序更新了它的文件，但没有告诉 MSI（它没有更新 MSI，这是不正确的做法）。新的 MSI 认为机器上有更新的东西，选择不安装它的文件，但在升级过程中旧包删除了文件（它没有注意到版本更新）。由于新的安装程序选择不安装文件，你最终什么都没有……直到修复。

要解决此问题，您需要稍后移动 RemoveExistingProducts 操作。如果您使用的是 MajorUpgrade 元素，那么`Schedule='afterInstallExecute'`或者`Schedule='afterInstallFinalize'`应该这样做。您需要更加小心[Component Rules](http://robmensching.com/blog/posts/2003/10/18/component-rules-101)。

此外，恕我直言，第 3 方供应商不应更新 MSI 之外的文件。他们的决定是迫使您的产品采用特定的升级方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T15:10:28.723

日志文件会有所帮助。我的猜测是它基于您安排 RemoveExistingProducts 的位置。我见过 Costing 发现正在安装的文件与已安装的文件相同并决定不安装该文件的情况。然后发生重大升级，您最终没有文件。修复工作是因为该文件不存在并且成本核算意识到需要安装它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-09-24T14:07:31.750

我曾经也有过一样的问题。这里的问题是在进行重大升级时，msi 首先检查要安装哪些组件（并且所有版本低于已安装的 dll 都标记为“不安装”），然后它删除已安装的应用程序，然后安装新版本但是没有那些先前标记的组件。

重新安排 REP 并没有帮助，因为“不允许安装 (...)”是在成本核算阶段完成的，而 MajorUpgrade 只能安排在安装阶段。

我的解决方案是在 wxs 文件中将 REINSTALLMODE 属性设置为“amus”。

```
<Property Id="REINSTALLMODE" Value="amus" /> 
```

“a”表示所有 dll 都将被重新安装，不管它们的版本如何。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-19T23:27:25.923

I had another solution to this problem, but the previous reply certainly pointed me in the right direction. The DLLs in my .NET project were being assigned a lower version number than my previous installation. Going to the AssemblyInfo.cs files and incrementing the third octet from 0 to 1 solved it. Wix now recognized the DLLs as newer.

```
[assembly: AssemblyVersion("1.0.1.*")] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-06T10:14:37.970

安装程序 5.0 上仍然存在错误，并且仍然是一个问题。放置`RemoveExistingProduct`之后`InstallFinalize`的解决方法对我们来说不是解决方案。我通过单个文件的属性设置强制更新。

这个解决方案现在对我们有用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-04-13T18:33:13.267

在旧版本的 Windows Installer 上，此问题记录在此处：

[https://support.microsoft.com/en-us/kb/905238](https://support.microsoft.com/en-us/kb/905238)

受影响的产品列表表明它已在 MSI 引擎 4.0 及更高版本中修复。如果适用于操作系统版本，在进行安装之前使用 4.5 可再发行组件应该会有所帮助。

# jquery - Fancybox 内容无法加载

> ID：15138733
> 
> 赞同：0
> 
> 时间：2013-02-28T15:01:02.490
> 
> 标签：jquery, fancybox, fancybox-2

使用 Fancybox 时收到以下消息。我已经搜索了这里的所有帖子，似乎没有什么能解决我的问题。如果我遗漏任何东西，请告诉我

```
"The requested content cannot be loaded. Please try again later." 
```

输入 HTML：

```
<div class="ow_video_list_item ow_small">
   <a id="inline" href="#396">
      <img src="http://www.site.com/1.jpg">
   </a>
</div>

<div class="ow_video_list_item ow_small">
   <a id="inline" href="#397">
      <img src="http://www.site.com/2.jpg">
   </a>
</div> 
```

jQuery转换后生成的输出：

```
<div class="ow_video_list_item ow_small">
   <div style="display: none;" id="#396">This is video 396</div>
   <a id="inline" href="#396">
      <img src="http://www.site.com/1.jpg">
   </a>
</div>

<div class="ow_video_list_item ow_small">
   <div style="display: none;" id="#397">This is video 397</div>
   <a id="inline" href="#397">
      <img src="http://www.site.com/2.jpg">
   </a>
</div> 
```

每当我单击图像时，我都会弹出花式框，说“无法加载请求的内容。请稍后再试。” 据我了解，fancybox 的加载效果符合预期。

下面提供了绑定 Fancybox 的 jQuery。

```
 $("#inline").fancybox({
                       overlayShow: true,
                       frameWidth:640,
                       frameHeight:360
                   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:01:53.303

当您引用（例如使用）具有特定但此类元素不需要在其自己的属性中具有**哈希**符号时，您应该使用**哈希符号，因此** `#``href``ID`**`ID`**

 **`id="#396"`应该`id="396"`

此外，`ID`s 应该是唯一的......两个或多个元素不应该使用相同的`ID`. 如果您想两次或多次使用相同的选择器，请改用类。

所以改变这个

`<a id="inline" href="#396">`和`<a id="inline" href="#397">`

……到这个

`<a class="inline" href="#396">`和`<a class="inline" href="#397">`

...并将您的 fancybox 脚本更改为

```
$(".inline").fancybox() 
```

查看**[常见问题](http://www.fancyapps.com/fancybox/#docs)**选项卡，第 6 号了解更多信息。**

# xml - /* text */ 之类的块如何成为有效的 xml 注释？

> ID：15138734
> 
> 赞同：0
> 
> 时间：2013-02-28T15:01:04.163
> 
> 标签：xml, magento, comments

不久前，我正在为 Magento 创建一个模块，并且正在关注[本教程](http://colourgray.wordpress.com/2009/11/11/magento-create-a-custom-payment-method/#1)。

在该教程中，XML 注释被插入到`/* */`. 那时我还没有注意到。所以现在，我回顾了我的代码，我注意到我的评论也放在了里面`/* */`。

我的问题是，我的 XML 是如何有效的，为什么它一直没有崩溃？这是在 XML 中插入注释的有效方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:55:20.683

`/* xxx */`可以出现在 XML 文件中可以出现文本的任何地方 - 但它不是注释，它是普通文本。

# ios - iOS- Fackbook- FBLoginView 不像 HelloFacebookSample 那样显示登录按钮

> ID：15138736
> 
> 赞同：5
> 
> 时间：2013-02-28T15:01:08.100
> 
> 标签：ios, facebook-ios-sdk

这不是冗余问题！[我的问题与使用 FLoginView](https://stackoverflow.com/questions/14494425/facebook-login-using-fbloginview-not-showing-in-ios-6)的 facebook 登录非常相似， 但未在 ios 6 中显示，但不一样！

我尝试将 HelloFacebookSample 代码迁移到我的项目中。我已经仔细检查并比较了两个代码。没有关键区别。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    FBLoginView *loginView = [[FBLoginView alloc] init];
    loginView.frame = CGRectOffset(loginView.frame, 45, 45);
    loginView.delegate = self;
    [self.view addSubview:loginView];
    [loginView sizeToFit];
} 
```

并委托

```
#pragma mark - FBLoginViewDelegate

- (void)loginViewShowingLoggedInUser:(FBLoginView *)loginView {
    self.facebookLogInButton.enabled = YES;
}

- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView
                            user:(id<FBGraphUser>)user {

    self.labelFirstName.text = [NSString stringWithFormat:@"Hello %@!", user.first_name];
    self.profilePic.profileID = user.id;
    self.loggedInUser = user;
}

- (void)loginViewShowingLoggedOutUser:(FBLoginView *)loginView {
    BOOL canShareAnyhow = [FBNativeDialogs canPresentShareDialogWithSession:nil];
    self.facebookLogInButton.enabled = canShareAnyhow;
    self.profilePic.profileID = nil;
    self.labelFirstName.text = nil;
    self.loggedInUser = nil;
} 
```

该应用程序可以在模拟器上运行，但我看不到 Facebook 的蓝色登录按钮。

我重新导入了 FacebookSDK.framework、FacebookSDKResources.bundle 等。与示例代码完全相同。它仍然没有显示 Facebook 登录按钮。

有人遇到过并解决了这种问题吗？

**编辑-** 我发现了一些新的线索

> 警告：跳过文件'/Users/Digiflex/Dropbox/Dev/XxxxXxxx Project/XxxxXxxx/../../Facebook API SDK/FacebookSDK/FacebookSDK.framework/Versions/A/Resources/FacebookSDKResources.bundle'

任何想法？

（框架和库构建阶段出现意外的文件类型“wrapper.plug-in”）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-27T22:17:57.773

我遇到了同样的问题，这是我找到的解决方案：

**不要这样做：** 不要将**FacebookSDKResources.bundle**添加为框架（就像我所做的那样），方法是转到项目编辑器，选择您的目标，选择摘要选项卡，然后点击链接框架上的“+”按钮，然后库列表。

![不要这样做](../Images/90125a1fea576e868890fdaa5293971a.png)

**改为：** 将**FacebookSDKResources.bundle**添加为资源（因为它实际上就是这样）。去做这个：

1.  转到项目编辑器
2.  选择你的目标
3.  转到构建阶段选项卡
4.  展开复制捆绑资源列表并点击底部的“+”按钮
5.  在以下提示中，单击“添加其他...”
6.  找到 FacebookSDKResources.bundle 并点击“打开”
7.  您可以选择将资源复制到项目的文件夹中。在我看来，这并不是真的必要。

![改为这样做](../Images/8ea1207bc32c7ec5dbb623f2a2435140.png)

**OBS：** 我不确定这是否真的解决了您遇到的 Facebook 登录按钮的问题，因为我没有在我正在处理的特定项目中使用此按钮。但是，我相信它应该有效。

# java - 如何让整个单词使用子字符串？

> ID：15138738
> 
> 赞同：1
> 
> 时间：2013-02-28T15:01:13.207
> 
> 标签：java, regex, string, substring

我有字符串`String fulltext = "I would like to create some text and i dont know what creater34r3, ";`

我有子字符串 `String subtext = "create s";`or `"create som"`or `"create so"`..

**如何获得整个单词`subtext`？**（在这种情况下“创建一些”或“创建”）

`Pattern.compile("\\b(" + subtext + "\\p{Alnum}+)");`- 不工作=(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T15:10:04.080

它有效，但您应该使用`Matcher.find()`（它找到第一次出现的正则表达式）而不是`Matcher.matches()`（它测试整个字符串的正则表达式）。

```
Matcher m = Pattern.compile("\\b(" + subtext + "\\p{Alnum}*)").matcher(fulltext);
System.out.println(m.find());
System.out.println(m.group(1)); 
```

印刷

```
true
create some 
```

编辑：正如 Sean Landsman 指出的那样，它应该是（因为潜台词可能出现在字符串的末尾，如果使用量词则`\\p{Alnum}*`不会匹配）。`+`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T15:09:48.677

怎么样？

```
Pattern.compile("\\b(" + subtext + "\\p{Alnum}*)"); 
```

这将返回`create some`上面的 3 个潜台词

如果没有，你能说一下你的预期输出是什么`create s`，`create som`和`create so`？

# d3.js - 如何修剪 0 值叶子的 d3 树以及通向它们的分支？

> ID：15138742
> 
> 赞同：1
> 
> 时间：2013-02-28T15:01:17.263
> 
> 标签：d3.js

我为包含值 >= 0 的叶节点的 n 级数据集创建了 d3 树布局。一些分支比其他分支短，即并非所有叶都处于同一级别。

我现在想修剪叶子值总和等于 0 的那些层次结构（叶子和分支）的树，但不知道该怎么做。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:05:52.420

如果您可以像普通树一样导航树，则执行[后序遍历](http://en.wikipedia.org/wiki/Tree_traversal#Post-order)，它会先于其父节点访问树中的所有节点。

当你访问每个节点时，

*   如果节点为 0 叶，则删除该节点
*   如果没有子节点，则删除节点（在可能修剪叶子后清除空分支）

# php - PhpStorm 中 ZF2 视图助手的自动完成

> ID：15138746
> 
> 赞同：5
> 
> 时间：2013-02-28T15:01:21.573
> 
> 标签：php, zend-framework2, phpstorm, zend-view

有谁知道 PHPStorm 是否有一些对视图助手自动完成的内置支持，或者是否有可能为它编写插件。我不想为此使用内联 var 定义，因为如果我使用很多视图助手，这样做会很麻烦

```
$this->inlineScript()-> //I want some autocomplete here.

$this->translate('some translation')-> //Please give me autocompletion 
```

如果我使用 var 定义，它最终会像这样，但它真的会让我的观点变得混乱：

```
/* @var $inlineScript \Zend\View\Helper\InlineScript */
$inlineScript = $this->inlineScript();
$inlineScript-> //Now I have autocompletion goodness

/* @var $translate \Zend\I18n\View\Helper\Translate */
$translate = $this->translate();
$translate('some translation')-> //Now I have autocompletion goodness 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T15:55:30.170

**注意**我发布了我在评论中讨论的方法作为答案。

要输入提示不存在的方法，语法如下：

```
/**
 * @method \Zend\Mvc\Controller\Plugin\Url url(string $route = null, array $params = null)
 */
class MyClass
{
} 
```

`url`这允许我们对任何被识别为的变量使用具有类型提示的方法`MyClass`：

```
/* @var $a \MyClass */
$a->// typehint! 
```

您需要这样一个“假”类，然后使用以下命令开始您的视图脚本：

```
/* @var $this \MyFakeClass */ 
```

这将`$this`在您的视图脚本中为您提供类型提示。理想情况下，您可以使用类似于[https://github.com/zendframework/zf2/pull/3438](https://github.com/zendframework/zf2/pull/3438)的内容打开针对[https://github.com/zendframework/zf2的拉取请求](https://github.com/zendframework/zf2)

# c++ - 使用不符合 misra 规则的 #define 命令定义数组

> ID：15138749
> 
> 赞同：0
> 
> 时间：2013-02-28T15:01:41.453
> 
> 标签：c++, arrays, c-preprocessor, misra

我有这个定义：

```
static const char* STRING_ARRAY[NUM_UNITS] = STRING_ARRAY_VALUES; 
```

什么时候

```
#define STRING_ARRAY_VALUES                 \
{   "n/a",                                  \
  "bool",                                   \
  ...                                       \
} 
```

不幸的是，它不符合 MISRA-C++ 规则 8-5-2：

```
"MISRA-C++ Rule 8-5-2 (required): Braces shall be used to indicate and match the 
structure in the non-zero initialization of arrays and structures." 
```

谁能向我解释为什么它不符合要求？我认为#define 命令将定义转换为：

```
static const char* STRING_ARRAY[NUM_UNITS] = {"n/a", "bool",...} 
```

这符合 MISRA 规则。

有没有办法使它符合 MISRA 同时保持`#define`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:30:57.627

有两种可能的原因：

*   要么你的 MISRA 检查器坏了。我用 LDRA Testbed 测试了你的代码，它没有产生任何错误。
*   或者我认为 NUM_UNITS 可能与传递给数组的指针数量不匹配。我不清楚这是否违反了 MISRA 规则。`sizeof(STRING_ARRAY)/sizeof(const char*)`您可以添加一个==的静态断言，`NUM_UNITS`无论 MISRA 是什么，这是一个很好的做法。

# node.js - 为什么put和delete方法需要methodoverride？

> ID：15138750
> 
> 赞同：0
> 
> 时间：2013-02-28T15:01:44.723
> 
> 标签：node.js, put, http-method

我的意思是，为什么让`put`and 和and`delete`一样`get`，`post`

它们都是`http`方法，当我想使用`put`and时`delete`，

我必须做一些特殊的技巧，比如使用`methodoverride`，

让同样的东西有一些技术问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:04:20.663

[大多数 Web 浏览器中是否提供 PUT、DELETE、HEAD 等方法？](https://stackoverflow.com/questions/165779/are-the-put-delete-head-etc-methods-available-in-most-web-browsers)

[为什么现代浏览器不支持 PUT 和 DELETE 表单方法？](https://stackoverflow.com/questions/5177595/why-dont-the-modern-browsers-support-put-and-delete-form-methods)

总结一下：不是所有的浏览器都支持发送GET、POST以外的请求，也不是所有的服务器软件都支持GET、POST、HEAD以外的动词。

# python - 如何从 Python 3（或 2）将 Google 表格文件保存为 CSV？

> ID：15138755
> 
> 赞同：7
> 
> 时间：2013-02-28T15:01:57.160
> 
> 标签：python, csv, google-drive-api, google-api-python-client, google-sheets-api

我正在寻找一种简单的方法来保存源自已发布的 Google 表格文档的 csv 文件？由于它已发布，因此可以通过直接链接访问（在下面的示例中特意修改）。

启动链接后，我所有的浏览器都会提示我保存 csv 文件。

两者都不：

```
DOC_URL = 'https://docs.google.com/spreadsheet/ccc?key=0AoOWveO-dNo5dFNrWThhYmdYW9UT1lQQkE&output=csv'    

f = urllib.request.urlopen(DOC_URL)
cont = f.read(SIZE)
f.close()
cont = str(cont, 'utf-8')
print(cont) 
```

，也不：

```
req = urllib.request.Request(DOC_URL)
req.add_header('User-Agent', 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.13 (KHTML, like Gecko) Chrome/24.0.1284.0 Safari/537.13')
f = urllib.request.urlopen(req)
print(f.read().decode('utf-8')) 
```

打印除 html 内容之外的任何内容。

（在阅读了另一篇文章后尝试了第二个版本：[Download google docs public spreadsheet to csv with python](https://stackoverflow.com/questions/12842341/download-google-docs-public-spreadsheet-to-csv-with-python)。）

知道我做错了什么吗？我已经退出了我的 Google 帐户，如果这值得的话，但这适用于我尝试过的任何浏览器。据我了解，Google Docs API 还没有移植到 Python 3 上，并且考虑到我个人使用的小项目的“玩具”规模，从一开始就使用它甚至没有太大意义，如果我可以绕过它。

在第二次尝试中，我离开了“用户代理”，因为我在想可能被认为来自脚本的请求（b/c 不存在标识信息）可能会被忽略，但这并没有什么不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-03-09T05:14:32.340

虽然该`requests`库是来自 Python 的 HTTP 请求的黄金标准，但这种下载方式（虽然尚未弃用）不太可能持续下去，特别是指使用链接、管理 cookie 和重定向等。*不这样*做的原因之一首选链接是它的安全性较低，通常此类访问应需要授权。相反，目前接受的将 Google 表格导出为 CSV 的方式是使用*Google* [Drive API](http://developers.google.com/drive)。

那么为什么要使用 Drive API？这不应该是[Sheets API](http://developers.google.com/sheets)的东西吗？好吧，Sheets API 用于面向**电子表格**的功能，即数据格式化、列调整大小、创建图表、单元格验证等，而 Drive API 用于面向**文件**的功能，即导入/导出、复制、重命名，等等

下面是一个[完整的命令行解决方案](http://wescpy.blogspot.com/2016/07/exporting-google-sheet--as-csv.html)。（如果您不使用 Python，则可以将其用作伪代码并选择[Google APIs Client Libraries](http://developers.google.com/discovery/libraries)支持的任何语言。）对于代码片段，假设最新的工作表命名`inventory`（忽略具有该名称的旧文件）并且`DRIVE`是API 服务端点：

```
FILENAME = 'inventory'
SRC_MIMETYPE = 'application/vnd.google-apps.spreadsheet'
DST_MIMETYPE = 'text/csv'

# query for latest file named FILENAME
files = DRIVE.files().list(
    q='name="%s" and mimeType="%s"' % (FILENAME, SRC_MIMETYPE),
    orderBy='modifiedTime desc,name').execute().get('files', [])

# if found, export Sheets file as CSV
if files:
    fn = '%s.csv' % os.path.splitext(files[0]['name'].replace(' ', '_'))[0]
    print('Exporting "%s" as "%s"... ' % (files[0]['name'], fn), end='')
    data = DRIVE.files().export(fileId=files[0]['id'], mimeType=DST_MIMETYPE).execute()

    # if non-empty file
    if data:
        with open(fn, 'wb') as f:
            f.write(data)
        print('DONE') 
```

如果您的工作表很大，您可能必须将其分块导出 - 请参阅[此页面](http://developers.google.com/drive/v3/web/manage-downloads#downloading_google_documents)以了解如何执行*此*操作。如果您通常是 Google API 的新手，我为您准备了一个（有些过时但）用户友好的[介绍视频](http://youtu.be/DYAwYxVs2TI?list=PLOU2XLYxmsILOIxBRPPhgYbuSslr50KVq&index=2)。（之后有 2 个视频也可能有用。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T19:49:10.323

Google 通过一系列 cookie 设置 302 重定向响应初始请求。如果您不存储并在请求之间重新提交 cookie，它会将您重定向到登录页面。

因此，问题不在于 User-Agent 标头，而是默认情况下`urllib.request.urlopen`不存储 cookie，但它会遵循 HTTP 302 重定向。

以下代码在指定位置的公共电子表格上运行良好`DOC_URL`：

```
>>> from http.cookiejar import CookieJar
>>> from urllib.request import build_opener, HTTPCookieProcessor
>>> opener = build_opener(HTTPCookieProcessor(CookieJar()))
>>> resp = opener.open(DOC_URL)
>>> # should really parse resp.getheader('content-type') for encoding.
>>> csv_content = resp.read().decode('utf-8') 
```

* * *

在向您展示了如何在 vanilla python 中执行此操作后，我现在要说解决此问题的正确方法™ 是使用最优秀的**[requests 库](https://pypi.python.org/pypi/requests)**。它有**[很好](http://docs.python-requests.org/)**的文档记录，使这些任务完成起来非常愉快。

例如，`csv_content`使用`requests`库获得与上面相同的内容非常简单：

```
>>> import requests
>>> csv_content = requests.get(DOC_URL).text 
```

那一行更清楚地表达了你的意图。它更容易编写和阅读。做你自己 - 和任何其他分享你的代码库的人 - 一个忙，只是使用`requests`.

# node.js - 如何编写自己的 CasperJS 模块？

> ID：15138761
> 
> 赞同：9
> 
> 时间：2013-02-28T15:02:10.193
> 
> 标签：node.js, functional-testing, casperjs

例如，我有一个经常需要执行的步骤，例如在一些测试之前用户登录。

如何为 CasperJS 编写可重用的代码块？他们扩展 CasperJS 的文档仅针对一个文件编写...

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-22T14:43:07.983

这是一个简单的方法。如果不熟悉coffeescript，请在​​js2coffee 将其转换为JS。

**测试/casper/test.coolPage.coffee**

```
loginModule = require("./test.login")
loginModule.login("test","testPW")

casper.test.comment "Testing cool stuff, should be logged in by now"

casper.thenOpen casper.cli.get("url") + "/myCoolPage", ->
  @test.assertExists '#myCoolDiv'

casper.then () ->
  @test.assertExists '.somethingElse'

casper.run ->
  @test.done() 
```

**测试/casper/test.login.coffee**

```
exports.login = (username, password) ->
  casper.test.comment "Loggin in with username \"#{username}\", password \"#{password}\""

  casper.start casper.cli.get("url") + "/login", ->
    @test.assertExists "input[name=username]", "input[name=password]"

  casper.then () ->
    @sendKeys "input[name=username]", username
    @sendKeys "input[name=password]", password
    @click "input[type=submit]"

  casper.then () ->
    #assert you got logged in 
```

**从命令行运行：**

```
cd tests/casper    
casperjs test test.coolPage.coffee --url=http..my-test-url 
```

# css - 带有插图的png上的CSS3“阴影”

> ID：15138763
> 
> 赞同：0
> 
> 时间：2013-02-28T15:02:14.013
> 
> 标签：css, dropshadow

好的，我可以使用以下方法为透明 png 添加阴影：

```
.drop-shadow 
{
-webkit-filter: drop-shadow (0 1px 2px rgba(0,0,0,.5));
-moz-filter: drop-shadow (0 1px 2px rgba(0,0,0,.5));
-ms-filter: drop-shadow (0 1px 2px rgba(0,0,0,.5));
-o-filter: drop-shadow (0 1px 2px rgba(0,0,0,.5));
filter: drop-shadow (0 1px 2px rgba(0,0,0,.5));
} 
```

（至少在某些浏览器上）

然后我将如何更改代码以显示嵌入阴影？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T15:04:04.860

例子：

```
#yellow{ 
-webkit-box-shadow: inset 1px 1px 1px #FFFF00; 
-moz-box-shadow: inset 1px 1px 1px  #FFFF00; 
box-shadow: inset 1px 1px 1px #FFFF00; 
} 
```

# multithreading - 有没有办法找出应用程序的每个线程绑定到哪个核心？

> ID：15138767
> 
> 赞同：0
> 
> 时间：2013-02-28T15:02:22.663
> 
> 标签：multithreading, unix, solaris, solaris-10

比如说，一个多线程应用程序在 8 核 Solaris 上运行。有没有办法列出每个线程和核心#之间的映射？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:56:40.040

首先，您可以编写 C 代码来查询进程中的每个线程 Open `/proc/[id]/lwp/[tid]/lwpsinfo` there 并将其获取到`lwpsinfo_t`定义的结构中`procfs.h`

```
processorid_t pr_onpro;         /* processor which last ran this lwp */
processorid_t pr_bindpro;       /* processor to which lwp is bound */ 
```

是你感兴趣的两个成员。在你浪费时间之前

接下来在您浪费大量时间之前（假设区域）：

`prctl -i zone {ZONENAME}`仅在全局区域中由 root 运行。你会得到这样的输出：

```
NAME    PRIVILEGE       VALUE    FLAG   ACTION                       RECIPIENT
zone.max-swap
        system          16.0EB    max   deny                                 -
zone.max-locked-memory
        system          16.0EB    max   deny                                 -
zone.max-shm-memory
        system          16.0EB    max   deny                                 -
zone.max-shm-ids
        system          16.8M     max   deny                                 -
zone.max-sem-ids
        system          16.8M     max   deny                                 -
zone.max-msg-ids
        system          16.8M     max   deny                                 -
zone.max-lwps
        system          2.15G     max   deny                                 -
zone.cpu-cap
        privileged      1.20K       -   deny                                 -
        system          4.29G     inf   deny                                 -
zone.cpu-shares
        privileged          1       -   none                                 -
        system          65.5K     max   none                                 - 
```

zone.cpu-cap 1.20K 表示 1200 == 表示百分比。所以 1200 意味着 12 个 CPU。如果我是您的管理员，则 DEV 或 TEST 区域不可能有 64 个内核。所以先检查一下。

另外，您的假设似乎是错误的。除非启用了亲和性（处理器集等），否则系统会使用当前启用的调度算法（FSS 等）将 cpu 分配给线程。这意味着任何线程都可以根据调度程序和负载随时访问任何可用的 cpu。

# java - 用于匹配注释字段上的公共方法调用的 Aspectj 切入点

> ID：15138770
> 
> 赞同：8
> 
> 时间：2013-02-28T15:02:31.397
> 
> 标签：java, aop, aspectj

我想编写一个切入点，该切入点与注释字段上公共方法的执行相匹配。这似乎不起作用。get(@Important) 可以按照您的预期工作（单独），但它当然会匹配对该字段的所有访问权限。我想将此限制为仅执行公共方法。

这可能吗？我没有得到任何编译错误，但另一方面它似乎不起作用..

* * *

```
public class Counter {
  private int count = 0;

  public void add(int value) {
    count = count + value;
  }
}

public class Visitors {
  @Important
  Counter counter = new Counter()

  public void increaseCounter() {
    counter.add(1);
  }
} 
```

* * *

**作品：**

```
@Pointcut(value = "get(@Important * *)")
void testPointCut() {
} 
```

**不工作：**

```
@Pointcut(value = "get(@Important * *) && execution(public * *(..))")
void testPointCut() {
} 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:50:30.720

对于您想要的，没有开箱即用的 AspectJ 解决方案，因为如果您拦截任何对象的方法执行，则与可能指向这些对象的注释字段没有连接。拦截带注释的类或带注释的方法的方法执行会更容易，但这不是您想要做的。

这是一个小代码示例，它向您展示了一种解决方法，但也显示了它的局限性：

```
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;

@Retention(RetentionPolicy.RUNTIME)
public @interface Important {} 
```

```
public class Counter {
    private int count = 0;

    public void add(int value) {
        count = count + value;
    }

    @Override
    public String toString() {
        return super.toString() + "[count=" + count + "]";
    }
} 
```

```
public class Visitors {
    @Important
    Counter counter = new Counter();

    public void increaseCounter() {
        counter.add(1);
    }

    public static void main(String[] args) {
        Visitors visitors = new Visitors();
        visitors.increaseCounter();
        visitors.counter.add(3);
        System.out.println("visitors.counter = " + visitors.counter);
        System.out.println("--------------------");

        Counter unimportantCounter = new Counter();
        unimportantCounter.add(11);
        unimportantCounter.add(22);
        System.out.println("unimportantCounter = " + unimportantCounter);
        System.out.println("--------------------");

        unimportantCounter = visitors.counter;
        unimportantCounter.add(5);
        System.out.println("visitors.counter = " + visitors.counter);
        System.out.println("unimportantCounter = " + unimportantCounter);
        System.out.println("--------------------");

        visitors.counter = new Counter();
        visitors.increaseCounter();
        visitors.counter.add(3);
        unimportantCounter.add(100);
        System.out.println("visitors.counter = " + visitors.counter);
        System.out.println("unimportantCounter = " + unimportantCounter);
        System.out.println("--------------------");

        Visitors otherVisitors = new Visitors();
        otherVisitors.increaseCounter();
        otherVisitors.counter.add(50);
        System.out.println("otherVisitors.counter = " + otherVisitors.counter);
        System.out.println("--------------------");

        otherVisitors.counter = visitors.counter;
        System.out.println("visitors.counter = " + visitors.counter);
        System.out.println("otherVisitors.counter = " + otherVisitors.counter);
        System.out.println("--------------------");

        otherVisitors.counter = new Counter();
        visitors.increaseCounter();
        otherVisitors.increaseCounter();
        System.out.println("visitors.counter = " + visitors.counter);
        System.out.println("otherVisitors.counter = " + otherVisitors.counter);
    }
} 
```

```
import java.lang.reflect.Field;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;

import org.aspectj.lang.Signature;
import org.aspectj.lang.SoftException;

public aspect ImportantMethodInterceptor {
    Map<Object, Set<Object>> importantObjects = new HashMap<Object, Set<Object>>(); 

    pointcut importantSetter(Object newValue, Object target) :
        set(@Important * *) && args(newValue) && target(target);
    pointcut unimportantSetter(Object newValue, Object target) :
        !set(@Important * *) && set(* *) && !withincode(*.new(..)) && args(newValue) && target(target);
    pointcut publicMethod(Object target) :
        execution(public * *(..)) && target(target) && !execution(public String *..toString());

    before(Object newValue, Object target) : importantSetter(newValue, target) {
        Object oldValue = getFieldValue(thisJoinPoint.getSignature(), target);
        System.out.println("Important object for target " + target + ": " + oldValue + " -> " + newValue);
        synchronized (importantObjects) {
            Set<Object> referrers;
            if (oldValue != null) {
                referrers = importantObjects.get(oldValue);
                if (referrers != null) {
                    referrers.remove(target);
                    if (referrers.size() == 0)
                        importantObjects.remove(oldValue);
                }
            }
            if (newValue != null) {
                referrers = importantObjects.get(newValue);
                if (referrers == null) {
                    referrers = new HashSet<Object>();
                    importantObjects.put(newValue, referrers);
                }
                referrers.add(target);
            }
        }
    }

//  before(Object newValue, Object target) : unimportantSetter(newValue, target) {
//      Object oldValue = getFieldValue(thisJoinPoint.getSignature(), target);
//      System.out.println("Unimportant object for target " + target + ": " + oldValue + " -> " + newValue);
//  }

    before(Object target) : publicMethod(target) {
        synchronized (importantObjects) {
            if (importantObjects.get(target) != null)
                System.out.println("Important method on " + target + ": " + thisJoinPointStaticPart);
            else
                System.out.println("Unimportant method on " + target + ": " + thisJoinPointStaticPart);
        }
    }

    private Object getFieldValue(Signature signature, Object target) {
        try {
            Field field = signature.getDeclaringType().getDeclaredField(signature.getName());
            field.setAccessible(true);
            return field.get(target);
        }
        catch (Exception e) { throw new SoftException(e); }
    } 
} 
```

如您所见，我的方面保留了一组“重要对象”。更准确地说，它`Map`的键是“重要对象”，值是引用者的集合。这是必要的，因为理论上几个引用者（例如`Visitors`对象）可以指向相同的“重要对象”（例如特定的`Counter`）。在我的示例代码的早期版本中，当我将“重要对象”记录在一个简单的集合中时，我可以选择要么永远不从集合中删除以前的“重要对象”，即使它们不再被引用，或者总是删除它们如果第二个引用者仍然指向“重要对象”。地图方法使我能够为每个“重要对象”记录多个引用者。

如果您运行`Visitors.main(String[])`，您将看到以下输出（`before ... : unimportantSetter ...`如果您希望看到更多日志输出，请取消注释该建议）：

```
Important object for target Visitors@1404536: null -> Counter@7fdcde[count=0]
Unimportant method on Visitors@1404536: execution(void Visitors.increaseCounter())
Important method on Counter@7fdcde[count=0]: execution(void Counter.add(int))
Important method on Counter@7fdcde[count=1]: execution(void Counter.add(int))
visitors.counter = Counter@7fdcde[count=4]
--------------------
Unimportant method on Counter@18ac738[count=0]: execution(void Counter.add(int))
Unimportant method on Counter@18ac738[count=11]: execution(void Counter.add(int))
unimportantCounter = Counter@18ac738[count=33]
--------------------
Important method on Counter@7fdcde[count=4]: execution(void Counter.add(int))
visitors.counter = Counter@7fdcde[count=9]
unimportantCounter = Counter@7fdcde[count=9]
--------------------
Important object for target Visitors@1404536: Counter@7fdcde[count=9] -> Counter@1d6096[count=0]
Unimportant method on Visitors@1404536: execution(void Visitors.increaseCounter())
Important method on Counter@1d6096[count=0]: execution(void Counter.add(int))
Important method on Counter@1d6096[count=1]: execution(void Counter.add(int))
Unimportant method on Counter@7fdcde[count=9]: execution(void Counter.add(int))
visitors.counter = Counter@1d6096[count=4]
unimportantCounter = Counter@7fdcde[count=109]
--------------------
Important object for target Visitors@b02e7a: null -> Counter@bb6ab6[count=0]
Unimportant method on Visitors@b02e7a: execution(void Visitors.increaseCounter())
Important method on Counter@bb6ab6[count=0]: execution(void Counter.add(int))
Important method on Counter@bb6ab6[count=1]: execution(void Counter.add(int))
otherVisitors.counter = Counter@bb6ab6[count=51]
--------------------
Important object for target Visitors@b02e7a: Counter@bb6ab6[count=51] -> Counter@1d6096[count=4]
visitors.counter = Counter@1d6096[count=4]
otherVisitors.counter = Counter@1d6096[count=4]
--------------------
Important object for target Visitors@b02e7a: Counter@1d6096[count=4] -> Counter@5afd29[count=0]
Unimportant method on Visitors@1404536: execution(void Visitors.increaseCounter())
Important method on Counter@1d6096[count=4]: execution(void Counter.add(int))
Unimportant method on Visitors@b02e7a: execution(void Visitors.increaseCounter())
Important method on Counter@5afd29[count=0]: execution(void Counter.add(int))
visitors.counter = Counter@1d6096[count=5]
otherVisitors.counter = Counter@5afd29[count=1] 
```

请仔细比较代码`main`和日志输出，看看我测试了哪些常规和特殊情况。

正如我所说，这种方法有其局限性：

*   我没有测试如果重要字段具有原始类型`int`或 are `String`s 会发生什么，理论上可以多次作为“重要对象”出现，因为几个不相关的重要成员创建相同的对象。我也没有测试过自动（取消）装箱会发生什么，请自行尝试。
*   方面代码有些复杂，可能不会很快。
*   我不能保证可能没有其他我还没有想到的问题。

但是，如果您可以控制边界条件和用例，您可以做出明智的决定并按原样使用代码或其变体，以实现您所需要的。代码可能有改进的潜力，我只是好奇，想破解一个概念证明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T05:04:47.773

您想使用`withinCode`切入点，如下所示：

```
@Pointcut(value = "get(@Important * *) && withinCode(public * *(..))")
void testPointCut() {
} 
```

查看[AspectJ 编程指南](http://eclipse.org/aspectj/doc/released/progguide/quick.html#quick-pointcuts)。

# google-chrome - Fabric.js 画布未在 Google Chrome 上捕获鼠标事件

> ID：15138777
> 
> 赞同：4
> 
> 时间：2013-02-28T15:02:56.987
> 
> 标签：google-chrome, events, canvas, fabricjs, jquery-events

谷歌搜索了很多，没有得到任何有用的提示/解决方案。我有这个简单的 html 页面，包括一些 CSS 样式、jQuery、jQuery-ui 和 Fabric.js；在`document.ready`我启动一个 ajax 调用并在画布上渲染一些东西。到目前为止，一切似乎都很好，但是当我需要捕捉一些鼠标事件时，我什么也得不到。此行为仅在 Chrome（当前版本 25.0.1364.97）上显示；在 Firefox 或 Internet Explorer (v. 9) 上一切正常。下面是一些js代码：

```
$(document).ready(function() {
    //setup canvas etc.
    eCanvas = new fabric.Canvas('EViewport', {
          backgroundColor: 'rgba(255, 50, 50, .3)',
          selection: true,
          selectionColor: 'blue',
          selectionLineWidth: 2
        });
    EViewport = $("#CanvasContainer");
    viewW = EViewport.width();
    viewH = EViewport.height();
    eCanvas.setWidth(viewW);
    eCanvas.setHeight(viewH);

    eCanvas.observe('object:selected', function(options) {
          if (options.target) {
            console.log('an object was selected! ', options.target.type);
          }
        });
    eCanvas.observe('mouse:down', function() {
            console.log('mouse click! ');
        });
    eCanvas.on('mouse:down', function() {
            console.log('mouse click! ');
        });
    eCanvas.on('mousedown', function() {
            console.log('mouse click! ');
        });

    //... render some rectangles and stuff...
}); 
```

这是 html 结构（注意 Eviewport.js 文件包含之前粘贴的代码）：

```
<!DOCTYPE html>
<html>
<head>
        <link rel="stylesheet" href="baseCss/jquery-ui.css" type="text/css">

        <script type="text/javascript" src="baseJs/jquery.js"></script>
        <script type="text/javascript" src="baseJs/jquery-ui.js"></script>

        <script type="text/javascript" src="Eviewport.js"></script>
        <link type="text/css" rel="stylesheet" href="Eviewport.css">
        <script type="text/javascript" src="baseJs/Fabric.js"></script>
</head>

<body>

    <div id="MainContainer">
        <div id="CanvasContainer">
            <canvas id="EViewport">
                Canvas is not supported
            </canvas>
        </div>
    </div>
</body>
</html> 
```

选择功能在 IE 和 Firefox 上运行时也不适用于 chrome。我尝试了很多东西（如您所见，我尝试`canvas.observe`用更改`canvas.on`），更改了 jQuery 和 jQueryui 版本，但没有任何改变。在谷歌浏览器上使用开发者工具并没有显示太多。CSS给出的html元素上没有z-index，我尝试禁用不同的js和CSS，但这并没有解决问题。

我注意到问题显示也显示在 Fabric.js 的演示页面上（刚刚尝试过[http://fabricjs.com/stickman/](http://fabricjs.com/stickman/)）；渲染工作，效果也但没有鼠标事件或选择工作。

这是一个错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T15:41:58.700

好的，终于找到了不起作用的地方。我连接了一个 Wacom 设备，看起来最新的 Chrome 版本设置了一个关于“支持触摸的设备”的标志，这破坏了我的代码。

一个简单的解决方案是更改 chrome 标志 (chrome://flags/)

相关帖子： [https ://github.com/kangax/fabric.js/issues/450](https://github.com/kangax/fabric.js/issues/450)

# java - Java Glassfish 问题

> ID：15138778
> 
> 赞同：0
> 
> 时间：2013-02-28T15:02:58.117
> 
> 标签：java, glassfish

我有一个问题让我发疯，需要你的帮助。设置如下： - 处理器 4 核 + HT（所以 linux 说 8 cpus） - centos - glassfish 3（最新版本） - 在 glassfish 上只有一个应用程序正在运行，http-listener1 监听端口 8080（管理员监听器打开， https off) - 有一个连接池

一切正常运行了几天，然后突然停止： - 负载达到 400 - java 进程的 cpu 使用率达到 800 - gf 停止服务页面，或者它的服务非常慢： - 管理员侦听器（端口 4848）运行正常- 我启动分析器，一切似乎都运行良好，但我找不到问题所在

我没有更多的想法在哪里寻找以及如何解决问题。当大量用户访问该站点时似乎会出现此问题，但问题是即使没有任何用户，gf 也永远不会恢复。

有任何想法吗？

**编辑**从评论中粘贴 JVM 设置：

JVM设置：

```
<jvm-options>-Xms10240m</jvm-options> 
<jvm-options>-Xmx10240m</jvm-options> 
<jvm-options>-XX:CMSIncrementalDutyCycle=10</jvm-options>  
<jvm-options>-XX:CMSIncrementalDutyCycleMin=10</jvm-options>  
<jvm-options>-XX:+CMSIncrementalMode</jvm-options>  
<jvm-options>-XX:+CMSIncrementalPacing</jvm-options>  
<jvm-options>-XX:+UseConcMarkSweepGC</jvm-options>  
<jvm-options>-XX:MaxPermSize=512m</jvm-options>  
<jvm-options>-XX:NewRatio=2</jvm-options>  
<jvm-options>-XX:PermSize=512m</jvm-options> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:15:09.793

服务器可能会陷入几乎无限期的 GC 抖动。这种情况在服务器上持续了大约 3.5 小时，而没有引发 OutOfMemory 错误......

我们使用的框架中存在内存泄漏。我们做了什么：

*   [`jmap -dump`](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jmap.html)每当情况开始发生时[获取内存转储](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jmap.html)
*   使用[Eclipse 内存分析器进行分析](http://www.eclipse.org/mat/)

然后，解决这种情况。

*   此外，可能没有内存泄漏，只是需要调整[GC 设置。](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)
*   打开[GC 日志](https://stackoverflow.com/questions/895444/java-garbage-collection-log-messages)以查看发生了什么可能是明智的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:04:49.563

这 800% 的 CPU 使用率看起来像是分配失败。

当您启用 CMS 时，GC 会尝试以比您的应用程序消耗的速度更快的速度释放内存。分配失败是指它不能满足此要求。在这种情况下，JVM 唯一的解决方案是使用 ParallelGC 运行完整的集合，这意味着：

*   您的服务器已完全停止
*   ParallelGC 尝试尽可能快地完成，使用所有可能的 CPU

您应该启用 GC Logging 以确保此分配失败假设是正确的 ( `-Xloggc:gc.log -XX:+PrintGCDetails`)。每个“Full GC”行都是分配失败。

获得 GC 日志后，尝试使用[以下脚本](https://github.com/pingtimeout/icms-cumulative-frequency)查看 iCMS 占空比是否真的在 10% 左右的 CPU 使用率。更详细的解释可以[在这里找到](http://www.pingtimeout.fr/2013/04/extracting-icms-data-from-garbage.html)。

正如@ppeterka 所说，您可以分析您的应用程序以减少内存消耗，但您也可以给它更多内存。不要为`-Xms`and设置相同的值`-Xmx`，并删除标志`-XX:CMSIncrementalDutyCycle`and `-XX:CMSIncrementalDutyCycleMin`。

希望有帮助！

# javascript - 如何使我的代码看起来像 jquery 风格的 ajax

> ID：15138779
> 
> 赞同：0
> 
> 时间：2013-02-28T15:03:01.590
> 
> 标签：javascript, jquery, ajax

我知道这个问题有点令人困惑，但这就是想法：

我正在用 JavaScript 做一个库，并试图复制一些 jQuery 的风格。我有一个将接收 3 个参数的函数，我想像 jQuery 中的 AJAX 那样做。

例子：

我希望我的功能看起来像这样

```
$.ajax({
url: "url",
dataType: post,
etc etc
}); 
```

但是用我的代码：

```
Stone.ValidateNumber({
InputElementId: "Some Input's ID",
MessageDestiny:  "Other html element's ID"
TrueResults: "#333",    //if the validation is true
FalseRetuls: "RED",    //if the validation is false(I dont know if this could work or could be a function, but i dont know, and thats why i came here)

}) 
```

注意：这只是一个例子。我想知道这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:07:07.043

jQuery 所做的是拥有一个对象参数。

例子：

```
Stone.ValidateNumber = function( params ) {
   alert( "InputElementId = " params.InputElementId );
   alert( "TrueResults= " params.TrueResults );
   alert( "FalseRetuls= " params.FalseRetuls );

} 
```

这是实现ajax风格的一种方法：

```
var $ = {}; //$ equal to new object
$.ajax = function(options) {
   alert( options.data );
}
$.get = function( options ) {
   this.ajax( { data : 'hello', url: 'http://www.google.com' } );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:07:04.067

像这样的东西：

```
ValidateNumber(myDict) {
    input = myDict["InputElementId"];
    t_results = myDict["TrueResults"];
    f_results = myDict["FalseResults"];

    // Process data
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:09:14.747

像这样的东西？

```
Stone.ValidateNumber = function(first){

if (Object.keys(first).length) == 1)
{
    //make sure that all elements are defined (typeof != 'undefined')
 if (first.InputElementId == 'valid_rule')
     return first.TrueResults;
  else
     return first.FalseRetuls;
} 
```

# bash - 如何从具有制表符分隔列的文件中提取第一列

> ID：15138782
> 
> 赞同：3
> 
> 时间：2013-02-28T15:03:06.160
> 
> 标签：bash, shell

我有一个格式如下的文件

```
 EMAIL[TAB]NAME[TAB]ADRESSE[TAB]...
  test@test.ma[TAB]toto[TAB]tatatata....
  test@test.com[TAB]toto[TAB]tatatata.... 
```

[TAB] ===> 制表

我想用一个 bash 脚本来删除除电子邮件之外的所有列：

最终**输出**应该是这样的：

```
 EMAIL
  test@test.ma
  test@test.com 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T15:06:40.673

你可以使用

```
cut -f1 < inputfile.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:13:38.130

尝试这个：

```
sed -e 's/\t.*//' yourfile 
```

（不过，使用的答案`cut`将是我的第一选择。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T15:04:59.847

```
awk 'BEGIN { FS="\t" } { print $1 }' a 
```

# c++ - 如何在 C++ 中将文件读入向量？

> ID：15138785
> 
> 赞同：24
> 
> 时间：2013-02-28T15:03:16.617
> 
> 标签：c++, vector, file-io

我需要从每行包含一个新数字的文件`.data`或文件中读取到一个向量中。`.txt``float`

我进行了广泛的搜索并应用了许多不同的方法，但每次我得到相同的结果时，a `Main.size()`of`0`和一个错误说`"Vector Subscript out of Range"`，所以很明显向量只是没有将任何内容读入文件中。

注意：该文件既在文件夹中，也包含在 VS 项目中。

无论如何，这是我的代码：

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <vector>
#include <string>

using namespace std;

int main() {

    vector<double> Main;
    int count;
    string lineData;
    double tmp;

    ifstream myfile ("test.data", ios::in);

    double number;  

    myfile >> count;
    for(int i = 0; i < count; i++) {
        myfile >> tmp;
        Main.push_back(tmp);
        cout << count;
    }

    cout << "Numbers:\n";
    cout << Main.size();
    for (int i=0; i=((Main.size())-1); i++) {
        cout << Main[i] << '\n';
    }

    cin.get(); 
    return 0;
} 
```

我得到的结果总是很简单：

```
Numbers:
0 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-28T15:05:51.443

你的循环是错误的：

```
for (int i=0; i=((Main.size())-1); i++) { 
```

试试这个：

```
for (int i=0; i < Main.size(); i++) { 
```

此外，将数字读入向量并将它们写入标准输出的一种更惯用的方法是遵循以下原则：

```
#include <iostream>
#include <iterator>
#include <fstream>
#include <vector>
#include <algorithm> // for std::copy

int main()
{
  std::ifstream is("numbers.txt");
  std::istream_iterator<double> start(is), end;
  std::vector<double> numbers(start, end);
  std::cout << "Read " << numbers.size() << " numbers" << std::endl;

  // print the numbers to stdout
  std::cout << "numbers read in:\n";
  std::copy(numbers.begin(), numbers.end(), 
            std::ostream_iterator<double>(std::cout, " "));
  std::cout << std::endl;

} 
```

尽管您应该检查`ifstream`读取错误的状态。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-28T15:14:18.903

只是为了扩展 juanchopanza 的答案......

```
for (int i=0; i=((Main.size())-1); i++) {
    cout << Main[i] << '\n';
} 
```

做这个：

1.  创建`i`并将其设置为`0`.
2.  设置`i`为`Main.size() - 1`。因为`Main`是空的，`Main.size()`是`0`，并且`i`被设置为`-1`。
3.  `Main[-1]`是越界访问。卡布姆。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-28T15:25:52.573

只是一个建议。而不是写

```
for (int i=0; i=((Main.size())-1); i++) {
   cout << Main[i] << '\n';
} 
```

如上所述，写一个：

```
for (vector<double>::iterator it=Main.begin(); it!=Main.end(); it++) {
   cout << *it << '\n';
} 
```

使用*迭代器*。如果你有`C++11`支持，你可以声明`i`为`auto i=Main.begin()`（不过只是一个方便的快捷方式）

这避免了由于无意中遗漏a而导致的讨厌的*one-position-out-of-bound错误。*`-1`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T16:34:10.670

1.在循环中，您是在分配价值而不是比较价值，所以

i=((Main.size())-1) -> i=(-1) 因为 Main.size()

Main[i] 将产生“超出范围的向量下标”因为 i = -1。

2\. 你得到 Main.size() 为 0 可能是因为它不是它找不到文件。给出文件路径并检查输出。初始化变量也很好。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-03-29T19:42:13.483

```
#include <iostream>
#include <fstream>
#include <vector>
using namespace std;

int main()
{
fstream dataFile;
string name , word , new_word;
vector<string> test;
char fileName[80];
cout<<"Please enter the file name : ";
cin >> fileName;
dataFile.open(fileName);
if(dataFile.fail())
{
     cout<<"File can not open.\n";
     return 0;
}
cout<<"File opened.\n";
cout<<"Please enter the word : ";
cin>>word;
cout<<"Please enter the new word : ";
cin >> new_word;
while (!dataFile.fail() && !dataFile.eof())
{
      dataFile >> name;
      test.push_back(name);
}
dataFile.close();

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-04-23T17:39:58.487

```
 //file name must be of the form filename.yourfileExtension
       std::vector<std::string> source;
bool getFileContent(std::string & fileName)
{
    if (fileName.substr(fileName.find_last_of(".") + 1) =="yourfileExtension")
    {

        // Open the File
        std::ifstream in(fileName.c_str());

        // Check if object is valid
        if (!in)
        {
            std::cerr << "Cannot open the File : " << fileName << std::endl;
            return false;
        }
        std::string str;
        // Read the next line from File untill it reaches the end.
        while (std::getline(in, str))
        {
            // Line contains string of length > 0 then save it in vector
            if (str.size() > 0)
                source.push_back(str);
        }
        /*for (size_t i = 0; i < source.size(); i++)
    {
        lexer(source[i], i);
        cout << source[i] << endl;
    }
    */
        //Close The File
        in.close();
        return true;
    }
    else
    {
        std::cerr << ":VIP doe\'s not support this file type" << std::endl;
        std::cerr << "supported extensions is filename.yourfileExtension" << endl;
    }
} 
```

# xslt - 使用 XSLT 添加额外的命名空间

> ID：15138788
> 
> 赞同：2
> 
> 时间：2013-02-28T15:03:40.033
> 
> 标签：xslt, namespaces

我需要向已命名空间的 XML 文件添加额外的命名空间，但前提是特定元素不存在。

**我的 XML 文档如下所示：**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<everyone xmlns="AAA" xmlns:ns2="BBB" xmlns:ns3="CCC" company="TestingCorp">
    <common>Stuff Here</common>
    <ns2:person id="123">
        <ns3:firstname>Billy</ns3:firstname>
        <ns2:lastname>Bobby</ns2:lastname>
    </ns2:person>
</everyone> 
```

...如果在 person 元素中没有 ns3:firstname 元素，我想添加一个新的命名空间和（例如 xmlns:frog="FFF"）以及 person 中的一个附加元素，如下所示：

**期望的输出：**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<everyone xmlns="AAA" xmlns:ns2="BBB" xmlns:ns3="CCC" xmlns:frog="FFF" company="TestingCorp">
    <common>Stuff Here</common>
    <ns2:person id="123">
        <frog:title>
            <Master/>
        </frog:title>
        <ns2:lastname>Bobby</ns2:lastname>
    </ns2:person>
</everyone> 
```

**我的 XSL 文档目前是：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <!-- Copy Everything -->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

  <xsl:template match="/*">
    <xsl:element name="ns:{local-name()}">
        <xsl:attribute name="frog">fff</xsl:attribute>
        <xsl:apply-templates select="node()|@*" />
    </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

....不幸的是，这不起作用。

我尝试了很多不同的东西，但似乎无法使用 XSLT v1.0 实现这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:21:54.530

首先，您需要在样式表中声明各种命名空间，以及`"AAA"`默认命名空间

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns="AAA"
    xmlns:frog="FFF"
    xmlns:ns2="BBB"
    xmlns:ns3="CCC">

    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <!-- Copy Everything -->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

  <!-- for a Person with no firstname, add a frog:title -->
  <xsl:template match="ns2:person[not(ns3:firstname)]">
      <xsl:copy>
          <!-- must handle attributes before elements/text nodes -->
          <xsl:apply-templates select="@*" />
          <frog:title>
              <Master/>
          </frog:title>
          <xsl:apply-templates select="node()" />
      </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

这将产生

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<everyone xmlns="AAA" xmlns:ns2="BBB" xmlns:ns3="CCC" company="TestingCorp">
    <common>Stuff Here</common>
    <ns2:person id="123">
        <frog:title xmlns:frog="FFF">
            <Master/>
        </frog:title>
        <ns2:lastname>Bobby</ns2:lastname>
    </ns2:person>
</everyone> 
```

如果`xmlns:frog`绝对必须在`everyone`元素上而不是在每个元素上，`frog:title`那么您可以添加另一个模板

```
<xsl:template match="/*">
  <xsl:copy>
    <xsl:copy-of select="document('')/xsl:stylesheet/namespace::frog" />
    <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
</xsl:template> 
```

从样式表元素中复制命名空间声明（尽管这意味着每个输出文档都有一个`xmlns:frog`声明，即使它不涉及任何`frog:*`元素）。

* * *

编辑：显然 Xalan 不喜欢`copy-of`来自 的命名空间`document('')`，作为替代，如果您知道文档元素将始终具有相同的名称，那么您可以将其硬编码为文字结果元素

```
<xsl:template match="/*">
  <everyone xmlns:frog="FFF">
    <xsl:copy-of select="namespace::*" />
    <xsl:apply-templates select="@*|node()" />
  </everyone>
</xsl:template> 
```

（从技术上讲，即使没有此模板中的显式，它也会执行您想要的操作，因为字面量结果元素始终获得*在样式表*`xmlns:frog`中声明它们的点的范围内的命名空间声明，但如果您包含它，则意图可以说更清楚)

 *[此邮件列表帖子](http://marc.info/?l=xalan-j-users&m=126391355928870)提供了一些可能的见解，以了解`document('')`无法正常工作的原因。*

# shell - 如何使用命令行（使用 drush）访问远程站点？

> ID：15138789
> 
> 赞同：0
> 
> 时间：2013-02-28T15:03:43.100
> 
> 标签：shell, command-line, drush

我不知道如何使用 drush 和命令行，所以我开始阅读一些教程，并观看一些视频。我已经安装了 drush windows 安装程序，因为我有 windows。

问题是到目前为止我读过的所有示例都是从 localhost 开始的。如果我在云中的共享主机或 VPS 中安装我的 devel 怎么办？如何访问它？

使用我的 ftp 程序，我使用主机名 ftp.mysite.com 以及该帐户的用户名和密码来访问它。我怎样才能用命令行做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:18:32.503

此链接中有一个用于设置 drush 以管理 drupal（包括远程访问）的出色视频。[http://channel9.msdn.com/Series/PHP-at-Scale-on-the-Microsoft-Platform/10-Managing-Drupal-on-Windows-with-Drush](http://channel9.msdn.com/Series/PHP-at-Scale-on-the-Microsoft-Platform/10-Managing-Drupal-on-Windows-with-Drush)

您的答案将在视频 27 分钟后出现。

即使我最近开始使用 Drush，这个视频也很有帮助。鼓励你经历它。

# html - 使表格的单元格在鼠标悬停时显示较小的较大图片

> ID：15138791
> 
> 赞同：0
> 
> 时间：2013-02-28T15:03:49.493
> 
> 标签：html, dreamweaver

是否有任何功能或命令可用于从此功能中获取“弹出”图片：

```
<a class="thumbnail" href="#thumb">
    <img src="productURL" width="100px" height="142px" border="0" />
    <span>
        <img src="productURL" />
        <br />
        <font face="arial">productname</font> 
    </span>
</a> 
```

显示在页面右侧的表格中？

注意：我使用的是 Dreamweaver CS6

也许有一种方法可以在一个类中放置弹出窗口必须显示在前面定义的表格中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:07:53.683

**编辑** 你可以这样做

在您的 html 表格单元格标记中添加一个 id

**HTML**

```
<img src = "xyz.png" onmouseover="showimage();" onmouseout="hideimage();" /> 
```

和桌子

```
<table><tr><td id="showimage"></td></tr></table> 
```

**Javascript**

```
function showimage()
{
    document.getElemtnById('showimage').append('<img src="xyz">');
}

function hideimage()
{
    var elem = document.getElemtnById('showimage');
    elem.removeChild(elem.childNodes[0]);
} 
```

问候。

# c++ - 清除二维数组中的值

> ID：15138793
> 
> 赞同：0
> 
> 时间：2013-02-28T15:03:52.790
> 
> 标签：c++

我一直在为 naughts and crosss 程序做一些编程，而电路板是一个 2D 数组。如果用户想要重播，我一直在尝试使程序重复，但是我注意到重复时所有值都保留在数组中。所以我想知道是否有办法清除我数组中的所有值。

我确实在论坛上尝试了一些以前的问题，但是我发现的一些解决方案似乎不起作用。

如果有人想查看代码，只需发表评论，我会在此处添加，我只是不确定是否有必要。

任何帮助将非常感激。

```
 const int Rows = 4;
    const int Columns = 4;
    char Board[Rows][Columns] = { {' ', ' ', ' ', ' ' },
                                  {' ', '_', '_', '_' },
                                  {' ', '_', '_', '_' },
                                  {' ', '_', '_', '_' } };

    for (int i = 0; i < Rows; ++i)
    {
        for (int j = 0; j < Columns; ++j)
            cout << Board [i][j];
        cout << endl;
    }

    cout << endl << endl;

    int row;
    int column;

    do
    {
        cout << "Please enter the value of the row you would like to take ";
        cin >> row;
        }while (row != 0 && row != 1 && row != 2 && row != 3);

    do
    {
        cout << "Please enter the value of the column you would like to take ";
        cin >> column;
        }while (column != 0 && column != 1 && column != 2 && column != 3);

    Board [row][column] = Player1.GetNorX();

            for (int i = 0; i < Rows; ++i)
    {
        for (int j = 0; j < Columns; ++j)
            cout << Board [i][j];
        cout << endl;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:10:59.523

假设您想`Board`重置为原始状态，您需要：

```
for (int i = 0; i < Rows; i++) {
  for (int j = 0; j < Columns; j++) {
    if (i == 0 || j == 0) {
      Board[i][j] = ' ';
    } else {
      Board[i][j] = '_';
    }
  }
} 
```

这将遍历数组的每个元素，如果列或行号为 0，则用 a 填充它`' '`，否则用 a 填充它`'_'`。

如果您只关心右下角的 3x3 网格，那么您可以这样做：

```
for (int i = 1; i < 4; i++) {
  for (int j = 1; j < 4; j++) {
    Board[i][j] = '_';
  }
} 
```

但是我建议改为声明`Rows`and `Columns`as 。`3`如果您希望用户输入从 1 开始的行号和列号，只需在访问数组时将 {1, 2, 3} 转换为 {0, 1, 2} 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:31:01.437

使用*List*类代替传统的多维数组。这个类的对象的元素可以很容易的清除和移除。此外，列表的大小是动态的和可变的。创建对象时无需指定大小。尝试定义一个二维列表。

```
List<List<char>> Board = new List<List<char>>; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:19:52.040

将代码放入单独的函数中

```
void game()
{
   const int Rows = 4;
   // ...
} 
```

并从游戏控制器调用它

```
bool replay;
do
{
    game();
    cout << "Replay? (0 - no, 1 - yes)";
    cin >> replay;
} while(replay); 
```

这种方法恢复了整个给定的环境。

# php - 配置 APC 缓存

> ID：15138799
> 
> 赞同：0
> 
> 时间：2013-02-28T15:04:16.157
> 
> 标签：php, wordpress, caching, ubuntu, apc

我正在将 7 个 Wordpress 站点迁移到一台运行 Ubuntu 并具有 4 个核心 CPU 和 15gb 内存的服务器上）

到目前为止，我已经移动了一个网站并安装了 APC，但我不确定这种缓存方法是否支持一台服务器上的多个网站。

谁能给我一些关于配置的建议？我可以直接安装它并“开箱即用”使用它，还是我需要进行一些调整以提高所有 7 个网站的性能。

看起来它目前只使用 30mb 内存，这对我来说似乎并不多。

干杯，

富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:30:33.783

W3 Total Cache 将是一个不错的选择，它不会对 APC 造成任何问题。对于基本安装，只需配置主配置页面就足够了。

通常，您会在此处设置选项，如下所示：

*   页面缓存：启用，磁盘增强
*   缩小：禁用（您可以尝试一下，但可能会导致您的站点出现错误。如果您尝试，请将其设置为磁盘）
*   数据库缓存：启用，apc
*   对象缓存：启用，apc
*   浏览器缓存：启用
*   CDN：禁用
*   清漆：禁用

当然还有很多其他的选择，您可以根据自己的需要进行一些试验。但是这些设置应该会给您带来坚实的性能提升。

我还要看看你的 apc.ini 中的设置。默认情况下，为服务分配的内存量不是很大。也许将其增加到 512mb 或 1024mb。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:06:57.000

您将不得不使用一些 apc 缓存插件，最常用的是[http://wordpress.org/extend/plugins/w3-total-cache/](http://wordpress.org/extend/plugins/w3-total-cache/)。

它易于设置并提供更多功能。

# svg - 在SVG中围绕自己的中心旋转矩形

> ID：15138801
> 
> 赞同：85
> 
> 时间：2013-02-28T15:04:22.313
> 
> 标签：svg

我有以下代码：

```
<svg>

<defs>
<rect id = "myRect"
      x = "10"
      y = "10"
      height = "120"
      width = "120"
      stroke-width = "2px"
      stroke = "red"
      fill = "blue" />

</defs>

<g transform = "translate(100,30)">
  <use xlink:href = "#myRect" />
</g>

<g transform = "translate(100, 100) rotate(45 ? ?)">

  <rect id = "myRect"
      x = "10"
      y = "10"
      height = "120"
      width = "120"
      stroke-width = "2px"
      stroke = "green"
      fill = "yellow" />
</g>

</svg> 
```

当我翻译矩形而不旋转时，它工作正常。但是当我旋转它时，我想围绕它的中心轴点旋转它。我应该传递什么来旋转属性？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2019-11-11T16:25:01.660

您必须将中心设置为填充元素的中心。像这样：

```
svg .rotate {
  transform-box: fill-box;
  transform-origin: center;
  transform: rotate(45deg);
} 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2013-02-28T15:15:27.487

您只需要添加矩形宽度/高度的一半即可获得其中心。

```
<g transform = "translate(100, 100) rotate(45 60 60)"> 
```

有关详细信息，请参阅旋转函数的[转换文档](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-08-17T07:49:40.060

如果您从点 (0,0) 开始绘制矩形，则接受的答案有效，*这是 OP case*。然而对我来说不是！

这对我有用：

*   要获取我使用的`$('#rectID').getBBox()` 方法的矩形坐标，应该返回 [ **rect-height , rect-width , rect-y , rect x** ]
*   中心点是 ( rect-x + (rect-width/2) , rect-y + (rect-height/2) )

这是我在浏览器控制台上使用的一个片段：

```
var coord = $('#elemID')[0].getBBox();
coord.x + (coord.width/2) +' '+ coord.y + (coord.height/2) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-06-16T08:00:02.047

`x = x + width / 2`
`y = y + height / 2`
这里的原点
x 是 10
y 是 10
宽度是 120
高度是 120

```
<g transform = "translate(100, 100) rotate(45 70 70)"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-24T15:26:39.863

我知道这是一篇旧帖子，但是如果有人正在寻找使值可以在组元素之外修改

```
 const centerX=100;
    const centerY=100;
    const firstAngle=45;
    const secondAngle=60;
    const thirdAngle =60;

    <g transform ={`translate(${centerX}, ${centerY}) rotate(${firstAngle} ${secondAngle}, 
    ${thirdAngle})`}> 
```

* * *

## 回答 #6

> 赞同：-13
> 
> 时间：2018-06-08T07:20:34.097

您只需要在 javascript 中使用该元素编写以下代码即可：

```
element.rotate(angle Degree); 
```

# c# - 将 Outlook MSG 文件转换为 EML 文件的第 3 方实用程序

> ID：15138803
> 
> 赞同：4
> 
> 时间：2013-02-28T15:04:27.653
> 
> 标签：c#, asp.net, outlook, eml, msg

我有一个允许人们将文件附加到记录的应用程序。一些用户正在上传与相关记录相关的电子邮件。一切都很好，花花公子。

然而，一些用户使用 MS Outlook 并上传 MSG 文件，而其他用户使用 Thunderbird 并上传 EML 文件。理想情况下，我希望所有用户都上传 EML 文件，因为它们是可互操作的并且也可以在移动设备上工作。

切入正题，我希望通过扩展名或 MIME 类型检测上传的味精，然后动态转换为 EML 并存储它。这对用户来说是透明的，因为 Outlook 可以愉快地打开 EML 文件。

有谁知道我可以调用来为我进行转换的（理想情况下免费的）第 3 方命令行实用程序？或者是否有 ac# 代码块可以用来将 MSG 转换为 EML？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:55:15.303

您可以为此使用[救赎](http://www.dimastr.com/redemption)。像下面这样的东西（从我的头上掉下来）应该可以工作：

```
 RDOSession Session = new RDOSession();
  RDOMail Msg = Session.GetMessageFromMsgFile("c:\temp\YourMsgFile.msg");
  Msg.SaveAs("c:\temp\YourEmlFile.eml", rdoSaveAsType.olRFC822); 
```

# sql - 类似于 sql 中的 last()，我可以在 derby 数据库中使用什么？

> ID：15138805
> 
> 赞同：1
> 
> 时间：2013-02-28T15:04:35.000
> 
> 标签：sql, derby, javadb

`Select Last(column_name) from table_name`将返回标准 SQL 中列中的最后一个值。什么是类似的查询，可以在 derby 中获取列中的最后一个值？

请在下面找到示例表：“secondcol”是表中的列名。

```
 secondcol
          33
          45
          78 
```

`Select Last(secondcol) from table_name`在 sql 中将返回 78 作为输出。如果我想在 javadb/derby 数据库中获得类似的输出，我该如何查询呢？我不想更改列值中的任何顺序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-04T00:38:30.573

选择表中的最后一行与纯 SQL 略有不同：

SQL：

```
SELECT * FROM tableName ORDER BY id DESC LIMIT 1; 
```

德比：

```
SELECT * FROM tablename ORDER BY id DESC FETCH FIRST ROW ONLY; 
```

祝你今天过得愉快 ;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:01:29.673

表上是否有一些唯一键，您可以将问题形成为“给我在具有最大*键值*的行上的*secondcol*值”？如果是这样，那么有一种技术可以在任何数据库引擎中工作 - 想法是将键与任何所需的结果数据连接起来，执行最小值/最大值，然后提取结果数据。 见[这里](https://stackoverflow.com/a/14881009/1800725)和[这里](https://stackoverflow.com/a/15005382/1800725)。

# mobile-robots - 使用粒子滤波器进行局部定位

> ID：15138806
> 
> 赞同：0
> 
> 时间：2013-02-28T15:04:42.000
> 
> 标签：mobile-robots, particle-filter

我正在使用声纳、粒子滤波器进行局部定位（即所有粒子最初都具有机器人姿势）。

我有环境的抓地图。当我在环境中执行算法（门关闭/打开）时，粒子无法跟随机器人。

我没有随机粒子，因为我完全知道机器人的初始位置。

添加随机粒子会改变机器人的姿态（我发现粒子的中位数作为机器人的姿态）。

如何提高本地化的任何想法/方法。

谢谢你。

**更新 ：**

在这里，我使用嘈杂的运动模型，然后使用传感器模型和重新采样以将它们收敛到机器人姿势。我的问题是当地图环境发生变化时如何优化它（主要是房间内的门打开/关闭和杂乱）

# ios - iOS：设置动作、数据源和委托不给文件的所有者

> ID：15138807
> 
> 赞同：2
> 
> 时间：2013-02-28T15:04:43.207
> 
> 标签：ios, xcode, delegates, interface-builder, datasource

也许这是两个不同的问题，但他们基本上问的是同一件事。我有一个单一视图应用程序，在我的屏幕上我有一个`Table View`和一个`Collection View`.

1）我想为我的表格视图和我的集合视图提供一个`datasource`（`delegate`当然），但我不希望它在同一个（主）`ViewController`文件中（为了更清晰的代码）。但是界面生成器只允许我声明为`datasource`（和`delegate`）文件的所有者，即视图控制器。我怎样才能做到这一点？以编程方式声明是否正确？如果是这样，应该在哪里完成？或者，也许将数据源（和委托）与数据源分开`ViewController`不是最佳实践？

2）在我的表格视图的自定义单元格中，我有一个按钮，我不想在同一个地方（文件）处理按钮的操作，我处理行选择（委托 obj）。但是再一次，IB 只让我将操作连接到自定义单元类。如何将动作连接到另一个地方？

提前感谢您的回答，
丹

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T15:10:38.920

您应该使用对象库中的对象（蓝色立方体）。拖放到文件所有者所在的部分（文档大纲）。然后在身份检查器中将其设置为`Outsider`您想要的类（例如）。这将允许您将`Outsider`object 设置为委托/数据源，并且还允许您在`IBAction`那里编写 '。
诀窍是通过在 xib 内创建一个对象（这将在加载 nib 时完成），使该对象（类）在 xib 中可见。

另一件事，以编程方式设置委托或数据源并没有错，但是通过接口构建器更方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:08:20.393

1）以编程方式进行。编写您自己的委托并在代码中分配它。清洁器。

2) 在 ViewController 类中连接按钮的操作。这很干净，这就是视图控制器的用途。打开助手编辑器，将“箭头”拖到头文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:11:16.313

问题一：

> 但是界面构建器只允许我将文件的所有者声明为数据源（和委托），即视图控制器。

问题2：

> 但是再一次，IB 只让我将操作连接到自定义单元类。如何将动作连接到另一个地方？

两者都有相同的答案：

您可以通过从界面生成器中选择来更改类。

![在此处输入图像描述](../Images/e34f81d7eaaed45fadfc52d10880ddbe.png)

# c# - JsonConvert.SerializeObject(this); 在 JSON 中呈现函数的结果

> ID：15138814
> 
> 赞同：0
> 
> 时间：2013-02-28T15:04:54.800
> 
> 标签：c#, json

有什么方法可以`JsonConvert.SerializeObject(this);`在类中呈现函数的结果？

```
 public string Name { get; private set; } // renders fine in the outputted json

        public string AdHocRecipientsStub()// I want this also in the outputted json
            {
                return AdHocRecipients.ToString().Substring(0, 15) + "...";
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:57:29.333

您可以将其包装在一个属性中：

```
static void Main(string[] args)
{
    Console.WriteLine(JsonConvert.SerializeObject(new Test()));
}

public class Test
{
    public string Test1 { get { return "test1"; } }
    public string Test2 { get { return Test2Func(); } }
    private string Test2Func()
    {
        return "test2";
    }
} 
```

输出：

```
{"Test1":"test1","Test2":"test2"} 
```

# html - HTML5 代码复用 Phonegap

> ID：15138818
> 
> 赞同：0
> 
> 时间：2013-02-28T15:05:11.663
> 
> 标签：html, cordova, jquery-mobile, mobile

各位开发者，您好，

我正在着手开发 HTML5/JS 网站的新旅程，并寻找一种方法为移动应用程序重用相同的代码（希望使用 PhoneGap 或 Appcelerator 来使用它）。要求是开发一次，可以在台式机和智能手机上使用，但项目发起人希望以更安全的方式处理智能设备上的数据，因此我们希望选择这种方法。现在我的问题是

1.  我们能否以这种方式重用和构建解决方案，以便在 Appcelerator 或 Phonegap 内的移动设备上重用 HTML5/jQuery 代码？
2.  如果是，需要多少百分比的返工才能支持移动设备？
3.  如果没有，还有什么替代方案？

谢谢大家的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:53:42.753

我希望您计划建立一个移动网站。如果是这样，如果您的网站仅使用 HTML5、JS 和 CSS，那么很容易将其转换为 PhoneGap 应用程序，可能只需 5% 的更改。它不可能运行一个用服务器端语言编写的网站，例如 PHP、ASP.NET、ruby 等。需要记住的一些重要事项：

*   一起开始网站和应用程序的开发。使用移动浏览器和 phonegap 进行测试，以便您可以在出现问题时解决问题。

*   使用基于移动 HTML5 的框架（如 Kendo UI Mobile/jQuery Mobile 等）进行开发
    ，这样您就不必花时间修复所有与移动相关的 UI 内容。

*   无论您在何处使用 PhoneGap 功能，请检查您是否在 PhoneGap 上运行，否则会退回到浏览器功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:41:34.260

(1)。如果您当前的桌面网站以 Web 服务的方式与服务器端交互，那么一切都会变得非常容易。甚至您可以像这样直接修改 src\com\ 中的 *.java：

```
 super.loadUrl("http://balabalabala.com"); 
```

使用 phonegap wrap，您的应用程序可以立即访问。如果没有，您将需要花时间为客户端实现服务器端接口。

(2)。您需要使用一些适用于移动设备的 javascript 框架（例如 jquery mobile、sencha touch）重构您的静态 html 页面。使用它们使您的 phonegap 应用程序与本机应用程序更加相似。这也需要时间。

上面两件事是你需要返工的。

# c++ - 有人可以解释这个平衡分区的源代码吗？

> ID：15138824
> 
> 赞同：3
> 
> 时间：2013-02-28T15:05:32.707
> 
> 标签：c++

有人可以详细解释这段代码吗？我试过调试它，但我不知道它是如何产生结果的。我一直在寻找问题的解决方案，这是我偶然发现的代码，它产生了准确的解决方案，我想知道它是如何工作的。非常感谢。

```
#include <iostream>
#include <stdio.h>   
#include <math.h>
#include <stdlib.h>
#include <limits.h>
using namespace std;

int BalancedPartition ( int a[] , int n ){

int sum = 0;
for( int i = 0 ; i < n ; i++)
    sum += a[i];

int *s = new int[sum+1];

s[0] = 1;
for(int i = 1 ; i < sum+1 ; i++)    s[i] = 0;

int diff = INT_MAX , ans;

for(int i = 0 ; i < n ; i++)
{
    for(int j = sum ; j >= a[i] ; j--)
    {
        s[j] = s[j] | s[j-a[i]];
        if( s[j] == 1 )
        {
            if( diff > abs( sum/2 - j) )
            {
                diff = abs( sum/2 - j );
                ans = j;
            }

        }
    }
}
return sum-ans-ans;
}

int main()
{
    int n,result, arr[300];
    cin >>n;
    for(int i = 0; i < n; i++)
    {
        cin>>arr[i];
}
result = BalancedPartition(arr,n);
cout <<abs(result); // The difference between the sums of the two subsets

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:42:51.107

该函数`BalancedPartition`首先计算数组元素的总和`a`并将其存储在`sum`. `s`然后它分配一个由可能的子集总和值索引的数组。它用作跟踪内部`for`循环进度的簿记结构。如果`s[j]`为 1，则表示该值`j`已被处理，其中该值`j`表示数组中某些元素子集的总和`a`。最初，only`s[0]`设置为 1，对应于没有元素的总和（空子集）。`diff`用于计算总和最接近 的一半的`sum`子集，并将该子集总和值存储在 中`ans`。一次`ans`如果计算正确，则返回的值是未使用的元素之`ans`和`ans`与其自身之差，即`(sum - ans) - ans`. 所以，剩下的是双`for`循环，看看它是如何正确到达`diff`and的`ans`。

外部`for`循环遍历`i`数组的所有索引`a`。内部循环遍历`j`所有可能的子集总和值，从`sum`. 但是，如果该值可从先前识别的子集总和中导出，则它仅识别子集总和值。也就是说，对于 的任何给定迭代`j`，仅当 为`s[j]`1 时才变为`s[j - a[i]]`1。由于最初仅识别空子集，因此第一次迭代仅识别`s[a[0]]`。第二次迭代识别`s[a[1]]`和`s[a[0]+a[1]]`。第三次迭代识别`s[a[2]]`、`s[a[0]+a[2]]`和。如果您识别出这种模式，您就可以为算法的正确性制定一个归纳论证。`s[a[1]+a[2]]``s[a[0]+a[1]+a[2]]`

# windows - 将带有希腊文本的 .Rnw 编译为 pdf

> ID：15138826
> 
> 赞同：4
> 
> 时间：2013-02-28T15:05:34.237
> 
> 标签：windows, r, pdf, sweave, miktex

我使用注释掉的代码尝试了它，但没有成功。有人可以帮忙吗？

```
\documentclass[a4paper]{article}
%\usepackage[english,greek]{babel}

%\latintext 
\title{Sweave Example 1}
\author{George Dontas}

\begin{document}

\maketitle

In this example we embed parts of the examples from the
\texttt{kruskal.test} help page into a \LaTeX{} document:

%\greektext 
Αυτό είναι κείμενο στα Ελληνικά
%\latintext
<<eval=TRUE,echo=TRUE,warning=FALSE,message=FALSE,error=FALSE>>=
data(airquality)

kruskal.test(Ozone ~ Month, data = airquality)
@

which shows that the location parameter of the Ozone distribution varies significantly from month to month. Finally we
include a boxplot of the data:

\begin{center}
<<eval=TRUE,echo=FALSE,results='hide',warning=FALSE,message=FALSE,error=FALSE>>=
boxplot(Ozone ~ Month, data = airquality)
@
\end{center}

\end{document} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:21:25.560

这里的问题不是 R，而是让乳胶与希腊语很好地配合的问题。有了[这个答案](https://tex.stackexchange.com/questions/24728/xelatex-with-polyglossia-and-greek)的提示，也许最简单的解决方案是切换到 XeLaTeX 编译并将文件重写为

```
\documentclass[a4paper]{article}
\usepackage{fontspec}
\setmainfont{Times New Roman}
\setsansfont{Arial}
\newfontfamily\greekfont[Script=Greek]{Linux Libertine O}
\newfontfamily\greekfontsf[Script=Greek]{Linux Libertine O}
\usepackage{polyglossia}
\setdefaultlanguage{english}
\setotherlanguage{greek}

\title{Sweave Example 1}
\author{George Dontas}

\begin{document}
\maketitle

Ελληνικό κείμενο

In this example we embed parts of the examples from the
\texttt{kruskal.test} help page into a \LaTeX{} document:

... 
```

依此类推。然后用 XeLaTeX 编译（`latexmk -xelatex file.Rnw`会这样做）。

# android - 使用参数集检查用户输入的数据，sqlite android

> ID：15138827
> 
> 赞同：0
> 
> 时间：2013-02-28T15:05:34.177
> 
> 标签：android, sqlite

我正在检查用户输入的数据以及已经设置的数据。例如，sqlite 中保存的数据为 60-80。如果用户输入是 88。我想用数据 60-80 检查用户输入是 88，这样我就可以提出适当的建议

帮我。

我确实喜欢这个

```
public String getRangeFromUserInput(int b1, int b2, int b3, int a1, int a2, int a3) {

    if 
       (((70<b1<<100)||(70<b2<<100)||(70<b3<<100))&&((70<a1<<135)||(70<a2<<135)||(70<a3<<135)))
        Toast.makeText(GlucoseAdd.this, "Your glucose level is at normal range", Toast.LENGTH_LONG).show();
    else if 
       (((50<b1<<60)||(50<b2<<60)||(50<b3<<60))&&((135<a1<<180)||(135<a2<<180)||(135<a3<<180)))
        Toast.makeText(GlucoseAdd.this, "You need to start diet. The diet should " +
                "also be low in fat and high in dietary fibre. Regular exercise " +
                "is important in maintaining balanced blood glucose levels.", Toast.LENGTH_LONG).show();
    else if 
        (((b1<50)||(b2<50)||(b3<50))&&((180<a1<<200)||(180<a2<<200)||(180<a3<<200)))
        Toast.makeText(GlucoseAdd.this, "You are in danger state.", Toast.LENGTH_LONG).show();
    return null;
} 
```

但是当我输入数据时，都会提示第一个.. 为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:43:15.680

由于存储在 DB 表中的数据是字符串格式，即 60-80，因此您需要使用以下代码将用户输入值（例如 88）转换为 ie 80-100：

```
public String getRangeFromUserInput(String userInput) {
    return getRangeFromUserInput(Integer.parseInt(userInput));
}

public String getRangeFromUserInput(int userInput) {

    if (userInput >= 60 && userInput < 80)
        return "60-80";
    else if (userInput >= 80 && userInput < 100)
        return "80-100";
    // ...more range checks

    return null;
} 
```

现在，在查询的 where 子句中使用 getRangeFromUserInput() 方法的输出，它是一个字符串（例如 80-100），如下所示：

```
String where = "range = '" + getRangeFromUserInput("88") + "'"; 
```

假设列名是表中的*范围*。如果查询返回一行，那么您可以阅读与范围相对应的建议，使用

```
cursor.getString(cursor.getColumnIndex("advice")) 
```

假设列名是您表中的*建议*。

# liferay - 在 liferay 中跨 portlet 发送自定义对象

> ID：15138829
> 
> 赞同：2
> 
> 时间：2013-02-28T15:05:37.957
> 
> 标签：liferay, classloader, portlet, liferay-6

我在尝试在liferay 中的portlet 之间发送共享自定义对象时遇到了严重问题。我有一个带有 servlet 过滤器的 Hook 插件，它加载 MyCustomClass 类型的对象并将其作为参数插入到请求对象中。

当我尝试在 portlet 的 render() 中读取这个对象时，我得到了一个 ClassCastException，尽管我正在将该对象转换为同一个类。

我知道 liferay 插件有不同的上下文，我已经尝试在将对象加载到 bean 和 portlet 之前更改类加载器，如下所示：

```
ClassLoader portalcl = PortalClassLoaderUtil.getClassLoader();
ClassLoader currentcl = Thread.currentThread().getContextClassLoader();
Thread.currentThread().setContextClassLoader(portalcl);

//do my stuff

Thread.currentThread().setContextClassLoader(currentcl); 
```

但是，它并没有解决问题，我发现解决问题的唯一方法是将对象序列化为 json 字符串，并在需要时对其进行反序列化。

这不是有点蹩脚吗？有谁知道更好的解决方案？

问候， DS

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:14:58.677

听起来您看到的主要问题是两个不同的类加载器正在加载从技术上使它们成为不同类的类（看起来您已经确定了）。

我没有太多使用 LifeRay，但这也是我在其他平台上看到的一个问题。我们使用 WebSphere 并通过将公共 MyCustomClass 放入服务器类路径上的共享库中解决了这个问题。这样，服务器将加载该类并通过服务器的单个类加载器使其对服务器上的所有应用程序可用。如果您让每个应用程序加载该类，那么您将继续看到此异常。

# android - 如何将方形网格缩放到任何手机的尺寸

> ID：15138834
> 
> 赞同：3
> 
> 时间：2013-02-28T15:05:46.043
> 
> 标签：android, android-canvas

嗨，我正在尝试在画布上制作方形 8x8 网格。我设法制作了一个网格，但结果是矩形的，但对于我正在制作的游戏，它需要是方形的。如何更改我的代码以使其成为缩放到手机的方形网格。

```
float testWidth = (getWidth() - 16f) / 9f;
float testHeight = (getHeight() - 16f) / 9f;
for (int i = 0; i < 9; i++) {
            canvas.drawLine(padding + testWidth* i, padding, padding
                    + testWidth * i, testHeight* 8+padding, dark);
            canvas.drawLine(padding,  padding+testHeight* i, testWidth* 8
                    + padding, padding+testHeight* i, dark);
        } 
```

编辑：我现在可以制作一个方形网格，但我不知道如何将网格置于手机中间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:13:19.810

您需要取两者中最短的一个（宽度或高度）并使用它来构建网格。（所以你的网格可以适合屏幕）

就像是...：

```
float gridSide = 0;
if (getWidth() > getHeight()) {
  gridSide = getHeight();
}
else {
  gridSide = getWidth();
} 
```

[appsroxcom](https://stackoverflow.com/users/2107118/appsroxcom)提供的更简单的逻辑：

```
float gridSide = Math.min(testWidth(), testHeight()); 
```

使用**gridSide**作为网格的总长度*和*总宽度

# c - Flex Bison 未读取完整输入

> ID：15138835
> 
> 赞同：1
> 
> 时间：2013-02-28T15:05:49.057
> 
> 标签：c, bison, yacc, lex, flex-lexer

我正在使用 Flex 和 Bison 编写一个 nor 计算器。这是我的 .l 文件：

```
%{
#include <stdlib.h>
#include "y.tab.h"
%}

%% 
("true"|"false")    {return BOOLEAN;}
"nor"               {return NOR;}
.                   {return yytext[0];}

%%

int main(void)
{
    yyparse();
    return 0;
}

int yywrap(void)
{
     return 0;
}
int yyerror(void)
{
    getchar();
    printf("Error\n");
} 
```

这是我的 .y 文件：

```
/* Bison declarations.  */
 %token BOOLEAN
 %token NOR
 %left 'nor'

 %% /* The grammar follows.  */
 input:
   /* empty */
 | input line
 ;

 line:
   '\n'
 | exp '\n'  { printf ("%s",$1); }
 ;

 exp:
   BOOLEAN            { $$ = $1;           }
 | exp 'nor' exp      { $$ = !($1 || $3);  }
 | '(' exp ')'        { $$ = $2;           }
 ;
 %% 
```

问题是，如果我输入诸如“true or false”之类的输入，词法分析器只会到达`return BOOLEAN`, 然后`return yytext[0]`，然后抛出我的错误（在 flex 代码中）。任何人都看到有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:02:56.503

问题在这里：

```
%left 'nor' 
```

和

```
exp:
   BOOLEAN            { $$ = $1;           }
 | exp 'nor' exp      { $$ = !($1 || $3);  }
 | '(' exp ')'        { $$ = $2;           }
 ; 
```

您已将其编写`'nor'`为终端令牌，您的解析器无法将 'nor' 识别为令牌，因此您应该`NOR`在词法分析器返回时将其替换为：

```
"nor"               {return NOR;} 
```

解决方案

```
 %left NOR

and 

    exp:
       BOOLEAN            { $$ = $1;           }
     | exp NOR exp      { $$ = !($1 || $3);  }
     | '(' exp ')'        { $$ = $2;           }
     ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:14:17.837

您的词法分析器还需要识别空白。制定另一个规则“”。你不需要采取行动

# ruby - 这个 Ruby 依赖有什么问题？

> ID：15138836
> 
> 赞同：1
> 
> 时间：2013-02-28T15:05:50.503
> 
> 标签：ruby, swagger

我正在尝试在 OSX 10.7.5 上使用[source2swagger](https://github.com/solso/source2swagger)

它取决于“json”，所以我正在安装它，然后尝试如下运行。

```
machine:source2swagger jpbeuc1$ sudo gem install json
Password:
Building native extensions.  This could take a while...
Successfully installed json-1.7.7
1 gem installed
Installing ri documentation for json-1.7.7...
Installing RDoc documentation for json-1.7.7...
machine:source2swagger jpbeuc1$ bin/source2swagger 
bin/source2swagger:4:in `require': no such file to load -- json (LoadError)
    from bin/source2swagger:4 
```

谁能告诉我这里有什么不工作以及如何让 source2swagger 看到“json”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:13:17.237

您已`source2swagger`安装在您的`local`并`gems`安装在`root`. 所以你`source2swagger`需要的`json`不能访问那些安装在`root`. 所以我建议`local`总是使用 gems 并避免`sudo`用于安装 gems。要在本地管理 gem，我建议使用[RVM](https://rvm.io/)。

# android - HTTP 代理无法在 HTC 上运行 android 2.2

> ID：15138837
> 
> 赞同：0
> 
> 时间：2013-02-28T15:05:50.913
> 
> 标签：android, http, proxy

我正在使用以下代码使用 HTTP 代理：

```
DefaultHttpClient client = new DefaultHttpClient();
HttpHost proxy = new HttpHost(proxyHost, proxyPort, "http");
client.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy); 
```

这适用于几个运行 android 2.3 及更高版本的 android 设备。但是，当我在运行 android 2.2.2 的 HTC 愿望上尝试此操作时，出现以下异常：

```
java.lang.IllegalArgumentException
java.net.InetSocketAddress.<init>(InetSocketAddress.java:98)
java.net.InetSocketAddress.<init>(InetSocketAddress.java:89)
org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.<init>(OpenSSLSocketImpl.java:238)
org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImplWrapper.<init>(OpenSSLSocketImplWrapper.java:35)
org.apache.harmony.xnet.provider.jsse.OpenSSLSocketFactoryImpl.createSocket(OpenSSLSocketFactoryImpl.java:83)
de.bahn.android.ris.communication.http.EasySSLSocketFactory.createSocket(EasySSLSocketFactory.java:136)
org.apache.http.impl.conn.DefaultClientConnectionOperator.updateSecureConnection(DefaultClientConnectionOperator.java:225)
org.apache.http.impl.conn.AbstractPoolEntry.layerProtocol(AbstractPoolEntry.java:302)
org.apache.http.impl.conn.AbstractPooledConnAdapter.layerProtocol(AbstractPooledConnAdapter.java:146)
org.apache.http.impl.client.DefaultRequestDirector.establishRoute(DefaultRequestDirector.java:623)
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:352)
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465) 
```

有没有人见过这种行为？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:55:05.807

如[https://android-review.googlesource.com/#/c/15755/](https://android-review.googlesource.com/#/c/15755/)中所述，这似乎是在某个时候解决的错误，很可能在 2.2 之后。我在这里找到了解决方案[http://code.google.com/p/android/issues/detail?id=2690](http://code.google.com/p/android/issues/detail?id=2690)，即替换

```
HttpResponse response = httpclient.execute(httpRequest); 
```

和

```
int port = httpRequest.getURI().toString().startsWith("https") ? 443 : 80;
HttpHost host = new HttpHost(httpRequest.getURI().getHost(), port, httpRequest.getURI().getScheme());
HttpResponse response = httpclient.execute(host, httpRequest); 
```

显然问题是端口设置不正确，在 InetSocketAddress 中设置为 0。

# java - 在 Struts 2 中使用提交表单时出现 NoSuchMethodError

> ID：15138843
> 
> 赞同：1
> 
> 时间：2013-02-28T15:06:00.807
> 
> 标签：java, jsp, struts2, ognl

我目前正在学习 Apache Struts 网站上[的教程。](https://struts.apache.org/getting-started/coding-actions.html)

目前，每当我在表单上按提交，或者当我单击布鲁斯飞利浦超链接时，我都会得到一个`NoSuchMethodError`.

```
javax.servlet.ServletException: Filter execution threw an exception
root cause

java.lang.NoSuchMethodError: ognl.SimpleNode.isEvalChain(Lognl/OgnlContext;)Z
    com.opensymphony.xwork2.ognl.OgnlUtil.isEvalExpression(OgnlUtil.java:224)
    com.opensymphony.xwork2.ognl.OgnlUtil.setValue(OgnlUtil.java:215)
    com.opensymphony.xwork2.ognl.OgnlValueStack.trySetValue(OgnlValueStack.java:187)
    com.opensymphony.xwork2.ognl.OgnlValueStack.setValue(OgnlValueStack.java:174)
    com.opensymphony.xwork2.ognl.OgnlValueStack.setParameter(OgnlValueStack.java:152)
        .... 
```

我也不太确定问题是什么，我相信我已经包含了教程所述的所有内容。我已经尝试在 my 中包含依赖项`pom.xml`，但这也没有什么区别。

```
<?xml version="1.0" encoding="UTF-8"?>
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>Struts2PracticeSite</groupId>
  <artifactId>Struts2PracticeSite</artifactId>
    <packaging>war</packaging>
  <version>0.0.1</version>
    <build>
        <finalName>Struts2PracticeSite</finalName>
    </build>
    <dependencies>
    <dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-core</artifactId>
    <version>2.3.8</version>
</dependency>

<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.14</version>
</dependency>
</dependencies>

</project> 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:49:55.167

struts2.3.1.1 允许同时使用**ognl3.0.2.jar + ognl3.0.2-source.jar + ognl3.0.1** 。struts2.3.1.2只能有ognl3.0.4，但是去掉其他版本

**ognl3.0.4**是必须的，可以是唯一的ognl jar！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:37:36.117

我相信你需要的依赖

```
 <dependency>
     <groupId>org.apache.struts</groupId>
     <artifactId>struts2-core</artifactId>
     <version>${struts2.version}</version>
  </dependency>
  <dependency>
     <groupId>org.apache.struts</groupId>
     <artifactId>struts2-tiles-plugin</artifactId>
     <version>${struts2.version}</version>
  </dependency> 
```

还有其他依赖项，但这些对于 Struts2 Tiles 应用程序是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T06:17:58.157

删除`ognl`作为依赖项，因为这已经是`struts 2.3.8`其自身的临时依赖项，并确保 Eclipse 是否正确部署了您的应用程序，这有很多问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T15:07:17.227

发现问题...原来我的服务器版本太旧，无法处理 struts 2。我以前使用 Geronimo 版本 2.0.2，现在它在 GlassFish 3.1.2 上运行良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-20T07:41:15.970

**将这些 Jar 组合用于 Struts 2 应用程序**

![在此处输入图像描述](../Images/857bc28842ed39eb999f70d62f1c2d13.png)

# php - 是否可以在 PHP 中创建文本文件？

> ID：15138844
> 
> 赞同：-1
> 
> 时间：2013-02-28T15:06:01.437
> 
> 标签：php, file, member

我打算创建一个带有成员数据库的网站。我想执行一个支持这个概念的动作。概念是：当有人注册我的网站时，我希望 PHP 自动为该用户创建个人资料 url。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:13:45.730

对的，这是可能的。您可以创建一个文件并使用以下内容写入它：

```
$profileFile = "profileFile.txt";
$fh = fopen($profileFile, 'w') or die("can't open file");
$strToWrite = "Bob Dole\n";
fwrite($fh, $strToWrite);
fclose($fh); 
```

您可以在[tizag](http://www.tizag.com/phpT/filewrite.php)或[php.net 上的 fopen阅读更多内容](http://www.php.net/manual/en/function.fopen.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:08:19.603

当然这是可能的。虽然，最好将记录保存在数据库中，并使用 profile.php 之类的文件，它会根据 ID 加载数据，而不是为每个用户创建一个文件。

编辑：更多细节。
程序流程如下所示：

1.  有一个人可以**注册**的页面。该页面将使用数据库保存发布的数据。
2.  数据库中的数据将如下所示：
    `ID | Name | Email`
    `1 | John | john@johnsite.com`等等。你明白了。
3.  将有一个 profile.php 文件，该文件将获得一个 ID，可能来自 URL。这是使用`$_GET`.
    一些代码可能如下所示：
    `$id = mysql_escape_string($_GET['id']);`
    `$resource = mysql_query('SELECT FROM the_table WHERE ID = "'.$id.'"')`
    `$profile = mysql_fetch_assoc($resource);`
    `print "<h1>".$profile['Name']."'s Page!</h1>";`

这将产生一个类似于 profile.php?id=1 的 URL
和一个显示
**约翰页面的页面！**

注意：在 URL 中写入 ID 时需要考虑很多事情。您可能想先将其加密为 md5，并使用 sql 函数 md5 进行选择。
您绝对应该避免为 -1、0 之类的 ID 打印任何内容，并且您应该尽量不要将 ID 用于打开文件路径等任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:08:34.063

绝对地。您可能想要通读[PHP 的文件系统函数](http://www.php.net/manual/en/ref.filesystem.php)。但是，您应该考虑使用数据库来完成这样的任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T15:08:21.150

可以使用函数 fopen 用 php 创建一个文件，但是，如果你想在你的网站中使用数据库，我建议使用某种 SQL 数据库（我个人推荐 MySQL），它更快、更可靠，并且易于管理。

# javascript - 如何根据我对对象内容的了解从数组中查找和删除对象？

> ID：15138847
> 
> 赞同：0
> 
> 时间：2013-02-28T15:06:05.000
> 
> 标签：javascript, arrays, object

对于以下内容：

```
var arr = [{ "packageId": "11", "machineId": "1", "operationType": "Download" }, { "packageId": "12", "machineId": "1", "operationType": "Download" }, { "packageId": "14", "machineId": "1", "operationType": "Download" }];
var index = arr.indexOf({ "packageId": "12", "machineId": "1", "operationType": "Download" });
console.log("index: " + index);
arr.splice(index, 1); 
```

我总是得到`-1`结果。这是为什么？

我需要能够从数组中删除一个对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:00:54.323

[请注意您问题的原始措辞：实际上您的问题中没有 JSON；JSON 指的是对象表示法。您在数组中拥有的和您的`indexOf()`调用是对象文字，由`{}`内部的可选属性表示。]

## 比较对象

问题是您在调用中创建的对象文字`indexOf()`本身就是一个新对象，因此不*等于*数组中的任何内容`arr`。相反，您必须遍历每个对象中的所有属性并检查它们的等价性。我现在快速编写了此函数，您可以在此答案底部的 JSFiddle 链接中对其进行测试。

```
function compareObjs(obj1, obj2) {
    var k,
        rtn = true; // assume objects are similar, and then attempts to falsify
    for (k in obj1) {
        if (obj1.hasOwnProperty(k) && obj2.hasOwnProperty(k)) { // check property belongs to both obj1 and obj2
            if (typeof obj1[k] === 'Object') {
                compareObjs(obj1, obj2); // recursive call, to compare two objects within the object
            } else {
                rtn = (obj1[k] === obj2[k]) ? rtn : false; // check value of property is equivalent; if not set the return value to false
            }
        } else {
            rtn = false;
        }
    }
} 
```

你给它两个对象，所以在你的问题中，这将是：

```
compareObjs(arr[1], { "packageId": "12", "machineId": "1", "operationType": "Download" }); 
```

这应该返回 true。如果这两个对象不等价，那么它将返回 false。

## 查找数组元素

我猜你会想用它来检查数组中特定包的位置，在这种情况下，你可能需要遍历你的数组，检查其中的每个对象是否相等，如下所示：

```
var i = 0, // Declare the variables upfront
    l = arr.length, // including the length of the array
    r = -1;  // and where you want your result, which will automatically be -1 until a match is found.
for (i; i < l; i += 1) {
    r = (compareObjs(arr[i], { "packageId": "12", "machineId": "1", "operationType": "Download" }) && r === -1) ? i : r;
} 
```

这里`r`应该为您提供找到等效对象的第一个位置。

## 删除相关数组元素

`r`然后，您可以使用以下`splice()`方法从数组中删除引用 的对象：

```
arr.splice(r, 1); 
```

你可能也想把这段代码放到一个函数中，但我不知道你程序其余部分的结构，所以让你去思考！

**[JSFiddle 在这里](http://jsfiddle.net/guypursey/er4Cr/)。**（您需要打开浏览器控制台才能查看结果。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:12:06.103

您正在创建的`{}`对象文字实际上是与 中的对象不同的对象`arr`，因此它们无法直接比较并且`indexOf`会失败。您必须使用良好的老式迭代：

```
arr.filter(function (elem) {
    return elem.packageId != 12
        || elem.machineId != 1
        || elem.operationType != 'Download';
}); 
```

如果需要，您当然也可以与对象进行比较。

```
var compareTo = {'packageId': '12'};
arr.filter(function (elem) {
    var matches = 0, elements = 0;
    for (var x in compareTo) {
        elements++;
        if (compareTo.hasOwnProperty(x) && elem.hasOwnProperty(x)
            && elem (x) == compareTo(x)
        ) {
            matches++;
        }
    }
    return matches == elements;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:52:57.843

我建议你另一种可能的解决方案。

如果您可以修改数据结构，请使用 Object 来存储数据，将其形状作为关联数组：

```
var assocArr = new Object();
assocArr["11"] = {"packageId": "11", "machineId": "1", "operationType": "Download"};
assocArr["12"] = { "packageId": "12", "machineId": "1", "operationType": "Download" };
assocArr["14"] = { "packageId": "14", "machineId": "1", "operationType": "Download" };

delete assocArr["11"]; 
```

优点：

*   直接数据访问
*   简单的插入和删除

您还可以安排一个课程来管理您的数据：

```
var AssocArray = function(){
  var collection = new Object();

  this.add = function(id, o){
    collection[id] = o;
  }

  this.remove = function(id){
    delete collection[id];
  }

  this.getById = function(id){
    return collection[id];
  }

  this.get = function(){
    return collection;
  }
}

var myAssoc = new AssocArray();
myAssoc.add("11",{"packageId": "11", "machineId": "1", "operationType": "Download"});
myAssoc.add("12",{ "packageId": "12", "machineId": "1", "operationType": "Download"});
myAssoc.add("14",{ "packageId": "14", "machineId": "1", "operationType": "Download"});

if(myAssoc.getById("10")) myAssoc.remove("10");
if(myAssoc.getById("14")) myAssoc.remove("14");

console.log(myAssoc.get()); 
```

# javascript - 在javascript中绘制文本字段实现

> ID：15138855
> 
> 赞同：2
> 
> 时间：2013-02-28T15:06:34.177
> 
> 标签：javascript, text, annotations, html5-canvas, mouseevent

是否可以在画布上的 javascript 中实现绘制文本功能？

一个文本按钮说“A”，点击这个就像在油漆中一样，应该能够在用户点击鼠标的任何地方在画布上绘制一个文本框。还应该能够输入文本初始化。也应该能够移动这个文本框画布上的任何地方。

任何建议/解决方案都是可观的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:03:53.013

这个基本框架应该可以帮助您入门。

此代码允许用户输入他们的文本。

然后他们点击画布，他们的文本被绘制在鼠标位置。

当然，您会希望从这里获取它来设计它以满足您的需求。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/7GHvj/](http://jsfiddle.net/m1erickson/7GHvj/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../excanvas.js"></script><![endif]-->

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var lastX;
    var lastY;
    var strokeColor="red";
    var strokeWidth=2;
    var canMouseX;
    var canMouseY;
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;

    function handleMouseDown(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#downlog").html("Down: "+ canMouseX + " / " + canMouseY);

      // Put your mousedown stuff here
      var text=document.getElementById("text").value;
      ctx.font = 'italic 20px sans-serif';
      ctx.fillText(text,canMouseX,canMouseY);
    }

    $("#canvas").mousedown(function(e){handleMouseDown(e);});

}); // end $(function(){});
</script>

</head>

<body>

    <p>Enter the text here first</p> 
    <input id="text" type="text" name="text" value="My Text."><br>
    <p>Then click on the canvas to draw the text.</p>
    <canvas id="canvas" width=576 height=307></canvas>

</body>
</html> 
```

# android - 无法在我的应用程序中获取 Facebook 页面的提要

> ID：15138860
> 
> 赞同：4
> 
> 时间：2013-02-28T15:06:50.443
> 
> 标签：android, facebook

我希望我的应用程序只显示 facebook 页面发布的帖子而无需任何身份验证。这是代码：

```
public class Main extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    try {
    String APP_ID = "1234567890";         
    String APP_SECRET = "1a2b3c4defghijk";
    String OWNER_OF_FEED = "somepage";

    HttpClient client = new DefaultHttpClient();
    HttpGet get = new HttpGet(
            "https://graph.facebook.com/oauth/access_token?client_id="+ 
            APP_ID + 
            "&client_secret="+APP_SECRET+"&grant_type=client_credentials");

    ResponseHandler<String> responseHandler = new BasicResponseHandler();

    String access_token = client.execute(get, responseHandler);

    String uri = "https://graph.facebook.com/" + OWNER_OF_FEED + "/feed?"
            + access_token;

    get = new HttpGet(uri);
    String responseBody = client.execute(get, responseHandler);

    // responseBody contains JSON-encoded feed

    //textview.setText(responseBody);
    TextView txtv = (TextView) findViewById(R.id.feed);
    txtv.setText(String.valueOf(responseBody)); 
    }

    catch (Exception ex) {
        ex.printStackTrace();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

但我无法在应用程序上获取任何内容。我已经在清单文件中包含了互联网访问权限。

新代码：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        URL url;
        try {
            url = new URL("https://www.facebook.com/feeds/page.php?format=rss20&id=289781571139242");

            HttpURLConnection urlConnection = (HttpURLConnection) url
                    .openConnection();

            InputStream in = urlConnection.getInputStream();

            InputStreamReader isw = new InputStreamReader(in);

            int data = isw.read();
            while (data != -1) {
                char current = (char) data;
                data = isw.read();
                System.out.print(current);
            }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-06T13:43:01.443

实际上有一种方法可以在未经用户许可的情况下获取页面公共提要！

**解决方案**

1.  获取页面 Facebook Profile Id：最简单的方法是查询 Graph API [http://graph.facebook.com/](http://graph.facebook.com/) {YourPageUsername} 。*例如对于 oStream Android 应用程序[https://graph.facebook.com/oStreamApp](https://graph.facebook.com/oStreamApp)将返回 Facebook 个人资料 ID 289781571139242*

2.  请求 Facebook 页面提要的 RSS：向[https://www.facebook.com/feeds/page.php?format=rss20&id=](https://www.facebook.com/feeds/page.php?format=rss20&id=) {yourAppId}发出 http 请求，*例如对于 oStream Android 应用程序公共[https://www。 facebook.com/feeds/page.php?format=rss20&id=289781571139242](https://www.facebook.com/feeds/page.php?format=rss20&id=289781571139242)*

Android**实现**将是：

1.  [向http://graph.facebook.com/](http://graph.facebook.com/) {YourPageUsername}发出 http 请求
2.  解析内容并获取 YourPageId
3.  [向https://www.facebook.com/feeds/page.php?format=rss20&id=](https://www.facebook.com/feeds/page.php?format=rss20&id=) {yourAppId}发出 http 请求
4.  解析内容
5.  根据需要显示内容

**旁注** 这个问题与Android无关，而与Facebook API有关。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-05T22:34:37.810

我已经使用访问令牌完成了它。facebook 开发人员中有一个工具“工具/访问令牌工具”您将获得一个名为“应用程序令牌”的访问令牌，您可以像这样使用它： [https ://graph.facebook.com/](https://graph.facebook.com/) *“您的 Facebook ID”* /feed? access_token= *"你的应用令牌"* ;

然后，您将获得提要的 json 对象，并且您将能够使用 JSON 解析方法做任何您想做的事情。

在有人更改密码或尝试在 Facebook 上的应用程序管理页面中获取另一个“应用程序秘密 ID”之前，您的应用程序令牌不会移动。享受！

# c# - 插入错误建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误

> ID：15138862
> 
> 赞同：1
> 
> 时间：2013-02-28T15:06:53.623
> 
> 标签：c#, asp.net, .net, c#-4.0

我在服务器上上传我的应用程序时出错，它在我的本地主机上运行良好。在服务器上进行任何输入时，我收到以下错误。

插入错误建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）。

并在我的本地主机上使用相同的连接字符串。我的连接字符串看起来像

```
 string connection = "Data Source=XXX.XXX.XXX.XXX; Initial Catalog=abcdefgh; Persist Security Info=True; User ID=ag_packers; Password=agpackers"; 
```

当我在本地主机中使用相同的连接字符串时，它可以正常工作，并且在服务器上会出现以下错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:27:23.137

一些要点供您检查

1.  使用[ping](http://pcsupport.about.com/od/commandlinereference/p/ping-command.htm) dos 命令检查您的数据库服务器名称/IP 地址是否可以从您的 Web 服务器访问。
2.  检查您的目标数据库是 a`Defaule SQL Server Instance`还是`Named instance`. 如果它是命名实例，请使用[此](https://stackoverflow.com/questions/1595073/sql-connection-string-to-named-instance)格式。
3.  使用服务器配置管理器为 SQL 服务器启用[命名管道/TCP IP 。](http://download.pro.parallels.com/10.3.1/docs/windows/Guides/pcpw_upgrade_guide/7351.htm)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:10:23.863

这可能有不同的原因，这里已经有 2 个：

*   数据源不正确，如果在同一台机器上试试：./SqlServerName
*   您的 SqlServer 服务未运行，请在 services.svc 中启用它

# android - 如何为三星 Galaxy Note 2 创建 Android AVD？

> ID：15138863
> 
> 赞同：16
> 
> 时间：2013-02-28T15:06:54.827
> 
> 标签：android, android-emulator, samsung-mobile

我想创建一个 AVD 来测试三星 Galaxy Note 2 上的应用程序。我检查了类似的问题，但它们适用于较旧的 AVD 版本。

我应该使用哪种设备？

我应该将目标设置为“Android 2.3.3 - API Level 10”吗？

![在此处输入图像描述](../Images/9ac92c367fb2a8268e033026c5c76893.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-04T21:56:23.157

我知道以下内容：

*   屏幕尺寸 5.55"
*   分辨率 720w x 1280h
*   密度 xhdpi
*   内存 2 GiB
*   硬件按钮*

其余的我只保留默认值：

*   传感器：加速度计、GPS、陀螺仪、接近传感器
*   摄像头：前置，后置
*   输入：无导航
*   尺寸：大
*   屏占比：长
*   按钮：软件
*   纵向：启用
*   设备状态：启用

*图片没有将“按钮”显示为硬件，但应该是。

![这是给你的一张照片。](../Images/4fad4e2b2daa6ef49eb180c9acb83a22.png)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T05:02:11.947

此链接肯定会帮助您使用 Galaxy Note 3 智能手机模拟器。

[http://developer.samsung.com/android/tools-sdks/Samsung-GALAXY-Tab-Emulator](http://developer.samsung.com/android/tools-sdks/Samsung-GALAXY-Tab-Emulator)

从此链接下载文件并按照简单的步骤操作。

希望这可以帮助某人......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:44:58.700

> 我应该使用哪种设备？

除非三星有一些您可以使用的可下载设备定义，否则您应该尽可能定义与 Note II 匹配的自己的设备。

> 我应该将目标设置为“Android 2.3.3 - API Level 10”吗？

仅当您出于某种原因将 Note II 降级到 Android 2.3.3 时。Note II 附带 Android 4.1 AFAIK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T05:12:33.087

我想再发布一个答案，尽管其他答案已经足够好了。

当我们正在寻找与真实设备兼容的模拟器时，有时模拟器无法按预期工作。我遇到过这样令人沮丧的问题，经过一番探索，我发现三星为此提供了一个重要的解决方案，即 RTL（远程测试实验室）它是免费的。

有关更多信息以及如何使用它，请查看三星[RTL 解决方案](http://developer.samsung.com/remotetestlab/rtlDeviceList.action)

希望这个对你有所帮助。

# javascript - 在表格中，选择 tr#myId 和下一个

> ID：15138866
> 
> 赞同：1
> 
> 时间：2013-02-28T15:06:57.520
> 
> 标签：javascript, jquery, jquery-selectors, next

如何将选择器放在一起以通过 id 选择一个 tr 和下一个？

至今：

```
var item = $('tr#CP') /*  Selects the item */

var nextitem = $('tr#CP').next('tr')  /* selects next*/ 
```

但我怎样才能选择两者？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T15:08:36.810

```
$("#CP").next('tr').addBack(); 
```

没有必要，因为无论如何 `tr#`只能有一个。将原始选择器“添加回”到集合中。`#CP`[`.addBack`](http://api.jquery.com/addBack/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T19:05:49.087

我们怎么没想到这个？

```
var bothitem = $('tr#CP,tr#CP + tr'); 
```

有趣的..

# c# - ServiceStack.Text 序列化循环引用

> ID：15138872
> 
> 赞同：3
> 
> 时间：2013-02-28T15:07:09.730
> 
> 标签：c#, json.net, servicestack, circular-reference

我需要像这样序列化一个对象图：

```
public class A
{
     public B Link1 {get;set;}
}

public class B
{
     public A Link2 {get;set;}
} 
```

这样 json 只会获得两个实例，但会再次正确反序列化。例如，使用元 ID 或类似的东西。

我知道在 Json.NET 中有一种方法，如此处所述：http: [//note.harajuku-tech.org/serializing-circular-references-with-jsonnet](http://note.harajuku-tech.org/serializing-circular-references-with-jsonnet) with meta ids。

`ServiceStack.Text`Json Serializer中是否有类似的功能？

否则，是否可以使用 Json.NET`ServiceStack`以及如何使用？

**编辑：**

为了清楚起见，我要求例如引用，而不仅仅是相同的类型。这方面的一个例子可能是：

```
[
    {
        "$id": "1",
        "BroId": 0,
        "Name": "John",
        "Bros": [
            {
                "$id": "2",
                "BroId": 0,
                "Name": "Jared",
                "Bros": [
                    {
                        "$ref": "1"
                    }
                ]
            }
        ]
    },
    {
        "$ref": "2"
    }
] 
```

只有 2 个对象“真正”序列化，其余对象使用`$ref`属性字段重用。考虑一个具有子项集合的对象模型。这些子项具有对其父对象的反向引用。EG 客户/订单。一个客户有多个订单，每个订单都有一个对其客户的引用。现在想想如果你序列化一个客户会发生什么。

```
Customer
 -> Order
  -> Customer
   -> Order
    -> ... 
```

并且您的结果与该站点的名称相似。;)

我真的很喜欢 ServiceStack 的清晰性，而不是需要`KnownTypeAttribute`s 等。

我很想保持它的干净，而不是在我的业务逻辑 pocos 中实现自定义加载器/对象初始化器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:19:47.123

我用另一种方式解决了这个问题。**这实际上是可行的，但是当使用具有多个循环引用的更复杂的数据结构时，它可能会在以后产生问题。**但目前没有必要。

我尝试向其中添加循环引用功能，`ServiceStack.Text`但没有发现从它开始的意义。也许mythz可以给我一个提示？该功能应该非常简单。

我需要该功能来序列化我的数据模型以完全支持`NHibernate`合并功能。

我遵循了神话的建议，只是忽略了`IgnoreDataMemberAttribute`导致循环引用的属性。但这也需要在再次反序列化后重建它们，以使合并功能正常工作。

**-> 这是解决方案，现在按照我的做法：**

我从一个简单的原型开始测试这个，一个数据模型

`Customer` **1->n** `Orders` **1->n** `OrderDetail`。

每个类都派生自实体类。

```
public class Customer : Entity
{
    public virtual string Name { get; set; }
    public virtual string City { get; set; }
    public virtual IList<Order> Orders { get; set; }
}

public class Order : Entity
{
    public virtual DateTime OrderDate { get; set; }
    public virtual IList<OrderDetail> OrderDetails { get; set; }
    [IgnoreDataMember]
    public virtual Customer Customer { get; set; }
}

public class OrderDetail : Entity
{
    public virtual string ProductName { get; set; }
    public virtual int Amount { get; set; }
    [IgnoreDataMember]
    public virtual Order Order{ get; set; }
} 
```

正如你所看到的，`Order`并且`OrderDetail`有一个对其父对象的反向引用，这在序列化时会导致循环引用。这可以通过忽略后向引用来解决`IgnoreDataMemberAttribute`。

我现在的假设是，其中的每个子实例`Order`inside`Customer`的 list 属性`Orders`都有一个对该`Customer`实例的反向引用。

所以这就是我重建圆形树的方式：

```
public static class SerializationExtensions
{
    public static void UpdateChildReferences(this object input)
    {
        var hashDictionary = new Dictionary<int, object>();
        hashDictionary.Add(input.GetHashCode(), input);

        var props = input.GetType().GetProperties();
        foreach (var propertyInfo in props)
        {
            if (propertyInfo.PropertyType.GetInterfaces()
                .Any(t => t.IsGenericType && t.GetGenericTypeDefinition() == typeof(IEnumerable<>)))
            {

                var instanceTypesInList = propertyInfo.PropertyType.GetGenericArguments();
                if(instanceTypesInList.Length != 1)
                    continue;

                if (instanceTypesInList[0].IsSubclassOf(typeof(Entity)))
                {
                    var list = (IList)propertyInfo.GetValue(input, null);
                    foreach (object t in list)
                    {
                        UpdateReferenceToParent(input, t);
                        UpdateChildReferences(t);
                    }
                }
            }
        }
    }

    private static void UpdateReferenceToParent(object parent, object item)
    {
        var props = item.GetType().GetProperties();
        var result = props.FirstOrDefault(x => x.PropertyType == parent.GetType());

        if (result != null)
            result.SetValue(item, parent, null);
    }
} 
```

此代码目前不适用于**1->1**实体引用（还不需要），但我认为它可以轻松扩展。

这现在允许我在客户端拥有一个 POCO 类模型，添加/更新/删除子对象并将整个树发送回服务器。`Nhibernate`足够聪明地确定哪个实体是新的/更新的/删除的。它也只更新更改的实体和更改的属性！如果订单被删除，它也会删除所有 OrderDetails。

这就是流畅的 nhibernate 映射的完整性：

```
public class CustomerMap : ClassMap<Customer>
{
    public CustomerMap()
    {
        Schema("YOURSCHEMA");
        Table("CUSTOMER");
        Id(x => x.Id, "ID").GeneratedBy.Assigned();
        Map(x => x.Name, "NAM");
        Map(x => x.City, "CITY");
        HasMany(x => x.Orders)
            .KeyColumn("CUSTOMER_ID")
            .Not.LazyLoad()
            .Inverse()
            .Cascade.AllDeleteOrphan();

        DynamicUpdate();
    }
}

public class OrderMap : ClassMap<Order>
{
    public OrderMap()
    {
        Schema("YOURSCHEMA");
        Table("CUSTOMER_ORDER");
        Id(x => x.Id, "ID").GeneratedBy.Assigned();
        Map(x => x.OrderDate, "ORDER_DATE");
        HasMany(x => x.OrderDetails)
            .KeyColumn("ORDER_ID")
            .Not.LazyLoad()
            .Inverse()
            .Cascade.AllDeleteOrphan();

        References<Customer>(x => x.Customer, "CUSTOMER_ID");
        DynamicUpdate();
    }
}

public class OrderDetailMap : ClassMap<OrderDetail>
{
    public OrderDetailMap()
    {
        Schema("YOURSCHEMA");
        Table("ORDER_DETAIL");
        Id(x => x.Id, "ID").GeneratedBy.Assigned();
        Map(x => x.ProductName, "PRODUCT_NAME");
        Map(x => x.Amount, "AMOUNT");

        References<Order>(x => x.Order, "ORDER_ID");
        DynamicUpdate();
    }
} 
```

DynamicUpdate() 用于让 nhibernate 只更新更改的属性。您现在只需要使用该`ISession.Merge(customer)`功能即可正确保存所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-03T15:46:21.833

如果有人需要能够用循环序列化对象图，JSON.NET 确实支持它：

```
new JsonSerializer
{
    PreserveReferencesHandling = PreserveReferencesHandling.Objects
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:20:24.780

ServiceStack 默认支持循环引用。

为什么不在发布之前先自己尝试一下以验证是否存在实际问题？与创建一个新问题并要求其他人做相比，这将花费更少的精力。

按照你的例子：

```
public class A
{
    public string Name { get; set; }
    public B Link1 { get; set; }
}

public class B
{
    public string Name { get; set; }
    public A Link2 { get; set; }
}

var dto = new A { 
   Name = "A1", 
   Link1 = new B { Name = "B1", Link2 = new A { Name = "A2" } } 
};
dto.ToJson().Print(); 
```

将打印 JSON 字符串：

```
{"Name":"A1","Link1":{"Name":"B1","Link2":{"Name":"A2"}}} 
```

同时将其序列化为 JSON 并再次反序列化，例如：

```
var fromJson = dto.ToJson().FromJson<A>();
fromJson.PrintDump(); 
```

将转储内容：

```
{
    Name: A1,
    Link1: 
    {
        Name: B1,
        Link2: 
        {
            Name: A2
        }
    }
} 
```

# css - 是否有内联条件注释之类的东西？

> ID：15138874
> 
> 赞同：1
> 
> 时间：2013-02-26T16:36:00.187
> 
> 标签：css, comments

我需要支持 IE7 及更高版本。仅在 IE7 中会出现一些页面样式问题，因此我制作了一个有条件的 IE7 样式表来解决大部分问题。

但是，编码器内嵌了一种样式，因此我的 IE7 样式表将无法覆盖内嵌样式（下面的第一行）。

```
<p style="display:inline-block; width:auto; margin:36px 0 0 16px !important;">
Download this postcard to help promote the Virtual Birth to Three (vBTT) Institute 
<span class="file_size">[PDF, 1MB]</span>.</p> 
```

我可以添加一个内联的 IE7 条件语句来更改边距样式吗？我试过了，评论在 p 元素中不起作用。这样写：

```
<!--[if IE 7]> 
```

我怀疑我根本做不到，但我想也许这里有人可能知道一个把戏。

如果没有技巧，是否每个人都同意我不能内联并且必须将 CSS 从元素中取出并放入外部样式表中才能进行更改？

非常感谢您的意见。我希望这是问的正确地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:57:51.673

你不能用任何数量的 CSS 覆盖内联样式，你应该能够用 javascript 来做到这一点，你可以使用条件加载一些 javascript 来为你进行这些更改，尽管这有点笨拙。

即使那样，它也可能无法在您使用`!important`规则时起作用，我不确定这种风格在 IE7 中的表现如何。

您最安全的选择是将相关的类名或 2 添加到标记中，并使用条件加载另一个样式表，以进行 IE7 所需的更改。

以下是包含 IE7 特定样式表的方法：

```
<!--[if IE 7]>
    <link href="ie7.css" type="text/css">
<[endif]--> 
```

# javascript - 画布没有存储带有背景图像的绘图

> ID：15138879
> 
> 赞同：0
> 
> 时间：2013-02-28T15:07:37.680
> 
> 标签：javascript, jquery, html, html5-canvas

我正在开发一种拍摄图像的工具，允许用户在其上绘图并保存。

工作原理：以图像为背景，在其上绘图

什么不起作用：保存整个画布..我只存储绘图而不是与图像一起绘制。

我经历了堆栈，但找不到适合我的解决方案。

```
<canvas id="drawtool" width="800" height="300" style="background:url(image/test.png) no-repeat center center"></canvas> 
```

而绘制图像的 JS 是

```
 var canvas = document.getElementById('drawtool');
var context = canvas.getContext('2d');
var imageObj = new Image();
imageObj.onload = function() {
      context.drawImage(this, 0, 0);
   }; 
```

编辑：我已经试过了

```
 var canvas = document.getElementById('drawtool');
 var context = canvas.getContext('2d');
 var imageObj = new Image();
 imageObj.src = "image/test.png"; 
 imageObj.onload = function() {
  context.drawImage(this, 0, 0);
}; 
```

但是它在画布上显示了一段时间的图像，当我单击画布进行绘制时，图像消失了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:33:06.677

这是在图像上绘图的方法。

我将图像的不透明度设置为较低，以便您可以更好地看到用户的绘图。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/6eYEz/](http://jsfiddle.net/m1erickson/6eYEz/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../excanvas.js"></script><![endif]-->

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var lastX;
    var lastY;
    var strokeColor="red";
    var strokeWidth=2;
    var canMouseX;
    var canMouseY;
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;
    var isMouseDown=false;
    var imageObj=new Image();
    imageObj.onload=function(){
        ctx.save();
        ctx.globalAlpha=.3;
        ctx.drawImage(this,0,0,canvas.width,canvas.height);
        ctx.restore();
    }
    imageObj.src="http://www.proquestk12.com/widgets/images/WorldRegion_worldmap.gif";

    function handleMouseDown(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mousedown stuff here
      lastX=canMouseX;
      lastY=canMouseY;
      isMouseDown=true;
    }

    function handleMouseUp(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mouseup stuff here
      isMouseDown=false;
    }

    function handleMouseOut(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mouseOut stuff here
      isMouseDown=false;
    }

    function handleMouseMove(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mousemove stuff here
      if(isMouseDown){
          ctx.beginPath();
          ctx.lineWidth=5;
          ctx.strokeStyle="#FF0000";
          ctx.moveTo(lastX,lastY);
          ctx.lineTo(canMouseX,canMouseY);
          ctx.stroke();     
          lastX=canMouseX;
          lastY=canMouseY;
      }
    }

    $("#canvas").mousedown(function(e){handleMouseDown(e);});
    $("#canvas").mousemove(function(e){handleMouseMove(e);});
    $("#canvas").mouseup(function(e){handleMouseUp(e);});
    $("#canvas").mouseout(function(e){handleMouseOut(e);});

}); // end $(function(){});
</script>

</head>

<body>

    <canvas id="canvas" width=576 height=307></canvas>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:09:45.937

您不需要背景图像，您只需将 imageObj 的 src 设置为该文件即可。它看起来像这样（在你声明和定义 imageObj 之后）：

```
imageObj.src="image/test.png"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:15:32.923

```
<canvas id="drawtool" width="800" height="300" ></canvas> 
```

JS：

```
var canvas = document.getElementById('drawtool');
var context = canvas.getContext('2d');
var imageObj = new Image();
imageObj.src="image/test.png";
imageObj.onload = function() {
      context.drawImage(this, 0, 0,canvas.width, canvas.height);
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T15:19:35.760

您的图像没有 src 属性。此外，通过 CSS 为画布提供背景图像是无用且具有误导性的，因为图像实际上并不在画布上，这就是为什么您没有找到错误的原因 :)

```
var canvas = document.getElementById('drawtool');
var context = canvas.getContext('2d');
var imageObj = new Image();
imageObj.src = "image/test.png";
imageObj.onload = function() {
  context.drawImage(this, 0, 0);
}; 
```

# iphone - 启动映像未在已安装的 ios webapp 上更新

> ID：15138882
> 
> 赞同：0
> 
> 时间：2013-02-28T15:07:41.643
> 
> 标签：iphone, ios, web-applications, ios6

我的设备上安装了我的网络应用程序，可以更新应用程序更改缓存.manifest，除了启动图像之外的所有内容都发生了变化，当应用程序已经安装时无法更新此图像？

我知道新图像有效，因为当我“安装”（添加到主屏幕）一个新的 webapp 实例时，它具有更新的图像！

仅在 iOS 6.1 / iPhone 5 上测试

**更新：**

```
<link rel="apple-touch-startup-image" href="images/img_splash.jpg" />
<link rel="apple-touch-startup-image" href="images/img_splash.jpg" media="screen and (max-device-width: 320px)" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:16:24.057

要强制更新，您还可以更改启动映像文件名。

强制更新步骤：

1.  使用新名称将新的启动图像放在 Web 服务器上
2.  更新 HTML5 页面或 javascript 文件以引用新名称
3.  使用新名称更新 cache.manifest
4.  利润...

# mysql - MySQL中用户的元表？

> ID：15138884
> 
> 赞同：2
> 
> 时间：2013-02-28T15:07:46.673
> 
> 标签：mysql

我已经创建了数十个用户登录系统，并且总是在表的末尾添加选项、标志、设置等，所以它非常大......

*   用户身份
*   用户名
*   用户姓氏
*   用户电子邮件

这只是开始。然而，对于其他类型的表格，我使用基于元的系统，我`JOIN`在表格中添加了一些 id `some_meta`，这总是有几个好处。这样做对用户也有好处吗？所以主`users`表只包含 id、基本用户详细信息，然后是另一个用于偏好等的元表？这种事情的*最佳做法是什么？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:42:00.837

这真的取决于你的目标是什么。如果所有用户元数据都具有相同的[superkey](http://en.wikipedia.org/wiki/Superkey)，（`user_id`最有可能）我会将所有“元数据”保留在一个表中。将其分离到另一张桌子没有任何好处。

但是，如果客户的元数据要求可以变化和扩展/收缩，那么拥有*三个*表可能是有益的：一张用于用户，一张用于元数据列，一张用于用户的元数据：

```
(user_id, user_email)
(meta_id, meta_column_name)
(user_id, meta_id, user_meta_value) 
```

这样做的好处是允许您动态添加和删除元数据值，并且它也不需要所有客户都具有所有相同的元数据列。

# php - 如何使用 cookie 为用户标记新内容

> ID：15138886
> 
> 赞同：0
> 
> 时间：2013-02-28T15:07:48.313
> 
> 标签：php, http, cookies

我正在尝试为我的用户尚未看到的内容显示 [NEW] 标记。

可悲的是，大多数用户都是客人，我不希望在数据库中写入每个 IP 并存储上次访问时间。

所以我想我可以用 cookie 完成这个，这是我写的帽子：

```
if ($_SERVER['SCRIPT_NAME'] == "/index.php" || $_SERVER['SCRIPT_NAME'] == "/browse.php"){
if (!$CURUSER)
setcookie("lastbrowse", time(), time()+3600*24);
} 
```

好吧，为了让这个例子更容易，我剪掉了一些部分，但这是对客人有用的部分。

Cookie 设置得很好，我得到了 cookie 中的时间戳。

在我做检查后：

```
if (strtotime($row["added"]) > $_COOKIE["lastbrowse"])
$new = " <span style='color:#002F4E;font-weight:bold'>[NEW]</span>"; 
```

因此，如果在上次访问后添加新闻，用户会在标题旁看到 [NEW] 标签。

问题是我不知道每次用户刷新页面时我都不能更新 cookie，我只能在过期后设置一个新的 cookie。

我怎样才能完成 [NEW] 标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:49:46.803

正如@Sleavely 提到的，您可以更新 cookie，因此我的代码可以正常工作，并且对需要类似内容的每个人都有好处！

# asp.net - 在 ASP.NET TreeView 中的每个节点旁边添加按钮

> ID：15138887
> 
> 赞同：1
> 
> 时间：2013-02-28T15:07:49.237
> 
> 标签：asp.net, treeview, asp.net-1.1

我正在构建一个界面，它需要在 ASP.NET 1.1 中的每个树节点旁边有两个服务器端按钮。

![在此处输入图像描述](../Images/42221769cabf1fe46cf9aebd3d3edc0d.png)

请让我知道，如何在 asp.net 树视图控件中集成两个服务器端按钮。

提前致谢。

# asp.net-mvc-4 - MVC 4 中的自定义授权和角色不起作用

> ID：15138888
> 
> 赞同：3
> 
> 时间：2013-02-28T15:07:49.857
> 
> 标签：asp.net-mvc-4, authorization, forms-authentication, roles

我需要在应该调用 Com+ 组件以验证用户身份并提供角色的位置上实现单点登录。简而言之，我需要绕过 MVC 4 中尝试访问 aspnetdb 数据库的默认机制。所以我从一个新的 MVC4 互联网项目开始，并添加了以下代码。

**在 Global.asax**

```
public void FormsAuthentication_OnAuthenticate(object sender, FormsAuthenticationEventArgs args)
    {
        bool retval = CreateUserObject("John", "pwd");
    }

private bool CreateUserObject(string userName, string password)
    {
        string[] currentUserRoles = { "Admin", "User" };
        GenericPrincipal userPrincipal = new GenericPrincipal(new GenericIdentity(userName), currentUserRoles);
        HttpContext.Current.User = userPrincipal;
        //Thread.CurrentPrincipal = userPrincipal;
        return true;
     } 
```

在 HomeController.cs 中，我为“关于”操作添加了 [Authorize] 属性，如下所示，它按预期工作

```
[Authorize]
public ActionResult About() 
```

但是，如果我修改 [Authorize] 属性以仅允许“管理员”角色，如下所示，我会收到运行时错误（在底部）。有没有办法为登录用户使用我自己的角色集合，而不是查询数据库？我还需要做一些类似于用户配置文件的事情（即，我应该填充来自 Com+ 应用程序的值，而不是数据库。

```
[Authorize(Roles = "Admin")]
public ActionResult About() 
```

**“/”应用程序中的服务器错误。**

**建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T22:04:05.213

也许您需要创建一个自定义 RoleProvider，如下所示：

```
namespace DemoApp.Providers
{
    public class MyCustomRoleProvider : System.Web.Security.SqlRoleProvider
    {
        public override string[] GetRolesForUser(string username)
        {
            string[] currentUserRoles = { "Admin", "User" };
            return currentUserRoles;
        }
    }
} 
```

并在应用程序的 web.config 中，更改默认角色提供者：

```
<system.web>
    <roleManager enabled="true" defaultProvider="DefaultRoleProvider">
        <providers>
            <add name="DefaultRoleProvider" type="DemoApp.Providers.MyCustomRoleProvider, DemoApp"/>
        </providers>
    </roleManager>
<system.web> 
```

# mysql - 修复由于在文本编辑器中编辑 MySQL 数据库而损坏的序列化数据？

> ID：15138893
> 
> 赞同：17
> 
> 时间：2013-02-28T15:08:05.150
> 
> 标签：mysql, wordpress, mysqldump, mariadb

**背景：**我下载了我的 WordPress 站点数据库的**.sql*备份，并将旧数据库表前缀的所有实例替换为一个新实例（例如，从默认`wp_`到类似`asdfghjkl_`）。

我刚刚了解到 WordPress 在数据库中使用了序列化的 PHP 字符串，而我所做的将会破坏序列化字符串长度的完整性。

问题是，我在得知这一点之前删除了备份文件（因为我的网站仍然运行良好），并从那时起安装了许多插件。因此，我无法恢复原状，因此我想知道两件事：

1.  如果可能的话，我该如何解决这个问题？

2.  这会导致什么样的问题？

（[这篇文章](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)指出，例如 WordPress 博客，可能会丢失其设置和小部件。但这似乎并没有发生在我身上，因为我博客的所有设置仍然完好无损。但我不知道有什么可能在内部被打破，或者它在未来会带来什么问题。因此这个问题。）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-28T15:34:36.377

访问此页面：[http ://unserialize.onlinephpfunctions.com/](http://unserialize.onlinephpfunctions.com/)

在该页面上，您应该看到这个示例序列化字符串：`a:1:{s:4:"Test";s:17:"unserialize here!";}`。拿一块—— `s:4:"Test";`。这意味着“字符串”，4 个字符，然后是实际的字符串。我很确定您所做的事情导致数字字符计数与字符串不同步。使用上述网站上的工具，例如，如果将“Test”更改为“Tes”，您会看到出现错误。

您需要做的是让这些字符数与您的新字符串匹配。如果您没有损坏任何其他编码（删除冒号或其他内容），那应该可以解决问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-22T18:56:26.260

在尝试将域从 localhost 更改为真实 URL 后，我遇到了同样的问题。经过一番搜索，我在 Wordpress 文档中找到了答案：

[https://codex.wordpress.org/Moving_WordPress](https://codex.wordpress.org/Moving_WordPress)

我将引用那里写的内容：

> 为避免该序列化问题，您有以下三种选择：
> 
> *   如果可以 > 访问您的仪表板，请使用 Better Search Replace 或 Velvet Blues Update URLs 插件。
> *   如果您的托管服务提供商（或您）已安装 WP-CLI，请使用 WP-CLI 的搜索替换。
> *   在您的数据库上手动运行搜索和替换查询。注意：仅对 wp_posts 表执行搜索和替换。

我最终使用了 WP-CLI，它能够在不破坏序列化的情况下替换数据库中的内容： [http ://wp-cli.org/commands/search-replace/](http://wp-cli.org/commands/search-replace/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-03T03:19:33.410

我知道这是一个老问题，但我想迟到总比没有好。我最近遇到了这个问题，在继承了一个对序列化数据执行了查找/替换的数据库之后。经过几个小时的研究，我发现这是因为字符串计数关闭了。不幸的是，有很多数据有很多转义和换行符，在某些情况下我不知道如何计算，而且我有很多数据，我需要一些自动化的东西。

一路上，我偶然发现了这个问题，Benubird 的帖子帮助我走上了正确的道路。他的示例代码不适用于复杂数据的生产使用，包含大量特殊字符和 HTML，嵌套非常深，并且不能正确处理某些转义字符和编码。因此，我对其进行了一些修改，并花费了无数个小时来解决其他错误，以使我的版本“修复”序列化数据。

```
// do some DB query here
while($res = db_fetch($qry)){
    $str = $res->data;
    $sCount=1; // don't try to count manually, which can be inaccurate; let serialize do its thing
    $newstring = unserialize($str);
    if(!$newstring) {
        preg_match_all('/s:([0-9]+):"(.*?)"(?=;)/su',$str,$m);
#           preg_match_all("/s:([0-9]+):(\"[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*\")(?=;)/u",$str,$m); // alternate: almost works but leave quotes in $m[2] output
#           print_r($m); exit;
        foreach($m[1] as $k => $len) {
            /*** Possibly specific to my case: Spyropress Builder in WordPress ***/
            $m_clean = str_replace('\"','"',$m[2][$k]); // convert escaped double quotes so that HTML will render properly
            // if newline is present, it will output directly in the HTML
            // nl2br won't work here (must find literally; not with double quotes!)
            $m_clean = str_replace('\n', '<br />', $m_clean); 
            $m_clean = nl2br($m_clean);  // but we DO need to convert actual newlines also
            /*********************************************************************/
            if($sCount){
                $m_new = $m[0][$k].';'; // we must account for the missing semi-colon not captured in regex!
                // NOTE: If we don't flush the buffers, things like <img src="http://whatever" can be replaced with <img src="//whatever" and break the serialize count!!!                  
                ob_end_flush(); // not sure why this is necessary but cost me 5 hours!!
                $m_ser = serialize($m_clean);
                if($m_new != $m_ser) {
                    print "Replacing: $m_new\n";
                    print "With: $m_ser\n";
                    $str = str_replace($m_new, $m_ser, $str);
                }
            }
            else{
                $m_len = (strlen($m[2][$k]) - substr_count($m[2][$k],'\n'));
                if($len != $m_len) {
                    $newstr='s:'.$m_len.':"'.$m[2][$k].'"';
                    echo "Replacing: {$m[0][$k]}\n";
                    echo "With: $newstr\n\n";
                    $str = str_replace($m_new, $newstr, $str);
                }
            }
        }
        print_r($str); // this is your FIXED serialized data!! Yay!
    }
} 
```

关于我的更改的一些令人讨厌的解释：

*   我发现尝试以 Benubird 的代码为基础进行计数对于大型数据集来说太不准确了，所以我最终只使用序列化来确保计数是准确的。
*   我避免了 try/catch，因为在我的情况下，try 会成功，但只是返回一个空字符串。因此，我改为检查空数据。
*   我尝试了许多正则表达式，但只有 Benubird 上的一个 mod 可以准确处理所有情况。具体来说，我必须修改检查“;”的部分 因为它会在 CSS 上匹配，例如 "width:100%; height:25px;" 并打破了输出。所以，我使用了积极的前瞻来匹配“;” 在双引号集之外。
*   我的案例有很多换行符、HTML 和转义的双引号，所以我必须添加一个块来清理它们。
*   有一些奇怪的情况，数据会被正则表达式错误地替换，然后序列化也会错误地计算它。我在任何网站上都找不到任何帮助解决此问题的方法，最后认为它可能与缓存或类似的东西有关，并尝试刷新输出缓冲区（ob_end_flush（）），这很有效，谢天谢地！

希望这对某人有所帮助...花了我将近 20 个小时，包括研究和处理奇怪的问题！:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-08T02:10:25.190

此脚本 ( [https://interconnectit.com/products/search-and-replace-for-wordpress-databases/](https://interconnectit.com/products/search-and-replace-for-wordpress-databases/) ) 可以帮助在任何地方使用适当的 URL 更新 sql 数据库，而不会遇到序列化数据问题，因为它将更新“字符数”，这可能会在出现序列化数据时使您的 URL 不同步。

步骤是：

1.  如果您已经导入了一个混乱的数据库（小部件不工作，主题选项不存在等），只需使用 PhpMyAdmin 删除该数据库。也就是说，删除上面的所有内容。然后导出并获得旧数据库的未经编辑的转储。

2.  现在您必须将（未编辑的）旧数据库导入新创建的数据库。您可以通过导入或从 PhpMyAdmin 复制数据库来执行此操作。请注意，到目前为止，我们还没有进行任何搜索和替换；我们只是将旧的数据库内容和结构放入具有自己的用户和密码的新数据库中。此时您的网站可能无法访问。

3.  确保您已将 WordPress 文件新上传到服务器上的正确文件夹，并编辑您的 wp-config.php 以使其与新数据库连接。
4.  将脚本上传到与 wp-admin、wp-content 和 wp-includes 相同级别的“秘密”文件夹中 - 只是出于安全原因。一旦发生搜索和替换，不要忘记将其全部删除，因为您可能会将您的数据库详细信息提供给整个互联网。
5.  现在将您的浏览器指向秘密文件夹，并使用脚本的精细界面。这是非常不言自明的。使用后，我们将继续将其从服务器中完全删除。

这应该可以正确更新您的数据库，而不会出现任何序列化数据问题：新的 URL 将在任何地方设置，并且序列化数据字符数将相应更新。

小部件和主题设置将被传递——这是 WordPress 中使用序列化数据的两个典型位置。

完成并经过测试的解决方案！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-04T09:30:13.823

如果错误是由于字符串的长度不正确（我经常看到的），那么您应该能够调整此脚本来修复它：

```
foreach($strings as $key => $str)
{
    try {
        unserialize($str);
    } catch(exception $e) {
        preg_match_all('#s:([0-9]+):"([^;]+)"#',$str,$m);
        foreach($m[1] as $k => $len) {
            if($len != strlen($m[2][$k])) {
                $newstr='s:'.strlen($m[2][$k]).':"'.$m[2][$k].'"';
                echo "len mismatch: {$m[0][$k]}\n";
                echo "should be:    $newstr\n\n";
                $strings[$key] = str_replace($m[0][$k], $newstr, $str);
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-13T23:14:43.950

我个人不喜欢在 PHP 中工作，也不喜欢将我的数据库凭据放在公共文件中。我创建了一个 ruby​​ 脚本来修复可以在本地运行的序列化：

[https://github.com/wsizoo/wordpress-fix-serialization](https://github.com/wsizoo/wordpress-fix-serialization)

上下文编辑：我通过首先通过正则表达式识别序列化，然后重新计算所包含数据字符串的字节大小来解决序列化问题。

```
$content_to_fix.gsub!(/s:([0-9]+):\"((.|\n)*?)\";/) {"s:#{$2.bytesize}:\"#{$2}\";"} 
```

然后我通过转义的 sql 更新查询更新指定的数据。

```
escaped_fix_content = client.escape($fixed_content)

query = client.query("UPDATE #{$table} SET #{$column} = '#{escaped_fix_content}' WHERE #{$column_identifier} LIKE '#{$column_identifier_value}'") 
```

# php - 我们是否需要有持久对象才能在 php 中实现单例模式

> ID：15138894
> 
> 赞同：1
> 
> 时间：2013-02-28T15:08:05.567
> 
> 标签：php, design-patterns, object, singleton, persistent

我在 classes/database.php 中有单例数据库类，如[php 中的单例模式中](https://stackoverflow.com/questions/7968154/singleton-pattern-in-php)所述，我正在使用 Database::getInstance() 方法在 users.php 中创建数据库对象，然后我在 accounts.php 中调用相同的静态方法(Database::getInstance())，这里我得到的是新实例，而不是我在 users.php 中创建的实例。我是设计模式的新手，有点困惑。

我的问题是

1.  我们是否需要持久化对象才能在 php 中实现单例模式？
2.  如果不是，那么我们在整个应用程序中保留单个实例的所有方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:17:02.750

桌面应用程序通常使用持久的单个数据库连接。但是，在 PHP 和大多数其他 Web 语言/框架中，情况并非如此。您对每个页面加载使用一个短期连接，而不是单个长期连接。与其将您的应用程序视为一个整体，不如考虑每个页面加载的过程。在 PHP 中，除非您将数据保存在数据库或 $_SESSION 或其他地方，否则其他页面加载不会知道另一个页面。

PHP 中的单例模式是整个页面加载过程中的单例模式之一。虽然最初它可能看起来像“有什么意义？它只是一个页面加载”，但当您使用更大的应用程序时，很明显每个页面加载都不是一个无关紧要的操作。在像 Drupal 这样的系统中，每次页面加载都可以有 10 到 100 个数据库查询

哦，单例模式被认为是**不好的做法**，稍后会咬你。事实上，在您的所有应用程序中都应该避免使用它。更好的模式应该是 DAO 模式或工厂模式。请保存自己，不要使用单例（我犯了很多次这个错误）。

至于在页面加载之间持久化对象（这对几乎所有应用程序来说都是非常必要的），这就是您的数据库和 $_SESSION 变量的用途。您还可以使用其他缓存选项，例如 APC ( [http://php.net/manual/en/book.apc.php](http://php.net/manual/en/book.apc.php)）。您的应用程序应该能够根据在数据库中找到的任何内容重新构建它需要的内容。例如，创建了一个用户。您将该用户的数据持久保存到数据库中。每当有人出现并想了解用户时，它会将其从数据库中拉出以重新创建您的用户对象。另一个例子是用户登录。您希望他们保持登录状态，因此您将某种变量持久保存到 $_SESSION，该变量在每次页面加载时检查以查看他们是否已登录以及他们以谁登录。您进行一些检查，然后加载他们说他们从您的数据库登录的用户。

# iphone - 正确存储应用内购买

> ID：15138896
> 
> 赞同：7
> 
> 时间：2013-02-28T15:08:17.300
> 
> 标签：iphone, ios, objective-c, in-app-purchase, nsuserdefaults

是否有任何建议如何存储应用内购买结果。

我使用 [raywenderlich 教程进行购买](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

它将结果存储到`NSUserDefaults`.

*所以问题*是：将应用内结果存储为布尔值是否安全`NSUserDefaults`。因为每个人都可以在`Library/Preferences`文件夹中查看并查看那里写的内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T15:13:35.693

是的，这应该没问题，但这可能取决于应用程序。大多数“普通”用户不会在您的 Library/Preferences 文件中四处寻找。因此，如果您正在为主流受众（平均到低技术知识）编写应用程序，NSUserDefaults 是一个安全的地方。您还必须考虑人们的时间价值。如果您的应用程序花费 99 美分，那么购买它可能比破解一些 prefs 文件更快。如果您的应用程序售价 99 美元，那么就会有一些人去寻找黑客。

因此，如果您正在编写一个超级昂贵的应用程序，或者一个面向黑客/开发人员受众的应用程序，您可能希望将您的结果存储在钥匙串或更安全的东西中。

我个人使用了一个存储在 NSUserDefaults 中的简单“hasUpgraded”BOOL，从来没有遇到过问题。

# ubuntu - 如何将 qtWebKit 模块添加到 qt creator？

> ID：15138901
> 
> 赞同：3
> 
> 时间：2013-02-28T15:08:24.110
> 
> 标签：ubuntu, qml, qt5

我正在开发一个 ubuntu 触摸应用程序，我需要包含 qtwebkit 模块。我对此有点陌生，我不知道在哪里可以找到和安装模块。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T03:44:49.260

您将需要一些 Debian/Ubuntu 软件包：

`sudo apt-get install libqt5webkit5 libqt5webkit5-dev libqt5webkit5-qmlwebkitplugin`

对于某些模块，有时很难找到这些包。只需使用 `apt-cache search 'package'" 或 Synaptic Package Manager 并输入 qt 以及模块的名称（例如“qtwebkit”）。

这是包含该模块的示例：

```
import QtQuick 2.0
import QtWebKit 3.0

Page {
    WebView {
        id: webview
        url: "http://qt-project.org"
        width: parent.width
        height: parent.height
        onNavigationRequested: {
            // detect URL scheme prefix, most likely an external link
            var schemaRE = /^\w+:/;
            if (schemaRE.test(request.url)) {
                request.action = WebView.AcceptRequest;
            } else {
                request.action = WebView.IgnoreRequest;
                // delegate request.url here
            }
        }
    }
} 
```

# javascript - 无法将 Javascript 数组转换为 JQuery 以实现 IE7 兼容性

> ID：15138906
> 
> 赞同：0
> 
> 时间：2013-02-28T15:08:31.557
> 
> 标签：javascript, jquery, internet-explorer, cross-browser

我正在尝试在 Javascript 中转换一行，以便该功能在 IE7 中工作。下面是我要转换的代码。显然 IE 不喜欢设置问题所在的类属性。所以我的解决方案是使用 JQuery 翻译它以实现浏览器兼容性。但是我无法将数组转换为 JQuery 可以理解的东西。

这是代码：

```
 ulAccNm.children[iVal].setAttribute("class", "show"); 
```

我尝试了以下方法，但它不能正常工作。

```
 $(ulAccNm).children(jQuery.inArray("iVal")).addClass('show').removeClass('hide'); 
```

iVal 的变量转换为父级的子级总数，并遍历每个子级以确定是否添加一个类。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:14:07.727

我在这里猜了很多，但我认为这将转化为：

```
$($(ulAccNm).children()[iVal]).addClass('show').removeClass('hide'); 
```

但是，如果您想对所有孩子执行此操作，则不需要使用`iVal`. 只需使用

```
$(ulAccNm).children().addClass('show').removeClass('hide'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:15:12.247

您可能只想尝试将循环结构从 for 循环更改为 jQuery.each 方法：

```
$(ulAccNm).children().each(function () {
    // Decide if the class needs to be changed
    if (needsToBeChanged)
        $(this).addClass('show').removeClass('hide');
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:20:17.953

最终通过使用 Kevin B 对 .children().eq(ival) 的建议进行修复，这使它起作用

# c# - 实时监控和阻止网络请求

> ID：15138907
> 
> 赞同：1
> 
> 时间：2013-02-28T15:08:32.187
> 
> 标签：c#, sockets, networkstream, sniffer

我计划创建一个免费的开源色情拦截软件，尽可能地阻止色情网站。

这个想法是创建一个网站列表，如 xxxporn.xxx 或其他任何网站，一旦用户在任何时候尝试在任何网络浏览器中访问该网站，它只会终止请求，用户无处可去。

我擅长编程，我的问题不在于代码我只想知道我应该从哪里开始？

我听说过数据包嗅探器，那么我如何在 C# 中做到这一点？我想要的只是一个演示方法或代码示例，它向我显示当前访问的网站并在访问预定义的网站时终止请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:32:04.033

我写了一个网络爬虫，不得不处理在免费爬虫中过滤掉色情内容。

查找以下条款： 18 USC 2257 18 USC 2257 第 2257 节合规性

大多数色情网站的 html 源代码中都有这些术语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:36:08.737

这不是对您要求的回答，而只是对这个主题的看法。

色情不是在您浏览常规网站时弹出的东西。比如这个……色情是你需要寻找的东西。

如果您有小孩并且您不希望他们接触到不受您控制的事物，您可以使用 Windows 防火墙简单地定义他们的所有冲浪目的地。

如果您有较大的孩子，并且您担心他们可能会因为年龄或荷尔蒙冲动而在寻找色情内容时感到疑惑，或者只是通过浏览各种可疑和盗版网站而暴露，您应该与他们交谈并解释事情以成熟的方式，而不是试图以这种中世纪的方式阻止生活的现实。

在这个互联网支配着我们生活的方方面面的现代时代，网络空间存在比色情更大的风险，适当的培训和教育关于冲浪时的好坏是让孩子们免受所有风险和有害内容的关键.

我很抱歉这与编程无关。

# f# - 在没有 for 循环的情况下将超前和滞后添加到序列中

> ID：15138913
> 
> 赞同：0
> 
> 时间：2013-02-28T15:08:55.387
> 
> 标签：f#

除了编写一个产生值的循环之外，是否有一种简单/干净的函数式方法可以在序列中创建滞后（前一个值）。

例如。如果我的序列是`1 2 3 4 5 6 7 8 9 10`并且我的滞后是`1`返回一个元组

```
(Some(1), None), (Some(2), Some(1)), (Some(3), Some(2))...(Some(10), Some(9)) 
```

一个滞后`2`会给`(Some(1), None), (Some(2), None), (Some(3), Some(1))...`

使用循环显然很容易编写此代码，但这是正确的方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:40:23.617

一种方法是使用 Seq 模块中的函数：

```
let lag n sequence =
    sequence
    |> Seq.map Some
    |> Seq.append (Seq.init n (fun _ -> None))
    |> Seq.zip sequence

lag 2 [1..5] |> Seq.toList
> [(1, null); (2, null); (3, Some 1); (4, Some 2); (5, Some 3)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:39:53.990

petebu 的答案（一旦纠正了一些错误）是一个更好的答案。但无论如何我都会把它留在这里。

```
let withLag n (source: seq<_>) =
  source
    |> Seq.windowed n
    |> Seq.append (Seq.init n (fun _ -> [||]))
    |> Seq.zip source
    |> Seq.map (fun (x, arr) ->
      let laggedValue = if arr.Length > 0 then Some arr.[0] else None
      (x, laggedValue))

let l = List.init 5 id
l |> withLag 2 |> Seq.toList |> printfn "%A"

> [(0, null); (1, null); (2, Some 0); (3, Some 1); (4, Some 2)] 
```

# excel - 计算名称以特定文本开头的工作表的数量

> ID：15138915
> 
> 赞同：1
> 
> 时间：2013-02-28T15:09:00.910
> 
> 标签：excel, vba

我正在尝试计算名称相似的工作表的数量（例如所有以“East”开头的）。

这是我用来计算床单的代码：

```
Dim wb As Workbook
Dim ws As Worksheet
Dim myTotal As Long
Dim wsTotal As Long

For Each wb In Workbooks
    For Each ws In Worksheets
        If ws.Name Like "20 Out of Court" & "*" Then myTotal = myTotal + 1
    Next ws
Next wb
wsTotal = myTotal 
```

有时它会使某些机器上的工作表总数翻倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:19:09.367

试试下面的代码：

```
Sub sample()

    Dim wb As Workbook
    Dim ws As Worksheet
    Dim myTotal As Long
    Dim wsTotal As Long

    For Each wb In Workbooks
        For Each ws In Worksheets
            Debug.Print ws.Name
            If InStr(1,left(ws.Name,4), "East", vbTextCompare) > 0 Then ' will check for start with "East"..
                myTotal = myTotal + 1
            End If
        Next ws
    Next wb
    wsTotal = myTotal
End Sub 
```

# javascript - 从 JavaScript 引用控制器动作

> ID：15138916
> 
> 赞同：2
> 
> 时间：2013-02-28T15:09:02.767
> 
> 标签：javascript, ajax, asp.net-mvc, jquery

我有返回 JSON 数据的 ASP.NET MVC 操作。我的客户端使用 jQuery 的`ajax`函数来检索这些数据并将其显示在屏幕上。我在 JavaScript 中使用控制器操作的绝对路径：

```
$.ajax({
    url: '/Home/Load',
    type: 'post',
    dataType: 'json'
}) 
```

问题是在某些环境中，我们会在前面多加一个虚拟目录，所以 URL 实际上是`/Path/To/App/Home/Load`. 我想知道是否有一种方法可以编写我的 JavaScript，以便每次部署时都不需要更新它。我可以使用相对 URL，例如`../Home/Index`，但偶尔我会移动我的 JavaScript 代码。使用 MVC 的捆绑器时，事情也会变得更加棘手。如果`~`角色能工作就好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:16:12.030

这是我的做法：

在主视图中添加以下行（此处使用 Razor 语法）：

```
<script type="text/javascript">
    var appBaseUrl = "@Url.Content("~")";
</script> 
```

然后在Javascript中：

```
$.ajax({
    url: appBaseUrl + 'Home/Load',
    type: 'post',
    dataType: 'json'
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:17:00.430

您可以将 URL 放入与您的 ajax 请求相关的元素中：

```
<div id="mydiv" data-url="@Url.Action("Load", "Home")">Click me to load ajax request!</div> 
```

然后将您的JS代码更改为：

```
$.ajax({
    url: $('mydiv').data('url'), // Could be $(this).data('url') if clicking to load
    type: 'post',
    dataType: 'json'
}) 
```

这样做的好处是它仍然使用 MVC 路由，因此任何自定义路由仍然有效。

# data-binding - 根据 ViewModel 的属性在 View 中的 UserControl 之间切换

> ID：15138917
> 
> 赞同：1
> 
> 时间：2013-02-28T15:09:03.630
> 
> 标签：data-binding, mvvm, windows-runtime, windows-store-apps

在 Windows 8 商店应用程序中，如何根据 ViewModel 的属性在 View 中的 UserControls 之间进行更改？

假设我的 ViewModel 有一个看起来像这样的属性：

```
 class MyViewModel
    {
        public string CurrentStatus
        {
            get { return (string)GetValue(CurrentStatusProperty); }
            set { SetValue(CurrentStatusProperty, value); }
        }

        public static readonly DependencyProperty CurrentStatusProperty =
            DependencyProperty.Register("CurrentStatus", typeof(string), typeof(MyViewModel), new PropertyMetadata("default", CurrentStatusChanged));

        ...
     } 
```

如何根据`CurrentStatus` 来自 ViewModel 的值使我的 View 更改 UserControl？

对我来说，最直接的解决方案是`CurrentStatus`在 ViewModel 和 View 中的另一个字符串之间创建绑定，但显然数据绑定只能用于 a `DependencyObject`（字符串不是）。

**编辑**： xaml 文件仅包含一个`StackPanel`我想在其中放置的`UserControl`，基于 CurrentStatus。所以，如果`CurrentStatus`是`"one"`我想要`StackPanel`包含 UserControlOne 等等......

对这个问题有什么想法或好的解决方案吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:39:16.747

我通常使用 a`ContentControl`并将其设置为`ContentTemplate`基于 a`DataTrigger`

我的博客文章[Switching between Views/UserControls using MVVM](http://rachel53461.wordpress.com/2011/05/28/switching-between-viewsusercontrols-using-mvvm/)中有一个示例，但这里有一个示例，说明使用您的场景可能会是什么样子：

```
<DataTemplate x:Key="DefaultTemplate">
     <local:DefaultUserControl />
</DataTemplate> 

<DataTemplate x:Key="ClosedTemplate">
     <local:ClosedUserControl />
 </DataTemplate>

<Style x:Key="MyContentControlStyle" TargetType="{x:Type ContentControl}">
    <Setter Property="ContentTemplate" Value="{StaticResource DefaultTemplate}" />
    <Style.Triggers>
        <DataTrigger Binding="{Binding CurrentStatus}" Value="Closed">
            <Setter Property="ContentTemplate" Value="{StaticResource ClosedTemplate}" />
        </DataTrigger>
    </Style.Triggers>
</Style>

...

<ContentControl Style="{StaticResource MyContentControlStyle}" /> 
```

**编辑**

显然，WinRT 不支持 DataTriggers，并且已被替换为[VisualStateManager](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.visualstatemanager.aspx)。我还没有机会使用它，但是从我读到的内容来看，他们对 WinRT 使用了与 Silverlight 相同的方法（`DataTriggers`直到 v5 才支持），我对 Silverlight 的解决方案是使用[数据模板选择器](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)

我希望这可以为您指明正确的方向:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:35:07.170

虽然我以前在这种情况下使用过`DataTemplateSelector`and `IValueConverter`- 现在我最喜欢的方法是使用`VisualStateManager`. [我在这里](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/b0ee76bd6492#WinRTXamlToolkit/Controls/Extensions/VisualStateExtensions.cs)创建了一个最基本的附加属性，它在 WinRT XAML 工具包中实现附加行为模式- 如下所示：

```
/// <summary>
/// Defines an attached property that controls the visual state of the element based on the value.
/// </summary>
public static class VisualStateExtensions
{
    #region State
    /// <summary>
    /// State Attached Dependency Property
    /// </summary>
    public static readonly DependencyProperty StateProperty =
        DependencyProperty.RegisterAttached(
            "State",
            typeof(string),
            typeof(VisualStateExtensions),
            new PropertyMetadata(null, OnStateChanged));

    /// <summary>
    /// Gets the State property. This dependency property 
    /// indicates the VisualState that the associated control should be set to.
    /// </summary>
    public static string GetState(DependencyObject d)
    {
        return (string)d.GetValue(StateProperty);
    }

    /// <summary>
    /// Sets the State property. This dependency property 
    /// indicates the VisualState that the associated control should be set to.
    /// </summary>
    public static void SetState(DependencyObject d, string value)
    {
        d.SetValue(StateProperty, value);
    }

    /// <summary>
    /// Handles changes to the State property.
    /// </summary>
    /// <param name="d">
    /// The <see cref="DependencyObject"/> on which
    /// the property has changed value.
    /// </param>
    /// <param name="e">
    /// Event data that is issued by any event that
    /// tracks changes to the effective value of this property.
    /// </param>
    private static void OnStateChanged(
        DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var stateName = (string)e.NewValue;
        var ctrl = (Control)d;
        VisualStateManager.GoToState(ctrl, stateName, true);
    }
    #endregion
} 
```

您应该定义一个枚举样式的类`VisualStates`，如 Silverlight Toolkit 中列出所有视觉状态的类（因此您没有重复项），例如

```
internal static class VisualStates
{
    #region GroupCommon
    /// <summary>
    /// Common state group.
    /// </summary>
    public const string GroupCommon = "CommonStates";

    /// <summary>
    /// Normal state of the Common state group.
    /// </summary>
    public const string StateNormal = "Normal";

    /// <summary>
    /// Normal state of the Common state group.
    /// </summary>
    public const string StateReadOnly = "ReadOnly";

    /// <summary>
    /// MouseOver state of the Common state group.
    /// </summary>
    public const string StateMouseOver = "MouseOver";

    /// <summary>
    /// Pressed state of the Common state group.
    /// </summary>
    public const string StatePressed = "Pressed";

    /// <summary>
    /// Disabled state of the Common state group.
    /// </summary>
    public const string StateDisabled = "Disabled";
    #endregion GroupCommon

    #region GroupFocus
    /// <summary>
    /// Focus state group.
    /// </summary>
    public const string GroupFocus = "FocusStates";

    /// <summary>
    /// Unfocused state of the Focus state group.
    /// </summary>
    public const string StateUnfocused = "Unfocused";

    /// <summary>
    /// Focused state of the Focus state group.
    /// </summary>
    public const string StateFocused = "Focused";
    #endregion GroupFocus
} 
```

一旦你有了这些 - 你可以在你的视图模型中拥有一个属性，比如

```
public string VisualState { get; set; /* Raise PropertyChange event your preferred way here */ } 
```

在你看来说

```
<Page
    ...
    xmlns:extensions="using:WinRTXamlToolkit.Controls.Extensions"
    extensions:VisualStateExtensions.State="{Binding VisualState}">... 
```

然后，您的视图模型可以轻松地驱动视觉状态的变化，您可以使用 Blend 来定义该状态的外观 - 例如，更改布局中各种元素的可见性或简单的可见性`Content`。`ContentTemplate`我认为这种方法对设计器工具有最好的支持，因为您可以通过单击按钮在视图之间切换并在 Blend 中更新这些视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:33:34.597

不确定我是否完全理解您要执行的操作。你可以发布xaml吗？

如果您想要根据状态以不同方式呈现控件，则使用转换器，您可以根据状态呈现不同的模板：

```
public class StatusToTemplateConverter : IValueConverter
{
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        switch ((string) value)
        {
            case "Status1":
                return Application.Current.Resources["Status1Template"];
            case "Status2":
                return Application.Current.Resources["Status2Template"];

            default:
                return Application.Current.Resources["Status3Template"];
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return null;
    }

    #endregion
} 
```

以上假设您在资源文件中定义了模板

如果您只想做一些更简单的事情，例如 Status1 的红色文本或 status2 的绿色文本，您可以拥有一个转换器，将状态转换为颜色并将 FontColor 绑定到状态并使用转换器。

但就像我说的那样，如果没有发布更多代码，我并不是 100% 清楚你想要实现的目标

# ios - Monocross 准备好在 iOS 设备上进行专业使用了吗？

> ID：15138921
> 
> 赞同：1
> 
> 时间：2013-02-28T15:09:16.717
> 
> 标签：ios, objective-c, generics, xamarin.ios, monocross

当使用 Monocross（使用 MonoTouch）创建一个简单的应用程序并为 iOS 设备编译时，我收到了一些不好的警告，如下所示：

警告 MT4112：注册商发现了一个通用类型：MonoCross.Touch.MXTouchViewController`1。不支持使用 ObjectiveC 注册泛型类型，这将导致随机行为和/或崩溃。（MT4112）。

我已经阅读了所有关于在 iOS 设备上使用 MonoTouch 和泛型的信息，但大多数情况下它不受支持。我的应用程序目前可以在实际设备上运行，但警告让我担心。

我想我的问题是，即使使用最简单的应用程序，当您收到这些警告时，Monocross 的状态是什么？它还没有准备好用于专业用途，还是警告与 Monocross 中使用泛型的方式无关？

我还可以从 Xamarin.iOS 文档中添加以下内容：“Xamarin.iOS 当前不支持创建 NSObject 类的通用子类”

这正是 Monocross 所做的，例如 MXTouchTableViewController 类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T22:25:49.307

这有一些历史：创建 NSObject 的通用子类从来都不是受支持的场景，但不幸的是 MonoTouch 从未强制执行，也没有警告过这一事实。所以人们当然最终会这样做。

然后有一天我不得不找到一个看起来像真正的 heisenbug 的东西，结果（经过数小时令人沮丧的调试）是因为有问题的项目使用了 NSObject 的通用子类。确切的细节并不重要，但那是在 MonoTouch 中添加警告的时候。

我的观点是人们长期以来一直在使用 NSObject 的通用子类，没有遇到任何问题。如果您广泛地测试您的应用程序（无论如何您都应该这样做），请不要担心这一点。

但是，如果您确实遇到了奇怪和莫名其妙的行为，我们很可能会在调查您在 MonoTouch 中发现错误的任何声明之前要求您修复这些警告。

# .net - C#如何确定一个类型是否实现了给定的接口？

> ID：15138924
> 
> 赞同：6
> 
> 时间：2013-02-28T15:09:18.437
> 
> 标签：.net, inheritance, reflection

我希望以下内容返回`true`：

```
var isIt = IsDisposable(typeof(TextWriter)); 
```

在哪里：

```
bool IsIDisposable(Type t){
    ??? 
    // I tried:
    //return t.IsSubclassOf(typeof(IDisposable)); //returns false
    // the other t.IsXXX methods don't fit the requirement as far as I can tell
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T15:11:58.983

您可以使用[`IsAssignableFrom`](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom%28v=vs.110%29.aspx)

```
bool IsDisposable = typeof(IDisposable).IsAssignableFrom(typeof(TextWriter)); 
```

[**演示**](http://ideone.com/DDy3G8)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T15:11:39.227

我找到了：[Type.GetInterfaces()](http://msdn.microsoft.com/en-us/library/system.type.getinterfaces%28v=vs.100%29.aspx)是我需要的：

```
bool IsIDisposable(Type t){
    return t.GetInterfaces().Contains(typeof(IDisposable));
} 
```

从文档中，`Type.GetInterfaces()`返回：

> Type: System.Type[]
> 一个 Type 对象数组，表示当前 Type实现**或继承的所有接口。**

# ios - 获取代码覆盖率统计IOS

> ID：15138925
> 
> 赞同：7
> 
> 时间：2013-02-28T15:09:23.227
> 
> 标签：ios, objective-c, unit-testing, code-coverage

我正在尝试从 .gcda 文件中获取代码覆盖率统计信息。我知道有类似的问题，但当时我没有得到我想要的。

到现在为止，我在谷歌上搜索了一下如何做之后得到了 .gcda 文件。有封面故事来阅读它们。现在，当我打开一个 .gcda 文件时，它会给我该特定文件的代码覆盖率。

谁能告诉我如何以矩阵的形式获取整个项目的统计信息？是否有任何工具可用于读取这些 gcda 文件并自动生成报告。有没有更好的方法来获得代码覆盖率？

任何形式的帮助都会非常有帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T07:27:08.883

我觉得这很有帮助。 [Xcode 代码覆盖率](http://qualitycoding.org/xcode-code-coverage/ "Xcode 代码覆盖率")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-14T06:34:33.260

试试壁龛宝石：

[https://github.com/ioveracker/alcove](https://github.com/ioveracker/alcove)

完全披露：我是这颗宝石的作者。请试一试，让我知道你的想法。

# ruby-on-rails - 活动记录中的交易

> ID：15138943
> 
> 赞同：0
> 
> 时间：2013-02-28T15:10:11.930
> 
> 标签：ruby-on-rails, activerecord

伙计们，

我对 rails 中的 activerecord 中的事务相当陌生，并且我有一段代码，我在其中执行以下操作：

```
transaction do
  specimen = Specimen.find_by_doc_id(25)
  specimen.state = "checking"
  specimen.save
  result = Inventory.do_check(specimen)
  if result
    specimen.state="PASS"
  else
    specimen.state="FAIL"
  end
  specimen.save
end 
```

我在这里使用事务的目标是，如果我在 Inventory.do_check 中遇到异常（它是外部 Web 服务的客户端并执行大量 HTTP 调用和检查），那么我希望 sample.state 回滚到其先前的值. 我想知道这是否会像上面那样工作？此外，看起来在我的开发机器上，锁定是在整个 Specimen 表上设置的，当我尝试查询该表/模型时，我得到一个 BUSY 异常（我正在使用 SQLLite）。我在想应该只在那个对象/记录上设置锁。

非常感谢任何反馈，因为我说我对此很陌生，所以我的问题可能非常幼稚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:17:12.360

实现和锁定取决于数据库。我不使用 SQLLite，如果它在这种情况下锁定整个表，我不会感到惊讶。但是读取应该仍然有效，所以这可能是因为它不允许在单个连接上进行两个并发操作，所以在允许任何其他操作之前等待您的事务完成。例如，请参阅此 SO 答案：[https](https://stackoverflow.com/a/7154699/2117020) ://stackoverflow.com/a/7154699/2117020 。

但是，我的主要观点是，在任何情况下，您都不应该在访问外部服务时持有交易。然而，它是如何实现的，将事务保持几秒钟并不是您想要的。看起来在您的情况下，您想要的只是从异常中恢复。作为结果，您只是想将状态设置为“FAIL”或“initial”，还是 do_check() 修改了您的样本？如果 do_check() 不修改样本，您最好执行以下操作：

```
specimen = Specimen.find_by_doc_id(25)
specimen.state="checking"
specimen.save
# or simply specimen.update_attribute( :state, "checking" )

begin
  specimen.state = Inventory.do_check(specimen) ? "PASS" : "FAIL"
rescue
  specimen.state = "FAIL" # or "initial" or whatever
end
specimen.save 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:55:36.357

锁定将高度依赖于您的数据库。您可以使用行锁。像这样的东西：

```
specimen = Specimen.find_by_doc_id(25)

success = true

# reloads the record and does a select for update which locks the row until the block exits (its wrapped in a transation)
specimen.with_lock do
  result = Inventory.do_check(specimen)
  if(result)
    specimen.state="PASS"
  else
    specimen.state="FAIL"
  end
  specimen.save!
end 
```

在事务中检查外部站点并不理想，但是如果您使用 with_lock 并且您的数据库支持行锁，您应该只锁定这一行（它会阻止读取，因此请谨慎使用）

查看活动记录中的悲观锁定文档： [http ://ruby-docs.com/docs/ruby_1.9.3-rails_3.2.2/Rails%203.2.2/classes/ActiveRecord/Locking/Pessimistic.html](http://ruby-docs.com/docs/ruby_1.9.3-rails_3.2.2/Rails%203.2.2/classes/ActiveRecord/Locking/Pessimistic.html)

# iphone - 根据姓名访问通讯录中的联系人图片

> ID：15138946
> 
> 赞同：1
> 
> 时间：2013-02-28T15:10:14.860
> 
> 标签：iphone, image, contact, abaddressbook

呃，几天以来我一直在思考一种方法。我已经检索了所有联系人姓名并使用字典放置在一个数组中。

我拥有的是一个模型类，其中包含一个姓名列表，现在我想在联系人列表中搜索姓名的位置，这取决于我可以检索所需的联系人图像。

最初用谷歌搜索，发现一个未回答的问题与我的要求不太相似，同样可以在[这里浏览](https://stackoverflow.com/questions/11574545/access-contact-image-from-address-book-based-on-its-id)

我尝试了几种方法，以下是我实现的一种方法：

**编辑**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self loadReminders];

    ReminderClass *reminderToDisplay = [self.remindersArray objectAtIndex:indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellIdentifier];

    // Now create the cell to display the reminder data
    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellIdentifier] autorelease];
        cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
        cell.textLabel.numberOfLines = 0;
        cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:17.0];
        cell.textLabel.adjustsFontSizeToFitWidth = YES;
    }

    tableView.backgroundColor = [UIColor clearColor];

    NSDateFormatter *dateFormat = [[[NSDateFormatter alloc]init]autorelease];
    [dateFormat setDateFormat:kDateFormat];
    NSDate *reminderDate = [dateFormat dateFromString:reminderToDisplay.Date]; 
    [dateFormat setDateFormat:kMinDateFormat]; 
    NSString *dateString = [dateFormat stringFromDate:reminderDate];

    NSString *valueString = [NSString stringWithFormat:@"%@'s %@",reminderToDisplay.Name,reminderToDisplay.Event];
    NSString *onString = [NSString stringWithFormat:@" on %@",dateString];
    NSString *reminderDetailsString = [valueString stringByAppendingString:onString];

    //Get the contact image based on name index from contact list
    ABAddressBookRef addressBook = ABAddressBookCreate( );
    CFStringRef reminderName = (CFStringRef)reminderToDisplay.Name;
    CFArrayRef allPeople = ABAddressBookCopyPeopleWithName(addressBook, reminderName);
    self.contactsList =[[[NSMutableArray alloc]init]autorelease];

    CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);
    for ( int i = 0; i < nPeople; i++ ) 
    { 
    ABRecordRef ref = CFArrayGetValueAtIndex(allPeople,i); 
    NSString *contactFirstNamePart = (NSString *)ABRecordCopyValue(ref,kABPersonFirstNameProperty);
    NSString *contactFirstName = [[[NSString alloc] initWithString:contactFirstNamePart]autorelease];
    NSString *contactLastNamePart = (NSString *)ABRecordCopyValue(ref, kABPersonLastNameProperty);

    if (contactLastNamePart == nil)
    {
        self.contactName = contactFirstName;
    }

    else
    {
        NSString *contactLastName = [[[NSString alloc] initWithString:contactLastNamePart]autorelease];
        NSString *contactLastNameString = [NSString stringWithFormat:@" %@",contactLastName]; 
        self.contactName = [contactFirstName stringByAppendingString:contactLastNameString]; 
        CFRelease(contactLastNamePart);
    }

    NSDictionary *contactsDictionary = [NSDictionary dictionaryWithObjectsAndKeys:self.contactName, kContactName, [NSNumber numberWithInt:i], kContactIndex, nil];
    [self.contactsList addObject:contactsDictionary];
    CFRelease(contactFirstNamePart);
}

NSDictionary *contactsDictionary = [self.contactsList objectAtIndex:indexPath.row]; 
self.contactName = [contactsDictionary objectForKey:kContactName]; 
int addressIndex = [[contactsDictionary objectForKey:kContactIndex]integerValue];

ABRecordRef recordReference = CFArrayGetValueAtIndex(allPeople, addressIndex);
if (ABPersonHasImageData(recordReference))
{
    NSData *imageData = (NSData *)ABPersonCopyImageData(recordReference);
    self.reminderImage = [UIImage imageWithData:imageData];
    CFRelease(imageData);
}

CFRelease(allPeople);
CFRelease(addressBook);

    UIImage *notificationImage = reminderImage;

    if (notificationImage != nil) 
    {
        UIImageView *imageView=[[[UIImageView alloc] initWithFrame:CGRectMake(240, 3, 70, 63)]autorelease];
        imageView.backgroundColor=[UIColor clearColor];
        [imageView setImage:notificationImage];
        cell.accessoryView = imageView;
    }
    else
    {
        UIImageView *imageView=[[[UIImageView alloc] initWithFrame:CGRectMake(240, 3, 70, 63)]autorelease];
        imageView.backgroundColor=[UIColor clearColor];
        UIImage *defaultImage = [UIImage imageNamed:kDefaultImage];
        [imageView setImage:defaultImage];
        cell.accessoryView = imageView;
    }
    cell.textLabel.text = reminderDetailsString;
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cell;
} 
```

**错误访问错误屏幕截图**

![在此处输入图像描述](../Images/3ff42c6e4a36f6213113a9e61f375c02.png)

但我无法完成所需的任务。任何人都可以指导我。

提前谢谢大家:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:30:34.507

我正在分享我在最近的一个应用程序中使用的示例代码片段。我已经修改以适应您的要求，还请注意，我已经在记事本中编辑了它，可能有一些拼写错误。（目前我没有 mac 来测试它..：P）基本思想是在 viewDidLoad 方法中填充数据源并使用该数据源来更新 tableView。希望这将成为解决您问题的输入。

**viewDidLoad**

```
contactsToBeAdded=[[NSMutableArray alloc] init];
ABAddressBookRef addressbook = ABAddressBookCreate();
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressbook);
CFIndex numPeople = ABAddressBookGetPersonCount(addressbook);
bool hasPhoneNumber = false;
for (int i=0; i < numPeople; i++) {
    hasPhoneNumber = false;
    ABRecordRef person = CFArrayGetValueAtIndex(allPeople, i);
    ABMutableMultiValueRef phonelist = ABRecordCopyValue(person, kABPersonPhoneProperty);
    CFIndex numPhones = ABMultiValueGetCount(phonelist);

    if(numPhones > 0){
        hasPhoneNumber = true;

    }
    if(hasPhoneNumber){
        NSString *firstName=(NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
        NSString *lastName=(NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);

        CFTypeRef ABphone = ABMultiValueCopyValueAtIndex(phonelist, 0);
        NSString *personPhone = (NSString *)ABphone;

        NSMutableDictionary *dictToAdd = [[[NSMutableDictionary alloc]init]autorelease];
        if(firstName != nil && firstName != NULL){
            [dictToAdd setObject:firstName forKey:@"firstName"];
            CFRelease(firstName);
        }
        else{
            [dictToAdd setObject:@"" forKey:@"firstName"];
        }
        if(lastName != nil && lastName != NULL){
            [dictToAdd setObject:lastName forKey:@"lastName"];
            CFRelease(lastName);
        }
        else{
            [dictToAdd setObject:@"" forKey:@"lastName"];
        }

        if(personPhone != nil && personPhone != NULL){
            [dictToAdd setObject:personPhone forKey:@"mobile"];
            CFRelease(ABphone);
        }
        else{
            [dictToAdd setObject:@"" forKey:@"mobile"];
        }

        //Get the first name and last name added to dict and combine it to full name
        NSString *firstName = [dictToAdd objectForKey:@"firstName"];
        NSString *lastName = [dictToAdd objectForKey:@"lastName"];
        NSString *fullName = [firstName stringByAppendingString:lastName]; 

        //Now check whether the full name is same as your reminderToDisplay.Name
        if(reminderToDisplay.Name isEqualToString:fullName )
        {
            CFDataRef imageData = ABPersonCopyImageData(person);
            UIImage *image = [UIImage imageWithData:(NSData *)imageData];
            if(image != nil && image != NULL){
                [dictToAdd setObject:image forKey:@"image"];
                CFRelease(imageData);
            }
            else{
                [dictToAdd setObject:[UIImage imageNamed:TEMP_IMG] forKey:@"image"];
            }
        }

        [contactsToBeAdded addObject:dictToAdd];
    }

    CFRelease(phonelist);
}
CFRelease(allPeople);
CFRelease(addressbook);

[self.tableView reloadData]; 
```

**numberOfRowsInSection**

```
return contactsToBeAdded.count; 
```

**cellForRowAtIndexPath**

```
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];

}

NSDictionary *contactToAdd;
//This way you can get the data added in viewDidLoad method
contactToAdd = [contactsToBeAdded objectAtIndex:indexPath.row];

NSString *fName = (NSString *)[contactToAdd objectForKey:@"firstName"];
NSString *lName = (NSString *)[contactToAdd objectForKey:@"lastName"];
UIImage *contactImg = (UIImage*)[contactToAdd objectForKey:@"image"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:25:57.513

当您使用“ABAddressBookCopyArrayOfAllPeople”时，您会在通讯录中获得一组人员。我相信他们是 ABPerson 的类型。

您现在可以像您一样遍历它们的列表。对于每条记录调用“ABPersonCopyImageData”，这将为您提供图像数据作为 CFDataRef。

记住 CFDataRef 是一个到 NSData 的无工具桥梁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:39:08.063

只需尝试像这样更改您的代码。您正在向 ur 添加字典项`contactsList`，因此获取每个字典并检查它是否包含与您匹配的键`reminderToDisplay.Name`，如果是，则执行您的操作。

```
for (NSDictionary* dict in contactsList)
{
   if(nil != [dict objectForKey:reminderToDisplay.Name])
   {
     //take image here
   }
} 
```

更新：

```
//This is the reminder's name you want to get contact image
ReminderClass *reminderToDisplay = [self.remindersArray objectAtIndex:indexPath.row];

 //Here you are adding your contacts with full name as object and kName as key, but check ur kName here
 NSDictionary *contactsDictionary = [NSDictionary dictionaryWithObjectsAndKeys:self.contactName, kName, [NSNumber numberWithInt:i], kIndex, nil]; 
 [self.contactsList addObject:contactsDictionary];

 //I dont think this part is needed in ur code
 NSDictionary *contactsDictionary = [self.contactsList objectAtIndex:indexPath.row]; 
 self.contactName = [contactsDictionary objectForKey:kName]; 
 int addressIndex = [[contactsDictionary objectForKey:kIndex]intValue]; 
```

现在，您将联系人姓名作为联系人列表数组中的字典，迭代数组并检查字典是否包含您的reminderToDisplay.Name 作为键。

```
for (NSDictionary* dict in contactsList)
{
    //Please note that your dict contains key as kName and object as contact name.
    if(nil != [dict objectForKey:reminderToDisplay.Name])
    {
    }
} 
```

另外，我觉得您可以在一个循环中执行此操作，例如当您迭代地址簿本身时，您可以检查联系人姓名是否在您的提醒列表中，如果可用则提取图像。

希望这会有所帮助..一切顺利...

# actionscript-3 - As3 要转换为数组的数字的输入字段

> ID：15138949
> 
> 赞同：0
> 
> 时间：2013-02-28T15:10:19.417
> 
> 标签：actionscript-3

我有一个输入字段和一个数字列表`(10,43,98,10,45,23,10)`。我想将其转换为`Array`，因此我可以将此数组用于多个功能。请帮我指出正确的方向。

```
var a:Array = Array[];
a.push(_numInput.text);//this is my input field name
//trace(a);

var l:Number = 0;
for(var i:uint=0; i< a.length; i++)
{
    var t1:Number = l += a[i]; 
    var t2:Number = a.length;   
    var t3:Number = t1 / t2; 
}   

 trace(t3); 
//when i trace the _numInput.text the number show up but i can not use them. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:15:09.950

您需要将其`String`转换为`Integer`!!

```
a.push(int(_numInput.text)); 
```

编辑：Ups，似乎我不太明白这个问题预编辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:24:36.997

用于`split();`将这样的字符串转换为数组。

```
var a:Array = _numInput.text.split(","); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:09:45.750

如果您的文本字段中有逗号分隔的数字，那么以下是获取`array`,

```
 var str = "10,43,98,10,45,23,10";

 function convertTextFieldStringToArray(s:String):Array
 {
     var a = s.split(",");

     return a;
 }

 trace(convertTextFieldStringToArray(str)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T16:43:25.720

拆分字符串只会创建一个字符串数组
所以你需要做的就是将该数组转换为一个 int 数组

```
 public function mapIt(obj:Object, index:int, arr:Array):int {
        // validation might be a good idea here since this is user imputed text.
        return int(obj) // convert to int
    }

    // your input string
    var str:String = "10,43,98,10,45,23,10";

    // convert string to array of strings
    var arrayOfStrings:Array = str.split(",")

    trace( typeof arrayOfStrings[0])// verify first element is a string
    trace( arrayOfStrings[0] + arrayOfStrings[0]) // verify string concatination

    var arrayOfInt:Array = arrayOfStrings.map(mapIt) // map each element 
    trace( typeof arrayOfInt[0]) // verify first element is an int
    trace( arrayOfInt[0] + arrayOfInt[0]) // verify numbers are correctly added 
```

# c# - .NET Dropdown 未正确检索

> ID：15138953
> 
> 赞同：0
> 
> 时间：2013-02-28T15:10:29.357
> 
> 标签：c#, asp.net

我有以下代码填充下拉列表：

```
 string strConn = ConfigurationManager.ConnectionStrings["LiSQL"].ConnectionString;

    using (SqlConnection con = new SqlConnection(strConn))
    {
        DataSet ds = new DataSet();
        using (SqlDataAdapter myda = new SqlDataAdapter("SELECT [PostAbbrev], [State] FROM [States]", con))
        {
            myda.Fill(ds);
            ddlState.DataSource = ds;
        }
    }

    ddlState.DataTextField = "State";
    ddlState.DataValueField = "State";
    ddlState.DataBind(); 
```

我的下拉代码是这样的：

```
 <asp:DropDownList ID="ddlState" runat="server" DataTextField="States" DataValueField="States">                                         
    </asp:DropDownList> 
```

当我选择说德克萨斯时，该值仍默认为第一个条目阿拉巴马州：这是我为检索该值所做的：

```
 string state = ddlState.SelectedItem.Text; 
```

# c# - 从 Windows 服务触发应用程序找不到文件？

> ID：15138956
> 
> 赞同：0
> 
> 时间：2013-02-28T15:10:40.313
> 
> 标签：c#, .net, service

**背景：** 我创建了一个服务，该服务将在满足某些条件时触发应用程序的执行。此服务设置为在用于通过 RDP 登录系统的同一 Windows 用户帐户下运行。我还创建了通过此服务触发的 .NET 应用程序。此应用程序在磁盘上查找配置文件（在应用程序的 ProgramData 文件夹中找到）使用在配置文件中找到的设置来影响此应用程序的输出。

**问题：** 当用户以交互方式运行应用程序时，应用程序运行良好。但是，当服务触发应用程序运行时，应用程序似乎没有从配置文件中加载正确的值。几乎就好像从服务运行的应用程序有自己的配置文件，并且没有使用在 ProgramData 中找到的配置文件。

我只是在寻找一些关于为什么会发生这种情况的见解。通过计划任务或作为服务运行应用程序时，Windows 7 和 Windows 2008 R2 似乎出现了一些奇怪的行为。这几乎就像交互式应用程序和服务应用程序在以同一用户身份运行的同一系统上具有不同的环境......

**注意：**服务可执行文件也可以在与触发的应用程序相同的文件夹中找到。我希望默认情况下工作目录是服务运行目录。

```
 public int ExecRun()
  {
    Process proc = new Process();
    proc.StartInfo = new ProcessStartInfo
    {
       FileName = "C:\\Program Files\\TEST\\runme.exe",
       Arguments = "/DS:TEMP"
    };

    proc.Start();
    proc.WaitForExit();

    return proc.ExitCode;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:10:03.937

This has been solved.

Unfortunately, I think I wasted all your time with this question. The users is running this service on a second system (other than the one they claimed was having this issue). They copied the same configuration to both systems which would've been fine if they had setup both systems the same way, but alas they did not. The file did not exist on the system throwing the error, but both systems were setup to log exceptions to the same location.

The user had to disable the second service, or setup the configuration file correctly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:27:21.633

尝试添加工作目录信息：

```
Process proc = new Process();
        proc.StartInfo = new ProcessStartInfo
        {
            FileName = "C:\\Program Files\\TEST\\runme.exe",
            WorkingDirectory="C:\\Program Files\\TEST",
            Arguments = "/DS:TEMP"
        }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:28:29.310

听起来触发应用程序执行的服务也需要设置工作目录。如果您使用`Process`该类，则需要将该`StartInfo.WorkingDirectory`属性设置为应用程序所在的路径。

# javascript - 不能做简单的jQuery数学

> ID：15138959
> 
> 赞同：-5
> 
> 时间：2013-02-28T15:10:46.533
> 
> 标签：javascript, jquery

我正在尝试做一个简单的计算表：这是带有脚本和表单元素的完整 html 页面。

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Payback Calc</title>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
<link rel="stylesheet" href="js/jquery-mobile-fluid960.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/2.2.0/knockout-min.js">        </script>
<script>
function getvals(){
var homesq = $('#homesq').val();
var roofcasq = $('#roofcasq').val();
var costpsq = $('#costpsq').val();
var epahcc = $('#epahcc').val();
var narc = $('#narc').val();
var eeshc = $('#eeshc').val();
var cpg = $('#cpg').val();
var galneed = $('#galneed').val();
var pce = $('#pce').val();
var hcc=$('#hcc').val();
var eae=$('#eae').val();
var ees10=$('#ees10').val();
var ees15=$('#ees15').val();
var ees20=$('#ees20').val();
var epbpso=$('#epbpso').val();
var epbcac=$('#epbcac').val();
var eacs=$('#eacs').val();
var ts=$('#ts').val();
var epbop=$('#epbop').val();
var tc=$('#tc').val();

galneed = roofcasq/225;
pce = galneed * cpg;
hcc = homesq * epahcc;
eae = hcc * eeshc;
ees10 = eae * 10;
ees15 = eae * 15;
ees20 = eae * 20;
epbpso = pce / eae;
epbcac = roofcasq * costpsq;
eacs = narc * roofcasq;
ts = eae + eacs;
tc = pce + epbcac;
epbop = tc / ts;
}
 </script>
</head>
<body>
<div data-role="page" id="page">
  <div data-role="header">
    <h1>Header</h1>
  </div>
  <div data-role="content">

<table width="100%" align="center">
<tr height="100px"  >
<td><label  for="homesq"><h2>Home Square Footage:</h2></label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="homesq" id="homesq" placeholder="" data-role="none" ></td>
</tr>
<tr>
<td><label   for="roofcasq"><h2>Roof Coverage Area in Square Feet:</h2></label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="roofcasq" id="roofcasq" placeholder="" data-role="none"data-role="none" ></div></td>
</tr>
<tr >
<td><label   for="costpsq"><h2>Cost Per S.F. for Roof Cleaning & Application:</h2></label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="costpsq" id="costpsq" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td><label  for="epahcc"><h2>U.S. EPA Average Residential Heating & Cooling Costs:</h2> </label></td>
<td width="25%"><input  style="font-size:30px;"type="text" name="epahcc" id="epahcc" placeholder="" data-role="none" ></div></td>
</tr>
<tr >
<td ><label  for="narc"><h2>U.S. National Average for Roof Cleaning:</h2></label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="narc" id="narc" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td><label  for="eeshc"><h2>Estimated Energy Savings for Heating & Cooling:</h2></label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="eeshc" id="eeshc" placeholder="" data-role="none" ></div></td>
</tr>
<tr >
<td ><label  for="cpg"><h2>Cost Per Gallon for Nansulate Crystal: </h2></label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="cpg" id="cpg" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td><label  for="galneed"><h2>Gallons Needed (includes 10% extra for loss):</h2></label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="galneed" id="galneed" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td ><label  for="pce"><h2>Product Cost Estimate (does not include shipping):</h2> </label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="pce" id="pce" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td ><label  for="hcc"><h2>Estimated Annual Heating & Cooling Costs:</h2> </label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="hcc" id="hcc" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td ><label  for="eae"><h2>Estimated Annual Energy Savings:</h2> </label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="eae" id="eae" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td ><label  for="ees10"><h2>Estimated Energy Savings Through 10-Year Warranty Period:</h2> </label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="ees10" id="ees10" placeholder="" data-role="none"></div></td>
</tr>
<tr>
<td ><label  for="ees15"><h2>Estimated Energy Savings Through 15 Years:</h2><p>(Expected lifespan is 10-20 years or more, depending upon climate)</p></label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="ees15" id="ees15" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td ><label  for="ees20"><h2>Estimated Energy Savings Through 20-years:</h2> </label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="ees20" id="ees20" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td ><label  for="epbpso"><h2>Estimated Payback on Product/Savings Only:</h2> </label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="epbpso" id="epbpso" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td ><label  for="epbcac"><h2>Estimated Roof Cleaning & Application Cost:</h2> </label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="epbcac" id="epbcac" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td ><label  for="eacs"><h2>Estimated Annual Cleaning Savings:</h2> </label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="eacs" id="eacs" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td ><label  for="ts"><h2>Total Savings - Annual Energy Savings and Cleaning:</h2> </label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="ts" id="ts" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td ><label  for="epbop"><h2>Estimated Payback on Product + Annual Cleaning:</h2> </label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="epbop" id="epbop" placeholder="" data-role="none" ></div></td>
</tr>
<tr>
<td ><label  for="tc"><h2>Total Cost of Product and Application:</h2> </label></td>
<td width="25%"><input style="font-size:30px;" type="text" name="tc" id="tc" placeholder="" data-role="none" ></div></td>
</tr>

</table>
 <a data-role="button" onClick="getvals()">calculate</a>
    <a data-role="button" onClick="console()">calculate</a>
 </div>
  <div data-role="footer">
    <h4>Footer</h4>

  </div>
</div>

</body>
</html> 
```

控制台没有显示错误。只是页面没有做任何事情。

我正在使用最新版本的 jQuery 移动版。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:13:56.853

在使用 HTML 输入进行数学运算时，您需要做几件一般的事情：

1.  修剪空白（`$.trim`如果您使用 jQuery，是您的朋友）

2.  转换为数字。用于`parseInt(..., 10)`整数或`parseFloat()`其他。

当然，您还需要将计算值写*回*页面！

这对于[Knockout JS来说将是一个](http://knockoutjs.com/)*非常*好的用途，它允许您将表单输入绑定到数据模型，并在您更改值时自动更新该表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:13:16.167

您没有将计算的值放在任何地方。您需要在页面上创建一些元素，并将其内容/值（取决于元素的类型）设置为您计算的值。

当然，你需要有一些元素来调用你的函数。

# asp.net - 有没有办法使用 System.Net.Mail.SendAsync() 捕获异常

> ID：15138964
> 
> 赞同：4
> 
> 时间：2013-02-28T15:11:02.610
> 
> 标签：asp.net, system.net.mail

我已经有几种方法可以同步发送电子邮件。

如果电子邮件失败，我会使用这个相当标准的代码：

```
 static void CheckExceptionAndResend(SmtpFailedRecipientsException ex, SmtpClient client, MailMessage message)
    {
        for (int i = 0; i < ex.InnerExceptions.Length -1; i++)
        {
            var status = ex.InnerExceptions[i].StatusCode;

            if (status == SmtpStatusCode.MailboxBusy ||
                status == SmtpStatusCode.MailboxUnavailable ||
                status == SmtpStatusCode.TransactionFailed)
            {
                System.Threading.Thread.Sleep(3000);
                client.Send(message);
            }
        }
    } 
```

但是，我正在尝试使用 SendAsync() 来实现相同的目的。这是我到目前为止的代码：

```
 public static void SendAsync(this MailMessage message)
    {
        message.ThrowNull("message");

        var client = new SmtpClient();

        // Set the methods that is called once the event ends
        client.SendCompleted += new SendCompletedEventHandler(SendCompletedCallback);

        // Unique identifier for this send operation
        string userState = Guid.NewGuid().ToString();

        client.SendAsync(message, userState);

        // Clean up
        message.Dispose();
    }

    static void SendCompletedCallback(object sender, AsyncCompletedEventArgs e)
    {
        // Get the unique identifier for this operation.
        String token = (string)e.UserState;

        if (e.Error.IsNotNull())
        {
            // Do somtheing
        }
    } 
```

问题是使用令牌和/或 e.Error 如何获取异常以便我可以对 StatusCode 进行必要的检查然后重新发送？

我整个下午都在谷歌上搜索，但没有发现任何积极的东西。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:15:09.857

`e.Error`已经有发送异步电子邮件时发生的异常。您可以查看`Exception.Message`、`Exception.InnerException`、`Exception.StackTrace`等以获取更多详细信息。

**更新：**

检查 Exception 是否为 SmtpException 类型，如果是，您可以查询 StatusCode。就像是

```
if(e.Exception is SmtpException)
{
   SmtpStatusCode  code = ((SmtpException)(e.Exception)).StatusCode;
   //and go from here...
} 
```

并[在此处](http://msdn.microsoft.com/en-us/library/x5x13z6h.aspx)查看更多详细信息。

# tfs - TFS 2012 团队构建和 Web 应用程序部署 - ERROR_USER_NOT_ADMIN

> ID：15138965
> 
> 赞同：3
> 
> 时间：2013-02-28T15:11:03.473
> 
> 标签：tfs, msbuild, msdeploy, tfsbuild

我们有一个由几个类库和一个 Web 应用程序项目组成的解决方案。我们将 TFS 2012 与 Team Build 一起使用。该解决方案在构建服务器上正确编译。

我目前正在尝试通过 MSBuild Arguments 来做到这一点。

/p:DeployOnBuild=True /p:DeployTarget=MsDeployPublish /p:CreatePackageOnPublish=False /p:MSDeployPublishMethod=RemoteAgent /p:MsDeployServiceUrl= `https://testWebServer:8172/MsDeploy.axd?site=direct`/p:AllowUntrustedCertificate=True /p:DeployIisAppPath="direct" /p:AuthType=NTLM

解决方案构建但不部署。我收到以下错误消息：

> msdeploy 错误 ERROR_DESTINATION_INVALID：Web 部署任务失败。（无法连接到远程计算机（“https”）。确保远程计算机名称正确并且您能够连接到该计算机。了解更多信息：http: [//go.microsoft.com/fwlink/ ?LinkId=221672#ERROR_DESTINATION_INVALID.](http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_DESTINATION_INVALID.) ) [C:\Builds\1\ProjectName\Solution General Build\Sources\Temp Source\ProjectName\Solution\Project.csproj]

我应该传递另一个参数来指定服务器吗？我不打算让 https 成为服务器名称...我尝试省略 https:// 无济于事，错误是相同的，所以它是从某个地方获取值。

我已经尝试使用以下 MsDeployServiceUrl 值：

*   `https://testWebServer:8172/MsDeploy.axd?site=direct`
*   `https://testWebServer:8172/MsDeploy.axd`
*   `"https://testWebServer:8172/MsDeploy.axd?site=direct"`
*   `https://192.168.X.X:8172/MsDeploy.axd?site=direct`
*   `"https://192.168.X.X:8172/MsDeploy.axd?site=direct"`
*   `testWebServer:8172/MsDeploy.axd?site=direct`

# 更新

好吧，以下至少是连接：

*   /p:MsDeployServiceUrl=`testWebServer`

我已经看过很多关于那个特定论点的帖子，而且几乎总是它们是一个 URL，而不仅仅是一个主机名（那些似乎是主机名的那些我认为只是为了简洁而写成这样）。

然而，我现在面临一个新问题。我已经在网络服务器上创建了构建服务帐户（域帐户）本地管理员，并且`msdeploy error ERROR_USER_NOT_ADMIN`在安全日志中得到了审计失败。

# 解析度

这些是我目前使用的 MSBuild 参数。
/p:DeployOnBuild=True /p:DeployTarget=MsDeployPublish /p:CreatePackageOnPublish=False /p:MSDeployPublishMethod=WMSvc /p:MsDeployServiceUrl="https://SERVER:8172/MsDeploy.axd" /p:AllowUntrustedCertificate=True /p :DeployIisAppPath="siteName"

我现在收到 ERROR_USER_UNAUTHORIZED。显然我要么没有正确设置委派，要么我创建的 IIS 管理器用户不正确。无论如何，如有必要，将在不同的帖子中进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T19:11:57.583

您使用的是什么服务器和 IIS 版本？IIS 6 使用**Web 部署代理服务 (MsDepSvc)**，而 IIS 7 通常使用具有不同 URL 的**Web 管理服务 (WMSvc)**（此外，您必须是目标服务器上的管理员才能执行 MsDepSvc。

你可以尝试指定

```
/P:MSDeployPublishMethod=WMSvc 
```

根据Troy Hunt的[这篇文章，](http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity_24.html) **Web 管理服务 (WMSvc)**正在使用

```
.axd 
```

URL（您指定的），而您试图强制它使用似乎不一致的**RemoteAgent发布方法。**

有关发布方法和发布方法之间的完整差异集，请参阅[本文。](http://www.troyhunt.com/2010/11/you-deploying-it-wrong-teamcity_24.html)`WMSvc``RemoteAgent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T13:00:03.983

我有一个类似的问题。为了解决这个问题，我尝试了以下步骤：

1.  由于它是一个托管服务器，我们必须确保端口 8172 是开放的（显然）。
2.  创建一个新登录名并在 IIS -> Deploy -> Configure -> Configure Web Deploy Publishing 中在目标服务器上进行设置。我确保密码中没有任何空格，以避免出现引号问题。
3.  实际上从构建服务器运行手动部署。
4.  最后在MSDeployServicerl中指定一个IP地址：/p:MsDeployServiceUrl=xxx.xxx.xxx.xxx:8172/msdeploy.axd

没有一个网站名称对我有用。我的参数都没有引号。当然，如果您在其中一个参数中错误地留了一个空格，您将收到错误：MSBUILD : error MSB1008: Only one project can be specified

# android - Adapter ListView 项点击事件

> ID：15138966
> 
> 赞同：1
> 
> 时间：2013-02-28T15:11:06.523
> 
> 标签：android, onclicklistener

这可以吗？

```
@Override
protected void onPostExecute(final ChannelPair p) {
    HiddenChannelsListAdapter adapter = new HiddenChannelsListAdapter(p.ctx, p.channelList);
    p.lv.setAdapter(adapter);
    p.lv.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            Log.i("CLICKED ON LV ITEM", "YEA");

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });
} 
```

它实际上并没有触发我认为的事件。至少没有项目被选中？

**更新**

所以我从 asyncTask 中删除了这些东西并将其添加到一个新线程中，所以现在它们都在同一个文件中。但是，我仍然无法从项目中获得点击次数

```
package com.example.tvrplayer;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Context;
import android.content.DialogInterface;
import android.preference.DialogPreference;
import android.util.AttributeSet;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListView;

public class ChannelsDialogPreference extends DialogPreference {

    public static Context ctx;
//    Activity activity;

    public ChannelsDialogPreference(Context context, AttributeSet attrs) {
        super(context, attrs);

        this.ctx = context;
    }

    @Override
    protected View onCreateDialogView() {

//      Set loading spinner

//      Start looking for channels

//      When complete, show channels

        LayoutInflater inflater = ((SettingsActivity) ctx).getLayoutInflater();
        final View vw = inflater.inflate(R.layout.channel_content_view, null);
//        Do this in a new Thread

        Thread thread = new Thread()
        {
            @Override
            public void run() {
                try {
                    final JSONArray channels;
                    String username = null;
                    String linkid = null;
                    final String apiurl = "http://192.168.2.136:8080";
                    final String channelID = null;
                    final DatabaseHandler db = new DatabaseHandler(ctx);
                    List<User> users = db.getAllUsers();  
                    for (User cn : users) {
                         linkid = cn.getLinkID();
                         username = cn.getUserName();
                     }
                     db.close();

                    final ArrayList< HashMap < String, String > > channelList = new ArrayList < HashMap < String, String > > ();
                    try {

                        if ( channelID != null ) {
                            channels = Json.getJson(apiurl + "/rest/channel/"+ linkid +"/"+ username + "/" + channelID, "GET");
                            Log.i("CHANNELS", channels.toString());
                            for (int i=0; i < channels.length(); i++) { 
                                JSONObject json_data = channels.getJSONObject(i);
                                String name = json_data.getString("Name");
                                String channelid = json_data.getString("ChannelID");
                                HashMap<String, String> channelObject = new HashMap<String, String>();
//                                  if ( json_data.getString("ParentPath") == "" ) {
                                channelObject.put("id", channelid);
                                channelObject.put("name", name);
                                channelList.add(channelObject);
//                                  }
                            }
                        } else {
                            channels = Json.getJson(apiurl + "/rest/channel/"+ linkid +"/"+ username, "GET");
                            Log.i("CHANNELS", channels.toString());
                            for (int i=0; i < channels.length(); i++) { 
                                JSONObject json_data = channels.getJSONObject(i);
                                String name = json_data.getString("Name");
                                String channelid = json_data.getString("ChannelID");
                                HashMap<String, String> channelObject = new HashMap<String, String>();
                                Log.i("CHANNEL LEN", ""+ json_data.getString("ParentID").length());
                                if ( json_data.getString("ParentID").length() < 32 ) {
                                    channelObject.put("id", channelid);
                                    channelObject.put("name", name);
                                    channelList.add(channelObject);
                                }
                            }
                        }
                        ((Activity)ctx).runOnUiThread(new Runnable() {
                             public void run() {
                                 HiddenChannelsListAdapter adapter = new HiddenChannelsListAdapter(ctx, channelList);
                                    ListView lv = (ListView) vw.findViewById(R.id.list);
                                    lv.setAdapter(adapter);
                                    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() 
                                    {
                                        @Override
                                        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3)
                                        {
                                            Log.i("CLICKED ON LV ITEM", "YEA");
                                        }
                                    });
                            }
                        });

                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }                               
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        };

        thread.start(); 
        return vw;
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        super.onDialogClosed(positiveResult);
        persistBoolean(positiveResult);
    }

    @Override
    public void onClick (DialogInterface dialog, int which)
    {
        super.onClick(dialog, which);
//
        Log.v("which", Integer.toString(which));
//
        if(which == -1) { //Clear all
//          new ChannelHandler().execute(apiurl, username, linkid, vw, ctx, channelID);
        }
    }

} 
```

这部分是点击绑定的地方：

```
((Activity)ctx).runOnUiThread(new Runnable() {
                             public void run() {
                                 HiddenChannelsListAdapter adapter = new HiddenChannelsListAdapter(ctx, channelList);
                                    ListView lv = (ListView) vw.findViewById(R.id.list);
                                    lv.setAdapter(adapter);
                                    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() 
                                    {
                                        @Override
                                        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3)
                                        {
                                            Log.i("CLICKED ON LV ITEM", "YEA");
                                        }
                                    });
                            }
                        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:16:00.683

这会导致`UIthread`不应从后台线程调用的更改。记住永远不要更新或`notifychange()`来自后台`listView`线程

# assembly - (ASM) “设置位 1”是什么意思？

> ID：15138968
> 
> 赞同：0
> 
> 时间：2013-02-28T15:11:10.953
> 
> 标签：assembly, mips

我正在使用一个网站来学习 MIPS 汇编以进行练习。

> 练习 2
> 
> 在每个寄存器 $1 到 $7 中设置相应的位。**也就是说，在寄存器 1 中设置位 1（并将其余部分清零），在 $2 中设置位 2（并将其余部分清零），依此类推。**在您的程序中仅使用一条 ori 指令来设置寄存器 $1 中的位。开头：'ori $1,$0,0x01' 不要使用除此之外的任何 ori 指令。注意：寄存器的第 1 位是右数第二个，即（无符号二进制）对应于 2 的第一个幂。

有人可以解释一下吗？

**将 0x02 放入寄存器 1 是否正确？** （我不能使用ori，所以我会使用左移将0x01变成0x02）

这使得寄存器 1 == 10（二进制）。因此寄存器 1 的第 1 位为 1，其他位为 0？

我很困惑，因为 MIPS 模拟器没有显示前导零。所以我不知道我这样做是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:17:29.907

是的，你的解释是正确的。

```
ori $1,$0,0x01  # Initialize $1
sll $2,$1,2     # Set bit 2 or $2
sll $3,$1,3     # Set bit 3 of $3
...             # ..and so on for $4..$7
sll $1,$1,1     # Finally set bit 1 of $1 
```

或者：

```
ori $1,$0,0x01
sll $1,$1,1
sll $2,$1,1
sll $3,$2,1
... 
```

# python - 如何获取列中最频繁值的数量？

> ID：15138973
> 
> 赞同：56
> 
> 时间：2013-02-28T15:11:19.177
> 
> 标签：python, pandas, counter, frequency, series

我有一个数据框，我想知道给定列有多少次具有最频繁的值。

我尝试通过以下方式做到这一点：

```
items_counts = df['item'].value_counts()
max_item = items_counts.max() 
```

结果我得到：

```
ValueError: cannot convert float NaN to integer 
```

据我了解，第一行我得到系列，其中列中的值用作键，这些值的频率用作值。所以，我只需要找到系列中的最大值，由于某种原因，它不起作用。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-02-28T15:43:31.177

看起来您的列中可能有一些空值。你可以用`df = df.dropna(subset=['item'])`. 然后`df['item'].value_counts().max()`应该给你最大计数，并且`df['item'].value_counts().idxmax()`应该给你最频繁的值。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-05-11T05:05:00.153

要继续@jonathanrocher 的回答，您可以[`mode`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.mode.html)在 pandas DataFrame 中使用。它将在行或列中给出最常见的值（一个或两个）：

```
import pandas as pd
import numpy as np
df = pd.DataFrame({"a": [1,2,2,4,2], "b": [np.nan, np.nan, np.nan, 3, 3]})

In [2]: df.mode()
Out[2]: 
   a    b
0  2  3.0 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-05-05T22:00:49.557

您也可以考虑使用`mode`忽略 NaN 的 scipy 函数。使用它的解决方案可能如下所示：

```
from scipy.stats import mode
from numpy import nan
df = DataFrame({"a": [1,2,2,4,2], "b": [nan, nan, nan, 3, 3]})
print mode(df) 
```

输出看起来像

```
(array([[ 2.,  3.]]), array([[ 3.,  2.]])) 
```

这意味着最常见的值是`2`第一列和`3`第二列，分别是频率`3`和`2`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-03T13:55:49.293

只需获取`items_counts`系列的第一行：

```
top = items_counts.head(1)  # or items_counts.iloc[[0]]
value, count = top.index[0], top.iat[0] 
```

这是有效的，因为默认情况下[`pd.Series.value_counts`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.value_counts.html)has*已经*按计数排序，最高计数优先。按位置从索引中提取值具有 O(1) 复杂度，而具有 O( *n* ) 复杂度，其中*n*是类别数。`sort=True`*[`pd.Series.idxmax`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.idxmax.html)*

 ***`sort=False`仍然可以指定，然后`idxmax`建议：

```
items_counts = df['item'].value_counts(sort=False)
top = items_counts.loc[[items_counts.idxmax()]]
value, count = top.index[0], top.iat[0] 
```

请注意，在这种情况下，您不需要单独调用`max`and `idxmax`，只需通过提取索引`idxmax`并将其提供给`loc`基于标签的索引器即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-01T10:37:42.127

计算频率时省略了 NaN 值。 [请在此处检查您的代码功能](https://i.stack.imgur.com/I8zsO.png) 但您可以使用以下代码实现相同的功能。

```
**>> Code:**
    # Importing required module
    from collections import Counter

    # Creating a dataframe
    df = pd.DataFrame({ 'A':["jan","jan","jan","mar","mar","feb","jan","dec",
                             "mar","jan","dec"]  }) 
    # Creating a counter object
    count = Counter(df['A'])
    # Calling a method of Counter object(count)
    count.most_common(3)

**>> Output:**

    [('jan', 5), ('mar', 3), ('dec', 2)] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-09T00:22:26.553

添加这行代码以查找最频繁的值

```
df["item"].value_counts().nlargest(n=1).values[0] 
```***

# python - 使用 Pika 客户端轮询 RabbitMQ 消息

> ID：15138976
> 
> 赞同：2
> 
> 时间：2013-02-28T15:11:25.087
> 
> 标签：python, rabbitmq, pika

我想在 Python 中创建一个 RabbitMQ 接收器/消费者，但不知道如何检查消息。我正在尝试在自己的循环中执行此操作，而不是使用 pika 中的回调。

如果我理解了一些事情，我可以在 Java 客户端`getBasic()`中检查是否有任何消息可用而不会阻塞。我不介意在收到消息时阻止，但我不想在有消息之前阻止。

我没有找到任何明确的例子，也没有弄清楚 pika 中的相应调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:43:15.357

如果你想同步做，那么你需要看看 pika`BlockingConnection`

> BlockingConnection 在 Pika 的异步核心提供方法之上创建了一个层，该层将阻塞，直到它们的预期响应返回。由于从 RabbitMQ 到应用程序的 Basic.Deliver 和 Basic.Return 调用的异步性质，如果您想使用 basic_consume 接收来自 RabbitMQ 的消息，或者如果您想要使用 basic_publish 时收到传送失败通知。

更多信息和示例在这里

[https://pika.readthedocs.org/en/0.9.12/connecting.html#blockingconnection](https://pika.readthedocs.org/en/0.9.12/connecting.html#blockingconnection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-16T08:50:14.047

您可以使用此答案的示例定期检查队列大小[Get Queue Size in Pika (AMQP Python)](https://stackoverflow.com/questions/8192584/get-queue-size-in-pika-amqp-python/13629296#13629296)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-10T21:31:06.767

队列处理循环可以在以下帮助下迭代完成`process_data_events()`：

```
import pika

# A stubborn callback that still wants to be in the code.
def mq_callback(ch, method, properties, body):
    print(" Received: %r" % body)

connection = pika.BlockingConnection(pika.ConnectionParameters("localhost"))
channel = connection.channel()
queue_state = channel.queue_declare(queue="test")
# Configure a callback.
channel.basic_consume(mq_callback, queue="test")

try:
    # My own loop here:
    while(True):
        # Do other processing

        # Process message queue events, returning as soon as possible.
        # Issues mq_callback() when applicable.
        connection.process_data_events(time_limit=0)
finally:
    connection.close() 
```

# asp.net - 单个应用程序中的多个访问密钥

> ID：15138978
> 
> 赞同：0
> 
> 时间：2013-02-28T15:11:30.533
> 
> 标签：asp.net, amazon-web-services, amazon-iam

我有一个 Web 应用程序需要根据用户从主页单击的帐户从多个帐户访问 IAM 信息。我目前的印象是只有一组访问密钥可用于 .net 应用程序。我还知道，当您在 web.config 文件中包含多个访问密钥时，会使用最后列出的密钥。有没有人找到在单个应用程序中包含多个访问密钥的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:54:41.020

访问密钥不需要存储在 web.config 中。`AmazonIdentityManagementServiceClient`您可以通过传递特定的访问/密钥来简单地构建 IAM 客户端 ( )。这样，密钥就不会从 web.config 加载。例如：

`var client = new AmazonIdentityManagementServiceClient(accessKey, secretKey);`

# javascript - 为什么禁用浏览器网络安全（例如 Chrome）有助于执行跨站点请求？

> ID：15138987
> 
> 赞同：1
> 
> 时间：2013-02-28T15:11:52.627
> 
> 标签：javascript, google-chrome, browser, cross-domain, cors

我们有几个内部网络应用程序。其中之一需要访问所有其他应用程序。问题是：**Same-Orign-Policy**。

实际上我确实设法绕过它。首先，IE 在网络安全方面相当草率。所以，它实际上问我是否要完成这些请求。如果我点击是，他只是执行了跨站点请求。

但由于大多数用户不会使用 IE，因此需要使其在另一个浏览器中运行。所以，我试图让它在谷歌浏览器中运行。经过一番研究，我发现，当我使用执行参数打开网络安全时，它会起作用`--disable-web-security`。这完成了工作。但不幸的是，大多数用户不会使用这个执行参数。因此我需要另一种解决方案。

然后我遇到了**CORS**。CORS 似乎是在 Chrome 中实现的，但它有一个缺点（对我来说）。我需要在服务器端设置标题。由于我不会在这里讨论的原因，这是不行的。

所以我真正想知道的是：

*为什么禁用浏览器的网络安全可以完成这项工作，而我需要服务器在使用 CORS 时允许请求？*

1.  当我禁用网络安全时，浏览器内部究竟会发生什么？

2.  还有另一种方法来执行我的 CSR，而无需在服务器端添加标头或禁用安全性？

提前致谢

**编辑：** JSONP 也不成问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:23:22.230

> 为什么禁用浏览器的网络安全可以完成这项工作，而我需要服务器在使用 CORS 时允许请求？

同源策略的目的是防止 Mallory 的邪恶站点让 Alice 的浏览器访问 Bob 的站点并将 Alice 的数据暴露给 Mallory。

禁用浏览器中的安全性实际上是在说“我不在乎保护我在 Bob（或任何其他！）站点上的数据”。如果浏览器要靠近开放的网络，这是一件危险的事情。提供该选项是为了让开发更方便——我更喜欢可控性更强的解决方案（例如 Charles 代理中的 URL 重写选项）。

CORS 是 Bob 的网站，上面写着“此 URL 不包含任何 Mallory（或其他特定网站或每个人）不应访问的数据，因此他们可以访问它。Bob 的网站可以这样做，因为它知道哪些部分它包含公共数据，哪些部分包含私有数据。

> 当我禁用网络安全时，浏览器内部究竟会发生什么？

它禁用了上述安全功能并减少了对用户数据的保护。

> 还有另一种方法来执行我的 CSR，而无需在服务器端添加标头或禁用安全性？

一个代理。请参阅[绕过同源策略](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)的方法，特别[是反向代理方法](https://stackoverflow.com/a/3076439/19068)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:18:00.613

我猜您正在使用 AJAX 请求，这是另一个问题[Ways to Avoid the same-origin policy](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy) that has a big detail answer。

可以使用 Flash 对象（flash 没有这个问题）

还有关于“可能发生的最坏情况” [http://blogs.msdn.com/b/ieinternals/archive/2009/08/28/explaining-same-origin-policy-part-1-deny-read.aspx](http://blogs.msdn.com/b/ieinternals/archive/2009/08/28/explaining-same-origin-policy-part-1-deny-read.aspx)和[http ://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

# unit-testing - 序列包含多个元素 NancyBootstrapperBase 类

> ID：15138994
> 
> 赞同：3
> 
> 时间：2013-02-28T15:12:15.177
> 
> 标签：unit-testing, exception, nancy

我不知道为什么会抛出这个异常......我有一个单元测试：

```
[Test]
public void Should_return_status_ok_when_route_exists()
{
    // Given
    var bootstrapper = new DefaultNancyBootstrapper();
    var browser = new Browser(bootstrapper);

    // When
    var result = browser.Get("/", with =>
                                        {
                                            with.HttpRequest();
                                        });
    // Then
    Assert.AreEqual(HttpStatusCode.OK, result.StatusCode);

} 
```

在分配浏览器变量时，异常在 Nancy Bootstrapper 基类中引发，并带有跟踪堆栈跟踪

System.InvalidOperationException : 序列包含多个元素

```
at System.Linq.Enumerable.SingleOrDefault(IEnumerable`1 source)
at Nancy.Bootstrapper.NancyBootstrapperBase`1.GetRootPathProvider() in NancyBootstrapperBase.cs: line 558
at Nancy.Bootstrapper.NancyBootstrapperBase`1.get_RootPathProvider() in NancyBootstrapperBase.cs: line 172
at Nancy.Bootstrapper.NancyBootstrapperBase`1.GetAdditionalInstances() in NancyBootstrapperBase.cs: line 514
at Nancy.Bootstrapper.NancyBootstrapperBase`1.Initialise() in NancyBootstrapperBase.cs: line 242
at Nancy.Testing.Browser..ctor(INancyBootstrapper bootstrapper) in Browser.cs: line 39
at Tests.Tests.Should_return_status_ok_when_route_exists() in Tests.cs: line 34 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T11:28:48.413

我在 Nancy 0.16.1 的新测试程序集中看到了这一点，该程序集引用了 Nancy、Nancy.Testing 和包含我的模块的主服务程序集的项目引用（在 VS2010 中）。

服务程序集引用 Nancy.Hosting.Self。

测试程序集的构建将 Nancy.Hosting.Self.dll 拉入构建文件夹，测试失败并出现您描述的错误。

手动从构建文件夹中删除 Hosting dll 可以解决错误并且测试变为绿色，例如删除`MyTests\bin\Debug\Nancy.Hosting.Self.dll`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T07:35:51.573

在使用引用 Nancy.Hosting.Self 的项目进行测试时，我也遇到了同样的情况。

我的解决方法是创建一个 CustomBootstrapper 并覆盖 RootPathProvider 属性。

```
 class TestBootStrapper : DefaultNancyBootstrapper{
    protected override IRootPathProvider RootPathProvider {
        get {
            return new FakeRootPathProvider();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T08:48:49.560

我最近遇到了同样的问题。我正在通过尝试像这样解析 Nancy 模块来测试我的引导程序：

```
[Test]
public void PushModule_Is_Resolvable()
{
  var pushModule = mUnderTest.GetModule(typeof (PushModule), new NancyContext());
  Assert.That(pushModule, Is.Not.Null);
} 
```

这产生了问题中描述的异常。在阅读了 Chris 的回答后，我刚刚将该 dll 配置为不复制到 Visual Studio 中的输出文件夹：

*   在测试的项目中找到 Nancy.Hosting.Self 引用。
*   右键单击引用并选择“属性”。
*   将**复制本地**设置为**false**。
*   清理并重建您的解决方案。

这为我解决了这个问题。我会将此作为对克里斯回答的评论发布，但由于这是我的第一篇文章，我只能发布答案。

# php - 显示多表 mysql 查询

> ID：15138997
> 
> 赞同：2
> 
> 时间：2013-02-28T15:12:20.740
> 
> 标签：php, mysql, sql

这真的很难解释，但我会尽力做到最好，而不会让大家感到困惑。我有以下表格设计；

![mysql表](../Images/a6e962f6255a221d568df6c4a3fb5031.png)

这是我的mysqlFiddle来演示这个问题：[http ://sqlfiddle.com/#!2/1363c/1](http://sqlfiddle.com/#!2/1363c/1)

如您所见，表格工作正常，查询显示哪些收容所提供哪些服务，但是当我尝试在我的网络上显示此信息时出现问题。我目前正在使用以下代码；

```
<?php
    echo '<p>', "<strong>Shelter id</strong>: " . $query['shelter_id'].'</p>';
    echo '<p>', "<strong>Shelter name</strong>: " . $query['shelter_name'].'</p>';
    echo '<p>', "<strong>Street</strong>: " . $query['street'].'</p>';     
    echo '<p>', "<strong>City</strong>: " . $query['city'].'</p>';    
    echo '<p>', "<strong>Postcode</strong>: " . $query['postcode'].'</p>';  
    echo '<p>', "<strong>Contact Number</strong>: " . $query['phone_number'].'</p>';  
    echo '<p>', "<strong>Location</strong> :  " . $query['location_name'].'</p>'; 
?> 
```

但是对于我正在使用的查询，它不会将所有信息复制到一行中，我认为它会为 service_name 创建多行。

我是否可以创建一个查询来返回庇护所可以在一行上执行的所有服务？

编辑：我必须做 2 个单独的查询吗？一个获取通用避难所信息，然后另一个查询将服务返回到一个数组中，然后在页面上运行它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:16:45.930

如何使用`GROUP_CONCAT`？它的作用是将值组合成逗号分隔值。并且您可以稍后`Explode()`在`PHP`.

```
SELECT  shelter_name, 
        GROUP_CONCAT(services.service_name)  service_name
FROM    shelter
        INNER JOIN shelter_service 
          ON shelter.shelter_id= shelter_service.shelter_id
        INNER JOIN services 
          ON shelter_service.service_id = services.service_id
GROUP   BY shelter.shelter_id, shelter_name
ORDER   BY shelter_name 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/1363c/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:39:56.440

1.  GROUP_CONCAT() 仅在您的行数有限（10-100）时使用，如果数据较大会大大降低您的查询速度。

2.  2 个查询（一个用于类型，一个用于数据）

3.  保留此查询并修改结果（我最喜欢的方式）。在服务器或 JS 上循环处理您的数据并对其进行重组（添加 1 个额外维度）

```
var new_data = {};
for(var i in data)//data is your $query
{
  var row = data[i];
  //create another layer of the array (make it in 2 dimensions)
  if (typeof(new_data[row['Service_name']) == 'undefined)
     new_data['Service_name'] = [];
   //add only this kind of type data
     new_data['Service_name'].push(data);
 }
//now you can remove the data and use new_data 
```

.4\. 确保查询主要按服务名称排序，并且当您在显示（回显）处循环时，您会显示当前服务名称。

```
$current_name = '';
for(...)
 //if we passed to a new service in the loop
if ($query['service_name'] != $current_name) {
   echo '<h3>'.$query['service_name'].'</h3>;//display the new service
    $current_name = $query['service_name'];
} 
```