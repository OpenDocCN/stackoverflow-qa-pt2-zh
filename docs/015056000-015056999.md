# StackOverflow 问答 15056000-15056999

# ruby-on-rails-3 - Rails HABTM 自连接错误

> ID：15056000
> 
> 赞同：7
> 
> 时间：2013-02-24T20:01:26.347
> 
> 标签：ruby-on-rails-3, has-and-belongs-to-many

在我的应用程序中，一个用户可以关注很多用户，并且可以被很多用户关注。我尝试使用 has_and_belongs_to_many 关联对此进行建模

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :followers, class_name: "User", foreign_key: "followee_id", join_table: "followees_followers"
  has_and_belongs_to_many :followees, class_name: "User", foreign_key: "follower_id", join_table: "followees_followers"
end 
```

另外，我为连接表创建了一个迁移，如下所示：

```
class FolloweesFollowers < ActiveRecord::Migration
  def up
    create_table 'followees_followers', :id => false do |t|
        t.column :followee_id, :integer
        t.column :follower_id, :integer
    end
  end

  def down
    drop_table 'followees_followers'
  end
end 
```

当我尝试访问用户的关注者（User.first.followers）时，它会引发错误：

```
SQLException: no such column: followees_followers.user_id: SELECT "users".* FROM "users" INNER JOIN "followees_followers" ON "users"."id" = "followees_followers"."user_id" WHERE "followees_followers"."followee_id" = 1 
```

我不明白为什么要访问 followees_followers.user_id。我错过了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T06:14:02.507

:foreign_key 和[:association_foreign_key](http://guides.rubyonrails.org/association_basics.html#association-foreign-key)选项在设置多对多自连接时很有用。

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :followers, class_name: "User", foreign_key: "followee_id", join_table: "followees_followers", association_foreign_key: "follower_id"
  has_and_belongs_to_many :followees, class_name: "User", foreign_key: "follower_id", join_table: "followees_followers", association_foreign_key: "followee_id"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T00:10:31.200

很明显，它会尝试访问一个`user_id`字段，因为您正在从`User`类的实例访问关系。

尝试设置`:association_foreign_key => "follower_id"`你的`followers`关系和设置`:association_foreign_key => "followee_id"`你的`followees`关系。

# c# - 检查 WCF 服务中的传入消息

> ID：15056005
> 
> 赞同：0
> 
> 时间：2013-02-24T20:02:16.403
> 
> 标签：c#, .net, wcf

我正在使用客户端和服务器实现双工 WCF 服务。我可以控制客户端和服务器应用程序。我已经设置了服务主机，当我打开主机时，`host.Open();`我必须检查消息何时到达，以便我可以执行某些任务。问题是我如何收听传入的消息，以便当有新消息进来时，我可以执行某些任务。我相信它会使用`OperationContext.Current`但不确定使用哪个命令。

# java - ArrayList：在for循环期间删除一个对象

> ID：15056007
> 
> 赞同：-1
> 
> 时间：2013-02-24T20:02:30.557
> 
> 标签：java

我有一个小问题。我正在尝试从 ArrayList 中删除一个对象，但没有发生更改。

这是代码示例：

```
 List<Room> rooms = new CopyOnWriteArrayList<Room>();

    rooms.addAll(fp.getRooms());
    int counter = 1;

    for(Room r: rooms){
        for(Square s: r.getDoor()){
            r.getDoor().remove(s);
            String name = String.valueOf(fp.getRooms().size() + counter);
            Room doorRoom = new Room(name, false, s, s);
            rooms.add(doorRoom);
            counter++;
        }
    }

    fp.setRooms(rooms); 
```

我正在尝试删除该对象`s`并将其替换为新对象`doorRoom`。

输出：

```
第一> [S: 11:7; 是的，S：11:15；是的，S：11:20；真的]
第二>[S：11:7；是的，S：11:15；是的，S：11:20；真的]

```

我期待：

```
第一> [S: 11:7; 是的，S：11:15；是的，S：11:20；真的]
第二>[S：11:15；是的，S：11:20；真的]

```

以此类推……

问题是什么？

谢谢您，我很高兴收到您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:17:08.610

好的，您的代码有两个问题：

1.  您实际上并没有删除“r”。您只需从与“r”关联的门中删除一个正方形。
2.  您不能删除扩展 for 循环内的对象。您应该为此使用迭代器（请参阅：[在 Java 中的 foreach 循环中调用 remove](https://stackoverflow.com/questions/1196586/calling-remove-in-foreach-loop-in-java)），我不完全确定是否可以在迭代时将对象添加到集合中（请参阅[Java：在迭代期间向集合添加元素](https://stackoverflow.com/questions/993025/java-adding-elements-to-a-collection-during-iteration)） .

尝试按照链接中的说明解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:37:31.413

实际上，您可以在迭代时修改 Lists，但不能直接修改（它会抛出`ConcurrentModificationException`）。只是`ListIterator`用来做。前任：

```
 List<String> l = new ArrayList<>();
    l.add("a");
    l.add("b");
    l.add("c");

    for (ListIterator<String> it = l.listIterator(); it.hasNext();) {
        String s = it.next();
        if ("b".equals(s)) {
            it.remove();
            it.add("r");
        }
    }

    assertFalse(l.contains("b"));
    assertTrue(l.contains("r")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T20:18:32.213

`for (Square s: r.getDoor())`在内部使用迭代器，并且在迭代它时不能更改 ArrayList。如果使用循环变量`for (int i = 0;...)`（

您应该只记住要删除的对象，然后在循环后删除。

# c++ - 调用另一个对象内部定义的链表对象的函数

> ID：15056008
> 
> 赞同：0
> 
> 时间：2013-02-24T20:02:31.470
> 
> 标签：c++, object, linked-list, stack, queue

好的，我在这里有两门课。

队列对象和堆栈对象。

队列实际上是一个由头节点和下一个节点组成的链表。

```
class Node
{
public:
    Node(const T& data, Node* n = 0)
    {
        element = data;
        next = n;
    }

    T element;
    Node* next;
};

/*The head of the queue*/
Node* head; 
```

像这样……

现在 Queue 具有我已经实现的功能

```
friend ostream& operator<< <T>(ostream&,Queue<T>&);

/*The default constructor*/
Queue();

/*The copy constructor*/
Queue(const Queue<T>& other);

Queue<T>& operator=(const Queue<T>& other);

/*The destructor*/
~Queue();

void enqueue(const T& el);

T dequeue();

void increasePriority(const T& el);

bool isEmpty(); 
```

他们都工作...

所以我上了 Stack 课

```
Queue<T>* queue; 
```

这就是堆栈的定义...

问题是用 Stack 对象调用这些函数

```
friend ostream& operator<< <T>(ostream&,Stack<T>&);

/*The constructor for the Stack class*/
Stack();

/*The copy constructor*/
Stack(const Stack<T>& other);

Stack<T>& operator=(const Stack<T>& other);

~Stack();

void push(const T& el);

T pop();

T peek();

bool isEmpty(); 
```

我将如何实现这些函数以便它们使用 Queue 对象函数？

换句话说。Stack 类的构造函数必须调用 Queue 类的构造函数等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-07T13:43:10.580

正如 OP 所建议的，这可以通过从 Stack 构造函数调用 Queue 构造函数来实现，如下所示：

```
Stack<T> :: Stack() { queue = Queue<T>(); } 
```

# jquery - 如何在此叠加层中添加关闭按钮 (X)？

> ID：15056012
> 
> 赞同：0
> 
> 时间：2013-02-24T20:02:45.750
> 
> 标签：jquery, html, css, web

嗨，我正在使用来自 [http://demo.tutorialzine.com/2012/07/framewarp-jquery-plugin/的 Jquery 代码](http://demo.tutorialzine.com/2012/07/framewarp-jquery-plugin/)

除了右上角用于关闭页面的 X 按钮丢失外，一切正常！我怎样才能重新添加它？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:39:45.303

您可以在消息传递（蓝色）部分看到关闭按钮

```
<a onclick="frameWarp.hide();" id="close" class="button2" href="#">Close Window</a> 
```

在那里你可以插入图像

例如，将您的 css 更改为：

```
#close {
    position: absolute;
    right: 0;
    top: 0;
} 
```

和这个链接：

```
<a href="#" id="close" onclick="frameWarp.hide();"><img src="../images/close.png"></a> 
```

# javascript - Javascript 中的图像滑块

> ID：15056014
> 
> 赞同：1
> 
> 时间：2013-02-24T20:02:56.233
> 
> 标签：javascript, html

此图像滑块不会显示下一张图片。我有 3 张图片 .. image1、image2 和 image3 但它只停留在 image1 上。

```
<script type="text/javascript">
var image1 = new Image();
image1.src="jokes.png";
var image2 = new Image();
image2.src="facts.png";
var image3 = new Image();
image3.src="csharp.png";
</script>

<img src="jokes.png" name="slide" width="200" height="200">
<script type="text/javascript">
var step = 1;

function slideit() {
    document.images.slide.src = eval("image" + step + ".src");
    if (step < 3) {
        step++;
        else step = 1
        setTimeout("slideit()", 2500);
    }
    slideit()
}
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T20:09:54.343

因为你的函数`slideIt`永远不会被调用。第一个调用包含在函数中......

尝试这个

```
<script type="text/javascript">
var step = 1;

function slideit() {
    document.images.slide.src = eval("image" + step + ".src");

    if (step < 3)
        step++;
    else 
        step = 1

    setTimeout("slideit()", 2500);
}

//First call
slideit();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:16:24.527

除了 sdespont 的回答之外，还有语法问题

```
<script type="text/javascript">
var step = 1;

function slideit() {
    document.images.slide.src = eval("image" + step + ".src");
    if (step < 3){ 
      step++;
    }else{ 
     step = 1;
    }
    setTimeout("slideit()", 2500);

}

//First call
slideit();
</script> 
```

# xamarin.ios - 将 xcode 目标 c 主题和模板转换为单声道/xamarin

> ID：15056016
> 
> 赞同：1
> 
> 时间：2013-02-24T20:03:04.347
> 
> 标签：xamarin.ios, themes, xamarin

我从 App Design Vault 购买了一些模板，它们位于 XCode/Objective C 中。我想在 Xamarin Studio/MonoTouch 项目中使用它们，如何转换它们以便可以像转换某些主题一样使用它们在[Xamarin 的组件商店](http://components.xamarin.com/view/black-leather-theme/)中？

App Design Vault 模板的结构/布局示例可以从他们的网站下载，他们有一个名为 Ocean 的免费模板：[http ://emitymeapps.us1.list-manage.com/subscribe/post?u=088ecce4e59f7a30e9aa859af&id=e59abf1e54](http://emitymeapps.us1.list-manage.com/subscribe/post?u=088ecce4e59f7a30e9aa859af&id=e59abf1e54)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:12:48.527

好的，如果你查看他们示例项目的 AppDelegate.m 文件，有这样的函数：

```
-(void)customizeiPhoneTheme
{
    [[UIApplication sharedApplication] 
     setStatusBarStyle:UIStatusBarStyleBlackOpaque animated:NO];

    UIImage *navBarImage = [[UIImage tallImageNamed:@"menubar.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(5, 15, 5, 15)];

    [[UINavigationBar appearance] setBackgroundImage:navBarImage forBarMetrics:UIBarMetricsDefault];

    UIImage *barButton = [[UIImage tallImageNamed:@"menubar-button.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 4, 0, 4)];

    [[UIBarButtonItem appearance] setBackgroundImage:barButton forState:UIControlStateNormal 
                                          barMetrics:UIBarMetricsDefault];

    UIImage *backButton = [[UIImage tallImageNamed:@"back.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 14, 0, 4)];

    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButton forState:UIControlStateNormal 
                                                    barMetrics:UIBarMetricsDefault];

    UIImage *minImage = [UIImage tallImageNamed:@"ipad-slider-fill"];
    UIImage *maxImage = [UIImage tallImageNamed:@"ipad-slider-track.png"];
    UIImage *thumbImage = [UIImage tallImageNamed:@"ipad-slider-handle.png"];

    [[UISlider appearance] setMaximumTrackImage:maxImage forState:UIControlStateNormal];
    [[UISlider appearance] setMinimumTrackImage:minImage forState:UIControlStateNormal];
    [[UISlider appearance] setThumbImage:thumbImage forState:UIControlStateNormal];
    [[UISlider appearance] setThumbImage:thumbImage forState:UIControlStateHighlighted];

    UIImage* tabBarBackground = [UIImage tallImageNamed:@"tabbar.png"];
    [[UITabBar appearance] setBackgroundImage:tabBarBackground];

    [[UITabBar appearance] setSelectionIndicatorImage:[UIImage tallImageNamed:@"tabbar-active.png"]];

} 
```

您基本上必须将此代码移植到 MonoTouch 并将它们的图像添加到您的项目中。但这应该很容易，这里有几行翻译成 C# 的代码：

```
 UIImage navBarImage = UIImage.FromFile("menubar.png").CreateResiableImage(new UIEdgeInsets(5, 15, 5, 15));

 UINavigationBar.Appearance.SetBackgroundImage(navBarImage, UIBarMetrics.Default); 
```

检查错误，我这样做了。我也不确定是什么`[UIImage tallImageNamed]`，它必须是他们自己的扩展。我认为你应该只使用`UIImage.FromFile`.

# c# - 在 ListView 控件中查找 TextBox 控件

> ID：15056017
> 
> 赞同：0
> 
> 时间：2013-02-24T20:03:04.923
> 
> 标签：c#, asp.net

如何在“ListView”控件中访问或找到“TextBox”控件？

例如，我想`this.AddCommentTextbox.Text`在这个 aspx 页面的代码隐藏中使用属性。

aspx 页面代码：

```
 <asp:ListView ID="PostsListView" runat="server" DataSourceID="EntityDataSourcePosts">
   <ItemTemplate>
     <asp:TextBox Text="active" ID="AddCommentTextbox" runat="server"  TextMode="MultiLine" Height="100" Width="370"></asp:TextBox>
   </ItemTemplate>
 </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:57:01.763

```
TextBox commentTextBox = (TextBox)PostsListView.FindControl("AddCommentTextbox"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:06:38.717

只需遍历 ListView 的项目，然后使用`FindControl("AddCommentTextbox")`或循环通过控件来查找控件是否属于 type `TextBox`。

# java - java中计算字符数、行数和单词数时出错

> ID：15056023
> 
> 赞同：0
> 
> 时间：2013-02-24T20:03:38.127
> 
> 标签：java

我编写了以下代码来计算不包括空格的字符数，计算字数，计算行数。但是我的代码没有显示正确的输出。

```
import java.io.*;

 class FileCount
{

public static void main(String args[]) throws Exception
{
    FileInputStream file=new FileInputStream("sample.txt");
    BufferedReader br=new BufferedReader(new InputStreamReader(file));
    int i;
    int countw=0,countl=0,countc=0;
    do
    {
        i=br.read();
        if((char)i==(' '))
            countw++;
        else if((char)i==('\n'))
            countl++;
        else 
            countc++;

    }while(i!=-1);
    System.out.println("Number of words:"+countw);
    System.out.println("Number of lines:"+countl);
    System.out.println("Number of characters:"+countc);
}
} 
```

我的文件 sample.txt 有

```
hi my name is john
hey whts up 
```

我的输出是

```
Number of words:6
Number of lines:2
Number of characters:26 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:17:23.437

您还需要丢弃其他空白字符，包括重复（如果有）。A `split`around`\\s+`为您提供的单词不仅由所有空白字符分隔，而且还连续出现这些字符。

获得所有单词的列表后，`line`使用数组和 的长度方法更容易更新单词和字符的计数`String`。

这样的事情会给你结果：

```
String line = null;
String[] words = null;
while ((line = br.readLine()) != null) {
    countl++;
    words = line.split("\\s+");
    countw += words.length;
    for (String word : words) {
        countc += word.length();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:16:54.270

换行也意味着单词结束。=> 每个单词后并不总是有一个''。

```
 do
  {
  i=br.read();
    if((char)i==(' '))
        countw++;
    else if((char)i==('\n')){
        countl++;
        countw++;  // new line means also end of word
    }
    else 
        countc++;
}while(i!=-1); 
```

文件结尾还应该增加单词的数量（如果没有 '\n' 的 ' ' 是最后一个字符。同样处理单词之间的多个空格仍然没有正确处理。

=> 您应该考虑对处理此问题的方法进行更多更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T20:20:19.670

```
import java.io.*;

class FileCount {

    public static void main(String args[]) throws Exception {
        FileInputStream file = new FileInputStream("sample.txt");
        BufferedReader br = new BufferedReader(new InputStreamReader(file));
        int i;
        int countw = 0, countl = 0, countc = 0;
        do {
            i = br.read();
            if ((char) i == (' ')) { // You should also check for other delimiters, such as tabs, etc.
                countw++;
            }
            if ((char) i == ('\n')) { // This is for linux Windows should be different
                countw++; // Newlines also delimit words
                countl++;
            }  // Removed else. Newlines and spaces are also characters
            if (i != -1) {
                countc++; // Don't count EOF as character
            }

        } while (i != -1);

        System.out.println("Number of words " + countw);
        System.out.println("Number of lines " + countl); // Print lines instead of words
        System.out.println("Number of characters " + countc);
    }
} 
```

输出：

```
Number of words 8
Number of lines 2
Number of characters 31 
```

验证

```
$ wc sample.txt 
2  8 31 sample.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T20:23:49.730

试试这个：

```
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;

public class FileCount {
    /**
     *
     * @param filename
     * @return three-dimensional int array. Index 0 is number of lines
     * index 1 is number of words, index 2 is number of characters
     * (excluding newlines) 
     */
    public static int[] getStats(String filename) throws IOException {
        FileInputStream file = new FileInputStream(filename);
        BufferedReader br = new BufferedReader(new InputStreamReader(file));

        int[] stats = new int[3];
        String line;
        while ((line = br.readLine()) != null) {
            stats[0]++;
            stats[1] += line.split(" ").length;
            stats[2] += line.length();
        }

        return stats;
    }

    public static void main(String[] args) {
        int[] stats = new int[3];
        try {
            stats = getStats("sample.txt");
        } catch (IOException e) {
            System.err.println(e.toString());
        }
        System.out.println("Number of words:" + stats[1]);
        System.out.println("Number of lines:" + stats[0]);
        System.out.println("Number of characters:" + stats[2]);
    }

} 
```

# wpf - 为所有相同类型的控件设置一个事件

> ID：15056027
> 
> 赞同：4
> 
> 时间：2013-02-24T20:04:28.213
> 
> 标签：wpf, events, controls

在 WPF 中有一种方法可以为相同类型的所有控件设置特定类型的事件。例如，我试图在 TextBlock 类型的所有控件上设置 MouseLeftButtonDown 事件。这是我试图做的显然是错误的：

```
<Style TargetType="{x:Type TextBlock}">
    <Setter Property="MouseLeftButtonDown" Value="TextBlock_LeftClick"/>
</Style> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T20:14:39.167

是的，有一种方法，您可以使用中的`EventSetter`属性为所有应用了该样式的`Style`人设置一个`EventHandler``Elements`

例子：

```
<Style TargetType="{x:Type TextBlock}">
    <EventSetter Event="MouseLeftButtonDown" Handler="TextBlock_LeftClick" />
</Style> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-06T18:43:26.203

您可以使用 WPF EventManager 在单个语句中执行此操作

```
EventManager.RegisterClassHandler(typeof(Hyperlink), 
                                  Hyperlink.ClickEvent, 
                                 new RoutedEventHandler(this.OnHyperlinkClick)); 
```

# database - 外键休眠配置

> ID：15056030
> 
> 赞同：0
> 
> 时间：2013-02-24T20:04:48.457
> 
> 标签：database, eclipse, hibernate, jboss

我正在尝试使用 Eclipse 将休眠与现有的 mysql 数据库一起使用。

我已经成功地将表映射到类并执行了一些查询。但我有一个一对多关系的问题。

我有表“CARATTERISTICHE”（属性），它实际上是一棵树，由连接表“VALORI”（值）描述：“fk_child”“fk_parent”。

我希望 Caratteristica 类有一个类型为“children”的字段`List<Caratteristica>`，其中孩子应该是 CARATTERISTICA 和 VALORI 的连接。

我的第一次尝试是创建一个 pojo Caratteristica 并让 eclipse 生成 hibernate 的配置文件。

这不起作用，因为当我启动 getChildren 时，我得到的只是同一个对象（即每个节点都是他的父亲，这在我的数据库中是错误的）。

这是生成的 xml 的摘录：

```
<class name="model.Caratteristica" table="caratteristiche">
  <id name="id" type="java.lang.Integer">
   <column name="ID"/>
   <generator class="assigned"/>
  </id>
  <set access="field" lazy="true" name="children"
   sort="unsorted" table="valori">
   <key>
    <column name="id"/>
   </key>
   <one-to-many class="model.Caratteristica"/>
  </set> 
```

请注意，如果将列键从 id 更改为 fk_child，他在表“CARATTERISTICHE”中找不到 fk_child（但它应该在 VALORI 中查找，对吗？）

我也尝试过从表中生成 pojos，但更糟..也许我遇到了这个问题[hibernate-复合键配置](https://stackoverflow.com/questions/3587143/hibernate-composite-key-configuration)但是..这是我第一次使用 hibernate，我真的迷路了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:37:40.627

你的数据模型有点奇怪。

要么你有一个完整的树结构，即父母和孩子之间的 1 : n 关系。那么您就不需要连接表 VALORI。在 CARATTERISTICHE 中，您只需定义一个列 parentId，其中包含父行的 id。在您的映射中，您将此新列作为键标记：`<key> <column name="parentId"/> </key>`

或者您在父母和孩子之间有一个 m : n 关系，它由连接表 VALORI 定义。树结构可以定义为具有 m : n 关系的特殊情况，但其他结构也是可能的。然后你必须使用`<many-to-many>`标签（而不是一对多）。`<many-to-many>`标签包含属性，它允许在`column`另一个表中指定相应外键的名称。

# iphone - NSString 设置为 NSMutableURLRequest 的 HTTP 标头时表现奇怪

> ID：15056034
> 
> 赞同：1
> 
> 时间：2013-02-24T20:05:25.623
> 
> 标签：iphone, objective-c, nsstring, nsmutableurlrequest

我正在将具有某些内容的字符串放在一起，该字符串设置为 NSMutableURLRequest 的 HTTP 标头字段：

```
NSString *authenticationHeaderString = [NSString stringWithFormat:@"OAuth oauth_callback=\"%@\", oauth_nonce=\"%@\", oauth_signature_method=\"HMAC-SHA1\", oauth_timestamp=\"%@\", oauth_consumer_key=\"xxxxxxxxx\", oauth_signature=\"%@\", oauth_version=\"1.0\"", [callbackURLString URLEncodedString], nonce, timestampString, [BYOAuthSignatureString signatureStringWithParameters:signingParams URL:[mURLRequest.URL absoluteString] HTTPMethod:mURLRequest.HTTPMethod]];
NSLog(@"authenticationHeaderString: %@", authenticationHeaderString);
[mURLRequest setValue:[NSString stringWithFormat:@"%@", authenticationHeaderString] forHTTPHeaderField:@"Authorization"];
NSLog(@"header:%@", mURLRequest.allHTTPHeaderFields); 
```

在标头字段`\"`中未转换为`"`

`authenticationHeaderString: OAuth oauth_callback="http%3A%2F%2Fbytolution.com", oauth_nonce="o7QNfKOMBKtdZQmJrbV9QWqVwUkkRK1ABbjfK4hWTQ", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1361735323", oauth_consumer_key="xxxxxxxxxxx", oauth_signature="koNYscKJx3WwC7M4kHsrMpfzYoo=", oauth_version="1.0"`

`header:{ Authorization = "OAuth oauth_callback=\"http%3A%2F%2Fbytolution.com\", oauth_nonce=\"o7QNfKOMBKtdZQmJrbV9QWqVwUkkRK1ABbjfK4hWTQ\", oauth_signature_method=\"HMAC-SHA1\", oauth_timestamp=\"1361735323\", oauth_consumer_key=\"xxxxxxxxxxxx\", oauth_signature=\"koNYscKJx3WwC7M4kHsrMpfzYoo=\", oauth_version=\"1.0\""; }`

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:16:48.910

这正是 NSDictionary`mURLRequest.allHTTPHeaderFields`打印自身的方式。每当 NSDictionaries 打印它们的内容时，它们会双引号包含空格的任何字符串。除其他外，它们还转义字符串中的任何双引号。

字符串没有改变。您可以通过这样做来验证这一点

```
NSLog(@"authHeader: %@", [mURLRequest.allHTTPHeaderFields objectForKey: @"Authorization"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:09:42.200

它被转换了......但随后它被转换回用于显示。

您的标题应该没问题，只是它显示为用于记录的字符串。

# ruby-on-rails - 使用相关模型属性返回对象

> ID：15056036
> 
> 赞同：0
> 
> 时间：2013-02-24T20:05:37.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个`Item`可以是`ItemType`. 有`ItemType`一个`attribute`要么`true`要么`false`。

```
Class Item
  belongs_to :item_type
end

Class ItemType
  has_many :items
end 
```

目前，我只是`x`以通常的方式抓取最后一个对象：

```
latest_items = Item.last(x) 
```

现在，我需要返回一个列表，`x` `Items`其中列出`ItemType`了`attribute`set to的位置`true`，如下所示（伪代码）：

```
latest_items = Item.last(x).where(Item.item_type.attribute = "true") 
```

这在 Rails 中很容易实现吗？似乎它应该是直截了当的，但我正在四处寻找，无法找到解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:47:26.043

您可以使用

```
latest_items = Item.joins(:item_type).where("item_type.attribute = ?", true).limit(x).order('id desc') 
```

# objective-c - 两个图像的 didFinishPickingMediaWithInfo

> ID：15056037
> 
> 赞同：0
> 
> 时间：2013-02-24T20:05:41.560
> 
> 标签：objective-c, xcode, cocoa-touch

我有两个名为`obsPic1`和`obsPic2`

他们从选择器/相机接收图像。这适用于一个图像，但任何更多图像都是相同的。我如何为多个图像执行此操作？我试过访问按钮发件人标签但得到未声明的标识符错误，我也尝试过使用`if`语句。这样做的正确方法是什么？

```
- (IBAction)addObsPhotoBtnPresssed:(id)sender {
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
        LogCmd();
        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
        imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        imagePicker.delegate = self;
        imagePicker.allowsEditing = YES;
        [self.editController presentModalViewController:imagePicker animated:YES];
        //iPad
    }
    else {
        if (self.pop) {
            [self.pop dismissPopoverAnimated:YES];
        }
        UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];
        imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
        imagePickerController.delegate = self;
        imagePickerController.allowsEditing = YES;
        self.pop=[[UIPopoverController alloc] initWithContentViewController:imagePickerController];
        [self.pop presentPopoverFromRect:((UIButton *)sender).bounds inView:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

    }
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    [picker dismissModalViewControllerAnimated:YES];
    UIImage *image = [info objectForKey:UIImagePickerControllerEditedImage];
    self.obsPic1.backgroundColor = [UIColor whiteColor];
    self.obsPic1.image = image;
    NSData *imageData = UIImagePNGRepresentation(image);
    NSString *path = [ICUtils pathForDocument:@"obsPic.png"];
    [imageData writeToFile:path atomically:NO];

    UIImage *image2 = [info objectForKey:UIImagePickerControllerEditedImage];
    self.obsPic2.backgroundColor = [UIColor whiteColor];
    self.obsPic2.image = image2;
    NSData *imageData2 = UIImagePNGRepresentation(image);
    NSString *path2 = [ICUtils pathForDocument:@"obsPic2.png"];
    [imageData2 writeToFile:path2 atomically:NO];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:11:39.877

您`image`和`image2`引用相同的图像：

`[info objectForKey:UIImagePickerControllerEditedImage]`

您是否希望参考已编辑和原始图像：

```
 UIImage *image = [info objectForKey:UIImagePickerControllerEditedImage]; 
```

和

```
 UIImage *image2 = [info objectForKey:UIImagePickerControllerOriginalImage]; 
```

或相反亦然？如果 OTOH 你试图允许多个图像选择查看[ELCImagePickerController](https://github.com/elc/ELCImagePickerController)

# chef-infra - 如何更改passenger_apache2 食谱的“用户”？

> ID：15056040
> 
> 赞同：0
> 
> 时间：2013-02-24T20:06:19.027
> 
> 标签：chef-infra

我想设置一个带有 chef-solo 的节点，我可以在其中使用 Capistrano 进行部署。为此，我正在考虑使用这本食谱：

*   [https://github.com/opscode-cookbooks/passenger_apache2](https://github.com/opscode-cookbooks/passenger_apache2)

但是，默认设置使“root”拥有应用程序，这与我的 capistrano deploy.rb 冲突 - 我使用“vagrant”作为用户。

那么，我将如何为上述食谱设置用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:17:24.473

我需要先创建具有正确权限的目录：

```
目录“/u/apps”做
  所有者“流浪者”
  “流浪者”组
  模式“0775”
  递归真
结尾

web_app "myapp" 做
  docroot "/u/apps/demo/current/public"
  模板“myapp.conf.erb”
  server_name "myproj.#{node[:domain]}"
  server_aliases [ "myproj", node[:hostname] ]
  rails_env “发展”
结尾

```

# c++ - 查找与存储在向量中的对象对应的迭代器

> ID：15056041
> 
> 赞同：0
> 
> 时间：2013-02-24T20:06:24.897
> 
> 标签：c++, stl

我有一个向量 v 包含类型结构的对象，比如 A。现在我需要找到存储在这个向量中的特定对象的迭代器。例如：

```
 struct a
    {
    };
    vector<a> v;
    struct temp;  //initialized 
```

现在，如果我会使用

```
find(v.begin(),v.end(), temp); 
```

然后编译器生成错误，说不匹配 operator `'=='`。

获取与向量中的对象相对应的迭代器的任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:09:07.610

您必须`bool operator==(const a& lhs, const a& rhs)`为您的类提供相等运算符，或将比较函子传递给`std::find_if`：

```
struct FindHelper
{
  FindHelper(const a& elem) : elem_(elem) {}
  bool operator()(const a& obj) const
  {
  // implement equality logic here using elem_ and obj
  }
  const a& elem_;
};

vector<a> v;
a temp;
auto it = std::find_if(v.begin(), v.end(), FindHelper(temp)); 
```

或者，在 c++11 中，您可以使用 lambda 函数而不是仿函数。

```
auto it = std::find_if(v.begin(), v.end(),  
                       [&temp](const a& elem) { /* implement logic here */ }); 
```

# c++ - 如何输出变量可被整除的数字？

> ID：15056046
> 
> 赞同：-7
> 
> 时间：2013-02-24T20:06:41.913
> 
> 标签：c++, variables

抱歉，我的电子课程作业有问题。我被要求编写一个程序来确定用户输入的数字是否是素数，然后说出它的素数，或者给出输入可被整除的数字。我应该使用哪种语法来实现它？
例如：“6 可与 6;3;2;1 整除”这是我目前的代码：

```
 #include<iostream>
   #include<conio.h>  
   using namespace std;
   int main()  
   {
   int P,count=0;
   cout<<"Enter a number:\n"; /*Asks for user input*/
   cin>>P;                    /* User input P*/
   for(int a=1;a<=P;a++)
   {
   if(P%a==0)
   {
   count++;
   }
   if(count==2)
         {
        cout<<"Prime number.\n";  /* Provided option when the number is prime number*/
         }
       else
        {
          cout<<" Not prime number \n"; /* This is where I am supposed to provide the               numbers input is divisible with*/
        }
   getch();
   } 
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:14:39.643

不完全确定出了什么问题，但是您的程序会打印出类似

```
Enter a number:
6
 Not prime number 
Prime number.
 Not prime number 
 Not prime number 
 Not prime number 
 Not prime number 
```

此外，`<conio.h>`不是标准的 C++。我建议你写这样的东西（注意使用`std::vector`来累积除数）：

```
#include <iostream>
#include <vector>

int main()
{
    int n;
    std::cout << "Enter a number: ";
    std::cin >> n;

    if (n == 0) {
        "Not a prime; 0 is divisible by all integers";
        return 0;
    }

    std::vector<int> divisors;

    for (int i = 1; i <= n; i++) {
        if (n % i == 0) {
            divisors.push_back(i);
        }
    }

    if (divisors.size() > 2) {
        std::cout << "Not a prime; divisors:" << std::endl;
        for (std::vector<int>::iterator it = divisors.begin(); it != divisors.end(); it++) {
            std::cout << *it << std::endl;
        }
    } else {
        std::cout << "Prime" << std::endl;
    }

    return 0;
} 
```

# iphone - 无法从 iOS 6 上的应用程序启动地图

> ID：15056050
> 
> 赞同：0
> 
> 时间：2013-02-24T20:07:13.770
> 
> 标签：iphone, ios, maps

我正在尝试从我的应用程序中启动地图，并且我正在使用以下内容：

```
- (void) showMap:(id) button {
    UIApplication *application = [UIApplication sharedApplication];
    NSString *address = [((PhoneButton *) button).cell.client fullAddress];
    NSString *addressUrl = [NSString stringWithFormat: @"http://maps.apple.com/?q=%@", address];
    NSLog(@"Maps String: %@", addressUrl);
    NSURL *map_url = [NSURL URLWithString:addressUrl];
    [application openURL:map_url];
}; 
```

好吧，它不工作。我试图找到问题，但看起来我做得对。那么，我错过了什么？

PS：我的地址格式是“800, Madison Ave, New York, NY”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:59:04.377

尝试这个。

您的地址格式就像

> “800，麦迪逊大道，纽约，纽约”

其中包含单词之间的空格。删除带“+”号的空格。您的最终到达网址应类似于以下网址。有了这个，您可以从 iOS 6 上的应用程序启动 Map。

[http://maps.apple.com/?q=800,+Madison+Ave,+New+York,+NY](http://maps.apple.com/?q=800,+Madison+Ave,+New+York,+NY)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:03:45.657

URL 不能有空格。空格和其他特殊字符需要正确转义。你要：

```
NSString *escapedAddress = [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *addressUrl = [NSString stringWithFormat: @"http://maps.apple.com/?q=%@", escapedAddress]; 
```

# python - Python 3.3.0 错误

> ID：15056051
> 
> 赞同：0
> 
> 时间：2013-02-24T20:07:23.140
> 
> 标签：python

用 Python 3.3.0 尝试了我的第一个程序

```
print ("cookies")
x= input ("enter your name")
print ("good day to you sir ") + x 
```

当我想用 F5 启动我的程序时，它说

```
Traceback (most recent call last):
  File "C:/Users/xxxx/Desktop/cookies.py", line 3, in <module>
    print ("good day to you sir ") + input
TypeError: unsupported operand type(s) for +: 'NoneType' and 'builtin_function_or_method' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T20:10:28.790

```
print ("good day to you sir ") + x 
```

`print`是 Python 3 中的函数，所以括号属于函数。`print`函数本身有一个返回值，`None`所以你基本上做的是，`None + x`这会引发你得到的错误。

相反，您要做的是在括号内直接连接两个字符串：

```
print("good day to you sir " + x) 
```

此外，您的异常实际上有点不同，您仍然有`print(..) + input`（我猜这是您的代码的旧版本？）请注意，这`input`是对从用户获取数据的函数的引用，因此您实际上尝试添加`None`和功能参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:10:17.583

打印值的正确方法是`print ("hello", input)`或`print ("hello" + input)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-12T00:34:43.480

所有要打印的文本和变量都必须在打印函数的括号内。

所以而不是：

```
print("good day to you sir ") + x 
```

这将是：

```
print("good day to you sir " + x) 
```

或者，您也可以使用逗号而不是加号来自动提供空格：

```
print("good day to you sir", x) 
```

代码的所有其他部分都很好。

# php - 从文件夹中提取专用图像 - 显示图像 + 文件名（去除文件名的一部分 + 文件扩展名）

> ID：15056053
> 
> 赞同：1
> 
> 时间：2013-02-24T20:07:44.553
> 
> 标签：php

基于[this question](https://stackoverflow.com/questions/5525677/showing-images-in-php/15047583)中的原始代码和那里的Tims更正（答案1）我试图实现以下目标：

我有一个包含图像的文件夹“img”，如下所示：

*   image_123.jpg
*   image_123_alternate.jpg
*   image_456.jpg
*   image_456_alternate.jpg
*   image_789.jpg
*   image_789_alternate.jpg
*   依此类推...
    （注：所有图像的大小相同，为 200px/200px）

从“img”文件夹中提取时，简单的 HTML 页面应该以下列方式显示图像和文件名：

文件名中包含“_alternate”部分的实际图像（并且只有这些）+ 文本框中图像下方不包含“_alternate”部分（没有文件扩展名）的图像文件名。所有对应按字母顺序拉动。在下面的示例中，粗体大写字母表示要显示的实际图像：

**IMAGE_123_ALTERNATE**
文本框：“image_123”

**IMAGE_456_ALTERNATE**
文本框：“image_456”

**IMAGE_789_ALTERNATE**
文本框：“image_789”

这是我到目前为止所拥有的，但这会显示所有图像和文件名：

```
<?php
$dir = opendir("img");
while (($file = readdir($dir)) !== false)
{
echo "<a href='img/".$file."' target='_blank'> <img src='img/".$file."'width='200' height='200' /></a><br />";
echo "<textarea>$file</textarea><br /><br />";
}
closedir($dir);
?> 
```

任何帮助将非常感激！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:11:21.660

只需通过 while 循环中的 if 语句。检查文件名是否包含alternate。如果它不包含备用运行相同的代码，用“_alternate.ext”替换文件扩展名，同时保持文本区域相同。如果它确实包含alternte，则什么也不做。这样你只处理一半的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:23:48.150

此代码应按字母顺序显示所有图像的列表（使用 PHP 的 GLOB 函数）。

然后它输出一个 HTML 图像（导致“_alternate”图像）和图像的文件名（没有路径，“_alternate”或“扩展名”）。

```
<?php

    foreach (glob("img/*_alternate.jpg") as $file) {

         $filename_parts = pathinfo($file);
         $filename = $filename_parts['filename'];
         $filename = str_replace("_alternate", "", $filename);

         echo "<div>";
         echo "<img src=\"/$file\" width=\"200\" height=\"200\" />";
         echo "<p>$filename</p>"; 

    }

?> 
```

我已经分解了查找新文件名的函数和输出 HTML 代码的部分，以便于阅读和理解，如果你愿意，可以将它们合并为一个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T20:24:19.867

```
$files = new \DirectoryIterator('img'); // <- this should be the full absolute path!
$images = array();

// pick up jpg images that end in 'alternate'
foreach($files as $file){
  $name = $file->getBasename('.jpg');
  if(strripos($name, 'alternate') === (strlen($name) - 9))
    $images[] = $name;        
}

// sort them
sort($images, SORT_STRING);

// and do your thing here with $images...
var_dump($images); 
```

# c++ - 是否有作为一组 Clang 工具实现的 C++ 重构模式？

> ID：15056054
> 
> 赞同：8
> 
> 时间：2013-02-24T20:07:46.090
> 
> 标签：c++, clang

所以我发现了[关于 Clang 工具的精彩视频](http://www.youtube.com/watch?feature=player_detailpage&v=yuIOGfcOH0k)......并且不禁想知道：是否有任何用于完整项目美化和清理的示例代码库/编译工具套件（类似于 C# resharper）？项目规模的代码格式，例如：行尾的额外空间、成员/类命名的统一、`{}`括号后放置的方式`if`等？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-01T02:35:16.670

Clang 的 libtooling 是相当新的，因此目前没有太多基于它的工具。

同样根据我的经验，链接起来很痛苦（没有llvm-config的clang版本，并且在[教程](http://clang.llvm.org/docs/LibASTMatchersTutorial.html)中，开发人员似乎认为人们会在完整的clang repo中构建他们的工具，而不是作为很好的单独项目。Ubuntu构建clang 仅包含 libtooling 作为静态 .a，没有 .so。Ubuntu 的官方 LLVM 每晚构建似乎根本不包含静态 libclangTooling.a。

[include-what-you-use](https://code.google.com/p/include-what-you-use/)旨在删除未使用的头文件。

有[clReflect](http://donw.org/b/?d=clReflect)可以生成反射绑定。（不确定这实际上是使用 libtooling 还是仅仅使用 libclang，但它是同一种东西。）

还有支持一些其他操作的[重构](https://github.com/lukhnos/refactorial/)。

有一些工具包含[在 clang](http://llvm.org/svn/llvm-project/clang-tools-extra/trunk/)中。最值得注意的是一个[c++11 迁移工具](http://blog.llvm.org/2013/04/status-of-c11-migrator.html)。还有一个用于模块的工具（正在为未来版本的 C++ 开发的功能）。

一旦起飞，这些东西应该非常有用和强大。

就个人而言，我正在尝试（目前未成功）构建一个简单的 CLI 重构工具 cppmv，它旨在让您重命名类、函数、变量，在命名空间等周围移动它们，同时保持它们的使用同步，但我不在这个阶段有任何有用的东西。其他工具可能是 cppls（列出命名空间、类函数等）。也许 cppcp，如果你出于某种原因想要复制某些东西（例如，你可以有一个“模板”类），但它似乎没那么有用。

我也在考虑制作一个 FUSE 用户空间文件系统，它可以让你挂载和浏览你的项目，这样你就可以使用传统的“mv”和“cp”命令，但这更像是学习 FUSE 的借口，而不是因为它有用那样做事。尽管可以在它们自己单独的单独“文件”中编辑特定类和函数的源代码，尽管这对于 IDE 之类的许多东西没有用，因为您会丢失有关标头等的信息。

拥有一个实时的“编辑时查看”、基于 ASTMatcher 的工具或一些简单的重构脚本语言绑定也会很好。

编辑：现在还有用于代码样式格式的 clang-format 和（从 3.4 开始）用于 Vim 集成的 clang-format.py 脚本。clang-apply-replacements “[查找包含序列化替换的文件，并在重复数据删除和检测冲突后应用这些更改。](http://llvm-reviews.chandlerc.com/D1424) ”

可能值得一看[这个视频](http://channel9.msdn.com/Events/GoingNative/2013/The-Care-and-Feeding-of-C-s-Dragons)，其中一些东西被演示了。

# android - 如何在运行时设置按钮 layout_marginTop/layout_marginBottom？

> ID：15056055
> 
> 赞同：2
> 
> 时间：2013-02-24T20:08:07.743
> 
> 标签：android, button, android-widget, runtime

我正在使用带有 4 个按钮的相对布局（在中心，一个在另一个下方）。
我的问题是调整所有按钮之间的间隙，以便所有按钮之间的间隙相同。

我想根据屏幕的高度动态地做到这一点（我使用 Display 类来获取实际高度）。

最好的方法是什么？

谢谢，
阿米格尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T20:24:17.307

您可以通过修改 View 的 LayoutParams 来做到这一点

```
Button b;// your button
RelativeLayout.LayoutParams lp=(RelativeLayout.LayoutParams)b.getLayoutParams();
lp.leftMargin=10;//your left margin here
lp.topMargin=10;//your top margin here and do this for other 2 margins if you need to 
```

有时你需要打电话

```
b.setLayoutParams(lp); 
```

应用更改

我也不知道你如何获得屏幕尺寸，但这适用于每个 API：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics); 
```

# c++ - C++ 自动确定素数

> ID：15056063
> 
> 赞同：0
> 
> 时间：2013-02-24T20:08:57.847
> 
> 标签：c++, loops, numbers, boolean, primes

我试图在 C++ 中找出如何找到一个范围内的所有素数（现在使用 100）

我不关心性能，我从 C++ 开始，并试图从我的书中理解这个程序练习。我有我正在尝试在下面使用的程序，但它一直返回错误。有任何想法吗？我已经阅读了几乎所有 googles/bing 的帮助以及堆栈溢出。我可以为它编写代码来输入数字；只是没有遍历所有数字

关于我做错了什么的任何想法？

```
#include <iostream>

using namespace std;

bool isPrime(long n);
int main() 
{
    int i;
    //some vars
    char emptyVar;

    //first loop (to increment the number)
    for (i = 0; i <= 100; i++)
    {
        //checking all numbers below 100

        if (isPrime(i) == true)
        {
            //is true
            cout << i << ", ";
        }
        else if (isPrime(i) == false)
        {
            //is false
            cout <<"false , ";
        }
    }
    cin >> emptyVar;
}

bool isPrime(long n)
{
    long i =0;
    //checks to see if the number is a prime
    for (i = 2; i < n; i++) // sqrt is the highest possible factor
    {
        if ( n % i == 0) // when dividing numbers there is no remainder if the numbers are both factors
        {
            // is a factor and not prime
            return false;
        }
        else if (n % i != 0 && i >= 100)
        {
            //is not a factor
            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:14:49.120

该函数`isPrime`没有`return`针对每个可能的执行路径的语句。例如，做什么，什么`isPrime`时候`n == 2`？

这是`for`循环的工作原理（在伪代码中）。一般语法是

```
for (initialiazion; condition; increment) {
   body;
}
rest; 
```

这可以翻译成一个`while`循环：

```
initialiazion;
while (condition) {
  body;
  increment;
}
rest; 
```

特别是，在, before执行`condition`之后立即检查。`intialization``body`

我怀疑，你认为`for`循环是这样工作的：

```
initialiazion;
do {
  body;
  increment;
} while (condition);
rest; 
```

即在第一个*之后*`increment`检查条件。但事实并非如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:16:57.700

如果它不是 EVERY i 的一个因素，而不仅仅是它遇到的第一个因素，它应该返回 true。

> ```
> bool isPrime(long n)
> {
>     long i =0;
>     //checks to see if the number is a prime
>     for (i = 2; i < n ; i++) // sqrt is the highest possible factor
>     {
>         if ( n % i == 0) // when dividing numbers there is no remainder if the numbers are both factors
>         {
>             // is a factor and not prime
>             return false;
>         }
>     }
>     return true; 
> ```
> 
> }

同样在您的情况下，搜索超出 i > n/2 是没有意义的。当然，您应该看一下文献，它们是非常强大的素性测试算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T20:18:11.197

你的`isPrime`函数不正确。它应该检查所有数字，然后才`return true;`

并且永远不会在您的输入上调用此块：

```
 else if (n % i != 0 && i >= 100)
    {
        //is not a factor
        return true;
    } 
```

# bash - BASH 评估输出重定向

> ID：15056065
> 
> 赞同：0
> 
> 时间：2013-02-24T20:09:03.027
> 
> 标签：bash

我想将表达式（'if' 语句）的输出重定向到文件中。例如，我想将“./primitives”的输出重定向到一个文件中，其中“if”语句的表达式是“./primitive”，类似于：

```
if ./primitives 1>> output.txt ; then
  echo "primitives OK. " | tee -a output.txt
fi 
```

上面的行不通，所以从：

```
if ./primitives ; then
  echo "primitives OK. "
fi 
```

如何将 './primitives' 的输出保存到文件中，然后如果 './primitives' 正确执行，则仅回显字符串“primitives OK.”？

作为奖励点，如果正确执行，我将如何仅重定向附加到文件“output.txt”的“./primitives”的 STDOUT，然后将“primitives OK.”打印到控制台和附加到文件中？但是如果 './primitives' 没有正确执行，不要打印任何东西到 'output.txt' 并且只打印 STDERR 到控制台？

还是我以错误的方式看待整个问题？

谢谢

编辑：

当前脚本和输出是：

脚本：

```
#!/bin/bash

if ./compile.sh; then
  echo "Compile OK. " | tee output.txt

  if ./primitives 1>> output.txt ; then
    echo "primitives OK. " | tee -a output.txt
  fi

  if ./composites 1>> output.txt ; then
    echo "composites OK. " | tee -a output.txt
  fi

fi 
```

当前控制台输出：

```
Compile OK. 
```

所需的控制台输出：

```
Compile OK. 
primitives OK. 
composites OK. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:28:41.507

你的第一个例子很好；你只需`output.txt`要先确保它存在。您有两个选择：使用`>`而不是`>>`（1 是不必要的，因为如果您不提供文件描述符，默认情况下会重定向标准输出），或者`touch output.txt`在您的`if`语句之前执行以创建文件（如果文件尚不存在）。

# delphi - 连接到 Synapse 上的某些代理时，SSL_Connect 挂起

> ID：15056069
> 
> 赞同：5
> 
> 时间：2013-02-24T20:09:21.540
> 
> 标签：delphi, openssl, timeout, connect

我有一个多线程软件，它使用对象的方法循环通过一个`TStringList`HTTP URL ... 但是，代理开始出现一个错误 - 较少使用好的私有代理，更多的是坏的公共代理。有时，一些线程会挂起并变得 100% 无响应。超时设置和代码将被忽略；不会提出任何例外。不管我要等多久（最多 10 分钟），线程仍然会挂起。关闭软件是停止线程的唯一方法。`HTTPMethod``THTTPSend``heartbeat`

我发现被指控的方法是`SSL_Connect`。根据我的阅读，可以通过使用非阻塞套接字来纠正这种挂起行为（[openssl ssl_connect 永远阻塞 - 如何设置超时？](https://stackoverflow.com/questions/11835203/openssl-ssl-connect-blocks-forever-how-to-set-timeout)）

问题是，Synapse 是一个阻塞套接字库。我总是可以为这个小软件使用非阻塞套接字库，但我想为我的一些更大的软件实现 SSL 协议。我不能为另一个可能有自己的错误的 Internet 库更改他们的所有代码。

如何`SSL_Connect`在仍在使用 Synapse 的同时设置某种超时？

*没有代码，因为一切都非常简单。这是一个被循环的 URL 的 TStringList——没有别的了！但是，如果您认为需要（或者如果您需要任何其他类型的信息），请告诉我。*

**德尔福使用：** 2007

**使用的 Synapse 版本：** 40 版（2012 年）（*编辑：*最新的 SVN 主干下载仍然存在该错误。）

**使用的 OpenSSL 版本：** 1.0.1e

# html - 在图像悬停时显示文本（垂直居中）

> ID：15056070
> 
> 赞同：0
> 
> 时间：2013-02-24T20:09:25.067
> 
> 标签：html, css, vertical-alignment

试图弄清楚如何将图像悬停在此演示中时显示的文本垂直居中：http: [//jsfiddle.net/XCNKj/](http://jsfiddle.net/XCNKj/)

HTML

```
<div class="main">       
  <article class="work" id="project-1">
    <img src="http://lorempixel.com/output/sports-q-g-430-269-5.jpg">
    <div class="covering background"></div>
    <div class="covering foreground">
        <h2>Project 1</h2>
    </div>
  </article>  
  <article class="work" id="project-2">
    <img src="http://lorempixel.com/output/nightlife-q-g-430-269-2.jpg">
    <div class="covering background"></div>
    <div class="covering foreground">
        <h2>Project 2</h2>
    </div>
  </article>   
</div> 
```

CSS

```
.work {
    width: 430px;
    height: 269px;
    margin-left: 30px;
    margin-bottom: 30px;

    display: inline-table;
    position: relative;
}

.covering {
    position: absolute;
    top: 0; left: 0;
    opacity: 0;
    filter:alpha(opacity=0);
}

.work:hover .covering {
    opacity: 1;
    filter:alpha(opacity=100);
    cursor: pointer;
}

.background {
    width: 100%; height: 100%;
    background: white;
}

.foreground {
    bottom: 0; right: 0;
    margin: auto;
    text-align: center;
}

.work h2 {
    font: 36px/40px Helvetica;
    height:100%;
    margin: 0;
    padding: 0;
} 
```

问题是图像的大小可能会有所不同，并且弹出的标题可能是多行。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:21:24.303

在非 TD 元素上，垂直中心需要将 line-height 设置为固定值。**`.work h2`**将您的CSS的高度属性替换为**`line-height: 269px;`**

```
.work h2 {
    font: 36px/40px Helvetica;
    line-height: 269px;
    margin: 0;
    padding: 0;
} 
```

# java - 单客户端服务器的最佳实践？

> ID：15056073
> 
> 赞同：0
> 
> 时间：2013-02-24T20:09:41.073
> 
> 标签：java, networking, io

是否最好启动一个线程来处理一个客户端，另一个线程用于连接但告诉他们服务器很忙，或者我应该坚持使用单线程方法，其中同一个线程接受并处理客户端，以便其他人可以没有连接到它？（如果是这样的话）

编辑：我应该注意不会有 239482340 人连接到它。通常只有一个人会连接到服务器，但我希望我的应用程序能够处理另一个尝试连接而不会摔倒的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:14:25.110

坚持使用单线程对服务器来说更好，因为资源消耗非常低。但是，这对客户端来说可能很烦人，因为它不知道服务器是否有问题或者只是忙。

让线程告诉其他用户服务器正忙会占用更多资源，但对客户端更好。

在您的特定情况下，任何一种方法都应该没问题。我想这真的取决于客户和他们想要什么...... :-/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:21:06.313

构建此类系统通常使用两种主要策略：

*   基于多线程策略的解决方案，为每个传入的请求分配不同的线程或进程。该模型用于许多商业服务器
*   事件驱动模型基于使用非阻塞 I/O 操作来同时响应来自不同客户端的多个请求。这是一种不断增长的方法。

# php - preg_replace 自动添加 < 和 > ，但这很奇怪？

> ID：15056077
> 
> 赞同：-2
> 
> 时间：2013-02-24T20:09:52.973
> 
> 标签：php, preg-replace

我懂了：

```
$_response_body = preg_replace("</body>","<script>alert('test');</script><br /></body>",$_response_body); 
```

它应该写什么：

```
<script>alert('test');</script><br />
</body> 
```

但事实并非如此。它写返回：

```
<<script>alert('test');</script><br /></body>> 
```

如您所见，它添加了一个额外的 < 和 >.. 如果我删除小于号和大于号，它会显示：

```
script>alert('test');</script 
```

然后它将返回：

```
<script>alert('test');</script<br /></body>> 
```

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:15:08.390

在这种情况下，最好使用 str_replace，而不是 preg_replace

```
str_replace("</body>","<script>alert('test');</script><br /></body>",$_response_body); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:16:12.977

`preg_replace`失败，因为您忘记了[定界符](http://www.php.net/manual/en/regexp.reference.delimiters.php)。

```
preg_replace("#</body>#", 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T20:17:15.940

您正在使用`preg_replace`，它要求第一个参数是 PCRE 模式。这些模式由[分隔符](http://www.php.net/manual/en/regexp.reference.delimiters.php)包围。您没有放入任何分隔符，但它会将`<`and`>`视为分隔符，因此这些不被视为您匹配的模式的一部分。

基本上，它并没有*添加*额外的字符，它只是没有像你想象的那样匹配。

正如gaskar 指出的那样，如果您实际上没有使用任何正则表达式，那么您不妨只使用`str_replace`.

# actionscript-3 - Actionscript 3：整个事件调度变得不可用

> ID：15056079
> 
> 赞同：0
> 
> 时间：2013-02-24T20:09:57.060
> 
> 标签：actionscript-3

我正在研究类似于“愤怒的小鸟”“推出”选项等的东西，但我遇到了一个相当大的问题。

推出本身只是一个切换按钮，显示列表中添加了几个其他按钮，当您触摸切换按钮时它们会移动。这些按钮中的每一个都是扩展 Sprite 的类，并包含用于触摸事件、开始、结束和结束的单独方法。当这些按钮被初始化（未实例化）时，将添加触摸开始侦听器。像这样的东西：

```
 public function Initialize():void 
    { 
        this.addEventListener(TouchEvent.TOUCH_BEGIN, OnTouchBegin, false, int.MAX_VALUE);
    }

    private function OnTouchBegin(e:TouchEvent):void
    {
        this.removeEventListener(TouchEvent.TOUCH_BEGIN, OnTouchBegin);
        this.addEventListener(TouchEvent.TOUCH_END, OnTouchRelease, false, int.MAX_VALUE);
        this.addEventListener(TouchEvent.TOUCH_OUT, OnTouchOut, false, int.MAX_VALUE);
    }

    private function OnTouchRelease(e:TouchEvent):void
    {
        this.addEventListener(TouchEvent.TOUCH_BEGIN, OnTouchBegin, false, int.MAX_VALUE);
        this.removeEventListener(TouchEvent.TOUCH_END, OnTouchRelease);
        this.removeEventListener(TouchEvent.TOUCH_OUT, OnTouchOut);
    }

    private function OnTouchOut(e:TouchEvent):void
    {
        this.addEventListener(TouchEvent.TOUCH_BEGIN, OnTouchBegin, false, int.MAX_VALUE);
        this.removeEventListener(TouchEvent.TOUCH_END, OnTouchRelease);
        this.removeEventListener(TouchEvent.TOUCH_OUT, OnTouchOut);
    } 
```

然后，当这些按钮从屏幕上隐藏时，会调用一个方法来删除当前在它们上活动的任何侦听器：

```
 public function Deactivate():void 
    {
        this.removeEventListener(TouchEvent.TOUCH_OUT, OnTouchOut);
        this.removeEventListener(TouchEvent.TOUCH_END, OnTouchRelease);
        this.removeEventListener(TouchEvent.TOUCH_BEGIN, OnTouchBegin);

    } 
```

这仅适用于标准按钮功能（向上/向下纹理和声音），除此之外，当我制作游戏时，在我的 rollout 类中，我有一个额外的方法，它将为应该发生的自定义逻辑添加另一个事件侦听器当按钮被触摸时（按钮本身在其他地方创建）。

```
 public function AddRolloutButton(listener:Function):void
    {
        if (listener != null) 
        {
            _buttons[index].addEventListener(TouchEvent.TOUCH_BEGIN, listener);
        } 
```

卷展栏本身的按钮会从显示列表中删除，直到它们被显示。当 rollout 关闭时，按钮被停用（从显示列表中删除，并且按钮类中的 3 个按钮侦听器被删除）。

在我第一次打开和关闭推出时，一切都运行良好。在那之后，事件调度系统就莫名其妙地死掉了。屏幕上的每个 InteractiveObject，无论位置或类型如何，都会变得不可用。我在推出切换按钮上追踪了听众是否仍然存在，并且确实存在。我还确认推出按钮本身是显示列表中唯一的东西。

我注意到的是，如果我在触摸开始侦听器的按钮的 deactivate 方法中注释掉侦听器删除，或者在 AddRolloutButton 方法中为侦听器方法传入 null，则一切正常。问题似乎源于在推出按钮上有多个相同类型的侦听器，然后删除其中一个或全部。

如果有人对正在发生的事情有任何想法，那将非常有帮助。我的印象是向 InteractiveObject 添加多个相同类型的侦听器是完全有效的。

更新：

我遇到的这个问题似乎只破坏了 TouchEvents。在打开和关闭推出后，我刚刚尝试在舞台上使用鼠标单击侦听器，这仍然有效。所以，只有触摸事件会被破坏，如果这有帮助的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:45:07.513

好像你的`AddRolloutButton`方法出了点问题。您确定要分配正确的侦听器功能吗？

在您的示例中，`listener:Function`参数应等于`_buttons[index]. OnTouchBegin`。

或者，由于拥有该`AddRolloutButton`方法的任何类似乎都在*控制*按钮，因此您可能会完全放弃 listener 参数，因为您*知道*需要触发什么方法。

例如像这样：

```
public function AddRolloutButton():void {
    var currentButton:MyButtonClass = _buttons[index] as MyButtonClass;
    currentButton.addEventListener(TouchEvent.TOUCH_BEGIN, currentButton.OnTouchBegin);
    [...]
} 
```

* * *

但是，您可以做的是永远不要删除函数`TouchEvent.TOUCH_BEGIN`中的`Deactivate`。当 DisplayObject 不在显示列表中时，将永远不会触发触摸事件。这意味着您不必担心每次要再次将按钮添加到显示列表时添加侦听器。

如果您将侦听器设置为使用**弱引用**，则不会妨碍按钮在不再需要时被垃圾收集。要使您的事件侦听器使用弱引用，请将`addEventListener`方法的第五个参数设置为 true。

`addEventListener(type:String, listener:Function, useCapture:Boolean = false, priority:int = 0, useWeakReference:Boolean = false):void`

```
public function Initialize():void { 
    this.addEventListener(TouchEvent.TOUCH_BEGIN, OnTouchBegin, false, int.MAX_VALUE, true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:28:08.397

我不确定您要通过删除事件侦听器来完成什么。由于 Button 具有对回调的引用，因此无论是否附加了侦听器，它都具有对该回调的引用。您是否认为添加侦听器会创建从回调到按钮的引用？它没有——[反之亦然](http://www.developria.com/2010/08/rethinking-addeventlistener-an.html)。

如果您真的希望 Button 在从显示列表中删除时释放回调，那么它在删除侦听器后就无法保留该引用。考虑使用[Supervising Presenter](http://blogs.adobe.com/paulw/archives/2007/10/presentation_pa_2.html)或[RobotLegs Mediator 之](http://www.adobe.com/devnet/actionscript/articles/intro-robotlegs-pt1.html)类的东西来管理这些依赖项。

我严重怀疑整个事件系统是否被你正在做的事情所困扰。

我更倾向于相信这一点：

```
        如果（听众！= null）
        {
            _buttons[index].addEventListener(TouchEvent.TOUCH_BEGIN, listener);
        }

```

失败了，要么是因为引用的按钮不是实际在舞台上的那个，要么是因为 listener 为 null ..

我*曾经*见过添加和删除具有优先级的事件可能会导致失败的情况，但通常这是与未在显示列表上传播的事件有关。

您可以测试的一种方法是简单地收听主文档或舞台上的触摸事件，看看您是否收到了这些事件。如果整个事件系统很糟糕，你不会得到它们，但如果你的监听器逻辑是错误的，你会的。

您可能还想检查按钮和事件的 willTrigger 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T23:25:23.540

`Initialize`您是否在关闭推出后的某个时候再次调用该方法？

从您的代码看起来好像您删除了所有事件侦听器，`Deactivate`然后再也不添加`TouchEvent.TOUCH_BEGIN`侦听器。

# iphone - 在iphone上旋转图像

> ID：15056083
> 
> 赞同：0
> 
> 时间：2013-02-24T20:10:18.890
> 
> 标签：iphone, ios, rotation, gesture

如何用两指手势旋转图像。如果您可以提供一个简单示例的链接，那就太好了。

# macos - 通过 cocoalibspotify 添加或删除播放列表时收到通知

> ID：15056088
> 
> 赞同：0
> 
> 时间：2013-02-24T20:10:56.930
> 
> 标签：macos, cocoa, spotify, cocoalibspotify-2.0

我在应用程序中使用 cocoalibspotify，并希望在添加或删除播放列表时得到通知。

我尝试为`userPlaylists`共享会话上的关键路径添加一个观察者，但这似乎没有被调用。我也尝试过实现`-sessionDidChangeMetadata:`删除方法，但这似乎只在登录时调用。

有谁知道当用户添加或删除播放列表时如何得到通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:26:12.683

您需要将 KVO 观察者添加到`playlists`会话`userPlaylists`容器的属性中。您添加 KVO 的步骤太短了。请注意，该`userPlaylists`属性将`nil`在登录后短暂保留，因此您也需要注意该更改：

```
self.session = [SPSession sharedSession];
[self addObserver:self forKeyPath:@"session.userPlaylists.playlists" options:0 context:nil]; 
```

# javascript - 编辑 Backbone Ajax Success Method 以添加自定义错误处理

> ID：15056091
> 
> 赞同：0
> 
> 时间：2013-02-24T20:11:11.707
> 
> 标签：javascript, jquery, ajax, templates, backbone.js

我在主干 ajax 成功方法中有自己的自定义错误代码，以防服务器返回错误。问题是这段代码在我的应用程序中重复，我想在一个地方编辑成功函数，所以我不必在每次 ajax 成功时不断重复这个错误处理程序。我想编辑成功函数以包含此错误检查包装器。你知道怎么做吗？

这是我的一个观点中我的成功方法的一个例子：

```
"success" : function success(model, data)
             {
              if(data['error'] !== undefined && data['error'].length === 0)
               {
                message('error', 'Whoops! System Error. Please refresh your page.');
               }
              else if(data['error'] !== undefined)
               {
                message('error', data['error']);
               }
              else
               {
                //add templates and do stuff here
               }
             }, 
```

理想情况下，我想将其设置在某个配置中，然后我就可以使用：

```
"success" : function success(model, data)
             {
              // add templates and do stuff here
             } 
```

这可能吗？我尝试使用 ajaxSetup 但这似乎对我不起作用。

更新的代码仍然不起作用：

这确实让我走得更远，但错误处理程序没有起到包装器的作用。数据没有传递到我的 ajax 调用中。事实上，我在 ajax 调用上的成功方法根本不再运行。我在我的 ajax 调用中尝试了 console.log("some text") 但没有输出任何内容。你知道这有什么问题吗？

```
// Save the original Sync method
defaultSync = Backbone.sync;

//Over ride Backbone async
Backbone.sync = function(method, 
                         model, 
                         options) 
                 {
                  success = options.success

                  options.success = function(data) 
                                     {
                                      if(data['error'] !== undefined && data['error'].length === 0)
                                       {
                                        message('error', 'Whoops! System Error. Please refresh your page.');
                                       }
                                      else if(data['error'] !== undefined)
                                       {
                                        message('error', data['error']);
                                       }
                                      else
                                       {
                                        success(model, 
                                                data);
                                       }
                                     }

                  return defaultSync(method, 
                                     model, 
                                     options)
                 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:31:12.377

有两种方法可以解决这个问题：

*   继承骨干模型

您可以创建自己的自定义模型，该模型继承自 Backbone 模型。在其中您可以覆盖保存方法。[阅读 Backbone 文档，了解如何扩展他们的模型](http://documentcloud.github.com/backbone/#Model-extend)

在您自定义的保存方法中，您将调用 super 的保存方法，检查 responseText，如果成功则调用成功回调。（请阅读关于如何在 Javascript 中调用父模型的方法的主干文档）

*   覆盖 Backbone.Sync

Backbone 有一个 Sync 模块，基本上默认情况下会发出所有 ajax 请求，解析响应，然后调用您在模型上调用 save 时指定的成功/错误回调。这很简单。[看看这个文档](http://backbonejs.org/#Sync)。您可以再次覆盖它，完全按照 Backbone 默认执行的操作，但仅根据您收到的 responseText 调用成功/错误回调。

更新：示例代码（警告代码未测试）

```
//Over ride Backbone async

defaultSync = Backbone.Sync // Save the original Sync method. We'll be needing that.

Backbone.Sync = function(method, model, options) {
   success = options.success
   error = options.error

   options.success = function(model, data, options) {
      if (/% all your custom checks are true */) {
           success (model, data, options);
      }
      else {
         error(model,data,options);
     }
    }

   return defaultSync(method, model, options);

} 
```

请确保使用此策略，Sync 方法将被您的所有 Backbone 同步覆盖。如果您不希望这样，请使用 Model#save 覆盖。

看看[这段代码](https://github.com/neebz/backbone-parse/blob/master/backbone-parse.js)，我重写了 Backbone.Sync 以使其与 Parse.com API 一起工作。

# ruby-on-rails - Rails: has_many through 在两个模型之间，还有一个 has_many/belongs to 在相同的模型上

> ID：15056096
> 
> 赞同：3
> 
> 时间：2013-02-24T20:11:22.537
> 
> 标签：ruby-on-rails, rails-activerecord

我有很多直通关系来定义用户回答的问题。

如何为用户创建的问题建立关系？

通常你只会在用户和问题之间创建一个 has_many 和 belongs_to 关系，但是因为我也在做一个 has_many ，所以这是行不通的。

这是我到目前为止所拥有的：

楷模：

```
Users
Questions
Answered_questions 
```

用户模型

```
has_many :answered_questions
has_many :questions, :through => :answered_questions 
```

问题模型：

```
has_many :answered_questions
has_many :users, :through => :answered_questions 
```

Answered_questions 模型

```
belongs_to :question
belongs_to :user 
```

**编辑**

我找到了这个答案：[https](https://stackoverflow.com/a/12637532/756623) ://stackoverflow.com/a/12637532/756623 ，这让我尝试了这个：

用户模型添加：

```
has_many :questions_created, :class_name => "Question", :inverse_of => :created_by 
```

问题模型添加：

```
belongs_to :created_by, :class_name => "User", :foreign_key => "created_by_id", :inverse_of => :questions_created 
```

我还将该列添加`created_by_id`到问题表中

现在......`user_id`没有被添加到`created_by_id`列中。

我有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:56:30.307

我认为这样的事情可能会解决您的问题：

```
# User
has_many :answered_questions
has_many :questions, :through => :answered_questions
has_many :created_questions, class_name: Question, foreign_key: :author_id

# Question
has_many :answered_questions
has_many :users, :through => :answered_questions
belongs_to :author, class_name: User

# Answered questions
belongs_to :question
belongs_to :user 
```

# node.js - 整洁的回调 node.js

> ID：15056102
> 
> 赞同：1
> 
> 时间：2013-02-24T20:11:58.420
> 
> 标签：node.js, callback, express, redis

试图想出一种合理的方式来构建它。为简单起见，我正在使用 Node.js、Redis 和 Express.js 创建一个用户注册页面。

用户将详细信息发布到页面。

确认用户名有效，然后 Redis 检查用户名是否唯一。如果是，我们继续，如果不是，我们返回错误消息和所有以前的详细信息。

确认密码有效。如果不是，则返回错误并且我们不继续。

电子邮件在 Redis 中被确认是唯一的。如果是，我们继续，如果不是，我们返回错误消息并停止。

如果此时没有错误，则将数据插入到 Redis 中。

这看起来很简单，但是使用回调会产生一团糟——尤其是在返回错误时。

我怎样才能以一种整洁的方式构建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:03:44.363

你所经历的是回调地狱。你可以做很多事情，比如命名你的回调函数而不是内联它们，遵循相同的模式等......

但是，我建议您查看[async 模块](https://github.com/caolan/async)。

在您非常典型的情况下，我会像这样使用 async.series：

```
var validateUserName = function(username, callback){
  if(username!='valid'){
    return callback('invalid username');
  }
};
var checkRedis = function(username, callback){
  // check to redis
};
var checkPassword = function(password, callback){
  // if password valid callback();
  // else callback('invalid password');
}
etc...

async.series([checkUserName, checkRedis, checkPassword, etc...], next); 
```

# ruby-on-rails - 多个belongs_to属于同一张表

> ID：15056103
> 
> 赞同：6
> 
> 时间：2013-02-24T20:11:59.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-associations

我有两张桌子：

货币和汇率

```
currencies: id:int, code:string, name: string

rates: id:int, top_currency_id:int, bottom_currency_id:int, rate:float 
```

我有两个活跃的记录：

```
class Rate < ActiveRecord::Base
  attr_accessible :bottom_currency, :rate, :top_currency, :top_currency_id

  belongs_to :top_currency, :class_name => 'Currency', :foreign_key => 'top_currency_id'
  belongs_to :bottom_currency, :class_name => 'Currency', :foreign_key => 'bottom_currency_id'
end

class Currency < ActiveRecord::Base
  attr_accessible :code, :name

  has_many :rates
end 
```

所以问题是：当我试图执行以下代码时： top_currency = Currency.find_by_id(1) @test = Rate.where(:top_currency=>top_currency)

我收到以下错误：

```
Mysql2::Error: Unknown column 'rates.top_currency' in 
'where clause': SELECT `rates`.* FROM `rates`  WHERE `rates`.`top_currency` = 1 
```

为什么 Rails 的魔法不起作用？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T20:53:13.143

在您的两种`belongs_to`方法中，将`foreign_key`选项更改为`primary_key`，其他所有内容保持不变。

```
belongs_to :top_currency, :class_name => 'Currency', :primary_key => 'top_currency_id'
# ... 
```

默认情况下，关联对象的主键是`id`. 但是，您的货币模型具有三个主键，预期`id`加上两个额外的键：`top_currency_id`和`bottom_currency_id`. Active Record 需要知道要查找的密钥。`primary_key`用选项 告诉它。

`foreign_key`当外键不同于关联名称 ( `belongs_to :name`) 加“ ”时，需要该选项`_id`。由于您的外键与关联名称加“ `_id`,”相匹配，因此您不需要使用该`foreign_key`选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T20:45:09.450

据我所知，您的代码理论上应该可以工作。但我确实认为你有点多余。

这样做就足够了：

```
class Rate < ActiveRecord::Base
  belongs_to :top_currency, class_name: 'Currency'
  belongs_to :bottom_currency, class_name: 'Currency'
end 
```

Rails 会推断出`top_currency`is`top_currency_id`和`bottom_currency_id`for的外键`bottom_currency`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T02:02:22.730

我不认为你可以这样查询关系。要使用您的示例：

```
top_currency = Currency.find_by_id(1)
@test = Rate.where(:top_currency=>top_currency) 
```

您必须将其更改为：

```
top_currency = Currency.find_by_id(1)
@test = Rate.where(:top_currency_id => top_currency.id) 
```

但这样做可能更容易：

```
top_currency = Currency.find_by_id(1)
@test = top_currency.rates 
```

# c# - C# Metro Windows 8 RichTextBlock 溢出和 FlipView

> ID：15056104
> 
> 赞同：2
> 
> 时间：2013-02-24T20:12:02.720
> 
> 标签：c#, windows-8, microsoft-metro, richtextblock

我在 Windows 8 中使用新的 Metro 设计时遇到了一些问题。我正在构建简单的电子阅读器应用程序，并且想要使用两列页面。所以，我的选择是有溢出的 FlipView 和 RichTextBlock。但是加了两页后，overflow 就没有溢出内容了！所以我只有三页。但是文字很大。我有这样的代码：

```
 private async void CreatePages()
    {
        _pages = new List<UIElement>();

        _pageCount = 1;

        _lastOverflow = AddOnePage(null, _pageCount);

        while (_lastOverflow.HasOverflowContent) //It's here!!
        {
            _pageCount++;

            _lastOverflow = AddOnePage(_lastOverflow, _pageCount);

            View.UpdateLayout();
        }

        for (var i = 1; i <= _pageCount; i++)
        {
            var scrollViewer = new ScrollViewer
            {
                Margin = new Thickness(10, 30, 10, 30),
                HorizontalContentAlignment = HorizontalAlignment.Stretch,
                ZoomMode = ZoomMode.Enabled,
                VerticalScrollMode = ScrollMode.Enabled,
                HorizontalScrollMode = ScrollMode.Disabled,
                Name = "Scroll" + i
            };

            var snappedBlock = new RichTextBlock
            {
                VerticalAlignment = VerticalAlignment.Center,
                HorizontalAlignment = HorizontalAlignment.Center,
                TextWrapping = TextWrapping.Wrap,
                IsTextSelectionEnabled = true
            };

            foreach (var text in new string[0])
            {
                var paragraph = new Paragraph();
                paragraph.Inlines.Add(new Run { Text = text });
                snappedBlock.Blocks.Add(paragraph);
            }

            scrollViewer.Content = snappedBlock;

            SnappedView.Items.Add(scrollViewer);
        }
    }

    private RichTextBlockOverflow AddOnePage(RichTextBlockOverflow lastOverflow, int pageNumber)
    {
        // Create a grid which represents the page 
        var grid = new Grid
                       {
                           Name = "Grid" + pageNumber
                       };

        grid.ColumnDefinitions.Add(new ColumnDefinition
                                       {
                                           Width = new GridLength(1, GridUnitType.Star)
                                       });
        grid.ColumnDefinitions.Add(new ColumnDefinition
                                       {
                                           Width = new GridLength(1, GridUnitType.Star)
                                       });

        var grid1 = new Grid
                        {
                            Name = "Grid1_" + pageNumber
                        };
        var grid2 = new Grid
        {
            Name = "Grid2_" + pageNumber
        };
        grid1.SetValue(Grid.ColumnProperty, 0);
        grid2.SetValue(Grid.ColumnProperty, 1);

        grid.Children.Add(grid1);
        grid.Children.Add(grid2);

        View.Items.Add(grid);

        // If lastRTBOAdded is null then we know we are creating the first page. 
        var isFirstPage = lastOverflow == null;

        RichTextBlockOverflow richTextBlockOverflow = null;

        if (isFirstPage)
        {
            var overflow = new RichTextBlockOverflow
                               {
                                   Margin = new Thickness(20, 30, 70, 30),
                                   Name = "SecondBlock" + pageNumber,
                                   OverflowContentTarget = new RichTextBlockOverflow(),
                                   VerticalAlignment = VerticalAlignment.Center,
                                   HorizontalAlignment = HorizontalAlignment.Center
                               };
            overflow.SetValue(Grid.ColumnProperty, 1);

            _textBlock = new RichTextBlock
                             {
                                 VerticalAlignment = VerticalAlignment.Center,
                                 HorizontalAlignment = HorizontalAlignment.Center,
                                 Margin = new Thickness(70, 30, 20, 30),
                                 TextWrapping = TextWrapping.Wrap,
                                 IsTextSelectionEnabled = true,
                                 Name = "FirstBlock" + pageNumber,
                                 OverflowContentTarget = overflow
                             };
            _textBlock.SetValue(Grid.ColumnProperty, 0);

            foreach (var text in _content.Trim('\n', ' ', '\t').Split('\n'))
            {
                var paragraph = new Paragraph();
                paragraph.Inlines.Add(new Run { Text = text });
                _textBlock.Blocks.Add(paragraph);
            }

            grid1.Children.Add(_textBlock);
            grid2.Children.Add(overflow);

            _textBlock.Measure(grid1.RenderSize);
            overflow.Measure(grid2.RenderSize);

            _pages.Add(grid);

            richTextBlockOverflow = overflow;
        }
        else
        {
            // This is not the first page so the first element on this page has to be a
            // RichTextBoxOverflow that links to the last RichTextBlockOverflow added to
            // the previous page.
            if (lastOverflow.HasOverflowContent)
            {
                var overflowSecond = new RichTextBlockOverflow
                                         {
                                             VerticalAlignment = VerticalAlignment.Center,
                                             HorizontalAlignment = HorizontalAlignment.Center,
                                             Margin = new Thickness(20, 30, 70, 30),
                                             Name = "SecondBlock" + pageNumber
                                         };
                overflowSecond.SetValue(Grid.ColumnProperty, 1);

                var overflowFirst = new RichTextBlockOverflow
                                        {
                                            VerticalAlignment = VerticalAlignment.Center,
                                            HorizontalAlignment = HorizontalAlignment.Center,
                                            Margin = new Thickness(70, 30, 20, 30),
                                            Name = "FirstBlock" + pageNumber,
                                            OverflowContentTarget = overflowSecond
                                        };
                overflowFirst.SetValue(Grid.ColumnProperty, 0);

                lastOverflow.OverflowContentTarget = overflowFirst;

                grid1.Children.Add(overflowFirst);
                grid2.Children.Add(overflowSecond);

                overflowFirst.Measure(grid1.RenderSize);
                overflowSecond.Measure(grid2.RenderSize);

                _pages.Add(overflowFirst);
                _pages.Add(overflowSecond);

                richTextBlockOverflow = overflowSecond;
            }
        }

        _pages.Clear();
        LayoutRoot.UpdateLayout();

        return richTextBlockOverflow;
    } 
```

在 LoadState() 中，我调用 CreatePages() 方法。

我的 XAML：

```
 <Grid x:Name="LayoutRoot" Style="{StaticResource LayoutRootStyle}" Background="#FFDEDEDE">
    <FlipView x:Name="View" HorizontalAlignment="Stretch" VerticalAlignment="Center" Foreground="Black" SelectionChanged="ViewOnSelectionChanged" FontSize="18" >
    </FlipView>
    <FlipView x:Name="SnappedView" HorizontalAlignment="Stretch" VerticalAlignment="Top" Foreground="Black" SelectionChanged="SnappedViewOnSelectionChanged" FontSize="12" Visibility="Collapsed">
    </FlipView>
    <ProgressBar x:Name="LoadProgressBar" HorizontalAlignment="Stretch" VerticalAlignment="Top" IsIndeterminate="True" Foreground="#007ACC"/>
</Grid> 
```

谢谢大家！我希望有人知道如何解决这个问题..

# java - Android 加载图形

> ID：15056106
> 
> 赞同：1
> 
> 时间：2013-02-24T20:12:34.783
> 
> 标签：java, android, memory, graphic

我有个问题。我的主菜单/开始屏幕有一个大图形。这会导致某些旧设备出现内存不足异常。这是一个分辨率为 1920*1080 的 PNG 文件，我使用 ImageFormat RGB565。你有什么想法可以减少使用的内存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:36:03.340

如前所述，您可以缩小图像，但如果由于某种原因您不想或不能这样做，您可能需要检查该链接：

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

你也可以添加

```
largeHeap=true 
```

为了增加一点内存，但它只适用于新设备，Android 2.x 不支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:37:09.247

这就是您要查找的内容：

```
BitmapFactory.Options.inSampleSize 
```

> 如果设置为 true，则生成的位图将分配其像素，以便在系统需要回收内存时可以清除它们。在这种情况下，当需要再次访问像素时（例如，绘制位图，调用 getPixels()），它们将被自动重新解码。为了进行重新解码，位图必须能够访问编码数据，方法是共享对输入的引用或复制它。这种区别由 inInputShareable 控制。如果这是真的，那么位图可能会保留对输入的浅引用。如果这是错误的，那么位图将显式地复制输入数据，并保留它。即使允许共享，实现仍可能决定制作输入数据的深层副本。

来源：http: [//developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)

因此，基本上您可以`inSampleSize`根据屏幕分辨率和可用 RAM 进行调整，以便始终为给定设备提供足够版本的位图。这将防止`OutOfMemoryError`发生错误。

以下是如何使用它的示例：

```
public static Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
        int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(res, resId, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeResource(res, resId, options);
}

public static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {

        // Calculate ratios of height and width to requested height and width
        final int heightRatio = Math.round((float) height / (float) reqHeight);
        final int widthRatio = Math.round((float) width / (float) reqWidth);

        // Choose the smallest ratio as inSampleSize value, this will guarantee
        // a final image with both dimensions larger than or equal to the
        // requested height and width.
        inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
    }

    return inSampleSize;
} 
```

资料来源：http: [//developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html) 该链接下还有更多信息，因此我建议您查看一下。

# php - 命名空间 - 作曲家在移动到 src 目录时无法加载类

> ID：15056111
> 
> 赞同：0
> 
> 时间：2013-02-24T20:13:05.137
> 
> 标签：php, namespaces, composer-php

我正在准备 php 库，并决定重新组织目录结构。
一切正常，从这个结构：

![这工作](../Images/8ea3d62a97216aa50f32858e6791ceaa.png)

我决定搬进：

![在此处输入图像描述](../Images/706f4b5a52d0a2f5fc2243f9b5a6b60c.png)

我重新生成了自动加载（php composer.phar dumpautoload），运行测试并得到：

```
PHP Fatal error:  Class 'Compa\Components\Finder\Objects' not found in /home/mrok/php/top/pac-b-test/tests/Finder/ObjectsTest.php on line 15
PHP Stack trace:
PHP   1\. {main}() /home/mrok/php/top/pac-b-test/vendor/phpunit/phpunit/composer/bin/phpunit:0
PHP   2\. PHPUnit_TextUI_Command::main() /home/mrok/php/top/pac-b-test/vendor/phpunit/phpunit/composer/bin/phpunit:65
PHP   3\. PHPUnit_TextUI_Command->run() /home/mrok/php/top/pac-b-test/vendor/phpunit/phpunit/PHPUnit/TextUI/Command.php:129
PHP   4\. PHPUnit_TextUI_TestRunner->doRun() /home/mrok/php/top/pac-b-test/vendor/phpunit/phpunit/PHPUnit/TextUI/Command.php:176
PHP   5\. PHPUnit_Framework_TestSuite->run() /home/mrok/php/top/pac-b-test/vendor/phpunit/phpunit/PHPUnit/TextUI/TestRunner.php:346
PHP   6\. PHPUnit_Framework_TestSuite->run() /home/mrok/php/top/pac-b-test/vendor/phpunit/phpunit/PHPUnit/Framework/TestSuite.php:705
PHP   7\. PHPUnit_Framework_TestSuite->runTest() /home/mrok/php/top/pac-b-test/vendor/phpunit/phpunit/PHPUnit/Framework/TestSuite.php:745
PHP   8\. PHPUnit_Framework_TestCase->run() /home/mrok/php/top/pac-b-test/vendor/phpunit/phpunit/PHPUnit/Framework/TestSuite.php:775
PHP   9\. PHPUnit_Framework_TestResult->run() /home/mrok/php/top/pac-b-test/vendor/phpunit/phpunit/PHPUnit/Framework/TestCase.php:769
PHP  10\. PHPUnit_Framework_TestCase->runBare() /home/mrok/php/top/pac-b-test/vendor/phpunit/phpunit/PHPUnit/Framework/TestResult.php:648
PHP  11\. PHPUnit_Framework_TestCase->runTest() /home/mrok/php/top/pac-b-test/vendor/phpunit/phpunit/PHPUnit/Framework/TestCase.php:824
PHP  12\. ReflectionMethod->invokeArgs() /home/mrok/php/top/pac-b-test/vendor/phpunit/phpunit/PHPUnit/Framework/TestCase.php:969
PHP  13\. Compa\Components\Test\Finder\ObjectsTest->find() /home/mrok/php/top/pac-b-test/tests/Finder/ObjectsTest.php:0 
```

autload_namespaces 包含：

```
$vendorDir = dirname(__DIR__);
$baseDir = dirname($vendorDir);

return array(
    'Symfony\\Component\\Yaml' => $vendorDir . '/symfony/yaml/',
    'Compa\\Components' => $baseDir . '/src/',
); 
```

知道有什么问题吗？我应该更改包含路径吗？我不这么认为，否则每个使用这个库的人都必须这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:38:49.343

要使其有效[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)，您的文件应位于：

```
src/Compa/Components/Finder/Objects.php 
```

但不知道为什么它使用以前的结构......

# arrays - 不显示所有子类别

> ID：15056114
> 
> 赞同：0
> 
> 时间：2013-02-24T20:13:17.787
> 
> 标签：arrays, wordpress, foreach

我有一个基本脚本，可以抓取给定类别的儿童猫的所有帖子，然后我将洗牌结果帖子并显示它们。因此，我添加了 cat 4 的新子类别，但我没有使用我当前的脚本显示该子猫中的任何新帖子。我试过改变孩子的孩子，特别是通过 cat_ID 抓住这些孩子，然后他们就出现了。除了多次重新加载以查看它们是否加载但不在 30 中，由于与其他子猫中的帖子相比，帖子数量较少，我正在拉动。

我的代码如下

```
<?php
        $posts = array();
         $categories = get_categories( 'child_of=4' );
         foreach($categories as $category) {
           $args=array(
            'showposts' => 30,
            'category__in' => array($category->term_id)
           );
         $posts = $posts + get_posts($args);
        } // Close your foreach here
             shuffle($posts);
              if ($posts) {
                foreach($posts as $post) {
                  setup_postdata($post); ?>
                    <div <?php post_class('boxy');?>><div class="soc-label" ></div>

                  <?php 
                      if ( has_post_thumbnail()) {
                      $full_image_url =  wp_get_attachment_image_src( get_post_thumbnail_id(), 'full');
                      echo '<a href="' . $full_image_url[0] . '" rel="lightbox" title="' . the_title_attribute('echo=0') . '" >';
                      the_post_thumbnail('thumbnail');
                      echo '</a>';
                    }
                   ?>

                <?php the_content(''); ?>
                </div>

        <?php } 
           } 

        ?> 
```

对我缺少什么的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:32:58.990

[http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

get_posts 有一个用于限制帖子的“posts_per_page”参数。您使用 WP_Query 的“showposts”

# javascript - Jquery 循环行为异常

> ID：15056116
> 
> 赞同：1
> 
> 时间：2013-02-24T20:13:38.503
> 
> 标签：javascript, jquery

请好好看看我的脚本：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Title</title>
<link href="css.css" rel="stylesheet" type="text/css">
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
$count = 4;
$row = 10;
function across() {
    var $active = $('#slideshow .active .current');
    var $next = $active.next();    
    $next.addClass('current');
    $active.animate({left: '+=50px'},800,'swing').removeClass('current');
    $row += 10;
    $count--;
    if($count == 0) { 
        $count = 4;
        $row = 10;
        $($active).stop();
        $('#slideshow .active .bed').animate({left: '-=50px'},1);
        $("#slideshow .div:first-child").addClass('active');
        $(".div .bed:first-child").addClass('current'); 
        down();
    }
}
$count2 = 4;
function down() {
    var $active = $('#slideshow .active');
    var $next = $active.next();    
    $next.addClass('active');
    $active.removeClass('active');
    $count2--;
    if($count2 == 0) { 
        $("#slideshow .div:first-child").addClass('active');
    }
}
$(function() {
  setInterval(across, 1000);
});
</script>
<style>
body {
    background-color: black;    
}
.active {
    border: 1px solid white;
}
.current {
    border: 1px solid white;
}
.div{
    width: 200px;
    height: 200px;
}
.alpha {
    background-color: green;    
}
.beta {
    background-color: yellow;   
}
.gamma {
    background-color: red;  
}
.delta {
    background-color: pink; 
}
.bed {
    width: 50px;
    height: 50px;   
}
.one {
    position: relative;
    top: 0px;
    background-color: orange;   
}
.two {
    position: relative;
    top: 10px;
    background-color: purple;   
}
.three {
    position: relative;
    top: 20px;
    background-color: grey;
}
</style>
</head><body>
<div id="slideshow">
    <div class="div alpha active">
        <div class="bed one current">s</div><div class="bed two">s</div><div class="bed three">s</div>
    </div>
    <div class="div beta">
        <div class="bed one">s</div><div class="bed two">s</div><div class="bed three">s</div>
    </div>
    <div class="div gamma">
        <div class="bed one">s</div><div class="bed two">s</div><div class="bed three">s</div>
     </div>
    <div class="div delta">
        <div class="bed one">s</div><div class="bed two">s</div><div class="bed three">s</div>
    </div>
</div>

</body></html> 
```

[http://jsfiddle.net/QSfgG/](http://jsfiddle.net/QSfgG/)

它运行良好，但正如您可能看到的，它的循环非常奇怪！我想要的是第一个方块中的方块全部单独移动然后向后滑动，然后第二个方块中的方块做同样的动作，然后是第三个，然后是第四个，然后让整个东西再次循环，结束并且无限期地结束。

相反，第一个块表现正确，然后是第二个，然后是第三个，但最后一个奇怪的地方开始了；块 2 和 4 开始一起移动，然后是块 3，然后是块 2 和 4。块 1 完全错过了。真的很奇怪。

我认为答案在于功能下降的某个地方。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:05:57.457

问题是您要在两个地方添加“活动”类。鉴于您的代码设计，您应该只在 down() 函数中添加/删除它。

只需删除 cross() 中的行：

```
$("#slideshow .div:first-child").addClass('active'); 
```

此外，您需要将 $count2 重置为 4，否则它只会循环两次。在 down() 中执行此操作，具体请参阅我的 Fiddle。

这是我自己的 Fiddle 版本。我将 HTML、CSS 和 JavaScript 分开，这样我调试起来更容易。

链接：[jsFiddle](http://jsfiddle.net/willslab/QSfgG/3/)

另一个建议是删除 $count2。不是检查 $count2 == 0，而是检查 !$next.length。当它为 0 时，它将评估为真。

链接：[没有 $count2 的 jsFiddle](http://jsfiddle.net/willslab/QSfgG/4/)

# c++ - 不会等待 getline C++

> ID：15056120
> 
> 赞同：1
> 
> 时间：2013-02-24T20:14:07.733
> 
> 标签：c++, string, input, getline

我有一个控制台应用程序，它会等待用户输入字符串。它必须是 getline，因为它可能包含空格。但它不等待输入，它会跳过它并运行函数。这是我的代码：

```
int main()
{
    vector<person> people;
    bool flag = true;
    int num_people = 0;
    //char*filename="names.txt";

    people = read_file();

    while(flag)
    {
        int sel = 0;
        string args;
        cout << "1 - Sök del av personnamn" << "\n" 
    << "2 - Sök städer" << "\n" << "3 - Avsluta" << endl;
    cin >> sel;
    if(sel == 1)
    {
                cout << "Mata in delen av personnamnet" << endl;
                getline(cin, args);
                print_result(find_in_names(people, args));
    }
    else if(sel == 2)
    {
                cout << "Mata in staden" << endl;
                getline(cin, args);
                args = lower_letters(args);
                print_result(find_person_from_city(people, args));
        }
    else if(sel==3)
    {
        flag=false;
    }
    else
    {
        cout << "FEL, TRYCK OM!" << endl;
    }
    }
} 
```

运行没有错误，它只是跳过 getline 并且不让用户输入任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T21:21:50.940

这是使用该`getline()`功能的简单方法：

```
#include <iostream>
#include <string>

using namespace std;

int main(void)
{
    string name;
    int age;

    cout << "How old are you ?" << endl;
    cin >> age;

    cin.ignore();              // for avoiding trouble with 'name' when we're gonne use getline()

    cout << "What's your name ?" << endl;
    getline(cin, name); 

    system("PAUSE");
} 
```

别忘了，如果你使用`cin`befor `getline()`，你必须把这条线：

```
cin.ignore(); 
```

所以你的代码应该是这样的：

```
int main()
{
    vector<person> people;
    bool flag = true;
    int num_people = 0;
    //char*filename="names.txt";

    people = read_file();

    while(flag)
    {
        int sel = 0;
        string args;
        cout << "1 - Sök del av personnamn" << "\n" << "2 - Sök städer" << "\n" << "3 - Avsluta" << endl;
        cin >> sel;

        cin.ignore()

        if(sel == 1)
        {
            cout << "Mata in delen av personnamnet" << endl;
            getline(cin, args);
            print_result(find_in_names(people, args));
        }
        else if(sel == 2)
        {
            cout << "Mata in staden" << endl;
            getline(cin, args);
            args = lower_letters(args);
            print_result(find_person_from_city(people, args));
        }
        else if(sel==3)
        {
            flag=false;
        }
        else
        {
            cout << "FEL, TRYCK OM!" << endl;
        }
    }
} 
```

这是一些文档[http://www.cplusplus.com/reference/istream/istream/ignore/](http://www.cplusplus.com/reference/istream/istream/ignore/)，希望对您有所帮助；

# linux - 在linux下使用带有pthreads的glGetString（）进行分段错误

> ID：15056123
> 
> 赞同：4
> 
> 时间：2013-02-24T20:14:23.067
> 
> 标签：linux, opengl, pthreads, glut, glew

我正在尝试在后台线程中加载纹理以帮助加快我的应用程序。

我们使用的堆栈是 Linux 上的 C/C++，使用 gcc 编译。我们正在使用 OpenGL、GLUT 和 GLEW。我们一直在使用 libSOIL 进行纹理加载。

最终，使用 libSOIL 启动纹理加载失败，因为它遇到导致段错误的 glGetString() 调用。为了缩小问题的范围，我编写了一个非常简单的 OpenGL 应用程序来重现该行为。下面的代码示例不应该“做任何事情”，但也不应该出现段错误。如果我知道为什么会这样，理论上我可以重新设计 libSOIL，使其在 pthread 环境中运行。

```
void *glPthreadTest( void* arg ) {

  glGetString( GL_EXTENSIONS ); //SIGSEGV
  return NULL;

}

int main( int argc, char **argv ) {

  glutInit( &argc, argv );
  glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH );

  glewInit();

  glGetString( GL_EXTENSIONS ); // Does not cause SIGSEGV 

  pthread_t id;
  if (pthread_create( &id, NULL, glPthreadTest, (void*)NULL ) != 0)
    fprintf( stderr, "phtread_create glPthreadTest failed.\n" );

  glutMainLoop();
  return EXIT_SUCCESS;

} 
```

来自 gdb 的此应用程序的示例堆栈跟踪如下所示：

```
#0  0x00000038492f86e9 in glGetString () from /usr/lib64/nvidia/libGL.so.1
No symbol table info available.
#1  0x0000000000404425 in glPthreadTest (arg=0x0) at sf.cpp:168
No locals.
#2  0x0000003148e07d15 in start_thread (arg=0x7ffff7b36700) at pthread_create.c:308
        __res = <optimized out>
        pd = 0x7ffff7b36700
        now = <optimized out>
        unwind_buf = {cancel_jmp_buf = {{jmp_buf = {140737349117696, -5802871742031723458, 1, 211665686528, 140737349117696, 0, 5802854601940796478, 
                -5829171783283899330}, mask_was_saved = 0}}, priv = {pad = {0x0, 0x0, 0x0, 0x0}, data = {prev = 0x0, cleanup = 0x0, canceltype = 0}}}
        not_first_call = 0
        pagesize_m1 = <optimized out>
        sp = <optimized out>
        freesize = <optimized out>
#3  0x00000031486f246d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:114
No locals. 
```

您会注意到我使用的是 nvidia libGL 实现，但这也与 Ubuntu 用于英特尔高清显卡的 mesa libgl 相同。

关于可能出了什么问题的任何提示，或者如何进一步调查以了解发生了什么？

编辑：这是我的示例测试的#includes 和编译字符串：

```
#include <SOIL.h>
#include <GL/glew.h>
#include <GL/freeglut.h>
#include <GL/freeglut_ext.h>
#include <signal.h>
#include <pthread.h>
#include <cstdio> 
```

`g++ -Wall -pedantic -I/usr/include/SOIL -O0 -ggdb -o sf sf.cpp -lSOIL -pthread -lGL -lGLU -lGLEW -lglut -lX11`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T21:08:01.220

为了使任何 OpenGL 调用正常运行，它需要一个*OpenGL 上下文*。使用窗口系统绑定调用（类似`wglCreateContext`或类似）创建上下文。创建上下文后，需要将其*“设为当前”*，这意味着将上下文与当前执行线程相关联。这是通过另一个特定于窗口系统的调用（如`wglMakeCurrent`Microsoft Windows 或`glXMakeCurrent`X Windows）来完成的。GLUT 将所有这些复杂性从您身上抽象出来，在您调用`glutCreateWindow`.

现在，要知道的一个重要规则是，在任何时候，只有一个 OpenGL 上下文可以是当前执行线程的当前状态。因此，在 OP 的原始示例中，如果她/他可以在他们创建的 Pthread 中使上下文成为当前的，那么上下文将在主线程中丢失。保持所有这些一致的方法是在单个线程中仅使用单个上下文。（可以让 OpenGL 上下文共享数据，但这既不会被 GLUT 公开，也不可能不使用窗口系统上下文创建调用）。

在您的情况下，GLUT 可能不允许访问您真正需要的内容（即 OpenGL 上下文），以使其在另一个线程中处于当前状态。您需要自己创建和管理 OpenGL 上下文。

# wpf - 数据绑定到不同的窗口

> ID：15056134
> 
> 赞同：0
> 
> 时间：2013-02-24T20:15:12.257
> 
> 标签：wpf, binding, user-controls

在我的 WPF 应用程序中，我有一个带有画布和一些滑块的主窗口。

在此画布中，有多个版本的自定义 UserControl。用户控件非常基本，只是和图像和文本块。我想将用户控件内的文本块的文本大小绑定到主窗口中的一个滑块。

我不知道如何将绑定指向不同的窗口！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:14:33.843

你使用视图模型吗？如果是，您可以在视图模型中创建一个带有更改通知的属性，并将其绑定到父窗口滑块，并将其绑定到用户控制器的文本块属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:41:36.453

在您的用户控件中创建一个依赖属性并将您的滑块值绑定到它。

# javascript - 尝试获取 document.getElementsByName(name) 时出错

> ID：15056138
> 
> 赞同：0
> 
> 时间：2013-02-24T20:15:29.597
> 
> 标签：javascript, jquery

我一直在尝试在我的一个项目中使用此代码：

[https://github.com/cemerick/jsdifflib](https://github.com/cemerick/jsdifflib)

编辑：链接到有问题的代码[http://jsfiddle.net/BvFNf/3/](http://jsfiddle.net/BvFNf/3/)

当前形式的代码使用：

```
var byId = function (id) { return document.getElementById(id); }
    base = difflib.stringAsLines(byId("baseText").value),
    newtxt = difflib.stringAsLines(byId("newText").value), 
```

但是我正在尝试使用名称字段：

```
var byName = function (name) { return document.getElementsByName(name); }
    base = difflib.stringAsLines(byName("field1")[0].value),
    newtxt = difflib.stringAsLines(byName("field2")[0].value), 
```

append子代码如下：

```
 diffoutputdiv.appendChild(diffview.buildView({
            baseTextLines: base,
            newTextLines: newtxt,
            //opcodes: opcodes,
            baseTextName: "Base Text",
            newTextName: "New Text",
            contextSize: contextSize,
            viewType: viewType
    })); 
```

我还添加`' name="field1" '`到 html。

完整的源代码可以在这里找到：[Pastebin 代码](http://pastebin.com/7y3SQYFM) 我不断收到的错误是：

```
Uncaught TypeError: Object #<NodeList> has no method 'appendChild' demo.html:69
diffUsingJS demo.html:69
onclick demo.html:98 
```

返回的数据相当于原始的 byID 数据集。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T20:25:19.957

在您的代码中：

```
//diffoutputdiv = byId("diffoutput"),
diffoutputdiv = byName("diffoutput"), 
```

在从`byId`到您的转换中，`byName`您忘记从返回的匹配列表中获取元素。同样，`getElementsByName`返回节点列表，并`getElementById`返回单个节点。

```
diffoutputdiv = byName("diffoutput")[0] 
```

# tcpdf - TCPDF 如何在我的服务器上保留生成的 .pdf 的副本？

> ID：15056139
> 
> 赞同：0
> 
> 时间：2013-02-24T20:15:31.057
> 
> 标签：tcpdf

我正在构建一个简单的票务系统，它创建一个动态生成的 .pdf 文件并将其作为附件通过电子邮件发送。现在我正在使用静态 pdf 文件进行测试，但我注意到 tcpdf 删除了服务器上的文件。

1/我怎样才能防止这种情况并在服务器上保留一份副本？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T03:28:53.310

尝试以下代码，在 TCPDF 输出函数中使用“F”作为第二个参数，并指定在服务器上存储文件的路径

```
$this->pdf->Output('/path/example_001.pdf', 'F'); 
```

# java - OpenGL 图像未正确加载？

> ID：15056141
> 
> 赞同：0
> 
> 时间：2013-02-24T20:15:41.610
> 
> 标签：java, image, opengl, background, lwjgl

我的图像是 1280x740 以及我的游戏画布。

这是我的代码

```
// Initialize code OpenGL
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, 1280, 720, 0, 1, -1);
    glMatrixMode(GL_MODELVIEW);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_TEXTURE_2D);
    // end initializiation

    glClear(GL_COLOR_BUFFER_BIT);
    getResources().backgroundImage.bind();

    glBegin(GL_QUADS);
        glTexCoord2f(0,0); // Upper left
        glVertex2f(1280,0);

        glTexCoord2f(1,0); // Upper Right
        glVertex2f(0,0);

        glTexCoord2f(1,1); // Bottom Right
        glVertex2f(0,740);

        glTexCoord2f(0,1); // Bottom Left
        glVertex2f(1280,740);
    glEnd(); 
```

这是我遇到的问题，在尝试使其成为全屏纹理时……图像实际上是按比例缩小的？

图像显示

[http://i48.tinypic.com/inrbeu.png](http://i48.tinypic.com/inrbeu.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:38:03.920

顶点位置通过固定函数管道或顶点着色器转换为视口坐标。如果不指定这些，结果可能不是您想要的。

您需要设置符合您需要的投影·模型视图​​或着色器。

# combobox - 当我选择一个项目时，如何防止下拉菜单关闭？

> ID：15056142
> 
> 赞同：1
> 
> 时间：2013-02-24T20:15:45.693
> 
> 标签：combobox, silverlight-5.0

我有自定义控件，源自组合框。

我希望它在我选择一个项目时不会自行关闭。如果我将`IsDropDownOpen`属性设置为 false in `protected override void OnDropDownClosed(EventArgs e)`，则此方法将开始链式调用自身。

如果`IsDropDownOpen`在`OnSelectionChanged`处理程序中设置，则不会发生任何事情。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-25T01:46:46.480

看到这个答案——https: [//stackoverflow.com/a/22814332/1547004](https://stackoverflow.com/a/22814332/1547004)

本质上，在 ComboBox 的列表视图上安装一个 eventFilter 以捕获 MouseButtonPress 事件，以防止它通过并导致列表视图关闭。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T17:28:56.643

没门。ComboBox就是ComboBox，当一个项目被选中时会自动关闭它。ListBox 在这里是一个不错的选择。

问候。

# ios - 如何通过 GKSession 蓝牙发送整数数组

> ID：15056143
> 
> 赞同：1
> 
> 时间：2013-02-24T20:15:46.757
> 
> 标签：ios, cocos2d-iphone, integer, nsarray, gksession

我在通过 GKSession 发送整数数组时遇到问题。

我是这样做的：

发送它。

```
-(void)sendData {
    NSMutableArray *myArray = [[NSMutableArray alloc] init];
    [myArray addObject:[NSNumber numberWithInteger:snakeHead.position.x]];
    [myArray addObject:[NSNumber numberWithInteger:snakeHead.position.y]];
    [myArray addObject:[NSNumber numberWithInteger:direction.x]];
    [myArray addObject:[NSNumber numberWithInteger:direction.y]];
    [myArray addObject:[NSNumber numberWithInteger:bodyOffsetX]];
    [myArray addObject:[NSNumber numberWithInteger:bodyOffsetY]];
    [myArray addObject:[NSNumber numberWithInteger:amountBodies]];

    NSData* encodedArray = [NSKeyedArchiver archivedDataWithRootObject:myArray];

    [snakeSession sendData:encodedArray toPeers:snakePeers withDataMode:GKSendDataReliable
                                                            error:nil];
    [encodedArray release];
} 
```

从调度程序调用 sendData 函数。

去接收它。

```
-(void)receiveData:(NSData *)data fromPeer:(NSString *)peer inSession:(GKSession *)session
                                                       context:(void *)context {
    NSArray *hisArray = [NSKeyedUnarchiver unarchiveObjectWithData:data];

    snakeHead2.position = ccp([[hisArray objectAtIndex:0] integerValue], 
                          [[hisArray objectAtIndex:1] integerValue]);

    direction2 = ccp([[hisArray objectAtIndex:2] integerValue], 
                          [[hisArray objectAtIndex:3] integerValue]);

    bodyOffsetX2 = [[hisArray objectAtIndex:4] integerValue];
    bodyOffsetY2 = [[hisArray objectAtIndex:5] integerValue];
    amountBodies2 = [[hisArray objectAtIndex:6] integerValue];
} 
```

这不起作用，游戏崩溃。

那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T00:27:48.030

继承人我会做什么。它甚至发送更少的字节！（快点）

```
// to send
int snakeHead_position_x = 0;
int snakeHead_position_y = 0;
int direction_x = 0;
int direction_y = 0;
int bodyOffsetX = 0;
int bodyOffsetY = 0;
int amountBodies = 0;

NSString *package = [NSString stringWithFormat:@"%i|%i|%i|%i|%i|%i|%i",
        snakeHead_position_x, snakeHead_position_y, direction_x,
        direction_y, bodyOffsetX, bodyOffsetY, amountBodies];

NSData *data = [package dataUsingEncoding:NSASCIIStringEncoding];
assert(data); // this is critical don't remove!

//printf("sending %u bytes...\n", data.length);

[snakeSession sendData:data toPeers:snakePeers withDataMode:GKSendDataReliable error:nil];

// to retrieve

NSArray *intArray = [[[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding] componentsSeparatedByString:@"|"];

int snakeHead_position_x = [intArray[0] intValue];
int snakeHead_position_y = [intArray[1] intValue];
int direction_x = [intArray[2] intValue];
int direction_y = [intArray[3] intValue];
int bodyOffsetX = [intArray[4] intValue];
int bodyOffsetY = [intArray[5] intValue];
int amountBodies = [intArray[6] intValue]; 
```

# javascript - JavaScript 中的日期对象创建失败

> ID：15056144
> 
> 赞同：1
> 
> 时间：2013-02-24T20:15:52.443
> 
> 标签：javascript, date

我在 JavaScript 中遇到了非常奇怪的错误。

```
var stamp = 1349102;
var obj = {a: stamp, b: new Date(stamp), c: new Date(1349102)}; 
```

当我查看`obj`-`b`说*无效日期*但是`c`有效`Date`对象。

请帮我。我真的不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:45:44.487

如果`stamp`由用户提供，则可以认为是字符串。在这种情况下，您的代码将被浏览器解释为以下代码（不起作用）：

```
var stamp = "1349102";
var obj = {a: stamp, b: new Date(stamp), c: new Date(1349102)}; 
```

转换`stamp`成[数字](http://www.w3schools.com/jsref/jsref_number.asp)就好了

```
var stamp = "1349102";
var obj = {a: stamp, b: new Date(Number(stamp)), c: new Date(1349102)}; 
```

查看控制台输出：第一个是没有`Number`转换，第二个是有`Number`转换。

![JSON 控制台输出](../Images/2d899ea75de7a73ddfb58cd9ad61ed76.png)

# linux - bash 在 tetxfile 中用 / 替换 \

> ID：15056145
> 
> 赞同：2
> 
> 时间：2013-02-24T20:15:54.730
> 
> 标签：linux, bash, backslash, slash

我有一个带有一些文件路径的文件。像这样：

```
C:\Users\peter\workspace\etwas.txt 
```

我试着用这个程序阅读

```
while read LINE
do
  web=$LINE
  echo $web

done <etwas.txt 
```

结果：

```
C:Userspeterworkspaceetwas.txt 
```

我会以这种形式阅读

```
C:/Users/peter/workspace/etwas.txt 
```

你怎么能读懂它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T20:19:39.463

尝试仅使用*bash 内置函数*：

```
while read -r LINE; do
  web="${LINE//\\//}"
  echo "$web"
done < etwas.txt 
```

## 输出

```
$ cat etwas.txt 
C:\Users\peter\workspace\etwas.txt
$ while read -r LINE; do
>   web="${LINE//\\//}"
>   echo "$web"
> done < etwas.txt
C:/Users/peter/workspace/etwas.txt 
```

我使用[bash 参数扩展](http://wiki.bash-hackers.org/syntax/pe)来`\`替换`/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:40:51.470

最*便携*的方法（即*不*依赖 bash 扩展）是使用[`tr`](http://linux.die.net/man/1/tr)命令。

```
tr \\\\ / < etwas.txt | while read LINE
do
    web=$LINE
    echo $web
done 
```

（四个反斜杠？！是的，因为shell 和它本身*都*`tr`将反斜杠视为转义字符，因此您需要编写其中四个才能在这种情况下获得文字反斜杠。`'\\'`也可以。）

警告：管道输入`while` *可能*会导致循环内容在子shell 中执行，但*可能不会。*

# database - 多维矩阵问题的关系数据库设计

> ID：15056148
> 
> 赞同：0
> 
> 时间：2013-02-24T20:16:08.920
> 
> 标签：database, schema, relational

我正在为在线调查设计一个关系数据库。

但是，我不确定存储多维矩阵问题的最佳关系数据库设计是什么。

比方说，我有以下问题（对不起，它不允许我插入 HTML 表格）：

你有什么经历...

```
----------| Not friendly| (2) |Very friendly|Length of stay|Visited in the last year?|
Sydney    |radio button |  rb |        rb   |   drop down  |  check box              |   
--------------------------------------------------------------------------------------
New York  |     rb      |  rb |        rb   |   drop down  |  check box              | 
--------------------------------------------------------------------------------------
London    |     rb      |  rb |        rb   |   drop down  |  check box              |
-------------------------------------------------------------------------------------- 
```

您认为我应该按照以下方式做一些事情还是有更好的方法？

保留所有问题：

**问题**
问题ID
问题

**QuestionMatrix2d**
matrix2dID
questionID
subquestionID
subquestion

**QuestionMatrix**
questionID
matrix2dID
question_parentID

并保留所有回复：

**QuestionResponse**
questionID
response_code

**QuestionMatrix2dResponse**
questionID
subquestionID
response_code

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:20:30.060

我不同意 ryan1234。这完全是一个关系问题，几乎没有理由不将其放入数据库。

不过，我必须做一些猜测，以实现您在这里想要实现的目标。你有一个在线调查，所以我认为它会被不止一个人使用。您的数据库需要通过一个`session`or`user`表来适应这一点，我将使用后者，因为它更易于阅读。

其次，您有一个`locations`（悉尼、纽约、伦敦）的列表。我假设这个列表可以随着时间的推移而改变，甚至可以从一个问卷调查到另一个问卷。

然后你有一套`questions`. 您没有明确声明这些是可变的或固定的。由于您为此设计了一组表，因此我认为它应该是可变的。请注意，您的问题不是矩阵，而是列表。即使它们是分层的，它们仍然不构成矩阵。

最后但并非最不重要的是，您已经得到了这些问题的答案。

让我们创建一个`users`表：

```
user_id  user_name  
1        me
2        somebody else 
```

第二张表很简单：`locations`

```
location_id    location_name
1              Sidney
2              New York
3              London 
```

第三张桌子有点复杂 - 老实说：只是丑陋。但是，如果您在数据库中设计数据库，这就是您得到的结果，而替代方案（使用 DDL 或将该信息存储在 XML/JSON 甚至数据库之外）也不是很漂亮。如果存在分层问题（您的示例未显示它们），您可以添加“parent_question_id”列。

```
question_id    question_text      question_type    question_type_info
1              How do you rate    RADIO            0 to 5
2              Length of stay     COMBOBOX         1 day, 2 days, whatever
3              Visited last year  CHECKBOX 
```

最后，您需要第四张表来存储所有答案

```
user_id    location_id     question_id     value
1          1               1               2          <-- value here means "rating of 2"
1          1               2               5          <-- value here means "5 days"
1          1               3               1          <-- value here means "yes, visited last year" 
```

是的。也很丑。如果你有一个固定的问题列表，我可以为你提供一个漂亮的数据库:)

**编辑：**回答您的评论：要将您的问题链接到调查，您需要更多表格`surveys`来定义要针对哪些位置提出哪些问题。以下数据库布局可让您指定位置列表、提出的问题列表以及调查名称。

表`surveys`：

```
survey_id survey_name
1         Spring 2013 London Travel Survey
2         Spring 2013 Northern Hemisphere Short Survey 
```

表`survey_questions`：

```
survey_id question_id
1         1
1         2
1         3
2         1 
```

表`survey_locations`：

```
survey_id location_id
1         1
2         1
2         2 
```

我放在这里的内容给了你两个调查。调查#1 将在一个地点询问所有三个问题：“伦敦”。调查#2 将只针对伦敦和纽约提出一个问题。如果您想在不同的位置提出不同的问题，您的表格布局将不得不适应这种情况，但这样的系统将不适合您原来的类似表格的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:17:00.003

做过类似的事情后，我建议考虑*不要*把它变成一个关系问题。如果您有对象并将它们序列化为 JSON 之类的东西并存储它怎么办？

以相关的方式执行此操作，您最终将花费大量时间制作表格并将应用程序中的复杂绘图代码连接在一起，以确保问题/答案以正确的顺序绘制等。

否则我认为你可以让你的方法奏效。在 RDBMS 中设计调查资料没有灵丹妙药。

# android - Android 修改 mms.apk

> ID：15056150
> 
> 赞同：-2
> 
> 时间：2013-02-24T20:16:18.783
> 
> 标签：android, sms, mms

我将尝试解释我想要做什么。我有一个带 CM10.1 的 i9100 SGS2（非常快的手机）。

我想要做的是修改 mms.apk 应用程序，这样当我点击 SMS 中的发送按钮时，消息会立即在屏幕上弹出，并且发送消息需要完成的任何后端工作，等，可以在屏幕上完成后完成。

现在，如果你一个接一个地发送一堆短信，它似乎会滞后于操作系统，有时在点击发送按钮和对话中显示的实际短信之间可能需要整整一秒钟......非常烦人。

我已经反编译了 mms.apk，但不知道我到底应该修改什么......或者我需要修改的内容是否甚至在这个应用程序中？

有任何想法吗？我知道这是一个奇怪的要求……我只是想让它感觉更像是 iPhone 短信，任何延迟都是零。

谢谢，埃利奥特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:31:43.637

首先......这个问题似乎更适合[https://android.stackexchange.com/](https://android.stackexchange.com/)

至于为什么会这样……也许你有很多旧消息。

反编译 APK 不是一个好主意。尤其是当源代码可供所有人查看、下载和修改时。

CyanogenMod 的 Mms 应用程序源代码可以在[这里](https://github.com/CyanogenMod/android_packages_apps_Mms)找到。

# c++ - pthreads 只创建一个线程

> ID：15056152
> 
> 赞同：0
> 
> 时间：2013-02-24T20:16:23.213
> 
> 标签：c++, c, thread-safety, pthreads

我不明白为什么创建第一个线程并通过 while 循环运行而不允许其他线程也运行。我确实在它进入睡眠状态之前专门解锁了，以便创建其他线程。我认为我必须一次创建所有线程才能使其工作，但这不会使它成为非线程安全的吗？

主要：

```
Producer *producers[NUM_PTHREADS];
    for (i = 0; i < NUM_PTHREADS; i++) {
       tn[i] = i;
       producers[i] = new Producer(producer_id);
       pthread_create(producers[i]->getThread(),NULL,produce,producers[i]);
       pthread_join(*(producers[i]->getThread()),NULL);
       producer_id++;
    } 
```

从 pthread_create 运行：

```
void *produce(void* elem){
    Producer *producer;
    producer = (Producer*)elem;
    while(1){
       pthread_mutex_lock(&pmutex);
       printf("Hi, this is thread %d\n",producer->getId());
       producer->makeProduct(product_id);
       product_id++;
       printf("Made product with thread: %d, product_id: %d\n",producer->getId(),product_id);
       pthread_mutex_unlock(&pmutex);
       producer->sleep();
    }
 } 
```

示例输出：

```
Hi, this is thread 0
Made product with thread: 0, product_id: 1
Hi, this is thread 0
Made product with thread: 0, product_id: 2
Hi, this is thread 0
Made product with thread: 0, product_id: 3
Hi, this is thread 0
Made product with thread: 0, product_id: 4
Hi, this is thread 0
Made product with thread: 0, product_id: 5
Hi, this is thread 0
Made product with thread: 0, product_id: 6
Hi, this is thread 0
Made product with thread: 0, product_id: 7
Hi, this is thread 0
Made product with thread: 0, product_id: 8
Hi, this is thread 0
Made product with thread: 0, product_id: 9
Hi, this is thread 0
Made product with thread: 0, product_id: 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:18:25.550

这个电话：

```
 pthread_join(*(producers[i]->getThread()),NULL); 
```

等到您在它之前的行上创建的线程结束，并且您的 producer() 线程永远不会结束，因此您只会创建 1 个线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:18:44.860

`pthread_join`等待一个线程完成，所以它永远等待。

# java - 用于常见 javadocs 的 JavaDoc 解析器？

> ID：15056162
> 
> 赞同：6
> 
> 时间：2013-02-24T20:16:57.580
> 
> 标签：java, parsing, javadoc, doclet

有什么东西可以用来解析 JavaDoc，这样我就可以在运行时通过标准 Doclet 接口对其进行操作？[本质上，是Doclet](http://docs.oracle.com/javase/6/docs/jdk/api/javadoc/doclet/com/sun/javadoc/package-summary.html)的反向操作。

我知道为每个 Javadoc 编写解析器是不可能的（因为这可以是任意文档格式），但我很想知道标准 Doclet 是否有类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-28T00:55:30.240

Doclet 已经是一个 javadoc 解析器。将 Doclet 视为[SAX 解析器](http://docs.oracle.com/javase/tutorial/jaxp/sax/parsing.html)

对您的方法的每次调用都将提供与普通 javadoc doclet 完全相同的数据。在源代码上运行您的子类 Doclet，它将通过回调方法向您呈现文档。

# android - 视图卡在 VideoView 后面

> ID：15056164
> 
> 赞同：0
> 
> 时间：2013-02-24T20:17:11.863
> 
> 标签：android, android-relativelayout

我在尝试隐藏和显示 VideoView 顶部的按钮时遇到问题。为简单起见，我有一个看起来像这样的 xml 文件，真正的文件只有更多按钮。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<VideoView
    android:id="@+id/videoEnter"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:scaleType="fitXY" />

<Button
    android:id="@+id/play"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Play" />

</RelativeLayout> 
```

基本上，当我播放视频时，我将按钮设置为`View.INVISIBLE`，当视频播放完毕时，`onCompletion`我将按钮设置为`View.Visible`. 问题是按钮是可点击的，但它在 VideoView 后面并且不可见。我已经能够在 FrameLayout 中完成这项工作，但是我需要拉伸视频视图以适应我只能在 RelativeLayout 中工作的屏幕。有没有办法在RelativeLayout中完成所有这些工作？

我也试过`.bringToFront()`没有成功。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:41:00.300

我认为这是因为您为 VideoView 使用了 fill_parent。此外，您已经使用以下所有内容为真：

```
android:layout_alignParentBottom="true"
android:layout_alignParentLeft="true"
android:layout_alignParentRight="true"
android:layout_alignParentTop="true" 
```

因此，活动正在拉伸整个屏幕。做这样的事情：使用线性布局并为您的视图分配权重。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
<VideoView
    android:layout_weight="0.9"
    android:id="@+id/videoEnter"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
/>
<Button
    android:layout_weight="0.1"
    android:id="@+id/play"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Play" />
</LinearLayout> 
```

我已经尝试过了，它在底部显示按钮，在屏幕其余部分显示 VideoView。

# java - 将多张照片从 android (facebook sdk 3) 上传到 facebook

> ID：15056171
> 
> 赞同：0
> 
> 时间：2013-02-24T20:17:33.547
> 
> 标签：java, android

我正在尝试将我的 sdcard 文件夹中的所有照片上传到 facebook 相册。我已经为此编写了以下代码。是所有图像文件的列表。但是，程序运行异常。我无法弄清楚原因。欢迎在这方面提出任何意见。

```
 RequestBatch requestBatch = new RequestBatch();
    for (final String requestId : fileNames) {
        Bitmap image = BitmapFactory.decodeFile(requestId);
        Request request = Request.newUploadPhotoRequest(Session.getActiveSession(), image, new Request.Callback() {
            @Override
            public void onCompleted(Response response) {
                showPublishResult("Photo Post ", response.getGraphObject(), response.getError());
            }
        });

        requestBatch.add(request);
    }
    requestBatch.executeAsync();
} 
```

更新 ：

它正在运行 OutOfMemoryException。这意味着，sdk 正在缓存文件，因此发生了这种情况。有没有其他方法可以实现相同的效果，而不是将位图图像作为请求发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:23:59.440

上述方法的问题是 executeAsync。

我们需要创建一个新线程，使其成为守护进程（这样即使在应用退出时，上传也可以完成队列），并使用 executeAndWait 发布。这样，所有文件都是串行上传的。

如果有人需要新代码，请在此处留言，我将发布它

# ios - 如何创建一个可由 iphone 应用程序访问的服务器

> ID：15056176
> 
> 赞同：2
> 
> 时间：2013-02-24T20:17:59.717
> 
> 标签：ios, server, user-accounts, file-sharing

我正在考虑创建一个 iPhone/iOS 应用程序，其中包含一个用户可以创建一个单词列表然后将它们保存到他们在服务器上的帐户的功能。此外（这非常重要），用户可以通过授予其他用户权限来与其他用户共享他们的列表。

所以我的问题是，我该如何创建这样的服务器？目前，我有一台家用电脑（运行 Windows XP，只为我的音乐系统存储数据），我可以用它来托管服务器。我也愿意使用其他在线存储服务，如 Google Drive 或 Dropbox（我不记得亚马逊是否做过类似的事情）。但是（我知道这可能会使事情变得有点复杂），但至少现在，我希望/需要坚持使用免费服务/选项。

回顾一下，我正在寻找的主要功能是：

*   创建用户/帐户（在服务器上）
    *   最终我可能会[尝试]结合使用其他服务来登录用户，例如使用他们的电子邮件帐户、OpenId 等。
*   从我的应用程序访问（登录）服务器（使用凭据）的能力
*   在服务器和我的应用程序之间发送/接收数据的能力
*   在用户之间共享数据的能力

我知道这有很多要求，但如果有人有任何建议或可以让我朝着正确的方向前进，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T20:27:45.010

基本设置如下：

*   后端：数据库 (MySQL)、Web 服务器 (Apache)，带有服务器端脚本 (PHP)。
*   客户端：带有已开发应用程序的 iOS 设备。
*   通信：使用 HTTP 客户端/服务器模型，使用 JSON 之类的方式进行通信。

这与 Web 服务器的设置非常相似，但结果将是 JSON，而不是提供 html/css/javascript 等。

至于实现细节，例如登录和在用户之间共享数据，这完全取决于您的实现。这不是微不足道的，也不是可以在一篇文章中轻松说明的事情。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T20:34:34.883

你可以用 PHP、Ruby 或 Python 构建自己的 web 服务。如果您这样做，我建议您构建一个 RESTful网络服务 ( [http://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer) )，然后使用 RestKit ( [http://restkit.org/](http://restkit.org/) ) 来处理 iOS 应用程序中的数据。在我看来，尤其是 RestKit 的 CoreData 集成很好。

另一种解决方案是使用 Parse ( [https://parse.com/products/data](https://parse.com/products/data) ) 之类的服务。每月前一百万个左右的请求是免费的，但之后它可能会变得昂贵。我个人没有尝试过，所以我不能告诉你它是否有好处。

# java - 运行处理类的对象

> ID：15056179
> 
> 赞同：0
> 
> 时间：2013-02-24T20:18:29.817
> 
> 标签：java, eclipse, processing

我在 Eclipse 中有一个名为“VisualST”的处理类，我创建了一个名为：VisualST 类型的“树”的对象。现在我知道您可以在主函数（位于类 GUI 中）中使用下面的行来运行 VisualST 类。

`PApplet.main(new String[] {"VisualST" });`

问题是我将数据存储到 VisualST 类（因此是对象）中，我需要一种方法来运行特定的 VisualST，或者只运行 VisualST，在程序运行时可以在其中编辑字段。当我刚刚运行 PApplet 主函数时，我得到了要显示的窗口，但无法访问更改窗口构建方式的字段。

我可以在类 GUI 中单击按钮来编辑字段，该类 GUI 是没有处理导入的 Java：

```
 public class ButtonListener implements ActionListener
{
    public void actionPerformed (ActionEvent e){

        if(isInteger(BInput.getText())) 
            val = Integer.parseInt(BInput.getText());

         tree.setstval(val);//edits tree! a specific VisualST object
        }

    } 
```

这是 VisualST 类的要点：

```
 import processing.core.PApplet;

public class VisualST extends PApplet {

int stbranch;
int lvls;
//the branch class takes PApplet, length, value (that will be display), and rgb
public branch rt;
public int stval;//start value that should be changed when button is pressed

public void setup() {
    size(360, 640);
    stbranch = 120;
    lvls = 5;
}

public void draw() {
    background(150);
    //start at the top of screen and start drawing
    translate(width/2,0);
    //stval is passed through the constructor and then drawn as the value
    rt = new branch(this, stbranch, stval, 0, 0, 0);
    translate(0, stbranch);
    makeBranch(lvls, stbranch*2/3, 0);
}

void makeBranch(int lvls, double stlength, float y)
{
     //this makes the tree
}

        } 
```

这是分支构造函数：

```
 import processing.core.PApplet;

public class branch {

double y;
public int value;
PApplet parent;

int r;
int g;
int b;

private branch left;
private branch right;
int opacity; //0-255

branch(PApplet p, double fy, int v, int ir, int ig, int ib){
parent = p;
y = fy;
value = v;
opacity = 200;
parent.stroke(ir, ig, ib, opacity);
parent.line(0, 0, 0, (float)y);
parent.noFill();
parent.stroke(ir, ig, ib, opacity);
parent.ellipse(0, (float)(10+y), 20, 20); 
parent.fill(ir, ig, ib, opacity+25);
parent.text(value, -5,(float)(10+5+y));
} 
```

# java - 如何在 java 中生成 160 位素数？

> ID：15056184
> 
> 赞同：7
> 
> 时间：2013-02-24T20:18:52.957
> 
> 标签：java, primes

我想在 java 中生成一个 160 位素数。我知道我必须遍历所有 160 位数字，对于任何数字`n`，我必须检查它们是否可以被任何小于的素数`sqroot(n)`或任何素数测试（如`Miller-Rabin test`. 我的问题是：

1.  是否有任何特定的库可以做到这一点？

2.  还有其他（更好的）方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-24T20:35:55.627

[`BigInteger.probablePrime(160, new Random())`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html#probablePrime%28int,%20java.util.Random%29)生成一个`BigInteger`几乎可以肯定是素数的 - 它*不是*素数的概率小于你被闪电击中的概率。一般来说，`BigInteger`已经内置了经过大量测试和优化的素数测试操作。

对于它的价值，这不会永远持续下去的原因是，根据素数定理，随机选择的 n 位数字的概率与成为素数的 1/n 成正比，所以平均而言你只需要尝试 O(n ) 不同的随机 n 位数字，然后才能找到素数。

# python - 错误处理的 Python 问题（尝试，除外）

> ID：15056187
> 
> 赞同：0
> 
> 时间：2013-02-24T20:19:02.147
> 
> 标签：python, exception, exception-handling, error-handling, try-catch

我是编程新手，目前正在尝试解决错误处理。但我一直遇到同样的问题。当我发现错误时，我想再次重新运行脚本。问题是，如果你在第一个错误之后输入了一个好的输入，它仍然认为它是一个错误的输入。请帮帮我。

```
def new_user_name()
    print "Choose a Username"
    username = input_str()

    try: 
        data = lite.connect(database)
        dat = data.cursor()
        dat.execute("INSERT INTO Users('User_Name') VALUES(?)", username);
        dat.rollback()
        return username
    except: 
        print "The username %s is already in use" % username
        time.sleep(2)
        new_user_name() 
```

有人可以帮助我，或者链接一个关于错误处理的好教程吗？我会帮上大忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:24:27.230

Python有一个很棒的官方文档，链接如下：

v 2.7 [http://docs.python.org/2/tutorial/errors.html](http://docs.python.org/2/tutorial/errors.html) v 3.3 [http://docs.python.org/3.3/tutorial/errors.html](http://docs.python.org/3.3/tutorial/errors.html)

请注意，您绝不能`except:`在没有 Exception 类的情况下使用，这是一种不好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:28:02.530

`dat.rollback()`（如果这是一个有效的语法，没有检查但看起来很接近）应该在 except 部分而不是在 try 部分。

请注意，如果您在函数外部初始化数据库连接（这样您不必在每次函数调用时都这样做）或至少在 try 部分之外初始化数据库连接，您应该会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T20:29:33.000

```
dat.execute("INSERT INTO Users('User_Name') VALUES(?)", username); 
```

这条线是问题所在。第二个参数应该是一个元组，而不是一个字符串，所以它引发了一个`ValueError`. 因为您要捕获所有错误，而不仅仅是`sqlite3.IntegrityError`（如果您尝试插入重复的主键会引发错误），您将始终处于`except`块中。

`except`如果可以避免，切勿使用包罗万象的块。

# php - 通过 mail() PHP 传递文件

> ID：15056190
> 
> 赞同：0
> 
> 时间：2013-02-24T20:19:14.897
> 
> 标签：php, forms, sendmail, html-email

我有一个问题，我想通过电子邮件使用 PHP 发送一个文件（Photoshop、.gif 等）文件。我将 HTML 文档中的数据发布到以下 PHP 文件。问题：我收到电子邮件，但文件已损坏。知道为什么这不起作用吗？

```
 $to = 'admin@example.com'; 
    $subject = 'Order';

    $name = strip_tags($_POST['name']);
    $email = strip_tags($_POST['email']);
    $plz = strip_tags($_POST['plz']);
    $city = strip_tags($_POST['city']);
    $street = strip_tags($_POST['street']);
    $nr = strip_tags($_POST['nr']);

    $plzdelivery = strip_tags($_POST['plz-delivery']);
    $citydelivery = strip_tags($_POST['city-delivery']);
    $streetdelivery = strip_tags($_POST['street-delivery']);
    $nrdelivery = strip_tags($_POST['nr-delivery']);

    $buttonsize = strip_tags($_POST['button-size']);
    $count = strip_tags($_POST['count']);

    $message = "Name: ".$name." Email: ".$email." Plz: ".$plz." Stadt: ".$city." Strasse: ".$street." Hnr: ".$nr." Button: ".$buttonsize." Anzahl: ".$count;

    $type = $_FILES['file']['type'];
    $attachment = chunk_split(base64_encode(file_get_contents($_FILES['file']['tmp_name'])));
    $filename = $_FILES['file']['name'];

    $boundary =md5(date('r', time())); 

    $headers = "From: webmaster@example.com\r\nReply-To: webmaster@example.com";
    $headers .= "\r\nMIME-Version: 1.0\r\nContent-Type: multipart/mixed; boundary=\"_1_$boundary\"";

    $message="This is a multi-part message in MIME format.
--_1_$boundary
Content-Type: multipart/alternative; boundary=\"_2_$boundary\"

--_2_$boundary
Content-Type: text/plain; charset=\"iso-8859-1\"
Content-Transfer-Encoding: 7bit

$message

--_2_$boundary--
--_1_$boundary
Content-Type: application/octet-stream; name=\"$filename\" 
Content-Transfer-Encoding: base64 
Content-Disposition: attachment 

$attachment
--_1_$boundary--";

    mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:51:15.370

您应该安装 pear Mail_Mime 包，它可以让您轻松附加文件。

[http://pear.php.net/manual/en/package.mail.mail-mime.addattachment.php](http://pear.php.net/manual/en/package.mail.mail-mime.addattachment.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:56:30.610

简短的回答：甚至不要尝试。

PHP 的`mail()`功能在功能上是非常*非常*短的。如果您甚至考虑尝试使用它发送附件，那么您会遇到很多挫折和浪费时间。

我能给你的最好的答案是使用第三方库。有几个不错的。当其他人已经花了数年时间为你做这件事并把它做好时，为什么还要浪费你几周的时间来写一些不够好的东西。

我的建议是[phpMailer](https://code.google.com/a/apache-extras.org/p/phpmailer/)，但也存在其他几个。

# twitter-bootstrap - Bootstrap、css、进度条

> ID：15056191
> 
> 赞同：0
> 
> 时间：2013-02-24T20:19:33.397
> 
> 标签：twitter-bootstrap, progress-bar

我不明白为什么我的进度条不起作用。我想我的引导程序的 css 选项有问题。我试图更改选项以找出问题所在，但没有成功。

看法

```
 <div class="progress progress-success progress-striped">
 <div class="bar" style="width:20%"></div>
 </div> 
```

css

```
.progress {
  overflow: hidden;
  height: 18px;
  margin-bottom: 18px;
  background-color: #f7f7f7;
  background-image: -moz-linear-gradient(top, #f5f5f5, #f9f9f9);
  background-image: -ms-linear-gradient(top, #f5f5f5, #f9f9f9);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#f5f5f5), to(#f9f9f9));
  background-image: -webkit-linear-gradient(top, #f5f5f5, #f9f9f9);
  background-image: -o-linear-gradient(top, #f5f5f5, #f9f9f9);
  background-image: linear-gradient(top, #f5f5f5, #f9f9f9);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f5f5f5', endColorstr='#f9f9f9', GradientType=0);
  -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
}
.progress .bar {
  width: 0%;
  height: 18px;
  color: #ffffff;
  font-size: 12px;
  text-align: center;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #0e90d2;
  background-image: -moz-linear-gradient(top, #149bdf, #0480be);
  background-image: -ms-linear-gradient(top, #149bdf, #0480be);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#149bdf), to(#0480be));
  background-image: -webkit-linear-gradient(top, #149bdf, #0480be);
  background-image: -o-linear-gradient(top, #149bdf, #0480be);
  background-image: linear-gradient(top, #149bdf, #0480be);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#149bdf', endColorstr='#0480be', GradientType=0);
  -webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  -moz-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  -webkit-transition: width 0.6s ease;
  -moz-transition: width 0.6s ease;
  -ms-transition: width 0.6s ease;
  -o-transition: width 0.6s ease;
  transition: width 0.6s ease;
}
.progress-striped .bar {
  background-color: #62c462;
  background-image: -webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, rgba(255, 255, 255, 0.15)), color-stop(0.25, transparent), color-stop(0.5, transparent), color-stop(0.5, rgba(255, 255, 255, 0.15)), color-stop(0.75, rgba(255, 255, 255, 0.15)), color-stop(0.75, transparent), to(transparent));
  background-image: -webkit-linear-gradient(-45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: -moz-linear-gradient(-45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: -ms-linear-gradient(-45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: -o-linear-gradient(-45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: linear-gradient(-45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  -webkit-background-size: 40px 40px;
  -moz-background-size: 40px 40px;
  -o-background-size: 40px 40px;
  background-size: 40px 40px;
}
.progress.active .bar {
  -webkit-animation: progress-bar-stripes 2s linear infinite;
  -moz-animation: progress-bar-stripes 2s linear infinite;
  animation: progress-bar-stripes 2s linear infinite;
}
.progress-success .bar {
  background-color: #5eb95e;
  background-image: -moz-linear-gradient(top, #62c462, #57a957);
  background-image: -ms-linear-gradient(top, #62c462, #57a957);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#62c462), to(#57a957));
  background-image: -webkit-linear-gradient(top, #62c462, #57a957);
  background-image: -o-linear-gradient(top, #62c462, #57a957);
  background-image: linear-gradient(top, #62c462, #57a957);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#62c462', endColorstr='#57a957', GradientType=0);
}
.progress-success.progress-striped .bar {
  background-color: #62c462;
  background-image: -webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, rgba(255, 255, 255, 0.15)), color-stop(0.25, transparent), color-stop(0.5, transparent), color-stop(0.5, rgba(255, 255, 255, 0.15)), color-stop(0.75, rgba(255, 255, 255, 0.15)), color-stop(0.75, transparent), to(transparent));
  background-image: -webkit-linear-gradient(-45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: -moz-linear-gradient(-45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: -ms-linear-gradient(-45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: -o-linear-gradient(-45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: linear-gradient(-45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:13:35.550

您的代码看起来不错 - 但是，要使进度条“工作”，您还必须为`width`.

有很多方法可以做到这一点，但您必须选择最适合您的页面或页面体验的方法。例如，您可能有 5 页，就像在调查中一样。进度条将是每个页面上的持久元素。在创建每个页面时，您会想要更改宽度的内联样式，可能是这样的：

```
<div class="bar" style="width:20%"></div>
<div class="bar" style="width:40%"></div>
<div class="bar" style="width:60%"></div>
<div class="bar" style="width:80%"></div>
<div class="bar" style="width:100%"></div> 
```

当您这样做时，进度条的可视化将被更新。在单页和多页中都有很多方法可以做到这一点，但以上只是一个示例。

这是一个供您使用的工作示例：

[http://jsfiddle.net/dusthaines/jjdTt/](http://jsfiddle.net/dusthaines/jjdTt/)

# c# - 用for循环打印出书籍列表，c#

> ID：15056192
> 
> 赞同：2
> 
> 时间：2013-02-24T20:19:36.747
> 
> 标签：c#

我有一堂书课，里面有几本书，有书作者、出版年份和书名。现在我想使用循环打印出书籍，但我不确定我应该使用什么循环。这是我的书类代码：

```
class Book
{
    public string forfattareEfternamn;
    public string forfattareFornamn;
    public string bokensTittle;
    public int lanseringsDatum;

    public string BokensTittle
    {
        get { return bokensTittle; }
        set { bokensTittle = value; }
    }
    public string ForfattareFornamn
    {
        get {return forfattareFornamn;}
        set {forfattareFornamn = value;}
    }

    public string ForfattareEfternamn
    {
        get {return forfattareEfternamn;}
        set {forfattareEfternamn = value;;}
    }

    public int LanseringsDatum
    {
        get { return lanseringsDatum; }
        set { lanseringsDatum = value; }
    }

    public override string ToString()
    {
        return string.Format("{0}, {1}, {2}, {3} ", forfattareEfternamn, ForfattareFornamn, bokensTittle, lanseringsDatum);

    }
} 
```

这是 Main 中的代码，我在其中创建了我的书单：

```
class Program
{
    static void Main(string[] args)
    {
        List<Book> books = new List<Book>();
        books.Add(new Book { forfattareFornamn = "Dumas", forfattareEfternamn = "Alexandre", bokensTittle = "The Count Of Monte Cristo", lanseringsDatum = 1844 });
        books.Add(new Book { forfattareFornamn = "Clark", forfattareEfternamn = "Arthur C", bokensTittle = "Rendezvous with Rama", lanseringsDatum = 1972 });
        books.Add(new Book { forfattareFornamn = "Dumas", forfattareEfternamn = "Alexandre", bokensTittle = "The Three Musketeers", lanseringsDatum = 1844 });
        books.Add(new Book { forfattareFornamn = "Defoe", forfattareEfternamn = "Daniel", bokensTittle = "Robinson Cruise", lanseringsDatum = 1719 });
        books.Add(new Book { forfattareFornamn = "Clark", forfattareEfternamn = "Arthur C", bokensTittle = "2001: A space Odyssey", lanseringsDatum = 1968 });

    }
} 
```

所以，我想使用一个循环，使用 ToString() 方法在控制台屏幕上打印列表中的书籍（不显式调用 ToString()）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:21:37.673

```
foreach(Book b in books)
    Console.WriteLine(b); 
```

ToString 被 WriteLine 自动调用（啊，多态性......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T20:24:03.157

使用 foreach 循环遍历集合中出现的书籍数量。然后将它们打印到控制台。

```
foreach (Book book in books)
{
    Console.WriteLine(book.ToString()); // ToString gets called automatically so you can skip that if you want. I think it makes it a little clearer when reading it again.
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T20:24:20.503

如果您在项目中包含对 System.Linq 的引用，则可以使用：

```
books.ForEach(b => Console.WriteLine(b)) 
```

您甚至可以将其缩短为：

```
books.ForEach(Console.WriteLine) 
```

# html - Internet Explorer 中的高分辨率屏幕设计

> ID：15056195
> 
> 赞同：0
> 
> 时间：2013-02-24T20:19:55.580
> 
> 标签：html, internet-explorer, css, internet-explorer-8

这可能是一个完全愚蠢的问题......但我是 HTML/CSS 的新手，所以不要讨厌。我在我的 CSS 中将它用于高分辨率背景图像。

```
 @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) { 
 .pin_placeholder {

background-image: url(../images/taxi_pink@2x.png);
background-size: 150px 61px;

    } 
```

它工作正常，但如果有人试图通过 IE 8 及更低版本的高分辨率屏幕访问它怎么办？这些 IE 版本不支持背景大小，但我不知道如何包含背景图像。我在这方面完全错了吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:34:00.967

我认为可以安全地假设运行 IE8 或更低版本的用户仍在使用 Windows XP。必须正确支持高分辨率显示器才能利用更高的像素密度。否则它会以 1:1 的比例使用像素，所以在 Macbook Pro（像素密度为 227 ppi）上看起来像 1440 像素 x 900 像素的东西在 Windows XP 中变成了 2880 x 1800 像素，只有一半的密度（我看到在虚拟机）。

因此，我相信可以安全地假设，目前至少有 % 的用户配置允许他们在高分辨率屏幕上本机运行 IE8，以至于没有必要迎合他们（毕竟，他们得到的只是是改进的图像渲染，仅此而已）。

# sql - SQL Server 2008 R2 获取一组文本字符串之间的公共文本

> ID：15056201
> 
> 赞同：1
> 
> 时间：2013-02-24T20:20:25.527
> 
> 标签：sql, string, text, sql-server-2008-r2, words

我当然希望有人可以帮助我解决这个问题。我一直在寻找几个小时才能找到它，但我空空如也。

在这个例子中，我的表中有两列

```
GRP_ID    Desc 
```

我的组 ID 是我将识别这些产品属于同一类型的方式，而 desc 是我要查找所有常用词的方式。

所以这是我的桌子

```
GRP_ID          Desc
-------------------------------   
2               Red Hat
2               Green Hat
2               Yellow Hat
3               Boots Large Brown
3               Boots Medium Red
3               Boots Medium Brown 
```

作为查询的结果，我想要的是以下内容

```
GRP_ID           Desc
-----------------------    
2                Hat
3                Boots 
```

所以我想要的是组中每个字符串中出现的所有单词或组中的常见单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:21:33.570

I think you'd need to create a mapping table for GRP_ID and products - e.g. Hat and Boots.

```
CREATE TABLE GroupProductMapping (
    GRP_ID INT NOT NULL, -- I'm assuming its an Int
    ProductDesc VARCHAR(50) NOT NULL
)

SELECT a.GRP_ID,
    b.ProductDesc Desc
FROM {Table_Name} a
INNER JOIN GroupProductMapping b ON a.GRP_ID = b.GRP_ID 
```

Alternatively, if you don't have too many products. You could use CASE in your SELECT clause. e.g.

```
SELECT 
    GRP_ID,
    CASE GRP_ID 
        WHEN 1 THEN 'Hat' 
        WHEN 2 THEN 'Boots'
    END AS Desc
FROM {Table_Name} 
```

{Table_Name} is the name of your original table.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:25:22.390

理想情况下，您会将数据标准化并将单词存储在单独的表中。

但是，对于您的即时需求，您首先需要提供一个 UDF 将“desc”拆分为单词。我挖[了这个功能](http://blogs.microsoft.co.il/blogs/itai/archive/2009/02/01/t-sql-split-function.aspx)：

```
-- this function splits the provided strings on a delimiter
-- similar to .Net string.Split.
-- I'm sure there are alternatives (such as calling string.Split through
-- a CLR function).  
CREATE FUNCTION [dbo].[Split]
(    
    @RowData NVARCHAR(MAX),
    @Delimeter NVARCHAR(MAX)
)
RETURNS @RtnValue TABLE 
(
    ID INT IDENTITY(1,1),
    Data NVARCHAR(MAX)
) 
AS
BEGIN 
    DECLARE @Iterator INT
    SET @Iterator = 1

    DECLARE @FoundIndex INT
    SET @FoundIndex = CHARINDEX(@Delimeter,@RowData)

    WHILE (@FoundIndex>0)
    BEGIN
        INSERT INTO @RtnValue (data)
        SELECT 
            Data = LTRIM(RTRIM(SUBSTRING(@RowData, 1, @FoundIndex - 1)))

        SET @RowData = SUBSTRING(@RowData,
                @FoundIndex + DATALENGTH(@Delimeter) / 2,
                LEN(@RowData))

        SET @Iterator = @Iterator + 1
        SET @FoundIndex = CHARINDEX(@Delimeter, @RowData)
    END

    INSERT INTO @RtnValue (Data)
    SELECT Data = LTRIM(RTRIM(@RowData))

    RETURN
END 
```

然后您需要拆分描述并进行一些分组（如果数据已标准化，您也可以这样做）

```
-- get the count of each grp_id
with group_count as
(
    select grp_id, count(*) cnt from [Group]
    group by grp_id
),
-- get the count of each word in each grp_id
group_word_count as
(
    select count(*) cnt, grp_id, data from 
    (
        select * from [group] g
        cross apply dbo.Split(g.[Desc], ' ') 
    )
    t
    group by grp_id, data
)
-- return rows where number of grp_id = number of words in grp_id
select gwc.GRP_ID, gwc.Data [Desc] from group_word_count gwc 
inner join group_count gc on gwc.GRP_ID = gc.GRP_ID and gwc.cnt = gc.cnt 
```

[Group] 是您的桌子。

# javascript - AngularJS 使用 $resources 时如何保留本地 UI 状态

> ID：15056216
> 
> 赞同：1
> 
> 时间：2013-02-24T20:21:26.390
> 
> 标签：javascript, rest, angularjs

我的问题是[更大程序的一部分，但我在更简单的](https://github.com/nurpax/hstodo/blob/master/static/todo.js)[jsfiddle](http://jsfiddle.net/nurpax/Zk4NN/)中提取了问题的模拟。

我正在为待办事项实现“详细视图”显示/隐藏控制器。当我单击链接时，会显示或隐藏详细视图。详细视图状态存储在`todo.showDetails`. 这工作正常。

当我将待办事项标记为已完成时，我使用以下方法将其当前状态保留在服务器上：

```
// Persist immediately as clicked on
$scope.checkTodo = function (todo) {
    todo.$save();
}; 
```

这会导致我的详细视图在`todo.showDetails`状态丢失时隐藏，因为它不是持久化项目的一部分（即，它被服务器的待办事项项目视图覆盖，其中不包含 UI 状态`todo.showDetails`）。我并不惊讶，这是有道理的。

我的问题是：我的待办事项如何同时包含本地 UI 状态和保存在服务器上的数据？当 I 时`todo.$save()`，我希望将`todo`的数据保存在服务器上，*同时*保留`todo.showDetails`客户端代码中的值。即，每当我打电话时`todo.$save()`，我都希望我的 UI 状态保持不变。

在 AngularJS 中有没有一种惯用的方法来做到这一点？我不想像`showDetails`在服务器上那样保留 UI 值。

我一直在考虑实现这一点的一种方法是拥有一个单独的服务来存储每个待办事项的 UI 状态。当我需要访问本地状态时，而不是访问 like `todo.showDetails`，我可以做类似`AppState.lookup(todo.id).showDetails`或类似的事情。但也许有一个更简单的方法..

--**更新 2013-02-25** --

我按照下面的[答案](https://stackoverflow.com/a/15056593/45461)做了，只是将 UI 状态与 $resource.get/query 调用创建的待办事项分开。它比我想象的要简单得多（参见[commit](https://github.com/nurpax/hstodo/commit/687e675a73b8df68f0c030d6d66ddefd3805174e)）：

我的控制器更改：

```
 $scope.todos = Todo.query();
+    $scope.todoShowDetails = [];

+    $scope.toggleShowDetails = function (todo) {
+        $scope.todoShowDetails[todo.id] = !$scope.todoShowDetails[todo.id];
+    }
+
+    $scope.showDetails = function (todo) {
+        return $scope.todoShowDetails[todo.id];
+    } 
```

模板更改：

```
-      <label class="btn btn-link done-{{todo.done}}" ng-click="todo.showDetails = !todo.showDetails">
+      <label class="btn btn-link done-{{todo.done}}" ng-click="toggleShowDetails(todo)">
..
-      <div ng-show="todo.showDetails" ng-controller="TodoItemCtrl">
+      <div ng-show="showDetails(todo)" ng-controller="TodoItemCtrl"> 
```

当我把它放在代码中时，这很简单。我的 jsfiddle 示例有点做作，在我的 todo 应用程序的上下文中更有意义。如果问题难以理解或太琐碎，也许我应该删除这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:58:21.210

您是否可以从待办事项对象中提取该 UI 状态？您仍然会将状态对象放在范围内，而不是放在 todo 对象内。听起来这种类型的状态无论如何都不属于 todo 对象，因为您不想保留它。

# python - 快速计数网格中的粒子

> ID：15056224
> 
> 赞同：0
> 
> 时间：2013-02-24T20:22:00.493
> 
> 标签：python, optimization, counting

我编写了一些 python 代码来计算宇宙模拟中的某个数量。它通过检查是否包含在大小为 8,000^3 的盒子中的粒子来做到这一点，从原点开始并在找到包含在其中的所有粒子时推进盒子。由于我总共计算了大约 200 万个粒子，并且模拟体积的总大小为 150,000^3，因此这需要很长时间。

我将在下面发布我的代码，有人对如何改进它有任何建议吗？

提前致谢。

```
from __future__ import division
import numpy as np

def check_range(pos, i, j, k):
    a = 0
    if i <= pos[2] < i+8000:
            if j <= pos[3] < j+8000:
                    if k <= pos[4] < k+8000:
                            a = 1
    return a

def sigma8(data):

    N = []

    to_do = data

    print 'Counting number of particles per cell...'

    for k in range(0,150001,8000):
            for j in range(0,150001,8000):
                    for i in range(0,150001,8000):
                            temp = []
                            n = []
                            for count in range(len(to_do)):
                                    n.append(check_range(to_do[count],i,j,k))
                                    to_do[count][1] = n[count]
                                    if to_do[count][1] == 0:
                                           temp.append(to_do[count])
                                    #Only particles that have not been found are
                                    # searched for again

                            to_do = temp
                            N.append(sum(n))
                    print 'Next row'
            print 'Next slice, %i still to find' % len(to_do)

    print 'Calculating sigma8...'

    if not sum(N) == len(data):
            return 'Error!\nN measured = {0}, total N = {1}'.format(sum(N), len(data))

    else:
            return 'sigma8 = %.4f, variance = %.4f, mean = %.4f' % (np.sqrt(sum((N-np.mean(N))**2)/len(N))/np.mean(N), np.var(N),np.mean(N)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:45:19.857

我将尝试发布一些代码，但我的总体想法如下：创建一个知道它所在的盒子的 Particle 类，该类在`__init__`. 每个盒子都应该有一个唯一的名称，它可能是左下角的坐标（或者你用来定位盒子的任何东西）。

为每个粒子获取一个 Particle 类的新实例，然后使用 Counter（来自集合模块）。

粒子类看起来像：

```
# static consts - outside so that every instance of Particle doesn't take them along
# for the ride...
MAX_X = 150,000
X_STEP = 8000
# etc.

class Particle(object):

    def __init__(self, data):
        self.x = data[xvalue]
        self.y = data[yvalue]
        self.z = data[zvalue]
        self.compute_box_label()

    def compute_box_label(self):
        import math

        x_label = math.floor(self.x / X_STEP)
        y_label = math.floor(self.y / Y_STEP)
        z_label = math.floor(self.z / Z_STEP) 
        self.box_label = str(x_label) + '-' + str(y_label) + '-' + str(z_label) 
```

无论如何，我想你的`sigma8`功能可能看起来像：

```
def sigma8(data):
    import collections as col

    particles = [Particle(x) for x in data]
    boxes = col.Counter([x.box_label for x in particles])
    counts = boxes.most_common()

    #some other stuff 
```

`counts`将是一个元组列表，将框标签映射到该框中的粒子数。（这里我们将粒子视为无法区分。）

使用列表推导比使用循环快得多——我认为原因是您基本上更多地依赖于底层 C，但我不是要问的人。Counter （据说）也是高度优化的。

注意：这些代码都没有经过测试，所以你不应该在这里尝试剪切粘贴和希望它的工作方法。

# python - 一次运行多个正则表达式

> ID：15056226
> 
> 赞同：1
> 
> 时间：2013-02-24T20:22:19.450
> 
> 标签：python, regex

我有一个很长的文件，我设法一次使用 Python 正则表达式解析一个值，例如，这是我用来打印标签之间所有值的 `<h2>`代码：

```
import os
import re

def query():
    f = open('company.txt', 'r')    
    names = re.findall(r'<h2>(.*?)</h2>', f.read(), re.DOTALL)
    for name in names:
        print name

if __name__=="__main__":
    query() 
```

我也重复同样的事情来打印出来`area_code`。但是这一次，我只是替换了findall 函数中的*模式*来打印区号。这意味着我必须运行代码两次。

我的问题是，有没有一种方法可以简单地同时运行两个查询并将结果打印在由管道 (|) 分隔的一行中？像这样：`Planner | B21`

下面是我要解析的简短示例文件。

```
 <h2>Planner</h2>
    area_place = 'City of Angels';
    area_code = 'B21';
    period = 'Summer';
    ... more content
   <h2>Executive</h2>

    area_place = 'London';
    area_code = 'D33';
    period = 'Winter';
    ...more content 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:33:07.550

这对我在 Python 2.7 中的测试数据有用，试一试：

```
import os
import re

def query():
    f = open('company.txt', 'r')    
    names = re.findall(r"<h2>(.+?)</h2>.*?area_code = '(.+?)'", f.read(), re.DOTALL)
    for name in names:
        print name[0] + " | " + name[1]

if __name__=="__main__":
    query() 
```

基本上，我只是将两个查询合并为一个，然后以数字方式指定捕获组。您可能想要重命名“名称”，因为我这样做的方式不太有意义。

或者，如果您想保留现有查询并且可以假设它们的长度都相同，您可以执行以下操作：

```
names = re.findall(your names regex)
area_codes = re.findall(your area code regex)

for i in range(len(names)):  //very dangerous, if there's one failed match many entries may be mismatched!
    print names[i] + " | " + area_codes[i] 
```

但是，除非您对数据的规律性非常有信心，否则我不会推荐这种方法。

# php - 在while循环中设计表格

> ID：15056228
> 
> 赞同：2
> 
> 时间：2013-02-24T20:22:23.653
> 
> 标签：php, while-loop, html-table

我想在一个表（2 * 2）中显示来自数据库的 4 个图像，我知道该怎么做。但我也有特殊情况（如果图片少于4张，它会显示默认图片，总共显示4张图片）

我在一个while循环中管理这个。如果有 4 张图像没有问题，它可以按我的意愿工作，但是当图像较少时（这意味着默认图像将总共完成 4 张图像），它就不起作用了。我不知道该怎么做。

有什么帮助吗？

```
<table>
<tr>
<?php                               
$todisplay = 4;

$query = mysql_query("select * from Images where Country_ID=$co_id LIMIT 0,4;");

while ($row = mysql_fetch_array($query)) {
$x++;
 echo "<td><img src='".$row['I1_Th'] .  "'/></td>";
 $displayed_number++;
 if ($x % 2==0) {
 echo "</tr><tr>";}
}   

echo str_repeat("<td>
<img src='images/png/defthumb.png'> </td>", $todisplay-$displayed_number);
?>
</tr></table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:26:26.730

您离它不远 - 只需创建另一个执行相同操作的循环，但使用默认图像。此外，`$displayed_number`似乎与 具有相同的值`$x`，因此我将其删除。

```
<table>
<tr>
<?php                               
$todisplay = 4;

$query = mysql_query("select * from Images where Country_ID=$co_id LIMIT 0,4;");
$x = 0;

while ($row = mysql_fetch_array($query)) {
$x++;
 echo "<td><img src='".$row['I1_Th'] .  "'/></td>";

 if ($x % 2==0) {
 echo "</tr><tr>";}
}   

while ( $x < $todisplay) {
$x++;
 echo "<td><img src='images/png/defthumb.png'/></td>";
 if ($x % 2==0) {
 echo "</tr><tr>";}
}   
?>
</tr></table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:34:01.920

与其遍历查询返回的行，不如直接循环四次并尝试获取一行？

```
<table>
<tr>
<?php                               
$tablerows = 2;

$query = mysql_query("select * from Images where Country_ID=$co_id LIMIT " + ($tablerows * 2) + ";");

for ($x = 1; $x <= ($tablerows * 2); $x++) {
  if ($row = mysql_fetch_array($query)) {
    echo "<td><img src='".$row['I1_Th'] .  "'/></td>";
  } else {
    echo "<td><img src='images/png/defthumb.png'></td>";
  }
  if ($x % 2==0 && $x != $tablerows * 2) {
    echo "</tr><tr>";}
}
?>
</tr></table> 
```

# c# - 列表中的简单下拉列表

> ID：15056244
> 
> 赞同：3
> 
> 时间：2013-02-24T20:24:10.950
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

该模型

```
@model List<Survey.SurveyQuestion> 
```

SurveyQuestion 有两个属性，`QuestionId`并且`QuestionText`

```
Html.DropDownList("Questions", new SelectList(@Model))

@Html.DropDownList("Questions", new SelectList(@Model), "QuestionId", "QuestionText") 
```

**上述代码的输出：**

![上述代码的输出：](../Images/a443d0a70990f8f3e739b1292a39a826.png)

无法使用 DropDownListFor，因为它无法识别字段**QuestionId**（或事实上的任何字段）。

```
@Html.DropDownListFor(item => item.QuestionId, new SelectList(Model, 
    "QuestionId", "QuestionText"), "--Select --")) 
```

以下代码正确显示所有数据：

```
@foreach (var item in Model)
{
    <p>@item.QuestionId - @item.QuestionText</p>
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T21:32:28.877

你设置`SelectList`错了。试试这个（**在 SO 上添加了行空间以提高可读性**）：

```
@Html.DropDownList(
    "Questions",
     Model.Select(m => new SelectListItem 
         {
             Value = m.QuestionId.ToString(),
             Text = m.QuestionText
         })) 
```

# c# - 如何将下拉列表值传递到另一个页面

> ID：15056249
> 
> 赞同：1
> 
> 时间：2013-02-24T20:24:19.930
> 
> 标签：c#, asp.net

我有一个带有按钮的 DropDownList：

```
<form id="form1" runat="server">
      <asp:DropDownList ID="DropDay" runat="server"/>
      <input type="submit" value="Save" runat="server" id="btn"/>
</form> 
```

页面的 C# 代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    btn.ServerClick+=new EventHandler(btn_ServerClick);
}

void btn_ServerClick(object sender, EventArgs e)
{
    HttpContext value= HttpContext.Current;
    value.Items.Add("Day", DropDay.SelectedValue);
    Server.Transfer("ASP_2.aspx");
} 
```

在 ASP_2 我有一个标签，我需要设置选定的下拉列表值。这是 ASP_2.aspx 的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    HttpContext value= HttpContext.Current;
    lblDay.Text = value.Items["Day"].ToString();
} 
```

问题是，该值始终是下拉菜单中的第一项。如何设置选定的值？

**编辑**

我填写下拉列表的方式代码进入Page_Load：

```
DropDay.Items.Clear();
for (int i = 1; i <= 10; i++)
{
    DropDay.Items.Add(i.ToString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:56:53.130

您填写 DDL 的代码应该是（至少）：

```
if (!IsPostBack)
{
  DropDay.Items.Clear();
      for (int i = 1; i <= 10; i++)
      {
          DropDay.Items.Add(i.ToString());
      }
} 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:42:52.457

您可以在第一页中使用它：

```
Server.Transfer("ASP_2.aspx?dropdown="+DropDay.SelectedValue);

and in the second page

 protected void Page_Load(object sender, EventArgs e)
{
  string val=Request.QueryString["dropdown"].toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T20:51:02.970

也许您将下拉列表的 autopostback 属性设置为 true。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T20:55:35.487

自己想出来，只需要删除“DropDay.Items.Clear();”

```
 //DropDay.Items.Clear(); removed this line and the thing was fixed
for (int i = 1; i <= 10; i++)
{
    DropDay.Items.Add(i.ToString());
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-24T20:30:49.207

你试过 DropDay.SelectedItem.Text 吗？

# android - 如何在 Intellij Idea 上导入滑动菜单？

> ID：15056250
> 
> 赞同：3
> 
> 时间：2013-02-24T20:24:24.937
> 
> 标签：android, intellij-idea, slidingmenu

我正在使用intellij的想法。您可能知道，在 Eclipse 上运行时，将[滑动菜单](https://github.com/jfeinstein10/SlidingMenu)库导入您的全新项目是很痛苦的。我做过一次，但我不再使用 intellij idea，我想知道是否有人知道如何在使用 Intellij 时成功导入和运行它？这对我来说非常重要。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T12:52:55.440

我已经使用`example`from`SlidingMenu`和准备了示例项目`ActionBarSherlock`。你可以[在这里抓住它](https://dl.dropbox.com/u/2752840/SlidingMenu.zip)进行调查。`SlidingMenu/example`在 IDEA 中打开项目并配置**Android 4.1.2 Google APIs** SDK。构建，在模拟器中运行进行测试。诀窍是正确设置依赖关系并更改`*Activity`为`Sherlock*Activity`多个库类（根据 SlidingMenu 项目页面上的说明）。

依赖项设置如下：

```
example (main app)
  library (SlidingMenu)
    abs (ActionBarSherlock) (make sure Export is enabled)
      android-support-v4.jar (make sure Export is enabled)
      junit (for ActionBarSherlock tests) 
```

![依赖关系](../Images/fbaa65e219543ed2693e1374537325f0.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-19T05:07:16.390

如果有人不想使用 CrazyCoder 代码，我只想添加我的解决方案。此解决方案在 Mac OS X 上使用 IntelliJ。这是菜鸟的步骤：

1.  转到文件 > 导入模块。选择你下载的解压的SlidingMenu的根目录
2.  导入模块后，转到文件 > 项目结构。选择“项目设置”下的“模块”，然后选择您的项目名称。选择 Dependencies 选项卡并单击“+”号并选择“Module Dependency”并选择 SlidingMenu 模块。
3.  如果您的项目名称的模块具有 android-support-v4.jar 的依赖项，请将其删除，因为 SlidingMenu 已经具有该依赖项
4.  选择 SlidingMenu 模块并启用android-support-v44 (android-support-v4.jar) 的**导出**

# java - 我应该如何在我的 Java 程序中显示我的代码？

> ID：15056253
> 
> 赞同：1
> 
> 时间：2013-02-24T20:25:00.830
> 
> 标签：java, joptionpane, jtextpane

如果这个问题太“笼统”，我深表歉意；但是我的问题非常具体到我正在编程的内容，我无法在其他任何地方找到下降的答案。

我正在创建一个“概念证明”程序，以在我的 calc 课程中获得额外的学分。现在程序已经完成了，我想制作一个方法来查看程序的编码给老师看，并解释我做了什么。

我的第一个想法是使用 JTextPane，但它是如何工作的呢？我想找到一些方法来显示所有的编码行，保持 Java/Eclipse 使用的编码结构。

做这个的最好方式是什么？

谢谢，

-史蒂文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:03:46.903

使用 system.out.println 并在[https://github.com/](https://github.com/)获得一个免费帐户并上传您的代码和程序的输出。将链接发送给您的教授..我认为他不仅会对您的工作印象深刻，还会对您向他/她展示代码以进行审查的方式印象深刻。

祝你好运，我已经对你在网上搜索以最好地展示你的作品感到印象深刻，因为你也应该得到 A+。保持良好的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:57:41.140

如果我是您的老师，我更愿意在 IDE（例如 Eclipse）中展示您的代码。然后我可以随意浏览并看到它在我面前执行。

IDE 是为查看代码而*构建的 :-)*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T20:57:48.133

我更喜欢你使用你的IDE，但无论如何：也许我错了，但我认为唯一的方法是从（.java）文件中获取代码并将其复制到TextArea，但它不像你的IDE那样完美。我不会发布整个程序只是功能希望它对你有用

```
 Scanner sc = null;
    try{
        sc=new Scanner(new File("yourProgram.java"));
    }catch(Exception ex){System.out.println(ex.getMessage());}
    String line = "";
    while (sc.hasNextLine()){
        jTextArea1.append(line=sc.nextLine()+"\n");   
    } 
```

# jquery - 滚动到不起作用

> ID：15056254
> 
> 赞同：-1
> 
> 时间：2013-02-24T20:25:09.547
> 
> 标签：jquery, scrollto, easing

我重新打开了我之前的问题，因为它由于不够具体而被关闭。

我正在尝试使 jQuery 插件“ScrollTo”工作，但尽管使用了文档描述的相同方法，但我肯定做错了。

这是我如何进行的：

在我的末尾调用 jquery`<head>`

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
<script type='text/javascript' src='js/jquery.scrollTo-min.js'></script>
<script type='text/javascript' src='js/init.js'></script> 
```

我把代码放在我的菜单链接中

```
<li><a title="$(...).scrollTo( 'home' );" href="#home"><span></span>Home</a></li> 
```

这就是他们在文档中的表现：查看源代码： http: [//demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

但是它不起作用。我在那里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:19:07.127

### 在演示中

```
<a title="$(...).scrollTo( 'home' );" href="#home"> 
```

实际上，该`title`属性用于其原始目的，并且仅用于该目的。目的是在悬停时显示一个小工具提示。插件绝不会解释此标题。

行为编码在*他们的* `js/init.js`文件中，它看起来像这样：

```
$('#relative-selector').click(function()
  $paneTarget.stop().scrollTo( 'li:eq(14)', 800 );
});
...
//the same for every link on the page 
```

### 正确的用法

在项目主页面上有描述，页面根本没有提到`title`属性。演示的目的是展示插件的功能，它似乎不是为源代码检查而设计的。主页网址是： http:
[//flesler.blogspot.cz/2007/10/jqueryscrollto.html](http://flesler.blogspot.cz/2007/10/jqueryscrollto.html)

在您的情况下，将 ID（或类）添加到链接中，以便您可以从 Javascript 中找到它。然后向链接添加一个点击处理程序，它将调用插件。如果将字符串传递给`scrollTo`，则它应该是选择器而不是 ID（添加`#`）。要滚动浏览器窗口，请使用`scrollTo`as `$.scrollTo`，要滚动任何其他容器，请使用`$(container).scrollTo`。此外，您可以删除`href`目标。

示例 HTML：

```
<a href="#" id="click-me">...</a> 
```

示例 JS：

```
$("#click-me").click(function(){
  $.scrollTo("#home");
}); 
```

`$(document).ready(...)`如果您喜欢`<head>`. 另请注意，这`init.js`是*演示*主 JS 文件的名称。如果您的名称以其他方式命名，则不需要`init.js`文件，当然也不需要从演示中复制/粘贴文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:36:42.007

我怀疑在“家”前面加上一个井号可能会解决这个问题：

```
<li><a title="$(...).scrollTo( '#home' );" href="#home"><span></span>Home</a></li> 
```

似乎`scrollTo`需要一个 jQuery 选择器（对于您想要的），因此您需要井号使其成为有效的选择器。

# php - 做...对于每个可能的记录集组合

> ID：15056256
> 
> 赞同：2
> 
> 时间：2013-02-24T20:25:23.233
> 
> 标签：php, mysql, arrays

我需要编写一个 php 脚本......

示例：
产品“汽车”
选项 1：燃料
选项 1 值：汽油、汽油
选项 2：颜色
选项 2 值：红色、蓝色、绿色
选项 3：门
选项 3 值：3、5

我需要为所有选项/值对之间的每个可能组合执行一些代码的东西，比如

组合1：汽油，红色，3
组合2：汽油，红色，5
组合3：汽油，蓝色，3
组合4：汽油，蓝色，5
...
组合10：汽油，蓝色，5
..
组合100：汽油，绿色，5

当然，选项编号和选项值编号是动态生成的

我应该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:39:48.833

您在问题上提出的是**笛卡尔积**。

如果你有一个静态数量的数组，你可以使用@Moo-Juice 代码，但是对于更复杂的逻辑，你必须使用大量的数组，或者即使你不知道会有多少个数组，您可以查看[这个](https://stackoverflow.com/questions/6311779/finding-cartesian-product-with-php-associative-arrays)问题，其中第一个答案详细说明了生成任意数量数组的笛卡尔积的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:31:06.037

最简单的方法是为每个“选项”循环。此代码假定每个选项集的值已预加载到数组中。

```
$optionSet1 = array("Gasoline", "Petrol");
$optionSet2 = array("Red", "Blue", "Green");
$optionSet3 = array(3, 5);

foreach($optionSet1 as $o1)
{
   foreach($optionSet2 as $o2)
   {
       foreach($optionSet3 as $o3)
       {
          // Do your thing with $o1, $o2, and $o3
       }
   }
} 
```

# cakephp-2.0 - 如何保存在 cakephp hasMany 关系中选中的多个复选框值？

> ID：15056266
> 
> 赞同：1
> 
> 时间：2013-02-24T20:26:45.157
> 
> 标签：cakephp-2.0

假设我有 3 张桌子`property_details`, `property_feature_details`, `property_feature_relations`.

PropertyDetail 模型与 PropertyFeatureRelation 具有 hasMany 关系。

当时保存我的数据数组如下所示：

```
$this->data = array('PropertyDetail' => array('name'=>'xyz'),'PropertyFeatureRelation' => array('0' => array('feature_id'=>1),'1' => array('feature_id'=>5),'2' => array('feature_id'=>0),'3' => array('feature_id'=>0))); 
```

这些 feature_ids 值来自复选框。那些已检查它们包含 ids 值，未检查的值为 0。但在子表中保存所有数据为零和非零。

实际上我想保存那些只被选中的复选框值。请不要提供任何手动控制器逻辑。帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:33:05.377

我正在用我的例子来解释你，这个例子有问题、答案和调查

您可以使用多个复选框语法，如下所示：

```
 $answers=array();
                                    $tmp_ans=$question['Answer'];
                                    for($j=0;$j < count($tmp_ans);$j++)
                                    $answers[$tmp_ans[$j]['id']]=$tmp_ans[$j]['answer'];            
                                    echo '<li>';
                                        echo $this->Form->input('Answer', array(
                                        'type' => 'select',
                                        'name'=>'Answer['.$question['Question']['id'].']',
                                        'class'=>'test',
                                        'label'=>false,
                                        'multiple' => 'checkbox',
                                        'options' =>$answers ,
                                        ));

                                    echo '</li>'; 
```

之后，您将只有那些您检查过的答案，其他人不会出现在帖子数组中，因此要保存数据，您可以使用以下语法

```
if(!empty($this->data['Answer'])){

                foreach ($this->data['Answer'] as $key=>$val):

                    if(!empty($val)):
                            if(is_array($val)):

                                foreach ($val as $ans):
                                    $post_data['UserAnswer']['id']='';
                                    $post_data['UserAnswer']['survey_id']=$id;
                                    $post_data['UserAnswer']['user_id']=$this->Auth->user('id');
                                    $post_data['UserAnswer']['question_id']=$key;
                                    $post_data['UserAnswer']['answer_id']=$ans;
                                    $this->UserAnswer->save($post_data['UserAnswer']);
                                endforeach;
                            else:
                                    $post_data['UserAnswer']['id']='';
                                    $post_data['UserAnswer']['survey_id']=$id;
                                    $post_data['UserAnswer']['user_id']=$this->Auth->user('id');
                                    $post_data['UserAnswer']['question_id']=$key;
                                    $post_data['UserAnswer']['answer_id']=$val;
                                    $this->UserAnswer->save($post_data['UserAnswer']);

                            endif;

                    endif;
                endforeach;

            } 
```

# c# - 在 for 循环中强制使用前导 0

> ID：15056268
> 
> 赞同：0
> 
> 时间：2013-02-24T20:27:03.457
> 
> 标签：c#, winforms, for-loop

我目前正在使用循环分析一系列数字，如下所示：-

```
using (var cmd = new DBCommand(dbConnection))
    for (double i = 10; i < 100; i++)    
    {
        Do Stuff
    } 
```

现在这按预期工作。我被要求将 i 的值扩展为从 00 开始。这意味着它将按如下方式循环：- 00, 01, 02, 03, 04 ..... 这就是问题所在，因为它目前分析 0 , 1, 2, 3 ..... 去掉前面的 0。

如何强制循环包含前导 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:39:16.080

数字没有前导零，为什么应该有？你想格式化一个代表数字的字符串。您可以`"D2"`使用`ToString`：

```
for(int i=0; i < 100; i++)
{
    Console.WriteLine(i.ToString("D2"));
} 
```

[**演示**](http://ideone.com/A6sF2W)

*   [**如何：用前导零填充数字**](http://msdn.microsoft.com/en-us/library/dd260048.aspx)
*   [**标准数字格式字符串**](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

> 十进制 ("D") 格式说明符 "D"（或十进制）格式说明符将数字转换为十进制数字字符串 (0-9)，如果数字为负数，则以减号为前缀。仅整数类型支持此格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:30:58.910

诸如整数或浮点数之类的数字永远不会有前导零。如果你真的想要一个前导零，那么你需要使用字符串数据类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T20:36:52.663

`ToString`调用方法时只需格式化数字：

> > value.ToString("D2")

`D2`是具有 2 位数字的十进制格式说明符。有关更多信息，请查看 MSDN[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#DFormatString)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T20:42:44.160

数字在内部以二进制格式存储，即数字`5`将`00000000000000000000000000000101`在内存中存在（不考虑大/小端问题）。`5`只是在运行时不存在的 C# 代码中使用的文字。

如果您需要特殊格式的数字，请将其转换为字符串。

```
int i = 5;
string s = i.ToString("00"); // ==> "05" 
```

也使用整数值作为循环变量；无论如何，您都需要整数。浮点数往往具有类似的值，`4.999999999999`而不是精确`5`的计算结果，可能会使循环循环一次太多。

```
for (int i = 10; i < 100; i++) {
   string s = i.ToString("00");
   // Do stuff with s
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T20:43:44.120

您将无法将前导添加`0`到 int，因此您必须使用字符串。

```
var stringNumbers = Enumerable.Range(0, 100).Select(i => i.ToString("D2"));
foreach (var stringNumber in stringNumbers)
{
    // Do Stuff
} 
```

# python - PyEphem：我可以从方位角计算太阳的高度吗

> ID：15056269
> 
> 赞同：3
> 
> 时间：2013-02-24T20:27:08.360
> 
> 标签：python, pyephem, azimuth, altitude

我正在使用 PyEphem 计算不同时间太阳在天空中的位置。

我有一个观察点（恰好在巨石阵），可以使用 PyEphem 计算一天中任何时间的太阳的日出、日落以及高度角和方位角（从 N 开始的度数）。厉害，没问题。

但是，我真正需要的是能够**从已知的 azimuth 计算太阳的高度角**。所以我会设置相同的观察点（long/lat/elev/date（只是 yy/mm/dd，不是时间））和太阳的方位角。从这个输入中，计算太阳的高度和它在那个方位角的时间。

我曾希望我能够设置 Sun.date 和 Sun.az 并从这些值向后工作，但是唉。关于如何使用 PyEphem 解决这个问题（如果它甚至是平易近人的）有什么想法吗？

我看到的唯一其他选择是通过迭代一系列时间来“潜入”方位角，直到我进入我想要的方位角的误差范围内，但这只是粗略的。

在此先感谢，戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:07:28.777

天文学软件通过 JPL 预测地球和太阳的位置来预测太阳的位置，JPL 将其表示为一系列涵盖特定日期范围的多项式。问“太阳什么时候会在方位角*z*？” 正在询问三个不同的多项式，每个多项式都以不同的速率变化（太阳多项式，地球-月球质心围绕太阳旋转，地球围绕质心旋转），将碰巧带来两者之间的差异两个位置精确到某个角度。

而且，事实证明，这个问题属于“严重”数学问题——或者，正如专业人士所说，“非封闭形式的解决方案问题”。但我喜欢你的“恶心”这个词，因为它很好地反映了我们大多数人的感受，当我们发现世界上的很多地方都必须通过反复试验来解决，而不仅仅是给我们一个答案。

幸运的是，从这个意义上说，足够多的科学样本是“粗略的”，以至于有标准的方法可以问“这个大而复杂的函数什么时候能准确地达到*z*值？” 如果您能够安装并试用 SciPy，它是越来越流行的 Python 科学库，您会发现它有一整套可以偷偷摸摸解决方案的例程，每个例程都使用不同的策略。另一位回答者已经确定了一种这样的策略——每次试验将搜索空间减半——但这通常是最慢的（尽管在某些极端情况下是最安全的）方法；这里有一些其他的：

[http://docs.scipy.org/doc/scipy/reference/optimize.html](http://docs.scipy.org/doc/scipy/reference/optimize.html)

创建一个小函数，返回太阳方位角`t`与您想要的方位角的“距离”，当方位角完全正确时，该函数最终将返回零，例如：

```
def f(t):
    ...        
    return desired_az - sun.az 
```

然后尝试从该 SciPy 页面中的“根查找标量函数”之一。就像其他回答者建议的那样，该`bisect()`功能将继续将搜索空间减半以缩小范围。但我的猜测是，你会发现牛顿法更不“粗暴”而且速度更快——试试`newton()`or `brentq()`，看看会发生什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:12:02.867

在不知道 PyEphem 正在执行的内部计算的详细信息的情况下，我不知道将这些计算反转以给出您想要的结果是多么容易或困难。

然而，关于“偷偷摸摸”选项，您可以选择两个开始时间（例如日出和中午），其中方位角已知为所需值的任一侧（一个大于和一个小于）所需值。然后只需使用简单的“将区间减半”方法即可快速找到近似解。

# ajax - Symfony2 中的快速 ajax 响应

> ID：15056272
> 
> 赞同：4
> 
> 时间：2013-02-24T20:27:16.523
> 
> 标签：ajax, performance, symfony, tags

我有一个标签文本字段，在输入新标签时会建议类似的现有标签。建议通过 ajax 请求检索到控制器，该控制器使用 Doctrine 从数据库中提取它们。IE：

*   **要求** `/tags/suggestions?q=foo`
*   **回复** `["foo","food","fool"]`

问题是请求太慢（至少 2 秒，在*prod*中），在这种情况下太多了。

**有没有办法让请求更快？** 根据分析器，主要时间消费者是*kernel.request*，占总时间的 50%。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T10:04:31.067

如果 kernel.request 很慢，那不一定是 symfony 的问题。

您应该通过使用 php-fastPGM 而不是 php 标准模块更新 Apache 来优化您的服务器。

您还应该激活像 php APC 这样的缓存管理器，它可以减少更多的请求。

例如，我在树莓派上运行一个 symfony 项目。在进行这些调整之前，一个包含 8 个数据库请求的请求大约需要 25 秒才能显示。经过这些调整后，不到 3 秒（平均 2.5 秒）就显示了一个页面

另一个可能的调整列表：

[http://slides.liip.ch/static/2012-05-18_symfony-speed.html#9](http://slides.liip.ch/static/2012-05-18_symfony-speed.html#9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:00:16.000

您可以使用以下命令要求教义（如果您还没有这样做）以数组的形式获取结果（无需将整个查询转换为一堆对象）：

```
$q = $em->createQueryBuilder('t')->(...);
$q -> getQuery() -> fetchArrayResult(); 
```

应该加快速度一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T16:36:25.490

对于像*ajax 自动完成*这样的小页面，我决定使用[Silex](http://silex.sensiolabs.org/)，它是一个微型 Symfony2，它为我提供了一个优雅而快速的解决方案。

# asp.net-mvc - mvc什么时候绑定模型和什么时候参数

> ID：15056273
> 
> 赞同：1
> 
> 时间：2013-02-24T20:27:23.643
> 
> 标签：asp.net-mvc

您何时使用模型绑定以及何时使用参数？

我和大学讨论过使用参数以及何时使用模型

我对搜索过滤器的回答

场景 公共 actionresult search(int?UserId, string name, int idtype2, string typeRequest1, string type2){ code}

如果我有多个参数进入操作，最好使用模型绑定器，如果我有多个参数，因为它更容易使用并且模型包含所有参数并且可以更容易扩展，特别是如果我对 actionresults 进行多个测试作为添加新参数不涉及用方法重写所有测试

你怎么认为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:30:16.340

这完全是一种设计偏好，所以这是我的***看法***

使用符合逻辑的模型，因此如果有 > 2 个参数或模型需要执行额外的逻辑（例如清理参数）。或者，如果您需要在其他地方重新使用参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:34:32.907

在获取/发布操作上使用正常屏幕大小，我们将使用以下操作

1.  适合一行而不滚动的参数可以作为参数

    1-1。如果有人要添加新项目，他们可能需要转换为模型

2.  如果有更多参数，则使用模型

    2-1。绑定模型时定义要绑定模型的项目。你应该只绑定你需要的东西。使用：[Bind(Include = "FieldName")] 或 [Bind(Exclude = "FieldName")]Model userModel

# android - 如果按下按钮，Android会移动图像

> ID：15056280
> 
> 赞同：0
> 
> 时间：2013-02-24T20:28:33.623
> 
> 标签：android, image, onclick, pressed

我想在按下向上按钮时移动播放器图像。我尝试了 onClick() 方法，但它不起作用。当按下向上按钮时，播放器应该向上移动一些像素。我尝试了类似 getButtonState 之类的东西，我在 Android 开发者页面上看到过，但我不明白它是如何工作的……有什么建议吗？

```
private Context mContext;
int enemy_x = -1;
int enemy_y = -1;
int player_x = -1;
int player_y = -1;

private int enemy_xVelocity = 15;
private int enemy_yVelocity = 0;
private int player_xVelocity = 0;
private int player_yVelocity = 10;
private Handler h;
private final int FRAME_RATE = 60;

Button upbutton = (Button) findViewById(R.id.upbutton);

public AnimatedView(Context context, AttributeSet attrs) {
    super(context, attrs);
    mContext = context;
    h = new Handler();
}

private Runnable r = new Runnable() {
    @Override
    public void run() {
        invalidate();
    }
};

protected void onDraw(Canvas c) {
    BitmapDrawable enemy = (BitmapDrawable) mContext.getResources()
            .getDrawable(R.drawable.enemy);
    BitmapDrawable player = (BitmapDrawable) mContext.getResources()
            .getDrawable(R.drawable.player);

    // enemy movement
    if (enemy_x < 0 && enemy_y < 0) {
        enemy_x = this.getWidth() / 2;
        enemy_y = this.getHeight() / 2;
    } else {
        enemy_x += enemy_xVelocity;
        enemy_y += enemy_yVelocity;
        if ((enemy_x > this.getWidth() - enemy.getBitmap().getWidth())
                || (enemy_x < 0)) {
            enemy_xVelocity = enemy_xVelocity * -1;
        }
        if ((enemy_y > this.getHeight() - enemy.getBitmap().getHeight())
                || (enemy_y < 0)) {
            enemy_yVelocity = enemy_yVelocity * -1;
        }
    }

    // player movement

    if (player_x < 0 && player_y < 0) {
        player_x = (this.getWidth() / 2) - 20;
        player_y = this.getHeight() - 150;
    } else {

        player_x += player_xVelocity;
        player_y += player_yVelocity;
        if ((player_x > this.getWidth() - player.getBitmap().getWidth())
                || (player_x < 0)) {
            player_xVelocity = player_xVelocity * -1;
        }
        if ((player_y > this.getHeight() - player.getBitmap().getHeight())
                || (player_y < 0)) {
            player_yVelocity = 0;
        }

    }

    c.drawBitmap(enemy.getBitmap(), enemy_x, enemy_y, null);
    c.drawBitmap(player.getBitmap(), player_x, player_y, null);
    h.postDelayed(r, FRAME_RATE);
} 
```

# javascript - 用 // 替换 href http:// 的脚本

> ID：15056282
> 
> 赞同：1
> 
> 时间：2013-02-24T20:28:52.910
> 
> 标签：javascript, jquery, https, bigcommerce

我使用的电子商务平台 bigcommerce 使用全局变量来动态插入数据。我无权访问操纵变量服务器端所需的 php。

除非在结帐时，所有变量都呈现 http: 链接，我想要一个脚本来使它们相对，所以如果有人想通过 https 浏览：所有菜单和类别链接都将遵守。

我目前正在使用它来更正我的主导航，但这显然不是最佳解决方案，并且生成的链接的其余部分仍然是 http

```
<script type="text/javascript">
    relativeLinking();
    function relativeLinking(){
        var GLOBAL_PagePath = "%%GLOBAL_PageLink%%".substring(5);
        document.getElementById("%%GLOBAL_PageName%%").setAttribute("href", GLOBAL_PagePath);
    };
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:43:57.597

您可以使用以下代码转换所有链接：

```
$(function() {
    $('a').each(function() {
        var self = $(this);
        self.attr('href', self.attr('href').replace(/.*\/\//,'//'));
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:33:46.300

达斯汀，

这个 Javascript 代码

```
 var GLOBAL_PagePath = "%%GLOBAL_PageLink%%".substring(5);
    document.getElementById("%%GLOBAL_PageName%%").setAttribute("href", GLOBAL_PagePath); 
```

设置属性。为什么需要这个，而不是一开始就提供正确的 HTML。

假设需要这个网站管理员不知道（或关心？）两个站点（http:// 和 https:// 协议）上的 HTML/PHP/JS 等。

某些文件应该在一个站点上，而不应该在另一个站点上。反之亦然。

# ios - 强制“在...中打开”选择

> ID：15056283
> 
> 赞同：0
> 
> 时间：2013-02-24T20:29:00.287
> 
> 标签：ios, objective-c, ipad, uidocumentinteraction

我目前的代码如下所示：

```
- (UIDocumentInteractionController *) setupControllerWithURL:(NSURL *)fileURL
                                           usingDelegate:(id <UIDocumentInteractionControllerDelegate>)         interactionDelegate {

    UIDocumentInteractionController *interactionController =
    [UIDocumentInteractionController interactionControllerWithURL:fileURL];
    interactionController.delegate = interactionDelegate;

    [interactionController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES];

    return interactionController; 
```

}

```
- (void)showOptionsMenu
{
    NSURL *fileURL = [NSURL fileURLWithPath:@"2bm.key"];
    docController = [self setupControllerWithURL:fileURL
                                   usingDelegate:self];
}

- (IBAction)KeynoteButton:(id)sender {

     [self showOptionsMenu];
} 
```

这会在屏幕左上角生成一个打开的主题气泡。我可以移动到出现这个气泡的地方吗？或者更好的是我可以在这个气泡上强制一个触摸事件，这样用户就别无选择，主题演讲会自动打开？我不能为此使用 URL 参考方案，因为 keynote 不支持这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:53:54.843

您可以通过在方法中指定正确的位置来指定弹出框出现的位置`presentOpenInMenuFromRect:inView:animated:`。现在你指定`CGRectZero`. 传入正确`CGRect`的指示您希望它出现的位置。

您不能强制使用特定的应用程序。许多用户将拥有多个可以打开给定文件的应用程序。让用户选择去哪里。

# node.js - 配置 node.js 聊天

> ID：15056289
> 
> 赞同：1
> 
> 时间：2013-02-24T20:29:41.157
> 
> 标签：node.js, mongodb, session, express, socket.io

我正在尝试安装和运行这个 node.js 聊天：[https](https://github.com/dual3nigma/Mejorando.la-Chat) ://github.com/dual3nigma/Mejorando.la-Chat 。当我输入“npm install”和“node server”时，它会启动，但出现 Express 错误。我认为原因在 config.json 文件中。

这是我的 config.json 文件。我只更改了 config.sample.json 文件的数据库名称和端口，并添加了我的 twitter / facebook 密钥：

```
{
    “端口”：721，
    “主机”：“本地主机”，
    “D b”： {
        “名称”：“V1chatCCI”
    },
    “推特”： {
        "consumerKey": "XXXXXXXXXXXXXXXXXXXXXXXXXXX",
        “consumerSecret”：“XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX”
    },
    “Facebook”： {
        "appId": "XXXXXXXXXXXXXXXXXXXXXXXX",
        “appSecret”：“XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX”
    },
    “会议”： {
        “秘密”： ””，
        “钥匙”： ””
    },
    “曲奇饼”： {
        “秘密”： ””
    },
    “安全”：错误，
    “登录安全”：假，
    “钥匙”： ””，
    “证书”：“”，
    “哨兵”：“dsn”
}

```

我需要在会话密钥/密钥部分添加什么？localhost:721 上的错误是： `Express 500 Error: `secret` option required for sessions`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:57:48.627

您应该能够在这些部分中放置任何内容，因为它们在快速处理会话内部使用。任何值（甚至只是随机字符串）都可以解决您的问题。

# xcode - 重命名 xcode 生成的配置文件

> ID：15056292
> 
> 赞同：6
> 
> 时间：2013-02-24T20:29:45.003
> 
> 标签：xcode, xcode4, provisioning, provisioning-profile, ios-provisioning

XCode 为通配符应用程序创建和管理配置文件。我想更改个人资料名称，这样它就不会轻易与其他团队的其他通配符个人资料混在一起。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T04:38:20.157

不幸的是，这在 developer.apple.com 上的“证书、身份和配置文件”工具的当前版本中是不可能的。

因为这个配置文件是由 Xcode 创建的，所以我们可以通过这个工具进行的操作非常有限：

![团队供应配置文件](../Images/a0afda4ba99eacd5c0bfb77ddc1d924c.png)

对于我们手动创建的那些配置文件，我们可以选择“编辑”按钮并为配置文件提供一个新名称（只要您不包含任何特殊字符！），但是对于这些特殊的 Xcode 生成的配置配置文件和应用程序 ID（如所附屏幕截图右上角的括号“由 Xcode 管理”所示）唯一可用的操作是“删除”。

目前尚不清楚这是否只是一个暂时的问题，而 Apple 正在解决这个新版本的供应中心的问题，如果它是我们将不得不忍受的更永久的行为，或者即使未来的版本的 Xcode 将继续自动生成通配符 AppID 和团队配置文件。 **无论如何，您目前无法重命名/重组这些配置文件。**

*警告：纯推测如下：*鉴于文档中充斥着对 Xcode 的 Team Provisioning Profile 功能和“证书、标识符和配置文件”工具的引用，我敢猜测，在 Xcode 的未来版本中，我们将能够刷新这些配置文件。由于这些配置文件，有很多**人**遇到了从 Xcode 一直挂起到 Xcode 完全崩溃的问题，所以 Apple 几乎肯定会做些什么。希望当他们这样做时，Portal 中的一些相对较小的烦恼也会消失。

# java - 从文本文件中读取的 Java 输入不匹配

> ID：15056293
> 
> 赞同：0
> 
> 时间：2013-02-24T20:29:45.247
> 
> 标签：java, file-io

我正在编写一个程序，该程序将从一个充满学生成绩的文本文件中获取输入。这些成绩被平均并添加到数组列表中。但是，我无法读取要读取的文件。我收到输入不匹配。我尝试将我的 calcAssignmentAverage 方法中的循环更改为小于 15（有 15 个实验室成绩，文本文件中的第二行），但它仍然给出输入不匹配。

文件（真实文件有16名学生，格式如下。）：

```
Puckett, Karen
10 10 9.5 10 10 8 9.5 10 10 10 9 10 10 10 0
4 3 5 3 5 2 3 2 1.5 1 5 3.5
17.5 24 22 23.5 22 23
90 91
96 
```

代码：

```
 public static void main(String[] args) throws IOException {
    final double NUM_OF_LABS = 15;
    final double NUM_OF_QUIZZES = 12;
    final double NUM_OF_PROJECTS = 6;
    final double NUM_OF_EXAMS = 2;
    final double NUM_OF_FINAL = 1;
    final double LAB_POINTS = 150;
    final double QUIZ_POINTS = 60;
    final double PROJECT_POINTS = 150;
    final double EXAM_POINTS = 200;
    final double FINAL_POINTS = 100;

    //Open input file
    File myFile = new File("scores.txt");
    if (!myFile.exists()) {
        System.out.println("The input file was not found.");
        System.exit(0);
    }

    Scanner inputFile = new Scanner(myFile);

    ArrayList<Student> studentList = new ArrayList<Student>();

    readFile(inputFile, studentList, NUM_OF_LABS, LAB_POINTS, NUM_OF_QUIZZES,
            QUIZ_POINTS, NUM_OF_PROJECTS, PROJECT_POINTS, NUM_OF_EXAMS,
            EXAM_POINTS, NUM_OF_FINAL, FINAL_POINTS);

}

public static void readFile(Scanner inputFile,
        ArrayList<Student> studentList, double NUM_OF_LABS,
        double LAB_POINTS, double NUM_OF_QUIZZES, double QUIZ_POINTS,
        double NUM_OF_PROJECTS, double PROJECT_POINTS,
        double NUM_OF_EXAMS, double EXAM_POINTS, double NUM_OF_FINAL,
        double FINAL_POINTS) {

    //read and set data for student1:
    while (inputFile.hasNext()) {
        //create a new student
        Student currentStudent = new Student();

        //read name
        String name;
        name = inputFile.nextLine();
        currentStudent.setName(name);

        //read lab average 
        double labAverage = 0;
        labAverage = calcAssignmentAverage(NUM_OF_LABS, inputFile, LAB_POINTS);
        currentStudent.setLabAverage(labAverage);

        //add currentStudent to the list
        studentList.add(currentStudent);

    }
}

public static double calcAssignmentAverage(double NUM_ASSIGNMENTS,
        Scanner inputFile, double MAX_POINTS) {

    double sum = 0;
    double average = 0;

    for (int i = 0; i < NUM_ASSIGNMENTS; i++) {
        sum = sum + inputFile.nextDouble();
    }
    average = (sum / MAX_POINTS) * 100;

    return average;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:07:59.927

拜伦是对的。您提前到下一个学生的逻辑正在过早执行。在继续循环的下一次迭代之前，您需要阅读第 3 行到第 6 行，假设它们适用于同一个学生。

此外，在读取双倍后，您的扫描仪不会自动前进到下一行。你需要明确地这样做。

# math - 确定二维给定区域边界中的点

> ID：15056294
> 
> 赞同：1
> 
> 时间：2013-02-24T20:30:03.500
> 
> 标签：math, wolfram-mathematica, computational-geometry

在二维中确定给定区域边界中的点的好方法是什么？

**假设给您一个嵌套列表，其中包含两个坐标的列表**，例如

```
 { {x1,y1}, {x2,y2}, {x3,y3} } 
```

当然，实际的嵌套列表将有比 3 更多的点，这些点与平面中的给定区域相关联。**例如，嵌套列表可以确定平面中的磁盘。那么，输出应该是一个与圆对应的嵌套列表。**

我不希望将任何图像识别内容应用于可能的情节。我想对嵌套列表进行操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:20:57.257

**This answer is based on @andand comment. The credit is all his.**

If I have a nested list called "region", with lists of the 2d coordinates, I would get the "convex hull" of it writing

```
 Needs["ComputationalGeometry`"]
    regionhull = ConvexHull[ region ] 
```

But "ConvexHull" gives us the indices of the lists within the nested list, in counterclockwise order, corresponding to the convex boundary of the region. Thus, an adittional step is needed, to make the needed output:

```
 regionboundary = region[[ regionhull ]] 
```

But still, this answer is incomplete. It seems to me that a "concave hull" algorithm would be the more general solution. Would anyone know anything about the concave hull in Mathematica? I may post an additional question for that.

Below, I show a figure to understand the concave and convex hull algorithms extracted from

[https://gis.stackexchange.com/questions/1200/concave-hull-definition-algorithms-and-practical-solutions](https://gis.stackexchange.com/questions/1200/concave-hull-definition-algorithms-and-practical-solutions)

![enter image description here](../Images/0a208c21861538f89f3bed6b48563bf2.png)

A tutorial for the "Computational Geometry Package" is found at

[http://reference.wolfram.com/mathematica/ComputationalGeometry/tutorial/ComputationalGeometry.html](http://reference.wolfram.com/mathematica/ComputationalGeometry/tutorial/ComputationalGeometry.html)

** **Addendum** **

**The package "alphahull" can solve the problem of finding the boundary of a concave region. Its description is found here:**

[http://cran.r-project.org/web/packages/alphahull/vignettes/alphahull.pdf](http://cran.r-project.org/web/packages/alphahull/vignettes/alphahull.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:09:05.880

听起来你想要某种插值技术。[http://en.wikipedia.org/wiki/Interpolation](http://en.wikipedia.org/wiki/Interpolation)

# django - Django 用户配置文件创建发生两次

> ID：15056296
> 
> 赞同：0
> 
> 时间：2013-02-24T20:30:08.037
> 
> 标签：django, django-admin, signals

我看到 Django 用户配置文件创建错误，之前已被问过几次，但其他问题的解决方案和[Django 文档推荐](https://docs.djangoproject.com/en/dev/topics/signals/#preventing-duplicate-signals)的修复程序不起作用。

我有一个 UserProfile 模型，我在从 Django 管理页面创建新用户对象时尝试创建它。（请原谅我这里的语法，自从我使用堆栈溢出以来已经有一段时间了）

```
class UserProfile(models.Model):  
    user = models.OneToOneField(User)
    organization = models.IntegerField(null=True)
    phone = models.CharField(max_length=20, null=True, blank=True)
    phone_ext = models.CharField(max_length=8, null=True, blank=True)
    team_no = models.CharField(max_length=30, null=True, blank=True)    

post_save.connect(create_user_profile, sender=User, dispatch_uid="a.unique.string.that.does.not.help.me")

User.profile = property(lambda u: UserProfile.objects.get_or_create(user=u)[0]) 
```

我已将用户配置文件添加到 UserAdmin 类并取消注册/注册管理站点条目。

```
class UserProfileInline(admin.StackedInline):
    model = UserProfile
    can_delete = False
    verbose_name_plural = 'profile'

class UserAdmin(UserAdmin):
    inlines = (UserProfileInline, )
    actions = [set_organization]
    exclude = ('is_staff',)

try:
    admin.site.unregister(User)
    admin.site.unregister(RegistrationProfile)
    admin.site.unregister(Group)
## Re-register UserAdminadmin.site.unregister(User)
finally:
    admin.site.register(User, UserAdmin)
    admin.site.register(RegistrationProfile, RegistrationAdmin)
    admin.site.register(Group, GroupAdmin) 
```

因此，每次我尝试创建新用户时，我总是会收到 user_profile_user_id 字段的重复键错误。查看日志，在用户保存时运行了两个插入语句。第一个是缺少在管理界面中的用户配置文件字段中输入的所有数据。第二个拥有所有数据，但失败了，因为已经有了只有他的 user_id 的初始插入。

我已经在项目中搜索了几次，为 UserProfile 类寻找我的 models.py 的重复导入，但一无所获。

有人在这里有什么想法吗？

谢谢你。

- 更新 -

Django 版本是 1.3

```
imports in the profile/models.py
from django.contrib.auth.models import User
from django.db.models.signals import post_save, pre_save
import logging 
```

从 django.contrib 导入 admin.py 从 django.contrib.auth.models 导入组 从 test.django.registration.models 导入 RegistrationProfile 从 test.django.registration.admin 导入 RegistrationAdmin 从 django.contrib.auth.admin从 django.contrib.auth.models 导入 UserAdmin、GroupAdmin 从 test.django.extranet.profile.models 导入用户 从 test.django.common.models.ajrsonline.ajrsonline_users 导入 UserProfile 从 test.django.common.middleware.ajrs_ldap 导入 AjrsonlineUsers导入 AJRSOnlineLdapBackend

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:56:46.417

使用 if 语句，以便限制第一个语句。像这样的例子：

```
 if instance.field_name:
     //save data here

     //In here you can save the value that has complete data 
```

# android - 实现定时家庭小部件的正确方法？（预蜂窝）

> ID：15056297
> 
> 赞同：0
> 
> 时间：2013-02-24T20:30:10.137
> 
> 标签：android, timer, android-widget, broadcastreceiver

我在询问 Google Play 或 Youtube 等家庭小部件。他们反复循环 5-10 个项目，每 5 秒进入下一个项目。

我读到这可以通过警报管理器完成，但在所有关于此的帖子中，人们都说，高更新率会消耗大量电池寿命。[在这篇文章](https://stackoverflow.com/questions/8287796/android-widget-update-after-x-time)中，有人谈论在 Handler 中使用计时器。但这是广播接收器中的有效方法吗？

我是否必须每次使用警报管理器“唤醒”广播接收器才能循环播放项目？或者这是怎么做的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:57:19.230

> 在这篇文章中，有人谈论在 Handler 中使用计时器。但这是广播接收器中的有效方法吗？

不是真的，因为它只有在你的过程存在时才会起作用，这可能不会很长。

> 我不知道如何使用第三方主屏幕

从 Play 商店下载一个，安装它，按 HOME，然后选择新安装的主屏幕。

> 那么这些小部件可以做到这一点是因为它们是随设备一起提供的吗？

那不是我写的。

主屏幕是由程序员编写的程序。它可以做程序员选择让它做的任何事情。

应用程序小部件涉及每次更新的进程间通信，这就是为什么如果您更新很多，它们会有点贵。主屏幕不需要使用进程间通信来更新*自身*。因此，一些制造商提供的花哨的“应用程序小部件”不是通过 实现的`AppWidgetProvider`，而是主屏幕应用程序本身的功能，只是简单地列出和配置，就好像它们是应用程序小部件一样。

> 他们反复循环 5-10 个项目，每 5 秒进入下一个项目。

在 Android 3.0+ 上，最好的答案是使用`AdapterViewFlipper`，因为您不需要手动更新它——`AdapterViewFlipper`它将根据配置的更新周期拉取下一点内容。

在较早版本的 Android 上，您需要自己执行此操作，`AlarmManager`如果确实必须进行基于时间的更新，这可能是最可靠的选择。请考虑让用户控制更新频率，包括完全禁用基于时间的更新。

# iphone - 奇怪的 iPhone SDK NSUserDefaults 行为

> ID：15056298
> 
> 赞同：0
> 
> 时间：2013-02-24T20:30:11.013
> 
> 标签：iphone, nsuserdefaults, save, synchronizing

我遇到了一些奇怪的 NSUserDefaults 行为。我保存我的数据，然后同步，然后对 NSUserDefaults 进行 NSlog 以确保其已保存。数据显示为从 NSlog 正确保存，但是当我完全关闭应用程序（双击主页按钮并终止应用程序）重新启动时，值没有改变。更奇怪的是，如果我通过保存 NSUserDefaults、终止应用程序、重新加载 NSUserDefaults 来重复代码几次，有时它会正确保存，而有时却没有。

我读了这篇文章[奇怪的 NSUserDefaults 行为](https://stackoverflow.com/questions/4120416/strange-nsuserdefaults-behavior)，但我正在调用同步，所以我不认为那是我的问题。

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setObject:@"MyString" forKey:@"testString"];
[[NSUserDefaults standardUserDefaults] synchronize];
NSLog(@"%@", [[NSUserDefaults standardUserDefaults] dictionaryRepresentation]); 
```

任何帮助是极大的赞赏。

真正让我困惑的是，如果 standardUserDefaults 的 NSLog 显示数据已保存，为什么在应用程序被杀死后不保存？？？

谢谢

* * *

更新

* * *

看起来问题出在我保存到 NSUserDefaults 的可变和不可变数组中的混淆。我在检索数据时使用了 mutablecopy，似乎解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:47:27.820

为了获得价值，你可以使用这样的东西

```
NSUserDEfaults *ud = [NSUserDefault standarUserDefaults];
[ud objectForKey=@"YourKey"]; 
```

如果它返回 nil，则它没有被保存。

# ios - UINavigationController 不返回

> ID：15056303
> 
> 赞同：0
> 
> 时间：2013-02-24T20:30:59.953
> 
> 标签：ios, delegates, uinavigationcontroller

我正在尝试建立一个 ViewControllers 系统并在它们之间导航。我正在尝试在`DefaultViewController`和之间导航`CreateViewController`。我是 iOS 编程的新手，所以我很难弄清楚这一点。我主要是尝试使用 Utility App 模板中的代码。如果有人能发现我的错误，那就太好了！

`CreateViewController: cancel`当我点击我的取消按钮时会到达日志，但`DefaultViewController: createViewControllerDidFinish`不是。

这是相关代码：

**DefaultViewController.h**

```
#import <UIKit/UIKit.h>
#import <Social/Social.h>
#import "CreateViewController.h"

@interface DefaultViewController : UIViewController <CreateViewControllerDelegate, UIWebViewDelegate> {
    ...
}

@property (strong, nonatomic) UIWebView *webView;

- (IBAction)create:(id)sender;

@end 
```

**创建视图控制器.h**

```
#import <UIKit/UIKit.h>
#import <Social/Social.h>

@class CreateViewController;

@protocol CreateViewControllerDelegate
    - (void)createViewControllerDidFinish:(CreateViewController *)controller;
@end

@interface CreateViewController : UIViewController <UIWebViewDelegate> {
    ...
}

@property (weak, nonatomic) id <CreateViewControllerDelegate> delegate;

- (IBAction)cancel:(id)sender;
- (IBAction)submit:(id)sender;

@end 
```

**DefaultViewController.m**

```
#import "AppDelegate.h"
#import "DefaultViewController.h"

...

@implementation DefaultViewController

...

#pragma mark - CreateViewController

- (void)createViewControllerDidFinish:(CreateViewController *)controller {
    NSLog(@"DefaultViewController: createViewControllerDidFinish");
    [self.navigationController dismissViewControllerAnimated:YES completion:nil];
}

- (IBAction)create:(id)sender {
    CreateViewController *vc2 = [[CreateViewController alloc] init];
    [self.navigationController pushViewController:vc2 animated:YES];
}

@end 
```

**创建视图控制器.m**

```
#import "AppDelegate.h"
#import "CreateViewController.h"

...

@implementation CreateViewController

...

#pragma mark - Actions

- (IBAction)cancel:(id)sender {
    NSLog(@"CreateViewController: cancel");
    [self.delegate createViewControllerDidFinish:self];
}

- (IBAction)submit:(id)sender {
    [webView stringByEvaluatingJavaScriptFromString:@"EntryCreate.submit();"];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:41:11.013

使用导航控制器，当您推送视图控制器时，您必须**弹出**关闭

```
- (IBAction)cancel:(id)sender {
    NSLog(@"CreateViewController: cancel");
    [self.navigationController popViewControllerAnimated:YES];
} 
```

不需要控制器实例 Nav Controller 基本上是一个堆栈，当您弹出它时，它会从堆栈顶部移除并移动到前一个视图控制器从它被推送的位置。

# php - php问题中的全局数组

> ID：15056307
> 
> 赞同：0
> 
> 时间：2013-02-24T20:31:13.110
> 
> 标签：php, arrays, global

我找到了一些非常有用的答案，但仍然存在一些问题。

我想在全局数组中放置不同的行，而不删除其他行。

```
<?php

global $global_arr;

function first() {  
        ///some code
        global $global_arr; 

        $global_arr[] = array('first' => 
             array('1' , '1', '1'));

}

function second() { 
        ///some code
        global $global_arr; 

        $global_arr[] = array('second' => 
             array('2' , '2', '2'));

}
function third() { 
        ///some code
        global $global_arr; 

        $global_arr[] = array('third' => 
             array('3' , '3', '3'));

}

first();
second();
third();

print_r($global_arr); 
```

我希望每个函数都索引数组并分别添加行

先感谢您！

编辑 ：

感谢您的帮助，这里是工作版本：

```
function first($arr) { 

    $arr[] = array('first' => 
             array(1, 1, 1));
    return $arr; 
}

function second($arr) { 

    $arr[] = array('second' => 
             array(2, 2, 2));
    return $arr; 
} 

$arr = array();    

$arr = first($arr);
$arr = second($arr); 

print_r($arr); 
```

输出 ：

```
Array ( [0] => Array ( [first] => Array ( [0] => 1 [1] => 1 [2] => 1 ) ) [1] => Array ( [second] => Array ( [0] => 2 [1] => 2 [2] => 2 ) ) ) 
```

任何想法如何成为唯一的：

```
Array ( [first] => Array ( [0] => 1 [1] => 1 [2] => 1) , [second] => Array([0] => 2, [1] => 2, [2] => 2)) 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:36:07.093

```
$global_arr['third'][] = array('3.1' , '3.2', '3.3'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:34:58.827

为什么要使用全局变量？你可以简单地写

```
function first($arr) { 

    $arr[] = array('first' => 
             array('3' , '3', '3'));
    return $arr; 
}

function second($arr) { 

    $arr[] = array('second' => 
             array('3' , '3', '3'));
    return $arr; 
}

function third($arr) { 

    $arr[] = array('third' => 
             array('3' , '3', '3'));
    return $arr; 
}

$arr = array();    

$arr = first($arr);
$arr = second($arr);
$arr = third($arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:41:54.043

我不明白 - 这在所有三个功能中都是一样的。

顺便说一句，我只会使用一个功能，例如：

```
<?php

    // $arg1 = "one", "two" or "three"
    // $arg2 = ARRAY("data1.1", "data1.2", "data1.3") {
    function myfunc($arg1, $arg2) {
      if (!isset($my_arr)) { static $my_arr = ARRAY(); }
      $my_arr[$arg1][] = $arg2;
      return $my_arr; // Or code a getter and setter function
    }

    // Call, as often as you want - like:

    myfunc('one', ARRAY('1.1', '1.2','1.3'));
    myfunc('two', ARRAY('2.1', '2.2','2.3'));
    $arr = myfunc('one', ARRAY('1.4', '1.5','1.6'));

    print '<pre>';
    var_dump($arr);
    print '</pre>';

    /* result:

    array(2) {
      ["one"]=>
      array(2) {
        [0]=>
        array(3) {
          [0]=>
          string(3) "1.1"
          [1]=>
          string(3) "1.2"
          [2]=>
          string(3) "1.3"
        }
        [1]=>
        array(3) {
          [0]=>
          string(3) "1.4"
          [1]=>
          string(3) "1.5"
          [2]=>
          string(3) "1.6"
        }
      }
      ["two"]=>
      array(1) {
        [0]=>
        array(3) {
          [0]=>
          string(3) "2.1"
          [1]=>
          string(3) "2.2"
          [2]=>
          string(3) "2.3"
        }
      }
    }
    */
?> 
```

# ios - 复制 iOS 键盘功能

> ID：15056311
> 
> 赞同：1
> 
> 时间：2013-02-24T20:31:48.907
> 
> 标签：ios, objective-c, keyboard

我已经成功添加了一个自定义键盘（输入视图），并且它功能齐全。我遇到了一个我似乎无法找到答案的问题。

我的键盘由一个非常类似于 UIKeyboardTypeDecimalPad 的按钮网格组成，当 UIControlEventTouchUpInside 像预期的那样被抛出时，每个按钮都会在 UITextField 中添加或删除文本。

我的问题是我希望能够在键盘上拖动手指，突出显示，但在手指抬起之前不会实际选择任何键（就像通常在 iPhone 上所做的那样）。

按照目前的情况，会发生以下情况： - 按下并突出显示一个键。
- 滑动手指离开键，键保持突出显示。（错误） - 将手指滑得更远，键变得不突出，不选择相邻的键，也不输入文本。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:14:11.607

> ...当`UIControlEventTouchUpInside`被抛出就像人们期望的那样。

正如人们所期望的那样，这是你的问题。您需要倾听并响应组合`UIControlEventTouchDragInside`并`UIControlEventTouchDragOutside`复制 iOS 键盘的突出显示模式。

# arrays - 正确显示这个多维数组的内容

> ID：15056313
> 
> 赞同：2
> 
> 时间：2013-02-24T20:32:04.337
> 
> 标签：arrays, vb.net, winforms

在我的程序中，我有两个列表框（用于选择卖家和产品）、一个文本框（用于输入数字）和一个用于存储数据的按钮。

我存储数据没有问题，但我似乎无法正确显示数组的内容。

我想在 4x3 表格中以不同的标签显示数据。

这是我希望我的表看起来如何的示例：

```
 seller 1      seller 2      seller 3      seller 4

product 1     label 1       label 2       label 3       label 4

product 2     label 5       label 6       label 7       label 8

product 3     label 9       label 10      label 11      label 12

product 4     label 13      label 14      label 15      label 16

product 5     label 17      label 18      label 19      label 20 
```

正如我所说，我希望现在存储在数组中的内容显示在每个标签中。

这是我到目前为止所拥有的，这是我的主要形式：

```
Public Class showForm
    Public Shared sale(4, 3) As Integer
    Public Shared numberProducts(4) As Integer
    Public Shared numberSellers(3) As Integer

    Public StockClass As New Stocking

    Public Shared sellerColumnInteger As Integer
    Public Shared productLineInteger As Integer

    Public Sub addButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles addButton.Click

        StockClass.addItem(sellerListBox, producttListBox, saleTextBox)

    End Sub

    Public Sub SalesByMonthToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) _
        Handles SalesByMonthToolStripMenuItem.Click

        saleForm.Show()
    End Sub
End Class 
```

然后我创建了另一个名为 Stocking 的类，这是我目前所拥有的（第二部分是我遇到问题的地方）：

我的大问题是我似乎无法在表中添加正确的值。我尝试过的所有东西都没有按照我想要的方式工作，它要么没有显示正确的数字，要么如果它显示了正确的数字，它没有在另一个标签中显示正确的数字。换句话说，每当我让某件事情工作时，其他事情就没有了。我相信我储存价值的方式是好的，只是我试图显示错误价值的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:37:02.230

我会将值存储在 DataGridView 中。您可以拥有行标签和列标题，并且可以随意操作列。

# css - 使用 CSS 过渡显示数字中的更多数字

> ID：15056314
> 
> 赞同：0
> 
> 时间：2013-02-24T20:32:05.243
> 
> 标签：css, css-transitions

在 HTML 中，我们有一个数字，例如`12.34`当有人将鼠标悬停在它上面时，我希望它通过某种过渡来扩展以显示其他有效数字，例如`12.345678`.

仅使用 CSS 是否可行，最简单的方法是什么？（例如，我可能不想使用隐藏溢出的固定宽度 div，然后扩展，因为宽度可以随数字等变化`123.45`。`1,234.56`）所以我想有两个 div 一个四舍五入，一个所有数字- 但是我们需要一些方法来在它们之间顺利过渡。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:00:17.583

我同意 Marc B - 有太多可能的变化来确定点位置以仅使用一个字段而不使用 JS。然而，这是我的解决方案，有两个字段

[http://jsfiddle.net/chrisdanek/mSjsj/1/](http://jsfiddle.net/chrisdanek/mSjsj/1/)

```
<span class="num">
    <span class="abbr">123.45</span>
    <span class="full">123.4567</span>
</span>

<span class="num">
    <span class="abbr">123,345,567.45</span>
    <span class="full">123,345,567.45000</span>
</span>

<span class="num">
    <span class="abbr">123,345,567.455634434</span>
    <span class="full">short one</span>
</span><!-- this one is not possible with numbers, but just to show how it works with shorter second number --> 
```

和 CSS

```
.num { 
    position: relative; 
    display: inline-block; 
    padding: 5px; 
    border: 1px solid red; 
    -webkit-transition: width 0.2s; 
    -moz-transition: width 0.2s; 
    -o-transition: width 0.2s; 
    transition: width 0.2s;    
}
.abbr { 
    position: relative; 
    top: 0;
    left: 0;
    display: block;
    opacity: 1; 
    z-index: 1; 
    -webkit-transition: opacity 0.2s; 
    -moz-transition: opacity 0.2s; 
    -o-transition: opacity 0.2s; 
    transition: opacity 0.2s;
}
.full { 
    top: 5px; left: 5px; 
    position: absolute; 
    display: block;
    z-index: 0; 
    opacity: 0; 
    -webkit-transition: opacity 0.2s; 
    -moz-transition: opacity 0.2s; 
    -o-transition: opacity 0.2s; 
    transition: opacity 0.2s;
    color: red;
}
.num:hover .abbr { position: absolute; top: 5px; left: 5px; opacity: 0; z-index: 0; }
.num:hover .full { position: relative; top: 0; left: 0; opacity: 1; z-index: 1; } 
```

我能想到的最好的办法是改变不透明度，因为它不需要在容器上设置宽度。没有它，就不可能对宽度进行转换（您会注意到添加了转换代码，但它没有被执行）。也许其他人可以想出一个解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T07:00:59.480

由于某种原因，我无法让不透明度过渡在我们这边干净利落地工作。但这是一个更简单的版本，以防它帮助某人：（在 SASS 中）

```
.num {
  display: inline-block;
  .abbr { display: block; }
  .full { display: none; }

  &:hover {
    .abbr { display: none; }
    .full { display: block; }
  }
} 
```

# node.js - 如何处理nodejs fs readdir函数中的特殊字符

> ID：15056315
> 
> 赞同：2
> 
> 时间：2013-02-24T20:32:30.737
> 
> 标签：node.js, encoding, special-characters, readdir

我正在使用该`fs.readdir()`函数读取 nodejs 中的目录。你给它一个包含路径的字符串，它返回一个数组，其中包含该目录路径内的所有文件，格式为字符串。它不适用于特殊字符（如`ï`）。

*我遇到了[这个类似的问题](https://stackoverflow.com/questions/7738430/special-characters-in-node-js-readdir)，但是我在 OS X 上）。*

首先，我创建了一个名为的新目录`encoding`并创建了一个名为`maïs.md`（使用我的编辑器 Sublime Text）的文件。

```
fs.readdir('encoding', function(err, files) {
  console.log(files);                                   // [ 'maïs.md' ]
  console.log(files[0]);                                // maïs.md
  console.log(files[0] === 'maïs.md');                  // false
  console.log(files[0] == 'maïs.md');                   // false
  console.log(files[0].toString('utf8') === 'maïs.md'); // false
}); 
```

上述测试适用于没有特殊字符的文件。我怎样才能正确比较这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:35:55.810

[https://apple.stackexchange.com/a/10484/23863](https://apple.stackexchange.com/a/10484/23863)看起来很相关——这可能是因为 ï 在 utf8 中有不同的表达方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:51:10.983

你的性格好像就是[这个](http://www.fileformat.info/info/unicode/char/00ef/index.htm)。你应该尝试

```
(1) console.log(files[0] == 'ma\u00EF;s.md'); 
(2) console.log(files[0] == 'mai\u0308;s.md'); 
```

如果 (1) 有效，则可能意味着包含您的代码的文件未以 utf-8 格式保存，因此 node.js 引擎无法正确解释代码中的 ï 字符。

如果 (2) 有效，则可能意味着文件系统以分解的 unicode 形式向节点引擎提供 ï 字符（i 后跟一个变音符号 ¨）。cf @thejh 答案

在这种 (2) 情况下，使用 npm 上可用的[unorm](https://github.com/walling/unorm)库在比较字符串之前对字符串进行规范化（或原始[UnicodeNormalizer](http://coderepos.org/share/browser/lang/javascript/UnicodeNormalizer)）

# client-server - 为服务器-客户端应用程序提供可扩展性的语言

> ID：15056316
> 
> 赞同：0
> 
> 时间：2013-02-24T20:32:32.527
> 
> 标签：client-server, scalability

我想学习如何开始开发高度可扩展的服务器/客户端应用程序——更具体地说，是针对非基于 Web/不在浏览器中的桌面客户端。我认为开发一个非常简约的聊天应用程序（大致与 AIM/Skype 相当）是开始学习服务器/客户端和可扩展性的合理途径。

考虑到我对可扩展性的强调，我不确定哪种编程语言适合这项任务。就个人而言，我感兴趣的唯一语言是 Java、C# 和 C/C++。就服务器操作系统而言，我将处理 Linux，因此在我的情况下，C# 意味着 Mono。

我想我的具体兴趣归结为在服务器上使用什么语言，因为它是支持应用程序的基础设施，它必须具有高度可扩展性。我听说过对 Java 和 C# 服务器可伸缩性的褒贬不一的评价。我的直觉表明它们都是完全合理的选择，但是我听说其他人一旦达到应用程序/用户流量的某个阈值就会遇到问题。很难知道如何看待传闻，但我确实认为缺乏对这些语言的裸机支持可能会阻碍某些阈值的可扩展性。当我听说 C/C++ 时，我听说过很棒的 Boost 库（例如`Boost.Asio`) 提供最终的可扩展性。但是当我听说在 C/C++ 中处理套接字比在 Java/C# 等其他语言中处理起来要复杂得多时，我感到害怕。

开始制作高度可扩展的服务器-客户端应用程序（例如聊天客户端）的有效方法是什么？在我提到的那些中，哪种编程语言适合开发这样的应用程序？对于这样的应用程序，我应该考虑哪些其他语言？

编辑：术语“规模”最直接地涉及为服务大量用户（可能是数万或数十万，可能是数百万）而进行的扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:48:38.013

“规模” - 它以哪种方式扩展？使用 CPU 内核、用户或代码库进行扩展？

你可能会问：哪种语言实现最快？哪种语言可以毫无问题地处理大量请求？

在每种语言实现中，您都需要制定构建分布式系统的策略。如果您必须担心速度，您应该担心是否有可能将您的系统分布在多台机器上。

如果您想在核心和非阻塞请求方面获得最大的可扩展性，请使用 Erlang。它将在服务器端处理大量流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:38:04.243

您提到的每种语言都会扩展。

如果你对此很认真，你应该选择你最了解的语言并构建它——你甚至还没有对你的想法进行原型设计，并且你关心自己的规模。

我们可以列出许多以上述每种语言编写的程序和网站，这些程序和网站可以很好地扩展（我们也可以列出许多没有的程序和网站）。

# php - 考虑到我的图像的链接存储在 MySQL 数据库中，如何通过 php 显示存储在文件夹中的图像

> ID：15056318
> 
> 赞同：2
> 
> 时间：2013-02-24T20:32:43.913
> 
> 标签：php, mysql, database, image

作为一种好的做法，我只将图像的链接存储在我的数据库中，问题是：

我应该如何存储我的图像的链接？（假设它在 c 上：）

*c://image.jpg* ?

我应该使用哪种 PHP 代码来显示该图像？我只显示路径，我应该怎么做才能显示图像？

我可以使用这个：

```
$query = "SELECT ImageURL from WhateverTable";

$result = mysql_query($query) or die(mysql_error());

$Image = mysql_fetch_row($result);

echo "<img src='$Image[0]' alt='This is an image'>"; 
```

谢谢各位小伙伴

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:45:10.663

您只想存储相对路径，而不是绝对路径，因为链接到类似

```
 <img src="/var/www/vhosts/website.com/images/file.jpg"> 
```

将在任何真实网站上返回 404。通过相对路径 (/images/file.jpg) 将文件存储在数据库中，如果它们都在同一目录中，则仅通过文件名存储。

或者，您可以学习 MongoDB，它允许您将文件实际存储在数据库本身中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T21:42:20.563

1.  我强烈建议您改用 PDO。
2.  使用图像文件夹的相对 URL，以备有一天需要移动它们。

这是一个例子。

```
// relative to your public webroot
$publicImageUrl = '/images/in/here';

// Pull up some record, maybe of a product 
$select = 'SELECT imageFilename FROM products WHERE id = 2332';
$results = mysql_query($select);
if(!$results) {
    // issue with query. deal with it here
} else {
    if( mysql_num_rows($result) ) {
        // record not found. deal with it here
    }

    $row = mysql_fetch_array($result);

    $imageSrc = $publicImageUrl  . '/' . $row['imageFilename'];
} 
```

然后你的 HTML 如下

```
<img src="<?php echo $imageSrc; ?>" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T20:43:29.727

1.  使用[PDO](http://www.php.net/manual/en/book.pdo.php)进行 php <-> mysql 连接

2.  发布mysql查询输出

# git - 如何同步两个远程 Git 存储库？

> ID：15056327
> 
> 赞同：27
> 
> 时间：2013-02-24T20:33:38.440
> 
> 标签：git, version-control, github, dvcs

我有两个存储库 url，我想同步它们，使它们都包含相同的东西。在 Mercurial 中，我想做的是：

```
hg pull {repo1}
hg pull {repo2}
hg push -f {repo1}
hg push -f {repo2} 
```

这将导致两个存储库中都有两个头（我知道有两个头并不常见，但我这样做是为了同步，它需要是非交互式的。头将从一个存储库中手动合并，然后同步再次运行）。

我想在 Git 中做同样的事情。例如，在没有用户交互的情况下，将所有更改都放入两个存储库中，并带有多个分支/头/以后要合并的任何内容。我正在尝试在命令中使用 url 来执行此操作，而不是添加遥控器（？），因为可能涉及许多存储库，并且为它们设置别名只会使我的脚本更加复杂。

我目前正在使用克隆存储库，`git clone --bar {repo1}`但是我正在努力“更新”它。我已经尝试过`get fetch {repo1}`，但这似乎并没有降低我的更改；`git log`仍然没有显示 repo1 中添加的变更集。

我也尝试`--mirror`在我的`push`and中使用`clone`，但这似乎是来自本地不存在的 repo2 的远程变更集，而我需要保留来自两个 repos 的更改：/

最好的方法是什么？

**编辑：**为了让我更清楚我想要做什么......

我有两个存储库（例如 BitBucket 和 GitHub），并且希望人们能够推送到其中一个（最终，一个是 Git，一个是 Mercurial，但我们现在假设它们都是 Git 以简化事情）。我需要能够运行一个脚本，该脚本将“同步”两个存储库，它们都包含两组更改，并且可能需要稍后手动合并。

最终，这意味着我可以只与其中一个存储库（例如 Mercurial 存储库）进行交互，并且我的脚本将定期拉入我可以合并的 Git 更改，然后它们将被推回。

在 Mercurial 中，这是*微不足道*的！我只是从两个存储库中提取，然后推动`-f/--force`以允许推动多个头。然后任何人都可以克隆其中一个存储库，合并头部，然后推回。我想知道如何在 Git 中做最接近的类似事情。它必须是 100% 非交互式的，并且必须将两个存储库保持在可以无限重复该过程的状态（这意味着不重写历史记录/更改变更集等）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-24T22:33:15.687

Git 分支没有 Mercurial 意义上的“头”。只有一件事叫做`HEAD`，它实际上是您当前已签出的提交的符号链接。对于像 GitHub 这样的托管存储库，*没有*检出提交——只有存储库历史记录本身。（称为“裸”回购。）

造成这种差异的原因是 Git 分支名称是完全任意的；它们不必在存储库的副本之间匹配，您可以随心所欲地创建和销毁它们。 [1] Git 分支就像 Python 变量名，可以随意调整并固定在任何值上；Mercurial 分支类似于 C 变量，它引用固定的预分配内存位置，然后用数据填充。

因此，当您引入 Mercurial 时，您有同一个分支的两个历史记录，因为分支名称在两个存储库中都是固定的有意义的东西。每个历史的叶子都是一个“头”，您通常会将它们合并以创建一个头。

但在 Git 中，获取远程分支实际上根本不会影响您的分支。如果您`master`从 获取分支`origin`，它只会进入一个名为`origin/master`.[2] 的分支，这只是`git pull origin master`两个步骤：将远程分支获取到`origin/master`，然后将另一个分支合并到您的当前分支中。但它们不必具有相同的名称；你的分支可以被称为`development`或`trunk`其他任何东西。您可以将任何其他分支拉入或合并到其中，也可以将其推送到任何其他分支。吉特不在乎。

这让我回到了你的问题：你不能将“第二个”分支头推送到远程 Git 存储库，因为这个概念不存在。您*可以*使用名称混乱（？）推送到分支`bitbucket_master`，但据我所知，您无法远程更新遥控器的遥控器。

不过，我认为您的计划没有多大意义，因为由于未合并的分支都暴露于两个存储库，您要么必须将它们合并，要么合并一个，然后将其镜像到另一个之上。 .. 在这种情况下，您无缘无故地使第二个存储库处于无用状态。

有没有理由你不能这样做：

1.  选择一个规范的存储库——我假设是 BitBucket。克隆它。它变成`origin`.

2.  将另一个存储库添加为远程，例如`github`.

3.  有一个简单的脚本定期获取两个遥控器并尝试将分支合并`github`到`origin`分支中。如果合并失败，请中止并向您发送电子邮件或其他任何内容。如果合并很简单，请将结果推送到两个遥控器。

当然，如果您只是在功能分支上完成所有工作，那么这一切都不会成为问题。:)

* * *

[1] 它变得更好：您可以将来自不同存储库的分支合并在一起，这些存储库*没有任何*共同的历史记录。我这样做是为了合并单独启动的项目；他们使用不同的目录结构，所以它工作正常。GitHub 对其 Pages 功能使用了类似的技巧：您的 Pages 历史记录存储在一个名为的分支中，该分支`gh-pages`位于同一个存储库中，但与您项目的其余部分绝对没有共同的历史记录。

[2] 这是善意的谎言。分支仍然被调用`master`，但它属于远程被调用`origin`，并且斜杠是引用它的语法。区别很重要，因为 Git 对分支名称中的斜杠没有疑虑，因此您可以有一个名为 的本地分支`origin/master`，这会影响远程分支。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-23T05:49:01.083

对于类似的事情，我在两个存储库中使用这个由 webhook 触发的简单代码来同步 GitLab 和 Bitbucket 主分支：

```
git pull origin master
git pull gitlab master
git push origin master
git push gitlab master 
```

它可能不是您所需要的，但它可能对只需要同步一个分支的其他人有所帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-21T10:30:06.000

这是针对该问题的经过测试的解决方案： [http ://www.tikalk.com/devops/sync-remote-repositories/](http://www.tikalk.com/devops/sync-remote-repositories/)

要运行的命令：

```
#!/bin/bash

# REPO_NAME=<repo>.git
# ORIGIN_URL=git@<host>:<project>/$REPO_NAME
# REPO1_URL=git@<host>:<project>/$REPO_NAME

rm -rf $REPO_NAME
git clone --bare $ORIGIN_URL
cd $REPO_NAME
git remote add --mirror=fetch repo1 $REPO1_URL
git fetch origin --tags ; git fetch repo1 --tags
git push origin --all ; git push origin --tags
git push repo1 --all ; git push repo1 --tags 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-24T20:38:10.623

您可能没有看到 fetch 实际上在您使用时确实有效`git clone --mirror --bare`，因为默认情况下 git 不会列出它的远程分支。您可以使用 列出它们`git branch -a`。

我还没有为未命名的遥控器制定语法，但是您可以根据 url 中的某些方案自动添加遥控器...无论如何，如果您为每个遥控器选择一些唯一且一致的名称，它可能会工作得最好repo，所以你可以知道什么变化来自哪里

但是，您可以尝试这样的事情：

```
git clone --bare --mirror --origin thing1 {repo1} repo.git
cd repo.git
git fetch thing2 --mirror
git push thing1 --mirror
git push thing2 --mirror 
```

完成此操作后，thing1 将可以随时合并 thing2 的所有分支，作为远程​​分支。您可以使用 列出远程分支`git branch -a`。

在 github 或 bitbucket 上，您将无法通过 Web 界面看到这些远程分支，但是如果您使用 --mirror 克隆，则可以看到它们，因此它们确实存在。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T20:47:01.733

`git reset --hard HEAD`之后试试`git fetch`。但是，我不确定我是否完全理解您的目标。`cd`在运行 fetch、reset 和 push 命令之前，您需要进入单独的存储库目录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-14T22:49:26.227

**[git-repo-sync](https://github.com/it3xl/git-repo-sync)**
它精确地同步远程 Git 存储库对，用于远程双方的持续团队开发工作。
就像您有两个指向单个存储库的入口点，而您的两个远程 Git 存储库的行为几乎就像一个存储库一样。

我是**git-repo-sync**的作者，我在开发过程中的主要想法是*安装、定期自动运行并忘记这个工具的存在*。
它实际上做得很好。

**git-repo-sync**具有自动冲突解决策略、不同的灾难保护和许多功能。你最好看一下项目的[README](https://github.com/it3xl/git-repo-sync/blob/master/README.md)。

唯一的问题是，它不同步 Git 标签，但这是故意的。

抱歉，对于这个 SO 问题的 Mercurial 方面，我无能为力。但我的工具可能对那些只为 Git 遥控器寻求解决这个问题的人有所帮助。

# cakephp - Cakephp CakeTime DST 处理

> ID：15056329
> 
> 赞同：1
> 
> 时间：2013-02-24T20:33:43.247
> 
> 标签：cakephp, date, time, timezone, dst

我将所有日期以 UTC 格式存储在我的数据库中。Cakephp 在 UTC 中运行，并在 UTC 中与 mysql 通信。现在我有以下情况：

```
debug(CakeTime::format('Y-m-d H:i', '2013-03-22 03:00', false,
    new DateTimeZone('Europe/Berlin')));
//output is 2013-03-22 04:00

debug(CakeTime::format('Y-m-d H:i', '2013-04-05 03:00', false,
    new DateTimeZone('Europe/Berlin')));
//output is 2013-04-05 05:00 
```

如您所见，CakeTime 在第二个示例中添加了 2 小时的偏移量，我猜这是因为它考虑了 DST（从 2013 年 3 月 31 日开始）。
但是，我要做的是在日历中显示重复发生的事件，并且此事件在每个第二个星期五凌晨 4 点开始 - 总是，即使在夏天也是如此。因此，日历可能不会显示为凌晨 5 点！

/编辑：第一个例子是正确的。活动必须在凌晨 4 点举行。但也在夏天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:55:40.240

我使用这两个函数进行时间转换解决了这个问题。
请记住，这是针对经常性事件，无论夏令时如何，总是在一天中的同一时间（例如凌晨 4 点）开始。

```
public function dateTimeToSever($date, $user_timezone) {
    $DateTime = new DateTime($date, $user_timezone);
    $dst = $DateTime->format('I');
    $toServerDateTime = CakeTime::toServer($date, $user_timezone, 'Y-m-d H:i');
    if ($dst) {
        $toServerDateTime = date('Y-m-d H:i', strtotime($toServerDateTime . ' + 1 Hours'));
    }
    return $toServerDateTime;
}

public function dateTimeToUser($date, $user_timezone) {
    $DateTime = new DateTime($date, new DateTimeZone('UTC'));
    $DateTime->setTimezone($user_timezone);
    $dst = $DateTime->format('I');
    $userDateTime = CakeTime::format('Y-m-d H:i', $date, false, $user_timezone);
    if ($dst) {
        $userDateTime = date('Y-m-d H:i', strtotime($userDateTime . ' - 1 Hours'));
    }
    return $userDateTime;
} 
```

这应该适用于使用*正*DST 的所有时区。AFAIK 某些时区，例如印度北部的某个地方，有某种*负*时区。我猜在这种情况下，“+ 1 小时”必须变为“- 1 小时”，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:37:54.380

在您的示例中，您在这两种情况下都得到了错误的时间。如果您想以 UTC 存储所有日期，则需要确保为用户所在的时区存储正确的 UTC 值。例如，如果您希望在欧洲/柏林时区的每周五下午 3 点重复发生事件，然后执行以下操作。

```
// save your date like this
$date = new DateTime('2013-04-05 03:00', new DateTimeZone('Europe/Berlin'));
$utc = $date->getTimestamp();
// print them correctly like this
$utc = CakeTime::format('Y-m-d H:i', $utc, false, new DateTimeZone('Europe/Berlin')); 
```

关于这种方法的警告，如果用户将他们的时区从有夏令时的时区更改为没有夏令时的时区（反之亦然），他们可能会遇到同样的问题。

# java - 如果在 iMacros 中不刷新，则检查复选框是否存在

> ID：15056331
> 
> 赞同：0
> 
> 时间：2013-02-24T20:33:45.663
> 
> 标签：java, javascript, loops, if-statement, imacros

我正在尝试为页面制作脚本，我需要的只是简单的 java 脚本，如果示例中的页面上有文本 -*没有找到*宏应该点击按钮*find work*。宏必须以 1 秒的间隔点击按钮*查找工作*。对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:54:13.967

这是一个如何为 iMacros 制作 JavaScript 脚本的示例。主要部分是`CONTENT=EVENT:MOUSEOVER`因为该部分悬停在页面元素上。如果元素存在，它将返回 true，否则将返回 false。试试看。

```
var macroTest;

macroTest ="CODE:";
macroTest +="TAG POS=1 TYPE=INPUT:CHECKBOX FORM=NAME:TestForm ATTR=NAME:C9&&VALUE:ON CONTENT=EVENT:MOUSEOVER"+"\n";

if(iimPlay(macroTest)>0)
{
alert("Checkbox found");
}
else
{
alert("Checkbox not found");
} 
```

# ruby-on-rails - Ruby On Rails - 地理编码器 - 接近条件

> ID：15056333
> 
> 赞同：3
> 
> 时间：2013-02-24T20:33:51.330
> 
> 标签：ruby-on-rails, postgresql, activerecord, geolocation, rails-geocoder

我在我的应用程序中使用 GeoCoder。现在我需要在我的数据库中搜索靠近某个位置或具有特定属性集的对象。我想在一个数据库查询中执行此操作，因为数据库真的很大。

我想要类似的东西

```
 Spot.near([lat,long],distance).where("visited = ?",true). 
```

距离和访问属性应与 OR 组合，而不是与 AND。

有谁知道如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:08:36.593

根据[这个](https://stackoverflow.com/a/9420230/394282)答案，您应该能够执行以下操作：

```
near = Spot.near([lat, long], distance)
visited = Spot.where(visited: true)

near = near.where_values.reduce(:and)
visited = visited.where_values.reduce(:and)

Spot.where(near.or(visited)) 
```

# html - html表格中的等高缩放单元格

> ID：15056338
> 
> 赞同：5
> 
> 时间：2013-02-24T20:34:34.127
> 
> 标签：html, html-table, cell, scaling

我在进行此设计时遇到了一些 HTML 表格问题：左侧单元格是 rowspan="2" 单元格，而右侧两个正在使用 height="50%" 属性。以下是预期的行为：

```
    +--------------+------------------+
    | | |
    | | 等高 |
    | | 单元#1 |
    | | |
    | 缩放- +-----------------+
    | 高度单元 | |
    | | 等高 |
    | | 单元#2 |
    | | |
    +--------------+------------------+

```

实际发生的情况：

```
    +--------------+------------------+
    | | 等高 |
    | | 单元#1 |
    | +-----------------+
    | | |
    | 缩放- | |
    | 高度单元 | 等高 |
    | | 单元#2 |
    | | |
    | | |
    +--------------+------------------+

```

简而言之，右侧两个单元格的顶部尽可能小，底部的一个填充其余空间。使用嵌入式表有一个丑陋的解决方法，但我想知道是否有更优雅的解决方案。这也可以通过假设左侧单元格的固定高度并强制右侧单元格的大小（以像素为单位）来规避。但是，这违背了缩放高度单元的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T04:52:39.523

真的很晚了......如何使用javascript如下高度是您设置的数字？

```
function SetCellHeight(height) {
    document.getElementById('ReferenceCell').style.height = height + 'px';
    document.getElementById('Cell1').style.height = (0.5 * height) + 'px';     
    document.getElementById('Cell2').style.height = (0.5 * height) + 'px';
}

<body onload="SetCellHeight(height)">

<table border=1>
<tr>
<td id="ReferenceCell" rowspan="2">First Column</td>
<td id="Cell1">Cell #1</td>
</tr>
<tr>
<td id="Cell2">Cell #2</td>
</tr>
</table> 
```

或者，用户可以如下设置高度：

```
function SetCellHeight() {
    var height = document.forms.tdHeightForm.heightinput.value.trim();
    document.getElementById('ReferenceCell').style.height = height + 'px';
    document.getElementById('Cell1').style.height = (0.5 * height) + 'px';     
    document.getElementById('Cell2').style.height = (0.5 * height) + 'px';
}

<form id="tdHeightForm"><input type="text" name="heightinput"><button type="button" 
onclick="SetCellHeight()">Change Height</button></form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T01:01:18.083

要使用 height:50% 标签，表格需要有一个高度。同样，问题是由于左边的元素是任意大小的。因此，如果左侧的文本小于 150 像素，则固定高度（例如 150 像素）可能会出现问题。因此，设置一个 0px 的高度表解决了这个问题。

```
<table height="0px" border="1px">
  <tr>
    <td rowspan="2">
      Blah<br>
      Blah<br>
      Blah<br>
      Blah<br>
      Blah<br>
      Blah<br>
      Blah<br>
      Blah<br>
    </td>
    <td height="50%">
      Text
    </td>
  </tr>
  <tr>
    <td height="50%">
      More text
    </td>
  </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T10:44:53.473

```
<table border=1>
<tr>
<td rowspan="2" style="height:300px;width:100px;text-align:center">First Column</td>
<td style="height: 150px;width:100px;text-align:center">Cell #1</td>
</tr>
<tr>
<td style="height:150px;width:100px;text-align:center">Cell #2</td>
</tr>
</table> 
```

# c# - 强制 WCF 在客户端代理中创建 xml 命名空间别名

> ID：15056340
> 
> 赞同：4
> 
> 时间：2013-02-24T20:34:34.493
> 
> 标签：c#, wcf, xml-serialization, wcf-client

我使用添加服务引用功能来创建外部 Web 服务的代理。

默认情况下，WCF 客户端正在生成 SOAP 消息，其中消息正文具有如下所示的命名空间装饰：

```
 <s:Body>
    <BankingTransaction xmlns="http://tempuri.org/">
      <amount>0</amount>
    </BankingTransaction>
  </s:Body> 
```

我需要消息正文看起来像这样

```
 <s:Body>
    <bb:BankingTransaction xmlns:bb="http://tempuri.org/">
      <amount>0</amount>
    </bb:BankingTransaction>
  </s:Body> 
```

区别在于“bb”xml 命名空间别名。我尝试使用的 Web 服务要求为消息有效负载的 xml 命名空间设置别名。WCF 客户端的默认行为是将命名空间定义为 DEFAULT 命名空间。我到处寻找解决这个问题的配置/装饰解决方案，但没有找到。除非有配置解决方案，否则我必须在序列化后检查和更改每条 SOAP 消息。＃瘸。

这里有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:55:55.627

此问题的解决方案是创建一个**自定义 MessageInspector**（通过**IClientMessageInspector**）来检查和更改 WCF 客户端代理生成的 SOAP 消息，然后再通过线路发送它们。此解决方案的基础在 Steven Cheng 的帖子[“[WCF] 如何通过自定义 MessageInspector 修改 WCF 消息”](http://blogs.msdn.com/b/stcheng/archive/2009/02/21/wcf-how-to-inspect-and-modify-wcf-message-via-custom-messageinspector.aspx)中进行了阐述，进一步的背景来自 Kirk Evan 的帖子[“使用 WCF 修改消息内容”](http://blogs.msdn.com/b/kaevans/archive/2008/01/08/modify-message-content-with-wcf.aspx)。

我使用 Steven 帖子中的代码来连接自定义 MessageInspector 基础设施。然后我修改了他的 Transformf2() 方法，该方法只对`<Body>`SOAP 消息的一部分进行操作，以满足我的特殊需要。在我的情况下，如原始问题中所述，我需要为`xmlns="http://tempuri.org"`上面的目标 Web 服务 XML 命名空间定义和使用别名。

为此，我必须

1.  获取对操作节点 的引用，该节点`<BankingTransaction>`始终是 的第一个（也是唯一的）子节点`<Body>`
2.  移除将默认命名空间设置为目标命名空间的属性
3.  设置节点的前缀（命名空间别名）

修改后的 Transform2() 代码如下：

```
 private static Message Transform(Message oldMessage)
    {
        //load the old message into XML
        var msgbuf = oldMessage.CreateBufferedCopy(int.MaxValue);

        var tmpMessage = msgbuf.CreateMessage();
        var xdr = tmpMessage.GetReaderAtBodyContents();

        var xdoc = new XmlDocument();
        xdoc.Load(xdr);
        xdr.Close();

        // We are making an assumption that the Operation element is the
        // first child element of the Body element
        var targetNodes = xdoc.SelectNodes("./*");

        // There should be only one Operation element
        var node = (null != targetNodes) ? targetNodes[0] : null;

        if (null != node)
        {
            if(null != node.Attributes) node.Attributes.RemoveNamedItem("xmlns");
            node.Prefix = "bb";
        }

        var ms = new MemoryStream();
        var xw = XmlWriter.Create(ms);
        xdoc.Save(xw);
        xw.Flush();
        xw.Close();

        ms.Position = 0;
        var xr = XmlReader.Create(ms);

        //create new message from modified XML document
        var newMessage = Message.CreateMessage(oldMessage.Version, null, xr);
        newMessage.Headers.CopyHeadersFrom(oldMessage);
        newMessage.Properties.CopyProperties(oldMessage.Properties);

        return newMessage;
    }
} 
```

# jquery - Twitter引导程序阻止事件发生

> ID：15056345
> 
> 赞同：0
> 
> 时间：2013-02-24T20:34:59.793
> 
> 标签：jquery, twitter-bootstrap

[有没有办法在崩溃](http://twitter.github.com/bootstrap/javascript.html#collapse)插件`hide`事件之前返回 false/preventDefault ？

例如，我想做这样的事情：

```
$(".collapse").on('hide', function(e){
    if($(this).hasClass("in"))
        e.preventDefault();
}); 
```

这个简单的例子： http: [//jsfiddle.net/ujgSC/4/](http://jsfiddle.net/ujgSC/4/)带有手风琴，我想防止用户通过单击同一项目两次来关闭所有手风琴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:31:32.310

尝试阻止事件的标题。

```
$('.accordion-toggle').click(function(){    
   if($($(this).attr('href')).hasClass("in")){        
     console.log('PREVENT');
     return false;
   }
}); 
```

[例子](http://jsfiddle.net/ujgSC/6/)

# haskell - 将递归函数转换为尾递归

> ID：15056346
> 
> 赞同：2
> 
> 时间：2013-02-24T20:35:00.903
> 
> 标签：haskell, recursion

我是新的 Haskell，仍在尝试了解一些基础知识。在编写递归函数时，我很自然地以递归或尾递归的方式编写它们，而不会有意识地选择其中一个。

我的问题是：

1.  给定任何递归函数，是否有一种简单的方法可以将其转换为尾递归？

2.  给定一个尾递归函数，是否有一种简单的方法可以将其转换为递归？

示例函数

```
addOne [] = []
addOne (x:xs) = (x+1):addOne xs 
```

另外，在编写函数时，有什么简单的方法可以判断尾递归是否比替代方法更合适？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:52:31.197

我也是 Haskell 的新手。根据我的阅读，Haskell 社区不赞成显式递归。相反，Haskell 鼓励程序员使用标准函数，如`map`、`filter`、`foldl`、`foldr`等，它们封装了常见的递归操作。例如，

```
addOne [] = []
addOne (x:xs) = (x+1):addOne xs 
```

可以写成

```
addOne xs = map (+1) xs 
```

或者，使用无点样式更进一步，如

```
addOne = map (+1) 
```

在某些情况下，这些标准函数可能不太适合，您必须编写自己的递归函数。但是，我相信它们涵盖了 90% 的情况，您可能会想要实现显式递归。

我知道这并不能完全回答你的问题，但我希望它能给你一些想法来考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:47:31.010

> 给定任何递归函数，是否有一种简单的方法可以将其转换为尾递归？

不。

> 给定一个尾递归函数，是否有一种简单的方法可以将其转换为递归？

是的。正如@Joachim Breitner 已经告诉你的那样，什么都不做，什么都没有做（老子）。但是您的定义`recursive`似乎与常见的有所不同，所以也许您告诉我们您的意思。

# php - 在sql中获得组合结果

> ID：15056347
> 
> 赞同：0
> 
> 时间：2013-02-24T20:35:18.720
> 
> 标签：php, sql

是否有可能从 2 个表`products`和`products image`关系表中得到这样的结果......

我正在使用 php。我可以用 php 组织数据，但由于性能原因，我想使用 sql 以这种形式获取数据。我知道 sql 连接，但它提供了简单的数组数据。我需要数据作为数组中的数组。

`Products`桌子：

```
id   name     
1    product1        
2    product2 
```

`images`桌子：

```
product_id  imageid
1           1
1           2
1           3
2           4
2           5
2           6

[0] => Array
        (
            [id] => 1
            [images] => Array
                (
                    [0] => 1
                    [1] => 2
                    [2] => 3
                )

        )
[1] => Array
        (
            [id] => 2
            [images] => Array
                (
                    [0] => 4
                    [1] => 5
                    [2] => 6
                )
        ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:53:16.427

不，不可能直接从关系 (SQL) 数据库中获取数组中的数组作为结果。

您需要遍历结果并自己创建数组，例如

```
$productsById = array();

foreach ($dbRows as $row) {
    if (!isset( $productsById[$row['product_id']] )) {
        $product = array(
            'id' => $row['product_id'],
            'name' => $row['product_name']
        );
        //note the use of the & to set the $product array by reference
        $productsById[$row['product_id']] = &$product;
    }
    //note the use of the & to retrieve the $product array by reference
    else $product = &$productsById[$row['product_id']];

    $product['images'][] = array(
        'id' => $row['image_id']
    );

    //We unset this because we accessed it by reference above; this prevents referencing the wrong product
    //on the next iteration of the loop.
    unset($product);
} 
```

或者，要获取对象数组：

```
$productsById = array();

foreach ($dbRows as $row) {
    if (!isset( $productsById[$row['product_id']] )) {
        $product = new stdClass;
        $product->id = $row['product_id'];
        $product->name = $row['product_name'];
        $product->images = array();
        $productsById[$row['product_id']] = $product;
    }
    else $product = $productsById[$row['product_id']];

    $image = new stdClass;
    $image->id = $row['image_id'];
    $product->images[] = $image;
} 
```

但是，还值得一提的是，如果您使用的是 MySQL（并且数据库可移植性不是问题），您可以使用 GROUP_CONCAT 函数，例如：

```
SELECT p.id as product_id, p.name as product_name, GROUP_CONCAT(i.id) as image_ids
FROM product p
LEFT JOIN image i ON p.id = i.product_id
GROUP BY p.id 
```

然后在您的 PHP 中，每个产品只有一个 $row 数组，您可以简单地使用以下命令获取图像 ID：

```
$imageIds = explode(',', $row['image_ids']); 
```

# ruby - 将文件读入一个数组，不包括注释掉的行

> ID：15056348
> 
> 赞同：2
> 
> 时间：2013-02-24T20:35:24.473
> 
> 标签：ruby, file-io, puppet

我几乎是一个 Ruby-nOOb（只有 Ruby 知识来编写一些基本的 .erb 模板或 Puppet 自定义事实）。看起来我的要求相当简单，但我无法理解它。

尝试编写一个`.erb`模板，它将一个文件（用空格分隔的行）读取到一个数组中，然后根据要求处理每个数组元素。这是我到目前为止得到的：

```
fname = "webURI.txt"

def myArray()
    #if defined? $fname
    if File.exist?($fname) and File.file?($fname)
        IO.readlines($fname)
    end
end

myArray.each_index do |i|
    myLine = myArray[i].split(' ')
    puts myLine[0] +"\t=> "+ myLine.last
end 
```

哪个工作得很好，除了（出于明显的原因）被注释掉的行或空白行。我还想确保当（按空格）向上吐出时，该行中的字段不应超过两个；像这样的文件：

```
# This is a COMMENT
#
# Puppet dashboard
puppet controller-all-local.example.co.uk:80

# Nagios monitoring
nagios controller-all-local.example.co.uk::80/nagios
tac talend-tac-local.example.co.uk:8080/org.talend.admin

mng console talend-mca-local.example.co.uk:8080/amc     # Line with three fields 
```

所以，基本上我想实现这两件事：

1.  将行读入数组，在第一个之后剥离所有内容`#`
2.  如果数字 id 超过两个，则拆分每个元素并打印一条消息

任何帮助将不胜感激。干杯！！

* * *

*2002 年 2 月 25 日***更新***

谢谢你的帮助！

这`blank`件事根本不起作用；抛出这个错误；但我有点不明白为什么：

> *未定义的方法“空白？” 对于“\n”：字符串（NoMethodError）*

我得到的数组：`myArray`实际上是这样的（使用`p`而不是`puts`：

```
["\n", "puppet controller-all-local.example.co.uk:80\n", "\n", "\n", "nagios controller-all-local.example.co.uk::80/nagios\n", .....     \n"] 
```

因此，我不得不这样做来解决这个问题：

```
$fname = "webURI.txt"

def myArray()
    if File.exist?($fname) and File.file?($fname)
        IO.readlines($fname).map { |arr| arr.gsub(/#.*/,'') }
    end
end

# remove blank lines
SSS = myArray.reject { |ln| ln.start_with?("\n") }

SSS.each_index do |i|
    myLine = SSS[i].split(' ')

    if myLine.length > 2
        puts "Too many arguments!!!"

    elsif myLine.length == 1
        puts "page"+ i.to_s + "\t=> " + myLine[0]

    else
        puts myLine[0] +"\t=> "+ myLine.last
    end
end 
```

非常欢迎您改进代码。干杯！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:58:54.857

```
goodArray = myArray.reject do |line|
  line.start_with?('#') || line.split(' ').length > 2
end 
```

这将拒绝以 # 开头的任何内容，或者拆分返回一个包含两个以上元素的数组，返回一个只有好项目的数组。

**编辑：**

对于您的内联评论，您可以这样做

```
goodArray.map do |line|
  line.gsub(/#.*/, '')
end 
```*

# vim - 如何在 Vim 中注释一个单词？

> ID：15056349
> 
> 赞同：1
> 
> 时间：2013-02-24T20:35:25.103
> 
> 标签：vim

我想**注释光标下的一个单词**并将其用作宏或将其映射为键绑定。

例如这个：

```
void somefunc(MyType* pType); 
```

会成为：

```
void somefunc(MyType* /*pType*/); 
```

我知道我只需要在单词前面加上 /* 和 */ 但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:57:04.767

尝试任何一个映射，选择一个你感觉更好的映射。

```
nnoremap <leader>cw caw/*<c-o>P*/<esc> 
```

或者

```
nnoremap <leader>cw viw<esc>a*/<esc>hbi/*<esc> 
```

`<leader>cw`在正常模式下输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:47:33.753

创建内联注释的一种更通用的方法是使用[Tcomment 插件](https://github.com/tomtom/tcomment_vim)。

安装后，您可以使用`gc`操作符来注释某些内容，例如，如果您有以下文件（带有`^`指示光标）：

```
void somefunc(MyType* ^pType); 
```

按下`gce`将使您：

```
void somefunc(MyType* /*pType*/); 
```

您可以将它用于任何运动命令，但当然，行明智的运算符（例如。`gcj`）不会注释内联而是整行。

# mysql - 如何选择 id 不等于答案数组的位置

> ID：15056353
> 
> 赞同：1
> 
> 时间：2013-02-24T20:35:44.947
> 
> 标签：mysql, sql

我有一张桌子，我在其中列出了参加课程的用户。在此表下方，我想要一个`<select>`字段，其中包含未参加课程的用户列表。

列出参加课程的用户的查询：

```
SELECT * FROM User
 left join UserCourse on User.id = UserCourse.fkStudentId
 where UserCourse.fkCourseId = 1 and u.fkRoleId = 3; 
```

这是我的代码，我尝试在其中列出“异常”：

```
SELECT * FROM User where id != 
(SELECT id FROM User
 left join UserCourse on User.id = UserCourse.fkStudentId
 where UserCourse.fkCourseId = 1 and u.fkRoleId = 3); 
```

问题是，有几行与第二个查询匹配，这是不允许的。您对如何列出未参加的学生有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T20:37:41.290

替换`!=`为`NOT IN`：

```
SELECT * FROM User where id NOT IN
(SELECT id FROM User
 left join UserCourse on User.id = UserCourse.fkStudentId
 where UserCourse.fkCourseId = 1 and u.fkRoleId = 3); 
```

# web-applications - SQL Server 2012 FileTables 存储用于在 IIS8 虚拟目录中托管的图像

> ID：15056359
> 
> 赞同：1
> 
> 时间：2013-02-24T20:36:08.310
> 
> 标签：web-applications, sql-server-2012, virtual-directory, iis-8, filetable

关于在映射到 SQL Server 2012 FileStream 共享的 IIS8 虚拟目录中托管图像（用于在网页上显示），我遇到了一个非常具体的问题。当我尝试浏览到与虚拟目录对应的 URL 时，图像并不总是加载。

我已确认在 IIS 中正确设置了权限以浏览映射到虚拟目录的网络共享，但由于某种原因，我在某些图像上收到 500.19 (sc-win32-status: 50) 错误。

我无法弄清楚为什么有些图像有效而其他图像在所有图像都具有相同的权限级别时无效。

有没有人遇到过这个问题？如果我不应该直接映射到此共享以提供文件，我如何在 IIS 中映射到它？

这是 IIS8 中针对此问题的错误条目：

> *2013-02-24 20:06:52 192.168.0.50 GET /thumbImages/thumbs_02967_theoldfishinghut_1920x1080.jpg - 80 - 98.155.90.44 Mozilla/5.0+(Windows+NT+6.2;+WOW64)+AppleWebKit/537.17+(KHTML,+喜欢+壁虎）+Chrome/24.0.1312.57+Safari/537.17 - 500 19 50 2*

奇怪的是，如果我重新加载它们足够多次的网页，图像有时会加载。我还观察到较大的图像永远不会加载，但有时会加载较小的图像（一旦它们被缓存，网页就会毫无问题地加载它们）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:50:19.017

不幸的是，这个问题似乎太模糊了，或者我没有以最好的方式呈现它。

无论如何，我能想到的仍然使用 FileStream 共享的唯一解决方案是一个糟糕的解决方案 - 只需将共享镜像到不同的文件夹并从镜像文件夹提供文件。希望以后有更好的解决方案。

# java - 为什么不建议将常量存储在单独的类中？

> ID：15056360
> 
> 赞同：23
> 
> 时间：2013-02-24T20:36:12.927
> 
> 标签：java, constants

有人告诉我（我在其他几个地方看到过这个声明），不建议将常量存储在 Java 中的单独类中，以便在其他类中使用它们。但我没有看到任何地方为什么会这样。我不应该将它们存储在自己的接口/类中的原因是什么？

* * *

我从 C 到 Java，在 C 中我只会创建一个`.h`文件，在其中定义常量`#define`

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-24T20:45:23.597

出于文体原因，不赞成使用专用文件中的常量。拥有一个专门用于常量的类可以鼓励开发人员将越来越多的不相关（*未记录？*）常量添加到一个慢慢膨胀失控的文件中。

相比之下，将常量与它们相关的类关联起来是一种更具可扩展性和可读性的设计。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T20:44:02.950

因此，您可以成为工程师并测量常数及其位置作为技术选择。当您在性能关键系统或很酷的小片段上工作时，这非常好。但是，一旦您的应用程序趋于增长，就越来越难以掌握代码中反映的业务需求和最终用户需求。

因此，与其考虑样式——单独的类、属性文件或嵌套在类中——我倾向于遵循[域驱动设计](http://en.wikipedia.org/wiki/Domain-driven_design)——如果常量集完全属于特定的类（实体），则嵌套常量；如果概念涉及领域模型中的多个实体，请随意将其设为单独的实体。

请记住，从那以后`Java 5`，您确实可以使用`enums`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T13:40:07.090

单独的常量类不是面向对象的设计。在 OO 中，一个类（或接口）代表一个*契约*，一个只包含常量的类不定义任何契约。

另一个面向对象的考虑是单独的常量类鼓励滥用继承。继承应该表明一个类完全遵守另一个类或接口定义的契约。继承不应仅用于共享功能或常量；这就是`public`方法和字段的用途。因此，此代码不正确：

```
class SomeApplicationClass
implements ScrollPaneConstants  // Incorrect, import ScrollPaneConstants instead 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-02-24T20:42:46.013

问题是它们应该完全位于您的源代码之外。您应该使用 Apache Commons Config 之类的东西，或者至少从`.properties`文件中加载。

我还要注意，我是在合理范围内解释“单一”。例如，不应将所有 Java 开发人员使用的 Config 文件存储在 Google 的服务器上，并附上修改请求表。您的整个代码库可能不应该这样做；但是，每个 UOR 或包是一个合理的范围，并且是我在实践中使用的范围。

# android - android在对话框调用功能中检查项目仅一次

> ID：15056370
> 
> 赞同：0
> 
> 时间：2013-02-24T20:37:09.593
> 
> 标签：android, sqlite, android-alertdialog, android-checkbox

我创建了一个包含带有 chechbox 的列表的 alertDialog 看起来有点像这是图像

![在此处输入图像描述](../Images/704ccef6a9462ef1aa70259c4479096c.png)

我想在选择多项时从 sqlite 中删除它们，这是警报代码

```
 public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.delete: {

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setPositiveButton("OK",
                new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {

                        for (int i = 0; i < azkarItems.length; i++) {
                            if (itemsChecked[i]) {
                deleteZekr(azkarIds[i], mySQLiteAdapter, azkarItems[i]);
                            }
                        }
                    }
                });
        builder.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        //Toast.makeText(getBaseContext(), "Cancel clicked!", Toast.LENGTH_LONG).show();
                    }
                });
        builder.setMultiChoiceItems(azkarItems, itemsChecked,
                new DialogInterface.OnMultiChoiceClickListener() {

                    public void onClick(DialogInterface dialog, int which,
                            boolean isChecked) {
                        //Toast.makeText(getBaseContext(), azkarItems[which] + (isChecked ? "checked!" : "unchecked!"), Toast.LENGTH_SHORT).show();
                    }
                });
        builder.create();
        builder.show();
    }

        break;
    }
    return true;
} 
```

这是 deleteZekr() 函数的主体

```
public void deleteZekr(int dZekrID, SQLiteAdapter mySQLiteAdapter, String zekr) {

    mySQLiteAdapter = new SQLiteAdapter(this);
    mySQLiteAdapter.openToWrite();

    System.out.println("the zeker to delete: "+zekr);
    mySQLiteAdapter.delete_byID(dZekrID);

    mySQLiteAdapter.close();

    setDataInList(mySQLiteAdapter);
} 
```

问题是它只调用了一次这个方法，这意味着如果我决定删除前 2 个项目，它只会删除一个项目。

任何解决方案？提前致谢。

# java - 不使用条件返回 2 个可能参数的另一个参数

> ID：15056372
> 
> 赞同：43
> 
> 时间：2013-02-24T20:37:30.480
> 
> 标签：java

例如，如果我有一个保证接收 5 或 7 作为参数的函数，我希望函数在接收到 7 时返回 5，如果在不使用任何条件的情况下接收到 5 时返回 7。

面试时被问到这个问题，非常困惑，谢谢。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-02-24T20:39:22.387

简单的算术：

`return 7 - input + 5;`

（可以简化为`return 12 - input;`）

假设输入为 7：

返回 7 - 7 + 5 --> 返回 5

或者如果输入是 5：

返回 7 - 5 + 5 --> 返回 7

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-02-24T20:43:01.323

您可以使用任何可以反转的简单交换计算：

*   添加：`f(x)=7+5-x`
*   异或：`f(x)=7^5^x`
*   乘法：`f(x)=7*5/x`

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-02-24T20:41:46.113

```
public int f(int x) {
    return x ^ 2;
} 
```

二进制：

```
7 = 111
5 = 101
2 = 010 
```

XOR（Java 中的 ^）在关闭时翻转 2 位，如果打开则关闭。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-02-25T09:22:50.073

怎么样：

```
public int q(int in)
{
    static final int[] ret = {0, 0, 0, 0, 0, 7, 0, 5};
    return ret[in];
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-02-24T21:15:13.827

如果我是面试的人，而你只为数字输入解决了这个问题，那么我的下一个问题将是，“对于非数字输入，你将如何解决这个问题？” 因为我不会寻找数学上的聪明才智。相反，这个怎么样？

```
List<String> options = new ArrayList<>(Arrays.asList("bob", "fred"));
options.remove("bob");
System.out.println(options.get(0)); 
```

这显然可以很容易地适应任何类型，包括`Object`，只要对象的相等性正确运行，并且作为奖励，它可以用其他语言更简洁地表达，例如 Groovy：

```
println((["bob", "fred"] - "bob").first()) 
```

无论哪种情况，输出显然都是“fred”。如果我是面试的人，这就是我要寻找的答案。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-02-25T10:08:51.773

```
public int xyz(int x) {
    return 35 / x;
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-02-24T21:22:12.493

> xor one 是如何工作的？[对于情况 f(x) = 7^5^x ]

XOR (^) 是异或，以这种方式工作

```
a|b|a^b
-------
0|0| 0
0|1| 1
1|0| 1
1|1| 0 
```

因此 XOR (^) 可用于更改某个数字的位。例如，当我们想要更改任何数字的最后两位（例如）时`xxxx10`，`xxxx01`我们可以这样做，`numbrer ^ 3`因为 3 是二进制 00011。

以下是关于 XOR 的一些事实

1.  XOR 是对称的 -> `a^b`=`b^a`

2.  XOR 是关联的 -> `(a^b)^c`=`a^(b^c)`

3.  `a^a`= `0`（里面的`a`将被零替换，零不会改变）

    例如 a = 157（二进制 010011101）

    ```
     010011101
    ^ 010011101
    -----------
      000000000 
    ```

4.  `0^a`= `a`（其中的`a`只能更改零，因此它们会将它们更改为一）

    ```
     000000000
    ^ 010011101
    -----------
      010011101 
    ```

所以使用事实（1）和（2）`7^5^x == x^7^5 == x^5^7`

让我们尝试检查**如何**`x^7^5`工作**。`x=7`**

```
(x^7)^5 = (7^7)^5 = 0^5 = 5 
```

同样的情况发生**在`x=5`**

```
(x^5)^7 = (5^5)^7 = 0^7 = 7 
```

# module - 如何更新我发布的 NPM 模块？

> ID：15056377
> 
> 赞同：96
> 
> 时间：2013-02-24T20:37:48.453
> 
> 标签：module, npm

我创建了一个 NPM 模块并在 0.0.1 版本上发布了它

我做了一些更改并将其推送到 github，我希望它在使用时使用`npm install myModule`新版本。

我如何告诉 NPM 有 0.0.2 版本？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-02-24T20:39:18.203

更改您的版本`package.json`或使用`npm version <new-version>`.

在你的 中更改版本号后`package.json`，你可以运行`npm publish`将新版本发布到 NPM。

`npm install`将在 NPM 存储库中安装最新版本。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-12-08T12:51:30.753

增加版本号，然后`npm publish yourModule`再次运行 - 如[npm 文档](https://docs.npmjs.com/cli/publish)中所述。

`npm install yourModule`然后将从 NPM 注册表安装最新版本。

我发现最后一个答案有点误导，对不起。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-08-10T14:22:04.293

对我来说，更新版本`package.json`仍然会导致“您无法发布...”错误。

解决的步骤是（基于操作版本号）：

1.  `npm version 0.0.2`

2.  `npm publish`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-02-17T18:13:21.353

从[npmjs 文档](https://docs.npmjs.com/updating-your-published-package-version-number)：

1.  **要更改package.json**中的版本号，请在命令行的包根目录中运行以下命令，将 **<update_type>**替换为[语义版本控制](https://docs.npmjs.com/about-semantic-versioning)版本类型之一（补丁、主要或次要）：

    > `npm version <update_type>`

2.  运行**npm 发布**。
3.  转到您的包页面 ( **https://npmjs.com/package/** ) 以检查包版本是否已更新。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-07-27T11:36:24.093

1.  如果是补丁版本（小改动），请使用以下内容：

    ```
     npm version patch 
    ```

    它将增加版本号的最后一部分。

2.  如果是次要版本（新功能），请使用以下内容：

    ```
     npm version minor 
    ```

    它将增加版本号的中间部分。

3.  如果它是主要版本（主要功能或主要问题修复），请使用以下内容：

    ```
     npm version major 
    ```

    它将增加版本号的第一部分。

# java - Java ScheduledExecutorService生产者\消费者

> ID：15056380
> 
> 赞同：2
> 
> 时间：2013-02-24T20:38:09.560
> 
> 标签：java, concurrency, producer-consumer, java.util.concurrent, blockingqueue

我有下一个项目：

基于 Spring(3.2) 的 Web 应用程序(Tomcat 7)，在后台我有几个任务。

我有一个队列，其中包含一些要处理的信息。该队列会定期更新（但只是在它为空时）。

此外，我有几个线程定期从这个队列和进程中排队数据。

对于调度，我想使用 ScheduledExecutorService。

我有几个问题\问题：

1.  如何保持这个队列？我认为它应该是全球性的。我应该在某个“持有人”类中使其成为静态吗？这不会是一个糟糕的设计吗？

2.  用 ScheduledExecutorService 初始化这个队列和所有任务的好地方在哪里？ServletContextLoadingListener 是一个好地方吗？有什么方法可以用 Spring 初始化它吗？

3.  如果我需要精确控制消费者线程的数量，是否应该使用多个 ScheduledExecutorService 实例？

4.  ArrayBlockingQueue 对这种情况有好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:45:13.577

1.  你可以使用一个普通的类，让 spring 用 scope 来管理它`singleton`。
2.  `init-method`您可以使用in spring 配置来配置 bean或`InitializingBean`在您的类中实现接口。
3.  的线程号`ScheduledExecutorService`可通过构造函数参数进行配置。如果您有多种类型的任务并希望在单独的线程池中运行它们，则可以使用多个`ScheduledExecutorService`实例。但是，如果您的所有任务都属于同一类型，我认为不需要多个`ScheduledExecutorService`实例。
4.  JDK中`ScheduledThreadPoolExecutor`提供的类有一个内部工作队列`java.util.concurrent.ScheduledThreadPoolExecutor.DelayedWorkQueue.DelayedWorkQueue`（并且它是不可配置的）。我不确定您将 ArrayBlockingQueue 放在哪里。

# c# - Facebook 图形 API 墙贴替代品

> ID：15056383
> 
> 赞同：4
> 
> 时间：2013-02-24T20:38:30.493
> 
> 标签：c#, asp.net, facebook, facebook-graph-api

我一直在使用基于 Hernan Amiune 的 Facebook 图形 API 库的类，以允许网站用户从我的代码中写入他们的朋友墙。随着最近 2 月的更改，执行此操作的 Graph API 方法不再可用。

显然我现在需要使用 Feed Dialogue，但是我可以从 c# 代码中调用它吗？有人有我可以使用的样品或替代品吗？

简而言之，我可以仅使用服务器端代码代表另一个用户写信给某人的墙上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T21:33:04.367

> *简而言之，我可以仅使用服务器端代码代表另一个用户写信给某人的墙吗？*

从[2 月 6 日](https://developers.facebook.com/roadmap/completed-changes/)起，您无法再通过 Graph API 向用户的朋友墙发帖。这意味着您不能代表其他用户使用任何代码语言或 SDK 在某人的墙上书写。您要么必须使用提要对话框，要么使用提及标记或动作标记。

### 来自 Facebook 开发者路线图：

> [通过用户提及标签](https://developers.facebook.com/docs/opengraph/mention_tagging/)或[动作标签](https://developers.facebook.com/docs/opengraph/actions/#taggingpeople/)包含朋友的故事将显示在朋友的时间线上（假设朋友批准标签）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:01:57.733

您是否查看过[Feed Dialogue info](https://developers.facebook.com/docs/reference/dialogs/feed/)，其中详细介绍了一个不错的简单 javascript 示例，甚至更简单的直接 url 示例，将两者转换为使用 C# 似乎是一项极其微不足道的任务。

查看[相关答案](http://facebook.stackoverflow.com/questions/14792062/posting-to-friends-wall-with-graph-api-via-feed-connection-failing-since-feb)

# regex - 用正则表达式查找，有异常

> ID：15056393
> 
> 赞同：0
> 
> 时间：2013-02-24T20:39:33.967
> 
> 标签：regex

我必须找到这样的例外：

找到：dt

预期结果：dt，blabladtblabla ...

除了：宽度

换句话说，我需要找到所有带有“dt”字符的字符串，除非字符串是“width”

*   我正在使用 TextCrawler / English 来查找和替换字符串

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T21:08:22.413

在支持后视的正则表达式实现中，您可以使用

```
(?<!wi)dt|dt(?!h) 
```

在javascript中你可以破解类似的东西

```
/^.?dt|(?!width)..dt/m.test( '  width' );    // false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:42:37.900

你应该试试

[环视](http://www.regular-expressions.info/lookaround.html)正则表达式

请参阅此[TextCrawler 论坛帖子](http://www.digitalvolcano.co.uk/board/viewtopic.php?p=2401#p2401)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T21:06:50.393

```
maybe something like this:

 /^(?!wi)dt|dt(?!h)/g; 
```

# honeypot - 这个蜜罐有用吗？

> ID：15056394
> 
> 赞同：3
> 
> 时间：2013-02-24T20:39:40.157
> 
> 标签：honeypot

我刚做了我的第一个超级简单的蜜罐，我想知道它是否可以工作：

1.  大多数人看不到向左浮动 -9999 的输入字段。如果他们看到的话，还有一张纸条上写着“不要在这里写”。

2.  “onChange”事件监听该字段的变化，当它发生变化时，它会发出警报（“你在向我发送垃圾邮件！”），然后重定向到 Google。

我想知道这是否过于人性化。机器人会一次性填写整个表格吗？如果页面上有警报，机器人仍然可以填写表格吗？我可以强制使用页面的实体单击警报上的“确定”，从而有效地导致机器人永远等待吗？

我确信那里有非常强大的系统，但我正在寻找一些非常简单的东西。我没有收到太多无法处理的垃圾邮件……只是每个月都在筛选 300 封垃圾邮件，试图找到一两个实际注册的新用户，这让我很沮丧。

感谢您的任何帮助/建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:57:01.347

嗯，是的，也不是。有些机器人可能会爱上它并填写所有内容，但其他机器人不会。

使用 JavaScript 重定向听起来不是一个好主意，因为大多数机器人都没有 JavaScript 引擎。您可以使用此事实来过滤它们 - 尽管您也可以过滤合法用户。

您还可以检查让用户填写表单需要多长时间 - 如果太短，则可能是机器人。

不要期望 100% 的成功率，但技术的组合可能已经有很大帮助。

# javascript - 同步 JSONP 请求

> ID：15056397
> 
> 赞同：0
> 
> 时间：2013-02-24T20:39:46.707
> 
> 标签：javascript, ajax, jsonp, synchronous

关于 JSONP 请求以及它们不能同步发出的事实存在许多问题。大多数解决方法都涉及使用回调或 ajax 请求中的成功函数来执行您想要的操作，但我认为这对我不起作用。

背景：我正在使用[Solr](http://lucene.apache.org/solr/)开发一个搜索应用程序。我正在开发一个 javascript API 供其他人用来与 Solr 交互，因此他们不需要了解 Solr 搜索请求的来龙去脉。

在我的 api 中，我有一个 Request 对象，带有一个名为 doRequest 的函数。该函数的目的是执行对 solr 服务器的调用（在另一个域上，因此需要 JSONP），并返回一个 Response 对象。

```
Request.prototype.doRequest = function (){
var res = new Response();
$.ajax({
    url: this.baseURL,
    data: 'q=*:*&start=0&rows=10&indent=on&wt=json', 
    success: function(data){
        res.response = data.response;
        res.responseHeader = data.responseHeader;
        /*
          other...
          stuff...
        */
    },
    dataType: 'jsonp',
    jsonp: 'json.wrf'
});
res.request = this;
return res;
}; 
```

“用户”会像这样使用这个功能......

```
var req = new Request();
var res = req.doRequest(); 
```

然后对 res 中的结果做某事或其他事情。

鉴于我无法执行同步 JSONP 请求，并且无法从 ajax 函数中返回，我无论如何也无法确保在用户开始使用 res 之前为他们完全填充它。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T03:53:42.480

无论您的程序的其余部分是否同步，有时您需要同步触摸 REST 接口。一个示例是，您请求获取一组资产（可能是资产 Id），然后对每个 Id 进行水合以获得完整的数据/资产。如果您使用过 Ooyala API，那么您就会明白我的意思。

我创建了似乎是第一个同步 JSONP 模块，它允许每个下一个请求仅在其前一个请求完成后运行。它使用递归而不是 Promises，这意味着在前一个请求成功之前不会发送下一个请求。API 位于此处：[https ://github.com/cScarlson/jsonpsync](https://github.com/cScarlson/jsonpsync)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:50:31.713

看起来使用回调函数是这样做的方法。如果您有兴趣，这就是我最终的做法。

```
Request.prototype.doRequest = function (callback){
var res = new Response();
$.ajax({
    url: this.baseURL,
    data: 'q=*:*&start=0&rows=10&indent=on&wt=json', 
    success: function(data){
        res.response = data.response;
        res.responseHeader = data.responseHeader;
        res.request = this;
        /*
          other...
          stuff...
        */
        callback(res);
    },
    dataType: 'jsonp',
    jsonp: 'json.wrf'
});
}; 
```

现在用户使用这样的功能：

```
var req = new Request();
var res = req.doRequest(parseResults); 
```

其中 parseResults 是用户定义的回调函数，将响应对象作为参数。

```
function parseResults(res){
    //Doing work
} 
```

# jquery - 访问 jQuery 插件变量的更短方法？

> ID：15056400
> 
> 赞同：2
> 
> 时间：2013-02-24T20:39:50.420
> 
> 标签：jquery, variables, jquery-plugins, scope

我正在使用这个设置来允许访问 jQuery 插件之外的变量：

```
(function($){

  $.fn.myplugin = function() {
    return this.each(function() {
      // plugin code here
      console.log($.fn.myplugin.myvar);
    });
  };

  $.fn.myplugin.myvar = { ... };

})(jQuery); 
```

我可以`myvar`使用`$.fn.myplugin.myvar`. 但这很冗长...我觉得必须有一种方法可以使用较短的名称访问插件内部的变量，例如`this.myvar`. 该示例不适用于`this`引用当前元素。但是还有另一种更简单的访问变量的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:42:16.167

`$.fn`是 jQuery's 的别名`prototype`，所以我认为没有更简单的方法，除非您将该插件保存在变量中。

[jQuery.fn 是什么意思？](https://stackoverflow.com/q/4083351/601179)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:56:03.257

gdoron 的答案是最简单的解决方案...您可以考虑的另一件事是以面向对象的样式编写插件，例如

```
function MyPlugin(element) {
    this.element = element;
}

MyPlugin.prototype.init = function() {
    //plugin code here
}

MyPlugin.myVar = { ... };

$.fn.myplugin = function() {
    return this.each(function() {
        var instance = $(this).data('myplugin');
        if (!instance) {
            var instance = new MyPlugin(this);
            $(this).data('myplugin', instance);
        }
        instance.init.apply(instance, arguments);
    });
} 
```

然后，如果您需要访问任何实例属性或方法，您可以通过`$('#someElement').data('myplugin');`. 您还可以通过让第一个参数成为方法名称，然后是方法参数来使相同的方法可用，就像 jQuery UI 的工作原理一样……但是实现起来稍微复杂一些。如果您有兴趣，请在 Google 上搜索“jQuery 小部件模式”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T20:57:16.933

[我认为在定义函数（ demo](http://jsfiddle.net/Mottie/bG7sF/1/) ）时分配变量会更容易：

```
var myplugin;
(function($){

  myplugin = $.fn.myplugin = function() {
    return this.each(function() {
      // plugin code here
      console.log(myplugin.myvar);
    });
  };

  myplugin.myvar = { test: true };

})(jQuery); 
```

# jquery - 表单验证 - 专注于“错误”输入

> ID：15056403
> 
> 赞同：0
> 
> 时间：2013-02-24T20:39:59.650
> 
> 标签：jquery, html, forms

我正在显示注册表单的错误消息/警报，它指向带有错误的输入。

我也想关注这个错误输入。

但是，我的代码目前专注于最后一个输入？

这是一个链接。要重新创建，只需单击注册而不填写任何内容。第一个 div 显示错误...但集中在最后一个。

[关联](http://ry-design.co.uk/includes/register.php)

我目前的代码：

```
$('#register-btn').on('click', checkEmpty);

function checkEmpty(){
    var emptyDiv = $('.add-listing-input').filter(function() { 
        return $(this).val() == "";
    });

    if(emptyDiv.length > 0){
        var theTop = emptyDiv.position();
        var theBottom = theTop.top + emptyDiv.height() +25;
        var theText = emptyDiv.attr('id');
        $('#register-errors').css('top',theBottom+'px').show();
        $('#error-text').text('Your '+theText+' is missing, please fill in');
        emptyDiv.focus();
        emptyDiv.on('keydown', function(){
                $('#register-errors').hide();
                $('#error-text').text('');

        });
    }else{
        $('#register-errors').hide();
        $('#error-text').text('');
        checkEmails()
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:49:40.723

由于`emptyDiv`实际上是所有空字段的集合，因此说类似的`emptyDiv.focus()`内容会尝试关注所有字段（这是不可能的），并且显然只关注最后一个字段。

尝试使用该`.first()`方法将其过滤到您想要的内容：`emptyDiv.first().focus()`

这是我建议的重写：

```
//Select some elements once
var $registerErrors = $('#register-errors');
var $errorsMsg = $('#error-text');

//click the registed button
$('#register-btn').click(function(){
    var $emptyInputs = $('.add-listing-input').filter(function() { 
        return this.value == "";
    });

    if($emptyInputs){
        var $firstEmptyInput = $emptyInputs.first();

        var bottomPosition = $firstEmptyInput.position().top + $firstEmptyInput.height() +25;
        var inputId = $firstEmptyInput.attr('id');

        $registerErrors
            .css('top', bottomPosition)
            .show();

        $errorsMsg.text('Your '+ inputId +' is missing, please fill in');

        $firstEmptyInput
            .focus()
            .one('keydown', clearError); //this event only fires once!
    }else{
        clearError();
        checkEmails();
    }
});

function clearError(){
    $registerErrors.hide();
    $errorsMsg.text('');
} 
```

# haskell - 使用列表理解代替递归

> ID：15056405
> 
> 赞同：4
> 
> 时间：2013-02-24T20:40:15.157
> 
> 标签：haskell

我很好奇以下示例是否可以使用列表推导代替递归。

`replaceFirst`接受一个元素和一个列表并替换列表中第一次出现的元素的函数。

这可以使用递归来完成，如下所示：

```
replaceFirst _ [] = []
replaceFirst elem y (x:xs) | x==y = (elem:xs)
                           | otherwise = x:replaceFirst elem y xs 
```

我的问题是，这个递归函数，或者类似的对列表中第一次出现的元素进行操作的递归函数可以替换为列表理解函数吗？为什么或者为什么不？（我更关心推理而不是实际代码）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T20:54:32.610

列表推导是各种形式的,和的[语法糖](http://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-420003.11)。如果您的递归函数可以用这些来描述，那么您可以将其重写为列表推导式。它们不能像上面那样短路，也不能通过累积状态。`map``filter,``concatMap`

您`replaceFirst`似乎需要一个累加器来“告诉”列表中后面的元素关于早期元素的外观。我认为这使得仅使用列表理解语法编写变得困难或不可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T01:25:55.900

列表理解，灵感来自 leftaroundabout：

```
replaceFirst elem y xs = [a | let b = break (==y) xs
                                  c = if not (null $ snd b) 
                                         then fst b ++ [elem] ++ tail (snd b) 
                                         else fst b
                              , a <- c] 
```

# c++ - 使用 fstream 附加到文件而不是覆盖

> ID：15056406
> 
> 赞同：29
> 
> 时间：2013-02-24T20:40:20.100
> 
> 标签：c++, file, overwrite

我正在尝试为我正在从事的项目创建一个基本的高分系统。

我遇到的问题是，尽管我将名称写入我的主要名称，但它们只是覆盖了以前的名称。

目前我有这个：

```
void ManagePoint::saveScore(string Name, int Score)
{

    ofstream newFile("scorefile.txt");

    if(newFile.is_open())   
    {
        newFile << Name << " " << Score;            
    }
    else 
    {
        //You're in trouble now Mr!
    }

    newFile.close();

} 
```

为了测试，我像这样添加它们：

```
runner->saveScore("Robert", 34322);

runner->saveScore("Paul", 526);

runner->saveScore("Maxim", 34322); 
```

在加载显示上，所有将出现的是Maxim的分数，我如何循环并保存它们，或者全部附加或什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-24T20:42:12.603

您需要使用附加模式打开文件：

```
ofstream newFile("scorefile.txt", std::ios_base::app); 
```

还有[各种其他模式](http://en.cppreference.com/w/cpp/io/basic_ofstream/basic_ofstream)。

# mysql - Wordpress 使用自定义查询搜索序列化元数据

> ID：15056407
> 
> 赞同：1
> 
> 时间：2013-02-24T20:40:21.467
> 
> 标签：mysql, wordpress, serialization

我正在尝试在 wordpress 数据库中搜索序列化的帖子元值。我知道序列字符串的结构，所以我可以搜索前面的值，获取索引，然后在该索引值之前获取我想要的字符数。我无法在此特定查询中有效地使用正则表达式，因为我想根据结果进行排序。这是我到目前为止所拥有的，但我在语法上失败了，我认为这与尝试使用 AS 关键字和我对 AND 语句的分组有关。

```
    从 _posts 中选择 SQL_CALC_FOUND_ROWS _posts.ID
    内部连接 ​​_postmeta ON (_posts.ID = _postmeta.post_id)
    其中 1=1
    AND _posts.post_type = '狗'
    和（_posts.post_status = '发布'）
    AND ( (_postmeta.meta_key = '_meta_general'
       AND CAST(_postmeta.meta_value AS CHAR)) 作为 dmet
       AND POSITION(';s:6:\"weight' IN dmet) 作为 ddex
       AND MID(dmet ,ddex,10)) 作为 dres
    GROUP BY DRES ORDER BY DRES ASC LIMIT 0, 10

```

好吧，我仍然对这件事的结构有疑问。@fenway，经过仔细检查，之前的代码不起作用。这就是我现在所拥有的。@fenway 的答案的问题是，在选择“FROM”帖子的语句的选择部分中调用了 MID 和 POSITION 值。它们位于 postmeta 中。因此，我尝试在通过 id 将 postmeta 表连接到 post 表的 INNER JOIN 之后重新排列字符串过滤。这是行不通的。我知道这个问题仅仅是由于我缺乏 SQL 知识，但我想在这里学习。

这些都没有按我的意愿工作。存在语法错误。代码的目的是按序列（json）字符串中的值对返回的查询进行分组。方法是搜索以下值（在这种情况下它将是 - ";s:6:"weight -）当我有这个字符串的索引时，我想返回前面的 10 个值（日期 xx/xx/ xxx)。我想标记这个字符串（AS dres）并让结果按 dres 排序。Wordpress 从帖子表中收集帖子，然后从 postmeta 表中收集帖子元数据。后元表是存储 json 的位置。这真的是一个简单的算法，它只是让我感到困惑的语法。

```
    SELECT SQL_CALC_FOUND_ROWS {$wpdb->posts}.ID
    FROM {$wpdb->posts} 内连接 {$wpdb->postmeta}
    MID(CAST({$wpdb->postmeta}.meta_value AS CHAR),
    POSITION(';s:6:\"weight' IN CAST({$wpdb->postmeta}.meta_value AS CHAR) ),10 ) AS dres
    开启（{$wpdb->posts}.ID = {$wpdb->postmeta}.post_id）
    其中 1=1
    和 {$wpdb->posts}.post_type = 'dog'
    AND ({$wpdb->posts}.post_status = 'publish')
    和 {$wpdb->postmeta}.meta_key = '_meta_general'
    AND POSITION(';s:6:"weight' IN CAST({$wpdb->postmeta}.meta_value AS CHAR)) > 0
    GROUP BY {$wpdb->posts}.ID ORDER BY dres ASC LIMIT 0, 10

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:55:24.313

您不能在 WHERE 子句中使用列别名——更重要的是，在某些情况下，那些表达式总是评估为 TRUE，所以我根本不明白为什么会有。

也许你的意思是：

```
SELECT SQL_CALC_FOUND_ROWS 
_posts.ID
,MID(
   CAST(_postmeta.meta_value AS CHAR),
   POSITION(';s:6:\"weight' IN CAST(_postmeta.meta_value AS CHAR) ),
   10
) AS dres  
FROM _posts 
INNER JOIN _postmeta ON (_posts.ID = _postmeta.post_id)
WHERE 1=1
AND _posts.post_type = 'dog' AND _posts.post_status = 'publish'
AND _postmeta.meta_key = '_meta_general'
AND POSITION(';s:6:\"weight' IN CAST(_postmeta.meta_value AS CHAR)) > 0
GROUP BY dres ORDER BY _postmeta.meta_value ASC LIMIT 0, 10 
```

# java - 如何发布 Web 服务和数据库

> ID：15056411
> 
> 赞同：0
> 
> 时间：2013-02-24T20:40:38.167
> 
> 标签：java, android, mysql, eclipse, web-services

** ..我通过 Eclipse 和 android 应用程序创建数据库 mysql 和 Web 服务，并将其发布在本地网络的 tomcat 7 上。我需要知道它是否可以通过 Internet 发布我的数据库和 Web 服务。即（我需要我的安卓应用程序访问数据库和在线网络服务）。

我正在使用 tomcat 7 android 2.3.3 eclipse juno**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:53:28.687

我不知道“通过互联网发布”是什么意思。我猜您想将您的 Web 服务部署在 Internet 上可见的服务器上，并且您希望以安全的方式为该服务提供对 MySQL 数据库的访问权限，但不要让不需要的用户访问它。

您可以尝试使用[Amazon Web Services](http://aws.amazon.com/)以低成本开始。您只需为您使用的那种方式付费。与他们建立一个 EC 帐户并安装 Tomcat 和 MySQL。

# javascript - 使用 span id 值作为条件 javascript

> ID：15056417
> 
> 赞同：0
> 
> 时间：2013-02-24T20:41:21.583
> 
> 标签：javascript

我在 html 正文中有这个跨度：

```
<span id="username_status"></span> 
```

sql查询片段：

```
if($exist > 0)
    {
    echo 'Sorry, That username is Taken!'; //value in username_status
    }
    else{
    echo 'Username available!'; //value in username_status
    } 
```

我正在尝试使用查询结果生成表单验证警报：

```
var s1 = document.getElementById('username_status').innerHTML;
 if (s1 === "Sorry, That username is Taken!")
  {
  alert("Please Change Your Username. It is already used.");
  return false;
  }
} 
```

我已经广泛搜索，但看起来我什么也没得到。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:48:24.327

您可以返回状态代码，而不是返回消息，例如`status:success`.

我认为你应该发送一个ajax请求来处理这个，如果你想使用javascript：

Javascript（我假设你使用 jQuery）：

```
$.post("your-php-file.php",{username:"some-username"},function(data){
   if(data.status == "success"){
        alert("This username is available");
   }
   else{
        alert("This username is already in use.");
   }
}); 
```

PHP：

```
if($exist > 0){
   $res['status'] = "success";
}
else{
   $res['status'] = "failed";
}
echo json_encode($res); 
```

# android - 从特定联系人的收件箱中读取消息

> ID：15056419
> 
> 赞同：1
> 
> 时间：2013-02-24T20:41:54.900
> 
> 标签：android, sms, inbox

我想从收件箱中读取短信。在这里，我想阅读特定的消息。假设 mark 给我发了一条消息，我只想进行一个查询，该查询将返回仅指示 Mark 消息的光标。我尝试过类似的方法，但它对我不起作用

```
Cursor cursor = contentResolverSender.query(
            Uri.parse("content://sms/inbox"), null,"address =?"
            ,smsNo, null); 
```

# c# - C# - 单击时更改相邻按钮的颜色

> ID：15056420
> 
> 赞同：0
> 
> 时间：2013-02-24T20:41:55.557
> 
> 标签：c#

好的，假设我们有按以下形式排列的按钮 5x5

```
[11] [12] [13] [14] [15]
[21] [22] [23] [24] [25]
[31] [32] [33] [34] [35]
[41] [42] [43] [44] [45]
[51] [52] [53] [54] [55] 
```

例如，如果我单击按钮 34，来更改按钮 24、44、33 和 35 的颜色。问题是当我单击按钮返回任何这些值时，我不知道该怎么做. 拿一个我想做的伪代码。

```
When I press the button [i, j]:
Change color of button[i-1, j];
Change color of button[i +1, j];
Change color of button[i, j +1];
Change color of button[i, j-1]; 
```

因此，当我按下一个按钮时，我需要以某种方式获取该按钮的值 i、j 并且我可能会处理相同样式的其他按钮（i +1、j 等）

我可以分别对待每个按钮......

```
private void button1_Click(object sender, EventArgs e)
{ // change colors
}
 private void button2_Click(object sender, EventArgs e)
{ // change colors
}
 private void button3_Click(object sender, EventArgs e)
{ // change colors
}
....
 private void button25_Click(object sender, EventArgs e)
{ // change colors
} 
```

，.....但是我有 25 个按钮，我不想在所有 25 个键中编写相同的代码。

我想要的是：

```
 private void button[i][j]_Click(object sender, EventArgs e)
{ 
 button[i+1][j].BackColor = Color.Red;
 button[i][j+1].BackColor ...... etc. etc.  
  // I know is incorrect, but is just how I want to act, if you understand me.
} 
```

原谅我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:56:25.723

I think the most elegant solution is to use `TableLayoutPanel` to arrange all the buttons. Then you can handle all the buttons this way:

```
 private void button_Click(object sender, EventArgs e)
        {
            Button clickedBtn = sender as Button;
            var cp = tableLayoutPanel1.GetCellPosition(clickedBtn);

            Button up = (Button)tableLayoutPanel1.GetControlFromPosition(cp.Column, cp.Row - 1);
            //up.Color = ...
            Button down = (Button)tableLayoutPanel1.GetControlFromPosition(cp.Column, cp.Row + 1);
            //etc
        } 
```

Dont' forget to check if column/row is not null before subtracting 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:45:38.030

您可以将 Tag 属性设置为数字，然后在常见的单击方法中，您可以执行以下操作：

```
int i = Math.Floor(((int)sender.Tag) / 10);
int j = ((int)sender.Tag) - i; 
```

或者你可以使用数组。

# mysql - OneToOne 即使在 Cascade All 上也无法删除

> ID：15056424
> 
> 赞同：1
> 
> 时间：2013-02-24T20:42:21.467
> 
> 标签：mysql, hibernate, jpa

尝试删除 onetoone 时遇到问题。因此，我想删除与 PageImage 具有一对一关系的“Page”对象，但如果失败，并告知由于“PAGE_IMAGES__PAGES_FK”而这是不可能的。

现在，我真的不明白这里有什么问题，我正在使用级联。

休眠 4.1 + Spring 3.1 + Mysql

```
@Entity
@Table(name = "PAGES")
public class Page
....
@NotNull
@BatchSize(size = 200)
@OneToOne(mappedBy = "page", fetch = FetchType.LAZY, cascade = CascadeType.ALL, optional = false)
public PageImage getImage() {
    return image;
}
....

@Entity
@Table(name = "PAGE_IMAGES"

@NotNull
    @OneToOne(fetch = FetchType.LAZY, optional = false)
    @JoinColumn(name = "PAGE_ID", nullable = false, updatable = false)
    @ForeignKey(name = "PAGE_IMAGES__PAGES_FK")
    public Page getPage() {
        return page;
    } 
```

`entityManager.remove(myPage);`失败并出现异常“约束失败”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-24T20:13:21.007

在您的映射中，PageImage 是关系的所有者，因为 mappedBy = "page"

因此，您有： page 引用 pageImage pageImage 引用 page

您尝试删除孩子因此例外。如果您尝试删除 pageImage 它很可能会起作用。

# android - 播放循环配乐

> ID：15056426
> 
> 赞同：1
> 
> 时间：2013-02-24T20:42:33.237
> 
> 标签：android, android-mediaplayer

我正在制作一个游戏，我希望有一个歌曲列表在后台播放，并在它们全部播放完后循环播放。为此，我循环创建`MediaPlayer`s 并调用`setNextMediaPlayer`列表中的下一个玩家，除非它是最后一项；然后我将其设置回列表中的第一项。这可行，但是当它循环并尝试再次播放第一首歌曲时，它告诉我我`play()`在无效状态下调用了。所以我添加了一个，`OnCompleteListener`所以当一首歌结束时我`prepare()`再次调用它，但这并没有帮助。我需要对`MediaPlayer`已经结束的游戏做些什么才能让它再次播放？

-= UPDATE =- 这是我的初始化代码`MediaPlayers`（减去 try 和 catch，因为这只会把它弄乱）：

```
String[] assets = manager.list("songs");
Collections.shuffle(Arrays.asList(assets));

for(String name : assets)
{
    MediaPlayer player = new MediaPlayer();
    AssetFileDescriptor descriptor = manager.openFd("songs/"+name);

    player.setAudioStreamType(AudioManager.STREAM_MUSIC);
    player.setDataSource(descriptor.getFileDescriptor(), descriptor.getStartOffset(), descriptor.getLength());
    player.setOnCompletionListener(_reset);
    player.prepare();

    if(_songs.size() > 0)
    {
        _songs.get(_songs.size() - 1).setNextMediaPlayer(player);
    }

    _songs.add(player);
}

_songs.get(_songs.size() - 1).setNextMediaPlayer(_songs.get(0)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:59:55.343

如果在`prepare`内部调用后遇到相同的错误`onCompleteListener`，可能是因为 next `MediaPlayer`（现在未准备好）被调用 before `onCompleteListener`。

我会建议一种不同的方法，可以解决您的问题并且也更有效：

*   在某些数据结构中维护歌曲的顺序，例如，`Circular Linked List`你给它当前歌曲名称，它给你下一首
*   准备并开始播放第一首歌曲
*   覆盖`onPrepared`并从您的数据结构中获取下一首歌曲名称，然后`setNextMediaPlayer`使用新创建和准备好的`MediaPlayer`对象调用

我相信这种方法更有效，因为您不会`MediaPlayer`提前创建很多实例。此外，您`nextMediaPlayer`每次开始播放当前歌曲时都会提供一个准备好的。

# java - 选择联接表中没有特定记录的记录

> ID：15056431
> 
> 赞同：0
> 
> 时间：2013-02-24T20:42:38.497
> 
> 标签：java, mysql, many-to-many, criteria-api

您好我正在尝试从一个表中选择记录，该表在连接的多对多表中没有具有特定值的记录。

我将在示例表上进行解释：

```
documentation:
id_documentation
irrelevant_data

user:
id_user
irrelevant_data

documentation_user:
id_documentation
id_user
role 
```

我想要实现的是选择每个没有特定角色的用户的文档。有任何想法吗？

主要问题是我使用 java 的 CriteriaBuilder 来创建查询，所以使用子查询是不可能的（我认为）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:08:17.030

主要问题不存在 - Criteria API 确实有[SubQuery](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/Subquery.html)。查询本身选择 User 的实例并使用[not](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#not%28javax.persistence.criteria.Expression%29) [in](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#in%28javax.persistence.criteria.Expression%29)构造来限制基于子查询的结果。子查询选择通过 DocumentationUser 连接到具有特定角色的文档的所有用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:24:13.813

您可以使用以下方法对左连接添加限制：`createAlias(java.lang.String, java.lang.String, int, org.hibernate.criterion.Criterion)`方法，请参阅[API](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/Criteria.html#createAlias%28java.lang.String,%20java.lang.String,%20int,%20org.hibernate.criterion.Criterion%29)。

查看[此](https://stackoverflow.com/a/11092067/1613867)答案以获取有关如何将左联接与条件一起使用的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:02:44.083

尝试这样的事情（代码未测试）：

```
CriteriaQuery<Documentation> cq = cb.createQuery(Documentation.class);
Root<Documentation> u = cq.from(Documentation.class);
Subquery<Integer> sq = cq.subquery(Integer.class);
Root<User> su = sq.from(User.class);
sq.select(su.get("id_user"));
Join<User, DocumentationUser> du = su.join("documentationUserCollection");
sq.where(cb.equals(du.get("role"), "mySpecificRole"));
cq.where(cb.not(cb.in(u.get("id_user")).value(sq))); 
```

另请参阅[SO 上的这个有用的答案](https://stackoverflow.com/questions/4483576/jpa-2-0-criteria-api-subqueries-in-expressions)。

# python - pygame.time.set_timer 混乱？

> ID：15056444
> 
> 赞同：7
> 
> 时间：2013-02-24T20:43:26.237
> 
> 标签：python, timer, pygame, clock, timing

所以，我有一个问题，无论如何我都不完全理解需要给予计时器命令的事件，它没有说在线任何地方，我搜索了几个小时。所以我只是使用了大多数人似乎使用的'USEREVENT + 1'。我不确定它是否正确，但我的计时器不工作。我是否正确使用它？这是我的代码：

```
nyansecond=462346
nyanint=0
spin=0
aftin=452345

def nyanmusic(nyansecond,nyanint,spin):
    if nyanint == 0:
        nyansound.play()
        nyanint= 1
    elif nyanint == 1:
        nyansecond = pygame.time.set_timer(USEREVENT+1,7000)
    if nyansecond < 200 and spin == 1:
        spin = 0
        nyansecond = pygame.time.set_timer(USEREVENT+1,7000)
    elif nyansecond > 6500 and nyansecond < 100000 and spin == 0:
        spin = 1
        nyansoundm.play()

    return nyansecond,nyanint,spin 
```

然后我将它定义到我实现的第二页上的代码中（效果很好）。它运行 nyansound，但在 6.5 秒（6500 毫秒）后不运行 nyansoundm。在继续学习更复杂的东西之前，我正在制作这个程序来帮助我学习 python 和 pygame 的基础知识。当我想听 nyan cat 或其他循环歌曲时，我也可以使用它，而不必去 youtube 和浪费宝贵的带宽。不过，不要担心。

哦，这是我放入循环中的代码，尽管我认为这并不重要：

```
#music
        nyansecond,nyanint,spin = nyanmusic(nyansecond,nyanint,spin) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-24T21:13:45.943

让我们回顾一下[`pygame.time.set_timer`](http://www.pygame.org/docs/ref/time.html#pygame.time.set_timer)它的作用：

> pygame.time.set_timer(eventid, 毫秒): 返回无
> 
> 将事件类型设置为每隔给定的毫秒数出现在事件队列中。在经过一定时间之前，第一个事件不会出现。
> 每个事件类型都可以附加一个单独的计时器。最好使用 pygame.USEREVENT 和 pygame.NUMEVENTS 之间的值。

`pygame.USEREVENT`and`pygame.NUMEVENTS`是常量（`24`and `32`），因此`eventid`您传递给的参数`pygame.time.set_timer`应该是 and 之间的任何`24`整数`32`。

`pygame.USEREVENT+1`是`25`，所以可以使用。

当您调用`pygame.time.set_timer(USEREVENT+1,7000)`时，带有 eventid 的事件`25`将每 7000 毫秒出现在事件队列中。你没有显示你的事件处理代码，但我猜你没有检查这个事件，你应该这样做。

如您所见，`pygame.time.set_timer`返回`None`，因此您的行

```
nyansecond = pygame.time.set_timer(USEREVENT+1,7000) 
```

没有意义，因为`nyansecond`will always be `None`，因此将其与整数进行比较

```
if nyansecond < 200 ... 
```

是没有意义的。

* * *

如果您想使用事件队列每 6.5 秒播放一次声音，只需调用`pygame.time.set_timer`一次（！）：

```
PLAYSOUNDEVENT = USEREVENT + 1
...
pygame.time.set_timer(PLAYSOUNDEVENT, 6500) 
```

并在主循环中检查此事件的事件队列：

```
while whatever: # main loop
    ...
    # event handling
    if pygame.event.get(PLAYSOUNDEVENT): # check event queue contains PLAYSOUNDEVENT 
        nyansoundm.play() # play the sound 
```

# xml - 如何使用 XStream 获取 Spring MVC 输出以将 JSON 转换为 XML

> ID：15056450
> 
> 赞同：1
> 
> 时间：2013-02-24T20:44:02.903
> 
> 标签：xml, json, rest, spring-mvc, jettison

我有一个使用该输出的 Web 应用程序，`Spring MVC (3.0.5)`当在Accept 标头中传递时。我想使用 输出，但我想使用我已经自定义的表示，而不是底层的 Java 对象。`JSON``HttpMessageConverter``application/json``XML``XStream``JSON`

我的弹簧配置看起来像

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
  <property name="messageConverters">
    <list>
      <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter" />
      <bean class="org.springframework.http.converter.StringHttpMessageConverter" />
      <bean class="org.springframework.http.converter.FormHttpMessageConverter" />
      <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter" />
      <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter" />
    </list>
  </property>
</bean> 
```

我可以添加另一个`XStreamMashaller`并`XML`从 Java 对象获取输出，但这是一种不同的表示形式，我不想努力同步这两种表示形式。我想使用`JSON`要转换为`XML`使用类似`Jettison`. 有人可以指导我获取有关如何实现此目的的链接或一些示例代码吗？

# drupal - Drupal 本地主机图像不工作

> ID：15056452
> 
> 赞同：0
> 
> 时间：2013-02-24T20:44:21.227
> 
> 标签：drupal, drupal-7

我在本地 drupal 站点上工作，但图像没有出现。我可以将它们上传到内容中，但它们在管理部分显示为断开的链接，并且根本没有显示在前端。

有没有人有任何建议或遇到过这个？

如果有帮助，我将使用带有 MAMP 和 Bootstrap 主题的核心 Drupal 7。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:49:02.920

什么显示为损坏图像的文件位置？

我假设您已经检查了文件夹（？）的目录和文件权限。

# dojo - Dijit 表单选择

> ID：15056455
> 
> 赞同：0
> 
> 时间：2013-02-24T20:44:26.800
> 
> 标签：dojo

我对此路径上的 dgrid-master/editor_more_widgets.html 测试文件有疑问：

```
https://github.com/SitePen/dgrid/blob/master/test/editor_more_widgets.html 
```

也许您应该下载整个软件包以查看该文件。无论如何，有没有办法修复“Select Store”列，这样它会显示标签而不是值，就像“FilteringSelect Store”列一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T21:10:59.013

为此，我创建了一个自定义插件。关键部分是 renderCell 函数：

```
define([
    "dojo",
    "sb",
    "put-selector/put",
    "dgrid/editor",
    "dijit/form/Select"
], function(dojo, sb, put, editor, Select){
    dojo.global.starbug.grid.columns = dojo.global.starbug.grid.columns || {};
    dojo.global.starbug.grid.columns.select = function(column){

        //populate the cell with the label or value
        column.renderCell = function(object, value, cell, options, header){
            items = column.editorInstance.getOptions();
            for (var i in items) {
                if (value == items[i].value) value = items[i].label;
            }
            put(cell, 'span.'+value.replace(/ /g, '-').toLowerCase(), value);
        };

        column.editorArgs = {
            style:'width:100%',
            labelAttr:'label',
            store:sb.get(column.from, 'select')
        };

        column = editor(column, Select, "dblclick");

        return column;
    };
}); 
```

请注意，这`sb`是我用来提供商店的自定义模块。您可以相应地对其进行修改。

# r - 将字符串拆分为 R 中的列，其中每个字符串具有可能不同数量的列条目

> ID：15056456
> 
> 赞同：6
> 
> 时间：2013-02-24T20:44:36.993
> 
> 标签：r

我有一个具有以下形式的数据框

```
pages                         count
[page 1, page 2, page 3]      23
[page 2, page 4]              4
[page 1, page 3, page 4]      12 
```

我需要做的是在逗号处拆分第一列并创建足够的新列来覆盖最长的序列。结果应该是：

```
First Page      Second Page  Third Page     Count
page 1          page 2       page 3         23
page 2          page 4       null           4
page 1          page 3       page 4         12 
```

如果 null 是零长度字符串，我很好，我可以处理剥离括号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T04:49:37.440

我的“splitstackshape”包具有解决此类问题的功能。在这种情况下，相关功能`concat.split`如下（使用 Ricardo 回答中的“myDat”）：

```
# Get rid of "[" and "]" from your "pages" variable
myDat$pages <- gsub("\\[|\\]", "", myDat$pages)
# Specify the source data.frame, the variable that needs to be split up
#   and whether to drop the original variable or not
library(splitstackshape)
concat.split(myDat, "pages", ",", drop = TRUE)
#   count pages_1 pages_2 pages_3
# 1    23  page 1  page 2  page 3
# 2     4  page 2  page 4        
# 3    12  page 1  page 3  page 4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T21:08:20.767

样本数据

```
myDat <- read.table(text=
  "pages|count
[page 1, page 2, page 3]|23
[page 2, page 4]|4
[page 1, page 3, page 4]|12", header=TRUE, sep="|") 
```

我们可以`pages`退出`myDat`来处理它。

```
# if factors, convert to characters
pages <- as.character(myDat$page)

# remove brackets.  Note the double-escape's in R
pages <- gsub("(\\[|\\])", "", pages)

# split on comma
pages <- strsplit(pages, ",")

# find the largest element
maxLen <- max(sapply(pages, length))

# fill in any blanks. The t() is to transpose the return from sapply
pages <- 
t(sapply(pages, function(x)
      # append to x, NA's.  Note that if (0 == (maxLen - length(x))), then no NA's are appended 
      c(x, rep(NA, maxLen - length(x)))
  ))

# add column names as necessary
colnames(pages) <- paste(c("First", "Second", "Third"), "Page")

# Put it all back together
data.frame(pages, Count=myDat$count) 
```

* * *

结果

```
> data.frame(pages, Count=myDat$count)
  First.Page Second.Page Third.Page Count
1     page 1      page 2     page 3    23
2     page 2      page 4       <NA>     4
3     page 1      page 3     page 4    12 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T03:17:35.517

`read.table`with`fill=TRUE`可以填写它们。`names(DF2)<-`如果漂亮的列名不重要，则可以省略该行。不使用任何包。

```
# test data

Lines <- "pages                         count
[page 1, page 2, page 3]      23
[page 2, page 4]              4
[page 1, page 3, page 4]      12"

# code - replace text=Lines with something like "myfile.dat"

DF <- read.table(text = Lines, skip = 1, sep = "]", as.is = TRUE)
DF2 <- read.table(text = DF[[1]], sep = ",", fill = TRUE, as.is = TRUE)
names(DF2) <- paste0(read.table(text = Lines, nrow = 1, as.is = TRUE)[[1]], seq_along(DF2))
DF2$count <- DF[[2]]
DF2[[1]] <- sub(".", "", DF2[[1]]) # remove [ 
```

这给出了这个：

```
> DF2
  pages1  pages2  pages3 count
1 page 1  page 2  page 3    23
2 page 2  page 4             4
3 page 1  page 3  page 4    12 
```

**注意：** 这给出了 page1、page2 等的列标题。如果在问题中准确显示列标题很重要，那么如果页面列少于 20 个，则用使用这些标题的行替换该行。

```
 ord <- c('First', 'Second', 'Third', 'Fourth', 'Fifth', 'Sixth', 'Seventh',
 'Eighth', 'Ninth', 'Tenth', 'Eleventh', 'Twelfth', 'Thirteenth',
 'Fourteenth', 'Fiftheenth', 'Sixteenth', 'Seventeenth', 'Eighteenth', 
 'Nineteenth')
ix <- seq_along(DF2)
names(DF2) <- if (ncol(DF2) < 20) paste(ord[ix], "Page") else paste("Page", ix) 
```

# android - Android 和三星 Ace 手机的 dpi 差异

> ID：15056459
> 
> 赞同：0
> 
> 时间：2013-02-24T20:45:07.080
> 
> 标签：android, dpi

规格：三星 Galaxy Ace：LCD TFT / 3.5 英寸 / 480 x 320 像素 / 164 dpi。

但：

DisplayMetrics 指标 = new DisplayMetrics(); getWindowManager().getDefaultDisplay().getMetrics(metrics);

浮动 V_dpi = metrics.densityDpi;

V_dpi = 160 但技术特性为 164。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:53:01.600

答案在[文档中`densityDpi`](http://developer.android.com/reference/android/util/DisplayMetrics.html#densityDpi)：

> 以每英寸点数表示的屏幕密度。可能是 `DENSITY_LOW`,`DENSITY_MEDIUM`或`DENSITY_HIGH`.

换句话说：它不包含实际的密度值，而是它适合的桶。因此，该值将始终为以下之一：

```
DENSITY_LOW = 120;
DENSITY_MEDIUM = 160;
DENSITY_HIGH = 240;
DENSITY_TV = 213;
DENSITY_XHIGH = 320;
DENSITY_XXHIGH = 480; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:34:47.450

你应该使用`metrics.ydpi`，`metrics.xdpi`我认为这些值更准确。

# c# - 将 C# 对象保存到文件

> ID：15056469
> 
> 赞同：3
> 
> 时间：2013-02-24T20:45:57.530
> 
> 标签：c#, class, object, serialization, save

我要在不使用数据库的情况下实现一个新的成员应用程序。我打算创建一个类来定义每个成员，其中包含定义名称、部门等的字段。我希望将这些成员的列表保存到文件中（不是纯文本）。所以我的问题是如何将类对象保存到文件中？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T20:52:50.937

我建议进行 JSON 或 XML 序列化，然后使用某种算法加密内容。我不会使用二进制序列化，因为当您需要更改程序集版本时它不是很友好。

我将以下代码与 Newtonsoft.Json（您可以在 NuGet 上获得）一起使用来完成此操作：

```
using System.IO;
using System.Security.Cryptography;
using System.Text;

using Newtonsoft.Json;

class SecureJsonSerializer<T>
    where T : class
{
    private readonly string filePath;

    private readonly ICryptoTransform encryptor;

    private readonly ICryptoTransform decryptor;

    private const string Password = "some password";

    private static readonly byte[] passwordBytes = Encoding.ASCII.GetBytes(Password);

    public SecureJsonSerializer(string filePath)
    {
        this.filePath = filePath;
        var rmCrypto = GetAlgorithm();
        this.encryptor = rmCrypto.CreateEncryptor();
        this.decryptor = rmCrypto.CreateDecryptor();
    }

    private static RijndaelManaged GetAlgorithm()
    {
        var algorithm = new RijndaelManaged();
        int bytesForKey = algorithm.KeySize / 8;
        int bytesForIV = algorithm.BlockSize / 8;
        algorithm.Key = key.GetBytes(bytesForKey);
        algorithm.IV = key.GetBytes(bytesForIV);
        return algorithm;
    }

    public void Save(T obj)
    {
        using (var writer = new StreamWriter(new CryptoStream(File.Create(this.filePath), this.encryptor, CryptoStreamMode.Write)))
        {
            writer.Write(JsonConvert.SerializeObject(obj));
        }
    }

    public T Load()
    {
        using (var reader = new StreamReader(new CryptoStream(File.OpenRead(this.filePath), this.decryptor, CryptoStreamMode.Read)))
        {
            return JsonConvert.DeserializeObject<T>(reader.ReadToEnd());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T21:09:07.050

听起来你想要[BinaryFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)。这将保存到不可读的二进制文件中。它相对于 XmlSerialization 的主要好处之一（例如）是您的属性不需要公开。

但是，我个人想劝阻您不要使用这个想法。我自己也走在这条路上，虽然在短期内很容易，但从长远来看，路上会有很多痛苦。
您将在版本控制方面遇到大量问题。每当您想更新任何对象（例如，添加新属性）时，您都必须转换所有文件。
更糟糕的是，如果您想在同一个应用程序中执行此操作，您将需要同时提供两个定义。这导致了荒谬的类定义，例如：

```
// my original object
class SavedObject
{
    public string Data{get;set}
}

// needed to add a field for last edit
class SavedObject2
{
    public DateTime LastEdit{get;set;}

    public SavedObject2(SavedObject so){}
}

// need a small restructure so we can now have multiple datas
// 'data' is now obsolete
class SavedObject3
{
    public List<string> DataList{get;set;}
    public SavedObject3(SavedObject2 so){}
} 
```

序列化作为一种​​持久性手段仅在两种情况下有效。一个您*知道*数据的定义永远不会改变（非常罕见）和：两个您只是以原始方式保存数据（例如，只是一个字符串集合，然后代码转换为类）。

我会认真考虑使用数据库。如果您不喜欢大多数生产数据库附带的管理琐事，那么请考虑使用 Sqlite，它体积小、可移植且非常容易嵌入到应用程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T20:55:35.723

那么首先你可以使用这个工具将你的类序列化为 json：[Json Net](http://james.newtonking.com/pages/json-net.aspx)

其次从您的喜好中找到任何加密工具，有很多，这里是示例：[编码为64](http://arcanecode.com/2007/03/21/encoding-strings-to-base64-in-c/)

之后，您可以保存文件：

```
 System.File.WriteAllText(@"C:\file.dat","encripted string"); 
```

# php - 上传带有特殊编码的 CSV (fgetcsv)

> ID：15056470
> 
> 赞同：0
> 
> 时间：2013-02-24T20:46:07.810
> 
> 标签：php, csv, upload, fgetcsv

我有 php 函数 fgetcsv() 的问题。

让我们从头开始。我想以 ISO 编码导出 csv 文件并上传 csv 。使用导出 csv 我没有问题，但使用上传 csv 我有。当我没有特殊字符时，此代码运行完美。如果我有希腊字符，他无法阅读并打印 NULL。如果你能找到我的解决方案！！！

谢谢你的时间 ！！！

```
$csv = array(); $keys = array();
if (($handle = fopen($uploadedcsv, "r")) !== FALSE) {          
    while (($lines = fgetcsv($handle, 0, $delimiter)) !== FALSE) {                    
        if ($row == 0) {
            utf8_encode($keys);
             utf8_encode($lines);
             mb_convert_encoding($keys,'ISO-8859-15','utf-8');
             mb_convert_encoding($lines,'ISO-8859-15','utf-8');
            $keys = $lines;                        
        } else {
            utf8_encode($keys);
             utf8_encode($lines);
             mb_convert_encoding($keys,'ISO-8859-15','utf-8');
             mb_convert_encoding($lines,'ISO-8859-15','utf-8');
            $csv[] = array_combine($keys, $lines);                        
        }                    
        $row++;
    }
    fclose($handle);` 
```

# javascript - 在 HAML 中显式调用 Javascript 函数

> ID：15056478
> 
> 赞同：0
> 
> 时间：2013-02-24T20:47:14.837
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3.1, ruby-on-rails-3.2

我在 HAML 视图中有一个 if 语句，用于检查是否有`flash[:notice]`, if 是我希望弹出一个带有通知消息的 javascript 警报框。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:06:26.133

为什么要把这个放在你的视野里？您可以在您的`application.js` *（或您的管道中任何其他包含的 JS 文件）中*使用 Javascript 来完成此操作。您确实应该避免将 Javascript 直接放入您的视图*中（这通常是不好的做法）*。以下 HAML

```
#flash= flash[:notice] 
```

会产生 HTML 之类的

```
<div id="flash">Your notice message here</div> 
```

在你的`application.js`你可以做这样的事情

```
$(function() {
  if ($('#flash').get(0)) {    // check if the div exists
    alert($('#flash').text()); // throw an alert() with the div's text
  }
}); 
```

* * *

也许这可以很好地满足您的目的，但是如果您根本不希望 Flash 消息文本出现在 HTML 中*（即，将 Flash 消息分配给附加`<head>`到`<script>`标签。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:07:45.263

这有点笨拙，但您可以`#{}`在 HAML 中的 javascript 过滤器内部使用，如下所示：

```
- unless flash[:notice].empty?
  :javascript
    alert("#{flash[:notice]}"); 
```

# javascript - 当有人点击但随后拖出按钮时会发生 Javascript

> ID：15056483
> 
> 赞同：2
> 
> 时间：2013-02-24T20:47:34.740
> 
> 标签：javascript, css, html, button

我使用 s 制作的按钮在您 onMouseOver、onMouseOut、onMouseDown 和 onMouseUp 时会发生样式更改，但是如果有人单击然后将按钮拖离按钮，则该按钮将保持 onMouseDown 状态。我尝试使用不同的 onDrag 状态，但这不是让它工作的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:49:21.723

使用`onMouseOut`.

`onMouseDown`将打开一个布尔标志，并将`onMouseOut`其`onMouseUp`关闭。

例如，`onMouseDown`代码将类似于`beingClicked = true`,`onMouseOut`并且`onMouseUp`将是`beingClicked = false`。

或者，您可以只调用`onMouseUp()`您的`onMouseOut`听众。

# android - 使用共享单例类在活动和前台服务之间进行通信是否可以接受？

> ID：15056488
> 
> 赞同：1
> 
> 时间：2013-02-24T20:48:17.480
> 
> 标签：android, service, android-activity

我有一个前台服务正在处理来自位置管理器的 gps 位置。我将这些存储在一个通用的“位置控制器”单例中。目前我的活动也在访问这个类。这可以接受吗？它似乎比使用处理程序消息更有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:50:21.683

只要您*非常*确定不会引入任何内存泄漏，这并没有什么真正的问题。其他现有的消息总线解决方案，如`LocalBroadcastManager`（来自 Android 支持库）、[Otto](http://square.github.com/otto/)和 kin 在幕后使用单例。

我建议您使用`LocalBroadcastManager`Otto 或其他东西，而不是自己滚动，因为它们得到了更好的支持和测试。吨

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:05:04.980

对于这种特殊情况，由于您希望频繁更新位置，因此应将其传达给`activity`; 我会说`bind`定位服务可能是一个更合适的解决方案。

所以基本上，在您的活动中，`onResume`您`bind`向服务传递一个`listener`对象，`service`只要存在位置更新，就会调用该对象。此外，您应该`unbind`使用`onPause`.

请注意在绑定**之前***启动*服务，以便在活动不再处于前台时继续运行。

 **我有非常相似的案例，这个解决方案效果很好，它使您能够添加一个`service`类似的方法`getLastLocation()`，可以按需从活动中调用。**

# sockets - DatagramPacket 可以接收数据吗？

> ID：15056490
> 
> 赞同：0
> 
> 时间：2013-02-24T20:48:28.977
> 
> 标签：sockets, udp, packet, datagram

我正在阅读我的教科书，我看到了这个：

```
The first constructor:

public Datagrampacket (byte ibuf [], int ilength)

constructs a DatagramPacket for receiving packets of length ilength. 
```

这只是一个奇怪的措辞，还是 DatagramPacket 实际上在发送数据的同时接收数据？我一直认为 DatagramPackets 只是包含您将在 DatagramSockets 之间发送的信息的类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:05:10.953

`DatagramPacket`不发送或接收数据。相反，它被 by`DataSocket`以两种方式使用。

*   它用于`DatagramSocket.receive(DatagramPacket packet)`填充`packet`一些接收到的数据，
*   或者它用于`DatagramSocket.send(DatagramPacket packet)`发送包含在 中的数据`packet`。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:53:12.823

检查Javadoc。DatagramPackets 用于发送和接收。请参阅 DatagramSocket.receive()。

# android - Android ListView：滚动条旁边的垂直线

> ID：15056497
> 
> 赞同：0
> 
> 时间：2013-02-24T20:49:53.750
> 
> 标签：android, layout, android-listview

我正在寻找一种方法让我的 ListView 看起来像这样：

![带有垂直线的列表视图](../Images/55a36251b50db65324a1a4e68c3e7322.png)

也就是说，除了自定义滚动条轨道和拇指（可以通过`android:scrollbarTrackVertical`和`android:scrollbarThumbVertical`属性指定）之外，我还需要垂直滚动条旁边的垂直装饰线，它永远不会淡出。

我尝试将该行添加到指定为 9patch 的可绘制对象中`android:scrollbarTrackVertical`，但似乎滚动条始终位于可绘制对象的中间（是吗？），因此它错过了它的“轨道”。此外，可绘制的轨道水平重复，因此最终滚动呈现在垂直线的左侧。

我现在所知道的是，我可以通过将 ListView`android:fadeScrollbars`属性设置为`false`.

不知道如何使垂直线正确渲染。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:24:38.520

您可以为您的列表视图定义一个自定义行，并定义一个细垂直条纹，作为一些图像或任何你想要的，作为背景或任何你想要的，在结束之前正确对齐，以确保它在滚动条之前。

这会产生一种连接的、右对齐的垂直线的错觉。

# c# - web.config>configuration>runtime>assemblyBinding 中生成的条目的含义/原因是什么？

> ID：15056499
> 
> 赞同：59
> 
> 时间：2013-02-24T20:50:12.730
> 
> 标签：c#, asp.net, web-config, assemblybinding

我已经在我的 web.config 文件中注意到这一部分有一段时间了，我现在正试图弄清楚它的确切目的是什么：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

所以，第一个条目似乎说：

> System.Web.Helpers 是具有公钥标记的依赖程序集的名称`31bf3856ad364e35`。将版本 1.0.0.0 到 2.0.0.0 重定向到版本 2.0.0.0。

我最好的猜测是，这意味着在 ASP.NET 运行时上下文中执行的任何代码都依赖于具有指定名称的程序集，该程序集也具有指定范围内的版本，就好像它是使用指定版本编译的一样指定的公钥。

这是否意味着如果我有一个依赖于类库的 Web 项目，并且该类库引用了具有 bindingRedirect 的旧版本的程序集，那么代码将像针对新版本编译一样执行？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-24T21:13:56.253

> 这是否意味着如果我有一个依赖于类库的 Web 项目，并且该类库引用了具有 bindingRedirect 的旧版本的程序集，那么代码将像针对新版本编译一样执行？

你说得对（我只想说“......代码将像引用新版本一样执行”），请参阅[http://msdn.microsoft.com/en-us/library/7wd6ex19%28v=vs .110%29.aspx](http://msdn.microsoft.com/en-us/library/7wd6ex19%28v=vs.110%29.aspx)

> “当您针对特定版本的强名称程序集构建 .NET Framework 应用程序时，该应用程序会在运行时使用该程序集版本。但是，有时您可能希望该应用程序针对较新版本的程序集运行。 "

# ruby-on-rails - 在使用 Carrierwave 上传到 s3 之前，如何将空格转换为下划线？

> ID：15056500
> 
> 赞同：1
> 
> 时间：2013-02-24T20:50:20.580
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave

我有一个 Rails 项目，我使用 Carrierwave 将文件上传到 Amazon s3。

当我上传包含空格的文件时，我的编辑操作出现`bad URI(is not URI?)`错误，例如`File Name.mp3`. 在上传到 s3 之前，如何将文件名中的空格转换为下划线？

是否有我在文档中找不到的配置选项，或者我是否需要创建一个方法来执行此操作？

**更新：**

[这是我的上传](https://gist.github.com/leemcalilly/5025757)者/track_uploader.rb：https://gist.github.com/leemcalilly/5025757

这是我将文件附加到的模型：[https ://gist.github.com/leemcalilly/5025731](https://gist.github.com/leemcalilly/5025731)

这是我的控制器：[https ://gist.github.com/leemcalilly/5025765](https://gist.github.com/leemcalilly/5025765)

请注意，当我`"#{original_filename}".underscore`在上传器中使用文件时，文件上传正常，但它不会转换文件名，它只是将原始文件名与空格一起保留，如下所示：[https ://www.evernote.com/shard/s3/sh/ c5a08968-6f6d-4de8-a768-830a378572bc/10ee719307f3c587b531a37868127209](https://www.evernote.com/shard/s3/sh/c5a08968-6f6d-4de8-a768-830a378572bc/10ee719307f3c587b531a37868127209)

如果我使用`"#{filename}".underscore`我会得到一个`stack level too deep`错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:42:36.230

上传者/track_uploader.rb：

```
def filename
  "#{@original_filename}".gsub(/\s+/, '_')
end 
```

用下划线替换任何空白字符。或者，您可以使用`/\W+/`匹配非单词字符（不是字母、数字或下划线）。

请记住，此方法除了生成基于“@original_filename”的字符串之外什么也不做。您仍然必须设置文件名属性。

您是否尝试过以下操作？

```
def fix_filename
  @original_filename.gsub!(/\s+/, '_')
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:51:59.720

尝试使用`parameterize`方法。这种方法会使`uri`人友好`uri`。

例如：

```
>> "http://songs.com/my file.mp3".parameterize
=> #<ActiveSupport::Multibyte::Chars:0xef4eb5c @wrapped_string="http-songs-com-my-file-mp3">
>> "http://songs.com/my file.mp3".parameterize.to_s
=> "http-songs-com-my-file-mp3" 
```

# php - 无法在 PHP 中获取内容

> ID：15056503
> 
> 赞同：0
> 
> 时间：2013-02-24T20:50:48.220
> 
> 标签：php

我有这个功能：

```
function get_vk($url) {
    $str = file_get_contents("http://vk.com/share.php?act=count&index=1&url=" . $url);
    if (!$str) return 0;
    return preg_match('/^VK.Share.count\((\d+),\s+(\d+)\);$/i', $rq, $i) ? (int) $i[2] : 0;
} 
```

但是这个函数总是返回 0，因为`$str`是 NULL。但是如果我们只是把这个链接

```
https://vk.com/share.php?act=count&index=1&url=http://stackoverflow.com 
```

进入浏览器会返回`VK.Share.count(1, 43);`问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:52:32.603

您没有将输入字符串传递给 preg_match。

代码应该这样写：

```
function get_vk($url) {
    $str = file_get_contents("http://vk.com/share.php?act=count&index=1&url=" . $url);
    if (!$str) return 0;
    preg_match('/^VK.Share.count\((\d+),\s+(\d+)\);$/i', $str, $matches);
    $rq = $matches[1];

    return $rq;
}

echo get_vk('http://stackoverflow.com'); 
```

[您可以在http://php.net/preg_match](http://php.net/preg_match)阅读 preg_match 的语法。

# android - 具有特定值的进度条

> ID：15056505
> 
> 赞同：0
> 
> 时间：2013-02-24T20:51:03.363
> 
> 标签：android, android-progressbar

我想设计和实现一个进度条。但我有一些问题。

我的进度条**布局**是这样的

```
<ProgressBar
    android:id="@+id/progress1"
    style="@android:style/Widget.ProgressBar.Horizontal"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="5dp"
    android:max="100"
    android:maxHeight="5sp"
    android:progress="45" /> 
```

**我的活动.java**

```
ProgressBar pb1 = (ProgressBar) findViewById(R.id.progress1); 
```

我的问题是关于`android:max`. 有没有办法根据用户的选择来改变它。例如，用户可能希望将最大值设置为 1500。我想用纯文本来做。（用户必须以纯文本形式输入他/她的值）。

我如何在java端实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:01:39.253

```
ProgressBar pb1 = (ProgressBar) findViewById(R.id.progress1);
pb1.setMax(1500); 
```

您可以在 an 中从用户那里获取值，然后从using`EditText`将其转换为 an 。然后只需将其传递给方法以更改最大值。`int``String``Integer.parseInt()``int``setMax()`

# android - 我应该使用内容提供者吗？

> ID：15056506
> 
> 赞同：6
> 
> 时间：2013-02-24T20:51:08.347
> 
> 标签：android, sqlite, android-contentprovider

我正在阅读来自 android 的内容提供商的官方文档，我看到了这个：

> **确定您是否需要内容提供者。**
> 
> 如果要提供以下一项或多项功能，则需要构建内容提供程序：
> 
> *   您想向其他应用程序提供复杂的数据或文件。
> *   您希望允许用户将复杂数据从您的应用程序复制到其他应用程序。
> *   您想使用搜索框架提供自定义搜索建议。
> *   如果使用完全在您自己的应用程序中，则不需要提供程序来使用 SQLite 数据库。

我正在开发一个应用程序，当位置通过 IntentService 发生变化时，它会在后台同步数据。

我所看到的是，使用 ContentProvider，您可以观察到我真正想要的数据何时发生变化，而用户不会注意到它。它在 IntentService 中发生变化，MainActivity 观察到这种变化，当它被通知时，布局内容发生变化

尽管他们甚至没有提到这一点，但使用 ContentProvider 是个好主意吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-24T21:14:00.247

就个人而言，过去一年半以来，我一直在我的所有项目中使用 ContentProviders。它们提供了良好的、独立于数据库的数据抽象来访问您的数据。它们非常灵活，我什至有一个游戏项目，其中一个 URI 指向 SharedPreference，而所有其他 URI 都指向访问数据库表。ContentProviders 还允许您使用已经构建的框架基础设施，例如 CursorLoaders。从接口和抽象类实现你自己的并不难，但它可能很耗时且容易出错，能够利用已经尝试和测试的工作是一个很大的优势。

顺便说一句，我记得大约 2 周前在 google+ 上的一篇帖子中同样的问题，Cyril Mottier 给出了一个非常好的答案。你可以在[这里](https://plus.google.com/114417472700474059050/posts/bSTeoVBjM4m)阅读。

# php - 致命错误：使用 HMVC + MY_Controller + Frontend_Controller + Admin_Controller 时无法重新声明类 CI

> ID：15056509
> 
> 赞同：2
> 
> 时间：2013-02-24T20:51:16.510
> 
> 标签：php, codeigniter, controller, codeigniter-2, hmvc

MY_Controller.php（应用程序/核心）：

```
<?php 
class MY_Controller extends CI_Controller
{

    public $data = array();
    function __construct()
    {
        parent::__construct();
        $this->data['errors'] = array();
        $this->data['my_site_name'] = config_item('site_name');

    }
} 
```

Frontend_Controller.php（应用程序/库）

```
<?php 
class Frontend_Controller extends MY_Controller
{

    function __construct()
    {
        parent::__construct();

    }
} 
```

pages.php（应用程序/控制器）

```
 class Pages extends Frontend_Controller {

        function __construct()
        {
            parent::__construct();

            $this->load->model('app_model');

        }

        public function index()
        {

            $this->view_data['main_content'] = 'frontpage';
            $this->load->view('template', $this->view_data);
            }       
  } 
```

pages 在路由中被设置为默认路由，如果我尝试加载一个名为 testmodule 的 HMVC 模块，`http://localhost/testmodule`它就可以正常工作。

但是，当我想回显这个模块时（索引方法只包含一行

`echo "Welcome from testmodule!";`） 喜欢：

```
<div class="page">

    <?php $this->load->view('includes/block_left') ?>

    <div id="content">
        <div>
            <?php 
                echo modules::run('testmodule');
            ?>
            <?php  $this->load->view('articles_new'); ?>
        </div>
    </div><!-- /content -->

</div> 
```

我收到此错误：

```
Fatal error: Cannot redeclare class CI in C:\wamp\www\application\third_party\MX\Base.php on line 57 
```

**编辑：**

如果我试图改变

```
class MY_Controller extends CI_Controller 
```

至

```
class MY_Controller extends MX_Controller 
```

我收到了这个错误：

```
An Error Was Encountered

Unable to load the requested file: 
```

知道出了什么问题吗？;(

# iphone - 将“float”传递给不兼容类型的“float*”

> ID：15056514
> 
> 赞同：-2
> 
> 时间：2013-02-24T20:52:00.510
> 
> 标签：iphone, ios, objective-c, xcode, vector

我正在尝试使用方法 GLKVector3MakeWithArray 创建一个向量。

我收到以下错误，我有点困惑为什么“将'float'传递给'float *'的不兼容类型”

这是我的代码：

```
 [self.offsetArray addObject:[jsnmphset valueForKey:@"offset"]];

    // Create a Vector3f from the array offset stored in the nsdictionary
    GLKVector3 offset = GLKVector3MakeWithArray([[self.offsetArray objectAtIndex:0] floatValue]); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:57:47.547

GLKVector3MakeWithArray 定义如下：

```
GLKVector3 GLKVector3MakeWithArray( float values[3] ); 
```

它需要一个包含三个浮点值的数组。您正在调用它，就好像它是这样定义的：

```
GLKVector3 GLKVector3MakeWithArray( float value ); 
```

您正在传递一个浮点值。

您将需要执行以下操作：

```
float values[3];

values[0] = [[self.offsetArray objectAtIndex:0] floatValue];
values[1] = [[self.offsetArray objectAtIndex:1] floatValue];
values[2] = [[self.offsetArray objectAtIndex:2] floatValue];

GLKVector3 offset = GLKVector3MakeWithArray( values ); 
```

现在，是否正确设置了“*值*”取决于您的具体情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T20:56:35.373

该`GLKVector3MakeWithArray`函数期望参数的类型为`float[3]`。但是您正在尝试传递单个`float`值。

从数组的元素创建正确的参数。

# android - 如何在 Android/Eclipse 中结合无广告和支持广告的项目？

> ID：15056517
> 
> 赞同：0
> 
> 时间：2013-02-24T20:52:36.257
> 
> 标签：android, eclipse, project, targets

我有一个广告支持的应用程序。我想做一个无广告的版本。为此，我会从 XML 文件中删除广告，更改清单（不需要互联网连接），我不知道，但我可能需要删除 SDK。代码方面，我认为可以使用布尔值轻松处理它，该布尔值说明是否启用了广告。

但是什么 XML 文件、SDK 和 Android 清单？有没有一种方便的方法来处理这个问题？

# php - 解码 JSON + PHP 的问题

> ID：15056520
> 
> 赞同：3
> 
> 时间：2013-02-24T20:52:38.717
> 
> 标签：php, json

我的 php 脚本为 JSON 提供了这个字符串（例如）：

{"时间":"0:38:01","kto":"\u00d3\u00e1\u00e8\u00e2\u00f6\u00e0 \u00c3\u00e5\u00ed\u00e5\u00f0\u00e0\u00eb\u00ee\u00e2", "混乱":"\u00c5\u00e4\u00e8\u00ed\u00fb\u00e9: *mm"}

jQuery 代码通过 JSON 获取这个字符串：

```
$.getJSON('chat_ajax.php?q=1',
    function(result) {
    alert('Time ' + result.time + ' Kto' + result.kto + ' Mess' + result.mess);
    }); 
```

浏览器展示：

```
0:38:01 Óáèâöà Ãåíåðàëîâ
Åäèíûé: *mm 
```

如何将此字符串解码为西里尔字母？

尝试使用：

```
<META http-equiv="content-type" content="text/html; charset=windows-1251"> 
```

但没有任何改变

PHP代码：

```
 $res1=mysqli_query($dbc, "SELECT * FROM chat ORDER BY id DESC LIMIT 1");
   while ($row1=mysqli_fetch_array($res1)) {
       $rawArray=array('time' => @date("G:i:s", ($row1['time'] + $plus)), 'kto' => $row1[kto], 'mess' => $row1[mess]);
       $encodedArray = array_map(utf8_encode, $rawArray); 
       echo json_encode($encodedArray); 
```

PHP 版本 5.3.19

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:26:15.630

`\uXXXX`代表**unicode**字符，在 unicode`00d3`中是`Ó`等等。Unicode 字符是明确的，因此页面的字符编码将被忽略。您可以使用正确的 unicode（即`\u0443`for `У`）或编写脚本，以便它输出 Windows-1251 中的真实字符，而不是 unicode 序列。

**更新**

我从您的评论中看到您从 MySQL 获取此数据并用于`json_encode()`输出它。`json_encode`仅适用于 UTF-8 编码的数据（并且`d3`也是`Ó`UTF-8，这就是为什么你得到错误的 unicode 序列的原因）。

因此，您必须先将所有数据从 Windows-1251 转换为 UTF-8 **，**然后再将其传递给`json_encode`，然后其他一切都会正常工作。

转换：

```
$utf8Array = array_map(function($in) {
    return iconv('Windows-1251', 'UTF-8', $in);
}, $rawArray); 
```

`utf8_encode`将不起作用，因为它仅对 ISO-8859-1 编码的输入有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-30T14:31:56.757

在 MySQL BDD 中存储 json 数据时我遇到了类似的问题：这解决了问题：

json_encode($json_data, JSON_UNESCAPED_UNICODE) ;

# jquery - 如何在jquery中查找元素的文本

> ID：15056524
> 
> 赞同：1
> 
> 时间：2013-02-24T20:52:55.490
> 
> 标签：jquery

您好，我有这样的 html 标记：

```
<div class="expandNode expand">
<input id="100" type="checkbox" value="100" data-parent="">
<span>Office/Commercial</span>
</div> 
```

当我这样做时，在控制台中`$('#100')`我得到了这个：

```
[<input id=​"100" type=​"checkbox" value=​"100" data-parent>​] 
```

我需要的是跨度内的文本，即办公/商业。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T20:54:43.070

尝试：

```
$('#100').next('span').text(); 
```

或者像：

```
$('.expandNode span').text();   // not suggested 
```

此外，输入标签需要关闭，但我仍然不建议对 ID 元素使用数字（ < HTML5 ）

**实现相同目标的更灵活和面向未来的方法是：**

```
$('#100').closest('.expandNode').find('span').text(); 
```

此外，如果您确定`<span>`父元素内只有一个，您可以选择：

```
$('#100').siblings('span').text(); 
```

这样你就不必依赖`span`成为直接的`.next()`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:55:29.780

试试这个 ：

```
$("#100").next('span').text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T21:00:47.370

你可以修改你的 span 给它一个 ID 或类（可选）：

```
<span class="expand-span">Office/Commercial</span> 
```

然后使用这个 jQuery 代码找到它：

```
$('.expandNode').children('.expand-span'); 
```

如果你不想给你的跨度一个类或 ID，你可以使用：

```
$('.expandNode').children('span'); 
```

# php - 将php数组插入mysql表

> ID：15056528
> 
> 赞同：5
> 
> 时间：2013-02-24T20:53:16.467
> 
> 标签：php, mysql, arrays, database

更新：我忘了提到 echo`$matstring`输出`'65.70', 'Coles','34 days','14'`- 这似乎是正确的语法？

我是一个 php/mysql 新手，我认为这是相当基本的，但是在阅读了关于这个主题的所有其他 stackoverflow 问题并摆弄我的代码的不同版本几个小时后，我无法理解我在做什么错误的。非常感谢任何帮助/建议。

目标：将数据从我的 php 数组 ( `$matrix`) 传递到 mysql 表中

```
$matrix[1]=
( [0] => 65.70 [1] => Coles [2] => 34 days [3] => 14 )

$matrix[2]=
( [0] => 62.70 [1] => Coles [2] => 13 days [3] => 14 )

$matrix[3]=
( [0] => 12.70 [1] => Safeway [2] => 43 days [3] => 14 ) 
```

代码：

```
$matstring=implode("','",$matrix[1]);
$matstring="'".$matstring."'";
mysql_query('INSERT INTO Australia (Price, Company, Days, Weight) VALUES ('$matstring')'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:25:03.500

当我运行此代码时：

```
$matrix = array();
$matrix[1] = array( 0 => 65.70, 1 => 'Coles', 2 => '34 days', 3 => 14 );
$matstring=implode("','",$matrix[1]);
$matstring="'".$matstring."'";
print "INSERT INTO Australia (`Price`, `Company`, `Days`, `Weight`) VALUES ($matstring)"; 
```

成为结果：

```
INSERT INTO Australia (`Price`, `Company`, `Days`, `Weight`) VALUES ('65.7','Coles','34 days','14') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:03:05.873

**更正的代码：**

```
$matstring=implode("','",$matrix[1]);

mysql_query("INSERT INTO Australia (Price, Company, Days, Weight) VALUES ('$matstring')"); 
```

**（即从原始代码中删除第二行并在mysql_query的参数周围加上双引号）**

感谢 user1847757 的帮助 - 正如他/她指出的那样，`$matstring`它本身是正确的，但是其中的单引号`VALUES(' ')` 被加入到`$matstring`我原始代码第二行中添加的单引号中，导致`VALUES(''65.70','Coles','34 days','14'')`

感谢大家的帮助和建议

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-21T11:30:30.357

```
$arr = array(
'Afghanistan',
'Albania',
'Algeria',
'American Samoa',
'Andorra',
'Angola',
'Anguilla',
'Antarctica',
'Antigua and Barbuda',
'Argentina',
'Armenia',
'Aruba',
'Australia',
'Austria',
'Azerbaijan',
'Bahamas',
'Bahrain',
'Bangladesh',
'Barbados',
'Belarus',
'Belgium',
'Belize',
'Benin',
'Bermuda',
'Bhutan',
'Bolivia',
'Bosnia and Herzegovina',
'Botswana',
'Bouvet Island',
'Brazil',
'British Indian Ocean Territory',
'Brunei Darussalam',
'Bulgaria',
'Burkina Faso',
'Burundi',
'Cambodia',
'Cameroon',
'Canada',
'Cape Verde',
'Cayman Islands',
'Central African Republic',
'Chad',
'Chile',
'China',
'Christmas Island',
'Cocos (Keeling) Islands',
'Colombia',
'Comoros',
'Congo',
'Cook Islands',
'Costa Rica',
'Croatia (Hrvatska)',
'Cuba',
'Cyprus',
'Czech Republic',
'Denmark',
'Djibouti',
'Dominica',
'Dominican Republic',
'East Timor',
'Ecuador',
'Egypt',
'El Salvador',
'Equatorial Guinea',
'Eritrea',
'Estonia',
'Ethiopia',
'Falkland Islands (Malvinas)',
'Faroe Islands',
'Fiji',
'Finland',
'France',
'France, Metropolitan',
'French Guiana',
'French Polynesia',
'French Southern Territories',
'Gabon',
'Gambia',
'Georgia',
'Germany',
'Ghana',
'Gibraltar',
'Guernsey',
'Greece',
'Greenland',
'Grenada',
'Guadeloupe',
'Guam',
'Guatemala',
'Guinea',
'Guinea-Bissau',
'Guyana',
'Haiti',
'Heard and Mc Donald Islands',
'Honduras',
'Hong Kong',
'Hungary',
'Iceland',
'India',
'Isle of Man',
'Indonesia',
'Iran (Islamic Republic of)',
'Iraq',
'Ireland',
'Israel',
'Italy',
'Ivory Coast',
'Jersey',
'Jamaica',
'Japan',
'Jordan',
'Kazakhstan',
'Kenya',
'Kiribati',
'Korea, Democratic People\'s Republic of',
'Korea, Republic of',
'Kosovo',
'Kuwait',
'Kyrgyzstan',
'Lao People\'s Democratic Republic',
'Latvia',
'Lebanon',
'Lesotho',
'Liberia',
'Libyan Arab Jamahiriya',
'Liechtenstein',
'Lithuania',
'Luxembourg',
'Macau',
'Macedonia',
'Madagascar',
'Malawi',
'Malaysia',
'Maldives',
'Mali',
'Malta',
'Marshall Islands',
'Martinique',
'Mauritania',
'Mauritius',
'Mayotte',
'Mexico',
'Micronesia, Federated States of',
'Moldova, Republic of',
'Monaco',
'Mongolia',
'Montenegro',
'Montserrat',
'Morocco',
'Mozambique',
'Myanmar',
'Namibia',
'Nauru',
'Nepal',
'Netherlands',
'Netherlands Antilles',
'New Caledonia',
'New Zealand',
'Nicaragua',
'Niger',
'Nigeria',
'Niue',
'Norfolk Island',
'Northern Mariana Islands',
'Norway',
'Oman',
'Pakistan',
'Palau',
'Palestine',
'Panama',
'Papua New Guinea',
'Paraguay',
'Peru',
'Philippines',
'Pitcairn',
'Poland',
'Portugal',
'Puerto Rico',
'Qatar',
'Reunion',
'Romania',
'Russian Federation',
'Rwanda',
'Saint Kitts and Nevis',
'Saint Lucia',
'Saint Vincent and the Grenadines',
'Samoa',
'San Marino',
'Sao Tome and Principe',
'Saudi Arabia',
'Senegal',
'Serbia',
'Seychelles',
'Sierra Leone',
'Singapore',
'Slovakia',
'Slovenia',
'Solomon Islands',
'Somalia',
'South Africa',
'South Sudan',
'South Georgia South Sandwich Islands',
'Spain',
'Sri Lanka',
'St. Helena',
'St. Pierre and Miquelon',
'Sudan',
'Suriname',
'Svalbard and Jan Mayen Islands',
'Swaziland',
'Sweden',
'Switzerland',
'Syrian Arab Republic',
'Taiwan',
'Tajikistan',
'Tanzania, United Republic of',
'Thailand',
'Togo',
'Tokelau',
'Tonga',
'Trinidad and Tobago',
'Tunisia',
'Turkey',
'Turkmenistan',
'Turks and Caicos Islands',
'Tuvalu',
'Uganda',
'Ukraine',
'United Arab Emirates',
'United Kingdom',
'United States',
'United States minor outlying islands',
'Uruguay',
'Uzbekistan',
'Vanuatu',
'Vatican City State',
'Venezuela',
'Vietnam',
'Virgin Islands (British)',
'Virgin Islands (U.S.)',
'Wallis and Futuna Islands',
'Western Sahara',
'Yemen',
'Zaire',
'Zambia',
'Zimbabwe'
);
foreach($arr as $ar){

  $query = "INSERT INTO country(country) VALUES('$ar') ";
  mysqli_query($connect,$query);

}
die; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T20:56:27.640

您正在构建错误的查询。它看起来像这样：

```
INSERT INTO ... VALUES (''65.70,Coles,34 days,14''); 
```

请注意所有 4 个值如何在单个字符串中。但字符串也是错误的（`''`）。

您需要引用数组的每个单独值：

```
('65.70', 'Coles', '34 days', '14') 
```

**然后**你内爆它，给你

```
INSERT INTO ... VALUES ('65.70', 'Coles', etc...) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T21:00:37.807

```
mysql_query("INSERT INTO Australia (`Price`, `Company`, `Days`, `Weight`) VALUES ($matstring)"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-06T14:09:10.323

我今天遇到了类似的问题并像这样解决了它：在我的例子`$bank_info`中是一个数组，它保存要作为新行插入的数据......

```
$sql = "INSERT INTO user_bank_info (user_id,
                                    name,
                                    address,
                                    ZIP,
                                    city,
                                    state,
                                    country,
                                    wat_id,
                                    bank_bic,
                                    account_iban)
        VALUES  ('$id_user',
                 '{$bank_info['name']}',
                 '{$bank_info['addr']}',
                 '{$bank_info['zipn']}',
                 '{$bank_info['city']}',
                 '{$bank_info['stat']}',
                 '{$bank_info['ctry']}',
                 '{$bank_info['watn']}',
                 '{$bank_info['bbic']}',
                 '{$bank_info['iban']}')"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-22T07:10:35.903

使用**序列化**函数将数组数据添加到表中。前任-

```
$array["a"] = "Foo";
$array["b"] = "Bar";
$array["c"] = "Baz";
$array["d"] = "Wom";
$str = serialize($array); 
```

添加`$str into table`。当我们获取数据时，然后使用反序列化函数**。Ex-**`$arr = unserialize(urldecode($strenc));`

注意：对于 URL，使用**urldecode**函数。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-20T16:02:18.250

这是我的做法（非常简单）：

```
//Fetch the original array:

$query = mysql_query("SELECT * FROM Original_Table") or die(mysql_error());

while($record = mysql_fetch_array($query)){

$num=count($record); //Count The Number Of elements in the array

$num=$num/2; //use this if the array has both key numbers AND names

$cnum=0;

for($cnum;$cnum<$num;$cnum++){ //cycle through the elements of the array

$entry=$entry."'".$record[$cnum]."',";

}

$entry=substr($entry,0,strlen($entry)-1);// this just removes the final comma

// Now we can add the entry into the new table:

mysql_query("insert into New Table (Field1, Field2,Field3.....etc) values($entry)")or die(mysql_error());

}//end while 
```

# android - 如果太大，Andengine android 标题集不显示

> ID：15056531
> 
> 赞同：0
> 
> 时间：2013-02-24T20:53:26.763
> 
> 标签：android, andengine

您好，我使用的是 256 x 1344 的tileset，在我的平板电脑上还可以，模拟器也可以，在我的手机（三星 GTI 5800）中，tileset 太大，不会在灰色的地方显示，另一个更小的tileset 在所有设备中都可以。

这是一种无需剪切我的 Tileset 即可解决此问题的方法，并且您知道 Tileset 软件可以创建 if force 吗？什么是限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:06:54.637

我猜这是因为您的 GTI 5800 具有不同的像素密度。

将所有图像放在 drawable-nodpi 文件夹中（创建它）。

或者

为您想要支持的每个密度创建不同的平铺图像。所以你有 XHDPI 的大图块和 MDPI 等的小图块。

请参阅：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# architecture - Heroku - JavaEE - Twitter 引导程序

> ID：15056541
> 
> 赞同：0
> 
> 时间：2013-02-24T20:54:54.117
> 
> 标签：architecture, heroku, twitter-bootstrap, java-ee-6, web-deployment

我开发了一个带有 twitter-bootstrap 前端的 JEE6 后端应用程序。GUI 通过 REST 与后端对话。最初的计划是在 apache 上运行 GUI，然后在后端有一个 Jboss 集群以提供可扩展性和 HA……所有这些都在 Amazon EC2 上运行

我现在将 Heroku 视为替代方案。它看起来更易于管理、扩展等。我想知道将我当前的架构转换为适合 Heroku 模型的最佳方法是什么？...例如。以某种方式将 twitter-bootstrap GUI 作为 ruby​​ 应用程序运行，并以某种方式与现有的 Java ee 应用程序对话？

重要的提示！:-) ..

1.  我们的专长是 JavaEE，而我们明显的弱点是 Web 前端，所以在描述前端替代方案时要友好。
2.  由于第 1 点（和其他时间限制），完全重新设计 GUI 并从我们的 twitter 引导 GUI 切换到它提供的所有功能（例如数据表）不是一种选择！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:42:45.540

Heroku 不支持**jboss**、**websphere**或**weblogic**类型的 java 应用服务器。所有测功机之间没有全局“应用程序容器”。每个测功机都是隔离的，因此它需要能够绑定到端口本身。

考虑它的典型方式是您的可部署进程运行一个可嵌入的网络服务器。像码头一样。 [https://devcenter.heroku.com/articles/deploy-a-java-web-application-that-launches-with-jetty-runner](https://devcenter.heroku.com/articles/deploy-a-java-web-application-that-launches-with-jetty-runner)

或者您使用 Webapp Runner 来提供基于 tomcat 的应用程序。 [https://devcenter.heroku.com/articles/java-webapp-runner](https://devcenter.heroku.com/articles/java-webapp-runner)

在部署两个组件时，heroku 应用程序只能绑定到每个应用程序的一个端口。因此创建另一个heroku 应用程序。这带来了能够独立更新/部署架构的每个部分并单独扩展它们的好处。

# sql-server - SQL Server：将布尔转换为整数

> ID：15056542
> 
> 赞同：5
> 
> 时间：2013-02-24T20:54:55.570
> 
> 标签：sql-server, integer, boolean, type-conversion

为什么要查询：

```
SELECT CAST((column LIKE '%string%') AS INT)+100 
```

返回

> *关键字“AS”附近的语法不正确*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T20:58:33.847

因为 bool 不是 T-SQL 中的类型。它不存在。布尔表达式不是位类型。它们没有类型 - 只有在特殊地方的语法允许时才允许使用它们*。*是的，这太糟糕了。

```
SELECT (case when (column LIKE '%string%') then 1 else 0 end)+100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:58:27.183

`CAST`不计算表达式。无论如何，您如何将布尔结果转换为 Int？那永远行不通。@usr 的答案是正确的方法。

# autohotkey - 热键使自动热键在重新加载之前无效

> ID：15056543
> 
> 赞同：1
> 
> 时间：2013-02-24T20:54:58.750
> 
> 标签：autohotkey

对不起，我的英语不好。

```
#IfWinActive, ahk_class PX_WINDOW_CLASS

~^s::
KeyWait, s, U
WinWait, This is an unregistered copy ahk_class #32770,, 500
IfWinExist, This is an unregistered copy ahk_class #32770
    WinKill, This is an unregistered copy ahk_class #32770
Return 
```

我的问题是有时当我按下此热键（ctrl + s）时，它会使所有自动热键脚本热键和自动热键的托盘菜单快捷方式无效（没有暂停或暂停，只是热键不起作用）。这是为什么？如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:20:32.747

您提供的信息很少……我可以想象您可能会点击`Ctrl``s`例如在 PX_WINDOW_CLASS 中保存文件。如果当时没有激活与您的 winwait 匹配的窗口，则不会发生任何事情，AutoHotKey 将坐等等待......

建议：缩短WinWait中的超时时间，增加退出，去掉多余的行

```
SetTitleMatchMode=2 ; Find the string "This is an unregistered copy" anywhere in your Title
#IfWinActive, ahk_class PX_WINDOW_CLASS
    ~^s::
    KeyWait, s, U ; Why do you have this in there? are you hanging on your s key for more than 2 seconds?
    WinWait, This is an unregistered copy,,2 ; Wait for two seconds (or a bit longer..)
    if ErrorLevel ; If timeout of WinWait
        Return
    WinKill ; uses ID found in WinWait
    Return
#IfWinActive 
```

或者更短...

```
SetTitleMatchMode=2
#IfWinActive, ahk_class PX_WINDOW_CLASS
~^s::
    WinWait, This is an unregistered copy,,2
    if not ErrorLevel
        WinKill ; uses ID found in WinWait
Return
#IfWinActive 
```

# python - 嵌入式python模块导入错误

> ID：15056550
> 
> 赞同：-1
> 
> 时间：2013-02-24T20:55:34.803
> 
> 标签：python, c

这是C语言中最简单的简单python解释器。我想要的是使用.py文件作为C语言硬编码引擎的脚本语言-运行此代码（使用python27.dll/lib）在使用python的机器上运行良好。

```
#pragma comment(lib,"python27.lib")
#include <Python27/Python.h>

static PyObject* emb_numargs(PyObject *self, PyObject *args)
{
    if(!PyArg_ParseTuple(args, ":numargs"))
        return NULL;
    return Py_BuildValue("i", 1);
}

static PyMethodDef EmbMethods[] = {
    {"numargs", emb_numargs, METH_VARARGS,
     "Return 1 you dumb person."},
    {NULL, NULL, 0, NULL}
};

  int main(int argc, char *argv[])
{ 
  FILE *fp;
  Py_SetProgramName(argv[0]);  /* optional but recommended */
  Py_Initialize();

  {
  int i;
      PyObject* sys = PyImport_ImportModule("sys");
  PyObject* path = PyObject_GetAttrString(sys, "path");

  // Add current project path to sys.path
  PyList_Append(path, PyString_FromString("."));
  for (i = 0; i < PyList_Size(path); i++)
  {
   PyString_AsString(PyList_GetItem(path, i));
  }
  Py_DECREF(sys);
   }

  Py_InitModule("emb", EmbMethods);

  fp = fopen("a.py", "r");
  PyRun_SimpleFile(fp, "a.py");

  Py_Finalize();

  system("pause");
  return 0;
} 
```

（a.py 只是调用 emb.numargs）问题是，当我将可执行文件移植到没有安装 python 的计算机时，我得到 ImportError : No Module named site。有一些关于设置 PYTHONPATH 之类的建议，但 id 不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:26:54.963

好的，我发现问题在于必须从 python 主文件夹中分发 Lib 文件夹以及可执行文件

# sass - 使用 scss 安装基础 3

> ID：15056559
> 
> 赞同：0
> 
> 时间：2013-02-24T20:56:15.990
> 
> 标签：sass, compass-sass, zurb-foundation

我正在尝试下载并使用带有指南针和 scss 的 Foundation 3，但我无法理解下一页上的说明：

[http://foundation.zurb.com/docs/compass.php](http://foundation.zurb.com/docs/compass.php)

它说我必须编写以下“[sudo] gem install zurb-foundation”。但是，在我的浏览器中，在我的 css 文档中，在我的 php 文档中？

我现在觉得这可能听起来很愚蠢，但我需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:11:08.317

知道了。看来您需要安装ruby。这是我的做法：

1.  转到[http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)

2.  下载最新版本的 ruby​​installers（对我来说是 Ruby 2.0.0-p0）

3.  下载后运行 .exe 安装程序（在安装过程中选中所有 3 个框）

4.  安装完成后，在您的开始菜单中找到 ruby​​catalog（在您的计算机上）

5.  单击“使用 ruby​​ 启动命令提示符”

6.  在命令提示符中，键入“gem update zurb-foundation”，省略 [sudo] 部分，它给了我一个错误，反正不知道它是什么。

7.  带有 sass 的基础正在安装:)

# matlab - 带 MATLAB 的降噪滤波器

> ID：15056561
> 
> 赞同：1
> 
> 时间：2013-02-24T20:56:21.020
> 
> 标签：matlab, filter, signals, noise

我有一个输入信号：

```
x[n] = sin(pi/10*n) * (u[n] - u[n-10]) 
```

和脉冲响应：

```
h[n] = 0.9^n * u[n] + delta(n) 
```

代表系统的回声。所以我正在尝试设计一个回声消除滤波器，但它似乎并不正确。我想我在使用 delta 函数时犯了一个错误。无论如何，我找到了 DTFT，它是倒数，然后是 IDTFT：

```
g[n] = dirac[n] - 1/2(0.45^n u[n]) 
```

所以如果我卷积y[n] = x[n] * h[n]，然后卷积v[n] = y[n] * g[n]，我不应该得到我的原始信号x[n] ? 我也尝试不使用 dirac delta 函数，只是在其他地方创建了一个 1 为零和零的向量，但这也不起作用。我哪里做错了？感谢您的关注

MATLAB 代码：

```
n = -10:0.1:10;
% input signal
x = sin(pi/10 * n) .* (heaviside(n) - heaviside(n-10));
% echo
h = 0.9 .^ n .* heaviside(n) + dirac(n);
% echo cancelation
g = dirac(n) - 0.5 * (0.45.^n) .* heaviside(n);
% convolutions
y = conv(x,h);
v = conv(y,g);
% plots
figure(1)
stem(x)
figure(2)
stem(y)
figure(3)
stem(v) 
```

# emacs - 在 LispBox 中的 Emacs 中加载 SLIME 编辑命令

> ID：15056562
> 
> 赞同：0
> 
> 时间：2013-02-24T20:56:22.147
> 
> 标签：emacs, lisp, elisp, common-lisp, slime

我在 OS X 上使用[LispBox](http://common-lisp.net/project/lispbox/)。我试图使用 SLIME 命令 Cc C-] 来关闭给定 S 表达式中所有打开的括号。**但是 emacs 状态告诉我 Cc C-] 是 undefined**。当我使用“Mx slime-close-all-parens-in-sexp”手动输入它时，它可以工作。此处记录了此命令：[Slime docs](http://common-lisp.net/project/slime/doc/html/Editing-Commands.html)

我搜索并发现 SLIME 默认不加载 contrib 模块，我需要在我的 ~/.emacs 文件中添加一些配置。需要的配置是

```
(setq inferior-lisp-program "/opt/sbcl/bin/sbcl") ; your Lisp system
 (add-to-list 'load-path "~/hacking/lisp/slime/")  ; your SLIME directory
 (require 'slime-autoloads)
 (slime-setup '(slime-scratch slime-editing-commands)) 
```

如此处所述：[加载贡献。](http://common-lisp.net/project/slime/doc/html/Loading-Contribs.html#Loading-Contribs)

我的系统上根本没有 .emacs 文件。所以我创建了一个并添加了上述内容，更改了相关行。当我启动它时，什么都没有改变。让我相信这个 .emacs 文件没有用于在 LispBox 应用程序中配置 emacs 会话。

我在 LispBox 目录上进行了搜索，发现在 emacs.app 文件夹的深处有一个 lispbox.el 文件，其中包含以下行：

```
(slime-setup '(slime-fancy slime-asdf slime-banner)) 
```

认为这是在 LispBox 中设置粘液的地方，我将其更改为：

```
(slime-setup '(slime-fancy slime-asdf slime-banner slime-editing-commands)) 
```

我重新启动了 LispBox，但仍然没有任何变化！

*   **我该怎么做才能加载 slime-editing-commands？**
*   **有没有办法找出 emacs 是否正在使用特定的配置文件？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-19T07:04:04.473

Lispbox 不访问 .emacs 初始化文件。您可以通过编辑应用程序包中的 .sh 文件并删除它传递给 emacs 启动的“no init”行来解决此问题。

# java - Java将另一个类的arraylist放入JList

> ID：15056563
> 
> 赞同：0
> 
> 时间：2013-02-24T20:56:25.483
> 
> 标签：java, swing, jlist

所以我有一个 GUI 类和一个包含其他所有内容的类。我在另一个类中有一个 ArrayList，我想将 GUI 中的 Jlist 的内容填充到 arraylist

到目前为止我有这个：

```
filmList = new JList(films.toArray());
getContentPane().add(filmList);
filmList.setBounds(27, 21, 638, 165); 
```

它不仅仅喜欢films.toArray()，因为它在另一个类中。我错过了什么？

这是我目前的 FilmSystem 课程。

```
 import java.util.ArrayList; 
```

公共类电影系统{

```
public FilmSystem() {

    ArrayList<String> films = new ArrayList<String>();
    films.add("A"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:06:27.840

从这个问题不清楚，但如果“电影”是不同类中 ArrayList 的名称，那么您需要创建该类的对象，然后调用它的 getter 以获取电影，然后在其上使用 toArray。如下所示：

```
FilmSystem filmObj=new FilmSystem();
filmList = new JList(filmObj.getterMethod.toArray(new String[0])); 
```

其中 getterMethod 应该是您在类中定义的 getter 方法的名称。如果你还没有定义 getter 方法，那么你可以直接在对象上调用 Arraylist。

如果未定义 getter，则使用以下内容：

```
 FilmSystem filmObj=new FilmSystem();
 filmList = new JList(filmObj.films.toArray(new String[0])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:33:10.460

数组具有显式类型，独立于其元素的类型。在构造 a 时`JList<String>`，您必须传递一个类型为 String[] 而不是 Object[] 的数组。零参数`toArray()`方法总是返回一个类型为 Object[] 的数组，即使该数组的元素可能都属于某个特定的类，例如 String。

要获取特定类型的数组，请将所需类型的数组传递给`toArray`方法：

```
filmList = new JList<String>(films.toArray(new String[0])); 
```

# api - api显示句子中单词的上下文

> ID：15056566
> 
> 赞同：1
> 
> 时间：2013-02-24T20:56:27.603
> 
> 标签：api, machine-learning, nlp, speech

您好，我对用于确定句子中单词上下文的 API 感到好奇

自从我看到情绪聚合器的出现——试图评估句子情绪的脚本——我一直想知道这个更复杂的版本。基本上我看到的情感聚合器其实很简单，他们只是尝试给一个句子分配一个正负值，但仍然不知道上下文。同样，我对机器检测上下文的当前进展感到失望

我在想一个更复杂的算法会为一个词分配更多属性并将它们与其他词进行比较

例子：

`The quick brown fox jumped over a lazy dog.`

狐狸这个词将被解释为一个对象

```
{
    word: fox,
    type: noun,
    relation: ...
} 
```

例如，它现在知道 fox 指的是哺乳动物，而不是动词“to baffle of deceive”，这对于翻译成另一种语言或判断机器人的良好反应很有用

是否有任何好的 API 或开源项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:04:55.713

从来没有深入研究过 NLP，但听起来像“词性标注器”可以让你知道一个词在特定上下文中是名词还是动词。这个至少对你的句子有用。[http://cogcomp.cs.illinois.edu/demo/pos/?id=4](http://cogcomp.cs.illinois.edu/demo/pos/?id=4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T00:27:51.580

For advanced sentiment analysis, one possible step is to find the word sense of each word and the dependencies between the words. There is a lot that you can do Once you have that information. For example, you can handle negations, smooth the senses using parenting (broader concept), etc. You can also go beyond the simple like/dislike to identify targetted intents or topics (e.g., violence, illegal activities, etc). The ability to properly detect the sense of the word eliminates much of the noise. (For example the word "like" does not convey sentiment in "Like others, I've ...".)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T21:34:15.370

正如您所提到的，单词单独具有某些含义，并且它们在不同的句子中具有不同的含义。让我们假设一个词有一个含义列表。当将单词从一种语言翻译成另一种语言时，可以预测单词的含义是该列表中的哪个含义在该句子中具有最高的概率（在给定句子中与其他单词的概率更高）

这种情况可以通过机器学习中的 HMM 来解决。你可以从康奈尔大学的网站上阅读关于隐马尔可夫模型和文本翻译的[博客文章。](http://blogs.cornell.edu/info2040/2012/11/11/hidden-markov-models-and-text-translation/)

你应该看看那种 API。斯坦福大学有一个 Java NLP Api，你应该看看这里：[http ://dbpubs.stanford.edu:8091/~klein/javadoc/edu/stanford/nlp/ie/hmm/package-tree.html](http://dbpubs.stanford.edu:8091/~klein/javadoc/edu/stanford/nlp/ie/hmm/package-tree.html)

# mongodb - MongoDB 架构设计。另一个集合或子文档？

> ID：15056570
> 
> 赞同：0
> 
> 时间：2013-02-24T20:56:36.327
> 
> 标签：mongodb

我找不到设计基于 MongoDB 的应用程序架构的最佳方法。

我有地点和用户。用户可以在这些地方签到。我也想保存时间戳。我应该用这种结构创建一个单独的集合吗？

```
{
    _user: {type: ObjectId, ref: 'User'},
    _place: {type: ObjectId, ref: 'Place},
    timestamp: Date
} 
```

我写这个就好像我在使用伪猫鼬一样。希望很清楚。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:03:50.080

您建立的单独收藏完全没问题。

如果要按用户查询所有地点，则应*索引*_user 字段。

如果要查询用户 B 的所有地点 A，则应在 _user 和 _place 字段上构建*组合索引。*

# python - tcsh 中 python-shell 的下划线变量的对应物？

> ID：15056573
> 
> 赞同：2
> 
> 时间：2013-02-24T20:56:43.407
> 
> 标签：python, tcsh

有没有办法让 tcsh 将最后一个命令的输出保存在一个特殊的变量中？

我知道我可以使用反引号捕获输出，但是如果我一开始不使用反引号，它就不会在任何地方捕获。（任何喜欢 python shell 中下划线变量的人都知道我在说什么）

例如

```
% ls | head -2
% echo $_OUT_
-> myfile1 myfile2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:36:02.863

此[页面](http://www.tcsh.org/tcsh.html/Special_shell_variables.html)列出了 tcsh 的特殊变量，并没有指定您要查找的特殊变量。

此外，这[可能是您的问题的副本](https://stackoverflow.com/a/3286609/618156)。

# objective-c - 在 initWithFrame 方法中创建的对象在同一类的另一个方法中不知道

> ID：15056576
> 
> 赞同：0
> 
> 时间：2013-02-24T20:57:00.203
> 
> 标签：objective-c, macos, object, nsview

这就是我不了解一些基础知识的证明，但它仍然是OO的第一周！;)

在我的视图类中，这个对象是在 initWithFrame 方法中创建的：

```
- (id)initWithFrame:(NSRect)frame{
    self = [super initWithFrame:frame];
    if (self)
{
    SeqModel *seq1 = [[SeqModel alloc] init];
    [seq1 setSeqSteps:16];
    [seq1 setSeqPatterns:1];
    [seq1 setName:@"Load sample here"];
    }
    return self;
} 
```

后来它在另一种方法中调用：

```
- (void)drawSampleNameSeq1{
    NSLog(@"%@",[seq1 sampleName]);
    [self drawText:[seq1 sampleName] schrift:@"Helvetica Light" r:140 g:140 b:140 tsize:15     xpos:1005 ypos:755 ];
} 
```

然后编译器说：“使用未声明的标识符'seq1'”。在创建对象的方法中做同样的事情......该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:00:07.713

问题在于变量范围。这里您声明的变量仅在大括号内具有范围或生命，因此它不适用于其他方法。

解决方案

创建一个实例变量：一个在类内任何地方都可以访问的变量。

在你的 .h

```
@interface ClassName : SuperClass {
   SeqModel *seq1;
} 
```

然后在`initWithFrame:`方法中

```
- (id)initWithFrame:(NSRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        seq1 = [[SeqModel alloc] init];
        [seq1 setSeqSteps:16];
        [seq1 setSeqPatterns:1];
        [seq1 setName:@"Load sample here"];
    }
    return self;
} 
```

# qt - 在 Qt 中的两个按钮之间共享变量

> ID：15056579
> 
> 赞同：1
> 
> 时间：2013-02-24T20:57:15.157
> 
> 标签：qt, visual-c++

```
void xx::on_pushButton_clicked()
{
    QFileDialog dialog(this);
    dialog.setNameFilter(tr("Images (*.png *.gif *.jpg)"));
    dialog.setViewMode(QFileDialog::Detail);

    QString fn = QFileDialog::getOpenFileName(this,
                                              tr("Select Image"),
                                              "e:/",
                                              tr("Images (*.png)"));
    // Do something
}

void xx::on_pushButton_2_clicked()
{
    QString ex= fn; // to be accessed from the above button selection
} 
```

我想使用使用按钮选择的文件名来建立另一个按钮的操作。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:11:32.370

您可以简单地声明`fn`为 class 的数据成员`xx`。

考虑到问题的简单性，我真的想知道您是否正在尝试通过尝试和查看的方法来学习 C++。虽然这对于其他语言或环境（例如 Python）可能是一种合理的方法，但对于 C++ 来说这是一个非常**糟糕**的想法，原因有两个：

1.  由于历史原因和委员会效应，C++ 在某些部分是相当“不合逻辑的”。了解它的行为方式的唯一方法是阅读，因为逻辑并不总是会给你正确的答案。

2.  C++ 的主要理念是程序员不会出错，当程序员出错时，结果不是“运行时错误”，而是“未定义的行为”。

这两个因素的混合使得 C++ 的尝试和观察方法简直是自杀：该语言复杂且不合逻辑，并且它不会告诉您何时犯错。

您真的应该[选择一本好的 C++ 书籍](https://stackoverflow.com/q/388242/320726)并首先从头到尾阅读。

# php - 嵌入的 youtube 视频无法在 android 上播放

> ID：15056582
> 
> 赞同：0
> 
> 时间：2013-02-24T20:57:24.423
> 
> 标签：php, youtube

在我的网站上，我正在尝试显示一些 youtube 视频。在数据库中，我有 youtube 视频上的地址，我正试图在我的网站上显示它。问题是当平板电脑访问该网站时，此代码不起作用。

我不知道为什么，也不知道如何调试问题。

```
<?php    
// url of video
$url = $data['video'];

// we get the unique video id from the url by matching the pattern
preg_match("/v=([^&]+)/i", $url, $matches);
$id = $matches[1];

// template for generating embed codes
$code = '<object width="425" height="344"><param name="movie" value="http://www.youtube.com/v/{id}&hl=en_US&fs=1&"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/{id}&hl=en_US&fs=1&" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="425" height="344"></embed></object>';

// replace each {id} with the actual ID of the video to get embed code
$code = str_replace('{id}', $id, $code);

if(isset($id)&& $id !== '') { 
    echo $code; 
} 
?> 
```

你能帮我一些指点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:10:02.147

您使用的嵌入代码是超古`<object>`版本。改用基于 YouTube 的较新`<iframe>`嵌入，它应该可以在更多移动设备上运行：

```
$code = '<iframe width="425" height="344" src="http://www.youtube.com/embed/{id}" frameborder="0" allowfullscreen></iframe>'; 
```

# javascript - 使用下拉列表中的用户输入在 JavaScript 中生成表格

> ID：15056589
> 
> 赞同：0
> 
> 时间：2013-02-24T20:57:48.787
> 
> 标签：javascript

我遇到了问题，我需要使用用户指定的行数和列数（从下拉列表中）生成一个表。当用户选择他们想要的行数和列数时，我在弄清楚如何让表格正常工作时遇到问题。帮助！我已经创建了一个表单和两个选择列表，但我不能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:23:13.627

在给定行数和列数的情况下构建表非常简单

```
var table = document.createElement('table');
for (var i = 0; i < rowcount; i++){
    var row = table.insertRow(i);
    for (var j = 0; j < columncount; j++){
        row.insertCell(j);
    }
} 
```

[**演示**](http://jsfiddle.net/mowglisanu/BTCPd/)

# java - 更新 JCombobox 时的空指针

> ID：15056590
> 
> 赞同：-2
> 
> 时间：2013-02-24T20:57:49.447
> 
> 标签：java, swing, jcombobox

我已经为此苦苦挣扎了一段时间。我正在尝试使用所有者对象更新一个空的 JCombobox，只要通过单击按钮创建它，但我不断收到 nullpointerexception

```
 package gui;

    import java.awt.BorderLayout;
    import java.awt.EventQueue;

    import javax.swing.JFrame;
    import javax.swing.JPanel;
    import javax.swing.border.EmptyBorder;
    import javax.swing.JMenuBar;
    import javax.swing.JToolBar;
    import javax.swing.JTabbedPane;
    import javax.swing.JDesktopPane;
    import javax.swing.border.TitledBorder;
    import javax.swing.border.LineBorder;
    import java.awt.Color;
    import javax.swing.JLabel;
    import javax.swing.JTextField;
    import javax.swing.JButton;
    import java.awt.Insets;
    import java.awt.Button;
    import java.awt.Component;
    import javax.swing.JLayeredPane;
    import javax.swing.JTable;
    import javax.swing.Box;
    import javax.swing.JSplitPane;
    import javax.swing.AbstractAction;
    import java.awt.event.ActionEvent;
    import javax.swing.Action;
    import javax.swing.JInternalFrame;
    import java.awt.event.*; 
    import controller.ForestOwnerCtr;

    import model.OwnerCon;
    import model.Owner;
    import model.Tree;

    import java.awt.event.ActionListener;
    import java.util.ArrayList;
    import javax.swing.JList;
    import javax.swing.JComboBox;
    import java.awt.Choice;
    import java.awt.Label;
    import javax.swing.DefaultComboBoxModel;

    public class ForestGui extends JFrame {

        private static ForestOwnerCtr FOCtr;
        private JPanel contentPane;
        private JTextField txtOwnerName;
        private JTextField txtOwnerAdress;
        private JTextField txtOwnerPhone;
        private JTextField txtName;
        private JTextField txtLocation;
        private JTextField txtArea;
        private JTextField textField;
        private JTextField textField_3;
        private JTextField textField_4;
        private JTextField txtAge;
        private JComboBox<Owner> owner_select;
        private ArrayList<Owner> test;

        /**
         * Launch the application.
         */
        public static void main(String[] args) {
            EventQueue.invokeLater(new Runnable() {
                public void run() {
                    try {
                        ForestGui frame = new ForestGui();
                        frame.setVisible(true);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            });
            FOCtr = new ForestOwnerCtr();
        }

        /**
         * Create the frame.
         */
        public ForestGui() {
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setBounds(100, 100, 946, 509);

            JMenuBar menuBar = new JMenuBar();
            setJMenuBar(menuBar);

            JButton btnCreate = new JButton("Create");
            menuBar.add(btnCreate);

            JButton btnSearch_1 = new JButton("Search");
            menuBar.add(btnSearch_1);
            contentPane = new JPanel();
            contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
            setContentPane(contentPane);
            contentPane.setLayout(null);

            JPanel panel_search_forest = new JPanel();
            panel_search_forest.setBorder(new TitledBorder(new LineBorder(new Color(130, 135, 144)), "Seach forest", TitledBorder.LEADING, TitledBorder.TOP, null, null));
            panel_search_forest.setToolTipText("tst");
            panel_search_forest.setBounds(15, 11, 238, 238);
            contentPane.add(panel_search_forest);
            panel_search_forest.setLayout(null);

            JLabel lblName_1 = new JLabel("Name");
            lblName_1.setBounds(10, 28, 46, 14);
            panel_search_forest.add(lblName_1);

            txtName = new JTextField();
            txtName.setColumns(10);
            txtName.setBounds(92, 26, 119, 19);
            panel_search_forest.add(txtName);

            JLabel lblLocation = new JLabel("Location");
            lblLocation.setBounds(10, 56, 58, 14);
            panel_search_forest.add(lblLocation);

            JLabel lblArea = new JLabel("Area");
            lblArea.setBounds(10, 81, 46, 14);
            panel_search_forest.add(lblArea);

            txtLocation = new JTextField();
            txtLocation.setColumns(10);
            txtLocation.setBounds(92, 54, 119, 19);
            panel_search_forest.add(txtLocation);

            txtArea = new JTextField();
            txtArea.setColumns(10);
            txtArea.setBounds(92, 79, 119, 19);
            panel_search_forest.add(txtArea);

            JLabel lblAge = new JLabel("Age");
            lblAge.setBounds(10, 106, 46, 14);
            panel_search_forest.add(lblAge);

            txtAge = new JTextField();
            txtAge.setColumns(10);
            txtAge.setBounds(92, 107, 119, 19);
            panel_search_forest.add(txtAge);

            JButton CreateForest = new JButton("New forest");
            CreateForest.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent arg0) {
                    createForest();
                }
            });
            CreateForest.setBounds(109, 204, 119, 23);
            panel_search_forest.add(CreateForest);

            JLabel lblOwner = new JLabel("Owner");
            lblOwner.setBounds(10, 131, 46, 14);
            panel_search_forest.add(lblOwner);

            Choice choice = new Choice();
            choice.setBounds(92, 163, 119, 19);
            panel_search_forest.add(choice);

            JLabel lblTreeSorts = new JLabel("Tree sorts");
            lblTreeSorts.setBounds(10, 163, 76, 20);
            panel_search_forest.add(lblTreeSorts);

            JComboBox<Owner> owner_select = new JComboBox<Owner>();
            owner_select.setModel(new DefaultComboBoxModel(FOCtr.getOwners().toArray()));
            owner_select.setBounds(90, 137, 121, 20);

            panel_search_forest.add(owner_select);

            JPanel searc_owner = new JPanel();
            searc_owner.setToolTipText("tst");
            searc_owner.setBorder(new TitledBorder(new LineBorder(new Color(130, 135, 144)), "Seach owner", TitledBorder.LEADING, TitledBorder.TOP, null, null));
            searc_owner.setBounds(263, 11, 250, 196);
            contentPane.add(searc_owner);
            searc_owner.setLayout(null);

            JLabel lblName = new JLabel("Name");
            lblName.setBounds(10, 22, 46, 14);
            searc_owner.add(lblName);

            JLabel lblAdress = new JLabel("Adress");
            lblAdress.setBounds(10, 47, 46, 14);
            searc_owner.add(lblAdress);

            JLabel lblPhoneNumber = new JLabel("Phone number");
            lblPhoneNumber.setBounds(10, 77, 83, 14);
            searc_owner.add(lblPhoneNumber);

            txtOwnerName = new JTextField();
            txtOwnerName.setBounds(111, 20, 119, 17);
            searc_owner.add(txtOwnerName);
            txtOwnerName.setColumns(10);

            txtOwnerAdress = new JTextField();
            txtOwnerAdress.setColumns(10);
            txtOwnerAdress.setBounds(111, 45, 119, 17);
            searc_owner.add(txtOwnerAdress);

            txtOwnerPhone = new JTextField();
            txtOwnerPhone.setColumns(10);
            txtOwnerPhone.setBounds(111, 75, 119, 17);
            searc_owner.add(txtOwnerPhone);

            JButton btnSearch = new JButton("New Owner");
            btnSearch.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent E) {
                    createOwner();
                }
            });

            btnSearch.setBounds(141, 162, 89, 23);
            searc_owner.add(btnSearch);

            JPanel panel = new JPanel();
            panel.setLayout(null);
            panel.setToolTipText("tst");
            panel.setBorder(new TitledBorder(new LineBorder(new Color(130, 135, 144)), "Seach forest", TitledBorder.LEADING, TitledBorder.TOP, null, null));
            panel.setBounds(585, 171, 238, 196);
            contentPane.add(panel);

            JLabel label = new JLabel("Name");
            label.setBounds(10, 28, 46, 14);
            panel.add(label);

            textField = new JTextField();
            textField.setColumns(10);
            textField.setBounds(78, 25, 119, 17);
            panel.add(textField);

            JLabel label_1 = new JLabel("Location");
            label_1.setBounds(10, 56, 58, 14);
            panel.add(label_1);

            JLabel label_2 = new JLabel("Area");
            label_2.setBounds(10, 81, 46, 14);
            panel.add(label_2);

            textField_3 = new JTextField();
            textField_3.setColumns(10);
            textField_3.setBounds(78, 53, 119, 17);
            panel.add(textField_3);

            textField_4 = new JTextField();
            textField_4.setColumns(10);
            textField_4.setBounds(78, 78, 119, 17);
            panel.add(textField_4);

            JButton button_1 = new JButton("Search");
            button_1.setBounds(139, 162, 89, 23);
            panel.add(button_1);

            }

    private void createForest(){

        String name = txtName.getText();
        String location = txtLocation.getText();
        int totalArea = Integer.parseInt(txtArea.getText());
        int age = Integer.parseInt(txtAge.getText());
        //Owner owner = 
        FOCtr.createForest(name, location, totalArea, age);
        }

   private void createOwner(){

        String newName = txtOwnerName.getText();
        String newAdress = txtOwnerAdress.getText();
        String newPhone = txtOwnerPhone.getText();
        Owner o = new Owner(newName, newAdress, newPhone);
        test.add(o);
        owner_select.addItem(o);
        }

    }

Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at gui.ForestGui.createOwner(ForestGui.java:285)
    at gui.ForestGui.access$1(ForestGui.java:278)
    at gui.ForestGui$3.actionPerformed(ForestGui.java:211)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:42:26.147

您定义一个为空的类变量：

```
private JComboBox<Owner> owner_select; 
```

然后在构造函数中创建一个不为 null 的局部变量：

```
JComboBox<Owner> owner_select = new JComboBox<Owner>(); 
```

createOwner() 方法中的代码只能访问类变量。您不想创建局部变量，因此构造函数中的代码应为：

```
owner_select = new JComboBox<Owner>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T20:59:24.937

```
I have been struggling with this for a time 
```

解决此问题不应超过五分钟。

NPE 是最容易解决的问题。打印堆栈跟踪，记下它发生的类和行号，并扫描该行以查找未通过将它们设置为非空引用来初始化的引用。如果不明显，请使用带有调试器的 IDE。

只是不要犯重复相同行为并期待不同结果的错误。除非它是导致您的问题的竞争条件，否则这是精神错乱的一个迹象。

FWIW，你写的代码太多了。这就是我讨厌 Swing 的原因之一——代码太多！稍加思考和分解将大有帮助。

例如，地球上没有理由让您的课程扩展`JFrame`. `JPanel`会是更好的选择。您可以将您的课程嵌入到 a 中`JFrame`，然后离开。

`textField_4`? 那是什么？谁能说出那是为了什么？神秘的人甚至可能是三周后的你。

# bash - 编写 shell 脚本以 am 或 pm 表示法显示时间

> ID：15056591
> 
> 赞同：12
> 
> 时间：2013-02-24T20:58:01.717
> 
> 标签：bash

我正在尝试编写一个以 am 或 pm 显示时间的 shell 脚本，而不是使用 date 命令显示的方式。我不确定我应该如何去做。我想对于初学者来说，如何从 date 命令中提取时间来操作它？以及如何提取一小时的数字来操纵它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-24T21:07:56.633

你正在寻找的是

```
man strftime 
```

这代表字符串格式时间，这是`date`使用的格式。

因此，要获取当前的 AM/PM，请使用以下命令：

```
date +"%p" 
```

或者

```
ampm=`date +"%p"`
echo $ampm 
```

小时可以是几种格式之一（你想要 12 小时还是 24 小时时间，是否前导零？）我猜你想要非前导零的 12 小时时间：

```
date +"%l" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-23T03:09:20.810

您可以使用下面的一种以 AM 和 PM 格式打印最多几分钟的时间。

```
echo $(date  +"%I:%M %p") 
```

**输出 : 09:20** PM

或者

```
echo $(date  +"%r") 
```

**输出**：09:20:09 PM

或 echo $(date +"%I %p")

**输出**：晚上 9 点

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-24T21:03:03.097

> 而不是使用 date 命令显示的方式

该[`date`](http://tldp.org/LDP/abs/html/timedate.html)命令采用格式字符串。供应将根据给定的时间值*或当前 locale 的相应字符串*`%p`显示“AM”或“PM” 。中午被视为“PM”，午夜被视为“AM”：

 *```
% date +'%H:%M %p'
08:01 am 
```

“在引擎盖下”，这调用[`strftime()`](http://linux.die.net/man/3/strftime). 有关更多格式选项，请参见手册页。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-06T17:39:34.753

这取决于区域设置。

```
LC_TIME="C" date +%l%p
LC_TIME="C" date +'%l:%M %p' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T21:02:59.603

您可以使用 date 命令的“+”格式选项。例如：

```
 > date +%l%p
-> 7PM 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-12T10:30:31.397

要将 AM 或 PM 设为 am 或 pm 试试这个日期 +%#p

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-15T16:14:47.997

使用日期 +"%P" 大写 P 显示 am 或 pm*

# c - 交换两个节点链表 C

> ID：15056598
> 
> 赞同：0
> 
> 时间：2013-02-24T20:58:46.413
> 
> 标签：c, nodes

我正在尝试交换给定链表中的两个节点。无论是它旁边的一个节点，还是链表中的任何一个节点。没有错误，但我无法让它工作。

```
struct lnode 
{
    int some_line;
    int count;
    char* some_word;
    struct lnode* next;
};
void swap_alternate_nodes(struct lnode** head, struct lnode* odd_node, struct lnode* even_node)
{
    struct lnode* temp;
    if((*head)==NULL)
    {
        return;
    }
    odd_node = (*head);
    even_node= (*head)->next;
    if((*head)->next!=NULL)
    {
        (*head)=(*head)->next;
    }
    while(odd_node && even_node)
    {
        temp=even_node->next;
        even_node->next=odd_node;
        odd_node->next=temp;
        odd_node=temp;
        if(odd_node!=NULL)
        {
            even_node=odd_node->next;
        }
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:08:06.097

交换两个节点的内容会容易得多！：

```
void swap_alternate_nodes(struct lnode** head, 
    struct lnode* odd_node, struct lnode* even_node) {
    int some_line = odd_node->some_line;
    int count = odd_node->count;
    char* some_word = odd_node->some_word;
    odd_node->some_line = even_node->some_line;
    odd_node->count = even_node->count;
    odd_node->some_word = even_node->some_word;
    even_node->some_line = some_line;
    even_node->count = count;
    even_node->some_word = some_word;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:14:01.430

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>

struct list {
    struct list *next;
    int ch;
    };

void swaptwo (  struct list **pp, struct list *one, struct list *two )
{
struct list *tmp=NULL, **aaa, **bbb;

if (!pp || !*pp || !one || !two || one==two) return ;

    for (aaa=bbb=NULL; *pp; pp = &(*pp)->next) {
        if ( !aaa && *pp == one) aaa = pp;
        else if ( !bbb && *pp == two) bbb = pp;
        if (aaa && bbb) break;
        }       
    if (!aaa || !bbb) return;

    tmp = *aaa;
    *aaa = *bbb;
    *bbb = tmp;

    tmp = one->next;
    one->next = two->next;
    two->next = tmp;
}       

struct list arr[]
= { {arr+1, 'A'} , {arr+2, 'B'} , {arr+3, 'C'} , {arr+4, 'D'} , {arr+5, 'E'} , {arr+6, 'F'} , {arr+7, 'G'} , {arr+8, 'H'}
, {arr+9, 'I'} , {arr+10, 'J'} , {arr+11, 'K'} , {arr+12, 'L'} , {arr+13, 'M'} , {arr+14, 'N'}, {arr+15, 'O'} , {arr+16, 'P'}
, {arr+17, 'Q'} , {arr+18, 'R'} , {arr+19, 'S'} , {arr+20, 'T'} , {arr+21, 'U'} , {arr+22, 'V'}, {arr+23, 'W'} , {arr+24, 'X'}
, {arr+25, 'Y'} , {NULL, 'Z'} };

int main (void) {
    struct list *root = arr, *ptr;

    printf( "Swap Q<-->X\n" );
    swaptwo ( &root, arr+16, arr+23);

    for (ptr=root ; ptr; ptr = ptr->next ) {
        printf( "-> %c" , ptr->ch );
        }       
    printf( "\n" ); 

    printf( "Swap B<-->C\n" );
    swaptwo ( &root, arr+1, arr+2); 

    for (ptr=root ; ptr; ptr = ptr->next ) {
        printf( "-> %c" , ptr->ch );
        }       
    printf( "\n" );

    printf( "Swap A<-->B\n" );
    swaptwo ( &root, arr, arr+1);

    for (ptr=root ; ptr; ptr = ptr->next ) {
        printf( "-> %c" , ptr->ch );
        }
    printf( "\n" );

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-24T21:32:00.167

首先我会声明一个函数来交换两个音符

```
typedef struct lnode 
{
    int some_line;
    int count;
    char* some_word;
    struct lnode* next;
} Node;

void swapNodes(Node* a, Node* b)
{
    if (!(a || b))
        return;

    Node* buffer = a;
    a = b;
    b = buffer;

    //now its b-a-c-d-e ...
    buffer = b->next;
    b->next = a->next;
    a->next = buffer;

   // the same with content of the node, that defines list stuff like 'where am i' and so on ... you should get what i mean
} 
```

之后，您会使用类似的东西浏览您的列表

```
void swapList(Node* begin, Node* end)
{
    if (begin == end)
        return;
    Node* a,b;
    b = begin;
    a = b->next;
    while (a != end && b != end)  // if you dont have 'end' just use while(a != 0 || b != 0)
    {
        swapNodes(a,b);
        a = b->next;
        if (a == end)
            break;
        b = a->next;  
    }

} 
```

# php - 尝试从 DB 中安排电子邮件地址

> ID：15056599
> 
> 赞同：0
> 
> 时间：2013-02-24T20:58:46.763
> 
> 标签：php, email

把我的头发拉出来，我相信这对于了解 php 的人来说很简单......我正在尝试获取其电子邮件选项设置为“是”的电子邮件地址。下面 scipt 中的回显返回所有正确的电子邮件地址，但我需要它们在 $show_users 中表示，以便可以在电子邮件脚本的“TO”行中使用，我似乎无法获取所有电子邮件地址$show_user 变量，它返回查询中的最后一封电子邮件，在此示例中我需要全部 3 个。希望有人可以提供帮助，因为我是此代码的新手，非常感谢。

```
echo $user['user_email']; 

$users = $phpcdb->get_get_users_emails($phpc_uid);  \\db script

foreach ($users as $user) {
$show_users = var_export($user['user_email'], true); 
     }
return tag('h2', _($show_users)); 
```

来自“echo”的输出 email1.comemail2.comemail3.com 来自 Sshow_user 'email3.com' 的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:24:55.537

你`$show_users`应该是一个数组并像这样构建：

```
$show_users = array();
foreach ($users as $user) {
    $show_users[] = $user['user_email'];
} 
```

稍后您可以使用以下命令将其转回字符串`join()`：

```
join(',', $show_users); // "a@b.com,c@d.com" 
```

# mysql - 为什么需要从实体到同一实体的关系表

> ID：15056601
> 
> 赞同：0
> 
> 时间：2013-02-24T20:58:54.530
> 
> 标签：mysql, hibernate, relation

我有一个像这样的 roo-script-line：

字段集 --class Member --fieldName 受邀者 --type Member --cardinality ONE_TO_MANY

Hibernate 需要一个名为 member_invitedby 的表，其中包含列成员和受邀者：

```
PersistenceException: [PersistenceUnit: megaadmin] Unable to build EntityManagerFactory
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1117)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: megaadmin] Unable to build EntityManagerFactory
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:915)
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
        at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
        at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:286)
        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1545)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
        ... 22 more
Caused by: org.hibernate.HibernateException: Missing table: member_invitedby
        at org.hibernate.cfg.Configuration.validateSchema(Configuration.java:1272)
        at org.hibernate.tool.hbm2ddl.SchemaValidator.validate(SchemaValidator.java:155)
        at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:506)
        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1750)
        at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94)
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
        ... 28 more 
```

如果我手动创建一个包含列成员和邀请的表 member_invitedby，则此异常消失。

我不知道为什么hibernate需要一个nm表，因为一个成员只能被一个成员邀请，它是一个1-n！

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:17:02.843

映射 OneToMany 单向关联的默认方法是使用连接表。这样可以避免使用连接列污染子（多）侧，因为它不应该知道其父（一侧）。

如果您想在多端使用外键，引用一侧，则需要在 OneToMany 关联声明上使用 @JoinColumn 注释明确说明。我不知道如何用 Roo 做到这一点。

# python - Python 3.3 中的异常引发

> ID：15056604
> 
> 赞同：0
> 
> 时间：2013-02-24T20:59:16.257
> 
> 标签：python

我在书中有这个例子，但它在我的 python 3.3 中不起作用

```
x = 'item found'

def search():
    raise x or return

try:
    search()
except x:
    print('exception')
else:
    print('no exception') 
```

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T21:00:40.570

简单：`return`是一个语句，而不是一个表达式。语句必须出现在自己的行上。`raise`也是一个语句，它期望它的表达式评估为引发异常，但`x`该`return`语句既不满足，也不满足。

就目前而言，这条线完全是胡说八道。它不是有效的 Python。

相反，Python 解析器会将此代码标记为无效并*为整个文件*`SyntaxError`引发异常。文件中包含的任何代码都不会实际运行：

 *```
 File "demo.py", line 4
    raise x or return
                    ^
SyntaxError: invalid syntax 
```*

# google-chrome-extension - 在哪里告诉 Chrome 团队文档中的错误？

> ID：15056609
> 
> 赞同：2
> 
> 时间：2013-02-24T21:00:05.217
> 
> 标签：google-chrome-extension, download, filenames

我点击了“问题？” 从他们的扩展开发页面链接，它把我带到了这里。我看不到任何其他建议与任何人交流的链接。

我遇到的问题在 chrome.downloads 信息页面中 - [http://developer.chrome.com/extensions/downloads.html](http://developer.chrome.com/extensions/downloads.html)

在 DownloadOptions 对象定义中，它具有属性“文件名”，它定义为：

```
filename ( optional string )
    A file path relative to the Downloads directory to contain the downloaded file. 
```

除此之外，这只允许您更改文件的目标名称，并且不允许修改路径名称。一旦使用了正斜杠或反斜杠，它就会向控制台返回“我担心我做不到”。

所以，实现与文档不一致，我很困惑是否值得继续我的项目，或者我现在是否应该放弃。

如果有人能指出我在某个地方得到答案，我将非常感激！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T19:15:22.503

文档来源已被修复。（我会链接到 downloads.idl，但是“您需要至少 10 个代表才能发布超过 2 个链接。”:-？）我会看到有关更新该 URL 的信息。

`chrome.downloads.download({filename})`目前不支持子目录，但我们计划尽快修复。

同时，您可以使用[onDeterminingFilename](http://developer.chrome.com/trunk/extensions/downloads.html#event-onDeterminingFilename)来使用相对于默认下载目录的子目录。出于安全原因，您不能将下载内容放在该目录之外。

将来，请随时在[http://crbug.com/new](http://crbug.com/new)提交错误。这将导致直接向 API 的维护者（我！）发送电子邮件。

# java - 如何从 ActionListener 中获取价值

> ID：15056611
> 
> 赞同：0
> 
> 时间：2013-02-24T21:00:12.783
> 
> 标签：java, swing, actionlistener

我创建了一个 JRadioButton 组，并且我想在选择特定按钮时将参数设置为一个值。我已经像代码一样向这个按钮添加了 ActionListener。但是我如何在其他动作监听器中使用该值？

```
grid_rb.addActionListener(new ActionListener(){
public void actionPerformed(ActionEvent arg0) {
network_type = "--grid-net";
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:02:15.027

使用 getter 和 setter：

```
String networkType;

grid_rb.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent arg0) {
        setNetworkType("--grid-net");
    }
});

public void getNetworkType() {
    return networkType;
}
public void setNetworkType(String nwt) {
    networkType = nwt;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:02:29.773

按钮有一个方法`isSelected()`，它告诉你按钮是否被选中。

# c# - youtube api：上传不起作用

> ID：15056612
> 
> 赞同：0
> 
> 时间：2013-02-24T21:00:12.563
> 
> 标签：c#, video, upload, youtube, youtube-api

我需要帮助。我尝试使用 youtube api 上传视频。我在 c# 中使用 windows 窗体。这就是我所做的：

```
var service = new YouTubeService("kslmfkmlskf",this._sharedConfiguration.youtubeApiKey);

service.setUserCredentials(this._sharedConfiguration.youtubeUserName, this._sharedConfiguration.youtubeUserPassword);

var newEntry = new YouTubeEntry();
string title = "test";
string description = "test test test";
string keywords = "testa testb testc";

newEntry.Media = new Google.GData.YouTube.MediaGroup();
newEntry.Media.Categories.Add(new MediaCategory("Movies", YouTubeNameTable.CategorySchema));
newEntry.Media.Keywords = new MediaKeywords(keywords);
newEntry.Media.Description = new MediaDescription(description);
newEntry.Media.Title = new MediaTitle(title); 
newEntry.MediaSource = new MediaFileSource("E:\\cine_buzz\\automate_trailer\\toupload\\demo.mov", "video/quicktime");

var createEntry = new YouTubeEntry();
createEntry = service.Upload(newEntry); 
```

我有一个这样的异常返回：

```
{Google.GData.Client.GDataRequestException: Execution of request failed: https://uploads.gdata.youtube.com/feeds/api/users/default/uploads ---> System.Net.WebException: Le serveur distant a retourné une erreur : (400) Demande incorrecte.
à System.Net.HttpWebRequest.GetResponse()
à Google.GData.Client.GDataRequest.Execute()
--- Fin de la trace de la pile d'exception interne ---
à Google.GData.Client.GDataRequest.Execute()
à Google.GData.Client.GDataGAuthRequest.Execute(Int32 retryCounter)
à Google.GData.Client.GDataGAuthRequest.Execute()
à Google.GData.Client.MediaService.EntrySend(Uri feedUri, AtomBase baseEntry, GDataRequestType type, AsyncSendData data)
à Google.GData.Client.Service.Insert(Uri feedUri, AtomEntry newEntry, AsyncSendData data)
à Google.GData.Client.Service.Insert[TEntry](Uri feedUri, TEntry entry)
à Google.GData.YouTube.YouTubeService.Upload(String userName, YouTubeEntry entry)
à Google.GData.YouTube.YouTubeService.Upload(YouTubeEntry entry)
à CineBuzzAutomateTrailer.frmUploadYoutube.upload() dans C:\Users\Yeurl\Documents\Visual Studio 2010\Projects\CineBuzzAutomateTrailer\CineBuzzAutomateTrailer\frmUploadYoutube.cs:ligne 105
à CineBuzzAutomateTrailer.frmUploadYoutube.btnTest_Click(Object sender, EventArgs e) dans C:\Users\Yeurl\Documents\Visual Studio 2010\Projects\CineBuzzAutomateTrailer\CineBuzzAutomateTrailer\frmUploadYoutube.cs:ligne 113
à System.Windows.Forms.Control.OnClick(EventArgs e)
à System.Windows.Forms.Button.OnClick(EventArgs e)
à System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
à System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
à System.Windows.Forms.Control.WndProc(Message& m)
à System.Windows.Forms.ButtonBase.WndProc(Message& m)
à System.Windows.Forms.Button.WndProc(Message& m)
à System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
à System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
à System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
à System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
à System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
à System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
à System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
à System.Windows.Forms.Application.Run(Form mainForm)
à CineBuzzAutomateTrailer.Program.Main() dans C:\Users\Yeurl\Documents\Visual Studio 2010\Projects\CineBuzzAutomateTrailer\CineBuzzAutomateTrailer\Program.cs:ligne 18
à System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
à System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
à Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
à System.Threading.ThreadHelper.ThreadStart_Context(Object state)
à System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
à System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
à System.Threading.ThreadHelper.ThreadStart()} 
```

还有这个

```
<errors xmlns="http://schemas.google.com/g/2005">
- <error>
    <domain>GData</domain> 
      <code>InvalidEntryException</code> 
        <internalReason>Validation failed</internalReason> 
  </error>
</errors> 
```

我不明白我所做的有什么问题。感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:05:59.310

我认为您的 API 访问权限未配置 API 控制台。

我建议您使用 V3 而不是 GData。有一个与 C# 和这个非常相似的 Java 示例。

" [https://code.google.com/p/youtube-api-samples/source/browse/samples/java/youtube-cmdline-uploadvideo-sample/src/main/java/com/google/api/services/samples /youtube/cmdline/youtube_cmdline_uploadvideo_sample/UploadVideo.java](https://code.google.com/p/youtube-api-samples/source/browse/samples/java/youtube-cmdline-uploadvideo-sample/src/main/java/com/google/api/services/samples/youtube/cmdline/youtube_cmdline_uploadvideo_sample/UploadVideo.java) "

您还应该在此处从 API 控制台设置您的 API 访问权限，并从那里打开 Youtube Data v3 API。“ [https://code.google.com/apis/console](https://code.google.com/apis/console) ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T07:47:19.343

试试这个代码，这将工作。

```
Video newVideo = new Video();

newVideo.Title ="My Test Movie";
newVideo.Tags.Add(new MediaCategory("Autos", YouTubeNameTable.CategorySchema));
newVideo.Keywords = "cars, funny";
newVideo.Description = "My description";
newVideo.YouTubeEntry.Private = false;
newVideo.Tags.Add(new MediaCategory("mydevtag, anotherdevtag", 
  YouTubeNameTable.DeveloperTagSchema));

newVideo.YouTubeEntry.Location = new GeoRssWhere(37, -122);
// alternatively, you could just specify a descriptive string
// newVideo.YouTubeEntry.setYouTubeExtension("location", "Mountain View, CA");

newVideo.YouTubeEntry.MediaSource = new MediaFileSource("c:\\file.mov",
  "video/quicktime");
Video createdVideo = request.Upload(newVideo); 
```

参考：[https ://developers.google.com/youtube/2.0/developers_guide_dotnet?csw=1#Direct_Upload](https://developers.google.com/youtube/2.0/developers_guide_dotnet?csw=1#Direct_Upload)

# javascript - jquery判断浏览器是否为IE

> ID：15056620
> 
> 赞同：8
> 
> 时间：2013-02-24T21:00:47.957
> 
> 标签：javascript, jquery, html, css, internet-explorer

我将如何检查用户浏览器是否为 IE？我这里有这段代码，但它不起作用。

```
if($.browser.msie && $.browser.version <= 9)
{
    alert('You Are Using An Outdated Browser! Switch To Chrome Or FireFox.');   
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-24T21:03:31.350

试试James Padolsey 的[这个解决方案：](http://ajaxian.com/archives/attack-of-the-ie-conditional-comment)

```
// ----------------------------------------------------------
// If you're not in IE (or IE version is less than 5) then:
//     ie === undefined
// If you're in IE (>5) then you can determine which version:
//     ie === 7; // IE7
// Thus, to detect IE:
//     if (ie) {}
// And to detect the version:
//     ie === 6 // IE6
//     ie> 7 // IE8, IE9 ...
//     ie <9 // Anything less than IE9
// ----------------------------------------------------------
var ie = (function(){
    var undef, v = 3, div = document.createElement('div');

    while (
        div.innerHTML = '<!--[if gt IE '+(++v)+']><i></i><![endif]-->',
        div.getElementsByTagName('i')[0]
    );

    return v> 4 ? v : undef;
}()); 
```

评论中还有其他有趣的解决方案。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-24T21:02:12.537

[`browser`](http://api.jquery.com/jQuery.browser/)在 1.9 中被删除。：

> 描述：包含用户代理的标志，从 navigator.userAgent 读取。我们建议不要使用此属性；请尝试改用特征检测（参见 jQuery.support）。jQuery.browser 可能会在 jQuery 的未来版本中移动到插件中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-24T21:15:19.203

测试功能，而不是浏览器。如果您使用并需要 FormData 就像您在评论中所说的那样，那么将您的支票更改为：

```
if ( !("FormData" in window) ) {
   // Tell the user to use a better browser, or whatever
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-05T22:29:10.080

MS推荐的方式怎么样：http: [//msdn.microsoft.com/en-us/library/ms537509 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537509(v=vs.85).aspx)

（当然 UserAgent 可以被欺骗......但是，如果有人在欺骗他们的 UserAgent，您真的关心他们在您的网站上看到的内容吗？）

```
 function getInternetExplorerVersion()
 // Returns the version of Internet Explorer or a -1
 // (indicating the use of another browser).
 {
    var rv = -1; // Return value assumes failure.

    if (navigator.appName == 'Microsoft Internet Explorer')
    {
        var ua = navigator.userAgent;
        var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");

        if (re.exec(ua) != null) rv = parseFloat( RegExp.$1 );
    }
    return rv;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-10T22:50:00.830

只是一个提醒（即使没有直接回答问题）；与浏览器检测[相比](https://stackoverflow.com/questions/1294586/browser-detection-versus-feature-detection)，用户特征检测总是更好。

这就是 Modernizr 存在的原因；

> **为什么要使用[Modernizr](http://modernizr.com/)？**
> 
> 利用很酷的新 Web 技术非常有趣，除非您必须支持落后的浏览器。Modernizr 使您可以轻松编写条件 JavaScript 和 CSS 来处理每种情况，无论浏览器是否支持某个功能。它非常适合轻松进行渐进增强。

所以你会像这样使用它；

`Modernizr.canvas ? showGraph() : showTable();`

# php - 如何将所选项目移动到div？

> ID：15056627
> 
> 赞同：0
> 
> 时间：2013-02-24T21:01:33.143
> 
> 标签：php

我是 php 的新手，对这个问题感到抱歉，但是我怎样才能（使用 PHP）将选定的项目移动到 div？

```
<div id="btn"></div>
<ul>
    <li class="selected">Alfa</li>
    <li>Beta</li>
    <li>Gamma</li>
    <li>Delta</li>
    <li>Epsilon</li>
    <li>Zeta</li>
</ul> 
```

我想将**li.selected**移动到**div#btn**。我试过`echo "<li class=selected></li>";`但没有用。

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:08:45.187

PHP 在服务器端运行。您尝试做的事情需要 JavaScript。使用以下 jQuery 代码，您可以执行以下操作：

```
 //Iterate through each <li> element having the class "selected"
    $("li.selected").each(function() { 
       //For each of these, append the text within the <li> element into the div with id "btn" (wrapped within a span- can change as needed)
       $('#btn').append('<span>' + $(this).text() + '</span>');
    }); 
```

要在您的页面上导入 jQuery，您可以使用：

```
<script src='http://code.jquery.com/jquery-latest.min.js' type='text/javascript'></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:05:08.053

PHP 是服务器端语言，要将项目移动到 div，您应该向服务器发送请求并构建“新”页面。

对于您的示例，您应该将表单添加到您的页面并将 li 更改为输入类型为单选或复选框。

但我认为对于您的示例，您不需要 PHP - 您可以在 Javascript 中进行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T21:09:19.420

你需要使用 javascript 来做到这一点，使用 jQuery 它会像

```
$('div#btn').text($('li.selected').text()); 
```

如果您想在单击时选择更改时更改它，那么

```
$('li.selected').click(function() {
    var self = $(this);
    self.addClass('selected').siblings().removeClass('selected');
    $('div#btn').text(self.text());
}); 
```

# mono - 使用 Mono.TextEditor 程序集制作我自己的文本编辑器

> ID：15056630
> 
> 赞同：0
> 
> 时间：2013-02-24T21:02:09.673
> 
> 标签：mono, monodevelop, text-editor

我正在尝试使用 ubuntu 12.04 中 MonoDeveloper v:3.0.3.2 中的 Mono.Texteditor.dll 制作自己的文本编辑器。我已将我的代码简化为最简单的示例，但我似乎无法让它工作。我不断收到此错误。

```
Unhandled Exception: System.IO.FileNotFoundException: Could not load file or assembly
'Mono.TextEditor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of 
its dependencies. File name: 'Mono.TextEditor, Version=1.0.0.0, Culture=neutral,
PublicKeyToken=null' at CVXmlEditor.MainClass.Main (System.String[] args) [0x00000]
in <filename unknown>:0 
```

我知道它已经安装并且我添加的它是作为我的项目的参考。

我的代码很简单如下：

```
using System;
using Gtk;
using Mono.TextEditor;

public partial class MainWindow: Gtk.Window
{
 public MainWindow (): base (Gtk.WindowType.Toplevel)
 {
    Build ();

    TextEditor te = new TextEditor();
 }

 protected void OnDeleteEvent (object sender, DeleteEventArgs a)
 {
    Application.Quit ();
    a.RetVal = true;
 }
} 
```

当 is 到达构建文本编辑器的行时，即使编译正常，它也会抛出。有任何想法吗？

这是调试级别日志的输出。

```
Mono: The following assembly referenced from /home/bryan/Work/CVXmlEditor/TestMonoEditor/TestMonoEditor/bin/Debug/TestMonoEditor.exe could not be loaded:
 Assembly:   Mono.TextEditor    (assemblyref_index=2)
 Version:    1.0.0.0
 Public Key: (none)
The assembly was not found in the Global Assembly Cache, a path listed in the MONO_PATH environment variable, or in the location of the executing assembly (/home/bryan/Work/CVXmlEditor/TestMonoEditor/TestMonoEditor/bin/Debug/).

Mono: Failed to load assembly TestMonoEditor[0xf55400]

Mono: Could not load file or assembly 'Mono.TextEditor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies.
The application was terminated by a signal: SIGHUP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:58:45.313

不要使用 MonoDevelop 3.x 代码，因为 MonoDevelop 4.0 刚刚发布，它带来了一些 API 重大更改。所以我建议你使用 monodevelop master 分支以防万一。

完成此操作后，如果您仍然遇到该异常，我想知道您是否将 Mono.TextEditor dll 与可执行文件放在同一文件夹中？如果是，请尝试调整此处解释的一些环境变量（[http://www.mono-project.com/Logging_Runtime_Events](http://www.mono-project.com/Logging_Runtime_Events)），以尝试了解加载程序如何无法找到您的程序集。

另外，这是什么版本的单声道？

# python - Python - 使用 beautifulSoup 查找文本，然后替换原始汤变量

> ID：15056633
> 
> 赞同：18
> 
> 时间：2013-02-24T21:02:15.073
> 
> 标签：python, beautifulsoup

```
commentary = soup.find('div', {'id' : 'live-text-commentary-wrapper'})
findtoure = commentary.find(text = re.compile('Gnegneri Toure Yaya')).replace('Gnegneri      Toure Yaya', 'Yaya Toure') 
```

评论包含需要更改为 Yaya Toure 的 Gnegneri Toure Yaya 的各种实例。

`findAll()`不起作用，因为 findtoure 是一个列表。

我遇到的另一个问题是这段代码只是找到它们并将它们替换为一个名为 findtoure 的新变量，我需要在原始汤中替换它们。

我想我只是从错误的角度看待这个问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-24T21:07:57.890

你不能用*just* `.replace()`做你想做的事。来自[BeautifulSoup 文档`NavigableString`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#navigablestring)：

> 您不能就地编辑字符串，但可以使用[`replace_with()`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#replace-with).

这正是您需要做的；获取每个匹配项，然后调用`.replace()`包含的文本并将原始文本替换为：

```
findtoure = commentary.find_all(text = re.compile('Gnegneri Toure Yaya'))
for comment in findtoure:
    fixed_text = comment.replace('Gnegneri Toure Yaya', 'Yaya Toure')
    comment.replace_with(fixed_text) 
```

如果您想进一步使用这些注释，则需要重新查找：

```
findtoure = commentary.find_all(text = re.compile('Yaya Toure')) 
```

或者，如果您只需要生成的*字符串*（所以 Python`str`对象，而不是`NavigableString`仍然连接到对象的`BeautifulSoup`对象），只需收集`fixed_text`对象：

```
findtoure = commentary.find_all(text = re.compile('Gnegneri Toure Yaya'))
fixed_comments = []
for comment in findtoure:
    fixed_text = comment.replace('Gnegneri Toure Yaya', 'Yaya Toure')
    comment.replace_with(fixed_text)
    fixed_comments.append(fixed_text) 
```

# youtube - 嵌入带有侧列表托盘的 youtube 播放列表

> ID：15056634
> 
> 赞同：11
> 
> 时间：2013-02-24T21:02:22.907
> 
> 标签：youtube, embed, playlist, tray

我一直在使用 javascript 使用 youtube 嵌入播放列表功能。

到目前为止，当我嵌入播放列表时，它看起来像这样：

[http://postimage.org/image/vk6fv56yx/](http://postimage.org/image/vk6fv56yx/)

蓝色圆圈显示播放列表中的项目数，单击时显示缩略图。

当视频开始播放时，需要单击播放列表按钮以显示列表，如下所示：

[http://postimage.org/image/ezzxpy7pn/](http://postimage.org/image/ezzxpy7pn/)

但我希望播放器像在 youtube 页面上一样显示，如下所示：

[http://postimage.org/image/4suta8kuh/](http://postimage.org/image/4suta8kuh/)

现在这是我使用的代码：

```
<script>
  // Load the IFrame Player API code asynchronously.
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/player_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // Replace the 'ytplayer' element with an <iframe> and
  // YouTube player after the API code downloads.
  var player;
  function onYouTubePlayerAPIReady() {
    player = new YT.Player('ytplayer', {
        height: '390',
        width: '640',
        videoId: 'n2ISkJZC6DI',
        playerVars: {
                  listType:'playlist',
                  list: 'PL546E6163151751EE'
                },
        events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
        }
    });
  }

  function onPlayerReady(){
    alert('player ready');
  }

  function onPlayerStateChange(){
    alert('player changed');
  }

</script> 
```

效果很好！但我想知道是否有办法改变播放列表托盘的视图。

非常感谢你们的帮助：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-23T01:52:27.050

您可以使用 youtube 嵌入播放器的 Flash 版本来实现该外观。然而，托盘现在位于左侧。

[![Youtube 播放列表 Flash 播放器](../Images/10518dc228076e6e031f7435fc8110c3.png)](https://i.stack.imgur.com/GGlFo.png)

```
<iframe width='500' height='294' src="https://www.youtube.com/v/videoseries?list=PL546E6163151751EE"></iframe>
```

# javascript - 未定义元素

> ID：15056637
> 
> 赞同：0
> 
> 时间：2013-02-24T21:02:28.713
> 
> 标签：javascript, html, ajax, django

我正在尝试构建一个简单的 AJAX POST。它由用户名和密码组成。用户提交数据后，我的 html 中的用户名元素仍未定义。可能是什么问题呢。这是我的代码。

```
<html>

<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script>
        $(document).ready(function () {

            $("#form").bind('click', function (event) {

                alert(username = $("#username").val())
                event.preventDefault();

                $.post("/main3/",

                username = $("#username").val(),

                function (data) {

                    alert(data);

                    $('#content').html(data)

                })
                return false;
            });

        });
    </script>
</head>

<body>
    <form id="form">Name
        <input type="text" name="username" />
        </br>Age
        <input type="text" name="age" />
        </br>
        <input type="submit" />
    </form>
    <div id="content"></div>
</body> 
```

我已将整个页面包含在内以供参考。我的服务器是 Django。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:03:56.137

您传递参数不正确，将其作为对象传递，并为要选择的元素使用正确的选择器以获取其值（没有 id 为用户名的元素）

```
$.post("/main3/", {username: $("[name=username]").val()}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:05:08.003

您的代码中没有 id 的元素`username`。您有一个**名称**为的输入元素`username`。name 与 id 不同。

```
<input type="text" id="name" name="name" />
                  ^^^^^^^^^^--missing 
```

# jquery - 简单的 jQuery 代码不能在服务器上运行，但可以在本地运行

> ID：15056644
> 
> 赞同：1
> 
> 时间：2013-02-24T21:03:32.657
> 
> 标签：jquery, validation

我很难弄清楚出了什么问题。基本上我想要“感谢您注册！”的消息。当他们输入有效的电子邮件时淡入，并显示“请确保您的电子邮件输入正确”的消息。当他们输入无效的电子邮件时淡入。

在我的 html 中，我有这个：

```
<div id="signUp">
    <form action="" method="post" id="signup">
        <input type="text" class="left" id="email" name="email" placeholder="Enter your email address" value="">
        <input type="submit" id="notify-me" class="button" value="Sign me up!">    
    </form>
</div>
<br>
<p class="hidden">Thank you for signing up!</p> 
```

这是我的jQuery：

```
$(document).ready(function() {
    // all jQuery code goes here
    $(".hidden").hide();
    $("form").submit(function() {
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        if(emailReg.test($("input:first").val()) && $("input:first").val() != "")
        {
            $(".hidden").text("Thank you for signing up!").fadeIn(1000);
            var dataString = "email=" + $("input:first").val();
             $.ajax({
               type: "POST",
               url: "write.php",
               data: dataString,
               success: function() {
                    $("input:first").val("");
                    return false;
                 }
             });
        }
        else
        {
            $(".hidden").text("Please make sure your email was entered correctly.").fadeIn(500);
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:24:44.930

从服务器运行时，可能未加载 jQuery 库。确保您正确链接到它。

如果是这种情况，您可以通过将此行添加到页面的`<head>`

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:36:19.757

您的问题存在于您给我们的范围之外。您在这里拥有的一切都完美无缺。

可能的情况：

1.  jQuery 未包含在服务器上。
2.  在 javascript 的其他地方解析错误。

任何一个都应该根据错误控制台轻松诊断。

# java - 调用另一个类的方法，将对象名称作为参数传递

> ID：15056645
> 
> 赞同：0
> 
> 时间：2013-02-24T21:03:41.220
> 
> 标签：java

Java 新手，尝试编写一个基本的交通模拟，其中我有一个 Intersection 类和一个 SimEngine（事件列表）类。

我的 Intersection 类有一个名为 Arrival() 的方法，指示汽车已到达十字路口。作为该方法的一部分，我想使用 SimEngine 中的 schedule() 方法在 3 秒后的时间戳为该车安排出发时间。

schedule() 方法有四个参数：（我们正在调度的内容、车辆 ID、交叉路口 ID、时间戳）。我的问题是关于传递交叉口 ID（这个模拟有多个交叉口）。如果我不知道 Intersection 对象的引用变量的名称，如何将它传递给另一个函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:07:22.490

您需要首先识别系统中的车辆——一个常见的选择，尤其是在数据库驱动的应用程序中，是使用整数值。因此，为您的每辆车附加一个唯一标识符，然后将它们称为`Integer`或`Long`，具体取决于您预见到的实例数量。

如果您仅将数据保存在内存中，则可以从`Map<Integer,Vehicle>`. 在这里对线程安全采取额外的预防措施，`ConcurrentHashMap`是一个不错的选择。

# html - 从网络摄像头捕获图像

> ID：15056647
> 
> 赞同：12
> 
> 时间：2013-02-24T21:03:43.427
> 
> 标签：html, cross-browser, html5-canvas, getusermedia

我正在尝试从网络摄像头随机捕获图像，然后将其保存到我的服务器，现在我正在使用 getUserMedia 将网络摄像头流式传输到视频元素，然后我可以使用按钮将图像捕获到画布但我是不知道如何将该图像从画布保存到我的服务器。

另一个问题是 getUserMedia 只能在 Chrome、Opera 和 Firefox 中使用，IE 有什么替代品吗？

这是我目前正在使用的：

```
 <video id="video" width="640" height="480" autoplay></video>
<button id="snap">Snap Photo</button>
<canvas id="canvas" width="640" height="480"></canvas>
<button id="getBase" onclick="getBase()">Get Base64</button>
<textarea id="textArea"></textarea>

<script>

    // Put event listeners into place
    window.addEventListener("DOMContentLoaded", function() {
        // Grab elements, create settings, etc.
        var canvas = document.getElementById("canvas"),         
        context = canvas.getContext("2d"),
        video = document.getElementById("video"),
        videoObj = { "video": true },
        errBack = function(error) {
        console.log("Video capture error: ", error.code); 
        };

        // Put video listeners into place
        if(navigator.getUserMedia) { // Standard
            navigator.getUserMedia(videoObj, function(stream) {
                video.src = stream;
                video.play();
            }, errBack);
        } else if(navigator.webkitGetUserMedia) { // WebKit-prefixed
            navigator.webkitGetUserMedia(videoObj, function(stream){
                video.src = window.webkitURL.createObjectURL(stream);
                video.play();
            }, errBack);
        }

        // Trigger photo take
        document.getElementById("snap").addEventListener("click", function() {
            context.drawImage(video, 0, 0, 640, 480);
        });

        document.getElementByID("getBase").addEventListener("click", getBase());

    }, false);                  

    function getBase(){
        var imgBase = canvas.toDataURL("image/png");

        document.getElementByID("textArea").value=imgBase;
    }
</script>` 
```

谢谢堆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T21:37:46.367

您可以使用 canvas.toDataUrl 获取 base64 编码字符串，您可以将其作为参数发布到服务器上的脚本，该脚本将读取它并存储为图像文件。

这是此方法实际实现的简化版本：

```
<script>
function saveImage(){
    var xmlhttp;
    xmlhttp=((window.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));
    xmlhttp.onreadystatechange=function(){
        if (xmlhttp.readyState==4){
            if(xmlhttp.status==200){
                //handle success                
            }
        }
    }
    xmlhttp.open("POST",baseURL,true);
    var oldCanvas = under.toDataURL("image/png");
    var params=oldCanvas;
    xmlhttp.setRequestHeader("Content-type", "application/upload");
    xmlhttp.setRequestHeader("Content-length", params.length);
    xmlhttp.setRequestHeader("Connection", "close");
    xmlhttp.send(params);
}
</script> 
```

这是一个示例 PHP 脚本，它接受 base64 字符串，转换为 .png，给它一个随机文件名，然后保存：

```
<?php
if((isset($GLOBALS["HTTP_RAW_POST_DATA"]))){
    //some validation is necessary, this is just a proof of concept
    if(isset($GLOBALS["HTTP_RAW_POST_DATA"])){
        $params=explode('&',$GLOBALS["HTTP_RAW_POST_DATA"]);
        $imgsrc=str_replace(' ','+',$params[0]);
        $im = imagecreatefrompng($imgsrc);
    }
    if($im){
        $background = imagecolorallocatealpha($im, 255,255,255,127);
        imagecolortransparent($im, $background);
        //random file name
        $m = rand(10e16, 10e24);
        $filename=base_convert($m, 10, 36);
        //save image
        imagepng($im, 'images/'.$filename.'.png');
        imagedestroy($im);
        $size = getimagesize('images/'.$filename.'.png');
        $iH=$size[1];
        $iW=$size[0];
        echo "{\"filename\":\"".$filename."\",\"width\":\"".$iW."\",\"height\":\"".$iH."\"}";
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T20:00:26.513

您可以使用[getUserMedia.js](https://github.com/addyosmani/getUserMedia.js/)或其他包含 Flash 回退的类似库来覆盖 IE。尽管 Flash 最近变得非常不受欢迎。

[CanIUse.com 的流页面](http://caniuse.com/#feat=stream)包含有关支持此功能的信息。

正如机器人伍兹的回答中所说，`canvas.toDataUrl`将为您抓取图像。

# python - 使用 Django 扩展“dumpscript”在 SQLite 和 PostgreSQL 之间移动数据

> ID：15056653
> 
> 赞同：0
> 
> 时间：2013-02-24T21:04:27.007
> 
> 标签：python, django, sqlite, postgresql, run-script

运行 runscript 时出现“未找到模块”，如下所示：

我正在尝试在 Django 扩展中使用 python manage.py 转储脚本将数据从 SQLite 移动到 postgres。（在此特定模型上使用 dumpdata 和 loaddata 时出错）

我生成了看起来不错的脚本。我的问题是我无法运行结果。文档说它必须是一个模块并在我拥有的目录中放置一个**init** .py （它与 blogpostexp.py 文件位于同一目录中）所以，我再次错过了一些基本的 python 知识here ??

第一次我使用 sqlite Django 设置文件并运行：

```
tom@tom-Satellite-A105:~/reschool/careers5$ python manage.py dumpscript blog.BlogPost >     blogpostexp.py
Processing model: BlogPost
Re-processing model: BlogPost 
```

然后我将 Django 设置文件更改为 postgres 文件并运行：

```
(mezz4)tom@tom-Satellite-A105:~/reschool/careers5$ python manage.py runscript blogpostexp
No module for script 'blogpostexp' found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:44:41.013

知道了！您需要将生成的脚本放在“脚本”文件夹中，然后运行 ​​(mezz4)tom@tom-Satellite-A105:~/reschool/careers5$ python manage.py runscript blogpostexp 我有一些与 tzinfo= I 相关的语法错误删除那些内容并导入！还有其他关于缺少类别的问题，但它们并没有停止导入。我想如果我是从应用程序而不是模型中生成的，我也可以得到它，但可能还有其他问题..

总而言之，如果常规的 dumpdata loaddata 方法有任何问题，这似乎是在 Django 中将 SQLLITE 移动到 postgres 的最直接的方法。

# java - 有没有办法让 Java 打印一个数字中的所有小数位，而不是用科学计数法显示它？

> ID：15056654
> 
> 赞同：2
> 
> 时间：2013-02-24T21:04:41.670
> 
> 标签：java

我正在尝试分析函数的内部，以查看哪些分配占用的时间最长。每个单独的操作都非常小，因此我`System.nanoTime()`用来收集所有经过的时间。由于这些时间非常小，Java 以科学计数法打印出它们的数字，这很好，我宁愿看到完整的数字，这样我就可以快速比较一组数字，而不必在它们的指数之间来回查看。

### 代码设置：

```
System.out.println("Time to taken to allocate data: " + 
                       (System.nanoTime() - startTime)/1000000000.0); 
```

### 代码输出：

```
Time taken to allocate: 5.7987E-4 
```

如果可能的话，我希望输出看起来像这样：

```
Time taken to allocate: 0.00057987 
```

有点琐碎，但它会让我更容易快速解析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:09:56.507

像这样的东西怎么样

```
System.out.printf("Time to taken to allocate data: %.8f%n", 
                                   (System.nanoTime() - startTime) / 1E9); 
```

将结果四舍五入到小数点后 8 位（应该足够了）。

* * *

要查看差异：

```
double d = 5.7987E-4;
System.out.println("Time to taken to allocate data: " + d);
System.out.printf("Time to taken to allocate data: %.8f%n", d); 
```

```
分配数据所需的时间：5.7987E-4
分配数据所需的时间：0.00057987

```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T21:19:34.363

对于时序代码，我首选的解决方案是 SLF4J 扩展提供的 Profiler 类： [http ://www.slf4j.org/extensions.html#profiler](http://www.slf4j.org/extensions.html#profiler)

# javascript - jquery ui 选项卡和 jquery 插件 - 插件只被初始化一次

> ID：15056655
> 
> 赞同：0
> 
> 时间：2013-02-24T21:04:50.517
> 
> 标签：javascript, jquery, html, jquery-ui

我目前正在一个网站上工作，它使用 jquery ui 选项卡，在每个选项卡中我都实现了 jcarousel，它在第一个选项卡中看起来和工作正常，但是当我切换到第二个或第三个选项卡时，没有 jcarousel功能为什么会这样？这是我的代码，

```
`$("#related").tabs();`
`$('#complimentary-carousel, #similar-carousel, #viewed-carousel').jcarousel({
    scroll : 5,
    visible: 5
});` 
```

HTML看起来像这样，

```
<div id="related" class="clearfix">
    <ul class="tabs">
        <li><a href="#complimentary">Complimentary</a></li>
        <li><a href="#similar">Similar</a></li>
        <li><a href="#viewed">Recently Viewed</a></li>
    </ul>
    <div id="complimentary">
        <ul id="complimentary-carousel" class="carousel">
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;50</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;50</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;50</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;50</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;50</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;30</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;30</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;30</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;30</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;30</span>
                </a>
            </li>
        </ul>
    </div>
    <div id="similar">
        <ul id="similar-carousel" class="carousel">
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;50</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;30</span>
                </a>
            </li>
        </ul>
    </div>
    <div id="viewed">
        <ul id="viewed-carousel" class="carousel">
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;50</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;30</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;30</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;30</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;30</span>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="assets/img/products/mini-radio.png"/>
                    <span class="price">&euro;30</span>
                </a>
            </li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:14:03.320

请参阅[此处](https://github.com/jsor/jcarousel/issues/434)的问题。似乎使其工作的唯一方法是在“tabsshow”事件上初始化 jcarousel。如果您尝试在隐藏选项卡上初始化它们，您将面临其他插件和小部件的问题。

# mysql - 挑选出两列中不相关的 ID

> ID：15056667
> 
> 赞同：0
> 
> 时间：2013-02-24T21:05:57.873
> 
> 标签：mysql

需要从 col 2 中提取一个 ID，其中 col 1 与 col 2 无关，反之亦然

```
ID |  col1  |  col2  |
______________________
 1 |  20    |   19   |
 2 |  20    |   22   |
 3 |  20    |   23   |
 4 |  19    |   20   |
 5 |  22    |   20   |
 6 |  23    |   20   |
 7 |  20    |   26   |
----------------------- 
```

值 (20, 19), (20, 22) 和 (20, 23) 都是相关的，所以应该跳过这些值，留下 ID = 7 的行

我使用 20 作为会话变量，如果输入了 20，我可以从两列中提取值。但我只想抓住 26。因为相对于 26，20 不在 col2 中。

寻找这个结果

```
ID |  col1  |  col2  |
______________________
 7 |  20    |   26   |
----------------------- 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:15:36.487

`SELECT col2 FROM table WHERE col2 NOT IN (SELECT col1 FROM table GROUP BY col1)`

# matlab - 在simulink中使用一个参数生成函数？

> ID：15056671
> 
> 赞同：0
> 
> 时间：2013-02-24T21:06:10.233
> 
> 标签：matlab, simulink

如何在 simulink 中开发一个模型，该模型在代码生成时会生成一个具有以下性质的函数，该函数将一个参数作为参数：

```
void DoProcessing(ReceiveEvent enEvent)
{
    switch(enEvent)
    {
      case a:
             abcd();
             break;
      case b:
             efgh();
             break;
     }
 } 
```

那么，如何在 simulink 中对一个参数进行建模的函数呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:57:21.783

我想这已经足够接近了（1,2 而不是 a 和 b）：

![在此处输入图像描述](../Images/82513d283225d87b21fe7b92293a3a06.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:00:01.103

我不确定您是在编译 Simulink 模型，还是只是希望 simulink 中的模块按照您的描述运行，所以这里有两种解决方案：

simulink 中有一个名为“ [Embebed Matlab code](http://www.mathworks.es/products/matlab-coder/description5.html) ”的块，您可以在其中用 Matlab 语言编写您想要的任何函数。它可以有你想要的任何输入和输出。

如果您正在做的是将 simulink 模型编译为“.c”文件，并且您想要一个块来执行此操作，为什么不直接用 C 语言编写它呢？

# r - 将多个文件加载并命名到 R 中

> ID：15056672
> 
> 赞同：2
> 
> 时间：2013-02-24T21:06:10.750
> 
> 标签：r, load

我有超过 1000 个数据集我想加载到 R 中，并在加载时分别命名每个数据集。我发现要加载它们，我可以使用以下命令：

```
temp = list.files(pattern="*.csv")

for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i])) 
```

但是如何在加载每个文件时为其命名，以便以后可以轻松地调用每个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:15:50.510

您只需要一个 data.frame 名称列表，类似于您的文件名列表。然后其他一切都几乎相同，除了你的`assign`陈述有一点变化

```
 temp = list.files(pattern="*.csv")

  # just an example
  dataNames <- paste0(c("dataSource_", 1:length(temp)))

  # then everything else is almost the same
  for (i in 1:length(temp)) 
      assign(dataNames[i], read.csv(temp[i])) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T22:19:30.310

最好将您的 data.frame 聚合在一个列表中。使用`sapply`循环你会得到一个带有文件名的命名列表。

```
temp = list.files(pattern="*.csv")
named.list <- sapply(temp, read.csv) 
```

**编辑**

为避免数据框列数相同的情况，需要设置`simplify=FALSE`

```
named.list <- sapply(temp, read.csv,simplify=FALSE) 
```

# debugging - 如何在 OlyDbg 中启用 Microsoft 符号服务器？

> ID：15056676
> 
> 赞同：7
> 
> 时间：2013-02-24T21:06:34.633
> 
> 标签：debugging, symbols, ollydbg, dbghelp

[OlyDbg 第 2 版](http://www.ollydbg.de/version2.html)最近发布。它现在支持使用 Microsoft 符号服务器进行调试：

> 它通过 dbghelp.dll 支持 Microsoft 编译器。新功能是对符号服务器、使用 dbghelp 的堆栈遍历和过程参数名称的支持。

如何让 OlyDbg 使用 Microsoft 符号服务器？

# 你试过什么？

![在此处输入图像描述](../Images/bd12840e941e9242a6d0fb69fae052be.png)

**长答案：**

*   我已将 OlyDbg 指向 DbgHelp.dll 下载符号后将包含符号的文件夹
*   我已经告诉 OlyDbg 可以访问 Microsoft 符号服务器
*   我告诉 OlyDbg 可以使用 DbgHelp.dll
*   我已尝试将 OlyDbg 2.0 随附的 DbgHelp.dll 版本（2008 年）更新为 Windows 8 SDK 随附的版本
*   我设置了一个系统环境变量：

    ```
    _NT_SYMBOL_PATH=SRV*d:\Symbols*http://msdl.microsoft.com/download/symbols 
    ```

*   我已将OlyDbg 应搜索的*“目录”*`SRV*d:\Symbols*http://msdl.microsoft.com/download/symbols`添加为YouTube 视频

     *![在此处输入图像描述](../Images/05609f65fe545fe9f81f773d306df76f.png)* 

 *## 是什么让你认为它不起作用？

*   a) 符号目录为空
*   b) msdl.microsoft.com 没有互联网流量
*   c) OlyDbg 2.0 中没有符号出现

    ![在此处输入图像描述](../Images/fb6eb37ded55aa752fd269b642a80a66.png)

## 也可以看看

*   [如何在 OllyDbg 中使用操作系统符号文件？](http://www.woodmann.com/forum/archive/index.php/t-11946.html)（OlyDbg v1；知道的人因为脾气暴躁而拒绝回答）
*   [如何在 OllyDbg 中使用 OS 符号 pdb 文件？](http://www.openrce.org/forums/posts/187)(OlyDbg v1)
*   [YouTube: HowTo: 将 OllyDbg v2.1d 和 v2.1.0.4 与 MS 调试符号服务器一起使用](http://www.youtube.com/watch?v=aleqOPqPdeQ)（*警告：静音*）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T16:08:33.053

使用您配置的选项启动 ollydbg 时，您应该在“日志数据”子窗口中收到一条消息：`Missing SYMSRV.DLL, Microsoft Symbol Server is deactivated`.

从 microsoft 服务器下载符号的文件称为`symsrv.dll`. 我不认为微软只为该文件提供单一下载。但是，它包含在各种 Microsoft 开发人员包中：

*   微软视窗sdk
*   微软windows驱动套件
*   微软调试工具（现在在 Windows 驱动程序包中？）

只需下载并安装其中任何一个，然后在文件夹中搜索`symsrv.dll`. 小心不要获得 x64 变体，因为它具有相同的名称。将此文件复制到 ollydbg 目录，一切正常。*

# jquery-ui - jqueryui的凉亭自定义构建

> ID：15056677
> 
> 赞同：24
> 
> 时间：2013-02-24T21:06:40.577
> 
> 标签：jquery-ui, bower

在[Bower](http://twitter.github.com/bower/)中，我如何获取并继续更新 jQuery UI 的自定义构建？假设我只需要 jQuery UI 中的 Core、Widget、Mouse、Position、Sortable 和 Accordion 组件？我宁愿不下载整个 jQuery UI 库。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-06-09T10:42:24.470

为了给出一个可能的方法的实际示例并回答 Egg 的评论，这里有一种方法。

就像`bower install`Sindre 建议的那样，只在 html 中包含您需要的脚本。

```
 <script src="bower_components/jquery/dist/jquery.js"></script>
   <script src="bower_components/jquery-ui/ui/core.js"></script>
   <script src="bower_components/jquery-ui/ui/widget.js"></script>
   <script src="bower_components/jquery-ui/ui/mouse.js"></script>
   <script src="bower_components/jquery-ui/ui/sortable.js"></script>
   <script>
     (function() {
       $( "#some-div" ).sortable();  // it works!
     })();
   </script>

  </body>
</html> 
```

这已经有效，并且在使用您的应用程序或网站时显着减少了用户下载的库的文件大小。这是[直接从马口中](http://learn.jquery.com/jquery-ui/environments/bower/)发表的关于此的帖子。

为了进一步提高下载速度，您可以以您喜欢的方式创建自己的包，可能使用[Grunt usemin](https://github.com/yeoman/grunt-usemin)或您喜欢的任何其他方法来获取这种 html：

```
 <script src="scripts/bundle.min.js"></script>
   <script>
     (function() {
       $( "#some-div" ).sortable(); // it works!
     })();
   </script>

  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T10:46:25.850

你可以有自己的叉子，但你也需要保持最新。让它下载整个东西，只使用你需要的部分，我看不出有什么问题。

# javascript - 如何加载 div 并刷新 mysql 查询

> ID：15056683
> 
> 赞同：0
> 
> 时间：2013-02-24T21:06:58.020
> 
> 标签：javascript, jquery, ajax, html, load

我搜索了档案并尝试了给出的示例，但仍然没有运气。我想要做的是重新加载一个 div 并查询“uid”变量。我需要使用辅助文件来执行此操作还是可以在同一页面上完成？非常感谢任何积极的帮助。

的HTML：

```
<a id="cms-user-list1" href="#" onclick="clickToSlide(this.id, 'cms-user-orders-detail', '65');return false;"> 
```

Javascript：

```
function clickToSlide(er, cr, user_id)
{
    var pathtopage = 'blah.php';
    var a = parseInt($('#'+cr).css("left"));

    if (a ==50) {
        //SLIDE DIV LEFT AND LOAD UID
        $('#'+cr).animate({"left": "+=600px"}, "slow").load(pathtopage, {uid: user_id});

    } else {
        //SLIDE CURRENT DIV RIGHT, LOAD NEW UID AND SLIDE LEFT
        $('#'+cr).animate({"left": "-=600px"}, "slow"); 
        $('#'+cr).animate({"left": "+=600px"}, "slow").load(pathtopage, {uid: user_id});
    }       
} 
```

**更新 3/7**

我无法找到我的问题的确切解决方案，所以我将数据发布到第二个 PHP 文件，效果很好！现在我遇到了动画问题。我可以再用一双眼睛看看我哪里错了吗？

```
function populateDetails(er, div, url, user_id) {        

    var a = parseInt($('#'+div).css("left"), 10);

    // ajax request
    $.ajax({
        type  : 'POST',
         url  : url,
         data : "uid="+user_id,
         beforeSend : function() {
             $('#'+div).html('processing');
         },
         error : function() {
             alert("Something went wrong. Try again.");
         },
         // success callback
         success : function (response) {
            if (a ==50) {
                $('#'+div).animate({"left": "+=600px"}, "slow").html(response);
            } else {
                $('#'+div).animate({"left": "-=600px"}, "slow").html('', function() {
                   $('#'+div).html(response).animate({"left": "+=600px"}, "slow"); // im not certain if `this` will work here
                });
            }            
         },
         timeout : 3000,
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:55:22.507

注意：我不太喜欢使用 jQuery，所以我的代码可能不起作用！

我不明白为什么你不能重复使用同一个文件（尽管你可能需要做一些事情来确保它不会在本地缓存它）

我认为您可能想要更改处理加载/重新加载 div 的方式。

以下（希望）将容器滑开，并开始（重新）加载内容，然后在加载完成后将容器滑回。（希望链接顺序是正确的，不确定他们执行的方向！）

```
$('#'+cr).animate({"left": "-=600px"}, "slow").load(pathtopage, {"uid": user_id}, function() {
   $(this).animate({"left": "+=600px"}, "slow"); // im not certain if `this` will work here
}); 
```

您可能会`.load()`被完整的回调触发，`animate()`以避免可能的内容闪烁。

**更新**

我认为您的问题是您的论点, 和`er`正在`div`丢失（我不知道这是事实）。我已经添加了上下文参数，并将您的更改为并重新排序了您的最后一件事，因为它没有回调，它就是这样。`url``user_id``$('#'+div)``$(this)``.html()``.animate()`

```
function populateDetails(er, div, url, user_id) {        
     $.ajax({
        type: 'post',
        url: url,
        data: 'uid='+user_id;
        context: $('#'+div),
        beforeSend: function() {
            $(this).html('processing');
        },
        error: function() {
            alert("Something went wrong!");
        },
        success: function(response) {
            var a = parseInt($(this).css('left'), 10); 
            if (a == 50) {
                $(this).animate({'left': '+=600px'}, 'slow').html(response);
            } else {
                $(this).animate({'left': '-=600px'}, 'slow', function() {
                    $(this).html(response).animate({"left": "+=600px"}, "slow");
                }).html('');
            }   
        },
        timeout: 3000
     });
}; 
```

如果您可以多描述一下“问题”，那将很有帮助:)

# jqgrid - 当jqgrid只有一页时隐藏分页器

> ID：15056684
> 
> 赞同：0
> 
> 时间：2013-02-24T21:07:01.953
> 
> 标签：jqgrid, pagination

当所有结果都放在一页上时，如何隐藏 jqgrid 页脚中的分页？

我认为这应该是默认行为，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-27T02:12:59.913

如果您使用服务器数据源，则需要 loadComplete 事件

```
loadComplete: function(data) {
    if (data.total <= 1) {
        $("#pager").hide();
    } else {
        $("#pager").show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:40:30.387

它不是 jqgrid 的默认行为。您必须使用条件来隐藏它。你可以在`gridComplete()`功能上做同样的事情。您可以隐藏寻呼机或将其清空，如下所示

```
gridComplete: function(){
  if(condition)          
   $( '#' + gridId + 'pager_center' ).hide();
  // or you can also use
   $('#pager_center').empty();
}, 
```

# ejb-3.0 - EJB 远程查找失败并出现 javax.naming.NameNotFoundException

> ID：15056685
> 
> 赞同：4
> 
> 时间：2013-02-24T21:07:13.567
> 
> 标签：ejb-3.0, jboss7.x

我正在 JBOSS 7.1.1 服务器中测试 EJB 客户端。EJB 的服务端代码也在同一个虚拟机上。它在运行时抛出“java.lang.ClassNotFoundException: com.zreflect.emyed.ejb.interfaces.IWhiteBoardServiceRemote”错误。设置客户端时一切似乎都正确，但我无法弄清楚问题所在。请让我知道我在哪里做错了。

**服务器端代码**

```
@Stateless(name = "WhiteBoardService")
@Local(IWhiteBoardService.class)
@Remote(IWhiteBoardServiceRemote.class)
public class WhiteBoardService implements IWhiteBoardService {

    private WhiteBoardPersistenceImpl whiteBoardPersistenceImpl = WhiteBoardPersistenceImpl
            .getInstance();
    private CoursePersistenceImpl coursePersistenceImpl = CoursePersistenceImpl
            .getInstance();

    @Override
    public LongKeyValue[] getWhiteBoardContent(long courseSessionGuid, UserSession userSession) {
        // returns the attachment Guid and the Attachment Title
        return whiteBoardPersistenceImpl.getAttachmentForWhiteBoard(courseSessionGuid, userSession) ;
    }...... 
```

本地接口

```
@Local
public interface IWhiteBoardService {

    public WhiteBoardSessionVO openWhiteBoard(long courseSessionGuid, UserSession userSession);
    public WhiteBoardSessionVO joinWhiteBoard(long courseSessionGuid,UserSession userSession);
    public LongKeyValue[] getWhiteBoardContent(long courseSessionGuid, UserSession userSession);
} 
```

远程接口

```
public interface IWhiteBoardServiceRemote extends IWhiteBoardService{

} 
```

**EJB 已部署**

```
20:42:32,278 INFO  [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor] (MSC service thread 1-3) JNDI bindings for session bean named WhiteBoardService in deployment unit subdeployment "emyed-ejb-1.0.jar" of deployment "emyed-ear.ear" are as follows:

    java:global/emyed-ear/emyed-ejb-1.0/WhiteBoardService!com.zreflect.emyed.ejb.interfaces.IWhiteBoardServiceRemote
    java:app/emyed-ejb-1.0/WhiteBoardService!com.zreflect.emyed.ejb.interfaces.IWhiteBoardServiceRemote
    java:module/WhiteBoardService!com.zreflect.emyed.ejb.interfaces.IWhiteBoardServiceRemote
    java:jboss/exported/emyed-ear/emyed-ejb-1.0/WhiteBoardService!com.zreflect.emyed.ejb.interfaces.IWhiteBoardServiceRemote
    java:global/emyed-ear/emyed-ejb-1.0/WhiteBoardService!com.zreflect.emyed.ejb.interfaces.IWhiteBoardService
    java:app/emyed-ejb-1.0/WhiteBoardService!com.zreflect.emyed.ejb.interfaces.IWhiteBoardService
    java:module/WhiteBoardService!com.zreflect.emyed.ejb.interfaces.IWhiteBoardService 
```

**客户端类**

```
public class WhiteboardService {

    public static void main(String[] args){

        Context context=null;
           try
             {
                    Properties props = new Properties();
                    props.put(Context.INITIAL_CONTEXT_FACTORY, "org.jboss.naming.remote.client.InitialContextFactory");
                    props.put(Context.PROVIDER_URL, "remote://localhost:4447");
                    props.put(Context.SECURITY_PRINCIPAL, "ejbremote");
                    props.put(Context.SECURITY_CREDENTIALS, "remote4u");
                    context = new InitialContext(props);
                System.out.println("\n\tGot initial Context: "+context);
             }
           catch (Exception e)
             {
                    e.printStackTrace();
              }

             // Lookup Format will be
             // <app-name>/<module-name>/<distinct-name>/<bean-name>!<fully-qualified-classname-of-the-remote-interface>

           IWhiteBoardServiceRemote whiteboardService = null;
        try {
            Object obj = context.lookup("java:jboss/exported/emyed-ear/emyed-ejb-1.0/WhiteBoardService!com.zreflect.emyed.ejb.interfaces.IWhiteBoardServiceRemote");
        } catch (NamingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
             System.out.println("\n\t (\"MiddlewareMagic\") = "+ whiteboardService.getWhiteBoardContent(1, null));

    } 
```

**控制台日志**

```
02:13:45,303  INFO xnio:63 - XNIO Version 3.0.3.GA
02:13:45,355  INFO nio:55 - XNIO NIO Implementation Version 3.0.3.GA
02:13:45,469  INFO remoting:70 - JBoss Remoting version 3.2.3.GA

    Got initial Context: javax.naming.InitialContext@5a92668c
javax.naming.NameNotFoundException: jboss/exported/emyed-ear/emyed-ejb-1.0/WhiteBoardService!com.zreflect.emyed.ejb.interfaces.IWhiteBoardServiceRemote -- service jboss.naming.context.java.jboss.exported.jboss.exported.emyed-ear."emyed-ejb-1.0"."WhiteBoardService!com.zreflect.emyed.ejb.interfaces.IWhiteBoardServiceRemote"
    at org.jboss.as.naming.ServiceBasedNamingStore.lookup(ServiceBasedNamingStore.java:97)
    at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:178)
    at org.jboss.naming.remote.protocol.v1.Protocol$1.handleServerMessage(Protocol.java:127)
    at org.jboss.naming.remote.protocol.v1.RemoteNamingServerV1$MessageReciever$1.run(RemoteNamingServerV1.java:73)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Exception in thread "main" java.lang.NoClassDefFoundError: com/zreflect/emyed/ejb/interfaces/IWhiteBoardServiceRemote
    at com.zreflect.emyed.whiteboard.service.WhiteboardService.main(WhiteboardService.java:47)
Caused by: java.lang.ClassNotFoundException: com.zreflect.emyed.ejb.interfaces.IWhiteBoardServiceRemote
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 1 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T11:30:22.687

您是否尝试过可移植的 JNDI 名称：

```
java:global/emyed-ear/emyed-ejb-1.0/WhiteBoardService!com.zreflect.emyed.ejb.interfaces.IWhiteBoardServiceRemote 
```

代替

```
java:jboss/exported/emyed-ear/emyed-ejb-1.0/WhiteBoardService!com.zreflect.emyed.ejb.interfaces.IWhiteBoardServiceRemote 
```

?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T20:52:54.243

您的堆栈跟踪表明异常是在客户端引发的。*这可能是因为您在客户端的*类路径中没有`com.zreflect.emyed.ejb.interfaces.IWhiteBoardServiceRemote`类定义。

 *您可能需要参考[AS7 中的类加载](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7)。我将不得不看看您如何打包您的应用程序以提供进一步的帮助。*

# java - 通过 ajax 将 blob 发送到 servlet

> ID：15056686
> 
> 赞同：2
> 
> 时间：2013-02-24T21:07:16.740
> 
> 标签：java, ajax, jakarta-ee, servlets, xmlhttprequest

编辑：整个问题原来是网络问题，但如果您看到任何关于如何优化流程的想法，我仍然会很感激。

我对 Servlet 还很陌生，在我的旅程中不久，我遇到了一个与性能有关的问题。我正在尝试通过 Google Chrome 浏览器中的 XHR 对象发送视频文件。视频文件存储在 Blob 对象中。我在我的 JavaScript 脚本中使用了这个函数：

```
function upload(blob) {
  var xhr = new XMLHttpRequest();
  xhr.open('POST', '/Test/Odbieracz', true);
  xhr.onload = function(e) { console.log("loaded"); };
  xhr.onreadystatechange = function(){
      console.log("state: " + xhr.readyState);
  };
  // Listen to the upload progress.
  xhr.upload.onprogress = function(e) { console.log("uploading..."); };
  xhr.setRequestHeader("Content-Type", "video/webm");
  xhr.send(blob);
} 
```

它运行良好，因为 Blob 到达了我使用这段代码处理它的 Servlet：

```
byte[] buffer = new byte[16 * 1024];

InputStream input = request.getInputStream();       
OutputStream output = new FileOutputStream("costam0.webm");
int bytesRead;
while ((bytesRead = input.read(buffer)) != -1){
    System.out.println(bytesRead);
    output.write(buffer, 0, bytesRead);
}
output.close();
input.close(); 
```

它也保存文件。

我确实遇到的问题是它非常慢，根据我的计算它可以处理大约 42kB/s，这对于与视频文件有关的 Web 服务来说非常慢。我已经坐在这里几个小时试图找到一种方法来加快速度，或者至少找到瓶颈，但不幸的是我不知道它可能在哪里。

我的怀疑是浏览器导致了延迟，我在我的 Servlet 中使用了不同的 InputStream 导致一个本地文件（我试图通过 XHR 上传的同一个文件）并且它根本没有问题处理它，花费更少超过一秒钟。服务器位于我的本地主机上，所以我认为网络一点也不落后。

如果有人以前遇到过这个问题，我将不胜感激任何指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:19:03.613

一些想法：

增加缓冲区大小：也许：

```
byte[] buffer = new byte[1024 * 1024]; 
```

不要经常写输出文件。Java 必须在缓冲区的其余部分等待时执行昂贵的 I/O 操作。权衡是，如果您正在处理小文件，您将浪费一些内存。

使用 a `BufferedOutputStream`：原因同上。强烈建议在编写非常大的文件时使用 BufferedOutputStream。您甚至不必担心在每个循环期间进行编写。只需在循环完成后调用 buffOut.flush() 进行一次写入。例子：

```
BufferedOutputStream buffOut = new BufferedOutputStream(new FileOutputStream("costam0.webm"));       
int bytesRead;
while ((bytesRead = input.read(buffer)) != -1){
    System.out.println(bytesRead);
    output.write(buffer, 0, bytesRead);
}
buffOUt.flush() 
```

您是否在调用 println 时计算了这些计算？不要那样做。您确认该过程有效，只是速度很慢。无需每次都调用 println。

另外，您是如何“计算”速度的？

# java - 如何在jList中存储多个字符串

> ID：15056690
> 
> 赞同：0
> 
> 时间：2013-02-24T21:07:56.277
> 
> 标签：java, eclipse, swing, jlist, listselectionlistener

我如何表示多个字符串行代码，例如，如果我制作了一个 jlist 并使用 String 来复制存储在字符串中的值以出现在 Jtextfield 上，我可以创建另一个字符串行以在另一个 Jtextfield 中显示电影价格同时例如，选择了 jList 值：在 Jlist 中，我选择了一个组件，它将在 Jtextfield 中显示组件，在另一个 jTextfield 中显示价格？

```
 jList99.setModel(new AbstractListModel() {

        String[] strings = {"mouse,keyboard"};
        public int getSize() { return strings.length; }
        public Object getElementAt(int i) { return strings[i]; }
    });
    jList99.addListSelectionListener(new ListSelectionListener() {
        public void valueChanged(ListSelectionEvent evt) {
            jList1ValueChanged(evt);        
        }
    });

private void jList1ValueChanged(ListSelectionEvent evt) {     

     if(!jList99.getValueIsAdjusting())
     { 
          jTextField9.setText((String) jList99.getSelectedValue());
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:15:59.047

您的 JList 不必包含简单的 String 对象。您可以通过使用自定义对象来实现您的目标，例如：

```
class MovieInfo {
    private String name;
    private String price;

    // insert appropriate getters and setters here

    public String toString() {
        return name + " " + price;
    }
} 
```

这些对象将在 JList 中显示它们的 toString 值，但是当您调用 (MovieInfo)getSelectedValue() 时，您将可以直接访问名称和价格。

# javascript - Google Maps Div 显示：无 未居中

> ID：15056696
> 
> 赞同：0
> 
> 时间：2013-02-24T21:08:15.143
> 
> 标签：javascript, google-maps-api-3, coldfusion

我有问题的 Google Map div 没有正确显示

```
<div id="g#arena.aid#" style="width: 600px; height: 300px; display: none"></div> 
```

不显示 - 代码显示地图是 div - 但未居中...未以标记为中心...

好像找不到解决办法。。。头疼。。。

所以列出竞技场的......希望隐藏他们的地图直到被调用......用图像调用：

```
 <img src="../images/gps1.png" height=25 border=0 alt="Show Map" 
           onclick="javascript:showElement('g#arena.aid#'); google.maps.event.trigger(document.getElementById('g#arena.aid#'),'resize');"> 
```

这是javascript - 可以很好地显示地图，但它没有以标记为中心......

地图需要主体加载...

```
 <body onload="initialize()">

  <script type="text/javascript">
    function initialize() {

    var #arena.aid#Latlng = new google.maps.LatLng(
        #arena.agpslat#,#arena.agpslong#);

    var #arena.aid#Options = {
        zoom: 15,
        center: #arena.aid#Latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(
        document.getElementById("g#arena.aid#"),
        #arena.aid#Options);

    var marker = new google.maps.Marker({
        position: #arena.aid#Latlng,
        map: map,
        title: '#JsStringFormat(arena.arenaname)#'
       });
    }

  google.maps.event.addDomListener(window, 'load', initialize);

  google.maps.event.trigger(map, 'resize');

  </script> 
```

与此相关，此代码可以很好地显示地图-但不能居中标记-想法？

这是生成的脚本...显示完整地图 - 但未居中...

```
 <img src="../images/gps1.png" height=25 border=0 alt="Show Map" 
    onclick="javascript:showElement('gxoazormo'); google.maps.event.trigger(document.getElementById('gxoazormo'),'resize');">

   <div id="gxoazormo" style="width: 600px; height: 300px; display: none"></div>

    <script type="text/javascript">
      function initialize() {

    var xoazormoLatlng = new google.maps.LatLng(
        51.0914344788,-114.200531006);

    var xoazormoOptions = {
        zoom: 15,
        center: xoazormoLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(
        document.getElementById("gxoazormo"),
        xoazormoOptions);

    var marker = new google.maps.Marker({
        position: xoazormoLatlng,
        map: map,
        title: 'Bowness Sportsplex'
     });
    }

      google.maps.event.addDomListener(window, 'load', initialize);

google.maps.event.trigger(map, 'resize');

     </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T15:05:30.673

```
var currCenter = map.getCenter();
google.maps.event.trigger(map, 'resize');
map.setCenter(currCenter); 
```

它居中...

# sql - 在 FULL JOIN 中添加多列，假设空行为零

> ID：15056704
> 
> 赞同：0
> 
> 时间：2013-02-24T21:08:41.653
> 
> 标签：sql, postgresql, join, postgresql-9.1, outer-join

我运行 PostgreSQL，我有多个 (10+) 具有相同列名和格式的表，我想对它们的两个列求和。***如果其中一个表中缺少一行，我需要将其视为 0 (zero)***。

**两表示例：**

表A：

```
primkey | year | month | day | data_value
--------+------+-------+-----+-----------
20120101| 2012 |  01   |  01 |    3.7
20120102| 2012 |  01   |  02 |    1.0 
```

表B：

```
primkey | year | month | day | data_value
--------+------+-------+-----+-----------
20120101| 2012 |  01   |  01 |    1.3
20120103| 2012 |  01   |  03 |    5.5 
```

想要的输出：

```
primkey | year | month | day | data_value
--------+------+-------+-----+-----------
20120101| 2012 |  01   |  01 |    5.0
20120102| 2012 |  01   |  02 |    1.0
20120103| 2012 |  01   |  03 |    5.5 
```

我正在考虑这样做：

```
SELECT a.primkey, a.year, a.month, a.day, a.data_value+b.data_valueas data_value FROM "TableA" as a FULL JOIN "TableB" as b ON a.primkey = b.primkey; 
```

但它会产生这个（缺少一些 data_values）：

```
primkey | year | month | day | data_value
--------+------+-------+-----+-----------
20120101| 2012 |  01   |  01 |    5.0
20120102| 2012 |  01   |  02 |    
20120103| 2012 |  01   |  03 | 
```

注意：primkey 是唯一的，并且是 PRIMARY KEY，这需要对加入 10 多个表有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:22:07.953

```
SELECT COALESCE(a.primkey, b.primkey) AS primkey
  , COALESCE(a.year, b.year)          AS year
  , COALESCE(a.month, b.month)        AS month
  , COALESCE(a.day, b.day)            AS day
  , COALESCE(a.data_value,0) + COALESCE( b.data_value, 0) AS data_value
FROM "TableA" AS a
FULL JOIN "TableB" AS b ON a.primkey = b.primkey
   ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:17:52.097

联合所有表，然后按主键分组。该值的总和将是您正在寻找的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T22:36:28.403

按照亚伯拉罕的建议，以下是实际代码：

```
SELECT x.primkey, x.year, x.month, x.day
   , sum(data_value) AS data_value 
FROM 
  (SELECT * FROM "TableA" 
   UNION ALL 
   select * FROM "TableB") 
AS x 
GROUP BY primkey, year, month, day; 
```

# php - 我的文件获取内容功能在此主机上不起作用

> ID：15056709
> 
> 赞同：1
> 
> 时间：2013-02-24T21:09:18.047
> 
> 标签：php

PHP 5.2.0

我的 php.ini： http: [//pastebin.com/AXsDAzRR](http://pastebin.com/AXsDAzRR)

问题：

功能文件获取内容在我的网络服务器上不起作用。

在此处阅读有关此问题的更多信息：[PHP 检查值是否为真，如果是，请执行此操作 - 不起作用](https://stackoverflow.com/questions/15055984/php-check-if-a-value-says-true-if-yes-do-this-doesnt-work)

我确实在这台主机上死了（$check_GTL），然后才检查它的真假；

```
if (isset($_POST['submit'])) {
    $check_GTL = file_get_contents("http://gamingtoplist.net/?hasvoted=187&ip=82.81.33.168");
                die($check_GTL);    
        if ($check_GTL != "true") {
                //$errors[] = "Sorry, but it seems like you haven't voted on all links, please contact Jony.";
                } else {
                echo 'voted';
                }
        } 
```

在我当前的主机上，单击提交按钮后，它会将我发送到一个空白页面。

在我的另一台主机上，单击提交按钮后，它会将我发送到一个显示“真实”的页面。

这是一个非常奇怪的错误，并且 100% 与我的第一个主机有关。

需要更多信息吗？感谢您的支持！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:41:59.847

```
$ch = curl_init();
curl_setopt ($ch, CURLOPT_URL, "http://gamingtoplist.net/?hasvoted=187&ip=82.81.33.168");
curl_setopt ($ch, CURLOPT_HEADER, 0);
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$check_GTL = curl_exec($ch);
        if ($check_GTL != "true") {
                //$errors[] = "Sorry, but it seems like you haven't voted on all links, please contact Jony.";
                } else {
                echo 'voted';
                } 
```

在我的本地服务器（ub untu xampp）上它可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:44:50.483

问题可能是`allow_url_fopen`在它不工作的主机上被禁用。见[http://php.net/manual/en/features.remote-files.php](http://php.net/manual/en/features.remote-files.php)

# sql-server - SQL Server - 附加带有旋转的文本字段

> ID：15056712
> 
> 赞同：1
> 
> 时间：2013-02-24T21:09:42.740
> 
> 标签：sql-server, append, log-rotation

假设我有`nvarchar(300)`专栏。

我将文本附加如下：

```
update tablename set fieldname = fieldname + 'appended string' 
```

如何告诉 SQL Server 从头开始​​自动修剪文本以确保它永远不会超过最大列长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:13:37.933

您可以使用该[`RIGHT`](http://msdn.microsoft.com/en-us/library/ms177532.aspx)功能：

```
update tablename set fieldname = RIGHT(fieldname + N'appended string', 300) 
```

# java - Java 7 上的 ColdFusion 9.01

> ID：15056729
> 
> 赞同：1
> 
> 时间：2013-02-24T21:11:54.647
> 
> 标签：java, coldfusion, java-7, coldfusion-9

尝试在 Java 7 上运行 ColdFusion 9.01 时是否有损坏的列表？

我遇到了 PDF 生成问题。

此链接： http: [//blogs.coldfusion.com/post.cfm/java-7-support-for-coldfusion](http://blogs.coldfusion.com/post.cfm/java-7-support-for-coldfusion)表明它与 PDF 上的 textarea 有关

但是是否有完整的已知问题列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:52:06.223

Java 1.7 Update 15 现在正式支持 Cumulative Hotfix 3（现在被 4 取代）

[http://helpx.adobe.com/coldfusion/kb/cumulative-hotfix-3-coldfusion-901.html](http://helpx.adobe.com/coldfusion/kb/cumulative-hotfix-3-coldfusion-901.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:26:09.837

就像其他人说的那样。目前，官方仅支持 Java 6。

Adobe 已宣布更改对 Java 7 的支持，但还没有任何可靠的东西。

同时，请查看[http://bloginblack.de/2013/02/another-java-security-baseline-update-coldfusion-railo-and-others/](http://bloginblack.de/2013/02/another-java-security-baseline-update-coldfusion-railo-and-others/)了解更多关于该主题以及为什么应该更新到最新版本的信息同时Java 6。

# java - 带有子列表的链表

> ID：15056734
> 
> 赞同：0
> 
> 时间：2013-02-24T21:12:21.557
> 
> 标签：java, linked-list, singly-linked-list, sublist, jgrasp

我在不使用 java 泛型的情况下如何在 java 中的单链表中创建多个子列表时有些挣扎。我已经阅读了溢出中的多个问题，其中大多数都实现了泛型来解决问题。本质上，我想要一个结构，它可以创建一个包含 Dog、Cat 和 Snake 等值的链表，然后为每个值创建一个子列表，例如：

狗 ---> 贵宾犬，猎犬

|

v

猫 ---> 西伯利亚

|

v

蛇 ---> 眼镜蛇，蟒蛇

我相信我的主要问题在于我的 add 方法：

```
public void add(String topList, String botList)
    {
        head = new Node(topList, botList, head);
    } 
```

其中 topList：[Dog, Cat, Snake] 和 botList：[Poodle,Retriever, Siberian, Cobra,Python]。

我觉得这个 addMethod 只是将我的头节点分支到两个不同的列表中，而不是实际上将我的 topList 与我的 botList 的元素链接起来。

我也试过：

```
public void add(String topList, String botList)
    {
        head = new Node(topList, head);
        head = new Node(botList, topList);
    } 
```

但我很确定这不起作用，因为我的 void add 方法中有两个 String 变量。

所以我的问题是我将如何将我的 topList 元素与我的 botList 元素链接起来？任何帮助或参考将不胜感激。

这是我到目前为止所拥有的：

```
 import java.util.*;
  public class animal
  {
    Node head;
    public animal()
    {
        head = null;
    }
    public void add(String topList, String botList)
    {
        head = new Node(topList, botList, head);
    }
    public String toString()
    {
        String x;
        StringBuilder sb = new StringBuilder();
        Node p = head;
        while (p != null)
        {
            sb.append(p.topList + "\n " + p.botList +"\n");
            p = p.next;
        } 
        return new String (sb);
    }
    public static class Node
    {
        String topList;
        String botList;
        Node next;
        public Node (String t, String b, Node n)
        {
            topList = t;
            next = n;
            botList = b;
        }
    }
    public static void main(String args[])
    {
        animal list = new animal();
        list.add("Snake", "python");
        list.add("Dog", "poodle");
        list.add("Cat", "siberian");
        System.out.println(list);
    }
   } 
```

输出有点理想，但我知道我没有将两个列表链接在一起。此外，我只能向 botList 添加一个名称，并且我希望能够添加更多名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:30:25.760

我猜您在 Animal 类中需要以下方法：

```
public String get(String animal)
    {
        Node temp = head;
        while (temp!=null)
        {
            if (animal.equals(temp.topList))
            {
                return temp.botList;
            }
            temp = temp.next;
        }
        return null;
    } 
```

在主体中，它看起来像这样：

```
public static void main(String args[])
{
    Animal list = new Animal();

    list.add("Snake", "python,Cobra");
    list.add("Dog", "poodle,Retriever");
    list.add("Cat", "siberian");
    System.out.println(list);
    System.out.println(list.get("Dog"));//shows poodle,Retriever

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:22:46.793

我可能会产生误解，但您似乎在以一种有点奇怪的方式构建它。您有两个列表：一个包含主要类型（狗、猫、蛇），另一个包含所有不同的子类型（贵宾犬、猎犬、西伯利亚、眼镜蛇、蟒蛇）。

相反，我认为第一个列表中的每个项目都应该链接到新列表，这意味着您总共有四个列表：

1.  顶级列表：（狗，猫，蛇）
2.  3 个子列表：（贵宾犬，猎犬），（西伯利亚），（眼镜蛇，Python）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T21:46:01.337

像这样想。

单链表的内容仅包含数据和对链中下一个节点的引用。如果我们将第二个链表视为数据，那么我们可以将节点设计成这样。

*   在顶层，我们创建的每个节点都是一些`Animal`（狗、猫和蛇）的节点。
*   在数据层，我们插入的每一条数据都是一个链表，其中包含一些`AnimalType`关于它的信息。

你不会使用泛型，即使你这样做会更干净，但我确实设想这样的事情：

```
public class Animal {
    private String type;
    private AnimalType classification;

    // usual constructor and accessor
}

public class AnimalType {
    private String typeName;

    // usual constructor and accessor
}

public class AnimalNode {
    private Animal name;
    private AnimalTypeList data;
    private AnimalNode next;

    // usual constructor, accessor and mutator
}

public class AnimalList {  // AnimalList and AnimalTypeList are super similar
    private AnimalNode head;
    // operations and logic on list
}

public class AnimalTypeList {
    private AnimalType head;
    // operations and logic on list
} 
```

# exception - Slick2D 可运行 jar (JarSplice) 找不到声音资源？“找不到资源”错误

> ID：15056735
> 
> 赞同：0
> 
> 时间：2013-02-24T21:12:31.997
> 
> 标签：exception, audio, jar, resources, slick2d

我昨天刚开始制作 Slick2D 游戏，一切都很好，直到我添加了声音。游戏本身在 Eclipse 中运行良好，并且声音按预期播放。但是，当我将其编译成 jar 文件，然后使用 JarSplice 编译成胖 jar 时，生成的可运行 jar 会在几分之一秒内打开游戏窗口，然后崩溃。如果我从命令提示符运行 jar，我可以看到返回的错误是：

错误：找不到资源：Assets/sound/THRUST.wav Java.lang.RuntimeException：找不到资源：Assets/sound/THRUST.wav

...等等。我检查了jar文件，所有声音文件都成功添加了。我还尝试在没有声音代码的情况下构建 jar，它工作正常，因此图像资源正确加载。它只存在健全资产的问题。这是我的代码：

```
package starMiner;

import org.newdawn.slick.AppGameContainer;
import org.newdawn.slick.BasicGame;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;

import org.newdawn.slick.*;

public class StarMiner extends BasicGame
{
  static AppGameContainer app;
  static int resX=800;
  static int resY=600;
  Image bg = null;
  Image playerShip = null;
  Image shipMove = null;
  Image shipIdle = null;
  float x = 0;
  float y = 0;
  float scale = 1.0f;
  float xMomentum = 0;
  float yMomentum = 0;
  float speed = 0;
  Sound fuel,engine;

  public StarMiner()
  {
     super("StarMiner");
  }

  @Override
  public void init(GameContainer gc) throws SlickException
  {
      bg = new Image("Assets/stars.png");
      playerShip = new Image("Assets/starship.png");
      shipIdle = new Image("Assets/starship.png");
      shipMove = new Image("Assets/starshipgo.png");
      fuel = new Sound("Assets/sound/THRUST.wav");
      engine = new Sound("Assets/sound/engine.wav");

  }

  @Override
  public void update(GameContainer gc, int delta) throws SlickException
  {
      Input input = gc.getInput();

      if(input.isKeyDown(Input.KEY_LEFT))
      {
          playerShip.rotate(-0.1f * delta);
      }

      if(input.isKeyDown(Input.KEY_ESCAPE))
      {
          app.exit();
      }

      if(input.isKeyDown(Input.KEY_F4))
      {
          app.setFullscreen(!app.isFullscreen());
      }

      if(input.isKeyDown(Input.KEY_RIGHT))
      {
          playerShip.rotate(0.1f * delta);
      }

      if(input.isKeyDown(Input.KEY_UP))
      {
          playerShip.setTexture(shipMove.getTexture());
          float hip = 0.4f * delta;

          float rotation = playerShip.getRotation();

          xMomentum+= hip * Math.sin(Math.toRadians(rotation));
          yMomentum-= hip * Math.cos(Math.toRadians(rotation));
          if(!fuel.playing()){fuel.play();}
      }
      else
      {
          fuel.stop();
          playerShip.setTexture(shipIdle.getTexture());
      }

      if(input.isKeyDown(Input.KEY_DOWN))
      {
          float hip = 0.4f * delta;

          float rotation = playerShip.getRotation();

          xMomentum-= hip * Math.sin(Math.toRadians(rotation));
          yMomentum+= hip * Math.cos(Math.toRadians(rotation));
      }
      x+=xMomentum/800;
      y+=yMomentum/800;

      xMomentum-=(xMomentum)/1300;
      yMomentum-=(yMomentum)/1300;
      if(Math.abs(xMomentum)<.000001){xMomentum=0;}
      if(Math.abs(yMomentum)<.000001){yMomentum=0;}

      speed = (float) Math.sqrt((0-xMomentum)*(0-xMomentum) + (0-yMomentum)*(0-yMomentum));
      if(!engine.playing()){engine.play();}

 }

  @Override
  public void render(GameContainer gc, Graphics g) throws SlickException
  {
     int xDif = 640;
     int yDif = 480;
     int pModx = (int) ((x*.8)%xDif);
     int pMody = (int) ((y*.8)%yDif);
     int bgExt = 4*(resX/800);
     for(int i = -(bgExt/2)+1; i <= bgExt/2; i++)
     {
         for(int j = -(bgExt/2)+1; j <= bgExt/2; j++)
         {
             bg.draw(((resX/2)-16)-pModx-(xDif*i), ((resY/2)-16)-pMody-(yDif*j));
         }
     }
     bg.draw(((resX/2)-16)-pModx, ((resY/2)-16)-pMody);
     bg.draw(((resX/2)-16)-pModx-xDif, ((resY/2)-16)-pMody);
     bg.draw(((resX/2)-16)-pModx-xDif, ((resY/2)-16)-pMody-yDif);
     bg.draw(((resX/2)-16)-pModx, ((resY/2)-16)-pMody-yDif);
     playerShip.draw(((resX/2)-16), ((resY/2)-16), scale);
     g.drawString("x: "+x, 10, 50);
     g.drawString("y: "+y, 10, 70);
     g.drawString("xMomentum: "+xMomentum, 10, 90);
     g.drawString("yMomentum: "+yMomentum, 10, 110);
     g.drawString("angle: "+playerShip.getRotation(), 10, 130);
     g.drawString("speed: "+speed, 10, 150);

  }

  public static void main(String[] args) throws SlickException
  {
     app = new AppGameContainer(new StarMiner());

     app.setDisplayMode(resX, resY, false);
     app.start();
  }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:15:50.490

如果您尝试将 Asset 文件夹放在生成的 .jar 旁边（与 .jar 位于同一文件夹中，而不是在 .jar 中）会怎样？

# php - foreach 循环中 &$key 和 &$value 引用的最有效实践

> ID：15056737
> 
> 赞同：0
> 
> 时间：2013-02-24T21:12:46.750
> 
> 标签：php, mysql

在这里使用 &$key 和 &$value 引用而不是 $payload[$key]... 然后在 foreach 循环之后使用 unset 销毁引用会更好/更高效吗？

还是我的方式，适合最佳实践？...如果不是，请举个例子：

```
foreach ($payload as $key => $value) {
  if (is_array($value)) {
    $payload[$key] = mysqli_real_escape_string($db_connection, implode(',', $value));
  } else {
    $payload[$key] = mysqli_real_escape_string($db_connection, $value);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:17:33.633

所以性能通常分为三类——CPU、内存或 i/o。在您的情况下，我们正在谈论内存。

如果您迫切需要节省内存，请使用引用 (&$value) 而不是按值复制的实例。但是我经常发现这是一个过早的优化。考虑一下这个值会在内存中保留多长时间：有多少用户甚至点击了这个给定的功能？功能的范围是什么？等等

因此，更多地担心维护——让代码在三个月内为下一个人或你自己所理解——而不是你可以节省的几千字节。

附加说明：在这种情况下，使用引用 ( `&$value`) 会节省内存，因为您正在更改`$value`. 但是，如果您所做的只是读取一个值，那么它真的一点都不重要……有一段时间，PHP 的默认行为（即当您不使用 & 时）实际上是通过引用复制数组，直到您更改它们，此时它首先复制它们。

# haskell - 如何将读取的字符串和 IO 发送到用户定义的函数

> ID：15056738
> 
> 赞同：1
> 
> 时间：2013-02-24T21:12:59.797
> 
> 标签：haskell

我正在尝试创建一个无限循环，将用户的输入发送到解析函数，该函数在输入有效字符串时读取字符串的内容

```
main :: IO ()
main = do
            putStrLn ("\n" ++ "This is blah :" ++ "\n" ++ "=================================")
            putStrLn ("Valid Inputs" ++ "\n" ++ "=================================")
            loop 

--Infinite Loop
---------------------           
loop :: IO()
loop = do 
            input <- getLine
            if input == ""
                then return()
                else do 
                    parse input
                    print input
                    loop

--Main Parsing Function (Does't work)
--------------------
--parse:: String -> String 
--parse (x:xs) = if x == 'a' then 'b':parse xs
               --else x:parse xs 
```

我的问题是如何将用户输入发送到我的解析函数。我收到错误

`IO t` 在I 中说推断类型`parse :: String -> String` 将其更改为：

```
parse:: IO String -> String 
```

然后给我另一个错误，说推断`type [a]`等等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T21:23:59.577

这条线

> 解析输入

返回一个字符串，但它应该返回`IO`“某物”，因为您在一个`do`-block 中。所以你可以改为写

```
 print (parse input) 
```

您的`parse`功能不完整，您必须为`[]`

如果你想改变你的类型`parse`，那么它必须是`String -> IO String`。但这不是一种好的编程风格，因为在不需要杂质的地方，不应该有杂质:-)

# c# - global.asax 中的会话检查与 filehandler.ashx 混淆

> ID：15056739
> 
> 赞同：1
> 
> 时间：2013-02-24T21:13:13.553
> 
> 标签：c#, asp.net, session, global-asax

我最近将我所有的会话检查集成到 global.asax 中，它工作正常，但是当我的页面调用我的 filehandler.ashx 以获取图像时，我已经将它放在那里，我不断收到会话的空引用错误（但只有当它这么称呼）。

如果我在它周围放置一个 try/catch，图像将加载，但显然这不是一个好的解决方案。

```
 void Application_PostAcquireRequestState(object sender, EventArgs e)
    {
        try
        {
            HttpContext context = HttpContext.Current;
            if (context.Session["tid"] == null)  //Null Reference here
            { 
```

理想情况下，我正在寻找不会与文件处理程序搞砸的回发或首次加载事件。我想如果我不能，我总是可以像以前一样将它放在 master_page init 中（这是不好的做法吗？）因为这似乎工作正常。我只是认为 global.asax 会是一个更简洁的解决方案。

关于接下来要尝试什么的任何想法？

到目前为止我尝试过的事件..

```
Application_AcquireRequestState

Application_PostAcquireRequestState

Application_PreRequestHandlerExecute

Application_PreSendRequestContent 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:39:26.033

ASHX 要求显式继承会话状态：

```
public class SomeCustomService : IHttpHandler, IRequiresSessionState
{
    // stuff
} 
```

# ios - UIAlertView 在完成处理程序块中不起作用

> ID：15056740
> 
> 赞同：6
> 
> 时间：2013-02-24T21:13:20.480
> 
> 标签：ios, objective-c

我正在编写代码以访问用户的 Twitter 帐户，但在处理设备上没有帐户的情况时遇到了麻烦。我想做的是显示一个警报，告诉用户为了通过 Twitter 进行身份验证，他们首先需要在他们的设置中创建帐户。

这是我的代码：

```
self.accountStore = [[ACAccountStore alloc] init];
ACAccountType *accountTypeTwitter = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

[self.accountStore requestAccessToAccountsWithType:accountTypeTwitter options:nil completion:^(BOOL granted, NSError *error) {
    if(granted) {
        //Doesn't matter for the present case
    } else if (error){

        [SVProgressHUD dismiss]; //not directly relevant to the present question, but it also doesn't work within the block, so I'm leaving it as a clue

        switch ([error code]){
            case (6):

                UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"No Twitter Account Detected" message:@"Please go into your device's settings menu to add your Twitter account." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
                [alert show]; //triggers an error
                break;

        }
    } 
}]; 
```

我不是 Xcode 调试器的专家，但显然错误发生在 ACAccountStoreReply 线程中，在调用 [alert show] 后大约 25 次调用深度，在一个名为 ucol_getVersion 的过程中。调试器状态 EXC_BAD_ACCESS(code=2, address=0xcc)。

我在 Stack Overflow 和整个互联网上搜索了有关 UIAlertViews 无法在块中工作的解决方案，以及显示警报的一般问题（我已经为委托尝试了不同的值），以及调用 requestAccessToAccountsWithType 的一般问题。

我还尝试通过阅读各种在线资源以及 Programming in Objective-C, 4th add 的相关页面来加深对块的理解。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-24T21:16:39.903

您应该始终确保在主线程上完成任何 UI 交互。把你的电话包装`UIAlertView`在一个`dispatch_async`：

```
dispatch_async(dispatch_get_main_queue(), ^{
   UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Twitter Account Detected" message:@"Please go into your device's settings menu to add your Twitter account." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
   [alert show];
}); 
```

`nil`通话结束时您还有两个s。

# c++ - 在 C++ 中检查函数参数数据类型

> ID：15056749
> 
> 赞同：0
> 
> 时间：2013-02-24T21:14:17.337
> 
> 标签：c++

此类函数 CLASS::READWRITE 应该从输入文件读取数据并仅当其输入值是 int 类型时才写入输出文件。当我输入一个浮点值作为 x 传递时，小数位被截断并且函数正常执行而不是输出警告。如果像“b”这样的小写字母作为 x 传递，则该值显然被读取为“0”，因此函数正常执行而不是输出警告。

如何执行检查（x！= int）？我已经看到了使用 cin.fail() 的建议，但我在这里没有使用 cin。

```
#include <iostream>
#include <fstream>
using namespace std;

ifstream input_file("in_file", ios::in);
ofstream output_file("out_file", ios::out);

int main(void)
{
    CLASS object(n);                // n is the number of values held in in_file
    object.READWRITE(x);            // x is some test value

}

void CLASS::READWRITE(int x)
{
    int i;
    for(i = 0; i < n; i++)
    {
        input_file >> number[i];
    }

    for(i = 0; i < n; i++)
    {
        if((x != int) || (x < 0))
        {
            out_file << "Error" << endl;
            break;
        }
        else
        {
            out_file << num[i] << endl;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:31:07.537

这并不完全是您要查找的内容，但是如果您想确保只传输整数，则必须检查字符串。虽然您特别要求使用 C++，但我对 C 文件处理更满意，所以请多多包涵。

```
FILE *fp = fopen("input.file", "rb"), op = fopen("output.file", "wb");
if(fp && op) {
     while(!feof(fp)) {
         char buffer[20], *ptr = buffer;
         fscanf(fp, "%20[^\s\n]", buffer);
         while(ptr && *ptr != 0) {
             if(*ptr >= '0' && *ptr <= '9') ++ptr;
             else ptr = 0;
         }
         if(ptr) fprintf(op, "%s", buffer);
     }
     fclose(fp);
     fclose(op);
} 
```

简而言之，此代码扫描整个文件以查找由空格或换行符分隔的块（假设任何一个数字不超过 20 个字符。）在下一步中，它会检测相关字符是否为数字（在这种情况下，指针向上移动一步），或者不。在后一种情况下，字符串作为整数无效并被丢弃（指针设置为 0，这反过来又使循环后的“写入”无效。

我相信这应该可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:06:17.540

您将参数 x 声明为 int 所以它是 int

```
void CLASS::READWRITE(int x) 
```

当你传入一个 double 或 char 时，编译器会隐式地将它们转换为一个整数值。对于双精度数，这意味着在小数点后截断，对于字符，编译器将 ascii 表示视为整数。

假设和这里的其他人一样，参数 x 来自用户/文件输入，您必须手动检查每个输入字符串以确保它是一个有效的整数。如果输入是二进制的，那么由于数据是上下文敏感的，因此真的无法判断。

# javascript - 使用包含对嵌套对象的引用的查询过滤对象

> ID：15056750
> 
> 赞同：0
> 
> 时间：2013-02-24T21:14:19.477
> 
> 标签：javascript, filtering, underscore.js, lodash

我需要编写一个过滤器函数，允许我通过嵌套对象进行查询，如下所示：

```
var data = [
             { twitter: { id: 1, name: "Bob" } },
             { twitter: { id: 2, name: "Jones" } }
           ],
    query = { 'twitter.id': 1 };

# Perform filter using data and query variables
var search = …

console.log(search);
> ["0"] 
```

过滤器应返回与查询匹配的索引数组。

我目前在[http://jsbin.com/umeros/2/edit](http://jsbin.com/umeros/2/edit)没有嵌套对象支持的情况下工作。

但是，我希望能够查询嵌套对象，例如`query`上面看到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:30:35.180

使用[此答案](https://stackoverflow.com/a/10934946/1048572)`ref`中的函数，您的过滤器应如下所示：

```
var search = _.filter(_.keys(data), function (key) {
    var obj = data[key];
    return _.every(query, function (val, queryKey) {
        return ref(obj, queryKey) === val;
    });
}); 
```

# filesystems - Emscripten 使用文件系统 FS

> ID：15056752
> 
> 赞同：3
> 
> 时间：2013-02-24T21:15:00.243
> 
> 标签：filesystems, emscripten

我想知道如何`FS`在 Emscripten 中使用。我想我已经完成了 wiki 中提到的所有事情，但我仍然得到`Uncaught ReferenceError: FS is not defined`. 如果我在生成的 *.js 文件中搜索文字`FS`没有出现，我认为应该有。

这是我到目前为止的代码。

信息媒体.cpp

```
#include <math.h>  //testing include
extern "C" {

// testing function
int int_sqrt(int x) {
  return sqrt(x);
}

}// extern c 
```

编译

`emcc -s EXPORTED_FUNCTIONS="['_int_sqrt']" InfoMedia.cpp -o InfoMedia.js`

结果在[InfoMedia.js@pastebin](http://pastebin.com/eKwwsx75)

init_fs.js

```
var Module = {
  'print': function(text){ 
    console.log(text) 
  },
  'preRun' : function(){
    console.log('prerun');
    FS.createPath('/', 'home/user1', true, true);
  },
  'noInitialRun': true,
}; 
```

示例.html

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>InfoMediaJS-Example</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">    </script>
    <script type="text/javascript" src="init_fs.js"></script>
    <script type="text/javascript" src="InfoMedia.js"></script>
    <script type="text/javascript">
        run();
    </script>
</head>
<body></body>
</html> 
```

在 chrome preRun 中运行它后，我得到了错误。

```
prerun                                     init_fs.js:6
Uncaught ReferenceError: FS is not defined init_fs.js:7 
```

另外，如果我尝试在编译时嵌入文件

`emcc -s EXPORTED_FUNCTIONS="['_int_sqrt']" --embed-file gizmo.webm InfoMedia.cpp -o InfoMedia.js`

我得到这个错误`Uncaught TypeError: Object #<Object> has no method 'FS_createDataFile'`

它在我生成的 js 文件中，位于这一行[http://pastebin.com/Mu1qfG25](http://pastebin.com/Mu1qfG25) @ line 1460 `Module['FS_createDataFile']('/', 'gizmo.webm', [26, 69, 223,....]), true, true);`

FS 永远不会插入到生成的 js 文件中。所以我怎么称呼那些FS东西并不重要。我需要添加任何编译器选项来插入该库功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T21:10:06.270

它很简单。只需使用使用 FS 的函数，emscripten 就会自动包含它。正如您在输出文件中看到的那样，尽管 emscripten 提供的 c 库比您在生成的输出文件中看到的要多得多，但其中没有包含不必要的库函数。

为了清楚起见，只需将您的 InfoMedia.cpp 更改为：

```
#include <math.h>  //testing include
#include <stdio.h>
extern "C" {

// testing function
int int_sqrt(int x) {
  printf ("Decimals: %d %ld\n", 1977, 650000L);  // use FS lib functionality
  return sqrt(x);
}

}// extern c 
```

# java - Java -- 素数算法返回 16

> ID：15056761
> 
> 赞同：2
> 
> 时间：2013-02-24T21:15:53.780
> 
> 标签：java, primes

我希望这个 Java 程序流式传输 10001 个素数，但它莫名其妙地决定将 16 标记为素数。

这里的算法只是保持素数的连续计数，并检查每个新数字以查看它是否可以被任何小于它的素数整除。如果不是，则将其添加到数组 primes[ ] 中，该数字显示在控制台上，并且该过程继续进行，直到`primes[ ]`已满。

```
public static void main(String[] args){
    int[] primes = new int[10001];
    int primeCount = 1;
    int testNumber = 3;
    primes[0] = 2;
    while(primeCount < 10001){
        for (int i = 0; i < primeCount; i++){
            if (testNumber % primes[i] == 0){
                i = 0;
                testNumber++;
            }
        }
        primes[primeCount] = testNumber;
        System.out.println(testNumber);
        primeCount++;
        testNumber++;

    }
} 
```

控制台读数：

```

3
5
7
11
13
16
17
19
.
.
.

```

除了 16 个，其他一切看起来都井井有条……有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T21:18:52.550

您应该设置`i = -1`，而不是因为在将其设置为零后`i = 0`立即增加值。`i`

我建议您重新思考`for`循环的工作原理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T21:31:27.537

从软件编程的角度来看，您不应该在该 while 循环中使用 for 循环。您应该循环直到您发现它不是质数，或者您检查所有可能性并认为它是质数，因为您找不到任何除法器。所以你应该在更大的while里面有一个while循环。我是说：

```
public static void main(String[] args) {
    int[] primes = new int[10001];
    int primeCount = 1;
    int testNumber = 3;
    primes[0] = 2;
    while (primeCount < 10001) {
        boolean isPrime = true;
        int i = 0;
        while (isPrime && i < primeCount) {
            if (testNumber % primes[i] == 0) {
                i = 0;
                testNumber++;
                isPrime = false;
            } else {
                i++;
            }
        }
        if (isPrime) {
            primes[primeCount] = testNumber;
            System.out.println(testNumber);
            primeCount++;
            testNumber++;
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T21:27:47.163

这是您程序的固定版本

```
public static void main(String [] args){

        int[] primes = new int[10001];
        int primeCount = 1;
        int testNumber = 3;
        primes[0] = 2;
        while(primeCount < 10001){
            for (int i = 0; i < primeCount; i++){

                if (testNumber % primes[i] == 0){
                    i = -1;
                    testNumber++;
                }
            }
            primes[primeCount] = testNumber;
            System.out.println(testNumber);
            primeCount++;
            testNumber++;

        }
    } 
```

# ubuntu - 将安装脚本从 Redhat 更改为 Ubuntu

> ID：15056762
> 
> 赞同：5
> 
> 时间：2013-02-24T21:15:56.217
> 
> 标签：ubuntu, redhat, rpm, dpkg

已为带有 RPM 的 Redhat 编写了安装脚本（用于[Microsoft® SQL Server® ODBC Driver 1.0 for Linux ）](http://www.microsoft.com/en-us/download/details.aspx?id=28160)

它使用此代码检查是否安装了某些软件包

```
req_libs=( glibc e2fsprogs krb5-libs openssl )

for lib in ${req_libs[@]}
do
    local present=$(rpm -q -a $lib) >> $log_file 2>&1
    if [ "$present" == "" ]; then
        log "The $lib library was not found installed in the RPM database."
        log "See README for which libraries are required for the $driver_name."
        return 1;
    fi
done 
```

我通过知道/相信库已安装并简单地删除测试来克服这个问题，但我现在想整理一下。

1.  如何在 Ubuntu 上找到要查找的库。是否有 Redhat -> Ubuntu 的命令或翻译网页
2.  用 dpkg -s 替换 rpm -q -a 是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-07T11:38:32.660

### 1）找到合适的包

在 Ubuntu/Debian 中，库包通常以“lib”开头而不是后缀。开发包通常只是以“-dev”而不是“-devel”为后缀

如果您不确定等效包的名称，您可以随时这样做：

```
sudo apt-get update
apt-cache search <packagename> 
```

...并且不要在搜索中包含“lib”或“dev”部分，您将获得不错的结果。从那里您可以手动确定您正在寻找的正确包是什么。

### 2) 查找已安装的软件包

您可以使用“dpkg -s”，它会起作用，尽管根据我对“rpm -qa”输出的理解，您可能想要一些不那么冗长的东西。将“dpkg-query -l”通过管道输入“grep”将在一行上输出包信息，并且应该更容易阅读。

这是脚本的等效部分的样子（使用正确的包名称和 log_file 输出在单独的行上以正常工作）：

```
#!/bin/bash

function stack_install()
{

log_file="$HOME/Desktop/stackoverflow/stack-log.txt"

req_libs=( libc6 e2fsprogs libkrb5-3 openssl )

for lib in ${req_libs[@]}
do
    local present=$(dpkg-query -l "$lib" | grep "$lib" 2>/dev/null)
    echo "$present" >> "$log_file"
    if [ "$present" == "" ]; then
        echo "The $lib library was not found installed in the dpkg database."
        echo "See README for which libraries are required for the $driver_name."
        return 1;
    fi
done 
}

stack_install 
```

# java - 多次键盘按下

> ID：15056764
> 
> 赞同：0
> 
> 时间：2013-02-24T21:16:07.453
> 
> 标签：java, key

Java是否支持多按键以及如何实现？此解决方案根本不起作用：

```
if (key == KeyEvent.VK_LEFT) {
    if(key==KeyEvent.VK_S){

        dx = -3;
                          }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:21:03.517

没有这样的内置功能，因此您必须自己处理。例如，收集最后一个`KEY_PRESSED` `KeyEvent`s 并检查您的组合。当一个键被释放时，即`KEY_RELEASED`，您可以将它从集合中移除。

如果您正在寻找 shift、ctrl、alt 或 alt gr，则有一个更简单的解决方案 - KeyEvent 具有方法`isShiftDown()`, `isControlDown()`，`isAltDown()`它`isAltGraphDown()`会告诉您这些方法是否在事件中失败。

# c++ - 可变参数函数不接受字符串对象

> ID：15056766
> 
> 赞同：1
> 
> 时间：2013-02-24T21:16:27.820
> 
> 标签：c++, templates, c++11

阅读可变参数函数时，我发现了一个`sum`函数，它接受任意数量的任何数字类型并计算它们的总和。

有了这个函数的模板性质，我希望它接受`string`对象，因为运算符`+`是为字符串定义的。

```
#include <iostream>
#include <string>
#include <type_traits>
#include <utility>

using namespace std;

template <typename T> T sum(T && x)
{
    return std::forward<T>(x);
}

template <typename T, typename ...Args>
typename std::common_type<T, Args...>::type sum(T && x, Args &&... args)
{
    return std::forward<T>(x) + sum(std::forward<Args>(args)...);
}

int main()
{
    auto y = sum(1, 2, 4.5); // OK
    cout << y << endl;

    auto x = sum("Hello!", "World"); // Makes error
    cout << x << endl;

    return 0;
} 
```

错误：

> 'const char [7]' 和 'const char [6]' 类型的无效操作数到二进制 'operator+'

我预计它会连接 `Hello!`并`World`打印出来`Hello!World`。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:18:05.397

字符串文字不是`std::string`对象。没有`operator +`为字符数组定义。

正如您的编译器告诉您的那样，`"Hello!"`有 type `const char[7]`，而`"World"`有 type `const char[6]`。尝试声明这些类型的两个变量并取它们的总和：

```
int main()
{
    char const a[7] = "Hello!";
    char const b[6] = "World";
    (a + b);
} 
```

编译器会向您显示类似的错误：

```
error: invalid operands of types 'const char [7]' and 
       'const char [6]' to binary 'operator+' 
```

要使您的代码正常工作，请将两个字符串文字中的至少一个包装到一个对象中`std::string`（对象的两个相应重载）：`operator +``std::string`

```
auto x = sum(std::string("Hello!") + "World"); 
```

或者：

```
auto x = sum("Hello!" + std::string("World")); 
```

当然，您也可以包装这两个参数，但这是不必要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T21:21:36.050

根本问题不在于可变参数模板，而在于您的期望 - 字符串文字，例如`"hello"`不是 type `std::string`。它们的类型`char const[N]`是`N`字符数 + 1。如果您实际上从它们（或者甚至只是从第一个）构造一个字符串，它会按预期工作：

```
// snip

int main()
{
    auto y = sum(1, 2, 4.5); // OK
    cout << y << endl;

    auto x = sum(std::string("Hello!"), "World"); // OK
    cout << x << endl;

    return 0;
} 
```

[活生生的例子。](https://ideone.com/GO0psn)

# objective-c - 限制可以点击按钮的次数

> ID：15056771
> 
> 赞同：1
> 
> 时间：2013-02-24T21:16:53.953
> 
> 标签：objective-c, cocoa-touch, uiwebview

是否可以限制在特定时间范围内可以点击按钮的次数？我的应用程序的 Web 视图上有一个活动指示器和刷新按钮。我有刷新按钮工作，但如果你不止一次点击它，多个活动指示器会出现在彼此的顶部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:24:49.367

> 是否可以限制在特定时间范围内可以点击按钮的次数？

限制用户尝试点击按钮的次数是不可能的（除非您隐藏按钮），但肯定可以响应按钮，甚至按钮是否会响应用户。例如，您的应用可以在执行更新时禁用该按钮。这会给用户一个按钮不可用的视觉提示，并且活动指示器会告诉他们应用程序正在做某事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T22:16:00.710

我只想对不同的方法提出建议。听起来您每次点击按钮时都会向视图添加一个活动指示器。如果是这种情况，您可以首先为指示器创建一个属性，在 viewDidAppear 方法的视图中设置活动指示器，然后在您点击按钮时启动它。比您可以检查指示器是否已经动画，然后重新启动或不启动。

# css - 带有绝对定位元素的 CSS div 溢出

> ID：15056772
> 
> 赞同：2
> 
> 时间：2013-02-24T21:17:00.870
> 
> 标签：css, html, resize, overflow

我有一个包含三个主要 div 的绝对定位布局：标题、左侧选项列和内容列。设计的行为是让标题和左侧选项列始终留在页面上，而内容列能够自由上下滚动（想象左侧的控制面板和顶部的标题栏）。

问题是内容 div 中的窗口大小调整和左右（x 轴）溢出。我想要的行为是最小宽度约为 1000 像素，此时水平滚动条会显示在内容列中并允许用户滚动。这可以防止窗口被调整得太小，以至于我的布局不再像预期的那样。

我曾尝试在现有 CSS 中使用 min-width 指令，但无济于事。min-width 确实实现了我正在寻找的“截止”，但是，没有水平滚动条出现，我无法水平滚动。

有没有办法使用现有的范例来做到这一点，或者样式表是否需要以不同的方式完成？以下是我现有的实现（使用我一直在测试 content_column 的 min-width 属性）：

```
html {
    overflow: hidden; 
}

body {
    margin: 0px;
    padding: 0px;
    background: #E5E5E5;
    color: #000000;
    font-family: 'Open Sans', sans-serif;
    height: 100%;
    max-height: 100%;
    overflow: hidden;
    border: 0px none;
}

#header {
    position: absolute;
    margin: 0px;
    top: 0px;
    left: 0px;
    display: block;
    color: #FFFFFF;
    background: #146647;
    font-size: 1.5em;
    padding: 5px;
    width: 100%;
    overflow: hidden;
    z-index: 3;
}

#option_column {
    position: absolute;
    left: 0px;
    top: 40px;
    bottom: 0;
    background: #0F4C35;
    color: #FFFFFF;
    width: 155px;
    padding: 3px;
    z-index: 2;
    overflow: auto;
}

#content_column {
    position: absolute;
    overflow: auto;
    min-width: 1000px;
    z-index: 1;
    top: 40px;
    left: 161px;
    right: 0px;
    bottom: 0px;
    padding: 3px;
    background: #E5E5E5;
    color: #000000;
    font-size: 14px;
} 
```

这是我的 HTML 结构：

```
<body>
    <div id="header">
        Head
    </div>

    <div id="option_column">
        Option Column
    </div>

    <div id="content_column">
        <div class="header_text">Content Header</div>
        <div id="subheader">
            Content (content_column intended to stop resizing at 1000px)
        </div>
    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:33:52.577

在内容部分设置

`width:1000px;`

`overflow-y: auto;`

但这样宽度将始终保持在 1000px。换句话说，如下

```
#content_column {
position: absolute;
width: 1000px;
overflow-y: auto;
overflow-x:scroll; /* override overflow:hidden; applied to body & html */
z-index: 1;
top: 40px;
left: 161px;
right: 0px;
bottom: 0px;
padding: 3px;
background: #E5E5E5;
color: #000000;
font-size: 14px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:27:02.573

做什么

```
#content_column {overflow-x: scroll} 
```

做？请注意，IE < 9 不会发生特定于轴的溢出，因此您必须使用`{overflow: scroll}`.

# c# - 将路径颜色添加到画布后更新路径颜色

> ID：15056777
> 
> 赞同：0
> 
> 时间：2013-02-24T21:17:40.193
> 
> 标签：c#, wpf, canvas, path, controls

我有一张画布，上面有许多路径。将路径添加到画布后的某个时间，我需要更改路径的填充颜色。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:26:41.707

YourPath.Fill = Brushes.Blue;

[http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.fill.aspx](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.fill.aspx)

工作示例：

**标记**

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="paths.MainWindow"
x:Name="Window"
Title="MainWindow"
Width="640" Height="480">

<Grid x:Name="LayoutRoot">
    <Path x:Name="myPath" Data="M101,190 C463,145 581.5,186.5 473.5,279.5 365.5,372.5 153.50002,345.50016 122.50001,271.49998 91.499996,197.4998 101,190 101,190 z" Fill="#FFF4F4F5" Margin="84.628,112.772,126.105,161.198" Stretch="Fill" Stroke="Black"/>
    <Button Content="Change Color" HorizontalAlignment="Right" VerticalAlignment="Bottom" Width="122" Margin="0,0,139,63.04" Click="Button_Click"/>
</Grid>
</Window> 
```

**代码**

```
 namespace paths
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            this.InitializeComponent();

            // Insert code required on object creation below this point.
        }

        private void Button_Click(object sender, System.Windows.RoutedEventArgs e)
        {
            myPath.Fill = Brushes.Blue;
            // TODO: Add event handler implementation here.
        }
    }
} 
```

# c# - 运行单元测试时出现 NUnit System.BadImageFormatException

> ID：15056780
> 
> 赞同：3
> 
> 时间：2013-02-24T21:17:59.893
> 
> 标签：c#, .net, nunit, teamcity

首先让我在这篇文章的开头说，我在 TeamCity 论坛和 SO 上看到了关于这个主题的各种讨论，但似乎没有什么对我有用。

我有一个 C#.Net 解决方案，并在 TeamCity 中配置了两个步骤，一个构建步骤和一个单元测试步骤。运行 NUnit 测试时，我在 TeamCity 中收到以下错误：

> [步骤 2/2] 开始：
> C:\TeamCity\buildAgent\plugins\dotnetPlugin\bin\JetBrains.BuildServer.NUnitLauncher.exe
> #TeamCityImplicit [步骤 2/2] 在目录：C:\TeamCity\buildAgent\work\trunk [步骤 2/2] 2013-02-23 18:00:11,827
> [4972] WARN JetBrains.TeamCity.Utils.PE.PEReader - 无法解析程序集文件：可执行文件 (.exe) 或库 (.dll) 的格式为[步骤 2/2] System.BadImageFormatException：可执行文件 (.exe) 或库 (.dll) 的格式无效。[步骤 2/2]
> Mono.Cecil.PE.ImageReader.ReadImage() 在
> c:\BuildAgent\work\4fb4fc7600eac5a9\src\Utils\src\PE\ImageReader.cs:line 84 [步骤 2/2] 在
> JetBrains .TeamCity.Utils.PE.PEReader.DescribeAssemblyRuntime(String assemblyFile) 在
> c:\BuildAgent\work\4fb4fc7600eac5a9\src\Utils\src\PE\PEReader.cs:line 22 [步骤 2/2] 启动 TeamCity NUnit Test Runner [步骤 2/2] 在 .NET 下运行 NUnit-2.6.2 测试Framework v2.0 x64 [Step 2/2]
> ##teamcity[buildStatus text='NUnit error, {build.status.text}' status='ERROR'] [Step 2/2] NUnit 在
> '.. .UnitTests.csproj' 程序集 加载程序集被编译为
> 无法解析程序集文件：可执行文件 (.exe) 或库 (.dll) 的格式无效。NUnit 运行时为 v2.0.50727，x64
> System.BadImageFormatException：无法加载文件或程序集
> “...UnitTests.csproj”或其依赖项之一。试图加载格式不正确的程序。文件名：
> '....UnitTests.csproj' ---> System.BadImageFormatException: 无法加载文件或程序集 '....UnitTests.csproj' 或其依赖项之一。试图加载格式不正确的程序。文件名：'....UnitTests.csproj'

我正在运行 TeamCity 7.1.4。我正在使用 Visual Studio 2012，我当前的配置是 64 位。我正在使用 nunit 2.62 运行时版本 2.0。

我已按如下方式配置了我的 TeamCity 设置：

MSBuild 步骤：.NET Framework 4.5 运行平台：x64

NUnit 步骤：NUnit Runner：2.6.2 .NET 运行时：Platform x64 版本：v2.0

使用 resharper 运行时，单元测试全部通过。

知道 BadImageFormatExceptions 通常与在 x86 中编译 64 位项目有关，反之亦然，我已经为解决方案的配置管理器以及团队城市中的各种设置尝试了 64/x86 设置的几乎所有组合。似乎无论我的设置如何，我都会收到此错误。有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:43:25.663

感谢@adrianbanks 在这方面。原来我指向 .csproj 文件来执行测试。根据 Adrian，我将 TeamCity 配置为指向单元测试 dll，一切正常。

# javascript - 将 FileReader 与服务器图像一起使用的 JavaScript

> ID：15056782
> 
> 赞同：0
> 
> 时间：2013-02-24T21:18:12.263
> 
> 标签：javascript, image, filereader

我知道这里描述的 javascript FileReader 的功能：http://www.html5rocks.com/en/tutorials/file/dndfiles/[这](http://www.html5rocks.com/en/tutorials/file/dndfiles/) 是“用户通过输入模块或拖动框选择文件，然后 javascript 处理它。”。不过，我想知道是否可以通过从运行站点的服务器向其提供文件（在我的情况下为图像）的 url 来使用 FileReader 功能。

有人知道吗？万一，你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:23:03.830

要从服务器读取 HTTP 响应（例如文件），请使用 AJAX ( `XMLHttpRequest`)

# python - Python 类可以接受参数吗？

> ID：15056794
> 
> 赞同：1
> 
> 时间：2013-02-24T21:20:04.903
> 
> 标签：python, class, optimization, arguments, code-structure

我有以下课程

```
class MetricLst(object):
    def __init__(self,n):
        self.min = min(n)
        self.max = max(n)

lst = [1,2,3,4,5]
p = MetricLst(lst)
print p.max
5
print p.min
1 
```

有论据

```
class MetricArg(object):
    def __init__(self,*args):
        self.min = min(args)
        self.max = max(args)

p = MetricArg(1,2,3,4,5)
p.max
print 5
p.min
print 1 
```

我有以下问题：

1.  如果我使用 MetricArg，是否有一种优雅的方式来使用列表创建对象？
2.  创建课程时是否需要首选 *args（如果可以）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:22:09.297

1.  该`*args*`语法有一个镜像调用等价物：

    ```
    p = MetricArg(*somelist) 
    ```

    的元素`somelist`将用作 的参数`MetricArg`。

2.  这取决于你想要呈现什么样的 API。如果您想接受 0 个或多个参数，因为这是您希望最方便地调用您的类的方式，那么您可以使用该形式。

    在 Python API 中，`print()`和`os.path.join()`函数是众所周知的使用任意长度参数列表的可调用示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:25:08.650

您可以将列表传递给可变参数函数或构造函数

```
L = [1, 2, 3, 4, 5]
p = MetricArg(*L) 
```

是否使用可变参数函数而不是接受列表的函数实际上取决于函数。

函数/构造函数会经常被动态构造的列表调用，还是会接收大部分固定数量的参数？

如果列表大部分是动态的，那么接受一个列表是最好的主意，因为您不会用`*L`. 另一方面，如果在大多数情况下，调用者的参数数量是固定的并且很小，那么只传递参数比构建一个列表来传递它更具可读性。

# java - 从 Eclipse 连接到 mysql

> ID：15056796
> 
> 赞同：-2
> 
> 时间：2013-02-24T21:20:48.927
> 
> 标签：java, mysql, eclipse

简而言之，我如何从 Eclipse 连接到 MySQL。如果您可以通过示例为我提供一个简单的步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:26:50.857

```
try {
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection("com.mysql.jdbc:mysql://localhost:3306/NewStudents", "root", "root");

        Statement st = con.createStatement();
        ResultSet result = st.executeQuery("select * from students");

        while (result.next()) {
            .....
        }
    }
    catch (ClassNotFoundException e) {
        System.out.println("Driver not found");
    }
    catch (SQLException e) {
        e.printStackTrace(); 
```

getConnection 的第一个参数是 url，第二个用户名，第三个密码。还可以通过将 de jdbc 驱动程序添加到项目库中来导入它。

有更好的方法，但这对初学者来说很简单。

这是一个链接，它做同样的事情，它解释了更多。

[http://www.stardeveloper.com/articles/display.html?article=2003090401&page=1](http://www.stardeveloper.com/articles/display.html?article=2003090401&page=1)

# ruby-on-rails - 登录用户，然后保存评论 - rails

> ID：15056810
> 
> 赞同：0
> 
> 时间：2013-02-24T21:22:42.680
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有这个应用程序，用户可以在其中为学校写评论。用户必须使用 Facebook 登录才能保存评论。

**问题：**

如果用户未签名并写了评论，然后用 facebook 登录，他们必须再次写相同的评论。

我想更像这样处理它：`unsigned user write a review, signs in with facebook and then the review is saved. But right now the user writes a review and then signs in and nothing is saved, the user have to write the review all over again`.`

怎么能做到这一点？任何想法或解决方案都会很棒！

**审核表：**

```
<%= form_for [@school, Review.new] do |f| %>
 <%= f.text_area :content %>
    <% if current_user %>
      <%= f.submit 'Save my review', :class => "btn" %>
    <% else %>
      <%= f.submit 'Save my review and sign me into facebook', :class => "btn" %>
    <% end %>
<%end %> 
```

**评论控制器：**

```
 class ReviewsController < ApplicationController
        before_filter :signed_in_user, only: [:create, :destroy]

        def create
            @school = School.find(params[:school_id])
            @review = @school.reviews.new(params[:review])

            @review.user_id = current_user.id

            if @review.save
                redirect_to @review.school, notice: "Review has been created."
            else
                render :new
            end
        end

        def new
            @school = School.find_by_id(params[:school_id])
            @review = Review.new
        end

        private 
        def signed_in?
            !current_user.nil?
        end

        def signed_in_user
            unless signed_in?   
                redirect_to "/auth/facebook"
            end
        end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:25:27.673

这听起来像是使用匿名用户的好地方。[在http://railscasts.com/episodes/393-guest-user-record](http://railscasts.com/episodes/393-guest-user-record)查看 Ryan Bates 关于访客用户的视频。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:43:39.333

通常的简单方法是在重定向到身份验证服务之前将参数保存到会话中。一旦用户进行身份验证，您将检查这些属性是否存在并创建评论。

# html - Google Adsense 获取每页收入数据

> ID：15056812
> 
> 赞同：1
> 
> 时间：2013-02-24T21:22:52.633
> 
> 标签：html, adsense, ads

是否有可能每月获得每个单独页面（广告展示的）的收入？

Google 是否提供了一个很好的 API 来以编程方式获取这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:26:50.037

并不是说我只知道使用 AdSense。我建议将 Google Analytics 添加到您的网站。它们将集成，您可以获得所需的数据。

# javascript - 通过页面内的 jQuery 加载更改的内容

> ID：15056816
> 
> 赞同：0
> 
> 时间：2013-02-24T21:23:33.953
> 
> 标签：javascript, jquery

我有这个：

```
<div style='display:none' id='myDiv'>
  <input type='text' value='' id='text1'>
  <input type='text' value='' id='text2'>
<div>

<ul>
<li> <a href="#" onClick="$('#text1').val('Hello1');
                          $('#text2').val('Hello2');">Load content</a>
   <span id='divLoader'></span> 
</li>
</ul> 
```

而且我想`#divLoader`从 Div 加载内容`#myDiv`，但是使用`#text1`and`#text2`显示，如果我有更多`a links`内容，它将改变相等。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:29:22.747

```
<div style='display:none' id='myDiv'>
  <input type='text' value='' id='text1'/>
  <input type='text' value='' id='text2'/>
</div>

<ul>
<li> <a href="#" onClick="$('#text1').val('Hello1');
                          $('#text2').val('Hello2');
                          $('#divLoader').html($('#myDiv').html());">Load content</a>
   <span id='divLoader'></span> 
</li>
</ul> 
```

但最好将该代码放入`<script>`标签中

```
$(function() {
   $('ul li a').click(function() {
       $('#text1').val('Hello1');
       $('#text2').val('Hello2');
       $('#divLoader').html($('#myDiv').html());
   });
}); 
```

# winforms - EnableVisualStyles时VB.NET控件布局不同

> ID：15056817
> 
> 赞同：1
> 
> 时间：2013-02-24T21:23:38.433
> 
> 标签：winforms, layout, controls, visual-styles

我当前的 WinForms 项目需要从 Sub Main() 启动；为此，必须取消选中“我的项目”的“应用程序”选项卡中的“启用应用程序框架”选项。

我拥有的 Sub Main 看起来像这样......

```
<System.STAThread()>
Public Shared Sub Main()

    Application.EnableVisualStyles()
    'Application.SetCompatibleTextRenderingDefault(True) 
     Application.SetCompatibleTextRenderingDefault(False) 'Fix from Hans Passant
    'Application.DoEvents() 'removed per suggestion

    Application.Run(New p2Login(p2user))

    If p2user.isValidated Then

        Application.Run(New frmMAIN)

    End If

End Sub 
```

我面临的具体问题是使用此配置会导致细微的控件布局差异。例如，我的一些标签现在稍微重叠了它们的控件，并且内联复选框似乎稍微向左移动。我敢肯定，还有其他没有立即显现出来的差异。

要点： 1）视觉样式确实出现在按钮等控件上。2）如果我重新检查“启用应用程序框架”，布局问题就会消失，并设置一个启动表单。

![问题示例屏幕截图](../Images/870d9dd3968de2e86f93cb2fbef22eb4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:36:38.020

```
Application.SetCompatibleTextRenderingDefault(True) 
```

这就是麻烦制造者。兼容的文本呈现支持 .NET 1.x 中使用的文本呈现，特别是使用 Graphics.MeasureString() 方法来计算自动调整大小的控件（如 Label）的大小。SetCompatibleTextRenderingDefault 存在的唯一原因是如果您有旧的 .NET 1.x 组件仍然使用 Graphics 而不是 .NET 2.0 TextRenderer 类进行绘制，则保持文本呈现的一致性。7 年前 .NET 2.0 发布时就存在的问题，你肯定没有这个问题。

通过 False 来解决您的问题。这就是 WindowsFormsApplicationBase 类的作用。

# c++ - 修改Open CV视频检测教程

> ID：15056820
> 
> 赞同：0
> 
> 时间：2013-02-24T21:23:42.927
> 
> 标签：c++, opencv

我是一些如何打开 CV 的新手，只是对教程进行了一些实验，以了解有关该库的使用和功能的一些信息，在已经放置在 Open CV 官方网站上的教程之一中，有是一段代码，它是关于检测一些训练有素的人脸和预测网络摄像头上的人[脸，视频中的人脸识别](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/tutorial/facerec_video_recognition.html "视频中的人脸识别")

现在我正在尝试修改代码，以便使用本地数据库中保存的图片，并在检测到的面部和上面的标签上给出相同的输出，我已经修改了代码（在提到的代码的第 88 行之后在教程中）以这种方式：

```
CascadeClassifier haar_cascade;
haar_cascade.load(fn_haar);

for(;;) {

    Mat gray;
    Mat original;
    gray = imread("F:\datasets\23.jpg",0);
    original = imread("F:\datasets\23.jpg");
    vector< Rect_<int> > faces;
    haar_cascade.detectMultiScale(gray, faces);
    for(int i = 0; i < faces.size(); i++) {   
        Rect face_i = faces[i];
        Mat face = gray(face_i);
        Mat face_resized;
        cv::resize(face, face_resized, Size(im_width, im_height), 1.0, 1.0, INTER_CUBIC);

        // predict:
        int prediction = model->predict(face_resized);

        // visualize:
        rectangle(original, face_i, CV_RGB(0, 255,0), 1);
        string box_text = format("Prediction = %d", prediction);
        int pos_x = std::max(face_i.tl().x - 10, 0);
        int pos_y = std::max(face_i.tl().y - 10, 0);
        putText(original, box_text, Point(pos_x, pos_y), FONT_HERSHEY_PLAIN, 1.0, CV_RGB(0,255,0), 2.0);
    }
    // Show the result:
    imshow("face_recognizer", original);
    // And display it:
    char key = (char) waitKey(20);
    // Exit this loop on escape:
    if(key == 27)
        break;
} 
```

但是当我执行代码时，它会报告“OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in unknown function”任何人都可以帮我解决这个问题来检测和解决代码中的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:49:25.173

在那里调整你的图像路径，应该是`"F:\\datasets\\23.jpg" or "F:/datasets/23.jpg"`

（文件名中的单反斜杠有些问题，使用 2 或避免使用它们）

对于未来，该错误是空垫子或无效垫子的症状，因此对您加载的任何资源进行检查是必须的。像：

```
gray = imread("F:/datasets/23.jpg",0);
if ( gray.empty() )
{
    cerr << "could not load it!";
    return -1;
} 
```

级联相同：

```
if ( ! haar_cascade.load(fn_haar) )
{
    //...
} 
```

# r - 简化可怕的 R 代码以调整行均值

> ID：15056822
> 
> 赞同：4
> 
> 时间：2013-02-24T21:23:52.303
> 
> 标签：r, loops, performance

我知道使用 R 强大的矢量处理功能可以使这段代码更短、更高效。我只是现在无法弄清楚如何......

基本任务是调整每行中的单元格，以便强制行总数匹配由另一个数据框确定的预定义数字。这样，每个区域的总人口被强制为某个值（每一行代表一个区域），而从一列移动到下一列的单元格之间的比率保持不变。

丑陋的做法（第一个循环只是创建一个示例数据框；当然可以做得更好；我就是不能停止使用循环！）：

```
con1 <- array(dim=c(5,3))

set.seed(1066)
for(i in 1:ncol(con1)){
con1[,i] <- round(rnorm(n=5,mean=10,sd=3))}
con1 <- data.frame(con1)
con2 <- data.frame(array(c(8:13, 9:14, 10:15), dim=c(5,3)))

apply(con1,1, sum)
apply(con2,1, sum) # different row totals

con1.adj <- con1
for ( i in 1:nrow(con1)){
  con1.adj[i,1] <- con1[i,1] * ( sum(con2[i,]) / sum(con1[i,]) )
  con1.adj[i,2] <- con1[i,2] * ( sum(con2[i,]) / sum(con1[i,]) )
  con1.adj[i,3] <- con1[i,3] * ( sum(con2[i,]) / sum(con1[i,]) )
}
con1.adj <- data.frame(con1.adj)
apply(con1.adj,1, sum) # same row totals 
```

（上下文：从别人的工作中挖出这段代码并愉快地使用了一段时间。现在我看起来很糟糕，因为我已经在陡峭的 R 学习曲线上稍微上升了一点。还希望代码被重新使用其他人。真的很喜欢这种语言，如果我能找到一种更漂亮的方式，我会更喜欢它）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-24T21:52:13.163

我认为这个单线应该可以完成这项工作：

```
con1.adj <- con1 * rowSums(con2) / rowSums(con1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T22:11:49.840

`con1`这是另一个建议，以更好的方式生成您的

```
rgen <- function(X,mean=10,sd=3){
  round(rnorm(n=length(X),mean=mean,sd=sd))
}

con1 <- data.frame(apply(con1,2,rgen)) 
```

请注意，您的随机向量的大小将与您的维度相匹配`array`，您可以动态传递不同的值`mean`，`sd`例如`apply(con1,2,rgen,5,2)`生成`rnorm``mean=5``sd=2`

# c - C 内存错误

> ID：15056823
> 
> 赞同：0
> 
> 时间：2013-02-24T21:23:56.353
> 
> 标签：c, valgrind, calloc

我必须将数字表示为字符串并对它们执行加法运算。这是家庭作业，到目前为止我所做的工作。它输出正确的输出，但我的程序也需要没有内存错误，当然不是这样。

有人可以就这些未初始化变量的情况提供任何帮助都会有所帮助。我认为这是使用 malloc 而不是 calloc，但我也改变了它，仍然没有骰子。

这是我的输出：

```
./a.out
strlen: 12
Old: 12122334455
New: 012122334455
Result: 167244668910 
```

这是我的代码：/* * 文件：strmath.c */

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <limits.h>
#include <ctype.h>

int cmp(char *, char *, int);
void add(char *, char *, int);
char * reverse(char *);
void strReverse(char *);
char *strpadleft(char * , char,  int );

int main()
{
  char str1[] = "155122334455",
       str2[] = "12122334455"; //malloc(10);
  int len = strlen(str1) < strlen(str2)?strlen(str2):strlen(str1);
  printf("strlen: %d\n", len);
  // int result = cmp(str1, str2, len);
  // if(result > 0)
  //   printf("%s > %s\n", str1, str2);
  // else if(result < 0)
  //   printf("%s > %s\n", str2, str1);
  // else
  //   printf("%s == %s\n", str1, str2);

    add(str1, str2, len);
    return 0; 
}

int cmp(char *str1, char *str2, int longest) {
    if (strlen(str1) < strlen(str2))
        return -1;
    else if (strlen(str1) > strlen(str2))
        return 1;
    else
        return strncmp(str1, str2, longest);
}

void add(char *str1, char *str2, int longest) {

    char * num1 = strpadleft(str1, '0', longest);
    char * num2 = strpadleft(str2, '0', longest);
    strReverse(num1);
    strReverse(num2);

    char * result = calloc(longest + 2  , sizeof(char));
    int i, x, carry=0;
    for (i = 0; i < longest;i++) {
        x = (num1[i] - '0') + (num2[i] - '0') + carry;

        if (x >= 10) {
            carry = 1;
            x -= 10;
        }
        else {
            carry = 0;
        }
        result[i] = x + '0';
    }

    if (carry == 1) { result[i+1] = '1';}
    strReverse(result);
    printf("Result: %s\n", result );
    //free(result);
    //free(num1);
    //free(num2);
}

char *strpadleft(char * string, char pad, int padSize)
{
    int ssize = strlen(string);
    if (padSize <= ssize) return string;

    char *padded = calloc((padSize + 1) , sizeof(char));
    memset(padded, pad, padSize-ssize);
    padded = strcat(padded, string);
    printf("Old: %s\nNew: %s\n", string, padded);
    return padded;
}

void strReverse(char* str){
    int length = strlen(str);
    char temp;
    int i,j;
    for(i = 0, j = length-1;i < (length-1)/2; i++, j--){
        temp = str[i];
        str[i]=str[j];
        str[j] = temp;
    }
    return;
} 
```

这是我的 valgrind 输出（valgrind 的完整输出位于 [http://textsnip.com/ae3c9a](http://textsnip.com/ae3c9a)，因为它对 SO 来说太多了）：

```
==17115== Memcheck, a memory error detector
==17115== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==17115== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==17115== Command: a.out
==17115== 
==17115== Conditional jump or move depends on uninitialised value(s)
==17115==    at 0x414F76: __linkin_atfork (in /p2/hj/jsiegal/csc352/assg5/a.out)
==17115==    by 0x404383: ptmalloc_init.part.8 (in /p2/hj/jsiegal/csc352/assg5/a.out)
==17115==    by 0x407E64: malloc_hook_ini (in /p2/hj/jsiegal/csc352/assg5/a.out)
==17115==    by 0x4538E2: _dl_init_paths (in /p2/hj/jsiegal/csc352/assg5/a.out)
==17115==    by 0x415788: _dl_non_dynamic_init (in /p2/hj/jsiegal/csc352/assg5/a.out)
==17115==    by 0x416002: __libc_init_first (in /p2/hj/jsiegal/csc352/assg5/a.out)
==17115==    by 0x40173C: (below main) (in /p2/hj/jsiegal/csc352/assg5/a.out)
==17115==  Uninitialised value was created
==17115==    at 0x45018A: brk (in /p2/hj/jsiegal/csc352/assg5/a.out)
==17115==    by 0x41370B: sbrk (in /p2/hj/jsiegal/csc352/assg5/a.out)
==17115==    by 0x401C95: __pthread_initialize_minimal (in /p2/hj/jsiegal/csc352/assg5/a.out)
==17115==    by 0x4016F0: (below main) (in /p2/hj/jsiegal/csc352/assg5/a.out)

...

==17115== Use of uninitialised value of size 8
==17115==    at 0x405B27: _int_malloc (in /p2/hj/jsiegal/csc352/assg5/a.out)
==17115==    by 0x408E29: calloc (in /p2/hj/jsiegal/csc352/assg5/a.out)
==17115==    by 0x401418: add (strmath.c:51)
==17115==    by 0x4012AB: main (strmath.c:31)
==17115==  Uninitialised value was created by a stack allocation
==17115==    at 0x453ADD: _dl_init_paths (in /p2/hj/jsiegal/csc352/assg5/a.out) 
```

**固定的：**

```
/*
 * File: strmath.c
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <limits.h>
#include <ctype.h>

int cmp(char *, char *, int);
void add(char *, char *, int);
char * reverse(char *);
void strReverse(char *);
void strpadleft(char * , char *, char,  int );

int main()
{
  char str1[] = "155122334455",
       str2[] = "12122334455"; //malloc(10);
  int len = strlen(str1) < strlen(str2)?strlen(str2):strlen(str1);
  printf("strlen: %d\n", len);
  // int result = cmp(str1, str2, len);
  // if(result > 0)
  //   printf("%s > %s\n", str1, str2);
  // else if(result < 0)
  //   printf("%s > %s\n", str2, str1);
  // else
  //   printf("%s == %s\n", str1, str2);

    add(str1, str2, len);
    return 0; 
}

int cmp(char *str1, char *str2, int longest) {
    if (strlen(str1) < strlen(str2))
        return -1;
    else if (strlen(str1) > strlen(str2))
        return 1;
    else
        return strncmp(str1, str2, longest);
}

void add(char *str1, char *str2, int longest) {

    char * num1 = malloc((longest + 1) * sizeof(char));
    memset(num1, '\0', longest+1);        
    strpadleft(str1, num1, '0', longest);

    char * num2 = malloc((longest + 1) * sizeof(char));
    memset(num2, '\0', longest+1);
    strpadleft(str2, num2, '0', longest);

    strReverse(num1);
    strReverse(num2);

    char * result = malloc(longest + 2  * sizeof(char));
    memset(result, '\0', longest+2);
    int i, x, carry=0;
    for (i = 0; i < longest;i++) {
        x = (num1[i] - '0') + (num2[i] - '0') + carry;

        if (x >= 10) {
            carry = 1;
            x -= 10;
        }
        else {
            carry = 0;
        }
        result[i] = x + '0';
    }

    if (carry == 1) { result[i+1] = '1';}
    strReverse(result);
    printf("Result: %s\n", result );
    free(result);
    free(num1);
    free(num2);
}

void strpadleft(char * string, char *padded, char pad, int padSize)
{
    int ssize = strlen(string);
    if (padSize <= ssize) {
        strcpy(padded, string);
        return;
    }

    //char *padded = malloc((padSize + 1) * sizeof(char));
    //memset(padded, '\0', padSize);
    memset(padded, pad, padSize-ssize);
    padded = strcat(padded, string);
    printf("Old: %s\nNew: %s\n", string, padded);
    return;
}

void strReverse(char* str){
    int length = strlen(str);
    char temp;
    int i,j;
    for(i = 0, j = length-1;i < (length-1)/2; i++, j--){
        temp = str[i];
        str[i]=str[j];
        str[j] = temp;
    }
    return;
} 
```

和 valgrind 输出：

```
==12778== Memcheck, a memory error detector
==12778== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==12778== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==12778== Command: a.out
==12778==
strlen: 12
Old: 12122334455
New: 012122334455
Result: 167244668910
==12778==
==12778== HEAP SUMMARY:
==12778==     in use at exit: 0 bytes in 0 blocks
==12778==   total heap usage: 3 allocs, 3 frees, 40 bytes allocated
==12778==
==12778== All heap blocks were freed -- no leaks are possible
==12778==
==12778== For counts of detected and suppressed errors, rerun with: -v
==12778== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 2 from 2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:03:39.773

valgrind 日志不代表您的程序执行。它实际上对 libc 内部函数感到疯狂。造成这种情况的明显原因是缺少您正在使用的确切 libc 版本的正确抑制文件（误报内存访问/分配错误列表）。Valgrind 应该自动解决它，但这并没有发生。您需要在系统中重新编译 valgrind 以便它再次检测到正确的 libc，或者它完全无法自动检测它（然后您需要手动构建一个抑制文件）。参见，例如：

*   [http://www.mail-archive.com/valgrind-users@lists.sourceforge.net/msg00400.html](http://www.mail-archive.com/valgrind-users@lists.sourceforge.net/msg00400.html)
*   [http://comments.gmane.org/gmane.comp.debugging.valgrind/12162](http://comments.gmane.org/gmane.comp.debugging.valgrind/12162)

此外，抑制文件文档：

*   [http://valgrind.org/docs/manual/manual-core.html#manual-core.suppress](http://valgrind.org/docs/manual/manual-core.html#manual-core.suppress)

现在，对于代码，很明显每个 calloc 没有对应的 free。我将复制粘贴我的 valgrind 执行，以便您了解真正的 valgrind 输出：

```
(...)
==26074== 13 bytes in 1 blocks are definitely lost in loss record 1 of 2
==26074==    at 0x4C29E46: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==26074==    by 0x400A15: strpadleft (in /tmp/a)
==26074==    by 0x40081A: add (in /tmp/a)
==26074==    by 0x4007D4: main (in /tmp/a)
==26074== 
==26074== 14 bytes in 1 blocks are definitely lost in loss record 2 of 2
==26074==    at 0x4C29E46: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==26074==    by 0x40084B: add (in /tmp/a)
==26074==    by 0x4007D4: main (in /tmp/a) 
```

这显示了正在发生的事情：没有 calloc 有匹配的 free。在 add 函数中，有一个用于结果的 calloc。缺少一个免费的。在 strpadleft 中，结果函数有一个 calloc。所以它返回一个动态分配的变量，应该由调用者释放。那不见了。然而，真正的问题是 strpadleft 可能会提前返回（返回字符串）而不分配任何东西。调用者无法知道函数是否正在分配新值。这是错误的。要么通知调用者做了什么操作，要么使分配统一（总是分配）。

结论：释放内存是匹配所有分配的简单问题。您使用变量跟踪分配。当你不再需要它们时，释放它们。

# java - 在 Google Cloud Endpoints 中获取原始 HTTP 数据（标头、Cookie 等）

> ID：15056830
> 
> 赞同：24
> 
> 时间：2013-02-24T21:24:42.933
> 
> 标签：java, google-app-engine, google-cloud-endpoints

我想知道是否可以在 Cloud Endpoint 中收集原始 HTTP 数据。我似乎在 Google 的文档中找不到任何内容，但 App Engine 的 Twitter 告诉我它是（[https://twitter.com/app_engine/status/305747445017624576](https://twitter.com/app_engine/status/305747445017624576)）。如果是这样，我可以请它的语法吗？我知道 GCE 的 API 仍处于早期阶段，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-24T22:11:17.047

将 HttpServletRequest 参数添加到您的端点方法，例如

```
@ApiMethod
public MyResponse getResponse( HttpServletRequest req, @Named("infoId") String infoId ) {
    // Use 'req' as you would in a servlet, e.g.
    String ipAddress = req.getRemoteAddr();
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-17T01:36:55.363

该请求在 Endpoints 方法中作为*注入类型*可用。`HttpServletRequest`当您在具有该类型的方法上声明一个参数时，该类型的对象会不可见地注入到您的 Java 方法定义中，如下所示：

```
import javax.servlet.http.HttpServletRequest;
...

@ApiMethod
public MyMethod getRequest( HttpServletRequest req ) {

HttpServletRequest myRequest = req;
...
} 
```

这记录在这里：

[https://cloud.google.com/endpoints/docs/frameworks/java/parameter-and-return-types#injected_types](https://cloud.google.com/endpoints/docs/frameworks/java/parameter-and-return-types#injected_types)

引用上述文档：

> **注入类型**
> 
> 注入类型是那些接受 Cloud Endpoints Frameworks 特殊处理的类型。如果将此类类型用作方法参数，则它不会成为 API 的一部分。相反，该参数由 Endpoints Frameworks 填充。
> 
> 注入的类型如下：
> 
> com.google.appengine.api.users.User
> 
> **javax.servlet.http.HttpServletRequest**
> 
> javax.servlet.ServletContext

# c++ - QT5 迁移和提升：if.hpp: 宏参数不匹配错误

> ID：15056834
> 
> 赞同：8
> 
> 时间：2013-02-24T21:24:56.117
> 
> 标签：c++, qt, boost, qt5, c-preprocessor

在 qt 4.8 中，我使用了 boost (1.52) 一切都很好...现在我尝试移至 QT5 并`if.hpp: Macro argument mismatch`在线出错`131 BOOST_MPL_AUX_NA_SPEC(3, if_)`。在一些[QT 论坛](https://bugreports.qt-project.org/browse/QTBUG-22829)中，提出了这样的解决方案：

```
#ifndef Q_MOC_RUN
// All boost includes
#endif // Q_MOC_RUN 
```

在我使用 boost 的每个文件中......所以这里的问题是 - 如何告诉 boost QT 还没有准备好，`BOOST_MPL_AUX_NA_SPEC`并且 boost 应该使用一些更原始的预处理器语法，这些语法与 QT5 兼容？

* * *

更新：找到[了这个解决方案](https://stackoverflow.com/a/8618170/1056328)，但它似乎在 Qt5=(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-24T01:40:43.970

这是我在网上搜索了几个小时后能够找到的最佳解决方法。这基本上是其他人一直在说的，但有一些澄清。

*   该问题与 moc.exe 未正确处理 Boost 宏有关。
*   为了解决这个问题，我们通过为 moc.exe 进程定义它们的包含保护来禁用 Boost 标头的包含，但不适用于常规源代码编译。
*   这可以通过将以下代码添加到您的项目文件（例如 myproject.pro）中最容易地完成：

    ```
    # ensure QMAKE_MOC contains the moc executable path
    load(moc) 

    # for each Boost header you include...
    QMAKE_MOC += -DBOOST_INCLUDE_GUARD_GOES_HERE 
    ```

例如，如果我想使用日志库，我将拥有：

```
#include <boost/log/trivial.hpp> 
```

如果我打开头文件，我可以在顶部看到包含保护名为`BOOST_LOG_TRIVIAL_HPP_INCLUDED_`. 因此，.pro 文件中的相应行将显示为：

```
QMAKE_MOC += -DBOOST_LOG_TRIVIAL_HPP_INCLUDED_ 
```

如果它们与任何人相关，还有一些注意事项：

*   如果您发现这不起作用，请确保在您向项目文件添加新行时运行 qmake 并重建您的项目。
*   我正在使用 Boost 1.53 和 Qt 5.0.1，并在 Windows 7 32 位的 QtCreator 中为 MSVC2010 构建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-19T23:17:57.210

我一直在努力解决同样的问题，发现当我 `_MSC_VER=1700`从 moc 的自定义构建命令中删除定义时，警告对我来说消失了。

通过覆盖 qmake.conf 变量，我能够从所有自定义构建 moc 步骤中删除它`QMAKE_COMPILER_DEFINES`。我正在使用 .pro 文件生成 .vcxproj 文件并使用 Visual Studio 2012 编译我的项目（[以下](https://stackoverflow.com/questions/2339832/how-to-generate-sln-vcproj-using-qmake)是如何从 .pro 文件生成 .vcproj/.vcxproj 文件）。

在与 win32-msvc2012 关联的 qmake.conf 文件中，该变量如下：

```
QMAKE_COMPILER_DEFINES += _MSC_VER=1700 _WIN32 
```

在我的 .pro 文件中，我用这个覆盖了它：

```
QMAKE_COMPILER_DEFINES = _WIN32 
```

然后我重新生成了 .vcxproj 文件，它编译时没有宏参数不匹配警告。

我正在使用 VS 2012、boost 1.51 和 qt 5.1.2（编译自 git@gitorious.org:qt/qt5.git）。

希望这对你也有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T14:54:06.970

我刚刚遇到了同样的问题，并在 Qt 论坛上找到了有用的信息。

以下是 Qt bugreport 和 Qt-forum 线程，其中包含有用的问题描述和解决方法：

[https://bugreports.qt-project.org/browse/QTBUG-29331](https://bugreports.qt-project.org/browse/QTBUG-29331)

[http://qt-project.org/forums/viewthread/22993/](http://qt-project.org/forums/viewthread/22993/)

# html - Google Adsense TOC 与公共内容创作者分享广告收入？

> ID：15056839
> 
> 赞同：-1
> 
> 时间：2013-02-24T21:25:15.443
> 
> 标签：html, adsense, ads

与帮助在网站上创建内容的公众分享 Google Adsense 广告的利润是否违反 Google TOC？IE 每月使用贝宝海量 API 向他们付款，以鼓励人们创建内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:29:02.217

我对这样的安排持怀疑态度。是什么阻止了这些人进行点击欺诈？当 Google 关闭该帐户时，受影响的不是他们的网站。

我以前见过人们尝试这样做；他们在 Digital Point 上做了一段时间类似的事情。但我个人不会尝试这样做，因为害怕失去我的 Adsense 帐户，因为我不认识的人做了一些不正当的事情来赚取额外的 1 美元。

# cuda - 何时真正需要填充共享内存？

> ID：15056842
> 
> 赞同：6
> 
> 时间：2013-02-24T21:25:42.053
> 
> 标签：cuda, shared-memory

我对来自 NVidia 的 2 份文件感到困惑。“CUDA 最佳实践”描述了共享内存是按银行组织的，通常在 32 位模式下，每 4 个字节就是一个银行（这就是我的理解）。然而[，使用 CUDA 的并行前缀和（扫描）](https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch39.html)详细说明了由于存储库冲突，应如何将填充添加到扫描算法中。

对我来说问题是，这个算法的基本类型是浮点数，它的大小是 4 个字节。因此每个浮动都是一个银行，没有银行冲突。

那么我的理解是否正确——即，如果您使用 4*N 字节类型，您不必担心银行冲突，因为根据定义不会有冲突？如果不是，我应该如何理解它（何时使用填充）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-24T21:51:52.880

您可能[对此网络研讨会](http://developer.download.nvidia.com/CUDA/training/sharedmemoryusage_july2011.mp4)感兴趣，来自[NVIDIA CUDA 网络研讨会页面](https://developer.nvidia.com/gpu-computing-webinars) 共享内存（包括存储库）也在[本网络研讨会](http://developer.download.nvidia.com/CUDA/training/NVIDIA_GPU_Computing_Webinars_CUDA_Memory_Optimization.pdf)的幻灯片 35-45 中进行了描述。

通常，当两个不同的线程试图（从同一内核指令）访问共享内存中的低 4 位（cc2.0 之前的设备）或 5 位（cc2.0 和更新版本设备）的地址是相同的。当确实发生存储库冲突时，共享内存系统会串行访问同一存储库中的位置，从而降低性能。对于某些访问模式，填充试图避免这种情况。请注意，对于 cc2.0 和更高版本，如果所有位都相同（即相同的位置），这不会导致存储库冲突。

从图形上看，我们可以这样看：

```
__shared__ int A[2048];
int my;
my = A[0]; // A[0] is in bank 0
my = A[1]; // A[1] is in bank 1
my = A[2]; // A[2] is in bank 2
...
my = A[31]; // A[31] is in bank 31 (cc2.0 or newer device)
my = A[32]; // A[32] is in bank 0
my = A[33]; // A[33] is in bank 1 
```

现在，如果我们在 warp 中跨线程访问共享内存，我们可能会遇到银行冲突：

```
my = A[threadIdx.x];    // no bank conflicts or serialization - handled in one trans.
my = A[threadIdx.x*2];  // 2-way bank conflicts - will cause 2 level serialization
my = A[threadIdx.x*32]; // 32-way bank conflicts - will cause 32 level serialization 
```

让我们仔细看看上面的 2-way bank 冲突。由于我们乘以2，线程 0 访问了 bank 0 中的位置 0，但线程 16 访问了*也在*`threadIdx.x`bank 0 中 的位置 32 ，从而产生了 bank 冲突。对于上面的 32 路示例，所有地址都对应于银行 0。因此，必须发生 32 次到共享内存的事务才能满足此请求，因为它们都是序列化的。

 *所以回答这个问题，*如果*我知道我的访问模式会是这样的，例如：

```
my = A[threadIdx.x*32]; 
```

然后我可能想要填充我的数据存储，以便它`A[32]`是一个虚拟/填充位置，`A[64]`等等`A[96]` 。然后我可以像这样获取相同的数据：

```
my = A[threadIdx.x*33]; 
```

并在没有银行冲突的情况下获取我的数据。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-24T21:51:03.197

你的理解是错误的。当来自同一个 warp 的线程访问驻留在同一个 bank 中的不同值时，就会发生 Bank 冲突。

来自 CUDA C 编程指南：

> 为了实现高带宽，共享内存被分成大小相等的内存模块，称为银行，可以同时访问。因此，可以同时处理由落在 n 个不同存储器组中的 n 个地址构成的任何存储器读取或写入请求，从而产生的总带宽是单个模块带宽的 n 倍。
> 
> 但是，如果一个内存请求的两个地址落在同一个内存 bank 中，就会发生 bank 冲突，访问必须串行化。硬件根据需要将具有存储体冲突的内存请求拆分为多个单独的无冲突请求，从而将吞吐量降低等于单独内存请求数量的因子。如果单独的内存请求的数量为 n，则称初始内存请求会导致 n-way bank 冲突。

填充用于避免银行冲突。当您知道您的共享内存访问模式时，您可以确定如何填充您的共享内存阵列以避免银行冲突。

例如，假设您有`__shared__ float x[32][32];`并且每个线程索引为 tid 的线程都像这样访问 x `somevariable = x[tid][0];`。这将导致 32-way bank 冲突，因为所有线程都从同一个 bank 访问不同的值。
为避免冲突，您在第一个维度中用一个元素填充数组：`__shared__ float x[32][33];`。这将完全消除存储库冲突，因为现在每一行都有一个存储库位置，相对于前一行偏移一个。*

# java - Java - 在构造函数中将参数分配给多个变量

> ID：15056843
> 
> 赞同：1
> 
> 时间：2013-02-24T21:25:49.337
> 
> 标签：java, variables, constructor, arguments

我在网上搜索并找不到答案。在构造函数中将参数分配给多个变量是否不合适，还是必须存在一对一的关系？

```
public A6HangmanLogic(String keyPhrase, int numberOfGuesses)
{
    this.keyPhrase = keyPhrase;
    this.numberOfGuesses = numberOfGuesses;
    guessesLeft = numberOfGuesses;
} 
```

*guessesLeft*的值（一个静态整数）从通过循环更新的访问器方法返回。我当然可以写一个 mutator 方法，但是我必须调用它。我也可以将*this.numberOfGuesses*更改为只是*猜测*，而根本没有第三个变量赋值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:41:01.717

很好，但我会存储`guessCount`并使用默认的初始化值零：

```
private guessCount; 
```

我也会重命名`numberOfGuesses`为，`maxGuesses`这样它的含义就更清楚了（它也更传统）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:28:32.247

没有理由不能为多个变量分配相同的值。

解决问题的另一种方法可能是存储所做的猜测次数，然后计算剩下的猜测次数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T21:30:02.430

是的，将参数分配给任意数量的变量是非常好的。

您可以像在方法中一样使用它们。

# authorization - 如何授权与 CRM 的连接？

> ID：15056844
> 
> 赞同：0
> 
> 时间：2013-02-24T21:26:01.293
> 
> 标签：authorization, dynamics-crm-2011

我在不允许使用 SDK 中的帮助程序类的计算机上。我以为如果我指定了以下信息，我仍然可以连接，但是[这篇文章](http://technet.microsoft.com/en-us/library/hh670628.aspx)把我弄糊涂了，把我吓死了。

```
string organization = @"https://serverName/XRMServices/2011/Organization.svc";
string name = "myUserName";
string pass = "1234";

ClientCredentials cred = new ClientCredentials();
cred.UserName.UserName = name;
cred.UserName.Password = pass; 
```

然后我就卡住了。我没有得到通常的*OrganizationServiceProxy*。事实上，我根本不清楚如何获得对服务的引用！

我怎么做？

目标系统将通过 AD（本地）和 O365 帐户/实时 ID（在线）授权我的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:16:41.893

以下链接显示如何获得对组织服务代理的引用

[组织服务代理](http://msdn.microsoft.com/en-us/library/gg328416.aspx)

您可以在以下路径找到它的示例

“SDK/SampleCode\CS\GeneralProgramming\LateBound\CRUDOperationsDE.cs”

# java - 坚持访问非最终变量？

> ID：15056847
> 
> 赞同：0
> 
> 时间：2013-02-24T21:26:17.200
> 
> 标签：java, eclipse, variables, user-interface, final

我只是在测试我的代码，我正在努力做到这一点，所以当我单击“Push”按钮时，第一个 textArea 会打印出“Hello”。

但我不断收到此错误：Cannot reference a non-final variable textArea inside an internal class defined in a different method

这是我的代码：

```
import java.awt.BorderLayout; 
```

公共类 WindowBuilderTest 扩展 JFrame {

```
private JPanel contentPane;
private JTextField textField;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                WindowBuilderTest frame = new WindowBuilderTest();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public WindowBuilderTest() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 400, 400);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    GridBagLayout gbl_contentPane = new GridBagLayout();
    gbl_contentPane.columnWidths = new int[]{90, 92, 95, 95, 0};
    gbl_contentPane.rowHeights = new int[]{64, 74, 83, 74, 12, 0};
    gbl_contentPane.columnWeights = new double[]{1.0, 1.0, 1.0, 1.0, Double.MIN_VALUE};
    gbl_contentPane.rowWeights = new double[]{1.0, 0.0, 0.0, 1.0, 1.0, Double.MIN_VALUE};
    contentPane.setLayout(gbl_contentPane);

    JTextArea textArea = new JTextArea();
    textArea.setEditable(false);
    GridBagConstraints gbc_textArea = new GridBagConstraints();
    gbc_textArea.gridheight = 2;
    gbc_textArea.insets = new Insets(0, 0, 5, 5);
    gbc_textArea.fill = GridBagConstraints.BOTH;
    gbc_textArea.gridx = 0;
    gbc_textArea.gridy = 0;
    contentPane.add(textArea, gbc_textArea);

    JLabel lblstack = new JLabel("<-- Stack");
    GridBagConstraints gbc_lblstack = new GridBagConstraints();
    gbc_lblstack.gridheight = 2;
    gbc_lblstack.anchor = GridBagConstraints.WEST;
    gbc_lblstack.insets = new Insets(0, 0, 5, 5);
    gbc_lblstack.gridx = 1;
    gbc_lblstack.gridy = 0;
    contentPane.add(lblstack, gbc_lblstack);

    JLabel lblNewLabel = new JLabel("Result -->");
    GridBagConstraints gbc_lblNewLabel = new GridBagConstraints();
    gbc_lblNewLabel.anchor = GridBagConstraints.EAST;
    gbc_lblNewLabel.gridheight = 2;
    gbc_lblNewLabel.insets = new Insets(0, 0, 5, 5);
    gbc_lblNewLabel.gridx = 2;
    gbc_lblNewLabel.gridy = 0;
    contentPane.add(lblNewLabel, gbc_lblNewLabel);

    JTextArea textArea_2 = new JTextArea();
    textArea_2.setEditable(false);
    GridBagConstraints gbc_textArea_2 = new GridBagConstraints();
    gbc_textArea_2.gridheight = 2;
    gbc_textArea_2.insets = new Insets(0, 0, 5, 0);
    gbc_textArea_2.fill = GridBagConstraints.BOTH;
    gbc_textArea_2.gridx = 3;
    gbc_textArea_2.gridy = 0;
    contentPane.add(textArea_2, gbc_textArea_2);

    textField = new JTextField();
    GridBagConstraints gbc_textField = new GridBagConstraints();
    gbc_textField.anchor = GridBagConstraints.SOUTH;
    gbc_textField.gridwidth = 2;
    gbc_textField.insets = new Insets(0, 0, 5, 5);
    gbc_textField.fill = GridBagConstraints.HORIZONTAL;
    gbc_textField.gridx = 1;
    gbc_textField.gridy = 2;
    contentPane.add(textField, gbc_textField);
    textField.setColumns(10);

    JLabel lblenterInteger = new JLabel("<-- Enter Integer");
    GridBagConstraints gbc_lblenterInteger = new GridBagConstraints();
    gbc_lblenterInteger.anchor = GridBagConstraints.SOUTHWEST;
    gbc_lblenterInteger.insets = new Insets(0, 0, 5, 0);
    gbc_lblenterInteger.gridx = 3;
    gbc_lblenterInteger.gridy = 2;
    contentPane.add(lblenterInteger, gbc_lblenterInteger);

    JButton btnNewButton = new JButton("Push");
    btnNewButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {

            String TEST = "Hello";

            textArea.setText(TEST);

        }
    });
    GridBagConstraints gbc_btnNewButton = new GridBagConstraints();
    gbc_btnNewButton.fill = GridBagConstraints.BOTH;
    gbc_btnNewButton.insets = new Insets(0, 0, 5, 5);
    gbc_btnNewButton.gridx = 0;
    gbc_btnNewButton.gridy = 3;
    contentPane.add(btnNewButton, gbc_btnNewButton);

    JButton btnNewButton_1 = new JButton("Pop");
    GridBagConstraints gbc_btnNewButton_1 = new GridBagConstraints();
    gbc_btnNewButton_1.fill = GridBagConstraints.BOTH;
    gbc_btnNewButton_1.insets = new Insets(0, 0, 5, 5);
    gbc_btnNewButton_1.gridx = 1;
    gbc_btnNewButton_1.gridy = 3;
    contentPane.add(btnNewButton_1, gbc_btnNewButton_1);

    JButton btnNewButton_2 = new JButton("Peek");
    GridBagConstraints gbc_btnNewButton_2 = new GridBagConstraints();
    gbc_btnNewButton_2.fill = GridBagConstraints.BOTH;
    gbc_btnNewButton_2.insets = new Insets(0, 0, 5, 5);
    gbc_btnNewButton_2.gridx = 2;
    gbc_btnNewButton_2.gridy = 3;
    contentPane.add(btnNewButton_2, gbc_btnNewButton_2);

    JButton btnNewButton_3 = new JButton("Exit");
    GridBagConstraints gbc_btnNewButton_3 = new GridBagConstraints();
    gbc_btnNewButton_3.fill = GridBagConstraints.BOTH;
    gbc_btnNewButton_3.insets = new Insets(0, 0, 5, 0);
    gbc_btnNewButton_3.gridx = 3;
    gbc_btnNewButton_3.gridy = 3;
    contentPane.add(btnNewButton_3, gbc_btnNewButton_3);

    JTextArea textArea_1 = new JTextArea();
    textArea_1.setEditable(false);
    GridBagConstraints gbc_textArea_1 = new GridBagConstraints();
    gbc_textArea_1.gridwidth = 4;
    gbc_textArea_1.fill = GridBagConstraints.BOTH;
    gbc_textArea_1.gridx = 0;
    gbc_textArea_1.gridy = 4;
    contentPane.add(textArea_1, gbc_textArea_1);
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T21:27:19.393

然后改变这个：

```
JTextArea textArea = new JTextArea(); 
```

对此：

```
final JTextArea textArea = new JTextArea(); 
```

这只是您在使用`anonymous inner classes`... 时必须做的事情；）

# matlab - Matlab containers.map 带有 SerialDateNumber 的奇怪键行为

> ID：15056848
> 
> 赞同：0
> 
> 时间：2013-02-24T21:26:24.337
> 
> 标签：matlab, datetime, map, key, containers

以下代码使用 Matlabs 序列号作为 matlabs 容器映射中的键。键类型是双键。它是否正确？Matlabs 序列号可以用作密钥吗？

```
 currDateTime='2013-02-12 11:00';
     dateNum=datenum(currDateTime);
    keySet =   {dateNum};
    currentDateNum=datestr(dateNum);
    valueSet = {currentDateNum} ;

    weatherFrontMap = containers.Map(keySet,valueSet);

     weatherFrontMap(dateNum)='eleven';
     currDateTime='2013-02-12 12:00';
     dateNum=datenum(currDateTime);
     weatherFrontMap(dateNum)='twelve';
     currDateTime='2013-02-12 13:00';
     dateNum=datenum(currDateTime);
     weatherFrontMap(dateNum)='thirteen';

    currentDateNum=datestr(dateNum);
    disp (currentDateNum)
    str=weatherFrontMap(dateNum);
    disp(str)

     subtractHour=addtodate(dateNum,-1,'hour');
     currentDateNum=datestr(subtractHour);
    disp (currentDateNum)

     strSubtractHour=weatherFrontMap(subtractHour);
     disp(strSubtractHour)

     subtractHour2=addtodate(dateNum,-2,'hour');
      currentDateNum=datestr(subtractHour2);
    disp (currentDateNum)

     strSubtractHour2=weatherFrontMap(subtractHour2);
     disp(strSubtractHour2) 
```

这打印：

2013 年 2 月 12 日 13:00:00

十三

2013 年 2 月 12 日 12:00:00

十二

2013 年 2 月 12 日 11:00:00

使用 container.Map/subsref 时出错

此容器中不存在指定的密钥。

testMap 中的错误（第 40 行）

strSubtractHour2=weatherFrontMap(subtractHour2);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:12:35.803

浮点数不太适合地图容器，因为用浮点数测试相等性是有风险的（由于浮点数的存储不精确）。

如果您使用可以控制精度的日期/时间的字符串表示形式，此代码会更好地工作。

# python - Python除了UnicodeError？

> ID：15056850
> 
> 赞同：5
> 
> 时间：2013-02-24T21:26:30.427
> 
> 标签：python, python-3.3

在我的代码中，我不断收到此错误...

```
UnicodeEncodeError: 'charmap' codec can't encode character '\u2013' in position 390: character maps to <undefined> 
```

我试图放置一个除了 UnicodeError 和 UnicodeEncodeError 但没有任何作用，问题是它是用户输入，所以我无法控制他们输入的内容，所以我需要所有编码错误来显示一个显示错误而不是崩溃程序的打印.. .

```
try:
    argslistcheck = argslist[0]
    if argslistcheck[0:7] != "http://":
        argslist[0] = "http://" + argslist[0]
    with urllib.request.urlopen(argslist[0]) as url:
        source = url.read()
        source = str(source, "utf8")
    except urllib.error.URLError:
        print("Couln't connect")
        source = ""
    except UnicodeEncodeError:
        print("There was an error encrypting...")
        source = "" 
```

追溯：

```
Traceback (most recent call last):
  ..... things leading up to error
  File "C:\path", line 99, in grab print(source)
  File "C:\Python33\lib\encodings\cp437.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_map)[0]
UnicodeEncodeError: 'charmap' codec can't encode character '\u2013' in position 390: character maps to <undefined> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T21:45:04.297

您的*打印*失败。您的 Windows 控制台不支持打印 UTF-8，您需要更改代码页：

```
chcp 65001 
```

这是*Windows 命令*，而不是 python 命令。您可能还需要切换字体，Lucida Sans Console 是一种 Unicode 字体，可以处理更多字形。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T21:49:10.197

试试这个：

`source = str(source, encoding='utf-8', errors = 'ignore')`

或者看看[这个帖子的问题](https://stackoverflow.com/questions/14630288/unicodeencodeerror-charmap-codec-cant-encode-character-maps-to-undefined)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-24T21:39:52.860

试试这个来替换 str()： `source = source.encode('UTF-8')`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-02T16:54:28.820

```
start_url="https://www.indeed.co.in/jobs?q=teacher&l=India"
page_data=requests.get(start_url)
soup=BeautifulSoup(page_data.text,"lxml")
fname='1download'
with open(fname,'w')as f:
    f.write(soup.prettify())
f.close()

return codecs.charmap_encode(input,self.errors,encoding_table)[0]
UnicodeEncodeError: 'charmap' codec can't encode character '\u20b9' in position 
235677: character maps to <undefined> 
```

这两个错误都可以通过将 utf-8 作为编码添加到文件来解决。还请注意，您必须使用 open() 方法来打开文件

f=open() 也会给你错误

这是正确的代码：

```
 start_url="https://www.indeed.co.in/jobs?q=teacher&l=India"
 page_data=requests.get(start_url)
 soup=BeautifulSoup(page_data.text,"lxml")
 fname='1download'
 with open(fname,'w',encoding="utf-8")as f:
     f.write(soup.prettify())
 f.close() 
```

# python - Python：在字符串中索引子的位置

> ID：15056856
> 
> 赞同：2
> 
> 时间：2013-02-24T21:26:58.600
> 
> 标签：python

我正在尝试创建一个程序，该程序将列出子字符串在父字符串中出现的位置。例如，假设我们在父字符串“abcabcabcabcabcabca”中搜索“bc”，程序将返回 1、4、7、10、13、16。

到目前为止，我一直在使用：

```
import string

def subStringMatchExact():
    print "This program will index the locations a given sequence"
    print "occurs within a larger sequence"
    seq = raw_input("Please input a sequence to search within: ")
    sub = raw_input("Please input a sequence to search for: ")
    n = 0
    for i in seq:
        x = string.find(seq, sub [n:])
        print x
        n = x + 1 
```

我也尝试用 string.index 运算符替换 string.find 。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:32:44.340

只需[`.find()`](http://docs.python.org/2/library/stdtypes.html#str.find)在输入字符串本身上调用。它将返回匹配的位置或未`-1`找到匹配的位置。它还需要一个*start*参数，因此您可以查找*下一个*匹配项：

```
def subStringMatchExact():
    print "This program will index the locations a given sequence"
    print "occurs within a larger sequence"
    seq = raw_input("Please input a sequence to search within: ")
    sub = raw_input("Please input a sequence to search for: ")

    positions = []
    pos = -1
    while True:
        pos = seq.find(sub, pos + 1)  # start searching *beyond* the previous match
        if pos == -1:   # Not found
            break
        positions.append(pos)
    return positions 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T21:33:29.950

我很懒，所以我会使用[`re.finditer`](http://docs.python.org/library/re.html#re.finditer)：

```
>>> import re
>>> s = "abcabcabcabcabcabca"
>>> for m in re.finditer('bc',s):
...     print m.start()
... 
1
4
7
10
13
16 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T21:36:03.247

如果这对您很重要，列表推导是一种非常优雅的方式：

```
>>> seq = "abcabcabcabcabcabca"
>>> sub = "bc"
>>> [i for i in range(len(seq)) if seq[i:].startswith(sub)]
[1, 4, 7, 10, 13, 16] 
```

这也应该是最快的解决方案。它遍历字符串并尝试查看剩余字符串（从该位置到结尾）是否在任何位置以指定的子字符串开头。如果是，它会收集该位置，如果不是，它会继续下一个。

# knockout.js - 被嵌套编辑器击倒 3 级或更多级别

> ID：15056859
> 
> 赞同：1
> 
> 时间：2013-02-24T21:27:18.643
> 
> 标签：knockout.js, knockout-mvc

在尝试扩展 KO 站点 ( [http://jsfiddle.net/rniemeyer/gZC5k/](http://jsfiddle.net/rniemeyer/gZC5k/) ) 上提供的嵌套编辑器的实时示例以更改布局并添加更深层次时，我无法解决两个问题。

虽然我能够到达这个阶段[http://jsfiddle.net/gZC5k/955/](http://jsfiddle.net/gZC5k/955/)

在模型中建立正确的层次结构时，我陷入了困境，

```
 var ContactsModel = function (contacts) {
var self = this;
self.contacts = ko.observableArray(ko.utils.arrayMap(contacts, function (contact) {
    return {
        firstName: contact.firstName,
        lastName: contact.lastName,
        phones: ko.observableArray(contact.phones),
        addresses: ko.observableArray(contact.addresses)
    };
})); 
```

这两个问题是：

*   无法向初始数据集中加载的“电话”添加新的“呼叫”（当我创建新电话时，我可以添加“呼叫”）
*   无法删除“通话”。

    ```
    self.removeCall = function (call) {
    $.each(self.phones(), function () {
        this.calls.remove(call)
    }) 
    ```

    };

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:19:57.593

由于 remove() 函数需要可观察数组，因此调用 observableArray

然后改变**removeCall**方法如下

```
self.removeCall = function (call) {
      alert(ko.toJSON(call));
     $.each(self.contacts(), function () {
        $.each(this.phones(), function () {
            alert(ko.toJSON(this));
        this.calls.remove(call)
    })
    })
}; 
```

对于**addCall**方法，遵循与**removeCall相同的结构**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:49:22.230

**我已经修复了你的模型。用小提琴替换这个代码，然后检查**

**它完美无缺**

```
self.contacts = ko.observableArray(ko.utils.arrayMap(contacts, function (contact) {
    return {
        firstName: contact.firstName,
        lastName: contact.lastName,
        addresses: ko.observableArray(contact.addresses),
        phones: ko.observableArray(ko.utils.arrayMap(contact.phones, function (phone) {
            return{
                type: phone.type,
                number: phone.number,
                calls: ko.observableArray(phone.calls)
            };
        }))
    };
})); 
```

# groovy - 在什么情况下我们可以期待 Groovy2.0 + 动态调用的性能提升？

> ID：15056862
> 
> 赞同：0
> 
> 时间：2013-02-24T21:27:44.007
> 
> 标签：groovy, invokedynamic

我将 Havlak 基准测试的 Java 代码从 Robert Hundt（参见[链接](https://days2011.scala-lang.org/sites/days2011/files/ws3-1-Hundt.pdf)）移植到 Groovy。现在我使用 Groovy 2.1.1 运行基准测试，使用动态调用和不调用动态调用，但计算所需的持续时间几乎相同。我做了什么来启用动态调用？我将*groovy--indy.jars 从 groovy-2.1.1\indy 复制到 groovy-2.1.1\lib。然后我在 groovy-2.1.1\lib 中删除了所有*名称中没有“indy”的 groovy .jar。此后，在 IntelliJ IDEA 中，我启用和禁用了标志 File > Settings > Compiler > Groovy Compiler > Invoke dynamic support。

我只是告诉这个让人们看看我是否正确打开了 indy 支持。但这不是我的问题。我的问题是，由于调用动态，我们可以期望在哪种情况下加快计算时间。我阅读了有关它的文章，但是很难将那里解释的关于 invoke dynamic 所做的事情翻译成“这种代码在 indy 支持下将执行得更快”的声明。Havlak 基准测试做了很多循环，其中通过调用 setter 来更改值。

如果有人对此事有所了解，我会很高兴在这里放弃一些解释:-)。

谢谢，奥利弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:31:21.297

我认为 invokedynamic 的主要加速将是当您使用某种鸭子类型时。

invokedynamic API 是为在 JVM 上具有动态方法分派的语言而设计的。Groovy 肯定是其中之一。但它只能使用 indy，如果您使用具有动态调度的方法。我可以给你一个例子，如果你需要的话。

然而，我分析了 Groovy 中的 indy 调度功能，似乎它只是将旧的动态调度函数打包到它的方法句柄中。事实上，如果它真的这样做，它不可能更快。在我看来，invokedynamic 的 Groovy 实现目前还没有优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:39:15.570

简短的回答：使用一个类别。如果您的代码在使用时确实变慢了，那么您没有使用 indy。

更长的答案：如果您可以在某处发布代码，我可以对其进行分析

# php - 如何使用 PHP 更改数据库中的 SALT 密码？

> ID：15056866
> 
> 赞同：1
> 
> 时间：2013-02-24T21:27:53.230
> 
> 标签：php, sql, passwords, sql-update, salt

我正在使用从 android 到一些 php 脚本的 HTTP POST 来更新数据库中的用户密码。

我正在使用与用户创建帐户并且数据库更新正在运行并更改 SALT 的值时相同的 SALT 哈希值，但是当我尝试使用新密码登录时，它会出现错误。

创建密码的初始代码是：

```
public function storeUser($name, $email, $password, $rand) {
    $uuid = uniqid('', true);
    $hash = $this->hashSSHA($password);
    $encrypted_password = $hash["encrypted"]; // encrypted password
    $salt = $hash["salt"]; // salt
    $auth = 0;
    $result = mysql_query("INSERT INTO users(unique_id, authorized, auth_code, name, email, encrypted_password, salt, created_at) VALUES('$uuid', '$auth', '$rand', '$name', '$email', '$encrypted_password', '$salt', NOW())");
    // check for successful store
    if ($result) {
        // get user details 
        $uid = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM users WHERE uid = $uid");
        // return user details
        return mysql_fetch_array($result);
    } else {
        return false;
    }
} 
```

哈希函数是：

```
 /**
 * Encrypting password
 * @param password
 * returns salt and encrypted password
 */
public function hashSSHA($password) {

    $salt = sha1(rand());
    $salt = substr($salt, 0, 10);
    $encrypted = base64_encode(sha1($password . $salt, true) . $salt);
    $hash = array("salt" => $salt, "encrypted" => $encrypted);
    return $hash;
}

/**
 * Decrypting password
 * @param salt, password
 * returns hash string
 */
public function checkhashSSHA($salt, $password) {

    $hash = base64_encode(sha1($password . $salt, true) . $salt);

    return $hash;
} 
```

最后是更新功能（问题出在哪里）：

```
 /**
 * Updating a users
 * password
 */
public function updatePassword($email, $password) {
    $uuid = uniqid('', true);
    $hash = $this->hashSSHA($password);
    $encrypted_password = $hash["encrypted"]; // encrypted password
    $salt = $hash["salt"]; // salt

    $result = mysql_query("UPDATE users SET encrypted_password='$encrypted_password',  updated_at = NOW() WHERE email='$email'");
    $result = mysql_query("UPDATE users SET salt='$salt',  updated_at = NOW() WHERE email='$email'");

    // check for successful store
    if ($result) {
        // get user details
        $uid = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM users WHERE email = '$email'");
        // return user details
        return mysql_fetch_array($result);
    } else {
        return false;
    }
} 
```

一如既往，非常感谢任何帮助。

编辑：

按要求登录功能：

```
 /**
 * Get user by email and password
 */
public function getUserByEmailAndPassword($email, $password) {
    $result = mysql_query("SELECT * FROM users WHERE email = '$email'") or die(mysql_error());
    // check for result
    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {
        $result = mysql_fetch_array($result);
        $salt = $result['salt'];
        $encrypted_password = $result['encrypted_password'];
        $hash = $this->checkhashSSHA($salt, $password);
        // check for password equality
        if ($encrypted_password == $hash) {
            // user authentication details are correct
            return $result;
        }
    } else {
        // user not found
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:17:28.807

您已经构建了一个弱方案来散列您的密码，因为您使用 SHA1 的单次迭代作为散列函数，并且因为盐被截断为 10 个字符并且是使用加密不安全`rand()`函数生成的。然后，将盐存放在单独的区域中，会使您的生活变得比必要的更加艰难。

在您的情况下，我强烈建议使用 PHP 的新函数[password_hash()](http://php.net/manual/en/function.password-hash.php)和[password_verify()](http://www.php.net/manual/en/function.password-verify.php)来获得强大的 BCrypt 哈希。它们负责生成安全的随机盐，生成的字符串包含散列值和盐，因此您可以将其存储在数据库的单个字段中。早期的 PHP 版本存在一个[兼容包](https://github.com/ircmaxell/password_compat/blob/master/lib/password.php)。

使用此功能的最简单方法是：

```
$hashToStoreInDb = password_hash($password, PASSWORD_BCRYPT);
$isPasswordCorrect = password_verify($password, $existingHashFromDb); 
```

回答您的问题：我看不出它不起作用的明显原因，通常问题是数据库字段太短。在您的情况下，您需要放置一个添加了 10 个字符的盐的二进制 SHA1，即 base64_encoded（难以预测必要的大小）。将来自 SHA1（空字节）的二进制字符串与普通字符串组合起来也很危险。

# cuda - Windows 上理想的 CUDA 环境是

> ID：15056867
> 
> 赞同：0
> 
> 时间：2013-02-24T21:27:56.440
> 
> 标签：cuda

考虑到 Visual Studio 2012 的支持很少，CUDA 开发的理想 Windows 环境是什么？我已经设置了 VS2012 来制作新项目，但是结合 VS2010 CUDA 项目和其他插件（也几乎没有 VS2012 的支持），CUDA 编程似乎很痛苦。

现在，我认为完全支持 NSight 插件的 Visual Studio 2010 是最好的选择。是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:45:37.500

目前你能做的最好的就是带有 Nsight 3.0 和 CUDA 5.0 Toolkit 的 Visual Studio 2010 Professional。

# compilation - ^ 在 flex 中的含义

> ID：15056868
> 
> 赞同：1
> 
> 时间：2013-02-24T21:28:18.823
> 
> 标签：compilation, compiler-construction, flex-lexer, lexical-analysis

我有一个关于 flex 的问题。在我的笔记中，在一个示例代码片段中，它说明了以下内容：

```
[^ \t\n]+ printf("saw a word\n"); 
```

我不明白那个代码是什么意思，以及它与一个词的对应关系。它看起来像是`\t`我们看到空白`\n`时的意思，看到换行符时的意思，但`^`开头的意思是什么，究竟是什么`[^ \t\n]+`意思？如果有人可以解释，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:31:44.487

`[]`是一个字符组，匹配其中指定的所有字符。`^`在那种情况下会反转整个事情，并且字符组匹配**除**指定字符之外的所有内容。所以在这种情况下，它匹配除空格、制表符或换行符之外的所有内容。

# file-io - mmap寻求行而不是字节偏移？

> ID：15056872
> 
> 赞同：3
> 
> 时间：2013-02-24T21:28:32.813
> 
> 标签：file-io, line, mmap

我正在玩`mmap`打开大文件。假设文件的第一行是观察计数。每个观察跨越 2 行：

```
Observation ID \n
Variable length number of integers 
```

我正在对这些进行一些计算并想使用`multiprocessing`. 是否可以使用`seek()`寻找一行而不是字节偏移量？
显然，使用`open`文件中的方法很容易做到这一点，但是，由于我正在玩`mmap`，我想知道在这种情况下是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:48:28.500

文件是字节流，而不是行。如果您需要随机访问文件中特定行的开头，则无法先验地知道您会在文件中找到它的偏移量。无论您是通过`mmap()`、`pread()`、`seek()`或任何其他方法进行随机访问，这都是正确的。

解决这个问题的唯一方法是在行号和字节偏移之间建立一个映射。这通常意味着您必须按顺序扫描整个文件一次。

根据您的具体需要，其他方法可能适用。例如，如果大致达到目标行号就足够了，并且您知道文件中行的平均长度，也许您可​​以寻找所需的行号乘以平均行长，并使用您找到的任何行在那个位置。或者，如果您观察到的 ID 都是按数字顺序排列的，您可以使用字节偏移对文件进行二进制搜索，直到找到所需的行。

# javascript - 如果浏览器不支持 History API，Ember 路由是否会退回到使用哈希？

> ID：15056877
> 
> 赞同：8
> 
> 时间：2013-02-24T21:29:37.820
> 
> 标签：javascript, ember.js, router, history.js, html5-history

Ember 文档[指出](http://emberjs.com/guides/routing/specifying-the-location-api/)，它可以设置为使用 History API 进行路由，而不是使用基于哈希的片段：

```
App.Router.reopen({
  location: 'history'
}); 
```

但是我没有提到如果浏览器不支持 History API 会发生什么。它会回退到使用像 History.js 这样的哈希吗？

如果没有，我是否应该检查历史 API 支持并将历史实现切换为哈希（如果不支持）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T16:19:53.237

ember 源中似乎没有任何 History API 支持检测。

因此，如果您设置`location`为`history`并且没有支持，您的路由可能会失败。

如果您打算支持旧浏览器，最安全的选择就像您说的那样：

```
if (window.history && window.history.pushState) {
    App.Router.reopen({
      location: 'history'
    });
} 
```

## 2014 年 1 月 23 日更新

如果您在金丝雀中`location:'auto'`启用功能，您现在可以使用。`ember-routing-auto-location`

# rest - REST 与 JSON-RPC？

> ID：15056878
> 
> 赞同：275
> 
> 时间：2013-02-24T21:29:40.780
> 
> 标签：rest, rpc, json-rpc

我正在尝试在 REST 和 JSON-RPC 之间进行选择，以便为 Web 应用程序开发 API。他们如何比较？

> 2015 年更新：我发现 REST 更容易开发和用于在 Web/HTTP 上提供服务的 API，因为 API 可以利用客户端和服务器都理解的现有且成熟的 HTTP 协议。例如，API 可以使用响应代码、标头、查询、帖子正文、缓存和许多其他功能，而无需任何额外的工作或设置。

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2013-02-27T15:58:30.210

RPC 的根本问题是耦合。RPC 客户端以多种方式与服务实现紧密耦合，并且在不破坏客户端的情况下更改服务实现变得非常困难：

*   客户需要知道程序名称；
*   程序参数顺序、类型和计数很重要。在不破坏客户端实现的情况下，在服务器端更改过程签名（参数数量、参数顺序、参数类型等）并不容易；
*   RPC 风格只公开过程端点 + 过程参数。客户无法确定下一步可以做什么。

另一方面，在 REST 风格中，通过在表示（HTTP 标头 + 表示）中包含控制信息来引导客户端非常容易。例如：

*   嵌入带有链接关系类型注释的链接是可能的（实际上是强制性的），这些链接关系类型传达了这些 URI 的含义；
*   客户端实现不需要依赖特定的过程名称和参数。相反，客户端依赖于消息格式。这为使用特定媒体格式（例如 Atom、HTML、Collection+JSON、HAL 等）的已实现库提供了可能性
*   可以轻松更改 URI 而不会破坏客户端，因为它们仅依赖于注册的（或特定于域的）链接关系；
*   可以在表示中嵌入类似表单的结构，如果最终用户是人类，客户可以将这些描述公开为 UI 功能；
*   支持缓存是额外的优势；
*   标准化状态码；

REST 方面还有很多不同和优势。

* * *

## 回答 #2

> 赞同：171
> 
> 时间：2013-12-17T20:27:30.483

我已经详细探讨了这个问题，并认为纯 REST 限制太多，而 RPC 是最好的，即使我的大多数应用程序都是 CRUD 应用程序。如果您坚持使用 REST，您最终会摸不着头脑，想知道如何轻松地将另一个需要的方法添加到您的 API 中以用于某些特殊目的。在许多情况下，使用 REST 做到这一点的唯一方法是为其创建另一个控制器，这可能会使您的程序过度复杂化。

如果您决定使用 RPC，唯一的区别是您将动词显式指定为 URI 的一部分，这样清晰、一致、错误更少，而且真的没有麻烦。特别是如果您创建的应用程序超出了简单的 CRUD，那么 RPC 是唯一的方法。我对 RESTful 纯粹主义者有另一个问题：HTTP POST、GET、PUT、DELETE 在 HTTP 中具有明确的含义，这些含义已被 REST 颠覆为其他含义，仅仅是因为它们适合大多数时间——但不是所有时间。

在编程中，我很久以前就发现试图用一件事来表示两件事会在某个时候出现并咬你。我喜欢对几乎所有操作都使用 POST 的能力，因为它提供了按照您的方法需要发送和接收数据的自由。你不能把整个世界都融入 CRUD。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-03-04T10:52:55.190

首先，HTTP-REST 是一种“具象状态转移”架构。这意味着很多有趣的事情：

*   您的 API 将是无状态的，因此更容易设计（在复杂的自动机中很容易忘记转换），并与独立的软件部件集成。
*   您将被引导设计为*安全*的读取方法，这将易于缓存和集成。
*   您将被引导将写入方法设计为*幂等*方法，这将更好地处理超时。

其次，HTTP-REST 完全兼容 HTTP（参见上一部分中的“安全”和“幂等”），因此您将能够重用 HTTP 库（存在于每种现有语言中）和 HTTP 反向代理，这将为您提供使用零行代码实现高级功能（缓存、身份验证、压缩、重定向、重写、日志记录等）的能力。

最后但同样重要的是，根据 HTTP 1.1 的设计者（以及 REST 的发明者）的说法，使用 HTTP 作为 RPC 协议是一个巨大的错误：http: [//www.ics.uci.edu/~fielding/pubs/dissertation/evaluation。 htm#sec_6_5_2](http://www.ics.uci.edu/~fielding/pubs/dissertation/evaluation.htm#sec_6_5_2)

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2015-02-01T07:47:09.907

很好的答案 - 只是想澄清一些评论。JSON-RPC 快速且易于使用，但如前所述，资源和参数是紧密耦合的，它往往依赖于使用 GET/POST 的动词（api/deleteUser、api/addUser），而 REST 提供松散耦合的资源（api/用户）在 HTTP REST API 中依赖于几种 HTTP 方法（GET、POST、PUT、PATCH、DELETE）。对于没有经验的开发人员来说，REST 实现起来稍微困难一些，但这种风格现在已经变得相当普遍，并且从长远来看它提供了更多的灵活性（让你的 API 寿命更长）。

除了没有紧密耦合的资源外，REST 还允许您避免提交给单一的内容类型——这意味着如果您的客户端需要接收 XML、JSON 甚至 YAML 格式的数据——如果内置到您的系统中，您可以返回任何使用 content-type/ 接受标头的内容。

这使您可以保持 API 足够灵活，以支持新的内容类型或客户端要求。

但真正将 REST 与 JSON-RPC 区分开来的是它遵循一系列经过深思熟虑的约束——确保架构的灵活性。这些约束包括确保客户端和服务器能够相互独立发展（您可以进行更改而不会弄乱客户端的应用程序），调用是无状态的（状态通过超媒体表示），为交互提供统一的接口， API 是在分层系统上开发的，响应可由客户端缓存。还有一个用于按需提供代码的可选约束。

然而，尽管如此 - 大多数 API 不是 RESTful（根据 Fielding），因为它们不包含超媒体（响应中嵌入的超文本链接有助于导航 API）。您会发现大多数 API 都类似于 REST，因为它们遵循 REST 的大部分概念，但忽略了这个约束。然而，越来越多的 API 正在实现这一点，并且它越来越成为一种主流实践。

这也为您提供了一些灵活性，因为超媒体驱动的 API（例如 Stormpath）将客户端定向到 URI（这意味着如果发生变化，在*某些*情况下您可以修改 URI 而不会产生负面影响），而 RPC URI 则需要静止的。使用 RPC，您还需要广泛记录这些不同的 URI，并解释它们如何相互关联。

一般来说，如果你想构建一个可扩展的、灵活的、长期存在的 API，我会说 REST 是要走的路。出于这个原因，我会说这是 99% 的时间要走的路线。

祝你好运，迈克

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2016-01-21T23:30:23.330

IMO，关键是行动与资源导向。REST 是面向资源的，非常适合 CRUD 操作，并且鉴于其已知的语义为第一个用户提供了一些可预测性，但是当从方法或过程实现时，会迫使您为以资源为中心的世界提供人工翻译。另一方面，RPC 非常适合面向操作的 API，您可以在其中公开服务，而不是可进行 CRUD 的资源集。

毫无疑问，REST 更受欢迎，如果您想将 API 公开给第三方，这肯定会增加一些要点。

如果不是（例如在 SPA 中创建 AJAX 前端），我的选择是 RPC。特别是 JSON-RPC，结合 JSON Schema 作为描述语言，并根据用例通过 HTTP 或 Websockets 传输。

[JSON-RPC](http://www.jsonrpc.org/specification)是一个简单而优雅的规范，它定义了要在同步或异步 RPC 中使用的请求和响应 JSON 有效负载。

[JSON Schema](http://json-schema.org/latest/json-schema-core.html)是定义基于 JSON 的格式的规范草案，旨在描述 JSON 数据。通过使用 JSON Schema 描述您的服务输入和输出消息，您可以在不影响可用性的情况下使消息结构具有任意复杂性，并且可以自动化服务集成。

传输协议（HTTP 与 websockets）的选择取决于不同的因素，最重要的是您是否需要 HTTP 功能（缓存、重新验证、安全、幂等性、内容类型、多部分......）或者您的应用程序是否需要交换高频率的消息。

到目前为止，这在很大程度上是我对这个问题的个人看法，但现在对于那些阅读这些行的 Java 开发人员来说真的很有帮助，我去年一直在研究的框架，源于你现在想知道的同一个问题：

**[http://rpc.brutusin.org](http://rpc.brutusin.org)**

你可以在这里看到一个现场演示，展示了用于功能测试的内置存储库浏览器（感谢 JSON Schema）和一系列示例服务：

[http://demo.rpc.brutusin.org](http://demo.rpc.brutusin.org)

希望对小伙伴有帮助！

纳乔

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2017-10-17T14:36:57.340

根据[Richardson 成熟度模型](https://martinfowler.com/articles/richardsonMaturityModel.html)，问题不是*REST 与 RPC*，而是*多少 REST*？

在这个视图中，对 REST 标准的合规性可以分为 4 个级别。

*   0 级：根据动作和参数进行思考。正如文章所解释的，**这本质上等同于 JSON-RPC**（文章针对 XML-RPC 进行了解释，但两者的论点相同）。
*   第一级：从资源的角度思考。与资源相关的所有内容都属于同一个 URL
*   级别 2：使用 HTTP 动词
*   3级：仇恨

根据 REST 标准的创建者，只有 3 级服务才能称为 RESTful。然而，这是一个*合规性*指标，而不是质量指标。如果您只想调用一个远程函数来进行计算，那么在响应中包含相关的超媒体链接可能没有意义，也没有基于所使用的 HTTP 动词的行为差异化。因此，这样的调用本质上倾向于更像 RPC。但是，较低的合规级别并不一定意味着有状态或更高的耦合。可能，您应该尽可能多地使用REST ，而不是考虑*REST 与 RPC ，但不要更多。*不要为了符合 RESTful 合规标准而扭曲您的应用程序。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2015-01-29T12:08:09.797

如果您的服务仅适用于模型和 GET/POST/PUT/DELETE 模式，请使用纯 REST。

我同意 HTTP 最初是为无状态应用程序设计的。

但是对于现代的、更复杂的（！）实时（Web）应用程序，你会想要使用 Websockets（这通常意味着有状态），为什么不同时使用呢？基于 Websockets 的 JSON-RPC 非常轻量，因此您有以下好处：

*   每个客户端的即时更新（定义您自己的服务器到客户端 RPC 调用以更新模型）
*   易于增加复杂性（尝试仅使用 REST 制作 Etherpad 克隆）
*   如果你做得对（添加 RPC 仅作为实时的额外功能），大多数仍然可以仅使用 REST（除非主要功能是聊天或其他功能）

由于您只是在设计服务器端 API，请从定义 REST 模型开始，然后根据需要添加 JSON-RPC 支持，将 RPC 调用的数量保持在最低限度。

（抱歉括号过度使用）

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2016-06-14T22:25:06.607

我过去一直是 REST 的忠实粉丝，它在纸面上比 RPC 有很多优势。您可以向客户端显示不同的内容类型、缓存、重用 HTTP 状态代码，您可以通过 API 引导客户端，并且如果无论如何大部分都不是自我解释的，您可以在 API 中嵌入文档。

但我的经验是，在实践中这并不能成立，相反，你需要做很多不必要的工作才能让一切都做好。此外，HTTP 状态代码通常不会准确地映射到您的域逻辑，并且在您的上下文中使用它们通常感觉有点强迫。但在我看来，REST 最糟糕的事情是您花费大量时间来设计您的资源以及它们允许的交互。每当您对 API 进行一些重大添加时，您都希望找到一个好的解决方案来添加新功能，并且您没有将自己设计到一个角落。

这对我来说常常是浪费时间，因为大多数时候我已经对如何将 API 建模为一组远程过程调用有一个非常好的和明显的想法。如果我已经通过所有这些努力在 REST 的约束中对我的问题进行建模，那么下一个问题是如何从客户端调用它？我们的程序基于调用过程，因此构建一个好的 RPC 客户端库很容易，构建一个好的 REST 客户端库并不多，在大多数情况下，您只需从服务器上的 REST API 映射回客户端中的一组过程图书馆。

正因为如此，今天的 RPC 对我来说更简单、更自然。但我真正怀念的是一个一致的框架，它使编写自描述和可互操作的 RPC 服务变得容易。因此，我创建了自己的项目来尝试使 RPC 对自己更容易的新方法，也许其他人也觉得它很有用：[https ://github.com/aheck/reflectrpc](https://github.com/aheck/reflectrpc)

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2017-06-12T12:39:36.313

**为什么选择 JSON RPC：**

对于 REST API，我们必须为我们可能需要的每个功能/方法定义一个控制器。因此，如果我们希望客户端可以访问 10 个方法，我们必须编写 10 个控制器来将客户端的请求与特定方法接口。

另一个因素是，即使我们为每种方法/功能使用不同的控制器，客户端也必须记住使用 POST 还是 GET。这使事情进一步复杂化。最重要的是要发送数据，如果使用 POST，则必须设置请求的内容类型。

在 JSON RPC 的情况下，事情会大大简化，因为大多数 JSONRPC 服务器都在 POST HTTP 方法上运行，并且内容类型始终是 application/json。这减轻了记住在客户端使用正确的 HTTP 方法和内容设置的负担。

不必为服务器想要向客户端公开的不同方法/功能创建单独的控制器。

**为什么选择 REST：**

对于服务器想要向客户端公开的不同功能，您有单独的 URL。因此，您可以嵌入这些 url。

这些观点中的大多数都是值得商榷的，完全取决于一个人的需要。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-10-13T07:26:57.050

我认为，一如既往，这取决于...

REST 具有广泛的公众支持的巨大优势，这意味着大量的工具和书籍。如果您需要创建一个可供来自不同组织的大量消费者使用的 API，那么只有一个原因：它很受欢迎。作为一个协议，它当然是完全失败的，因为有太多完全不同的方式将命令映射到 URL/动词/响应。

因此，当您编写需要与后端对话的单页 Web 应用程序时，我认为 REST 太复杂了。在这种情况下，您不必担心长期兼容性，因为应用程序和 API 可以一起发展。

我曾经为单页 Web 应用程序使用 REST，但 Web 应用程序和服务器之间的细粒度命令很快让我发疯。我应该将其编码为路径参数吗？在身体里？查询参数？一个标题？在 URL/Verb/Response 设计之后，我不得不用 Javascript 编写这个混乱的代码，用 Java 编写解码器，然后调用实际的方法。尽管有很多工具可以做到这一点，但在您的域代码中不获取任何 HTTP 语义确实很棘手，这确实是一种不好的做法。（凝聚）

尝试为中等复杂的站点制作 Swagger/OpenAPI 文件，并将其与描述该文件中远程过程的单个 Java 接口进行比较。复杂性的增加是惊人的。

因此，对于单页 webapp，我从 REST 切换到 JSON-RPC。我开发了一个小型库，在服务器上对 Java 接口进行编码并将其发送到浏览器。在浏览器中，这为应用程序代码创建了一个代理，该代理为每个函数返回了一个 Promise。

同样，REST 之所以有它的位置，只是因为它很有名，因此得到了很好的支持。认识底层的无状态资源哲学和分层模型也很重要。但是，这些原则可以很容易地用于 RPC 模型。JSON RPC 在 HTTP 上工作，因此它在这方面具有与 REST 相同的优势。不同之处在于，当您不可避免地遇到无法很好地映射到这些原则的这些功能时，您不会被迫做很多不必要的工作。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-06-15T10:14:47.757

最好在 REST 和 JSON-RPC 之间选择 JSON-RPC 来开发更易于理解的 Web 应用程序 API。JSON-RPC 是首选，因为它与方法调用和通信的映射很容易理解。

选择最合适的方法取决于约束或主要目标。例如，就性能是一个主要特征而言，建议使用 JSON-RPC（例如，高性能计算）。但是，如果主要目标是不可知论，以便提供通用接口以供其他人推断，则建议使用 REST。如果您需要同时实现这两个目标，建议同时包含这两个协议。

实际上将 REST 从 JSON-RPC 中分离出来的事实是，它遵循了一系列经过深思熟虑的约束——确认了架构的灵活性。约束包括确保客户端和服务器能够相互独立增长（可以进行更改而不会弄乱客户端的应用程序），调用是无状态的（状态被视为超媒体），统一的接口是为交互提供的，API 在分层系统上是先进的（Hall，2010）。JSON-RPC 快速且易于使用，但是如前所述，资源和参数是紧密耦合的，它可能依赖于使用 GET/POST 的动词（api/addUser、api/deleteUser），而 REST 提供松散耦合的资源（api /users) 在 HTTP 中。REST API 依赖于几种 HTTP 方法，例如 GET、PUT、POST、DELETE、PATCH。

JSON（表示为 JavaScript Object Notation）是一种轻量级的数据交换格式，易于人类阅读和编写。机器可以轻松解析和生成。JSON 是一种完全独立于语言的文本格式，但实践的约定是由 C#、C、C++、Java、Perl、JavaScript、Python 等语言家族的程序员所熟悉的。这些属性使 JSON 成为一种完美的数据交换语言和更好的选择。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-05-25T20:52:28.397

REST 与 HTTP 紧密耦合，因此如果您只通过 HTTP 公开您的 API，那么 REST 更适合大多数（但不是全部）情况。但是，如果您需要通过消息传递或 Web 套接字等其他传输方式公开您的 API，则 REST 不适用。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-01-16T22:37:56.753

## 错误的问题：强加一个不存在的摩尼教！

您可以将 JSON-RPC 与“较少动词”（无*方法*）一起使用，并保留 sendo id、参数、*错误*代码和*警告*消息所需的最小标准化。JSON-RPC 标准没有说“你不能是 REST”，只说如何打包基本信息。

**“REST JSON-RPC”存在**！是具有“最佳实践”的 REST，用于最少的信息打包，具有简单而可靠的合同。

* * *

## 例子

（从[这个答案](https://stackoverflow.com/a/9541567)和教学背景）

在处理 REST 时，通常从资源方面的思考开始会有所帮助。在这种情况下，资源不仅仅是“银行账户”，而是该银行账户的交易......但 JSON-RPC 没有强制“方法”参数，所有这些都由端点的“路径”编码。

*   带有JSON 请求的REST*存款*。JSON 响应可以是`POST /Bank/Account/John/Transaction``{"jsonrpc": "2.0", "id": 12, "params": {"currency":"USD","amount":10}}`
    `{"jsonrpc": "2.0", "result": "sucess", "id": 12}`

*   REST *Withdraw* with `POST /Bank/Account/John/Transaction`... 类似。

*   ... `GET /Bank/Account/John/Transaction/12345@13`... 这可能会返回该确切交易的 JSON 记录（例如，您的用户通常希望在他们的帐户上记录借记和贷记）。像`{"jsonrpc": "2.0", "result": {"debits":[...],"credits":[...]}, "id": 13}`. 关于 (REST) GET 请求的约定可以包括通过“@id”对 id 进行编码，因此不需要发送任何 JSON，但仍然在响应包中使用 JSON-RPC。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-07-20T06:54:14.623

如果您请求资源，那么 RESTful API 在设计上会更好。如果你请求一些复杂的数据，除了简单的 CRUD 之外，还有很多参数和复杂的方法，那么 RPC 是正确的选择。

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2016-10-30T16:22:28.127

我将 vdata 用于 RPC 协议：http: [//vdata.dekuan.org/](http://vdata.dekuan.org/)

1、PHP和JavaScript都可以。2、跨域资源共享（CORS）调用还是可以的。

# java - CriteriaBuilder 和多重连接条件

> ID：15056881
> 
> 赞同：1
> 
> 时间：2013-02-24T21:30:29.873
> 
> 标签：java, mysql

是否有可能在 ON 子句中添加更多连接条件？例如：

```
select * from table t left join second_table st ON t.id = st.id_second AND st.something = 2; 
```

我的代码是：

```
CriteriaBuilder builder = em.getCriteriaBuilder();
Order o;
CriteriaQuery<Documentation> select = builder.createQuery(Documentation.class);
Root<Documentation> u = select.from(Documentation.class);
Join<Documentation, DocumentationUser> dul = u.join("documentationUserCollection", JoinType.LEFT); 
```

# c# - 启动和暂停线程？

> ID：15056885
> 
> 赞同：0
> 
> 时间：2013-02-24T21:31:35.307
> 
> 标签：c#, multithreading, winforms, events, button

我需要使用线程来暂停/恢复弹丸运动。如果在`button3_Click`屏幕上绘制弹丸运动：

```
public void button3_Click(object sender, EventArgs e)
{
//... Lots of drawingcode...
} 
```

我需要使用相同的方法暂停/恢复弹丸运动，`button3_Click`但我是线程新手，无法弄清楚如何。

我努力了：

```
 public partial class Simulation : Form
{
            Thread parallel1;
            Thread parallel2;

            public Simulation()
            {
                InitializeComponent();
                parallel1 = new Thread(new ThreadStart(button3_Click));
            }
} 
```

但我得到一个错误...

```
No overload for 'button3_Click' matches delegate 'System.Threading.ThreadStart' 
```

我认为我需要两个线程，以便当一个暂停时，另一个正在运行以获取`button3_Click`并恢复另一个线程。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:37:25.220

那是关于方法签名的。在 c# 中，方法的参数和名称是唯一的。所以这个错误告诉你没有任何方法可以调用没有任何参数。您可以使用

```
new Thread( new ParameterizedThreadStart(... 
```

您可以发送您的参数。Sender 通常是您的按钮，您可以为 EventArgs 参数发送“new EventArgs()”。

但是最好的方法（我使用它）不要在按钮单击中编写任何复杂的代码。用不同的方法编写复杂的代码，然后在按钮单击下调用它。通常操作不止一次使用，因此您可以从任何地方调用您的方法而无需任何更改。写一个新的方法来进行你的操作。如果您的方法中需要任何参数，您可以使用 parameterizedThreadStart 调用它。请注意：如果您遇到任何类似这样的错误，一个或多个线程访问一个对象，您可以在线程启动之前设置此属性

> `CheckForIllegalThreadStart=false;`

# python - Django SQLite 在测试时尝试覆盖 DB

> ID：15056891
> 
> 赞同：1
> 
> 时间：2013-02-24T21:32:36.537
> 
> 标签：python, django

我在 Django 的测试套件中遇到了一个奇怪的问题，我被卡住了，所以我正在寻找一些关于如何修复它或至少在哪里寻找的见解。

当我运行以下命令来测试我的 teddybears 应用程序时：

```
python manage.py test teddybears 
```

我收到此错误：

```
...django/db/backends/sqlite3/base.py", line 344, in execute
return Database.Cursor.execute(self, query, params)
django.db.utils.DatabaseError: table "teddybears_teddybear" already exists 
```

默认情况下，数据库不应该以“test”一词为前缀以避免名称冲突吗？我将数据库重命名为“：memory：”以尽量避免这种情况，但仍然是同样的错误。

开发工作正常，一切都按预期运行，我只是无法让测试套件工作。任何对可能导致此问题的原因或在哪里查看的见解将不胜感激。

我正在使用 SQLite 进行本地开发工作并使用 Django 1.4.3

这是完整的堆栈跟踪：

```
> python manage.py test teadybears
Creating test database for alias 'default'...
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/core/management/commands/test.py", line 49, in run_from_argv
    super(Command, self).run_from_argv(argv)
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/core/management/commands/test.py", line 72, in handle
    failures = test_runner.run_tests(test_labels)
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/test/simple.py", line 381, in run_tests
    old_config = self.setup_databases()
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/test/simple.py", line 317, in setup_databases
    self.verbosity, autoclobber=not self.interactive)
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/db/backends/creation.py", line 271, in create_test_db
    load_initial_data=False)
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 150, in call_command
    return klass.execute(*args, **defaults)
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 102, in handle_noargs
    cursor.execute(statement)
  File "/Work/projects/teadybears/venv/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py", line 344, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.DatabaseError: table "teadybears_teadybear" already exists 
```

* * *

回复：

这是我的数据库设置：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'database.sqlite',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

我确实有这个，但它没有任何区别：

```
if 'test' in sys.argv:
    DATABASES['default']['NAME'] = ':memory:' 
```

* * *

2 X 咕噜……

不幸的是没有解决这个问题。除了更改数据库名称外，我已经尝试了所有建议的方法，但这也没有解决它。

我做了所有的建议，包括：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'database.sqlite',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
        'TEST_NAME': 'mud',
    }
} 
```

它现在问我：

```
python manage.py test teddybears
Creating test database for alias 'default'...
Destroying old test database 'default'...
Type 'yes' if you would like to try deleting the test database 'mud', or 'no' to cancel: 
```

仍然产生相同的错误。

不想将它移到另一个干净的项目来解决这个问题，但它仍然很烦人。

* * *

我已经弄清楚是什么绊倒了我。项目中的一个模型在 Meta Class 上设置了一个值，导致测试中断。

```
class TeddybearExtra(Teddybear):

    class Meta:
        db_table = 'teddybears_teddybear' 
```

如您所见，它是原始模型的子类，并且由于明确设置了“db_table”属性，它覆盖了自动生成的表名。这里学到的教训是，在 Meta 对象上设置 db_table 属性会导致测试工具发生坏事。仅当您绝对需要以这种方式处理时才这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T01:24:31.173

文档中有两个部分可能与您遇到的问题有关：

[https://docs.djangoproject.com/en/dev/topics/testing/overview/#the-test-database](https://docs.djangoproject.com/en/dev/topics/testing/overview/#the-test-database)

> 默认情况下，测试数据库通过将 test_ 添加到 DATABASES 中定义的数据库的 NAME 设置的值来获取它们的名称。当使用 SQLite 数据库引擎时，测试将默认使用内存数据库（即，数据库将在内存中创建，完全绕过文件系统！）。如果要使用不同的数据库名称，请在字典中为 DATABASES 中的任何给定数据库指定 TEST_NAME。

和..

> 如果您的测试依赖于数据库访问，例如创建或查询模型，请确保将您的测试类创建为 django.test.TestCase 的子类，而不是 unittest.TestCase。
> 
> 在上面的示例中，我们实例化了一些模型，但不将它们保存到数据库中。使用 unittest.TestCase 避免了在事务中运行每个测试并刷新数据库的成本，但是对于大多数应用程序，您能够以这种方式编写的测试范围将相当有限，因此使用 django.test.TestCase 是最简单的.

所以首先，确保你的测试是从`django.test.TestCase`. 其次，尝试设置`TEST_NAME`并`testdb.sqlite`查看是否可以解决您的问题。您可能还想在 中指定数据库的路径`/Work/database.sqlite`，否则（我认为）数据库将在您正在执行的目录中创建`manage.py`，而这可能并不总是您想要的。

最后，确保为测试加载正确的`settings`文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T22:43:36.543

您是否指向正确的设置模块？尝试：

```
python manage.py test teddybears --settings=myproject.settings.test 
```

# azure-storage - Windows Azure 表 REST Api 身份验证

> ID：15056894
> 
> 赞同：4
> 
> 时间：2013-02-24T21:32:50.557
> 
> 标签：azure-storage, azure-table-storage

尝试通过 REST Api 访问我的 Windows Azure 存储帐户时，我遇到了身份验证问题。

我已阅读以下资源以确定如何生成请求：

[http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx)

[http://convective.wordpress.com/2010/08/18/examples-of-the-windows-azure-storage-services-rest-api/](http://convective.wordpress.com/2010/08/18/examples-of-the-windows-azure-storage-services-rest-api/)

[Azure Blob 服务 REST API 返回 403 错误：“未指定请求日期标头”](https://stackoverflow.com/questions/9491825/azure-blob-service-rest-api-returns-403-error-request-date-header-not-specifie)

据我了解，请求中只有 4 个变量：确定服务端点的实际 URI，GMT 时间的当前日期主访问密钥帐户名称。

我的前两个来自 MSDN 资源，另外两个来自我的 Windows Azure 门户。

> ```
> GET http://<account_name>.table.core.windows.net/ HTTP/1.1
> x-ms-date: Sun, 24 Feb 2013 09:19:31 GMT
> x-ms-version: 2009-09-19
> Authorization: SharedKey <account_name>:<primary_key>
> Accept-Charset: UTF-8
> Accept: application/atom+xml,application/xml
> DataServiceVersion: 1.0;NetFx
> MaxDataServiceVersion: 1.0;NetFx
> Host: <account_name>.table.core.windows.net 
> ```

我检查以确保帐户名称和主键正确，并且根据另一篇帖子的建议，x-ms-date 时间戳在 15 分钟内。

我收到以下回复：

```
HTTP/1.1 403 Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.
Content-Length: 437
Content-Type: application/xml
Server: Microsoft-HTTPAPI/2.0
x-ms-request-id: d78c2c11-8699-4737-9592-82813eac356e
Date: Sun, 24 Feb 2013 21:20:03 GMT

<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <code>AuthenticationFailed</code>
  <message xml:lang="en-US">Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.
RequestId:d78c2c11-8699-4737-9592-82813eac356e
Time:2013-02-24T21:20:03.2036675Z</message>
</error> 
```

有关修复正确身份验证请求的任何建议？

此外，我能够下载 Azure 存储资源管理器实用程序并以这种方式访问​​该服务，因此我知道存储帐户有效且正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T08:24:45.440

经过一番搜索，我发现了以下文章：

1.  [http://msdn.microsoft.com/en-us/library/windowsazure/dd135720.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd135720.aspx)
2.  [http://blog.einbu.no/2009/08/authenticating-against-azure-table-storage/](http://blog.einbu.no/2009/08/authenticating-against-azure-table-storage/)

**基本结论是，对于这种类型的请求，必须使用 SharedKeyLite。**

在资源 #1 上它说：

> 表服务要求对每个请求进行身份验证。支持 Shared Key 和 Shared Key Lite 身份验证。共享密钥身份验证更安全，建议用于使用 REST API 对表服务发出的请求。**WCF 数据服务的 Microsoft .NET 客户端库仅支持 Shared Key Lite 身份验证。**

一个资源 #2 它解释了如何创建 ShareKeyLite，并在底部提到：

> 由于 SharedKey 比 SharedKeyLite 更健壮，这将是显而易见的选择。但是，我们仍然需要 SharedKeyLite 方案来访问 Development Table Storage，因为它是唯一接受的方案。（截至 Windows Azure SDK 的 7 月 CTP。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:24:33.330

我有同样的问题。我也下载了 Azure 存储资源管理器实用程序。我正在使用 Fiddler Web Debugger 查看从实用程序到 azure 的请求。请求是这样的：

```
GET http://mystorageaccount.table.core.windows.net/Tables() HTTP/1.1
User-Agent: Microsoft ADO.NET Data Services
DataServiceVersion: 1.0;NetFx
MaxDataServiceVersion: 2.0;NetFx
x-ms-version: 2009-09-19
x-ms-date: Tue, 26 Feb 2013 07:18:04 GMT
Authorization: SharedKeyLite mystorageaccount:mystorageaccountkey
Accept: application/atom+xml,application/xml
Accept-Charset: UTF-8
Host: mystorageaccount.table.core.windows.net 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T08:35:51.057

我在这里遇到同样的错误AuthenticationFailed。对于表服务，此错误未提供任何详细信息。只有通过反复试验并查看来自其他网络的代码片段并与我所拥有的进行差异 - 才是调试它的方法。

对于 blob 服务，我看到了提到的错误 - 服务器计算的 StringToSign（带值）和来自签名的 stringToSign，不匹配。这帮助我修复了计算身份验证标头的代码。

更多详细信息以及 rest api 中的错误代码，将始终对开发人员有所帮助。

回到问题上来，问题是需要 x-ms-date 标头而不是 'Date' 标头。因此，错误代码放错了位置。

对于 winjs windows 商店应用程序。工作代码看起来像这样：

```
var url = 'https://<storageaccount>.table.core.windows.net/<table name>()';
var date = new Date().toGMTString().replace('UTC', 'GMT');
var xhrOptions = {
    type: 'GET',
    url: url,
    headers: {
        // Date: date, // does not work and raises AuthenticationFailed error
        'x-ms-date' : date, // works
        'Content-Type': 'application/atom+xml',
        'x-ms-version': '2009-09-19',
        DataServiceVersion: '1.0;NetFx',
        MaxDataServiceVersion: '1.0;NetFx',
    },
};

xhrOptions.headers.Authorization = computeAuthorizationHeader(xhrOptions); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T20:48:27.297

授权字符串需要根据此规范进行签名[http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx)

特别是你的标题部分说

```
<primary_key> 
```

应该是类似的输出

```
Base64(HMAC_SHA256(UTF8("<primary_key>"),UTF8("VERB\n\n\nDATE\nRESOURCE"))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-30T04:22:56.170

您可以使用此处提到的解决方案。

访问 azure 表时要提及的一件事应该使用“共享密钥”，如果是“Blob”，则“使用 SharedKey Lite”

[http://social.msdn.microsoft.com/Forums/en-US/windowsazureconnectivity/thread/84415c36-9475-4af0-9f52-c534f5681432](http://social.msdn.microsoft.com/Forums/en-US/windowsazureconnectivity/thread/84415c36-9475-4af0-9f52-c534f5681432)

如果您在代理后面工作，请记住一件事，只需检查端口是否被阻止。如果某些端口被阻止，则 Windows azure 将没有响应。

# syntax - 为什么是“||” 或的符号？

> ID：15056896
> 
> 赞同：20
> 
> 时间：2013-02-24T21:33:00.347
> 
> 标签：syntax, operators, history, bitwise-or, logical-or

我知道这`||`代表逻辑运算“或”，但我很好奇是否有人知道选择该符号的历史。仅仅是因为它恰好是键盘上未使用的符号吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-24T22:03:52.777

## 单竖线“|”的起点 表示析取的“或”。

从[ASCII字符历史](http://www.cs.tut.fi/~jkorpela/latin1/ascii-hist.html#7C)：

> 据推测，垂直线字符被引入计算领域，是用用于描述编程语言的巴科斯-瑙尔形式元语言。它也于 1960 年代初在 APL 中使用，并与 OR 运算符几乎同时并入 PL/I，并且作为连接运算符加倍。

[John Warner Backus](http://en.wikipedia.org/wiki/John_Backus)（1924 年 12 月 3 日 - 2007 年 3 月 17 日）是美国计算机科学家。他领导的团队发明了第一个广泛使用的高级编程语言 (FORTRAN)，并且是巴科斯-瑙尔形式 (BNF) 的发明者，这是一种几乎普遍用于定义形式语言语法的符号。他还研究了函数级编程并帮助推广它。

作为 IBM 的一名编程语言设计师，他提出了“元语言公式”来描述新的编程语言 IAL（今天称为 ALGOL 58）的语法，使用 BNF 表示法。

在巴科斯-瑙尔形式中，表达式由符号序列和/或用“|”分隔的序列组成，表示一个选择，整个是左边符号的可能替换。

`<personal-name> ::= <name> | <initial>`

在 ALGOL 58 规范中，Backus 最初并没有使用垂直线；他使用了“或”这个词，上面有一条线（以及逻辑符号![或符号](../Images/0159efd986cc82cec9a2d24a3daa8c70.png)）。 [为 ALGOL 60 做出贡献的丹麦计算机科学家Peter Naur](http://en.wikipedia.org/wiki/Peter_Naur)将几个符号修改为可以在标准键盘上键入的符号。他的变化之一是增加了垂直线。（来源：“[编程语言史](http://books.google.com/books/about/History_of_programming_languages.html?id=F5JQAAAAMAAJ)”，Richard L. Wexelblat）

然而，即使*在*ALGOL 60 规范之后，仍有大量![或符号](../Images/0159efd986cc82cec9a2d24a3daa8c70.png)符号示例仍然与 ALGOL 一起使用。事实上，在 1961 年，ASCII 字符集添加了反斜杠，因此 ALGOL 的逻辑运算符可以用斜杠输入，如下所示： `\/ /\` 这些符号可以在 60 年代中期的 IBM 2741 键盘上找到：

![IBM 键盘](../Images/aba1db175e630bc0dc2ce2691d3d994e.png)

但有明确的证据表明，Naur 在 ALGOL 60 中添加了垂直线。在 1964 年发表的一篇文章中，（Knuth D.，“Backus Normal Form vs. Backus Naur Form”致编辑的信，ACM 通讯，第 7 卷（ 1964). pp. 735-736, 可[在此处](http://dl.acm.org/citation.cfm?id=365140)获得)，Donald Knuth 认为，由于 Naur 的贡献，“巴科斯范式”应称为“巴科斯瑙尔形式”。他提到的贡献之一是添加了垂直线作为或运算符。

这是 1964 年文章的一部分的图片。请注意右侧的项目符号 (iv)。

![在此处输入图像描述](../Images/49e8c29e0f0bf0695beb34bf59ab60e8.png)

文章继续描述 Naur 对语义变化负责，这是他对 1960 年 Algol 报告的编辑职责的一部分：

![在此处输入图像描述](../Images/acc4ec0e826eb6d60a3e0133013b805b.png)

## 双竖线“||”的起源

在[The Development of the C Language](http://cm.bell-labs.com/cm/cs/who/dmr/chist.html)中，Dennis M. Ritchie 描述了为什么要添加双竖线运算符：

> 语言被命名后继续快速变化，例如引入 && 和 || 运营商。在 BCPL 和 B 中，表达式的计算取决于上下文：在 if 和其他将表达式的值与零进行比较的条件语句中，这些语言对 and (&) 和 or (|) 运算符进行了特殊解释。在普通上下文中，它们按位操作，但在 B 语句中
> 
> 如果 (e1 & e2) ...
> 
> 编译器必须评估 e1，如果它不为零，则评估 e2，如果它也是非零，则详细说明依赖于 if 的语句。需求递归地下降到 & 和 | e1 和 e2 中的运算符。在这种“真值”上下文中，布尔运算符的短路语义似乎是可取的，但运算符的重载难以解释和使用。***在 Alan Snyder 的建议下，我引入了 && 和 || 运营商使机制更加明确***。

（感谢[Richard Brown](https://stackoverflow.com/a/15057011/1971309)对本节的研究）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T22:04:15.313

我相信是 BCPL [(wp)](https://en.wikipedia.org/wiki/BCPL)引入了它。它的前身 CPL 具有该符号`|`，但将其用作替代的 til-end-of-line 注释。

我没有发现任何证据表明*原因*曾经在任何地方写过，但我们可以考虑一下它是否是唯一的选择（这将是一个很好的理由）：

他们没有选择“或”这个词，因为**上下文无关语法** [（wp）](https://en.wikipedia.org/wiki/Context_free_grammar)的概念在语言设计中变得非常流行，所以他们选择了不能是有效符号的东西（符号被定义为 [a-zA-Z_ ]+[a-zA-Z0-9_]* 或*通常*带有“-” ）。

因此，他们查看了之前定义的标准中定义的所有字符。（请记住，字符**必须已经存在**于标准中，因此他们不能只决定和绘制自己的字符。）他们特别努力地查看了 3 岁的 ASCII 和 EBCDIC。他们发现没有太多选择：

*   除了字母、下划线、数字和空格外，还有：
*   NUL SOH STX ETX EOT ENQ ACK BEL BS TAB LF VT FF CR SO SI DLE DC1 DC2 DC3 DC4 NAK SYN ETB CAN EM SUB ESC FS GS RS US 这些都被用作终端控制字符（并且不可打印）。
*   "" ( ) { } [ ] 在语义上是不合适的，就像 & 一样（被用作 'and' 超过 100 年）
*   所有这些都使用了 ALGOL 和/或 CPL：！# $ % ' * + , - . / : ; < = > ? @\^_~
*   所以剩下的是`和| 但是不能使用反引号，因为即使在声称符合 ascii 的情况下也无法在任何地方使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T21:46:16.187

来自：[http ://cm.bell-labs.com/cm/cs/who/dmr/chist.html](http://cm.bell-labs.com/cm/cs/who/dmr/chist.html)

语言被命名后继续快速变化，例如引入 && 和 || 运营商。在 BCPL 和 B 中，表达式的计算取决于上下文：在 if 和其他将表达式的值与零进行比较的条件语句中，这些语言对 and (&) 和 or (|) 运算符进行了特殊解释。在普通上下文中，它们按位操作，但在 B 语句中

if (e1 & e2) ... 编译器必须评估 e1，如果它不为零，则评估 e2，如果它也非零，则根据 if 详细说明语句。需求递归地下降到 & 和 | e1 和 e2 中的运算符。在这种“真值”上下文中，布尔运算符的短路语义似乎是可取的，但运算符的重载难以解释和使用。**在 Alan Snyder 的建议下，我引入了 && 和 || 运算符使机制更加明确。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T22:10:41.070

| 最古老的用法 或者，我在谷歌搜索一段时间后可以找到[Backus Naur Form](http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form)。

这似乎最早出现在JW Backus 于 1959 年[在 Zuerich ACM-GRAMM 会议上提出的国际代数语言的语法和语义的](http://www.softwarepreservation.org/projects/ALGOL/paper/Backus-ICIP-1959.pdf)论文中，但是他没有使用 | 那里的符号。相反，他使用了一个带上划线的“或”。

然后在 1960 年，他撰写了[关于算法语言 ALGOL 60 的报告，该语言](http://www.springerlink.com/index/h1r203g1h262u114.pdf)已经使用了 |-符号。

所以他在 1959 年到 1960 年之间的某个地方发明了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T21:53:20.440

使用竖线表示“或”运算（|| 表示逻辑，或 | 表示按位）可能源于[BNF](http://en.wikipedia.org/wiki/Backus-Naur_form)。BNF 不是一种编程语言，但它是在 1950 年代后期开发的，作为一种为编程语言语法创建正式规范的方法。BNF 中的竖线字符表示在非终结符的有效扩展之间进行选择。60 年代及以后的编程语言设计者很可能熟悉这种表示法并受到它的影响。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-02-24T21:47:42.733

逻辑或 || 符号实际上来自 + 加号的拆分。水平条旋转了 90 度，因此是逻辑 OR || 的诞生。象征。您可能会或可能不会在互联网上找到此文档，因为它发生在很久以前。对于按位或 | , （你猜对了）横杆已从 + 加号中删除。

# c++ - strcat 替代问题 C++

> ID：15056905
> 
> 赞同：0
> 
> 时间：2013-02-24T21:33:57.280
> 
> 标签：c++, operators, strcat

我正在开发一个最初在 C 中采样但想在 C++ 中进行的项目。

有一个部分使用了 strcat()，有人告诉我使用替代方法。我在[这里](http://cs.stmarys.ca/~porter/csc/ref/c_cpp_strings.html "C 和 C++ 中的字符串")找到了一个，但是当我尝试这些时，编译器给了我以下错误：

> 错误：char*' 类型的无效操作数`char*' and`到二进制 `operator+'

有什么我做错了吗？

编辑：

这是代码中不起作用的部分

```
FILE *FileOpen(string *fname, string* mode){
FILE *fp;
string *str = "";

str += "tmp/"; //all files to be created in temporary sub directory
str += fname;
if((fp=fopen(str,mode))==NULL){
fprintf(stderr,"Cannot open file: %s\n", &fname);
exit(1);
}
FileReader(fname);
return(fp);
} 
```

编辑 2：对于那些想知道为什么我有 FileReader 的人：这是项目的第 2 部分。反汇编代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:38:04.520

你没有显示任何代码，但我怀疑你有这样的东西

```
char *s1 = "Hello, ", *s2 = "world!";
char buf[50];
strcpy(buf, s1);
strcat(buf, s2); 
```

现在你把它改成了

```
char *s1 = "Hello, ", *s2 = "world!";
char buf[50];
buf = s1 + s2; 
```

正如您已经注意到的那样，这不起作用。您还必须将 char 指针和 char 数组更改`std::string`为

```
std::string s1 = "Hello, ", s2 = "world!";
std::string buf = s1 + s2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:45:06.910

感谢您发布代码；现在问题很明显了。

您应该使用字符串对象，而不是指向它们的指针。

```
FILE *FileOpen(string fname, string mode)
{
    string str = "";

    str += "tmp/"; //all files to be created in temporary sub directory
    str += fname;
    FILE *fp = fopen(str.c_str(), mode.c_str());
    if (!fp) {
        fprintf(stderr, "Cannot open file: %s\n", fname.c_str());
        exit(1);
    }
    FileReader(fname);
    return fp;
} 
```

一个好的下一步是转向接受`std::string`参数的 I/O 函数，因此您不必`.c_str()`到处说。

我也很困惑为什么你有`FileReader(fname)`你的文件打开功能。这两次违反了单一职责原则。打开文件不应该导致它被读取，并且读取文件的代码应该使用 a`FILE*`并且不关心文件名是什么（除了可能生成错误消息）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T21:36:01.033

如果您的代码`char *`用作字符串，那么`strcat`可能是适合您的函数。当然，C++ 解决方案是`std::string`使用.`+``operator+``std::string`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T21:38:56.073

好吧，C++ 有一个字符串类`std::string`，它的 operator+ 执行连接。但是你必须先创建一个。

所以表达式`"abc" + "def"`不能编译，但`std::string("abc")+"def"`工作正常。

或者你可以写一些像

```
std::string s("abc");
s += "def"; 
```

相似地，

```
std::string s = "abc";
s += "def"; 
```

如果您想连接大量文本并关心性能，请考虑使用`std::ostringstream`.

# command-prompt - 禁用网络适配器时本地映射的驱动器号断开连接

> ID：15056906
> 
> 赞同：0
> 
> 时间：2013-02-24T21:33:59.403
> 
> 标签：command-prompt

这个精彩论坛中的第一个问题：我一直在使用地图网络驱动器作为本地文件夹链接，效果很好。如果我禁用我的网络适配器，驱动器将显示为已断开连接。有没有办法在任何与网络适配器相关的事件中保持这些连接？在这种情况下，CMD 和 windows shell 方法似乎都呈现相同的限制。

顺便说一句，感谢大家使这个宝贵的资源......

# math - 过滤掉 3D 网格中的内部点

> ID：15056907
> 
> 赞同：0
> 
> 时间：2013-02-24T21:34:09.810
> 
> 标签：math, 3d, mesh

我有一个程序，仅当所有顶点都在形状的表面上时才对 3D 形状进行分析。但是，我提供的数据内部有顶点，所以我需要一种方法来过滤掉它们。

数据以下列格式给出：

所有顶点的列表（即它们的坐标），每个顶点都有一个ID，因此可以识别它。

四面体列表，其中每个四面体由四个顶点定义（使用 ID）。

所以基本上每个四面体的一个面构成了表面的一部分，而四面体的其余部分构成了内部结构的一部分（这对我来说并不重要）。

查看渲染的形状可以明确地识别内部点，所以我假设内部点的某些属性可以用来过滤掉它们，但我想不出一个。

谁能想到一种方法来解决这个识别内部点的问题？

谢谢。

# sql-server - 检查表中是否存在数据，如果是，则执行此操作，否则执行此操作（数据确实存在），但只有其他部分在工作

> ID：15056909
> 
> 赞同：0
> 
> 时间：2013-02-24T21:34:13.637
> 
> 标签：sql-server

我有一个带有 uid、用户名和密码的表以及检查登录的过程

```
create procedure getlogin(@username varchar(50),@password varchar(20),@granted int output)
as 
begin 
    if exists (select top 1 uid 
               from user_detail 
               where username = @username and password = @password)
       set @granted=1
    else
       set @granted=-1
end 
```

但我总是得到-1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T20:45:15.567

你的代码对我来说似乎很好。这是一个关于如何调用和测试代码的示例：

```
create table user_detail
(   uid int primary key,
    username varchar(50),
    password varchar(20)
    )
go
insert user_detail values(1,'a','b')
go
create procedure getlogin(@username varchar(50),@password varchar(20),@granted int output)
as 
begin 
    if exists (select top 1 uid 
               from user_detail 
               where username = @username and password = @password)
       set @granted=1
    else
       set @granted=-1
end
go
declare @granted int
exec getlogin 'a','a', @granted output
select @granted
exec getlogin 'a','b', @granted output
select @granted 
```

顺便说一句，您可能想使用 HASHBYTES 函数加密您的密码。您可以在联机丛书中阅读更多相关信息。

# android - 有没有办法通过代码模拟Android设备中的屏幕点击？

> ID：15056910
> 
> 赞同：4
> 
> 时间：2013-02-24T21:34:17.637
> 
> 标签：android, onclick

我想创建一个应用程序，它获取设备屏幕的坐标并模拟在该点上的手指点击。有没有办法通过代码来做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T04:31:38.720

检查[monkeyrunner](http://developer.android.com/tools/help/monkeyrunner_concepts.html)

您可以使用 monkeyrunner api 在 Android 设备上远程执行触摸事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T21:39:13.593

如果这对您有好处，您可以在特定视图上调用 onClick。

```
View v;// or any of your view that extends View(ImageView, TextView etc...)
v.performClick();//API 1 //you can use this with longClick aswell
v.callOnClick();//API 15
//see documentation for these methods 
```

# emacs - 让 emacs grep 缓冲区使用特定的 emacs 缓冲区来显示命中

> ID：15056912
> 
> 赞同：1
> 
> 时间：2013-02-24T21:34:33.613
> 
> 标签：emacs

对不起标题，很难用一个班轮来解释这个问题。但这是我正在谈论的用例：

我在 emacs 中打开了 4 个缓冲区，每个缓冲区显示一些文件和一些位置。然后我执行 grep-find 并将 grep 输出放入其中一个缓冲区。然后我点击 grep 缓冲区中的命中，每次点击，emacs 使用不同的缓冲区来显示命中。如果我打开了超过 4 个缓冲区，emacs 会确保按顺序使用所有这些缓冲区来显示命中。这对我来说真的没用，因为所有这些缓冲区都在某个位置包含我的源文件，我想保留这些缓冲区。

如果单击 grep 输出中的命中将在特定缓冲区中打开并且仅在特定缓冲区中打开，例如 grep 缓冲区之后的下一个缓冲区，这将更加有用。这样，我可以安排在 grep 缓冲区可用后保留下一个缓冲区，并在那里显示所有 grep 结果。并且所有其他缓冲区将继续在我想要的位置显示我的源文件......

那么，这可以通过一些 elisp 魔法来完成，还是我必须改变使用 emacs 的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:22:21.103

您可能更喜欢使用`next-error`and `previous-error`（绑定到`M-g``M-n`and `M-g``M-p`）在单个窗口中循环点击。

# sum - 如何使用 sum() 将值与逗号相加

> ID：15056913
> 
> 赞同：1
> 
> 时间：2013-02-24T21:34:47.037
> 
> 标签：sum, xslt-1.0

我有以下 XML 文档：

```
<nodes>
    <node>  
        <type>A</type>  
        <val>1,000</val>  
    </node>  
    <node>  
        <type>B</type>  
        <val>2,000</val>  
    </node>  
    <node>  
        <type>A</type>  
        <val>3,000</val>  
    </node>  
</nodes> 
```

我的目标是获取唯一类型的列表并将它们的所有`<val>`s 相加。我得到以下输出：

```
<nodes>  
    <node>  
        <type>A</type>  
        <sum>3</sum>  
    </node>  
    <node>  
        <type>B</type>  
        <sum>2</sum>  
    </node>  
</nodes> 
```

我期待的总和（对于 A 型）为 4000，但我得到的是 3。

这是我的 xslt：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">  
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>  
    <xsl:key name="type" match="/nodes/node/type/text()" use="." />
    <xsl:template match="/">
        <nodes>
            <xsl:for-each select="/nodes/node/type/text()[generate-id()=generate-id(key('type',.)[1])]">
                <node>
                    <xsl:variable name="t" select="."/>
                    <type><xsl:value-of select="$t"/></type>
                    <sum>
                       <xsl:value-of select="sum(/nodes/node[type=$t]/val)"/>
                    </sum>
                </node>
            </xsl:for-each>
        </nodes>
    </xsl:template>
</xsl:stylesheet> 
```

关于如何使用 sum() 将值与逗号相加的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:59:22.780

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:key name="kType" match="type" use="."/>

 <xsl:variable name="vrtfPass1">
  <xsl:apply-templates select="/*"/>
 </xsl:variable>

 <xsl:variable name="vPass1" select="ext:node-set($vrtfPass1)"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/">
  <xsl:apply-templates mode="pass2" select=
   "$vPass1/*/*/type[generate-id()=generate-id(key('kType',.)[1])]"/>
 </xsl:template>

 <xsl:template match="val/text()[true()]">
  <xsl:value-of select="translate(., translate(.,'01234567890', ''), '')"/>
 </xsl:template>

 <xsl:template match="type" mode="pass2">
  <type><xsl:value-of select="."/></type>
  <sum><xsl:value-of select="sum(key('kType',.)/../val)"/></sum>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<nodes>
    <node>
        <type>A</type>
        <val>1,000</val>
    </node>
    <node>
        <type>B</type>
        <val>2,000</val>
    </node>
    <node>
        <type>A</type>
        <val>3,000</val>
    </node>
</nodes> 
```

**产生想要的正确结果：**

```
<type>A</type>
<sum>4000</sum>
<type>B</type>
<sum>2000</sum> 
```

# codeigniter - Code igniter - 在 Dev 和 Prod 服务器之间切换的 URL

> ID：15056915
> 
> 赞同：0
> 
> 时间：2013-02-24T21:34:57.780
> 
> 标签：codeigniter

我正在一台服务器上进行开发，而在另一台服务器上进行生产。

对所有链接和图像使用 site_url() 函数是否有意义？这对我来说似乎有点过分......

有没有更好的方法可以减少开销？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:04:00.693

在您的配置目录中创建两个文件夹，一个称为“开发”，一个称为“生产”，然后在每个文件夹中放置一个`config.php`文件，其中包含每个环境的唯一信息。然后，每当您将代码推送到生产环境时，只需确保在您的`index.php`

之后 CI 将为您处理所有更改。是的，使用`site_url()`.

**过早的优化是万恶之源**

这也是一个很好的[资源](http://heybigname.com/2009/11/23/managing-assets-with-codeigniter/)。

您可能还想查看用于处理资产的[Caribiner 库。](https://github.com/aeris2k/Carabiner)

# jquery - jQuery 图像转换器干扰下拉导航？

> ID：15056918
> 
> 赞同：-1
> 
> 时间：2013-02-24T21:35:40.897
> 
> 标签：jquery, css

Nav 被推到图像转换器后面。我试过溢出：隐藏在几个 div 上，但没有解决。我一直在阅读，z-index 已经解决了其他类似的问题，但不确定在哪里实施。有任何想法吗？谢谢！

[http://burnslawpa.com/](http://burnslawpa.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:59:30.937

z-index 适用于定位元素。

尝试将此添加到您的#navbar

```
z-index: 10000;
position: relative; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:05:43.483

查看您当前的样式表添加以下内容：

```
#navbar li ul {
  position:relative;
  z-index:999999;
} 
```

注意：`z-index`只能用于`positioned`元素。因此`position:relative`

# python - 将函数分配为对象的属性，然后在没有隐含的“自我”争论的情况下调用？

> ID：15056922
> 
> 赞同：5
> 
> 时间：2013-02-24T21:36:04.690
> 
> 标签：python

Python允许您将预定义的函数作为属性分配给类，例如

```
def fish_slap(fish):
    # do something

class dance(object):
    dance_move=fish_slap 
```

但是，如果我们尝试说

```
d=dance()
d.dance_move("Halibut") 
```

我们得到以下错误

```
TypeError: fish_slap() takes exactly 1 arguement (2 given) 
```

Python 似乎将其视为一种对象方法并提供隐含的“自我”参数。很公平，似乎我刚刚了解到以这种方式将函数分配为属性等同于直接在类中定义函数。我可以看到这是一个有用的功能。

但是，在这种情况下，这不是我想要的。在我的应用程序中，我将统计模型编码为不同的类，这些类也有自己的“训练”方法，用于根据提供的数据训练模型参数。为了做到这一点，需要提供一个您希望最小化（或最大化）值的目标函数。一个简单的目标函数的例子是

```
def RMSE(predicted,observed):
    "Root mean squared error"
    return sp.sqrt(sp.mean((predicted-observed)**2)) 
```

其中 SciPy 已作为 sp 导入。这些目标函数在单个 .py 文件中定义并在我的代码中使用，并且自然地作为独立函数存在，而不是作为具有隐含“self”参数的类方法存在。

我希望能够将所需的目标函数设置为属性，以便模型对象所做的任何后续工作都使用该函数，例如

```
some_model=SomeModel(initial_parameter_values_guess) 
some_model.objective_function = RMSE
some_model.train(training_data)
predictions_RMSE = some_model.predict()
some_mode.objective_function = MAE
predictions_MAE = some_model.predict() 
```

在这个例子中，我似乎可以将目标函数作为参数传递给训练，但是在我的应用程序中还有很多人想做的事情，而且能够设置/获取目标函数似乎更有意义而不是反复提供它作为论据。

有许多变通方法可以实现这种基本行为，但最简单的方法是什么？

请注意，我当前的代码是 python2 和 python3 兼容的。如果有特定于版本的解决方案，请指出。我正在使用 python2 运行以便能够使用 matplotlib 但是我试图确保代码与该模块之外的 python3 兼容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T21:37:10.613

您可以使用[静态方法](http://docs.python.org/2/library/functions.html#staticmethod)

```
class dance(object):
    dance_move=staticmethod(fish_slap) 
```

`staticmethod`请注意，如果您分配给*实例*的属性，则不需要使用：

```
>>> def move():
...     print "disco party!"
... 
>>> class dance(object):
...     dance_move = staticmethod(move)
... 
>>> d = dance()
>>> d.dance_move()
disco party!
>>> d.break_it_down = move
>>> d.break_it_down()
disco party! 
```

# c++ - 新砖障碍

> ID：15056926
> 
> 赞同：0
> 
> 时间：2013-02-24T21:36:28.977
> 
> 标签：c++

你有 n 块砖在桌子上排成一行。他们每个人上都只有一个字母。你的任务是重新排列这些砖块，以便它们上面的字母创建一些指定的铭文。在重新排列时，您只能交换具有指定字母的相邻砖块（给定 m 对 (a1,b1),...,(am,bm) 并且您只能在其中一个上交换带有 ai 和 bi 的砖块第二，对于某些 i=1,..,m)。您应该检查是否有可能实现这一点 - 如果是的话 - 计算最少需要的交换次数。

输入

输入的第一行有一个整数 c。然后是c个测试用例：每行包含两行长度不超过100000的小写字母（a..z）（开始和结束配置的说明），下一行是一个整数m，然后是m行两个字母ai,bi 在他们每个人中。

输出

对于每个测试用例，如果无法重新排列砖块，则应打印 -1，如果可能，则应打印最少的交换次数（如果可以，则输出此值以 232 为模）。

```
 Input:
  4
  ab
 ba
 0
 abc
 cba
 3
 ab
 cb
 ca
 cabbbc
 cbabbc
 1
 ab
 abba
 baab
 1
 ab

 Output:
-1
 3
 1
 2 
```

我不明白这个问题任何人都可以帮助我理解测试用例不需要指导我给出提示和算法只是解释我这个问题，thanx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:58:24.710

你有 4 个测试用例。

```
Case 1:
start config: `ab`
end config:   `ba`
allowed adjacent swaps: none
result: -1 - without any allowed swap, you can't get from `ab` to `ba`

Case 2:
start config: `abc`
end config: `cba`
allowed adjacent swaps: `(ab)`,`(cb)`,`(ca)`
result: 3
example solution: `abc -> (cb)@(1,2) -> acb -> (ca)@(0,1) -> cab -> (ab)@(1,2) -> cba`

Case 3:
start config: `cabbbc`
end config: `cbabbc`
allowed adjacent swaps: `(ab)`
result: 3
example solution: `cabbbc -> (ab)@(1,2) -> cabbbc`

Case 4:
start config: `abba`
end config: `baab`
allowed adjacent swaps: `(ab)`
result: 2
example solution: `abba -> (ab)@(2,3) -> abab -> (ab)@(0,1) -> baab` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:54:21.630

让我解释一下测试用例（按重新排列的顺序）

```
ab
ba
0 
```

您不能从“ab”到“ba”，因为不允许交换 => 输出`-1`

```
cabbbc
cbabbc
1
ab 
```

您可以交换相邻`a`的`b`，并且，只需在第二个和第三个字符上执行一次。=> 输出`1`

```
abba
baab
1
ab 
```

同样在这里，前两个和后两个，进行两次交换 => 输出`2`

```
abc
cba
3
ab
cb
ca 
```

您不能直接交换`a`，`c`因为它们不相邻。相反，交换`a`并`b`获取`bac`. 然后，交换`a`并`c`获取`bca`. 最后，交换`b`并`c`获取`cba`=> 输出`3`

如果你可以把“ab”换成“ba”，你也可以把“ba”换成“ab”。这在任务描述中并不明显，但示例测试用例清楚地说明了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T21:49:15.080

```
4 - 4 testcases
(now two lines which were said, they define strings to swap one into another)
ab
ba
0 - zero strings which define bricks

Now, you can't rearrange nothing, because you have no strigns. return -1.

Now the secons testcase:
(two lines which define strings to trasform one into another)
abc
cba
3 - three bricks
ab
cb
ca
And above we ahve three bricks. So we can, to my understanding, swap these bricks letters, so swap a with b, c with b, and c with a, so basically all possible swaps are allowed).

Third testcase - analogical to the second, but you're only allowed to swap "a" with "b".
cabbbc
cbabbc
1
ab

And so on...

abba
baab
1
ab 
```

这就是我对任务的理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T21:51:29.073

测试用例是一个开始和结束位置（两行字符），后跟一个数字。该数字描述了有多少可能的转换。然后是可能的过渡。因此，在您的示例中，第一个测试用例是“当没有可以交换的字母时，从 ab 到 ba 需要多少步？” （答案 -1 是“不可能”的答案。）第二个测试用例是“如果可以交换 ab、cb 或 ca，从 abc 到 cba 需要多少步？” 答案是 3。第三个测试用例是“如果可以交换 ab，从 cabbbc 到 cbabbc 需要多少步？” 等等

# javascript - 需要解决方案的 JavaScript 故障（可能也很简单）

> ID：15056929
> 
> 赞同：0
> 
> 时间：2013-02-24T21:36:54.610
> 
> 标签：javascript, jquery

我目前有一个 JavaScript 应用于两个图像。视频可以在这里看到：[http](http://www.youtube.com/watch?v=DYc8swGK5Lw) ://www.youtube.com/watch?v= DYc8swGK5Lw 我在视频中悬停的第一张图片表现正常，但是第二张没有。第二张图片似乎在悬停后立即应用边缘顶部，而不是像第一张那样过渡。这会导致浏览器在恢复稳定性之前感到困惑和鼠标悬停一两次。两张图片都应用了 gallery_left 类，但视频中悬停的第一张图片应用了 left4 ID。视频中悬停的第二张图片应用了 left7 ID。最后，这是代码。

```
$(function() {
var margin_top;
$('img.gallery_left').mouseover(function(){
    if($(this).attr('id') == "left4") {
        margin_top = '105px';
    } else {
        $(this).css('marginTop');
    }
    if($(this).attr('id') == "left7") {
        margin_top = '353px';
    } else {
        $(this).css('marginTop');
    }

    $(this).animate({
        borderWidth: '10px',
        width: '750px',
        height: '500px',
        marginLeft: '1px',
        zIndex: '15',
        marginTop: margin_top,
    }, 
    'default');
});

$('img.gallery_left').mouseout(function(){
    if($(this).attr('id') == "left4") {
        margin_top = '261px';
    } else {
        $(this).css('marginTop');
    }
    if($(this).attr('id') == "left7") {
        margin_top = '511px';
    } else {
        $(this).css('marginTop');
    }

    $(this).animate({
        borderWidth: '4px',
        width: '300px',
        height: '200px',
        marginLeft: '1px',
        zIndex: '0',
        marginTop: margin_top,
    }, 
    'default');
});
}); 
```

我还必须将代码应用于所有其他图片，但对于初学者来说，我只是对这两张图片执行此操作。请帮助我并尝试确定此代码的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:51:18.953

这一行：

```
 $(this).css('marginTop'); 
```

什么也没做。你的意思可能是这样的：

```
if(this.id == "left4") {
    margin_top = '261px';
} else if ( this.id == "left7") {
    margin_top = '511px';
} else {
    margin_top = $(this).css('marginTop');
} 
```

这样您就可以存储 css 属性。此外，您只需要一个 if/else 系列，因此您不会用第二个系列覆盖`if`第一个系列的`else`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:52:11.977

也许问题出在 if 中：我认为它应该类似于

```
if($(this).attr('id') == "left4") {
    margin_top = '105px';
} else if($(this).attr('id') == "left7") {
    margin_top = '353px';
} else {
    margin_top = $(this).css('marginTop');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:48:07.793

对于第一张图片，您实际上根本没有更改`margin-top`（在您的代码中没有任何地方更改`margin-top`带有 ID 的图片`left1`）。正如@Dennis 指出的那样，`$(this).css('marginTop');`什么都不做。所以实际上你的`margin-top`代码是有问题的，不仅仅是第二张图片 - 只是你实际上并没有改变第一张图片的任何东西，使它看起来正常工作（我猜你希望第一张图片有一个`margin-top`零？）。

我认为问题可能是您将 'default' 作为第二个参数传递给`$.animate`. 我查看了文档`$.animate`，我没有看到任何地方提到的“默认”作为该参数（`duration`参数）的有效选项。相反，请尝试将其设置为`fast`、`slow`或某个数值。

# asp.net-mvc - extjs 4.1 远程网格排序和 MVC 过滤

> ID：15056932
> 
> 赞同：2
> 
> 时间：2013-02-24T21:37:27.683
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, extjs, extjs4

我需要在我的网格中添加排序和过滤。网格是选项卡面板的一部分。我可以在 Firebug 中看到调用控制器的以下参数：

```
_dc 1361741346485
limit   200
page    2
sort    [{"property":"IsLate","direction":"ASC"}]
start   200 
```

我需要向控制器方法添加哪些参数才能接受来自请求的排序参数？我想我需要序列化它。我试图创建一个具有属性和方向的排序对象，但是当我调试时，接收到的参数的属性和方向为空。我需要遵循命名约定吗？我很困惑。谢谢你。

这是我的代码：
**LateGrid.js**

```
 Ext.define('FICMTB.ui.LateModel', {
       extend: 'Ext.data.Model',
       fields: [
    { name: 'Id' },      
    { name: 'IsLate' },      
    { name: 'Comments' },  
    { name: 'Description' }],
    idProperty: 'Id'
 });

 Ext.define("FICMTB.ui.LateGrid", {
     extend: "Ext.grid.Panel",
     requires: [
        'FICMTB.ui.LateModel',
        'Ext.ux.grid.FiltersFeature'
        ],

initComponent: function () {
    var me = this;

    me.columns = me.buildColumns();
    me.filters = {
        ftype: 'filters',
        encode: false, // json encode the filter query
        filters: [{
            options: ['YES', 'NO'],
            dataIndex: 'IsLate'
        }]
    };
    me.features = [me.filters];
    me.store = Ext.create('Ext.data.Store', {
        model: 'FICMTB.ui.LateModel',
        remoteSort: true,
        storeId: 'LateStoreId',
        autoLoad: true,
        buffered: true,
        autoSync: true,

        pageSize: 200,
        proxy: {
            type: 'rest',
            timeout: 600000,

            url: '/Late/Transactions/',
            reader: {
                type: 'json',
                root: 'transactions',
                totalProperty: "Total"
            },
            writer: {
                type: 'json',
                root: 'transactions'
            }
        }
    });

    me.selModel = new Ext.selection.RowModel({
        singleSelect: true
    });

    me.autoSizeColumns = true;

    me.autoScroll = true;
    me.forcefit = true;

    me.callParent(arguments);
},

buildColumns: function () {
    var me = this;

    return [
    { text: 'Id', dataIndex: 'Id', hidden: true, hideable: false },
    { text: 'Is Late' dataIndex: 'IsLate', sortable: true, width: 50, filter:true},      
    { text: 'Comments', dataIndex: 'Comments', width: 250, sortable: true },
    { text: 'Description', dataIndex: 'Description', width: 250, sortable: true }];
  },
  height: 600,
  width: 'auto'
}); 
```

**后期控制器.cs**

```
[AcceptVerbs(HttpVerbs.Get)]
[ActionName("LateTransactions")]
public ActionResult GetLateTransactions(string page, string start, string limit, xxxxxx sorting, yyyyy filtering)
{
    // what should xxxxx and yyyyy be? how should I name the sorting and filtering parameters?
    //            returns json 
} 
```

编辑：我尝试使用 Sorting 对象，但它是 null

```
// Sorting 
// NOT Simple Sort: 
// Request:  index?sort=[{"property":"email","direction":"DESC"}, {"property":"last_name","direction":"ASC"}, ...] 
public class Sorting 
{ 
    public string property { set; get; } 
    public string direction { set; get; } 
}

[AcceptVerbs(HttpVerbs.Get)]
[ActionName("LateTransactions")]
public ActionResult GetLateTransactions(string page, string start, string limit, Sorting sort, yyyyy filtering)
{
    ....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:02:38.167

对于排序，我实际上得到了一个 json 字符串。我必须将过滤器的编码设置为 true，因此传递给我的控制器方法的过滤器参数是一个 json 字符串：

```
 me.filters = {
       ftype: 'filters',
       **encode: true, // json encode the filter query**
       filters: [{
           options: ['YES', 'NO'],
           dataIndex: 'IsLate'
       }]
   }; 
```

我正在使用具有 DeserializeObject 方法的 Newtonsoft 库 - 它采用 json 字符串并将其转换为对象。所以，为了过滤，我的对象是这样的：

```
 public class Filtering
   {
       public string type { get; set; }
       public string value { get; set; }
       public string field { get; set; }
   } 
```

在我的控制器中：

```
 [AcceptVerbs(HttpVerbs.Get)]
    [ActionName("LateTransactions")]
    public ActionResult GetLateTransactions(string page, string start, string limit,    Sorting sort, Filtering filter)
    {
    // get all the filters
        List<Filtering> deserzdFilter = JsonConvert.DeserializeObject<List<Filtering>>(filter);
        ....
//            returns json(model);
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:56:21.087

我对 MVC3 一点也不熟悉，但你需要做的是：

*   正确映射参数（您可能会通过对该方法使用字符串排序参数来做到这一点）并确保您将排序值作为 JSON 字符串。
*   然后您需要将 JSON 字符串反序列化为对象（我认为这会有所帮助：http: [//msdn.microsoft.com/en-us/library/bb412179.aspx](http://msdn.microsoft.com/en-us/library/bb412179.aspx)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:34:12.213

我也不知道 MVC3，但是我已经成功地将 .Net WCF 与 Extjs 一起使用。例如...

```
[OperationBehavior(Impersonation = ImpersonationOption.Allowed)]
   [WebInvoke(Method = "GET")]
   public Stream getEvent_list(string TableName, string WhereParams,string page, string start, string limit, string sort)
   {
       string sorting = "date desc";

       if (WhereParams == null) WhereParams = "";
       if (sort != null)
       {
           sorting = getSorting(sort);  // parse the sorting json parameter
       }

blah blah....

       string sql = "select * from mytable order by " + sorting;
        /// return json as streamn

  }

 //  -------------------- getSorting ------------------------------------------------
// Parse the passed sorting JSON object into a string for SQL query.
// for example sort= [{property:'dr'},{order:'desc'},{property:'doi'},{order:'asc'},]
// gets converted to 'dr desc, dor asc' (SQL friendly format).

   private string getSorting(string sort)
   {
       string sorting = "";

       string[] pairs = sort.Split(',');

       for ( int i=0; i< pairs.Length; i +=2 )
       {
           string[] pair = pairs[i].Split(':');
           string[] ord = pairs[i+1].Split(':');

           if (sorting.Length > 0)
           {
               sorting += ",";
           }
           // get rid of all extra json characters.
           sorting += pair[1].Trim(' ', '{', '}', '[', ']', '\\', '\"', '"') + " " + ord[1].Trim(' ', '{', '}', '[', ']', '\\', '\"', '"');
       }

       return sorting;
   } 
```

# c++ - 程序崩溃顺序排序程序

> ID：15056935
> 
> 赞同：-1
> 
> 时间：2013-02-24T21:37:49.057
> 
> 标签：c++, crash

完成修复错误后，我运行程序并崩溃。尝试修复程序一段时间但不能。程序是关于序列和排序的。编译器是 devcpp。似乎不是堆栈溢出。:)

```
#include <iostream>
#include <cstdlib>
#include <ctime>
#include <iomanip> 
#include <conio.h>

using namespace std;

void selectionSort(int *, int);

int main()
{
    int N;
    int a[ N ];

    cout << "\n Enter the length of sequence:";
    cin >> N;

    for (int i = 0; i < N && i < 5; ++i)
    {
        a[ N ] = rand() % 1000000 + 0;
        srand(time(0));
        cout << "Random sequence";
        for (int i = 0; i < N; i++)
            cout << setw(4) << a[i];
        cout << endl;
    }

    cout << "Sorted sequence";
    selectionSort(a, N);
    for (int j = 0; j < N; j++)
        cout << setw(4) << a[j];
    cout << endl;
    getch();
}

void selectionSort(int *array, int N)
{
    int temp, i, j;
    for (i = 0; i < N - 1; i++)
    {
        j = i;
        while (j > 0 && array [j - 1] > array [j])
        {
            temp = array [j];
            array[j] = array [j - 1];
            j--;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:42:38.800

您正在定义一个可变`N`大小的数组。使用这个 insted：

```
int *a = new int[N];
// ...
delete [] a; 
```

第二个问题是`a[N] = ...`访问不存在的元素。

此外，最好放在`srand(time(0));`代码的开头，而不是循环。

```
int main()
{
    srand(time(0));

    int N;
    cout << "\n Enter the length of sequence:";
    cin >> N;

    int *a = new int[N]; // If you compiler support you can: int a[N];

    for (int i = 0; i < N; ++i)
    {
        a[ i ] = rand() % 1000 + 0;
    }

    cout << "Random sequence";
    for (int j = 0; j < N; j++)
        cout << setw(4) << a[j];
    cout << endl;

    cout << "Sorted sequence";
    selectionSort(a, N);
    for (int j = 0; j < N; j++)
        cout << setw(4) << a[j];
    cout << endl;
    getch();

    delete [] a; // If you use pointer version
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T21:43:10.023

您正在尝试访问不属于您的内存。

```
 int N;
 int a[ N ]; 
```

您正在声明 N 然后用它定义您的数组，但在那个时间点它还没有被初始化。然后，当您尝试写入内存中的位置时，它会出现故障。

# ruby-on-rails - 仅当模型具有某些属性集时才启用操作

> ID：15056940
> 
> 赞同：0
> 
> 时间：2013-02-24T21:38:02.290
> 
> 标签：ruby-on-rails

我正在使用 Rails 3.2.11。如果未设置模型中的某个属性，我想禁用一个操作（显示）。现在我直接在行动中处理这个问题：

```
def show
    @model = Model.find(params[:id])
    if !@model.attribute
        raise ActionController::RoutingError.new('Something bad happened')
    end
end 
```

这是可以接受的还是有更好的方法来处理这种情况？我希望行为与用户尝试访问不存在的记录时相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:39:24.583

我更喜欢在**before_filter**中使用该逻辑，因此您的显示操作将是干净的：

```
before_filter :check_attribute

...

def show
  # you can use straight @model here

end
...

private

def check_attribute
  @model = Model.find(params[:id])
  if !@model.attribute
    raise ActionController::RoutingError.new('Something bad happened')
  end
end 
```

通过这种方式，您也可以将其用于其他操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T21:43:49.167

是的，这是可以接受的。我会亲自将有条件的写成单行。

```
raise ActionController::RoutingError.new('Something bad happened') unless @model.attribute? 
```

`:not_found`处理响应的替代方法的一个很好的资源是[这个问题](https://stackoverflow.com/questions/2385799/how-to-redirect-to-a-404-in-rails)。

# php - Doctrine ODM 返回基类的代理对象而不是子类文档

> ID：15056946
> 
> 赞同：1
> 
> 时间：2013-02-24T21:38:57.633
> 
> 标签：php, mongodb, doctrine, doctrine-odm, odm

在为我的项目提供新功能的工作中，我决定扩展模型。我决定使用基类，将常用方法分组，只有很少的子类，都保存在一个集合中。

基类，抽象类：

```
/**
* @MongoDB\Document(repositoryClass="EntryRepository")
* @MongoDB\MappedSuperclass
* @MongoDB\InheritanceType("SINGLE_COLLECTION")
* @MongoDB\DiscriminatorField(fieldName="type")
* @MongoDB\DiscriminatorMap({"entry"="Application_Model_Entry", "image"="Application_Model_Image", "movie"="Application_Model_Movie"})
*/
abstract class Application_Model_Entry
{
    abstract function foo();
} 
```

一些具体的类（我还有一些类似的，但有些是抽象的）：

```
<?php
/** @MongoDB\Document */
class Application_Model_Image extends Application_Model_Entry
{
    function foo()
    {
        return 'foo';
    }
} 
```

在那次转换之后，我打开了我的索引页面，并出现了一个错误 - PHP 试图调用一个抽象方法，因为 Doctrine 返回的对象是**基**类的代理。我以为是因为我将集合从 to 重命名，**而**`Application_Model_Image`内部对象`Application_Model_Entry`引用（`$ref`字段 of `DBRef`）仍然指向- 在我从数据库中删除第一个对象后，第二个对象变得很好。`Application_Model_Image`

 **在一个显示单个对象的页面上，对于所有对象，一切正常，所以我认为这可能是 Zend Framework 的寻呼机类迭代结果的原因，所以我跳过了寻呼机并直接从查询中转储了对象。我打印了 100 个第一个结果的类，其中一些具有适当的类（[pastebin 上该列表的片段](http://pastebin.com/PePjnwPq)）。我查看了数据库，但我发现数据没有什么特别之处（[工作](http://pastebin.com/2gy4nqdd)与[不工作](http://pastebin.com/TT0g3zx1)）。我认为引用可能有问题，但正如我在上面所写的，如果同一个对象在结果列表中首先出现，它可能会起作用。

有什么想法或提示吗？我可以调试更多，但我需要被告知在哪里查看 Doctrine 的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T19:52:52.543

根据上面 jmikola 的评论，我删除了`Document`注释，一切都开始顺利进行。奇怪的结果让我在错误的地方寻找错误，但幸运的是我在这里得到了提示。

为后代：

*   `Document`注释用于具体类
*   `MappedSuperclass`注释用于抽象类
*   如果您在查询结果中收到代理类对象，则可能您在该部门有混淆
*   `Document`即使没有注释，您也可以指示鉴别器字段/值。**

# javascript - 在 Cloud Foundry node.js 上运行子进程

> ID：15056947
> 
> 赞同：1
> 
> 时间：2013-02-24T21:39:01.497
> 
> 标签：javascript, node.js, cloud-foundry, phantomjs, child-process

有没有人尝试在**Cloud Foundry 的 node.js**上运行子进程？

我有以下代码在本地运行良好：

```
var port = (process.env.VMC_APP_PORT || 3000),
    host = (process.env.VCAP_APP_HOST || 'localhost'),
    http = require('http');

 var childProcess = require('child_process'),
         phantom = require('phantomjs'),
     ls;

 http.createServer(function(req, res) {

    ls = childProcess.exec('phantomjs -h', function (error, stdout, stderr) {
    if (error) {
     console.log(error.stack);
     console.log('Error code: '+error.code);
     console.log('Signal received: '+error.signal);
    }
    console.log('Child Process STDOUT: '+stdout);
    console.log('Child Process STDERR: '+stderr);
    });

    ls.on('exit', function (code) {
        console.log('Child process exited with exit code '+code);
      res.writeHead(200, {'Content-Type': 'text/plain'});
      res.write('Working...');
      res.end();
    });

 }).listen(port, host); 
```

但是`vmc push`在**cloudfoundry.com**上，它给了我错误`vmc logs`

```
Reading logs/stdout.log... OK
Child process exited with exit code 127
Error: Command failed: /bin/sh: phantomjs: not found

    at ChildProcess.exithandler (child_process.js:536:15)
    at ChildProcess.EventEmitter.emit (events.js:91:17)
    at maybeClose (child_process.js:634:16)
    at Socket.ChildProcess.spawn.stdin (child_process.js:805:11)
    at Socket.EventEmitter.emit (events.js:88:17)
    at Socket._destroy.destroyed (net.js:358:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9)
Error code: 127
Signal received: null
Child Process STDOUT:
Child Process STDERR: /bin/sh: phantomjs: not found

Child process exited with exit code 127
Error: Command failed: /bin/sh: phantomjs: not found

    at ChildProcess.exithandler (child_process.js:536:15)
    at ChildProcess.EventEmitter.emit (events.js:91:17)
    at maybeClose (child_process.js:634:16)
    at Socket.ChildProcess.spawn.stdin (child_process.js:805:11)
    at Socket.EventEmitter.emit (events.js:88:17)
    at Socket._destroy.destroyed (net.js:358:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9)
Error code: 127
Signal received: null
Child Process STDOUT:
Child Process STDERR: /bin/sh: phantomjs: not found 
```

然后我还在`package.json`下面添加了文件，仍然是同样的错误：

```
{
  "name" : "mytestchildprocesses",
  "version" : "0.1.0",
  "dependencies" : {
    "phantomjs" : "1.8.1-3",
    "child_process" : "0.x.x",
    "http" : "0.0.0"
  }
} 
```

或者，我尝试了其他人将 phantomjs 放在 node.js 上：[https](https://github.com/sgentle/phantomjs-node) ://github.com/sgentle/phantomjs-node 。但是这个选项甚至在我的本地机器上都不起作用（在 Windows 中不能调用 phantomjs.cmd）。

如果你们可以提供帮助，我宁愿想办法在 cloudfoundry.com 中执行子进程。

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:23:22.223

看起来 Phantom.js 需要一个名为“phamtom”的二进制文件。我建议看一下 node-fibers 包 - [https://github.com/laverdet/node-fibers](https://github.com/laverdet/node-fibers)。该库不依赖任何本机二进制文件，应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T15:17:17.720

确保 'phantomjs' 作为依赖项列在你的 package.json 中（不要与 'phantom' 包混淆）。

从那里您可以使用以下代码段获取幻像可执行文件的二进制路径。phantomjs 包确保 phantom 包安装在系统上。这也适用于云代工。

```
var phantomjs = require('phantomjs')
var binPath = phantomjs.path
ls = childProcess.exec(binPath + ' -h' //.etc etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T23:20:26.127

所以我只是在本地尝试了您的代码并遇到了问题。

有了这个 package.json npm install 给了我一个关于 npm repo 中不存在的 child_process 的错误。删除该行可以使 npm install 完成。

然后我收到有关 phantomjs 无法在路径上执行的错误。

如果我全局安装 phantomjs，当我点击 localhost:3000 时，我会在节点控制台上看到有关 phantomjs 参数不正确的错误

我对上传到 Cloud Foundry 的问题并不感到惊讶，因为它肯定需要一个有效的 package.json 来启用相关节点模块的远程安装，如果它依赖于全局安装，它也会有问题。

# soap - tomcat 在 jasper ws 响应中找不到附件

> ID：15056955
> 
> 赞同：1
> 
> 时间：2013-02-24T21:39:47.840
> 
> 标签：soap, tomcat6, jasperserver, tcpmon

我在连接到远程托管的 jasperserver（都托管的 tomcat）的 Web 应用程序时遇到问题，其中 SOAP 响应没有被 Web 应用程序识别为“附件不存在！”。

我尝试用 tcpmon 隔离问题，以下是我的观察结果

1.) Jasperserver 以正确的 Jasperprint 内容类型响应（存在附件的八位字节流） - 我发现很少有答案提到 jasperserver 的附件大小存在一些限制，并且 jasperserver 中的附件文件夹存在权限问题。但在这种情况下，这似乎不是问题。

2.）在客户端运行的 tcpmon 中正确接收到 SOAP 响应。所以我想我可以安全地排除网络上任何与内容类型相关的问题。

但是，似乎即使响应正确到达客户端 tomcat，tomcat 或应用程序在识别附件方面也存在问题。

我还没有对 jasperserver、ireport 客户端或轴库进行任何更新或更改。

如果有人能指出下一步要检查的地方以及任何可能的根本原因，我将不胜感激。

# zend-framework - Ubuntu：“DocumentRoot 不退出”

> ID：15056956
> 
> 赞同：-1
> 
> 时间：2013-02-24T21:39:47.990
> 
> 标签：zend-framework, apache2, ubuntu-12.04

那是我的代码：

```
NameVirtualHost *:80
<VirtualHost *:80>
    DocumentRoot var\www\public
    ServerName my_ip
</VirtualHost>

<Directory "/var/www/public">
   Options FollowSymLinks
   AllowOverride All
</Directory> 
```

但是有错误：

> [Mon Feb 25 01:38:54 2013] [warn] NameVirtualHost *:80 has no VirtualHosts ... waiting 警告：DocumentRoot [/etc/apache2/var\www\public] 不存在 apache2：无法可靠地确定服务器的完全限定域名，使用“my_ip”作为 ServerName
> 
> [Mon Feb 25 01:38:55 2013] [warn] NameVirtualHost *:80 has no VirtualHosts

为什么 DocumentRoot 搜索`/etc/apache2/var\`，正如我所写`var\www\public`

这解决了我的问题：`/var/www/public`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:43:22.943

Ubuntu 不使用反斜杠`\`作为路径分隔符，它使用`/`. 由于它不理解路径分隔符，因此它将路径作为相对路径`/etc/apache/var`而不是绝对路径。

改为`/var/www/public`用作文档根目录。

# php - 在无向图中找到多达 n 级的路径？

> ID：15056962
> 
> 赞同：0
> 
> 时间：2013-02-24T21:40:53.560
> 
> 标签：php, arrays, graph, graph-algorithm, tree-traversal

我创建了一个有 6 个顶点的无向图，在视觉上表示如下：http: [//i.imgur.com/EtQyspG.png](http://i.imgur.com/EtQyspG.png)

我想编写一个脚本，它可以从起点找到所有路径，而无需重新访问同一个节点，也没有给定的终点。

我看过的 BFS、DFS、A* 算法的每个示例都需要一个最终目标节点。但是，在较大的图表上，找到从 A 点到 Z 点的所有可能路径可能是 NP 困难的。因此，我想找到在设定的移动次数内可实现的所有目的地的所有路径（在此图例如 -- 3 次移动 == 路径中的 4 个最大顶点）

我使用 PHP 数组对图形进行了编码，每个键都是一个顶点，其数组包含相邻点：

```
<?php

$graph[1] = array(2,6);
$graph[2] = array(1,4);
$graph[3] = array(4,5);
$graph[4] = array(2,3,6);
$graph[5] = array(6,3);
$graph[6] = array(1,5,4); 
```

不过，我不知道以这种方式执行路径搜索的算法。我想要的输出是这样的：

```
Path 1: 1,2
Path 2: 1,2,4
Path 3: 1,2,4,3
Path 4: 1,6
Path 5: 1,6,4,3
Path 6: 1,6,5
Path 7: 1,6,5,3 
```

我编写所需的代码没有问题，但是算法/函数的必要步骤（假设树遍历递归？）很难理解。

问题：应该使用什么方法/算法来执行此操作，您是否有一个示例（或至少是伪代码）来说明在给定图形输入数组的情况下它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:07:27.983

好吧，在密集图 (|E| ~ O(|V|^2)) 中，输出的大小是最大移动量的指数，任何程序都需要至少与它的数据大小呈线性关系的时间必须输出。

完成您所要求的最简单的方法是采用香草递归 DFS 算法并对其进行修改，以便

1）顶点堆栈维护在一个实际的堆栈中（我的意思是数组/向量/Python列表/等等，无论你在PHP中拥有什么等价物）。调用前插入目标顶点，调用返回后弹出。

2）当达到深度k时，函数将堆栈打印到输出并返回

3) 递归函数在返回之前“取消标记”当前顶点

不过，我无法专门为您提供 PHP 方面的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:01:00.443

单一起点和分支告诉您构建一棵树。这只是深度有限的树搜索。在每个级别，您都需要修剪您已经访问过的节点。伪代码在[wiki](http://en.wikipedia.org/wiki/Tree_search)文章中

# css - CSS是否可以使滚动元素不显示在窗口的顶部

> ID：15056965
> 
> 赞同：1
> 
> 时间：2013-02-24T21:41:17.923
> 
> 标签：css

很难解释，一张图片（在这种情况下是两张）值一千字。

我有

*   完整的图像背景，

*   带有导航栏的固定标题，下面用纯橙色表示，

*   下面以透明黄色表示的一些可滚动内容。

我希望可滚动元素不会显示在橙色条上方，因此它不会显示在屏幕的顶部 100px 中。这可以实现吗？

背景中的图像，即不是主体背景的图像，具有以下样式：

```
#full-screen-background-image {
  z-index: -999;
  min-height: 100%;
  min-width: 1024px;
  width: 100%;
  height: auto;
  position: fixed;
  bottom: 0;
  left: 0;
} 
```

![要素](../Images/90efeffbc8f474f19a604a0a30f3162f.png) ![不良影响](../Images/e70a414ac36f0318f443d6f76b4dbfe1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:37:00.440

[http://jsfiddle.net/chrisdanek/TNRkY/1/](http://jsfiddle.net/chrisdanek/TNRkY/1/)看看这个小提琴

HTML 结构非常基本，我刚刚为内容添加了一个包装器。它有`position :fixed`，`overflow: auto`所以它允许内容滚动。

```
.bg { 
    position: fixed; 
    z-index: -1; 
    top: 0; 
    left: 0; 
    bottom: 0; 
    right: 0; 
    background: #cfc; 
}
.toolbar { 
    position: fixed; 
    z-index: 100; 
    top: 100px; 
    left: 0; 
    right: 0; 
    height: 50px; 
    background: #fcc; 
}
.wrap { 
    position: fixed; 
    z-index: 50; 
    overflow: auto; 
    top: 150px; 
    left: 0; 
    bottom: 0; 
    right: 0; 
}
.content { 
    background: #ffc; 
    margin-top: 50px; 
} 
```

# html - 将子菜单与其父 li 对齐

> ID：15056966
> 
> 赞同：0
> 
> 时间：2013-02-24T21:41:34.107
> 
> 标签：html, css, html-lists

我正在尝试设置一个子菜单，其中第一项与其父项的 li 项对齐，有没有一种方法可以在不使用第二个 ul 的负边距（#innerNav）的情况下做到这一点。我的代码可以在[http://jsfiddle.net/ueEEa/2/找到](http://jsfiddle.net/ueEEa/2/)

* * *

```
#parentNav {
  float: left;
  padding: 0;
  width: 160px;
  border-bottom: 1px dashed #999;
}

#parentNav > li, #parentNav > li > #innerNav > li {
  list-style: none;
  border: 1px dashed #999;
  display: block;
}

#parentNav li #innerNav {
  display: none;
}

#parentNav > li:hover >  {
  display: block;
  margin-left: 160px;
  width: 160px;
  padding: 0px;
  position:absolute
}

<div>
    <ul id="parentNav">
        <li>Item 1</li>
        <li>Item 2
            <ul id="innerNav">
                <li>Item 2.1</li>
                <li>Item 2.2</li>
            </ul>
        </li>
        <li>Item 3</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:47:48.013

您可以通过提供子导航菜单`display: inline-block`而不是`block`.

这样做意味着它的左边缘通常会与父`<li>`元素的右边缘齐平，因此要解决这个问题，我们还需要给`display: relative`顶部菜单和`left: 160px`（等于顶部菜单宽度）给子导航菜单。

**[看到它在行动](http://jsfiddle.net/ueEEa/3/)**。

# oop - 如何在 CoDeSys 中放置自定义功能块的实例？

> ID：15056967
> 
> 赞同：2
> 
> 时间：2013-02-24T21:41:40.473
> 
> 标签：oop, ide, codesys

我正在学习 CoDeSys（使用 V3.5 SP2），但我遇到了一个相当初级的问题，我似乎找不到任何资源。

我已经定义了一个简单的功能块（通过*添加对象 -> POU -> 功能块*并使用 FBD 语言）。FB 不是抽象的，也不是扩展另一个 FB 或实现接口。（它的实现只包含一些非常基本的布尔逻辑 FB。）

问题是我不能把这个FB放在我的程序中。FB 确实出现在 POUs 子菜单下右侧的工具箱中，但是当我尝试将其拖到我的程序中时，没有`Start here`出现句柄。我可以正确放置任何内置 FB，但不能放置任何自定义 FB。

我能做些什么？我怀疑我误解了程序的结构方式或 FB 的定义方式，但我无法确定。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:48:53.907

不确定v3.5，但通常你实例化一个这样的功能块：

```
VAR
    fb_instance: MyFB;
END_VAR 
```

其中 MyFB 是您分配给自​​定义功能块的名称。

至于内置 FB，您可能会将功能块与功能混淆。AND、NOT、OR、GT — 这些是功能，而不是功能块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T16:46:46.810

您需要从“常规”工具中拖入一个“框”。然后在框中单击“...”并分配您想要的 FB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-10T19:28:27.213

我知道我参加聚会有点晚了，但你可以按下`F2`输入助手。使用此工具，您可以找到您转到左侧的功能块部分并找到您的功能块。插入后，它将提示您命名实例并将其放入变量声明中。

# java - java中声明和使用方法本地类的优缺点是什么？

> ID：15056971
> 
> 赞同：2
> 
> 时间：2013-02-24T21:42:06.973
> 
> 标签：java, android

我见过许多开发人员`method local class`在他们的代码中使用（我不是指匿名类）。

例如（在安卓中）：

```
private void myFunc()
{
    class Worker extends AsyncTask<Void, Void, Void> 
    {...}

    new Worker();
} 
```

在设计和运行时这样做有什么优缺点？多次调用方法时使用本地类不好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:31:08.777

任何阅读代码的人都可以立即知道方法本地类没有在其他任何地方使用——它只能在该方法内部使用。因此，如果将来需要重构，开发人员将知道更改只会影响该方法，而不影响程序中的任何其他内容。考虑一个具有数千个类的企业级应用程序——这些额外的信息非常有价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:04:16.947

如前所述，封装是一个原因，也是为了不必为几行创建一个新文件，这些行本身可能没有足够的意义。在其他语言中，传递行为（高阶函数、lambda 表达式等）更容易和更常见，而不必在新文件中编写新类。

您发布的这是 Java 必须完成的最便宜的方法之一......到目前为止。Java 8 似乎带来了其中一些其他特性。

# asp.net - asp.net 特定的嵌入式闪存文件在服务器上不起作用

> ID：15056975
> 
> 赞同：0
> 
> 时间：2013-02-24T21:42:35.450
> 
> 标签：asp.net, flash, iis-7

我想在我的网站上显示一个 Flash 文件。我使用下一个代码将 Flash 嵌入网页：

```
<object height="344" width="425">
  <embed src="/flash/1.swf" type="application/x-shockwave-flash" height="344" width="425">
</object> 
```

在本地一切正常。 ![在此处输入图像描述](../Images/f9fc142d28e3e135f68047f067865be8.png)

但是，当我在 Web 服务器（IIS 7.0）上加载此页面时，闪存加载但不起作用（在所有浏览器中）。

![在此处输入图像描述](../Images/6be5f7301dd5ef4c08f379bc9202eeb3.png)

我也知道只有这个特定的闪存文件不起作用。其他闪存文件工作正常。有任何想法吗？

# java - android 手机上的 TCP 服务器在 .accept() 处崩溃

> ID：15056978
> 
> 赞同：1
> 
> 时间：2013-02-24T21:42:44.060
> 
> 标签：java, android, sockets, tcp

我是android新手，但不是sockets。我有一个带有运行 UAVServer 线程的按钮的 GUI。当我点击它时，服务器应该监听客户端。代码行...

```
Socket client = serverSocket.accept(); 
```

...应该阻止，直到客户端连接。但它只是崩溃说“不幸的是，DroidUAV 已经停止。”

```
public class UAVServer extends Thread {

    private String TAG = UAVServer.class.getSimpleName();   

    @Override
     public void run() {        
        ServerSocket serverSocket;
        try {
            serverSocket = new ServerSocket(12345);                                         
            Log.d(TAG, "Fails at the next line of code");
            Socket client = serverSocket.accept();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }       
    }
} 
```

这看起来很简单，为什么会崩溃？还有android如何处理阻塞端口，这可能与它有关。如果它在 wifi 上，我认为这将取决于路由器来解锁端口。但是，如果我只是在使用 4G 呢？

注意：使用权限 android:name="android.permission.INTERNET" 在我的清单文件中。

编辑：我一定是做错了什么，因为我只是试图让它运行客户端而不是它在这条线上崩溃......

```
Socket s = new Socket("192.168.1.102",4444); 
```

编辑：添加错误...

```
FATAL EXCEPTION: main
java.lang.IllegalStateException: Could not execute method of the activity
    at android.view.View$1.onClick(View.java:3071)
    at android.view.View.performClick(View.java:3538)
    at android.widget.CompoundButton.performClick(CompoundButton.java:103)
    at android.view.View$PerformClick.run(View.java:14319)
    at android.os.Handler.handleCallback(Handler.java:608)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:156)
    at android.app.ActivityThread.main(ActivityThread.java:5099)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:991)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:758)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at android.view.View$1.onClick(View.java:3066)
    ... 12 more
Caused by: android.os.NetworkOnMainThreadException
    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1190)
    at libcore.io.BlockGuardOs.accept(BlockGuardOs.java:54)
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:98)
    at java.net.ServerSocket.implAccept(ServerSocket.java:202)
    at java.net.ServerSocket.accept(ServerSocket.java:127)
    at com.example.droiduav.UAVServer.run(UAVServer.java:19)
    at com.example.droiduav.MainActivity.onToggleServer(MainActivity.java:31)
    ... 15 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:24:36.717

好吧，您面临的问题与您的 LogCat 跟踪中可以看到的以下异常有关：

`Caused by: android.os.NetworkOnMainThreadException`

它的意思很简单，从名字就可以猜到。不要在主 UI 线程上执行任何网络代码。解决方案：[为此启动您自己的线程](http://developer.android.com/training/basics/network-ops/connecting.html#AsyncTask)（请参阅[此](http://developer.android.com/training/basics/network-ops/connecting.html#AsyncTask)Android 开发人员文章）。

**为什么？**

网络代码可能需要“很长时间”（假设几秒钟）才能执行。如果您在主线程上调用所有网络代码，它会同时冻结 UI（这 - 正如人们猜测的那样 - 并不是真正可取的，并且可能并且将导致[ANR 异常](http://developer.android.com/training/articles/perf-anr.html)）。

另请参阅这些问题，因为它们与您的问题有关：

*   [如何修复 android.os.NetworkOnMainThreadException？](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)
*   [引起：android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/13136539/caused-by-android-os-networkonmainthreadexception)

# codeigniter - 有效地将变量从模型传递到会话中

> ID：15056980
> 
> 赞同：0
> 
> 时间：2013-02-24T21:43:08.740
> 
> 标签：codeigniter, session-variables

我是代码 igniter 和 MVC PHP 的新手，我已经创建了一个带有在线资源的基本登录系统并且它可以工作，我现在正在尝试改进它以学习......

我的模型：

```
function validate(){

            $this->db->where('Email', $this->input->post('email'));
            $this->db->where('Password', sha1($this->input->post('password')));
            $query = $this->db->get('admin_users');

        if($query->num_rows == 1){

            return true;
        }

    }

    function get_admininfo(){

        $this->db->where('Email', $this->session->userdata('email'));
        $query = $this->db->get('admin_users');

        return $query->result();
    } 
```

一位用户已经验证我想提取他们的一些信息并将其存储在会话中，用于通知等，化身。

我的控制器看起来像这样：

```
 function validate_credentials(){

        //load the adminship model and then the function validate within it.
        $this->load->model('adminship_model');
        $query = $this->adminship_model->validate();

        // If the admin user successfully validated.
        if($query){

            $admininfo = $this ->adminship_model->get_admininfo();

            $data = array(

                'email' => $this->input->post('email'),
                'username' => $this->$admininfo['username'],
                'is_logged_in' => true
            );

            $this->session->set_userdata($data);
            redirect('dashboard_controller/dashboard');

        }else{

           $this->index();

        }

    } 
```

在我设置的仪表板控制器中：

```
 $data['email'] = $this->session->userdata('email');
        $data['email'] = $this->session->userdata('username'); 
```

并将其传递给视图，当我回显 $email 时，我收到了电子邮件，但用户名没有拉我收到此错误：

消息：未定义索引：用户名

这一行：

```
'username' => $this->$admininfo['username'], 
```

我知道我以错误的方式从模型中提取信息，请有人指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:24:47.940

功能

```
function get_admininfo(){

    $this->db->where('Email', $this->session->userdata('email'));
    $query = $this->db->get('admin_users');

    return $query->result();
} 
```

正在尝试将查询作为对象返回

和

```
 $admininfo = $this ->adminship_model->get_admininfo();

        $data = array(

            'email' => $this->input->post('email'),
            'username' => $this->$admininfo['username'],
            'is_logged_in' => true
        ); 
```

正在尝试将 $data['username'] 设置为来自 $this->admininfo 的预期数组值，但它返回了一个对象

尝试改变：

```
return $query->result(); 
```

至

```
return $query->row_array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:50:49.437

尝试将您的模型功能更改为：

```
 function get_admininfo(){
    $this->db->where('Email', $this->session->userdata('email'));
    $query = $this->db->get('admin_users');

    if($query->num_rows() == 1){
       foreach($query->result() as $row){
            $data = $row;
       }
       return $data;

    } else {
    return FALSE;
    }
 } 
```

然后尝试以这种方式获取数据：

```
 $admininfo = $this ->adminship_model->get_admininfo();
        $data = array(

            'email' => $this->input->post('email'),
            'username' => $admininfo->username,
            'is_logged_in' => true
        ); 
```

**编辑**

尝试 go get `all_userdata()`，因为您要使用它：

`$data['userdata'] = $this->session->all_userdata(); // returns an associative array`

然后将其传递给视图并使用 将其从视图中取出`$userdata['username']`，这通常对我来说很好。

**选项**

如果上面的代码不起作用，可能最简单的方法是指定列的名称，例如：

```
function get_admininfo(){
    $this->db->where('Email', $this->session->userdata('email'));
    $query = $this->db->get('admin_users');

    if($query->num_rows() == 1){
        $row = $query->row(); 
        return $row->username; //assuming this is the name of the column
    } else {
    return FALSE;
    }
 } 
```

将控制器代码更改为：

```
 $admininfo = $this ->adminship_model->get_admininfo();
        $data = array(

            'email' => $this->input->post('email'),
            'username' => $admininfo,
            'is_logged_in' => true
        ); 
```

# android - Android sdk 内容加载器处于 0% ......但没有任何效果

> ID：15056987
> 
> 赞同：31
> 
> 时间：2013-02-24T21:43:55.123
> 
> 标签：android, eclipse, adt

抱歉，如果我问错了（如果是，请告诉我我应该做什么。）该网站警告我不要将此作为答案，我没有足够的代表来添加评论，所以我正在做一个新帖子。

基本上，我遇到了与这张海报完全相同的问题：[收到错误消息“Android sdk 内容加载器卡在 0%”](https://stackoverflow.com/questions/10360824/getting-error-message-android-sdk-content-loader-stuck-at-0)

也就是说，当我打开 Eclipse 时，它​​会显示消息“Android sdk content loader 0%”，因此我的项目拒绝构建。但是我已经尝试了那里列出的所有响应：关闭自动构建、清理所有项目、删除我的调试密钥库、删除活动监视器中的 adb 进程（我在 Mac 上）、切换工作区、重命名项目、关闭 Eclipse并重新启动它。我还确保安装了最新版本的 SDK（4.2、API 17、Jelly Bean）。我的手机一开始就没有插到电脑上。我什至删除并重新安装了 ADT。我仍然遇到同样的问题。请有人告诉我出了什么问题以及如何解决它。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2014-02-25T08:00:26.137

下面的场景将起作用。

转到您的工作区目录`\workspace\.metadata\.plugins\org.eclipse.core.resources\\.projects`

1.  复制`.projects`文件夹并临时备份。
2.  现在从工作区目录中删除`.projects`文件夹。（**你不会失去你的项目**）
3.  启动 Eclipse 并等待所有进度在右/下角结束。完成所有进程后，关闭 Eclipse。
4.  `.projects`将您之前备份的文件夹粘贴到`\workspace\.metadata\.plugins\org.eclipse.core.resources\`目录中。覆盖现有`.projects`文件夹。
5.  再次启动 Eclipse。一切都会奏效。

在上述场景中，Eclipse 会像之前一样自动找到您的项目。您不必手动导入。

为我工作。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-09-14T13:31:37.697

这对我有用：（第三个总是有效，但前两个也可能有效）

首先尝试这种方法：

关闭eclipse然后去`YourWorkSpace\\.metadata\\.plugins\org.eclipse.e4.workbench`删除“workbench.xmi”，现在重新启动eclipse。

如果以前的方法不起作用，请尝试以下方法：

转到`Users\YOUR_USER_NAME\\.android`然后删除“ddms.cfg”，然后重新启动eclipse。

如果此方法不起作用，则最终方法将对您有所帮助，即：

1-在运行 eclipse 之前，转到您的工作区并删除一个不再需要的项目（如果您经常遇到此问题，请尝试在关闭 eclipse 之前导入一个项目，以便下次您想再次使用 eclipse 时将其删除）

2-去`Users\YOUR_USER_NAME\\.android`然后删除“ddms.cfg”

3-运行eclipse，你很高兴

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-04-23T17:56:06.683

我自己遇到了这个问题，我没有尝试过所有可能的stackoverflow链接。没有任何帮助。

当 eclipse 正在运行并向我显示愚蠢的“Android 内容（杀死我：）”时。我启动了任务管理器，我看到 adb，cmd.exe 正在运行。杀了它。瞧！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T10:12:16.737

在进度状态到达“Android sdk content loader 0%”之前，我关闭了所有打开的项目，然后一一打开。幸运的是问题得到了解决。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-12T13:39:59.887

这是我找到的正确工作的解决方案：

确保日食未激活。如果它处于活动状态，则从任务管理器的进程选项卡中杀死 Eclipse`%USERPROFILE%/`在 Windows 上打开或在 Linux/OS X 上简单地 ~ （您可以从桌面找到此文件夹）转到 .android 文件夹（这可能是一个隐藏文件夹）删除位于 .android 文件夹内的文件夹缓存 删除`ddms.cfg`位于 .android 文件夹内的文件 启动 Eclipse 希望这对您有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-23T09:36:14.693

正如其他人所指出的，还有其他几个答案可以解决您的问题。但是，它们对我不起作用，但我确实设法为我的特定问题找到了解决方法，这可能对某人有所帮助。

我相信我的问题出在工作中的代理服务器上。虽然您可以在 SDK 管理器中配置代理，但您无法输入要保存的凭据。

我的解决方法是在我启动 Eclipse 时将我的工作笔记本电脑连接到我的手机 WiFi 热点，这样它就可以绕过工作代理，然后使用正常的工作网络。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-20T14:29:16.190

你的工作区有很多项目吗？

如果是，请为您的项目创建更多工作区

我的工作区中有 365 项目，我经常停留在 0%，然后我尝试将一些项目移动到新的工作区。已经解决了！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-15T06:53:19.680

尝试这个...

1.  从 Eclipse IDE 退出，如果它主动从任务管理器中杀死它。
2.  转到`%USERPROFILE%`，然后打开`.android`文件夹。
3.  从文件夹中删除`cache`文件夹和`ddms`配置文件`.android`。
4.  然后像往常一样启动 Eclipse。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-14T17:24:03.027

对我有用的方式*（至少持续 2 年）*：

*   在控制台中转到您的工作区，输入元数据：`cd .metadata`
*   跑：`find . -name .markers -exec rm {} \;`
*   `-clean`使用和`-refresh`键启动 Eclipse ：

在我的情况下运行：

```
/Users/maxim/POC/adt-bundle-mac-x86_64-20140702/eclipse/Eclipse.app/Contents/MacOS/eclipse -clean -refresh 
```

就这样。

Eclipse 启动后，等待全部内容加载，如果您不想在控制台中看到所有日志输出，可以重新启动它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-03T12:31:09.270

另一种解决方案是清理存储在工作区目录下的特定于项目的元数据目录。$ cd 工作区/.metadata/.plugins/org.eclipse.core.resources/.projects $ rm -rf *

重新启动 Eclipse。

# php - 在 CDN 上更新用户创建内容的最佳实践

> ID：15056988
> 
> 赞同：1
> 
> 时间：2013-02-24T21:44:04.610
> 
> 标签：php, mysql, caching, cdn, cloudfiles

我很难决定如何在不将文件名值存储在数据库中的情况下处理用户生成的上传。当用户上传个人资料头像/图像时，我会在 CDN 上创建它。我在 PHP 中的头像助手知道容器的 url，所以我可以简单地回显`'http://cdn-static-url.com/'.$userId.'.jpg`

但是，如果用户重新上传/更改他们的头像，旧图像仍会缓存在 CDN 中，直到 TTL 过期，或者我发送清除请求（我使用云文件并且有无限制的清除请求，但即便如此，清除也是不是立即的）。

我应该如何允许重新上传图像，或者；

*   立即强制更改，
*   提醒用户清除状态（“您的新图像可能需要 X 时间来更新”，我什至从未见过这个）
*   在 CDN 上创建一个新对象，这意味着在 MySQL 中存储对文件名的引用（然后我每次想在页面上回显头像 url 时都会执行 SELECT ......）
*   使用上述方法并为每个对象的当前 url 使用 Memcache？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T21:49:18.120

一个非常便宜但在实践中常用的选项是在每次更改时生成修订 ID。然后，您将使用该修订来引用全新的文件名 ( `<revision>.extension`) 或将修订附加到语义相关的 url 作为查询参数 ( `user/profile.jpg?<revision>`)。

# php - 字符串到时间戳

> ID：15056991
> 
> 赞同：-2
> 
> 时间：2013-02-24T21:44:10.363
> 
> 标签：php, javascript, python, datetime, timestamp

我有这个日期时间的东西，需要转换为时间戳。我正在寻找 3 种状态的转换，使用 Javascript、Python 和 PHP。我的主要问题是我无法捕捉到这个字符串的格式：`2013-07-29T18:54:09.743390-08:00` 另外，有人可以分享这是什么格式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:50:16.817

使用 PHP 执行此操作的通用方法是 strtotime()
在 Javascript 中，您可以尝试

```
var d=new Date("your datetime here"); 
```

虽然，我不是 100% 确定你会得到你所拥有的格式的结果。也许其他人可以帮助解决这个问题。
至于 Python，其他人可能应该帮助你，因为我不熟悉。或者你可以谷歌“python 相当于 php strtotime”，或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:56:36.440

Python：

```
>>> import time
>>> import datetime
>>> dateString = "02/24/2012"
>>> time.mktime(datetime.datetime.strptime(dateString,"%m/%d/%Y").timetuple())
1330034400.0 
```

PHP：

```
$timestamp = strtotime('02/24/2012');    
print $timestamp.PHP_EOL; #OUTPUT 1330034400 
```

Javascript：

```
var date = new Date('2012-02-24')
date.getTime()/100 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T21:52:19.050

```
print strtotime('2013-07-29T18:54:09.743390-08:00'); 
```

结果：

```
1375152849 
```

# glsl - GLSL 纹理映射

> ID：15056994
> 
> 赞同：1
> 
> 时间：2013-02-24T21:44:30.467
> 
> 标签：glsl, texture-mapping

我想用 GLSL 做纹理映射。但我想我的代码不使用着色器。这是我的代码：

顶点.vert

```
#version 330

out vec2 texcoord;

void main()
{
    gl_Position=gl_ModelViewProjectionMatrix*gl_Vertex;
    texcoord=gl_MultiTexCoord0.xy;
} 
```

片段.frag

```
#version 330

uniform sampler2D img;
in vec2 texcoord;

void main()
{
    vec4 texcolor = texture2D(img,texcoord);
    gl_FragColor=texcolor;

} 
```

main中的纹理映射部分

```
 glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, _textureId[0]);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);      
    glUniform1i(glGetUniformLocation(shader.ShaderProgram,"img"),0);
    glBegin(GL_QUADS);
    glTexCoord2f(0.0f, 0.0f);
    glVertex3f(-2.5f, -2.5f, 2.5f);
    glTexCoord2f(1.0f, 0.0f);
    glVertex3f(2.5f, -2.5f, 2.5f);
    glTexCoord2f(1.0f, 1.0f);
    glVertex3f(2.5f, -2.5f, -2.5f);
    glTexCoord2f(0.0f, 1.0f);
    glVertex3f(-2.5f, -2.5f, -2.5f);
    glEnd(); 
```

我的代码有什么问题？完整代码：

[http://codepad.org/O096OoKU](http://codepad.org/O096OoKU)

[http://codepad.org/m3Snroyv](http://codepad.org/m3Snroyv)

[http://codepad.org/8zvJ4Vrp](http://codepad.org/8zvJ4Vrp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:25:02.633

在我看来，着色器代码没问题。但是您从未调用 glGetAttribLocation() glGetUniformLocation()

在调用 gluniform()、glVertexAttribPointer() 之前

您还必须在所有这些调用之前不久调用 glUseProgram() 一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:40:52.867

我也是新手，如果我错了，请纠正我，但也许它应该是这样的？所以代替 glTexCoord2f 和 glVertex2f 你总是使用 glVertexAttrib2f 和 3f 结合 layout(location = ???) 代替。

如果这对你们有用，请投票。

有些人反对我尝试过。glMultiTexCoord gl_texCoord

```
#ifdef __VERT__
#version 330

uniform mat4 cameraPV;
uniform mat4 lightPV;

layout(location = 0) in vec3 shader_vertexPosition;
layout(location = 1) in vec2 shader_textureCoord;

out vec2 shader_baseTextureCoord;
out vec4 shader_lightTextureCoord;

void main()
{
    vec4 worldPosition = vec4(shader_vertexPosition, 1);
    gl_Position = cameraPV * worldPosition;
    shader_baseTextureCoord = shader_textureCoord;
    shader_lightTextureCoord = lightPV * worldPosition;
}
#endif

static void VertexAttrib(GLuint location, glm::vec3 vector)
{
    glVertexAttrib3f(location, vector.x, vector.y, vector.z);
}

glm::vec3 pa(+50, -10, -50);
glm::vec3 pb(-50, -10, -50);
glm::vec3 pc(+50, -10, +50);
glm::vec3 pd(-50, -10, +50);

glBegin(GL_TRIANGLE_STRIP);
    glVertexAttrib2f(1, 1, 0); GLMisc::VertexAttrib(0, pa);
    glVertexAttrib2f(1, 0, 0); GLMisc::VertexAttrib(0, pb);
    glVertexAttrib2f(1, 1, 1); GLMisc::VertexAttrib(0, pc);
    glVertexAttrib2f(1, 0, 1); GLMisc::VertexAttrib(0, pd);
glEnd(); 
```

# google-maps - iOS 6.0 Google Maps SDK 自动完成功能

> ID：15056997
> 
> 赞同：0
> 
> 时间：2013-02-24T21:44:55.070
> 
> 标签：google-maps, ios6, autocomplete

我调查了这个链接[https://developers.google.com/maps/documentation/ios/intro?hl=uk](https://developers.google.com/maps/documentation/ios/intro?hl=uk) 并且有一些问题。我想使用自动完成功能（[https://developers.google.com/places/documentation/autocomplete](https://developers.google.com/places/documentation/autocomplete)），但在这种情况下，我需要创建 2 个不同的 APP KEY，因为 SDK 中没有任何方法可以实现这部分 API。我尝试了以下示例中的自动完成链接： maps.googleapis.com/maps/api/place/autocomplete/xml?input=Amoeba&types=establishment&location=37.76999,-122.44696&radius=500&sensor=true&key=AddYourOwnKeyHere 并尝试同时使用我的 iOS 和浏览器来自谷歌 API 控制台的应用程序密钥 (screencast(dot)com/t/VmxO4EjDB59L) 每次都返回我 EQUEST_DENIED。请建议，我如何在 iOS 6 中使用惊人的自动完成功能。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:06:07.393

是的，我需要使用两个不同的密钥，但这没问题，因为我使用一个项目 ID。在控制台中激活 Places API 很重要。