# StackOverflow 问答 14384000-14384999

# javascript - How to clear the input bound to the Google Places Autocomplete?

> ID：14384004
> 
> 赞同：25
> 
> 时间：2013-01-17T16:49:37.980
> 
> 标签：javascript, jquery, google-maps-api-3, google-places-api

Here is my issue: I am using Google Places Autocomplete to gather information about places from the user.

On the event "place_changed", I save this information. However I want to give the user the possibility to add multiple places. So after this place has been save I want to clear the input.

However Google Autocomplete automatically replace the last entry in the input field. Anyway to get rid of that?

The details :

```
var inputDiv = $('#myinput');
var options = {
  types: ['(cities)']
};
var autocomplete = new google.maps.places.Autocomplete(inputDiv[0], options);

google.maps.event.addListener(autocomplete, 'place_changed', function() {
    var places = autocomplete.getPlace();
    savePlaces(places);

    console.log(inputDiv.val()); // 'Paris, France'
    inputDiv.val('');
    console.log(inputDiv.val()); // (an empty string)

    setTimeout(function() {
        console.log(inputDiv.val()); // 'Paris, France' (It's back!)
        inputDiv.val('');
        console.log(inputDiv.val()); // (an empty string)      
    }, 1);

    setTimeout(function() {
        console.log(inputDiv.val()); // (an empty string)      
    }, 10);
} 
```

You will tell me, well that looks fine, just clear it in the timeout. BUT when I click away from the input (it loses the focus). The last entry comes back again!

Any idea to fix that? I haven't found in the Google documentation a function such as

```
autocomplete.clear(); 
```

Thanks!

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-18T01:42:45.333

It appears that the autocomplete internally listens to the blur-event of the input, so lets give it something to listen for and clear the field after that:

```
inputId_div.blur();    
setTimeout(function(){
 inputId_div.val('')
 inputId_div.focus();},10); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-07-06T10:17:27.540

to clear place you can use :

```
autocomplete.set('place',null); 
```

it triggers place_change event too.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-14T23:28:43.463

The previous term persists in the autocomplete object.

Solution: Clear the input box then create a new autocomplete object. Also be sure to remove previous event listeners.

Declaration:

```
var input = document.getElementById('autocomplete');
var autocomplete;
var autocompleteListener;
var onPlaceChange = function() {...};

var initAutocomplete = function() {
  autocomplete = new google.maps.places.Autocomplete(input);
  autocompleteListener = google.maps.event.addListener(autocomplete, 'place_changed', onPlaceChange);
}; 
```

To clear:

```
input.value = "";
google.maps.event.removeListener(autocompleteListener);
initAutocomplete(); 
```

The previous autocomplete object should be garbage collected. Please correct me if I'm wrong. To be sure you are exposing memory leaks, you can manually delete it.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T13:34:56.343

Not sure if this problem is still around but I found a fix that worked for me

```
google.maps.event.addListener(autoComplete, 'place_changed', function() {   
   $this.one("blur",function(){
      $this.val("");
   });

   //[DO YOUR CODE HERE]

   setTimeout(function(){
      $this.val(""); 
   },10); 
}); 
```

$this is a jQ reference to the autocomplete field. The blur event will trigger when you type in your value and tab into the autocomplete list and hit enter. When you click somewhere with the mouse, the blur event will trigger and clear the field.

If you use mouse directly after typing to select result, the blur is not triggered. Then the timeout will remove the value from your field.

It seems like a ridicolous hack to clear the field after input but I spent 4 hours searching the net and looking though the api of google and couldnt find a better solution.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-25T01:29:35.097

As a slight enhancement to Dr.Molle's excellent answer you can use the z-index property to work around the flash, at least in recent browsers:

```
var input = $('#[id of autocomplete field]');
$(input).blur();
setTimeout(function() {
    var container = $('.pac-container');
    var zIndex = $(container).css('z-index');
    $(container).css('z-index', -1);
    input.val('')
    input.focus();
    setTimeout(function() {
        $(container).css('z-index', zIndex);
    }, 200);
}, 10); 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-01-17T17:00:18.660

Try:

```
document.getElementById('myinput').value = ''; 
```

or

```
inputId_div.value = ''; 
```

I am not sure why you're using `inputId_div[0]`. I guess it must be a jQuery thing.

# java - 如何刷新android GridView

> ID：14384005
> 
> 赞同：2
> 
> 时间：2013-01-17T16:49:41.620
> 
> 标签：java, android

我正在执行首先显示默认图像的 GridView 活动，然后我为 netowrk 任务启动一个新线程以从数据库下载图像，我希望在线程完成后，GridView 将自动刷新网格中的图像。

[从这个问题](https://stackoverflow.com/questions/8053919/how-can-i-dynamically-add-images-to-a-gridview)我得到了以下代码：

```
ImageAdapter adapt = (ImageAdapter)gridView.getAdapter();
adapt.setBitmap(bitmaps);
adapt.notifyDataSetChanged(); 
```

更新网格的适配器。我在 onResume() 方法中执行了这 3 行，但是在线程完成后，我需要以某种方式调用 onResume() 方法（通过暂停活动或类似的东西）。

现在，如果我要移动到另一个活动（例如其中一个网格图像），然后按后退按钮，我可以看到我刚刚从数据库下载的网格视图图像。（因为它调用 onPause() 方法，然后调用 onResume() ）

有没有人有解决这个问题的方法？

谢谢

编辑：线程正在通过 AsyncTask 运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:53:04.473

> 线程完成后，我需要以某种方式调用 onResume() 方法（通过暂停活动或类似的东西）。

与其强行调用，不如`onResume()`将这三行移到一个新方法中，调用它`refreshAdapter()`。然后调用`refreshAdapter()`里面`onResume()`和任何地方使用你想刷新的Adapter。

# git - 如何使用 TortoiseGIT 更新 GitHub 分叉存储库？

> ID：14384007
> 
> 赞同：9
> 
> 时间：2013-01-17T16:49:44.950
> 
> 标签：git, repository, fork, tortoisegit

我分叉了一个存储库，进行了一些更改，提交了一个拉取请求，并接受了我的更改。现在几个月后，我的分支没有其他贡献者所做的任何更改。

我找到了以下信息：[如何更新 GitHub 分叉存储库？](https://stackoverflow.com/questions/7244321/how-to-update-github-forked-repository)

这有点用，但我使用的是 TortoiseGIT，而不是命令行 GIT。所以这些说明对我不起作用。我将如何使用 TortoiseGIT 管理这个？

查尔斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:07:07.180

由于您的分支已被接受并合并到原始存储库中，因此您不再需要它。

您可以通过拉取它来简单地更新您的本地 master 以反映原始 repo master 分支。有关TortoiseGit 指令，
请参阅“[我可以在 git 上将分叉项目更新为原始/主副本吗？ ”。](https://stackoverflow.com/questions/7297486/can-i-update-a-forked-project-on-git-to-the-original-master-copy)

TortoiseGit**`pull`**对话框将允许您选择要从中提取的远程仓库。

# linux - 将合并行批处理脚本转换为 shell

> ID：14384013
> 
> 赞同：-4
> 
> 时间：2013-01-17T16:50:15.890
> 
> 标签：linux, bash, shell, unix

我最近在同一个论坛上问了一个问题并找到了解决方案。不幸的是，它必须转换为 UNIX。问题是合并 csv 文件中的行。每行应以分号 (;) 结尾，如果它没有将下一行合并到其中，直到再次找到分号。

对我有用的解决方案是

```
@echo off
setlocal disableDelayedExpansion
set "ln="
for /f delims^=^ eol^= %%i in (myfile.txt) do (
    set "var=%%i"
    setlocal enableDelayedExpansion
    if "!var:~-1!"==";" (echo !var!>>temp.csv) else (<nul set /p ="!var!">>temp.csv)
    endlocal
) 
```

是否可以转换为 UNIX 脚本？

原始帖子的链接是： [如果最后一个字符是使用批处理文件的分号，则将行与下一行合并](https://stackoverflow.com/questions/14276782/merge-line-with-the-next-line-if-last-character-is-a-semicolon-using-batch-file/14282332)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:02:31.883

下次如果你想做文本处理，不要去windows。:D

鉴于您有：

```
A;1;abc;<xml/>;
;2;def;<xml
>hello world</xml>;
;3;ghi;<xml/>; 
```

你的规则是：

> 我需要合并行，以便如果该行不以分号 (;) 结尾，则将下一行合并到当前行中。

```
awk '!/;$/{l=l""$0;next;}{print l""$0;l=""}' file 
```

测试

```
kent$  echo "A;1;abc;<xml/>;
;2;def;<xml
>hello world</xml>;
;3;ghi;<xml/>;"|awk '!/;$/{l=l""$0;next;}{print l""$0;l=""}'
A;1;abc;<xml/>;
;2;def;<xml>hello world</xml>;
;3;ghi;<xml/>; 
```

它也适用于这种情况：

```
kent$  cat ttt
A;1;abc;<xml/>;
;2;def;<xml
>h
e
l
l
o w
o
rld<
/xm
l>;
;3;ghi;<xml/>;

kent$  awk '!/;$/{l=l""$0;next;}{print l""$0;l=""}' ttt
A;1;abc;<xml/>;
;2;def;<xml>hello world</xml>;
;3;ghi;<xml/>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:06:53.493

sed 将是我的选择。

```
sed ':a;/[^;]$/{N;s/\n//;ta}' x.txt 
```

sed 读取每一行，并为每一行设置一个标签 (:a)，然后检查该行是否缺少 ; (/[^;]$/) 如果没有 ; N 读取下一行并将其附加到当前行，并用新行分隔它们。s/\n// 删除换行符 ta 检查替换是否成功，如果成功则跳转到 :a 标记再次开始检查

# android - 如何在 Android 中创建计时器滴答？

> ID：14384016
> 
> 赞同：7
> 
> 时间：2013-01-17T16:50:24.157
> 
> 标签：android

我有这个方法

```
public void GetSMS(){
       //in this method I read SMS in my app inbox,
       //If have new SMS create notification
} 
```

为此，我认为创建计时器滴答方法并每 5 秒调用一次 GetSMS()

我怎样才能为此创建一个正确的方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-18T06:41:07.083

这是一个定时器和定时器任务的例子。希望这可以帮助。

```
final Handler handler = new Handler();
Timer timer = new Timer(false);
TimerTask timerTask = new TimerTask() {
    @Override
    public void run() {
        handler.post(new Runnable() {
            @Override
            public void run() {
                // Do whatever you want
            }
        });
    }
};
timer.schedule(timerTask, 1000); // 1000 = 1 second. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T16:53:04.973

也许有一个计时器和一个计时器任务？

请参阅 javadocs： [http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html)

然而接收广播可能是一个更可靠的解决方案。请参阅：[Android - SMS 广播接收器](https://stackoverflow.com/questions/4117701/android-sms-broadcast-receiver)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-26T13:55:01.743

使用[Timer.scheduleAtFixedRate()](https://developer.android.com/reference/java/util/Timer.html#scheduleAtFixedRate(java.util.TimerTask,%20long,%20long))如下：

```
final Handler handler = new Handler();
Timer timer = new Timer(false);
TimerTask timerTask = new TimerTask() {
    @Override
    public void run() {
        handler.post(new Runnable() {
            @Override
            public void run() {
                GetSMS();
            }
        });
    }
};

timer.scheduleAtFixedRate(timerTask, 5000, 5000); // every 5 seconds. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-28T06:54:00.767

我偶然看到它..这不是正确的方法..

您无需检查是否收到了短信。Android 提供广播接收器以在收到短信时收到通知。

给你，你有链接在这里..复制粘贴，它会很好用

[http://androidexample.com/Incomming_SMS_Broadcast_Receiver_-_Android_Example/index.php?view=article_discription&aid=62&aaid=87](http://androidexample.com/Incomming_SMS_Broadcast_Receiver_-_Android_Example/index.php?view=article_discription&aid=62&aaid=87)

希望这是有道理的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-27T10:34:20.337

尽管上述计时器方法是使用您所追求的那种计时器的正确方法，但我非常喜欢这个小技巧：

```
new CountDownTimer(Long.MAX_VALUE, 5000)
{
    public void onTick(long millisUntilFinished)
    {
        // do something every 5 seconds...
    }

    public void onFinish()
    {
       // finish off when we're all dead !
    }
}.start(); 
```

`Long.MAX_VALUE`根据 Java 文档，有一个（签名的）值`2^63-1`，大约是 292471 千年！因此，相对而言，有效地启动其中一个倒数计时器会永远持续下去。当然这取决于你的间隔时间。如果您希望每 1 秒有一个计时器，则计时器将“仅”持续 58494 千年，但在更宏大的计划中我们不需要担心这一点。

# r - 在 R 包 (eRm) 中处理图形

> ID：14384021
> 
> 赞同：0
> 
> 时间：2013-01-17T16:50:35.253
> 
> 标签：r

我正在使用 eRm 包来运行二分法 Rasch 模型。我的问题是我无法操纵人员项目地图上 x 轴的长度。

plotPImap 命令的描述说使用 xrange= 来指定范围，但是当我这样做时，我收到以下错误：

```
Error in xy.coords(x, y, xlabel, ylabel, log) : 
  'x' and 'y' lengths differ 
```

这是我的代码：

```
Model2 <- RM(EBL_MC)
plotPImap(Model2, xrange=c(-5:5), latdim = "Writing Achievement", main="Person-Item Map (EBL)") 
```

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:55:02.463

这只是在黑暗中拍摄，因为您没有提供可重现的示例，但通常当 R 中的函数要求轴范围参数时，它们只寻找两个值，低和高。试试`xrange = c(-5,5)`。

# css - CSS DIV 高度 100%

> ID：14384024
> 
> 赞同：0
> 
> 时间：2013-01-17T16:50:50.620
> 
> 标签：css, height

我在一个包装器中有 3 个 div。此 div 之一包含我的内容`class="cont"`此 div 具有动态高度。其他 div navi-left 和 und navi right 应该有一个像 div cont 一样的高度。我已经尝试过了，但它不起作用。你能帮我吗？

```
<div style="width:400px;">
    <div class="navi-left" style="width:50px; height:100%; background:grey;"></div>
    <div class="cont" style="width:80px; height:80px; background:blue;"></div>
    <div class="navi-right" style="width:50px; height:100%; background:green;"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:58:09.183

如果您正在寻找等高的流体 3 列布局，请查看[此“圣杯”帖子](http://matthewjamestaylor.com/blog/ultimate-3-column-holy-grail-pixels.htm)。

为了触发百分比高度，应该知道父级的高度。此外，如果您希望 DIV 全部显示在同一行上，则应内联显示它们。

```
<div style="width:400px;height:80px;">
    <div class="navi-left" style="width:50px; height:100%; background:grey;"></div>
    <div class="cont" style="width:80px; height:80px; background:blue;"></div>
    <div class="navi-right" style="width:50px; height:100%; background:green;"></div>
</div> 
```

CSS

```
div {display:inline-block;} 
```

小提琴：http: [//jsfiddle.net/qvepX/](http://jsfiddle.net/qvepX/)

# css - 使用媒体查询中的类集作为更少的mixin

> ID：14384029
> 
> 赞同：5
> 
> 时间：2013-01-17T16:51:00.850
> 
> 标签：css, less, media-queries

我正在尝试将媒体查询中设置的一组类作为混合器重用，以在整个网站中使用，而不是在 html 中嵌入非语义类名。

这是我的问题的一个例子。

```
@media (min-width: 1000px) {

    .foo{width:120px;}
    .foo-2{width:150px;}
}
@media (max-width: 999px) {

    .foo{width:110px;}
    .foo-2{width:120px;}
}

.bar{.foo;}
.bar-2{.foo;}
.bar-3{.foo-2;} 
```

.bar-X 永远不会应用任何样式。我可以猜测这是因为 LESS 不会在媒体查询中创建 .bar-X ，因此不会应用任何内容。

这是LESS中的错误，还是我永远无法实现的？一个解决方法将是理想的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T01:55:42.797

你的问题是一个常见的误解。LESS 不*处理*`@media`查询，浏览器在*LESS 完成工作后才处理*。LESS 只能创建浏览器要读取*的 CSS 代码。*因此，`@media`对于 LESS 来说，它是“无意义的”，它就像任何其他选择器（`.someClass div table`等）一样，它只处理`@media`将要提供给浏览器的内容。

这意味着您需要将所有更改的代码放入`@media`块中`@media`。但是你也不想要一堆重复的代码。因此，请创建一个主 mixin 来设置您的`@media`代码，然后从媒体查询中调用该 mixin：

```
.makeFooGroup(@w1, @w2) {
    .foo {width: @w1}
    .foo-2{width: @w2}
    .bar{.foo}
    .bar-2{.foo}
    .bar-3{.foo-2}
}

@media (min-width: 1000px) {
    .makeFooGroup(120px, 150px);
}
@media (max-width: 999px) {
    .makeFooGroup(110px, 120px);
} 
```

产生这个CSS：

```
@media (min-width: 1000px) {
  .foo {width: 120px;}
  .foo-2 {width: 150px;}
  .bar {width: 120px;}
  .bar-2 {width: 120px;}
  .bar-3 {width: 150px;}
}
@media (max-width: 999px) {
  .foo {width: 110px;}
  .foo-2 {width: 120px;}
  .bar {width: 110px;}
  .bar-2 {width: 110px;}
  .bar-3 {width: 120px;}
} 
```

有关我在 LESS 上提供的`@media`与此相关的更多信息，请参阅：

1.  [CSS 预处理器，可以在 @media 查询中定义变量](https://stackoverflow.com/questions/14139067/css-pre-processor-with-a-possibility-to-define-variables-in-a-media-query/14142709#14142709)
2.  [媒体查询分组而不是匹配的多个分散的媒体查询](https://stackoverflow.com/questions/13503862/media-query-grouping-instead-of-multiple-scattered-media-queries-that-match/13617917#13617917)

# mysql - 为 3 个 mySQL 表之间的每个结果显示一行

> ID：14384032
> 
> 赞同：2
> 
> 时间：2013-01-17T16:51:11.257
> 
> 标签：mysql, sql

我有两个表可以有多个记录链接到另一个表，但我不希望 mySQL 将行组合在一起。例子：

*   **test_main**包含字段 mainID、field1。
*   **test_veg**包含一个带有蔬菜名称的记录，链接到 test_main 中 ID=1 的记录
*   **test_fruit**包含两个记录，每个记录都有一个水果的名称，都链接到 test_main 中 ID=1 的记录

在此示例中，有三个记录链接到 test_main——一个 test_veg 和两个 test_fruit。我想让这 3 行给出如下结果：

```
field1               vegName  fruitName
-------------------  -------  ---------
stuff in main table  cabbage  NULL
stuff in main table  NULL     apple
stuff in main table  NULL     pear 
```

我还想要 test_main 中没有任何 test_veg 或 test_fruit 记录链接的记录。

这看起来很简单，但我无法让它工作。有任何想法吗？

如果我只有两个表（例如 test_main 和 test_veg），左连接就可以了。对于 3 个表，两个左连接只返回两行：

```
SELECT  test_main.field1, test_veg.vegName, test_fruit.fruitName
FROM test_main
LEFT  JOIN test_veg ON test_veg.mainID = test_main.mainID
LEFT  JOIN test_fruit ON test_fruit.mainID = test_main.mainID
WHERE test_main.mainID=1

field1               vegName  fruitName
-------------------  -------  ---------
stuff in main table  cabbage  apple
stuff in main table  cabbage  pear 
```

注意我坚持使用 mySQL3，这意味着在 WHERE 中没有像 SELECT 这样的花哨的东西，也没有 UNION。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:13:55.577

不久前我读到了一篇非常酷的文章，关于欺骗 MySQL3.x 模仿`UNION`. 您需要创建一个包含联合所需行数的 DUMMY 表。因此，如果您有 1 个联合（即 2 个不同的选择语句），则虚拟表中需要 2 行。

尝试这样的事情：

```
SELECT m.field1, v.vegName, f.fruitName
FROM test_main m
INNER JOIN dummy d 
  ON d.id < 3
LEFT JOIN test_veg v 
  ON v.mainID = m.mainID 
  and d.id = 1
LEFT JOIN test_fruit f 
  ON f.mainID = m.mainID 
  and d.id = 2
WHERE m.mainid=1 
```

这是[SQL Fiddle](http://www.sqlfiddle.com/#!2/28c31/8)，可以更好地帮助您跟进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:11:13.683

在您的查询中，您可以将以下内容添加到`where`子句中：

```
test_veg.mainID is NULL and test_fruit.main_id is NULL 
```

这将得到既不是水果也不是蔬菜的主要东西。

但是，我认为您的数据有问题。

同一输出行上的所有内容都具有相同的 MaindID。所以，卷心菜需要`mainID`和苹果、梨一样。但是，如果我正确理解了这个问题，那么 mainId 应该可以区分苹果和梨之类的东西。

# c - 哪些部分构成了可执行文件的大小？

> ID：14384034
> 
> 赞同：5
> 
> 时间：2013-01-17T16:51:19.327
> 
> 标签：c, linux, gcc, compilation, size

我在尝试理解一个[更大的问题](https://stackoverflow.com/questions/14366582/why-would-changing-a-structure-size-change-the-size-of-an-executable)时正在运行一个小测试。这是我的测试环境：

**头.h**：

```
#define MAX_BUFSIZE 500

typedef struct {
    int head;
    int tail;
    int status;
    int active;
    void * dev[MAX_BUFSIZE];
    char free[MAX_BUFSIZE];
    int count;
} msg_fifo_t;

extern msg_fifo_t TxBufx[];
extern msg_fifo_t Rx_Buf[]; 
```

**测试.c**：

```
#include <stdio.h>
#include "head.h"

//msg_fifo_t TxBufx[10];  // This is the important line

int main(int argc, char * argv[])
{
    // This part isn't really important...
    printf("Hello Test\n");

    return 0;
 } 
```

所以我使用了这些文件并运行了三个测试，看看我得到了什么大小 -

测试#1（代码如上）：

```
> gcc -Os test.c
> ls -al a.out
-rwxrwxr-x 1 mike mike 7158 Jan 17 11:13 a.out
> size a.out
text   data     bss     dec    hex   filename
1170    256       8    1434    59a   a.out 
```

测试#2（取消注释“重要”行）：

```
> gcc -Os test.c
> ls -al a.out
-rwxrwxr-x 1 mike mike 7181 Jan 17 11:14 a.out
> size a.out
text   data     bss     dec    hex   filename
1170    256   25208   26634   680a   a.out 
```

测试#3（取消注释“重要”行并将`TxBufx`大小更改为 100）

```
> gcc -Os test.c
> ls -al a.out
-rwxrwxr-x 1 mike mike 7181 Jan 17 11:14 a.out
> size a.out
text   data     bss     dec    hex   filename
1170    256  252008  253434  3ddfa   a.out 
```

所以现在我的问题：

*   看起来 bss 大小几乎与可执行文件的“大小”无关（如`ls -al`命令所报告的那样） - 谁能向我解释为什么会这样？

*   该特征是否特定于编译器/链接器/或平台？

*   有没有比`size`了解这里发生的事情更好的工具？（意思是什么真正构成了我的可执行文件的 7181 个字节？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T16:58:38.803

段中的数据量对`bss`可执行文件的磁盘大小没有影响，因为`bss`段是什么——这是程序中用于变量*初始化为零*的部分。由于这部分的内容是预先知道的（全为零），因此实际存储在可执行文件中的唯一内容就是该区域的*大小*。

因此，随着代码的更改，*确实会*`data`发生变化的是段的大小——代表静态初始化为非零值的变量，以及`code`段的大小，代表与你的程序相对应的编译可执行指令。

至于要使用的工具，大多数 Unix 系统上的 objdump(1) 实用程序（它是 GNU 工具链的一部分）或 MacOS X 上的 otool(1) 实用程序都可用于获取有关哪些部分构成可执行文件的更详细信息，以及每个符号中的符号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T16:53:51.433

`bss`是未初始化的内存。所以它唯一需要存储的是每个变量的起始地址和大小。这就是为什么可执行文件大小只增加了几个字节的原因。

顺便说一句，即使是初始化的内存——`data`段——在可执行映像中也可以小于初始化变量的总大小。
许多链接器不是在可执行文件中创建初始化数据的完整映像，而是插入有关如何初始化它的指令。因此，如果您这样做了`char buffer[500] = {1,1,1,1,1,1,1,...};`，`data`那么可执行文件的部分在概念上将类似于

`&TxBufx: fill with 500 1's`

除了地址将是段的文字开始。但是，如果您添加了 global `unsigned char bytecode[500] = {0x12, 0x34, 0x55, ... }`，那么您的数据段将至少大 500 字节，因为它不能采用任何快捷方式。

# android - 自定义 DialogPreference 中的 Android Spinner 在方向更改时强制关闭应用程序

> ID：14384036
> 
> 赞同：1
> 
> 时间：2013-01-17T16:51:24.560
> 
> 标签：android, preferences, android-spinner, dialog-preference

我创建了一个自定义对话框首选项，它有两个微调器，以便选择特定的时间间隔（例如 2 秒或 2 分钟或 3 小时等）。因此，当我在首选项屏幕中单击我的自定义首选项时，自定义对话框首选项会弹出起来，它显示了两个微调器。但是，当我选择其中一个微调器（弹出另一个对话框 - 请参阅第二张图像）并且如果我更改屏幕的方向时，应用程序将被强制关闭。:S 这发生在 Android 2.3.6 Gingerbread 中。我已经用 android 4.1 进行了测试，它工作正常，但微调器不同，它不在对话框中，而是在组合框样式中。

我已将所有函数的代码放在 try catch 中，但我无法捕获异常。以下是错误：

```
01-17 15:14:43.929: E/WindowManager(5029): Activity com.myapp.appdemo.EditPreferences has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405c1b00 that was originally added here
01-17 15:14:43.929: E/WindowManager(5029): android.view.WindowLeaked: Activity com.myapp.appdemo.EditPreferences has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405c1b00 that was originally added here
01-17 15:14:43.929: E/WindowManager(5029):  at android.view.ViewRoot.<init>(ViewRoot.java:263) 
```

有一个解决方案可以将 configchanges 更改为此：android:configChanges="orientation|keyboardHidden"，但我想知道是否有另一种方法可以解决这个问题，因为我已经阅读了很多关于这个解决方法可能的问题有一些副作用。

我还尝试从 onDismiss 函数的布局中删除微调器，但我没有解决问题。:S 所以使用函数或不使用函数都不能解决问题。

**这是自定义 DialogPreference 类：**

```
 public class PreferenceCustomTime extends DialogPreference {

    private Context context;
    private Spinner spinner1, spinner2;
    private ArrayAdapter<CharSequence> adapter, adapterValue;

    public PreferenceCustomTime(Context context, AttributeSet attrs) {              
        super(context, attrs);      
        this.context = context;
        setPersistent(false);
        setDialogLayoutResource(R.layout.spinner_list_callpoint);
    }

    @Override
    protected void onBindDialogView(View view) {        
        spinner1 = (Spinner) view.findViewById(R.id.spinner1);
        spinner2 = (Spinner) view.findViewById(R.id.spinner2);

        adapter = ArrayAdapter.createFromResource(context, R.array.arrayTypeTime, android.R.layout.simple_spinner_dropdown_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); //simple_spinner_dropdown_item simple_spinner_item
        spinner1.setAdapter(adapter);
        spinner1.setSelection(0);     
        adapterValue = ArrayAdapter.createFromResource(context, R.array.arrayValueTime1, android.R.layout.simple_spinner_dropdown_item);
        adapterValue.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner2.setAdapter(adapterValue);          

        super.onBindDialogView(view);
    }

    @Override
    public void onDismiss(DialogInterface dialog) {
        LayoutInflater inflater = LayoutInflater.from(context);
        LinearLayout linearLayout = (LinearLayout) inflater.inflate(R.layout.spinner_list_callpoint , null);
        linearLayout.removeView(spinner1);
        linearLayout.removeView(spinner2);
        super.onDismiss(dialog);
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        super.onDialogClosed(positiveResult);
        if (positiveResult) {
            SharedPreferences.Editor editor = getEditor();
            editor.putString(getKey() + ".type", spinner1.getSelectedItem().toString());
            editor.putString(getKey() + ".value", spinner2.getSelectedItem().toString());
            editor.commit();       
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:12:50.423

第一 - 从弹出窗口显示弹出窗口不是很好，如果我是你，我会尝试在微调器或其他东西下制作可扩展的布局。

第二 - 您会收到窗口泄漏错误，因为它是由下面的视图启动的弹出窗口，并且当您更改方向时，该连接会丢失。

第三 - 当你在你的 XML 中设置 android:configChanges="orientation|keyboardHidden 时，你告诉 Android 你想自己管理方向，所以你可能想在你的活动中实现 OnConfigurationChanged

# cxf - Spring MDP：轮询间隔？

> ID：14384038
> 
> 赞同：1
> 
> 时间：2013-01-17T16:51:26.583
> 
> 标签：cxf, apache-camel, ibm-mq, websphere-7, spring-jms

客户使用此模式：

*   Apache Camel 和 CXF JMS 接收器
*   这些在内部使用 Spring MDP（消息驱动 POJO）来实现它们的消息接收器
*   它们部署在 IBM WebSphere Application Server 7 上
*   队列管理器是 IBM Websphere MQ 6
*   Spring MDP 使用 JNDI 队列连接工厂绑定到队列管理器——支持连接池和会话池

这是此类消息接收器的示例，此示例使用的是 Camel：

```
<bean id="ibmmq" class="org.apache.camel.component.jms.JmsComponent">
    <property name="configuration" ref="jmsConfig"/>
</bean>

<!-- JNDI reference to the queue manager -->
<jee:jndi-lookup id="myTargetConnectionFactory" jndi-name="${mq.queueconnectionfactory}"/>

<bean id="jmsDestResolver" class="org.springframework.jms.support.destination.JndiDestinationResolver"/>

<bean id="myConnectionFactory" class="org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter">
    <property name="targetConnectionFactory" ref="myTargetConnectionFactory"/>
    <property name="username" value="SOME_USER"/>
    <property name="password" value=""/>
</bean>

<bean id="jmsConfig" class="org.apache.camel.component.jms.JmsConfiguration">

    <property name="connectionFactory" ref="${mq.connectionfactorybean}" />        
    <property name="destinationResolver" ref="jmsDestResolver" />        
    <property name="concurrentConsumers" value="1" />
    <property name="maxConcurrentConsumers" value="1" />

    <!--
        NOTE: If we try to use a cache without a transactionManager we get "Connection closed" errors
    -->
    <property name="cacheLevelName" value="CACHE_NONE" />
</bean> 
```

**问题：** WebSphere MQ 管理员向队列管理器报告了更多的 MGET() 请求。目前的假设是那些接收者不断地轮询频道以获取新消息。

他们似乎对 MDB（消息驱动 bean）没有这个问题。MDP 异步实现真的是一种轮询机制吗？如果是这样，有没有办法限制队列管理器的行程？也许增加轮询间隔？任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:28:18.807

我不确定 CXF，但对于 Camel 听众：

JmsConfiguration 中的默认 JMS 使用者似乎是“默认”类型。这意味着，它将实现 Spring 的 DefaultMessageListenerContainer。

来自[Javadoc](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jms/listener/DefaultMessageListenerContainer.html)

> 使用普通 JMS 客户端 API 的消息侦听器容器变体，特别是 MessageConsumer.receive() 调用的循环

接收调用将映射到 MQ GET 调用。

还有一个选项可以指定一个[简单](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jms/listener/SimpleMessageListenerContainer.html)类型的消费者，我猜这就是你想要的。

> 使用普通 JMS 客户端 API 的 MessageConsumer.setMessageListener() 的消息侦听器容器

我不确定这里，但 Spring 文档表明简单消息侦听器容器不支持 XA 事务。这可能需要考虑，因为您在应用程序服务器中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T20:52:23.100

我们的大型机 Q 也有类似的问题。IBM 大型机 q：

> 请注意，应用程序进程 ID 用作要传递给队列管理器的默认用户身份。如果应用程序在客户端传输模式下运行，则此进程 ID 必须与服务器计算机上的相关授权一起存在。如果需要不同的身份，则应用程序应使用 createConnection(username, password) 方法。

或者换句话说，IBM 使用 JVM 进程 ID 登录到 mq，除非我们发送适当的凭证。我们使用的是 Spring，所以每次 DefaultMessageListenerContainer 轮询 Q 时，它都必须与它一起发送凭据。我连接了其中一个婴儿和 Bam，就像一个魅力：

```
public class CustomConnectionFactory extends CachingConnectionFactory {

    private String username;
    private String password;

    ...

    /**
     * This is the secret sauce. Each time when we make a connection, we send
     * the username/password.
     */
    protected Connection doCreateConnection() throws JMSException {
        return getTargetConnectionFactory().createConnection(this.username, this.password);
    } 
```

我们的大型机更快乐。后来我们切换到分布式 MQ，一切都好多了！

这是我们的最终设置：

```
<!-- This hooks us up to the jndi -->
<jee:jndi-lookup id="telematicsJNDIConnectionFactory" jndi-name="${mq.jndi}" cache="true" lookup-on-startup="true" />
<!-- The outer wrapper must be TransactionAware, the inner custom one will cache the connection -->
<bean id="telematicsConnectionFactory" class="org.springframework.jms.connection.TransactionAwareConnectionFactoryProxy">
    <property name="targetConnectionFactory">
        <bean class="cat.dds.tmatic.utils.CustomConnectionFactory">
            <property name="targetConnectionFactory">
                <ref bean="telematicsJNDIConnectionFactory" />
            </property>
            <property name="username">
                <value>${mq.user}</value>
            </property>
            <property name="password">
                <value>${mq.pass}</value>
            </property>
            <property name="sessionCacheSize">
                <value>10</value>
            </property>
        </bean>
    </property>
    <property name="synchedLocalTransactionAllowed" value="true" />
</bean> 
```

# javascript - Raphaeljs 遇到 isPointInside 问题并捕获悬停事件

> ID：14384040
> 
> 赞同：0
> 
> 时间：2013-01-17T16:51:30.257
> 
> 标签：javascript, hover, raphael

我正在开发一个按钮，当你将鼠标悬停在它上面时，它会展开以显示图像和一些文本，它们需要对点击事件做出不同的反应。事实证明，在一组事物上创建单个悬停事件需要一些棘手的解决方法，因为当您在集合内的项目之间进行切换时，Raphael 会检测到鼠标进出。（原始问题：[将鼠标悬停在 Raphaeljs 中的一组元素上](https://stackoverflow.com/questions/14224071/hovering-over-a-set-of-elements-in-raphaeljs/)）

上述问题中接受的答案使用该`isPointInside`函数来决定鼠标进/出是否实际上是移入/移出整个集合。他们的演示效果很好：（蓝色圆圈是他们的修复，红色没有）

[http://jsfiddle.net/amustill/Bh276/1](http://jsfiddle.net/amustill/Bh276/1)

但是，此示例中出现的红色方块代表我的图像，如果您在红色方块和蓝色方块之间快速移动鼠标，则永远不会捕获悬停事件。此外，将鼠标悬停在红色方块的边界上通常会导致故障。

[http://jsfiddle.net/wTUex/](http://jsfiddle.net/wTUex/)

为什么 isPointInside 似乎返回不正确？我可以使用更准确的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:31:09.820

**更新的答案（以下原文）**

根据评论中的对话，您还可以为框分配 id，然后在鼠标移出时测试鼠标下的新对象是否是红色矩形，如下所示：

```
var Paper = new Raphael(0, 0, 400, 300);
var mat = Paper.rect(0, 0, 400, 300).attr({fill: "#CCC"});
mat.node.id = "mat";
// Hover in function
function hoverIn() {
  newBox.show();
  this.text.toFront();
  this.animate({
    height: 140,
    width: 140,
    x: 130,
    y: 80
  }, 100);
}

// Hover out function
function hoverOut(e) {
  console.log(e, e.toElement);
  if (e.toElement.id !== "redbox") {
      newBox.hide();
      this.animate({
          height: 100,
          width: 100,
          x: 150,
          y: 100
      }, 100);
  }
}

var rect = Paper.rect(150, 100, 100, 100).attr({fill: 'blue' });
rect.node.id = "bluebox";
var newBox = Paper.rect(140, 90, 120, 120).attr({fill: 'red'}).hide();
newBox.node.id = "redbox";
rect.attr({r:5});    
rect.text = Paper.text(200, 150, 'Hover me!').attr('font-size', 12);
rect.hover(hoverIn, hoverOut); 
```

[jsFiddle](http://jsfiddle.net/chriswilsondc/wTUex/5/)

**原始答案** 我总是推荐一个不同的解决方案：而不是在一组复杂的情况下触发 hoverOut，只需在鼠标进入框外区域时触发它。

见：[如何防止损失悬停在拉斐尔？](https://stackoverflow.com/questions/14321786/how-to-prevent-loss-hover-in-raphael/14322953#14322953)

```
var Paper = new Raphael(0, 0, 400, 300);
//this should be colored white -- leaving as gray for clarity
var mat = Paper.rect(0, 0, 400, 300).attr({fill: "#CCC"});
// Hover in function
function hoverIn() {
    console.log(newBox);
    newBox.show();
  rect.text.toFront();
  rect.animate({
    height: 140,
    width: 140,
    x: 130,
    y: 80
  }, 100);
}    

// Hover out function
//notice "this" was replaced with "rect" since "this" now refers to mat
function hoverOut() {
  newBox.hide();
  rect.animate({
    height: 100,
    width: 100,
    x: 150,
    y: 100
  }, 100);
}

var rect = Paper.rect(150, 100, 100, 100).attr('fill', 'blue');
var newBox = Paper.rect(140, 90, 120, 120).attr({fill: 'red'}).hide();

rect.attr({r:5});

rect.text = Paper.text(200, 150, 'Hover me!').attr('font-size', 12);
rect.mouseover(hoverIn);
mat.mouseover(hoverOut); 
```

[jsFiddle](http://jsfiddle.net/chriswilsondc/wTUex/5/)

# ruby-on-rails - 使用 capistrano 多级更改独角兽端口

> ID：14384041
> 
> 赞同：1
> 
> 时间：2013-01-17T16:51:30.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, capistrano, unicorn

我需要根据环境设置独角兽的端口。像这样的东西：

```
#config/unicorn.rb

if Rails.env.production?
  listen 8080, :tcp_nopush => true
elsif Rails.env.staging?
  listen 3001, :tcp_nopush => true
end 
```

上面的代码返回这个错误：

```
[out :: 172.30.1.24] config/unicorn.rb:32:in `reload': uninitialized constant Unicorn::Configurator::Rails (NameError) 
```

如何根据环境更改端口？

泰！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:16:08.313

尝试检查环境变量

```
environment = ENV['RACK_ENV'] || ENV['RAILS_ENV'] || 'production' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:41:10.973

您需要加载 Rails 环境才能访问 Rails.env：

```
# config/unicorn.rb
require File.dirname(__FILE__)+'/application'

port = case Rails.env
  when 'production' then 8080
  when 'staging'    then 3001
  else 3000
end

listen port, :tcp_nopush => true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T06:19:24.833

看起来您可能有命名空间查找问题。您的代码正在 的上下文中进行评估，并且您的条件（部分）中`Unicorn::Configurator`有一个“裸词常量查找” 。您可以改为使用以下命令强制进行顶级查找：`Rails``if Rails.env``::Rails`

```
if ::Rails.env.production?
  # etc.
end 
```

希望有帮助。

# php - PHP UTF-8，汉字转义

> ID：14384042
> 
> 赞同：0
> 
> 时间：2013-01-17T16:51:32.447
> 
> 标签：php, utf-8, escaping

我有一个 PHP 脚本和 MYSQL 数据库。在这个数据库中，我有很多条目，法语、英语、中文、俄语……我想要一个 php 函数返回 true，如果 $var 包含其他拉丁字符（所以，俄语，中文， ...) Euro、Dollars 和 specials 字符不应该返回 false，而是 true。

我试过 iconv，mb_check_encoding，但没办法，俄语（和其他）被转换为：“????????”

你能帮忙吗 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:09:09.387

我已经能够在 Ryan 脚本的帮助下创建一个函数：

```
function other_chars($str){
    $other = preg_match('/[^\\p{Common}\\p{Latin}]/u', $str);
    if(!$other){
        return true;
    }
    return false;
} 
```

非常感谢瑞恩 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:30:19.550

我不得不为工作做类似的事情，并且（在帮助下）想出了这个：

```
<?php
function other_chars($str){
    $american = preg_match("/^[\p{Latin}\p{Nd}\p{Common}]*$/u", $str);
    if(!$american){
        return true;
    }
    return false;
} 
```

# ruby-on-rails - 控制器规范中的批量分配角色问题

> ID：14384046
> 
> 赞同：0
> 
> 时间：2013-01-17T16:51:36.977
> 
> 标签：ruby-on-rails, rspec, devise, tdd

我正在使用 Devise 开发一个应用程序。因为我需要一个 UI 来管理用户，所以我还生成了一个控制器和关联的视图来对 User 模型执行所有 CRUD 操作。

然后我创建一个“角色”字段，用于 CanCan 并作为批量分配角色。

现在我正在尝试正确制作所有规格，我有这个测试

```
describe "POST create" do
  describe "with valid params" do
    it "creates a new User" do
      expect {
        post :create, {:user => valid_attributes}
      }.to change(User, :count).by(1)
    end
    # ...
  end
end 
```

执行时会引发：

```
UsersController POST create with valid params creates a new User
Failure/Error: post :create, {:user => valid_attributes}
ActiveModel::MassAssignmentSecurity::Error:
   Can't mass-assign protected attributes: name, surname, role
 # ./spec/controllers/users_controller_spec.rb:62:in `block (5 levels) in <top (required)>'
 # ./spec/controllers/users_controller_spec.rb:61:in `block (4 levels) in <top (required)>' 
```

我的控制器的 #create 方法定义为 class UsersController < ApplicationController load_and_authorize_resource

```
 # GET /users
  # GET /users.json
  def index
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @users }
    end
  end

  # GET /users/1
  # GET /users/1.json
  def show
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user }
    end
  end

  # GET /users/new
  # GET /users/new.json
  def new
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user }
    end
  end

  # GET /users/1/edit
  def edit
  end

  # POST /users
  # POST /users.json
  def create
    @user = User.new params[:user], :as => current_user.role.to_sym
    respond_to do |format|
      if @user.save
        format.html { redirect_to @user, notice: 'Utente creato con successo.' }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /users/1
  # PUT /users/1.json
  def update
    respond_to do |format|
     if @user.update_attributes(params[:user], :as => current_user.role.to_sym)
       format.html { redirect_to @user, notice: 'Profilo aggiornato con successo.' }
       format.json { head :no_content }
      else
       format.html { render action: "edit" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end

 # DELETE /users/1
  # DELETE /users/1.json
  def destroy
    @user.destroy

    respond_to do |format|
      format.html { redirect_to users_url }
      format.json { head :no_content }
    end
  end
end 
```

为了使 rspec 与 Devise 一起正常运行，我遵循[了官方文档](https://github.com/plataformatec/devise/wiki/How-To%3a-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)，并且我还创建了宏（与那里描述的相同），除了我没有两个不同的 FactoryGirl 而是我在创建角色时定义的一个，例如：

```
FactoryGirl.create(:user, role: :admin) # or role: :user 
```

这是用户模型

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation, :remember_me
  attr_accessible :email, :password, :password_confirmation, :remember_me, :name, :surname, :role, :as => :admin

  devise :database_authenticatable, :recoverable, :rememberable, :trackable,
         :validatable

  VALID_ROLES = [:admin, :student]

  validates_inclusion_of :role, in: VALID_ROLES

  def is_admin?
    role == "admin"
  end

  def is_student?
    role == "student"
  end
end 
```

我该如何解决？我花了一整天的时间，但我无法正常工作:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:11:25.357

这个问题是由 cancan 引起的，它在不允许我声明包含角色的 ":as" 子句的情况下`load_and_authorize_resource`调用。`User.create`

修复实际上`load_and_authorize_resource`是以典型的方式删除对资源的调用并创建资源（就像没有 cancan 一样）。然后在每个方法中调用授权检查，即`authorize! :create, User`#create。

可能它也可以通过使用类似的东西`load_and_authorize_resource :except => [:create]`然后只在那里手动进行，但我不确定，我没有测试它。

顺便说一句，我在这个错误上浪费了一个工作日，我真的希望这可以帮助遇到同样问题的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:23:23.617

自 Rails 3.2 版以来，已经实现了安全性。要修复您的错误，请将以下行添加到您的用户模型中：

```
attr_accessible :name, :surname, :role 
```

有关更多详细信息，请阅读本指南： http: [//guides.rubyonrails.org/security.html](http://guides.rubyonrails.org/security.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T19:35:19.160

你让用户在 de 'post' 行出错了。改变这个：

```
post :create, {:user => valid_attributes} 
```

对此：

```
post :create, :user => {valid_attributes} 
```

我假设您的变量“valid_attributes”是具有该类属性的散列。

# c - C：使用 fgets() 清除 stdin 输入缓冲区未按预期工作

> ID：14384048
> 
> 赞同：1
> 
> 时间：2013-01-17T16:51:41.580
> 
> 标签：c, macos, stdin, eof, fgets

我正在使用以下方法清除输入缓冲区：

```
void dump_line(FILE *fp) {
    int ch;    
    while ( (ch = fgetc(fp)) != EOF && ch != '\n');
} 
```

如果我使用 scanf() 从标准输入读取，这工作正常：

```
char string[51];
...
scanf("%50[^\n]", string);
dump_line(stdin); 
```

但是，如果我使用 fgets() 代替，如以下代码所示：

```
char string[52];
...
fgets(string, 52, stdin);
dump_line(stdin);

// Since fgets() reads in the '\n', trim the end of the string:
string[strlen(string)-1] = 0; 
```

由于 fgets() 读取 '\n' 字符，我发现需要分配一个大一个字符的缓冲区并将字符串修剪回一个字符。这工作正常，但 dump_line 函数存在问题。使用 scanf() 版本时，它按预期工作，因为由于使用 [^\n]，输入缓冲区中总是会留下一个 '\n'。因此，即使这是缓冲区中剩下的唯一字符，在 dump_line() 中，fgetc() 也会读取该字符，并且由于它是一个 '\n'，因此 while 循环被打破。

在 fgets() 版本中，如果 '\n' 适合字符串缓冲区，则读入它，而 stdin 则为空。这导致程序在 fgetc() 上等待，需要用户按回车键才能继续前进，这显然不是我想要的。另一方面，如果用户输入的字符串对于缓冲区来说太长，则 dump_line() 工作正常！

我猜这个问题与 EOF 有关，但我似乎无法让它按预期工作！任何帮助将不胜感激。

如果对我正在使用的平台有任何帮助，那就是 Mac OSX，以防万一这是某种特定于平台的怪癖。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:56:58.177

检查是否需要清除缓冲区，

```
fgets(string, 52, stdin);
size_t len = strlen(string);
if (string[len-1] == '\n') {
    // read in whole line, no need to clear buffer
    string[len-1] = 0;
} else {
    // junk left in buffer, clear it
    dump_line(stdin);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:55:43.520

您可以使用[`ungetc`](http://en.cppreference.com/w/c/io/ungetc)将换行符放回流中。

# css - 应用了 FF 中的 css 样式，但在 IE9 中它似乎被划掉了

> ID：14384049
> 
> 赞同：0
> 
> 时间：2013-01-17T16:51:43.203
> 
> 标签：css, firefox, internet-explorer-9, responsive-design

我将如何解决为什么某些样式未在 IE9 中应用...当我检查我的 firebuglight 时，我可以看到它们被划掉了。但是在FF中，应用了样式，这就是我想要的。不幸的是，这不是我的 css 或 web 应用程序，所以我不熟悉 css。

我的第二个问题是这个。我还注意到在 IE 中，该类被多次“覆盖”。含义 - 我在类列表中看到相同的类重复，具有不同的属性。在FF，我只看到一次。如果 FF 看起来不错，我是否可以假设我可以删除 css 文件中类名的所有实例，除了 FF 在其萤火虫列表中显示的那个实例？

谢谢。

编辑1：

这是一个例子。在 IE 中，我将以下 2 种样式应用于标签。第一种样式中的所有内容都是“启用的”，但在第二类中，颜色被禁用。和所有的填充一样。

```
#websiteName {
  color:#65605e;
  float:left;
  letter-spacing:1px;
  padding-bottom:4px;
  padding-left:10px;
  padding-right:10px;
  padding-top:11px;
}    

#websiteName {
  color:#ffffff;
  font-size:150%;
  font-weight:normal;
  margin:0;
  padding-bottom:5px;
  padding-left:10px;
  padding-right:10px;
  padding-top:5px;
  text-align:center;
  width:auto;
} 
```

但是，在 FF 中，这是我在同一类中看到的：

```
#websiteName {
  color:#FFFFFF;
  font-size:150%;
  font-weight:normal;
  margin:0;
  padding:5px 10px;
  text-align:center;
  width:auto;
} 
```

所以在我的css中，我搜索了这个类的所有实例。我发现以下嵌入在一大串 css 代码中：

```
#webLogo{display:block;width:25%}#websiteName{color:#65605E;letter-spacing:1px;padding:11px 10px 4px;float:left}.dir-rtl #websiteName{float:right}#someotherclass{} 
```

还有这个，也嵌入在其他css类定义中。

```
#websiteName{color:#FFFFFF;text-align:center;width:auto;font-size:150%;font-weight:normal;padding:5px 10px;margin:0} 
```

第二个代码片段出现在第一个代码片段之后。

编辑2：

今天下午我随机决定为运行 IE 的计算机更换显示器，你猜怎么着？瞧！现在，该站点在 IE 中的显示与在我的 FF 机器上显示的相同。我只是一个 css 新手，所以我不确定这是否正确，但我开始在我的 css 中查找媒体查询，看看它是否在某处检测浏览器大小。我还没有找到任何东西，但你能给我关于可能发生的事情的任何其他想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:17:22.120

对于“为什么某些样式在 IE9 中没有应用的疑难解答”；在让 what-so-ever-tool 尝试帮助您之前，请阅读并理解以下内容：[http](http://www.w3.org/TR/CSS21/cascade.html) ://www.w3.org/TR/CSS21/cascade.html 。

关注第 6.4 点级联（优先级）

样式表可能有三个不同的来源：作者、用户和用户代理。

```
Author. The author specifies style sheets for a source document according to the conventions of the document language. For instance, in HTML, style sheets may be included in the document or linked externally.
User: The user may be able to specify style information for a particular document. For example, the user may specify a file that contains a style sheet or the user agent may provide an interface that generates a user style sheet (or behaves as if it did).
User agent: Conforming user agents must apply a default style sheet (or behave as if they did). A user agent's default style sheet should present the elements of the document language in ways that satisfy general presentation expectations for the document language (e.g., for visual browsers, the EM element in HTML is presented using an italic font). See A sample style sheet for HTML for a recommended default style sheet for HTML documents. 
```

对于您的其他问题：firebug 可以“设置”为“仅显示应用的样式”、“显示用户代理样式”。尝试根据您的喜好显示/隐藏。此外，如果您声明这样的内容：

```
div, td, span, .selector, a {
    color:red;
}

...
<td>
    <div>
        <span>
            <a href="some.link">text link</a>
        </span>
    </div>
</td>
... 
```

然后你检查一个跨度内的锚点，在一个 td 内的一个 div 内，Firebug 将显示 4 次应用的样式（由于你的 firebug 设置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:54:42.183

可能是它们在 IE 中被划掉然后应用新样式的原因是它们使用 IE 特定值来处理这些 css 规则，这将覆盖任何现有样式。Firefox 也是如此，您可能会看到 MOZ 唯一规则，例如 IE 无法完成 Firefox 可以做的所有事情，因此 IE 忽略了该 css。如果你有一个例子，它可能会有所帮助。

# python - 用于 GAE 的 Python 无头浏览器

> ID：14384062
> 
> 赞同：7
> 
> 时间：2013-01-17T16:52:19.080
> 
> 标签：python, google-app-engine, headless-browser

我正在尝试在 Google Appengine 上将 Angular.js 客户端与 webapp2 一起使用。

为了解决 SEO 问题，想法是使用无头浏览器来运行 javascript 服务器端并将生成的 html 提供给爬虫。

是否有任何在谷歌应用引擎上运行的 Python 无头浏览器？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-07-19T15:55:07.857

这现在可以在 App Engine Flex 上使用自定义运行时完成，所以我添加了这个答案，因为这个问题是谷歌弹出的第一件事。

我将此自定义运行时基于我的其他 GAE flex 微服务，该微服务使用预构建的 python 运行时

项目结构：

```
webdrivers/
- geckodriver
app.yaml
Dockerfile
main.py
requirements.txt 
```

应用程序.yaml：

```
service: my-app-engine-service-name
runtime: custom
env: flex
entrypoint: gunicorn -b :$PORT main:app --timeout 180 
```

Dockerfile：

```
FROM gcr.io/google-appengine/python
RUN apt-get update
RUN apt-get install -y xvfb
RUN apt-get install -y firefox
LABEL python_version=python
RUN virtualenv --no-download /env -p python
ENV VIRTUAL_ENV /env
ENV PATH /env/bin:$PATH
ADD requirements.txt /app/
RUN pip install -r requirements.txt
ADD . /app/
CMD exec gunicorn -b :$PORT main:app --timeout 180 
```

要求.txt：

```
Flask==0.12.2
gunicorn==19.7.1
selenium==3.13.0
pyvirtualdisplay==0.2.1 
```

主文件

```
import os
import traceback

from flask import Flask, jsonify, Response
from selenium import webdriver
from pyvirtualdisplay import Display

app = Flask(__name__)

# Add the webdrivers to the path
os.environ['PATH'] += ':'+os.path.dirname(os.path.realpath(__file__))+"/webdrivers"

@app.route('/')
def hello():
    return 'Hello!!'

@app.route('/test/', methods=['GET'])
def go_headless():
    try:
        display = Display(visible=0, size=(1024, 768))
        display.start()
        d = webdriver.Firefox()
        d.get("http://www.python.org")    
        page_source = d.page_source.encode("utf-8")
        d.close()
        display.stop()
        return jsonify({'success': True, "result": page_source[:500]})
    except Exception as e:
        print traceback.format_exc()
        return jsonify({'success': False, 'msg': str(e)})

if __name__ == '__main__':
    app.run(host='127.0.0.1', port=8080, debug=True) 
```

从这里下载 geckodriver (linux 64)：

[https://github.com/mozilla/geckodriver/releases](https://github.com/mozilla/geckodriver/releases)

**其他注意事项：**

*   请注意您正在使用的 geckodriver、firefox 和 selenium 的版本，因为它可能是 finnickey，会出现此错误`WebDriverException: Message: Can't load the profile. Possible firefox version mismatch. You must use GeckoDriver instead for Firefox 48+. Profile Dir: /tmp/tmp 48P If you specified a log_file in the FirefoxBinary constructor, check it for details.`
*   除非您使用的是旧版 geckodriver/firefox，否则不要设置`DesiredCapabilities().FIREFOX["marionette"] = False` [https://github.com/SeleniumHQ/selenium/issues/5106](https://github.com/SeleniumHQ/selenium/issues/5106)
*   `display = Display(visible=0, size=(1024, 768))`需要修复此错误：[如何修复 Selenium WebDriverException：浏览器似乎在我们连接之前已退出？](https://stackoverflow.com/questions/26070834/how-to-fix-selenium-webdriverexception-the-browser-appears-to-have-exited-befor)

在本地测试：

```
docker build . -t my-docker-image-tag
docker run -p 8080:8080 --name=my-docker-container-name my-docker-image-tag 
```

部署到应用引擎：

```
gcloud app deploy app.yaml --version dev --project my-app-engine-project-id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-28T02:01:06.337

这是一个超级元的想法。Web 服务器使用无头 Web 浏览器来完成 Web 请求以呈现页面并返回结果。唷。

在无头浏览器上查看以下答案，特别注意基于 Python 的浏览器。

无头浏览器问题：[无头互联网浏览器？](https://stackoverflow.com/questions/814757/headless-internet-browser)

看起来支持 Javascript 的都使用 WebKit 并且需要 PyQt 或 Pyside。这意味着由于存在运行时限制，您将无法在 App Engine 上运行它们。

我建议出于 SEO 目的，您进行某种用户代理检测，并使用 Jinja2 模板或其他东西发出页面的超级缩小版本。无论如何，您可能会获得更好的性能。

# jakarta-ee - Gson 应为 BEGIN_OBJECT，但为 STRING

> ID：14384063
> 
> 赞同：0
> 
> 时间：2013-01-17T16:52:21.300
> 
> 标签：jakarta-ee, gson

我正在使用 wunderground 来获取有关我的 java web 应用程序的天气信息。经过一番搜索，我发现 Gson 似乎是一个不错的 json 解析器。

但是按照一些示例，我似乎无法弄清楚如何跳过根元素。这是一个**预测 json**请求的示例：

```
{
    "forecast" : {
        "simpleforecast" : {
            "forecastday" : [ {
                "avehumidity" : 61,
                "avewind" : {
                    "degrees" : 342,
                    "dir" : "NNW",
                    "kph" : 11,
                    "mph" : 7
                },
                "conditions" : "Clear",
                "date" : {
                    "ampm" : "PM",
                    "day" : 17,
                    "epoch" : "1358478000",
                    "hour" : 21,
                    "isdst" : "0",
                    "min" : "00",
                    "month" : 1,
                    "monthname" : "January",
                    "pretty" : "9:00 PM CST on January 17, 2013",
                    "sec" : 0,
                    "tz_long" : "America/Chicago",
                    "tz_short" : "CST",
                    "weekday" : "Thursday",
                    "weekday_short" : "Thu",
                    "yday" : 16,
                    "year" : 2013
                },
                "high" : {
                    "celsius" : "11",
                    "fahrenheit" : "52"
                },
                "icon" : "clear",
                "icon_url" : "http://icons-ak.wxug.com/i/c/k/clear.gif",
                "low" : {
                    "celsius" : "-2",
                    "fahrenheit" : "28"
                },
                "maxhumidity" : 76,
                "maxwind" : {
                    "degrees" : 340,
                    "dir" : "NNW",
                    "kph" : 18,
                    "mph" : 11
                },
                "minhumidity" : 38,
                "period" : 1,
                "pop" : 10,
                "qpf_allday" : {
                    "in" : 0.0,
                    "mm" : 0.0
                },
                "qpf_day" : {
                    "in" : 0.0,
                    "mm" : 0.0
                },
                "qpf_night" : {
                    "in" : 0.0,
                    "mm" : 0.0
                },
                "skyicon" : "mostlysunny",
                "snow_allday" : {
                    "cm" : 0,
                    "in" : 0
                },
                "snow_day" : {
                    "cm" : 0,
                    "in" : 0
                },
                "snow_night" : {
                    "cm" : 0,
                    "in" : 0
                }
            },
            {
                "avehumidity" : 59,
                "avewind" : {
                    "degrees" : 172,
                    "dir" : "South",
                    "kph" : 6,
                    "mph" : 4
                },
                "conditions" : "Clear",
                "date" : {
                    "ampm" : "PM",
                    "day" : 18,
                    "epoch" : "1358564400",
                    "hour" : 21,
                    "isdst" : "0",
                    "min" : "00",
                    "month" : 1,
                    "monthname" : "January",
                    "pretty" : "9:00 PM CST on January 18, 2013",
                    "sec" : 0,
                    "tz_long" : "America/Chicago",
                    "tz_short" : "CST",
                    "weekday" : "Friday",
                    "weekday_short" : "Fri",
                    "yday" : 17,
                    "year" : 2013
                },
                "high" : {
                    "celsius" : "10",
                    "fahrenheit" : "50"
                },
                "icon" : "clear",
                "icon_url" : "http://icons-ak.wxug.com/i/c/k/clear.gif",
                "low" : {
                    "celsius" : "-1",
                    "fahrenheit" : "30"
                },
                "maxhumidity" : 84,
                "maxwind" : {
                    "degrees" : 170,
                    "dir" : "South",
                    "kph" : 10,
                    "mph" : 6
                },
                "minhumidity" : 40,
                "period" : 2,
                "pop" : 0,
                "qpf_allday" : {
                    "in" : 0.0,
                    "mm" : 0.0
                }, .................. 
```

现在我只感兴趣的部分是forecastday。所以我做的是以下内容：

```
package entity.json;

import java.util.List;

public class Data {
    private List<Forecast> forecastday;

    public List<Forecast> getForecastdays() {
        return forecastday;
    }
} 
```

**预测类：**

```
package entity.json;

public class Forecast {
    private int avehumidity;
    private Avewind avewind;
    private String conditions;
    private DateWeather date;
    private CelciusHigh high;
    private String icon_url;
    private CelciusLow low;
    // + constructor, getters, setters 
```

**这是我的方法：**

```
public void createWeatherForecast(){
        String text = "";
        try {
            URL url = new URL(jsonUrl);
            System.out.println(jsonUrl);
            Scanner s = new Scanner(url.openStream());
            while(s.hasNextLine()){
                text += s.nextLine();
            }
            Data weather = new Gson().fromJson(text, Data.class);
            System.out.println(new Gson().toJson(weather));
            System.out.println(weather.getForecastdays().get(0).getAvewind());
        } catch (IOException ex) {
            Logger.getLogger(WeatherController.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

现在我也应该专注于预测和简单预测吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:46:34.620

仅仅因为你对 JSON 对象的一部分“只感兴趣”并不能使 Gson 神奇地提供它；）

您要么需要使 POJO 匹配 JSON 对象，要么编写自定义反序列化器，丢弃您不感兴趣的 JSON 对象部分并返回您的`Data`类的实例。

# c# - 使用 Task.Run() 写入控制台失败

> ID：14384064
> 
> 赞同：11
> 
> 时间：2013-01-17T16:52:22.350
> 
> 标签：c#, .net-4.5

我的一位同事发现我们的代码存在问题，花了一段时间才查明到底发生了什么，但这个简单的例子可以很好地证明这一点：

```
// Fails
class Program
{
    static void Main(string[] args)
    {
        Task.Run(() => Console.WriteLine("Hello World"));
        Console.ReadKey();
    }
}

// Works fine
class Program
{
    static void Main(string[] args)
    {
        Console.Write(String.Empty);
        Task.Run(() => Console.WriteLine("Hello World"));
        Console.ReadKey();
    }
} 
```

玩这个很明显，从主线程的任何地方写入控制台都将允许后台线程也写入控制台，但我们正在努力理解为什么会发生这种情况。谁能解释从主线程向控制台写入的内容是第一个片段没有实现的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T17:04:22.660

实际上，第一种情况并没有失败。“Hello World”出现在应用程序结束之前。这是一个经典的[Race Condition](http://de.wikipedia.org/wiki/Race_Condition)。在第一种情况下，`Console.ReadKey()`主线程击败了任务，在第二种情况下，任务获胜。不幸的是，我不能确切地告诉你为什么写空字符串会使任务获胜。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T17:10:21.423

我怀疑发生了什么事。我观察到的：

*   如果你在启动之前对控制台的输出做*任何事情*`ReadKey`，那很好。这包括获取`Console.Out`但不使用它
*   如果您延迟通话以使`Console.WriteLine`通话在通话之前*开始*`Console.ReadKey`，那很好（并且您可以*在*等待时拨打多个`WriteLine`电话 *`ReadKey`*

 *我怀疑使用控制台的第一个操作会获取一个用于初始化的锁（以避免它被初始化两次），并且该`ReadKey`方法*会一直持有锁*，直到读取了一个键。这肯定会解释我到目前为止运行的每个程序。

执行假设初始化的操作虽然很有趣 - 读取`Console.Out`“修复”问题，但读取`Console.In`不会。

我怀疑这会`ReadKey`初始化输出，因为该值仍会回显到控制台......但我不想发誓。

有趣的是，使用`Console.ReadLine()`而不是`Console.ReadKey()`首先不会导致问题。*

# php - 在php中显示html文件的内容

> ID：14384065
> 
> 赞同：2
> 
> 时间：2013-01-17T16:52:28.417
> 
> 标签：php, file, file-upload

大家好，我想使用 php 创建简单的文件系统。我想使用 php 显示上传文件的内容。但是当我上传 html 或 php 文件时，不会显示其内容，而是执行 html 或 php 代码。我想在不执行的情况下显示该文件。请帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:54:30.327

如果 PHP get 被执行，您将包含/需要该文件。改为阅读它的内容，例如使用 To prevent the browser from parsing the HTML use[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php)
[`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)

例子：

```
<?php
$filename = "test.html";
echo "<pre><code>";
echo htmlentities(file_get_contents($filename));
echo "</code></pre>";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:53:52.887

如果要显示原始代码，可以：

a) 将其设为文本文件

或者

b) 在输出中使用 htmlentities()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:54:50.573

显示文件内容：

```
readfile($yourFilename); 
```

如果您不希望浏览器解释您的代码，请尝试设置“错误”的 MIME 类型。

# php - shell_exec 没有在 php 中执行命令

> ID：14384068
> 
> 赞同：0
> 
> 时间：2013-01-17T16:52:34.567
> 
> 标签：php, winscp

我正在尝试从 Windows 计算机运行此命令，但无法使其正常工作。当我将它输入到命令提示符时，该命令可以完美运行，但在我执行 PHP 脚本时却不行。

```
$command = '"C:\Program Files (x86)\WinSCP\winscp.exe" /console /command "open client" "cd /var/www/html/reports" "put C:\wamp\www\client\test.php" "exit"';
shell_exec($command); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:58:10.840

尝试使用`exec()`它可以帮助您进行调试。

```
<?php
$command = '"C:\Program Files (x86)\WinSCP\winscp.exe" /console /command "open client" "cd /var/www/html/reports" "put C:\wamp\www\client\test.php" "exit"';
$cmd = exec($command, $arr, $opt);

// Output info run from the command:
var_dump($cmd, $arr, $opt); 
```

# iframe - 如何强制 iFrame 打开所有链接留在 iFrame 中？

> ID：14384074
> 
> 赞同：4
> 
> 时间：2013-01-17T16:52:52.920
> 
> 标签：iframe, google-chrome-extension

我正在托管一个 iFrame，似乎当链接指向外部域时，它会将其加载到主窗口而不是 iFrame 中。有没有办法强制在同一个 iFrame 中打开链接？

注意：我可以将任何我想要的内容添加到 iFrame 中加载的页面（使用 Chrome 扩展程序）。

我尝试添加：

```
<base target="_parent" /> 
```

但这并没有起到任何作用...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:18:02.490

检查您的外部域页面的标题。如果`X-Frame-Options`Header 设置为`DENY`，浏览器会忽略将内容加载到**iframe**或**框架集**并加载到浏览器的主框架中。

```
Regardless of the site attempts the page cannot be displayed in a frame. 
```

## 你的代码

`<base target="_parent" />` 用于将结果加载到当前浏览器的父浏览上下文中。如果没有父级，则此选项的行为方式与 相同`_self`，因此无法解决您的问题

改用 `<base target="myframe">`where `myframe`is your iframe 的名称。

```
<iframe width="200" height="200" name="myframe"></iframe> 
```

# 示范

查找用于加载页面的服务器标头

```
<html>

    <head>
        <base target="myframe">
    </head>

    <body>
        <a href="hi.html">Base</a>
        <a href="bye.html">A Tag</a>
        <iframe width="200" height="200" name="myframe"></iframe>
    </body>

</html> 
```

# 参考

*   [X-Frame-Options 标题](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)

# excel - 错误读取选择案例 - excel vba

> ID：14384086
> 
> 赞同：0
> 
> 时间：2013-01-17T16:53:24.050
> 
> 标签：excel, vba

我正在使用下面的代码，我无法让下面的这个语句起作用：

```
If UCase(Left(Dn, 2)) = "LM" Then
    Dn.Offset(, 1) = Val(Mid(Dn, 2, 3)) + 3.5 
```

代码不会执行上述语句中的任何内容。

```
Case "L"

 **If UCase(Left(Dn, 2)) = "LM" Then
 If IsNumeric(Mid(Dn, 2, 1)) And IsNumeric(Mid(Dn, 3, 1)) Then
            If Mid(Dn, 3, 1) = "0" Then
            Dn.Offset(, 1) = Mid(Dn, 3, 3) + 3.5
           Else
            Dn.Offset(, 1) = Mid(Dn, 3, 3) + 0.35
           End If
            End If

    ElseIf IsNumeric(Mid(Dn, 4, 1)) And IsNumeric(Mid(Dn, 5, 1)) Then
        If Mid(Dn, 5, 1) = "0" And Mid(Dn, 4, 1) = "0" Then
        If Dn.Offset(, 3) = "CMBS" Then
             Dn.Offset(, 1) = Mid(Dn, 3, 3) + 20
        Else
        Dn.Offset(, 1) = Mid(Dn, 3, 3) + 2
        End If

        ElseIf UCase(Left(Dn, 6)) Like "LM###S" Then

        Dn.Offset(, 1) = Mid(Dn, 3, 3) + 2
        Else
        Dn.Offset(, 1) = Mid(Dn, 3, 3) + 0.2
        End If**

    ElseIf UCase(Left(Dn, 3)) = "L/M" Then
        Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 3.5
    ElseIf UCase(Left(Dn, 3)) = "LM$" Then
        Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 3.5
    ElseIf UCase(Left(Dn, 2)) = "L$" Then
        Dn.Offset(, 1) = Val(Mid(Dn, 3, 2)) + 2
    ElseIf UCase(Left(Dn, 3)) = "LO-" Then
        Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 2
    ElseIf UCase(Left(Dn, 6)) = "LO MID" Then
        Dn.Offset(, 1) = Val(Mid(Dn, 7, 3)) + 3.5
    ElseIf UCase(Left(Dn, 3)) = "LO " Then
        Dn.Offset(, 1) = Val(Mid(Dn, 4, 2)) + 2
    ElseIf UCase(Left(Dn, 5)) Like "L###H" Then
        Dn.Offset(, 1) = Val(Mid(Dn, 2, 3)) + 0.2
    ElseIf UCase(Left(Dn, 4)) Like "L##H" Then
        Dn.Offset(, 1) = Val(Mid(Dn, 2, 2)) + 0.2
    ElseIf UCase(Left(Dn, 4)) Like "L#" Then
        Dn.Offset(, 1) = Val(Mid(Dn, 2, 2)) + 0.2
    ElseIf IsNumeric(Mid(Dn, 3, 1)) And IsNumeric(Mid(Dn, 4, 1)) Then
        If Mid(Dn, 4, 1) = "0" And Mid(Dn, 3, 1) = "0" Then
            If Dn.Offset(, 3) = "CMBS" Then
                Dn.Offset(, 1) = Mid(Dn, 2, 3) + 20
            Else
                Dn.Offset(, 1) = Mid(Dn, 2, 3) + 2
            End If
        ElseIf UCase(Left(Dn, 5)) Like "L###S" Then
            Dn.Offset(, 1) = Mid(Dn, 2, 3) + 2
        Else
            Dn.Offset(, 1) = Mid(Dn, 2, 3) + 0.2
        End If
    ElseIf IsNumeric(Mid(Dn, 3, 1)) And IsNumeric(Mid(Dn, 4, 1)) Then
        If Mid(Dn, 4, 1) = "0" And Mid(Dn, 3, 1) <> "0" Then
            Dn.Offset(, 1) = Mid(Dn, 2, 3) + 0.2
        End If
    ElseIf UCase(Left(Dn, 3)) Like "L##" Then
        If IsNumeric(Mid(Dn, 2, 1)) Then
            If Mid(Dn, 3, 1) = "0" Then
                Dn.Offset(, 1) = Mid(Dn, 2, 2) + 2
            Else
                Dn.Offset(, 1) = Mid(Dn, 2, 2) + 0.2
            End If
        End If
    End If 
```

**输入值 -->
lm10, LM120S, LM120 所需输出 -->
13.5 123.5 120.35**

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:20:58.213

the`Val(Mid(Dn, 2, 3))`评估为零：**M10**以字母开头，因此结束该`val`过程。那应该是`Val(Mid(Dn, 3, 2))`

我假设你的`select`陈述是`Select Case UCase(Left(dn, 1))`。如果您没有`UCase`输入文本，则它不会执行 case 语句中的任何代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:35:40.293

将此代码粘贴到模块中

```
Public Function GetNumb(strString As String) As Double
    Dim strLen As Long, i As Long
    Dim Temp As String

    strLen = Len(strString): Temp = ""

    For i = 1 To strLen
        If (Mid(strString, i, 1) = "-") Then
            Temp = Temp & Mid(strString, i, 1)
        End If
        If (Mid(strString, i, 1) = ".") Then
            Temp = Temp & Mid(strString, i, 1)
        End If
        If (IsNumeric(Mid(strString, i, 1))) = True Then
            Temp = Temp & Mid(strString, i, 1)
        End If
    Next i

    If Len(Temp) = 0 Then
        GetNumb = 0
    Else
        GetNumb = CDbl(Trim(Temp))
    End If
End Function 
```

然后更改您的代码

```
Dn.Offset(, 1) = Val(Mid(Dn, 2, 3)) + 3.5 
```

到

```
Dn.Offset(, 1) = GetNumb(Dn.Value) + 3.5 
```

**解释**：函数`GetNumb`从字符串中提取数字，所以

1.  lm10 ~~> 10
2.  LM120S ~~> 120
3.  LM120 ~~> 120

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:20:48.563

在 IF 行周围放置一些 Debug.Print 语句以查看发生了什么，如下所示：

```
Debug,Print Dn
If UCase(Left(Dn, 2)) = "LM" Then
    Debug,Print "hi"
    Dn.Offset(, 1) = Val(Mid(Dn, 2, 3)) + 3.5 
```

第一行的案例“L”在做什么？您的代码是否被阻止到达 IF 语句？

# java - 如何正确使用 CheckboxTreeViewer？

> ID：14384095
> 
> 赞同：5
> 
> 时间：2013-01-17T16:53:50.910
> 
> 标签：java, checkbox, tree, swt, jface

我面临的问题是，`CheckboxTreeViewer`在 Linux Debian 上实现了完美的工作，但在 Windows 下却没有。首先，我不理解“setGrayed()”的概念。是否表明，只有元素中的部分子元素被选中？

所以问题是：当我在 Windows 下检查一个项目时，它会检查树中的所有其他元素。不知何故，整个逻辑被忽略了。

这是我的代码`ICheckStateListener`：

```
@Override
public void checkStateChanged(final CheckStateChangedEvent event) {
    // object checked
    final TreePath path = ((ITreeSelection) this.treeViewer.getSelection()).getPaths()[0];
    checkChildren(path, event.getChecked());
    checkParents(path.getParentPath());
    syncData();
}

public void checkParents(final TreePath path) {
    if (path == null) {
        return;
    }
    final IFieldElement<Object> treeElement = (IFieldElement<Object>) path.getLastSegment();
    if (treeElement != null) {
        boolean allChecked = true;
        boolean allUnchecked = true;
        for (final Object fieldElement : treeElement.getChildrenElements()) {
            allChecked = allChecked && this.treeViewer.getChecked(fieldElement);
            allUnchecked = allUnchecked && !this.treeViewer.getChecked(fieldElement);
        }
        if (allUnchecked) {
            this.treeViewer.setChecked(treeElement, false);
            this.treeViewer.setGrayed(treeElement, false);
        } else
        if (allChecked) {
            this.treeViewer.setChecked(treeElement, true);
            this.treeViewer.setGrayed(treeElement, false);
        } else
        if (!allUnchecked && !allChecked) {
            this.treeViewer.setChecked(treeElement, true);
            this.treeViewer.setGrayed(treeElement, true);
        }
    }
    checkParents(path.getParentPath());
}

public void checkChildren(final TreePath path, final boolean checked) {
    if (path == null) {
        return;
    }
    final Object element = path.getLastSegment();
    if (element != null) {
        this.treeViewer.setChecked(element, checked);
        this.treeViewer.setGrayed(element, false);
        this.treeViewer.setSubtreeChecked(element, checked);
        if (element instanceof EventMethod) {
            checkEventMethod(path, element, checked);
        }

    }
} 
```

编辑：我正在使用 Eclipse Indigo

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T15:50:39.587

树中复选框的“灰色”状态只是另一种状态，除了选中和未选中。你如何使用它取决于你，但通常它意味着“部分检查”状态。在通常的实践中，如果一个项目有一些子项被选中而另一些未被选中，则父项将显示选中+灰色状态。具体如何呈现取决于操作系统及其版本。在一些实现中，用户只能选中或取消选中树项，并且不能通过鼠标点击显式地设置项的灰色状态。它会根据选中的孩子自动发生。但是，有时有些应用程序还允许您单击复选框以将其选中为灰色到未选中。在这种情况下，灰色状态通常意味着“默认”状态。无论如何，这取决于实现。

我不确定您所面临的问题是什么，但如果我不得不猜测，我会说小部件在 Debian 与 Windows 中在抛出事件时表现不同。因为在您的实现中，每当检查一个项目时，您都会检查它的所有父项及其所有子项，因此可能是`treeViewer.setChecked()`在 Windows 中调用父项也开始引发事件，并且您的侦听器被调用以检查所有父项的所有子项，因此一切都被启用。测试一下，看看这是否是问题所在。为避免这种情况，请在修改任何内容之前第一次收到事件时设置一个标志。并且在修改时忽略所有`checkStateChanged()`只要设置了该标志，事件就会调用，以便您对元素的更改不会递归地应用于整个树。一旦您对一项选中/未选中操作的操作完成，重置标志，以便可以再次处理用户事件。

```
private boolean ignoreCheckEvent = false;

@Override
public void checkStateChanged(final CheckStateChangedEvent event) {
    if (ignoreCheckEvent)
        return;

    ignoreCheckEvent = true;

    try {
        // object checked
        final TreePath path = ((ITreeSelection) this.treeViewer.getSelection()).getPaths()[0];
        checkChildren(path, event.getChecked());
        checkParents(path.getParentPath());
        syncData();
    }
    finally {
        ignoreCheckEvent = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-12T07:00:42.063

尝试使用 org.eclipse.ui.dialogs.ContainerCheckedTreeViewer

描述：在容器（非叶）节点上具有选中/灰色状态的特殊行为的 CheckboxTreeViewer：灰色状态用于可视化其子节点的选中状态。如果检查了所有包含的叶子，则检查容器并且非灰色。如果检查了一些但不是所有的叶子，则容器是灰色的。

# zend-framework - 不同模块的多种布局 - Zend Framework

> ID：14384100
> 
> 赞同：5
> 
> 时间：2013-01-17T16:54:00.190
> 
> 标签：zend-framework, layout

我对 Zend Framework 中的布局有疑问。这是我的项目结构：

*   我有 2 个名为“backoffice”和“frontoffice”的模块。
*   我在后台和前台的布局/脚本中有一个 layout.phtml。
*   现在我想为“后台”和“前台”分别设置“布局/脚本”
*   在我的 application.ini 中，我有：`resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"`

现在我该如何解决这个我有单独的布局？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T18:12:47.250

只需在`layout/scripts`文件夹中放置另一个布局，并告诉任何模块、控制器或操作使用该其他布局而不是默认布局。

如果你想让控制器使用不同的布局，你可以在你的`init()`

```
$this->_helper->layout->setLayout('layoutname'); 
```

您可以分别针对特定操作或整个模块执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T17:52:59.413

把它放到你的 application.ini

```
resources.layout.layout = "layout"
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules" 
```

您的布局文件将是 /modules/MODULE_NAME/views/scripts/layout.phtml

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T11:00:41.357

您应该为此目的编写前端控制器插件（称为布局选择器）。

在您的 Bootstrap.php 中注册该插件 - 布局选择器：

```
protected function _initPlugins(){
    $front = Zend_Controller_Front::getInstance();
    $front->registerPlugin(new My_Plugins_LayoutSelector());
} 
```

在 application.ini 中自动加载命名空间 My_

```
Autoloadernamespaces[] = "My_" 
```

最后，在 /library 中创建一个新文件夹“My”，并在其中创建文件夹“Plugins”，并在其中包含代码的文件“LayoutSelector.php”：

```
class My_Plugins_LayoutSelector extends Zend_Controller_Plugin_Abstract {
    public function preDispatch(Zend_Controller_Request_Abstract $request) {
        $module = $request->getModuleName();
        $layout = Zend_Layout::getMvcInstance();
        $layout->setLayout($module);
    }
} 
```

这样以后每个模块都会使用合适的布局，不需要在每个控制器中编写来选择布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T11:09:52.450

我使用这个自定义插件进行了一些更改，并为每个模块创建了特定的布局，具有特定的结构 [http://blog.vandenbos.org/2009/07/19/zend-framework-module-specific-layout/](http://blog.vandenbos.org/2009/07/19/zend-framework-module-specific-layout/)

# .net - 我应该如何使用我的 .NET 解决方案构建我的 Git 存储库？

> ID：14384103
> 
> 赞同：4
> 
> 时间：2013-01-17T16:54:15.813
> 
> 标签：.net, git, branching-and-merging

我有一个 .NET 解决方案，比方说，其中有 10 个项目。

有几种思路：

1.  每个项目使用一个 Git 存储库，然后为解决方案和子模块使用一个存储库。因此，每个`.csproj`文件和依赖文件都有自己的存储库。
2.  为整个解决方案使用单个 Git 存储库。`.sln`文件所依赖的一切。

查看选项＃1，我认为就像您正在处理功能分支一样困难，您必须为每个引用的子模块创建一个功能分支。它会产生很多开销。

选项 #2 似乎更容易处理分支，但是，如果项目中有大量开发人员，您可能会遇到相当多的合并冲突，尤其是在处理`.csproj`文件时。

其他 .NET 开发人员如何使用各种解决方案管理他们的 Git 存储库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:49:38.793

git 存储库应包含所需的一切。也就是说，克隆存储库应该降低使用它所需的一切。

也就是说，如果项目足够独立，可以独立存在；给他们一个自己的仓库。然后可以将它们作为子模块（如果在处理解决方案时需要代码）或作为编译的 dll（如果只需要功能）引入解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:02:16.483

我们将所有东西都放在一个像这样设置的存储库中

```
主文件夹 --> 这里的所有解决方案文件
  -子文件夹 --> 所有可执行项目
  -子文件夹 --> 所有库项目
  - 子文件夹 --> 所有 3rd 方 DLL

```

因此，如果有人正在更改库项目，则引用它的每个解决方案都指向同一个地方。一切都在一起并井井有条，我想这会导致一些额外的开销，因为您总是在提取您可能永远不会使用的代码，但我倾向于喜欢这种方法。

# c++ - boost::program_options：发现未记录的“*”功能，现在需要写入地图的自定义验证器

> ID：14384112
> 
> 赞同：22
> 
> 时间：2013-01-17T16:54:49.623
> 
> 标签：c++, boost, boost-program-options

我最近发现了 的一个未记录的特性`boost::program_options`，即它接受“*”作为特殊通配符，允许声明一组具有相同前缀的选项，如下所示：

```
configOptions.add_options()
    ("item_*", value<int>(), "items"); 
```

此声明按预期工作并认可`item_1`,`item_3`等，同时拒绝未知选项。那么现在的问题是，我如何编写一个自定义验证函数，该函数将使用选项键及其值填充地图，如下所示：

```
map<string, int> itemsMap;
options_description items("items options");
    items.add_options()
        ("item_*",value<map<string, int>>(&itemsMap)->multitoken(), "items")
    ; 
```

我的问题是 - 如何从 validate() 函数中获取正在验证的选项的密钥？

```
template <typename T> void validate(boost::any& v, const std::vector<std::string>& values, map<string, T> *, int) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T13:46:42.727

您需要遍历所有参数来识别哪个具有正确的前缀或编写自定义解析器。这两个选项的说明都在以下链接的正确答案中：

[boost::program_options：带有固定和可变标记的参数？](https://stackoverflow.com/questions/15554842/boostprogram-options-parameters-with-a-fixed-and-a-variable-token)

迭代选项似乎更容易理解（实现和阅读），但自定义解析器似乎也不错（尽管我从未使用过它）。

# mysql - 从 mysql 中的触发器调用存储的 proc/fun

> ID：14384124
> 
> 赞同：0
> 
> 时间：2013-01-17T16:55:13.737
> 
> 标签：mysql, stored-procedures, triggers

我在 MySQL 中编写了一个触发器和 SP，两者分别工作正常。当我从触发器调用 SP 时，它会引发错误。

> 错误 1442 (HY000)：无法更新存储函数/触发器中的表“名称”，因为它已被调用此存储函数/触发器的语句使用。

触发器是`BEFORE UPDATE ON SP`更新同一个表，但不同的行。

# c++ - Qt 4.8 - 在更新 QGraphicsScene 时显示“加载”动画

> ID：14384125
> 
> 赞同：1
> 
> 时间：2013-01-17T16:55:16.247
> 
> 标签：c++, multithreading, qt, qt4, qgraphicsscene

我正在使用 Qt 4.8。

我有一个大的 QGraphicsScene 需要更新（附加新的 QGraphicsObjects 需要 3 秒）。我想向用户显示更新正在进行中。特别是我考虑在屏幕上显示一个加载轮，而不是在更新结束时将其移除。

这里的问题是我应该让轮子在场景更新的同一线程中可见，然后不可见。这是因为：

*   不允许在 gui 线程之外编辑图形属性。

*   我不能在“工作线程”中移动计算，因为它涉及图形。

这导致轮子根本不显示，因为当视图更新时，轮子已经设置为可见，然后再次不可见：

```
showWheel();
/*... big computation involving graphics ...*/
hideWheel();
/*... here GUI is updated, thus the wheel doesn't show up...*/ 
```

有什么我可以做的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:04:45.597

大概你有一些触发计算的事件。与其使用它来触发计算，不如使用它来触发一个`scheduleComputation()`槽。`scheduleComputation`插槽可以调用`showWheel()`，然后将插槽安排到`doComputation()`下一个事件队列的末尾，之后它将返回。这将允许事件循环运行并显示您的轮子，然后执行计算。当计算结束时，您可以调用`hideWheel()`并返回事件循环。

像这样的东西：

```
void scheduleComputation()
{
    computeScheduler = new QTimer(this);
    computeScheduler->setInterval(0);
    connect(computeScheduler,SIGNAL(timeout()),this,SLOT(doComputation()));
    showWheel();
}

void doComputation()
{
    //...Computation Here...
    hideWheel();
} 
```

避免长时间阻塞 UI 线程也是一个好主意。这可以通过将长时间运行的代码拆分为可由计时器触发的较小部分来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:07:22.657

在“大计算”中，您可以定期让事件处理程序运行一段时间。

# c++ - 在 C++ 中返回索引和存储字符串计数的数据结构

> ID：14384127
> 
> 赞同：1
> 
> 时间：2013-01-17T16:55:19.913
> 
> 标签：c++, xml, data-structures, xlsx

我正在构建一个 xlsx 构建器，并且我有一系列字符串要保存在电子表格（xml 文件）中。可能存在重复，所以我想将字符串存储在地图中并增加它们的计数。然后，我可以将它们所在的索引存储在地图中，而不是存储字符串，并将字符串存储在另一个 xml 文件中。但是使用 std::map 检索给定字符串的索引是 O(n)。有没有一种数据结构可以更快地完成这个任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:03:07.677

除非您的“单独文件”需要按字典顺序排列，否则不要使用地图中的索引，请明确存储索引。

例如 a `map<string, gubbins>`, with `struct gubbins { size_t count; size_t index; }`。

每当您向地图插入新键时，为其索引提供递增计数器的“下一个”值。

使用的索引值的范围是连续的*，除非*您稍后出现并减少引用计数，然后在它达到零时从映射中删除条目。在这种情况下，您可以对索引进行“碎片整理”，但如果您已经使用索引来识别其他地方的字符串，当然不能。

写入字符串文件的操作需要先按索引排序。您可以在线性时间内做到这一点——创建一个足够大的数组，然后遍历地图，将每个字符串存储在正确的索引处。或者您可以随时构建字符串文件，在将每个字符串添加到地图时添加它。

可能有可能用 right 完成整个事情`boost:multi_index`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:04:06.583

如果您需要按排序顺序存储字符串，您可能需要查看[顺序统计树](http://en.wikipedia.org/wiki/Order_statistic_tree)数据结构，它是一个平衡的二叉搜索树，增加了额外的信息，可以有效地确定树中的第 n 个元素（在O(log n) 时间）。这为您提供了 的所有原始功能`std::map`，以及随机访问。

C++ 标准库中没有顺序统计树的标准实现，但是快速的 Google 搜索应该会出现一些。

希望这可以帮助！

# xml - 在 chrome 中访问未转换的 xml

> ID：14384129
> 
> 赞同：0
> 
> 时间：2013-01-17T16:55:22.633
> 
> 标签：xml, google-chrome, xslt

我们公司的几乎每台服务器都有一个标准的 xml 格式，不用说，这是相当可怕的。我有一个 xslt 样式表，可以更轻松地获取相关信息，但由于许多因素，部署链接到 xml 中的样式表是不切实际的。我正在开发一个 chrome 扩展，以在任何与 url 模式匹配的页面上执行转换。

我的问题是，当您在 chrome 中加载 xml 文档时，浏览器会尝试提供帮助并将其转换为漂亮的 html 格式。除非我可以从我的内容脚本访问源 xml，否则我无法应用我的 xslt。我试图从 url 中获取原始源，并且在扩展程序中遇到了权限问题。

我唯一的另一个想法是使用 jquery 并从他们的 html 中手动解析出来，但这看起来有点痛苦，而且我已经有一个有效的 xsl 可以满足我的一切需求。

有没有更好的方法可以让源 xml 对其进行转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:40:53.503

如果无法插入处理指令，可以使用 JavaScript 触发转换：

```
function loadXML(fileName,mime) {
  var xmlHttpRequest = new XMLHttpRequest();
  xmlHttpRequest.open("GET",fileName,false);
  if(mime) xmlHttpRequest.overrideMimeType(mime);
  xmlHttpRequest.send("");
  return xmlHttpRequest.responseXML;
}

function transformDocument(url) {
  var xsltProcessor = new XSLTProcessor();
  xsltProcessor.importStylesheet(loadXML('test.xsl','application/xslt+xml'));
  return xsltProcessor.transformToDocument(loadXML(url),document);
} 
```

`transformDocument()`将返回一个 HTML 元素，然后您可以显示该元素。我看到几个选项：

*   将其放入 iframe 中。
*   用转换后的文档替换当前文档（例如通过替换头部和正文）
*   从转换后的文档中获取一些 div 并将其插入到当前文档中。
*   将其作为数据 URL 打开。
*   ...

# highcharts - 散点图/线图中的单个点设置

> ID：14384133
> 
> 赞同：0
> 
> 时间：2013-01-17T16:55:31.743
> 
> 标签：highcharts, scatter-plot, linechart

在散点 HighCharts 图中，我只想为我的系列的某些数据点设置一些属性。这是一个玩具示例：

```
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container'
            },
            series: [{
                type: 'line',
              data: [[1,1],
                     {x:3,y:2,marker:{enabled:false}},
            [4,1]]
            }]
        });
    });
}); 
```

我需要（按优先级降序）第二点不具备：

1.  标记（已经在我的代码中完成，正在工作）；
2.  工具提示（尝试但没有成功，我不知道该怎么做）
3.  来自上一点的线（尝试但没有成功，我不知道如何工作）

这是一个[jfiddle](http://jsfiddle.net/8U8nx/)版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:27:59.283

对于您的第二点，根据类似的答案即兴创作：

> [在 Highcharts 中的某些点上禁用工具提示](https://stackoverflow.com/questions/8785886/disable-tooltip-on-certain-points-in-highcharts)

```
tooltip: {
    formatter: function() {
        if (this.point.x != 1) { //enable for each point except the second point
            return this.x;
        }
        else return false;
    }
} 
```

对于您的第三点，您可能会尝试使用技巧。如果将 y 值设置为 null，则该点将不会显示在该行中。所以画你的线，并输入两个具有空 y 值的数据，以在图表上创建一个孤独的点。

> 这是一个例子：http: [//jsfiddle.net/8U8nx/14/](http://jsfiddle.net/8U8nx/14/)

# java - 使用 Apache POI 使用数组列表设置单元格值

> ID：14384134
> 
> 赞同：0
> 
> 时间：2013-01-17T16:55:31.733
> 
> 标签：java, web-applications, arraylist, apache-poi

我正在尝试使用 Apache POI 库创建一个 Excel 文件。在这个文件中，我想创建一个包含数据库表中数据的表。此表的内容保存在包含模型的 ArrayList 对象中。
我的问题是：如何设置具有数组列表的单元格的值？

# php - HTTP GET：检查 var 是否为空

> ID：14384135
> 
> 赞同：0
> 
> 时间：2013-01-17T16:55:32.263
> 
> 标签：php, variables, get, isset

我有一个表单，在提交表单时输出以下 http 字符串：

> Field109=E01&Field112=E05&Field209=输入+消息+这里%21&Field110=&Field111=&Field113=&Field114=&Field115=&Field116=&Field117=&Field118=&Field119=&Field120=&CreatedBy=public&DateCreated=2013-01-145+08%=3A43% 14&IP=98.246.50.81&HandshakeKey=

在我处理提交的 PHP 脚本中，我检查每个字段以查看它是否已设置。问题是，正如您在上面看到的，如果提交时表单中的字段为空，它仍然保留在 HTTP 字符串中并`isset()`认为它已设置并执行我告诉它的处理。

如何检查该字段是否真的为空？例如`Field110`and`Field111`应该为空，但我的 PHP 脚本认为它们已设置。

```
if (isset($_GET["Field110"])) {
    array_push($apnsarray, "E02");
}
if (isset($_GET["Field111"])) {
    array_push($apnsarray, "E03");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T16:56:57.273

采用`empty()`

```
if(!empty($_GET['Field110'])){
    array_push($apnsarray, "E02");
}
// etc... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:57:09.003

> 如何检查该字段是否真的为空？

[`empty()`](http://php.net/empty)

`isset()` *确定变量是否已设置且不为 NULL*。而`empty()`将检查值是否为*空*。

因此，在您的情况下`isset()`，根据上面的定义返回 true。而是`empty()`用于需要值的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:58:25.543

那么，可能的值是多少？如果它可能有一个 0 并且只有一个 0，我会推荐这个：

```
if(isset($_GET['Field110']) && strlen(trim($_GET['Field110']) != 0) {
    // not empty
} 
```

但如果它只包含字母或非 0 的东西：

```
if(!empty($_GET['Field110'])) {
    //not empty
} 
```

这是来自`empty()`文档：

```
The following things are considered to be empty:

"" (an empty string)
0 (0 as an integer)
0.0 (0 as a float)
"0" (0 as a string)
NULL
FALSE
array() (an empty array)
$var; (a variable declared, but without a value) 
```

[空的（）](http://php.net/manual/en/function.empty.php)

# c - 使用 doxygen 的 lint 注释

> ID：14384136
> 
> 赞同：10
> 
> 时间：2013-01-17T16:55:33.843
> 
> 标签：c, documentation, doxygen, lint, comments

对于文档，我们通常必须创建一个附加文档来描述在代码中禁用任何 lint 消息时我们做了什么`(e.g. /* lint --e228)`。它会让它更容易使用`doxygen`（因为我们无论如何都会创建它）。

不过，我无法找到有关如何`doxygen`使用这些**lint**注释的任何解决方案。有人试过这个吗？是否有任何解决方案如何使用`stric '/*lint'`但无论如何将其添加到`doxygen`？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-25T21:52:34.893

这可以通过定义一个宏来扩展为 lint 表达式注释来实现，但在扩展时使宏扩展为不同的注释`doxygen`。

诀窍是使用`-save`PC-lint ^(TM)或 FlexeLint ^(TM)指令：

```
#ifndef LINT_CONTROL
#define LINT_CONTROL(X) /*lint -save X */ //lint X
#endif

int main () {
    int a; LINT_CONTROL(-e530)
    return a != a;
} 
```

然后，在您的`doxygen`配置文件中，您可以启用某些预处理器宏的扩展。特别是，我们可以`LINT_CONTROL`改为扩展为`doxygen`-ated 注释。

```
ENABLE_PREPROCESSING   = YES
MACRO_EXPANSION        = YES
EXPAND_ONLY_PREDEF     = YES
PREDEFINED             = "LINT_CONTROL(X)=//! lint control: X" 
```

或者，如果您有 FlexeLint ^(TM)，那么您可以修改遮蔽源，以便可以使用 doxygen 注释来触发 lint 控制。~~该技术在[Gimpel Software Discussion Forum](http://www.gimpel.com/Discussion.cfm?ThreadID=3673)~~上进行了描述。（这个链接似乎死了，新的讨论论坛似乎不再包含引用的讨论。）

> [PC-lint 和 FlexeLint 是 Gimpel Software 的商标。]

# javascript - JS对象访问

> ID：14384137
> 
> 赞同：1
> 
> 时间：2013-01-17T16:55:36.460
> 
> 标签：javascript

我有一个 js 对象，我试图直接访问它而无需执行以下操作：

```
for(i in data) { obj = data[i] } 
```

有没有更好的方法来访问这个对象而不循环？（我总是有 1 个结果）

这是 console.log(data) 的萤火虫结果：

![在此处输入图像描述](../Images/343f1d4fae0090c736a3e43f5513e100.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:04:29.817

不，您不能在不知道其名称的情况下访问属性（除了使用花哨[的 for-of-loops](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...of)）。要获得该名称，您只能使用[for-in-loop](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)或使用[`Object.keys`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)/枚举属性[`….getOwnPropertyNames`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)。

如果您知道您的对象中始终只有一个键，那么您可能选择了错误的数据结构。

# java - 合金外观和抗锯齿

> ID：14384139
> 
> 赞同：4
> 
> 时间：2013-01-17T16:55:52.323
> 
> 标签：java, swing, look-and-feel, jtextpane, antialiasing

这里有人使用合金外观吗？我正面临一个带有抗锯齿和 JTextComponents 的奇怪错误。Alloy 默认情况下根本不使用抗锯齿，所以我必须通过创建自己的 UI 类来强制它。这在大多数情况下都可以正常工作，但某些字符会对抗锯齿造成严重破坏。

例如，如果将 Alloy 设置为外观，并且我将一些希伯来语文本插入到 JTextComponent 中，例如：שלום, מה שלומך שמי הוא האקזיד'，整个 JTextComponent 突然失去抗锯齿 - 永久。

奇怪的是，我什至没有扩展 AlloyTextPaneUI，而是扩展了 BasicTextPaneUI 来进行抗锯齿，所以我对 Alloy 出现在图片中的位置感到困惑（其他 Look and Feels 似乎工作得很好）。

我很难追踪这个错误......有人遇到同样的问题吗？

这是一个演示问题的简短示例：

```
import com.incors.plaf.alloy.AlloyLookAndFeel;
import com.incors.plaf.alloy.themes.glass.GlassTheme;

import javax.swing.*;
import javax.swing.plaf.ComponentUI;
import javax.swing.plaf.basic.BasicTextPaneUI;
import javax.swing.text.BadLocationException;
import javax.swing.text.StyledDocument;
import java.awt.*;

public class Scrap {

    static {
        // NOTE: You need a license code for Alloy!
        AlloyLookAndFeel.setProperty("alloy.licenseCode", "your license here");

        UIManager.put("TextPaneUI", MyTextPaneUI.class.getName());

        try {
            UIManager.setLookAndFeel(new AlloyLookAndFeel(new GlassTheme()));
        } catch (UnsupportedLookAndFeelException e) {
            e.printStackTrace();
        }

        // With system Look and Feel everything works just fine...
//      try {
//          UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
//      } catch (ClassNotFoundException e) {
//          e.printStackTrace();
//      } catch (InstantiationException e) {
//          e.printStackTrace();
//      } catch (IllegalAccessException e) {
//          e.printStackTrace();
//      } catch (UnsupportedLookAndFeelException e) {
//          e.printStackTrace();
//      }
    }

    public static void main(final String args[]) {
        JTextPane text = new JTextPane();

        text.setFont(new Font("Monospaced", Font.PLAIN, 14));

        StyledDocument doc = text.getStyledDocument();

        try {

            doc.insertString(doc.getLength(), "Here's some regular text. Nice and smooth with anti-aliasing.\n\n", null);

            doc.insertString(doc.getLength(), "Here's some more text Blaa Blaa Blaaa. Lorem ipsum... now try to uncomment the Hebrew text.\n\n", null);

            // Try to uncomment this line and the anti-aliasing breaks for the whole JTextPane
//          doc.insertString(doc.getLength(), "שלום, מה שלומך שמי הוא האקזידן\n\n", null);

            // Here's another strange glyph that breaks the anti-aliasing
//          doc.insertString(doc.getLength(), "ಠ", null);

        } catch (BadLocationException e) {
            e.printStackTrace();
        }

        JFrame frame = new JFrame();

        JScrollPane scroll = new JScrollPane();
        scroll.setViewportView(text);
        scroll.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);

        frame.add(scroll, BorderLayout.CENTER);
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.setSize(600, 300);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static class MyTextPaneUI extends BasicTextPaneUI {

        @Override
        protected void paintSafely(Graphics g) {
            Graphics2D g2 = (Graphics2D) g;
            g2.setRenderingHint(
                            RenderingHints.KEY_TEXT_ANTIALIASING,
                            RenderingHints.VALUE_TEXT_ANTIALIAS_LCD_HRGB);
            super.paintSafely(g);
        }

        public static ComponentUI createUI(JComponent c) {
            return new MyTextPaneUI();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T05:56:18.787

经过一些非常令人沮丧的实验后，我把它修好了。我仍然不确定到底是什么原因造成的，但这就是我修复它的方法。Alloy 的 UIDefaults 中显然缺少/损坏了一个键（我不知道是哪一个）。因此，我将初始外观和感觉中的所有默认值添加到合金属性中。这是一种快速而肮脏的解决方案（我遇到的唯一问题是菜单变得不透明），但它足以满足我的需求。也许其他人也觉得它有帮助。

```
AlloyLookAndFeel laf = new AlloyLookAndFeel(theme) {
    @Override
    public UIDefaults getDefaults() {
        UIDefaults defs = new UIDefaults();

        defs.putAll(UIManager.getLookAndFeelDefaults());

        initClassDefaults(defs);
        initSystemColorDefaults(defs);
        initComponentDefaults(defs);

        defs.put("Menu.opaque", true);

        return defs;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T13:42:36.353

我有同样的问题很长时间了。将“Menu.opaque”属性设置为 true 的建议解决方案确实有助于使文本抗锯齿（奇怪），但它弄乱了我的菜单的外观，我不得不放弃它。

这里真正的问题是Alloy L&F 的支持很差，但根据我的经验，它看起来确实不错并且性能非常好。反编译混淆代码（Alloy Look&Feel v1.4.4）后，我将问题追溯到一种方法：

```
public class AlloyLookAndFeel extends BasicLookAndFeel{
    ...
    private static boolean j = false;
    ...
    public static boolean isTextAntialiasingEnabled()  {
        return j;
    }
    ...
} 
```

我找不到以编程方式更改值的方法，并且无法覆盖静态方法。所以我不得不求助于一些黑客行为：

1.  使用 JD 反编译代码（参见[http://jd.benow.ca/](http://jd.benow.ca/)）。代码被混淆了，所以变量和方法名不是很有意义。
2.  将 com.incors.plaf.alloy.AlloyLookAndFeel 的代码复制到依赖合金 LAF 的项目中（包名必须相同）
3.  更正 j 的值

    `private static boolean j = **true**;`

4.  有一个布尔 fb 变量在反编译后无法访问的小问题，因此用 fbValue 替换所有出现的 fb 并向类添加声明（调试器将帮助您找到当前值，在我的情况下它是错误的）。

    `private static boolean fbVariable = false;`

编译项目后，您应该有文本抗锯齿。这是一个 hack，但这是你必须做的，以保存一个好的，但受到严重支持的库。我希望有人有一个更简单的解决方案。

# login - angularJS动态登录页面

> ID：14384141
> 
> 赞同：0
> 
> 时间：2013-01-17T16:56:03.230
> 
> 标签：login, angularjs

我的代码在这里： http: [//plnkr.co/edit/2WDK0b](http://plnkr.co/edit/2WDK0b)

是否有可能当我输入现有用户名时，“帮助块”范围中的消息会动态变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:01:50.157

只需将现有的检查代码包装在控制器中的函数中即可。喜欢`$scope.checkUsername = function() { //your existing code }`

现在在您的用户名输入上放置`ng-change="checkUsername()"`，然后它将起作用。

在进一步了解之前，请务必阅读 Angular 表单指南中的验证位：http: [//docs.angularjs.org/guide/forms](http://docs.angularjs.org/guide/forms)

这是您的代码工作的小提琴：[http](http://plnkr.co/edit/LwMJGq?p=preview) ://plnkr.co/edit/LwMJGq?p=preview虽然我认为名称检查的逻辑需要一些工作。

# c# - Html 中的正则表达式节点

> ID：14384144
> 
> 赞同：0
> 
> 时间：2013-01-17T16:56:11.850
> 
> 标签：c#, regex

我想在`<>`标志中选择节点一些文本并更改其颜色...

```
MatchCollection begin = Regex.Matches(richXmlBox.Text, @"\<\b.*\>\b");

if (begin != null && begin.Count > 0)
{
    foreach (Match m in begin)
    {
        richXmlBox.Select(m.Index, m.Length);
        richXmlBox.SelectionColor = Color.Crimson;
    }
} 
```

例如，这适用于`sdfsdf<something>asd`

但这不起作用`<something><something>`

# php - Mysqli 查询返回一个空字符串

> ID：14384147
> 
> 赞同：0
> 
> 时间：2013-01-17T16:56:33.883
> 
> 标签：php, mysqli

我正在处理 PHP 中的 mysqli 库似乎没有返回长文本列的问题。我可以使用控制台和 PHPMyAdmin 获取列的值，但 mysqli 只返回一个空字符串。

这是我正在使用的功能：

```
public function greetings_get() {
        $output = array();
        $greetings_query = "SELECT `engagement_data`.`data`, `engagement_users`.`name` FROM `engagements`, `engagement_data`, `engagement_users` WHERE `engagements`.`promo_slug` = 'stod2.hm2013' and `engagements`.`user_fbid` = `engagement_users`.`fbid` and `engagement_data`.`engagement_id` = `engagements`.`id` ORDER BY RAND() LIMIT 0,5";
        $greetings = $this->db_connection->prepare($greetings_query);
        $greetings->execute();
        $greetings->bind_result($gr_data, $gr_name);
        while ($greetings->fetch()) {
                $output[] = array('message' => $gr_data, 'name' => $gr_name);
        }
        return $output;
} 
```

在这种情况下，$gr_data 是一个空字符串，而 $gr_name 返回一个值。——是不是很奇怪？

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:14:17.217

根据 php.net 上的这个[答案](http://php.net/manual/en/mysqli-stmt.store-result.php#99159)，您必须在绑定结果之前使用[mysqli_stmt::store_result](http://php.net/manual/en/mysqli-stmt.store-result.php)

> 当使用 prepare 准备语句来**检索 LOB**时，方法顺序很重要。此外，必须调用方法“store_result()”并以正确的顺序调用。不遵守这一点会导致 PHP/MySQLi 崩溃**或返回错误值**。

这个

```
$greetings->execute();
$greetings->store_result();
$greetings->bind_result($gr_data, $gr_name); 
```

应该修复它。

# mysql - 如何加快将 XML 文件加载到 MySQL 中的速度

> ID：14384149
> 
> 赞同：2
> 
> 时间：2013-01-17T16:56:42.923
> 
> 标签：mysql, xml, performance

我有一个 2Gb XML 文件，我想将它加载到 MySQL 中的单个表中。

记录/行数约为 140,000，但 MYSQL 中 LOAD XML 函数的默认行为似乎偏离了线性时间。

将数据切割成更小的部分，我得到以下性能（在每个 LOAD 之间删除表）

全部是：已删除：0 跳过：0 警告：0

5000 行受影响的记录：5000 4.852 秒

10000 行受影响的记录：10000 20.670 秒

15000 行受影响的记录：15000 80.294 秒

20000 行受影响的记录：20000 202.474 秒

XML 格式良好。我试过了： SET FOREIGN_KEY_CHECKS=0; SET UNIQUE_CHECKS=0；

我能做些什么来在不涉及将其切成十几块的合理时间内加载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:41:15.593

尝试在加载之前删除索引，然后再重建它们。

# c# - 使用泛型实现类型安全的枚举模式

> ID：14384151
> 
> 赞同：10
> 
> 时间：2013-01-17T16:56:50.817
> 
> 标签：c#, design-patterns, generics, enums, type-safety

如何在泛型类上实现类型安全枚举模式？让我们假设它是按照这些思路实现的

```
public class KnownSetting<T>
{
    public readonly static KnownSetting<String> Name = new KnownSetting<String>("name", "Default Name", t => t);
    public readonly static KnownSetting<int> Size = new KnownSetting<String>("size", "25", t => Converter.ToInt32);

    public String Key { get; set; }
    public T DefaultValue { get; set; }
    public Func<String, T> Converter { get; set; }

    private KnownSetting(String key, T defaultValue, Func<String, T> converter)
    {
        Key = key;
        DefaultValue = defaultValue;
        Converter = converter;
    }
} 
```

这种模式的实现是正确的，因为构造函数仍然是私有的，但是当使用这个构造时，它看起来是错误的：

```
public static class Program
{
    public static void main()
    {
        var x = KnownSetting<?>.Name;
    }
} 
```

然后一个选项是将它分成两部分，KnownSetting 容器类和 Setting 实现，但是构造函数的范围不能是私有的，以便从容器内实例化。

如何实现这种模式，以便它的泛型方面对最终用户隐藏，但仍然是强类型的？有没有更合适的模式，或者有更好的实现方式？

**更新** 我添加了第二个示例来说明我确实希望设置的类型是通用的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T07:34:27.010

在使用另一种类型的基类型中创建一个辅助方法并创建一个已知的设置类。您需要 Create 方法，因为基本构造函数是 Setting(string, object, Func)。这也是我引入另一个泛型变量（U）的原因：

```
public class KnownSetting : Setting<object>
{
    private KnownSetting(string key, object defaultValue, Func<string, object> converter) : base(key, defaultValue, converter) { }

    public readonly static Setting<string> Name = Create<string>("name", "Default Name", t => t);
    public readonly static Setting<int> Size = Create<int>("size", 25, t => Convert.ToInt32(t));
}

public class Setting<T>
{
    public string Key { get; set; }
    public T DefaultValue { get; set; }
    public Func<string, T> Converter { get; set; }

    protected static Setting<U> Create<U>(string key, U defaultValue, Func<string, U> converter)
    {
        return new Setting<U>(key, defaultValue, converter);
    }

    protected Setting(string key, T defaultValue, Func<string, T> converter)
    {
        Key = key;
        DefaultValue = defaultValue;
        Converter = converter;
    }
}
public static class Program
{
    static void Main(string[] args)
    {
        var x = KnownSetting.Name;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T18:20:53.723

在新类中声明静态数据：

```
public class KnownSetting
{
    public readonly static KnownSetting<String> Name = new KnownSetting<String>("name", "Default Name", t => t);
    public readonly static KnownSetting<int> Size = new KnownSetting<String>("size", "25", t => Converter.ToInt32);
} 
```

它在 C# 中可以具有相同的名称，因为类名在名称加上泛型类型参数计数上是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:33:36.450

也许我遗漏了一些东西，但为什么不直接使用你的`KnownSetting<T>`类，并从一个新类中对相同的枚举实例进行新的引用呢？就像是：

```
public static class KnownSettings {
  public readonly static KnownSetting<string> Name = KnownSetting<string>.Name;
  public readonly static KnownSetting<int> Size = KnownSetting<int>.Size;
  // etc.
} 
```

然后您可以根据需要使用这些值：

```
var x = KnownSettings.Name; 
```

# c - 当后者关闭时，窗口的句柄会发生什么？

> ID：14384154
> 
> 赞同：3
> 
> 时间：2013-01-17T16:56:58.530
> 
> 标签：c, winapi

我根据传递给我的[EnumWindowsProc](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633498(v=vs.85).aspx)的一组关键字将窗口句柄存储到一个列表中，我将这些关键字与窗口标题（调用 GetWindowsText 的结果）进行比较。

我的[EnumWindows](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497(v=vs.85).aspx)函数在循环中被多次调用，并且我的列表被创建为不多次添加相同的元素。此时，如果在运行时用户关闭了我当前列表中的一个窗口，我希望能够遍历列表并消除关闭窗口的句柄。我不想对列表中的每个句柄都使用 IsWindowVisible，因为我需要知道窗口是否已关闭，并且此函数将为最小化窗口返回 FALSE。

有没有其他方法可以从窗口句柄中知道它指向的窗口是否已关闭？

任何帮助将不胜感激！

PS：我试图将超链接指向所有引用的函数，但我没有足够的声誉。对不起

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:53:27.407

您可以使用[IsWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633528%28v=vs.85%29.aspx)函数来检查句柄是否有效。

请注意，由于可以在窗口关闭后重用句柄，因此您应该验证窗口是否仍然满足初始条件（重新检查其标题、类等）。

# php - 独特的按钮jQuery

> ID：14384157
> 
> 赞同：1
> 
> 时间：2013-01-17T16:57:06.653
> 
> 标签：php, javascript, jquery, css

我想要三个（或更多）普通按钮，我将在三张图片下方使用，只有一个会有“默认”文本，其他按钮会有“设置为默认”文本。

```
<input type="button" id="button1" value="Default" > 

<input type="button"id="button2"  value="Set as default" > 

<input type="button" id="button3"  value="Set as default" > 
```

单击“设置为默认值”时，此按钮的文本应更改为默认值，颜色也应更改..（以前的默认按钮现在将“设置为默认值”）

1.  我如何将 jquery 用于两个以上的按钮？
2.  当我将此发布到 php 时，我怎么知道哪个是默认值？
3.  如果您有任何其他建议/代码示例而不是按钮来选择默认图片，他们非常欢迎

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T17:02:38.323

```
$('input[type="button"]').on('click', function() {
  $('input[type="button"]').val('Set as default');
  $(this).val('Default');
}); 
```

PHP 将通过给它们命名来知道： (button1, 2, 3) - 值将是“默认”

```
<input type="button" id="button1" name="button1" value="Default" > 

<input type="button"id="button2"  name="button2"  value="Set as default" > 

<input type="button" id="button3"  name="button3"  value="Set as default" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:05:01.343

1）您可以将选择器与逗号组合。

```
$("#button1, #button2, #button3").on("click", function(){
  $("#button1, #button2, #button3").val("Set as default");
  $(this).val("Default");
}); 
```

2）您可以添加一个隐藏输入来捕获您需要的任何内容（`<input type='hidden' id='selectedbutton'>`）。

```
$("#button1, #button2, #button3").on("click", function(){
  $("#button1, #button2, #button3").val("Set as default");
  $(this).val("Default");
  $("#selectedbutton").val($(this).attr("id"));
}); 
```

3) 单选按钮是一个不错的选择，因为它们强制只选择一个，并且还可以通知您的服务器。您仍然需要手动更改文本（除非您想使用 CSS）。

ETA：你提到想要控制颜色，也许还有其他风格。我建议您更好地利用类进行格式化和选择：

HTML

```
<input type="button" id="button1" class='btn-set-default btn-is-default' value="Default" > 
<input type="button"id="button2" class='btn-set-default' value="Set as default" >    
<input type="button" id="button3" class='btn-set-default' value="Set as default" > 
```

查询：

```
$(".btn-set-default").on("click", function(){
  $(".btn-set-default").removeClass("btn-is-default").val("Set as default");
  $(this).addClass("btn-is-default").val("Default");
  $("#selectedbutton").val($(this).attr("id"));
}); 
```

CSS

```
.btn-set-default { }
.btn-is-default { color:red; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T17:05:28.613

尝试-

```
$(function(){
    $(":button").click(function(){
      $(":button").prop('value','Set as default');
        $(this).prop('value', 'Default'); 
    });
}); 
```

[http://jsfiddle.net/KDkqL/](http://jsfiddle.net/KDkqL/)

以“默认”值发布的那个是被点击的那个。

# php - 依赖于 IF 语句的排序算法

> ID：14384162
> 
> 赞同：0
> 
> 时间：2013-01-17T16:57:41.987
> 
> 标签：php, mysql, algorithm, sorting

我的表中有一个项目列表，包括字段`votes_up`和`votes_down`其他项目。现在我想根据流行度来订购商品，这是这两个领域的功能。问题是流行度算法取决于 的值`votes_up`。

例如，如果`votes_up`大于 5：

```
popularity= (votes_up/votes_down)*20 
```

如果 votes_up 大于 50：

```
popularity= (votes_up/votes_down)*15 
```

（我只是用这个来解释......实际的算法是不同的）。

现在我该怎么做，因为通常我会在我的查询中做这样的事情：

```
ORDER BY (votes_up/votes_down)*20) 
```

但我现在不能这样做，因为之后发生`ORDER BY`的事情取决于`votes_up`. 我能做到这一点的唯一方法是：

```
if(votes_up >5){
    p = (votes_up/votes_down)*20;
} else if(votes_up > 50){
    p = (votes_up/votes_down)*15;
} 
```

然后在我的查询中我可以拥有`ORDER BY p`.

现在当然这不是有效的 PHP，但我只想解释我的问题。我希望你明白我想要达到的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:01:10.893

您可以使用案例陈述简单地计算您的受欢迎程度，然后根据该陈述进行排序。它可能看起来像这样：

```
SELECT ((votes_up/votes_down)*(CASE WHEN votes_up > 50 THEN 15 WHEN votes_up > 5 THEN 20 ELSE ? END CASE)) as popularity, [ANY OTHER FIELDS]
FROM table
ORDER BY popularity DESC 
```

你从来没有说过对 votes_up <= 5 做了什么，所以我只是`?`为这种情况写了一个，你可以填写空白。

但是请注意，这将无法使用索引进行这种排序，因此如果您希望返回大量行，您的查询可能会执行缓慢。

您可能需要考虑将一个字段添加到存储计算出的流行度值的表中（该值将由应用程序在投票赞成或反对时更新）。然后，您可以索引该字段并获得更优化的排序。

# centos - srpm 规范文件中的问号和感叹号语法

> ID：14384164
> 
> 赞同：6
> 
> 时间：2013-01-17T16:57:43.863
> 
> 标签：centos, rpm, specifications, rpm-spec

我试图了解 Postgres 9.1 rpms 是如何在 CentOS/RHEL 6 上构建的，所以我正在查看[源 rpms](http://yum.postgresql.org/srpms/9.1/redhat/rhel-6-x86_64/)中的规范文件。

以下语法的作用/含义是什么？具体来说，问号和感叹号？

```
%{!?test:%define test 1}
%{!?plpython:%define plpython 1}
%{!?pltcl:%define pltcl 1}
%{!?plperl:%define plperl 1}
%{!?ssl:%define ssl 1}
%{!?intdatetimes:%define intdatetimes 1}
%{!?kerberos:%define kerberos 1}
%{!?nls:%define nls 1}
%{!?xml:%define xml 1}
%{!?pam:%define pam 1}
%{!?disablepgfts:%define disablepgfts 0}
%{!?runselftest:%define runselftest 0}
%{!?uuid:%define uuid 1}
%{!?ldap:%define ldap 1 
```

我知道你可以用 定义一个宏变量`%define <name>[(opts)] <value>`，我相信感叹号是一个逻辑否定运算符。我找不到关于问号的任何信息或上面的例子。似乎在定义宏变量之前进行了某种测试。

[这](http://pastebin.com/NzUvw15X)是规范文件的粘贴。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T20:19:10.827

让我们在这里回顾一个项目：

```
%{!?plpython:%define plpython 1} 
```

在第 102 行，我们还看到：

```
%if %plpython
BuildRequires:  python-devel
%endif 
```

正如您所说，我们知道这是一个宏，也可以通过[Fedora 文档](http://docs.fedoraproject.org/en-US/Fedora_Draft_Documentation/0.1/html/RPM_Guide/ch22s02.html)确认。现在，如果我们将搜索范围扩大到 Fedora 文档，我们会发现[条件宏](http://docs.fedoraproject.org/en-US/Fedora_Draft_Documentation/0.1/html/RPM_Guide/ch22s02s02.html)。这说明了以下内容：

您可以使用特殊语法来测试宏是否存在。例如： %{?macro_to_test: expression} 此语法告诉 RPM 如果 macro_to_test 存在则扩展表达式，否则忽略。前导感叹号 ! 测试宏不存在： %{!?macro_to_test: expression} 在本例中，如果 macro_to_test 宏不存在，则展开表达式。

Fedora 文档提供了答案，如果 plpython 宏不存在，那么

```
%define plython 1 
```

如果您查看第 38 行，您还可以看到：

```
# In this file you can find the default build package list macros.  These can be overridden by defining
# on the rpm command line:
# rpm --define 'packagename 1' .... to force the package to build.
# rpm --define 'packagename 0' .... to force the package NOT to build.
# The base package, the lib package, the devel package, and the server package always get built. 
```

因此，如果您在构建包时没有定义宏（我想这是大多数用户会做的），它将确保 buildrequires 被正确配置为似乎是标准 PostgreSQL 安装。

# javascript - 如何在 Rally API 中指定数据源

> ID：14384166
> 
> 赞同：2
> 
> 时间：2013-01-17T16:57:46.300
> 
> 标签：javascript, rally

我可以在声明数据源时指定我的参数吗？

var rallyDataSource = new rally.sdk.data.RallyDataSource('2004571051', '5022032422', 'false', 'true');

其中**WORKSPACE_OID** =2004571051 **PROJECT_OID** =5022032422

**PROJECT_SCOPING_UP** = 假 **PROJECT_SCOPING_DOWN** =假

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:50:49.187

是的，你是对的。这应该像一个魅力。

我从[文档](http://developer.help.rallydev.com/rally-data-source)中复制了这个以供参考：

```
var rallyDataSource = new rally.sdk.data.RallyDataSource("__WORKSPACE_OID__",
             "__PROJECT_OID__",
             "__PROJECT_SCOPING_UP__",
             "__PROJECT_SCOPING_DOWN__"); 
```

# xml - Magento - 为某些类别设置替代布局

> ID：14384172
> 
> 赞同：1
> 
> 时间：2013-01-17T16:58:09.323
> 
> 标签：xml, magento, templates, layout, categories

我有许多类别需要使用与标准类别布局不同的布局。无需在管理区域的“自定义设计”选项卡中重复 XML 代码的最佳方法是什么？我需要为其执行此操作的每个类别都是一个“品牌”，所以我想这可以用作 magento 识别需要使用替代模板的常用方法？

在这一点上，任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T17:07:29.673

您可以定义自定义布局句柄并在特定类别中调用它。

首先，定义您的布局句柄（例如在主题的 local.xml 中）：

```
<layout>
    <my_awesome_update>
         <block ..../>
    </my_awesome_update>
</layout> 
```

然后，在后端的分类编辑页面中输入“自定义布局更新”：

```
<update handle="my_awesome_update" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:10:16.377

如果您知道类别的 ID，您也可以在 local.xml 布局文件中定义所有更改，如下所示：

```
<layout>
    <CATEGORY_4>
         <!-- updates here -->
    </CATEGORY_4>
</layout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-09T15:54:45.437

另一种选择是使用“页面布局”菜单，尽管它需要一些额外的工作。

[![页面布局示例](../Images/523becbbb32af5044e1e9230900e99f1.png)](https://i.stack.imgur.com/oKE57.png)

首先，创建一个新的扩展来添加布局和观察者（有许多创建扩展的教程；为简洁起见，此处省略）。在您的新扩展`config.xml`文件中（我`Bats_Coreextend`用作参考）：

```
<?xml version="1.0" encoding="UTF-8"?>
    <config>
        <modules>
            <Bats_Coreextend>
                <version>0.1.0</version>
            </Bats_Coreextend>
        </modules>
        <global>
            <events>
                <controller_action_layout_load_before>
                    <observers>
                        <addCategoryLayoutHandle>
                            <class>Bats_Coreextend_Model_Observer</class>
                            <method>addCategoryLayoutHandle</method>
                        </addCategoryLayoutHandle>
                    </observers>
                </controller_action_layout_load_before>
            </events>
            <page>
                <layouts>
                    <alt_category module="page" translate="label">
                        <label>Alt. Category (Desc. at bottom)</label>
                        <template>page/alt-category.phtml</template>
                        <layout_handle>page_alt_category</layout_handle>
                    </alt_category>
                </layouts>
            </page>
        </global>
    </config> 
```

这将创建新布局并允许您在菜单中引用它，如上图所示。我们需要观察者，因为不幸的是，即使设置了页面布局（如上所示），您也无法在 XML 中引用句柄（例如 catalog.xml）

为了解决这个问题，创建观察者函数：

创造`app/code/local/Bats/Coreextend/Model/Observer.php`

在该文件中：

```
<?php

    class Bats_Coreextend_Model_Observer extends Mage_Core_Model_Observer {
        public function addCategoryLayoutHandle(Varien_Event_Observer $observer)
        {
            /** @var Mage_Catalog_Model_Category|null $category */
            $category = Mage::registry('current_category');

            if(!($category instanceof Mage_Catalog_Model_Category)) {
                return;
            }

            if($category->getPageLayout()) {

                /** @var Mage_Core_Model_Layout_Update $update */
                $update = $observer->getEvent()->getLayout()->getUpdate();

                /** NOTE: May want to add an additional 
                  * conditional here as this will also cause the
                  * layout handle to appear on product pages that
                  * are within the category with the alternative 
                  * layout.
                  */

                $update->addHandle($category->getPageLayout());

            }
        }
    } 
```

这会将`alt_category`句柄添加到我们的布局中，以便可以引用它，并且您可以对页面进行必要的更改。

[![使用 alt_category 更新了布局列表](../Images/0b053db808a88a1b943084663a113cd6.png)](https://i.stack.imgur.com/T6I12.jpg)

最后，一定要创建`page/alt-category.phtml`上面提到的模板文件（即 ）。

# wcf - 开发 WCF 服务器配置

> ID：14384175
> 
> 赞同：2
> 
> 时间：2013-01-17T16:58:18.997
> 
> 标签：wcf, testing

我试图想出一种方法来完成某事，但还没有找到我想要的东西。

*   4 位开发人员

*   1 开发网络服务器

*   1 开发 WCF 服务器

*   我们每个人都有自己的网站，用于在使用 IIS6 的一台服务器上进行测试/调试。我们每个人都有自己的端口号，用于区分我们连接的站点。

*   当我们的网站向 WCF 服务器发出请求时，我们的开发网络服务器上的主机文件将其指向我们的开发 WCF 服务器。同样，生产网络服务器的主机文件将其指向我们的生产 WCF 服务器。这样，我们就不必担心在 Visual Studio 中更改服务引用的地址。

*   最近，我们需要多个开发人员同时处理 WCF 代码的多个分支。目前我们必须轮流使用 WCF 服务器。

*   我们希望能够让我们在开发 Web 服务器上的各个网站指向我们的开发 WCF 服务器上的各个 WCF 网站。

*   我尝试了几种我想到的方法，但它们都要求我们更新 Visual Studio 中服务引用中的地址。（目前，如果我们更新/添加服务调用，我们会在将新的 WCF 代码部署到开发站点后将本地计算机的主机文件指向它。）

有没有人有任何想法，或者我可以在哪里找到这种类型的通用配置的方向？我必须假设 Microsoft 为多个开发人员设置了*最佳实践*设置，并为网站和 WCF 站点提供了多个开发环境。

设置要求：

*   我们只获得一个用于网站测试的网络服务器。
*   我们只获得一个用于 WCF 测试的网络服务器。
*   在 WCF 代码上开发时，我们需要一个不需要我们在 Visual Studio 中更新服务引用中的地址的解决方案。

如果情况变得更糟，我们可能不得不考虑更改要求。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:46:20.763

您可以简单地更改每个部署的配置文件中的服务地址。在服务以产生不同客户端代理代码的方式发生更改之前，您无需更改服务引用的地址。

# java - 缓冲阅读器的标记问题

> ID：14384176
> 
> 赞同：0
> 
> 时间：2013-01-17T16:58:22.827
> 
> 标签：java, nullpointerexception, bufferedreader

所以我正在编写一个 java 程序，它应该一直分析来自用户的字符串，直到标准输入结束（直到他们按下 CTRL+D 或输入文件的结尾）。该程序按预期工作，但是当我按 CTRL+D 时，出现空指针异常。这是有问题的代码：

```
 BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    String line = " ";
    while (line != null) {
        line = in.readLine();
        String[] tokens = line.split(" ");
        System.out.println(line); ...... 
```

空指针指向**String[] tokens = line.split(" ");**

看起来代码正在尝试标记为空的行。但我认为我以一种从不尝试标记空行的方式编写它。谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:00:10.997

将您的 while 循环更改为： -

```
while ((line = in.readLine())!= null) { 
```

并删除其中的第一行。

请注意，您正在读取循环内的行，然后稍后进行测试。所以，你会`NPE`在文件的末尾得到一个。

此外，如果您在阅读后对文件进行标记，我`Scanner`确实更喜欢使用类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:00:50.790

问题是这`while`是一个预检查条件。在循环开始时，`line`不为空。你应该使用 a`do-while`代替。

```
while (line != null) {
    line = in.readLine(); // in the loop, but in.readLine() returns null
    String[] tokens = line.split(" "); // OH SHI- LINE IS NULL
    System.out.println(line); 
```

# firefox - 编译示例 firefox 协议处理程序 gecko SDK 3.6 时出错

> ID：14384179
> 
> 赞同：0
> 
> 时间：2013-01-17T16:58:31.473
> 
> 标签：firefox, firefox-addon, protocol-handler, geckosdk

**尝试编译 firefox 协议处理程序的示例实现时出现以下错误。我在 Windows Vista 上使用 Gecko SDK 3.6、Visual Studio 2010。我认为该示例非常旧，并且不是使用 SDK 3.6 版构建的。**

1>nsKeywordModule.obj : 错误 LNK2019: 引用了无法解析的外部符号“__declspec(dllimport) unsigned int __cdecl NS_NewGenericModule2(struct nsModuleInfo const *,class nsIModule * *)”(_ *imp* ?NS_NewGenericModule2@@YAIPBUnsModuleInfo@@PAPAVnsIModule@@@Z)在函数 _NSGetModule

1>nsKeywordProtocolHandler.obj : 错误 LNK2019: 引用了无法解析的外部符号“__declspec(dllimport) public: __thiscall nsFixedCString::nsFixedCString(char *,unsigned int,unsigned int)” (_ *imp* ??0nsFixedCString@@QAE@PADII@Z)在函数“公共：__thiscall nsCAutoString::nsCAutoString(void)”(??0nsCAutoString@@QAE@XZ)

1>nsKeywordProtocolHandler.obj : 错误 LNK2001: 无法解析的外部符号“__declspec(dllimport) public: static char * nsCharTraits::sEmptyBuffer” (_ *imp* ?sEmptyBuffer@?$nsCharTraits@D@@2PADA)

1>nsKeywordProtocolHandler.obj : 错误 LNK2019: 未解析的外部符号“__declspec(dllimport) public: __thiscall nsACString_internal::nsACString_internal(char *,unsigned int,unsigned int)” (_ *imp* ??0nsACString_internal@@QAE@PADII@Z) 引用在函数“受保护：__thiscall nsCString::nsCString(char *,unsigned int,unsigned int)”(??0nsCString@@IAE@PADII@Z)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T00:14:12.780

我相信该示例使用完整的 mozilla 实现来获取头文件。现在，由于我们有 gecko sdk，所有内部链接都必须迁移以使用冻结链接，因为 gecko sdk 3.6 不支持内部链接。

所以在我的情况下，我将*nsAString.h*更改为*nsStringAPI.h*并遵循其他[准则](https://developer.mozilla.org/en-US/docs/Migrating_from_Internal_Linkage_to_Frozen_Linkage)

# asp.net-mvc-4 - 在剑道网格 ASP.NET MVC ClientTemplate 中转义 +（加号）符号

> ID：14384183
> 
> 赞同：8
> 
> 时间：2013-01-17T16:58:56.380
> 
> 标签：asp.net-mvc-4, kendo-ui

我在为 Kendo 网格中的列定义 ASP.NET MVC ClientTemplate 时遇到问题，因为“+”号已被删除，这会导致客户端生成的模板因语法错误而失败。

我的客户模板是：

```
c.Template(@<text></text>).ClientTemplate("#='Hello' + Name#") 
```

但是，在客户端中，这会简化为：

```
template: "#='Hello'   Name#" 
```

即加号已呈现为空格（我猜类似于 URL 编码）。如果我直接从 JS 使用，该模板可以完美运行（请参阅此[JSBin](http://jsbin.com/eyovaz/2/edit)）。

有谁知道我如何逃避 + 号以便在 ClientTemplate 中使用它？

我尝试使用 ' `\\+`' 转义（呈现为 ' `\`'）、' `\+`'（无效的 C#）、`&#43;`（与 ' 相同`+`，尽管其他诸如`&#44;`' 工作正常）。

有任何想法吗？谢谢。

作为参考，我正在使用 Razor 标记和 Q2 2012 Kendo 版本（不能使用 Q3，因为我们从 Telerik 升级时受 jQuery 版本的限制）

**注意：**在有人问我为什么要这样做之前，我的 ClientTemplate 实际上更复杂，但这是一个说明问题的简化示例 :-)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-23T16:36:09.310

我检查了源代码¹`HttpUtility.UrlDecode` ，MVC 包装器在将它们呈现给 JS 之前调用所有模板。因此，要转义您的 + 号（或任何其他保留的 URL 字符），请使用[percent encoding](http://en.wikipedia.org/wiki/Percent-encoding)。在这种情况下`%2B`。

```
c.Template(@<text></text>).ClientTemplate("#='Hello' %2B Name#") 
```

¹ v2013.3，src\Kendo.Mvc\Kendo.Mvc\UI\Grid\Columns\GridColumnBase.cs，第 135 行。我怀疑这是一个错误，他们打算调用`HttpUtility.UrlEncode`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T09:36:12.160

找到了一个解决方案（可能更多的解决方法）。我没有编写内联 JavaScript，而是将我的代码移动到一个单独的 JS 函数并从模板代码中调用它，例如：

```
#=myFunctionToDoComplicatedStuff(Name)# 
```

老实说，出于可测试性、重用和一般良好实践的原因，这可能是无论如何都应该采用的方法。不过对于一些琐碎的事情来说有点烦人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-19T17:12:40.200

如果您只需要一个简单的解决方案来在您的 ClientTemplate 中进行连接以避免加号的编码问题，您可以使用 javascript concat 函数，如下所示：

```
c.Template(@<text></text>).ClientTemplate("#='Hello'.concat(Name)#") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T17:03:43.107

您是否尝试过将算术运算并将其放在引号之外，如下所示：

`c.Template(@<text></text>).ClientTemplate("#='Hello'" + "Name#")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T23:25:16.960

对于它的价值，我只是遇到了这个问题并通过减去一个负值来解决它。如：

```
kendo.parseFloat(Amount)  - -kendo.parseFloat(Tip) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-17T12:58:02.663

我通过使用[替代加号](http://www.fileformat.info/info/unicode/char/2795/index.htm)找到了解决方案。

`c.Template(@<text></text>).ClientTemplate("#='Hello' (<span style=\\'font-size: 0.6em\\'>&#10133;</span>{ Name#")`

这将导致...

```
template: "#='Hello + Name#" 
```

# android - 我们在尝试向应用用户发送定期消息时遇到问题

> ID：14384185
> 
> 赞同：0
> 
> 时间：2013-01-17T16:58:57.710
> 
> 标签：android, android-intent

我在跟踪之类的计时器上设置了通知，仅每 20 秒重复一次。

它在第一次迭代期间显示通知，并且日志记录显示它每 20 秒通过一次代码，但在第一次之后通知在手机上不可见。不知道为什么，有什么想法吗？

```
NotificationManager notificationManager = (NotificationManager)getBaseContext().getSystemService(Context.NOTIFICATION_SERVICE);
Notification notification = new Notification(R.drawable.ic_launcher, "App is running on this Phone. ", 1);

String title = "App";

Intent notificationIntent = new Intent(getBaseContext(), MyActivity.class);
// set intent so it does not start a new activity  
notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);

PendingIntent intent2 = PendingIntent.getActivity(getBaseContext(), 0,notificationIntent, 0);

notification.setLatestEventInfo(getBaseContext(), title, "App is running on this Phone. ", intent2);
//notification.flags |= Notification.FLAG_AUTO_CANCEL;
notification.flags |= Notification.FLAG_ONGOING_EVENT;

notificationManager.notify(0, notification);

Log.e("APP_DEBUG: doNotify finished", "APP_DEBUG: doNotify finished"); 
```

# sqlite - SQLite如何从其他表中删除所有连接的行？

> ID：14384187
> 
> 赞同：0
> 
> 时间：2013-01-17T16:59:09.587
> 
> 标签：sqlite

我有以下问题。我有三个表，TABLE_1、TABLE_2 和 TABLE_3。

TABLE_1 和 TABLE_2 之间是 am:n 关系，因此有一个连接表，我们称之为 TABLE_1_2。

TABLE_2 和 TABLE_3 之间是 am:n 关系，因此有一个连接表，我们称之为 TABLE_2_3。

如果我现在从 TABLE_1 中删除一行，我希望其他表 connecte 中的所有行也将被删除。我该如何处理？我读到 sqlite 不支持删除语句的连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:25:14.840

在 MS SQL 中，这可以通过在该列上添加 ON DELETE CASCADE CONSTRAINT 来更改 table1 和相应的列。但是在 SQLite 中没有 ALTER COLUMN 并且 ALTER TABLE 的功能也比 MS SQL 少得多。这就是为什么你可能不得不

*   将 table1 重命名为 table3
*   使用 ON DELETE CASCADE CONSTRAINT 和您已经使用的所有其他约束创建一个新表。
*   将旧表的内容复制到新表中。
*   删除旧表

另请参阅[类似主题](https://stackoverflow.com/questions/4007014/alter-column-in-sqlit)。

# xml - 当存在属性数据时，为什么 xpath 不会拾取节点？

> ID：14384188
> 
> 赞同：1
> 
> 时间：2013-01-17T16:59:09.403
> 
> 标签：xml, xslt, xslt-2.0

谁能向我解释为什么以下xslt：

```
<xsl:if test="EventDocument"> 
```

不拾取这个 xml 标签？

```
<EventDocument xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.itron.com/ItronInternalXsd/1.0/"> 
```

当我从标签中删除属性时它会起作用，这对我来说毫无意义。

IE 当我将输入修改为时，上述测试通过：

```
<EventDocument> 
```

我正在使用 xslt 2.0 (saxon parser) 在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:18:32.083

默认情况下，XPath 表达式中不带前缀的元素名称是指*没有命名空间*的元素，因此表达式`EventDocument`选择具有本地名称“EventDocument”且没有命名空间的元素。这

```
<EventDocument ... xmlns="http://www.itron.com/ItronInternalXsd/1.0/"> 
```

元素与此模式不匹配，因为它在`http://www.itron.com/ItronInternalXsd/1.0/`命名空间中。

你有两个选择，要么

1.  将该命名空间绑定到*stylesheet 中*的前缀，然后使用 XPath 表达式中的前缀，或者
2.  （因为你说你在 XSLT 2.0 中）使用[`xpath-default-namespace`](http://www.w3.org/TR/xslt20/#unprefixed-qnames)

示例 1

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
       xmlns:itron="http://www.itron.com/ItronInternalXsd/1.0/"
       version="2.0">

  <xsl:template match="itron:example">
    <xsl:if test="itron:EventDocument">....</xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

示例 2

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
       xpath-default-namespace="http://www.itron.com/ItronInternalXsd/1.0/"
       version="2.0">

  <xsl:template match="example">
    <xsl:if test="EventDocument">....</xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

我个人的偏好是选项 1，基于“最小意外原则”，任何人都必须在未来维护样式表（包括原作者，在休息几个月后回到代码......）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:06:09.627

`xmlns`是“保留属性” - 它是命名空间前缀到完整节点命名空间的映射定义。XML 中的“ xmlns [”是什么意思？](https://stackoverflow.com/questions/1181888/what-does-xmlns-in-xml-mean/1181936#1181936)

即，在您的情况下节点的实际名称是`"http://www.itron.com/ItronInternalXsd/1.0/" EventDocument`，但您尝试选择`"" EventDocument`（名称为“EventDocument”且名称空间为空的节点）。

根据您需要的 XPath 引擎

*   将命名空间前缀的映射传递给命名空间
*   对命名空间和节点名称使用显式匹配。`*[namespace-uri()="http://www.itron.com/ItronInternalXsd/1.0/" and local-name()=="EventDocument"]`
*   作弊，只匹配节点名称`*[local-name()=="EventDocument"]`

（`local-name`并`namespace-uri`在[http://www.w3.org/TR/xpath/#section-Node-Set-Functions](http://www.w3.org/TR/xpath/#section-Node-Set-Functions)中介绍）。

# java - 初始化后如何在 Spring Bean 中获取列表值？

> ID：14384195
> 
> 赞同：0
> 
> 时间：2013-01-17T16:59:34.903
> 
> 标签：java, netbeans, properties

可以说我有很多这样的bean属性：

```
<property name="posture">
        <list>
            <value>Lordosis</value>
            <value>Kyphosis</value>
            <value>Flat-Back</value>
            <value>Sway-Back</value>
            <value>Scoliosis</value>
        </list>
    </property> 
```

在这个bean初始化之后。您将如何获取有关这些属性的信息？例如，每个属性内的列表长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:17:48.777

我是stackoverflow的新手，所以放轻松。但我认为这应该可以解决问题。
在您的主控制器或主方法等中，按如下方式加载和注入 bean。在示例中，context.xml 是涉及 bean 的 xml 文档。class 是 bean 引用的类

```
ApplicationContext context = new ClassPathXmlApplicationContext("context.xml");
Class class = (Class) context.getBean("beanName");
    List list = class.getPosture(); 
```

然后像引用任何其他列表一样引用它。希望这能回答你的问题。

# xpath - Xpath 表达式来获取直接和非叶子的孩子

> ID：14384196
> 
> 赞同：1
> 
> 时间：2013-01-17T16:59:36.297
> 
> 标签：xpath

我想要一个 xpath 表达式来获取节点的所有直接和非叶子节点。

当我为这样的 XML 树运行表达式时：

```
<root>
<attribute1>a</attribute1>
<attribute2>b</attribute2>
<attribute3>c</attribute3>  
<ElementA>
    <ElementB>
        <ElementC>AC</ElementC>
    </ElementB>
</ElementA>
<ElementX>
    <ElementB1>
        <ElementC1>C1</ElementC1>
    </ElementB1>
</ElementX>
<Other>
    <ElementB2>B2</ElementB2>
</Other>
<NewOne>
    <ElementB3>
        <ElementC3>
            <ElementC4>C4</ElementC4>
        </ElementC3>
    </ElementB3>
</NewOne>
 </root> 
```

我应该得到 ElementA、ElementX、Other、NewOne。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T17:07:43.710

这将是：

```
/root/*[*] 
```

（谓词是为了确保所选节点至少有一个孩子）

# java - Android - Java 服务器还是 Servlet？

> ID：14384197
> 
> 赞同：0
> 
> 时间：2013-01-17T16:59:38.630
> 
> 标签：java, android, servlets, java-server

我正在为大学的一个项目创建一个 Android 应用程序。

我将在大学服务器上托管几个数据库（我们有一个 Web 开发服务器）。

我打算创建一个 Java 服务器，但是，由于大学的防火墙和其他安全机制，当托管在大学上时，不允许远程连接（来自智能手机）。我正在学习使用 Java 进行 Web 开发的整个过程。

我希望能够使用 Web 服务器来处理来自手机应用程序的请求，从数据库中获取和操作数据，然后将回复发送回手机。

我可以用 servlet 做到这一点吗？并将其托管在 Web 开发服务器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:07:45.337

您可以在服务器端使用几乎任何您喜欢的技术——甚至是不起眼的 CGI 脚本。所以是的，servlet 可以工作。与大多数框架一样，java 有自己的应用程序服务器（在 LAMP 世界中是 tomcat），它可以连接到普通网络服务器：如果网络服务器是 apache，通常的接口机制是 mod_jk。

您是否能够将其部署在 Web 开发服务器上，这在很大程度上取决于平台；接受的程序，以及您与系统管理员的关系；-)。如果它是 Linux/unix 平台，机会对您有利，如果不是，请在内部查询。

干杯

# oop - “适用于对象的操作”/“对象上的操作”是什么意思？

> ID：14384198
> 
> 赞同：0
> 
> 时间：2013-01-17T16:59:49.910
> 
> 标签：oop

我大部分时间都对 OOP（继承）中的术语感到困惑。所以让我今天结束我的战争:)

考虑（与语言无关的）代码：

```
class rectangle {
...
  void changeLength(int);
  void changeWidth(int);
...
}

class square : public rectangle { ... }

int calculateArea(rectangle){ ... } 
```

**现在，当xyz说任何适用（或适用于） on`rectangle`的操作也适用于`square``calculateArea`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:08:45.517

当 xyz 说由 a 提供的任何操作也由 a*提供*`rectangle`时*，*他`suqare`指的是所有三个操作。`square`提供和。`calculateArea`_`changeLength(ing)``changeWidth(int)`

当 xyz 说任何*适用*于 a`rectangle`的操作也*适用*于 a`square`时，他说的是`calculateArea(rectangle)`也可以称为传入 a 的实例的事实`square`。`calculateArea`然后它本身可以调用该类的公共方法。如果子类中没有覆盖这些方法，它将执行超类的方法。

另见[维基百科：继承（计算机科学）](http://en.wikipedia.org/wiki/Inheritance_%28computer_science%29)

请务必阅读 SLaks 提到的关于[圆椭圆问题](http://en.wikipedia.org/wiki/Circle-ellipse_problem)的 Wikipedia 文章，该文章解决了该原则的一些主要问题。

# javascript - 带有 JQuery 修复的内容旋转器：如何滚动每个缩略图而不设置？

> ID：14384200
> 
> 赞同：0
> 
> 时间：2013-01-17T17:00:01.317
> 
> 标签：javascript, jquery, css, rotation, slider

[http://tympanus.net/Development/ContentRotator/example2.html](http://tympanus.net/Development/ContentRotator/example2.html)

当前，此内容滑块可让您在单击箭头时每 4 个缩略图（一组）滚动一次。我怎样才能使单击箭头移动到下一个缩略图上？

此外，它目前处于自动播放状态，但一旦您单击缩略图，它就会停止。即使被点击打断，如何让它继续自动播放？

这是教程页面：[http ://tympanus.net/codrops/2011/07/29/content-rotator/](http://tympanus.net/codrops/2011/07/29/content-rotator/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T01:10:48.930

滑块的脚本可以在这里找到：http: [//tympanus.net/Development/ContentRotator/js/jquery.crotator.js](http://tympanus.net/Development/ContentRotator/js/jquery.crotator.js)

它不是一个写得很好的插件，不幸的是脚本本身不允许自定义（即你不能传入选项列表）。没有选项可以防止它在交互时停止。要实现您想要的，您需要编辑代码。

我查看了代码，只要变量 config.slideshow = true，滑块就会继续工作。但是，有许多事件绑定具有无条件地将值设置为 false 的代码。例如

```
$navNext.bind('click.crotator', function(e) {
    ...
    config.slideshow    = false;
    ...
} 
```

您可以删除值设置为 false 的代码，这将解决您的问题。但是，由于您要接触代码，因此最好让插件接受选项。您可以让它允许像“stopOnInteraction”这样的选项，它基本上在事件处理程序中执行以下行：

```
if (config.stopOnInteraction) {
    config.slideshow = false;
} 
```

# java - 为什么我的 while 循环不会破坏任何可以帮助我的人？

> ID：14384206
> 
> 赞同：0
> 
> 时间：2013-01-17T17:00:12.527
> 
> 标签：java, while-loop, md5

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我检查了互联网和谷歌关于如何打破一个while循环并再次检查它，但它似乎没有打破。我失去了希望再尝试

我运行这段代码

```
 int i = 0;

    while( i <= 1236){

        System.out.println(i + " svarer til: "+md5(Integer.toString(i)));

        if(md5kryp == md5(Integer.toString(i))){

            System.out.println("Den dekryperet kode er: " + i);
            System.out.println("Den svare til den indtastede " +md5kryp);
            break;
        }

        i++;
    } 
```

i 系统将其打印出来以检查加密“i”是否与加密的 md5 匹配。它虽然运行它。但不会破坏它。

我在一个点 81dc9bdb52d04dc20036dbd8313ed055（即数字 1234）并且 md5kryp 一直是 81dc9bdb52d04dc20036dbd8313ed055。所以它确实匹配，但它会运行并且不会停止。所以断线不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:00:40.703

`md5kryp == md5(Integer.toString(i))`

使用`equals`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:03:08.190

```
md5kryp == md5(Integer.toString(i) 
```

你不能像那样比较 Java 中的字符串。如果这是同一个对象，则此比较将进行比较（伙计们，如果我错了，请纠正我）。

作为比较，您真正需要的是来自 String-Class 的方法：

```
md5kryp.equals(md5(Integer.toString(i)) 
```

# jquery - 如何将字符串对象转换为真实对象

> ID：14384213
> 
> 赞同：0
> 
> 时间：2013-01-17T17:00:23.447
> 
> 标签：jquery, json, string, hash

也许这个问题应该命名为：*How to animate jQuery-objects through hash*。

但是...如何将字符串转换为对象？我已经尝试过`JSON.parse`，`$.parseJSON`但收到以下错误消息：`Uncaught SyntaxError: Unexpected token t`。

我试图完成的事情：我想通过哈希为 jQuery 对象设置动画。

这是我目前的状态（也许有更好的方法？然后告诉我！）：

```
var params = (location.hash || '#').substr(1).split('|');
$.map(params, function (e) {
    var parts = e.split('=');
    $(parts[0]).animate(parts[1]);
    console.log(typeof parts[1]); // 2 `string`
}); 
```

使用这个[小提琴](http://jsfiddle.net/ARTsinn/b2rru/0/show/)并将这些哈希附加到 url：

`##foo={top:100,left:100}|#bar={top:100,right:100}`

（抱歉，markdown 不允许我将这种散列直接附加到链接中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:10:18.183

JSON 比 JavaScript 更严格一些。对于 JSON 评估，参数必须如下所示：

```
{"top":100,"right":100} 
```

如果你不想这样，你必须求助于好的 ol' `eval()`：

```
var params = eval('(' + parts + ')'); 
```

但是，由于您随后允许通过 URL 执行任意 JS，这可能不是您正在寻找的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:10:33.913

您的 JSON 无效。（将其粘贴到[http://jsonlint.com/](http://jsonlint.com/)并自己查看。）

JSON 比 JavaScript 语法更严格，并且需要引用的对象键：

```
##foo={"top":100,"left":100}|#bar={"top":100,"right":100} 
```

`top`如果你在,`left`和,周围加上引号`right`，那么你可以直接在 JSON 字符串上使用`JSON.parse`or `$.parseJSON`。

# math - 如何在知道起点、终点和半径的圆弧圆周上找到点？

> ID：14384217
> 
> 赞同：5
> 
> 时间：2013-01-17T17:00:37.917
> 
> 标签：math, geometry

请参阅下图以获取我的问题的视觉线索：

![问题](../Images/357e3e07416d1afce015fc5899f2f341.png)

我有点 1 和 2 的坐标。它们是通过使用其他可用信息的公式得出的（请参阅问题：[How to calculate a point on a circle known the radius and center point](https://stackoverflow.com/questions/14359823/how-to-calculate-a-point-on-a-circle-knowing-the-radius-and-center-point)）。

我现在需要做的（与轨道建设分开）是在点 1 和 2 之间用绿色绘制点。

这样做的最佳方法是什么？我必须承认，我的数学技能并不是最好的，而且我确信有一个非常简单的公式（从我的研究中）我无法计算出要使用或如何实现的公式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T17:40:39.027

在我对您的链接问题的回答中（即 x,y 是当前位置，fx,fy 是当前的“前向向量”，lx,ly 是当前的“左向量”）

```
for (i=0; i<=10; i++)
{
  sub_angle=(i/10)*deg2rad(22.5);
  xi=x+285.206*(sin(sub_angle)*fx + (1-cos(sub_angle))*(-lx))
  yi=y+285.206*(sin(sub_angle)*fy + (1-cos(sub_angle))*(-ly))
  // now plot green point at (xi, yi)
} 
```

将产生沿弧线等距分布的 11 个绿点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T17:21:32.143

圆心 (h,k) 和半径 r 的方程为

(x - h)² + (y - k)² = r² 如果有帮助

查看此链接的要点[http://www.analyzemath.com/Calculators/CircleInterCalc.html](http://www.analyzemath.com/Calculators/CircleInterCalc.html)

圆的参数方程是

x = cx + r * cos(a) y = cy + r * sin(a) 其中 r 是半径，cx,cy 是原点，a 是 0..2PI 弧度或 0..360 度的角度。

# javascript - Javascript电话号码验证

> ID：14384226
> 
> 赞同：-3
> 
> 时间：2013-01-17T17:01:11.810
> 
> 标签：javascript, forms, validation

> **可能重复：**
> [电话号码验证 Javascript](https://stackoverflow.com/questions/6195458/phone-number-validation-javascript)

您好我正在使用 javascript 为表单创建验证。我想使用 if 语句检查电话号码字段，以确保它包含一个 4 位数的区号，然后是一个空格，后跟一个 7 位数的号码。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:25:07.057

所以你需要验证类似的东西`1234 1234567`

```
function isValidTel(numberToTest){
    var pattern =/^\d{4} \d{7}$/
    return pattern.test(numberToTest);
} 
```

# java - 如何重新启动 TimerTask

> ID：14384228
> 
> 赞同：1
> 
> 时间：2013-01-17T17:01:16.193
> 
> 标签：java, timer, timertask

我编写了一个任务来通过套接字发送某个 TCP 消息。我有一个包含一堆消息和一些时间戳的文件，所以我将任务编程为 TimerTask，并使用带有第一个消息时间戳的 Timer 安排它。

当它完成时，任务运行方法结束，但它的关联线程仍然存在，它没有被取消。如果我尝试使用新时间重新安排任务，我会收到一个异常，告诉我无法重新安排已安排或取消的任务。

我也在重新安排之前尝试取消它，但显然，正如异常所告诉的那样，它仍然是同样的问题。

我不能用恒定的时间安排任务让它重复自己，因为每条消息都有一个时间而且它不是恒定的。

如何重新安排 TimerTask？顺便说一句，有没有什么方法可以等待任务结束，就像在套接字通信中，当它用 ready 方法阻塞直到消息到达一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:14:51.273

TimerTask 不是为重新调度而设计的，它是管理（单个）线程的 Timer。

使用*一个* [Timer](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)和*多个* `new`TimerTask：

> 与每个 Timer 对象对应的是一个*单独的后台线程*，用于按顺序执行计时器的所有任务。
> 
> 在对 Timer 对象的最后一个实时引用消失并且所有未完成的任务都已完成执行后，*计时器的任务执行线程 [应该] 优雅地终止*（并成为垃圾回收的对象）。
> 
> [从每个[调度](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html#schedule(java.util.TimerTask,%20java.util.Date))方法：]
> 
> *如果 [timerTask] 已被安排或取消、定时器已取消或定时器线程终止，*则引发 IllegalStateException 。**

 *如果单个 Timer 确实产生了许多线程，那么这*将*是一个不太可能的错误：确保确实只有一个 Timer 对象正在使用。

最后一个问题，关于如何将单个事件组合到工作流中，应该是一个单独的帖子。*

# binding - MvvmCross Android Dialog 以编程方式绑定

> ID：14384229
> 
> 赞同：3
> 
> 时间：2013-01-17T17:01:16.500
> 
> 标签：binding, android-dialog, mvvmcross

我想`Cross.UI`在我的 MvvmCross 项目中使用 Android.Dialog ( )。我的第一种方法是使用 AutoViews。由于这个功能还很年轻，替代方案是在触摸和 Droid 平台中实现对话框。

现在我只是为 Droid 做这件事，我需要以编程方式将 ViewModel 的属性绑定到 Dialog 的元素。

我的 View 和 ViewModel 代码如下：

## 看法

```
 public class DialogConfigurationView : MvxBindingDialogActivityView<DialogConfigurationViewModel>
    {
        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);
            DroidResources.Initialise(typeof(Resource.Layout));

            Root = new RootElement()
                {
                    new Section("Private Configuration")
                        {
                            new EntryElement("Name:"),
                            new EntryElement("Description:"),
                            new BooleanElement("Active?")
                        }
                };
        }
    } 
```

## 视图模型

```
 public class DialogConfigurationViewModel : MvxViewModel
    {
        public ConfigurationSet Configuration
        {
            get { return _configuration; }
            set
            {
                if (_configuration != value)
                {
                    _configuration = value;
                    RaisePropertyChanged(() => Configuration);
                }
            }
        }
        private ConfigurationSet _configuration;
    } 
```

我的目标是有一个双向绑定`EntryElement("Name:")`的属性`ViewModel.Configuration.Name`。

谁能帮我这个？这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:21:49.523

我不知道是否有任何不使用自动视图的 monodroid.dialog mvvmcross 样本浮动！

但是......绑定的基本语法应该与 MonoTouch.Dialog 相同 - 例如：

```
 new Section("Contact Info")
                                {
                                    new StringElement("ID", ViewModel.Customer.ID ?? string.Empty),
                                    new EntryElement("Name", "Name").Bind(this, "{'Value':{'Path':'Customer.Name'}}"),
                                    new EntryElement("Website", "Website").Bind(this, "{'Value':{'Path':'Customer.Website'}}"),
                                    new EntryElement("Primary Phone", "Phone").Bind(this, "{'Value':{'Path':'Customer.PrimaryPhone'}}"),
                                },
                            new Section("Primary Address")
                                {
                                    new EntryElement("Address").Bind(this, "{'Value':{'Path':'Customer.PrimaryAddress.Street1'}}"),
                                    new EntryElement("Address2").Bind(this, "{'Value':{'Path':'Customer.PrimaryAddress.Street2'}}"),
                                    new EntryElement("City").Bind(this, "{'Value':{'Path':'Customer.PrimaryAddress.City'}}"),
                                    new EntryElement("State").Bind(this, "{'Value':{'Path':'Customer.PrimaryAddress.State'}}"),
                                    new EntryElement("Zip").Bind(this, "{'Value':{'Path':'Customer.PrimaryAddress.Zip'}}"),
                                }, 
```

来自[https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement.Touch/Views/BaseCustomerEditView.cs](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement.Touch/Views/BaseCustomerEditView.cs)

* * *

请注意，在 MonoTouch 和 MonoDroid 的 MvvmCross 绑定中，文本编辑框之类的默认绑定通常`TwoWay`是默认的。

* * *

如果您确实运行了一个示例，那么请随时将其发布到 gist 或 repo - 或发布有关它的博客 - 看起来我们可以使用一些示例来工作！

# c++ - C++ 在 .txt 文件中查找整数值

> ID：14384230
> 
> 赞同：1
> 
> 时间：2013-01-17T17:01:17.913
> 
> 标签：c++, file, position, integer, edit

我有一个 map.txt 文件：

```
[Map]
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 

[Details]
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 1 1 0 0 0 1 1 0 0 1 1 1 1 1 1 0 0
0 0 1 1 0 0 0 1 1 0 0 1 1 1 1 1 1 0 0
0 0 1 1 0 0 0 1 1 0 0 0 0 1 1 0 0 0 0 
0 0 1 1 0 0 0 1 1 0 0 0 0 1 1 0 0 0 0
0 0 1 1 1 1 1 1 1 0 0 0 0 1 1 0 0 0 0
0 0 1 1 1 1 1 1 1 0 0 0 0 1 1 0 0 0 0
0 0 1 1 0 0 0 1 1 0 0 0 0 1 1 0 0 0 0
0 0 1 1 0 0 0 1 1 0 0 0 0 1 1 0 0 0 0
0 0 1 1 0 0 0 1 1 0 0 1 1 1 1 1 1 0 0
0 0 1 1 0 0 0 1 1 0 0 1 1 1 1 1 1 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 

[Collision]
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 1 1 0 0 0 1 1 0 0 1 1 1 1 1 1 0 0
0 0 1 1 0 0 0 1 1 0 0 1 1 1 1 1 1 0 0
0 0 1 1 0 0 0 1 1 0 0 0 0 1 1 0 0 0 0 
0 0 1 1 0 0 0 1 1 0 0 0 0 1 1 0 0 0 0
0 0 1 1 1 1 1 1 1 0 0 0 0 1 1 0 0 0 0
0 0 1 1 1 1 1 1 1 0 0 0 0 1 1 0 0 0 0
0 0 1 1 0 0 0 1 1 0 0 0 0 1 1 0 0 0 0
0 0 1 1 0 0 0 1 1 0 0 0 0 1 1 0 0 0 0
0 0 1 1 0 0 0 1 1 0 0 1 1 1 1 1 1 0 0
0 0 1 1 0 0 0 1 1 0 0 1 1 1 1 1 1 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
```

我的屏幕上还有一个正方形，用于填充鼠标单击的图块。我遇到的问题是我希望能够通过根据我在地图上单击的位置更改它的值来编辑 map.txt 文件。我需要知道是否有一种方法可以访问映射文件中的某个值，例如数组。因此，例如获取 Collision[5][8] 或 Details[7][17] 等。谢谢！

[http://screencast.com/t/gqH18wgW](http://screencast.com/t/gqH18wgW)（这里显示点击查找位置）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T17:05:38.957

虽然您可以将位置存储在每个单元格的文件中并覆盖单个单元格，但这仅在旧字符串和新字符串长度相同时才有效。

一种更灵活且非常直接的方法是：

*   将文件解析为数组。（请[参阅使用 C++ ifstream 从文本文件中读取整数](https://stackoverflow.com/q/8116808/103167)）
*   每当用户单击时更新数组。
*   完成后，将数组转回文件。

# python - 如何将 stdout 和 stderr 重定向到管道但保持有序

> ID：14384232
> 
> 赞同：2
> 
> 时间：2013-01-17T17:01:29.377
> 
> 标签：python, unix, file-io, posix, pipe

我希望能够从子进程中独立读取标准输出/标准错误（以及我正在引入的新标准日志），对这些流执行某些操作，然后以相同的顺序将它们写入屏幕和日志文件。

因此，例如，如果子进程想对 stdout 说“aa”，然后对 stderr 说“bb”，然后再对 stdout 说“cc”，我想在屏幕上看到“aabbcc”。如果我看到“aaccbb”，我可以忍受（我想这无济于事），但我当然不想看到“aacbbc”（写在一个错误块“cc”中的东西被拆分）。

因此，这是我提出的流程层次结构：

```
(P) parent process
\_ (O) logger for stdout
\_ (E) logger for stderr
\_ (C) monitored process 
```

*   (C) 标准输出使用管道连接到 (O) 进程，该进程写入日志文件和标准输出
*   (C) stderr 使用管道连接到 (E) 写入日志文件和 stderr 的进程

问题在于，根据 (O) 和 (E) 的调度时间，一般输出（由 (O) 和 (E) 的输出组成）可能会出现故障。

有没有办法我可以：

*   有完美的订购吗？我想没有，但也许有一个解决方案......
*   至少确切地知道在 (O) 和 (E) 进程中要读取多少字节，以便我可以将它们整合在一起？

而且，最好使用 python，并且可以跨单元移植。

注意：代码在[github 上](https://github.com/mildred/redo/)。整个想法是捕获被监视进程的确切输出，并将其存储在日志文件中。在从 stderr 或 stdout 写入输出之前写入日志文件标记，例如“\0err\0”或“\0std\0”，这样我以后可以从进程中重新生成准确的输出，同时尊重 stdout 和 stderr。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T20:55:12.107

如果您将 stdout 和 stderr 重定向到同一管道（即`proc1 2>&1 | proc2`），那么您将无法控制管道上的顺序，因为它们现在完全相同。stdout 和 stderr 在操作系统中具有相同的路径。

“proc2”读取数据的顺序仅取决于“proc1”写入它们的顺序。 *该*顺序仅取决于 proc1。

通常，一个进程会像这样缓冲数据：

*   **stdout**被缓冲但如果输出是 TTY 则刷新每个换行符，否则当缓冲区已满时。
*   **stderr**是无缓冲的，并且总是在每次写入时立即刷新。

您可以弄乱python缓冲区或使stdout和stderr完全相同，但也许最简单的方法是尝试`python -u ...`使所有输出都没有缓冲。这样，来自 proc1 的每个写入都应该以相同的顺序出现在 proc2 中。

# registry - Windows Server 2012 中的安装程序注册表访问

> ID：14384235
> 
> 赞同：0
> 
> 时间：2013-01-17T17:01:41.903
> 
> 标签：registry, installshield, custom-action

我在 Installshield Basic MSI 项目中有一个自定义操作，可以从注册表中找出 SQL Server 的版本。

```
RegKey2012 = "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\" & _
             "Microsoft SQL Server\MSSQL11.MSSQLSERVER\"
If RegKeyExists(RegKey2012) Then 
  WScript.StdOut.Write("2012") 
Else 
  WScript.StdOut.Write("2008R2") 
End If 

Function RegKeyExists(Key) 
  Dim oShell, entry 
  On Error Resume Next 
  Set oShell = CreateObject("WScript.Shell") 
  entry = oShell.RegRead(Key) 
  If Err.Number <> 0 Then 
    Err.Clear 
    RegKeyExists = False 
  Else 
    Err.Clear 
    RegKeyExists = True 
  End If 
End Function 
```

安装程序在 Windows 7 机器上运行良好。上面的脚本在 Windows Server 2012 机器上单独运行良好。但是，当我在 Windows Server 2012 上运行安装程序（作为 ADMIN）时，它无法按预期工作，并且错误描述是 - 它找不到注册表项。

有任何想法吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:56:04.903

```
strkey="HKLM\SOFTWARE\Microsoft\Microsoft SQL Server\MSSQL11.MSSQLSERVER\Setup" & Chr(34) &  " /v Version /reg:64"

Set objShell = CreateObject("WScript.Shell")
Set objScriptExec = objShell.Exec("REG QUERY " & Chr(34) & strkey )

strText = objScriptExec.StdOut.ReadAll()
if (strText <> "") then
WScript.echo "2012"
else
WScript.echo "2008R2"
end if 
```

请注意第 1 行中的 /reg:64 选项。没有它是行不通的。

# javascript - 可扩展的 getElementsByTagName 数组

> ID：14384242
> 
> 赞同：0
> 
> 时间：2013-01-17T17:02:14.103
> 
> 标签：javascript, xml

打赌这真的很简单，但我已经努力了几个小时才能让它发挥作用。

我正在使用 javascript 读取 XML 文件，但我无法读取所有内容，只有当我更改数组中的索引（手动）时，它才会读取第二行。

这是我用来写出这一行的行

```
 document.write(x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue); 
```

正如我所说，当我将 ("name")[0] 更改为 ("name")[1] 时，它会读取第二行。有没有办法我可以创建一个循环？使用 .length 吗？

这是部分代码。

```
document.write("<table border='1'>");
var x =xmlDoc.getElementsByTagName("products");
for (i=0;i<x.length;i++)
  { 
  document.write("<tr><td>");
  document.write(x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue);
  document.write("</td><td>");
  document.write(x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue);
  document.write("</td><td>");
  document.write("</td></tr>");
  }
document.write("</table>"); 
```

和 XML 文件

```
<productlist>
<products>
  <title>Kök</title>
  <product><id>23</id><name>Bestick</name><price>45</price></product>
  <product><id>47</id><name>Tallrikar</name><price>99</price></product>
  <product><id>54</id><name>Glas</name><price>64</price></product>
  <product><id>68</id><name>Koppar</name><price>125</price></product>
</products>
<products>
  <title>Sängkläder</title>
  <product><id>12</id><name>Lakan</name><price>89</price></product>
  <product><id>43</id><name>Kudde</name><price>148</price></product>
  <product><id>48</id><name>Täcke</name><price>345</price></product>
</products>
</productlist> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:07:19.983

您已经有一个循环，显然您需要另一个循环：

```
document.write("<table border='1'>");
var x = xmlDoc.getElementsByTagName("products");
for (var i=0;i<x.length;i++)
  { 
  document.write("<tr><td>");
  document.write(x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue);
  document.write("</td><td>");
  // Get all names on current products node, and loop
  var names = x[i].getElementsByTagName("name");
  for(var j=0; j<names.length; j++) {
    document.write(names[j].childNodes[0].nodeValue);
  }
  document.write("</td><td>");
  document.write("</td></tr>");
  }
document.write("</table>"); 
```

# apache - htaccess - 删除 www 并有选择地强制 https

> ID：14384254
> 
> 赞同：1
> 
> 时间：2013-01-17T17:02:58.697
> 
> 标签：apache, .htaccess, mod-rewrite

很难找到满足以下 3 个条件的组合。哪些 Rewrite 规则和条件将满足条件？（我已经对规则不起作用感到惊讶。）

1.  www 从所有请求中剥离
2.  https 用于对主要请求的所有请求
3.  ***http对子域***的所有请求（在主站点的子文件夹中） subdomain.com

访问：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^www\.primary\.mobi [NC,OR]
RewriteCond %{HTTP_HOST} ^primary\.mobi [NC,OR]
RewriteCond %{HTTP_HOST} !^(www\.)?subdomain\.com [NC]
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

以上不剥离 www 并将 www.subdomain 发送到 https。

欢迎解释。试图了解 apache mod_rewrite 手册页并尝试了几种方法但均未成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:30:42.233

您可以捕获域并在 RewriteRule 中使用它。HTTP_REQUEST 在替换部分不可用，而仅在 RewriteCond 指令中可用。

我不确定，但您可以尝试将其拆分为两个`.htaccess`文件。这个进入主目录

```
RewriteEngine On

# remove www. from HTTPS requests
RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} ^www\.(primary\.mobi)$ [NC]
RewriteRule .* https://%1/$0 [R,L]

# redirect HTTP requests to HTTPS
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^(?:www\.)?(primary\.mobi)$ [NC]
RewriteRule .* https://%1/$0 [R,L] 
```

这是`.htaccess`子域文件夹中的

```
RewriteEngine On

# remove www. from HTTP requests
RewriteCond %{HTTP_HOST} ^www\.(subdomain\.com)$ [NC]
RewriteRule .* http://%1/$0 [R,L]

# redirect HTTPS requests to HTTP
RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} ^(?:www\.)?(subdomain\.com)$ [NC]
RewriteRule .* http://%1/$0 [R,L] 
```

*在没有*301 的情况下测试您的规则，因为浏览器会缓存 301 结果并使测试变得更加困难。`R=301`在您对规则满意之前不要添加。

在[规范主机名](http://httpd.apache.org/docs/current/rewrite/remapping.html#canonicalhost)中描述了一些替代方案，尤其是第一个，使用虚拟主机，看起来很有希望

```
<VirtualHost *:80>
    ServerName www.primary.mobi
    Redirect / https://primary.mobi/
</VirtualHost>

<VirtualHost *:80>
    ServerName primary.mobi
</VirtualHost>

<VirtualHost *:80>
    ServerName www.subdomain.com
    Redirect / http://subdomain.com/
</VirtualHost>

<VirtualHost *:80>
    ServerName subdomain.com
</VirtualHost> 
```

我不知道这对你是否可行，但你可以试试。

# sql-server-2008 - MS 访问 Tsql：什么是 Asc(UCase(String)) - 64？

> ID：14384255
> 
> 赞同：1
> 
> 时间：2013-01-17T17:03:01.040
> 
> 标签：sql-server-2008, tsql, ms-access

有谁知道这个 Asc 函数在做什么（-64）？再次提前感谢。

访问 - **IIF(Trim(NZ(MCATw)) = "", 0, Abs(Asc(UCase(MCATw)) -64)) 作为 MCATwNo**

我不明白-64在做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:05:05.017

它可能将字符串的第一个字母转换为数值 1-26。大写字母 A - Z 的 ASCII 值为 65 - 90，因此`ASC("A")`变为 65，而 65 - 64 为 1。因此 A - Z 变为 1 - 26。假设这`MCATw`是一个字符串，`ASC`则仅适用于第一个字符。

# knockout.js - KnockoutJS 动态渲染外部模板

> ID：14384256
> 
> 赞同：0
> 
> 时间：2013-01-17T17:03:05.227
> 
> 标签：knockout.js, template-engine

我在 KnockoutJS 中开发 SPA，并在 KnockoutJS 中呈现外部模板时遇到问题。

我正在使用 Jim Cowart 的 External Template Engine。 [https://github.com/ifandelse/Knockout.js-External-Template-Engine](https://github.com/ifandelse/Knockout.js-External-Template-Engine)

这个绑定：

`<div data-bind='template: {name: 'template1', templateUrl:"/dynamicviewtemplate"}'></div>`

作品。而这个：

```
<div data-bind='template: {name: templateName, templateUrl:"/dynamicviewtemplate"}'></div> 
```

不起作用。

模板不会基于 observable 加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:18:47.170

`template`绑定不会自动解开该字段`name`。您可以通过指定绑定来解决此问题，例如：

```
data-bind='template: {name: templateName(), templateUrl:"/dynamicviewtemplate"}' 
```

# sql-server-2005 - 初始化xml变量

> ID：14384257
> 
> 赞同：1
> 
> 时间：2013-01-17T17:03:06.600
> 
> 标签：sql-server-2005

```
DECLARE @XML1 XML

SET @XML1=SELECT XMLCOLUMN FROM TABLE WHERE ID='123-456' 
```

当我这样做时，我收到以下错误消息：

> 关键字“SELECT”附近的语法不正确。

谁能帮助我如何将 xmlcolumn 值分配给 xml 变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:10:42.577

采用

```
SELECT @XML1= XMLCOLUMN FROM TABLE WHERE ID='123-456' 
```

或者

```
SET @XML1= (SELECT XMLCOLUMN FROM TABLE WHERE ID='123-456') 
```

如果查询恰好返回一行，则它们的行为相同，但其他情况不同。

```
+----+-------------------------------------------------------+------------------------------------------+
|    |                        SELECT                         |                   SET                    |
+----+-------------------------------------------------------+------------------------------------------+
| 0  | No Assignment made. Variable has original value.      | Variable set to null                     |
| 1  | Variable assigned the one matching value              | Variable assigned the one matching value |
| >1 | Variable assigned arbitrary value from matching rows. | Error raised                             |
+----+-------------------------------------------------------+------------------------------------------+ 
```

# c# - 使用 ServiceStack 将对象树从服务器同步到客户端

> ID：14384261
> 
> 赞同：2
> 
> 时间：2013-01-17T17:03:20.813
> 
> 标签：c#, rest, servicestack

我的服务器上有一个对象树。本质上，它是由图层组成的地图，每个地图图层都是由地图形状组成的。我希望将这棵树复制给我的客户。我正在使用 Servicestack 框架。

目前我从客户端轮询到服务器。对于每个投票请求，我都会发送上一次投票中返回的时间戳。然后服务器向我发送自那时以来已更改的对象。为了知道需要删除客户端上的项目，我在每次轮询时都发送了整个对象 ID 树。将接收到的树与更新合并到客户端上的完整树中有些痛苦，并且需要发送比必要更多的数据。

对于将复杂对象从服务器同步到客户端，您还有哪些其他建议？有没有这方面的现有框架？我的客户端和服务器都使用 C#。

# c - 使用 malloc 循环来保证 malloc 的结果是否不好？

> ID：14384264
> 
> 赞同：3
> 
> 时间：2013-01-17T17:03:27.987
> 
> 标签：c, loops, memory-management, malloc

像这样分配内存是不好的做法吗？：

```
FOO *foo;
while (!(foo = malloc(sizeof(FOO)))) ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T17:05:10.300

我不知道不良做法，但这并不常见。 `malloc()`故障通常表明您的程序不太可能从中恢复的主要系统问题。如果您的系统不同，您的示例可能非常实用。

注意 - 这个答案假设这`sizeof(FOO)`是“合理的”，并且你`malloc()`不只是因为你要求太多内存而拒绝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:09:47.500

这并不能“保证”来自[`malloc()`](http://linux.die.net/man/3/malloc). 如果 malloc 返回`NULL`，则可能是有原因的（例如内存不足）。你可能会陷入无限循环。

此外，如果您在 Linux 平台上运行它：

> 默认情况下，Linux 遵循乐观的内存分配策略。这意味着当 malloc() 返回非 NULL 时，不能保证内存确实可用。

这意味着可以说一遍又一遍地调用 malloc 确实会返回一些非 NULL 的东西，由于 Linux 的“乐观”策略，非 NULL 仍然不能保证你得到任何可以工作的东西。

我认为这段代码让你陷入调试噩梦。

# sharepoint-2010 - 是否可以从具有不同属性的事件接收器调用事件接收器？

> ID：14384275
> 
> 赞同：3
> 
> 时间：2013-01-17T17:04:00.047
> 
> 标签：sharepoint-2010, event-receiver, eventreceiver

我有一个事件接收器，它在更新文件夹（文档集）上的元数据时运行。在同一个事件接收器中，我想为文件夹中的每个文档启动一个事件接收器。我想知道的是：是否可以使用与给定不同的 SPitemEventProperties 调用事件接收器。

例如

```
public override void ItemUpdated (SPItemEventProperties properties) {
// when properties is/contains a folder:
// on each document in the folder
// run ItemUpdated where properties is a/contains a document
} 
```

是否有可能做到这一点？如果是这样，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:03:11.317

简短的回答：没有。可能有一种非常老套的方法来做到这一点，但没有明显的解决方案。

对于我的特殊情况，设置环境更容易，因此文档继承了变化的元数据，因此当该列发生变化时，它的事件接收器就会触发。希望它对将来的其他人有所帮助，或者如果没有其他人阅读此内容，请作为我自己的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T08:47:36.843

您可以在每个文档文件夹 ItemUpdatedER 上调用 SPListItem.Update()。这个运行文件EventReceiver。

```
public override void ItemUpdated (SPItemEventProperties properties) {
    query all sub items/documents
    on each document change your data:
    item["customField"] = "update value";
    item.Update() //call recursively ItemUpdating/ItemUpdate
 } 
```

# ios - malloc: *** mmap(size=204800) 失败（错误代码=12）

> ID：14384277
> 
> 赞同：1
> 
> 时间：2013-01-17T17:04:00.950
> 
> 标签：ios, memory-management, malloc, mmap, region

我正在为 iPhone 编写应用程序，但出现以下错误：

malloc: *** mmap(size=204800) 失败（错误代码=12）** **错误：无法分配区域 ** * 在 malloc_error_break 中设置断点进行调试*

 *在过度调用此代码后，我得到了这个：

```
 - (NSInteger) readInt:(NSInteger)defaultValue
{
    NSRange sr = NSMakeRange(offset, [pdfData length] - offset);
    NSData* sub = [pdfData subdataWithRange:sr];
    char* buf = (char*)[sub bytes];
    int off = 0;
    char c;
    do {
        c = buf[off++]; //the app crash on this line 
    } while (c == NEW_LINE || c == CARRIAGE_RETURN||c == EMPTY_STRING);
    int startString = off - 1;
    do {
        c = buf[off++];
    } while (c != NEW_LINE && c != CARRIAGE_RETURN && c !=EMPTY_STRING);
    off = off - 1;
    offset = off + offset+1;

    NSString *inStringSet = [[[NSString alloc] initWithData:[sub subdataWithRange:NSMakeRange(startString, off-startString)] encoding:NSASCIIStringEncoding] autorelease]; 
    if ([PDFUtils isNumeric:inStringSet ]) {
        NSString* intString = [[[NSString alloc] initWithData:[sub subdataWithRange:NSMakeRange(startString, off-startString)] encoding:NSASCIIStringEncoding] autorelease]; 
        return [intString intValue];
    }
    return defaultValue;
} 
```

在模拟器上运行时我没有这样的错误，但我的内存使用量达到了大约 700mb，但是在设备上运行时，应用程序崩溃了。我读过类似的问题，但完全没有运气。任何帮助指针将不胜感激。有些问题是关于查找和调试泄漏，但在 Instruments 中跟踪后，似乎没有泄漏，并且在自动释放池中正确释放了内存，只有内存高峰，然后正确释放。（应用程序仅在设备中崩溃）无论如何可以避免内存使用高峰？谢谢。*

# cxf - Eclipse 无法使用 AXIS2 和 CXF 创建 Web 服务客户端

> ID：14384281
> 
> 赞同：0
> 
> 时间：2013-01-17T17:04:13.110
> 
> 标签：cxf, axis, webservice-client, eclipse-wtp

在尝试从提供的 WSDL 开发 WS 客户端几天后，我发现我一直在使用axis，而不是axis2 ...

好吧，我正在做的是右键单击 wsdl > New > Other > Web Service Client。

在向导窗口中，“Web 服务运行时”一直设置为“Apache Axis”，而我没有看到。单击它，我可以选择“Apache Axis2”和“Apache CXF 2.x”，但两者都失败了，而“Apache Axis”“工作”：客户端已创建，但未将标头用户名和密码添加到 XML要求。

这是我在尝试使用 CXF 时遇到的错误：

```
Unable to add the follwing facets to project SIAPP_WS_FORNECEDOR_CFX_01: CXF 2.x Web Services.
    org.eclipse.wst.common.project.facet.core.FacetedProjectFrameworkException: Failed while installing CXF 2.x Web Services 1.0.
    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.callDelegate(FacetedProject.java:1507)
    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modifyInternal(FacetedProject.java:441)
    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.mergeChangesInternal(FacetedProject.java:1181)
    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.access$2(FacetedProject.java:1117)
    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject$1.run(FacetedProject.java:324)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.modify(FacetedProject.java:339)
    at org.eclipse.jst.ws.internal.consumption.ui.common.FacetOperationDelegate$1.run(FacetOperationDelegate.java:62)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
    Caused by: org.eclipse.core.runtime.CoreException: CXF Runtime location not set. Please set location in Preferences > Web Services > CXf 2.x Preferences
    at org.eclipse.jst.ws.internal.cxf.facet.CXFFacetInstallDelegate.execute(CXFFacetInstallDelegate.java:50)
    at org.eclipse.wst.common.project.facet.core.internal.FacetedProject.callDelegate(FacetedProject.java:1477)
    ... 8 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T18:40:04.097

对于 CXF，您需要转到 Preference -> Web Service -> CXF 2.x Preferences 并添加 CXF 运行时（指向 CXF 安装）。这应该允许它找到 CXF 所需的 wsdl2java 工具（等等）。

# hql - grails gorm executeQuery HQL 内连接

> ID：14384283
> 
> 赞同：1
> 
> 时间：2013-01-17T17:04:14.370
> 
> 标签：hql, grails-orm, grails-domain-class, grails-controller, executequery

我正在尝试使用 GORM 的 executeQuery 进行简单的内部连接，但得到 QuerySyntaxException .....我相信我的 hql 没问题。这是我的查询

```
def query = Institution.executeQuery("select longName from Institution inner join TacticalIndustryCode.idInstitution")
log.info(query.size()) 
```

我也尝试过同样的错误：

```
def query = Institution.executeQuery("from Institution inner join TacticalIndustryCode.id") 
```

这是我收到的例外情况

```
org.hibernate.hql.ast.QuerySyntaxException: Invalid path: 'null.idInstitution' [select longName from erebus.industryGroup.Institution inner join TacticalIndustryCode.idInstitution]
    at erebus.industryGroup.TacticalIndustryCodeController$$ENunaZiV.list(TacticalIndustryCodeController.groovy:20)
    at grails.plugin.cache.web.filter.PageFragmentCachingFilter.doFilter(PageFragmentCachingFilter.java:195)
    at grails.plugin.cache.web.filter.AbstractFilter.doFilter(AbstractFilter.java:63)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T09:17:13.243

`idInstitution`确保在域 ' ' 中有一个名为 ' ' 的字段`TacticalIndustryCode`。

请记住，当您编写 HQL 时，您不会引用表或其列。相反，您使用映射的类及其属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-15T06:35:03.297

```
def query = Institution.executeQuery("select inst.longName from Institution as inst inner join inst.tacticalIndustryCode") 
```

欲了解更多信息，请点击链接： http: [//grails.asia/grails-hql-join-examples](http://grails.asia/grails-hql-join-examples)

# jquery - jquery 逻辑错误

> ID：14384284
> 
> 赞同：1
> 
> 时间：2013-01-17T17:04:15.550
> 
> 标签：jquery, html

我有一个 JavaScript 脚本，在其中我将元素添加到数组（id、值），然后从它们创建复选框。它背后的想法是允许用户选择一项运动，它显示为一个复选框，取消选中它，它就会从屏幕上消失。因此，当页面加载时，已经选择了一些运动，这意味着用户不能再次添加它们，但可以删除其中的任何一项并再次添加。我的问题是当我删除它时从数据库中添加的**第一个**，我无法再次添加它；我在脚本中输入了警告消息，脚本告诉我它没有被删除，而实际上它已经被删除了。我究竟做错了什么？

```
 <script type='text/javascript'>
    //<![CDATA[
     $(window).load(function () {

         var db = [{ id: 6, value: "Running"},{ id: 1, value: "Baseball" }];
         var allVals = [];

         $.each(db, function (k, v) {
             $("#results").append("<label class=\"wList\"><input checked=\"checked\" class=\"wList-chk\" name=\"wList[]\" type=\"checkbox\" value=\""
             + v.id
             + "\">"
             + v.value
             + "</label>");
             allVals.push(v.id);
         });

         $(function () {
             var sports = [{ id: 1, value: "Baseball" },
                        { id: 2, value: "Soccer" },
                        { id: 3, value: "Basketball" },
                        { id: 4, value: "Volleyball" },
                        { id: 5, value: "Tennis" },
                        { id: 6, value: "Running" },
                        { id: 7, value: "Swimming"}];

             $("#sports").autocomplete({
                 source: sports,
                 select: function (event, ui) {

                     if ($.inArray(ui.item.id, allVals) == -1) {
                         allVals.push(ui.item.id);
                         $("#results")
                                     .append("<label class=\"wList\"><input checked=\"checked\" class=\"wList-chk\" name=\"wList[]\" type=\"checkbox\" value=\""
                                     + ui.item.id
                                     + "\">"
                                     + ui.item.value
                                     + "</label>");
                         $('input.wList-chk[type="checkbox"][value="' + ui.item.id + '"]').parent().effect('highlight', {}, 1500);
                         ui.item.value = "";
                     }
                     else {
                         //ALERT TO SEE IF ELEMENT IS STILL IN ARRAY
                         alert("item already in ... but should not be in");
                         ui.item.value = "";
                         $('input.wList-chk[type="checkbox"][value="' + ui.item.id + '"]').parent().effect('highlight', {}, 1500);
                     }
                 }
             });
         });

         $(document).on("change", ".wList-chk", function () {
             if ($(this).attr('checked')) {
                 return;
             } else {
                 var thisVal = $(this).val();
                 var index = $.inArray(thisVal, allVals);
                 allVals.splice(index, 1);
                 $(this).parent('.wList').remove();
             }
         });
     });//]]>  

</script> 
```

这是一个完整的 jsfiddle：http: [//jsfiddle.net/hdfse/](http://jsfiddle.net/hdfse/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:20:24.017

```
var thisVal = $(this).val(); 
```

应该改为

```
var thisVal = parseInt($(this).val()); 
```

因为`$(this).val()`返回 a`string`和 in `var index = $.inArray(thisVal, allVals);`，这`index`将得到`-1`，然后`allVals.splice(index, 1);`将删除意外项。

这是jsfiddle [http://jsfiddle.net/hdfse/8/](http://jsfiddle.net/hdfse/8/)

# facebook-javascript-sdk - 我可以重定向到感谢页面吗？

> ID：14384285
> 
> 赞同：0
> 
> 时间：2013-01-17T17:04:19.563
> 
> 标签：facebook-javascript-sdk, facebook-apps, payment

我通过 Javascript SDK 使用支付 API。用户完成付款后，我想重定向到 FB 内的感谢页面。我了解 redirect_uri 仅限于 FB App 设置中定义的站点。那么我该怎么做呢？或者 FB 是否认为他们的弹出对话框是最后的感谢页面，这就是允许的？

```
 function buy() {
     var credits= 2;
     FB.ui({
         method: 'pay',
         credits_purchase: false,
         order_info: credits,
         // FB says it will only redirect to the URL registered for the app.
         // I'll try to fudge  by adding a parameter:
         redirect_uri:'https://apps.facebook.com/MYAPP/index.php?thankyou=1',
         dev_purchase_params: {
             oscif: true
          }
       },
       function(response) {
         div = document.getElementById('fb-response');
         div.innerHTML = JSON.stringify(response);
     });
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T21:09:13.703

您可以手动进行重定向，例如

```
function(response) 
{
    window.location = "https://apps.facebook.com/MYAPP/index.php?thankyou=1";
}) 
```

或发送请求后

```
function(response) 
{
    div = document.getElementById('fb-response');
    div.innerHTML = JSON.stringify(response);
});
window.location = "https://apps.facebook.com/MYAPP/index.php?thankyou=1"; 
```

# python - 在 Python 中，将文件的块读取为十进制数

> ID：14384287
> 
> 赞同：1
> 
> 时间：2013-01-17T17:04:25.173
> 
> 标签：python, file, decimal, bit-manipulation

我的输入文件可能是任意的，所以我将使用

```
f = open("in-file", 'rb') 
```

块大小约为 4K 字节，因此我将使用

```
f.read(4096) 
```

我想要做的是从文件中逐块读取块。此外，由于块实际上是一个 $2^15$-bit (4KB) 的序列，所以在读取一个块时，我需要将其转换为十进制值以便进一步计算。

例如，如果第一个块的形式为 0000...10，我想要的是另一个变量保持相应的十进制值，例如 x=2。

从[将字符串转换为位列表，反之亦然](https://stackoverflow.com/questions/10237926/convert-string-to-list-of-bits-and-viceversa)，我知道它的代码可以帮助我逐块读取块。

```
def tobits(s):
    result = []
    for c in s:
        bits = bin(ord(c))[2:]
        bits = '00000000'[len(bits):] + bits
        result.extend([int(b) for b in bits])
    return result 
```

但是，我不知道如何将输出列表转换为十进制值。有人可以给我一些示例代码吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:21:36.560

通过引用[http://code.activestate.com/recipes/510399-byte-to-hex-and-hex-to-byte-string-conversion/](http://code.activestate.com/recipes/510399-byte-to-hex-and-hex-to-byte-string-conversion/)我发现下面的代码可能会运行得更快，因为它似乎没有涉及算术。

```
def ByteToHex( byteStr ):
    return ''.join( [ "%02X " % ord( x ) for x in byteStr ] ).strip() 
```

因此，例如将 2 字节块读取为十进制数的任务可以通过以下代码完成：

```
in_file=open("in-file", "rb")
piece = in_file.read(2)
a=ByteToHex(piece)
a=int(a,16) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:22:38.387

如果我理解正确的问题，您需要以下内容：

```
def bytes_to_long(bytes):
    result = 0l
    for c in bytes:
        result *= 256
        result += ord(c)
    return result 
```

也就是说，这可能会有点慢，4kB 相当大`long`，并且会创建很多垃圾。您可能可以通过[`struct.unpack()`](http://docs.python.org/2/library/struct.html)每次迭代使用和处理多个字节来改进这一点，但是您必须处理正确的字节顺序和所有内容。在 Python 3 上，您可能也不需要 ，`ord()`因为它应该`bytes`从 IO 方法返回类型。

# c# - 转换错误缓存对象

> ID：14384290
> 
> 赞同：0
> 
> 时间：2013-01-17T17:04:34.927
> 
> 标签：c#, asp.net

```
if (System.Web.HttpContext.Current.Cache.Get("dsActiveNews_FixID_" + newsFixID) == null)
                news = NewsDB.getNewsBodyByFixID(newsFixID);
                System.Web.HttpContext.Current.Cache.Add("dsActiveNews_FixID_" + newsFixID, news, null, DateTime.Now.AddMinutes(60), Cache.NoSlidingExpiration, CacheItemPriority.Normal, null);
            }
            news = (News)(System.Web.HttpContext.Current.Cache.Get("dsActiveNews_FixID_" + newsFixID)); 
```

当我第一次调用页面时，铸造正在工作，当我刷新页面时，我得到一个异常`InvalidCastException: Specified cast is not valid`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:18:06.047

可能是 null / 或其他一些对象并且无法转换，所以获取它并检查它

```
var oNews = System.Web.HttpContext.Current.Cache.Get("dsActiveNews_FixID_" + newsFixID) as News;

if(oNews != null)
{    
} 
```

# algorithm - 最小化矩阵中的块

> ID：14384292
> 
> 赞同：14
> 
> 时间：2013-01-17T17:04:39.010
> 
> 标签：algorithm

假设我有以下矩阵：

![原始矩阵](../Images/0bd0b0c382654dfd5eebc98ae33ecf68.png)

矩阵可以分解成块，使得对于所有行，每个块必须具有相同数量的列，其中该行的值被标记为真。

例如，以下块是有效的：

![有效块示例 1](../Images/45d4696352c531b79ad22bf87ed2ae35.png)

这意味着行不必是连续的。

列也不必是连续的，因为以下是有效的块：

![有效块示例 2](../Images/3ce0982915b36218654554a01008bc25.png)

但是，以下内容无效：

![无效的块示例](../Images/649996fa1218194c60c404093c5b5615.png)

也就是说，有什么算法可以用来选择块，以便在找到所有块时使用最少数量的块？

鉴于上面的示例，正​​确的解决方案是（具有相同颜色的项目表示有效块）：

![分块问题的解决方案1](../Images/a077f01b1cb2ffc455b5b8f21f36d7d5.png)

在上面的示例中，三个是可以分解成的最小块数。

请注意，以下也是有效的解决方案：

![分块问题2的解决方案](../Images/69cba9ee2cc450ed1d527a18ac095bbc.png)

实际上，解决方案并没有偏好，只是为了获得最少数量的块。

我想过使用相邻的单元格进行计数，但这并不能说明列值不必连续的事实。

我相信关键在于在给定约束的情况下找到面积最大的块，删除这些项目，然后重复。

采用这种方法，解决方案是：

![分块问题3的解决方案](../Images/1da0dcd2a343e1bc1007d002ec7ce4ef.png)

但是如何遍历矩阵并找到最大的区域却让我望而却步。

另请注意，如果您想在操作期间重新调整行和/或列，这是一个有效的操作（为了找到最大的区域），但我想您只能在从矩阵（在找到一个区域并移动到下一个区域之后）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T21:59:16.483

您正在对真值表进行[电路最小化。](https://en.wikipedia.org/wiki/Circuit_minimization)对于 4x4 真值表，您可以使用[K 映射](https://en.wikipedia.org/wiki/Karnaugh_maps)。[Quine-McCluskey 算法](https://en.wikipedia.org/wiki/Quine%E2%80%93McCluskey_algorithm)是一种可以处理更大真值表的泛化。

请记住，问题是 NP-Hard，因此根据真值表的大小，这个问题可能会迅速增长到难以处理的规模。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:30:00.573

This problem is strongly related to [Biclustering](http://en.wikipedia.org/wiki/Biclustering), for which there are many efficient algorithms (and freely available implementations). Usually you will have to specify the number `K` of clusters you expect to find; if you don't have a good idea what `K` should be, you can proceed by binary search on `K`.

In case the biclusters don't overlap, you are done, otherwise you need to do some geometry to cut them into "blocks".

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T15:30:59.457

我提出的解决方案相当简单，但非常耗时。

它可以分为4个主要步骤：

1.  找到矩阵中的所有现有模式，
2.  找到这些模式的所有可能组合，
3.  删除所有不完整的模式集，
4.  扫描剩余列表以获取具有最少元素数的集合

首先，下面的算法适用于列或行主矩阵。我选择了列作为解释，但您可以在方便时将其换成行，只要它在整个过程中保持一致即可。

答案附带的示例代码在 OCaml 中，但不使用该语言的任何特定功能，因此应该很容易移植到其他 ML 方言。

## 步骤1：

每一列都可以看作是一个位向量。*请注意，可以通过交叉（即和*ing）所有列或组成它的所有行，甚至是组合来构造模式（您在问题中称为块） 。所以第一步实际上是关于产生行和列的所有组合（如果你愿意的话，矩阵的行和列的幂集），同时将它们相交，并过滤掉重复项。

我们考虑矩阵数据类型的以下接口：

```
 module type MATRIX = sig
    type t
    val w : int (* the width of the matrix *)
    val h : int  (* the height ........             *)
    val get : t -> int -> int -> bool  (* cell value getter *)

end 
```

现在让我们看一下这一步的代码：

```
let clength = M.h
let rlength = M.w

(* the vector datatype used throughought the algorithm
   operator on this type are in the module V *)
type vector = V.t

(* a pattern description and comparison operators *)
module Pattern = struct
    type t = {
        w : int; (* width of thd pattern *)
        h : int; (* height of the pattern *)
        rows : vector; (* which rows of the matrix are used *)
        cols : vector; (* which columns... *)
    }
    let compare a b = Pervasives.compare a b
    let equal a b = compare a b = 0
end
(* pattern set : let us store patterns without duplicates *)
module PS = Set.Make(Pattern)

(* a simple recursive loop on @f @k times *)
let rec fold f acc k =
    if k < 0 
    then acc
    else fold f (f acc k) (pred k)

(* extract a column/row of the given matrix *)
let cr_extract mget len =
    fold (fun v j -> if mget j then V.set v j else v) (V.null len) (pred len)

let col_extract m i = cr_extract (fun j -> M.get m i j) clength
let row_extract m i = cr_extract (fun j -> M.get m j i) rlength

(* encode a single column as a pattern *)
let col_encode c i =
    { w = 1; h = count c; rows = V.set (V.null clength) i; cols = c }

let row_encode r i =
    { h = 1; w = count r; cols = V.set (V.null rlength) i; rows = r }

(* try to add a column to a pattern *)
let col_intersect p c i =
    let col = V.l_and p.cols c in
    let h = V.count col in
    if h > 0 
    then
        let row = V.set (V.copy p.rows) i in
        Some {w = V.count row; h = h; rows = row; clos = col}
    else None

let row_intersect p r i =
    let row = V.l_and p.rows r in
    let w = V.count row in
    if w > 0
    then
        let col = V.set (V.copy p.cols) i in
        Some { w = w; h = V.count col; rows = row; cols = col }
    else None

let build_patterns m =
    let bp k ps extract encode intersect =
        let build (l,k) =
            let c = extract m k in
            let u = encode c k in
            let fld p ps =
                match intersect p c k with
                      None         -> l
                    | Some npc -> PS.add npc ps
             in
             PS.fold fld (PS.add u q) q, succ k
        in
        fst (fold (fun res _ -> build res) (ps, 0) k)
    in
    let ps = bp (pred rlength) PS.empty col_extract col_encode col_intersect in
    let ps = bp (pred clength) ps row_extract row_encode row_intersect in
    PS.elements ps 
```

V 模块必须符合以下整个算法的签名：

```
module type V = sig
    type t
    val null : int -> t  (* the null vector, ie. with all entries equal to false *)
    val copy : t -> t (* copy operator *)
    val get : t -> int -> bool (* get the nth element *)
    val set : t -> int -> t (* set the nth element to true *)
    val l_and : t -> t -> t (* intersection operator, ie. logical and *)
    val l_or : t -> t -> t (* logical or *)
    val count : t -> int (* number of elements set to true *)
    val equal : t -> t -> bool (* equality predicate *)
end 
```

## 第2步：

组合模式也可以看作是一个幂集结构，但有一些限制：一个有效的模式集可能只包含不重叠的模式。如果两种模式都包含至少一个公共矩阵单元，则后者可以定义为真。使用上面使用的模式数据结构，重叠谓词非常简单：

```
let overlap p1 p2 =
    let nullc = V.null h
    and nullr = V.null w in
    let o v1 v2 n = not (V.equal (V.l_and v1 v2) n) in
    o p1.rows p2.rows nullr && o p1.cols p2.cols nullc 
```

模式记录的`cols`和`rows`指示矩阵中的哪些坐标包含在模式中。因此，两个字段上的*逻辑和*将告诉我们模式是否重叠。

为了在模式集中包含模式，我们必须确保它不与集合中的任何模式重叠。

```
type pset = {
    n : int; (* number of patterns in the set *)
    pats : pattern list;
}

let overlap sp p =
    List.exists (fun x -> overlap x p) sp.pats

let scombine sp p =
    if overlap sp p
    then None
    else Some {
        n = sp.n + 1;
        pats = p::sp.pats;
    }

let build_pattern_sets l =
    let pset l p = 
        let sp = { n = 1; pats = [p] } in
        List.fold_left (fun l spx -> 
            match scombine spx p with
                None -> l
             | Some nsp -> nsp::l
        ) (sp::l) l
    in List.fold_left pset [] l 
```

这一步会产生很多集合，因此非常占用内存和计算量。这当然是这个解决方案的弱点，但我还没有看到如何减少折叠。

## 第 3 步：

如果在用它重建矩阵时，我们没有获得原始的模式集，则该模式集是不完整的。所以这个过程相当简单。

```
let build_matrix ps w =
    let add m p =
        let rec add_col p i = function
            | []     -> []
            | c::cs -> 
                let c = 
                    if V.get p.rows i
                    then V.l_or c p.cols
                    else c
                in c::(add_col p (succ i) cs)
        in add_col p 0 m
    in
    (* null matrix as a list of null vectors *)
    let m = fold (fun l _ -> V.null clength::l) [] (pred rlength) in
    List.fold_left add m ps.pats

let drop_incomplete_sets m l =
    (* convert the matrix to a list of columns *)
    let m' = fold (fun l k -> col_extract m k ::l) [] (pred rlength) in
    let complete m sp =
        let m' = build_matrix sp in
        m = m'
    in List.filter (fun x -> complete m' x) l 
```

## 第4步：

最后一步就是选择元素数量最少的集合：

```
let smallest_set l =
    let smallest ps1 ps2 = if ps1.n < ps2.n then ps1 else ps2 in
    match l with
        | []    -> assert false (* there should be at least 1 solution *)
        | h::t  -> List.fold_left smallest h t 
```

整个计算就是每个步骤的链接：

```
let compute m =
   let (|>) f g = g f in
   build_patterns m |> build_pattern_sets |> drop_incomplete_sets m |> smallest_set 
```

## 笔记

上面的算法构造了一个幂集的幂集，并带有一些有限的过滤。据我所知，没有减少搜索的方法（如评论中所述，如果这是一个 NP 难题，则没有）。

该算法检查所有可能的解决方案，并正确返回一个最佳解决方案（用许多矩阵测试，包括问题描述中给出的那个。

关于您在问题中提出的启发式的快速评论：

它可以使用第一步轻松实现，删除找到的最大模式并递归。这将比我的算法更快地产生解决方案。但是，找到的解决方案可能不是最佳的。

例如，考虑以下矩阵：

```
.x...
.xxx
xxx.
...x. 
```

中央 4 细胞块是可能找到的最大的，但使用它的集合将总共包含 5 个模式。

```
.1...
.223
422.
...5. 
```

然而这个解决方案只使用了 4 个：

```
.1...
.122
334.
...4. 
```

## 更新：

链接到我为此答案编写的[完整代码。](http://www.pastebin.ca/2313716)

# matlab - 在 MATLAB/Octave 中从 3D 矩阵的切片中绘制值

> ID：14384297
> 
> 赞同：3
> 
> 时间：2013-01-17T17:04:54.753
> 
> 标签：matlab, matrix, 3d

如果我有一个 3D 矩阵，`X`那就是 `4 x 10 x 50`.

矩阵由第一维中的位置和速度、第二维中的不同粒子（或船或其他）索引以及第三维中粒子运动的不同时间步长组成。也许不是那么重要，但也许它澄清了我的问题。

假设我想`X`在第三维的前两个维度中绘制特定索引的值

```
>> plot(X(1,1,:))
Error using plot
Data may not have more than 2 dimensions 
```

即使提供的值是一维的，我也不能在这里使用 plot 因为它们是像这样单独给出的：

```
>> X(1,1,1:5)

ans(:,:,1) =
10

ans(:,:,2) =
11.4426

ans(:,:,3) =
12.5169

ans(:,:,4) =
13.7492

ans(:,:,5) =
14.9430 
```

如何将结果`X( 1, 1, :)`转换为向量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:18:18.157

索引`X`with `X( 1, 1, : )`返回一个 3D 矩阵。但是，`plot`要求其输入是向量或二维矩阵。要转换`X( 1, 1, : )`为矢量，您需要删除单例维度。[内置函数`squeeze`](http://www.mathworks.com/help/matlab/ref/squeeze.html)执行此操作：

尝试：

```
X2 = squeeze( X( 1, 1, : ) );
plot( X2 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:21:22.833

您索引它的方式实际上会产生一个二维向量。`size(A(:,:,1)`实际上也是如此`4x10`。

要绘制它，请使用 Matlab 的挤压运算符

```
plot(squeeze(X(:,:,1)) 
```

# vba - 将 GMAIL 收件箱 html 写入文件失败（VBA、Textstream）

> ID：14384300
> 
> 赞同：1
> 
> 时间：2013-01-17T17:05:05.010
> 
> 标签：vba

我使用 FileSystemObjects 中的 textstream 对象检索了一个要保存的 HTML 文件，它生成了一个空文件。

当我使用 MsgBox 在写入命令之前显示流时，它会显示我想要的所有 HTML 代码，但它不会将代码写入文件。有什么建议么？

```
Dim FSO As FileSystemObject
Dim FSOFile As TextStream
Dim FilePath As String
    FilePath = "C:\myhtml.html"

Set FSO = New FileSystemObject
Set FSOFile = FSO.OpenTextFile(FilePath, 2, True)

   FSOFile.Write myContent ' String object holding the HTML textstring
   FSOFile.Close 
```

我基本上是在尝试导出我想用作事件侦听器的 gmail 收件箱文件夹（这样我就可以告诉另一台机器它应该做什么。）。

到目前为止，您的评论： - riteLine 没有任何区别 - OpenTextFile 创建不存在的文件，它还创建文件并写入我手动输入的任何其他字符串，例如 FSOFile.WriteLine "Nothing works" - 为了完整性： CreateTextFile也没有帮助。

使用 FSO 流编写 HTML 代码可能会出现问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:11:04.457

尝试 WriteLine 而不是只写。请参阅示例：http: [//msdn.microsoft.com/en-us/library/aa242706%28v=vs.60%29.aspx](http://msdn.microsoft.com/en-us/library/aa242706%28v=vs.60%29.aspx)

# jquery - jQuery datepicker 不会在 Google Chrome 中关闭

> ID：14384304
> 
> 赞同：1
> 
> 时间：2013-01-17T17:05:18.380
> 
> 标签：jquery, google-chrome, datepicker

我添加到页面的 jQuery 日期选择器在 IE 9 和 Firefox 18 中按预期工作，但在 Google Chrome 24 中选择日期后不会关闭。

这是我正在使用的 jQuery 代码：

```
 $(function() {
        $( "#fromCheck" ).datepicker({
            defaultDate: "-1w",
            maxDate: "+0",
            changeMonth: true,
            numberOfMonths: 1,
            showButtonPanel: false,
            onClose: function( selectedDate ) {
                $( "#toCheck" ).datepicker( "option", "minDate", selectedDate || "-1w" );
            }
        });
        $( "#toCheck" ).datepicker({
            defaultDate: "+0",
            maxDate: "+0",
            changeMonth: true,
            numberOfMonths: 1,
            showButtonPanel: false,
            onClose: function( selectedDate ) {
                $( "#fromCheck" ).datepicker( "option", "maxDate", selectedDate || "+0" );
            }
        });
        $( "#fromCard" ).datepicker({
            defaultDate: "-1w",
            maxDate: "+0",
            changeMonth: true,
            numberOfMonths: 1,
            showButtonPanel: false,
            onClose: function( selectedDate ) {
                $( "#toCard" ).datepicker( "option", "minDate", selectedDate || "-1w" );
            }
        });
        $( "#toCard" ).datepicker({
            defaultDate: "+0",
            maxDate: "+0",
            changeMonth: true,
            numberOfMonths: 1,
            showButtonPanel: false,
            onClose: function( selectedDate ) {
                $( "#fromCard" ).datepicker( "option", "maxDate", selectedDate || "+0" );
            }
        });
    }); 
```

这是演示页面的链接：

[http://www.tempuspayment.com/paymentmate/tests/apm/](http://www.tempuspayment.com/paymentmate/tests/apm/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:24:56.613

您在第 136 行抛出一个 javascript 错误，该错误会停止执行您的 Javascript。

违规行是：

```
<input name="FROMDATE" type="text" id="fromCheck" value="01/04/2013" onfocus="value='" size="10" maxlength="50" /> 
```

应该是：

```
<input name="FROMDATE" type="text" id="fromCheck" value="01/04/2013" onfocus="value=" size="10" maxlength="50" /> 
```

# c# - 如果它存在于 List 中，则希望比较拆分的 string[] > 我的清单

> ID：14384311
> 
> 赞同：0
> 
> 时间：2013-01-17T17:05:48.003
> 
> 标签：c#, list

我正在寻找比较`string[] splitted`它是否存在于`List<KeyValuePair<string, string>> myList`. 如果没有，那么我会将其添加`List<string>`为单独的电子邮件地址列表。

使用 LINQ 可能是一个不错的选择，请帮助实现。

希望比较`string[] splitted`它是否存在于`List<KeyValuePair<string, string>>`myList中

```
 public void SendEmails(String esmails)
{
  //splitting email string 
  string[] splitted = esmails.Emails.Split(new string[] { System.Environment.NewLine },     StringSplitOptions.RemoveEmptyEntries);

  List<KeyValuePair<string, string>> myList = new List<KeyValuePair<string, string>>();

  foreach (var email in GetEmails)
  {
    for (int i = 0; i < splitted.Count(); i++)
    {
      if (email.EmailAddress.Equals(splitted[i].Replace(";","")))
          myList.Add(new KeyValuePair<string, string>(email.IdentificationNo, email.EmailAddress));

    }
  } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:46:24.640

```
public void SendEmails(String esmails)
{
    List<String> split = esmails.Split(new String[] { System.Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries).Select(s => s.Replace(";", "")).ToList();

Dictionary<Int32, String> dictionary = new Dictionary<Int32, String>();

foreach (Email email in GetEmails())
{
    foreach (String address in split)
    {
        if (email.EmailAddress.Equals(address))
            dictionary[email.IdentificationNo] = email.EmailAddress;
    } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:14:25.807

如果可能，使用隐式类型变量 (var)

您可以通过使用 join 来实现这一点

```
public void SendEmails(String esmails)
{
    //splitting email string 
    var splitted = 
        esmails.Split(new []{System.Environment.NewLine}, StringSplitOptions.RemoveEmptyEntries)
        .Select(s => s.Replace(";", ""));

    var matchings = 
            from s in splitted
            join email in GetEmails on email.EmailAddress equals s
            select new KeyValuePair<string, string>(email.IdentificationNo, email.EmailAddress);

    var myList = matchings.ToList();
} 
```

# html - 伪流式 Flash 中的准确查找

> ID：14384315
> 
> 赞同：2
> 
> 时间：2013-01-17T17:06:17.677
> 
> 标签：html, flash, frame, mediaelement.js, seek

我想知道闪存回退（媒体或任何其他）是否可以支持对 MP4 容器中 H.264 视频的帧的准确搜索，通过 HTTP 使用 IIS 或 apache Web 服务器（HTTP 伪流或渐进式下载）传输. 在 HTML5 中，我们可以命令寻找任何帧号，它会设法解码显示请求的帧索引所需的任何内容。

目前，我可以对所有 Flash 播放器进行试验，例如寻找最近的 GOP 或关键帧。然而，不幸的是，这对我的项目来说还不够，因为我真的需要能够达到任意帧。

你知道是否有办法在 Flash 中进行帧精确搜索，使用 HTTP 伪流（我知道这可以通过 FMS 和 RTMP 流实现）。

# ios - Phonegap / Cordova 如何处理文件上传请求中的带宽限制、超时和重试？

> ID：14384316
> 
> 赞同：1
> 
> 时间：2013-01-17T17:06:19.283
> 
> 标签：ios, cordova, mobile, 3g, 3g-network

我已经构建了一些需要将大/hirez 图像文件上传到远程服务器的本地 iPhone 应用程序。我发现在 3g 网络上，如果在一定时间内使用过多带宽，请求可能会被阻止/丢弃。我相信大约是 1mb/min

参考：[http 请求和响应的最大有效负载大小，iphone](https://stackoverflow.com/questions/1988375/max-payload-size-for-http-request-and-response-iphone/1988388#1988388)

这在 Phonegap / Cordova 的 API 调用中是如何处理的：FileTransfer.upload()？

同样，我在连接失败后多次重试时遇到了麻烦。默认情况下，是否有任何连接重试在幕后进行？...或者第一次连接失败时会触发错误回调？

还！有没有办法从客户端设置请求的超时？

# twitter-bootstrap - 集成 Font Awesome、Less、Twitter Bootstrap 和 MVC4 捆绑/缩小

> ID：14384323
> 
> 赞同：3
> 
> 时间：2013-01-17T17:07:04.163
> 
> 标签：twitter-bootstrap, asp.net-mvc-4, less, bundling-and-minification

我有 Font Awesome、Less、Twitter Bootstrap 和 MVC4 在调试模式下都可以很好地协同工作。

当我从 web.config 的编译节点部署和删除调试时，MVC4 捆绑和缩小开始了。

当我像这样部署浏览我的网站时，字体真棒图标不再起作用。

做一个查看源代码来获取 Bootstrap 的内容包给了我这个 HTML：

```
<link href="/Content/bootstrap?v=q6mwz5qEMtOzVPXqIVuZ8Z6LtMFDC3_UV0F5pQm5Gfg1" rel="stylesheet"/> 
```

获取 URL 并粘贴在浏览器中，我可以获得缩小的代码：

```
@import"reset.less";@import"variables.less";@import"mixins.less";@import"scaffolding.less";@import"grid.less";@import"layouts.less";@import"type.less";@import"code.less";@import"forms.less";@import"tables.less";@import"font-awesome.less";@import"dropdowns.less";@import"wells.less";@import"component-animations.less";@import"close.less";@import"buttons.less";@import"button-groups.less";@import"alerts.less";@import"navs.less";@import"navbar.less";@import"breadcrumbs.less";@import"pagination.less";@import"pager.less";@import"modals.less";@import"tooltip.less";@import"popovers.less";@import"thumbnails.less";@import"media.less";@import"labels-badges.less";@import"progress-bars.less";@import"accordion.less";@import"carousel.less";@import"hero-unit.less";@import"utilities.less";@import"variables.less";@import"mixins.less";@import"responsive-utilities.less";@import"responsive-1200px-min.less";@import"responsive-768px-979px.less";@import"responsive-767px-max.less";@import"responsive-navbar.less"; 
```

我还有几个其他的 CSS 包，当像上面那样查看时，它们都没有显示任何错误。

当我查看 Visual Studio 2012 项目中的 font-awesome.less 文件时，VS 认为它存在许多错误。请记住 Font Awesome 图标在调试中显示良好，所以我认为没有真正的错误。

第一个在：@fontAwesomePath: '../font';

我认为路径是正确的（无论如何都可以在调试中使用），但是 VS 告诉我 fontAwesomePath 不是已知的 @ 指令。

VS 认为还存在许多其他错误，但同样，字体真棒在调试模式下工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-02T10:23:30.173

一个简单的解决方法是从你的包中删除 font-awesome 并将其直接包含在你的 _Layout 中，并带有一个常规的链接标签。

```
<link href="~/Content/font-awesome.min.css" rel="stylesheet"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T12:58:56.770

我在 TinyMCE 上遇到了类似的问题。当 MVC 将 javascript 打包成一个包时，生成的 javascript 会引发异常。

```
BundleTable.EnableOptimizations = false; 
```

如果您将该行放在 BundleConfig 类的 RegisterBundles 函数中，这将关闭捆绑包并让您的站点在生产中工作。它不会自动最小化你的javascript，但至少东西会开始工作。

您可以让他们手动最小化每个 javascript 文件以获得最小的占用空间，并希望找到有问题的 js 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-16T18:02:47.007

我知道这是一个老问题，但万一人们仍然面临这个问题。解决它的另一种方法是将您的包名称设置为`css`在路径中包含该文件夹，例如：

```
bundles.Add(new StyleBundle("~/Content/styles").Include(".."); 
```

现在变成：

```
bundles.Add(new StyleBundle("~/Content/css/styles").Include(".."); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-30T21:35:25.777

我对 FA 4.0.3 也有同样的问题，它的文件夹结构模仿了 Bootstrap 3 的布局方式。BS 工作 FA 不行，去看看 :)

无论如何，我直接编辑了FA css文件以正确添加路径

```
@font-face {
  font-family: 'FontAwesome';
  src: url('/Content/vendor/font-awesome/fonts/fontawesome-webfont.eot?v=4.0.3');
  src: url('/Content/vendor/font-awesome/fonts/fontawesome-webfont.eot?#iefix&v=4.0.3') format('embedded-opentype'), url('/Content/vendor/font-awesome/fonts/fontawesome-webfont.woff?v=4.0.3') format('woff'), url('/Content/vendor/font-awesome/fonts/fontawesome-webfont.ttf?v=4.0.3') format('truetype'), url('/Content/vendor/font-awesome/fonts/fontawesome-webfont.svg?v=4.0.3#fontawesomeregular') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

这适用于我（调试和发布）NuGet 上的 ASP.NET Web 优化模块。

-斯蒂芬

# grails - Grails - onSelect 风格的 GORM 方法

> ID：14384324
> 
> 赞同：0
> 
> 时间：2013-01-17T17:07:15.443
> 
> 标签：grails, grails-orm

有谁知道 Grails 中是否有任何类似于 beforeInsert 或 beforeUpdate gorm 方法但用于选择的东西？

这对于我们必须在选择期间对某些域属性执行操作的用例很有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:22:30.450

安德鲁提供的链接提供了我们所追求的解决方案

再次感谢安德鲁

# python - 仅拆分或提取数组中的整数 - python

> ID：14384332
> 
> 赞同：-3
> 
> 时间：2013-01-17T17:07:37.723
> 
> 标签：python

我的搜索技能需要改进，因为我找不到（或理解）任何可能对我有帮助的东西，从这个数组中提取......

```
qtyList = ['[40', '68]', '[18', '10]'] 
```

我试图只提取整数和/或将其放在不同的数组中，这样它看起来像......

```
qtyList = [40, 68, 18, 10] 
```

我认为 str_split 可能有效，但我很确定我弄乱了语法。我试过...

```
array str_split($qtyList, "[") 
```

那没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:11:58.763

```
In [1]: qtyList = ['[40', '68]', '[18', '10]'] 
```

单程：

```
In [2]: [int(s.replace('[', '').replace(']', '')) for s in qtyList]
Out[2]: [40, 68, 18, 10] 
```

其他方式：

```
In [3]: import re

In [4]: [int(re.sub('[\[\]]', '', s)) for s in qtyList]
Out[4]: [40, 68, 18, 10] 
```

这是一种奇怪的方式，如果列表总是在你显示的时候交替出现：

```
In [5]: from itertools import cycle

In [6]: slices = cycle((slice(1, None), slice(None, -1)))

In [7]: [int(s[c]) for s, c in zip(qtyList, slices)]
Out[7]: [40, 68, 18, 10] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:12:14.580

使用 list-comp 和 regexp 是一种方法：

```
>>> qtyList = ['[40', '68]', '[18', '10]']
>>> import re
>>> [int(re.search('\d+', el).group()) for el in qtyList]
[40, 68, 18, 10] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:01:53.720

这是一种遍历列表中每个列表项的方法。

```
for item in qtyList:
    for x in item:
        newList.append(x) 
```

# c# - 检索 GridView 字符串值

> ID：14384338
> 
> 赞同：0
> 
> 时间：2013-01-17T17:07:45.143
> 
> 标签：c#, asp.net, gridview

我有一个 GridView -

```
<asp:GridView ID="table_example" Runat="server" 
DataSourceID="SqlDataSource3" AutoGenerateColumns="False" 
ClientIDMode="Static" onprerender="table_example_PreRender">
    <Columns>
        <asp:TemplateField>
     <HeaderTemplate>
         <asp:Label ID="Label1" runat="server" Text="Select"></asp:Label>

     </HeaderTemplate>
     <ItemTemplate>
        <asp:CheckBox ID="chkRow" runat="server" OnCheckedChanged="CheckBoxPN_CheckedChanged" AutoPostBack="true"/>
     </ItemTemplate>
  </asp:TemplateField>
        <asp:BoundField HeaderText="profileID" DataField="profileID" 
                        SortExpression="profileID"></asp:BoundField>
        <asp:BoundField HeaderText="profileName" DataField="profileName" 
                        SortExpression="profileName"></asp:BoundField>
    </Columns>
</asp:GridView> 
```

后面的代码在哪里`chkRow`-

```
protected void CheckBoxPN_CheckedChanged(Object sender, EventArgs e)
    {
        CheckBox chk = (CheckBox)sender;
        GridViewRow row = (GridViewRow)chk.NamingContainer; 

        //when a user clicks the checkbox I need the string from profileName in that row. 

    } 
```

在调试时，我可以得到 checkBox changed 事件，但是需要`profileName`从相应的行单元格中检索单元格中的字符串。

我试过这样的东西 -

```
string c = row.Cells("profileName").value.toString(); 
```

但是这不起作用，我怎样才能得到字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T17:15:20.940

如果你使用 a`BoundField`你需要使用`Cells[index].Text`. 因为它在第三列：

```
string profileName = row.Cells[2].Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:23:04.033

你可以给喜欢

例如：你可以马上给个赞；

```
string profilename = gridview.Rows[0].Cells[1].Text; 
```

# javascript - 获取页面源 chrome 扩展

> ID：14384344
> 
> 赞同：0
> 
> 时间：2013-01-17T17:08:09.183
> 
> 标签：javascript, html, google-chrome

我目前正在开发一个 Chrome 扩展程序，我必须在其中获取页面的 HTML 源代码。我目前使用 Chrome 消息。这是我的源代码：

**背景.js**

```
chrome.webNavigation.onComplete.addListener(function(e) {
        chrome.tabs.sendRequest(e.tabId, {
            action: 'getSource'
        }, function(r) {
            console.log(r);
        });
}); 
```

**内容脚本.js**

```
chrome.extension.onRequest.addListener(function(request, sender, callback) {
    if (request.action == 'getSource')
        callback(document.documentElement.outerHTML);
}); 
```

这很慢，因为我必须等待页面中的每个数据（如图像、javascript 等）都已下载才能获取页面的源。

是不是用另一种方法来制作类似的东西？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:13:49.393

将*等待*逻辑移至清单：
**→**将[`run_at`](http://developer.chrome.com/extensions/content_scripts.html#run_at)清单文件中内容脚本的属性设置为`document_end`.

这将在加载 DOM 之后但*在*加载任何子资源（例如图像）之前运行内容脚本。

> 在“document_end”的情况下，文件在 DOM 完成后立即注入，但在图像和帧等子资源加载之前。
> 
> — 谷歌文档

在您的内容脚本中，将 HTML 直接发送到您的后台脚本：

```
var html = document.documentElement.outerHTML;
chrome.extension.sendMessage(null, html); 
```

但请注意，页面中注入的 JavaScript 可能会修改 HTML，因此您最终可能会得到与浏览器中不同的 HTML。

# python - S3 的 Pyramid 存储后端

> ID：14384345
> 
> 赞同：1
> 
> 时间：2013-01-17T17:08:10.840
> 
> 标签：python, amazon-s3, pyramid

我正在寻找与 Amazon S3 一起使用的良好 Pyramid 自定义存储后端。我一直在谷歌搜索，但似乎找不到太多。有人可以给一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:38:50.830

我相信[Boto](http://docs.pythonboto.org/en/latest/s3_tut.html)是在任何 python 应用程序中与 AWS 交互的 goto 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-02T18:22:18.113

[pyramid_storage](https://pythonhosted.org/pyramid_storage/)提供开箱即用的功能，可在本地和 S3 存储上传的文件

# c# - 解释提到的正则表达式

> ID：14384346
> 
> 赞同：0
> 
> 时间：2013-01-17T17:08:13.300
> 
> 标签：c#, regex

任何人都可以解释下面的正则表达式，甚至在我加入之前，它已经在我的应用程序中使用了很长时间，而且我对正则表达式非常陌生。

```
/^.*(?=.{6,10})(?=.*[a-zA-Z].*[a-zA-Z].*[a-zA-Z].*[a-zA-Z])(?=.*\d.*\d).*$/ 
```

据我所理解

此正则表达式将验证 - 至少 6 个字符到最多 10 个字符 - 将转义 ^ 和 $ 等字符

另外，我的基本需求是我想要一个至少 6 个字符的正则表达式，其中 1 个字符是数字，另一个是特殊字符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T17:25:01.023

```
^.*(?=.{6,10})(?=.*[a-zA-Z].*[a-zA-Z].*[a-zA-Z].*[a-zA-Z])(?=.*\d.*\d).*$ 
```

*   `^`被称为“锚”。这基本上意味着任何后续文本都必须紧跟在“输入开始”之后。所以`^B`会匹配“B”而不是“AB”，因为第二个“B”不是第一个字符。

*   `.*`匹配 0 个或多个字符 - 除换行符以外的任何字符（默认情况下）。这就是所谓的贪婪量词 - 正则表达式引擎会将所有字符匹配（“消耗”）到输入的末尾（或行尾），然后向后处理表达式的其余部分（它“仅在必须时放弃”字符）。在正则表达式中，一旦一个字符被“匹配”，表达式的任何其他部分都不能再次“匹配”它（除了零宽度环视，接下来会出现）。

*   `(?=.{6,10})`是一个前瞻锚，它匹配输入中的一个*位置*。它会在输入中找到一个后面有 6 到 10 个字符的位置，但它不会“消耗”这些字符，这意味着下面的表达式可以自由匹配它们。

*   `(?=.*[a-zA-Z].*[a-zA-Z].*[a-zA-Z].*[a-zA-Z])`是另一个前瞻锚。它匹配输入中以下文本包含四个字母的*位置*`[a-zA-Z]`（匹配一个小写或大写字母），但它们之间可以有任意数量的其他字符（包括零个字符）。例如：“++a5b---C@D”将匹配。同样，作为一个锚点，它实际上并没有“消耗”匹配的字符——它只会在文本中找到一个位置，其中*后面*的字符与表达式匹配。

*   `(?=.*\d.*\d)`另一个前瞻。这匹配两个数字后面的位置（中间有任意数量的其他字符）。

*   `.*`已经涵盖了这一点。

*   `$`这是另一种匹配输入结尾（或行尾 - 换行符之前的位置）的锚点。它表示前面的表达式必须匹配字符串末尾的字符。当`^`和`$`一起使用时，意味着必须匹配整个输入（而不仅仅是其中的一部分）。所以`/bcd/`会匹配“abcde”，但`/^bcd$/`不会匹配“abcde”，因为“a”和“e”不能包含在匹配中。

**笔记**

这看起来像一个密码验证正则表达式。如果是，请注意它已损坏。开头和结尾将`.*`允许密码任意长于 10 个字符。它也可以重写为更短一些。我相信以下内容将是可接受的（并且更具可读性）的替代品：

```
^(?=(.*[a-zA-Z]){4})(?=(.*\d){2}).{6,10}$ 
```

*感谢@nhahtdh 指出实现字符长度限制的正确方法。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:45:32.177

检查 Cyborgx37 的答案以获取语法解释。我将对正则表达式的含义做一些解释。

```
^.*(?=.{6,10})(?=.*[a-zA-Z].*[a-zA-Z].*[a-zA-Z].*[a-zA-Z])(?=.*\d.*\d).*$ 
```

第一个`.*`是多余的，因为其余的都是零宽度断言，以任何字符开头，`.`最后`.*`。

由于断言，正则表达式将匹配至少 6 个字符`(?=.{6,10})`。但是，正则表达式可以匹配的字符串的字符数没有上限。这是因为`.*`最后的（`.*`前面的也有贡献）。

这`(?=.*[a-zA-Z].*[a-zA-Z].*[a-zA-Z].*[a-zA-Z])`部分断言至少有4个英文字母字符（大写或小写）。并`(?=.*\d.*\d)`断言至少有 2 位数字 ( `0-9`)。由于`[a-zA-Z]`和`\d`是不相交的集合，这两个条件结合起来就变得`(?=.{6,10})`多余了。

的语法`.*[a-zA-Z].*[a-zA-Z].*[a-zA-Z].*[a-zA-Z]`也不必要地冗长。可以使用重复来缩短它：`(?:.*[a-zA-Z]){4}`.

以下正则表达式等效于您的原始正则表达式。但是，我真的怀疑您当前的版本，并且您的正则表达式的等效重写可以满足您的要求：

```
^(?=(?:.*[a-zA-Z]){4})(?=(?:.*\d){2}).*$ 
```

更明确的长度，因为清晰总是更好。意思保持不变：

```
^(?=(?:.*[a-zA-Z]){4})(?=(?:.*\d){2}).{6,}$ 
```

**回顾**：

*   最小长度 = 6
*   最大长度没有限制
*   至少4个英文字母，小写或大写
*   至少2位数`0-9`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:23:53.533

**正则解释**

*   `/.../`: 斜线通常用于表示定义正则表达式的区域

*   `^`: 匹配输入字符串的开头

*   `.`: 这可以匹配任何字符

*   `*`: 匹配前一个符号 0 次或更多次

*   `.{6,10}`: 匹配`.`（任何字符）6 到 10 次

*   `[a-zA-Z]`: 匹配and之间的所有字符`a`和`z`and之间`A`的所有字符`Z`

*   `\d`: 匹配一个数字。

*   `$`: 匹配输入的结尾。

我认为这对于您发布的正则表达式中的所有符号都是如此

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T17:51:53.073

对于您的正则表达式请求，您将使用以下内容：

```
^(?=.{6,}$)(?=.*?\d)(?=.*?[!@#$%&*()+_=?\^-]).* 
```

在这里为您展开：

```
^          // Anchor the beginning of the string (password).

(?=.{6,}$) // Look ahead: Six or more characters, then the end of the string.

(?=.*?\d)  // Look ahead: Anything, then a single digit.

(?=.*?[!@#$%&*()+_=?\^-]) // Look ahead: Anything, and a special character.

.*         // Passes our look aheads, let's consume the entire string. 
```

如您所见，必须明确定义特殊字符，因为它们没有保留的速记符号（如`\w`, `\s`, `\d`）。以下是接受的（您可以根据需要进行修改）：

`!, @, #, $, %, ^, &, *, (, ), -, +, _, =, ?`

理解正则表达式前瞻的关键是记住**它们不会移动解析器的位置**。这意味着`(?=...)`将在最后一次模式匹配之后开始查看第一个字符，随后的前瞻也将如此`(?=...)`。

# javascript - 修改 x3d 场景的节点不会产生任何结果

> ID：14384347
> 
> 赞同：0
> 
> 时间：2013-01-17T17:08:24.937
> 
> 标签：javascript, x3d

我在网页中使用 x3d 场景。在这个页面中，我有一个`indexedfaceset`可以正常工作的。我正在添加一个`<Color color="..."></Color>`，它也可以正常工作。

现在我要做的是`Color`在场景已经绘制后更改使用 javascript 的内容。不幸的是，这些修改没有被考虑在内。

我是否必须强制重绘场景或类似的东西？我在 x3d 的运行时 api 上什么也没看到。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:11:21.027

通过x3dom？

如果是这样，请在此处查看我的答案。展示了如何在 js 鼠标事件上通过 tag 和 id 设置属性

我知道您尝试更改索引面集颜色属性，但我认为下面应该给出 ua 起点。如果您需要更简洁的示例，请告诉我

[将属性附加到 x3dom 对象](https://stackoverflow.com/questions/14603444/attaching-attribute-to-x3dom-object)

# java - logcat 有关于 ArrayList 的错误

> ID：14384349
> 
> 赞同：-1
> 
> 时间：2013-01-17T17:08:26.490
> 
> 标签：java, android

程序不是错误，而是关于索引数组列表的 logcat 错误，所以图片我无法解决。请帮我。

```
public class MainActivity extends MapActivity {

@Override

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    MapView mv = (MapView) findViewById(R.id.mapview);

    mv.setBuiltInZoomControls(true);

    MapController mc = mv.getController();

    ArrayList all_geo_points = getDirections(16.821219, 100.260457, 13.913698, 100.510954);

    GeoPoint moveTo = (GeoPoint) all_geo_points.get(0);

    mc.animateTo(moveTo);

    mc.setZoom(12);

    mv.getOverlays().add(new MyOverlay(all_geo_points));

}

@Override

protected boolean isRouteDisplayed() {

    return false;

}

public static ArrayList getDirections(double lat1, double lon1, double lat2, double lon2) {

    String url = "http://maps.googleapis.com/maps/api/directions/xml?origin=" +lat1 + "," + lon1  + "&destination=" + lat2 + "," + lon2 + "&sensor=false&units=metric";

    String tag[] = { "lat", "lng" };

    ArrayList list_of_geopoints = new ArrayList();

    HttpResponse response = null;

    try {

        HttpClient httpClient = new DefaultHttpClient();

        HttpContext localContext = new BasicHttpContext();

        HttpPost httpPost = new HttpPost(url);

        response = httpClient.execute(httpPost, localContext);

        InputStream in = response.getEntity().getContent();

        DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();

        Document doc = builder.parse(in);

        if (doc != null) {

            NodeList nl1, nl2;

            nl1 = doc.getElementsByTagName(tag[0]);
            nl2 = doc.getElementsByTagName(tag[1]);

            if (nl1.getLength() > 0) {

                list_of_geopoints = new ArrayList();

                for (int i = 0; i < nl1.getLength(); i++) {

                    Node node1 = nl1.item(i);

                    Node node2 = nl2.item(i);

                    double lat = Double.parseDouble(node1.getTextContent());

                    double lng = Double.parseDouble(node2.getTextContent());

                    list_of_geopoints.add(new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6)));

                }

            } else {
                // No points found
            }

        }

    } catch (Exception e) {

        e.printStackTrace();

    }

    return list_of_geopoints;

}

public class MyOverlay extends Overlay {

    private ArrayList all_geo_points;

    public MyOverlay(ArrayList allGeoPoints) {

        super();

      this.all_geo_points = allGeoPoints;

    }

    @Override

    public boolean draw(Canvas canvas, MapView mv, boolean shadow, long when) {

        super.draw(canvas, mv, shadow);

        drawPath(mv, canvas);

        return true;

    }

    public void drawPath(MapView mv, Canvas canvas) {

        int xPrev = -1, yPrev = -1, xNow = -1, yNow = -1;

        Paint paint = new Paint();

        paint.setColor(Color.BLUE);

        paint.setStyle(Paint.Style.FILL_AND_STROKE);

        paint.setStrokeWidth(4);

    paint.setAlpha(100);

        if (all_geo_points != null)

            for (int i = 0; i < all_geo_points.size() - 4; i++) {

                GeoPoint gp = (GeoPoint) all_geo_points.get(i);

                Point point = new Point();

                mv.getProjection().toPixels(gp, point);

                xNow = point.x;

                yNow = point.y;

                if (xPrev != -1) {

                    canvas.drawLine(xPrev, yPrev, xNow, yNow, paint);

               }

                xPrev = xNow;

                yPrev = yNow;

            }

    }

} 
```

}

这是关于谷歌地图的代码是线驱动，因此输入点纬度和经度两个点作为驱动器的路线，输入是数组。在代码中不要出错，但代码有关于数组 8 的警告，警告它关于数组的所有警告。运行程序有关于数组索引的错误 logcat。

* * *

01-18 00:37:29.720: E/AndroidRuntime(667): 致命异常: main 01-18 00:37:29.720: E/AndroidRuntime(667): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. example.getgoogledirection/com.example.getgoogledirection.MainActivity}：java.lang.IndexOutOfBoundsException：无效索引 0，大小为 0 01-18 00:37:29.720：E/AndroidRuntime(667)：在 android.app.ActivityThread.performLaunchActivity (ActivityThread.java:2059) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084) 01-18 00:37:29.720: E/AndroidRuntime (667): 在 android.app.ActivityThread.access$600(ActivityThread.java:130) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java :1195) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 android.os.Handler。dispatchMessage(Handler.java:99) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 android.os.Looper.loop(Looper.java:137) 01-18 00:37:29.720: E/ AndroidRuntime(667): 在 android.app.ActivityThread.main(ActivityThread.java:4745) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 java.lang.reflect.Method.invokeNative(Native Method) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 java.lang.reflect.Method.invoke(Method.java:511) 01-18 00:37:29.720: E/AndroidRuntime(667): 在com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 01-18 00:37:29.720: E/AndroidRuntime(667): at com.android.internal.os.ZygoteInit.main(ZygoteInit .java:553) 01-18 00:37:29.720: E/AndroidRuntime(667): at dalvik.system.NativeStart.main(Native Method) 01-18 00:37:29.720: E/AndroidRuntime(667): Caused由：java.lang.IndexOutOfBoundsException：无效索引 0，大小为 0 01-18 00:37:29.720: E/AndroidRuntime(667): at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251) 01-18 00:37:29.720: E/AndroidRuntime(667):在 java.util.ArrayList.get(ArrayList.java:304) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 com.example.getgoogledirection.MainActivity.onCreate(MainActivity.java:45) 01- 18 00:37:29.720: E/AndroidRuntime(667): 在 android.app.Activity.performCreate(Activity.java:5008) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 android.app。 Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)在 java.util.ArrayList.get(ArrayList.java:304) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 com.example.getgoogledirection.MainActivity.onCreate(MainActivity.java:45) 01- 18 00:37:29.720: E/AndroidRuntime(667): 在 android.app.Activity.performCreate(Activity.java:5008) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 android.app。 Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)在 java.util.ArrayList.get(ArrayList.java:304) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 com.example.getgoogledirection.MainActivity.onCreate(MainActivity.java:45) 01- 18 00:37:29.720: E/AndroidRuntime(667): 在 android.app.Activity.performCreate(Activity.java:5008) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 android.app。 Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)callActivityOnCreate(Instrumentation.java:1079) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)callActivityOnCreate(Instrumentation.java:1079) 01-18 00:37:29.720: E/AndroidRuntime(667): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:27:01.297

如果你把 logcat 的输出放在这里，帮助你会容易得多。正如您所提到的，错误可能来自方法 getDirections。

# google-oauth - 强制谷歌帐户选择器

> ID：14384354
> 
> 赞同：63
> 
> 时间：2013-01-17T17:08:52.060
> 
> 标签：google-oauth

有没有一种方法可以强制出现**谷歌账户选择器**，即使用户只使用一个账户登录。

我已经尝试重定向到这个 URL：

```
https://accounts.google.com/AccountChooser?service=lso&continue=[authorizeurl] 
```

它似乎有效，但我不知道是否还有其他可能失败的条件。

![在此处输入图像描述](../Images/3c39b502257ab8964844cb6ea16cc197.png)

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-01-18T06:24:57.870

OAuth2 授权 URL 支持以下参数：

`prompt`

目前它可以有值`none`、`select_account`和`consent`。

*   none：将导致谷歌不显示任何用户界面，因此如果用户需要登录则失败，或者在多次登录的情况下选择一个帐户，或者如果第一次批准则同意。它可以在不可见的 i-frame 中运行，以便在您决定（例如，呈现授权按钮）之前从先前授权的用户那里获取令牌。

*   同意：即使用户之前已授权您的应用程序，也会强制显示批准页面。在一些极端情况下可能很有用，例如，如果您丢失了用户的 refresh_token，因为 Google 仅在明确同意操作时发布 refresh_tokens。

*   select_account：将导致显示帐户选择器，即使只有一个登录用户，正如您所要求的那样。

`select_account`可以与 结合`consent`，如：

`prompt=select_account consent`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-08-22T13:10:26.633

此外，您可以在 HTML 标记中添加“提示”参数作为 data-prompt="select_account"：

```
<div class="g-signin2" data-onsuccess="onSignIn" data-prompt="select_account"> 
```

即使您仅使用一个帐户登录，它也会每次都强制选择帐户

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-03-29T14:56:16.630

有些人最终可能会在这里寻找有关如何在 Microsoft.AspNetCore.Authentication 中执行此操作的答案。

我们可以通过 Startup.ConfigureServices 方法中的以下代码来完成它：

```
services.AddAuthentication()
  .AddGoogle(options =>
  {
      options.ClientId = configHelper.GoogleOAuthClientID;
      options.ClientSecret = configHelper.GoogleOAuthSecret;
      options.CallbackPath = "/signin-google";
      options.AuthorizationEndpoint = string.Concat(options.AuthorizationEndpoint, "?prompt=select_account");
  }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-03-29T06:19:37.957

如果您使用`gapi`的不仅仅是添加`prompt: 'select_account'`
示例：

```
gapi.load('auth2', function () {
            gapi.auth2.init({
                client_id: "client_id.apps.googleusercontent.com",
                scope: "profile email", // this isn't required
                ux_mode: 'redirect',
                redirect_uri: 'https://www.example.com',
                prompt: 'select_account'
            }).then(function (auth2) {
                console.log("signed in: " + auth2.isSignedIn.get());
                x = auth2.isSignedIn.get();
                auth2.isSignedIn.listen(onSignIn);
                var button = document.querySelector('#signInButton');
                button.addEventListener('click', function () {
                    auth2.signIn();
                });
            });
        }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-18T09:21:10.980

对于**google api php 客户端**( [https://github.com/google/google-api-php-client](https://github.com/google/google-api-php-client) )，您可以按以下方式进行操作：

```
$client = new Google_Client();
$client->setApprovalPrompt("force");
$client->createAuthUrl(); 
```

# c# - 使用 C# 将 html 文本插入 .odt OpenOffice 文档

> ID：14384355
> 
> 赞同：2
> 
> 时间：2013-01-17T17:08:55.897
> 
> 标签：c#, openoffice-writer, uno

请帮助任何在 C# 中使用 OpenOffice Writer 文档的人。如何将 HTML 格式的文本插入到文档中？以下代码：

```
((unoidl.com.sun.star.text.XTextDocument)xComponent).getText().getStart().
    setString("The <b>first line </b> in the newly created text document.\n\n"); 
```

准确插入`The <b>first line </b> in the newly created text document.`

我需要插入“新创建的文本文档中的**第一行”**

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T12:12:31.783

If you want to insert formatted text - then you need to change the (paragraph/character) properties.

As you seen already OOo not react on HTML tags ;-)

# ravendb - Raven Db 查询日期

> ID：14384362
> 
> 赞同：0
> 
> 时间：2013-01-17T17:09:38.143
> 
> 标签：ravendb

嗨，谁能回答我为什么这个 linq 查询不会按日期返回？

```
DocumentStore store = new DocumentStore { Url = "http://localhost:8080/" };
store.Initialize();

using (var session = store.OpenSession())
{
    bool carExists = session.Query<Car>().Any(c => c.CarId == 1);

    if (!carExists)
    {
        Car myNewCar = new Car
            {
                CarId = 1,
                ManufactureDate = new DateTime(2010, 1, 1),
                Name = "Porshe"
            };

        session.Store(myNewCar);
        session.SaveChanges();
    }

    IQueryable<Car> cars = session.Query<Car>()
            .Where(c => c.ManufactureDate == new DateTime(2010, 1, 1));

    foreach (var car in cars)
    {
        Console.WriteLine(car.Name);
    }

    Console.ReadKey();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:39:00.323

您的索引在第二次查询时已过时。查看[文档](http://ravendb.net/docs/client-api/querying/stale-indexes)。

此外，您的第一个查询应该是 a `Load`。查看[文档](http://ravendb.net/docs/2.0/client-api/basic-operations/loading-editing-existing-document)。

```
DocumentStore store = new DocumentStore { Url = "http://localhost:8080/" };
store.Initialize();

using (var session = store.OpenSession())
{
    bool carExists = session.Load<Car>(1) != null;

    if (!carExists)
    {
        Car myNewCar = new Car
            {
                CarId = 1,
                ManufactureDate = new DateTime(2010, 1, 1),
                Name = "Porshe"
            };

        session.Store(myNewCar);
        session.SaveChanges();
    }

    IQueryable<Car> cars = session.Query<Car>()
            .Customize(x=> x.WaitForNonStaleResults()) // only for testing!
            .Where(c => c.ManufactureDate == new DateTime(2010, 1, 1));

    foreach (var car in cars)
    {
        Console.WriteLine(car.Name);
    }

    Console.ReadKey();
} 
```

# css - CSS位置绝对相对于作为相对的父元素

> ID：14384365
> 
> 赞同：14
> 
> 时间：2013-01-17T17:09:48.750
> 
> 标签：css, css-position

在我从废弃的尘埃中更新我的 CSS 技能的漫长旅程中，我一直在玩弄某些 CSS 属性——尤其是 z-index——我注意到一些奇怪的东西，或者可能存在某种情况。

示例：http: [//jsfiddle.net/mEpgR/](http://jsfiddle.net/mEpgR/)

元素 div1 的父元素是 cont，我已将 div1 的位置属性设置为绝对，但是当我移动它时，它相对于其父元素移动。我的印象是，设置为绝对定位的项目是外部常规流程，并且仅相对于浏览器端口作为其父项移动。

我错过了什么？

如果小提琴链接不起作用，代码：

CSS：

```
.cont {
position:relative; 
height:200px;
top:200px; 
left:100px; 
background: green; width: 200px; 
}

.div1 {
background:red; 
position:absolute; 
top:50px;
} 
```

HTML：

```
<div class="cont">
<div class="div1">DIV1</div>
</div> 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-17T17:11:57.550

绝对定位元素相对于第一个具有非静态位置的父元素定位。由于您将它放在父级中，`relative`因此它将相对于该父级绝对定位。

您可能正在寻找`fixed`相对于浏览器窗口的位置。

# audio - 信号处理和音频节拍检测

> ID：14384366
> 
> 赞同：1
> 
> 时间：2013-01-17T17:09:53.197
> 
> 标签：audio, signals, processing, detection

我正在尝试按照[GameDev.net](http://archive.gamedev.net/archive/reference/programming/features/beatdetection/index.html)的指南对基本节拍检测（在 C 和/或 Java 中）做一些工作。我了解算法实现背后的逻辑，但是我对如何获得歌曲左右声道（即 mp3 或 wav）的“声音幅度”数据感到困惑。

例如，他从以下假设开始：

> 在这个模型中，我们将通过计算信号的平均声能并将其与瞬时声能进行比较来检测声能变化。假设我们在立体声模式下使用两个值列表：(an) 和 (bn)。(an) 包含左声道每 Te 秒捕获的声音幅度值列表， (bn) 右声道每 Te 秒捕获的声音幅度值列表。

然后他继续操作`an`和`bn`使用他的以下算法。我想知道如何进行必要的信号处理以获取两个通道`an`的`bn`每一`Te`秒，这样我就可以开始遵循他的指南并在歌曲中处理一些简单的节拍检测。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T01:29:42.530

未压缩的音频文件（例如 .wav 或 .aiff）大部分是一长串样本。每个样本由给定时间点的幅度组成。录制音乐时，每秒会采集许多幅度样本。对于立体声（2 通道）音频文件，数组中的样本通常交替通道：[sample1 left, sample1 right, sample2 left, sample2 right, 等等...]。

大多数音频解析库已经有一种方法可以为每个通道分别返回样本。

一旦您拥有每个通道的样本数组，只要您知道采样率或每秒的样本数，就很容易找到特定秒的样本。例如，如果您的文件的采样率为每秒 44100 个样本，并且您想在第*n*秒内捕获样本，您将使用介于 ( *n* * 44100 ) 和 (( *n* + 1 ) * 44100)。

# c# - 哪个性能更高：<= 0 或 <1？

> ID：14384367
> 
> 赞同：1
> 
> 时间：2013-01-17T17:10:01.463
> 
> 标签：c#, performance

回到我学习 C 和汇编的那一天，我们被教导最好使用简单的比较来提高速度。例如，如果你说：

```
if(x <= 0) 
```

相对

```
if(x < 1) 
```

哪个会执行得更快？我的论点（可能是错误的）是第二个几乎总是执行得更快，因为只有一个比较）即它是否小于一个，是或否。

如果数字小于 0，则第一个将快速执行，因为这等于 true，无需检查等号使其与第二个一样快，但是，如果数字为 0 或更大，它总是会变慢，因为它然后必须进行第二次比较以查看它是否等于 0。

我现在使用 C#，虽然为台式机开发速度不是问题（至少在他的观点值得争论的程度上），但我仍然认为需要考虑这些论点，因为我也在为移动设备开发不如台式机强大，速度确实成为此类设备上的一个问题。

为了进一步考虑，**我说的是整数（没有小数）和不能有负数的数字，如 -1 或 -12,345**等（除非有错误），例如，当你不能处理列表或数组时有一个负数的项目，但你想检查一个列表是否为空（或者如果有问题，将 x 的值设置为负表示错误，一个例子是列表中有一些项目，但你不能出于某种原因检索整个列表并表明这一点，您将数字设置为负数，这与说没有项目不同）。

由于上述原因，我故意省略了明显的

```
if(x == 0) 
```

和

```
if(x.isnullorempty()) 
```

和其他用于检测没有项目的列表的项目。

同样，为了考虑，我们正在讨论从数据库中检索项目的可能性，可能使用具有上述功能的 SQL 存储过程（即标准（至少在这家公司）是返回负数来表示问题）。

那么在这种情况下，使用上面的第一项还是第二项更好呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-17T17:12:20.673

它们是相同的。两者都不比另一个快。他们都问完全相同的问题，假设`x`是一个整数。C# 不是汇编。您要求编译器生成最佳代码以获得您要求的效果。您没有指定它如何获得该结果。

另请参阅[此答案](https://stackoverflow.com/a/12135626/721269)。

> 我的论点（可能是错误的）是第二个几乎总是执行得更快，因为只有一个比较）即它是否小于一个，是或否。

显然这是错误的。如果您认为这是真的，请注意会发生什么：

`<`比它更快，`<=`因为它问的问题更少。（你的论点。）

`>`速度相同，`<=`因为它提出了相同的问题，只是答案相反。

从而`<`比`>`！但同样的论点表明`>`它比`<`.

> “只是有一个倒置的答案”似乎潜入了一个额外的布尔运算，所以我不确定我是否遵循这个答案。

出于同样的原因，这是错误的（对于硅，有时对于软件来说是正确的）。考虑：

`3 != 4`计算起来比 更昂贵`3 == 4`，因为它`3 != 4`有一个反向的答案，一个额外的布尔运算。

`3 == 4`比 更昂贵`3 != 4`，因为它`3 != 4`有一个反向的答案，一个额外的布尔运算。

因此，`3 != 4`比它本身更昂贵。

反向答案只是相反的问题，而不是额外的布尔运算。或者，更准确地说，比较结果与最终答案的映射不同。两者都`3 == 4`要求`3 != 4`您比较 3 和 4。该比较的结果是以太“相等”或“不相等”。这些问题只是将“相等”和“不相等”以不同的方式映射到“真”和“假”。两种映射都不比另一种更昂贵。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T17:16:19.303

至少在大多数情况下，不，一个比另一个没有优势。

A`<=`通常不会作为两个单独的比较来实现。在典型的（例如，x86）CPU 上，您将有两个单独的标志，一个表示相等，一个表示负数（也可以表示“小于”）。除此之外，您将拥有依赖于这些标志组合的分支，因此`<`转换为`jl`或`jb`（如果小于则跳转或如果低于则跳转——前者用于有符号数，后者用于无符号数）。A`<=`将转换为`jle`或`jbe`（如果小于或等于则跳转，如果低于或等于则跳转）。

不同的 CPU 将对指令使用不同的名称/助记符，但大多数仍然具有等效的指令。在我所知道的每一种情况下，所有这些都以相同的速度执行。

编辑：糟糕——我的意思是提到我上面提到的一般规则的一个可能的例外。虽然它不完全来自`<`vs. `<=`，但如果/当您可以比较`0`而不是任何其他数字时，您有时可以获得一点（微小的）优势。例如，假设您有一个变量要倒计时，直到达到某个最小值。在这种情况下，如果你可以倒数到 0 而不是倒数到 1，你可能会获得一点优势。原因很简单：我之前提到的标志会受到大多数指令的影响。假设你有类似的东西：

```
 do {
       // whatever
   } while (--i >= 1); 
```

编译器可能会将其翻译为：

```
loop_top:
    ; whatever

    dec i
    cmp i, 1
    jge loop_top 
```

相反，如果您将其与 0（`while (--i > 0)`或`while (--i != 0)`）进行比较，则它可能会转换为类似的东西；

```
loop_top:
    ; whatever

    dec i
    jg loop_top
    ; or: jnz loop_top 
```

这里`dec`设置/清除零标志以指示递减的结果是否为零，因此条件可以直接基于 的结果`dec`，消除`cmp`其他代码中使用的。

然而，我应该补充一点，虽然这在 30 多年前非常有效，但大多数现代编译器可以在没有你帮助的情况下处理这样的翻译（尽管有些编译器可能不会，尤其是对于小型嵌入式系统之类的东西）。IOW，如果您总体上关心优化，那么您几乎不可能有朝一日会关心——但至少对我来说，C# 的应用似乎充其量是值得怀疑的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-17T17:13:29.897

大多数现代硬件都有内置指令，用于在单个指令中检查*小于或等于条件，该指令的执行速度与检查**小于*条件的指令完全相同。适用于（很多）旧硬件的论点不再适用 - 选择您认为最具可读性的替代方案，即可以更好地将您的想法传达给代码读者的替代方案。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-17T17:27:49.047

Here are my functions:

```
public static void TestOne()
{
    Boolean result;
    Int32 i = 2;

    for (Int32 j = 0; j < 1000000000; ++j)
        result = (i < 1);
}

public static void TestTwo()
{
    Boolean result;
    Int32 i = 2;

    for (Int32 j = 0; j < 1000000000; ++j)
        result = (i <= 0);
} 
```

Here is the IL code, which is identical:

```
L_0000: ldc.i4.2 
L_0001: stloc.0 
L_0002: ldc.i4.0 
L_0003: stloc.1 
L_0004: br.s L_000a
L_0006: ldloc.1 
L_0007: ldc.i4.1 
L_0008: add 
L_0009: stloc.1 
L_000a: ldloc.1 
L_000b: ldc.i4 1000000000
L_0010: blt.s L_0006
L_0012: ret 
```

After a few testing sessions, obviously, the result is that neither is faster than the other. The difference consists only in few milliseconds which can't be considered a real difference, and the produced IL output is the same anyway.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-17T17:14:22.350

ARM 和 x86 处理器都将具有“小于”和“小于或等于”的专用指令（也可以评估为“不大于”），因此如果您使用任何半现代编译器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-17T17:21:50.977

在重构时，如果您改变对逻辑的看法，否定（`if(x<=0)`即，与不能正确否定相比）*更快*（并且更不容易出错），但这可能不是您所指的性能。;-)`if(!(x<=0))``if(!(x<1))`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T11:05:29.650

@Francis Rodgers，你说：

> 如果数字小于 0，则第一个将快速执行，因为这等于 true，因此无需检查等于，使其与第二个一样快，但是，如果数字为 0 或更大，它总是会变慢，因为它然后必须进行第二次比较以查看它是否等于 0。

和（在评论中），

> 你能解释一下 > 在哪里与 <= 相同，因为这在我的逻辑世界中没有意义。比如<=0其实和>0是不一样的，完全相反。我只想举个例子，这样我就能更好地理解你的答案

你寻求帮助，你需要帮助。我真的很想帮你，恐怕还有很多人也需要这个帮助。

从更基本的事情开始。您认为测试 > 与测试 <= 不同的想法在逻辑上是错误的（不仅在任何编程语言中）。看看这些图表，放松一下，思考一下。如果您知道 A 和 B 中的 X <= Y 会发生什么？如果您知道每个图中的 X > Y 会发生什么？ ![在此处输入图像描述](../Images/7f709dc7377b8349944ac464be80cf65.png) 对，没有任何改变，它们是等价的。`true`图表的关键细节是`false`在 A 和 B 中位于相反的两侧。其含义是编译器（或通常 - 解码器）可以自由地以两个问题等效的方式重组程序流程。这意味着，不需要将 <= 拆分为两个步骤，只需重新组织一点点在你的流程中。只有非常糟糕的编译器或解释器才能做到这一点。与任何汇编程序无关。这个想法是，即使对于所有比较没有足够标志的 CPU，编译器也可以使用最适合其特性的测试生成（伪）汇编代码。但是增加 CPU 在电子级别并行检查多个标志的能力，编译器的工作要简单得多。[http://download.intel.com/products/processor/manual/325462.pdf](http://download.intel.com/products/processor/manual/325462.pdf)

无论如何，我想讨论更多有关相关情况的信息。

与 0 或 1 比较：@Jerry Coffin 在汇编程序级别上有很好的解释。深入机器代码级别，与 1 比较的变体需要将 1 “硬编码”到 CPU 指令中并将其加载到 CPU 中，而另一个变体设法不这样做。无论如何，这里的收益绝对很小。我认为在任何真实的现场情况下速度都无法衡量。作为旁注，该指令`cmp i, 1`将只进行一种减法`i-1`（不保存结果）但设置标志，最终您实际上与 0 进行比较！

更重要的可能是这种情况：compare `X<=Y`or with 显然在逻辑上是等价的，但是如果和是表达式 with 需要被评估并且可能影响另一个的结果，`Y>=X`这可能会产生严重的副作用！仍然非常糟糕，并且可能未定义。`X``Y`

现在，回到图表，看看@Jerry Coffin 的汇编器示例。我在这里看到以下问题。真正的软件是一种内存中的线性链。您选择其中一个条件并跳转到另一个程序存储器位置以继续，而相反的情况则继续。选择更频繁的条件作为继续的条件可能是有意义的。我不明白在这些情况下我们如何给编译器一个提示，而且显然编译器自己也无法弄清楚。如果我错了，请纠正我，但这类优化问题非常普遍，程序员必须在没有编译器帮助的情况下自行决定。

但同样，在任何情况下，我都会编写我的代码，着眼于一般的静止和可读性，而不是这些局部的小优化。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-17T17:27:53.530

Even if x<=0 compiled to different instructions than x<1, the performance difference would be so miniscule as to not be worth worrying about most of the time; there will very likely be other more productive areas for optimizations in your code. The golden rule is to profile your code and optimise the bits that ARE actually slow in the real world, not the bits that you think hypothetically may be slow, or are not as fast as they theoretically could be. Also concentrate on making your code readable to others, and not phantom micro-optimisations that disappear in a puff of compiler smoke.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-17T17:13:52.770

IF`x<1`更快，那么现代编译器将更`x<=0`改为`x<1`（假设`x`是积分）。所以对于现代编译器来说，这应该无关紧要，它们应该产生相同的机器代码。

# java - 如何在数据库中保存样式文本并将相同样式的文本检索到 JEditor 窗格中

> ID：14384368
> 
> 赞同：0
> 
> 时间：2013-01-17T17:10:06.300
> 
> 标签：java, swing, sql-server-2005, jeditorpane

任何人都可以给我任何想法，如果我可以存储在 MSSQL SERVER 数据库的 JEditorPane 中修改的文本属性（如粗体、斜体等）？用户应该能够修改文本属性，然后将其存储在数据库中，并在需要时以相同的属性样式再次从数据库中检索它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T17:14:43.310

您必须定义正确的 EditorKit。例如`HTMLEditorKit`，将允许您将文本存储为带有所有样式信息的 HTML。只需使用 getText() 和 setText() 来处理格式化的内容。

或者，您可以编写自己的 Reader/Writer，例如[http://java-sl.com/editor_kit_tutorial_reader_writer.html](http://java-sl.com/editor_kit_tutorial_reader_writer.html)

# jsf - 如何在 JSF 2.0/2.1 中用 CDI 替换 @ManagedBean / @ViewScope

> ID：14384369
> 
> 赞同：27
> 
> 时间：2013-01-17T17:10:07.850
> 
> 标签：jsf, jsf-2, cdi, view-scope

我目前正在使用 RichFaces 评估 Java EE 6 / JSF 2.1。

一个被声明为的bean

```
@ManagedBean
@ViewScoped 
```

1.  获取一个 ID 集（准备例如删除操作）。
2.  通过 JSF 会显示一个确认弹出窗口。
3.  如果用户确认，则调用 delete 方法并删除在步骤 1 中为其存储 ID 的行。

由于 CDI bean 没有 ViewScope，我尝试将 bean 声明为：

```
@Named
@ConversationScoped 
```

现在处理在步骤 3 中失败。因为在步骤 1 中设置的值（检查）不再可用。

我必须使用`Conversation.begin()`和`Conversation.end()`方法吗？

如果是这样，哪里是调用它们的好地方？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-17T17:33:55.913

如果您可以升级到 JSF 2.2，请立即执行此操作。它[`@ViewScoped`](http://docs.oracle.com/javaee/7/api/javax/faces/view/ViewScoped.html)为 CDI 提供了原生注释。

```
import javax.faces.view.ViewScoped;
import javax.inject.Named;

@Named
@ViewScoped
public class Bean implements Serializable {
    // ...
} 
```

或者，安装[OmniFaces](http://omnifaces.org)，它带来了自己的 CDI 兼容[`@ViewScoped`](http://showcase.omnifaces.org/cdi/ViewScoped)，包括一个工作`@PreDestroy`（在 JSF 上被破坏`@ViewScoped`）。

```
import javax.inject.Named;
import org.omnifaces.cdi.ViewScoped;

@Named
@ViewScoped
public class Bean implements Serializable {
    // ...
} 
```

另一种选择是安装[MyFaces CODI](http://myfaces.apache.org/extensions/cdi/)，它将 JSF 2.0/2.1 透明地连接`@ViewScoped`到 CDI。这只会向 URL 添加一个自动生成的请求参数（就像`@ConversationScoped`会做的那样）。

```
import javax.faces.bean.ViewScoped;
import javax.inject.Named;

@Named
@ViewScoped
public class Bean implements Serializable {
    // ...
} 
```

如果你真的需要使用`@ConversationScoped`，那么你确实需要手动开始和结束它。您需要在对话的最后一步中`@Inject`调用和[`Conversation`](http://docs.oracle.com/javaee/7/api/javax/enterprise/context/Conversation.html)调用，通常是重定向到新视图的操作方法。`begin()``@PostConstruct``end()`

```
import javax.enterprise.context.Conversation;
import javax.enterprise.context.ConversationScoped;
import javax.inject.Named;

@Named
@ConversationScoped
public class Bean implements Serializable {

    @Inject
    private Conversation conversation;

    // ...

    @PostConstruct
    public void init() {
        conversation.begin();
    }

    public String submit() {
        // ...

        conversation.end();
        return "some.xhtml?faces-redirect=true";
    }

} 
```

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-28T22:04:26.427

我认为您可以从 CDI 扩展中受益，以创建自己的范围，这样您就可以实现上下文并使用`@NormalScope`.

*   `AfterBeanDiscovery`CDI在每次 bean 调用后触发一个事件
*   您可以`@Observes`对此事件使用 CDI 扩展并添加您的上下文实现
*   在您的范围实施中，您可以：
    1.  用于`Contextual`通过其名称获取您的 bean，并**在每次 ajax 回调后**`FacesContext` `ViewRoot` `Map`返回它
    ***   如果`CreationalContext`找不到第一步中的 bean 名称，则在`FacesContext` `ViewRoot` `Map`**

 **对于更深入的解释，我推荐这个链接：[http ://www.verborgh.be/articles/2010/01/06/porting-the-viewscoped-jsf-annotation-to-cdi/](http://www.verborgh.be/articles/2010/01/06/porting-the-viewscoped-jsf-annotation-to-cdi/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T17:39:39.697

将对话注入到您的 bean 中，`@PostConstructor`如果对话是短暂的，则在方法中启动对话。

删除记录后，结束对话并导航到目标页面。开始对话时。这是一个例子

```
public class BaseWebBean implements Serializable {

private final static Logger logger = LoggerFactory.getLogger(BaseWebBean.class);
@Inject
protected Conversation conversation;

@PostConstruct
protected void initBean(){
}

public void continueOrInitConversation() {
        if (conversation.isTransient()) {
            conversation.begin();
            logger.trace("conversation with id {} has started by {}.", conversation.getId(), getClass().getName());
        }
    }

public void endConversationIfContinuing() {
        if (!conversation.isTransient()) {
            logger.trace("conversation with id {} has ended by {}.", conversation.getId(), getClass().getName());
            conversation.end();
        }
} 
```

}

```
@ConversationScoped
@Named
public class yourBean extends BaseWebBean implements Serializable {
    @PostConstruct
    public void initBean() {
        super.initBean();
        continueOrInitConversation();
    }

    public String deleteRow(Row row)
    {
        /*delete your row here*/
        endConversationIfContinuing();
        return "yourDestinationPageAfter removal";
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-06T13:19:20.237

有一个项目对 Java EE 堆栈特性进行了扩展：[DeltaSpike](https://blogs.oracle.com/theaquarium/entry/introducing_deltaspike_1_0)。它是 Seam 3、Apache CODI 的整合。最重要的是，它将@ViewScoped 包含在 CDI 中。这是一篇旧文章，现在已经到了 1.3.0 版本

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-18T13:01:43.130

您可以使用：

```
import javax.annotation.PostConstruct;
import javax.faces.view.ViewScoped;
import javax.inject.Named;

@Named
@ViewScoped
public class PageController implements Serializable {

    private String value;

    public void setValue(String value) {
    this.value = value;
    }

    public String getValue() {
    return value;
    }

    public void execute() {
    setValue("value");
    }

    @PostConstruct
    public void init() {
    System.out.println("postcontructor");
    }

} 
```**

# java - 在spring中设置一个bean的公共变量而不使用setter

> ID：14384376
> 
> 赞同：2
> 
> 时间：2013-01-17T17:10:25.560
> 
> 标签：java, spring

我在一些网站上读到，使用 Spring 可以进行基于 setter 的依赖注入，而无需为注入的变量创建 setter。会很好地整理代码。我[在另一个](http://www.mkyong.com/spring3/spring-el-hello-world-example/)网站上读到了这个，也在stackoverflow上读到了这个。

我已经尝试过了，但在我的情况下它不起作用。我正在使用 3.2.0.RELEASE。我收到以下错误。

```
 Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'DI_without_setter' defined in class path resource [SpringBeans.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'url' of bean class [net.comsys.springpropstest.DiWithoutSetter]: Bean property 'url' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter? 
```

**我的 Java 测试代码**

包 net.xxx.springpropstest；

```
public class DiWithoutSetter {
private String url;
} 
```

我刚刚将它添加到我的主代码中。此处不显示。我什至不在主代码中使用 DiWithoutSetter。

**SpringBeans.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<bean id="DI_without_setter" class="net.xxx.springpropstest.DiWithoutSetter">
    <property name="url" value="jan" />
</bean> 
```

如果有人能对他的问题有所了解，那将不胜感激。是否可以在不使用 setter 方法的情况下在 Spring bean 中设置（公共）变量的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:23:45.920

您不能这样做（您需要一个 setter），并且该教程似乎是错误的（请注意在示例源 zip 中，这些类有 getter 和 setter）。

`@Inject`使用自动装配隐式添加 setter 或字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:31:12.840

You would need to annotate the field with `@Autowired` and enable component scanning for this injection to work without a setter method.

# mysql - mysql SQL优化

> ID：14384378
> 
> 赞同：1
> 
> 时间：2013-01-17T17:10:30.247
> 
> 标签：mysql, sql

这个查询需要一个小时

```
select *,
      unix_timestamp(finishtime)-unix_timestamp(submittime) timetaken 
from joblog 
where jobname like '%cas%' 
and submittime>='2013-01-01 00:00:00' 
and submittime<='2013-01-10 00:00:00'
order by id desc limit 300; 
```

但同一个查询`submittime`在 0.03 秒内完成

该表有 210 万行

任何想法是什么导致了问题或如何调试它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:20:39.057

您可以尝试在查询中添加一个 LIMIT ，看看这是否会提高它返回的速度......

摘自[http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

“有时 MySQL 不使用索引，即使索引可用。这种情况发生的一种情况是优化器估计使用索引将需要 MySQL 访问表中很大比例的行。（在这种情况下，表扫描可能会快得多，因为它需要更少的查找。）但是，如果这样的查询使用 LIMIT 只检索一些行，MySQL 无论如何都会使用索引，因为它可以更快地找到少数几行返回结果。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:04:08.777

```
select *,unix_timestamp(finishtime)-unix_timestamp(submittime) timetaken  
from joblog  
where   (submittime between '2013-01-10 00:00:00'  and  '2013-01-19 00:00:00')   
and jobname is not null 
and jobname like '%cas%'; 
```

这有帮助

（0.93 秒）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:15:02.053

您的第一步应该是使用[MySQL EXPLAIN](https://dev.mysql.com/doc/refman/5.0/en/explain.html)查看查询在做什么。它可能会让您对如何解决您的问题有所了解。

我的猜测是这`jobname LIKE '%cas%'`是最慢的部分，因为您正在进行通配符文本搜索。在此处添加索引甚至无济于事，因为您有一个前导通配符。有没有办法在没有这样的前导通配符的情况下执行此查询？另外添加索引`submittime`可能会提高此查询的速度。

# android - Leadbord 数据库

> ID：14384381
> 
> 赞同：0
> 
> 时间：2013-01-17T17:10:37.443
> 
> 标签：android, sql

这实际上是我第一次尝试在 android 上使用 SQL 数据库。所以我希望你能帮助我。我目前正在为我们的游戏开发一个引导条，并想为它编写通信类，但我遇到了麻烦。我为此使用了[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)。这就是我的 Db Helper 类的样子

```
public class MySQLiteHelper extends SQLiteOpenHelper {

public static final String TABLE_LEADBOARD = "leadboard";
public static final String COLUMN_ID = "_id";
public static final String COLUMN_NAME = "name";
public static final String COLUMN_LEVEL = "level";
public static final String COLUMN_KILLPOINTS = "killpoints";

private static final String DATABASE_NAME = "leadboard.db";
private static final int DATABASE_VERSION = 1;

// Database creation sql statement
private static final String DATABASE_CREATE = "create table "
    + TABLE_LEADBOARD + "(" + COLUMN_ID
    + " integer primary key autoincrement, " + COLUMN_NAME
    + " text,"+ COLUMN_LEVEL + " integer," +COLUMN_KILLPOINTS + " integer);";

public MySQLiteHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(MySQLiteHelper.class.getName(),
            "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_LEADBOARD);
    onCreate(db);
}
} 
```

我写了一个简单的元素，它有 4 个字段和 getter 和 setter

```
public class LeadbordElement {
    private long id;
    private int level;
    private int killPoints;
    private String name; 
```

我的连接类现在看起来像这样

```
public class DatabaseCommunication {
    // Database fields
    private SQLiteDatabase database;
    private MySQLiteHelper dbHelper;
    // all columns for the query
    private String[] allColumns = { MySQLiteHelper.COLUMN_ID,
            MySQLiteHelper.COLUMN_NAME, MySQLiteHelper.COLUMN_LEVEL,
            MySQLiteHelper.COLUMN_KILLPOINTS };

    public DatabaseCommunication(Context context) {
        dbHelper = new MySQLiteHelper(context);
    }

    public void open() throws SQLException {
        database = dbHelper.getWritableDatabase();
    }

    public void close() {
        dbHelper.close();
    }

    /**
     * Save element to database
     * 
     * @author Benjamin M. 17.01.2013
     * @param element
     */
    public void addLeadbordElement(LeadbordElement element) {
        this.open();
        ContentValues values = new ContentValues();
        values.put(MySQLiteHelper.COLUMN_NAME, element.getName());
        values.put(MySQLiteHelper.COLUMN_LEVEL, element.getLevel());
        values.put(MySQLiteHelper.COLUMN_KILLPOINTS, element.getKillPoints());
        database.insert(MySQLiteHelper.TABLE_LEADBOARD, null, values);
        this.close();
    }

    /**
     * Methode to get a Vektor of elements
     * 
     * @author Benjamin M. 17.01.2013
     */
    public Vector<LeadbordElement> getTop10() {
        this.open();
        // should return ordert by killpoints
        Cursor cursor = database.query(MySQLiteHelper.TABLE_LEADBOARD,
                allColumns, null, null, null, null,
                MySQLiteHelper.COLUMN_KILLPOINTS + " DESC");

        Vector<LeadbordElement> elements = new Vector<LeadbordElement>();

        //creating the vector of elements
        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
            elements.add(this.createElement(cursor));
            cursor.moveToNext();
        }
        cursor.close();
        this.close();
        return elements;
    }

    /**
     * Methode to create a LeadbordElement out of the cursor
     * 
     * @author Benjamin M. 17.01.2013
     * @param cursor
     * @return
     */
    private LeadbordElement createElement(Cursor cursor) {
        LeadbordElement element = new LeadbordElement();
        element.setId(cursor.getLong(0));
        element.setName(cursor.getString(1));
        element.setLevel(cursor.getInt(2));
        element.setKillPoints(cursor.getInt(3));
        return element;
    }
} 
```

但这实际上是行不通的。我不能像这样进入前10名，我也没有弄错。好吧，实际上我可以创建 DatabaseCommunication 并且可以添加一个元素。不确定它是否真的被添加到数据库中。但我不能让那些回来。它说没有 Column: level: ，而编译时： select _id .......

至少我有一个 textview 并想在那里显示元素。

谢谢，如果你能帮忙！

错误日志：

```
01-17 19:04:35.920: E/AndroidRuntime(1428): FATAL EXCEPTION: main
01-17 19:04:35.920: E/AndroidRuntime(1428): java.lang.IllegalStateException: Could not execute method of the activity
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.view.View$1.onClick(View.java:3044)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.view.View.performClick(View.java:3511)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.view.View$PerformClick.run(View.java:14110)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.os.Handler.handleCallback(Handler.java:605)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.os.Looper.loop(Looper.java:137)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at java.lang.reflect.Method.invokeNative(Native Method)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at java.lang.reflect.Method.invoke(Method.java:511)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at dalvik.system.NativeStart.main(Native Method)
01-17 19:04:35.920: E/AndroidRuntime(1428): Caused by: java.lang.reflect.InvocationTargetException
01-17 19:04:35.920: E/AndroidRuntime(1428):     at java.lang.reflect.Method.invokeNative(Native Method)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at java.lang.reflect.Method.invoke(Method.java:511)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.view.View$1.onClick(View.java:3039)
01-17 19:04:35.920: E/AndroidRuntime(1428):     ... 11 more
01-17 19:04:35.920: E/AndroidRuntime(1428): Caused by: android.database.sqlite.SQLiteException: no such column: level: , while compiling: SELECT _id, name, level, killpoints FROM leadboard ORDER BY killpoints DESC
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1449)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1405)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1485)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at control.database.DatabaseCommunication.getTop10(DatabaseCommunication.java:61)
01-17 19:04:35.920: E/AndroidRuntime(1428):     at com.main.MainActivity.startLeadbord(MainActivity.java:178)
01-17 19:04:35.920: E/AndroidRuntime(1428):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:50:14.497

我*想*我看到了...请在 COLUMN_LEVEL 和 COLUMN_KILLPOINTS 之后添加一个（缺少的）空格

从...

```
private static final String DATABASE_CREATE = "create table "
    + TABLE_LEADBOARD + "(" + COLUMN_ID
    + " integer primary key autoincrement, " + COLUMN_NAME
    + " text,"+ COLUMN_LEVEL + "integer," +COLUMN_KILLPOINTS + "integer);"; 
```

到....

```
private static final String DATABASE_CREATE = "create table "
    + TABLE_LEADBOARD + "(" + COLUMN_ID
    + " integer primary key autoincrement, " + COLUMN_NAME
    + " text,"+ COLUMN_LEVEL + " integer," +COLUMN_KILLPOINTS + " integer);"; 
```

# eclipse - XSD 类型定义是否在编译时验证？

> ID：14384385
> 
> 赞同：2
> 
> 时间：2013-01-17T17:10:49.460
> 
> 标签：eclipse, xsd, wsdl, xsd-validation

在我的一个项目中，我曾经有一个定义为长度为 20 的 WSDL 元素：

```
<xs:element name="LastName" type="mns:String20Type" /> 
```

其中*String20Type*在内部 XSD 中定义：

```
 <xs:simpleType name="String20Type">
            <xs:restriction base="xs:string">
                <xs:maxLength value="20" />
            </xs:restriction>
        </xs:simpleType> 
```

为了增加该元素的长度，我将*String20Type*更改为*String40Type* **，而没有在模式中添加类型定义**并重新构建：

```
<xs:element name="LastName" type="mns:String40Type" /> 
```

构建成功完成，没有任何错误、警告、投诉或任何类型的提示。

为什么？

系统怎么知道`String40Type`是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:15:06.383

按照要求：

嗯...听起来像是 Eclipse 没有正确验证它，或者您在某处定义了该类型。我使用 LiquidXML 和 Altova XML Spy。我建议你试试那些专门的 IDE 包，让他们验证它，看看错误在哪里。他们有免费试用，所以试一试。

# php - 如果文章在 12 个月后发布，则停止检索文章

> ID：14384390
> 
> 赞同：0
> 
> 时间：2013-01-17T17:11:14.493
> 
> 标签：php, date, while-loop, comparison

我正在为所有包含以下格式的日期的文章抓取页面：

```
2012-08-20T11:04:00+0200 
```

如果下一篇文章从今天起 12 个月发布，我想要做的是停止检索文章。我能想到的方法如下：

```
while ($retrieveArticles == true) {

    $stopDate = date('Y-m-d'); // <--- this gives me todays date while I need the date 12 months ago.

    $date = $article->find('header div p span', 1);
    $date = substr($date->title, 0, 10); // <--- becomes 2012-08-20

    if ($date >= $stopDate) {
        $retrieveArticles = false;
    }

    ... not relevant code

} 
```

### 我需要帮助：

1.  如何从今天的日期减去 12 个月？

2.  我这样做是正确的，还是有更好、更优雅的方法来实现我想要的？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:17:04.543

是肯定的 ：

```
$in_12_months = strtotime('+12 months');

while ($retrieveArticles == true) {
  $article_date = strtotime($article->find('header div p span', 1));

  if ($article_date >= $in_12_months) {
    $retrieveArticles = false;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:22:22.377

我是这样做的：

```
<?php
$s = strtotime('2012-02-09T11:04:00+0200');
$timeDifference = time() - $s;
echo round($timeDifference / 60 / 60 / 24 / 30);
?> 
```

输出： `11`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T17:30:03.363

如果将日期的 Ymd 格式与一起比较，那将是错误的：
您需要使用 strtotime() 函数将其转换为时间格式。12 个月，即（365*24*3600 秒）。所以你可以像这样改变你的功能：

```
while ($retrieveArticles == true) {

    $stopDate = date('Y-m-d'); // <--- this gives me todays date while I need the date 12 months ago.

    $date = $article->find('header div p span', 1);
    $date = substr($date->title, 0, 10); // <--- becomes 2012-08-20

    $stopDate = strtotime($stopDate);
    $date = (int)strtotime($date)  + (365*24*3600);
    if ($stopDate >= $date) {
        $retrieveArticles = false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T17:16:30.287

转换`2012-08-20T11:04:00+0200`为时间戳：[如何在 PHP 中将日期转换为时间戳？](https://stackoverflow.com/questions/113829/how-to-convert-date-to-timestamp-in-php)
然后只是这样做`$seconds = time()-$theresult`将是从那时起的秒数。12 个月应该大约等于 3100 万秒

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T17:24:58.007

你可以这样做：

```
<?php
// Current date
$posted = strtotime("2012-08-20T11:04:00+0200");

// 12 months ago
$timestamp = strtotime("-12 months", $posted);

// days
$days = ($posted - $timestamp) / 60 / 60 / 24;

$get_items = true;
if($days >= 365){
    $get_items = false;
} 
```

# android - 使用 LayoutInflater 膨胀 XML 的内存泄漏

> ID：14384391
> 
> 赞同：2
> 
> 时间：2013-01-17T17:11:16.783
> 
> 标签：android, memory-leaks, android-actionbar

我面临一个非常奇怪的问题。我有一个`Activity`,`ActionBar`包含一个自定义视图。

如果我像这样加载这个自定义视图的 XML：

```
LayoutInflater inflater = LayoutInflater.from(this);
ViewGroup vg = (ViewGroup) inflater.inflate(R.layout.action_search_form,null); 
```

它泄漏：活动不是 GC'd。以下修复有效（**为什么？**）：

```
LayoutInflater inflater = LayoutInflater.from(getApplicationContext()); 
```

但是，如果我`OnClickListener`在子视图上设置 a ，它会再次泄漏：

```
ImageButton clear = (ImageButton) vg.findViewById(...);
clear.setOnClickListener(new View.OnClickListener() {

   @Override
   public void onClick(View v) {
            // Even if empty
        }
    });
} 
```

所有这些都发生在活动的私有方法中，所有视图都是局部变量。

**我找到了一个修复方法，但不明白它为什么起作用：**视图很简单，所以我用 Java 编写了它，而不是夸大 XML。我怀疑这与没有上下文传递给 LayoutInflater 并且 Activity 本身没有发生任何事情有关，但是如果有人可以帮助我理解发生了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T18:51:36.610

所有 View 类都需要一个 Context 参数。当您对 XML 进行膨胀时，提供给创建视图的上下文与提供给 LayoutInflater 的上下文相同。您的视图保留了对您的活动的引用。

当您使用 getApplicationContext() 并且 Activity 不泄漏的原因是因为您传递的上下文对应用程序的整个生命周期都是全局的，而不仅仅是活动。

** 编辑 **

至于为什么 OnClickListener 还保留您的 Activity，这是因为使用匿名内部类的副作用。默认情况下，这些内联实现保留对父/包装类实例的引用。这样您就可以从内部的实现中调用父级的方法。

例如：

```
myView.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        MyActivity.this.doSomethingCool();
    }
} 
```

无论方法体中是否有任何内容，内部类仍然保持对父类的引用。

# google-chrome - 在移动设备上调试触摸事件。

> ID：14384393
> 
> 赞同：0
> 
> 时间：2013-01-17T17:11:19.027
> 
> 标签：google-chrome, mobile, webkit, sitefinity-5

情况。

我有一个带有一些链接的菜单条的站点。在桌面上，这些链接按预期工作，在移动 Firefox 上，太棒了！然而，在 webkit、safari 和 chrome 上，当你触摸它们时，它们似乎没有注册。

我使用 Adob​​e Edge 进行了检查，但它在该浏览器中运行良好，无论如何，哪个浏览器是基于 webkit 的还是其他的？

我也试过用js调试，但没有运气。我会尝试获取一个`alert()`如果说父元素，或者链接元素本身被触摸，我似乎只能让它们注册，如果我稍微混搭一下。

该网站是建立在 Sitefinity 上的，我环顾四周，似乎找不到与此相关的任何内容。

我怎样才能开始尝试找出问题所在？在我看来，它与 webkit 相关，如果我错了，请纠正我，因为它发生在 chrome 和 safari 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:18:51.473

在 Android 设备上，您可以通过`console.log('blah!')`logcat 编写和读取消息。您还应该在其中看到其他 javascript 错误。

看：

[http://developer.android.com/guide/webapps/debugging.html](http://developer.android.com/guide/webapps/debugging.html)

# gwt - 如何找到 DataGrid 标题的高度？

> ID：14384394
> 
> 赞同：0
> 
> 时间：2013-01-17T17:11:23.427
> 
> 标签：gwt, datagrid

我需要找出 DataGrid 的高度，以便明确设置它。我可以找到所有数据行的高度：

```
for (int i = 0; i < getRowCount(); i++) {
    height += getRowElement(i).getOffsetHeight();
} 
```

但我如何找到标题的高度？如果所有标题都放在一行中，我知道它的高度，但在某些情况下，标题可能会占用多行。

# javascript - 如何禁用 CKEditor 的源代码视图？

> ID：14384395
> 
> 赞同：1
> 
> 时间：2013-01-17T17:11:28.920
> 
> 标签：javascript, ruby-on-rails, ckeditor, rails-admin

我有一个带有 CKEditor 与 rails admin 和回形针集成的 rails 应用程序，但我需要禁用源代码视图选项以防止 javascript 注入。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:18:49.830

从 config.js 文件中删除插件。（或注释掉）

[https://github.com/ckeditor/ckeditor-dev/blob/master/config.js](https://github.com/ckeditor/ckeditor-dev/blob/master/config.js)

可能是`'sourcearea'`变种。

# javascript - 如何强制执行单页 Web 应用程序的安全性？

> ID：14384396
> 
> 赞同：0
> 
> 时间：2013-01-17T17:11:29.637
> 
> 标签：javascript, angularjs, security

例如，我正在使用 AngularJS 编写一个 Web 应用程序，它为用户存储机密信息，例如他们的信用卡号。

我在想我应该使用哪些安全协议。我在安全方面没有经验，所以我发现自己在这类问题上无能为力。我整理了一些要求：

*   客户端永远不会受到保护，因此服务器需要对用户身份进行自己的验证。
*   服务器不能将密码作为纯文本存储在数据库中，而是一个不可逆转的修改字符串。
*   通过互联网发送密码是不安全的，因此服务器无法要求原始密码。

到目前为止，我很困惑，因为要求似乎自相矛盾。我必须对用户密码进行不可逆的转换，而我的服务器无法要求原始密码，这意味着只能在客户端进行转换。另一方面，您永远不能信任客户端，因为它对用户开放并且容易被黑客入侵。

是否有任何现有的安全协议/框架可以解决我提到的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:38:09.590

1) 如果您正在处理任何类型的机密信息，您应该使用 https。这将允许将密码从客户端发送到您的服务器。2）在创建密码时对其进行散列，并将该散列保存在您的数据库中。以后登录时，您可以对提供的密码进行哈希处理并比较哈希值。

3）如果您正在处理信用卡信息，那么您必须考虑一大堆其他东西。您应该快速查看 PCI 要求（如果您要保存信用卡信息），如果您只是想处理信用卡，我建议您将其委托给 Stripe 等第三方资源。他们将为您处理所有卡安全方面的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:55:07.703

您还应该考虑清理和验证用户输入以避免 SQL 注入、跨站点脚本等。

# batch-file - 处理具有跨多行变量的批处理文件

> ID：14384405
> 
> 赞同：1
> 
> 时间：2013-01-17T17:11:59.327
> 
> 标签：batch-file, dos

有很多帖子讨论批处理文件中的拆分行，但我不能完全满足我的要求。我想要一个包含 IP 列表集的属性文件，然后在批处理文件中处理这些列表。所以一个类似这样的属性文件（我不希望列表在一行，因为可能有很多，而单行会让人难以阅读）：

```
IPLIST_1=^
12.34.56.1 ^
21.43.65.2 ^
5.8.001.3

IPLIST_2=^
222.11.33.1 ^
10.1.1.2 
```

和一个执行以下操作的批处理文件：

```
setlocal EnableDelayedExpansion
FOR /f "delims=" %%x in (iplists.txt) DO (set "%%x")
FOR %%A IN (%IPLIST_1%) DO (
some stuff
) 
```

但它没有像我希望的那样工作。如果我有这样的批处理文件，一切都很好：

```
FOR %%A IN (^
12.34.56.1 ^
21.43.65.2 ^
5.8.001.3) DO (
some stuff
) 
```

谢谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:03:27.987

```
@echo off
set "LIST="
for /f "tokens=1 delims=^^" %%I in (iplists.txt) do (

  setlocal enabledelayedexpansion
  echo %%I | find "IPLIST_" &&  for %%P in (!LIST!) do ( something with %%P ) & (  set "IPLIST_=")
  echo %%I | find "IPLIST_" || ( set "LIST=!LIST! %%I")
  endlocal

) 
```

很难理解你在这里有什么。我的假设：

1.  你有文件 iplists.txt

2.  您希望 bat 将每个列表解释为一整行，但是 IP 位于不同的行上，因此您尝试将它们与**^**结合起来 （实际上这是徒劳的）

3.  您想在 FOR 循环中处理每个列表

上面的代码是我的提议 - 在外循环中，**^**被转义 - 你根本不需要它们，但它们不会受到伤害。你不能像在批处理脚本中那样将列表合并在一行中。

* * *

首先，我开始逐行阅读 list.txt。我有一个空列表最初传递给内部 FOR - 但迭代以空格分隔的项目，如果没有这样的项目，它将什么也不做。**setlocal enabledelayedexpansion**是为了使 LIST 中的更改在括号内可见。与两个`echo %%I | find "IPLIST_"`我正在执行条件执行。如果 %%I 行不包含`IPLIST_`字符串，则将执行第二行，并使用下一个 IP 扩展 LIST。如果它包含“IPLIST_”，将执行第一行，列表将由内部 FOR 处理并最终删除。然后我们重新开始，直到文件末尾。

# css - 使用 CSS 在父 div 中居中任意数量的 div

> ID：14384407
> 
> 赞同：0
> 
> 时间：2013-01-17T17:12:11.397
> 
> 标签：css, alignment, center

我有一个带有随机数量的子 div 的父 DIV（菜单栏）。我正在寻找一个干净、简单的 CSS，它将始终水平居中子 div，而不管它们的宽度或 div 的数量（只要它们适合父级）。我不想计算所有宽度或使用绝对定位。

在查看了几个解决方案后，我想出了这段代码，但是子 div 仍然不能正确居中，尤其是当你用文本或图像填充它们时。

**HTML：**

```
<div id="menubar">
   <div id="button">too much text will offset the other buttons</div>
   <div id="button">b2</div>
   <div id="button">b3</div>
</div> 
```

**CSS：**

```
#menubar {
    position:absolute;
    bottom:0px;
    background-color: #00A0E2;
    width:100%; height:80px;
    text-align:center;
} 

#button {
    margin: 5px auto 5px auto;
    width:120px;height:70px;
    display:inline-block;
    background-color:white;
    cursor: pointer;
} 
```

我创建了这个 JSFiddle 来说明我的问题：http: [//jsfiddle.net/mZ2P2/](http://jsfiddle.net/mZ2P2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:16:36.963

您忘记`vertical-align`了内联元素，以便它们在高度不同时正确显示。这是一个[工作示例](http://jsfiddle.net/wVA7N/1/)。我还删除了`id`按钮的属性并将其更改为`class`.

**编辑：** jsfiddle.net 现在对我来说不是很好。引入的变化是`vertical-align: top`针对`.button`班级的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:16:03.970

为什么不使用无序列表，然后使用 css 将它们定位在中心。

# java - 如何通过 Ant - Swing 传递 jvm 参数

> ID：14384412
> 
> 赞同：1
> 
> 时间：2013-01-17T17:12:29.730
> 
> 标签：java, swing, ant, jvm-arguments

我想`-Dfile.encoding=UTF-8`使用 Ant 脚本将 JVM 参数传递给我的 swing 应用程序，我正在使用 eclipse，并且我正在寻找最少的 Ant 脚本内容来执行此操作。这是我第一次使用 ant buildfile。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T07:03:32.340

如果您使用[ant 的 java 任务](http://ant.apache.org/manual/Tasks/java.html)来启动应用程序，请查看其`<jvmarg >..`选项。您必须设置`fork`为 true，以便应用程序在设置了适当系统属性的新进程下运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:13:09.677

我假设您想构建一个包含您的应用程序的 jar 文件。但是，这样做时无法指定运行时系统属性。有关 JAR 结构的概述，请参阅[http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html) - 虽然可以指定应用程序的主类，但它不是可以为它设置任何参数。

要在应用程序启动时将系统属性设置为 JVM，您可以执行以下操作之一：

在代码中设置属性，例如在主类的静态初始化代码中：

```
static {
 System.setProperty("file.encoding", "UTF-8"); } 
```

或者，在启动 JAR 时将其作为命令行参数传递：

```
java -Dfile.encoding=UTF-8 -jar yourapp.jar 
```

# php - 从一个复选框传递多个值以更新表php

> ID：14384414
> 
> 赞同：1
> 
> 时间：2013-01-17T17:12:32.890
> 
> 标签：php, forms, checkbox, mysqli

我有一个查询，它将未归还的贷款数量（在我的图书馆系统中）显示为一个表格，我有一个复选框正在显示以及每本书，这样当图书管理员点击已归还的那些时，字段“returned”设置为 1 或 true 到图书管理员选择的任何书籍。到目前为止，我只得到它回显了已选择多少个框的值......这是我到目前为止的代码：

```
<?php
if ($_SESSION['user_session'] == "nita.patel")
{
 {
echo "<table border='1'>
<tr>
<th>Loan ID</th>
<th>Username</th>
<th>Book ID</th>
<th>Return Date</th>
<th>Returned?</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['loan_id'] . "</td>";
  echo "<td>" . $row['username'] . "</td>";
  echo "<td>" . $row['book_id'] . "</td>";
  echo "<td>" . $row['return_date'] . "</td>";
  echo "<td><input type='checkbox' name='check_list[]' value=1 /></td>";
  echo "</tr>";
  }
echo "</table>";
 }
}
?>

<input type='submit' value='LOANS RETURNED'>

<?php
if(!empty($_POST['check_list']))
{
    foreach($_POST['check_list'] as $check)
    {
            echo $check;                          
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:20:51.357

将复选框行更改为：

```
echo "<td><input type='checkbox' name='check_list[]' value='" . $row['loan_id'] . "' /></td>"; 
```

这将告诉您已检查的 ID。目前，所有内容都设置为 1，您不会真正知道检查了哪一行。

# android - TeeChart (JavaAndroid 2012) 教程示例导致 UnsupportedOperationException

> ID：14384417
> 
> 赞同：1
> 
> 时间：2013-01-17T17:12:43.473
> 
> 标签：android, exception, charts, teechart

我正在尝试通过他们的教程（第一个）中的 TeeChart 示例来工作。由于某种原因，当我运行下面的代码时，它会导致 UnsupportedOperationException 发生。任何人都可以就为什么会发生这种情况提供任何帮助。

以下是相关文件。

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.example.teeChart02"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="15"/>
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="MyActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

**主要的.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:id="@+id/mylayout">
</LinearLayout> 
```

**我的活动.java**

```
package com.example.teeChart02;

import android.app.Activity;
import android.os.Bundle;
import android.widget.LinearLayout;
import com.steema.teechart.TChart;
import com.steema.teechart.drawing.Color;
import com.steema.teechart.styles.Bar;
import com.steema.teechart.styles.Series;

public class MyActivity extends Activity
{
    private TChart chart;

    @Override
    public void onCreate( Bundle savedInstanceState )
    {
        super.onCreate( savedInstanceState );
        setContentView( R.layout.main );

        LinearLayout ll = (LinearLayout) findViewById( R.id.mylayout );

        chart = new TChart( this );
        ll.addView( chart );

        Series bar = new Bar( chart.getChart() );
        chart.getAxes().getBottom().setIncrement( 1 );
        bar.add( 123, "Apples", Color.green );
        bar.add( 456, "Oranges", Color.red );
        bar.add( 321, "Kiwis", Color.yellow );
        bar.add( 78, "Bananas", Color.orange );
    }
} 
```

生成的异常是：

```
01-17 11:50:27.863: ERROR/AndroidRuntime(1631): FATAL EXCEPTION: main
        java.lang.UnsupportedOperationException
        at android.view.GLES20Canvas.clipPath(GLES20Canvas.java:413)
        at com.steema.teechart.android.Graphics3DAndroid.clipPolygon(Graphics3DAndroid.java:312)
        at com.steema.teechart.drawing.Graphics3D.clipToRight(Graphics3D.java:4575)
        at com.steema.teechart.drawing.Graphics3D.clipCube(Graphics3D.java:4614)
        at com.steema.teechart.styles.Series.clipRegionCreate(Series.java:2088)
        at com.steema.teechart.styles.Series.drawSeries(Series.java:2311)
        at com.steema.teechart.Chart.drawAllSeries(Chart.java:790)
        at com.steema.teechart.Chart.drawAxesSeries(Chart.java:752)
        at com.steema.teechart.Chart.internalDraw(Chart.java:732)
        at com.steema.teechart.Chart.paint(Chart.java:2080)
        at com.steema.teechart.Chart.paint(Chart.java:2096)
        at com.steema.teechart.TChart.onDraw(TChart.java:322)
        at android.view.View.draw(View.java:10978)
        at android.view.View.getDisplayList(View.java:10417)
        at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
        at android.view.View.getDisplayList(View.java:10415)
        at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
        at android.view.View.getDisplayList(View.java:10415)
        at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
        at android.view.View.getDisplayList(View.java:10415)
        at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
        at android.view.View.draw(View.java:10981)
        at android.widget.FrameLayout.draw(FrameLayout.java:450)
        at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2126)
        at android.view.View.getDisplayList(View.java:10417)
        at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:842)
        at android.view.ViewRootImpl.draw(ViewRootImpl.java:1910)
        at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1634)
        at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4424)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
        at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:31:06.173

请检查您是否在“项目属性 -> Java 构建路径 -> 订购和导出”选项卡中选择了 TeeChart.Android.jar 库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T12:32:44.347

我使用 TeeChart 工作得很好，minSdkVersion 为 11，目标为 13。一旦我切换到 minSdkVersion 为 12，目标为 15，我开始收到完全相同的错误。我还没有花时间找出问题所在，但是当我切换回 11 和 13 时，问题就消失了

# wordpress - 在 WP 自定义帖子类型中添加标签字段

> ID：14384418
> 
> 赞同：0
> 
> 时间：2013-01-17T17:12:44.557
> 
> 标签：wordpress, tags

有没有人找到一种在自定义帖子类型的侧边栏上显示标签字段的方法？我一直在寻找法典，但我完全迷路了。我正在寻找为 SEO 目的标记我的 CPT 的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:48:43.040

标签只是分类的一种形式。当您注册分类时，只需设置`hierarchical`为 false 即可。[我真的不能说比这里](http://net.tutsplus.com/tutorials/wordpress/introducing-wordpress-3-custom-taxonomies/)已经说过的更好了。`hierarchical`将为您注册分类的函数是[register_taxonomy](http://codex.wordpress.org/Function_Reference/register_taxonomy)，它将接受参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T08:55:28.050

希望这会有所帮助。 [wordpress 创建带有标签和类别的自定义帖子类型](http://webexplorar.com/wordpress-create-custom-post-types-with-tags-and-categories/)

# jquery - 在同一对象 jquery 的插件中调用函数

> ID：14384419
> 
> 赞同：0
> 
> 时间：2013-01-17T17:12:45.893
> 
> 标签：jquery, plugins

嗨，我想在我的插件中实现一个对象内的函数。目标是：我有很多带有默认值的输入。当我单击它时，如果值为“默认值”，则取消里面的文本。这是有效的。现在的问题是：当我提交表单时，我调用一个检查参数的函数，如果输入类型具有默认值，我希望取消该值。但现在只有最后一个元素这样做，而不是所有对象。我在插件的主函数中创建了一个函数。提交时如何检查插件内的每个对象并检查是否具有默认值？

我的插件：

```
(function($){
     $.fn.extend({      
        contact: function(options) {
            var defaults = {
            }

            var options =  $.extend(defaults, options);

            return this.each(function() {
                var o = options;
                var obj = $(this);      
                var value_base = obj.val();

                obj.click(function(){
                    if(obj.val()== value_base){
                        obj.val("");
                    }
                });
                obj.blur(function() {
                    if (obj.val() == ''){
                        obj.val(value_base);
                    }
                });

                $.fn.afterSubmit = function(options) {
                    if(obj.val()== value_base){
                        obj.val("");
                    }
                };

            });
        }
    });     
})(jQuery); 
```

我页面内的代码

```
<script type="text/javascript">
$(document).ready(function() {
    $('.contact').contact();
});
function autoriz(){
    $('.contact').afterSubmit();
    return false;
}
</script>
<form method="post" action="contatti.php" onSubmit="return autoriz();" enctype="multipart/form-data" name="contatti">
   <input type="text" name="name" class="contact" value="Name" id="name"/>
   <input type="text" name="surname" class="contact" value="Surname" id="surname"/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:04:17.540

看看这个小提琴[http://fiddle.jshell.net/YskZy/](http://fiddle.jshell.net/YskZy/)

在这个例子中我们绑定了传递表单id的事件提交，所以在提交表单之前，我们可以清除默认值

# pycuda - 使用 PyCUDA + CURAND 生成许多随机模拟

> ID：14384421
> 
> 赞同：2
> 
> 时间：2013-01-17T17:12:47.110
> 
> 标签：pycuda

对于最多 100000 (1M) 的 numDraws，我可以轻松执行以下操作

```
def Simple_Elt(numDraws):
    import numpy as np
    gauss = np.random.normal

    import pycuda.gpuarray as ga
    from pycuda.cumath import exp as gaexp    
    import pycuda.autoinit
    from pycuda.elementwise import ElementwiseKernel

    npgausses = gauss(size=(numDraws,)).astype(np.float32)
    gausses   = ga.to_gpu(npgausses)

    eltComp = """p[i] = exp(p[i]);"""
    kernel = ElementwiseKernel("float *p", eltComp, "expnorm")
    kernel(gausses)

    sumEN = ga.sum(gausses).get()

Simple_Elt(1000000) 
```

但是，对于 N = 10000000 (10M)，我在将随机值传输到 GPU 时耗尽了 GPU 内存。我想一次解决两个问题：（1）有效地使用 GPU 生成随机数和（2）消除大小限制。

现在，我不确定最好的方法。[这里](http://statisfaction.wordpress.com/2010/10/19/playing-with-pycuda-faster-generation-of-normal-variables/)的代码展示了如何使用“原始”PyCUDA 制作自定义的普通随机数生成器，以从 CPU 生成的统一随机数中执行 Box-Muller，但我认为使用 CURAND 会更有意义。但是，使用 PyCuda 的 CURAND 接口似乎给了我相同的大小限制（而且，我相信它会产生许多随机数生成器，这会导致高开销 - 这是来自 PyCUDA CURAND API 文档警告[here](http://documen.tician.de/pycuda/array.html#module-pycuda.curandom)。所以，我想一种可能性是使用PyCUDA 对底层 CURAND 的自定义调用。这都是猜测工作。

但是，我真正的问题是解决上述两个问题的最佳方法。

非常感谢示例、指针和建议。

# javascript - 在 ExtJS 中动态更改组件

> ID：14384426
> 
> 赞同：1
> 
> 时间：2013-01-17T17:12:55.733
> 
> 标签：javascript, extjs

我有一个包含 2 个组件的视口，左侧列表和中央窗口，我想根据用户在左侧列表中选择的内容在中央窗口中显示不同的组件，我试图通过动态删除和添加来完成此操作组件，但这只是部分成功，我能够删除组件但不能将其添加回来，您可以在下面看到我使用的方法的示例。

```
Ext.define('LabSite.view.Viewport', {
    id: "MainViewPort",
    renderTo: Ext.getBody(),
    extend: 'Ext.container.Viewport',
    requires:[
        'Ext.tab.Panel',
        'Ext.layout.container.Border',
        'LabSite.view.Location'
    ],

    layout: {
        type: 'border'
    },
    items: [{
        region: 'west',
        xtype: 'panel',
        title: 'PC lab managment',
        items: [{
            xtype: 'dataview',
            store: Ext.data.StoreManager.lookup('areaStores'),          
            cls: 'feed-list',
            itemSelector: '.feed-list-item',
            overItemCls: 'feed-list-item-hover',
            tpl: '<tpl for="."><div class="feed-list-item">{name}</div></tpl>',
            listeners: {
                selectionchange: function(selmodel, selection) {
                    var xtype=selection[0].data.name.toLowerCase();

                    var centr=Ext.getCmp('centerView');
                    var viewPort=Ext.getCmp('MainViewPort');
                    viewPort.remove(centr);
                    var newcmp=new Ext.Component ({ region: 'center',
                                   id:'centerView',
                                   xtype:'locations'});                                

                    viewPort.add(newcmp);
                    viewPort.doLayout( );

                }           
            }           
        }]
    },
    { region: 'center',
      id:'centerView',
      xtype:'locations'}
    ]   
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T21:42:12.940

MK 发布的是最好的方法，但是我有一个观点。当您动态更新布局时，Ext 会自动为您重新布局，因此 doLayout 调用是多余的并增加了额外的开销。其次，它也是低效的，因为删除，然后添加将触发布局。假设您使用 >= 4.1，您应该执行以下操作：

```
Ext.suspendLayouts();
center.remove(0);
center.add({
    xtype: 'newcmp'
});
Ext.resumeLayouts(true); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T17:50:35.673

ExtJS 不允许`center`从边框布局中移除/插入组件。您可以尝试使您的“centerView”组件成为一个容器/面板`layout: fit`，然后根据需要在其中添加或删除组件。

# ruby-on-rails - 具有单一访问密钥的 Rails API

> ID：14384428
> 
> 赞同：1
> 
> 时间：2013-01-17T17:12:59.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, rails-api

*搜索 S/O 后，我没有找到任何直接回答我的问题的东西，所以我会问：*

我想要一个由单独的后端 Rails 服务器驱动的前端 Web 应用程序（只是 Javascript）。因此，为了获取和存储数据，Web 应用程序向 Rails 服务器发送请求。我的问题：

> 如果请求来自 Web 应用程序，我如何确保对服务器的请求仅得到成功响应？那么，如何用 Rails 实现呢？（第二部分我大概能弄清楚，第一个问题是最重要的。）

**编辑：**我认为这部分在阅读回复后可能不清楚——我只有*一个*服务器客户端。那是，

> 我希望服务器只接受来自前端 Web 应用程序的响应，而不接受来自其他来源的响应（也就是说，某人不应该能够在浏览器中输入 url 并从服务器获得成功的响应）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:15:44.627

您可以实施某种身份验证。设计可以帮助解决这个问题，将身份验证信息存储在用户会话中。然后在你的控制器中你可以使用类似的东西`before_filter :authenticate_user!`

如果您的服务器在开放的互联网上可用，您要么需要命名用户身份验证（对身份验证之外的其他事情有用，例如跟踪用户），要么将其作为公共 api 运行，而不关心用户是否点击它（但你需要限制速率以避免无意的 ddos​​，增加了另一层复杂性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:05:11.593

创建某种身份验证系统..以便 ServerApp 知道请求来自受信任的来源。

存储数据后..根据成功或失败，您可以返回带有适当消息的 Json/Xml 数据。

不确定您还要求什么，如果您需要进一步的帮助，请告诉我。

# html - 广告的 HTML 元素？

> ID：14384431
> 
> 赞同：11
> 
> 时间：2013-01-17T17:13:15.830
> 
> 标签：html, naming-conventions, ads, semantic-markup

网络上是否有关于为广告横幅选择哪个 HTML 元素的权威信息？

我考虑过`<article>`or `<aside>`，但我认为更合适的只是：`<div class="ad">`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T18:35:26.613

在大多数情况下，我会使用[`aside`元素](http://www.w3.org/TR/html5/sections.html#the-aside-element)：

> 该元素可用于 [...] 用于**广告**、[...] 以及被视为与页面主要内容分开的其他内容。

由于该`aside`元素是一个分段元素，它会在文档大纲中创建一个条目，即使您没有明确使用标题。在大多数情况下，这将是您想要的。

* * *

如果您不自己托管广告，您可能希望将其包含在[`iframe`](http://www.w3.org/TR/html5/embedded-content-0.html#the-iframe-element)：

> 下面是一个页面示例，该页面使用一个`iframe`包含来自**广告**经纪人的广告：
> 
> ```
> <iframe src="http://ads.example.com/?customerid=923513721&amp;format=banner"
>     width="468" height="60"></iframe> 
> ```

（在适当的情况下使用该[`sandbox`属性](http://www.w3.org/TR/html5/embedded-content-0.html#attr-iframe-sandbox)来保证安全。）

* * *

因此，一个简单的博客文章页面的结构可以如下：

```
<body>

  <h1>My blog</h1>

  <article>
    <h1>My blog post</h1>
    <p>…&lt;/p>
  </article>

  <nav>
    <h1>Navigation</h1>
    <!-- site-wide navigation -->
  </nav>

  <aside>
    <h1>Advertisement</h1> <!-- or omit the heading altogether, it doesn't change the outline -->
    <iframe></iframe>
    <footer><small>Advertisement by ACME Inc.</small> <!-- or whatever --> </footer>
  </aside>

</body> 
```

该页面具有以下[大纲](http://gsnedders.html5.org/outliner/)：

> 1.  我的博客
>     1.  我的博文
>     2.  导航
>     3.  广告

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T18:45:35.960

不，没有定义表示广告横幅的 HTML 元素。在 HTML5 中，`<aside>`意思是“切向相关”的内容，这是完全不同的，`<article>`甚至更加不同。您是否使用`<div class="ad">`或其他东西取决于您期望达到的目标。通常没有理由对广告使用任何特定标记。

# jquery - 如何使用 JavaScript 和 jQuery 提交表单（到 php）？

> ID：14384437
> 
> 赞同：0
> 
> 时间：2013-01-17T17:13:37.313
> 
> 标签：jquery

我需要通过 jQuery-ajax 执行此操作，而无需重新加载页面。但我什至无法让点击功能工作。代码看起来像这样..

```
 $("#add").click(function(){
            var selval = $('#cat').val();
            alert('ok');
            $.ajax({
                type:"POST",
                url:"main_end.php",
                data:"categ="+selval,
                success:function(response){
                    $('#results').html("test");

                }
            });

            return false;
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:26:28.057

本文将有所帮助： http: [//net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

基本上你正在做同样的事情，获取表单值并将其提交到 ajax 数据中。如果这对您不起作用，那么您可能还有其他错误，可能在 HTML 中，或者您在页面完全加载之前运行此 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T05:05:11.410

添加如下所示的错误标记，并确保您没有在此处收到任何错误：

```
 $("#add").click(function(){
       var selval = $('#cat').val();
       alert('ok');
       $.ajax({
           type:"POST",
                url:"main_end.php",
                data:"categ="+selval,
                success:function(response){
                    $('#results').html("test");
                },
                error : function (xhr, textStatus, errorThrown) { // Add this and make sure you are not getting any error..
                    console.log ('xhr :'+xhr+' textstatus: '+textStatus+' errorThrown :'+errorThrown);
                }
            });

            return false;
        }); 
```

# gradle - 如何在 Gradle 中获取已修补的 .jar 库的依赖项？

> ID：14384442
> 
> 赞同：1
> 
> 时间：2013-01-17T17:13:44.940
> 
> 标签：gradle

我们正在使用 Selenium 的补丁版本，我们希望使用我们的补丁 jar 作为文件依赖项，同时从 Maven 存储库获取 Selenium 的所有依赖项，而无需手动指定它们。这可能吗？

今天，我们使用 fileTree 依赖项将修补后的 selenium jar 及其依赖项作为依赖项添加到我们的项目中，但这并不理想，因为它很丑陋，而且有时似乎会打乱 Gradle 的冲突解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:03:45.597

一般来说，我建议将修补后的 Jar 连同合适的依赖描述符一起发布到您的公司 Maven 或 Ivy 存储库（Artifactory、Nexus 等）。当然还有其他解决方案，如下所示：

```
apply plugin: "java"

repositories {
    mavenCentral()
}

configurations {
    rawCompile
}

dependencies {
    rawCompile "junit:junit:4.11"
    compile configurations.rawCompile.filter { it.name != "junit-4.11.jar" }, files("lib/junit-4.11-patched.jar")
}

task debug << {
    println "original dependencies: $configurations.rawCompile.files \n"
    println "changed dependencies: $configurations.compile.files"
} 
```

这个和类似解决方案的一个潜在问题是文件依赖项（这是您最终得到的 on `compile`）不参与冲突解决。

# ajax - Stack Exchange 如何检查新帖子/评论？

> ID：14384446
> 
> 赞同：3
> 
> 时间：2013-01-17T17:13:55.077
> 
> 标签：ajax, heartbeat, stackexchange

我一直在查看 Chrome 开发人员工具中的“网络”部分，以查看 Stack Overflow 上的一个新的活跃帖子有什么活动。

我希望看到定期的网络活动来检查页面上更新元素的脚本（例如发布的新评论或答案） - 但似乎没有！

我刚刚为我网站上的某些页面实施了定期“心跳”。

Stack Overflow 是否对新帖子进行某种“推送”检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-29T17:23:03.327

使用网络套接字。

在页面加载时，站点连接到`wss://qa.sockets.stackexchange.com/`websocket 并向其发送`<site_id>-question-<question_id>`消息（例如`1-question-14384446`），因此订阅问题事件（新答案、*新评论*、帖子删除、分数更改等）。

这是一个 JavaScript 示例。要测试它是否有效，您可以在您的问题或此答案下添加评论：

```
const socket = new WebSocket('wss://qa.sockets.stackexchange.com/');
socket.onopen = () => {
  socket.send('1-question-14384446'); // subscribe to question events
  console.log('Listening for new comments...');
};

socket.onmessage = ({ data }) => {
  const obj = JSON.parse(data);

  // sent every 5 minutes to check if connection is alive
  if (obj.action === 'hb') {
    socket.send('pong');
    return;
  }

  const { a: type, commentid } = JSON.parse(obj.data);
  if (type !== 'comment-add') return; // not a comment

  console.log('New comment with id', commentid);
};
socket.onerror = console.error; // just in case
```

参考：

*   [Stack Exchange WebSockets 是如何工作的？您可以发送给他们的所有选项是什么？](https://meta.stackexchange.com/q/218343)
*   [`full.en.js`文件](https://dev.stackoverflow.com/content/Js/full.en.js)- 查看 [`subscribeToQuestion(sid, pid)`](https://i.stack.imgur.com/xvwC5.png)功能。

# python - 给定列表生成 Python 字典的最有效方法

> ID：14384450
> 
> 赞同：5
> 
> 时间：2013-01-17T17:14:15.377
> 
> 标签：python, performance, optimization, data-structures

我正在寻找对以下问题的优化（我有一些工作代码，但我相当确定它可以更快并且以一种糟糕的方式编写）。我有一个 SKU 列表（6 到 9 位数字之间），我正在亚马逊上查找信息。工作代码如下：

```
def buildDictionary2(stringy):
    x = stringy.xpath('//sellersku/text()|//product/descendant::amount[1]/text()')
    Sku_To_Price = {}
    for items in range(len(x)):
        if x[items] in myList:
            try:
                if x[items+1] not in myList:
                    Sku_To_Price[x[items]] = x[items+1]
                else:
                    Sku_To_Price[x[items]] = ''
            except:
                pass
        else:
            pass
    return Sku_To_Price 
```

其中 x 是通常交替的 SKU 和价格的字典。但是，出现了无法找到价格的复杂情况。在这种情况下，列表 (x) 是 SKU、SKU 而不是 SKU 价格。

目前我正在查找 SKU 列表（在全局变量 myList 中），但不能帮助这是时间复杂度 O(e^n)。鉴于我正在考虑使用大约 20,000 个 SKU 的东西，我宁愿不是这种情况。

有没有办法让这个变得不那么复杂 - 所需的输出是一个字典，每个 SKU 一次（作为键），它的相应价格作为值（如果没有价格，则没有条目）。

编辑：

正在解析的 XML 示例

```
<?xml version="1.0" ?>
<GetLowestOfferListingsForSKUResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
  <GetLowestOfferListingsForSKUResult SellerSKU="X" status="Success">
    <AllOfferListingsConsidered>true</AllOfferListingsConsidered>
    <Product xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" 
             xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
      <Identifiers>
        <MarketplaceASIN>
          <MarketplaceId>X</MarketplaceId>
          <ASIN>X</ASIN>
        </MarketplaceASIN>
        <SKUIdentifier>
          <MarketplaceId>X</MarketplaceId>
          <SellerId>X</SellerId>
          <SellerSKU>10065897</SellerSKU>
        </SKUIdentifier>
      </Identifiers>
      <LowestOfferListings>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>New</ItemCondition>
            <ItemSubcondition>New</ItemSubcondition>
            <FulfillmentChannel>Amazon</FulfillmentChannel>
            <ShipsDomestically>True</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>3</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>23.68</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>False</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>Merchant</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>X</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>X</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>X</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>X</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>X</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>X</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>X</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
      </LowestOfferListings>
    </Product>
  </GetLowestOfferListingsForSKUResult>
  <GetLowestOfferListingsForSKUResult SellerSKU="X" status="X">
    <AllOfferListingsConsidered>X</AllOfferListingsConsidered>
    <Product xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01"
             xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
      <Identifiers>
        <MarketplaceASIN>
          <MarketplaceId>X</MarketplaceId>
          <ASIN>X</ASIN>
        </MarketplaceASIN>
        <SKUIdentifier>
          <MarketplaceId>X</MarketplaceId>
          <SellerId>X</SellerId>
          <SellerSKU>9854521</SellerSKU>
        </SKUIdentifier>
      </Identifiers>
      <LowestOfferListings>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>X</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>1</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>2.68</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>X</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>8</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>Merchant</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>4</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>X</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>1</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
      </LowestOfferListings>
    </Product>
  </GetLowestOfferListingsForSKUResult>
  <ResponseMetadata>
    <RequestId>X</RequestId>
  </ResponseMetadata>
</GetLowestOfferListingsForSKUResponse> 
```

和 myList 看起来像：

```
myList = ['10032590',
'10043503',
'10047539',
'10055404',
'10058424'...
] 
```

使用下面的第一个答案，我收到以下错误消息：

> 类型错误：不可散列类型：“列表”

我认为相关代码是：

```
def xml_to_dict(self, xml):
    doc = lh.fromstring(xml)
    d = {}
    for product in doc.xpath('.//product'):
        sku = product.xpath('.//sellersku/text()')
        amount = product.xpath('./descendant::amount[1]/text()')
        d[sku] = amount
    return d 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T17:26:04.670

```
d={}
for product in doc.xpath('.//product'):
    sku = product.xpath('.//sellersku/text()')[0]
    price = product.xpath('./descendant::amount[1]/text()')
    if price: # if theres a possibility of sku missing replace with:
              # "if price and sku"
              #
              # if you have duplicate sku's and you don't want them overwritten 
              # add "and sku not in d" check
        d[sku]= price[0] 
```

# objective-c - 设置 UIImagePickerController 帧大小和位置

> ID：14384451
> 
> 赞同：0
> 
> 时间：2013-01-17T17:14:15.953
> 
> 标签：objective-c, cocoa-touch, uiimagepickercontroller

我试图在我的 OverlayViewController 中将 UIImagePickerController 的框架设置为屏幕的中间 - 我创建自定义按钮的地方：

```
self.imagePickerController.showsCameraControls = NO;
if ([[self.imagePickerController.cameraOverlayView subviews] count] ==0)
{
   CGRect overlayViewFrame = self.imagePickerController.cameraOverlayView.frame;
   CGRect newFrame = CGRectMake(0.0, CGRectGetHeight(overlayViewFrame)-self.view.frame.size.height-10.0, CGRectGetWidth(overlayViewFrame), self.view.frame.size.height + 10.0);
   self.view.frame = newFrame;
   [self.imagePickerController.cameraOverlayView addSubview:self.view];
   CGRect imagePickerControllerFrame = CGRectMake(0, topPanel.frame.size.height + 50, self.view.frame.size.width, self.view.frame.size.height - topPanel.frame.size.height - bottomPanel.frame.size.height);
   self.imagePickerController.view.frame = imagePickerControllerFrame;
} 
```

但是，它会全屏打开，并且所选图像包括顶部和底部面板下方的区域。我希望它是一个矩形。

我`UIImagePickerController`从代表视图中呈现如下：

```
[self presentViewController:self.overlayViewController.imagePickerController animated:YES completion:nil]; 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:25:10.677

来自`UIViewController`参考（[链接](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentViewController:animated:completion:)）：

> **presentViewController：动画：完成：**
> 
> **讨论**
> 
> 在 iPhone 和 iPod touch 上，呈现的视图总是全屏

如果要嵌入图像选择器，则应手动将其视图添加到其他视图之一。

# java - Android UI线程问题

> ID：14384452
> 
> 赞同：0
> 
> 时间：2013-01-17T17:14:16.503
> 
> 标签：java, android, multithreading, user-interface

我正在使用 android 中的库连接到终端仿真器，它连接到串行设备（开关）并显示发送/接收的数据。我通过终端下方的文本框或在终端本身输入并在两种情况下按键盘上的 Enter 键通过连接发送数据。我也可以通过按键发送命令。

我的问题是，每当突出显示终端本身时，UI 都不会更新，例如使用按钮发送的命令或从串行设备接收的数据。我可以输入终端本身，然后字符就会出现。如果选择了 editText，一切都会更新。因此，如果我选择终端并发送命令，则只有在选择 editText 后才会显示在屏幕上。很多时候，在我选择了 editText 之后，它仍然不会更新，直到我再次按下终端。很奇怪。所以我的无效工作不好？还是我正在使用的 notifyUpdate 方法并不太了解？

我目前所做的是在接收到数据时调用一个方法，该方法调用一个处理程序，该处理程序每​​ 1000 毫秒更新一次屏幕。This however does not work when the terminal is selected, why is this? 我收到错误消息：“只有创建视图层次结构的原始线程才能触及其视图。”</p>

截图：http: [//i.imgur.com/s4mTt.png](http://i.imgur.com/s4mTt.png)

```
 //terminal view
    EmulatorView view = (EmulatorView) findViewById(R.id.emulatorView);
    mEmulatorView = view;

    public void onDataReceived(int id, byte[] data)
    {
    dataReceived = new String(data);
    ((MyBAIsWrapper) bis).renew(data);
    mSession.write(dataReceived);
    mSession.notifyUpdate();
    viewHandler.post(updateView);
    }

    Handler viewHandler = new Handler();
    Runnable updateView = new Runnable() {
    @Override
    public void run() {
    mEmulatorView.invalidate();
    viewHandler.postDelayed(updateView, 1000);

        }
    }
}; 
```

我正在使用的库中的相关代码：

```
 [code]protected void notifyUpdate() {
        if (mNotify != null) {
            mNotify.onUpdate();
        }
    }[/code] 
```

和

```
/**
 * Generic callback to be invoked to notify of updates.
 */
public interface UpdateCallback {
    /**
     * Callback function to be invoked when an update happens.
     */
    void onUpdate();
} 
```

这是方法 notifyUpdate() 的说明 - 类 jackpal.androidterm.emulatorview.TermSession 中的方法 通知 setUpdateCallback 注册的 UpdateCallback 屏幕发生了变化。

我认为可能是 mSession.notifyUpdate(); 在我的代码中，但显然如果我评论说发生了同样的错误，那条线似乎对我没有任何作用。我不确定错误在哪里修复它，以便无论我在哪里按，我的屏幕总是在更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:29:20.360

得到它的工作，我只需要在 UI 线程中运行该写入行，即使我认为它是？！

```
public void onDataReceived(int id, byte[] data) {

        dataReceived = new String(data);
        ((MyBAIsWrapper) bis).renew(data);

        runOnUiThread(new Runnable(){
            @Override
            public void run() { 
                mSession.write(dataReceived);       
            }});

        viewHandler.post(updateView);
    } 
```

# sql - 在 SQL Server 的 WHERE 子句中使用带有 CASE 语句的“IN”谓词

> ID：14384454
> 
> 赞同：1
> 
> 时间：2013-01-17T17:14:19.993
> 
> 标签：sql, where, case-when

这是一个运行良好的 SQL 查询：

```
DECLARE @IncludePTO AS CHAR
SET @IncludePTO = 'Y'

SELECT     
   HQCO.HQCo, HQCO.Name, PREH.PRDept, PREH.Craft, HRRM.PositionCode, PRTH.Employee, 
   PREH.LastName, PREH.FirstName, SUM(PRTH.Hours) AS Hrs
FROM PREH 
INNER JOIN HRRM ON PREH.PRCo = HRRM.HRCo AND PREH.Employee = HRRM.HRRef 
INNER JOIN PRTH ON PREH.PRCo = PRTH.PRCo AND PREH.Employee = PRTH.Employee 
INNER JOIN HQCO ON PRTH.PRCo = HQCO.HQCo
WHERE     
    (dbo.PRTH.PREndDate BETWEEN '1/1/2012 00:00:00' AND '1/1/2013 00:00:00')
    AND (PRGroup = 2)
    AND dbo.PRTH.EarnCode IN (1,3,8)
GROUP BY 
    HQCO.HQCo, HQCO.Name, PREH.PRDept, PREH.Craft, 
    HRRM.PositionCode, PRTH.Employee, PREH.LastName, PREH.FirstName 
```

但是，我正在尝试在 WHERE 子句中使用“IN”谓词和 CASE WHEN。看看下面修改后的查询：

```
DECLARE @IncludePTO AS CHAR
SET @IncludePTO = 'Y'

SELECT     
   HQCO.HQCo, HQCO.Name, PREH.PRDept, PREH.Craft, HRRM.PositionCode, PRTH.Employee, 
   PREH.LastName, PREH.FirstName, SUM(PRTH.Hours) AS Hrs
FROM PREH 
INNER JOIN HRRM ON PREH.PRCo = HRRM.HRCo AND PREH.Employee = HRRM.HRRef 
INNER JOIN PRTH ON PREH.PRCo = PRTH.PRCo AND PREH.Employee = PRTH.Employee 
INNER JOIN HQCO ON PRTH.PRCo = HQCO.HQCo
WHERE     
    (dbo.PRTH.PREndDate BETWEEN '1/1/2012 00:00:00' AND '1/1/2013 00:00:00')
    AND (PRTH.PRGroup = 2)
    AND 
       CASE WHEN @IncludePTO = 'Y' THEN dbo.PRTH.EarnCode IN (1,2,3,8,100,110,120,115)
            ELSE dbo.PRTH.EarnCode IN (1,2,3,8)
       END
GROUP BY 
    HQCO.HQCo, HQCO.Name, PREH.PRDept, PREH.Craft, HRRM.PositionCode, PRTH.Employee, 
    PREH.LastName, PREH.FirstName 
```

它似乎不起作用并不断给我一个语法错误：

> *消息 156，级别 15，状态 1，第 15 行
> 关键字“IN”附近的语法不正确。*

指出我所缺少的任何帮助或指导？我真的很感激任何帮助/提示。非常感谢，

普拉纳夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:19:07.910

你是对的。不允许使用该语法。你可以试试：

```
((@IncludePTO = 'Y' and dbo.PRTH.EarnCode IN (1,2,3,8,100,110,120,115)) or
 (@IncludePTO <> 'Y' and dbo.PRTH.EarnCode IN (1,2,3,8))
) 
```

这可以简化为：

```
(bo.PRTH.EarnCode IN (1,2,3,8) or (@IncludePTO <> 'Y' and dbo.PRTH.EarnCode IN (100,110,120,115))
) 
```

这假定 @IncludePTO 永远不会为 NULL。如果是这样，那么这将必须是测试的一部分。

如果你*真的*想在子句中使用 case 语句`where`，你可以这样做：

```
(CASE WHEN @IncludePTO = 'Y' and dbo.PRTH.EarnCode IN (1,2,3,8,100,110,120,115)
      then 'true'
      when @IncludePTO <> 'Y' and dbo.PRTH.EarnCode IN (1,2,3,8)
      then 'true'
      else 'false'
 end) = 'true' 
```

# c# - 根据包含的 datagridview 的大小调整表单的大小

> ID：14384456
> 
> 赞同：1
> 
> 时间：2013-01-17T17:14:22.367
> 
> 标签：c#, forms, datagridview

我的 datagridview 连接到数据源：

```
this.dataGridView1.DataSource = mydatatable; 
```

我想将此数据呈现给用户。如果它有超过 X 行，那么它将有一个垂直滚动条。

放在表单中不好看，因为表单的大小可以大于数据表的大小。我尝试根据 datagridview 的大小手动调整表单的大小，如下所示：

```
this.Size = dataGridView1.Size; 
```

但它不起作用（如果datagridview更小，它不会使表单更小。如果它大于它覆盖其中的一些）。也许有一种方法可以在不通过表格的情况下展示表格？或者有没有办法正确调整它的大小？

我尝试了以下方法（响应答案）：

```
this.dataGridView1.DataSource = competingCourses; 
this.dataGridView1.RightToLeft = RightToLeft.Yes;
this.dataGridView1.AutoSizeColumnsMode = dataGridViewAutoSizeColumnsMode.AllCells; 
```

我也有：

```
this.AutoSize=true; 
this.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowAndShrink; 
```

它仍然不会改变包含表单的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:29:28.753

尝试`Size`从 DataGridView 的高度和宽度构造一个新对象，然后将其分配给表单大小：

```
Size newSize = new Size(dataGridView1.Width, dataGridView1.Height);
this.Size = newSize; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:30:33.123

You can resize the form based on its content automatically by setting `Autosize=True` and `AutoSizeMode=GrowAndShrink` on the form.

# ajax - 我是否需要在 sencha touch 应用程序中进行 ajax 调用的服务器？

> ID：14384461
> 
> 赞同：1
> 
> 时间：2013-01-17T17:14:37.140
> 
> 标签：ajax, extjs, sencha-touch

我想打包一个 Sencha Touch 应用程序以部署到多个移动平台（iOS/Android）。我知道浏览器无法进行跨域 AJAX 请求，但是否可以在 Sencha Touch 应用程序中进行跨域 AJAX 调用？（没有服务器，使用 PhoneGap 之类的东西打包到 iOS/Android）

我想使用 AJAX 在 Sencha Touch 应用程序中访问第三方 API，但我的印象是我需要一个服务器来包装第三方 API 以避免跨域问题。有人请澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:12:26.637

[`JSONP`](http://en.wikipedia.org/wiki/JSONP)使用[`Ext.data.proxy.JsonP`](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.proxy.JsonP). _
我不知道您的 API 是什么样子，但可以像这样使用它：

```
var store = Ext.create('Ext.data.Store', {
    autoLoad: true,
    //model: , //Your API
    proxy: {
        type: 'jsonp',
        url : 'http://domain.com/request',
        callbackKey: 'theCallbackFunction'
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:23:05.307

您可以使用 JSONP，但也可以使用普通的 JSON。

当文件是“本地的”（即包装在 phonegap 中）时，手机浏览器将允许跨域请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:42:59.797

[正如 A1rPun 所说，使用Ext.data.proxy.JsonP](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.proxy.JsonP)可以使用 JSONP（带填充的 JSON）进行跨域 AJAX 请求

**Sencha touch-2 方法：**

```
Ext.define('YourStore', {
       extend: 'Ext.data.Store',

       config: {
           fields: ['field1', 'field2', 'field3'],

           proxy: {
               type: 'jsonp',
               url:'YourUrl',
               callbackKey: 'jsoncallback',
               extraParams : {
                    method : 'YourUrl.method',
                    api_key : 'PUTYOURKEYHERE',
                    format : 'json',
                    nojsoncallback : 1
               },
               reader: {
                   type: 'json'
               }
           }
       }
   }); 
```

# algorithm - 在二维网格上创建随机形式

> ID：14384462
> 
> 赞同：2
> 
> 时间：2013-01-17T17:14:39.147
> 
> 标签：algorithm

我想创造一个随机的世界。为简单起见，假设它基于每个单元格的二维网格，每个单元格的边长为 1m。

现在我使用一个简单的算法来创建随机形式（用于森林、湖泊等）：

```
1\. fill a circle of radius r with the wanted property
2\. choose 4 points on the edge of this circle and
3\. goto (1.) with all those four points as center and r/1.3 
```

我有点喜欢这个，因为它创建的形式具有随机形式，而圆形的基本形式通常不可见。

不过有两个问题：

1.  有时（当前四个点被选得太近时）很明显森林是由什么基本形式构成的
2.  该算法的性能非常差。单元格被一遍又一遍地填充，因为圆圈总是重叠+所有这些距离计算等。

> 所以：有没有成功用于创建随机形式的算法？我敢肯定我不是第一个想要这样做的人......

我考虑过选择随机点并形成它们的凸包 - 但我不想将自己局限于凸形。为极坐标中的不同角度选择随机距离只会创建星域——这又是一个我不想要的限制......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T04:01:34.670

当然，如果你只是想要一些有用的东西，有一些库可以像 Joachim Pileborg 推荐的那样做。但是，如果您希望在这个项目中获得更多乐趣并学习一点，我建议您研究[随机中点位移分形](http://en.wikipedia.org/wiki/Diamond-square_algorithm)，即菱形平方算法。它非常擅长制作自然景观。您还应该在阅读[Perlin 噪音](http://en.wikipedia.org/wiki/Perlin_noise)时阅读它；它有点过时，但是学习基础知识的良好开端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:22:43.623

您可以使用[libnoise 之](http://libnoise.sourceforge.net/)类的东西来创建高度图，但不是将它们用于高度图，而是将不同的“高度”用于不同类型的地形。使用 libnoise，您可以生成一小块地形，当您需要下一部分时，它可以生成一个与之前生成的区域无缝匹配的区域。

# plsql - 从 PLSQL 中的父表过程中删除

> ID：14384466
> 
> 赞同：0
> 
> 时间：2013-01-17T17:14:46.750
> 
> 标签：plsql, parent-child, procedure

我的任务是从 a 中删除条目，`parent table`这意味着我需要删除`child table`. 我需要在 a 中执行此操作，并且`procedure`基于`primary key`. `parent table`截至目前，我只是对`input parameters`我需要什么感到困惑。这是我到目前为止所拥有的：

```
procedure sps_delete_patientmedrecs_det  (
  p_parentPK_in   in parent_table.parentPK%type,
  p_err_code_out  out number,
  p_err_msg_out   out varchar2)
delete from child_table
  where child_table.childFK = p_parentPK_in;

delete from parent_table
  where parent_table.parent.parentPK = p_parentPK_in;
end; 
```

截至目前，我认为这行不通，因为我认为他们不`procedure`知道它`child foreign key`是什么。我想过做一个`select`声明，但后来我很困惑，`input paremeters`因为我只得到 p_parentPK_in。任何帮助表示赞赏，并提前感谢您。

也作为脚注，`DELETE CASCADE`不在图片中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:34:05.997

没关系，这行得通。我刚刚在第二次删除之前添加了另一个开始。

# neo4j - Neo4J 远程客户端接受

> ID：14384477
> 
> 赞同：6
> 
> 时间：2013-01-17T17:15:22.333
> 
> 标签：neo4j

是通过 conf/neo4j-server.properties 文件中的 org.neo4j.server.webserver.address 属性保护远程客户端接受的唯一两个有效选项，以仅接受来自本地主机的连接（该行被注释掉） ，或者取消注释并指定`org.neo4j.server.webserver.address=0.0.0.0`哪个可以访问任何主机？

是否不能指定特定的 IP 地址，例如，如果您的应用程序在安装 Neo4j 服务器的单独服务器上运行？据推测，如果这是不可能的，你将不得不使用防火墙规则来限制访问，你会吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:46:32.503

您可以设置要监听的 IP 地址。您可以使用[https 和 auth-rules](http://docs.neo4j.org/chunked/milestone/security-server.html)来保护您的 Neo4j 服务器。

还有用于添加基本身份验证的[身份验证扩展。](https://github.com/neo4j-contrib/authentication-extension)

# asp.net-mvc - 启用智能渲染时如何使用 findCell？

> ID：14384479
> 
> 赞同：0
> 
> 时间：2013-01-17T17:15:27.920
> 
> 标签：asp.net-mvc, jscript, dhtmlx

我有一个启用了智能渲染的网格，该网格上的一项操作要求我在特定列中找到几行具有相同值的行。

列不一定在该字段上排序，因此我不能假设行将位于缓冲区的同一滑动窗口中。在`findCell`函数执行期间，当它越过缓冲区边界时，它会引发异常。有没有办法在 DHTMLX 框架内实现这一点，还是我需要为此编写特殊代码？

例外：

Microsoft JScript 运行时错误：无法获取属性“_locator”的值：对象为空或未定义

```
_get_cell_value:function(a,b,c){return a._locator?(this._c_order&&(b=this._c_order[b]),a._locator.call(this,a.data,b)):‌​this.cells3(a,b)[c?c:"getValue"]()} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:27:31.980

对于它的价值，findCell 似乎与智能渲染不兼容，它不会自动进入数据库以读取下一批行以继续在网格本身上搜索。我最终编写了自己相当长的 Ajax/mvc 搜索代码来查找磁盘上的行并将它们插入到网格中。

# python - 第一个 TreeViewColumn 未呈现

> ID：14384481
> 
> 赞同：0
> 
> 时间：2013-01-17T17:15:38.053
> 
> 标签：python, gtk, pygtk, glade, gtktreeview

我在 Glade 制作的 gtk-builder 文件中定义了一个窗口。它包含一个, 和一个2 s`gtk.Window`的孩子：`gtk.TreeView``gtk.TreeViewColumn`

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
    <requires lib="gtk+" version="2.20"/>
    <!-- interface-naming-policy project-wide -->
    <object class="GtkWindow" id="bookmarks_window">
        <property name="can_focus">False</property>
        <property name="events">GDK_KEY_PRESS_MASK | GDK_STRUCTURE_MASK</property>
        <property name="title" translatable="yes">Bookmarks</property>
        <property name="modal">True</property>
        <property name="default_width">350</property>
        <property name="default_height">200</property>
        <property name="destroy_with_parent">True</property>
        <property name="type_hint">menu</property>
        <property name="skip_taskbar_hint">True</property>
        <child>
          <object class="GtkScrolledWindow" id="bookmarks_scroll">
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="hscrollbar_policy">never</property>
            <property name="vscrollbar_policy">automatic</property>
            <child>
              <object class="GtkTreeView" id="bookmarks_tree">
                <property name="visible">True</property>
                <property name="can_focus">True</property>
                <property name="events">GDK_BUTTON_PRESS_MASK | GDK_KEY_PRESS_MASK | GDK_STRUCTURE_MASK</property>
                <property name="headers_visible">False</property>
                <property name="headers_clickable">False</property>
                <property name="rules_hint">True</property>
                <property name="fixed_height_mode">True</property>
                <property name="show_expanders">False</property>
                <property name="enable_grid_lines">vertical</property>
                <child>
                  <object class="GtkTreeViewColumn" id="line_column">
                    <property name="sizing">fixed</property>
                    <property name="title" translatable="yes">Line</property>
                  </object>
                </child>
                <child>
                  <object class="GtkTreeViewColumn" id="text_column">
                    <property name="sizing">fixed</property>
                    <property name="title" translatable="yes">Text</property>
                  </object>
                </child>
              </object>
            </child>
          </object>
        </child>
    </object>
</interface> 
```

我正在创建窗口：

```
def show_window(parent_window):
    builder = gtk.Builder()
    builder.add_from_file("mywindow.ui")

    window = builder.get_object('bookmarks_window')
    window.set_transient_for(parent_window)

    tree = builder.get_object('bookmarks_tree')
    tree.set_search_column(1)

    store = gtk.TreeStore(int, str)
    for i in xrange(1, 6):
        store.append((i, "Line {}".format(i)))
    tree.set_model(store)

    line_renderer = gtk.CellRendererText()
    line_column = builder.get_object('line_column')
    line_column.pack_start(line_renderer)
    line_column.set_attributes(line_renderer, text=0)

    text_renderer = gtk.CellRendererText()
    text_column = builder.get_object('text_column')
    text_column.pack_start(text_renderer)
    text_column.set_attributes(text_renderer, text=1)

    window.show_all() 
```

这将只显示“文本”列：

```
+---------------+
| Line 1        |
| Line 2        |
| Line 3        |
| Line 4        |
| Line 5        |
+---------------+ 
```

如果我将`gtk.TreeViewColumn`接口文件中 s 的顺序更改为：

```
<child>
  <object class="GtkTreeViewColumn" id="line_column">...</object>
</child>
<child>
  <object class="GtkTreeViewColumn" id="text_column">...</object>
</child> 
```

到：

```
<child>
  <object class="GtkTreeViewColumn" id="text_column">...</object>
</child>
<child>
  <object class="GtkTreeViewColumn" id="line_column">...</object>
</child> 
```

只有“行”列会显示：

```
+---------------+
| 1             |
| 2             |
| 3             |
| 4             |
| 5             |
+---------------+ 
```

但我希望它看起来像：

```
+---+-----------+
| 1 | Line 1    |
| 2 | Line 2    |
| 3 | Line 3    |
| 4 | Line 4    |
| 5 | Line 5    |
+---+-----------+ 
```

更改接口文件中 s 的顺序`gtk.TreeViewColumn`正在更改显示的列，这对我来说没有意义。它总是隐藏第一列。有谁知道我错过或忽略了什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:18:30.717

您将列大小模式设置为“固定”（我假设您出于性能原因需要此），但不要设置`fixed-width`属性。将其设置为两列上的任何值，它们就会出现。

# matlab - Matlab中不知道维度的对象向量

> ID：14384482
> 
> 赞同：3
> 
> 时间：2013-01-17T17:15:42.767
> 
> 标签：matlab

我有这个代码：

```
allObjects=[]
for i=1:100
   allObjects(end+1) = MyObject();   % push the object to the end of my vector
end 
```

但这打印：

> 无法从 MyObject 转换为 double。

如果我将 allObjects 声明为元胞数组，则相同

```
 allObjects = {} 
```

考虑到我不知道需要存储多少对象，我如何在 Matlab 中拥有对象向量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T09:24:54.470

`allObjects = MyObject.empty`会给你一个空的 class 对象数组`MyObject`。`empty`是为此目的设计的所有非抽象类的公共静态方法。键入`doc empty`以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T18:36:14.150

解决方案是做

```
allObjects=[MyObject] 
```

这将告诉 matlab allObjects 是 MyObject 的向量

唯一的问题是真实对象将从索引 2 开始（因为您使用 推送元素`end+1`）

# meteor - 是否有用于轻松集成 Google Contacts API 或 Facebook Multi-Friend Selector 的包？

> ID：14384485
> 
> 赞同：3
> 
> 时间：2013-01-17T17:15:46.763
> 
> 标签：meteor

我是 Meteor 的新手（实际上，还有 Javascript 和 Node.js），并且从 Party 示例开始工作。将登录与 Facebook、Google、Twitter 等集成在一起的流畅程度令人惊讶。

我还想让用户通过从他们现有的通讯录中选择他们来轻松地邀请他们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:43:47.307

没有专门为与这两个服务中的任何一个集成而构建的包；但是，如果您使用的是内置帐户包，您可以在登录期间请求扩展用户信息的权限。

对于 Facebook 或 Google，您可以指定`requestPermissions`使用[直接登录](http://docs.meteor.com/#meteor_loginwithexternalservice)或使用[螺栓固定的`{{loginButtons}}`帮助](http://docs.meteor.com/#accounts_ui_config)程序。在后一种情况下，您可以`requestPermissions`这样配置：

```
Accounts.ui.config({
  requestPermissions: {
    facebook: ['user_likes'],
    github: ['user', 'repo']
  },
  ...
}); 
```

根据文档，您可以在此处获取 Google 权限列表[，并在此处](https://developers.google.com/accounts/docs/OAuth2Login#scopeparameter)[获取](http://developers.facebook.com/docs/authentication/permissions/)Facebook 权限。

谷歌似乎允许访问他们的基本资料；Facebook 已经[扩展](http://developers.facebook.com/docs/reference/login/extended-permissions/)了授权读取用户好友列表的权限。

# linux - linux可执行文件不执行但静默退出

> ID：14384488
> 
> 赞同：0
> 
> 时间：2013-01-17T17:15:52.283
> 
> 标签：linux, elf

我有 2 台带有 CentOS 且可执行文件相同的虚拟 PC。在第一台电脑上运行并提供命令行选项。在第二个它什么也没说并退出。如何诊断第二台 PC？那里发生了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:50:47.593

我使用了 strace 并发现该进程缺少用于在 64 位 linux 上执行 32 位应用程序的库。

# css - 使用变换属性的多个 CSS 关键帧动画不起作用

> ID：14384494
> 
> 赞同：28
> 
> 时间：2013-01-17T17:16:14.610
> 
> 标签：css, css-animations

在使用*CSS 关键帧动画*时，我发现当我给一个元素两个动画时，例如：

```
.element {
    animation: animate1 1000ms linear infinite,
               animate2 3000ms linear infinite;
} 
```

如果两个动画都使用该`transform`属性进行动画处理，则只有最后一个通过级联触发。但是，如果`@keyframes`动画是让我们说一个`margin`或`display`某个其他`css`属性和其他用途`transform`，那么它们都会触发。

[这是一个](http://codepen.io/danferth/pen/wzoHh)带有以下相关代码的代码笔示例。

**CSS**

```
@keyframes move {
    0%, 100% { transform: translateX(0px); }
    50% { transform: translateX(50px); }
}
@keyframes skew {
    0%, 100% { transform: skewX(0deg); }
    50% { transform: skewX(15deg); }
}
@keyframes opacity {
    0%, 100% { opacity: 1; }
    50% { opacity: .25; }
}

.taco {
    animation: skew 2000ms linear infinite,
               opacity 4000ms linear infinite;
} 
```

**在上面他们都触发**

```
.burger {
    animation: skew 2000ms linear infinite,
               move 4000ms linear infinite;
} 
```

**在上面只有最后一个触发器（通过级联） - 为什么？**

任何人都可以在不使用的情况下解决此问题`js`？或者这是行不通的事情？这个例子非常简单，我知道我可以将动画合并为一个，而不必同时声明两者，但这是对我正在处理的更复杂动画的测试。

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-19T17:34:55.140

您不能在同一个元素上多次为同一属性（此处为 transform 属性）设置动画，最后一个将覆盖另一个，

您应该将目标元素放入 div 中，并在 div 上应用一个变换动画，在目标元素上应用另一个变换动画......

```
.div_class
{
    animation:animate1 1000ms linear infinite;
}

.element
{     
   animation:animate2 3000ms linear infinite;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-17T18:56:50.180

出于同样的原因

```
transform: skewX(45deg);
transform: translateX(4em); 
```

不会倾斜元素，只会移动它。如果你想倾斜和移动它，那么你需要链接它们`transform: skewX(45deg) translateX(4em)`

你必须做类似的事情

```
@keyframes t {
    25% { transform: skewX(15deg); }
    50% { transform: skewX(0deg) translateX(50px); }
    75% { transform: skewX(15deg); }
} 
```

您不需要明确指定关键帧`0%`-`100%`它们会自动生成 - 请参阅[**CSS Animations 规范**](http://www.w3.org/TR/css3-animations/#keyframes)。

然后你可以使用

```
animation: t 4000ms linear infinite,
        opacity 4000ms linear infinite; 
```

您应该注意的另一件事：`skewX(angleValue) translateX(lengthValue)` *恰好*与`translateX(lengthValue) skewX(angleValue)`. 但是，大多数情况下，**应用转换的顺序很重要**。`skewX(angleValue) translateY(lengthValue)`和会得到不同的结果`translateY(lengthValue) skewX(angleValue)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-21T01:14:07.167

@StephanMuller 的 jsfiddle 几乎就是答案，该语法对我有用 [http://jsfiddle.net/j83m5ha5/4](http://jsfiddle.net/j83m5ha5/4)

```
div {
background:green;
width:100px;
height:100px;
-webkit-animation: in 2s 200ms  forwards, out 1s 2200ms forwards;
} 
```

我相信 OP 已经提出了手头的问题，因为他想标准化他的动画并根据需要应用它们，从我的课程中获取这个最近的练习代码：[https ://jsfiddle.net/kgLc56w4/](https://jsfiddle.net/kgLc56w4/)

```
#b15{
top:200px;
left:200px;
background:#ff3399;
-webkit-animation: r4 ease-in-out 2s forwards 24s, s4 ease-in-out 2s forwards 30s;
} 
```

每个块只在一个方向上移动，所以我没有做 15 个动画的繁重工作，而是使用了更简单的 8。我知道这可以做得更简单，但这不是练习的重点。

不过，我改变了什么，我在最后 15 个元素上使用了 Stephan 的语法再次移动它并且它起作用了。

你只需要注意时间，在斯蒂芬的例子中，如果你增加第一个（in）动画的持续时间，你需要增加第二个（out）的延迟。

例子：

```
-webkit-animation: in 20s 200ms  forwards, out 1s 20200ms forwards; 
```

希望这会有所帮助！

# database - 在键/值存储和数据库计数中维护计数器值的技术

> ID：14384495
> 
> 赞同：0
> 
> 时间：2013-01-17T17:16:17.140
> 
> 标签：database, caching, nosql, key-value

我们有一个消息应用程序，它维护一个未读/已读计数器。目前，我们将此值缓存一小时，如果用户点击应用程序并且缓存已过期，则会对数据库表进行计数以刷新缓存值。

问题是当大量用户同时访问并且缓存过期时，这实际上很常见，这给数据库带来了巨大的压力，需要同时实时进行所有计数。

我想找到一种方法来在我们添加或删除消息时在缓存中主动维护这个计数器，这样用户只会点击缓存的值并且它永远不会过期。新问题在于确保计数值保持同步，因为添加或删除会触发缓存更新的消息的系统可能会错过一些，因此这两个数字将不再同步。

我提出的一些选项：

*   每 X 更新一次强制刷新。这对活跃用户来说很好，但不太活跃的用户更有可能有不准确的计数，并且没有缓存到期，该计数会保留很长时间。

*   有一个更新计数的后台作业。这样做的问题是它将数据库资源花费在非活动用户上，这是低效且耗时的。

有没有人对这种类型的计数维护有任何一般性建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:15:37.390

我不是 100% 确定您拥有的应用程序，但是如果我假设您有类似邮件客户端的东西，其中您收到的消息数量和发送的消息数量，那么我有一些想法：

1.  查看 Thundering Herd 关于缓存的想法： [http](http://en.wikipedia.org/wiki/Thundering_herd_problem) ://en.wikipedia.org/wiki/Thundering_herd_problem 这个想法是您并不总是使用相同的缓存过期值。引入一些随机性。有些会在 1 小时后过期，有些会在 58 分钟后过期，有些会在 1 小时 2 分钟后过期。这可以防止很多东西同时过期。

2.  考虑使写入端的缓存无效。换句话说，假设我向某人发送消息。当我在 UI 中发送它时，代码应该使其他用户缓存无效（他们接收的计数刚刚增加 1），然后重新填充该值。换句话说，不要只是通过一个应用程序调用使缓存无效。使其无效*并*主动将新值放入缓存中。

3.  您可以按计划播种缓存，但就像您说的那样，您将做不必要的工作。

4.  我注意到很多大公司都在处理这样的问题并将它们推到 UI 上。你允许在一段时间内稍微不一致的数据，或者你做一些小把戏。例如，当他们发送消息时，如果您希望它“感觉”快，只需使用 Javascript（假设是 Web 应用程序）将其“发送”计数器增加 1，即使该计数器尚未保存到数据库中。

换句话说，在 UI 中提供即时反馈并稍作修改，然后异步写入数据并等待它完成写入/缓存更新。

# java - Hibernate - 不止一次映射一个类

> ID：14384497
> 
> 赞同：1
> 
> 时间：2013-01-17T17:16:23.317
> 
> 标签：java, hibernate

我正在尝试添加一个持久化新添加的类。当我开始时，有一个以`Tournament`type 成员命名的类`Schedule`，它简单地包装了一个`Session`对象列表。这是该类的休眠映射。它的 id 和其他字段已被省略。

```
<hibernate-mapping default-access="field">
  <class name="fully.qualified.class.Tournament" table="tournaments">
    <component name="schedule" class="fully.qualified.class.Schedule">
      <list name="sessions" cascade="all-delete-orphan" lazy="true" table="tournament_sessions" >
        <key column="tournament_id" not-null="true"/>
        <index column="session_index"/>
        <one-to-many class="fully.qualified.class.Session"/>
      </list>
    </component>
  </class>
</hibernate-mapping> 
```

现在我需要创建一个新类`OtherThing`，它也有一个`Schedule.`所以我复制了会话表并调用它`other_thing_sessions.`我还创建了一个看起来与上面非常相似的休眠映射：

```
<hibernate-mapping default-access="field">
  <class name="fully.qualified.class.OtherThing" table="other_things">
    <component name="schedule" class="fully.qualified.class.Schedule">
      <list name="sessions" cascade="all-delete-orphan" lazy="true" table="other_thing_sessions" >
        <key column="other_thing_id" not-null="true"/>
        <index column="session_index"/>
        <one-to-many class="fully.qualified.class.Session"/>
      </list>
    </component>
  </class>
</hibernate-mapping> 
```

令我惊讶的是，这导致了以下错误：

```
org.hibernate.MappingException: Repeated column in mapping for entity: fully.qualified.class.Session column: session_index (should be mapped with insert="false" update="false") 
```

似乎hibernate不喜欢我反复使用这个类，所以我尝试将属性添加`entity-name="OtherThingSession"`到一对多元素。现在我遇到了这个错误：

```
org.hibernate.MappingException: Association references unmapped class: OtherThingSession 
```

这让我愣了一分钟，所以我回去查看我原来的错误。我决定只更改新映射中索引列的名称。这没有得到hibernate的抱怨，但是坚持没有用。当我试图`tournament_sessions`坚持一个`OtherThing.`

有人对如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:51:45.460

你不能两次映射一个类。Hibernate 无法处理这个问题。如您所见，您会遇到奇怪的错误。（当一个类被映射两次时，一级缓存也不能正常工作，因为 Hibernate 使用该类来决定一个缓存实例属于哪个表。我的效果是在 uniqueResult( ）认为表中只有一个。）

你可以做什么：

例如，创建两个“空”类，它们扩展 Session 而不向其添加任何功能

```
public class TournamentSession extends Session {}

public class OtherSession extends Session {} 
```

然后在您使用的一个`<one-to-many>`属性`TournamentSession`中，在您使用的另一个属性中`OtherSession`。`Session`它本身永远不能被映射，也不能在 Hibernate 属性中使用。

# .net - 数据集设计器在 Visual Studio 2012 迁移后停止工作

> ID：14384498
> 
> 赞同：2
> 
> 时间：2013-01-17T17:16:24.237
> 
> 标签：.net, mysql, vb.net, visual-studio-2012

我刚刚安装了新的 OS & Visual Studio 2012 并打开了我在 VS 2010 中创建的项目。项目迁移成功。但我无法使用数据集设计器打开我的数据集 (MySQL)。当我在数据源窗口中双击我的数据集时，没有任何反应。选择我的数据源后单击“使用向导配置数据源”时，我收到一条错误消息，提示“列需要有效的数据类型”。

我确信我正在连接到相同的表结构。

在从 VS2008 迁移到 VS2010 的过程中出现了类似的问题。我从初学者那里重新创建了数据集、表适配器等。但我现在不想重新创建它们。我想修复现有的数据集文件。

我是否需要手动编辑任何数据集文件以启动设计器工作？

Clean + Rebuild 不能解决这个问题。

我有最新的 MySQL 版本（5.5.24）和最新的 MySQL .NET 连接器（6.6.4）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T08:50:01.193

删除扩展名为 .SUO 的文件，这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:26:50.243

我刚刚发现可以通过 DataSources 窗口打开 Dataset（VIEW > Other Windows > Data Sources，而在解决方案资源管理器中选择了数据集项目）。从那里打开一次后，它也会通过解决方案资源管理器打开。

不幸的是，重新启动 Visual Studio 后问题又出现了，即使数据集已更改并保存在 Studio 2012 中。至少这是一种解决方法。

# ms-access - 无法从 MS Access 中的选择下拉列表中获取文本值

> ID：14384508
> 
> 赞同：2
> 
> 时间：2013-01-17T17:16:44.333
> 
> 标签：ms-access

我有一个访问表单，其中包含要根据下拉列表的选择填充的记录集。我已经测试了查询，如果我直接设置变量数据，它肯定可以工作。但是，我似乎无法让它工作。我试图设置隐藏文本框的值以查看是否可以通过这种方式访问​​数据，但是，我继续收到运行时错误：2185 '您无法引用控件的属性或方法除非控件有焦点。

这是子程序中的代码：

```
Private Sub pickdate_AfterUpdate()
  Me![pickdate].SetFocus
  Me![tb_HiddenDate] = Me![pickdate].Text
  Forms!mainForm!subForm.Requery
End Sub 
```

顺便说一句，如果我这样做`Debug.Print(Me![pickdate])`，它只会返回所选项目的索引。我也一样！[pickdate].Value。Me![pickdate].Text 会引发异常，即使在 Pickdate 的 AfterUpdate 处理程序中也是如此。

我查看了这个线程：[MS Access: An error in vba of my form](https://stackoverflow.com/questions/7623686/ms-access-an-error-in-vba-of-my-form)，但在这种情况下不起作用。我现在不知所措，试图弄清楚为什么这没有按预期工作。有人有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:28:16.983

暂时更改更新后程序以查看您正在处理的内容。可能`pickdate`包括 2 列：第一列是数字；第二个是您要检索的文本。

```
Private Sub pickdate_AfterUpdate()
Dim i As Long
Debug.Print "pickdate Value: " & Me![pickdate]
For i = 0 To (Me.pickdate.ColumnCount - 1)
    Debug.Print "Column " & i, Me.pickdate.Column(i)
Next
'Forms!mainForm!subForm.Requery
End Sub 
```

在立即窗口 ( `Ctrl`+ `g`) 中查看输出。

# javascript - 对 null 进行多少次检查是合适的？

> ID：14384509
> 
> 赞同：6
> 
> 时间：2013-01-17T17:16:48.263
> 
> 标签：javascript, coding-style

当一个变量缺少一个字段并且用户看到这个或那个变量没有这个或那个属性的警告时，我遇到了这个问题。在简单的情况下，它非常简单。

```
if(field)
  doSomething(field.subField); 
```

然而，在经验情况下，我发现自己陷入了这种荒谬的过度检查。

```
if(!data 
  || !data.records 
  || !data.records[0] 
  || !data.records[0].field 
  || !data.records[0].field.id)
    return null;
doSomething(data); 
```

我的意思是，来吧 - 如果我是水管工，而不是开发人员，管道式的东西看起来像。所以，我有一种非常强烈的感觉，我的支票虽然足够，但可能有点太过分了。JS 中是否有关于何时执行检查的约定？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T17:34:30.610

我只是提出一个有争议的意见。

在 JavaScript 中，不要费心检查`null`实际不应该发生的地方的值。换句话说，您检查每个嵌套属性是否存在空值的想法有点矫枉过正，只会使您的脚本复杂化。

根据我的经验，我学会了*让脚本错误发生*。这对于编写 C 代码或数据库代码的人来说有点违反直觉，其中未处理的`null`可能会使服务器崩溃或损坏数据，但是在脚本世界中，最好尽早发现错误。如果您的页面继续加载而没有任何意外发生的迹象，那么稍后当用户单击按钮或提交表单时，它只会以奇怪的错误形式出现。

**我的建议**：

`null` *仅*当您愿意为此做些什么时才进行检查。如果您有一个 Web 服务可能会`null`在出现问题时返回 a，然后检查它并显示一条错误消息。如果你得到一个非空值，假设它是一个有效值并继续。没有理由在你的整个脚本中乱扔空检查，这实际上不会给你的程序带来任何真正的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:28:49.857

Normally you would make sure that if an object exists, it always has a basic set of properties that makes it usable.

For example, if the variable `data` has a value at all, it would be an object that has `records` property that always is an array, even if it is empty. If the array contains anything, it should always be objects that has a `field` property, which is an object that always has an `id` proprty. That would cut down the checks to:

```
if (!data || data.records.length == 0) {
  return null;
} 
```

# javascript - 如何在来自不同网站集的 SharePoint 2010 页面的模式对话框中打开新列表项表单

> ID：14384513
> 
> 赞同：1
> 
> 时间：2013-01-17T17:17:08.293
> 
> 标签：javascript, sharepoint, sharepoint-2010, modal-dialog, sharepoint-designer

我需要在 Sharepoint 2010 页面中的超链接或按钮单击上打开一个新的列表项表单。页面和列表位于不同的网站集中。我必须从 Sharepoint Designer 执行此操作，或者直接在浏览器中编辑页面，Visual Studio 项目是不可能/允许的......

这可以做到吗，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T07:16:53.960

PS最安全的处理New form的方法是使用ListForm.aspx页面，如下：

```
 /_layouts/listform.aspx?PageType=8&ListId={PUT-LIST-GUID-HERE} 
```

（PageType 值来自[PAGETYPE](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.pagetype.aspx)枚举）

我认为你应该按照`PAGE_NEWFORMDIALOG : New form for a file dialog box.Value=9`msdn 上的描述使用。如果新表单在模型弹出时未打开，则

尝试这个 ：

### 超链接

```
 <a href='javascript:;' onclick='Opendialog()'>New Item</a> 
```

### Opendialog 是 Javascript 函数

```
 function Opendialog() {
       var options = SP.UI.$create_DialogOptions();
       options.resizable = 1;
       options.scroll = 1;
       options.url = SiteURLWhichExistList + "/_layouts/listform.aspx?PageType=8&ListId={PUT-LIST-GUID-HERE}";
       options.dialogReturnValueCallback = Function.createDelegate(null, CloseCallback);
       SP.UI.ModalDialog.showModalDialog(options);
   } 
```

注意：`SiteURLWhichExistList` 在您的列表所在的位置传递您的网站集 url。

希望能帮助到你！！

# php - php 肥皂客户端，来自坏 wsdl 的错误？“未捕获的 SoapFault 异常：[HTTP] 无法连接到主机”

> ID：14384515
> 
> 赞同：0
> 
> 时间：2013-01-17T17:17:17.670
> 
> 标签：php, soap, wsdl

我大多是 SOAP 新手，所以我制作了一个小测试脚本来连接到我客户的服务器。他们在那里有一个 GetMessage 命令，不需要输入或身份验证，仅用于测试连接性：

```
<?php
ini_set('soap.wsdl_cache_enabled',0);
ini_set('soap.wsdl_cache_ttl',0);

$url        = "https://test.mycustomer.com/api/TestService.svc?wsdl";
$client     = new SoapClient($url, array("trace" => 1, "exception" => 0));

$result = $client->GetMessage(NULL);

echo "<pre>".print_r($result, true)."</pre>";
if($result->GetMessageResult->Status == "Success")
{
    echo "Item deleted!";
}
?> 
```

如果我在命令行中运行它，我会得到：

```
Fatal error: Uncaught SoapFault exception: [HTTP] Could not connect to host in /var/www/my.stage.com/htdocs/common/soaptest.php:8
Stack trace:
#0 [internal function]: SoapClient->__doRequest('<?xml version="...', 'http://459265-d...', 'http://tempuri....', 1, 0)
#1 [internal function]: SoapClient->__call('GetMessage', Array)
#2 /var/www/my.stage.com/htdocs/common/soaptest.php(8): SoapClient->GetMessage(NULL)
#3 {main}
  thrown in /var/www/my.stage.com/htdocs/common/soaptest.php on line 8 
```

从浏览器我得到：

```
PHP Notice: 'SoapClient::__doRequest() [soapclient.--dorequest]: php_network_getaddresses: getaddrinfo failed: Name or service not known' 
```

在此服务的 WSDL 中，字符串“459265”出现在此处：

```
<wsdl:service name="TestService">
<wsdl:port name="BasicHttpBinding_ITestService" binding="tns:BasicHttpBinding_ITestService">
<soap:address location="http://459265-dev1/api/TestService.svc"/>
</wsdl:port>
<wsdl:port name="BasicHttpsBinding_ITestService" binding="tns:BasicHttpsBinding_ITestService">
<soap:address location="https://test.mycustomer.com/api/TestService.svc"/>
</wsdl:port>
</wsdl:service> 
```

所以我的问题是，这对吗？WSDL 是否应该有这样的本地 url，而我无法从我的盒子中访问？

更多信息，当我在 __getFunctions 和 __getTypes 上执行 var_dump 时，我得到了

```
array(2) {
  [0]=>
  string(53) "GetMessageResponse GetMessage(GetMessage $parameters)"
  [1]=>
  string(53) "GetMessageResponse GetMessage(GetMessage $parameters)"
}
array(5) {
  [0]=>
  string(21) "struct GetMessage {
}"
  [1]=>
  string(55) "struct GetMessageResponse {
 string GetMessageResult;
}"
  [2]=>
  string(8) "int char"
  [3]=>
  string(17) "duration duration"
  [4]=>
  string(11) "string guid"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:25:58.617

您要做的是将代码包装在一个`try{}, catch{}`块中。例如，

```
<?php
    try {
        ini_set('soap.wsdl_cache_enabled',0);
        ini_set('soap.wsdl_cache_ttl',0);

        $url = "https://test.mycustomer.com/api/TestService.asmx?wsdl";
        $client = new SoapClient($url, array("trace" => 1, "exception" => 0));

        $result = $client->GetMessage(NULL);

        echo "<pre>".print_r($result, true)."</pre>";
        if($result->GetMessageResult->Status == "Success")
        {
            echo "Item deleted!";
        }
    }
    catch (SoapFault $exception) {
        echo $exception->getMessage();
    }
?> 
```

正如错误所说，`Fatal error: Uncaught SoapFault exception: [HTTP] Could not connect to host in ....`，所以无论如何您都需要捕获异常。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:56:34.493

部分解决了。问题出在 wsdl 服务声明中，它有两个端口用于相同的绑定（见上文）。在 php 的 SoapClient 中，__doRequest 的 $location 来自第一个绑定（如果我使用了错误的术语，请原谅我），并且它的 url 是我无法访问的本地 url。所以我这样做了：

```
class MySoapClient extends SoapClient
{
    public function __doRequest($request, $location, $action, $version, $one_way = 0)
    {
        $response = parent::__doRequest($request, "https://test.mycustomer.com/api/TestService.svc", $action, $version, $one_way);

        return($response);
    }
} 
```

扩展 SoapClient 并覆盖 __doRequest，我能够将 $location 设置为我知道可行的 url。再次运行它并收到欢迎信息 - yipee！不是一个很好的解决方案，因为我必须为每个服务扩展一个新客户端，但要解决这个问题，我所要做的就是取出硬编码的 url，用外部域替换 $location 中的本地域，然后调用__doRequest ，它将适用于所有服务。

# c# - winRT DataContractSerialized

> ID：14384516
> 
> 赞同：0
> 
> 时间：2013-01-17T17:17:19.677
> 
> 标签：c#, windows-8

```
class AppDataManager
{
    public static async Task SaveAsync<T>(T data, string fileName)
    {
        StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync(fileName, 
            CreationCollisionOption.ReplaceExisting);

        var stream = await file.OpenStreamForWriteAsync();
        var serializer = new DataContractSerializer(typeof(T));

        serializer.WriteObject(stream ,data);
        await stream.FlushAsync();
    }

    public static async Task<T> RestoreAsync<T>(string fileName)
    {
        try
        {
            var file = await ApplicationData.Current.LocalFolder.GetFileAsync(fileName);

            var instream = await file.OpenStreamForReadAsync();
            var serializer = new DataContractSerializer(typeof(T));
            return (T)serializer.ReadObject(instream);
        }
        catch (Exception)
        {
            return default(T);
        }
    }
} 
```

在单击事件的 MainPage.XAML 中。

```
 private async void SaveButton_Click_1(object sender, RoutedEventArgs e)
    {

        data = new UserData()
        {
            Name = "ibraheem",
            ID = 1,
            phoneNumber = 799,
            Course = "java"
        };
        await AppDataManager.SaveAsync<UserData>(data, fileName);
    } 
```

当我单击“保存”按钮时，它给了我异常

> 无法序列化类型“DesigningElements.UserData”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:32:05.373

确保你的`UserData`类声明类似于下面

```
[DataContract]
public class UserData
{
    [DataMember]
    public string Name { set; get; }
    [DataMember]
    public int ID { set; get; }
    [DataMember]
    public string phoneNumber { set; get; }
    [DataMember]
    public string Course { set; get; }
} 
```

# iphone - UILocalNotification - 如何发现用户操作是否来自通知中心？

> ID：14384517
> 
> 赞同：3
> 
> 时间：2013-01-17T17:17:21.210
> 
> 标签：iphone, ios, objective-c, ios6, uilocalnotification

在执行通知时调用的方法中：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
```

有没有办法发现通知是来自用户在通知中心点击警报，还是在应用程序运行时收到警报？

原因是：我想在用户点击警报时将他们引导到特定页面。如果用户在应用程序内时发出警报（因此，他们没有在通知中心点击警报），则会调用上述方法，并且我不想将他们踢到另一个屏幕。

但是，如果应用程序正在运行或在后台运行，并且他们已拉下通知中心，我确实希望将它们带到特定屏幕，并且在这些情况下调用相同的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:23:35.113

不幸的是，你不能完全按照自己的意愿去做。你能来的最接近的是

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    if (application.applicationState == UIApplicationStateActive)
        // They didn't come from the notification area
    else
        // They did
} 
```

不幸的是，在接收警报时没有提供上下文信息。

# asp.net-mvc-4 - VS2012 MVC 4.0 Intranet 项目使用 WebMatrix.WebData 参考失败

> ID：14384521
> 
> 赞同：2
> 
> 时间：2013-01-17T17:17:35.613
> 
> 标签：asp.net-mvc-4, simplemembership, webmatrix-2

我做了以下事情：

在 VS 2012 中使用 Intranet 模板创建一个 MVC 4.0 应用程序，打开 WindowsAuthentication。项目可以启动并显示主页。

然后我在 References WebMatrix.WebData 下添加并将 Copy Local 设置为 true。

启动应用程序然后返回 404 错误，指示请求的 URL：/login.aspx

奇怪，不是吗？

我想使用 SimpleMembership Provider，但如果我什至不能引用 DLL，这并不能说服我。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:09:07.490

MVC4 Intranet 项目模板提供了一个 web.config，其中包含：

```
<authentication mode="Windows" /> 
```

出于某种我不知道的原因，只需将 Microsoft ASP.Net Web Pages 2 Nuget 包添加到从 MVC 4 Intranet 项目模板生成的 Web 应用程序中就会改变整个应用程序的路由行为，这样 /login.aspx 在没有时成为默认路由指定了控制器/动作。

这是为表单身份验证定义的 defaultUrl 默认值，详见[forms-Element 定义](http://msdn.microsoft.com/de-de/library/1d3t3c61%28v=vs.80%29.aspx)。

以下两个绕过工作：

1.  通过添加类似的内容来更改路线图

    ```
     routes.MapRoute(
            name: "LoginRedirect",
            url: "login.aspx/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
    ```

    进入路由表。

2.  修改 web.config 以包含

    ```
    <authentication mode="Windows">
      <forms loginUrl="~/Home/Index" defaultUrl="~/Home/Index"/>
    </authentication> 
    ```

其中 forms 元素提供了正确的起始页。

要么工作。后者似乎更适合我。

# c# - “按请求”激活上下文 ... 无请求

> ID：14384524
> 
> 赞同：1
> 
> 时间：2013-01-17T17:17:46.290
> 
> 标签：c#, ninject, ninject.web.mvc, application-start, ninject.web

我有一个需要根据请求创建的存储库。现在有一个单例缓存对象需要使用该存储库来填充自己的数据，但是该对象在 Application_Start 事件中初始化，因此没有请求上下文。

使用 Ninject 实现这一目标的最佳方法是哪一种？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:07:09.320

由于`HttpContext`应用程序启动时缺少电流（在 IIS7 集成模式下），Ninject 肯定会`InRequestScope`像`InTransientScope`您尝试注入对应用程序启动的依赖项一样处理对象绑定。正如我们在 Ninject 的 (2.2) 源代码中看到的：

```
/// <summary>
/// Scope callbacks for standard scopes.
/// </summary>
public class StandardScopeCallbacks
{
    /// <summary>
    /// Gets the callback for transient scope.
    /// </summary>
    public static readonly Func<IContext, object> Transient = ctx => null;

    #if !NO_WEB
    /// <summary>
    /// Gets the callback for request scope.
    /// </summary>
    public static readonly Func<IContext, object> Request = ctx => HttpContext.Current;
    #endif
} 
```

`HttpContext.Current`将`null`在应用程序启动时，因此`InRequestScope`绑定的对象将在应用程序启动时以与 bind 相同的方式处理`InTransientScope`。

所以你可以在你的`global.asax`：

```
protected override Ninject.IKernel CreateKernel()
{
    var kernel = new StandardKernel();
    kernel.Bind<RequestScopeObject>().ToSelf().InRequestScope();
    kernel.Bind<SingletonScopeObject>().ToSelf().InSingletonScope();
    return kernel;
}

protected override void OnApplicationStarted()
{
    AreaRegistration.RegisterAllAreas();
    RegisterRoutes(RouteTable.Routes);
    // init cache
    this.Kernel.Get<SingletonScopeObject>().Init();
} 
```

但是你必须在使用后进行清理`RequestScopeObject`（例如`Dispose()`，如果它实现了`IDisposable`）。

```
public class SingletonScopeObject
{
    private string cache;
    private RequestScopeObject requestScopeObject;
    public SingletonScopeObject(RequestScopeObject requestScopeObject)
    {
        this.requestScopeObject = requestScopeObject;
    }

    public void Init()
    {
        cache = this.requestScopeObject.GetData();
        // do cleanup
        this.requestScopeObject.Dispose();
        this.requestScopeObject = null;
    }

    public string GetCache()
    {
        return cache;
    }
} 
```

**另一种方法**

绑定你的`RequestScopeObject`两者`InRequestScope`并`InSingletonScope`使用条件绑定，如下所示：

```
kernel.Bind<SingletonScopeObject>()
      .ToSelf()
      .InSingletonScope()
      .Named("singletonCache");
// as singleton for initialization
kernel.Bind<RequestScopeObject>()
      .ToSelf()
      .WhenParentNamed("singletonCache")
      .InSingletonScope();
// per request scope binding
kernel.Bind<RequestScopeObject>()
      .ToSelf()
      .InRequestScope(); 
```

初始化后的清理保持不变。

# jpa - 作业中的 playframework 手动 jpa 事务

> ID：14384531
> 
> 赞同：0
> 
> 时间：2013-01-17T17:17:58.200
> 
> 标签：jpa, transactions, playframework

我读过[这个](https://stackoverflow.com/questions/8169279/how-can-i-commit-a-play-jpa-transaction-manually)：

我的问题是：

如果我想在 Job 中手动管理我的交易，我应该怎么做？

现在我有一个代码并在那里使用“@NoTransaction”，就像上面的帖子中解释的那样：

```
@NoTransaction
@Override
public JobResult doJobWithResult() throws Exception {

    ...  

    JobResult result = new JobResult();
     try {

        //MyEntity.em().getTransaction().commit();
        MyEntity.em().getTransaction().begin();
.... 
```

但是，但在开始（begin（））交易的那一刻，我仍然有一个错误：

> java.lang.IllegalStateException：事务已经激活

因此，即使我使用@NoTransaction，作业仍然会启动自己的事务。

我可以这样修复它：

```
 MyEntity.em().getTransaction().commit(); // commit previous started transaction
   MyEntity.em().getTransaction().begin(); 
```

但这似乎不是一个好的解决方案。

你会推荐什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:41:26.983

我发现：如果使用：

```
 JPAPlugin.startTx(false); // to start transaction
  JPAPlugin.closeTx(false); // to close and commit transaction
  JPAPlugin.closeTx(true); //  to roll-back transaction 
```

而不是使用所有这些 JPA 东西，然后一切正常。

所以，这对我来说是一个解决方案。但我并没有深入了解那是怎么玩的！认为/识别我是手动使用 jpa 还是通过插件 api 工作 .. 然后决定。如果查看 startTx 方法，它看起来像这样：

```
 if (autoTxs) {
        manager.getTransaction().begin();
    }
    JPA.createContext(manager, readonly); 
```

这个想法是，当您想在 Play 中手动管理事务时，“更好地使用”JPA-Plugin-approach（因为 JPA 插件涉及一些后端魔法，所以最好在您的操作中接近它）

# servicestack - ServiceStack MVC Power Pack 为我提供了哪些不在基本 ServiceStack 库中的内容？

> ID：14384533
> 
> 赞同：2
> 
> 时间：2013-01-17T17:18:06.620
> 
> 标签：servicestack

ServiceStack MVC Power Pack 给了我什么基础 SS 库中没有的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:48:43.793

您必须检查[电源组链接](http://servicestack.net/mvc-powerpack/)。基本上，这就是我喜欢服务堆栈的地方，所有东西都是乐高积木，所以你可以玩插电。现在，服务堆栈基本上是 Web 服务库，您可以将其与任何 json 序列化程序或任何具有任何 orm 的 IOC 容器一起使用。但是，如果您安装电源组，它将为您提供一切以启动和启动。无需担心选择库，为您完成牦牛剃须之类的事情；这样您就可以专注于业务需求。就我个人而言，除了电源组提供的以外，我更喜欢检查其他东西/选项，但对于正常情况（80% 的情况）电源组就像魅力一样。并让您的应用程序运行。

让我知道是否需要任何进一步的信息。我希望我能理解你的问题，所以我没有给出 dll 名称，而是给出了一个简短的答案。

[猴子广场服务栈](http://vimeo.com/55817065)介绍。

# oracle - 根据另一个表中的条件设置一个表中的字段

> ID：14384535
> 
> 赞同：0
> 
> 时间：2013-01-17T17:18:11.697
> 
> 标签：oracle, oracle10g, sqlplus

我将尽可能清楚地提出这个问题。这很令人困惑，所以如果不清楚，我会事先道歉：

我有一组表：Table1、Table2、Table3

这些表中的每一个都有一个“年龄”列

我想创建一个表，检查年龄列是否包含每个表的“年龄”列中大于 60 的任何记录，如果是，则在新列中设置等于“RED”的记录。我还想指定一些其他标准来设置列等于“黄色”和“绿色”；然而，一步一步。

像这样的东西：

表 | 年龄

表 1 | 红色的

表 2 | 黄色

表 3 | 绿色的

任何可用的帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:27:26.770

就像是

```
select case when max(t1.age) > 60 then 'RED' else 'GREEN' end table1_age, 
            case when max(t2.age) > 60 then 'RED' else 'GREEN' end table2_age, 
            case when max(t3.age) > 60 then 'RED' else 'GREEN' end table3_age
      from (select max(age) age from table1) t1
           cross join (select max(age) age from table2) t2
           cross join (select max(age) age from table2) t3; 
```

或者

```
select 'table 1' tabl,
        case when max(age) > 60 then 'RED' else 'GREEN' end 
  from  table1 t1
union all
select 'table 2' tabl,
        case when max(age) > 60 then 'RED' else 'GREEN' end 
  from  table2
union all
select 'table 3' tabl,
        case when max(age) > 60 then 'RED' else 'GREEN' end 
  from  table3; 
```

# sql - 基于多列透视数据

> ID：14384537
> 
> 赞同：0
> 
> 时间：2013-01-17T17:18:22.113
> 
> 标签：sql, sql-server, tsql, pivot

我想知道是否可以旋转下表：

```
10  A  ddd
24  B  fff
34  B  ddd
12  A  ddd 
```

我需要像这样旋转它

```
A  B  text
-- -- ----
22 34 ddd
0  24 fff 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:27:34.303

您可以为此使用该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能：

```
select IsNull(A, 0) A, 
  IsNull(B, 0) B, 
  txt
from
(
  select num, let, txt
  from yourtable
) src
pivot
(
  sum(num)
  for let in (A, B)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/f5649/10)

如果您的值是已知的，那么您可以对它们进行硬编码，类似于上面的查询。但是如果您有未知数量的值，那么您可以使用动态 sql 来创建查询字符串。您的动态 sql 代码如下所示：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colsNull AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Let) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsNull = STUFF((SELECT distinct ',IsNull(' + QUOTENAME(Let)+', 0) as '+QUOTENAME(Let) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @colsNull + ', txt from 
             (
                select num, let, txt
                from yourtable
            ) x
            pivot 
            (
                sum(num)
                for let in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/f5649/14)

两个查询的结果是：

```
|  A |  B | TXT |
-----------------
| 22 | 34 | ddd |
|  0 | 24 | fff | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:07:25.103

甲骨文查询：

```
SELECT NVL(DECODE(area, 'A', total), 0) A
     , NVL(DECODE(area, 'B', total), 0) B
     , val
FROM
 (
  SELECT area, SUM(id) total, val
    FROM stack_test
  GROUP BY area, val
 )
 /
A   B   VAL
--  --  --
0   24  fff
22  0   ddd
0   34  ddd 
```

# web-services - Rails 控制台错误 - savon gem

> ID：14384539
> 
> 赞同：0
> 
> 时间：2013-01-17T17:18:25.907
> 
> 标签：web-services, savon, rails-console

我在 Rails 控制台上尝试这个命令：

`client = Savon.client("http://www.webservicex.net/uszip.asmx?WSDL")`

但是出现了这个错误：

`TypeError: can't convert String into Hash`

我已经在我的 gemfile 中添加了“savon”gem，savon 的版本是 2.0.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:19:45.750

另一个人在一个双胞胎问题中回答了这个问题。这是他答案的链接，我可以确认他的答案对我有用：[https ://stackoverflow.com/a/14344886/133257](https://stackoverflow.com/a/14344886/133257)

```
client = Savon.client(:wsdl => "http://www.webservicex.net/uszip.asmx?WSDL") 
```

# sql-server-2008 - SQL Server 中的服务器端分页

> ID：14384540
> 
> 赞同：2
> 
> 时间：2013-01-17T17:18:26.620
> 
> 标签：sql-server-2008, row-number

我对 SQL Server 如何使用公用表表达式和 ROW_NUMBER 实现更少的读取和性能改进感到有些困惑。为什么在表达式中实现的表不必执行普通查询必须执行的所有读取以允许查询使用 ROW_NUMBER 进行排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:53:17.577

`CTE`不是（必然）“实现”的。并不是说它会不可避免地将所有行复制到其他地方，并且会在副本上执行其他操作（尽管它可能会表现得如此，因此优化器认为它更好）。

如果我们采用这个简单的查询：

```
SELECT  *
FROM    (
        SELECT  *,
                ROW_NUMBER() OVER (ORDER BY id) rn
        FROM    mytable
        ) q
WHERE   rn BETWEEN 101 AND 110 
```

看看它的计划，我们会看到这样的东西：

```
 |--Filter(WHERE:([Expr1003]>=(101) AND [Expr1003]<=(110)))
       |--Top(TOP EXPRESSION:(CASE WHEN (110) IS NULL OR (110)<(0) THEN (0) ELSE (110) END))
            |--Sequence Project(DEFINE:([Expr1003]=row_number))
                 |--Segment
                      |--Clustered Index Scan(OBJECT:([ee].[dbo].[mytable].[PK__mytable__3213E83F29C2D227]), ORDERED FORWARD) 
```

在这里，记录被扫描（`id`按照表聚集的顺序`id`），分配`ROW_NUMBER`（这就是这样`Sequence Project`做的）并传递给`TOP`它，当达到某个阈值时，它会停止执行（`110`在我们的例子中是记录）。

那些 110 条记录被传递给`Filter`那些只传递`rn`大于 100 的记录。

查询本身只扫描`110`记录：

```
SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 1 ms.

(строк обработано: 10)
Table 'mytable'. Scan count 1, logical reads 3, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.

 SQL Server Execution Times:
   CPU time = 0 ms,  elapsed time = 0 ms. 
```

在 3 页。

现在让我们看看未分页的查询：

```
SELECT  *
FROM    mytable
ORDER BY
        id 
```

这个非常简单：读取表格中的所有内容并将其吐出。

```
 |--Clustered Index Scan(OBJECT:([ee].[dbo].[mytable].[PK__mytable__3213E83F29C2D227]), ORDERED FORWARD) 
```

然而，看起来容易并不意味着容易完成。该表非常大，我们需要进行多次读取以返回所有记录：

```
SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 0 ms.

(строк обработано: 1310720)
Table 'mytable'. Scan count 1, logical reads 2765, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.

 SQL Server Execution Times:
   CPU time = 266 ms,  elapsed time = 11690 ms. 
```

因此，简而言之，分页查询只知道何时停止。

# java - 在不同的计算机上使用 HttpUrlConnection 可能会导致不同的效果？

> ID：14384541
> 
> 赞同：0
> 
> 时间：2013-01-17T17:18:27.387
> 
> 标签：java, http, matlab, httpurlconnection, put

我编写了一个 HTTP 服务器来以 RESTful 方式管理资源，以及一些客户端（.NET、VBA）。

我需要使用 MATLAB 的 RESTful API，所以我使用 HttpUrlConnection 编写了一个 Java 客户端。

我在使用它的计算机上工作得很好，除了一个用户的 PUT 请求被作为 POST 请求接收。

我的 JAVA 代码包括：

```
 HttpURLConnection  conn = (HttpURLConnection) url.openConnection();       
   conn.setDoOutput(true);
   conn.setDoInput(true);
   conn.setRequestMethod(Method); 
```

我读到 setDoOutput(true) 应该将 HTTP 方法设置为 POST，但是因为我用 Method = "PUT" 调用了 setRequestMethod(Method)，并且它在大多数站点都有效，这是我发现的唯一方法使用 HttpURLConnection 发送 PUT 请求，我不知道可能出了什么问题。

每个 matlab 客户端运行相同的 1.6 java 版本。

我找不到发生了什么，所以我切换到 Apache HTTP 库（它可以工作），但我想知道 HttpURLConnection 发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:34:18.270

> 我读到 setDoOutput(true) 应该将 HTTP 方法设置为 POST

谁告诉你这是错误的，因为[文档](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29)没有提到这一点：

> URL 连接可用于输入和/或输出。如果您打算使用 URL 连接进行输出，请将 DoOutput 标志设置为 true，否则设置为 false。默认值为假。

正如您所猜测的，您应该使用[该`setRequestMethod(method)`方法](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29)来设置请求类型。那么你的变量的值是`Method`多少？你为什么不直接使用`setRequestMethod("PUT")`？

# magento - Magento 面包屑在第一次查看页面后消失

> ID：14384543
> 
> 赞同：0
> 
> 时间：2013-01-17T17:18:34.623
> 
> 标签：magento, magento-1.7

我们目前正在使用 Magento 开发一个站点，无论出于何种原因，当我们第一次查看类别页面时，面包屑就在那里，但是，如果我们刷新页面，面包屑就会消失。

任何关于为什么会发生这种情况的想法都非常感谢！

谢谢！

杰夫

编辑/更新：我进入了 breadcrumbs.phtml 文件并在 $crumbs 变量上放置了一个 var_dump，当面包屑没有出现时它返回 NULL，为什么该变量会在页面刷新时变为 NULL？

编辑/更新 2：似乎整页缓存没有缓存面包屑

编辑/更新 3：这绝对是一个整页缓存问题，当 FPC 被禁用时，面包屑在每个页面加载时都会起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T13:01:34.927

我对 EE 也有同样的问题，它似乎与打开的开发人员模式有关。

我注释掉了 index.php 中的代码，一切正常。

出于某种奇怪的原因，当开发者模式打开时，面包屑不会缓存，但随后会拉出空缓存以在 FPC 中显示（这没什么）

我今天就这个问题联系了 Magento EE 支持。我会根据反馈进行更新，但我建议其他有此问题的人联系支持人员，因为这是一个开箱即用的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T19:49:09.947

只是花了几个小时研究这个。问题是页面缓存没有加载页面布局是有充分理由的，这意味着当页面缓存尝试重新加载此块的缓存时，不会调用 Mage_Catalog_Block_Breadcrumbs->_prepareLayout()。_prepareLayout() 是在调用 Mage_Page_Block_Html_Breadcrumbs->_toHtml() 之前加载面包屑的内容

使用保存到文件系统的全页缓存复制问题的一种快速方法是：

1.  转到产品或类别页面
2.  刷新整页缓存
3.  进入 /var/full_page_cache 并搜索包含两个看起来像“%CONTAINER_BREADCRUMBS%”的文件的文件夹并删除它们

这将要求页面缓存尝试仅重新加载该块。由于加载没有调用 Mage_Catalog_Block_Breadcrumbs->_prepareLayout()，因此对 Mage_Page_Block_Html_Breadcrumbs->_toHtml() 的调用返回一个空字符串，并且新的缓存文件为空，直到缓存被完全清除并重新加载整个页面。

我为此提出的解决方案并不漂亮，但它似乎是侵入性最小的。只需为 _toHtml() 方法创建一个块覆盖，该方法执行 _prepareLayout() 所做的工作。

```
class Package_Module_Block_Html_Breadcrumbs extends Mage_Page_Block_Html_Breadcrumbs
{
    protected function _toHtml()
    {
        if (!is_array($this->_crumbs)) {
            $this->addCrumb('home', array(
                'label'=>Mage::helper('catalog')->__('Home'),
                'title'=>Mage::helper('catalog')->__('Go to Home Page'),
                'link'=>Mage::getBaseUrl()
            ));

            $path  = Mage::helper('catalog')->getBreadcrumbPath();

            foreach ($path as $name => $breadcrumb) {
                $this->addCrumb($name, $breadcrumb);
            }
        }
        return parent::_toHtml();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:55:46.233

您可能必须将以下行添加到您的模板文件中 - 它可能就这么简单！

```
 echo $this->getLayout()->getBlock('breadcrumbs')->toHtml(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-13T09:12:46.917

这是 Magento EE 版本中的一个已知错误。您可以查看此[链接](http://www.kingletas.com/2013/02/magento-fpc-breadcrumb-dissapearing.html)以获取解决方案。

我们最近遇到了这样的问题，但在我们的例子中，上面文章中的代码已经添加到代码库中。通过简单地删除它（从 cache.xml 中），面包屑开始表现出应有的行为。奇怪的东西。

# windows-8 - 离线下载windows phone sdk 8

> ID：14384546
> 
> 赞同：17
> 
> 时间：2013-01-17T17:18:54.500
> 
> 标签：windows-8, windows-phone-8

我刚刚在我的 Windows 8 机器上安装了 Visual Studio 2012 express edition。

现在我想安装 Windows 8 Phone 的 SDK，我知道可以从这里下载： http: [//dev.windowsphone.com/en-us/downloadsdk](http://dev.windowsphone.com/en-us/downloadsdk)

但是这个链接只下载一个安装程序，然后下载文件，我想知道是否有任何完整的 sdk 下载可用，我可以下载和使用。

我打算使用我的办公室连接来下载这些文件，然后将其安装在我的家用 PC 上。

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-17T17:25:09.617

这很微妙，但请转到[Windows Phone SDK 8.0 下载页面](http://www.microsoft.com/en-us/download/details.aspx?id=35471)。在说明部分的末尾，您将看到：

> 注意：此版本也提供[.iso](http://go.microsoft.com/fwlink/?LinkID=257234&clcid=0x409)格式。选择以下选项之一来处理下载的 ISO 映像：
> 
> ```
>  • (Recommended) Write the image file to a blank DVD. 
>    • (Alternative) Mount the image file virtually as DVD devices. 
> ```

**更新：**
只是为了补充答案，我使用[Microsoft 下载管理器](http://www.microsoft.com/en-us/download/details.aspx?id=27960)下载了这个大小约为 1.6 GB 的 sdk。

Microsoft 下载管理器使您能够简单轻松地下载文件。它还可以快速可靠地下载应用程序和多媒体文件等大文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-25T03:04:49.297

[你可以在这里](http://go.microsoft.com/fwlink/?LinkID=257234&clcid=0x409)直接下载iso格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T11:19:12.830

[单击此处](http://go.microsoft.com/fwlink/?LinkID=257234&clcid=0x409)使用下载管理器下载。（注意，必须先安装下载管理器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T18:47:11.813

你好，你可以下载这个链接

[http://go.microsoft.com/fwlink/?LinkID=257234&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=257234&clcid=0x409)

# android - 在意图内发送的字符串不匹配？

> ID：14384548
> 
> 赞同：0
> 
> 时间：2013-01-17T17:18:58.637
> 
> 标签：android, android-intent, nfc

考虑一下这个场景：我制作了两个安卓应用程序，比如 A 和 B。B 扫描 NFC 标签，存储一个字符串“nfcservice”，然后我将该字符串存储在一个字节数组中，比如 TEMP_MSG 为十六进制。之后，我将该数组转换为字符串并将其发送到 App-A。在 App-A 中，我尝试匹配它，但每次都失败。问题是什么？你能提出一些建议吗？

应用程序-B 代码：

```
//nfcservice
byte[] TEMP_MSG = {(byte)0x6E, (byte)0x66, (byte)0x63, (byte)0x73, (byte)0x65,
                   (byte)0x72, (byte)0x76, (byte)0x69, (byte)0x63, (byte)0x65}; 

String nfcservicestring = new String(TEMP_MSG);
Intent intent = new Intent("com.android.apps.metromanager.MetroManagerActivity");
intent.putExtra("keyword", nfcservicestring);
startActivity(intent); 
```

应用程序-A 代码：

```
public class MetroManagerActivity extends Activity 
{
    TextView myText;
    String myString;    
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_metro_manager);
        Bundle bundle = getIntent().getExtras();
        if(bundle!=null) {
            myString = bundle.getString("keyword");
            Toast.makeText(getApplicationContext(), myString, Toast.LENGTH_LONG).show();
            if(myString.equals("nfcservice")) {
                LinearLayout lView = new LinearLayout(this);
                myText = new TextView(this);
                myText.setText("Welcome");
                lView.addView(myText);
                setContentView(lView);
            } else {
                LinearLayout lView = new LinearLayout(this);
                myText = new TextView(this);
                myText.setText("Bye Bye");
                lView.addView(myText);
                setContentView(lView);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:20:00.220

您的字节初始化有错误，在第 5 个字节处您有：

```
 , byte)0x65, 
```

代替：

```
 ,(byte)0x65, 
```

但是，为什么不尝试从 bundle 对象中获取一些其他属性，并通过调试和观察来检查它们呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:33:43.007

我不知道这是您输入的错误，但字节数组表达式是错误的：

```
byte[] TEMP_MSG = { (byte)0x,(byte)0x6E, ...}; 
```

第一个表达式 (byte)0x 有 bug，

从此，如果您无法在包中获取字符串，则代码中将包含 NPE：

```
if(myString.equals("nfcservice"))
{
...
} 
```

最好像这样检查相等性：

```
if ("nfcservice".equals(myString)) {

} 
```

# visual-studio - 如何从 Tcl 脚本访问第三方 DLL？

> ID：14384549
> 
> 赞同：3
> 
> 时间：2013-01-17T17:18:59.663
> 
> 标签：visual-studio, dll, tcl, swig

我正在尝试学习如何从 Tcl 脚本访问第三方 DLL。在很多地方有很多关于这个主题的信息，但是没有一个很好的，简洁的从头到尾描述如何做到这一点。我尝试了很多事情，但都失败了。我已经使用 SWIG 和 Visual Studio Express 2012 获得了最接近成功的结果（我都是新手……）

[我在How to create a DLL with SWIG from Visual Studio 2010](https://stackoverflow.com/questions/11693047/how-to-create-a-dll-with-swig-from-visual-studio-2010)中看到了对类似问题的先前回复，其中目标是从 C 代码*创建DLL。*我没有 DLL 的源代码，只有来自创建 DLL 的供应商的 .dll、.h 和 .lib 文件。

我认为，该帖子中的响应者的说明与我正在寻找的内容非常接近。他表示包装 DLL 的过程是相似的，并询问是否需要指令来完成此操作。希望他能回复这个帖子。。。

（免责声明：我也是这个论坛的新手，我无法找到直接跟进该帖子的方法。请原谅我的无知......）

谁能提供有关如何实现我的目标的详细说明？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T00:14:22.770

在我使用过的 Tcl 中有两种访问共享库的选项。

1.  编写一个已编译的“C”扩展。这可以手动编码或通过 SWIG 完成。扩展通常只是 Tcl 解释器和共享库中的函数之间的一段粘合代码。SWIG 不是我的强项，所以其他人必须在那里帮助你。如果您编写“C”扩展，Tcl 源代码中有一个示例扩展，Tcl wiki 中有相当多的帮助。
2.  使用通用共享对象调用者。我通常使用的是“ffidl”。一个简单的谷歌将指向它。要使用通用共享对象调用程序，您通常必须调用一些 Tcl 命令来定义被调用函数的接口，然后它处理加载库、查找入口点并实际调用函数并返回结果。

哪个最好取决于您的情况。如果库相对较小，我通常只是手动编写扩展代码。如果它很大并且我只想调用几个函数，那么我通常使用 ffidl 来完成繁重的工作。

# python - 级联 media_root 和 media_url

> ID：14384555
> 
> 赞同：0
> 
> 时间：2013-01-17T17:19:15.023
> 
> 标签：python, django, settings

我有一个 django 项目的问题。我们使用大磁盘存储图像多年。日常用户在此磁盘上上传大量图像。

现在磁盘有一些问题，我想从现在开始将所有上传的内容发送到新磁盘。那是容易的部分。问题是如果我更改设置，所有旧图像都将无法访问。从旧磁盘复制图像不是一个短期的选择，因为我们正在谈论数百 TB ......

我的计划是从现在开始将图像写入新磁盘，当应用程序尝试读取它时，它应该先在新磁盘上尝试，如果图像不存在，则回退到旧磁盘上。

关于如何正确级联设置的任何想法/建议？它甚至是一种选择吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:50:42.310

我基本上会在负责处理此问题的媒体服务器前面放置一个像 nginx 这样的轻量级服务器。

`try_files`您可以在 nginx 中探索使用，它可以接收媒体文件参数并在磁盘 1、磁盘 2 上检查它，然后进行故障转移。

参考

[http://wiki.nginx.org/HttpCoreModule#try_files](http://wiki.nginx.org/HttpCoreModule#try_files)

[django：通过 nginx 提供静态文件](https://stackoverflow.com/questions/2451739/django-serving-static-files-through-nginx)

# java - 遍历排序数组以删除重复项

> ID：14384559
> 
> 赞同：1
> 
> 时间：2013-01-17T17:19:28.430
> 
> 标签：java, arrays, iteration

让我首先说一个我遇到麻烦的家庭作业问题。

我已经对一个数组进行了排序，我需要做的是使用另一个数组通过迭代第一个数组并比较相邻项然后将非重复项添加到新数组来删除重复项。完成后，我将旧数组 = 设置为新数组。我不习惯 java，因此我遇到了一些我认为正确设置迭代的问题。

```
public static void main(String[] args) {
    args = new String[] { "data/list1.txt" };
    StdIn.fromFile("data/list2.txt");
    // StdOut.toFile ("finished.txt");
    int[] whitelist = In.readInts(args[0]);

    Arrays.sort(whitelist);
    int newArray[] = new int[whitelist.length];
    for (int i = 0; i < whitelist.length-1; i++) {
        int k = 0;
        if(whitelist[i+1] > whitelist[i])
            newArray[k] = whitelist[i];
            k++;
        StdOut.println(java.util.Arrays.toString(whitelist));
        whitelist = newArray;
        }
    for (int i=0; i<newArray.length;i++){
        StdOut.println(java.util.Arrays.toString(newArray));
    } 
```

这段代码是更大的二进制搜索的一部分，但这是我遇到问题的部分。

我的输出除了没有删除重复项外还打印了好几次。

任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:49:02.090

由于不使用集合等限制，您的代码可以通过这种方式重写，并且可以正常工作：

```
 Arrays.sort(whitelist);
    int newArray[] = new int[whitelist.length];
    newArray[0] = whitelist[0];
    int k = 1;
    for (int i = 0; i < whitelist.length - 1; i++) {
        if(whitelist[i+1] > whitelist[i]) {
            newArray[k] = whitelist[i + 1];
            k++;
        }
    }
    newArray = Arrays.copyOf(newArray, k);
    whitelist = newArray;
    System.out.println(Arrays.toString(newArray)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:25:16.510

仅适用于第一`if`条指令，k++ 在每次迭代中递增。你应该使用：

```
if (whitelist[i+1] > whitelist[i]) {
        newArray[k] = whitelist[i];
        k++;
} 
```

此外，在第一个循环中，即使在第一次操作之后，您也会覆盖`whilelist`with `newArray`，我认为您的意思是将其移出`for`：

```
StdOut.println(java.util.Arrays.toString(whitelist));
whitelist = newArray; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:47:10.773

它可以通过在纸上概述算法来帮助您开始任何工作，当您必须为面试编写代码时它会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T18:41:51.680

一般来说，您应该正确定义 equals() 和 hashCode()，以定义“重复”一词对您的对象意味着什么。但是由于您使用原语和包装器（通过装箱/拆箱），因此您不必在此处执行此操作。

然后你应该把你的数组放入一些 Set 集合中。所有重复项将被自动消除。之后将 Set 放回 Array。

Java 内置机制将以最优化的方式删除重复项。您不必手动执行此操作。

```
 Integer[] whitelistI = null;
    Set set = new HashSet(Arrays.asList(whitelist));
    whitelistI = (Integer []) set.toArray(new Integer[set.size()]); 
```

如果你需要一个原语数组，你可以从 whitelistI 复制它。

此外，这是错误的：

```
int newArray[] = new int[whitelist.length]; 
```

您的新数组将与原始数组的长度相同，但您说要删除重复项。如果您删除重复项，它的实际大小会变短，并且您的新数组将具有空值（在您的情况下 - 0（零））。

# java - 来自 Hibernate 的 SpringMVC 中视图的数据

> ID：14384561
> 
> 赞同：0
> 
> 时间：2013-01-17T17:19:30.490
> 
> 标签：java, mysql, hibernate, spring-mvc

我在从休眠中的查询中获取信息时遇到问题。在我的班级dao中，有这样的功能。

```
@SuppressWarnings("unchecked")
public List<String> getOcurrencesPerMonth(){
        List<String> dataOcurrences = (List<String>) getHibernateTemplate().execute (new HibernateCallback() {
            public Object doInHibernate(Session session) {
                Query query = session.createQuery("select concat(year(ror.created),'/',month(ror.created)), dt.name, count(distinct ror.id) from RawOccurrenceRecord ror, DataProvider dt" +
                        " where ror.dataProviderId = dt.id" +
                        " group by month(ror.created),ror.dataProviderId");
                return query.list();
            }
        });

    ArrayList<String> dataO = new ArrayList<String>();  

    Iterator<String> iterator = dataOcurrences.iterator();
    while (iterator.hasNext()) {
        dataO.add(iterator.next());
    }

    return dataO;
} 
```

我将列表传递给视图，并在 jsp 中使用 ac:forEach 来查看结果，但我只有 Ljava.lang.Object;@1659f66 这样的结果

我在 MySQL 中的查询是

```
SELECT CONCAT(YEAR(raw_occurrence_record.created),'/',MONTH(raw_occurrence_record.created)), data_provider.name, COUNT(DISTINCT raw_occurrence_record.id) FROM raw_occurrence_record, data_provider WHERE raw_occurrence_record.data_provider_id = data_provider.id GROUP BY month(raw_occurrence_record.created), raw_occurrence_record.data_provider_id; 
```

结果就像

```
2012/12 | POL | 15
2013/1  | JKL | 45
2013/1  | GTK | 30 
```

¿如何在我的视图中获取查询中每一列的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:53:12.980

那是因为您的查询不返回 a `List<String>`，而是返回 a `List<Object[]>`。 `[Ljava.lang.Object;@65690726`是您在数组上调用 toString() 时得到的结果，最终您的 JSP 在您尝试打印它时正在执行此操作。

你想要这样的东西（尽管从架构上讲，通常不会在一个名为 *-DAO 的类中这样做！）

```
for (Object[] result: dataOccurences) {
  data0.add(result[0].toString() + "|" + result[1].toString() + "|" + result[2].toString());
} 
```

# cuda - 纹理解绑的目的？

> ID：14384562
> 
> 赞同：3
> 
> 时间：2013-01-17T17:19:32.603
> 
> 标签：cuda, textures

解除绑定到线性内存或 CUDA 数组的 CUDA 纹理的目的是什么？

在我的许多 CUDA 程序中，我使用绑定到使用`cudaBindTexture2D`. 在函数结束时，我使用`cudaUnbindTexture`释放纹理。

有几次我忘了解绑纹理。但对函数的性能和结果没有明显影响。

真的有必要解绑纹理吗？如果我不解绑可能会有什么后果？会不会导致内存泄露？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T20:18:09.640

每个架构对可以同时绑定的纹理数量都有限制。`Maximum number of textures that can be bound to a kernel`该编号在 CUDA C 编程指南中列出。CC < 3 为 128，CC >= 3 为 256。如果您不取消绑定纹理，您的程序将无法处理超过该数量的纹理。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-03-25T11:33:38.093

在 Blender Cycles 中，达到限制将输出如下图像：

[http://www.xuanran001.com/public/repository/a69f/2083/c9be/4738/b36a/a138/49d5/3c54/preview/image.jpg](http://www.xuanran001.com/public/repository/a69f/2083/c9be/4738/b36a/a138/49d5/3c54/preview/image.jpg)

代码在这里 ( `intern/cycles/render/image.cpp`)

```
if(slot == images.size()) {
  /* max images limit reached */
  if(images.size() == tex_num_images) {
    printf("ImageManager::add_image: byte image limit reached %d, skipping '%s'\n",
           tex_num_images, filename.c_str());
    return -1;
  }

  images.resize(images.size() + 1);
} 
```

更多阅读：[http ://www.elysiun.com/forum/showthread.php?309902-Suggestion-for-workaround-for-cycles-texture-limit](http://www.elysiun.com/forum/showthread.php?309902-Suggestion-for-workaround-for-cycles-texture-limit)

# java - 当构造函数具有继承时，“构造函数不能应用于给定类型”

> ID：14384563
> 
> 赞同：9
> 
> 时间：2013-01-17T17:19:36.930
> 
> 标签：java, constructor

这是我的基类：

```
abstract public class CPU extends GameObject {
    protected float shiftX;
    protected float shiftY;

    public CPU(float x, float y) {
        super(x, y);
    } 
```

这是它的子类之一：

```
public class Beam extends CPU {
    public Beam(float x, float y, float shiftX, float shiftY, int beamMode) {
        try {
            image = ImageIO.read(new File("/home/tab/Pictures/Beam"+beamMode+".gif"));
        } catch (Exception e) {
            e.printStackTrace();
        }
        this.x = x;
        this.y = y;
        this.shiftX = shiftX;
        this.shiftY = shiftY;
    } 
```

新构造函数被突出显示，它说：

```
Constructor CPU in class CPU cannot be applied to given types:
required: float, float
found: no arguments 
```

如何解决？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-17T17:21:02.677

正如错误试图告诉您的那样，您需要将参数传递给基类的构造函数。

添加`super(x, y);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T17:24:46.233

最终对象需要使用其构造函数之一初始化超类。如果存在默认（无参数）构造函数，则编译器会隐式调用它，否则子类构造函数需要使用`super`其构造函数的第一行来调用它。

在你的情况下，那将是：

```
public Beam(float x, float y, float shiftX, float shiftY, int beamMode) { 
  super(x, y) 
```

并删除分配给`this.x`和`this.y`以后。

另外，避免制作它们`protected`，使其难以调试。而是添加`getters`and 如果绝对必要`setters`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T17:23:44.347

我怀疑你应该写

```
protected float shiftX;
protected float shiftY;

public CPU(float x, float y, float shiftX, float shiftY) {
    super(x, y);
    this.shiftX = shiftX;
    this.shiftY = shiftY
} 
```

和

```
public Beam(float x, float y, float shiftX, float shiftY, int beamMode) {
    super(x,y,shiftX,shiftY);
    try {
        image = ImageIO.read(new File("/home/tab/Pictures/Beam"+beamMode+".gif"));
    } catch (Exception e) {
        throw new AssertionError(e);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-08T12:23:19.360

如果你没有指定任何默认构造函数，那么在编译时它会给你这个错误“类中的构造函数不能应用于给定类型；” 注意：如果您创建了任何参数化构造函数。

# c - C - 使用 sscanf 忽略空格

> ID：14384565
> 
> 赞同：0
> 
> 时间：2013-01-17T17:19:49.443
> 
> 标签：c, parsing, strtok, scanf

我一直在试图解决这个问题，并且我有一种解决方法，但我只是想检查一下我没有遗漏一些明显的东西。基本上，我有一系列遵循某些规则的命令。任何包含数字、ASCII 字母或某些符号的内容都是标记，<、>、|、&&、; 等是分隔符。我需要能够分辨出我刚刚找到哪一个并将它们存储在一个数组中。

所以在一个while循环中我有

```
a = sscanf (cp, "%[0-9a-zA-Z!@:/-.,^+% ]", str); 
```

我已经将一个空格作为要查找的符号之一，因为我想不出任何其他方式。相反，在我得到这个词（加上可能的空格）之后，我打电话给

```
 delimiters[] = " ";
 token = strtok(str, delimiters); 
```

哪个应该删除空格，只留下一个标记（如果没有空格，它不会改变单词）。我只是好奇是否有办法用 sscanf 做类似的事情，因为我知道如果它们之间有空格，它已经分解了字符串，但是如果你再次调用它并且它看到空格，它只是不读取任何事物。

如果没有，那也很好。它只是困扰着我一整天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:29:57.067

您可以将格式更改为

```
a = sscanf (cp, " %[0-9a-zA-Z!@:/-.,^+%]", str); 
```

格式中的前导`' '`会跳过 [可能为空的] 空白字符序列，然后您将扫描一系列非空格可接受的标记字符。

# html - HTML - 试图将元素移动到页面底部

> ID：14384566
> 
> 赞同：0
> 
> 时间：2013-01-17T17:19:50.867
> 
> 标签：html

下面是一个屏幕截图以及来自 ASP MVC 网站的 HTML 副本。最后一个段落元素（在代码底部）与其他两个字段集水平对齐，但是我需要它位于页面底部。HTML/网页设计一直是我的致命弱点，所以如果有人能解释发生了什么以及可能的解决方案，我将不胜感激。

```
@model Monet.Models.FollowUpItems

@{
ViewBag.Title = "Edit";
Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Edit Follow Up Item</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">     </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<div>
<span style = "float:left;padding-right:4em">
<fieldset>
    <legend>Status Items</legend>

    <div class="error">
        @ViewBag.ErrorMessage
    </div>

    @Html.HiddenFor(model => model.Id)

    <div class="editor-label">
        @Html.LabelFor(model => model.Status)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Status)
        @Html.ValidationMessageFor(model => model.Status)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Notes)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Notes)
        @Html.ValidationMessageFor(model => model.Notes)
    </div>
    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
</span>
<span style="clear:both;"></span>
<span style="float:left;">
<fieldset>
    <legend>Basic Info</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.TableName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.TableName)
            @Html.ValidationMessageFor(model => model.TableName)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Message)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Message)
            @Html.ValidationMessageFor(model => model.Message)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.CreatedBy)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CreatedBy)
            @Html.ValidationMessageFor(model => model.CreatedBy)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.CreatedOn)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CreatedOn)
            @Html.ValidationMessageFor(model => model.CreatedOn)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.LastUpdateBy)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.LastUpdateBy)
            @Html.ValidationMessageFor(model => model.LastUpdateBy)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.LastUpdateOn)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.LastUpdateOn)
            @Html.ValidationMessageFor(model => model.LastUpdateOn)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Key1)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Key1)
            @Html.ValidationMessageFor(model => model.Key1)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Key2)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Key2)
            @Html.ValidationMessageFor(model => model.Key2)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.IssueType)
        </div>
        <div class="editor-label">
            @Html.EditorFor(model => model.IssueType)
            @Html.ValidationMessageFor(model => model.IssueType)
        </div>
</fieldset>
</span>

</div>
<span style="clear:both;"></span> 
 }
 <span style="clear:both;"></span>
 <p>
     @Html.ActionLink("Back to List", "Index")
 </p> 
```

![在此处输入图像描述](../Images/24ed0f6e783d8cc0ca04f4e229f218c9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:24:30.927

我无法从您的代码中判断清除跨度是否设置为显示：块，但我有预感它们应该是：

```
<span style="display:block;clear:both;"></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:21:48.283

### 跨度是一个`inline`元素

替换这个：

```
<span style = "float:left;padding-right:4em"> 
```

和：

```
<div style = "float:left;padding-right:4em; overflow: hidden;"> 
```

是的，请将所有`<span>`s 转换为`<div>`s 并检查。

# jquery - 具有最大宽度的'inline-block' div 在换行后比必要的宽

> ID：14384572
> 
> 赞同：2
> 
> 时间：2013-01-17T17:20:20.170
> 
> 标签：jquery, html, css

考虑这个 jsFiddle：http: [//jsfiddle.net/SnhDX/2/](http://jsfiddle.net/SnhDX/2/)

如您所见，红色`inline-block-1`div 占用的空间超出了文本适应所需的空间。**有什么办法可以去掉空的部分，让它看起来像绿色`inline-block-2`（不去掉`max-width`and without hard-coding `width`）？**允许使用 jQuery，但首选仅使用 CSS/HTML 的解决方案。

图片供参考。红色的是错的，绿色的是对的：

![在此处输入图像描述](../Images/cf85660d2fec5666ee129709fee06247.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:59:29.637

这有点棘手。

我能够让两个 div 匹配的最接近方法是在“Ipsum”之后插入一个`<br>`in 。`inline-1`罪魁祸首是“Ipsum”和“This”之间的空白。当文本以指定的 100 像素换行时，它会保留所有适合的内容 - 包括这两个单词之间的空格。唯一可以胜过硬空白的是设置显式宽度以使其换行或摆脱它。插入 a`<br>`而不是空格会消除该空格，尽管它们在我的浏览器中仍然有几个像素。

我讨厌成为那个人，但这似乎不必要地复杂 - 什么需要这个设置？`float`除非您正在使用s ，否则您无法更改显式宽度确实不规则。也许有一种方法可以简化这一点，让自己的生活更轻松？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:23:15.757

我遇到了垂直尺寸调整的问题。看看添加这个 CSS 是否有帮助：

```
overflow:hidden 
```

祝你好运！-布伦丹

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T17:35:29.563

如果您必须保留`max-width: 100px`，那么只需将宽度设置为等于“正确”容器的宽度，那么它们的大小将相同。

[jsFiddle](http://jsfiddle.net/SnhDX/5/)

# css - Internet Explorer背景大小问题

> ID：14384574
> 
> 赞同：0
> 
> 时间：2013-01-17T17:20:30.413
> 
> 标签：css

我定义的背景如下：

```
body{
    background-image:url('taksi.jpg');
    background-size:100%; 
    background-attachment:fixed;
} 
```

为什么这些不同？（IE，Chrome）从某种意义上说是什么问题？

普通护理 ![普通护理](../Images/3e3773122cf6632c0a6a7723fc406c8f.png)

和即:( ![在此处输入图像描述](../Images/46a43d1e35eb5088eb698252c1878a06.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:23:31.683

根据[这篇文章](https://stackoverflow.com/questions/2991623/make-background-size-work-in-ie)，背景大小是 IE 的一个问题。

对此接受的解决方法是：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/logo.gif',
sizingMethod='scale');

-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/logo.gif',
sizingMethod='scale')"; 
```

[在此处](https://stackoverflow.com/a/6353808/84873)阅读有关此答案的更多信息。

# c - ELF 文件中的多个程序头

> ID：14384577
> 
> 赞同：0
> 
> 时间：2013-01-17T17:20:42.363
> 
> 标签：c, io, elf, fread, disassembly

我正在尝试使用 C 将 ELF 文件的内容读入内存。我目前可以读取具有 1 个程序头的文件，但问题不止于此。

```
/* Find and read program headers */
  ELFPROGHDR *prgHdr;

  fseek(fp, elfhead.phdrpos, SEEK_SET);
  prgHdr = (ELFPROGHDR*)malloc(sizeof(ELFPROGHDR)*elfhead.phdrcnt);
  if(!prgHdr)
    {
      fprintf(fp, "Out of Memory\n");
      fclose(fp);
      return 3;
      }

  fread(prgHdr, 1, sizeof(ELFPROGHDR)*elfhead.phdrcnt, fp);
  printf("Segment-Offset: %x\n", prgHdr->offset);
  printf("File-size: %d\n", prgHdr->filesize);
  printf("Align: %d\n", prgHdr->align);

/* allocate memory and read in ARM instructions */

  for(i = 0; i < elfhead.phdrcnt; i++)
    {
      armInstructions = (unsigned int *)malloc(prgHdr->filesize + 3 & ~3);
      if(armInstructions == NULL)
    {
      fclose(fp);
      free(prgHdr);
      fprintf(stderr, "Out of Memory\n");
      return 3;
    }
      fseek(fp, prgHdr->offset, SEEK_SET);
      fread(armInstructions, 1, prgHdr->filesize, fp);

/* Disassemble */
      printf("\nInstructions\n\n");

      Disassemble(armInstructions, (prgHdr->filesize + 3 & ~3) /4, prgHdr->virtaddr);
      printf("\n"); 
      free(armInstructions);
    }
  free(prgHdr); 
```

我认为我遇到的问题是

```
fseek(fp, elfhead.phdrpos, SEEK_SET); 
```

因为我每次都在寻找第一个程序头的开始。如何更改此设置，以便每次我寻找第一个标题的开头，然后是第二个标题等。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:10:22.567

你的代码很糟糕:-(

您执行以下操作：

```
for i in phdrcnt
  fseek(phdrpos);
  prgHdr[i] = malloc space for *all* phdrs
  fread() *all* phdrs into the allocated space
  use first phdr to disassemble
  free allocated space 
```

换句话说，你分配 N 次，fread N 次，反汇编 N 次相同的第一个 phdr，释放 N 次。

你想要什么：

```
fseek(phdrpos)
prgHdr = malloc space for all phdrs
fread all phdrs into space allocated
for i in phdrcnt
  disassemble(pgrHdr[i])
free(pgrHdr) 
```

# ftp - 有没有办法在 Sublime Text 2 中拥有 Firebug 的功能

> ID：14384580
> 
> 赞同：0
> 
> 时间：2013-01-17T17:20:51.823
> 
> 标签：ftp, firebug, sublimetext2

换句话说，有没有办法将 Sublime Text 2 连接到 ftp 服务器，这样我就可以直接从编辑器在网站上工作，而无需使用单独的 FTP 客户端？另外，有没有办法在不更新网页的情况下查看更改？

# android - 简单的 Android JUnit 测试期间的 Robotium 崩溃

> ID：14384586
> 
> 赞同：0
> 
> 时间：2013-01-17T17:21:26.037
> 
> 标签：android, testing, junit, robotium

我无法运行一个简单的 Robotium 测试：

```
public class TapsTest extends ActivityUnitTestCase<Ad>  {
public TapsTest() { super(Ad.class); }

Solo mSolo;

@Override
protected void setUp() throws Exception {
    super.setUp();
    mSolo = new Solo(getInstrumentation(), getActivity());      
}

public void testTabTaps() {
    assertTrue(mSolo.searchText("Latest")); // NPE thrown here
   }
} 
```

该测试始终崩溃

```
java.lang.RuntimeException: java.lang.NullPointerException
at com.jayway.android.robotium.solo.Searcher.searchFor(Searcher.java:113)
at com.jayway.android.robotium.solo.Searcher.searchWithTimeoutFor(Searcher.java:68)
at com.jayway.android.robotium.solo.Solo.searchText(Solo.java:442) 
```

在我的两台设备（Android 4.1.0 和 4.0.3）和 ADV 上。最初 Robotium 抱怨缺少 V4 支持库（我们不需要它用于其他目的）所以我添加了 android-support-v13.jar。现在类未找到异常消失了，但 NPE 仍然存在。我还尝试手动启动活动：

```
 Ad ado = startActivity(new Intent("android.intent.action.MAIN"), null, null);
    mSolo = new Solo(getInstrumentation(), ado); 
```

但 NPE 仍然存在。我试过`mSolo.searchButton("Go")`了，在 UI 上有一个带有此文本的按钮，它是可见的，并且仍然是 Robotium 中第 113 行的相同 NPE。

如果未经过测试，应用程序本身会启动并正确运行。此外，其他 ActivityUnitTestCase 测试（没有 Robotium）运行并通过没有问题。

我尝试使用 Robotium[网站上](http://code.google.com/p/robotium/)的 robots-solo-3.6.jar 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:27:37.760

有什么理由，你使用ActivityUnitTestCase？您应该使用 ActivityInstrumentationTestCase2。然后你必须改变你的构造函数 - 添加包作为参数。看这里：[http ://code.google.com/p/robotium/wiki/Getting_Started](http://code.google.com/p/robotium/wiki/Getting_Started)

# android - 如何获取 Google Maps API v2 发布密钥

> ID：14384587
> 
> 赞同：15
> 
> 时间：2013-01-17T17:21:29.493
> 
> 标签：android, google-maps

我使用 google mapview 的应用程序已准备好发布。我的测试是使用我在开始项目时获得的谷歌地图密钥完成的。我被告知此密钥不适用于我的发布版本，我需要另一个密钥用于我的发布版本。

这个论坛和我能找到的所有其他地方的所有帖子都讨论了获取版本 1 密钥。例如，有关于如何获取版本 1 密钥的 MD5 指纹（无论是什么）的文档。

如何获得第 2 版所需的密钥？

编辑：为了让这个问题更清楚一点，我已经有了我的 64 位应用程序密钥、一个密钥库文件、一个别名和一个密码。看起来我需要一个可以使用 keytool 程序以某种方式获得的 SHA-1 指纹。我不需要 keytool 程序来获得我所拥有的东西，因为我使用了 Eclipse 导出向导。谢谢，加里

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T17:56:36.327

[谷歌在这里](https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key)记录了整个过程。

具体来说，如果您需要帮助了解如何使用`keytool`，请展开标题为“显示发布证书指纹”的部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-21T13:45:13.770

**获取 SHA-1 密钥：**

对于 Linux 或 OS X，打开终端窗口并输入以下内容：

`keytool -list -v -keystore ~/.android/debug.keystore -aliasandroiddebugkey -storepass android -keypass android`

对于 Windows Vista 和 Windows 7，运行：

`keytool -list -v -keystore "%USERPROFILE%\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android`

您应该会看到与此类似的输出：

```
Alias name: androiddebugkey
Creation date: Jan 01, 2013
Entry type: PrivateKeyEntry
Certificate chain length: 1
Certificate[1]:
Owner: CN=Android Debug, O=Android, C=US
Issuer: CN=Android Debug, O=Android, C=US
Serial number: 4aa9b300
Valid from: Mon Jan 01 08:04:04 UTC 2013 until: Mon Jan 01 18:04:04 PST 2033
Certificate fingerprints:
     MD5:  AE:9F:95:D0:A6:86:89:BC:A8:70:BA:34:FF:6A:AC:F9
     SHA1: BB:0D:AC:74:D3:21:E1:43:07:71:9B:62:90:AF:A1:66:6E:44:5D:75
     Signature algorithm name: SHA1withRSA
     Version: 3 
```

以 SHA1 开头的行包含证书的 SHA-1 指纹。指纹是由冒号分隔的 20 个两位十六进制数字的序列。

# dojo - 从哪里加载 Dojo 的最佳实践

> ID：14384588
> 
> 赞同：1
> 
> 时间：2013-01-17T17:21:31.507
> 
> 标签：dojo

我不是 Dojo 开发人员，根本不需要使用它。但我要做的是使用 jQuery 与 Dojo 小部件集成。我已经想出了如何做到这一点（[另一篇文章](https://stackoverflow.com/questions/14284745/load-and-use-dojo-widget-from-jquery)），但为此我已经下载了我身边的 Dojo 工具包并从那里加载它。Toolkit 很重并且包含很多文件，所以我在想如果我真的需要它来完成这么简单的任务，是否真的有必要在我身边托管 Dojo 或者最好将它包含到页面的源代码中并从一些加载它其他地方？我正在考虑从这里加载它：http: [//download.dojotoolkit.org/release-1.8.3/dojo-release-1.8.3/dojo/dojo.js](http://download.dojotoolkit.org/release-1.8.3/dojo-release-1.8.3/dojo/dojo.js)或从这里[http://ajax.googleapis。 com/ajax/libs/dojo/1.8.3/dojo/dojo.js](http://ajax.googleapis.com/ajax/libs/dojo/1.8.3/dojo/dojo.js)但只是不确定这是一个好主意吗？这里的最佳做法是什么？

道场专家，你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:03:55.383

就个人而言，我尽量避免使用 CDN，因为我：

*   通常为企业客户编写“内部”应用程序，我更喜欢从他们的内部服务器加载所有内容，而不是通过网络获取依赖项——这可能会引起他们感知或真正的安全问题
*   更喜欢创建我自己的构建，其中包括我的“小部件”
*   希望有一个可以与Phonegap打包并在没有网络访问的情况下运行的独立构建

该库有一个很小的“纳米”版本，可为您提供 AMD 加载程序： http: [//dojotoolkit.org/features](http://dojotoolkit.org/features)。您可以使用它来加载您的 jQuery 模块并仅添加您需要的 Dojo 模块。

我发现这篇文章很有帮助，因为它专门解决了创建紧凑构建的问题：[http](http://www.sitepen.com/blog/2012/06/11/dgrid-and-dojo-nano-build/) ://www.sitepen.com/blog/2012/06/11/dgrid-and-dojo-nano-build/ 。在这里，他们加载了 dGrid，这只是另一个模块。但是您可以将这个概念应用到加载 jQuery 模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T21:13:02.850

我使用 CDN 和用于开发的工具包的本地副本开始了我的 Dojo 开发。

Dojo 使用 AMD 模块加载器，类似于 ac "include" 或 c# "using"。这意味着只有您需要的功能才会加载到应用程序/页面中。

随着我对 dojo 的了解越来越多，我学会了使用构建系统，该系统将 Dojo 模块（js 文件）预取到单个压缩文件中，以便您与应用程序一起分发。但是，这是从您的服务器而不是公共 CDN 提供的。

综上，我的感受是：CDN 用于快速开发，Build System 用于性能

AMD [https://dojotoolkit.org/blog/learn-more-about-amd](https://dojotoolkit.org/blog/learn-more-about-amd)

构建[http://dojotoolkit.org/reference-guide/1.8/build/](http://dojotoolkit.org/reference-guide/1.8/build/)

dojotoolkit.org/blog/introducing-the-new-dojo-web-builder 上的 Web Builder（仅限 2 个链接）

# javascript - Jquery，如何知道输入何时有：invalid 选择器？

> ID：14384593
> 
> 赞同：15
> 
> 时间：2013-01-17T17:22:07.830
> 
> 标签：javascript, jquery, validation

我有这个代码：

HTML

```
<input type="text" data-value="1" data-type="input-records" placeholder="Value" pattern="\d{1,4}$" /> 
```

CSS

```
input[type=text]:invalid { background-color: red; } 
```

Javascript

```
$("[data-type=input-records]").die().live("keypress", function (e) {
    if (!($(this).val().length + 1) < 5) {
        e.preventDefault();
        return;
    }

    // More code below...
}); 
```

我想做这样的验证：

```
if (!$(this).hasSelector(":invalid")) {
    showMessage("Invalid value");
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-17T17:24:25.593

使用该[`is`](http://api.jquery.com/is/)函数测试`:invalid`伪类：

```
if ($(this).is(":invalid")) {
    showMessage("Invalid value");
} 
```

**示例：http:** [//jsbin.com/ikuwur/2/edit](http://jsbin.com/ikuwur/2/edit)

# android - 如何访问 onClick 事件处理程序中的 AttributeSet 以在 getStyledAttributes 中使用？

> ID：14384596
> 
> 赞同：1
> 
> 时间：2013-01-17T17:22:18.260
> 
> 标签：android, android-view, android-button

我在 attrs.xml 名称 custom_values 中设置了自定义属性，其中之一名为 stageNumber。我有一个定义了这个自定义值的按钮，例如 custom:stageNumber="2" 和一个名为 goToStage 的 onClick 处理程序。在 goToStage 方法中，我需要获取 stageNumber 的值。我无法获取方法 gainStyledAttributes 所需的 AttributeSet。

```
public void goToStage(View view) {
    AttributeSet attrs = ???;
    TypedArray ta = view.getContext().obtainStyledAttributes(attrs, R.attr.custom_values);
    int stageNumber = ta.getInt(R.styleable.custom_values_stageNumber, 0);
    // do something with stageNumber
} 
```

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:42:35.060

您只能在膨胀过程中从视图的构造函数或从使用自定义属性膨胀视图的 layoutInflator 访问视图的属性。以后无法访问视图的属性。

# c - 字符常量的 C 编码

> ID：14384601
> 
> 赞同：7
> 
> 时间：2013-01-17T17:22:26.957
> 
> 标签：c, encoding, binary, character

我的程序员的直觉会说 c 中的字符常量（例如：'x'）是使用编译它的机器上的机器字符集编码的。但是，以下摘录来自“The C Programming Language: ANSI C Edition”

“字符常量是用单引号括起来的一个或多个字符的序列，如'x'。只有一个字符的字符常量的值是执行时机器字符集中字符的数值。”

强调最后三个字。

谁能解释为什么他们会说“在执行时”。字符值肯定是在编译后的二进制文件（或 ELF、A.OUT...）中编码的吗？

我想知道，但无法对此提出任何合乎逻辑的解释，K&R 肯定知道他们在做什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:28:32.420

You will have to tell the compiler what system you are going to run the program on. It will then choose the proper encoding for the characters.

Of course, default is to run on a system similar to the one running the compiler. In that case the compile time and runtime character sets will be identical.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:06:41.860

您的问题似乎在于您将机器的字符集与使用的字符编码混淆。

阅读此[http://www.microsoft.com/typography/unicode/cs.htm](http://www.microsoft.com/typography/unicode/cs.htm)以了解字符集的实际含义。KnR（第 2 版）当时的问题是计算机太多，有些是为当地政府和公众制造的。这导致两台计算机之间出现不同的字符集，因此，美国机器上的“A”是俄罗斯机器上的西里尔字符（比如 Foo）。

因此不能信任字符常量。感谢现在的现代电脑厂商，机器中的大部分字符集都是一样的，信息交换更简单了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T17:35:09.220

C 区分源字符集和执行字符集，因为您的编译器可能是交叉编译器，例如在移动平台的 PC 上。那么计算机上的字符集和目标机器上的字符集一定不能一致。最简单的例子是 EOL 编码，它在当今市场上不同的常见平台之间是不同的。执行字符集还可能取决于“区域设置”和其他由运行程序的用户动态设置的旋钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T20:08:06.643

在 C 语言术语中，数据针对特定的语言环境进行编码，并且语言环境声明字符集。程序有一个执行字符集。编译到程序中的文本（字符串和字符常量）将在该执行字符集中表示。程序本身可以将它从任何语言环境的字符集读取的文本转换为它自己的执行字符集，并根据任何语言环境的字符集来格式化它生成的文本。

“执行时机器的字符集”措辞不好，它暗示不存在或不真实的事物。

# javascript - 确定图像 src 是否已更改

> ID：14384605
> 
> 赞同：1
> 
> 时间：2013-01-17T17:22:30.497
> 
> 标签：javascript, jquery, image, src

我有一个显示用户头像的 img 标签。当他按下一个按钮来编辑图像并选择一个新的图像时，页面上的 img src 将更改为新的图像 src。

我如何知道 src 何时更改？

这是用户按下以更改图像的按钮的代码。

```
<div style="width: 80px; height: 80px; line-height: 80px;" class="fileupload-preview fileupload-exists thumbnail"></div>
                                                    <span class="btn btn-file"><span class="fileupload-new">Select image</span> 
```

如您所见，它不是按钮标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:26:50.947

```
$(".fileupload-new").click(function() {
  alert("check value of img src");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:55:18.933

您可以尝试检查图像是否已加载：

```
$("img").bind("load", function(){
    alert("image has been loaded");
}); 
```

# javascript - 用另一个数组更新一个数组（删除和添加值）

> ID：14384606
> 
> 赞同：1
> 
> 时间：2013-01-17T17:22:31.863
> 
> 标签：javascript, arrays, merge, sorting

在 javascript 中，我有两个数组，它们在聊天室中有在线用户列表。第一个具有旧值的数组必须用新值更新。

```
var array1 = array(1,5,50,4,12,3,60);

var array2 = array(12,1,5,4,3,60); 
```

array1 在用户界面上，所以我不想用 array2 替换它。首先，我想从array1 中删除不在array2 中的值，然后在array1 的开头从array2 添加新值。

我还应该提到，数组 2 的排序很重要，并且数组的数量可能不同。数组计数可以是 100，并且可以每 5-10 秒更新一次！

例如，您可以查看 Stackoverflow 聊天服务上的在线用户列表[https://chat.stackoverflow.com/rooms/17/javascript](https://chat.stackoverflow.com/rooms/17/javascript)

这是我可能开发它的第一种方式，我可以做得更好吗？

用于删除旧值

```
for(i=0;i<array1.length;i++)
    if(array2.indexOf(array1[i])==-1)
        removeValue(array1[i]); 
```

用于添加新值

```
for(i=0;i<array2.length;i++)
    if(array1.indexOf(array2[i])==-1)
        addValue(array2[i]); 
```

您对更新第一个数组有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:25:55.153

不确定我理解正确，但这是你需要的吗？您想通过尽可能固定旧元素位置并在左侧插入新元素来更新和排列？

在这里试一试：http: [//jsfiddle.net/Rt5Mx/](http://jsfiddle.net/Rt5Mx/)

```
... 
```

如果您需要在右侧添加新元素，只需更改为

```
 return array3.concat(array2); 
```

如果您需要反向排序，可以使用 array2.reverse() （但您最好考虑在生成 array2 时/在何处更改其方向）。

**更新**

保持旧 array2 不变的版本：左右合并：

[http://jsfiddle.net/Rt5Mx/2/](http://jsfiddle.net/Rt5Mx/2/)

```
 var array1 = [1,5,50,4,12,3,60];
  var array2 = [12,1,5,4,43,3,60];

  alert(mySpecialMergeLeft(array1,array2));
  // 43,1,5,4,12,3,60
  // same as old array1 with added 43 at left and removed 50

  alert(mySpecialMergeRight(array1,array2));
  // 1,5,4,12,3,60,43
  // same as old array1 with added 43 at right and removed 50

  function mySpecialMergeLeft(array1,array2) {
      var pos;
      var array3=[];
      var array4=array2.slice();
      for(var i=0;i<array1.length;i++) {
          pos=array4.indexOf(array1[i]);
        if(pos!=-1) {
          array3.push(array1[i]);
          array4.splice(pos,1);
        }
      }
      return array4.concat(array3);
  }

  function mySpecialMergeRight(array1,array2) {
      var pos;
      var array3=[];
      var array4=array2.slice();
      for(var i=0;i<array1.length;i++) {
          pos=array4.indexOf(array1[i]);
        if(pos!=-1) {
          array3.push(array1[i]);
          array4.splice(pos,1);
        }
      }
      return array3.concat(array4);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:41:46.903

您的两个函数都存在语法错误。而不是`array2.indexOf(array1[i]==-1)`应该是`array2.indexOf(array1[i])==-1`.

要更新您的数组，您可以使用数组的[`unshift`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift)（前置）和[`splice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)方法。但是，当您从数组中删除一个项目时，它的长度会发生变化，这会影响您的循环条件 - 更好地向后迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-31T11:07:35.253

这是我的解决方案。

首先，我一直在使用[`difference`](https://lodash.com/docs/4.17.15#difference)api of`lodash`来节省时间。

**例如：** 我有一个包含值 1、2、3 的旧数组和一个包含 2、4 的新数组。所以我需要**删除**1、3**并将**4 添加到旧数组中。

```
const _ = require('lodash');    

const oldArr = [1, 2, 3];
const newArr = [2, 4];

const willRemove = _.difference(oldArr, newArr);
const willAdd = _.difference(newArr, oldArr);

console.log('Remove', willRemove); // [1, 3]
console.log('Add', willAdd); // [4] 
```

下一步是你的。

# sqlite - 更新/插入/删除数据库中的子记录

> ID：14384607
> 
> 赞同：-1
> 
> 时间：2013-01-17T17:22:33.000
> 
> 标签：sqlite, one-to-many, updates

考虑一个保存在数据库中的两个表中的经典销售订单：

```
SALE_ORDER                   SALE_ORDER_ITEM
----------                   ---------------
id       integer             ...
...                           order_id        integer references sale_order (id)
                              item_id         integer references item (id)
                              quantity        integer
                              ... 
```

出于这个问题的目的，请忽略 item_id 对另一个表的引用——这无关紧要。

我有一个包含订单的课程，例如：

```
public class SaleOrder {
    private int orderId;
    ...
    private List<BoughtItem> items;
    ....
} 
```

订单可以更改（我的要求），更改可以包括列表中的项目：添加、删除的项目或更改的数量。当我在数据库中更新这个顺序时，最简单的事情就是`delete from sale_order_item where order_id=<my_order_id>`在列表中插入行。然而，这对我来说似乎效率很低，特别是考虑到该列表可以包含（可能）数百个不同的项目。（背景：这些是从超市到批发产品供应商的订单。）

另一种方法是查询数据库，然后将列表与游标进行比较，在必要时添加、删除或更新——这至少看起来同样低效。

1.  还有另一种（第三种？）更有效的方法吗？
2.  如果不是，这两者中哪一个更好？我总是使用第一个（全部删除，然后重新插入，但现在开始怀疑自己。

**更新：**数据库是 sqlite3（如果重要的话，在 android 上）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:40:29.303

如果您还没有，您需要在 sale_order_item 上进行 PK。

保留一个可以在更新数据库时重放的脏缓冲区。因此，如果用户更改了一个项目，请添加一个条目'update sale_order_item set item_id = "1234" where sale_order_item.id = "2222"'。

然后在与数据库通信时，回放这些更改。如何记录更改并不重要（记录 SQL 不是最有效的）。关键是能够识别每个项目的变化，或者项目的添加/删除，然后能够基于它创建 sql。

我希望它能给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:42:36.003

这实际上取决于您是要更新项目还是只是重新插入它们。如果您不需要进行任何更新，如果您将现有项目添加到子句中，删除 + 插入就可以了（因此您不会删除新列表中的内容）

如果新列表总是黄金，那么使用游标没有意义，因为您已经有了数据，所以只需坚持删除/重新插入 - 它不像游标那样低效。

例如 t-sql

```
insert into sale_order_item(columns..)
select field1, 2, etc. from your_new_list a 
where not exists (select 1 from sale_order_item where item_id = a.item_id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:50:38.833

如果您没有原始项目 ID 列表，则必须至少删除所有不再在列表中的项目：

```
DELETE FROM sale_order_item
WHERE order_id = ?
  AND item_id NOT IN (id1, id2, ...) 
```

如果您不知道记录是否已更改，则无法避免更新记录。

但是，可以避免插入已存在的记录：如果 (order_id, item_id) 列上有正确的主键，则可以使用[`INSERT OR REPLACE`command](http://www.sqlite.org/lang_insert.html)。

然而，这一切并不比简单`DELETE`和`INSERT`s 更有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-16T12:11:25.727

1.  添加字段recordState：枚举{rfNone，rfInserted，rfUpdated，rdDeleted}。
2.  将适当的代码添加到您的所有 setter 方法中，例如

    ```
    public void setData(String value) {
        if (!this.data.equals(value)) {
            this.data = value;
            if (getRecordState() == rfNone)
                setRecordState(rfUpdated);
        }    
    } 
    ```

    如果记录类的任何值已更改，此代码将确保您将记录对象标记为已更新，当然如果此对象不是新构造的

3.  从数据库读取的所有记录必须是初始的：recordState = rfNone

4.  必须标记新添加的记录：recordState = rfInserted at creation
5.  已删除的记录必须标记：recordState = rfDeleted（不要立即删除）
6.  最后遍历记录对象列表并根据记录状态值进行适当的操作

# android - 如果使用右边距，Android 行的最后一个单词可能会导致不正确的 textview 尺寸

> ID：14384608
> 
> 赞同：4
> 
> 时间：2013-01-17T17:22:33.463
> 
> 标签：android, layout, fonts, textview, bold

在文本视图中使用粗体文本时，我有一个奇怪的行为。

所以问题如下，我创建了一个包含文本的自定义项目，并且应该稍后在列表中用作项目，因此该项目多次包含在具有垂直方向的滚动视图线性布局中。

项目布局如下

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    style="@style/ButtonItem">
    <TextView
        android:id="@+id/m_oItem_TextView_TopLeft"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="20dp"
        android:layout_alignParentTop="true"
        android:layout_marginTop="10dp"
        android:textColor="@color/black"
        android:textSize="@dimen/font_size_12" />
    <TextView
        android:id="@+id/m_oItem_TextView_TopMiddle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/m_oItem_TextView_TopLeft"
        android:layout_toRightOf="@+id/m_oItem_TextView_TopLeft"
        android:layout_toLeftOf="@+id/m_oItem_TextView_TopRight"
        android:layout_marginRight="20dp"
        android:textColor="@color/black"
        android:textSize="@dimen/font_size_12"
        android:gravity="right"/>
    <TextView
        android:id="@+id/m_oItem_TextView_TopRight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="40dp"
        android:layout_alignTop="@+id/m_oItem_TextView_TopLeft"
        android:textColor="@color/black"
        android:textSize="@dimen/font_size_12"/>
    <TextView
        android:id="@+id/m_oItem_TextView_Bottom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/m_oItem_TextView_TopLeft"
        android:layout_alignRight="@+id/m_oItem_TextView_TopRight"
        android:layout_below="@+id/m_oItem_TextView_TopLeft"
        android:layout_marginTop="5dp"
        android:textColor="@color/black"
        android:textSize="@dimen/font_size_14" />
    <ImageView 
        android:id="@+id/m_oItem_PlaceHolder"
        android:layout_width="wrap_content"
        android:layout_height="10dp"
        android:layout_alignLeft="@+id/m_oItem_TextView_TopLeft"
        android:layout_alignRight="@+id/m_oItem_TextView_TopRight"
        android:layout_below="@+id/m_oItem_TextView_Bottom"
        android:contentDescription="@string/image_description"/>
    <ImageView
        android:id="@+id/m_oPart_Arrow_Image"
        android:scaleType="fitCenter"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_centerVertical="true"
        android:layout_alignParentRight="true" 
        android:layout_marginRight="5dp"
        android:src="@drawable/arrow_right"
        android:contentDescription="@string/image_description"/>
</RelativeLayout> 
```

**m_oItem_TextView_Bottom**文本视图是包含可能对它来说太长的文本的部分，因此如果需要，可以增加文本视图的高度。当我对此进行测试时，一切正常，并且 textview 具有所需的高度。

但是一旦我设置

```
android:textStyle="bold" 
```

文本当然会变得更宽，因此可能需要更多行。现在的问题是，这不会被 android 以某种方式计算。

例如，如果非粗体线几乎不需要两行，例如（下图中的最后一项）

![最后一项有两行](../Images/6393deed0074d4ea3db3bef6d9019a79.png)

粗体文本需要三行，但 textview 仍然只提供两行

![最后一项三行](../Images/7ccd7a08f838b8f16ca257c04c8c3267.png)

有没有人遇到过同样的问题或有解决方案或至少建议我如何解决这个问题。无论如何提前谢谢

编辑：按要求，ButtonItem 样式是这样的

```
<style name="ButtonItem">
    <item name="android:background">@drawable/button_item</item>
</style> 
```

@drawable/button_item 是：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"  android:drawable="@drawable/button_item_down" />
    <item android:state_selected="true"  android:drawable="@drawable/button_item_selected" />
    <item android:drawable="@drawable/button_item_normal" />
</selector> 
```

@drawable/button_item_down 是：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:bottom="1dp"
        android:left="-2dp"
        android:right="-2dp"
        android:top="-2dp">
        <shape android:shape="rectangle">
            <solid android:color="@color/white" />
            <stroke
                android:width="@dimen/button_item_stroke_thickness"
                android:color="@color/black"/>
        </shape>
    </item>
</layer-list> 
```

@drawable/button_item_selected 是：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:bottom="1dp"
        android:left="-2dp"
        android:right="-2dp"
        android:top="-2dp">
        <shape android:shape="rectangle">
            <solid android:color="@color/white" />
            <stroke
                android:width="@dimen/button_item_stroke_thickness"
                android:color="@color/black"/>
        </shape>
    </item>
</layer-list> 
```

@drawable/button_item_normal 是：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:bottom="1dp"
        android:left="-2dp"
        android:right="-2dp"
        android:top="-2dp">
        <shape android:shape="rectangle" >
            <solid android:color="@color/transparent" />
            <stroke
                android:width="@dimen/button_item_stroke_thickness"
                android:color="@color/black" />
        </shape>
    </item>
</layer-list> 
```

本质上，它们只是在那里创建项目下方的黑线，并在单击或选择它时使背景变为白色。尽管从未使用 selected on ，因为无论如何都不会在代码中设置选定状态。

我也尝试过没有样式作为背景，但不出所料，问题仍然存在。

再次编辑：好的，所以我能够更多地追踪问题，textview 的大小调整实际上是正确的。具体问题是是否遵循。如果一行的最后一个词（例如“这是一个测试”，而 test 是最后一个词）导致换行，那么最后一个词需要以某种方式足够长。我使用虚拟字符串对此进行了测试，问题中使用了相同的项目。

这里有一些照片 ![在此处输入图像描述](../Images/1445f880e3138e79721c2fb3b13aef75.png)

正如您所看到的，导致问题的行需要多一个字符，然后这个词就足够长以适应。

最后编辑：好的找到答案（见下文）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:35:13.470

好吧，TextView 正在用粗体文本调整大小，因此它的 RelativeLayout 需要扩展以适应扩展的 TextView。使用 LinearLayouts 可能会更幸运（一个垂直布局，也许另一个水平布局来匹配您使用 RelativeLayout 创建的设计），因为它们擅长在孩子发生变化时调整自己的大小。

参考： http: [//logc.at/2011/10/18/when-to-use-linearlayout-vs-relativelayout/](http://logc.at/2011/10/18/when-to-use-linearlayout-vs-relativelayout/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:06:33.880

FINALLY I TRACKED DOWN THE ISSUE,

So here is the solution, the problem was the margin_Right of the m_oItem_TextViewBottom which was caused by:

```
android:layout_alignRight="@+id/m_oItem_TextView_TopRight" 
```

thus it effectivly created a margin right which was the troublemaker, I tested this with other textviews and right margins and they all had the same issue.

I replaced it with a Padding of the same margin and ended up with this as my final solution for the item.

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    style="@style/ButtonItem">
    <TextView
        android:id="@+id/m_oItem_TextView_TopLeft"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="20dp"
        android:layout_alignParentTop="true"
        android:layout_marginTop="10dp"
        android:textColor="@color/black"
        android:textSize="@dimen/font_size_12" />
    <TextView
        android:id="@+id/m_oItem_TextView_TopMiddle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/m_oItem_TextView_TopLeft"
        android:layout_toRightOf="@+id/m_oItem_TextView_TopLeft"
        android:layout_toLeftOf="@+id/m_oItem_TextView_TopRight"
        android:layout_marginRight="20dp"
        android:textColor="@color/black"
        android:textSize="@dimen/font_size_12"
        android:gravity="right"/>
    <TextView
        android:id="@+id/m_oItem_TextView_TopRight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:paddingRight="40dp"
        android:layout_alignTop="@+id/m_oItem_TextView_TopLeft"
        android:textColor="@color/black"
        android:textSize="@dimen/font_size_12"/>
    <TextView
        android:id="@+id/m_oItem_TextView_Bottom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/m_oItem_TextView_TopLeft"
        android:layout_below="@+id/m_oItem_TextView_TopLeft"
        android:layout_marginTop="5dp"
        android:paddingRight="40dp"
        android:textColor="@color/black"
        android:textStyle="bold" />
    <ImageView 
        android:id="@+id/m_oItem_PlaceHolder"
        android:layout_width="wrap_content"
        android:layout_height="10dp"
        android:layout_alignLeft="@+id/m_oItem_TextView_TopLeft"
        android:layout_alignRight="@+id/m_oItem_TextView_TopRight"
        android:layout_below="@+id/m_oItem_TextView_Bottom"
        android:contentDescription="@string/image_description"/>
    <ImageView
        android:id="@+id/m_oPart_Arrow_Image"
        android:scaleType="fitCenter"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_centerVertical="true"
        android:layout_alignParentRight="true" 
        android:layout_marginRight="5dp"
        android:src="@drawable/arrow_right"
        android:contentDescription="@string/image_description"/>
</RelativeLayout> 
```

# c# - 需要帮助将 SQL 左连接查询转换为 LINQ 格式

> ID：14384609
> 
> 赞同：0
> 
> 时间：2013-01-17T17:22:37.013
> 
> 标签：c#, sql-server, linq, linq-to-sql

我是 LINQ 的新手，语法还不是很好。有人可以帮我将此 SQL 查询转换为 LINQ 语句，以便在我的 C# 项目中使用。

```
SELECT g.GalleryTitle, m.*
FROM Media AS m LEFT JOIN Galleries AS g ON m.GalleryID = g.GalleryID
WHERE m.MediaDate >= GETDATE() - 30
ORDER BY m.Views DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:32:08.770

```
from m in Db.Media
join g in Db.Galleries on m.GalleryID equals g.GalleryID into MediaGalleries
from mg in MediaGalleries.DefaultIfEmpty()
where m.MediaDate >= DateTime.Today.AddDays(-30)
orderby m.Views descending
select new
{
    GalleryTitle = mg != null ? mg.GalleryTitle : null,
    Media = m
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:29:03.293

我现在无法测试它，但它应该是这样的：

```
var result = Media.GroupJoin(Galleries, m => m.GalleryID, g => g.GalleryID, 
                    (m, g) => new {m, g})
                  .SelectMany(mg => mg.g.DefaultIfEmpty(), 
                    (m,g) => new { Media = m.m, GalleryTitle = g != null ? g.GalleryTitle : default(string) })
                  .OrderByDescending(m => m.Media.Views).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:31:45.820

```
var result = from m in Media

             join g in Galleries
               on m.GalleryId equals g.GalleryId
             into gJoinData
             from gJoinRecord in gJoinData.DefaultIfEmpty( )

             where m.MediaDate.CompareTo( DateTime.Today.AddDays( -30.0 ) ) >= 0
             orderby m.Views descending

             select new
             {
                 M_Record = m,
                 GalleryTitle = gJoinRecord.GalleryTitle
             }; 
```

# linux - 如何让 swf 播放器在 Linux 中工作？

> ID：14384611
> 
> 赞同：2
> 
> 时间：2013-01-17T17:22:39.103
> 
> 标签：linux, flash, apache, .htaccess, mp3

我有一个需要播放特定于[列表](http://www.billpelton.com/sale.php?saleid=227)的 mp3 文件的站点。该文件需要在同一个浏览器窗口中播放（来自客户端的指令）。我找到了一个 js/swf 播放器（[WordPress Audio Payer 独立版本](http://wpaudioplayer.com/standalone/)），它可以在我的本地机器（运行 WAMP 的 Windows）上运行，但是当我将它发送到实时服务器（带有 Apache 的 Linux）时，它会不断缓冲并且不播放。

我发现一个网站说我需要修改 htaccess 文件以识别闪存媒体。这就是它所说的要添加的内容，而我没有任何改进就这样做了。

```
# Macromedia tells the server how to deal with swf files
AddType application/x-shockwave-flash swf
AddType audio/mpeg mp3 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:05:35.687

您是否尝试监控流量（使用 Firebug 或 Chrome 开发工具）？例如，此问题可能与您服务器上不正确的[跨域策略有关。](http://kb2.adobe.com/cps/142/tn_14213.html)您可以通过在网络流量列表中搜索 crossdomain.xml 轻松检测到它。

# python - 将轮廓从一个轴实例复制到另一个轴实例

> ID：14384615
> 
> 赞同：3
> 
> 时间：2013-01-17T17:22:52.440
> 
> 标签：python, matplotlib

我有一种情况，我使用 matplotlib 生成了 20 多个不同的图像。这做了很多很多次。20 张图像中的每一张在背景中都有相同的轮廓集。为了减少处理时间，能够将结果`countourf()`从一个`Axes`实例复制到另一个实例将很有用。为了做到这一点，我试过这个：

```
#!/bin/env python

import os
import numpy as np
from matplotlib import pyplot as plt

def copycontours():
    #Create figures
    fig1 = plt.figure()
    fig2 = plt.figure()
    fig3 = plt.figure()

    #Create axes
    ax1 = fig1.add_axes((0.05,0.05,0.90,0.90))
    ax2 = fig2.add_axes((0.05,0.05,0.90,0.90))
    ax3 = fig3.add_axes((0.05,0.05,0.90,0.90))

    #Create random data
    data = np.random.normal(25, size=(25,25))

    #Add contours to first axes instance and save image
    contours = ax1.contourf(data)
    fig1.savefig('test.png')

    #Add contours to second axes instance from first axes instance
    for collection in ax1.collections:
        ax2.add_collection(collection)
    fig2.savefig('test2.png')

    #Add contours to third axes instance from 
    for collection in contours.collections:
        ax3.add_collection(collection)
    fig3.savefig('test3.png')

    os.system('display test.png &')
    os.system('display test2.png &')
    os.system('display test3.png &')

if __name__ == '__main__':
    copycontours() 
```

第一个图（test.png）出来看起来是正确的。轴范围从 0 到 25，并且填充了整个域。

![测试1.png](../Images/3c363a4d389cd0c5b5e92e9c989b0f27.png)

其他两个（test2.png，test3.png）的结果不同。它们的轴范围从 0 到 1，等高线区域仅填充从 0.0 到大约 7.9 的区域。

![测试2.png](../Images/bebccf42b39b1c21d28a85a7702f2967.png)

通过重置轴限制`ax2.set_xlim(0,25)`并`ax2.set_xlim(0,25)`更改轴范围，但不能解决更大的问题。

![测试3.png](../Images/d1e73194e2065a6d30d870dc2fdba1e8.png)

有没有人想过如何解决这个问题或以其他方式重用结果的另一种`contourf()`方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T00:20:41.570

处理此问题的一种侧面方法是重新使用具有轮廓的轴（因为看起来您正在保存每个图形而不是交互式地查看它）。

```
ax = fig.add_axes()
ax.contourf(..)
keep_lst = ax.get_children()[:] # state of the figure before adding anything extra

for plot_pram in conditions:
    # your plotting code

    fig.savefig()

    cur_children = ax.get_children()[:]
    # all the extra stuff you just plotted on it
    for a in cur_children:
        if a not in keep_lst:
            # if the artist isn't part of the initial set up, remove it
            a.remove() 
```

# iis - 没有应用程序池回收的 IIS 7 IP 限制？

> ID：14384616
> 
> 赞同：3
> 
> 时间：2013-01-17T17:22:52.187
> 
> 标签：iis, iis-7, application-pool, ip-restrictions

我目前正在使用默认值“拒绝”通过内置的“IPv4 地址和域限制”将一个或多个（但不是全部）网站限制为特定的 IP 地址。问题是每次我们添加 IP 时，所有关联的应用程序池都会回收。这也可能导致我们的共享配置（网络场）出现问题，因为更改会在其他服务器上蔓延。我们经常会每天将 1-8 个 IP 添加到这个白名单中......

每次添加或删除 IP（配置文件更改、自定义处理程序、商业软件）时，不会导致应用程序池回收的 IP 限制的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:18:32.357

在 IIS6 中，IP 限制是服务器主机本身的一部分。它是 IIS 元数据库的一部分。在 IIS7 中，这被分解为一个 Http 模块。这意味着随着 IIS7 对管道的更改，HttpModule 特定于站点，因此特定于应用程序池。这可以解释为什么 IIS7 会导致应用程序池回收，而 IIS6 不会。

# sql-server-2008 - 更改列数据类型后如何测试数据库代码？

> ID：14384617
> 
> 赞同：0
> 
> 时间：2013-01-17T17:22:54.757
> 
> 标签：sql-server-2008, tsql, unit-testing

我有一个包含大量逻辑的数据库，我必须维护它。我需要一种方法来知道至少在更改某些内容后一切都可以正常工作。

例如，我想知道所有存储过程和触发器在更改列类型后是否仍然有效。

有没有办法做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:45:42.107

您可以看看[tSQLt（TSQL 的单元测试）](http://tsqlt.org/)。使用它，您可以根据估计结果检查功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:34:39.343

您可以遍历所有[过程、函数等并在 TSQL 中调用它们](http://devio.wordpress.com/2009/11/26/checking-ms-sql-server-stored-procedures/)，或者运行我的[实用程序 checktsql](http://devio.wordpress.com/2010/05/28/checking-ms-sql-server-objects/)（WinForms 应用程序）。

但是我没有分析如何检查触发器。（我怎么会忘记？）

# ruby-on-rails - ruby-prof 的消极时期？

> ID：14384619
> 
> 赞同：0
> 
> 时间：2013-01-17T17:23:04.567
> 
> 标签：ruby-on-rails, rspec, ruby-prof

我正在使用基于 ruby​​-prof 的 rspec-prof 来分析需要相当长的时间的规范。但是，我无法解释我得到的结果，因为它们报告的是负面时间。我是否错误地使用了 rspec-prof/ruby-prof？这是一个错误吗？

```
zkhan@ubuntu:~/rails_projects/gamestory_app$ rspec spec/controllers/games_controller_spec.rb
Rack::File headers parameter replaces cache_control after Rack 1.5.
.#<RSpec::Core::Example:0xad11370>
Thread ID: 75909140
Total: -0.650803
Sort by: self_time

 %self      total      self      wait     child     calls  name
166.30     -6.402    -1.082     0.000    -5.320   212670   ActiveRecord::AttributeMethods::Dirty#write_attribute 
335.29     -0.278    -2.182     0.000     1.904   425424   ActiveRecord::AttributeMethods#column_for_attribute 
506.56      1.807    -3.297     0.000     5.103   170406   ActiveRecord::AttributeMethods#clone_attribute_value 
517.51     -1.086    -3.368     0.000     2.282    51106  *Hash#each 
580.84     -3.780    -3.780     0.000     0.000    79648   String#=~ 
597.22     -3.559    -3.887     0.000     0.327   114325   ActiveRecord::AttributeMethods#has_attribute? 
600.60     -3.909    -3.909     0.000     0.000   162452   Thread#[] 
601.95     -3.249    -3.917     0.000     0.669    46380   ActiveRecord::AttributeMethods#respond_to? 
607.83     -1.781    -3.956     0.000     2.175    76529  *Array#map 
627.42     -3.986    -4.083     0.000     0.097    93932   Fixnum#== 
629.84      1.281    -4.099     0.000     5.380    69849   <Class::ActiveRecord::Base>#connection 
641.72     -3.727    -4.176     0.000     0.449     8193   Logger::Formatter#call 
645.68     -3.893    -4.202     0.000     0.309    16428   <Class::Time>#time_with_datetime_fallback 
650.89     -4.229    -4.236     0.000     0.007     3486   <Class::Time>#_load_without_zone 
653.77     -4.223    -4.255     0.000     0.032     7122   ActiveSupport::TimeWithZone#respond_to? 
654.19     -4.116    -4.257     0.000     0.142     9510   EnumeratedAttribute::Attribute::AttributeDescriptor#allows_value? 
1236.59     -4.752    -8.048     0.000     3.296    58802   ActiveRecord::ConnectionAdapters::PostgreSQLAdapter#quote 
2894.34    -18.465   -18.836     0.000     0.372    21840   BigDecimal#== 

* indicates recursively called methods
.

Finished in 2 minutes 24.62 seconds
2 examples, 0 failures

Randomized with seed 63912 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:50:31.727

这确实是 ruby​​-prof 中的一个错误。我将这个问题发布到他们的 GitHub 网站上，据说即将发布一个带有修复的版本。

[GitHub问题链接](https://github.com/ruby-prof/ruby-prof/issues/101)

# c# - 查找动态创建的控件

> ID：14384620
> 
> 赞同：2
> 
> 时间：2013-01-17T17:23:06.277
> 
> 标签：c#, devexpress

我正在动态创建一个填充有 devex 单选列表控件的 HTML 表格并将其添加到页面中。

```
//Create the radio list
ASPxRadioButtonList radButt = new ASPxRadioButtonList();
radButt.ID = "audit-" + audType;

tableCell2.Controls.Add(radButt);
tableRow.Cells.Add(tableCell2);
auditTable.Rows.Add(tableRow); 
```

这一切都很好。
现在，在回调中，我想获取那个收音机列表并获取它的设置......所以我正在尝试这个，但一直为 NULL。

```
ASPxRadioButtonList audRad = (ASPxRadioButtonList)Page.FindControl("audit-" + audType); 
```

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:03:48.130

根据 Maarten 的回答，这是直接从[我们大师的博客](http://www.codinghorror.com/blog/2005/06/recursive-pagefindcontrol.html)中挑选的递归 FindControl 解决方案：

```
private Control FindControlRecursive(Control root, string id) 
{ 
    if (root.ID == id)
    { 
        return root; 
    } 

    foreach (Control c in root.Controls) 
    { 
        Control t = FindControlRecursive(c, id); 
        if (t != null) 
        { 
            return t; 
        } 
    } 

    return null; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:31:55.710

问题是[Page.FindControl](http://msdn.microsoft.com/en-us/library/31hxzsdw.aspx)方法不会搜索页面上的所有控件。它只搜索顶层控件。您必须使用[Page.FindControl](http://msdn.microsoft.com/en-us/library/31hxzsdw.aspx)和[Control.FindControl](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)搜索页面上的所有控件，可能是递归的。

还有一点，你的意思是在回发中找到单选按钮，还是在同一个请求中？如果您的意思是在回发中，那么您还必须在回发中重新生成控件，就像 Aniket 提到的那样。

# extjs4.1 - ExtJS 4.1.1a：JsonStore + proxy + url =“无法调用未定义的方法'indexOf'”

> ID：14384622
> 
> 赞同：5
> 
> 时间：2013-01-17T17:23:14.743
> 
> 标签：extjs4.1, jsonstore

此代码块有效：

```
Ext.define('MyApp.store.MyJsonStore', {
    extend: 'Ext.data.Store',
    fields: ['fieldName'],
    proxy: {
        type: 'ajax',
        url: 'json.php',
        reader: 'json'
    }
}); 
```

这一个崩溃：

```
Ext.define('MyApp.store.MyJsonStore', {
    extend: 'Ext.data.JsonStore',
    fields: ['fieldName'],
    proxy: {
        type: 'ajax',
        url: 'json.php',
        reader: 'json'
    }
}); 
```

这是发生问题的地方：

![在此处输入图像描述](../Images/1db58200bdeb56a45201c7c85d401d61.png)

难道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T17:49:30.447

`JsonStore`在 ExtJs 库中有点像红色区域...

如果您查看[JsonStore](http://docs.sencha.com/ext-js/4-1/source/JsonStore.html#Ext-data-JsonStore)的来源，您会看到：

```
constructor: function(config) {
    config = Ext.apply({
        proxy: {
            type  : 'ajax',
            reader: 'json',
            writer: 'json'
        }
    }, config);
    this.callParent([config]);
} 
```

实际上，商店会覆盖您自己的配置。

老实说，我很难想象你为什么更`JsonStore`喜欢`Ext.data.Store`. 从设计的角度来看，Json 更像是一种阅读器——存储只是存储记录。

我只在我的应用程序中使用`Ext.data.Store`和`Ext.data.TreeStore`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T16:50:53.490

我在带有 JsonP 存储的 Ext JS 4.2.1 中遇到了类似的问题，这是由于未在初始存储配置中设置 URL 而引起的。我在加载过程中动态地创建了 URL：

```
myStore.load({ url: 'json.php' }); 
```

这导致它*成功加载了传递的 URL*，但我也得到了与您完全相同的错误和堆栈跟踪，并且数据从未真正显示（我只能通过 Chrome 开发人员工具看到它）。我通过使用以下代码解决了这个问题：

```
myStore.proxy.url = 'json.php';
myStore.load(); 
```

我知道我们做的事情并不完全相同，但是我们得到的错误是相同的，所以希望这至少可以为您指明正确的方向。

**更新**

事实证明，问题实际上源于自动加载其值的 ComboBox。当我点击它时，它会尝试重新加载值，即使我第一次通过在 load({ }) 调用中传递 URL 成功加载了它们，它使用的是它自己的使用代理的加载方法URL（未定义）。这就是设置代理 URL 停止错误的原因。

对我来说真正的解决方案是通过将`queryMode`配置设置为`local`.

# ruby-on-rails-3 - 拼写检查器在 CKEditor 4 上不起作用

> ID：14384625
> 
> 赞同：0
> 
> 时间：2013-01-17T17:23:22.463
> 
> 标签：ruby-on-rails-3, ckeditor, javascript

我正在使用 CKEditor v4.0 和 ckeditor gem [https://github.com/tsechingho/ckeditor-rails](https://github.com/tsechingho/ckeditor-rails)

宝石文件

```
gem 'ckeditor', '>= 4.0.0.rc1' 
```

配置.js

```
CKEDITOR.editorConfig = function( config ){
   config.skin = 'moono',
   config.disableNativeSpellChecker = true,
   config.scayt_autoStartup = true,
   config.toolbar = [ 
      [ 'Bold', 'Italic', 'Underline', 'Strike', 'Blockquote', '-', 'NumberedList', 'BulletedList', '-', 'Link', 'Unlink', '-', 'SpellChecker', 'Scayt' ]
   ]
}; 
```

我一直在测试许多可能的解决方案，我认为这是 v4.0 的问题

[https://www.outsystems.com/NetworkForums/ViewTopic.aspx?TopicId=7033&Topic=CKEditor---Spell-Check-As-You-Type-(-SCAYT-](https://www.outsystems.com/NetworkForums/ViewTopic.aspx?TopicId=7033&Topic=CKEditor---Spell-Check-As-You-Type-(-SCAYT-) )

[http://devnet.kentico.com/FAQs/Content-Management/Enable-the-Spell-Check-As-You-Type-feature-by-defa.aspx](http://devnet.kentico.com/FAQs/Content-Management/Enable-the-Spell-Check-As-You-Type-feature-by-defa.aspx)

在这里[http://drupal.org/node/1870398](http://drupal.org/node/1870398)名为“vinmassaro”的用户发布说，如果您在工具栏上设置“键入时进行拼写检查”，它会起作用，因为这两种类型的拼写检查是在一个按钮中压缩的，但不会起作用，甚至没有显示它的工具栏按钮：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:22:47.803

我不知道如何解决这个问题，但我找到了另一个可以做我想做的事情的 gem，如果你想使用这个功能，你可以在没有任何额外配置的情况下使用它。

```
gem 'ckeditor_rails', '~> 4.0.1.1' 
```

[https://github.com/tsechingho/ckeditor-rails](https://github.com/tsechingho/ckeditor-rails)

# javascript - 插入元素与显示隐藏元素

> ID：14384629
> 
> 赞同：0
> 
> 时间：2013-01-17T17:23:39.180
> 
> 标签：javascript, html, css

显示最初要隐藏的 HTML 元素的最佳做法是什么？

*   在 HTML 中创建元素并使用 CSS 隐藏它。当需要使用它时，用 JavaScript 展示它。
*   当需要该元素时，使用 JavaScript 创建并显示它。

前者的缺点是 HTML 中可能存在不必要的元素，并且最初必须使用 CSS 隐藏。后者的缺点是 HTML 位于 JavaScript 文件中。

**编辑：添加示例**

一个示例是添加加载指示器或显示模式窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:31:13.870

There are a lot more factors that go in to this. If you are inserting a small element like a link or select list options, then dynamically generating them in javascript is a non-issue. If you are generating a repeating series of complex HTML, it might be a good idea to create a template of the html in the markup (so that the web designers can maintain it) and then make the template hidden in CSS. Then use javascript (e.g. jQuery) to clone the template and insert it in to the DOM. This gives you the benefit of using more native implementations to extend the DOM tree without all the nasty javascript-that-parses HTML mess.

But ultimately the practicality comes down to this: Who is going to maintain the code? Will the more elegant solution be something that the maintainer will understand? Or will putting everything in javascript (despite its inelegance) be something that a junior coder would be able to expand or update as the need arises in the future?

The vast majority of web browsers run on hardware that is ridiculously over-powered for what the user actually "needs", at least in terms of web browsing. Because of this, inefficient solutions in Javascript are rarely ever an immediate issue. If you are targeting mobile browsers though, efficiency == battery life. So if you are doing heavy dom-manipulation then consider the suggestion above and see if it works for your case.

Best of luck! -Brendan

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:30:57.417

The answer to that question used to be very heavily biased towards "Don't create it until you need to."

The reasons behind that decision are still somewhat applicable,but no-where near as much as they were.

*   People running a browser with styles off will see your hidden content. They'll also see a **very** ugly web. I wouldn't worry about it.
*   People running very ancient browsers that don't support styles will see it. They'll also see a very **broken** web. I'd not worry about them either
*   Screen readers will pick it up. Modern screen readers seem to be much better at realizing what content is, and is not visible. If you need ADA compliance, or just want to be responsible, some testing might be done there.
*   Sometimes, when printing, hidden content would be picked up. Again, not an issue.

All said, I'd do for hiding it through CSS rather than trying to dynamically add the content.

# windows-phone-7 - 无法在 Windows Phone 7 中制作本地化字符串

> ID：14384637
> 
> 赞同：1
> 
> 时间：2013-01-17T17:23:55.680
> 
> 标签：windows-phone-7, localization

我已按照本教程的说明[逐步本地化 Windows Phone 应用程序](http://www.windowsphonegeek.com/articles/Localizing-a-Windows-Phone-app-Step-by-Step)

但由于某种原因 Text="{Binding Path=AppResources.Title, Source={StaticResource LocalizedStrings}}" 不起作用。它不会给出任何错误或任何东西。

它只是一个普通的空盒子。

知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T11:25:28.723

我通过以下方式本地化了我的应用程序

1.  有一个名为 LocalizedStrings 的类，并创建了它的一个实例

    ```
    public class LocalizedStrings
    {
       public LocalizedStrings()
       {
       }
       private static AppName.AppResources localizedResources = new AppName.AppResources();

       public AppName.AppResources LocalizedResources
       {
        get
        {
            return localizedResources;
        }
       }            

    } 
    ```

2.  使用本地化字符串添加必要的 Resx 文件（例如 AppResources.de.resx ）

3.  `Application.Resources`在标记内的 App.xaml 中添加以下内容。

    `<local:LocalizedStrings xmlns:local="clr-namespace:AppName" x:Key="LocalizedStrings"/>`

最后在 csproj 文件中添加支持的区域性。

然后像这样绑定xaml元素

```
Text="{Binding Path=LocalizedResources.pivotItemTitleCalendar, Source={StaticResource LocalizedStrings}}" 
```

我们最常忘记的一件重要事情是将访问修饰符更改为 Pulic。打开你的 AppResources.resx，你可以看到一个叫做 Access Modifier 的字段。将值从内部更改为公共。

# ios - 自动完成 UITextField

> ID：14384638
> 
> 赞同：2
> 
> 时间：2013-01-17T17:24:02.310
> 
> 标签：ios, objective-c, cocoa-touch

我想从自定义值自动完成文本字段

在这里研究了 Google 和 SO [UITextField Autocomplete - iPhone SDK](https://stackoverflow.com/questions/3198337/uitextfield-autocomplete-iphone-sdk)

我试过这个：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    if ([string isEqualToString:@"Fac"]) {
        _clientField.text = @"Factory";
    }

    return YES;
} 
```

问题是我没有输入预测值`Factory`，只有输入的值`Fac`

编辑

根据答案尝试了这个...

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

if ([string isEqualToString:@"Fac"]) {
    _clientField.text = [_clientField.text stringByReplacingCharactersInRange:range
                                                   withString:@"Factory"];
  }

  return NO;
} 
```

还是一样

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T20:34:40.670

听起来像 HTAutocompleteTextField 会做这项工作：

[https://github.com/hoteltonight/HTAutocompleteTextField](https://github.com/hoteltonight/HTAutocompleteTextField)

您基本上只需要给它一个值数组作为自动完成数据源，它会在用户键入时在文本字段中提出建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:35:26.850

我检查了您的示例代码，但未设置文本字段的委托。

您可以在视图控制器中使用

```
_clientField.delegate = self; 
```

此外，您需要使用稍微不同的方法来获取用户看到的文本。像这样的东西：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    NSString *currentString = [textField.text stringByReplacingCharactersInRange:range withString:string];
    if ([currentString isEqualToString:@"Fac"]) {
        textField.text = @"Factory";
        return NO;
    }
    return YES;
} 
```

请注意，您可能希望对此进行微调，因为它还会在用户删除文本时自动完成。但这应该让你走上正轨。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T21:58:10.100

您应该尝试`NSLog` `string`它始终返回用户输入的最后一个字符（除非您复制/粘贴字符串：在这种情况下您的代码有效）。

实际上，做你想做的事情并不像看起来那么简单。这是我想出的：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSLog(@"string: %@", string);

    NSString *currentText = textField.text;
    NSString *nextText = [currentText stringByAppendingString:string];

    if ([nextText isEqualToString:@"Fac"])
    {
        textField.text = @"Factory";
        return NO;
    }
    return YES;
} 
```

如果您不自己构建 nextText，那么自动完成将被延迟。例如，如果您只检查 textField.text 的值，并且您键入“Fac”，则完成将在下一个字符输入时发生。
当您自动完成该字段时，您还必须返回 NO，因此`string`不会在文本字段的末尾添加（F -> Fa -> Factoryc，您不希望这样）。所以你说 textField 不应该改变范围内的字符......你自己改变了 textField 的值。

希望这将帮助您了解此`UITextFieldDelegate`方法中发生的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-03T23:00:41.383

您还可以查看此控件 ( [NHAutoCompleteTextField](https://journeytoios.wordpress.com/2015/01/03/nhautocompletetextfield/) )。在给定链接的示例源代码中，您将看到搜索列表过滤器作为用户类型。

`NHAutoCompleteTextField`易于集成：

```
#import "NHMainHeader.h"

autoCompleteTextField = [[NHAutoCompleteTextField alloc] initWithFrame:CGRectMake(x, y, width, 18)];  // 18 - example height
[autoCompleteTextField setDropDownDirection:NHDropDownDirectionDown];
[autoCompleteTextField setDataSourceDelegate:self];
[autoCompleteTextField setDataFilterDelegate:self]; 
```

并灵活地根据您的需要进行定制。例如，根据您的需要在这里创建单元格：

```
- (UITableViewCell *)autoCompleteTextBox:(NHAutoCompleteTextField *)autoCompleteTextBox cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

} 
```

可针对给定的下拉方向进行调整。

```
typedef enum
{
    NHDropDownDirectionUp,
    NHDropDownDirectionDown

} NHDropDownDirection; 
```

此控件还提供了一些很好的扩展功能，这些功能也有助于处理其他 UI。

```
#import "UIView+NHExtension.h"
#import "UILabel+Boldify.h" 
```

# java - JTable 和 JScrollPane 问题

> ID：14384648
> 
> 赞同：0
> 
> 时间：2013-01-17T17:24:54.297
> 
> 标签：java, swing, jtable, jpanel, jscrollpane

```
table.setPreferredScrollableViewportSize(table.getPreferredSize());
JScrollPane scrollPane = new JScrollPane(table);
panel.add(scrollPane); 
```

`scrollPane`是不可见的。如果我添加

```
table.setPreferredScrollableViewportSize(table.getPreferredSize()); 
```

你认为我在代码中遗漏了什么？因为我没有放

```
table.setPreferredScrollableViewportSize(table.getPreferredSize()); 
```

`JTable`布局不适合我的`panel`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:35:40.893

而不是这样做，

```
table.setPreferredScrollableViewportSize(table.getPreferredSize()); 
```

像这样指定维度，

```
table.setPreferredScrollableViewportSize(new Dimension(400, 60)); 
```

**更新：**

我认为上述答案不是一个好方法。你永远不应该`setXXSize`在组件上使用方法。所以请使用@Kleopatra 声明的这个[方法](https://stackoverflow.com/questions/13971089/jtable-inside-jscrollpane-best-height-to-disable-scrollbars/13974131#13974131)来设置视口大小。

# java - 设置查询参数；参数值与预期类型不匹配

> ID：14384650
> 
> 赞同：1
> 
> 时间：2013-01-17T17:24:57.587
> 
> 标签：java, sql, jakarta-ee, primefaces

![在此处输入图像描述](../Images/79118fab6424f3ca0dbe0cbd306378ef.png)

![在此处输入图像描述](../Images/e3141f9ebd57e5fb86240f3f79f4cffb.png)

好的，所以我让用户输入一个日期，该日期将在 java 中使用**em.createQuery**进行查询。正如您从屏幕截图中看到的那样，我将输入数据输入为**pattern="dd-MMM-yy**（这就是它在服务器中的存储方式），但我也尝试过没有模式标签，但它仍然无法正常工作.实际的错误是在**setQueryParams(q)**虽然我一直无法弄清楚它是什么。有人知道我可能会在哪里看吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:28:14.480

You haven't shown us what `q` is, but it sounds like you are giving a `java.lang.String` where a `java.util.Date` is expected.

Also, what is up with writing strings like

```
queryStr += " and c." + "dateCreated" + " >=:" + ... 
```

? that looks like a pain to maintain/read.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:35:06.087

我同意马特 b，看起来您正在提供一个字符串并期待一个日期（尽管很难阅读屏幕截图上的文字）。看一下[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)，并使用“解析”方法从字符串派生日期对象。

编辑：

您的日期看起来像这样的字符串格式：

2013 年 1 月 1 日星期二 00:00:00 EST

这是应该解析该格式的字符串的代码：

```
public static void main(String[] args) {

    String dateString = "Tue Jan 01 00:00:00 EST 2013";
    SimpleDateFormat format = new SimpleDateFormat("EEE MMM dd hh:mm:ss z yyyy");
    try {
        Date date = format.parse(dateString);
        System.out.println(date.toString());
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

我无法通过查看您的日志语句来判断方括号是否是您的字符串的一部分，如果它们是您必须将它们包含在您的格式中：

```
SimpleDateFormat format = new SimpleDateFormat("[EEE MMM dd hh:mm:ss z yyyy]"); 
```

请注意，我这里没有您的*确切*日期字符串，因此我可能在从您的图像中转录它时犯了一个错误。使用断点或打印语句来获取字符串 q 的确切格式。

当然，这一切都假设 q 是一个字符串，根据您的日志，情况似乎就是这样。

# javascript - 带有空响应的 http-Get 请求

> ID：14384653
> 
> 赞同：1
> 
> 时间：2013-01-17T17:25:04.623
> 
> 标签：javascript, jquery, ajax

我想用 JavaScript 处理 http-request 的响应。你可以在这里找到一个简单的例子。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1">
  <title>JavaScript Test</title>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript">
    function serviceCall() {
      $.ajax({
        type: "GET",
        url: 'http://localhost:8181/geoserver/wfs?Service=WFS&Request=GetFeature&Version=1.0.0&typename=topp:tasmania_water_bodies&SRS=EPSG:4326',
//        url: 'http://demo.opengeo.org/geoserver/ows?Service=WFS&Request=GetFeature&Version=1.0.0&typename=topp:tasmania_water_bodies&SRS=EPSG:4326',
        complete: function(xml, status){
          alert(xml.responseText);
        }
      });
    }
  </script>
</head>
<body>
  <center><button onclick="serviceCall()">Start...</button></center>
</body>
</html> 
```

该请求直接在浏览器中工作。通过 Ajax 和 JavaScript，响应为空。Firebug 在第 1 行第 1 列报告 xml 解析错误。我尝试将请求发送到 localhost 和远程服务器，但响应始终为空。我会很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:30:26.593

你为什么不使用`success`而不是`complete`？因为`complete`总是被解雇，即使它失败了，而且`success`只有当它成功时。比你不需要`xml, status`.

示例（自 CORS 以来不工作）：

```
$.ajax({
    type: "GET",
    url: 'http://localhost:8181/geoserver/wfs?Service=WFS&Request=GetFeature&Version=1.0.0&typename=topp:tasmania_water_bodies&SRS=EPSG:4326',
    success: function(response){
      alert(response);
    }
  }); 
```

另外，如果您不想访问其他域。如果您拥有其他域，则可以使用 JSONP。否则是不可能的。

尝试将以下部分添加到 URL：`&outputFormat=json&format_options=callback:processJSON`

**工作无 jQuery 示例**（此处为现场示例：http: [//jsfiddle.net/QWgJa/](http://jsfiddle.net/QWgJa/)）

```
function loadJSON(url)
{
    var headID = document.getElementsByTagName("head")[0]; 
    var newScript = document.createElement("script");
    newScript.type = 'text/javascript';
    newScript.src = url;
    headID.appendChild(newScript);  
}
function processJSON(jsonData)
{
    alert(jsonData); 
}

loadJSON("http://demo.opengeo.org/geoserver/ows?Service=WFS&Request=GetFeature&Version=1.0.0&typename=topp:tasmania_water_bodies&SRS=EPSG:4326&outputFormat=json&format_options=callback:processJSON"); 
```

信息 URL

*   [JSONP](http://en.wikipedia.org/wiki/JSONP)
*   [jQuery 阿贾克斯](http://api.jquery.com/jQuery.ajax/)

# r - R中具有线性约束的着色多边形

> ID：14384656
> 
> 赞同：4
> 
> 时间：2013-01-17T17:25:07.447
> 
> 标签：r, ggplot2, polygon

我有 6 个线性约束。我知道如何手动和通过`r`. 我正在寻找一种简单的方法来获得可行区域的插图。

我试图`ggplot2`这样做没有任何成功。

以下是约束：`x1 >= 0, x2 >= 0, x2 <= 10`和`x2 <= 12 - 2/5 * x1`, `x2 <= 18 - x1`,`x2 <= 18 - x1`

```
require(ggplot2)

# x2 <= 12 - 2/5*x1
fun1 = function(x1){
     x2 = 12 - 2/5*x1
     return(x2)
}

# x2 <= 18 - x1
fun2 = function(x1){
    x2 = 18 - x1
    return(x2)
}

# x2 = 44 - 3*x1
fun3 = function(x1){
    x2 = 44 - 3*x1
    return(x2)
}

x1 = seq(0,20)
mydf = data.frame(x1, fun1(x1), fun2(x1),fun3(x1),rep(10,length(x1)))
names(mydf) = c('x1','y1','y2','y3','y4')
mydf$y5 = rep(0,length(x1))

p0 = ggplot(mydf, aes(x = x1)) + 
     coord_cartesian(ylim=c(0,10),xlim = c(0,20))+                      
     geom_line(aes(y = y1), colour = 'blue') +
     geom_line(aes(y = y2), colour = 'green') +
     geom_line(aes(y = y3), colour = 'red') +
     geom_line(aes(y = y4), colour = 'purple') +
     geom_line(aes(y = y5), colour = 'black')

p0 +  geom_area(aes(y = pmin(y1,y2,y3,y4,y5)), fill = 'gray60') 
```

谢谢你的帮助！

**编辑**`y5`：从`pmin`函数中删除最后一个技巧：

```
 p0 +  geom_area(aes(y = pmin(y1,y2,y3,y4,y5)), fill = 'gray60') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:40:00.740

我的问题出在最后一个变量`y5`中。`pmin`从函数中删除它就可以了。

```
p0 = ggplot(mydf, aes(x = x1)) + 
    coord_cartesian(ylim=c(0,10),xlim = c(0,20))+                      
    geom_line(aes(y = y1), colour = 'blue') +
    geom_line(aes(y = y2), colour = 'green') +
    geom_line(aes(y = y3), colour = 'red') +
    geom_line(aes(y = y4), colour = 'purple') +
    geom_line(aes(y = y5), colour = 'black')

p0 +  geom_area(aes(y = pmin(y1,y2,y3,y4)), fill = 'gray60') 
```

# java - 错误图像 Servlet

> ID：14384658
> 
> 赞同：-1
> 
> 时间：2013-01-17T17:25:10.113
> 
> 标签：java, image, servlets

如果我从家里的图像 servlet 下载图像，一切正常。

但是，如果我从工作中下载图像，图像将下载，但 tcp 连接看起来永无止境。

```
public class ImageServlet extends HttpServlet {
    protected void doGet(HttpServletRequest servletRequest, HttpServletResponse servletResponse) throws ServletException, IOException {
        // ...
        ServletOutputStream servetOutputStream = response.getOutputStream();
        ImageIO.write(bufferedImage, imageRequestWrapper.mimeType, servetOutputStream);
        servetOutputStream.close();
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:29:48.723

我试过你的链接，它对我来说很好。我只能假设您的问题的原因是 HTTP 代理或路由器或防火墙或 NAT 或??? 在你的工作中定义。

因此，首先您可以尝试禁用其中一项（如果可能的话）。HTTP 代理是第一个候选者。对于其他事情，请尝试联系您的系统管理员。

如果没有任何帮助，但这是您的 servlet，请尝试在此处发布其源代码。否则不可能提出任何建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:43:39.503

好的，

我终于通过写内容长度来修复它。没有内容长度的标题行

```
Encoding-Type: chunked 
```

保持连接活着！

# qt - 我可以有一个没有主窗口的 Qt 项目吗？

> ID：14384660
> 
> 赞同：3
> 
> 时间：2013-01-17T17:25:11.203
> 
> 标签：qt, qwidget, qdialog, qmainwindow

我正在开始一个新的`Qt project`. 在我的项目中是否必须有一个`mainwindow`？

我只有`qdialogs`并且`qwidgets`因为我不需要工具栏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T17:29:21.853

不，没有必要拥有 QMainWindow。一个 QApplication 足以让 Qt 对象滚动。没有父级的 QWidget 会自动成为独立窗口，也称为顶级窗口。

# c# - 为什么我在有效 XML 上收到 XmlException？

> ID：14384666
> 
> 赞同：4
> 
> 时间：2013-01-17T17:25:23.237
> 
> 标签：c#, xml, linq-to-xml

在测试接受字符串并将该字符串作为属性添加到 XElement（以当前时间作为值）的方法的过程中。要使用`XElement.SetAttributeValue(XName name, object value)`（我知道添加/更新 XElement 的属性的唯一方法），我使用`XName.Get`将提供的字符串转换为 XName。

我遇到的问题是~~XName.Get~~（堆栈跟踪显示它来自`System.Xml.XmlConvert.VerifyNCName`）在某些情况下抛出 XmlException，声称某些字符是不允许的。一个例子是 0x02FF (˱)。我没想到这个字符是允许的，但[XML 规范](http://www.w3.org/TR/REC-xml/#NT-NameStartChar)似乎说 0x00F8 到 0x02FF 的整个范围都是有效的。

我是在有效字符上得到这个例外，还是我误解了规范？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T05:29:10.150

.NET Framework 4 和 .NET Framework 4.5 中的 AFAIR Xml 堆栈基于 Xml 规范的第 4 版而不是第 5 版。当您查看此规范时，您会注意到并非所有有效字符都可以在名称中使用。尤其是看看[这个](http://www.w3.org/TR/2006/REC-xml-20060816/#NT-NameChar)，看看什么[信](http://www.w3.org/TR/2006/REC-xml-20060816/#NT-Letter)，你会发现 [0x02C2-0x0385] 范围内的字符被排除在外。

此外，.NET Framework 4 和 4.5 中的 Xml 堆栈未移至第 5 版的原因是，由于字符范围的变化，相同的 Xml 文档可能有效或无效（这实际上是您遇到的问题），具体取决于处理器而不是文档本身（符合第 5 版的 Xml 文档仍然可以有 1.0 版）。所以有效的文档（符合第 5 版）将被旧的解析器视为无效而拒绝。它也没有反过来工作。如果支持第 5 版的 Xml 解析器收到一个文件，其名称中的字符在以前无效但在第 5 版中有效，则无法判断该文件是否应该被拒绝为应该是第 5 版之前的文件版本并且格式错误，或者它是第 5 版文件，应该被接受。

# php - mongodb PHP驱动支持ipv6吗？

> ID：14384667
> 
> 赞同：1
> 
> 时间：2013-01-17T17:25:24.060
> 
> 标签：php, mongodb, ipv6

发现这个问题[https://jira.mongodb.org/browse/PHP-219](https://jira.mongodb.org/browse/PHP-219)但几乎 2 年没有人投票支持它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T09:38:54.167

只要您在连接字符串中使用主机名，PHP 驱动程序就可以很好地支持 IPv6。连接字符串解析器目前还不理解 IPv6 地址表示法，但可以通过[https://jira.mongodb.org/browse/PHP-524进行跟踪](https://jira.mongodb.org/browse/PHP-524)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T18:09:35.810

不确定 mongo 本机支持，但来自 MySQL 实践：

在将 IPv6 放入 DB 之前，您必须做一些 PHP 烹饪：

使用
inet_pton() [http://php.net/manual/en/function.inet-pton.php](http://php.net/manual/en/function.inet-pton.php)
和
inet_ntop() [http://php.net/manual/en/function.inet-ntop.php](http://php.net/manual/en/function.inet-ntop.php)

然后将 IP 地址存储为二进制数据。

# c++ - std::unordered_set 是否连续（如 std::vector）？

> ID：14384668
> 
> 赞同：8
> 
> 时间：2013-01-17T17:25:32.580
> 
> 标签：c++, performance, vector, c++11, unordered-set

我将指针存储在 std::unordered_set 中。我这样做是因为我不想要任何重复项（我删除了集合中的指针，所以如果有重复项，我将尝试删除一个已经删除的指针）。我在这些集合中大量循环，因为我知道 std::vector 是最快的循环容器（连续内存），我想知道 std::unordered_set 是否也这样做。

如果没有，使用 std::vector 并检查指针是否已被删除会更快吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-17T18:05:23.813

> 是`std::unordered_set`连续的吗？

标准没有详细说明容器的确切实现......*但是*标准确实规定了一些限制实际表示的行为。

例如，`std::unordered_set`需要内存稳定：即使添加/删除*其他*元素，对元素的引用/地址也是有效的。

实现这一点的唯一方法是或多或少独立地分配元素。它不能通过连续的内存分配来实现，因为这样的分配必然是有界的，因此可能会过度生长，不可能在更大的块中重新分配元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T17:27:32.063

不，它不是连续内存，但由于哈希映射，它仍然非常快。

编辑：快速随机访问，如果你主要做循环，你应该考虑另一个容器，我认为。

Edit2：您应该进行分析，以便了解是否值得考虑另一个容器。（也许你应该优化其他地方......也许）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T18:35:24.543

提供以下成员函数的事实`std::unordered_map`表明它是基于散列表的，可能是 [使用链表单独链接](http://en.wikipedia.org/wiki/Hash_table#Linked_list)。

```
bucket_count, hash_function, load_factor, max_load_count, rehash 
```

元素是否连续取决于分配器。**和****的默认分配器不会在连续内存中分配元素。`unordered_map``list`**每个元素的内存是在插入时分配的。

但是，您可以提供自定义分配器（例如[池分配器](http://www.boost.org/doc/libs/1_47_0/libs/pool/doc/interfaces/pool_alloc.html)），它可以从预先分配的内存池中分配元素。尽管如此，数据结构中逻辑上相邻的元素在内存中可能并不物理上相邻。

因此，如果循环遍历所有元素是最频繁的操作，那么这`unordered_map`可能不是最佳解决方案。通过分析器为所有竞争解决方案运行主要用例将揭示最佳解决方案。

除此之外，`unordered_map`循环不是另一个原因的最佳选择。请注意名称中的“**无序**”一词，它传达了 - 与`list`,`vector`或不同`map`-**元素没有顺序**。例如，成员函数[`rehash`](http://www.cplusplus.com/reference/unordered_map/unordered_map/rehash/)可能会改变元素的相对顺序。事实上， 在任何操作期​​间，只要其负载因子将超过 ，容器就会**自动执行重新散列。**`max_load_factor`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T17:50:42.507

std::unordered_set 应该是一个哈希映射容器，所以我们可以假设它与 std::vector 相比有一点性能损失。

但是我认为如果 unordered_set 访问是真正的热点，您必须检查实际的分析结果。

如果您使用的 STL 实现是合理的，它应该为指针或 int 类型键提供类似向量的特化。如果为真，则专门针对指针类型的 unordered_set 的行为将与自动增长/收缩向量非常相似，并且性能差异将不明显。

# eclipse - 将 Selenium chrome 驱动程序作为 maven 依赖项添加到 eclipse 时找不到

> ID：14384669
> 
> 赞同：2
> 
> 时间：2013-01-17T17:25:34.953
> 
> 标签：eclipse, maven, selenium, m2e, selenium-chromedriver

我在 4.2 Juno 中使用 m2e eclipse 插件。添加后，我在我的 maven 依赖项中看到 selenium-chrome-driver-2.26.0.jar 文件

```
<dependency>
   <groupId>org.seleniumhq.selenium</groupId>
   <artifactId>selenium-java</artifactId>
   <version>2.26.0</version>
</dependency> 
```

到我的 pom.xml 文件。我收到典型的缺少驱动程序错误

```
java.lang.IllegalStateException: The path to the driver executable 
must be set by the webdriver.chrome.driver system property; ... 
```

Firefox 驱动程序有效（它是自动的）。右键单击项目时，我可以使用 Maven 子菜单成功更新我的项目。maven 依赖文件夹已添加到我的项目的构建路径中。我看过与这些类似的帖子，但运气不佳。

[如何将 Maven 存储库 jar 添加到 Eclipse 构建路径？](https://stackoverflow.com/questions/10972770/how-to-add-maven-repository-jars-to-eclipse-buildpath) [如何配置 Eclipse 构建路径以使用 Maven 依赖项？](https://stackoverflow.com/questions/2037188/how-to-configure-eclipse-build-path-to-use-maven-dependencies)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T05:12:56.590

这不是 ChromeDriver 类。

您需要从[这里下载最新版本的 chrome 驱动程序](http://code.google.com/p/chromedriver/downloads/list)

解压缩 zip，您将找到一个 .exe 文件。

使用以下代码
`System.setProperty("webdriver.chrome.driver","<path to Chromedriver .exe>");`

否则设置 PATH 环境变量指向 ChromeDriver.exe 的位置

# vb.net - Visual Basic 中有没有类似宏 (#define) 的东西？

> ID：14384670
> 
> 赞同：1
> 
> 时间：2013-01-17T17:25:35.027
> 
> 标签：vb.net, visual-studio-2010, macros, inline

我正在编写一个包含许多类似代码行的程序，如下所示：

```
If Bird.Left + Bird.Width - Wall1.Left < 2 And Bird.Left + Bird.Width - Wall1.Left > -2 And Bird.Top > Wall1.Top Then 
```

和

```
 If Bird.Left + Bird.Width - Wall2.Left < 2 And Bird.Left + Bird.Width - Wall2.Left > -2 And Bird.Top > Wall2.Top Then 
```

和其他一些类似的行，有没有办法在不使用函数的情况下声明这些类似的行，例如 f(x,y) ？（因为为此编写函数会大大降低程序的速度）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:29:33.090

最后在 .NET 4.5 中，CLR 允许使用[`MethodImplOptions.AggressiveInlining`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimploptions%28v=VS.110%29.aspx)值强制方法内联。它也可以在 Mono 的后备箱中使用（今天提交）。

# less - 可选的LESS mixin变量可以引用另一个变量吗

> ID：14384674
> 
> 赞同：2
> 
> 时间：2013-01-17T17:25:59.660
> 
> 标签：less, mixins

是否可以在参数 mixin 中引用另一个变量？

```
.button(@textColor : @white, @iconColor : @textColor) {
    color: @textColor;
    i {
        color: @iconColor
    }
} 
```

我想`@iconColor`默认为`@textColor`.

LESS 编译器在抱怨。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:59:42.423

我认为你需要做一个嵌套的 mixin 想法来获得你想要的功能。LESS 无法判断您已经设置了`@textColor`并将其用作第二个参数的默认设置。相反，您需要执行某种类型的保护表达式。在这里，我将保护表达式设置为一个嵌套的 mixin，它计算主 mixin 中的第二个参数并相应地响应以获取`@iconColor`集合：

```
.button(@textColor: @white, @setIconColor: null) {

    .setDefault() when (@setIconColor = null) {
       .doSetting(@textColor);
    }
    .setDefault() when (iscolor(@setIconColor)) {
       .doSetting(@setIconColor);
    }
    .setDefault();

    .doSetting(@iconColor) {    
        color: @textColor;
        i {
          color: @iconColor
        }
    }
} 
```

# c# - 如何使用 NHibernate 为枚举设置默认值？

> ID：14384677
> 
> 赞同：0
> 
> 时间：2013-01-17T17:26:05.810
> 
> 标签：c#, .net, nhibernate, nhibernate-mapping

给定下表：

```
create table TypeAccount
(
    AccountTypeID int primary key identity(1,1),
    [Description] varchar(100) not null
)

create table Account
(
    --AccountID char(32) primary key not null,
    AccountID int primary key identity(1,1),
    AccountName varchar(50),
    AccountTypeID int foreign key references TypeAccount(AccountTypeID),
    CreateDate datetime
) 
```

并给出以下枚举定义：

```
public enum AccountType
{
    None = 0,
    Savings = 1,
    Checking = 2
} 
```

当我创建一个`Account`对象时，如果我保留它的默认`AccountType`值`AccountType.None`then 写入数据库时​​它会尝试插入 a `0`（这是有道理的），但是由于我们对表有外键限制，所以会引发异常。我们需要插入 null 或引用表中存在的值。

我的问题是：NHibernate 是否可以这样说：“如果我的枚举没有设置，那么将 null 写入该列的数据库？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:31:58.410

在类中将您的枚举声明为可为空的属性/字段，以便默认值为空。

例如：

```
public class Entity 
{
  public int Id { get; set; }
  public AccountStatus? Status { get; set;}
} 
```

如果您想坚持 DB 中 AccountStatus.None <=> NULL 的 conecpt，那么您应该查看 NHibernate IUserType 接口。使用此接口，您可以提供将应用程序值来回转换为 DB 值的自定义逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:11:57.070

您可以将相应的值添加到`AccountType`表中 for `AccountType.None`，毕竟这是您在 POCO 枚举中定义的值。这样您就不必处理 a`Nullable<AccountType>`并且您的数据库可以更好地映射到您的应用程序。

# php - 将 XML 内容加载到 Php (Joomla)

> ID：14384679
> 
> 赞同：0
> 
> 时间：2013-01-17T17:26:27.620
> 
> 标签：php, xml, joomla

我正在尝试将 XML 文件的内容加载到 Joomla 2.5 中的自定义 php 代码模块中。

我的 XML 位于根文件夹“/country-info”中，我的 XML 文件的名称是“country-info.xml”。

我的 XML 文件的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<germany>
<citizens>81,8 Mio.</citizens>
</germany> 
```

这是我发现的 php 代码之一：

```
<?php
   $completeurl ="country-info/country-info.xml";
   $xml = simplexml_load_file($completeurl);
   $citizens = $xml->germany->citizens;

    echo $citizens;

?> 
```

编辑 - 新代码：

```
<?php
    $xml = '<?xml version="1.0" encoding="utf-8"?>
<germany-citizens>81,8 Mio.</citizens>
';
    $catid = JRequest::getInt('id');
    $db =& JFactory::getDBO();
    $sql = "SELECT alias FROM #__categories WHERE id = ".intval($catid);
    $db->setQuery($sql);
    $displayarea = $db->loadResult();
    $xml = simplexml_load_string($xml);
    $citizens = $xml-> {$displayarea . '-citizens'};
    echo '&nbsp;|&nbsp;Citizens:&nbsp;' . $citizens . '&nbsp;|&nbsp;';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:11:21.590

可能是路径不正确。我已经定义了您网站的根目录，因此您可以从那里继续。

```
<?php
   $completeurl = JURI::root() . "country-info/country-info.xml";
   $xml = simplexml_load_file($completeurl);
   $citizens = $xml->germany->citizens;

    echo $citizens;
?> 
```

希望这可以帮助。

# c++ - c-casting to type 反对 c-casting to type's reference

> ID：14384681
> 
> 赞同：1
> 
> 时间：2013-01-17T17:26:37.460
> 
> 标签：c++, casting, enums

在 c++ 中，c-casting 到 type 或 type 的引用有什么区别？

```
foo = (unsigned int) whatever;  

// Is this the same as: 
foo = (unsigned int&) whatever; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T17:49:29.337

不，它甚至完全不一样。

（在某些情况下，演员表的确切性质取决于是什么`whatever`。我会假设类型与`whatever`无关`unsigned int`。）

对引用类型`unsigned int &`的 C 转换等价于`reinterpret_cast`对该类型执行 a

```
foo = reinterpret_cast<unsigned int &>(whatever); 
```

根据定义，这相当于

```
foo = *reinterpret_cast<unsigned int *>(&whatever); 
```

`whatever`在这种情况下，必须是左值。

换句话说，强制转换为引用只是*类型双关*的另一种方法。您只是将被占用的内存*重新解释*`whatever`为一个`unsigned int`对象。在一般情况下，行为是未定义的。例如，如果`sizeof whatever`小于 的大小`unsigned int`，则重新解释还会涉及一些甚至不属于 的“狂野”记忆`whatever`。

同时，非引用 C-cast 只是值*转换*，而不是内存重新解释。对于`unsigned int`它的算术转换等价于`static_cast`（但如果`whatever`是指针，则等价于`reinterpret_cast`）。它读取 的值*并*`whatever`根据`unsigned int`语言转换规则将其转换为类型（如果存在转换）。

例如，这个

```
float f = 5;
unsigned int i = (unsigned int) f; 
```

将*value*转换为`f`type `unsigned int`，这意味着`i`将接收 value `5`。同时，如果在您的平台尺寸`unsigned int`和尺寸`float`相同，那么这个

```
unsigned int i = (unsigned int &) f; 
```

实际上会将具有 value的`float`object的内部对象表示重新解释为 type 的对象。的结果值通常是不可预测的。通常它甚至不会接近（在流行的实现中，您将简单地收到 中原始值的 IEE754 表示）。`f``5``unsigned int``i``5``float``i`

# validation - 验证 javax.ejb.ScheduleExpression

> ID：14384688
> 
> 赞同：6
> 
> 时间：2013-01-17T17:26:52.500
> 
> 标签：validation, jakarta-ee, cronexpression

我有一个文本字段，用户可以在其中输入 cron 表达式（例如，`0 */5 * * * *`）。然后我拆分它并构建一个`javax.ejb.ScheduleExpression`.

现在`javax.ejb.ScheduleExpression`接受不同元素的任何字符串，无需验证。例如，我可以

```
scheduleExpression.minute("randomText"); 
```

并被接受。如果然后尝试使用 ScheduleExpression 我显然会收到错误（例如，当我尝试使用它创建计时器时）。

我开始编写代码来验证输入，但规则不是那么简短和琐碎：[http ://docs.oracle.com/javaee/6/api/javax/ejb/ScheduleExpression.html](http://docs.oracle.com/javaee/6/api/javax/ejb/ScheduleExpression.html)

是否有一种简单的方法（在 Java EE 中）或已经完成这项工作的库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-05T18:00:33.637

由于我遇到了同样的问题，我为 EJB 计时器构建了一个 bean 验证器注释。

随意使用它。对于那些不想或可以使用 bean 验证的人，请查看文件 CronField.java 中的正则表达式来手动验证您的字符串。

正则表达式是为“ScheduleExpression”而不是“CronExpression”设计的，所以我选择的名称可能看起来有点混乱。

如果您有改进或优化，请向我发送拉取请求或消息。

源代码可在此[存储库](https://bitbucket.org/BigAl42/helper/)中获得。

用法：公开课月{

```
 @CheckCronField(CronField.MONTH)
    public String expression;
    ...
} 
```

在同一存储库的测试文件夹中提供了更多示例。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-21T09:42:25.453

如果您在 Java EE 环境中并且有可用的quartz，也许[这个问题](https://stackoverflow.com/questions/2362985/verifying-a-cron-expression-is-valid-in-java)有您想要的答案......

# linux - 用于重启应用程序的 Bash 脚本

> ID：14384689
> 
> 赞同：1
> 
> 时间：2013-01-17T17:26:58.037
> 
> 标签：linux, bash, ubuntu, sh

你能帮我创建*bash*（或*sh*）脚本，它将启动应用程序（`./newserver`）并且每小时都会杀死这个应用程序（发送信号）并重新启动。

它还应该检查应用程序是否正在工作，如果没有 - 重新启动，以防应用程序崩溃等情况。

对于 linux ubuntu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:31:42.287

正如人们已经指出的那样，这不是处理脚本错误的最佳方法。但是，我假设您有特殊的理由需要这个。

```
#!/bin/bash
while :; do
   ./newserver &
   pid=$!
   sleep 1h
   kill -n 9 $pid
done 
```

至于检查它是否有效，您必须创建一些分析来识别它。我对您的脚本一无所知，但我怀疑您是否想尝试在 bash 中执行此操作。

除非“工作”只是指跑步，在这种情况下

```
#!/bin/bash
run_server () {
  while :; do
    ./newserver &
    pid=$!
    sleep 1h
    kill -n 9 $pid
  done
}
run_server &
while :; do
  if [ "$(kill -n 0 $pid 2>&1)" ]; then
    run_server &
  fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:26:52.527

将您的服务器启动脚本放在`/etc/inittab`init 中，如果它死了，它将生成它。

# c# - 在 c# 中为 SharePoint 用户获取新警报

> ID：14384693
> 
> 赞同：1
> 
> 时间：2013-01-17T17:27:16.337
> 
> 标签：c#, asp.net, sharepoint-2010, sharepoint-alerts

我有一个用 c# 编写的 ASP.NET 4.0 应用程序。我还有一个使用基于声明的身份验证的 SP2010 Foundation 应用程序。

用户不会完全看到 SharePoint 应用程序。只有库视图嵌入到 iframe 中，并且已经实现了单点登录，因此当用户登录到我的应用程序时，他们也同时登录到 SP。

是否可以获取特定用户的所有警报。

例如：

Jim 登录到我的应用程序并看到以下内容： 文档 A 有一个新的修改 文档 C 刚刚上传。文档 B 有一个新的修改。

所以基本上我不想发送电子邮件，而是使用 SP DOM 来获取特定用户的所有待处理更新。

与此类似的东西：

```
SPUser user = web.EnsureUser(@"domainName\userName");
SPAlertCollection alertColl = user.Alerts;
foreach (SPAlert alert in alertColl)
{
Console.WriteLine(alert.Title); 
} 
```

我假设这会给特定用户分配的警报。但是，如果用户对他们分配了警报的项目有新的警报，SharePoint 是否会存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:34:09.033

当您说“如果用户有新警报，sharepoint 是否存储”您指的是电子邮件本身吗？SPAlert 和 SPAlertCollection 是监视列表项并触发电子邮件发送的实际对象，电子邮件本身不是警报对象（尽管我完全理解为什么会令人困惑）。据我所知，监视电子邮件的唯一方法是通过您的邮件服务器进行，​​SharePoint 没有一种简单的方法来跟踪它。

如果我正确理解您的问题，您想使用您的应用程序显示用户拥有的任何警报通知，而不是向用户发送电子邮件？可以通过将警报电子邮件路由到中间帐户来完成类似的操作，然后让您的应用程序读取/过滤/显示这些电子邮件。这还使您能够在电子邮件上设置规则，以组织它们并发送您自己的自定义通知（SharePoint 使自定义电子邮件通知模板变得非常困难）。

# python - 为什么我的多参数卡方卡在错误循环中？

> ID：14384694
> 
> 赞同：1
> 
> 时间：2013-01-17T17:27:17.540
> 
> 标签：python, chi-squared

我正在尝试使用 python 中的模块执行多参数拟合`lmfit`，但要遵守某些参数组必须总和为一个的约束。

例如，假设我的卡方中有参数 B1_0 和 B1_1，我`params.add('B1_0', value=0.5, min=0, max=1)`为第一个和`params.add('B1_1', expr='1-B1_0-B1_2')` 第二个设置了参数。然后我可以使用该`minimize`方法找到我的模型最适合我的数据。

在我的代码中并不是这么简单；有许多自动生成的参数适合，所以我使用这样的方法：

```
for term in listOfTerms:
    con = constraint(term,listOfTerms)    # finds the constraint (all sum to 1)
    params.add(term,value=getValue(term),expr=con) 
```

其中该方法`getValue(term)`从另一个已知最小化卡方的拟合方法返回值。当我尝试运行我的代码时，我收到如下错误消息：

```
Traceback (most recent call last):
  File "/home/user/Desktop/MPhys/chisquare.py", line 123, in <module>
    result = minimize(objfunc,params,args=(trans,sum_in,sum_out,data))
  File "/usr/local/lib/python2.7/dist-packages/lmfit-0.7-py2.7.egg/lmfit/minimizer.py", line 467, in minimize
    iter_cb=iter_cb, scale_covar=scale_covar, **fit_kws)
  File "/usr/local/lib/python2.7/dist-packages/lmfit-0.7-py2.7.egg/lmfit/minimizer.py", line 92, in __init__
    self.prepare_fit()
  File "/usr/local/lib/python2.7/dist-packages/lmfit-0.7-py2.7.egg/lmfit/minimizer.py", line 219, in prepare_fit
    self.update_constraints()
  File "/usr/local/lib/python2.7/dist-packages/lmfit-0.7-py2.7.egg/lmfit/minimizer.py", line 122, in update_constraints
    self.__update_paramval(name)
  File "/usr/local/lib/python2.7/dist-packages/lmfit-0.7-py2.7.egg/lmfit/minimizer.py", line 109, in __update_paramval
    self.__update_paramval(dep)
  File "/usr/local/lib/python2.7/dist-packages/lmfit-0.7-py2.7.egg/lmfit/minimizer.py", line 109, in __update_paramval
    self.__update_paramval(dep) 
```

... ...等，以：

```
 File "/usr/local/lib/python2.7/dist-packages/lmfit-0.7-py2.7.egg/lmfit/minimizer.py", line 109, in __update_paramval
    self.__update_paramval(dep)
  File "/usr/local/lib/python2.7/dist-packages/lmfit-0.7-py2.7.egg/lmfit/minimizer.py", line 106, in __update_paramval
    par = self.params[name]
RuntimeError: maximum recursion depth exceeded while calling a Python object 
```

我不知道为什么 lmfit 在这种情况下会抛出错误。有人有想法吗？它在没有限制的情况下“工作”，但会给出不可用的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:36:35.993

`params.add`在这个特定的问题中，通过lmfit 模块中的方法设置参数并带有一些约束。发生错误是因为程序试图在定义某些参数之前应用约束。

可以通过首先定义所有参数然后使用`params['<enter parameter here>'].expr = '<expression defining constraint>`.

例如：

```
# create a set of Parameters
params = Parameters()
params.add('amp',   value= 10,  min=0)
params.add('decay', value= 0.1) 
params.add('shift', value= 0.0, min=-np.pi/2., max=np.pi/2)
params.add('omega', value= 0.01)

params['amp'].expr = '1-decay-shift-omega' 
```

希望这可以帮助其他人使用这个模块！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T18:34:31.407

除了上述之外，当表达式中存在参数相互依赖时，也可以达到错误。我最近正在研究一个需要以下约束并收到相同消息的问题：

```
#define mr as mi/mii
params['mr'].expr='mi/mii'
params['mi'].expr='mii*(mr)'
params['mii'].expr='mi*(1/mr)' 
```

由于这里的表达式都相互依赖，所以 lmfit 无法弄清楚。我希望这有助于其他查看此消息的人。可以通过删除表达式中的一些相互依赖性来修复该错误。这似乎是一个可以通过更改源代码以接受这些类型的依赖项来解决的问题。

干杯

# c# - Programmatically Create Wireless Ad-Hoc Network

> ID：14384702
> 
> 赞同：2
> 
> 时间：2013-01-17T17:27:45.053
> 
> 标签：c#, windows-mobile, wireless, opennetcf

How do i setup a wireless ad-hoc network to Windows Mobile 6.1 on startup? I think the only way to do this is programmatically and I have been unable to find a way to create a network, I have found OpenNetCF but is there a way to do this in .NET CF? Or how-to do it in OpenNetCF?

I need to do this so I can have socket communications.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:58:08.990

Ad-hoc 的另一个名称是“非基础架构模式”，因此如果您查看[我在此处提供的一些示例服务代码](http://blog.opennetcf.com/ctacke/2011/08/19/AServiceForScanningAndConnectingToWiFiNetworksFromTheCF.aspx)，您会看到如下所示的私有方法：

```
private bool ConnectToNetwork(
    string ssid, 
    string passphrase, 
    bool adhoc, 
    AuthenticationMode mode, 
    WEPStatus encryption)
{
    // other setup code, etc
                return m_wzc.AddPreferredNetwork(ssid,  
                    !adhoc,  
                    passphrase,  
                    1,  
                    mode,  
                    encryption,  
                    eap);  
} 
```

注意它是如何将基础架构模式的 bool 参数作为第二个参数传递的。您只需添加另一个调用 ConnectToNetwork 的公共方法，将其设置为 true（服务中的每个方法现在都传递 false，因为我在编写代码时没有 Ad-hoc 作为要求）。

# ruby-on-rails-3.1 - Rails controller method response as JSON

> ID：14384710
> 
> 赞同：0
> 
> 时间：2013-01-17T17:28:09.770
> 
> 标签：ruby-on-rails-3.1, best-in-place

Im working with a GEM call best_in_place : [https://github.com/bernat/best_in_place](https://github.com/bernat/best_in_place)

Creation of new todo items are done with:

```
<%= best_in_place @user, :name, :type => :input, :nil => "Click me to add content!" %>

respond_to :html, :json, :js

def todo_item_fast_create
    @todo_list = TodoList.find(params[:id])
    @todo_item = @todo_list.todo_items.new(params[:todo_item])
    @todo_item.save
    respond_with @todo_item
end 
```

The response code is JSON, but I would like to call a JS template so I can manipulate the DOM, is that possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:30:23.943

您将必须创建一个文件名如下的视图模板：`todo_item_fast_create.js.erb`该文件将在调用该操作时提供。您可能必须添加`:remote => true`到调用此操作的按钮或链接。

这是我的 JS 文件之一：new.js.erb（在我安排新导出时调用）。

```
$("#export_modal").html("<%= escape_javascript(render("new")) %>");
<!-- trigger the modal to open -->
$("#export_modal").modal('show');

$("#popover1").popover(); 
```

该调用`escape_javascript(render("new"))`将部分呈现到 js 响应中，我让 js 处理更新 DOM。

# javascript - 严格模式下的全局对象访问

> ID：14384716
> 
> 赞同：3
> 
> 时间：2013-01-17T17:28:19.910
> 
> 标签：javascript, ecmascript-5

考虑以下代码片段：

```
var global = (function(){
    return this;
}()); 
```

当这个执行全局将指向`window`浏览器中的对象。
但这在严格模式下不起作用。为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T19:55:50.720

ES5 规范允许您通过间接 eval 检索全局对象。

```
var global = (0, eval)('this'); 
```

这适用于严格和非严格模式。

间接 eval 基本上是通过值而不是引用调用 eval（或者值绑定的名称不为“eval”）。间接eval在全局范围内执行，`this`在全局范围内指的是全局对象。

有一篇详细的文章涵盖了这一点： http: [//perfectionkills.com/global-eval-what-are-the-options/](http://perfectionkills.com/global-eval-what-are-the-options/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T17:33:32.543

原因已经被dystroy解释了：`this`在严格模式下不会是全局对象。这是解决方法（假设在全局范围内运行）：

```
var global = (function(g){
    return g;
}(this)); 
```

根据[ES5 规范](http://es5.github.com/#C)，原因是：

> 如果`this`在严格模式代码中进行评估，则该`this`值不会强制转换为对象。or的`this`值不转换为全局对象`null``undefined`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T17:31:23.763

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)：

```
for a strict mode function, the specified this is used unchanged:
...
"use strict";
function fun() { return this; }
assert(fun() === undefined); 
```

所以这完全符合规定。

# c# - Field template for editing XElement datatype in Asp.Net Dynamic Data

> ID：14384718
> 
> 赞同：9
> 
> 时间：2013-01-17T17:28:22.650
> 
> 标签：c#, asp.net, xml, dynamic-data, asp.net-dynamic-data

I have an Asp.Net 4.0 Dynamic Data website with a LINQ to SQL data context. One of the columns in the SQL Server database is NVARCHAR(MAX) and contains an XML fragment. I have mapped this to XElement in the .dbml file. I have added metadata for the class with a UIHint for the property and I have written a Custom Field template that shows the XML contents in a TreeView. Much like [How to edit a SQL Server XML data field with asp.net Dynamic Data](https://stackoverflow.com/questions/1306686/how-to-edit-a-sql-server-xml-data-field-with-asp-net-dynamic-data)

Now I'd like to actually edit the data field. A simple text editor will do so I thought I'd copy the MultiLine_Edit field template. On the edit page it is indeed showing and I can edit the contents. But this approach turns out to be a bit too simple for when I press update, I get a red `List of validation errors: The value is not valid.` at the top of the page. I commented out the DynamicValidator, but now I get a ServerError instead that it cannot save my edits cause it fails at converting my edits from String to XElement.

I found an [old post on the asp.net forums from someone trying to do the same thing](http://forums.asp.net/t/1434429.aspx/1) but it does not show a solution.

So my question is: What should my XML_Edit field template look like?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:17:06.370

尝试使用`XDocument`可序列化的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T21:37:10.343

LINQ to SQL 和动态数据不能很好地结合在一起。

所以不要将 XML 内容映射到 XElement。而是将其映射到字符串。

您可以很好地使用自定义字段模板，但它们基于字符串。

# objective-c - NSLocalizedString - Use of undeclared identifier issue

> ID：14384720
> 
> 赞同：7
> 
> 时间：2013-01-17T17:28:32.653
> 
> 标签：objective-c, cocoa-touch, nslocalizedstring

I'm using `NSLocalizedString` in a particular message that works fine if the second parameter is passed as a variable, but fails with `Use of undeclared identifier 'NSLocalizedString'` and `Too many arguments provided to function-like macro invocation` if the second parameter is written exactly the same as the variable was set. I have working code using the variable, which is fine, I just want to understand the reasons for the failure to know how to avoid it in other situations.

With the following declarations:

```
NSString *branchTitle = [branchDictionary objectForKey:@"Title"];
NSString *localString = [NSMutableString stringWithFormat:@"%@ node title", branchTitle]; 
```

This works fine with no errors:

```
[navItem setTitle:NSLocalizedString(branchTitle, localString)]; 
```

... but this, which seems identical to me, fails with the errors noted above:

```
[navItem setTitle:NSLocalizedString(branchTitle, [NSMutableString stringWithFormat:@"%@ node title", branchTitle])]; 
```

Searching here and elsewhere I haven't found an explanation. I read through a number of hits on each error message and various `NSLocalizedString` issues, but nothing that tied them together. What I found about the second error message implied maybe an issue with clang and the number of commas in the statement, indicating that even though the extra comma is within the `NSMutableString` message, it was still being seen as an extra parameter by `NSLocalizedString`. Does that make any sense?

Not important for the question, but the statement is intended to set the localized version of a navigation bar title based on the English version pulled from a dictionary, which varies for different views. The `NSMutableString` portion defines the comment for the localization based on the English title.

EDIT: After resolving this issue per the accepted answer, below, I noticed another related issue. The declaration of `localString` was producing an `"Unused variable"` compiler warning, though it was clearly being used. This is also due to it being within a C-macro and for completeness, I'm adding a link to a relevant post here about suppressing that warning: [How can I get rid of an “unused variable” warning in Xcode](https://stackoverflow.com/questions/5451123/how-can-i-get-rid-of-an-unused-variable-warning-in-xcode/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T17:36:16.977

我相信这是糟糕的 C 宏扩展的结果。事实上，如果你写：

```
NSLocalizedString(branchTitle, ([NSString stringWithFormat:@"%@ node title", branchTitle])); 
```

这将编译。由于某种原因，预处理器不能很好地处理其中的文本`[]`（可能是因为它不知道 Objective-C 调用）并将其中的所有元素`[]`视为单独的参数：

```
#define NSLocalizedString(key, comment) \
    [[NSBundle mainBundle] localizedStringForKey:(key) value:@"" table:nil] 
```

PS：当我写了糟糕的 C 宏扩展时，我的意思[是](http://gcc.gnu.org/onlinedocs/cppinternals/Macro-Expansion.html)：

> 宏扩展是一个棘手的操作，充满了令人讨厌的极端情况和情况，这些情况会使您认为优化预处理器扩展算法的方式非常微妙，但这种方式非常微妙。

# linq-to-entities - LINQ - left outer join - a better way

> ID：14384721
> 
> 赞同：0
> 
> 时间：2013-01-17T17:28:38.160
> 
> 标签：linq-to-entities

I have 2 tables that I need to get data from...Rooms and Address. The Rooms table has an AddressID field in it but it can be null, so the relationship is 0 to 1\. I've been trying to write a LINQ statement that will return a specific Room AND the Address information if it exists. My model is defined as so:

```
public partial class Room
{
    public Room()
    {
        this.Address = new HashSet<Address>();
    }

    public int RoomID { get; set; }
    public Nullable<int> AddressID { get; set; }
    public string Comments { get; set; }
    public string Notes { get; set; }

    public virtual ICollection<Address> Address { get; set; }
} 
```

I tried to use the .Include("Address") on the linq statement but it didn't work and I believe it's caused by the Join statement (which I read, once it's used, it silently drops the Include).

Here's an ugly way around it but I know there's a better way:

```
var csdDB = new CSDContext(CustomerCode);

IList<Room> rooms = (from r in csdDB.Rooms
                        join sr in csdDB.SiteRooms
                            on r.RoomID equals sr.RoomID
                        where sr.SiteID == id
                        orderby r.RoomName
                        select r).ToList<Room>();

int? addressID = rooms.FirstOrDefault<Room>().AddressID;

if (addressID != null)
{
    IList<Address> address = (from a in csdDB.Addresses
                                where a.AddressID == addressID
                                select a).ToList<Address>();

    rooms.FirstOrDefault<Room>().Address = address;
} 
```

I tried to do the filtering directly on the results:

```
IList<Address> address = (from a in csdDB.Addresses
                            where a.AddressID == rooms.FirstOrDefault().AddressID
                            select a).ToList<Address>(); 
```

But it throws an error:

```
Unable to create a constant value of type 'Models.CSD.Room'. Only primitive types or enumeration types are supported in this context. 
```

Any suggestions on how to make this cleaner/better is appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:35:33.997

在 LINQ 中加入左连接可能看起来像这样：

```
var results = (from r in csdDB.Rooms
               join sr in csdDB.SiteRooms
                   on r.RoomID equals sr.RoomID && sr.SiteID equals id
               join addr in csdDB.Addresses
                   on r.AddressID equals addr.AddressID into roomAddrs
               from roomAddr in roomAddrs.DefaultIfEmpty(new Address())
               select new 
               {
                   Room = r,
                   Address = roomAddr
               } 
```

# python - python程序因错误而崩溃

> ID：14384727
> 
> 赞同：0
> 
> 时间：2013-01-17T17:28:53.380
> 
> 标签：python, python-3.2

> **可能重复：**
> [如何阻止命令提示符在 python 中关闭？](https://stackoverflow.com/questions/14142509/how-to-stop-command-prompt-from-closing-in-python)

我正在编写一些基本的脚本，似乎当程序遇到错误时，它就退出了。

可以说我`print()`做错了；而不是在执行时调试和显示错误，它只是退出。

我该如何阻止它？

# ios - iOS setPrimitiveValue

> ID：14384731
> 
> 赞同：3
> 
> 时间：2013-01-17T17:29:16.173
> 
> 标签：ios, objective-c, core-data

在 an 上`NSManagedObject`，如果我调用`setPrimitiveValue`，是否需要将其包装在`{will|did}ChangeValueForKey`语句中，**如果它用于非设置/getter 方法？**

例如，我想要一个方法，它接受一个键（NSString）并增加模型对象上的一个属性的值。

```
-(void) incrementItem:(NSString *)key
{
    NSNumber *value = [self primitiveValueForKey:key];
    int intValue = value.intValue;

    [self setPrimitiveValue:[NSNumber numberWithInt: intValue++] forKey:key];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:31:55.830

在访问原始值（或支持非托管对象的 ivar）时调用您的 KVO 方法应始终完成。因此，您的方法应如下所示：

```
-(void) incrementItem:(NSString *)key
{
    [self willAccessValueForKey:key];
    NSNumber *value = [self primitiveValueForKey:key];
    [self didAccessValueForKey:key];
    int intValue = value.intValue;

    [self willChangeValueForKey:key];
    [self setPrimitiveValue:[NSNumber numberWithInt: intValue++] forKey:key];
    [self didChangeValueForKey:key];
} 
```

# ruby-on-rails - 使用 Active Record 查找连接表

> ID：14384733
> 
> 赞同：5
> 
> 时间：2013-01-17T17:29:22.467
> 
> 标签：ruby-on-rails, rails-activerecord

我有几个与`:has_many => :through`关系相关的模型：

```
class User < ActiveRecord::Base
  has_many :group_members
  has_many :groups, :through => :group_members
end

class Group < ActiveRecord::Base
  has_many :group_members
  has_many :users, :through => :group_members
end

class GroupMembers < ActiveRecord::Base
  belongs_to :group
  belongs_to :user
end 
```

使用 ActiveRecord 很容易找到组和用户之间的关系：

```
groups = @user.groups
users = @group.users 
```

但是如果我想找到一个组和一个用户共享的连接表呢？现在我能想到的最好的解决方案是使用类方法。例如，在用户模型中，我有：

```
def group_member_for(group)
    self.group_members.where(:group_id => group.id).first
end 
```

这很好用，但我怀疑有一种更清洁的方法。甚至可能是一种直接使用 ActiveRecord 关联的方法。就像是：

```
group_member = @user.groups.group_member 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T17:31:17.043

您可以简单地执行以下操作：

```
user.group_members
# and
group.group_members
# or
GroupMember.where(user_id: user.id, group_id: group.id) 
```

# javascript - Javascript：如何让这个脚本中的 split() 函数工作

> ID：14384734
> 
> 赞同：0
> 
> 时间：2013-01-17T17:29:24.837
> 
> 标签：javascript, arrays

有人可以帮我解决这个问题吗？

我从另一个程序员那里得到了这个功能：

```
function checkRequired(fieldList) {
    var field = null;
    var blankFields = [];
    for (var i = 0; i < fieldList.length; i++) {
        listItem = fieldList[i].split;
        fieldId = field[0];
        label = field[1];
        field = document.getElementById(fieldList[i].split("||")[0]);
        if (isVisible(field) && isBlank(field)) {
            blankFields[blankFields.length] = fieldList[i].split[1];
        }
    } 
```

我将这个 json 数组传递给它：

```
var fieldList = new Array("'15||Project Requested By'","'18||Project Title'","'20||Banner Details'","'202||Flyer Details'","'2134||If Gl Code Not above'","'5862||Quantity'"); 
```

使用 FB 我看到函数在这一行出错了`[listItem = fieldList[i].split;]`

我不完全了解 .split 正在做什么以及它引起的问题。

任何帮助，将不胜感激。

更新：添加了显示错误发生位置的图像： ![在此处输入图像描述](../Images/04e95900e6dd8698402cc23d15040631.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:30:57.360

You need to provide `split` with a parameter that tells it what to split on.

Right now, you're simply assigning the `split` function itself to `listItem`; you're not calling it.

You probably mean

```
listItem = fieldList[i].split("||"); 
```

[MDN Docs for split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)

## EDIT

On further inspection, you're not assigning anything to `field`, so it's equal to `null` at the point that you try to access it like an array. Thus, what you *probably* mean is:

```
 field = fieldList[i].split("||"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:52:52.263

我的猜测是函数应该是这样的：

```
function checkRequired(fieldList) {
    var field = null,
        blankFields = [],
        listText, listItem, fieldId, label;

    for (var i = 0; i < fieldList.length; i++) {
        listText = fieldList[i];
        listText = listText.substring(1, listText.length - 1); // trim ' (single quote)
        listItem = listText.split("||");
        fieldId = listItem[0];
        label = listItem[1];
        field = document.getElementById(fieldId);

        if (isVisible(field) && isBlank(field)) {
            blankFields.push(label);
        }
    }

    return blankFields;
} 
```

假设 isVisible() 和 isBlank() 在某处定义。

# elasticsearch - Elasticsearch-获取给定字段的所有值？

> ID：14384736
> 
> 赞同：54
> 
> 时间：2013-01-17T17:29:30.310
> 
> 标签：elasticsearch

是否可以查询特定字段的所有值？假设我有“文章”并且每篇文章都有一个作者，是否可以执行查询来查找所有作者的列表？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2017-03-29T14:48:08.017

> # **如何获取字段的所有可能值`author`？**

```
curl -XGET  http://localhost:9200/articles/_search?pretty -d '
{
    "aggs" : {
        "whatever_you_like_here" : {
            "terms" : { "field" : "author", "size":10000 }
        }
    },
    "size" : 0
}' 
```

笔记

*   `"size":10000`最多获取 10000 个唯一值。默认值为 10。

*   `"size":0`默认情况下，`"hits"`包含 10 个文档。我们不需要它们。

*   默认情况下，存储桶按`doc_count`降序排列。

* * *

参考：[桶词聚合](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html)

另请注意，根据[此页面](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-facets.html)，在 Elasticsearch 1.0 中，构面已被聚合取代，这是构面的超集。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-17T20:15:40.437

我认为您想要的是多面搜索。从文档中查看此示例：

[http://www.elasticsearch.org/guide/reference/api/search/facets/index.html](http://www.elasticsearch.org/guide/reference/api/search/facets/index.html)

```
curl -X POST "http://localhost:9200/articles/_search?pretty=true" -d '
  {
    "query" : { "query_string" : {"query" : "*"} },
    "facets" : {
      "tags" : { "terms" : {"field" : "author"} }
    }
  }
' 
```

看看你是否可以定制它来为你工作。

希望这会有所帮助，马特

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-19T09:44:23.657

另一个例子

要求

```
curl -X POST "http://localhost:9200/_search?pretty=true" -d '
{
  "facets" : {
    "tags" : { "terms" : {"field" : "network.platform"} },
    "size" : 60
  },
  "size" : 0
}
' 
```

回复

```
{
  "took" : 266,
  "timed_out" : false,
  "_shards" : {
    "total" : 650,
    "successful" : 650,
    "failed" : 0
  },
  "hits" : {
    "total" : 41,
    "max_score" : 0.0,
    "hits" : [ ]
  },
  "facets" : {
    "tags" : {
      "_type" : "terms",
      "missing" : 15,
      "total" : 26,
      "other" : 0,
      "terms" : [ {
        "term" : "platform name 1",
        "count" : 20
      }, {
        "term" : "platform name 2",
        "count" : 6
      } ]
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-24T11:08:05.890

检查现有字段值的最快方法：

```
GET myindex/mytype/<id>/_termvectors?fields=Product.Material.Code 
```

*   `myindex`= 索引
*   `mytype`= 类型
*   `<id>`= 文档 ID

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-30T14:41:40.327

您没有提到 Elasticsearch 版本，但对于 ES 1.6，首选方法是使用聚合。这是我使用的示例。

--获取所有的STATUS值，这是一个嵌套查询。

```
GET path for data/_search?size=200
{
  "aggs": {
    "something": {
      "nested": {
        "path": "NESTED_PATH"
      },
      "aggs": {
        "somethingCodes": {
          "terms": {
            "field": "NESTED_PATH.STATUS",
            "size": 50
          }
        }
      }
    }
  }
} 
```

和一个示例响应：

```
"aggregations": {
      "panels": {
         "doc_count": 5029693,
         "panelCodes": {
            "doc_count_error_upper_bound": 0,
            "sum_other_doc_count": 0,
            "buckets": [
               {
                  "key": "M",
                  "doc_count": 1943107
               },
               {
                  "key": "W",
                  "doc_count": 137904
               },
               {
                  "key": "E",
                  "doc_count": 69080
               },
               {
                  "key": "Y",
                  "doc_count": 4081
               },
               {
                  "key": "N",
                  "doc_count": 1063
               },
               {
                  "key": "T",
                  "doc_count": 483
               },
               {
                  "key": "",
                  "doc_count": 1
               }
            ]
         }
      }
   } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-07T10:57:01.540

我认为最佳方法是使用**弹性搜索聚合** [https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html)

```
GET {index}/{type}/_search
{
  "size": 0, <-- to not display search hits
  "aggs": {
    "{aggregation_name}": {
      "terms": {
        "field": "{filed_value}",
        "size": 10
      }
    }
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-20T10:33:27.927

请使用以下代码从索引中的所有内容中仅获取“文章”字段值的列表。

curl ' [http://localhost:9200/my_index/_search?pretty=true&_source=articles](http://localhost:9200/my_index/_search?pretty=true&_source=articles) '

它肯定会帮助你。

# javascript - 同时提交表单和调用函数

> ID：14384738
> 
> 赞同：0
> 
> 时间：2013-01-17T17:29:38.983
> 
> 标签：javascript, html

提交表单时可以同时执行两个操作吗？

这是我的例子：

```
<input type="checkbox" name="setM"  id="m"  value="1" onClick="this.form.submit();setM();" /> 
```

还有另一种方法可以提交表单并同时处理功能吗？当我提交表单时，我做了一些处理，然后我处理了 setM。所以我需要提交将是第一个。

**编辑**

```
<script type="text/javascript">
function DoAllThese() {
    One();
    Two();
    Three();
    Four();} 
```

我可以调用这个函数，然后一个会做 setM 函数，两个会提交具体的表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:52:58.447

除非您使用 AJAX，否则您运行的任何提交后行为都不会对页面产生任何影响，因为该页面将被表单发布的结果替换。如果您在提交表单后确实使用了 AJAX，即使在最好的情况下，您也会在提交后操作的效果和预期加载新页面而卸载的页面之间存在一些竞争条件。

由于您的问题实际上无法确定您要做什么，因此我将仅提供一些一般性指导。

1.  在提交表单之前运行任何可能影响表单提交的操作，然后仅在这些操作完成后提交表单。如果表单提交以成功完成功能为条件，请确保在默认操作（表单提交）失败时阻止它们。

2.  如果您想根据表单提交的结果影响当前页面，请使用 AJAX 并完全通过 JavaScript 处理表单提交，其函数依赖于在 AJAX 成功回调中运行的表单发布（或者如果您使用 200 OK 响应） '正在手动处理 AJAX）。

3.  不要在标记中应用你的行为，而是通过使用 JavaScript 将处理程序附加到元素。这将有助于使您的 JavaScript 代码易于理解，因为这些行为将在您的代码中本地化，而不是分散在整个文档中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T21:02:49.547

正如其他两个人以非常漂亮的方式解释的那样，我还说使用 ajax 提交表单可以实现您想要做的事情。

```
<form>

<button onclick="ajaxsubmit()">Submit</button>
</form> 
```

你的阿贾克斯：

```
function ajaxsubmit(){
   // do your other functions
$.ajax({
    // ajax send
 }).done(function(){
    // submitted successfully
 });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T18:22:36.450

**HTML**

```
<form name="myform" action="test.html" onsubmit="verify()">
    <!-- FIELDS -->
</form> 
```

**Javascript**

```
function verify()
{
    One();
    Two();
    Three();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T17:33:27.957

当您提交表单时，浏览器会离开页面，因此您描述的“过程”可能是服务器端的。

您不能通过浏览器刚刚离开的页面上的事件处理程序使 JavaScript 在*下一页上运行。*

您需要：

*   使用 XMLHttpRequest (Ajax) 提交数据
*   让下一页包含您要运行的 JS

# python - 如何将后台线程添加到烧瓶？

> ID：14384739
> 
> 赞同：95
> 
> 时间：2013-01-17T17:29:40.477
> 
> 标签：python, rest, flask

我正忙着写一个小型游戏服务器来尝试烧瓶。游戏通过 REST 向用户公开一个 API。用户执行操作和查询数据很容易，但是我想为循环`"game world"`外部提供服务`app.run()`以更新游戏实体等。鉴于 Flask 实现得如此干净，我想看看是否有 Flask 方法可以做这个。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2014-04-06T21:27:07.707

您的附加线程必须从 WSGI 服务器调用的同一个应用程序启动。

下面的示例创建了一个后台线程，该线程每 5 秒执行一次，并操作也可用于 Flask 路由函数的数据结构。

```
import threading
import atexit
from flask import Flask

POOL_TIME = 5 #Seconds

# variables that are accessible from anywhere
commonDataStruct = {}
# lock to control access to variable
dataLock = threading.Lock()
# thread handler
yourThread = threading.Thread()

def create_app():
    app = Flask(__name__)

    def interrupt():
        global yourThread
        yourThread.cancel()

    def doStuff():
        global commonDataStruct
        global yourThread
        with dataLock:
            pass
            # Do your stuff with commonDataStruct Here

        # Set the next thread to happen
        yourThread = threading.Timer(POOL_TIME, doStuff, ())
        yourThread.start()   

    def doStuffStart():
        # Do initialisation stuff here
        global yourThread
        # Create your thread
        yourThread = threading.Timer(POOL_TIME, doStuff, ())
        yourThread.start()

    # Initiate
    doStuffStart()
    # When you kill Flask (SIGTERM), clear the trigger for the next thread
    atexit.register(interrupt)
    return app

app = create_app() 
```

从 Gunicorn 调用它，如下所示：

```
gunicorn -b 0.0.0.0:5000 --log-config log.conf --pid=app.pid myfile:app 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-07-19T04:18:49.060

除了使用纯线程或 Celery 队列（请注意，不再需要 flask-celery），您还可以查看 flask-apscheduler：

[https://github.com/viniciuschiele/flask-apscheduler](https://github.com/viniciuschiele/flask-apscheduler)

从[https://github.com/viniciuschiele/flask-apscheduler/blob/master/examples/jobs.py](https://github.com/viniciuschiele/flask-apscheduler/blob/master/examples/jobs.py)复制的一个简单示例：

```
from flask import Flask
from flask_apscheduler import APScheduler

class Config(object):
    JOBS = [
        {
            'id': 'job1',
            'func': 'jobs:job1',
            'args': (1, 2),
            'trigger': 'interval',
            'seconds': 10
        }
    ]

    SCHEDULER_API_ENABLED = True

def job1(a, b):
    print(str(a) + ' ' + str(b))

if __name__ == '__main__':
    app = Flask(__name__)
    app.config.from_object(Config())

    scheduler = APScheduler()
    # it is also possible to enable the API directly
    # scheduler.api_enabled = True
    scheduler.init_app(app)
    scheduler.start()

    app.run() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-08T11:38:33.353

首先，您应该使用任何 WebSocket 或轮询机制来通知前端部分发生的更改。我使用包装器，并且对我的小应用程序的*异步消息传递*`Flask-SocketIO`非常满意。

 *Nest，您可以在单独的线程中执行您需要的所有逻辑，并通过`SocketIO`对象通知前端（Flask 与每个前端客户端保持持续的开放连接）。

例如，我刚刚在后端文件修改时实现了页面重新加载：

```
<!doctype html>
<script>
    sio = io()

    sio.on('reload',(info)=>{
        console.log(['sio','reload',info])
        document.location.reload()
    })
</script> 
```

```
class App(Web, Module):

    def __init__(self, V):
        ## flask module instance
        self.flask = flask
        ## wrapped application instance
        self.app = flask.Flask(self.value)
        self.app.config['SECRET_KEY'] = config.SECRET_KEY
        ## `flask-socketio`
        self.sio = SocketIO(self.app)
        self.watchfiles()

    ## inotify reload files after change via `sio(reload)``
    def watchfiles(self):
        from watchdog.observers import Observer
        from watchdog.events import FileSystemEventHandler
        class Handler(FileSystemEventHandler):
            def __init__(self,sio):
                super().__init__()
                self.sio = sio
            def on_modified(self, event):
                print([self.on_modified,self,event])
                self.sio.emit('reload',[event.src_path,event.event_type,event.is_directory])
        self.observer = Observer()
        self.observer.schedule(Handler(self.sio),path='static',recursive=True)
        self.observer.schedule(Handler(self.sio),path='templates',recursive=True)
        self.observer.start() 
```*

# algorithm - 多边形内多边形内多边形

> ID：14384752
> 
> 赞同：14
> 
> 时间：2013-01-17T17:30:09.310
> 
> 标签：algorithm, geometry, polygon, computational-geometry

我有许多不相交的简单多边形，但有些多边形可能嵌入到其他多边形中。

例如：

```
+--------------------------------------------+
|                                            |
|   +----------------+          +--------+   |
|   |                |         /         |   |
|   |   +--------+   |        /          |   |
|   |   |        |   |       /  +----(2)-+   |
|   |   |        |   |      /   |            |
|   |   +----(3)-+   |     /    |   +---+    |
|   |                |    +-----+   |   |    |
|   +------------(2)-+              +(2)+    |
|                                            |
+----------------------------------------(1)-+ 
```

如何找出所有多边形的“深度”？换句话说，如何找出一个多边形被多少个多边形包围？“深度”是括号中的数字。

我可以计算一个多边形的一个点在所有其他多边形内的次数，但这具有二次复杂性。如何更快地计算这些深度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T00:46:35.900

将多边形放入某种[空间查找结构](http://en.wikipedia.org/wiki/Spatial_database)中，例如基于多边形最小边界矩形的[R 树。](http://en.wikipedia.org/wiki/R-tree)然后你应该能够计算出你在 O( *n* log *n* ) 中所追求的包含关系。（除非您处于病态情况下，多边形的许多最小边界矩形重叠，根据您的描述，这似乎不太可能。）

编辑添加：当然，你不依赖R树来告诉你一个多边形是否在另一个多边形内（它基于最小边界矩形，所以它只能给你一个近似值）。您可以使用 R-tree 廉价地识别*候选包含物*，然后以昂贵的方式验证这些包含物（检查一个多边形中的一个点是否在另一个多边形内）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-27T15:00:38.693

在您的示例中，您描述了一个非凸多边形，因此其他人建议的 rtree 方法本身不会有效。但是您可以将其与额外的检查相结合，以查看多边形的顶点是否在另一个顶点内，只要您找到与 rtree 方法的匹配项。这将减少您必须执行“多边形中的点”检查的次数。

另一种方法是采用您的第一个想法 - 即检查每个多边形的顶点与每个其他多边形 - 并对其进行修改以缓存您已经计算的结果并重用它们以降低时间复杂度。下面描述的方法本质上是从多边形本身构建树结构，而不是使用 rtree。它本质上是一种不同的树结构，它尊重非凸多边形。

1.  最初，每个多边形都是一个根节点，并且在它自己的树中。
2.  您必须遍历您的一组根节点并使用“多边形中的点”测试检查它是否在另一个根节点内。
3.  当您找到匹配项时，从根节点集中删除较小的多边形并将其作为子节点添加到较大的多边形中。您开始构建一个有意义的树结构，并且您还减少了您正在迭代的容器（根节点）的大小，因此未来的迭代会更快。
4.  继续此操作，直到根节点的数量停止变化。
5.  请记住，在主嵌套循环中，您仅比较一个根节点是否在另一个根节点内。当您找到匹配项（大节点中的小节点）时，您可以跳过较小节点的子树。但是您必须遍历较大节点的子树并进行检查以找到层次结构中较小节点的正确位置。但是与具有二次复杂度的简单嵌套循环相比，您仍然避免了很多检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T21:44:47.467

在我看来，您可以使用测试一个是否在另一个内部作为比较运算符来对多边形进行排序。

# 步骤1

假设我们定义多边形之间的关系“<”如下：A < B 且当 A 在 B 内。碰巧如果 A < B 且 B < C，则 A < C（即如果多边形 A 在 B 内且 B 在在 C 内部，那么 A 必须在 C 内部）。现在，我们在任意多边形之间有一个严格的弱排序。

[编辑：您需要使用某种点内非凸多边形测试，但大概您已经这样做了。]

# 第2步

使用您最喜欢的基于比较的排序算法根据此比较对多边形进行排序。例如，归并排序的最坏情况时间复杂度为 O(nlogn) 比较，其中 n 是多边形的数量。

[编辑：这是重要的一步，因为它摆脱了二次复杂性。]

# 第 3 步

确保“最大”（即最外层）元素首先出现在已排序的多边形数组中。（如有必要，请反转列表以实现此目的 - 它与多边形数量成线性关系）。

# 第4步

现在“最大”（即最外层）多边形应该是第一个元素。

[编辑：事实上，多边形已经根据它们的深度进行了排序。但是，具有相同深度的两个多边形可能会以不同的顺序出现，具体取决于排序是否稳定。这对我们来说无关紧要；我们感兴趣的是深度的**变化**。]

我们现在将为每个多边形分配一个深度，如下所示。首先，将每个1的深度初始化为0（[编辑：根据示例初始化为1]）。接下来，遍历您的排序列表，但这次仅将每个元素 p 与下一个元素 p+1 进行比较。如果 (p+1 < p) 为真，则增加 p+1 的深度。否则，将 p+1 的深度设置为与 p 的深度相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-27T21:00:41.923

第 1 步：将多边形定向在同一方向，例如逆时针方向。

第 2 步：对于需要计算“深度”以计算总绕组数的任何点 (x, y)。这可以通过多种方式完成；实践中最快的方法是计算源自 (x, y) 的水平（或垂直）射线之间的交点的 SIGNED 数量。

特别是，每个多边形的深度将是它的任何顶点的深度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T14:17:02.220

（这种方法遵循与@GarethRees 类似的想法：首先，廉价地发现哪些多边形对不需要检查是否包含。一旦仍然需要检查的对数是可以接受的，就做精确的（昂贵的）几何查看。）

很容易计算每个多边形 p 的边界矩形，即左、右、上和下，所以让我们先这样做。例如左侧：`p.L = min { x : (x,y) is a vertex of p }`时间与点数成线性关系。

为避免将每个多边形相互比较，您可以将该区域划分为 2x2 网格。假设区域的宽度和高度分别由`Dx`和给出`Dy`，那么您可以创建九个集合`top,bottom,left,right,topright,topleft,bottomright,bottomleft,rest`并执行以下操作：

```
for p in polygons:
    in_top    = p.B > Dy/2
    in_bottom = p.T < Dy/2
    in_left   = p.R < Dx/2
    in_right  = p.L > Dx/2 
    if in_top:
        if in_left:
            add p to topleft
        elsif in_right:
            add p to topright
        else:
            add p to top
    elsif in_bottom:
        if in_left:
            add p to bottomleft
        elsif in_right:
            add p to bottomright
        else:
            add p to bottom

    if in_right and not (in_top or in_bottom):
        add p to right
    elsif in_left and not (in_top or in_bottom):
        add p to left

    if not (in_top or in_bottom or in_left or in_right):
        add p to rest 
```

这又是线性时间。每个多边形都被分箱到其最“紧密”的包含扇区中。你从中得到了什么？好吧，例如，您知道对于其中的任何多边形`p`，`left`都不可能与 set 存在任何包含关系`right`，因此您无需比较它们。`bottomleft`与`right`、`bottomleft`和之间`topleft`也是如此，依此类推。这是您的示例中的样子：

```
 Dx/2
+----------------------|---------------------+
|                      |                     |
|   +----------------+ |        +--------+   |
|   |                | |       /         |   |
|   |   +--------+   | |      /          |   |
|___|___|________|___|_|____ /__+===d(2)=+___|_ Dy/2
|   |   |        |   | |    /   |            |
|   |   +---b(3)-+   | |   /    |   +---+    |
|   |                | |  +-----+   |   |    |
|   +-----------c(2)-+ |            e(2)+    |
|                      |                     |
+----------------------|----------------a(1)-+ 
```

所以`rest = {a}, top = {}, bottom = {}, left = {b,c}, right = {d}`

`topleft = {}, topright = {}, bottomleft = {}, bottomright = {e}`

所以基本上现在你最多需要比较（用昂贵的精确支票）`b`to `c`，`d`to`e`和`a`所有其他人——事实上，如果你以聪明的方式订购支票，你就不需要与`a`所有其他人比较，因为包含是传递性的，所以如果你注意到`c`包含`b`和`a`包含`c`，那么你不需要检查是否`a`包含`b`。

另一点是您可以递归地应用上述推理。比如说套装`topright`太大了，不适合你的口味；然后，您可以通过进一步划分该子区域来应用相同的技术（只需要正确记账）。

# jquery - 能够聚焦但不能使用jquery在输入框中输入

> ID：14384753
> 
> 赞同：0
> 
> 时间：2013-01-17T17:30:11.360
> 
> 标签：jquery, forms, textinput

基本上我有一系列 5 行文本框（每行包含 3 列）和单个文本区域...在 column3 末尾的标签应该把它带到文本区域，然后从文本区域标签应该把我带到下一行输入/文本框。

下面的代码可以在 row1 中使用标签，将我从 row1 col3 带到 textarea_desc，然后在 textarea_desc 上标签将焦点转移到 row2 col1 但是我看不到光标出现在 row2 col1 ...如果我添加了 css 它是 hsows在 row2 col1 中，但没有光标，所以我无法输入文本我必须单击 row2 col1 才能出现光标，有人可以告诉我为什么吗？

```
 $('input[type="text"],textarea').on('focusout',  function() {
        var box_class=$(this).attr("class");
        var row_id=$(this).parents('ul').attr('id');    

        if (box_class.indexOf("col3")>=0) {
            $("#textarea_desc").focus();
            $("#prev_row").val(row_id);
        }
        if (box_class.indexOf("textarea_desc")>=0) {
            var prev_row=$("#prev_row").val();

            var new_row=$("#prev_row").val().match(/\d+/);
            new_row="#row"+(parseInt(new_row)+1)+"-col1";

            $(new_row).focus();

        }

    }); 
```

..html

```
 <ul id="row1" class="row">
                    <li class="col1" >1.</li>
                    <li class="col2"><input type="text" size="26" class="row1-col1" id="row1-col1" /></li>
                    <li class="col3"><textarea cols="28" rows="1"  class="row1-col2  textareainp" id="row1-col2" ></textarea></li>
                    <li class="col4"><input type="text" size="10" class="row1-col3 " id="row1-col3" /></li>
                </ul><ul id="row2" class="row">
                    <li class="col1" >2.</li>
                    <li class="col2"><input type="text" size="26" class="row2-col1" id="row2-col1" /></li>
                    <li class="col3"><textarea cols="28" rows="1"  class="row2-col2  textareainp" id="row2-col2" ></textarea></li>
                    <li class="col4"><input type="text" size="10" class="row2-col3 " id="row2-col3" /></li>
                </ul>
<textarea cols="40" rows="7"  class="textarea_desc" id="textarea_desc" ></textarea>
<input type="hidden" id="prev_row" class="prev_row" value="" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:37:09.730

这是因为事件`focusout`正在发生，`TAB`并且`TAB`事件将自动将焦点放在下一个元素上。你需要抓住`TAB`钥匙，然后使用这样的东西：

```
$("*:focus") 
```

这将为您提供当前的焦点元素。在你的函数中使用它。

另外，你需要这样称呼：

```
event.preventDefault() 
```

工作代码：

```
$(document).on("keydown", function(event) {
    switch (event.keyCode) {
        case 9: // TAB
            event.preventDefault(); // Stop from changing focus

            $this = $("*:focus");

            var box_class=$this.attr("class");
            var row_id=$this.parents('ul').attr('id');    

            if (box_class.indexOf("col3")>=0) {
                $("#textarea_desc").focus();
                $("#prev_row").val(row_id);
            }
            if (box_class.indexOf("textarea_desc")>=0) {
                var prev_row=$("#prev_row").val();

                var new_row=$("#prev_row").val().match(/\d+/);
                new_row="#row"+(parseInt(new_row)+1)+"-col1";

                $(new_row).focus();
            }
            break;
    }
}); 
```

# html - 为什么我的 不居中或向左浮动？

> ID：14384754
> 
> 赞同：0
> 
> 时间：2013-01-17T17:30:14.683
> 
> 标签：html, css

为什么我的列表没有向左浮动，为什么它向 RHS 显示额外的空白？

这是我的 HTML：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Someone</title>
    <link href='http://fonts.googleapis.com/css?family=La+Belle+Aurore' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="homeStyle.css" media="all">
</head>
<body>
    <ul class="homeButtons">
        <li><a href="http://www.google.com">Me</a></li>
        <li>My Work</li>
        <li>My hobbies</li>
        <li>Contact Me</li>
        <li>Blog</li>
    </ul>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="homeScript.js"></script>
</body>
</html> 
```

这是相应的 CSS：

```
body {
   /*background-image: url("http://good-wallpapers.com/pictures/1737/ubuntu_prettified_background.png");*/
    /*position: fixed;*/
    height: 9em;
    width: 16em;
    position: fixed;
    margin: 0;
    padding: 0;
}

ul.homeButtons {
    position: relative;
    margin: 0 auto;
    width: 16em;

}

ul.homeButtons li {
    position: relative;
    font-family: 'La Belle Aurore', cursive;
    font-size: 2.5em;
    font-weight: inherit;

    list-style: none;
    width: 200px;
    height: 100px;
    margin: 1px;

    float: left;
    clear: none;
    color: white;
    background: #1e90ff;
    text-align: center;
    line-height: 100px;
    /*border-radius: 2px;*/
    opacity: 0.5;

    -webkit-transition: all .4s;
}

ul.homeButtons li:hover {
    font-size: 2.7em;

    box-shadow:
        0 0 0 20px #1e90ff,
        0 0 20px 24px #d3d3d3;
    opacity: 1;
    cursor: pointer;
}

ul.homeButtons li a {
    color: inherit;
    text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:56:49.283

您右侧的额外空白`ul`来自大多数浏览器放在列表中的默认填充。你可以设置`ul { padding: 0; }`来摆脱它。

考虑删除所有的`position: relative;`和`width`规范——在这个例子中它们似乎没有必要

仅供参考，有许多重置样式表可以很好地删除浏览器的默认样式。

# hibernate - Hibernate 无法初始化代理 - 没有会话：LCDS 在所有集合上引发延迟加载

> ID：14384756
> 
> 赞同：0
> 
> 时间：2013-01-17T17:30:16.890
> 
> 标签：hibernate, apache-flex, lcds

AMF Servlet 中正在发生一些肮脏的事情......

我调用了一个 DAO 方法，该方法用于通过从 java 到 flex 的远程对象检索没有任何子级的 DTO 列表：

```
public List<NivelesPlantillasDto> getList()throws HibernateException{
        logger.info("getList()");
        List<NivelesPlantillasDto> list = new ArrayList<NivelesPlantillasDto>();
        Session session = null;
        try{
            session = SessionFactory.getInstance().openSession();
            list=(List<NivelesPlantillasDto>)session.createQuery("from NivelesPlantillasDto").list();
        }catch(HibernateException HE){
            logger.info(HE.getMessage(),HE);
            if (session!=null && session.isConnected())
                session.close();
            throw HE;
        }
        if (session.isConnected())
            session.close();
        return list;
    } 
```

这是 hbm.xml

```
<hibernate-mapping>
    <class name="architecture.dto.NivelesPlantillasDto" table="nivelesplantillas">
        <id name="pkNivelPlantilla" type="int">
            <column name="PKNIVELPLANTILLA" />
            <generator class="identity" />
        </id>
        <property name="plantilla" type="java.lang.String">
            <column name="PLANTILLA" />
        </property>
        <set name="habilidadesList" table="habilidades" inverse="true" lazy="true">
            <key foreign-key="FKNIVELESPLANTILLAS" not-null="true">
                <column name="FKNIVELESPLANTILLAS" sql-type="int"/>
            </key>
            <one-to-many class="architecture.dto.HabilidadesDto"/>
        </set>
        <set name="nivelesList" table="niveles" inverse="true" cascade="merge,delete-orphan" order-by="indice" lazy="true">
            <key foreign-key="FKNIVELESPLANTILLAS" not-null="true">
                <column name="FKNIVELESPLANTILLAS" sql-type="int"/>
            </key>
            <one-to-many class="architecture.dto.NivelesDto"/>
        </set>
        <property name="activo" type="boolean">
            <column name="ACTIVO" />
        </property>
    </class>
</hibernate-mapping> 
```

关闭会话后出现此错误，因为当对象在 AMF Servlet 上反序列化时，Hibernate 尝试加载此类的所有子级，我可以通过保持会话打开来查看每个子级的查询。因此，有 2 个修复程序可以消除此错误，一个是设置`lazy="false"`一对多关系，第二个是让会话保持打开状态，直到 AMF 完成加载所有子项，但这不是我想要的。为什么我被迫加载每个孩子？

编辑：好的，我只是以一种丑陋的方式解决了这个问题......我对检索到的列表进行了克隆，所以当这个列表被反序列化时，它不会触发任何 Hibernate 查询。有没有办法告诉 LCDS 哪些集合被延迟加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T06:00:57.817

好的，我想我现在明白了。显然，当你在延迟加载的集合上执行 list.size() 时，休眠会加载所有子项，并且由于集合不为空，我最好的猜测是 AMF Servlet 检查集合是否为空，然后检查大小在某些时候为 0，触发集合的完整加载。所以快速解决方法是遍历每个引用以查找惰性集合并将它们设置为 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:53:20.120

> 有没有办法告诉 LCDS 哪些集合被延迟加载？

从来没听说过。我认为您应该考虑实施“[在视图中打开会话](https://community.jboss.org/wiki/OpenSessionInView)”模式——您的模式是一个合适的用例。

**更新**

根据OP提供的“答案”，我想指出可能有更好的延迟加载和`size`操作方法。**Hibernate 支持额外的惰性集合**，它只对数据库发出一条`select count(...`语句，而不是加载整个集合，如果你只需要获取它的大小。只需添加此注释：

```
@LazyCollection(LazyCollectionOption.EXTRA) 
```

有关详细信息，请参阅[http://www.frightanic.com/2010/11/21/extra-lazy-one-to-many-mapping-with-hibernate/](http://www.frightanic.com/2010/11/21/extra-lazy-one-to-many-mapping-with-hibernate/)。

# java - 流程图生成器软件文件扩展名

> ID：14384761
> 
> 赞同：0
> 
> 时间：2013-01-17T17:30:30.913
> 
> 标签：java, swing, flowchart

我正在制作流程图生成器软件。现在，我想添加一个功能，以便用户可以将流程图保存为 jpg 或 pdf 以外的可编辑文件格式。

我应该使用哪种文件格式，以便用户可以随时编辑流程图？？？

另外，我可以为此目的创建自己的文件扩展名吗？

是否可以使用 JGraphx 库？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:57:16.183

如果您更喜欢可以作为图像查看的格式，我推荐[Scalable Vector Graphics](https://en.wikipedia.org/wiki/Scalable_Vector_Graphics)。SVG 格式本质上是 XML，定义了某些标签和属性来生成形状、路径、文本等。您还可以包含自己的元数据，以便将文件读回程序中以进行进一步编辑；SVG 图像也可以使用[Inkscape](http://inkscape.org/)和其他图形程序进行编辑，或者（对于足够高级的用户）使用文本编辑器。

规范文件扩展名适用`.svg`于纯文本文档或`.svgz`使用 gzip 算法压缩的 SVG 文档。

JGraphX 似乎[对 SVG 有一些支持](http://jgraph.github.com/mxgraph/java/docs/com/mxgraph/util/mxCellRenderer.html#createSvgDocument%28com.mxgraph.view.mxGraph,%20java.lang.Object%5B%5D,%20double,%20java.awt.Color,%20com.mxgraph.util.mxRectangle%29)，但您可能必须编辑结果和/或编写自己的代码才能保存图形连接信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:52:32.343

> 我应该使用哪种文件格式以便用户可以随时编辑流程图？

这取决于您，但如果您想要一种可以用文本编辑器读取的文件格式，XML 将是一个不错的选择。

> 另外，我可以为此目的创建自己的文件扩展名吗？

是的你可以。有关详细信息，请参阅此[Stack Overflow 答案](https://stackoverflow.com/questions/13920501/how-to-save-a-file-to-a-chosen-directory-with-jfilechooser/13996949#13996949)。

# c# - 将 WCF 异常返回给 Silverlight 客户端的最佳做法是什么？

> ID：14384763
> 
> 赞同：1
> 
> 时间：2013-01-17T17:30:34.307
> 
> 标签：c#, .net, wcf, silverlight, exception

我相信标题说明了我想知道的。在大多数情况下，WCF 服务会返回`NotFound`异常，即使我在服务中处理了异常，它也会返回一些难以理解的**异常**。我想知道是否有任何干净且好的方法可以将确切的 WCF 异常返回给 Silverlight 客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:57:35.967

好的，这是你应该做的：

```
public App()
{
    ...
    this.UnhandledException += this.Application_UnhandledException;
    ...
}

private void Application_UnhandledException(object sender, 
        ApplicationUnhandledExceptionEventArgs e)
{
    if(e.Exception is YourException){
        //show a message box or whatever you need
        e.Handled = true; //if you don't want to propagate
    }
} 
```

**编辑：**

在**WPF中**

```
public App()
{
    this.Dispatcher.UnhandledException += 
        new System.Windows.Threading.DispatcherUnhandledExceptionEventHandler(
            Dispatcher_UnhandledException);
}

void Dispatcher_UnhandledException(object sender, 
    System.Windows.Threading.DispatcherUnhandledExceptionEventArgs e)
{
    if(e.Exception is YourException){
        //show a message box or whatever you need
        e.Handled = true; //if you don't want to propagate
    }
} 
```

您可以检查错误属性，如下所述：[在 Silverlight 中捕获 WCF 异常的最佳方法？](https://stackoverflow.com/questions/94610/best-way-to-catch-a-wcf-exception-in-silverlight)

或者，您可以在班级中添加`Behavior`一个`ServiceHost`。

```
public ServiceHost(Type t, params Uri[] baseAddresses) :
            base(t, baseAddresses) { }

protected override void OnOpening()
{
    base.OnOpening();

    //adding the extra behavior
    this.Description.Behaviors.Add(new ExceptionManager()); 
```

然后创建一个类，`ExceptionManager`如下所示：

```
public sealed class ExceptionManager : IServiceBehavior, IErrorHandler 
```

然后是一个`ProvideFault`像这样调用的方法：

```
void IErrorHandler.ProvideFault(Exception error, MessageVersion version, 
    ref Message fault)
{
    if (error == null)
        throw new ArgumentNullException("error");

    Fault customFault = new Fault();

    customFault.Message = error.Message

    FaultException<Fault> faultException = new FaultException<Fault>(customFault,
        customFault.Message, new FaultCode("SystemFault"));
    MessageFault messageFault = faultException.CreateMessageFault();
    fault = Message.CreateMessage(version, messageFault, faultException.Action);
} 
```

* * *

## 要使用`ServiceHost`：

创建一个类`ServiceHostFactory`：

```
public class ServiceHostFactory : 
    System.ServiceModel.Activation.ServiceHostFactory
{
    protected override System.ServiceModel.ServiceHost CreateServiceHost(Type t, 
        Uri[] baseAddresses)
    {
        return new ServiceHost(t, baseAddresses);
    }
} 
```

右键单击您的服务，选择`View Markup`并添加标签：

```
Factory="YourNamespace.ServiceHostFactory" 
```

# intuit-partner-platform - Intuit 合作伙伴平台检查错误

> ID：14384768
> 
> 赞同：0
> 
> 时间：2013-01-17T17:30:54.380
> 
> 标签：intuit-partner-platform

我在进行检查时收到此错误：

您必须为每个拆分行选择一个产品/服务或一个帐户，其中包含金额或可计费的 $$customer$$。

这是我的代码：

```
 public void BuildCheckAddRq(Order order)
    {
        if (_qboSettings.MerchantPercent > 0 || _qboSettings.MerchantFee > 0)
        {
            Check newCheck = new Check(); // TODO: Initialize to an appropriate value

            var total = (order.OrderTotal * _qboSettings.MerchantPercent) + _qboSettings.MerchantFee;

            newCheck.Header = new CheckHeader();
            newCheck.Header.TotalAmt = total;
            newCheck.Header.TotalAmtSpecified = true;
            newCheck.Header.TxnDate = System.DateTime.Now;
            newCheck.Header.Note = "Merchant Account Fees";
            newCheck.Header.BankAccountName = _qboSettings.DefaultAccount;
            newCheck.Header.DocNumber = order.Id.ToString();

            newCheck.Header.BankAccountId = new IdType { idDomain = idDomainEnum.QBO, Value = GetAccountId(_qboSettings.DefaultAccount) };
            newCheck.Header.EntityName = _qboSettings.MerchantVendorAcct;
            newCheck.Header.EntityType = EntityTypeEnum.Vendor;
            //newCheck.Header.PayeeAddr = headerEntity.Address[0];
            newCheck.Header.ToBePrinted = _qboSettings.ToBePrinted;

            //ItemService ItemServ = new ItemService();
            //List<Item> findItems = ItemServ.FindAll(Initializer.sessionContext, Initializer.realmId);

            CheckLine checkedLine = new CheckLine();
            checkedLine.Amount = total;
            checkedLine.AmountSpecified = true;
            checkedLine.Desc = "Merchant Account Fees";
            decimal qty = 1;
            checkedLine.ItemsElementName = new ItemsChoiceType1[] { ItemsChoiceType1.ItemId, ItemsChoiceType1.Qty};
            checkedLine.Items = new object[] { new IdType() { idDomain = idDomainEnum.QBO, Value = GetAccountId("Merchant Account Fees")}, qty };
            newCheck.Line = new CheckLine[] { checkedLine };
            try
            {
                Check actualCheck = dataServices.Add<Check>(newCheck);
                ErrorMessageDataSource.Insert(new ErrorMessage(MessageSeverity.Info, "QBO", "Check # " + actualCheck.Header.DocNumber + " synced successfully!"));
            }
            catch (Exception ex)
            {
                ErrorMessageDataSource.Insert(new ErrorMessage(MessageSeverity.Error, "QBO", ex.ToString()));
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:41:16.337

在我看来，您提供了一些无效数据。就像在 QuickBooks GUI 中一样，支票上的每个行项目都需要一个 ACCOUNT 参考或一个 ITEM 参考。因此，错误：

> 您必须为每个拆分行选择一个产品/服务或一个帐户，其中包含金额或可计费的 $$customer$$。

看起来您正在尝试指定对 ITEM 的引用：

```
checkedLine.ItemsElementName = new ItemsChoiceType1[] { ItemsChoiceType1.ItemId, ItemsChoiceType1.Qty};
checkedLine.Items = ... 
```

但是看起来您正在指定一个 ACCOUNT Id 值：

```
new object[] { new IdType() { idDomain = idDomainEnum.QBO, Value = GetAccountId("Merchant Account Fees")}, qty }; 
```

您是否尝试指定对 ITEM 或 ACCOUNT 的引用？

您是否检查了最终生成的 XML？它是什么样子的？它是否符合文档中显示的[内容](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/Check)？

# ruby-on-rails - ActiveRecord::RecordInvalid (Validation failed: Word can't be blank)

> ID：14384774
> 
> 赞同：0
> 
> 时间：2013-01-17T17:31:11.470
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Given this code:

```
class Word < ActiveRecord::Base
  has_and_belongs_to_many :definitions
end

class Definition < ActiveRecord::Base
  has_and_belongs_to_many :word
  validates :word, presence: true
end

mysql> show columns from definitions_words;
+---------------+---------+------+-----+---------+-------+
| Field         | Type    | Null | Key | Default | Extra |
+---------------+---------+------+-----+---------+-------+
| definition_id | int(11) | NO   | PRI | NULL    |       |
| word_id       | int(11) | NO   | PRI | NULL    |       |
+---------------+---------+------+-----+---------+-------+ 
```

When I call:

```
word = Word.first
word.definitions.create! 
```

I get:

```
ActiveRecord::RecordInvalid (Validation failed: Word can't be blank) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:35:49.767

**首先：**您在定义类上的关系是错误的。应该是复数！：字

**第二：**验证也是错误的。它也应该是复数。例如验证：words

这样，它期望名称单词的字段不为空而不是关系。

尝试将您的示例代码更改为：

```
word = Word.first
definition = Definition.new
definition.words = [word]
definition.save 
```

# c# - 从 Windows 8 应用程序在 Windows 资源管理器中打开文件？

> ID：14384778
> 
> 赞同：8
> 
> 时间：2013-01-17T17:31:15.643
> 
> 标签：c#, windows, windows-8

我想编写一个函数，它非常简单地最小化我的 Windows 8 沉浸式应用程序，并在资源管理器中打开一个文件 - 最好是该文件位于包含多个文件的文件夹中，并突出显示该文件。

```
 public async void OpenFile( string filePath)
 {
     StorageFile File = await StorageFile.GetFileFromApplicationUriAsync
                              (new Uri(filePath, UriKind.RelativeOrAbsolute)); ;

     if (File != null)
     {
         await Launcher.LaunchUriAsync(new Uri(File.Path));
     }
 } 
```

这段代码给了我一个权限错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T16:54:46.277

据我记得，MS 不会允许的。该应用程序的设计应该就像它在沙盒中运行一样，具有有限的权限。

> 默认情况下，您可以使用 Windows 应用商店应用访问某些文件系统位置，例如应用安装目录、应用数据位置和下载文件夹。应用程序还可以通过文件选择器或通过声明功能来访问其他位置。

我已经尝试过协议处理程序方法，但被拒绝了两次：D 即使您找到了这样做的方法并且仍然发布，这并不意味着 MS 不会改变主意并将您的应用程序从商店中删除。

就像 Hans Passant 说的：

> 从头开始，您无法完成这项工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T17:24:30.980

> 从我的角度来看，这纯粹是针对内部应用程序

这是您预期方法的核心问题。Windows 应用商店生态系统中没有“内部应用”的概念。让商店应用程序在另一台机器上运行的唯一可能方法是获取只能从商店获得的许可证密钥。

当您在开发机器上开发商店应用程序时，很容易忽略这一点。运行和调试您的应用似乎*不需要*此许可证密钥。但实际上有一个，当 Visual Studio 每月一次用对话框纠缠您重新获取您的开发人员许可证密钥时，您会得到它。这是一个*临时*密钥，只能使用一个月，纯粹是为了给你足够的时间让你的应用程序稳定运行。没有机制可以将该密钥转移到另一台机器或在一个月到期后使其（和程序）保持活动状态。

当然，您仍然可以将内部应用程序发布到应用商店。但是，您将像任何其他商店应用程序一样通过验证程序来审查您的适用性和稳定性。不仅仅是像 WACK 这样的机械测试，还有两个人会在你的应用程序发布之前对其进行测试。当您尝试解决沙盒限制（包括协议处理程序黑客攻击）时，他们会毫不犹豫地拒绝您的应用程序。

*一旦获得批准，任何*Windows 8 用户都可以下载它。包括对您的内部公司机密和做法感兴趣的黑客。也很方便，不用脱睡衣。

在可预见的未来，典型的业务线应用程序仍然是桌面应用程序。

* * *

这个答案需要更新，现在有一种机制可以从专用服务器发布应用程序。这称为*侧载*。该应用程序仍然需要证书，而且成本很高，但可以从私人公司控制的私人服务器而不是 Microsoft Store 服务器部署。

[此处提供了](http://technet.microsoft.com/en-us/windows/jj874388.aspx)概述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T23:59:57.043

对此有特定的API，似乎没有人知道：

```
var success = await Windows.System.Launcher.LaunchFolderAsync(KnownFolders.DocumentsLibrary); 
```

此 API 的更高级形式采用以下选项：

```
FolderLauncherOptions options = new FolderLauncherOptions();
options.ItemsToSelect.Add(file1);
bool success = await Windows.System.Launcher.LaunchFolderAsync(folder, options); 
```

您还可以使用 options.DesiredRemainingView 设置所需的视图。

[https://msdn.microsoft.com/en-us/library/windows/apps/dn889617.aspx](https://msdn.microsoft.com/en-us/library/windows/apps/dn889617.aspx)

# iphone - 未找到模块 cordova/plugin/ios/nativecomm - PhoneGap 2.1 / Sencha 2.0

> ID：14384780
> 
> 赞同：0
> 
> 时间：2013-01-17T17:31:16.740
> 
> 标签：iphone, cordova, sencha-touch-2

我有一个使用 PhoneGap 2.1 和 Sencha Touch 2.0 实现的现有 iPhone 项目。该应用程序在历史上运行完美，但我在再次使用它时遇到了一些问题。

首先，我遇到了 CordovaLib.xcodeproj 的问题，它在项目资源管理器中只是被涂成了红色。[根据这篇博客文章](http://outof.me/embedding-cordovalib-in-your-iosphonegap-app-project/#comment-216)，我通过将 Phonegap-2.1 文件夹中的 CordovaLib 文件夹添加到项目中解决了这个问题。

现在我可以构建和运行应用程序，但它在启动屏幕上冻结。有“多任务->设备：是，应用程序：是”日志输出，仅此而已。甚至来自启动功能：

```
launch: function() {
   console.log("Main controller launch:");
   […]
} 
```

我在 js 文件中放了一个 window.onerror 并得到了这个弹出窗口：

```
ERROR: module cordova/plugin/ios/nativecomm not found
URL: undefined
Linenumber:0 
```

据说，我应该只运行cordova_upgrade_subproject，但这并没有帮助。

为什么找不到 ../nativecomm？我怎样才能找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:50:51.680

好吧，它现在可以工作了。我唯一做的就是在 window.onerror() 函数中放置一个 console.log()，而不仅仅是一个 alert()。这似乎不太可能以任何方式影响应用程序，但无论如何……它有效！

# php - 如何使用 php+html 在 Windows 上提供指向共享网络文件夹的链接？

> ID：14384783
> 
> 赞同：0
> 
> 时间：2013-01-17T17:31:19.223
> 
> 标签：php, html

我已经在我的一台网络计算机上安装了 Apache Server(windows)，比如 machine1 和 MySql 数据库。在其中一个网页中，我提供了一个内部网络路径，例如“\\resultserver\abc\new.txt”，其中“resultserver”是内部网上的另一台机器，比如 machine2。

现在我面临的问题是......当我从任何机器打开网页时，在内网上说机器“X”......上面的链接不起作用。它在 IE 和 Firefox 中充当死链接，它说“在此服务器上找不到请求的 URL /\\resultserver\abc\new.txt”。当我尝试从 machine1（具有 Apache+ MySql）做同样的事情时，上面的链接有效。

请帮忙..！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:08:09.150

你不能，至少不能可靠。大多数网络浏览器不允许网页无法链接到本地​​文件。

如果他们这样做了，则需要使用`file://`协议指定链接。（但是，同样，大多数浏览器不允许这样做。）

# php - fullcalendar 不发送开始参数

> ID：14384784
> 
> 赞同：0
> 
> 时间：2013-01-17T17:31:21.400
> 
> 标签：php, fullcalendar

我正在使用 fullCalendar 并且它可以工作..直到现在..

我正在使用 Firefox，我看到我的脚本发送到日历的请求是`fullCalendar.html`并且没有`event.php?start=....`

这是我的配置脚本：

```
$(document).ready(function() {      
$('#calendar').fullCalendar({
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },

    firstDay:1,                         
    defaultEventMinutes: 30,            //default slot 30 minuti
    axisFormat: 'HH:mm',                //assi in agenda
    timeFormat: 'HH:mm',                //formato eventi        

    events: "fullCalendar/event.php"
  });
}); 
```

这是我的 event.php：

```
<?
include("../database/config.php");

    if(isset($_GET["start"])){
        $data = date("Y-m-d", $_GET["start"]); //date("Y-m-d 00:00:00");    
    }else{
        $data = date("Y-m-d");  
    }

$data = $data." 00:00:00";

$query = "SELECT * FROM calendario WHERE 'start' > '$data'";
$result = mysql_query($query, $db);
    if ($result==FALSE) die("Errore nella composizione della query");

while ($row = mysql_fetch_array($result)){
    $id     = $row['id'];
    $titolo = $row['titolo'];
    $start  = $row['start'];
    $end    = $row['end'];
    $descr  = $row['descr'];
    $allDay = $row['allDay'];

    if ($allDay == "1"){    
        $events[] = array(
            'id' =>  "$id",
            'title' => "$titolo",
            'start' => "$start",
            'end' => "$end",
            'allDay' => true,
            'descr' => "$descr"
            );
    }else{
        $events[] = array(
            'id' =>  "$id",
            'title' => "$titolo",
            'start' => "$start",
            'end' => "$end",
            'allDay' => false,
            'descr' => "$descr"     
        );
    }
}
    echo json_encode($events);
?> 
```

有人可以告诉我有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:38:35.260

已解决：您必须在调用日历的页面头部包含脚本。

```
<head>
  <link rel="stylesheet" type="text/css" href="fullCalendar/css/fullcalendar.css" />        
  <link rel="stylesheet" type="text/css" href="fullCalendar/css/jquery.alerts.css" />
  <link rel='stylesheet' type='text/css' href='fullCalendar/css/fullcalendar.print.css' media='print' />
  <script type="text/javascript" src="fullCalendar/js/fullcalendar.js"></script>
  <script type="text/javascript" src="fullCalendar/js/jquery.alerts.js"></script>           
  <script type="text/javascript" src="fullCalendar/js/myScript.js"></script>
 </head>

<div id="calendar"></div> 
```

# asp.net - BlogEngine 图片上传

> ID：14384790
> 
> 赞同：0
> 
> 时间：2013-01-17T17:31:41.723
> 
> 标签：asp.net, blogengine.net

我无法上传图像 - 出现损坏的图像 gif。生成的标记是：

```
<img style="float: left;" src="/mysite/IMAGES/2012/10/myimage.jpg.jpgx" alt="" /> 
```

我在项目中没有看到这样的文件夹。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:54:42.367

当我将网站项目从 BlogEngine 2.6 升级到 2.7 时，问题自行解决

# python - 如何在运行时包装python实例方法

> ID：14384792
> 
> 赞同：4
> 
> 时间：2013-01-17T17:31:47.117
> 
> 标签：python, logging, dynamic, metaprogramming, wrapper

我想在某个类中进行调用时记录调试信息。记录的数据是：

*   函数名
*   从哪里调用函数的堆栈跟踪
*   函数执行的时间
*   args 和 kwargs 传递给函数

我希望包装器相当通用。同时，包装应该在运行时进行。我制作了以下包装类来记录信息并将调用委托给原始实例。

```
import datetime
import traceback
from functools import partial

from logging_module import db_log

class BaseWrapper(object):
    def __init__(self, item):
        self._item = item

    def __getattr__(self, attr):
        return getattr(self._item, attr)

class DBLogWrapper(BaseWrapper):

    @staticmethod
    def _time_method(method):
        name = "{0}.{1}.{2}".format(
            method.im_class.__module__,
            method.im_class.__name__,
            method.__name__
        )

        def timed_method(self, *args, **kwargs):
            begin = datetime.datetime.now()
            return_val = method.im_func(self, *args, **kwargs)
            end = datetime.datetime.now()

            trace = traceback.format_stack()

            db_log(
                name,
                begin,
                end,
                info={
                    'args': args,
                    'kwargs': kwargs,
                    'trace': trace
                }
            )
            return return_val

        return timed_method

    def __init__(self, item, methods):
        super(DBLogWrapper, self).__init__(item)
        for method in methods:
            class_method = getattr(item, method)
            wrapped_method = DBLogWrapper._time_method(class_method)
            wrapped_method = partial(wrapped_method, self._item)
            setattr(self, method, wrapped_method) 
```

示例用法：

```
class MyClass(object):

    def hello(self, greeting):
        print greeting

    def goodbye(self):
        print 'Good Bye'

a = MyClass()

if DEBUG:
    a = DBLogWrapper(a, ['hello'])

a.hello()
a.goodbye() 
```

在这种情况下，调用`hello`将被记录，但调用`goodbye`不会。

然而，对于一个看起来应该很简单的任务来说，这似乎有点过头了。我正在寻找有关如何改进上述代码或完全不同的方法的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:49:02.587

你做的工作太多了。你根本不需要`partial`。只需定义`timed_method`不带`self`参数并`method`直接调用：

```
import datetime
import traceback
from functools import partial

def db_log(*args, **kwargs): print args, kwargs # Mock

class BaseWrapper(object):
    def __init__(self, instance):
        self._instance = instance

    def __getattr__(self, attr):
        return getattr(self._instance, attr)

class DBLogWrapper(BaseWrapper):

    @staticmethod
    def _time_method(method):
        name = "{0}.{1}.{2}".format(
            method.im_class.__module__,
            method.im_class.__name__,
            method.__name__
        )

        def timed_method(*args, **kwargs):
            begin = datetime.datetime.now()
            return_val = method(*args, **kwargs)
            end = datetime.datetime.now()

            trace = traceback.format_stack()

            db_log(
                name,
                begin,
                end,
                info={
                    'args': args,
                    'kwargs': kwargs,
                    'trace': trace
                }
            )
            return return_val

        return timed_method

    def __init__(self, instance, methods):
        super(DBLogWrapper, self).__init__(instance)
        for method in methods:
            class_method = getattr(instance, method)
            wrapped_method = DBLogWrapper._time_method(class_method)
            setattr(self, method, wrapped_method) 
```

输出：

```
>>> a = MyClass()
>>> a = prova.DBLogWrapper(a, ['hello'])
>>> a.hello()
A
('__main__.MyClass.hello', datetime.datetime(2013, 1, 17, 20, 48, 26, 478023), datetime.datetime(2013, 1, 17, 20, 48, 26, 478071)) {'info': {'args': (), 'trace': ['  File "<stdin>", line 1, in <module>\n', '  File "prova.py", line 31, in timed_method\n    trace = traceback.format_stack()\n'], 'kwargs': {}}}
>>> a.goodbye()
B 
```

无论如何，也许你可以使用一些`__getattr__`魔法，例如：

```
class DBLogWrapper2(BaseWrapper):

    def __init__(self, instance, methods):
        super(DBLogWrapper, self).__init__(instance)

        self._methods = methods

    def __getattr__(self, attr):
        if attr not in methods:
            return getattr(self._instance, attr)

        def f(*args, **kwargs):
            return self.timed_method(getattr(self._item, attr),
                                     *args, **kwargs)
        return f

    def timed_method(method, *args, **kwargs):
        begin = datetime.datetime.now()
        return_val = method(*args, **kwargs)
        end = datetime.datetime.now()

        trace = traceback.format_stack()

        db_log(name,
            begin,
            end,
            info={
                'args': args,
                'kwargs': kwargs,
                'trace': trace
            }
        )
        return return_val 
```

# javascript - 在 Javascript 打印期间，不保留格式

> ID：14384795
> 
> 赞同：0
> 
> 时间：2013-01-17T17:31:54.643
> 
> 标签：javascript, asp.net

我想打印一个 aspx 页面内容。该页面有几个显示数据的 asp.net 标签。我正在使用 javascript 打印页面。它可以打印，但问题是格式消失了。例如，页面的前几行如下所示：

字段名称 旧值 新值

地址1 1323 Bker street 5645 Lamar Road

在预览和打印页面中，数据是六行，而不是上面显示的两行。看起来每个标签后都会引入一个换行符。

```
function doPrint(s, e) {
        var prtContent = document.getElementById('PrintPanel');
        prtContent.border = 0; //set no border here
        var WinPrint = window.open('', '', 'left=100,top=100,width=1000,height=1000,toolbar=0,scrollbars=1,status=0,resizable=1');
        WinPrint.document.write(prtContent.innerHTML);
        WinPrint.document.close();
        WinPrint.focus();
        WinPrint.print();
        WinPrint.close();
    } 
```

# events - 要检索事件描述，我需要访问令牌吗？

> ID：14384799
> 
> 赞同：0
> 
> 时间：2013-01-17T17:31:55.903
> 
> 标签：events, facebook-login

我创建了一个应用程序，所以我使用了我的 appId 和密码。我可以使用以下方法检索具有公共事件的任何页面的事件数组：

```
// Lady Gaga example (not a fan!)
$event_array = $facebook->api('/ladygaga/events'); 
```

返回的数组给了我：

```
[name]
[start_time]
[end_time]
[timezone]
[location]
[id] 
```

我希望[描述]在里面，我就完了！这是一个社区活动日历，如果他们愿意，我希望我的成员能够添加他们的 Facebook 活动。我希望他们能告诉我他们的 Facebook 用户名，我可以打印他们的活动（简单！）。

**问题来了：**我是否需要登录 Facebook 才能显示他们的活动描述？如果是这样，这将如何工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:08:49.873

您似乎在这里有两个不同的问题。

**页面事件**：如果您只是查询页面的事件，例如，您可以通过在 API 调用中`ladygaga`请求来获取描述。`fields`

```
'/ladygaga/events?fields=name,start_time,timezone,location,description,id' 
```

（一旦你指定了一个`fields`参数，你需要手动请求你需要的所有字段。）

只要页面所有者没有设置任何访问限制，您就可以通过仅使用`appid`和进行身份验证来获取这些详细信息`secret`。

**用户事件**：如果您想显示属于 a 的事件`user`，或者您正在查询有限制的页面，则用户需要使用`user_events`权限登录您的应用程序。`friend_events`如果您也想查看他们朋友的活动，您还需要提出请求。

如果您存储一位用户的结果并将其显示给其他用户，则您违反了 Facebook 的服务条款。

# linq - Linq 过滤不同的行到数据表

> ID：14384801
> 
> 赞同：0
> 
> 时间：2013-01-17T17:32:07.567
> 
> 标签：linq, datatable

如何将下面的结果传递给数据表，以便在 datagridview 中显示？

```
 var query = from r in DtSet.Tables["tblCharge"].AsEnumerable()
                    select new
                        {invoice = r.Field<string>("InvNo"),
                         type = r.Field<string>("EorD")}; 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:41:42.547

这可以通过

```
dataGridView.DataSource = query.ToList(); 
```

# less - 取反一个数值变量并在 LessCSS 中添加 'px'

> ID：14384803
> 
> 赞同：31
> 
> 时间：2013-01-17T17:32:09.737
> 
> 标签：less

我想创建一个执行以下操作的函数：

```
.sprite-size (@width,@height,@x,@y) {
  width:~'@{width}px';
  height:~'@{height}px';
  background: @sprites no-repeat  -~'@{x}px' -~'@{y}px';
} 
```

我想传递一个正值，`@x`然后`@y`在输出中否定它们。对于给定的示例，上述 LESS 函数输出以下内容：

```
//LESS
.header-language-selection {
  .sprite-size(44,21,312,0);
}

//Outputs CSS
.header-language-selection {
  width: 44px;
  height: 21px;
  background: url('/Content/images/sprites.png') no-repeat - 312px - 0px;
} 
```

如您所见，输出结果在`-`和之间包含一个空格`px`。有什么办法可以消除它并实现我想要的吗？

我希望该行的输出为：`background: url('/Content/images/sprites.png') no-repeat -312px -0px;`

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-17T20:04:56.790

只需乘以`1`您想要的符号和单位。所以：

```
.sprite-size(@width, @height, @x, @y) {
  width: @width*1px;
  t: @height*1px;
  background: @sprites no-repeat  @x*-1px  @y*-1px;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-26T07:21:05.050

你也可以试试这个：

```
.sprite-size (@width,@height,@x,@y) {
  width: ~"@{width}px";
  height: ~"@{height}px";
  background: @sprites no-repeat  @x*(-1px)  @y*(-1px);
} 
```

# javascript - 在jsp页面中重新加载变量

> ID：14384806
> 
> 赞同：0
> 
> 时间：2013-01-17T17:32:39.963
> 
> 标签：javascript, jquery, jsp, model-view-controller, javabeans

所以我对 JSP、servlet 等还是很陌生，尽管我对 MVC 框架中的所有概念都很熟悉。在以下代码中：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script type="text/javascript" src="js/jquery.js"></script>
<title>Some title</title>
</head>

<body>
<div id="mostRecent">
Most Recent Time: <span id="mTime"></span><br>
</div>

<input id="butt" type="button" value="refresh" />

<script type="text/javascript">
$(document).ready(function(){
    count = 0;
    $('#butt').click(function(){
        $('#mTime').text(" <%= new java.util.Date() %> ");
        count += 1;
    });
});
</script>
</body>
</html> 
```

当我单击刷新按钮时，当前日期按预期写入跨度，但只是第一次调用它。没有添加新的更当前的日期字符串，这让我认为该方法只被调用（成功）一次。有没有办法解决？或者更好的是，我的一般技术是否存在问题（即，我是否应该暂时向 servlet 发出请求，以免添加太多视图逻辑）。如果是这种情况，那么关于如何将 servlet 响应加载到页面的一小部分（而不是将响应打印到新页面）的描述将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:14:15.363

好吧，您的示例不起作用，因为该页面仅被解释一次，即在请求时解释 jsp 页面。要解决您的问题，您可以使用以下代码创建一个 JSP 页面：

```
<%= new java.util.Date() %> 
```

你可以尝试这样的事情：

```
 $('#butt').click(function(){
    $.get("get_current_date.jsp", function(response) {
       $('#mTime').text(response);
       count += 1;
    });
}); 
```

# java - Oracle 查询帮助 - JDBC

> ID：14384809
> 
> 赞同：0
> 
> 时间：2013-01-17T17:32:49.423
> 
> 标签：java, oracle, jdbc

我有两张桌子。我需要从一个表中获取数据并将其插入到另一个表中，前提是第二个表中不存在数据（比如 ID）。如果数据存在，我需要更新表中该 ID 的值。

我们怎样才能做到这一点？

我首先从数组列表中的第一个表中收集所有数据，然后遍历该列表。如果元素出现在第二个表中，我调用更新查询。如果没有，我调用插入查询。

还有其他方法可以实现这一目标吗？我认为这需要很多时间，即使它很简单。

PS：我现在没有我的查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:46:10.120

查看 MERGE 语句。这就是您要查找的内容：（`MERGE WHEN EXISTS THEN UPDATE NOT EXISTS THEN INSERT`这不是语法）

# jquery - 如何使用 JQuery 提交表单而不是完整回发？

> ID：14384812
> 
> 赞同：-1
> 
> 时间：2013-01-17T17:33:00.707
> 
> 标签：jquery, asp.net-mvc, model-view-controller, asp.net-mvc-2

如何使用 JQuery 提交表单而不是完整的回发？

现在我可以提交带有完整回发的表单。但需要时间做出回应。

分享视频教程的任何帮助都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:24:51.893

有关详细信息，请参阅此网址[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
<form id="myform">
    <input type="text" name="foo" />
    <input type="button" value="Submit" id="submit" />
</form>

$("#submit").click(function(){
    $.ajax({
        url: "/yourposturl",
        type: "post",
        data: $("#myform").serialize(),
        success: function(data){
        //write code here manage "data"
  },
  error:function(){
      alert("failure");
      $("#result").html('there is error while submit');
  }   
}); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:15:36.580

最简单的方法是使用 jQuery ajax 方法或速记方法之一。如果你有这样的表格：

```
<form id="myform">
    <input type="text" name="foo" />
    <input type="button" value="Submit" id="submit" />
</form> 
```

你可以这样提交：

```
$("#submit").click(function(){
    $.post("/mycontroller/myaction", $("#myform").serialize(), function(data){
        //do something with the response from the controller via the data object
    });
}); 
```

[http://api.jquery.com/category/ajax/shorthand-methods/](http://api.jquery.com/category/ajax/shorthand-methods/)

# android - 如何使用打印机共享应用程序从我的应用程序中获取 pdf 文件打印？

> ID：14384813
> 
> 赞同：0
> 
> 时间：2013-01-17T17:33:03.270
> 
> 标签：android

你好朋友，

```
 I am developing an application which has a pdf file and I want to take printout of that file.I want to use printershare application in my application,but I didnt know how to move to that application from my application. 
```

另一件事是我想检查应用程序是否安装在设备上。

是否可以向该应用程序提供输入，例如（pdf 文件作为输入）？

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:45:02.153

另一件事是我想检查应用程序是否安装在设备上。

*您可以使用 try & catch 块来确定是否已经安装了任何可以处理该格式的应用程序，如果没有安装，那么您可以在 catch 块中指向用户从 playstore 下载应用程序。*

是否可以向该应用程序提供输入，例如（pdf 文件作为输入）？

*是的*

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(path, "application/pdf");
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

try {
    startActivity(intent);
} 
catch (ActivityNotFoundException e) {
    Toast.makeText(OpenPdf.this, 
        "No Application Available to View PDF", 
        Toast.LENGTH_SHORT).show();
} 
```

// 将用户指向 playstore

```
 Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + packageName));
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent); 
```

# android - 在 relatuveLayout 中不显示 um 和 textView imagemView

> ID：14384817
> 
> 赞同：0
> 
> 时间：2013-01-17T17:33:10.203
> 
> 标签：android, android-layout, android-listview

我有一个RelativeLayout，里面有一个textView 和一个imageView。在RelativeLayout中，当我离开标签android时，使用9slice的图像背景：背景不是imagemView，既不显示也不显示TextView

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="52dp"
    android:background="@drawable/bg_cardapio_categoria_cell" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:text="categoria"
        android:textColor="#4a4a4a"
        android:textSize="14sp" />

    <ImageView
        android:layout_width="8dp"
        android:layout_height="11dp"
        android:layout_centerVertical="true"
        android:layout_alignParentRight="true"
        android:layout_marginRight="20dp"
        android:src="@drawable/arrow_itens" />
</RelativeLayout> 
```

# iphone - CGContextClipToMask 如何在内部工作？

> ID：14384819
> 
> 赞同：1
> 
> 时间：2013-01-17T17:33:27.063
> 
> 标签：iphone, ios, ipad, mask, quartz-2d

到目前为止，我正在尝试在 iOS 上复制 CGContextClipToMask 的行为，但没有任何运气。有谁知道 CGContextClipToMask 在内部是如何工作的？我已经阅读了文档，它说它只是将图像 alpha 值乘以掩码 alpha 值，所以这就是我在自定义函数中所做的，但是当我使用正常混合多次绘制结果图像到 CGContext 时，结果变得越来越暗，而使用 CGContextClipToMask 结果是正确的并且不会变暗。

我的理论是 CGContextClipToMask 以某种方式使用目标上下文，除了图像和掩码来产生正确的结果，但我对核心图形的了解还不够确定。

我也读过这个问题：

[如何在没有预乘 alpha 的情况下获得真正的 RGBA 或 ARGB 颜色值？](https://stackoverflow.com/questions/6396139/how-to-get-the-real-rgba-or-argb-color-values-without-premultiplied-alpha)

我可能会遇到这个问题，但是 CGContextClipToMask 如何解决 8 位 alpha 的精度损失问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:02:16.117

我发现了问题。乘以掩码时，我必须对 RGB 值进行 ceilf 调用，如下所示：

```
float alphaPercent = (float)maskAlpha / 255.0f;
pixelDest->A = maskAlpha;
pixelDest->R = ceilf((float)pixelDest->R * alphaPercent);
pixelDest->G = ceilf((float)pixelDest->G * alphaPercent);
pixelDest->B = ceilf((float)pixelDest->B * alphaPercent); 
```

令人惊讶的是，这解决了这个问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:47:55.627

`CGContextClipToMask`我个人[不了解](http://www.gnustep.org).

PS：

仔细想想，当你写“将图像 alpha 值乘以掩码 alpha 值”时，有一些东西引起了我的注意。

事实上，据我所知，iOS 上的蒙版没有 alpha 通道，我所有使用 alpha 通道蒙版的尝试都给出了错误的结果。这能让你走得更远一点吗？

也许诀窍是将图像乘以掩码（在灰色空间中定义，并且只有一个分量），并保持图像 alpha 通道不变......

你觉得怎么样？

# .net - .NET EventWaitHandle 向所有线程发出信号

> ID：14384823
> 
> 赞同：0
> 
> 时间：2013-01-17T17:33:44.340
> 
> 标签：.net, multithreading, event-wait-handle

会`close()`向所有`threads`呼叫过的人发出信号`WaitOne()`吗？

如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:18:45.007

不会。它会导致 WaitOne() 方法失败并出现异常，尤其是 ObjectDisposedException。

唯一的“最佳方法”是不这样做，这是一个普通的错误。EventWaitHandle 对象只应在不再使用时关闭或处置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:42:46.843

它会导致一个`AbandonedMutexException`. 使用此类的正确方法是在服务员处于活动状态时不要调用 close。

请参阅[http://msdn.microsoft.com/en-us/library/58195swd.aspx](http://msdn.microsoft.com/en-us/library/58195swd.aspx)

# scala - 在 Scala 中返回 None 而不是 Option 会产生编译错误

> ID：14384825
> 
> 赞同：1
> 
> 时间：2013-01-17T17:33:58.373
> 
> 标签：scala, playframework-2.0

这是一个简单的问题，我无法弄清楚：

以下代码给出以下编译错误：

```
def parseJson(q: String) = Option[JsValue]{
    try{
            Json.parse(q)
    }catch{
        case e: com.codahale.jerkson.ParsingException => None
    }
} 
```

错误

```
[error]  found   : None.type (with underlying type object None)
[error]  required: play.api.libs.json.JsValue
[error]             case e: com.codahale.jerkson.ParsingException => None 
```

考虑到我的响应类型是 Option[JsValue]，为什么我不能返回 None？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T17:44:48.730

您实际上希望将 Json.parse(q) 放入 Some() 而不是将整个代码包装在 Option[JsValue] 中，而是将其用作签名：

```
def parseJson(q: String): Option[JsValue] = {
    try{
       Some(Json.parse(q))
    }catch{
       case e: com.codahale.jerkson.ParsingException => None
    }
} 
```

但无论如何，您应该更喜欢使用[scala.util.control.Exception](http://www.scala-lang.org/api/current/index.html#scala.util.control.Exception$)：

```
 import scala.util.control.Exception._
 catching(classOf[com.codahale.jerkson.ParsingException]).opt(Json.parse(q)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:41:02.907

我认为您只是方法定义的语法错误。您编写它的方式是调用`Option.apply`try/catch 块的结果。我想你的意思是写这个：

```
def parseJson(q: String): Option[JsValue] = {
  try {
    Some(Json.parse(q))
  } catch {
    case e: com.codahale.jerkson.ParsingException => None
  }
} 
```

# jsoup - JSoup 不返回所有 cookie

> ID：14384826
> 
> 赞同：1
> 
> 时间：2013-01-17T17:34:02.963
> 
> 标签：jsoup, session-cookies

我被困在尝试使用 Jsoup 登录网站以从同一网站的另一个链接获取信息。当我连接时，它不会从会话中返回所有 cookie。我不确定是否应该使用 __utma、__utmb 等来保持记录，但这是我认为唯一阻止我记录的事情。

这是代码。

```
public static void main(String[] args) throws Exception {
    String url = "https://www.evoicetelecom.com.br/customers/myAccount";

    final Connection.Response res = Jsoup.connect("http://www.evoicetelecom.com.br/login/")
                .data("userName", "user")
                .data("password", "pass")
                .method(Connection.Method.POST)
                .execute();

    Document doc = res.parse();
    Map<String, String> cookies = res.cookies();

Document doc2 = Jsoup.connect(url).cookies(cookies).get();

Elements element = doc2.select("body");

System.out.println(element);

    } 
```

打印只是为了检查它是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:03:28.480

我遇到了类似的问题，但在我的情况下，cookie 值为空（“”），我发现原因是 cookie 值在响应头解析器中被重置。由于 Jsoup 是开源的，因此调试响应处理很简单。尝试一下，您可能会找到问题的答案。在我的例子中，我只是在 HttpConnection.Base 类的 cookie 方法中添加了这个小 if 语句：

```
 if(value.length() == 0 && cookies.containsKey(name)){
            return (T) this;
        } 
```

# c# - LINQ 创建匿名类型数组错误

> ID：14384827
> 
> 赞同：0
> 
> 时间：2013-01-17T17:34:04.527
> 
> 标签：c#, linq, sorting, anonymous-types

我正在尝试使用 LINQ 从结果集中创建一个匿名类型的数组。

我的代码是

```
var data = (from s in sortedStudents
            select new
            {
                //id = s.CurrencyId,
                cell = new object[] { s.PropertyNumber.ToString(), s.Name,
                s.Status.ToString(), "Hello" }
            }).ToArray(); 
```

但我收到如下错误，但我没有使用任何 System.Int64 变量。

> 无法将类型“System.Int64”转换为类型“System.Object”。LINQ to Entities 仅支持转换 EDM 基元或枚举类型。

任何想法这里有什么问题。

花了一些时间后，我怀疑我对数据进行排序的逻辑造成了问题，我对日期进行排序的代码是

```
// Utility method to sort IQueryable given a field name as "string"
    // May consider to put in a cental place to be shared
    public IQueryable<T> SortIQueryable<T>(IQueryable<T> data, string fieldName, string sortOrder)
    {
        if (string.IsNullOrWhiteSpace(fieldName)) return data;
        if (string.IsNullOrWhiteSpace(sortOrder)) return data;

        var param = Expression.Parameter(typeof(T), "i");
        Expression conversion = Expression.Convert(Expression.Property(param, fieldName), typeof(object));
        var mySortExpression = Expression.Lambda<Func<T, object>>(conversion, param);

        return (sortOrder == "desc") ? data.OrderByDescending(mySortExpression)
            : data.OrderBy(mySortExpression);
    } 
```

现在，当我的列名类型为 system.int64 时，它会产生问题，因为当我对结果执行 .ToArray 时，实际上会执行查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:47:59.733

问题可能出在您的排序逻辑中，即这一行：

```
Expression conversion = Expression.Convert(Expression.Property(param, fieldName), typeof(object)); 
```

如错误消息所述，LINQ to Entities 不支持这种类型的转换。您要么需要事先使用 a 执行查询，`.ToList()`要么重新制定排序逻辑。

# javascript - 我不知道如何在特定的“X，Y”位置向屏幕动态添加文本

> ID：14384831
> 
> 赞同：-1
> 
> 时间：2013-01-17T17:34:29.190
> 
> 标签：javascript, text

我需要在特定位置的屏幕上添加文本。有没有人可以发布任何示例代码？示例：假设我必须将“这是一个文本”添加到左侧 50 像素和顶部 100 像素，但我必须动态地执行此操作。我该怎么做？？

谢谢！

PS我对**Javascript**很陌生：]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:47:39.527

下面是如何使用 JavaScript 做到这一点：

```
// Create an HTML paragraph to hold the text
var p = document.createElement('p');

// Add some text to it
p.innerHTML = "Some text <span>and markup</span>";

// Give it position: absolute so you can position by x,y
p.style.position = 'absolute';

// Define position
p.style.left = '50px';
p.style.top = '100px';

// Add it to the body
document.body.appendChild(p); 
```

# java - Java 6 下字体显示不正确

> ID：14384835
> 
> 赞同：13
> 
> 时间：2013-01-17T17:34:40.630
> 
> 标签：java, pdf, fonts, icepdf

我正在使用[IcePDF](http://www.icesoft.org/java/projects/ICEpdf/overview.jsf)库在 Web 应用程序中显示 PDF。在 Java 6 (jdk1.6.0_37 32bits) 下，字体显示不正确（替换为一些默认字体）

![爪哇 6](../Images/a486b5850b6f3fdc099cafb081bcec90.png)

而在 Java 7 下它看起来还可以。

![爪哇 7](../Images/509dba33fad59d1c62886272df44ad94.png)

我需要在我的应用程序中使用 Java 6，您知道导致这种行为的原因是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:01:44.467

你总是可以将字体导入你的库..

你可以试试这个：

```
Font font = Font.createFont(Font.TRUETYPE_FONT, fontStream); 
```

下一个，

```
GraphicsEnvironment.getLocalGraphicsEnvironment().registerFont(font); 
```

和，

```
new Font("nameOfFont", Font.BOLD, 13) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T17:11:06.743

ICEpdf Pro 支持 OpenType/CFF 字体。如果您在开源版本中遇到字体替换问题，请尝试在您的服务器实例上安装以下字体。 [http://www.icesoft.org/wiki/display/PDF/Optimized+Font+Substitution](http://www.icesoft.org/wiki/display/PDF/Optimized+Font+Substitution)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T11:55:53.050

以下步骤可能会对您有所帮助。我希望您在 RedHat 操作系统中得到这个。

1.  将所需的字体文件复制到以下构建版本的 \Java\jre6\lib\fonts\ 目录。
2.  将 Java 和 JRE 设置为此构建并对其进行测试。

    java 版本“1.6.0_15”Java(TM) SE 运行时环境（构建 1.6.0_15-b03）Java HotSpot(TM) 服务器 VM（构建 14.1-b02，混合模式）

我预计你的问题会解决。

# sql - Order By Clause 不适用于 GROUP BY

> ID：14384837
> 
> 赞同：0
> 
> 时间：2013-01-17T17:34:42.543
> 
> 标签：sql, sql-server-2008, group-by

我正在尝试使用以下按小时计算订单数量的函数：

```
SELECT
    COUNT(id) total,
    DATENAME(HOUR, purchased_on) label,
    site
FROM dhs.dbo.orders
WHERE purchased_on >= '01/16/2013'
GROUP BY DATENAME(HOUR, purchased_on), site
ORDER BY label DESC 
```

即使我正在使用 ORDER BY 子句，我也得到以下结果，该子句应该将它们从最高标签到最低标签排列：

```
total   label   site
2         9     AMAZON
1         9     DHS
2         8     AMAZON
1         7     AMAZON
1         6     AMAZON
1         4     AMAZON
1         12    AMAZON
3         11    AMAZON
1         10    AMAZON
1         10    DHS 
```

为什么订单不工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:35:51.797

`DATENAME`返回一个`VARCHAR`。

将其替换为`DATEPART`：

```
SELECT  COUNT(id) total,
        DATEPART(HOUR, purchased_on) label,
        site
FROM    dhs.dbo.orders
WHERE   purchased_on >= '01/16/2013'
GROUP BY
        DATEPART(HOUR, purchased_on), site
ORDER BY
        label DESC 
```

# android - Android HTML5 - 软键盘与输入字段重叠

> ID：14384847
> 
> 赞同：14
> 
> 时间：2013-01-17T17:35:23.350
> 
> 标签：android, html, android-softkeyboard

我有点厌倦了在 Android 上通过软键盘寻找重叠输入字段的解决方案。我的问题与这个问题非常相似：[Soft Keyboard Overlapping with EditText Field](https://stackoverflow.com/questions/4559367/soft-keyboard-overlapping-with-edittext-field)尽管在这种情况下它发生在 HTML5 中，而不是本机应用程序中。

更准确地说：当输入字段被键盘完全覆盖时，会滚动整个页面并且该字段变得可见 - 没关系。但是如果这个输入在可见区域的边缘（在键盘出现之后），我的软键盘会重叠它并且页面根本不会滚动。该页面将在输入第一个符号后立即滚动。

我的客户不喜欢这种行为......它肯定会发生在 Galaxy Tab 10" - Android 4.0.3、Lenovo Tablet - Android 3.1 上。

我尝试使用`box-sizing:border-box;`, `-webkit-appearance: textfield;`, `-webkit-user-select: text;`,`-webkit-writing-mode: horizontal-tb;`等设置输入的高度`-webkit-rtl-ordering: logical;`，但没有任何效果。

你有什么想法吗？我更喜欢 CSS 解决方案，在这种情况下，javascript 页面滚动不是我的答案（客户要求）。

也许这只是一个没有解决方法的 Android Web 浏览器错误，或者由于某些输入父母的风格（我已经尝试删除所有`position: absolute`属性）而导致一些特定问题？

欢迎所有建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-08T13:38:15.870

I had this annoying issue, related to my css framework - mobile-angular-ui. So it's known bug on internet, and I spent hours on searching for fix on web,but unfortunately none of proposed solutions solved my particular case. At last I did some testing, and it turned out that this behaviour is caused by framework I used. (I did report it to mobile-angular-ui authors, but I didn't get response.) You probably want to do few tests, as I did, to find out if this issue is related to architecture of your app, really. Comment out all the css code and start from blank, pure html page with forms on it. If all's fine (form should scroll up to show in visible part of view, above of soft keyboard) when your css is commented out/switched off, your issue lies in css, just like in my case. For those who use mobile-angular-ui in their apps, and get into this issue, this piece of code did the job for me:

```
html {
    overflow: auto;
}
body {
    height:auto;
    overflow: auto;
}
.scrollable {
    position:inherit;
} 
```

The rest depends on your particular case.

I hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T12:18:40.700

解决这个 android 讨厌的最简单的方法（现在也在 ios7 中）是使用输入焦点和模糊事件。如果您不使用页脚标签，只需将其替换为页脚元素的类。

在 jQuery 中：

```
$("input").focus(function(){
    $('footer').hide();
});

$("input").blur(function(){
    $('footer').show();
}); 
```

# amazon-web-services - 使用 CloudFormation 创建 RDS 数据库实例时，是否可以运行初始 SQL？

> ID：14384849
> 
> 赞同：58
> 
> 时间：2013-01-17T17:35:27.003
> 
> 标签：amazon-web-services, amazon-rds, amazon-cloudformation

我正在使用 CloudFormation 创建一个 RDS 实例：

```
“资源”： {
        “我的数据库”：{
            "类型": "AWS::RDS::DBInstance",
            “特性”： {
                “分配存储”：“5”，
                "DBInstanceClass": "db.m1.small",
                “引擎”：“MySQL”，
                “引擎版本”：“5.5”，
                "DBName": "mydb",
                “主用户名”：{
                    “参考”：“数据库用户”
                },
                “主用户密码”：{
                    “参考”：“数据库密码”
                },
                “DBParameterGroupName”：{
                    “参考”：“myRDSParamGroup”
                }
            }
        }

```

这一切都有效。但是我需要在创建数据库时在数据库上运行初始 SQL，以设置我的应用程序架构。我目前的方法是让应用程序自行迁移，但我想在 CloudFormation 定义中进行。这可能吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T02:53:18.090

不，这是不可能的。但是，您可以让 EC2 实例连接到您的 RDS 实例来执行此操作。我可能会在 S3 中存储一个 .sql 文件并在 EC2 实例上使用 cloud-init 脚本来下载文件并执行它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-12T00:30:46.407

也可以创建 CloudFormation 自定义资源。[这里](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-custom-resources-sns.html)有一个关于如何使用 SNS 构建的很好的讨论；也可以使用 Lambda 构建一个。自定义资源本质上只是 RPC，因此创建一个以使用模式初始化数据库并不难。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-27T01:07:50.973

CloudFormation 仍然没有为我们提供任何解决方案，但希望他们能尽快添加[数据库迁移服务](https://aws.amazon.com/dms/)支持。

同时，如果您使用 CodePipeline，有一个很好的解决方案：创建一个迁移阶段，调用 Lambda 函数来运行您的迁移。我偶然发现了[这个](http://docs.aws.amazon.com/codepipeline/latest/userguide/actions-invoke-lambda-function.html)从 CodePipeline 调用 Lambda 的指南，这可能对那些不熟悉的人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-02T08:41:39.850

另一种选择是对 AWS::RDS::DBInstance 资源使用 DBSnapshotIdentifier 属性。唯一的问题是您首先需要在 AWS 中加载一个数据库才能创建快照。从那时起，您可以自动化您的 cloudformation 堆栈以使用它。

> DBSnapshotIdentifier：用于还原数据库实例的数据库快照的名称 (ARN)。
> 
> 如果该属性包含一个值（不是空字符串），AWS CloudFormation 会从指定的快照创建一个数据库。
> 
> 使用 DBSnapshotIdentifier 属性还原数据库实例后，您必须为将来对数据库实例的任何更新指定相同的 DBSnapshotIdentifier 属性。当您为更新指定此属性时，数据库实例不会再次从数据库快照中恢复，数据库中的数据也不会更改。但是，如果您不指定 DBSnapshotIdentifier 属性，则会创建一个空数据库实例，并删除原始数据库实例。

从更多信息中查看文档： [https ://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-rds-database-instance.html#cfn-rds-dbinstance-dbsnapshotidentifier](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-rds-database-instance.html#cfn-rds-dbinstance-dbsnapshotidentifier)

# c# - 更改从数据表馈送的 datagridview 中的文本

> ID：14384851
> 
> 赞同：0
> 
> 时间：2013-01-17T17:35:27.970
> 
> 标签：c#, datagridview

我想更改 datagridview 的一个列中的文本，该文本是从数据表中提供的，用于演示目的（特别是我想将那里的术语翻译成另一种语言）。我假设我可以通过将整个数据移动到我自己的表并在那里修改它来做到这一点，但如果可以避免，我宁愿不这样做。任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:56:31.183

使用 DataGridView 执行此操作的正确方法是使用 CellFormating 事件，[此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)在 MSDN 上进行了描述。[HowTo Article](http://msdn.microsoft.com/en-us/library/z1cc356h.aspx)中有一个很好的例子说明你可以做什么，但我也在这里给出了一个概述。

`CellFormating`首先，您需要通过设计视图或代码订阅事件：

```
this.dataGridView1.CellFormatting += new System.Windows.Forms.DataGridViewCellFormattingEventHandler(this.dataGridView1_CellFormatting); 
```

然后在事件处理程序中放置逻辑以格式化数据以进行显示：

```
private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (!dataGridView1.Rows[e.RowIndex].IsNewRow && e.ColumnIndex == dataGridView1.Columns["InterestingColumn"].Index)
    {
        if (e.Value == null)
            return;

        if (e.Value.ToString() == "TargetValue")
        {
            e.Value = "DisplayValue";
        }
    }
} 
```

这不会改变 DataSet 中的基础值 - 仅显示值，并且在每个单元格离开事件后触发事件，因此用户可以在网格中键入数据（如果它不是只读的）并且将应用格式。

当然，所有这些都可以根据您的意愿进行定制，但 CellFormating 事件是最好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:52:43.627

首先要做的是正确绑定 DataGridView 和 DataTable。

```
BindingSource bs = new BindingSource();

bs.Datasource = mydatatable;

dataGridView1.Datasource = bs; 
```

您在 DataTable 中所做的任何更改都将自动反映在数据网格中，反之亦然。

接下来，您也许可以遍历 DataTable 中的每一行。您可以为每一行翻译指定列中的值。像这样的东西：-

```
foreach(DataRow row in mydatatable.rows)
{
    // Do your translation code

    row["SpecificColumnName"] = yourTranslatedvalue;
} 
```

它是非常基本的东西，但它可以帮助你开始。

# ruby-on-rails - 使用 activerecord 按时间范围高效查询交易

> ID：14384855
> 
> 赞同：1
> 
> 时间：2013-01-17T17:35:43.057
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

有没有办法让这种方法更有效？我正在查询大量事务，并且为每个期间执行单独的活动记录查询似乎效率低下。

我应该对一整天进行一次查询并对结果进行排序，按时间段分组吗？如果是这样，最有效的方法是什么？期待你的想法。

```
def self.transactions(period)
  today = Date.today
  time1 = Time.utc(today.year, today.month, today.day, 9, 30, 0)
  time2 = Time.utc(today.year, today.month, today.day, 16, 0, 0)
  transactions_by_period = {}

  while time1 < time2
    transactions = self.where("created_at >= ? and created_at <= ?", time1, time2)
    transactions_by_period[time1] = transactions
    time1 += period
  end

return transactions_by_period
end

#todays_transactions_by_hour = Stock.transactions(1.hour) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:03:23.987

首先，您可以使用范围进行更好的查询。我也会重命名`time1`和`time2``start``finish`

```
transactions = self.where(:created_at => start..finish) 
```

然后你可以减少它以按周期获取它们。

```
transactions.reduce(Hash.new{|h, k| h[k] = []) do |periods, transaction|
  # Calculate how many periods have gone by for this transaction
  offset = (transaction.created_at - start).to_i / period
  # Find the actual period
  transaction_period = start + offset * period
  periods[transaction_period] << transaction
  periods
end 
```

### 编辑

我还没有测试代码，它显示了更多的逻辑

# c# - 尝试在 C# 上使用 Agility 抓取网页

> ID：14384856
> 
> 赞同：0
> 
> 时间：2013-01-17T17:35:47.330
> 
> 标签：c#, ajax, screen-scraping, html-agility-pack

我使用 C# 和 Agility Pack 来抓取网站，但我得到的结果与我在 firebug 中看到的不同。我想这是因为该站点使用了一些 Ajax。

```
// The HtmlWeb class is a utility class to get the HTML over HTTP
HtmlWeb htmlWeb = new HtmlWeb();
// Creates an HtmlDocument object from an URL
HtmlAgilityPack.HtmlDocument document = htmlWeb.Load("http://www.saxobank.com/market-insight/saxotools/forex-open-positions");
// Targets a specific node
HtmlNode someNode = document.GetElementbyId("href");
// If there is no node with that Id, someNode will be null
richTextBox1.Text = document.DocumentNode.OuterHtml; 
```

有人可以就如何正确执行此操作的代码提出建议，因为我得到的只是普通的 html。我正在寻找的是一个

```
div id= "ctl00_MainContent_PositionRatios1_canvasContainer" 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:44:16.973

如果您*有*ID，请使用它 -`href`是属性的名称，而不是`id`.

```
HtmlNode someNode = 
    document.GetElementbyId("ctl00_MainContent_PositionRatios1_canvasContainer"); 
```

这将是具有该 ID的*div 。*

然后，您可以使用以下方法选择任何子`a`节点及其`href`该节点的属性：

```
var href = someNode.SelectNodes("//a")[0].Attributes["href"].Value; 
```

# ruby-on-rails - 如何让 Elastic Beanstalk 到服务器编译的资产？

> ID：14384860
> 
> 赞同：4
> 
> 时间：2013-01-17T17:35:56.393
> 
> 标签：ruby-on-rails, asset-pipeline, amazon-elastic-beanstalk

我正在尝试让 Rails 3.2.x 应用程序在生产中运行，但每次我访问已部署的应用程序时，它都会抱怨资产没有被编译：

```
An ActionView::Template::Error occurred in home#index:

application.css isn't precompiled
vendor/bundle/gems/actionpack-3.2.11/lib/sprockets/helpers/rails_helper.rb:142:in `digest_for'

-------------------------------
Request:
-------------------------------

* URL       : http://some-server.elasticbeanstalk.com/
* Parameters: {"controller"=>"home", "action"=>"index"}
* Rails root: /var/app/current
* Timestamp : 2013-01-17 17:22:55 UTC 
```

但是，当我查阅我的 EB 实例的日志文件时，我将其视为每次部署的一部分：

```
Script succeeded.
Executing script: /opt/elasticbeanstalk/hooks/appdeploy/pre/11_asset_compilation.sh
Output from script: /usr/bin/ruby1.9 /usr/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets 
```

我可以在生产模式下运行本地乘客实例，并且资产服务良好。有没有人对可能出现的问题有任何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:23:40.213

尝试通过从应用程序根目录运行以下命令来重新启动应用程序：

`touch tmp/restart.txt`

为我解决了这个问题。

# c# - 更新数据库中的布尔值

> ID：14384861
> 
> 赞同：0
> 
> 时间：2013-01-17T17:35:56.630
> 
> 标签：c#, asp.net, ms-access

我的 asp.net 网页上有一个按钮，我已对其进行编码以在页面加载时读取 access 数据库中的布尔列的值，并且该按钮的作用根据该列的值是真还是假而改变。

本质上，此按钮是产品的显示/隐藏按钮（单击它以隐藏产品，或者如果已经隐藏，请单击它使其可见）。

当产品被隐藏时，我遇到了一些奇怪的行为，单击以使产品可见（更新数据库），但是，隐藏它不起作用，我无法弄清楚为什么一个会起作用，而另一个不会.

代码如下：

```
 if (!IsPostBack)

    try
    {
        s = WebConfigurationManager.ConnectionStrings["LNDatabase"].ConnectionString;
        conn = new OleDbConnection(s);
        cmd = new OleDbCommand("SELECT * FROM products WHERE products.prod_id = @test", conn);
        OleDbParameter test = new OleDbParameter("@test", OleDbType.Integer);
        test.Value = Request.QueryString["prod_id"];
        cmd.Parameters.Add(test);

        conn.Open();
        dr = cmd.ExecuteReader(CommandBehavior.CloseConnection);
        dr.Read();
        title.Text = dr["shortdesc"].ToString();
        description.Text = dr["longdesc"].ToString();
        price.Text = dr["price"].ToString();

        productcat = dr["cat"].ToString();
        product_live = dr["live"].ToString();

    }
    catch (Exception ex)
    {
        Response.Write(ex.Message.ToString());
    }
    finally
    {
        dr.Close();
        conn.Close();
    }

protected void Page_Load(object sender, EventArgs e)

if (!IsPostBack)
    {
        bool prod_live_bool = Convert.ToBoolean(product_live);

        if (prod_live_bool == true)
        {
            live_label.Text = "This product is visible to customers";
            livelabelbutton.Text = "Hide this product";
            livelabelbutton.Click += new EventHandler(this.hideproduct_click);

        }
        else
        {
            live_label.Text = "This product is not visible to customers";
            livelabelbutton.Text = "Make this product visible";
            livelabelbutton.Click += new EventHandler(this.showproduct_click);
        }

    }

 protected void hideproduct_click(object sender, EventArgs e)
{
    string prodid = Request.QueryString["prod_id"];
    s = WebConfigurationManager.ConnectionStrings["LNDatabase"].ConnectionString;
    string str = "UPDATE products SET live = @hide WHERE prod_id=@product";

    using (OleDbConnection conn = new OleDbConnection(s))
    {
        using (OleDbCommand cmd = new OleDbCommand(str, conn))
        {
            OleDbCommand mycommand = new OleDbCommand();

            OleDbParameter hideparam = new OleDbParameter("@hide", OleDbType.Boolean);
            hideparam.Value = false;
            cmd.Parameters.Add(hideparam);
            OleDbParameter product = new OleDbParameter("@product", OleDbType.VarChar);
            product.Value = prodid;
            cmd.Parameters.Add(product);

            conn.Open();
            cmd.ExecuteNonQuery();
        }
    }
    Response.Redirect(Request.RawUrl);
}

protected void showproduct_click(object sender, EventArgs e)
{
    string prodid = Request.QueryString["prod_id"];

    s = WebConfigurationManager.ConnectionStrings["LNDatabase"].ConnectionString;
    string str = "UPDATE products SET live = @show WHERE prod_id=@product";

    using (OleDbConnection conn = new OleDbConnection(s))
    {
        using (OleDbCommand cmd = new OleDbCommand(str, conn))
        {
            OleDbCommand mycommand = new OleDbCommand();

            OleDbParameter hideparam = new OleDbParameter("@show", OleDbType.Boolean);
            hideparam.Value = true;
            cmd.Parameters.Add(hideparam);
            OleDbParameter product = new OleDbParameter("@product", OleDbType.VarChar);
            product.Value = prodid;
            cmd.Parameters.Add(product);

            conn.Open();
            cmd.ExecuteNonQuery();
        }
    }
    Response.Redirect(Request.RawUrl);
} 
```

抱歉，代码太长了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:51:12.990

如果命令按钮的目的是切换`[live]`Yes/No 字段的值，则让 db 引擎执行您需要的操作。

```
UPDATE products SET live = (Not live) WHERE prod_id=@product 
```

`Not`返回布尔值的倒数。所以`Not True`返回`False`和`Not False`返回`True`。因此，该`UPDATE`语句设置`live`为在执行`UPDATE`. 在 Access 会话中尝试将其作为新查询来检查它的运行方式。

如果这令人满意，您将不需要单独的隐藏和显示例程。

# generics - 如何在 Dart 中使用镜像获取泛型类型变量的具体类型？

> ID：14384865
> 
> 赞同：3
> 
> 时间：2013-01-17T17:36:27.233
> 
> 标签：generics, dart, dart-mirrors

假设我有一个这样`List`的。`String`

```
var myList = new List<String>(); 
```

我如何使用镜子找出那`myList`是 a `List`of s？`String`

* * *

我尝试使用`typeVariables`of`ClassMirror`但镜子似乎只是描述了通用`List`类。

```
InstanceMirror im = reflect(myList); // InstanceMirror on instance of 'List'
ClassMirror cm = im.type; // ClassMirror on 'List'
print(cm.typeVariables['E']) // TypeVariableMirror on 'E' 
```

我也在文档中找到了这一点，但我还没有找到`ClassMirror`访问`originalDeclaration`不会抛出`NoSuchMethodError`.

> **final ClassMirror 原声明**
> 
> 这种类型的原始声明的镜像。
> 
> 对于大多数类，它们是它们自己的原始声明。然而，对于泛型类，具有未绑定类型变量的原始类声明与具有绑定类型变量的泛型类的实例化之间存在区别。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-23T14:09:35.430

2种可能的方法。

第一种方法是使用`is`运算符检查变量的类型，因为它比反射更高效：

```
var myList = new List<String>();
print(myList is List<int>); // false
print(myList is List<String>); // true 
```

第二种方法是使用[ClassMirror.typeArguments](http://api.dartlang.org/docs/releases/latest/dart_mirrors/ClassMirror.html#typeArguments)：

```
import 'dart:mirrors';
var myList = new List<String>();

Map typeArguments = reflect(myList).type.typeArguments;
print(typeArguments); // {Symbol("T"): ClassMirror on 'String'}

ClassMirror firstTypeArg = typeArguments[typeArguments.keys.first];
print(firstTypeArg.reflectedType); // String 
```

# symfony - Symfony2：在服务中使用记录器的问题（作为参数传递）

> ID：14384867
> 
> 赞同：1
> 
> 时间：2013-01-17T17:36:33.490
> 
> 标签：symfony, monolog

我正在使用 Symfony 2.1 开发一个项目。

我创建了一个从控制器调用的服务，它工作正常。现在我需要该服务生成日志，并且我正在尝试以这种方式传递记录器：

```
soap.client:
    class: MyFirm\MyAppBundle\Service\SOAPClient
        arguments: 
            logger: "@logger" 
```

我的服务是这样定义的：

```
namespace MyFirm\MyAppBundle\Service;

use \SoapClient as SoapClient;

use Monolog\Logger;

class SOAPClient
{
    private $logger;

    function __construct (Logger $logger)
    {
        $this->logger = $logger;
    }

    function sendMessage ($message, $wsdl_url) 
    {
        $webServResult = "ERROR";

        try{
            $client = new SoapClient($wsdl_url, array("trace"=>true,
                    "exceptions"=>true));        
            $webServResult=$client->sendMessage($data);
        }
        catch(\Exception $ex){
            $webServResult="ERROR";
            $message=$ex->getMessage();
            $log_text = print_r($ex, true)."\n".
                    $client->__getLastRequest()."\n".
                    $client->__getLastResponse();
            $this->logger->err("ERROR: ".$log_text);            
        }               

        return $webServResult;
    }

} 
```

但是，当我使用记录器时（例如，如果 wsdl 不存在），应用程序会挂起。

我做错什么了吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:44:49.563

这不是来自记录器的问题，而是来自 SoapClient 的问题，在无法访问 WSDL 的情况下不会抛出任何异常......它一直等到抛出致命错误......

您必须在调用 SoapClient 之前检查 WSDl 是否存在；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:52:36.437

抱歉，问题不在记录器上，而是在以下行中：

```
 $log_text = print_r($ex, true)."\n".
                $client->__getLastRequest()."\n".
                $client->__getLastResponse(); 
```

如果我删除这些行并只记录异常消息，一切正常。如果未找到 WSDL，SoapClient 会生成异常：

```
SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://localhost/unknown.wsdl' : 
             failed to load external entity "http://localhost/unknown.wsdl" 
```

解决并修复。很抱歉垃圾邮件。

# c# - 命名空间不能直接包含 AssemblyInfo.cs 中的成员

> ID：14384872
> 
> 赞同：3
> 
> 时间：2013-01-17T17:37:02.090
> 
> 标签：c#, build

我有如下文件`AssemblyInfo.cs`。我想为 AssemblyVersion 定义一个字符串：

```
string version = "1.2.0.0"; 
```

但我收到一条错误消息：

> 命名空间不能直接包含成员

我该怎么做呢？

```
using System.Reflection;
using System.Runtime.InteropServices;

// Setting ComVisible to false makes the types in this assembly not visible  to COM components
[assembly: ComVisible(false)]

// The following GUID is for the ID of the typelib if this project is exposed to COM
[assembly: Guid("24f53cr8-552b-40d3-cds1-13e310ds6c3f")]

[assembly: AssemblyCopyright("1/10/2013")]

#if (DEVELOPMENT)
[assembly: AssemblyProduct("ShellDev")]
[assembly: AssemblyConfiguration("DEVELOPMENT")]
[assembly: AssemblyTitle("MMD Smart Client - Development Version")]
[assembly: AssemblyVersion("1.2.0.0")]
#endif

#if (RELEASE)
[assembly: AssemblyProduct("Shell")]
[assembly: AssemblyTitle("MMD Smart Client")]
[assembly: AssemblyVersion("1.2.0.0")]
#endif 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T17:42:53.850

C# 中没有全局变量。将字符串放在静态类中。

```
internal static class Version
{
   public const string VersionString = "1.2.0.0"; 
} 
```

然后像这样使用它：

```
[assembly: AssemblyVersion(Version.VersionString)] 
```

# authentication - 我在哪里处理 webapi 中的自定义身份验证和授权？

> ID：14384878
> 
> 赞同：1
> 
> 时间：2013-01-17T17:37:17.997
> 
> 标签：authentication, asp.net-mvc-4, asp.net-web-api, authorization

注意：我在下面的代码注释中有很多问题。我也需要这些问题的答案。

我已阅读（除其他外）以下文章：

*   [http://blogs.msdn.com/b/hongmeig1/archive/2012/05/11/how-to-write-a-custom-parameter-binding-to-construct-an-object-either-from-body- or-from-uri-s-query.aspx](http://blogs.msdn.com/b/hongmeig1/archive/2012/05/11/how-to-write-a-custom-parameter-binding-to-construct-an-object-either-from-body-or-from-uri-s-query.aspx)
*   [http://blogs.msdn.com/b/jmstall/archive/2012/05/11/webapi-parameter-binding-under-the-hood.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/05/11/webapi-parameter-binding-under-the-hood.aspx)

我希望我的 web api 使用 Authorization 标头在标头中发送身份验证。我希望将此标头填充到名为`AuthenticationToken`. 然后，当我进行参数绑定时，我想检索这个先前创建的`AuthenticationToken`对象并将其传递给我的控制器操作。例如，如果我有以下控制器

```
public class MyServiceController : ApiController {

    readonly ISecurityService _security;
    readonly IMyService _myService;

    // constructor values are injected
    public MyServiceController(ISecurityService security, IMyService myService) {
        _security = security;
        _myService = myService;
    }

    public SomeData GetASpecificItem(AuthenticationToken token, int id) {

       if (_security.IsAuthorized(token, Permissions.Read)) {
           return myService.DoStuffToGetSomeData(token);
       } else {
          var msg = new HttpResponseMessage(HttpStatusCode.Forbidden);
          throw new HttpResponseException(msg);
       }
    }
} 
```

和下面的参数绑定类

```
public class AuthenticationTokenParameterBinding 
  : HttpParameterBinding { // do I need to inherit from a different class?

  public override Task ExecuteBindingAsync(ModelMetadataProvider metadataProvider,
                                           HttpActionContext actionContext,
                                           CancellationToken cancellationToken) {
    try {

      AuthenticationToken token; // UPDATED: how can i get this from the data 
                                 //          available from inside this method?

      SetValue(actionContext, token);

      // is this the correct task to return on successfull parameter binding?
      return base.ExecuteBindingAsyn(metadataProvider, actionContext, cancellationToken);

    } catch {
      return Task<HttpResponseMessage>.Factory.StartNew(() => {
        var hpm = new HttpResponseMessage(HttpStatusCode.Unauthorized);
        hpm.Headers.Add("WWW-Authenticate","MyCustomScheme");
        return hpm;
      });
    }
  }
} 
```

如果这两个实现正确，那么控制器会自动获取`AuthenticationToken`授权时创建的实例。

我不知道在此过程之前在哪里进行身份验证。我也不知道如何在身份验证和授权之间传递对象。

**更新：** 我不能使用自定义`AuthorizeAttribute`，因为授权可能针对对象：

```
public SaveResponse Save(AuthenticationToken user, SomeObjectThatNeedsToBeSaved obj) {

  // NOTE: permissions are checked between the object and the user, not a role

  if (_security.IsAuthorized(user, obj, Permission.Modify, Permission.Create)) {

     // NOTE: other permissions we don't know about may need to be checked in the service call

     return new SaveResponse {
         Success = ISomeService.Save(user, obj); // bool return value
     }
  } else {
     // return 403 Forbidden      }
} 
```

我需要将令牌传递给控制器​​操作，但我还需要在令牌传递给控制器​​之前对其进行身份验证。由于所有这些都不一定基于角色，因此我看不到如何从自定义内部进行身份验证`AuthorizeAttribute`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:19:36.933

我使用了自定义**AuthorizeAttribute**来处理 Web API 的身份验证和授权。此属性用作过滤器，并将在请求到达您的 Web API 方法之前对其进行处理。在重写的**OnAuthorize**方法中，如果身份验证失败，您可以返回**HttpResponseMessage(System.Net.HttpStatusCode.Unauthorized)** **，**如果授权失败，则返回 HttpResponseMessage(System.Net.HttpStatusCode.Forbidden)，以便客户端可以区分这两种类型的错误。除了自定义**AuthorizeAttribute**之外，我还实现了自定义**MembershipProvider**和**RoleProvider**来处理我的特定安全要求和自定义数据库架构。

我使用基本身份验证来传递授权凭据。这会将凭据放在标题中。**使用 JQuery ajax函数的****beforeSend**事件处理程序非常简单。这是一个如何执行此操作的示例。

 **```
 getAuthorizationHeader = function (username, password) {
      var authType;
      var up = $.base64.encode(username + ":" + password);
      authType = "Basic " + up;
    };
    return authType;
 };

    $.ajax({
        url: _url,
        data: _data,
        type: _type,
        beforeSend: function (xhr) {
            xhr.setRequestHeader("Authorization", getAuthorizationHeader(username, password));
        },
        success: ajaxSuccessHandler,
        error: ajaxErrHandler
    }); 
```

这对在标头中发送的用户名/密码进行编码。请注意，仅依靠编码是不够的安全性，因为它很容易解码。您仍然希望使用 HTTPS/SSL 来确保通过网络发送的信息是安全的。

在 Web API 端，您可以创建一个自定义**AuthorizeAttribute**，它从标头中获取凭据、解码它们并执行您的授权过程。Web API 使用了一个单独的**AuthorizeAttribute ，而不是控制器。**创建自定义**AuthorizeAttribute**时，请务必使用**System.Web.Http.AuthorizeAttribute**作为基类。他们有不同的行为。用于控制器的那个将要重定向到登录页面，而用于 Web API 的那个会返回一个指示成功或失败的 HTTP 代码。如果授权未能区分由于授权而不是身份验证导致的失败，我将返回一个 HTTP 代码 Forbidden，以便客户端可以做出相应的反应。

 **下面是从可以在自定义**AuthorizeAttribute**中使用的标头获取凭据的示例方法。

```
 private bool GetUserNameAndPassword(HttpActionContext actionContext, out string username, out string password)
    {
        bool gotIt = false;
        username = string.Empty;
        password = string.Empty;
        IEnumerable<string> headerVals;
        if (actionContext.Request.Headers.TryGetValues("Authorization", out headerVals))
        {
            try
            {
                string authHeader = headerVals.FirstOrDefault();
                char[] delims = { ' ' };
                string[] authHeaderTokens = authHeader.Split(new char[] { ' ' });
                if (authHeaderTokens[0].Contains("Basic"))
                {
                    string decodedStr = SecurityHelper.DecodeFrom64(authHeaderTokens[1]);
                    string[] unpw = decodedStr.Split(new char[] { ':' });
                    username = unpw[0];
                    password = unpw[1];
                }
                gotIt = true;
            }
            catch { gotIt = false; }
        }

        return gotIt;
    } 
```

这是用于解码此方法中使用的标头数据的代码。

```
 public static string DecodeFrom64(string encodedData)
    {

        byte[] encodedDataAsBytes

            = System.Convert.FromBase64String(encodedData);

        string returnValue =

           System.Text.Encoding.ASCII.GetString(encodedDataAsBytes);

        return returnValue;

    } 
```

获得用户名和密码后，您可以执行授权过程并将适当的 HTTP 代码返回给客户端进行处理。

您可以使用自定义令牌执行类似的过程，或者如果您不想将密码/用户名存储在客户端中，则可以利用来回传递的 cookie。****

# c++ - 如何防止 std::vector 的特化

> ID：14384880
> 
> 赞同：15
> 
> 时间：2013-01-17T17:37:39.780
> 
> 标签：c++, templates, vector, boolean, specialization

我有一个模板类，它有一个 type 的数据成员`std::vector<T>`，其中 T 也是我的模板类的参数。

在我的模板类中，我有很多这样做的逻辑：

```
T &value = m_vector[index]; 
```

当 T 是布尔值时，这似乎无法编译，因为 std::vector 的 [] 运算符不返回布尔引用，而是返回不同的类型。

一些替代品（尽管我不喜欢其中任何一个）：

*   告诉我的用户他们不能使用 bool 作为模板参数
*   对我的类有专门的 bool （但这需要一些代码重复）

有没有办法告诉 std::vector 不要专门用于 bool？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T20:54:20.987

如果您的数据由 表示，则`T`您根本无法让模板化代码定期运行，因为这不是容器。正如@Mark Ransom 所指出的，您可以改用，例如通过这样的特征`bool``std::vector<bool>``std::vector<char>`

```
template<typename T> struct vector_trait { typedef std::vector<T> type; };
template<> struct vector_trait<bool> { typedef std::vector<char> type; }; 
```

然后`typename vector_trait<T>::type`在您当前使用的任何地方使用`std::vector<T>`. 这里的缺点是您需要使用强制转换从 转换`char`为`bool`。

您自己的答案中建议的另一种方法是编写具有隐式转换和构造函数的包装器

```
template<typename T>
class wrapper
{
public:
        wrapper() : value_(T()) {}
        /* explicit */ wrapper(T const& t): value_(t) {}
        /* explicit */ operator T() { return value_; }
private:
        T value_;
}; 
```

并`std::vector< wrapper<bool> >`在任何地方使用而无需投射。但是，这也有缺点，因为包含实`bool`参数的标准转换序列的行为与用户定义的转换不同`wrapper<bool>`（编译器最多可以使用 1 个用户定义的转换，并且可以根据需要使用尽可能多的标准转换）。这意味着具有函数重载的模板代码可能会被巧妙地破坏。您可以取消注释`explicit`上面代码中的关键字，但这会再次引入冗长。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T20:58:59.687

改为使用`std::vector<char>`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T21:05:36.190

以下内容对您有用吗？

```
template <typename T>
struct anything_but_bool {
    typedef T type;
};

template <>
struct anything_but_bool<bool> {
    typedef char type;
};

template <typename T>
class your_class {
    std::vector<typename anything_but_bool<T>::type> member;
}; 
```

不那么轻率，这个名字`anything_but_bool`可能应该是`prevent_bool`或相似的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T10:48:11.647

根据您的所有输入，我找到了一个更优雅的解决方案。

首先，我定义了一个包含一个成员的简单类。让我们称之为`wrapperClass`：

```
template <typename T>
class wrapperClass
   {
   public:
      wrapperClass() {}
      wrapperClass(const T&value) : m_value(value) {}
      T m_value;
   }; 
```

现在我可以像这样在我的模板类中定义我的 std::vector ：

```
std::vector<wrapperClass<T>> m_internalVector; 
```

由于`sizeof(WrapperClass<bool>)`也是 1，我希望它`sizeof(WrapperClass<T>)`总是等于`sizeof(T)`。由于数据类型现在不再是 bool，因此不执行特化。

在我现在从向量中获取元素的地方，我只需替换

```
m_internalVector[index] 
```

经过

```
m_internalVector[index].m_value 
```

但这似乎比使用特征将 bool 替换为 char，然后使用强制转换在 char 和 bool 之间进行转换（并且可能重新解释强制转换以将 char& 转换为 bool&）要优雅得多。

你怎么看？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T21:07:01.923

您可以使用自定义代理类来保存布尔值。

```
class Bool
{
  public:
    Bool() = default;
    Bool(bool in) : value(in) {}

    Bool& operator=(bool in) {value = in;}
    operator bool() const& {return value;}

  private:
    bool value;
}; 
```

这可能需要根据您的目的进行一些调整，但在这些情况下我通常会这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T21:02:54.320

有一种方法可以防止`vector<bool>`专业化：传递自定义分配器。

```
std::vector<bool, myallocator> realbool; 
```

以下文章有一些细节： [https ://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=98](https://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=98)

当然，这要求您可以控制`vector`定义，因此它可能不是您真正的解决方案。除此之外，它也有它自己的一些缺点......

# unity3d - 适用于 iOS 的 Unity3D 自定义代码签名身份

> ID：14384884
> 
> 赞同：1
> 
> 时间：2013-01-17T17:38:42.773
> 
> 标签：unity3d

默认情况下，Unity 3D 的 XCode 导出似乎使用“iPhone Developer”代码签名身份。我需要它是“iPhone Distribution”。

如何告诉 Unity 使用不同的身份名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:02:06.257

从我的[旧 iOS 笔记](http://forum.unity3d.com/threads/139684-FlightTest-this-device-has-not-been-given-permission-to-install-this-build)中，不确定这是否是您所说的：

> 在左侧面板的顶部，选择左侧图标以显示文件夹结构。它可能会被最小化，只显示“ **Unity-iPhone** ”。点击“ **Unity-iPhone** ”。在其右侧，它会显示“PROJECT”，下方带有“ **Unity-iPhone ”。**点击这个“ **Unity-iPhone** ”。选择右侧的“**构建设置”选项卡。**向下滚动到“**代码签名**”部分并在“发布”部分设置配置文件。

# crystal-reports - 有没有“Telerik to Crystal”报表转换器？

> ID：14384885
> 
> 赞同：0
> 
> 时间：2013-01-17T17:38:54.897
> 
> 标签：crystal-reports, telerik, report, converter

叠花！

我有一组基于 Telerik 构建的报告，我想将其转换为 Crystal Reports。有没有办法将这些报告从 Telerik 转换为 Crystal？到目前为止，我发现的只是一种相反的方法：从 Crystal 转换为 Telerik。

有谁知道实现这一目标的方法？

提前感谢您的考虑和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T14:51:21.173

没有这样的转换器可用。正如您所注意到的，Telerik 仅向其报告引擎提供转换器。

# sql - 即使 1 个表缺少连接行，如何编写多连接 SQL 查询并获取查询结果

> ID：14384892
> 
> 赞同：0
> 
> 时间：2013-01-17T17:39:11.463
> 
> 标签：sql, join

我有以下查询语句：

```
$query_string = '
    SELECT customerID, lastName, firstName, companyName, email, citizenship, primaryLanguage
    FROM customers
    JOIN citizenships USING(citizenshipID)
    JOIN languages USING(languageID)
    JOIN paymentMethods USING(customerID)
    WHERE customerID = "1"
'; 
```

目前，客户、公民和语言表每个都包含行并正确连接。我的查询结果为客户 #1 返回 1 行。

paymentMethods 表此时不包含任何行。当我将 paymentMethods 的连接语法添加到查询字符串时，我的查询结果为客户 #1 返回 0 行。

我想加入 paymentMethods 并且仅在 paymentMethods 表存在时返回一行，否则不会导致不返回任何客户行。

我该如何调整我的 JOIN 语法来实现这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:41:04.867

将其替换为`LEFT JOIN`：

```
SELECT  customerID, lastName, firstName, companyName, email, citizenship, primaryLanguage
FROM    customers
JOIN    citizenships
USING   (citizenshipID)
JOIN    languages
USING   (languageID)
LEFT JOIN
        paymentMethods
USING   (customerID)
WHERE   customerID = "1" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:41:09.120

```
$query_string = '
   SELECT customerID, lastName, firstName, companyName, email, citizenship,   primaryLanguage
   FROM customers
   JOIN citizenships USING(citizenshipID)
   JOIN languages USING(primaryLanguageID)
   LEFT JOIN paymentMethids USING(customerID)
   WHERE customerID = "1"
'; 
```

# ruby-on-rails - 如何使用 Unicorn 在 Heroku 上设置 nginx 重写规则？

> ID：14384894
> 
> 赞同：2
> 
> 时间：2013-01-17T17:39:12.960
> 
> 标签：ruby-on-rails, heroku, nginx, unicorn

我需要在 nginx 配置文件中设置一些规则。我对如何做到这一点有点迷失。这些是规则。

```
if (-f $document_root/cache/$host/$uri/index.html) {
  rewrite (.*) /cache/$host/$1/index.html break;
}

if (-f $document_root/cache/$host/$uri.html) {
  rewrite (.*) /cache/$host/$1.html break;
} 
```

我的问题是：

*   Rails 应用程序下的 nginx 配置文件位于何处以及该文件应如何命名？
*   Heroku 会自动读取它吗？我阅读了用于定制部署的 buildpacks，但对于我确实需要的东西来说看起来有点复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:01:42.207

您无权访问 Heroku 上的任何 nginx 配置。

[您应该改用rack/rewrite](https://github.com/jtrupiano/rack-rewrite)之类的东西。

你是对的，你不想为此使用自定义构建包:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-07T01:07:45.880

使用 nginx buildpacks 例如[https://github.com/ryandotsmith/nginx-buildpack](https://github.com/ryandotsmith/nginx-buildpack)

你可以在 custom/ 中配置你的 nginx

# jakarta-ee - 使用 WEB-INF/lib 而不是 EAR 的 lib 的原因？

> ID：14384899
> 
> 赞同：4
> 
> 时间：2013-01-17T17:39:32.600
> 
> 标签：jakarta-ee, war, ear

我正在重新考虑我一直认为理所当然的事情。即，在具有以下结构的 EAR 中：

```
EAR
 \-- boo-ejb.jar
 \-- foo-web.war
 |    \--WEB-INF
 |          \--lib
 \--lib 
```

..我想我理解正确的是，**WEB-INF/lib**用于仅 Web 应用程序所需的**jar**，EAR 级**lib**也用于**ejb.jar**所需的**jar**。基本原理是以某种方式使依赖关系更清晰。但是，为什么不直接转储 EAR 级**lib**文件夹中的所有内容呢？当然，如果存在某种冲突，我们希望了解并深入调查。这不是一个更干净的解决方案，更不容易掩盖潜在的兼容性/依赖不匹配问题吗？

 ***** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T12:21:23.673

你是绝对正确的 - 它会更清晰，更不容易出现依赖不匹配的错误。

但...

如果您不在 EAR 中分发 Web 应用程序，该怎么办？你会把库放在哪里？您将如何在不同的 EAR 中分发您的 webapps，以便您可以基于一组 webapps 组合企业应用程序？

WEB-INF/lib 也适用于只能包含资源的 jars（其中没有类）。然后，您会将面向 Web 的资源 jar 放入 EAR 级别的库中吗？我不这么认为。

使用 WEB-INF/lib 而不是 EAR 的 lib 可能有更多的理由，但上述两/三种情况至少应该足以说服您重新考虑管理库的策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T21:44:35.547

在 EAR 文件中，EAR 级别的 lib 文件夹跨越所有 Web 应用程序（即 EAR 中的所有 .war）。.war 中的 lib 用于仅对 web-app war 可用的库。

很多时候，您必须将特定库提升到 EAR 级别并设置类路径加载器首选项优先级设置（在提供的应用程序服务器和提供的 EAR 之间）jar。这是 WebSphere 等服务器的常见需求。

这是 maven 的示例战争配置，其中从 EAR 级别检索特定的 jar，并专门从 WAR 中排除：

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-war-plugin</artifactId>
<configuration>
    <archive>
    <manifestEntries>
         <Class-Path>lib/wsdl4j-1.6.2.jar lib/mail-1.4.jar</Class-Path>
    </manifestEntries>
    </archive>
    <packagingExcludes>WEB-INF/lib/wsdl4j-1.6.2.jar,WEB-INF/lib/mail-1.4.jar</packagingExcludes>
    <warSourceDirectory>${basedir}/src/main/webapp</warSourceDirectory>
    <warSourceExcludes>WEB-INF/jetty-env.xml</warSourceExcludes>
  </configuration>
 </plugin> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T14:23:20.880

我会说，如果您有一个可以自行运行并且可以自行部署的 Web 应用程序，那么它应该打包在一个 war 中。但是，如果不是……如果战争只是一个更大的应用程序的一个组件，并且这就是它始终交付/部署的方式，那么只需将 Web 应用程序所需的 Web 资源放入战争中，以及耳朵库中的所有代码罐。****

# ruby-on-rails - Rails：如何在加载时更新关联数据？

> ID：14384901
> 
> 赞同：0
> 
> 时间：2013-01-17T17:39:38.907
> 
> 标签：ruby-on-rails

如何在 Rails 3.x 中更新相关的负载数据？

当我加载一个股票代码时，如果它们已经过时，我想更新它的报价。由于 ActiveRecord 没有像 after_load 这样的回调，那么正确的方法是什么？

我的伪代码看起来像

```
class Stock < ActiveRecord::Base
   has_many :quotes, :limit => 15, :order => 'date desc'
   attr_accessible :symbol
   after_load :update_history

   #correct code is ( Thanks Dutow)
   after_initialize :update_history

   def update_history
      if (quotes.count > 0)
          today = Time.now
          get_and_store_history unless (quotes[0].updated_at >= today.beginning_of_day && quotes[0].updated_at <= today.end_of_day)
      end
   end

   def get_and_store_history
    #Update quotes
   end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:46:35.860

ActiveRecord 有一个名为[after_initialize](http://guides.rubyonrails.org/active_record_validations_callbacks.html#after_initialize-and-after_find)的方法，它是一个类似于 after_load 的回调。

# java - 如何从字符串中删除“0A”？

> ID：14384903
> 
> 赞同：-1
> 
> 时间：2013-01-17T17:39:45.800
> 
> 标签：java, special-characters

我正在尝试逐行读取文本文件并将这些行连接起来以创建单个字符串。但是在创建统一字符串时，`0A`会在每行之后添加。字符串本身只有一行，我`0A`在普通文本/Java 编辑器中看不到，但是当我在十六进制编辑器中打开它时，我可以在每一行之后看到“0A”。我正在使用 Linux (Ubuntu) 平台。

我已经尝试了所有可能的方法来删除它们，特别是[Java 如何从字符串中删除回车符（HEX 0A）？](https://stackoverflow.com/questions/6870858/java-how-to-remove-carriage-return-hex-0a-from-string)

但我无法删除它们。关于如何做到这一点的任何想法？

**更新：**

```
File workingFolderLocal = new File("src/test/resources/testdata");
String expected = "String1";

MyClass myClass = new MyClass();
myClass.createPopFile(workingFolderLocal);

// Read the created file and compare with expected output
FileInputStream fin = new FileInputStream(workingFolderLocal + "/output.xyz");
BufferedReader myInput = new BufferedReader(new InputStreamReader(fin));
StringBuilder actual = new StringBuilder("");
String temp = "";
while ((temp = myInput.readLine()) != null) {
    String newTemp = temp.replaceAll("\r", "");
    actual.append(newTemp);
}
System.out.println("actual: " + actual.toString());
myInput.close();

Assert.assertEquals(expected, actual); 
```

这是我得到的输出/错误：

```
actual: String1
FAILED: testCreatPopFile
junit.framework.AssertionFailedError: expected:<String1> but was:<String1>
    at junit.framework.Assert.fail(Assert.java:47)
    at junit.framework.Assert.failNotEquals(Assert.java:277)
    at junit.framework.Assert.assertEquals(Assert.java:64)
    at junit.framework.Assert.assertEquals(Assert.java:71) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:02:22.370

`expected`变量的类型是 ，而变量的`String`类型`actual`是`StringBuilder`。在...的意义上，这些对象永远不会相等

```
Assert.assertEquals(expected, actual); 
```

，因为它们有不同的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:27:14.583

在断言中，您是否需要使用 actual.toString ，因为它是一个字符串生成器？

为了接受答案，从评论中添加了这个。

@oheyder 也偶然发现了这一点。给他+1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T18:31:17.477

'0A' 是换行符（“\n”）。您只是删除回车符 ("\r") (0D)。尝试以与替换“\r”相同的方式替换“\n”。正如有人评论的那样， readline() 调用应该解决这个问题。

在 Windows 中，行以 \r\n 结尾在 *nix 行中，仅以 \n 结尾

见[换行](http://en.wikipedia.org/wiki/Newline)

# perforce - 如何在 perforce 中删除更改列表

> ID：14384906
> 
> 赞同：3
> 
> 时间：2013-01-17T17:39:56.043
> 
> 标签：perforce

我似乎无法弄清楚是否有办法在 perforce 中消除更改列表。这`p4 obliterate`是关键，但它似乎需要文件名。在我错误的更改列表中有很多文件，因此输入它们是不可行的。我可以通过更改列表删除吗？我确实看到了类似的[问题](https://stackoverflow.com/questions/13024386/delete-a-submitted-changelist-from-perforce-history)，但它们似乎是通过文件名+修订来完成的。

请注意，在我的情况下，我正在删除最新提交的内容，所以我知道它之后没有任何内容，这就是它安全的原因。我只需要通过更改列表而不是按名称获取 100 多个文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T17:09:53.800

尝试这个：

`p4 obliterate //...@=changelist`

它`//...`允许它在任何文件上运行（非常危险！）但`@=`修订说明符将其限制为该更改列表中包含的特定文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-01T20:19:47.210

作为完整的答案，您需要在命令行上执行此操作，我看不到任何通过 UI 的方法。

要调用命令行，请转到 perforce 安装文件夹（通常是 C:\Program Files\Perforce）并在此处启动 windows 命令窗口。

您需要为命令行设置环境，以便它与您的源数据库一起使用。我希望有一种方法可以从 Perforce UI 开始，但我在那里找不到。这样，它可能已经为您设置了环境变量。

运行`p4 Set`命令以查看环境变量及其当前值（本质上是 perforce 设置）。

您可能需要更改`p4port`和`p4passwd`.

```
p4 set p4port=<your-src-server>:1666 // to configure server 
```

如果需要，同样更改 perforce 密码和用户名。现在您应该可以通过命令行连接到 perforce 服务器了。

现在您发出 obliterate 命令。

# nuget - 如何使用 Nuget.Core 获取预发布的包列表？

> ID：14384914
> 
> 赞同：5
> 
> 时间：2013-01-17T17:40:33.327
> 
> 标签：nuget, nugetgallery

我正在尝试使用`Nuget.Core`来查找`Microsoft.Bcl.Immutable`包（它目前处于预发布状态）。`DataServicePackageRepository.SupportsPrereleasePackages`总是返回`false`，我找不到任何方法来改变它。

是否有办法使用 Nuget.Core API 处理位于 nuget.org 的预发布包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:46:16.303

问题是使用 v1 nuget API，位于`http://packages.nuget.org/v1/FeedService.svc/`. 第二版 API`http://packages.nuget.org/api/v2/`支持在搜索结果中公开预发布包。

# java - Grails 应用程序 - 将非 www 版本重定向到网站的 www 版本

> ID：14384915
> 
> 赞同：1
> 
> 时间：2013-01-17T17:40:37.493
> 
> 标签：java, tomcat, grails, redirect

我们的 Grails 应用程序部署在 VPS 上，但 www 和非 www 版本并不相同。实际上有两个站点，即浏览器中有两个cookie，每个版本一个，所以非www版本登录的用户没有登录www版本。

在 Grails 中将非 www 版本指向 www 版本的最佳方法是什么？我们使用 Tomcat 作为应用服务器。

我正在考虑创建一个 Grails 过滤器并将所有非 www url 更改为附加 www 的相同 url 并进行永久重定向。但我不确定这是否是一个好方法。我们在 Tomcat 前面没有 Apache 服务器，所以我们不能使用它的 url 重写机制。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:11:54.303

您可以访问主要的 Tomcat 配置吗？Tomcat 可以做虚拟主机，所以你可以用一个简单的 webapp 设置一个单独的虚拟主机来做重定向。

**conf/server.xml**

```
<Engine name="Catalina" defaultHost="localhost">
  <Host name="localhost" appBase="webapps" ...>
    <!-- current configuration, this Host will serve www.example.com -->
  </Host>

  <Host name="example.com" appBase="nonwww-webapps" />
</Engine> 
```

**非www-webapps/ROOT/WEB-INF/web.xml**

```
<?xml version="1.0" ?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">

  <servlet>
    <servlet-name>redirectToWww</servlet-name>
    <jsp-file>/WEB-INF/redirect.jsp</jsp-file>
  </servlet>

  <servlet-mapping>
    <servlet-name>redirectToWww</servlet-name>
    <url-pattern>/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

**非www-webapps/ROOT/WEB-INF/redirect.jsp**

```
<% response.sendRedirect("http://www.example.com" + request.getRequestURI() +
      (request.getQueryString() == null
          ? ""
          : ("?" + request.getQueryString())
      )); %> 
```

或者，如果您想要 301 而不是 302 重定向

```
<% response.setStatus(301);
   response.setHeader("Location", "http://www.example.com" + request.getRequestURI() +
      (request.getQueryString() == null
          ? ""
          : ("?" + request.getQueryString())
      ));
   response.setHeader("Connection", "close"); %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:15:25.600

如果您的 Tomcat 前面没有 Apache 服务器，您可以使用[UrlRewriteFilter](http://www.tuckey.org/urlrewrite/#download)。一种像 Apache 一样执行 URL 重写的工具，但直接使用 Tomcat（和其他 Web 应用程序服务器）。

# prolog - 运行prolog脚本时如何使prolog打印查询结果

> ID：14384917
> 
> 赞同：6
> 
> 时间：2013-01-17T17:40:38.260
> 
> 标签：prolog, gnu-prolog

我是 prolog 的新手，想将所有查询保存在一个文件中，而不是手动输入它们。

我有这些事实`facts.pl`：

```
likes(wallace, cheese).
likes(grommit, cheese).
likes(wendolene, sheep).

friend(X, Y) :- \+(X = Y), likes(X, Z), likes(Y, Z). 
```

在阅读了[这个问题](https://stackoverflow.com/questions/10059701/simple-prolog-issue-how-do-you-test-multiple-queries-against-your-prolog-databa)的答案后，我想出了以下代码`queries.pl`：

```
main :-
    write(likes(wallace, cheese)),
    halt.

:- initialization(['facts.pl']).
:- initialization(main). 
```

在这里，我想检查是否`likes(wallace, cheese)`成立，我期望输出类似`yes`or`no`但实际输出是`likes(wallace, cheese)`

我用谷歌搜索了很多并尝试过

`X = likes(wallace, cheese), write(X).`

`X is likes(wallace, cheese), write(X).`

`X := likes(wallace, cheese), write(X).`

但它们都不起作用。

这对你来说可能是一个非常简单的问题，但我不知道如何把事情做好。

顺便说一句，我正在使用 GNU Prolog 1.4.1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T17:57:36.013

我认为您需要一种“标记”每个查询的方法：这里有一个简单的方法

```
query(likes(wallace, cheese)).
query(likes(mickey, whisky)).

% service predicates, check the library and use that if available
forall(X,Y) :- \+ (X, \+ Y).
writeln(T) :- write(T), nl.

main :-
    forall(query(Q), (Q -> writeln(yes:Q) ; writeln(no:Q))),
    halt. 
```

# mysql - 何时使用 ON DELETE CASCADE

> ID：14384919
> 
> 赞同：1
> 
> 时间：2013-01-17T17:40:51.283
> 
> 标签：mysql, sql

我想知道使用 ON DELETE CASCADE 是否是个好主意，例如下面。因此，我对何时使用 ON DELETE CASCADE 删除行有了一个大致的了解。

**模块表：**

```
ModuleId (PK) ModuleNo  ModuleName
11            CHI2333    ICT 
```

**Course_模块表：**

```
CourseId  ModuleId (FK)
3          11 
```

**会话表（考试）：**

```
SessionId  SessionName  ModuleId (FK)
5           ASDEE        11 
```

在上面的示例中，如果我从`Module`表中删除一行，那么它将删除其他 2 个包含相同 ModuleId 的表中的行。在`Course_Module`表格中，它确定哪个课程包含哪些模块，在`Session`包含考试详细信息的表格中，它将删除包含已删除 ModuleId 的任何行（考试）。

对于上面的示例是否可以这样做，我的一般问题是在删除或删除父表中的行时使用 ON DELETE CASCADE 删除外键行是明智和正常的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:18:29.093

就我个人而言，我认为在您的代码中包含该逻辑而不是依靠数据库为您完成工作会更好。这就是我编写所有应用程序的方式。

只是我的2美分。

# c# - 使用 Json.NET 反序列化

> ID：14384922
> 
> 赞同：0
> 
> 时间：2013-01-17T17:41:01.930
> 
> 标签：c#, json.net

我正在寻找有关如何使用 Json.NET 反序列化对象的教程，但我找不到任何与我类似的教程。

我有一个这样的Json：

```
{
    "__ar":1,
    "payload":{
        "entries":[
        {
        "uid":100000011980844,
        "photo":"",
        "type":"user",
        "text":"testing",
        "path":"testing",
        "category":"",
        "needs_update":true,
        "non_title_tokens":"",
        "names":[
        "Test"
        ],
        "subtext":"",
        "score":0
        }
    ]
    }
} 
```

然后，我尝试像这样反序列化：

```
var j = JsonConvert.DeserializeObject<People> (json); 
```

进而：

```
public class People
{
    public string __ar { get; set; }
    public Payload payload { get; set; }
}

public class Payload
{
    public Person entries { get; set; }
}

public class Person
{
    public string uid { get; set; }
    public string photo { get; set; }
    public string type { get; set; }
    public string text { get; set; }
    public string path { get; set; }
    public string category { get; set; }
    public string needs_update { get; set; }
    public string non_title_tokens { get; set; }
    public string subtext { get; set; }
    public string score { get; set; }
    public List<string> names { get; set; }
} 
```

但它没有用，有谁知道我必须做什么来修复它？错误信息是：

> 无法将当前 JSON 数组（例如 [1,2,3]）反序列化为类型“QueryFacebook.Parser+Person”，因为该类型需要 JSON 对象（例如 {"name":"value"}）才能正确反序列化。要修复此错误，请将 JSON 更改为 JSON 对象（例如 {"name":"value"}）或将反序列化类型更改为数组或实现集合接口的类型（例如 ICollection、IList），例如可以从 JSON 数组反序列化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:47:08.013

只需如下更改`Payload`定义即可

```
public class Payload
{
    public Person[] entries { get; set; }
} 
```

# c++ - 在 C++ 中访问 lua 类函数

> ID：14384925
> 
> 赞同：2
> 
> 时间：2013-01-17T17:41:08.843
> 
> 标签：c++, oop, lua

我遇到了绑定 C++ 和 Lua 的问题。我在 Lua 中实现了一个简单的类系统，它使我能够使用另一个 lua 文件创建一个 lua 类的“实例”

```
require 'classname'
m_newObj = classname() --"classname() creates a new instance 
```

然后我可以使用 m_newObj 访问函数

```
m_newObj:functionname(parameter) 
```

这工作得很好，但我希望能够从 C++ 代码访问 lua 类的实例。

通常，您可以使用 C++ 创建对 lua 函数的访问

```
lua_State* pL = luaL_newState();
...
lua_getglobal(pL, "functionName");
lua_call(pL,0,0); 
```

但这仅调用 luafile 中的函数，它不会在“类”的特定实例上调用该特定函数。

所以基本上我想做的是

*   在 C++ 中访问 lua 类的实例
*   在特定实例上调用函数

我想这样做的原因是因为我发现在性能方面，在 lua 中使用 C++ 函数比在 C++ 中使用 lua 函数需要更多，所以能够使用 lua 来扩展实体而无需 lua 代码调用很多 C++ 函数我需要访问 C++ 中的 lua 类，而不是访问 lua 中的 C++ 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:29:05.600

将您的类推送到堆栈中，`lua_getfield()`从中提取函数，然后在调用函数之前将您的类复制回堆栈顶部。像这样的东西：

```
int nresults = 1;                  // number of results from your Lua function

lua_getglobal(L, "classname");
lua_getfield(L, -1, "funcname");
lua_pushvalue(L, -2);              // push a copy of the class to the top of the stack
lua_call(L, 1, nresults);          // equivalent to classname.funcname(classname) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:56:47.310

```
m_newObj:functionname(parameter) 
```

这是[语法糖](http://www.lua.org/manual/5.1/manual.html#2.5.8)：

```
m_newObj.functionname(m_newObj, parameter) 
```

因此，只需从您的 C++ 代码中执行等效操作即可。

# mysql - 如何在计算机之间更新mysql表

> ID：14384929
> 
> 赞同：2
> 
> 时间：2013-01-17T17:41:18.810
> 
> 标签：mysql, database-design, synchronize

我正在做一个小组项目，我们都有一个在本地机器上工作的 mysql 数据库。该表主要具有用于图像处理的文件名和统计信息。我们都将运行一些处理，用结果在本地更新数据库。

我想知道一旦有人更改了他们的数据库，最好的方法是更新其他人的数据库。

我的想法是`mysqldump`在每次处理运行后执行一次，并让 git 跟踪该文件（我们虔诚地使用它）。我已经为数据库编写了一堆 python 实用程序，当我们检测到数据库落后时，将这个转储读入数据库会很简单。不过，我真的不想这样做，更不用说每次提交都会用不必要的 10-50Mb 文件阻塞我们的 git 存储库。

有谁知道更好的方法来做到这一点？

*我还要注意，我们是航空航天专业的学生。我有一些数据库经验，但它只是出于需要。我们很忙，我不想成为 IT 网络专家。只是想为他们放手，因为他们是数据库新手，每当我告诉他们对数据库做任何事情时，都会露出恐惧的表情。到目前为止，我已经为他们做好了准备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:52:44.923

您可能需要考虑遵循 Rails 风格的数据库迁移概念，在开发过程中，您可以提供作为补丁工作的前滚和回滚 SQL 语句，允许您将数据库滚动到所需的任何特定修订状态。

当然，这通常仅用于处理模式更改（即您不必担心可能会动态填充到表中的修订数据。）。对于内容基本上是静态的配置表或类似表，您当然也可以添加迁移。

谷歌搜索“rails migrations for python”出现了许多结果，包括以下工具：

[http://pypi.python.org/pypi/simple-db-migrate](http://pypi.python.org/pypi/simple-db-migrate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:20:14.343

我建议在任何共享主机上创建一个 DEV MySQL 服务器。（不需要数据库经验）。
允许远程访问此服务器。（同样，不需要经验，一切都可以通过控制面板完成）
您和您的开发人员团队将可以随时从任何地点和任何设备访问数据库。（只要您有互联网连接）

# jquery - 我想用 JSTL Core 来代替 Jquery 格式化代码

> ID：14384930
> 
> 赞同：-2
> 
> 时间：2013-01-17T17:41:21.687
> 
> 标签：jquery, jsp, jstl

**CSS：**

```
 <style>
    body{font-family: arial; }
    .nopad{padding-bottom:5px;}
    .exBt:before {content: "[+]";float:left;padding-right:3px;}
    .exBt_nobtn {height:12px;width:12px;float:left;padding-left:50px;}
    </style> 
```

**查询：**

```
 <script>
jQuery(document).ready(function(){  
jQuery(".nopad").each(function(){
if (jQuery(this).find('div').hasClass('.exBt'))
    {
    jQuery(this).find(".taskName").css('font-weight','bold'); 
    jQuery(this).find(".taskName").css('font-size','16px');
    }   
});//end each
 });//end main
 </script> 
```

**HTML：**

```
 <div class="nopad">
    <div  class="exBt"></div>
    <div class="taskName">This is a title</div>
    </div>

    <div class="nopad">
    <div class="exBt_nobtn"></div>
    <div class="taskName">this is subcontent</div>
    </div>

   <div class="nopad">
   <div class="exBt_nobtn"></div>
       <div class="taskName">this is subcontent</div>
        </div> 
```

这段代码工作正常。我只是希望它与此一起工作：

```
 <div class="nopad${addDivClass}">
            <c:choose>//tests if heading content has child content
              <c:when test="${item.nestHead}"> 
              //if it has content use one class(add a-+ icon)
                     <div class="extBt" id="extBt-${item.itemId}"></div>
              </c:when>
              <c:otherwise>
          //if there is no child content loaded by ajax just indent with another class
                     <div class="extBt_nobtn" id="extBt-${item.itemId}"></div>
              </c:otherwise>
             </c:choose> 
```

我对 JSTL Core 很陌生，但我认为那样做会更干净——我只是不知道怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:09:14.593

如果我做对了，您希望您的 jstl 代码选择取决于 ajax 请求结果的东西。但这是不可能的，因为 jstl 代码在服务器端运行，而 javascript 在客户端运行。Jist 更仔细地阅读有关 jstl 和 jsp 的内容，您就会明白 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:52:06.437

```
<c:choose>
              <c:when test="${item.nestHead}"> //test for content
                     <div class="superset-head" style="font-weight:bold">${item.name}</div>//bold
              </c:when>
              <c:otherwise>
                     <div class="superset-head">${item.name}</div>//not bold

              </c:otherwise>
       </c:choose> 
```

那将是我想要完成的。我正在尝试仅学习基本语法并使其正确。

# php - “someurl/?a=2”和“someurl?a=2”有什么区别

> ID：14384933
> 
> 赞同：0
> 
> 时间：2013-01-17T17:41:39.897
> 
> 标签：php, url

我知道我们可以通过以下语法在 url 中发送变量：

```
http://www.example.com/index.php?a=1&b=2 
```

我知道我们有一些默认文件，如 index.html、index.php、...要重定向，我们可以重写上面的代码，如下所示：

```
http://www.example.com/?a=1&b=2 
```

但我不明白这是什么：

```
http://www.google.com/search?q=e 
```

这必须是：

```
https://www.google.com/search/?q=e 
```

他们一样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:43:54.640

这个：

```
http://www.google.com/search 
```

从技术上讲，这是一个名为的文件`search` ，并且：

```
https://www.google.com/search/ 
```

一个名为`search`并且通常会`index`自动重写到文件的目录。
阅读 Google 的这篇文章，了解有关所谓的“斜线”的更多信息：http: [//googlewebmastercentral.blogspot.de/2010/04/to-slash-or-not-to-slash.html](http://googlewebmastercentral.blogspot.de/2010/04/to-slash-or-not-to-slash.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:44:10.960

someurl/?a=2 将调用 someurl/index.php?a=2

someurl?a=2 将调用 someurl

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:50:51.157

坦率地说，
`http://www.example.com/?a=1&b=2`是一个捷径`http://www.example.com/index.php?a=1&b=2`

而`someurl`in`http://www.example.com/someurl?a=1&b=2`只是一个资源名称，类似于`someurl.php`or`someurl.html`或其他。点不是资源名称的强制要求

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T17:45:08.653

从严格的 URL 角度来看，不，它们是不一样的。根据处理请求的处理程序，它们可以为您提供相同的*结果*，但它们是不同的 URL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T17:46:06.877

不一定。“search”可以看作是一个没有结尾的文件，而“search/”可以看作是一个文件夹，默认页面（例如index.php）将被加载到该文件夹​​中。它也可以通过 URL 重写来定制。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-17T17:48:32.740

是的，以目录名（不是文件名）结尾的 URI 通常被视为与您`/`在它们后面键入 a 一样。所以

```
http://domain.tld/directory 
```

和

```
http://domain.tld/directory/ 
```

都被认为是`http://domain.tld/directory/default.file`

不管`?`后面有没有a和参数都是一样的。

换句话说，在您的示例中，`search`是目录的名称。

# python - 在pyplot中调整颜色条的颜色

> ID：14384935
> 
> 赞同：1
> 
> 时间：2013-01-17T17:41:52.080
> 
> 标签：python, matplotlib

> **可能重复：**
> [在 matplotlib 中设置颜色条范围在 matplotlib 中](https://stackoverflow.com/questions/3373256/set-colorbar-range-in-matplotlib)
> [定义颜色图的中点](https://stackoverflow.com/questions/7404116/defining-the-midpoint-of-a-colormap-in-matplotlib)

当您在 python (pyplot) 中有一个颜色条时，可能会有不对称的值范围

```
e.g. -4 -> 12 
```

但仍然以某种方式将白色/中性色（通常是颜色条的中点）设置为 0 - 即使在此示例中 0 趋向于颜色条的底部？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:08:47.303

有几种方法可以做到这一点。

听起来您可能想要使用`vmin`并`vmax`强制颜色栏的范围。那看起来像：

```
imshow(data, vmin=-12, vmax=12) 
```

这将允许您的数据具有 -4 到 12 的范围，并且颜色条的中心将为零，但颜色条将跨越 -12 到 12。这很有用，例如，在两个数据集之间的比较图中不同的范围，如在[这个 SO question](https://stackoverflow.com/questions/3373256/set-colorbar-range-in-matplotlib)中。

另一方面，如果您希望您的颜色条具有专门为您的数据范围派生的颜色图，特定颜色对应于特定值等，那么您需要制作自己的颜色图。这是一个麻烦，但不是太难。这是[一个例子](http://matplotlib.org/examples/pylab_examples/custom_cmap.html)。

# java - 如何在Java中获取对象的属性？

> ID：14384937
> 
> 赞同：2
> 
> 时间：2013-01-17T17:41:57.860
> 
> 标签：java

我有一个返回一个函数`Object`

该`toString()`方法表明我的对象有两个`BigDecimal`属性。但我不知道如何在代码中获取它们？

![在此处输入图像描述](../Images/c2d42bef12bc0d9cf84075c5082574cf.png)

我的函数使用休眠从查询中获取结果是：

```
public Object executeQuery(final String sql) {
    final Query query = getSessionFactory().getCurrentSession().createSQLQuery(sql);
    return query.list().get(0);
} 
```

谢谢你。

-- 附加信息：

```
obj.getClass().getDeclaredFields(); // empty array []
obj.getClass().getName();           // [Ljava.lang.Object;
final BigDecimal b = (BigDecimal) obj[0]; //Compilation error: The type of the expression must be an array type but it resolved to Object 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T17:44:00.727

`obj.getClass().getDeclaredFields()`能帮你。一般学习反射API。如果你反对 bean，你也可以使用 Jackarta BeanUtils。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:57:01.810

从您的评论来看，您的 Object 是和 Object 数组。

因此，您应该首先将结果转换为 Object 数组：

```
Object[] obj = (Object[]) query.list().get(0); 
```

然后，您应该能够像这样访问第一个 BigDecimal：

```
BigDecimal b = (BigDecimal) obj[0]; 
```

可能，您想添加一些异常处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T17:49:04.657

**更新：**

您有一个包含 2 列的结果集。

```
Object[] result= query.list().get(0);
BigDecimal number1 = (BigDecimal) result[0];
BigDecimal number2 = (BigDecimal) result[1]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T17:52:12.653

首先获取该对象的类名

```
System.out.println(obj.getClass()); 
```

由于您正在运行 sql 查询，因此结果可能是`Entity`or `Object[]`。

当您知道从查询中检索到的对象是一个时，`Object[]`您可以像这样迭代

```
if( obj instanceof Object[] ) {
       Object[] objA = (Object[])obj;
       for(Object atomicObj : objA ) {
         System.out.println(atomicObj);
       }
} 
```

它适用于对象数组中出现的所有元素。这次你可能会得到 BigDecimal，下一个查询可能会返回一个`String`and `BigDecimal`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T17:58:13.107

它不是一个对象，它是一个对象数组。

```
BigDecimal firstColumn = (BigDecimal) ((Object[])query.list().get(0))[0];
BigDecimal secondColumn = (BigDecimal) ((Object[])query.list().get(0))[1]; 
```

就这样。

# ios - 在ios中绘制一个简单的条形图，不使用Coreplot

> ID：14384939
> 
> 赞同：1
> 
> 时间：2013-01-17T17:42:11.140
> 
> 标签：ios, plot, bar-chart

我有两组包含 7 个对象的数组，其中一组包含值，另一组包含日期。

我想生成一个简单的条形图，其中 x 轴上的日期和 y 轴上的值。

我搜索了谷歌，当然也搜索了stackoverflow，但没有找到满意的答案。

在每个答案中，都是关于 Coreplot，我不想使用它，因为它很复杂（我是 ios 开发的初学者）。

除了CorePlot，还有其他方法可以实现这样的图表吗？或者有人可以为我提供一个使用内置苹果 API 进行绘图的示例

等待答复，非常感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:23:45.883

我尝试使用 coreplot，但它是一个巨大的框架，对于像我这样的初学者来说太棒了也太难了。所以我遇到了[OVGraph](https://github.com/owenv/OVGraphView)，这是一个可以满足我所有需求的基本框架，而且它也很容易使用，

像这样的东西：

```
OVGraphView *graphview=[[OVGraphView alloc]initWithFrame:CGRectMake(0, 0, 480, 300) ContentSize:CGSizeMake(960, 300)];

 //customizations go here

[self.view addSubview:graphview];

[graphview setPoints:@[[[OVGraphViewPoint alloc]initWithXLabel:@"today" YValue:@3.2 ],[[OVGraphViewPoint alloc]initWithXLabel:@"yesterday" YValue:@4 ],[[OVGraphViewPoint alloc]initWithXLabel:@"3" YValue:@6 ]]]; 
```

生成漂亮的图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:46:29.477

您需要在自定义 UIView 中执行此操作。

在 drawRect 方法中，您可以计算 x 轴和 y 轴的范围。然后，您需要将轴绘制到实际屏幕上，其中的数字显示值。

然后你需要计算出每根钢筋的厚度和高度。

然后将它们沿 x 轴绘制到它们的相关空间中。

在此之前，您需要提供背景颜色。也许是一些指导方针，以便用户可以轻松阅读这些值......

或者您可以使用[http://www.cocoapods.org](http://www.cocoapods.org)安装 CorePlot，它会为您完成这一切。

自己画图比花点时间学习如何使用 coreplot 要困难得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-05T10:44:40.080

另一个选项可以是[EChart](https://github.com/zhuhuihuihui/EChart)，它有`EColumnChart`

![在此处输入图像描述](../Images/1ff975e572e913f18d0863fc76d8248d.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-07T14:30:16.053

这个第三方项目对我来说效果很好，我发现这个设计比大多数其他项目要好得多。不幸的是，它是付费的，但它始终是一种选择:)

[http://www.binpress.com/app/ios-bar-chart-view/1836](http://www.binpress.com/app/ios-bar-chart-view/1836)

# google-apps-script - 使用 google apps 脚本管理 google 站点

> ID：14384942
> 
> 赞同：0
> 
> 时间：2013-01-17T17:42:22.503
> 
> 标签：google-apps-script, google-visualization, google-sites

我最近一直在玩 GAS 中的站点服务。我希望有一种方法可以添加或编辑嵌入式电子表格和图表。但是，我发现站点服务非常有限。我已经看过并且仍在围绕 Google 图表 API 进行思考，但我认为这不是为了与 Google 网站集成。

我的问题是首先，目前的服务是否可行，如果可以，什么是一个好的起点？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:46:52.463

关于嵌入图表 - 请参阅此[博客文章](http://googleappsdeveloper.blogspot.com/2011/09/visualize-your-data-charts-in-google.html)- 特别是周围的代码片段`addHostedAttachment`

开发人员文档中的一些其他资源可能对站点示例有用 -

*   [本教程](https://developers.google.com/apps-script/articles/helpdesk_tutorial#section5)包含有关如何将列表项从电子表格推送到 Google 站点的示例。
*   [另一个教程](https://developers.google.com/apps-script/articles/building-sites-app-part1#section5)展示了如何将 UI 嵌入到 Google 站点中。您可以使用相同的技术嵌入图表。

# razor - 除了可用的源代码之外，还有哪些资源提供了 Razor ViewEngine 语法或类似的描述性文档？

> ID：14384944
> 
> 赞同：0
> 
> 时间：2013-01-17T17:42:35.823
> 
> 标签：razor, grammar, viewengine

[除了可用的源代码](http://aspnetwebstack.codeplex.com/)之外，还有哪些资源提供了 Razor ViewEngine 语法或类似的描述性文档？

具体来说，我想研究视图引擎的基本原理是如何在编译之前派生和标记/解析的，我觉得有一些正式的定义定义了如何做到这一点。我有上面的源代码，但想要任何可用的权威文档来帮助描述它。

# python - 将 Join() 与多进程一起使用时出现阻塞问题

> ID：14384948
> 
> 赞同：1
> 
> 时间：2013-01-17T17:42:44.093
> 
> 标签：python, multithreading, multiprocessing

我不明白为什么下面的代码块。我试图简单地循环一段时间，然后向线程发送一条消息以停止。我的流程类如下。

```
class Worker(multiprocessing.Process):
    def __init__(self, queue):
        multiprocessing.Process.__init__(self)
        self.queue = queue
        self.running = True

    def run(self):
        print 'entered run'
        while self.running:
            print 'thread time:', time.time()
            time.sleep(.6)
        print 'thread end'
        return 0 
```

很直接。我的主要看起来像这样：

```
if __name__ == '__main__':
    queue = Queue()
    p = Worker(queue)
    p.daemon = True
    p.start()
    time.sleep(3)
    p.running = False
    print 'Main end' 
```

所以，我*期望*这个程序做的是启动一个进程，该进程将在 main 的一侧运行它自己的循环。发生这种情况时，`Main()`将休眠 3 秒，然后将工作进程内部的循环条件设置为 False，以便它跳出循环。然后他们都打印一个很好的“完成”消息，程序退出。但是，问题是`main`线程在进程有机会显示其消息之前就退出了。

例如，输出如下所示：

```
>> entered run
>> thread time: 1358444245.31
>> thread time: 1358444245.91
>> thread time: 1358444246.51
>> thread time: 1358444247.11
>> thread time: 1358444247.71
>> Main end 
```

所以，读了一点，我发现这`join()`是用来阻塞的，直到线程完成执行。`join()`在此之后，我在打破线程中的循环条件后立即添加一个调用。我的想法是，这将阻塞 main ，直到进程有时间自行关闭。

```
if __name__ == '__main__':
    queue = Queue()
    p = Worker(queue)
    p.daemon = True
    p.start()
    time.sleep(3)
    p.running = False
    p.join()          ## <------ New Line 
    print 'Main end' 
```

但是，这种行为出乎意料。一旦我添加了该行，线程就*永远不会*停止执行，因此 main 会无限期地阻塞。下面的输出将旋转到永恒。

```
>> entered run
>> thread time: 1358444362.44
>> thread time: 1358444363.04
>> thread time: 1358444363.64
>> thread time: 1358444364.24
>> thread time: 1358444364.84
>> thread time: 1358444365.44
>> thread time: 1358444366.04
>> thread time: 1358444366.64
>> thread time: 1358444367.24
>> thread time: 1358444367.84
>> thread time: 1358444368.44
>> thread time: 1358444369.04
>> thread time: 1358444369.64
>> thread time: 1358444370.24 
```

这里发生了什么？为什么当我添加时`join()`我的线程没有跳出它的循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:30:38.863

首先，`multiprocessing.Process`不创建 a `Thread`，它创建一个单独的进程来执行提供的函数。

您将需要用于`multiprocessing.Queue`在 2 个进程之间传递消息。

看看：[http ://docs.python.org/2/library/multiprocessing.html#exchanging-objects-between-processes](http://docs.python.org/2/library/multiprocessing.html#exchanging-objects-between-processes)

正如 Max Yakimets 所提到的，您正在第一个进程中修改值，但从未将消息传递给第二个进程。

`p.running`您需要在队列中添加一个项目，而不是更改该值。在此过程中，您需要检查队列中是否有任何消息在等待并对其做出反应（关闭、执行其他操作等）

# matlab - 在 Matlab 中从声音文件中读取数据

> ID：14384949
> 
> 赞同：0
> 
> 时间：2013-01-17T17:42:48.003
> 
> 标签：matlab, audio, processing

我正在尝试从用户指定的位置 X 到 Y 的 .wav 文件中读取数据。代码编译文件，但由于某种原因，wavread 函数未从指定位置读取。它在`y`向量中返回零。如果我不喜欢`[y,fs]=wavread('Kalimba.wav', [StartingTime EndingTime]);`，那么代码可以正常工作并返回非零数据。

为什么会发生这种情况，我该如何解决？

这是代码：

```
 function PlayFromXtoY(StartingTime,EndingTime)

% converting the startingTime and EndingTime to minutes

if StartingTime == 0
    disp('Zero')
    StartingTime=1;

elseif StartingTime < 1
         disp('Start <1')
         StartingTime=StartingTime*10;

    elseif StartingTime >= 1
            disp('Start >=1');
            StartingTime=StartingTime*60;
end

if EndingTime < 1
    disp('End <1');
    EndingTime=EndingTime*10;

elseif EndingTime >= 1
        disp('End >=1');
        EndingTime=EndingTime*60;
end

[y,fs]=wavread('Kalimba.wav', [StartingTime EndingTime]); % returning 0 in y for some reason

wavplay(y,fs); 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:54:26.153

您的第一个问题是您在调用之前对开始时间和停止时间进行了非常奇怪的修改`wavread`。`disp`如果这些真的有意义的话，它可以在通话之前的那些时候有所帮助。

然而，最重要的是，您将这些限制视为时间，而`wavread`实际上并非如此。根据他的文档，您通过的限制应该是样本数。

# grails - 在一页上显示不同语言环境的文本

> ID：14384952
> 
> 赞同：0
> 
> 时间：2013-01-17T17:42:56.360
> 
> 标签：grails, internationalization

我需要在我的 GSP 中以不同的语言环境显示句子。

以下文档指出 g:message 采用语言环境参数。

我在任何地方都找不到这样的例子。有人做过吗？

```
<p><g:message code="welcome.into.text1" locale="sv_SE"/></p>
<p><g:message code="welcome.into.text1" locale="en_US"/></p> 
```

显然，我有 messages_sv.properties 和 messages_en_US.properties。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T18:21:25.907

要明确指定语言环境，请使用 Locale 对象而不是 String，例如：

```
<g:message code="welcome.into.text1" locale="${Locale.US}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:14:15.683

[http://grails.org/doc/latest/guide/i18n.html](http://grails.org/doc/latest/guide/i18n.html)

[Grails如何更改当前语言环境](https://stackoverflow.com/questions/1569446/grails-how-to-change-the-current-locale)

# c++ - pragma omp 用于内部 pragma omp master 或 single

> ID：14384959
> 
> 赞同：4
> 
> 时间：2013-01-17T17:43:21.080
> 
> 标签：c++, openmp

我在这里坐了一些东西，试图使孤儿工作，并通过减少对`#pragma omp parallel`. 我正在尝试的是：

```
#pragma omp parallel default(none) shared(mat,mat2,f,max_iter,tol,N,conv) private(diff,k)
{
#pragma omp master // I'm not against using #pragma omp single or whatever will work
{
while(diff>tol) {
    do_work(mat,mat2,f,N);
    swap(mat,mat2);
    if( !(k%100) ) // Only test stop criteria every 100 iteration
         diff = conv[k] = do_more_work(mat,mat2);
    k++;
} // end while
} // end master
} // end parallel 
```

这`do_work`取决于先前的迭代，因此必须按顺序运行 while 循环。但我希望能够并行运行“do_work”，所以它看起来像：

```
void do_work(double *mat, double *mat2, double *f, int N)
{
int i,j;
double scale = 1/4.0;
#pragma omp for schedule(runtime) // Just so I can test different settings without having to recompile
for(i=0;i<N;i++)
    for(j=0;j<N;j++)
         mat[i*N+j] = scale*(mat2[(i+1)*N+j]+mat2[(i-1)*N+j] + ... + f[i*N+j]);
} 
```

我希望这可以通过某种方式完成，我只是不确定如何。所以我能得到的任何帮助都非常感谢（如果你告诉我这是不可能的）。顺便说一句，我正在使用 open mp 3.0、gcc 编译器和 sun studio 编译器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T18:01:08.100

原始代码中的外部并行区域仅包含一个串行片段 ( `#pragma omp master`)，这没有任何意义，并且有效地导致纯串行执行（无并行性）。由于`do_work()`取决于先前的迭代，但您想并行运行它，您必须使用同步。为此，openmp 工具是一个（显式或隐式）同步屏障。

例如（类似于您的代码）：

```
#pragma omp parallel
for(int j=0; diff>tol; ++j)    // must be the same condition for each thread!
#pragma omp for                // note: implicit synchronisation after for loop
  for(int i=0; i<N; ++i)
    work(j,i); 
```

请注意，`j`如果任何线程仍在处理当前`j`.

替代方案

```
for(int j=0; diff>tol; ++j)
#pragma omp parallel for
  for(int i=0; i<N; ++i)
    work(j,i); 
```

效率应该较低，因为它在每次迭代时都会创建一个新的线程团队，而不仅仅是同步。

# c# - Shell 扩展安装程序在卸载时关闭资源管理器

> ID：14384962
> 
> 赞同：1
> 
> 时间：2013-01-17T17:43:23.497
> 
> 标签：c#, windows-installer, windows-shell

我用安装程序创建了一个 C# 应用程序。该应用程序需要一个 shell 扩展，在了解了使用托管代码创建 shell 扩展的缺陷后，我决定采用 C++ 进行 shell 扩展。我成功地让 shell 扩展与现有代码和安装程序一起工作。要注册 C++ 扩展，我已将 Register 属性设置为 vsdrpCOMSelfRegister 以用于扩展主输出。当我测试卸载过程时，我会弹出一个窗口，要求我杀死资源管理器，以便删除文件。

安装程序项目中是否有设置将DLL设置为在重新启动后删除而不是杀死资源管理器？或者我应该切换到其他安装程序，如 Inno Setup？

# c++ - c++：#include 和不同的文件类型

> ID：14384963
> 
> 赞同：1
> 
> 时间：2013-01-17T17:43:24.387
> 
> 标签：c++

我不知何故无法抓住这个想法，阅读文档对我没有帮助。

我的问题是：

1.  当我包含一个头文件#include“general.h”时，在我的项目目录中有两个文件general.h和general.cpp，是否意味着我的预编译器会自动找到.cpp文件？
2.  我可以包含没有扩展名的文件：#include “general”吗？
3.  我可以包含一个没有任何头文件的文件：#include “general.cpp”吗？
4.  我可以包含一个 txt 文件：#include "general.txt" 吗？

我在 Visual Studio 2010 中尝试了这一切。至少没有语法错误。但我想有个解释。所以，我希望你能善待我并帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T17:54:50.337

标准和编译器并不真正关心文件是`.cpp`or`.h`还是`.monkeyface`. 将源代码结构化为实现和头文件背后的概念实际上只是帮助管理源代码的公认方法。尽管如此，不以公认的方式构建源代码通常被认为是不正确或糟糕的 C++。

所做的只是告诉预处理器将您指定的文件的内容包含在`#include`当前文件中。这就像将其他文件复制并粘贴到您的文件中一样。当您说`#include "foo.h"`时，它只包含 的内容`foo.h`并且根本不关心`foo.cpp`- 它甚至不知道它存在（并且没有理由必须存在）。

在实现和头文件中构建源代码非常有用 - 它避免了依赖项和多个定义的问题，并且还可以在一定程度上缩短编译时间。当您的代码使用另一个类时，您只需要该类`#include`的头文件。原因是您的代码不需要关心类的实现，它只需要知道它的样子（它的名称、成员、基类等）。它不关心成员函数是如何实现的。

扩展`.cpp`和`.h`仅仅是约定。有些人喜欢使用`.hpp`头文件。有些人甚至使用`.tpp`模板实现。您可以随意命名它们 - 是的，您甚至可以包含一个`.txt`文件。您的编译器可能会尝试从文件扩展名推断有关文件的内容（例如，将其编译为哪种语言），但这通常是可覆盖的。

因此，如果您`main.cpp`包含`foo.h`因为它使用 class `foo`，那么在什么时候`foo.cpp`参与？好吧，在编译中`main.cpp`，它根本不涉及。`main.cpp`不需要知道类的实现，就像我们上面讨论的那样。但是，在编译整个程序时，您会将每个`.cpp`文件传递给编译器以单独编译。也就是说，你会做类似的事情`g++ main.cpp foo.cpp`。编译时`foo.cpp`，它将包含*它*需要编译的头文件。

在您的每个`.cpp`文件都被编译后（包括包括它们所依赖的头文件），然后将它们链接在一起。在这个阶段，成员函数的使用`foo::bar()`将`main.cpp`与 中`foo::bar()`给出的实现相关联`foo.cpp`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:45:49.463

该`#include`指令告诉预处理器读取文件。就这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T17:46:51.443

预处理器在遇到#include 指令时简单地插入给定文件的全部内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T17:46:58.853

1.  不，预编译器对 .cpp 文件一无所知

2.  是，如果文件没有扩展名

3.  您可以包含任何您想要的文件。这并不意味着你会从中得到任何有用的东西。

4.  见上文第 3 点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T17:54:52.383

`#include`是一个简单的“在此处插入给定文件的内容”机制，因此预处理器将完全包含您指定的文件。如果包含 .h 文件，预处理器和编译器都不会知道相应的 .cpp 文件 - 每个 .cpp 文件都是单独编译的（.h 文件的目的是告知编译器哪些函数存在于当前的 .cpp 文件）。编译后，调用*链接器*，然后将不同.cpp文件的编译结果合并。

# extjs - 在 ExtJS 组件中如何将 config: {} 项转发到子组件

> ID：14384966
> 
> 赞同：7
> 
> 时间：2013-01-17T17:43:32.863
> 
> 标签：extjs, model-view-controller, extjs4, extjs4.1, extjs4.2

我正在尝试编写一个可重用的项目选择面板，其中用户有一个网格，其中包含他可以选择的项目和一个可以用来过滤网格内容的小文本字段。现在（简化的）视图代码看起来像这样并且**可以工作**。

```
Ext.define('MyApp.view.items.ItemSelectorPanel', {
    extend: 'Ext.panel.Panel',
    require: 'MyApp.view.items.SimpleItemGrid',
    alias: 'widget.ItemSelectorPanel',
    layout: 'form',

    config: {
        itemStore: false
    },

    constructor: function(config) {
        this.initConfig(config);

        this.superclass.constructor.call(this, config);

        this.add([
            {
                fieldLabel: 'Filter',
                name: 'filter'
            },
            {
                xtype: 'SimpleItemGrid',
                collapsible: true,
                store: this.getItemStore()
            }
        ]);

        return this;
    }
}); 
```

如您所见，`ItemSelectorPanel`使用该`config`属性来公开一个接口，调用站点可以在该接口中指定要使用的项目商店。

调用站点（在这种情况下，面板被添加到 TabPanel）：

```
var panelToAdd = {
    xtype: 'panel',
    title: 'New Selection',
    closable: true,
    padding: 10,
    items: [{
        title: 'Select node',
        xtype: 'ItemSelectorPanel',
        itemStore: itemStore
    }]
}; 
```

现在，我喜欢 ExtJS 4 的声明式风格以及它如何帮助遵循 MVC 模式。我希望视图中的代码量尽可能少。不幸的是，这**不起作用**：

```
Ext.define('MyApp.view.items.ItemSelectorPanel', {
    /* ... same as above ... */

    constructor: function(config) {
        this.initConfig(config);

        this.superclass.constructor.call(this, config);

        return this;
    },

    items: [
            {
                fieldLabel: 'Filter',
                name: 'filter'
            },
            {
                xtype: 'SimpleItemGrid',
                collapsible: true,
                store: this.getItemStore   // <-- interesting part
            }
    ]
}); 
```

`config`有没有办法通过父属性的属性**以声明方式**公开嵌套/子组件的配置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T10:49:41.610

## 首先是一般情况

**除非您确切知道自己要做什么，否则**切勿在类定义中的函数之外添加对象。**因为如果你这样做，所有实例都将共享该对象的**同一个**实例。我想我不需要提及这会导致...**

 **如果您需要在那里放置一个对象，您应该在构造函数中克隆它。

## 到你的代码

我不知道是什么`this.initConfig(config);`，但`config`变量不是你的类中的那个，它是构造函数参数中的那个。我建议您也使用`initComponent()`初始化而不是`constructor()`使用构造函数，除非您明确需要使用构造函数，在您的情况下，您似乎没有。

'config' 也不会被转发，因为它不会被执行 up->bottom 而是bottom->up ，其中配置获取的手和所有其他属性（已经）被继承。

*我仍然不完全知道你的目标是什么，因此我不能给你任何建议你应该如何做到这一点，但我可以肯定地说你这样做的方式会导致问题。*

## 编辑

我仍然不确定我是否完全理解您的需求，但以下应该可以工作（如果您也需要听众，您可以看看**[`Ext.util.Bindable`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Bindable)**mixin）

```
Ext.define('MyApp.view.items.ItemSelectorPanel', {
    extend: 'Ext.panel.Panel',
    require: 'MyApp.view.items.SimpleItemGrid',
    alias: 'widget.ItemSelectorPanel',
    layout: 'form',

    initComponent: function() {
        // Initialize the store (might be a instance or a storeId)
        var store;
        if (this.itemStore) {
            store = Ext.data.StoreManager.lookup(store);
        }
        this.itemStore = store || null;
        // Add is not valid (at least not before the parent inits are executed)
        this.items = [{
            fieldLabel: 'Filter',
            name: 'filter'
        }, {
            xtype: 'SimpleItemGrid',
            collapsible: true,
            store: this.getItemStore()
        }];

        this.callParent(arguments);
    },

    getItemStore: function() {
        return this.itemStore;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:59:45.443

不，您不能按照您描述的方式进行操作。原因很简单，我们举个例子：

```
Ext.define('MyClass', {
    someProp: this.foo(),

    foo: function(){
        return bar;
    }
}); 
```

在这里，我们调用 define() 方法，并将一个对象作为配置传递给它。因此，整个对象（包括对 foo() 的调用）在它被传递给定义之前就被评估了，所以类/方法在那个时候甚至不存在。

即使您可以这样做，这也是 foo 是类上的实例方法的复杂性，但是您尝试调用它的方式就好像它是静态方法一样。

所以，答案是，你需要使用某种方法来做到这一点，initComponent 通常比构造函数更受欢迎。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-10T23:52:09.550

我没有看到解决原始问题的答案。这是我发现的工作......

创建一个 myClass 的实例，传入一个值为 'bar' 的配置 'foo'

```
var myClassInstance = Ext.create('MyApp.view.myClass', {
    foo: 'bar'
}); 
```

myClass 定义如下：

```
Ext.define('MyApp.view.myClass', {
extend: 'Ext.container.Container',
alias: 'widget.myclass',

config: {
    foo: 'defaultVal'
},

constructor: function(configs) {
    this.callParent(arguments);  //create class, calls initComponent

    var try1 = getFoo(); //try1 is 'defaultVal'
    this.initConfig(configs);  //initializes configs passed in constructor
    var try2 = getFoo(); //try2 is 'bar' 
},

initComponent: function() {
    //myClass declaration here ...

    this.callParent();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T11:09:56.530

您可以在类的声明中定义项目，但在声明时不能从类中调用任何方法。为了解决这个问题，只定义没有商店的项目，而不是使用 initComponent 方法为您的视图设置商店。**

# javascript - jQuery 1.9.0 打破 $.attrFn 对象

> ID：14384967
> 
> 赞同：9
> 
> 时间：2013-01-17T17:43:36.220
> 
> 标签：javascript, jquery

我编写了一个有用的“移动”事件库（[在此处可用](https://github.com/benmajor/jQuery-Mobile-Events)）。它本质上统一了触摸事件，因此可以将单个事件绑定到元素，并且无论用户的设备（即移动设备或桌面设备）如何都会触发。

代码运行良好，但在调试用户问题时，我注意到在使用 jQuery 1.9.0 时该库不再起作用（所有以前的 jQuery 版本都不会导致问题）。

有问题的代码如下：

```
// Add Event shortcuts:
$.each(('tapstart tapend tap singletap doubletap taphold swipe swipeup swiperight swipedown swipeleft scrollstart scrollend orientationchange').split(' '), function(i, name)      {
    $.fn[name] = function(fn)
    {
        return fn ? this.bind(name, fn) : this.trigger(name);
    };
    $.attrFn[name] = true;
}); 
```

`Uncaught TypeError: Cannot set property 'tapstart' of undefined`以下行的错误：

`$.attrFn[name] = true;`

谁能指出我为此制作修复程序的方向？

我整理了 2 个 jsFiddle 演示来说明问题：

*   [工作版本](http://jsfiddle.net/9J3Qw/3/)（使用 jQuery 1.8.3）
*   [非工作版本](http://jsfiddle.net/9J3Qw/4/)（使用 jQuery 1.9.0）

如果我定义`$.attrFn`，这会修复`swipe*`事件的代码，但会导致其他事件出现问题，例如`tap`和`doubletap`。例如，绑定`tap`现在产生错误：`Uncaught TypeError: Cannot call method 'call' of undefined`，有问题的行是：

```
$.event.handle.call( obj, event ); 
```

再次，有两个 jsFiddles 供参考：

*   [工作版本](http://jsfiddle.net/9J3Qw/6/)（使用 jQuery 1.8.3）
*   [非工作版本](http://jsfiddle.net/9J3Qw/7/)`$.attrFn = $.attrFn || {};`（使用带有修复的jQuery 1.9.0 ）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T17:48:04.610

该对象 ( `.attrFn`) 只是 1.8 中的一个存根；它在 1.9 中消失了。

如果您的代码在 1.8 中工作，您应该能够添加

```
$.attrFn = $.attrFn || {}; 
```

在某个地方修复它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T17:49:21.850

[来自 jQuery 1.9 发行说明](http://jquery.com/upgrade-guide/1.9/)

> **其他未记录的属性和方法**
> 
> 以下内部属性和方法从未记录在案，并已在 1.9 中删除。任何依赖于它们的代码都应该被重写。
> 
> *   jQuery.deletedIds
> *   jQuery.uuid
> *   **jQuery.attrFn**
> *   jQuery.clean()
> *   jQuery.event.handle()
> *   jQuery.offset.bodyOffset()

# windows - 如何在 Windows 中执行命令行输出而无需生成 bat 文件？

> ID：14384976
> 
> 赞同：1
> 
> 时间：2013-01-17T17:44:01.053
> 
> 标签：windows, shell, pipe

我做了一个小脚本来提取我在 Mercurial 中的所有子存储库中的最新（不更新它们），以进行一个非常特殊的实验（与另一个 VCS 集成，我必须在不同的子存储库中打破它的存储库），这需要所有子存储库同步。

为此，第一步是以下命令：

```
cat .hgsubstate|sed -r s:^\w+\s(.*):\1:g|sed -r s:(.*):'hg pull -R \1 perforce':g 
```

这给了我作为输出我必须逐行执行的所有命令，但是我在 Windows 中并且没有 eval 将它们传送到（我有 cygwin）：

```
hg pull -R apps/canservice perforce
hg pull -R apps/hmi perforce
hg pull -R apps/lua perforce 
```

我不想生成一个bat文件，执行它然后删除它，那么，有没有其他方法可以一次性完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:46:35.147

这在过去对我有用

```
foo | bar | cmd.exe 
```

# xampp - php.ini 设置在 XAMPP 上被忽略

> ID：14384977
> 
> 赞同：2
> 
> 时间：2013-01-17T17:44:04.730
> 
> 标签：xampp, php

我安装了*XAMPP*以使用 OpenCart 构建电子商务网站。我把 OpenCart 安装在

```
C:\xampp\htdocs\opencart\upload 
```

我`php.ini`在其中设置文件并设置

```
memory_limit = 1G
max_execution_time = 600. 
```

我遇到的问题是这些设置被某些东西覆盖了。当我运行时`phpinfo()`，它显示`memory_limit`为**128M**和`max_execution_time = 30`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:46:47.500

您是否将`php.ini`文件放在该目录中？因为那不是它所属的地方。你应该再看看输出`phpinfo()`。它会告诉您该文件正在从中读取配置设置。那是您需要更新的文件。

# java - 根据资源包键的存在有条件地显示 HTML 块

> ID：14384978
> 
> 赞同：1
> 
> 时间：2013-01-17T17:44:05.563
> 
> 标签：java, javascript, html, jsf, facelets

我正在使用 JSF，我必须加载一个名为 Extra 的包。

```
<f:loadBundle basename="com.ni.lib.extra.delivery.ExtraBundle" var="extra" /> 
```

在这个额外的变量中，有一个名为 downtime_notice 的值。现在，如果该值不为空，我必须显示一个 css 段，其中包含 downtime_notice 值中的文本。像这样的东西（当然这不起作用）：

```
if(extra.donwtime_notice!=''){
            <div class="pnx-msg pnx-msg-warning clearfix">
                <i class="pnx-msg-icon pnx-icon-msg-warning"/>
                <span class="pnx-msg-content"><h:outputText value="#{extra.downtime_notice}" escape="false"/></span>
            </div>
            </br>
} 
```

我可以使用javascript，以防万一。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:03:46.983

您可以使用`<ui:fragment>`或`<h:panelGroup>`有条件地呈现内容。您可以使用`empty`EL 中的关键字来检查变量是否不为空或不为空。所以，所有这一切都应该做：

```
<ui:fragment rendered="#{not empty extra.donwtime_notice}">
    <div class="pnx-msg pnx-msg-warning clearfix">
        <i class="pnx-msg-icon pnx-icon-msg-warning"/>
        <span class="pnx-msg-content"><h:outputText value="#{extra.downtime_notice}" escape="false"/></span>
    </div>
</ui:fragment> 
```

或者，使用`<h:panelGroup layout="block">`which 已经呈现`<div>`：

```
<h:panelGroup layout="block" styleClass="pnx-msg pnx-msg-warning clearfix" rendered="#{not empty extra.donwtime_notice}">
    <i class="pnx-msg-icon pnx-icon-msg-warning"/>
    <span class="pnx-msg-content"><h:outputText value="#{extra.downtime_notice}" escape="false"/></span>
</h:panelGroup> 
```

请注意，有些人可能会选择使用`<f:verbatim>`该作业，但自 JSF2 以来已*弃用此标记。*

### 也可以看看：

*   [有条件地显示 JSF 组件](https://stackoverflow.com/questions/4870462/conditionally-displaying-jsf-components/4870557#4870557)
*   [JSF 中 ui:fragment 的替代方案](https://stackoverflow.com/questions/3713468/alternative-to-uifragment-in-jsf/3714063#3714063)

* * *

**与具体问题无关**，该`</br>`标签是无效的 HTML，所以我在示例中省略了它。

# javascript - 如何改进以下回调模式？

> ID：14384982
> 
> 赞同：0
> 
> 时间：2013-01-17T17:44:39.627
> 
> 标签：javascript, function, design-patterns, callback

我有以下模式，通过它们的回调将函数 1、2 和 3 串在一起。

假设功能 1、2 和 3 最多可能需要 1 秒才能完成。我想知道其他“更好”的方法来做同样的事情，这样当嵌套更多的回调函数时它就不会变成怪物。

```
function1(function(cbData1){
  if(cbData1){
    function2(cbData1, function(cbData2){
      if(cbData2){
        function3(cbData2, function(cbData3){
          // success
        }
      } else {
        // failed for reason#2
      }
    });
  } else {
    //failed for reason#1
  }
});

//example function
function function2(data, callback) {
  // do dirty things
  callback(newData);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:56:38.603

如果我理解正确，您需要将回调组织成一个链。看看[责任链](http://www.oodesign.com/chain-of-responsibility-pattern.html)模式。

因此，您将创建一个对象，其中包含要执行的函数和要在需要时执行的回调函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:55:04.577

上次我玩非常讨厌的回调时，我最终做了这样的事情：

```
// Typed on the fly, be kind
var callbackList = [];  // A list of functions to call in order.

function doNextCallback() {
  if (callbackList.length) {
    var f = callbackList.shift(); // Get the next callback function
    window.setTimeout(f);         // Give breathing space.
  }
}

// Set up our callbacks
callbackList.push(f1);
callbackList.push(f2);
callbackList.push(f3);

// Start it happening.
doNextCallback();          

function f1() {
  console.log("Busy busy");
  doNextCallback();
}

function f2() {
  console.log("Busy busy");
  doNextCallback();
}
function f3() {
  console.log("Busy busy");
  doNextCallback();
} 
```

我把它全部包裹在一个漂亮的物体中，但你明白了。

这也使得重新安排回调或在一个大循环中仅调用其中两个以进行测试变得非常容易。

# java - zk 验证中的问题

> ID：14384983
> 
> 赞同：2
> 
> 时间：2013-01-17T17:44:45.633
> 
> 标签：java, zk

我正在使用带有 zk 输入约束的验证。单击保存按钮时，`doSave`仍会调用，但不应调用。

我想在触发时做，必须停止保存操作。

另一个问题是，zk 允许 % in `Intbox`。

这是我尝试过的。

验证.zul

```
<zk>
<window width="100%" height="100%"
    apply="org.zkoss.bind.BindComposer"
    viewModel="@id('vm') @init('com.test.Validation')">

    <toolbar id="listToolbarProcess" sclass="vista" height="20px"
        align="start">

        <toolbarbutton label="Save" onClick="@command('doSave')" ></toolbarbutton>

    </toolbar>

    <vlayout sclass="vertical-scroll" vflex="1">

        <intbox id="priority" value="@bind(vm.value)" maxlength="3"
            constraint="no empty" ></intbox>
            <datebox value="@bind(vm.date)"></datebox>
    </vlayout>

</window> 
```

验证.java

```
 package com.test;

 import java.sql.Timestamp;

 import org.zkoss.bind.annotation.AfterCompose;
  import org.zkoss.bind.annotation.Command;
   import org.zkoss.bind.annotation.ContextParam;
   import org.zkoss.bind.annotation.ContextType;
   import org.zkoss.zk.ui.Component;

  public class Validation {

/**
 * @author Himanshu
 */
Integer value;

public Integer getValue() {
    return value;
}

public void setValue(Integer value) {
    this.value = value;
}
    Timestamp date;
public Timestamp getDate() {
return date;
    }

    public void setDate(Timestamp date) {
this.date = date;
     }

@AfterCompose
public void afterCompose(@ContextParam(ContextType.VIEW) Component view) {

}

@Command
public void doSave() {

    System.out.println(" value =" + value);
    System.out.println(" Date Value =" + date);
}

} 
```

谢谢 Himanshu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:19:19.010

请阅读zk doc 的[这一](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/MVVM/Data%20Binding/Validator)部分。它解释了如果验证失败，如何避免
调用数据绑定方法。

如果您希望输入（不）接受`%`，请使用[带有 regex 的文本框](http://books.zkoss.org/wiki/ZK_Component_Reference/Input/Textbox)。
如果你想屏蔽你的输入，[看这里](http://www.zkoss.org/zkdemo/effects/form_effect)。

# security - 如何制作可以手动验证的文档？

> ID：14384984
> 
> 赞同：0
> 
> 时间：2013-01-17T17:44:47.193
> 
> 标签：security, language-agnostic

这是我的情况的（简化）示例。
用户玩游戏并获得 200 分的高分。我用金钱奖励高分，即 1 欧元/10 分。用户将打印一张“收据”，上面写着他赢得了 20 欧元，然后他把它给了我，**我确保收据是真实的并且以前从未使用过**，然后我把他的奖品交给他。
显然，我的“问题”在粗体部分。我应该能够手动验证“收据”，但也欢迎使用其他离线方法的解决方案（即我手机的小型 .jar 应用程序）。此外，制作假收据一定很难。

到目前为止，这是我的想法，它们的优点和缺点。

*   **使用常用算法进行散列，**即 SHA512

    *   *优点*：可以很容易地通过移动设备进行验证，具有很强的抵抗力以更高的值伪造它（如果使用依赖于上下文的盐，即用户名）。
    *   *缺点*：可以多次使用，不能手动验证。
*   **自制哈希算法**

    *   *优点*：可以手动验证。
    *   *缺点*：可能容易坏，可以多次使用。
*   **证书代码**：我有两个数据库中的代码列表，一个在服务器上，一个在我的手机上。每次打印收据时，都会在其中打印一张收据，并将其设置为“已使用”到数据库中。在我的手机上，我也这样做：我检查代码是否在数据库中并且尚未使用，然后在数据库中设置为“已使用”。

    *   *优点*：不允许多次使用相同的代码。
    *   *缺点*：伪造收据非常容易，无法手动验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:09:19.053

**[这听起来像是基于哈希的消息身份验证代码](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)(HMAC) 算法的经典用例。** 由于您的“*手动*”想法是“*使用智能手机*”，而不是“*使用 pecil、paper 和 mind* ”，因此您可以计算哈希并将其打印在收据上，然后在手机或后端进行验证服务器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T18:14:21.550

“缺失点”是一次使用更多系统，以便它们一起以所需的方式工作。在这种情况下，我们可以使用 HMAC 来验证消息和“证书代码”列表，以确保不会一遍又一遍地使用相同的收据。
另一个想法也可能是散列将收据输出给客户端的时间并将其打印在收据上。当有人向您显示收据上的代码时，您确保尚未使用散列并且它是有效的（即消息产生该散列），然后将其添加到“已使用散列”列表中。

感谢@RossPatterson 建议 HMAC。

# linear-algebra - 从运动计算结构后旋转矩阵的意义

> ID：14384987
> 
> 赞同：2
> 
> 时间：2013-01-17T17:44:56.890
> 
> 标签：linear-algebra, rotational-matrices

我已经完全实现了算法，我对旋转矩阵的工作方式有点困惑。所以你以一个 3xP 的“结构”矩阵结束，内容（如果我是正确的）是 P 3D 点（所以行是 x、y、z）。

然而，旋转矩阵是 2fx3。F 是帧数，因为我们最初将 3 帧跟踪的特征点堆叠成一个矩阵。它是 2f，因为上半部分是 x 坐标，下半部分是 y 坐标。

无论如何，生成的矩阵是这个 2fx3 ，看起来你有 2 个旋转矩阵，所以我有点困惑它如何对应于正常的旋转矩阵

这是算法的简短概述 [http://www.cs.huji.ac.il/~csip/sfm.pdf](http://www.cs.huji.ac.il/~csip/sfm.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:18:08.430

我真的想出了答案。所以就像我说的那样，R 矩阵的大小是 2fx3，我很困惑它如何对应于正常的 3x3 旋转矩阵。所以事实证明，因为 R 是堆叠的，所以你有

```
r1x
r2x
r3x
r1y
r2y
r3y 
```

其中每一行是一个 1x3 向量，对应于正常旋转矩阵中的一行，以获得从初始点到新点的旋转，您将相应的 r 行用于 x，y 并将它们交叉用于 z。因此，要获得第一帧的旋转矩阵（每个都是 1x3 向量）

```
r1x
r1y
cross(r1x, r1y) 
```

# android - Android将按钮样式应用于自定义视图

> ID：14384990
> 
> 赞同：0
> 
> 时间：2013-01-17T17:45:09.507
> 
> 标签：android, button, themes

我已经创建了一个基于 android.view.View 的自定义按钮，但是，现在我希望将应用程序主题应用于我的自定义视图。如何将主题添加到我的控件中，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:04:05.057

例子：

您的**styles.xml**文件：

```
<style name="Login.TextAppearance.ShadowText" parent="android:Widget.TextView">
    <item name="android:shadowColor">@color/black</item>
    <item name="android:shadowDx">1</item>
    <item name="android:shadowDy">1</item>
    <item name="android:shadowRadius">1</item>
</style> 
```

你的**layout.xml**

```
<CustomView
   style="@style/Login.TextAppearance.ShadowText"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:22:29.077

应该

```
 <CustomView
   style subtext break="@style:@/Login.TextAppearance.ShadowText"
     /> 
```

此外，您将需要使用不同的父级

# iphone - 如何处理 iOS 的系统警报消息？

> ID：14384992
> 
> 赞同：7
> 
> 时间：2013-01-17T17:45:18.183
> 
> 标签：iphone, ios, delegates, uiimagepickercontroller, nsnotificationcenter

我有一个应用程序，我正在使用 UIImagePickerController 使用本机摄像头来单击图片，但是当设备上的照片库已满时。我收到一条警告消息，上面写着“无法拍照 - 没有足够的可用存储空间来拍照。您可以在设置中管理您的存储空间”。我有两个选项可以单击“完成”按钮或“设置”按钮。单击其中任何一个都不会执行任何操作，并且应用程序会完全冻结。

这是我从控制台日志中得到的

```
Not enough space to take a picture. Available space is 0 
```

选择器的代码

```
UIImagePickerController *mediaPicker = [[UIImagePickerController alloc] init];
mediaPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
mediaPicker.delegate=self;
mediaPicker.sourceType=UIImagePickerControllerSourceTypeCamera;
[self presentModalViewController:mediaPicker animated:YES]; 
```

我已经实现并尝试了所有代表，并且它没有调用任何代表。

有什么方法可以实现我可以使用侦听器来检测何时发生此错误并将用户带回上一个屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:51:58.407

听起来您的设备内存不足，系统发送了大量“内存不足”通知，而您的应用也收到了通知。结果，您的应用程序发布了最初启动 UIImagePickerController**的 UIViewController 。**

现在，当您使用“完成/设置”按钮关闭 imagePicker 时，控制权会返回到您的应用程序。旧的 UIViewController 不再存在，在这种情况下，您还没有实现代码从头开始重新创建它。该设备看起来像是被冻结了，但这仅仅是因为您的应用程序没有重绘 UI。否则应用程序工作得很好。

您可以通过在每个 UIViewController 和日志记录中实现 didReceiveMemoryWarning 方法来检查这种情况，如果它被调用：

```
- (void)didReceiveMemoryWarning
{
    NSLog(@"%@", [self description]);
    [super didReceiveMemoryWarning];
} 
```

我最喜欢的错误之一。很容易错过:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:23:55.373

这听起来像是 iOS 中的一个错误。

[您应该在https://feedbackassistant.apple.com/](https://feedbackassistant.apple.com/)提交反馈。

# php - 手机中的空间和代码

> ID：14384994
> 
> 赞同：2
> 
> 时间：2013-01-17T17:45:27.607
> 
> 标签：php, mobile

我已经购买了一条专线，我通过 PHP 和 API 获取消息并将它们通过电子邮件发送给自己，代码如下：

```
$message = get_new_sms(); // A function I got from the API
mail('my_email@gmail.com', 'Test', $message); 
```

但是当我收到电子邮件时，所有空格字符和`<br>`标签都被删除了，想象我的文字是：

```
'Hello Behz4d, how are you?' 
```

我通过电子邮件实际收到的是：

```
'HelloBehz4d,howareyou?' 
```

**这也删除了下一行（\n）...**

经过一番Goggling，我发现手机中空格和下一行的ASCII码不同，所以我应该替换它们，所以我将我的代码更新为：

```
$message = str_replace(chr(20)," ",$message);  // SPACE
$message = str_replace("%2B"," ",$message);  // SPACE
$message = str_replace(chr(226).chr(128).chr(169),"<br />",$message);  // Next Line (<br>)
$message = str_replace("†","<br />",$message);  // Next Line in iPad 
```

但是，我仍然收到带有空格和下一行的电子邮件......

有没有人有同样的问题或类似的经历？

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:55:21.947

将此用于新行，

%0a

希望这会有所帮助...

# visual-studio-2010 - 有没有办法让 Visual Studio 2012 看起来更像 Visual Studio 2010？

> ID：14384998
> 
> 赞同：2
> 
> 时间：2013-01-17T17:45:46.153
> 
> 标签：visual-studio-2010, visual-studio-2012

如何更改 Visual Studio 2012 的外观以使其更接近 2010？

我特别关心使颜色匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:46:36.250

您可以使用[一个简单的主题编辑器。](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T23:22:37.843

蓝色主题已重新添加到 Visual Studio 2012 Update 2 中，无需扩展。

[http://support.microsoft.com/kb/2797912](http://support.microsoft.com/kb/2797912)

![在此处输入图像描述](../Images/8394450b24dd85bb26b7789f80ab087e.png)