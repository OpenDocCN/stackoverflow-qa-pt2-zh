# StackOverflow 问答 15628000-15628999

# php - 无法使用 jquery 加载全新的谷歌地图

> ID：15628000
> 
> 赞同：0
> 
> 时间：2013-03-26T01:55:36.447
> 
> 标签：php, javascript, jquery, google-maps

我的页面上有一个谷歌地图和一个切换按钮。当切换被单击时，我让它调用一个 java 脚本函数，该函数清除具有当前谷歌地图的 div 元素并加载另一个：

```
//clear div
        $('#putMap').empty();

        //call to get new friend list
        $('#putMap').load('getVisitMap.php?u=' + userID ,
            function() {
            alert("called load function");
        }); 

        return false; 
```

我的访问 php 文件如下所示：

```
$userID = $_GET['u'];
    //Get all breweries

    echo "<div id=\"map_canvas\" style=\"width: 600px; height: 400px;\"></div>";

    echo '<script type="text/javascript">
    var locations = [';

    //count unique breweries
    ***mysql call is here****

    echo "before for loop";

    for( $i = 0; $i < $breweryNum; $i++){
        $row = $resultBrew ->fetch_assoc();
        $brewery = $row['beerBrewery'];
        $long = $row['longi'];
        $lat = $row['lat'];

        $breweryURL = "breweryPage.php?id=$breweryID";

        echo "['$brewery', $lat, $long] ";

        //add camas if not last one
        if($i !=  $breweryNum - 1 ){
            echo   ',';

        }

    }

        echo ' 

        ];

    var map = new google.maps.Map(document.getElementById(\'map_canvas\'), {
      zoom: 10,
      center: new google.maps.LatLng(-33.92, 151.25),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

        var bounds = new google.maps.LatLngBounds();
    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {
        var position = new google.maps.LatLng(locations[i][1], locations[i][2]);  
      marker = new google.maps.Marker({
        position: position,
        map: map
      });

      google.maps.event.addListener(marker, \'click\', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));

      bounds.extend(position);

    } //end for loop

    map.fitBounds(bounds);

  </script>

        '; 
```

此外，当我在网络下查看 chrome 中的检查元素以查看 getVisitMap.php 文件的响应时，它只显示：

```
<div id="map_canvas" style="width: 600px; height: 400px;"></div><script type="text/javascript">
    var locations = [ 
```

我的回声应该显示更多代码。

这是原始php页面的更多代码：

```
$page->content .= "<div id = \"putMap\">
<div id=\"map_canvas\" style=\"width: 600px; height: 400px;\"></div>";  
$map = createMap($userID);

$page->content .= "

$map
</div>
"; 
```

# sql - 在另一个表中的一行的 UPDATE 中使用同一表中的多行

> ID：15628001
> 
> 赞同：2
> 
> 时间：2013-03-26T01:55:40.380
> 
> 标签：sql, postgresql, sql-update, postgresql-9.1

我正在为 PostgreSQL (9.1) 使用 pgadmin，我有这个查询需要很长时间才能运行

```
update tableA a
set owner1_surname = (select owner_surname from owners_distinct b where a.owner1= b.owner),
owner1_othername   = (select owner_othername from owners_distinct b where a.owner1= b.owner),
owner2_surname     = (select owner_surname from owners_distinct b where a.owner2= b.owner),
owner2_othername   = (select owner_othername from owners_distinct b where a.owner2= b.owner),
owner3_surname     = (select owner_surname from owners_distinct b where a.owner3= b.owner),
owner3_othername   = (select owner_othername from owners_distinct b where a.owner3= b.owner) 
```

不必`owners_distinct table`一次又一次地检索值，是否可以检索列`owner`，`owner_surname`并且`owner_othername`只需使用一次`SELECT`，然后根据检查执行`UPDATE`on列？`tableA`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:12:17.483

这比我最初想象的要棘手，因为您想多次加入同一个表，而唯一的连接是更新后的表本身：

```
UPDATE table_a a
    SET owner1_surname = b1.owner_surname
    ,owner1_othername  = b1.owner_othername
    ,owner2_surname    = b2.owner_surname
    ,owner2_othername  = b2.owner_othername
    ,owner3_surname    = b3.owner_surname
    ,owner3_othername  = b3.owner_othername
FROM   table_a x
LEFT   JOIN owners_distinct b1 ON b1.b.owner = x.owner1
LEFT   JOIN owners_distinct b2 ON b2.b.owner = x.owner2 
LEFT   JOIN owners_distinct b2 ON b3.b.owner = x.owner3
WHERE  x.table_a_id = a.table_a_id 
```

`table_a_id`的主键在哪里`table_a`。通常，您不必再次加入该表，但在这种情况下，您需要它进行加入*，然后*才能链接到更新的表。

我使用`LEFT JOIN`, 以防止在找不到三个所有者之一的情况下对一行的整个更新失败`owners_distinct`。

### 数据库设计

你确定你需要所有的冗余**数据**`table_a`吗？规范化模式中的规范方法是仅存储 `foreign keys`( `owner1`, `owner2`, )，并使用 a中的 a`owner3`按需获取名称的详细信息。完全删除您正在更新的所有列。当然，规则总是有例外的......`JOIN``SELECT`

### 没有唯一键？

这不应该发生在开始。您应该添加一个代理主键，例如：

```
ALTER TABLE table_a ADD table_a_id serial PRIMARY KEY; 
```

相关答案中的更多信息：
[我的表是否需要一个主键，它有一个 UNIQUE（复合 4 列），其中一个可以为 NULL？](https://stackoverflow.com/questions/10516661/do-i-need-a-primary-key-for-my-table-which-has-a-unique-composite-4-columns/10518219#10518219)

### 没有唯一键的解决方案

无论如何，这是一种进行此更新的方法，而不考虑*任何*唯一列：

```
UPDATE table_a a
    SET owner1_surname = b1.owner_surname
    ,owner1_othername  = b1.owner_othername
    ,owner2_surname    = b2.owner_surname
    ,owner2_othername  = b2.owner_othername
    ,owner3_surname    = b3.owner_surname
    ,owner3_othername  = b3.owner_othername
FROM   (SELECT DISTINCT owner1, owner2, owner3 FROM table_a) x
LEFT   JOIN owners_distinct b1 ON b1.b.owner = x.owner1
LEFT   JOIN owners_distinct b2 ON b2.b.owner = x.owner2 
LEFT   JOIN owners_distinct b2 ON b3.b.owner = x.owner3
WHERE  x.owner1 = a.owner1
AND    x.owner2 = a.owner2
AND    x.owner3 = a.owner3; 
```

关键是：我们只需要每个组合`(owner1, owner2, owner3)`一次。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T02:29:06.340

从 table_a 中选择所有者、所有者姓氏和所有者其他名称

更新 table_a

```
 SET owner1_surname = b1.owner_surname
,owner1_othername  = b1.owner_othername
,owner2_surname    = b2.owner_surname
,owner2_othername  = b2.owner_othername
,owner3_surname    = b3.owner_surname
,owner3_othername  = b3.owner_othername 
```

# python - django portlet

> ID：15628004
> 
> 赞同：0
> 
> 时间：2013-03-26T01:56:15.373
> 
> 标签：python, django, django-templates, portlet

我是 django 的新手，我在上面开发了我的第一个网站，但不知道如何在给定的模板上显示多个视图。我还希望在 django 中有类似于 porlets 的东西，这样您就可以轻松地创建应用程序并将其放置在不同的页面上，而无需重复代码。有谁知道这是否可能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:40:01.840

您用于任何给定视图的模板在视图方法返回的响应中作为参数传递（或者如果您使用基于类的视图，则它是显式设置的）。因此，您所要做的就是在各种视图上返回相同的模板：

```
from django.shortcuts import render

def view_1(request):
    return render(request, 'same_template.html', {})
def view_2(request):
    return render(request, 'same_teamplate.html', {}) 
```

[更多关于在此处](https://docs.djangoproject.com/en/dev/topics/http/views/)编写视图以及如何在[此处使用渲染](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/)

如果您问题的第二部分的数据是动态的，那么这可以在某种中间件中处理，或者您可以拥有一个返回 json 响应的视图，该响应将通过 ajax 调用访问。

[如果数据是静态的，那么只需在此处](https://docs.djangoproject.com/en/dev/topics/templates/)查看扩展模板/django 模板语言

# php - jQuery Ajax PHP 更好的解决方案

> ID：15628006
> 
> 赞同：1
> 
> 时间：2013-03-26T01:56:24.670
> 
> 标签：php, jquery, ajax, variables

我需要一个更好的解决方案然后这个，我`<span id="<?php echo $row['art_id']" name="<?php echo $row['art_featured']"></span>`用来从我的数据库中获取字段的值，所以我可以通过 jQuery Ajax 发送它们，但是必须有更好的方法来使用我的数据库中的值并将它们存储在一个jQuery VAR 然后这个，任何建议都会非常感谢提前！

jQuery

```
 $(document).ready(function(){

    $(".star").click(function(){

        var art_id = $(this).attr('id');
        var art_featured = $(this).attr('name');

        $.ajax({
        type: "POST",
        data: {art_id:art_id,art_featured:art_featured},
        url: "ajax-feature.php",
        success: function(data){
            if(data != false) {

            } 
            else {

            }  
        }
        });

    }); 
```

});

PHP

```
 <section class="row">
<?php
$sql_categories = "SELECT art_id, art_featured FROM app_articles"; 

    if($result = query($sql_categories)){
        $list = array();

        while($data = mysqli_fetch_assoc($result)){
            array_push($list, $data);
        }

        foreach($list as $i => $row){ 
        ?>
            <div class="row">
                <div class="column one">
                     <span id="<?php echo $row['art_id']; ?>" class="icon-small star"></span>
                </div>
            </div>
        <?php
        }
    }
    else {
        echo "FAIL";
    }
?>
</section> 
```

那么我可以将数据对象与 ajax 一起使用`data:`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:13:47.190

我更喜欢使用这样的东西：

```
<span 
     data-object='{"art_id":<?=$row['art_id']?>,
                  "art_featured":"<?=$row['art_featured']?>"}'
     onclick="ajaxFunction($(this))"
>
</span>

function ajaxFunction(o){
      var data = o.data('object');
      /* you can send:
       * data.art_id
       * data.art_featured
       */
} 
```

[http://jsfiddle.net/M4AFQ/1/](http://jsfiddle.net/M4AFQ/1/)

**后续问题的更新：**

```
$(".star").click(function(){
      var data = $(this).data('object');
      /* you can send:
       * data.art_id
       * data.art_featured
       */
  }); 
```

# objective-c - NSMutableArray for 循环用最后一项填充数组

> ID：15628007
> 
> 赞同：0
> 
> 时间：2013-03-26T01:56:25.910
> 
> 标签：objective-c, for-loop, nsmutablearray

我正在尝试用一副扑克牌填充我的 nsmutablearray。卡片对象有花色和等级。代码如下：

```
-(void)loadCardNumbers {
    if(numDecks > 0)
    {
        //for each deck
        for(int i = 1; i<= numDecks; i++)
        {
            //for each suit
            for(int j = 1; j <= 4; j++)
            {
                //for each card 1-ace
                for(int k = 1; k <= 13; k++)
                {
                    //create card and add to shoe
                    Card *c = [[Card alloc]initWithSuit:j AndRank:k];

                    NSLog(@"%@", c);
                    [cards addObject:c];
                }
            }
        }
    } 
```

和卡类：

```
@implementation Card

//return ace of spades, arbitrary card.
-(id)init
{
    return [self initWithSuit:DIAMONDS AndRank:ACE];
}
-(id)initWithSuit:(int)s AndRank:(int)r
{
    self = [super init];
    if(self)
    {
        suit = s;
        rank = r;
    }
    return self;
}

-(int)suit
{
    return suit;
}

-(int)rank
{
    return rank;
}

-(NSString *) description
{
    return [NSString stringWithFormat:@"CARD WITH SUIT %d AND RANK %d", suit, rank];
}
@end 
```

出于某种原因，NSLog 在该方法中看起来是正确的（正确打印 1...4 代表西装，1...13 代表排名）。但是，当我在方法完成后对数组调用 description 时，所有对象都会打印“suit 4 rank 13”，这意味着它们都指向我添加的最后一个对象。有想法该怎么解决这个吗？

编辑：正如 arkku 指出的，我的 ivars 被声明为类变量。忘记在 Card.h 中的 ivars 周围包含大括号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:34:48.373

原始 Card.h 实现：

```
int suit;
int rank;
@interface Card : NSObject    

-(id)init;
... 
```

根据 arkku 的建议正确实施：

```
@interface Card : NSObject
{

int suit;
int rank;
}
-(id)init;
... 
```

# jquery - 通过淘汰赛将事件绑定到“选项卡”按钮？

> ID：15628012
> 
> 赞同：1
> 
> 时间：2013-03-26T01:56:42.150
> 
> 标签：jquery, knockout.js

如果用户从字段中“跳出”，我想调用一个方法。当焦点丢失或用户点击其他地方时，不应调用它 - 只有当他们离开该字段时。淘汰赛是否让这变得特别容易，还是我应该开始研究某种 jQuery 解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:08:07.573

您可以使用事件绑定来执行此操作，这是[一个小提琴](http://jsfiddle.net/CaX2Q/)

```
<input data-bind="event: { keydown: tabOut}" />

var ViewModel = function() {
    this.tabOut = function(data, event) {
        if (event.keyCode == 9) {
            console.log("tab was pressed");
        };
        return true;
    };
}; 
```

# jquery - 使ajax调用跨域

> ID：15628016
> 
> 赞同：0
> 
> 时间：2013-03-26T01:57:09.573
> 
> 标签：jquery, ajax, cross-domain

我有一个 ajax 调用我想成为跨域我该怎么做？脚本如下

```
$.ajax({
        type: "GET",
        url: url,
        data: {sendername: sendername, email: email, subject: subject, message: message},
        dataType: "jsonp",
        crossDomain: "true",
        success: function (data) {
            if (data == 'success') {
                // show thank you remember to add a dialog inside
                $contactpage.find('.contact-thankyou').show();
                $contactpage.find('.contact-form').hide();
            }  else {
                alert('Unable to send your message. Please try again.'); //remember to add a dialog inside
            }
        }
    }); 
```

该 url 返回以下`echo json_encode($result);`值，`$result`如果成功，则可以是成功，如果不成功，则可以是其他任何值。

PHP 以此结束`echo $_GET['callback']."(".json_encode($result).");";`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:30:32.330

您可以使用`YQL`绕过 CORS，只要您只执行 GET 请求，而不使用会话或任何棘手的东西。

```
 $.getJSON("http://query.yahooapis.com/v1/public/yql?" +
        "q=select%20*%20from%20html%20where%20url%3D%22" + encodeURIComponent( base_url + "GetGfeQuote?strJsonRequestObject=" + JSON.stringify(LoadedGetQuoteObject())) +
        "%22&format=xml'&callback=?",
        function (theJson) {
            // ...
        }
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:02:29.610

仅当您访问的 Web 服务设置为跨域访问时，您才能请求并获取 jsonp，因此您的 ajax 调用必须正确且 Web 服务必须正确。

ajax 调用

```
 $.ajax({
            type: "GET",
            cache: false,
            dataType: 'jsonp',
            // we are setting base_url at the top, like http://www.MyDomain.com/MyPage.svc/
            url: base_url + "GetGfeQuote?strJsonRequestObject=" + JSON.stringify(LoadedGetQuoteObject()),
            contentType: "text/plain",
            success: function (theJson) {
                // I make sure I got json
                if (theJson.indexOf('{') > -1 ) {
                    glb_the_quote = $.parseJSON(theJson);
                    if (glb_the_quote.errorMessage.length == 0) {
                        PopulateResultsPage();                            
                    } else {
                        alert('There was an error getting the quote: ' + glb_the_quote.errorMessage);
                    }
                } else {
                    alert(theJson)
                }
            },
            error: function (req, status, error) {
                if(status == "timeout"){
                    ShowNoInternetConnectionWarning();
                } else {
                    alert("There was an internet error = " + status + ", " + error);
                }
            },
            // this gives the webservice 7 seconds to return
            timeout: 7000
        });
        // end ajax; 
```

现在是 web 服务：在某一时刻，我似乎必须在与 web 服务代码相同的目录中正确配置一个 web 配置 - .svc 文件 - 所以这就是我所做的。

这就是我放在我的 svc 文件中的所有内容：

```
<%@ ServiceHost Language="C#" Factory="System.ServiceModel.Activation.WebServiceHostFactory"  Debug="true" Service="gfeWebService.ws.wsGfe" CodeBehind="wsGfe.svc.cs" %> 
```

并且 webconfig 必须具有以下内容（注意 crossDomainScriptAccessEnabled="true" ）

```
<system.serviceModel>   
            <behaviors>
                    <endpointBehaviors>
                        <behavior name="webHttpBehavior">
                            <webHttp />
                        </behavior>
                    </endpointBehaviors>
                </behaviors>

                <bindings>
                    <webHttpBinding>
                        <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" />
                    </webHttpBinding>
                </bindings>

                <!-- the names have to be fully qualified. If you get an error that says, I can't find blah blah, you don't have the names right -->
                <services>
                    <service name="gfeWebService.ws.wsGfe"> 
                        <endpoint  address=""
                                   binding="webHttpBinding"
                                   bindingConfiguration="webHttpBindingWithJsonP"
                                   contract="gfeWebService.ws.IwsGfe"
                                   behaviorConfiguration="webHttpBehavior"
                        >
                        </endpoint>
                    </service>
                </services>

</system.serviceModel> 
```

提示

*   在 url: 行附近的 js 代码中放置一个断点，获取以 url: 结尾的值...换句话说，获取如何解决

    base_url + "GetGfeQuote?strJsonRequestObject=" + JSON.stringify(LoadedGetQuoteObject())

并将其粘贴到浏览器的地址框中。这样你会得到更有意义的错误信息。

*   在您处理此问题时让 Fiddler 运行，并检查发送和接收的内容。

高温高压

# windows - 日志文件中的正则表达式匹配，返回匹配上下的动态内容

> ID：15628017
> 
> 赞同：1
> 
> 时间：2013-03-26T01:57:10.173
> 
> 标签：windows, batch-file, awk, grep, pcre

我有一些包罗万象的日志文件，格式如下：

```
timestamp event summary
foo details
account name: userA
bar more details
timestamp event summary
baz details
account name: userB
qux more details
timestamp etc. 
```

我想在日志文件中搜索`userB`，如果找到，则从前面的时间戳回显到（但不包括）下面的时间戳。可能会有几个与我的搜索匹配的事件。在每场比赛中呼应某种`--- start ---`和`--- end ---`周围的声音会很好。

这将是完美的`pcregrep -M`，对吧？问题是，GnuWin32 的`pcregrep`多行正则表达式搜索大文件时崩溃，这些包罗万象的日志可能是 100 兆或更多。

**我试过的**

到目前为止，我的 hackish 解决方法包括使用`grep -B15 -A30`查找匹配的行并打印周围的内容，然后将现在更易于管理的块导入`pcregrep`以进行抛光。问题是有些事件少于 10 行，而有些则 30 或更多；在遇到较短的事件时，我得到了一些意想不到的结果。

```
:parselog <username> <logfile>

set silent=1
set count=0
set deez=20\d\d-\d\d-\d\d \d\d:\d\d:\d\d
echo Searching %~2 for records containing %~1...

for /f "delims=" %%I in (
    'grep -P -i -B15 -A30 ":\s+\b%~1\b(@mydomain\.ext)?$" "%~2" ^| pcregrep -M -i "^%deez%(.|\n)+?\b%~1\b(@mydomain\.ext|\r?\n)(.|\n)+?\n%deez%" 2^>NUL'
) do (
    echo(%%I| findstr "^20[0-9][0-9]-[0-9][0-9]-[0-9][0-9].[0-9][0-9]:[0-9][0-9]:[0-9][0-9]" >NUL && (
        if defined silent (
            set silent=
            set found=1
            set /a "count+=1"
            echo;
            echo ---------------start of record !count!-------------
        ) else (
            set silent=1
            echo ----------------end of record !count!--------------
            echo;
        )
    )
    if not defined silent echo(%%I
)

goto :EOF 
```

有一个更好的方法吗？我遇到了一个`awk`看起来很有趣的命令，例如：

```
awk "/start pattern/,/end pattern/" logfile 
```

...但它也需要匹配中间模式。不幸的是，我对`awk`语法并不熟悉。有什么建议么？

* * *

Ed Morton 建议我提供一些示例日志记录和预期输出。

**示例包罗万象**

```
2013-03-25 08:02:32 Auth.Critical   169.254.8.110   Mar 25 08:02:32 dc3 MSWinEventLog   2   Security    11730158    Mon Mar 25 08:02:28 2013    529 Security    NT AUTHORITY\SYSTEM N/A Audit Failure   dc3 2   Logon Failure:

    Reason:     Unknown user name or bad password

    User Name:  user5f

    Domain:     MYDOMAIN

    Logon Type: 3

    Logon Process:  Advapi  

    Authentication Package: Negotiate

    Workstation Name:   dc3

    Caller User Name:   dc3$

    Caller Domain:  MYDOMAIN

    Caller Logon ID:    (0x0,0x3E7)

    Caller Process ID:  400

    Transited Services: -

    Source Network Address: 169.254.7.86

    Source Port:    40838
2013-03-25 08:02:32 Auth.Critical   169.254.8.110   Mar 25 08:02:32 dc3 MSWinEventLog   2   Security    11730159    Mon Mar 25 08:02:29 2013    680 Security    NT AUTHORITY\SYSTEM N/A Audit Failure   dc3 9   Logon attempt by:   MICROSOFT_AUTHENTICATION_PACKAGE_V1_0

Logon account:  USER6Q

Source Workstation: dc3

Error Code: 0xC0000234
2013-03-25 08:02:32 Auth.Critical   169.254.8.110   Mar 25 08:02:32 dc3 MSWinEventLog   2   Security    11730160    Mon Mar 25 08:02:29 2013    539 Security    NT AUTHORITY\SYSTEM N/A Audit Failure   dc3 2   Logon Failure:

    Reason:     Account locked out

    User Name:  USER6Q@MYDOMAIN.TLD

    Domain: MYDOMAIN

    Logon Type: 3

    Logon Process:  Advapi  

    Authentication Package: Negotiate

    Workstation Name:   dc3

    Caller User Name:   dc3$

    Caller Domain:  MYDOMAIN

    Caller Logon ID:    (0x0,0x3E7)

    Caller Process ID: 400

    Transited Services: -

    Source Network Address: 169.254.7.89

    Source Port:    55314
2013-03-25 08:02:32 Auth.Notice 169.254.5.62    Mar 25 08:36:38 DC4.mydomain.tld MSWinEventLog  5   Security    201326798   Mon Mar 25 08:36:37 2013    4624    Microsoft-Windows-Security-Auditing     N/A Audit Success   DC4.mydomain.tld    12544   An account was successfully logged on.

Subject:
    Security ID:        S-1-0-0
    Account Name:       -
    Account Domain:     -
    Logon ID:       0x0

Logon Type:         3

New Logon:
    Security ID:        S-1-5-21-606747145-1409082233-725345543-160838
    Account Name:       DEPTACCT16$
    Account Domain:     MYDOMAIN
    Logon ID:       0x1158e6012c
    Logon GUID:     {BCC72986-82A0-4EE9-3729-847BA6FA3A98}

Process Information:
    Process ID:     0x0
    Process Name:       -

Network Information:
    Workstation Name:   
    Source Network Address: 169.254.114.62
    Source Port:        42183

Detailed Authentication Information:
    Logon Process:      Kerberos
    Authentication Package: Kerberos
    Transited Services: -
    Package Name (NTLM only):   -
    Key Length:     0

This event is generated when a logon session is created. It is generated on the computer that was accessed.

The subject fields indicate...
2013-03-25 08:02:32 Auth.Critical   169.254.8.110   Mar 25 08:02:32 dc3 MSWinEventLog   2   Security    11730162    Mon Mar 25 08:02:30 2013    675 Security    NT AUTHORITY\SYSTEM N/A Audit Failure   dc3 9   Pre-authentication failed:

    User Name:  USER8Y

    User ID:        %{S-1-5-21-606747145-1409082233-725345543-3904}

    Service Name:   krbtgt/MYDOMAIN

    Pre-Authentication Type:    0x0

    Failure Code:   0x19

    Client Address: 169.254.87.158
2013-03-25 08:02:32 Auth.Critical   etc. 
```

**示例命令**

```
call :parselog user6q \\path\to\catch-all.log 
```

**预期结果**

```
---------------start of record 1-------------
2013-03-25 08:02:32 Auth.Critical   169.254.8.110   Mar 25 08:02:32 dc3 MSWinEventLog   2   Security    11730159    Mon Mar 25 08:02:29 2013    680 Security    NT AUTHORITY\SYSTEM N/A Audit Failure   dc3 9   Logon attempt by:   MICROSOFT_AUTHENTICATION_PACKAGE_V1_0

Logon account:  USER6Q

Source Workstation: dc3

Error Code: 0xC0000234
---------------end of record 1-------------

---------------start of record 2-------------
2013-03-25 08:02:32 Auth.Critical   169.254.8.110   Mar 25 08:02:32 dc3 MSWinEventLog   2   Security    11730160    Mon Mar 25 08:02:29 2013    539 Security    NT AUTHORITY\SYSTEM N/A Audit Failure   dc3 2   Logon Failure:

    Reason:     Account locked out

    User Name:  USER6Q@MYDOMAIN.TLD

    Domain: MYDOMAIN

    Logon Type: 3

    Logon Process:  Advapi  

    Authentication Package: Negotiate

    Workstation Name:   dc3

    Caller User Name:   dc3$

    Caller Domain:  MYDOMAIN

    Caller Logon ID:    (0x0,0x3E7)

    Caller Process ID: 400

    Transited Services: -

    Source Network Address: 169.254.7.89

    Source Port:    55314
---------------end of record 2------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:29:04.073

这就是 GNU awk（用于 IGNORECASE）所需要的全部内容：

```
$ cat tst.awk
function prtRecord() {
    if (record ~ regexp) {
        printf "-------- start of record %d --------%s", ++numRecords, ORS
        printf "%s", record
        printf "--------- end of record %d ---------%s%s", numRecords, ORS, ORS
    }
    record = ""
}
BEGIN{ IGNORECASE=1 }
/^[[:digit:]]+-[[:digit:]]+-[[:digit:]]+/ { prtRecord() }
{ record = record $0 ORS }
END { prtRecord() } 
```

或使用任何 awk：

```
$ cat tst.awk
function prtRecord() {
    if (tolower(record) ~ tolower(regexp)) {
        printf "-------- start of record %d --------%s", ++numRecords, ORS
        printf "%s", record
        printf "--------- end of record %d ---------%s%s", numRecords, ORS, ORS
    }
    record = ""
}
/^[[:digit:]]+-[[:digit:]]+-[[:digit:]]+/ { prtRecord() }
{ record = record $0 ORS }
END { prtRecord() } 
```

无论哪种方式，您都可以在 UNIX 上将其运行为：

```
$ awk -v regexp=user6q -f tst.awk file 
```

我不知道 Windows 语法，但我希望它非常相似，如果不完全相同的话。

请注意在脚本中使用 tolower() 使比较的两边都小写，因此匹配不区分大小写。如果您可以改为传入正确大小写的搜索正则表达式，则无需在比较的任一侧调用 tolower()。nbd，它可能只是稍微加快脚本速度。

```
$ awk -v regexp=user6q -f tst.awk file
-------- start of record 1 --------
2013-03-25 08:02:32 Auth.Critical   169.254.8.110   Mar 25 08:02:32 dc3 MSWinEventLog   2   Security
    11730159    Mon Mar 25 08:02:29 2013    680 Security    NT AUTHORITY\SYSTEM N/A Audit Failure
dc3 9   Logon attempt by:   MICROSOFT_AUTHENTICATION_PACKAGE_V1_0

Logon account:  USER6Q

Source Workstation: dc3

Error Code: 0xC0000234
--------- end of record 1 ---------

-------- start of record 2 --------
2013-03-25 08:02:32 Auth.Critical   169.254.8.110   Mar 25 08:02:32 dc3 MSWinEventLog   2   Security
    11730160    Mon Mar 25 08:02:29 2013    539 Security    NT AUTHORITY\SYSTEM N/A Audit Failure
dc3 2   Logon Failure:

    Reason:     Account locked out

    User Name:  USER6Q@MYDOMAIN.TLD

    Domain: MYDOMAIN

    Logon Type: 3

    Logon Process:  Advapi

    Authentication Package: Negotiate

    Workstation Name:   dc3

    Caller User Name:   dc3$

    Caller Domain:  MYDOMAIN

    Caller Logon ID:    (0x0,0x3E7)

    Caller Process ID: 400

    Transited Services: -

    Source Network Address: 169.254.7.89

    Source Port:    55314
--------- end of record 2 --------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:43:03.670

下面有一个不使用 grep 的纯 Batch 解决方案。它定位时间戳行，因为“摘要”词不能存在于其他行中，但如果需要，可以将这个词更改为另一个。

**编辑**：我将标识时间戳行的单词更改为“Auth。”；我还更改了 FINDSTR 寻求忽略大小写。这是新版本：

```
@echo off
setlocal EnableDelayedExpansion

:parselog <username> <logfile>
echo Searching %~2 for records containing %~1...

set n=0
set previousMatch=Auth.
for /F "tokens=1* delims=:" %%a in ('findstr /I /N "Auth\. %~1" %2') do (
   set currentMatch=%%b
   if "!previousMatch:Auth.=!" neq "!previousMatch!" (
      if "!currentMatch:Auth.=!" equ "!currentMatch!" (
         set /A n+=1
         set /A skip[!n!]=!previousLine!-1
      )
   ) else (
      set /A end[!n!]=%%a-1
   )
   set previousLine=%%a
   set previousMatch=%%b
)
if %n% equ 0 (
   echo No records found
   goto :EOF
)

if not defined end[%n%] set end[%n%]=-1
set i=1
:nextRecord
   echo/
   echo ---------------start of record %i%-------------
   if !skip[%i%]! equ 0 (
      set skip=
   ) else (
      set skip=skip=!skip[%i%]!
   )
   set end=!end[%i%]!
   for /F "%skip% tokens=1* delims=:" %%a in ('findstr /N "^" %2') do (
      echo(%%b
      if %%a equ %end% goto endOfRecord
   )
   :endOfRecord
   echo ---------------end of record %i%-------------
   set /A i+=1
if %i% leq %n% goto nextRecord 
```

**示例命令：**

```
C:>test user6q catch-all.log 
```

**结果：**

```
Searching catch-all.log for records containing user6q...

---------------start of record 1-------------
2013-03-25 08:02:32 Auth.Critical   169.254.8.110   Mar 25 08:02:32 dc3 MSWinEventLog   2   Security    11730159    Mon Mar 25 08:02:29 2013    680 Security    NT AUTHORITY\SYSTEM N/A Audit Failure   dc3 9   Logon attempt by:   MICROSOFT_AUTHENTICATION_PACKAGE_V1_0

Logon account:  USER6Q

Source Workstation: dc3

Error Code: 0xC0000234
---------------end of record 1-------------

---------------start of record 2-------------
2013-03-25 08:02:32 Auth.Critical   169.254.8.110   Mar 25 08:02:32 dc3 MSWinEventLog   2   Security    11730160    Mon Mar 25 08:02:29 2013    539 Security    NT AUTHORITY\SYSTEM N/A Audit Failure   dc3 2   Logon Failure:

    Reason:     Account locked out

    User Name:  USER6Q@MYDOMAIN.TLD

    Domain: MYDOMAIN

    Logon Type: 3

    Logon Process:  Advapi  

    Authentication Package: Negotiate

    Workstation Name:   dc3

    Caller User Name:   dc3$

    Caller Domain:  MYDOMAIN

    Caller Logon ID:    (0x0,0x3E7)

    Caller Process ID: 400

    Transited Services: -

    Source Network Address: 169.254.7.89

    Source Port:    55314
---------------end of record 2------------- 
```

此方法仅使用一次`findstr`命令执行来定位所有匹配的记录，然后使用一个附加`findstr`命令来显示每条记录。请注意，第一个`for /F ...`命令对`findstr "Auth. user.."`结果起作用，第二个`for /F`命令有一个“skip=N”选项和一个 GOTO，一旦显示记录就会中断循环。这意味着 FOR 命令不会减慢程序的速度；该程序的速度取决于 FINDSTR 命令的速度。

但是，第二个`for /F "%skip% ... in ('findstr /N "^" %2')`命令可能会花费太长时间，因为 FINDSTR 输出结果的大小在它被 FOR 处理之前。如果发生这种情况，我们可以通过另一种更快的方法（例如，将中断的异步管道）修改第二个 FOR。请报告结果。

安东尼奥

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T03:36:47.853

这是我的努力：

```
@ECHO OFF
SETLOCAL
::
:: Target username
::
SET target=%1
CALL :zaplines
SET count=0
FOR /f "delims=" %%I IN (rojoslog.txt) DO (
  ECHO.%%I| findstr /r "^20[0-9][0-9]-[0-9][0-9]-[0-9][0-9].[0-9][0-9]:[0-9][0-9]:[0-9][0-9]" >NUL
  IF NOT ERRORLEVEL 1 (
    IF DEFINED founduser CALL :report
    CALL :zaplines
  )
  (SET stored=)
  FOR /l %%L IN (1000,1,1200) DO IF NOT DEFINED stored IF NOT DEFINED line%%L (
    SET line%%L=%%I
    SET stored=Y
   )
  ECHO.%%I|FINDSTR /b /e /i /c:"account name: %target%" >NUL
  IF NOT ERRORLEVEL 1 (SET founduser=Y)
)
IF DEFINED founduser CALL :report
GOTO :eof

::
:: remove all envvars starting 'line'
:: Set 'not found user' at same time
::
 :zaplines
(SET founduser=)
FOR /f "delims==" %%L IN ('set line 2^>nul') DO (SET %%L=)
GOTO :eof

:report
IF NOT DEFINED line1000 GOTO :EOF 
SET /a count+=1
ECHO.
ECHO.---------- START of record %count% ----------
FOR /l %%L IN (1000,1,1200) DO IF DEFINED line%%L CALL ECHO.%%line%%L%%
ECHO.----------- END of record %count% -----------
GOTO :eof 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T02:10:25.137

我认为*awk*就是你所需要的：

```
awk "/---start of record---/,/---end of record---/ {print}" logfile 
```

如果第一行指标是：

```
---start of record--- 
```

最后一个是：

```
---end of record--- 
```

请注意，没有中间模式匹配，“，”只是两个正则表达式的分隔符。

# extjs - 如何将表单中的值与模型中的验证进行比较

> ID：15628019
> 
> 赞同：0
> 
> 时间：2013-03-26T01:57:13.690
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我已经建立了一个带有验证规则的模型，并希望将它们与放入表单的信息进行比较。到目前为止，我已经声明了值并且它们验证了

```
Ext.define('FirstApp.view.ReviewsContainer', {
    extend: 'Ext.NavigationView',
    xtype: 'reviewscontainer',

    config: {

        title: 'Reviews',
        iconCls: 'compose',
        items: [{
                xtype: 'reviews'

            }, {
                xtype: 'button',
                align: 'right',
                ui: 'confirm',
                text: 'Leave Review',
                docked: 'bottom',
                centered: 'true',

                handler: function () {
                    if (!this.overlay) {
                        this.overlay = Ext.Viewport.add({
                            xtype: 'formpanel',
                            requires: ['FirstApp.model.ReviewCheck'],
                            id: 'reviewed',
                            modal: true,
                            hideOnMaskTap: true,
                            showAnimation: {
                                type: 'popIn',
                                duration: 250,
                                easing: 'ease-out'
                            },
                            hideAnimation: {
                                type: 'popOut',
                                duration: 250,
                                easing: 'ease-out'
                            },
                            centered: true,
                            width: Ext.os.deviceType == 'Phone' ? 260 : 400,
                            height: Ext.os.deviceType == 'Phone' ? 220 : 400,
                            styleHtmlContent: true,

                            items: [{
                                    docked: 'top',
                                    xtype: 'toolbar',
                                    title: 'Leave Review'
                                },

                                {
                                    xtype: 'fieldset',

                                    title: 'Reviews',
                                    items: [{
                                            xtype: 'textfield',
                                            name: 'name',
                                            label: 'Name',
                                            placeHolder: 'name',
                                            id: 'text'
                                        }, {
                                            xtype: 'textfield',
                                            name: 'business',
                                            label: 'Place'
                                        }, {
                                            xtype: 'textfield',
                                            name: 'rating',
                                            label: 'Rating'
                                        }, {
                                            xtype: 'textareafield',
                                            name: 'review',
                                            label: 'Review'
                                        }
                                    ]
                                }, {
                                    items: [{
                                            xtype: 'button',
                                            text: 'Submit',
                                            ui: 'confirm',
                                            handler: function () {

                                                console.log("Hello");
                                                //var values = Ext.getCmp('reviewed').getValues();

                                                // var text= Ext.getCmp('text').getValue();

                                                //   var value = Ext.ComponentQuery.query('#text')[0].getValue();

                                                //var reviewCheckForm = this.getReviewCheck();
                                                //var currentForm = reviewCheckForm.getRecord();
                                                // var newValues = reviewed.getValues();

                                                // currentForm.set("name", newValues.name);
                                                // currentForm.set("business", newValues.business);
                                                // currentForm.set("review", newValues.review);

                                                var form = formPanel.getForm(); //Get the basicform instance
                                                var record = form.getRecord(); //Get your record loaded in the form
                                                form.updateRecord(record); //Update your record with the current form values
                                                var errors = record.validate(); //Validate your record

                                                // console.log(newValues);
                                                // var data = Ext.create('FirstApp.model.ReviewCheck', {
                                                //         name: 'dfhd',
                                                //     business: 'sdfs',
                                                //     id: 1,
                                                //   review: 'sfsd'
                                                //  });

                                                //   var errors = data.validate();

                                                // var errors = currentForm.validate();
                                                console.log('Number of errors: ' + errors.getCount());

                                                if (!errors.isValid()) {
                                                    console.log('Number of errors: ' + errors.getCount());

                                                    errors.each(function (item, index, length) {
                                                        // Each item in the errors collection is an instance of the Ext.data.Error   class.
                                                        console.log('Field "' + item.getField() + '" ' + item.getMessage());
                                                    });
                                                    Ext.Msg.alert('Form is invalid!');
                                                } else {

                                                    var values = Ext.getCmp('reviewed').getValues();
                                                    // prints the values filled in the form 
                                                    // text fields of name, email and message.     
                                                    console.log(values.name + "," + values.place + "," + values.rating);

                                                    Ext.Ajax.request({
                                                        url: 'http://insert.php',
                                                        params: values,
                                                        success: function (response) {
                                                            var text = response.responseText;
                                                            Ext.getCmp('reviewed').reset();
                                                            Ext.Msg.alert('Success', "Review successfully created.", Ext.getCmp('reviewed').hide(), Ext.StoreMgr.get('Reviews').load());
                                                            console.log("Im Here");
                                                        }
                                                    });
                                                }
                                            }
                                        }
                                    ]
                                }
                            ],
                            scrollable: false
                        });
                    }

                    this.overlay.show();
                }
            }

        ]
    }
})

Ext.define('FirstApp.model.ReviewCheck', {
    extend: 'Ext.data.Model',
    config: {
        fields: [{
                name: 'name',
                type: 'string'
            }, {
                name: 'business',
                type: 'string'
            }, {
                name: 'id',
                type: 'int'
            }, {
                name: 'review',
                type: 'string'
            }
        ], // fields
        validations: [{
                field: 'name',
                type: 'presence',
                error: 'Name must be present',
                message: 'Name is required.'
            }, {
                field: 'business',
                type: 'presence',
                message: 'Place is required.'
            }, {
                field: 'review',
                type: 'presence',
                message: 'Review is required.'

            }
        ] // validations
    } // config
}); // define() 
```

我如何设置名称、业务、ID 并查看从表单中获取的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:10:30.317

您可以使用[表单的](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic)[updateRecord](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-updateRecord)函数。不要像@Mayur 在他的示例中显示的那样手动设置所有属性。

像这样的东西：

```
{
    xtype: 'button',
    text: 'Submit',
    ui: 'confirm',
    handler: function () {
        var formPanel = this.up('formpanel'); //Get the formpanel
        var form = formPanel.getForm(); //Get the basicform instance
        var record = form.getRecord(); //Get your record loaded in the form
        form.updateRecord(record); //Update your record with the current form values
        var errors = record.validate(); //Validate your record

        console.log('Number of errors: ' + errors.getCount());

        if (!errors.isValid()) {
            console.log('Number of errors: ' + errors.getCount());

            errors.each(function (item, index, length) {
                // Each item in the errors collection is an instance of the Ext.data.Error   class.
                console.log('Field "' + item.getField() + '" ' + item.getMessage());
            });
            Ext.Msg.alert('Form is invalid!');
        } 
        //...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T00:16:39.527

我有类似的问题...JSF + Richfaces 基本上，我有多个标签...类似于...（不确切的代码）

```
<rich:tab name="a">
  <inputText id="a1" values="">
  <inputText id="a2" values="">
</rich:tab>

<rich:tab name="b">
  <inputText id="b1" values="">
  <inputText id="b2" values="">
</rich:tab> 
```

步骤 1）用户首先将转到选项卡“a”并将“a1”值更改为“newValue”2）不提交表单..转到选项卡“b”。由于用户没有提交表单，用户应该收到警告消息说..“您在选项卡 a 中有未保存的数据”....

如何实施？

谢谢..真的很感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:17:31.847

首先获取您的视图实例

```
var reviewCheckForm = this.getReviewCheck(); 
```

然后从中取出记录

```
var currentForm = reviewCheckForm.getRecord(); 
```

然后从同一个表单中获取新值

```
var newValues = reviewCheckForm.getValues(); 
```

然后将新值设置到记录并验证它

```
currentForm.set("name", newValues.name);
currentForm.set("business", newValues.business);
currentForm.set("review", newValues.review); 
```

然后验证它

```
var errors = currentForm.validate();

if (!errors.isValid()) {
    Ext.Msg.alert('Wait!', errors.getByField("title")[0].getMessage(), Ext.emptyFn);
    currentForm.reject();
    return;
} 
```

你可以按照[这个](http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/)简单的教程来获得更多的理解和参考，[这里](http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-3/)是模型验证部分。

# yii - 如果数据是 yii 应用程序中的 ascii 类型，如何修复 htmlspecialchars 参数中的无效多字节序列？

> ID：15628021
> 
> 赞同：0
> 
> 时间：2013-03-26T01:57:16.050
> 
> 标签：yii

我要显示的数据是基于的 ascii 类型

`mb_detect_encoding`PHP，我试过 CHtml::encode($str); 显示数据时，但得到无效的多字节序列参数，最好的办法是什么？

# ruby-on-rails - RAILS_ENV=staging cap deploy 在 rake 预编译资产上随机失败

> ID：15628023
> 
> 赞同：0
> 
> 时间：2013-03-26T01:58:05.810
> 
> 标签：ruby-on-rails, deployment, amazon-ec2, capistrano, rubber

我在将我的 rails 应用程序部署到 Amazon EC2 上的 t1.micro 实例时遇到问题。我问了一个问题：[RAILS_ENV=staging cap deploy failed on rake precompile assets](https://stackoverflow.com/questions/15538050/rails-env-staging-cap-deploy-fails-on-rake-precompile-assets)

在我将推荐的代码添加到我的 application.rb 文件后，我的第一次部署就成功了。然后我更新了一个 js 文件并进行了部署，以确保它编译成功并正确更新了资产并且它工作正常。但后来我第三次尝试，它失败了同样的错误。然后我再次尝试并成功部署。然后 2 天后，我尝试部署并连续 3 次失败，我根本无法再次部署。

我想知道在 t1.micro 实例上编译我的资产是否花费了太长时间，并且有时会超时。

我没有太多的图像、样式表或 javascript 代码。这是一个相对较新的基本应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:01:07.033

EC2 微型实例一旦达到临界质量，就没有足够的力量来编译资产。如果您阅读 Capistrano 日志，您可能会发现一个条目表明该进程已被终止。我在尝试部署在微型实例上的项目中发现了这一点，并升级到小型实例来解决。

[另一种解决方案是在本地预编译您的资产，然后使用像https://github.com/rumblelabs/asset_sync](https://github.com/rumblelabs/asset_sync)这样的 gem 将它们放在 CDN 上。

# objective-c - 使用 CFBitVectorGetBits 时，CFRange 不能跨字节

> ID：15628026
> 
> 赞同：4
> 
> 时间：2013-03-26T01:58:12.360
> 
> 标签：objective-c, bits, cfbitvector

```
Byte a[2]={85, 15};
Byte b[2]={0};
CFBitVectorRef bv1 = CFBitVectorCreate(kCFAllocatorDefault, a, 16);
CFRange r1 = {3, 8};
CFBitVectorGetBits(bv1, r1, b); 
```

字节a[2]是“0101 0101 0000 1111”，我想把CFRange的{3,8}（1010 1000）剪成另一个字节b[2]。但我在 b[2] 中一无所获。但是，如果我将范围更改为 {0,8} 或 {8,8}，它会起作用。为什么不能跨字节获取位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T11:58:14.293

好像我有完全相同的问题。当我使用 {7,7} 范围时，CFBitVectorGetBits 将我的 *bytes 设置为 nil。找到任何解决方案了吗？我现在通过愚蠢地迭代比特来实现它。
编辑：
添加代码：

```
CFBitVectorRef source = ... ;// Some source bit vector
CFIndex location = 7;//Current location in bit vector
uint8 *bytes = malloc(sizeof(uint8));
//CFBitVectorGetBits(source, CFRangeMake(location,7), bytes);//This one is bugged
CFBitVectorRef buffer = CFBitVectorCreateMutable(NULL,7);
CFBitVectorSetCount(buffer, 7);
for (CFIndex i=0; i<7; i++)
CFBitVectorSetBitAtIndex(buffer, i, CFBitVectorGetBitAtIndex(source, location+i));
CFBitVectorGetBits(buffer, CFRangeMake(0, 7), bytes);
//Now *bytes contains needed bits 
```

根据需要工作。

# delphi - 仅显示 Firebird 异常消息

> ID：15628029
> 
> 赞同：1
> 
> 时间：2013-03-26T01:58:16.690
> 
> 标签：delphi, stored-procedures, firebird, unidac

我有一个从更新前触发器调用的存储过程。在此过程中，我检查某些条件，如果遇到异常则抛出

异常显示许多我不想向用户显示的数据的问题：

> 异常 4
> Exception_Name
> 错误消息在过程“proc_name”行：3，col：50
> 在触发器“trigger_name”行：8，col：17。

有没有办法只显示消息？如果没有，有没有办法在不引发异常的情况下停止更新？

我正在使用带有 Delphi 2010 DB 连接的 Firebird 2.5.1：IBDac 和更新是从 post 方法触发的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-24T22:20:47.880

答案有点晚，但迟到总比没有好。

这是我的解决方案。不太好或不太专业，有点黑客，但我还没有找到更好的选择。

我在**IB.pas**文件 (IBX) 中修改了以下程序，工作正常。我知道 OP 使用不同的包来访问数据库，但我猜逻辑是一样的。

```
procedure IBDataBaseError;
var
  sqlcode: Long;
  IBErrorCode: Long;
  local_buffer: array[0..IBHugeLocalBufferLength - 1] of char;
  usr_msg: string;
  status_vector: PISC_STATUS;
  IBDataBaseErrorMessages: TIBDataBaseErrorMessages;
  AStrList: TStringList;
  i: integer;
begin
  usr_msg := '';

  { Get a local reference to the status vector.
    Get a local copy of the IBDataBaseErrorMessages options.
    Get the SQL error code }
  status_vector := StatusVector;
  IBErrorCode := StatusVectorArray[1];
  IBDataBaseErrorMessages := GetIBDataBaseErrorMessages;
  sqlcode := GetGDSLibrary.isc_sqlcode(status_vector);

  if (ShowSQLCode in IBDataBaseErrorMessages) then
    usr_msg := usr_msg + 'SQLCODE: ' + IntToStr(sqlcode); {do not localize}
  Exclude(IBDataBaseErrorMessages, ShowSQLMessage);
  if (ShowSQLMessage in IBDataBaseErrorMessages) then
  begin
    GetGDSLibrary.isc_sql_interprete(sqlcode, local_buffer, IBLocalBufferLength);
    if (ShowSQLCode in IBDataBaseErrorMessages) then
      usr_msg := usr_msg + CRLF;
    usr_msg := usr_msg + string(local_buffer);
  end;

  if (ShowIBMessage in IBDataBaseErrorMessages) then
  begin
// unnecessary code
//    if (ShowSQLCode in IBDataBaseErrorMessages) or
//       (ShowSQLMessage in IBDataBaseErrorMessages) then
//      usr_msg := usr_msg + CRLF;
    while (GetGDSLibrary.isc_interprete(local_buffer, @status_vector) > 0) do
    begin
      if (usr_msg <> '') and (usr_msg[Length(usr_msg)] <> LF) then
        usr_msg := usr_msg + CRLF;
      usr_msg := usr_msg + string(local_buffer);
    end;

    // then next condition is optional, remove if you use other 
    // initialization than SetIBDataBaseErrorMessages([ShowIBMessage])
    if (IBDataBaseErrorMessages = [ShowIBMessage]) then
    begin
      AStrList:= TStringList.Create;
      try
        AStrList.Text:= usr_msg;
        // apply to user defined exception only
        if (AStrList.Count > 0) and (Pos('exception', AStrList[0]) = 1) then
          // i'm using ! on the end of every exception
          // if you don't, just simply keep the 3\. line (AStrList[2])
          // of AStrList and delete the rest of lines 
          for i:= AStrList.Count - 1 downto 0 do
            if (Pos('!', AStrList[i]) = 0) then
              AStrList.Delete(i);
        usr_msg:= AStrList.Text;
      finally
        AStrList.Free;
      end;
    end;
  end;

  while (usr_msg <> '') and ((usr_msg[Length(usr_msg)] = '.') or (usr_msg[Length(usr_msg)] = LF) or (usr_msg[Length(usr_msg)] = CR)) do
    Delete(usr_msg, Length(usr_msg), 1);
  MonitorHook.SendError(IntToStr(sqlcode) + ' ' + IntToStr(IBErrorCode) + ' ' + usr_msg);
  if sqlcode <> -551 then
    raise EIBInterBaseError.Create(sqlcode, IBErrorCode, usr_msg)
  else
    raise EIBInterBaseRoleError.Create(sqlcode, IBErrorCode, usr_msg)
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:08:19.440

异常很可能具有错误的每个部分的属性。您可能会查看异常类的声明（您没有费心在问题中提供）。例如，`EDatabaseError`具有`ErrorCode`和的属性`ErrorMessage`；我怀疑 FireBird 错误也有它们。

这意味着您的异常处理程序可以执行以下操作：

```
try
  .. some database thing
except
  on E: EFireBirdException do
    ShowMessage(E.ErrorMessage);
end; 
```

请注意，我不知道 FireBird 异常类提供了什么；我只是提供你应该在 Firebird 异常类声明中寻找的类型。其他有用的值通常是`ErrorCode`.

同样，要查看异常类声明和异常类的特定功能（如 E.Message、E.Code 等）中可以使用的内容，您需要查看正在处理的特定类。

# java - org.eclipse.ui 无法解决？

> ID：15628031
> 
> 赞同：3
> 
> 时间：2013-03-26T01:58:31.017
> 
> 标签：java, swt

您能否告诉我如何解决该包导入问题，我认为它是 SWT 的一个元素，并且我已经将 SWT 安装到 Eclipse IDE 中。为什么这么麻烦？我想我必须下载一些 *.jar 或 *.zip 文件才能作为外部库添加到我的项目中。

请给我一个解决方案。谢谢！

维哈隆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:24:10.860

不，`org.eclipse.ui`绝对不是 SWT 的一部分（反之亦然，但它需要 SWT）。如果您正在创建 RCP 插件（如果没有，您可能不应该使用`org.eclipse.ui`），您需要打开`plugin.xml`文件，“依赖项”选项卡，并添加`org.eclipse.ui`到“必需插件”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T05:52:35.510

1.  下载 SWT 库。对于 3.1.2 版本的 eclipse，SWT 库位于[http://archive.eclipse.org/eclipse/downloads/drops/R-3.1.2-200601181600/index.php](http://archive.eclipse.org/eclipse/downloads/drops/R-3.1.2-200601181600/index.php)查找标题为 SWT Binary and Source 的部分。

2.  然后点击这个链接： [http ://www.mkyong.com/swt/how-to-import-swt-library-into-eclipse-workspace/](http://www.mkyong.com/swt/how-to-import-swt-library-into-eclipse-workspace/)

一步一步地遵循它，大多数情况下你会得到解决方案。我遇到了同样的问题。

# javascript - 使用相同 css doc 的不同 html 页面上的不同链接颜色

> ID：15628032
> 
> 赞同：1
> 
> 时间：2013-03-26T01:58:34.327
> 
> 标签：javascript, html, css, hyperlink, styles

我对编程很陌生，所以我很抱歉，我敢肯定，这是一个相对简单的问题。

我正在寻找一种有效的方法来使`<a>`每个 html 页面的标签内的链接颜色不同（即一个页面将具有绿色链接，而另一个页面将具有蓝色链接），而无需添加`class="green"`或添加`class="blue"`到每个单独的`<a>`标签。

我知道我可以为每个页面拥有单独的 css 文档，但我想将整个网站保留在一个 css 页面上，因此当我想要进行总体更改时，我不必单独更新每个样式表。

`<a>`有没有办法在标签中定义与更高标签的类相关的样式规则？例如，是否可以说

```
<body>
<div class="page1content">
<p>text here 
<a href="someurl.com"> link here </a> 
more text 
<a href="secondurl.com"> second link</p> 
</div>

<div class="footer">
<p>even more text
<a href="thirdurl.com"></a></p>
</div>
</body> 
```

然后定义与?相关的前两个`<a>`标签（不影响第三个`<a>`标签）`<div class="page1content">`然后我会用 , 等替换`<div class="page2">`每一`<div class="page3">`页。

我唯一能想到的另一件事是尝试使用我不太熟悉的 JavaScript。我尝试插入

```
<script type="text/javascript">
var myObj = document.getElementsByTagName("a");
myObj.style.color="green";
</script> 
```

进入给定的页面，希望它将使`<a>`该页面上所有标签中的文本颜色变为绿色，但它似乎不起作用。

作为比较，我还通过将“a”更改为“p”来测试我的 JavaScript，如下所示：

```
<script type="text/javascript">
var myObj = document.getElementsByTagName("p");
myObj.style.color="green";
</script> 
```

希望这会使我所有的`<p>`文本变成绿色，但这也不起作用，所以很明显我错误地编码了 JavaScript，对于初学者。

任何关于如何`<a>`一次更改给定页面上的多个标签（而不在标签内放置类）的想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:15:46.250

为每个 body 元素指定一个 ID，然后在 CSS 中选择后代锚标记元素：

```
body#myBody1 a {color: red;}

body#myBody2 a {color: blue;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:24:24.410

您已经有了在纯 HTML 和 CSS 中执行此操作的方法。不需要Javascript。

换句话说，您想要定位两个类中的内容。而且您还忘记关闭您的 p 和标签。

# 例子：

## CSS

```
#content1 p {
    color: green;
}

#content1 a {
    color: yellow;
}

#content2 p {
    color: blue;
}

#content2 a {
    color: red;
} 
```

## HTML

```
<div id="content1">
    <p>Text here <a href="someurl.com">and link here,</a> more text <a href="secondurl.com"> second link</a></p>
</div>

<div id="content2">
    <p>Text here <a href="someurl.com">and link here,</a> more text <a href="secondurl.com"> second link</a></p>
</div> 
```

# 关联：

[http://jsfiddle.net/vA369/2/](http://jsfiddle.net/vA369/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:38:13.517

让我们以您的代码为例。

1.  标签`<a></a>`有其默认颜色。如果你想`<a></a>`与鞋面颜色相同`<p></p>`

    `<p>text here <a href="someurl.com"> link here </a> more text <a href="secondurl.com"> second link</p>`

    您必须重新设置 CSS。`<style>a{color:inherit}</style>`

2.  您可以通过更改 CSS 来实现。

    `<style>.page1content a {color:red}</style>`

    它表示 div 中标签 'a' 的颜色，哪个类是 'page1content'

3.  你也可以通过你提到的javascript来做到这一点。

    但是你犯了一个错误。`getElementsByTagName`将返回一个数组，而不仅仅是一个。该数组包含所有结果。

    例如，你可以得到第`<p>...</p`一个 `document.getElementsByTagName('p')[0]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T02:15:14.293

`**[LIVE DEMO](http://jsbin.com/ilodur/1/edit)**`

将 ID 添加到您的 BODY 元素，例如：

```
<body id="page1"> 
```

JavaScript：

```
var colorStyles = {
  "page1":"fuchsia",
  "page2":"green",
  "page3":"orange"
};

// DETECT body ID (AKA pageName)
var pageName = document.getElementsByTagName("body")[0].id;

// COLLECT YOUR ANCHOR ELEMENTS
var A_obj = document.getElementsByTagName("a");

// LOOP ANCHOR ELEMENTS TO ADD .style.color
for(var i=0; i<A_obj.length; i++) {
    A_obj[i].style.color = colorStyles[ pageName ];
} 
```

* * *

**如果您由于模板结构而无法向您的`body`**.

```
<div id="page" name="page1" style="display:none;"></div> 
```

并仅更改此 JS 行：

```
var pageName = document.getElementById("page").getAttribute('name'); 
```

`**[LIVE DEMO](http://jsbin.com/ilodur/2/edit)**`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T02:16:19.750

根据我对你的问题的理解。可能以下是您的答案。如有错误请指正。

```
<style type="text/css">
   .page1content a
{
color:red;
}
      .footer a
{
color:pink;
}
</style>
<body>
<div class="page1content">
<p>text here 
<a href="someurl.com"> link here </a> 
more text 
<a href="secondurl.com"> second link</p> 
</div>

<div class="footer">
<p>even more text
<a href="thirdurl.com"></a></p>
</div>
</body> 
```

# directx - 单纯形噪声着色器？

> ID：15628039
> 
> 赞同：3
> 
> 时间：2013-03-26T01:59:39.103
> 
> 标签：directx, shader, perlin-noise, simplex-noise

我有几个关于 Simplex Noise 的问题。我正在使用 Simplex Noise 在 directx 中生成地形，但我目前正在使用类等。我可能也会将它用于纹理，那么是否有必要将其更改为着色器实现？如果是这样，这很容易做到吗？

此外，对于纹理，使用 3D 噪声还是 2D 噪声更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-25T00:14:21.980

是的，你真的应该把这项工作转移到 GPU 上，这是它最擅长的。

GPU 上的单纯形噪声是一个已解决的问题。[您可以在此处](http://www.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf)找到有关该主题的精彩论文，或者您可以从[此处](https://github.com/ashima/webgl-noise)获取实现。

该实现在 GLSL 中，但移植它只是将 vec3 和 vec4 更改为 float3 和 float4 的问题。

使用它后，我发现迄今为止最快的噪声函数实现是 inigo quilez 的 Perlin 噪声实现（下面提供的实现取自 shadertoy.com 网站上的代码。这是一个很棒的网站，看看吧！

```
#ifndef __noise_hlsl_
#define __noise_hlsl_

// hash based 3d value noise
// function taken from https://www.shadertoy.com/view/XslGRr
// Created by inigo quilez - iq/2013
// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.

// ported from GLSL to HLSL

float hash( float n )
{
    return frac(sin(n)*43758.5453);
}

float noise( float3 x )
{
    // The noise function returns a value in the range -1.0f -> 1.0f

    float3 p = floor(x);
    float3 f = frac(x);

    f       = f*f*(3.0-2.0*f);
    float n = p.x + p.y*57.0 + 113.0*p.z;

    return lerp(lerp(lerp( hash(n+0.0), hash(n+1.0),f.x),
                   lerp( hash(n+57.0), hash(n+58.0),f.x),f.y),
               lerp(lerp( hash(n+113.0), hash(n+114.0),f.x),
                   lerp( hash(n+170.0), hash(n+171.0),f.x),f.y),f.z);
}

#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T13:12:28.500

我想用上面答案的奇妙功能的图片来完成上面的答案，所以你可以限定它（它类似于 libnoise 库中的 valuenoise）

如您所见，它很棒，需要对其进行调整以处理负空间值（绝对 xyz 轴）……显然它是 3d 的，因此期望在 y 轴上具有相同的形态。

![在此处输入图像描述](../Images/f3b4a580f378563311989a8fb9d421d0.png)

![在此处输入图像描述](../Images/42cddb13bef592331354e8b878847f76.png)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-26T02:35:30.633

如果您的应用程序没有动态使用噪声网格和纹理，那么您应该保留当前用于网格的离线创建。但是，如果您希望网格和纹理随时间动态变化（想想可变形地形），那么如果高 fps 对您很重要，则有必要将其更改为着色器实现。它可以做到，但我不确定你声称它很容易的能力水平。对于地形网格的情况，它将涉及使用几何着色器（可能还有流出），以及创建纹理的像素着色器。

至于对纹理使用 2d 或 3d 噪声，这取决于您的使用需求。3d 纹理非常适合表示力场、体素场等。但是动态创建它们的成本很高。如果您只是想将纹理用作常规网格材质，那么 2d 是可行的方法。

# javascript - 我如何在angularjs中使用选择框进行搜索

> ID：15628043
> 
> 赞同：1
> 
> 时间：2013-03-26T02:00:05.130
> 
> 标签：javascript, angularjs

我的东西在角度上正常工作

```
 Any: <input ng-model="search.$"> 
   Student Name only <input ng-model="search.number">
   student Region only <input ng-model="search.region"> 
```

和这个

```
<li ng:repeat="students in student | filter:search"  > 
```

但我想把这三个搜索框变成一个搜索框并像这样选择框

```
 Any: <input ng-model="search.$"> 

<select>
  <option value="number">Student Number</option>
  <option value="region">Student Region</option>

</select> 
```

我也想在用户点击搜索按钮时执行搜索

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:12:08.533

`search`当用户点击按钮时，您可以设置您的值。现场样本： http: [//plnkr.co/edit/jTRmBH](http://plnkr.co/edit/jTRmBH)。

模板：

```
 <label>
 Search Value: <input ng-model="filter">*emphasized text*
 </label><br>
 <label>
 Search Key:
 <select ng-model="key">
   <option value="$">Any</option>
   <option value="number">Student Number</option>
   <option value="region">Student Region</option>
 </select> 
 </label>
 <button ng-click="setfilter()">search</button> 
```

javascript:

```
$scope.setfilter = function() {
  $scope.search = {};
  $scope.search[ $scope.key ] = $scope.filter;
  console.log( $scope.search );
}; 
```

# php - 选择 3 个随机字符串，然后在 PHP 中用逗号分隔它们

> ID：15628045
> 
> 赞同：0
> 
> 时间：2013-03-26T02:00:19.850
> 
> 标签：php, mysql, string, split

我一直在寻找一点点，但我找不到任何值得的东西。所以这是我的问题：
我有一个很长的字符串，我想从中挑选 3 个随机集合，然后用逗号分隔 3 个字符串。以下是相关代码：

```
$mapsandmodes = array("Raid - Hardpoint", "Raid - Capture The Flag", "Raid - Search and Destroy", "Plaza - Hardpoint", "Plaza - Capture The Flag", "Aftermath - Search and Destroy", "Express - Capture The Flag", "Express - Hardpoint", "Express - Search and Destroy", "Meltdown - Search and Destroy", "Slums - Search and Destroy", "Slums - Hardpoint", "Slums - Capture The Flag", "Standoff - Capture The Flag", "Standoff - Search and Destroy", "Yemen - Hardpoint"); 
```

我尝试使用`$mapswithmodes = array_rand($mapsandmodes)`，但输出一个数字（到目前为止我已经得到“1”和“2”）。我希望它为该长行选择 3 个随机字符串集，然后用逗号分隔 3 个字符串，以便将其放入 MYSQL 表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:04:54.140

假设您想选择三个随机元素而不进行替换（例如，您永远不会选择同一个元素两次）：

步骤 1) 随机播放数组[http://php.net/manual/en/function.shuffle.php](http://php.net/manual/en/function.shuffle.php)

步骤 2) 获取数组的前三个元素

第 3 步）使用 implode 将它们连接成一个字符串，用逗号作为胶水[http://www.php.net/manual/en/function.implode.php](http://www.php.net/manual/en/function.implode.php)

如果您想选择三个带有替换的随机元素（例如，您可以选择两次相同的元素）：

步骤 1) 调用 array_rand($mapsandmodes) 三次。这为您提供了数组的索引。因此，$mapsandmodes[array_rand($mapsandmodes)] 将在数组中给出一个随机值。

步骤 2) 使用内爆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:16:33.210

或者改组，您原始代码的问题只是误解了 array_rand(): [array_rand() doc](http://php.net/manual/en/function.array-rand.php)

```
$optionkeys = array_rand($mapsandmodes, 3); 
```

那么 $optionkeys 将是一个长度为 3 的数组，其值是从原始数组中选择的键，您可以使用 $mapsandmodes[($optionkeys[0])]、$mapsandmodes[($optionkeys[1 ])] 和 $mapsandmodes[($optionkeys[2])]。

# jquery - 完全匹配 option 和 optgroup

> ID：15628046
> 
> 赞同：0
> 
> 时间：2013-03-26T02:00:22.050
> 
> 标签：jquery, drop-down-menu, optgroup

I got an issue with following script when the select-options become long:

> 选项很少的解决方案[http://jsfiddle.net/hsQjh/5/](http://jsfiddle.net/hsQjh/5/)
> 
> 有问题的长选项：http: [//jsfiddle.net/hsQjh/6/](http://jsfiddle.net/hsQjh/6/)

我的第一个选择框选项最多有 40+ 个选项，因此第二个选择框也最多有 40+ 个 optgroup，当我在第一个框上选择选项“ **2** ”时，第二个框填充了所有 optgroup，即编号以 2 开头，即 optgroup ' **2** '，填充了' **20** ' - ' **29** '，其他已选择的选项也是如此。

它可以与选项值和选项组标签之间的“ID”完全匹配吗？

```
function filterActivity(e){
     var ids = $('#filterActivity + div input:checked').map(function(i) {
        return $(this).val().replace(/ .*/, '');
     }).get(); // Retrieve checked IDs

     $('#filterSubActivity + div div label').each(function() { // Show matching options
        $(this).toggle($.inArray($('input', this).val()[0], ids) > -1);
     });

     $('#filterSubActivity + div label.optGroup').each(function() { // Show matching groups
        $(this).toggle($(this).next().find('label:visible').length > 0);
     });
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:56:33.140

使用基于正则表达式的过滤器

```
$('#filterSubActivity + div div label').each(function() { // Show matching options
    $(this).toggle($.inArray($('input', this).val().match(/^\d+/)[0], ids) > -1);
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/Lxmbz/)

# emacs - doc-view 并排显示页面

> ID：15628053
> 
> 赞同：3
> 
> 时间：2013-03-26T02:01:48.527
> 
> 标签：emacs, docview

是否可以让文档视图显示两页（并排），而不仅仅是一个？例如，我想同时查看 pg 15 和 pg 16。

谢谢，拉利特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:55:58.043

我认为跟随模式不适用于 doc-view 文档。我鼓励您将此报告为“错误/功能请求”。同时，您必须手动完成：`C-x 3 C-x o next`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-19T16:14:32.090

我还没有代表发表评论，但是要手动将双页面的翻页添加到 Stefans 答案，请执行他的设置 Cx 3 Cx on

然后录制一个键盘宏，它将为两个框架翻转两页。

宏定义： 执行以下按键序列： Cx ( nn Cx onn Cx o Cx )

使用“Cx e”执行宏并仅使用“e”重复执行

然后，您可以通过将宏绑定到键组合（例如 C-9）来保存当前 emacs 会话的宏（因此它不会影响其他 emacs 实例，至少对我而言，但我不使用 emacsclient！） Cx Ck b C-9

现在重复'page up'的过程，将它绑定到C-8，你可以轻松地翻阅你的两栏pdf =)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:45:01.437

我对 docview 一无所知，但您可以使用`follow-mode`任何类型的缓冲区并排查看两个（或更多）页面。

尝试：

```
M-x follow-delete-other-windows-and-split RET 
```

*编辑：*这通常适用于所有类型的缓冲区——但是，“doc-view”是一种特殊的动物，因此 follow-mode 目前不适用于它。

# css - JSF页面中的CSS选择器不起作用

> ID：15628055
> 
> 赞同：1
> 
> 时间：2013-03-26T02:02:15.393
> 
> 标签：css, jsf, primefaces, css-selectors

在 xhtml 页面顶部的样式部分中，我有以下 CSS 选择器：

```
#form\:tabView\:tabExceptions {
    border: 5px solid black;
} 
```

有用。

但是当我尝试使用以下 CSS 选择器（在页面的同一位置）时：

```
[id$=tabExceptions] {
    border: 5px solid black;
} 
```

这没用。

其实，即使

```
[id=form\:tabView\:tabExceptions] {
    border: 5px solid black;
} 
```

不起作用。

知道为什么吗？

**我生成的 HTML：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><link type="text/css" rel="stylesheet" href="/my-admin-web-1.0-SNAPSHOT/faces/javax.faces.resource/theme.css?ln=primefaces-blitzer" /><link type="text/css" rel="stylesheet" href="/my-admin-web-1.0-SNAPSHOT/faces/javax.faces.resource/primefaces.css?ln=primefaces" /><script type="text/javascript" src="/my-admin-web-1.0-SNAPSHOT/faces/javax.faces.resource/jquery/jquery.js?ln=primefaces"></script><script type="text/javascript" src="/my-admin-web-1.0-SNAPSHOT/faces/javax.faces.resource/primefaces.js?ln=primefaces"></script><script type="text/javascript" src="/my-admin-web-1.0-SNAPSHOT/faces/javax.faces.resource/jquery.corner.js?ln=js&amp;loc=en"></script>

<link type="text/css" rel="stylesheet" href="http://www.primefaces.org/showcase-labs/css/default.css" />

<style>
/* <![CDATA[ */

.accordionPanel {
    width:800px;
    margin-left:auto;
    margin-right:auto;
}

.tabView {
    width:900px;
    margin-left:auto;
    margin-right:auto;
}

/* div space between accordion tabs */
/*
.ui-accordion .ui-accordion-content {
    margin-bottom: 20px;
    display: block;
}
*/

/* accordion tabs - upper space */
.ui-accordion .ui-accordion-header { margin-top: 50px; }

/* accordion tabs - uppermost tab */
.ui-accordion .ui-accordion-header.do-nothing { margin-top: 0; }

/***************************/
/* Rounded corners: */

.ui-datatable.ui-corner-all table {
    border-collapse: separate;
    *border-collapse: collapse; /* Fallback for IE <=7\. */
    border-spacing: 0;
}
.ui-datatable.ui-corner-all table tr:first-child th:first-child {
    -moz-border-radius: 6px 0 0 0; -webkit-border-radius: 6px 0 0 0; border-radius: 6px 0 0 0;
}
.ui-datatable.ui-corner-all table tr:first-child th:last-child {
    -moz-border-radius: 0 6px 0 0; -webkit-border-radius: 0 6px 0 0; border-radius: 0 6px 0 0;
}
.ui-datatable.ui-corner-all table tr:first-child th:only-child{
    -moz-border-radius: 6px 6px 0 0; -webkit-border-radius: 6px 6px 0 0; border-radius: 6px 6px 0 0;
}
.ui-datatable.ui-corner-all table tbody td {
    border-top: 0;
    *border-top: inherit; /* Fallback for IE <=7\. */
}
.ui-datatable.ui-corner-all table tr:last-child td:first-child {
    -moz-border-radius: 0 0 0 6px; -webkit-border-radius: 0 0 0 6px; border-radius: 0 0 0 6px;
}
.ui-datatable.ui-corner-all table tr:last-child td:last-child {
    -moz-border-radius: 0 0 6px 0; -webkit-border-radius: 0 0 6px 0; border-radius: 0 0 6px 0;
}
.ui-datatable.ui-corner-all table tr:last-child td:only-child{
    -moz-border-radius: 0 0 6px 6px; -webkit-border-radius: 0 0 6px 6px; border-radius: 0 0 6px 6px;
}

/***************************/

/* http://stackoverflow.com/questions/6874705/is-it-possible-to-use-a-css-wildcard-in-the-middle-of-a-selector/6874731#6874731 */
/* #form\:tabView\:tabExceptions { */
/*
div[id=form\3AtabView\3AtabExceptions] {
    border: 5px solid black !important;
}
*/

/*
#form\:tabView\:tabExceptions {
    border: 5px solid black;
}
*/

[id="form\:tabView\:tabExceptions"] {
    border: 5px solid black;
}

/* ]]> */
</style>

<script>
/* <![CDATA[ */

$(document).ready(function() {
    $(".ui-accordion .ui-accordion-header").corner();
});

/* ]]> */
</script></head><body>
<form id="form" name="form" method="post" action="/my-admin-web-1.0-SNAPSHOT/faces/index.xhtml" enctype="application/x-www-form-urlencoded">
<input type="hidden" name="form" value="form" />
<div id="form:tabView" class="ui-tabs ui-widget ui-widget-content ui-corner-all ui-hidden-container ui-tabs-top tabView" style="border: 5px solid black !important;"><ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" role="tablist"><li class="ui-state-default ui-tabs-selected ui-state-active ui-corner-top" role="tab" aria-expanded="true"><a href="#form:tabView:tab1">Home</a></li><li class="ui-state-default ui-corner-top" role="tab" aria-expanded="false"><a href="#form:tabView:tabExceptions">Exceptions</a></li><li class="ui-state-default ui-corner-top" role="tab" aria-expanded="false"><a href="#form:tabView:tab3">Search</a></li><li class="ui-state-default ui-corner-top" role="tab" aria-expanded="false"><a href="#form:tabView:tab4">Process Management</a></li></ul><div class="ui-tabs-panels"><div id="form:tabView:tab1" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-hidden="false">
<form id="form:tabView:j_idt8" name="form:tabView:j_idt8" method="post" action="/my-admin-web-1.0-SNAPSHOT/faces/index.xhtml" enctype="application/x-www-form-urlencoded">
<input type="hidden" name="form:tabView:j_idt8" value="form:tabView:j_idt8" />
<span id="form:tabView:j_idt8:messages"></span><script id="form:tabView:j_idt8:messages_s" type="text/javascript">$(function(){PrimeFaces.cw('Growl','widget_form_tabView_j_idt8_messages',{id:'form:tabView:j_idt8:messages',sticky:false,life:6000,escape:true,msgs:[]});});</script><div id="form:tabView:j_idt8:j_idt9" class="ui-accordion ui-widget ui-helper-reset ui-hidden-container accordionPanel" role="tablist"><h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role="tab" aria-expanded="false"><span class="ui-icon ui-icon-triangle-1-e"></span><a href="#" tabindex="-1">Exception Volume Today</a></h3><div id="form:tabView:j_idt8:j_idt9:j_idt10" class="ui-accordion-content ui-helper-reset ui-widget-content ui-helper-hidden" role="tabpanel" aria-hidden="true"><div id="form:tabView:j_idt8:j_idt9:j_idt11" class="ui-datatable ui-widget ui-corner-all"><table role="grid"><thead><tr><th id="form:tabView:j_idt8:j_idt9:j_idt11:j_idt14" class="ui-state-default" role="columnheader" colspan="5"><div class="ui-dt-c"><span>2013-02-04</span></div></th></tr><tr><th id="form:tabView:j_idt8:j_idt9:j_idt11:j_idt16" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span></span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt11:j_idt17" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>Outstanding</span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt11:j_idt18" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>>10 mins</span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt11:j_idt19" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>>20 mins</span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt11:j_idt20" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>>30 mins</span></div></th></tr></thead><tfoot></tfoot><tbody id="form:tabView:j_idt8:j_idt9:j_idt11_data" class="ui-datatable-data ui-widget-content"><tr data-ri="0" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">ANF Items</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td></tr><tr data-ri="1" class="ui-widget-content ui-datatable-odd" role="row"><td role="gridcell"><div class="ui-dt-c">Dup Suspects</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td></tr><tr data-ri="2" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">Dup UOW</div></td><td role="gridcell"><div class="ui-dt-c">1</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">1</div></td></tr><tr data-ri="3" class="ui-widget-content ui-datatable-odd" role="row"><td role="gridcell"><div class="ui-dt-c">Dup Transactions</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td></tr><tr data-ri="4" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">Large $ Suspects</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td></tr></tbody></table></div><script id="form:tabView:j_idt8:j_idt9:j_idt11_s" type="text/javascript">PrimeFaces.cw('DataTable','widget_form_tabView_j_idt8_j_idt9_j_idt11',{id:'form:tabView:j_idt8:j_idt9:j_idt11'});</script></div><h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role="tab" aria-expanded="false"><span class="ui-icon ui-icon-triangle-1-e"></span><a href="#" tabindex="-1">Exception Volume Yesterday</a></h3><div id="form:tabView:j_idt8:j_idt9:j_idt31" class="ui-accordion-content ui-helper-reset ui-widget-content ui-helper-hidden" role="tabpanel" aria-hidden="true"><div id="form:tabView:j_idt8:j_idt9:j_idt32" class="ui-datatable ui-widget ui-corner-all"><table role="grid"><thead><tr><th id="form:tabView:j_idt8:j_idt9:j_idt32:j_idt35" class="ui-state-default" role="columnheader" colspan="5"><div class="ui-dt-c"><span>2012-08-29</span></div></th></tr><tr><th id="form:tabView:j_idt8:j_idt9:j_idt32:j_idt37" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span></span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt32:j_idt38" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>Outstanding</span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt32:j_idt39" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>>10 mins</span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt32:j_idt40" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>>20 mins</span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt32:j_idt41" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>>30 mins</span></div></th></tr></thead><tfoot></tfoot><tbody id="form:tabView:j_idt8:j_idt9:j_idt32_data" class="ui-datatable-data ui-widget-content"><tr data-ri="0" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">ANF Items</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td></tr><tr data-ri="1" class="ui-widget-content ui-datatable-odd" role="row"><td role="gridcell"><div class="ui-dt-c">Dup Suspects</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td></tr><tr data-ri="2" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">Dup UOW</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td></tr><tr data-ri="3" class="ui-widget-content ui-datatable-odd" role="row"><td role="gridcell"><div class="ui-dt-c">Dup Transactions</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td></tr><tr data-ri="4" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">Large $ Suspects</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td></tr></tbody></table></div><script id="form:tabView:j_idt8:j_idt9:j_idt32_s" type="text/javascript">PrimeFaces.cw('DataTable','widget_form_tabView_j_idt8_j_idt9_j_idt32',{id:'form:tabView:j_idt8:j_idt9:j_idt32'});</script></div><h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role="tab" aria-expanded="false"><span class="ui-icon ui-icon-triangle-1-e"></span><a href="#" tabindex="-1">Volume by Image Channel</a></h3><div id="form:tabView:j_idt8:j_idt9:j_idt52" class="ui-accordion-content ui-helper-reset ui-widget-content ui-helper-hidden" role="tabpanel" aria-hidden="true"><div id="form:tabView:j_idt8:j_idt9:j_idt53" class="ui-datatable ui-widget ui-corner-all"><table role="grid"><thead><tr><th id="form:tabView:j_idt8:j_idt9:j_idt53:j_idt56" class="ui-state-default" role="columnheader" colspan="2"><div class="ui-dt-c"><span></span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt53:j_idt57" class="ui-state-default" role="columnheader" colspan="2"><div class="ui-dt-c"><span>2013-02-04</span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt53:j_idt58" class="ui-state-default" role="columnheader" colspan="2"><div class="ui-dt-c"><span>2012-08-29</span></div></th></tr><tr><th id="form:tabView:j_idt8:j_idt9:j_idt53:j_idt60" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>Image Channel</span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt53:j_idt61" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>Files Queued</span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt53:j_idt62" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>Files</span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt53:j_idt63" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>Number of Items</span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt53:j_idt64" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>Files</span></div></th><th id="form:tabView:j_idt8:j_idt9:j_idt53:j_idt65" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>Number of Items</span></div></th></tr></thead><tfoot></tfoot><tbody id="form:tabView:j_idt8:j_idt9:j_idt53_data" class="ui-datatable-data ui-widget-content"><tr data-ri="0" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">VIEX</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">1</div></td><td role="gridcell"><div class="ui-dt-c">29721</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td></tr><tr data-ri="1" class="ui-widget-content ui-datatable-odd" role="row"><td role="gridcell"><div class="ui-dt-c">ULZ</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td></tr><tr data-ri="2" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">Totals</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">1</div></td><td role="gridcell"><div class="ui-dt-c">29721</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell"><div class="ui-dt-c">0</div></td></tr></tbody></table></div><script id="form:tabView:j_idt8:j_idt9:j_idt53_s" type="text/javascript">PrimeFaces.cw('DataTable','widget_form_tabView_j_idt8_j_idt9_j_idt53',{id:'form:tabView:j_idt8:j_idt9:j_idt53'});</script></div><h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role="tab" aria-expanded="false"><span class="ui-icon ui-icon-triangle-1-e"></span><a href="#" tabindex="-1">Cart Item Exception Volume</a></h3><div id="form:tabView:j_idt8:j_idt9:j_idt80" class="ui-accordion-content ui-helper-reset ui-widget-content ui-helper-hidden" role="tabpanel" aria-hidden="true"><table cellpadding="10">
<tbody>
<tr>
<td>TODO</td>
</tr>
</tbody>
</table>
</div><h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role="tab" aria-expanded="false"><span class="ui-icon ui-icon-triangle-1-e"></span><a href="#" tabindex="-1">Adjustment Volume</a></h3><div id="form:tabView:j_idt8:j_idt9:j_idt83" class="ui-accordion-content ui-helper-reset ui-widget-content ui-helper-hidden" role="tabpanel" aria-hidden="true"><table cellpadding="10">
<tbody>
<tr>
<td>TODO</td>
</tr>
</tbody>
</table>
</div><h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role="tab" aria-expanded="false"><span class="ui-icon ui-icon-triangle-1-e"></span><a href="#" tabindex="-1">Balancing Totals</a></h3><div id="form:tabView:j_idt8:j_idt9:j_idt86" class="ui-accordion-content ui-helper-reset ui-widget-content ui-helper-hidden" role="tabpanel" aria-hidden="true"><table cellpadding="10">
<tbody>
<tr>
<td>TODO</td>
</tr>
</tbody>
</table>
</div><input type="hidden" id="form:tabView:j_idt8:j_idt9_active" name="form:tabView:j_idt8:j_idt9_active" value="x" /></div><script id="form:tabView:j_idt8:j_idt9_s" type="text/javascript">PrimeFaces.cw('AccordionPanel','widget_form_tabView_j_idt8_j_idt9',{id:'form:tabView:j_idt8:j_idt9',multiple:true});</script><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="3488040969710992296:-5460895671588471169" autocomplete="off" />
</form></div><div id="form:tabView:tabExceptions" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-helper-hidden" role="tabpanel" aria-hidden="true"><div id="form:tabView:tabView2" class="ui-tabs ui-widget ui-widget-content ui-corner-all ui-hidden-container ui-tabs-top tabView"><ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" role="tablist"><li class="ui-state-default ui-tabs-selected ui-state-active ui-corner-top" role="tab" aria-expanded="true"><a href="#form:tabView:tabView2:tba12">ANF</a></li><li class="ui-state-default ui-corner-top" role="tab" aria-expanded="false"><a href="#form:tabView:tabView2:tab22">Operator Locks</a></li><li class="ui-state-default ui-corner-top" role="tab" aria-expanded="false"><a href="#form:tabView:tabView2:tab32">Single Item Duplicate Review</a></li><li class="ui-state-default ui-corner-top" role="tab" aria-expanded="false"><a href="#form:tabView:tabView2:tab42">Multiple Item Duplicate Review</a></li><li class="ui-state-default ui-corner-top" role="tab" aria-expanded="false"><a href="#form:tabView:tabView2:tab52">High Dollar Review</a></li></ul><div class="ui-tabs-panels"><div id="form:tabView:tabView2:tba12" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-hidden="false">

                tab 1

        </div><div id="form:tabView:tabView2:tab22" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-helper-hidden" role="tabpanel" aria-hidden="true">

                tab 2

        </div><div id="form:tabView:tabView2:tab32" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-helper-hidden" role="tabpanel" aria-hidden="true"><table cellpadding="10">
<tbody>
<tr>
<td>After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.                     Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate.</td>
</tr>
</tbody>
</table>
</div><div id="form:tabView:tabView2:tab42" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-helper-hidden" role="tabpanel" aria-hidden="true"><table cellpadding="10">
<tbody>
<tr>
<td>After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.                     Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate.</td>
</tr>
</tbody>
</table>
</div><div id="form:tabView:tabView2:tab52" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-helper-hidden" role="tabpanel" aria-hidden="true"><table cellpadding="10">
<tbody>
<tr>
<td>After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.                     Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate.</td>
</tr>
</tbody>
</table>
</div></div><input type="hidden" id="form:tabView:tabView2_activeIndex" name="form:tabView:tabView2_activeIndex" value="0" autocomplete="off" /></div><script id="form:tabView:tabView2_s" type="text/javascript">PrimeFaces.cw('TabView','widget_form_tabView_tabView2',{id:'form:tabView:tabView2',effect: {name:'fade',duration:'normal'}});</script></div><div id="form:tabView:tab3" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-helper-hidden" role="tabpanel" aria-hidden="true"><table cellpadding="10">
<tbody>
<tr>
<td>After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.                     Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate.</td>
</tr>
</tbody>
</table>
</div><div id="form:tabView:tab4" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-helper-hidden" role="tabpanel" aria-hidden="true"><table cellpadding="10">
<tbody>
<tr>
<td>After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.                     Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate.</td>
</tr>
</tbody>
</table>
</div></div><input type="hidden" id="form:tabView_activeIndex" name="form:tabView_activeIndex" value="0" autocomplete="off" /></div><script id="form:tabView_s" type="text/javascript">PrimeFaces.cw('TabView','widget_form_tabView',{id:'form:tabView',effect: {name:'fade',duration:'normal'}});</script><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="3488040969710992296:-5460895671588471169" autocomplete="off" />
</form><div id="j_idt101" style="width:64px;height:64px;position:fixed;right:5px;bottom:5px"><div id="j_idt101_start" style="display:none"><img id="j_idt102" src="http://www.primefaces.org/showcase/images/loading.gif" alt="" /></div><div id="j_idt101_complete" style="display:none"></div></div><script id="j_idt101_s" type="text/javascript">PrimeFaces.cw('AjaxStatus','widget_j_idt101',{id:'j_idt101'});widget_j_idt101.bindFacet('ajaxStart', 'start');widget_j_idt101.bindFacet('ajaxComplete', 'complete');</script>

<style>
/*
[id$=tabExceptions] {
    border: 5px solid black;
}
*/
</style></body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:07:02.893

它们对我来说都很好...... [http://jsfiddle.net/ncapito/Sb32y/](http://jsfiddle.net/ncapito/Sb32y/) 除了你的选择器之外的东西是错误的。

```
<a id='form:tabView:tabExceptions' >No clue</a>

[id=form\:tabView\:tabExceptions]{
    color: grey;

}
[id$=tabExceptions]{
    background-color:blue
} 
```

# jsf - 将 PDF 填充为弹出窗口，jsf Web 应用程序

> ID：15628059
> 
> 赞同：0
> 
> 时间：2013-03-26T02:02:32.397
> 
> 标签：jsf, jsf-2, facelets

我是网络编程新手。我在 JSF2.0 中有一个 Web 应用程序，我需要帮助。

该应用程序需要将 pdf 嵌入到弹出窗口中（不干扰当前页面）。生成的逻辑在 java bean 中处理，作为字节数组（使用 Apache FOP）。

除了 pdf，顶部必须有一个“打印”和一个“关闭”按钮（就在 pdf 上方）。“打印”功能处理打印功能。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:31:52.450

我认为实现这一点的一个很好的方法是使用一些 jQuery（或 wathever）客户端库在浏览器中显示 PDF 文档。你可以在这里找到一些有用的 jQuery 插件：[http ://www.jquery4u.com/javascript/javascriptjquery-pdf-viewer-plugins/](http://www.jquery4u.com/javascript/javascriptjquery-pdf-viewer-plugins/)

# c++ - 调用函数并在结构中传递它的值

> ID：15628063
> 
> 赞同：2
> 
> 时间：2013-03-26T02:02:56.890
> 
> 标签：c++

所以我有这个结构：

```
// Structure used to define a point (x,y) in the grid.
typedef struct
{
    int x, y;
} Point; 
```

和这个功能

```
Sequence getSequence(int grid[][MAXCOLS], Point startPos)
{
    // Create an empty sequence
    Sequence emptySeq;
    emptySeq.size = 0;

    // Use the empty sequence to start the recursive function
    return generateSeq(grid, startPos, emptySeq);
} 
```

我不知道序列开始的位置。所以我在 main 中也调用了 16 次 getSequence 函数，这样您就可以将 16 个网格位置中的每一个作为可能的起始位置传递给它。

我试过了，但没有用。

```
getSequence(grid, x.0, y.0 ); 
```

有人可以告诉我如何调用 main 中的 getSequence。我是编程新手

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T02:09:38.993

最直接的方法是`Point`像 Arun 所说的那样创建一个实例：

```
int main()
{
   Point p1 ;
   // create grid here

   p1.x = 0 ;
   p1.y = 0 ;
   getSequence( grid, p1 );
} 
```

如果你可以使用`C++11`，那么你也可以这样做：

```
 getSequence( grid, {0,0} ); 
```

要更像`C++`-like，虽然你真的应该使用`constructor`这样的：

```
class Point
{
     public:
     int x, y;

     Point( int a = 1, int b = 1 ) : x(a) , y(b) {} 
} ; 
```

此外，您应该考虑制作`x`和制作，但是您的特定示例开始变得更加复杂。如果你有一个你的电话会变得稍微容易一些，因为你可以这样做：`y``private``constructor``16`

```
 getSequence( grid,  Point(1,1) );
 getSequence( grid,  Point(2,2) ); 
```

或者您也可以使用循环， 和 的值`a`将`b`取决于您的应用程序：

```
for( int a = 0, b = 0; a < 5; ++a, ++b)
{
   getSequence(grid, Point(a,b) );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:14:28.140

作为其他答案的替代方案，您可以提供`Point`一个构造函数：

```
struct Point
{
    Point(int x, int y) : x(x), y(y){}
    int x, y;
} 
```

然后做：

```
getSequence(grid, Point(0, 0)); 
```

这将消除`Point`每次要调用函数时显式构造（或修改）对象的需要，并且 IMO 更具可读性，因为`Point`在此上下文中的目的仅仅是`getSequence`.

注意：`typedef`前面的关键字在 C++ 中`struct`是[不必要的](https://stackoverflow.com/a/612350/1227469)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:09:44.617

您必须创建一个 Point 实例并将其传递给 getSequence 方法。

```
 Point gridpoint; 
    gridpoint.x = 0;
    gridpoint.y = 0;
    getSequence(grid, gridpoint);
    // Use gridpoint here 
```

# ebay-api - eBay Finding API - findCompletedItems - 如何在输出中返回特定方面

> ID：15628068
> 
> 赞同：5
> 
> 时间：2013-03-26T02:03:36.240
> 
> 标签：ebay-api

我`findCompletedItems`过去常常在某个类别（男鞋）中查找与某组关键字匹配的所有项目，并且我很容易指定我只想要所有特定的鞋码，使用`aspectFilter`：

```
<aspectFilter>
   <aspectName>US Shoe Size (Men's)</aspectName>
   <aspectValueName>11</aspectValueName>
</aspectFilter> 
```

但是，如果我想要关键字的所有结果，并且我希望输出包含每个结果的特定方面值（鞋码），即使它们并不完全相同，我将如何去做呢？

我已经使用 API 测试工具和谷歌搜索代码示例花了 3 个小时，但我不知道如何查询所有默认数据加上我所追求的任何其他方面也包括在内在输出中，无需多次查询`aspectFilter`所有不同的大小，这是非常低效的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T23:12:21.313

你不能。

您可以构建一个指定[AspectHistogram](http://developer.ebay.com/DevZone/finding/CallRef/findItemsAdvanced.html#Request.outputSelector)[类型的 outputSelector](http://developer.ebay.com/DevZone/finding/CallRef/types/OutputSelectorType.html)的请求。但是，响应将仅包含有关您的请求选择的项目的各个方面的[汇总信息。](http://developer.ebay.com/DevZone/building-blocks/eBB_RefineSearch_aspectFilter.pdf)您可以在请求中包含您需要多少个 outputSelector，但**方面将始终被聚合**，因为（根据定义）“[方面是给定域中的项目共享的项目特征](http://developer.ebay.com/devzone/finding/Concepts/FindingAPIGuide.html)”（读取域 = 搜索结果）。

可能，您正在寻找的是[项目属性](http://developer.ebay.com/DevZone/finding/CallRef/findItemsAdvanced.html#Response.searchResult.item.attribute)，它应该已经存在于结果中，因为它们特定于每个项目。

**编辑**

> 根据 **SearchResult.item.attribute**的调用特定输出字段表：“该字段是有条件地返回的。有关条件的说明，请参阅字段文档。”

这意味着此类属性特定于找到的项目：每个属性都可以出现在一个项目中，但不能出现在另一个项目中。**你不需要做任何特别的事情来获得它们。**你会在`<SearchResult>`元素中找到它们，在每个元素中，`<item>`每个`<attribute>`元素中。

在响应 XML 中，您应该会找到如下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<findItemsAdvancedResponse xmlns="http://www.ebay.com/marketplace/search/v1/services">
  <!-- various things here... -->
  <searchResult count="1">
  <item>
    <attribute>
      <name>Size</name>
      <value>XXL</value>
    </attribute>
    <!-- ... more attribute nodes allowed here ... -->
    <!-- ... more item info here ... -->
  </item>
  <!-- ... more items ... -->
  </searchResult>
</findItemsAdvancedResponse> 
```

[您可以在此处](http://developer.ebay.com/DevZone/finding/CallRef/findItemsAdvanced.html#Samples)找到更多示例，也可以使用[此文档](http://developer.ebay.com/DevZone/finding/CallRef/types/SearchItem.html)深入了解 XML 结果内容。

**编辑 2**
这似乎与文档相矛盾，该[文档](http://developer.ebay.com/DevZone/finding/CallRef/types/ItemAttribute.html)指出：

> 使用 ItemAttribute 的一个或多个字段的调用：
> 
> > findCompletedItems, findItemsAdvanced, findItemsByCategory, findItemsByKeywords, findItemsByProduct, findItemsIneBayStores

顺便说一句，看起来您必须将[GetSingleItem](http://developer.ebay.com/DevZone/shopping/docs/CallRef/GetSingleItem.html#sampledescriptionitemspecifics)与**IncludeSelector=ItemSpecifics 一起用于通过****findCompletedItems**找到的项目。我会尝试通过将“ItemSpecifics”作为 IncludeSelector 或 OutputSelects来破解**findItemsAdvanced api。**我最后的建议是问[客服](https://ebay.custhelp.com/app/answers/list/kw/item%20specifics/st/6/p/127/a_type/%7Eany%7E/a_lang/%7Eany%7E/Format/%7Eany%7E/SDK/%7Eany%7E/sno/1/search/1/session/L2F2LzEvdGltZS8xMzY1MTEyNDE1L3NpZC84c1NvVFVtbA%3D%3D)。祝你好运！

# git - 使用 git 管理具有不同架构的机器的代码

> ID：15628082
> 
> 赞同：0
> 
> 时间：2013-03-26T02:05:08.810
> 
> 标签：git, git-branch

我正在寻找一种方法来管理一些在构建时需要不同模块的超级计算集群上运行的一些研究代码。

例如：Server1 使用英特尔编译器和 MKL 库。Server2 使用带有 blas 和 lapack 库的 gcc 编译器。

这些差异会更改一些头文件并在某些地方（例如）进行`int`替换，但最终代码通常保持不变并且应该产生相同的结果（在数值噪声范围内）。`MKL_INT`

这是一个活跃的代码库，我会定期更改零碎。目前我在 github 上有项目，从 Server1 创建了一个 master 分支，然后是两个名为 Server1 和 Server2 的新分支；修改了每个分支中的代码，以便它们按预期编译和运行并将更改推送到上游。

作为 git 新手，我在这里碰壁了。我现在是否能够使用此模型来处理一般代码（例如在工作分支上）并将这些更改合并到两个服务器分支？如果是这样，主分支本质上会变得无用吗？有没有更好的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T02:51:14.543

我宁愿建议使用预处理器宏来模块化您的代码，以便获取正确的头文件和数据类型名称。

尽管您可以使用 git 来执行此操作，但对于您想要实现的目标，工作流程并不会真正有效。您将花费大量时间来回合并和解决冲突。

*   让我们假设您有 2 种独立的配置类型（您应该也可以轻松扩展到 2 种以上）。要定义选项并包含特定于它们中的任何一个的标头，您可以使用以下代码结构：

    ```
    #if defined(CONFIG_SERVER_1)

    /* include any Server1 specific headers */
    /* Define any Server1 specific macros */

    #elif defined(CONFIG_SERVER_2)

    /* include any Server2 specific headers */
    /* Define any Server2 specific macros */

    #else

    #error "One of CONFIG_SERVER_1 or CONFIG_SERVER_2 must be defined"

    #endif 
    ```

*   您可以通过`CONFIG_SERVER_1`或`CONFIG_SERVER_2`从您的 Makefile 传递：

    ```
    HOST_NAME := $(shell hostname)

    ifeq ($(HOST_NAME),Server1)
    CPPFLAGS += -DCONFIG_SERVER_1=1
    else
    ifeq ($(HOST_NAME),Server2)
    CPPFLAGS += -DCONFIG_SERVER_2=1
    else
    $(error Unsupported host)
    endif
    endif 
    ```

*   尽可能利用编译器宏（使代码将来可移植）。例如，如果您想使用`MKL_INT`for `ICC`，`int`for`GCC`并且不支持任何其他编译器，您可以这样做：

    ```
    #if defined(__INTEL_COMPILER)
    #define MY_INT MKL_INT

    #elif defined(__GNUC__)
    #define MY_INT int

    #else
    #error "Unsupported compiler!!!"

    #endif 
    ```

    确保`MY_INT`在您计划使用的任何地方使用`int`或`MLK_INT`.

    `__PGI`PGCC、 LLVM 等也有类似的宏`__llvm__`。查看[此](http://sourceforge.net/p/predef/wiki/Compilers/)页面以获取更多此类编译器特定的宏。顺便说一句，这里有一些陷阱，比如`ICC`最终定义`__GNUC__`总是可以访问一些 gcc 特定的包含。因此，对于上述用例，请确保在检查 gcc 之前检查所有其他编译器。

*   当您拥有更多数量的源文件时，将此类宏包含在可由项目的其余部分包含的通用头文件中将使您的生活更轻松。

# html - CSS“inner-html”技术？

> ID：15628083
> 
> 赞同：7
> 
> 时间：2013-03-26T02:05:22.890
> 
> 标签：html, css, innerhtml

我想知道是否有办法根据元素包含的单词来查询元素。所以，如果我有：

```
<div id="globalPageHeader">
    <h1>Home</h1>
</div> 
```

我希望任何`#globalPageHeader h1`包含这个词`Home`的东西都`display`具有`none`.

显然这个例子行不通，但我想知道是否有类似的东西：

```
#globalPageHeader h1(innerHTML == "Home") {
     display: none;
} 
```

我不想使用 JavaScript `innerHTML`，因为我无法访问管理员的 javascript 部分。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T02:08:09.260

使用纯 CSS，这是不可能的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T02:11:05.147

使用 CSS 是不可能的。但是，您可以使用 jQuery 来完成。为什么不直接向所需的 h1 标签添加一个类？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-16T08:07:59.873

I had a similar problem. What you can do is to add an attribute to the ``<h1>`` element. For example `title` :

```
<div id="globalPageHeader">
    <h1 title='Home'>Home</h1>
</div> 
```

And then in the CSS:

```
#globalPageHeader h1[title = 'Home'] {
     display: none;
} 
```

It worked for me.

# javascript - 从 Chrome 扩展程序访问 iframe URL

> ID：15628084
> 
> 赞同：7
> 
> 时间：2013-03-26T02:05:28.547
> 
> 标签：javascript, google-chrome-extension, cross-domain

我有一个扩展，需要在其背景页面中加载一个包含大量重定向的页面。一旦该页面到达一个已知的 URL ( [https://website.com/index.php](https://website.com/index.php) )，iframe 应该将其`src`设置为`about:blank`.

最后一页非常大，有大图像和不需要加载的所有内容，因此我没有附加到 iframe 的`onload`事件，而是以 100 毫秒的间隔设置以下函数：

```
function update(){
    if(document.getElementsByTagName('iframe')[0].contentDocument.location.href == "https://website.com/index.php"){
        console.log("Done!");
        clearInterval(updateInterval);
        document.getElementsByTagName('iframe')[0].src = "about:blank";
    }
} 
```

但是，一旦 iframe 开始加载，update() 就会抛出此错误：

> 不安全的 JavaScript 尝试 从 URL 为 chrome-extension://hdmnoclbamhajcoblymcnloeoedkhfon/background.html 的框架访问具有 URL [https://website.com/index.php的框架。](https://website.com/index.php)请求访问的框架具有“chrome-extension”协议，被访问的框架具有“https”协议。协议必须匹配。

我尝试 catch() 处理该错误，但毫无疑问，传递回 Javascript 的消息不包含 URL。页面会多次重定向，因此了解确切的 URL 很重要。iframe的`src`属性也不会更新以反映重定向。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T02:05:28.547

经过*大量*谷歌搜索并几乎放弃后，我想出了以下解决方案。一旦加载了正确的页面，它就会使用注入的内容脚本将消息发送回扩展程序。

清单.json：

```
{
    ...
    "background": {
        "page": "background.html"
    }, "content_scripts": [
        {
            "matches": ["http://website.com/index.php"],
            "js": ["content.js"],
            "all_frames": true,
            "run_at": "document_start"
        }
    ],
    "permissions": [
        "*://*.website.com/*"
    ]
} 
```

背景.html：

```
<html>
    <head>
        <script type="text/javascript" src="background.js"></script>
    </head>
    <body>
        <iframe src="about:blank"></iframe>
    </body>
</html> 
```

背景.js：

```
var waiting = false;

function login(){ // Call this function to start
    var frame = document.getElementsByTagName('iframe')[0];
    frame.src = "https://website.com/login/";
    waiting = true;
}

function callback(){ // This gets called once the page loads
    console.log("Done!");
}

chrome.extension.onMessage.addListener(function(request, sender, sendResponse){
    if(request.loaded && waiting){
        // If you used a pattern, do extra checks here:
        // if(request.loaded == "https://website.com/index.php")
        document.getElementsByTagName('iframe')[0].src = "about:blank";
        waiting = false;
        callback();
    }
}); 
```

内容.js：

```
chrome.extension.sendMessage({loaded: window.location.href}); 
```

# php - SHOW TABLES LIKE 在 MySQL 中返回 1064 语法错误

> ID：15628087
> 
> 赞同：-1
> 
> 时间：2013-03-26T02:05:47.003
> 
> 标签：php, mysql

我有一个对 SHOW TABLES 的简单调用，我得到一个 1064 语法错误。

```
$query = $this->db->query("SHOW TABLES LIKE docx_setting"); 
```

返回以下错误：

```
Notice: Error: You have an error in your SQL syntax; check the manual that 
corresponds to your MySQL server version for the right syntax to use near 
'docx_setting' at line 1

Error No: 1064
SHOW TABLES LIKE docx_setting in
/home/username/dev/web/application/system/database/mysql.php on line 50 
```

我用谷歌搜索了很多，没有发现我的语法有任何问题。LIKE 只支持一种模式，所以这应该没问题。

有任何想法吗？

谢谢。

——文斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:21:29.687

字符串必须被引用

```
SHOW TABLES LIKE 'docx_setting' 
```

# c++ - 具有出队功能的 SegFaulting

> ID：15628089
> 
> 赞同：3
> 
> 时间：2013-03-26T02:06:07.223
> 
> 标签：c++, linked-list, segmentation-fault

基本上，我正在使用链表实现一个队列，以尝试模拟一天中在商店排队的人，他们等到他们面前的人完成他们的业务。前几个人很好，但是当我第二次调用 dequeue 时，它​​会出现段错误。gdb 调试器说错误来自这一行 head=current->next; （其中电流=头部）。

这是我的出队功能：

```
 void BankQueue::dequeue()
   {
      Node* current=head;
      head=current->next;
      if(head!=NULL)
      {
            head->prev=NULL;
      }
      delete current;
   } 
```

这是入队函数（以防入队时我导致内存泄漏）：

```
 void BankQueue::enqueue(Customer s)
    {
         Node* node= new node;
         node->data=s;
         node->next=NULL;
         if(tail==NULL)
         {
              head=node;
              tail=node;
              node->prev=NULL;
         }
         else
         {
              node->prev=tail;
              tail->next=node;;
              tail=node;
         } 
```

你们可以提供的关于段错误可能发生在哪里的任何帮助都会很棒，在此先感谢。

如有必要，PSI 可以提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:16:32.873

你的`dequeue`功能有缺陷。看看如果`head`是会发生什么`NULL`：

```
void BankQueue::dequeue()
{
    // current == NULL
    Node* current = head;
    // Setting head to NULL->next
    // This will reference memory location 0x00000000 + (some offset)
    head=current->next;
    // This is undefined, but it most likely will return true
    if(head!=NULL)
    {
        // undefined
        head->prev=NULL;
    }
    // Delete NULL
    delete current;
} 
```

另外，是的，也`tail`需要在那里更新。

```
// After you've made sure that head is valid
if (head == tail) {
    // there is only node, so we just clear tail
    tail = NULL;
}
// Then you proceed with removal 
```

* * *

托马斯，回应您的评论：

```
void BankQueue::dequeue()
{
    // If the queue has instances
    if (head)
    {
        // If there is only one instance
        if (head == tail)
        {
            tail = NULL;
        }

        // set the new head
        head = head->next;
        // delete the old head if it exists
        if (head->prev)
        {
            delete head->prev;
        }
        // null data
        head->prev = NULL;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:17:41.383

我有一个评论，但我会扩展，因为我认为这很可能是问题所在。

您的`dequeue`函数不会重置`tail`指针。因为该`enqueue`函数使用它来确定队列是否为空，所以如果您清空队列然后再次将项目放入其中（因为`head`将是 NULL），您将遇到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:21:56.313

在 dequeue 中设置条件 if(!head) return; 作为第一行。正如建议的那样，您将在此之后设置。

# android - NineoldAndroid AnimationListenerAdapter

> ID：15628091
> 
> 赞同：1
> 
> 时间：2013-03-26T02:06:12.180
> 
> 标签：android, android-animation, android-library, android-compatibility

我在代码中使用了 android.animation.AnimatorListenerAdapter 类来收听动画。例子 ：

```
downView.animate().translationX(-mViewWidth).setDuration(mAnimationTime).
setListener(new AnimatorListenerAdapter() {                     
@Override
    public void onAnimationStart(
    Animator animation) {
    boolean real_dismiss = true;
    performDismiss(
//some code
)
    } 
```

我使用了 Nineoldandroids 的向后兼容性库，动画工作正常，但我收到以下错误，这不允许我在我的听众处运行我的代码：

ViewPropertyAnimator 类型中的方法 setListener(Animator.AnimatorListener) 不适用于参数（new AnimatorListenerAdapter(){}）

当我使用 API 级别 11 时，代码运行良好。我的旧导入语句：

```
//import android.animation.Animator;
//import android.animation.AnimatorListenerAdapter;
//import android.animation.ValueAnimator; 
```

我的新进口声明：

```
import com.nineoldandroids.animation.*;
import com.nineoldandroids.*; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T08:37:51.887

我刚遇到同样的问题，发现[杰克沃顿的](https://github.com/JakeWharton/SwipeToDismissNOA/blob/master/src/com/example/android/swipedismiss/SwipeDismissTouchListener.java#L156)实现`SwipeDismissListener`：

在第 156 行，Jake 正在使用`com.nineoldandroids.view.ViewPropertyAnimator.animate(View arg0)` 来执行相同的功能。

因此，您只需将代码更改为以下内容：

```
animate(downView)
.translationX(-mViewWidth)
.setDuration(mAnimationTime)
.setListener(new AnimatorListenerAdapter() {  

@Override
    public void onAnimationStart(Animator animation) {
    boolean real_dismiss = true;
    performDismiss(//some code)
} 
```

而且不应该有任何错误。

# java - 创建一个方法来返回数组的平均值

> ID：15628101
> 
> 赞同：0
> 
> 时间：2013-03-26T02:07:20.430
> 
> 标签：java

我试图在一个类中创建一个静态方法，该方法传递一个数组对象数组并返回数组中对象的平均值。

```
public static double calcAverage() {
  int sum = 0;
  for (int i=0; i < people.length; i++)
            sum = sum + people[i];
  double calcAverage() = sum / people.length
     System.out.println(people.calcAverage());
} 
```

代码出现编译错误，但我是否朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:12:26.500

```
public static double calcAverage() {
  int sum = 0;
  for (int i=0; i < people.length; i++)
            sum = sum + people[i];
  double calcAverage() = sum / people.length
     System.out.println(people.calcAverage());
} 
```

改变

```
 double calcAverage() = sum / people.length 
```

至

```
 double average = sum / (double)people.length; 
```

（声明新变量的正确方法）

改变

```
 System.out.println(people.calcAverage()); 
```

至

```
 return average; 
```

（如果你想打印调用函数的结果，你应该总是在函数之外做，例如`main`在调用函数并存储返回结果之后再做）

所以我们有：

```
public static double calcAverage() {
  int sum = 0;
  for (int i=0; i < people.length; i++)
  {
       sum = sum + people[i];
  }
  double average = sum / (double)people.length;
  return average;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:12:28.547

你的关闭。虽然我看到了一些错误。

首先你的总和=总和+人[i]；

people[i] 返回的是对象而不是整数，因此将对象添加到整数将不起作用。

其次，您在 calcAverage 方法中调用 calcAverage() ，这可能不是您想要做的。这样做称为递归，但我认为您应该调用 calcAverage() 之外的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T02:18:31.303

```
// pass people as a parameter
public static double calcAverage(int[] people) {
   // IMPORTANT: this must be a double, otherwise you're dividing an integer by an integer and you will get the wrong answer
   double sum = 0;
   for (int i=0; i < people.length; i++) {
        sum = sum + people[i];
   }
   // remove the ()
   double result = sum / people.length;
   System.out.println(result);

   // return something
   return result;
}

// example
int[] myPeople = {1,2,3,4,5,6,7,8};
double myPeopleAverage = calcAverage(myPeople); 
```

# jquery - 书中的Jquery Ajax问题

> ID：15628105
> 
> 赞同：1
> 
> 时间：2013-03-26T02:08:05.323
> 
> 标签：jquery

我正在使用一本书来学习 javascript，并且我在最后一章中使用 jquery 教授 ajax。书中的例子不起作用。我什至从我发现作者上传并检查过的网站上下载了该文件。它只会在我尝试提交表单时弹出警报。这是代码：

```
 <!DOCTYPE html>
<html>
<head>
    <title>Ajax Form Submission</title>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script>
        $(document).ready(function(){
            function checkFields(){
                return ($("#name").attr("value") && $("#email").attr("value"));
            }
            $("#form1").submit(function(){
                if(checkFields()){
                    $.post(
                        'test.php', $("#form1").serialize(),
                        function(data){
                            $("#div1").html(data);
                        }
                    );
                }
                else alert("Please fill in name and email fields!");
                return false;
            });
        });
    </script>
</head>
<body>
    <form id="form1">
        Name<input type="text" name="name" id="name"><br />
        Email<input type="text" name="email" id="email"><br />
        <input type="submit" name="submit" id="submit" value="Submit Form"> 
    </form>
    <div id="div1"></div>
</body>
</html> 
```

这是它正在调用的 PHP：

```
<?php
echo "Name: ". $_Request['name'] . "<br />Email:" . $_Request['email'];
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:19:40.683

使用 jQuery 的[`val`](http://api.jquery.com/val/)函数获取文本字段值：

```
function checkFields(){
   return ($("#name").val() && $("#email").val());
} 
```

`value`编辑文本时浏览器不会更新属性。如果您使用`.prop('value')`.

# android - 设置相同的 layout_height edittext 和 imagebutton

> ID：15628107
> 
> 赞同：0
> 
> 时间：2013-03-26T02:08:07.840
> 
> 标签：android, android-layout

我的应用在 LinearLayout 中有一个 EditText 和 ImageButton。

我想设置layout_height EditText，它是ImageButton。

ImageButton 有 src 图像并且设置 layout_height 是 wrap_content。

如何设置 EditText 的 layout_height 与 Imagebutton 的 src 相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:59:02.730

**如果对齐是水平**的，这将是解决方案

 **```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:weightSum="10"
        android:orientation="horizontal" >

        <EditText
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight="5"/>

        <ImageButton 
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="5"
            android:src="@drawable/mail"/>

    </LinearLayout> 
```

![在此处输入图像描述](../Images/d7ac43bf379cfaab8833c1ee978b9bd8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:10:23.453

我认为对于您尝试做的事情，您应该将线性布局设置为 layout_width 和 layout_height “wrap_content”，然后当您将 ImageView 设置为 wrap_content 然后对于 editText 将 layout_height 设置为 match_parent 那么它将与 ImageView 相同

我的错，我以为你说 ImageView 我可能是错的**

# ios - 为 theos 构建系统启用 ARC

> ID：15628108
> 
> 赞同：4
> 
> 时间：2013-03-26T02:08:08.127
> 
> 标签：ios, objective-c, automatic-ref-counting, theos

我目前正在使用 theos 构建系统为越狱的 iPhone 编写应用程序和调整。有没有办法让我使用theos为特定项目启用自动引用计数？

我已经用谷歌搜索并试图破译 theos makefile，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T06:06:02.790

我不会不接受上述答案，因为我怀疑这可能与不同版本的`theos`. 事实证明，至少对于我的 版本`theos`，要设置的环境变量是

```
ADDITIONAL_OBJCFLAGS = -fobjc-arc 
```

（`ADDITIONAL_CFLAGS`也是一种选择，但我认为无论您是否在直接 C 代码上启用 ARC 都不重要）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T04:05:46.120

见[https://github.com/Maxner/BrightnessFix/blob/master/Makefile](https://github.com/Maxner/BrightnessFix/blob/master/Makefile)

```
ARCHS=armv7 armv7s
TARGET_IPHONEOS_DEPLOYMENT_VERSION = 6.0
TARGET_CC = xcrun -sdk iphoneos clang 
TARGET_CXX = xcrun -sdk iphoneos clang++
TARGET_LD = xcrun -sdk iphoneos clang++
SHARED_CFLAGS = -fobjc-arc

include theos/makefiles/common.mk

TWEAK_NAME = BrightnessFix
BrightnessFix_FILES = Tweak.xm
BrightnessFix_FRAMEWORKS = UIKit

include $(THEOS_MAKE_PATH)/tweak.mk 
```

**SHARED_CFLAGS = -fobjc-arc**

就是你要找的。

# entity-framework - Code First 中的一对多关系播种

> ID：15628110
> 
> 赞同：5
> 
> 时间：2013-03-26T02:08:10.733
> 
> 标签：entity-framework

我有以下简单的模型，它正在以 Code First 方法实现。部门和课程具有一对多的关系。一个系可以有很多门课程，而一个课程只能属于一个系。这是模型。

```
public class Department
{
    public int DepartmentId { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public virtual ICollection<Course> Courses { get; set; } 
       }

 public class Course
{
    public int CourseId { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public int DepartmentId { get; set; } 
    public virtual Department Department { get; set; } 
```

}

我的问题是我想给他们播种。我希望我的 Seed 函数中至少有 5 个值。这是种子功能。

```
public class DataInitializer : DropCreateDatabaseIfModelChanges<StudentRecordContext>
{
    protected override void Seed(StudentRecordContext context)
{
    var departments = new  List<Department>
     {
        new Department {  DepartmentId = 1, Title = "English", Description ="English     Department",  Courses = new List<Course>() },
        new Department {  DepartmentId= 2,Title = "Chemistry",   Description ="chemistry department", Courses = new List<Course>() },
        new Department {  DepartmentId= 3,Title = "Mahematics", Description ="mathematics department", Courses = new List<Course>() },
        new Department {  DepartmentId= 4,Title = "Philosophy",  Description ="philosophy department", Courses = new List<Course>() },
        new Department {  DepartmentId= 5,Title = "Biology",     Description ="biology department", Courses = new List<Course>() }
    };                                                           
    departments.ForEach( t => context.Departments.Add(t));
    context.SaveChanges();

    var courses = new List<Course>
    {
        new Course { CourseId = 1055, Title = "Classic English",  Description = "Some        Description", DepartmentId = 1 },
        new Course { CourseId = 2055, Title = "Applied Chemistry",  Description = "Some Description", DepartmentId = 2 },
        new Course { CourseId = 2056, Title = "Applied Mathematics", Description = "Some Description", DepartmentId = 3 },
        new Course { CourseId = 3041, Title = "MetaPhysics",  Description = "Some Description", DepartmentId = 4 },
        new Course { CourseId = 3024, Title = "Molecular Biology", Description = "Some Description", DepartmentId = 5 },
    };
    courses.ForEach(t => context.Courses.Add(t));
    context.SaveChanges(); 
```

但这不起作用。我是 EF 和 Code First 的新手……还有截止日期……谁能帮我看看播种数据库的正确方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:50:24.450

不要在`Seed()`方法中设置主键。实体框架将知道名称中带有 Id 的属性将是主键。

`Seed()`在您的方法中尝试以下操作：

```
protected override void Seed(StudentRecordContext context)
{
    var departments = new  List<Department>
    {
        // this will have DepartmentId = 1
        new Department { Title = "English", Description ="English Department",  Courses = new List<Course>() },
        // more departments
    };
    departments.ForEach(d => context.Departments.Add(d));
    context.SaveChanges();

    var courses = new List<Course>
    {
        // this will have CourseId = 1
        new Course { Title = "Classic English",  Description = "Some Description", Department = departments.FirstOrDefault(d => d.DepartmentId == 1) },
        // this will have CourseId = 2
        new Course { Title = "Drama",  Description = "Some Description", Department = departments.FirstOrDefault(d => d.DepartmentId == 1) },
        // both of the above courses will be added to Department with DepartmentId = 1
        // more courses
    };
    courses.ForEach(c => context.Courses.Add(c));
    context.SaveChanges();

    // now add the two courses to the department
    departments[0].Courses.Add(courses[0]); // in list departments at index 0 add course from list courses at index 0
    departments[0].Courses.Add(courses[1]); // in list departments at index 0 add course from list courses at index 1
    context.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:34:48.293

由于您自己生成主键，因此您需要 `[DatabaseGenerated(DatabaseGenerationOption.None)]` 为 CourseId 和 DepartmentId 放置属性，以便实体框架知道您正在生成键。

更好的选择是继续依赖 EntityFramework 作为主键，但稍微改变你的方法

```
 var courses = new List<Course>
        {
            new Course {Title = "Classic English",  Description = "Some        Description", Department=
     new Department {   Title = "English", Description ="English    
Department",  Courses = new List<Course>() }},
           .....
        };
        courses.ForEach(t => context.Courses.Add(t)); 
```

因此，您需要保存课程，并且由于您正在关联部门，因此它将被隐式保存。

祝你最后期限好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-12T16:44:14.620

这是我的做法，您只需要在“父”之前初始化“子”，不需要 SaveChanges()：

```
var choices = new List<Choices>
{
    new Choices { Description = "Choice1" },
    new Choices { Description = "Choice2" },
    new Choices { Description = "Choice3" },
    new Choices { Description = "Choice4" }
};

choices.ForEach(c => context.Choices.AddOrUpdate(c));

context.Questions.AddOrUpdate(
    p => p.ID,
    new Question { QuestionText = "Question ?", Choices = choices }
    ); 
```

# ios - 列出正在运行的进程

> ID：15628113
> 
> 赞同：0
> 
> 时间：2013-03-26T02:08:28.050
> 
> 标签：ios, process, rubymotion

是否可以将[这个问题](https://stackoverflow.com/questions/8275578/how-to-get-information-about-free-memory-and-running-processes-in-an-app-store-a)上显示的 Objective-C 代码提供给 RubyMotion？你会怎么做？

```
- (NSArray *)runningProcesses {

    int mib[4] = {CTL_KERN, KERN_PROC, KERN_PROC_ALL, 0};
    size_t miblen = 4;

    size_t size;
    int st = sysctl(mib, miblen, NULL, &size, NULL, 0);

    struct kinfo_proc * process = NULL;
    struct kinfo_proc * newprocess = NULL;

    do {

        size += size / 10;
        newprocess = realloc(process, size);

        if (!newprocess){

            if (process){
                free(process);
            }

            return nil;
        }

        process = newprocess;
        st = sysctl(mib, miblen, process, &size, NULL, 0);

    } while (st == -1 && errno == ENOMEM);

    if (st == 0){

        if (size % sizeof(struct kinfo_proc) == 0){
            int nprocess = size / sizeof(struct kinfo_proc);

            if (nprocess){

                NSMutableArray * array = [[NSMutableArray alloc] init];

                for (int i = nprocess - 1; i >= 0; i--){

                    NSString * processID = [[NSString alloc] initWithFormat:@"%d", process[i].kp_proc.p_pid];
                    NSString * processName = [[NSString alloc] initWithFormat:@"%s", process[i].kp_proc.p_comm];

                    NSDictionary * dict = [[NSDictionary alloc] initWithObjects:[NSArray arrayWithObjects:processID, processName, nil] 
                                                                        forKeys:[NSArray arrayWithObjects:@"ProcessID", @"ProcessName", nil]];
                    [processID release];
                    [processName release];
                    [array addObject:dict];
                    [dict release];
                }

                free(process);
                return [array autorelease];
            }
        }
    }

    return nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:05:38.913

来自 RubyMotion 支持的响应：

我真的不知道你是否可以在 RubyMotion 中做到这一点，可能是的。但是对于这样的任务，我只会创建一个静态库。我在这里创建了一个示例：

[https://github.com/jjaffeux/running_processes_rubymotion](https://github.com/jjaffeux/running_processes_rubymotion)

# windows - MASM32 - 链接时带有下划线的“未解析的外部符号”

> ID：15628119
> 
> 赞同：2
> 
> 时间：2013-03-26T02:08:58.173
> 
> 标签：windows, assembly, masm32

我从以下网站下载并提取了 MASM32 + SDK：http: [//www.masm32.com/masmdl.htm](http://www.masm32.com/masmdl.htm)

然后我使用 ml.exe 和 link.exe 编译并链接了以下程序：

```
.386
.model flat, stdcall

; Windows libraries
includelib \masm32\lib\kernel32.lib
includelib \masm32\lib\user32.lib
extrn MessageBoxA@16 : PROC
extrn ExitProcess@4 : PROC

option casemap:none ; Treat labels as case-sensitive

.DATA           ; Begin initialized data segment
  ProgramTitle db "Hello, puny humans!", 0 ; define byte
  DisplayText db "Wahahaha", 0

.CODE           ; Begin code segment
_main PROC

  push 0
  mov eax, offset ProgramTitle
  push eax
  push offset DisplayText
  push 0

  call MessageBoxA@16
  call ExitProcess@4

  ret
_main ENDP

END 
```

命令行：

```
ml /c test.asm
link /entry:_main /subsystem:windows test.obj 
```

输出：

```
ml /c test.asm
    Assembling:  test.asm

link /entry:_main /subsystem:windows test.obj    
    test.obj : warning LNK4033: converting object format from OMF to COFF
    test.obj : error LNK2001: unresolved external symbol _MessageBoxA@16
    test.obj : error LNK2001: unresolved external symbol _ExitProcess@4
    test.exe : fatal error LNK1120: 2 unresolved externals 
```

尝试在 .obj 文件上运行垃圾箱：

```
Dump of file test.obj
test.obj : warning LNK4048: Invalid format file; ignored

    Summary 
```

我无法使用 MASM32 (ml.exe v. 6.14) 的默认功能和开箱即用的库来链接文件，这对我来说似乎很奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T02:08:58.173

该程序必须使用 /coff 选项进行编译。ml 6.14 默认为 OMF。这是 dumpbin 拒绝文件（它只接受 COFF）和链接器警告“将对象格式从 OMF 转换为 COFF”的原因：

```
ml /c /coff test.asm 
```

dumpbin 输出反映了这一点：

```
File Type: COFF OBJECT

    Summary

        1D .data
        48 .drectve
        1A .text 
```

除了 test.exe 和 Microsoft 的版权声明之外，链接器没有任何输出。

**笔记：**

ML.EXE 6.14 大约有 20 年的历史。（[维基百科](http://en.wikipedia.org/wiki/Microsoft_Macro_Assembler)）

7.0+ 版与 Visual C++ 开发环境捆绑在一起。8.0+ 版本受到某些限制：( [masm32.com](http://www.masm32.com/history.htm) )

> “7.0 版及更高版本是 Microsoft Visual C++ 开发环境的组件，并且已在许多用于 Microsoft Windows 后续版本的设备开发套件中提供。8.0 版及更高版本已根据最终用户许可协议从 Microsoft 免费下载，将免费版本的使用限制为为 Microsoft 操作系统开发代码。”

MASM 8.0 可在此处获得：http: [//www.microsoft.com/en-us/download/details.aspx?id=12654](http://www.microsoft.com/en-us/download/details.aspx?id=12654)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T22:25:56.910

**6.14 的额外说明**，

在这种情况下，ml.exe 将忽略 /coff 选项（奇怪的问题。）

```
ml test.asm /c /coff 
```

ml.exe 将考虑 /coff 选项。

```
ml /c /coff test.asm 
```

# php - PHP PDO - dblib MSSQL - 在查询中使用变量不起作用

> ID：15628121
> 
> 赞同：1
> 
> 时间：2013-03-26T02:09:33.237
> 
> 标签：php, sql, sql-server, pdo

我有一个相当简单的查询，我想用我的 PDO 连接到远程 MSSQL 服务器运行。

```
SELECT BookingID, DriverID 
FROM dbo.VehicleJobHistory 
WHERE TimeJobRequired > "02/03/2013" AND VehicleID = $vid 
```

当我编写没有任何变量的查询时，它工作得很好，但是一旦我尝试向查询中添加一个变量，我什么也没有返回。我认为它的类型不匹配，但我不能确定。

如果我将 $vid 更改为“451”，我会得到我正在寻找的结果。

```
$vid = '451';    
$myServer = "X";
$myUser = "X";
$myPass = "X";
$myDB = "X";

try {
  # MS SQL Server and Sybase with PDO_DBLIB

$DBH = new PDO("dblib:host=$myServer;dbname=$myDB", $myUser, $myPass);

# creating the statement
$STH = $DBH->query('SELECT BookingID, DriverID FROM dbo.VehicleJobHistory WHERE TimeJobRequired > "02/03/2013" AND VehicleID = $vid');

# setting the fetch mode
$STH->setFetchMode(PDO::FETCH_OBJ);

# showing the results
while($row = $STH->fetch()) {
    echo $row->BookingID . "/";
    echo $row->DriverID  ;
echo "<br>";

}

}
catch(PDOException $e) {
    echo $e->getMessage();
}

# close the connection
$DBH = null;
echo "connection closed"; 
```

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:12:44.343

这是因为您的查询是在单引号字符串中定义的。该变量`$vid`不会被插入到单引号字符串中，而是作为文字传递`$vid`，导致查询语法错误，因为它没有被引用。反转引号，在外面使用双引号。

```
$STH = $DBH->query("SELECT BookingID, DriverID FROM dbo.VehicleJobHistory WHERE TimeJobRequired > '02/03/2013' AND VehicleID = $vid"); 
```

但实际上，这应该通过准备好的语句和`bindParam()`for来完成`VehicleID`。

```
$stmt = $DBH->prepare("SELECT BookingID, DriverID FROM dbo.VehicleJobHistory WHERE TimeJobRequired > '02/03/2013' AND VehicleID = :vid");
if ($stmt) {
  $stmt->bindParam(':vid', $vid);
  $stmt->execute();
} 
```

开始阅读[PDO 准备好的语句](http://php.net/manual/en/pdo.prepare.php)。如果你使用 PDO，你应该确保你得到了他们的安全利益。

# javascript - java脚本，asp.net dropDownList 模拟点击跨浏览器

> ID：15628127
> 
> 赞同：0
> 
> 时间：2013-03-26T02:09:48.697
> 
> 标签：javascript, asp.net

我试图在单击某个跨度时滑动 dropDownList 的元素，但是在尝试了很多事情之后，它似乎无法正常工作......这是我正在尝试的：

```
ddSpan.addEventListener("click",
        function () {
            var ddControl = document.getElementById("<%=ddControl.ClientID %>");
            var e = document.createEvent('MouseEvents');
            e.initMouseEvent("mousedown", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
            var canceled = !ddControl.dispatchEvent(e);
            if (canceled) {
                alert("canceled");
            } else{
                alert("worked");
            }
            $(ddControl).click();
        }, false); 
```

每次单击跨度时，我都会收到一条“工作”消息，但下拉菜单不会向上滑动。我也尝试了“点击”事件和`$(ddControl).trigger("click");`

# python - python sqlalchemy 在元组数据结构中插入多行

> ID：15628131
> 
> 赞同：4
> 
> 时间：2013-03-26T02:10:14.087
> 
> 标签：python, sqlalchemy, tuples, bulkinsert, sql-insert

我一直在研究如何将具有 7 个元素（列）的约 500 个元组（行）的列表插入到数据库中。我已经阅读了关于 stackoverflow 以及其他论坛的各种帖子。我发现了以下内容，它建议使用“executemany()”方法，但我不太清楚如何使用。我需要将我的对象从元组转换为字典吗？问题是我没有名称：数据结构的值类型。

[如何使用 SQLAlchemy 将 SQL 文件从查询表达式转储到批量插入 DBMS？](https://stackoverflow.com/questions/2880517/how-to-use-sqlalchemy-to-dump-an-sql-file-from-query-expressions-to-bulk-insert?rq=1)

```
Here is an example:

engine = create_engine('sqlite:///:memory:', echo=True)
metadata = MetaData()
hockey= Table('hockey', metadata, 
    Column('team', String(16), primary_key=True),
    Column('jersey_colour', String(16)),
    Column('stadium', String(32)),
    Column('goals', Integer),
    Column('date', Date, primary_key=True),
    Column('assists', Integer))

>>>data[0]
[(u'Maple Leafs', u'Blue', u'Air Canada Center', 151, '2013-03-25', 301)] 
```

**编辑：**

我尝试了描述的解决方案（[Sqlalchemy 核心，从元组插入多行而不是 dict](https://stackoverflow.com/questions/14054787/sqlalchemy-core-insert-multiple-rows-from-a-tuple-instead-of-dict)）如下：

```
markers = ','.join('?' * len(data[0]))
ins = 'INSERT INTO {tablename} VALUES ({markers})'
ins = ins.format(tablename=hockey.name, markers=markers)

>>str(ins)
'INSERT INTO hockey VALUES (?,?,?,?,?,?)'

conn = engine.connect()
result = conn.execute(ins, data)

In [59]: result = conn.execute(ins, data)
2013-03-26 07:29:28,371 INFO sqlalchemy.engine.base.Engine INSERT INTO hockey VALUES (?,?,?,?,?,?)
2013-03-26 07:29:28,371 INFO sqlalchemy.engine.base.Engine (u'Maple Leafs', u'Blue', u'Air Canada Center', 151, '2013-03-25', 301)
2013-03-26 07:29:28,371 INFO sqlalchemy.engine.base.Engine ROLLBACK
---------------------------------------------------------------------------
OperationalError                          Traceback (most recent call last)
<ipython-input-59-dafe2aef2c66> in <module>()
----> 1 result = conn.execute(ins, data)

/usr/lib/python2.7/site-packages/sqlalchemy/engine/base.pyc in execute(self, object, *multiparams, **params)
    662                                                 object,
    663                                                 multiparams,
--> 664                                                 params)
    665         else:
    666             raise exc.InvalidRequestError(

/usr/lib/python2.7/site-packages/sqlalchemy/engine/base.pyc in _execute_text(self, statement, multiparams, params)
    806             statement,
    807             parameters,
--> 808             statement, parameters
    809         )
    810         if self._has_events:

/usr/lib/python2.7/site-packages/sqlalchemy/engine/base.pyc in _execute_context(self, dialect, constructor, statement, parameters, *args)
    876                                 parameters,
    877                                 cursor,
--> 878                                 context)
    879             raise
    880

/usr/lib/python2.7/site-packages/sqlalchemy/engine/base.pyc in _execute_context(self, dialect, constructor, statement, parameters, *args)
    869                                     statement,
    870                                     parameters,
--> 871                                     context)
    872         except Exception, e:
    873             self._handle_dbapi_exception(

/usr/lib/python2.7/site-packages/sqlalchemy/engine/default.pyc in do_execute(self, cursor, statement, parameters, context)
    318
    319     def do_execute(self, cursor, statement, parameters, context=None):
--> 320         cursor.execute(statement, parameters)
    321
    322     def do_execute_no_params(self, cursor, statement, context=None):

OperationalError: (OperationalError) near "hockey": syntax error 'INSERT INTO hockey VALUES (?,?,?,?,?,?)' (u'Maple Leafs', u'Blue', u'Air Canada Center', 151, '2013-03-25', 301) 
```

有错误：

```
 OperationalError: (OperationalError) near "hockey": syntax error 'INSERT INTO hockey VALUES (?,?,?,?,?,?)' (u'Maple Leafs', u'Blue', u'Air Canada Center', 151, '2013-03-25', 301) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:40:22.470

好吧，我做了以下事情：

```
column_names = tuple(c.name for c in hockey.c)

>>>column_names
('team', 'jersey_colour', 'stadium', 'goals', 'date', 'assists')

final = [dict(zip(column_names,x)) for x in data] 
```

上面为每一行或每一行创建了一个字典列表。这应该可以，但是当我运行时出现以下错误：

```
>>>conn.execute(ins, final)

SQLite Date type only accepts Python date objects as input. 
```

无论如何，这是我需要研究的另一个问题。也就是说，我正在回答并接受这个问题，因为上面的字典应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-30T22:51:05.887

来自未来的你好！

我发现自己*也*想基于现有的 SQLAlchemy 表（或模型，`declarative_base()`在我的情况下继承自）进行批量数据插入。我也对必须即时创建字典来进行插入的想法感到恼火，并寻找一种更直接的方法。

我敢肯定，自从您在 2013 年问/回答这个问题以来，发生了很多变化，但是在 2021 年，使用 SQLAlchemy 1.4 和 Python 3.7.something，这对我有用：

```
from sqlalchemy import create_engine, MetaData, Table, Column, String, Integer

engine = create_engine('sqlite:///:memory:', echo=True)
metadata = MetaData(bind=engine)

hockey = Table('hockey', metadata, 
    Column('team', String(16), primary_key=True),
    Column('jersey_colour', String(16)),
    Column('stadium', String(32)),
    Column('goals', Integer),
    Column('date', String(10), primary_key=True),
    Column('assists', Integer))

data = [
    ['Blue', 'Toronto Maple Leafs', 'Air Canada Center', '2013-03-25', 301, 151], 
    ['Red', 'Calgary Flames', 'PenWest', '2013-03-25', 254, 147]
]

metadata.create_all()
engine.execute(hockey.insert().values(data)) 
```

您可能会注意到`date`，为简单起见，我将字段更改为字符串，因为 SQLite DB-API 库需要 Python`datetime.date`用于[此处](https://docs.sqlalchemy.org/en/14/core/type_basics.html#sqlalchemy.types.Date)所述的那些。（任何对这种小把戏感到困惑的人都应该看到[这个答案](https://stackoverflow.com/a/15644892/785213)以获得澄清。）

无论如何，现在使用将二维数据结构插入 SQLite 数据库可以`.insert().values`正常工作，而无需`dict(zip(…))`繁琐。

```
>>> from sqlalchemy import select
>>> engine.execute(select(hockey)).all()

[('Blue', 'Toronto Maple Leafs', 'Air Canada Center', '2013-03-25', '301', 151),
 ('Red', 'Calgary Flames', 'PenWest', '2013-03-25', '254', 147)] 
```

# ios - UITapGestureRecognizer - 让它在触地时工作，而不是触地？

> ID：15628133
> 
> 赞同：90
> 
> 时间：2013-03-26T02:10:37.653
> 
> 标签：ios, objective-c, swift, uitapgesturerecognizer

我使用点击事件对时间非常敏感，所以我很好奇是否可以在用户简单地触摸时激活 UITapGestureRecognizer，而不是要求他们也触摸？

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2013-08-05T15:23:30.860

使用 UILongPressGestureRecognizer 并将其设置`minimumPressDuration`为 0。它会在状态期间起到触地的作用`UIGestureRecognizerStateBegan`。

# 对于斯威夫特 4+

```
func setupTap() {
    let touchDown = UILongPressGestureRecognizer(target:self, action: #selector(didTouchDown))
    touchDown.minimumPressDuration = 0
    view.addGestureRecognizer(touchDown)
}

@objc func didTouchDown(gesture: UILongPressGestureRecognizer) {
    if gesture.state == .began {
        doSomething()
    }
} 
```

# 对于 Objective-C

```
-(void)setupLongPress
{
   self.longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(didLongPress:)];
   self.longPress.minimumPressDuration = 0;
   [self.view addGestureRecognizer:self.longPress];
}

-(void)didLongPress:(UILongPressGestureRecognizer *)gesture
{
   if (gesture.state == UIGestureRecognizerStateBegan){
      [self doSomething];
   }
} 
```

* * *

## 回答 #2

> 赞同：141
> 
> 时间：2013-03-26T04:09:07.623

创建您的自定义 TouchDownGestureRecognizer 子类并在 touchesBegan 中实现手势：

TouchDownGestureRecognizer.h

```
#import <UIKit/UIKit.h>

@interface TouchDownGestureRecognizer : UIGestureRecognizer

@end 
```

TouchDownGestureRecognizer.m

```
#import "TouchDownGestureRecognizer.h"
#import <UIKit/UIGestureRecognizerSubclass.h>

@implementation TouchDownGestureRecognizer
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    if (self.state == UIGestureRecognizerStatePossible) {
        self.state = UIGestureRecognizerStateRecognized;
    }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    self.state = UIGestureRecognizerStateFailed;
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    self.state = UIGestureRecognizerStateFailed;
}

@end 
```

执行：

```
#import "TouchDownGestureRecognizer.h"
    TouchDownGestureRecognizer *touchDown = [[TouchDownGestureRecognizer alloc] initWithTarget:self action:@selector(handleTouchDown:)];
    [yourView addGestureRecognizer:touchDown];

-(void)handleTouchDown:(TouchDownGestureRecognizer *)touchDown{
    NSLog(@"Down");
} 
```

* * *

快速实现：

```
import UIKit
import UIKit.UIGestureRecognizerSubclass

class TouchDownGestureRecognizer: UIGestureRecognizer
{
    override func touchesBegan(touches: Set<UITouch>, withEvent event: UIEvent)
    {
        if self.state == .Possible
        {
            self.state = .Recognized
        }
    }

    override func touchesMoved(touches: Set<UITouch>, withEvent event: UIEvent)
    {
        self.state = .Failed
    }

    override func touchesEnded(touches: Set<UITouch>, withEvent event: UIEvent)
    {
        self.state = .Failed
    }
} 
```

* * *

这是 2017 年要粘贴的 Swift 语法：

```
import UIKit.UIGestureRecognizerSubclass

class SingleTouchDownGestureRecognizer: UIGestureRecognizer {
    override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent) {
        if self.state == .possible {
            self.state = .recognized
        }
    }
    override func touchesMoved(_ touches: Set<UITouch>, with event: UIEvent) {
        self.state = .failed
    }
    override func touchesEnded(_ touches: Set<UITouch>, with event: UIEvent) {
        self.state = .failed
    }
} 
```

请注意，这是`UITap`. 所以在代码中......

```
func add(tap v:UIView, _ action:Selector) {
    let t = UITapGestureRecognizer(target: self, action: action)
    v.addGestureRecognizer(t)
} 
```

你可以安全地换成....

```
func add(hairtriggerTap v:UIView, _ action:Selector) {
    let t = SingleTouchDownGestureRecognizer(target: self, action: action)
    v.addGestureRecognizer(t)
} 
```

测试表明它不会被多次调用。它可以作为替代品使用；你可以在两个电话之间交换。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-07-01T10:55:24.833

## Swift（没有子类化）

这是一个类似于[Rob Caraway 的 Objective-C 答案](https://stackoverflow.com/a/18061848/3681880)的 Swift 版本。

这个想法是使用`minimumPressDuration`设置为零的长按手势识别器，而不是使用轻击手势识别器。这是因为长按手势识别器会报告触摸开始事件，而轻击手势则不会。

```
import UIKit
class ViewController: UIViewController {

    @IBOutlet weak var myView: UIView!

    override func viewDidLoad() {
        super.viewDidLoad()

        // Add "long" press gesture recognizer
        let tap = UILongPressGestureRecognizer(target: self, action: #selector(tapHandler))
        tap.minimumPressDuration = 0
        myView.addGestureRecognizer(tap)
    }

    // called by gesture recognizer
    @objc func tapHandler(gesture: UITapGestureRecognizer) {

        // handle touch down and touch up events separately
        if gesture.state == .began {
            // do something...
            print("tap down")
        } else if gesture.state == .ended { // optional for touch up event catching
            // do something else...
            print("tap up")
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-16T14:33:30.797

我需要能够让我的视图有一个头发触发器，以便一旦它被点击它就会响应。使用[@LESANG 答案](https://stackoverflow.com/a/15629234/4833705)和使用[@RobCaraway 答案](https://stackoverflow.com/a/18061848/4833705)都有效。**我在两个**答案中遇到的问题是我失去了识别滑动的能力。滑动时我需要旋转视图，但只要我的手指触摸视图，就只能识别出水龙头。tapRecognizer 太敏感了，无法区分点击和滑动。

这是我根据[@LESANG 的答案](https://stackoverflow.com/a/15629234/4833705)结合这个[答案](https://stackoverflow.com/a/12983080/4833705)和这个[答案得出](https://stackoverflow.com/a/56816873/4833705)的。

我在每个事件中发表了 6 条评论。

```
import UIKit.UIGestureRecognizerSubclass

class SingleTouchDownGestureRecognizer: UIGestureRecognizer {

    var wasSwiped = false

    override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent) {

        guard let view = self.view else { return }
        guard let touches = event.touches(for: view) else { return } // 1\. compare that event in touchesBegan has touches for the view that is the same as the view to which your gesture recognizer was assigned

        if touches.first != nil {
            print("Finger touched!") // 2\. this is when the user's finger first touches the view and is at locationA
            wasSwiped = false // 3\. it would seem that I didn't have to set this to false because the property was already set to false but for some reason when I didn't add this it wasn't responding correctly. Basically set this to false
        }
    }

    override func touchesMoved(_ touches: Set<UITouch>, with event: UIEvent) {

        guard let touch = touches.first else { return }

        let newLocation = touch.location(in: self.view)
        let previousLocation = touch.previousLocation(in: self.view)

        if (newLocation.x > previousLocation.x) || (newLocation.x < previousLocation.x) {
            print("finger touch went right or left") // 4\. when the user's finger first touches it's at locationA. If the the user moves their finger to either the left or the right then the finger is no longer at locationA. That means it moved which means a swipe occurred so set the "wasSwiped" property to true

            wasSwiped = true // 5\. set the property to true because the user moved their finger
        }
    }

    override func touchesEnded(_ touches: Set<UITouch>, with event: UIEvent) {
        print("finger is no longer touching.") // 6\. the user has lifted their finger off of the view. If "wasSwiped" is true then ".fail" but if it wasn't swiped then ".recognize"

        if wasSwiped {
            self.state = .failed
        } else {
            self.state = .recognized
        }
    }
} 
```

并使用它，以便使用它的视图获得头发触发响应和左右滑动手势：

```
let tapGesture = SingleTouchDownGestureRecognizer(target: self, action: #selector(viewWasTapped(_:)))
myView.addGestureRecognizer(tapGesture)

let rightGesture = UISwipeGestureRecognizer(target: self, action: #selector(respondToSwipeGesture(recognizer:)))
rightGesture.direction = .right
myView.addGestureRecognizer(rightGesture)

let leftGesture = UISwipeGestureRecognizer(target: self, action: #selector(respondToSwipeGesture(recognizer:)))
leftGesture.direction = .left
myView.addGestureRecognizer(leftGesture) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-21T11:00:11.700

这是另一种解决方案。创建 UIControl 的子类。即使在 Storyboard 中，您也可以像 UIView 一样使用它，因为 UIControl 是 UIView 的子类。

```
class TouchHandlingView: UIControl {
} 
```

并添加目标：

```
@IBOutlet weak var mainView: TouchHandlingView!
...

mainView.addTarget(self, action: "startAction:", forControlEvents: .TouchDown)
... 
```

然后指定的action会像UIButton一样被调用：

```
func startAction(sender: AnyObject) {
    print("start")
} 
```

# javascript - javascript 引擎 v8 内联缓存

> ID：15628134
> 
> 赞同：1
> 
> 时间：2013-03-26T02:10:49.027
> 
> 标签：javascript, performance, v8

正如我们所知，v8 启用了内联缓存以提高性能，

谁能解释一下 v8 究竟做了什么以及它如何提高性能？

如果显示一个示例，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:35:16.630

直接取自[Chrome V8 页面](https://developers.google.com/v8/design)

> V8 在第一次执行时将 JavaScript 源代码直接编译为机器码。没有中间字节码，没有解释器。属性访问由内联缓存代码处理，当 V8 执行时，这些代码可能会被其他机器指令修补......

和

> ...V8 通过预测此 [对象的] 类也将用于在同一代码段中访问的所有未来对象来优化属性访问，并使用类中的信息来修补内联缓存代码以使用隐藏类。如果 V8 预测正确，则在单个操作中分配（或获取）属性的值。如果预测不正确，V8 会修补代码以删除优化。

例如，从 Point 对象访问属性 x 的 JavaScript 代码是：

```
point.x 
```

在 V8 中，为访问 x 生成的机器代码是：

```
# ebx = the point object
cmp [ebx,<hidden class offset>],<cached hidden class>
jne <inline cache miss>
mov eax,[ebx, <cached x offset>] 
```

# sap - 在 SAP NWDS 中找不到 Web Dynpro 的 Java 编辑器

> ID：15628135
> 
> 赞同：-1
> 
> 时间：2013-03-26T02:10:54.013
> 
> 标签：sap, netweaver, webdynpro

我将我的 Webdyn Pro 从 NWDI 7.0 移到 7.3，从那时起我无法在 7.3 版本中为我的 WebDyn Pro 程序打开 Java 编辑器。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:07:03.673

当视图中出现错误时，有时无法打开 Web Dynpro 视图的*Java 编辑器。*

请检查 Eclipse 视图“问题”或“标记”并尝试修复所有可以从*视图编辑器*修复的错误。同时展开视图上下文的所有子节点并在那里查找错误（红色 x）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T00:08:12.007

从 7.0 版到 7.3 版 webdynpro 上的一些更改，例如接口控制器不再存在。

您应该使用迁移向导，这将帮助您将 7.0 dc 项目配置更改为 7.3

您可以在 sap 页面上查看该网页，解释这些问题。

[http://www.sdn.sap.com/irj/sdn/go/portal/prtroot/docs/library/uuid/8061e964-2036-2e10-ee9d-ef21d174fdd9?QuickLink=index&overridelayout=true](http://www.sdn.sap.com/irj/sdn/go/portal/prtroot/docs/library/uuid/8061e964-2036-2e10-ee9d-ef21d174fdd9?QuickLink=index&overridelayout=true)

如果您按照这些步骤操作并且无法打开视图，则应该在问题上提示一些错误，其中一些是阻塞的，因此它不能与视图直接相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-29T11:24:13.987

在敲响警钟之前，您可以做几件事：

1.  正如 Tobias 提议的那样，如果 View 或 Component Controller 中出现错误，有时无法在编辑器中打开此视图/控制器。*这里最明显的操作是自动修复（快速修复）问题*选项卡中列出的错误。
2.  如果它们无法自动修复，那么您应该了解错误是什么并手动修复它。然而，即使修复了，NWDS 也并不总是正确地处理环境（文件系统同步通常很糟糕）并且无法理解错误已经被修复。在这种情况下，**重建项目**和**修复**功能通常会有所帮助。它们可以通过 WD-project 的上下文菜单调用。
3.  在开发之前您应该检查的最后一点（但并非最不重要！）是 NWDS 和 NWDI 之间的版本兼容性。如本博客所述：

> 主要版本
> - NWDS
> - 本地 AS（可选，但如果使用它也必须匹配其版本）
> - Track
> - RunTime Systems（进一步称为 RTS）
> **应该始终匹配**。

7.4[是](http://service.sap.com/sap/support/notes/1791485)本规则的排除项。
此外，NWDS 还必须与 Release 和 SP 相匹配，**尤其是在涉及 WebDynpro 等建模工具时**。[本说明中](http://service.sap.com/sap/support/notes/718949)有关这些内容的更多信息， 因此我强烈建议您检查所有版本，如果它们仍然不合规，请使其合规。
也许这些关于[NWDI](http://help.sap.com/saphelp_nw73/helpdata/en/48/2f8c4856ab58d5e10000000a421937/content.htm?frameset=/en/48/257b2042ac539ae10000000a421937/frameset.htm&current_toc=/en/48/257a6542ac539ae10000000a421937/plain.htm&node_id=3)和[Webdyn Pro](http://scn.sap.com/community/web-dynpro-java/blog/2013/02/22/migration-of-web-dynpro-java-dcs-from-70-to-731-stepwise-procedure-and-troubleshooting)迁移的资源也会对您有所帮助。

# ember.js - 将视图插入集合视图时单击事件未触发

> ID：15628137
> 
> 赞同：3
> 
> 时间：2013-03-26T02:11:05.933
> 
> 标签：ember.js

我试图在运行时向我的页面添加几个按钮。创建按钮并将其推送到容器视图中。请参阅下面的 addButtons 函数。

给定一个控制器：

```
RE.MenuController =  Em.ArrayController.extend

  addButtons: ->
    console.log "addButtons"
    container = Ember.ContainerView.create()
    container.append()

    prevButton = RE.ButtonView.create()
    container.pushObject(prevButton) 
```

和一个观点：

```
RE.ButtonView = Em.View.extend
  classNames: 'menuLink'
  tagName: 'button'
  templateName: 'button'

  click: (e) ->
    alert 'button clicked' 
```

单击按钮时，我从未看到预期的警报。为什么点击事件不会触发？

按钮的 html 如下所示：

```
<button id="ember420" class="ember-view menuLink">TEST</button> 
```

那里没有数据余烬动作。

我应该使用这种方法还是使用模板中的动作助手？

谢谢，

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T13:14:44.667

`Ember.View`事件处理程序（在您的情况下是`click`函数）由 Ember 调用，`EventDispatcher`它侦听应用程序根元素并委托事件。事件分派器仅由`Ember.Application`. 你在创建一个`Application`? 如果没有，则永远不会分派事件。

# wpf - 绑定到列表中的当前项目

> ID：15628139
> 
> 赞同：1
> 
> 时间：2013-03-26T02:11:15.277
> 
> 标签：wpf, data-binding

所以我在这里有这个 xaml

```
<ListBox Grid.Column="1" Grid.Row="1" Background="Transparent" ItemsSource="{Binding Packages}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <gameManagement:FeedGame DataContext="{Binding}" Package="{Binding Path=/}"></gameManagement:FeedGame>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

和一个`DependencyProperty`名为的 UserControl`Package`

我要做的就是将该属性设置为列表中的当前项目。我已经在这里待了大约一个小时，不知道我做错了什么。

我上面的当前代码抛出了`FirstChanceException`一个

```
BindingExpression path error: '' property not found on 'current item of collection' ''FeedGame' (Name='Me')'. BindingExpression:Path=/; DataItem='FeedGame' (Name='Me'); target element is 'FeedGame' (Name='Me'); target property is 'Package' (type 'IPackage') 
```

如果您好奇是什么`Me`，这是在 UserControl 的 xaml 中，上面的列表框包含在

```
x:Name="Me"
DataContext="{Binding ElementName=Me}" 
```

这是在`FeedGame`

```
public static readonly DependencyProperty PackageProperty = DependencyProperty.Register(
        "Package", typeof(IPackage), typeof(FeedGame));

public IPackage Package {
    get
    {
        return (IPackage)this.GetValue(PackageProperty);
        //return this.package;
    }
    set
    {
        // Setter here never gets called.
        if (Equals(value, (IPackage)this.GetValue(PackageProperty)))
        {
            return;
        }
        SetValue(PackageProperty,value);
        this.OnPropertyChanged("Package");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:55:55.133

当您填充 Package 时，不会调用 setter，因为绑定引擎会直接调用（绕过属性 Set 和 Get）`GetValue`。`SetValue`

如果您需要在 setter 中执行一些逻辑操作并且您正在使用绑定，则可以使用`PropertyChangedCallback`

例子：

```
 public static readonly DependencyProperty PackageProperty = DependencyProperty.Register(
     "Package", typeof(IPackage), typeof(FeedGame), new UIPropertyMetadata(null, new PropertyChangedCallback(OnPackageChanged)));

     // callback when value changed
     private static void OnPackageChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
     {
         if (Equals(e.OldValue, e.NewValue))
         {
             return;
         }
     }

     public IPackage Package
     {
         get { return (IPackage)this.GetValue(PackageProperty); }
         set { SetValue(PackageProperty, value); }
     } 
```

# 编辑：

## 我的测试

xml:

```
<Window x:Class="WpfApplication10.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:local="clr-namespace:WpfApplication10"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="199" Width="191" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}"> 
        <ListBox ItemsSource="{Binding Packages}" >
            <ListBox.ItemTemplate>
                <DataTemplate>
                     <local:FeedGame Package="{Binding}" />
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Window> 
```

代码：

```
namespace WpfApplication10
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            Packages.Add(new Package());
            Packages.Add(new Package());
            Packages.Add(new Package());
        }

        private ObservableCollection<IPackage> _packages = new ObservableCollection<IPackage>();
        public ObservableCollection<IPackage> Packages
        {
            get { return _packages; }
            set { _packages = value; }
        }
    }

    public class FeedGame : FrameworkElement
    {
        public static readonly DependencyProperty PackageProperty = 
            DependencyProperty.Register( "Package", typeof(IPackage), typeof(FeedGame)
            , new UIPropertyMetadata(null, new PropertyChangedCallback(OnPackageChanged)));

         private static void OnPackageChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
         {
             if (Equals(e.OldValue, e.NewValue))
             {
                 return;
             }
         }

         public IPackage Package
         {
             get { return (IPackage)this.GetValue(PackageProperty); }
             set { SetValue(PackageProperty, value); }
         }
    }

    public interface IPackage { }

    public class Package : IPackage { }
} 
```

# c# - c# 消除开关要求

> ID：15628140
> 
> 赞同：0
> 
> 时间：2013-03-26T02:11:18.153
> 
> 标签：c#, object, switch-statement

我的案例值文本始终等于代码中的相关 OSResultStruct，用于“我现在实现它并且正在工作的方式”。因此，例如，如果案例是 osedition，那么属性就是 OSResultStruct.OSEdition。

是否可以执行以下代码行之类的操作？如果是这样，那么我可以用一行代码替换我的 switch 语句。

```
lstNewItems[i].sItemValue = OSresult.OSResultStruct."lstNewItems[i].sItemName.ToString().ToUpper()"; 
```

**我现在使用它的方式并且正在工作**

```
 switch (lstNewItems[i].sItemName)
        {
          case "osedition":
          lstNewItems[i].sItemValue = OSresult.OSResultStruct.OSEdition;
          break;
          case "osbuild":
          lstNewItems[i].sItemValue = OSresult.OSResultStruct.OSBuild;
          break;
          case "osmajor":    
          //..... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T02:17:01.277

不会更短，但是...您可以编写和扩展方法和属性。然后将该属性添加到每个枚举成员，并通过属性中的字符串解析它。这将使它成为一条线并且可重复使用。

一些用于澄清的代码——正如我所说的，它不会很短:)

```
private static readonly Dictionary<DriveTrain, DriveTrainKind> DriveTrainKindMap = 
    Enums.GetValues<DriveTrain>().ToDictionary(d => d, d => d.GetDriveTrainKind());

[AttributeUsage(AttributeTargets.Field, AllowMultiple = false)]
public sealed class DriveTrainKindAttribute : Attribute
{
    public DriveTrainKindAttribute(DriveTrainKind kind)
    {
        Kind = kind;
    }

    public DriveTrainKind Kind { get; private set; }
}

public static class ExtensionMethods
{
    public static DriveTrainKind GetDriveTrainKind(this DriveTrain value)
    {
        var fieldInfo = typeof(DriveTrain).GetField(value.ToString());
        var attributes = fieldInfo.GetCustomAttributes(typeof(DriveTrainKindAttribute), false)
                                  .Cast<DriveTrainKindAttribute>();
        return attributes.Select(a => a.Kind).SingleOrDefault();
    }
}

public enum DriveTrainKind : byte
{
    ConventionalOrHybrid = 0,
    PluginHybrid = 1,
    BatteryElectric = 2,
}

public enum DriveTrain : short 
{
    [Description("konv_otto"), DriveTrainKind(DriveTrainKind.ConventionalOrHybrid)]
    ConventionalGasoline = 0,

    [Description("konv_diesel"), DriveTrainKind(DriveTrainKind.ConventionalOrHybrid)]
    ConventionalDiesel = 1,
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T02:14:39.120

尝试反射：-

```
OSresult.OSResultStruct.GetType().GetProperty(lstNewItems[i].sItemName,BindingFlags.IgnoreCase | BindingFlags.Public | BindingFlags.Instance).GetValue(OSresult.OSResultStruct, null) 
```

对于更通用的方法：-

定义一个扩展类：-

```
public static class ClassExtensions
    {
        public static TRes GetPublicPropertyValue<T,TRes>(this T queryObject, string propertyMatch) 
            where T : class,new()
            where TRes : new()

        {
            return (TRes)typeof(T).GetProperty(propertyMatch, BindingFlags.IgnoreCase | BindingFlags.Public | BindingFlags.Instance).GetValue(queryObject, null);
        }
    } 
```

将其用于任何可实例化类型，如下所示：-

```
OSresult.OSResultStruct.GetPublicPropertyValue<yourtype,yourreturntype>(attribName); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T02:16:05.657

您可以使用反射 - 按名称获取属性访问器（[Type.GetProperty](http://msdn.microsoft.com/en-us/library/ek55ae84.aspx)）（获取时需要指定[IgnoreCase](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx)，因为您的名称似乎都是小写），而不是使用访问器获取属性的[GetValue](http://msdn.microsoft.com/en-us/library/hh194385.aspx)。

# r - ggplot2 geom_density 的奇怪结果

> ID：15628143
> 
> 赞同：1
> 
> 时间：2013-03-26T02:11:52.370
> 
> 标签：r, ggplot2

[我正在尝试复制stat_density](http://docs.ggplot2.org/0.9.2.1/stat_density.html)文档中所示的条件密度图，但我需要使用 ggplot 而不是 qplot 来完成，因为我需要对图进行刻面。但是，我的数据在每个方面都有不相等的行数，当我绘制它时，我得到了奇怪的结果。这是一个 MRE：

```
test.df = data.frame(model=c(rep("A",100),rep("B",50),rep("C",20)),
as.factor(cnt=c(rbinom(100,1,0.5),rbinom(50,1,0.5),rbinom(20,1,0.5))),
xvar=c(seq(1,100),seq(1,50),seq(1,20)))

# This works fine, ignoring the model facets.
ggplot(test.df,aes(x=xvar,y=..count..,fill=cnt)) + geom_density(position="fill")

# Something's wrong with this one.
ggplot(test.df,aes(x=xvar,y=..count..,fill=cnt)) + geom_density(position="fill") + 
facet_wrap(~model) 
```

这是一个忽略模型的示例（如果您对每个组进行子集化和单独绘制，它看起来是一样的）：

![在此处输入图像描述](../Images/f70d36e31e1c220a1a3e78a0766ac4af.png)

与刻面相比：

![在此处输入图像描述](../Images/966bcbd59fdc5257338f87866afabd12.png)

关于我在这里可能做错的任何想法？

编辑：这是在 OSX 10.8.2、ggplot2 0.9.3.1 下使用 R 2.15.1 / Rstudio 0.97.314

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T02:20:08.567

`x`之所以出现问题，是因为在外推变量时估计密度并没有真正意义。（模型 = B 的限制为 [0,50]，模型 = C 的限制为 [0,20]

如果你设置`scales='free_x'`那么你就不会强迫`ggplot`做一些愚蠢的事情。

```
ggplot(test.df,aes(x=xvar,y=..count..,fill=cnt)) + 
 geom_density(position = "fill") + 
 facet_wrap(~model,scales = 'free_x') 
```

![在此处输入图像描述](../Images/c334c6ce445d079481c7d8e72c8abb64.png)

您也可以传递`trim = TRUE`给`geom_density`（因此`stat_density`），这将在计算（和绘制）密度时修剪到观察数据的范围

```
ggplot(test.df,aes(x=xvar,y=..count..,fill=cnt)) + 
 geom_density(position="fill",trim = TRUE) + 
 facet_wrap(~model) 
```

![在此处输入图像描述](../Images/68a55b3db1237ada22416a6c84913414.png)

也许应该对原始尝试中的废话结果提出某种警告，但我认为这可能会被覆盖`fortune(15)`

```
library(fortunes)
fortune(15)
## It really is hard to anticipate just how silly users can be.
##   -- Brian D. Ripley
##   R-devel (October 2003) 
```

# ruby-on-rails - 如何在 Ruby 中解析没有年份的日期

> ID：15628148
> 
> 赞同：1
> 
> 时间：2013-03-26T02:12:25.950
> 
> 标签：ruby-on-rails, ruby, datetime

我正在尝试用 ruby​​ on rails 解析日期，以便从中获取月份和日期。

```
 DateTime.parse("07/09") // Works
 DateTime.parse("02/07/1975") // Works
 DateTime.parse("08/26/1983") // Fails 
 DateTime.parse("04/28/1982") // Fails
 DateTime.parse("10/17/1961") // Fails 
```

那为什么会失败？还有其他几个也失败了，我看不到共同的线索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:40:20.083

因为`DateTime.parse("xx/xx/xxxx")`假设你给它格式`DateTime("dd/mm/yyyy")`，即对美国以外的世界大部分地区有意义的方式。最后三个示例不起作用，因为没有第 26 个月、第 28 个月或第 17 个月。请注意，您的第二个示例有效，但它可能不会给您您的想法：

```
 DateTime.parse("02/07/1975").month # => 7 
```

而不是`parse`, 使用`strptime`这样您就可以明确解析日期的格式：

```
DateTime.strptime("02/07/1975", "%m/%d/%Y")
DateTime.strptime("02/07/1975", "%m/%d/%Y").month # => 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T02:16:43.500

试试`strptime`日期时间。它接收格式字符串。

[ruby-doc.org 上的文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-c-strptime)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:45:48.557

关于解析日期的重要事情之一是控制。Ruby 的设计师做出了一个很好的决定，假设`12/1/2000`是`"DD/MM/YYYY"`格式，因为它是为了公共利益，它只是让我们“美国人错了”，但是，再说一次，我们有奇怪的统治者，拼写“颜色”很有趣，并且在错误的一边开车路也。

因为我们知道我们的日期是一种奇怪的格式，所以我们可以使用[`Date.strptime`](http://www.ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html#method-c-strptime)or[`DateTime.strptime`](http://www.ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/DateTime.html#method-c-strptime)或`Time.strptime`来指定日期的实际格式。`'%m/%d/%Y'`用于前几个月，或`'%d/%m/%Y'`用于我们其他人......他们......无论哪个。

Date、DateTime 和 Time 也有`parse`方法，它能够处理许多不同的格式，但会在一个月与一天的问题上窒息。如果我确信我不会与“美国与其他所有人约会”发生冲突，我会将它们用作代码中的起点。

如果您不知道日期数据的来源，一种策略是使用`'%m/%d'`格式和`rescue`解析错误开始解析文件。如果您遇到一个，这很可能[`rewind`](http://www.ruby-doc.org/core-2.0/IO.html#method-i-rewind)是文件和`retry`使用`'%d/%m'`格式的负载。

或者......为了真正的灵活性，看看几乎疯狂的[慢性](https://github.com/mojombo/chronic)宝石。`%m/%d`它仍然会在vs.问题上绊倒`%d/%m`，但这无济于事。

即使通过查看 LOCALE 设置或知道传入数据的经度/纬度坐标，软件也无法对日期格式做出正确的决定，因为数据可以来自任何地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:19:11.663

## 问题

您的问题源于 Ruby 有几个与日期和时间相关的类。这些包括：

*   [日期](http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html)
*   [时间](http://www.ruby-doc.org/core-2.0/Time.html)
*   [约会时间](http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/DateTime.html)

每个类的功能和实现细节各不相同，但只有 Time 甚至会解析您的特定字符串。例如：

```
Date.new "08/26/1983"
# => ArgumentError: comparison of String with 0 failed

DateTime.new "08/26/1983"
# => ArgumentError: comparison of String with 0 failed

Time.new "08/26/1983"
# => 0008-01-01 00:00:00 -0500 
```

显然，它不是公元 0008 年，因此您需要传递您选择的日期类可以理解的结构化日期。

## 解决方案

您需要使用[#strptime](http://www.ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/DateTime.html#method-i-strftime)指定日期字符串的格式。例如：

```
Date.strptime('08/26/1983', '%m/%d/%Y').to_s
# => "1983-08-26"

DateTime.strptime('08/26/1983', '%m/%d/%Y').to_s
# => "1983-08-26T00:00:00+00:00" 
```

然后，您可以使用所选类提供的格式化方法，例如[DateTime#strftime](http://www.ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/DateTime.html#method-i-strftime)或[DateTime#rfc2822](http://www.ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/DateTime.html#method-c-rfc2822)，以应用程序需要的任何方式格式化输出。

## 改用 GNU 日期

如果您可以访问 GNU 日期，则可以利用其更自由的解析。您可能仍然会遇到语言环境问题，但总的来说 GNU 日期非常强大。例如：

```
%x(date -d 1983/08/26).chomp
# => "Fri Aug 26 00:00:00 EDT 1983"

%x(date -d 08/26/1983).chomp
=> "Fri Aug 26 00:00:00 EDT 1983" 
```

我不认为 GNU date 接受欧洲顺序的输入日期（例如`dd/mm/yyyy`），但肯定会在输出中尊重语言环境。这对您的用例来说并不重要，但对于未来的访问者来说似乎值得一提。

# performance - AS3 位图宽度与绘制形状（性能）

> ID：15628152
> 
> 赞同：0
> 
> 时间：2013-03-26T02:12:50.987
> 
> 标签：performance, actionscript-3

只是一个快速的问题，哪种方式渲染更快：

我想设置一个背景（一个精灵）；

方法一

```
sprite.graphic.draw()
sprite.graphic.drawRect(0,0,100, 1024) 
```

方法2：一个png（原始高度10px）并将高度设置为1024

```
sprite.addChild(Bitmap);
Bitmap.height = 1024; 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:19:59.853

与之前的“性能”问题一样，始终最好进行测试。我的背景知识（完全是双关语）告诉我第一种方法更好，在第二种方法中你必须加载 PNG 解码它，缩放它，在第一种方法中你只需修改你需要的内存中的像素（可以使用 cacheAsBitmap 缓存 Sprite）。

更多关于 cacheAsBitmap 的信息：[http ://www.andymoore.ca/2010/09/cacheasbitmap-performance-testing/](http://www.andymoore.ca/2010/09/cacheasbitmap-performance-testing/)

**根据评论编辑** ，更好的解决方案

```
var bd:BitmapData = new BitmapData(100, 1024, false, 0xff00ff00);
var bmp:Bitmap = new Bitmap(bd);
addChild(bmp); 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#BitmapData()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#BitmapData())

# android - Android In App Billing：无法启动launchPurchaseFlow，因为launchPurchaseFlow 正在进行中

> ID：15628155
> 
> 赞同：36
> 
> 时间：2013-03-26T02:12:54.847
> 
> 标签：android, in-app-billing, android-billing

我是第一次实施 In App Billing，我正在使用静态 SKU id 测试我的第一次购买。

第一次效果很好。我打电话`mHelper.launchPurchaseFlow(...)`并完成了测试购买。我的活动收到了`onActivityResult`回调，我确保使用`mHelper.handleActivityResult(...)`. 一切都很棒。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // Pass on the activity result to the helper for handling
    log("onActivityResult");
    if (!this.mHelper.handleActivityResult(requestCode, resultCode, data)) {
        log("cleared the launch flow");
        // not handled, so handle it ourselves (here's where you'd
        // perform any handling of activity results not related to in-app
        // billing...
        super.onActivityResult(requestCode, resultCode, data);
    }
} 
```

但是，我想测试下一部分，所以我重新启动了应用程序并尝试购买相同的 SKU（静态`purchased`SKU）。

```
mHelper.launchPurchaseFlow(rootActivity, "android.test.purchased", 10002,   
       new IabHelper.OnIabPurchaseFinishedListener() {

        @Override
        public void onIabPurchaseFinished(IabResult result, Purchase purchaseInfo) {
            if (result.isFailure()) {
                log("purchased failed");
            } else {
                log("purchase succeeded");
            }
        }
    }, "bGoa+V7g/yqDXvKRqq+JTFn4uQZbPiQJo4pf9RzJ"); 
```

我第二次尝试购买该项目时，我`OnIabPurchaseFinishedListener`被调用，我`purchase failed`在我的日志中看到：“应用内计费错误：无法购买项目，错误响应：7：项目已拥有”

这是有道理的，但如果我尝试购买另一件商品，我的应用程序会因以下错误而崩溃：

> java.lang.IllegalStateException：无法启动异步操作 (launchPurchaseFlow)，因为另一个异步操作 (launchPurchaseFlow) 正在进行中。

当`onActivityResult`我尝试进行失败的购买时，不会发生回调，因此失败的启动流程不会得到处理和清理。所以，当我尝试另一次购买时，这就是它崩溃的原因，因为它仍然应该在最后一次失败的交易中间。

我究竟做错了什么？如何确保在失败后清理 launchPurchaseFlow()？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-02T06:20:15.990

我相信您只需要获取应用内计费类的更新代码，您就不应该再次遇到同样的问题。

据我所知，谷歌尚未推出对 SDK 管理器的更改。只需将新课程复制/粘贴到您的课程中，您就不会再遇到问题了。

在此处查看新的代码更改： [https ://code.google.com/p/marketbilling/source/detail?r=7ec85a9b619fc5f85023bc8125e7e6b1ab4dd69f&path=/v3/src/com/example/android/trivialdrivesample/MainActivity.java](https://code.google.com/p/marketbilling/source/detail?r=7ec85a9b619fc5f85023bc8125e7e6b1ab4dd69f&path=/v3/src/com/example/android/trivialdrivesample/MainActivity.java)

截至 3 月 15 日更改的类是：IABHelper.java、Inventory.java、SkuDetails.java 和一些 MainActivity.java 文件

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-10-08T02:12:22.830

我知道这是对这个问题的迟到贡献，但我今天遇到了同样的问题，我在一个片段中调用了应用程序计费，所以我查看了“labHelper.java”，我看到了一个我相信的直接解决方案问题是......我将labHelper.java中的方法“void flagStartAsync（String operation）”修改为如下

```
void flagStartAsync(String operation) {
    if (mAsyncInProgress) {
        flagEndAsync();
    }
    if (mAsyncInProgress) throw new IllegalStateException("Can't start async operation (" +
            operation + ") because another async operation(" + mAsyncOperation + ") is in progress.");
    mAsyncOperation = operation;
    mAsyncInProgress = true;
    logDebug("Starting async operation: " + operation);
} 
```

我希望这会帮助那里的人......

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-30T12:34:00.163

对我来说，最好的解决方法是将代码更新到最近的代码（[**这里**](https://code.google.com/p/marketbilling/source/browse/)），并按照[**这篇文章的**](https://stackoverflow.com/a/15582919/878126)建议进行操作：

> 1）`flagEndAsync`公开方法。它在那里，只是不可见。
> 
> 2) 让每个侦听器调用`iabHelper.flagEndAsync`以确保程序被正确标记为完成；似乎所有听众都需要它。
> 
> 3) 用 a 包围调用`try/catch`以捕获`IllegalStateException`可能发生的情况，并以这种方式处理。

更新代码还不够的原因是我发现了这个错误仍然存​​在（或至少一个）的特殊情况：

*   断开互联网连接；
*   输入您的应用程序；
*   让它初始化`IabHelper`；
*   连接到互联网;
*   连接设备后，尝试购买。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-10-09T09:51:30.607

我也有同样的问题。

# 第一次尝试：解决方法

根据 [jmrmb80 的解决方案](https://stackoverflow.com/a/16359080/3664487)，我下载了当前的[IabHelper.java](https://code.google.com/p/marketbilling/source/browse/v3/src/com/example/android/trivialdrivesample/util/IabHelper.java) ，但这不起作用。（现在似乎[不推荐使用](https://code.google.com/p/marketbilling/)repo ，我们应该依赖 Android SDK 管理器提供的版本。）所以我听从了[Khan 的建议](https://stackoverflow.com/a/16359080/3664487)：

*   将 IabHelper.flagEndAsync() 定义为公共的，并且
*   `iabHelper.flagEndAsync()`之前添加`iabHelper.launchPurchaseFlow(...)`

这似乎是一个公然的黑客攻击！它可能会产生不良副作用。但是，它确实“工作”......

这似乎是一个已知的错误：[#134](https://code.google.com/p/marketbilling/issues/detail?id=134)和[#189](https://code.google.com/p/marketbilling/issues/detail?id=189)。

# 第二次尝试：修复

经过进一步调查，我认为上述解决方法没有解决我的问题。我认为[真正的解决方案](https://stackoverflow.com/a/14968203/3664487)`onActivityResult`是在 UI 线程中覆盖。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-10T17:30:47.970

无需骇人听闻的解决方案。请求购买流程的 Activity 或 Fragment 应该具有：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.d(TAG, "onActivityResult(" + requestCode + "," + resultCode + "," + data);
    if (billingHelper == null) return;

    // Pass on the activity result to the helper for handling
    if (!billingHelper.handleActivityResult(requestCode, resultCode, data)) {
        // not handled, so handle it ourselves (here's where you'd
        // perform any handling of activity results not related to in-app
        // billing...
        super.onActivityResult(requestCode, resultCode, data);
    }
    else {
        Log.d(TAG, "onActivityResult handled by IABUtil.");
    }
} 
```

那来自谷歌的示例项目，在我的项目上尝试过，它可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-08T10:58:01.803

`Error response: 7:Item Already Owned`表示您购买了商品，但尚未消费，您尝试再次购买。

当我在应用内活动中将 AndroidManifest launchMode 设置为`singleInstance`. 应用程序总是以您描述的错误结束。

为避免这种行为，请将您的 launchMode 更改为适合您需要的任何其他值 `android:launchMode="singleInstance"`->`android:launchMode="singleTask"`

我没有试图深入理解为什么 singleInstance 不起作用。如果有人知道，请提供更多信息。

所以我的解决方案是更改启动模式并使用已经拥有的项目。从那时起，IAP 对我来说效果很好。

# java - 创建一个从数组计算平均值的方法（java）

> ID：15628156
> 
> 赞同：2
> 
> 时间：2013-03-26T02:12:59.473
> 
> 标签：java, arrays

编写一个名为 calculateAverageWeight 的静态方法，将其添加到 Bowl 类中，该方法传递一个 Bowl 对象数组，并返回该数组中 Bowls 的平均重量。

这是碗类：

```
public class Bowl {
private double weight;
private boolean empty;
private String origin; // country of manufacture

public Bowl(double w, boolean e, String origin) {
    weight = w;
    empty = e;
    this.origin = origin;
}

public double getWeight() {
    return weight;
}

public boolean getEmpty() {
    return empty;
}

public String getOrigin() {
    return origin;
}

public void setEmpty(boolean emptyStatus) {
    empty = emptyStatus;
}

public String toString() {
    return ("from " + origin + " weight: " + weight);
} 
```

以下代码有效：

```
public static double calculateAverageWeight(Bowl[] bowls)
{
double sum=0;
double average=0;
for(int j=0; j<bowls.length; j++)
{
sum+=bowls[j].getWeight();
average=sum/bowls.length;
}
return average;
} 
```

但我不明白为什么我最近的代码没有，因为它们似乎与我运行几乎相同？：

```
public static double calculateAverageWeight(Bowl[] bowls){
double sum=0;
double k=bowls.length;
for(int j=0; j<bowls.length; j++){
sum=sum+bowls[j].getWeight();}
double average=sum/k;
return average;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:28:44.917

```
public static double calculateAverageWeight(Bowl[] bowls)
{
    double sum=0;
    double average=0;
    for(int j=0; j<bowls.length; j++)
    {
        sum+=bowls[j].getWeight();
        average=sum/bowls.length;
    }
    return average;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:30:35.433

**calculateAverageWeight**的代码没有问题，但是您在 Bowl 类的末尾缺少一个“}”。

此外，您的 **calculateAverageWeight**方法必须在另一个类中，因此您也可能在那里遗漏了一些东西。你可以发布你的代码吗？

# iphone - 移动批处理节点导致撕裂

> ID：15628160
> 
> 赞同：0
> 
> 时间：2013-03-26T02:14:05.653
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

```
manageTiles:(ccTime)dt
{
tiles.position = ccp(tiles.position.x-speed*dt,tiles.position.y);
} 
```

我正在移动我的批处理节点，但它会引起眼泪，我认为这是因为 dt 是 0.3，但是我如何根据时间移动它而不引起眼泪。眼泪是非常非常小的大麦明显，但仍然困扰着我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:35:17.103

你的意思是批处理精灵之间的黑线（间隙）？撕裂是在屏幕更新时绘制到帧缓冲区。

两种解决方案：移动批处理节点而不是单个瓦片。如果瓷砖总是相对于彼此保持固定，这是最快的解决方案。否则将切片位置转换为 int 以确保它们始终位于像素位置，否则子像素渲染将导致这些间隙。如果您使用第一个解决方案，您可能还必须将批处理节点的位置转换为 int。

# c - 无法理解 sizeof() 的返回值

> ID：15628163
> 
> 赞同：3
> 
> 时间：2013-03-26T02:14:24.707
> 
> 标签：c, malloc

我的代码中有这个：

```
int x = 4;
char* array = malloc(x*sizeof(char));
size_t arraysize = sizeof (array);
printf("arraysize: %zu\n", arraysize); 
```

这段代码打印出来，

> 数组大小：8

为什么是8而不是4？（因为 4*sizeof(char) = 4 * 1）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T02:32:56.457

`array`是代码中的指针。`sizeof(array)`因此以 C 字节返回该指针的大小（提醒：C 的字节中可以有超过 8 位）。

所以，8 是你的指针大小。

`size_t`此外， printf() 格式字符串中的正确类型说明符是`%zu`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T04:41:03.473

`sizeof`没有返回值，因为它不是一个函数，它是一个 C 语言结构——考虑一下你可以`sizeof array`不用括号编写的事实。作为 C 语言结构，它的价值完全基于编译时信息。它不知道你的数组有多大，只知道`array`指针变量有多大。有关该主题的完整报道，请参阅[http://en.wikipedia.org/wiki/Sizeof](http://en.wikipedia.org/wiki/Sizeof)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T02:15:40.717

`array`是一个指针，因此它将是指针（`sizeof(void *)`或`sizeof(char *)`）的大小，而不是`sizeof(char)`您所期望的。看来您使用的是 64 位计算机。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T02:15:50.350

`sizeof(array)`返回指针的大小。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-26T02:35:28.913

您正在计算整个数组的大小 (4*sizeof(char)) 但您希望知道数组 (4) 上的项目数。

你可以做

> size_t 数组大小 = sizeof (array)/sizeof(char);

它将返回 8/2 = 4

# events - 事件：修改表格 1 上的值 -> 设置全局变量并引发事件 -> 更新表格 2 上的值

> ID：15628167
> 
> 赞同：0
> 
> 时间：2013-03-26T02:14:40.863
> 
> 标签：events, view, model, controller

我正在用我认为的基本概念旋转我的轮子：从 GlobalData 类接收“数据更改”通知。

我有一个带有单个控件的 Form1 (textBox1)，当数字更改时，我在“全局变量”类上设置了相应的属性。

现在，当设置属性时，我想引发一个 Form2 可以订阅的事件并相应地更新其指示器。

基本结构是：Form1有textBox1和button1，Form2有textBox2，GlobalClass有testValue。

Form1 的东西....

```
 public partial class Form1 : Form {
        public GlobalClass myGlobals= new GlobalClass();
        private void button1_Click(object sender, EventArgs e) {
            myGlobals.testValue= Convert.ToInt32(textBox1.Text);
        }
   } 
```

全球类的东西...

```
public class GlobalClass{
    private int mynum;       
    public int testValue{
        get{
            return mynum;}
        set{
            mynum = value;
          // NEED TO RAISE MY 'HEY YOUR testVALUE HAS CHANGED!!' EVENT HERE?
        }
   }
} 
```

Form2 的东西

```
 public partial class Form2 : Form {
       public GlobalClass myGlobals2;

//NEED TO RECEIVE NOTIFICATION THAT myGlobals2.testValue HAS BEEN UPDATED? 
//THEN I CAN DO textBox2.Text = myGlobals2.testValue.ToString();

    } 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:22:12.423

1.  您需要阅读 .NET 事件和委托。

2.  您必须使`GlobalClass`实例成为真正的全局变量：

`public class GlobalClass`

```
{
  public static GlobalClass Instance = new GlobalClass();

  public event EventHandler ValueChanged;

  private int mynum;       
  public int testValue{
    get{
      return mynum;}
    set{
      if (mynum != value)
      {
        mynum = value;
        // NEED TO RAISE MY 'HEY YOUR testVALUE HAS CHANGED!!' EVENT HERE?
        if (ValueChanged != null)
        {
          EventArgs e = new EventArgs();
          ValueChanged(this, e);
        }
      }
    }

  }
} 
```

并像这样解决它：

```
GlobalClass.Instance.testValue = 3; 
```

在`Form2`：

```
protected void OnValueChanged(Object sender, EventArgs e) 
{
   <your code>
} 
```

在`Form2`构造函数中：

```
GlobalClass.Instance.ValueChanged += new System.EventHandler(this.OnValueChanged); 
```

# java - 从图像标签链接到 servlet 时出错

> ID：15628169
> 
> 赞同：0
> 
> 时间：2013-03-26T02:15:13.453
> 
> 标签：java, html, servlets

我正在使用 eclipse 和 java ee，一个 tomcat 服务器，我似乎无法从图像标签内运行 servlet。一切都在我的笔记本电脑上运行。我所有的其他 servlet 都可以工作。

在我的 html 中，我有这一行

```
<img src="images/test.jpg"> 
```

在我的 web.xml 中，我有这个映射。

```
<servlet>
    <servlet-name>imageServlet</servlet-name>
    <servlet-class>servlets.myImageServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>imageServlet</servlet-name>
    <url-pattern>/images/*</url-pattern>
</servlet-mapping> 
```

在 myImageServlet doGet() 我有这个。

```
System.out.println("WORK!"); 
```

工作！永远不会被打印出来。有任何想法吗？感谢您的帮助。

编辑：如果我进入开发人员工具并检查网络，发出的请求就是这个。

```
Request URL:http://localhost:8080/RotoMonkey/images/test.jpg 
```

返回的是 404，请求的资源不可用。

我尝试将 web.xml 的编码更改为 UTF-8 没有任何改变。

# css - 使样式表覆盖 Ruby on Rails 应用程序中的所有其他样式表

> ID：15628172
> 
> 赞同：0
> 
> 时间：2013-03-26T02:15:37.327
> 
> 标签：css, ruby-on-rails, ruby, twitter-bootstrap, overriding

我试图弄清楚如何正确定义样式表（比如...bootstrap_and_overrides.css.scss）以覆盖我的 Ruby on Rails 应用程序中的所有其他样式表。问题是我想保留我正在使用的所有 {wrap}bootstrap 主题文件，以便在更新出现时进行升级。所以我可能需要做的所有改变都应该在这个“覆盖”的 css 文件上完成。

也许在 application.css.scss 中有一些东西？

```
 *= require_self
 *= require_tree .
*/ 
```

我试过在 require_tree 之后声明这个特定的样式表，但没有。我确信有些概念我没有完全掌握。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:27:00.667

我不确定是否专门使用 Rails，但最后一个样式表（最后添加到页面）中的定义将胜过之前的样式。

您需要确保覆盖样式表包含等效的 css 选择器，以确保样式将被覆盖。

# r - 根据布尔值标记数据帧的部分，包括前几行？

> ID：15628174
> 
> 赞同：3
> 
> 时间：2013-03-26T02:15:40.497
> 
> 标签：r

对于给定的数据框，我想根据一些布尔值对其进行拆分，然后将标签应用于该行**和之前的行，直到该点**。

假设以下数据框：

```
test <- data.frame(x = 1:10, y = c(F, F, F, T, F, F, T, F, F, F)) 
```

我最终想创建一个新列，其中包含数据框特定部分的标签。理想情况下，如下所示：

```
x   y   z
1   F   1
2   F   1
3   F   1
4   T   1
5   F   2
6   F   2
7   T   2
8   F   3
9   F   3
10  F   3 
```

我目前的想法是，我需要使用类似于以下（但不完全是）的函数遍历数据帧：

```
label.portion <- function(test) {
  for (i in 1:nrow(test)) {
    z <- 1
    if(test$y[i]) { z <- z + 1 }
    return(z)
  }
} 
```

最好/最简单的方法是什么？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T02:27:14.980

您的`z`列可以构建为

```
z <- with(test, sum(y)-rev(cumsum(rev(y)))+1) 
```

根据您的示例，为了使每个新`z`值都从 a`FALSE` `y`之后的 a开始。`TRUE` `y`

然后你可以做得到`cbind(test, z)`你想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T02:41:35.733

一种衬垫解决方案使用`transform`

```
transform(test,z= cumsum(c(0,diff(y)) == -1)+1)

    x     y z
1   1 FALSE 1
2   2 FALSE 1
3   3 FALSE 1
4   4  TRUE 1
5   5 FALSE 2
6   6 FALSE 2
7   7  TRUE 2
8   8 FALSE 3
9   9 FALSE 3
10 10 FALSE 3 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T03:05:42.160

另一种衬里解决方案，将比其他解决方案稍快（除了`data.table`）

```
test <- data.frame(x = 1:10, y = c(F, F, F, T, F, F, T, F, F, F))
test$z <- c(1, head(cumsum(test$y), -1) + 1)
test
##     x     y z
## 1   1 FALSE 1
## 2   2 FALSE 1
## 3   3 FALSE 1
## 4   4  TRUE 1
## 5   5 FALSE 2
## 6   6 FALSE 2
## 7   7  TRUE 2
## 8   8 FALSE 3
## 9   9 FALSE 3
## 10 10 FALSE 3 
```

提供的其他解决方案的基准（不包括 data.table）

```
test <- data.frame(x = 1:1e+05, y = sample(c(T, F), size = 1e+05, replace = TRUE))
microbenchmark(c(1, head(cumsum(test$y), -1) + 1), cumsum(c(0, diff(test$y)) == -1) + 1, with(test, sum(y) - rev(cumsum(rev(y))) + 
    1), times = 100)
## Unit: milliseconds
##                                          expr      min       lq   median       uq       max neval
##            c(1, head(cumsum(test$y), -1) + 1) 1.685473 1.758474 1.865409 4.647218  5.091512   100
##          cumsum(c(0, diff(test$y)) == -1) + 1 4.064867 4.379714 6.936561 7.338810  7.657961   100
##  with(test, sum(y) - rev(cumsum(rev(y))) + 1) 2.568766 2.720395 5.396096 5.701176 30.642436   100 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T02:45:18.907

这是一种使用`na.locf`from`xts`和 data.table 编码优雅（和效率）的方法

```
library(data.table)
library(xts) # for na.locf
test <- data.table(test)

test[(y), grp := seq_along(y)][, grp := na.locf(grp, fromLast = TRUE)]
test[is.na(grp), grp := max(test[, grp], na.rm =TRUE) + 1L] 
```

* * *

还有一种更清晰、更快捷的方法

```
test[, grp := {xx <- diff(c(0,.I[y], length(.I))); rep.int(seq_along(xx),xx)}] 
```

请注意，`diff`使用在 中实现的 for 循环`R`，因此 Rcpp 糖实现）会更快（我确信 cpp 函数会将其中大部分从水中吹走）

# php - 如何从 php 解析的 html 中删除除允许列表之外的所有标签

> ID：15628180
> 
> 赞同：1
> 
> 时间：2013-03-26T02:16:01.857
> 
> 标签：php, dom, html-parsing, domdocument, php-parser

我在 php 中解析 html，因为我无法控制原始内容，所以我想去掉它的样式和不必要的标签，同时仍然保留内容和标签的简短列表，即：

p、img、iframe（也许还有其他几个）

我知道我可以删除给定的标签**（请参阅下面我使用的代码**），但由于我不一定知道它们可能是什么标签，而且我不想创建一个巨大的可能列表，我会喜欢能够剥离除我的允许列表之外的所有内容。

```
function DOMRemove(DOMNode $from) {
    $sibling = $from->firstChild;

    do {
        $next = $sibling->nextSibling;
        $from->parentNode->insertBefore($sibling, $from);
    } while ($sibling = $next);

    $from->parentNode->removeChild($from);
}

$dom = new DOMDocument;
$dom->loadHTML($html);

$nodes = $dom->getElementsByTagName('span'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T02:27:22.380

正如上面[cpattersonv1](https://stackoverflow.com/users/2145800/cpattersonv1)所说，您可以简单地使用[strip_tags()](http://www.php.net/manual/en/function.strip-tags.php)来完成这项工作。

```
<?php

// strip all other tags except mentioned (p, img, iframe)
$html_result = strip_tags($html, '<p><img><iframe>');

?> 
```

# ruby - 在部署期间更改 Ruby 版本

> ID：15628185
> 
> 赞同：2
> 
> 时间：2013-03-26T02:16:15.267
> 
> 标签：ruby, deployment, capistrano, bundler

我有一个盒子，上面有 3 个 Rails 应用程序。我不想升级其中一个应用程序以使其使用 Ruby 2.0.0，而让其他应用程序在 1.9.3-p394 上运行。我通过 Rvm 安装了这两个红宝石。

我试图通过它的 Gemfile 控制每个应用程序使用的 Ruby 版本。

```
# Gemfile
ruby '2.0.0' 
```

因此，我在本地更改了 Gemfile 中的版本号，确保一切正常并提交，现在我正在尝试将更改部署到服务器。

但是，此时`cap deploy`失败

```
bundle install --gemfile [path to release Gemfile] --path [path to app bundle] --deployment --quiet --without development test 
```

因为

```
Your Ruby version is 1.9.3, but your Gemfile specified 2.0.0 
```

这在技术上是正确的，我的 Gemfile 确实指定了 2.0.0，并且该应用程序当前在 1.9.3 上运行。我试图让它在捆绑之前改变版本。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:20:05.920

您的 PATH 设置不正确。您可能没有 bin: 作为路径中的第一个条目。这会导致这个错误。

即使您没有使用 Heroku，也值得阅读此页面以解决该问题：[https ://devcenter.heroku.com/articles/ruby-versions](https://devcenter.heroku.com/articles/ruby-versions)

这是一个答案的链接，它将解释如何在服务器上更改 PATH：[Capistrano：我可以为整个 cap 会话设置一个环境变量吗？](https://stackoverflow.com/questions/7602548/capistrano-can-i-set-an-environment-variable-for-the-whole-cap-session)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T16:31:22.487

如果您使用 rvm，请将服务器上的默认设置为 ruby​​ 2.0.0

```
rvm --default use 2.0.0 
```

解决了我从我的 mac 部署到 AWS 服务器的问题 - 但我想如果我需要更新我的旧站点，我必须在部署之前将默认设置回 1.9.3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T03:43:40.303

如果你有 rvm 也许你可以尝试做

```
rvm use 2.0.0 
```

在您的捆绑电话之前。

# android - 构造函数 Intent 是未定义的错误

> ID：15628193
> 
> 赞同：3
> 
> 时间：2013-03-26T02:16:49.037
> 
> 标签：android, android-intent, android-fragments, android-activity

我正在使用片段。我在片段中有一个微调器。我想在选择微调器项目时启动一个新活动。我收到此错误

错误

**构造函数 Intent(UserHomeActivity, Class) 未定义 UserHomeActivity.java /SwipeyTabs/src/com/recscores/android 第 28 行 Java 问题**

```
public class UserHomeActivity extends SherlockFragment{

Spinner spinnerTeam;
Spinner spinnerLeague;

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
    View view =inflater.inflate(R.layout.user_home, container, false);

    // Team Spinner
    spinnerTeam = (Spinner)view.findViewById(R.id.spinner_team);
    spinnerTeam.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) { 
            **Intent ii = new Intent(UserHomeActivity.this,TeamHomeActivity.class);
            startActivity(ii); **
        } 

        public void onNothingSelected(AdapterView<?> adapterView) {
            return;
        } 
    }); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T02:18:30.763

启动新活动为：

```
Intent ii = new Intent(getActivity(),TeamHomeActivity.class);
 startActivity(ii); 
```

因为 Context 不是 SherlockFragment 类的超类，您需要使用 getActivity() 将 Activity 返回到当前片段关联。

# oauth - Google BigQuery 服务器到服务器授权失败

> ID：15628194
> 
> 赞同：1
> 
> 时间：2013-03-26T02:16:52.080
> 
> 标签：oauth, google-bigquery

[尝试使用此处](https://developers.google.com/bigquery/docs/authorization)描述的“服务器到服务器授权”来授权对 Google BigQuery 的访问。我的 certificate.p12 和 ServiceAccountId 设置正确。但我经常遇到一个例外：

```
 com.google.api.client.json.JsonFactory.createJsonGenerator(Ljava/io/OutputStream;Ljava/nio/charset/Charset;)Lcom/google/api/client/json/JsonGenerator;
java.lang.AbstractMethodError: com.google.api.client.json.JsonFactory.createJsonGenerator(Ljava/io/OutputStream;Ljava/nio/charset/Charset;)Lcom/google/api/client/json/JsonGenerator;
at com.google.api.client.json.JsonFactory.toByteStream(JsonFactory.java:187)
at com.google.api.client.json.JsonFactory.toByteArray(JsonFactory.java:157)
at com.google.api.client.auth.jsontoken.RsaSHA256Signer.sign(RsaSHA256Signer.java:51)
at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:313)
at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:505)
at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:266)
at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:888)
at com.google.api.client.googleapis.json.GoogleJsonResponseException.execute(GoogleJsonResponseException.java:181)
at com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:243)
at com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:209)
at com.google.api.services.bigquery.Bigquery$Datasets$List.execute(Bigquery.java:1339)
at model.BigQuery$.addEvent(BigQuery.scala:109)

java.lang.AbstractMethodError: com.google.api.client.json.JsonFactory.createJsonGenerator(Ljava/io/OutputStream;Ljava/nio/charset/Charset;)Lcom/google/api/client/json/JsonGenerator;
at com.google.api.client.json.JsonFactory.toByteStream(JsonFactory.java:187) ~[google-http-client-1.13.1-beta.jar:1.13.1-beta]
at com.google.api.client.json.JsonFactory.toByteArray(JsonFactory.java:157) ~[google-http-client-1.13.1-beta.jar:1.13.1-beta]
at com.google.api.client.auth.jsontoken.RsaSHA256Signer.sign(RsaSHA256Signer.java:51) ~[google-oauth-client-1.13.1-beta.jar:1.13.1-beta]
at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:313) ~[google-api-client-1.13.2-beta.jar:1.13.2-beta]
at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:505) ~[google-oauth-client-1.13.1-beta.jar:1.13.1-beta]
at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:266) ~[google-oauth-client-1.13.1-beta.jar:1.13.1-beta] 
```

有什么想法为什么会发生这种情况？

谢谢。

UPD：将谷歌库更新到 1.14.1-beta 后一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:55:05.020

将谷歌库更新到 1.14.1-beta 后一切正常

# razor - 如何将程序集引用传递给 Razor.Parse()

> ID：15628203
> 
> 赞同：0
> 
> 时间：2013-03-26T02:18:25.473
> 
> 标签：razor, .net-assembly

我在[https://github.com/Antaris/RazorEngine使用 RazerEngine](https://github.com/Antaris/RazorEngine)

我想知道如何以及是否可以将程序集引用传递给引擎？

假设我在外部 DLL 中有一些逻辑 - 如何在自定义 DLL 中调用方法？

```
string template = "@using ClassLibrary1 @ClassLibrary1.Class1.SomethingFromADLL()   ";
string result = Razor.Parse(template, m); 
```

这导致异常

**无法编译模板。找不到类型或命名空间名称“ClassLibrary1”（您是否缺少 using 指令或程序集引用？）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:35:06.033

你必须找到你需要的方法，然后写下它的名字。例如：

String.Trim();

和字符串模板="String.Trim()";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:07:56.857

我发现如果我在 Razor.Parse 方法之前添加以下行，它现在可以访问 ClassLibrary1

```
Assembly a = Assembly.LoadWithPartialName("ClassLibrary1");

string template = "@using ClassLibrary1 @ClassLibrary1.Class1.SomethingFromADLL()   ";
string result = Razor.Parse(template, m); 
```

# html - 这个表单/输入叫什么？

> ID：15628207
> 
> 赞同：-5
> 
> 时间：2013-03-26T02:18:39.490
> 
> 标签：html, forms

这个表单/输入叫什么？

![在此处输入图像描述](../Images/1723dac2d7f792b8460bfb9d64495a61.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:20:11.747

1.  我见过它叫做[`list box`](http://jquerybyexample.blogspot.com/2012/05/how-to-move-items-between-listbox-using.html).

2.  微软有一个桌面版本叫做[`list builder`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511484.aspx#listBuilders)

3.  Rich-faces`listShuttle`在 3.x 中将其称为 a，现在称为 a[`pickList`](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=pickList)

所以我认为没有一个标准的“名称”。也许[`List Builder`](http://en.wikipedia.org/wiki/List_builder)是正确的，因为维基百科是一个真正的参考......

# c# - 当前上下文中不存在名称“colType”

> ID：15628210
> 
> 赞同：0
> 
> 时间：2013-03-26T02:19:26.023
> 
> 标签：c#, .net, string, datareader

我正在尝试遍历数据集的行和列，以搜索数据集的`name`列与`ColumnName`对象之间的匹配`DataReader`。

我有一个名为`RECORDS`在程序启动时为空的新表。我还有一个预先填充的表，它使用表`ColumnPositions`中的列名子集进行调用`RECORDS`。此例程旨在显示所有可用列的子集——作为默认显示样式。

我的代码有效...除了获取`dr["type"]`值的代码行。我得到错误：

> `colType`当前上下文中不存在名称“ ”。

如您所见，我的字符串变量是在 WHILE 和 FOREACH 循环之外声明的。line 语句`colName =`工作得很好。但`colType`每次都失败。如果我在 VS2010 的中间窗口中做一个语句检查，`? dr["type"]"`我会得到结果`integer`。但是当我检查时`? colType`，我收到上述错误消息。

DataRow 对象的智能感知`dr`显示了一个包含 6 个项目的数组。数组中的索引 1 映射到`name`。索引 2 映射到`type`。当我检查`? dr[2]`中间窗口中的值时，返回相同的结果`integer`。这是对的。但是每当这个值被分配给`colType`，VS2010 就会抱怨。

我不是 C# 的新手，所以在发帖之前我做了很多测试和谷歌搜索。我希望这是因为我没有透过树木看到森林。

这是我的代码：

```
// get table information for RECORDS
SQLiteCommand tableInfo = new SQLiteCommand("PRAGMA table_info(Records)", m_cnCaseFile);
SQLiteDataAdapter adapter = new SQLiteDataAdapter(tableInfo);
DataSet ds = new DataSet();
adapter.Fill(ds);
DataTable dt = ds.Tables[0];

SQLiteCommand cmd = new SQLiteCommand("SELECT * FROM ColumnPositions WHERE ColumnStyle_ID = " + styleID + " ORDER BY ColumnPosition_ID ASC", m_cnCaseFile);
SQLiteDataReader colReader = cmd.ExecuteReader();

string colName = "";
string colType = "";

if (dt != null && colReader.HasRows)
{
    while (colReader.Read())
    {
        foreach(DataRow dr in dt.Rows)
        {
            colType = Convert.ToString(dr["type"]);
            colName = dr["name"].ToString();

            if (colReader["ColumnName"].ToString() == colName)
            {                                        
                DataGridViewColumn dgvCol = new DataGridViewColumn();
            }

        }
    }
}

dt.Dispose();
colReader.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:44:00.557

与其使用 "dr["name"].ToString();"，不如使用 "Convert.ToString(dr["name"]);"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:14:31.597

尝试使用数组位置而不是列名：

`colType = Convert.ToString(dr[1]);`

和

`colName = dr[0].ToString();`

您可能不需要这个，但这里是 SQLite PRAGMA table_info() 命令返回的值的文档。[关联](http://www.sqlite.org/pragma.html#pragma_table_info)

# php - 致命错误：mysqli_connect()

> ID：15628216
> 
> 赞同：-1
> 
> 时间：2013-03-26T02:20:03.423
> 
> 标签：php, mysqli, connect

我知道有很多论坛在讨论stackoverflow中的这个问题，但似乎没有任何帮助......试图看看是否有其他人可以帮助我......

我安装了 mysql server 5.1 并且在安装过程中没有发生错误，所以我认为一切都很好，但是当我学习并尝试使用 php 并通过 mysql 连接时，出现此错误消息

```
Fatal error: Call to undefined function mysqli_connect() in C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\books.php on line 3 
```

我的代码在这里

```
<?php

$db = mysqli_connect("localhost", "root", "3308") or die(mysqli_connect_error());

mysqli_select_db($db, "booksdb") or die(mysqli_error($db));

mysqli_query($db, "CREATE TABLE books(
id INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
title VARCHAR(64) NOT NULL)") or die(mysqli_error($db));

mysqli_query($db, "INSERT INTO books(id, title) VALUES(NULL, 'the nose')") or die(mysqli_error());

mysqli_query($db, "INSERT INTO books(id, title) VALUES(NULL, 'the overcoat')") or die(mysqli_error());

mysqli_query($db, "INSERT INTO books(id, title) VALUES(NULL, 'war and peace')") or die(mysqli_error());

$result = mysqli_query($db, "SELECT id, title FROM books") or die(mysqli_error());

while($record = mysqli_fetch_assoc($result)){
    echo $record['id'];
    echo " ";
    echo $record['title'];
    echo "<hr/>";
}

?> 
```

在我的 php.ini 文件中，我都取消了注释

```
extension=php_mysql.dll
extension=php_mysqli.dll 
```

当然重新启动了apache。也重新启动了who机器，但该错误消息不断出现，我不知道如何修复它。我搜索了几个论坛，他们都要求确保扩展名没有被注释掉。还检查了几个论坛站点并尝试了一些。有些我不明白他们告诉我要尝试什么，但我尝试过的那个，没有一个奏效。这里有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:24:18.857

好的，这可能是您面临的问题的替代解决方案。不过，不完全是答案。您需要`php_mysqli.dll`在正确的位置拥有和其他扩展。您需要检查三个方面：

1.  `php_mysqli.dll`文件夹中存在的物理文件`ext`。
2.  目录是否`ext`被正确引用。
3.  检查 Apache 是否有权访问该文件夹。
4.  检查您是否编辑了正确的文件。可能有多个`php.ini`文件。

* * *

另一个简单的解决方案是安装如下软件包：

1.  [WAMP 服务器](http://www.wampserver.com/en/)（我建议将其用于小型项目，*也可能用于实时项目*）
2.  [XAMPP](http://www.apachefriends.org/en/xampp.html)
3.  [USB 网络服务器](http://www.usbwebserver.net/en/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T12:14:37.923

我猜你需要安装`php5-mysql`.

```
sudo apt-get install php5-mysql 
```

并重新启动您的 apache 服务器，它应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:26:38.363

1）确保它`php_mysqli.dll`存在于您的目录中。2）你的`id`auto_increment吗？如果是，那么您不必将其插入到您的表中。检查你的语法。尝试这个：

```
mysqli_query($db, "INSERT INTO books(title) VALUES('the nose')") or die(mysqli_error()); 
```

# php - 如何从 WordPress 类别页面的内容中去除嵌入的视频？

> ID：15628219
> 
> 赞同：1
> 
> 时间：2013-03-26T02:20:11.297
> 
> 标签：php, wordpress, video, categories

我有几个帖子中嵌入了 YouTube 视频。我只希望视频显示在帖子的完整版本中。在列出帖子的类别页面上，我不希望视频出现。

这是网站：[http ://tsa-watch.com/](http://tsa-watch.com/)

以及帖子的完整版本：

[http://tsa-watch.com/2013/03/25/tsa-makes-double-amputee-marine-remove-prosthetic-legs-during-screening/](http://tsa-watch.com/2013/03/25/tsa-makes-double-amputee-marine-remove-prosthetic-legs-during-screening/)

这是我在functions.php中使用的一些代码，仅当它在类别页面上列出时才从帖子中删除第一张图片：

```
function remove_first_image ($content) {
if (is_category()) {
$content = preg_replace("/<img[^>]+\>/i", "", $content, 1);
$content = preg_replace("/<object[^>]+>/i", "", $content, 1);
} return $content;
}
add_filter('the_content', 'remove_first_image'); 
```

此外，这是我在 index.php 和 category.php 文件上使用的循环：

```
 <?php if (have_posts()) : ?>
    <?php while (have_posts()) : the_post(); ?>
        <div class="votes" style="min-width:60px"><strong>VOTES:</strong><?php wdpv_vote(false); ?></div>
        <div class="alignleft" style="max-width:590px"> 
        <h2 id="post-<?php the_ID(); ?>">
        <a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title(); ?>">
        <?php the_title(); ?></a></h2>
        <div class="byline"><?php the_time('F jS, Y') ?> by <?php the_author() ?> in <?php the_category(', ') ?> <strong>:</strong> <?php comments_number( 'No Comments', '1 Comment', '% Comments' ); ?></div>
        <div class="excerpt">
        <?php 
        if ( has_post_thumbnail() ) { // check if the post has a Post Thumbnail assigned to it.
          the_post_thumbnail(array(115,115));
        } 
        ?>                  

        <?php the_content('Read more &raquo;'); ?>
        </div>

    <?php endwhile; ?>          

    <?php else : ?>
    <h1>Not Found</h1>
    <p><?php _e("Sorry, but you are looking for something that isn't here."); ?></p>

    <?php endif; ?> 
```

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T02:25:27.627

我相信这是一个 WordPress 网站？

如果是这样，您需要查看负责在类别页面上显示帖子预览的主题模板文件，并从帖子中删除显示图像/视频的部分。

不幸的是，不知道您正在使用什么主题或文件名是什么，这很难说，但要寻找一个页面模板，其中包含 home 或 categories 字样，或者从激活的主题文件夹中打开 category.php，如果您让他们查看是否可以找到与此相关的内容并将其注释掉以查看是否可以解决。

还可以尝试在您的自定义函数中添加以下内容：

```
$content = preg_replace("/<embed[^>]+>/i", "", $content, 1); 
```

# autocomplete - 在 code::blocks 中关闭自动括号创建

> ID：15628221
> 
> 赞同：2
> 
> 时间：2013-03-26T02:20:27.460
> 
> 标签：autocomplete, codeblocks, parentheses

如果我输入

```
UTF 
```

然后选择自动完成功能，我得到

```
UTF8Encode() 
```

我想结束的是

```
UTF8Encode 
```

所以我最终没有

```
UTF8Encode();) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T08:04:57.713

编辑器->代码完成->（主选项卡代码完成）->您需要取消选择“在函数名称自动完成后添加括号”

# c# - 使用 httpWebResponse 时我似乎无法取回任何东西

> ID：15628230
> 
> 赞同：1
> 
> 时间：2013-03-26T02:21:31.573
> 
> 标签：c#, windows-phone-7, httpwebrequest

我正在使用以下代码：

```
var request = (HttpWebRequest)WebRequest.Create(new Uri(addy));
request.UserAgent = "Mozilla/5.0 (Windows; U; MSIE 9.0; WIndows NT 9.0; en-US))";
request.BeginGetResponse(
    r =>
    {
        var httpRequest = (HttpWebRequest)r.AsyncState;
        var httpResponse = (HttpWebResponse)httpRequest.EndGetResponse(r);

        using (var reader = new StreamReader(httpResponse.GetResponseStream()))
        {
            var response = reader.ReadToEnd();
            results = (String)response;
        }
    }, request); 
```

addy 是：[http ://maps.googleapis.com/maps/api/geocode/xml?address=limavady&sensor=false](http://maps.googleapis.com/maps/api/geocode/xml?address=limavady&sensor=false)

results 只是一个全局字符串，我想将 Web 请求的结果输出到该字符串。

问题只是我不断得到一个空值输出到结果，我检查了网址，它是正确的，应该有输出。

对此有任何想法，或者如果您能指出正确的方向，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:03:35.597

感谢您的帮助，我设法使用以下方法解决了问题：

```
WebClient webClient = new WebClient();
        webClient.OpenReadAsync(new Uri(addy));
        webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);

    }

    void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        var reader = new StreamReader(e.Result);
        results = reader.ReadToEnd();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:50:21.653

1.  您请求的页面会使用 向您发送数据`Content-Encoding: gzip`。将 NuGet 包添加`SharpZipLib.WindowsPhone7`到您的项目中，并在下面查看我的示例代码。
2.  确保您已声明 ID_CAP_NETWORKING 功能。
3.  检查`HttpWebResponse.StatusCode`财产。

    ```
    static Stream responseStream( this HttpWebResponse resp )
    {
        if( null == resp ) return null;

        string enc = resp.Headers[ HttpRequestHeader.ContentEncoding ];
        if( !string.IsNullOrEmpty( enc ) )
        {
            enc = enc.ToLower();
            if( enc == "gzip" )
                return new GZipInputStream( resp.GetResponseStream() );
        }

        return resp.GetResponseStream();
    } 
    ```

# lua - 在lua中使用for循环删除数组中的项目

> ID：15628233
> 
> 赞同：1
> 
> 时间：2013-03-26T02:22:10.777
> 
> 标签：lua, coronasdk

我正在尝试使用 for 循环来破坏我的数组中的对象，如下所示：

```
for item in self.objects do
    item:removeSelf()
end 
```

self.objects 是我的数组，它包含我用于动画的图像。如果我触摸这些动画对象之一，它应该被销毁（消失）。我的问题是，我收到此错误消息：

> 尝试调用表值

我不确定为什么会收到此错误以及如何解决此错误，因此有人可以解释一下我如何在触摸事件期间从数组中删除对象以及为什么会收到此消息吗？提前致谢。:D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T02:36:15.703

形式的通用 for 循环`for x in y do...`期望`y`是一个迭代器函数。您正在向它传递一个表，因此会出现错误消息。

如果您只想遍历表中的每个条目，请使用`pairs`：

```
for key, item in pairs(self.objects) do
  item:removeSelf()
end 
```

有关泛型 for 和迭代器的更多信息，请参阅 PiL [4.3.5](http://www.lua.org/pil/4.3.5.html)和[第 7 章的全部内容。](http://www.lua.org/pil/7.html)

# java - 如何构建嵌套的 JSON 对象？

> ID：15628235
> 
> 赞同：-1
> 
> 时间：2013-03-26T02:22:14.517
> 
> 标签：java, javascript, json, web-applications, servlets

我是 JSON 新手，并且有一个 Java servlet，它提供以下 JSON 输出：

```
{
     "35808": "Huntsville, Alabama",
     "94203": "Sacramento, California",
     "33054": "Miami, Florida",
     "32801": "Orlando, Florida",
     "30301": "Atlanta, Georgia",
     "78717": "Austin, Texas"
} 
```

通过 Javascript 检索 JSON 后，我想创建一个按状态分组的嵌套 JSON，结果应该是：

```
 {
     "A": {
         "35808": "Huntsville, Alabama"
     },
     "C": {
         "94203": "Sacramento, California"
     },
     "F": {
         "33054": "Miami, Florida",
         "32801": "Orlando, Florida"
     },
     "G": {
         "30301": "Atlanta, Georgia"
     },
     "T": {
         "78717": "Austin, Texas"
     }
} 
```

最好使用 Javascript 来完成此任务的最佳方法是什么？或者如果使用 Java，最好的方法是什么？

谢谢，杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:32:34.370

这应该这样做：

```
var parsedJSON = …;
var byState = {};
for (var prop in parsedJSON) {
    var address = parsedJSON[prop];
    var state = address.split(",")[1] || "";
    var stateKey = state.charAt(0);
    if (! (stateKey in byState))
        byState[stateKey] = {};
    byState[stateKey][prop] = address;
}
console.log(JSON.stringify(byState, null, 4)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:36:35.313

这假设状态是排序的。 [http://jsfiddle.net/N23SL/](http://jsfiddle.net/N23SL/)

```
var originalJson = {
     "35808": "Huntsville, Alabama",
     "94203": "Sacramento, California",
     "33054": "Miami, Florida",
     "32801": "Orlando, Florida",
     "30301": "Atlanta, Georgia",
     "78717": "Austin, Texas"
}

var groupMe = function(originalJson)
{
    var grouped = {};
    // loop over each property
    for(var key in originalJson)
    {
        var value = originalJson[key];
        var state=value.split(", ")[1];
        var stateLetter = state[0];

        var letterGroup = grouped[stateLetter];
        if(typeof letterGroup === 'undefined')
        {
            letterGroup = {};
            grouped[stateLetter] = letterGroup;
        }

        letterGroup[key] = value;
    }

    return grouped;

};

var groupedJson = groupMe(originalJson);

console.log(groupedJson); 
```

# unit-testing - 是否可以在模拟中设置模拟？

> ID：15628238
> 
> 赞同：1
> 
> 时间：2013-03-26T02:23:02.280
> 
> 标签：unit-testing, moq

只是想知道可以在模拟中设置模拟吗？我的意思是一个模拟，而不是配置为返回另一个具有特定设置的模拟。

我正在使用起订量。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T03:20:03.430

查看起订量网站（并使用我对 RhinoMock 的了解）我怀疑您可以执行以下操作：

```
var innerMock = new Mock<IInnerClass>();
// TODO - Setup innerMock expectations
var outerMock = new Mock<IOuterClass>();
outerMock.Setup(i => i.GetInner()).Returns(innerMock.Object); 
```

# javascript - 脚本在 Firefox 暂存器中有效，但在油脂猴中无效

> ID：15628242
> 
> 赞同：0
> 
> 时间：2013-03-26T02:23:18.537
> 
> 标签：javascript, greasemonkey, document-ready

所以我有这个脚本：

```
links = document.getElementsByClassName('thumb');
for (var i=links.length-1; i>=0; i--)
{
links[i].href=links[i].href+'/popout';
} 
```

在我要修改的页面加载后在暂存器中工作。

但是当我把它放在greasemonkey中时，它会在页面完全加载之前运行并且我需要修改的元素不存在并且它不起作用。

这是gs脚本：

```
// ==UserScript==
// @name        popout
// @namespace   PylonPants
// @include     http://*.twitch.tv/directory/*
// @version     1

// ==/UserScript==

//if ('loading' == document.readyState) {
//  alert("This script is running at document-start time.");
//} else {
//  alert("This script is running with document.readyState: " + document.readyState);
//}
// script runs at readyState = interactive and that brakes it
// do not know how to make it wait till complete

links = document.getElementsByClassName('thumb');
alert(links[0]); // i get "undefined"
for (var i=links.length-1; i>=0; i--)
{
alert('the script works'); //i never reach here
alert(links[i].href); // nor here
links[i].href=links[i].href+'/popout';
}
alert('crazy'); // i get this then the page loads fully. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:34:03.570

您的脚本必须等待页面的 javascript 加载这些缩略图。最简单、最可靠的方法是使用[waitForKeyElements() 实用程序](https://gist.github.com/2625891)。

这是一个使用[jQuery](http://jquery.com/)并更改这些s***的完整脚本：***`waitForKeyElements``href`

```
// ==UserScript==
// @name        popout
// @namespace   PylonPants
// @include     http://*.twitch.tv/directory/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require     https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

waitForKeyElements ("a.thumb", adjustLinkHrefs);

function adjustLinkHrefs (jNode) {
    var newAddr = jNode.attr ("href") + '/popout';
    jNode.attr ("href", newAddr);
} 
```

# javascript - 集成 Angularjs 指令和 3rd 方小部件

> ID：15628243
> 
> 赞同：0
> 
> 时间：2013-03-26T02:23:22.723
> 
> 标签：javascript, angularjs, promise

我正在尝试构建一个封装第 3 方库的指令。我的指令可能如下所示：

```
angular.module('MyApp').directive("shareButton", [function() {
    return {
        link: function($scope, elem, attrs ) {
            stWidget.addEntry({
                "service": attrs.service,
                "element": elem[0],
                "url": attrs.shareUrl,
                "title": attrs.shareTitle,
                "type": attrs.type || "chicklet",
                "text": attrs.displayText || "",
                "image": attrs.shareImage
            });

        }
    };
} 
```

使用可能如下所示：

```
<a href="#" share-button 
            type="chicklet" 
            service="facebook" 
            share-url="{{shareUrl}}" 
            share-title="{{shareTitle}}" 
            share-image="{{shareImage}}"></a> 
```

问题出现在您使用`{{ someValue }}`绑定时。在指令上调用链接方法期间，这些值作为 null 传递。要获得这些值，您必须使用`attrs.$observe()`. 问题是我正在使用的 3rd 方库在调用`stWidth.addEntry()`. 我已经对他们的代码进行了大量分析，他们使用闭包和局部变量来确保我无法更改这些值。

所以我不能对第 3 方库做任何事情，除了重写它，所以我的问题是我可以用 Angular 做什么来延迟调用该`stWidget.addEntry()`方法，直到我拥有所有的值。还是有一种不必使用该`attrs.$observe()`方法的绑定形式？

我不在乎绑定更改。在这种情况下，简单的一次绑定就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T17:45:45.427

我认为您需要在链接功能中使用 attrs.$observe 。

[请参阅http://docs.angularjs.org/guide/directive#Attributes](http://docs.angularjs.org/guide/directive#Attributes)上的角度指令文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:47:49.980

使用`$timeout`应该可以解决问题

```
angular.module('MyApp').directive("shareButton", [function($timeout) {
    return {
        link: function($scope, elem, attrs ) {
           $timeout(function(){
            stWidget.addEntry({....
           },0);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T02:59:34.703

您可以使用作用域的[$eval](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24eval)`$scope`方法来评估链接函数内部的属性：

HTML：

```
<a href="#" share-button type="chicklet" service="facebook" share-url="shareUrl"
 share-title="shareTitle" share-image="shareImage"> 
```

指令链接功能：

```
link: function ($scope, elem, attrs) {
   console.log($scope.$eval(attrs.shareUrl), 
               $scope.$eval(attrs.shareTitle),
               $scope.$eval(attrs.shareImage))
   stWidget.addEntry({
      "service":  attrs.service,
       "element": elem[0],
       "url":     $scope.$eval(attrs.shareUrl),
       ... 
```

# ios - 属性的两种编码风格有什么不同

> ID：15628244
> 
> 赞同：0
> 
> 时间：2013-03-26T02:23:24.240
> 
> 标签：ios, objective-c

这里有两种**标题**的区别吗？

```
@interface MyObject: NSObject{
    NSString *title;
}

@property (nonatomic, retain) NSString *title; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T02:27:02.367

第一个是实例变量。

二是财产。

实例变量作为类声明（接口）的一部分在很大程度上已被弃用，但类内部使用的实例变量可以在扩展或@implementation 中声明。

属性声明了 API（setter/getter）和使用的内存管理模型。默认情况下，现代编译器会自动合成实例变量以支持属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:53:53.240

上面的不是属性，而只是一个实例变量。我的意见在这里：

1.  使用最新的 Xcode。
2.  不要写实例变量：`@interface MyObject : NSObject { NSString *title; }`
3.  只使用`@property`，不需要显式地使用`@synthesize`它，Xcode 将隐式地`@synthesize title = _title;`在哪里 `_title`是支持属性的实例变量`self.title`。

我认为这是一种很好的编码风格。

# jquery - 选择新下拉列表时jQuery下拉框关闭/清理jquery代码

> ID：15628245
> 
> 赞同：0
> 
> 时间：2013-03-26T02:23:39.743
> 
> 标签：jquery, html, css

我已经包含了我正在尝试解决的问题的图像，以及下面的所有代码。
我对在代码本身（不在脚本框中）发布的代码有疑问。
任何帮助将非常感激。

**HTML 脚本**

```
<section id="s-explore">
    <div class="pagebreak">
        <span>The Lifestyle</span>
        <i class="down">&lt;</i>
    </div>
    <!-- Layout for Columns -->
    <div class="wrapper layout">
        <!-- Column Home 1 -->
        <div class="col">
            <div class="media">
                <img id="d1" src="images/main.png" width="318" height="269" alt="" />
                <div class="contenthover">
                    <h3>Lorem ipsum dolor</h3>
                    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum pulvinar ante quis augue lobortis volutpat.</p>
                    <p><a href="#" id="dropbox1" class="mybutton">Lorem ipsum</a></p>
                </div>
                <div class="body">
                    <h1></h1>
                    <h2><br /></h2>
                </div>
            </div>
        </div>
        <!-- Column Home 2 -->
        <div class="col">
            <div class="media">
                <img id="d1" src="images/red.png" width="318" height="269" alt="" />
                <div class="contenthover">
                    <h3>Lorem ipsum dolor</h3>
                    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum pulvinar ante quis augue lobortis volutpat.</p>
                    <p><a href="#" id="dropbox2" class="mybutton">Lorem ipsum</a></p>
                </div>
            </div>
            <div class="body">
                <h1><a href="#"></a></h1>
                <h2><br></h2>
            </div>
        </div>
        <!-- Column Home 3 -->
        <div class="col">
            <div class="media">
                <img id="d1" src="images/car.png" width="318" height="269" alt="" />
                <div class="contenthover">
                    <h3>Lorem ipsum dolor</h3>

                    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum pulvinar ante quis augue lobortis volutpat.</p>
                    <p><a href="#" id="dropbox3" class="mybutton">Lorem ipsum</a></p>
                </div>
            </div>
            <div class="body">
                <h1><a href="news.html"></a></h1>
                <h2><br></h2>
            </div>
        </div>
    </div>
    <div id="box1">
        <a href="#" class="close">[x]</a>
        <p>This is test box number one</p>
    </div>
    <div id="box2">
        <a href="#" class="close">[x]</a>
        <p>This is test box number two</p>
    </div>
    <div id="box3">
        <a href="#" class="close">[x]</a>
        <p>This is test box number three</p>
    </div>
</section> 
```

**这是 jQuery 脚本**

```
<!-- js hover over image -->    

<script>
   $(function(){
       $(' #d1').contenthover({
           overlay_width:300,
           overlay_height:150,
           effect:'slide',
           slide_direction:'bottom',
           overlay_x_position:'center',
           overlay_y_position:'bottom',
           overlay_background:'#000',
           overlay_opacity:0.8
      });   
   });
</script>

<!-- js for drop down box1 -->
<script>
    $(function () {
        $("#dropbox1").click(function (event) {
            event.preventDefault();
            $("#box1" ).slideToggle();
        });
        $("#box1 a").click(function (event) {
            event.preventDefault();
            $("#box1").slideUp();
        });
    });
</script>

<!-- js for drop down box2 -->    
<script>
    $(function () {
        $("#dropbox2").click(function (event) {
            event.preventDefault();
            $("#box2").slideToggle();
        });

        $("#box2 a").click(function (event) {
            event.preventDefault();
            $("#box2").slideUp();
        });
    });
</script>

<!-- js for drop down box3 -->
<script>
    $(function () {
        $("#dropbox3").click(function (event) {
            event.preventDefault();
            $("#box3").slideToggle();
        });

        $("#box3 a").click(function (event) {
            event.preventDefault();
            $("#box3").slideUp();
        });
    });
</script> 
```

无论如何要清理这个jQuery代码，这样我就不必为每个下拉框都有单独的脚本？

好吧，我想我不允许发布图片，因为我在这里还没有足够高的代表，但也许有一天我可以:)

现在，如果您选择所有三个下拉区域，它们只是一个接一个地出现，如果选择其中一个下拉框，然后用户在单击第二个按钮时转到任何其他按钮，那就太好了下拉将关闭，并打开新框。

**这是css脚本**

```
section .wrapper {
    position: relative;
    zoom: 1;
}
section .wrapper:after {
    display: block;
    visibility: hidden;
    height: 0;
    clear: both;
    content: ".";
}
section .wrapper.layout {
    width: 960px;
    margin: 0 auto;
    padding: 95px 90px;
}
section .wrapper .fg {
    z-index: 200;
}
section .pagebreak {
    position: absolute;
    top: 0;
    left: 120px;
    line-height: 1;
    text-transform: uppercase;
    color: #272727;
    display: inline-block;
    z-index: 300;
    zoom: 1;
}
section .pagebreak:after {
    display: block;
    visibility: hidden;
    height: 0;
    clear: both;
    content: ".";
}
section .pagebreak span {
    padding: 14px 14px 14px 0;
    display: block;
    float: left;
}
section .pagebreak i {
    width: 16px;
    padding: 14px 14px 8px;
    display: block;
    float: left;
    border-left: 1px dotted #272727;
    font-style: normal;
    font-family: 'dinliga-medium';
}
#s-explore {
    background: #fff;
}
#s-explore .wrapper .col {
    float: left;
    width: 318px;
    height: 269px;
    background: #000;
    margin-right: 2px;
    cursor: pointer;
    position: relative;
}
#s-explore .wrapper .col .media {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 318px;
    height: 269px;
}
#s-explore .wrapper .col .body {
    padding: 20px 0;
    position: absolute;
    top: 477px;
    left: 0px;
    width: 100%;
}
#s-explore .wrapper .col .body.hover {
    top: 150px;
}
#s-explore .wrapper .col h1,
#s-explore .wrapper .col h2 {
    font-weight: normal;
    text-transform: uppercase;
    text-align: center;
}
#s-explore .wrapper .col h1 a:hover,
#s-explore .wrapper .col h2 a:hover {
    ![issue with the drop down][1]  text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:39:30.350

基本上你想迭代你的元素并设置绑定事件。

```
var elementCount = 5;
for(var i = 0; i < elementCount; i++){
    $("#dropbox" + i).bind('click', function (event) {
        event.preventDefault();
        $("#box" + i).slideToggle();
    });

    $("#box" + i + " a").bind('click', function (event) {
        event.preventDefault();
        $("#box" + i).slideUp();
    });
} 
```

应该在**elementCount**等于您拥有的下拉列表的情况下做到这一点。

编辑：

我应该注意，除非 CSS 保持不变，否则拥有 dropbox1 和 box1 并不是一个很好的编程习惯。我最好设置一个类并这样做：

```
$('.class').bind('click', function(){
    preventDefault();
    var box = $(this).next('.box');
    box.slideToggle();
    box.find('a').bind('click', function(){
        preventDefault();
        box.slideUp();
    });
}); 
```

不过，现在您的 HTML 需要稍作修改。

```
<div class="class"></div>
<div class="box">
    <a href="#">Text</a>
</div> 
```

此方法获取被单击的项目并找到紧随其后的框元素，然后设置该绑定。

这里有一些参考资料供您参考：

[$.next()](http://api.jquery.com/next/)

[$.find()](http://api.jquery.com/find/)

# android - 如何测量移动设备上的网页加载时间？

> ID：15628246
> 
> 赞同：2
> 
> 时间：2013-03-26T02:23:47.063
> 
> 标签：android, google-chrome

我想以编程方式确定页面加载所需的时间，类似于某些扩展程序（例如 Speed Tracer）的加载方式。例如，我想知道何时触发某些关键事件，例如网络连接、DOM 加载事件和 SSL 网络计时。

因为 Chrome for Android 不支持扩展，有没有办法在代码中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T05:44:33.647

有一种叫做“ [Navigation Timing API](https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/NavigationTiming/Overview.html) ”的东西可以在 Android 版 Chrome（以及桌面版 Chrome、Internet Explorer 和 Firefox）上使用。

[按照本文档](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)中的说明将您的 Android 设备连接到您的计算机并启用“远程调试模式” 。

在您的计算机上打开 Chrome 并访问 localhost:9222 以访问 Chrome for Android 的 DevTools。

在控制台中，键入以下内容。

```
> performance.timing 
```

你会发现看起来像这样的东西（折叠时折叠）

```
connectEnd: 1364275296017
connectStart: 1364275296017
domComplete: 1364275296699
domContentLoadedEventEnd: 1364275296517
domContentLoadedEventStart: 1364275296458
domInteractive: 1364275296458
domLoading: 1364275296304
domainLookupEnd: 1364275296017
domainLookupStart: 1364275296017
fetchStart: 1364275296017
loadEventEnd: 1364275296705
loadEventStart: 1364275296700
navigationStart: 1364275295553
redirectEnd: 1364275296017
redirectStart: 1364275295553
requestStart: 1364275296025
responseEnd: 1364275296273
responseStart: 1364275296264
secureConnectionStart: 0
unloadEventEnd: 1364275296275
unloadEventStart: 1364275296275 
```

[您可以在 HTML5Rocks 的文章“使用 Navigation Timing 测量页面加载速度](http://www.html5rocks.com/tutorials/webperformance/basics/)”中找到有关 Navigation Timing API 的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:45:23.600

如果你在你自己的 WebView 中加载它，你可以使用这样的东西：

```
mWebView.setWebViewClient(new WebViewClient() {

   public void onPageFinished(WebView view, String url) {
        long doneTime = System.getCurrentTimeInMillis();
        int timeToLoad = doneTime - startTime;
    }
});

long startTime = System.getCurrentTimeInMillis();
mWebView.loadUrl(yourUrl); 
```

如果您正在寻找专门在 chrome 或 firefox 应用程序中测量，我认为除了尝试用秒表或其他东西手动测量之外，目前没有任何真正的解决方案。希望我错了。

# javascript - 如何使用 Spy 获取 JS 函数执行的回调

> ID：15628248
> 
> 赞同：5
> 
> 时间：2013-03-26T02:24:08.423
> 
> 标签：javascript, tdd, jasmine, sinon, spy

我想监视一个函数，然后在函数完成/初始调用时执行回调。

以下内容有点简单，但显示了我需要完成的工作：

```
//send a spy to report on the soviet.GoldenEye method function
var james_bond = sinon.spy(soviet, "GoldenEye");
//tell M about the superWeapon getting fired via satellite phone
james_bond.callAfterExecution({
    console.log("The function got called! Evacuate London!");
    console.log(test.args);
}); 
```

在诗乃可以做到这一点吗？如果他们解决了我的问题，也欢迎备用库:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-31T21:51:06.880

它很笨重，但你可以：

```
//send a spy to report on the soviet.GoldenEye method function
var originalGoldenEye = soviet.GoldenEye;

var james_bond = sinon.stub(soviet, "GoldenEye", function () {
  var result = originalGoldenEye.apply(soviet, arguments);

  //tell M about the superWeapon getting fired via satellite phone
  console.log("The function got called! Evacuate London!");
  console.log(arguments);
  return result;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T06:22:18.230

你必须[存根](http://sinonjs.org/docs/#stubs-api)函数。从文档：

> `stub.callsArg(index);`
> 
> 使存根将提供的索引处的参数作为回调函数调用。stub.callsArg(0); 导致存根调用第一个参数作为回调。

```
var a = {
  b: function (callback){
    callback();
    console.log('test')
  }
}

sinon.stub(a, 'b').callsArg(0)
var callback = sinon.spy()
a.b(callback)

expect(callback).toHaveBeenCalled()
//note that nothing was logged into the console, as the function was stubbed 
```

# normalization - 跟踪已完成手术的医疗保健数据库表的规范化

> ID：15628250
> 
> 赞同：0
> 
> 时间：2013-03-26T02:24:16.480
> 
> 标签：normalization, database-normalization, functional-dependencies, normalize

我有一张桌子来跟踪一家医院的手术，`Surgery_Record`如下所示。

```
surgery_Record_ID   patient_ID    surgery_ID        theatre_ID     Surgery_Date
        1               1             20               0           2000-05-10
        2               85            20               0           2000-01-15
        3               10            20               0           2000-01-29
        4               13            16               0           2000-11-19
        5               15            1                0           2000-05-28 
```

我的假设是：

1.  不复诊患者
2.  每个病人只做一次手术
3.  一个特定的手术室一天只使用一次

我想出了以下功能依赖项：

1.  Patient_ID, Theatre_ID---> Surgery_Date
2.  Surgery_Record_ID---> Patient_ID
3.  Patient_ID---> Surgery_ID, Surgery_Record_ID, Theatre_ID
4.  患者_ID、手术_ID--->剧院_ID
5.  Surgery_Record_ID, Patient_ID, Surgery_ID, Theatre_ID---> Surgery_Date

从上面的依赖中，我发现候选键是 {Patient_ID, Theatre_ID} {Patient_ID, Surgery_ID} 和 {Surgery_Record_ID, Patient_ID, Surgery_ID, Theatre_ID}

那么我的表格是否违反了第二范式？**请帮助检查我的 FD 是否正确，因为我在这方面非常陌生。**非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:50:10.647

您的 FD 以粗体显示。

* * *

*   **Patient_ID, Theatre_ID---> Surgery_Date**

根据样本数据，我不得不说这是错误的。对于这三个属性，以下 FD 似乎是正确的。它们主要来自您的假设，我在评论中指出，这些假设在现实世界中可能并不成立。

*   Patient_ID -> {Theatre_ID, Surgery_Date}
*   手术日期 -> 剧院 ID

* * *

*   **Surgery_Record_ID---> Patient_ID**

每行的 Surgery_Record_ID 都有一个不同的值，因此 Surgery_Record_ID 决定了每个属性。

*   手术记录 ID -> {患者 ID、手术 ID、手术室 ID、手术日期}

* * *

*   **Patient_ID---> Surgery_ID, Surgery_Record_ID, Theatre_ID**

由于患者无法重访，并且患者只能进行一次手术，因此 Patient_ID 将是全球唯一的，就像 Surgery_Record_ID 一样。Patient_ID 将确定每个属性。

*   患者 ID -> {surgery_Record_ID, Surgery_ID, theatre_ID, Surgery_Date}

* * *

*   **患者_ID、手术_ID--->剧院_ID**

我在上面介绍了 Patient_ID。Surgery_ID 不能确定任何事情。

* * *

*   **Surgery_Record_ID, Patient_ID, Surgery_ID, Theatre_ID---> Surgery_Date**

*   Surgery_Record_ID -> {Patient_ID, Surgery_Date}

*   Patient_ID -> {Surgery_Record_ID, Surgery_Date}
*   Surgery_Date -> {Surgery_Record_ID, Patient_ID}

* * *

您的假设要求 Surgery_Date 是唯一的。所以 Surgery_Date 决定了每个属性。

*   手术日期 -> {患者 ID、手术 ID、手术室 ID、手术记录 ID}

# java - 如何灵活解析日期？

> ID：15628254
> 
> 赞同：0
> 
> 时间：2013-03-26T02:24:23.443
> 
> 标签：java

内置的 java 解析器似乎比较死板。是否有另一个库（或标准库中的另一个类）我可以查看它以任何格式解析日期？

我意识到像 2010 年 4 月 5 日这样的极端情况我需要一个格式语言环境，但我目前什至无法处理有秒和没有秒的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:26:10.580

在某些时候，您必须告诉 Java 可接受的日期是什么样的。正如您所提到的，日期可以以多种格式显示。请查看JDK 中的[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)。你可以想出任何你需要的格式。至于“它必须是这六种格式之一”的情况，我避免试图对格式字符串过于聪明，而是一一尝试，直到一种有效。它可能不是最漂亮的解决方案，但是当有几种不同的已知格式时它可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:29:24.467

你会比使用[joda](http://joda-time.sf.net)的格式化功能做得更糟。有一个[用户指南](http://joda-time.sourceforge.net/userguide.html)可以帮助您入门。如果您还有其他问题，请发表评论。

# html - 具有标准页眉页脚布局但不使用表格标签的 HTML 页面

> ID：15628259
> 
> 赞同：1
> 
> 时间：2013-03-26T02:24:29.883
> 
> 标签：html, css

![在此处输入图像描述](../Images/9c091e07c219e30d6c62f1bc63444252.png)

如何在不使用表格的情况下获得图像中显示的内容？我希望布局跨越页面的整个高度/宽度，即使调整了浏览器窗口的大小。

这是我到目前为止所尝试的。它很接近，但看起来并不专业。

```
<html>
<body>
    <div>
        <div style="border-style: solid; height: 20%">
            Header</div>
        <div style="overflow: hidden; height: 55%">
            <div style="border-style: solid; float: left; width: 20%; height: 100%;">
                left</div>
            <div style="border-style: solid; float: left; width: 57%; height: 100%;">
                content</div>
            <div style="border-style: solid; float: left; width: 20%; height: 100%;">
                right</div>
        </div>
        <div style="border-style: solid; height: 20%">
            Footer</div>
    </div>
</body>
</html> 
```

一个干净简单的 CSS 将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T02:42:50.477

Foo，你需要做的是在尝试之前先打好 HTML 和 CSS 的基础。理想情况下，您希望避免使用内联样式（例如`style="border: 1px solid black;"`）。您不需要固定或绝对定位来完成此操作。使用基本的 HTML/CSS 知识完全可以做到。这是您所要求的替代解决方案：

```
<div class="header">
    <div class="header-inner"></div>       
</div>
<div class="content">
    <div class="sidebar left">
        <div class="sidebar-inner"></div>
    </div>
    <div class="content-inner"></div>
    <div class="sidebar right">
        <div class="sidebar-inner"></div>
    </div>
</div>
<div class="footer">
    <div class="footer-inner"></div>
</div> 
```

和CSS：

```
/* Temp styles */
.header, .sidebar, .content, .footer { border: 5px solid black; }
.content, .sidebar, .footer { border-top: none; }
.sidebar.right { border-right: none; }
.sidebar.left { border-left: none; }
/* Core styles */
.header {
    position: relative; /* needed for stacking */
    height: 100px;
    width: 100%;
}
.content {
    position: relative; /* needed for stacking */
    width: 100%;
    height: 500px;
}
.sidebar {
    position: relative; /* needed for stacking */
    width: 20%;
    height: 100%;
    border-top: none;
}
.sidebar.left { float: left; }
.sidebar.left:after,
.sidebar.right:after {
    clear: both;
    content: "\0020";
    display: block;
    overflow: hidden;
}
.sidebar.right { float: right; }
.footer {
    position: relative; /* needed for stacking */
    width: 100%;
    height: 100px;
} 
```

这是一个[演示](http://jsfiddle.net/3f5SL/)。拿这个演示并从中学习！希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:27:38.190

使用`position: fixed`(ALL) 和`top: 0px;`(top div) , `right: 0px;`(right div), `left: 0px;`(left div), `bottom: 0px;`(bottom div)

固定职位应该对您有所帮助

**编辑：**这是代码工作：

```
 <div>
        <div style="border-style: solid; height: 20%; position: fixed; top: 0px; width: 100%;">
            Header
        </div>
        <div style="overflow: hidden; height: 55%">
            <div style="border-style: solid; float: left; width: 20%; height: 60%; position: fixed; left: 0px; top: 20%;">
                left
            </div>
            <div style="border-style: solid; float: left; width: 55%; height: 60%; position: fixed; top: 20%; left: 20%;">
                content
            </div>
            <div style="border-style: solid; float: right; width: 20%; height: 60%; position: fixed; right: 0px; top: 20%;">
                right
            </div>
        </div>
        <div style="border-style: solid; height: 20%; position: fixed; bottom: 0px; width: 100%;">
            Footer
        </div>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T14:17:47.380

我想你现在已经想出了一个解决方案，因为这个问题已经有将近两年的历史了。但是，其他一些人可能会偶然发现这篇文章，所以这是供将来参考：

[看看这个答案并检查 JSFiddles](https://stackoverflow.com/questions/25583701/header-footer-layout-with-100-content-height-in-ie8)。这是一个使用 CSS 表格（没有 HTML 布局表格）的相对可靠的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-10T20:47:07.300

CSS：

```
#header
{
 position:fixed;
 top:0px;
 left:0px;
 right:0px;
 height:20%;
 overflow:hidden;
}
#leftSide
{
 position:fixed;
 top:21%;
 left:0px;
 width:20%;
 bottom:21%;
}
#rightSide
{
 position:fixed;
 top:21%;
 right:0px;
 width:20%;
 bottom:21%;
}
#footer
{
 position:fixed;
 height:20%;
 left:0px;
 right:0px;
 bottom:0px;
}
#content
{
 position:fixed;
 top:21%;
 bottom:21%;
 left:21%;
 width:57%;
}
div {display:block; border:1px solid black;} 
```

html：

```
<div id="header">header</div>
 <div id="leftSide">left</div>
 <div id="content">content</div>
 <div id="rightSide">right</div>
 <div id="footer">footer</div> 
```

在此示例中，我使用`fixed` `position`，但您可以为每个 div设置`overflow-x`和。`overflow-y`例如：因为`content`您可以对每个 div使用`overflow-x:hidden`and `overflow-y:auto`or等​​等。`scroll`当然，在这个例子中页面是不可滚动的。

# java - Collections.sort 不起作用

> ID：15628260
> 
> 赞同：1
> 
> 时间：2013-03-26T02:24:43.420
> 
> 标签：java, arrays, collections

```
public void sortByLastName(){
    Collections.sort(list, new Comparator<Person>() {
        public int compare(Person p1, Person p2){
            return p1.getLastName().compareTo(p2.getLastName());
        }
    } );
} 
```

此处显示的代码是 contactList 数组的一部分，我在其中按姓氏对列表进行排序，我似乎无法编译它，而且我看不出有什么问题。

编辑：编译器上的错误是

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    The method sort(List<T>, Comparator<? super T>) in the type Collections is not applicable for the arguments (Person[], new Comparator<Person>(){})
at ContactList.sortByLastName(ContactList.java:34)
at Main.main(Main.java:18) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:34:03.580

> Collections 类型中的 sort(List, Comparator) 不适用于参数 (Person[], new Comparator(){})

这告诉您，`Collections.sort()`采用 a`List`和 a的方法`Comparator`与您提交的不匹配，这似乎是一个`Person`对象数组 ( `Person[]`) 和 a `Comparator`。Java 中的数组和列表乍一看可能很相似，但它们是不同的。为了对对象数组进行排序，请改用[Arrays.sort()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:34:21.283

因为您的列表是一个数组，所以您需要使用 Arrays.sort 而不是 Collections.sort 进行排序。

# php - 在 PHP 条目被动态调用到 DOM 之后添加 jquery 一个 href 类选择器

> ID：15628261
> 
> 赞同：1
> 
> 时间：2013-03-26T02:24:46.010
> 
> 标签：php, jquery, dynamic, jquery-selectors

我一直在努力想出解决这个问题的办法。我认为 .live() 会有所帮助，但它没有在 jquery 1.9.1 中使用

我有这个功能 - 其要点是：

```
while($row = $result->fetch_assoc()) {
    $currentID = $row['UserID'];
    $query2="SELECT FirstName, LastName, UserID FROM Users WHERE UserID = $currentID";
    $result2 = $mysqli->query($query2);
    $row1 = $result2->fetch_assoc();
    echo '<div class="commentEntry">';
    echo "<h5><a href='user.php?User=".$row1['UserID']."'>".$row1['FirstName']." ".$row1['LastName']."</a></h5>";
    echo "<p>".$row['Content']."</p>";
    echo "<p class='agree'><a href='#' class='agreeWith' id=".$row['commentID'].">Agree</a></p>";
    echo "</div>";
} 
```

此功能有效，不是问题。所以本质上，我想使用 jquery 来获取所有动态添加的 a.agreeWith 实例。

为了测试，我正在使用这个：

```
$(document).ready(function() {
     $('a.agreeWith').click(function(event) {
        event.preventDefault();
        alert("test");
        var agree = $(this).id;
        var data = 'Agree='  + agree.val();
    });
}); 
```

现在我发现没有发生的是警报永远不会出现。a href 链接仍会触发，因此显然没有调用。

我只是通过在页面中写入任何内容来测试它，并且它可以工作，出现警报。

很明显，动态加载的信息存在问题，并试图将 jquery 应用于它。

问题是。我该如何解决这个问题？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:16:59.533

这应该至少对您有用，以使您的警报正常工作。不知道你想做什么之后......

```
$(document).ready(function() {
     $(document.body).on('click', 'a.agreeWith', function(event) {
        event.preventDefault();
        alert("test");
        var agree = $(this).id;
        var data = 'Agree='  + agree.val();
    });
}); 
```

# javascript - jQuery .on 和 .get 方法

> ID：15628262
> 
> 赞同：0
> 
> 时间：2013-03-26T02:24:48.747
> 
> 标签：javascript, jquery, html

我正在尝试获取在`li`用户单击元素时单击的元素的标签名称。该`li`元素被动态添加到 HTML 代码中。为此，我正在使用下面的代码，但它似乎不起作用。

```
$('li *','div#contentWrapper').on('click','#interfaceContainer #left #sortableTestComponents li',function(e){
        e.stopPropagation();
        var domEl = $(this).get(0);
        alert(domEl.tagName);
        if(!$(event.target).hasClass("deleteTestComp")){
            var type = $(this).find('div.headerName').html();
            var information = $(this).find('input[type=hidden]').val();

            if(type == "CliSessionType"){
                 parseCliComponent(information);
            }
            else if(type == "DBSessionType"){
                parseDbComponent(information);
            }
            else{
                parseScreenComponent(information);
            }
        }
    }); 
```

为什么我的代码不起作用？当用户点击一个元素时没有任何反应。

JSFiddle - [http://jsfiddle.net/3FxQE/](http://jsfiddle.net/3FxQE/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:11:27.580

您正在尝试在选择器中使用不需要的上下文。改变`$('li *','div#contentWrapper')`和。`$('div#contentWrapper')`_ `$(event.target)`_ `$(e.target)`一个工作小提琴在[这里](http://jsfiddle.net/3FxQE/2/)

```
$('div#contentWrapper').on('click', '#interfaceContainer #left #sortableTestComponents li', function (e) {
    e.stopPropagation();
    var $this = $(this),
        domEl = $this.get(0);
    alert(domEl.tagName);
    if (!$(e.target).hasClass("deleteTestComp")) {
        var type = $this.find('div.headerName').html(),
            information = $this.find('input[type=hidden]').val();

        if (type == "CliSessionType") {
            parseCliComponent(information);
        } else if (type == "DBSessionType") {
            parseDbComponent(information);
        } else {
            parseScreenComponent(information);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:18:57.030

由于您对以下元素中的`click`事件感兴趣，因此事件注册必须是`li``#interfaceContainer``$('#interfaceContainer').on('click','li',function(e){...});`

然后要获取`tagName`，您需要使用可用的事件的实际来源，`e.target`因此您需要使用`$(e.target).get(0)`来获取单击的 dom 元素。

```
$('#interfaceContainer').on('click','li',function(e){
    e.stopPropagation();
    var domEl = $(e.target).get(0);
    alert(domEl.tagName);
    if(!$(event.target).hasClass("deleteTestComp")){
        var type = $(this).find('div.headerName').html();
        var information = $(this).find('input[type=hidden]').val();

        if(type == "CliSessionType"){
             parseCliComponent(information);
        }
        else if(type == "DBSessionType"){
            parseDbComponent(information);
        }
        else{
            parseScreenComponent(information);
        }
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/UZDPe/)

# verilog - 始终@(posedge clk) 中的事件控制

> ID：15628264
> 
> 赞同：1
> 
> 时间：2013-03-26T02:24:51.770
> 
> 标签：verilog, fpga, synthesis

想知道 always 块中事件控制语句的行为：

```
always @(posedge clk) begin: TEST
    ...
    @(wait_for_signal_from_subsystem);
    ... 
    @(wait_for_another_signal_from_subsystem);
    ...
end 
```

在事件信号到来之前，进程会“卡住”，还是会在每次 clk 边缘到来时重新启动？

这也是可合成的（Quartus II 说是，但还没有模拟......）？这是一个好的做法还是有其他更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:26:11.420

是的，正如您所说，它“卡住”了。一次只能激活一个块的“循环”，如果它没有完成循环，它将不会重新进入。

由于块内的等待操作，您在那里尝试做的事情可能无法合成。

我不知道您设计的确切细节，但我会用一个小型有限状态机来解决这个问题。我假设来自子系统的信号不比时钟快，所以它看起来像：

```
always @* begin
  if(state_f == `WAIT_FOR_FIRST) 
       state_nxt = got_first_signal ? `WAIT_FOR_SECOND : `WAIT_FOR_FIRST;
  else if(state_f == `WAIT_FOR_SECOND)
       state_nxt = got_second_signal ? `DONE_STATE : `WAIT_FOR_SECOND;
  else if(state_f == `DONE_STATE) 
       state_nxt = `WAIT_FOR_FIRST;
  else
       state_nxt = 2'bxx;
end

always @(posedge clk) begin
    state_f <= state_nxt;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:26:59.720

假设您正在设计硬件而不是非综合测试台代码，这不是一个好的做法，并且可能无论如何都不会做您想做的事情。

从语言的角度来看，这将编译和模拟。它将阻止等待**总是**块内的事件，而不是在时钟的每个位置重新启动。我找不到这方面的规范参考，但这是我在模拟中观察到的。我很好奇如果你甚至让它没有错误地合成它会合成什么。

* * *

如果来自另一个子系统的信号已经在同一个时钟域（同步到`clk`），那么您可以在每个时钟沿检查它的状态，并使用它做一些事情。

```
always @(posedge clk) begin: TEST
  if (the_other_signal == 1'b1) begin
    ...
  end
end 
```

其他一些需要考虑的事情：

*   也许您只关心信号何时断言/取消断言。在这种情况下，您需要进行边缘检测。
*   如果信号与 异步`clk`，那么您有一个时钟域交叉，您需要在查看输入信号之前对其进行同步。

# c++ - 带 OpenGL 像素完美图的 C++

> ID：15628269
> 
> 赞同：3
> 
> 时间：2013-03-26T02:25:21.297
> 
> 标签：c++, opengl, pixel, put

我需要在窗口上绘制一个像素，根据它在整数中的像素位置，而不是浮点数。例如，如果我要绘制 0, 0 它将是窗口的最左上角，1,1 将是 0、0 和 0 以下 1 像素右侧的一个像素。我猜我需要它有点像我的网格。我不在乎 0, 0 是否像通常那样是原点，但我需要它按像素计数，而不是 1 作为最大值，-1 作为最小值，或其他。

我已经尝试过的事情：我想我可以做这样的事情 Window Width ^-1 * X 进行绘图，这确实有效，但并非总是如此。无论如何，我该怎么做呢？我也做了 X 位置/屏幕宽度，效果最好，但每隔 10 个左右像素就会停止工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T02:36:53.700

首先，OpenGL 并不保证在所有情况下都可以完美放置像素。但是，有一个非常常见的问题：如果像素坐标，每个像素的中心不会有整数坐标。

这是 OpenGL 视口中左下角像素的示意图。

```
+Y
^
|     
+-----+
|     |
|  o  |
|     |
+-----+---> +X 
```

如果您的数据被转换为每个像素的宽度和高度为 1 个单位，则像素的中心位于`(0.5, 0.5)`. 如果您`GL_POINT`在该像素处绘制 a ，则坐标应为`(0.5, 0.5)`。如果你画一个矩形，它会从`(0,0)`到`(1,1)`。如果你画一条穿过它的垂直线，这条线的 x 坐标应该是 0.5。

等等。

# jboss - primefaces 不渲染 f:selecteditems

> ID：15628275
> 
> 赞同：0
> 
> 时间：2013-03-26T02:25:49.220
> 
> 标签：jboss, primefaces, seam, radio

这是我的代码：可能有一些错误，但我做得对，我认为我的问题出在 Java 代码中，请您说明一下，我正在尝试渲染无线电值。

```
<p:selectOneRadio id="firstBill" value="#{myClass.myfee}" label="what to do?">
                        <f:verbatim>
                        <f:selectItems value="#{myClass.listMyFee}"/>
                        </f:verbatim>
                        </p:selectOneRadio>

@Name("myClass")
public class MyClass
{
private String fee;
 private Map<String, String> listMyFee;
public Myclass(){
//constructor
listMyFee = new LinkedHashMap<String, String>();
   listMyFee;.put("Yes", "Yes");
   listMyFee;.put("No", "No");

}

 public Map<String, String> getListMyFee()
  {
    return this.listMyFee;
  }

get and set for fee are written 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:23:23.477

您的 bean 代码错误，您需要`f:selectItems`一个`List<SelectItem>`.

它看起来像这样：

```
List<SelectItem> list = new LinkedList<SelectItem>();
list.add(new SelectItem(<returnValue>, <displayValue>)); 
```

在您的 xhtml 文件中：

```
 <p:selectOneRadio id="firstBill" value="#{myClass.myfee}" label="what to do?">
          <f:selectItems value="#{myClass.list}" />
    </p:selectOneRadio> 
```

# html - 部分视图数据未显示 MVC 4

> ID：15628276
> 
> 赞同：0
> 
> 时间：2013-03-26T02:25:59.043
> 
> 标签：html, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-partialview

我相信这是我的 HTML / CSS 代码的问题，因为这些是我明显的弱点。我有一个部分视图，我只想在有人从下拉框中选择一个选项时显示。这个局部视图 (_ChampionStats) 正在加载，我可以在其中放置一个断点并看到它被击中，但数据从未显示。有什么建议么？

**索引.cshtml：**

```
@using LoLBuild.Models
@model ChampionViewModel

<script type="text/javascript" src="~/jquery.js"></script>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Choose Your Champion</h2>
<div class="inputblock" style="clear: both;width:100%;">
    @Html.LabelFor(model => model)
    @Html.DropDownList("ChampionList", (IEnumerable<SelectListItem>)ViewBag.ChampionSelectList, new { @onchange="location = Index/this.value;" })
</div>

<div id="ChampionStats">
    @if (ViewBag.SelectedChampion > 0)
    {
        @Html.Partial("_ChampionStats", Model);

    }
</div>

<script type="text/javascript">
    $(document).ready(function() {
        $("#ChampionList").change(function() {
            var strSelected = "";
            $("#ChampionList option:selected").each(function() {
                strSelected += $(this)[0].value;
            });
            var url = "/Champion/Index/" + strSelected;

            $.post(url, function(data) {
                // do something if necessary
            });
        });
    });
</script> 
```

**部分视图 (_ChampionStats.cshtml)：**

```
@using LoLBuild.Models
@model ChampionViewModel

@{
    ViewBag.Title = "ChampionStats";
}
    <h3>Partial Rendered Successfully</h3>
    @Html.TextBox("Health:", Model.BeginHealth, new {style = "width: 100px;"}) 
```

**编辑：**我注意到控制台中有错误，但我不确定这意味着什么。这是错误：

```
GET http://localhost:49219/jquery.js 404 (Not Found) localhost:8
Uncaught ReferenceError: Index is not defined localhost:36
onchange 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:12:52.800

你需要使用

```
@Html.RenderPartial 
```

[http://msdn.microsoft.com/en-us/library/system.web.mvc.html.renderpartialextensions.renderpartial(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.renderpartialextensions.renderpartial(v=vs.108).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:13:44.097

404 表示该路径`http://localhost:49219/jquery.js`不存在。jquery 的默认位置是脚本文件夹，并且包含版本 ie `http://localhost:49219/scripts/jquery-1.8.3.js`。您可以使用浏览器的 f12 中的工具来检查是否找到了文件，即 chrome 中的网络，或者 fiddler 会为您提供更多信息 Tim

# mysql - SQL ORDER BY 多列

> ID：15628277
> 
> 赞同：23
> 
> 时间：2013-03-26T02:26:02.833
> 
> 标签：mysql, sql, sql-order-by

我想按两列对我的产品表进行排序：`prod_price`和`prod_name`。

```
SELECT prod_id, prod_price, prod_name
FROM Products
ORDER BY prod_price, prod_name; 
```

这里的排序是如何进行的？我认为它首先发生`prod_price`，然后发生`prod_name`。此外，上述查询与此查询有何不同：

```
SELECT prod_id, prod_price, prod_name
FROM Products
ORDER BY prod_name; 
```

我的产品表如下：

```
CREATE TABLE Products
(
  prod_id    char(10)      NOT NULL ,
  vend_id    char(10)      NOT NULL ,
  prod_name  char(255)     NOT NULL ,
  prod_price decimal(8,2)  NOT NULL ,
  prod_desc  text          NULL 
); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-26T02:48:25.903

在 an 中排序`ORDER BY`是由第一列完成的，然后是指定语句中的每个附加列。

例如，考虑以下数据：

```
Column1    Column2
=======    =======
1          Smith
2          Jones
1          Anderson
3          Andrews 
```

查询

```
SELECT Column1, Column2 FROM thedata ORDER BY Column1, Column2 
```

将首先按中的所有值排序`Column1`

然后对列进行排序`Column2`以产生：

```
Column1    Column2
=======    =======
1          Anderson
1          Smith
2          Jones
3          Andrews 
```

换句话说，数据首先按`Column1`顺序排序，然后每个子集（`Column1`具有`1`作为其值的行）按第二列的顺序排序。

您发布的两个语句之间的区别在于，第一个语句中的行将首先按`prod_price`（价格顺序，从最低到最高）排序，然后按名称顺序（这意味着如果两个项目的价格相同，则名称的 alpha 值较低的将首先列出），而第二个将仅按名称顺序排序（这意味着价格将根据`prod_name`不考虑价格的顺序显示）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-26T02:47:59.917

结果按第一列排序，然后是第二列，依此类推，与 ORDER BY 子句包括的列一样多。如果您希望任何结果按降序排序，您的 ORDER BY 子句必须在相关列的名称或编号之后直接使用 DESC 关键字。

看看这个例子

```
SELECT first_name, last_name, hire_date, salary 
FROM employee 
ORDER BY hire_date DESC,last_name ASC; 
```

会陆续下单。首先订购 Hire_Date，然后按 Hire_Date 订购 LAST_NAME。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T02:29:20.577

是的，排序不同。

列表中的项目`ORDER BY`按顺序应用。
后面的项目只对上一步剩下的对等点进行排序。

你为什么不*试试*呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-19T03:28:16.317

是的，排序方式不同。在第一种情况下，基于第 1 列的订单，除此之外，还通过基于第 1 列对 colmun2 进行排序来进一步处理。在第二种情况下，它完全基于第 1 列进行排序...请继续举一个简单的例子...你会得到迅速地..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T02:43:09.803

这取决于您的数据库的大小。

SQL 基于 SET 理论：查询表时没有固有的顺序。

因此，如果您要运行第一个查询，它将首先按产品价格排序，然后按产品名称排序，如果价格类别中有任何重复项，例如 20 美元，它将按名称对这些重复项进行排序，因此始终维护当您运行查询时，它将始终以相同的顺序返回相同的结果集。

如果您要运行第二个查询，它只会按名称排序，因此如果有两个具有相同名称的产品（出于某种奇怪的原因），那么在您运行查询后它们将不会有保证的顺序。

# javascript - 如何使用 KineticJS 检测可拖动的圆形何时与另一个圆形重叠？

> ID：15628278
> 
> 赞同：1
> 
> 时间：2013-03-26T02:26:03.353
> 
> 标签：javascript, html, collision-detection, kineticjs

我有一个可拖动的圆形，用户可以拖动到另一个圆形[静态，不可拖动]。当可拖动圆圈与静态圆圈重叠时，我需要显示“成功”文本。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:46:05.280

当用户拖动圆圈时，您可以处理“dragmove”事件。

在“dragmove”中：测试圆圈是否碰撞。如果是，则宣告成功！

```
Circle1.on("dragmove",function(){
    if(theyAreColliding(Circle1,Circle2)){
        // Success!
    }
}); 
```

碰撞测试如下所示：

```
function theyAreColliding(c1,c2){
    var dx=c1.getX()-c2.getX();
    var dy=c1.getY()-c2.getY();
    var radiiSum=c1.getRadius()+c2.getRadius();
    console.log(dx+"/"+dy+": "+radiiSum);
    return((dx*dx+dy*dy)<radiiSum*radiiSum);
} 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/3dQpL/](http://jsfiddle.net/m1erickson/3dQpL/)

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Prototype</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.3-beta.js"></script>

<style>
canvas{
  border:solid 1px #ccc;
}
</style>        
<script>
$(function(){

      var layer = new Kinetic.Layer();
      var stage = new Kinetic.Stage({
          container: "container",
          width: 400,
          height: 400
      });
      stage.add(layer);

      // mouse events don't fire on the empty part of the stage
      // so fill the stage with a rect to get events on entire stage
      // now stage.on("mouse... will work
      var background = new Kinetic.Rect({
          x: 0,
          y: 0,
          width: 400, //stage.getWidth(),
          height: 400, //stage.getHeight(),
          fill: "#eee"
      });
      layer.add(background);

      var Radius1=50;
      var Circle1=new Kinetic.Circle({
            x: 225,
            y: 125,
            radius: Radius1,
            fill: 'green',
            stroke: 'orange',
            strokeWidth: 2,
            draggable:true        
        });
        layer.add(Circle1);

      var Radius2=50;
      var Circle2=new Kinetic.Circle({
            x: 75,
            y: 175,
            radius: Radius2,
            fill: 'blue',
            stroke: 'black',
            strokeWidth: 2        
        });
        layer.add(Circle2);

      var message = new Kinetic.Text({
        x: 10,
        y: 15,
        text: "",
        fontSize: 30,
        fontFamily: 'Calibri',
        fill: 'green'
      });
      layer.add(message);

      var instructions = new Kinetic.Text({
        x: 10,
        y: 285,
        text: "Drag green on top of blue",
        fontSize: 18,
        fontFamily: 'Calibri',
        fill: 'green'
      });
      layer.add(instructions);
      layer.draw();

Circle1.on("dragmove",function(){
    if(theyAreColliding(Circle1,Circle2)){
        message.setText("Collision Detected!");
        Circle1.setFill("red");
        layer.draw();
    }else{
    }
});

function theyAreColliding(c1,c2){
    var dx=c1.getX()-c2.getX();
    var dy=c1.getY()-c2.getY();
    var radiiSum=c1.getRadius()+c2.getRadius();
    console.log(dx+"/"+dy+": "+radiiSum);
    return((dx*dx+dy*dy)<radiiSum*radiiSum);
}

}); // end $(function(){});

</script>       
</head>

<body>
    <div id="container"></div>
</body>
</html> 
```

# bash - 多次替换一个句子

> ID：15628279
> 
> 赞同：0
> 
> 时间：2013-03-26T02:26:09.487
> 
> 标签：bash, scripting, sed

我正在编写一个 bash 脚本来生成 CPP 源文件。我有一个变量列表及其名称，如下所示：

```
   TH1F z_E;
   TH1F z_eta;

```

我想上交这样的东西：

```
   TH1F * z_E = (TH1F *)f->Get("z_E");
   TH2F * z_eta = (TH2F *)f->Get("z_eta");

```

我试图用 来做到这一点`sed`，但我找不到使用匹配字符串写入结果的方法。

PS：我的`sed`版本是4.1.5

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:30:32.963

像这样的东西：

```
sed 's/\([A-Za-z_][A-Za-z0-9_]*\) *\([A-Za-z_][A-Za-z0-9_]*\);/\1 \2 = (\1 *)someOtherVar->Get("\2");/' input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T16:41:00.330

最终解决方案（解决了@perreal 答案的小问题）是：

```
sed 's/\([A-Za-z_][A-Za-z0-9_]*\)[ \t]*\([A-Za-z_][A-Za-z0-9_]*\);/\1 \2 = (\1 *)f->Get("\2");/' input 
```

# android - 如何根据android中的CPU能力加载不同的jni库？

> ID：15628283
> 
> 赞同：4
> 
> 时间：2013-03-26T02:26:17.007
> 
> 标签：android

我有几个jni动态库（*.so），它们与cpu能力有关，例如，一些库支持armv7+neon cpu，一些库支持armv7+vfpv3 cpu，一些库支持非armv7 cpu。

如何根据 CPU 能力动态加载它们？

我尝试了以下代码，但不起作用。

在这个解决方案中，我在安装包中放入了 3 个不同名称的 libs 版本：（原名为 libavcodec.so）

1.  libavcodec_neon.so 和 libavutil_neon.so
2.  libavcodec_vfpv3.so 和 libavutil_vfpv3.so
3.  libavcodec_basic.so 和 libavutil_basic.so

但是 libavcodec.so 依赖于 libavutil.so，所以 loadLibrary 函数会失败，因为它的名字被改变了。

也许我可以在加载它们之前将库重命名为原始名称，该怎么做？

```
 String cpu_ability = getCpuAbility();    

    if (cpu_ability.equals("cpuinfo_armv7_neon")) {
        System.loadLibrary("avutil_neon");
        System.loadLibrary("avcodec_neon");
    }
    else if (cpu_ability.equals("cpuinfo_armv7_vfpv3")) {
        System.loadLibrary("avutil_vfpv3");
        System.loadLibrary("avcodec_vfpv3");
    }
    else {
        System.loadLibrary("avutil_basic");
        System.loadLibrary("avcodec_basic");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:41:46.747

我找到了解决这个问题的方法。

因为`/data/data/<appname>/lib`不能修改目录，所以我把库复制到`/data/data/<appname>/files`目录下，并重命名。

比如armv7+neon的情况，我把libavcodec_neon.so复制到`files`目录下，重命名为libavcodec.so。其他库也是如此。然后从`files`目录中加载它们。

# linux - 从大文本中复制值（数字）

> ID：15628285
> 
> 赞同：-1
> 
> 时间：2013-03-26T02:26:20.707
> 
> 标签：linux

我有一个很大的文件，想将一组数字以列格式复制到另一个文本文件中，以便绘制数据。

*   文本

    ```
    粒子 1 的 CC 为 0.05378168 相残差为  78.77

    FMATCH 提取时 PSI、THETA、PHI 的值 88.780 62.638 352.976
    粒子 2 之前的时间是 19:31:43

    粒子 2 的 CC 为 0.05370924 相残差为  79.34

    FMATCH 提取时 PSI、THETA、PHI 的值 88.399 123.675 354.108

    粒子 3 的 CC 为 0.04939323 相残差为  78.30

    FMATCH 提取时 PSI、THETA、PHI 的值 87.646 98.585 353.899

    粒子 4 的 CC 为 0.05664483 相残差为  79.33

    FMATCH 提取时 PSI、THETA、PHI 的值 87.755 116.152 350.454

    粒子 5 的 CC 为 0.06687291 相残差为  78.83

    ```

我想以**粗体**提取行尾的相位残差值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:42:38.063

根据您的示例，我假设您总是`is`在想要的数字之前拥有：

```
sed -n 's/.*is *\([0-9]*\.[0-9]*\)$/\1/p' input 
```

这应该得到你想要的粗体数字，但如果你愿意，你可以更严格：

```
sed -n 's/.*phase residual is *\([0-9]*\.[0-9]*\)$/\1/p' input 
```

# r - R程序中的剪切功能

> ID：15628289
> 
> 赞同：0
> 
> 时间：2013-03-26T02:26:49.673
> 
> 标签：r, cut

```
Time    Velocity
0   0
1.5 1.21
3   1.26
4.5 1.31
6   1.36
7.5 1.41
9   1.46
10.5    1.51
12  1.56
13  1.61
14  1.66
15  1.71
16  1.76
17  1.81
18  1.86
19  1.91
20  1.96
21  2.01
22.5    2.06
24  2.11
25.5    2.16
27  2.21
28.5    2.26
30  2.31
31.5    2.36
33  2.41
34.5    2.4223
36  2.4323 
```

所以我有关于时间和速度的数据......我想使用 cut 或 which 函数将我的数据分成 6 分钟的间隔......我的最大时间通常达到 3000 分钟所以我希望输出相似对这个……

```
Time    Velocity
0   0
1.5 1.21
3   1.26
4.5 1.31
6   1.36
Time    Velocity
6   1.36
7.5 1.41
9   1.46
10.5    1.51
12  1.56

Time    Velocity
12  1.56
13  1.61
14  1.66
15  1.71
16  1.76
17  1.81
18  1.86 
```

所以到目前为止我所做的是使用 data=read.delim("clipboard") 读取数据我决定使用函数'which'....但我需要做 3000 分钟等

```
dat <- data[which(data$Time>=0
& data$Time < 6),],
dat1 <- data[which(data$Time>=6
& data$Time < 12),] 
```

等等但是如果我有时间去 3000 分钟这不会那么方便我也希望我的所有结果都包含在一个输出/变量中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T02:48:26.203

我将在这里假设您真的不想在垃圾箱中复制值。

```
cuts = cut(data$Time, seq(0, max(data$Time)+6, by=6), right=FALSE)
x <- by(data, cuts, FUN=I)

x
## cuts: [0,6)
##   Time Velocity
## 1  0.0     0.00
## 2  1.5     1.21
## 3  3.0     1.26
## 4  4.5     1.31
## ------------------------------------------------------------------------------------------------------------ 
## cuts: [6,12)
##   Time Velocity
## 5  6.0     1.36
## 6  7.5     1.41
## 7  9.0     1.46
## 8 10.5     1.51
## ------------------------------------------------------------------------------------------------------------ 
## <snip>
## ------------------------------------------------------------------------------------------------------------ 
## cuts: [36,42)
##    Time Velocity
## 28   36   2.4323 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T03:04:12.290

我不认为你想得到重复的界限。这里是一个不使用的简单解决方案`cut`（类似于@Mathew 解决方案）。

```
 dat <- transform(dat, index = dat$Time %/% 6)
  by(dat,dat$index,FUN=I) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:55:16.483

如果您确实需要重复的时间戳是 6 的整数倍，那么您将不得不在拆分之前进行一些数据复制。

```
txt <- "Time    Velocity\n0   0\n1.5 1.21\n3   1.26\n4.5 1.31\n6   1.36\n7.5 1.41\n9   1.46\n10.5    1.51\n12  1.56\n13  1.61\n14  1.66\n15  1.71\n16  1.76\n17  1.81\n18  1.86\n19  1.91\n20  1.96\n21  2.01\n22.5    2.06\n24  2.11\n25.5    2.16\n27  2.21\n28.5    2.26\n30  2.31\n31.5    2.36\n33  2.41\n34.5    2.4223\n36  2.4323"

DF <- read.table(text = txt, header = TRUE)

# Create duplicate timestamps where timestamp is multiple of 6 second
posinc <- DF[DF$Time%%6 == 0, ]
neginc <- DF[DF$Time%%6 == 0, ]
posinc <- posinc[-1, ]
neginc <- neginc[-1, ]

# Add tiny +ve and -ve increments to these duplicated timestamps
posinc$Time <- posinc$Time + 0.01
neginc$Time <- neginc$Time - 0.01

# Bind original dataframe without 6 sec multiple timestamp with above duplicated timestamps
DF2 <- do.call(rbind, list(DF[!DF$Time%%6 == 0, ], posinc, neginc))

# Order by timestamp
DF2 <- DF2[order(DF2$Time), ]

# Split the dataframe by quotient of timestamp divided by 6
SL <- split(DF2, DF2$Time%/%6)

# Round back up the timestamps of split data to 1 decimal place
RESULT <- lapply(SL, function(x) {
    x$Time <- round(x$Time, 1)
    return(x)
})

RESULT
## $`0`
##    Time Velocity
## 2   1.5     1.21
## 3   3.0     1.26
## 4   4.5     1.31
## 51  6.0     1.36
## 
## $`1`
##    Time Velocity
## 5   6.0     1.36
## 6   7.5     1.41
## 7   9.0     1.46
## 8  10.5     1.51
## 91 12.0     1.56
## 
## $`2`
##     Time Velocity
## 9     12     1.56
## 10    13     1.61
## 11    14     1.66
## 12    15     1.71
## 13    16     1.76
## 14    17     1.81
## 151   18     1.86
## 
## $`3`
##     Time Velocity
## 15  18.0     1.86
## 16  19.0     1.91
## 17  20.0     1.96
## 18  21.0     2.01
## 19  22.5     2.06
## 201 24.0     2.11
## 
## $`4`
##     Time Velocity
## 20  24.0     2.11
## 21  25.5     2.16
## 22  27.0     2.21
## 23  28.5     2.26
## 241 30.0     2.31
## 
## $`5`
##     Time Velocity
## 24  30.0   2.3100
## 25  31.5   2.3600
## 26  33.0   2.4100
## 27  34.5   2.4223
## 281 36.0   2.4323
## 
## $`6`
##    Time Velocity
## 28   36   2.4323
## 
```

# python - 将 html 表传递到 Google App Engine 中的新页面

> ID：15628295
> 
> 赞同：0
> 
> 时间：2013-03-26T02:27:07.870
> 
> 标签：python, google-app-engine

我尝试将应用引擎生成的输出页面转换为 pdf，但遇到了一些问题。首先：我选择`jQuery`. 第二：将此`javascript`变量发送到新的python脚本第三：在新的python脚本中，使用xhtml2pdf进行转换。但是，我在第二步中感到困惑。以下是我的方法：

HTML：

```
<div class="articles">
        <h2 class="model_header">PFAM Output</h2>
    <form>
        <table align="center">
            <!--end 04uberoutput_start-->
            <table class="out_chemical" width="550" border="1">
                <tr>
                    <th scope="col" colspan="5">
                        <div align="center">Chemical Inputs</div>
                    </th>
                </tr>
                <tr>
                    <th scope="col" width="250">
                        <div align="center">Variable</div>
                    </th>
                    <th scope="col" width="150">
                        <div align="center">Unit</div>
                    </th>
                    <th scope="col" width="150">
                        <div align="center">Value</div>
                    </th>
                </tr>
                <tr>
                    <td>
                        <div align="center">Water Column Half life @20 &#8451</div>
                    </td>
                    <td>
                        <div align="center">days</div>
                    </td>
                    <td>
                        <div align="center">11</div>
                    </td>
                </tr>
            </table>
        </table>
    </form>
</div> 
```

JS

```
$(document).ready(function () {
  var jq_html = $("div.articles").html();
  console.log(jq_html);
$('.getpdf').append('<tr style="display:none"><td><input name="extract" value="' + jq_html + '"></input></td></tr>');
$('.getpdf').append('<tr><td><input type="submit" value="Generate PDF"/></td></tr>');
}) 
```

新的 python 脚本进行转换

```
 def post(self):
        form = cgi.FieldStorage()   
        extract = form.getvalue('extract')
        print extract
        self.response.out.write(html) 
```

当我尝试检查变量提取是否正确传输时，我得到一个空页面。似乎这个变量被忽略了......如果我用数字提供提取物，整个框架似乎很好。那么有人可以帮我确定我的方法是否正确吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:31:21.180

这行代码不能正确处理转义 HTML。此外，它是一个`text`字段而不是一个`hidden`字段：

```
$('.getpdf').append('<tr style="display:none"><td><input name="extract" value="' + jq_html + '"></input></td></tr>'); 
```

一个更好的方法是这样的：

```
$('<tr style="display:none"><td><input type="hidden" name="extract"></td></tr>')
    .appendTo('.getpdf')
    .find('input')
    .val(jq_html); 
```

# asp.net - 将数据表转换为 xml 字符串后，如何更改节点的名称？

> ID：15628304
> 
> 赞同：0
> 
> 时间：2013-03-26T02:28:31.757
> 
> 标签：asp.net, xml, datatable

我想将数据表转换为 xml 字符串并将其存储在数据库中，这是代码

```
 DataSet s = new DataSet();
        DataTable dt = s.Tables.Add();
        dt.Columns.Add("ID", typeof(string));
        dt.Columns.Add("Name",typeof(string));

        dt.Rows.Add(new object[] { 1, "Mary" });
        dt.Rows.Add(new object[] { 2, "Andy" });
        dt.Rows.Add(new object[] { 3, "Peter" });
        dt.Rows.Add(new object[] { 4, "Russ" });
        StringWriter sw = new StringWriter();
        dt.WriteXml(sw);
        Console.WriteLine(sw.ToString());

the output is like :

<NewDataSet>
 <Table1>
    <ID>1</ID>
    <Name>Mary</Name>
  </Table1>
  <Table1>
    <ID>2</ID>
    <Name>Andy</Name>
  </Table1>
  <Table1>
    <ID>3</ID>
    <Name>Peter</Name>
  </Table1>
  <Table1>
    <ID>4</ID>
    <Name>Russ</Name>
  </Table1>
</NewDataSet> 
```

如何识别每一行？我可以更改每一行的节点吗？我是说标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:37:05.890

如果您询问如何获取行以外的标记名称`Table1`，`NewDataSet`请尝试设置数据集和表的名称：

```
ds.DataSetName = "People";
dt.TableName = "Person"; 
```

# php - 在php中创建目录

> ID：15628305
> 
> 赞同：2
> 
> 时间：2013-03-26T02:28:36.537
> 
> 标签：php, tableofcontents

我希望在 php 中创建一个非常简单、非常基本的嵌套目录，它可以获取所有 h1-6 并适当地缩进。这意味着如果我有类似的东西：

```
<h1>content</h1>
<h2>more content</h2> 
```

我应该得到：

```
content
    more content. 
```

我知道创建缩进的是css，这很好，但是如何创建一个目录，其中包含指向页面内容的工作链接？

**显然**很难掌握我的要求......

我要求一个读取 html 文档并提取所有 h1-6 并制作目录的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-26T02:57:08.727

为此，您只需在 HTML 代码中搜索标签。

我写了两个函数（PHP 5.4.x）。

第一个返回一个数组，其中包含目录的数据。数据只是它自己的标题、标签的 id（如果你想使用锚点）和内容的子表。

```
function get_headlines($html, $depth = 1)
{
    if($depth > 7)
        return [];

    $headlines = explode('<h' . $depth, $html);

    unset($headlines[0]);       // contains only text before the first headline

    if(count($headlines) == 0)
        return [];

    $toc = [];      // will contain the (sub-) toc

    foreach($headlines as $headline)
    {
        list($hl_info, $temp) = explode('>', $headline, 2);
        // $hl_info contains attributes of <hi ... > like the id.
        list($hl_text, $sub_content) = explode('</h' . $depth . '>', $temp, 2);
        // $hl contains the headline
        // $sub_content contains maybe other <hi>-tags
        $id = '';
        if(strlen($hl_info) > 0 && ($id_tag_pos = stripos($hl_info,'id')) !== false)
        {
            $id_start_pos = stripos($hl_info, '"', $id_tag_pos);
            $id_end_pos = stripos($hl_info, '"', $id_start_pos);
            $id = substr($hl_info, $id_start_pos, $id_end_pos-$id_start_pos);
        }

        $toc[] = [  'id' => $id,
                    'text' => $hl_text,
                    'sub_toc' => get_headlines($sub_content, $depth + 1)
                ];

    }

    return $toc;
} 
```

第二个返回一个字符串，它用 HTML 格式化 toc。

```
function print_toc($toc, $link_to_htmlpage = '', $depth = 1)
{
    if(count($toc) == 0)
        return '';

    $toc_str = '';

    if($depth == 1)
        $toc_str .= '<h1>Table of Content</h1>';

    foreach($toc as $headline)
    {
        $toc_str .= '<p class="headline' . $depth . '">';
        if($headline['id'] != '')
            $toc_str .= '<a href="' . $link_to_htmlpage . '#' . $headline['id'] . '">';

        $toc_str .= $headline['text'];
        $toc_str .= ($headline['id'] != '') ? '</a>' : '';
        $toc_str .= '</p>';

        $toc_str .= print_toc($headline['sub_toc'], $link_to_htmlpage, $depth+1);
    }

    return $toc_str;
} 
```

这两个功能都远非完美，但它们在我的测试中运行良好。随意改进它们。

注意：`get_headlines`不是解析器，因此它不适用于损坏的 HTML 代码，只会崩溃。它也只适用于小写`<hi>`标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-10-10T11:09:40.947

我使用了这个包，它使用起来非常简单直接。

[https://github.com/caseyamcl/toc](https://github.com/caseyamcl/toc)

通过 Composer 安装，在您的 composer.json 文件中包含以下内容：

```
{
    "require": {
        "caseyamcl/toc": "^3.0",
    }
} 
```

或者，将 src 文件夹放入您的应用程序并使用 PSR-4 自动加载器来包含文件。

用法 这个包包含两个主要的类：

TOC\MarkupFixer：将 id 锚属性添加到还没有任何 H1...H6 标记（您可以指定在运行时使用哪些标头标记级别） TOC\TocGenerator：从 HTML 标记生成目录基本示例：

```
$myHtmlContent = <<<END
    <h1>This is a header tag with no anchor id</h1>
    <p>Lorum ipsum doler sit amet</p>
    <h2 id='foo'>This is a header tag with an anchor id</h2>
    <p>Stuff here</p>
    <h3 id='bar'>This is a header tag with an anchor id</h3>
END;

$markupFixer  = new TOC\MarkupFixer();
$tocGenerator = new TOC\TocGenerator();

// This ensures that all header tags have `id` attributes so they can be used as anchor links
$htmlOut  = "<div class='content'>" . $markupFixer->fix($myHtmlContent) . "</div>";

//This generates the Table of Contents in HTML
$htmlOut .= "<div class='toc'>" . $tocGenerator->getHtmlMenu($myHtmlContent) . "</div>";

 echo $htmlOut; 
```

这会产生以下输出：

```
<div class='content'>
    <h1 id="this-is-a-header-tag-with-no-anchor-id">This is a header tag with no anchor id</h1>
    <p>Lorum ipsum doler sit amet</p>
    <h2 id="foo">This is a header tag with an anchor id</h2>
    <p>Stuff here</p>
    <h3 id="bar">This is a header tag with an anchor id</h3>
</div>
<div class='toc'>
    <ul>
        <li class="first last">
        <span></span>
            <ul class="menu_level_1">
                <li class="first last">
                    <a href="#foo">This is a header tag with an anchor id</a>
                    <ul class="menu_level_2">
                        <li class="first last">
                            <a href="#bar">This is a header tag with an anchor id</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-11-25T11:20:12.350

此函数仅针对 h2 标签返回带有附加目录的字符串。100% 测试代码。

```
函数目录（$str）{

        $html = preg_replace('/]+\>/i', '$0在本文中', $str, 1); // 内容中第一张图片之后的目录

        $doc = 新的 DOMDocument();
        $doc->loadHTML($html);

        // 创建文档片段
        $frag = $doc->createDocumentFragment();
        // 创建初始列表
        $frag->appendChild($doc->createElement('ul'));
        $head = &$frag->firstChild;
        $xpath = 新 DOMXPath($doc);
        $最后 = 1;

        // 获取所有 H1, H2, ..., H6 元素
        $tagChek = 数组（）；
        foreach ($xpath->query('//*[self::h2]') as $headline) {
            // 获取当前标题的级别
            sscanf($headline->tagName, 'h%u', $curr);
            array_push($tagChek,$headline->tagName);

            // 必要时移动头部参考
            if ($curr parentNode->parentNode;
                }
            } elseif ($curr > $last && $head->lastChild) {
                // 向下移动并创建新列表
                for ($i=$last; $ilastChild->appendChild($doc->createElement('ul'));
                    $head = &$head->lastChild->lastChild;
                }
            }
            $last = $curr;

            // 添加列表项
            $li = $doc->createElement('li');
            $head->appendChild($li);
            $a = $doc->createElement('a', $headline->textContent);
            $head->lastChild->appendChild($a);

            // 构建标识
            $levels = 数组（）；
            $tmp = &$头;
            // 向上遍历子树到该子树的分片根节点
            而 (!is_null($tmp) && $tmp != $frag) {
                $levels[] = $tmp->childNodes->length;
                $tmp = &$tmp->parentNode->parentNode;
            }
            $id = 'sect'.implode('.', array_reverse($levels));
            // 设置目的地
            $a->setAttribute('href', '#'.$id);
            // 给标题添加锚点
            $a = $doc->createElement('a');
            $a->setAttribute('name', $id);
            $a->setAttribute('id', $id);
            $headline->insertBefore($a, $headline->firstChild);
        }
       // 回声 $frag;
        // 将片段附加到文档
        if(!empty($tagChek)):
            $doc->getElementsByTagName('section')->item(0)->appendChild($frag);
            返回 $doc->saveHTML();
        别的：
            返回 $str;    
        万一;

    }

```

# oracle - 如何创建 Oracle 函数索引？

> ID：15628313
> 
> 赞同：0
> 
> 时间：2013-03-26T02:29:31.167
> 
> 标签：oracle, indexing

只是一个简单的问题，如何在此查询上创建基于函数的索引。

```
select * from mytable A where :var1 like A.fld1 || '%'; 
```

mytable 在 fld1 上有一个正常的、非唯一的索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:40:10.213

您不会在查询上创建基于函数的索引，而是在函数上创建它。你所拥有的是一个运算符，而不是一个函数。

您要做的是找到表中 fld1 与 var1 开头的字符匹配的所有行，并且可以帮助您的索引只是 fld1 上的一个。您可能希望的最佳计划是快速全索引扫描，因为这实际上不适用于范围扫描。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:02:56.257

好吧，您*可以*在查询中使用的表达式上创建基于函数的索引：

```
create index myindex on mytable (fld1 || '%'); 
```

但是，它不太可能对这个查询有任何好处。我想说你在 fld1 上的普通非唯一索引将与基于函数的索引一样工作。

# android - 三星 Galaxy S3 w Android 版本 4.1.2 将不接受输入

> ID：15628315
> 
> 赞同：0
> 
> 时间：2013-03-26T02:29:51.360
> 
> 标签：android

两名测试人员报告说他们无法在我的移动应用程序 (android) 的文本框中输入数据。他们都使用三星 Galaxy S3。该应用程序是一个 html/css/jquery 本机应用程序。它使用 cordova-1.9.0.jar 和 android-support-v4.jar

我能够在 android 模拟器中重现该问题。有关其规格，请参见下面的附图。安卓版本4.1.2 ARM处理器；

当我点击输入框时，框显示它有焦点，键盘弹出，当我点击一个字母或数字时，按键应该会亮起；但输入框中没有输入任何字符。

这是输入框的代码

```
 <input name="boxZipcode" placeholder="Enter Zipcode" data-theme="b" 
```

id="boxZipcode" type="tel" />

无论是纯数字键盘还是全键盘，我都会得到相同的非结果。

我需要更改什么才能使输入框接受输入？谢谢。

r![在此处输入图像描述](../Images/3d182fa1d4b8121ab800b71eed524e7e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:35:03.317

解决方法是寻找以下 CSS 样式

```
 -webkit-user-select: none; 
```

只需删除此行，您就可以愉快地输入输入元素！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:51:28.713

当我从科尔多瓦 1.9.0 升级到科尔多瓦 2.5.0 时，问题就消失了

android 家伙在[这个问题](https://code.google.com/p/android/issues/detail?id=17508)上的评论（#13）在android 问题上说类似的问题“涉及 GC 和弱引用的竞争条件”

另外，仅供参考，我在 LogCat 中有警告，表明存在竞争条件，例如。

跳过了 31 帧！应用程序可能在其主线程上做了太多工作。

和

IInputConnectionWrapper beginBatchEdit 在非活动的 InputConnection

# python - c-extension Python内存泄漏，为什么？

> ID：15628316
> 
> 赞同：0
> 
> 时间：2013-03-26T02:29:53.587
> 
> 标签：python, c

最近我有一个由 C 编写的项目，并在 中扩展 Python，我在 while 循环中调用 Python，结果是内存增长永无止境。

这是代码：

```
main
{
   while True {
      if( SUCCESS != PyInit())
      {
          return -1;
      }
      PyDone();
      usleep(1000);
      } 
}

int PyInit(void)
{
         Py_Initialize(); 
         if(!Py_IsInitialized())
         {
              printf("PyInit: Python Init fail!\n");
              return FAILURE;
         }
         else
         {
              printf( "Python Init succ!\n");
              return SUCCESS;

         }

}

void PyDone(void)
{
         Py_Finalize();
} 
```

最后我的英语很差，希望我已经清楚地描述了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:25:57.153

```
for (;;) {
    PyInitialize();
    if (PyIsInitialized()) {
        PyFinalize();
        usleep(1000);
    }
} 
```

如果您的代码与此类似，并且似乎存在内存泄漏，则 python 实现有问题，因为 PyFinalize 据称“释放了 Python 解释器分配的所有内存”。python 网站指出，关于 PyFinalize，“Python 解释器分配的少量内存可能不会被释放（如果发现泄漏，请报告）。” 通过 python 错误跟踪器搜索[泄漏](http://bugs.python.org/issue?%40columns=id%2Cactivity%2Ctitle%2Ccreator%2Cassignee%2Cstatus%2Ctype&%40sort=-activity&%40filter=status&%40action=searchid&ignore=file%3Acontent&%40search_text=leak&submit=search&status=-1%2C1%2C2%2C3)表明尚未报告此问题，因此我建议将此错误报告给他们的[bugtracker](http://bugs.python.org/)。

# printing - CUPS 打印机记帐如何工作？

> ID：15628319
> 
> 赞同：1
> 
> 时间：2013-03-26T02:30:03.463
> 
> 标签：printing, accounting, cups

关于 cups，来自《UNIX 和 Linux 系统管理》一书：

> 如果其他人添加了一台打印机并且网络上运行的一个或多个 CUPS 服务器知道它，您的 CUPS 服务器就会知道它的存在。您不必将打印机显式添加到本地库存或将 PPD 复制到您的机器。这是魔法。

因此，为了让同一网络 (192.168.0.0/24) 中的每个人都了解我配置的打印机，我需要以下配置：

```
<Location />
Order Deny,Allow
Deny From All
Allow From 127.0.0.1
Allow From 192.168.0.0
</Location>

BrowseAddress 192.168.0.255:631 
```

并实施打印机记帐：

```
lpadmin -p printer -o job-quota-period=604800 -o job-page-limit=100 
```

在此示例中，理论上，网络 192.168.0.0/24 上的任何用户每周可以打印 100 页。但我的问题是，我找不到任何地方 CUPS 如何跟踪用户的打印机使用情况。我无法理解 CUPS 如何在没有任何身份验证机制的情况下实现打印机记帐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-20T04:43:03.430

记帐信息保存在 /var/log/cups/page_log 中。请参阅[https://www.cups.org/documentation.php/doc-1.5/ref-page_log.html](https://www.cups.org/documentation.php/doc-1.5/ref-page_log.html)。

至于身份验证，我相信 CUPS 只是相信您不会允许从对用户 ID 撒谎的机器上进行打印。见 [https://www.cups.org/documentation.php/doc-1.5/accounting.html](https://www.cups.org/documentation.php/doc-1.5/accounting.html)

不是很安全，但也许这是最好的。并非所有东西都必须像诺克斯堡那样被封锁。

# mysql - 已编辑寻找 SQL 改进

> ID：15628321
> 
> 赞同：1
> 
> 时间：2013-03-26T02:30:15.997
> 
> 标签：mysql

通过引用[MySQL 中的协作过滤？](https://stackoverflow.com/questions/2440826/collaborative-filtering-in-mysql)，我创建了以下内容：

```
CREATE TABLE `ub` (
  `user_id` int(11) NOT NULL,
  `book_id` varchar(10) NOT NULL,
  `rate` int(11) NOT NULL,
  PRIMARY KEY (`user_id`,`book_id`),
  UNIQUE KEY `book_id` (`book_id`,`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

insert into ub values (1, 'A', '8'), (1, 'B', '7'), (1, 'C', '10');
insert into ub values (2, 'A', '8'), (2, 'B', '7'), (2, 'C', '10'), (2,'D', '8'), (2,'X', '7');
insert into ub values (3, 'X', '10'), (3, 'Y', '8'), (3, 'C', '10'), (3,'Z', '10');
insert into ub values (4, 'W', '8'), (4, 'Q', '8'), (4, 'C', '10'), (4,'Z', '8'); 
```

然后，我可以得到下表并了解它是如何工作的。

```
create temporary table ub_rank as 
select similar.user_id,count(*) rank
from ub target 
join ub similar on target.book_id= similar.book_id and target.user_id != similar.user_id and target.rate= similar.rate
where target.user_id = 1
group by similar.user_id;

select * from ub_rank;

+---------+------+
| user_id | rank |
+---------+------+
|       2 |    3 |
|       3 |    1 |
|       4 |    1 |
+---------+------+ 
```

但是，在下面的代码之后，我开始感到困惑。

```
select similar.rate, similar.book_id, sum(ub_rank.rank) total_rank
from ub_rank
join ub similar on ub_rank.user_id = similar.user_id 
left join ub target on target.user_id = 1 and target.book_id = similar.book_id and target.Rate= similar.Rate 
where target.book_id is null
group by similar.book_id
order by total_rank desc, rate desc;

+---------+------------+
| book_id | total_rank |
+---------+------------+
| X       |          4 |
| D       |          3 |
| Z       |          2 |
| Y       |          1 |
| Q       |          1 |
| W       |          1 |
+---------+------------+ 
```

（已解决）首先，我想知道 X 和 D 的总排名为什么不一样（即 3）。不是为用户B计算与用户A相同的书籍数量吗？所以，D和X应该是3？！

（已解决）其次，我应该如何修改诸如率之类的代码可以作为排名的元素。也就是说，如果两本书的排名相同，那么分数较高的将排名较高。

谢谢

**已编辑**

(1, 'A', '8'), (1, 'B', '7'), (1, 'C', '10');

(2, 'A', '8'), (2, 'B', '7'), (2, 'C', '10'), (2,'D', '8'), (2 ,'X','7');

我想做的是，假设用户 1 和 2 具有相似的行为（在匹配评级之前选择 A、B、C），因此我会向用户 A 推荐 D ，因为它具有更高的比率。

似乎上面的代码不这样做？因为，排名第一的是X。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:58:20.333

> 首先，我想知道 X 和 D 的总排名为什么不一样（即 3）。不是为用户B计算与用户A相同的书籍数量吗？所以，D和X应该是3？！

`user_id`X 在第二个和第三个的当前具有更大的排名`user_id`，查询获取排名的总和，在这种情况下`3 (user_id = 2) + 1 (user_id = 3)`

> 其次，我应该如何修改代码，例如率可以作为排名的元素。也就是说，如果两本书的排名相同，那么分数较高的将排名较高。

使用相同的查询并在排名之后按速率降序对其进行排序，例如

```
select similar.book_id, sum(ub_rank.rank) total_rank
from ub_rank
join ub similar on ub_rank.user_id = similar.user_id 
left join ub target on target.user_id = 1 and target.book_id = similar.book_id and target.Rate= similar.Rate 
where target.book_id is null
group by similar.book_id
order by total_rank desc, rate desc; 
```

**更新：**根据您的要求，您需要获取与其他用户最匹配且价格最高的书籍列表，请尝试以下查询

```
SELECT
    temp.book_id,
    temp.rate as book_rate
FROM (
        SELECT 
            similar.user_id, 
            COUNT( similar.book_id ) as book_match_count
        FROM 
            ub target
            JOIN ub similar ON  target.book_id= similar.book_id AND target.user_id != similar.user_id
        WHERE 
            target.user_id = 1
        GROUP BY 
            similar.user_id
    ) AS users_with_book_matches
JOIN ub temp ON ( temp.user_id =users_with_book_matches.user_id AND temp.book_id NOT IN ( SELECT book_id FROM ub WHERE ub.user_id = 1 ) ) 
GROUP BY
    temp.book_id
ORDER BY 
    users_with_book_matches.book_match_count DESC,
    temp.rate DESC
limit 5 
```

***上面的查询获取前 5 个最接近的书籍匹配***

这是[**SqlFiddle**](http://sqlfiddle.com/#!2/ab513/3)，请确保更改`user_id`at 2 个位置，希望这能满足您的目的

# javascript - 在具有类名的 div 中插入输入

> ID：15628327
> 
> 赞同：0
> 
> 时间：2013-03-26T02:30:44.440
> 
> 标签：javascript, jquery, append

我想向这个 div 添加一个 HTML 输入：

```
<div class="sss" style="padding-top:2px"> 
<center> 
 <input value="test1" name="name1" type="submit" >  
<input value="test2" name="name2" type="submit">
  </center> 
</div> 
```

我用这个：

```
$(".sss").append('<input  onclick =loc(); value="test3" >'); 
```

它正在工作，但我想在`<center>`标签之间添加它。我使用了此代码，但它不起作用并将其添加到`</center>`标签之后。

```
$(".sss:first").append('<input  onclick =loc(); value="test3" >'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:31:58.050

```
$(".sss center").append('<input  onclick =loc(); value="test3" >'); 
```

* * *

把它放在输入标签之间

```
$(".sss center :first-child").after('<input  onclick =loc(); value="test3" >');
// or $(".sss center :first").after('<input  onclick =loc(); value="test3" >');
// or $(".sss center :last-child").before('<input  onclick =loc(); value="test3" >'); 
```

# phpmailer - phpmailer收到电子邮件但没有附件

> ID：15628329
> 
> 赞同：0
> 
> 时间：2013-03-26T02:30:56.263
> 
> 标签：phpmailer, email-attachments

我正在使用以下脚本来允许用户上传图像并将其通过电子邮件发送给我。我确实收到了电子邮件，但附件未包含在电子邮件中。它还将发件人电子邮件显示为 root 用户，而不是用户的电子邮件地址。请帮忙。

```
 <?php
ob_start();
require("class.phpmailer.php");

$salutation        = $_POST['salutation'];
    $firstname         = $_POST['firstname'];
    $lastname          = $_POST['lastname'];
    $email             = $_POST['email'];
    $photo             = $_FILES['photo'];

isset($_POST['submit']);
$active_keys = array();
foreach($_FILES[$photo]['name'] as $key => $filename)
{
if(!empty($filename))
{
    $active_keys[] = $key;
}    }

foreach($active_keys as $key)
{    switch(exif_imagetype($_FILES[$photo]['tmp_name'][$key])) {
case IMAGETYPE_JPEG:
case IMAGETYPE_PNG:
    break;
default:
    echo "{";
    echo        "error: 'This is no photo..'\n";
    echo "}";
    exit(0);
} }
$message = "Photo submitted by: $salutation $firstname $lastname.  <br>Comments: $comments.<br>terms:$terms.";

$mail = new PHPMailer();

$mail->From     = ($email);
$mail->AddAddress('info@domain.com');

$mail->Subject  = "Submitted Photos";
$mail->Body     = $message;
$mail->WordWrap = 50;

foreach($FILES['photo']['tmp_name'] as $photo) {
if(!empty($photo)) {
    $mail->AddAttachment($photo);
}}

$mail->Send();

header("Location: thankyou.php");
   exit();     

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:36:16.990

改变

```
foreach($FILES['photo']['tmp_name'] as $photo) { 
```

至

```
foreach($_FILES['photo']['tmp_name'] as $photo) 
```

# ruby-on-rails - 从视图中的模型方法返回多重值

> ID：15628330
> 
> 赞同：0
> 
> 时间：2013-03-26T02:30:59.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的模型中有以下方法：

```
 def self.set_bad_recommedation_size(rating_set)
    bad = Rating.where(rating_set: rating_set).where(label: 'Bad').count
    total = Rating.where(rating_set: rating_set).count
    percentage_bad = (bad.to_f/total.to_f * 100)
    return bad, total, percentage_bad
  end 
```

在我看来，如何调用变量 bad、total、percentage_bad。我想要的是：

```
<%= "#{Model.set_bad_recommedation_size(rating_set).bad}/#{Model.set_bad_recommedation_size(rating_set).total"%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:33:47.560

你最好这样做：

```
<% bad, total, percentage_bad = Model.set_bad_recommedation_size(rating_set) %>
<%= "#{bad}/#{total}" %> 
```

这样你就不会多次调用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:41:56.163

我会添加一个中间助手，以便您的视图更好地阅读

```
<%= bad_recommendation_ratio(result_set) %> 
```

应用程序.helper

```
def bad_recommendation_ratio(result_set)
  bad, total = Model.set_bad_recommedation_size(rating_set)
  "#{bad}/#{total}"
end 
```

# winapi - 获取函数内存地址

> ID：15628331
> 
> 赞同：-3
> 
> 时间：2013-03-26T02:31:02.160
> 
> 标签：winapi, memory

我有 foo.exe，它使用了一些 Windows API 函数。我想获取这些函数的内存地址，我该怎么做？我可以使用任何可用的软件吗？

请注意，我正在寻找非编程方式来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T03:52:22.580

> 我正在寻找非编程方式来做到这一点。

要么这是不可能的，要么没有任何意义。可能两者兼而有之。

您会看到，为了调用 Windows API 函数之一，程序必须从包含感兴趣函数的 DLL 中导入它。这要求将 DLL 加载到该程序进程的地址空间中。而且因为每个进程都有自己的地址空间，每个进程都有自己唯一的 DLL 实例（或副本）。这意味着 DLL 提供的函数的“内存地址”在每个进程中都是不同的。

以非编程方式检索这些信息是没有意义的。即使你*能*得到它，它对你也没有任何好处。

如果你编辑你的问题来解释你希望*完成*什么，我可能会提供更好的建议，而不是仅仅询问你已经确定的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T02:42:00.250

对于加载 DLL 的每个进程，导出函数的地址可能不同。该`GetProcAddress`功能可以告诉您它们对您的流程有什么作用。

# php - 将 Javascript 表单发布到 mysql

> ID：15628334
> 
> 赞同：0
> 
> 时间：2013-03-26T02:31:31.057
> 
> 标签：php, javascript, mysql, forms, invoice

我正在开发一个发票系统。我正在使用 javascript 根据需要添加行项目，但是当我单击提交时，添加的行项目没有发布。我认为这可能是 div 某处的问题，但我似乎无法找到它或让它工作。我正在发布我的代码以寻求帮助。谢谢。

这是我的表格。

```
<?php

include $_SERVER['DOCUMENT_ROOT']."/connect.php";
include $_SERVER['DOCUMENT_ROOT']."/includes/header.php";

$result = mysql_query("SELECT company, first, last FROM customer") or die (mysql_error());
?>

<script type="text/javascript">
var counter = 1;
     function addInput(div){
        xmlhttp=new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
         if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
          var newdiv = document.createElement('div');
          newdiv.innerHTML = " Entry " + (++counter) + " <br /><table><tr><td>Item: <select name='item[]'>" + xmlhttp.responseText + "</select></td><td>Qty: <input name='quantity[]' type='text' size='5' /></td></tr></table><br />";
         }
          document.getElementById(div).appendChild(newdiv);
     }

xmlhttp.open("GET", "dropdownquery.php", false);
xmlhttp.send();
}
</script>

<form id="createInvoice" method="post" action="docreateinvoice.php">
<table>

<tr><td>Customer</td><td><select name="company">
<?php while($row = mysql_fetch_array($result)) {
  echo "<option value=\"".$row['company']."\">".$row['company']." (".$row['first']." ".$row['last'].")</option>";
}
?>

</select></td></tr>
</table>

</div>
</div>

<div id="container">
<div class="content">

<div id="dynamicInput">
          Entry 1<br /><table><tr><td>Item: <select name="item[]"><?php $result = mysql_query("SELECT * FROM salesitem"); while($row = mysql_fetch_array($result)) { echo "<option value=\"".$row['name']."\">".$row['name']."</option>";} ?></select></td><td>Qty: <input name="quantity[]" type="text" size="5" /></td></tr></table><br />
     </div>
     <br /><input type="button" value="Add Line Item" onClick="addInput('dynamicInput');">

</div>
</div>

<div id="container">
<div class="content">

<input type="submit" name="submit" value="Create Invoice" />

</form>

<?php
include $_SERVER['DOCUMENT_ROOT']."/includes/footer.php";
?> 
```

下一段代码是 dropdownquery.php。这就是在 javascript 中获取下拉框数据的内容。非常感谢 @NickSlash 在 javascript 中解决这个问题。

```
<?php
include $_SERVER['DOCUMENT_ROOT']."/connect.php";
$result = mysql_query("SELECT * FROM salesitem");
while($row = mysql_fetch_array($result)) {
    echo "<option value=\"".$row['name']."\">".$row['name']."</option>";
}
?> 
```

最后，这是我发布到的 docreateinvoice.php。

```
<?php

include $_SERVER['DOCUMENT_ROOT']."/connect.php";

$company = mysql_real_escape_string($_POST['company']);

foreach($_POST['item'] as $i => $item)
{
  $item = mysql_real_escape_string($item);
  $quantity = mysql_real_escape_string($_POST['quantity'][$i]);

//mysql_query("INSERT INTO invoice (company, item, quantity) VALUES ('$company', '".$item."', '".$quantity."') ") or die(mysql_error());
print_r ($company);
print_r ($item);
print_r ($quantity);
}

//echo "<br><font color=\"green\"><b>Invoice added</b></font>";

?> 
```

您可能会注意到表单中的第一个条目不是 javascript。这确实发布了，只是没有从 javascript 函数生成的任何其他行项目。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:20:18.047

正如我在评论中所说，在使用 javascript 的表单中使用时，用于显示格式目的的 div 似乎会产生负面影响。

# java - 活动重新加载后，按钮自己被点击了吗？

> ID：15628339
> 
> 赞同：0
> 
> 时间：2013-03-26T02:32:19.547
> 
> 标签：java, android

从技术上讲，我的活动没有重新加载，我只在按钮的 setText 中重新加载一组术语。我将发布我的完整游戏课程，因为我不知道我的错误在哪里。我有一个游戏活动，有 16 个按钮，其中填充了来自 db 的随机术语。在相同的 xml 布局中 45 秒后，我调用 nextQuestion 方法并加载新的 16 个术语。我的问题是......在我的按钮中的第一组术语之后，就在加载新组之后，会自动单击一个随机按钮。我不知道为什么以及如何。下一组加载的术语也会发生同样的情况。有人可以找到问题所在吗？

我有两组按钮，2 个左和 2 个右。我数了 16 次点击，然后加载下一组术语。然后禁用单击的按钮，我再次在 nextQuestion 方法中启用它们。

```
public class Spojnice extends Activity implements View.OnClickListener{

        private int brojacIgara = 0;
        private int counter = 0;

        MyCount brojacVremena = new MyCount(35000, 1000);

    // labelForButton and tagForButton
       class MyStruct {
       public MyStruct (String lab, String t){
        label = lab;
        tag = t;
    }
       private String label;
       private String tag;
       }

       final OnClickListener clickListener = new OnClickListener() {

            private Button buttonClicked;
            private int brojacKlikova = 0;

            public void onClick(View v) {
                brojacKlikova++;
                if (brojacKlikova < 16) {

                Button button = (Button) v;
                button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0xFFCC99));

                if (buttonClicked == null) {
                    // first button is clicked
                    buttonClicked = button;
                } else {
                    // second button is clicked
                    if (buttonClicked.getTag().equals(button.getTag())) {
                        button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.setEnabled(false);
                        button.setEnabled(false);
                        counter = counter + 5;
                        score.setText("Poeni: " + counter);
                    } else {
                        buttonClicked.setEnabled(false);
                        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));
                        button.getBackground().clearColorFilter();
                    }
                    buttonClicked = null;
                }
                }else{
                brojacKlikova = 0;
                brojacVremena.cancel();
                mHandler.postDelayed(mLaunchTask,2200);
         }
            }
     };

    LinkedList<Long> mAnsweredQuestions = new LinkedList<Long>();

    private String generateWhereClause(){
        StringBuilder result = new StringBuilder();
        for (Long l : mAnsweredQuestions){
            result.append(" AND _ID <> " + l);
        }
        return result.toString();
    }
    private TextView pitanje, score, vreme;

    Button a1,a2,a3,a4,a5,a6,a7,a8,b1,b2,b3,b4,b5,b6,b7,b8,izlaz;
    MediaPlayer buttonBack;
    public boolean music;

    Runnable mLaunchTask = new Runnable() {
        public void run() {
            nextQuestion();
            brojacVremena.start();
        }
     };
    Runnable mLaunchTaskFinish = new Runnable() {
         public void run() {
            finish();
         }
      };
    Handler mHandler = new Handler();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);   //full screen
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.spojnice);

        Typeface pitanjeType = Typeface.createFromAsset(getAssets(), "myriad.ttf");
        Typeface dugmad = Typeface.createFromAsset(getAssets(), "Bebas.ttf");
        buttonBack = MediaPlayer.create(this, R.raw.button31);
        a1 = (Button) findViewById(R.id.bA1);
        a2 = (Button) findViewById(R.id.bA2);
        a3 = (Button) findViewById(R.id.bA3);
        a4 = (Button) findViewById(R.id.bA4);
        a5 = (Button) findViewById(R.id.bA5);
        a6 = (Button) findViewById(R.id.bA6);
        a7 = (Button) findViewById(R.id.bA7);
        a8 = (Button) findViewById(R.id.bA8);
        b1 = (Button) findViewById(R.id.bB1);
        b2 = (Button) findViewById(R.id.bB2);
        b3 = (Button) findViewById(R.id.bB3);
        b4 = (Button) findViewById(R.id.bB4);
        b5 = (Button) findViewById(R.id.bB5);
        b6 = (Button) findViewById(R.id.bB6);
        b7 = (Button) findViewById(R.id.bB7);
        b8 = (Button) findViewById(R.id.bB8);
        izlaz = (Button) findViewById(R.id.bIzlaz);
        izlaz.setTypeface(dugmad);
        score = (TextView) findViewById(R.id.tvPoeni);
        score.setTypeface(dugmad);
        vreme = (TextView) findViewById(R.id.tvVreme);
        vreme.setTypeface(dugmad);
        pitanje = (TextView) findViewById(R.id.tvPitanje);
        pitanje.setTypeface(pitanjeType);

        SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        music = getPrefs.getBoolean("checkbox", true);

        nextQuestion();
        brojacVremena.start(); 

        }

        public class MyCount extends CountDownTimer {

            public MyCount(long millisInFuture, long countDownInterval) {
                super(millisInFuture, countDownInterval);
            }

            @Override
            public void onFinish() {
                mHandler.postDelayed(mLaunchTask,500);

            }

            @Override
            public void onTick(long millisUntilFinished) {
                vreme.setText("" + millisUntilFinished / 1000);

            }

        }

    public void nextQuestion() {

        brojacIgara = brojacIgara + 1;

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{  

            mDbHelper.open(); 

            Cursor c = mDbHelper.getTestData(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            ArrayList<MyStruct> labelsA = new ArrayList<MyStruct>();
            ArrayList<MyStruct> labelsB = new ArrayList<MyStruct>();

            labelsA.add(new MyStruct(c.getString(2), "1")); 
            labelsB.add(new MyStruct(c.getString(3), "1"));
            labelsA.add(new MyStruct(c.getString(4), "2"));
            labelsB.add(new MyStruct(c.getString(5), "2"));
            labelsA.add(new MyStruct(c.getString(6), "3"));
            labelsB.add(new MyStruct(c.getString(7), "3"));
            labelsA.add(new MyStruct(c.getString(8), "4"));
            labelsB.add(new MyStruct(c.getString(9), "4"));
            labelsA.add(new MyStruct(c.getString(10), "5"));
            labelsB.add(new MyStruct(c.getString(11), "5"));
            labelsA.add(new MyStruct(c.getString(12), "6"));
            labelsB.add(new MyStruct(c.getString(13), "6"));
            labelsA.add(new MyStruct(c.getString(14), "7"));
            labelsB.add(new MyStruct(c.getString(15), "7"));
            labelsA.add(new MyStruct(c.getString(16), "8"));
            labelsB.add(new MyStruct(c.getString(17), "8"));

            Collections.shuffle(labelsA);
            Collections.shuffle(labelsB);

            if (brojacIgara < 4){

            pitanje.setText(c.getString(1));

            a1.setText(labelsA.get(0).label);
            a1.setTag(labelsA.get(0).tag);
            a1.setOnClickListener(clickListener);
            a1.getBackground().clearColorFilter();
            a1.setEnabled(true);
            b1.setText(labelsB.get(0).label);
            b1.setTag(labelsB.get(0).tag);
            b1.setOnClickListener(clickListener);
            b1.getBackground().clearColorFilter();
            b1.setEnabled(true);
            a2.setText(labelsA.get(1).label);
            a2.setTag(labelsA.get(1).tag);
            a2.setOnClickListener(clickListener);
            a2.getBackground().clearColorFilter();
            a2.setEnabled(true);
            b2.setText(labelsB.get(1).label);
            b2.setTag(labelsB.get(1).tag);
            b2.setOnClickListener(clickListener);
            b2.getBackground().clearColorFilter();
            b2.setEnabled(true);
            a3.setText(labelsA.get(2).label);
            a3.setTag(labelsA.get(2).tag);
            a3.setOnClickListener(clickListener);
            a3.getBackground().clearColorFilter();
            a3.setEnabled(true);
            b3.setText(labelsB.get(2).label);
            b3.setTag(labelsB.get(2).tag);
            b3.setOnClickListener(clickListener);
            b3.getBackground().clearColorFilter();
            b3.setEnabled(true);
            a4.setText(labelsA.get(3).label);
            a4.setTag(labelsA.get(3).tag);
            a4.setOnClickListener(clickListener);
            a4.getBackground().clearColorFilter();
            a4.setEnabled(true);
            b4.setText(labelsB.get(3).label);
            b4.setTag(labelsB.get(3).tag);
            b4.setOnClickListener(clickListener);
            b4.getBackground().clearColorFilter();
            b4.setEnabled(true);
            a5.setText(labelsA.get(4).label);
            a5.setTag(labelsA.get(4).tag);
            a5.setOnClickListener(clickListener);
            a5.getBackground().clearColorFilter();
            a5.setEnabled(true);
            b5.setText(labelsB.get(4).label);
            b5.setTag(labelsB.get(4).tag);
            b5.setOnClickListener(clickListener);
            b5.getBackground().clearColorFilter();
            b5.setEnabled(true);
            a6.setText(labelsA.get(5).label);
            a6.setTag(labelsA.get(5).tag);
            a6.setOnClickListener(clickListener);
            a6.getBackground().clearColorFilter();
            a6.setEnabled(true);
            b6.setText(labelsB.get(5).label);
            b6.setTag(labelsB.get(5).tag);
            b6.setOnClickListener(clickListener);
            b6.getBackground().clearColorFilter();
            b6.setEnabled(true);
            a7.setText(labelsA.get(6).label);
            a7.setTag(labelsA.get(6).tag);
            a7.setOnClickListener(clickListener);
            a7.getBackground().clearColorFilter();
            a7.setEnabled(true);
            b7.setText(labelsB.get(6).label);
            b7.setTag(labelsB.get(6).tag);
            b7.setOnClickListener(clickListener);
            b7.getBackground().clearColorFilter();
            b7.setEnabled(true);
            a8.setText(labelsA.get(7).label);
            a8.setTag(labelsA.get(7).tag);
            a8.setOnClickListener(clickListener);
            a8.getBackground().clearColorFilter();
            a8.setEnabled(true);
            b8.setText(labelsB.get(7).label);
            b8.setTag(labelsB.get(7).tag);
            b8.setOnClickListener(clickListener);
            b8.getBackground().clearColorFilter();
            b8.setEnabled(true);
            }else{
                brojacVremena.cancel();
                Intent i = new Intent(getApplicationContext(), Rezultat.class);
                i.putExtra("noviRezultat", counter);
                startActivity(i);
                mHandler.postDelayed(mLaunchTaskFinish,4000);
                SwarmLeaderboard.submitScore(7427, counter);
            }

        }

        finally{
            mDbHelper.close();
        }
        izlaz.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                if(music == true){
                    buttonBack.start();
                        }
                finish();   
            }
        });
    }
    public void onClick(View arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    protected void onStop() {
        super.onStop();
        brojacVremena.cancel();
    }

} 
```

# android - 调用活动的操作栏按钮

> ID：15628340
> 
> 赞同：0
> 
> 时间：2013-03-26T02:32:24.397
> 
> 标签：android

主屏幕上的图像是调用活动的按钮操作栏上的按钮是否可以调用与主屏幕上的按钮相同的活动..我应该制作什么样的按钮才能调用活动....我在菜单布局中声明了操作栏，如果它有助于确定我如何制作操作栏..问题是要使用的按钮，因此它可以调用活动..

这是我的菜单 xml 文件

```
<item 
    android:id="@+id/open" 
    android:showAsAction="ifRoom|withText" 
    android:title="open" 
    android:icon="@drawable/ic_action_open" 
    android:menuCategory="secondary"></item>
<item 
    android:id="@+id/save" 
    android:showAsAction="ifRoom|withText" 
    android:title="Save" 
    android:icon="@drawable/ic_action_save"></item>
<item 
    android:id="@+id/close" 
    android:showAsAction="ifRoom|withText" 
    android:title="Close" 
    android:icon="@drawable/ic_action_close"></item>
<item 
    android:id="@+id/history" 
    android:showAsAction="ifRoom|withText" 
    android:title="History" 
    android:icon="@drawable/ic_action_history"></item>
<item 
    android:id="@+id/settings" 
    android:showAsAction="ifRoom|withText" 
    android:title="Settings" 
    android:icon="@drawable/ic_action_settings"></item>

</menu> 
```

我的 .java 文件

```
package name.brucephillips.actionbarexample;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.MenuItem;
import android.view.View;

public class ActionBarExampleActivity extends Activity {
/** Called when the activity is first created. */
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    }
    public void sample (View v)
      {
    Intent intent = new Intent(getApplicationContext(), Sample.class); 
    startActivity(intent);
    }
    public void sample1(View v)
    {
    Intent intent = new Intent(getApplicationContext(), Sample1.class); 
    startActivity(intent);
    }
     public void sample2(View v)
    {
    Intent intent = new Intent(getApplicationContext(), Sample2.class); 
    startActivity(intent);
    }
    public void sample3(View v) {
    Intent intent = new Intent(getApplicationContext(), Sample3.class);
    startActivity(intent);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
       switch (item.getItemId()) {
            case R.id.sample:
            startActivity(new Intent(getApplicationContext(), Sample.class));
            break;
            case R.id.sample1:
            startActivity(new Intent(getApplicationContext(), Sample1.class));
            break;
            case R.id.sample2:
            startActivity(new Intent(getApplicationContext(), Sample2.class));
            break;
            case R.id.sample3:
            startActivity(new Intent(getApplicationContext(), Sample3.class));
            break;
    }
        return super.onOptionsItemSelected(item);
    }
} 
```

这是我的主要 xml

```
android:orientation="vertical">

 <ImageView
 android:id="@+id/sample"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:onClick="sample"
 android:src="@drawable/ic_action_close" />

<ImageView
android:id="@+id/sample1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:onClick="sample1"`enter code here`
android:src="@drawable/ic_action_history" />

<ImageView
android:id="@+id/sample2"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:onClick="sample2"
android:src="@drawable/ic_action_open" />

<ImageButton
android:id="@+id/sample3"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:onClick="sample3"
android:src="@drawable/ic_action_save" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-27T23:43:55.990

解决此问题的另一种方法

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle action bar item clicks here. The action bar will
        // automatically handle clicks on the Home/Up button, so long
        // as you specify a parent activity in AndroidManifest.xml.
        int id = item.getItemId();
        if (id == R.id.action_settings) {
            startActivity(new Intent(getApplicationContext(),Preferencia.class));
            return true;
        }
        return super.onOptionsItemSelected(item);
    } 
```

您可以在不实现 onClickListener 的情况下调用新活动 onOptionItem...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:04:40.370

这是我最好的例子，玩得开心！

```
public class MainActivity extends Activity implements OnClickListener {
ImageButton imageButton;
ImageView imageView1;
ImageView imageView2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    imageButton = (ImageButton) findViewById(R.id.imageButton1);
    imageView1 = (ImageView) findViewById(R.id.imageView1);
    imageView2 = (ImageView) findViewById(R.id.imageView2);

    imageButton.setOnClickListener(this);
    imageView1.setOnClickListener(this);
    imageView2.setOnClickListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.item1:
        onClick(imageButton);
        break;
    case R.id.item2:
        onClick(imageView1);
        break;
    case R.id.item3:
        onClick(imageView2);
        break;
    }
    return super.onOptionsItemSelected(item);
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.imageButton1:
         startActivity(new Intent(getApplicationContext(), open.class));
        break;
    case R.id.imageView1:

         startActivity(new Intent(getApplicationContext(), close.class));
        break;
    case R.id.imageView2:

         startActivity(new Intent(getApplicationContext(), save.class));

        break;

    }
}

} 
```

# c# - 带有动态变量的代码契约

> ID：15628343
> 
> 赞同：2
> 
> 时间：2013-03-26T02:32:39.590
> 
> 标签：c#, .net

示例代码：

```
 private dynamic tableAdapter; 
    public dynamic TableAdapter 
    {
        get
        {
            return tableAdapter;
        }
        set
        {
            tableAdapter = value;
            if (tableAdapter != null)
            {
              SQLiteConnection cn = tableAdapter.Connection;
            }
        }
    ... 
```

构建后我有警告：*CodeContracts：参考使用未达到（在同一位置还有 1 个未达到的断言）。* 可能有一些方法可以在不将 tableAdapter 类型更改为对象的情况下解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-20T01:26:36.650

我对 CodeContracts 有同样的问题。问题是由于使用了看起来合理的动态变量，因为静态检查器无法访问动态对象的可用字段或方法。我的方法是压制警告。

# sql - 如何正确查询 oracle 日期？

> ID：15628345
> 
> 赞同：0
> 
> 时间：2013-03-26T02:32:48.143
> 
> 标签：sql, oracle

```
select * from mytable where datecolumn == to_date('01-DEC-13','DD-MMM-YY') 
```

我收到“ORA-01821：日期格式无法识别”

在我从 mytable 查询 select * 的地方，我看到 datecolumn 中的值显示为“01-DEC-13”我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T03:24:59.173

我建议使用整个世纪作为日期。我处理过很多数据库，几个世纪以来有人因为不懂 Oracle 或前端语言而搞砸了。考虑一下这个`01-DEC-13`日期：

```
CREATE TABLE LousyDates (DateVal DATE);
INSERT INTO LousyDates VALUES (DATE '2013-12-01');
INSERT INTO LousyDates VALUES (DATE '1713-12-01');
INSERT INTO LousyDates VALUES (TO_DATE('12/1/13 BC', 'MM/DD/YYYY BC'));

SELECT
  TO_CHAR(DateVal, 'DD-MON-YY') AS NoCentury,
  TO_CHAR(DateVal, 'MM/DD/YYYY BC') AS WithCentury
FROM LousyDates;

NOCENTURY          WITHCENTURY
------------------ -------------
01-DEC-13          12/01/2013 AD
01-DEC-13          12/01/1713 AD
01-DEC-13          12/01/0013 BC 
```

好吧，也许我用公元前 13 年的日期夸大了这一点，但你明白了 :)

使用世纪...

```
SELECT * FROM MyTable WHERE datecolumn = TO_DATE('01-DEC-2013', 'DD-MON-YYYY') 
```

或者

```
SELECT * FROM MyTable WHERE datecolumn = DATE '2013-12-01' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:58:59.727

除非你 100% 确定你永远不会使用不同的语言设置，否则我建议使用 MM 而不是 MON：

```
select * from mytable where datecolumn = to_date('2013-12-01', 'YYYY-MM-DD') 
```

这适用于任何 NLS 设置，而将 to_date(...MON...) 的输出与 'DEC' 进行比较将在不同的语言环境中完全失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:39:29.647

尝试这个：

```
 SELECT * from MYTABLE WHERE TO_CHAR(datecolumn,'DD-MON-YY') == '01-DEC-13' 
```

而不是转换你的通配符，尝试转换你的日期时间。

# homebrew - 安装 GDAL 时出现 Homebrew 错误

> ID：15628352
> 
> 赞同：2
> 
> 时间：2013-03-26T02:33:32.153
> 
> 标签：homebrew, gdal

我目前正在[制作一张地图](http://bost.ocks.org/mike/map/#installing-tools)，但我在安装 GDAL 时遇到了困难。这是控制台输出：

```
brew doctor
Your system is raring to brew.
Toms-MacBook-Pro:~ tomstove$ brew install gdal
==> Installing gdal dependency: sqlite
==> Downloading http://sqlite.org/2013/sqlite-autoconf-3071600.tar.gz
###################################                                       49.8%
curl: (33) HTTP server doesn't seem to support byte ranges. Cannot resume.
Error: Download failed: http://sqlite.org/2013/sqlite-autoconf-3071600.tar.gz 
```

我在运行 Mountain Lion 的 Mac 上，所以应该已经安装了 sqlite。任何帮助将非常感激。

谢谢，汤姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T10:36:40.047

[http://sqlite.org/](http://sqlite.org/)不支持简历下载。去

`cd /Library/Caches/Homebrew` 或者如果您配置了其他位置： `brew --cache`

并删除所有不完整下载的 sqlite 文件（如`rm sqlite*`）。

然后尝试 `brew install sqlite`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:23:44.080

我遇到了同样的问题，并且能够通过更新自制软件进行安装。

```
brew update 
```

如果您在运行 brew update 时遇到问题，您可能需要获取来源： [brew update：以下未跟踪的工作树文件将被合并覆盖：](https://stackoverflow.com/questions/10762859/brew-update-the-following-untracked-working-tree-files-would-be-overwritten-by)

# java - 模拟注入的 SessionContext

> ID：15628354
> 
> 赞同：2
> 
> 时间：2013-03-26T02:33:47.600
> 
> 标签：java, junit, dependency-injection, ejb-3.0, sessioncontext

我将 SessionContext 作为资源注入到 EJB（实现容器管理事务）：

```
@Stateless(name = "XXX", mappedName = "PPP-MMM-CCC")
@TransactionManagement(value=TransactionManagementType.CONTAINER)
public class Xxx implements ItsRemoteInterface {
   @Resource
   private SessionContext sctx;
   ....
} 
```

我的单元测试失败，因为“sctx”在运行时为空（**NullPointerException**）。所以我想解决这个问题的唯一方法是创建一个实现 SessionContext 的 FakeSessionContext 类，然后我可以在测试期间使用它。

```
instance = new Xxx();
sessionContextResourceField = Xxx.class.getDeclaredField("sctx");
sessionContextResourceField.setAccessible(true);
sessionContextResourceField.set(instance, new FakeInitialContext()); 
```

但在我这样做之前，我想知道是否有更优雅的方式？除了创建一个 FakeSessionContext 类？像工厂课这样的东西？

如果有兴趣，我使用的是 jUnit 4.10 和 jmockit 0.999.15。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:28:11.253

使用 jmockit 为您创建会话上下文的模拟版本，并使用 jmockit 的“when...return”语句版本来确保模拟上下文返回您需要的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:21:22.790

为了他人的利益，这是在 jmockit 中完成的：

```
sessionContextResourceField.set(instance, 
            new MockUp<SessionContext>() {
                @Mock boolean getRollbackOnly() { return false; }
            }.getMockInstance()); 
```

尽管在我的情况下没有必要模拟 getRollbackOnly （我在代码中使用），但我还是这样做了，以防将来行为发生变化。

# google-apps-script - 使用应用脚本更改 Google Analytics API 中的 Web 属性

> ID：15628358
> 
> 赞同：0
> 
> 时间：2013-03-26T02:34:15.353
> 
> 标签：google-apps-script, google-sheets, google-analytics-api

我正在使用 Google App Script 示例将数据导入[此页面](https://developers.google.com/analytics/solutions/articles/reporting-apps-script)上的 Google Spreadsheet App Script 中。 *该示例工作正常*，但我想更改它正在提取数据的网络属性。

我四处寻找示例并尝试了他们的示例代码的各种迭代，但我没有得到正确的结果。有人可以用这段代码帮助我如何更改它以在我的个人资料中提取不同的属性吗？

```
 function runDemo() {
    try {

        var firstProfile = getFirstProfile();
        var results = getReportDataForProfile(firstProfile);
        outputToSpreadsheet(results);

    } catch (error) {
        Browser.msgBox(error.message);
    }
}

function getFirstProfile() {
    var accounts = Analytics.Management.Accounts.list();
    if (accounts.getItems()) {
        var firstAccountId = accounts.getItems()[0].getId();

        var webProperties = Analytics.Management.Webproperties.list(firstAccountId);
        if (webProperties.getItems()) {

            var firstWebPropertyId = webProperties.getItems()[0].getId();
            var profiles = Analytics.Management.Profiles.list(firstAccountId, firstWebPropertyId);

            if (profiles.getItems()) {
                var firstProfile = profiles.getItems()[0];
                return firstProfile;

            } else {
                throw new Error('No profiles found.');
            }
        } else {
            throw new Error('No webproperties found.');
        }
    } else {
        throw new Error('No accounts found.');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:49:58.293

如果您参考[分析服务文档](https://developers.google.com/apps-script/service_analytics)，您会发现所有`.getItems()`方法都返回“...的列表”或数组。请注意，该示例始终引用每个数组的第一项，`[0]`. 因此，您只需要遍历返回的数组即可获取所有内容。

您提到的函数的这个修改版本就是这样做的，构建然后返回一个`allProfiles`. *（需要对示例的其余部分进行相应的更改才能完成此数据的报告。）*

```
function getAllProfiles() {
    var accounts = Analytics.Management.Accounts.list();
    var allProfiles = [];
    if (accounts.getItems()) {
      for (var acct in accounts.getItems()) {
        var accountId = accounts.getItems()[acct].getId();

        var webProperties = Analytics.Management.Webproperties.list(accountId);
        if (webProperties.getItems()) {
          for (var prop in webProperties.getItems()) {
            var webPropertyId = webProperties.getItems()[prop].getId();
            var profiles = Analytics.Management.Profiles.list(accountId, webPropertyId);

            if (profiles.getItems()) {
              for (var item in profiles.getItems()) {
                var profile = profiles.getItems()[item];
                Logger.log(profile);
                allProfiles.push(profile);
              }
            } else {
                Logger.log('No profiles found [webProperty="'
                  +webProperties.getItems()[prop].getName()
                  +'"]');
            }
          }
        } else {
            Logger.log('No webproperties found [account="'
              +accounts.getItems()[acct].getName()
              +'"]');
        }
      }
    } else {
        Logger.log('No accounts found.');
    }
    return allProfiles;
} 
```

或者，如果您确切地知道您想要什么，只需更改索引值，这些都`[0]`在示例中，引用第一个帐户的第一个 Webproperties 列表中的第一项。

# python - 如何使用 django @lazy 装饰器？

> ID：15628367
> 
> 赞同：2
> 
> 时间：2013-03-26T02:35:11.343
> 
> 标签：python, django, lazy-evaluation, python-decorators

首先尝试使用 django.utils.functional.lazy 装饰器。我的函数返回两个列表，所以我用@lazy(list, list) 来装饰它。这是一个简单的简函数，而不是类的方法/属性。

当我尝试调用生成的修饰函数时，我得到一个“'**代理'对象不可调用”。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T05:37:56.613

我不认为你可以使用 Django 的惰性作为装饰器。您可以将其用作函数调用：

```
lazy_function = lazy(f, type) 
```

`f`您需要使惰性化的函数在哪里，并且`type`是预期的数据类型。

另外你如何返回这两个列表？喜欢：

```
def a():
    return [], [] 
```

如果是，那么从技术上讲，您将返回一个元组，因此您应该使用惰性作为：

```
lazy_f = lazy(f, tuple) 
```

# javascript - 在 JavaScript 中识别字符串是否包含任何非整数字符

> ID：15628371
> 
> 赞同：0
> 
> 时间：2013-03-26T02:35:27.750
> 
> 标签：javascript, regex, integer, nan, parseint

JavaScript parseInt() 的工作方式似乎与 Java parseInt() 不同。

一个非常简单的例子是：

```
document.write(parseInt(" 60 ") + "<br>");  //returns 60
document.write(parseInt("40 years") + "<br>");  //returns 40
document.write(parseInt("He was 40") + "<br>");  //returns NaN 
```

1号线没问题。但我希望第 2 行会出错，因为您实际上无法将“年”转换为整数。我相信 JavaScript parseInt() 只是检查字符串中的前几个字符是否是整数。

那么如何检查只要字符串中有非整数，它就会返回 NaN？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T02:49:12.890

parseInt 旨在为解析整数提供一定的灵活性。Number 构造函数对额外字符不太灵活，但也会解析非整数（感谢 Alex）：

```
console.log(Number(" 60 "));  // 60
console.log(Number("40 years"));  // Nan
console.log(Number("He was 40"));  // NaN
console.log(Number("1.24"));  // 1.24 
```

或者，使用正则表达式。

```
" 60 ".match(/^[0-9 ]+$/);  // [" 60 "]
" 60 or whatever".match(/^[0-9 ]+$/);  // null
"1.24".match(/^[0-9 ]+$/);  // null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:01:50.260

下面是一个`isInteger`可以添加到所有 String 对象的函数：

```
// If the isInteger function isn't already defined
if (typeof String.prototype.isInteger == 'undefined') {

    // Returns false if any non-numeric characters (other than leading
    // or trailing whitespace, and a leading plus or minus sign) are found.
    //
    String.prototype.isInteger = function() {
        return !(this.replace(/^\s+|\s+$/g, '').replace(/^[-+]/, '').match(/\D/ ));
    }
}

'60'.isInteger()       // true
'-60'.isInteger()      // true (leading minus sign is okay)
'+60'.isInteger()      // true (leading plus sign is okay)
' 60 '.isInteger()     // true (whitespace at beginning or end is okay)

'a60'.isInteger()      // false (has alphabetic characters)
'60a'.isInteger()      // false (has alphabetic characters)
'6.0'.isInteger()      // false (has a decimal point)
' 60 40 '.isInteger()  // false (whitespace in the middle is not okay) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:51:25.263

要检查字符串是否包含非整数，请使用正则表达式：

```
function(myString) {
  if (myString.match(/^\d+$/) === null) {  // null if non-digits in string
    return NaN
  } else {
    return parseInt(myString.match(/^\d+$/))
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T02:54:22.290

我会使用正则表达式，可能类似于以下内容。

```
`function parseIntStrict(stringValue) { 
    if ( /^[\d\s]+$/.test(stringValue) )  // allows for digits or whitespace
    {
        return parseInt(stringValue);
    }
    else
    {
        return NaN;
    }
}` 
```

* * *

 `## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T02:57:39.633

最简单的方法可能是使用一元加号运算符：

```
var n = +str; 
```

不过，这也会解析浮点值。`

# c# - .xps 文件的正确内容类型是什么

> ID：15628374
> 
> 赞同：4
> 
> 时间：2013-03-26T02:35:35.610
> 
> 标签：c#, asp.net, .net, mime-types, content-type

我正在 C# 中创建一个 asp.net Web 应用程序以将一堆`.xps`文件转换为，`.pdf`并且出于安全原因，我想验证要按其内容类型而不是文件扩展名转换的输入文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-19T12:59:33.693

[根据此资源](http://www.ecma-international.org/publications/standards/Ecma-388.htm)，它将是`application/vnd.ms-xpsdocument`或`application/oxps`取决于文件

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T03:30:05.690

根据此[文件签名表](http://www.garykessler.net/library/file_sigs.html)，XPS 文件的签名为：

```
50 4B 03 04 
```

# php - 解析错误：语法错误，意外的 '['

> ID：15628376
> 
> 赞同：0
> 
> 时间：2013-03-26T02:35:55.920
> 
> 标签：php, parsing, syntax

我现在有一些奇怪的问题。显然，我的 MySQL PDO 驱动程序以及我的 Apache 服务器都存在问题，所以我重新安装了它。但是现在，在我这样做之后突然出现了这个解析错误：

```
Parse error: syntax error, unexpected '[' on line 5 
```

好吧，这是第 5 行的代码：

```
return array_map(function ($val) { return explode('.', $val)[0]; }, scandir(DIR . M_DIR)); 
```

我真的不明白这一点。似乎无论我尝试做什么来修复这个错误——它仍然有效。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:38:06.830

> 从 PHP 5.4 开始，可以直接对函数或方法调用的结果进行数组取消引用。以前只能使用临时变量。

[大批](http://php.net/manual/en/language.types.array.php)

所以看看[例子](http://php.net/manual/en/language.types.array.php#example-88)

您的代码必须看起来像

```
return array_map(
    function ($val)
        { 
        $temp = explode('.', $val); 
        return $temp[0]; 
        }, 
    scandir(DIR . M_DIR)); 
```

或者

```
return array_map(
    function ($val)
        { 
        return current(explode('.', $val));
        }, 
    scandir(DIR . M_DIR)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:38:57.813

将展开的数组存储在另一个变量中，然后返回第 0 个索引。

像这样：

```
return array_map( function ($val) { 
        $temp explode('.', $val);
        return $temp[0];
    }, scandir(DIR . M_DIR)); 
```

# sql - 尝试创建过程时 SQL 语法不正确

> ID：15628382
> 
> 赞同：-1
> 
> 时间：2013-03-26T02:36:26.967
> 
> 标签：sql, sql-server

尝试在 SQL Server 中执行时，我不断收到错误消息：

> 消息 156，级别 15，状态 1，过程 sql_chp4a_premiere_assign，第 5 行
> 关键字“SELECT”附近的语法不正确。

我认为它指的是第一个`SELECT`. 我对 SQL 还不是很熟悉（以及由于可怕的风暴和春假而有一段时间没有上课）所以这可能是我忽略的一些愚蠢的事情。

```
USE [school username that gives out my name)

CREATE PROCEDURE sql_chp4a_premiere_assign

SELECT PART_NUM,DESCRIPTION,PRICE 
FROM PART;

SELECT *
FROM ORDERS

SELECT CUSTOMER_NAME 
FROM customer 
WHERE CREDIT_LIMIT>=10000;

SELECT ORDER_NUM
FROM ORDERS
WHERE CUSTOMER_NUM = '608'
AND ORDER_DATE = '2010-10-23';

SELECT CUSTOMER_NUM,CUSTOMER_NAME 
FROM CUSTOMER 
WHERE REP_NUM=35 OR REP_NUM=65;

SELECT PART_NUM,DESCRIPTION 
FROM PART WHERE CLASS!='AP';

SELECT PART_NUM,DESCRIPTION,ON_HAND 
FROM PART 
WHERE ON_HAND BETWEEN 10 AND 25;

SELECT PART_NUM,DESCRIPTION,ON_HAND 
FROM PART 
WHERE ON_HAND>=10 AND ON_HAND<=25;

SELECT PART_NUM,DESCRIPTION,(ON_HAND * PRICE) 
AS "ON_HAND_VALUE" 
FROM PART WHERE CLASS='SG';

SELECT PART_NUM,DESCRIPTION,(ON_HAND * PRICE) 
AS "ON_HAND_VALUE" 
FROM PART 
WHERE (ON_HAND * PRICE)>7500;

SELECT PART_NUM,DESCRIPTION,(ON_HAND * PRICE) 
AS "ON_HAND_VALUE" 
FROM PART WHERE (ON_HAND * PRICE)>7500; 
```

谢谢，我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:49:16.343

改变这个：

```
CREATE PROCEDURE sql_chp4a_premiere_assign 
```

对此：

```
CREATE PROCEDURE sql_chp4a_premiere_assign AS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:51:03.117

第一的：

你在这部分错了：

```
USE [school username that gives out my name) 
```

更改`)`为`]`：

```
USE [school username that gives out my name] 
```

第二：

您在存储过程声明中缺少`AS`,`BEGIN`和`END`关键字。

第三：

您创建了两个存储过程。用分隔每个存储过程声明`GO`

这将起作用：

```
USE [school username that gives out my name]

go

CREATE PROCEDURE Sql_chp4a_premiere_assign
AS
  BEGIN
      SELECT part_num,
             description,
             price
      FROM   part;

      SELECT *
      FROM   orders

      SELECT customer_name
      FROM   customer
      WHERE  credit_limit >= 10000;

      SELECT order_num
      FROM   orders
      WHERE  customer_num = '608'
             AND order_date = '2010-10-23';

      SELECT customer_num,
             customer_name
      FROM   customer
      WHERE  rep_num = 35
              OR rep_num = 65;

      SELECT part_num,
             description
      FROM   part
      WHERE  class != 'AP';

      SELECT part_num,
             description,
             on_hand
      FROM   part
      WHERE  on_hand BETWEEN 10 AND 25;

      SELECT part_num,
             description,
             on_hand
      FROM   part
      WHERE  on_hand >= 10
             AND on_hand <= 25;

      SELECT part_num,
             description,
             ( on_hand * price ) AS "ON_HAND_VALUE"
      FROM   part
      WHERE  class = 'SG';

      SELECT part_num,
             description,
             ( on_hand * price ) AS "ON_HAND_VALUE"
      FROM   part
      WHERE  ( on_hand * price ) > 7500;

      SELECT part_num,
             description,
             ( on_hand * price ) AS "ON_HAND_VALUE"
      FROM   part
      WHERE  ( on_hand * price ) > 7500;
  END;

go

CREATE PROCEDURE Sql_chp4a_premiere_assign
AS
  BEGIN
      SELECT part_num,
             description,
             price
      FROM   part;

      SELECT *
      FROM   orders

      SELECT customer_name
      FROM   customer
      WHERE  credit_limit >= 10000;

      SELECT order_num
      FROM   orders
      WHERE  customer_num = '608'
             AND order_date = '2010-10-23';

      SELECT customer_num,
             customer_name
      FROM   customer
      WHERE  rep_num = 35
              OR rep_num = 65;

      SELECT part_num,
             description
      FROM   part
      WHERE  class != 'AP';

      SELECT part_num,
             description,
             on_hand
      FROM   part
      WHERE  on_hand BETWEEN 10 AND 25;

      SELECT part_num,
             description,
             on_hand
      FROM   part
      WHERE  on_hand >= 10
             AND on_hand <= 25;

      SELECT part_num,
             description,
             ( on_hand * price ) AS "ON_HAND_VALUE"
      FROM   part
      WHERE  class = 'SG';

      SELECT part_num,
             description,
             ( on_hand * price ) AS "ON_HAND_VALUE"
      FROM   part
      WHERE  ( on_hand * price ) > 7500;

      SELECT part_num,
             description,
             ( on_hand * price ) AS "ON_HAND_VALUE"
      FROM   part
      WHERE  ( on_hand * price ) > 7500;
  END 
```

有关存储过程的语法，请参见[此处](http://msdn.microsoft.com/en-us/library/ms187926.aspx)。

无论如何，您可以使用[它](http://www.dpriver.com/pp/sqlformat.htm)来格式化您的 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:48:04.370

尝试这个

```
CREATE PROCEDURE sql_chp4a_premiere_assign
AS 
BEGIN
    SELECT PART_NUM,DESCRIPTION,PRICE 
    FROM PART;

    SELECT *
    FROM ORDERS

    SELECT CUSTOMER_NAME 
    FROM customer 
    WHERE CREDIT_LIMIT>=10000;

    SELECT ORDER_NUM
    FROM ORDERS
    WHERE CUSTOMER_NUM = '608'
    AND ORDER_DATE = '2010-10-23';

    SELECT CUSTOMER_NUM,CUSTOMER_NAME 
    FROM CUSTOMER 
    WHERE REP_NUM=35 OR REP_NUM=65;

    SELECT PART_NUM,DESCRIPTION 
    FROM PART WHERE CLASS!='AP';

    SELECT PART_NUM,DESCRIPTION,ON_HAND 
    FROM PART 
    WHERE ON_HAND BETWEEN 10 AND 25;

    SELECT PART_NUM,DESCRIPTION,ON_HAND 
    FROM PART 
    WHERE ON_HAND>=10 AND ON_HAND<=25;

    SELECT PART_NUM,DESCRIPTION,(ON_HAND * PRICE) 
    AS "ON_HAND_VALUE" 
    FROM PART WHERE CLASS='SG';

    SELECT PART_NUM,DESCRIPTION,(ON_HAND * PRICE) 
    AS "ON_HAND_VALUE" 
    FROM PART 
    WHERE (ON_HAND * PRICE)>7500;

    SELECT PART_NUM,DESCRIPTION,(ON_HAND * PRICE) 
    AS "ON_HAND_VALUE" 
    FROM PART WHERE (ON_HAND * PRICE)>7500;
END 
```

# c# - 创建 8 位图像

> ID：15628385
> 
> 赞同：2
> 
> 时间：2013-03-26T02:36:38.257
> 
> 标签：c#, image

我正在尝试创建具有纯色背景颜色的 8 位图像。看起来应该很简单，但文件上的详细信息将其列为 32 位色深。我错过了什么？

```
 public void CreateImage()
    {
        var bmpOut = new Bitmap(300, 300);
        var g = Graphics.FromImage(bmpOut);
        g.FillRectangle(new SolidBrush(Color.Gray), 0, 0, 300, 300);

        var stream = new MemoryStream();
        bmpOut.Save(stream, GetPngCodecInfo(), GetEncoderParameters());

        bmpOut.Save(@"C:\image.png", GetPngCodecInfo(), GetEncoderParameters());
    }

    public EncoderParameters GetEncoderParameters()
    {
        var parameters = new EncoderParameters();
        parameters.Param[0] = new EncoderParameter(Encoder.ColorDepth, 8);

        return parameters;
    }

    public ImageCodecInfo GetPngCodecInfo()
    {
        var encoders = ImageCodecInfo.GetImageEncoders();

        ImageCodecInfo codecInfo = null;

        foreach (var imageCodecInfo in encoders)
        {
            if (imageCodecInfo.FormatID != ImageFormat.Png.Guid)
                continue;

            codecInfo = imageCodecInfo;
            break;
        }

        return codecInfo;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:00:14.917

使用此构造函数指定像素格式：http: [//msdn.microsoft.com/en-us/library/3z132tat.aspx](http://msdn.microsoft.com/en-us/library/3z132tat.aspx)

由于无法从索引像素格式创建图形，因此只能将原始像素写入 8 位图像。

```
Bitmap bitmap = new Bitmap(32, 32, PixelFormat.Format8bppIndexed);
var bitmapData = bitmap.LockBits(new Rectangle(Point.Empty, bitmap.Size), ImageLockMode.ReadWrite, bitmap.PixelFormat);
Random random=new Random();
byte[] buffer=new byte[bitmap.Width*bitmap.Height];
random.NextBytes(buffer);
Marshal.Copy(buffer,0,bitmapData.Scan0,buffer.Length);
bitmap.UnlockBits(bitmapData);
bitmap.Save("test.bmp",ImageFormat.Bmp); 
```

您可以在 WinForms 上使用此类代码：http: [//www.codeproject.com/Articles/17162/Fast-Color-Depth-Change-for-Bitmaps](http://www.codeproject.com/Articles/17162/Fast-Color-Depth-Change-for-Bitmaps)

或者，如果您可以从 WPF 中引用此类，则会容易得多：http: [//msdn.microsoft.com/en-us/library/system.windows.media.imaging.formatconvertedbitmap (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.formatconvertedbitmap(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:07:44.210

您还可以以更高的比特率创建图像，然后在保存之前将其转换为 8 位。这将允许您在创建图像时使用图形上下文。有关如何转换为 8 位的建议，请参阅此问题：[C# - 如何将图像转换为 8 位彩色图像？](https://stackoverflow.com/questions/1761042/c-sharp-how-to-convert-an-image-into-an-8-bit-color-image)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T03:02:20.360

*   ImageExtensions.cs

    ```
    using System.Runtime.InteropServices;
    using System.Linq;

    using System.Drawing.Imaging;
    using System.Drawing;
    using System;

    public static partial class ImageExtensions {
        public static ColorPalette ToGrayScale(this ColorPalette palette) {
            var entries=palette.Entries;

            for(var i=entries.Length; i-->0; entries[i]=entries[i].ToGrayScale())
                ;

            return palette;
        }

        public static Color ToGrayScale(this Color color, double[] luminance=null) {
            var list=(luminance??new[] { 0.2989, 0.5870, 0.1140 }).ToList();
            var channel=new[] { color.R, color.G, color.B };
            var c=(byte)Math.Round(list.Sum(x => x*channel[list.IndexOf(x)]));
            return Color.FromArgb(c, c, c);
        }

        public static Bitmap To8bppIndexed(this Bitmap original) {
            var rect=new Rectangle(Point.Empty, original.Size);
            var pixelFormat=PixelFormat.Format8bppIndexed;
            var destination=new Bitmap(rect.Width, rect.Height, pixelFormat);

            using(var source=original.Clone(rect, PixelFormat.Format32bppArgb)) {
                var destinationData=destination.LockBits(rect, ImageLockMode.WriteOnly, pixelFormat);
                var sourceData=source.LockBits(rect, ImageLockMode.ReadOnly, source.PixelFormat);

                var destinationSize=destinationData.Stride*destinationData.Height;
                var destinationBuffer=new byte[destinationSize];

                var sourceSize=sourceData.Stride*sourceData.Height;
                var sourceBuffer=new byte[sourceSize];

                Marshal.Copy(sourceData.Scan0, sourceBuffer, 0, sourceSize);
                source.UnlockBits(sourceData);

                destination.Palette=destination.Palette.ToGrayScale();
                var list=destination.Palette.Entries.ToList();

                for(var y=destination.Height; y-->0; ) {
                    for(var x=destination.Width; x-->0; ) {
                        var pixelIndex=y*destination.Width+x;
                        var sourceIndex=4*pixelIndex;

                        var color=
                            Color.FromArgb(
                                sourceBuffer[0+sourceIndex],
                                sourceBuffer[1+sourceIndex],
                                sourceBuffer[2+sourceIndex],
                                sourceBuffer[3+sourceIndex]
                                ).ToGrayScale();

                        destinationBuffer[pixelIndex]=(byte)list.IndexOf(color);
                    }
                }

                Marshal.Copy(destinationBuffer, 0, destinationData.Scan0, destinationSize);
                destination.UnlockBits(destinationData);
            }

            return destination;
        }
    } 
    ```

`bmpOut=bmpOut.To8bppIndexed();`在保存到文件之前调用。

# unit-testing - reverseString 函数的单元测试

> ID：15628386
> 
> 赞同：0
> 
> 时间：2013-03-26T02:36:41.170
> 
> 标签：unit-testing

请帮助我生成以下测试用例。我只有以下信息：请帮助我开始编写测试用例

```
reverseString(originalString, stringToBeReversed, stringReverseTo, max) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:46:44.630

首先，编写一些快乐的路径测试，例如：

空字符串 "",

小字符串“a”，

输入计数为奇数的“abc”，

输入哪个计数甚至是“abcd”

...足够的。

然后，不愉快的路径测试（您可能会抛出异常的无效输入）：

无、123321 等。

# python - 是否可以在 python 中实现一个庞大的查找表（1 亿 + 键）？

> ID：15628387
> 
> 赞同：1
> 
> 时间：2013-03-26T02:36:42.340
> 
> 标签：python

我将有一个生成 1 亿个唯一键的程序，每个键都有一个与之关联的值（最多 4 位）。然后我希望能够尽可能快地访问该数据，以便我可以查找一个键并获取它的值。理想情况下至少每秒一百万次。

假设计算能力正常，这可能吗？我只是将它创建为字典还是应该开始学习数据库等？

任何为我指明正确方向的事情都会有很大的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T02:42:28.097

快速数学表明您不能在 32 位系统上的 Python 中在内存中执行此操作。如果您有 3 GB 的可用地址空间，那么10 ⁸个密钥将为您提供每个密钥 30 个字节。

在 64 位系统上，键和值的开销至少会占用：

*   桶中每个指针 8 个字节，键和值各一个指针，
*   每个键和值可能有 28 个字节（`sys.getsizeof(0)`在我的 64 位系统上给出 28 个）

所以我们的估计是它至少需要 7.2 GB 的内存。你*可以*做到，但你可能会得到不可接受的性能。我建议使用像京都内阁这样简单的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:55:35.937

我没有足够的内存来测试 100m，但我生成了 5000 万个项目 dict() 并在 0.25 秒内在我的笔记本上运行了 100 万次查找。你在球场上。

```
import time

d = dict((k,k) for k in range(5*10**7))
time.sleep(2) # let system settle
print('start')
start = time.time()
for i in range(10**6):
    x = d[i]
print(time.time() - start) 
```

给我

```
start
.25 
```

# mysql - Mysql 查询不佳但 DESCRIBE 看起来不错

> ID：15628388
> 
> 赞同：0
> 
> 时间：2013-03-26T02:36:42.607
> 
> 标签：mysql, sql

我有一个 MySql 5.5 查询，需要 6-20 秒才能执行。

```
SELECT TE.memb_priority, E.event_id, IFNULL(TE.user_show_as, E.show_time_as), 
       TE.email_id, TE.memb_color, TE.memb_inv_id, TE.invite_type, TE.is_confirmed, TE.invite_alias, IFNULL(TE.reminder, E.reminder_mins),
       COALESCE(TE.delete_dt, IORG.rm_from_invite_dt), 
       GREATEST(E.last_update_time, IFNULL(TE.greatest_time, 0)), IORG.required_attendee, 0
  FROM INVITED_ORG IORG, PERM_USER_EVENT_MEMB TE, USER_EVENT E
 WHERE TE.memb_inv_id       = IORG.org_id_FK
   AND IORG.event_id_FK     = E.event_id     
   AND ((E.event_owner      = IORG.org_id_FK
   AND   E.exclude_owner    = 0)
    OR E.event_owner       != IORG.org_id_FK)  
   AND (E.gmt_end_date > '2013-02-17 00:00:00.0'
    OR (E.recurrence IS NOT NULL
   AND  '2013-02-17 00:00:00.0' <= E.recurrence_end_dt)); 
```

**描述显示：**

```
id,select_type,table,type,possible_keys,key,key_len,ref,rows,Extra
-------------------------------------------------------------------
1,SIMPLE,TE,ALL,idx_id,NULL,NULL,NULL,61,
1,SIMPLE,IORG,ref,"PRIMARY,idx_oid,idx_eid",idx_oid,4,GLOCAL.TE.memb_inv_id,343,
1,SIMPLE,E,eq_ref,PRIMARY,PRIMARY,252,GLOCAL.IORG.event_id_FK,1,"Using where" 
```

如您所见，DESCRIBE 看起来不错。还有什么可以检查以使此查询更有效地运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:59:01.060

如果结果集不适合`innodb_buffer_pool_size`查询，则由于 I/O 分页而需要非常长的时间。

# html - CSS 间距关闭，不知道是什么原因

> ID：15628389
> 
> 赞同：0
> 
> 时间：2013-03-26T02:36:52.023
> 
> 标签：html, css, forms

我正在处理一个表单，需要在 reCAPTCHA 字段上方添加一个注释。我已经准备好了所有东西，但是*要提交您的消息，请输入如下所示的单词：note 和 reCAPTCHA 已经很远了，我需要弄清楚如何使这两个元素在垂直方向上靠得更近。

我在注释的表单中使用了段落标签，我不确定这是否是错误的形式？？

**[网站链接](http://tinyurl.com/cm3zzuw)**

**CSS：**

```
/*Prayer Request Form*/

#prayer-form {  
    margin-bottom: 20px;
    width: 960px;
    height: 520px;
    padding: 40px 30px;
    margin-left: auto; 
    margin-right: auto;

}

form, fieldset, input, textarea {
    margin: 0; padding: 0; border: 0; outline: none;
}

label {
    float: left; clear: left; margin: 11px 20px 0 0; width: 65px;
    text-align: left; font-size: 14px; color: #000000; 

}

input {
    width: 370px; height: 20px; padding: 5px 10px 5px 10px; margin: 0 0 23px 0; 
    background: #EDEDED;
    border: 1px solid #808080;  
    font-family: sans-serif; font-size: 14px; color: #000000;
}

textarea {
    width: 650px; height: 120px; padding: 10px 10px 5px 10px; margin: 0 0 20px 0; 
    background: #EDEDED;
    border: 1px solid #808080;
    overflow: auto; 
    font-family: sans-serif; font-size: 14px; color: #000000;
}

input[type=submit] {
    width: 95px; height: 30px; float: left; clear: left; padding: 2px 5px 2px 5px; margin: 20px 0 0 85px;
    color: #FFFFFF;
    border: 1px solid #0000CD;
    background: -moz-linear-gradient(top, #00BFFF 0%, #0000CD 100%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#00BFFF), color-stop(100%,#0000FF)); /* webkit */
    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#00BFFF', endColorstr='#0000CD');
    cursor: pointer;
}

input[type=reset] {
    width: 95px; height: 30px; float: left; padding: 2px 5px 2px 5px; margin: 20px 0 0 20px;
    border: 1px solid #858585;
    background: -moz-linear-gradient(top, #EDEDED 0%, #999999 100%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#EDEDED), color-stop(100%,#999999)); /* webkit */
    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#EDEDED', endColorstr='#999999');
    cursor: pointer;
}

p captcha{
float: left; padding: 2px 0 0 85px;
font-family: sans-serif; font-size: 14px; color: #000000;

}

#captcha {
    float: left; margin: 11px 0 20px 0; width: 445px; height: 110px; padding: 2px 5px 2px 85px;

} 
```

**HTML：**

```
<!--/ Show Prayer Request Form-->

<div id="prayer-form">

<form name="prayer-form" action="send-mail.php" method="POST">

<label for="field_name">Name:</label> <input type="text" id="field_name" name="sender_name" placeholder="First Name, Last Name"> 
<br>
<label for="field_email">Email:</label> <input type="text" id="field_email" name="sender_email" placeholder="example@domain.com">
<br>
<label for="field_phone">Phone:</label> <input type="text" id="field_phone" name="sender_phone" placeholder="(444) 444-4444">
<br>
<label for="field_message">Prayer Request:</label>

<textarea id="field_message" name="sender_message" placeholder="How can we pray for you?"></textarea>

<p id="captcha"><b>*To submit your message, please type the words shown below:</b></p>

<div id="captcha">
    <?php
          require_once('recaptchalib.php');
          $publickey = "*****************AzBk";
          echo recaptcha_get_html($publickey);
        ?>
</div>

<input type="submit" name="send_message" value="Submit"> <input type="reset" value="Reset">

</form>

</div> 
```

***非常感谢您的帮助。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:44:48.287

您需要在样式表中调整以下规则：

```
#captcha {
    float: left; 
    margin: 11px 0 20px 0; 
    width: 445px; 
    height: 110px; 
    padding: 2px 5px 2px 85px;
} 
```

您无需指定高度，只需将`height: auto`其全部使用或省略即可。

你也可以省略`padding`,`margin`单独使用会给你足够的控制。最后，您可能不需要浮动段落。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:43:43.703

看起来这是`height`您的验证码 CSS 中的设置：

```
#captcha {
    float: left;
    margin: 11px 0 20px 0;
    width: 445px;
    height: 110px;
    padding: 2px 5px 2px 85px;
} 
```

当我禁用 110px 的高度设置时，间距更合理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:49:20.870

我认为您已将您的 id 设置为与实际验证码表单相同的 ID，您必须更改

标签，加上有2个ID不好。

改成这个——

```
<p id="captcha-notice"><b>*To submit your message, please type the words shown below:</b></p>

<div id="captcha">
    <?php
          require_once('recaptchalib.php');
          $publickey = "*****************AzBk";
          echo recaptcha_get_html($publickey);
        ?>
</div> 
```

然后添加您的样式

```
#captcha-notice{
    /* styles */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T02:53:52.630

很简单，改变这个css代码：

```
#captcha {
    float: left;
    height: 110px;
    margin: 11px 0 20px;
    padding: 2px 5px 2px 85px;
    width: 445px;
} 
```

至

```
#captcha {
   float: left;
   /*height: 110px;
   margin: 11px 0 20px;*/
   padding: 2px 5px 2px 85px;
   width: 445px;
} 
```

# php - 画廊的格式数据库列表

> ID：15628390
> 
> 赞同：0
> 
> 时间：2013-03-26T02:36:52.217
> 
> 标签：php

您好，我有以下代码，这是对数据库中的结果进行排序，我如何设置它以便结果将显示在 2 个不同的列中，一个用于 template.channel_item.php，一个用于 template.channel_item.php，其中 2列将彼此相邻？

```
if(is_array($array)) {
foreach($array as $row) {
    include($basepath.'/templates/template.channel_item.php');
    include($basepath.'/templates/template.channel_item_title.php');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:46:31.033

无需使用循环

```
<div class="item-section" style="clear:both">
<div id="left-sidebar">
<?php include($basepath.'/templates/template.channel_item.php'); ?>
</div>

<div id="right-sidebar">
<?php include($basepath.'/templates/template.channel_item_title.php'); ?>
</div>
</div> 
```

css

```
#left-sidebar, #right-sidebar { float: left; width: 400px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:42:01.737

```
if(is_array($array)) {
foreach($array as $row) {

    echo '<div id="left">';
    include($basepath.'/templates/template.channel_item.php');
    echo '</div>';

    echo '<div id="right">';
    include($basepath.'/templates/template.channel_item_title.php');
    echo '</div>';
} 
```

**CSS**

```
#right { float:left; width: 400px;}
#left { float:left; width: 400px;} 
```

# c# - 将字符串按多个字符拆分为单独的 Lists<>

> ID：15628394
> 
> 赞同：0
> 
> 时间：2013-03-26T02:37:10.737
> 
> 标签：c#, list, string-split

我正在阅读一个文本文件`StreamReader`，我需要将字符串分成单独的部分，这些部分将进入它们各自的列表。

例如，字符串如下：

> '杀死一只知更鸟'哈珀李'978-0061743528'336

我想在每次出现空格时拆分字符串，后跟一个撇号`( ')`，然后将每个部分放入一个`List`例如：

```
List<string> BookTitles;
List<string> Author;
List<string> ISBN13;
List<string> Pages; 
```

So`"To Kill a Mockingbird"`将成为 的一个元素`List<string> BookTitles`，依此类推。

我知道`String.Split()`单个字符的拆分，那么我可以使用什么其他方法？

任何方向表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:45:14.197

您可以使用[`string.Split`](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)接受字符串数组的方法的重载：

```
var input = "'To Kill a Mockingbird 'Harper Lee '978-0061743528 '336";
var items = input.Split(new[] { " '" },StringSplitOptions.None); 
```

**输出：**

> '杀死一只知更鸟
> 
> 哈珀·李
> 
> 978-0061743528 336

您可以将每个条目分配`items`到您选择的列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:46:42.110

```
var input = "'To Kill a Mockingbird 'Harper Lee '978-0061743528 '336";
var values = Regex.Split(input, @"\s'"); 
```

# java - 消息的JMS持久化

> ID：15628396
> 
> 赞同：1
> 
> 时间：2013-03-26T02:37:20.560
> 
> 标签：java, jms

在 JMS 发布/订阅模式下，两个消费者订阅同一个主题。一个消费者正在运行，但是当生产者发送消息时另一个消费者宕机了，它仍然为没有运行的消费者保存消息？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:59:51.913

如果您将持久消息传递和持久订阅主题结合使用，我相信您可以。

来自：[http ://docs.oracle.com/javaee/5/tutorial/doc/bncdx.html](http://docs.oracle.com/javaee/5/tutorial/doc/bncdx.html)

> Pub/sub 消息传递具有以下特征。
> 
> 每条消息可以有多个消费者。
> 
> 发布者和订阅者具有时间依赖性。订阅主题的客户端只能消费客户端创建订阅后发布的消息，并且订阅者必须继续处于活动状态才能消费消息。
> 
> JMS API 通过允许订阅者创建持久订阅，在订阅者不活动时接收发送的消息，从而在一定程度上放宽了这种时间依赖性。持久订阅提供了队列的灵活性和可靠性，但仍允许客户端向多个收件人发送消息。有关持久订阅的更多信息，请参阅创建持久订阅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:46:58.877

这是我们使用的地方`javax.jms.Session.createDurableSubscriber`：

*JMS 提供者保留此持久订阅的记录，并确保保留来自主题发布者的所有消息，直到它们被此持久订阅者确认或它们已过期。*

# c# - 列表框从按钮添加

> ID：15628397
> 
> 赞同：-1
> 
> 时间：2013-03-26T02:37:22.243
> 
> 标签：c#, winforms

好的，所以我的网络浏览器（form1）中有一个名为书签的按钮。我希望它将 url 添加到 Form3 中的列表框中。当我尝试时，我得到一个错误的错误。

这个错误：

![在此处输入图像描述](../Images/9442d2adeaef3e573ce44ee4c5d90157.png)

但是我将代码更改为：

```
Form3.AC.listBox1.Items.Add(getCurrentBrowser().Url.ToString()); 
```

仍然错误

完整代码：

```
private void button6_Click(object sender, EventArgs e)
{
    Form3.AC.listBox1.Items.Add(getCurrentBrowser().Url.ToString());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:42:16.720

您传入 Form3 的一个实例，但您没有使用该实例，请将您的代码更改为此并试一试：

```
private void button6_Click(object sender, EventArgs e)
{
    _form.AC.listBox1.Items.Add(getCurrentBrowser().Url.ToString());
} 
```

**更新：**

当您实例化 AddFavourites 类/表单时，您将 Form3 的实例传递给构造函数：

```
var frmAddFavs = new AddFavorites(new Form3());
frmAddFavs.Show(); 
```

或者，如果 AddFavorites 表单由 Form3 启动/实例化：

```
var frmAddFavs = new AddFavorites(this);
frmAddFavs.Show(); 
```

在 AddFavorites 的构造函数中，您存储了 Form3 实例的副本：

```
public AddFavorite(Form3 form)
{
InitializeComponent();
this._form = form; //<- here we store the Form3 instance
} 
```

在您单击按钮时，您正在调用`Form3.AC.Listbox...`，但该上下文中的 Form3 尚未实例化。

我的回答是使用作为`_form`Form3 实例的私有成员变量。

**更新 2：**

> 我不明白。我收到 _form 的错误

确保将 Form3 的实例传递给 AddFavorites 的构造函数。如果您不传入 Form3 参数，它将调用默认构造函数（即使它在您的代码中不可见）。提示：当您重载类构造函数并删除无参数构造函数时，无参数构造函数实际上仍然可用。

所以不要这样做：

```
 var frmAddFavs = new AddFavorites();
  frmAddFavs.Show(); 
```

这与此相同：

```
 var frmAddFavs = new AddFavorites(NULL);
  frmAddFavs.Show(); 
```

# asp.net-mvc-4 - 如何使用带有 Hot Towel 角色的 Windows 身份验证？

> ID：15628399
> 
> 赞同：5
> 
> 时间：2013-03-26T02:37:29.063
> 
> 标签：asp.net-mvc-4, breeze, hottowel

我可以启动一个标准的 asp.net mvc 4 Intranet 项目并使用以下内容装饰控制器或方法：

```
[System.Web.Mvc.Authorize(Roles = "MyApp Users")] 
```

我已经对其进行了测试，它可以完美运行（因为我的域帐户是 Active Directory 中“MyApp 用户”的成员）

但是我的问题/问题是如何为[“热毛巾”](http://www.asp.net/single-page-application/overview/templates/hottowel-template)应用程序获得相同类型的行为？我尝试装饰我的微风控制器、HotTowel 控制器或任何具有相同属性的方法，但我永远无法验证...什么给出了？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T23:19:44.223

终于想通了。我希望这对其他人有用。

首先，您必须将 WindowsProvider 设置为您的角色管理器，如下所示：

```
<roleManager defaultProvider="WindowsProvider"
   enabled="true"
   cacheRolesInCookie="false">
  <providers>
    <add
      name="WindowsProvider"
      type="System.Web.Security.WindowsTokenRoleProvider" />
  </providers>
</roleManager> 
```

然后，您将能够检查用户的角色 [使用 Roles.IsUserInRole()]，更具体地说，对于这个问题，**使用 authorize 属性**。唯一的事情是您必须在授权属性中包含域，如下所示：

```
[System.Web.Mvc.Authorize(Roles = "YourDomain\\MyApp Users")] 
```

现在一切都如您所愿。

# jquery - 提交带有链接无效的ajax表单

> ID：15628400
> 
> 赞同：0
> 
> 时间：2013-03-26T02:37:33.737
> 
> 标签：jquery

我尝试使用链接提交我的表单，但 ajax 不起作用：

```
<form id="store_relation" action="store_relation.php" method="post" name="store_relation" >
        <input type="hidden" name="store_id" value="<?php echo $row['store_id']; ?>" />
        <input type="hidden" name="user_id" value="<?php echo $row['id']; ?>" />
</form>
<li class="online_users"><a id="online_form"><?php echo $row['username']; ?></a></li>

<script type='text/javascript' language="javascript">
$(document).ready(function(){
    $('#online_form').click(function(e) {
        e.preventDefault(); // prevent the link's default behaviour
         $('#store_relation').ajaxForm( {
            success: function() { 
            alert('hey');
            } 
        }); 
    });
 }); 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:58:39.883

您需要使用`ajaxSubmit()`而不是`ajaxForm()`. 根据[表单 API](http://www.malsup.com/jquery/form/#api)
ajaxForm

> 通过添加所有必要的事件侦听器来准备要通过 AJAX 提交的表单。它不提交表单。在文档的就绪函数中使用 ajaxForm 来准备表单以进行 AJAX 提交。ajaxForm 接受零个或一个参数。单个参数可以是回调函数或选项对象。

ajax提交

> 立即通过 AJAX 提交表单。在最常见的用例中，这是响应用户单击表单上的提交按钮而调用的。ajaxSubmit 接受零个或一个参数。单个参数可以是回调函数或选项对象。

```
$(document).ready(function(){
    $('#online_form').click(function(e) {
        e.preventDefault(); // prevent the link's default behaviour
         $('#store_relation').ajaxSubmit( {
            success: function() { 
            alert('hey');
            } 
        }); 
    });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:49:38.027

`ajaxForm()`不提交表格，也没有您的链接。德 API @ [http://jquery.malsup.com/form/#api](http://jquery.malsup.com/form/#api)状态

> 通过添加所有必要的事件侦听器来准备要通过 AJAX 提交的表单。它不提交表单。

所以你的值永远不会被提交，所以你永远不会进入“成功”状态。

您需要自己提交表单，或者使用提交按钮而不是链接。请注意，并非所有浏览器都接受`<a>`没有`href`

# c# - WebClient 和 Tasks 没有检索新内容但有新内容可用？

> ID：15628403
> 
> 赞同：1
> 
> 时间：2013-03-26T02:37:42.103
> 
> 标签：c#, windows-phone-8, windows-phone

即使我正在创建 WebClient 的新实例，并遵循标准程序以确保 WebClient 被 GC 删除，这甚至无关紧要：webclient 从我的服务器检索它之前检索的内容，并且只有重新启动应用程序才会它允许从我的服务器检索新内容。内容是一个简单的文本文件字符串，没有花哨的缓存，因为它在 WinRT 上运行得很好。

这是一个谜，因为我正在尝试制作一个 ChatBox；我需要刷新以获取新内容，但 WebClient 返回它第一次检索到的内容。

我的代码：

```
 public async Task<string> RetrieveDocURL(Uri uri)
    {

        return await DownloadStringTask(new WebClient(), uri);
    }

    /*
    public async Task<byte[]> RetrieveImageURL(string url)
    {
        return await _webClient.GetByteArrayAsync(url);
    }
     * */

    private Task<string> DownloadStringTask(WebClient client, Uri uri)
    {
        var tcs = new TaskCompletionSource<string>();

        client.DownloadStringCompleted += (o, e) =>
            {
                if (e.Error != null)
                    tcs.SetException(e.Error);
                else
                    tcs.SetResult(e.Result);
            };

        client.DownloadStringAsync(uri);

        return tcs.Task;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:31:44.567

WebClient 的缓存策略非常激进。如果您每次都查询相同的 URL，则应考虑在末尾添加一个随机参数。就像是：

```
"http://www.yourserver.com/yourService/?nocache=" + DateTime.UtcNow.Ticks 
```

# paypal - 评论页面上带有描述的 PayPal 项目

> ID：15628404
> 
> 赞同：2
> 
> 时间：2013-03-26T02:37:44.497
> 
> 标签：paypal

使用 PayPal REST api，我将其传递给新的付款：

```
transactions: [
      {
        amount: {
          total: "10.00",
          currency: "USD",
          details: {
            subtotal: "10.00"
          }
        },
        description: "My item description."
      }
    ], 
```

[实际请求的片段]

但是，在 PayPal 批准页面上，仅显示小计 - 描述没有显示，单个项目列表也没有显示 - 仅显示美元小计。

如何在 REST API 结帐中制作带有描述的单个项目？顺便说一句，我正在使用`&useraction=commit`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:21:35.297

您将需要传递您正在进行的 SetExpressCheckout API 调用中的行项目。[开发人员指南](https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/pp_nvpapi_developerguide.pdf)中有一个可以传递的变量列表。我已经和我们的工程师核实过，这个功能还没有上线。订单项将受支持，但该功能尚未与新 REST API 一起使用。

# typescript - 将 Typescript 与 Breezejs 一起使用

> ID：15628407
> 
> 赞同：2
> 
> 时间：2013-03-26T02:38:03.997
> 
> 标签：typescript, breeze

我正在尝试将 BreezeJS 与标准 Typescript 类型定义文件一起使用。使用测试文件作为指导，我有以下内容：

```
/// <reference path="../typings/breeze/breeze.d.ts" />

import breeze = module(Breeze);

class ExerciseEntityManager {
    manager: breeze.EntityManager;

    constructor() {
        this.manager = new breeze.EntityManager({
            serviceName: 'api/ExerciseItems'
        });
    }

    GetAllExercises(success: any, fail?: any) {
        var query = Breeze.EntityQuery.from('ExerciseItems');

        // TODO: Make sure this works if fail is undefined
        return this.manager.executeQuery(query)
            .then(success)
            .fail(fail);
    }
} 
```

这编译为以下内容：

```
var breeze = Breeze;
var ExerciseEntityManager = (function () {
    function ExerciseEntityManager() {
        this.manager = new breeze.EntityManager({
            serviceName: 'api/ExerciseItems'
        });
    }
    ExerciseEntityManager.prototype.GetAllExercises = function (success, fail) {
        var query = Breeze.EntityQuery.from('ExerciseItems');
        return this.manager.executeQuery(query).then(success).fail(fail);
    };
    return ExerciseEntityManager;
})(); 
```

当我将它加载到我的页面中时，我收到了 javascript 错误：“未捕获的引用错误：未定义微风。” 我使用来自微风存储库的微风-tests.ts 文件得到了类似的错误，所以我显然做错了什么。

如果我注释掉“var Breeze = Breeze;” 编译文件中的行，它可以工作，但这显然不是一个理想的解决方案。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:54:37.977

Breeze 打字稿定义文件在 v 1.2.5 中更新，我没有在该版本中看到错误。您可以尝试 1.2.5 并重新发布这是否是问题所在吗？

# apache - Solr 为每个子集排序不同的标准

> ID：15628412
> 
> 赞同：0
> 
> 时间：2013-03-26T02:38:20.473
> 
> 标签：apache, sorting, solr

我们正在使用 Apache SOLR 进行全文搜索。我们对搜索结果的排序有特定的要求——基本上在查询数据时，我们需要 2 组数据——A 和 B，但每组都应该有自己的排序标准，我们不能进行 2 次不同的调用。我们可以使用 OR 条件得到 2 个集合，但是我们如何对每个集合进行不同的排序呢？为了说明，如果：

设置 A = {3,1,2} 设置 B = {8,5,9}

因此，预期的响应可以让集合 A 按升序返回 {1,2,3} 但集合 B 可以按降序返回 {9,8,5}

我相信 SOLR 中的默认排序将对整个结果集进行排序。任何建议或如果问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:59:21.283

您可以使用[FieldCollapsing实现此目的](http://wiki.apache.org/solr/FieldCollapsing)

您可能需要做更多的工作 - 即有一个显示顺序字段（可以是一个整数），以便 Solr 知道它需要排序的一个字段。

接下来你可以使用这样的查询 -

```
&q=*&group=true&group.field=set&group.sort=display_order 
```

我建议将诸如此类的逻辑保留在 Solr 之外，它并不意味着可以替代关系数据库，并且让它执行复杂的 SQL 之类的操作（虽然有些是可能的）将会很棘手。

顺便说一句，在 Solr 的 JIRA 中有一个[未解决](https://issues.apache.org/jira/browse/SOLR-1093)的问题，它解决了多个查询的批处理问题。这意味着，当它被合并到一个版本中时，您可以在一次调用 Solr 时触发 n 个不同的查询来获取这些集合。

如果您希望 SOLR 为您执行此任务，JIRA 卡中提供了补丁，您可以为自己创建一个构建并让我们都知道它是如何进行的 :)

# asp.net - 在asp.net中将数据绑定到html5 DataList

> ID：15628415
> 
> 赞同：6
> 
> 时间：2013-03-26T02:38:23.537
> 
> 标签：asp.net, html, datalist

我正在尝试使用 HTML5。当我们将数据从数据表绑定到 asp.net 下拉控件时，是否可以将数据绑定到 html5 中的数据列表。

我在哪里可以找到这个细节。任何指针都非常感谢。:)

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T08:53:14.780

1）分配`runat="server"`给数据列表，以便可以从后面的代码中访问它：

```
Enter your favorite browser name:<br />
<input id="browserName" list="browsers" />
<datalist id="browsers" runat="server" /> 
```

2) 循环`DataTable`，使用 a 构造和连接选项列表，`StringBuilder`并将结果添加到`InnerHtml`datalist 的属性中

```
 protected void Page_Load(object sender, EventArgs e)
    {
        DataTable table = new DataTable();
        table.Columns.Add("BrowserName");
        table.Rows.Add("IE");
        table.Rows.Add("Chrome");
        table.Rows.Add("Firefox");
        table.Rows.Add("Opera");
        table.Rows.Add("Safari");

        var builder = new System.Text.StringBuilder();

        for (int i = 0; i < table.Rows.Count; i++)
            builder.Append(String.Format("<option value='{0}'>",table.Rows[i][0]));
        browsers.InnerHtml = builder.ToString();
    } 
```

如果您需要在站点的多个位置使用此功能，您可以[创建一个 WCF 服务并通过 jQuery 调用它](http://www.codeproject.com/Articles/132809/Calling-WCF-Services-using-jQuery)，您可以在其中填充数据列表或创建一个 HTTP 处理程序，如下所示：

1）向您的项目添加一个通用处理程序并将其命名为 AutoCompleteHandler.ashx

2）在 AutoCompleteHandler.ashx 里面放：

```
public class AutoCompleteHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/plain";
        context.Response.Clear();

        var options = new System.Text.StringBuilder();
        options.Append("<option value='IE'>");
        options.Append("<option value='Chrome'>");
        options.Append("<option value='Firefox'>");
        options.Append("<option value='Safari'>");
        options.Append("<option value='Opera'>");

        context.Response.Write(options.ToString());
        context.Response.End();
    }
    public bool IsReusable
    {
        get{return false;}
    }
} 
```

3）页面加载时通过jQuery调用处理程序并使用返回的结果填充数据列表：

```
<script src="Scripts/jquery-1.9.1.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $.post('AutoCompleteHandler.ashx', function (data) {
            $('#browsers').html(data);
        });
    });
</script> 
```

# c# - 将 DataGrid 数据提交到数据库？

> ID：15628416
> 
> 赞同：0
> 
> 时间：2013-03-26T02:38:25.740
> 
> 标签：c#, wpf, entity-framework

我想将此数据网格中的数据保存到我的数据库中。
目前我正在使用实体框架与我的数据库进行交互。

```
<DataGrid ItemsSource="{Binding ModelListe}" AutoGenerateColumns="False" Height="150" HorizontalAlignment="Left" Margin="0,0,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="500" >
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding actv_phase}" CanUserReorder="False" Header="Component" Width="200" />
        <DataGridTextColumn Binding="{Binding actv_name}" CanUserReorder="False" Header="Question" Width="300" />
    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:56:31.503

当你改变它的东西时，`DataGrid`它也会改变你的对象。因此`Button`，使用以下代码输入您的表单：

```
private void button_click(object sender, RoutedEventArgs e)
{
    myEntities.SaveChanges();
} 
```

更改完成后单击按钮。

# ssh - 通过 SSH 连接进行文件传输

> ID：15628417
> 
> 赞同：2
> 
> 时间：2013-03-26T02:38:29.827
> 
> 标签：ssh, terminal, file-transfer

在建立与远程计算机的 SSH 连接时，我需要将文件从本地计算机 (unix) 传输（复制）到远程计算机主机 (linux)。

使用 SSH 连接后，在与远程主机相同的 SSH 连接下，我使用终端中的什么命令将文件从本地计算机传输（复制/同步）到该远程主机？

我知道“scp”、“sftp”和“rsync”文件传输，但这些都是在 SSH 连接之外使用的，独立正确吗？...所以，我希望能够运行一个命令来复制该安全下的文件SSH 连接。

我可以在运行的 SSH 连接下使用 'scp'、'sftp'、'ftp' 或 'rsync' 命令吗？如果可以，如何？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:10:38.937

更新：这可能是您真正想知道的答案：[https ://askubuntu.com/questions/13382/download-a-file-over-an-active-ssh-session/13586#13586](https://askubuntu.com/questions/13382/download-a-file-over-an-active-ssh-session/13586#13586)

scp、sftp 等创建自己的 SSH 连接，除非它们通过已打开的某个端口进行隧道连接。无论何时从命令行运行它们都是如此，无论该命令行是否是现有 SSH 会话的一部分。隧道数据效率低下，并且不比独立的 SSH 连接更安全，除非您试图在服务器之间中继以隐藏您自己的地址。

为了做你想做的事，你需要设置你的本地计算机以允许 SSH 访问。然后，您可以简单地执行“scp -P 4321 yourUserName@yourlocalhostsexternalhostname:path/to/file.txt ./”之类的操作，以便在您登录到服务器的同时将文件复制到您的服务器。

一直键入该命令很痛苦，我更喜欢在本地 Unix 计算机上的命令行中工作，并将当前工作目录同步到服务器上它所属的任何位置。我正在包括我的程序来执行此操作（它仅适用于您将成为运行它的人 - 有很多不安全的行过于信任用户的输入）。

该程序非常易于使用，以至于几年来我从未使用其他任何东西将我在本地计算机上工作的文件传输到我的实时网络服务器。当我为别人工作时，我总是想念这个项目。

为了使用这个程序，您必须在当前目录或任何父目录中创建一个文件“.root”。“.root”文件指定根目录在服务器上的位置。这样，我的程序可以准确地找到该根目录的任何子目录所属的位置。它大大提高了 rsync 的效率，因为它不是通过我的整个网站进行 rsync，而是简单地对我当时正在处理的网站部分进行 rsync。

```
#!/usr/bin/perl
# cpwd
# make sure it is in your path
$flagjpeg = "--exclude '*.JPG'";
my $J = shift;
$flagjpeg = "" if $J eq 'JPG';
$n = 10;
$wd = '';
while (! -f '.root') {
$pwd = `pwd | xargs basename`;
chomp $pwd;
$wd = "$pwd/$wd";
chdir('..');
last if $n-- < 1;
}

# chop $wd;

if (! -f '.root') {
    print "No root found!\n";
    exit;
}
$root = `head -1 .root`;
chomp $root;
@cmds = ($root =~ m/(\S+)/g);
$root = pop(@cmds);
$source = "$wd" || './';
$dest = "$root/$source";

print "copy '@cmds' '$source' (to) '$dest'\n";

my $cmd = "(rsync @cmds -vv --max-size=1208KiB $flagjpeg --exclude '*.ezip' --exclude '*.tgz' --exclude '*.gz' -C -avz $source $dest 2>&1) > /tmp/cpwd.log";
chomp(my $mypwd = `pwd`);
my $cmdlarge = "cd '$mypwd'; (rsync @cmds -vv $flagjpeg --exclude '*.ezip' --exclude '*.tgz' --exclude '*.gz' -C -avz $source $dest 2>&1) > /tmp/cpwd.log";

print "$cmd\n$cmdlarge\n\n";

# exit;

system($cmd);

system("grep -e 'over max-size' -e 'sender finished' /tmp/cpwd.log");
system("tail -4 /tmp/cpwd.log | head -3"); 
```

“.root”文件示例：

```
$ cat .root
myname@server.net:www 
```

带有额外标志的“.root”文件示例：

```
$ cat .root
 -e 'ssh -p 4321 -C' yourname@host2468.hosthosthost.com:www 
```

一旦“cpwd”程序在您的路径中并且“.root”文件在当前或父目录中的某个位置创建，您需要做的就是在您的网站上工作并转到命令行（想到 Ctrl-Z ) 和类型

```
$ cpwd 
```

为了将工作目录中的所有内容同步到您的网站，如 .root 文件中指定的那样。

请注意，为了安全起见，cpwd 不会创建多于一级的不存在目录，以防万一您弄错了“.root”文件并尝试将整个网站复制到网络服务器的子目录中。

# android - 在 Android Assets 中解压文件

> ID：15628421
> 
> 赞同：9
> 
> 时间：2013-03-26T02:38:40.483
> 
> 标签：android, zip

我在 android 资产中放了一个 zip 文件。如何提取android内部存储中的文件？我知道如何获取文件，但我不知道如何提取它。这是我的代码..

`Util zip ;`

`zip = new Util();`

`zip.copyFileFromAsset(this, "myfile.zip", getExternalStorage()+` `"/android/data/edu.binus.profile/");`

感谢您的帮助：D

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T05:09:43.680

这段代码将帮助您....只需将 zipfile 位置和您希望将提取的文件保存到此类的位置传递给此类，同时制作对象...并调用 unzip 方法...

```
 public class Decompress { 
  private String zip; 
  private String loc; 

  public Decompress(String zipFile, String location) { 
    zip = zipFile; 
    loc = location; 

    dirChecker(""); 
  } 

  public void unzip() { 
    try  { 
      FileInputStream fin = new FileInputStream(zip); 
      ZipInputStream zin = new ZipInputStream(fin); 
      ZipEntry ze = null; 
      while ((ze = zin.getNextEntry()) != null) { 
        Log.v("Decompress", "Unzipping " + ze.getName()); 

        if(ze.isDirectory()) { 
          dirChecker(ze.getName()); 
        } else { 
          FileOutputStream fout = new FileOutputStream(loc + ze.getName()); 
          for (int c = zin.read(); c != -1; c = zin.read()) { 
            fout.write(c); 
          } 

          zin.closeEntry(); 
          fout.close(); 
        } 

      } 
      zin.close(); 
    } catch(Exception e) { 
      Log.e("Decompress", "unzip", e); 
    } 

  } 

  private void dirChecker(String dir) { 
    File f = new File(_location + dir); 

    if(!f.isDirectory()) { 
      f.mkdirs(); 
    } 
  } 
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-12-09T09:36:30.387

基于 Sreedev R 解决方案，我添加了从资产中读取文件并使用缓冲区的选项：

```
package com.pixoneye.api.utils;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;

import android.content.Context;
import android.util.Log;

public class Decompress {
    private static final int BUFFER_SIZE = 1024 * 10;
    private static final String TAG = "Decompress";

    public static void unzipFromAssets(Context context, String zipFile, String destination) {
        try {
            if (destination == null || destination.length() == 0)
                destination = context.getFilesDir().getAbsolutePath();
            InputStream stream = context.getAssets().open(zipFile);
            unzip(stream, destination);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public static void unzip(String zipFile, String location) {
        try {
            FileInputStream fin = new FileInputStream(zipFile);
            unzip(fin, location);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

    }

    public static void unzip(InputStream stream, String destination) {
        dirChecker(destination, "");
        byte[] buffer = new byte[BUFFER_SIZE];
        try {
            ZipInputStream zin = new ZipInputStream(stream);
            ZipEntry ze = null;

            while ((ze = zin.getNextEntry()) != null) {
                Log.v(TAG, "Unzipping " + ze.getName());

                if (ze.isDirectory()) {
                    dirChecker(destination, ze.getName());
                } else {
                    File f = new File(destination, ze.getName());
                    if (!f.exists()) {
                        boolean success = f.createNewFile();
                        if (!success) {
                            Log.w(TAG, "Failed to create file " + f.getName());
                            continue;
                        }
                        FileOutputStream fout = new FileOutputStream(f);
                        int count;
                        while ((count = zin.read(buffer)) != -1) {
                            fout.write(buffer, 0, count);
                        }
                        zin.closeEntry();
                        fout.close();
                    }
                }

            }
            zin.close();
        } catch (Exception e) {
            Log.e(TAG, "unzip", e);
        }

    }

    private static void dirChecker(String destination, String dir) {
        File f = new File(destination, dir);

        if (!f.isDirectory()) {
            boolean success = f.mkdirs();
            if (!success) {
                Log.w(TAG, "Failed to create folder " + f.getName());
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T02:54:22.757

也许您应该尝试将 FileOutputStream 与 zip 文件中的输入流结合使用。使用包文件，这应该可以工作。

从[这个问题](https://stackoverflow.com/questions/9851974/unzip-from-assets-doesnt-work-when-using-proguard)引用@wordy ：

```
PackageManager pm = context.getPackageManager();
String apkFile = pm.getApplicationInfo(context.getPackageName(), 0).sourceDir;
ZipFile zipFile = new ZipFile(apkFile); 
ZipEntry entry = zipFile.getEntry("assets/FILENAME");
myInput = zipFile.getInputStream(entry);
myOutput = new FileOutputStream(file);
    byte[] buffer = new byte[1024*4];
int length;
int total = 0;
int counter = 1;
while ((length = myInput.read(buffer)) > 0) {
    total += length;
    counter++;
    if (counter % 32 == 0) {
        publishProgress(total);
    }
        myOutput.write(buffer, 0, length);
} 
```

看起来 ProGuard 可能存在问题，但希望代码示例对您有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T04:25:09.440

您还可以使用提供加密等附加功能的 zip4j 外部库。此外，它还具有将文件提取到提供路径的特定位置的功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T03:03:41.790

我还没有测试过，但是在做一个项目时`OCR`我遇到了这个[库](https://github.com/rmtheis/android-ocr/)，那里有从网上解压缩下载文件的方法。解压缩文件的确切方法`installZipFromAssets(String sourceFilename,File destinationDir,File destinationFile)`在这个[类](https://github.com/rmtheis/android-ocr/blob/master/android/src/edu/sfsu/cs/orange/ocr/OcrInitAsyncTask.java#installZipFromAssets)下找到。希望这是你要找的

# c++ - 确定 COM 是 In-Proc 还是 LocalServer

> ID：15628430
> 
> 赞同：8
> 
> 时间：2013-03-26T00:54:38.767
> 
> 标签：c++, windows, winapi, com

我有一个使用 COM 库的应用程序，只是想知道我如何知道该应用程序是将该 COM 库用作 LocalServer 还是 In-Proc？

我查看了以这种方式构造的代码：

```
DATCOMLib::ITEmulationPtr pTE(__uuidof(DATCOMLib::TEmulation)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:35:55.970

这部分取决于您在创建对象时提供的执行上下文 - 有关更多详细信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms693716(v=vs.85)。 aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693716(v=vs.85).aspx)

您可以在注册表中查找组件的类 ID，并检查它是否具有 LocalServer 子键。所以在你的情况下，你会寻找：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Classes\CLSID\{CLSID of DATACOMLib::TEmulation}\LocalServer 
```

如果它是 In Proc COM 组件，它将具有以下键：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Classes\CLSID\{CLSID of DATACOMLib::TEmulation}\InProcServer32 
```

查看此文档以获取更多详细信息：http: [//msdn.microsoft.com/en-us/library/aa908849.aspx](http://msdn.microsoft.com/en-us/library/aa908849.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T06:47:17.377

可以通过多种方式找出

1.  通过查看代码 - 检查调用“ **CreateInstance** ”或“ **CoCreateInstance** ”时传递的类上下文是什么 -（CLSCTX_INPROC_XXXX 然后它是 inproc 服务器意味着它将被加载到调用应用程序进程地址空间的 DLL。CLSCTX_LOCAL_SERVER，CLSCTX_REMOTE_SERVER - 然后它是作为单独进程运行的 COM 服务器。有一些 #defines 结合了一个或多个标志。只需谷歌它）

    `ITEmulationPtr.CreateInstance(uuid(TEmulation), 0, CLSCTX_XXX)`

2.  如果您可以访问安装了 COM 组件的机器，那么您可以按照 Peter 在上述答案中给出的步骤进行操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:58:44.757

1.  运行您的应用程序并确保它加载 COM 对象（代码到达问题中显示的部分）
2.  打开进程资源管理器（如果您还没有，请从 Microsoft 获取）
3.  使用进程资源管理器搜索 dll 名称，如果它在您的 exe 中，则它在进程内，否则不是。

# r - 在 SPSS 中，如何通过标签变量循环遍历自变量来进行一堆回归分析？在 R 中更容易吗？

> ID：15628431
> 
> 赞同：-5
> 
> 时间：2013-03-26T02:39:57.783
> 
> 标签：r, statistics, regression, linear-regression, spss

这是我的数据集以逗号分隔形式的示例（第一行中的变量名称）...

```
LABEL,X,Y
bimmy,1,2
bimmy,2,4
bimmy,3,6
jimmy,2,8
jimmy,5,4
jimmy,6,10
marian,3,10
marian,4,9
marian,5,5 
```

我想对每个 LABEL 进行 X 和 Y 的线性回归分析。所以，我会对“bimmy”、“jimmy”、“marian”进行 X 和 Y 分析。

这在SPSS中可能吗？在 R 中更容易吗？

我用类似措辞的查询搜索了 Google 和 Stack Overflow，但没有发现任何相关内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T03:50:01.877

```
yourdata <- read.table(text="LABEL,X,Y
bimmy,1,2
bimmy,2,4
bimmy,3,6
jimmy,2,8
jimmy,5,4
jimmy,6,10
marian,3,10
marian,4,9
marian,5,5",h=T,sep=",")

regression.to.repeat <- function( x ) lm( Y ~ X , data = x ) 

by( yourdata , yourdata$LABEL , regression.to.repeat ) 
```

# css - CSS：h1，h2，h3 多个选择器 + 单独的 h2 ...顺序问题？

> ID：15628433
> 
> 赞同：0
> 
> 时间：2013-03-26T02:40:02.400
> 
> 标签：css, css-selectors

所以这就是我遇到的问题。我想提高效率并将所有标题标签设置为相同的字体系列。所以我使用了下面的代码。然而，它似乎只在多个选择器代码在单个 h2 代码之后才起作用。

如果我将多选择器代码放在 h2 代码之前，那么它会完全忽略它。关于我缺少什么的任何想法？这是测试页面的链接：

[http://www.jasonkoprowski.com/test/JK_Test.html](http://www.jasonkoprowski.com/test/JK_Test.html)

我希望标题使用“深红色文本”字体显示，但似乎默认为“Times New Roman”（甚至不确定它实际上是从哪里得到的。当我放置 h1、h2、h3、h4、h5 时它可以找到代码之后但不是之前。我想我可以将它放在 h2 标记代码之后并完成它，但我想确保我了解问题的根本原因：

```
h1, h2, h3, h4, h5 { 
   font-family:"Crimson Text", "Lucida Sans Unicode","Times New Roman", serif;
}

h2 {
  color:#232323;
  font-style:normal;
  font-weight:500;
  letter-spacing:-1px;
  line-height:1.1em;
  margin:30px 0;
  text-align:center;
  font-size:42px;
} 
```

为了让我更加困惑，当我将代码添加到 Code Pen ( [http://codepen.io/anon/pen/EDpJg](http://codepen.io/anon/pen/EDpJg) ) 时，它看起来可以正确呈现……所以我的网站有问题吗？

您能提供的任何帮助将不胜感激。

谢谢，

科普罗斯基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:07:20.497

问题不在于您的选择器或规则的顺序（尽管[通常](http://www.w3.org/TR/CSS21/cascade.html)有时它确实很重要），`<style>`而在于样式表开头和结尾的标签：

```
<style type="text/css"> 
```

和

```
</style>
<!--CSS END--> 
```

这些属于 HTML 页面，但不属于 CSS 表。此外，开始标签会干扰您的`h1, h2, h3, h4, h5`规则。你应该删除它们。

# css - 内容来自 当我返回页面时消失

> ID：15628437
> 
> 赞同：1
> 
> 时间：2013-03-26T02:40:37.587
> 
> 标签：css, html

我面临一个奇怪的问题。我使用 HTML 模板，它实际上只有一个页面，中间有一个框。框的内容可以更改，您可以通过页面顶部的一些按钮导航到不同的版本。

我在着陆视图中添加了一个段落，当我移动到另一个视图并返回时，文本消失了。

我可以看到问题不在于它不显示文本，问题在于它完全消失并且只留下：

```
<div id="comment2" class="one-half"></div> 
```

我无法弄清楚是什么原因造成的。

这是我的 HTML：

```
<div id="content_wrapper">
    <div id="header"><span>Το <b>INTRO HALL</b> είναι το <b>TOP</b>!</span><div id="close"></div></div>
    <div id="content">
    <div class="scroll-pane">
        <div class="content" id="content1">
        <div id='subscribe_label'>Η ιστοσελίδα του γυμναστηρίου Intro Hall θα ανοίξει σε:</div>
        <div id="counter"></div><div class="clear"></div>
        <div class="form_title"><h1>Κέρδισε ένα δώρο!</h1></div>
        <div class="column_cont">
        <div id="comment2" class="one-half"><p>Συμπλήρωσε τη διπλανή φόρμα για να μπεις στο Club Επικοινωνίας του Intro Hall και κέρδισε ένα δώρο. Απλά γράψε το όνομα και το email σου και κλίκαρε 'Στείλτε το δώρο μου!'.</p></div>
            <!-- Begin MailChimp Signup Form -->
<div id="mc_embed_signup" class="one-half" style="float:right;">
<form action="http://topgreekgyms.us6.list-manage2.com/subscribe/post?u=d6acf8949532b107b7b21c9d0&amp;id=e2131451dc" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>

<div class="mc-field-group">
    <input type="text" value="" name="FNAME" class="required" id="firstname" placeholder="Όνομα">
</div>

<div class="mc-field-group" style="margin-bottom:4px;">
    <input type="email" value="" name="EMAIL" class="required email" id="primaryemail" placeholder="Email" style="float:right;">
</div>

    <div id="mce-responses" class="clear">
        <div class="response" id="mce-error-response" style="display:none"></div>
        <div class="response" id="mce-success-response" style="display:none"></div>
    </div>  

    <div class="clear"><input type="submit" value="ΣΤΕΙΛΤΕ ΤΟ ΔΩΡΟ ΜΟΥ!" name="subscribe" id="mc-embedded-subscribe" class="button_link hover_fade large_button red"></div>
</form>
</div>

<!--End mc_embed_signup-->
</div>          
</div> 
```

这是CSS

```
#content_wrapper {
        position:absolute;
        width:506px;
        height:506px;
        z-index: 1000;
        top:0;
        left:0;
        /* Fallback for web browsers that doesn't support RGBa */
        background: rgb(62, 62, 62);
        /* RGBa with 0.6 opacity */
        background: rgba(0, 0, 0, 0.52);
}

#header {
        width:506px;
        height:47px;
        background: #161616;
}

#header span {
    display:block;
    margin:auto;
    height: 100%;
    line-height: 47px;
    width:447px;
    color: #ffffff;
    padding: 0px 29px 0 29px;
    background: #ac0003;
    text-align:center;
    font-family: arial;
    font-size: 23px;
    text-transform: none;
    word-spacing: 5px;
}

#content {
    width: 502px;
    height: 306px;
    border: 2px solid #161616;
    border-width: 0 2px 0 2px;
    margin-top:-15px;
    padding-top:15px;
}

.content {
        display:none; 
        width: 458px;
}

#close {
    position: absolute;
        top:11px;
        right:12px;
        background: transparent url(../img/close.png) no-repeat;
        width:25px;
        height: 25px;
        cursor: pointer;
        display:none;
}

.column_cont {
    margin: 0 -15px 0 0px;
    clear:both;
}

.clear {clear:both;}

#comment2 {
color: #fff;
display:block;
font-size: 16px;
text-align: justify;
line-height: 20px;
margin-bottom:10px;
}

.one-half, .one-third, .two-third, .one-fourth,  .three-fourth {
    margin:0 5px 0 15px;
    float:left;
}

.one-half {
    width:206px;

} 
```

另外，这里是网站的[链接](http://peristeri.topgreekgyms.gr)。

提前感谢您的任何帮助或意见！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T02:56:46.660

在您的`big_countdown.js`文件中，关闭按钮上有一个侦听器，其中包含`document.getElementById('comment2').innerHTML = "";`：

```
$("#close").click(function() {
        $('.content').each(
            function() {
                $(this).fadeOut('fast');
            });
        $('#content1').stop().fadeIn('fast');
        $("#close").css('display','none');
                $('#dots div').each(
            function() {
                $(this).removeClass('dot_active');
            });
        $("#dot1").addClass('dot_active');
        window.setTimeout(function() {
         api.reinitialise();
        },300);

        // Remove this line below
        document.getElementById("comment2").innerHTML="";
}); 
```

删除最后一行应该可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T03:05:14.023

使用一个好的 JavaScript 调试器可以帮助你下次很快解决这个问题。Firebug 是 Fixfox 的一个插件，是最好的插件之一。要获得与 albertxing 相同的答案，您可以执行以下步骤：

1.  加载页面
2.  右键单击正在消失的元素，然后选择“使用 Firebug 检查元素”
3.  您的

    元素将在 Firebug 的 HTML 查看器中突出显示

4.  右键单击该元素并选择“删除元素时中断”
5.  切换网页底部的按钮以使

    元素消失

6.  Firebug 将检测到更改并立即将您带到导致其更改的代码行。

快！

# mysql - MySQL外键帮助

> ID：15628438
> 
> 赞同：1
> 
> 时间：2013-03-26T02:40:44.090
> 
> 标签：mysql, database, syntax, foreign-keys

我正在处理数据库分配并遇到此错误。

数据库应该看起来像......

```
Legend: **Primary Key** *Foreign Key 
```

.

```
Movies (**title, year**, length, genre, *studioName, *producerID) 
StarsIn(***movieTitle, *movieYear, *starName**) 
MovieStar(**name**, birthdate, address, gender) 
MovieMaker(**ID**, name, address)
Studio (**name**, address, *presidentID) 
```

我的代码看起来像这样......

```
CREATE TABLE Movies (
title varchar(50),
year int,
length int,
genre varchar(50),
studioName varchar(50),
producerID varchar(50),
PRIMARY KEY (title,year)
FOREIGN KEY (studioName) REFERENCES Studio(name),
FOREIGN KEY (producerID) REFERENCES MovieMaker(ID),
);

CREATE TABLE StarsIn (
movieTitle varchar(50),
movieYear int,
starName varchar(50),
PRIMARY KEY (movieTitle,movieYear,starName),
FOREIGN KEY (movieTitle) REFERENCES Movies(title),
FOREIGN KEY (movieYear) REFERENCES Movies(year),
FOREIGN KEY (starName) REFERENCES MovieStar(name)
);

CREATE TABLE MovieStar (
name varchar(50),
birthdate int,
address varchar(50),
gender varchar(50),
PRIMARY KEY (name)
);

CREATE TABLE MovieMaker (
ID varchar(50),
name varchar(50),
address varchar(50),
PRIMARY KEY (ID)
);

CREATE TABLE Studio (
name varchar(50),
address varchar(50),
presidentID varchar(50),
PRIMARY KEY (name),
FOREIGN KEY (presidentID) REFERENCES MovieMaker(ID)
); 
```

但是，我收到很多错误，说明我的外键的语法已关闭。有没有人可以伸出援助之手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:49:14.170

通过外键引用其他表的表只能在被引用的表已经存在*后定义。*因此，您必须重新排序表，以便`FOREIGN KEY`首先创建约束中引用的表。

此外，引用`Movies.year`和的外键`Movies.title`将失败，因为您没有在这些列上*单独*定义索引。您确实将它们作为组合使用`PRIMARY KEY`，但它们需要自己的索引。

```
/* MovieStar, MovieMaker are referenced by other tables
   but have no FKs of their own, so create them first */
CREATE TABLE MovieStar (
  name varchar(50),
  birthdate int,
  address varchar(50),
  gender varchar(50),
  PRIMARY KEY (name)
);

CREATE TABLE MovieMaker (
  ID varchar(50),
  name varchar(50),
  address varchar(50),
  PRIMARY KEY (ID)
);

/* Studio can be created next, referencing only MovieMaker */
CREATE TABLE Studio (
  name varchar(50),
  address varchar(50),
  presidentID varchar(50),
  PRIMARY KEY (name),
  FOREIGN KEY (presidentID) REFERENCES MovieMaker(ID)
);

/* Movies references 2 of the above */
CREATE TABLE Movies (
  title varchar(50),
  year int,
  length int,
  genre varchar(50),
  studioName varchar(50),
  producerID varchar(50),
  /* A comma was missing here... */
  PRIMARY KEY (title,year),
  FOREIGN KEY (studioName) REFERENCES Studio(name),
  FOREIGN KEY (producerID) REFERENCES MovieMaker(ID),
  /* Add individual indices on Movies. Omitting this would result in errno 150 */
  INDEX (year),
  INDEX (title)
);

CREATE TABLE StarsIn (
  movieTitle varchar(50),
  movieYear int,
  starName varchar(50),
  PRIMARY KEY (movieTitle,movieYear,starName),
  FOREIGN KEY (movieTitle) REFERENCES Movies(title),
  FOREIGN KEY (movieYear) REFERENCES Movies(year),
  FOREIGN KEY (starName) REFERENCES MovieStar(name)
); 
```

**这是正确构建整个事物**的演示：** [http ://sqlfiddle.com/#!2/eaf70c](http://sqlfiddle.com/#!2/eaf70c)**

# java - 如何使用小程序连接到数据库

> ID：15628441
> 
> 赞同：1
> 
> 时间：2013-03-26T02:41:12.903
> 
> 标签：java, database, applet

我创建了一个 java swing 小程序并将其插入网页，但我无法通过网页连接到数据库，我该如何解决？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:55:27.497

您在这里面临几件事：

*   您的小程序设计无法连接到任何资源，除了托管在与小程序本身相同的主机上的资源
*   您的小程序直接从网络浏览器运行时（因此不是从 http 服务器调用，而是从硬盘加载它所在的 html 页面）没有主机，因此根本无法连接到任何东西
*   正如评论中提到的，让一个小程序包含数据库（或任何东西）的帐户信息是一个巨大的安全风险
*   更不用说这里的可扩展性问题，在你的能力水平上，你不会遇到问题，因为没有足够的人会访问你的小程序（无意侮辱，但如果你不知道这一点，你就不会为高流量网站工作，因为他们永远不会雇用您）
    最好的办法是让小程序使用 HTTP 调用调用 servlet，然后让 servlet 执行数据库工作并将结果返回到小程序，而不是 ResultSet 或其他 JDBC 实体，但将结果转换为 XML 文档或 CSV 之类的东西，然后在 HTTP 响应中发回。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T05:12:14.183

数据库代码如下：

```
Class.forName("Driver Name");//example Driver Name="sun.jdbc.odbc.JdbcOdbcBridge" if your are using ODBC Driver

Connection con=DriverManager.getConnection("Connection String"); 
```

# c - 在 linux 下修改 char * 会崩溃，但在 cygwin 下不会。为什么？

> ID：15628443
> 
> 赞同：0
> 
> 时间：2013-03-26T02:41:16.343
> 
> 标签：c, char

此代码在 cygwin 和 linux 下编译没有错误。但是当我运行它时，它在 cygwin 中运行没有错误，但它在 linux 下核心转储。

有人可以对这些系统的内存管理有所了解，以解释为什么会有不同的行为吗？

```
#include <stdio.h>
void foo(char *p){
 p[0]='A';
}

void main(){
  char *string ="Hello world!";
  foo(string);
  printf("%s\n", string);
} 
```

感谢您的回答，并且没有定义行为是有道理的，但是我对导致这两种不同的未定义行为的底层系统的差异感兴趣。我想这与他们如何管理内存有关，但寻找熟悉内部结构的人可以解释为什么一个最终崩溃而另一个没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:45:34.107

在 C++ 中，字符串文字不得修改。有了那个指针，这就是你想要做的。

如果你想修改它，你必须像这样声明它：

```
char string[] = "Hello world!"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:45:39.287

修改 char* 会导致未定义的行为，仅仅因为它不会崩溃，并不意味着它不会。这就是 undefined 的意思，行为是**不可预测**的，在你的情况下，程序不崩溃也是不可预测的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:42:25.813

修改常量字符串是未定义的行为。

也请定义`main()`为

```
int main(void)
{
  //your program
  return 0;
} 
```

# php - MySQL 查询限制每个“或”结果

> ID：15628444
> 
> 赞同：0
> 
> 时间：2013-03-26T02:41:21.200
> 
> 标签：php, mysql, sql

是否可以在我正在做的地方进行单个查询

```
WHERE blah = bleh 
  AND this = that 
  AND age = 21 
```

我可以在哪里将“Blah”和“This”结果限制为 3 个或更少？我知道我可以将 a`LIMIT X`添加到查询的末尾，但会限制总结果。对于我的查询，我想要 3 个这个，那个 3 个和另一个 3 个.. 但每个不超过 3 个，如果每个都少或没有，哦，好吧。也有可能与这个想法仍然有一个最大的结果限制？

或者这是我必须跨多个查询做的事情，还是我必须以某种方式修剪结果服务器端的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T02:44:27.900

也许工会可以满足您的需求。

```
(select * from table where A='AValue' limit 3)
  union
(select * from table where B='BValue' limit 3)
  union
(select * from table where C='CValue' limit 3) 
```

# flash-builder - 是否有任何用于闪光羽毛的 GUI 工具？

> ID：15628450
> 
> 赞同：1
> 
> 时间：2013-03-26T02:41:41.937
> 
> 标签：flash-builder, flash-cs6

我在 FP11 中找到了 UIComponent 库的“羽毛”。 [http://feathersui.com/](http://feathersui.com/)

但是在这个库的教程中，只有编码使用，没有任何 GUI 工具。

有谁知道羽毛的GUI工具吗？

请告诉我 ：）

谢谢。

此外..

我只是想知道如果没有任何好的 GUI 工具，羽毛的优点或优势是什么？哼........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T08:24:50.597

不幸的是，没有可用的 GUI 编辑器。

这是票：[https ://github.com/joshtynjala/feathers/issues/309](https://github.com/joshtynjala/feathers/issues/309)

不过，您可以尝试使用[流体羽毛](https://github.com/Hyzhak/fluid-feathers)来进行类似声明的 UI 描述。

# php - MySQL查询结果为空白

> ID：15628455
> 
> 赞同：0
> 
> 时间：2013-03-26T02:42:16.797
> 
> 标签：php, mysql

我已经来这里有一段时间了，但这是我第一次发帖。所以这里是：

我正在为我的网站创建一个数据库。到目前为止，一切正常并且工作正常。但是当创建 .php 来显示评论时，就好像 echo 根本不存在一样。

代码工作得很好，因为我在任何可能的结果上都没有得到任何错误。但在那些应该有结果的地方，什么都没有出现……

这是我的代码：

```
<?php $pickstory=$_POST['pickstory'];
 $result = mysql_query("SELECT name, comment 
                          FROM originalwork 
                         WHERE story = '$pickstory'", $conexion);

  if($fila= mysql_fetch_row($result)!=0){ ?>
    <?php echo "<h6>Comments on $pickstory</h6>"; ?> 
    <table width="900">
      <tr> 
        <td width="159" align="left" valign="top"></td> 
        <td width="729"></td> 
      </tr>

      <?php while ($fila= mysql_fetch_row($result)) { ?>

      <tr> 
        <td><?php echo "<h2>Name: $fila[0]</h2>"; ?></td> 
        <td><?php echo "<p>$fila[1]</p>"; }?></td>
      </tr>

      <?php } else { echo "<h5>No comments on $pickstory so far. Be the first!</h5>"; } ?>    
    </table>

<?php mysql_free_result($result); mysql_close(); ?> 
```

就像我说的那样，代码有效，我没有收到任何错误。当没有结果时，它会向我显示“没有评论......”的消息。都好。问题是，当有结果要显示时，什么都没有显示。请帮忙？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:54:21.537

你的代码格式很**糟糕**。这里。

```
<?php
$pickstory = $_POST['pickstory'];
$result = mysql_query("SELECT name, comment 
                         FROM originalwork 
                        WHERE story = '$pickstory'", $conexion);
?>

<?php if(($fila = mysql_fetch_row($result)) !== false): ?>
  <h6>Comments on <?=$pickstory?></h6>
  <table width="900">
    <tr>
      <td width="159" align="left" valign="top"></td>
      <td width="729"></td>
    </tr>
    <?php while (($row = mysql_fetch_row($result)) !== false): ?>
      <tr> 
        <td><h2>Name: <?=$row[0]?></h2></td> 
        <td><p><?=$row[1]?></p></td>
      </tr>
    <?php endwhile; ?>
<?php else: ?>
   <h5>No comments on <?=$pickstory?> so far. Be the first!</h5>
<?php endif; ?>
</table>

<?php mysql_free_result($result); mysql_close(); ?> 
```

# r - R中图形的pdf中有难看的白线

> ID：15628463
> 
> 赞同：7
> 
> 时间：2013-03-26T02:42:51.207
> 
> 标签：r, graphics

我正在尝试在 R 中制作颜色条以及光栅图，当导出为 pdf 时，输出数字会在其中给出难看的线条。

这是生成颜色条的代码。在 R 中运行它看起来不错：

```
color.bar <- function(lut, min, max=-min, nticks=11, ticks=seq(min, max, len=nticks), title='') {
    scale = (length(lut)-1)/(max-min)

    plot(c(0,10), c(min,max), type='n', bty='n', xaxt='n', xlab='', yaxt='n', ylab='', main=title)
    axis(4, ticks, las=1)
    for (i in 1:(length(lut)-1)) {
     y = (i-1)/scale + min
     rect(0,y,10,y+1/scale, col=lut[i], border=NA)
    }
}

par(mfrow=c(2,1))
par(mar=c(3,0,3,2.5))
pal = colorRampPalette(c("red","yellow"))
neg = pal(100)
pal = colorRampPalette(c("yellow","darkgreen"))
pos = pal(50)
color.bar(c(neg,pos),min=-75,max=50,ticks=c(-75,-50,-25,0,25,50))
color.bar(colorRampPalette(c("goldenrod","blue"))(25),min=0,max=1)
par(mar=c(5.1,4.1,4.1,2.1))
    dev.copy2pdf(file = "colorbar_wood.pdf", height = 8, width = 1)
pdf("colorbar_wood.pdf",width=1,height=8)
par(mfrow=c(2,1))
par(mar=c(3,0,3,2.5))
pal = colorRampPalette(c("red","yellow"))
neg = pal(100)
pal = colorRampPalette(c("yellow","darkgreen"))
pos = pal(50)
color.bar(c(neg,pos),min=-75,max=50,ticks=c(-75,-50,-25,0,25,50))
color.bar(colorRampPalette(c("goldenrod","blue"))(25),min=0,max=1)
par(mar=c(5.1,4.1,4.1,2.1))
 dev.off() 
```

这是我得到的pdf文件：

[关联](http://andrewcd.berkeley.edu/colorbar_RHC.pdf)

我需要把它提高到出版质量。关于如何解决的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T02:45:31.887

这始终是用于渲染 PDF 的软件的问题，**而不是**R 的问题，并且由于 PDF 查看器为了显示 PDF 而执行的抗锯齿和其他渲染操作等功能而出现。

这在 中进行了讨论`?pdf`，特别是

```
Note:

     If you see problems with PDF output, do remember that the problem
     is much more likely to be in your viewer than in R.  Try another
     viewer if possible.  Symptoms for which the viewer has been at
     fault are apparent grids on image plots (turn off graphics
     anti-aliasing in your viewer if you can) and missing or incorrect
     glyphs in text (viewers silently doing font substitution).

     Unfortunately the default viewers on most Linux and Mac OS X
     systems have these problems, and no obvious way to turn off
     graphics anti-aliasing.

     .... 
```

我刚刚在 Linux 上的两个不同的 PDF 查看器（Evince 和 Okular）中查看了您的 PDF，并且这些伪影对文件的影响程度在这两个查看器中是不同的，Okular 在红绿色上给出的伪影较少，而在蓝色上则没有-黄色的。因此，这似乎是查看 PDF 的问题，而不是 R 的问题。因此，您的数字应该是出版质量。

# macos - 如何确定mac上的引导驱动器？

> ID：15628465
> 
> 赞同：3
> 
> 时间：2013-03-26T02:42:58.833
> 
> 标签：macos, osx-mountain-lion

我需要在我的应用程序中确定 Mac 中的哪些内部驱动器是引导驱动器。我不确定驱动器是否有任何特定属性或任何特定文件可以帮助我唯一地识别内部引导驱动器。“diskutil info”命令给出了切片的“可引导”属性，但该属性不够好，因为该属性对于单个驱动器的多个切片或所有驱动器返回为 true。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:22:03.953

您可以使用“祝福”命令，例如

```
$ /usr/sbin/bless --info --getBoot
/dev/disk0s2 
```

有关更多信息，请参见“人保佑”。使用“--plist”参数，可以轻松地将输出解析为 a `NSDictionary`，以下示例代码演示了这一点：

```
NSTask *task = [[NSTask alloc] init];
[task setLaunchPath:@"/usr/sbin/bless"];
[task setArguments:@[@"--info", @"--getBoot", @"--plist"]];
NSPipe * out = [NSPipe pipe];
[task setStandardOutput:out];

[task launch];
[task waitUntilExit];

NSFileHandle *read = [out fileHandleForReading];
NSData *data = [read readDataToEndOfFile];
NSDictionary* plist = [NSPropertyListSerialization propertyListWithData:data options:0 format:NULL error:NULL];
NSLog(@"output: %@", plist); 
```

*输出：*

```
{
    "Boot Volume" = "/dev/disk0s2";
} 
```

# android - 找不到活动异常：找不到活动类

> ID：15628468
> 
> 赞同：0
> 
> 时间：2013-03-26T02:43:08.113
> 
> 标签：android, xml, exception

在下面显示的以下代码中，我尝试在单击查看按钮时打开一个新活动（memo.class 到 view.class）。但显示错误“活动未找到异常：无法找到显式活动类”。我的代码有什么问题？请帮我

我的代码：

备忘录.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="match_parent">

<TextView android:text="Titile" android:id="@+id/TextView01" android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>
<EditText android:id="@+id/question" android:layout_width="match_parent" android:layout_height="wrap_content" android:text=""></EditText>
<TextView android:text="Text" android:id="@+id/TextView01" android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>
<EditText android:minLines="6" android:maxLines="10" android:id="@+id/answer" android:layout_width="match_parent" android:layout_height="wrap_content" android:text=""></EditText>
<TableLayout android:layout_height="wrap_content"
        android:layout_width="wrap_content" android:layout_gravity="center"
        android:stretchColumns="*">
<TableRow>
<Button android:id="@+id/add" android:layout_width="wrap_content" android:text="ADD" android:layout_height="wrap_content"></Button>
<Button android:id="@+id/view" android:layout_width="wrap_content" android:text="VIEW" android:layout_height="wrap_content"></Button>
</TableRow>
</TableLayout>
</LinearLayout> 
```

备忘录.java

```
package quesansw.the1;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.EditText;

public class Memo extends Activity{

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        final Dialog d1 = new Dialog(this);
        Window window = d1.getWindow();
        window.setFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND,
                WindowManager.LayoutParams.FLAG_BLUR_BEHIND);

        d1.setTitle("Register Questions");

        d1.setContentView(R.layout.memo);
        d1.show();

        Button view1 = (Button) d1.findViewById(R.id.view);
        Button add = (Button) d1.findViewById(R.id.add);

        add.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v)
            {
                EditText add = (EditText) d1.findViewById(R.id.question);
                EditText view = (EditText) d1.findViewById(R.id.answer);
                System.out.println(add.getText());
                System.out.println(view.getText());

            }
          });

        view1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v)
            {
                Intent intent = new Intent(getBaseContext(), View.class);
                startActivity(intent);
            }
    });
}
} 
```

视图.xml

```
<?xml version="1.0" encoding="utf-8"?>

 <LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="match_parent">

<EditText android:id="@+id/question" android:layout_width="match_parent" android:layout_height="wrap_content" android:text=""></EditText>
</LinearLayout> 
```

视图.java

```
package quesansw.the1;

import android.app.Activity;
import android.app.Dialog;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;

public class View extends Activity { 
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final Dialog d1 = new Dialog(this);
        Window window = d1.getWindow();
        window.setFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND,
                WindowManager.LayoutParams.FLAG_BLUR_BEHIND);

        d1.setTitle("Login");

        d1.setContentView(R.layout.view);

        d1.show();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:45:06.887

您应该在清单中声明 Activity：

```
<activity
    android:name="com.yourpackagename.View"/> 
```

基本上，您的 AndroidManifest.xml 文件（位于根包文件夹中）充当整个应用程序的“设置”或“主控制器”，因此系统需要了解您将要执行的每个活动（本质上是一个页面）过渡到或使用。

以下是清单文件中[Activity 标记](http://developer.android.com/guide/topics/manifest/activity-element.html)中可以包含的其他内容。

旁注：正如@Tyler M. 所说，您应该为您的活动使用“查看”以外的其他名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:03:27.170

将您的`Activity`子类重命名为`View`.

使用现有类的名称通常是个坏主意——这是等待发生的参考灾难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:45:00.403

您很可能忘记将其包含在 Manifest.xml 中

# javascript - 为什么当 mousedown 左键或右键时代码在 jQuery 中不起作用？

> ID：15628471
> 
> 赞同：-2
> 
> 时间：2013-03-26T02:43:40.523
> 
> 标签：javascript, jquery, mouseevent, jquery-events, mousedown

html代码：

```
<div class="wrap">
</div> 
```

js代码：

```
$(document).ready(function() {
$("body").mousedown(function(event) {
    switch (event.which) {
        case 1:
            alert('hello!');
            break;
        case 2:
            alert('forbid the key');
            break;
        default:
            alert('hehhe');
    }
}); 
```

当我打开页面然后按鼠标左键时，它不会提醒你好。为什么？

当我按右键时，我想`alert("forbid the left")`，然后两分钟后关闭页面。如何将功能添加到案例 2。

ps：这是我想学习如何使用js使用左键和右键

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T02:47:32.557

## `mousedown`事件

它在稍微摆弄后起作用。

*   你在脚本的结尾处不见了`});`。
*   `.wrap`开始时不占用空间，我将其设置为`height`这样。
*   您的按钮编号错误 - 左 = 1，中 = 2，右 = 3。

[jsFiddle](http://jsfiddle.net/radpt/)

**CSS**

```
html, body, .wrap {
    height:100%;
} 
```

**JS**

```
$(document).ready(function () {
    $(".wrap").mousedown(function (event) {
        switch (event.which) {
            case 1:
                alert('left button');
                break;
            case 2:
                alert('middle button');
                break;
            default:
                alert('right button');
        }
    });
}); 
```

## 关闭窗口

您可以在一段时间后通过调用`window.close()`（或简单地`close()`）从`setTimeout()`

```
// Call close after 120000ms
setTimeout(close, 120000); 
```

## 想法

我必须同意 Fabrício Matté 的观点，做这种事情是非常糟糕的做法。你会因为做这些意想不到的事情和禁用正常功能而惹恼你的用户。我认为只有游戏/类似游戏应该覆盖右键单击事件。

# google-chrome - 加载覆盖在 Chrome 中不起作用，在 IE/Firefox 中起作用

> ID：15628473
> 
> 赞同：0
> 
> 时间：2013-03-26T02:43:44.813
> 
> 标签：google-chrome, load, overlay, fade, freeze

我的网页有一个超级简单的加载叠加层：

```
<script type="text/javascript">  

    $(window).load(function(){  
          $("#loading").fadeOut();  
    })

</script>

...
...

<body>

    <div id="loading">
        <div id="loadingimage"><img src="../pictures/loading.gif"></div>
    </div>

...
...
</body>

#loading {
height:100%;
width:100%;
position:fixed;
background-color: rgba(0,0,0,0.7);
filter:alpha(opacity = 80);
z-index:9999;
top:0;
bottom:0;
}
#loadingimage {
position:fixed;
height:100px;
width:100px;
top:50%; //center it
margin-top:-50px;
left:50%;
margin-left:-50px;
} 
```

这在 Firefox/IE 中运行良好，半透明的黑色覆盖和加载图像会在网页加载时淡出，但在 Chrome 中，加载 div 永远不会淡出（覆盖 + 图像），它只是永远挂在那里。鼠标图标也卡在“加载”图标中。我的网站只有一堆图像和文字，加载需要一个小时（这是我等了多长时间），所以代码一定有问题。

Chrome 不支持 "$(window).load(function()" 什么的吗？？这是 IE 第一次真正正确地做某事而 Chrome 不... O_o

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T11:52:27.080

Chrome 执行“同源策略”。你可能想谷歌一下。关于本地文件和诸如此类的东西。

# bison - 如何解决此“冲突：1 班次/减少”

> ID：15628476
> 
> 赞同：0
> 
> 时间：2013-03-26T02:44:10.667
> 
> 标签：bison, yacc, lex, flex-lexer

我写了一个语法来解析速度，它在“if elseif else”处有冲突

弹性文件：

```
%{
#include<stdio.h>
#include<string.h>
#include "context.h"
#include "bool.h"
#include "vtl4.tab.h"
%}
INT ([0-9]*)
%%
{INT} {return INTEGER;}
">" {return yytext[0];}
"(" {return yytext[0];}
")" {return yytext[0];}
"in" {return IN;}
"#foreach" {return FOREACH;}
"#end" {return END;}
"#if" {return IF;}
"#else" {return ELSE;}
"#elseif" {return ELSEIF;}
[^ \t] {yylval.string = yytext;return CONTENT;}
[ \t] {}
%% 
```

野牛文件：

```
%{
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "bool.h"
#include "parser.h"
#include "context.h"
#include "vtl4.tab.h"

extern FILE * yyin;
extern FILE * yyout;
extern int yylex();
extern int yywrap();
%}

%union {
struct simpleNode *ast;
double d;
int i;
bool b;
char* string;
struct symbol *sym;
}

%token <string> CONTENT NAME

%token IF ELSEIF ELSE END HASH DOLLAR PARENTHESIS PARENTHESIS_CLOSE LOGIC_EQUAL NEWLINE   INTEGER GL
%token FOREACH IN
%type <ast> stmts stmt

%nonassoc ELSEIF
%nonassoc ELSE

%%
stmts
: stmt{}
| stmts stmt{}
;

stmt:CONTENT {}
|directive {printf("stmt ---directive\n");}
|INTEGER {}
;

directive:FOREACH '(' exp ')' stmts END {printf("directive ---foreach\n");}
|if {printf("directive ---if\n");}
;

if:IF '(' cond ')' stmts END {printf("if\n");}
|IF '(' cond ')' stmts ELSE stmts END {printf("if else end\n");}
|IF '(' cond ')' stmts elseif END {printf("if elseif end\n");}
|IF '(' cond ')' stmts elseif ELSE stmts END {printf("if elseif ... else end\n");}
;

elseif:ELSEIF '(' cond ')' stmts {printf("one elseif\n");}
|elseif elseif {printf("Mul elseif\n");}
;

cond:INTEGER '>' INTEGER {printf("cond\n");}

exp:INTEGER IN INTEGER {printf("exp\n");}

%%
int main(){
FILE *src;
src = fopen("test.vm","r");
yyin = src;
yyparse();
fclose(src);
return 1;
}

int yywrap(){
return 1;
} 
```

输出文件说：

```
State 34 conflicts: 1 shift/reduce
...
state 34

12 elseif: . ELSEIF '(' cond ')' stmts
13       | . elseif elseif  [ELSEIF, ELSE, END]
13       | elseif . elseif  [ELSEIF, ELSE, END]
13       | elseif elseif .  [ELSEIF, ELSE, END]

 ELSEIF  shift, and go to state 25

 ELSEIF    [reduce using rule 13 (elseif)]
 $default  reduce using rule 13 (elseif)

 elseif  go to state 34 
```

我查了一些资料，并为ELSE和ELSEIF添加了优先级，但没有解决。请帮帮我！可能我不是很了解优先级机制

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:28:59.173

我不知道您希望解析的语言是如何工作的，所以这必须是一个猜测，但您的问题可能在这里：

```
elseif : ELSEIF '(' cond ')' stmts
   | elseif elseif
   ; 
```

一个 elseif 可以由两个相互接连的 elsif 组成。所以如果你有三个 elseif，它们应该被分组为**((elseif elseif) elseif)**还是**(elseif (elseif elseif))**？Bison 不知道，并报告了冲突。

另一件事是，如果您只使用语法而不是许多其他代码，那么理解和使用语法会更简单。您的 Bison 文件的最小可编译且格式更易读的版本如下所示（假设我在编辑时没有犯任何错误）：

```
%token IF ELSEIF ELSE END INTEGER FOREACH IN

%nonassoc ELSEIF
%nonassoc ELSE

%%

stmts : stmt
      | stmts stmt
      ;

stmt: directive | INTEGER ;

directive : FOREACH '(' exp ')' stmts END
          | if
          ;

if : IF '(' cond ')' stmts END
   | IF '(' cond ')' stmts ELSE stmts END
   | IF '(' cond ')' stmts elseif END
   | IF '(' cond ')' stmts elseif ELSE stmts END
   ;

elseif : ELSEIF '(' cond ')' stmts
       | elseif elseif
       ;

cond : INTEGER '>' INTEGER ;

exp : INTEGER IN INTEGER ;

%% 
```

我建议使用这种新语法，它不会产生任何移位/减少冲突。

**编辑：**我删除了 %nonassoc 优先级规范，因为它们不是必需的。您为每个 IF 使用带有 END 的语法，因此您不会遇到在类 C 语法中遇到的 if-if-else 冲突，您可以通过指定优先级来消除冲突。

```
%token IF ELSEIF ELSE END INTEGER FOREACH IN

%%

stmts : stmt
      | stmts stmt
      ;

stmt: directive | INTEGER ;

directive : FOREACH '(' exp ')' stmts END
          | if
          ;

if : IF '(' cond ')' stmts END
   | IF '(' cond ')' stmts ELSE stmts END
   | IF '(' cond ')' stmts elseifs END
   | IF '(' cond ')' stmts elseifs ELSE stmts END
   ;

elseifs : elseif | elseifs elseif ;

elseif : ELSEIF '(' cond ')' stmts
       ;

cond : INTEGER '>' INTEGER ;

exp : INTEGER IN INTEGER ;

%% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:32:27.820

您是否阅读了有关冲突的各种文档和其他 SO 问题？你应该。您会看到与您的问题无关`ELSE`（您引用的输出部分在冲突中没有提及它！）。

你的语法

```
elseifs: "#elseif" | elseifs elseifs 
```

显然是模棱两可的。尝试

```
elseifs: "#elseif" | elseifs "#elseif" 
```

或者可能

```
elseifs: | elseifs "#elseif" 
```

# excel - 在 excel 2007 中创建新的 xlm 宏

> ID：15628481
> 
> 赞同：0
> 
> 时间：2013-03-26T02:44:57.220
> 
> 标签：excel, macros, xlm, excel-4.0

是否仍然可以在 Excel 2007 中创建（注意**创建**：不运行）xlm 宏？我对历史语言很感兴趣（是的，我知道 xlm 宏在宏大的计划中并没有那么远）并且想用它们来解决问题。

我在网上搜索过，关于如何启用对旧版 xlm 宏的支持的点击量达到一百万次，这一切都很好。但我正在寻找有关如何创建新的信息。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:33:56.937

要在 XL2007 中创建宏工作表 - 右键单击​​工作表选项卡，选择插入，然后选择 Excel 4 宏工作表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-21T23:51:20.740

它可能需要也可能不需要宏表。但实际的问题是如何创建宏本身。它必须声明为宏。在仍然支持 XL4 宏（Excel 宏，相对于 VBA 宏（Visual Basic 宏））的 XL 14 中，您可以在一列中编写一系列 XLM 命令。它将自上而下执行。要声明它，您选择该范围的顶部单元格，然后在“插入”菜单下，在“名称”子菜单下，选择“定义”。给它一个合适的名字，然后点击“添加”。然后在同一个对话框中选择它，单选按钮将出现在下面。他们将提供“命令”、“功能”或“无”。根据需要选择命令或功能。

# javascript - 将内容保存到 Chrome 扩展程序中的文件

> ID：15628485
> 
> 赞同：1
> 
> 时间：2013-03-26T02:45:14.000
> 
> 标签：javascript, google-chrome-extension

有什么方法可以将字符串或图像等内容保存到 Chrome 扩展中的文件（如“C:\temp”）中？
chrome 或 js 是否提供任何 API 来处理文件系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-19T11:36:30.333

有一种方法可以通过 JS 触发系统文件保存对话。

```
function exportToFile() {
    var myString = "Lorem ipsum.";

    window.open('data:text/csv;charset=utf-8,' + escape(myString));
}
exportToFile(); 
```

另一种方法是使用新的 FILE API。

[http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:56:22.927

不，除了使用自定义[NPAPI 插件之外，chrome 扩展无法管理文件系统 con 可以在](http://en.wikipedia.org/wiki/NPAPI)[http://developer.chrome.com/extensions/npapi.html](http://developer.chrome.com/extensions/npapi.html)获得有关使用 NPAPI 插件的更多信息

# iphone - EventKit 中的 EKParticipant 错误地为 isCurrentUser 属性返回 NO

> ID：15628493
> 
> 赞同：28
> 
> 时间：2013-03-26T02:45:46.507
> 
> 标签：iphone, ios, eventkit

我正在尝试确定哪个`EKEvent's`与会者 ( `EKPartipants`) 是当前用户。在 iOS6 中，`EKParticipant`公开了一个名为 isCurrentUser 的属性

[http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKParticipantClassRef/Reference/Reference.html#//apple_ref/occ/cl/EKParticipant](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKParticipantClassRef/Reference/Reference.html#//apple_ref/occ/cl/EKParticipant)

它应该准确地提供这些信息。不幸的是，每次我查找一个`EKParticipant's` `isCurrentUser`属性时，它都会返回 NO，即使显然不是这样。

任何帮助将非常感激！

**更新的发现：**

如果您查找活动组织者，`isCurrentUser == YES`如果您是组织者，它会正确返回。但是，如果您从参加者集中检索自己，它会返回`isCurrentUser == NO`.

带有两个不同 EKParticipant 对象的示例控制台输出指的是具有相同电子邮件地址的同一个人：

```
(lldb) po [ekEvent.attendees objectAtIndex:3]
$20 = 0x208c1220 EKAttendee <0x208c1220> {UUID = CCD17C5E-FCB5-4BC9-8D9E-7E957B20025D;       
name= ----- -----; email = --------wa@me.com; status = 2; role = 0; type = 1}

(lldb) print [(EKParticipant *)[ekEvent.attendees objectAtIndex:3] isCurrentUser]
(BOOL) $15 = NO

(lldb) po ekEvent.organizer
$19 = 0x20b720e0 EKOrganizer <0x20b720e0> {UUID = FD0E434D-2C9F-4A6E-98DC-    
7FA6F27C3D1E; name = ----- -----; email = --------wa@me.com; isSelf = 1}

(lldb) print ekEvent.organizer.isCurrentUser
(BOOL) $16 = YES 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-16T14:43:46.870

默认情况下，活动的组织者不在与会者列表中，您明确将他添加为与会者。

组织者被认为与参加者不同，并用属性组织者来描述。如果您使用该对象访问 isCurrentUser，它将为您提供值 Yes。

如果您将组织者电子邮件 ID 明确添加为与会者，则将其视为不同的用户，因此您需要比较与会者 URL 并检查。

示例：用户 a..@a.com 组织了一次会议或活动并邀请了 b..@b.com，那么在与会者中您将只有 b..@b.com 并且 a..@a.com 将作为组织者。

如果您也将 a..@a.com 添加为参加者，则其属性 isCurrentUser 为否，您可以通过将参加者 URL 字符串本身与组织者进行比较来检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-18T09:46:27.580

是的，您可以确定 ekevent 的哪个参与者是当前用户。

我找到了一种`isCurrentUser`为任何参与者工作的方法。根据[https://stackoverflow.com/a/17222036/3683845](https://stackoverflow.com/a/17222036/3683845)我们可以得到与会者的电子邮件`EKParticipant.URL.resourceSpecifier`

好吧，你会收到正确的电子邮件，期待两个人。一个是组织者，另一个是在此设备上使用 AppleID 的当前用户。（如果活动是邀请）

当你访问这两个家伙时，他们`resourceSpecifier`就像

`/aMTA3MDAxMjE0MzEwNzAwMb6Y7GrNw2OCqzA8gkpxsctNZJxrzpebHm/principal/`

不是电子邮件格式。

## **更新**

它适用于我在 9.3.2 上的 iPhone。

我可以区分出席者中哪一个是当前用户。

与活动组织者交谈时，如果没有被邀请者，组织者将为 nil，这意味着该活动是由当前用户创建的，但`organizer.isCurrentUser`将为`NO`. 因为`organizer`是`nil`。

当用户邀请其他人参加此活动时，`organizer`将不为零，其`isCurrentUser`将是`YES`

# python - django - 对象过滤逻辑

> ID：15628494
> 
> 赞同：0
> 
> 时间：2013-03-26T02:45:49.153
> 
> 标签：python, database, django

我陷入了这种状态：我在 db 中有位置表。而且我还有评级表，其中包含每个位置的 id 引用的每个位置的评级。

现在我想获得前 5 个位置及其评级。所以我现在必须触摸 2 个表：位置和评级。

我这样做了：

```
all_locations = Locations.objects.all()[:5]
all_ratings = Rating.objects.filter(of_location=all_locations.id) 
```

但这似乎是错误的，因为`all_locations`它是一个包含 5 个位置而不是一个位置的查询集，所以它有 5 个不同的 id。但是我怎样才能实现这个目标呢？：**取 5 个位置，并对这 5 个位置中的每一个进行评分。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:59:47.503

你可以试试

```
all_locations = Locations.objects.all()[:5]
all_ratings = Rating.objects.filter(of_location__id__in=[location.id for location in all_locations]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T03:00:02.923

您可以使用[`in`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#in)指示该值包含在列表中：

```
locations_ids = [location.id for location in Locations.objects.all()[:5]]
all_ratings = Rating.objects.filter(location__id__in=locations_ids) 
```

# c# - 当子报表数据集值的状态为“false”时如何抑制子报表

> ID：15628496
> 
> 赞同：0
> 
> 时间：2013-03-26T02:46:17.220
> 
> 标签：c#, asp.net, crystal-reports, subreport

我的场景是我正在使用水晶报表，在包含许多子报表的主报表文档查看器中，

**现在我的问题是**

如何根据数据集列（数据库字段）**抑制（隐藏）子报表**，任何人都可以帮助我编写基于值的表达式。

```
1) if database column value is "1" --> Show the sub report.
2) If database column value is "0" --> Hide the sub report. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:12:49.770

您可以在 Surpress 中编辑公式，然后输入此公式

```
IF {db_column} = 1 THEN false ELSE true 
```

# jquery - 我如何循环 .next()？

> ID：15628500
> 
> 赞同：16
> 
> 时间：2013-03-26T02:46:39.457
> 
> 标签：jquery, loops, next

我有 3 个具有相同类的 div，我在单击时将“选择”类添加到 NEXT DIV 并将其从上一个类中删除，它工作正常，但我想循环它

目前它从 1 --> 2 --> 3 开始，我希望它循环，3-->1，请帮助...

HTML

```
<div id="all">
<div class="section selected">ONE</div>
<div class="section">TWO</div>
<div class="section">THREE</div>
</div>
<br />
<a href="javascript:;" id="button">CLICK</a> 
```

CSS

```
.selected{background:red} 
```

JS

```
$('#button').click(function(){
    $('.section.selected').removeClass('selected').next('.section').addClass('selected'); 
}); 
```

JS 小提琴链接：http: [//jsfiddle.net/madhuri2987/KK66g/2/](http://jsfiddle.net/madhuri2987/KK66g/2/)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-26T02:50:38.393

最简单的方法就是检查是否`.next()`存在，如果不存在则“选择”第一个。

```
var $next = $('.section.selected').removeClass('selected').next('.section');
if ($next.length) {
    $next.addClass('selected'); 
}
else {
    $(".section:first").addClass('selected');
} 
```

[http://jsfiddle.net/KK66g/3/](http://jsfiddle.net/KK66g/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T04:19:36.063

我不确定我是否应该在每种情况下都声称这有效，但我一直想知道是否有可能前进到最后一个无效的情况。这就是我的工作：

```
$('#button').click(function(){
    $('.selected + .section, .section:eq(0)')
        .last().addClass('selected')
        .siblings('.selected').removeClass('selected');
}); 
```

[http://jsfiddle.net/userdude/9UFD2/](http://jsfiddle.net/userdude/9UFD2/)

这样做是首先选择`.section`之后的内容`.selected`：

```
.selected + .section 
```

我还添加了一个辅助选择器以确保并获得至少一个匹配项：

```
, .section:eq(0) 
```

以上代表第一个`$('.section')[0]`，在这个比较简单的例子中。然后我使用`.last()`复合选择的结果，给我一个结果`[1]`（对于什么是有效的`.next()`匹配），或者给我`[0]`第一个匹配（参见，如果列表中只有一个结果，`.last()`将给出*第一个*和*最后一个）。*

尽管选择器的顺序看似与 using 相反`.last()`，但这似乎可以代替`.first()`，为此我不一定理解为什么会这样。这是[选择器的顺序](http://jsfiddle.net/userdude/9UFD2/1/)，所以我按照它们在选择中有意义的方式对它们进行了排序。

然后，剩下的就很简单了。将一个类添加到选择器返回的任何一个`.last()`，然后找到`.siblings()`（新）选择的那个（`.section`唯一`.selected`的另一个是我们要从中选择的那个）并删除它的`.selected`类。

它似乎工作。我想我想听听关于这是否可靠的任何评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:34:52.947

我做了一个这样的简单代码

```
var i=0;
$('#button').click(function(){
    i++;
    if(i == $('.section').length) {$('.section.selected').removeClass('selected');$($('.section')[0]).addClass('selected');i=0;}
    else{$('.section.selected').removeClass('selected').next('.section').addClass('selected');}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T03:35:34.163

### 咖啡脚本

我想我会为那些使用它的人分享我简单的 CoffeeScript 解决方案：

```
$currently_selected = $('.section.selected')

# Loop back to first sibling if on the last one. 
if $currently_selected.next().length is 0 
  $next_selected = $currently_selected.siblings().first()

else 
  $next_selected = $currently_selected.next()

$currently_selected.removeClass('selected')
$next_selected.addClass('selected') 
```

*注意：确保将适当的传递`selector`给`next()`以及`siblings()`是否有您不想包含在循环/循环中的兄弟姐妹。*

# django - 根据用户显示信息

> ID：15628503
> 
> 赞同：1
> 
> 时间：2013-03-26T02:47:18.547
> 
> 标签：django, views

我有一个`Schedule`用字段调用的类（这是正确的吗？）我使用 `admins = models.ManyToManyField(User)`. 此字段包含我可以选择多个用户的列表。

在时间表视图中，我显示了一堆信息。我想根据当前登录的用户是否包含在正在查看的时间表的管理员中来显示一些额外的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:27:39.550

According to Django philosophy, you should have your business logic within views and presentation logic in the template. So the computation if the logged user is among the admins should be done in a view, and if the user is, then what is displayed should be determined in the template. You can accomplish that by:

```
# views.py
def schedule(request, id):
    schedule = get_object_or_404(Schedule, pk=id)
    if request.user.is_authenticated():
        is_admin = schedule.admins.filter(pk=schedule.pk).exists()
    else:
        is_admin = False
    data = {
        'schedule': schedule,
        'is_admin': is_admin,
    }
    return render_to_response('template.html', data)

# template.html
{% if is_admin %}
    <p>You are an admin of the schedule!</p>
{% else %}
    <p>Sorry. You are not an admin of the schedule</p>
{% endif %} 
```

# javascript - 在aptana3中自定义我自己的片段后如何启用键盘事件？

> ID：15628509
> 
> 赞同：0
> 
> 时间：2013-03-26T02:47:50.760
> 
> 标签：javascript, ruby, code-snippets, aptana3

我在**JavaScript 气泡项目中有一个自定义片段，** **snippets.rb**。重新启动 Aptana 后，我可以在片段视图中看到我的定义，但这是唯一的触发器。如何启用键盘触发器。**`double click`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:35:06.227

我想我找到了原因。我确实`s.trigger="log"`在`snippets.rb`文件中定义了一行，但我忘记在 中添加定义`console_log: "Console log"`，`PROJECT/config/locales/en.yml`这是启用键盘快捷键的方法。**

# jquery - 我将 .live 方法更改为 .on 以加载 ajax 调用，但它不起作用

> ID：15628514
> 
> 赞同：0
> 
> 时间：2013-03-26T02:48:43.797
> 
> 标签：jquery, jquery-plugins

我将下面的所有内容从 .live 更改为 .on 并根据我发现的许多讨论修改了代码，但是当我在 Visual Studio 中运行代码时，我不断收到以下错误：

http://'server':6665/Scripts/jquery.unobtrusive-ajax.js 中第 115 行第 5 列未处理的异常

0x800a01b6 - JavaScript 运行时错误：对象不支持属性或方法“live”

Visual Studio 显示错误的文件是 jquery.unobtrusive-ajax.js [dynamic] <-- 这个文件在哪里？在我更改以下所有内容之前，它正在使用已弃用的 .live 方法突出显示旧代码......

我还安装了迁移包，但没有用。

```
$(document).on("click", "a[data-ajax=true]", function (evt) {
    evt.preventDefault();
    asyncRequest(this, {
        url: this.href,
        type: "GET",
        data: []
    });
});

$(document).on("click", "form[data-ajax=true] input[type=image]", function (evt) {
    var name = evt.target.name,
        $target = $(evt.target),
        form = $target.parents("form")[0],
        offset = $target.offset();

    $(form).data(data_click, [
        { name: name + ".x", value: Math.round(evt.pageX - offset.left) },
        { name: name + ".y", value: Math.round(evt.pageY - offset.top) }
    ]);

    setTimeout(function () {
        $(form).removeData(data_click);
    }, 0);
});

$(document).on("click", "form[data-ajax=true] :submit", function (evt) {
    var name = evt.target.name,
        form = $(evt.target).parents("form")[0];

    $(form).data(data_click, name ? [{ name: name, value: evt.target.value }] : []);

    setTimeout(function () {
        $(form).removeData(data_click);
    }, 0);
});

$(document).on("submit", "form[data-ajax=true]", function (evt) {
    var clickInfo = $(this).data(data_click) || [];
    evt.preventDefault();
    if (!validate(this)) {
        return;
    }
    asyncRequest(this, {
        url: this.action,
        type: this.method || "GET",
        data: clickInfo.concat($(this).serializeArray())
    });
}); 
```

谢谢！托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-18T11:10:20.593

我添加了 jquery migrate 插件并将其包含在 bundles.config 文件中

```
PM> Install-Package jQuery.Migrate 
```

然后在 bundlesConfig.cs

```
bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                   "~/Scripts/jquery-migrate-1.2.1.js",
                    "~/Scripts/jquery.unobtrusive*",
                    "~/Scripts/jquery.validate*")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:42:21.223

.Live 已从 jquery 1.9+ [http://jquery.com/upgrade-guide/1.9/中删除](http://jquery.com/upgrade-guide/1.9/)

您应该升级`jquery.unobtrusive-ajax.js`，因为它依赖于较旧的 jquery 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T00:33:52.263

我最近不得不对一个遇到 $("foo").live() 错误的 C# 项目进行一些修改。由于动态脚本，对 $("foo").on() 的更改也给我带来了错误。

您看到的是旧代码，因为它已被缓存。对于 IE 11，请执行以下操作：Internet 选项 -> 常规 -> 浏览历史记录 -> 设置 -> 在我启动 IE 时检查更新版本。或者，如果您愿意，每次访问页面时。

# java - 使用数组创建布尔方法

> ID：15628516
> 
> 赞同：-2
> 
> 时间：2013-03-26T02:49:06.243
> 
> 标签：java, compiler-errors

我正在尝试创建一个静态布尔方法，该方法传递一个对象数组，如果该数组包含至少一个空对象，则返回 true。

这是我的代码，但它不接受它，说有编译错误。

```
public static boolean anyEmptyObject(object[] objects){
for(int k = 0;k<object.length; k++){
        if (objects[k].getEmpty()==true){
          return true;}
      else {return false;}
}
} 
```

（getEmpty 已经是一个声明的方法，如果对象为空则返回）

不知道我的错误在哪里，因为它看起来没问题？可能是我的括号？

错误只是

```
The system has detected compilation errors. This could be caused by:
Missing semicolon ; at the end of a statement.
Unclosed braces {}.
Unclosed parentheses ().
Unterminated string literals "".
Invalid method signature.
Missing return statement.
Redeclared variable or data member.
etc. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:50:55.263

看起来你把`object.length`而不是`objects.length`放在你的`for`循环中，它应该是一个大写的 O`Object[] objects`

此外，如果您返回，它将几乎结束循环。这不是你想要的。

记住：如果你放了一个`;`，那意味着它是行尾。您的缩进将在最后两个之后错过括号`;`

```
 public static boolean anyEmptyObject(Object[] objects){
        for(int k = 0;k<objects.length; k++){
            if (objects[k].equals(null)){
                return true;
            }
        }
        return false;
    } 
```

这将遍历你的数组，如果它命中一个空值，即使它返回 true，如果它通过整个数组而没有命中一个空对象，那么它将运行整个 for 循环，然后继续执行 return false 语句说那里此数组中没有空对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:53:18.910

数组中的对象类型是什么？您需要先转换对象，然后才能调用如下成员方法

```
if (((YouClass)objects[k]).getEmpty()==true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:53:01.840

我看到两个错误（我建议您仔细阅读编译错误 - 它们通常很有帮助）

1.  循环条件应该是 on `objects`，而不是`object`

2.  该方法不能保证到达返回语句（编译器不知道您是否总是进入循环）。此外，逻辑不正确。如果将`return false`部分移出循环，它将在逻辑和语义上都是正确的。

此外，如果您循环使用 java.lang.Object 类型的对象，不要期望它们具有 getEmpty() 方法。

# java - 在 Struts 2 中启动服务器时，如何在操作类中获取 UTF-8 文本？

> ID：15628522
> 
> 赞同：2
> 
> 时间：2013-03-26T02:49:35.167
> 
> 标签：java, jsp, utf-8, struts2, character-encoding

我正在使用 Hibernate 通过 Struts 2 开发一个 Web 应用程序。

但是我有一个问题，当我启动服务器并加载网站时，我的加载方法将被调用。但是，它无法加载 UTF-8，而不是`"Phương"`我得到`"PH??NG"`But in JSP page still display `"Phương"`。因此，当我执行我的 SQL 查询时，它是 ( `from Posts WHERE topics like '%PH??NG PHÁP GIÁO D?C TR?%'`，所以我无法查询我的数据库。

我的动作课在这里：

```
public class PostsAction extends ActionSupport {
private List<HomeTopic> homeTopics = new ArrayList<HomeTopic>();
public List<HomeTopic> getHomeTopics() {
    return homeTopics;
}

public void setHomeTopics(List<HomeTopic> homeTopics) {
    this.homeTopics = homeTopics;
}

public void callHomeTopics(){
     Session session = HibernateUtil.getSessionFactory().openSession();
    Transaction trans = session.beginTransaction();
    String[] list = {"NEW – TIN TỨC TRẺ&quot;,"Khu Vui Chơi Cho Trẻ&quot;,"PHƯƠNG PHÁP GIÁO DỤC TRẺ&quot;,"KỸ NĂNG – KINH NGHIỆM","Phòng Bệnh","Tập Tô Màu"};
    for (int i = 0; i < list.length; i++) {
            getTopics(session, trans, list[i]);
        }
trans.commit();
    session.close();
}

public void getTopics(Session session, Transaction trans, String type) {
    String hql = "from Posts WHERE topics like '%" + type + "%'";
    System.out.println("HQL: " + hql);
    Query query = session.createQuery(hql);
    query.setMaxResults(3);
    List<Posts> t = (ArrayList<Posts>) query.list();
    HomeTopic h = new HomeTopic(type, t);
    System.out.println("List topics: " + type + " " + t);
    homeTopics.add(h);
    session.flush();
} 
```

**`HomeTopics.java`班级：**

```
 public class HomeTopic {

    private String nameTopic;
    private List<Posts> postList;

    public List<Posts> getPostList() {
        return postList;
    }

    public void setPostList(List<Posts> postList) {
        this.postList = postList;
    }

    public HomeTopic(String nameTopic, List<Posts> postList) {
        this.nameTopic = nameTopic;
        this.postList = postList;
    }

    public HomeTopic() {
    }

    @Override
    public String toString() {
        return "HomeTopic{" + "nameTopic=" + nameTopic + ", postList=" + postList + '}';
    }

    public String getNameTopic() {
        return nameTopic;
    }

    public void setNameTopic(String nameTopic) {
        this.nameTopic = nameTopic;
    }
} 
```

当我编写 main 方法进行测试时，它仍然显示 UTF-8。但是每当我`callHomeTopics()`在浏览器中启动服务器并调用方法时，文本将是`"PH??NG PHÁP GIÁO D?C TR?"`.

但是在 JSP 页面中仍然显示`"Phương Pháp Giáo Dục Trẻ&quot;`。一切都好，除了我的 HQL 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:30:10.820

由于您（出于测试目的，我想）对您的值进行硬编码，而不是从数据库或网页中读取它们，因此您需要确保用于将它们插入页面的 IDE 正在运行`UTF-8`；

在 Eclipse 中，转到`Window`-> `Preferences`-> `General`-> `Workspace`-> `Text file encoding`-> `Other`-> `UTF-8`。

这也是在打印到控制台时查看正确值所必需的。

当您从 JSP 或数据库中读取值时，请注意字符编码，并确保使用

```
byte[] utf8Bytes = myString.getBytes("UTF-8"); 
```

用于编码，以及

```
String myString = new String(utf8Bytes, "UTF-8") 
```

用于解码。

[http://docs.oracle.com/javase/tutorial/i18n/text/string.html](http://docs.oracle.com/javase/tutorial/i18n/text/string.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:10:10.510

要在 JSP 中正确显示字符到相应的编码，您应该使用 JSP`page`指令并指定`contentType`with 编码。例如

```
<%@ page contentType="text/html;charset=UTF-8" %> 
```

这将在页面上以 UTF-8 编码显示字符。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T05:52:49.790

为您的法语字符使用相应的 utf 代码，而不是直接使用它们。例如

```
use &#233; for é 
```

希望这可以帮助

# php - 包含包含的文本放置

> ID：15628524
> 
> 赞同：0
> 
> 时间：2013-03-26T02:49:38.773
> 
> 标签：php, css

我不完全确定如何解释这一点，但我会尽力而为。我对此很陌生：/

这是我正在使用的基本模板，我将其作为包含，并将其包含在我的所有页面中。一切正常，但是，我希望能够在模板的正文区域中放置不同的文本/内容每一页。现在，每当我向页面添加内容时，模板正文区域都保持空白，并且我添加的所有内容都位于整个模板的下方。

```
<html>
<head>
<title>Title</title>
<style>
/* Start CSS */

/* This changes your link colors */
A:link 
{ text-decoration: none; color: #003399; }
A:visited 
{ text-decoration: none; color: #003399; }
A:active
{ text-decoration: none; color: #003399; }
A:hover 
{ text-decoration: none; color: #6666FF; }

/* This changes the basic properties of your layout */
body
{ font-family: Verdana; sans serif; helvetica;
color: #333333;
font-size: 10px;
background-color: #778899;
background-image: url('../ ');
text-align: justify;
margin-bottom: 5px; 
margin-right: 0px; 
margin-top: 5px;
}

/* This code centers the layout */
#container {
margin:0px auto 0px auto;
width:100%;
text-align:center;
}

/* Leave this be */
#container2 {
width: 1100px;
text-align: left;
margin: 0px auto;
position: relative;
min-height: 300px;
}

/* This code controls the properties of your left menu */
#leftmenu
{ font-family: Verdana; sans serif; helvetica;
color: #333333;
font-size: 10px;
background-color: #E8E8E8;
background-image: url('../ ');
text-align: left;
border: 0px solid #000000;
width:160px;
padding:10px;
}
/* This code controls the link boxes on the sidebars */
a:link,a:visited
{
display:block;
font-weight:bold;
color:#FFFFFF;
background-color:#98bf21;
width:160px;
text-align:center;
padding:4px;
text-decoration:none;
}
a:hover,a:active
{
background-color:#7A991A;
}

/* This code controls the properties of your right menu */
#rightmenu
{ font-family: Verdana; sans serif; helvetica;
color: #333333;
font-size: 10px;
background-color: #E8E8E8;
background-image: url('../ ');
text-align: right;
border: 0px solid #000000;
width:160px;
padding:10px;
}

/* This code is not mandatory, but sets a background for the menu headers */
#menuheader
{ font-family: verdana; helvetica; sans serif;
color: #333333;
font size: 10px;
background-color: #CCCCCC;
background-image: url('../ ');
text-align: center;
margin-top: 5px;
padding:3px;
}

/* This code controls the properties of your content */
#content
{ font-family: Verdana; sans serif; helvetica;
color: #333333;
font-size: 10px;
background-color: #FFFFFF;
background-image: url('../ ');
border: 0px solid #000000;
padding:10px;
}

/* This code controls the properties of your disclaimer */
#disclaimer
{ font-family: Verdana; sans serif; helvetica;
color: #333333;
font-size: 10px;
background: #CCCCCC;
background-image: url('../ ');
border: 0px solid #000000;
text-align:center;
width:1100px;
height:90px;
padding:10px;
}

/* This code controls the properties of your banner */ 
#banner
{ background: #CCCCCC;
background-image: url('../Images/Banner.png');
border: 0px solid #000000;
text-align:center;
width:1100px;
height:200px;
}

/* This sets the properties for content headers */
h1
{ font-family: verdana; sans serif;
font-size: 15px;
font-weight: bold;
font-variant: small-caps;
align:center;
}

/* End CSS */

</style>
</head>
<body leftmargin="0" rightmargin="0" topmargin="10" bottommargin="10">
<div id="container">
<div id="container2">

<table cellspacing="0" cellpadding="0" border="0">
<tr><td valign="top" id="banner" colspan="3"></td></tr>
   <tr>
      <td valign="top" id="leftmenu">

<!-- Start Left Menu -->

         <div id="menuheader">Home</div>
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a>

         <div id="menuheader">Shops</div>
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a>

<!-- End Left Menu-->

      </td>
      <td valign="top" id="content">
         <div align="justify">

<!-- Start Content -->

<!-- End Content -->
</div>
      </td>
      <td valign="top" id="rightmenu">

<!-- Start Right Menu -->

         <div id="menuheader">Ranks</div>
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a>

         <div id="menuheader">Maps</div>
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a><br />
         <a href="#">Link Here</a>

<!-- End Right Menu -->

      </td>
   </tr>
   <tr>
      <td valign="top" id="disclaimer" colspan="3">

<!-- Start Disclaimer -->

Add disclaimer.

<p>

<!-- End Disclaimer -->

      </td>
   </tr>
</table>
</div>
</div>
</body>
</html> 
```

我知道这可能是一些非常简单的愚蠢的事情，但我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:01:01.510

好吧，也许不是最好的方法，但它确实有效。

添加`echo body_content();`到主模板的正文标签，然后在每个页面上做这样的内容

```
function body_content(){
   echo 'simple content';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:57:50.273

PHP include() 表示嵌入文件内容。它将根据它的实际顺序进行解析。我猜你需要一些框架。您不能仅通过包含文件并在其后立即放置东西来在该正文模板上放置一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T03:10:28.247

我不会继续走这条路。包含对于您需要在每个页面上重复的内容很有帮助，例如页脚、侧边栏、导航、页眉等。您可以将所有这些内容复制到某些包含中，但使用单独的 .html 或 .html 会更有意义。每个页面的 php 文档。或者，使用像 jQuery mobile 这样的框架，但听起来你还没有准备好。祝你好运！

# iphone - Objective-c 中的无线更新

> ID：15628533
> 
> 赞同：0
> 
> 时间：2013-03-26T02:50:35.457
> 
> 标签：iphone, objective-c, xcode, uiwebview

I have an application in the store that has a bunch of `UITableViews`, each has a bunch of items that when selected, load a `UIWebView`that loads a local **HTML** file. 我这样做的原因是它允许在没有互联网访问时查看，但是它使更新变得乏味。

我将如何同时保留本地文件和保留 web 文件，以便如果我在 web 上更新一个文件，它会让用户知道有一个“更新”，它可以下载并用新文件覆盖旧文件。这可能吗？就像我会让自己成为编辑我的**HTML**的后端，并与应用程序建立连接，所以每当我点击保存时，应用程序就会知道要求用户更新文件，这样我就不必向苹果提交如此小的更新.

但是我仍然需要允许离线查看，以防他们无法访问互联网。

我必须研究哪些技术或技巧才能实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:48:14.807

您正在寻找的是一个名为[应用程序缓存](http://www.html5rocks.com/en/tutorials/appcache/beginner/)的 html5 概念。它直接解决了您的问题。使用应用缓存，您可以在客户端缓存静态内容，即使他们处于离线状态也可以查看这些内容，但他们可以在服务器上的内容发生更改时对其进行更新。如果你[环顾四周，](https://stackoverflow.com/questions/264367/iphone-web-app-cache-persistence)你会发现人们也将它用于 iPhone。

**更新：** *我将如何从服务器上的文件重写手机上的文件？*

你基本上更新缓存来做到这一点。来自[文档](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/Client-SideStorage/Client-SideStorage.html#//apple_ref/doc/uid/TP40002051-CH4-SW1)：

> 仅当清单文件更改时，应用程序缓存才会自动更新。如果清单文件中列出的资源发生更改，它不会自动更新。如果清单文件逐字节相同，则认为清单文件未更改；因此，更改清单文件的修改日期也不会触发更新。如果这对您的应用程序来说还不够，您可以使用 JavaScript 显式更新应用程序缓存。

我鼓励您阅读 html5 本地存储，以了解本地缓存和清单文件等的概念，然后按照苹果文档上的说明进行操作。这并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:37:58.520

您可以按照 abbood 的说明缓存内容，但这不允许您提供初始离线内容。

另一种方法是使用`NSURLProtocol`，它允许您混合请求。例如，如果您请求“ [http://google.com](http://google.com) ”，您将能够更改 URL 或加载您自己的内容（例如从本地目录）。

# python - 如何使用 Python 检索给定用户的所有推文和属性？

> ID：15628535
> 
> 赞同：11
> 
> 时间：2013-03-26T02:50:37.060
> 
> 标签：python, twitter, oauth, tweepy

我正在尝试从 Twitter 检索数据，使用 Tweepy 作为在命令行键入的用户名。我想提取相当多的关于状态和用户的数据，所以想出了以下内容：

请注意，我正在导入所有必需的模块，并且有 oauth + 密钥（只是不包括在此处）并且文件名是正确的，只是被更改了：

```
# define user to get tweets for. accepts input from user
user = tweepy.api.get_user(input("Please enter the twitter username: "))

# Display basic details for twitter user name
print (" ")
print ("Basic information for", user.name)
print ("Screen Name:", user.screen_name)
print ("Name: ", user.name)
print ("Twitter Unique ID: ", user.id)
print ("Account created at: ", user.created_at)

timeline = api.user_timeline(screen_name=user, include_rts=True, count=100)
    for tweet in timeline:
        print ("ID:", tweet.id)
        print ("User ID:", tweet.user.id)
        print ("Text:", tweet.text)
        print ("Created:", tweet.created_at)
        print ("Geo:", tweet.geo)
        print ("Contributors:", tweet.contributors)
        print ("Coordinates:", tweet.coordinates) 
        print ("Favorited:", tweet.favorited)
        print ("In reply to screen name:", tweet.in_reply_to_screen_name)
        print ("In reply to status ID:", tweet.in_reply_to_status_id)
        print ("In reply to status ID str:", tweet.in_reply_to_status_id_str)
        print ("In reply to user ID:", tweet.in_reply_to_user_id)
        print ("In reply to user ID str:", tweet.in_reply_to_user_id_str)
        print ("Place:", tweet.place)
        print ("Retweeted:", tweet.retweeted)
        print ("Retweet count:", tweet.retweet_count)
        print ("Source:", tweet.source)
        print ("Truncated:", tweet.truncated) 
```

我希望这最终能够遍历用户的所有推文（最多 3200 条限制）。不过，第一件事。到目前为止，虽然我有两个问题，但我收到以下关于转推的错误消息：

```
Please enter the twitter username: barackobamaTraceback (most recent call last):
  File " usertimeline.py", line 64, in <module>
    timeline = api.user_timeline(screen_name=user, count=100, page=1)
  File "C:\Python32\lib\site-packages\tweepy-1.4-py3.2.egg\tweepy\binder.py", line 153, in _call
    raise TweepError(error_msg)
tweepy.error.TweepError: Twitter error response: status code = 401
Traceback (most recent call last):
  File "usertimeline.py", line 42, in <module>
    user = tweepy.api.get_user(input("Please enter the twitter username: "))
  File "C:\Python32\lib\site-packages\tweepy-1.4-py3.2.egg\tweepy\binder.py", line 153, in _call
    raise TweepError(error_msg)
tweepy.error.TweepError: Twitter error response: status code = 404 
```

将用户名作为变量传递似乎也是一个问题：

```
Traceback (most recent call last):
  File " usertimleline.py", line 64, in <module>
    timeline = api.user_timeline(screen_name=user, count=100, page=1)
  File "C:\Python32\lib\site-packages\tweepy-1.4-py3.2.egg\tweepy\binder.py", line 153, in _call
    raise TweepError(error_msg)
tweepy.error.TweepError: Twitter error response: status code = 401 
```

我已经隔离了这两个错误，即它们没有一起工作。

原谅我的无知，我对 Twitter API 并不太热，但我学得很快。Tweepy 文档确实很烂，我已经在网上进行了大量阅读，但似乎无法解决这个问题。如果我能对此进行排序，我将发布一些文档。

我知道如何在提取数据后将数据传输到 MySQL 数据库中（它会这样做，而不是打印到屏幕上）并对其进行操作，以便我可以用它做一些事情，只是把它弄出来我遇到了问题. 有没有人有任何想法或者我应该考虑另一种方法？

任何帮助都非常感谢。干杯

编辑：

遵循@Eric Olson 今天早上的建议；我做了以下。

1) 创建了一套全新的 Oauth 凭据进行测试。2）将代码复制到新脚本中，如下所示：

认证

```
consumer_key = "(removed)"
consumer_secret = "(removed)"
access_key="88394805-(removed)"
access_secret="(removed)"
auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_key, access_secret)
api=tweepy.API(auth)

# confirm account being used for OAuth
print ("API NAME IS: ", api.me().name)
api.update_status("Using Tweepy from the command line") 
```

我第一次运行脚本时，它工作正常并更新我的状态并返回 API 名称，如下所示：

```
>>> 
API NAME IS:  Chris Howden 
```

然后从那时起，我得到了这个：

```
Traceback (most recent call last):
  File "C:/Users/Chris/Dropbox/Uni_2012-3/6CC995 - Independent Studies/Scripts/get Api name and update status.py", line 19, in <module>
    api.update_status("Using Tweepy frm the command line")
  File "C:\Python32\lib\site-packages\tweepy-1.4-py3.2.egg\tweepy\binder.py", line 153, in _call
    raise TweepError(error_msg)
tweepy.error.TweepError: Twitter error response: status code = 403 
```

我能看到它这样做的唯一原因是它拒绝生成的访问令牌。我应该不需要更新访问令牌吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T01:31:24.563

如果你愿意尝试另一个图书馆，你可以[试试 rauth](https://github.com/litl/rauth)。已经[有一个 Twitter 示例](https://github.com/litl/rauth/blob/master/examples/twitter-timeline-cli.py)，但是如果您感到懒惰并且只想找到一个工作示例，那么我将如何修改该演示脚本：

```
from rauth import OAuth1Service

# Get a real consumer key & secret from https://dev.twitter.com/apps/new
twitter = OAuth1Service(
    name='twitter',
    consumer_key='J8MoJG4bQ9gcmGh8H7XhMg',
    consumer_secret='7WAscbSy65GmiVOvMU5EBYn5z80fhQkcFWSLMJJu4',
    request_token_url='https://api.twitter.com/oauth/request_token',
    access_token_url='https://api.twitter.com/oauth/access_token',
    authorize_url='https://api.twitter.com/oauth/authorize',
    base_url='https://api.twitter.com/1/')

request_token, request_token_secret = twitter.get_request_token()

authorize_url = twitter.get_authorize_url(request_token)

print 'Visit this URL in your browser: ' + authorize_url
pin = raw_input('Enter PIN from browser: ')

session = twitter.get_auth_session(request_token,
                                   request_token_secret,
                                   method='POST',
                                   data={'oauth_verifier': pin})

params = {'screen_name': 'github',  # User to pull Tweets from
          'include_rts': 1,         # Include retweets
          'count': 10}              # 10 tweets

r = session.get('statuses/user_timeline.json', params=params)

for i, tweet in enumerate(r.json(), 1):
    handle = tweet['user']['screen_name'].encode('utf-8')
    text = tweet['text'].encode('utf-8')
    print '{0}. @{1} - {2}'.format(i, handle, text) 
```

您可以按原样运行，但请务必更新凭据！这些仅用于演示目的。

完全披露，我是 rauth 的维护者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T06:18:57.510

您收到 401 响应，表示“未经授权”。 [（请参阅 HTTP 状态代码）](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

你的代码看起来不错。`api.user_timeline(screen_name="some_screen_name")`在我躺着的旧示例中使用对我有用。

我猜你要么需要授权应用程序，要么你的 OAuth 设置有问题。

也许你已经找到了，但这里是我开始的简短代码示例：[https ://github.com/nloadholtes/tweepy/blob/nloadholtes-examples/examples/oauth.py](https://github.com/nloadholtes/tweepy/blob/nloadholtes-examples/examples/oauth.py)

# objective-c - 使用代码关闭位置服务警报

> ID：15628543
> 
> 赞同：0
> 
> 时间：2013-03-26T02:52:10.937
> 
> 标签：objective-c, macos, cocoa, core-location

我正在为我的一个 Cocoa 应用程序使用 Core Location API。每次应用程序启动时，它都会发出警报，要求用户允许使用位置服务。我想使用位置服务，但每次启动应用程序时，我都不希望用户授予权限。有什么方法可以从代码中消除此警报并且仍然返回纬度/经度坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:15:33.857

[我为你做了一些关于开发论坛的研究，如果你在 Xcode](http://devforums.apple.com/thread/162285)***之外***运行你的应用程序，它不应该每次都要求你授权。

# qt - 使用 QTcpSocket 传输文件时出现奇怪的字符

> ID：15628544
> 
> 赞同：0
> 
> 时间：2013-03-26T02:52:12.093
> 
> 标签：qt, qt4, qtcpsocket, qtcpserver

我正在尝试使用 QTcpSocket 传输文件。连接运行良好，但我的问题是当我尝试在文件中记录接收到的字节时。当我打开文件时，文件开头有一些奇怪的字符。这些字符是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:31:23.347

我的问题是我将整个对象保存在我的文件中。当我们`>>`在流中使用操作符时，Qt 将整个对象序列化并发送出去。如果您只想写入文件的字节，或者您想要的任何内容，您需要使用`writeRawData`或传递 char * 字节的写入方法。

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:05:22.980

他们可能正在描述文件文本的编码。例如 UTF-8 v. ISO### 标准。如果您获取文本块并将其设置为正确的编码，则这些字符很可能会消失。

这是了解它的起点：

[http://en.wikipedia.org/wiki/Unicode_and_HTML](http://en.wikipedia.org/wiki/Unicode_and_HTML)

[http://qt-project.org/doc/qt-4.8/qstring.html#toUtf8](http://qt-project.org/doc/qt-4.8/qstring.html#toUtf8)

希望有帮助。

# java - Webshpere 和 QOS logback：日志文件被锁定以进行滚动

> ID：15628546
> 
> 赞同：0
> 
> 时间：2013-03-26T02:52:28.113
> 
> 标签：java, websphere, logback

今天是个好日子。

我无法解决下一个问题：

我们将 WebSphere 应用服务器用于我们的应用程序，并使用“logback”日志框架来管理我们的日志文件。

似乎一切工作正常，但最近我们检测到文件滚动的不可接受行为。对于我们的应用程序在 WebSphere 滚动日志文件（按大小和天数）上的第一次启动效果很好，但是当我们停止应用程序时 - 当前日志文件被 java.exe（IBM WAS）进程锁定并且当我们再次启动应用程序时 -由于先前的锁定，滚动日志不起作用。当我通过 windows Unlocker 查看文件时，我很惊讶 - 有 2 个进程锁定了当前文件。如果我们停止应用程序并重新启动它 - 将有 3 个 java.exe 锁定当前日志文件，尽管在任务管理器中只运行一个进程。有时我会在这种“测试”期间发现 OutOfMemory 错误。

因此，最后我们有非常大的日志文件。（20GB 及以上）

我发现了一些类似的问题，但是 log4j 滚动。并且没有任何解释为什么会这样 - 只是一个就像 - 不建议将 log4j 用于 websphere。

并且似乎根本不完全是“记录器”中的问题。那么，有没有人可以回答2个问题-

* * *

1.  当应用程序已经停止时，为什么 WebSphere 锁定文件而不释放它？？？

2.  当应用程序以正确的方式停止时（不使用解锁器、任务管理器等作弊手段），如何释放（或告诉 WebSphere 不要锁定）日志文件的锁定？

* * *

感谢您的关注...任何帮助将不胜感激。

* * *

更新 1：

最近我尝试使用带有 logback 的小型 Web 应用程序 - 效果很好 - 没有重复锁定。

我还查看了日志，当我们的大应用程序停止时，发现了这个（停止应用程序期间日志中唯一的一个字符串）

`27-03 05:59:39 [WebContainer : 7] INFO o.hibernate.impl.SessionFactoryImpl:close - closing`

关闭但不关闭？我希望我以正确的方式思考...

----更新 3

嗯...我花了很多时间在 websphere 上部署自定义 WAR，但我仍然无法找出 WAS 有时会锁定日志文件而有时不会锁定的原因。

我不敢相信，我很惊讶没有人面临同样的麻烦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:24:21.617

这篇文章对我有帮助 - [http://logback.qos.ch/manual/jmxConfig.html](http://logback.qos.ch/manual/jmxConfig.html) 虽然我们没有在我们的应用程序中使用任何 JMXConfigurators ...

所以我在 web.xml 中添加了

```
<listener>
    <listener-class>ru.fns.commonex.listener.CleanUpServletContextListener</listener-class>
</listener> 
```

监听器有下一个代码：

```
@Override
public void contextDestroyed(ServletContextEvent sce) {
    log.debug("contextDestroyed({}) called.", sce);
    deRegisterLog();
}

/**
* Avoiding memory leaks
*
* If your application is deployed in a web-server or an application server,
* the registration of an JMXConfigurator instance creates a reference from the system class loader
* into your application which will prevent it from being garbage collected when it is stopped or re-deployed,
* resulting in a severe memory leak.
*
* Thus, unless your application is a standalone Java application,
* you MUST unregister the JMXConfigurator instance from the JVM's Mbeans server.
* Invoking the reset() method of the appropriate LoggerContext will automatically unregister any
* JMXConfigurator instance. A good place to reset the logger context is in the contextDestroyed()
* method of a javax.servlet.ServletContextListener.
*/
private void deRegisterLog() {
    LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();
    log.info("Trying to stop logger factory {}", lc);
    if (lc != null) {
        lc.stop();
    }
} 
```

# python - 在 Redis 中存储 html 并保留引号

> ID：15628548
> 
> 赞同：2
> 
> 时间：2013-03-26T02:52:39.840
> 
> 标签：python, redis

有没有办法将引号字符的组合存储为 Redis 中的值？我的具体需要是存储 PHP 和 HTML 字符串，并保持引号类型的混合。

在 Python 中：

```
import redis
db = redis.Redis('localhost')

phpfile = /root/test.php

with open(phpfile) as f:
    bar = f.read()

db.set('foo', bar) 
```

如果我尝试以任何其他直接方式传递字符串，它当然会失败，因为所有竞争引号。

**编辑：**

我要结束这个问题。我无法使用上面的代码在 Python 中重复该行为，因此它一定是我的代码中另一层的问题，而不是 Redis 的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:26:02.180

Redis 不关心您存储的数据的结构。您可以在 redis 或带有双引号或单引号的字符串中抛出随机字节。

只需存储字符串并感到高兴。

# jquery - 将 jQuery Mobile 收音机从水平转换为垂直

> ID：15628549
> 
> 赞同：1
> 
> 时间：2013-03-26T02:52:40.093
> 
> 标签：jquery, jquery-mobile

我正在尝试将 jQuery 移动无线电动态转换为垂直堆叠的无线电。我有这个。

```
$('fieldset').data('type', 'vertical').controlgroup('refresh'); 
```

这不应该将所有 data-type="horizo​​ntal" 更改为 data-type="vertical" 吗？即使我检查它，我也看不到任何变化。我还在表单上玩过 trigger('create') ，这只会弄乱收音机。

```
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup" data-type="horizontal">
        <input type="radio" name="gender" id="male" value="male" class="required" checked />
        <label for="male">Male</label>
        <input type="radio" name="gender" id="female" value="female" class="required" />
        <label for="female">Female</label>
    </fieldset>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T03:35:39.567

每当我需要从水平更改为垂直或反之亦然时，我通常使用更改应用于控件组和单选按钮的样式。以下是代码，希望这符合您的要求。

```
$("fieldset").attr('data-type','vertical').removeClass('ui-controlgroup-horizontal').addClass('ui-controlgroup-vertical');

var $firstLbl =  $("fieldset").find('div.ui-radio:first').children('label'),
    $secondLbl = $("fieldset").find('div.ui-radio:last').children('label');

    $firstLbl.removeClass('ui-corner-left').addClass('ui-corner-top');
    $firstLbl.children('span').removeClass('ui-corner-left').addClass('ui-corner-top');
    $secondLbl.removeClass('ui-corner-right').addClass('ui-corner-bottom');
    $secondLbl.children('span').removeClass('ui-corner-right').addClass('ui-corner-bottom');

    //show the radio buttons.
    $("input[type='radio']").each(function(i) {
        var $self = $(this);
        $self.next().addClass('ui-btn-icon-left').find('span.ui-btn-text').after($('<span class="ui-icon ui-icon-shadow ui-icon-radio-off">&nbsp;</span>'));
    });

    //Set the first one as checked by default.
    $("input[type='radio']:first").attr("checked",true).checkboxradio("refresh"); 
```

# php - 将所有不存在的获取请求发送到默认页面

> ID：15628551
> 
> 赞同：1
> 
> 时间：2013-03-26T02:53:03.873
> 
> 标签：php, variables, get, http-status-code-404, http-get

请注意，我对 php 很陌生。

好的，我有一个脚本。

将可变页面发送到某些页面，但前提是该变量与已经存在的页面匹配，

例如 mysite.com/?varible123，如果 varible123 存在，它会将其发送到该页面，但如果它不存在，则将其发送到默认页面。在我的情况下，我的主页“主”我不希望将不存在的变量页面发送到我的主页，而是仅针对这些页面的默认设置。

我想修改脚本以将所有不存在的变量发送到主页以外的默认页面。

以及调用时显示的主页。

所以有人访问 mysite.com 他们会看到主页，但如果有人访问 mypage.com/?nonexisitenpage 他们会被发送到不是主页的默认页面。

这 ？网站上的标记必须留在那里。

我的代码是

```
<?php
$page = $_SERVER['argv'][0];
if (!file_exists($page.".htm")){
 //check to make sure the file exists
 $page = "main";
 //include this page by default
}
if (strstr($page, ".")){ 
 //hack attempt
 $page = "main";
}
require_once($page.".htm");
//hard code extension to prevent getting hacked
//http://mysite.com/?lol will include lol.htm
?> 
```

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T10:21:08.187

你可以使用包含。但是每个页面都必须有代码才能在另一个页面中正确呈现它，这将是最快的呈现。

```
<?php
$page = $_SERVER['QUERY_STRING'];

if (strstr($page, ".") !== false){ means . is there 
 //hack attempt
 $page = "main";
}
 //first check for hack

if (!file_exists($page.".htm")){
 //check to make sure the file exists
 $page = "main";

 //include this page by default
}
 include 'main.php'; //or main.html and return
   return;
//hard code extension to prevent getting hacked
//http://mysite.com/?lol will include lol.htm
?> 
```

在向世界开放之前尝试一下自己。也许您应该检查其他 spl 字符或只允许 az、下划线和破折号作为名称。

# php - 第一个查询输出然后查询不同的表以将值放在第一个查询的结果下

> ID：15628552
> 
> 赞同：0
> 
> 时间：2013-03-26T02:53:05.347
> 
> 标签：php, mysql, sql

哇。我很抱歉标题。

基本上。我现在有这个。

第一步在数据库中查找不同的包和相关的价格。

```
include("db.php");

$data73 = mysql_query("SELECT * 
                         FROM `package` 
                     ORDER BY `price` ") or die(mysql_error()); 
while($row73 = mysql_fetch_array($data73)){
  echo "<li><a href=#".$row73['name'].">".$row73['name']."</a></li>"; 
}; 
```

如您所见，它将结果输出到屏幕上显示为可单击 div“选项卡”`<li>`的样式内，显示和隐藏关联的 div`<div>`

```
$data74 = mysql_query("SELECT * 
                         FROM `package` 
                     ORDER BY `price` ") or die(mysql_error()); 
while($row74 = mysql_fetch_array($data74)) {
  echo "<li id=".$row74['name'].">".$row74['price']."</li>"; 
```

这很好用。

我需要做的是查询另一个表，其中我有与第一个表中包的“id”相关联的“包选项”。

我需要显示每个包的选项。

包选项应该
在“.$row74['price']”之后的最后一个回显行中的 a 之后。

# regex - grep 或 map 在 perl 中查找 use 语句

> ID：15628554
> 
> 赞同：0
> 
> 时间：2013-03-26T02:53:52.287
> 
> 标签：regex, perl

我正在尝试编写一个 perl 模块，该模块将另一个文件作为输入并打印所有使用语句（严格和警告除外）

```
my @result = grep /use\s+([^;(strict|warnings)]+)/, @file; 
```

这打印：

```
use Package1;
use Package2; 
```

但是我只想要“Package1”部分。所以当使用地图时：

```
my @result = map /use\s+([^;(strict|warnings)]+)/, @file; 
```

这会返回错误的值。（返回前 2 或 3 个字符）

```
my @result = map /use\s+([^;]+)/, @file; 
```

返回 Package1、Package2、strict、警告。

我可以知道如何更正第一个 map 语句中的正则表达式吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:58:24.680

有一些模块可以做到这一点。 [Perl::PrereqScanner](https://metacpan.org/module/Perl%3a%3aPrereqScanner)是[Dist::Zilla](https://metacpan.org/module/Dist%3a%3aZilla%3a%3aTutorial)使用的，我发现它工作得很好。

Neil Bowers[对可用的解决方案进行了很好的评论](http://neilb.org/reviews/dependencies.html)。感谢@JoelBerger 在评论中指出这一点。

对于通用 Perl 代码扫描，最好使用了解 Perl 语法的[PPI 。](https://metacpan.org/module/PPI)像 Perl::PrereqScanner 和[Perl::Critic](https://metacpan.org/module/Perl%3a%3aCritic)这样的东西使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T03:00:06.583

输入一个`grep`过滤器：

```
my @result = grep { !/^(?:strict|warnings)$/ } map /use\s+([^;]+)/, @file; 
```

# android - 如何在 MultiSelectListPreference 中设置多个默认值？

> ID：15628558
> 
> 赞同：18
> 
> 时间：2013-03-26T02:54:16.363
> 
> 标签：android, sharedpreferences, preferences

我有这样的preference.xml

```
<MultiSelectListPreference
        android:key="store_select"
        android:title="@string/setting_store_title"
        android:summary="@string/setting_store_summary"
        android:dialogTitle="@string/setting_store_dialog_title"
        android:entries="@array/store_names"
        android:entryValues="@array/stores"
        android:defaultValue="@array/stores"
        /> 
```

用我的两个数组：

```
 <string-array name="stores">
    <item>1</item>
    <item>2</item>
    <item>3</item>
    <item>4</item>
    <item>5</item>
</string-array>

<string-array name="store_names">
    <item>foodbasics</item>
    <item>nofrills</item>
    <item>metro</item>
    <item>loblaws</item>
    <item>sobeys</item>
</string-array> 
```

我希望默认行为是选择的所有选项，但目前默认情况下没有选择任何选项。难道我做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-06-15T15:47:26.647

`MultiSelectListPreference`要默认选中（打开）所有项目，然后包含`defaultsValue`Preference 的属性，例如

```
android:defaultValue="@array/stores" 
```

如果它不起作用，请确保您`clear`的应用程序数据，因为这只会在应用程序第一次运行时生效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-05T03:34:27.287

我想你忘记调用你`PreferenceManager.setDefaultValues(this, R.xml.preference, false);` 的.`onCreate()``mainActivity`

此方法将读取您的`preference.xml`文件并设置其中定义的默认值。将`readAgain`参数设置为`false`意味着仅在过去从未调用过此方法时才设置默认值，因此您不必担心每次创建 Activity 时都会覆盖用户的设置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-07T07:07:38.377

我知道我迟到了，但我的回答可能会在未来帮助其他人......

放

```
android:defaultValue="@array/empty_array" 
```

where`empty_array`是一个空数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-01T18:41:51.497

如果您以`MultiSelectListPreference`编程方式添加，那么您可以简单地调用`multiSelectListPreference.setDefaultValue()`：

例如

```
val preference = MultiSelectListPreference(context)
preference.setDefaultValue(setOf("US, "CN")) 
```

# c++ - 有什么好的功能可以用来移动容器中的元素吗？

> ID：15628566
> 
> 赞同：2
> 
> 时间：2013-03-26T02:55:05.230
> 
> 标签：c++, std

例如，我有一个向量，我想将位置 1 的元素移动到新的位置 3。

```
std::vector<int> v;
for (int i = 0; i < 5; ++i)
    v.push_back(i);
// move element at position 1 to 3 
// old vector: 0 1 2 3 4
// after move: 0 2 3 1 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T02:59:10.423

使用[std::rotate](http://en.cppreference.com/w/cpp/algorithm/rotate)

```
std::rotate( v.begin() + 1, v.begin() + 2, v.begin() + 4 );
//           ^^^^^ 1        ^^^^^ 2        ^^^^^ 3
// 1 - beginning of the range to rotate - points to '1'
// 2 - element that will be brought to beginning after rotation - points to '2'
// 3 - one past end of range to rotate - points to '4' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:58:59.843

使用[旋转算法](http://www.sgi.com/tech/stl/rotate.html)。这将旋转给定范围内的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T02:59:07.780

您可以使用 std::swap 两次。

```
 std::swap(v[1], v[2]);
 std::swap(v[2],v[3]); 
```

给定

```
0 1 2 3 4 
```

第一次交换：

```
0 2 1 3 4 
```

第二次交换

```
0 2 3 1 4 
```

你得到你想要的

如果您指定一个范围`[i,j]`，您可以将它们放入一个函数并通过循环到应用`v[i]`交换`v[j]`。

# c# - 来自数据表的嵌套 json

> ID：15628569
> 
> 赞同：0
> 
> 时间：2013-03-26T02:55:18.120
> 
> 标签：c#, asp.net, json, linq, json.net

我有一个数据表，其值如下：

```
UerId    TimeStamp    Parameter    Value
-----    ---------    ---------    -----
  1      03/24/2013   Param1       Value1
  1      03/24/2013   Param2       Value2
  1      03/24/2013   Param3       Value3
  1      03/25/2013   Param4       Value4
  1      03/25/2013   Param5       Value5
  2      03/24/2013   Param1       Value6
  2      03/24/2013   Param2       Value7
  2      03/25/2013   Param1       Value8 
```

我需要创建嵌套的 json 字符串，例如：

```
Users:[
    "UserId": <id>,
    "date":[
         "TimeStamp": <TimeStamp>,
         "Values" : [
               { "Parameter": <Parameter>, "Value": <Value> },
           { "Parameter": <Parameter>, "Value": <Value> },
                       ...
        ] 
     ],
     ...
] 
```

我列出了不同的价值观：

```
 List<String> ListOfUsers = new List<String>();
    List<DateTime> ListOfDates = new List<DateTime>();
    ListOfUsers = dt.AsEnumerable().Select(row => row.Field<String>("UserId")).Distinct().ToList<String>();
    ListOfDates = dt.AsEnumerable().Select(row => row.Field<DateTime>("TimeStamp").Date).Distinct().ToList<DateTime>(); 
```

我应该遍历整个表还是有其他更好的方法，也许是 Json.net 库？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:12:36.633

您可以通过多种方式执行此操作，但最简单的方法是使用 .net JavaScriptSerializer。只需构建您的类来模仿您感兴趣的结构，用数据库中的数据填充对象，然后对其进行序列化。我给你举个例子。

将此用作您要填充的对象

```
 public class YourObject
{
    public YourObject(){

    }

    public YourObject (DataTable dataTable){
        //Do work here to load your data set into your Users and other necessary objects.
        Users = new Users(dataTable);

    }

    public UsersObject Users { get; set; }

    public class UsersObject : List<UserObject> {
        public UsersObject (DataTable dataTable){
            dataTable.AsEnumerable().Select(row => row.Field<String>("UserId")).Distinct().ToList<String>().ForEach(x => this.Add(new UserObject(){UserId = x}));
            foreach(UserObject user in this){
                user.LoadDates(dataTable.Select("UserId = '" + user.UserId + "'"));
            }
        }
    }
    public class UserObject {
        public UserObject (){
            date = new DatesObject();
        }

        public void LoadDates(DataRow[] rows){
            rows.AsEnumerable().Select(row => row.Field<DateTime>("TimeStamp").Date).Distinct().ToList<DateTime>().ForEach(x => this.Add(new DateObject(){TimeStamp = x}));
            foreach(DateObject date in this){
                date.LoadParams(rows.Select("TimeStamp = '" + date.TimeStamp.ToString("MM/dd/yyyy") + "'"));
            }
        }

        public string UserId { get; set; }
        public DatesObject date { get; set; }
    }

    public class DatesObject : List<DateObject>{
        public DatesObject (){

        }
    }

    public class DateObject {
        public DateObject () {

        }

        public void LoadValues(DataRow[] rows){
            //Load your value/params like in the previous methods
        }

        public DateTime TimeStamp { get; set; }
        public ValuesObject Values { get; set; }
    }

    public class ValuesOject : List<ValueObject> {
        public ValuesOject () {

        }
    }

    public class ValueObject {
        public ValueObject () {

        }
        public string Parameter { get; set; }
        public string Value { get; set; }
    }
} 
```

然后使用它来序列化该对象

```
protected void Page_Load(object sender, EventArgs e){
     YourObject yourObject = new YourObject(Data.GetYourDataTable());
     JavaScriptSerializer serializer = new JavaScriptSerializer();
     string serializedItems = serializer.Serialize(yourObject);
} 
```

# java - 如何将 H2 嵌入式数据库读/写到 JAR 中的文件？

> ID：15628571
> 
> 赞同：2
> 
> 时间：2013-03-26T02:55:48.483
> 
> 标签：java, classpath, h2, embedded-database

我有一个组织如下的 Eclipse 项目：

```
MyProj/
    src/
        main/
            java/
                <All main Java source here>
            config/
                spring/
                    spring-config.xml
                views/
                    <All JSPs here>
                h2/
                    my-h2-db
        test/
            java/
            config/   } etc. for test sources 
```

当我将它捆绑到 WAR 中时，它的打包方式如下：

```
MyProj.war
    META-INF/
    WEB-INF/
        web.xml
        lib/
        classes/
            spring-config.xml
            my-h2-db
            views/
                Home.jsp
                About.jsp
                etc.
            com/ --> root dir for all compiled Java binaries 
```

我需要编写能够对 H2 数据库（以及随之而来的所有表、用户等）进行 CRUD 的代码，在这个示例中我调用了`my-h2-db`. 这样，无论我是从 Eclipse 内部进行测试，还是实际使用已部署的 WAR，应用程序都可以使用相同的数据库文件。

所以我问：

*   我如何`my-h2-db`从 Eclipse 和运行时 (WAR) 类路径访问该文件，因为它被打包在与 Eclipse 项目中不同的位置？和

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T03:01:43.100

我认为您不会希望将 H2 文件打包到您的 WAR 应用程序中。它不能在 WAR 中使用它们。

您在版本控制中需要的是用于构建数据库实体的 DDL（并在必要时预填充）。然后，在您的开发或生产环境中，您可以使用这些脚本来创建/更新数据库。

您在 Web 应用程序中拥有的只是用于定位嵌入式数据库的 JDBC url（指定数据库的文件位置）。正如您所建议的，这将根据开发或生产环境而有所不同。

我一直在使用 LiquiBase 作为管理数据库创建/升级的一种方式，它非常易于使用。

但是，在开发过程中创建数据库然后将这些文件嵌入到 WAR 中以便直接使用它们的想法是行不通的。没有保存这些文件的概念，因此没有任何数据会保留。

# python - django 模板 - for 循环超过 2 个查询集

> ID：15628574
> 
> 赞同：3
> 
> 时间：2013-03-26T02:56:08.233
> 
> 标签：python, django, django-templates

我从 db 获得 2 个查询集：

```
all_locations = Locations.objects.all()[:5]
rating = Rating.objects.all()[:5]
return render_to_response('index.html',{'all':all_locations,'rating':rating},context_instance=RequestContext(request)) 
```

但是我被困在这里，不知道如何在一个循环中循环这两个查询集。这是错误的：

```
{% if all and rating %}
  {% for every in all and rating  %}
         {{every.locationname}}, {{every.rating_score}}
  {% endfor %}
{% endif %} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T03:38:01.827

你可以试试`zip(all_locations, rating)`。它将产生一个元组列表。然后你可以成对地迭代它们。这是一个例子：（[演示](http://labs.codecademy.com/pNL#%3aworkspace)）

```
all_locations = ['ca','ny','fl']
ratings = ['best','great','good']
for (l,r) in zip(all_locations,ratings): 
   print l+':'+r 
```

输出

```
ca:best
ny:great
fl:good 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-11T09:48:38.550

我也遇到过这个问题。现在我已经修好了。我所做的是使用

```
new=tuple(zip(queryset1,queryset2))  
return render(request, 'template.html', {"n": new}). 
```

在 view.py.

在 template.html 中，我使用下面列出的三个句子。

```
{% for i in n %}

{% for j in i|slice:"0:1" %}

......operate queryset1

{% endfor %}
{% for z in i|slice:"1:2" %}

.....operate queryset2

{% endfor %}

{% endfor %}

It seems this method will fulfill your needs. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T03:37:18.987

这可能有效：

```
{% with rating|length as range %}
    {% for _ in range %}
        {{ rating[forloop.counter] }}
        {{ location[forloop.counter] }}
    {% endfor %}
{% endwith %} 
```

我不确定是否`rating|length`会做这份工作......您可能需要添加`rating|length|times' with`时间过滤器，定义为：

```
@register.filter(name='times') 
def times(number):
    return range(number) 
```

# java - SpringData Mongo @Column 等效注解（@Property？）

> ID：15628575
> 
> 赞同：8
> 
> 时间：2013-03-26T02:56:23.077
> 
> 标签：java, spring, mongodb, spring-data, spring-data-mongodb

是否有与 JPA @Column 注释等效的 SpringData Mongo？

基本上，我有一个 POJO，它的属性要以不同的名称存储在 Mongo 中。因此，以下对象：

```
public class Pojo{
    @Property("bar")
    private String foo = "Hello World";
} 
```

将被坚持为：

```
{
    "_class":"com.example.Pojo",
    "bar" : "Hello World"
} 
```

*注意：*我不想使用`MappingMongoConverter`来明确地做到这一点

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-26T11:00:38.783

Spring Data[参考文档](http://docs.spring.io/spring-data/data-mongo/docs/current/reference/html/#mapping-usage-annotations)将`@Field`注释列为自定义映射到 MongoDB 文档的属性的键和顺序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T09:45:19.353

您可以使用`@Field`

它允许您在 DB 中定义自定义键名和插入顺序

# android - ViewPager 在 FragmentsPagerAdapter 上杂乱的片段

> ID：15628577
> 
> 赞同：3
> 
> 时间：2013-03-26T02:56:35.057
> 
> 标签：android, android-fragments, android-viewpager

我正在实现`SherlockFragmentActivity`一个`ViewPager`嵌入式。ViewPager 显示正确，但是其中的内容（片段本身）是混合的。

> 在我的情况下，我有一个带有三个选项卡的视图寻呼机，我想为每个选项卡加载一个片段。发生的情况是：第二个片段加载到第一个选项卡中，当我单击第三个选项卡并返回第二个选项卡时，它显示在那里。

此外，当我单击第二个选项卡时，它会加载第一个选项卡的片段，然后突然加载第二个选项卡的内容，覆盖以前的内容。

它在不同的选项卡中加载了错误的内容。

* * *

**更新**

在调试时，我看到当我打开第二个选项卡（添加到`TabsAdapter`as `ContactActivityFragment`）时，它调用适配器类的`onActivityCreated`方法 和，这是第一个选项卡，而不是第二个选项卡。所以第一个选项卡的内容加载到了错误的位置。`getView``ContactInfoFragment`

* * *

这是我的代码。知道可能会发生什么吗？

**ContactActivity.java**

```
public class ContactActivity extends SherlockFragmentActivity implements     OnCreateOptionsMenuListener
{

public ActionBarSherlock mSherlock = ActionBarSherlock.wrap(this);
private TabHost mTabHost;
private ViewPager  mViewPager;
private TabsAdapter mTabsAdapter;

private TextView mContactNameTextView;
private ImageView mContactIconImageView;

private Context mContext;

private final String FRAGMENT_POSITION = "fragment_position";
private final String CONTACT_ID = "contact_id"; 
private Long mContactId;

private ContactController mContactController;
private Contact mContact;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    mSherlock.setUiOptions(ActivityInfo.UIOPTION_SPLIT_ACTION_BAR_WHEN_NARROW);

    setContentView(R.layout.contact_activity);

    // retrieve the extra values from the intent
    mContactId = getIntent().getExtras().getLong(CONTACT_ID);

    // set the tab host to hold the fragments and the viewpager
    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();

    mViewPager = (ViewPager)findViewById(R.id.pager);

    mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);

    // create the bundle to set the values to send to the fragment
    Bundle bundle = new Bundle();
    bundle.putLong(CONTACT_ID, mContactId);

    mTabsAdapter.addTab(mTabHost.newTabSpec("info").setIndicator(getString(R.string.fragment_contact_title_info)), ContactInfoFragment.class, bundle);
    mTabsAdapter.addTab(mTabHost.newTabSpec("activity").setIndicator(getString(R.string.fragment_contact_title_activity)), ContactActivityFragment.class, bundle);
    mTabsAdapter.addTab(mTabHost.newTabSpec("stats").setIndicator(getString(R.string.fragment_contact_title_stats)), ContactStatsFragment.class, bundle);

    mContext = getSupportActionBar().getThemedContext();

    // Set the action bar properties
    getSupportActionBar().setDisplayShowTitleEnabled(true);
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    getSupportActionBar().setNavigationMode(ActionBar.DISPLAY_SHOW_TITLE);

    // initialize the elements
    mContactNameTextView = (TextView) findViewById(R.id.textViewContactName);
    mContactIconImageView = (ImageView) findViewById(R.id.imageViewContactIcon);

    // initialize the contact controller
    mContactController = new ContactController(mContext);

    // initialize the contact object
    mContact = new Contact();
}

@Override
protected void onSaveInstanceState(Bundle outState) 
{
    super.onSaveInstanceState(outState);
    outState.putString("tab", mTabHost.getCurrentTabTag());
}

@Override
public boolean onOptionsItemSelected(MenuItem item) 
{    
    switch (item.getItemId()) 
    {        
        // If the user clicks the home icon 
        case android.R.id.home:            
            Intent i = new Intent(this, HomeActivity.class);
            i.putExtra(FRAGMENT_POSITION, "4");
            i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(i);
            break;
        default:            
            break;  
   }

    return true;
}

@Override
public void onResume()
{
    super.onResume();

    mContact = mContactController.getContactById(mContactId);

    // set the action bar title as the contact name. 
    // if the name is null, print the phone number which is set as 
    // the id of the contact in case it's an unmapped contact 
    getSupportActionBar().setTitle(mContact.getmDisplayName() == null ? mContact.getM_id().toString() : mContact.getmDisplayName());

    // set the contact name.
    // if the name is null, print the phone number which is set as 
    // the id of the contact in case it's an unmapped contact
    mContactNameTextView.setText(mContact.getmDisplayName() == null ? mContact.getM_id().toString() : mContact.getmDisplayName());

    // retrieve the contact image based on the URI
    Bitmap contactIconBitmap = mContactController.getContactPicture(mContactId);
    mContactIconImageView.setImageBitmap(contactIconBitmap);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // do nothing, since the menu items must be added on specific fragments
    return true;
}

/**
 * This is a helper class that implements the management of tabs and all
 * details of connecting a ViewPager with associated TabHost.  It relies on a
 * trick.  Normally a tab host has a simple API for supplying a View or
 * Intent that each tab will show.  This is not sufficient for switching
 * between pages.  So instead we make the content part of the tab host
 * 0dp high (it is not shown) and the TabsAdapter supplies its own dummy
 * view to show as the tab content.  It listens to changes in tabs, and takes
 * care of switch to the correct paged in the ViewPager whenever the selected
 * tab changes.
 */
public static class TabsAdapter extends FragmentPagerAdapter implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener 
{
    private final Context mContext;
    private final TabHost mTabHost;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo 
    {
        private final String tag;
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(String _tag, Class<?> _class, Bundle _args) 
        {
            tag = _tag;
            clss = _class;
            args = _args;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory 
    {
        private final Context mContext;

        public DummyTabFactory(Context context) 
        {
            mContext = context;
        }

        public View createTabContent(String tag) 
        {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager) 
    {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mTabHost = tabHost;
        mViewPager = pager;
        mTabHost.setOnTabChangedListener(this);
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) 
    {
        tabSpec.setContent(new DummyTabFactory(mContext));
        String tag = tabSpec.getTag();

        TabInfo info = new TabInfo(tag, clss, args);
        mTabs.add(info);
        mTabHost.addTab(tabSpec);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() 
    {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) 
    {
        TabInfo info = mTabs.get(position);

        return Fragment.instantiate(mContext, info.clss.getName(), info.args);

    }

    public void onTabChanged(String tabId) 
    {
        int position = mTabHost.getCurrentTab();
        mViewPager.setCurrentItem(position);
    }

    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) 
    {
    }

    public void onPageSelected(int position) 
    {
        // Unfortunately when TabHost changes the current tab, it kindly
        // also takes care of putting focus on it when not in touch mode.
        // The jerk.
        // This hack tries to prevent this from pulling focus out of our
        // ViewPager.
        TabWidget widget = mTabHost.getTabWidget();
        int oldFocusability = widget.getDescendantFocusability();
        widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
        mTabHost.setCurrentTab(position);
        widget.setDescendantFocusability(oldFocusability);
    }

    public void onPageScrollStateChanged(int state) 
    {
    }   
}   
} 
```

**ContactInfoFragment.java**

```
public class ContactInfoFragment extends SherlockListFragment
{
private Activity mActivity;
private Menu mOptionsMenu;
private ListView mListView;

private final String CONTACT_ID = "contact_id"; 
private Long mContactId;
private List<Contact> mContactsData = new ArrayList<Contact>();
private List<PhoneNumber> mPhoneNumbers = new ArrayList<PhoneNumber>();
private final String[] mListHeaders = { "Phone Numbers" };

private ContactController mContactController;
private PhoneNumberController mPhoneNumberController;
private Contact mContact;
private PhoneNumber mPhoneNumber;
private SeparatedListAdapter mSeparatedListAdapter;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    savedInstanceState = getArguments();

    // set the contact id
    mContactId = savedInstanceState.getLong(CONTACT_ID);

    // initialize controllers
    mContactController = new ContactController(getActivity().getApplicationContext());
    mPhoneNumberController = new PhoneNumberController(getActivity().getApplicationContext());
}

@Override
public void onSaveInstanceState(Bundle savedInstanceState)
{
    super.onSaveInstanceState(savedInstanceState);
    savedInstanceState.putString("class_name", "ContactInfoFragment");
}

@Override
public void onAttach(Activity activity) 
{
    super.onAttach(activity);
    mActivity = activity;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    // inflate the layout 
    View view = inflater.inflate(R.layout.contact_info_fragment, container, false);

    return view;
}

@Override
public void onStart() 
{
    super.onStart();
}

@Override
public void onActivityCreated(Bundle savedInstanceState) 
{
    super.onActivityCreated(savedInstanceState);

    mContact = mContactController.getContactById(mContactId);
    mPhoneNumbers = mPhoneNumberController.getPhoneNumbersByContact(mContact);

    mListView = (ListView) mActivity.findViewById(android.R.id.list);

    ContentAdapter mAdapter = new ContentAdapter(getActivity().getApplicationContext(), android.R.id.list, mPhoneNumbers);

    // add the items for the adapter
    for (PhoneNumber phoneNumber : mPhoneNumbers)
    {
        mAdapter.add(phoneNumber);
    } 

    mSeparatedListAdapter = new SeparatedListAdapter(mActivity.getApplicationContext());

    // Add Sections
    mSeparatedListAdapter.addSection("Phone Numbers", mAdapter);

    mAdapter.notifyDataSetChanged();
    mSeparatedListAdapter.notifyDataSetChanged();
    mListView.setAdapter(mSeparatedListAdapter);

    mListView.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> parent, View view, int position, long duration) 
        {
            // if the user clicks a number, it will open the dialer to call the number
            Intent intent = new Intent(Intent.ACTION_DIAL);
            intent.setData(Uri.parse("tel:"+view.getTag(R.string.phone_number_action_call).toString()));
            intent.setFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
            startActivity(intent);
        }
    });
}

@Override
public void onResume() 
{
    super.onResume();

    setHasOptionsMenu(true);
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater menuInflater)
{
    mOptionsMenu = menu;

    menu.add("People")
        .setIcon(R.drawable.ic_menu_contacts)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    menu.add("Share")
        .setIcon(R.drawable.ic_menu_share)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
}

private void changeOptionsMenu(int position)
{
    mOptionsMenu.clear();

    if(position == 0)
    {
        mOptionsMenu.add("People")
            .setIcon(R.drawable.ic_menu_contacts)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        mOptionsMenu.add("Share")
            .setIcon(R.drawable.ic_menu_share)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    }
    else if(position == 1)
    {
        mOptionsMenu.add("People")
            .setIcon(R.drawable.ic_menu_contacts)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        mOptionsMenu.add("Days")
            .setIcon(R.drawable.ic_menu_days)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        mOptionsMenu.add("Share")
            .setIcon(R.drawable.ic_menu_share)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    }
    else
    {
        mOptionsMenu.add("People")
            .setIcon(R.drawable.ic_menu_contacts)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        mOptionsMenu.add("Share")
            .setIcon(R.drawable.ic_menu_share)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    }
}

public class ContentAdapter extends ArrayAdapter<PhoneNumber>
{
    Context mContext;
    List<PhoneNumber> mPhoneNumbersList;
    private LayoutInflater mInflater;

    public ContentAdapter(Context context, int textViewResourceId, List<PhoneNumber> phoneNumbers) 
    {
        super(context, textViewResourceId);
        mContext = context;
        this.mPhoneNumbersList = phoneNumbers;
        mInflater = mActivity.getLayoutInflater();
    }

    // An alternative for the ArrayAdapter.addAll() method, since the native 
    // is not supported by API level lesser then 11.
    public void addAll(ArrayList<PhoneNumber> list)
    {
        for(PhoneNumber phoneNumber : list)
        {
            this.add(phoneNumber);
        }
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        View row = convertView;
        ViewHolder holder = new ViewHolder();

        if(row == null)
        {
            row = mInflater.inflate(R.layout.contact_info_list_item, parent, false);

            holder.phoneNumber = (TextView) row.findViewById(R.id.textViewContactNumber);
            holder.phoneNumberType = (TextView) row.findViewById(R.id.textViewNumberType);

            row.setTag(holder);
        }
        else
        {
            holder = (ViewHolder) row.getTag();
        }

        // TODO: make a join to get the contact and phone number instead of calling method by method
        PhoneNumber phoneNumber = mPhoneNumbersList.get(position);

        if(phoneNumber != null)
        {
            holder.phoneNumber.setText(phoneNumber.getmPhoneNumberValue());
            holder.phoneNumberType.setText(CallUtils.getPhoneNumberType(phoneNumber.getmPhoneNumberType()));
            row.setTag(R.string.phone_number_action_call, phoneNumber.getmPhoneNumberValue());
        }

        return row;
    }
}

public class ViewHolder
{
    TextView phoneNumber;
    TextView phoneNumberType;
}
} 
```

**ContactActivityFragment.java**

```
public class ContactActivityFragment extends SherlockListFragment
{
private Activity mActivity;
private Menu mOptionsMenu;
private ListView mListView;

private final String CONTACT_ID = "contact_id"; 
private Long mContactId;
private List<Contact> mContactsData = new ArrayList<Contact>();
private List<Call> mCallsList = new ArrayList<Call>();
private final String[] mListHeaders = { "Calls" };

private Call mCall;
private Contact mContact;
private PhoneNumber mPhoneNumber;
private CallController mCallController;
private ContactController mContactController;
private PhoneNumberController mPhoneNumberController;
private SeparatedListAdapter mSeparatedListAdapter;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    savedInstanceState = getArguments();

    // set the contact id
    mContactId = savedInstanceState.getLong(CONTACT_ID);

    // initialize controllers
    mCallController = new CallController(getActivity().getApplicationContext());
    mContactController = new ContactController(getActivity().getApplicationContext());
    mPhoneNumberController = new PhoneNumberController(getActivity().getApplicationContext());

    // initialize models
    mCall = new Call();
}

@Override
public void onSaveInstanceState(Bundle savedInstanceState)
{
    super.onSaveInstanceState(savedInstanceState);
    savedInstanceState.putString("class_name", "ContactInfoFragment");
}

@Override
public void onAttach(Activity activity) 
{
    super.onAttach(activity);
    mActivity = activity;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    // inflate the layout 
    View view = inflater.inflate(R.layout.contact_info_fragment, container, false);

    return view;
}

@Override
public void onStart() 
{
    super.onStart();
}

@Override
public void onActivityCreated(Bundle savedInstanceState) 
{
    super.onActivityCreated(savedInstanceState);

    mCallsList = mCallController.getCallsByContact(mContactId);

    mContact = mContactController.getContactById(mContactId);

    mListView = (ListView) mActivity.findViewById(android.R.id.list);

    ContentAdapter mAdapter = new ContentAdapter(getActivity().getApplicationContext(), android.R.id.list, mCallsList);

    // add the items for the adapter
    for (Call callList : mCallsList)
    {
        mAdapter.add(callList);
    } 

    mSeparatedListAdapter = new SeparatedListAdapter(mActivity.getApplicationContext());

    // Add Sections
    mSeparatedListAdapter.addSection("Phone Numbers", mAdapter);

    mAdapter.notifyDataSetChanged();
    mSeparatedListAdapter.notifyDataSetChanged();
    mListView.setAdapter(mSeparatedListAdapter);
}

@Override
public void onResume() 
{
    super.onResume();

    setHasOptionsMenu(true);
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater menuInflater)
{
    mOptionsMenu = menu;

    menu.add("People")
        .setIcon(R.drawable.ic_menu_contacts)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    menu.add("Share")
        .setIcon(R.drawable.ic_menu_share)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
}

private void changeOptionsMenu(int position)
{
    mOptionsMenu.clear();

    if(position == 0)
    {
        mOptionsMenu.add("People")
            .setIcon(R.drawable.ic_menu_contacts)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        mOptionsMenu.add("Share")
            .setIcon(R.drawable.ic_menu_share)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    }
    else if(position == 1)
    {
        mOptionsMenu.add("People")
            .setIcon(R.drawable.ic_menu_contacts)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        mOptionsMenu.add("Days")
            .setIcon(R.drawable.ic_menu_days)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        mOptionsMenu.add("Share")
            .setIcon(R.drawable.ic_menu_share)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    }
    else
    {
        mOptionsMenu.add("People")
            .setIcon(R.drawable.ic_menu_contacts)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        mOptionsMenu.add("Share")
            .setIcon(R.drawable.ic_menu_share)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    }
}

public class ContentAdapter extends ArrayAdapter<Call>
{
    Context mContext;
    List<Call> mCallsList;
    private LayoutInflater mInflater;

    public ContentAdapter(Context context, int textViewResourceId, List<Call> calls) 
    {
        super(context, textViewResourceId);
        mContext = context;
        this.mCallsList = calls;
        mInflater = mActivity.getLayoutInflater();
    }

    // An alternative for the ArrayAdapter.addAll() method, since the native 
    // is not supported by API level lesser then 11.
    public void addAll(ArrayList<Call> callsList)
    {
        for(Call call : callsList)
        {
            this.add(call);
        }
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        View row = convertView;
        ViewHolder holder = new ViewHolder();

        if(row == null)
        {
            row = mInflater.inflate(R.layout.contact_info_list_item, parent, false);

            holder.phoneNumber = (TextView) row.findViewById(R.id.textViewContactNumber);
            holder.phoneNumberType = (TextView) row.findViewById(R.id.textViewNumberType);

            row.setTag(holder);
        }
        else
        {
            holder = (ViewHolder) row.getTag();
        }

        // TODO: make a join to get the contact and phone number instead of calling method by method
        Call call = mCallsList.get(position);

        if(call != null)
        {
            holder.phoneNumber.setText(call.getCallDuration().toString());
            holder.phoneNumberType.setText(call.getCallDate());
        }

        return row;
    }
}

public class ViewHolder
{
    TextView phoneNumber;
    TextView phoneNumberType;
} 
} 
```

# uiview - 为什么我的 UIScrollView 没有出现？

> ID：15628578
> 
> 赞同：-1
> 
> 时间：2013-03-26T02:56:40.907
> 
> 标签：uiview, uiscrollview, storyboard, subclass

我正在尝试将包含 UIScrollView 的 UIView 子类化。这是我正在使用的代码：

UIViewSubclass.h

```
 @property (nonatomic, retain) UIScrollView *scroll; 
```

UIViewSubclass.m

```
 @synthesize itemScrollView;

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {

    [self setUpScrollViewWithIdentifier:@"id"];
}
return self;
}

-(void)setUpScrollViewWithIdentifier:(NSString*)scrollViewID {

NSLog(@"Setting up Scroll View with the id of: %@",scrollViewID); //This is working

scroll = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 0, 320, 90)];

//Subview of the scroll view
UIView *test = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 50, 50)];
test.backgroundColor = [UIColor blueColor];
[scroll addSubview:test];

[self addSubview:scroll]; // Adds the scrollview to the UIView
 NSLog(@"Subviews: %@",self.subviews);
} 
```

视图控制器.h

```
 #import "UIViewSubclass.h"

  IBOutlet UIViewSubclass *menuView; 
```

查看控制器.m

```
- (void)viewDidLoad
 {
menuView = [[UIViewSubclass alloc]init];
[super viewDidLoad];
// Do any additional setup after loading the view.
} 
```

我还在情节提要中将视图链接起来，并将视图的类设置为 UIViewSubclass 但由于某种原因，滚动视图不会出现。但是当我检查这个 NSLog 时：

```
 NSLog(@"Subviews: %@",self.subviews); 
```

它在调试器中给了我这个：

```
Subviews: (
"<UIScrollView: 0x1d5a20e0; frame = (0 0; 320 90); clipsToBounds = YES; gestureRecognizers = <NSArray: 0x1d5a2420>; layer = <CALayer: 0x1d5a1c60>; contentOffset: {0, 0}>"
 ) 
```

那么我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:08:25.077

```
scroll.contentSize = fooSize; 
```

可能是你错过的。

# iphone - 在 iOS 上与 facebook、twitter 共享

> ID：15628580
> 
> 赞同：6
> 
> 时间：2013-03-26T02:57:01.017
> 
> 标签：iphone, ios, objective-c, facebook, share

在 Android 操作系统上，有一个与 facebook、twitter 和其他人共享的简单功能。看到这个[链接](http://developer.android.com/training/sharing/shareaction.html)。

是否有与iOS相同类型的东西？或者我们是否需要为所有类型的共享添加特定按钮，如“在 Facebook 上分享”“在 twitter 上分享”？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T03:03:31.443

您可以利用的内置功能称为[社交框架](http://developer.apple.com/library/ios/#documentation/Social/Reference/Social_Framework/_index.html)。

几周前，我在 NSChat 板上做了一个演示。 [你可以在这里找到演示文稿](https://chat.stackoverflow.com/rooms/15942/conversation/my-social-framework-presentation)和[我的源代码](http://github.com/dautermann/SocialTest)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-09T04:13:02.420

您可以使用非常易于使用的 iOS 控件**[AAShareBubbles](https://github.com/mixdesign/AAShareBubbles)**来呈现社交按钮，例如：
**Facebook、Twitter、Google+、Tumblr、Vkontakte (vk.com)、LinkedIn、Pinterest、Youtube、Vimeo、E-mail**

![在此处输入图像描述](../Images/afff6515466b646ff1dcef5e12c8d082.png)

按照 github 的链接：[https ://github.com/mixdesign/AAShareBubbles](https://github.com/mixdesign/AAShareBubbles)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T03:06:31.157

尝试使用 ShareKit，很简单。[http://getsharekit.com](http://getsharekit.com)

# sql - 如何从 ID 出现的最新存档表中获取记录

> ID：15628583
> 
> 赞同：1
> 
> 时间：2013-03-26T02:57:58.557
> 
> 标签：sql, sql-server, sql-server-2008-r2, greatest-n-per-group

我在 SQL Server 2008 R2 中链接了 MAS（会计系统）的数据库。工资单记录在该数据库中的工作方式是，每个季度都会制作工资单表存档，并制作一个新的当前季度表，并删除所有已离职的员工。它确实有唯一的员工 ID。存档和当前版本的结构相同。

因此，在今年第二季度，在第一季度被解雇的员工仅在数据库的第一季度副本中。在第一季度和第二季度工作的员工在第一季度副本和第二季度副本中。在第二季度雇用的员工仅在第二季度出现。

我需要能够构建一个集合（临时表、视图等）来使用，其中包括每个员工的最新记录。该集合将作为营业额、职位平均工资等查询的基础。

`UNION`我可以使用一个列足够快地构建一个 ID 列表`EmployeeID`，但是其他列会随着时间而变化（工资率、地址等），所以我不能简单地`UNION`列出所有列，因为我会有一些员工的重复项。

是否有一种合理有效的方法将历史数据库合并在一起，只保留每个员工的最新行？以这种方式表达了这个问题，我是否应该只制作一系列`MERGE`s，从最新到最旧的存档副本中退一步，在不匹配时插入？有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:48:37.250

有几种方法可以解决这个问题。这是一个：

*   创建一个视图以合并表，为每个表添加适当的存档日期列
*   针对 EmployeeID 上的 Group 视图创建子查询并获取 MAX 存档日期
*   使用子查询加入视图，获取每个员工的最新记录

创建示例表架构和测试数据

```
 SET NOCOUNT ON

    IF OBJECT_ID('Employee', 'U') IS NOT NULL DROP TABLE Employee;
    GO
    IF OBJECT_ID('Employee2012Q1', 'U') IS NOT NULL DROP TABLE Employee2012Q1;
    GO
    IF OBJECT_ID('Employee2012Q2', 'U') IS NOT NULL DROP TABLE Employee2012Q2;
    GO

    CREATE TABLE dbo.Employee (
        EmployeeID      int IDENTITY(1,1)   NOT NULL    PRIMARY KEY
       ,EmployeeName    varchar(50)         NOT NULL
       ,StartDate       smalldatetime       NOT NULL
       ,EndDate         smalldatetime       NULL
       ,Salary          decimal(18,2)       NOT NULL
       ,Position        varchar(50)         NOT NULL
       ,HomeAddress     varchar(200)        NOT NULL
    )

    -- Employees hired
    INSERT dbo.Employee SELECT 'John Doe', '01/01/2012', NULL, 50000, 'Developer', '12345 Main St, New York, NY'
    INSERT dbo.Employee SELECT 'Jane Doe', '01/01/2012', NULL, 52000, 'Developer', '837 1st St, New York, NY'

    -- Employee fired
    UPDATE A
       SET A.EndDate = '02/01/2012'
      FROM dbo.Employee A
     WHERE A.EmployeeName = 'John Doe'

    -- Table archived
    SELECT * INTO dbo.Employee2012Q1 FROM dbo.Employee

    --  Remove fired employees
    DELETE dbo.Employee WHERE EndDate IS NOT NULL

    -- Employee hired
    INSERT dbo.Employee SELECT 'Jack Flash', '04/01/2012', NULL, 73000, 'Manager', '9580 21st St, New York, NY'

    -- Employee fired
    UPDATE A
       SET A.EndDate = '05/01/2012'
      FROM dbo.Employee A
     WHERE A.EmployeeName = 'Jack Flash'

    -- Table archived
    SELECT * INTO dbo.Employee2012Q2 FROM dbo.Employee

    --  Remove fired employees
    DELETE dbo.Employee WHERE EndDate IS NOT NULL

    SET NOCOUNT OFF
    GO 
```

创建一个合并所有员工表的视图

```
 IF OBJECT_ID('EmployeeArchive', 'V') IS NOT NULL DROP VIEW dbo.EmployeeArchive
    GO
    CREATE VIEW dbo.EmployeeArchive
    AS
    SELECT CONVERT(smalldatetime, CONVERT(char(10), GETDATE(), 101)) as [ArchiveDate]
          ,EmployeeID
          ,EmployeeName
          ,StartDate
          ,EndDate
          ,Salary
          ,Position
          ,HomeAddress
     FROM dbo.Employee 
    UNION ALL
    SELECT CONVERT(smalldatetime, '03/31/2012') as [ArchiveDate]
          ,EmployeeID
          ,EmployeeName
          ,StartDate
          ,EndDate
          ,Salary
          ,Position
          ,HomeAddress
      FROM dbo.Employee2012Q1 
    UNION ALL
    SELECT CONVERT(smalldatetime, '06/30/2012') as [ArchiveDate]
          ,EmployeeID
          ,EmployeeName
          ,StartDate
          ,EndDate
          ,Salary
          ,Position
          ,HomeAddress
      FROM dbo.Employee2012Q2 
    GO 
```

获取每位员工的最新信息

```
 SELECT A.*
      FROM dbo.EmployeeArchive A
      JOIN (
            SELECT EmployeeID, MAX(ArchiveDate) as MaxArchiveDate
              FROM dbo.EmployeeArchive
             GROUP BY EmployeeID
           ) B
        ON A.EmployeeID  = B.EmployeeID
       AND A.ArchiveDate = B.MaxArchiveDate 
```

# wordpress - 在新的 WordPress 网站上保留旧链接

> ID：15628586
> 
> 赞同：-1
> 
> 时间：2013-03-26T02:58:43.843
> 
> 标签：wordpress, google-search

这是一个简单的场景。客户想要翻拍旧网站，我们选择了 WordPress。除了视觉重新设计外，内容结构和自然链接也发生了变化。问题是旧内容在谷歌上的排名很高，所以问题实际上是两倍。

*   切换到新站点会影响排名吗？

*   如何保留 Google 上已有的链接以指向相同内容但指向新网站上的不同 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:04:58.917

切换会影响你的谷歌排名。排名与页面的地址相关，因此当您将其移动到新地址时，您会失去您建立的排名。但是，如果您使用从旧内容到新内容的 301 重定向，您将*保留*您的 Google 排名。这告诉搜索引擎您在页面 A 中的内容现在在页面 B 中。想想 Internet 的“地址更改”卡。它适用于搜索引擎以及浏览器中的用户。

这是一篇关于这个主题的好文章： [http ://www.bruceclay.com/blog/2007/03/how-to-properly-implement-a-301-redirect/](http://www.bruceclay.com/blog/2007/03/how-to-properly-implement-a-301-redirect/)

# c# - 初始化通用类型中的所有属性？

> ID：15628589
> 
> 赞同：0
> 
> 时间：2013-03-26T02:59:04.750
> 
> 标签：c#, generics, reflection

我想初始化泛型类型的所有公共属性。
我写了以下方法：

```
public static void EmptyModel<T>(ref T model) where T : new()
{
    foreach (PropertyInfo property in typeof(T).GetProperties())
    {
        Type myType = property.GetType().MakeGenericType();
        property.SetValue(Activator.CreateInstance(myType));//Compile error
    }
} 
```

但它有一个编译错误

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T03:02:23.700

这里存在三个问题：

*   [`PropertyInfo.SetValue`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.setvalue.aspx)接受两个参数，一个对象的引用来设置属性（或`null`静态属性）`，以及设置它的值。
*   `property.GetType()`将返回`PropertyInfo`。要获取属性本身的类型，您想[`property.PropertyType`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.propertytype.aspx)改用。
*   当属性类型上没有无参数构造函数时，您的代码不会处理这种情况。如果不从根本上改变你做事的方式，你不能太花哨，所以在我的代码中，`null`如果没有找到无参数的构造函数，我将初始化属性。

我认为您正在寻找的是：

```
public static T EmptyModel<T>(ref T model) where T : new()
{
    foreach (PropertyInfo property in typeof(T).GetProperties())
    {
        Type myType = property.PropertyType;
        var constructor = myType.GetConstructor(Type.EmptyTypes);
        if (constructor != null)
        {
            // will initialize to a new copy of property type
            property.SetValue(model, constructor.Invoke(null));
            // or property.SetValue(model, Activator.CreateInstance(myType));
        }
        else
        {
            // will initialize to the default value of property type
            property.SetValue(model, null);
        }
    }
} 
```

# javascript - Javascript循环遍历元素并添加到表格

> ID：15628597
> 
> 赞同：0
> 
> 时间：2013-03-26T02:59:53.573
> 
> 标签：javascript, html, loops, d3.js

我很难找到一个解决方案来帮助我遍历一堆元素并将所选值放入表中。我已经能够撤回一些值，但该方法不是动态的。

这是一个例子：

```
var Table = {
    "credit": {
        "link": "site link", 
        "logoUrl": "logo url", 
        "message": "message"
    }, 
    "groups": [
        {
            "labels": [
                {
                    "name": "Western Conference", 
                    "type": "conference"
                }, 
                {
                    "name": "Central Division", 
                    "type": "division"
                }
            ], 
            "standings": [
                {
                    "stats": [
                        {
                            "name": "gp", 
                            "value": 20
                        }, 
                        {
                            "name": "w", 
                            "value": 17
                        }, 
                        {
                            "name": "l", 
                            "value": 0
                        }, 
                        {
                            "name": "gf", 
                            "value": 64
                        }, 
                        {
                            "name": "ga", 
                            "value": 37
                        }, 
                        {
                            "name": "gd", 
                            "value": 27
                        }, 
                        {
                            "name": "pts", 
                            "value": 37
                        }
                    ], 
                    "team": {
                        "id": 12345, 
                        "link": "team link", 
                        "name": "team name", 
                        "shortName": "team"
                    }
                }, 
```

这是元素的结构。到目前为止，我已经使用了这个：

```
document.getElementById("sGamesPlayed").innerHTML=Table.groups[0].standings[0].stats[0].value; 
```

撤回价值。然而，有更多的团队、统计数据和部门，所以我需要某种循环来遍历元素并将它们放入动态表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:22:25.720

我会考虑你看看[http://underscorejs.org/](http://underscorejs.org/)。

它提供了一堆可以帮助您的实用函数，例如，_.each() 可以帮助您遍历 JSON 属性。

对于您提供的示例对象（在完成最后缺少的括号之后），

```
_.each(Table.groups[0].standings[0].stats, function(stats){
    console.log(stats['name']+","+stats['value'])
}) 
```

给我：

```
gp,20
w,17
l,0
gf,64
ga,37
gd,27
pts,37 
```

它的工作原理是您提供您想要的对象作为第一个参数，并且您作为第二个参数提供的函数将与第一个参数的每个元素一起调用（假设它是一个列表）。

我还敦促您查看下划线模板，您可以使用它来呈现我放置 console.log 的表格：

1.  [http://net.tutsplus.com/tutorials/javascript-ajax/getting-cozy-with-underscore-js/](http://net.tutsplus.com/tutorials/javascript-ajax/getting-cozy-with-underscore-js/)
2.  [http://scriptble.com/2011/01/28/underscore-js-templates/](http://scriptble.com/2011/01/28/underscore-js-templates/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:42:02.453

根据您要对结果执行的操作，您可以使用以下方案检查对象：

```
var groups, standings, stats, value;
groups = Table.groups;

// Do stuff with groups

for (var i=0, iLen=groups.length; i<iLen; i++) {
  standings = groups[i].standings;

  // Do stuff with standings

  for (var j=0, jLen=standings.length; j<jLen; j++) {
    stats = standings[j];

    // Do stuff with stats

    for (var k=0, kLen=stats.length; k<kLen; k++) {
      value = stats[k].value;

      // Do stuff with value

    }
  }
} 
```

当然，我不知道数据的用途，整体结构是什么，或者你想如何呈现它。但如果你有深度嵌套的数据，你所能做的就是深入挖掘它。您可能可以编写递归函数，但如果数据结构复杂，它也可能变得非常难以维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T03:19:15.777

我猜你的问题是关于过滤数组的值`standings`。为此，您可以使用[jQuery grep](http://api.jquery.com/jQuery.grep/)函数（如果您想使用 jQuery）。

例如你可以写：

```
var arr = $.grep(Table.groups[0].standings[0].stats, function(d){return d.value>25}) 
```

哪个会给

```
arr = [{"name": "gf","value": 64}, {"name": "ga", "value": 37},{"name": "gd", "value": 27},{"name": "pts", "value": 37}] 
```

如果这不是你的意思，你能用你想要的样本创建一个 jsFiddle 吗？

# java - 从 JSON 中提取字节数组

> ID：15628603
> 
> 赞同：2
> 
> 时间：2013-03-26T03:00:46.743
> 
> 标签：java, json, bytearray, gson, illegalstateexception

我有以下格式的 JSON：

```
[{"fingerprint":"[79,0,0,0,18,0,0,0,18,0,0,0,19,0,0,0,23,0,0,0,40,0,0,0,42,0,0,0,63,0,0,0,68,0,0,0,71,0,....]"}] 
```

我一直在尝试使用以下方法从中提取字节数组：

```
JSONFingerprint fingerprintData = gson.fromJson(obj, JSONFingerprint.class); 
```

JSONFingerprint 在哪里：

```
public class JSONFingerprint {

    byte[] fingerprint;

    public byte[] getfingerprintData() {
        return fingerprint;
    }

} 
```

我一直收到此错误：

```
Exception in thread "Thread-0" com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_ARRAY but was STRING
    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176)
    at com.google.gson.Gson.fromJson(Gson.java:795)
    at com.google.gson.Gson.fromJson(Gson.java:859)
    at com.google.gson.Gson.fromJson(Gson.java:832) 
```

有人有什么想法吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T03:31:52.780

看来您的**JSON**和**POJO**不匹配。对此有两种可能的解决方案。

**解决方案1：-**

如果您无法更改 JSON 格式（即）您的 JSON 将是这样的，

```
[{"fingerprint":"[79,0,0,0,18,0,0,0,18,0,0,0,19,0,0,0,23,0,0,0,40,0,0,0,42,0,0,0,63,0,0,0,68,0,0,0,71,0,....]"}] 
```

然后你需要把你的`JSONFingerprint`班级改成这样： -

```
public class JSONFingerprint {

    String fingerprint;

    public String getfingerprintData() {
        return fingerprint;
    }
} 
```

你需要`JSON`像这样解析你的： -

```
JSONFingerprint[] dummy = new JSONFingerprint[0]; 
JSONFingerprint[] fingerPrint = gson.fromJson(json, dummy.getClass());
System.out.println(fingerPrint[0].getfingerprintData()); 
```

**解决方案2： -**

如果你的 POJO 不能改变（即）你的 POJO 将会是这样，

```
public class JSONFingerprint {

    byte[] fingerprint;

    public byte[] getfingerprintData() {
        return fingerprint;
    }
} 
```

然后，您必须将`JSON`格式更改为以下内容：-

```
{"fingerprint":[1,2,3,4,5,6,7,8,9,10]} 
```

您通常可以解析它，就像您已经完成的那样：-

```
JSONFingerprint fingerprintData = gson.fromJson(obj, JSONFingerprint.class); 
```

希望这对你有帮助！

# dll - 使用 dll 中的参数和调用方法创建实例

> ID：15628609
> 
> 赞同：0
> 
> 时间：2013-03-26T03:01:42.040
> 
> 标签：dll, assembly.reflectiononly

我正在加载一个 dll，创建一个实例并想要调用方法并检查返回值。创建实例时出现异常 {"Parameter count mismatch."}：

```
 static void Main(string[] args)
    {

            ModuleConfiguration moduleConfiguration = new ModuleConfiguration();

            // get the module information
            if (!moduleConfiguration.getModuleInfo())
                throw new Exception("Error: Module information cannot be retrieved");

            // Load the dll
            string moduledll =  Directory.GetCurrentDirectory() + "\\" +
                                                       moduleConfiguration.moduleDLL;
            testDLL = Assembly.LoadFile(moduledll);

            // create the object
            string fullTypeName = "MyNameSpace."+ moduleConfiguration.moduleClassName;
            Type moduleType = testDLL.GetType(fullTypeName);

            Type[] types = new Type[1];
            types[0] = typeof(string[]);

            ConstructorInfo constructorInfoObj = moduleType.GetConstructor(
                        BindingFlags.Instance | BindingFlags.Public, null,
                        CallingConventions.HasThis, types, null);

            if (constructorInfoObj != null)
            {
                Console.WriteLine(constructorInfoObj.ToString());
                constructorInfoObj.Invoke(args);
            }

The constructor for the class in dll is:
public class SampleModule:ModuleBase
{
    /// <summary>
    /// Initializes a new instance of the <see cref="SampleModule" /> class.
    /// </summary> 
    public SampleModule(string[] args)
        : base(args)
    {
        Console.WriteLine("Creating SampleModule"); 
    } 
```

问：1.我做错了什么？2\. 如何获取方法、调用它并获取返回值？3\. 有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:36:45.857

只需要添加以下行：

```
Object[] param = new Object[1] { args }; 
```

前：

```
constructorInfoObj.Invoke(args); 
```

不使用 ConstructorInfo 的替代（短）解决方案：

```
 :

       // create the object
        string fullTypeName = "MyNameSpace."+ moduleConfiguration.moduleClassName;
        Type moduleType = testDLL.GetType(fullTypeName);

        Object[] param = new Object[1] { args };
        Activator.CreateInstance(runnerType, param); 
```

# objective-c - 如何在文本字段中获取科学记数法？

> ID：15628611
> 
> 赞同：0
> 
> 时间：2013-03-26T03:01:48.887
> 
> 标签：objective-c, cocoa-touch, nsstring, nsnumber, nsnumberformatter

我试图让我的应用程序中的这个文本字段在输入 8 个字符后以科学计数法显示（有点像内置的计算器应用程序）。我一切正常，除了应该以科学计数法显示时，它只显示“0.0”。

我的代码有什么问题？

```
NSString *current;
NSString *str = (NSString*)[sender currentTitle]; //sender is in the method header
if([current isEqualToString:@"0"]) {
    current = str;
} else if (current.length < 8){
    current = [current stringByAppendingString:str];
} else {
    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setNumberStyle:NSNumberFormatterScientificStyle];
    current = [formatter stringFromNumber:(NSNumber*)current];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:15:26.150

您不能只将 an`NSString`转换为`NSNumber`. 用于`doubleValue`将 an 转换`NSString`为 double：

```
current = [formatter stringFromNumber:@([current doubleValue])]; 
```

或者您可以使用 an`NSNumberFormatter`将字符串转换为数字，如[本答案中所述](https://stackoverflow.com/a/1448875/1489997)

# php - PHP - 按钮将我带到一个完全不同的页面

> ID：15628616
> 
> 赞同：0
> 
> 时间：2013-03-26T03:02:08.200
> 
> 标签：php

我制作了一个注册页面，由于某种原因，当人们点击按钮进行注册时，它会将他们带到与我告诉代码将他们带到的页面不同的页面。

```
<form action="../scripts/registerparse.php" method="post">
    Username <input type="text" name="username" id="username" />
    Password <input type="password" name="password" id="password" />
    Confirm Password <input type="password" name="confirmpassword" id="confirmpassword" />
    Full Name <input type="text" name="fullname" id="fullname" />
    Email <input type="text" name="email" id="email" />
    Gamertag <input type="text" name="gamertag" id="gamertag" />
    Console <select name="console">
                <option value="XBox360">XBOX 360</option>
                <option value="Playstation3">PS3</option>
            </select>
    <input type="submit" value="Create Your Account Now" name="submit2" id="submit2" />
</form> 
```

代码告诉这个人去“registerparse.php”，但它把这个人带到“loginparse.php”。有谁知道它为什么这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:04:32.023

检查你的`registerparse.php`

如果有条件要走`loginparse.php`

看看是否有东西重定向你的页面`registerparse.php`

从 Firefox 打开页面，然后打开`Firebug`

在萤火虫启用`NET`控制台然后单击表单所在的提交按钮

`registerparse.php`你会在去之前看看你的表格是否去`loginparse.php`

或直接前往`loginparse.php`

**2 从** `firebug`.

1\. 如果你的表格在去`registerparse.php`之前`loginparse.php`你应该检查你`loginparse.php` 是否有任何重定向..

2\. 如果您的表单直接`loginparse.php`检查表单所在的文件是否有一些javascripts，那么表单直接提交时可能会出现问题。

# java - 在 JTextArea 中按下空格键后如何调用方法

> ID：15628617
> 
> 赞同：4
> 
> 时间：2013-03-26T03:02:15.453
> 
> 标签：java, swing, jtextarea

抱歉，这可能是一个简单的问题，但是每次在 JTextArea 中按下空格键时，我如何调用一个方法？我曾尝试将 keylistener 附加到文本区域，但无法使其正常工作。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T03:05:40.383

阅读有关[如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)的 Swing 教程。

本教程包含示例，您可以在论坛中找到大量其他示例。

当您创建要执行的自定义操作时，您将扩展 TextAction。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T06:31:27.963

```
JTextArea jt=new JTextArea();

jt.addKeyListener(new KeyListener(){ 

    public void keyPressed(KeyEvent ke){ 

         if(ae.getKeyCode()==KeyEvent.VK_SPACE){
              //call your method
         }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:11:29.387

虽然@camickr 有一个我赞成的简单的好解决方案，但一个复杂但更彻底的选择是使用与`Document`关联的`JTextArea`, 并覆盖它的`insertString()`方法。有时您已经这样做了，例如，为了防止将字母添加到数字字段中。*与 KeyBinding 相比，它的优点是当用户复制并粘贴*到 JTextArea时它也会捕获。因此，如果用户将“foo bar”复制并粘贴到该区域，KeyBinding 将无法捕捉到它（我很确定，我错了吗？）并且 Document 技术会。例如，非常示意性地：

```
@Override
public void insertString(int offset, String str, AttributeSet a) throws BadLocationException {
  if (str.contains(" "))
    callMySpecialSpaceMethod();
  super.insertString(offset, str, a);
} 
```

正如@camickr 所指出的，与其直接继承和覆盖 Document.insertString()，不如将其设置为 DocumentFilter。（[更喜欢组合而不是继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)。）不幸的是，它有点笨拙，但这里是基本代码：

```
((AbstractDocument)myTextArea.getDocument()).setDocumentFilter(new DocumentFilter() {

    @Override
    public void insertString(FilterBypass fb, int offset, String str, AttributeSet a) throws BadLocationException {
        if (str.contains(" "))
            callMySpecialSpaceMethod();
        fb.insertString(offset, str, a);
    }

}); 
```

这比 KeyBinding 要做的工作要多得多，因此，除非您真的需要如此彻底，或者您已经出于其他原因这样做，否则 KeyBinding 会更简单。这取决于您的要求-在您的情况下，我认为您不在乎他们是否复制和粘贴。

# css - CSS - Firefox 中滑块的宽度

> ID：15628620
> 
> 赞同：1
> 
> 时间：2013-03-26T03:02:27.927
> 
> 标签：css, wordpress, firefox

我正在修复一个网站。我遇到了我使用的滑块的问题。我使用的滑块是轨道滑块。

事情是这样的：

每张幻灯片加载比容器宽度小 1 个像素，然后在一秒钟后拉伸并最大化其容器的宽度。

我在父容器内的每个 div 中尝试了 width:100% ，但 css 规则并不能解决我的问题。

除了 Firefox，所有现代浏览器看起来都很棒。

该网站是[http://www.shamarra.co.nz/test/](http://www.shamarra.co.nz/test/)

**Q：如何在每张幻灯片的初始状态填充宽度，使其符合FIREFOX中的标准滑块输出。**

我怀疑滑块需要修改 CSS 来解决这个问题。

![在此处输入图像描述](../Images/18ea1e0d88a47a06e647e1529759e951.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:39:17.647

***只需尝试以下内容：***

在您的 css 文件上：[http ://www.shamarra.co.nz/wp-content/plugins/wp-orbit-slider/css/default.css](http://www.shamarra.co.nz/wp-content/plugins/wp-orbit-slider/css/default.css)

删除/隐藏以下行并在 Firefox 中刷新/清除浏览器缓存。

```
#orbit-inside img.orbit-slide {
    /*height: auto;
    max-width: 100% !important;
    width: 100% !important;*/
} 
```

还，

```
 div.orbit > img {
        /*left: 0;*/
        position: absolute;
        top: 0;
    }

    div.orbit > img, div.orbit > a {
        display: none;
        height: 100%;
        /*left: 0;*/
        position: absolute;
        top: 0;
        /*width: 100%;*/
    } 
```

然后它将开始完美地工作。我已经在我的本地服务器上进行了测试，它工作正常。

我认为这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:21:58.277

这似乎是 FireFox 10+ 的一个错误。已经有多个错误报告。

报告一： [https ://bugzilla.mozilla.org/show_bug.cgi?id=745549](https://bugzilla.mozilla.org/show_bug.cgi?id=745549)

报告 2： [https ://bugzilla.mozilla.org/show_bug.cgi?id=780521](https://bugzilla.mozilla.org/show_bug.cgi?id=780521)

我不确定是否有修复，上次我读到他们还没有找到解决这个错误的方法。

# dynamics-crm-2011 - 如何在 MS Dynamics CRM 2011 中发送批准电子邮件请求

> ID：15628623
> 
> 赞同：3
> 
> 时间：2013-03-26T03:02:40.427
> 
> 标签：dynamics-crm-2011, crm, microsoft-dynamics, dynamics-crm-online

如何从 Ms Dynamics CRM 中的活动表单发送电子邮件批准请求。

![在此处输入图像描述](../Images/2a1b1a351d5b8493b1cacca09c2efc22.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:08:11.030

不可否认，我现在很累，因为我整晚都没有睡，但据我所知，我找不到**你**的选择。这就是它在我的机器上的样子（RU 12，本地）。

![在此处输入图像描述](../Images/762e1ab95497397c86cef0f7efad28ed.png)

# sql-server - 需要在 SQL Server 存储过程中验证美国邮政编码

> ID：15628624
> 
> 赞同：4
> 
> 时间：2013-03-26T03:03:04.910
> 
> 标签：sql-server, stored-procedures

我有一个带有 2 个可选参数的存储过程，如下所示。我需要验证可选参数之一@Zip，即我需要确保用户在执行此存储过程时输入了正确的美国邮政编码。我尝试在下面的存储过程中使用正则表达式，但它不起作用。请让我知道我该如何做到这一点？谢谢你。

```
 CREATE PROCEDURE usp_GetDetails
                     (
                       @Name varchar(255) = null, @Zip int = null
                      )
                     as
                     begin
         SELECT DISTINCT
         [Name],[Address1],[Address2],[City],[Zip]
         FROM    AddressTable
         WHERE 
             ( @Name IS NULL
                      OR AddressTable.[Name] LIKE '%' + @Name + '%'
                     )
                AND  ( @Zip IS NULL
                     OR AddressTable.[Zip] = (RegexMatch (@Zip, '^\d{5}(\-\d{4})?$'))
                     ) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T03:58:36.680

根据[这个 StackOverflow 帖子](https://stackoverflow.com/questions/1964124/regular-expression-inside-sql-server)，SQL Server 显然支持正则表达式，但看起来有一些极端的设置。

由于您的过程接受`@Zip`作为一种`INT`类型，因此您只需检查它是否在 0 到 99,999 之间。但这与您尝试的正则表达式不一致，另外我建议使用上面 Aaron 指出的字符类型。

如果`@Zip`是字符类型，则 SQL Server`LIKE`足够健壮以对其进行验证。这将检查 ZIP 是 5 位还是 9 位或“5 位加破折号加 4 位”：

```
IF   @Zip LIKE '[0-9][0-9][0-9][0-9][0-9]'
  OR @Zip LIKE '[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'
  OR @Zip LIKE '[0-9][0-9][0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]' 
```

这将确保 ZIP 格式正确，但不能保证 ZIP 确实被美国邮政服务识别为有效，也不能保证 ZIP 适合街道地址、城市和州。

# image - 为什么在matlab中读取图像时必须使用double？

> ID：15628626
> 
> 赞同：3
> 
> 时间：2013-03-26T03:03:25.957
> 
> 标签：image, matlab, double

我正在上matlab编程课，老师告诉我们要一直写

```
img = double(imread('file.tif')); 
```

而不是

```
img = imread('file.tif'); 
```

因为省略`double(...)`可能“导致错误”。我对为什么会发生这些错误感到困惑。

这是一个交互式会话示例，我取每个像素的平方值（注意 - 输入图像是灰度的），并且该值仅在我们使用双精度时才正确：

```
>> img = imread('cat.tif');
>> img_double = double(imread('cat.tif'));
>> img = img .^2;
>> img_double = img_double .^2;
>> img(1:10, 1:10)

ans =

  255  255  255  255  255  255  255  255  255  255
  225  255  255  255  255  255  255  255  255  255
  255  255  255  255  255  255  255  255  255  255
  255  255  255  255  255  255  255  255  255  255
  255  255  255  255  255  255  255  255  255  255
  255  255  255  255  255  255  255  255  255  255
  255  255  255  255  255  255  255  255  255  255
  255  255  255  255  255  255  255  255  255  255
  255  255  255  255  255  255  255  255  255  121
  255  255  255  255  255  255  255  255  255   49

>> img_double(1:10, 1:10)

ans =

  Columns 1 through 5

       16129       16129       16129       16129       16129
         225         361         625        1089        1681
         324         484         961        1681        2209
         400         729        1369        2401        3025
         576        1225        2209        3249        3969
         900        1849        3025        4096        4900
        1369        2809        4096        5184        5625
        2209        3969        5476        6241        6241
        3249        5041        6400        7056        6724
        4489        6241        7569        7569        6724

  Columns 6 through 10

       16129       16129       16129       16129       16129
        2025        2209        2209        1849        1521
        2809        2809        2401        2025        1521
        3249        3249        2809        2025        1369
        3969        3481        2809        1849        1089
        4624        3969        2809        1681         841
        5041        3969        2601        1369         529
        5184        3721        2209         961         289
        5184        3481        1681         576         121
        5041        2809        1225         289          49 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T03:04:53.970

您不需要在 MATLAB 中将图像读取为双精度。默认情况下，图像是类型元素的矩阵，`uint8`范围为 0 到 255。根据您的计算需要，您可以将图像转换为各种类型（`uint16`、`uint32`、`uint64`、`double`等）。

在您的情况下，将元素的值平方`uint8`会导致溢出，这就是您看到最大值 255 的原因。

# java - 一个数组是另一个数组的子集

> ID：15628632
> 
> 赞同：3
> 
> 时间：2013-03-26T03:04:05.210
> 
> 标签：java, arrays, subset

如何有效地检查整数数组中的所有元素是否是java中另一个数组的所有元素的子集？例如 [33 11 23] 是 [11 23 33 42] 的子集。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T03:12:13.280

如果您不限于使用数组，则任何 Java 集合都具有以下`containsAll`方法：

```
boolean isSubset = bigList.containsAll(smallList); 
```

这将有效地完成您想要的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T03:06:29.933

假设您要检查 A 是 B 的子集。将 B 的每个元素放入哈希中，然后遍历 A 中的元素，它们都必须存在于哈希中

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T03:08:47.753

`HashSet`从超集数组中创建一个。检查子集数组的每个元素是否包含在`HashSet`. 这是一个非常快速的操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-05T12:13:08.657

我有两种不同的解决方案

输入： `int mainArray[] = { 1, 2, 3, 2, 5, 6, 2 }, subArray[] = { 2, 2, 2 };`

*   第一个解决方案遍历两个数组并进行比较， `main[i] = -1`用于避免再次包含重复元素

    ```
    void findIfArrayIsASubset(int[] main, int[] sub) {
    int count = 0;
    for (int i = 0; i < main.length; i++) {
        for (int j = 0; j < sub.length; j++) {
            if (main[i] == sub[j]) {
                main[i] = -1;
                count++;
                break;
            }
        }
    }
    if (count == sub.length)
        System.out.println("is a subset");
    else
        System.out.println("is not a subset");
    } 
    ```

*   第二种解决方案使用具有键 from`1....9`和值 as 的hashmap `0`，
    接下来我们迭代主数组和`+1`相应的值，
    接下来我们迭代子数组和`-1`相应的值
    ，接下来将 hashmap 的值的总和与两个数组的长度差

    ```
    void findIfArrayIsASubset(int[] main, int[] sub) {
    Map<Integer, Integer> mainMap = new HashMap<Integer, Integer>();
    for (int i = 0; i < 10; i++) {
        mainMap.put(i, 0);
    }
    for (int i = 0; i < main.length; i++) {
        mainMap.put(main[i], mainMap.get(main[i]) + 1);
    }
    for (int i = 0; i < sub.length; i++) {
        mainMap.put(main[i], mainMap.get(main[i]) - 1);
    }
    String output = mainMap.values().stream().reduce(0, Integer::sum).compareTo(main.length - sub.length) == 0
            ? "is a subset" : "not a subset";
    System.out.println(output);
    } 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-22T07:06:37.733

**外层循环一一挑选 arr2[] 的所有元素。内循环线性搜索外循环选取的元素。如果找到所有元素，则返回 true，否则返回 false**。

boolean checkIsSubset(int arr1[], int arr2[]){

```
 int m=arr1.length,  n=arr2.length;
    int i = 0;
    int j = 0;
    for (i=0; i<n; i++){
        for (j = 0; j<m; j++){
           if(arr2[i] == arr1[j])
              break;
        }
        if (j == m)
           return false;
    }
    return true;
} 
```

为什么排序后要进行二分查找？？由于两个数组都将以排序形式提供，因此我们可以只使用两个指针，如下所示：-

boolean isSubset(int arr1[], int arr2[], int m, int n){

```
int i = 0, j = 0;
quickSort(arr1, 0, m-1);
quickSort(arr2, 0, n-1);
while( i < n && j < m )
{
    if( arr1[j] <arr2[i] )
        j++;
    else if( arr1[j] == arr2[i] )
    {
        j++;
        i++;
    }
    else if( arr1[j] > arr2[i] )
        return false;
}

if( i < n )
    return false;
else
    return true; 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-27T21:52:51.943

对两个数组进行排序并检查较小数组中的所有元素是否存在于较大数组中。这是不使用额外空间的。

如果不使用已经有人建议的 hasmap 。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-26T03:13:41.837

这将检查较大数组中是否缺少可能子集的任何元素。如果是，它不是一个子集：

```
boolean isSubset(int[] a1, int[] a2) {
    a2 = Arrays.copyOf(a2, a2.length);
    Arrays.sort(a2);
    for(int e : a1) {
        if (Arrays.binarySearch(a2, e) < 0) {
            return false;
        }
    }
    return true;
} 
```

# java - 你如何/可以同时使用 && 和 || 在相同的 if 语句条件下？

> ID：15628634
> 
> 赞同：5
> 
> 时间：2013-03-26T03:04:21.743
> 
> 标签：java, operators, logical-operators

可以说，哪个逻辑运算符先于另一个“优先”或“读取”。

例如：

```
if( x=y || y=y && x=x ){} 
```

java 是否将其读作：以下两者之一：(x=y||y=y), AND (x=x)

或为： (x=y) 或 (y=y AND x=x)

听起来像是会被问到或至少很容易找到的东西，但唉，“和”+“或”是谷歌的关键词。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T03:07:12.350

运算符`&&`的优先级高于`||`，因此`&&`将首先评估。

[http://introcs.cs.princeton.edu/java/11precedence/](http://introcs.cs.princeton.edu/java/11precedence/)

尽管如此，许多程序员不会记得这个事实。使用括号来明确说明预期的评估顺序会更清晰、更易于维护。

请注意，在您编写的代码中

```
x=y 
```

那实际上是赋值运算符，而不是相等运算符。大概你打算

```
x==y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:17:54.683

`x=y || y=y && x=x` 只有当 x 和 y 都是布尔值时才可以工作，因为 = 是赋值，它等价于`y || y && y`因为你在第一个操作中分配了 x=y

# python - 在 Django 中创建用户后更新用户配置文件

> ID：15628641
> 
> 赞同：1
> 
> 时间：2013-03-26T03:05:12.137
> 
> 标签：python, django, django-models, django-views, django-authentication

我使用 1.4x 方法扩展了用户对象，方法是添加自定义“配置文件”模型，然后在用户保存/创建时实例化它。在我的注册过程中，我想向配置文件模型添加其他信息。视图成功呈现，但配置文件模型未保存。下面的代码：

```
 user = User.objects.create_user(request.POST['username'], request.POST['email'], request.POST['password'])
    user.save()

    profile = user.get_profile()
    profile.title = request.POST['title']
    profile.birthday = request.POST['birthday']

    profile.save() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T09:04:46.823

使用此代码更新您的 models.py

```
from django.db.models.signals import post_save
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        profile, created = UserProfile.objects.get_or_create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

现在当你做

用户保存（）

它将自动创建一个配置文件对象。那么你可以做

```
user.profile.title = request.POST['title']
user.profile.birthday = request.POST['birthday']
user.profile.save() 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T06:46:00.420

user 是 User 模型的一个实例。似乎您正在尝试获取已经存在的实例。这取决于您从 user.get_profile 返回的内容。您必须启动 UserProfile 实例。更简单的方法可能是这样的：

```
user_profile = UserProfile.objects.create(user=user)
user_profile.title = request.POST['title']
...
.
.
user_profile.save() 
```

# php - 无法浏览 mysql 查询结果

> ID：15628644
> 
> 赞同：0
> 
> 时间：2013-03-26T03:05:23.077
> 
> 标签：php, mysql

有人可以帮我解决浏览返回记录的问题吗？我有一个mysql查询：

```
if(isset($_GET['record'])) {
$record_current = $_GET['record'];
}else{
$record_current = 1;
}

$useremail = $_SESSION['useremail'];

$view_sql = "SELECT * FROM missions, calendar, bookings 
WHERE missions.missions_id =  calendar.missions_id 
AND calendar.calendar_id = bookings.calendar_id 
AND bookings.booking_email ='$useremail' LIMIT $record_current,1";

$view_result = mysql_query($view_sql) or die(mysql_error());
$view_count = mysql_num_rows($view_result);
$rsView = mysql_fetch_assoc($view_result); 
```

查询产生所需的结果。这些值用于填写动态表单。我遇到的问题是正确浏览记录。我正在使用此代码进行导航（以允许用户查看他们所做的所有预订）。编码：

```
<span class="label"><?php if($record_current > 1) { ?><a href="view.php?record=<?php echo $record_current - 1; ?>" >Previous</a><?php } ?></span>
<span class="element"><?php if($record_current < $view_result) { ?><a href="view.php?record=<?php echo $record_current + 1; ?>" >Next</a><?php } ?></span> 
```

问题是要显示的第一条记录实际上是查询中的第二条记录，即使显示最后一条记录，也会显示“下一个”链接。如果单击该链接，则会显示一个空白表单。我不知道我做错了什么，我已经玩了几个小时，任何帮助将不胜感激。干杯

**编辑**

我已经修改了代码（感谢肖恩）：

```
$view_sql = "SELECT SQL_CALC_FOUND_ROWS * FROM missions, calendar, bookings 
WHERE missions.missions_id =  calendar.missions_id 
AND calendar.calendar_id = bookings.calendar_id 
AND bookings.booking_email ='$useremail' LIMIT $record_current,1";

$view_result = mysql_query($view_sql) or die(mysql_error());
$view_count = mysql_query("SELECT FOUND_ROWS() AS cnt");
$rsView = mysql_fetch_assoc($view_result);
$adj_count = (mysql_result($view_count, 0, "cnt") - 1); 
```

显然，“SELECT FOUND_ROWS”返回一个从零开始的集合。现在正在工作。感谢所有做出贡献的人。干杯，土豆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:01:50.473

*注意：在`LIMIT $record_current,1`提醒计算机逻辑时，每个计数都从零开始，因此如果您尝试获取第一个数据，则必须将初始值设置`$record_current`为 0*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:42:20.270

您`if()`的`NEXT`行是错误的，因为您正在检查`$record_current`查询 -`$view_result`而不是行数 - `$view_count`。尝试更改为 -

```
if($record_current < $view_count) 
```

**编辑**
看看`SQL_CALC_FOUND_ROWS`/`FOUND_ROWS()`在[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)。

```
$view_sql = "SELECT SQL_CALC_FOUND_ROWS * FROM missions, calendar, bookings 
WHERE missions.missions_id =  calendar.missions_id 
AND calendar.calendar_id = bookings.calendar_id 
AND bookings.booking_email ='$useremail' LIMIT $record_current,1";

$view_result = mysql_query($view_sql) or die(mysql_error());
$view_count = mysql_query("SELECT FOUND_ROWS()");
$rsView = mysql_fetch_assoc($view_result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T04:22:34.807

```
if(isset($_GET['record'])) {
$record_current = $_GET['record'];
}else{
$record_current = 1;
}

$view_sql = "SELECT * FROM missions, calendar, bookings 
WHERE missions.missions_id =  calendar.missions_id 
AND calendar.calendar_id = bookings.calendar_id 
AND bookings.booking_email ='$useremail' LIMIT $record_current,1"; 
```

> 问题是要显示的第一条记录实际上是查询中的第二条记录

请注意，当您使用 LIMIT 时，第一行的偏移量将始终为 0 而不是 1...

# c++ - 继承嵌套类时出现 C++ 错误 C4091

> ID：15628645
> 
> 赞同：1
> 
> 时间：2013-03-26T03:05:28.077
> 
> 标签：c++, visual-c++

大家好，我是新来的，在嵌套类中声明构造函数时出现错误。

假设我有一个名为 Event 的类，有 2 个继承它的嵌套类 SampleEvent 和 TimeEvent，在 SampleEvent 和 TimeEvent 构造函数中，有一个错误。

这是我的代码：

```
// Event Class
#ifndef EVENT_H
#define EVENT_H

#include <iostream>

namespace Engine
{
    namespace Data
    {
        class Event
        {
            public:
                // Class Variable
                int Measure;
                int Beat;
                int Position;

                // This Class that was I mean
                class SampleEvent;
                class TimeEvent;

                // Constructor
                Event(int measure, int beat, int pos);
        };

        // Sample Event Class
        class Event::SampleEvent : public Event
        {
            public:
            // variable in SampleEvent Class
            int ID;
            float Pan;
            float Vol;

            // Constructor
            SampleEvent(int id, float pan, float vol, int measure, int beat, int pos);
        };

        // Time Event Class
        class Event::TimeEvent : public Event
        {
            public:
            // variable in TimeEvent Class
            double Value;

            // Constructor
            TimeEvent(double value, int measure, int beat, int pos);
        };

        // Constructor of Event
        Event::Event(int measure, int beat, int pos)
        {
            Measure         = measure;
            Beat            = beat;
            Position        = pos;
        }

        // Constructor of Sample Event
        Event::SampleEvent::SampleEvent(int id, float pan, float vol, int measure, int beat, int pos) : Event::Event(measure, beat, pos)
        {
            ID                      = id;
            Pan                     = pan;
            Vol                     = vol;
            Measure         = measure;
            Beat            = beat;
            Position        = pos;
        }

        // Constructor of Time Event
        Event::TimeEvent::TimeEvent(double value, int measure, int beat, int pos) : Event::Event(measure, beat, pos)
        {
            Value                   = value;
            Measure         = measure;
            Beat            = beat;
            Position        = pos;
        }
    }      
}
#endif 
```

这给了我2个错误：

```
Error C2039: '{ctor}' : is not a member of 'Engine::Data::Event' (line 60)
Error C2039: '{ctor}' : is not a member of 'Engine::Data::Event' (line 71) 
```

有人能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:11:53.370

`int Position`缺少一个分号。

此外，您在代码末尾缺少一个右括号：

```
 }      
    } // <--- MISSING
} 
```

但是，代码的主要问题是您需要显式初始化基类构造函数，因为默认构造函数没有隐式定义（并且不能使用），因为您定义了一个构造函数`Event(int measure, int beat, int pos);`。

```
Event::SampleEvent::SampleEvent(int id, float pan, float vol, 
                               int measure, int beat, int pos)
: Event(id, id, id) // This is just an example, pass the proper values here
{
   //...
}

Event::TimeEvent::TimeEvent(double value, int measure, int beat, int pos)
: Event(measure, measure, measure) // Pass the proper values to base ctor 
```

**编辑**

现在错误是因为您使用`Event::Event(measure, beat, pos)`而不是`Event`. （但是，我认为这`Event::Event` *应该*可行，我认为这是 MSVC 中不接受代码的错误。）

# facebook - 如何使用 R 流式传输和保存 Facebook 公开帖子？

> ID：15628650
> 
> 赞同：2
> 
> 时间：2013-03-26T03:06:09.020
> 
> 标签：facebook, r, rcurl, rjson

我正在尝试通过 R 流式传输和保存公共帖子。我已经获得了令牌并进行了搜索。这就是我所做的。

> 要求（RCurl）
> 
> 要求（rjson）
> 
> 数据 <- getURL(" [https://graph.facebook.com/search?q=multishow&type=post&access_token=my_token](https://graph.facebook.com/search?q=multishow&type=post&access_token=my_token) ")

没关系，“数据”角色找到了一些东西。现在，如何将这个“数据”字符转换为数据框？是否可以在特定超时期间流式传输此搜索？

谢谢。

更新：

好的，现在我可以解析来自 Facebook 的 JSON 结果，但我仍然坚持正确地转换为 data.frame 并流式传输以获取新帖子。按照下面的代码：

```
library (RCurl)
library (rjson)
library (plyr)

data <- getURL("https://graph.facebook.com/search?q=my_query&type=post&access_token=my_token, cainfo="cacert.perm")

#JSON parser
parser <- newJSONParser()
parser$addData(data)
fb.data <- parser$getObject()

#JSON to data.frame 
#sometimes it works direct from rjson
df <- data.frame(fromJSON(fb.data))

#sometimes it works only with plyr package
df <- do.call("rbind.fill", lapply(fb.data, as.data.frame)) 
```

无论哪种方式，我都会得到一个带有 1 或 2 个观察值和数百个变量的 data.frame。我做的最后一次搜索，我得到了我的第一个观察值，有 42 个变量，第二个有 13 个变量，依此类推。我该如何处理它的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:29:58.630

要设置`timeout`你可以在 curl 常规选项中搜索超时选项，如下所示

```
 names(getCurlOptionsConstants())[grep('.*timeout*.',names(getCurlOptionsConstants()))] 
```

这给了我6个选项：

```
"timeout"              "connecttimeout"      
 "dns.cache.timeout"    "ftp.response.timeout" 
 "timeout.ms"           "connecttimeout.ms" 
```

我不知道您搜索的是哪一个，但我想您可以尝试以下方法：

```
getURL(url,.opts = list(timeout = 10)) 
```

# c++ - 如何理解这个关于在 C++ 中定义的代码示例？

> ID：15628655
> 
> 赞同：-4
> 
> 时间：2013-03-26T03:06:42.660
> 
> 标签：c++, c-preprocessor

```
#define EVENT_TYPE(DO) DO(EVENT_UNKNOWN), DO(EVENT_SIP), DO(EVENT_MEDIA), \
                     DO(EVENT_APP), DO(EVENT_TIMER), DO(EVENT_BREAK),  \
                     DO(EVENT_STOP), DO(EVENT_MAX) 
```

如何理解这个关于在 C++ 中定义的代码示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:12:07.053

宏是简单的替换。因此，无论您在 EVENT_TYPE 的 arg get 中放入什么，您在右侧事件列表中看到“DO”的位置都会被替换。例如，`EVENT_TYPE( GUI )`将替换为：

```
GUI(EVENT_UNKNOWN), GUI(EVENT_SIP), GUI(EVENT_MEDIA), \
GUI(EVENT_APP), GUI(EVENT_TIMER), GUI(EVENT_BREAK),   \
GUI(EVENT_STOP), GUI(EVENT_MAX) 
```

这可能是为了与其他宏一起使用，这样`GUI`（或其中的任何东西）本身就是一个宏，可以做一些事情，比如，预先添加一个命名空间（所以第一个元素变成 MyNamespace::MyUI::EVENT_UNKNOWN ) 或连接标识符字符串（因此第一个元素变为 GUI_EVENT_UNKNOWN）。

**更新**：根据您的评论：

```
#define STRINGIFY(VAR) #VAR 
```

用你放入 var 的任何内容创建一个字符串。通常这将是一个变量名，但它也可以是一个表达式。所以预处理器会转换：

```
int i = 42;
std::cout << STRINGIFY(i)   << " = " << i << '\n' 
          << STRINGIFY(i+1) << " = " << i+1 << '\n'; 
```

进入

```
int i = 42;
std::cout << "i"   << " = " << i << '\n' 
          << "i+1" << " = " << i+1 << '\n'; 
```

这将打印：

```
i = 42
i+1 = 43 
```

您还可以进行符号连接：

```
#define CONCAT(X) prefix_##X##_suffix

int CONCAT(myVar) = 42; 
```

会变成：

```
int prefix_myVar_suffix = 42; 
```

您也可以进行字符串连接，但我将把它作为练习留给读者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:12:42.203

它会进行文本替换以替换`DO`为您提供的任何内容，例如函数或仿函数。生成的代码将调用您传递的仿函数函数来代替`DO`每个`EVENT_UNKNOWN`，...并返回它们，就好像您将它们放置在 a、b、c 中一样。

您可以使用它来创建一组事件的枚举。例如：

```
// create array of all of EVENT_UKNOWN... as integers
int array[] = { EVENT_TYPE((int)) };

// Create array of strings
class Foo {
public:
   std::string operator()(int val) { ... }
};

Foo f;
std::string strings[] = { EVENT_TYPE(f); } 
```

# php - 缩小浏览器大小时无法扩展wordpress网站的导航

> ID：15628657
> 
> 赞同：6
> 
> 时间：2013-03-26T03:06:48.703
> 
> 标签：php, css, wordpress, hyperlink, wordpress-theming

我正在[verefly.com](http://verefly.com)寻求帮助。我已经开发了这个带有在线主题的网站并进行了必要的更改。我的问题是当浏览器从其原始大小缩小时导航菜单不会扩展。理想情况下，它应该做到这一点，并且直到几天前才正常运行。

正常的网站是这样的：

![在此处输入图像描述](../Images/15d691b9b40dc5b4ce959becea7a3e76.png)

当浏览器缩小时，网站看起来会有所不同：

![在此处输入图像描述](../Images/6a64c9d6d8c2a2892303b95d042ff303.png)

在上图中，您将看到导航菜单，但是加号不再是可点击的。它也不膨胀。我无法理解在哪里可以将其更改为再次工作。

我将不胜感激任何帮助 。*

*** 我试图检查二级菜单是否有问题，但没有什么明显的 ***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:24:55.143

您看到的问题是由于`$(document).ready`从未被解雇，因此（基本上）`custom.js`文件中的任何代码都没有被执行。

正如已经指出的那样，这是因为`jwplayer`页面中间的实例化（第 399 行）失败了。`jwplayer`期望您传入容器元素的 ID，但`mediaplayer_vid_5`页面上不存在 ID 为的元素。

因此，您需要完全删除此脚本，或者确保您传递的 ID 实际在页面的某个位置使用。一旦你完成了两者之一，一切都很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T05:31:23.217

嗯。。我明白了。尝试删除或关闭脚本，如下所示。可以解决问题。

```
jQuery(document).ready(function(){
       jwplayer("mediaplayer_vid_5").setup({
       "autostart" : "true",
        "controlbar" : "bottom",
        "file" : "http://www.youtube.com/watch?v=pGoCeTMgLE0&feature=youtube_gdata_player",
        "flashplayer" : "http://verefly.com/wp-content/plugins/cool-video-gallery/cvg-player/player.swf", "volume" : "70","width" : "640",
                            "height" : "480",
                            "image" : "http://i.ytimg.com/vi/pGoCeTMgLE0/0.jpg",
                            "mute" : "false",
                            "stretching" : "fill",
                            "skin" : "http://verefly.com/wp-content/plugins/cool-video-gallery/cvg-player/skins/glow-skin/glow.xml"
                        });
                    }); 
```

**新更新：** 此脚本在文章“ **Vault in the Ville！** ”中，让您在您的 wordpress 管理员中检查帖子，您可能会无意中插入此 javascript 代码。如果您找到此代码，请将其删除。

请使用此网址[http://verefly.com/2012/06/06/vault-in-the-ville-2/](http://verefly.com/2012/06/06/vault-in-the-ville-2/)中的浏览器查看源代码来查看我的意思的 javascript 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:52:32.620

只需将 div 的 css 替换为 id 包装器：

```
#wrapper {
  float: left;
  width: 99.9%;
  overflow: hidden;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T04:35:30.203

为浏览器尺寸的诽谤尺寸写下包装类的媒体查询。如果可能的话，您也可以对图像执行此操作。

希望能帮助到你

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-21T22:55:18.550

看起来在我发帖时您遇到了一个新问题，您缺少源代码底部的代码。检查`</div> <!-- #main-content -->`此页面[http://verefly.com/video/](http://verefly.com/video/)（或任何其他）上的代码并将其与主页[http://verefly.com/](http://verefly.com/)进行比较（您缺少诸如 custom.js + 其他的脚本，而您没有关闭标签，如 html、body 等）

很可能您没有在与主页不同的页面上使用的布局上的主题的 PHP 代码中包含页脚。

# python - 为什么这里有“TypeError”？

> ID：15628660
> 
> 赞同：0
> 
> 时间：2013-03-26T03:07:06.953
> 
> 标签：python, time, typeerror

我正在构建一个 1 小时的快速游戏，大约完成了一半，然后发生了`TypeError: 'builtin_function_or_method' object is not subscriptable`错误。`time.sleep[x]`我不知道为什么会这样，使用函数似乎有问题。我的完整错误和代码如下。

代码：

```
import time
import random

def intro():
    print("You are playing a game...")
    time.sleep[3]
    print("of chance.")
    time.sleep[1.5]
    print("Enter [1] to continue.")
    introChoice=''
    while introChoice not in ['1']:
          introChoice=input("> ")
    if introChoice=="1":
          tutorial() 
```

错误：

```
You are playing a game...
Traceback (most recent call last):
  File "/Users/jacob/Documents/a game of chance.py", line 126, in <module>
    intro()
  File "/Users/jacob/Documents/a game of chance.py", line 9, in intro
    time.sleep[3]
TypeError: 'builtin_function_or_method' object is not subscriptable 
```

感谢您提供任何帮助，如有必要，我愿意提供更多信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T03:09:17.273

`sleep`是一个函数/方法，而不是一个可索引的对象。你这样称呼它：

```
sleep(time) 
```

不喜欢：

```
sleep[time] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T03:14:55.323

您混淆了两个非常不同的事物的 Python 语法。`[]`是索引符号；`myindexable[i]`指 中的`i`第 项`myindexable`。`()`同时，是调用函数的符号；使用参数`myfunc(n)`调用函数。`myfunc``n`

# firefox - 使用 Add-On Builder 的 Firefox 侧边栏扩展指南

> ID：15628663
> 
> 赞同：1
> 
> 时间：2013-03-26T03:07:15.270
> 
> 标签：firefox, google-chrome-extension, firefox-addon, firefox-addon-sdk, sidebar

我正在寻找有关如何创建嵌入浏览器的侧边栏应用程序的一些指导。我需要制作一个强大的侧边栏，以允许用户将网页中的文本保存和组织到侧边栏中。

我可以选择使用哪个浏览器并进行了一些研究。目前，Chrome 似乎没有侧边栏 API，但 Firefox 有 - 但是似乎有关此 Firefox 功能的文档已过时。我选择先调查这种可能性。

我是浏览器扩展编程的新手，我发现事情有点混乱。我试过遵循这些教程：

*   [https://developer.mozilla.org/en/docs/Creating_a_Firefox_sidebar](https://developer.mozilla.org/en/docs/Creating_a_Firefox_sidebar)
*   [http://blog.mozilla.org/addons/2009/01/28/how-to-develop-a-firefox-extension/](http://blog.mozilla.org/addons/2009/01/28/how-to-develop-a-firefox-extension/)

最终，我偶然发现了适用于 Firefox 的 Add-On Builder，我喜欢它提供的便利。它还具有与之相关的可靠文档。但是，我在 Firefox 侧边栏上找不到好的文档。我查看了 Panels API，但我认为它们并没有准确地给我想要的东西（我怎么能定位它们？）。如何使用这些工具创建侧边栏？有没有我可以查看的现代示例或文档？

如果这不是一个好方法，我可以为这个项目考虑其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:57:30.623

即使没有直接的 API 可用，我还是建议您查看[其他附加组件的代码](https://builder.addons.mozilla.org/search/?q=sidebar)并从中学习。我还建议你看看[Mozilla 插件论坛](https://forums.mozilla.org/addons/)，在那里你可以看到最新的开发，也可以询问有关插件开发的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T16:00:54.273

您想使用以下 API 文档：

[https://addons.mozilla.org/en-US/developers/docs/sdk/Firefox-26/modules/sdk/ui/sidebar.html](https://addons.mozilla.org/en-US/developers/docs/sdk/Firefox-26/modules/sdk/ui/sidebar.html)

这是文档中所述的简单示例侧边栏：

```
var sidebar = require("sdk/ui/sidebar").Sidebar({
  id: 'my-sidebar',
  title: 'My sidebar',
  url: require("sdk/self").data.url("sidebar.html")
}); 
```

# java - 从 coherence 服务器返回 null

> ID：15628668
> 
> 赞同：2
> 
> 时间：2013-03-26T03:08:01.990
> 
> 标签：java, caching, oracle-coherence

当我对缓存数据库进行获取时，我的缓存数据库中有一些数据，如果键包含字母和数字或数字组合，我能够获取数据，如果它是只有数字的单个键，我不是即使我能够查看列表中的数据，也能够检索数据。

```
Map (ele): list
2222222 = 
200:20:2:2:1:1:Thu Feb 02 00:00:00 2012:2:Thu Feb 02 00:00:00 2012:Thu Feb 02 00:00:00 2012

GC2 = 
200:20:2:2:1:1:Thu Feb 02 00:00:00 2012:2:Thu Feb 02 00:00:00 2012:Thu Feb 02 00:00:00 2012

Map (ele): get GC2
 200:20:2:2:1:1:Thu Feb 02 00:00:00 2012:2:Thu Feb 02 00:00:00 2012:Thu Feb 02 00:00:00 2012

Map (ele): get 2222222
null 
```

当我在 get 中只给出数字时，我得到了 null。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:28:34.610

我自己想通了，如果我们将键定义为 String 类型，并且由于一致性服务器的内部工作，它只包含数字，它返回 null。

简而言之

键定义为字符串 - 键包含字母数字 - WORKS

键定义为字符串 - 键仅包含字母 - WORKS

定义为字符串的键 - 键仅包含数字 - 不起作用

所以我所做的是，在将数据放入缓存之前，我检查了键是否只包含数字

```
if (code.matches("[0-9]+")) 
```

如果是，则将密钥存储为整数，否则将其存储为字符串。

现在我能够检索所有情况的值。

另一种解决方案 -

而不是将密钥存储为整数，即使它是存储为字符串的数字，然后在执行 get 时

得到\111

这也检索正确的值

# operating-system - 页码和偏移量

> ID：15628671
> 
> 赞同：22
> 
> 时间：2013-03-26T03:08:40.770
> 
> 标签：operating-system, page-numbering, page-size, os161

我正在学习不同类型的内存管理。我不明白在虚拟地址中有偏移位的意义。还有为什么页面大小是由力量决定的`2`？

*   我的主要困惑是：给我一个在指令中使用偏移量来访问某个虚拟地址的例子？

*   我的第二个困惑是：通常的说法是，如果逻辑地址的大小是`2^m`并且页面大小是`2^n`，那么逻辑地址的高 mn 位指定页号。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-26T06:59:47.843

我认为您的主要和次要混淆是由于对该主题的普遍混淆:)

让我谈谈这个问题，希望我能有所帮助。首先，打个比方——想象一下，你正试图在一个城市中找到一所房子。想象一下，每个房子都有一个唯一的编号——你可以想象房子的数量很快就会变得非常庞大和混乱。现在想象一下，您引入了街道的概念——门牌号现在变得更易于管理，因为您已将它们分组为好块。所以：街道=页码，门牌号=偏移地址。

拥有虚拟内存页面的全部意义在于允许计算机将内存划分为可管理的块，而不会浪费太多。将其划分为块（页面）允许对访问、分页和其他类似的好东西进行精细控制。您的页面越小，您要浪费的内存就越少（如果进程 A 需要 32k 内存，而您的页面大小为 64k，那么您最终会得到一些未使用的内存），但系统开销。

至于为什么页面大小是 2 的幂，这是地址内不浪费空间的原因。由于计算机是基于二进制的（目前），所以一切都倾向于归结为 2 的幂。想象一下，如果你有基于 10 的因子。二进制中的 10 是 1010 - 你必须使用 4 位来保存它，那么为什么不选择可以从 4 位中获得的全部值：0000 - 1111（0 到 15 = 16 个值）。

对不起，我有点胡扯了——我希望这能把你推向正确的方向！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-10-01T15:40:27.460

我喜欢 GHC 与街道和城市的类比，即我们为什么需要寻呼。此外，将内存的字节分组为页面允许 CPU 使用更大量的内存。

假设给出以下属性：

*   虚拟地址为 32 位
*   页偏移量为 12 位
*   物理地址为 30 位
*   内存为 1GiB

这是我制作的一个图表，它显示了如何使用页码和页偏移量来寻址内存中的特定单元：

[![在此处输入图像描述](../Images/3a068466f76ca3a7232e8848db02951c.png)](https://i.stack.imgur.com/v8qnk.png)

有一个由 CPU 生成的虚拟地址，由虚拟页号（20 位）和页偏移量（12 位）组成。

还有一个用于虚拟页号到物理页号映射的页面映射（另外，脏位显示页面是否已更改/驻留位显示页面是否驻留在内存中），右侧是内存如何划分为页面（图中蓝色）。

使用 20 个地址位将虚拟页号传递给页面映射。由于页码以具有 20 个地址位的二进制形式传递，这意味着页面映射最多可以有 2^20 条记录（因为使用 20 位，您可以获得 2^20 个不同的数字）这也是页码是幂的原因2.

所以使用pagemap你可以找到哪个物理页号映射到请求的虚拟页号，页偏移量没有改变。有了物理页码和页偏移量，您就有了物理地址。使用页码转到内存的特定页面，并使用偏移量转到特定字节单元。（页面偏移量也定义了页面大小，因为 12 位偏移量意味着我们可以在一个页面内处理 2^12 = 4096 个单元格（图表上的橙色））

在绿色中，您可以看到一个示例，其中我们请求页偏移量为 4095 的虚拟页号 2。根据页映射，虚拟页号 2 映射到物理页 15，这为我们提供了物理页号为 15 和偏移量为 4095 的物理地址。（通常虚拟/物理页码和页偏移量将以十六进制显示，但我使用十进制只是为了简化）

PS：

示例数据取自本讲座 - [https://www.youtube.com/watch?v=3akTtCu_F_k](https://www.youtube.com/watch?v=3akTtCu_F_k) - 它很好地概述了虚拟内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-23T17:10:43.737

我也有同样的困惑，但如果我理解正确，那么它就像下面这样：2 case 的力量稍微超出了对该主题的一般理解。这更像是一种约定，因为我们正在处理二进制值，并且需要在位之间进行适当的划分，以使其适合 2 的幂。

例如，如果一个 pGe 有 64k 个字并且每帧有 4 个字，那么 2^x=64 -> x=6

这意味着每个帧可以有一个物理地址，由 6 个二进制值组成，即 0 或 1，其中 4 表示帧号。最后表示单词在 4 中的确切位置。

请注意，这里每帧不能有 5 或任何其他值，否则所谓的约定会失败。

# web-services - 为了更新存折的通行证，我必须遵循多少个步骤

> ID：15628674
> 
> 赞同：1
> 
> 时间：2013-03-26T03:09:07.610
> 
> 标签：web-services, push-notification, mamp, passbook

我已经通过了，我可以通过 MAMP 中的 Web 服务或应用程序将其共享到设备。此外，我还创建了一个数据库“passesdb”，其中包含 3 个表，例如 Devices、Registration 和 MemberPass。我也阅读了苹果的存折文件，但我真的不明白我接下来要做什么！当我们为推送通知注册设备时，我们如何使用 POST 获取 device_id 和 pushToken ？我现在卡住了，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:04:57.867

要推送更新，您需要按照以下步骤操作：

1.  [根据该规范](https://developer.apple.com/library/ios/#documentation/PassKit/Reference/PassKit_WebService/WebService.html#//apple_ref/doc/uid/TP40011988)构建 RESTful Web 服务
2.  `webserviceURL`将and添加`authenticationToken`到您的[pass.json](https://developer.apple.com/library/ios/#documentation/UserExperience/Reference/PassKit_Bundle/Chapters/Introduction.html)
3.  用户在他们的设备上安装通行证
4.  您的网络服务，捕获`deviceLibraryIdentifier`和`pushToken`
5.  您创建更新的 .pkpass 包
6.  使用与pass.json 中匹配的 Pass Type ID 证书打开与[Apple 推送通知服务 (APNS)的连接](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)`passTypeIdentifier`
7.  打包并发送包含`pushToken`和空有效负载的 APNS 消息
8.  等待设备检索推送消息并请求`serialNumber`匹配的所有更新通行证`passTypeIdentifier`（请求也可能包含`passesUpdatedSince`标签）
9.  `serialNumber`您的 Web 服务使用更新的通行证（或自`passesUpdatedSince`标记后更新的通行证）响应来自设备的请求。
10.  等待设备响应发送新的 .pkpass 包的请求
11.  您的 Web 服务将更新的 .pkpass 包发送到设备。
12.  设备处理新通行证，并在适当时显示通知。

您已经多次询问如何在 Stack Overflow 的其他地方实现步骤 1 到 4。

我认为您仍然在努力理解注册设备的不是您的概念 - 它是注册自身的设备。

除非您构建了一个可以捕获和存储`deviceLibraryIdentifier`and的 Web 服务，`pushToken`否则您将无法继续前进。

# c++ - 在不同的头文件中使用相同的 typedef 并将它们包含在主程序中

> ID：15628676
> 
> 赞同：0
> 
> 时间：2013-03-26T03:09:29.960
> 
> 标签：c++, typedef, header-files

我`typedef`在两个不同的头文件中使用了相同的，即在我选择完全实现的“clientMsgHandling.h”和“connectivity.h”中`typedef std::list<int> listInt;`。

我选择这样做而不是在“clientMsgHandling.h”中包含“connectivity.h”，反之亦然，因此（对我而言）设计会更清晰，我的印象是这是一个设计选择，即没有权利和错误的。

“clientMsgHandling.h”和“connectivity.h”都包含在 main.cpp 中，我想`listInt`在`main()`.

我的问题是这是否会导致任何问题？两个 typedef 完全相同，这仍然是设计问题还是现在涉及编译器安全问题？我在使用它时没有编译器错误，但我想确保没有发生我不知道的不愉快的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:12:28.627

如果您对设计有疑虑，为什么不将 typedef 移动到它自己的 .h 文件中呢？只需将其包装在正确的#ifndef ... #endif 之间

这样编译器只会看到一次。

# android - 如何将旧版本的 android repo 分支合并到新版本主？

> ID：15628677
> 
> 赞同：0
> 
> 时间：2013-03-26T03:09:32.663
> 
> 标签：android, git, build, android-source, repository

我们有一个由供应商开发的 android 平台 repo 分支。可以说它是供应商分支。它基于 1.0 版。供应商分支更改从未提交到 1.0 版。

现在我们正在开发 3.0 版。但我想从供应商在供应商分支中停止的地方开始，并与 3.0 版工作区合并。

我如何使用 android repo 工具来做到这一点？

我已经用 3.0 完成了 repo init，然后是 repo sync。我正在寻找一种将供应商分支更改合并到工作区中的 3.0 版本的方法。

什么是正确的回购命令？

是否有解释 repo 不同子命令的网页？

谢谢
Videoguy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:31:18.177

repo有一个[文档页面](http://source.android.com/source/using-repo.html)。我自己从未使用过 repo，但它似乎是对一些用 python 编写的 git 命令的抽象。[上传](http://source.android.com/source/using-repo.html#upload)命令似乎很有希望。

失败了，你总是可以使用 git。您应该能够执行分支的[三向合并](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)以掌握和同步它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:35:19.390

解释不同 repo 命令的网页[在这里](http://source.android.com/source/using-repo.html)。Repo 命令只是 git 命令上的一些 Python 脚本。您可以在以下路径下的 AOSP 文件夹中找到这些脚本：`.repo/repo/subcmds`

我想在您的情况下，您必须使用`repo forall`with 命令来合并所有 git 子项目。

# clojure - 在 Clojure 中，如何从 Web 下载图像并将其保存到文件系统中？

> ID：15628682
> 
> 赞同：17
> 
> 时间：2013-03-26T03:10:02.087
> 
> 标签：clojure

如何使用 Clojure 从 Web 下载图像并将其保存到文件系统？我知道图像 url，并且我知道我不能使用`spit`和`slurp`执行此操作，因为它是二进制数据，而不是文本。

我想尽可能简单地做到这一点，理想情况下就像唾液和啜饮的工作方式一样。也就是说，没有大量使用缓冲区或字节数组的额外行。我想在完成后关闭流，但我不在乎它是否效率低下。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-10-10T13:54:57.087

何志同向我[指出](http://grokbase.com/t/gg/clojure/12afsy2cx1/simple-way-to-get-image-from-url#20121016fapmb64hnegin6cgb3lbi372a4)了[这个解决方案](http://users.utu.fi/machra/posts/2011-08-24-2-reddit-clojure.html)，它最适合我的目的：

```
 (defn copy [uri file]
  (with-open [in (io/input-stream uri)
              out (io/output-stream file)]
    (io/copy in out))) 
```

正如智通所说，你需要`(:require [clojure.java.io :as io])`在你的命名空间中使用它作为编码。或者，您可以直接参考 clojure.java.io：

```
(defn copy-uri-to-file [uri file]
  (with-open [in (clojure.java.io/input-stream uri)
              out (clojure.java.io/output-stream file)]
    (clojure.java.io/copy in out))) 
```

# c# - 使用类表单将文本框数据转换为 RichTextBox

> ID：15628687
> 
> 赞同：1
> 
> 时间：2013-03-26T03:10:37.583
> 
> 标签：c#, winforms, class, textbox, richtextbox

我必须在这里制作一个简单的程序，但我不太确定如何启动它。我已经定义了我的类文件，如下所示。我需要做的是制作一个Windows Form Application（如下图所示）。我需要将信息输入到文本框中，然后将其输出到底部的richtextbox1中。而且我没有在下面显示它，但是在 Windows 窗体中，如果我在此类文件中有方法，您如何调用它？

![在此处输入图像描述](../Images/196bc2bbcf34816fb1e6232e86684c8e.png)

```
class Telephone
{
    private string manufacturer;
    private string model;
    private bool isConnected = false;
    private string lastNumberDialed;
    private string phoneNumber;   

    public Telephone()
    {
    }

    public Telephone(string manufacturer, string model, string phoneNumber)
    {
        Manufacturer = manufacturer;
        Model = model;
        PhoneNumber = phoneNumber;
    }

    public string Manufacturer
    {
        get { return manufacturer; }
        set { manufacturer = value; }
    }

    public string Model
    {
        get { return model; }
        set { model = value; }
    }

    public string PhoneNumber
    {
        get { return phoneNumber; }
        set { phoneNumber = value; }
    }

    new public string ToString()
    {
        return "Manufacturer: " + manufacturer;
    }      
} 
```

这是设计代码：

```
public partial class TelephoneEntryForm : Form
{
    public TelephoneEntryForm()
    {
        InitializeComponent();
    }

    private void btnEnter_Click(object sender, EventArgs e)
    {
    }

    private void btnShowPhones_Click(object sender, EventArgs e)
    {
    }

    private void btnDial_Click(object sender, EventArgs e)
    {
    }

    private void btnRedial_Click(object sender, EventArgs e)
    {
    }

    private void btnHangUp_Click(object sender, EventArgs e)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:29:28.510

我真的不明白您为什么要要求某人完成此操作，因为您已经完成了整个工作……除非有人向您提供了您发布的代码。

如果您想在显示之前将文本框数据存储在单独的类中，请在您的代码隐藏中实例化它：

```
public partial class TelephoneEntryForm : Form
{
    private Telephone telephone;

    public TelephoneEntryForm()
    {
        InitializeComponent();

        telephone = new Telephone();
    } 
```

然后我可能会订阅[`KeyDown`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown.aspx)所有这些文本字段的事件，并将每个文本字段的值保存`TextBox`在您的 Telephone 实例中它们各自的属性中。然后在 中`btnShowPhones_Click`，使用 Telephone 实例中的值在 中显示`RichTextBox`。

这应该为您提供足够的信息来完成它。让我们知道您是否遇到困难，以及卡住的确切位置，以便有人可以帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:47:07.747

好吧，如果我对您的理解正确，您已经有了按钮 Enter click 事件处理程序 -`btnEnter_Click`方法... 这意味着在此方法中编写的所有代码都将在您`click`输入按钮时执行。

```
private void btnEnter_Click(object sender, EventArgs e)
{
     // Read tha values of textboxes (not necessarily but more readable)
     string manufacturer = manufacturerTextBox.Text;
     string model = modelTextBox.Text;
     string phoneNumber = phoneNumberTextBox.Text;

     // Create new phone instance, based on entered data
     var telephone = new Telephone(manufacturer, model, phoneNumber);

     // Enter this data to reachtextbox
     richtextbox1.Text += string.Format("{0}\n", telephone);

     // Clear text boxes             
     manufacturerTextBox.Text = modelTextBox.Text = phoneNumberTextBox.Text = string.empty;
 } 
```

但问题是，在这种情况下，您将丢失所有输入的数据，因为您的`ToString()`方法仅输出`Manufacturer`...您应该修改此方法以输出完整的电话信息...类似于：

```
class Telephone
{
    ...
    public override string ToString()
    {
         return string.Format("Manufacturer: {0}; Model: {1}; Phone number: {2}", Manufacturer, Model, PhoneNumber)
    }
    ...
} 
```

或将此数据保存在任何类型的文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T03:27:35.947

您是在问如何连接一个按钮来调用您的代码吗？如果是这种情况，请双击该按钮以创建事件处理程序方法。在该方法中，添加对您想要的任何代码的调用。

# visual-studio-2005 - 如何将 .net 项目部署到 PDA 卡西欧设备

> ID：15628695
> 
> 赞同：0
> 
> 时间：2013-03-26T03:11:29.483
> 
> 标签：visual-studio-2005, windows-ce, device

我的项目在 Visual Studio 2005 中，我有 PDA Casio 设备。我想在我的设备（PDA CASIO）上部署我的 dotnet 项目。我已经安装了所需的窗口嵌入式 CE 6.0。

由于我是这些平台的新手，我尝试将我的 .net 项目添加到 CE 模拟器（解决方案模拟器）的子项目中，但找不到如何添加现有项目。我们需要在 CE 模拟器上添加项目并构建它吗？ . 我不知道我是否朝着正确的方向前进。

您能否给我一个建议，如何逐步将我的项目部署到 PDA 卡西欧设备。

如果可能的话，您能否给我提供链接（教程或电子书）或任何相关资源。

伙计们，我需要你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:59:28.483

我对你的整个问题并不完全清楚，所以我会抛出一个广泛的网络来尝试得到它。

一般来说，如果您想为 Windows CE 或 Windows Mobile 创建托管 (.NET) 应用程序（这*不适*用于 Windows Phone），那么您需要在 PC 上安装以下内容

*   Visual Studio 2005（Standard 或更高版本）或 2008（Pro 或更高版本）获取智能设备编译器、模板等
*   ActiveSync 或 Windows Mobile 设备中心 (WMDC)，取决于您的 PC 操作系统
*   可能是设备 SDK。一些 SDK 随 Studio 一起安装，我发现它们对于 99% 的设备来说已经足够了。

安装这些之后，通过在项目创建向导中选择一个“智能设备”项目，在 Studio 中创建一个简单的 Hello World 解决方案。如果这些不存在，则可能是您没有正确的 Studio 版本，或者在安装 Studio 时未选择安装它们。

创建智能设备项目后，使用 ActiveSync/WMDC 将设备连接到 PC（是的，corecon 是联网设备的一个选项，但首先要让它工作）。

连接后，在 Visual Studio 中更改目标设备以指向您的设备（通常默认为模拟器）。

接下来使用 F5 进行调试 - 这将部署应用程序、CF 和任何依赖项并在调试环境中执行。默认情况下，它会将应用程序`\Program Files\[your app name]`放在设备上

# jquery - 图像调整大小和裁剪以适合父 div

> ID：15628706
> 
> 赞同：-1
> 
> 时间：2013-03-26T03:12:39.317
> 
> 标签：jquery, html, css, image, plugins

我正在寻找一个 jquery 插件来调整和裁剪图像以适合父 div。有什么建议吗？谢谢。

我错了，我的意思是裁剪（而不是缩放）图像。想象一下，我有许多不同大小的图像和一个固定大小的 div。我需要调整图像大小以适应 div 的垂直或水平尺寸，并裁剪溢出的对手尺寸以适应父 div。它是动态的，所以我需要一个插件或模板来为我做这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-02T04:55:53.837

我写了一个 Jquery 函数，你可以使用它只发送父 div 的类和你想要的函数的 img 大小，它会将子 img 调整到该大小并将其水平或垂直居中。如果 img 小于父 div，它会将父 div 缩小到子 div 的大小。（因为我用它来做这件事。）

## [演示](http://jsbin.com/EGOjoMI/16/edit?html,css,js,output)

这是html结构

```
<div class="photo-card-image-wrapper">
    <img src="img.png" />
</div> 
```

这是使函数工作所需的最少 css 这是父 div 上所需要的

```
.photo-card-image-wrapper {
    overflow: hidden;
} 
```

这是您需要调用的函数，您只需在父类的类或 id 中发送，`.photo-card-image-wrapper`或者如果它是一个 id`#photo-card-image-wrapper`

```
$(function() {
  cropAndCenterImage(".photo-card-image-wrapper", 154);
}); 
```

这是您需要的功能

```
function cropAndCenterImage(el, size) {
    //el = img wrapper
    //img = img element
    if (size === undefined || size === null) { 
      size = 154;
    }
    var $el = $(el);
    var $img = $(el + " img");
    //console.log($el);
    //console.log($img);
    $img.width("auto").height("auto");
    var imgWidth = $img.width();
    var imgHeight = $img.height();
    //console.log(imgHeight, imgWidth);

    //hopefully that returns the img to it's default height and width by making the inline style to empty quotes

    if( imgWidth > imgHeight ) {
        //Crop image
      //console.log("width greater than height");
        if ( imgHeight >= size  ) {
            //console.log("hit if");
            $img.height(size);
            imgHeight = $img.height();
            imgWidth = $img.width();
            $el.height(imgHeight).width(imgHeight);
        } else {
            //console.log("hit else");
            $el.height(imgHeight).width(imgHeight);
            $img.height(imgHeight).width(imgWidth);
        }

        //Center image horizontally
        var leftInt = (imgWidth - $el.width()) / 2;
        $img.css({ "margin-left": "-" + leftInt + "px", "margin-top": "0" });
    } else {
        //Crop image
      //console.log("height greater than width");
        if ( imgWidth >= size  ) {
            $img.width(size);
            imgHeight = $img.height();
            imgWidth = $img.width();
            $el.height(imgWidth).width(imgWidth);
        } else {
            $el.height(imgWidth).width(imgWidth);
            $img.height(imgHeight).width(imgWidth);
        }
        imgHeight = $img.height();
        //Center image vertically
        var topInt = (imgHeight - $el.height()) / 2;
        //console.log(topInt);
        $img.css({ "margin-top": "-" + topInt + "px", "margin-left": "0"});
    }

} 
```

我知道这不是典型的 Jquery 函数，我只是还没有学会这样做，但它仍然是一个函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:16:10.973

您不需要为此使用插件......只需 CSS 即可。

```
img { width:100%; } 
```

您也可以添加`height:100%;`，但这不会按比例缩放图像。

[小提琴](http://jsfiddle.net/s2CbG/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T03:35:25.423

这是你想要的吗？

```
<html>
<head>
  <style type="text/css">
  div{ margin:10px 0px; border: 1px solid black; dispaly:block;} 
 div img{width:100%;height:100%;}  
</style>
</head>
<body>
  <div style="width:100px; height:50px"><img src="https://www.google.com/images/srpr/logo4w.png"></div>
<div style="width:100px; height:250px"><img src="https://www.google.com/images/srpr/logo4w.png"></div> 
<div style="width:200px; height:60px"><img src="https://www.google.com/images/srpr/logo4w.png"></div> 
<div style="width:300px; height:220px"><img src="https://www.google.com/images/srpr/logo4w.png"></div> 
<div style="width:200px; height:150px"><img src="https://www.google.com/images/srpr/logo4w.png"></div> 
<div style="width:300px; height:20px"><img src="https://www.google.com/images/srpr/logo4w.png"></div> 
<div style="width:50px; height:400px"><img src="https://www.google.com/images/srpr/logo4w.png"></div>   
</body>
</html> 
```

# c++ - 无缝 Tilemap 渲染 C++

> ID：15628709
> 
> 赞同：0
> 
> 时间：2013-03-26T03:12:55.783
> 
> 标签：c++, opengl, 2d, shader

我正在尝试在 C++ 中创建一个无缝的 2D tilemap 渲染器。我们的目标是在玩家从每张地图到另一张地图的过程中几乎没有加载屏幕。

例如： ![每个方块都是一个区域/瓷砖地图； 红色方块是可视区域](../Images/05c3fcae887d74960e990ebdd1c04a94.png) 上图中的每个方块都是一个zone/tilemap；红色方块是可视摄像头。在此示例中，每个区域为 256x256 并存储在一个`std::vector<std::vector<int> >`- 也可以说相机的可视区域为 60x60（32x32 瓷砖）

我目前的问题是如何决定：

1.  从每个给定区域显示哪些图块。
2.  如何计算绘制所述瓷砖的偏移量。

有点相关，如果有人对创建这项技术感兴趣，我非常愿意为此付费:)

我是一名软件工程师，但图形并不是我的强项。最终目标是使用支持着色器的 OpenGL 3.2 开发一款老式 RPG。

感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:10:18.767

哇，这让我回来了.. 好吧，这就是我当年实现它的方式（使用 directdraw 7，但实际上这背后的图形引擎是无关紧要的）。此代码仅绘制相机在任何给定点可以看到的内容（这实际上是您应该绘制的唯一内容）。还要记住，当我第一次开始学习如何开发时，这段代码是旧的。它不会很漂亮：

```
// set original render location to x = 0, y = 0, width = tileWidth, height = tileHeight
// this is the top left corner of the screen
RECT renderLoc = { 0, 0, g_MapData.m_TileSize, g_MapData.m_TileSize }; 

// the first column of visible tiles is given by the x coordinate divided 
// by the tilesize and first visible row is given by the y coordinate/tileWidth
int xStartCol = g_MapData.m_xCamera / g_MapData.m_TileSize;
int yStartRow = g_MapData.m_yCamera / g_MapData.m_TileSize;

// calculate the number of tiles in the current resolution that are visible
int xVisibleTiles = (dd7.m_ScreenWidth/g_MapData.m_TileSize);
int yVisibleTiles = (dd7.m_ScreenHeight/g_MapData.m_TileSize);

// if the tilesize is not divisible by the screensize then the 
// number of visible tiles will not calculate correctly. It will 
// be a float and since this is truncated, it will contain a row or 
// column less than what it requires. This code compensates for that
// by just adding one more row to round up instead of down.
if (dd7.m_ScreenWidth%g_MapData.m_TileSize) { xVisibleTiles++; }

if (dd7.m_ScreenHeight%g_MapData.m_TileSize) { yVisibleTiles++; }

// now just add the size in tiles of the visible screen to get the end
int xEndCol = xStartCol + xVisibleTiles;
int yEndRow = yStartRow + yVisibleTiles;

// Visible tiles referring to the tiles that can be displayed across and 
//down on the screen (this depends on the resolution set)

// now check if the camera coordinates are divisible by the tile size
int x, y, l; // variables for loops and checks

x = g_MapData.m_xCamera % g_MapData.m_TileSize;
y = g_MapData.m_yCamera % g_MapData.m_TileSize;

if (!x)
{
    // remove a column to draw since it divided perfectly. We originally    
    //added one to the visible rows and columns
xEndCol--;
}
else 
{
// need to move renderLoc RECT. Since there could be half a column    
//exposed which forces us to draw that portion. we only want to draw what 
//is currently on the viewable screen to save memory.
renderLoc.left -= x;
renderLoc.right -= x;
}

// now do the same for rows
if (!y)
{
yEndRow--;
else 
{
renderLoc.top -= y;
renderLoc.bottom -= y;
}

// now check to make sure we're not exceeding map size
if (xEndCol > g_MapData.m_xMaxTiles) { xEndCol = g_MapData.m_xMaxTiles; }
if (yEndRow > g_MapData.m_yMaxTiles) { yEndRow = g_MapData.m_yMaxTiles; }

// Now Draw!
// for each layer 
for ( l = 0; l < g_MapData.m_Layers; l++) {
// draw the rows
for ( x = xStartCol; x <= xEndCol; x++) {
    // column by column
    for ( y = yStartRow; y <= yEndRow; y++) {               
    tileToRender = g_MapData.m_Tiles[x][y][l]; 
// Finish your drawing.. 
```

# bash - 如何使用 ssh 在两个集群之间的 qsub 脚本中运行本地脚本？

> ID：15628715
> 
> 赞同：0
> 
> 时间：2013-03-26T03:13:27.057
> 
> 标签：bash, ssh, cluster-computing, qsub

我正在为 2 个集群上的操作编写脚本。

我的目标是只关注一个集群，这意味着每个脚本源代码都只在一个集群上。

例如，在集群 AI 中安装了所有脚本，现在我想通过 ssh 连接到集群 B 以运行这些脚本，而无需在集群 B 上再次安装它们。

我知道使用 bash 脚本，`ssh root@ClusterB 'bash -s' < local_ClusterA_script.sh`然后 Cluster B 从 ClusterA 运行 local_ClusterA_script.sh。

现在还有一个挑战，我必须使用 ssh 从集群 A 提交集群 B 上的批处理作业，这个批处理作业需要来自集群 A 的脚本。

```
# run.sh :

#!/bin/bash

INPUT_ARGS="$@"
qsub -v argv="$INPUT_ARGS" -l arch=x86_64 -l walltime=10:00:00 -l vmem=8GB -l nodes=1:ppn=6 $CLUSTERA_BIN/run.script

# run.script
runprogram()
{
  #Input
  INPUT_ARGS=`echo $argv`
  $CLUSTERA_BIN/runprogram.py "$INPUT_ARGS" ;
} 
```

所以我的问题是集群 B 在哪里找到`$CLUSTERA_BIN/runprogram.py`？如何使 run.script 中的代码在集群 B 上成功运行？

我认为它会是一个命令 `ssh root@ClusterB 'bash -s' < run.sh $MYARGS`，但显然它不会像这样工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T04:53:33.910

集群 B 必须访问它需要的那些文件。所以你有一些选择：

1.  改变主意，将（意味着`scp`, `rsync`, ...）文件复制到集群 B。您还可以考虑使用版本控制系统（如`svn`, `git`, ...）在多个主机之间同步文件。
2.  当集群 B 需要一个文件时，动态从集群 A 获取它（例如使用无密码`scp`）。
3.  将您的文件放在集群 A 的一个目录下，并将该目录共享（意味着`NFS`, `SMB`, ...）到集群 B。
4.  ……

# git - 致命：错误的默认修订版“头”

> ID：15628720
> 
> 赞同：77
> 
> 时间：2013-03-26T03:14:04.570
> 
> 标签：git

我使用 GIT 作为我的源代码控制系统。我们将它安装在我们的一台 Linux 机器上。Tortoise GIT 是我的 windows 客户端。

今天早上我检查了一些更改，并标记了代码。然后我将本地存储库推送到远程存储库。

当我在 unix 框上进入我的存储库并输入时，`git log`我得到：

```
fatal: bad default revision 'HEAD' 
```

但是当我`show log`使用我的 Windows`tortoiseGit`客户端时，历史会很好地显示如下......

```
---
SHA-1: f879573ba3d8e62089b8c673257c928779f71692

Initial drop of code

---
master origin/master oms-phase4-v1.0.0
SHA-1: 56176dbe45e6175b18c9f44533828806c63142ab

OMS Phase 4 - Added OMS Cust. Order No. to EDI Purchase Order Header screens

Tag Info

object 56176dbe45e6175b18c9f44533828806c63142ab
type commit
tag oms-phase4-v1.0.0
tagger Richard Riviere <richard.riviere@myer.com.au> 1364338495 +1100

---
SHA-1: 0000000000000000000000000000000000000000

Working dir changes
0 files changed

--- 
```

代码肯定已经推送到远程存储库。我已经能够通过将存储库克隆到不同的目录来进行检查。

有谁知道我为什么收到`fatal: bad default revision 'HEAD'`？

ps 这是一个裸存储库，但是我创建了其他没有这个问题的裸存储库。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-11-25T03:17:42.907

只需进行初始提交，错误就会消失：

```
git commit -m "initial commit" 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-08-07T09:50:22.867

当我正在工作的分支从存储库中删除时，我会发生这种情况，但我所在的工作区没有更新。（我们有一个工具可以让您使用 simlink 从同一个存储库创建多个 git“工作区”。）

如果`git branch`没有将任何分支标记为当前分支，请尝试执行

```
git reset --hard <<some branch>> 
```

我尝试了多种方法，直到我解决了这个问题。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-03-26T03:56:20.613

还没承诺？

如果它没有提交，则它是一个孤立分支。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-03-26T03:47:41.083

您的回购是您的，在您推送或（允许）获取或克隆之前，其中发生的事情完全是您的业务。当您删除 Windows 存储库时——该文件夹并不代表您的本地存储库，它是您的实际本地存储库，您删除了其中从未推送、获取或克隆的所有内容。

***编辑：*** 啊，好吧，我想我明白这里发生了什么：你推送到你的 linux 存储库，但它不是裸露的，你从未在其中工作过。

而不是`git log`，做`git log --all`。或`git checkout`*`some-branch-name`。*

然后尝试在你的 linux 机器上本地克隆 repo；我敢打赌它有效。你用什么在 linux 上为你的 repo 提供服务？尝试 cd'ing 进入它的 .git 目录`git daemon --base-path=. --export-all`，如果它只是坐在那里然后去你的 windows 框并尝试`git clone git://your.linux.box.ip`，如果守护进程抱怨它不能绑定添加`--port=54345`到守护进程调用和`:54345`克隆 url。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-09-03T08:22:04.557

注意：Git 2.6（Q3/Q4 2015）*最终*将提供更有意义的错误消息。

请参阅[Jeff King (](https://github.com/peff) [)的](https://github.com/peff)[提交 ce11360](https://github.com/git/git/commit/ce113604672fed9b429b1c162b1005794fff6a17)（2015 年 8 月 29 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([commit 699a0f3](https://github.com/git/git/commit/699a0f3748474fce7b688212c3f9ab25d7b750f5))^(中，2015 年 9 月 2 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> # `log``HEAD`:更清楚地诊断空
> 
> 如果您初始化或克隆一个空存储库，运行“”的初始消息`git log`不是很友好：

```
$ git init
Initialized empty Git repository in /home/peff/foo/.git/
$ git log
fatal: bad default revision 'HEAD' 
```

> 让我们检测这种情况并写一个更友好的消息：

```
$ git log
fatal: your current branch 'master' does not have any commits yet 
```

> 我们还检测到“HEAD”指向损坏的 ref 的情况；这应该更不常见，但很容易看到。
> 请注意，我们不会诊断所有可能的病例。我们依赖`resolve_ref`，这意味着我们不会获得有关复杂案例的信息。例如，“ `--default master`”将用于`dwim_ref`查找“ `refs/heads/master`”，但我们只注意到“ `master`”不存在。
> 同样，像“ `--default HEAD^2`”这样的复杂 sha1 表达式也不会解析为 ref。
> 
> 但这没关系。在这些情况下，我们会退回到通用错误消息，并且无论如何都不太可能使用它们。
> 捕获一个空的或损坏的“HEAD”会改善常见情况，而其他情况不会回归。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-07-15T20:01:17.040

确保分支“master”存在！这显然不仅仅是一个名字。

在创建一个空白的裸仓库，将一个名为“dev”的分支推送到它，并尝试在裸仓库中使用 git log 后，我得到了这个错误。有趣的是，git branch 知道 dev 是唯一存在的分支（所以我认为这是一个 git bug）。

解决方案：我重复了这个过程，这次在工作仓库中将“dev”重命名为“master”，然后再推送到裸仓库。成功！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-11-20T18:01:00.957

`.git/HEAD`当引用不存在的分支时，这似乎会发生。我在一个没有任何内容的仓库中遇到了这个错误`.git/refs/heads`。我不知道回购是如何进入那种状态的，我是从离开公司的人那里继承下来的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-08T02:22:43.230

我不认为这是 OP 的问题，但如果你像我一样，你在尝试使用 git 管道命令 ( `update-index`& `cat-file`)时遇到了这个错误，而***实际上并没有真正提交任何东西***。所以尝试提交一些东西（`git commit -am 'First commit'`），你的问题应该得到解决。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-01-23T02:15:10.723

我遇到了同样的错误，无法解决。

然后我注意到我的一个目录中有 3 个额外的文件。

这些文件被命名为：

```
config, HEAD, description 
```

我删除了文件，并没有出现错误。

`config`包含：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = true 
```

`HEAD`包含：

```
ref: refs/heads/master 
```

`description`包含：

```
Unnamed repository; edit this file 'description' to name the repository. 
```

# python - scrapy 错过了 xpath 包含 cp1251 的 xpath

> ID：15628722
> 
> 赞同：0
> 
> 时间：2013-03-26T03:14:11.737
> 
> 标签：python, python-2.7, xpath, scrapy, cp1251

价值观回应：

```
{
 'articul': [u'testetete'],
 'diametr': ['Empty'],
 'image': [u'/foto/11.20.jpg'],
 'name': [u'Трололололо'],
 'url': ['http://test.ru/goods/detali.html?product_id=20']
} 
```

其他领域在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T05:13:36.317

这是因为`add_xpath`方法只获取 XPath 作为参数。如果您需要添加另一个（例如“Масса”或“Состав”）来为蜘蛛从 xpath 获取的值，您可以将其添加到[pipelines.py](http://doc.scrapy.org/en/latest/topics/item-pipeline.html)或您的另一个模块，该模块从 Spider 获取结果。

# c# - 典型的arraysegment 溪流？

> ID：15628723
> 
> 赞同：1
> 
> 时间：2013-03-26T03:14:13.267
> 
> 标签：c#, stream, websocket

我在谷歌上搜索这个东西已经有一段时间了，但还没有找到一个在

```
while(true)
        {
            WebSocketReceiveResult result = await Conn.ReceiveAsync(readBuffer, token); 
```

任何人都可以展示样品吗？

# php - 在 PHP Foreach 循环中获取所有数组键的特定属性

> ID：15628725
> 
> 赞同：0
> 
> 时间：2013-03-26T03:14:18.017
> 
> 标签：php, multidimensional-array, foreach, simplexml

我正在使用从 XML 文件转换的多维 PHP 数组，并且正在努力从所有键名中获取特定属性（我不知道所有键的名称，但它们都具有相同的属性。 )

"$player_stats" 中的每个 Key 在数组中的结构如下：

```
[RandomKeyName] => SimpleXMLElement Object
    (
        [@attributes] => Array
            (
                [assists] => 0.10
                [rebounds] => 8
                [operator] => >
                [overall] => 1.45
            )

    ) 
```

我正在尝试实现以下目标。使用 $key => $value 时，我无法从键中获取属性吗？

```
foreach ($player_stats as $key => $value) {

    $rebounds = $key->rebounds;
    $assists = $key->assists;

    echo "$key has $rebounds Rebounds and $assists Assists. <br>";
} 
```

$key 在此示例中有效，但我尝试抓取的属性无效。在不知道键名的情况下获取所有键的特定属性的任何提示或指针都会很棒，谢谢！

编辑：

我试图获取以下关键对象的 XML 部分：

```
<Player_Stats>
  <RandomKeyName1 assists="0.04" rebounds="9" operator="&gt;" overall="0.78" />
  <RandomKeyName2 assists="0.04" rebounds="4" operator="&gt;" overall="2.07" />
  <RandomKeyName3 assists="0.04" rebounds="1" operator="&gt;" overall="3.76" />
  <RandomKeyName4 assists="0.04" rebounds="10" operator="&gt;" overall="0.06" />
</Player_Stats> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:43:31.807

如果我理解正确的话，$value 是一个 SimpleXMLElement 对象。您可以使用[SimpleXMLElement::attributes](http://www.php.net/manual/en/simplexmlelement.attributes.php)获取属性，您可以使用另一个 foreach 对其进行迭代。

看起来像这样（尽管我自己没有测试过）。

```
foreach ($player_stats as $xmlKey => $xmlElement) {

    foreach ($xmlElement->attributes() as $attrKey => $value) {

        if ($attrKey === 'rebounds')
            $rebounds = $value;

        if ($attrKey === 'assists')
            $assists = $value;

    }
    echo "$xmlKey has $rebounds Rebounds and $assists Assists. <br>";
} 
```

# css - 如何将页脚的文本放在中心，将菜单的链接放在中心并彼此相邻？

> ID：15628727
> 
> 赞同：0
> 
> 时间：2013-03-26T03:14:21.930
> 
> 标签：css

我是预期的结果，代码如下。我目前的风格有效，但问题是页脚太宽，并且 menu1.menu2,menu3 不像图示的那样爆炸，

**预期结果**

```
 50%            |LeftHeader                middleHeader                 RightHeade|    50% 
 50%            |                        Menu1 Menu2 Menu3                        |    50%

 50%            |Content goes here ***********************************************|    50%
                |*****************************************************************|

 50%            |                     text of Footer goes here                    |    50% 
```

这些行>> | 显示边框部分，例如页脚很大，但它的文本应该在中心。

我的代码如下

```
<html>
<head>
<style>
#wrapper {
    margin: 0 auto;
    width:50%;
}
#header {
    background-color:#faa;
    height:50px;
    font-size: 0;
}
#header > div {
    display: inline-block;
    width: 33.3333%;
    font-size: 12pt;
    height: 100%;
}
#left {
    background-color:red;
    height:20px;
}
#middle {
    background-color:yellow;
    height:20px;
}
#right {
    background-color:green;
    height:20px;
}
#menu {
    width: 100%;
    margin: 0 auto;
    background-color:#faa;
    height: 20px;
    font-size: 0;
}
#menu > a {
    display: inline-block;
    font-size: 12pt;
    width: 33.333%
}
#leftm {
    text-align: right;
}
#content {
    top:50px;
    bottom:150px;
    overflow:auto;
}
#footer {
    bottom: 0;
    width: 100%;
    background-color:#afa;
    height:150px;
    position:fixed;
}
#footer > div {
    margin-left: 50%;
}
</style>
</head>
<body>
<div id="wrapper">
    <div id="header">
        <div id="left">
          left header
        </div>
        <div id="middle">
          middle
        </div>
        <div id="right">
          right header
        </div>
    </div>
    <div id="menu">
     <div id="leftm"><a href="#">menu1</a></div>
     <a href="#">menu2</a>
     <a href="#">menu3</a>
  </div>
    <div id="content">
vbcfxbfgbfcgbfg
    </div>
    <div id="footer">
      <div id="footertext">
        And here's the footer
    </div>
    </div>
</div>
</body> 
```

我当前代码的结果

```
 50%            |LeftHeader                middleHeader                 RightHeade|    50% 
 50%            |Menu1                         Menu2                       Menu3  |    50%

 50%            |Content goes here ***********************************************|    50%
                |*****************************************************************|

 50%            |                     text of Footer goes here                           |    50% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:24:11.323

[在此处](http://jsfiddle.net/8gmdk/1/)查看更新的代码。

我已经将菜单链接包装在另一个 div 中：`display: inline-block`设置`text-align`为. 这使三个链接居中。`#menu``center`

页脚中的文本也通过 居中`text-align: center`。

首先，提出同样问题的新问题是不好的做法。其次，避免公布“我的代码”，除非您编写了大部分代码（这里不是这种情况）。第三，这个问题没有显示出太多的研究工作，因为可以很容易地搜索到页脚文本对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:21:24.373

一些东西：

*   您可以调整页脚的大小并仍然使用`position:fixed`at ，`50%`因为这就是包装器的用途。
*   你有一些不必要的标签（如果我明白你想要什么）
*   当您似乎不希望这样做时，您将菜单项的大小调整了 33%。

[jsFiddle](http://jsfiddle.net/GwJvF/1/)

**HTML**

```
<div id="wrapper">
    <div id="header">
        <div id="left">left header</div>
        <div id="middle">middle</div>
        <div id="right">right header</div>
    </div>
    <div id="menu">
        <a href="#">menu1</a>
        <a href="#">menu2</a>
        <a href="#">menu3</a>
    </div>
    <div id="content">vbcfxbfgbfcgbfg</div>
    <div id="footer">
        And here's the footer
    </div>
</div> 
```

**CSS**

```
#wrapper {
    margin: 0 auto;
    width:50%;
}
#header {
    background-color:#faa;
    height:50px;
    font-size: 0;
}
#header > div {
    display: inline-block;
    width: 33.3333%;
    font-size: 12pt;
    height: 100%;
}
#left {
    background-color:red;
    height:20px;
}
#middle {
    background-color:yellow;
    height:20px;
}
#right {
    background-color:green;
    height:20px;
}
#menu {
    width: 100%;
    margin: 0 auto;
    background-color:#faa;
    height: 20px;
    font-size: 0;
    text-align:center;
}
#menu > a {
    display: inline-block;
    font-size: 12pt;
    margin:0 .5em;
}
#content {
    top:50px;
    bottom:150px;
    overflow:auto;
}
#footer {
    bottom: 0;
    width: 50%;
    background-color:#afa;
    height:150px;
    position:fixed;
    text-align:center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T03:59:30.560

我对目标感到困惑。是否需要修复页脚？如果是，请参见示例 2。包装器是否需要高度为 100%？

示例 1： [小提琴](http://jsfiddle.net/Bushwazi/HSvW4/)

示例 2：要将页脚固定到窗口底部，请将其添加到页脚：

```
width:50%;
position:fixed;
bottom:0;
left:50%;
margin-left:-25%; 
```

# jquery - 如何从 TwitPic API 获取 xml

> ID：15628728
> 
> 赞同：0
> 
> 时间：2013-03-26T03:14:24.647
> 
> 标签：jquery, twitpic

嗨，我是 Twitpic API 的新手。我想调用 TwitPic API

[http://api.twitpic.com/2/tags/show.xml?tag=](http://api.twitpic.com/2/tags/show.xml?tag=) " + searchq + "&page=1"

我想使用 AJAX 来实现，我当前的代码如下：

```
<script type="text/javascript">
    var searchq = 'first';
    $(document).ready(function () {
        $("#btnGetData").click(function () {
                $.ajax({
                type: "GET",
                /* define url of xml file to parse */
                url: "http://api.twitpic.com/2/tags/show.xml?tag=" + searchq + "&page=1",
                /* assign it a data type */
                dataType: "xml",
                /* state name of function to run if file is successfully parsed */
                success: parseXml
            });
        });
    });
    function parseXml(xml)
    /* this is where the xml file is parsed and converted into a HTML output */
    {

        //for each item node in the xml file
        $(xml).find("image").each(function () {
            //print the following html, inserting the relevant data within the nodes of item
            //this is the heading
            $("#tweets").append($(this).attr("id") + "<br />");
            $("#tweets").append($(this).attr("short_id") + "<br />");
            $("#tweets").append($(this).attr("type") + "<br />");
            $("#tweets").append($(this).attr("timestamp") + "<br />");

        });
        //end for each 
        //end function
    }

</script> 
```

我的 HTML 如下所示：

```
<body>
<input id="btnGetData" type="button" value="Twitter Get Tweets" />
<div id="tweets">
</div> 
```

我没有收到任何错误，但没有调用此 API。我想解析从此 API 返回的 XML。如果您可以为我提供解析 Twitpic API XML 的演示代码，那将是非常有帮助的。

提前致谢; 阿布舍克·A·夏尔马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:02:52.003

我对 twit pic 也不太了解，但是下面的链接可以帮助你很多：

1) [http://twitpic.com/photos/jQuery](http://twitpic.com/photos/jQuery)

2) [http://pastebin.com/RubQg0Nu](http://pastebin.com/RubQg0Nu)

3) [http://blog.0100.tv/2009/05/using-twitter-and-twitpic-the-apis/](http://blog.0100.tv/2009/05/using-twitter-and-twitpic-the-apis/)

4) [http://dev.twitpic.com/docs/2/tags_show/](http://dev.twitpic.com/docs/2/tags_show/)

5) [http://dev.twitpic.com/docs/2/tags_create/](http://dev.twitpic.com/docs/2/tags_create/)

6) [http://dev.twitpic.com/docs/2/faces_show/](http://dev.twitpic.com/docs/2/faces_show/)

# r - R scatterplot3d：缩放线宽（lwd）

> ID：15628729
> 
> 赞同：2
> 
> 时间：2013-03-26T03:14:29.377
> 
> 标签：r, scatter-plot

我正在尝试在三个维度上建立一个虚拟森林站。对于每棵树，我都有 x、y 坐标和高度（z 坐标），我已经使用 scatterplot3d 成功地绘制了森林林分。

我现在想根据每棵树的直径测量值绘制每棵“树”的宽度。

我使用了 lwd 函数来引用直径测量值（见下文）。这确实绘制了不同直径的线，但它们并不指树的实际直径。（一些大树被绘制为“瘦”，一些狭窄的树被绘制为“大”）。这似乎是一个排序问题。

预先感谢您的建议

```
Xc=Tree_Survey5$Xa
Yc=Tree_Survey5$Ya
Zc=Tree_Survey5$TreeHeight
color=Tree_Survey5$color
DBH= Tree_Survey5$DBH / 10

s3d <-  scatterplot3d(x=Xc, y=Yc, z=Zc, type="h", lwd=DBH, pch = " ", color=color, angle = 75, zlab = "Height (m)", xlab = "", ylab = "",main=Title) 
```

# jquery - Kendo Tabstrip 防止打开重复的标签

> ID：15628731
> 
> 赞同：0
> 
> 时间：2013-03-26T03:15:23.523
> 
> 标签：jquery, html, jsp, kendo-ui

我有一个从 URLContent 加载页面的选项卡。

我想完成以下工作：

*   如果具有目标 URL 的选项卡已打开，请选择现有选项卡，而不是附加新选项卡。
*   如果它是一个新选项卡，请动态附加该选项卡并加载它。

从文档来看，似乎没有默认的处理方式。

[http://docs.kendoui.c​​om/api/web/tabstrip](http://docs.kendoui.com/api/web/tabstrip)

另外，我想知道是否有任何方法可以动态检索给定选项卡索引的选项卡的 ID/名称。

这是我初始化 Tabstrip 的方式：

```
<div class="mainContentTabStrip" style="width:100%;height:100%">
    <kendo:tabStrip name="mainVerticalTabStrip">
        <kendo:tabStrip-animation>
            <kendo:tabStrip-animation-open effects="fadeIn" />
        </kendo:tabStrip-animation>
    </kendo:tabStrip>       
</div> 
```

然后附加一个新选项卡：

```
function mainContentTreeView_onSelect(e) 
{
    var dataItem = $("#mainVerticalMenu").data("kendoTreeView").dataItem(e.node);

    var selectedNodeText = dataItem.text;
    var selectedNodeValue = dataItem.id;

    var mainVerticalTabStrip = $("#mainVerticalTabStrip").data("kendoTabStrip");
    mainVerticalTabStrip.append({
        text: selectedNodeText + 
            "  <img src='image/image/button_cancel.png' " + 
            "id='" + this.text(e.node) + "' " + 
            "name='" + this.text(e.node) + "' " + 
            "onclick='javascript:mainContentTreeView_delete()' " + 
            "onmouseover=" + this.text(e.node) + ".src='image/image/button_cancel_over.png' " +
            "onmouseout=" + this.text(e.node) + ".src='image/image/button_cancel.png' " +
            ">",
        encoded: false,
        contentUrl: "screen/" + selectedNodeValue,
        selected: true
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:35:15.270

您需要一些编程......没有开箱即用的功能。

我建议保留一个关联数组，其中键保存`id`tabstrips （或者`url`如果你喜欢的话），并将打开它的 tabstrip 的索引作为值`url`。

当`onSelect`在树中触发时，您检查我们是否已经创建了该选项卡，如果是，我们只需选择它。如果它没有被创建，我们将一个新元素添加到关联数组中，并将`append`一个新项目添加到标签条中。

在下面的实现中，我选择了保存为`data`与代表 TabStrip 的 HTML 元素相关联。

```
function mainContentTreeView_onSelect(e) {
    var mainTreeView = $("#mainVerticalMenu").data("kendoTreeView");
    var mainVerticalTabStrip = $("#mainVerticalTabStrip").data("kendoTabStrip");

    var dataItem = mainTreeView.dataItem(e.node);
    var selectedNodeText = dataItem.text;
    var selectedNodeValue = dataItem.id;

    var data = mainVerticalTabStrip.element.data("my-data") || [];
    if (!data[selectedNodeText]) {
        mainVerticalTabStrip.append({
            text: selectedNodeText +
                    "  <img src='image/image/button_cancel.png' " +
                    "id='" + this.text(e.node) + "' " +
                    "name='" + this.text(e.node) + "' " +
                    "onclick='javascript:mainContentTreeView_delete()' " +
                    "onmouseover=" + this.text(e.node) + ".src='image/image/button_cancel_over.png' " +
                    "onmouseout=" + this.text(e.node) + ".src='image/image/button_cancel.png' " +
                    ">",
            encoded: false,
            contentUrl: "screen/" + selectedNodeValue
        });
        data[selectedNodeText] = Object.keys(data).length + 1;
        mainVerticalTabStrip.element.data("my-data", data);
    }
    mainVerticalTabStrip.select(data[selectedNodeText] - 1);
} 
```

在此处运行示例：http: [//jsfiddle.net/OnaBai/czPFs/](http://jsfiddle.net/OnaBai/czPFs/)

**编辑**：由于IE8`Object.index`似乎[不支持](http://kangax.github.com/es5-compat-table/#Object.keys)，这里有一个不同的实现不使用它：

```
function mainContentTreeView_onSelect(e) {
    var mainTreeView = $("#mainVerticalMenu").data("kendoTreeView");
    var mainVerticalTabStrip = $("#mainVerticalTabStrip").data("kendoTabStrip");

    var dataItem = mainTreeView.dataItem(e.node);
    var selectedNodeText = dataItem.text;
    var selectedNodeValue = dataItem.id;

    var data = mainVerticalTabStrip.element.data("my-data") || { items: 0 };
    if (!data[selectedNodeText]) {
        mainVerticalTabStrip.append({
            text: selectedNodeText +
                    "  <img src='image/image/button_cancel.png' " +
                    "id='" + this.text(e.node) + "' " +
                    "name='" + this.text(e.node) + "' " +
                    "onclick='javascript:mainContentTreeView_delete()' " +
                    "onmouseover=" + this.text(e.node) + ".src='image/image/button_cancel_over.png' " +
                    "onmouseout=" + this.text(e.node) + ".src='image/image/button_cancel.png' " +
                    ">",
            encoded: false,
            contentUrl: "screen/" + selectedNodeValue
        });
        data[selectedNodeText] = ++data.items;
        mainVerticalTabStrip.element.data("my-data", data);
    }
    mainVerticalTabStrip.select(data[selectedNodeText] - 1);
} 
```

# java - Jar 到 Exe - 找不到主类

> ID：15628733
> 
> 赞同：1
> 
> 时间：2013-03-26T03:15:27.590
> 
> 标签：java, jar, compilation, exe

我用Java做了一个小游戏。它有大约 5 个不同的类，主类位于 Game.java 中在我的电脑上，然后我将其转换为 exe 文件并将其发送给其他人。当我的朋友尝试运行 exe 文件时，它给了他一个错误说：

> 找不到主类游戏。现在退出。

exe 和 jar 文件在我的计算机上可以正常工作，但不能在其他计算机上正常工作。我们都运行 Windows 7。出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:50:12.180

我认为您需要将应用程序中使用的每个库都放在 lib 文件夹中的 EXE 文件旁边。有趣的是，当 lib 文件丢失时，显示的错误是关于主类的，事实并非如此；）无论如何，我遇到了同样的问题，并通过在我的 exe 文件旁边包含 lib 文件夹来解决它。这是由 net-beans 在 dist 文件夹中生成的 readme.txt 的一部分，可能对您有帮助：

> # ======================== 构建输出描述
> 
> 当您构建具有主类的 Java 应用程序项目时，IDE 会自动将项目类路径上的所有 JAR 文件复制到项目的 dist/lib 文件夹中。IDE 还将每个 JAR 文件添加到应用程序 JAR 文件清单文件 (MANIFEST.MF) 中的 Class-Path 元素。

# backbone.js - 在元素附加到 DOM 之前排版 MathJax

> ID：15628734
> 
> 赞同：0
> 
> 时间：2013-03-26T03:15:29.127
> 
> 标签：backbone.js, mathjax, mathml

由于我使用 BackboneJs 框架来呈现 html 视图。MathJax 需要以某种方式使用包含 MathML 代码的 html 元素来排版，以便在附加到 DOM 之前获取 HTML-CSS 代码。

我曾尝试在元素附加到 DOM 之前进行排版，但效果不佳。即使是 MathJax 正在处理未附加的 html 元素，元素内部的 mathml 出现在 DOM 中后也无法渲染。

将目标元素附加到 DOM 后，我是否必须为 MathML 进行排版？或者在附加到 DOM 之前有什么变通方法可以进行排版？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:52:57.283

元素必须附加到 DOM。MathJax 需要能够测量各种子表达式（因此它可以布置诸如分数之类的东西），为了做到这一点，数学的容器元素必须在活动的 DOM 中。（未附加到 DOM 的元素没有`offsetWidth`计算之类的东西，因此 MathJax 无法判断它们有多大。）

如果要在元素显示之前对其进行数学排版，可以将其附加到 DOM 并设置`visibility:none`and `position:absolute`，然后调用 MathJax 对元素进行排版，然后删除可见性和位置设置。不要使用`display:none`，因为这也会阻止 MathJax 测量元素。

请参阅我在 2013 年 1 月的联合数学会议上就此发表的演讲中的[示例。](http://www.math.union.edu/~dpvc/talks/2013-01-12.jmm/examples.html)

# php - 检查一组 URL 是否存在以及哪个是最新的

> ID：15628738
> 
> 赞同：1
> 
> 时间：2013-03-26T03:15:39.293
> 
> 标签：php, if-statement

我得到一个足球页面，每周的末尾都有一个数字。/1/ = 第 1 周，/2/ = 第 2 周，依此类推。本赛季有 36 周。第 4 周刚刚结束，因此第 5 周及以后的 URL 不存在。第 5 周的网址将在下周有效，但现在，它给了我 404 错误。

我使用以下代码检查周（页面 URL）是否存在。

```
$url = 'http://fantasy.mlssoccer.com/entry/13191/event-history/4/';
$html = @file_get_html($url);

if($html==FALSE)
{
    echo 'error';
    //and do nothing
}
else
{
    echo 'success';
    //and do some stuff here
} 
```

我正在寻找一个简单的数字，其中最新的一周。在这种情况下，它应该是 4，但下周应该是 5。

最好或最快的方法是什么？如果可能的话，我不希望我的页面花费很长时间来检查这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:30:37.043

假设 URL 结构不变，这样的事情应该会起作用。

```
$base = "http://fantasy.mlssoccer.com/entry/13191/event-history/";
for($n = 1; $n <= 36; ++$n) {
    if( file_get_html($base. (string) $n) == false ) {
        // if file_get_html returns false, then the most recent week is n - 1 (the week before)
        $most_recent_week = (int) $n - 1;
        break; 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:32:38.113

也许使用以下内容会更合适。

```
$weekNumber = date("W") - offset; 
```

其中 offset 用于从日历年的开始抵消季节的开始。

这会将您的 URL 行修改为：

```
$url = 'http://fantasy.mlssoccer.com/entry/13191/event-history/' . $weekNumber . '/' 
```

# c++ - C++ OpenCV 消除较小的轮廓

> ID：15628739
> 
> 赞同：0
> 
> 时间：2013-03-26T03:15:43.023
> 
> 标签：c++, opencv

我正在开发一个 OpenCV 项目。

我目前正在检测特定 ROI（感兴趣区域）的轮廓。我想要实现的是消除所有较小的轮廓，换句话说，我根本不希望这些较小的轮廓被淹没。

到目前为止，如果我编写了这个算法来完成这项工作：

代码：

```
vector<vector<Point> > contours;
    vector<Vec4i> hierarchy;
    findContours(mBlur, contours, hierarchy, CV_RETR_EXTERNAL,  CV_CHAIN_APPROX_SIMPLE, Point(0, 0) );
    //----------------------------------------------------------------------------->
    //Contours Vectors
    vector<vector<Point> > contours_poly(contours.size());
    vector<Rect> boundRect (contours.size());
    vector<Point2f> ContArea(contours.size());
    Mat drawing = Mat::zeros( range_out.size(), CV_8UC3 );
    //----------------------------------------------------------------------------->
    //Detecting Contours
    for( int i = 0; i < contours.size(); i++ )
     {  

        ContArea.clear();
        ContArea.push_back(Point2f(boundRect[i].x, boundRect[i].y));
        ContArea.push_back(Point2f(boundRect[i].x + boundRect[i].width, boundRect[i].y));
        ContArea.push_back(Point2f(boundRect[i].x + boundRect[i].width, boundRect[i].y + boundRect[i].height));
        ContArea.push_back(Point2f(boundRect[i].x, boundRect[i].y + boundRect[i].height));

        double area = contourArea(ContArea);

        if(area > 2000)
        {
           approxPolyDP( Mat(contours[i]), contours_poly[i], 3, true );
           boundRect[i] = boundingRect( Mat(contours_poly[i]));

           cout<<"The area of Contour: "<<i<< " is: " <<area<<endl;

        }
     }

    /// Draw polygonal contour + bonding rects

   //////////////////////////////////////////////////////////////////////////////////

    for( int i = 0; i< contours.size(); i++ )
    {

        Scalar color = Scalar(255,255,255);
        drawContours( drawing, contours_poly, i, color, 1, 8, vector<Vec4i>(), 0, Point() );
        fillPoly(drawing, contours, Scalar(255,0,0));

    } 
```

这里的问题是看起来 if(area > 2000) 语句没有执行，即使面团我知道图像中存在的一些区域比这大得多。

我一直在尝试很多不同的解决方案，但这看起来对我来说是最合适的。

关键问题：

是否有可能用给定的代码实现我想要的......？如果是这样，任何人都可以看到我在哪里出了问题，否则有人可以提出某种解决方案或一个好的在线资源......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:44:23.700

如果要根据 ROI 的大小进行删除，可以执行以下操作（基于[opencv 的边界框](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/bounding_rects_circles/bounding_rects_circles.html)示例）：

```
vector< vector< Point > > contours_poly( contours.size() );
vector< Rect > boundRect (contours.size() );
vector< Point2f > centeres ( contours.size() );
vector< float > radiuses ( contours.size() );

// finding the approximate rectangle and circle of contours
for( int i = 0; i < contours.size(); i++ )
  {
    approxPolyDP( Mat ( contours[i] ), contours_poly[i], 3, true );
    boundRect[i] = boundingRect( Mat ( contours_poly[i] ) );
    minEnclosingCircle( ( Mat ) contours_poly[i], centeres[i], radiuses[i] );
  } 
```

上面的代码片段为您提供了轮廓的近似矩形 ( `boundRect`) 和近似圆 ( `centers`, `radiuses`)。在此之后你必须能够调用`contourArea();`，如果它小于某个阈值，你可以消除它。

* * *

如果你只是想删除某些长度较小的轮廓，你可以计算它的长度，[看看类似问题的答案](https://stackoverflow.com/a/11132942/2194309)，似乎你可以使用`arcLength()`函数。我认为是这样的：`double perimeter = arcLength ( Mat ( contours[i] ), true );`。

# java - 杰克逊：引用非数字不一致

> ID：15628741
> 
> 赞同：1
> 
> 时间：2013-03-26T03:15:52.683
> 
> 标签：java, json, jackson

我发现 Jackson JSON 处理器库中的 writeNumber() 方法不一致。在启用 QUOTE_NON_NUMERIC_NUMBERS 的情况下对“NaN”调用 writeNumber(String) 无法返回带引号的字符串。这在以下示例中进行了说明：

```
float nan = Float.NaN;
try {
    JsonGenerator jg = new JsonFactory().createGenerator(System.out);
    jg.enable(JsonGenerator.Feature.QUOTE_NON_NUMERIC_NUMBERS);

    // writeNumber(String s)
    jg.writeNumber(""+nan);

    // writeNumber(float f) 
    jg.writeNumber(nan);

    jg.close();
} catch (IOException e) {
    throw new RuntimeException(e);
} 
```

实际输出：

```
NaN "NaN" 
```

预期输出：

```
"NaN" "NaN" 
```

这是预期的行为还是错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:10:38.977

这是预期的行为，即使看起来不直观。这是由于 JSON 规范中对数字的严格定义，再加上 Java 可能具有的开放式数字集；很难既安全又方便地匹配。

在第一种情况下，您正在使用您想要的精确格式打印“原始”数字。没有添加引用，因为结果被假定为有效的 JSON 编号。如果你想要双引号，你将添加它们。这类似于`writeRaw()`，除了它显式地写入值，这意味着还添加了必要的分隔符（数组中的逗号，属性名称和值之间的分号）。

在第二种情况下，已知您要输出的值不是有效的 JSON 数字，它必须打印为 JSON 字符串。

# cordova - 有没有办法在 PhoneGap 中卸载视频？

> ID：15628742
> 
> 赞同：1
> 
> 时间：2013-03-26T03:15:58.473
> 
> 标签：cordova

在我们的 iOS PhoneGap 应用程序中，用户可以从他们的库中上传视频或录制视频。如果他们从他们的图书馆上传，然后决定他们想要录制他们从图书馆选择的视频，那么他们首先会出现。在访问摄像机之前，他们必须单击完成。

有没有办法通过 PhoneGap 将之前的视频刷新出来，这样它就不会出现？

PhoneGap 2.1，iOS 6.1.x

# php - 使用 PHP 将表单值携带到另一个网页中

> ID：15628743
> 
> 赞同：0
> 
> 时间：2013-03-26T03:16:05.023
> 
> 标签：php, sql, forms, pdo

我知道asp可以继承表单值并将其插入另一个链接页面。有没有办法用 PHP PDO 脚本做到这一点。例如，我在模拟网站上为每个新成员创建了一个新表条目。对于每条记录，都会创建一个名为“成员配置文件”的表单按钮，该按钮具有同一行中成员的值。当我单击按钮时，我希望将成员名称带到新页面并链接到该 phpmyadmin 表并显示该成员的所有日期。我希望我解释得对。这是我的代码

```
$dsn = 'mysql:host=localhost;dbname=averyit_net';
$db_username = "root";
$db_password = "password";

$db = new PDO ($dsn, $db_username, $db_password);

$tablemaker = $db->query("SELECT `cust_profile`.`CustomerName`,                 
`cust_profile`.`CustomerType`, `cust_profile`.`ContractHours` FROM `cust_profile` ORDER       
BY    `CustomerName`");
while ($rows = $tablemaker->fetch(PDO::FETCH_ASSOC)) {

?>
<table width="75%"  border="1" cellspacing="0" align="center">
<th width="15%" height="0%" bgcolor="#819FF7"> </th>
<th width="35%" height="0%" bgcolor="#819FF7"> </th>
<th width="30%" height="0%" bgcolor="#819FF7"> </th>
<th width="20%" height="0%" bgcolor="#819FF7"> </th>
<tr> 

<form method="post" action="edit_cust.php" >
  <td align="center"> 
    <span style="font-size: 9pt"><font size="1" face="Verdana">
        <input TYPE="submit" NAME="dothis0" value="Customer Profile">      
</font></span><font face="Verdana"><font size="2">
    </font>
    <input type="hidden" name="custID" value="<?php echo $rows['CustomerName']; ?>">
    </font>
  </td>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:27:57.227

```
change method="post" to method="get"

on your second form you will be posted a url like this (ie):

script.php?your_variable=lorem&second_variable=ipsum

<input type="text" value="<?=($_GET['your_variable']) ? htmlentities($_GET['your_variable']) : ''?>" name="field_name">

<input type="text" value="<?=($_GET['second_variable']) ? htmlentities($_GET['second_variable']) : ''?>" name="field_name"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:37:37.563

在你改变你的形式`method="get"`

提交表格会将您重定向到您的`action="edit_cust.php"`

这将产生一个包含你`CustomerName`这样的参数的url

*www.localhost/website/edit_cust.php?name=Me*

然后您可以使用 $_GET[] 全局变量在 edit_cust.php 上获取或使用该数据

```
// set it to variable..
$CustomerName = $_GET['name'];
//note: your $_GET[] parameter should equal to what is in your url to gets its value... 
```

那么您的客户名称就可以使用变量来使用了`$customerName`

# objective-c - 将 XCode 的导航器分离到它自己的窗口中？

> ID：15628745
> 
> 赞同：1
> 
> 时间：2013-03-26T03:16:16.357
> 
> 标签：objective-c, xcode, interface-builder

现在，我的平均 xcode 窗口只是一个左侧有导航器的编辑器窗口。

有什么办法可以将导航器分离到一个单独的窗口中？

我试过了：

1.  制作一个新的完整窗口，并隐藏编辑器。这不起作用，当我尝试拖动导航器以覆盖整个窗口时，它不会一直走。奇怪的是，这可以创建一个仅限调试器的窗口，而不是一个仅限导航器的窗口。

2.  在首选项中进行行为，以显示导航器并隐藏编辑器。当我运行此行为时，它会显示导航器并隐藏编辑器，但会将调试器放在它的位置。当我在行为中添加“隐藏调试器”时，我得到相同的结果：导航器加调试器。

永远感谢谁能结束我的痛苦！

(xcode 4.6, mac 10.8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:34:06.587

不，没有办法做到这一点。Xcode 应用程序的 UI 不是为了能够满足您的要求而编写的。

# jquery - jquery.validationEngine 与 ajax php 邮件

> ID：15628746
> 
> 赞同：0
> 
> 时间：2013-03-26T03:16:33.027
> 
> 标签：jquery, validation

我正在使用[http://www.position-relative.net/creation/formValidator/](http://www.position-relative.net/creation/formValidator/)进行验证，并使用 php 作为我的邮件，但经过长时间的尝试我失败了。错误的..

如果将 php 文件放在 action="process_demo-test.php" 中，我的邮件功能正常，但如果不是......那么邮件不会发送但验证工作正常

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link rel="stylesheet" href="css/validationEngine.jquery.css" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="js/jquery.validationEngine-en.js" type="text/javascript"></script>
<script src="js/jquery.validationEngine.js" type="text/javascript"></script>

<script>
    jQuery(document).ready(function(){
        jQuery("#contact_form").validationEngine({
                promptPosition : "centerRight",
                scroll: false,
                ajaxFormValidation: true,
                ajaxFormValidationURL: "process_demo-test.php",
                onBeforeAjaxFormValidation: function() {
                    $("#ajax").show();
                },
                onAjaxFormComplete: function() {
                      $('#loader').html("<p>Thank you!</p>")
                      .hide()
                      .fadeIn(1000);
                }
    });
});

    </script>
</head>

<body>
<form action="" class="general" method="post" id="contact_form">
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td width="55%"><label for="company">Company Name <span>(required)</span></label>
        <input type="text" name="company" class="validate[required] text-input form-input" id="company" /></td>
    </tr>
    <tr>
      <td><label for="name">Contact Person <span>(required)</span></label>
        <input type="text" name="name" class="validate[required] text-input form-input" id="name" /></td>
    </tr>
    <tr>
      <td><label for="email">Email <span>(required)</span></label>
        <input type="text" name="email" class="validate[required,custom[email]] text-input form-input" /></td>
    </tr>
    <tr>
      <td><label for="email">Email Address<span>(required)</span></label>
        <input type="text" name="email" class="validate[required,custom[email]] text-input form-input" /></td>
    </tr>
    <tr>
      <td><label for="tel">Telephone No <span>(required)</span></label>
        <input type="text" name="tel" class="validate[required,custom[phone]] text-input form-input"  /></td>
    </tr>
    <tr>
      <td><label for="mobile">Mobile No</label>
        <input type="text" name="mobile" class="form-input"   /></td>
    </tr>
    <tr>
      <td><label for="fax">Fax No</label>
        <input type="text" name="fax" class="form-input"   /></td>
    </tr>
    <tr>
      <td><label for="address">Address <span>(required)</span></label>
        <input type="text" name="address" class="validate[required] text-input form-input"  /></td>
    </tr>
    <tr>
      <td><label for="city">City <span>(required)</span></label>
        <input type="text" name="city" class="validate[required] text-input form-input"  /></td>
    </tr>
    <tr>
      <td><label for="zip">Zip <span>(required)</span></label>
        <input type="text" name="zip" class="validate[required] text-input form-input"  /></td>
    </tr>
    <tr>
      <td><label for="country">Country <span>(required)</span></label>
        <select name="country" id="country" class="validate[required]">
          <option value="" selected="selected">Select One </option>
          <option value="Afghanistan">Afghanistan </option>
          <option value="Albania">Albania </option>
          <option value="Algeria">Algeria </option>
          <option value="American Samoa">American Samoa </option>
          <option value="Andorra">Andorra </option>
          <option value="Angola">Angola </option>
          <option value="Anguilla">Anguilla </option>
          <option value="Antarctica">Antarctica </option>
          <option value="Antigua and Barbuda">Antigua and Barbuda </option>
          <option value="Argentina">Argentina </option>
          <option value="Armenia">Armenia </option>
          <option value="Aruba">Aruba </option>
          <option value="Australia">Australia </option>
          <option value="Austria">Austria </option>
          <option value="Azerbaijan">Azerbaijan </option>
          <option value="Bahamas">Bahamas </option>
          <option value="Bahrain">Bahrain </option>
          <option value="Bangladesh">Bangladesh </option>
          <option value="Barbados">Barbados </option>
          <option value="Belarus">Belarus </option>
          <option value="Belgium">Belgium </option>
          <option value="Belize">Belize </option>
          <option value="Benin">Benin </option>
          <option value="Bermuda">Bermuda </option>
          <option value="Bhutan">Bhutan </option>
          <option value="Bolivia">Bolivia </option>
          <option value="Bosnia and Herzegovina">Bosnia and Herzegovina </option>
          <option value="Botswana">Botswana </option>
          <option value="Bouvet Island">Bouvet Island </option>
          <option value="Brazil">Brazil </option>
          <option value="British Indian Ocean Territory"> British Indian Ocean Territory </option>
          <option value="Brunei Darussalam">Brunei Darussalam </option>
          <option value="Bulgaria">Bulgaria </option>
          <option value="Burkina Faso">Burkina Faso </option>
          <option value="Burundi">Burundi </option>
          <option value="Cambodia">Cambodia </option>
          <option value="Cameroon">Cameroon </option>
          <option value="Canada">Canada </option>
          <option value="Cape Verde">Cape Verde </option>
          <option value="Cayman Islands">Cayman Islands </option>
          <option value="Central African Republic"> Central African Republic </option>
          <option value="Chad">Chad </option>
          <option value="Chile">Chile </option>
          <option value="China">China </option>
          <option value="Christmas Island">Christmas Island </option>
          <option value="Cocos (Keeling Islands)"> Cocos (Keeling Islands) </option>
          <option value="Colombia">Colombia </option>
          <option value="Comoros">Comoros </option>
          <option value="Congo">Congo </option>
          <option value="Cook Islands">Cook Islands </option>
          <option value="Costa Rica">Costa Rica </option>
          <option value="Cote D'Ivoire (Ivory Coast)"> Cote D'Ivoire (Ivory Coast) </option>
          <option value="Croatia (Hrvatska">Croatia (Hrvatska </option>
          <option value="Cuba">Cuba </option>
          <option value="Cyprus">Cyprus </option>
          <option value="Czech Republic">Czech Republic </option>
          <option value="Denmark">Denmark </option>
          <option value="Djibouti">Djibouti </option>
          <option value="Dominican Republic">Dominican Republic </option>
          <option value="Dominica">Dominica </option>
          <option value="East Timor">East Timor </option>
          <option value="Ecuador">Ecuador </option>
          <option value="Egypt">Egypt </option>
          <option value="El Salvador">El Salvador </option>
          <option value="Equatorial Guinea">Equatorial Guinea </option>
          <option value="Eritrea">Eritrea </option>
          <option value="Estonia">Estonia </option>
          <option value="Ethiopia">Ethiopia </option>
          <option value="Falkland Islands (Malvinas)"> Falkland Islands (Malvinas) </option>
          <option value="Faroe Islands">Faroe Islands </option>
          <option value="Fiji">Fiji </option>
          <option value="Finland">Finland </option>
          <option value="France, Metropolitan">France, Metropolitan </option>
          <option value="France">France </option>
          <option value="French Guiana">French Guiana </option>
          <option value="French Polynesia">French Polynesia </option>
          <option value="French Southern Territories"> French Southern Territories </option>
          <option value="Gabon">Gabon </option>
          <option value="Gambia">Gambia </option>
          <option value="Georgia">Georgia </option>
          <option value="Germany">Germany </option>
          <option value="Ghana">Ghana </option>
          <option value="Gibraltar">Gibraltar </option>
          <option value="Greece">Greece </option>
          <option value="Greenland">Greenland </option>
          <option value="Grenada">Grenada </option>
          <option value="Guadeloupe">Guadeloupe </option>
          <option value="Guam">Guam </option>
          <option value="Guatemala">Guatemala </option>
          <option value="Guinea-Bissau">Guinea-Bissau </option>
          <option value="Guinea">Guinea </option>
          <option value="Guyana">Guyana </option>
          <option value="Haiti">Haiti </option>
          <option value="Heard and McDonald Islands"> Heard and McDonald Islands </option>
          <option value="Honduras">Honduras </option>
          <option value="Hong Kong">Hong Kong </option>
          <option value="Hungary">Hungary </option>
          <option value="Iceland">Iceland </option>
          <option value="India">India </option>
          <option value="Indonesia">Indonesia </option>
          <option value="Iran">Iran </option>
          <option value="Iraq">Iraq </option>
          <option value="Ireland">Ireland </option>
          <option value="Israel">Israel </option>
          <option value="Italy">Italy </option>
          <option value="Jamaica">Jamaica </option>
          <option value="Japan">Japan </option>
          <option value="Jordan">Jordan </option>
          <option value="Kazakhstan">Kazakhstan </option>
          <option value="Kenya">Kenya </option>
          <option value="Kiribati">Kiribati </option>
          <option value="Korea (North)">Korea (North) </option>
          <option value="Korea (South)">Korea (South) </option>
          <option value="Kuwait">Kuwait </option>
          <option value="Kyrgyzstan">Kyrgyzstan </option>
          <option value="Laos">Laos </option>
          <option value="Latvia">Latvia </option>
          <option value="Lebanon">Lebanon </option>
          <option value="Lesotho">Lesotho </option>
          <option value="Liberia">Liberia </option>
          <option value="Libya">Libya </option>
          <option value="Liechtenstein">Liechtenstein </option>
          <option value="Lithuania">Lithuania </option>
          <option value="Luxembourg">Luxembourg </option>
          <option value="Macau">Macau </option>
          <option value="Macedonia">Macedonia </option>
          <option value="Madagascar">Madagascar </option>
          <option value="Malawi">Malawi </option>
          <option value="Malaysia">Malaysia </option>
          <option value="Maldives">Maldives </option>
          <option value="Mali">Mali </option>
          <option value="Malta">Malta </option>
          <option value="Marshall Islands">Marshall Islands </option>
          <option value="Martinique">Martinique </option>
          <option value="Mauritania">Mauritania </option>
          <option value="Mauritius">Mauritius </option>
          <option value="Mayotte">Mayotte </option>
          <option value="Mexico">Mexico </option>
          <option value="Micronesia">Micronesia </option>
          <option value="Moldova">Moldova </option>
          <option value="Monaco">Monaco </option>
          <option value="Mongolia">Mongolia </option>
          <option value="Montserrat">Montserrat </option>
          <option value="Morocco">Morocco </option>
          <option value="Mozambique">Mozambique </option>
          <option value="Myanmar">Myanmar </option>
          <option value="Namibia">Namibia </option>
          <option value="Nauru">Nauru </option>
          <option value="Nepal">Nepal </option>
          <option value="Netherlands Antilles">Netherlands Antilles </option>
          <option value="Netherlands">Netherlands </option>
          <option value="New Caledonia">New Caledonia </option>
          <option value="New Zealand">New Zealand </option>
          <option value="Nicaragua">Nicaragua </option>
          <option value="Nigeria">Nigeria </option>
          <option value="Niger">Niger </option>
          <option value="Niue">Niue </option>
          <option value="Norfolk Island">Norfolk Island </option>
          <option value="Northern Mariana Islands"> Northern Mariana Islands </option>
          <option value="Norway">Norway </option>
          <option value="Oman">Oman </option>
          <option value="Pakistan">Pakistan </option>
          <option value="Palau">Palau </option>
          <option value="Panama">Panama </option>
          <option value="Papua New Guinea">Papua New Guinea </option>
          <option value="Paraguay">Paraguay </option>
          <option value="Peru">Peru </option>
          <option value="Philippines">Philippines </option>
          <option value="Pitcairn">Pitcairn </option>
          <option value="Poland">Poland </option>
          <option value="Portugal">Portugal </option>
          <option value="Puerto Rico">Puerto Rico </option>
          <option value="Qatar">Qatar </option>
          <option value="Reunion">Reunion </option>
          <option value="Romania">Romania </option>
          <option value="Russian Federation">Russian Federation </option>
          <option value="Rwanda">Rwanda </option>
          <option value="S. Georgia and S. Sandwich Isls."> S. Georgia and S. Sandwich Isls. </option>
          <option value="Saint Kitts and Nevis">Saint Kitts and Nevis </option>
          <option value="Saint Lucia">Saint Lucia </option>
          <option value="Saint Vincent and The Grenadines"> Saint Vincent and The Grenadines </option>
          <option value="Samoa">Samoa </option>
          <option value="San Marino">San Marino </option>
          <option value="Sao Tome and Principe">Sao Tome and Principe </option>
          <option value="Saudi Arabia">Saudi Arabia </option>
          <option value="Senegal">Senegal </option>
          <option value="Seychelles">Seychelles </option>
          <option value="Sierra Leone">Sierra Leone </option>
          <option value="Singapore">Singapore </option>
          <option value="Slovak Republic">Slovak Republic </option>
          <option value="Slovenia">Slovenia </option>
          <option value="Solomon Islands">Solomon Islands </option>
          <option value="Somalia">Somalia </option>
          <option value="South Africa">South Africa </option>
          <option value="Spain">Spain </option>
          <option value="Sri Lanka">Sri Lanka </option>
          <option value="St. Helena">St. Helena </option>
          <option value="St. Pierre and Miquelon"> St. Pierre and Miquelon </option>
          <option value="Sudan">Sudan </option>
          <option value="Suriname">Suriname </option>
          <option value="Svalbard and Jan Mayen Islands"> Svalbard and Jan Mayen Islands </option>
          <option value="Swaziland">Swaziland </option>
          <option value="Sweden">Sweden </option>
          <option value="Switzerland">Switzerland </option>
          <option value="Syria">Syria </option>
          <option value="Taiwan">Taiwan </option>
          <option value="Tajikistan">Tajikistan </option>
          <option value="Tanzania">Tanzania </option>
          <option value="Thailand">Thailand </option>
          <option value="Togo">Togo </option>
          <option value="Tokelau">Tokelau </option>
          <option value="Tonga">Tonga </option>
          <option value="Trinidad and Tobago">Trinidad and Tobago </option>
          <option value="Tunisia">Tunisia </option>
          <option value="Turkey">Turkey </option>
          <option value="Turkmenistan">Turkmenistan </option>
          <option value="Turks and Caicos Islands"> Turks and Caicos Islands </option>
          <option value="Tuvalu">Tuvalu </option>
          <option value="US Minor Outlying Islands"> US Minor Outlying Islands </option>
          <option value="Uganda">Uganda </option>
          <option value="Ukraine">Ukraine </option>
          <option value="United Arab Emirates"> United Arab Emirates </option>
          <option value="United Kingdom">United Kingdom </option>
          <option value="United States">United States </option>
          <option value="Uruguay">Uruguay </option>
          <option value="Uzbekistan">Uzbekistan </option>
          <option value="Vanuatu">Vanuatu </option>
          <option value="Vatican City State">Vatican City State </option>
          <option value="Venezuela">Venezuela </option>
          <option value="Viet Nam">Viet Nam </option>
          <option value="Virgin Islands (British)"> Virgin Islands (British) </option>
          <option value="Virgin Islands (US)"> Virgin Islands (US) </option>
          <option value="Wallis and Futuna Islands"> Wallis and Futuna Islands </option>
          <option value="Western Sahara">Western Sahara </option>
          <option value="Yemen">Yemen </option>
          <option value="Yugoslavia">Yugoslavia </option>
          <option value="Zaire">Zaire </option>
          <option value="Zambia">Zambia </option>
          <option value="Zimbabwe">Zimbabwe </option>
        </select></td>
    </tr>
    <tr>
      <td><label for="refer">How did you know us ? <span>(required)</span></label>
        <select name="refer" id="refer" class="validate[required]">
          <option value="" selected="selected">Select One</option>
          <option value="Newsletter">Newsletter</option>
          <option value="Facebook">Facebook</option>
          <option value="Search Engines">Search Engines</option>
          <option value="Sales Respresentatives">Sales Respresentatives</option>
          <option value="Event/Exhibition/Flyer">Event/Exhibition/Flyer</option>
          <option value="Words of Mouth">Words of Mouth</option>
        </select></td>
    </tr>
    <tr>
      <td></td>
    </tr>
    <tr>
      <td><div class="option-group check" style="width:350px; margin-left:20px" >
        <input type="checkbox" name="cgrp" id="check1" class="validate[required] checkbox"  />
        <label for="check1" style="width:550px" >I have read the <a class="link" href="#">Reseller Agreement</a>, and i agree to all the terms there in</label>
      </div></td>
    </tr>
    <tr>
      <td  ><input class="form-btn" type="submit" value="Submit Request" />
        <div id="loader"></div></td>
    </tr>
  </table>
</form>
</body>
</html> 
```

**php代码**

```
<?php 
$company = $_POST['company'];
$name = $_POST['name'];
$email = $_POST['email'];
$address = $_POST['address'];
$address2 = $_POST['address2'];
$address3 = $_POST['address3'];
$city = $_POST['city'];
$country = $_POST['country'];
$zip = $_POST['zip'];
$tel = $_POST['tel'];
$alternatetel = $_POST['alternatetel'];
$mobile = $_POST['mobile'];
$fax = $_POST['fax'];
$refer = $_POST['refer'];

$subject = $name;

$message = "
<html>
<head>
  <title>Enquiry</title>
</head>
<body>
  <h2>Request from $name</h2>
 <table width='95%' cellpadding='0' cellspacing='11'>
    <tr>
      <td width='189'> Company Name :</td>
      <td>$company</td>
    </tr>
    <tr>
      <td> Contact Person :</td><td>$name</td>
    </tr>
    <tr>
      <td> Email Address :</td>
      <td>$email</td>
    </tr>
    <tr>
      <td valign='top'> Address :</td>
      <td>$address <br>
        $address2<br>
        $address3</td>
  </tr>
    <tr>
      <td>City :</td>
      <td>$city</td>
    </tr>
    <tr>
      <td> Country :</td>
      <td>$country</td>
    </tr>
    <tr>
      <td>Zip : </td>
      <td>$zip</td>
    </tr>
    <tr>
      <td> Telephone No   : </td>
      <td>$tel</td>
    </tr>
    <tr>
      <td> Alternate Tel No  : </td>
      <td>$alternatetel</td>
    </tr>
    <tr>
      <td> Mobile No  : </td>
      <td>$mobile</td>
    </tr>
    <tr>
      <td>Fax No : </td>
      <td>$fax</td>
    </tr>
    <tr>
      <td> How did you know us   : </td>
      <td>$refer</td>
    </tr>
  </table>
</body>
</html>
";

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "To:mailled@gmail.com" . "\r\n";
$headers .= "From:".$name."<".$email.">\r\n";

if(mail($toemail, $subject, $message, $headers)) {
    echo 'We have received your request and will get back to you with further details shortly. check your mailbox for further updates.';
} else {
    echo 'There was a problem sending your email.';
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:55:39.207

```
<form action="process_demo-test.php" class="general" method="post" id="contact_form"> 
```

# java - AppEngine 安全约束 URL 模式

> ID：15628747
> 
> 赞同：0
> 
> 时间：2013-03-26T03:16:43.983
> 
> 标签：java, google-app-engine

目前，我的 GAE 应用程序有这个安全约束。

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Admin Resources</web-resource-name>
        <url-pattern>/admin/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
    </auth-constraint>
</security-constraint> 
```

我希望对所有带有单词 admin 的 URL 具有相同的安全约束，例如 /user/admin、/m/admin/index.jsp。

什么 url 模式会起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T05:45:09.637

我建议`<url-pattern>`在你的中使用多个`<security-constraint>`，这将在浏览`web.xml`每个根 URL 的约束时更加明显：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Admin Resources</web-resource-name>
        <url-pattern>/admin/*</url-pattern>
        <url-pattern>/m/admin/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
    </auth-constraint>
</security-constraint> 
```

# angularjs - 带有自定义按钮的AngularJS ng-grid

> ID：15628749
> 
> 赞同：25
> 
> 时间：2013-03-26T03:16:46.373
> 
> 标签：angularjs, ng-grid

我在[ng-grid](http://angular-ui.github.com/ng-grid/)中使用角度按钮。我需要知道如何识别从网格中单击了哪个按钮。

我想部分复杂性是在选择行之前单击了按钮（只是我的分析，可能对解决方案没有帮助:)

网格外观的快照

![ng-网格](../Images/6ced3074dd49ac6a6cdd246590954b7f.png)

一个笨拙的人在[这里说明了这个问题](http://plnkr.co/edit/Ynjrbx)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-26T04:55:28.473

我已经能够找出如何解决我的问题，基本上将“行”作为参数传递给您的 ng-click 函数。ng-click="保存(行)"

前

```
.. ng-click="edit(selectedItem)" >Edit</button> ' 
```

后

```
.. ng-click="edit(row)" >Edit</button> ' 
```

我在[这里](http://plnkr.co/edit/Ynjrbx)更新了 plunker以反映相同

`row.entity`会给我绑定到这一行网格的实体

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-26T00:40:12.780

@Shai Aharoni 您可以通过将 $event 作为第一个参数传递给单击处理程序来防止选择该行：

```
.. ng-click="edit($event, row)">Edit</button> 
```

然后从处理程序内部对事件调用 stopPropagation()。

```
$scope.edit = function(event, row) { event.stopPropagation(); } 
```

# java - 如何从序列中删除最后一个数字？

> ID：15628751
> 
> 赞同：-1
> 
> 时间：2013-03-26T03:17:20.953
> 
> 标签：java, regex

```
String sequence = "html1body2ul3li1p5a"; 
```

我想使用 Java 中的替换方法从序列中删除最后一个数字（即 5）。如何使用正则表达式捕获从序列末尾看到的第一个数字？所有非数字都是字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:26:12.047

你可以这样做：

```
sequence = sequence.replaceAll("(.*)\\d", "$1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:43:35.317

如果您只需要替换最后一个 0-9 字符，您可以使用：

```
myString.replaceAll("\\d+(?=\D*$)", "") 
```

这将用任何内容替换应用字符串中的最后一个数字。

```
myString.replaceAll("\\d+(?=\D*$)", "") 
```

这将用任何内容替换应用字符串中的最后一组数字（例如`93`in `sdfsdflih193a`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T03:27:25.617

```
sequence.replaceFirst("\\d([^\\d]*)$", "$1"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T03:39:42.103

这个怎么样？

```
String sequence = "html1body2ula3li1p5a";
System.out.println("Remove last char "+sequence.substring(1,sequence.length()-1));
System.out.println("Replace last char"+sequence.replaceAll("a$","XXX")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T03:39:52.887

你也可以试试这个...

```
String sequence = "html1body2ul3li1p5a";
sequence = sequence.replaceAll("(\\d+)(?!.*\\d)", ""); 
```

# c - 输入和输出数组不匹配

> ID：15628757
> 
> 赞同：0
> 
> 时间：2013-03-26T03:18:06.520
> 
> 标签：c, arrays, printing, output

我正在为学校的课程编写程序，但我无法让程序打印出我输入的内容。

问题指出，第一行需要包含“考试”中的问题数量，后跟空格，然后是答案键。我想打印答案键以确保它被正确输入并且它永远不会与我输入的内容匹配。代码发布在下面。

这是开始运行的主文件，它从另一个文件调用一个方法，我已经正确地制作了原型文件，所以我很确定不是那样的。

```
int main()
{
    int i;
    int noOfQuestions;
    scanf("%d ", &noOfQuestions);
    char * answerKeyPtr;

    answerKeyPtr = fgetAnswers(noOfQuestions);

    for(i = 0; i < noOfQuestions; i++){
        printf("%c",answerKeyPtr[i]);
    }
    printf("\n");

    return 0;
}

char *fgetAnswers(int noOfQuestions){
    int i;
    char * answerKeyPtr;
    char AnswerKey[noOfQuestions];
    answerKeyPtr = AnswerKey;

    for(i = 0; i < noOfQuestions; i++){
        scanf("%c",&AnswerKey[i]);
    }

    return answerKeyPtr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:28:46.490

char 数组`AnswerKey`在调用时分配在堆栈`fgetAnswers`上。当您从 中返回时`fgetAnswers`，该调用的堆栈帧中存储的数据不再有效。您需要传入数组或分配它，这样输入就不会存储在堆栈中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:29:45.383

你这里有一个内存问题。

您将数据存储到`AnswerKey`数组中，该数组是`fgetAnswers()`. 问题是您正在返回指向该局部变量的指针，并且一旦您的 fgetAnswers() 函数完成不应访问该内存，该变量的内存就不可靠。因此，当您尝试`main()`在访问内存时打印数据时，您不应该这样做。

要解决它，请`AnswersKey`在 main 中创建数组，并将其作为参数传递给`fgetAnswers()`函数。

# file - 你如何通过applescript的创建日期复制最新的文件？

> ID：15628758
> 
> 赞同：0
> 
> 时间：2013-03-26T03:18:11.170
> 
> 标签：file, date, copy, applescript, plist

我告诉一个程序用 applescript 备份，然后在它完成备份后我告诉它从 plist 文件中读取并打开备份位置。之后，我需要它将最新的创建日期复制到桌面上的特定文件中。

```
try
    tell application "xxxxx"
        backup
    end tell
on error errmsg
    display dialog errmsg buttons {"xxxxx Backup Failed"}
end try

set the plistfile_path to "~/Library/Preferences/com.xxxxx.Xxxxx.plist"

tell application "System Events"
    set p_list to property list file (plistfile_path)
    value of property list item "backupPath" of p_list
    open result

    tell application "Finder"
        set itemGroup to sort (get every document file of the front Finder window) by creation date
        duplicate of (item 1) of the (front Finder window) to folder "LOGS-I-NEED:"
    end tell
end tell 
```

我让它复制文件夹中的第一个或最后一个文件，但我需要复制最新的创建日期文件，该文件将在最后 10 秒内。我需要将其复制到的文件夹是 LOGS-I-NEED，它将位于桌面上。

我承认我是 applescript 的新手（进入 applescript 3 周）并且还没有真正找到我理解的在 applescript 中写这个的方法。

谢谢各位帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:56:03.377

尝试用这个替换你的告诉应用程序“Finder”块：

```
tell application "Finder"
    set itemGroup to sort (get every document file of the front Finder window) by creation date
    set now to current date
    set sec to 10
    repeat with currentItem in itemGroup
        if (now - (creation date of currentItem)) ≤ sec then
            duplicate currentItem to folder "LOGS-I-NEED:"
        end if
    end repeat
end tell 
```

# matlab - 绘图函数 = 值 Matlab

> ID：15628760
> 
> 赞同：0
> 
> 时间：2013-03-26T03:18:31.477
> 
> 标签：matlab, matlab-figure

我有一个功能`f(x1,x2) = x1*x2`。使用 ezsurf 很容易绘制。

我可以绘图`f(x1,x2) = x1*x2 = 1`吗？我想看看具体的解决方案集是什么样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:25:17.153

尝试使用[`contour`](http://www.mathworks.com/help/matlab/ref/contour.html)：

```
z = f(x1, x2);
contour(x1, x2, z, [1 1]); 
```

# android - Android：无法读取资产文件夹中的图像并分配给 imageview

> ID：15628763
> 
> 赞同：0
> 
> 时间：2013-03-26T03:19:03.503
> 
> 标签：android, imageview

我`food.jpg`在资产文件夹中有一个文件。我尝试了很多方法。但我仍然无法将此图像放入 imageView。运行时，它不是显示图像“food.jpg”，而是显示我在 xml 文件中声明的图像。（该图像位于可绘制文件夹中）。

第一种方法是：

```
int asset_id = context.getResources().getIdentifier("food", "drawable", context.getPackageName());
imageView.setImageResource(asset_id); 
```

第二种方式是：

```
AssetManager assetManager = context.getAssets();
InputStream istr;
try {
         istr = assetManager.open("food");
         Bitmap bitmap = BitmapFactory.decodeStream(istr);
         imageView.setImageBitmap(bitmap);
                 istr.close();
        } catch (IOException e) {
            e.printStackTrace();
} 
```

请教我如何解决这个问题。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:07:38.457

您的代码运行良好。`(.jpg,jpeg,.png... etc)`只需在下面的行中添加图像 MIME-Type ：

```
istr = assetManager.open("ceo.jpg"); 
```

完整的代码供您参考

```
AssetManager assetManager = getAssets();
        InputStream istr;
        try {
            istr = assetManager.open("ceo.jpg");
            Bitmap bitmap = BitmapFactory.decodeStream(istr);
            imageView.setImageBitmap(bitmap);
            istr.close();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:48:57.900

试试这个代码...

```
try {
        // get input stream
        InputStream ims = getAssets().open("food.jpg");
        // load image as Drawable
        Drawable d = Drawable.createFromStream(ims, null);
        // set image to ImageView
        imgNews.setImageDrawable(d);
    } catch (Exception ex) {
        return;
    }
} 
```

# android - 如何在android中做列表框

> ID：15628767
> 
> 赞同：0
> 
> 时间：2013-03-26T03:19:37.947
> 
> 标签：android, xml, listview, button

我正在尝试做。当我单击一个按钮时，会打开另一个活动并显示列表框。在该列表框中显示表的特定列的值列表。那就是我们必须从 sqlite 数据库中检索。怎么做？？

像这样：

[http://www.google.co.in/imgres?imgurl=http%3A%2F%2Fwww.tutorialspoint.com%2Fimages%2Ftk-combobox.jpg&imgrefurl=http%3A%2F%2Fwww.tutorialspoint.com%2Fruby% 2Fruby_tk_combobox.htm&docid=SVhMpjb5FMImxM&tbnid=l4yuDUmNF-lm5M&w=220&h=242&ei=HBNRUay8B8OUrgeA94CYDw&ved=0CAcQxiAwBQ&iact=ricl](http://www.google.co.in/imgres?imgurl=http%3A%2F%2Fwww.tutorialspoint.com%2Fimages%2Ftk-combobox.jpg&imgrefurl=http%3A%2F%2Fwww.tutorialspoint.com%2Fruby%2Fruby_tk_combobox.htm&docid=SVhMpjb5FMImxM&tbnid=l4yuDUmNF-lm5M&w=220&h=242&ei=HBNRUay8B8OUrgeA94CYDw&ved=0CAcQxiAwBQ&iact=ricl)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:30:32.323

1.  从数据库中获取结果
2.  放入适配器
3.  使用适配器填充 android spinner

使用下面的链接作为参考 [http://developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:41:25.340

答案很大，所以不可能有整个代码我只是给你指导线。

**步：**

1.  您必须获取数据库中的所有记录并存储到`Collection`类变量中。

2.  将这些变量设置为`adapter`.

3.  您必须使用`onClick`并获取所需的信息。

您可以参考[本](http://www.mkyong.com/android/android-spinner-drop-down-list-example/)教程可能会有所帮助。如果这有帮助，请接受答案。

# c# - 尝试创建一个电子邮件流程来接收电子邮件并回复发件人，并将他们发送的电子邮件作为附件包含在内

> ID：15628768
> 
> 赞同：0
> 
> 时间：2013-03-26T03:19:45.237
> 
> 标签：c#, .net, visual-studio-2012, smtp

我正在使用 C#/Visual Studio 2012 创建一个电子邮件进程，该进程以原始电子邮件作为附件回复电子邮件的发件人。当处理他们发送的电子邮件时发生错误时，我会这样做。我正在使用股票 .NET`System.Net.Mail.MailMessage`和`System.Net.Mail.SmtpClient`.

我采用原始电子邮件 eml，并使用电子邮件 eml 的内容构造一个 MemoryStream：

```
memStream = new MemoryStream(Encoding.ASCII.GetBytes(exception.EmailEml));
memStream.Seek(0, SeekOrigin.Begin); 
```

然后我构建了一封电子邮件并尝试添加附件，如下所示：

```
 message.Attachments.Add(new Attachment(contentStream,
                    System.Net.Mime.MediaTypeNames.Text.Plain));
                message.Attachments[0].Name = subject + ".msg"; 
```

在 Outlook 中，我将邮件视为附件，但 Outlook 无法打开该附件。我从 Outlook 收到一个错误...

只是设置正确的 MIME 类型以便 .MSG 附件在 Outlook 中打开，还是我需要做的其他事情？

当我在文本编辑器中查看 .msg 附件时，我在标题中看到以下内容：

```
Received: from server.com ([___]) by
 server.com ([___]) with mapi id
 ___; Mon, 25 Mar 2013 23:00:20 -0400
From: Me <myemailaddy>
To: Server Side Mailbox Process <processemailaddy>
Subject: subject text
Thread-Topic: Topic text
Thread-Index: Ac4pzgz84kK07LIdQ+uIR67iWBoSxw==
Date: Mon, 25 Mar 2013 23:00:20 -0400
Message-ID:
 <4B10588A111F814E992DA95C07AD4F5E0CA102@server.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Exchange-Organization-AuthAs: Internal
X-MS-Exchange-Organization-AuthMechanism: 04
X-MS-Exchange-Organization-AuthSource: server.com
X-MS-Has-Attach:
X-MS-Exchange-Organization-SCL: -1
X-MS-TNEF-Correlator:
Content-Type: text/html; charset="us-ascii"
MIME-Version: 1.0 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:06:22.253

我的错，电子邮件来源是 eml 格式。我现在将文件附加到带有 eml 扩展名的电子邮件中。在这种情况下，关键路径现在正在使用这种方法！

# svg - 使用 Meteor 在模板中创建 SVG 工作，但不是在 #each 循环中

> ID：15628769
> 
> 赞同：0
> 
> 时间：2013-03-26T03:19:56.890
> 
> 标签：svg, meteor, each, handlebars.js

更新：截至 2014 年 2 月，Meteor 支持响应式 SVG，因此无需解决方法。

流星 0.5.9

我想创建一组形状，集合中的每个文档一个。我可以在模板中一次创建一个形状，但不能在 {{#each 循环}} 内。

这有效：

```
<Template name="map">
  <svg viewBox="0 0 500 600" version="1.1">
    <rect x="0" y="0" width="100" height="100" fill={{color}}/>
  </svg>
</Template>

Template.map.color = function() {
  return "green";
}; 
```

这不会：

```
<Template name="map">
  <svg viewBox="0 0 500 600" version="1.1">
    {{#each colors}}
      <rect x="0" y="0" width="100" height="100" fill={{color}}/>
    {{/each}}
  </svg>
</Template>

Template.map.colors = function() {
  return [{color: "red"}, {color: "blue"}];
} 
```

我尝试使用 {{#each}} 创建的任何内容都不会显示，即使我可以手动创建它们，即使 Meteor 通过模板插入的属性也是如此。

我还尝试将单个对象 {color: "red"} 发送到模板并使用 {{#with colors}}，但这也不起作用。除了 SVG，我还在模板中添加了 plain s 以确保信息正确地到达模板，并且这些都按预期工作，使用 {{#each}} 和 {{#with}}。

我应该能够做我想做的事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T14:47:24.313

（2013 年 4 月 1 日更新）

找到了一种将 Handlebars 与 Javascript 插入相结合的方法。必须感谢这个博客条目才能弄清楚这一点：http: [//nocircleno.com/blog/svg-and-handlebars-js-templates/](http://nocircleno.com/blog/svg-and-handlebars-js-templates/)

我创建了以下两个文件，将它们放在新 Meteor 目录的*客户端文件夹中，我成功获得了 html。*

**测试.js：**

```
<head>
  <title>testing</title>
</head>

<body>
</body>

<template name="map">
  <svg version="1.1" xmlns="http://www.w3.org/2000/svg">
    {{#each colors}}
      <rect x="0" y="{{yPosition}}" width="100" height="100" fill="{{color}}"/>
    {{/each}}
  </svg>
</template> 
```

**测试.html：**

```
(function () {

  var count = 0;

  Template.map.yPosition = function() {
    count++;
    return (count-1) * 100;
  };  

  Template.map.colors = function() {
    return [{color: "red"}, {color: "blue"}];
  };

  Meteor.startup(function() {
    var svgElement = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svgElement.width = 500;
    svgElement.height = 600;
    document.getElementsByTagName("body")[0].appendChild(svgElement);
    var svgFragment = new DOMParser().parseFromString(Template.map(), "text/xml");
    svgElement.appendChild(svgFragment.documentElement);
  }); 

})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-11T21:49:18.740

我在尝试使用 Meteor 和 SVG 元素时遇到了同样的问题，发现您可以添加元素并使用以下两种方法让它们显示出来。一种选择是将每个循环中的元素包装在 an 中`<svg></svg>`，如下所示：

```
<svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
{{#each pieces}}
  <svg xmlns="http://www.w3.org/2000/svg"><circle cx="{{x}}" cy="{{y}}" r="1" fill="{{color}}"></circle></svg>
{{/each}}
</svg> 
```

另一个选项是（在模板渲染上）使用 jQuery 创建一个包含要插入的元素的 svg 元素，然后使用 jQuery 抓取该内部元素并将其插入到 DOM 中已经存在的 svg 元素中，就像这样（在咖啡脚本中） ：

```
for piece in Pieces.find().fetch()
  $el = $("<svg><circle cx='#{piece.x}' cy='#{piece.y}' r='1' class='a'></circle></svg>")
  $el.find('circle').appendTo @$('svg') 
```

您还可以使用 d3 或 RaphaelJS 之类的东西来进行插入。您甚至可以通过在 Collection 观察者回调中使用像 d3 这样的库来使各个元素对您的 Collection 产生反应并轻松地制作动画，就像这样（再次，coffeescript）：

```
Pieces.find().observe {

  added: (piece)=>
    # using jquery (could use d3 instead)
    $el =  $("<svg><circle cx='#{piece.x}' cy='#{piece.y}' r='1' fill='#{piece.color}' data-id='#{piece._id}'></circle></svg>")
    $el.find('circle').appendTo @$('svg')

  changed: (newPiece, oldPiece)=>
    # using d3 to animate change
    d3.select("[data-id=#{oldPiece._id}]").transition().duration(1000).attr {
      cx: newPiece.x
      cy: newPiece.y
      fill: newPiece.color
    }

  removed: (piece)=>
    @$("[data-id=#{piece._id}]").remove()
} 
```

这些方法似乎适用于 Mac 上最新的 Chrome、Safari、Firefox 浏览器，但我还没有在其他浏览器中测试过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-13T13:02:58.880

根据[使用 Blaze](https://github.com/meteor/meteor/wiki/Using-Blaze)页面，当 Blaze 发布时，Meteor 将拥有一流的 SVG 支持。

# java - 对 Java 文件、JSP、servlet 的集成感到困惑？

> ID：15628775
> 
> 赞同：3
> 
> 时间：2013-03-26T03:20:09.120
> 
> 标签：java, jsp, tomcat, web-applications, servlets

这是我第一次使用 Java 和 tomcat，我对所有东西如何组合在一起有点困惑 - 我已经无休止地搜索了一些概念，但似乎无法理解一些概念。

我已经完成了一个输出 bufferedImages 的 Java 程序。我的目标是最终让这些图像显示在网页上。

我无法理解当前在 NetBeans 中运行的 java 文件 (.java) 如何与 servlet 和/或 JSP 交互。

理想情况下，当程序运行并且 HTML 文件可以以某种方式交互时，servlet 或 JSP（不是 100% 清楚其中任何一个是如何工作的。不过，我主要通过查看各种示例来理解语法）可以得到我的输出（bufferedImages）无论他们在做什么，以便图像可以显示在网页上。我不确定这是否可能。如果有人能建议做事的一般顺序，那就太棒了。

在我发现的每个示例/教程中，没有人使用 .java 文件 - WEB-INF 文件夹中有 .classes - 人们似乎没有在 java 程序上使用完整的文件。但是，我需要运行我的 .java 程序，以便我可以检索输出并在 webapp 上使用它。

任何一般指导将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T03:50:48.267

我认为可悲的是缺乏这种文件。太多人认为一个例子就是一种解释，尽管你可以从一个例子中得到所有美妙的东西，但有时解释并不是其中之一。我将尝试解释您提到的一些总体概念；不幸的是，它们不会直接帮助您解决缓冲图像显示问题。

Tomcat 和其他类似的程序是“网络服务器”；这些是接受来自其他计算机的互联网连接并以特定格式返回信息的程序。当您在浏览器中输入“www”地址时，该地址中的字符串最终会（作为“请求”）在网络服务器上结束，然后它会返回一个网页（也称为“响应”）。Tomcat、Apache、Jetty、JBoss 和 WebSphere 都是执行此类操作的类似程序。在万维网的原始形式中，请求字符串表示服务器机器上的一个文件，而 Web 服务器的工作是返回该 (html) 文件以在浏览器中显示。

Servlet 是一种运行在某些 Web 服务器上的 Java 程序。servlet 本身是一个 java 类，其方法由 javax.servlet.Servlet 接口定义。在处理 servlet 的 web 服务器中，熟悉配置文件的人可以指示 web 服务器程序接受某些请求，而不是从服务器返回 HTML 文件（或其他文件），而是执行 servlet 代码。servlet 本质上返回内容本身——想想一个输出 HTML 的程序，你就走在了正确的轨道上。

但事实证明，从程序中输出完整的 HTML 是一件很痛苦的事情——有大量的 HTML 与您需要某种编程语言的“繁重工作”没有太大关系。您必须使用 Java（或某种语言）来进行数据库查询、过滤结果等，但您并不需要 Java 来放入现代网页所需的数百个其他标签。

因此，JavaServerPage (JSP) 是一种特殊的混合体，是 HTML 和与 servlet 相关的东西的组合。您可以将 java 代码直接放在 JSP 文件中，但通常认为使用类似 html 的“标签”更好，然后由“JSP 编译器”解释并转换为 servlet。因此，JSP 页面的创建者学会了如何使用这些标签，对于网页创建者来说，这些标签（如果构造正确的话）比 java 编程语言更合乎逻辑，实际上根本不必是程序员。所以一个程序员，和这个面向内容的人一起工作，为页面创建标签来描述它希望它的页面看起来如何，然后程序员进行编程，内容人员用它创建网页。

对于您的具体问题，我们需要更多细节来帮助您。您是否设想该程序运行并使用用户提供的一些信息作为其生成图像的请求的一部分？还是只生成一次图像，现在只需要显示它们？实际上，我认为这是另一个问题的主题。

这应该足以让你开始。我现在建议有关这些事情的 wikipedia 文章以获取更多详细信息，并祝您好运，了解这些概念。我希望这有帮助。

* * *

本附录是在您发表关于想要制作幻灯片的评论之后提供的。

一个重要的 Web 编程概念是它的客户端-服务器和请求-响应性质。在传统的非 Javascript Web 环境中，客户端（读取浏览器）向服务器发送请求，服务器发送回字节。字节流结束后，两台计算机之间没有持续的连接，并且字节流可以持续多长时间是有限制的。此外，除了这个请求和响应之外，服务器通常没有能力向客户端发送任何东西，除非客户端请求它；客户端“驱动”数​​据交换。

因此，例如“幻灯片”，服务器会定期发送代表附加图像的字节，这不是 HTML 的工作方式（或本应工作的方式）。你可以在用户的​​控制下做一个：用户为下一张图片按下一个按钮，浏览器发送下一张图片的请求，它出现在上一张图片的位置。这符合请求-响应范式。

现在，使用 Javascript 可以实现自动幻灯片的**效果。**Javascript，基于 Java 但不相关，是一种脚本语言；它是 HTML 页面的一部分，与页面一起下载到浏览器，并在浏览器的环境中运行（与在服务器上执行的 JSP/servlet 不同）。您可以用 Javascript 编写一个计时器，它可以等待 N 秒并向服务器发送另一个请求（对于另一张图片或其他什么）。Javascript 有自己的规则等，但即便如此，我认为记住你不再只是在做 HTML 是个好主意。

如果幻灯片是您所追求的，那么您根本不需要 JSP。您可以创建一个 HTML 页面，其中包含显示图片的位置、标签和文本等，用于停止幻灯片放映的按钮等，在 HTML 中，以及用于请求附加图片的 Javascript。

您可以使用 JSP 创建页面，它可能会根据页面的复杂程度对您有所帮助，但它不会帮助您完成基本功能：获取幻灯片的下一张图片。当浏览器请求一个 JSP 页面时：

1.  请求发送到服务器，
2.  服务器确定您想要的页面并且它是一个 JSP 页面，
3.  如果尚未将该页面编译为 servlet，则服务器会将其编译为 servlet，
4.  servlet 运行，根据现在编译成 Java 的标签生成 HTML 输出，
5.  服务器将 HTML 返回给浏览器。

然后服务器完成，在发出另一个请求之前，更多的字节不会进入浏览器。

再次，我希望这有帮助。您的幻灯片示例揭示了一些需要了解的关于 Web 编程、服务器、HTML、JSP 和 Javascript 的基本概念，我祝您在所有这些过程中都好运。如果你认为这一切比它看起来需要的更复杂，那么你不会是第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:04:02.883

您可以创建一个调用 Java 类中的方法来检索 BufferedImage 的 JSP。然后您必须将内容类型设置为适当的图像类型：

```
response.setContentType() 
```

棘手的部分是您必须从 JSP 打印图像，因此您必须调用：

```
response.getOutputStream() 
```

来自您的 JSP，因此`OutputStream`您必须传递 BufferedImage 的字节。

请注意，在该 JSP 中，您将无法打印 HTML，只能打印图像。

我不确定您在哪里需要更多说明，因为您似乎对这些概念有些困惑。

顺便说一句：JSP 只是一个 servlet，它具有更简单的语法来一起编写 HTML 和 Java 代码。

# jquery - Fancybox 有时只能在不刷新页面的情况下工作

> ID：15628777
> 
> 赞同：0
> 
> 时间：2013-03-26T03:20:17.150
> 
> 标签：jquery, dom, fancybox

我正在使用 Fancybox，因此用户可以单击图像缩略图并查看更大的图像。

我遇到的问题是页面加载时它并不总是有效。我将单击缩略图，Fancybox 不会显示较大的图像。但是，如果我刷新页面，它就可以正常工作。内容是动态生成的，所以我想知道是否需要刷新 DOM？

```
 <script type="text/javascript">
        $(document).ready(function() {
            $(".fancybox").fancybox({
                openEffect  : 'fade', // openEffect / closeEffect / nextEffect / prevEffect 
                closeEffect : 'fade', // Animation effect ('elastic', 'fade' or 'none') for each transition type
                nextEffect  : 'fade', // String; Default value: 'fade', 'fade', 'elastic', 'elastic'
                prevEffect  : 'fade',
                openSpeed   : '1000', // openSpeed / closeSpeed / nextSpeed / prevSpeed     
                closeSpeed  : '1000', // The time it takes (in ms, or "slow", "normal", "fast") to complete transition
                nextSpeed   : '1000', // Integer; Default value: 250
                prevSpeed   : '1000',
                padding     : 3
            });
        });
    </script>

<a class='fancybox' rel='gallery' href='".$data['photo'][$x]."'><img src='".$data['photo'][$y]."' style='margin-right: 2.5px; margin-left: 2.5px; vertical-align: top;'></a> 
```

当它不起作用并且我单击缩略图时，这是我得到的错误...

`TypeError: a[0] is undefined`在第 15 行的 jquery.fancybox.pack.js 中。

这就是我如何称呼 Fancybox，也许这就是问题所在？

`<script type="text/javascript" src="/fancybox/jquery.fancybox.pack.js?v=2.1.4"></script>`

我不在乎我使用的是哪个版本的 fancybox，只要我在这里以及在另一个页面上都有一个 Fancybox 显示页面加载时的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:32:39.830

如果您在同一页面上有多个具有相同类的图像而不是像上面那样调用，您可以使用

```
$("a[rel=gallery]").fancybox({
     openEffect  : 'fade', // openEffect / closeEffect / nextEffect / prevEffect 
            closeEffect : 'fade', // Animation effect ('elastic', 'fade' or 'none') for each transition type
            nextEffect  : 'fade', // String; Default value: 'fade', 'fade', 'elastic', 'elastic'
            prevEffect  : 'fade',
            openSpeed   : '1000', // openSpeed / closeSpeed / nextSpeed / prevSpeed     
            closeSpeed  : '1000', // The time it takes (in ms, or "slow", "normal", "fast") to complete transition
            nextSpeed   : '1000', // Integer; Default value: 250
            prevSpeed   : '1000',
            padding     : 3
}); 
```

# google-maps - 如何在谷歌地图上显示导航 gps 数据？

> ID：15628783
> 
> 赞同：0
> 
> 时间：2013-03-26T03:21:43.010
> 
> 标签：google-maps, google-maps-api-3, navigation, gps

我有一个不断填充数据的 GPS 设备。我需要在谷歌地图上显示运动。例如，用户正在从凤凰城搬到洛杉矶。我需要在谷歌地图上用蓝色标记显示他​​的运动，显示他的运动以及经过的路径。

是否有可能有一个 Maps API 可以为我做这样的事情：我一直在向谷歌地图发送新的 lat，long 。谷歌地图不断在地图上显示前进的运动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:25:53.247

您需要实现一个[LocationListener](http://developer.android.com/reference/android/location/LocationListener.html)，它将强制您实现 4 个方法。其中一种方法是[onLocationChanged](http://developer.android.com/reference/android/location/LocationListener.html#onLocationChanged%28android.location.Location%29)这个方法，当你的位置改变时会更新并做你想做的事情。我猜您想更新并显示您当前的位置。

使用[requestLocationUpdates()](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)并检查这一点非常重要：

[http://developer.android.com/training/basics/location/locationmanager.html](http://developer.android.com/training/basics/location/locationmanager.html)

# node.js - 无法使用适用于 Node.js 的 Azure SDK 进行调试

> ID：15628787
> 
> 赞同：1
> 
> 时间：2013-03-26T03:22:02.000
> 
> 标签：node.js, azure, sdk

多年来我一直对 Azure SDK 感到非常沮丧，我一直在使用它，但仍然会出现将错误输出到日志文件的问题：

```
Application has thrown an uncaught exception and is terminated:
Error: ENOENT, no such file or directory 'C:\DWASFiles\Sites\pazooza\VirtualDirectory0\site\wwwroot\iisnode\RD00155D4313F9-20848-stdout-Tue Mar 26 2013 03:10:56 GMT+0000 (GMT Standard Time).txt'
    at Object.openSync (fs.js:240:18)
    at Object.writeFileSync (fs.js:628:15)
    at SyncWriteStream.<anonymous> (D:\Program Files (x86)\iisnode\interceptor.js:181:20)
    at Object.<anonymous> (console.js:25:18)
    at IncomingMessage.<anonymous> (C:\DWASFiles\Sites\pazooza\VirtualDirectory0\site\wwwroot\utils\facebook.js:69:21)
    at IncomingMessage.emit (events.js:88:20)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:130:23)
    at CleartextStream.socketOnData [as ondata] (http.js:1288:20)
    at CleartextStream._push (tls.js:375:27)
    at SecurePair.cycle (tls.js:734:20) 
```

如您所见，发生错误是因为 fs 对象正在尝试查找 c: 驱动器上的内容，指向我的本地计算机的 c: 驱动器是什么与假设在 Azure 网站中的日志记录系统有关?

和 D:\Program Files (x86)\iisnode\interceptor.js

它不应该指向 Azure 云网站实例中的资源吗？

Azure SDK 中的任何人都可以告诉我如何消除此错误。

几个月前我问过这个问题，我们认为我们现在已经修复它了......非常令人沮丧的微软......你们是为了让我们的生活更轻松吗？

我在这里的其他问题导致了这个问题：

[Webmatrix 2 损坏](https://stackoverflow.com/questions/12312625/webmatrix-2-broken)和 [Windows Azure Node.js 内部服务器错误](https://stackoverflow.com/questions/13637272/windows-azure-node-js-internal-server-error)

我的 node.js web.config 文件如下所示：

```
<configuration>
     <system.webServer>
          <handlers>
               <!-- indicates that the server.js file is a node.js application to be handled by the iisnode module -->
               <add name="iisnode" path="server.js" verb="*" modules="iisnode"/>
          </handlers>
          <rewrite>
               <rules>
                    <!-- Don't interfere with requests for node-inspector debugging -->
                    <rule name="NodeInspector" patternSyntax="ECMAScript" stopProcessing="true">                    
                        <match url="^server.js\/debug[\/]?" />
                    </rule>

                    <!-- First we consider whether the incoming URL matches a physical file in the /public folder -->
                    <rule name="StaticContent">
                         <action type="Rewrite" url="public{{REQUEST_URI}}"/>
                    </rule>

                    <!-- All other URLs are mapped to the Node.js application entry point -->
                    <rule name="DynamicContent">
                         <conditions>
                              <add input="{{REQUEST_FILENAME}}" matchType="IsFile" negate="True"/>
                         </conditions>
                         <action type="Rewrite" url="server.js"/>
                    </rule>

               </rules>
          </rewrite>
          <!-- You can control how Node is hosted within IIS using the following options  -->
          <iisnode
            loggingEnabled="true"
            devErrorsEnabled="true"
         />
     </system.webServer>
</configuration> 
```

任何关于为什么在我设置 logginEnabled="true" 时出现此错误的帮助或建议将不胜感激。

当我将 loggingEnabled 设置为 false 时，没有错误并且站点运行良好，但是当它打开时，一切都变得糟糕了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T13:54:30.253

您能否在以下位置提出问题：[https](https://github.com/windowsazure/iisnode) ://github.com/windowsazure/iisnode ？

听起来这是 IISNode 日志记录的问题？我们或许可以帮助您提供有关该问题的更多详细信息。

安德烈

# java - 我有机会运行用户定义的程序来生成资源吗？

> ID：15628788
> 
> 赞同：1
> 
> 时间：2013-03-26T03:22:03.433
> 
> 标签：java, maven

我有一个`war`maven 项目，

而且我想知道是否有一个插件或这样的机制来在编译时生成资源，以便我可以缩小`CSS`或缩小`JS`或生成 CSS-sprite ？

我认为这应该是一个非常好的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:13:25.853

我自己没有使用过它，但是[调用程序插件](http://maven.apache.org/plugins/maven-invoker-plugin/examples/post-build-script.html)似乎是您所需要的。它使您能够在构建前和构建后运行脚本。对于您的情况，只需使用预构建脚本来运行您需要的任何实用程序。

# vb.net - 随机位置不是随机的 [vb.net]

> ID：15628790
> 
> 赞同：0
> 
> 时间：2013-03-26T03:22:04.873
> 
> 标签：vb.net, random

我为我的 regen 做了一个随机化函数，它只是让所有在表单中以对角线重生的东西......代码是这样的：

```
Public Function RandomNumber(ByVal MaxNumber As Integer, _
Optional ByVal MinNumber As Integer = 0) As Integer

    'initialize random number generator
    Dim r As New Random(System.DateTime.Now.Millisecond)

    'if passed incorrect arguments, swap them
    'can also throw exception,return 0

    If MinNumber > MaxNumber Then
        Dim t As Integer = MinNumber
        MinNumber = MaxNumber
        MaxNumber = t
    End If

    Return r.Next(MinNumber, MaxNumber)

End Function 
```

1 regen 的代码是这样的：

```
'再生币
        z =硬币1

 `z.Location = zloc
    z.Hide()
    zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    If zloc.Y > 595 Then
        zloc = New Point(RandomNumber(playspace.Width), RandomNumber(playspace.Height))
    End If
    z.Location = zloc
    z.Show()` 

我不知道为什么它只是一条对角线，但非常感谢您的帮助！

            回答 #1

赞同：0

时间：2013-03-26T03:39:00.130

你的问题有点模糊，但我会提出一个建议。在 RandomNumber 函数之外初始化随机数生成器。否则，您每次拨打电话时都会创建一个新实例：

```
'initialize random number generator outside the function 
Public _r As New Random(System.DateTime.Now.Millisecond)

Public Function RandomNumber(ByVal MaxNumber As Integer, Optional ByVal MinNumber As Integer = 0) As Integer
    ' ensure min is less than max
    If MinNumber > MaxNumber Then
        Return _r.Next(MaxNumber, MinNumber)
    Else
        Return _r.Next(MinNumber, MaxNumber)
    End If
End Function 
```

            回答 #2

赞同：0

时间：2013-03-26T03:40:23.763

您的`Random`对象`r`具有函数级范围，这意味着您在每次进入`RandomNumber`函数时重新初始化它。

很多人犯了这个错误，每次都得到相同的“随机”值^*。每次都会得到一个稍微不同的数字，因为不是使用默认构造函数，而是使用半随机种子（时钟的当前毫秒数）重新初始化它。无论哪种方式，调用`r.Next()`仍然没有做你想做的事。

要解决此问题，请确保`Random`在每次调用函数时使用相同的对象，**将声明提升`r`到作用域级别（例如，到包含类），或[`Static`](http://msdn.microsoft.com/en-us/library/z2cty7t8.aspx)在函数级别标记它。**

这可能足以让你开心。如果没有，那么您将接受比您可能希望的更多的教育。*随机性*是一个很大的哲学话题。没有[比维基百科](http://en.wikipedia.org/wiki/Random_number_generation)关于这个主题的文章更好的起点了，或者[这个著名的 Stack Overflow 问题](https://stackoverflow.com/questions/3956478/understanding-randomness)。

[^*当然，这在“随机”的定义中是完全允许的。这不是人们想要的。]

```

# sql-server - 按纬度/经度进行半径搜索

> ID：15628794
> 
> 赞同：21
> 
> 时间：2013-03-26T03:22:59.457
> 
> 标签：sql-server, database, sql-server-2008, geolocation

我已经使用 mysql 找到了很多关于这个问题的答案，但我无法将任何内容转换为 ms sql 2008 可以使用的查询。我在数据库中的每一行都有一个经度和纬度列。我将有一个用户所在位置的纬度和经度。我希望能够找到距离用户纬度/经度 x 英里范围内的所有行。此外，当尝试使用我在 SO 上找到的其他查询时，我不断收到错误 - `'pow' is not a recognized built-in function name.` 这很奇怪，因为我很确定我`pow`以前在 sql 2008 中使用过。对此的任何帮助将不胜感激。到目前为止，这是最接近的。

```
select * from tbl_MyTable
WHERE (
POW( ( 69.1 * ( Longitude - @longitude ) * cos( @latitude / 57.3 ) ) , 2 ) + POW( ( 69.1 * ( Latitude - @latitude ) ) , 2 )
) < ( 5 *5 ); 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-26T15:07:11.960

由于您使用的是 SQL 2008，因此请考虑使用本机地理空间功能。你可以做一些花哨的事情，比如：

*   创建一个表示您的点的地理类型的持久计算列。
*   在计算列上创建空间索引。这将使事情变得`yourPoint.STDistance(@otherPoint) <= @distance`高效

像这样：

```
alter table [yourTable] add [p] as geography::Point(Latitude, Longitude, 4326) persisted;
create spatial index [yourSpatialIndex] on [yourTable] ([p])

declare @Latitude float = <somevalue>, @Longitude float = <somevalue>;
declare @point geography = geography::Point(@Latitude, @Longitude, 4326);
declare @distance int = <distance in meters>;

select * from [yourTable] where @point.STDistance([p]) <= @distance; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-21T07:24:16.557

```
DECLARE @CurrentLocation geography; 
SET @CurrentLocation  = geography::Point(12.822222, 80.222222, 4326)

SELECT * , Round (GeoLocation.STDistance(@CurrentLocation ),0) AS Distance FROM [Landmark]
WHERE GeoLocation.STDistance(@CurrentLocation )<= 2000 -- 2 Km 
```

精彩教程

[http://www.sql-server-helper.com/sql-server-2008/convert-latitude-longitude-to-geography-point.aspx](http://www.sql-server-helper.com/sql-server-2008/convert-latitude-longitude-to-geography-point.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-26T03:28:27.620

我认为你想要 POWER 而不是 POW

[http://msdn.microsoft.com/en-us/library/ms174276.aspx](http://msdn.microsoft.com/en-us/library/ms174276.aspx)

# mysql - 如何使用两个索引对 MySQL 表进行分区

> ID：15628795
> 
> 赞同：3
> 
> 时间：2013-03-26T03:23:07.707
> 
> 标签：mysql, innodb, partitioning, database-partitioning

我有一个`game_log`带有 fields`id`和`game_id`几个`varchar`字段的表。

`id`是主键并且`game_id`是非唯一键。

有两个常见的查询：

```
SELECT * FROM game_log ORDER BY id DESC LIMIT 20
SELECT * FROM game_log WHERE game_id = <value> ORDER BY id DESC 
```

该表很大（6.1GB 和 32M 行）。创新数据库。其中的行是随机添加的（每个查询一个）。此外，一些游戏正在被删除。

我需要减少磁盘 IO 并提高响应能力。

我应该使用`key`还是`range`分区？如果`range`, 那么 by`id`还是 by `game_id`? 有什么理论吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T03:33:21.773

使用按范围分区。

如果您按键分区，则您的两个示例查询都必须触及每个分区。

理论上，KEY 分区就像哈希分区一样，主键的连续值必然存储在不同的分区中。通过查询一系列 id 值，您破坏了分区修剪。

演示：

```
CREATE TABLE `game_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `game_id` int(11) NOT NULL DEFAULT '0',
  `xyz` varchar(15) DEFAULT NULL,
  PRIMARY KEY (`id`,`game_id`)
) 
PARTITION BY KEY ()
PARTITIONS 13;

INSERT INTO game_log (game_id) VALUES (1), (2), (3), (4), (5), (6);

EXPLAIN PARTITIONS SELECT * FROM game_log ORDER BY id DESC LIMIT 3\G
           id: 1
  select_type: SIMPLE
        table: game_log
   partitions: p0,p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12

EXPLAIN PARTITIONS SELECT * FROM game_log WHERE game_id = 4 ORDER BY id DESC LIMIT 3\G
           id: 1
  select_type: SIMPLE
        table: game_log
   partitions: p0,p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12 
```

然而，如果您在 game_id 上按范围进行分区，则至少在查询特定 game_id 时，您可以获得分区修剪以帮助您。但是您通过 id desc 对任何 game_id 订单的查询仍然会触及每个分区。

```
CREATE TABLE `game_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `game_id` int(11) NOT NULL DEFAULT '0',
  `xyz` varchar(15) DEFAULT NULL,
  PRIMARY KEY (`id`,`game_id`)
)
PARTITION BY RANGE (game_id)
(PARTITION p1 VALUES LESS THAN (3),
 PARTITION p2 VALUES LESS THAN (6),
 PARTITION p3 VALUES LESS THAN MAXVALUE);

INSERT INTO game_log (game_id) VALUES (1), (2), (3), (4), (5), (6);

EXPLAIN PARTITIONS SELECT * FROM game_log ORDER BY id DESC LIMIT 3\G
           id: 1
  select_type: SIMPLE
        table: game_log
   partitions: p1,p2,p3

EXPLAIN PARTITIONS SELECT * FROM game_log WHERE game_id = 4 ORDER BY id DESC LIMIT 3\G
           id: 1
  select_type: SIMPLE
        table: game_log
   partitions: p2 
```

# performance - 获取最大的前 k 个值

> ID：15628796
> 
> 赞同：2
> 
> 时间：2013-03-26T03:23:10.660
> 
> 标签：performance, algorithm, sorting, optimization, computer-science

现在我有一个表达式`y=0.5*a+0.7*b+0.4*c`，where `0<a,b,c<1`。假设有一个用于 的值的列表`a,b,c`，例如：

```
(a,   b,   c)
---------------
(0.9, 0.4, 0.6)
(0.5, 0.8, 0.4)
(0.7, 0.4, 0.8)
(0.9, 0.2, 0.1)
... 
```

是否有一些快速的方法可以找到 的最高`k=3`值`y`？

我知道蛮力的方法是枚举`(a,b,c)`计算的每个元组`y`，然后找到y的k个最大值，但是当元组的数量很大时，这种方法似乎效率不高。所以欢迎任何其他方式！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:38:20.787

使用 QuickSelect 平均会给你一个 O(n) 的复杂度：

1.  假设有 N 个元素并且 y=f(a,b,c)，为 (a,b,c) 中的每一个计算长度为 N 的数组 Y（也将 (a,b,c) 的索引添加到 Y供您稍后需要的反向参考）。
2.  在 Y 上使用 QuickSelect 获得 (Nk) 阶统计量，并获得结果 Y。元素 Y[Nk-1] 到 Y[N-1] 将是您的 k 个最大元素。
3.  将 Y[Nk-1] 排序为 Y[N-1] 以获得您的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T03:34:59.093

遍历每个元组。当您读入它时，评估其上的表达式，并随时维护一个包含前 3 个值的数组。

尝试比这更聪明的问题在于，如果您的元组列表很大，那么您的程序花费的时间将完全被阅读它所支配，没有任何聪明可以让您摆脱困境。评估您的表达式和使数组与前三个值保持最新的开销将是完全微不足道的，只需在阅读部分顶部的一些说明。

（至于为什么我建议将您的最高值保存在一个数组中，而不是像堆这样的花哨的东西：当 k=3 时，任何使用大量指令执行的东西的持续开销，或者需要足够的内存并不总是会获得缓存命中，它会超过数据结构提供的任何渐近收益。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T03:37:26.377

不管你做什么，你仍然需要遍历表中的每个元组，所以这至少是一个`O(n)`操作。只有前 3 个值，您可以硬编码一个大小为 3 的数组和`if`所需的检查。

`O(n)`因此，鉴于您必须至少遍历整个表一次，在这种情况下您不会做得更好。

# jquery - 使用 html 响应请求 ajax - Symfony 1.4

> ID：15628799
> 
> 赞同：1
> 
> 时间：2013-03-26T03:23:25.880
> 
> 标签：jquery, symfony1, symfony-1.4, symfony-forms

我想通过在**Symfony 1.4中****返回 html**的方法发出 ajax 请求。一切正常，但我得到一个错误解析 json jquery 并且无处获得特定处理或解析 json 响应。

 **![错误](../Images/3318f34a66087f4644c646f9a32dc19e.png) ![错误](../Images/d7eee740112f3f1258df5940a14dbb16.png)

代码查看**consultas.php** （**模板模块remision**）

```
<html>
...
<div id="results"> </div>
...
<html>
....
<script>
  function Consultar(){
     var form = $("#remisiones_filter");

     $.ajax({
         url:form.attr("action"),  //actions.class.php => method executeAjaxProcessFilter
         data: form.serialize(),
         contentType: 'text/html',
         type:'GET',
         dataType: 'html',
             success: function(result){
                 $('#results').html(result);
             }
     });

     $('#results').fadeIn();
     return false;
     }

 </script> 
```

php **actions.class.php**（**动作模块remision**）

```
public function executeAjaxProcessFilter($request) {
    $this->setLayout(false);   //NO LAYOUT

        $data = "lalala";

        $this->setVar('data',$data);
        $this->setVar('showMatriculas',$showMatriculas);
        /**1**/
      }else
          $this->setVar('data',"error de filtro");

    }
      $this->setVar('data',"Vacio");
  } 
```

并且视图代码html响应**AjaxProcessFilterSuccess.php**（**模板模块remision**）

```
<div>
<?php print_r($data); ?>
</div> 
```

`/**1**/`如果以 return 响应`$this->renderText("lala")`，则返回 OK，并且不会出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:40:02.107

为了使您的变量 $data 在模板中可以访问，它应该定义为

$this->data = 'lalala'; 在行动..

或者，如果数据作为请求变量发送，您可以 echo $sf_params->get('data');**

# playn - PlayN 1.6 默认 maven 项目已部署，但无法在 Android 上运行

> ID：15628800
> 
> 赞同：0
> 
> 时间：2013-03-26T03:23:27.363
> 
> 标签：playn

我无法设置新的 PlayN 项目并在 Android 上运行它。游戏编译，安装，但它不会运行。

我已经使用`mvn archetype:generate -DarchetypeGroupId=com.googlecode.playn -DarchetypeArtifactId=playn-archetype -DarchetypeVersion=1.6`.

然后，甚至没有触及任何单个文件，我将它安装到 Android Emulator 实例使用`mvn -Pandroid install`

然后，我尝试运行该应用程序，但在我尝试运行它之后它就挂起。

我已经用两个不同的模拟器图像进行了尝试，一个使用 Android 2.3.3 ARM，另一个使用 Android 4.2.2 ARM。

android logcat 记录以下内容

登录 4.2.2 ARM Android

```
I/ActivityManager(  289): START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=net.sf.gnumaru.jogo.android/.JogoActivity} from pid 413
W/WindowManager(  289): Failure taking screenshot for (123x164) to layer 21005
I/Choreographer(  413): Skipped 132 frames!  The application may be doing too much work on its main thread.
E/SurfaceFlinger(   37): ro.sf.lcd_density must be defined as a build property
D/dalvikvm( 1235): Not late-enabling CheckJNI (already on)
I/ActivityManager(  289): Start proc net.sf.gnumaru.jogo.android for activity net.sf.gnumaru.jogo.android/.JogoActivity: pid=1235 uid=10047 gids={50047, 1028}
I/dalvikvm( 1235): Turning on JNI app bug workarounds for target SDK version 11...
I/Choreographer(  722): Skipped 40 frames!  The application may be doing too much work on its main thread.
E/Trace   ( 1235): error opening trace file: No such file or directory (2)
I/Choreographer(  289): Skipped 33 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  289): Skipped 44 frames!  The application may be doing too much work on its main thread.
W/SurfaceFlinger(   37): createScreenshotSurface failed (Function not implemented)
I/ActivityManager(  289): Config changes=1480 {1.0 310mcc260mnc en_US ldltr sw320dp w426dp h294dp 120dpi smll land finger qwerty/v/v -nav/h s.9}
I/InputReader(  289): Reconfiguring input devices.  changes=0x00000004
I/InputReader(  289): Device reconfigured: id=0, name='qwerty2', size 240x320, orientation 1, mode 1, display id 0
I/Choreographer(  289): Skipped 86 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  289): Skipped 74 frames!  The application may be doing too much work on its main thread.
I/Choreographer( 1235): Skipped 99 frames!  The application may be doing too much work on its main thread.
E/SurfaceFlinger(   37): ro.sf.lcd_density must be defined as a build property
I/Choreographer(  289): Skipped 52 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  289): Skipped 63 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  289): Skipped 46 frames!  The application may be doing too much work on its main thread.
E/SurfaceFlinger(   37): ro.sf.lcd_density must be defined as a build property
D/libEGL  ( 1235): Emulator without GPU support detected. Fallback to software renderer.
D/libEGL  ( 1235): loaded /system/lib/egl/libGLES_android.so
I/Choreographer( 1235): Skipped 365 frames!  The application may be doing too much work on its main thread.
D/dalvikvm(  722): GC_FOR_ALLOC freed 6832K, 71% free 2947K/10148K, paused 494ms, total 497ms
I/Choreographer(  289): Skipped 39 frames!  The application may be doing too much work on its main thread.
I/dalvikvm-heap(  722): Grow heap (frag case) to 9.125MB for 6410576-byte allocation
D/gralloc_goldfish( 1235): Emulator without GPU emulation detected.
W/dalvikvm( 1235): threadid=13: thread exiting with uncaught exception (group=0x40a71930)
E/AndroidRuntime( 1235): FATAL EXCEPTION: GLThread 87
E/AndroidRuntime( 1235): java.lang.IllegalArgumentException: No configs match configSpec
E/AndroidRuntime( 1235):    at android.opengl.GLSurfaceView$BaseConfigChooser.chooseConfig(GLSurfaceView.java:863)
E/AndroidRuntime( 1235):    at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:1024)
E/AndroidRuntime( 1235):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1401)
E/AndroidRuntime( 1235):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240)
W/ActivityManager(  289):   Force finishing activity net.sf.gnumaru.jogo.android/.JogoActivity
W/WindowManager(  289): Failure taking screenshot for (109x145) to layer 21020
D/dalvikvm(  722): GC_FOR_ALLOC freed 1K, 10% free 9206K/10148K, paused 378ms, total 379ms
D/dalvikvm(  722): GC_CONCURRENT freed <1K, 10% free 9207K/10148K, paused 7ms+5ms, total 116ms
D/dalvikvm(  289): GC_FOR_ALLOC freed 199K, 17% free 5336K/6356K, paused 183ms, total 190ms
I/dalvikvm-heap(  289): Grow heap (frag case) to 5.435MB for 89296-byte allocation
D/dalvikvm(  289): GC_FOR_ALLOC freed 11K, 17% free 5411K/6444K, paused 174ms, total 174ms
W/SurfaceFlinger(   37): createScreenshotSurface failed (Function not implemented)
I/ActivityManager(  289): Config changes=1480 {1.0 310mcc260mnc en_US ldltr sw320dp w320dp h401dp 120dpi smll port finger qwerty/v/v -nav/h s.10}
W/ActivityManager(  289): Activity pause timeout for ActivityRecord{40d77818 u0 net.sf.gnumaru.jogo.android/.JogoActivity}
I/ActivityManager(  289): Displayed net.sf.gnumaru.jogo.android/.JogoActivity: +2s593ms
I/Choreographer(  289): Skipped 1027 frames!  The application may be doing too much work on its main thread.
W/IInputConnectionWrapper(  413): showStatusIcon on inactive InputConnection
I/Choreographer(  289): Skipped 494 frames!  The application may be doing too much work on its main thread.
I/Choreographer( 1235): Skipped 1217 frames!  The application may be doing too much work on its main thread.
I/InputReader(  289): Reconfiguring input devices.  changes=0x00000004
I/InputReader(  289): Device reconfigured: id=0, name='qwerty2', size 240x320, orientation 0, mode 1, display id 0
I/InputReader(  289): Reconfiguring input devices.  changes=0x00000004
I/InputReader(  289): Device reconfigured: id=0, name='qwerty2', size 240x320, orientation 0, mode 1, display id 0
I/Choreographer(  289): Skipped 360 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  289): Skipped 34 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  289): Skipped 41 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  289): Skipped 442 frames!  The application may be doing too much work on its main thread.
E/SurfaceFlinger(   37): ro.sf.lcd_density must be defined as a build property
I/Choreographer(  413): Skipped 793 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  413): Skipped 59 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  289): Skipped 38 frames!  The application may be doing too much work on its main thread.
D/dalvikvm(  722): GC_FOR_ALLOC freed 6828K, 71% free 2948K/10148K, paused 171ms, total 193ms
I/dalvikvm-heap(  722): Grow heap (frag case) to 9.125MB for 6410576-byte allocation
D/dalvikvm(  722): GC_CONCURRENT freed 1K, 10% free 9207K/10148K, paused 24ms+5ms, total 143ms
D/dalvikvm(  289): GC_EXPLICIT freed 85K, 16% free 5444K/6444K, paused 7ms+35ms, total 204ms
I/Choreographer(  722): Skipped 1352 frames!  The application may be doing too much work on its main thread.
I/Choreographer(  289): Skipped 39 frames!  The application may be doing too much work on its main thread.
D/ExchangeService(  661): Received deviceId from Email app: null
D/ExchangeService(  661): !!! deviceId unknown; stopping self and retrying
D/ExchangeService(  661): !!! EAS ExchangeService, onCreate
D/ExchangeService(  661): !!! EAS ExchangeService, onStartCommand, startingUp = false, running = false
D/ExchangeService(  661): !!! EAS ExchangeService, onStartCommand, startingUp = true, running = false
W/ActivityManager(  289): Unable to start service Intent { act=com.android.email.ACCOUNT_INTENT } U=0: not found
D/ExchangeService(  661): !!! Email application not found; stopping self
W/ActivityManager(  289): Unable to start service Intent { act=com.android.email.ACCOUNT_INTENT } U=0: not found
E/ActivityThread(  661): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cff4a0 that was originally bound here
E/ActivityThread(  661): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cff4a0 that was originally bound here
E/ActivityThread(  661):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
E/ActivityThread(  661):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
E/ActivityThread(  661):    at android.app.ContextImpl.bindService(ContextImpl.java:1418)
E/ActivityThread(  661):    at android.app.ContextImpl.bindService(ContextImpl.java:1407)
E/ActivityThread(  661):    at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
E/ActivityThread(  661):    at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
E/ActivityThread(  661):    at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
E/ActivityThread(  661):    at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
E/ActivityThread(  661):    at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
E/ActivityThread(  661):    at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
E/ActivityThread(  661):    at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
E/ActivityThread(  661):    at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
E/ActivityThread(  661):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
E/ActivityThread(  661):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
E/ActivityThread(  661):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
E/ActivityThread(  661):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
E/ActivityThread(  661):    at java.lang.Thread.run(Thread.java:856)
E/StrictMode(  661): null
E/StrictMode(  661): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cff4a0 that was originally bound here
E/StrictMode(  661):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
E/StrictMode(  661):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
E/StrictMode(  661):    at android.app.ContextImpl.bindService(ContextImpl.java:1418)
E/StrictMode(  661):    at android.app.ContextImpl.bindService(ContextImpl.java:1407)
E/StrictMode(  661):    at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
E/StrictMode(  661):    at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
E/StrictMode(  661):    at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
E/StrictMode(  661):    at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
E/StrictMode(  661):    at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
E/StrictMode(  661):    at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
E/StrictMode(  661):    at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
E/StrictMode(  661):    at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
E/StrictMode(  661):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
E/StrictMode(  661):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
E/StrictMode(  661):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
E/StrictMode(  661):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
E/StrictMode(  661):    at java.lang.Thread.run(Thread.java:856)
W/ActivityManager(  289): Unbind failed: could not find connection for android.os.BinderProxy@40e15c40
E/ActivityThread(  661): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cff0a8 that was originally bound here
E/ActivityThread(  661): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cff0a8 that was originally bound here
E/ActivityThread(  661):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
E/ActivityThread(  661):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
E/ActivityThread(  661):    at android.app.ContextImpl.bindService(ContextImpl.java:1418)
E/ActivityThread(  661):    at android.app.ContextImpl.bindService(ContextImpl.java:1407)
E/ActivityThread(  661):    at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
E/ActivityThread(  661):    at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
E/ActivityThread(  661):    at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
E/ActivityThread(  661):    at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
E/ActivityThread(  661):    at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
E/ActivityThread(  661):    at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
E/ActivityThread(  661):    at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
E/ActivityThread(  661):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
E/ActivityThread(  661):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
E/ActivityThread(  661):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
E/ActivityThread(  661):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
E/ActivityThread(  661):    at java.lang.Thread.run(Thread.java:856)
E/StrictMode(  661): null
E/StrictMode(  661): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cff0a8 that was originally bound here
E/StrictMode(  661):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
E/StrictMode(  661):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
E/StrictMode(  661):    at android.app.ContextImpl.bindService(ContextImpl.java:1418)
E/StrictMode(  661):    at android.app.ContextImpl.bindService(ContextImpl.java:1407)
E/StrictMode(  661):    at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
E/StrictMode(  661):    at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
E/StrictMode(  661):    at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
E/StrictMode(  661):    at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
E/StrictMode(  661):    at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
E/StrictMode(  661):    at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
E/StrictMode(  661):    at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
E/StrictMode(  661):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
E/StrictMode(  661):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
E/StrictMode(  661):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
E/StrictMode(  661):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
E/StrictMode(  661):    at java.lang.Thread.run(Thread.java:856)
D/dalvikvm(  661): GC_CONCURRENT freed 409K, 18% free 2512K/3060K, paused 5ms+26ms, total 76ms
W/ActivityManager(  289): Unbind failed: could not find connection for android.os.BinderProxy@40e25018 
```

登录 2.3.3 ARM ANDROID

```
I/ActivityManager(   70): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=net.sf.gnumaru.jogo.android/.JogoActivity } from pid 227
I/ActivityManager(   70): Start proc net.sf.gnumaru.jogo.android for activity net.sf.gnumaru.jogo.android/.JogoActivity: pid=417 uid=10034 gids={}
I/ARMAssembler(   70): generated scanline__00000177:03515104_00001002_00000000 [ 87 ipp] (110 ins) at [0x43bab6f0:0x43bab8a8] in 1571380 ns
D/dalvikvm(  417): Trying to load lib /data/data/net.sf.gnumaru.jogo.android/lib/libplayn-android-nativelib.so 0x40514c78
D/dalvikvm(  417): Added shared lib /data/data/net.sf.gnumaru.jogo.android/lib/libplayn-android-nativelib.so 0x40514c78
D/dalvikvm(  417): No JNI_OnLoad found in /data/data/net.sf.gnumaru.jogo.android/lib/libplayn-android-nativelib.so 0x40514c78, skipping init
I/WindowManager(   70): Setting rotation to 1, animFlags=1
I/ActivityManager(   70): Config changed: { scale=1.0 imsi=310/260 loc=en_US touch=3 keys=2/1/2 nav=1/1 orien=2 layout=17 uiMode=17 seq=6}
I/ActivityManager(   70): Displayed net.sf.gnumaru.jogo.android/.JogoActivity: +1s834ms
D/libEGL  (  417): egl.cfg not found, using default config
D/libEGL  (  417): loaded /system/lib/egl/libGLES_android.so
W/dalvikvm(  417): threadid=11: thread exiting with uncaught exception (group=0x40015560)
E/AndroidRuntime(  417): FATAL EXCEPTION: GLThread 12
E/AndroidRuntime(  417): java.lang.IllegalArgumentException: No configs match configSpec
E/AndroidRuntime(  417):    at android.opengl.GLSurfaceView$BaseConfigChooser.chooseConfig(GLSurfaceView.java:763)
E/AndroidRuntime(  417):    at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:919)
E/AndroidRuntime(  417):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1264)
E/AndroidRuntime(  417):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1118)
W/ActivityManager(   70):   Force finishing activity net.sf.gnumaru.jogo.android/.JogoActivity
W/InputManagerService(   70): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@40952df0 (uid=10034 pid=417)
W/InputManagerService(   70): Client not active, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@4079e5f8
W/ActivityManager(   70): Activity pause timeout for HistoryRecord{4066ab48 net.sf.gnumaru.jogo.android/.JogoActivity}
D/dalvikvm(   70): GC_EXPLICIT freed 208K, 61% free 4205K/10567K, external 809K/1222K, paused 307ms
I/WindowManager(   70): Setting rotation to 0, animFlags=1
I/ActivityManager(   70): Config changed: { scale=1.0 imsi=310/260 loc=en_US touch=3 keys=2/1/2 nav=1/1 orien=1 layout=17 uiMode=17 seq=7}
I/ContactsDatabaseHelper(  224): Switching to locale en_US
D/dalvikvm(  224): GC_CONCURRENT freed 430K, 53% free 2794K/5895K, external 410K/517K, paused 10ms+9ms
D/dalvikvm(   70): GC_EXPLICIT freed 26K, 61% free 4199K/10567K, external 807K/1222K, paused 209ms
I/ContactsDatabaseHelper(  224): Locale change completed in 2358ms 
```

我认为我的问题类似于以下问题：

[playn内置的android工件已部署但未运行](https://stackoverflow.com/questions/7931521/android-artifact-built-in-playn-deploied-but-not-running)

但是这个问题对我没有帮助。

我正在使用 Linux Ubuntu 12.10 X86_64、最新的 android sdk (21.1) 和最新的 maven (3.0.5)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T02:04:19.353

我已经解决了我的问题。

Android 模拟器不（或不）支持 OpenGL ES 2.0，PlayN 强迫您使用它。

我尝试在真机上部署和运行该应用程序，它工作正常。

奇怪的是，android 模拟器的最新版本（见下面的链接）应该通过翻译而不是指令模拟来支持 OpenGL ES 2.0：模拟器 GL ES 指令被翻译成普通的 OpenGL 指令并由主机系统 GPU 直接处理，其中模拟器在跑。

[http://www.learnopengles.com/android-emulator-now-supports-native-opengl-es2-0/](http://www.learnopengles.com/android-emulator-now-supports-native-opengl-es2-0/)

但是，我没有设法让它在 Ubuntu 12.10 X86_64 上运行，而且我还没有在 MS Windows 上尝试过。

# knockout.js - 是否有任何理由同时拥有淘汰赛映射插件和微风？

> ID：15628802
> 
> 赞同：0
> 
> 时间：2013-03-26T03:23:34.287
> 
> 标签：knockout.js, breeze, single-page-application, durandal

我正在增加单页应用程序，似乎 Breeze 会自动处理使东西可观察的问题。那么 - 如果我使用微风来获取数据，是否有必要使用映射插件？

如果是这样，你能解释一下这两者的功能吗？

据我了解，淘汰映射插件接受和对象并将其所有属性/子属性转换为可观察对象，因此您不必手动执行此操作。

Breeze 处理数据访问并为您提供已经是可观察的对象，因此不需要映射插件。

这听起来对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:15:36.197

如果您已经在使用 Breeze，我想不出任何充分的理由来使用淘汰映射插件，除非它是为了处理不受 Breeze 管理且需要映射的可观察对象。

正如您所指出的，Breeze 将其实体调整为它配置为使用的任何“modelLibrary”。即 Knockout、Angular、Backbone 等，因此所有必要的映射都将由 Breeze 处理传入和传出数据。

# git - 为什么我不能使用 Git 恢复此更改？

> ID：15628805
> 
> 赞同：0
> 
> 时间：2013-03-26T03:23:43.530
> 
> 标签：git

我有一个使用 Spring Roo 的项目。Spring Roo 更改了一些 aj 文件。我试图通过 git tortoise 上下文菜单恢复它们，但它给了我一个空列表来恢复。

当我使用

```
$git reset --hard 
```

我仍然无法还原更改。

```
c:\src\main\java\com\company\eorder\server\domain>git status
# On branch master
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   ../../../../../../../../../mockup/app/view/MyViewport.js
#       modified:   ../../../../../../../../../mockup/app/view/XXX_test_card.js
#       deleted:    ../../../../../../webapp/app/dao/RequisitionDataLocalStorageDAO.js
#       deleted:    ../../../../../../webapp/app/model/CCPhysician.js
#       deleted:    ../../../../../../webapp/app/model/ClinicalInfo.js
#       deleted:    ../../../../../../webapp/app/model/FileAttachment.js
#       deleted:    ../../../../../../webapp/app/model/Modality.js
#       deleted:    ../../../../../../webapp/app/model/Order.js
#       deleted:    ../../../../../../webapp/app/model/Patient.js
#       deleted:    ../../../../../../webapp/app/model/Physician.js
#       deleted:    ../../../../../../webapp/app/model/ReadingDoctor.js
#       deleted:    ../../../../../../webapp/app/model/RequisitionData.js
#       deleted:    ../../../../../../webapp/app/model/RequisitionTestForm.js
#       deleted:    ../../../../../../webapp/app/model/RequistionData_TMP.js
#       deleted:    ../../../../../../webapp/app/model/Specimen.js
#       deleted:    ../../../../../../webapp/app/model/Technologist.js
#       deleted:    ../../../../../../webapp/app/store/RequisitionLocalStorageStore.js
#       deleted:    ../../../../../../webapp/app/view/imaging_test_card.js
#       modified:   ../../../../../../../../../src2/.classpath
#       modified:   ../../../../../../../../../src2/.project
#       modified:   ../../../../../../../../../src2/.settings/org.eclipse.jdt.core.prefs
#       modified:   ../../../../../../../../../src2/.settings/org.eclipse.wst.common.component
#       modified:   ../../../../../../../../../src2/.settings/org.eclipse.wst.common.project.facet.core.xml
#       modified:   ../../../../../../../../../src2/eOrder.roo
#       modified:   ../../../../../../../../../src2/log.roo
#       modified:   ../../../../../../../../../src2/pom.xml
#       modified:   ../../../../../../../../../src2/src/main/java/com/company/eorder/server/domain/DiagnosticOrderLine.java
#       modified:   ../../../../../../../../../src2/src/main/java/com/company/eorder/server/domain/DiagnosticOrderLine_Roo_JavaBean.aj
#       modified:   ../../../../../../../../../src2/src/main/java/com/company/eorder/server/domain/Physician.java
#       modified:   ../../../../../../../../../src2/src/main/java/com/company/eorder/server/domain/Physician_Roo_JavaBean.aj
#       modified:   ../../../../../../../../../src2/src/main/java/com/company/eorder/server/domain/Requisition.java
#       modified:   ../../../../../../../../../src2/src/main/java/com/company/eorder/server/domain/Requisition_Roo_JavaBean.aj
#       modified:   ../../../../../../../../../src2/src/main/java/com/company/eorder/web/ApplicationConversionServiceFactoryBean_Roo_ConversionService.aj
#       modified:   ../../../../../../../../../src2/src/main/java/com/company/eorder/web/RequisitionController_Roo_Controller.aj
#       modified:   ../../../../../../../../../src2/src/main/resources/META-INF/persistence.xml
#       modified:   ../../../../../../../../../src2/src/main/resources/META-INF/spring/applicationContext.xml
#       modified:   ../../../../../../../../../src2/src/main/resources/META-INF/spring/database.properties
#       modified:   ../../../../../../../../../src2/src/main/resources/log4j.properties
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/i18n/application.properties
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/spring/webmvc-config.xml
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/codesystems/create.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/codesystems/list.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/codesystems/show.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/codesystems/update.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/diagnosticorderlines/create.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/diagnosticorderlines/list.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/diagnosticorderlines/show.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/diagnosticorderlines/update.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/footer.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/loincs/create.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/loincs/list.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/loincs/show.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/loincs/update.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/menu.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/orderlineparameters/create.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/orderlineparameters/list.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/orderlineparameters/show.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/orderlineparameters/update.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/orderlinesources/create.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/orderlinesources/list.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/orderlinesources/show.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/orderlinesources/update.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/orderspecimens/create.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/orderspecimens/list.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/orderspecimens/show.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/orderspecimens/update.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/patients/create.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/patients/list.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/patients/show.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/patients/update.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/physicians/create.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/physicians/list.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/physicians/show.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/physicians/update.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/requisitions/create.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/requisitions/list.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/requisitions/show.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/requisitions/update.jspx
#       modified:   ../../../../../../../../../src2/src/main/webapp/WEB-INF/web.xml
#       modified:   ../../../../../../../../../src2/src/test/java/com/company/eorder/server/domain/PhysicianDataOnDemand_Roo_DataOnDemand.aj
#       modified:   ../../../../../../../../../src2/src/test/java/com/company/eorder/server/domain/RequisitionDataOnDemand_Roo_DataOnDemand.aj
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       ../../../../../../../../app_link.bat
#       ../../../../../../../../../src2/src/main/java/com/company/eorder/server/domain/RequisitionFormData.java
#       ../../../../../../../../../src2/src/main/java/com/company/eorder/server/domain/RequisitionFormData_Roo_Configurable.aj
#       ../../../../../../../../../src2/src/main/java/com/company/eorder/server/domain/RequisitionFormData_Roo_JavaBean.aj
#       ../../../../../../../../../src2/src/main/java/com/company/eorder/server/domain/RequisitionFormData_Roo_Jpa_ActiveRecord.aj
#       ../../../../../../../../../src2/src/main/java/com/company/eorder/server/domain/RequisitionFormData_Roo_Jpa_Entity.aj
#       ../../../../../../../../../src2/src/main/java/com/company/eorder/server/domain/RequisitionFormData_Roo_Json.aj
#       ../../../../../../../../../src2/src/main/java/com/company/eorder/server/domain/RequisitionFormData_Roo_ToString.aj
#       ../../../../../../../../../src2/src/main/java/com/company/eorder/web/RequisitionFormDataController.java
#       ../../../../../../../../../src2/src/main/java/com/company/eorder/web/RequisitionFormDataController_Roo_Controller.aj
#       ../../../../../../../../../src2/src/main/java/com/company/eorder/web/RequisitionFormDataController_Roo_Controller_Json.aj
#       ../../../../../../../../../src2/src/main/webapp/WEB-INF/views/requisitionformdatas/
#       ../../../../../../../../../src2/src/test/java/com/company/eorder/server/domain/RequisitionFormDataDataOnDemand.java
#       ../../../../../../../../../src2/src/test/java/com/company/eorder/server/domain/RequisitionFormDataDataOnDemand_Roo_Configurable.aj
#       ../../../../../../../../../src2/src/test/java/com/company/eorder/server/domain/RequisitionFormDataDataOnDemand_Roo_DataOnDemand.aj
#       ../../../../../../../../../src2/src/test/java/com/company/eorder/server/domain/RequisitionFormDataIntegrationTest.java
#       ../../../../../../../../../src2/src/test/java/com/company/eorder/server/domain/RequisitionFormDataIntegrationTest_Roo_Configurable.aj
#       ../../../../../../../../../src2/src/test/java/com/company/eorder/server/domain/RequisitionFormDataIntegrationTest_Roo_IntegrationTest.aj
#       ../../../../../../../../../src2/target/
no changes added to commit (use "git add" and/or "git commit -a") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:30:29.973

您可以使用`git checkout <file>`来重置尚未暂存的文件更改。

如果分支之间有歧义，`--`请在文件名之前添加。

# java - 使用 equalsIgnoreCase 用覆盖的等于覆盖 hashCode 来检查相等性

> ID：15628807
> 
> 赞同：9
> 
> 时间：2013-03-26T03:23:48.003
> 
> 标签：java, overriding, equals, hashcode

我目前有一个`equals(Object)`看起来像这样的覆盖：

```
@Override
public boolean equals(Object o) {
    if (o == this) return true;
    if (! (o instanceof Player)) return false;
    Player p = (Player) o;
    return getFirstName().equalsIgnoreCase(p.getFirstName()) && 
            getLastName().equalsIgnoreCase(p.getLastName());
} 
```

我`hashCode()`目前看起来像这样：

```
@Override
public int hashCode() {
    int result = 17;
    result = 31 * result + getFirstName().toLowerCase().hashCode();
    result = 31 * result + getLastName().toLowerCase().hashCode();
    return result;
} 
```

我的问题是关于我重写的 hashCode() 方法。我知道如果 equals(Object) 方法认为两个对象相等，我需要 hashCode() 返回相同的值。我的直觉告诉我在*某些*情况下这个 hashCode() 会违反合同。

是否有一种可接受的方式在覆盖的 equals(Object) 方法中使用 equalsIgnoreCase(String) 方法并生成不违反合同的哈希码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T14:57:23.767

```
@Override
public int hashCode() {
    int result = 17;
    result = 31 * result + characterwiseCaseNormalize(getFirstName()).hashCode();
    result = 31 * result + characterwiseCaseNormalize(getLastName()).hashCode();
    return result;
}

private static String characterwiseCaseNormalize(String s) {
    StringBuilder sb = new StringBuilder(s);
    for(int i = 0; i < sb.length(); i++) {
        sb.setCharAt(i,Character.toLowerCase(Character.toUpperCase(sb.charAt(i))));
    }
    return sb.toString();
} 
```

这`hashCode`将与`equals`定义的 using一致`equalsIgnoreCase`。原则上，根据 的合同`equalsIgnoreCase`，这似乎依赖于

```
Character.toLowerCase(Character.toUpperCase(c1))==Character.toLowerCase(Character.toUpperCase(c2)) 
```

每当

```
Character.toLowerCase(c1)==Character.toLowerCase(c2). 
```

我没有证据证明这是真的，但是[equalsIgnoreCase 的 OpenJDK 实现](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/String.java#String.regionMatches%28boolean%2Cint%2Cjava.lang.String%2Cint%2Cint%29)实际上与这种方法一致；它检查对应的字符是否相等，然后检查它们的大写版本是否相等，然后检查*大写版本的小写版本*是否相等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T04:09:36.890

你说的对。我们可以遍历所有单字符字符串，并`s1,s2`找到`s1.equalsIgnoreCase(s2) && !s1.toLowerCase().equals(s2.toLowerCase())`. 有相当多的对。例如

```
s1=0049   'LATIN CAPITAL LETTER I'
s2=0131   'LATIN SMALL LETTER DOTLESS I'

s1.lowercase = 0069   'LATIN SMALL LETTER I'
s2.lowercase = 0131   itself 
```

它还取决于语言环境：对于 s1，*土耳其语和阿塞拜疆语使用 U+0131 表示小写*（参见[http://www.fileformat.info/info/unicode/char/0049/index.htm](http://www.fileformat.info/info/unicode/char/0049/index.htm)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T14:53:09.193

在编写`hashCode()`一致的方面`equals()`，您应该在两者中使用`Character`基于案例映射，或者在两者中使用基于案例映射`String`。在我的另一个答案中，我展示了如何编写基于`hashCode()`using`Character`的案例映射；但还有另一种解决方案，即`equals()`改为使用`String`基于 - 的案例映射。（请注意，`String.equalsIgnoreCase()`使用`Character`基于 - 的案例映射。）

```
@Override
public boolean equals(Object o) {
    if (o == this) return true;
    if (! (o instanceof Player)) return false;
    Player p = (Player) o;
    return getFirstName().toLowerCase().equals(p.getFirstName().toLowerCase()) && 
        getLastName().toLowerCase().equals(p.getLastName().toLowerCase());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T04:10:19.947

你担心是对的。 [阅读合同`equalsIgnoreCase`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)。

如果以下至少一项为真，则两个字符 c1 和 c2 被认为是相同的忽略大小写：

*   这两个字符相同（由 == 运算符比较）
*   将方法 Character.toUpperCase(char) 应用于每个字符会产生相同的结果
*   将方法 Character.toLowerCase(char) 应用于每个字符会产生相同的结果

所以，如果有一个字符在转换为*大写*时是相等的，但不是相反，你就会遇到麻烦。

让我们以德语字符[ß](http://en.wikipedia.org/wiki/%C3%9F#Substitution_and_all_caps)为例，它在转换为大写时变成[两个字符序列。`SS`](http://www.fileformat.info/info/unicode/char/df/index.htm)这意味着字符串“ß”和“SS”是“equalsIgnoreCase”，但在转换为小写时不会具有相同的表示！

所以你的方法在这里被打破了。不幸的是，我不确定您是否能够在这里设计一个充分表达您需要的 hashCode。

# lua - 在lua中删除数组中的项目

> ID：15628814
> 
> 赞同：0
> 
> 时间：2013-03-26T03:24:15.913
> 
> 标签：lua, coronasdk

在我尝试创建的游戏中，我有玩家可以触摸的对象。如果这些物体被触摸，舞台将被清除。由于有多个对象，我将所有内容都放在一个数组中，我需要从数组中删除触摸的对象，这样它只会在数组为空时调用 stage clear。这是我目前正在尝试使用的代码：

```
if event.phase == "ended" then
    for i=#objArray,0,-1 do
        if(#objArray ~= 0) then
            objArray[i] = table.remove(objArray)
        else
            storyboard.gotoScene("ClearStage", fade, 400)
            timer.pause(timerCount)
        end
    end
end 
```

这样做的问题是，数组通过一次循环后立即变为 0。另外，我认为我不应该是 objArray 中的值。它应该是被触摸的对象，但我不知道如何实现它。我需要做类似的事情：

```
if objArray > 0 then
      --remove touched object from array
else
      --go to clear
end 
```

我刚开始使用数组和循环，所以我仍然很困惑，所以我希望有人能帮助我。当数组大于 0 时，如何告诉我的数组仅删除触摸的对象？

其实，没关系。我在调整我的代码时找到了解决方案。这是我最终得到的代码：

```
if(#objArray ~= 0) then
        objArray[0] = table.remove(objArray)
        if(#objArray == 0) then
            storyboard.gotoScene("ClearStage", fade, 400)
            timer.pause(timerCount)
        end
    end 
```

基本上，我不再需要 for 循环，我使用 0 索引（如果我的理解正确的话），如下所示：objArray[0] 从数组中删除对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:47:17.577

我想你可能删除了你碰过的对象。试试这个

```
display.remove(event.target);event.target=nil 
```

删除后检查您的数组大小

```
if #objArray == 0 then
    --here you do your array clear work
    table.remove (objArray )
 end 
```

# html - 将整个 Web 文档存储在数据库中的任何简单方法？

> ID：15628816
> 
> 赞同：0
> 
> 时间：2013-03-26T03:24:28.493
> 
> 标签：html, database, web

我设计 CMS 的方式是，我试图为每个 db 条目创建一个 Web 文档。这样我就可以获取数据库条目并将其放入浏览器。对于 html 文档来说，这很容易，但当然文档中包含图片和音频以及各种其他内容，这使事情变得复杂。那么您对此有何看法，我是否应该为每个 Web 文档设置一个表格，将文档作为一行，然后将一行用于图像等？有小费吗？还是我应该完全重新考虑这种方法？

*这是一个个人项目，所以可扩展性等不是一个大问题。

# ruby-on-rails - 显示选定控制器的部分

> ID：15628817
> 
> 赞同：0
> 
> 时间：2013-03-26T03:24:35.667
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我想要一段代码（一个购物车）显示在我的标题中的索引上，并显示 2 个控制器的页面，但不适用于我的应用程序的任何其他部分。

我目前的计划是将这段代码放在一个部分中，并且：

```
 = render partial 'layouts/cart' if the params[:controller] == "Products" || params[:controller] == "Categories" 
```

有没有更好的办法？我正在使用 Rails 3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:27:04.987

（**我正在使用erb，我不知道haml，但想法应该可以简单地转移**）

您可以使用[content_for](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for)来解决您的问题。

将此代码添加到您希望购物车显示的视图文件中。

**Products/show.html.erb Products/index.html.erb Categories/show.html.erb,Categories/index.html.erb**（如您的问题）。

```
<% content_for :cart,  render('layouts/cart') %> 
```

现在调用：

```
<%= yield :cart %> 
```

在您的**application.html.erb**中（或您希望购物车出现的任何地方）。

**示例**：

布局/应用：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Testapp</title>
    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
  </head>
  <body>
    <%= yield :cart%>
    <%= yield %>
  </body>
</html> 
```

产品/展示：

```
<% content_for :cart,  render('layouts/cart') %>

<p>I have content_for call so my appilication.html will dispaly cart partial</p> 
```

产品/索引：

```
<p>I don't have content_for call so my appilication.html will not dispaly cart partial</p> 
```

布局/购物车：

```
<h1>Here I am!</h1> 
```

访问产品索引路径将产生：

```
I don't have content_for call so my appilication.html will not dispaly cart partial 
```

参观产品展示路径将产生：

```
Here I am!
I have content_for call so my appilication.html will dispaly cart partial 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:31:07.867

你在那里做的事情本质上没有任何问题，但如果你需要把它放在很多地方，它可能容易出错。

你可以离开

```
= render partial 'layouts/cart' 
```

你想在哪里使用它并放置

```
if the params[:controller] == "Products" || params[:controller] == "Categories" 
```

在部分中，因此您仅将逻辑保留在一个地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T03:36:58.360

您应该尝试将逻辑排除在您的视图之外（包括部分视图）。因此，最好的方法是将其卸载到帮助程序中。

### 助手/application_helper.rb

```
module ApplicationHelper
  def show_cart
    render 'layouts/cart' if ['Products', 'Categories'].include?(params[:controller])
  end
end 
```

### 在视图中

```
<%= show_cart %> 
```

# mysql - 使用 MySQL join 获取关系数据？

> ID：15628820
> 
> 赞同：1
> 
> 时间：2013-03-26T03:24:44.150
> 
> 标签：mysql, sql, select, join

我一直无法找到关于如何使用连接来完成 MySQL 中的某个目标的良好参考。

我有一个 pages 表、一个 categories 表和一个 pagecategories 表。每个的大致结构：

页面：'id'、'name'、'content' 类别：'id'、'name' pagecategories：'pageid'、'categoryid'

我希望能够使用查询来获取页面的类别，以及某个类别中的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:26:56.250

```
SELECT  a.name, a.content,
        b.name as CategoryName
FROM    pages a
        INNER JOIN pagecategories b
            ON a.ID = b.pageID
        INNER JOIN categories c
            ON b.categoryID = c.ID
-- WHERE a.ID = IDHERE       -- <<== if you want to filter for a specific page 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# jquery - HTML 表单显示字段取决于选择的下拉列表

> ID：15628824
> 
> 赞同：3
> 
> 时间：2013-03-26T03:25:32.683
> 
> 标签：jquery, html

这里有问题。尝试根据下拉框中选择的内容显示某些字段。我已经查看了堆栈并尝试在此处编辑代码：http: [//jsfiddle.net/tarleton/p8ARq/15/](http://jsfiddle.net/tarleton/p8ARq/15/) 以使用我的代码。我似乎无法让它工作......这里的新手任何帮助表示赞赏。

```
$("select").change(function () {
    // hide all optional elements
    $('.optional').css('display','none');

    $("select option:selected").each(function () {
        if($(this).name() == "test") {
            $('.test').css('display','block');
        } else if($(this).val() == "test2") {
            $('.test2').css('display','block');
        }
    });
}); 
```

HTML：

```
<form class="contact" name="contact" action="#" method="post">
       <div id="styled-select">
           <select>
            <option name="test" value="Option 1" >Referral</option>
              <option name="test2"value="Option 2">Other</option>
              </select>
       </div>
          <input class="optional test" name="revealtest" style="display:none;" class="hidden-txt">

       <input class="optional other" name="revealtest2" value="" style="display:none;" class="hidden-txt">

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:29:39.640

没有`.name`jQuery。

您可以使用`.attr()`

```
if($(this).attr('name') 
```

并且`class`可以应用于`div`或其他标签。

因此，请指定要选择的内容，如下所示，

```
$('input.test2').css('display','block'); 
$('input.test').css('display','block'); 
```

还将所有内容包装`class`在单个`class`属性中并删除`inline style`，因为`jQuery`您也在使用`.hide()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:38:10.073

这是我想出的解决方案[http://jsfiddle.net/burn123/p8ARq/34/](http://jsfiddle.net/burn123/p8ARq/34/)

我注意到的主要事情是你有`style="display:hide"`。因为这是一种内联样式，所以不会轻易删除。您还有一个不必要的`optional`类，它`display:none`为元素添加了第二个。所以我删除了这两个并将CSS设置为

```
.other, .referral {
  display:none;
} 
```

所以`display`只切换了一次。您的 jQuery 在大多数情况下都很好。您需要将推荐设置为`$(this).val()`像您所做的那样`other`。`else`此外，如果您希望在选择其他内容时隐藏文本框，则需要一个结尾。我用`fadeToggle`而不是`css("display", "block")`给它一点过渡。可能有一种更有效的代码方式来实现这一点，但我对 jquery 还是很陌生；）

希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:07:50.503

您可以使用 jQuery 来隐藏您的所有控件，`$("your_control").hide()`或者`$("your_control").show()`，我只是在[jsFiddle更新您的示例](http://jsfiddle.net/p8ARq/38/)

# wpf - 在wpf中绑定时如何使自定义的依赖属性可以实时更改？

> ID：15628825
> 
> 赞同：0
> 
> 时间：2013-03-26T03:25:33.123
> 
> 标签：wpf, binding, real-time, dependency-properties

当我们像这样将 textblock.Text 与 Textbox 的文本长度绑定时

```
<TextBox x:Name="txtName" Grid.Row="0" />
<TextBlock Text="{Binding ElementName=txtName, Path=Text.Length}" Grid.Row="1" /> 
```

Textblock 的 Text 会随着 txtName 的文本实时变化。但是当我在 WPF 用户控件中定义一个新的 DependencyProperty 时，如下所示：

```
 //MyCustomUC.xaml.cs
    static FrameworkPropertyMetadata propertymetadata = new FrameworkPropertyMetadata("Comes as Default", FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, new PropertyChangedCallback(MyCustom_PropertyChanged), new CoerceValueCallback(MyCustom_CoerceValue), false, UpdateSourceTrigger.PropertyChanged);

    public static readonly DependencyProperty MyCustomProperty = DependencyProperty.Register("MyCustom", typeof(string), typeof(MyCustomUC), propertymetadata, new ValidateValueCallback(MyCustom_Validate));

    public string MyCustom
    {
        get
        {
            return this.GetValue(MyCustomProperty) as string;
        }
        set
        {
            this.SetValue(MyCustomProperty, value);
        }
    } 
```

并将其绑定到文本框

```
//MyCustomUC.xaml
<UserControl ... x:Name="ucs" ...>
<TextBox Text="{Binding ElementName=ucs, Path=MyCustom}"></TextBox>
</UserControl>

//MainWindow.xaml
<local:MyCustomUC x:Name="ucust" Grid.Row="0" />
<TextBox x:Name="tbChange" Text="{Binding ElementName=ucust, Path=MyCustom}" Grid.Row="1"/> 
```

在文本框失去焦点之前，似乎“MyCustom”不会改变。当文本框中的文本实时更改时，如何更改它？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:36:51.417

```
<TextBox x:Name="tbChange" Text="{Binding ElementName=ucust, Path=MyCustom, UpdateSourceTrigger=PropertyChanged}" Grid.Row="1"/> 
```

# apache - htaccess 为单个文件设置 mimetype

> ID：15628826
> 
> 赞同：10
> 
> 时间：2013-03-26T03:25:45.673
> 
> 标签：apache, .htaccess

在 .htaccess 文件中，可以为给定的扩展设置 mimetype，例如：

```
AddType application/javascript .js 
```

如何为单个文件而不是扩展名设置 mimetype？我有一个 Javascript 需要与同一文件夹中的其他 Javascript 文件不同的 mimetype。

```
AddType application/javascript .js
AddType application/ecmascript specialfile.js 
```

第二行不起作用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T05:25:11.913

`<files>`在为其添加类型之前，您可以使用容器来匹配文件的名称：

```
<Files specialfile.js>
    AddType application/ecmascript .js
</Files> 
```

# c++ - 放置模板类定义的适当位置

> ID：15628830
> 
> 赞同：1
> 
> 时间：2013-03-26T03:25:59.877
> 
> 标签：c++

在英镑定义之外定义您的类是否合适，或者它们是否进入英镑定义？我在问什么的例子可以在下面看到。

```
#ifndef CLASS
#define CLASS

template <typename T>
Class 
{
    Class();
};

template <typename T>
Class::Class()
{
}

#endif 
```

- -或者 -

```
#ifndef CLASS
#define CLASS

template <typename T>
Class 
{
    Class();
};

#endif

template <typename T>
Class::Class()
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:19:01.377

我会在包含守卫（磅定义）中定义它以避免多重定义的符号。所以对于模板类，就像你的例子一样，我总是在包含保护中定义它，因为它们总是必须在头文件中定义。

对于其他非模板类，我可能会在源 (.cpp) 文件中定义成员函数，因此这显然会在包含防护之外。

作为脚注，我还要指出，对于这样一个简单的构造函数，我实际上会在类声明中定义它，甚至根本不定义它，但我猜你的实际代码比示例复杂一点给定的。

# c# - 阻止 Windows phone 中的异步操作

> ID：15628832
> 
> 赞同：1
> 
> 时间：2013-03-26T03:26:09.953
> 
> 标签：c#, windows-phone-7, asynchronous, windows-phone-8

我正在尝试将 http post 从 windows phone 发送到服务器，我通过发送 post 数据遇到了一些问题。我将断点放在 button_click_1 函数中，我发现它不会启动**异步操作**。除此之外，它还阻塞了当前线程，我知道这种情况是由`allDone.waitOne()`.

为什么异步操作不起作用以及如何解决？

感谢您的任何帮助。

```
private void Button_Click_1(object sender, RoutedEventArgs e)
            {
            // Create a new HttpWebRequest object.
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);

            request.ContentType = "application/x-www-form-urlencoded";

            request.Method = "POST";

            // start the asynchronous operation
            request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);

            allDone.WaitOne();

        } 
```

**异步操作**：

```
private void GetRequestStreamCallback(IAsyncResult asynchronousResult)
        {
            HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

            // End the operation
            Stream postStream = request.EndGetRequestStream(asynchronousResult);

            string postData = "xxxxxxxxxxx";    
            // Convert the string into a byte array. 
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);

            // Write to the request stream.
            postStream.Write(byteArray, 0, postData.Length);
            postStream.Close();

            // Start the asynchronous operation to get the response
            request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
        }

        private void GetResponseCallback(IAsyncResult asynchronousResult)
        {
            HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

            // End the operation
            HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
            Stream streamResponse = response.GetResponseStream();
            StreamReader streamRead = new StreamReader(streamResponse);
            string responseString = streamRead.ReadToEnd();
            tbtesting.Text = responseString.ToString();

            streamResponse.Close();
            streamRead.Close();

            response.Close();
            allDone.Set();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:48:07.723

您不是第一个遇到此问题的人（请参阅[Is it possible to make synchronous network call on ui thread in wpf (windows phone)](https://stackoverflow.com/q/15000274/694641)）。如果您这样做，那么您将死锁 Windows Phone 上的 UI 线程。

您将获得的最接近的方法是在网络调用中使用 async/await。作为 NuGet 上的 Microsoft.Bcl.Async 包的一部分，您可以使用一些扩展方法来执行此操作。

# android - 如何避免来自服务器和 Google Play 更新的双重通知

> ID：15628835
> 
> 赞同：0
> 
> 时间：2013-03-26T03:26:13.750
> 
> 标签：android, upgrade, google-play

我将我的应用程序放在 Google Play 和我自己的网站上以供下载。我计划为从网站获取 apk 的人推出更新通知功能。由于我在网站上托管的 apk 将具有与我放在 GP 上的相同的包名称和签名，我想知道如何避免向从 GP 安装的用户提供两个更新通知（来自 GP 的 1 个通知，来自我自己的 1 个通知服务器）。有没有办法检查用户是否从 GP 获得了应用程序？

# draw - Kinetic JS - 使用鼠标在行首和行尾绘制箭头

> ID：15628838
> 
> 赞同：2
> 
> 时间：2013-03-26T03:26:31.270
> 
> 标签：draw, kineticjs

我正在尝试在我使用鼠标绘制的线条的开头和结尾添加箭头，这是我绘制线条的脚本：

```
 document.getElementById('dLine').onclick = function() {
    layer.on("mousedown", function () {
        if (moving) {
            moving = false;
            layer.draw();
        } else {
            var mousePos = stage.getMousePosition();
            x1 = mousePos.x;
            y1 = mousePos.y;
            line = new Kinetic.Line({
                points: [0, 0, 50, 50],
                stroke: "red"
            });
            layer.add(line);
            line.getPoints()[0].x = mousePos.x;
            line.getPoints()[0].y = mousePos.y;
            line.getPoints()[1].x = mousePos.x;
            line.getPoints()[1].y = mousePos.y;
            moving = true;
            layer.drawScene();
        }
    });

    layer.on("mousemove", function () {
        if (moving) {
            var mousePos = stage.getMousePosition();
            var x = mousePos.x;
            var y = mousePos.y;
            line.getPoints()[1].x = mousePos.x;
            line.getPoints()[1].y = mousePos.y;
            moving = true;
            layer.drawScene();
        }
    });

    layer.on("mouseup", function () {
        moving = false;
        var mousePos = stage.getMousePosition();
        x2 = mousePos.x;
        y2 = mousePos.y;
        $("#distance").val(calculateDistance(x1, y1, x2, y2));

    });
}; 
```

我会很感激你的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:49:30.767

您可以使用此函数绘制箭头：

```
function canvas_arrow(fromx, fromy, tox, toy){
    var headlen = 20;   // how long you want the head of the arrow to be, you could calculate this as a fraction of the distance between the points as well.
    var angle = Math.atan2(toy-fromy,tox-fromx);

    line = new Kinetic.Line({
        points: [fromx, fromy, tox, toy, tox-headlen*Math.cos(angle-Math.PI/6),toy-headlen*Math.sin(angle-Math.PI/6),tox, toy, tox-headlen*Math.cos(angle+Math.PI/6),toy-headlen*Math.sin(angle+Math.PI/6)],
        stroke: "red"
    });
} 
```

编辑：[jsfiddle.net/cmcculloh/M56w4](http://jsfiddle.net/cmcculloh/M56w4) - 在评论中提供

# internet-explorer - IE8 背景大小的解决方法

> ID：15628840
> 
> 赞同：0
> 
> 时间：2013-03-26T03:26:34.610
> 
> 标签：internet-explorer, css, retina-display

我正在尝试修复涉及 IE8 及以下版本的 background-size CSS3 属性的显示问题。为了优化我的视网膜显示器徽标，我实现了以下代码：

```
.logo {
background: url('../img/logo_sm.png') no-repeat scroll transparent;
text-indent: -999em;
transition: opacity 0.2s ease;
-webkit-transition: opacity 0.2s ease;
-moz-transition: opacity 0.2s ease;
margin: 0;
width: 141px;
height: 32px;
background-size: 141px 32px;
display: inline-block; 
```

然后我添加了这些行以使 IE8 正确调整徽标的大小（因为它不尊重背景大小）

```
/* Make IE8 cooperate */
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader( src='../img/logo_sm.png', sizingMethod='scale'); 
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader( src='../img/logo_sm.png', sizingMethod='scale')"; 
```

问题现在在所有版本的 IE 中，原始背景图像显示在来自这些过滤器的新的、正确调整大小的图像后面。

我该如何设置，以便 IE8 及以下版本忽略原始背景属性并仅呈现一张图像？如果可能的话，我想这样做而不需要单独的 IE 样式表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:31:08.133

这是我的做法，在工作中我们不再支持低于IE7。1) 覆盖 IE7 2) 覆盖 IE8 & IE9 3) 为 IE9 添加回来

```
*selector {background:none;} /* IE7 */
selector {background:none\9;} /* IE9, IE8 */
:root selector {background: url('../img/logo_sm.png') no-repeat scroll transparent\9;} /* IE9 */ 
```

# java - 在 Java 中模拟用户输入（键盘、鼠标）？

> ID：15628844
> 
> 赞同：2
> 
> 时间：2013-03-26T03:26:46.753
> 
> 标签：java, key, mouse, simulate

有没有办法在java中模拟击键？例如：

我开始*k.jar*，然后

```
Thread.wait(10000); 
```

在不按任何键的情况下，程序将模拟用户正在打字。

我也对鼠标移动和 clic 模拟感兴趣。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T03:29:13.903

试试[Robot](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)，这是一个促进自动化键盘/鼠标交互的内置类。

它可以触发鼠标和键盘操作，并获取有关屏幕上像素的信息。

# objective-c - 具有翻转绘图坐标的 NSView 高度方向

> ID：15628849
> 
> 赞同：0
> 
> 时间：2013-03-26T03:27:07.097
> 
> 标签：objective-c, nsview, nsrect, nstrackingarea, cgsize

我对一个自定义视图进行了子类化，并将其拖入 Interface Builder 的窗口中。当鼠标进入视图的边界时，我想改变视图的高度。我的问题是高度变化是向上而不是向下。我尝试翻转视图的坐标，`(BOOL)isFlipped`但它对高度变化的方向没有任何影响。关于如何改变向下方向的高度有什么帮助吗？

```
#import "ViewA.h"

@implementation ViewA

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        NSTrackingArea *trackingArea = [[NSTrackingArea alloc] initWithRect:[self bounds]
                                                                    options:(NSTrackingMouseEnteredAndExited|NSTrackingActiveAlways)
                                                                      owner:self
                                                                   userInfo:nil];
        [self addTrackingArea:trackingArea];

    }

    return self;
}

- (void)drawRect:(NSRect)dirtyRect
{
    [[NSColor redColor] setFill];
    NSRectFill(dirtyRect);
}

- (BOOL)isFlipped {
    return YES;
}

- (void)mouseEntered:(NSEvent *)theEvent {

    NSRect rect = self.frame;
    rect.size.height = 120;
    self.frame = rect;
}

- (void)mouseExited:(NSEvent *)theEvent {

    NSRect rect = self.frame;
    rect.size.height = 90;
    self.frame = rect;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:18:06.550

这是因为 Cocoa 中的坐标系从左下角开始。即坐标`(0,0)`位于屏幕/父视图的左下角。因此 y 坐标（高度）的增量会向上增加尺寸。你应该做的是当你增加高度时，向下移动原点，例如，如果你想增加/减少框架高度到 90；

```
CGFloat heightDiff = 90 -self.frame.size.height;

NSRect  rect = self.frame;

rect.size.height = 90;

rect.origin.y -= heightDiff;

self.frame = rect; 
```

那应该这样做。

覆盖父视图`isFlipped`而不是视图本身的方法以获得预期的行为。

例如，如果您将其添加到 的内容视图中`window`，则子类化窗口`contentView`并覆盖其`isFlipped`方法以返回`YES`。

# php - 删除 imagejpeg 创建的图像

> ID：15628851
> 
> 赞同：0
> 
> 时间：2013-03-26T03:27:19.930
> 
> 标签：php

是否可以删除`imagejpeg`创建的图像我将图像上传到我的 Amazon S3 服务器，但文件在运行后仅弹出在我服务器的主目录中。

```
 $new_height = 120;
    $width = imagesx($originalImage);
    $height = imagesy($originalImage);
    $new_width = round(($width * $new_height) / $height);
    $imageResized = imagecreatetruecolor($new_width, $new_height);
    imagecopyresampled($imageResized, $originalImage, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

    $tmp_loc = 'uploads/thumb/';
    $tempfilename = tempnam($tmp_loc, $filename);
    imagejpeg($imageResized, $filename,100);
    imagedestroy($imageResized);
    imagedestroy($originalImage);
    unlink($tempfilename); 
```

我试过了`imagedestroy`， `unlink($tempfilename);`但文件仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:40:12.287

imagejpeg(...) 应该输出到 $tempfilename 而不是 $filename，那么您将取消链接正确的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:54:32.427

您忘记打开变量`$tmp_loc`。

看：

```
$tmp_loc = uploads/thumb/'; 
```

正确的：

```
$tmp_loc = 'uploads/thumb/'; 
```

# jquery - Jquery滚动顶部元素不移动

> ID：15628856
> 
> 赞同：0
> 
> 时间：2013-03-26T03:27:48.510
> 
> 标签：jquery, html, css

在页面的实际实现中，链接与页面一起移动，但在页面中未显示（可见）。当我在浏览器中单击 css 时，元素出现在滚动位置。

* * *

```
 //elemet to appear when scrolling
         <a href="#" class="scrollup">Scroll</a>

    $(document).ready(function(){ 

        $(window).scroll(function(){
            if ($(this).scrollTop() > 100) {
                $('.scrollup').fadeIn();
            } else {
                $('.scrollup').fadeOut();
            }
        }); 

        $('.scrollup').click(function(){
            $("html, body").animate({ scrollTop: 0 }, 600);
            return false;
        });

    });

    //css for the element
        .scrollup{
                    width:40px;
                    height:40px;
                    opacity:0.3;
                    position:fixed;
                    bottom:50px;
                    right:100px;
                            display:none;   
            } 
```

不能在铬中工作。在火狐工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:08:03.770

尝试：

```
$('.scrollup').click(function(){
    $( 'html, body' ).animate( { scrollTop: $('body').offset().top }, 'slow' );                                     return false;   
}); 
```

或者

```
$('.scrollup').click(function(){
    $('body').scrollTop($('body')
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:04:44.197

这是你想要的吗

js

```
$(window).scroll(function() {
    if ($(this).scrollTop()) {
        $('.scrollup').fadeIn();
    } else {
        $('.scrollup').fadeOut();
    }
});

$(".scrollup").click(function () {
   //1 second of animation time
   //html works for FFX but not Chrome
   //body works for Chrome but not FFX
   //This strange selector seems to work universally
   $("html, body").animate({scrollTop: 0}, 1000);
}); 
```

html

```
<a href="#" class="scrollup">Scroll</a> 
```

css

```
.scrollup{
    padding: 5px 3px;
    background: #000;
    color: #fff;
    position: fixed;
    bottom: 0;
    right: 5px;
    display: none;
            } 
```

工作[演示](http://jsfiddle.net/jhunlio/6A6ey/1/)

希望这对你有帮助

# python - 在 Django 中获取 URL 值

> ID：15628861
> 
> 赞同：0
> 
> 时间：2013-03-26T03:28:10.163
> 
> 标签：python, django

我有一个看起来像这样的视图函数：

```
def search_manager(request, account_id):
    account = Account.objects.get(pk=account_id)
    ... 
```

我想创建中间件或上下文处理器，我可以在其中设置一些将为每个视图设置的值。有没有办法我可以进入`account_id`中间件或上下文处理器，以便我可以获取所有视图所需的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:13:53.793

您可以使用会话变量为用户会话设置值，这样每个请求都将包含 account_id，因此您可以从中间件和其他视图访问该值。在视图或中间件中。请记住，例如，如果用户未登录，则请求可能没有会话。

```
# set a value
if hasattr(request, 'session'):
    request.session['account_id'] = account_id

# read a value
if hasattr(request, 'session'):
    account_id = request.session['account_id'] 
```

Django 中的会话对象就像字典一样工作。

# ios - iOS 上的键值存储数据库

> ID：15628869
> 
> 赞同：3
> 
> 时间：2013-03-26T03:28:53.107
> 
> 标签：ios, database, key-value-store, yapdatabase

在 iOS 上创建键值存储数据库的一个例子是[YapDatabase](https://github.com/yaptv/YapDatabase)。

但是，我没有使用它的经验，并且想了解使用它是否值得，而不是使用 Core Data 或 FMDB 之类的东西。

我遇到的一个关键问题是：如何管理与该数据库的对象关系？

如果我可以避免对象关系，我正在寻找有关如何解决与另一个对象具有多对多关系的对象问题的建议或数据库设计技巧。

让我们考虑一个用例（这只是一个示例，以帮助解决此问题）：

`sender <<->> message <<->> recipient`

```
sender has a: 
    photo_data, 
    name, 
    gender, 
    age, 
    email, 
    username, 
    twitter_id, 
    facebook_id, 
    sender_id

recipient has a: 
    photo_data, 
    name, 
    gender, 
    age, 
    email, 
    username, 
    twitter_id, 
    facebook_id, 
    recipient_id

message has a:
    text, 
    rich_text, 
    picture_data, 
    voice_data, 
    shared_url, 
    message_id 
```

我曾想过使用message_id、sender_id和receiver_id来关联每个模型，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T03:32:44.170

我做过类似的事情，这可能不完全合适，但可能会有所帮助。

我为聊天应用程序设置了类似的设置。每条消息都有一个发送者和接收者，但显然当前用户是两者之一。所以我将所有消息都存储在他们自己的集合中，其中集合的名称是非当前用户的 id。

如果使用 YapDatabase，您将使用 YapCollectionsDatabase 类。

== 编辑 ==

您首先要制作您的消息和用户类：

```
@interface Message : NSObject <NSCoding> ...

@property (...) NSString *sender_id;
@property (...) NSString *recipient_id;
@property (...) NSString *user_id; // sender_id || recipient_id (non-current-user)

@property (...) NSDate *timestamp;
...
@end

@interface User : NSObject <NSCoding>

@property (...) NSString *user_id;
...
@end 
```

现在将这些对象存储在数据库中。

我们从 YapCollectionsDatabase 开始。这是一个集合/键/值存储。因此，当新消息到达时，我们只需将其存储在适当的集合中

```
[dbConnection readWriteWithBlock:^(YapCollectionsDatabaseReadWriteTransaction *transaction){
    [transaction setObject:messsage
                    forKey:uuid
              inCollection:message.user_id
              withMetadata:message.timestamp];
}]; 
```

所以每条消息都是分开存储的。但它与对话中的所有其他消息一起放置在一个集合中。此外，添加一条新消息很快，因为您只需向数据库添加一行。

sqlite 数据库在内部看起来像这样：|collection|key|object|metadata|

要查找对话的数量，或获取对话的用户 ID：

```
[dbConnection readWithBlock:^(YapCollectionsDatabaseReadTransaction *transaction){
    conversationCount = [transaction numberOfCollections];
    conversationUserIds = [transaction allCollections];
}]; 
```

要获取对话中的消息数量或消息的 ID：

```
[dbConnection readWithBlock:^(YapCollectionsDatabaseReadTransaction *transaction){
    messageCount = [transaction numberOfKeysInCollection:user_id];
    messageIdsSorted = [transaction allKeysOrdered:NSOrderedAscending
                                      inCollection:user_id];
}]; 
```

要从数据库中删除旧消息：

```
[dbConnection readWriteWithBlock:^(YapCollectionsDatabaseReadWriteTransaction *transaction){
    [transaction removeObjectsEarlierThan:twoWeeksAgo inCollection:user_id];
}]; 
```

希望这可以帮助。

# linux - 为 Heisenbug 获得类似 strace 的输出的方法

> ID：15628871
> 
> 赞同：2
> 
> 时间：2013-03-26T03:29:12.327
> 
> 标签：linux, polling, strace

我在 linux x64 进程中追逐一个 Heisenbug。（使用调试器或 strace 附加到进程使问题永远不会发生。）当代码检测到故障并以这种方式附加 gdb 时，我已经能够进入无限循环，但它只是向我显示了一个文件应该工作的描述符 (fd) 不再有效。我真的很想了解 fd 的历史，因此尝试了 strace，但这当然不会让问题回购。

其他因素表明 gdb/strace 的问题在于时间。我尝试使用 `-etrace=desc`甚至运行 strace`-eraw=open`并输出到 ramdisk 以查看是否会以正确的方式减少 strace 开销以触发问题，但没有成功。我尝试运行 strace+，但它比 strace 慢了一个数量级。

我要附加的进程部分是我无法访问源代码的商业二进制文件，部分是我预加载到进程空间中的代码，所以`printf`-everywhere 不是 100% 可能的。

你对如何追踪 fd 历史有什么建议吗？

**更新：**添加了关于 strace+ 的注释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T17:29:36.447

我通过以下方式解决了跟踪问题：

1.  围绕相关系统调用预加载包装存根函数`open()`，`close()`以及`poll()`
2.  在 ramdisk 上创建的文件名中记录相关信息。

（实际问题是一场竞赛，内核的`poll()`字符串访问`pollfd`内存并返回`EFAULT`。）

# c# - Sprache：如何从数字匹配中排除字母？

> ID：15628874
> 
> 赞同：1
> 
> 时间：2013-03-26T03:29:24.500
> 
> 标签：c#, .net, sprache

使用单子解析器[Sprache](https://github.com/sprache/Sprache)，寻找匹配数字字符（0..9），不包括非数字字符，但前导或尾随空格是可以的。

我认为这应该工作：

```
public static readonly Parser<string>
    Number = Parse.Numeric.Except(Parse.Letter).AtLeastOnce().Text().Token(); 
```

或这个：

```
public static readonly Parser<int>
    Number = Parse.Number.Select(int.Parse).Token(); 
```

两者都适用于我能想到的所有情况，除了尾随文本：

```
[Test]
public void Number_ParseNumberWithTrailingLetter_WasUnsuccessfull()
{
    var input = new Input("123bogus");
    IResult<string> result = Lexicon.Number(input);
    Assert.IsFalse(result.WasSuccessful);
} 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:54:59.847

如果目标是只接受一个数字，那么要消除尾随文本，请使用一个`.End()`子句，它断言已到达字符串的末尾：

```
public static readonly Parser<int> MatchInt =
      Parse.Number.Select(int.Parse).Token().End(); 
```

相反，如果您想接受输入流中的后续数字（由空格分隔），则可以使用`.Then()`子句为您提供所有这些数字。就像是：

```
public static readonly Parser<int> MatchInt = Parse.Number.Select(int.Parse).Token();
public static readonly Parser<IEnumerable<int>> MatchIntList = 
      from int1 in MatchInt
      from intRest in Parse.WhiteSpace.AtLeastOnce().Then(_ => MatchInt).Many().End()
      select new List<int>() { int1 }.Concat(intRest); 
```

未经测试 - 但希望足以朝着正确的方向发展。

# javascript - 如何以角度过滤嵌套对象的结果

> ID：15628876
> 
> 赞同：1
> 
> 时间：2013-03-26T03:29:30.670
> 
> 标签：javascript, angularjs

我的角度中有嵌套对象，如下所示

```
{
"name": "John"
"age" : "23"
subjects: [

{
"description":"Math"
"length":"1 month"
},
{
"description":"English"
"length":"1 month"
}

]

} 
```

在角度方面，`filter`工作正常，`name, age`但我怎样才能找到那些学科描述包含数学的学生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T16:14:42.213

[过滤器](http://docs.angularjs.org/api/ng.filter%3afilter)的文档页面有一个有趣的例子。

其中，搜索框的 ng-model 设置为**search.$**而不是**search**。这似乎是匹配的通配符。

这是给你的[jsFiddle](http://jsfiddle.net/tGvC8/)。在搜索框中输入任何内容，它就会找到匹配的学生。

```
<input id="txtSearch" type="text" ng-model="search.$" />
<ol>
    <li ng-repeat="student in myData | filter:search">
        {{student.name}}
        {{student.subjects}}
    </li>
</ol> 
```

数据模型如下所示：

```
$scope.myData = [{
    "name": "Student 1",
        "age": "20",
    subjects: [{
        "description": "Math",
            "length": "1 month"
    }, {
        "description": "English",
            "length": "1 month"
    }]
}, {
    "name": "Student 2",
        "age": "22",
    subjects: [{
        "description": "Economics",
            "length": "1 month"
    }, {
        "description": "English",
            "length": "3 months"
    }]
}, {
    "name": "Student 3",
        "age": "23",
    subjects: [{
        "description": "Math",
            "length": "4 months"
    }, {
        "description": "English",
            "length": "6 months"
    }]
}]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T15:38:41.440

不确定这是否真的是一个 Angular 问题 - 您需要一种方法来解析 javascript 中的原始 json 数据。

一种方法是使用像 Underscore 这样的函数库，它提供类似函数的实用程序来执行这些操作。

有关示例，请参阅[http://jsfiddle.net/9W5YF/2/ ，并查看](http://jsfiddle.net/9W5YF/2/)[http://underscorejs.org](http://underscorejs.org)以获取有关下划线的文档。

```
var studentsDoingMaths = _.filter(json, function (student) {
var doingMaths = doingSubject("Math");
return subjectSearch(student, doingMaths);}); 
```

# python - 如何在接受未删除和回显的输入时打印到屏幕

> ID：15628877
> 
> 赞同：0
> 
> 时间：2013-03-26T03:29:33.480
> 
> 标签：python, multithreading, input, output, simultaneous

我找到了以下代码：

```
import threading
from time import sleep
import os
class test:
    def __init__(self):
        self.running = True
    def foo(self):
        while(self.running):
            os.system( [ 'clear', 'cls' ][ os.name == 'nt' ] )
            sleep(2)
    def getUserInput(self):
        x = ''
        while(x != 'e'):
            x = raw_input('Enter value: ')
        self.running = False
    def go(self):
        th1 = threading.Thread(target=self.foo)
        th2 = threading.Thread(target=self.getUserInput)
        th1.start()
        th2.start()
t = test()
t.go() 
```

但是每次它清除屏幕时都会清除所有内容，包括我输入的内容。我需要一些可以清除屏幕但可以让我输入的东西，而当屏幕清除时我输入的内容不会清除。我需要每两秒清除一次屏幕并随时接受输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:18:18.977

您采用的方法行不通，因为 cls 之类的工具不知道其他地方发生的 raw_input() 之类的事情，因此它们无法保留某些屏幕内容。你需要的是协调它。我看到两种可能的方法：

*   等待输入时不要清除屏幕，即在您请求用户输入时，只需向清理线程发出信号以等待。
*   使用低级库访问屏幕缓冲区，允许您保留提示。我认为 Python 有它的“诅咒”实现，应该允许你这样做。

不过，您应该做的是退后一步，在更抽象的层面上描述您想要实现的目标。您在这里问如何实现某种解决方案，恕我直言，从一开始就有缺陷。如果您改为描述最初的目标，那么有人会想出一种效果更好的方法。

# microsoft-metro - 导航在 winJS 中不起作用

> ID：15628878
> 
> 赞同：0
> 
> 时间：2013-03-26T03:29:33.840
> 
> 标签：microsoft-metro, windows-store-apps, winjs

## 导航在 winJS 中不起作用

我正在尝试在单击按钮时调用导航。但它不起作用 WinJS.Navigation.navigate("Views/Login/Login.html",null);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:21:00.640

您是否使用正确的 winjs 导航页面控件来设置页面控件容器以接受单页导航？

[http://msdn.microsoft.com/en-us/library/windows/apps/hh452768.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh452768.aspx)

# ios - xcode中的公制转换计算器

> ID：15628882
> 
> 赞同：0
> 
> 时间：2013-03-26T03:29:52.260
> 
> 标签：ios, objective-c, calculator

有谁知道如何输入数字并将其放入公式中？我正在尝试创建一个毫米到英寸的转换计算器，并带有一个可以更改公式的开关，以便您可以计算英寸到毫米。到目前为止，这就是我所做的，我正在使用 xcode 3.2.6

.m

```
@synthesize entry;
@synthesize output;
@synthesize toggle;

//-(IBAction)hidekeyboard:(id)sender{

-(IBAction)calculate:(id)sender{
    float floatoutput=[entry.text floatValue]/[25.4];
} 
```

。H

```
 IBOutlet UITextField *entry;
    IBOutlet UILabel *output;
    IBOutlet UISwitch *toggle;
}

-(IBAction)calculate:(id)sender;
-(IBAction)hidekeyboard:(id)sender;

@property (nonatomic, retain) UITextField *entry;
@property (nonatomic, retain) UILabel *output;
@property (nonatomic, retain) UISwitch *toggle; 
```

我对 xcode 非常陌生，非常感谢您提供的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:41:43.250

像下面这样的东西？

```
- (float)conver2inches: (NSString *)mmeters {
    return [mmeters floatValue]/25.4f;
}

-(IBAction)calculate:(id)sender{
    float answer = [self conver2inches:entry.text];
    textfield1.text = [NSString stringWithFormat:@"%f",answer];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:43:52.233

你这样做是不对的 ：

它应该是：

```
float floatoutput=[entry.text floatValue]/25.4; 
```

`[ ]`用于方法调用或数组下标。你不需要写`[25.4]`没有意义的东西。

**并记下 25.4 不是`float`，`double`你应该使用`25.4f`*

# vim - brew 在终端中使用 RVM (Ruby 1.9.3)、MacVim 和 Command-T 安装 Vim

> ID：15628883
> 
> 赞同：3
> 
> 时间：2013-03-26T03:29:54.527
> 
> 标签：vim, terminal, rvm, macvim

我正在使用 RVM (1.17.7) 和 Ruby 1.9.3p362。从长远来看，我想用 Tmux 转移到终端中的 Vim。我正在尝试学习如何使用我选择的插件来安装和运行，而不是默认使用 Janus，只是想学习这一切，而不是成为一名狂热的程序员。

当Ruby设置为1.9.3时，我对Command-T的Vim git clone进行了brew安装（我正在使用Pathogen）......并且使用Vim和Command-T在终端中一切都很好。当我运行 :ruby 将 RUBY_VERSION 放入终端 Vim 时，它会返回 1.9.3。Command-T 也可以正常工作。

当我尝试在 MacVim 中使用相同的 Command-T 时，它会崩溃并且终端显示：Vim: Caught deadly signal SEGV Vim: Finished。

我在 1.9.3 中执行了 brew install macvim，但是当我从终端启动 mvim 并运行 :ruby puts RUBY_VERSION 时，我回到了 1.8.7。我知道 Wincent 推荐使用 Ruby 的系统版本来安装 Command-T，而且我读过您必须以任何一种方式匹配 Ruby 版本。当我拥有系统 ruby​​ 时，我已经设法让它为两者都工作，但在 1.9.3 的 RVM 版本上无法同时获得它......这可能吗？我应该忘记 MacVim 并在终端中坚持使用 Vim 吗？

我认为我可以做的其他事情是创建一个禁用的文件夹，然后将不同的 Command-T 安装移入和移出它。或者也许为 'gui_running' 做一个 if 并针对不同的安装。任何让我直截了当的建议都会很棒。

我已经安装了 Tim Pope 的 rvm.vim 并且可以设置 Ruby 版本，但是当我调用 :CommandT 时，这似乎并没有阻止 MacVim 中的崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T04:22:50.400

我猜您在安装`macvim`之前安装了软件包，然后安装了所有其余部分，然后安装了`vim`软件包。这就解释了为什么它在终端模式下工作。这是两个不同的包，它们有自己的构建选项。

跑：

```
vim --version 
```

并将输出与以下内容进行比较：

```
mvim --version 
```

特别是，检查最后一行（以 开头`Linking:`）。您可能会看到`ruby-1.8`linked in for`mvim`和`ruby-1.9.1`linked in for `vim`（注意1.9.3 报告1.9.1；它是C API 版本，而不是Ruby 版本）。

如果这一切都是真的，请通过以下方式修复它：

```
brew uninstall macvim
brew install macvim 
```

它应该针对您的 1.9.3 配置构建。在执行此操作之前，请确保`rvm current`报告 1.9.3。

# matlab - 在 MATLAB 中计算连续整数条纹的有效方法

> ID：15628887
> 
> 赞同：3
> 
> 时间：2013-03-26T03:30:08.977
> 
> 标签：matlab

假设我有一个只包含逻辑值的向量，例如

```
V = [1 0 1 0 1 1 1 1 0 0] 
```

我想在 MATLAB 中编写一个函数，它返回一个 'streak' 向量`S`，`V`其中 S(i) 表示 V 中连续 1 的数量，但不包括 V(i)。对于上面的示例，条纹向量将是

```
S = [0 1 0 1 0 1 2 3 4 0] 
```

鉴于我必须为一个非常大的矩阵执行此操作，我非常感谢任何矢量化/高效的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:51:13.127

这应该可以解决问题：

```
S = zeros(size(V));
for i=2:length(V)
    if(V(i-1)==1)
        S(i) = 1 + S(i-1);
    end
end 
```

复杂度只有**O(n)**，我想这应该足够好了。

对于您的示例输入：

```
V = [1 0 1 0 1 1 1 1 0 0];
S = zeros(size(V));
for i=2:length(V)
    if(V(i-1)==1)
        S(i) = 1 + S(i-1);
    end
end
display(V);
display(S); 
```

结果将是：

```
V =

     1     0     1     0     1     1     1     1     0     0

S =

     0     1     0     1     0     1     2     3     4     0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:33:43.350

您也可以通过几个中间步骤将其完全矢量化：

```
V = [1 0 1 0 1 1 1 1 0 0];

Sall = cumsum(V);
stopidx = find(diff(V)==-1)+1;
V2=V;
V2(stopidx) = -Sall(stopidx)+[0 Sall(stopidx(1:end-1))];
S2 = cumsum(V2);

S = [0 S2(1:end-1)]; 
```

Afaik 唯一可能需要一段时间的是`find`通话；您不能在任何地方都使用逻辑索引并绕过 find 调用，因为您需要绝对索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:23:21.050

它在盒子外面 - 但是您是否考虑过使用文本功能？由于字符串只是 Matlab 的向量，因此应该很容易使用它们。

Regexp 包含一些用于查找重复值的不错的函数。

# jquery - jQuery最接近排除自我

> ID：15628889
> 
> 赞同：45
> 
> 时间：2013-03-26T03:30:23.917
> 
> 标签：jquery

`closest()`将通过测试元素本身并向上遍历其在 DOM 树中的祖先来获取与选择器匹配的第一个元素。但我想知道是否有任何方法可以得到排除自身的结果（我的意思是只得到它的父母）。

让我举个例子。请审查它。

```
<div id='div1' class="container">
    <div id="div2" class="container">
        <!--many nested div.container as it directly or indirectly children -->
    </div>
    <div id="div3" class="container">
        <!--many nested div.container as it directly or indirectly children -->
    </div>
</div>

$(function() {

    $('div.container').on('mouseover', function(e){
        //I only want to select the first parent with the class container.
        //closest include the this element. 
        console.log($(this).closest('.container').attr('id'));
    });
}); 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-03-26T03:38:03.767

您可以在尝试找到`.closest()`祖先之前遍历一个级别：

```
$(this).parent().closest('.container'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-11T10:08:26.690

香草js：

```
el.parentElement.closest('.container') 
```

查询：

```
el.parent().closest('.container'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T03:47:47.673

正确答案是`.parents('.container:first');`谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T03:59:48.560

如果你真的只想要父 div，那么 $(this).parents('.container') 会起作用。如果您想寻找最接近的元素并允许它成为同级元素（这似乎是您实际想要完成的），您可以使用 $(this).prev('.container')。

# audio - XAudio2 遮挡处理

> ID：15628890
> 
> 赞同：0
> 
> 时间：2013-03-26T03:30:28.630
> 
> 标签：audio, directx, audio-processing, xaudio2, occlusion

我正在研究自制游戏引擎，目前正在研究音频引擎的实现。这主要是出于自我教育的原因。我想为通用音频处理创建一个接口包装器，因此我可以根据需要在 OpenAL、XAudio2 或其他平台之间切换。我也希望这段代码是可重用的，所以我试图让它尽可能完整，并让各种系统实现尽可能多的功能。目前，我专注于 XAudio2 实现，并且可能会在以后转向 OpenAL 实现。

在过去的几个月里，我读了很多关于 3D 处理（监听器/发射器）、环境效果（混响）、排斥、遮挡、阻塞和直达声的文章。我希望能够在音频播放中使用任何这些效果。虽然我已经尽我所能研究了这些主题，但我找不到任何关于如何实际实现遮挡（直接和反射信号消音）、阻塞（直接信号消音）或排斥（反射信号消音）的示例。阅读 MSDN 文档似乎是对遮挡的被动引用，但没有直接涉及实现。我发现的最好的是通用的“使用低通滤波器”，这对我没有多大帮助

所以我的问题是：使用 XAudio2，如何实现音频反射信号消音（排除）和音频直接信号消音（阻塞）或同时实现（阻塞）？音频图会是什么样子，这些与混响环境效果有何关系？

**编辑 2013-03-26**：
在进一步思考图表时，我意识到我可能没有从正确的角度看图表。
图表是否应该是：源 → 效果（子混音）→ 母带
-或 -
图表是否应该一般如下所示：

```
 ↗→   Direct   → Effects  ↘
Source                            →Mastering
       ↘→ Reflections → Effects ↗ 
```

第二个图将分割图，以便可以分别计算排除和阻塞；我的部分困惑是如何独立处理它们。
那么，我认为来自 3D 音频 DSP 结构的混响设置将应用于反射路径；多普勒将应用于直接路径或直接路径和反射路径；并且混响环境效果只会影响反射路径。这是否接近正确的音频图模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:17:45.683

您希望您的图表看起来类似于：

输入数据--->低通滤波器--->输出

当源变得更受阻时，您可以调整低通滤波器。您还可以使用低通滤波器增益来模拟吸收。最好设置过滤器设置，以便它们以声音设计师可以调整的方式显示。

本文更详细地介绍了声音传播：http: [//engineroom.ubi.com/sound-propagation-and-diffraction-simulation/](http://engineroom.ubi.com/sound-propagation-and-diffraction-simulation/)

就这一点而言，然后沿着图表传递环境效果（例如混响），您只希望那些在图表下方更远的地方：

输入--->低通滤波器--->输出--->混响---->主输出

这样，混响的声音将与被遮挡的声音相匹配（否则，混响与直接信号不匹配会听起来很奇怪）。

使用低通滤波器听起来模糊且不完整，但实际上除了过滤高频和调整增益之外，效果并没有太多。对于更高级的环境建模，您想研究诸如“用于复杂场景中动态源的实时声音传播的预计算波模拟”（我无法直接链接，因为我还没有足够的代表！）但它可能远远超出你想要达到的范围。

# cmake - 为什么我的 cmake 文件不能正常工作，而通常的 g++ 代码工作正常

> ID：15628895
> 
> 赞同：0
> 
> 时间：2013-03-26T03:30:41.277
> 
> 标签：cmake

我在我的小项目中使用 tesseract-ocr 和 leptonica 库。

我的“CMakeLists.txt”文件如下所示：（我在“include”文件夹中有必要的头文件）

```
cmake_minimum_required(VERSION 2.8.7)
project(OCR)
include_directories(include)
find_library(LEPT liblept)        
find_library(TESS libtesseract)    
set(LIBS ${LEPT} ${TESS})
add_executable(getText ocr.cpp)
target_link_libraries(getText ${LIBS}) 
```

但是当我运行这个然后运行make时，我的程序没有被编译

但是，当我这样做时，它会被完美编译

```
$ g++ ocr.cpp -o getText -I/usr/include/leptonica 
-I/usr/local/include/tesseract   -llept -ltesseract 
```

但我需要使第一种方法成功。请帮忙。

我有

```
#include "basapi.h"
#include "allheaders.h" 
```

，顺便说一句，在我的代码中。

这可以：

```
$ cmake .
/usr/local/lib/liblept.a/usr/local/lib/libtesseract.a
-- Configuring done
-- Generating done
-- Build files have been written to: /home/utkrist/OCR 
```

但这不是（给出了一些 leptonica 和 tesseract-ocr 相关的错误）

```
$ make 

    Linking CXX executable getText
/usr/local/lib/libtesseract.a(imagefind.o): In function `tesseract::ImageFind::FindImages(Pix*)':
/home/utkrist/Downloads/tesseract-ocr/textord/imagefind.cpp:78: undefined reference to `pixGenHalftoneMask'
/usr/local/lib/libtesseract.a(tabfind.o): In function `tesseract::TabFind::Deskew(tesseract::TabVector_LIST*, BLOBNBOX_LIST*, TO_BLOCK*, FCOORD*, FCOORD*)':
/home/utkrist/Downloads/tesseract-ocr/textord/tabfind.cpp:1286: undefined reference to `pixRotate'
/usr/local/lib/libtesseract.a(svutil.o): In function `SVSemaphore':
/home/utkrist/Downloads/tesseract-ocr/viewer/svutil.cpp:129: undefined reference to `sem_init'
/usr/local/lib/libtesseract.a(svutil.o): In function `SVSemaphore::Signal()':
/home/utkrist/Downloads/tesseract-ocr/viewer/svutil.cpp:137: undefined reference to `sem_post'
/usr/local/lib/libtesseract.a(svutil.o): In function `SVSemaphore::Wait()':
/home/utkrist/Downloads/tesseract-ocr/viewer/svutil.cpp:145: undefined reference to `sem_wait'
/usr/local/lib/libtesseract.a(svutil.o): In function `SVSync::StartThread(void* (*)(void*), void*)':
/home/utkrist/Downloads/tesseract-ocr/viewer/svutil.cpp:188: undefined reference to `pthread_create'
/usr/local/lib/liblept.a(tiffio.o): In function `pixWriteToTiffStream':
/home/utkrist/leptonica-1.69/src/tiffio.c:646: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:647: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:648: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:650: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:651: undefined reference to `TIFFSetField'
/usr/local/lib/liblept.a(tiffio.o):/home/utkrist/leptonica-1.69/src/tiffio.c:652: more undefined references to `TIFFSetField' follow
/usr/local/lib/liblept.a(tiffio.o): In function `pixWriteToTiffStream':
/home/utkrist/leptonica-1.69/src/tiffio.c:723: undefined reference to `TIFFScanlineSize'
/home/utkrist/leptonica-1.69/src/tiffio.c:732: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:742: undefined reference to `TIFFWriteScanline'
/home/utkrist/leptonica-1.69/src/tiffio.c:688: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:689: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:690: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:691: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:695: undefined reference to `TIFFSetField'
/usr/local/lib/liblept.a(tiffio.o):/home/utkrist/leptonica-1.69/src/tiffio.c:696: more undefined references to `TIFFSetField' follow
/usr/local/lib/liblept.a(tiffio.o): In function `pixWriteToTiffStream':
/home/utkrist/leptonica-1.69/src/tiffio.c:763: undefined reference to `TIFFWriteScanline'
/usr/local/lib/liblept.a(tiffio.o): In function `writeCustomTiffTags':
/home/utkrist/leptonica-1.69/src/tiffio.c:838: undefined reference to `TIFFSetField'
/usr/local/lib/liblept.a(tiffio.o): In function `pixWriteToTiffStream':
/home/utkrist/leptonica-1.69/src/tiffio.c:658: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:750: undefined reference to `TIFFWriteScanline'
/home/utkrist/leptonica-1.69/src/tiffio.c:703: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:713: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:705: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:707: undefined reference to `TIFFSetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:709: undefined reference to `TIFFSetField'
/usr/local/lib/liblept.a(tiffio.o):/home/utkrist/leptonica-1.69/src/tiffio.c:666: more undefined references to `TIFFSetField' follow
/usr/local/lib/liblept.a(tiffio.o): In function `getTiffStreamResolution':
/home/utkrist/leptonica-1.69/src/tiffio.c:1188: undefined reference to `TIFFGetFieldDefaulted'
/home/utkrist/leptonica-1.69/src/tiffio.c:1189: undefined reference to `TIFFGetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:1190: undefined reference to `TIFFGetField'
/usr/local/lib/liblept.a(tiffio.o): In function `tiffReadHeaderTiff':
/home/utkrist/leptonica-1.69/src/tiffio.c:1429: undefined reference to `TIFFGetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:1431: undefined reference to `TIFFGetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:1433: undefined reference to `TIFFGetFieldDefaulted'
/home/utkrist/leptonica-1.69/src/tiffio.c:1435: undefined reference to `TIFFGetFieldDefaulted'
/home/utkrist/leptonica-1.69/src/tiffio.c:1446: undefined reference to `TIFFGetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:1451: undefined reference to `TIFFGetFieldDefaulted'
/usr/local/lib/liblept.a(tiffio.o): In function `pixReadFromTiffStream':
/home/utkrist/leptonica-1.69/src/tiffio.c:287: undefined reference to `TIFFGetFieldDefaulted'
/home/utkrist/leptonica-1.69/src/tiffio.c:288: undefined reference to `TIFFGetFieldDefaulted'
/home/utkrist/leptonica-1.69/src/tiffio.c:299: undefined reference to `TIFFGetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:300: undefined reference to `TIFFGetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:301: undefined reference to `TIFFScanlineSize'
/home/utkrist/leptonica-1.69/src/tiffio.c:334: undefined reference to `TIFFReadRGBAImageOriented'
/home/utkrist/leptonica-1.69/src/tiffio.c:362: undefined reference to `TIFFGetFieldDefaulted'
/home/utkrist/leptonica-1.69/src/tiffio.c:366: undefined reference to `TIFFGetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:399: undefined reference to `TIFFGetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:315: undefined reference to `TIFFReadScanline'
/home/utkrist/leptonica-1.69/src/tiffio.c:382: undefined reference to `TIFFGetField'
/usr/local/lib/liblept.a(tiffio.o): In function `openTiff':
/home/utkrist/leptonica-1.69/src/tiffio.c:1721: undefined reference to `TIFFOpen'
/usr/local/lib/liblept.a(tiffio.o): In function `fopenTiff':
/home/utkrist/leptonica-1.69/src/tiffio.c:1689: undefined reference to `TIFFFdOpen'
/usr/local/lib/liblept.a(tiffio.o): In function `fopenTiffMemstream':
/home/utkrist/leptonica-1.69/src/tiffio.c:1983: undefined reference to `TIFFClientOpen'
/usr/local/lib/liblept.a(tiffio.o): In function `pixReadStreamTiff':
/home/utkrist/leptonica-1.69/src/tiffio.c:231: undefined reference to `TIFFReadDirectory'
/home/utkrist/leptonica-1.69/src/tiffio.c:237: undefined reference to `TIFFCleanup'
/home/utkrist/leptonica-1.69/src/tiffio.c:241: undefined reference to `TIFFCleanup'
/home/utkrist/leptonica-1.69/src/tiffio.c:226: undefined reference to `TIFFCleanup'
/usr/local/lib/liblept.a(tiffio.o): In function `pixWriteTiffCustom':
/home/utkrist/leptonica-1.69/src/tiffio.c:516: undefined reference to `TIFFClose'
/usr/local/lib/liblept.a(tiffio.o): In function `pixWriteStreamTiff':
/home/utkrist/leptonica-1.69/src/tiffio.c:576: undefined reference to `TIFFCleanup'
/home/utkrist/leptonica-1.69/src/tiffio.c:572: undefined reference to `TIFFCleanup'
/usr/local/lib/liblept.a(tiffio.o): In function `fprintTiffInfo':
/home/utkrist/leptonica-1.69/src/tiffio.c:1078: undefined reference to `TIFFPrintDirectory'  
/home/utkrist/leptonica-1.69/src/tiffio.c:1079: undefined reference to `TIFFClose'
/usr/local/lib/liblept.a(tiffio.o): In function `tiffGetCount':
/home/utkrist/leptonica-1.69/src/tiffio.c:1114: undefined reference to `TIFFReadDirectory'
/home/utkrist/leptonica-1.69/src/tiffio.c:1118: undefined reference to `TIFFCleanup'
/usr/local/lib/liblept.a(tiffio.o): In function `getTiffResolution':
/home/utkrist/leptonica-1.69/src/tiffio.c:1155: undefined reference to `TIFFCleanup'
/usr/local/lib/liblept.a(tiffio.o): In function `freadHeaderTiff':
/home/utkrist/leptonica-1.69/src/tiffio.c:1320: undefined reference to `TIFFReadDirectory'
/home/utkrist/leptonica-1.69/src/tiffio.c:1326: undefined reference to `TIFFCleanup'
/usr/local/lib/liblept.a(tiffio.o): In function `readHeaderMemTiff':
/home/utkrist/leptonica-1.69/src/tiffio.c:1382: undefined reference to `TIFFReadDirectory'
/home/utkrist/leptonica-1.69/src/tiffio.c:1383: undefined reference to `TIFFClose'
/home/utkrist/leptonica-1.69/src/tiffio.c:1390: undefined reference to `TIFFClose'
/usr/local/lib/liblept.a(tiffio.o): In function `findTiffCompression':
/home/utkrist/leptonica-1.69/src/tiffio.c:1492: undefined reference to `TIFFGetFieldDefaulted'
/home/utkrist/leptonica-1.69/src/tiffio.c:1494: undefined reference to `TIFFCleanup'
/usr/local/lib/liblept.a(tiffio.o): In function `extractG4DataFromFile':
/home/utkrist/leptonica-1.69/src/tiffio.c:1599: undefined reference to `TIFFGetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:1602: undefined reference to `TIFFClose'
/home/utkrist/leptonica-1.69/src/tiffio.c:1606: undefined reference to `TIFFGetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:1607: undefined reference to `TIFFGetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:1608: undefined reference to `TIFFGetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:1611: undefined reference to `TIFFGetField'
/home/utkrist/leptonica-1.69/src/tiffio.c:1613: undefined reference to `TIFFClose'
/usr/local/lib/liblept.a(tiffio.o): In function `pixReadMemTiff':
/home/utkrist/leptonica-1.69/src/tiffio.c:2035: undefined reference to `TIFFReadDirectory'
/home/utkrist/leptonica-1.69/src/tiffio.c:2042: undefined reference to `TIFFClose'
/home/utkrist/leptonica-1.69/src/tiffio.c:2029: undefined reference to `TIFFClose'
/usr/local/lib/liblept.a(tiffio.o): In function `pixWriteMemTiffCustom':
/home/utkrist/leptonica-1.69/src/tiffio.c:2125: undefined reference to `TIFFClose'
/usr/local/lib/liblept.a(jpegio.o): In function `jpeg_error_do_not_exit':
/home/utkrist/leptonica-1.69/src/jpegio.c:1118: undefined reference to `jpeg_destroy'
/usr/local/lib/liblept.a(jpegio.o): In function `pixReadStreamJpeg':
/home/utkrist/leptonica-1.69/src/jpegio.c:259: undefined reference to `jpeg_std_error'
/home/utkrist/leptonica-1.69/src/jpegio.c:262: undefined reference to `jpeg_CreateDecompress'
/home/utkrist/leptonica-1.69/src/jpegio.c:265: undefined reference to `jpeg_set_marker_processor'
/home/utkrist/leptonica-1.69/src/jpegio.c:266: undefined reference to `jpeg_stdio_src'
/home/utkrist/leptonica-1.69/src/jpegio.c:267: undefined reference to `jpeg_read_header'
/home/utkrist/leptonica-1.69/src/jpegio.c:272: undefined reference to `jpeg_calc_output_dimensions'
/home/utkrist/leptonica-1.69/src/jpegio.c:310: undefined reference to `jpeg_start_decompress'
/home/utkrist/leptonica-1.69/src/jpegio.c:374: undefined reference to `jpeg_read_scanlines'
/home/utkrist/leptonica-1.69/src/jpegio.c:399: undefined reference to `jpeg_finish_decompress'
/home/utkrist/leptonica-1.69/src/jpegio.c:400: undefined reference to `jpeg_destroy_decompress'
/home/utkrist/leptonica-1.69/src/jpegio.c:336: undefined reference to `jpeg_read_scanlines'
/home/utkrist/leptonica-1.69/src/jpegio.c:315: undefined reference to `jpeg_start_decompress'
/usr/local/lib/liblept.a(jpegio.o): In function `freadHeaderJpeg':
/home/utkrist/leptonica-1.69/src/jpegio.c:491: undefined reference to `jpeg_std_error'
/home/utkrist/leptonica-1.69/src/jpegio.c:493: undefined reference to `jpeg_CreateDecompress'
/home/utkrist/leptonica-1.69/src/jpegio.c:494: undefined reference to `jpeg_stdio_src'
/home/utkrist/leptonica-1.69/src/jpegio.c:495: undefined reference to `jpeg_read_header'
/home/utkrist/leptonica-1.69/src/jpegio.c:496: undefined reference to `jpeg_calc_output_dimensions'
/home/utkrist/leptonica-1.69/src/jpegio.c:507: undefined reference to `jpeg_destroy_decompress'
/usr/local/lib/liblept.a(jpegio.o): In function `fgetJpegResolution':
/home/utkrist/leptonica-1.69/src/jpegio.c:545: undefined reference to `jpeg_std_error'
/home/utkrist/leptonica-1.69/src/jpegio.c:547: undefined reference to `jpeg_CreateDecompress'
/home/utkrist/leptonica-1.69/src/jpegio.c:548: undefined reference to `jpeg_stdio_src'
/home/utkrist/leptonica-1.69/src/jpegio.c:549: undefined reference to `jpeg_read_header'
/home/utkrist/leptonica-1.69/src/jpegio.c:562: undefined reference to `jpeg_destroy_decompress'
/usr/local/lib/liblept.a(jpegio.o): In function `pixWriteStreamJpeg':
/home/utkrist/leptonica-1.69/src/jpegio.c:699: undefined reference to `jpeg_std_error'
/home/utkrist/leptonica-1.69/src/jpegio.c:702: undefined reference to `jpeg_CreateCompress'
/home/utkrist/leptonica-1.69/src/jpegio.c:703: undefined reference to `jpeg_stdio_dest'
/home/utkrist/leptonica-1.69/src/jpegio.c:717: undefined reference to `jpeg_set_defaults'
/home/utkrist/leptonica-1.69/src/jpegio.c:732: undefined reference to `jpeg_set_quality'
/home/utkrist/leptonica-1.69/src/jpegio.c:754: undefined reference to `jpeg_start_compress'
/home/utkrist/leptonica-1.69/src/jpegio.c:757: undefined reference to `jpeg_write_marker'
/home/utkrist/leptonica-1.69/src/jpegio.c:797: undefined reference to `jpeg_write_scanlines'
/home/utkrist/leptonica-1.69/src/jpegio.c:800: undefined reference to `jpeg_finish_compress'
/home/utkrist/leptonica-1.69/src/jpegio.c:809: undefined reference to `jpeg_destroy_compress'
/home/utkrist/leptonica-1.69/src/jpegio.c:784: undefined reference to `jpeg_write_scanlines'
/home/utkrist/leptonica-1.69/src/jpegio.c:734: undefined reference to `jpeg_simple_progression'
/home/utkrist/leptonica-1.69/src/jpegio.c:699: undefined reference to `jpeg_std_error'
/home/utkrist/leptonica-1.69/src/jpegio.c:702: undefined reference to `jpeg_CreateCompress'
/home/utkrist/leptonica-1.69/src/jpegio.c:703: undefined reference to `jpeg_stdio_dest'
/usr/local/lib/liblept.a(pngio.o): In function `pixReadStreamPng':
/home/utkrist/leptonica-1.69/src/pngio.c:182: undefined reference to `png_create_read_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:186: undefined reference to `png_create_info_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:191: undefined reference to `png_create_info_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:202: undefined reference to `png_init_io'
/home/utkrist/leptonica-1.69/src/pngio.c:218: undefined reference to `png_read_png'
/home/utkrist/leptonica-1.69/src/pngio.c:220: undefined reference to `png_get_rows'
/home/utkrist/leptonica-1.69/src/pngio.c:221: undefined reference to `png_get_image_width'
/home/utkrist/leptonica-1.69/src/pngio.c:222: undefined reference to `png_get_image_height'
/home/utkrist/leptonica-1.69/src/pngio.c:223: undefined reference to `png_get_bit_depth'
/home/utkrist/leptonica-1.69/src/pngio.c:224: undefined reference to `png_get_rowbytes'
/home/utkrist/leptonica-1.69/src/pngio.c:225: undefined reference to `png_get_color_type'
/home/utkrist/leptonica-1.69/src/pngio.c:226: undefined reference to `png_get_channels'
/home/utkrist/leptonica-1.69/src/pngio.c:336: undefined reference to `png_get_x_pixels_per_meter'
/home/utkrist/leptonica-1.69/src/pngio.c:337: undefined reference to `png_get_y_pixels_per_meter'
/home/utkrist/leptonica-1.69/src/pngio.c:342: undefined reference to `png_get_text'
/home/utkrist/leptonica-1.69/src/pngio.c:346: undefined reference to `png_destroy_read_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:198: undefined reference to `png_destroy_read_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:241: undefined reference to `png_destroy_read_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:248: undefined reference to `png_get_PLTE'
/home/utkrist/leptonica-1.69/src/pngio.c:187: undefined reference to `png_destroy_read_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:192: undefined reference to `png_destroy_read_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:261: undefined reference to `png_destroy_read_struct'
/usr/local/lib/liblept.a(pngio.o): In function `fgetPngResolution':
/home/utkrist/leptonica-1.69/src/pngio.c:534: undefined reference to `png_create_read_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:537: undefined reference to `png_create_info_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:551: undefined reference to `png_init_io'
/home/utkrist/leptonica-1.69/src/pngio.c:552: undefined reference to `png_read_png'
/home/utkrist/leptonica-1.69/src/pngio.c:554: undefined reference to `png_get_x_pixels_per_meter'
/home/utkrist/leptonica-1.69/src/pngio.c:555: undefined reference to `png_get_y_pixels_per_meter'
/home/utkrist/leptonica-1.69/src/pngio.c:559: undefined reference to `png_destroy_read_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:545: undefined reference to `png_destroy_read_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:538: undefined reference to `png_destroy_read_struct'
/usr/local/lib/liblept.a(pngio.o): In function `pixWriteStreamPng':
/home/utkrist/leptonica-1.69/src/pngio.c:701: undefined reference to `png_create_write_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:705: undefined reference to `png_create_info_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:716: undefined reference to `png_init_io'
/home/utkrist/leptonica-1.69/src/pngio.c:721: undefined reference to `png_set_compression_level'
/home/utkrist/leptonica-1.69/src/pngio.c:754: undefined reference to `png_set_IHDR'
/home/utkrist/leptonica-1.69/src/pngio.c:764: undefined reference to `png_set_pHYs'
/home/utkrist/leptonica-1.69/src/pngio.c:804: undefined reference to `png_set_text'
/home/utkrist/leptonica-1.69/src/pngio.c:808: undefined reference to `png_write_info'
/home/utkrist/leptonica-1.69/src/pngio.c:840: undefined reference to `png_set_rows'
/home/utkrist/leptonica-1.69/src/pngio.c:843: undefined reference to `png_write_image'
/home/utkrist/leptonica-1.69/src/pngio.c:844: undefined reference to `png_write_end'
/home/utkrist/leptonica-1.69/src/pngio.c:886: undefined reference to `png_destroy_write_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:712: undefined reference to `png_destroy_write_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:781: undefined reference to `png_set_PLTE'
/home/utkrist/leptonica-1.69/src/pngio.c:791: undefined reference to `png_set_gAMA'
/home/utkrist/leptonica-1.69/src/pngio.c:860: undefined reference to `png_write_rows'
/home/utkrist/leptonica-1.69/src/pngio.c:882: undefined reference to `png_write_end'
/home/utkrist/leptonica-1.69/src/pngio.c:706: undefined reference to `png_destroy_write_struct'
/home/utkrist/leptonica-1.69/src/pngio.c:877: undefined reference to `png_write_rows'
/home/utkrist/leptonica-1.69/src/pngio.c:829: undefined reference to `png_destroy_write_struct'
/usr/local/lib/liblept.a(zlibmem.o): In function `zlibCompress':
/home/utkrist/leptonica-1.69/src/zlibmem.c:121: undefined reference to `deflateInit_'
/home/utkrist/leptonica-1.69/src/zlibmem.c:132: undefined reference to `deflate'
/home/utkrist/leptonica-1.69/src/zlibmem.c:144: undefined reference to `deflateEnd'
/usr/local/lib/liblept.a(zlibmem.o): In function `zlibUncompress':
/home/utkrist/leptonica-1.69/src/zlibmem.c:201: undefined reference to `inflateInit_'
/home/utkrist/leptonica-1.69/src/zlibmem.c:212: undefined reference to `inflate'
/home/utkrist/leptonica-1.69/src/zlibmem.c:224: undefined reference to `inflateEnd'
collect2: ld returned 1 exit status
make[2]: *** [getText] Error 1
make[1]: *** [CMakeFiles/getText.dir/all] Error 2
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:36:29.420

我遇到过几次这样的问题，我所做的就是指示CMake生成一个UNIX Makefile，然后看看Makefile正在执行什么g++命令。

我知道这不是一个很好的答案，但也许它会有所帮助。

# php - 检索存在特定 user_id 的所有行的数据？

> ID：15628897
> 
> 赞同：0
> 
> 时间：2013-03-26T03:31:00.897
> 
> 标签：php, html, mysql, echo

我正在处理一个用户个人资料页面，我已经将它放到了用户可以发布文本的位置，并将被上传到“帖子”数据库。这一切都很好。但是现在我想把它带到如果用户访问用户个人资料的位置，它将回显他们所有的用户帖子。数据库的布局是这样的：

`post_id` `user_id` `content`

而且我想使它在用户登陆用户页面时获取他们的 $user_id 然后形成一个 mysql_query 然后回显出他们在`users`数据库中存在的所有帖子。最好的方法是什么？谢谢

到目前为止，我已经尝试过： `mysql_result("SELECT * FROM posts WHERE user_id = $user_id");`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:44:01.487

你在做正确的事。

您必须使用 while 循环获取所有数据。

喜欢。

```
$res=mysql_query("SELECT * FORM posts WHERE user_id=$user_id");

while($row=mysql_fetch_assoc($res))
{

echo $row['post_id'];
} 
```

你明白我的意思了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:49:12.183

```
 // execute the query
$stmt = mysql_query("SELECT * FROM posts WHERE user_id ='".$user_id."'"); 
```

然后使用用于获取数据和显示的不同 php 函数进行获取。

```
while($row = mysql_fetch_array($stmt)){
         echo $row['db_column_field'];
} 
```

# c# - 独占锁定文件，然后删除/移动它

> ID：15628902
> 
> 赞同：16
> 
> 时间：2013-03-26T03:31:58.537
> 
> 标签：c#, .net, winapi, file-locking

我在 C# 中实现了一个应该监视目录的类，在文件被删除时处理它们，然后在处理完成后立即删除（或移动）处理过的文件。由于可以有多个线程运行此代码，第一个获取文件的线程以独占方式锁定它，因此没有其他线程将读取同一文件**，也没有外部进程或用户可以以任何方式访问**。我想保持锁定直到文件被删除/移动，所以没有另一个线程/进程/用户访问它的风险。

到目前为止，我尝试了 2 个实现选项，但没有一个可以按我的意愿工作。

*选项1*

```
FileStream fs = file.Open(FileMode.Open, FileAccess.Read, FileShare.Delete);
//Read and process
File.Delete(file.FullName); //Or File.Move, based on a flag
fs.Close(); 
```

*选项 2*

```
FileStream fs = file.Open(FileMode.Open, FileAccess.Read, FileShare.None);
//Read and process
fs.Close();
File.Delete(file.FullName); //Or File.Move, based on a flag 
```

*选项 1*的问题是其他进程可以访问该文件（它们可以删除、移动、重命名），而它应该被完全锁定。

*选项 2*的问题是文件在被删除之前被解锁，因此其他进程/线程可以在删除发生之前锁定文件，因此删除将失败。

我正在寻找一些可以使用我已经拥有独占访问权限的文件句柄执行删除的 API。

*编辑*

被监视的目录驻留在 pub 共享中，因此其他用户和进程可以访问它。 **问题不是在我自己的进程中管理锁。我要解决的问题是如何专门锁定文件，然后在不释放锁定的情况下移动/删除它**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T04:44:13.087

想到了两个解决方案。

第一个也是最简单的方法是让线程将文件重命名为其他线程不会触及的名称。诸如“ `filename.dat.<unique number>`”之类`<unique number>`的东西，特定于线程的东西在哪里。然后线程可以随心所欲地处理文件。

如果两个线程同时获取文件，则只有其中一个线程能够重命名它。您必须处理其他线程中发生的 IOException，但这应该不是问题。

另一种方法是让一个线程监视目录并将文件名放入[`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312.aspx). 工作线程从该队列中获取项目并处理它们。因为只有一个线程可以从队列中获取该特定项目，所以没有争用。

该`BlockingCollection`解决方案的设置稍微复杂一点（但只有一点点），但应该比具有多个线程监视同一目录的解决方案执行得更好。

## 编辑

您编辑的问题在很大程度上改变了问题。如果您在可公开访问的目录中有文件，则在将其放置在该目录与您的线程锁定它之间的任何时间点，它都有被查看、修改或删除的风险。

由于您在打开文件时无法移动或删除文件（我不知道），因此最好的办法是让线程将文件移动到不可公开访问的目录。理想情况下到一个被锁定的目录，这样只有运行您的应用程序的用户才能访问。所以你的代码变成：

```
File.Move(sourceFilename, destFilename);
// the file is now in a presumably safe place.
// Assuming that all of your threads obey the rules,
// you have exclusive access by agreement. 
```

## 编辑#2

另一种可能性是独占打开文件并使用您自己的复制循环复制它，复制完成后使文件保持打开状态。然后您可以倒带文件并进行处理。就像是：

```
var srcFile = File.Open(/* be sure to specify exclusive access */);
var destFile = File.OpenWrite(/* destination path */);
// copy the file
var buffer = new byte[32768];
int bytesRead = 0;
while ((bytesRead = srcFile.Read(buffer, 0, buffer.Length)) != 0)
{
    destFile.Write(buffer, 0, bytesRead);
}
// close destination
destFile.Close();
// rewind source
srcFile.Seek(0, SeekOrigin.Start);
// now read from source to do your processing.
// for example, to get a StreamReader, just pass the srcFile stream to the constructor. 
```

有时，您可以处理然后复制。这取决于您完成处理后流是否保持打开状态。通常，代码会执行以下操作：

```
using (var strm = new StreamReader(srcStream, ...))
{
    // do stuff here
} 
```

最终关闭流*和 srcStream*。您必须像这样编写代码：

```
using (var srcStream = new FileStream( /* exclusive access */))
{
    var reader = new StreamReader(srcStream, ...);
    // process the stream, leaving the reader open
    // rewind srcStream
    // copy srcStream to destination
    // close reader
} 
```

可行，但笨拙。

哦，如果您想在删除文件之前消除有人读取文件的可能性，只需在关闭文件之前将文件截断为 0。如：

```
srcStream.Seek(0, SeekOrigin.Begin);
srcStream.SetLength(0); 
```

这样，如果有人在您删除它之前确实找到了它，那么就没有什么可修改的了，等等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-22T21:10:56.477

这是我所知道的最强大的方法，如果您在多个服务器上使用这些文件有多个进程，它甚至可以正常工作。

与其锁定文件本身，不如创建一个用于锁定的临时文件，这样您就可以毫无问题地解锁/移动/删除原始文件，但仍然要确保至少在任何服务器/线程/进程上运行的代码的任何副本都会不要尝试同时使用该文件。

伪代码：

```
try
{
    // get an exclusive cross-server/process/thread lock by opening/creating a temp file with no sharing allowed
    var lockFilePath = $"{file}.lck";
    var lockFile = File.Open(lockFilePath, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.None);

    try
    {
        // open file itself with no sharing allowed, in case some process that does not use our locking schema is trying to use it
        var fileHandle = File.Open(file, FileMode.Open, FileAccess.Read, FileShare.None);

        // TODO: add processing -- we have exclusive access to the file, and also the locking file

        fileHandle.Close();

        // at this point it is possible for some other process that does not use our locking schema to lock the file before we
        //  move it, causing us to process this file again -- we would always have to handle issues where we failed to move
        //  the file anyway (maybe we just lost power, or crashed?) so we had to design around this no matter what

        File.Move(file, archiveDestination);
    }
    finally
    {
        lockFile.Close();

        try
        {
            File.Delete(lockFilePath);
        }
        catch (Exception ex)
        {
            // another process opened locked file after we closed it, before it was deleted -- safely ignore, other process will delete lock file
        }
    }
}
catch (Exception ex)
{
    // another process already has exclusive access to the lock file, we don't need to do anything
    // or we failed while processing, in which case we did not move the file so it will be tried again by this process or another
} 
```

这种模式的一个好处是它也可以用于文件存储支持锁定的时候。例如，如果您尝试在 FTP/SFTP 服务器上处理文件，您可以让临时锁定文件使用普通驱动器（或 SMB 共享）——因为锁定文件不必与文件本身。

我不能相信这个想法，它比 PC 存在的时间更长，并且被 Microsoft Word、Excel、Access 和大多数旧数据库系统等大量应用程序使用。阅读：经过良好测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-26T03:43:16.420

文件系统本身本质上是易变的，因此很难尝试做你想做的事。这是文件系统中的经典竞争条件。使用选项 2，您也可以将文件移动到您在工作*之前*创建的“处理”或暂存目录。YMMV 关于性能，但您至少可以对其进行基准测试，看看它是否符合您的需求。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-26T03:40:17.417

您可能需要从生成线程实现某种形式的共享/同步列表。如果父线程通过定期检查目录来跟踪文件，那么它可以将它们交给子线程，这将消除锁定问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-07T23:31:32.070

这个解决方案，被认为不是 100% 防水，很可能会满足您的需求。（它为我们做了。）

使用两个锁，它们一起为您提供对文件的独占访问权限。当您准备好删除该文件时，您释放*其中一个*，然后删除该文件。剩余的锁仍然会阻止大多数其他进程获得锁。

```
FileInfo file = ...

// Get read access to the file and only allow other processes write or delete access.
// Keeps others from locking the file for reading.
var readStream = file.Open(FileMode.Open, FileAccess.Read, FileShare.Write | FileShare.Delete);
FileStream preventWriteAndDelete;
try
{
    // Now try to get a lock on than only allows others to read the file.  We can acquire both
    // locks because they each allow the other.  Together, they give us exclusive access to the
    // file.
    preventWriteAndDelete = file.Open(FileMode.Open, FileAccess.Write, FileShare.Read);
}
catch
{
    // We couldn't get the second lock, so release the first.
    readStream.Dispose();
    throw;
} 
```

现在您可以读取文件（使用`readStream`）。如果您需要写入它，则必须使用另一个流来执行此操作。

当您准备好删除文件时，您首先释放阻止写入和删除的锁，同时仍然持有阻止读取的锁。

```
preventWriteAndDelete.Dispose(); // Release lock that prevents deletion.
file.Delete();
// This lock specifically allowed deletion, but with the file gone, we're done with it now.
readStream.Dispose(); 
```

另一个进程（或线程）获得文件锁定的唯一机会是，如果它请求共享写锁定，则它赋予它只写访问权限并允许其他人写入文件。这不是很常见。大多数进程尝试共享读锁（允许其他人读取的读访问权限，但不允许写或删除）或排他写锁（不共享的写或读/写访问权限）。这两种常见情况都会失败。共享读/写锁（请求读/写访问并允许其他人相同）也会失败。

此外，进程请求和获取共享写锁的机会窗口非常小。如果一个进程正在努力获取这样的锁，那么它可能会成功，但很少有应用程序这样做。因此，除非您的场景中有这样的应用程序，否则此策略应该可以满足您的需求。

您也可以使用相同的策略来移动文件。

```
preventWriteAndDelete.Dispose();
file.MoveTo(destination);
readStream.Dispose(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-26T03:45:00.393

您可以使用[**`MoveFileEx`**API 函数](http://msdn.microsoft.com/en-us/library/aa365240%28VS.85%29.aspx)在下次重新启动时将文件标记为删除。[资源](https://stackoverflow.com/questions/1040/how-do-i-delete-a-file-which-is-locked-by-another-process-in-c?rq=1)

# java - 消除 我正在使用以下格式来响应 Web 服务。 <name>abc</name> <detail><response><age>20</age>blahblah<m 0="" 2829="" 问问题="" 2013-03-26t03:32:10.943="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我正在使用以下格式来响应="" web="" 服务。="" <name="">abc <detail><response><age>20</age>blahblah<mobile>12345</mobile></response></detail> <detail></detail>由于要求，我需要在标签内返回 xml 格式的数据。在我的 java 类中，我使用 Xstream 解析并格式化为 xml 并放入 Detail 标记中。 但是当我使用 SOAPUI 进行测试时，我得到了额外的.. <</m></response>]]>insdies Detail 标签。 如何避免为 xml 响应使用那些 CDATA 标记？ Matlab eigs因大矩阵而失败 在 matlab 中，我使用函数 'eigs()' 来获取大矩阵 (5000x5000) 的一些（大约 10 个）最小特征向量。像这样： [V,UU] = eigs(A, 10,'sm'); 经过一番尝试，我发现矩阵“eigs()”能够处理的最大尺寸在 1300 到 1500 之间。 对于较大的矩阵，它会弹出错误消息，例如 '(A-sigma*I)is single。偏移是一个特征值。或有关命令行窗口中的“APPAPK”（使用“sr”时）的内容。 我从谷歌得到了一些关于这些错误的信息，但它们是关于一些我不太明白的内部代码或定理（听起来像一个）。 那么，我想知道 eigs 是否有任何技巧可以使其与大型矩阵一起使用？ 感谢您的时间和帮助。 javaxmlweb-services 4 1 回答 1 This answer is useful 0 用于告诉XML meaning不应采用它并将其视为调用的普通文本character data。因此 Parser 不会在其中寻找任何 XML 含义。正如 Dave Newton 和 kshitij 所说，它将在将其转换为对象时自动删除。如果你不应该解析它，因为它没有问题。 于 2013-03-26T06:31:38.573 回答 Related 1 python - 当传递错误类型的对象时，如何防止 Django ORM 出错？ 1 jquery - 我为最近丢失的功能开发的地图 1 c# - 我可以为 Protobuf-net 设置一个全局对象工厂吗？ 3 regex - 常规 vs LALR(1)：什么更快 1 jquery - easySlider 插件文本在滚动时不隐藏 1 php - PHP：递归字符串子集提取算法 3 python - 服务器响应中的 BOM 搞砸了 json 解析 1 excel - 循环并计算包含数据的excel单元格，然后循环多次执行一个动作 1 arrays - t.test 数组函数 2 ocaml - 从语法 OCaml 构建函数 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</detail>

> ID：15628904
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, xml, web-services

我正在使用以下格式来响应 Web 服务。

```
<Name>abc</Name>
<Detail>
 <RESPONSE>
    <Age>20</Age>
    <Address>blahblah</Address>
    <Mobile>12345</Mobile>
 </RESPONSE>
</Detail> 
```

`<Detail></Detail>`由于要求，我需要在标签内返回 xml 格式的数据。在我的 java 类中，我使用 Xstream 解析并格式化为 xml 并放入 Detail 标记中。

但是当我使用 SOAPUI 进行测试时，我得到了额外的`<![CDATA[<RESPONSE>.. <</RESPONSE>]]>`insdies Detail 标签。

如何避免为 xml 响应使用那些 CDATA 标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:31:38.573

`<![CDATAP[......]]>` 用于告诉`XML meaning`不应采用它并将其视为调用的普通文本`character data`。因此 Parser 不会在其中寻找任何 XML 含义。正如 Dave Newton 和 kshitij 所说，它将在将其转换为对象时自动删除。如果你不应该解析它，因为它没有问题。

# matlab - Matlab eigs因大矩阵而失败

> ID：15628907
> 
> 赞同：4
> 
> 时间：2013-03-26T03:32:27.147
> 
> 标签：matlab, sparse-matrix

在 matlab 中，我使用函数 'eigs()' 来获取大矩阵 (5000x5000) 的一些（大约 10 个）最小特征向量。像这样：

```
[V,UU] = eigs(A, 10,'sm'); 
```

经过一番尝试，我发现矩阵“eigs()”能够处理的最大尺寸在 1300 到 1500 之间。

对于较大的矩阵，它会弹出错误消息，例如 '(A-sigma*I)is single。偏移是一个特征值。或有关命令行窗口中的“APPAPK”（使用“sr”时）的内容。

我从谷歌得到了一些关于这些错误的信息，但它们是关于一些我不太明白的内部代码或定理（听起来像一个）。

那么，我想知道 eigs 是否有任何技巧可以使其与大型矩阵一起使用？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T10:14:10.897

您可以尝试添加具有相同大小的单位矩阵，例如： A = A + k*eye(size(A,1)); 这里 k 是一个小于 1 的实验系数。这样做可以保证矩阵 A 是非奇异的

# c++ - 乘以定义的符号 - 链接器错误

> ID：15628909
> 
> 赞同：0
> 
> 时间：2013-03-26T03:32:46.250
> 
> 标签：c++, linker

当我使用 GHS 多编译器构建和链接我的代码时，我遇到了一个问题。大致思路是这样的：

base.h -->

```
#ifndef base_h
#define base_h
class Base
{
    void basefncn1(); // defined in src file
    void basefncn2(); // defined in src file
    void basefncn3(); // defined in src file
}
#endif 
```

接口.h -->

```
#ifndef interface_h
#define interface_h

#include "base.h"
class Interface : public Base
{
    void basefncn1();
}

#endif 
```

派生类.h -->

```
#ifndef derived_h
#define derived_h

#include "base.h"
#include "interface.h"
class Derived : public Interface
{
    void basefncn1();
}

#endif 
```

我得到的链接器错误是：

```
basefncn2() and basefncn3() is multiply defined -> Defined both in base.o and derived.o. 
```

头文件受到保护。

我做错什么了吗？

编辑：我尝试更改 interface.h 文件。该函数现在在 interface.cpp 中定义。所以基本上， interface.h 和 derived.h 中没有定义函数。

# google-chrome - 网页卡在 Chrome 中加载

> ID：15628916
> 
> 赞同：0
> 
> 时间：2013-03-26T03:33:10.087
> 
> 标签：google-chrome, loading, freeze, assets, missing-data

我的网页卡在 Chrome 中加载（页面选项卡上的小旋转图标，鼠标光标也卡在加载版本中），但奇怪的是网站中的所有内容都显示正常。这在 Firefox 或 IE 中不会发生。

有没有人对它的原因有任何理论？是因为某些资产不存在吗？例如：

```
<img src="pic.png"> 
```

但是“pic.png”不存在吗？

如果是这种情况，我如何检查代码以确保所有资产（包括 css/js/img/sound/video 文件）都作为文档链接存在？我的 html 文件很大，逐行检查需要很长时间。

# css - 用户可自定义的颜色 - 是否对脚本攻击开放？如何预防？

> ID：15628919
> 
> 赞同：1
> 
> 时间：2013-03-26T03:33:22.943
> 
> 标签：css, xss

我有一个这样的表格，用于登录到我的网站的用户：

```
<form>
<input name="fontColor"><input type="submit">
</form> 
```

这允许用户使用字体颜色自定义他们自己的页面（其他登录用户也可以看到他们的页面）。这种字体颜色进入页面的方式是通过页面头部的动态样式表，其结构如下：

```
body { color: <fontColor>; } 
```

假设用户为 fontColor 输入了这个：

`default; behavior: url(http://www.myscript.com/script.htc)`

然后CSS会导致

`body {color: default;behavior: url(http://www.myscript.com/script.htc)}`

这意味着用户“会员页面”将在页面上插入 script.htc，因此访问该会员页面的其他成员将执行该脚本（从而导致对其他访问者的攻击）。

为了防止这种情况，服务器将忽略字符：`;{}`输入到“fontColor”字段中的字符。

在这种情况下，产生的 CSS 将是无效的，并且无法正常工作。

`body {color: defaultbehavior: url(http://www.myscript.com/script.htc)}`

基本上我的问题归结为这些：

1.  还有一种方法可以在不使用`{};`字符的情况下插入脚本吗？
2.  假设`{};`被允许，是否有其他方式（除了在 IE 中工作的行为样式）不需要的脚本可以插入到 CSS 中？

我知道这里最好的解决方案是验证 fontColor，这样用户就没有太多的颜色自由了，但出于学术目的，我仍然想尽可能多地了解可能发生的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:45:20.333

XSS 攻击实际上只受限于攻击者的想象力，所以我会确保有一个严格的允许规则/模式的白名单。仅仅因为 CSS 规则无效并不一定意味着所有浏览器都不会尝试通过`url`即使在有效的`behavior`or`background-image`规则之外包含其他文件。另一个可能的向量是`expression`，即使它没有得到很好的支持。

我当然无法在这里列出完整的列表，但是要认识到 XSS 的重要一点是，任何向量都没有已知的限制，并且可以在您不注意的情况下利用漏洞。从你想要允许的东西而不是你想要拒绝的东西开始工作要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T01:48:37.403

除了 CSS 中的攻击之外，要考虑的另一件事是 SQL 注入攻击。由于我想象您将样式数据存储在数据库中，因此您需要担心该数据中的内容。使用[mysqli::real_escape_string](http://www.php.net/manual/en/mysqli.real-escape-string.php)是为存储准备数据的良好开端。

在这种情况下，由于您对颜色数据非常感兴趣，因此可以使用颜色选择器不仅使您的界面易于使用，还可以限制您希望接收的数据类型。攻击者可以轻松地修改页面以让他们提交他们想要的任何内容，但是当这是您的工具生成的内容时，严格过滤十六进制值要简单得多。

# windows - (WP7) Windows live SDK 用户注销或以其他用户身份登录

> ID：15628925
> 
> 赞同：0
> 
> 时间：2013-03-26T03:34:02.867
> 
> 标签：windows, windows-phone-7, sdk, live, logout

我一直在寻找有关如何使用户注销并且仍然能够使用不同的电子邮件帐户登录的解决方案。目前，它会自动登录您输入的第一个帐户。

我的来源：http: [//blogs.msdn.com/b/shelly_guos_ms_blog/archive/2011/09/20/get-started-on-live-sdk-for-windows-phone.aspx](http://blogs.msdn.com/b/shelly_guos_ms_blog/archive/2011/09/20/get-started-on-live-sdk-for-windows-phone.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:47:38.670

确保您不在您的范围内使用“wl.signin”。如果您一直在测试您的应用程序，请进入您的真实帐户的帐户首选项，然后从应用程序的访问权限中删除此选项。现在，这将允许多个用户登录。

```
private LiveAuthClient authClient;

private void PhoneApplicationPage_Loaded_1(object sender, RoutedEventArgs e)
{
    this.authClient = new LiveAuthClient("yourclientidhere");
} 
```

然后你可以打电话`this.authClient.Logout()`；当您想更改用户时。

# web-crawler - 如何使用痛风

> ID：15628926
> 
> 赞同：11
> 
> 时间：2013-03-26T03:34:34.527
> 
> 标签：web-crawler, screen-scraping, goutte

**问题**：
无法完全理解 Goutte 网络爬虫。

**请求**：
有人可以帮助我理解或提供代码来帮助我更好地理解如何使用 Goutte 网络爬虫吗？我已经阅读了 README.md。我正在寻找比提供的信息更多的信息，例如 Goutte 中可用的选项以及如何编写这些选项，或者当您查看表单时，您是否搜索表单的 name= 或 id=？

**试图被抓取的网页布局**：
**第 1 步**：
网页有一个表单，有一个单选按钮来选择要填写的表单类型（即名称或许可证）。它默认为带有名字和姓氏文本框的名称以及状态下拉菜单选择列表。如果您选择 Radio，则 jQuery 或 JavaScript 会使 First Name 和 Last Name 文本框消失，并出现 License 文本框。

**第 2 步**：
成功提交表单后，它会将您带到一个包含多个链接的页面。我们可以进入其中两个来获取我们需要的信息。

**第 3 步**：
成功单击链接后，我们希望第三页包含我们正在寻找的数据，并且我们希望将该数据存储到 php 变量中。

**提交错误信息**：
如果提交错误信息，则 jQuery/Javascript 将返回“未找到记录”消息。在与提交相同的页面上。

**注意**：
首选方法是选择许可证单选按钮，填写许可证号，选择州，然后提交表格。我已经阅读了大量关于 Goutte 的帖子和博客以及其他项目，但我无处可找到 Goutte 可用的选项、如何找到此信息或如何使用此信息（如果确实存在）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-08T20:35:06.300

您要查看的文档是[Symfony2 DomCrawler](http://symfony.com/doc/current/components/dom_crawler.html)。

Goutte 是基于[Guzzle](http://guzzlephp.org)构建的客户端，每次请求/提交时都会返回 Crawlers：

```
use Goutte\Client;
$client = new Client();
$crawler = $client->request('GET', 'http://www.symfony-project.org/'); 
```

使用这个爬虫，你可以做一些事情，比如获取正文中的所有 P 标签：

```
$nodeValues = $crawler->filter('body > p')->each(function (Crawler $node, $i) {
    return $node->text();
});
print_r($nodeValues); 
```

填写并提交表格：

```
$form = $crawler->selectButton('sign in')->form(); 
$crawler = $client->submit($form, array(
        'username' => 'username', 
        'password' => 'xxxxxx'
)); 
```

> 在 Crawler 上可以使用 selectButton() 方法，该方法返回另一个与给定文本匹配的按钮（input[type=submit]、input[type=image] 或 button）的 Crawler。[ [1](http://symfony.com/doc/current/components/dom_crawler.html#form-and-link-support) ]

您单击链接或设置选项，选择复选框等，请参阅[表单和链接支持](http://symfony.com/doc/current/components/dom_crawler.html#form-and-link-support)。

要从爬虫获取数据，请使用`html`or`text`方法

```
echo $crawler->html();
echo $crawler->text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:08:04.800

经过多次试验和错误，我发现有一个比 goutte 更容易、有据可查、更好的帮助（如果需要）和更有效的刮刀。如果您遇到 goutte 问题，请尝试以下操作：

1.  简单的 HTML Dom：[http ://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

如果您的情况与我相同，您尝试抓取的页面需要来自他们自己网站的引荐来源网址，那么您可以使用 CURL 和 Simple HTML DOM 的组合，因为 Simple HTML DOM 似乎没有能力发送推荐人。如果您不需要引荐来源网址，则可以使用 Simple HTML DOM 来抓取页面。

```
$url="http://www.example.com/sub-page-needs-referer/";
$referer="http://www.example.com/";
$html=new simple_html_dom(); // Create a new object for SIMPLE HTML DOM
/** cURL Initialization  **/
$ch = curl_init($url);

/** Set the cURL options **/
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_REFERER,$referer);
$output = curl_exec($ch);

if($output === FALSE) {
  echo "cURL Error: ".curl_error($ch); // do something here if we couldn't scrape the page
}
else {
  $info = curl_getinfo($ch);
  echo "Took ".$info['total_time']." seconds for url: ".$info['url'];
  $html->load($output); // Transfer CURL to SIMPLE HTML DOM
}

/** Free up cURL **/
curl_close($ch);

// Do something with SIMPLE HTML DOM.  It is well documented and very easy to use.  They have a lot of examples. 
```

# javascript - 将两个 WinJS.Binding.List 合二为一

> ID：15628927
> 
> 赞同：1
> 
> 时间：2013-03-26T03:34:35.850
> 
> 标签：javascript, windows-8, windows-store-apps, winjs

我正在尝试将 2 合二为一`WinJS.Binding.List`。我`.concat`在 MSDN 上看到了这个方法，但它似乎不起作用。有人可以告诉我怎么做吗？

输入：

```
var a = new WinJS.Binding.List([1,2])
var b = new WinJS.Binding.List([3,4]) 
```

预期输出：一个 WinJS.Binding.List，其中包含数字 1、2、3、4。

我试过`a.concat(b)`了，但它返回一个 3 元素数组而不是一个`WinJS.Binding.List`. 这是控制台中的日志。

```
var a = new WinJS.Binding.List([1,2])
var b = new WinJS.Binding.List([3,4])
a.concat(b)
==> [object Array][...] 
```

任何想法为什么以及如何正确地做到这一点？

PS我知道我可以遍历每个项目`b`并推入`a`，但是有没有更有效的方法呢？我也不想在将数组转换为之前连接数组，`WinJS.Binding.List`因为我正在从 2 个不同的数据源进行 2 次异步调用。上面的代码只是一个简化的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:59:21.420

您可以从列表中获取 2 个数组（使用切片），将它们连接起来，然后创建一个新列表。

```
var a = new WinJS.Binding.List([1, 2]);
var b = new WinJS.Binding.List([3, 4]);
var ab = new WinJS.Binding.List(a.slice(0).concat(b.slice(0))); 
```

也可以使用 list concat 方法（相对于原生 js concat）让它更短一点：

```
var a = new WinJS.Binding.List([1, 2]);
var b = new WinJS.Binding.List([3, 4]);
var ab = new WinJS.Binding.List(a.concat(b.slice(0))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:56:57.983

根据您的描述，我假设您的数据是从不同的来源返回的，并且 (a) 已经在单独的 WinJS.Binding.List 实例中，使投影不可行，或者 (b) 语义上的差异足以保证存储在单独的 List 实例中.

在这种情况下，我的方法可能是使用事件侦听器同步加入列表：

```
[list1, list2].forEach (list) ->
  list.oniteminserted = (event) -> joinedList.push(event.detail.value)
  list.onitemremoved = (event) -> joinedList.splice(joinedList.indexOf(event.detail.value),1) 
```

（被替换`addEventListener`并对应`removeEventListener`增加复杂性；））这种方法的缺点是您几乎无法控制最终列表中项目的顺序，这将保证另一个排序谓词，即此模型中的更多开销。

最后，很可能`.forEach (item) -> joinedList.push(item)`两个列表上的一个好人都是解决这个问题的最直接和最合适的方法。

编辑：为了更深入地了解我使用投影的建议，我想到了这样的事情：

```
# put all items in the "big" list
item1.source = 'list1'
joinedList.push(item1)
item2.source = 'list2'
joinedList.push(item2)
# create separate lists using projection
list1 = joinedList.createFiltered (i) -> i.source is 'list1'
list2 = joinedList.createFiltered (i) -> i.source is 'list2' 
```

# database - MS Access 2010 数据库

> ID：15628928
> 
> 赞同：0
> 
> 时间：2013-03-26T03:34:45.977
> 
> 标签：database, ms-access

我不确定这是否适合我的问题，但既然你们都是程序员，也许你什么都知道。:)

所以我想做的是在`MS Access`一个简单的联系人数据库中创建（为我的客户）。但是我希望我的每个联系人（AKA 记录）能够添加分配给日期的信息（我猜想是子表单记录）一个信息（注释）分​​配给每个记录/客户的一个日期

```
Example: 
Record 1: Bill Smith. 
Date 17/02/2012 note: "I got 30$"
Date 18/05/2012 note: "I got 30$"

Record 2: Spencer Williams. 
Date 17/02/2012 note: "I got 30$"
Date 18/05/2012 note: "I got 30$"
Date 19/05/2012 note: "I got 30$"
and so on... 
```

请注意，有时不同的记录会在相同的日期为我提供信息。

总之，我想为我的客户建立一个联系数据库，但由于我与他们定期约会，我想为每个客户做笔记：“什么日期”，“他给了我多少钱”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:09:31.940

如果您是 ms access 世界的新手，我建议您查看准备使用的模板。可以从微软网站下载。例如：[微软模板](http://office.microsoft.com/en-us/templates/results.aspx?qu=access&av=zac)

在此模板中，有联系人数据库

# php - 如何在php中使用提供数组的计数来更改说明符的数量

> ID：15628929
> 
> 赞同：1
> 
> 时间：2013-03-26T03:34:58.263
> 
> 标签：php, oop, model-view-controller, controller, mapper

我的代码如下

控制器代码：

```
class statController extends baseController {

public function index() {
    $this->registry->template->projectsWise = $this->selectProjectWise();
    $this->registry->template->show("stat");
}

private static function selectStat($query, $values) {

    $statMapper = new statMapper();
    $select = new common();
    $select->setItems($query);
    $select->setValues($values);
    return $statMapper->select($select);
}

private function selectProjectWise() {
    $date = date("Y-m-d");
    $values = array($date, $date);
    return self::selectStat("project_wise", $values);
}
private function selectLocationWise(){
    $date = date("Y-m-d");
    $values = array($date, $date, 1);
    return self::selectStat("location_wise", $values);
} 
```

映射器代码：

```
class statMapper extends baseMapper {

private $query = array(
    "project_wise" => "SELECT p.proj_Name, p.proj_Type, p.proj_Category, COUNT(ra.emp_Id) as allocation FROM project AS p, resource_assignment AS ra WHERE p.proj_Start_Date <= '%s' AND p.proj_End_Date >= '%s' AND p.proj_Status = 1 AND ra.proj_Id = p.proj_Id GROUP BY p.proj_Name ",
    "location_wise" => "SELECT e.user_Location, p.proj_Name, p.proj_Type, p.proj_Category, COUNT(ra.emp_Id) as allocation FROM project AS p, resource_assignment AS ra, employee as e WHERE p.proj_Start_Date <= '%s' AND p.proj_End_Date >= '%s' AND p.proj_Status = %d AND ra.proj_Id = p.proj_Id GROUP BY p.proj_Name "
);

public function select($select) {
    $connect = parent::connect();
    $query = sprintf($this->query[$select->getItems()], $select->getValues()[0], $select->getValues()[1]);
    try {
        $result = $connect->query($query);
        if ($result) {
            $table = array();
            while ($row = $result->fetch_object()) {
                $table[] = $row;
            }
            return $table;
            parent::disconnect();
        } else {
            throw (new Exception($connect->error . "<br/>" . $query . "<br/>"));
        }
    } catch (Exception $exp) {
        require_once 'views/error.php';
        exit();
    }
}

} 
```

我`($query->"location_wise")`在`statController->selectLocationWise()`函数中添加了 3 个说明符。当我使用它时，我如何添加`$select->getValues()[2]`价值`statMapper->select()`，而不是手动添加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T20:40:53.507

您可以使用[http://www.php.net/manual/ru/function.vsprintf.php](http://www.php.net/manual/ru/function.vsprintf.php)而不是`sprintf`将整个数组作为参数传递。

但无论如何，你的代码看起来很糟糕。从 StatMapper 的外部视图来看，既无法识别参数的类型，也无法识别它们的计数。代码将难以维护。

我建议使用数据访问对象模式或学习框架。

# r - IRanges - minoverlap

> ID：15628934
> 
> 赞同：1
> 
> 时间：2013-03-26T03:35:38.187
> 
> 标签：r

我正在尝试使用 IRange 将一组范围分组为唯一的集合。我希望至少有 100 个重叠。这是行不通的。谁能帮我吗？我怀疑这与`reduce()`工作方式有关，但我似乎无法找出解决方案。

例子：

```
start.vec<-c(2021,2378,2718,2275)
end.vec<-c(2374,2737,3408,3408)
ir<-IRanges(start.vec,end.vec)
grouped<-subjectHits(findOverlaps(ir,reduce(ir),minoverlap=100)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:18:34.547

不是 100% 确定你在找什么，但如果我

```
> hits = findOverlaps(ir, minoverlap=100L) 
```

我得到一个对象，它告诉我哪些查询与哪些主题重叠，其中查询和主题实际上是相同的范围

```
> hits
Hits of length 10
queryLength: 4
subjectLength: 4
   queryHits subjectHits 
    <integer>   <integer> 
 1          1           1 
 2          1           4 
 3          2           2 
 4          2           4 
 5          3           3 
 6          3           4 
 7          4           1 
 8          4           2 
 9          4           3 
 10         4           4 
```

我可以得到一个集合列表

```
> split(subjectHits(hits), queryHits(hits))
$`1`
[1] 1 4

$`2`
[1] 2 4

$`3`
[1] 3 4

$`4`
[1] 1 2 3 4 
```

你可以排除自我命中

```
> hits1 = hits[queryHits(hits) != subjectHits(hits)] 
```

[Bioconductor 邮件列表](http://bioconductor.org/help/mailing-list/)是提出这些问题的好资源

# ruby - Ruby，平均分配元素并交错/合并多个数组

> ID：15628936
> 
> 赞同：-1
> 
> 时间：2013-03-26T03:35:41.027
> 
> 标签：ruby, arrays, merge, distribute

我有多个元素计数未知的数组，例如

```
a = []
a << [:a, :c, :e]
a << [:b, :f, :g, :h, :i, :j]
a << [:d] 
```

结果应该类似于〜（由于四舍五入等，我真的不在乎细节）

```
r = [:b, :a, :f, :g, :d, :c, :h, :i, :e, :j] 
```

### 这就是我认为可以做到的方式

首先，我们需要将每个数组中的元素平均扩展/分布**到**相同的长度，所以我们得到类似

```
a << [nil, :a, nil, :c, nil, :e]
a << [:b, :f, :g, :h, :i, :j]
a << [nil, nil, :d, nil, nil] 
```

接下来我们像往常一样**交错**它们

```
r = a.shift
a.each { |e| r = r.zip(e) }
r = r.flatten.compact 
```

我目前的问题是如何在数组中平均（尽可能地）分布这些元素？可能有一个包含 4 个元素的数组，另一个包含 5 个元素，但可能最大的应该排在第一位。

当然很高兴看看是否有其他方法可以实现这一点:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:08:39.387

我会使用一种排序来做到这一点，基于元素索引位置，除以数组的大小，加上一些基于数组 id 的偏移量，以保持一致（如果你不需要一致性，你可以使用一个小的随机偏移量来代替）。

```
a = [:a,:b]
b = [:c]
c = [:d,:e,:f]
d = [:g:,:h,:i,:j]

def sort_pos array, id
  (1..array.size).map { |i| (i - 0.5 + id/1000.0)/(array.size + 1e-6) }
end

# Combine all the arrays with their sort index, assigning ids to each array for consistency.
# Depending on how you receive these arrays, this structure can be built up programatically, 
# as long as you add an array plus its sort index numbers at the same time
combined = (a + b + c + d).zip( sort_pos(a, 1) +  sort_pos(b, 2) +  sort_pos(c, 3) +  sort_pos(d, 4) )

# Extract the values from the original arrays in their new order
combined.sort_by { |zipped| zipped[1] }.map { |zipped| zipped[0] }

=> [:g, :d, :a, :h, :e, :i, :b, :f, :j, :c] 
```

在 Ruby 中可能有一种更简洁的方法来执行此操作。. . 但我认为最终结果是您所追求的 - 多个数组的“均匀”混合。

如果您只从统计角度关心混合的均匀性（即随着时间的推移它是“公平的”），您可以这样做：

```
(a+b+c+d).shuffle

=> [:g, :b, :i, :c, :a, :h, :e, :j, :f, :d] 
```

# matlab - MATLAB，关于 textread 函数

> ID：15628937
> 
> 赞同：0
> 
> 时间：2013-03-26T03:35:44.810
> 
> 标签：matlab

我的代码使用`textread`*.txt 文件扫描函数有问题。

从`uigetfile`命令中，代码读取特定文件夹中的 *.txt 文件。但是在那里，一些文件的形式与其他文件不同。所以'textread'功能不起作用。

是否有任何方法可以忽略这些文件（具有不同的形式。）并且只读取正确的文件？

这是我的代码：

```
[handles.FileName_h,handles.PathName] = uigetfile({'*.txt'}, 'TXT File(*.txt)','MultiSelect','ON');
FN=handles.FileName{1,syn};
[Date,Time,T10,T20,T30,P10]=textread(sprintf('%s',FN),'%q%q%n%n%n%n%*[^\n]','headerlines',2); 
```

# java - 字符串搜索的性能

> ID：15628938
> 
> 赞同：2
> 
> 时间：2013-03-26T03:35:54.107
> 
> 标签：java, string, servlets

我有一个 Servlet，它只需要处理大小约为 2 MB 的 Http 响应文档中的 1 个 XML 元素，并将元素中的任何内容返回给客户端。目前我正在这样做

```
 if (response.indexOf("<?xml") != -1
                && response.indexOf("</Data>") != -1) {
            return response.substring(response.indexOf("<?xml"),
                    response.indexOf("</Data>") + 7); 
```

只是想知道这是否是搜索标签的最有效方法，还是有更好的方法可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:56:22.463

您不太可能大大加快算法的速度，因为在此过程中唯一`IndexOf`能找到的“错误开始”`</Data>`将是结束标签，而`<?xml`在非常接近文件开头的地方发现。

加快代码速度的一种方法是避免`IndexOf`多次调用：

```
int idxXml = response.indexOf("<?xml");
int idxData = response.indexOf("</Data>");
if (idxXml != -1 && idxData != -1) {
    return response.substring(idxXml, idxData+7);
} 
```

# vb.net - 从网站更新 VB.net 应用程序时避免病毒警告

> ID：15628940
> 
> 赞同：1
> 
> 时间：2013-03-26T03:35:58.097
> 
> 标签：vb.net, auto-update

我有一个桌面应用程序（VB.net），它在启动时检查更新，如果我的网站上有更新的文件，它会下载到用户的计算机（当然，如果用户在我的应用程序设置中打开了自动更新）。问题是，一旦下载了新文件，防病毒软件就会提示该文件太新且稀有，并要求用户中止下载或继续下载。如何使我的应用程序值得信赖并避免此防病毒提示？

# delphi-2010 - 德尔福印地局域网聊天

> ID：15628941
> 
> 赞同：1
> 
> 时间：2013-03-26T03:35:59.983
> 
> 标签：delphi-2010, indy, delphi

我有一个基本的 indy TCP 服务器和一个客户端，客户端在其中向服务器发送消息。在`OnConnect`服务器上的事件中，客户端 IP 被添加到列表框中。我想在客户端上获取此列表框，并在客户端连接和断开连接时更新列表框。我是 Indy 组件的新手，不确定最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:45:48.560

TCP 套接字在两个方向上工作 - TCP 服务器可以在客户端用于连接到服务器的同一个套接字上向客户端发起数据传输。

因此，要将活动连接列表推送到客户端，`IdTCPServer`只需迭代所有连接并使用`Connection.IOHandler.WriteXXX`方法发送信息。广播连接列表数据和向所有客户端广播新的聊天消息之间没有技术区别。

唯一的要求是数据需要一个“消息类型指示符”（一个或多个头字节）来指示消息类型，可选地后跟消息正文长度和数据。

# javascript - 如何使用javascript更改段落的字体大小

> ID：15628944
> 
> 赞同：0
> 
> 时间：2013-03-26T03:36:14.950
> 
> 标签：javascript, jquery, javascript-events

您好，我正在学习 javaScript，我试图在站点中使用 3 个按钮更改段落的字体大小，而我在编写代码时，控制台输出了这个错误，我无法弄清楚它是什么。我也想知道我的编码方式是否正确，非常感谢。

html代码：

```
<!DOCTYPE html>
<html leng="es">
    <head>
        <meta charset="UTF-8">
        <title>Mi ejercicio DHTML</title>
        <link rel="stylesheet" type="text/css" href="css/estilos.css">
        <script type="text/javascript" src="js/codigo.js"></script>
    </head>
    <body>
        <p id="parrafo">
            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to.
        </p>
        <span class="boton" id="boton1">Fuente pequeña</span>
        <span class="boton" id="boton2">Fuente mediana</span>
        <span class="boton" id="boton3">Fuente grande</span>
    </body>
</html> 
```

的CSS：

```
p {
    font-size: 13px;
    margin-bottom: 2em;
}
.boton {
    background: red;
    padding: .5em 1em;
} 
```

的JavaScript：

```
window.addEventListener('load', inicio, false);

function inicio() {
    var indice = [1, 2, 3];
    for (var i = 0; i < indice.length; i++) {
        var boton = document.getElementById('boton' + indice[i]);
        boton.addEventListener('click', cambiarFuente, false);
    };
}

function cambiarFuente() {
    console.log('hola');
} 
```

最后是错误：

```
Uncaught TypeError: Cannot call method 'addEventListener' of null codigo.js:6 
```

谢谢大家的关注：）

好吧，我之前放置了标签，现在它的工作至少是我认为的......另一个问题出现了，它的段落没有改变它的 fon 大小，但我仍然收到控制台日志消息，就好像它在工作一样：/

```
window.addEventListener('load', inicio, false);

function inicio(){
var indice =[1,2,3];
for (var i = 0; i < indice.length; i++) {
    var boton = document.getElementById('boton' + indice[i]);
    boton.addEventListener('click', cambiarFuente, false);
};

function cambiarFuente(){
    var parrafo = document.getElementById('parrafo');
    parrafo.style.fontSize=20;
    console.log('hola');
}
} 
```

我也不知道如何为每个按钮分配不同的字体大小 xD 谁能给我一些建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:42:21.293

当 document.getElementById 返回 null 时，这意味着它没有找到具有提供的 ID 的元素。在这种情况下，这是因为您的脚本在页面加载之前正在运行。

在加载事件之后调用函数：

```
window.onload = function() {
   // stuff to run onload
}; 
```

一个额外的预防措施是在尝试调用方法之前检查 getElementById 是否返回一个元素（或至少不是 null ）。

### 编辑

此外，正如 Mahesh Sapkal 所指出的，IE 小于 8（也许是 9？）不支持`addEventListener`，你必须使用`attachEvent`. 有许多“addEvent”函数基于特征检测使用一个或另一个，这里有一个简单的：

```
 function addListener(element, event, fn) {

    // Use addEventListener if available
    if (element.addEventListener) {
      element.addEventListener(event, fn, false);

    // Otherwise use attachEvent, set this and event
    } else if (element.attachEvent) {
      element.attachEvent('on' + event, (function (el) {
        return function() {
          fn.call(el, window.event);
        };
      }(element)));

      // Break closure and primary circular reference to element
      element = null;
    }
  } 
```

循环变为：

```
var boton;

for (var i = 0; i < indice.length; i++) {
    boton = document.getElementById('boton' + indice[i]);

    if (boton) {
          addListener(boton, 'click', cambiarFuente);
    }
} 
```

注意 if 块后面没有分号，它不是一个语句（尽管它通常包含语句）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:45:14.187

您可以使用这种方式代替：

```
window.addEventListener('load', inicio, false); 
```

用这个：

```
$(document).ready(function(){
    inicio();
}); 
```

在函数中：

```
function inicio(){
    var indice =[1,2,3];
    for (var i = 0; i < indice.length; i++) {
        var boton = $('#boton' + indice[i]);
        boton.click(function(){
            cambiarFuente();
        });
    }
} 
```

您的脚本不起作用的原因是，您甚至在文档加载之前就正在执行脚本。一个**简单的解决**方法是将你的放在`<script></script>`前面`</body>`并且它可以工作。一探究竟。

# sql - 从 SQL 数据库记录填充组合框

> ID：15628950
> 
> 赞同：0
> 
> 时间：2013-03-26T03:36:51.540
> 
> 标签：sql, vb.net, combobox

现在，我有这段代码，但它既不工作也不返回错误。

如何获取数据库中的所有记录以将其显示在组合框中？

```
Private Sub cmbCategory_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles cmbCategory.Click
    Dim sqlconn As New SqlClient.SqlConnection
    sqlconn.ConnectionString = "server = SKPI-APPS1;" & _
    "Database = EOEMS;integrated security=true"

    Dim myCommand As New SqlCommand
    sqlconn.Open()
    myCommand = New SqlCommand("SELECT CAT_ID FROM tblOfficeEquipmentCategory)", sqlconn)
    myCommand.ExecuteNonQuery()
    sqlconn.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:07:09.457

你有一个额外的支架，试试这个：

myCommand = New SqlCommand("SELECT CAT_ID FROM tblOfficeEquipmentCategory", sqlconn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:42:19.870

请将您的选择语句放到查询浏览器中，`RUN`它会`BEFORE`告诉您的代码有任何问题。在处理与数据库相关的 Web 编程时，这应该是必须做的做法。

很明显，您的 SQL 语句中有一个额外的“）”。

# validation - 清除 ASP.NET MVC 中的验证摘要

> ID：15628951
> 
> 赞同：1
> 
> 时间：2013-03-26T03:36:55.593
> 
> 标签：validation, asp.net-mvc-4

我有一个 ASP.NET MVC 4 应用程序。在几个页面上，我有一个与页面相关的“添加新项目”按钮。单击该按钮会显示一个对话框，其中包含要填写的表单。该对话框有两个按钮，“提交”和“取消”。

“添加新项目”表单的验证以典型的 MVC 样式处理，方法是在表单元素内添加这个 razor 标记：

```
@Html.ValidationSummary(true) 
```

在大多数情况下，这一切都很好。如果字段验证失败，则提交按钮会导致它显示验证消息。

问题是这样的——如果表单验证失败，然后用户点击“取消”，对话框就会隐藏起来。下次单击“添加新项目”时，对话框再次出现，但上次尝试失败后的验证消息仍然存在。

这看起来不专业。当用户单击“取消”表单时，应重置验证。

我不确定这里调用了什么验证库进行验证。我总是可以添加一些 javascript 来更改验证标签的 CSS 等，但我想确保我没有破坏验证，或者留下杂项 javascript 等。

在 MVC 4 中重置表单验证的正确方法是什么？

# android - 如何在android中下拉列表？

> ID：15628957
> 
> 赞同：0
> 
> 时间：2013-03-26T03:37:22.093
> 
> 标签：android

以下是我的代码。它显示获取的 RSS 标题、日期和描述。我想要做的是，当用户单击标题时，它必须下拉带有图像的描述。怎么做？我被困住了。我做了很多搜索。它还有另一个问题是它在元素之间显示文本“obj”。

![这是我的应用程序的快照](../Images/83d06599604c849ac01f39abad23fff2.png)

```
RSSItem.java 

public class RSSItem {
    public String title;
    public String date;
    public String link;
    public String description;
}

RSSListActivities.java

    package com.varma.samples.rssreader.ui;

    import java.net.URL;
    import java.util.ArrayList;
    import java.util.List;

    import javax.xml.parsers.SAXParser;
    import javax.xml.parsers.SAXParserFactory;

    import org.xml.sax.InputSource;
    import org.xml.sax.XMLReader;

    import android.app.ListActivity;
    import android.app.ProgressDialog;
    import android.content.Context;
    import android.content.Intent;
    import android.net.Uri;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.ArrayAdapter;
    import android.widget.ListView;
    import android.widget.TextView;

    import com.varma.samples.rssreader.R;
    import com.varma.samples.rssreader.data.RSSItem;
    import com.varma.samples.rssreader.xmlparser.RSSParser;

    public class RSSListActivity extends ListActivity {
    private ArrayList<RSSItem> itemlist = null;
    private RSSListAdaptor rssadaptor = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        itemlist = new ArrayList<RSSItem>();

        new RetrieveRSSFeeds().execute();
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);

        RSSItem data = itemlist.get(position);

        Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse(data.link));

        startActivity(intent);
    }

    private void retrieveRSSFeed(String urlToRssFeed,ArrayList<RSSItem> list)
    {
        try
        {
           URL url = new URL(urlToRssFeed);
           SAXParserFactory factory = SAXParserFactory.newInstance();
           SAXParser parser = factory.newSAXParser();
           XMLReader xmlreader = parser.getXMLReader();
           RSSParser theRssHandler = new RSSParser(list);

           xmlreader.setContentHandler(theRssHandler);

           InputSource is = new InputSource(url.openStream());

           xmlreader.parse(is);
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    private class RetrieveRSSFeeds extends AsyncTask<Void, Void, Void>
    {
        private ProgressDialog progress = null;

        @Override
        protected Void doInBackground(Void... params) {
            retrieveRSSFeed("RSS-URL",itemlist);

            rssadaptor = new RSSListAdaptor(RSSListActivity.this, R.layout.rssitemview,itemlist);

            return null;
        }

        @Override
        protected void onCancelled() {
            super.onCancelled();
        }

        @Override
        protected void onPreExecute() {
            progress = ProgressDialog.show(
                    RSSListActivity.this, null, "Loading RSS Feeds...");

            super.onPreExecute();
        }

        @Override
        protected void onPostExecute(Void result) {
            setListAdapter(rssadaptor);

            progress.dismiss();

            super.onPostExecute(result);
        }

        @Override
        protected void onProgressUpdate(Void... values) {
            super.onProgressUpdate(values);
        }
    }

    private class RSSListAdaptor extends ArrayAdapter<RSSItem>{
        private List<RSSItem> objects = null;

        public RSSListAdaptor(Context context, int textviewid, List<RSSItem> objects) {
            super(context, textviewid, objects);

            this.objects = objects;
        }

        @Override
        public int getCount() {
            return ((null != objects) ? objects.size() : 0);
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public RSSItem getItem(int position) {
            return ((null != objects) ? objects.get(position) : null);
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            View view = convertView;

            if(null == view)
            {
                LayoutInflater vi = (LayoutInflater)RSSListActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                view = vi.inflate(R.layout.rssitemview, null);
            }

            RSSItem data = objects.get(position);

            if(null != data)
            {
                TextView title = (TextView)view.findViewById(R.id.txtTitle);
                TextView date = (TextView)view.findViewById(R.id.txtDate);
                TextView description = (TextView)view.findViewById(R.id.txtDescription);

                title.setText(android.text.Html.fromHtml(data.title).toString());
                date.setText("on " + android.text.Html.fromHtml(data.date).toString());
                description.setText(android.text.Html.fromHtml(data.description).toString());
            }

            return view;
        }
    }

   }

RSSParser.java

package com.varma.samples.rssreader.xmlparser;

import java.util.ArrayList;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

import com.varma.samples.rssreader.data.RSSItem;

public class RSSParser extends DefaultHandler {
private final static String TAG_ITEM = "item";
private final static String[] xmltags = { "title", "link", "pubDate", "description" };

private RSSItem currentitem = null;
private ArrayList<RSSItem> itemarray = null;
private int currentindex = -1;
private boolean isParsing = false;
private StringBuilder builder = new StringBuilder();

public RSSParser(ArrayList<RSSItem> itemarray) {
    super();

    this.itemarray = itemarray;
}

@Override
public void characters(char[] ch, int start, int length) throws SAXException {
    super.characters(ch, start, length);

    if(isParsing && -1 != currentindex && null != builder)
    {
        builder.append(ch,start,length);
    }
}

@Override
public void startElement(String uri, String localName, String qName,Attributes attributes) throws SAXException {
    super.startElement(uri, localName, qName, attributes);

    if(localName.equalsIgnoreCase(TAG_ITEM))
    {
        currentitem = new RSSItem();
        currentindex = -1;
        isParsing = true;

        itemarray.add(currentitem);
    }
    else
    {
        currentindex = itemIndexFromString(localName);

        builder = null;

        if(-1 != currentindex)
            builder = new StringBuilder();
    }
}

@Override
public void endElement(String uri, String localName, String qName) throws SAXException {
    super.endElement(uri, localName, qName);

    if(localName.equalsIgnoreCase(TAG_ITEM))
    {
        isParsing = false;
    }
    else if(currentindex != -1)
    {
        if(isParsing)
        {
            switch(currentindex)
            {
                case 0: currentitem.title = builder.toString();         break; 
                case 1: currentitem.link = builder.toString();          break;
                case 2: currentitem.date = builder.toString();          break;
                case 3: currentitem.description= builder.toString();    break;
            }
        }
    }
}

private int itemIndexFromString(String tagname){
    int itemindex = -1;

    for(int index= 0; index<xmltags.length; ++index)
    {
        if(tagname.equalsIgnoreCase(xmltags[index]))
        {
            itemindex = index;

            break;
        }
    }

    return itemindex;
}
} 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ListView 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:id="@android:id/list"/>
</LinearLayout> 
```

rssitemview.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="10dip">

    <TextView
        android:id="@+id/txtTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textStyle="bold"
        android:textSize="20dip"
        android:padding="5dip"
        android:text="Title"/>

    <TextView
        android:id="@+id/txtDate"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textStyle="italic"
        android:textSize="10dip"
        android:padding="5dip"
        android:text="Date"/>

    <TextView
        android:id="@+id/txtDescription"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textStyle="normal"
        android:textSize="10dip"
        android:padding="5dip"
        android:text="Description"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:22:20.030

您可以使用以下方式完成它（我将只提供必要的代码，因为 RSSParser 和图像加载例如显然超出了这个问题的范围）：

```
public class RSSListActivity extends ListActivity {
    private ArrayList<RSSItem> itemlist = null;
    private RSSListAdaptor rssadaptor = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.rss_activity);

        itemlist = new ArrayList<RSSItem>();

        // Put hardcoded items temporary
        for(int i = 0; i < 25; i++) {
            itemlist.add(new RSSItem("RSS item " + i,
                    "2013/03/" + i,
                    "http://www.northlight-images.co.uk/gallery_images/pics/hood_canal.jpg",
                    "Description of RSS test image #" + i + "Description of RSS test image #" + i  + "Description of RSS test image #" + i));
        }

        rssadaptor = new RSSListAdaptor(RSSListActivity.this, R.layout.rssitemview,itemlist);

        setListAdapter(rssadaptor);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);

        RSSItem data = itemlist.get(position);

        Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse(data.link));

        startActivity(intent);
    }

    private void retrieveRSSFeed(String urlToRssFeed,ArrayList<RSSItem> list) {
        try {
            URL url = new URL(urlToRssFeed);
            SAXParserFactory factory = SAXParserFactory.newInstance();
            SAXParser parser = factory.newSAXParser();
            XMLReader xmlreader = parser.getXMLReader();

            InputSource is = new InputSource(url.openStream());

            xmlreader.parse(is);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static class RSSListAdaptor extends ArrayAdapter<RSSItem>{
        private List<RSSItem> objects = null;

        private int mFocusedPosition = -1;

        private static final int COUNT_ITEM_TYPES = 2;
        private static final int ITEM_TYPE_NORMAL = 0;
        private static final int ITEM_TYPE_EXPANDED = 1;

        public RSSListAdaptor(Context context, int textviewid, List<RSSItem> objects) {
            super(context, textviewid, objects);

            this.objects = objects;
        }

        @Override
        public int getCount() {
            return ((null != objects) ? objects.size() : 0);
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public RSSItem getItem(int position) {
            return ((null != objects) ? objects.get(position) : null);
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            View view = convertView;
            final int itemType = getItemViewType(position);

            if(null == view) {
                final LayoutInflater vi = (LayoutInflater)parent.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                view = vi.inflate(itemType == ITEM_TYPE_NORMAL ? R.layout.rssitemview : R.layout.rssitemview_expanded, null);
            }

            final RSSItem data = objects.get(position);

            if(null != data) {
                // TODO: ViewHolder pattern should be used here
                final TextView title = (TextView)view.findViewById(R.id.txtTitle);
                final TextView date = (TextView)view.findViewById(R.id.txtDate);
                final TextView description = (TextView)view.findViewById(R.id.txtDescription);
                final ImageView image = (ImageView)view.findViewById(R.id.image);

                if (null != title) {
                    title.setText(android.text.Html.fromHtml(data.title).toString());
                    title.setFocusable(false);

                    final int itemPosition = position;

                    title.setOnClickListener(new View.OnClickListener() {
                        @Override
                        public void onClick(final View v) {
                            // Clicked view becomes focused
                            mFocusedPosition = itemPosition;
                            notifyDataSetChanged();
                        }
                    });
                }

                if (null != date) {
                    date.setText("on " + android.text.Html.fromHtml(data.date).toString());
                }

                if (null != description) {
                    description.setText(android.text.Html.fromHtml(data.description).toString());
                }

                if (null != image) {
                    image.setImageURI(Uri.parse(data.link));
                }
            }

            return view;
        }

        @Override
        public int getViewTypeCount() {
            return COUNT_ITEM_TYPES;
        }

        @Override
        public int getItemViewType(final int position) {
            return (position == mFocusedPosition) ? ITEM_TYPE_EXPANDED : ITEM_TYPE_NORMAL;
        }
    }

} 
```

这里：

rssitemview.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:padding="10dip">

    <TextView
            android:id="@+id/txtTitle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:textSize="20dip"
            android:padding="5dip"
            android:text="Title" />

</LinearLayout> 
```

和 rssitemview_expanded.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:padding="10dip">

    <TextView
            android:id="@+id/txtTitle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:textSize="20dip"
            android:padding="5dip"
            android:text="Title" />

    <TextView
            android:id="@+id/txtDate"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textStyle="italic"
            android:textSize="10dip"
            android:padding="5dip"
            android:text="Date" />

    <ImageView
        android:id="@+id/image"
        android:layout_width="30dp"
        android:layout_height="30dp" />

    <TextView
            android:id="@+id/txtDescription"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textStyle="normal"
            android:textSize="10dip"
            android:padding="5dip"
            android:text="Description" />

</LinearLayout> 
```

关于第二个问题：“它还有另一个问题是它在元素之间显示文本“obj”。”，请提出另一个问题并提供必要的信息（例如 rss 数据示例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:16:04.367

简单的解决方案。最初设置文本视图的可见性 txtTitle 可见 txtDate 不可见 txtDescription 不可见

实现监听器

根据您的要求更改可见性

# c++ - 从堆栈列表（链表）中弹出一个数字？

> ID：15628960
> 
> 赞同：0
> 
> 时间：2013-03-26T03:37:32.397
> 
> 标签：c++, class, linked-list

```
class stack_class
{
private:

    struct stack_struct *head;

public:
    stack_class();
    ~stack_class();
    void pushNumber(int number);
    void popNumber();
    void findNumber();
    void clearStack();
    void sizeFinder();
    void printStack();

};

void stack_class::popNumber()
{
    stack_struct *pointerPop=NULL,*pointerPop2=NULL;
    int popCounter=0,i=0;
    pointerPop2=tailPointer;
    if(head==NULL)
    {
        cout<<"\nNo Member to Delete.\n";
    }
    else
    {
        while(pointerPop2)
        {
            popCounter++;
            //cout<<pointerFunc3->number<<endl;
            pointerPop2=pointerPop2->next_number;
        }
        pointerPop=tailPointer;
        while(i<(popCounter-2))
        {
            pointerPop=pointerPop->next_number;
            i++;
        }
        pointerPop->next_number=NULL;
        delete head;
        head=pointerPop;
    }

}

void stack_class::printStack()
{
    pointerFunc3=tailPointer;
    if(tailPointer==NULL)
    {
        cout<<"\nNo Members in List.\n";
    }
    else
    {
        cout<<"\n\nList Is:\n";
        while(pointerFunc3)
        {
            cout<<pointerFunc3->number<<endl;
            pointerFunc3=pointerFunc3->next_number;
        }
    }

} 
```

构造函数到类

```
stack_class::stack_class()
{
    head=NULL;
} 
```

这是我的代码，问题是，当我弹出最后一个数字并尝试打印列表时，它进入无限循环并打印垃圾。当我在列表中的所有内容都被删除后按下删除选项时，程序会冻结。有什么建议为什么会这样？？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:34:34.837

你的第一个 while 循环的条件永远不会是假的。根据您实现 next_number 的方式（如果它是循环链表），我相信您应该将其更改为：

```
while(pointerPop2 != head) 
```

如果您希望它遍历所有节点。

# php - 如何使用php在csv数组中舍入单个列的小数位？

> ID：15628964
> 
> 赞同：-1
> 
> 时间：2013-03-26T03:37:37.283
> 
> 标签：php, html, arrays, csv, decimal

我有一些 php 代码来获取 csv 文件，将其放入数组中，然后在 html 表中显示数组。此代码将用于具有多列（大约 10 列）的数据文件。我想将数据点四舍五入到小数点后 2 位，并且可以使用 $val = round($val, 2) 来实现。但是，当在我的代码中使用时，它还会更改时间列的格式，因此显示 12 而不是 12:00。如果有人知道如何更改数组中某些列的十进制格式，同时不考虑时间列，请让我知道。这是我现在拥有的代码：

```
$out = '';
echo "<th> Time </th><th> Temperature </th><th> Speed  </th>";
$handle = fopen("fakedata.csv", "r");

$columns = array(1,3,5);
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $out = ("<tr>\r\n").$out;
        foreach ($data as $index=>$val) {
                if (in_array($index+1, $columns))
            {
                    $val = round($val, 2);
                    $out = ("\t<td>$val</td>\r\n").$out;
            }
    }

        echo("</tr>\r\n");
} //end while
echo $out;

echo "\n</table></body></html>"; 
```

（我知道 $out 的东西很奇怪，但它会翻转行顺序并首先显示最新数据）。无论如何，我的主要问题是更改 csv 数组某些行的十进制格式，在这种情况下，仅将 $column[3] 或第三列更改为 2 个小数位。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:14:56.263

依靠 sprintf() 的魔力怎么样？代替：

```
$val = round($val, 2);
$out = ("\t<td>$val</td>\r\n").$out; 
```

尝试：

```
$out = sprintf("\t<td>% 6.2f</td>\r\n%s",$val,$out); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:42:54.320

只需添加另一个 if 来检查它是否在第三列，这种情况下我使用了速记[三元](http://davidwalsh.name/php-shorthand-if-else-ternary-operators)运算符。

```
if (in_array($index+1, $columns)) {
    $val = ($index+1 == 3) ? round($val, 2) : $val;
    $out = ("\t<td>$val</td>\r\n").$out;
} 
```

# javascript - 如何在执行基于 node-webkit 的应用程序时禁用远程脚本和样式表的缓存？

> ID：15628966
> 
> 赞同：4
> 
> 时间：2013-03-26T03:37:37.987
> 
> 标签：javascript, css, google-chrome, node-webkit

我正在使用 node-webkit 从具有大量外部脚本和样式表的 Intranet 站点创建桌面应用程序。我在调试时注意到的一个问题是，它似乎会在不同的运行之间偶尔缓存外部脚本和样式表 - 有时它会加载最近修改的脚本，而有时它不会在不打开地址栏并手动输入脚本路径的情况下加载然后点击重新加载。有没有办法让它每次加载时都会得到一个新的依赖副本？

我正在使用的 package.json 如下：

```
{
    "name": "name",
    "description": "description",
    "version": "0.1",
    "main": "https://path-to-intranet-site/",
    "node-remote": "https://path-to-intranet-site",
    "window": {
        "show": true,
        "toolbar": true,
        "frame": true,
        "position": "center",
        "width": 800,
        "height": 600,
        "min_width": 220,
        "min_height": 220
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-24T11:03:07.430

尝试编辑 package.json 如下：

```
{
    "name": "name",
    "description": "description",
    "version": "0.1",
    "main": "https://path-to-intranet-site/",
    "node-remote": "https://path-to-intranet-site",
    "webkit": {
         "page-cache":false
    },
    "window": {
        "show": true,
        "toolbar": true,
        "frame": true,
        "position": "center",
        "width": 800,
        "height": 600,
        "min_width": 220,
        "min_height": 220
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-19T12:00:05.193

在[Manifest 格式](https://github.com/rogerwang/node-webkit/wiki/Manifest-format)的文档中page-cache 默认为 false 在[node-webkit](https://github.com/rogerwang/node-webkit/) wiki 页面中。

在页面中搜索页面缓存有点下降。

# java - 在java泛型中使用？

> ID：15628978
> 
> 赞同：0
> 
> 时间：2013-03-26T03:38:32.317
> 
> 标签：java, generics

我正在阅读一些代码，并想了解为什么以下内容会起作用：

这是一个堆栈类： `public class Stack<Item> { ***** }`

然后在 main 方法中创建了一个类的实例： `Stack<String> s = new Stack<String>();`

Generic Stack 类声明中的具体含义是什么`Item`？它是标准的 Java`Item`类，还是 Java 泛型的命名约定？我认为这`String`需要成为它的子类`Item`才能使代码正常工作，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T03:47:44.520

在

```
public class Stack<Item> 
```

`Item`是一个**正式**的类型参数名称。它不对应于任何特定的 java 类，因此它没有隐含的包名称。

在

```
Stack<MyItem> stack = new Stack<MyItem>(); 
```

`MyItem`是 type 的**实际**绑定`Item`，因此必须对应于实际类并具有隐式包。

[“正式”和“实际”参数](http://en.wikipedia.org/wiki/Parameter_%28computer_programming%29#Parameters_and_arguments)的区别`x`与`42`下面的区别相同：

```
int f(int x) { ... }   // x is a formal parameter name

System.out.println(f(42));   // 42 is the actual parameter to which the formal x is bound. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T03:48:18.023

`Item`似乎不是标准的 Java 类。它可能只是一个任意的泛型类型，在这种情况下，`String`可以毫无问题地使用特定类型。

你指的是 Stack 类的这个实现吗？

[http://algs4.cs.princeton.edu/13stacks/Stack.java.html](http://algs4.cs.princeton.edu/13stacks/Stack.java.html)

> 我认为 String 需要成为这个 Item 的子类才能使代码工作，对吧？

不必要。浏览上面评论中给出的 Java 跟踪。可以定义泛型，以便您可以“插入”一个类并使用泛型类型在整个类或方法中引用它。

PS：请注意，泛型仅在编译时强制执行。它们不存在于字节码中。

# haskell - 结合 Persistent 和 IO

> ID：15628980
> 
> 赞同：2
> 
> 时间：2013-03-26T03:38:38.317
> 
> 标签：haskell, yesod

我试图通过目录递归，处理文件并将结果存储在数据库中，但我遇到了问题。

我正在尝试做的一个简化示例如下所示：

```
{-# LANGUAGE QuasiQuotes, TemplateHaskell, TypeFamilies, OverloadedStrings #-}
{-# LANGUAGE GADTs, FlexibleContexts #-}
import Database.Persist
import Database.Persist.Sqlite
import Database.Persist.TH
import System.Environment (getArgs)
import System.Directory (canonicalizePath, getDirectoryContents, doesDirectoryExist, doesFileExist)
import System.FilePath (combine, takeExtension)
import Control.Monad (filterM, mapM_)
import Control.Monad.IO.Class (liftIO)

share [mkPersist sqlSettings, mkMigrate "migrateAll"] [persistUpperCase|
File                                                       
  path String
  deriving (Show)
|]
main :: IO ()
main = do
  args <- getArgs
  path <- canonicalizePath $ head args
  runSqlite "files.sqlite" $ do
    runMigration migrateAll
    liftIO $ processDirectory path
    return ()

processDirectory path = files >>= mapM_ processFile >>
                        directories >>= mapM_ processDirectory
  where contents  = getDirectoryContents path >>=
                    return . map (combine path) . filter (`notElem` [".", ".."]) 
        directories = contents >>= filterM doesDirectoryExist
        files = contents >>= filterM doesFileExist

processFile path = insert $ File path 
```

然而，上面没有编译，而是导致：

```
No instance for (PersistStore IO)
      arising from a use of `processFile'
    Possible fix: add an instance declaration for (PersistStore IO)
    In the first argument of `mapM_', namely `processFile'
    In the second argument of `(>>=)', namely `mapM_ processFile'
    In the first argument of `(>>)', namely
      `files >>= mapM_ processFile'
Failed, modules loaded: none. 
```

这对我来说很有意义，因为 processFile 只是对插入的调用，PersistStore monad 的哪一部分（对吗？）不是 IO。我认为我需要的是一个单子变压器，但此时我遇到了一堵砖墙，这可能意味着我找错了树。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T09:15:23.853

您**不**希望被*liftIO*包含的一件事是数据库操作，因此您需要重新排列代码以将*processFile*留在其中。

关于将使其编译的代码的最简单更改如下。我会把它留给你整理一下，以便更清楚发生了什么！

```
{-# LANGUAGE QuasiQuotes, TemplateHaskell, TypeFamilies, OverloadedStrings #-}
{-# LANGUAGE GADTs, FlexibleContexts #-}
import Database.Persist
import Database.Persist.Sqlite
import Database.Persist.TH
import System.Environment (getArgs)
import System.Directory (canonicalizePath, getDirectoryContents, doesDirectoryExist, doesFileExist)
import System.FilePath (combine, takeExtension)
import Control.Monad (filterM, mapM_)
import Control.Monad.IO.Class (liftIO)

share [mkPersist sqlSettings, mkMigrate "migrateAll"] [persistUpperCase|
File                                                       
  path String
  deriving (Show)
|]
main :: IO ()
main = do
  args <- getArgs
  path <- canonicalizePath $ head args
  runSqlite "files.sqlite" $ do
    runMigration migrateAll
    processDirectory path
    return ()

processDirectory path = liftIO files >>= mapM_ processFile >>
                        liftIO directories >>= mapM_ processDirectory
  where contents  = getDirectoryContents path >>=
                    return . map (combine path) . filter (`notElem` [".", ".."])  
        directories = contents >>= filterM doesDirectoryExist
        files = contents >>= filterM doesFileExist

processFile path = insert $ File path 
```

# java - 选中复选框后的 Java swing GUI

> ID：15628981
> 
> 赞同：-5
> 
> 时间：2013-03-26T03:38:40.443
> 
> 标签：java, swing

Reeeealy 需要你对 java 的帮助。我有一个frame1.java 用于三个复选框，每个复选框对应frame2.java 中的一个JPanel。将在 frame2 中显示的面板由您在 frame1 中选择的复选框确定。如何编写代码？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T03:41:26.910

请参阅有关[如何使用复选框](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)的 Swing 教程。它显示了如何将 ItemListner 添加到复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:12:55.283

使用 frame1 构造函数为框架创建一个对象并将其状态设置为不可见`setVisible(false)`，并将三个面板附加到第二个框架并使它们不可见，使您的第一个框架可见性为真。放置三个复选框并使用它们的事件处理（您可以使用 ChangeListener），将每个选中的事件第二帧可见性设置为 true，并将相应的面板可见性设置为 true。在第二帧中放置一个确定按钮。因为当第二帧出现时，您无法在第一帧上执行检查事件。所以为按钮编写动作事件，这样当您单击确定按钮时，第二帧将变为不可见。

示例： [更改侦听器示例](http://www.java2s.com/Tutorial/Java/0240__Swing/ListeningtoJCheckBoxEventswithaChangeListenerlistentoarmedpressedselectedorreleasedstate.htm)

# ruby-on-rails - Ruby 中的 DST 不准确？

> ID：15628985
> 
> 赞同：0
> 
> 时间：2013-03-26T03:39:42.403
> 
> 标签：ruby-on-rails, ruby, timezone

我正在使用 Ruby on Rails 开发包含时区转换的应用程序。发现了一件有趣的事情：现在是 2013 年 3 月 26 日，我将时区设置为雅典，它似乎已经在 DST（Time.zone 显示 GMT +2 雅典，但格式化时间显示 +0300）。然后我改成开罗时间，格式化的时间又回到+0200

但是，根据[http://www.timeanddate.com/time/dst/2013.html](http://www.timeanddate.com/time/dst/2013.html)，夏令时更改应该发生在 3 月 31 日。它不应该在 DST 中。

这是Ruby中的错误，还是我犯了一个错误？

编辑：我从数据库中格式化了一个日期时间，即 April.1。所以程序格式化了那个时间并为“那个”日期时间显示 DST，而不是在当前时间显示它。

我的错。谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:52:43.257

我怀疑您看到的 UTC 节日不是您所期望的。如果您正在查看时区，我相信 DST 的 UTC 偏移量不会改变，但如果您处理特定时间并询问 UTC 偏移量，您会看到您所期望的。

```
> ActiveSupport::TimeZone['Athens'].now.utc_offset
=> 7200

> (ActiveSupport::TimeZone['Athens'].now+1.week).utc_offset
=> 10800 
```

# c - ioctl() 每次给出不同的大小

> ID：15628988
> 
> 赞同：0
> 
> 时间：2013-03-26T03:39:57.030
> 
> 标签：c, ipc, pipe

我正在使用 ioctl() 函数调用来获取管道端可用数据的大小并据此分配内存。

为此，我将此代码段编写为

```
 if((read(mg_in, &byte, 1)) == 1)
            {
                    ioctl(mg_in, FIONREAD, &count);
                    buf = malloc(count+1);                                                          
                    buf[0] = byte;
                    read_count = read(mg_in, buf+1, count);

            }       
  buf_len = read_count+1; 
```

从另一个进程中，我总是写 4 个字节，但在上面的代码中，我得到了不同的 buf_len 值为 9、5 等，尽管它应该是 buf_len=4 和 read_count = 3。

我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:47:56.623

`buf_len`无论您是否成功并且您设置了，`read`您都在设置`count`。如果没有可读取的数据，它将包含垃圾。

# javascript - 冻结鼠标悬停淡出

> ID：15628991
> 
> 赞同：0
> 
> 时间：2013-03-26T03:40:09.423
> 
> 标签：javascript, html, css

当鼠标悬停时，我有一个图像淡入另一个。第二个图像具有用户将遵循的链接的图像映射。每次我尝试单击地图链接时，图像都会淡化回原始的第一张图像。到目前为止，这是我的代码。帮助

```
<script type='text/javascript' src='../js/jquery-1.9.1.min.js'>

</script>
<script type='text/javascript'>
$(document).ready(function(){

$("img.a").hover(
function() {
$(this).stop().animate({"opacity": "0"}, "slow");
},
function() {
$(this).stop().animate({"opacity": "1"}, "slow");
});
});
</script>
<style>
div.fadehover {
    position: relative;
    }

img.a {
    position: absolute;
    left: 0;
    top: 0;
    z-index: 10;
    }

img.b {
    position: absolute;
    left: 0;
    top: 0;
    }
</style>
</head>

<body>
<div class="fadehover">
<img src="../Background.jpg" alt="" class="a" usemap="#Map" border="0"/>
<img src="../optiontwo.jpg" alt="" class="b"/>
<map name="Map" id="Map" class="maps">
  <area shape="rect" coords="100,488,195,540" href="https://vimeo.com/lsufilmclub" />
  <area shape="rect" coords="87,433,202,489" href="http://www.youtube.com/user/LSUFilmClub" />
  <area shape="rect" coords="702,440,834,493" href="https://www.facebook.com/LSUFilmClub" />
  <area shape="rect" coords="711,493,805,562" href="https://twitter.com/LSUFilmClub" />
</map>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:53:42.907

您可能需要停止单击不透明度为 0 的元素。一种解决方案可能是这样的：

```
$('img.a').click(function(event) {
    if ($(this).css('opacity')==0) { event.preventDefault() };
}); 
```

但是，这仍然会阻止点击发生在其下方的元素上。根据您的设置方式，您可以添加一个额外的回调函数，以在元素淡出后完全隐藏元素，因此单击会通过它，类似于以下内容：

```
function() {
    $(this).stop().animate({"opacity": "0"}, "slow", function () { $(this).hide(); });
},
function() {
$(this).stop().animate({"opacity": "1"}, "slow", function () { $(this).hide(); });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:05:52.877

我可能误解了你的意图，但在你给我们的代码中，带有链接的图像（图像映射）正在淡出。我想你想要：

```
$("img.b").hover(
function() {
$(this).stop().animate({"opacity": "0"}, "slow");
},
function() {
$(this).stop().animate({"opacity": "1"}, "slow");
});

img.a {
    position: absolute;
    left: 0;
    top: 0;

    }

img.b {
    position: absolute;
    left: 0;
    top: 0;
   z-index: 10;
    } 
```

# php - PHP PDO - dblib MSSQL - 更复杂的查询问题

> ID：15628994
> 
> 赞同：0
> 
> 时间：2013-03-26T03:40:18.637
> 
> 标签：php, sql, sql-server, pdo

我最初的问题概述了我的代码[PHP PDO - dblib MSSQL - 在查询中使用变量不起作用](https://stackoverflow.com/questions/15628121/php-pdo-dblib-mssql-using-variable-in-query-not-working)

但现在我试图执行一个更复杂的查询。我可以让它在 Windows 服务器上与 mssql 一起工作而没有太多问题，但是当我尝试将它复制粘贴到我的 php 页面时，我什么也得不到。

我有点困惑我哪里出错了？

```
SELECT 
dbo.VehicleJobHistory.BookingID, dbo.Vehicle.VehicleID, dbo.VehicleJobHistory.DriverID 

FROM 
dbo.Vehicle INNER JOIN dbo.VehicleJobHistory ON dbo.Vehicle.VehicleID = dbo.VehicleJobHistory.VehicleID 

WHERE 
(dbo_VehicleJobHistory.TimeJobRequired BETWEEN $StartTime AND $FinishTime) 
AND (dbo.VehicleJobHistory.VehicleID = $VehicleID) 
```

这里的任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:59:54.060

您需要在日期周围加上引号。假设它们采用 yyyy-mm-dd 格式，请从以下更改查询的倒数第二行：

```
(dbo_VehicleJobHistory.TimeJobRequired BETWEEN $StartTime AND $FinishTime) 
```

...对此：

```
(dbo_VehicleJobHistory.TimeJobRequired BETWEEN '$StartTime' AND '$FinishTime') 
```

# linux-kernel - IOCTL 写入崩溃

> ID：15628996
> 
> 赞同：0
> 
> 时间：2013-03-26T03:40:37.810
> 
> 标签：linux-kernel, kernel, ioctl

我正在尝试在内核空间中实现 ioctl 以将一些日期写入寄存器，我在 ioctl 的 cmd 中遇到了崩溃。

下面是我的代码：

**内核端：**

```
static struct file_operations fops = {
.compat_ioctl = device_ioctl
};

int device_ioctl(struct inode *inode, struct file *filep, 
                 unsigned int cmd, unsigned long arg)
{

    int len = 200;

    printk (KERN_INFO "In Device_ioctl !!\n");
    switch(cmd)
    {
    case IOCTL_WRITE_REG:
        write_ioctl((unsigned long *)arg);
        break;

    default:
        printk (KERN_INFO "default\n");
        return -ENOTTY;
    }
    printk (KERN_INFO "device_ioctl out\n");
    return len;
} 
```

**用户端**

```
#define IOCTL_WRITE_REG _IOW(MAJOR_NUM, 1, int *)
void write_to_device(int write_fd)
{

    int retval;
    unsigned int to_write1 = 1;

    retval = ioctl(write_fd, IOCTL_WRITE_REG, &to_write1);
    if(retval < 0)
    {
        printf("fd: %d, write error: %d\n", write_fd, errno);
        exit(-1);
    }
} 
```

它没有进入 device_ioctl 函数，我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:34:28.930

我碰巧注意到的几件事：

*   您需要使用`unlocked_ioctl`而不是`compat_ioctl`. `compat_ioctl`是允许 32 位用户空间程序调用`ioctl`64 位内核上的调用。
*   您的 ioctl 处理程序函数的签名不正确（对于`unlocked_ioctl`）。预期的签名是：

    ```
    long (*unlocked_ioctl) (struct file * filep, unsigned int, unsigned long); 
    ```

我还没有尝试过真正编译这段代码，但我认为这应该可行：

```
static struct file_operations fops = {
    .unlocked_ioctl = device_ioctl
};

long device_ioctl(struct file *filep, 
                  unsigned int cmd,
                  unsigned long arg)
{

    int len = 200;

    printk (KERN_INFO "In Device_ioctl !!\n");
    switch(cmd)
    {
    case IOCTL_WRITE_REG:
        write_ioctl((unsigned long *)arg);
        break;

    default:
        printk (KERN_INFO "default\n");
        return -ENOTTY;
    }
    printk (KERN_INFO "device_ioctl out\n");
    return len;
} 
```