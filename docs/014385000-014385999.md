# StackOverflow 问答 14385000-14385999

# jquery - 来自另一个函数的 jQuery 回调

> ID：14385001
> 
> 赞同：0
> 
> 时间：2013-01-17T17:45:54.283
> 
> 标签：jquery, function, post, callback

我有一个看起来像这样的功能。有用。

**问题**

这个函数`myFunction`被许多其他函数调用，取决于哪个函数它应该在成功时做一些不同的事情。

**问题**

这是如何解决的？某种回调？还是我必须发送一个额外的参数才能让函数知道？

**代码**

```
function myfunction()
{
    var value = "myvalue";
    var post_url = "ajax.php";

    $.post(  
        post_url,
        {
             value: value,
        },
            function(responseText){  
                var json = JSON.parse(responseText);
                if(json.success)
                {
                    console.log('success'); 
                }
            }
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:49:12.317

添加一个函数参数并在成功时调用它：

```
function myfunction(callback)
{
    var value = "myvalue";
    var post_url = "ajax.php";

    $.post(  
        post_url,
        {
             value: value,
        },
            function(responseText){  
                var json = JSON.parse(responseText);
                if(json.success)
                {
                    console.log('success'); 
                    //call callback 
                    callback();

                }
            }
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:47:12.833

接受`myfunction`回调：

```
function myfunction(callback)
{
    var value = "myvalue";
    var post_url = "ajax.php";

    $.post(post_url, { value: value }, callback);
} 
```

然后你可以传入任何要在`POST`返回时执行的函数：

```
myfunction(function(responseText){  
    var json = JSON.parse(responseText);
    if (json.success)
    {
        console.log('success'); 
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:49:35.530

是的，您要么需要一个参数来识别调用者，比如

```
function myfunction(caller) {
    if (caller == "Foo") {
        // some code
    }
}

myFunction("Foo"); 
```

或者使用全局变量

```
function myFunction() {
    if (caller == "Foo") {
        // some code
    }
}

caller = "Foo";
myFunction(); 
```

# sql - 从 syscat.tabauth 表动态生成 GRANT SQL

> ID：14385003
> 
> 赞同：0
> 
> 时间：2013-01-17T17:45:59.277
> 
> 标签：sql, db2, db2-400, db2-luw

我有一个数据库（在 DB2 9.7 上）A 假设我有表 X、Y、Z...n 现在我在数据库 B 中创建了相同的表 X、Y、Z...n。我想提供相同的 GRANT对于数据库 B 中的用户，就像在数据库 A 中一样。因此，基于 SYSCAT.TABAUTH，我正在尝试生成 GRANT SQL。我为此编写了以下查询：

```
db2 "select 'GRANT '||
case INSERTAUTH
    WHEN 'Y' THEN 'INSERT,'
    WHEN 'N' THEN ' '
    END||
case ALTERAUTH
    WHEN 'Y' THEN 'ALTER,'
    WHEN 'N' THEN ' '
    END||
case DELETEAUTH
    WHEN 'Y' THEN 'DELETE,'
    WHEN 'N' THEN ' '
    END||
case SELECTAUTH
    WHEN 'Y' THEN 'SELECT,'
    WHEN 'N' THEN ' '
    END||
case UPDATEAUTH
    WHEN 'Y' THEN 'UPDATE,'
    WHEN 'N' THEN ' '
    END||
' ON '||TABSCHEMA||'.'||TABNAME||' TO '||GRANTEE from SYSCAT.TABAUTH 
where INSERTAUTH='Y' OR  ALTERAUTH='Y' OR DELETEAUTH='Y' OR SELECTAUTH='Y' OR UPDATEAUTH='Y'" 
```

但是，我面临的问题是末尾的附加“，”。假设用户只有 Insert auth，上述查询将生成 GRANT sql 为：

```
GRANT INSERT, ON SCHEMA.TABLE TO GRANTEENAME
or if user has insert and select grants then:
GRANT INSERT,SELECT, ON SCHEMA.TABLE TO GRANTEENAME 
```

我该如何解决这个问题？请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:02:28.773

您始终可以将动态部分推送到子查询中，然后使用 和 的组合[`LENGTH()`](http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000818.html)来[`SUBSTR()`](http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000854.html)修剪多余的逗号。这是我修改了一下的SQL：

```
SELECT
'GRANT' ||
SUBSTR(T.AUTHSTRING, 1 LENGTH(T.AUTHSTRING) -1) 
|| T.TABNAME
FROM(
select
    case INSERTAUTH
        WHEN 'Y' THEN 'INSERT,'
        WHEN 'N' THEN ' '
    END
    ||
    case ALTERAUTH
        WHEN 'Y' THEN 'ALTER,'
        WHEN 'N' THEN ' '
    END
    ||
    case DELETEAUTH
        WHEN 'Y' THEN 'DELETE,'
        WHEN 'N' THEN ' '
    END
    ||
    case SELECTAUTH
        WHEN 'Y' THEN 'SELECT,'
        WHEN 'N' THEN ' '
    END
    ||
    case UPDATEAUTH
        WHEN 'Y' THEN 'UPDATE,'
        WHEN 'N' THEN ' '
    END
    AS AUTHSTRING,

    ' ON ' || RTRIM(TABSCHEMA) || '.' || RTRIM(TABNAME)||' TO ' || RTRIM(GRANTEE) AS TABNAME
from SYSCAT.TABAUTH
where INSERTAUTH='Y'
   OR  ALTERAUTH='Y'
   OR DELETEAUTH='Y'
   OR SELECTAUTH='Y'
   OR UPDATEAUTH='Y'
) AS T 
```

我对此进行了测试，它适用于 LUW 9.7 和 z/OS 9.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:34:46.543

这是我最终制作的，并且效果很好：

```
db2 "SELECT
'GRANT ' ||
SUBSTR(T.AUTHSTRING, 1 ,LENGTH(T.AUTHSTRING) - 1) 
|| T.TABNAME
FROM(
select
    case INSERTAUTH
        WHEN 'Y' THEN 'INSERT,'
        WHEN 'N' THEN ''
    END
    ||
    case ALTERAUTH
        WHEN 'Y' THEN 'ALTER,'
        WHEN 'N' THEN ''
    END
    ||
    case DELETEAUTH
        WHEN 'Y' THEN 'DELETE,'
        WHEN 'N' THEN ''
    END
    ||
    case SELECTAUTH
        WHEN 'Y' THEN 'SELECT,'
        WHEN 'N' THEN ''
    END
    ||
    case UPDATEAUTH
        WHEN 'Y' THEN 'UPDATE,'
        WHEN 'N' THEN ''
    END
    AS AUTHSTRING,
    ' ON ' ||TRIM(TABSCHEMA)||'.'||TRIM(TABNAME)||' TO ' ||GRANTEE AS TABNAME
from SYSCAT.TABAUTH
where INSERTAUTH='Y'
   OR  ALTERAUTH='Y'
   OR DELETEAUTH='Y'
   OR SELECTAUTH='Y'
   OR UPDATEAUTH='Y'
) AS T" 
```

# api - 使用 JAX-WS 测试 Web 服务客户端

> ID：14385005
> 
> 赞同：0
> 
> 时间：2013-01-17T17:46:05.500
> 
> 标签：api, jax-ws

下面代码中显示的链接上有一个名为“HelloWorld”的 api。如何使用下面的代码调用此 api。该 api 不接受任何参数。

该服务已存在于显示的 url 上。我需要在下面的代码中添加什么：

```
import java.net.URL;
import javax.xml.namespace.QName;
import javax.xml.ws.Service;

public class apiHelloWorld {

    public static void main(String[] args) throws Exception {
        URL url = new URL("http://project.url.com/service.asmx?wsdl");

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:53:58.820

您的 URL 表明您指向的是[wsdl](/questions/tagged/wsdl "显示标记为“wsdl”的问题")文档，而不是实际的服务。很可能您的服务位于相同的 URL 下，但没有足够的 URL `?wsdl`）。

也就是说，使用普通`URL`类调用 SOAP Web 服务需要一些额外的步骤。但这绝对是可能的，毕竟这是一个普通的 HTTP 协议。

您需要 XML 格式的 SOAP 请求，包括 SOAP Envelope。这可能是最复杂的部分（示例来自：[*Sending a SOAP request to a Web Service via URLConnection*](http://theholyjava.wordpress.com/2006/05/25/sending-a-soap-request-to-a-web-se/)）：

```
String soapXml =   //...;
java.net.URLConnection conn = new URL("http://project.url.com/service.asmx").openConnection();
conn.setRequestProperty("SOAPAction", "");
conn.setDoOutput(true);
OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
wr.write(soapXml);
wr.flush();

BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream())); 
```

通过阅读`rd`，您可以获取响应。

# google-apps-script - 备份 Gapps 源

> ID：14385008
> 
> 赞同：1
> 
> 时间：2013-01-17T17:46:10.087
> 
> 标签：google-apps-script

我陷入了（意外）从脚本编辑器中删除所有脚本的陷阱。在本课中失去了 3 周的功课。我（也许）不会再这样做了，但它提出了一个问题“什么是 Gapps 源的完整备份解决方案？”

当然，我可以在编辑器或 Google 驱动器中复制我的脚本。然而，我质疑我的（非常复杂的）用户界面（使用 GUIBilder 构建）是否受到保护。到目前为止，我一直无法找到 GUI Builder 抛出的代码。

另请注意，无法在 GDrive 中下载应用程序脚本，那么如何获取我的工作产品的个人副本？

===== 澄清一下 - 我知道如何复制和粘贴脚本的源代码，但这并没有捕获使用 GUI Builder 构建的 200 个小工具 GUI。

至于编辑器中的陷阱门——我有这个开发的几个版本——我在左侧列表中突出显示了一个，并请求删除（使用谷歌脚本编辑器）文件/删除——魔术——所有脚本都消失了。我再也不会触摸文件/删除菜单了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:43:12.303

在某些情况下，您应该能够取回您的代码。*（编辑 - 似乎除了您从脚本编辑器中删除的任何脚本文件，以及与 GUI Builder 或表单相关的任何自动生成的代码。——哎呀！）*

您的选项取决于您*从脚本编辑器中删除所有脚本的*意思。

1.  如果您只是在编辑器中删除了脚本的文本，例如按 Ctrl-A + del，那么您可以在编辑器中恢复它。`File - See Revision History`将弹出一个对话框，让您可以穿越回到您的脚本完好无损的时间。

2.  如果您从 Google Drive 中删除了该文件，则该文件位于垃圾文件夹中，并且可以从该文件夹中恢复。您会在云端硬盘导航树中找到废纸篓文件夹。

    ![展开更多文件夹](../Images/a85f482afbb245c478aaa0edcae6de1d.png) ![垃圾文件夹](../Images/9e434fe8c04e9bf0ae41a08f19702f7f.png)

3.  如果您从编辑器中删除了脚本“文件”，那么在 Google 修复[问题 1424：无法恢复脚本文件/项目](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1424)之前，您会很不走运。

4.  如果您删除了与 GUI Builder 或表单相关的任何自动生成的代码，您将无法取回它们。（[表格不包括在从修订历史中恢复](https://productforums.google.com/forum/#!category-topic/drive/report-a-problem/JzLLDpAvses)）

如果您想将脚本存储在其他地方，这是一个好主意 - 这将为项目 1 到 3 提供额外的安全性，但不幸的是不是 4。您需要将文本从编辑器复制到另一个文件或在线存储库（例如GitHub）。养成在评论中包含有关图书馆信息的习惯，因为没有办法备份这些资源链接。

# ios - NSPredicate predicateWithFormat 传入属性名称

> ID：14385011
> 
> 赞同：5
> 
> 时间：2013-01-17T17:46:20.477
> 
> 标签：ios, core-data, nspredicate

关于 NSPredicate 的简单问题。我正在尝试使用“传入”值构建我的谓词，如下所示：

```
NSPredicate* currentPredicate = [NSPredicate predicateWithFormat:@"%@ == %@",key,[changesDict valueForKey:@"Id"] ]; 
```

但是，我无法让它正常工作。如果我插入我通过的实际值，它确实有效。所以这有效：

```
NSPredicate* currentPredicate = [NSPredicate predicateWithFormat:@"contactId == %@",[changesDict valueForKey:@"Id"] ]; 
```

（注意我插入了contactId，而不是前面的例子，我通过相同的名称传递了一个字符串）

为了排除故障，我对两个谓词进行了 NSLogged，查看了它们的描述，它们是不同的。我将在下面展示它们。

**这是工作的**

```
2013-01-17 10:29:25.513 TestingCoreData[1776:3b03] contactId == "5878" 
```

**这是不工作的**

```
2013-01-17 10:29:25.513 TestingCoreData[1776:3b03] "contactId" == "5878" 
```

所以我可以看到它正在插入一个字符串，我真的只想要稍后在获取请求中使用的属性的名称。但是有没有办法通过传入值来实现这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T18:01:18.433

对于*键*或*键路径*，您必须使用以下`%K`格式：

```
[NSPredicate predicateWithFormat:@"%K == %@", key, [changesDict valueForKey:@"Id"]]; 
```

（请参阅“谓词编程指南”中的[解析器基础知识。）](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html#//apple_ref/doc/uid/TP40001795-SW2)

# sql - 如何将此 SQL 转换为 ActiveRecord/Arel 语法？

> ID：14385015
> 
> 赞同：0
> 
> 时间：2013-01-17T17:46:30.683
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, arel, rails-activerecord

当我将此 SQL 移动到不同的数据库适配器时，我遇到了问题。我想把它转换成更灵活的东西。这里是：

```
Foo.includes([{ :group => :memberships }, :phone]).
     where('("memberships"."user_id" = ? AND "memberships"."owner" = ?) 
           OR "phone"."user_id" = ?', user.id, true, user.id) 
```

`user`是当前用户（此查询位于 CanCan 能力文件中）。这个想法是查询当前用户是 foo 组的所有者的所有 foo，或者 foo 的电话由当前用户拥有。

我尝试了许多不同的查询，但看不到正确的 OR 语法。因为这是 CanCan 能力，所以不可能合并两个查询，都需要像上面那样在一个大范围内。这可能吗？

组成员身份是通过连接表完成的`memberships`，所有者由该`owner`字段指定。

```
class Foo
  belongs_to :group
  belongs_to :phone
end 
```

# asp.net-mvc - ASP MVC 有条件地显示文本

> ID：14385016
> 
> 赞同：0
> 
> 时间：2013-01-17T17:46:31.023
> 
> 标签：asp.net-mvc, label

如果“@Html.DisplayTextFor”没有要显示的文本，我将如何更改下面的代码以不显示标签？

```
 <div class="editor-label">
            @Html.LabelFor(model => model.TableName)
        </div>
        <div class="editor-field">
            @Html.DisplayTextFor(model => model.TableName)                
        </div> 
```

这是针对 ASP MVC3 网页的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T17:50:57.210

只需使用条件

```
@if(!string.IsNullOrWhiteSpace(model.TableName))
{
  <div class="editor-label">
    @Html.LabelFor(model => model.TableName)
  </div>
  <div class="editor-field">
    @Html.DisplayTextFor(model => model.TableName)                
  </div>
} 
```

# php - 在 Symony 2 中的另一个中使用 bundle

> ID：14385019
> 
> 赞同：0
> 
> 时间：2013-01-17T17:46:35.297
> 
> 标签：php, symfony, components, bundle

我有 2 个捆绑包（前端、后端）的 S2 应用程序。现在，我想创建自己的组件，我可以在另一个应用程序中使用它（有时）。我在某处读到，在 Symfony 中是称为服务的组件。所以我必须为我的新组件/服务创建新的捆绑包，对吧？我的问题是，为了在另一个包（前端或 bakcend）中使用我的新组件/服务，我必须做什么？在某处有任何指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T05:11:05.820

symfony 中没有组件，您只有捆绑包。您可以在不同的应用程序中使用不同的捆绑包。

假设你有`UserBundle`你也可以在任何其他 symfony 应用程序中使用它

您可以制作该`UserService`捆绑包的内部，然后可以`UserService`用于类似的东西

`myservice.updatePassword($password)`

# sql-server-2008 - 如何使用 t-sql 计算表中的行数？

> ID：14385027
> 
> 赞同：2
> 
> 时间：2013-01-17T17:46:57.103
> 
> 标签：sql-server-2008, tsql

```
S.NO    MATEL     PRODUCT
1       STEEL     TANDEM
5       IRON      COMMUTER
7       FIBER     TOURING 
```

我需要计算上表中的行并插入下一行而不更改 matel 和 product 的名称。

```
8        STEEL     TANDEM
12       IRON      COMMUTER
14       FIBER     TOURING 
```

你们能帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:48:53.067

```
INSERT
INTO    mytable
SELECT  no + maxno, matel, product
FROM    mytable
CROSS JOIN
        (
        SELECT  MAX(no) maxno
        FROM    mytable
        ) q 
```

如果`no`是一个身份，你需要发出

```
SET IDENTITY_INSERT mytable ON 
```

在运行查询之前设置 if 之后再关闭。

# java - 文本框如何识别数据类型并自动完成它

> ID：14385029
> 
> 赞同：0
> 
> 时间：2013-01-17T17:47:07.280
> 
> 标签：java, php, html, mysql, browser

我想知道文本框本身会识别它的类型，当在文本框内单击时，它会给出建议。例如，我正在为移动号码创建一个文本框，当在文本框内单击时，它会正确检测到它。谁能解释一下它是如何编码的。是浏览器功能还是 HTML 功能？

这是图片说明 ![在此处输入图像描述](../Images/ad48c4e697834b11600afdbb4b9ee799.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:02:59.393

现代浏览器的此功能称为自动填充选项，浏览器会识别您之前执行过特定搜索并建议您之前输入的信息。对于清扫车，自动填充可以节省大量时间。当 Roboform 没有为我填写表格时，我通常只需要在文本字段中双击并从选项下拉列表中选择我想要的数据。这对于需要代码的日常抽奖活动特别有用。

# mysqli - 为什么这个基本的 mysqli 准备语句不起作用？

> ID：14385034
> 
> 赞同：0
> 
> 时间：2013-01-17T17:47:22.833
> 
> 标签：mysqli, prepared-statement

我正在尝试使用 MySQLi 准备好的语句对我的数据库进行简单的 SELECT 查询。我已经阅读了许多教程并密切关注它们，但由于某种原因它仍然无法正常工作。下面是查询代码：

```
<?php
$user = 'abc';
$dbconn = new mysqli("localhost", "my_user", "my_password", "my_table");

if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}
if ($stmt = $dbconn->prepare("SELECT id, pass  FROM my_table WHERE user=?")) {
$stmt->bind_param("s",$user);    
$stmt->execute();
$stmt->bind_result($db_id,$db_pass);
$stmt->fetch();
$stmt->close();
}
$dbconn->close();
echo $db_id . ' ' . $db_pass;
?> 
```

当我运行这并不是说我有连接错误而是服务器错误。我有相当多的 PHP 经验，但对 MySQLi 准备好的语句完全陌生。任何帮助将不胜感激; 感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:03:28.043

对于有相当多的 PHP 经验的人来说，你对错误报告很轻率。
由于您没有提供错误消息，我们只能猜测它是常规 Web 服务器的 503 响应。
在这种情况下，您必须在服务器的 error_log 中搜索实际的错误消息，阅读它并采取适当的措施来修复它。

检查`$dbconn->error`也有帮助。

报错有两种方式：

*   在屏幕上显示它们（在开发中不错，但在生产中不可接受）
*   将它们写入日志（在生产服务器上绝对必须）

有一些负责此行为的 ini 设置。

*   `display_errors`告诉 PHP 是否应该显示错误
*   `log_errors`告诉 PHP 是否应该记录错误。默认情况下，它会登录到网络服务器的 error_log
*   `error_log`告诉 php 必须写入 PHP 错误的文件名

请使用您的托管工具设置适当的设置。
否则你无论如何都无法使用这个主机——如果程序员看不到错误消息，他就无法工作。

收到错误消息后，将其直接转发到谷歌搜索表单非常有用。很可能有人已经遇到过同样的问题，甚至[在 Stackoverflow 上问过](https://stackoverflow.com/questions/666811/fatal-error-class-mysqli-not-found)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T23:29:23.400

我看到的第一件事是这条线：

```
$dbconn = new mysqli("localhost", "my_user", "my_password", "my_table"); 
```

应该：

```
$dbconn = new mysqli("localhost", "my_user", "my_password", "my_db"); 
```

试试看，看看会发生什么。

# java - 扫描仪在上一行重置指针

> ID：14385035
> 
> 赞同：0
> 
> 时间：2013-01-17T17:47:23.567
> 
> 标签：java, apache-commons-io

如果 Scanner 类上有 previous() 方法，我的问题就可以解决。我问这个问题是否有任何方法可以实现此功能。

输入：一个文件，内容如下

```
a,1
a,2
a,3
b,1
c,1
c,2
c,3
c,4
d,1
d,2
d,3
e,1
f,1 
```

我需要创建一个包含相同字母表的所有行的列表。

```
try {
            Scanner scanner = new Scanner(new File(fileName));
            List<String> procList = null;
            String line =null;
            while (scanner.hasNextLine()){
                line = scanner.nextLine();
                System.out.println(line);
                String[] sParts = line.split(",");
                procList = new ArrayList<String>();
                procList.add(line);
                boolean isSamealpha = true;
                while(isSamealpha){
                    String s1 = scanner.nextLine();
                    if (s1.contains(sParts[0])){
                        procList.add(s1);
                    }else{
                        isSamealpha = false;
                        System.out.println(procList);
                    }
                }
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } 
```

我得到像

```
a,1
[a,1, a,2, a,3]
c,1
[c,1, c,2, c,3, c,4]
d,2
[d,2, d,3]
f,1
[f,1] 
```

如您所见，它错过了 b 和 e 的列表。如果我有scanner.previous() 方法，我会把它放在第二个while 循环的else 中。因为没有以前的方法，所以卡住了。

请让我知道是否有任何我可以使用的方法。我不能使用 FileUtils.readLines() 因为它是一个 3GB 的文件，我不想使用我的 java 内存来存储所有文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:51:44.673

我建议您重新考虑您的算法。您缺少标记，因为您的算法涉及提前读取以确定序列何时中断，但是您没有将下一行输入收集到您放置“重复”条目的相同结构中。

您无需向后阅读即可解决此问题。如果您知道输入始终是排序的，只需逐行阅读并保留对最后一行的引用（与当前行进行比较）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:18:14.600

下面是一些应该有帮助的示例代码。（我只打了这个；我没有检查。）

```
Scanner scanner = new Scanner(new File(fileName));
List<String> procList = null;
String line = null;
String previousAlpha = null;
while (scanner.hasNextLine()){
    line = scanner.nextLine();

    if (previousAlpha == null) {
        // very first line in the file
        procList = new ArrayList<String>();
        procList.add(line);
        System.out.println(line);
        previousAlpha = line.split(",")[0];
    }
    else if (line.contains(previousAlpha)) {
        // same letter as before
        procList.add(line);
    }
    else {
        // new letter, but not the very first
        // line
        System.out.println(procList);

        procList = new ArrayList<String>();
        procList.add(line);
        System.out.println(line);
        previousAlpha = line.split(",")[0];

    }
} 
```

# jquery - jquery ajax 返回 Internet Explorer 错误的数据

> ID：14385038
> 
> 赞同：0
> 
> 时间：2013-01-17T17:47:40.587
> 
> 标签：jquery

我使用 ajax 获取数据但 Internet Explorer 总是出错。试了很多方法都解决不了

```
var ajaxDate={
     acc:acc,
     pass:pass,
};
var data=ajaxJsonFuc("api/api_login.php",ajaxDate);
if(data.status==1)
{   
    alert('login');
    document.location.href="index.php";
}
else
{
     alert(data.errMsg);
}

function ajaxJsonFuc(ajaxPath ,ajaxData){
      var db;
      $.ajax({
     url: ajaxPath,
     type: "POST",
     dataType: "json",
     data:ajaxData,
     async: false,
     error: function() {
         alert("ERROR");
      },
      success: function(data) {
         db=data;
      }
    });
    return db;
} 
```

我尝试 Chrome Safari OK Internet Explorer 错误我使用回调

```
function ajaxJsonFuc(ajaxPath,ajaxData,callback) {
   $.ajax({
    url: ajaxPath,
    type: "POST",
    dataType: "json",
    data:ajaxData,
    error: function() {
         alert("ERROR");
    },
    success: function(data) {
          callback(data);
    }
    });
}

var data;
ajaxJsonFuc("api/api_login.php",ajaxDate, function(data){
  if(data.status==1)
  { 
     alert('login');
     document.location.href="index.php";
  }
  else
  {
     alert(data.errMsg);
  }
}
)}; 
```

Internet Explorer 错误，但 Chrome Safari 正常 如何更改我的代码

# sql - SQL 命令错误 UPDATE "Near Syntax \"

> ID：14385039
> 
> 赞同：1
> 
> 时间：2013-01-17T17:47:51.507
> 
> 标签：sql, vb.net, tsql, exception-handling, ado.net

我想要做的是，从 ASP.NET（框架 4）中，用户应该能够使用记录键更新 SQL 数据库中的现有记录。使用 Visual Studio 2010 (vb)

我在“\”附近收到语法错误，我有 2 个文本框： 1- 对于键 2-包含将发送到 SQL 服务器以更新此类列的信息 (Control_ClosedByRev)

```
Dim Con As New SqlConnection
Dim SQL As String
Dim com As SqlCommand = Con.CreateCommand
Dim KeyID As Integer
KeyID = TextBox1_UpdateDataReview.Text

Con.ConnectionString = "Data Source=WCRDUSMJEMPR9\SQLEXPRESS;Initial Catalog=MicroDB;Integrated Security=True"
Con.Open()
SQL = "UPDATE ControlCharts set Control_ClosedByRev=" & TextBox2_UpdateDataReview.Text & " where ID_ControlCharts= " & KeyID
Dim cmd As New SqlCommand(SQL, Con)
'cmd.ExecuteScalar()
cmd.ExecuteNonQuery()
Label1_UpdateDataReview.Text = "Record Updated" 
```

我尝试更改 cmd.execute，但它不起作用。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:51:15.027

首先，这很容易受到 SQL 注入的影响——读入它并改用参数化查询。

这里有一些示例代码可以提供帮助。

```
 Con.ConnectionString = "Data Source=WCRDUSMJEMPR9\\SQLEXPRESS;Initial Catalog=MicroDB;Integrated Security=True"
    Con.Open()
    SQL = "UPDATE ControlCharts set Control_ClosedByRev=@ClosedByRev where ID_ControlCharts=@Key"

    Dim cmd As New SqlCommand(SQL, Con)
    cmd.Parameters.AddWithValue("@ClosedByRev ", TextBox2_UpdateDataReview.Text)
    cmd.Parameters.AddWithValue("@Key", KeyID)
    cmd.ExecuteNonQuery() 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:50:48.210

试试这个：在字符串前面加上“@”符号

```
 Con.ConnectionString = @"Data Source=WCRDUSMJEMPR9\SQLEXPRESS;Initial Catalog=MicroDB;Integrated Security=True" 
```

或逃脱斜线`"Data Source=WCRDUSMJEMPR9\\SQLEXPRESS;Initial Catalog=MicroDB;Integrated Security=True"`

# c# - Console.ReadKey 取消

> ID：14385044
> 
> 赞同：1
> 
> 时间：2013-01-17T17:48:15.563
> 
> 标签：c#, readkey

> **可能重复：**
> [如何向 Console.ReadLine() 添加超时？](https://stackoverflow.com/questions/57615/how-to-add-a-timeout-to-console-readline)

如果我有一个 Console.ReadKey()，它会使整个程序卡住，我怎样才能让它读取一个密钥 1 秒，如果没有读取一个密钥，则会设置其他内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T18:22:02.303

```
static ConsoleKeyInfo? MyReadKey()
{
    var task = Task.Run(() => Console.ReadKey(true));
    bool read = task.Wait(1000);
    if (read) return task.Result;
    return null;
} 
```

* * *

```
var key = MyReadKey();
if (key == null)
{
    Console.WriteLine("NULL");
}
else
{
    Console.WriteLine(key.Value.Key);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T18:13:28.550

控制台有一个属性`KeyAvailable`。但是您想要的功能（超时）不可用。你可以编写自己的函数

```
private static ConsoleKeyInfo WaitForKey(int ms)
{
    int delay = 0;
    while (delay < ms) {
        if (Console.KeyAvailable) {
            return Console.ReadKey();
        }
        Thread.Sleep(50);
        delay += 50;
    }
    return new ConsoleKeyInfo((char)0, (ConsoleKey)0, false, false, false);
} 
```

此函数循环直到经过所需的毫秒时间或按下某个键。它会在调用 之前检查某个键是否可用`Console.ReadKey();`。检查`Console.KeyAvailable`会立即继续，无论密钥是否可用。`true`如果一个键被按下并准备好被读取，则返回`ReadKey`，`false`否则返回。如果没有可用的键，该函数将休眠 50 毫秒，直到它执行下一个循环。这比不睡觉的循环要好，因为这会给你 100% 的 CPU 使用率（在一个核心上）。

如果您想知道用户按下了哪个键，该函数`ConsoleKeyInfo`将按原样返回。`ReadKey`最后一行创建一个空的`ConsoleKeyInfo`（请参阅[ConsoleKeyInfo 结构](http://msdn.microsoft.com/en-us/library/system.consolekeyinfo.aspx)和[ConsoleKeyInfo 构造函数](http://msdn.microsoft.com/en-us/library/system.consolekeyinfo.consolekeyinfo.aspx)）。它允许您测试用户是否按下了某个键或函数是否超时。

```
if (WaitForKey(1000).KeyChar == (char)0) {
    // The function timed out
} else {
    // The user pressed a key
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T18:08:21.733

你的意思是这样的吗？

```
 Console.WriteLine("Waiting for input for 10 seconds...");

    DateTime start = DateTime.Now;

    bool gotKey = false;

    while ((DateTime.Now - start).TotalSeconds < 10)                
    {
        if (Console.KeyAvailable)
        {
            gotKey = true;
            break;
        }            
    }

    if (gotKey)
    {
        string s = Console.ReadLine();
    }
    else
        Console.WriteLine("Timed out"); 
```

# android - 使用 x.509 android 签署 XML

> ID：14385045
> 
> 赞同：1
> 
> 时间：2013-01-17T17:48:18.853
> 
> 标签：android, xml, certificate, signature, x509

有没有办法用 X.509 签署 Xml 文档？我一直在寻找整个互联网，但似乎不可能用 x.509 签署 xml 文档？

```
 <Signaturexmlns="http://www.w3.org/2000/09/xmldsig#">
 <SignedInfo>
 <CanonicalizationMethodAlgorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
 <SignatureMethodAlgorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
 <ReferenceURI="#nana">
 <Transforms>
 <TransformAlgorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
 <TransformAlgorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
 </Transforms>
 <DigestMethodAlgorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
 <DigestValue>VItfxY/A1BITZ/BuWpsGd9gKix4=</DigestValue>
 </Reference>
 </SignedInfo>

  <SignatureValue>0+5U........ many numbers and character.....
 </SignatureValue>
 <KeyInfo>
 <X509Data>
 <X509Certificate>MIIEyDCCA7CgAwIBAgIEPssQ2TANBgkqhkiG9w0BAQUFADArMQswCQYDVQQGEwJI
 UjENMAsGA1UEChMERklOQTENMAsGA1UECxMEREVNTzAeFw0xMjA5MjcxMDQ5MThaFw0xNDA5Mjc
  xMTE5MThaMFkxCGjB623/kdW
  .......
 </X509Certificate>
 <X509IssuerSerial>
 <X509IssuerName>blablabla</X509IssuerName>
 <X509SerialNumber>1054324313</X509SerialNumber>
 </X509IssuerSerial>
 </X509Data>
 </KeyInfo>
 </Signature> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:10:46.997

您可以使用我们的 SecureBlackbox 产品（[XMLBlackbox](http://www.eldos.com/sbb/java-xml.php)包）的 Java 版本进行 XML 签名操作的全部范围。

你也可以发现[这个问题](https://stackoverflow.com/questions/5769142/android-verify-the-signature-of-xml)很有用。在那个问题中讨论了签名验证（不是签名），但也许你也可以利用这些建议。

# android - 使用两个相关属性绑定微调器

> ID：14385046
> 
> 赞同：1
> 
> 时间：2013-01-17T17:48:23.567
> 
> 标签：android, data-binding, android-spinner

我想以可以将主键与属性绑定的方式绑定android微调器。例如，我在数据库中有一个城市表，其中有两列“cityID”和“cityname”。现在，我怎么能在微调器中绑定两者。因此，当一个人在旋转器中选择城市时，我得到了那个城市的身份证。它类似于 C#.NET 中的组合框 Value Member 和 Display Member

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T09:48:57.670

可能这会对你有所帮助;) :)

[http://rimpv.blogspot.in/2013/05/bind-spinner-dropdown-in-android.html](http://rimpv.blogspot.in/2013/05/bind-spinner-dropdown-in-android.html)

# python - 有没有更好的方法来使用 Tornado 处理 index.html？

> ID：14385048
> 
> 赞同：19
> 
> 时间：2013-01-17T17:48:29.603
> 
> 标签：python, tornado

我想知道是否有更好的方法来使用 Tornado 处理我的 index.html 文件。

我对所有请求都使用 StaticFileHandler，并使用特定的 MainHandler 来处理我的主要请求。如果我只使用 StaticFileHandler 我得到一个 403: Forbidden 错误

```
GET http://localhost:9000/
WARNING:root:403 GET / (127.0.0.1):  is not a file 
```

我现在怎么做：

```
import os
import tornado.ioloop
import tornado.web
from  tornado import web

__author__ = 'gvincent'

root = os.path.dirname(__file__)
port = 9999

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        try:
            with open(os.path.join(root, 'index.html')) as f:
                self.write(f.read())
        except IOError as e:
            self.write("404: Not Found")

application = tornado.web.Application([
    (r"/", MainHandler),
    (r"/(.*)", web.StaticFileHandler, dict(path=root)),
    ])

if __name__ == '__main__':
    application.listen(port)
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-01-11T19:47:30.130

事实证明，Tornado 的 StaticFileHandler 已经包含*默认文件名*功能。

在 Tornado 版本 1.2.0 中添加了功能： [https ://github.com/tornadoweb/tornado/commit/638a151d96d681d3bdd6ba5ce5dcf2bd1447959c](https://github.com/tornadoweb/tornado/commit/638a151d96d681d3bdd6ba5ce5dcf2bd1447959c)

要指定默认文件名，您需要将“default_filename”参数设置为 WebStaticFileHandler 初始化的一部分。

更新您的示例：

```
import os
import tornado.ioloop
import tornado.web

root = os.path.dirname(__file__)
port = 9999

application = tornado.web.Application([
    (r"/(.*)", tornado.web.StaticFileHandler, {"path": root, "default_filename": "index.html"})
])

if __name__ == '__main__':
    application.listen(port)
    tornado.ioloop.IOLoop.instance().start() 
```

这处理根请求：

*   `/`->`/index.html`

子目录请求：

*   `/tests/`->`/tests/index.html`

并且似乎可以正确处理目录的重定向，这很好：

*   `/tests`->`/tests/index.html`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-16T08:51:31.043

感谢上一个答案，这是我更喜欢的解决方案：

```
import Settings
import tornado.web
import tornado.httpserver

class Application(tornado.web.Application):
    def __init__(self):
        handlers = [
            (r"/", MainHandler)
        ]
        settings = {
            "template_path": Settings.TEMPLATE_PATH,
            "static_path": Settings.STATIC_PATH,
        }
        tornado.web.Application.__init__(self, handlers, **settings)

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        self.render("index.html")

def main():
    applicaton = Application()
    http_server = tornado.httpserver.HTTPServer(applicaton)
    http_server.listen(9999)

    tornado.ioloop.IOLoop.instance().start()

if __name__ == "__main__":
    main() 
```

和设置.py

```
import os
dirname = os.path.dirname(__file__)

STATIC_PATH = os.path.join(dirname, 'static')
TEMPLATE_PATH = os.path.join(dirname, 'templates') 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-22T23:46:26.733

请改用此代码

```
class IndexDotHTMLAwareStaticFileHandler(tornado.web.StaticFileHandler):
    def parse_url_path(self, url_path):
        if not url_path or url_path.endswith('/'):
            url_path += 'index.html'

        return super(IndexDotHTMLAwareStaticFileHandler, self).parse_url_path(url_path) 
```

现在在您的应用程序中使用该类而不是 vanilla StaticFileHandler ... 工作完成！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-18T02:56:05.930

无需显式添加`StaticFileHandler`; 只需指定 static_path ，它将为这些页面提供服务。

您需要一个 MainHandler 是正确的，因为由于某种原因 Tornado 不会提供该`index.html`文件，即使您将文件名附加到 URL 也是如此。

在这种情况下，对您的代码的这种轻微修改应该适合您：

```
import os
import tornado.ioloop
import tornado.web
from tornado import web

__author__ = 'gvincent'

root = os.path.dirname(__file__)
port = 9999

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        self.render("index.html")

application = tornado.web.Application([
    (r"/", MainHandler),
    ], template_path=root,
    static_path=root)

if __name__ == '__main__':
    application.listen(port)
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-24T04:52:45.087

我一直在尝试这个。不要使用渲染它会增加解析模板的开销，并且会在静态 html 中的模板类型字符串上报错。我发现这是最简单的方法。Tornado 正在 regex 中寻找一个捕获括号，只需给它一个空的捕获组。

```
import os
import tornado.ioloop
import tornado.web

root = os.path.dirname(__file__)
port = 9999

application = tornado.web.Application([
    (r"/()", tornado.web.StaticFileHandler, {"path": root, "default_filename": "index.html"})
]) 
```

这具有将 / 解析为 index.html 的效果，并且还避免了不需要的解析，例如 /views.html 到 static_dir/views.html

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-09T17:02:22.207

这对我[有用来自龙卷风文档](http://www.tornadoweb.org/en/stable/web.html#tornado.web.StaticFileHandler)：

> 要`index.html`在请求目录时自动提供文件，请`static_handler_args=dict(default_filename="index.html")`在您的应用程序设置中设置，或添加`default_filename`为您的`StaticFileHandler`.

# git - git 工作流的功能分支统计信息

> ID：14385051
> 
> 赞同：3
> 
> 时间：2013-01-17T17:48:36.140
> 
> 标签：git, git-workflow, feature-branch

我当前的开发环境使用 git 进行 VCS，我们使用功能分支工作流程。我想达到可以生成有关每个功能的统计信息的程度。主要是，我希望能够确定一个功能需要多长时间才能完成，但其他统计数据也会很高兴看到，例如提交数、代码行数等。

主要考虑因素是为开发人员避免任何多余的工作/流程步骤，但我不反对实施一些简单的事情，例如“必须在功能开始工作之前创建功能分支”以捕获该时间戳。

我不确定收集所需信息的最佳方式。如果一个特性被合并到一个主线分支中并被删除，我会丢失它创建时间的历史。

我能看到的下一个解决方案将涉及一个`post-checkout`钩子。类似于以下内容：[https](https://gist.github.com/4557894) ://gist.github.com/4557894但我可以想到使用此方法的一些缺陷。

[编辑：正如@mr_ndrsn https://github.com/rietta/git_time_extractor](https://github.com/rietta/git_time_extractor)所指出的。关于如何使这样的工具在提交/提交消息之外关联到分支的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:36:36.930

添加信息的唯一方法：

*   通过修改现有提交（及其关联的 SHA1）来更改历史记录
*   取决于分支（可以随时重命名或删除，作为简单的指针）

是使用**[`git notes`](https://stackoverflow.com/a/9856913/6309)**.

您可以在特定的笔记命名空间中添加您想要的信息。

# selenium - 多个浏览器上的 Selenium Grid：每个测试用例是否应该为每个浏览器设置单独的类？

> ID：14385052
> 
> 赞同：8
> 
> 时间：2013-01-17T17:48:36.827
> 
> 标签：selenium, webdriver, selenium-webdriver, selenium-grid

我正在尝试将我的第一个数据驱动测试框架放在一起，该框架通过 Selenium Grid/WebDriver 在多个浏览器上运行测试。现在，我在它自己的类中拥有每个测试用例，并且我对浏览器进行了参数化，因此它对每个浏览器运行每个测试用例一次。

这在大型测试框架中很常见吗？或者，是否应该将每个测试用例复制并微调到它自己的类中的每个浏览器？那么，如果我正在测试 chrome、firefox 和 IE，是否应该有每个类，例如：“TestCase1Chrome”、“TestCase1FireFox”、“TestCase1IE”？或者只是“TestCase1”并将测试参数化为每个浏览器运行 3 次？只是想知道别人是怎么做到的。

将测试参数化为每个测试用例的单个类可以更轻松地维护非浏览器特定的代码，而复制类（每个浏览器用例一个）可以更轻松地维护特定于浏览器的代码。当我说浏览器特定的代码时，例如，单击一个项目。在 ChromeDriver 上，您无法单击某些元素的中间，而在 FirefoxDriver 上，您可以。因此，您可能需要两个不同的代码块来单击一个元素（当它在中间不可单击时）。

对于那些使用 Selenium 的 QA 工程师，这里的最佳实践是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T23:16:22.597

我目前正在从事一个每天运行大约 75k - 90k 测试的项目。我们将浏览器作为参数传递给测试。原因是：

1.  正如您在问题中提到的，这有助于维护。
2.  我们没有看到太多特定于浏览器的代码。如果您的浏览器特定代码过多，那么我会说 webdriver 本身存在问题。因为，selenium/webdriver 的优点之一是编写一次代码并在任何支持的浏览器上运行它。

我看到的代码结构与您提到的代码结构之间的区别是，我没有每个测试用例的测试类。测试根据我测试的功能进行划分，每个功能都有一个类。该类将所有测试作为方法保存。我使用 testNG 以便可以并行调用这些方法。可能这不适合您的 AUT。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T14:33:53.650

如果您保留问题中提到的代码结构，那么维护它迟早会成为一场噩梦。尝试遵守规则：所有浏览器（环境）使用相同的测试代码（一次编写）。

这种情况将迫使您解决两个问题：

1）如何为所有选择的浏览器运行测试

2）如何在不污染测试代码的情况下应用特定的浏览器变通方法

实际上，这似乎是您的问题。

这是我解决第一个问题的方法。首先，我定义了我要测试的所有环境。我将要运行测试的所有条件称为“环境”：浏览器名称、版本号、操作系统等。因此，与测试代码分开，我创建了一个这样的枚举：

```
public enum Environments {

    FF_18_WIN7("firefox", "18", Platform.WINDOWS),
    CHR_24_WIN7("chrome", "24", Platform.WINDOWS),
    IE_9_WIN7("internet explorer", "9", Platform.WINDOWS)
    ;

    private final DesiredCapabilities capabilities;
    private final String browserName;
    private final String version;
    private final Platform platform;

    Environments(final String browserName, final String version, final Platform platform) {
        this.browserName = browserName;
        this.version = version;
        this.platform = platform;
        capabilities = new DesiredCapabilities();
    }

    public DesiredCapabilities capabilities() {
        capabilities.setBrowserName(browserName);
        capabilities.setVersion(version);
        capabilities.setPlatform(platform);
        return this.capabilities;
    }

    public String browserName() {
        return browserName;
    }
} 
```

随时可以轻松修改和添加环境。如您所见，我使用它来创建和检索稍后将用于创建特定 WebDriver 的 DesiredCapabilities。

为了使测试在所有定义的环境中运行，我使用了 JUnit（在我的例子中是 4.10）[org.junit.experimental.theories](http://kentbeck.github.com/junit/javadoc/4.10/org/junit/experimental/theories/package-summary.html)：

```
@RunWith(MyRunnerForSeleniumTests.class)
public class MyWebComponentTestClassIT {

    @Rule 
    public MySeleniumRule selenium = new MySeleniumRule();

    @DataPoints 
    public static Environments[] enviroments = Environments.values();

    @Theory
    public void sample_test(final Environments environment) {

        Page initialPage = LoginPage.login(selenium.driverFor(environment), selenium.getUserName(), selenium.getUserPassword());

        // your test code here

    }   
} 
```

测试被注释为`@Theory`（而不是`@Test`像在普通 JUnit 测试中那样）并被传递一个参数。然后，每个测试都将针对该参数的所有定义值运行，该参数应该是一个注释为 的值数组`@DataPoints`。此外，您应该使用从`org.junit.experimental.theories.Theories`. 我`org.junit.rules`用来准备我的测试，在那里放置所有必要的管道。如您所见，我也通过规则获得了特定的功能驱动程序。尽管您可以在测试中直接使用以下代码：

```
RemoteWebDriver driver = new RemoteWebDriver(new URL(some_url_string), environment.capabilities()); 
```

关键在于，将它包含在规则中，您只需编写一次代码并将其用于所有测试。至于 Page 类，它是我放置所有使用驱动程序功能（查找元素、导航等）的代码的类。这样，测试代码再次保持整洁和清晰，并且您只需编写一次并在所有测试中使用它。所以，这是第一个问题的解决方案。（我知道你可以用 TestNG 做类似的事情，但我没有尝试过。）

为了解决第二个问题，我创建了一个特殊的包，其中保存了浏览器特定解决方法的所有代码。它由一个抽象类组成，例如 BrowserSpecific，它包含在某些浏览器中碰巧不同（或有错误）的公共代码。在同一个包中，我有特定于测试中使用的每个浏览器的类，并且它们中的每一个都扩展了 BrowserSpecific。

这是您提到的 Chrome 驱动程序错误的工作原理。我在 BrowserSpecific 中创建了一个方法`clickOnButton`，其中包含受影响行为的通用代码：

```
public abstract class BrowserSpecific {

    protected final RemoteWebDriver driver;

    protected BrowserSpecific(final RemoteWebDriver driver) {
        this.driver = driver;
    }

    public static BrowserSpecific aBrowserSpecificFor(final RemoteWebDriver driver) {
        BrowserSpecific browserSpecific = null;

        if (Environments.FF_18_WIN7.browserName().contains(driver.getCapabilities().getBrowserName())) {
            browserSpecific = new FireFoxSpecific(driver);
        }

        if (Environments.CHR_24_WIN7.browserName().contains(driver.getCapabilities().getBrowserName())) {
            browserSpecific = new ChromeSpecific(driver);
        }

        if (Environments.IE_9_WIN7.browserName().contains(driver.getCapabilities().getBrowserName())) {
            browserSpecific = new InternetExplorerSpecific(driver);
        }

        return browserSpecific;
    }

    public void clickOnButton(final WebElement button) {
            button.click();
    }
} 
```

然后我在特定类中重写此方法，例如 ChromeSpecific，我在其中放置了解决方法代码：

```
public class ChromeSpecific extends BrowserSpecific {

        ChromeSpecific(final RemoteWebDriver driver) {
            super(driver);
        }

        @Override
        public void clickOnButton(final WebElement button) {

        // This is the Chrome workaround

            String script = MessageFormat.format("window.scrollTo(0, {0});", button.getLocation().y);
            driver.executeScript(script);

        // Followed by common behaviour of all the browsers
            super.clickOnButton(button);
        }
} 
```

当我必须考虑某些浏览器的特定行为时，我会执行以下操作：

```
 aBrowserSpecificFor(driver).clickOnButton(logoutButton); 
```

代替：

```
 button.click(); 
```

这样，在我的通用代码中，我可以轻松地确定解决方法的应用位置，并将解决方法与通用代码隔离开来。我发现它很容易维护，因为通常会解决错误，并且可能或应该更改或消除变通方法。

关于执行测试的最后一句话。当您将使用 Selenium Grid 时，您将希望使用并行运行测试的可能性，因此请记住为您的 JUnit 测试配置此功能（从 v. 4.7 开始可用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T10:41:28.310

我们在我们的组织中使用 testng，我们使用 testng 提供的参数选项来指定环境，即要使用的浏览器、要运行的机器以及 env 配置所需的任何其他配置。浏览器名称通过 xml 文件发送，该文件控制需要运行的内容和位置。它被设置为全局变量。我们额外做的是，我们有可以覆盖这些全局变量的自定义注释，即如果测试非常明确地只在 chrome 上运行而没有其他浏览器，那么我们在自定义注释上指定相同的内容。因此，即使参数说在 FF 上运行，如果它带有 chrome 注释，它也将始终在 chrome 上运行。

我以某种方式相信为每个浏览器创建一个类并不是一个好主意。想象一下流程发生了变化，或者这里和那里有一些变化，你有 3 个类要改变而不是一个。如果浏览器的数量增加，那么就会增加一个类。

我的建议是提取特定于浏览器的代码。因此，如果单击行为是特定于浏览器的，则覆盖它以根据浏览器进行适当的检查或故障处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T21:20:26.943

我这样做，但请记住，这是没有 Grid 或 RC 的纯 WebDriver：

```
// Utility class snippet
// Test classes import this with:  import static utility.*;
public static WebDriver driver;
public static void initializeBrowser( String type ) {
  if ( type.equalsIgnoreCase( "firefox" ) ) {
    driver = new FirefoxDriver();
  } else if ( type.equalsIgnoreCase( "ie" ) ) {
    driver = new InternetExplorerDriver();
  }
  driver.manage().timeouts().implicitlyWait( 10000, TimeUnit.MILLISECONDS );
  driver.manage().window().setPosition(new Point(200, 10));
  driver.manage().window().setSize(new Dimension(1200, 800));
} 
```

现在，使用 JUnit 4.11+ 您的参数文件需要如下所示：

```
firefox, test1, param1, param2
firefox, test2, param1, param2
firefox, test3, param1, param2
ie, test1, param1, param2
ie, test2, param1, param2
ie, test3, param1, param2 
```

然后，使用单个 .CSV 参数化测试类（您打算使用它启动多种浏览器类型），在 @Before 带注释的方法中，执行以下操作：

1.  如果当前参数测试是该浏览器类型的第一个测试，并且不存在已经打开的窗口，则打开当前类型的新浏览器窗口。
2.  如果浏览器已经打开并且浏览器类型相同，则只需重新使用相同的驱动程序对象。
3.  如果浏览器打开的类型与当前测试不同，则关闭浏览器并重新打开正确类型的浏览器。

当然，我的回答并没有告诉你如何处理参数：我把它留给你自己弄清楚。

# html - 外部样式表引用异常

> ID：14385057
> 
> 赞同：0
> 
> 时间：2013-01-17T17:48:59.773
> 
> 标签：html, css

所以我是一个编程菜鸟，但我认为我有 CSS 引用...显然不是。我已经引用了样式表，我已经在外部、内部完成了它，你知道的，作品。然而，出于某种原因，当我回过头来调整一个我曾经开发过的旧应用程序时，该应用程序最初将 CSS 包含在 HTML 中，然后将 CSS 移出，然后引用它，奇怪的是，CSS 完全停止了工作。我的目录设置如下：

```
App name (folder)
   static (folder)
      main.css
   templates (folder)
      template_referencing_css.html
   main.py
   app.yaml 
```

所以这里是我尝试过的各种参考，其中 main.css 位于静态文件夹中：

```
<link type="text/css" rel="stylesheet" href="../static/main.css" />

<link type="text/css" rel="stylesheet" href="/static/main.css" /> 
```

这是我将 main.css 移动到模板文件夹并引用它时尝试的方法：

```
<link type="text/css" rel="stylesheet" href="main.css" /> 
```

css 文件只是一个较长的版本，例如：

```
body    {
    font-family:sans-serif;
    width: 850px;
    background-color: #F0F8FF;
    color: #008B8B;
    margin: 0 auto;
    padding: 10px;
}
.error {
    color: red;
}
label {
    display: block;
    font-size: 20px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:51:14.690

删除前导斜杠 -

```
<link type="text/css" rel="stylesheet" href="static/main.css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:40:39.463

一般来说，这不一定是一个好主意，但请尝试使用完整的绝对路径（如“C:/Whatever/another_dir/main.css”）。至少这会告诉您问题是否在于找到 css 文件。

# symfony - 学说mongodb中多个文档的原子更新

> ID：14385058
> 
> 赞同：3
> 
> 时间：2013-01-17T17:49:00.307
> 
> 标签：symfony, doctrine-mongodb

我使用 symfony2 和教义-mongodb-odm 从事一个项目。我想使用查询构建器对多个文档执行原子更新，但我遗漏了一些东西：

```
$this->createQueryBuilder('MyBundle:MyDoc')
->update()
->field('isOpen')->set(false)
->field('isOpen')->equals(true)
->getQuery()
->execute(); 
```

它可以工作，但它只更新一个文档。我想我应该添加一个选项

```
array('multi' => true) 
```

某处，但我在文档中没有找到任何关于此的内容。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T07:29:24.860

我通过查看类定义找到了答案。查询生成器有一个名为 multiple 的方法来设置此选项。

```
$this->createQueryBuilder('MyBundle:MyDoc')
->update()
->multiple(true)
->field('isOpen')->set(false)
->field('isOpen')->equals(true)
->getQuery()
->execute(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-13T09:50:23.760

现在使用*multiple()*已被弃用。您可以简单地使用*updateMany()*代替。

```
/**
 * Set the "multiple" option for an update query.
 *
 * @param boolean $bool
 * @return $this
 *
 * @deprecated Deprecated in version 1.4 - use updateOne or updateMany instead
 */
public function multiple($bool = true)
{
    $this->query['multiple'] = (boolean) $bool;
    return $this;
}

/**
 * Change the query type to update multiple documents
 *
 * @return $this
 */
public function updateMany()
{
    $this->query['type'] = Query::TYPE_UPDATE;
    $this->query['multiple'] = true;
    return $this;
} 
```

# regex - 从数据框中删除百分比

> ID：14385060
> 
> 赞同：4
> 
> 时间：2013-01-17T17:49:07.427
> 
> 标签：regex, r, dataframe

我有一个源自 excel 文件的数据框。它在列上方具有通常的标题，但某些列中有我要删除的 % 符号。

搜索stackoverflow为从矩阵中删除百分比提供了一些不错的代码，[有什么方法可以在R中编辑矩阵中的值？](https://stackoverflow.com/questions/12995440/any-way-to-edit-values-in-a-matrix-in-r)，当我尝试将其应用于我的数据框时，它不起作用

```
as.numeric(gsub("%", "", my.dataframe)) 
```

相反，它只返回一串“NA”，并带有一条警告消息，说明它们是由强制引入的。我申请的时候，

```
gsub("%", "", my.dataframe)) 
```

我得到了“c(...)”形式的值，其中 ... 代表数字，后跟逗号，为我拥有的每一列复制。没有 % 是有证据的；如果我能把这个重新组合起来……我会做饭的。

任何帮助都得到了很大的帮助，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T17:55:47.600

基于@Arun 的评论和成像您的 data.frame 的样子：

```
> DF <- data.frame(X = paste0(1:5,'%'), 
                   Y = paste0(2*(1:5),'%'),
                   Z = 3*(1:5), stringsAsFactors=FALSE )

> DF # this is how I imagine your data.frame looks like
   X   Y  Z
1 1%  2%  3
2 2%  4%  6
3 3%  6%  9
4 4%  8% 12
5 5% 10% 15

> # Using @Arun's suggestion
> (DF2 <- data.frame(sapply(DF, function(x) as.numeric(gsub("%", "", x)))))
  X  Y  Z
1 1  2  3
2 2  4  6
3 3  6  9
4 4  8 12
5 5 10 15 
```

我`as.numeric`在`sapply`调用中添加了结果 cols 为数字，如果我不使用`as.numeric`结果将为`factor`. 使用`sapply(DF2, class)`

# python - 链中 select_related 的顺序

> ID：14385062
> 
> 赞同：1
> 
> 时间：2013-01-17T17:49:17.013
> 
> 标签：python, django

订单 select_related 是否放在查询集链中？

即有什么区别：

```
SomeModel.objects.select_related().all() 
```

和

```
SomeModel.objects.all().select_related() 
```

在我的简短测试中，它们似乎都缓存了对象，但我想知道是否存在任何性能差异或其他我没有意识到的不同之处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:33:35.813

他们都执行相同的确切查询。所以不，不会有性能差异。

要测试，试试这个：

```
q = SomeModel.objects.select_related().all()
print q.query

q = SomeModel.objects.all().select_related()
print q.query 
```

你应该得到相同的确切查询

# php - PHP：对象扩展对象，构造函数如何工作？

> ID：14385077
> 
> 赞同：0
> 
> 时间：2013-01-17T17:49:54.517
> 
> 标签：php, inheritance, constructor

我有一个类用户。然后我用 Profile 中的一些额外信息来扩展 User。

我的 Profile 构造函数如下所示：

```
function __construct($user_id) {
  // This function sets all of User's attributes
  $this->set_user_data($user_id); 

  // This function sets the extra attribute for Profile.
  $this->set_follow_status(); 
} 
```

第二个函数使用`$this->user_id`第一个函数中设置的属性。我从第二个函数得到这个错误：`Fatal error: Using $this when not in object context`.

我是否忘记了一些关于在 PHP 中扩展对象的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:50:57.570

该`set_follow_status`方法是否声明为静态？静态方法在类的范围内执行，而不是在对象的范围内，因此无法访问任何特定实例（`$this`未在方法内部设置）。

# sql - 如何使用 SQL 按任意时间段分组

> ID：14385079
> 
> 赞同：1
> 
> 时间：2013-01-17T17:50:04.410
> 
> 标签：sql, sql-server, sql-server-2008

这类似于但不等于我之前的[问题](https://stackoverflow.com/q/14367174/55007) 那是关于如何每天总结日志项目。我使用这个 SQL。

```
SELECT 
  [DateLog] = CONVERT(DATE, LogDate), 
  [Sum] = COUNT(*)
FROM PerfRow
GROUP BY CONVERT(DATE, LogDate)
ORDER BY [DateLog]; 
```

现在我想改进它以在任意时间段内进行总结。所以不是每天的总和，而是每小时或 5 分钟的总和。这可能吗 ？

我使用 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:59:44.280

您可以使用 DATEADD 和 DATEPART 对 LogDate 进行四舍五入，然后按此分组。

示例（按五秒间隔分组）：

```
SELECT 
  [DateLog] = DATEADD(ms,((DATEPART(ss, LogDate)/5)*5000)-(DATEPART(ss, LogDate)*1000)-DATEPART(ms, LogDate), LogDate), 
  [Sum] = COUNT(*)
FROM 
(
    SELECT LogDate = '2013-01-01 00:00:00' UNION ALL
    SELECT LogDate = '2013-01-01 00:00:04' UNION ALL
    SELECT LogDate = '2013-01-01 00:00:06' UNION ALL
    SELECT LogDate = '2013-01-01 00:00:08' UNION ALL
    SELECT LogDate = '2013-01-01 00:00:10'
) a
GROUP BY DATEADD(ms,((DATEPART(ss, LogDate)/5)*5000)-(DATEPART(ss, LogDate)*1000)-DATEPART(ms, LogDate), LogDate) 
```

# jquery - 如何定义选择器以忽略有孩子的选择器？

> ID：14385081
> 
> 赞同：1
> 
> 时间：2013-01-17T17:50:14.437
> 
> 标签：jquery, jquery-selectors

我有一个这样的选择器：

```
$(source).find('.cb_notes').each(function() { .. } ); 
```

我想说忽略那些`.cb_notes`有孩子的人。

例如：

```
<td class="cb_notes">huhuhu</td> 
```

`$($('.cb_notes')[0]).children().length`--> 0 个孩子，因此应该被选中

和

```
<td class="cb_notes">
   <span class="shortcontent"> .. </span>
   <span class="allcontent"> .. </span>
   <span> .. </span>
</td> 
```

`$($('.cb_notes')[1]).children().length`--> 3 个孩子，因此应该被忽略

因此，我必须如何在这里修改选择器：

```
$(source).find('.cb_notes') ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T17:52:18.727

两种解决方案：

```
$('.cb_notes', source).filter(function(){return $(this).children().length==0})

$('.cb_notes:not(:has(*))', source) 
```

# android - 如何使用Android Horizo ntalScrollView 一张一张移动图片

> ID：14385084
> 
> 赞同：1
> 
> 时间：2013-01-17T17:50:23.387
> 
> 标签：android, horizontalscrollview

我想使用 Horizo​​ntalScrollView 创建一个图像滑块。确实，滑块一次将显示一张图像，我希望能够使用滑动手势在滑块中左右导航。任何想法都可以在 Horizo​​ntalScrollView 中重写哪些方法来实现这一点。非常感谢。最好的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:00:41.913

您可以使用带有**图像切换器视图的****图库**来实现此目的

 **此链接对您有用，可以更好地实现 Android Horizo​​ntalScrollView 以**逐**张移动图像。

**链接**：[http ://saigeethamn.blogspot.in/2010/05/image-switcher-view-android-developer.html](http://saigeethamn.blogspot.in/2010/05/image-switcher-view-android-developer.html)

**视频：** [http ://www.youtube.com/watch?v=c6a6wTfSPJA](http://www.youtube.com/watch?v=c6a6wTfSPJA)

**编辑：** 如果你想实现**复杂**的方式参考这个链接

1.  [**链接1**](http://evgeni-shafran.blogspot.in/2011/08/tutorial-custom-gallery-circular-and.html)
2.  [**链接2**](http://www.happygeek.in/customize-gallery-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:53:21.757

最好使用`Gallery`小部件或`ViewPager`. 这些元素为您处理显示和交互部分；你只需要提供这背后的数据。如果这些对您不太有效，最好自定义其中一个，然后从头开始。

[图库文档](https://developer.android.com/reference/android/widget/Gallery.html)

[ViewPager 文档](https://developer.android.com/reference/android/support/v4/view/ViewPager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:58:56.840

您可以根据需要使用以下任何东西

**图库**- 一种在中心锁定的水平滚动列表中显示项目的视图。

**ViewPager** - 允许用户左右翻阅数据页面的布局管理器。您提供 PagerAdapter 的实现来生成视图显示的页面。

**Horizo** ​​ntalScrollView - 用户可以滚动的视图层次结构的布局容器，允许它大于物理显示

参考这些链接 - [Gallery](http://developer.android.com/reference/android/widget/Gallery.html)，[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)和Horizo [​​ntalScrollView](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)**

# perl - 如何在文件中搜索一个值并使用 Perl 打印它？

> ID：14385090
> 
> 赞同：-5
> 
> 时间：2013-01-17T17:50:42.813
> 
> 标签：perl, shell, unix, jmx

我在搜索和打印值时遇到问题。这就是我到目前为止所拥有的。我究竟做错了什么？如何通过在输出中搜索来获得所需的输出？

```
my $host = $ARGV[0];
my $port = $ARGV[1];
my $domain = $ARGV[2];
my $bean = $ARGV[3];
my $get = $ARGV[4];

open(FILE, ">", "/home/hey");
print FILE "open $host:$port\n";
print FILE "domain $domain\n";
print FILE "bean $bean\n";
print FILE "get -s $get\n";
print FILE "close\n";
close FILE;    
open JMX, "/root/jdk1.6.0_37/bin/java -jar /var/scripts/jmxterm-1.0-alpha-4-uber.jar -v      silent -n < /home//hey |";
open (dbg, ">", "/home/donejava1");
#print JMX "help \n";

foreach ( <JMX> )
{
chomp;
print $_;
open (LOG, ">", "/home/out1");
print LOG $_;
close LOG;
} 
```

//输出

```
{
committed = 313733;
init = 3221225472;
max = 3137339392;
used = 1796598680;
} 
```

// 我如何打印 1796598680，寻找属性“used”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:53:30.123

以下示例应该为您提供解决方案。

```
perl -lne'print $1 if /used\s*=\s*(\d+);/' filename 
```

# java - 协助 Java 对象结构

> ID：14385093
> 
> 赞同：1
> 
> 时间：2013-01-17T17:50:50.100
> 
> 标签：java, class, accessor, mutators

我必须编写一个封装课程的类。假设一门课程具有三个属性：代号、描述和学分。我必须包括一个构造函数、访问器和修改器，以及方法`toString`和`equals`.

作为这项作业的一部分，我必须编写一个客户端类来测试该类中的所有方法`Course`。我相信我已经完成了课程课程，但在编写客户端时遇到了麻烦。对于我尝试的所有操作，我都会收到错误“无法从静态上下文引用的非静态变量”。我究竟做错了什么？

好的，我已经重写了我的代码。我仍然不确定如何让 mutator 方法工作，也不确定如何要求用户输入以设置新课程的所有值，然后在使用 accessor 和 mutator 方法时将它们输出到屏幕。请帮帮我。谢谢

```
public class ManualClass 
{
public static void main(String[] args) 
{
    Course compSci = new Test2().new Course("Comp Sci","IT1101",3.0);
    System.out.println(compSci+ "\n");

    Course dave = new Test2().new Course("Hist1111","World History",4.0);     
    System.out.print(dave.getCourseCode() + " " + dave.getDescription() 
                + " " + dave.getCreditHours() + "\n");
}

public class Course 
{
//Instance Variables
private String courseCode;
private String description;    
private Double creditHours;

public Course() 
{
    courseCode = null;
    creditHours = 0.0;
    description = null;
}

//Constructor
public Course(String courseCode, String description, double creditHours) 
{    
    this.courseCode = courseCode; 
    this.description = description;
    this.creditHours = creditHours;
}

//Accessors (Getters)
public String getCourseCode() 
{
    return courseCode;
}

public String getDescription()
{
    return description;
}

public double getCreditHours()
{
    return creditHours;
}

//Mutators (Setters)
public void setCourseCode(String CourseCode)
{
 this.courseCode = courseCode;
}

public void setDescription(String description)
{
 this.description = description;
}

public void setCreditHours(double creditHours)
{
 this.creditHours = creditHours;
}

    // toString Method
    public String toString()
    {
        DecimalFormat creditsFormat = new DecimalFormat ("#0.0");

        return "Code: " + courseCode + "; Description: " 
               + description + "; creditHours: " 
               + creditsFormat.format(creditHours);
    }

    // Equals Method
    public boolean equals(Object o)
    {
        if (!(o instanceof Course))
            return false;

        else
        {
            Course objCourse = (Course) o;
            if (courseCode.equals(objCourse.courseCode)
                && description == objCourse.description
                && creditHours == objCourse.creditHours)

                return true;

            else
                return false;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:55:49.370

作为`Course`一个非`static` *内部类*，您需要`Course`使用以下实例创建一个合格的实例`Manual_Class`：

```
Course csi = new Manual_Class().new Course("CSI", "Comp Sci", 3.0); 
```

或者，您可以将类声明`Course`移出顶级类的范围`Manual_Class`。在这种情况下，您可以使用当前的语法。

此外，每个文件只能有一个`public`类声明，它应该是您的顶级类。`Course`您可以从类声明中删除该关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:11:08.937

你正在写的是一个经典的男生程序语言代码。不是面向对象的。让我解释一下这个说法背后的原因。

写oop代码时，需要考虑“变化”。您将来创建的每门课程都不会具有相同的属性。

例如，我将分享我认为您的要求是什么样的。每门课程都将经历一个阶段性的成熟周期。有些课程只需要足够的描述，你就会停在那里。有些课程会有与之相关的书籍和一些超链接。有些课程会有图像，有些课程会有与之相关的视频文件。有些已经非常成熟，他们需要完整的课程管理、辅导、招生、学生入学管理、学生成绩管理，最后是学生证书和奖励。

如果您像学生一样思考，您将创建 1 个具有所有这些属性的类，并且您将拥有所有不需要的字段的空值。

如果您像成熟的学生一样思考，您可能会创建多个类，例如 CourseLinksOnly、CourseImagesOnly、CourseImagesAndVideos、CourseVideosOnly。

如果您像架构师一样思考，您将使用现实世界中面向业务的名称和功能来建模您的课程。CourseBasic、CourseOnline、CourseClassroom、CourseStarted、CourseCompleted、CourseArchived。这些中的每一个都可能会相互继承。但与此同时，您的代码的其余部分不会引用对象，而是会引用接口（合同）。我可以继续......

我的建议是，非常非常快地将你的学习提升到一个新的水平。完全像建筑师一样思考。一本开始学习的好书是`Head First Design Patterns Java`。前 3 章足以让你头脑清醒，摆脱程序语言的思维方式:)。

# c# - LINQ：有没有办法为 where 子句提供具有多个参数的谓词

> ID：14385103
> 
> 赞同：5
> 
> 时间：2013-01-17T17:51:19.820
> 
> 标签：c#, linq, where

想知道是否有办法执行以下操作：我基本上想为 where 子句提供一个谓词，其中包含多个参数，如下所示：

```
public bool Predicate (string a, object obj)
{
  // blah blah    
}

public void Test()
{
    var obj = "Object";
    var items = new string[]{"a", "b", "c"};
    var result = items.Where(Predicate); // here I want to somehow supply obj to Predicate as the second argument
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T17:52:47.057

```
var result = items.Where(i => Predicate(i, obj)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T18:11:42.233

您想要的操作称为“部分评估”；它在逻辑上与将一个二参数函数“柯里化”为两个一参数函数有关。

```
static class Extensions
{
  static Func<A, R> PartiallyEvaluateRight<A, B, R>(this Func<A, B, R> f, B b)
  {
    return a => f(a, b);
  }
}
...
Func<int, int, bool> isGreater = (x, y) => x > y;
Func<int, bool> isGreaterThanTwo = isGreater.PartiallyEvaluateRight(2); 
```

现在您可以`isGreaterThanTwo`在`where`子句中使用。

如果您想提供第一个参数，那么您可以轻松编写`PartiallyEvaluateLeft`.

有道理？

柯里化操作（部分适用于左边）通常写成：

```
static class Extensions
{
  static Func<A, Func<B, R>> Curry<A, B, R>(this Func<A, B, R> f)
  {
    return a => b => f(a, b);
  }
} 
```

现在你可以创建一个工厂：

```
Func<int, int, bool> greaterThan = (x, y) => x > y;
Func<int, Func<int, bool>> factory = greaterThan.Curry();
Func<int, bool> withTwo = factory(2); // makes y => 2 > y 
```

这一切都清楚了吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T17:53:10.173

你期待这样的事情吗

```
 public bool Predicate (string a, object obj)
        {
          // blah blah    
        }

        public void Test()
        {
            var obj = "Object";
            var items = new string[]{"a", "b", "c"};
            var result = items.Where(x => Predicate(x, obj)); // here I want to somehow supply obj to Predicate as the second argument
        } 
```

# c# - 我正在将我的 EF linq 查询更改为存储过程。有没有一种简单的方法来设置复杂的映射？

> ID：14385104
> 
> 赞同：8
> 
> 时间：2013-01-17T17:51:37.020
> 
> 标签：c#, entity-framework, entity-framework-4

我有一个包含 5 个单独表的实体框架项目。当我从这些表中查询数据并使用`.Include()`时，它生成的查询非常慢并且超时。

我已将查询移至存储过程，现在正在寻找一种方法来查询此存储过程，并将其返回的数据轻松映射到现有数据类。

我对 EF 的 DataContext 的原始 Linq 查询如下所示：

```
var data = (from a in context.A
                    .Include("B")
                    .Include("C")
                    .Include("D")
                    .Include("E")
            where a.Id == someValue
            select a); 
```

它返回一个类似于这样的实体数据对象：

```
class A
{
    int Id;
    string otherProperties;

    List<B> B;
    List<C> C;
    List<D> D;
    List<E> E;
} 
```

EF 生成以在 SQL Server 上运行的查询返回的结果集如下所示：

```
C1 C2 C3 C4 C5 C6 C7 C8 C9 C10
-------------------------------------------------- --------
A1 A2 B1 B2        
A1 A2 C1 C2
A1 A2 C1 C2
A1 A2 C1 C2
A1 A2 D1 D2
A1 A2 D1 D2
A1 A2 D1 D2
A1 A2 E1 E2
A1 A2 E1 E2

```

（假设 1 个 B 记录、3 个 C 记录、3 个 D 记录和 2 个 E 记录。

我已经在一个存储过程中重现了这个查询，并将它的运行时间减少到几乎没有，但是我一直在试图弄清楚如何将结果集映射到我的实体框架数据类（`A`上面的类）。

EF 绝对能够做到这一点，因为当我使用 Linq 查询时它已经在幕后某处做到了，但我不确定这是否是我可以访问的东西。

实体框架中是否有一种简单的方法可以将单个存储过程（函数导入）映射到多级实体框架类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:27:28.630

我找到了一篇博客文章，解释了如何使用 Entity Framework 完成此操作。

[http://blogs.infosupport.com/ado-net-entity-framework-advanced-scenarios-working-with-stored-procedures-that-return-multiple-resultsets/](http://blogs.infosupport.com/ado-net-entity-framework-advanced-scenarios-working-with-stored-procedures-that-return-multiple-resultsets/)

简而言之，您需要编写存储过程，以便它以实体框架所期望的特定方式返回您的数据，然后您可以使用一些[EF 扩展](http://archive.msdn.microsoft.com/EFExtensions)来自定义您的存储过程执行，并具体化您的对象图。

看起来这在未来版本（我相信 5.0+）中内置于实体框架中，但是这种解决方法看起来应该适用于较低版本。

尽管在我的情况下，我发现如果我刚刚摆脱了`.Include()`Linq 查询中的 并通过在返回对象之前在代码中引用它们来手动触发加载其他属性，我的性能问题得到了解决。这是因为它不是在 5 个未优化连接的表之间构建一个大规模查询，而是运行 5 个单独的查询，每个查询只提取它需要的特定数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:02:43.893

当我通过将昂贵的查询转换为存储过程来优化 EntityFramework 时，我为结果创建了一个自定义类，然后在 DbContext 中执行一些逻辑以将我的自定义类转换为实体。

所以你会创建类似的东西

```
public class StoreProcARow
{
public string Name {get;set;} // properties for every column
} 
```

然后在你的`DbContext`

```
public A GetA(int ID)
{
// do stored procedure
IEnumerable<StoreProcARow> procResult = ...
// process procResult into A type

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:11:49.633

试试[AutoMapper](http://automapper.org)。

你会做这样的事情：

```
using AutoMapper;

...

Mapper.CreateMap<DataModel.B, ReplyObjects.B>;
Mapper.CreateMap<DataModel.C, ReplyObjects.C>;
...
return new A
{
  B = Mapper.Map<DataModel.B, ReplyObjects.B>(varContainingDataForB),
  C = Mapper.Map<DataModel.C, ReplyObjects.C>(varContainingDataForC)
  ...
}; 
```

只要ReplyObjects.B 中的属性与DataModel.B 的名称和类型相匹配，一切都会自动映射！

# sphinx - 狮身人面像在某些情况下不返回结果

> ID：14385108
> 
> 赞同：0
> 
> 时间：2013-01-17T17:51:46.163
> 
> 标签：sphinx

我正在使用扩展 2 匹配模式。这是一个例子：

```
Keyword 'méz': 0 results
Keyword 'mézes': 4657 results 
```

字符集为 utf-8，min_word_len 为 3。

有什么建议么？

# javascript - 有没有办法以交互方式运行 WScript JScript

> ID：14385112
> 
> 赞同：0
> 
> 时间：2013-01-17T17:51:58.457
> 
> 标签：javascript, jscript, wsh

Python 可以交互运行，所以我想知道是否也可以交互运行 WScript Javascript（微软称之为 JScript）。

我看到我可以运行这样的脚本：cscript hello.js

内容：

```
WSH.Echo("Hello world");
WSH.Quit(); 
```

但我只想做类似的事情：

```
Echo("Hello world"); 
```

那可能吗？

# java - 如何在 Java 中的字符串标记器中否定分隔符字符串中的正则表达式

> ID：14385113
> 
> 赞同：0
> 
> 时间：2013-01-17T17:52:02.007
> 
> 标签：java, regex, stringtokenizer

假设我想标记一个文本，其中除 [a-zA-Z] 以外的所有内容都设置为分隔符，如何在 Java 中编写 sringtokenizer？它看起来像这样：`StringTokenizer st = new StringTokenizer(data, "[[^a-z]&&[^A-Z]");`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:02:26.470

尝试正则表达式`[^a-zA-Z]+`

```
String text = "hello, world^ i love: #66 you";
for (String str : text.split("[^a-zA-Z]+")) {
    System.out.println(str);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:58:36.963

像这样使用基于[负前瞻](http://www.regular-expressions.info/lookaround.html)的正则表达式：

```
String[] arr = data.split("(?i)(?![a-z]).");

?i - ignore case
?! - Negative lookahead 
```

这意味着对除 az 或 AZ 以外的任何字符进行分隔。

# java - 当我使用 EntityManagerFactory 时发生 NullPointerException

> ID：14385114
> 
> 赞同：0
> 
> 时间：2013-01-17T17:52:03.900
> 
> 标签：java, hibernate, jpa, entitymanager, hibernate-entitymanager

我的目标是从 applicationContext.xml 文件中实例化 EntityManagerFactory 以获取在 SQL 数据库中注册的所有帖子。以下是主要文件的内容：

应用程序上下文.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- Properties files linkers -->

    <context:property-placeholder location="/WEB-INF/resources/database/jdbc.properties"/>
    <context:property-placeholder location="/WEB-INF/resources/database/hibernate.properties"/>

    <!-- Config database - initialization -->

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${jdbc.driverClassName}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
    </bean>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <!-- Three main layers definition -->

    <context:annotation-config />
    <context:component-scan base-package="com.zone42"/>

    <!-- Transaction sub-system initialization -->

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

</beans> 
```

(WEB-INF/classes/)persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="post-unit" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <class>com.zone42.model.Post</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
    </persistence-unit>
</persistence> 
```

PostDAO.java

```
public class PostDAO extends GenericDAOEntity<Post> implements IPostDAO
{

} 
```

GenericDAOEntity.java

```
@Transactional
public class GenericDAOEntity<T> implements IGenericDAO<T>
{
    /**
     * Properties
     */

    @Autowired
    @PersistenceContext(unitName="post-unit")
    private EntityManagerFactory entityManagerFactory/* = Persistence.createEntityManagerFactory(persistence_unit_name)*/;

    //Get all posts

    @SuppressWarnings("unchecked")
    public List<T> findAll(Class<T> obj) {
        EntityManager entityManager = this.entityManagerFactory.createEntityManager();
        Query query = entityManager.createQuery("from " + obj.getSimpleName());
        return (query.getResultList());
    }

    /**
     * Accessors
     */

    public EntityManagerFactory getEntityManagerFactory() {
        return entityManagerFactory;
    }

    @PersistenceContext(unitName="post-unit")
    public void setEntityManagerFactory(EntityManagerFactory entityManagerFactory) {
        this.entityManagerFactory = entityManagerFactory;
    }   
} 
```

我尝试了几种配置组合，但没有成功。当我想从 entityfactory 实例创建 EntityManager 实例时，来自`NullPointerException`该方法。`findAll`我想我有一个配置问题。我想明确代码在我直接在类中使用 operator new 实例化 EntityManagerFactory 时有效。现在我只想分配我的工厂，选择另一种方式，即使用 appicationContext.xml 文件中的 xml。谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:56:40.333

您需要将字段/设置器标记为`@Autowired`或在 XML 中明确连接引用：

```
<bean class="PostDAO">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean> 
```

# c# - 在 Page_Load 上更改 GridView 单元格字符串

> ID：14385115
> 
> 赞同：0
> 
> 时间：2013-01-17T17:52:04.860
> 
> 标签：c#, asp.net, gridview

我有一个 GridView，它有一个名为的列`Active`，它显示一个`1`（用于活动）或一个`-1`用于非活动。

但是，由于这是在前端 UI 中实现的，因此我不希望向用户呈现在他们看来是无用的整数，而是在 GridView 上呈现`Active`或呈现。`Not active``Page_Load`

代码看起来像 -

```
protected void Page_Load(object sender, EventArgs e)
    {
        //code here to modify the column 'Active' in the GridView
        //GridView ID="GV1"

        if (row.Cells[1].Text == "1")
        {
            row.Cells[1].Text = "Active";
        }
        if (row.Cells[1].Text == "-1")
        {
            row.Cells[1].Text = "Not Active";
        }

    } 
```

GridView 中的列是 -

```
<asp:BoundField HeaderText="Active" DataField="Active" SortExpression="Active"></asp:BoundField> 
```

由于我不想编辑数据库以使 UI 更美观，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:55:43.033

尝试[OnRowDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx) Gridview 事件。

# c++ - 如何检测子窗口时是否按下 ctrl 键。富编辑是焦点？

> ID：14385117
> 
> 赞同：1
> 
> 时间：2013-01-17T17:52:08.900
> 
> 标签：c++, winapi, windows-messages, richedit

我注意到当控件处于焦点时按下 CTRL 键时，RichEdit 不会向父窗口发送消息。当父窗口处于活动状态时，一切正常。但是当光标在 RichEdit 中时，只有鼠标 0x20`WM_SETCURSOR`消息正常。当在没有控制键的情况下按 0x111 键`WM_COMMAND`时发送，当我尝试按 CTRL 并在此期间任何其他键（如“S”）用于实现另存为功能时，不会发送任何内容。有没有办法创建对 RichEdit 的回调或以其他方式捕获`CTRL+S`？

Escape 也不会向父窗口发送消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:54:06.993

找到了如何为richedit设置回调。

```
 DefEditProc = (WNDPROC)SetWindowLong(richeditWindow, GWL_WNDPROC, (long)&richEdit.EditKeyProc); 
```

和之前的代码：

```
LRESULT EditKeyProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) {
  if(uMsg == WM_KEYDOWN) {
    if(wParam == 'S' && GetAsyncKeyState(VK_CONTROL));
    return 0;
  }
  return CallWindowProc(DefEditProc, hwnd, uMsg, wParam, lParam);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:03:15.683

我认为，如果您只想捕获一些特定的快捷键来进行定义的操作（例如 Ctrl+S 进行保存），这不是最好的方法。

我想说正确的方法是使用加速器表。它有两个优点：

*   如果加速器表在资源中，您可以轻松更改或删除快捷方式，而无需实际深入研究 C/C++ 代码。还有多语言软件的功能，如果您希望用户自定义快捷方式等，您也可以很容易地打开/保存加速器表在文件中而不是使用资源等。
*   快捷方式不仅会在您处于该特定 Richedit 时触发。我认为这对用户来说是一件好事。假设您在同一个窗口中有另一个控件。使用您的代码，Ctrl+S 将不起作用，除非您在所有控制窗口上注册回调。我是用户，我目前在另一个控件上，我按 Ctrl+S。哦不，我的文档没有保存！令人沮丧和马车看起来...
*   如果您还使用菜单，则无需添加太多代码...

# windows - 如何杀死运行时间超过 30 分钟的 Windows 进程

> ID：14385122
> 
> 赞同：14
> 
> 时间：2013-01-17T17:52:27.787
> 
> 标签：windows, service, batch-file, process

我基本上需要实现两件事，

1.  查找 Windows 服务器上运行的所有“firefox.exe”进程
2.  杀死已经运行超过 30 分钟的那些

我有一些零碎的东西，但不确定如何集成所有这些以使其作为 Windows 服务运行。

到目前为止我所拥有的 -

1）查找所有正在运行的firefox进程的方法

```
wmic process get name,creationdate, processid | findstr firefox 
```

2）基于PID杀死进程的方法

```
taskkill /PID 827 
```

还剩下什么？

*   计算基于`creationdate`,`PID`运行时间超过 30 分钟
*   使用`taskkill`命令顺序杀死所有符合上述条件的PID
*   设置这是一项服务（我可能会弄清楚）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-17T23:27:09.380

很容易想到，“你不能在 .bat 中做到这一点”。我知道这是我的第一反应。问题是您需要不直接支持且不重要的日期操作。但随后里奇·劳伦斯（ [Ritchie Lawrence](http://www.commandline.co.uk/index.html)）来救援，他完成了编写必要的日期函数的所有艰苦工作。

WMI`Process`类`CreationDate`以 UTC 格式提供。`Win32_OperatingSystem` `LocalDateTime`以 UTC 格式为我们提供当前时间。我们需要从 LocalDataTime 中减去最大生命周期（在您的情况下为 30 分钟）以获得 CutOffTime。然后我们可以使用它来过滤`Process`，最后`call terminate`（而不是`taskkill`）。而不是`findstr`，我使用 WMI`where`过滤器（这要快得多）。

以下代码似乎有效。由于这是**KILLING TASKS**，您应该自己测试一下。

注意：`if "%%p" GEQ "0"`用于过滤掉 wmic 结果末尾的“空白”行，该行不为空，但包含换行符。正如我们所期待的那样，这似乎是一个简单而有效的测试（尽管也许有更好的方法来处理这个问题）。

```
@echo off
setlocal ENABLEDELAYEDEXPANSION ENABLEEXTENSIONS

set MaxRunningMinutes=30
set ProcessName=firefox.exe

for /f "usebackq skip=1" %%t in (
  `wmic.exe path Win32_OperatingSystem get LocalDateTime`) do (
    if "%%t" GEQ "0" set T=%%t)

rem echo !T!
rem echo !T:~,4!/!T:~4,2!/!T:~6,2! !T:~8,2!:!T:~10,2!:!T:~12,2!
rem echo !T:~15,-4! !T:~-4!

set fsec=!T:~15,-4!
set tzone=!T:~-4!

call :DateToSecs !T:~,4! !T:~4,2! !T:~6,2! !T:~8,2! !T:~10,2! !T:~12,2! UNIX_TIME
rem echo !UNIX_TIME!

set /a CutOffTime=UNIX_TIME-MaxRunningMinutes*60
rem echo !CutOffTime!

call :SecsToDate !CutOffTime! yy mm dd hh nn ss
rem echo !yy!/!mm!/!dd! !hh!:!nn!:!ss!
set UTC=!yy!!mm!!dd!!hh!!nn!!ss!.!fsec!!tzone!
rem echo !UTC!

wmic process where "name='%ProcessName%' AND CreationDate<'%UTC%'" call terminate

rem * Alternate kill method. May be useful if /F flag is needed to
rem * to forcefully terminate the process. (Add the /F flag to
rem * taskill cmd if needed.)

rem for /f "usebackq skip=1" %%p in (
rem   `wmic process where "name='%ProcessName%' AND CreationDate<'%UTC%'" get processid`) do (
rem   if "%%p" GEQ "0" taskkill /PID %%p)

goto :EOF

rem From: http://www.commandline.co.uk/lib/treeview/index.php
:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:DateToSecs %yy% %mm% %dd% %hh% %nn% %ss% secs
::
:: By:   Ritchie Lawrence, updated 2002-08-13\. Version 1.1
::
:: Func: Returns number of seconds elapsed since 1st January 1970 00:00:00
::       for a given calendar date and time of day. For NT4/2000/XP/2003.
::
:: Args: %1 year to convert, 2 or 4 digit (by val)
::       %2 month to convert, 1/01 to 12, leading zero ok (by val)
::       %3 day of month to convert, 1/01 to 31, leading zero ok (by val)
::       %4 hours to convert, 1/01 to 12 for 12hr times (minutes must be
::          suffixed by 'a' or 'p', 0/00 to 23 for 24hr clock (by val)
::       %5 mins to convert, 00-59 only, suffixed by a/p if 12hr (by val)
::       %6 secs to convert, 0-59 or 00-59 (by val)
::       %7 var to receive number of elapsed seconds (by ref)
:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

setlocal ENABLEEXTENSIONS
set yy=%1&set mm=%2&set dd=%3&set hh=%4&set nn=%5&set ss=%6
if 1%yy% LSS 200 if 1%yy% LSS 170 (set yy=20%yy%) else (set yy=19%yy%)
set /a dd=100%dd%%%100,mm=100%mm%%%100
set /a z=14-mm,z/=12,y=yy+4800-z,m=mm+12*z-3,j=153*m+2
set /a j=j/5+dd+y*365+y/4-y/100+y/400-2472633
if 1%hh% LSS 20 set hh=0%hh%
if {%nn:~2,1%} EQU {p} if "%hh%" NEQ "12" set hh=1%hh%&set/a hh-=88
if {%nn:~2,1%} EQU {a} if "%hh%" EQU "12" set hh=00
if {%nn:~2,1%} GEQ {a} set nn=%nn:~0,2%
set /a hh=100%hh%%%100,nn=100%nn%%%100,ss=100%ss%%%100
set /a j=j*86400+hh*3600+nn*60+ss
endlocal&set %7=%j%&goto :EOF
:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:SecsToDate %secs% yy mm dd hh nn ss
::
:: By:   Ritchie Lawrence, updated 2002-07-24\. Version 1.1
::
:: Func: Returns a calendar date and time of day from the number of
::       elapsed seconds since 1st January 1970 00:00:00\. For
::       NT4/2000/XP/2003.
::
:: Args: %1 seconds used to create calendar date and time of day (by val)
::       %2 var to receive year, 4 digits for all typical dates (by ref)
::       %3 var to receive month, 2 digits, 01 to 12 (by ref)
::       %4 var to receive day of month, 2 digits, 01 to 31 (by ref)
::       %5 var to receive hours, 2 digits, 00 to 23 (by ref)
::       %6 var to receive minutes, 2 digits, 00 to 59 (by ref)
::       %7 var to receive seconds, 2 digits, 00 to 59 (by ref)
:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
setlocal ENABLEEXTENSIONS
set /a i=%1,ss=i%%60,i/=60,nn=i%%60,i/=60,hh=i%%24,dd=i/24,i/=24
set /a a=i+2472632,b=4*a+3,b/=146097,c=-b*146097,c/=4,c+=a
set /a d=4*c+3,d/=1461,e=-1461*d,e/=4,e+=c,m=5*e+2,m/=153,dd=153*m+2,dd/=5
set /a dd=-dd+e+1,mm=-m/10,mm*=12,mm+=m+3,yy=b*100+d-4800+m/10
(if %mm% LSS 10 set mm=0%mm%)&(if %dd% LSS 10 set dd=0%dd%)
(if %hh% LSS 10 set hh=0%hh%)&(if %nn% LSS 10 set nn=0%nn%)
if %ss% LSS 10 set ss=0%ss%
endlocal&set %7=%ss%&set %6=%nn%&set %5=%hh%&^
set %4=%dd%&set %3=%mm%&set %2=%yy%&goto :EOF
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: 
```

### 使用 Powershell

最初的问题被标记为“批处理文件”，所以我首先给出了 Windows bat 答案。但我想提一下，杀死一个运行时间超过 30 分钟的命名进程对于 Powershell 来说是微不足道的：

```
Get-Process firefox | 
    Where StartTime -lt (Get-Date).AddMinutes(-30) | 
    Stop-Process -Force 
```

再次，这是**杀死任务**，所以请小心。如果您不熟悉 Powershell，这里是一个内衬的细分：

1.  使用`Get-Process`cmdlet 获取在本地计算机上运行的进程。这里传递了进程的名称`firefox`。如果需要，可以传递名称列表，并且可以使用通配符。
2.  由返回的进程对象通过`Get-Process`管道传送到`Where`StartTime 属性上的过滤器。cmdlet 用于获取当前`Get-Date`日期和时间作为`DateTime`类型。调用 AddMinutes 方法添加 -30 分钟，返回一个`DateTime`表示 30 分钟前的值。运算符（从`-lt`技术上讲，在此上下文中，它是一个开关参数），指定小于运算。
3.  由返回的过滤后的进程对象通过`Where`管道传送到`Stop-Process`cmdlet。该`-Force`参数用于防止确认提示。

上面我使用了`Where`Powershell 3 中引入的简化语法。如果您需要 Powershell 2 兼容性（这是在 Windows XP 上运行的最新版本），则需要此语法：

```
Get-Process firefox | 
    Where { $_.StartTime -lt (Get-Date).AddMinutes(-30) } | 
    Stop-Process -Force 
```

这里的花括号包含一个 ScriptBlock。`$_`用于显式引用当前对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-13T15:27:42.300

我相信你正在做某种测试自动化并且有很多挂起的Firefox，所以为了杀死**所有**运行超过半小时的人，请执行以下操作：

```
foreach ($process in Get-Process firefox*){If((New-TimeSpan -Start $process.StartTime).TotalHours -gt 0.5) {Stop-Process $process.Id -Force}} 
```

这实际上就是我们正在做的事情。

# vb.net - 如何通过“USB”连接的手机发送短信？

> ID：14385123
> 
> 赞同：1
> 
> 时间：2013-01-17T17:52:33.593
> 
> 标签：vb.net

我不是专业的开发人员，但我想开发一个项目，包括通过仅通过 USB 端口连接的移动设备发送消息......如果可能的话，我想保持它的通用性，比如不需要手机型号和服务提供商名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:00:58.693

我认为不可能做到这一点。当然，至少这取决于使用的手机型号。然而，作为一种替代方法，有些公司提供通过 Web API 访问的（付费但不昂贵）SMS 服务。这可能适合您想要实现的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:34:28.093

我不认为你会发现这很容易。消息可以以 2 种不同的模式“文本”或 PDU 发送。并非所有手机都支持这两种模式。PDU 是现代手机上使用最广泛的类型，但也是最复杂的类型。并非所有手机都将调制解调器暴露给计算机，例如。Windows 移动 6.*。许多手机使用不支持所有命令的专有软件。不同的电话将连接到不同的 COM 端口，因此每次都需要检查，如果连接的电话/调制解调器不止一部，可能会很棘手。但是，在第一次手动配置设置后，仅使用一部手机并以文本格式发送消息非常容易。

在此处查看示例[http://www.codeproject.com/Articles/34360/vb-net-AT-commands-to-send-SMS](http://www.codeproject.com/Articles/34360/vb-net-AT-commands-to-send-SMS)

# javascript - 谷歌地图 v3 方向

> ID：14385125
> 
> 赞同：1
> 
> 时间：2013-01-17T17:52:39.033
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试为我的网站制作一个新的谷歌地图，它总是使用 v2。一切都很顺利，直到最后一个细节……在询问了方向之后，我知道“应该”在地图上画一条线，将方向可视化。那条蓝线没有显示在我的地图上并尝试了很多东西但没有运气......任何建议都非常感谢！对于任何想查看实际脚本的人：http: [//www.pruikenboer.nl/googlev3.html](http://www.pruikenboer.nl/googlev3.html) 在此先感谢！克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:17:12.057

您创建了两次地图，首先是您要绘制路线的地图，然后加载一个新地图，该地图会覆盖第一个地图。

解决方案：仅创建 1 个地图对象

# javascript - 更改前置文件输入的位置

> ID：14385131
> 
> 赞同：2
> 
> 时间：2013-01-17T17:53:03.130
> 
> 标签：javascript, jquery, html

是否可以使前置文件输入出现在前一个元素下方而不是其上方。因此，在这个 jquery 中，“选择一个文件：”文本保留在所有添加的元素之上

```
$(document).ready(function(){
    $('#add_more').click(function(){

         var current_count = $('input[type="file"]').length;
         var next_count = current_count + 1;

    $('#file_upload').prepend('<p><input type="file" name="file_' + next_count +'" /></p>');

    });
 });

 <p>Select a file: <input  name="file_1" type="file">
                   <input type="submit" name="send" value="Send" ></p>
                   <a id="add_more" href="#">add more</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:54:42.533

切换到附加:)

```
 $('#file_upload').append('<p><input type="file" name="file_' + next_count +'" /></p>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:56:38.400

切换到追加将做你正在寻找的。

```
$(document).ready(function(){
    $('#add_more').click(function(){

         var current_count = $('input[type="file"]').length;
         var next_count = current_count + 1;

    $('#file_upload').append('<p><input type="file" name="file_' + next_count +'" /></p>');

    });
 }); 
```

jsFiddle [http://jsfiddle.net/HYcxx/](http://jsfiddle.net/HYcxx/)

# grails - 如何创建与 Grails 一起使用的枚举

> ID：14385144
> 
> 赞同：2
> 
> 时间：2013-01-17T17:53:56.707
> 
> 标签：grails, enums

圣杯 2.2

所以这应该很容易，但是我不断收到相同的错误消息：

```
Class java.lang.IllegalArgumentException
Message No enum constant myPackageName.RequestType.Banner 
```

这是我的课：

```
public enum RequestType {
    BANNER("Banner"), OTHER("Other")

    final String value

    RequestType(String value) { this.value = value }

    String toString() { value }
} 
```

这把我逼疯了！！

编辑：堆栈跟踪

```
No enum constant myPackageName.RequestType.Banner. Stacktrace follows:
java.lang.IllegalArgumentException: No enum constant myPackageName.RequestType.Banner
    at java.lang.Enum.valueOf(Enum.java:236)
    at org.grails.datastore.gorm.GormStaticApi.methodMissing(GormStaticApi.groovy:108)
    at ysuprojects.ProjectService.viewableProjects(ProjectService.groovy:115)
    at ysuprojects.ProjectService.getIndexModel(ProjectService.groovy:422)
    at ysuprojects.ProjectController.index(ProjectController.groovy:25)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

这是它在课堂上的使用方式

```
class Project {
    ...
    RequestType requestType
    ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:48:43.367

好的-这就是发生的事情。

我从使用 a 切换`String`到使用`Enum`. 现有数据库`"Banner"`在该字段中，这导致了此错误。我将字段更改为，`"BANNER"`并且不再收到此错误。

Grails 试图做`Enum.valueOf(RequestType, "Banner")`

# backbone.js - 骨干网：无法在视图中访问“this.model.*”

> ID：14385148
> 
> 赞同：1
> 
> 时间：2013-01-17T17:53:59.630
> 
> 标签：backbone.js

我是 Backbone 的新手，正在努力解决看似基本的问题。我设置了一个路由来接收一个参数，用它来定位一个模型（此时是硬编码的），并在视图中渲染模型数据。

使用“project1”的参数，在我的视图的渲染功能中，我可以访问，`this.model`但我不能访问或或使用. （注意：试图访问后面的任何一个都会导致应用程序爆炸。）`project1.attributes``project1.get('name')``this.model.attributes``this.model.get('name')``this.model.toJSON()`

这是一个“this”绑定问题吗？任何帮助表示赞赏。

```
var Router = Backbone.Router.extend({
  routes: {
    "work/:project" : "project"
  },
  project: function (project) {
    $('#content').html(new ProjectView({model:project}).render().el);
  }
});

var ProjectView = Backbone.View.extend({
  id: "project",
  render: function () {
    $(this.el).html(this.template(this.model.toJSON()));
    return this;
  }
});

var Project = Backbone.Model.extend({});

var project1 = new Project({ 
  name: "Project1", 
  description : "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:03:17.580

正如评论已经提到的那样，您的基本问题是您将字符串传递给视图，但该视图需要一个模型。这一行：

```
$('#content').html(new ProjectView({model:project}).render().el); 
```

问题是：`project`需要是 的实例`Backbone.Model`，但不是。那条线应该看起来像这样：

```
var project1 = new Project({ 
    name: "Project1", 
    description : "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."
});
$('#content').html(new ProjectView({model: project1}).render().el); 
```

# capybara - 断言找到的节点数量大于 N

> ID：14385149
> 
> 赞同：5
> 
> 时间：2013-01-17T17:54:08.000
> 
> 标签：capybara

使用 Capybara，可以轻松断言要找到的节点的确切数量：

```
page.should have_selector("fieldset.has_many_fields input[type=file]", :count => 2) 
```

这样可以确保恰好有 2 个这样的字段。但我想检查“至少 2”。就像是：

```
page.all("fieldset.has_many_fields input[type=file]").count should be_greater_than 2 
```

这是一个例子，因为它抛出`undefined method 'greater_than?' for 3:Fixnum'`

有这样的匹配器吗？或者另一个允许我检查“至少 N 个节点”的技巧？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-23T11:00:09.117

不幸的是，RobertH 在 2013 年 1 月 17 日给出的答案现在是折旧的语法。

对于这种精确的场景，您需要执行以下操作：

```
page.all("fieldset.has_many_fields input[type=file]", :minimum => 2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T19:11:32.573

我想你只是有一个错字。尝试：

```
expect(page.all("fieldset.has_many_fields input[type=file]").count).to be > 2 
```

# jquery - Twitter 小部件：自定义滚动条？

> ID：14385151
> 
> 赞同：2
> 
> 时间：2013-01-17T17:54:23.953
> 
> 标签：jquery, twitter, widget, scrollbar

我正在使用 twitter 小部件 + Jquery 自定义内容滚动器（[http://manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/)），我想知道是否可以将嵌入式小部件的滚动条更改为我自己的风格？

问题是该网站使用自定义滚动条，而 twitter 的滚动条看起来很丑（默认）。我似乎找不到合适的元素来选择和更改 `$(".element").mCustomScrollbar();`

也许在另一个维度上，可以选择包装类下的所有元素并应用于每个这个`mCustomScrollbar()`函数......但我不知道它是否可能或如何实现它。

# git - 分支和主控之间的 Git 提交混淆

> ID：14385153
> 
> 赞同：0
> 
> 时间：2013-01-17T17:54:28.367
> 
> 标签：git, github

我对 GitHub 有点纠结（对于 Mac，虽然我怀疑这是否相关）。

我只是最近才改用 Git，所以它在许多方面仍然是一个未知数，今天是我第一次有理由同时激活两个分支。

我不确定发生了什么，但是其中一个分支和 master 之间的合并没有按计划进行（不知何故，提交摘要在将 hotfix_7.0 与 master 合并时丢失了），所以我取消了提交。然而，随后出现了问题。

分支 update_4.0 包括：

```
application/modules/bookings/controllers/inspector.php
application/modules/bookings/models/data_bookings.php
application/modules/bookings/views/users/administrators/bookings/adjust.php
application/modules/invoices/controllers/invoices.php
application/modules/invoices/views/manage.php
application/modules/search/controllers/assets/invoices.php
application/modules/search/models/data_search.php 
```

分支 hotfix_7.0 包括：

```
application/modules/bookings/controllers/bookings.php
application/modules/bookings/controllers/inspector.php
application/modules/search/models/data_search.php
application/modules/venues/models/data_venues.php 
```

当我切换到 update_4.0 时，没有等待提交的文件，hotfix_7.0 也是如此。但是当我切换到 master 时，update_4.0 的文件显示为等待提交。为什么？而且——更重要的是——我接下来应该做什么来补救这个问题？

更新：根据@twalberg 的要求，这里是分支结构数据：

```
* 869e2f1 (HEAD, origin/hotfix_7.0, master, hotfix_7.0) An adjustment to the Search
| * c1e4c04 (update_4.0) Adjustments to Bookings, Invoicing, and Search
|/  
* d2413f9 (origin/master, update_3.0) Update an Invoice PDF
* 6a77f1e (hotfix_6.0) General fixes
* fb04b7e (update_2.0) Advanced Search
* c8222fe (hotfix_5.0) Caching
* 3baea6a (feature_5.0) Caching
| *-.   5c08c19 (refs/stash) On hotfix_4.0: GitHub: stashing before switching branches.
| |\ \  
|/ / /  
| | * 9a6cd92 untracked files on hotfix_4.0: 0ed797b Invoice date range
| * e7e4bbd index on hotfix_4.0: 0ed797b Invoice date range
|/  
* 0ed797b (hotfix_4.0) Invoice date range
* 4d9640d (hotfix_3.0) A fix to one of the search functions database methods, and the incl
* 8ee9f92 (feature_4.0) Users can now switch between Clients from anywhere in the system w
* 8d8752a (feature_3.0) In an effort to improve the invoicing process, I've made several a
* 2cff420 (hotfix_2.0) Switching references to the Commission for Venues column in Invoici
* 2403093 (feature_2.0) Statuses for Signatures, which allows the User to filter them in m
* 6572680 (hotfix_1.0) A conditional statement was checking against a string value as if i
* 6705899 (update_1.0) Alphabetical listing of Signatures for messages.
* 283bde4 (feature_1.0) Ability to edit group options in addition to group privileges for 
* 79ded64 To Book 3 
```

更新：根据@Ilion 的要求，这里是分支结构数据：

```
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit.
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   application/modules/bookings/controllers/inspector.php
#   modified:   application/modules/bookings/models/data_bookings.php
#   modified:   application/modules/bookings/views/users/administrators/bookings/adjust.php
#   modified:   application/modules/invoices/controllers/invoices.php
#   modified:   application/modules/invoices/views/manage.php
#   modified:   application/modules/search/controllers/assets/invoices.php
#   modified:   application/modules/search/models/data_search.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:21:43.350

至于为什么，我在子模块文件夹中看到了这种行为——更改为没有它们的分支并且它们没有被删除——但我不希望 git 的新手使用子模块。无论如何，这只会显示子模块文件夹，而不是子模块中的文件。

您的第二个问题的直接答案，如果您不想要更改，您可以使用以下命令摆脱它们。

如果*等待提交*的文件缓存在索引中（就像它们在之后一样`git add .`，您可以使用以下命令将它们从索引中删除：

```
git rm -r --cached . 
```

如果它们没有被索引，您可以使用以下方法永久删除它们，有时需要运行两次（例如第一次删除`.gitignore`文件时）。

```
git clean -fd 
```

下一步要做什么的更长期的答案取决于你想在哪里结束。我们可以在您的日志输出中看到提交和分支，而从您的帖子来看，这不是您想要的方式。那么，你希望它是怎样的呢？

# css - 如何创建每行显示 3 个项目的水平 UL？

> ID：14385154
> 
> 赞同：1
> 
> 时间：2013-01-17T17:54:29.507
> 
> 标签：css

我正在尝试创建一个水平 UL，它总是每行显示 3 个项目。棘手的部分是这些项目可以具有不同的宽度。例如：

```
<ul class="items">
  <li>
   <input type="checkbox" id="work" />
    Work items
   </li>
  <li>
   <input type="checkbox" id="shopping" /> 
    Shopping
    </li>
  <li>
   <input type="checkbox" id="financial" />
    Financial Information & Tips
    </li>
</ul> 
```

等等

我想这样做，所以它本质上就像使用一个表格，它总是每行显示 3 个项目，并且每个项目的复选框始终与其文本位于同一行。

我该怎么做？

这是我正在使用的当前代码，但它并没有均匀地显示项目，通常最后一个复选框在第 1 行结束，文本被推送到下一行。

```
ul.items
{
  text-align: center; 
  list-style-type: none;  
  width: 400px;
}

ul.items li
{
    display: inline;     
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T18:01:49.917

试试 CSS`nth-child`选择器。无论宽度如何都可以使用。

我还删除了您的`display:inline`规则并将其替换为`float:left;`.

**[jsFiddle 示例](http://jsfiddle.net/j08691/VmV3y/1/)**

```
ul.items li:nth-child(3n+4) {
  clear:left;
  float:left;
} 
```

有关更多信息`nth-child`，请参阅[https://developer.mozilla.org/en-US/docs/CSS/:nth-child](https://developer.mozilla.org/en-US/docs/CSS/:nth-child)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T17:59:53.610

我喜欢为此使用浮动

```
ul.items
{
  text-align: center; 
  list-style-type: none;  
  width: 400px;
}

ul.items li
{
    float: left; 
    display: inline;     
}

.clear { clear: both; } 
```

使用这个 html：

```
<ul class="items">
  <li>
   <input type="checkbox" id="work" />
    Work items
   </li>
  <li>
   <input type="checkbox" id="shopping" /> 
    Shopping
    </li>
  <li>
   <input type="checkbox" id="financial" />
    Financial Information & Tips
    </li>
  <li class="clear"></li>
</ul> 
```

在这里演示：http: [//jsfiddle.net/hG3Us/](http://jsfiddle.net/hG3Us/)

# batch-file - 自动文本输入中的意外行为和 使用批处理文件的 DOS 程序的密钥

> ID：14385155
> 
> 赞同：1
> 
> 时间：2013-01-17T17:54:33.910
> 
> 标签：batch-file, automation, dos

我有一个在 Windows 中运行的旧 DOS 程序，它有几个菜单，用户可以通过输入数字来移动（它会自动将您带到另一个菜单 - 无需按“回车”）。有时，用户需要输入文件名，然后按回车键。

我正在尝试使用批处理文件使用户与该程序的交互自动化。到目前为止，在此[资源](https://stackoverflow.com/questions/2457406/how-do-you-enter-something-at-a-dos-prompt-programmatically)的帮助下。我已经成功地通过只需要输入数字（不按回车键）的菜单自动进行用户交互。但是，一旦菜单需要输入文件名并按回车，我就会遇到问题。

这是用于自动化前两个菜单选择（4，然后是 6）的代码，

```
(echo 4 
echo 6
) | execute.exe 
```

按 6 后，下一个菜单需要输入文本文件名并按 Enter。然而，即使是上面的代码（我认为它会在我需要输入文件名的交互处停止）以某种方式自动按下回车 - 这意味着文件没有名称。这让我感到困惑。如果我这样做，结果相同：

```
(echo 4 
echo 6
echo sometext
) | execute.exe 
```

或这个：

```
(echo 4 
echo 6
echo.
) | execute.exe 
```

插入 PAUSE 也不会改变任何东西。不知何故，批处理文件正在处理需要输入文本并以特定方式按 Enter 的菜单部分。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T23:05:19.523

## 问题

这就是我想象的 execute.exe 程序正在解释您给它的输入的方式。

```
echo 4
echo 6 
```

翻译成

```
4
6
_ 
```

下划线“_”是空空行的占位符。

因此 execute.exe 等待第一个数字，但您正在发送`echo 4`

```
4
_ 
```

因此，它接受第一个数字，然后转到下一个数字提示符，在该提示符处忽略空白输入按无效输入，并重新提示输入第二个数字。发送`echo 6`

```
6
_ 
```

它现在接受第二个提示的第二个数字，并继续到文件提示，在那里它立即被空的空行解除。

由于程序不期望新行，因此它们将作为实际命令存储在输入缓冲区中。我最好的猜测是尝试只输出数字，而不是由 echo 命令引起的尾随新行。

* * *

## 回答

试试这个数字输入而不是回声。 **我自己没有尝试过，也不能说它是否有效。** 您也可以尝试仅对 6 执行此操作，而对 4 仍然使用 echo。

```
<nul set /p ="4"
<nul set /p ="6" 
```

请注意，该`set /p`命令不能输出引号`"`或等号`=`作为第一个/唯一字符。[更多信息](http://www.dostips.com/forum/viewtopic.php?f=3&t=4209)

```
(
<nul set /p ="4"
<nul set /p ="6"
echo filename
) | execute.exe 
```

# php - 来自 Composer 的 Zend Studio 10 和 PHPUnit

> ID：14385159
> 
> 赞同：1
> 
> 时间：2013-01-17T17:54:42.773
> 
> 标签：php, ide, phpunit, zend-studio

我有一个项目使用[Composer](http://getcomposer.org)来管理它的依赖项；其中之一是 PHPUnit。

要运行我的项目的测试套件，我在终端上运行以下命令：

```
bin/phpunit -c tests/ 
```

使用 Composer PHPUnit 版本中的二进制文件并设置要从`tests/`目录加载的配置文件。

它运行完美。

但是，使用 Zend Studio 10 (BETA)，我无法将我的项目配置为在 IDE 中以相同的方式运行测试。

有没有办法做到这一点？

# c# - 如何序列化和反序列化 C# 整数数组？

> ID：14385161
> 
> 赞同：-4
> 
> 时间：2013-01-17T17:54:49.293
> 
> 标签：c#, json

这应该很容易，但我遇到了一些麻烦，所以我认为获得一些帮助会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:56:46.670

假设您的数组是一个 Int32 数组...

```
using (var stream = File.Create("file.xml")) {
    var serializer = new XmlSerializer(typeof(Int32[]));
    serializer.Serialize(stream, someArrayOfInt32);
} 
```

将创建一个非常容易理解/修改的简单 XML 文件。要反序列化它，请使用 Deserialize 方法。

JSON格式：

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Web;
 using System.Runtime.Serialization.Json;
 using System.IO;
 using System.Text;  
 /// <summary>
 /// JSON Serialization and Deserialization Assistant Class
 /// </summary>
 public class JsonHelper
 {
     /// <summary>
     /// JSON Serialization
     /// </summary>
     public static string JsonSerializer<T> (T t)
     {
         DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));
         MemoryStream ms = new MemoryStream();
         ser.WriteObject(ms, t);
         string jsonString = Encoding.UTF8.GetString(ms.ToArray());
         ms.Close();
         return jsonString;
     }  
     /// <summary>
     /// JSON Deserialization
     /// </summary>
     public static T JsonDeserialize<T> (string jsonString)
     {
         DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));
         MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(jsonString));
         T obj = (T)ser.ReadObject(ms);
         return obj;
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:32:27.360

取决于您尝试将它们序列化为什么。您想将它们保存为*文本文件*吗？也许一个*原始的二进制文件*呢？也许您想要一些*XML*或*JSON*？

# python - Python - 同时发送 HTTP 请求

> ID：14385164
> 
> 赞同：0
> 
> 时间：2013-01-17T17:54:51.687
> 
> 标签：python

嘿伙计们，我已经研究了最好的方法来做到这一点。我想确保我理解正确。

如果我想：

http1 http2 http3 http...

在同一时间发送。我应该把这些设置成一个线程然后启动线程吗？我需要确保它是完全相同的时间。

我认为这可以在 Java 中完成，但我不熟悉它。感谢你们提供的任何帮助！

在阅读了有关该过程的更多信息后，我认为这不是很清楚。异步处理是否会同时发送这些数据包，以便它们同时到达目的地？从阅读不同的文章来看，异步似乎就是这样。

我相信对于我正在寻找的东西，我需要使用像多处理这样的同步方法。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:56:44.623

你的问题对我来说并不完全清楚，但你看过[Twisted](http://twistedmatrix.com/trac/)吗？它是一个用 Python 编写的事件驱动的网络引擎。如果你不熟悉事件驱动编程，这篇[Linux Journal](http://www.linuxjournal.com/article/7871)是一个很好的介绍。[基本上，异步 I/O](http://en.wikipedia.org/wiki/Asynchronous_i/o)与[反应器模式](http://en.wikipedia.org/wiki/Reactor_pattern)（封装了一个事件循环）一起使用，而不是线程。

Twisted 有多个网络客户端。您可能应该从较新的代理 (twisted.web.client.Agent) 开始，而不是较旧的 getPage。

如果你想了解 Twisted，我可以推荐[Dave Peticolas 的 Twisted Introduction](http://krondo.com/?page_id=1327)。它很长，但易于理解且详细。

# gcc - LLVM 和 gcc 之间的 SIMD 向量互操作性

> ID：14385166
> 
> 赞同：4
> 
> 时间：2013-01-17T17:54:54.500
> 
> 标签：gcc, llvm, vectorization, simd, abi

我想通过使用 LLVM 的 JIT 动态生成代码来加速我正在处理的程序。该算法可以对向量进行操作，我宁愿使用 LLVM 中的 SIMD 向量扩展来执行此操作（它不仅使某些操作更快，而且实际上使代码生成更简单）。

我是否有机会以合理的便携方式完成这项工作？

在 C 方面，我将使用 gcc、clang 或者可能是 icc 进行编译。`float x 4`我的向量会很简单`double x 4`。这个世界上非平台特定向量操作的事实标准似乎是 gcc 向量扩展：

```
typedef double Vector4 __attribute__ ((vector_size (sizeof(double)*4))); 
```

检查生成的代码表明，clang 将`double x 4`在寄存器中传递一个向量，而 gcc 则希望它在堆栈上 --- 这很糟糕。（它们都`float x 4`在寄存器中传递向量。）

我的理解是这两个系统应该是 ABI 兼容的，但显然向量不计算在内。我真的可以这样做吗？

我的示例程序是::

```
typedef double real;
typedef real Vector4 __attribute__ ((vector_size (sizeof(real)*4)));

Vector4 scale(Vector4 a)
{
    Vector4 s = {2, 2, 2, 2};
    return a*s;
} 
```

这与 LLVM 一起编译为：

```
scale:
    movapd  .LCPI0_0(%rip), %xmm2
    mulpd   %xmm2, %xmm0
    mulpd   %xmm2, %xmm1
    ret 
```

...但是 gcc 产生了这种恐怖：

```
scale:
    subq    $64, %rsp
    movq    %rdi, %rax
    movsd   .LC0(%rip), %xmm0
    movapd  72(%rsp), %xmm1
    movsd   %xmm0, -56(%rsp)
    movsd   %xmm0, -48(%rsp)
    movsd   %xmm0, -72(%rsp)
    movsd   %xmm0, -64(%rsp)
    mulpd   -56(%rsp), %xmm1
    movapd  88(%rsp), %xmm0
    mulpd   -72(%rsp), %xmm0
    movapd  %xmm1, -104(%rsp)
    movq    -104(%rsp), %rdx
    movapd  %xmm1, -24(%rsp)
    movapd  %xmm0, -8(%rsp)
    movq    %rdx, (%rdi)
    movq    -16(%rsp), %rdx
    movq    %rdx, 8(%rdi)
    movq    -8(%rsp), %rdx
    movq    %rdx, 16(%rdi)
    movq    (%rsp), %rdx
    movq    %rdx, 24(%rdi)
    addq    $64, %rsp
    ret 
```

如果我重新定义`real`为 a `float`，我会从两个编译器中得到这个（它们产生相同的代码）：

```
scale:
    mulps   .LCPI0_0(%rip), %xmm0
    ret 
```

这些都是用`$CC -O3 -S -msse test.c`.

**更新：**我突然想到，简单的解决方案就是使用 LLVM 创建一个蹦床，将结构转换为向量，反之亦然。这样，互操作性问题就被简化为由 ABI 确定的按值传递*结构*；这些向量仅存在于 LLVM-land 中。这意味着我只能在 LLVM 中使用 SIMD 的东西，但我可以忍受。

但是，我仍然想知道上述问题的答案；矢量很棒，我希望能够更多地使用它们。

**更新更新：**事实证明，C 通过值传递结构的方式非常疯狂......呃，疯狂！A`struct { double x, y, z; }`通过指针传递；a作为一*对*%xmm 寄存器`struct { float x, y, z }`传递：并被打包到第一个中，而is 在第二个中...*`x``y``z`*

 *简单而无痛不是！*

# javascript - validationEngine js 插件不会阻止发送带有自定义提交事件的表单

> ID：14385167
> 
> 赞同：0
> 
> 时间：2013-01-17T17:54:59.730
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, validation

我正在使用 validationEngine 在发送表单之前对其进行验证；

**插入**

[http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)

它工作正常，除非我将我的提交句柄写入表单。

例如

```
<form id="form" action="controller/action" method="post"></form>

$('#form').submit(function() {
      $.ajax({
        url: form.attr('action'),
        type: form.attr('method'),
        success: function (response) {
            success(response);
        }
    });
}); 
```

已执行验证，但仍会发布表单。我还尝试通过以下方式获取返回值：

```
alert($("#formUpdStoringSettings").validationEngine('validate')); 
```

它总是对表单返回 true，对字段返回 false，这意味着验证正常。

只要我需要自定义提交事件，是否有任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:56:38.713

事实证明，validationEngne 旨在在用户与表单交互期间验证表单。它不是为了验证提交事件。

我必须创建自己的验证函数。

# linux - 如何确保数据到达存储，绕过内存/缓存/缓冲-IO？

> ID：14385168
> 
> 赞同：1
> 
> 时间：2013-01-17T17:55:04.423
> 
> 标签：linux, performance, storage, performance-testing

在 Linux 中，如何确保我的系统 write() 调用（以及类似的 write-IO 调用/变体）绕过内存/缓存/缓冲 IO 到达非易失性存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:55:44.470

请参阅“[确保数据到达磁盘](https://lwn.net/Articles/457667)”。

简而言之，最安全的策略是在适当的时候使用 O_DIRECT + fsync()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T21:22:55.027

使用 O_DIRECT 可以达到目的，但对于大多数应用程序来说效率很低，除非您在应用程序中管理整个文件缓存/缓冲。通常有两种方法可以做到这一点。

1.  打开文件时使用 O_SYNC 标志，以便写入将被阻塞，直到它被写入底层持久存储。
2.  当您想确保将更改写入存储设备时，请执行正常的文件操作并调用 fsync。

请记住，如果您使用的是 mmap，那么 msync 将是执行相同操作的更好方法。

# java - 线程“主”java.lang.OutOfMemoryError 中的异常：Eclipse 上的 Java 堆空间

> ID：14385171
> 
> 赞同：0
> 
> 时间：2013-01-17T17:55:12.457
> 
> 标签：java, eclipse, exception, fork-join

我正在尝试使用 fork 和 join 框架来执行这个[程序。](http://docs.oracle.com/javase/tutorial/essential/concurrency/examples/ForkBlur.java)当我将较小尺寸的 JPEG 图像提供给该程序时，它可以正常工作，但是当我提供大小超过 4 MB 的图像时，它会抛出以下异常：

```
****Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at ForkBlur.blur(ForkBlur.java:120)
    at ForkBlur.main(ForkBlur.java:110)**** 
```

我正在使用日食 Helios IDE。

我希望它适用于大小超过 50 MB 的较大图像

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T18:11:37.893

它对我来说很好。

右键单击要运行的项目。运行方式 -> 运行配置 -> 参数。

然后在 VM 参数中：

-Xmx1g

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T18:01:43.770

运行程序时需要指定更大的堆大小。

如果这是您的首选工具，您可以通过 eclipse 来完成。您可以右键单击包含主要方法的文件，选择“运行方式”选项 - 这将打开一个对话框，您可以在其中设置命令行选项的主机（查找参数部分）。

配置最大堆大小的命令行选项是 Xmx；例如 Xmx 2g 将最大堆大小设置为 2 GB。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T18:05:08.883

您需要告诉 JVM 为您的程序留出更多内存。如果从命令行运行程序，您将使用该`-mx`选项来指定允许 JVM 使用多少内存。

例如，要允许 128MB 内存，您可以：

```
java -mx128M MyClass 
```

如果从 Eclipse Helios 运行，请执行以下操作：

1.  右键单击该项目并转到`properties`.
2.  点击`Run/Debug Settings`。
3.  选择您的运行配置，然后单击`Edit`或单击以使用配置类型`New`创建一个。`Java Application`
4.  在`Arguments`选项卡上，放入`-mx128M`VM 参数框。

# security - 在 JBoss 5.1.0.GA 中保护 JMXConnectorServerService (jmx-remoting.sar)

> ID：14385172
> 
> 赞同：2
> 
> 时间：2013-01-17T17:55:12.803
> 
> 标签：security, jboss, jmx, jboss5.x

我一直在尝试了解如何保护 JBoss 5.1.0.GA 默认提供的 JMXConnectorServerService。

目前，如果我将以下 URL 粘贴到 JConsole 中，则无需任何身份验证即可直接访问 JMX：service:jmx:rmi:///jndi/rmi://:1290/jmxconnector

然后我这样做是为了保护我的 JMXInvoker，希望这样可以保护所有 JMX 访问：[http ://objectopia.com/2009/10/01/securing-jmx-invoker-layer-in-jboss/](http://objectopia.com/2009/10/01/securing-jmx-invoker-layer-in-jboss/)

但是，显然，这不适用于 JMXConnectorServerService。我仍然可以通过 jconsole 使用上述服务 URL 访问 JMX。

然后我发现了这个还没有被满足的功能请求：[https ://issues.jboss.org/browse/JBAS-8159](https://issues.jboss.org/browse/JBAS-8159)

现在，目前我并不担心疯狂的安全措施。此 URL 不会暴露给外部网络。所以，我只想看看用“jmx-console”安全域保护 jmx-remoting.sar 的最简单方法是什么？

我可以切换到默认的 MBean 服务器，但显然，在 5.1.0.GA 中，这很痛苦：[https ://community.jboss.org/thread/153594](https://community.jboss.org/thread/153594)

我非常感谢在这方面的任何意见。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:32:00.810

我不认为该服务已得到保护，但有一个[补丁](https://issues.jboss.org/secure/attachmentzip/unzip/12414094/12335900%5B6%5D/org/jboss/mx/remoting/service/JMXConnectorServerService.java)。

对于一个稍微简单一点的版本，我会在这里冒险，因为我没有在 AS 5 上测试过，但是我将它向后移植到 AS 4 并且它工作正常。

我不确定你到底有哪个版本，但我们假设它是[这个](http://www.docjar.com/html/api/org/jboss/mx/remoting/service/JMXConnectorServerService.java.html)版本。EAP 版本有一个稍微复杂的版本，但前提是一样的。您将需要扩展[JMXConnectorServerService](http://www.docjar.com/html/api/org/jboss/mx/remoting/service/JMXConnectorServerService.java.html)和[JMXConnectorServerServiceMBean](http://www.docjar.com/html/api/org/jboss/mx/remoting/service/JMXConnectorServerServiceMBean.java.html)。

在这个实现中，创建服务器的代码如下所示：

```
// create new connector server and start it
connectorServer = JMXConnectorServerFactory.newJMXConnectorServer(url, null, mbeanServer); 
```

在您的扩展程序中，添加以下内容：

```
/** The name of the JAAS domain to use for authentication */
protected String jaasDomain = null; 
...
/**
   * Returns the name of the JAAS domain to use for authentication
   * @return the name of a JAAS Domain
   */
public String getJaasDomain() {
   return jaasDomain;
}

/**
  * Sets the name of the JAAS domain to use for authentication
  * @param jaasDomain the JAAS Domain to use for authentication
  */
public void setJaasDomain(String jaasDomain) {
   this.jaasDomain = jaasDomain;
} 
```

现在您需要重新实现**start**方法，该方法会添加一个包含您要进行身份验证的 JAAS 域名的环境。

```
 public void start() throws Exception
   {
      // the address to expose in the urls
      String host = System.getProperty("java.rmi.server.hostname");

      // check to see if registry already created
      rmiRegistry = LocateRegistry.getRegistry(host, registryPort);
      if (rmiRegistry != null)
      {
         try
         {
            rmiRegistry.list();
         }
         catch(RemoteException e)
         {
            log.debug("No registry running at host '" + host +
                  "', port '" + registryPort + "'.  Will create one.");
            rmiRegistry = LocateRegistry.createRegistry(registryPort, null, new DefaultSocketFactory(bindAddress));
         }
      }
      else
      {
         rmiRegistry = LocateRegistry.createRegistry(registryPort, null, new DefaultSocketFactory(bindAddress));
      }

      String serviceURL = "service:jmx:rmi://" + host + "/jndi/rmi://" + host + ":" + registryPort + jndiPath;

      JMXServiceURL url = new JMXServiceURL(serviceURL);

      // create new connector server and start it
      // ==== NEW AUTH CODE HERE ====
      final Map<String, Object> environment = new HashMap<String, Object>();
      environment.put("jmx.remote.x.login.config", jaasDomain);
      connectorServer = JMXConnectorServerFactory.newJMXConnectorServer(url, environment, mbeanServer);
      // ==== NEW AUTH CODE ENDS ====
      connectorServer.start();

      log.info("JMX Connector server: " + serviceURL);
   } 
```

您可以选择验证 JAAS 名称，如下所示：

```
/**
 * Validates the name of the passed JAAS domain. 
 * If the name is not valid, a RuntimeException will the thrown.
 * @param domain The name of the JAAS domain to validate.
 */
private void validateJaasDomain(String domain) {
    try {
        new LoginContext(domain);
    } catch (Exception e) {
        throw new RuntimeException("The JAAS Domain [" + domain + "] could not be loaded", e);
    }
} 
```

将 jaasDomain 属性添加到新的 MBean 接口：

```
/**
 * Returns the name of the JAAS domain to use for authentication
 * @return the name of a JAAS Domain
 */
public String getJaasDomain();

/**
 * Sets the name of the JAAS domain to use for authentication
 * @param jaasDomain the JAAS Domain to use for authentication
 */
public void setJaasDomain(String jaasDomain); 
```

假设您的新 impl 是**com.vijay.JMXConnectorServerService**并且新 MBean 是**com.vijay.JMXConnectorServerServiceMBean**；您的部署描述符将如下所示：（使用*jmx-console* jaas 域，因为您可能已经获得了安全......）

```
<!-- ======================================================== -->
<!-- Example Vijay JMX Remoting Service Configuration file        -->
<!-- ======================================================== -->
<server>

   <mbean code="com.vijay.JMXConnectorServerService"
      name="jboss.remoting:service=JMXConnectorServer,protocol=rmi"
      display-name="JMX Connector Server (RMI)">
           <attribute name="BindAddress">
               <!-- Get the port from the ServiceBindingManager -->
               <value-factory bean="ServiceBindingManager" method="getStringBinding" 
                  parameter="jboss.remoting:service=JMXConnectorServer,protocol=rmi"/>
            </attribute>
            <!-- if comment this out, will use 1099 as default and will conflict -->
            <!-- with default JNP (JNDI) port. -->
            <attribute name="RegistryPort">
               <!-- Get the port from the ServiceBindingManager -->
               <value-factory bean="ServiceBindingManager" method="getIntBinding" 
                  parameter="jboss.remoting:service=JMXConnectorServer,protocol=rmi"/>
            </attribute>
            <!-- the path to which will be bound in rmi registry -->
            <!-- the commented value below is the default. -->
            <!-- <attribute name="JndiPath">/jmxconnector</attribute> -->
            <attribute name="JaasDomain">jmx-console</attribute>
   </mbean>
</server> 
```

那是我的全部了。我希望它对你有用。

# python - HTTPS POST 请求 Python

> ID：14385173
> 
> 赞同：9
> 
> 时间：2013-01-17T17:55:15.373
> 
> 标签：python, post, https, urllib2, urllib

我想向应该以 .csv 文件响应的 HTTPS 站点发出发布请求。我有这个 Python 代码：

```
url = 'https://www.site.com/servlet/datadownload'
values = {
  'val1' : '123',
  'val2' : 'abc',
  'val3' : '1b3',
}

data = urllib.urlencode(values)
req = urllib2.Request(url,data)
response = urllib2.urlopen(req)
myfile = open('file.csv', 'wb')
shutil.copyfileobj(response.fp, myfile)
myfile.close() 
```

但是'我得到了错误：

```
BadStatusLine: ''    (in httplib.py) 
```

我已经尝试使用 Chrome 扩展程序发布请求：高级 REST 客户端[（屏幕截图）](http://i.imgur.com/OJwYE.png)，效果很好。

可能是什么问题，我该如何解决？（是因为HTTPS吗？）

* * *

编辑，重构代码：

```
try:
    #conn = httplib.HTTPSConnection(host="www.site.com", port=443) 
```

=> 给出一个`BadStatusLine: ''`错误

```
 conn = httplib.HTTPConnection("www.site.com");
    params  = urllib.urlencode({'val1':'123','val2':'abc','val3':'1b3'})
    conn.request("POST", "/nps/servlet/exportdatadownload", params)
    content = conn.getresponse()
    print content.reason, content.status
    print content.read()
    conn.close()
except:
    import sys
    print sys.exc_info()[:2] 
```

输出：

```
Found 302

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML><HEAD>
<TITLE>302 Found</TITLE>
</HEAD><BODY>
<H1>Found</H1>
The document has moved <A HREF="https://www.site.com/nps/servlet/exportdatadownload">here</A>.<P>
<HR>
<ADDRESS>Oracle-Application-Server-10g/10.1.3.5.0 Oracle-HTTP-Server Server at mp-www1.mrco.be Port 7778</ADDRESS>
</BODY></HTML> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T23:51:38.097

有你必须使用的理由`urllib`吗？[Requests](http://docs.python-requests.org/en/latest/)更简单，几乎在所有方面都更好，并且抽象出一些`urllib`难以处理的杂乱无章的东西。

例如，我会将您的示例修改为：

```
import requests
resp = requests.post(url, data=values, allow_redirects=True) 
```

此时，来自服务器的响应在 中可用`resp.text`，你可以用它做你想做的事。如果请求无法正确发布（例如，因为您需要自定义 SSL 证书），它应该会给您一个很好的错误消息，告诉您原因。

即使您不能在生产环境中执行此操作，也可以在本地 shell 中执行此操作以查看您从中获得的错误消息`requests`，并使用它来调试`urllib`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T23:44:48.350

这`BadStatusLine: '' (in httplib.py)`表明这里可能发生了其他事情。当服务器根本没有回复，只是关闭连接时，可能会发生这种情况。

正如您提到的，您正在使用 SSL 连接，这可能对调试特别有趣（`curl -v URL`如果您愿意的话）。如果您发现`curl -2 URL`（强制使用 SSLv2）似乎有效，而`curl -3 URL`(SSLv3) 无效，您可能需要查看 python bugtracker 上的问题[#13636](http://bugs.python.org/issue13636)和可能的[#11220](http://bugs.python.org/issue11220)。根据您的 Python 版本和可能配置错误的网络服务器，这可能会导致问题：SSL 默认值在 v2.7.3 中已更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T20:55:30.593

```
 conn = httplib.HTTPSConnection(host='www.site.com', port=443, cert_file=_certfile)
   params  = urllib.urlencode({'cmd': 'token', 'device_id_st': 'AAAA-BBBB-CCCC',
                                'token_id_st':'DDDD-EEEE_FFFF', 'product_id':'Unit Test',
                                'product_ver':"1.6.3"})
    conn.request("POST", "servlet/datadownload", params)
    content = conn.getresponse().read()
    #print response.status, response.reason
    conn.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T22:36:59.610

服务器可能不喜欢缺少的标头，尤其是用户代理和内容类型。Chrome 图像显示了用于这些的内容。也许尝试添加标题：

```
import httplib, urllib

host = 'www.site.com'
url = '/servlet/datadownload'

values = {
  'val1' : '123',
  'val2' : 'abc',
  'val3' : '1b3',
}

headers = {
    'User-Agent': 'python',
    'Content-Type': 'application/x-www-form-urlencoded',
}

values = urllib.urlencode(values)

conn = httplib.HTTPSConnection(host)
conn.request("POST", url, values, headers)
response = conn.getresponse()

data = response.read()

print 'Response: ', response.status, response.reason
print 'Data:'
print data 
```

这是未经测试的代码，您可能希望通过添加其他标头值来匹配您的屏幕截图来进行试验。希望能帮助到你。

# java - Android图像裁剪正在减小图像的大小

> ID：14385188
> 
> 赞同：8
> 
> 时间：2013-01-17T17:56:17.353
> 
> 标签：java, android, image, android-layout, crop

我需要从 android 手机图库中裁剪一张照片，然后对其进行编辑。照片的原始尺寸为 3264 *2448，在我的尺寸为 1280 * 720 的屏幕上显示为按比例缩小的图像。当我裁剪它时，我得到一个大小为 185 * 139 的图像。

我用于裁剪的代码是

```
 Intent cropIntent = new Intent("com.android.camera.action.CROP");
        cropIntent.setDataAndType(picUri, "image/*");
        cropIntent.putExtra("crop", "true");
        cropIntent.putExtra("return-data", true);
        startActivityForResult(cropIntent, PIC_CROP); 
```

当我在 imageView 中显示裁剪后的图像时，它会显示为小得多的图像。

**我应该裁剪原始大小的图像，而不是缩小的版本。你们中的任何人都可以指导我如何做到这一点吗？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-05T08:38:28.490

请试试这个，我知道为时已晚，但可以帮助某人。

```
private void performCrop() {
try {
    //call the standard crop action intent (the user device may not support it)
    Intent cropIntent = new Intent("com.android.camera.action.CROP");
    //indicate image type and Uri
    cropIntent.setDataAndType(mImageCaptureUri, "image/*");
    //set crop properties
    cropIntent.putExtra("crop", "true");
    //indicate aspect of desired crop
    cropIntent.putExtra("aspectX", 4);
    cropIntent.putExtra("aspectY", 3);
    //indicate output X and Y
    cropIntent.putExtra("outputX", 800);
    cropIntent.putExtra("outputY", 800);

File f = new File(Environment.getExternalStorageDirectory(),
        "/temporary_holder.jpg");
    try {
        f.createNewFile();
    } catch (IOException ex) {
    Log.e("io", ex.getMessage());  
    }

uri = Uri.fromFile(f);

  cropIntent.putExtra(MediaStore.EXTRA_OUTPUT, uri);

    startActivityForResult(cropIntent, PIC_CROP);

} //respond to users whose devices do not support the crop action
catch (ActivityNotFoundException anfe) {
    //display an error message
    String errorMessage = "Your device doesn't support the crop action!";
    Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
    toast.show();
}
} 
```

让你的 onActivityResult 像这样：-

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

     if (requestCode == PIC_CROP) {

              String filePath = Environment.getExternalStorageDirectory()
                    + "/temporary_holder.jpg";

            thumbnail = BitmapFactory.decodeFile(filePath);

                   //thumbnail =    BitmapFactory.decodeFile(filePath);
           //    Log.i("",String.valueOf(thumbnail.getHeight()));

                ImageView image = (ImageView) findViewById(R.id.pestImage);
                image.setImageBitmap(thumbnail);
                }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T06:32:16.653

添加：

```
intent.putExtra(MediaStore.EXTRA_OUTPUT, tempUri); 
```

然后你可以得到一个没有缩小的图像文件。并使用此保存的文件代替：

```
Intent.getExtras().getParcelable("data") 
```

只需忽略返回的位图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T20:42:14.800

首先，您应该知道不能依赖裁剪意图来实现跨设备兼容性。（任何 OEM 都可以用自己的版本替换库存相机/图库应用程序）。除此之外，我认为你遗漏了一些额外的东西，这些东西应该符合你的意图并给你想要的效果。

```
// width & height are your desired width/height for the cropped result
cropIntent.putExtra("outputX", width);
cropIntent.putExtra("outputY", height);
cropIntent.putExtra("aspectX", width);
cropIntent.putExtra("aspectY", height);
cropIntent.putExtra("scaleUpIfNeeded", true); 
```

尝试将这些添加到您的意图中，看看结果如何。

# algorithm - 在 OCaml 的所有三个列表中找到至少一个元素

> ID：14385190
> 
> 赞同：4
> 
> 时间：2013-01-17T17:56:20.070
> 
> 标签：algorithm, functional-programming, ocaml

> 我们有三个包含人名的列表。
> 
> 所有三个列表都按字母顺序排序。
> 
> 现在我们需要找到至少一个出现在所有三个列表中的名称。

* * *

我想的算法是这样的：

> 我从三个列表中得到三个正面。
> 
> 如果三个头彼此不相等，那么我保留最大的一个并从我刚刚丢弃头的列表中获得两个新头。
> 
> 继续上面的过程，直到我找到开头描述的这样一个元素。

**这个算法正确吗？**

* * *

问题是我不确定**如何使用 ocaml 来编写函数**。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T18:08:09.307

这是一个 OCaml 函数，它使用您的算法对两个排序列表进行交集（这确实是解决这个问题的好方法）。

```
let rec intersect l1 l2 = match l1, l2 with
| [], _ | _, [] -> []
| h1 :: t1, h2 :: t2 ->
  if h1 < h2 then intersect t1 l2
  else if h1 = h2 then h1 :: (intersect t1 t2)
  else intersect l1 t2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T18:45:47.453

Thomash 的算法将通过两次调用`intersect`和创建中间列表来完成这项工作，因此效率不高。

你的算法基本上是正确的。额外的一点是，有时你有两个头等于最大值，你应该只放下剩下的头。

这是用 OCaml 编写的修改后的算法：

```
let rec intersect xs ys zs =
    match xs, ys, zs with
    | [], _, _ | _, [], _ | _, _, [] -> None
    | x::xs', y::ys', z::zs' -> 
       if x = y && y = z then Some x
       else 
           let m = max x (max y z) in
           if x = m && y = m then intersect xs ys zs'
           else if x = m && z = m then intersect xs ys' zs
           else if y = m && z = m then intersect xs' ys zs
           else if x = m then intersect xs ys' zs'
           else if y = m then intersect xs' ys zs'
           else intersect xs' ys' zs 
```

# mysql - 如何将选择查询包装成一个别名

> ID：14385191
> 
> 赞同：0
> 
> 时间：2013-01-17T17:56:19.693
> 
> 标签：mysql

我两次使用相同的选择查询。如何将其更改为一个查询或别名？

我的代码：

```
select * 
from 
(
    select store, count(*) as quantity 
    from bbb
    where MONTH(date) = 12
    group by store
) as december
having quantity = (select MAX(maxi) 
                from
                (
                    select store, count(*) as maxi 
                    from bbb 
                    where MONTH(date) = 12
                    group by store) as december 
                ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:03:33.177

如果您想选择一个排名靠前的商店，请使用以下命令：

```
SELECT  store, COUNT(*) AS quantity
FROM    bbb
WHERE   MONTH(datE) = 12
GROUP BY
        store
ORDER BY
        quantity DESC
LIMIT   1 
```

与您的原始查询不同，此查询不会返回可能的关系。

# java - 如何在 Windows“文本模式”中写入文件？- 有什么区别？

> ID：14385205
> 
> 赞同：0
> 
> 时间：2013-01-17T17:57:07.917
> 
> 标签：java, file, text, newline

我试图使用批量插入将 CSV 文件导入 SQL Server。

现在我反复收到一个错误

> 批量加载失败。数据文件中第 1 行第 6 列的列太长。请验证是否正确指定了字段终止符和行终止符。

但是，首先我运行了一些使用正则表达式删除所有不可打印字符并在每行末尾显式放置“\n”的java代码（并将整个数据插入到一个新文件中）。但即使在此之后，导入也会出现上述错误。

但是，我在 Textpad 中打开文件，发现它被保存为“Unix”文件——我只是将其更改为“Windows”文件格式，然后保存了它——然后导入工作！

我想知道的是 Unix 和 Windows 文件格式之间的区别，这样我就可以在我的 java 代码本身中处理这个问题，而不是打开 Unix 文件并以 Windows 文件格式再次保存它。

编辑 -

这是给出上述错误的代码---

```
BULK INSERT GooglePatentsIndividualDec2012.dbo.patent
FROM 'C:\Arvind_gpd\patents\4patents_corrected.csv'
WITH
  (
    DATAFILETYPE = 'char',
    FIELDTERMINATOR = '^',
    ROWTERMINATOR = '\n'
  ); 
```

# css - 将多个背景对齐到页面底部？

> ID：14385208
> 
> 赞同：0
> 
> 时间：2013-01-17T17:57:17.400
> 
> 标签：css

我正在创建一个由印刷设计师设计的网站。背景由两个图像组成：

一个沿 y 轴重复并与页面底部对齐的渐变 一个与页面底部对齐并居中的图像。（圆圈）

演示： ![在此处输入图像描述](../Images/1b703576b171a19cd4e00fdf6ad9c807.png)

圆圈部分很大，上面有大部分页面内容。（约 900 像素乘约 750 像素）。

如果页面太小，我需要添加滚动条。如果页面太大。我需要第一个图像（垂直）和背景颜色（水平）来为我填写该区域。我想使用多个背景，但该站点需要 IE8 支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:00:59.937

为渐变剪下一个 1px 的条带并在身体上水平重复。将附件设置为固定。

剪下圆圈并将其放置为内容容器的背景图像。这可能是一个具有透明度的 png，以允许先前的渐变显示出来。

CSS

```
body {
   background: url('bg.jpg') center bottom repeat-x fixed;
}

.container {
   background: url('circle.png') no-repeat center bottom;
   margin: 0 auto;
   min-height: 750px;
   width: 900px;
} 
```

HTML

```
<body>
 <div class="container">
    content here
 </div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:06:48.530

或者，您可以使用 CSS3 放置渐变并完全避开图像。一些较旧的浏览器不支持它，但它比使用静态渐变图像更灵活一些。

查看这个方便的生成器 - 只需选择颜色和样式，它就会为您提供代码： http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# javascript - 使用 JavaScript 启动 CSS 转换

> ID：14385212
> 
> 赞同：0
> 
> 时间：2013-01-17T17:57:55.603
> 
> 标签：javascript, css, css-transitions

我阅读了 5 个关于如何使用 JavaScript 启动 CSS-Transition 的教程，但它不起作用。我正在使用 Safari。这是我的代码：

```
<html>
<head>
<title>Test</title>
<style type="text/css">
    #test{
        width: 100px;
        height: 100px;
        background-color: aqua;
        transition: width 3s linear;
    }
</style>
<script type="text/javascript">
    function test(){
        document.getElementById('test').style.width = 200+'px';
    }
</script>
    </head>
    <body>
      <div id="test">
      </div>

      <button onclick="test()">Los</button>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:03:54.590

您可能需要使用供应商前缀，Safari 使用 webkit，因此请尝试添加`-webkit-`前缀。

```
<style type="text/css">
    #test{
        width: 100px;
        height: 100px;
        background-color: aqua;
        -webkit-transition: width 3s linear;
        -moz-transition: width 3s linear;
        transition: width 3s linear;
    }
</style> 
```

[**演示**](http://jsfiddle.net/mowglisanu/nWpsT/)

# c# - 如何使表单像在 Paint.NET 上一样显示

> ID：14385213
> 
> 赞同：1
> 
> 时间：2013-01-17T17:58:07.200
> 
> 标签：c#, forms

我试图弄清楚如何让表单像在 Paint.NET 程序上一样显示出来，比如历史、颜色等

![在此处输入图像描述](../Images/9910bdb5b014b1506d223c93c147d883.png)

就像他们在绘画所在的地方淡出一样。有什么办法可以做到这一点？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T18:02:52.037

Winforms`Form`和 WPF / Silverlight`Window`都有一个`Opacity`属性。将其设置为低于 1。

# javascript - 使用 JavaScript 或 jQuery 进行 URL 解析

> ID：14385214
> 
> 赞同：-4
> 
> 时间：2013-01-17T17:58:08.253
> 
> 标签：javascript

我需要一个用 JavaScript 编写的 URL Parser，它的工作原理如下：

假设你有这个 URL`http://www.somedomain.com/a/b/c`

然后该功能`parseURL(n)`将按如下方式工作：

```
var paramA = parseURL(1) // Sets paramA to "a"
var paramB = parseURL(2) // Sets paramB to "b"
var paramC = parseURL(3) // Sets paramC to "c"
var paramD = parseURL(4) // Sets paramD to null (because the path does not ripple down to d) 
```

另请注意，如果我传递此 URL `http://www.somedomain.com/a/b/c/`（请注意，我在 URL 的末尾添加了一个反斜杠），那么该函数仍将以相同的方式工作。

此函数应该适用于任何长度的任何 URL，因此它应该适用于更长的 URL，例如：`http://www.somedomain.com/a/b/c/d/e/`. 对于这个网址。我们可以上升到`parseURL(5)`应该返回“e”，但`parseURL(6)`或`parseURL(7)`都将返回null。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:59:37.850

```
function parseURL(i) {
   var t = document.location.pathname.split('/');
   return i < t.length ? t[i] : null;
} 
```

正如 VisioN 所指出的，为了处理结尾`/`，这个版本会更好：

```
function parseURL(i) {
   var t = document.location.pathname.replace(/\/+$/, "").split('/');
   return i < t.length ? t[i] : null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:20:31.993

这是一个函数，它将接受一个 url 字符串并返回一个数组。它按照您描述的方式进行索引，除了主机名是索引 0 之外。不确定您是否想要它或 dystroy 写了什么将解析您当前的 URL。

所以`parseURL("http://www.somedomain.com/a/b/c/")` 你会得到一个数组

```
urlParts[0] = "www.somedomain.com"
urlParts[1] = "a"
urlParts[2] = "b"
urlParts[3] = "c" 
```

 ````
function parseURL(url){
   //strip off the http://
  if(url.indexOf("http://") != -1){
   url = url.slice(7);
  }

   //split the url into sections
   var urlParts = url.split("/");

   return urlParts;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:00:36.437

您可以使用[URI.js](http://medialize.github.com/URI.js/)（更具体地说是[分段](http://medialize.github.com/URI.js/docs.html#accessors-segment)方法），它是一个非常好的用于 URI 解析的 JavaScript 库。`

# android - 同时使用 GPS 提供者和网络提供者

> ID：14385216
> 
> 赞同：0
> 
> 时间：2013-01-17T17:58:10.423
> 
> 标签：android, networking, gps, provider

在我的应用程序中，我想让用户有可能了解他的本地化...但我想同时实现 GPS 和网络提供程序...因为 GPS 提供程序并不总是可用...我使用模拟器和我不知道我的代码是否有效...

这是我的代码源：（提前致谢）

```
 locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
            LocationListener mlocListener = new MyLocationListener();
            locationManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
           locationManager.requestLocationUpdates( LocationManager.NETWORK_PROVIDER, 0, 0, mlocListener);

            Criteria criteria = new Criteria();
            provider = locationManager.getBestProvider(criteria, false);
            location = locationManager.getLastKnownLocation(provider);

            if(location!=null)
            {
                mylat=location.getLatitude();
                mylong=location.getLongitude();
            } 
```

这是 myLocationlistener 类：

```
public class MyLocationListener implements LocationListener

        {

        @Override

        public void onLocationChanged(Location loc)

        {

            Log.i("location", "lat :"+loc.getLatitude());
            mylat=loc.getLatitude();
            mylong=loc.getLongitude();

            for(int i=0; i<results.size(); i++)
            {

                gare g=results.get(i);

            }

            list.invalidateViews();

        }

        @Override

        public void onProviderDisabled(String provider)

        {

        AlertDialog alertDialog = new AlertDialog.Builder(liste_activity.this).create();
        alertDialog.setTitle("Le GPS est désactivé");
        alertDialog.setMessage(" activez le GPS");
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int which) {

        } }); 
        alertDialog.show();

        }

        @Override

        public void onProviderEnabled(String provider)

        {

        }

        @Override

        public void onStatusChanged(String provider, int status, Bundle extras)

        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:35:08.503

对我来说看上去很好。我通常将我的#requestLocationUpdates() 包装在首先检查可用性的条件中。

```
if (this.mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
    this.mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
}

if (this.mLocationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
    this.mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);
} 
```

# jquery - jQuery 1.9.0 自 1.6.4 以来已弃用、删除和更改的功能列表

> ID：14385221
> 
> 赞同：12
> 
> 时间：2013-01-17T17:58:33.317
> 
> 标签：jquery, deprecated

我们目前正在将应用程序中的 jQuery 从 jQuery 1.6.4 升级到 1.9.0。

我相信我已经在我们的应用程序中修复了大部分更改，但是，我希望能够从功能性 jQuery 更改的半实体列表中确定。

截至目前，我看到的唯一两个主要变化是删除`.live`和`$.browser`功能。

还有一些问题导致我们也将 jquery UI 升级到最新版本。

我们有一个大型应用程序，我们最终获准放弃对 IE 6 的支持，因此正努力使其更接近现代。

我不是在寻找每个版本的完整更改日志，因为更改日志包含很多我并不真正关心的内容。希望这也有助于其他人的升级过程。

我在找什么：*弃用的功能*，*删除的功能*，*重要的功能变化，如旧的`attr`和`prop`*

**自 jQuery 1.6.4 到 1.9.2 以来，弃用、删除的功能和重要的功能变化是什么...**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-17T19:34:58.513

由于此问题可能已关闭，因此 nhahtdh 建议提交答案以便以后编辑和添加信息是有道理的。随意进行更改以添加额外的更改注释，甚至将其增加到最新版本的 jQuery (1.10)

***>= jQuery 1.6.4***

未发现重大变化

***>= jQuery 1.7.1***

未发现重大变化

***>= jQuery 1.7.2***

从文档：`If you’re using jQuery Mobile, please use jQuery 1.7.2 only with jQuery Mobile 1.1\. For previous versions of jQuery Mobile, stay with jQuery core 1.7.1 or earlier.`

***>= jQuery 1.8.0***

需要关注的核心变化：

*   **`animations`**- 核心变化
*   **`CSS Prefixing`**

    *   从jQuery：

        > 当您在 .css() 或 .animate() 中使用 CSS 属性时，我们将为该浏览器使用正确的前缀属性（如果合适）。例如取 .css("user-select", "none"); 在 Chrome/Safari 中，我们将值设置为“-webkit-user-select”，Firefox 将使用“-moz-user-select”，IE10 将使用“-ms-user-select”。

*   **`data`**：

    > .data() 方法有一种未记录且非常不高效的方法来监控在 1.9 中删除的值的设置和获取。这很好地影响了对包含句点的数据名称的解释。从 1.9 开始，对 .data("abc.def") 的调用仅检索名称“abc.def”的数据，而不仅仅是“abc”。请注意，较低级别的 jQuery.data() 方法从不支持事件，因此它没有更改。jQuery Migrate 插件不会恢复这种情况下的旧行为。

*   **`.curCSS`**: 这个对我来说很重要。升级新的 jQuery UI 解决了这个问题，但重要的是要注意，如果不升级，这会破坏各种事情。

    > $.curCSS：这个方法只是从 jQuery 1.3 开始的 jQuery.css() 的别名。尽管它从未成为文档化 API 的一部分，但已知一些外部代码使用它，也许认为它“更有效”。现在它“已经消失了”。</p>

***>= jQuery 1.8.1***

jQuery 注释：`Use jQuery UI 1.8.23 and jQuery Mobile 1.1.1 or later for best compatibility with jQuery core 1.8.1.`

`Don’t use Quirks mode! http://blog.jquery.com/2012/08/30/jquery-1-8-1-released/`

***>= jQuery 1.8.2***

*   偏移量：这可能会影响一个页面，该页面期望偏移量的值已经在特定浏览器中关闭。[http://bugs.jquery.com/ticket/12536](http://bugs.jquery.com/ticket/12536)

> 使 .OFFSET() 在没有 GETBOUNDINGCLIENTRECT 的浏览器上减少错误

***>= jQuery 1.8.3***

未发现重大变化

**>=来自[http://jquery.com/upgrade-guide/1.9/的](http://jquery.com/upgrade-guide/1.9/)***jQuery 1.9.0*****

 ***   `.toggle(function, function, ... ) removed`

    > 这是 .toggle() 的“单击元素以运行指定的函数”签名。它不应与 .toggle() 的“更改元素的可见性”相混淆，后者未被弃用。

*   `jQuery.browser() removed`

*   `.live() removed`

*   `.die() removed`

*   `jQuery.sub() removed`

*   `.add()`更改[http://jquery.com/upgrade-guide/1.9/#add-](http://jquery.com/upgrade-guide/1.9/#add-)

*   `.addBack( selector ) replaces .andSelf()` [http://jquery.com/upgrade-guide/1.9/#addback-selector-replaces-andself-](http://jquery.com/upgrade-guide/1.9/#addback-selector-replaces-andself-)

*   `.after(), .before(), and .replaceWith() with disconnected nodes`

*   `.appendTo, .insertBefore, .insertAfter, and .replaceAll`

*   `AJAX events should be attached to document`

*   `Checkbox/radio state in a .trigger()ed "click" event`

*   `Order of triggered "focus" events`

*   `jQuery(htmlString) versus jQuery(selectorString)`

*   `Events not fired by the .data() method; names with periods`

*   `Ordering of disconnected nodes within a jQuery set`

*   `Loading and running scripts inside HTML content`

*   `.attr() versus .prop()`

*   `$("input").attr("type", newValue) in oldIE`

*   `"hover" pseudo-event`

*   `.selector property on jQuery objects`

*   `jQuery.attr()`

*   `jQuery.ajax returning a JSON result of an empty string`

*   `jQuery.proxy() context`

*   `.data("events")`

*   `Removed properties of the Event object`

*   `Undocumented arguments of API methods`

当我发现更多问题时，我将在稍后审查并添加此内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T18:06:59.450

最新的 jQuery 版本是 1.9.0，这是升级指南文档

[http://jquery.com/upgrade-guide/1.9/](http://jquery.com/upgrade-guide/1.9/)

你可以在这里找到这些：

## jQuery 1.9 中的注释变化

*   `.toggle(function, function, ... )`移除
*   `jQuery.browser()`移除
*   `.live()`移除
*   `.die()`移除
*   `jQuery.sub()`移除
*   `.add()`
*   `.addBack( selector )`替换`.andSelf()`
*   `.after()`, `.before()`, 和`.replaceWith() with disconnected nodes`
*   `.appendTo`, `.insertBefore`,`.insertAfter`和`.replaceAll`
*   AJAX 事件应附加到文档
*   `.trigger()`ed`"click"`事件中的复选框/单选状态
*   `"focus"`触发事件的顺序
*   `jQuery(htmlString)`相对`jQuery(selectorString)`
*   该方法未触发的事件`.data()`；带句号的名字
*   jQuery 集中断开节点的排序
*   在 HTML 内容中加载和运行脚本
*   `.attr()`相对`.prop()`
*   `$("input").attr("type", newValue)`在旧的 IE 中
*   `"hover"`伪事件
*   jQuery 对象上的 .selector 属性
*   `jQuery.attr()`
*   `jQuery.ajax`返回空字符串的 JSON 结果
*   `jQuery.proxy()`语境
*   `.data("events")`
*   移除了 Event 对象的属性
*   API 方法的未记录参数
*   其他未记录的属性和方法**

# windows-phone-7 - 您如何以编程方式检测 windows phone 7/8 设备品牌版本？

> ID：14385224
> 
> 赞同：2
> 
> 时间：2013-01-17T17:58:37.810
> 
> 标签：windows-phone-7, windows-phone-8

我知道如何获取操作系统版本，但我正在寻找可以告诉我设备是什么（品牌、版本等）的东西。示例：诺基亚 Lumia 920 任何靠近它的东西都会有所帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:00:34.460

从[DeviceExtendedProperties](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.info.deviceextendedproperties%28v=vs.105%29.aspx)类，`DeviceManufacturer`和`DeviceName`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:34:56.377

使用 Mango 的[DeviceStatus](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394037%28v=vs.105%29.aspx)类来获取有关设备的信息。

```
MessageBox.Show(DeviceStatus.DeviceManufacturer + " " + DeviceStatus.DeviceName); 
```

# php - 2 种不同的 .htaccess 规则

> ID：14385228
> 
> 赞同：0
> 
> 时间：2013-01-17T17:58:53.513
> 
> 标签：php, .htaccess

我正在尝试为我的网站设置两个不同的`.htaccess`规则，但我仍然找不到正确的解决方案。

我想把所有东西都安排`website.com/almost-everything`好——这对我很有效。此外，我还想添加这条路线：`website.com/car/car_id`- 麻烦来了，我不知道如何设置它。

这是我的尝试：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?skill=$1 [L,QSA]
RewriteRule ^car/(.*)$ ./index.php?id=car&car_id=$1 # the wrong rule - the page with website.com/car/car_id just doesn't display the correct file 
```

你能帮我解决第二条规则吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:10:04.773

逐行重写作品，从上到下。

检查初始条件（文件不存在）后，它会遇到您的第一条规则。

它说，如果 URL 是任何东西，请修改它。它还有两个选项：

*   “QSA”表示追加查询字符串
*   “L”表示这是最后一条规则，所以停止处理

由于这个“L”，它停止了处理，并且在这条规则之后没有任何反应。

要解决这个问题：

*   更改规则的顺序，因为“car/”更具体
*   还将 L 和 QSA 标志添加到“car/”规则中。

所以：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^car/(.*)$ ./index.php?id=car&car_id=$1 [L,QSA]
RewriteRule ^(.*)$ index.php?skill=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:43:51.420

代替

```
 RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?skill=$1 [L,QSA]
    RewriteRule ^car/(.*)$ ./index.php?id=car&car_id=$1 # the wrong rule - the page with website.com/car/car_id just doesn't display the correct file 
```

我会这样做

```
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.+) - [PT,L]   ## passthru + last rule because the file or directory exists. And stop all other rewrites. This will also help your css and images work properly.

RewriteRule ^car/(.*)$  /index\.php?id=car&car_id=$1 [L,QSA]

RewriteRule ^(.*)$  /index\.php?skill=$1 [L,QSA] 
```

Ps 我用空行分隔我的规则，所以很清楚有多少。上面显示了 3 个不同的规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:13:53.460

更好的解决方案是将所有请求重定向到`index.php`，然后解析`$_SERVER['REQUEST_URI']`. 然后，您需要为每个新的未来更改 htaccess。

在 apache 中你可以这样做 >

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /index.php [L] 
```

在 php 中，您可以手动填写您的`$_GET`，所以它看起来像您的旧请求......

```
$f = explode('/', substr($_SERVER['REQUEST_URI'], 1));
switch ($f[0]) {
    case 'car' :
        $_GET['id'] = $f[0];
        $_GET['car_id'] = $f[1];
        break;
    default:
        $_GET['skill'] = $f[0];
}

# your old code, that reads info from $_GET 
```

一个更好的做法是上课，这将照顾网址。

# sql-server - 删除sql中第一个空格之后的所有内容

> ID：14385230
> 
> 赞同：3
> 
> 时间：2013-01-17T17:58:58.033
> 
> 标签：sql-server, tsql

我正在尝试使用更新功能删除第一个白色空格之后的所有内容。我已经绑定了这个，但到目前为止还没有为我工作......这是我的代码：

```
UPDATE MyTable
SET MyField= LEFT(MyField, CHARINDEX('', MyField) - 1)
WHERE CHARINDEX('', MyField) > 0 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T18:01:10.033

这些单引号之间没有空格，因此它与任何内容都不匹配：

```
UPDATE MyTable                        
SET MyField= LEFT(MyField, CHARINDEX(' ', MyField) - 1)
WHERE CHARINDEX(' ', MyField) > 0;    ^-- this should be a space
                 ^-- this should be a space 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/4c22b/2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T14:06:29.593

PostgreSQL：

```
update MyTable set MyField = substring(MyField for (position(' ' in MyField) - 1))
where MyField  like '% %'; 
```

# android - Android BroadcastReceiver，设备重启后自动运行服务

> ID：14385231
> 
> 赞同：35
> 
> 时间：2013-01-17T17:58:59.150
> 
> 标签：android, service, broadcastreceiver, manifest, reboot

您好我正在编写一个应用程序，即当手机重新启动时，服务将自动启动，而不是单击应用程序。

这是我的代码

**BootCompleteReceiver.java**

```
package com.example.newbootservice;

import android.content.BroadcastReceiver;  
import android.content.Context;  
import android.content.Intent;    

public class BootCompleteReceiver extends BroadcastReceiver {   

    @Override  
    public void onReceive(Context context, Intent intent) {  

        Intent service = new Intent(context, MsgPushService.class);  
        context.startService(service);   

    }  

} 
```

**MsgPushService.java**

```
package com.example.newbootservice;

import android.app.Service;  
import android.content.Intent;  
import android.os.IBinder;   
import android.widget.Toast;

public class MsgPushService extends Service {  

    @Override  
    public void onCreate() {  
        super.onCreate();    
    }  

    @Override  
    public int onStartCommand(Intent intent, int flags, int startId) {  

        Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
        return Service.START_STICKY;  
    }  

    @Override
    public void onDestroy() {

        super.onDestroy();
        Toast.makeText(this, "Service Destroy", Toast.LENGTH_LONG).show();
    }

    @Override  
    public IBinder onBind(Intent arg0) {  
        return null;  
    }  
} 
```

**MainActivity.java** （不确定我是否需要这个）

```
package com.example.newbootservice;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        startService(new Intent(getBaseContext(), MsgPushService.class));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

**显现**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.newbootservice"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <service android:name=".MsgPushService"/>

        <receiver android:name=".BootCompleteReceiver">  
            <intent-filter>     
                <action android:name="android.intent.action.BOOT_COMPLETED"/>  
                <category android:name="android.intent.category.DEFAULT" />  
            </intent-filter>  
        </receiver>

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

我希望服务在重启后自动启动，而不是手动启动。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-17T18:13:37.720

首先这样做

1）在你的`<manifest>`元素中：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-17T18:12:56.350

你忘记了权限

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-03-08T10:22:42.563

尽管上述所有答案都是正确的，但是`Android Oreo`它们对后台服务施加了一些限制。

查看[后台执行限制](https://developer.android.com/about/versions/oreo/background.html)以了解有关 Android O 中后台限制的更多信息。

当应用程序在后台时，您不能直接从 BroadCastReceiver 启动服务。

但是，您可以通过调用`startForegroundService()`或使用[JobIntentService](https://developer.android.com/reference/android/support/v4/app/JobIntentService.html)从接收方启动前台服务，因为 JobIntentService没有这样的限制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-24T05:07:29.393

在您的广播接收器类上使用此代码：

```
if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {
   Intent service = new Intent(context, MsgPushService.class);  
    context.startService(service);  
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-24T13:49:54.383

也试试这些权限，它可能对你有帮助。如果你使用的是 HTC 手机，那么这些权限是必需的

```
<action android:name="android.intent.action.BOOT_COMPLETED" />
<category android:name="android.intent.category.DEFAULT" />
<action android:name="android.intent.action.QUICKBOOT_POWERON"/> 
```

# cookies - 使用 JavaFX 的 WebEngine/WebView 设置 cookie

> ID：14385233
> 
> 赞同：43
> 
> 时间：2013-01-17T17:59:00.197
> 
> 标签：cookies, http-headers, javafx-2, javafx, httprequest

我似乎找不到任何方法来使用JavaFX 中的[WebEngine](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html) / [WebView](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)以编程方式设置 cookie。API 没有提供关于如何获取类似 HttpRequest 的对象以修改标头（这是我在应用程序中用于 XML-RPC 的）或任何类型的 cookie 管理器的任何想法。

这个页面上的问题似乎也没有涉及到这个问题 - 有[这个](https://stackoverflow.com/questions/11316444/javafx2-0-webview-not-rendering-the-page)，但它只是在小程序中禁用 cookie 来修复[错误](http://javafx-jira.kenai.com/browse/RT-15676)，我的应用程序在桌面上。

我想我能做到的唯一方法是请求第一页（这需要一个带有 sessionID 的 cookie 才能正确加载），获取“拒绝访问”样式的消息，在设置 cookie 的页面上下文中执行一些 javascript 和然后令人耳目一新。不过，这种解决方案将是一种糟糕的用户体验。

如何使用 WebEngine 设置 cookie？

* * *

**更新：**从上面链接的问题中获取线索，我尝试挖掘一些使用[CookieManager](http://docs.oracle.com/javase/7/docs/api/java/net/CookieManager.html)和相关 API 的示例。[我发现了这段代码](http://www.java2s.com/Code/Java/JDK-6/UsingCookieStore.htm)，然后我尝试将其合并到我的应用程序中，但结果很奇怪；

```
MyCookieStore cookie_store = new MyCookieStore();
CookieManager cookie_manager = new CookieManager(cookie_store, new MyCookiePolicy());
CookieHandler.setDefault(cookie_manager);
WebView wv = new WebView(); 
```

现在假设我们这样做：

```
String url = "http://www.google.com/";
wv.getEngine.go(url); 
```

发出此请求后在 Eclipse 中进行调试显示 cookie 存储映射包含一个 cookie：

```
{http://www.google.com/=[NID=67=XWOQNK5VeRGEIEovNQhKsQZ5-laDaFXkzHci_uEI_UrFFkq_1d6kC-4Xg7SLSB8ZZVDjTUqJC_ot8vaVfX4ZllJ2SHEYaPnXmbq8NZVotgoQ372eU8NCIa_7X7uGl8GS, PREF=ID=6505d5000db18c8c:FF=0:TM=1358526181:LM=1358526181:S=Nzb5yzBzXiKPLk48]} 
```

## 太棒了

WebEngine 只是使用底层注册的 cookie 引擎！但是等等，真的吗？让我们尝试在发出请求之前添加一个 cookie...

```
cookie_store.add(new URL(url).toURI(), new HttpCookie("testCookieKey", "testCookieValue")); 
```

然后我在Wireshark中查看请求...

```
GET / HTTP/1.1
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/535.14 (KHTML, like Gecko) JavaFX/2.2 Safari/535.14
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Cache-Control: no-cache
Pragma: no-cache
Host: www.google.com
Connection: keep-alive 
```

我没有饼干 :(

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-25T10:25:37.657

在 Oracle 的 Vasiliy Baranov 的帮助下，我设法解决了这个问题。瓦西里给我写信：

> `java.net.CookieHandler.getDefault()`尝试在第一次实例化 WebView 之后和调用之前 将 cookie 放入`WebEngine.load`，例如如下：

```
WebView webView = new WebView();
URI uri = URI.create("http://mysite.com");
Map<String, List<String>> headers = new LinkedHashMap<String, List<String>>();
headers.put("Set-Cookie", Arrays.asList("name=value"));
java.net.CookieHandler.getDefault().put(uri, headers);
webView.getEngine().load("http://mysite.com"); 
```

这会将 cookie 永久放入存储中，它应该在每个后续请求中发送出去（假设服务器没有取消设置它）。

Vasiliy 还解释说，`WebView`将安装它自己的实现`CookieHandler`，同时保留放入默认的 cookie。

最后，他提到了一件非常有趣的事情：

> 不要浪费时间尝试使用`java.net.CookieManager`, 和 `java.net.CookieStore`. 它们很可能会导致许多站点出现问题，因为它们实施了错误的标准。

在此之后我尝试使用谷歌搜索，但这似乎不是常识。如果有人能够提供更多详细信息，我将不胜感激。这似乎很奇怪，因为它似乎`CookieStore`并被`CookieManager`许多软件使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-06T10:51:32.367

java.net.CookieManager 的解决方案

Cookie 序列化：

```
 List<HttpCookie> httpCookies = cookieManager.getCookieStore().getCookies();
        Gson gson = new GsonBuilder().create();
        String jsonCookie = gson.toJson(httpCookies); 
```

Cookie 反序列化：

```
Gson gson = new GsonBuilder().create();
List<HttpCookie> httpCookies = new ArrayList<>();
Type type = new TypeToken<List<HttpCookie>>() {}.getType();
httpCookies = gson.fromJson(json, type);   // convert json string to list
for (HttpCookie cookie : httpCookies) {
    cookieManager.getCookieStore().add(URI.create(cookie.getDomain()), cookie);
} 
```

# php - O'reilly 是否犯了一个错误：array_reduce

> ID：14385236
> 
> 赞同：4
> 
> 时间：2013-01-17T17:59:07.600
> 
> 标签：php, array-reduce

我正在从 O'reilly 媒体书籍“Programing PHP”中学习 PHP，我偶然发现了这一点：

```
function add_up ($running_total, $current_value) {
    $running_total += $current_value * $current_value;
    return $running_total;
}
$numbers = array(2, 3, 5, 7);
$total = array_reduce($numbers, 'add_up');
echo $total; 
```

array_reduce() 行进行这些函数调用：

```
add_up(2,3)
add_up(11,5)
add_up(36,7)
// $total is now 87 
```

但是当我计算时我得到 85。我认为它应该这样写：

该`array_reduce( )`行进行这些函数调用：

```
add_up (0,2);
add_up (4,3);
add_up (13,5);
add_up (38,7); 
```

因为可选值 $initial 默认设置为`NULL`.

```
mixed array_reduce ( array $input , callable $function [, mixed $initial = NULL ] ) 
```

有更多知识的人可以向我解释，谁错了，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T18:03:25.500

它已在[勘误表](http://oreilly.com/catalog/progphp/errata/progphp.unconfirmed)中进行了报道（尽管未得到证实）。但是，由于您不是唯一需要注意的人，因此您很可能是正确的。

```
{128}  Section "Reducing an Array";
Reducing An Array - Example of function calls created by array_reduce();

The array reduce() line makes these function calls:

add_up(2,3)
add_up(13,5)
add_up(38,7)

The correct list of calls should be:

add_up(0,2)    // This line is missing in the book
add_up(4,3)    // This line is incorrect in the book
add_up(13,5)
add_up(38,7)

[129]  first example;
the resulting calls of the second example of array_reduce() should be:
add_up(11, 2)
add_up(15, 3)
add_up(24, 5)
add_up(49, 7) 
```

# html - 无法在此 Wordpress 主题中编辑“阅读更多”选项

> ID：14385242
> 
> 赞同：0
> 
> 时间：2013-01-17T17:59:33.293
> 
> 标签：html, css, wordpress

我有这个主题，当我想使用“插入更多标签”添加“阅读更多”选项时，主题会在下面添加一个阅读更多图标。我想要做的：删除“阅读更多”图标并在文本末尾显示“阅读更多”（不在文本下方 - 这很重要）。请检查下面的视觉说明。

在此先感谢您的帮助。我真的很感激。

（ps我对如何编辑html文件知之甚少，如果不知道的话）

视觉指令 --> [http://bit.ly/V8fU8k](http://bit.ly/V8fU8k)

主题 --> [http://bit.ly/13I3x7U](http://bit.ly/13I3x7U)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:45:16.237

```
Please replace in loop.php file in your theme

<?php if (option::get('display_content') == 'Full Content') {  echo get_the_content(''); } else { echo get_the_excerpt(); } ?>

to 

<?php if (option::get('display_content') == 'Full Content') {  echo get_the_content(''); } else { echo get_the_excerpt(); } ?>
<a href="<?php the_permalink() ?>"><?php _e('Read more'); ?></a>

This will help you to put read more near end of the post. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:16:48.963

```
 you can change the Read More option in loop.php file in your theme folder

    Remove this code

    <?php if (option::get('display_readmore') == 'on') { ?><span class="readmore"><a href="<?php the_permalink() ?>"><?php _e('Read more', 'wpzoom'); ?></a></span><?php } ?>

   find

   <?php if (option::get('display_content') == 'Full Content') {  the_content(''); } else { the_excerpt(); } ?>

and add code after this

<a href="<?php the_permalink() ?>"><?php _e('Read more', 'wpzoom'); ?></a> 
```

# android - 向 Surface View 添加按钮并更改 SurfaceView 的大小

> ID：14385243
> 
> 赞同：1
> 
> 时间：2013-01-17T17:59:35.157
> 
> 标签：android, surfaceview

我正在构建一个应用程序以在 android 手机的屏幕上绘图。我通过扩展 SurfaceView 类来使用 Surface View。当我这样做时，我无法在屏幕上添加任何按钮。屏幕变黑，什么也看不见。我已经在网上搜索并尝试了所有可能的方法。我还想更改surfaceView 的大小，通过它我可以只在屏幕的一部分上绘制并将按钮放在其余部分上。有人可以建议我这样做的另一种方法或在这方面帮助一些想法吗？太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:07:07.260

**将按钮添加到表面视图：**

在您的 xml 布局中使用 FrameLayout 将您的 surfaceView 括起来。然后将您的按钮添加到相同的 FrameLayout。确保将它们放置在表面视图下方，以便将它们绘制在其顶部。（将它们捆绑在另一个布局中并将其添加到 FrameLayout 可能是个好主意。）

```
<FrameLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
    <SurfaceView android:id="@+id/surfaceView1" android:layout_width="wrap_content" android:layout_height="wrap_content"></SurfaceView>
    <LinearLayout android:id="@+id/linearLayout1" android:layout_width="wrap_content" android:layout_height="wrap_content">
        <Button android:text="Button" android:id="@+id/button1" android:layout_width="wrap_content" android:layout_height="wrap_content"></Button>
        <Button android:text="Button" android:id="@+id/button2" android:layout_width="wrap_content" android:layout_height="wrap_content"></Button>
    </LinearLayout>
</FrameLayout> 
```

**更改表面视图的大小**

只需要检查您设置的 LaoutParams 类型，使用 FrameLayoutPrams 而不是 LayoutParams。我需要这样设置：

```
 android.widget.FrameLayout.LayoutParams params = new android.widget.FrameLayout.LayoutParams(width, height);
    surface.setLayoutParams(params); 
```

希望能帮到你

# apache-flex - 在 Flash 实例上复制和粘贴

> ID：14385246
> 
> 赞同：1
> 
> 时间：2013-01-17T17:59:38.023
> 
> 标签：apache-flex, copy-paste

我有两个使用 flex 创建的 swf 文件。两个 swf 文件都有一些标签、文本框和复选框。我希望能够通过从 swf 文件 1 复制标签和文本框并将它们粘贴到 swf 文件 2 来修改第二个 swf 文件。我不想在粘贴时松开标签或文本框的格式。

任何帮助/建议将不胜感激。提前致谢。:)

# c# - 在 Web 应用程序中存储用户首选项

> ID：14385247
> 
> 赞同：2
> 
> 时间：2013-01-17T17:59:39.020
> 
> 标签：c#, asp.net, sql

我想知道网站如何经常添加新功能和新首选项而不会弄乱数据库。

我想将这些存储在具有多对多关系和键值对的首选项表中。

有没有更好的办法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T18:22:55.297

您始终可以使用与 asp.net 的登录模块一起提供的 asp.net 用户配置文件属性

在 MSDN 上阅读并查看一些示例：http: [//msdn.microsoft.com/en-us/library/2y3fs9xs.aspx](http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:08:45.063

我建议将部分数据存储在 NoSQL 数据库或 NoSQL 风格的数据结构中——就像你说的那样，键/值对。

我个人的偏好是将主键和外键以及最小标识数据存储在规范化的数据结构中，并将其他属性存储在 NoSQL 数据库或数据结构中。这样，其他属性可以轻松添加和删除，甚至可以从一条记录到另一条记录不同。

# msbuild - 从 msbuild 可靠地找到 mstest.exe

> ID：14385249
> 
> 赞同：3
> 
> 时间：2013-01-17T17:59:48.943
> 
> 标签：msbuild, location, mstest

这里有一些关于这个的问题，但没有一个有效的（对我来说）答案。问题是：

有没有办法从 msbuild 项目中确定 mstest.exe 的位置，而不用硬编码路径或使用 $(VSxxComnTools) 或 $(VSINSTALLDIR) 变量？

后者的原因是，因为这需要在只安装了 VS 测试代理而不是完整的 VS 的构建服务器（非 TFS，但 Bamboo 或 TeamCity）上运行。

附加信息：当然，这也必须在安装了 msbuild、c# 编译器和 mstest 的所有其他机器上工作，因为每个人都应该能够从 github 签出项目，调用 msbuild，一切都应该运行顺利。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T05:00:48.640

你可以使用

```
$(MSBuildProgramFiles32)\Microsoft Visual Studio 11.0\Common7\Ide 
```

这假设您在所有资产上使用相同版本的 sku 即 2012。当然，您可以轻松地在项目本身中创建回退到其他版本。

请参阅[在 msbuild 中使用 32 位“程序文件”目录](https://stackoverflow.com/questions/346175/use-32bit-program-files-directory-in-msbuild)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-15T02:41:56.670

它并不优雅，但是找到安装在主机上的最新 MSTest.exe 的可靠方法是

```
<MSTestPath Condition="'$(MSTestPath)'=='' And Exists('$(MSBuildProgramFiles32)\Microsoft Visual Studio 14.0\Common7\IDE\MSTest.exe')">$(MSBuildProgramFiles32)\Microsoft Visual Studio 14.0\Common7\IDE\MSTest.exe</MSTestPath>
<MSTestPath Condition="'$(MSTestPath)'=='' And Exists('$(MSBuildProgramFiles32)\Microsoft Visual Studio 13.0\Common7\IDE\MSTest.exe')">$(MSBuildProgramFiles32)\Microsoft Visual Studio 13.0\Common7\IDE\MSTest.exe</MSTestPath>
<MSTestPath Condition="'$(MSTestPath)'=='' And Exists('$(MSBuildProgramFiles32)\Microsoft Visual Studio 12.0\Common7\IDE\MSTest.exe')">$(MSBuildProgramFiles32)\Microsoft Visual Studio 12.0\Common7\IDE\MSTest.exe</MSTestPath>
<MSTestPath Condition="'$(MSTestPath)'=='' And Exists('$(MSBuildProgramFiles32)\Microsoft Visual Studio 11.0\Common7\IDE\MSTest.exe')">$(MSBuildProgramFiles32)\Microsoft Visual Studio 11.0\Common7\IDE\MSTest.exe</MSTestPath>
<MSTestPath Condition="'$(MSTestPath)'=='' And Exists('$(MSBuildProgramFiles32)\Microsoft Visual Studio 10.0\Common7\IDE\MSTest.exe')">$(MSBuildProgramFiles32)\Microsoft Visual Studio 10.0\Common7\IDE\MSTest.exe</MSTestPath>
<MSTestPath Condition="'$(MSTestPath)'=='' And Exists('$(MSBuildProgramFiles32)\Microsoft Visual Studio 9.0\Common7\IDE\MSTest.exe')">$(MSBuildProgramFiles32)\Microsoft Visual Studio 9.0\Common7\IDE\MSTest.exe</MSTestPath> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:48:18.480

您可以添加一个指向它的机器环境变量并在 msbuild 中引用它吗？因此，如果您添加了 var MSTEST_HOME，您可以在 msbuild 中使用 $(MSTEST_HOME) 吗？

# java - 如何在 Parcel 中使用 writeStringArray() 和 readStringArray()

> ID：14385253
> 
> 赞同：11
> 
> 时间：2013-01-17T18:00:07.147
> 
> 标签：java, android, marshalling, parcelable, parcel

`Parcel`我最近在 Androids类中遇到了一个非常愚蠢的（至少从我的角度来看）实现。

假设我有一个像这样的简单类

```
class Foo implements Parcelable{

    private String[] bars;
    //other members

    public in describeContents(){ 
        return 0;
    }

    public void writeToParcel(Parcel dest, int flags){

        dest.writeStringArray(bars);
        //parcel others
    }

    private Foo(Parcel source){
        source.readStringArray(bars);
        //unparcel other members
    }

    public static final Parcelable.Creator<Foo> CREATOR = new Parcelable.Creator<Foo>(){

         public Foo createFromParcel(Parcel source){
             return new Foo(source);
         }

         public Foo[] newArray(int size){
             return new Foo[size];
         }

    };
} 
```

现在，如果我想 Parcel 一个`Foo`Object 并且`bars`为 null，我认为无法从这种情况中恢复（当然除了捕获异常）。以下是 Parcel 中这两种方法的实现：

```
 public final void writeStringArray(String[] val) {
        if (val != null) {
            int N = val.length;
            writeInt(N);
            for (int i=0; i<N; i++) {
                writeString(val[i]);
            }
        } else {
            writeInt(-1);
        }
    }

  public final void readStringArray(String[] val) {
        int N = readInt();
        if (N == val.length) {
            for (int i=0; i<N; i++) {
                val[i] = readString();
            }
        } else {
            throw new RuntimeException("bad array lengths");
        }
    } 
```

`bars`因此，如果我通过了哪些为空，则writeStringArray 很好。它只是写入`-1`包裹。但是 readStringArray 方法应该如何使用呢？如果我通过`bars`内部（当然是 null），我会从`val.length`. 如果我`bars`之前创建，就像说`bars = new String[???]`我不知道​​它应该有多大。如果大小与里面写的不匹配，我会收到一个 RuntimeException。

为什么`readStringArray`不知道`-1`哪个结果被写入空对象`writeStringArray`并返回？

我看到的唯一方法是`bars`在调用之前保存大小，`writeStringArray(String[])`这使得这种方法毫无用处。它还将重复保存数组的大小两次（一次让我记住，第二次来自`writeStringArray`）。

有谁知道这两种方法应该如何使用，因为上面没有 java-doc？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-17T18:06:18.423

你应该[`Parcel.createStringArray()`](http://developer.android.com/reference/android/os/Parcel.html#createStringArray%28%29)在你的情况下使用。

我无法想象一个合适的用例，[`Parcel.readStringArray(String[] val)`](http://developer.android.com/reference/android/os/Parcel.html#readStringArray%28java.lang.String%5b%5d%29)但为了使用它，你必须知道数组的确切大小并手动分配它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T18:37:52.103

从（缺乏）文档中并不清楚，但是`readStringArray()`当对象在调用此函数之前已经知道如何创建字符串数组时使用；例如，当它在统计上被实例化或它的大小从另一个先前读取的值中得知时。

您在这里需要的是调用该函数`createStringArray()`。

# javascript - 将列强制为固定宽度；防止自动展开 我通常通过 CSS 设置固定的列宽，结果完美无瑕： #tableID thead tr th:nth-child(1){width: 75px;} #tableID thead tr th:nth-child(2){width: 75px;} /* etc… */ 但是现在我处于一种情况，直到运行时我才知道所需的列宽。这是我用来动态设置列宽的代码的摘录： 问问题 问问题 2013-01-17T18:00:28.137 2626 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我通常通过 CSS 设置固定的列宽，结果完美无瑕： #tableID thead tr th:nth-child(1){width: 75px;} #tableID thead tr th:nth-child(2){width: 75px;} /* etc… */ 但是现在我处于一种情况，直到运行时我才知道所需的列宽。这是我用来动态设置列宽的代码的摘录： var tr=$(""); var colArr=Home.ColDefs[this.statBatchType].colArr; for(var i=0;i<colarr.length;i++){ var="" col="colArr[i];" tr.append(="" $("<th="">") .html(col.title) .css("width",col.width) ); } this.jqTHead.append(tr); 抱歉，这段代码有点脱离上下文，但底线是我将由元素表示的列添加到表头并设置每个列的宽度。 然而，实际发生的是，Firefox 将列宽视为最小值，然后在用户扩展浏览器窗口时自动扩展列宽。考虑我的 JavaScript 代码将每列的宽度设置为 75px 的情况。Firefox 将确保每列至少有 75px 宽，但如果用户最大化（或放大）他的浏览器，只要有足够的空间，每列都会自动加宽。 这对我来说很奇怪，因为 JavaScript 代码似乎与我在 CSS 中所做的功能等效。然而，CSS 方法不会导致这种奇怪的行为。 有什么想法吗？ 从DeviceExtendedProperties类，DeviceManufacturer和DeviceName属性。 javascriptcsshtml-tablewidthmultiple-columns 4 2 回答 2 This answer is useful 1 table-layout: fixed;on the table 正是这样做的：列永远不会扩展以适应其内容，如果您给表格本身一个宽度，则额外的空间将被平均分配。单元格的内容根本不起作用。 于 2013-01-17T18:54:18.447 回答 This answer is useful 1 固定宽度，这将确保表格不会占用可用大小并影响布局。 于 2013-01-17T18:05:41.067 回答 Related 2 java - 带有通配符的java泛型映射 2 jquery - 如何复制{光标：手；光标：指针}在jQuery中 1 redirect - 将所有 HTTP 流量重定向到 localhost 2 php - 如何使用php的push_array给二维数组添加时间戳和值 0 printing - 使用标记和多边形在 Google Map API v3 中打印当前视图 5 python - 删除python列表字典中的最后一个元素 1 java - 如何在 Jlist 中添加两列？ 2 javascript - 仅滚动 div 和 div 溢出问题 2 c# - 拆分 XML 文档，从重复元素创建多个输出文件 1 google-maps - 谷歌地图 - 在 Chrome 21 中放大时不显示图块 - IE9/FF11 OK Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14385256
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, css, html-table, width, multiple-columns

我通常通过 CSS 设置固定的列宽，结果完美无瑕：

```
#tableID thead tr th:nth-child(1){width: 75px;} 
#tableID thead tr th:nth-child(2){width: 75px;}
/* etc… */ 
```

但是现在我处于一种情况，直到运行时我才知道所需的列宽。这是我用来动态设置列宽的代码的摘录：

```
var tr=$("<tr>");
var colArr=Home.ColDefs[this.statBatchType].colArr;
for(var i=0;i<colArr.length;i++){
    var col=colArr[i];
    tr.append(
        $("<th>")
            .html(col.title)
            .css("width",col.width)
    );
}
this.jqTHead.append(tr); 
```

抱歉，这段代码有点脱离上下文，但底线是我将由`<th>`元素表示的列添加到表头并设置每个列的宽度。

然而，实际发生的是，Firefox 将列宽视为最小值，然后在用户扩展浏览器窗口时自动扩展列宽。考虑我的 JavaScript 代码将每列的宽度设置为 75px 的情况。Firefox 将确保每列至少有 75px 宽，但如果用户最大化（或放大）他的浏览器，只要有足够的空间，每列都会自动加宽。

这对我来说很奇怪，因为 JavaScript 代码似乎与我在 CSS 中所做的功能等效。然而，CSS 方法不会导致这种奇怪的行为。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:54:18.447

[`table-layout: fixed;`](http://www.w3.org/TR/CSS21/tables.html#fixed-table-layout)on the table 正是这样做的：列永远不会扩展以适应其内容，如果您给表格本身一个宽度，则额外的空间将被平均分配。单元格的内容根本不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:05:41.067

固定宽度，`<table>`这将确保表格不会占用可用大小并影响布局。</colarr.length;i++){>

# java - Java将匹配项分配给变量

> ID：14385261
> 
> 赞同：0
> 
> 时间：2013-01-17T18:00:43.127
> 
> 标签：java, string

我正在尝试做这样的事情，但我似乎没有工作

`String test = input.matches("[^a-zA-Z\\s]");`

我收到一条错误消息`incompatible types`

有没有办法解决这个或任何其他方法？

***编辑***

这就是我想要实现的目标

可以说我有这个字符串

`String full = " This i$ an aaasdAr yeEeeAs oofo qwdsgy XY9 ";`

我需要输出为`$9`

这行得通，但有点太乱了

```
 for (int index = 0; index <= input.length() - 1; index ++)
            {
                if(String.valueOf(input.charAt(index)).matches("[^a-zA-Z\\s]"))
            {

            System.out.print(String.valueOf(input.charAt(index)));
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T18:02:08.383

方法[matches](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)返回一个布尔值。当您尝试将其分配给 a`String`时，您会收到编译错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:13:49.903

要解决您的特定问题，您可以使用[`String.replaceAll`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)，它需要一个替换正则表达式：

```
String input = " This i$ an aaasdAr yeEeeAs oofo qwdsgy XY9 ";
String output = input.replaceAll("[a-zA-Z\\s]", "");
System.out.println(output); 
```

这会将与正则表达式匹配的所有内容替换为空字符串，并打印`$9`.

# ruby-on-rails - 使用 Paypal api 强制或要求付款类型

> ID：14385267
> 
> 赞同：0
> 
> 时间：2013-01-17T18:01:06.253
> 
> 标签：ruby-on-rails, paypal, activemerchant

如果我只想接受即时付款，是否必须致电 paypal 来设置账单协议？我有一个 Rails 应用程序，我正在使用 paypal express checkout 在沙盒中进行测试。查看 paypal api，我看到有一种方法可以使用 billing_agreement 参数来做我想做的事情，我已经看到在 setup_purchase() 中使用了该参数。我还读到，获得定期付款的计费协议需要致电贝宝。我对定期付款不感兴趣。我的 setup_purchase 方法在下面并且有效，但它仍然允许电子支票。感谢您考虑。

```
setup_response = gateway.setup_purchase(amount, :billing_agreement => {:payment_type => 'InstantOnly'}, :ip => request.remote_ip, :return_url => return_url, :cancel_return_url => polymorphic_url([@parent,@offer]), :items => [{:name => item_name, :quantity => 1, :description => item_description, :amount => amount}]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:27:48.907

是的，您所追求的是[参考交易](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECReferenceTxns)。您需要致电 PayPal 让他们为您启用此功能。如果您只是单独使用定期付款，则无需致电，无论您是否使用它，您都可以访问它。

但是，您想要做的是通过 Express Checkout 运行并完成授权或销售交易。执行此操作时，请确保在您的 SetExpressCheckout 请求中包含计费协议参数。

然后，您可以在以后使用[DoReferenceTransaction](https://www.x.com/developers/paypal/documentation-tools/api/doreferencetransaction-api-operation-nvp)处理付款，而无需再次将整个流程发送给用户。您只需传入您从 Express Checkout 流程中返回的上一个交易 ID 以及您想要收取的新金额。PayPal 使用保存的数据进行处理，无需进一步批准。

# vba - dlookup 汇总值详细报告

> ID：14385268
> 
> 赞同：1
> 
> 时间：2013-01-17T18:01:07.207
> 
> 标签：vba, ms-access

我正在为特定报告的一些聚合而苦苦挣扎。我正在计算员工在某些方面的参与，按部门和员工分组。在部门页脚中，我有 4 个聚合。1 是部门的记录数，1 是为该部门提交记录的不同员工的数量，1 是部门在所有部门提交的记录中所占的百分比。

我需要的是提交记录的员工人数（我有）除以该部门的员工总数。

因此，我制作了一个未绑定的文本框，并尝试计算每个部门的员工人数。但它不起作用。

我将控件设置为

```
 =DCount("[Name]","tblEmployees","[Department =' " & [Department] & "' ") 
```

运行报告时，文本框显示#error。

这是演示分组的报告图片。

![rpt](../Images/d372a7bef13eedcfb508b482afc125c8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:02:42.427

语法看起来不正确，应该是：

```
=DCount("[Name]","tblEmployees","[Department] ='" & [Department] & "'") 
```

您也可以只计算 Completed 或 Name，因为您似乎每行都有一个条目：

```
=Count([Completed]) 
```

因为计数在部门页脚，所以它只计算部门。

# ruby-on-rails-3 - 安装 devise & cancan 后无法删除对象

> ID：14385276
> 
> 赞同：0
> 
> 时间：2013-01-17T18:01:32.620
> 
> 标签：ruby-on-rails-3, devise, cancan

我安装了 Devise 和 Cancan。我的用户具有 super_admin 角色，其选项如下所示：

```
def initialize(user)
  user ||= User.new # guest user
  can :manage, :all
end 
```

除了删除元素外，一切都很好。当我试图删除对象时：

```
<%= link_to 'Destroy', place, :method => :delete, :data => { :confirm => 'Are you sure?' } %> 
```

它不断让我退出并重定向到登录页面

我的课看起来像这样：

```
class PlacesController < ApplicationController
   before_filter :authenticate_user!
   load_and_authorize_resource 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:33:27.840

好的，我想通了。

我的布局文件没有authentity_token 标签

```
<%= csrf_meta_tag %> 
```

所以 POST 和 DELETE 请求无法通过身份验证。

# spring - 简单的spring DI查询

> ID：14385277
> 
> 赞同：0
> 
> 时间：2013-01-17T18:01:35.020
> 
> 标签：spring, dependency-injection

我有 2 个代码块

1

```
Class Employee
{
Address address;
Employee()
{
address=new Address();
} 
```

}

2

```
Class Employee
    {
    Address address;
    Employee(Address address)
    {
    this.address=address;
    }
} 
```

那么，为什么第二个块是松耦合的，而第一个块是紧耦合的，为什么第一块比第二块更难测试和维护。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:06:07.473

第一个块被认为是紧密耦合的，因为 Employee 类`Address`直接创建了一个新实例。第二种被认为是松散耦合的，因为`Address`实例是在`Employee`类之外的某个地方创建的。正如 RonU 评论的那样，使用松散耦合的一个例子是促进使用模拟对象进行测试：

```
Address mockAddress = mock(Address.class);

Employee test = new Employee(mockAddress); 
```

# ios - UIButton - addTarget 不起作用

> ID：14385278
> 
> 赞同：-1
> 
> 时间：2013-01-17T18:01:41.667
> 
> 标签：ios, uibutton

在屏幕右下角添加一个按钮：

```
 UIButton *testBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [testBtn addTarget:self action:@selector(test:) forControlEvents:UIControlEventTouchUpInside];

    CGRect screenRect = [[UIScreen mainScreen] bounds];
    CGFloat screenWidth = screenRect.size.width;
    CGFloat screenHeight = screenRect.size.height;

    testBtn.frame = CGRectMake(screenWidth - 100, screenHeight - 100, 100, 100);

    [self.view addSubview:testBtn]; 
```

我可以看到该按钮，点击它会立即将其变为蓝色。它只是不调用 test: 方法。为什么不？

编辑 - 这是目标方法：

```
- (void)test:(id)sender {
    NSLog(@"hi");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T18:05:17.387

可能是因为您的选择器是测试：而不是测试？此外，您将其称为 lockBtn，但您使用 btn 来引用方法调用……您可能引用了不同的按钮？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T18:06:21.173

1.  您的实例被调用`lockBtn`，但您正在将目标添加到`btn`.
2.  您的方法签名可能是也可能`@selector(test)`不是`@selector(test:)`.

# objective-c - 在前向类对象“CALayer”中找不到属性“框架”

> ID：14385284
> 
> 赞同：1
> 
> 时间：2013-01-17T18:01:50.243
> 
> 标签：objective-c

这是我正在尝试的：

```
 _maskingLayer = [ CALayer layer] 
 _maskingLayer.frame  << shows the error 
```

错误 ：

在前向类对象“CALayer”中找不到属性“框架”

好像我需要导入一些包？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:06:56.820

选择 Project File-->Target-->Build Phases
![在此处输入图像描述](../Images/706bde050b21acee1035531cf78f2b14.png) 然后在你的文件中添加`QuartzCore.framework`
并使用下面的导入

```
#import <QuartzCore/QuartzCore.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:03:57.040

是的，您缺少 QuartzCore 框架的导入：

```
#import <QuartzCore/QuartzCore.h> 
```

# angularjs - 在 ng-repeat (jQuery UI buttonset) 中的编译指令中使用 {{$index}}

> ID：14385285
> 
> 赞同：1
> 
> 时间：2013-01-17T18:01:50.917
> 
> 标签：angularjs

在 ng-repeat 列表中，我很难为列表中的每个项目放置一个 ON/OFF 按钮（使用 JQ UI 包装单选按钮）。

使用单选按钮时，JQ UI 按钮集似乎需要“输入”和“标签”标签，而且标签的“for”必须与输入的“id”匹配。

我可以使用 {{$index}} 使它们独一无二，如下所示：

```
<label for='algoOn{{$index}}'>ON</label>
<input type='radio' [... blah blah ..] id='algoOn{{$index}}'> 
```

问题是在 DOM 准备好后调用 $().buttonset() 。我尝试了各种方法（dom.ready、链接功能等），但不得不在延迟 [ $('.buttonme').buttonset() ] 后调用它来触发页面上的所有按钮。哈基。

但是，我想将开/关按钮包装在指令中。在需要唯一 ID 方面仍然存在同样的问题。（如果您没有唯一的 ID，则在指令的链接功能中每次成功调用按钮都会变得越来越大）

但是...在模板中使用 {{$index}} 给了我一个神秘的语法错误：

```
Syntax error, unrecognized expression: [for=on{{$index}}] <onoffbtn prop="win.runstate" class="ng-isolate-scope ng-scope"> 
```

（即使代码中没有'for=on{{$index}}'！）

该指令是首选方法，但无法弄清楚如何解决这个问题。

其次，在指令中，所有单选按钮在第一次点击后都是同步的，但是当页面第一次加载时，指令中的按钮都是空白的。它不会立即将自己设置为模型。我想在链接函数中做到这一点（例如元素 -> 查找输入 -> 设置值）但是 Angular 已经重写了所有的“名称”和“ID”。

显示这两个问题的 Plunker 在这里： [http ://plnkr.co/edit/DTy8dGsRDVVDnWZBYlqQ](http://plnkr.co/edit/DTy8dGsRDVVDnWZBYlqQ)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:00:08.547

就像你说的，这可以通过指令来实现。使用您的 html，我刚刚添加`buttonset`到包装 div：

```
<div id='A{{$index}}' buttonset>
  <label for='algoOn{{$index}}'>ON</label>
  <input class="buttonme" type='radio' name='onoff{{$index}}' ng-model='win.runstate' ng-name='onoff' value='running' id='algoOn{{$index}}'>
  <label for='algoOff{{$index}}'>OFF</label>
  <input class="buttonme" type='radio' name='onoff{{$index}}' ng-model='win.runstate' ng-name='onoff' value='stopped' id='algoOff{{$index}}'>
</div> 
```

这是`buttonset`指令的外观

```
angular.module('button', [])
.directive('buttonset', function() {
    return function(scope, elm, attrs) {

      $(function(){
                 $(elm).buttonset();
            });      

    };
  }); 
```

这是[plunker](http://plnkr.co/edit/bOeQrxPUU9yDENHlgxw4)，没有更多的黑客:)

**更新：**`dwbuttonset`您遇到的错误与指令在 Angular 编译代码之前执行 的事实有关。因此，您需要做的是等到这一切完成。您可以使用`$timeout`0 值（请参阅此[问题](https://stackoverflow.com/questions/12240639/angularjs-how-can-i-run-a-directive-after-the-dom-has-finished-rendering)）以便将您的方法排队，直到所有内容都已加载。

例子：

```
.directive('dwbuttonset', function($timeout){
  return function(scope, elm, attrs) {
      $timeout(function(){
          $(elm).buttonset();
      });        
}}) 
```

# solr - 如何向 Solr “More Like This” 查询添加公式评分提升？

> ID：14385289
> 
> 赞同：1
> 
> 时间：2013-01-17T18:02:04.687
> 
> 标签：solr

我正在对 3 个文本字段进行“更像这样”的查询，但我还想根据数字“视图”字段来提升结果。在普通查询中，我会添加一个提升术语，例如“{!boost b=scale(sqrt(views),1,2)}”或类似的东西，但是如果我在 mlt 中指定它似乎不起作用.qf 字段。MLT 查询中是否允许基于公式的提升？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:02:47.380

根据 Solr Wiki 上的[More Like This](http://wiki.apache.org/solr/MoreLikeThis)页面，该`mlt.qf`字段允许提升。

> [使用与DisMaxQParserPlugin](http://wiki.apache.org/solr/DisMaxQParserPlugin)中使用的格式相同的格式查询字段及其提升。这些字段也必须在 mlt.fl 中指定。

[查看使用DisMaxQParserPlugin](http://wiki.apache.org/solr/DisMaxQParserPlugin)进行提升的语法，您应该能够获得所需的提升。

另外，请查看上一个问题的答案 - [Is it possible to boost mlt queries in Solr](https://stackoverflow.com/questions/10677872/is-it-possible-to-boost-mlt-queries-in-solr)

# linux - 1 用于获取服务器 IP 地址 (ifconfig) 并将主机名附加到 /etc/hosts 以匹配 ipaddress 的线性脚本

> ID：14385292
> 
> 赞同：0
> 
> 时间：2013-01-17T18:02:14.287
> 
> 标签：linux, sed, awk, hosts

我有以下 /etc/hosts 文件

```
[root@vhost41 tmp]# cat hosts
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
119.13.248.1 ccvcds1.ihost.com vcds1
171.221.160.11 vhost.ihost.com vhost41

[root@vhost41 tmp]# echo $(ifconfig eth0 | grep "inet addr:" | cut -d ":" -f 2 | cut -d " " -f 1)
171.221.160.11 
```

如何使用 sed 或 awk 单行将“AWSHOST”添加到匹配的 ip 行。所以变化将是：

```
[root@vhost41 tmp]# cat hosts
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
119.13.248.1 ccvcds1.ihost.com vcds1
171.221.160.11 vhost.ihost.com vhost41 AWSHOST 
```

我试图将上述命令的输出通过管道传递给 sed 和 awk，但它不起作用。非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:09:05.717

你可以`sed`这样使用：

```
$ cat /etc/hosts
127.0.0.1       localhost
171.1.1.1 myhost

$ sudo sed -i 's/\(171\.1\.1\.1\).*/&\ mynewhost/g' /etc/hosts

$ cat /etc/hosts
127.0.0.1       localhost
171.1.1.1 myhost mynewhost 
```

＆符号`&`将被捕获的表达式替换，例如此处`171.1.1.1 myhost`，然后您将在此处附加转义空格和新主机别名`mynewhost`

**编辑**

正如[David Ravetti](https://stackoverflow.com/users/1971315/david-ravetti)所说，如果您不想原地编辑文件，可以添加要添加到备份文件的扩展名。

`sed -i .bak ......`

`.bak`然后文件将被编辑到位（替换为您的编辑），但原始文件将使用扩展名备份。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T18:11:09.263

```
sed -i "/$(ifconfig eth0 | grep 'inet addr:' | cut -d: -f2 | cut -d' ' -f1)[ \t]/ s/$/ AWHOST/ " hosts 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T01:58:30.067

试试这个

`sed -i "s/\(171.221.160.11\) \(.*\)/\1 \2 MYHOST/g" temp.txt`

这是与`awk`

```
awk '{if ($1 == "171.221.160.11") {b=$1;for(i=1; i<=NF; ++i){$1="";a=a" "$i;}$0 =b" "a" ""MYHOST3" } print}' temp.txt > temp2.txt 
```

我无法决定选择什么`sed`或`awk`，所以现在我总是在两者中都做:)

# javascript - jQuery html() 与保留数据()

> ID：14385298
> 
> 赞同：0
> 
> 时间：2013-01-17T18:02:43.403
> 
> 标签：javascript, jquery

我有一个 html 节点和另一个在结构上与它类似的节点，但差异很小。（两者都是非常复杂的节点）两个节点都有很多`jQuery.data`他们的孩子。一个节点在文档中，另一个只是内存中的一个片段。

我想用片段之一替换 DOM 中节点的内容，**并与片段一起保留**所有内容`jQuery.data`，但它只是使用 html() 丢失了。我怎样才能保留它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:20:00.367

避免使用`.html()`，使用类似的东西**[`.replaceWith()`](http://api.jquery.com/replaceWith/)**。这将移动 DOM 元素，而不是简单地覆盖文本 HTML

# sqlite - 我将 Ubuntu 形式 10 升级到 12.04，现在 sqlite3 不起作用

> ID：14385303
> 
> 赞同：1
> 
> 时间：2013-01-17T18:03:00.807
> 
> 标签：sqlite, ubuntu-12.04

我已经尝试删除和安装它。

我做了

```
 sudo apt-get remove sqlite3 libsqlite3-dev 
```

手动进入文件夹

```
 /usr/lib
    /usr/local/lib
    /lib 
```

并搜索“sqlite3”并删除了所有文件

然后我做了

```
 sudo apt-get install sqlite3 libsqlite3-dev 
```

当我这样做的时候

```
 $sqlite3 
```

在我得到的终端

```
 sqlite3: symbol lookup error: sqlite3: undefined symbol: sqlite3_sourceid 
```

编辑：在 python 中，如果我在解释器中输入 import sqlite 我得到

```
 File "/usr/lib/python2.7/dist-packages/sqlite/__init__.py", line 1, in <module>
    import _sqlite
    ImportError: libsqlite.so.0: cannot open shared object file: No such file or directory 
```

编辑2：我搜索了文件

```
 libsqlite.so.0 
```

并在

```
 /opt/lampp/lib 
```

现在在python解释器中我可以

```
 >>> import sqlite
    >>> sqlite.version
    '1.0.1'
    >>> import sqlite3
    Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
    ImportError: No module named sqlite3 
```

# android - 如何在 Settings.ACTION_SECURITY_SETTINGS 意图中过滤不必要的设置

> ID：14385305
> 
> 赞同：0
> 
> 时间：2013-01-17T18:03:04.130
> 
> 标签：android, networking, location, settings

我正在开发一个使用位置的应用程序。

启动应用程序时，它会验证*无线位置*是否处于活动状态。如果没有，则会出现一个对话框，其中包含一个以 , 开头的按钮`Intent`来`Settings.ACTION_SECURITY_SETTINGS`显示位置设置。

我想为我的用户简化该任务并隐藏可能使他们选择错误设置并再次获得相同对话框的不必要设置。

此应用程序不需要 GPS 精度。在某些情况下，智能手机可能无法找到 GPS 信号，或者跟踪位置可能需要很长时间，从而阻止我的应用程序及时显示结果，从而使“无线网络”成为获取位置的更好选择。

这是我用来测试“无线网络”是否处于活动状态并打开设置的一些代码：

```
private void checkLocationEnabled() {
    String provider = Settings.Secure.getString(getContentResolver(), 
                                     Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
    if (provider == null || !provider.contains("network")) {
        // Wireless location not enabled
        showDialog();           
    }
}

private void showDialog(){
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("No network location. Please, activate this setting in "
                            + "Location And Security")
           .setCancelable(false)
           .setPositiveButton("Settings", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   Intent intent = new Intent(Settings.ACTION_SECURITY_SETTINGS);
                   startActivity(intent);                           
               }
           })
           .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   MainActivity.this.finish();
               }
           });
    Dialog dialog = builder.create();
} 
```

如何过滤`Settings.ACTION_SECURITY_SETTINGS`以仅显示*无线网络*选项并删除*GPS*和其中的所有剩余选项`Intent`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:18:38.250

> 如何过滤“Settings.ACTION_SECURITY_SETTINGS”以仅显示“无线网络”选项并删除 GPS 和该“意图”中的所有剩余选项？

您构建自己的支持此功能的 Android 版本并以 ROM mod 的形式分发它。

否则，你不能。

AFAIK，那个屏幕甚至没有隐藏这些东西的能力，更不用说通过`Intent`额外的东西等将这种能力暴露给第三方了。此外，由于“设置”应用程序有几十个（如果不是数百个）实现（设备制造商非常频繁地更改此应用程序），即使这在少数设备上是可能的，但在其余设备上不太可能实现。

# azure - 无法 RDP 到 Azure VM

> ID：14385307
> 
> 赞同：2
> 
> 时间：2013-01-17T18:03:19.433
> 
> 标签：azure

我无法连接到 Azure 上的 VM。昨天我无法连接到其中任何一个，今天我只能登录一个。

单击门户上的“连接”按钮并下载 RDP 后，它只会挂在“远程桌面连接”对话框中，其中显示“正在配置远程会话”。

我的一个同事也有同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:16:12.027

可能是门户的问题。您可以尝试使用 Visual Studio 连接到 VM（[此处](http://fabriccontroller.net/blog/posts/manage-your-subscriptions-with-the-windows-azure-tools-for-visual-studio/)详细说明）吗？

![在此处输入图像描述](../Images/d10a796f0ab1205facb2445583c727be.png)

![在此处输入图像描述](../Images/920cbbe9f1bfa47bf7491abb348afc74.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:27:30.977

Make sure that port 3389 is opened. For more details you can see [http://nabaruns.blogspot.in/2012/11/common-port-related-troubleshoot-in.html](http://nabaruns.blogspot.in/2012/11/common-port-related-troubleshoot-in.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-10T21:06:53.680

除了确保在 VM 的网络安全组上打开端口 3389 之外，还要确保您的 VM 具有公共 IP。您可以通过查看 VM 刀片的概述来检查这一点。如果您没有看到列出的公共 IP，那么您需要分配一个。

[https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-public-ip-address](https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-public-ip-address)

# jquery - Ajax异步获取和按键功能

> ID：14385314
> 
> 赞同：1
> 
> 时间：2013-01-17T18:03:38.840
> 
> 标签：jquery, ajax, keyboard-events

我需要根据表单文本输入字段上的信息输入来填充选择列表。我弄清楚了 Ajax 部分，但它没有按预期工作。这个想法是当用户在名字字段中输入时，选择列表将填充适当的选项。该函数确实有效，但 var firstname = $("#fn").val(); call 将始终返回比字段中键入的内容少一个字符。任何帮助将不胜感激！

以下是相关的html和代码：

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
$("#fn").keypress(function() {
    var firstname = $("#fn").val();
    $.get("CustomerList", {FirstName: firstname}, function(responseText) {
    $("#div1").text(responseText);
    });
});
    });
</script> 
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Show all names</title>
</head>

<body>
    <form method="GET" action='Controller' name="CreateNTF"   >
    <table>
        <tr>
            <td>Create User:</td>
            <td><input id="fn" type="text" name="FirstName" /></td>
            <td><input id="ln" type="text" name="LastName"/></td>
        </tr>  
        <tr>
            <td>Carrier</td>
            <td>
            <span id="div1"></span>
            </td>
        </tr>
    </table>
    <input type="submit" name="submit" value="Submit" onClick="return validateForm();"/>
    </form>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:47:04.273

尝试使用`keyup`而不是`keypress`. 也许`keypress`触发得太早而无法`.val()`识别文本更改。

另一种解决方案是自己计算最终字符串：

```
$("#fn").keypress(function(e)
{
    var firstname = $("#fn").val() + String.fromCharCode(e.which);
    $.get("CustomerList", {FirstName: firstname}, function(responseText) {
    $("#div1").text(responseText);
    });
}); 
```

但最后，[这家伙](https://stackoverflow.com/questions/3502750/javascript-getting-value-using-key-press-is-always-one-character-behind-the-lat)似乎和你有同样的问题，建议的解决方案也是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:06:12.110

使用 keyup 和 keypress，您将触发每个字符的 AJAX 调用。我认为您可能想要使用 change 事件，当输入框失去焦点时触发 ajax 调用，这是在用户完成输入并从输入框出来之后。这样，您将拥有完整的输入字符串并避免不必要的 ajax 调用。

# html - dom crud 使引导程序中的滚动变慢

> ID：14385323
> 
> 赞同：0
> 
> 时间：2013-01-17T18:03:57.740
> 
> 标签：html, css, dom, twitter-bootstrap

我的脚本遇到问题。当我对 DOM 元素进行一些插入、删除等操作时，滚动会变慢。我只是做一个 ajax 请求，将它们作为 json 获取，然后将它们作为 html 附加到 DOM。

```
$.ajax({
url:"init_response_generator.php",
async:true,
type:"GET",
data:{init:1},
success:function(data)
{
    console.log("success");
    var results=$.parseJSON(data);
    console.log(results[0].symposium[0].e_image_loc);

    if(results.length!=0)
    {
        for(i=0;i<3;i++)
                    {
    symposium ='<div class="thumbnail span3" onclick="show_event(\''+results[0].symposium[i].ev_id+'\');"><img src="'+results[0].symposium[i].e_image_loc+'" height="300" width="300"/><h5>'+results[0].symposium[i].e_title+'</h5></div>';
    workshop ='<div class="thumbnail span3" onclick="show_event(\''+results[1].workshop[i].ev_id+'\');"><img src="'+results[1].workshop[i].e_image_loc+'" height="300" width="300"/><h5>'+results[1].workshop[i].e_title+'</h5></div>';
    guest_lecture ='<div class="thumbnail span3" onclick="show_event(\''+results[2].guest_lecture[i].ev_id+'\');"><img src="'+results[2].guest_lecture[i].e_image_loc+'" height="300" width="300"/><h5>'+results[2].guest_lecture[i].e_title+'</h5></div>'; 
inauguration ='<div class="thumbnail span3" onclick="show_event(\''+results[3].inauguration[i].ev_id+'\');"><img src="'+results[3].inauguration[i].e_image_loc+'" height="300" width="300"/><h5>'+results[3].inauguration[i].e_title+'</h5></div>';     
    $("#symposium_thumbnails").append(symposium);
    $("#inauguration_thumbnails").append(inauguration);
    $("#workshop_thumbnails").append(workshop);
    $("#guestlecture_thumbnails").append(guest_lecture);                        
                    }
        }       
    }       ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:07:40.087

调用 append 的次数越多，代码运行的速度就越慢。

```
var symposium = "", workshop = "", guest_lecture = "", inauguration = "";
for(i=0;i<3;i++) {
    symposium +='<div class="thumbnail span3" onclick="show_event(\''+results[0].symposium[i].ev_id+'\');"><img src="'+results[0].symposium[i].e_image_loc+'" height="300" width="300"/><h5>'+results[0].symposium[i].e_title+'</h5></div>';
    workshop +='<div class="thumbnail span3" onclick="show_event(\''+results[1].workshop[i].ev_id+'\');"><img src="'+results[1].workshop[i].e_image_loc+'" height="300" width="300"/><h5>'+results[1].workshop[i].e_title+'</h5></div>';
    guest_lecture +='<div class="thumbnail span3" onclick="show_event(\''+results[2].guest_lecture[i].ev_id+'\');"><img src="'+results[2].guest_lecture[i].e_image_loc+'" height="300" width="300"/><h5>'+results[2].guest_lecture[i].e_title+'</h5></div>'; 
    inauguration +='<div class="thumbnail span3" onclick="show_event(\''+results[3].inauguration[i].ev_id+'\');"><img src="'+results[3].inauguration[i].e_image_loc+'" height="300" width="300"/><h5>'+results[3].inauguration[i].e_title+'</h5></div>';                             
}
$("#symposium_thumbnails").append(symposium);
$("#inauguration_thumbnails").append(inauguration);
$("#workshop_thumbnails").append(workshop);
$("#guestlecture_thumbnails").append(guest_lecture); 
```

# asp.net - 在 Listview 中访问“th”

> ID：14385325
> 
> 赞同：0
> 
> 时间：2013-01-17T18:04:03.283
> 
> 标签：asp.net

有没有办法在后面的代码中访问“th”。我想根据项目值向标题添加填充。

```
<LayoutTemplate>
        <table runat="server" >
            <tr runat="server">
                <td runat="server">
                    <table ID="itemPlaceholderContainer" runat="server" border="0" class="UserLayoutTbl">
                        <tr runat="server" style="">
                            <th runat="server" width="140" align="left">
                                Date</th>
                            <th runat="server" width="140" align="left">
                                Ref. No.</th>
                            <th runat="server" width="270" align="left">
                                Description</th>
                           <%-- <th runat="server" width="90" align="right" style = '<%# GetAmountLabelStyle() %>'>
                                Amount</th>--%>
                                <th id="Th1" runat="server" width="90" align="right">
                                Amount</th>
                        </tr>
                        <tr ID="itemPlaceholder" runat="server">
                        </tr>
                    </table>
                </td>
            </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:58:45.560

首先，为要更改的元素指定一个 ID。在 ListView 的 DataBind 之后，您可以使用 ListView 的 FindControl 方法通过控件的 ID 访问控件。然后，您可以将返回的控件转换为 HtmlTableCell 以正确处理它：

```
// thDate is the <th> ID
HtmlTableCell thDate = lstItems.FindControl("thDate") as HtmlTableCell; 
```

# jquery - 使用 jquery ajax 显示数据而不重新加载页面

> ID：14385328
> 
> 赞同：1
> 
> 时间：2013-01-17T18:04:17.537
> 
> 标签：jquery, ajax

我找到了一个 ajax 表单脚本来显示数据而无需重新加载页面。一切都很好，但我想在提交表单时在表格中显示变量值。这是我找到[Jquery ajax 教程](http://www.php4every1.com/tutorials/jquery-ajax-tutorial/)的链接，下面是我的代码。请帮我。

索引.php

```
<div id="wrapper">
  <form action="" id="demoForm" method="post">
    <fieldset>
      <legend>Demo form</legend>
      <span style="font-size: 0.9em;">This ajax submit demo form.</span>
      <p>
        <label for="email">E-Mail:</label>
        <input type="text" name="email" id="email" value="" />
      </p>
      <p>
        <input type="submit" name="submit" id="submit" style="float: right; clear: both; margin-right: 3px;" value="Submit" />
      </p>
    </fieldset>
  </form>

  <div id="message" style="display: none;"> </div>
  <div id="waiting" style="display: none;"> Please wait<br />
    <img src="images/ajax-loader.gif" title="Loader" alt="Loader" /> 
  </div>

</div>
<script type="text/javascript" src="js/jquery/jquery-1.3.2.js"></script> 
<script type="text/javascript" src="js/ajaxSubmit.js"></script> 
```

ajaxSubmit.php

```
$(document).ready(function(){
    $('#submit').click(function() {

        $('#waiting').show(500);
        //$('#demoForm').hide(0);
        $('#message').hide(0);

        $.ajax({
            type : 'POST',
            url : 'post.php',
            dataType : 'json',
            data: {
                email : $('#email').val()
            },
            success : function(data){
                $('#waiting').hide(500);
                $('#message').removeClass().addClass((data.error === true) ? 'error' : 'success')
                    .text(data.msg).show(500);
                if (data.error === true)
                    $('#demoForm').show(500);
            },
            error : function(XMLHttpRequest, textStatus, errorThrown) {
                $('#waiting').hide(500);
                $('#message').removeClass().addClass('error')
                    .text('There was an error.').show(500);
                $('#demoForm').show(500);
            }
        });

        return false;
    });
}); 
```

post.php

```
<?php
sleep(3);

if (empty($_POST['email'])) {
    $return['error'] = true;
    $return['msg'] = 'You did not enter you email.';
}
else {
    $return['error'] = false;
    $return['msg'] = 'You\'ve entered: ' . $_POST['email'] . '.';
}

echo json_encode($return);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:18:14.373

试试这个：

```
success : function(data){
    data = JSON.parse(data);
    $('#waiting').hide(500);
    $('#message').removeClass().addClass((data.error === true) ? 'error' : 'success')
        .text(data[0].msg).show(500);
    if (data[0].error === true)
        $('#demoForm').show(500);
}, 
```

# java - Ivy 依赖版本的调用者优先级

> ID：14385331
> 
> 赞同：0
> 
> 时间：2013-01-17T18:04:38.400
> 
> 标签：java, dependencies, ivy, dependency-management

> **可能重复：**
> [一种使用 Ivy 控制上游依赖项的依赖项范围的方法？](https://stackoverflow.com/questions/6627100/a-way-to-control-dependencies-ranges-for-upstream-dependencies-using-ivy)

我的常春藤存储库包含：

*   `libAbc`版本 2.4 和 2.5 – 无依赖关系
*   `libXyz`版本 1.0 – 取决于`libAbc`版本`[2.2, )`

我的应用程序使用这些库，并具有以下 Ivy 依赖项：

```
 <dependency name="libAbc" rev="2.4" />
    <dependency name="libXyz" rev="1.0" /> 
```

我还不想升级到新版本`libAbc`，因为有一些重大更改，我没有时间调整我的代码。

但是存储库中新版本的存在足以在我的 Ivy 解析中获得 2.5。2.4 被驱逐，因为两者都匹配`libAbc`.

我尝试过使用`<dependency name="libAbc" rev="[2.4, 2.4]" />`，但这仍然被 2.5 淘汰。

在不从存储库中删除 2.5 的情况下，如何确保解决 2.4 版本？是否可以优先于顶级 Ivy 文件中的设置优先于依赖项的 Ivy 文件中的设置，两者兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:13:45.840

`dependency`在called上有一个属性`force`。[从此页面](http://ant.apache.org/ivy/history/2.2.0/ivyfile/dependency.html)的“属性”部分：

```
a boolean to give an indication to conflict manager that this dependency should be forced to this revision (see conflicts manager) 
```

以下强制依赖：

```
<dependency name="libAbc" rev="2.4" force="true" /> 
```

# excel - Excel VBA - 如何确定数据透视表中的行标签字段数？

> ID：14385344
> 
> 赞同：4
> 
> 时间：2013-01-17T18:05:41.080
> 
> 标签：excel, excel-2010, pivot-table, vba

我有一个 Excel 2010 数据透视表，最初包含 3 个行标签字段。

我需要创建一个宏，将某个字段添加为数据透视表中的最低行标签字段。（由于我不会进入的原因，用户不能自己以正常方式添加此字段。）

但是，当用户运行此宏时，他们可能已经添加或删除了一些行标签。

当我在数据透视表的最低位置添加一个字段时，宏记录器给了我这个（已经选择了 3 个行标签）：

```
With ActiveSheet.PivotTables("MyPivotTable").PivotFields("MyNewField")
    .Orientation = xlRowField
    .Position = 4
End With 
```

如果用户添加或删除了某些项目，则此位置编号 4 不正确。我如何将正确的位置编号传递给我的代码？

试图瞄准高使用`Position = 99`会给我以下错误：

> 无法设置 PivotField 类的 Position 属性

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T20:06:16.327

`PivotFields`有一个计数属性。

```
With ActiveSheet.PivotTables("MyPivotTable").PivotFields("MyNewField")
    .Orientation = xlRowField
    .Position = ActiveSheet.PivotTables("MyPivotTable").PivotFields.Count + 1
End With 
```

此外，代替`PivotFields`，您可以替换其他选择来为您提供其他计数：

*   列字段
*   数据字段
*   隐藏字段
*   页面字段
*   行字段
*   可见字段

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T18:34:12.257

尝试完全丢弃`.Position = 4`字符串，即：

```
With ActiveSheet.PivotTables("MyPivotTable").PivotFields("MyNewField")
    .Orientation = xlRowField
End With 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T18:36:34.403

蛮力解决方案：

```
Public Function GetPivotFieldPos(pt As PivotTable, fieldName As String)
    Dim cnt As Integer
    Dim pos As Integer
    Dim pf As PivotField

    On Error GoTo ErrHandler

    cnt = 0   '  might be 1-based!?
    pos = -1
    For Each pf In pt.PivotFields
        cnt = cnt + 1
        If pf.Name = fieldName Then
            pos = cnt
            Exit For
        End If
    Next

    GetPivotFieldPos = pos
    Exit Function

ErrHandler:
    GetPivotFieldPos = -1
    On Error GoTo 0
End Function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T19:23:11.123

如果手头的任务是计算数据透视表中可能存在的行字段的数量，您应该喜欢这行代码：

```
pt.RowRange.cells.count 
```

这将给出枢轴行的计数。但是，这将计算标题行和总行（如果总计应用于数据透视表）。因此，您需要根据您的情况减去 1 或 2。

[可以在此处找到有关如何引用可枢转范围的出色描述。](http://peltiertech.com/WordPress/referencing-pivot-table-ranges-in-vba/)

# jquery - 使用 Jquery/Ajax 在开始日期/时间更新 DIV

> ID：14385347
> 
> 赞同：1
> 
> 时间：2013-01-17T18:05:54.260
> 
> 标签：jquery, ajax

您好我想弄清楚当使用 ajax 达到指定的日期时间（从数据库中提取）时如何更新 div。

因此，假设用户在计划时间开始时等待视频按计划播放，div 得到更新并播放视频

我正在使用的日期时间的格式是

```
%Y-%m-%d %H:%M:%S 
```

谢谢你的任何建议

*干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:10:27.517

如何在 javascript onPageLoad 中启动计时器并在指定时间进行 ajax 调用。

如果这是用户可以设置的时间，则在设置时将此时间保存在 db 中，在每次页面加载时加载该时间。

解释如何执行 jQuery Timed 事件的链接。 [jQuery 定时事件](https://stackoverflow.com/questions/2208626/jquery-timed-event)

# css - 覆盖 CSS 中的类

> ID：14385349
> 
> 赞同：2
> 
> 时间：2013-01-17T18:06:03.883
> 
> 标签：css, web

与此相关的问题已经很多。但我仍然不清楚。也不确定问题的标题是否正确。这是我的问题：

下面的 CSS 代码是什么意思？

```
#nav li { /*some cssA*/ }
#nav li.over { /*some cssB*/ }
#nav li a { /*some cssC*/ }
#nav li a:hover { /*some cssD*/ }
#nav li ul a span { /*some cssE*/ } 
```

根据我的理解，如果我错了，请纠正我：

**第 1 行：**`li` id="nav" 的任何元素中的每个元素都将具有样式`cssA`

**第 2 行：**当我将光标放在`li`id="nav" 的任何元素中的每个元素上时，都会有样式`cssB`

**第 3 行：** id="nav" 的任何元素中的每个`a`元素中的每个元素都将具有样式`li``cssC`

**第 4 行：**当我将每个元素悬停在 id="nav" 的任何元素`a`中的每个元素中时，都会有样式`li``cssD`

**第 5 行：**每个id="nav" 的元素`span`中的每个`a`元素中的每个元素中的每个`ul`元素中的每个`li`元素都将具有样式`cssE`。除非父元素具有 id="nav `ul`"`a`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:07:47.863

除了.over，“。”之外，您在所有方面都是正确的。代表一个类。“#”代表ID。但是，是的，你已经理解了这个概念。

此外，如果你想像标题所说的那样“覆盖”，你会添加

```
!important 
```

到您想要优先于其他规则的任何规则的末尾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T18:13:22.423

您可以通过提供 !important 来覆盖 CSS，也可以提供内联样式。内联 css 的优先级高于外部 css

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:25:20.470

所有现有的答案都是正确的，但比已经给出的要多一些。

正如已经说过的，“li.over”是一个组合选择器——它将选择也具有“over”类的 li 元素。如果您想在鼠标悬停（悬停）元素时使用不同的 CSS 属性或属性值，则使用**伪类**选择器“li:hover”。这些被称为伪类，因为您不是选择文档的一部分，而是基于元素的*状态*。还有一些**伪元素**也不是直接在文档中，而是文档结构的逻辑扩展 - 例如第一个孩子、第一个类型、第五个类型、奇数项等。

“#nav li ul a span”是一个后代选择器，正如您所说，它将选择每个父级的子元素（在任何级别），因此“#nav li”选择包含在具有 ID 的项目中的“li”元素“ nav" - 甚至下降了几个级别。

如果要选择作为父项的**直接子**项的项目，则可以使用“>”符号。即“#nav > li”将选择直接位于 ID 为“nav”的任何项目下方的 li 元素，但不会选择作为该元素的子元素的任何 li 元素，或者实际上是低于该元素的元素。

顺便说一句，“#nav”完全等同于“*#nav”，因为它选择任何具有 ID 的元素，如果您只想选择具有 ID 的 ul 元素，也可以编写“ul#nav”。这又可以与一个类“ul#nav.bar”或什至多个类“ul#nav.bar.touch”相结合。

像这样删除选择器之间的空格将它们组合在一起，因此在最后一种情况下，不是在“ul”元素内的 ID 为“nav”的项目内查找具有类“bar”的项目内具有类“touch”的项目，您正在选择一个 ID 为“nav”的“ul”元素以及两个类“bar”和 touch“。像这样的元素 -

```
<ul class="bar touch" id="nav">...</ul> 
```

也可以使用属性选择器，因此如果您想选择将在新窗口中打开的链接，您可以使用“a[target=_blank]” - 它根据属性和值的存在进行选择 - 或如果您想选择具有**任何**href 值的链接，您可以使用“a[href]”。这只是选择具有此属性的所有元素。

最重要的是，您甚至可以选择与另一个元素相邻（旁边）的项目，如果您想选择直接在图像之后的所有段落，那么您可以在选择器中使用“img + p”，或者“p + img”如果您想直接在段落之后选择图像。与往常一样，选择器中的最后一项是应用样式的项。

通常认为不要对 CSS 选择器过于具体是一种很好的做法，因为它会使您的代码的可重用性大大降低。除非您需要编写“div.widget”，否则只需编写“.widget”，否则您将无法使用其他元素创建“widget”，并且以后在这些情况下覆盖这些属性变得更加困难你可能需要。

总结一下选择器，[MDN](https://developer.mozilla.org/en-US/docs/CSS/Getting_Started/Selectors)上有一个很好的 CSS 选择器介绍，[Code School（付费课程提供者）](http://www.codeschool.com/courses/css-cross-country)也有一个优秀的 CSS 在线基础课程，价格非常合理，将详细介绍选择器。

关于覆盖类，您应该进一步了解两个概念 - 级联顺序和特异性。

给定一个 HTML 片段——

```
<div class="widget">
  <p>
    Some text you want to style
  </p>
</div> 
```

以及下面的 CSS-

```
#widget p { color: yellow; }
p { color: blue; } 
```

文本的颜色将是黄色而不是蓝色，因为第一个选择器的特异性比第二个更大（更具体）。为了理解这一点，我建议你玩一下[特异性计算器](http://specificity.keegan.st/)，并阅读[Smashing Magazine](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)关于该主题的教程。

简而言之，内联样式胜过一切，选择器越具体，它就越有可能被应用来代替其他应用不同属性值的选择器。具有最高特异性得分的选择器中的值“获胜”，但来自具有较低特异性的选择器中**不发生冲突**的其他属性值也仍将应用于元素。

例如，改变我们之前的 CSS-

```
#widget p { color: yellow; }
p { 
     color: blue;
     font-weight: bold;
  } 
```

文本仍然是黄色的，但也会*是*粗体，因为在选择器中没有给出具有更高特异性的字体粗细属性。

您应该理解的最后一个概念是当两个或多个规则具有相同的特异性时会发生什么。

```
#widget p { color: yellow; }
#widget p { 
     color: blue;
     font-weight: bold;
  } 
```

在这种情况下，我们的文本现在是蓝色的，因为第二个规则**稍后出现在样式表中**，因此覆盖了第一个。如果您有多个样式表，则最后一个样式表中出现在文档头部的规则将覆盖具有相同特性的规则。

在几乎所有情况下，您都应该在样式表中使用更具体的选择器或选择器的顺序，以便将正确的样式应用于正确的元素，并且**绝对不**应该常规使用 !important 标志来实现这一点，除非绝对必要。请参阅[http://james.padolsey.com/usability/dont-use-important/](http://james.padolsey.com/usability/dont-use-important/)以获得比我在这里给出的更完整的解释，但它很快变得无法维护（当一切都“重要”时你会做什么）而且它也不是可供希望在其用户代理样式表（浏览器本地）中覆盖您的样式的用户访问，以帮助他们阅读或使用页面（增加字体大小、与背景颜色对比等）

# entity-framework - ObjectContext 和 ObjectSet 是否提供优于 DbContext 和 DbSet 的优势？

> ID：14385353
> 
> 赞同：3
> 
> 时间：2013-01-17T18:06:32.877
> 
> 标签：entity-framework, objectset, dbset

我目前正在最终确定将使用实体框架作为其 ORM 的新应用程序的架构。`DbSet`但是，对于我应该使用默认选项（和`DbContext`）还是使用“棘手”选项（`ObjectSet`和） ，我有点困惑`ObjectContext`？后一个类是否比默认类具有优势？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T19:30:11.767

关于这个主题有几篇文章详细介绍了您的问题，我相信您会发现有帮助：

[在 DbContext 上，它是否严格优于 ObjectContext？](https://stackoverflow.com/questions/10475306/on-dbcontext-is-it-strictly-better-than-objectcontext)

[实体框架 4.1 objectContext vs dbContext](https://stackoverflow.com/questions/5376368/entity-framework-4-1-objectcontext-vs-dbcontext)

[ObjectContext 与 DbContext](https://stackoverflow.com/questions/9176967/objectcontext-vs-dbcontext)

[Entity Framework 中 DBContext 和 Object 上下文的区别](https://stackoverflow.com/questions/12531270/difference-between-dbcontext-and-object-context-in-entity-framework)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-28T14:21:47.063

只是总结。*DbContext*是*ObjectContext*的包装器。如果需要，还可以通过*DbContext*访问*ObjectContext*。*ObjectContext*随 EF4 提供，*DbContext*随 EF4.1 提供。基本上这两种情况几乎相同。*DbContext*简化了许多事情。此外， *DbContext*不包含像*ObjectContext*这样的数百个属性- 它更加清晰和紧凑。

# php - 形成多项选择选项

> ID：14385355
> 
> 赞同：0
> 
> 时间：2013-01-17T18:06:36.673
> 
> 标签：php, arrays, forms

我已尽力尝试解决这个问题，对于某些人来说这可能是非常基本的，我已经搜索了解决方案......我希望这是一个直接的填写/电子邮件（我知道该怎么做电子邮件部分） - 除非它必须是数据库驱动的？

基本上，我有一个 10 题测验，多项选择 ABCD - 但 ABC 可能是正确的。

我的 html 是（分解）

```
<input type="checkbox" name="question1[]" id="question1" value="A" />
<label for="question1">A) Do you like this </label> 

<input type="checkbox" name="question1[]" id="question1" value="B" />
<label for="question1">A) Do you like this as well </label>

<input type="checkbox" name="question1[]" id="question1" value="C" />
<label for="question1">A) Do you like this as well well </label>

<input type="checkbox" name="question1[]" id="question1" value="D" />
<label for="question1">A) Do you like this as well well well </label> 
```

所以，这个“帖子”通过另一个 php 文件，我可以通过数组来显示哪个答案已被勾选-

```
 $myresults = $_POST['question1'];
    if(empty($myresults))
    {
    echo("You didn't answer in this section.");
    }
    else{
    $N = count($myresults);
    echo "<strong>Section 1:</strong> You selected $N answers: ";
    for($i=0; $i < $N; $i++)
    {
    echo($myresults[$i] . " ");
    }
    } 
```

所以，很抱歉胡扯——基本上，我只想说 ABC 是正确的——D 是不正确的，分数加 1。

我想我需要创建一个像这样的“if”语句？

```
 if (($myresults == 'A') && ($myresults == 'B') && (myresults == 'C'))
    {
    echo "something might have worked!";
    $mycount++;
    } 
```

我想我今天已经很接近了，但是当我尝试各种修复时，我无法回到原来的位置:(

但我真的不确定如何做到这一点。

非常感谢您的帮助

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:12:25.367

您可以将答案组合在一起并以这种方式进行检查。

```
sort($myresults);

$answers = implode($myresults);

if($answers == 'ABC'){
    echo 'Correct answers!';
    $mycount++;
} 
```

或者您可以检查您自己的数组。

```
sort($myresults);

if($myresults == array('A','B','C')){
    echo 'Correct answers!';
    $mycount++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:18:34.577

是的！嗨，安迪，您可以使用 in_array 来检查此功能是否包含选项... [http://php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php) 尝试使用此功能。Marcus Recck 也写了一个很好的解决方案。

有许多函数可以使用，比如 array_diff 来提取未选择的选项。

# javascript - CompositeView 中的多个 Marionette CollectionView

> ID：14385356
> 
> 赞同：2
> 
> 时间：2013-01-17T18:06:39.283
> 
> 标签：javascript, marionette, backbone-views

我想用 Backbone.Marionette 创建一个视图，它呈现一个模型，然后维护 2 个或更多 CollectionViews。基本上是一个具有多个 CollectionView 的 CompositeView - 我是使用 Marionette 的新手，关于这里的最佳方法有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T12:51:33.570

您可以使用布局来保存和管理您的 2 个集合视图。主布局将呈现自己的模型和模板，创建 2 个子视图（collectionView 或 CompositeView）。

```
 AppLayout = Backbone.Marionette.Layout.extend({
  template: "#layout-template",

  regions: {
    collection1: "#collection1",
    collection2: "#collection2"
  }
});

var layout = new AppLayout();
layout.collection1.show(new collection1()); 
layout.collection2.show(new collection2()); 
```

# string - 反转字符数组

> ID：14385358
> 
> 赞同：0
> 
> 时间：2013-01-17T18:06:40.737
> 
> 标签：string, reverse

```
public class Reverse {
    public static void main(String[] args) {
        char name[]="prakash".toCharArray();////initialisng array

        ////////swapping string order//////////////
        //////////i.e. reversing array of characters//////////

        for(int i=0;i<=(name.length)/2;i++)
        {
            int j=name.length-i;
            char temp;
            temp=name[i];
            name[i]=name[j];
            name[j]=temp;
        }
    }
} 
```

我收到以下错误：`java.lang.ArrayIndexOutOfBoundsException`。代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:11:04.253

数组索引从零开始：“第一个”元素位于 0，“最后一个”元素位于`length-1`.

因此，如果`j`要从最后一个元素往下走，应该是

```
int j=name.length-1-i; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:20:11.513

尝试

```
for (int i = 0; i <= (name.Length-1) / 2; i++)
        {
            int j = (name.Length-1) - i;
            char temp;
            temp = name[i];
            name[i] = name[j];
            name[j] = temp;

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:10:59.267

你在哪里

```
 int j=name.length-i; 
```

你应该有

```
 int j=name.length-i-1; 
```

因为数组从零开始，并且在 position 没有条目`name.length`。

# ember.js - 如何避免 ember 路由器进入 connectOutlets

> ID：14385362
> 
> 赞同：1
> 
> 时间：2013-01-17T18:06:53.737
> 
> 标签：ember.js, ember-old-router

我正在尝试使用 Ember 添加一些基本身份验证层，以避免未登录的用户访问“受限”状态。

问题是我正在检查“进入”事件中的身份验证状态，但即使我从那里重定向到另一条路线，也总是会调用“connectOutlets”。

有没有办法停止从“进入”状态进入“connectOutlets”状态？将身份验证检查置于“connectOutlets”状态感觉有点脏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:13:28.637

> 有没有办法停止从“进入”状态进入“connectOutlets”状态？将身份验证检查置于“connectOutlets”状态感觉有点脏

AFAIK 没有一种简单的方法可以做到这一点。已经尝试过一些变通方法，但我不建议您的用例。

> 我正在尝试使用 Ember 添加一些基本身份验证层，以避免未登录的用户访问“受限”状态。

Ember 并没有真正的“受限”状态。将“状态”视为“用户要求的内容”，而不一定是他们将被授予访问权限的内容。因此，用户可以随时更改 url 并进入任何“状态”，但您的应用在每个状态下的行为将根据模型数据而改变。控制器根据用户的授权级别和 API 返回的数据来决定显示的内容。

到目前为止，最简单的方法是将应用程序模板包装在授权检查中。例如：

```
{{#if isAuthorized}}
  <h1>Welcome!<h1>
  {{outlet}}
{{else}}
  {{#if isLoggedIn}}
    <p>Sorry, you are not authorized to view this page</p>
  {{else}}
    {{view App.LoginForm }}
  {{/if}}
{{/if}} 
```

然后只需向您的应用程序控制器添加`isAuthorized`和`isLoggedIn`计算属性。

# python - 如何删除外部文件中的换行符？

> ID：14385363
> 
> 赞同：1
> 
> 时间：2013-01-17T18:06:55.207
> 
> 标签：python

在我试图替换的文本文件中，我试图删除一个额外的换行符，即。转变

```
test="
123" 
```

到

```
test="123" 
```

我目前拥有的是：

```
f = open("file.txt")
o = open("newfile.txt","w")
while 1:
  line = f.readline()
  if not line: break
  line = line.replace('test="\r','test="')
  o.write(line)
o.close() 
```

问题是它返回

```
 test="123" 
```

<"> 和 <123> 之间有一个**不可见的字符**。有没有更好的替代我目前正在做的事情？我对 python 不是很精通；谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:25:54.863

您的代码有一些缺陷：

*   f 最后没有关闭
*   你只替换`\r`，忽略`\n`windows - 这是你的“隐形”字符我认为（windows在文本文件，linux和Mac`\r\n`中用作换行符）`\n``\r`

这是另一个版本（可能接近您想要的版本；））：

```
with file("file.txt", "r") as f:
    with file("newfile.txt", "w") as o:
        o.write("".join(s.replace("\r", "").replace("\n","") 
                for s in f.readlines())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:41:21.420

最好的方法（在我看来）是启用[Universal Newline Support](http://docs.python.org/2/glossary.html#term-universal-newlines)。然后，这将使您的代码适用于在任何操作系统（Windows、Mac 或 Linux）上创建的文件。

为此，您在读取和写入文件时添加“U”规范。在您的示例中：

```
with open("file.txt", "rU") as f:
    with open("newfile.txt","w") as o: 
        for line in f.readlines():
            o.write(line.replace("\n", "")) 
```

这要求 Python 是使用通用换行支持构建的，这是默认设置。

# javascript - bxslider 不会停止

> ID：14385367
> 
> 赞同：0
> 
> 时间：2013-01-17T18:06:59.423
> 
> 标签：javascript, jquery, bxslider, jquery-waypoints

我遇到了一个问题，当我单击导航菜单上的链接时，滑块不会停止自动播放。我通过以下方式启动滑块：

```
$('.bxslider1').bxSlider({auto: true,autoControls: true}); 
```

它会自动播放和工作，但是如果我尝试通过创建 onclick 函数或 .click() jQuery 来停止滑块，例如：

```
$(".nav-portfolio").click(function() {
  slider = $('.bxslider1').bxSlider();
  slider.stopAuto();
}); 
```

它似乎在一瞬间做某事，然后重新开始。我需要停止滑块的原因是，我使用 jQuery 航路点作为锚链接以平滑水平滚动，并且面板开始向后移动 1 或 2 个像素，这对用户来说真的很烦人。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:20:31.057

尝试将您的代码修改为：

```
$(".nav-portfolio").click(function() {
  $('.bxslider1').stopAuto();
}); 
```

您之前使用的是 bxSlider 网页中的示例，假设您尚未初始化 bxSlider。由于您之前对其进行了初始化，因此第二次初始化可能没有得到妥善处理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-06T09:45:45.427

尝试在声明`var`之前添加关键字。`slider`

```
$(".nav-portfolio").click(function() {
   var slider = $('.bxslider1').bxSlider();
   slider.stopAuto();
}); 
```

# python - 文件python中数字的平均值

> ID：14385369
> 
> 赞同：0
> 
> 时间：2013-01-17T18:07:04.103
> 
> 标签：python, file, csv, average

我希望能够在 python 中打开一个文件说“numbers.txt”，该文件应该包含用逗号分隔的数字。例如

```
1,2
6,4,7
4,5,6 
```

我想编写一个函数来计算每一行的平均值，然后返回一个包含每个平均值的列表：

例如对于上面的数字，函数将返回：[1.5,5.67,5]

```
def line_averages(filename):
    f = open(filename, "r")
    lines = f.readlines()
    f.close
    for line in lines:
       b = line.split(",") 
```

到目前为止，这是我的代码，但我不知道如何更进一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:11:01.057

使用[CSV 阅读器](http://docs.python.org/2/library/csv.html)输入数据，然后在找到输入后，计算平均值并根据需要输出。我只会展示第一部分，以及一些会打印出这些行的代码，我会让你从那里弄清楚如何做到这一点。此代码适用于 python 2.x，只有打印内容应更改以将其转换为 python 3.x。

```
import csv
filename='blah.csv'
with open(filename, 'rb') as csvfile:
     spamreader = csv.reader(csvfile)
     for row in spamreader:
          for value in row:
             print value 
```

编辑：查看了您拥有的内容后，您可以进行以下更改：

```
def line_averages(filename):
    f = open(filename, "r")
    lines = f.readlines()
    f.close()
    for line in lines:
        b = line.split(",")
        for value in b:
            print value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:18:20.633

你有一个好的开始，但还没有完成。（在我看来）读取文件每行的更简单方法是：

```
def line_averages(fileName):
    line_avgs = []
    with open(fileName, 'r') as my_file:
        for line in my_file: # this will read the file line by line
            numbers = line.split(',')
            total = 0
            for num in numbers:
                total += int(num)
            my_avg = total / float(len(numbers)) # it must be a float so it returns a float
            line_avgs.append(my_avg)
    my_file.close()
    return line_avgs 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T18:38:59.857

我猜您缺少的是将字符串转换为整数的方法。之后你只需要总结一个鸿沟，希望它有所帮助。

```
def line_averages(filename):
    averages = []
    with open(filename) as f:
        for line in f.readlines():
            numbers = [int(x) for x in line.split(',')]
            averages.append(sum(numbers) / float(len(numbers)))
    return averages 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T19:17:16.050

可能这个会很难理解；但它会给你更多的洞察力......
文本文件：

```
1,2
6,4,7
4,5,6
4,9,9,9 
```

每行平均数:::

```
In [177]: from __future__ import division

In [178]: f=open('test.txt',"r")

In [179]: [reduce(lambda x,y:(float(x)+float(y)), a.split(','))/len(a.split(',')) for a in f.readlines()]
Out[179]: [1.5, 5.666666666666667, 5.0, 7.75]

In [180]: f.close() 
```

# java - NetBeans 中的 fx:jar 在哪里？-JavaFX

> ID：14385370
> 
> 赞同：0
> 
> 时间：2013-01-17T18:07:06.610
> 
> 标签：java, netbeans, deployment, jar, javafx-2

我正在使用 NetBeans 7.2.1 开发一个独立的 JavaFX 应用程序并且遇到[Autoproxy Configuration](https://blogs.oracle.com/talkingjavadeployment/entry/packaging_improvements_in_jdk_7#4)问题。

在 JavaFX 文档中，我发现了这一点：[13.3.5 Disabling the Autoproxy Configuration in the Code](http://docs.oracle.com/javafx/2/deployment/troubleshooting.htm)。它说“如果您需要在应用程序中禁用自动代理配置，请在 fx:jar 中指定一个 JavaFX-Feature-Proxy 清单条目，并将 None 作为值”。但是我在 NetBeans 的 ant 脚本中的任何地方都找不到 fx:jar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:44:06.143

NetBeans 将 JavaFX 相关的 ant 任务存储在`nbproject/jfx-impl.xml`

虽然这个文件是自动生成的，如果你想修改 jar 生成，你需要从头开始编写新目标`build.xml`

`jfx-impl.xml`更新：由 NetBeans 7.2 创建的引用

```
// fx:jar
var jar = project.createTask("fx_jar");
jar.setProject(project);
var destfile = project.getProperty("pp_jar_destfile");
jar.setDestfile(destfile); 
```

这是一个通过脚本访问的 ant 任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:44:42.897

我现在的解决方法是创建一个 .bat 文件。至少在 Windows 上它可以完成这项工作。

.bat 文件包含以下命令：

```
 start javaw -Djavafx.autoproxy.disable=true -jar myapp.jar 
```

此命令在不打开提示窗口的情况下运行应用程序。

# javascript - 使用 javascript sdk 获取公共页面提要

> ID：14385375
> 
> 赞同：0
> 
> 时间：2013-01-17T18:07:13.153
> 
> 标签：javascript, facebook-graph-api, facebook-javascript-sdk

我正在尝试使用 javascript sdk 创建一个自定义的“LikeBox”样式小部件，但似乎我需要一个访问令牌来获取提要数据。由于所有代码都在客户端，我真的不希望每个人都可以看到页面访问令牌。处理这个问题的最佳方法是什么？

这是我正在执行的引发错误的 javascript api 调用：

```
FB.api('/[page]/feed', function(data) { console.log(data); }); 
```

错误： `error: Object code: 104 message: "An access token is required to request this resource." type: "OAuthException"`

这是解决方案： http: [//tutorialzine.com/2011/03/custom-facebook-wall-jquery-graph/](http://tutorialzine.com/2011/03/custom-facebook-wall-jquery-graph/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:22:41.400

这是我采用的解决方案：

[http://tutorialzine.com/2011/03/custom-facebook-wall-jquery-graph/](http://tutorialzine.com/2011/03/custom-facebook-wall-jquery-graph/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:25:49.467

页面发布需要任何有效的 access_token 或用户 access_token 来请求信息。看到您在所有客户端都这样做，我认为不可能隐藏信息（即 access_token）。

您的插件应该包含一些服务器端身份验证来处理这个问题。

[https://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)

# validation - 如何验证 primefaces 树

> ID：14385376
> 
> 赞同：10
> 
> 时间：2013-01-17T18:07:17.527
> 
> 标签：validation, jsf-2, primefaces, treeview

看起来 primefaces*不是*`<p:tree>`EditableValueHolder ，尽管它提供了使树可选择的能力。对我来说，这似乎是它的定义，因为它既*包含值（选择的节点列表）*又*是可编辑的（您可以更改选择）*。在使树可选择的过程中，它基本上把它变成了一个 selectOneXxx/selectManyXxx。这就是我使用这个小部件的方式。但是，不是 EditableValueHolder，我不能直接将验证器附加到它。我可以使用 an 向表单提交操作添加验证，但是它超出了适当的生命周期阶段，并且更难以获得*`EditableValueHolder`**`actionListener``UITree`组件来检查 i18n 消息等属性是否验证失败。以前有没有人处理过这个问题？你做什么工作？***

 *****- - - - - 编辑 - - - - -**

我在 primefaces 错误跟踪器中发现了一个似乎相关的问题：

> > [http://code.google.com/p/primefaces/issues/detail?id=4137](http://code.google.com/p/primefaces/issues/detail?id=4137)

还有一个论坛帖子：

> > [http://forum.primefaces.org/viewtopic.php?f=3&t=22340](http://forum.primefaces.org/viewtopic.php?f=3&t=22340)

**- - - - - 编辑 - - - - -**

这是我想出的解决方案。一些 jQuery 非常复杂，因为它使用服务器端 el 来生成客户端 javascript。但在大多数情况下，它是有效的。只需要弄清楚为什么一个空数组会跳过验证......但那是另一个故事。

```
<h:panelGroup id="pnpCois" styleClass="pnp-input-group pnp-cois">
  <h:outputLabel for="inputCois"
    value="#{i18n['communities-of-interest']}" />
  <p:tree id="inputCois"
    value="#{subscriptions.selected.coiTreeRootNode}" var="node"
    selectionMode="checkbox"
    selection="#{subscriptions.selected.selectedCoiNodes}">
    <p:ajax event="select" process="@this :#{component.clientId}_validator" update="@this"
      onstart="$('##{component.clientId}_validator'.replace(':','\\:')).val($('##{component.clientId}_selection'.replace(':','\\:')).val());" />
    <p:ajax event="unselect" process="@this :#{component.clientId}_validator" update="@this"
      onstart="$('##{component.clientId}_validator'.replace(':','\\:')).val($('##{component.clientId}_selection'.replace(':','\\:')).val());" />
    <p:treeNode>
      <h:outputText value="#{node}" />
    </p:treeNode>
  </p:tree>
  <h:inputHidden id="inputCois_validator">
    <f:converter converterId="asias.stringCsvToArray" /> 
    <f:validator validatorId="asias.atLeastOneSelected" />
    <f:attribute name="atLeastOneSelectedMessage"
      value="#{i18n['at-least-one-coi-must-be-selected']}" />
  </h:inputHidden>
</h:panelGroup> 
```

**- - - - - 编辑 - - - - -**

在通过 BalusC 提出一些建议后，我想我会放弃`<p:tree>`并找到另一种方法...... :(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T19:13:21.410

您可以使用所需的隐藏输入字段来欺骗它，该字段的值会在节点单击时更改。您可以使用小部件变量的`selections`属性`<p:tree>`将可用选择作为数组获取。

例如

```
<h:form id="form">
    <p:tree widgetVar="tree" 
        onNodeClick="$('#form\\:treeSelections').val(tree.selections.length != 0 ? 'ok' : '')">
        ...
    </p:tree>
    <h:inputHidden id="treeSelections" required="true" 
        requiredMessage="Please select at least one tree node" />
    <p:message for="treeSelections" />
</h:form> 
```

该`'ok'`值纯粹是任意的。关键是隐藏字段被填充，因此`required`验证器不会被触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:15:31.287

请耐心等待，这是一个很长的答案...

由于 primefaces 树*不是*一个`EditableValueHolder`，它*无法*在 JSF 生命周期的标准流程验证阶段进行验证（没有一些重大的黑客攻击）。并且尽我所能，我无法*修补*primefaces 树代码以使其成为一个`EditableValueHolder`（树不会根据所选值呈现，而是根据*支持*树的节点的状态）。鉴于这些限制，唯一的解决方案是创建我自己的树组件（我没有时间）、使用不同的组件（最适合的树）或在调用应用程序阶段进行验证。

我选择了第 3 种解决方案，并在这样做的过程中尝试使其尽可能类似于常规验证。主要思想是，使用`actionListener`首先触发的（在任何其他`actionListener`s 或主要操作（保存表单）之前）来处理验证。如果验证失败，我将有关失败的信息添加到自定义属性中的组件中，`facesContext.validationFailed()`这样我就可以跳过该操作，然后添加一个`preRenderView`系统事件侦听器以在渲染响应阶段之前根据其验证状态修改组件。这样做的方式允许您仍然使用自定义组件而不是使用自定义组件以相同的方式指定验证`<f:validator>`. 这里是代码：

网页.xml：

```
...
  <context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/somenamespace.taglib.xml</param-value>
  </context-param>
... 
```

somenamespace.taglib.xml：

```
<facelet-taglib version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd">

  <namespace>http://ns.my.com/ui/extensions</namespace>

  <tag>
    <description><![CDATA[
            Add an actionListener validator to a component
        ]]></description>
    <tag-name>actionListenerValidator</tag-name>
    <handler-class>com.my.ns.actionlistenervalidator.ActionListenerValidatorHandler</handler-class>
    <attribute>
      <description><![CDATA[
                The validatorId.
            ]]></description>
      <name>validatorId</name>
      <type>java.lang.String</type>
    </attribute>
    <attribute>
      <description><![CDATA[
                A ValueExpression that evaluates to an instance of Validator.
            ]]></description>
      <name>binding</name>
      <type>javax.el.ValueExpression</type>
    </attribute>
    <attribute>
      <description><![CDATA[
                The styleClass added to the end of the component style class when a validation error occurs
            ]]></description>
      <name>errorStyleClass</name>
      <type>java.lang.String</type>
    </attribute>
  </tag>
</facelet-taglib> 
```

ActionListenerHandler.java:

```
package com.my.ns.actionlistenervalidator;

import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.faces.component.UIComponent;
import javax.faces.view.facelets.FaceletContext;
import javax.faces.view.facelets.TagAttribute;
import javax.faces.view.facelets.TagAttributes;
import javax.faces.view.facelets.TagConfig;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.sun.faces.facelets.tag.TagHandlerImpl;

public class ActionListenerValidatorHandler extends TagHandlerImpl {
    private static Logger logger = LoggerFactory.getLogger( ActionListenerValidatorHandler.class );

    public static enum AttributeKeys {
        errorStyleClass("hack.jsf.actionlistenervalidator.errorStyleClass"),
        messages("hack.jsf.actionlistenervalidator.messages"),
        valid("hack.jsf.actionlistenervalidator.valid"),
        validators("hack.jsf.actionlistenervalidator.validators");

        private String key;

        private AttributeKeys( String key ) {
            this.key = key;
        }

        public String getKey() {
            return key;
        }
    }

    public ActionListenerValidatorHandler( TagConfig config ) {
        super( config );
    }

    @Override
    public void apply( FaceletContext ctx, UIComponent parent ) throws IOException {
        ActionListenerValidatorWrapper validator = new ActionListenerValidatorWrapper( ctx.getFacesContext(),
                tagAttributesToMap( ctx, this.tag.getAttributes() ) );

        logger.trace( "adding actionListener validator {} to {}", validator, parent );

        @SuppressWarnings( "unchecked" )
        List<ActionListenerValidatorWrapper> validators = (List<ActionListenerValidatorWrapper>) parent.getAttributes().get( AttributeKeys.validators.getKey() );
        if ( validators == null ) {
            validators = new ArrayList<ActionListenerValidatorWrapper>();
            parent.getAttributes().put( AttributeKeys.validators.getKey(), validators );
        }
        validators.add( validator );
    }

    private Map<String, Object> tagAttributesToMap( FaceletContext ctx, TagAttributes tagAttributes ) {
        Map<String, Object> map = new HashMap<String, Object>();
        for ( TagAttribute attribute : tagAttributes.getAll() ) {
            map.put( attribute.getLocalName(), attribute.getValue( ctx ) );
        }
        return map;
    }
} 
```

ActionListenerValidatorWrapper.java：

```
package com.my.ns.actionlistenervalidator;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.Map;

import javax.el.ELContext;
import javax.el.ExpressionFactory;
import javax.el.ValueExpression;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.validator.Validator;
import javax.faces.validator.ValidatorException;
import javax.faces.view.facelets.FaceletException;

import com.sun.faces.el.ELUtils;

public class ActionListenerValidatorWrapper {
    private Validator validator;
    private String errorStyleClass;

    public ActionListenerValidatorWrapper( FacesContext context, Map<String, Object> attributes ) {
        String binding = (String) attributes.get( "binding" );
        String validatorId = (String) attributes.get( "validatorId" );
        if ( binding != null ) {
            ExpressionFactory factory = context.getApplication().getExpressionFactory();
            ELContext elContext = context.getELContext();
            ValueExpression valueExpression = factory.createValueExpression(
                    elContext, binding, String.class );
            this.validator = (Validator) ELUtils.evaluateValueExpression( valueExpression, context.getELContext() );
        }
        else if ( validatorId != null ) {
            this.validator = context.getApplication().createValidator( validatorId );
            this.errorStyleClass = (String) attributes.get( "errorStyleClass" );

            // inject all attributes
            for ( Method method : validator.getClass().getMethods() ) {
                String methodName = method.getName();
                Class<?>[] types = method.getParameterTypes();
                if ( methodName.startsWith( "set" ) && types.length == 1 ) {
                    String property = Character.toLowerCase( methodName.charAt( 3 ) ) + methodName.substring( 4 );
                    if ( attributes.containsKey( property ) ) {
                        // convert value type
                        Object value = null;
                        if ( types[0] == Integer.TYPE ) {
                            value = intValue( context, attributes.get( property ) );
                        }
                        else {
                            value = attributes.get( property );
                        }

                        // call setter
                        try {
                            method.invoke( validator, value );
                        }
                        catch ( IllegalArgumentException e ) {
                            throw new FaceletException( e );
                        }
                        catch ( IllegalAccessException e ) {
                            throw new FaceletException( e );
                        }
                        catch ( InvocationTargetException e ) {
                            throw new FaceletException( e );
                        }
                    }
                }
            }
        }
        else {
            throw new FaceletException( "ActionListenerValidator requires either validatorId or binding" );
        }
    }

    @Override
    public boolean equals( Object otherObj ) {
        if ( !(otherObj instanceof ActionListenerValidatorWrapper) ) {
            return false;
        }
        ActionListenerValidatorWrapper other = (ActionListenerValidatorWrapper) otherObj;
        return (this.getValidator().equals( other.getValidator() ))
                && (this.getErrorStyleClass().equals( other.getErrorStyleClass() ));

    }

    public String getErrorStyleClass() {
        return errorStyleClass;
    }

    public Validator getValidator() {
        return validator;
    }

    @Override
    public int hashCode() {
        int hashCode = (getValidator().hashCode()
                + getErrorStyleClass().hashCode());
        return (hashCode);
    }

    private Integer intValue( FacesContext context, Object value ) {
        ExpressionFactory factory = context.getApplication().getExpressionFactory();
        ELContext elContext = context.getELContext();
        ValueExpression valueExpression = factory.createValueExpression(
                elContext, value.toString(), String.class );
        if ( !valueExpression.isLiteralText() ) {
            return ((Number) ELUtils.evaluateValueExpression( valueExpression, elContext )).intValue();
        }
        else {
            return Integer.valueOf( valueExpression.getExpressionString() );
        }
    }

    @Override
    public String toString() {
        return validator.getClass().getName();
    }

    public void validate( FacesContext context, UIComponent component, Object value ) throws ValidatorException {
        validator.validate( context, component, value );
    }
} 
```

ActionListenerValidatorManager.java:

```
package com.my.ns.actionlistenervalidator;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.TreeSet;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.ViewScoped;
import javax.faces.component.EditableValueHolder;
import javax.faces.component.UIComponent;
import javax.faces.component.UIViewRoot;
import javax.faces.component.visit.VisitCallback;
import javax.faces.component.visit.VisitContext;
import javax.faces.component.visit.VisitResult;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
import javax.faces.event.ComponentSystemEvent;
import javax.faces.validator.ValidatorException;

import com.my.ns.controller.MyBean;
import com.my.ns.actionlistenervalidator.ActionListenerValidatorHandler.AttributeKeys;
import org.primefaces.component.tree.Tree;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@ManagedBean
@ViewScoped
public class ActionListenerValidatorManager implements Serializable {
    private static final long serialVersionUID = -696487579396819893L;
    private static Logger logger = LoggerFactory.getLogger( ActionListenerValidatorManager.class );

    @ManagedProperty( "#{myBean}" )
    private MyBean myBean;

    private void addValidationToComponent( Map<String, Object> attributes, Collection<FacesMessage> facesMessages, Set<String> errorStyleClasses ) {
        attributes.put( AttributeKeys.valid.getKey(), false );
        attributes.put( AttributeKeys.messages.getKey(), facesMessages );

        StringBuilder builder = new StringBuilder();
        if ( errorStyleClasses != null ) {
            for ( String styleClass : errorStyleClasses ) {
                builder.append( styleClass );
            }
            attributes.put( AttributeKeys.errorStyleClass.getKey(), builder.toString() );
        }
    }

    public void applyValidationStateToComponentTreeBecausePrimefacesDidntMakeTreeAnEditableValueHolder( ComponentSystemEvent event ) {
        applyValidationStateToComponentTree( FacesContext.getCurrentInstance() );
    }

    private void applyValidationStateToComponentTree( FacesContext context ) {
        UIViewRoot viewRoot = context.getViewRoot();
        logger.trace( "pre render view for {}", viewRoot );

        viewRoot.visitTree( VisitContext.createVisitContext( context ),
                new VisitCallback() {
                    @Override
                    public VisitResult visit( VisitContext context, UIComponent component ) {
                        Map<String, Object> attributes = component.getAttributes();
                        if ( attributes.containsKey( AttributeKeys.valid.getKey() ) &&
                                !((Boolean) attributes.get( AttributeKeys.valid.getKey() )) ) {
                            // validation state
                            if ( component instanceof EditableValueHolder ) {
                                ((EditableValueHolder) component).setValid( false );
                            }

                            // validation messages
                            FacesContext facesContext = context.getFacesContext();
                            @SuppressWarnings( "unchecked" )
                            List<FacesMessage> messages = (List<FacesMessage>) attributes.get( AttributeKeys.messages.getKey() );
                            if ( messages != null ) {
                                for ( FacesMessage message : messages ) {
                                    facesContext.addMessage( component.getClientId(), message );
                                }
                            }

                            // style class
                            String errorStyleClass = (String) attributes.get( AttributeKeys.errorStyleClass.getKey() );
                            if ( errorStyleClass != null ) {
                                String styleClass = (String) attributes.get( "styleClass" );
                                styleClass = styleClass == null ? errorStyleClass : styleClass + " " + errorStyleClass;
                                attributes.put( "styleClass", styleClass );
                            }
                        }
                        return VisitResult.ACCEPT;
                    }
                } );
    }

    private void clearValidationFromTree( FacesContext context, UIComponent component ) {
        component.visitTree( VisitContext.createVisitContext( context ),
                new VisitCallback() {
                    @Override
                    public VisitResult visit( VisitContext context, UIComponent target ) {
                        clearValidationFromComponent( target.getAttributes() );
                        return VisitResult.ACCEPT;
                    }
                } );
    }

    private void clearValidationFromComponent( Map<String, Object> attributes ) {
        if ( attributes.containsKey( AttributeKeys.validators.getKey() ) ) {
            String errorStyleClass = (String) attributes.get( AttributeKeys.errorStyleClass.getKey() );
            if ( errorStyleClass != null ) {
                String styleClass = (String) attributes.get( "styleClass" );
                styleClass = styleClass.replace( errorStyleClass, "" );
                attributes.put( "styleClass", styleClass );
            }

            attributes.remove( AttributeKeys.valid.getKey() );
            attributes.remove( AttributeKeys.messages.getKey() );
            attributes.remove( AttributeKeys.errorStyleClass.getKey() );
        }
    }

    private Object getValue( FacesContext facesContext, UIComponent component ) {
        Object value = null;
        if ( component instanceof EditableValueHolder ) {
            value = ((EditableValueHolder) component).getValue();
        }
        else if ( component instanceof Tree ) {
            value = myBean.getSelectedIds();
        }

        return value;
    }

    public void setMyBean( MyBean myBean ) {
        this.myBean = myBean;
    }

    private void validate( FacesContext context ) {
        logger.trace( "entering validation" );
        final List<String> validationFailed = new ArrayList<String>();

        UIViewRoot viewRoot = context.getViewRoot();
        viewRoot.visitTree( VisitContext.createVisitContext( context ),
                new VisitCallback() {
                    @Override
                    public VisitResult visit( VisitContext context, UIComponent component ) {
                        if ( !component.isRendered() ) {
                            // remove all validation from subtree as validation
                            // is not performed unless the component is
                            // rendered.
                            clearValidationFromTree( context.getFacesContext(), component );
                            return VisitResult.REJECT;
                        }

                        Map<String, Object> attributes = component.getAttributes();
                        if ( attributes.containsKey( AttributeKeys.validators.getKey() ) ) {
                            Object value = getValue( context.getFacesContext(), component );

                            boolean valid = true;
                            Collection<FacesMessage> facesMessages = null;
                            Set<String> errorStyleClasses = null;

                            @SuppressWarnings( "unchecked" )
                            List<ActionListenerValidatorWrapper> validators =
                                    (List<ActionListenerValidatorWrapper>) attributes.get( AttributeKeys.validators.getKey() );
                            for ( ActionListenerValidatorWrapper validator : validators ) {
                                try {
                                    validator.validate( context.getFacesContext(), component, value );
                                }
                                catch ( ValidatorException validatorException ) {
                                    valid = false;
                                    Collection<FacesMessage> innerMessages = validatorException.getFacesMessages();
                                    if ( innerMessages == null ) {
                                        FacesMessage innerMessage = validatorException.getFacesMessage();
                                        if ( innerMessage != null ) {
                                            innerMessages = Arrays.asList( new FacesMessage[] { innerMessage } );
                                        }
                                    }

                                    if ( facesMessages == null ) {
                                        facesMessages = new ArrayList<FacesMessage>();
                                    }

                                    facesMessages.addAll( innerMessages );

                                    String errorStyleClass = validator.getErrorStyleClass();
                                    if ( errorStyleClass != null ) {
                                        if ( errorStyleClasses == null ) {
                                            errorStyleClasses = new TreeSet<String>();
                                        }
                                        errorStyleClasses.add( errorStyleClass );
                                    }
                                }

                            }

                            if ( valid ) {
                                // remove previous validation state
                                clearValidationFromComponent( attributes );
                            }
                            else {
                                // add validation state
                                addValidationToComponent( attributes, facesMessages, errorStyleClasses );
                                validationFailed.add( "Yes, it did, but cant update final boolean so we use a list" );
                            }
                        }

                        return VisitResult.ACCEPT;
                    }
                } );

        if ( validationFailed.size() > 0 ) {
            context.validationFailed();
        }
    }

    public void validateThisFormBecausePrimefacesDidntMakeTreeAnEditableValueHolder( ActionEvent event ) {
        validate( FacesContext.getCurrentInstance() );
    }
} 
```

最后是使用它的页面：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
  xmlns:myns="http://ns.my.com/ui/extensions">
<h:head />
<h:body>
  <f:event type="preRenderView"
    listener="#{actionListenerValidatorManager.applyValidationStateToComponentTreeBecausePrimefacesDidntMakeTreeAnEditableValueHolder}" />

...

            <h:panelGroup id="treeGroup">
              <h:outputLabel for="treeInput"
                value="#{i18n['my-tree']}" />
              <p:tree id="treeInput"
                value="#{myBean.treeRootNode}" var="node"
                selectionMode="checkbox"
                selection="#{myBean.selectedNodes}">
                <pe:actionListenerValidator
                  validatorId="javax.faces.Required"
                  errorStyleClass="ui-state-error" />
                <p:treeNode>
                  <h:outputText value="#{node}" />
                </p:treeNode>
              </p:tree>
            </h:panelGroup>

...

</h:body>
</html> 
```

我知道这不是剪切/粘贴类型的答案，但它完全概述了该过程。这种方法的主要好处是在使用方式和处理方式上*感觉*与标准验证相同。此外，它还利用了现有的验证器。如果其他人被卡住`<p:tree>`并且必须验证选择，我希望这会有所帮助......***

# google-maps - 是否可以像在谷歌地图中那样获得城市的多边形边界？

> ID：14385377
> 
> 赞同：2
> 
> 时间：2013-01-17T18:07:19.420
> 
> 标签：google-maps, gps, location, reverse-geocoding

我想知道**GPS 位置**是在有人居住的***区域***还是***无人居住***的区域。

我已经尝试了一些反向地理编码服务，但所有这些服务都被证明是无用的，因为它们选择了最近的地址。（我明白为什么会这样，它对反向地理编码很有用）

我在**Google Maps**中注意到，当我搜索一个城市时，它们的边界被选择***为******红色*** ***虚线*** 。我很乐意使用它或类似的东西。

 **谷歌地图有什么可能的方式可以提供这样的服务，或者可以解决我的问题。

您知道是否有任何其他 Web 解决方案或数据库可以为我提供此信息？

或者，也许我可以使用任何带有一些参数（例如限制搜索大小）的反向地理编码解决方案来确定该位置是否位于人口稠密的区域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:17:50.620

如果您找不到公共服务，那么它会变得有趣，并且在开发工作方面会很昂贵。

公共数据（全球）只能从 OpenStreetMap 获得，我认为他们有这样一个图层（可以命名为 Land_use（农村等））这个图层通常用于为地图着色，如果你发现，请查看 openstreet 地图网页适合您的任务的颜色。（例如看绿色或灰色）。

这些数据存储在多边形中，您可以从顶部提取这些多边形（我假设它们有数百万个）。十你需要一个快速搜索的空间索引，比如区域四叉树。

然后你做一个“点（纬度，经度）在多边形”调用，并得到与你的位置相关的多边形。

可能不是所有的多边形都适合主内存，所以您必须按需加载它们（例如按国家/地区）。

这种方法的一种变体是使用像 postgres 这样的地理空间数据库来存储多边形，并进行数据库查询。

使用这种方法，大多数工作将从 OpenStreetMap DB 文件中提取多边形。

更准确的是来自 TomTom 的数据，但这些数据可能非常昂贵。**

# vim - 在 vim 中探索文件系统/目录？

> ID：14385379
> 
> 赞同：0
> 
> 时间：2013-01-17T18:07:33.403
> 
> 标签：vim, vim-plugin

探索文件系统和打开文件和目录的最佳方式/插件是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T20:55:48.587

在 Vim 中探索文件系统/目录的最佳方式是最适合*您*需求的方式。正如它所说，这个问题无法得到答案，因为没有普遍同意的“方法”。

另一方面，如果您想大致了解在 Vim 中探索文件系统的多种方法，那么，是的，这是一个可以回答的问题。不过，以一种非详尽的方式。

NERDTree 和 netrw 已经介绍过了。这些插件向您展示了一个树状的文件和目录列表，您可以对其进行操作。在尝试 NERDTree 之前，我建议您尝试一下 netrw，因为它默认随 Vim 提供，并且提供比 NERDTree 更广泛的功能。你应该在[http://www.vim.org](http://www.vim.org)上四处看看，因为有很多类似的插件。

另一方面，您拥有 Vim 自己的文件处理能力。以下是您可以在 Vim 中用来打开文件的命令示例：

```
:e filename     edits filename
:sp filename    edits filename in an horizontal split
:vs filename    edits filename in a vertical split
:tabe filename  edits filename in a new tab 
```

你有制表符补全，就像在 shell 中一样：

```
:e <tab>        goes through all the directories/files in the working directory 
```

当然，您可以使用通配符：

```
:e **/*.js<tab> shows all the js files in the working directory and its subdirectories 
```

假设你有`set wildmenu`你的`~/.vimrc`，你可以通过一个可以进一步定制的水平菜单来更好地完成制表符......</p>

您也可以使用“args”……但这将是另一次。

在 Vim 的默认命令和 netrw/NERDTree 之间的某个地方，你可以找到一堆“模糊”且不那么模糊的文件打开器，它们或多或少模仿了 TextMate 不久前引入的一个特性：FuzzyFinder、LustyExplorer、Command-T、CtrlP 和许多其他变体在同一个主题上。核心概念是为您提供一个选择列表，您可以通过在提示中键入更多字符来缩小选择范围，直到选择要编辑的文件。

如果您决定要走插件之路，我建议您访问[http://www.vim.org](http://www.vim.org)，比较那里的内容，尝试一些插件并自己决定。

无论如何，在寻找插件之前，您应该习惯基础知识。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T18:18:19.543

试试[NERD Tree](https://github.com/scrooloose/nerdtree)，除了树选项卡之外，它还增强了@ATOzToa 建议的经典目录列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T23:00:57.053

在 Windows 上，我发现`:!start explorer %:p:h`这是要走的路，或者`:!start explorer .`如果我在我想要打开的目录中。

在 MacVim 上，您可能会做类似的事情`:!open .`来在当前目录上打开一个 Finder 窗口，但我没有方便的 Mac 来试用它。

不确定你会在 GNU/Linux 中使用什么；这可能取决于您的桌面管理器。

# php - Cakephp 从数据库中获取键和值

> ID：14385383
> 
> 赞同：0
> 
> 时间：2013-01-17T18:07:42.147
> 
> 标签：php, database, cakephp

我刚刚在 Cakephp 中创建了 Web 安装程序，现在我说正在编写和读取数据库表上的配置.. 但不知道如何开始。我是否必须创建一个模型.. 似乎那不是正确的方式可以有人告诉我的方式。

**更新：只需要知道从数据库表读取配置**

[网络销售商](http://i.stack.imgur.com/zG8LP.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:21:25.267

查看流行的 CakePHP CMS [Croogo](http://croogo.org/)是如何做到的。

# asp.net - 来自 EditorTemplate 的模型绑定器数据问题

> ID：14385384
> 
> 赞同：0
> 
> 时间：2013-01-17T18:07:47.393
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, model-binding

我在 Razor 视图中的列表中显示。在其中，我有几个显示在列表视图中的编辑器模板。这是我的编辑器模板。

```
@using Contoso.MvcApplication.Extensions
@model Contoso.MvcApplication.ViewModels.MultipleChoiceQuestionViewModel

<h5>@Model.Question.QuestionText</h5>

<div>
@Html.RadioButtonForSelectList(m => m.Question.SelectedAnswer, Model.AnswerRadioList)
@Html.ValidationMessageFor(m => m.Question.SelectedAnswer)
</div> 
```

问题是我设置的地方`RadioButtonForSelectList`，它的绑定是如此，因为我知道在这种情况下应该在这样的 for 循环中：

```
@Html.RadioButtonForSelectList(m => m[i].Question.SelectedAnswer, Model.AnswerRadioList) // the index 
```

但是从编辑器模板中，我无法知道 lambda 表达式中的索引。

这是我从中复制 html 扩展名的站点：

[http://jonlanceley.blogspot.mx/2011/06/mvc3-radiobuttonlist-helper.html](http://jonlanceley.blogspot.mx/2011/06/mvc3-radiobuttonlist-helper.html)

这是我正在使用的视图模型

```
public class MultipleChoiceQuestionViewModel
{
    public MultipleChoiceQuestion Question { get; set; }
    public List<SelectListItem> AnswerRadioList { get; set; }
} 
```

如何正确绑定radioButton？

当我阅读代码中的标签时，我列表中的所有模型都具有相同的 id: `Question.SelectedAnswer`。我认为这是错误的，因为应该有一个像这样的索引 ID `Question.SelectedAnswer.[INDEX]`：。

更新：

```
 public ActionResult Index(short testId)
    {
        GenerateQuiz(testId);
        StartQuiz();

        return View(CreateQuestionViewModel((MultipleChoiceQuestion)CurrentQuestion));
    }

    [HttpPost]
    public ActionResult Index(MultipleChoiceQuestionViewModel q)
    {
        // Save answer state
        ((MultipleChoiceQuestion)CurrentQuestion).SelectedAnswer = q.Question.SelectedAnswer;

        if (CurrentNumber == Questions.Count - 1)
        {
            QuizCompleted();
            return RedirectToAction("ShowResults");
        }
        else
        {
            NextQuestion();
            return View(CreateQuestionViewModel((MultipleChoiceQuestion)CurrentQuestion));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:09:07.740

显示问题的视图部分应如下所示：

```
@for (int j = 0; j < Model.Questions.Count; j++)
{
    <h5>
         Model.Questions[j].QuestionText
    </h5>
    <div>
       @Html.RadioButtonForSelectList(m => m.Questions[j].SelectedAnswer, Model.AnswerRadioList)
    </div>
} 
```

# php - PHP SoapClient::__construct 非自定义请求

> ID：14385386
> 
> 赞同：1
> 
> 时间：2013-01-17T18:07:58.237
> 
> 标签：php, constructor, soap-client

我使用 PHP SoapClient 来处理我的 JAVA 应用程序。

这是我的扩展 SoapClient 类的伪代码：

```
class MyClient extends SoapClient {

  public function __construct($url) {
    $params = Array (
        'login' => 'some_login',
        'password' => 'some_password',
        'trace' => true,
        'exceptions' => true,
        'connection_timeout' => 10,
        'cache_wsdl' => WSDL_CACHE_NONE,
        'features' => SOAP_SINGLE_ELEMENT_ARRAYS,
        'encoding' => 'UTF-8'
    );

    try {
      parent::__construct($url, $params);
    }
    catch(Exception $e) {
      /* some logging action */
    }
    catch(SoapFault $e) {
      /* some logging action */
    }
} 
```

所以我使用我的类创建了一个新对象：

```
$obj = new MyClient("http://location/file.wsdl"); 
```

它发送一个 GET 请求以获取 xml 结构作为响应：

```
GET /file.wsdl HTTP/1.0
Host: location
Authorization: Basic .... 
```

一个问题是即使在构造函数中我也不能使用`SoapClient::__getLastRequest`,和`SoapClient:: __getLastResponse`,因为所有这些函数在之后或仅在之后才有效，但构造函数永远不会触发。`SoapClient::__getLastResponseHeaders``SoapClient::__setCookie``SoapClient::_cookies``__call``__doRequest``__doRequest`

所以我不能自定义构造函数请求来设置和获取cookies。因此，我的应用程序会话管理无法正常工作，因为构造函数请求会触发一个新会话，但我无法在响应中获取 jsessionid cookie。

我试图搜索`::__construct`源代码以用我自己的支持 cookie 的代码覆盖它，但什么也没有。

Internet 上的所有提示，以基于覆盖`__call`或`__doRequest`函数将 CURL 用于 SOAP 请求，但构造函数不使用它们。

请问，有什么想法可以用自定义请求扩展构造函数吗？

* * *

**更新：**

我只是在非 WSDL 模式下使用了 soapclient，它不会在构造函数中获取文件，也不会发送任何未自定义的请求。谢谢你的提示，问题解决了。

# linux - 如何获得进程的准确共享内存大小？

> ID：14385387
> 
> 赞同：6
> 
> 时间：2013-01-17T18:08:01.390
> 
> 标签：linux, memory-management, shared-memory

我试图在 Linux 上获取进程的共享内存大小。这是使用 2 个不同命令的结果：

1.  顶部并检查 SHR 字段：

    ```
     PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
    1734 root      20   0  201m 4072 1012 S  0.0  0.1  22:00.65 php-fpm 
    ```

2.  pmap -d：

    ```
    mapped: 206672K    writeable/private: 4352K    shared: 128K 
    ```

可以看到 pmap 中的共享内存大小比 top 小很多。

我阅读了一些源代码以找到原因。似乎 top 正在从 /proc//statm 读取值，并且这些值是通过以下方式计算的：

```
unsigned long task_statm(struct mm_struct *mm,
    unsigned long *shared, unsigned long *text,
    unsigned long *data, unsigned long *resident)
{
    *shared = get_mm_counter(mm, MM_FILEPAGES);
    *text = (PAGE_ALIGN(mm->end_code) - (mm->start_code & PAGE_MASK))
                                                       >> PAGE_SHIFT;
    *data = mm->total_vm - mm->shared_vm;
    *resident = *shared + get_mm_counter(mm, MM_ANONPAGES);
    return mm->total_vm;
} 
```

好像所有的文件页都算作共享内存？

pmap 命令正在从 /proc//maps 读取信息，然后通过一些标志计算共享内存：

```
3dc822a000-3dc822d000 rw-p 0002a000 08:13 5134288      /usr/lib64/libmcrypt.so.4.4.8
start-end flags file_offset dev_major:dev_minor inode 
```

如果 flags[3] == 's' 那么这张地图将被视为共享地图。

所以我的问题是哪个更准确？为什么他们有不同的方法来计算共享内存大小？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:53:51.377

中的`SHR`列`top`不报告与`pmap`s`shared`条目相同的内容。`top`报告与其他进程共享的内存量，因为它位于一个动态库中，该库一次加载到内存中，并且使用该库的所有进程在其映像中包含相同的页面，因为这些页面是只读的。`pmap`似乎正在显示“共享内存”段，这些段是可以读写或只读的数据页，并且在具有`shmget()`相关功能的进程之间共享。

# profiling - 您能否在调用 dotTrace 性能时列出参数值

> ID：14385389
> 
> 赞同：0
> 
> 时间：2013-01-17T18:08:07.843
> 
> 标签：profiling, dottrace

我已经在 ReSharper 中分析了我的应用程序，并且我有一种非常慢的方法：

![探查器屏幕截图](../Images/5e767c6680e302213312a8331089a5de.png).

有什么方法可以获取传递给该函数的参数列表吗？我尝试逐行分析，但没有骰子。有没有一种方法可以插入一条跟踪消息，该消息将显示在带有参数的分析器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:54:03.510

您需要一个分析器和跟踪器的组合，一个像 SpeedTrace Pro (Perfinity) 或 Dynatrace (Compuware) 这样的工具，它提供请求的功能来解决与数据相关的性能问题，例如[http://speedtracepro.com/product/features/analytic_components](http://speedtracepro.com/product/features/analytic_components)

# c# - 更改 IConnectableObservable 的间隔

> ID：14385391
> 
> 赞同：0
> 
> 时间：2013-01-17T18:08:18.177
> 
> 标签：c#, system.reactive, reactive-programming

我有一个方法叫做`Subscribe()`在哪里做这个：-

```
private void Subscribe(){
            IObservable<long> timer = Observable.Interval(TimeSpan.FromMilliseconds(250), Scheduler.NewThread);
            IConnectableObservable<long> TimerPublisher = timer.Publish();
            TimerPublisher.Connect();

            this.DisposeMonsterAction = TimerPublisher.Subscribe(tick => MonsterAction());

            var timer = from tick in world.TimerPublisher where tick % 1 == 0 select tick;
            this.DisposeMonstersDeath = timer .Subscribe(tick => MonstersDeath());
} 
```

所以`MonsterAction()`每 250 毫秒被调用一次，然后`MonsterDeath`每 1 秒被调用一次，但它不是那样工作的，`MonsterDeath`每 250 毫秒被调用一次，那么我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:28:23.383

忽略间隔序列的相当奇怪的共享和 NewThread 的使用，您的问题似乎完全在于

```
where tick % 1 == 0 
```

我只能想象需要阅读

```
where tick % 4 == 0 //or ==3 or whatever... 
```

即，任何整数/长整数除以 1 的余数为 0，因此您的 where 子句毫无意义。

您可能会发现有用的其他提示：

1.  将您的订阅放在连接之前。即，如果您继续使用 Connectable observable，请将 .Connect() 行作为方法中的最后一行。
2.  考虑注入您正在使用的调度程序，以便您可以测试
3.  考虑使用 Task 或 ThreadPool 调度程序。它们适用于简单的 Timer/Interval 调度。NewThread 似乎是完成这项工作的一把大锤子。
4.  使用 _ 字符表示您没有使用参数。例如，调用 MonsterAction() 和 MonsterDeath 的动作可以更改为 (_=>MonsterAction())。这向下一个开发人员表示您实际上并未使用该参数。
5.  我会将您的 DisposeMonsterAction/DisposeMonstersDeath 重命名为 MonsterActionSubscription 和 MonstersDeathSubscription。
6.  我认为您不会从共享序列中获得任何收益。在幕后，真正在做这项工作的是调度程序。我实际上会想象每秒检查 4 次值实际上会比使用两个序列花费更多。

我建议为了你的队友（包括未来的你），这很简单，可以满足你的需要

```
private void Subscribe(IScheduler timerScheduler){
    this.DisposeMonsterAction = Observable.Interval(TimeSpan.FromMilliseconds(250), timerScheduler).Subscribe(_ => MonsterAction());
    this.DisposeMonstersDeath = Observable.Interval(TimeSpan.FromMilliseconds(1000), timerScheduler).Subscribe(_ => MonstersDeath());
} 
```

或重命名

```
private void Subscribe(IScheduler timerScheduler){
    this.MonsterActionSubscription = Observable.Interval(TimeSpan.FromMilliseconds(250), timerScheduler).Subscribe(_ => MonsterAction());
    this.MonstersDeathSubscription = Observable.Interval(TimeSpan.FromMilliseconds(1000), timerScheduler).Subscribe(_ => MonstersDeath());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:20:49.260

我不完全确定您为什么在这里使用“热”观察者（可能是由于其他代码？），但是像这样组合两个离散时间流的最简单方法是`Merge`：

```
Action MonsterAction = 
    () => Console.WriteLine("MonsterAction");
Action MonsterDeath = 
    () => Console.WriteLine("MonsterDeath");

// action stream
var monsterAction = Observable
    .Interval(TimeSpan.FromMilliseconds(250))
    .Do(_ => MonsterAction());

// death stream
var monsterDeath = Observable
    .Interval(TimeSpan.FromMilliseconds(1000))
    .Do(_ => MonsterDeath());

// act, act, act, act + die, act, act, ...
var obs = monsterAction.Merge(monsterDeath);

// "warm up" the cold observable
var hotObs1 = obs.Publish();

using(var conn = hotObs1.Connect())
using(var x = hotObs1.Subscribe(evt => Console.WriteLine(evt)))
{
    Console.ReadLine();
} 
```

# inno-setup - Inno Setup：如何修改长时间运行的脚本使其不会冻结 GUI？

> ID：14385393
> 
> 赞同：3
> 
> 时间：2013-01-17T18:08:36.933
> 
> 标签：inno-setup

我有一个 Inno Setup 安装，它执行一些耗时的“AfterInstall”操作。并且在执行此操作时，安装 GUI 完全冻结（似乎它的主事件循环未处理）。这不是一个令人愉快的最终用户体验，所以也许这个操作有可能不冻结 GUI？就像在单独的线程中执行它或定期调用类似的东西`handleGuiEventLoop()`？

对于“动作”，我从我的 .dll 调用我的函数，该函数发出许多 HTTP 请求并将响应作为文件写入应用程序安装文件夹。这不是 CPU 密集型的，但可能需要几秒钟。或者，如果互联网连接较弱/没有可用的互联网连接，则可能需要一两分钟。并且安装程序 GUI 一直被冻结。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T10:17:33.393

[输出进度页面](http://www.jrsoftware.org/ishelp/topic_isxfunc_createoutputprogresspage.htm)旨在提供对较长运行操作的反馈。

但是为了使这有效，您必须能够通过定期调用此页面上的方法来让 Inno 更新您当前的进度。

有一个库可以让您[将 Inno 脚本函数作为回调传递给 DLL](http://www.sherlocksoftware.org/page.php?id=54)，这可能有用。您可能还想查看使用来自同一站点的 ITDownload 脚本，它允许您从 Inno 内部进行 HTTP 访问，避免中间人。

然而 Inno 本质上是单线程和 GUI-thread-affine 的，所以直接调用阻塞操作总是会阻塞 UI 而没有特殊的规定。可以在单独的线程中运行代码（但只能在 DLL 中，您必须*非常*小心）；其他选项包括仅进行异步调用，或内部维护 GUI 更新的调用，例如`Exec`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-13T04:36:19.503

有两种方法可以改善体验（它们仅从 API 的角度来看不同，在内部两者都做同样的事情——它们泵送 Windows 消息队列）：

1.  **用于[`TOutputProgressWizardPage`](https://jrsoftware.org/ishelp/index.php?topic=scriptclasses&anchor=TOutputProgressWizardPage)呈现操作进度。**它的`SetProgress`方法在内部调用 VCL [`TApplication.ProcessMessages`](https://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TApplication.ProcessMessages)，它会抽取 Windows 消息队列。

    用于[`CreateOutputProgressPage`](https://jrsoftware.org/ishelp/index.php?topic=isxfunc_createoutputprogresspage)创建页面。

    一些例子：

    *   [Inno Setup 从 .NET Framework 4.5（或更高版本）安装程序获取进度以更新进度条位置](https://stackoverflow.com/q/39247947/850848)
    *   [如何在 Inno Setup 中延迟而不冻结](https://stackoverflow.com/q/39825271/850848)
    *   [让 Inno Setup Installer 向主安装程序报告其安装进度状态](https://stackoverflow.com/q/40947436/850848)
    *   [Inno Setup ExtractTemporaryFile 导致向导冻结](https://stackoverflow.com/q/41549970/850848)
    *   [Inno Setup torrent 下载实现](https://stackoverflow.com/q/41924722/850848)
    *   [Inno Setup - 如何添加多个 arc 文件进行解压？](https://stackoverflow.com/q/43072471/850848)
2.  **通过调用 WinAPI 显式抽取 Windows 消息队列[`DispatchMessage`](https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-dispatchmessage)。**

    有关一些示例，请参见以下`AppProcessMessage`功能：

    *   [通过侦听端口在 LAN 上发现 MySQL 服务器 (Inno Setup)](https://stackoverflow.com/q/44057789/850848#44840244)
    *   [如何在不阻塞 Inno Setup UI 的情况下执行 7zip？](https://stackoverflow.com/q/32256432/850848#32266687)
    *   和别的

* * *

在这两种情况下，您都必须添加触发消息队列抽取的调用。通常在进行处理的某个循环内。

在某些情况下，您将无法做到这一点。例如，当您使用对外部应用程序的阻塞调用（例如使用[`Exec`](https://jrsoftware.org/ishelp/index.php?topic=isxfunc_exec)or [`ShellExec`](https://jrsoftware.org/ishelp/index.php?topic=isxfunc_shellexec)）进行处理时。您可以通过安排在函数运行时定期触发的计时器来解决此问题。

上面链接的一些示例使用了这种方法，即：

*   [让 Inno Setup Installer 向主安装程序报告其安装进度状态](https://stackoverflow.com/q/40947436/850848)
*   [Inno Setup torrent 下载实现](https://stackoverflow.com/q/41924722/850848)

# iphone - 用于 iPhone 应用更新的新私钥和配置文件

> ID：14385394
> 
> 赞同：1
> 
> 时间：2013-01-17T18:08:37.597
> 
> 标签：iphone, ios, itunes

我为我的 iphone 应用程序的新版本使用外部开发人员。现在，随着发布的临近​​，为了创建最终的应用商店版本，他要求我提供更新的配置文件。我现有的已经过期，所以我从 Provisioning Portal - Provisioning - Development (Tab) 创建了一个新的并将其发送给他。

问题是现在他告诉我我必须向他发送一个新的 .p12 文件，因为新附加的配置文件不再与他存档的私钥匹配。我已阅读[本教程](https://appmakr.zendesk.com/entries/175966-how-to-create-and-upload-your-private-key-p12-into-your-appmakr-developer-account)，但我有一些问题。

在“证书-分发”选项卡中，我有一个可供下载的证书，它必须是在同一天使用新的配置文件创建的，并且明年到期，所以我想我在这里没有什么可做的。

所以我想问一下如何创建这个私钥文件。我打开钥匙串访问，我看到有一个 iphone 分发钥匙串将在一年内到期，但它有一个红色的句子，上面写着“这个证书是由一个未知的权威机构签署的”。如果我将其导出并交给开发人员，可以吗？

谢谢科斯塔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:32:07.133

p12 文件用于创建证书签名请求，这是您在请求分发证书时上传到开发人员门户的内容。如果您没有更改系统或删除东西，它应该在您的钥匙串中。

打开钥匙串访问，导航到我的证书，找到您的分发证书，展开箭头以显示附加到它的私钥。然后右键单击私钥并选择导出，这是您的开发人员需要的文件。

这是一个屏幕截图，显示了它的外观。

![在此处输入图像描述](../Images/32a2d20a89be6eec2af9d4ac166528bd.png)

# php - 如何通过 API 将潜在客户发送到 Getresponse

> ID：14385402
> 
> 赞同：1
> 
> 时间：2013-01-17T18:09:35.083
> 
> 标签：php, html, api, list, getresponse

我有一个 html 表单，其中收集了姓名和电子邮件地址。我尝试使用此脚本将这些信息提交到 GetResponse 列表：

```
<?php

function mytheme_save_to_getresponse($form)
{

    require_once 'jsonRPCClient.php';
    $api_key = 'myAPIkey';
    $api_url = 'http://api2.getresponse.com';
    $client = new jsonRPCClient($api_url);
    $result = NULL;

try {
    $result = $client->get_campaigns(
        $api_key,
        array (
            # find by name literally
            'name' => array ( 'EQUALS' => 'testlist' )
        )
    );
}
catch (Exception $e) {
    # check for communication and response errors
    # implement handling if needed
    die($e->getMessage());
}

$campaigns = array_keys($result);
$CAMPAIGN_ID = array_pop($campaigns);

    $subscriberEmail =  $_GET['email'];

try {
    $result = $client->add_contact(
        $api_key,
        array (
            'campaign'  => $CAMPAIGN_ID,
            'name'     =>  $subscriberName,
            'email'     =>  $subscriberEmail,
            'cycle_day' => '0'
                    )
    );
}
catch (Exception $e) {
    # check for communication and response errors
    # implement handling if needed
    die($e->getMessage());
}
}
?> 
```

该脚本没有显示任何错误，但 GetResponse 没有将潜在客户保存到我的列表中。难道我做错了什么？

谢谢詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-01T09:48:55.580

如果您收到 [queued]=>1 的响应，那么您的脚本工作正常。只有在验证/确认输入的电子邮件后，它才会添加到您的联系人中 $subscriberEmail 将收到一封确认电子邮件...在用户之后点击链接联系人将被添加

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-17T17:41:39.217

这一行是错误的：

```
'name'     =>  $subscriberName, 
```

因为您有未定义的变量并将其发布到没有值的 GetResponse API 'name' 参数，所以 GetResponse API 返回无效参数。

改成：

```
$subscriberName => "Some_test_name", // for test only 
```

在这一行：

```
$subscriberEmail =  $_GET['email']; 
```

您应该在 GET 表中设置一些电子邮件，以便进行测试，只需更改为：

```
$subscriberEmail =  "test@domain.com"; // or sth like this. 
```

最后一个想法是 var_dump $result 变量，然后您会看到来自 GetResponse API 的响应

```
$result = null; // before try {

var_dump($result); // before end of function } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T09:28:12.537

您的代码看起来不错，您必须设置回调 url 以进行错误处理

# opencv - ORB 特征描述符

> ID：14385405
> 
> 赞同：0
> 
> 时间：2013-01-17T18:09:40.273
> 
> 标签：opencv, vision

我需要对我的机器人进行编程，以便它能够找到被要求拾取的物体并将其带到指定位置。我尝试过简单的 img 处理技术，例如过滤、轮廓查找。这似乎效果不佳。我想使用 ORB 特征提取器。这是一个示例图像。感兴趣的对象是球。简而言之，我如何训练我的机器人捡球或其他物体，任何示例程序都会有所帮助。如何使用 ORB。如果可能的话，提供一个例子。提前谢谢

[http://i.stack.imgur.com/spobV.jpg](http://i.stack.imgur.com/spobV.jpg) [http://i.stack.imgur.com/JNH1T.jpg](http://i.stack.imgur.com/JNH1T.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T07:56:31.977

您可以尝试使用 Haar 分类器等基于学习的算法来检测任何对象。多亏了 OpenCV，所有的培训过程都非常精简。您所要做的就是用一些真实图像（对象的图像）和错误图像（任何可能没有对象的图像）来训练您的分类器。

以下是一些链接供您参考。

1.  用于圆珠笔检测的 Haar 训练器：http: [//opencvuser.blogspot.com/2011/08/creating-haar-cascade-classifier-aka.html](http://opencvuser.blogspot.com/2011/08/creating-haar-cascade-classifier-aka.html)

2.  用于香蕉检测的 Haar 训练器 :)：http: [//coding-robin.de/2013/07/22/train-your-own-opencv-haar-classifier.html](http://coding-robin.de/2013/07/22/train-your-own-opencv-haar-classifier.html)

# python - PyQt 和 QtreeView：如何从所选文件中获取路径

> ID：14385409
> 
> 赞同：1
> 
> 时间：2013-01-17T18:10:05.583
> 
> 标签：python, pyqt, qtreeview

我是 PyQt 的初学者。全部都在标题中：我不明白如何从所选文件中获取路径（和名称）？我希望稍后使用此路径更新 QListView。

这是我的脚本：

```
# -*- coding: utf-8 -*-
from PyQt4.QtGui import *
from PyQt4.QtCore import *

import sys

class MyWidget(QWidget):
    # SIGNAUX
    tree_model_indexSig = pyqtSignal(QModelIndex)

    def __init__(self, parent=None):
        super(MyWidget, self).__init__(parent)

        # connect signaux to slots
        self.tree_model_indexSig.connect(self.indexSlot)

        self.model = QFileSystemModel()
        self.model.setRootPath(QDir.rootPath())

        ''' GUI '''
        # instantiation du treeview et du listview
        self.treeView = QTreeView(self)
        self.treeView.setGeometry(QRect(10, 20, 601, 231))
        self.treeView.setObjectName("treeView")

        ''' END GUI '''

        self.treeView.setModel(self.model)
        self.treeView.setRootIndex(self.model.index(QDir.rootPath()))
        # clicked.CONNECT
        self.treeView.clicked.connect(self.treeClicked)
        self.treeView.show()

    def treeClicked(self, checked=False):
        # EMIT 
        self.tree_model_indexSig.emit(self.model.index(QDir.rootPath()))
    # Definition des slots
    def indexSlot(self, *args):
        # 1 argument --> ModelIndex
        path = QDirModel(args[0]).filePath(args[0].currentIndex())
        print path
        '''
        How get the path from the selected file ??
        '''

if __name__=='__main__':
    app = QApplication(sys.argv)
    widget = MyWidget()
    widget.show()
    app.exec_() 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:31:09.870

像这样的东西应该适合你：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)

from PyQt4 import QtCore, QtGui

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.pathRoot = QtCore.QDir.rootPath()

        self.model = QtGui.QFileSystemModel(self)
        self.model.setRootPath(self.pathRoot)

        self.indexRoot = self.model.index(self.model.rootPath())

        self.treeView = QtGui.QTreeView(self)
        self.treeView.setModel(self.model)
        self.treeView.setRootIndex(self.indexRoot)
        self.treeView.clicked.connect(self.on_treeView_clicked)

        self.labelFileName = QtGui.QLabel(self)
        self.labelFileName.setText("File Name:")

        self.lineEditFileName = QtGui.QLineEdit(self)

        self.labelFilePath = QtGui.QLabel(self)
        self.labelFilePath.setText("File Path:")

        self.lineEditFilePath = QtGui.QLineEdit(self)

        self.gridLayout = QtGui.QGridLayout()
        self.gridLayout.addWidget(self.labelFileName, 0, 0)
        self.gridLayout.addWidget(self.lineEditFileName, 0, 1)
        self.gridLayout.addWidget(self.labelFilePath, 1, 0)
        self.gridLayout.addWidget(self.lineEditFilePath, 1, 1)

        self.layout = QtGui.QVBoxLayout(self)
        self.layout.addLayout(self.gridLayout)
        self.layout.addWidget(self.treeView)

    @QtCore.pyqtSlot(QtCore.QModelIndex)
    def on_treeView_clicked(self, index):
        indexItem = self.model.index(index.row(), 0, index.parent())

        fileName = self.model.fileName(indexItem)
        filePath = self.model.filePath(indexItem)

        self.lineEditFileName.setText(fileName)
        self.lineEditFilePath.setText(filePath)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.resize(666, 333)
    main.move(app.desktop().screen().rect().center() - main.rect().center())
    main.show()

    sys.exit(app.exec_()) 
```

# c - 禁止指针和整数之间的比较

> ID：14385411
> 
> 赞同：-2
> 
> 时间：2013-01-17T18:10:14.947
> 
> 标签：c, struct, structure

```
struct student
{
    char am[7];/* èá íáé*/
    float final_grade;
    float exam_grade;
    float essay_grade;
};
struct student mathites[1];

do{
    printf("Dwse A.M.:");
    scanf("%s",&mathites[j].am);
} while((mathites[j].am<8120000) || (mathites[j].am>812015)); 
```

我看到了这样的帖子，但是每个人都问与“==”的比较，所以答案是strcmp，这种情况类似吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:21:25.253

`something similar for this case?`

这个有点不同，因为您正在尝试检查字符串是否在数值范围内。

先说几点：

* * *

```
struct student mathites[1]; 
```

如果您要声明一个数组，则最好不要将其设为数组。

```
char am[7];/* èá íáé*/ 
```

如果您要比较的最大值是 7 个字符“8120000”，那么您希望数组大小为 8（包括空终止符的空间）

```
scanf("%s",&mathites[j].am);} 
```

获取字符串时不需要使用`&`运算符，并且应该使用限制器，这样就不会溢出字符串

* * *

所以考虑到这一点，我会说代码应该更像：

```
struct student
{
      char am[8];/* èá íáé*/
      float final_grade;
      float exam_grade;
      float essay_grade;
};

struct student mathites;
do  {
    printf("Dwse A.M.:");
    scanf("%7s",mathites.am);} 
```

现在您的实际问题是，您需要先将字符串转换为数字，然后检查值：

```
 long str_value = strtol(mathites.am, NULL, 10);
}
while((str_value <8120000) || (str_value >812015)); 
```

# ruby-on-rails - Rails 2.3 中的`flash.discard` 失败，因为 flash 是 Hash，而不是 FlashHash

> ID：14385412
> 
> 赞同：2
> 
> 时间：2013-01-17T18:10:17.233
> 
> 标签：ruby-on-rails, hash, actionpack, rails-flash

给定一个功能测试，例如：

```
def test_exciting_rails_upgrades
    login(m=users(:manager))

    post :import_users_map_fields, :csv_file => fixture_file_upload('/users.csv', 'text/csv')
    assert flash.empty?
    flash.discard
    # other goodies omitted

end 
```

在 Rails 2.3.2 中没有错误，但是在 2.3.15 中，错误是：

```
    NoMethodError: {}:Hash 的未定义方法“丢弃”
    /test/functional/broken_upgrades.rb:119:in `test_exciting_rails_upgrades'

```

为什么是`flash`一个`Hash`类而不是一个`FlashHash`？

从源代码来看，2.3.2 和 2.3.15 ActionPack 文件都 `lib/action_controller/flash.rb`创建了`FlashHash`类并继承自`Hash`. 然而，在 2.3.2 和 2.3.15 的这个功能测试中显示的是一个`Hash`类，而不是 a `HashFlash`，所以不能对它调用 discard。

其他人可以用 2.3.15 重现此错误`flash.discard`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:31:57.193

这里有两个测试用例可以用来证明 ActionController 根据它是否已经设置来改变'flash'的类型。

在我的应用程序中，除非您已登录，否则您无法看到 :index，因此在 test_flash_is_now_a_flashhash 中，您会看到后端正确设置了 flash，而在 test_flash_is_a_plain_hash 中却没有。

```
def test_flash_is_a_plain_hash
  login(users(:permitted_user))
  get :index
  assert flash.instance_of?(Hash)
end

def test_flash_is_now_a_flashhash
  get :index
  assert_redirected_to :controller => "login"
  assert flash.instance_of?(ActionController::Flash::FlashHash)
end 
```

您可以在 ActionController::TestRequest 代码中亲自看到这一点：

```
def flash
    session['flash'] || {}
end 
```

更新：这已在 Rails 分支[2-3-stable中](https://github.com/rails/rails/blob/2-3-stable/)[修复](https://github.com/rails/rails/blob/2-3-stable/actionpack/lib/action_controller/flash.rb#L184)。

# php - PHP jQuery JSON 格式

> ID：14385414
> 
> 赞同：0
> 
> 时间：2013-01-17T18:10:28.763
> 
> 标签：php, jquery, json, format

我在 PHP 中有以下代码，它返回这个 JSON 代码。由于格式的原因，我无法返回“OK”的值，我必须做一些 jQuery 技巧来获取它，但我不想要它......一些建议将不胜感激。

**PHP**

```
while($row = sqlsrv_fetch_array($datBS)) {
    $ahora = $row['servicio'];
    if($ahora != $antes && $n == 1) {
        $ok = array();$ko = array(); $rt = array(); $horas = array();
    }
    if($row['peticion_id'] == 0) {$ok[] = round($row['valor'], 3); $horas[] = $row['hora'];}
    if($row['peticion_id'] == 1) $ko[] = round($row['valor'], 3);
    if($row['peticion_id'] == 2) $rt[] = round($row['valor'], 3);
    $datosBS[$ahora] = array(
            "OK"    =>  $ok,
            "KO"    =>  $ko,
            "RT"    =>  $rt,
            "HORAS" => $horas
    );
    $antes = $ahora;
    $n = 1;
}
    while($row = sqlsrv_fetch_array($sqlTotalsBS)) {
        $bs[$row['servicio']] = array(
            "SUMOK" => intval($row["OK"]),
            "SUMKO" => intval($row["KO"])
        );
    }
    $banksphere = array_merge_recursive((array)$bs, (array)$datosBS);
    $json = array_merge((array)$banksphere);
    echo json_encode($json); 
```

**JSON**

```
{"Servicing":{"SUMOK":923391,"SUMKO":1048,"OK":[184,69,28,14,15,15,0,11,13,0,14,21,19,3,8,0,5,17,13,0,8,30,5,3,13,18,26,24,46,116,342,790,2828,9795,15647,21394,23710,26214,27522,27038,26603,28939,29149,29222,28020,30061,29967,20139,21436,31416,31354,32472,32659,32435,33767,33623,33394,27204,28830,32562,34844,20197,11903,6923,6855,6133,6051,7456,7842,8366,9271,10127,10301,9845,9616,8391],"KO":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,9,17,20,11,29,30,35,65,89,56,52,59,26,35,70,39,39,60,28,15,12,27,20,37,20,20,12,8,5,3,8,10,5,12,4,11,9,9,10,11,4],"RT":[0.139,0.171,0.73,0.187,3.667,3.126,0,3.629,7.227,0,4.279,5.967,3.195,2.862,0.883,0,5.441,6.495,0.883,0,1.835,1.656,2.09,0.111,0.35,1.015,1.457,0.829,0.635,0.767,0.534,0.325,0.202,0.172,0.142,0.129,0.125,0.127,0.123,0.125,0.124,0.12,0.122,0.116,0.121,0.114,0.116,0.115,0.116,0.127,0.118,0.128,0.123,0.119,0.12,0.115,0.113,0.114,0.119,0.11,0.104,0.142,0.112,0.139,0.107,0.131,0.149,0.139,0.139,0.133,0.131,0.116,0.109,0.122,0.116,0.113],"HORAS":["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45"]},"Estructurales":{"SUMOK":58088,"SUMKO":453,"OK":[25,12,10,2,16,12,5,11,4,6,10,14,11,7,10,4,7,16,9,6,10,13,9,4,14,10,14,20,33,81,144,366,1562,5956,3671,2251,1976,1960,1600,1656,1475,1396,1473,1567,1412,1486,1553,1198,1046,1655,1636,1743,1711,1550,1417,1340,1562,1312,993,1285,925,790,377,311,286,324,378,486,602,461,542,491,474,450,401,433],"KO":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,2,2,5,11,11,14,10,9,17,10,9,21,10,10,5,8,14,18,16,33,22,18,19,27,21,29,16,13,11,3,2,1,5,5,1,2,3,3,3,2,4,7],"RT":[0.072,0.888,0.085,0.055,0.063,0.065,0.044,0.113,0.046,0.139,0.08,0.215,0.089,0.134,0.083,0.51,0.242,0.224,0.255,0.126,0.125,0.206,0.343,0.062,0.06,0.229,0.074,0.334,0.08,0.186,0.098,0.113,0.141,0.056,0.091,0.165,0.189,0.187,0.211,0.288,0.248,0.267,0.263,0.279,0.296,0.263,0.257,0.266,0.269,0.303,0.294,0.274,0.275,0.284,0.289,0.287,0.297,0.256,0.591,0.25,0.31,0.382,0.25,0.265,0.1,0.115,0.125,0.123,0.132,0.561,0.172,0.254,0.14,0.106,0.193,0.187],"HORAS":["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45"]},"Movilidad":{"SUMOK":96919,"SUMKO":27,"OK":[1563,1396,1250,1082,825,652,427,416,305,266,205,233,149,203,141,118,148,132,101,86,111,141,205,136,285,405,445,584,736,1159,1047,1333,1406,1627,1828,1978,2393,2533,2351,2445,2182,2346,2068,2067,1900,2187,2161,1380,1093,1891,2060,1877,1825,1806,1896,1854,1748,1613,1789,1795,1939,1963,2123,1704,1864,1693,1862,1706,1461,1488,1608,1367,1419,1516,1347,1475],"KO":[1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,1,1,0,0,0,0,1,0,2,1,0,0,1,0,2,0,1,2,2,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,4],"RT":[0.361,0.462,0.42,0.417,0.379,0.583,0.43,0.377,0.449,0.505,0.428,0.591,0.466,0.459,0.595,0.441,0.481,0.462,0.65,0.674,0.668,0.519,0.562,0.547,0.52,0.546,0.474,0.481,0.484,0.457,0.449,0.503,0.432,0.425,0.438,0.422,0.441,0.426,0.395,0.397,0.4,0.385,0.408,0.469,0.416,0.45,0.386,0.414,0.413,0.413,0.395,0.373,0.418,0.386,0.387,0.376,0.386,0.398,0.405,0.406,0.399,0.407,0.395,0.385,0.421,0.397,0.372,0.351,0.39,0.384,0.359,0.401,0.403,0.435,0.395,0.355],"HORAS":["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45"]},"Riesgos":{"SUMOK":200875,"SUMKO":1409,"OK":[50,61,31,55,28,26,5,60,20,0,15,0,15,15,0,0,15,0,15,15,0,15,15,0,13,2,0,30,2,44,146,268,510,1265,2425,2955,3841,4581,5321,5587,5944,6327,5300,5337,5291,5679,5805,3869,3708,6929,7262,6740,6493,6381,6789,6080,5504,6053,5190,5224,4327,2092,1426,1499,2065,2972,3495,3766,4504,4265,4429,5289,4926,4524,3760,4185],"KO":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,5,5,7,5,17,18,24,24,53,36,47,40,41,43,24,26,53,54,62,58,41,46,51,33,29,26,18,10,13,14,16,21,23,48,53,45,49,34,34,43,38,36,43],"RT":[0.065,0.083,0.13,0.707,0.099,0.084,2.82,0.194,0.22,0,0.492,0,0.433,0.161,0,0,0.298,0,0.537,0.446,0,0.52,0.728,0,0.287,0.345,0,0.082,1.316,1.136,0.352,0.576,0.38,0.27,0.256,0.176,0.179,0.136,0.143,0.152,0.126,0.144,0.13,0.154,0.139,0.151,0.134,0.142,0.153,0.166,0.156,0.147,0.137,0.141,0.129,0.142,0.148,0.132,0.128,0.18,0.124,0.159,0.183,0.154,0.147,0.128,0.135,0.141,0.131,0.175,0.141,0.114,0.14,0.139,0.172,0.162],"HORAS":["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45"]},"Particulares":{"SUMOK":709540,"SUMKO":534,"OK":[5794,5284,4816,3580,3018,2283,2006,1486,1186,1311,918,794,607,677,671,600,412,584,454,506,457,672,665,649,932,894,1412,1727,2158,3063,4326,5923,7038,10129,13647,14923,15905,19339,21463,22762,21936,22069,21976,21072,19951,19413,19256,13127,12318,18637,17980,18297,17357,16708,16401,15354,14515,12789,11771,10628,11232,10458,11007,11007,11753,11383,11922,11604,11120,10776,11697,11471,11463,12479,11531,12011],"KO":[7,8,3,1,7,4,3,1,2,4,2,1,3,0,3,0,0,0,1,1,0,0,2,0,0,0,0,0,0,4,1,5,4,5,7,6,5,5,11,12,17,14,12,13,20,13,12,9,8,21,13,12,15,17,7,13,11,6,9,9,5,12,11,8,10,8,13,8,8,11,7,8,13,20,11,12],"RT":[0.197,0.241,0.204,0.205,0.247,0.241,0.315,0.302,0.178,0.433,0.505,0.181,0.191,0.183,0.228,0.226,0.219,0.326,0.337,0.535,0.273,0.229,0.267,0.218,0.223,0.202,0.219,0.212,0.241,0.191,0.187,0.169,0.2,0.152,0.158,0.171,0.14,0.159,0.149,0.143,0.156,0.146,0.145,0.137,0.141,0.159,0.142,0.158,0.149,0.136,0.133,0.124,0.16,0.145,0.141,0.139,0.143,0.149,0.126,0.132,0.163,0.192,0.181,0.172,0.186,0.147,0.132,0.167,0.138,0.18,0.153,0.146,0.143,0.166,0.142,0.144],"HORAS":["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45"]},"Particulares BKS3":{"SUMOK":799461,"SUMKO":731,"OK":[6917,6108,5726,4223,3433,2683,2391,1693,1304,1253,921,800,688,693,715,634,493,505,426,418,446,743,735,691,1073,984,1672,1881,2260,3230,4607,6421,7692,11239,14628,16550,18563,20975,23237,25076,24469,24579,24123,23419,22116,21400,21976,14099,13843,21162,20687,21039,19535,18668,18566,17750,16300,14561,13380,12424,12500,11909,12463,12460,13241,12829,13668,13038,12602,12539,13516,13739,13601,14415,13847,14271],"KO":[10,6,8,2,2,2,2,7,1,1,0,0,4,0,0,1,0,0,1,0,0,0,0,0,0,0,5,5,3,6,4,8,6,7,7,7,10,14,19,16,17,16,12,18,17,28,23,15,18,18,28,21,23,19,13,11,16,9,15,11,17,10,8,15,23,17,15,8,7,13,15,12,10,18,18,13],"RT":[0.152,0.197,0.156,0.153,0.151,0.199,0.201,0.144,0.149,0.198,0.176,0.34,0.445,0.346,0.406,0.522,0.505,0.405,0.458,0.363,0.297,0.349,0.345,0.216,0.218,0.193,0.2,0.202,0.261,0.525,0.225,0.266,0.17,0.153,0.146,0.148,0.148,0.15,0.154,0.151,0.152,0.155,0.151,0.152,0.142,0.147,0.143,0.142,0.143,0.152,0.148,0.148,0.147,0.151,0.149,0.147,0.141,0.141,0.14,0.144,0.138,0.152,0.141,0.145,0.142,0.144,0.136,0.135,0.136,0.138,0.14,0.144,0.138,0.143,0.143,0.143],"HORAS":["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45"]},"Empresas":{"SUMOK":183051,"SUMKO":658,"OK":[405,389,293,222,254,175,150,182,129,85,78,96,71,85,78,70,70,77,121,77,74,76,102,94,138,149,202,205,371,392,662,958,1269,2478,3425,4178,4458,5982,6565,6905,6723,6242,5983,5989,6005,5467,5452,3187,3855,6037,4980,5874,5682,5283,5166,4975,3949,3239,2753,2354,1884,1819,2065,2305,2645,2640,2954,2835,3068,3017,3068,2997,2682,2849,2599,2639],"KO":[5,0,1,0,6,1,0,1,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,3,0,0,0,1,5,7,12,9,13,9,15,21,22,22,21,17,24,13,17,20,13,17,23,21,13,22,10,13,19,15,6,11,9,8,5,9,7,21,19,9,5,14,27,7,18,10,13,11,15],"RT":[0.145,0.43,0.128,0.141,0.13,0.138,0.087,0.105,0.093,0.219,0.073,0.203,0.158,0.117,0.178,0.109,0.247,0.259,0.472,0.261,0.375,0.159,0.163,0.21,0.252,0.201,0.222,0.707,0.72,0.303,0.341,0.46,0.195,0.132,0.11,0.102,0.104,0.116,0.121,0.102,0.122,0.128,0.131,0.129,0.105,0.102,0.111,0.111,0.11,0.12,0.101,0.112,0.108,0.106,0.112,0.098,0.105,0.141,0.113,0.096,0.089,0.099,0.114,0.12,0.105,0.112,0.1,0.093,0.099,0.138,0.103,0.095,0.108,0.106,0.112,0.098],"HORAS":["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45"]},"Juzgados":{"SUMOK":333138,"SUMKO":102,"OK":[87,59,33,49,59,73,45,63,67,39,46,31,41,58,21,53,32,31,45,30,41,37,21,68,44,138,211,174,47,62,110,393,710,1359,2868,3914,5416,7705,9541,10509,11443,11403,11296,11986,12718,13056,12457,7840,8102,12545,14057,14422,13735,14547,14024,14292,13172,14054,12174,9538,8052,5539,4256,3502,2772,2498,2164,1823,1420,1154,1533,1671,1602,1420,1399,1142],"KO":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,7,12,13,13,1,2,6,4,3,13,1,8,4,2,0,0,0,1,1,4,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],"RT":[0.304,0.211,0.108,0.096,0.119,0.101,0.071,0.088,0.085,0.146,0.098,0.093,0.141,0.087,0.082,0.134,0.488,0.141,0.294,0.413,0.116,0.109,0.091,0.191,0.082,0.142,0.104,0.086,0.088,0.149,0.142,0.15,0.146,0.143,0.113,0.114,0.113,0.11,0.11,0.113,0.15,0.176,0.17,0.178,0.118,0.123,0.12,0.129,0.135,0.162,0.111,0.12,0.13,0.111,0.104,0.107,0.105,0.105,0.104,0.102,0.102,0.107,0.097,0.1,0.093,0.112,0.083,0.111,0.086,0.104,0.105,0.114,0.118,0.095,0.115,0.126],"HORAS":["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45"]},"Broker":{"SUMOK":28224,"SUMKO":84,"OK":[71,74,68,78,32,52,39,17,16,11,16,19,1,9,21,17,6,8,1,6,2,69,41,36,59,34,49,37,16,28,42,18,57,75,70,250,413,1222,987,1045,1109,1110,919,926,873,689,876,426,399,529,576,494,531,462,716,681,527,498,475,386,541,619,451,656,608,831,734,791,715,794,1134,1060,334,242,175,225],"KO":[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,1,0,0,0,0,0,0,0,0,0,1,0,0,1,1,2,9,5,0,2,5,0,1,0,0,4,4,2,1,1,5,1,2,3,0,3,3,1,1,0,3,5,2,3,2,1,0,0,0,3,0],"RT":[0.293,0.716,9.363,0.348,0.363,0.272,0.262,0.213,0.397,1.622,1.954,0.391,4.974,0.728,0.362,1.751,0.501,1.809,0.606,1.114,4.113,0.554,0.418,0.332,0.487,0.244,0.544,0.214,0.23,0.295,0.336,0.242,0.457,0.321,0.457,0.452,0.383,0.439,0.431,0.44,0.469,0.448,0.508,0.463,0.398,0.555,0.46,0.362,0.408,0.426,0.368,0.313,0.316,0.263,0.334,0.318,0.298,0.324,0.493,0.301,0.383,0.345,0.34,0.445,0.313,0.38,0.348,0.324,0.402,0.401,0.476,0.41,0.224,0.22,0.184,0.32],"HORAS":["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45"]},"Sistemas Informacion":{"SUMOK":84657,"SUMKO":282,"OK":[19,19,11,0,6,3,0,6,0,0,6,0,3,3,3,0,3,3,3,3,0,6,3,0,3,6,0,10,70,263,420,872,2529,7961,7513,5454,4559,3310,2970,2652,2740,2444,1807,1600,1960,1825,1666,1188,1299,1429,1684,1668,1291,1213,1438,1347,1324,1385,1355,1377,1344,618,450,347,449,690,972,1157,1200,872,1099,972,1049,969,824,913],"KO":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,3,0,2,4,0,1,6,6,0,1,1,12,0,5,3,4,1,22,3,2,4,0,1,0,0,24,101,0,0,2,2,0,1,0,0,2,1,1,33,29,3,1],"RT":[0.437,0.251,0.219,0,2.79,0.3,0,1.323,0,0,1.056,0,1.174,0.659,4.83,0,4.483,4.197,1.64,3.05,0,2.981,0.496,0,0.408,1.601,0,0.662,1.121,1.179,0.325,0.382,0.186,0.222,0.153,0.132,0.133,0.168,0.151,0.15,0.169,0.231,0.16,0.154,0.167,0.182,0.167,0.157,0.152,0.16,0.151,0.192,0.175,0.153,0.199,0.156,0.165,0.158,0.149,0.15,0.136,0.159,0.181,0.205,0.226,0.22,0.253,0.248,0.171,0.212,0.141,0.135,0.153,0.153,0.139,0.152],"HORAS":["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45"]},"Contact Center":{"SUMOK":158998,"SUMKO":216,"OK":[173,44,9,38,63,0,47,6,0,89,19,46,60,11,5,51,2,53,41,13,45,46,11,0,254,65,51,44,9,14,67,52,159,1421,1744,2741,3682,3418,7080,4342,3749,5957,3858,5085,4840,5412,5017,3080,3838,5769,5799,5220,4719,4668,4535,3613,4538,4016,3403,3951,3735,3245,2529,2366,2708,2495,2322,2336,2405,2249,2311,4426,2360,1910,2406,2113],"KO":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,4,2,4,2,4,4,7,4,5,15,12,8,3,5,13,14,12,3,5,7,2,9,5,3,4,0,4,6,1,0,3,8,2,1,7,4,2,3,7,4,4],"RT":[0.083,0.128,0.035,0.131,0.085,0,0.174,0.04,0,0.135,0.035,0.134,0.104,0.061,0.642,0.478,0.046,0.135,0.519,0.524,0.129,0.524,0.256,0,0.255,0.08,0.211,0.145,0.066,0.25,0.092,0.146,0.197,0.181,0.176,0.128,0.15,0.134,0.109,0.128,0.113,0.116,0.12,0.114,0.109,0.112,0.101,0.114,0.102,0.181,0.124,0.119,0.101,0.102,0.108,0.106,0.132,0.105,0.111,0.107,0.104,0.1,0.113,0.09,0.091,0.098,0.094,0.098,0.098,0.103,0.085,0.091,0.102,0.084,0.102,0.087],"HORAS":["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45"]},"Cuentas Personales":{"SUMOK":110273,"SUMKO":73,"OK":[173,135,103,98,141,136,150,102,152,136,108,121,164,101,159,137,130,92,128,102,128,141,103,172,134,134,122,122,122,182,160,244,257,345,498,1170,1843,2355,2500,2503,2646,3045,3609,3141,3232,3720,3167,1809,2320,3944,3653,4718,3772,4470,5061,4953,5029,4992,5265,4342,4523,3027,1672,779,373,548,397,476,557,829,1028,519,420,1041,844,549],"KO":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,3,1,4,1,2,1,0,5,0,1,2,4,0,2,1,0,5,2,7,1,2,6,2,3,1,0,2,0,1,2,0,4,0,0,0,1,1,1],"RT":[0.419,0.439,0.481,2.572,0.854,0.831,0.547,0.426,0.424,1.022,1.369,0.541,0.523,0.528,0.596,0.5,0.563,1.319,2.444,0.764,2.516,0.506,0.478,0.431,0.452,0.437,0.407,0.482,0.415,0.453,0.95,0.845,0.51,1.378,0.528,0.436,0.486,0.357,0.454,0.45,0.373,0.363,0.421,0.401,0.36,0.388,0.414,0.399,0.375,0.388,0.387,0.393,0.383,0.372,0.395,0.394,0.426,0.421,0.517,0.398,0.478,0.581,0.372,0.463,0.346,0.423,0.436,0.429,0.306,0.41,0.336,0.483,0.379,0.365,0.408,0.412],"HORAS":["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45"]},"Intervinientes":{"SUMOK":6490,"SUMKO":6,"OK":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,43,79,53,1,251,162,173,265,303,205,342,306,241,482,208,124,170,360,56,294,287,276,354,320,97,140,208,207,114,17,38,4,10,23,6,18,47,18,153,0,16,15,4],"KO":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],"RT":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4.772,1.275,1.027,0.304,0.59,0.327,0.484,0.404,0.361,0.657,0.278,0.264,0.283,0.3,0.284,0.341,0.438,0.283,0.4,0.258,0.312,0.365,0.396,0.336,0.363,1.252,0.377,0.311,0.251,0.827,0.927,2.164,0.388,1.25,0.277,1.239,0.253,1.013,0.639,0,1.085,0.283,0.035],"HORAS":["00:00","00:15","00:30","00:45","01:00","01:15","01:30","01:45","02:00","02:15","02:30","02:45","03:00","03:15","03:30","03:45","04:00","04:15","04:30","04:45","05:00","05:15","05:30","05:45","06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45"]},"T4B":{"OK":142975,"KO":2293},"PCAS":{"OK":176,"KO":20}} 
```

**jQuery 技巧**

```
 var OK = [];
        $.each(value.OK, function(tipo, valor) {
                OK = valor;
        });
        // Now if i return OK, it returns me the values... Same for OK, RT ... 
```

我的问题是，我在 PHP 上遗漏了什么？因为在每个 $datosBS 键上做的伎俩都是代码混乱......

我认为问题在于，例如“OK”，具有带有数字的子数组，而 JSON 不能像“SUMOK”那样识别它，例如，它是纯数字而不是数组......

**完整的查询代码**

```
$.getJSON('test.php?entidad_id=2', function(data) {        
    $.each(data, function(key, value) {
        var pies = {
            name: key,
            type: 'pie',
            data: [],
            center: [100, 80],
            size: 100,
            showInLegend: false,
            dataLabels: {
                enabled: false
            }
        }; 
        var lineas = {
            name: "Valores",
            data: []
        };
        var renderId = "pie-" + key;
        $('#charts').append('<div id="'+ renderId +'" class="pieChart"></div>');
        lineas.data.push(value.OK); // <------ THIS ISN'T WORKING, EVEN IF I DO ([value.OK])
        var OK = [];
        $.each(value.OK, function(tipo, valor) {
                  OK = valor;
        });
        lineas.data.push(OK); // <----- THIS IS WORKING
        pies.data.push(["OK", value.SUMOK], ["KO", value.SUMKO]);
        if(key == "CAM") {
            pies.data.push(["REJ_OTHERS", value.REJ_OTHERS]);
            pies.data.push(["REJ_FORMAT", value.REJ_FORMAT]);
            pies.data.push(["PENDING", value.PENDING]);
        }
        options.series.push(pies, lineas);
        options.chart.renderTo = renderId;
        options.title.text = key;
        var chart = new Highcharts.Chart(options);
        pies.data = null; lineas.data = null;
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:26:16.173

好的，折线图中的数据是 2 个值`[x, y]`，所以数据数组就像：`[[x1, y1], [x2, y2]]`，`[[1, 2, 3, 4, 5]]`在折线图上没有意义。

如果您只想拥有跨`x`轴的索引和沿`y`轴的值，那么您可以构建您的数组，如：

```
$.each(value.OK, function(i, v) {
    lineas.data.push([i, v]);
}); 
```

并摆脱：

```
lineas.data.push(value.OK); // <------ THIS ISN'T WORKING, EVEN IF I DO ([value.OK])
var OK = [];
$.each(value.OK, function(tipo, valor) {
    OK = valor;
});
lineas.data.push(OK); // <----- THIS IS WORKING 
```

但是在不知道每个数据点`OK`对应什么的情况下，这是我得到的最好的。

这是一些工作代码的[jsFiddle](http://jsfiddle.net/Urd4V/)。

希望这可以帮助！

**编辑**

看起来`HORAS`可能是与`OK`元素对应的时间，如果是这种情况，您可以这样做：

```
$.each(value.OK, function(i, v) {
    lineas.data.push([value.HORAS[i], v]);
}); 
```

# c - 正则表达式库错误

> ID：14385415
> 
> 赞同：2
> 
> 时间：2013-01-17T18:10:32.230
> 
> 标签：c

我使用 T-Rex 正则表达式库将输入的字符串验证为以下正则表达式

```
(“(([A-PR-UWYZ][A-HK-Y]{0,1}[0-9]{1,2}[ABCEHMNPRTVWXY]{0,1}|GIR)\s{0,2}([0-9][ABD-HJLN-UW-Z]{2}))”) 
```

`"A11AA"`但是应该传递这样的字符串会失败。你可以帮帮我吗 ？

[您可以在http://sourceforge.net/projects/tiny-rex/](http://sourceforge.net/projects/tiny-rex/)中找到 T-Rex 源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:57:03.823

一个猜测，出乎意料：

```
#include "trex.h"
#include <stdio.h>
#include <string.h>

#ifdef _UNICODE
#define trex_sprintf swprintf
#else
#define trex_sprintf sprintf
#endif

int main(int argc, char* argv[])
{
    const TRexChar *begin,*end;
    TRexChar sTemp[200];
    const TRexChar *error = NULL;
    TRex *x = trex_compile(_TREXC(

  "("
    "("
      "("
        "[A-P]|[R-U]|[WYZ]"
      ")"
      "("
        "[A-H]|[K-Y]"
      ")?"

      "[0-9]{1,2}"

      "([ABCEHMNPRTVWXY]?|GIR)"
     ")"

     "\\s{0,2}"
     "("
       "[0-9]"
       "("
        "[AB]|[D-H]|[JL]|[N-U]|[W-Z]"
       "){2}"
     ")"
   ")"),&error);

    if(x) {
        trex_sprintf(sTemp,_TREXC("A11AA"));
        if(trex_search(x,sTemp,&begin,&end))
        {
            int i,n = trex_getsubexpcount(x);
            TRexMatch match;
            for(i = 0; i < n; i++)
            {
                TRexChar t[200];
                trex_getsubexp(x,i,&match);
                trex_sprintf(t,_TREXC("[%%d]%%.%ds\n"),match.len);
                trex_printf(t,i,match.begin);
            }
            trex_printf(_TREXC("match! %d sub matches\n"),trex_getsubexpcount(x));
        }
        else {
            trex_printf(_TREXC("no match!\n"));
        }
        trex_free(x);
    }
    else {
        trex_printf(_TREXC("compilation error [%s]!\n"),error?error:_TREXC("undefined"));
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T02:29:55.407

通常，在调用“Bug！”之前，您必须检查三次。在编译器、库或其他工具上（开发人员大概知道他们在做什么，并测试他们的东西）。此外，你可能会在公共场合让自己难堪 ;-)

AFAICS，您的“A11AA”字符串与给定的表达式不匹配，之后需要一些进一步的东西。

尝试更简单的表达式，匹配字符串的一部分并进行处理。检查表达式的确切含义（不同工具的语言完全不同）。

# c# - 具有异步处理的服务器实现

> ID：14385417
> 
> 赞同：0
> 
> 时间：2013-01-17T18:10:42.677
> 
> 标签：c#, .net, c#-4.0, asynchronous, task-parallel-library

这是场景：

有客户端向服务器发送请求（它将是套接字或 wcf 服务器，这并不重要）。

服务器将保持一个开放的双工通道，并将使用它来向客户端发送答案（序列化数据）。服务器将处理请求并涉及查询生成（基于请求的参数）和针对各种类型的数据源（sql server、文件系统、分析服务服务器 - olaps、离线多维数据集等）的执行。如此繁重的 IO 绑定任务 - 肯定经常长时间运行。

性能很重要，同时考虑成百上千个请求。它必须是可扩展的。

我从未使用过 TPL，也从未编写过异步服务器。但是这几天我读了很多书，但......仍然无法理解它。

1.  TPL（4.0，而不是 4.5）在这里是一个不错的选择吗？
2.  我应该为到达服务器的每个请求创建 tpl 任务吗？（用于异步处理）
3.  我应该使用 LongRunning 选项创建这些任务吗？（所以不涉及线程池）
4.  我应该为请求实现任何队列机制吗？如何？
5.  我应该将请求处理的所有部分（a. 查询生成 b. 针对数据源的查询执行）与单独的任务（延续）链接起来，还是可以对两者使用单个任务 a. 和b.？
6.  我应该使用 .FromAsync 任务生成来执行查询吗？还是标准的 .StartNew 就足够了？
7.  考虑到上述要求，我还应该注意哪些其他重要方面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:53:32.687

关于这个话题已经有很多讨论......例如，请参阅[https://stackoverflow.com/a/908766/1876226 。](https://stackoverflow.com/a/908766/1876226)那里提到了 Chris Mullins 的帖子，但这些帖子都丢失了。我有一个指向某个网络档案的链接，该档案有一个帖子的缓存版本，我会寻找它。

更新：找到了 Chris Mullins 帖子的注释：

> 我们在一些使用 HUGE IA64 服务器的实验室中进行了相当多的可扩展性测试。其结果以及我们提出的一些最佳实践详见： [http ://www.coversant.net/Default.aspx?tabid=88&EntryID=10](http://www.coversant.net/Default.aspx?tabid=88&EntryID=10)

在此处查看存档副本：http: [//nleghari.wetpaint.com/page/Windows+Sockets+and+Threading%3A+How+well+does+it+scale%3F](http://nleghari.wetpaint.com/page/Windows+Sockets+and+Threading%3A+How+well+does+it+scale%3F)

我仍在为我正在开发的类似应用程序而努力。到目前为止，我想到的要点是：

*   `Socket`异步操作（Begin*、End*、*Async）使用 IOCP；
*   TPL 是实现多线程的一种直接且健壮的方式；
*   如果你想要异步 - 那么你应该创建一个任务来处理请求。也许除了“已知”是轻量级的请求之外；
*   如果您使用 创建 LongRunning 任务`hundreds or maybe thousands of requests at the same time`，那么您可能会获得使系统崩溃的线程数。需要时使用 LongRunning。使用自定义`TaskScheduler`进行并发控制；
*   队列将不可避免地出现在您的代码中：要么用于批处理作业以避免过度锁定和上下文切换，要么用于生产者-消费者场景；
*   某些资源（SQL Server、文件系统...）具有也使用 IOCP 的异步 API。有些资源没有。在前一种情况下，.FromAsync 将有效地使用 IOCP。但请注意，IOCP 线程池也不是无限的：它可能会被数据库查询和网络服务耗尽；
*   `MemoryCache`如果可能 - 通过实现应用内缓存（.NET或自定义）或批处理不需要响应的数据库请求（例如，进行批量插入）来完全避免数据库访问；
*   有一个[ParallelExtensionsExtras](http://code.msdn.microsoft.com/ParExtSamples)开源库，它部分成为 .NET 4.5 Async 的一部分。因此，您可以在 .NET 4.0 中拥有 neet TPL 扩展。See tour [A Tour of ParallelExtensionsExtras](http://blogs.msdn.com/b/pfxteam/archive/2010/04/04/9990342.aspx)

c# 异步套接字服务器有很多幼稚和错误的实现。阅读，但重新检查。

# css - 为什么 CSS3 动画不能在默认为无的轮廓上工作？

> ID：14385422
> 
> 赞同：2
> 
> 时间：2013-01-17T18:11:05.570
> 
> 标签：css, css-transitions, css-animations, outline

我已经到了这一点，我试图在一个我不能移动或修改其边界的元素上做一个 hilite 动画，所以我除了背景颜色之外还使用了一个轮廓来使动画区域大于元素本身（这是一个示例）：

```
@keyframes hilite {
    0% {
        background-color: transparent;
        outline: #ffffff solid 10px;
    }
    20% {
        background-color: #F6F6BC;
        outline: #F6F6BC solid 10px;
    }
    100% {
        background-color: transparent;
        outline: #ffffff solid 10px;
    }
} 
```

但是现在我看到背景动画在每种情况下都会触发，但轮廓动画仅在元素具有轮廓样式值时才起作用（无不起作用，当背景无不避免动画时）。

你可以[在这里](http://jsfiddle.net/jKnbn/1/)看到它。

我不想修复它，它已经修复了，但理解它 - 对我来说似乎不合逻辑。

提前非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T19:33:05.883

边框和轮廓样式不能动画；这是[设计使然](http://www.w3.org/TR/css3-transitions/#animatable-css)。当您尝试对从`none`到的更改进行动画处理时`solid`，如小提琴中的最后一个框所示，会发生什么情况是它会`solid` *立即*切换到，这会导致它在动画到定义的颜色之前暂时显示为黑色轮廓，所以它不会从这个意义上说，实际上并没有从没有轮廓到实体轮廓的*动画。*

如果您需要从不可见轮廓到可见轮廓的平滑动画，请`outline-color`在颜色值之间设置动画，`transparent`而不是在and`outline-style`之间。我看到您正在使用代替，只要容器的背景也是白色的，它也可以工作。`solid``none``#ffffff``transparent`

# php - 2 在具有子文件夹的同一台服务器上安装 Codeigniter

> ID：14385423
> 
> 赞同：2
> 
> 时间：2013-01-17T18:11:06.327
> 
> 标签：php, .htaccess, codeigniter

## 我有以下情况：

Codeigniter网站（我们称之为**WebA**）安装在 sebserver “/” 的根目录下，可从域访问：www.example.com。

另一个 Codeigniter 网站（我们称之为**WebB**）安装在同一网络服务器中的子文件夹“/subfolder”中，可从域访问：www.example2.com。

我有 2 个删除 index.php 的 .htacces 文件，安装在 WebA 和 WebB 上：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} (auth|register|secure)
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301]

RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !(static|auth|register|secure)
RewriteRule ^(.*)$ http://%{SERVER_NAME}%{REQUEST_URI} [R=301]

</IfModule>

<IfModule !mod_rewrite.c>
# If we don't have mod_rewrite installed, all 404's
# can be sent to index.php, and everything works as normal.
# Submitted by: ElliotHaughin

ErrorDocument 404 /index.php
</IfModule>

AddType application/vnd.ms-fontobject .eot
AddType application/octet-stream .otf .ttf 
```

我在 /application/config/config.php 中的 WebA 上进行了配置：

```
$config['base_url'] = 'http://example.com/'; 
```

在 /subfolder/application/config/config.php 中的 WebB 中：

```
$config['base_url'] = 'http://example2.com/'; 
```

## 错误一：

使用此配置，当我访问 www.example2.com 时，我得到：

404页面不存在

## 错误2：

如果我将 WebB 的 .htaccess RewriteBase 行更改为：

```
RewriteBase /subfolder/ 
```

我在索引“http://example2.com/”中输出了 html，但它不会加载我的任何 JS 或 CSS，因为它不是加载脚本而是加载它：

```
<h4>A PHP Error was encountered</h4>

<p>Severity: Notice</p>
<p>Message:  Trying to get property of non-object</p>
<p>Filename: controllers/html.php</p>
<p>Line Number: 60</p>

</div><div style="border:1px solid #990000;padding-left:20px;margin:0 0 10px 0;">

<h4>A PHP Error was encountered</h4>

<p>Severity: Warning</p>
<p>Message:  Cannot modify header information - headers already sent by (output started at /var/www/subfolder/system/core/Exceptions.php:185)</p>
<p>Filename: helpers/url_helper.php</p>
<p>Line Number: 546</p>

</div> 
```

它在尝试导航页面时也会输出此错误，但我没有得到 Html。

第一个错误似乎是由于配置错误，我的数据库模型无法正常工作。

## 错误 3：

如果我将 WebB 的 config.php 更改为：

```
$config['base_url'] = 'http://example.com/subfolder/'; 
```

.htaccess 中的 WebB 的 RewriteBase 行：

```
RewriteBase /subfolder/ 
```

当通过 www.example.com/subfolder/ 和 www.example2.com 访问时，它工作正常，但问题是 WebB 的链接，我需要它们作为 www.example2.com 而不是 www.example.com/子文件夹/

WebA 一直在工作。

我在多个网站上使用相同的代码没有任何问题，但我以前从未遇到过这种情况。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:56:18.370

在您的安装中使用虚拟主机可以使您免于配置 .htaccess 的痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:15:24.983

好的，所以我终于得到了这个工作，我做了什么：

我要求我的系统管理员按照[Hicham LEMGHARI](https://stackoverflow.com/users/1760291/hicham-lemghari)的建议更改所有网站以使用 Virtualhosts ，但我不知道他是否正确，因为我仍然在 WebB 上遇到错误：

安装在 /var/www/subfolderA 中的 WebA

WebB 安装在 /var/www/subfolderB

## 网络A

WebA 的 htaccess 文件将 RewriteBase 行配置为：

```
RewriteBase /subfolderA/ 
```

和config.php：

```
$config['base_url'] = 'http://example.com/'; 
```

## 网络B

WebB 的 htacces 文件完全变成了这 4 行：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

和 config.php 到：

```
$config['base_url'] = 'http://example2.com/'; 
```

# drupal - Drupal 6：如何翻译 Ubercart 结帐窗格中的配置文件字段？

> ID：14385427
> 
> 赞同：0
> 
> 时间：2013-01-17T18:11:13.690
> 
> 标签：drupal, ubercart

我想知道如何翻译结帐窗格中包含的配置文件字段。我正在使用 drupal 6 和 Ubercart。

最奇怪的是我启用了国际化模块并翻译了配置文件字段。这些在我的用户的编辑配置文件（user/id/edit）中显示为已翻译。结帐窗格仍显示原始文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:16:24.693

为这些字段输入翻译是行不通的。您需要下载并导入适合您需求的 Ubercart 翻译包 - [http://localize.drupal.org/translate/downloads?project=ubercart](http://localize.drupal.org/translate/downloads?project=ubercart)

# ember.js - 在 ember v2 路由器中，为什么 controllerFor() 不提供对该控制器的引用？

> ID：14385429
> 
> 赞同：2
> 
> 时间：2013-01-17T18:11:18.647
> 
> 标签：ember.js, ember-router

这是小提琴。

[http://jsfiddle.net/inconduit/hf7XM/10/](http://jsfiddle.net/inconduit/hf7XM/10/)

重现问题的步骤：

*   点击“转到帖子”。
*   单击“controllerFor”文本，它不会清除列表。
*   单击全局参考文本，它将清除列表。

似乎返回的控制器引用`controllerFor()`实际上不是`PostsIndexController`? 这是为什么？

我在`setupController()`Route 的挂钩中对其进行了破解，以便在 App 上设置对该控制器的全局引用，当我将该引用上的内容设置为 in 中的新数组时`emptyList2()`，该列表在模板中正确清除。

我用`controllerFor()`错了吗？还是误解了它返回的内容？这是范围界定问题吗？请帮帮我。

```
App.PostsIndexRoute = Ember.Route.extend({
  setupController : function(controller,model) {
    controller.set('content',['one','two','three']);
    App.postsIndexController = controller;
  }
});

// receives the {{action}} from the template
App.PostsController = Ember.Controller.extend({
  emptyList : function() {
    this.controllerFor('postsIndex').set('content',Ember.A());
  },
  emptyList2 : function() {
    App.postsIndexController.set('content',Ember.A());
  }  
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T20:23:21.667

tldr：替换`controllerFor('postsIndex')`为`controllerFor('posts.index')`

* * *

emptyList2 fx 正在工作，因为您将`App.postsIndexController`常量设置为任何控制器实例被传递给`setupController`.

我认为比如何解决这个问题更重要的是如何调试这些问题。这是我所做的：

在运行 JS 小提琴时打开了 JS 控制台。单击帖子链接后但在尝试清空列表之前，我运行了以下命令：

```
Em.keys(App.__container__.cache.dict)
["application:main", "router:main", "route:application", "route:index", "controller:application", "template:application", "controller:index", "template:index", "route:posts", "route:posts.index", "controller:posts", "template:posts", "controller:posts.index", "template:posts.index"] 
```

然后点击emptyList动作后，再试一次：

```
Em.keys(App.__container__.cache.dict)
["application:main", "router:main", "route:application", "route:index", "controller:application", "template:application", "controller:index", "template:index", "route:posts", "route:posts.index", "controller:posts", "template:posts", "controller:posts.index", "template:posts.index", "controller:postsIndex"] 
```

看看现在有 2 个 App.PostsIndexController 的缓存实例：controller:postsIndex 和 controller:posts.index

然后我在 jsFiddle 中添加了一些 console.logs 来查看引用了哪些实例。从那里很容易进行修复。由于 Ember 为每个对象添加了一个 toString() 方法，因此很容易看到发生了什么。例如：

```
controllerFor("postsIndex").toString()
<App.PostsIndexController:ember218> 
```

Updated fiddle here: [http://jsfiddle.net/mgrassotti/Aa2WX/2/](http://jsfiddle.net/mgrassotti/Aa2WX/2/)

# java - 内部类共享属性信息

> ID：14385430
> 
> 赞同：0
> 
> 时间：2013-01-17T18:11:19.377
> 
> 标签：java, java-7

我有一个名为**ContentStream**的类......问题是内部类**AddRectancle**假设获取类 GraphicBeginn 的**吸气****剂**的信息......我认为**ContentStream**类至少可以到达吸气剂，因为吸气剂是公共的...... .请告诉我怎么做

 ****```
public class ContentStreamExt extends ContentStreamProcessor

{

private Matrix  graphicalMatrix;

public ContentStreamProcessorExt(ExtListener extListener)
{
    super(extListener);
}

private void enhanceAdditional()
{
    GraphicBeginn beginnGraphic = new GraphicBeginn();

    super.register("a", beginnGraphic);
    super.register("b", new AddRectangle(beginnGraphic));
}

private static class AddRectangle(GrapicBeginn beginn)
{
    // should get the info of uUx and uUy 
}

private static class GraphicBeginn implements ContentOperator
{
    private float   uUx;
    private float   uUy;

    public float getuUx()
    {
        return this.uUx;
    }

    public float getuUy()
    {
        return this.uUy;
    }
..... // the input for uUx and uuy will be created in a method 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:16:45.387

如果我正确理解了您的问题，则应向 add rectangle 类传递一个图形开始实例，在该实例上它可以调用公共吸气剂。这种连接可以通过内容流类来完成。

顺便说一句，以下在语法上是无效的

```
private static class AddRectangle(GrapicBeginn beginn) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:40:18.163

您提供的代码存在许多问题，正如另一位海报所指出的那样，它无法正确编译。您似乎还提供了一个方法签名，同时还声明了一个名为“AddRectange”的类。这是一个类还是一个方法？你需要决定哪个，它不能两者兼而有之。这是一个示例，我认为从一般意义上说明了您要尝试做的事情：

```
public class SampleClass {

public SampleClass() {
}

private void sampleClassMethod() {
    A a = new A();
    a.acceptB(new B());
}

private class A {
    public void acceptB(B bObject) {
        System.out.println(bObject.memberVar1);
    }

}

private class B {
    private int memberVar1 = 5;
}

} 
```****

# wpf - 可观察集合 绑定到 ListView，但关系字段不会导致 ListView 更新

> ID：14385432
> 
> 赞同：0
> 
> 时间：2013-01-17T18:11:29.503
> 
> 标签：wpf, entity-framework, data-binding, properties, observablecollection

我有一个`ObservableCollection`实体框架 4 实体绑定到一个`ListView`. 如果我修改实体的任何正常的标量属性，则显示的值会`ListView`更新。

任何关系（导航）属性在`ListView`更改时都不会更新，因为实体对象不会为这些属性实现更改通知。

现在，我正在从集合中删除实体，然后将其重新插入到同一位置以强制`ListView`更新。

必须有更好的解决方案。它是什么，如果它存在的话？

这是 VS2010 的 EF 设计器生成的代码：

```
[EdmEntityTypeAttribute(NamespaceName="RovingAuditDb", Name="AuditRecord")]
[Serializable()]
[DataContractAttribute(IsReference=true)]
public partial class AuditRecord : EntityObject
{
    #region Factory Method

    /// <summary>
    /// Create a new AuditRecord object.
    /// </summary>
    /// <param name="id">Initial value of the Id property.</param>
    /// <param name="date">Initial value of the Date property.</param>
    public static AuditRecord CreateAuditRecord(global::System.Int32 id, global::System.DateTime date)
    {
        AuditRecord auditRecord = new AuditRecord();
        auditRecord.Id = id;
        auditRecord.Date = date;
        return auditRecord;
    }

    #endregion
    #region Primitive Properties
    // Deleted for this post
    #endregion

    #region Navigation Properties

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [XmlIgnoreAttribute()]
    [SoapIgnoreAttribute()]
    [DataMemberAttribute()]
    [EdmRelationshipNavigationPropertyAttribute("RovingAuditDb", "AuditRecordCell", "Cell")]
    public Cell Cell
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<Cell>("RovingAuditDb.AuditRecordCell", "Cell").Value;
        }
        set
        {
            ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<Cell>("RovingAuditDb.AuditRecordCell", "Cell").Value = value;
        }
    }
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [BrowsableAttribute(false)]
    [DataMemberAttribute()]
    public EntityReference<Cell> CellReference
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<Cell>("RovingAuditDb.AuditRecordCell", "Cell");
        }
        set
        {
            if ((value != null))
            {
                ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedReference<Cell>("RovingAuditDb.AuditRecordCell", "Cell", value);
            }
        }
    }
    // Rest of the Navigation properties removed for this post 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:13:27.253

这些实体不适用于基于`INotifyPropertyChanged`. 我建议您看一下[Self Tracking Entities](http://msdn.microsoft.com/en-us/library/vstudio/ff407090%28v=vs.100%29.aspx)，它最适合在客户端/服务器类型的 WPF 应用程序中使用。

# a-star - 所有 TSP 算法都会给出相同的最优路径吗？

> ID：14385433
> 
> 赞同：0
> 
> 时间：2013-01-17T18:11:31.600
> 
> 标签：a-star, traveling-salesman, branch-and-bound

我只是想知道 TSP 的所有算法是否都会给出相同的最佳路线？我认为会是这种情况，但我实现了分支和绑定以及 A*，它们都对相同的输入给出了非常不同的结果，我只是想知道这是否正常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:13:34.570

我的路线不同，但所有最佳解决方案的成本应该是相同的。

如果您的 A* 解决方案更昂贵，则说明您的启发式方法是错误的。查看[wikipedia A* algorithm](http://en.wikipedia.org/wiki/A%2a_search_algorithm)以证明它总能找到最佳解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:14:12.920

不会。如果存在不止一条最优路径，不同的算法不一定会找到相同的路径。这将取决于实现，我假设它还取决于您如何标记图形，因此不同的标记将使相同的算法找到不同的路线。

# visual-studio-2012 - WIX“系统找不到文件”当它真的存在时

> ID：14385438
> 
> 赞同：1
> 
> 时间：2013-01-17T18:11:44.687
> 
> 标签：visual-studio-2012, wix

所以我正在尝试构建一个 Wix 安装程序。我收到以下错误。

```
Error   1   The system cannot find the file 'C:\Plastic\W2\AktionTLW2\AktionTLW2\bin\Debug\Templates\Federal.xml)'. 
```

相关代码是

```
<File Source="$(var.AktionTLW2.TargetDir)Templates\Federal.xml)"  /> 
```

当我将其更改为显式路径时，它不会给我一个错误：

```
<File Source="C:\Plastic\W2\AktionTLW2\AktionTLW2\bin\Debug\Templates\Federal.xml"/> 
```

请注意，显式路径和错误消息中的路径是相同的路径。那么为什么第一个不起作用呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T18:53:19.217

错误消息路径的末尾有一个括号。也许这就是导致错误的原因，请查看您的配置文件并删除括号。

# c# - .net 中的 AutoClass 是什么？

> ID：14385441
> 
> 赞同：8
> 
> 时间：2013-01-17T18:12:08.073
> 
> 标签：c#, .net, reflection, types, autoclass

我正在阅读[Inside C#](https://rads.stackoverflow.com/amzn/click/com/0735612889)，我偶然发现了[`Type.IsAutoClass`](http://msdn.microsoft.com/en-in/library/system.type.isautoclass.aspx)。

文件说

> 如果为 Type 选择了字符串格式属性 AutoClass，则为 true；否则为假。

问题是什么是什么`AutoClass`以及它如何影响 a `Type`？

**请注意**，这是一个学术问题，在我与之相关的项目中（据我所知）没有实际用途。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T18:15:39.080

它是[`TypeAttributes`](http://msdn.microsoft.com/en-in/library/system.reflection.typeattributes.aspx)枚举的一部分：

> AutoClass - LPTSTR 被自动解释。

以及备注：

> 此枚举器类的成员与 corhdr.h 文件中定义的 CorTypeAttr 枚举器匹配。

因此，这用于互操作，用于解释字符串常量的方式。

顺便说一句[-LPTSTR](https://stackoverflow.com/questions/321413/lpcstr-lpctstr-and-lptstr)。

# java - Java：在不编译的情况下检查错误

> ID：14385442
> 
> 赞同：4
> 
> 时间：2013-01-17T18:12:11.517
> 
> 标签：java, compiler-errors

一些大型 Java 项目可能需要很长时间才能编译。例如，20 分钟或更长时间。显然，在这种规模的项目中，您不希望构建在 18 分钟后因缺少分号而失败。

findbugs 或其他工具之类的实用程序会为您捕获编译错误，而无需花费时间进行编译吗？

提前感谢无论哪种方式

史蒂夫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T18:14:12.940

我会使用 IDE。这将在您键入错误时向您显示错误，甚至为它们提供自动修复。它们还支持增量编译，因此只有受更改影响的文件需要重新编译。

AFAIK 大多数 IDE 支持 ant 和 maven 构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:20:02.383

只需使用 IDE 之类的`Eclipse`. 这会在您键入时即时编译/检查语法。在 oyur 情况下需要 20 分钟的生产仍然保持不变（例如 Ant 或 MAven 构建）

# django - django select_related 用于多个外键

> ID：14385445
> 
> 赞同：13
> 
> 时间：2013-01-17T18:12:28.830
> 
> 标签：django, django-select-related

select_related 如何与具有多个外键的模型一起使用？它只是选择第一个吗？

类模型：fkey1、fkey2、fkey3...

文档没有说明这一点，至少没有在指定方法的地方说明。

注意：也许我是唯一会感到困惑的人。我猜 select_related 只是一个性能提升器（我可以看到），但我错误地认为它是别的东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-12-24T04:09:51.680

您可以`select_related`在**链**中使用如下

```
Comment.objects.select_related('user').select_related('article').all() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T18:25:32.003

相反，文件对此事非常清楚。它说默认情况下所有 ForeignKeys 都被遵循，但你可以给方法一个字段列表，它只会遵循这些关系。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-11-10T20:40:06.173

如果您的模型有多个外键，您可以：

*   Call `.select_related()`，它将“遵循”**所有** *非空*外键关系
*   Call `.select_related('foreign_key1', 'foreign_key2', ...)`，它只会“跟随”作为参数提供的外键。

请注意，“遵循 FK 关系”意味着在执行查询时（通过执行 SQL 连接）选择其他相关对象数据。这将使主查询*更重*，但可以用来避免[N+1 查询问题](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem-in-orm-object-relational-mapping)。

根据[`select_related`文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)，不推荐使用第一种方法（不带参数），因为*“它可能会使底层查询更复杂，并返回比实际需要更多的数据”。*

* * *

如果您的模型具有与其他模型（即`Book <>-- Author <>-- Hometown`）“嵌套”的外键，您也可以使用`select_related`如下：

*   调用`Book.select_related('author__hometown')`，它将“跟随”作者的外键（在 Book 模型中）和家乡的外键（在 Author 模型中）。

* * *

如果您的模型具有您想从数据库中检索的多对多或多对一关系，您应该查看[prefetch_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.prefetch_related)。

# c# - 如何在asp.net中编辑一行？

> ID：14385449
> 
> 赞同：0
> 
> 时间：2013-01-17T18:12:35.393
> 
> 标签：c#, asp.net

我有显示在页面上的记录，并且每行的最右侧都有一个小的“编辑”图标。

因此，当我单击图标时，我希望用户编辑“选定”行。

现在，我正在生成代码背后的记录和图像！所以我没有使用它生成一个html代码的控件然后我做这样的事情

```
output.InnerHTML = generatedCode; 
```

问题，我如何创建一个函数来确定单击了哪个图标以及该图标的 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:16:50.020

如果您对表格执行此操作，则必须为每个行编辑链接生成一些唯一的 ID，以便您可以识别必须编辑的行。除此之外，还有很多简单的方法可以在 asp.net 中显示记录，即`GridView`

# html - 在 pre 元素内时可以让 HTML span 元素自动换行吗？

> ID：14385453
> 
> 赞同：3
> 
> 时间：2013-01-17T18:12:54.170
> 
> 标签：html, css, absolute

我有一个问题，我有定位的`span`元素`absolute`（它们是标注）。它们通常是单行，但有时需要换行。这很好用。我设置了一个宽度，它们会自动换行。***除非***它们在一个`pre`元素内。

这是一个[显示上述内容的 jsfiddle](http://jsfiddle.net/4bWDx/)。我尝试将 to 更改`display`为`block`or `inline-block`。我试过设置`word-wrap`为`break-word`. 似乎没有任何效果。

我可以尝试将其更改`span`为 a `div`，我想这在语义上也很有意义......但这需要比我现在通过我的应用程序处理更多的时间。

我对仅适用于最新浏览器的 html5 或 css3 解决方案非常满意。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T18:20:21.817

您只需将以下内容添加到您的 CSS

```
pre{
  white-space:pre-wrap;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T18:19:39.057

如果您不想预先格式化您的，请为该元素`pre`添加到您的 CSS 中。`white-space: normal;`

[https://developer.mozilla.org/en-US/docs/CSS/white-space](https://developer.mozilla.org/en-US/docs/CSS/white-space)

[http://jsfiddle.net/mblase75/4bWDx/6/](http://jsfiddle.net/mblase75/4bWDx/6/)

`white-space: pre-wrap`给出不同的结果，这可能是也可能不是您在应用程序中真正想要的。[http://jsfiddle.net/mblase75/4bWDx/9/](http://jsfiddle.net/mblase75/4bWDx/9/) -- 试试看你喜欢什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-16T08:41:40.563

试过这个：

```
white-space:pre; 
```

为我工作

# c# - 如何用一对以上的括号分割字符串

> ID：14385455
> 
> 赞同：1
> 
> 时间：2013-01-17T18:13:05.920
> 
> 标签：c#, regex, string, split

我尝试拆分字符串，例如：

```
((12-5=10)&&(5-4>6)) 
```

到：

*   (
*   (12-5=10)
*   &&
*   (5-4>6)
*   )

我尝试使用正则表达式，但 serach 的结果与一对括号有关，我找不到解决问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:18:01.807

如果您想手动执行此操作，而不是尝试使用正则表达式，请想象一次解析字符串一个字符，并在匹配的大括号处递归拆分。

伪代码：

```
initialize depth and start to 0
for each character  
  if it is ( increase depth
  if it is ) 
     decrease depth
     if depth is 0
         parse the substring from start to current character
         set start to current character 
```

如果不需要手动执行，则使用一些外部包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T07:21:10.487

猜猜你可以使用这样的东西。至于插入部分，我知道它有点蹩脚：/

```
 string test = "((12-5=10)&&(5-4>6))";
        string[] Arr= test.Split(new string[{"(",")"},StringSplitOptions.RemoveEmptyEntries);
        List<string> newArr = new List<string>();
         int h=0;
        foreach (string s in Arr)           
        { 
            if (s != "&&")
                newArr.Add( s.Replace(s, "(" + s + ")"));
            else 
                newArr.Add(s);
            h++;
        }
        newArr.Insert(0, "(");
        newArr.Insert(newArr.Count , ")"); 
```

# java - 使用 Drools 执行响应式规则

> ID：14385456
> 
> 赞同：2
> 
> 时间：2013-01-17T18:13:13.140
> 
> 标签：java, drools

*（我对使用 Drools 有点陌生，所以如果这是一个简单的问题，请原谅）。*

我想使用 Drools 来响应式执行规则，这意味着我们可以将插入的“事实”视为“事件”实例。但是，我希望它以在收到事件后立即触发规则的方式执行。但是，如果一个规则可能依赖于多个事件，我如何配置工作记忆，以记住以前的事件。考虑一个非常简单的例子：

假设我有以下规则：

```
 - when (E1) do A1
 - when (E2) do A2
 - when (E1,E2) do A3 
```

然后，如果时间进展如下，我想遵循要被解雇的规则，例如：

```
 - t=1 , E1 happens => A1 fired
 - t=2 , E2 happens => A2 fired + A3 fired 
```

我遇到的问题是，如果我`ksession.fireAllRules()`在每次插入后调用，工作记忆就会忘记所有以前的事件。实现我想要的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:36:39.550

只要您使用有[状态知识会话](http://docs.jboss.org/drools/release/5.5.0.Final/drools-expert-docs/html/ch02.html#d0e737)，您可能正在做的事情是因为无状态知识会话没有 fireAllRules() 方法，WM*不会*忘记所有插入的事实。

您所说的“E1 发生”应该是 ksession.insert(E1);

您可以使用文档中给出的示例（上面的链接）...

# javascript - Content dependent drop down menu? (square one)

> ID：14385458
> 
> 赞同：-1
> 
> 时间：2013-01-17T18:13:17.057
> 
> 标签：javascript, html, css, drop-down-menu

I am trying to create three drop down menus (a list of activity choices), for a person to show top three preferences. I would like to have the second and third menus automatically remove the previously selected choices as options. I have only programmed in the three identical drop down menus:

```
<div id="satellites">
<p><b>Satellite Choices</b><br />
List your first, second, and third choices.  You will be given your first choice if it is not full.  ALL events have limited capacity. If you do not choose a satellite, one will be assigned for you.<br />
<label>First Choice*: </label><select name="satellite1 id="firstchoice" required="required""><br />
<option value="art"/>Art</option><br />
<option value="basketball"/>Basketball</option><br />
<option value="dance"/>Dance</option><br />
<option value="drama"/>Drama</option><br />
<option value="missions"/>Missions</option><br />
<option value="photo1"/>Beginning Photography</option><br />
<option value="photo2"/>Advanced Photography</option><br />
<option value="rock_climbing"/>Rock Climbing</option><br />
<option value="scrap-booking"/>Scrap-Booking</option><br />
<option value="sgjr"/>Summer Games Jr. Training</option><br />
<option value="soccer"/>Soccer</option><br />
<option value="technology"/>Technology</option><br />
<option value="ultimate"/>Ultimate Frisbee</option><br />
<option value="video_games"/>Video Games</option><br />
<option value="volleyball"/>Volleyball</option><br />
<option value="water_park"/>Water Park</option><br />
</select><br /><br />

<label>Second Choice*: </label><select name="satellite2" id="secondchoice" required="required"><br />
<option value="art"/>Art</option><br />
<option value="basketball"/>Basketball</option><br />
<option value="dance"/>Dance</option><br />
<option value="drama"/>Drama</option><br />
<option value="missions"/>Missions</option><br />
<option value="photo1"/>Beginning Photography</option><br />
<option value="photo2"/>Advanced Photography</option><br />
<option value="rock_climbing"/>Rock Climbing</option><br />
<option value="scrap-booking"/>Scrap-Booking</option><br />
<option value="sgjr"/>Summer Games Jr. Training</option><br />
<option value="soccer"/>Soccer</option><br />
<option value="technology"/>Technology</option><br />
<option value="ultimate"/>Ultimate Frisbee</option><br />
<option value="video_games"/>Video Games</option><br />
<option value="volleyball"/>Volleyball</option><br />
<option value="water_park"/>Water Park</option><br />
</select><br /><br />

<label>Third Choice*: </label><select name="satellite3" id="thirdchoice" required="required"><br />
<option value="art"/>Art</option><br />
<option value="basketball"/>Basketball</option><br />
<option value="dance"/>Dance</option><br />
<option value="drama"/>Drama</option><br />
<option value="missions"/>Missions</option><br />
<option value="photo1"/>Beginning Photography</option><br />
<option value="photo2"/>Advanced Photography</option><br />
<option value="rock_climbing"/>Rock Climbing</option><br />
<option value="scrap-booking"/>Scrap-Booking</option><br />
<option value="sgjr"/>Summer Games Jr. Training</option><br />
<option value="soccer"/>Soccer</option><br />
<option value="technology"/>Technology</option><br />
<option value="ultimate"/>Ultimate Frisbee</option><br />
<option value="video_games"/>Video Games</option><br />
<option value="volleyball"/>Volleyball</option><br />
option value="water_park"/>Water Park</option><br />
</select><br /><br />

</div> 
```

How would I go about this? I am assuming I would need to use javascript, but I have no idea where to start.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:37:27.397

There's a lot wrong with your markup.

You can't have any other elements inside a select, so get rid of the line breaks. Also, option is not self closing, and you can't do `/>` AND provide the closing tag.. that makes no sense.

So each line should change from:

```
<option value="art"/>Art</option><br /> 
```

to:

```
<option value="art">Art</option> 
```

You also have mismatched quotes in the first select:

```
<select name="satellite1 id="firstchoice" required="required""><br /> 
```

Should be

```
<select name="satellite1" id="firstchoice" required="required"> 
```

Run your markup through [Markup Validator](http://validator.w3.org/) to catch these things.

* * *

To clear the other selects based on the first one, you can bind to its `onchange` event.

```
<select name="satellite1" id="firstchoice" required="required" onchange="clearOthers()"> 
```

Then in `clearothers()` you set their option's selectedIndex to a default value:

```
function clearOthers() {
  document.getElementById("secondchoice").options.selectedIndex=0;
  document.getElementById("thirdchoice").options.selectedIndex=0;
} 
```

I would also add a disabled "Select an option" option to each:

```
<option value="" disabled>Select</option> 
```

Put it all together and you get something like [this demo](http://jsbin.com/agarij/1/edit).

* * *

To remove specific items from selects based on previous selection, you can use code similar to below:

```
function clearOthers() {
  var sel1 = document.getElementById("firstchoice");
  var sel2 = document.getElementById("secondchoice");
  var sel3 = document.getElementById("thirdchoice");

  sel2.options.selectedIndex=0;
  sel3.options.selectedIndex=0;

  removeOption(sel2, sel1.value);
  removeOption(sel3, sel1.value);
}

function removeOption (sel, val) {
  // Iterate over select and find matching value
  for (i = 0; i < sel.length; i++) {
    if (sel.options[i].value == val) {
      // remove that index
      sel.remove(i);
      return;
    }
  }
} 
```

Of course, you'll need some logic to bring those values back once the selection changes to something else.

[Demo](http://jsbin.com/agarij/3/edit)

# c++ - c++：为什么 char c = 0xff 和 int n = c+1 得到 100 的结果？

> ID：14385468
> 
> 赞同：-6
> 
> 时间：2013-01-17T18:14:01.080
> 
> 标签：c++

我只是想知道为什么这里 n = 0 ？

```
char c = 0xff;
    int n = c+1;
    cout << n << endl;
    system("pause"); 
```

1) c = 0xff
2) 0xff + 1 = 0x100。

你能解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T18:15:55.843

假设一个无符号`char`类型，`0xff`将给出十进制值 255。加一，你得到 256，`0x100`或 256。这将被打印出来，就`100`好像你已经操纵`std::cout`以十六进制打印一样`std::cout << std::hex;`

假设**8 位**有符号`char`,`0xff`会溢出，给出 -1。加1，你会得到0。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T18:18:44.613

您的平台显然使用*签名* `char`类型。当你用 初始化它时`0xFF`，它会溢出并导致实现定义的行为。你`c`最终等于`-1`。当你添加`1`到时`-1`，你会得到`0`。这里没有什么不寻常的。

声明你的`c`as `unsigned char`，结果`n`值将是`0x100`，这可能是你所期望的。

# java - 声纳、Java 和“尾随评论”违规

> ID：14385476
> 
> 赞同：8
> 
> 时间：2013-01-17T18:14:36.783
> 
> 标签：java, sonarqube, comments

在我的一个项目上运行 Sonar 后，我因“尾随评论”而受到违反。所以我想知道，这纯粹与 Java 接受/推荐的代码布局约定有关，还是“更多”？背后的原因是什么？当我查看一些 C++ 代码（最近的[Doom 代码审查](http://games.slashdot.org/story/13/01/15/1732216/doom-3-source-code-beautiful)）时，有大量（或装满）尾随注释。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T18:21:41.403

出自名著`Code Complete`：

> *   注释必须对齐，以免干扰代码的视觉结构。如果您不整齐地对齐它们，它们会使您的列表看起来像是通过洗衣机清洗过的。
>     
>     
> *   Endline 注释往往难以格式化。对齐它们需要时间。这些时间并没有花在更多地了解代码上；它专门用于按空格键或制表键的繁琐任务。
>     
>     
> *   Endline 注释也很难维护。如果包含尾行注释的任何行上的代码增长，它会将注释撞得更远，并且所有其他行尾注释都必须撞出以匹配。难以维护的样式不会被维护。
>     
>     
> *   Endline 评论也往往是神秘的。行的右侧没有提供太多空间，并且希望将注释保留在一行上意味着注释必须很短。然后工作是使线路尽可能短，而不是尽可能清晰。该评论通常以尽可能神秘的形式结束。
>     
>     
> *   行尾注释的一个系统性问题是很难为一行代码编写有意义的注释。大多数行尾注释只是重复代码行，这弊大于利。

话虽如此，这也与一个人对编码风格的选择有关。*我个人会避免尾随评论，因为它们*没有太大帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T18:21:24.753

仅仅因为某些东西*有*尾随评论并不意味着它们是*好的*。还要记住 Doom 3 的代码已经有 10 年的历史了，并且编码风格会随着时间而改变。

通常，尾随注释表明一行代码不能独立存在。而且，一般来说，这是一种代码味道，因为单行代码*应该*是相当透明的。

查看一些源代码，我实际上并没有*看到*大量的尾随评论，尽管我看到很多方法太长，并且在函数中间有很多评论。

这些通常表明以下代码值得拥有自己的方法。

我认为是的，还有更多，“更多”是沟通和清晰。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T18:17:09.227

尾随评论本身并没有什么坏处。但是，您应该尽可能清楚地编写代码，这样您就不必使用注释逐行解释您的代码。这就是为什么有些人认为尾随代码注释暗示代码不够理解。

有关这方面的更多信息，另请参阅[Java 样式指南。](http://www.cwu.edu/~gellenbe/javastyle/trailing.html)

# entity-framework - 使用 Entity Framework 5 Code First 将 CreatedDate 添加到实体

> ID：14385477
> 
> 赞同：31
> 
> 时间：2013-01-17T18:14:46.203
> 
> 标签：entity-framework, ef-code-first, entity-framework-5, code-first, entity-framework-migrations

我正在尝试向`CreatedDate`模型中的实体添加属性，并且正在使用 EF5 Code First。我希望这个日期一旦设置就不会更改，我希望它是 UTC 日期。我不想使用构造函数，因为我的模型中有许多实体，我想从包含该`CreatedDate`属性的抽象类继承，并且我不能强制使用接口的构造函数。

我尝试了不同的数据注释，并尝试编写一个数据库初始化程序，该初始化程序将获取特定的实体类型并编写一个更改约束，其`getdate()`默认值为正确的`table_name`and `column_name`，但我无法正确编写该代码。

请不要让我参考[AuditDbContext - Entity Framework Auditing Context](http://auditdbcontext.codeplex.com/SourceControl/changeset/view/18413#215563)或[EntityFramework.Extended](https://github.com/loresoft/EntityFramework.Extended)工具，因为它们在这里没有我需要的功能。

**更新**

My`CreatedDate`为空，`SaveChanges()`因为我将 ViewModel 传递给我的视图，该视图正确地没有`CreatedDate`在其中调用审计属性。即使我将模型传递给我的视图，我也不会`CreatedDate`在视图中编辑或存储它。

[我在这里](https://stackoverflow.com/questions/6564772/ef-code-first-readonly-column)读到我可以添加`[DatabaseGenerated(DatabaseGeneratedOption.Identity)]`，这将告诉 EF`CreatedDate`在插入和更新之后正确存储，但不允许我的应用程序更改它：但我只是`Cannot insert explicit value for identity column in table when IDENTITY_INSERT is set to OFF`通过添加此属性得到一个错误。

我即将切换到 EF Model First，因为这个简单的数据库要求在 Code First 中实现是荒谬的。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-18T12:24:49.840

这是我的做法：

```
[DatabaseGenerated(DatabaseGeneratedOption.Computed)]
public DateTime CreatedDate{ get; set; } 
```

在我迁移的 Up() 方法中：

```
AddColumn("Agents", "CreatedDate", n => n.DateTime(nullable: false, defaultValueSql: "GETUTCDATE()")); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-17T18:30:19.443

在您的上下文中覆盖 SaveChanges-Method：

```
public override int SaveChanges()
{
  DateTime saveTime = DateTime.UtcNow;
  foreach (var entry in this.ChangeTracker.Entries().Where(e => e.State == (EntityState) System.Data.EntityState.Added))
   {
     if (entry.Property("CreatedDate").CurrentValue == null)
       entry.Property("CreatedDate").CurrentValue = saveTime;
    }
    return base.SaveChanges();

} 
```

**由于评论而更新**：只有新添加的实体才会设置日期。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-18T04:47:59.937

好的，所以这里的主要问题是 CreatedDate 每次我调用 SaveChanges 时都会被更新，并且由于我没有将 CreatedDate 传递给我的视图，它被实体框架更新为 NULL 或 MinDate。

解决方案很简单，知道我只需要在 EntityState.Added 时设置 CreatedDate，我只需在 SaveChanges 覆盖中执行任何工作之前设置我的 entity.CreatedDate.IsModified = false，这样我就忽略了来自更新的更改，如果它是添加 CreatedDate 将在几行之后设置。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-28T09:39:17.410

类似于[Stephans 的答案](https://stackoverflow.com/a/14385736/1766716)，但具有[反射](https://msdn.microsoft.com/en-us/library/f7ykdhsy(v=vs.110).aspx)，并且还忽略所有用户（外部）更新的创建/更新时间。[显示要点](https://gist.github.com/guneysus/8fbca9149c1dbede6be4)

```
 public override int SaveChanges()
        {
            foreach (var entry in ChangeTracker.Entries().Where(x => x.Entity.GetType().GetProperty("CreatedTime") != null))
            {
                if (entry.State == EntityState.Added)
                {
                    entry.Property("CreatedTime").CurrentValue = DateTime.Now;
                }
                else if (entry.State == EntityState.Modified)
                {
                    // Ignore the CreatedTime updates on Modified entities. 
                    entry.Property("CreatedTime").IsModified = false;
                }

                // Always set UpdatedTime. Assuming all entities having CreatedTime property
                // Also have UpdatedTime
                // entry.Property("UpdatedTime").CurrentValue = DateTime.Now;
                // I moved this part to another foreach loop
            }

            foreach (var entry in ChangeTracker.Entries().Where(
                e => 
                    e.Entity.GetType().GetProperty("UpdatedTime") != null && 
                    e.State == EntityState.Modified || 
                    e.State == EntityState.Added))
            {
                entry.Property("UpdatedTime").CurrentValue = DateTime.Now;
            }

            return base.SaveChanges();
        } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-18T10:47:15.517

Code First 目前不提供提供列默认值的机制。

您将需要手动修改或创建基类以自动更新 CreatedDate

```
public abstract class MyBaseClass
{
    public MyBaseClass()
    {
        CreatedDate = DateTime.Now;
    }
    public Datetime CreatedDate { get; set; }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-23T07:55:33.260

对于 EF Core，您可以在此处找到 MS 推荐的解决方案： [默认值](https://docs.microsoft.com/en-us/ef/core/modeling/relational/default-values)。

在 DBContext 中使用 Fluent API：

```
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    modelBuilder.Entity<Blog>()
        .Property(b => b.Created)
        .HasDefaultValueSql("getdate()");
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-17T18:19:14.910

```
Accounts account;
account.Acct_JoinDate = DateTime.Now.ToUniversalTime();
data.Accounts.Add(account);
data.SaveChanges(); 
```

为什么不在模型创建时给出时间戳？类似于这里的这些帐户。

# scala - scala：如何链接不同类型的部分函数

> ID：14385480
> 
> 赞同：2
> 
> 时间：2013-01-17T18:14:56.560
> 
> 标签：scala

我有一个使用链式部分函数处理 Web 服务请求的模式（我认为这是责任链模式？）。在我的示例中，假设请求有两个参数，一个字符串 ID 和一个日期。有一个涉及 id 的验证步骤，一个检查日期的验证步骤，最后是一些使用两者的业务逻辑。所以我让它们像这样实现：

```
object Controller {
  val OK = 200
  val BAD_REQUEST = 400

  type ResponseGenerator = PartialFunction[(String, DateTime), (String, Int)]

  val errorIfInvalidId:ResponseGenerator = {
    case (id, _) if (id == "invalid") => ("Error, Invalid ID!", BAD_REQUEST)
  }

  val errorIfFutureDate:ResponseGenerator = {
    case (_, date) if (date.isAfter(DateTime.now)) => ("Error, date in future!", BAD_REQUEST)
  }

  val businessLogic:ResponseGenerator = {
    case (id, date) => {
      // ... do stuff
      ("Success!", OK)
    }
  }

  def handleRequest(id:String, date:DateTime) = {
    val chained = errorIfInvalidId orElse errorIfFutureDate orElse businessLogic
    val result: (String, Int) = chained(id, date)

    // make some sort of a response out of the message and status code
    // e.g. in the Play framework...
    Status(result._2)(result._1)
  }
} 
```

我喜欢这种模式，因为它非常具有表现力——您可以通过查看链接函数轻松掌握控制器方法逻辑是什么。而且，我可以轻松地为不同的请求混合和匹配不同的验证步骤。

问题是，当我尝试扩展这种模式时，它开始崩溃。假设我的下一个控制器需要一个我想要验证的 id，但没有 date 参数，并且它可能有一些需要验证的第三种类型的新参数。我不想继续将该元组扩展为`(String, DateTime, Other)`并且必须传入一个虚拟的 DateTime 或 Other。我想要接受不同类型的参数的部分函数（它们仍然可以返回相同的类型）。但我不知道如何组合它们。

对于一个具体的问题 - 假设示例验证器方法更改为如下所示：

```
val errorIfInvalidId:PartialFunction[String, (String, Int)] = {
  case id if (id == "invalid") => ("Error, Invalid ID!", BAD_REQUEST)
}

val errorIfInvalidDate:PartialFunction[DateTime, (String, Int)] = {
  case date if (date.isAfter(DateTime.now)) => ("Error, date in future!", BAD_REQUEST)
} 
```

我还能把它们连在一起吗？似乎我应该能够将元组映射到它们，但我不知道如何。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T18:46:49.620

我非常喜欢将 scalaz 的 Validation 用于此类事情。它使您可以相当多地控制要对错误做什么以及如何处理它们。这是使用您的控制器的示例：

```
import scalaz._
import Scalaz._

object Controller {
  val OK = 200
  val BAD_REQUEST = 400

  case class Response(response: String, status: Int)

  def validateIfInvalidId(id: String) = (id == "invalid") ?
    Response("Error, Invalid ID!", BAD_REQUEST).fail[String] |
    id.success[Response]

  def validateIfFutureDate(date: DateTime, currentDate: DateTime = DateTime.now) = (date.isAfter(currentDate)) ?
    Response("Error, date in future!", BAD_REQUEST).fail[DateTime] |
    date.success[Response]

  def handleRequest(id: String, date: DateTime) = {
    val response = for {
      validatedId <- validateIfInvalidId(id)
      validatedDate <- validateIfFutureDate(date)
    } yield {
      // ... do stuff
      Response("Success!", OK)
    }

    // make some sort of a response out of the message and status code
    // e.g. in the Play framework...
    response.fold(
      failure => Status(failure.response, failure.status),
      success => Status(success.response, success.status)
    )
  }
} 
```

您可以将不同的验证函数移到它们自己的世界中，然后在任何时候使用 scala 中的 for 理解来组合它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T22:35:10.547

好的，我找到了一种方法来做到这一点，这似乎还不错。最初我认为将部分函数的“基本”版本包装在另一个采用元组的部分函数中可能会起作用。但是我不知道该怎么做，直到我想到了`isDefined`在案例保护语句中使用的明显回想想法。像这样：

```
// "base" version
val errorIfInvalidId:PartialFunction[String, (String, Int)] = {
  case id if (id == "invalid") => ("Error, Invalid ID!", BAD_REQUEST)
}

// wrapped to take tuple as parameter
val wrappedErrorIfInvalidId:PartialFunction[(String, DateTime), (String, Int)] = {
  case (id, _) if (errorIfInvalidId.isDefinedAt(id)) => errorIfInvalidId(id)
} 
```

这种方法是有用的，尽管我仍然想知道是否没有更直接的方法来实现它。（在我有机会尝试一下之后，我也可能会切换到 Noah 建议的 Scalaz 验证。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-29T11:14:46.520

您可以使 PartialFunction 更通用，使其 PartialFunction[Any, (String, Int)] Altho, mb 它会更慢。不知道 PartialFunction 下的匹配机制

# php - 使用 Javascript 访问数据库的 PHP

> ID：14385486
> 
> 赞同：0
> 
> 时间：2013-01-17T18:15:16.867
> 
> 标签：php, javascript, mysql, database

假设我在 php 中定义了一个应用程序，该应用程序在 Tag 中作为内部 javascript，并且在 js 中定义了一个变量“abc”，如下所示：

```
var abc; 
```

现在我想为将从 MySQL 数据库中获取的变量分配一个新值

例子 ：

```
var abc = $mysql(select id from dB_table where .....xyz ) 
```

从 MySQL 数据库中检索日期是否属于 abc 的范围？它是如何实现的？

PS：我将使用 php 连接到数据库

```
mysql_connect(servername,username,password) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T18:20:20.377

停止停止停止**停止**。非常愚蠢的想法...如果您在客户端代码中指定 SQL，那么阻止某人做什么

```
var haha_im_in_ur_server = $mysql("delete from db_Table"); 
```

**想想**这样的系统会有多危险。如果您喜欢每隔一秒就销毁您的服务器，那么您可以自己实现它。

# api - 使用 curl 加入篝火室

> ID：14385487
> 
> 赞同：1
> 
> 时间：2013-01-17T18:15:23.287
> 
> 标签：api, rest, curl, campfire

我尝试使用带有 curl的篝火[室 API加入篝火室。](https://github.com/37signals/campfire-api/blob/master/sections/rooms.md)

我尝试：

`curl -v -H "Content-Type: application/json" -i --user my_token:my_password https://camp111.campfirenow.com/room/test_room/join.json`

我得到了回应：

`<html><body>You are being <a href="https://camp111.campfirenow.com/login">redirected</a>.</body></html>`

我如何正确加入 curl 的篝火室？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:51:21.640

您应该将 test_room 替换为您的数字`roomId`，并且您必须至少指定空`-d`参数以在标头中设置 POST 方法，并且您可以省略 加入请求的参数`-i`和参数。`-H`

请记住，您只能加入房间受邀帐户。

# wpf - 将文本与相邻控件一起换行到下一行

> ID：14385488
> 
> 赞同：0
> 
> 时间：2013-01-17T18:15:23.240
> 
> 标签：wpf, xaml

我在换行面板中有 2 个文本块。其中一个文本框绑定到我的视图模型，另一个包含静态文本“：”。我想要的行为是，如果第一个文本框内容增长超过特定宽度，它将文本换行到下一行。这可以通过 TextWrapping=wrap 实现。但我想要的是，当文本块增长时，它将下一个文本块也随之推到第二行。

例如，如果 TextblockOne 有文本 1111111222222222 和 textblock2 有文本：那么我应该得到类似

111111

222222：

而不是

1111111：

2222222

以下是我的代码：

```
<Grid >

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>

            <WrapPanel Orientation="Horizontal" Grid.Column="0">

                <TextBlock Text="11111111111111111111112222222222222222222222222222" TextWrapping="WrapWithOverflow" />       
                <TextBlock Text=":"/>
            </WrapPanel>
</Grid> 
```

注意：我不能将 : 附加到 viewmodel 属性。你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:27:58.323

不确定这是否正是您想要的，但试试看：

```
<WrapPanel Orientation="Horizontal" Grid.Column="0">
    <TextBlock  TextWrapping="Wrap">
        <Run Text="11111111111111111111112222222222222222222222222222"/>
        <Run Text=":"/>
    </TextBlock>
</WrapPanel> 
```

这将输出：

```
111111
222222：

```

# sdk - Rally SDK：通过设置上下文工作区和项目过滤 Rally 数据

> ID：14385493
> 
> 赞同：1
> 
> 时间：2013-01-17T18:15:36.423
> 
> 标签：sdk, rally

下面我试图通过设置上下文工作区和项目来过滤 Rally 数据，但它不起作用.. 我在做什么？我还查看了此处发布的另一个类似问题，但这对我没有帮助。

```
 Ext.define('CustomApp', {
            extend: 'Rally.app.App',
            componentCls: 'app',

            launch: function() {
                Ext.create('Rally.data.WsapiDataStore', {
                    model: 'UserStory',
                    autoLoad: true,
                     context: {
                workspace :'https://rally1.rallydev.com/slm/webservice/1.40/workspace/2004571051'
                project: 'https://rally1.rallydev.com/slm/webservice/1.40/project/5022032422',
                projectScopeUp: false,
                projectScopeDown: false
}
                    filters: [
                {
                   property: 'Name',

                    value: 'story about a Product X'
                }
],
                    listeners: {
                        load: this._onDataLoaded,
                        scope: this
                    }
                });
            }, 
```

# c# - 为所有用户缓存一次对象，每 30 分钟刷新一次

> ID：14385499
> 
> 赞同：1
> 
> 时间：2013-01-17T18:15:51.230
> 
> 标签：c#, web-services, caching, web, intranet

我正在使用 Intranet，我想在服务器上缓存一个对象，并在请求时将其提供给用户，而不是让每个用户生成自己的对象副本。我还想每 30 分钟刷新一次对象...

我目前正在使用 HttpContext.Current.Cache，但我不确定： 1\. 这就是我正在寻找的 2\. 有更好的方法来做到这一点（我正在考虑 Web 服务）？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:21:22.813

HttpContext.Current.Cache 是在所有用户之间共享的 appDomain 范围的缓存。它适合您的案例存储您需要在所有用户之间共享的任何对象。它还支持过期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:21:13.030

使用`HttpRuntime.Cache`(same as `HttpContext.Cache`) 有一个陷阱，因为它与`AppDomain`. 当它回收时，您的缓存也会如此。

而是安装类似 Membase (Memcache) 的东西，它充当外部缓存提供程序，并将在应用程序回收之间保持不变。

至于刷新，我个人会将该项目缓存 30 分钟，但让它过期。只有当请求进来并且该项目不再在缓存中时才刷新它。这使缓存保持高效，因为只有请求的对象保留在缓存中。

作为一个无耻的插件，我前段时间写了一个支持 Memcache 的缓存库，您可以使用它，请参见此处 - [http://www.lloydkinsella.net/2012/09/30/bettering-the-better-net-cache/](http://www.lloydkinsella.net/2012/09/30/bettering-the-better-net-cache/)

# iphone - 更多按钮替换 UINavigationBar 左侧的 UIBarButtonItems

> ID：14385502
> 
> 赞同：1
> 
> 时间：2013-01-17T18:16:02.953
> 
> 标签：iphone, objective-c, storyboard, uibarbuttonitem

我有一个有六个选项卡的选项卡式应用程序，因此正如预期的那样，其中两个选项卡在最后的“更多”选项卡下移动。我有一个刷新按钮，我想放在每个选项卡视图的左上角，但是当我使用情节提要放置这些按钮时，如果我在其中一个选项卡中，则会覆盖带有“更多”文本的后退按钮移动到更多选项卡下。我试图获得的行为是将刷新按钮 NEXT 放在更多选项卡上，有点像 Apple 如何在随附的屏幕截图中的 iTunes 应用程序中创建它们的选项卡。

我尝试查看使用代码进行按钮放置的方法，但其中大多数似乎假设您想使用代码创建所有按钮并将它们放置在一个数组中。我还没有找到创建更多按钮的方法，因为我认为这是自动生成的，但是如果有一种方法可以用来在其旁边添加一个额外的按钮，那就可以满足我的要求。

tl; dr：有没有办法在“更多”按钮旁边添加按钮？

（我是新手，所以我不能添加截图，但这里是我的意思截图的链接。http: [//i.stack.imgur.com/GV6M2.png](http://i.stack.imgur.com/GV6M2.png)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:23:19.603

你会知道“更多”按钮的索引是什么，所以你可以将“刷新”按钮添加到按钮数组之前吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:42:00.433

找到了答案！查看方法列表总是有帮助的。您可以设置一个名为 leftItemsSupplementBackButton 的 BOOL，它通常设置为 NO，但如果设置为 YES，它将在后退按钮旁边添加任何按钮，而不是替换它。甚至可以使用 Storyboard 创建的按钮：D

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationItem_Class/Reference/UINavigationItem.html%23//apple_ref/occ/instp/UINavigationItem/leftItemsSupplementBackButton](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationItem_Class/Reference/UINavigationItem.html%23//apple_ref/occ/instp/UINavigationItem/leftItemsSupplementBackButton)

```
- (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];
[self performSelector:@selector(loadLoginScreen) withObject:nil];
isAnimated = YES;
[self.navigationItem setLeftItemsSupplementBackButton:YES]; 
```

}

# jpa - 自动更新数据库中的记录

> ID：14385508
> 
> 赞同：0
> 
> 时间：2013-01-17T18:16:15.537
> 
> 标签：jpa, jpql

在我访问前端数据（使用 JSF/PrimeFaces）之前，我必须检查是否存在名称记录。像这样查看范围bean：

```
public void updateProfileListener(ActionEvent actionEvent) { 
  if(supplierService.isExistSupplierName(supplier.getName(), true))  return;
//  else saveDate(); 
```

}

和这样的数据库检查代码：

```
userDatabase.createQuery("select c from Supplier c where c.name = :name")
        .setParameter("name", name)
        .getResultList(); 
```

它只是用于检查是否存在名称的常规查询 sql，但它仍然是从前端条目更新新数据，我可以知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:42:18.553

BalusC 说得对！

现在，如果您想找到 olny 1 供应商，您可以尝试在 where 子句中添加其他数据验证（好吧，我不知道您的业务逻辑：D）。但是，你真的想要 resultList 我认为最好使用'like'

select c from Supplier c where c.name **like** ...

# python - 在不同文件夹中的 python 脚本中运行 python 安装程序/构建器

> ID：14385511
> 
> 赞同：0
> 
> 时间：2013-01-17T18:16:39.743
> 
> 标签：python

我有一个 python 代码，它将 C 代码链接到我想要运行的 Python 中。此代码位于`mymodule/foo`包含两个文件的文件夹内：一个`setup.py`文件和一个`foo.c`文件。你通常要做的就是进入`mymodule/foo`文件夹，然后做

```
python setup.py build 
```

这将创建一个 .so 文件，然后您可以将其导入 python。我必须对文件夹中的几个子文件`mymodule`夹执行此操作，因此我想通过`os.system()`调用自动执行此操作。但是，当我在`mymodule`文件夹中并执行此操作时：

```
os.system('python foo/setup.py build') 
```

我明白了

```
gcc: error: foo.c: No such file or directory
gcc: fatal error: no input files
compilation terminated.
error: command 'gcc' failed with exit status 4 
```

显然，该`setup.py`文件试图在文件夹中而不是在文件夹中查找`foo.c`代码。到目前为止，我的解决方案是将文件复制到文件夹中，运行该行代码，然后从文件夹中删除文件的副本。然而，我发现这个解决方案很混乱。`mymodule``mymodule/foo``foo.c``mymodule``mymodule`

您对如何优雅地做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T06:20:00.730

[使用os.chdir()](http://docs.python.org/2/library/os.html)将 setup.py 或 chdir 修复到所需目录。

# java - 如何在 Netbeans 中添加 SteelSeries javadoc？

> ID：14385512
> 
> 赞同：1
> 
> 时间：2013-01-17T18:16:41.023
> 
> 标签：java, swing, api, javadoc, steelseries

我无法让 Steelseries javadoc 在 Netbeans 中工作。这是 URL [https://dl-web.dropbox.com/u/84552/SteelSeries3/apidocs/index.html](https://dl-web.dropbox.com/u/84552/SteelSeries3/apidocs/index.html)但我似乎无法让它发挥作用。我错过了什么明显的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:29:53.470

在`Tools > Libraries`中，您可以创建一个新库，在选项卡中设置 API 文档的位置`Javadoc`并将库添加到您的项目中，如下[所示](https://stackoverflow.com/questions/1975973/how-to-use-jar-files-in-netbeans/1976322#1976322)。

[![图片](../Images/58e3a6e507508c774e17810c45a668b6.png)](https://i.stack.imgur.com/rnpY3.png)
[（来源：[netbeans.org](http://wiki.netbeans.org/wiki/images/d/d4/LibraryManager671.png)）]

# login - 自定义登录模块或 OAuto 提供程序

> ID：14385513
> 
> 赞同：0
> 
> 时间：2013-01-17T18:16:43.600
> 
> 标签：login, oauth, oauth-2.0, cloudbees, oauth-provider

我正在编写一个应用程序，并且我只有使用 Glassfish 处理用户登录的自定义登录模块的经验。如果部署在 Cloudbees 云中，我假设不可能提供自定义登录模块，对吗？即使是这样，我也不认为我真的想使用那种方法。您使用什么机制来保护您的应用程序、拥有用户帐户等？如果您使用 OAuth 提供程序，您是否自己编写了一个？如果是这样，你能给我举个例子，这样我就可以做同样的事情吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T00:33:09.890

约翰 - 我在几个地方使用过 openid - 这似乎运作良好。我希望使用 servlet 过滤器或类似的 oauth 存在类似的解决方案。

cloudbees“grandcentral”服务是一个 openid 和 oauth（我认为）提供商——用于 cloudbees 帐户。

从理论上讲，您应该能够做到这一点——即使您必须将嵌入式 glassfish 作为 jar 文件的 zip 与主启动类一起运行。

# excel - 在 Excel 中的 OLAP 多维数据集中搜索

> ID：14385514
> 
> 赞同：0
> 
> 时间：2013-01-17T18:16:44.960
> 
> 标签：excel, pivot, ssas, olap, cubes

我正在连接到 Excel 中的 SSAS OLAP 多维数据集并使用它创建数据透视表。

有没有办法在多维数据集层次结构中搜索某些字段，而不必扩展所有维度？

例如，如果我有一个可以扩展为“蓝色”、“红色”、“绿色”的维度“颜色”，并且我想在不扩展颜色维度的情况下搜索“蓝色”。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:47:33.690

如果您使用的是 Excel 2010 或 2013，则可以从任何过滤器弹出窗口中获得 - 现在有一个运行良好的搜索字段。对于早期版本的 Excel，您可以尝试 Excel 数据透视表扩展插件：

[http://olappivottableextend.codeplex.com/](http://olappivottableextend.codeplex.com/)

# c++ - 是否应该避免使用未命名的命名空间函数来减少符号表的大小？

> ID：14385516
> 
> 赞同：3
> 
> 时间：2013-01-17T18:16:47.720
> 
> 标签：c++, language-lawyer, symbol-table, unnamed-namespace

我听说它断言在 C++ 中使用未命名的命名空间来定义函数并确保不能从定义它们的编译单元外部调用它们在非常大的代码环境中不好，因为它们会导致符号表增长通过在 C++ 编译器在未命名时提供的自动生成的命名空间中包含这些符号的条目而不必要地大。

```
namespace {
  // This function can only be accessed from hear to the end of 
  // any compilation unit that includes it.
  void functionPerhapsInsertedIntoSymbolTable() {
    return;
  }
} 
```

这可能是因为上述内容应该与执行以下操作相同：

```
namespace randomlyGenerateNameHereNotCollidingWithAnyExistingNames {
  // This function can only be accessed from hear to the end of
  // any compilation unit that includes it.
  void functionPerhapsInsertedIntoSymbolTable() {
    return;
  }
}
using randomlyGenerateNameHereNotCollidingWithAnyExistingNames; 
```

然而，真的那么简单吗，编译器是否需要为生成的命名空间名称中的符号创建符号表条目？

相反，在这种情况下，我听说它建议使用静态声明：

```
// This function can only be accessed from hear to the end of
// any compilation unit that includes it.
static void functionNotInsertedIntoSymbolTable() {
  return;
} 
```

在函数之前使用静态声明而不是将其放置在未命名的命名空间中是否具有使函数在定义它的编译单元之外无法访问的相同效果？除了可能不会导致符号表增长之外，这两种方法之间是否有任何区别？

由于未命名的名称空间导致的符号表膨胀问题只是 C++ 的某些实现中的一个错误，还是标准要求编译器以某种方式为此类函数创建条目？如果这种膨胀被认为是一个错误，那么是否有已知的编译器不存在这问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T18:20:07.807

> 在函数之前使用静态声明而不是将其放置在未命名的命名空间中是否具有使函数在定义它的编译单元之外无法访问的相同效果？

是的。

命名空间`static`- 在 C++03 中被弃用，取而代之的是未命名的命名空间，但实际上[在 C++11中](https://stackoverflow.com/questions/8460191/is-namespace-static-still-deprecated-in-c11)[*被弃用*](https://stackoverflow.com/questions/8460191/is-namespace-static-still-deprecated-in-c11)，因为每个人都意识到它们只是同一个东西并且弃用没有任何目的。

> 这两种方法有什么区别吗

不，不是。由于使用了命名空间，名称查找可能会有一些细微的差别，但我现在想不出来。

> 除了可能不会导致符号表增长？

由于这是一个`language-lawyer`没有明显实际问题需要解决的问题，我不得不指出，C++ 语言没有符号表的概念，因此没有表明这种效果。

在您拥有数以万计的未命名命名空间之前，它也不会产生任何明显的影响；你？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:38:49.653

未命名的命名空间和命名空间级别静态的弃用的原因是命运多舛的导出关键字。

导出模板所依赖的所有内容都必须在实例化点可链接访问，这很可能在不同的源文件中。未命名的命名空间允许静态的“私有化”方面，同时仍保留导出模板的链接。

现在导出已在 C++2011 中删除，我很确定未命名命名空间的外部链接要求已被删除，它现在的行为与命名空间级别的静态完全相同。更熟悉该标准的人可以确认/反驳这一点。

# oracle - SSRS 限制文本长度但保留完整的单词

> ID：14385519
> 
> 赞同：0
> 
> 时间：2013-01-17T18:17:03.867
> 
> 标签：oracle, reporting-services, plsql

在我的表格中，我基本上有 2 列（更多，但有明显的左侧和右侧）。左侧的一个字段 FIELD1 来自 LookupSet()，每个 ID 可以有来自 FIELD1 的两个项目。使用 join(lookupset(), vbcrlf) 我可以获取 ID 的两个值并将其放入表中的一个单元格中。这可行，但使用 vbcrlf 时，行高会增加。这会导致问题，因为右侧的数据之间不能有额外的空间。

我为第一行做了一个 split(join(lookupset())).getValue(0)，然后在它下面的行为值 1。使用一些 iif 语句来检查错误等，这是可行的。

我解决的一个问题是 FIELD1 的值可以比单元格的宽度长，但不会超过两个。我能够在 oracle 中做一些子字符串魔术，例如：

```
SELECT ID, SUBSTR(FIELD1, 1, 70) FROM....
UNION
SELECT ID, SUBSTR(FIELD1, 70) FROM ... 
```

使用排序，每个 ID 最多可以获得 4 行数据，我将能够拆分查找集并将每个值放入表中。

我的最后一个问题，希望有人能提供帮助，当我获取子字符串时，它可以切断单词，下一行将从单词的其余部分开始。有没有办法，可能使用正则表达式来确保单词保持完整，但也可以确保返回的总长度<一些字符？如果我偏离了轨道，我很乐意放弃我目前正在采取的方法的任何部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:36:07.233

我能够通过使用
SUBSTR(FIELD1,1, regexp_instr(FIELD1, '[ ]', 70)) 来解决这个问题（在一些帮助下）

```
SELECT ID, SUBSTR(FIELD1,1, regexp_instr(FIELD1, '[ ]', 70)) FROM....
UNION
SELECT ID, SUBSTR(FIELD1, regexp_instr(FIELD1, '[ ]', 70)) FROM ... 
```

# mysql - 基于日期时间查询最新的最佳方法（MySQL）

> ID：14385522
> 
> 赞同：0
> 
> 时间：2013-01-17T18:17:21.303
> 
> 标签：mysql

如果我有一张存储一个人姓名的表格，他们跑一英里所用的时间，以及当他们跑一英里时，获取一个人最近一圈时间的最佳方法是什么。

```
LAPS
____________________________________________
|  name   | lap_time |        date         |
--------------------------------------------
| George  |   20.3   | 2013-01-17 09:17:14 |
| Alex    |   32.2   | 2013-02-17 14:24:32 |         
| Mike    |   16.6   | 2013-01-17 07:57:54 |
| Alex    |   28.5   | 2013-01-17 19:50:21 |
| Mike    |   15.1   | 2013-02-17 12:37:12 |
| Mike    |   14.8   | 2013-03-17 06:58:34 |
'''''''''''''''''''''''''''''''''''''''''''' 
```

我一直在这样做，到目前为止它对我有用，但我很想知道是否有更好的方法。

```
SELECT l.lap_time
FROM laps l
INNER JOIN(
    SELECT *, MAX(date) as most_recent
    FROM laps
    WHERE name = 'Alex'
)AS temp ON (
    l.date = temp.most_recent
    AND l.name = temp.name
) 
```

我使用这种类型的查询的实际表很大，所以我正在寻找最省时的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:25:40.650

我会用这个查询和 MAX 来测试它，看看哪个更快。

```
Select * from laps where name = 'Alex' order by date desc limit 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:20:08.530

这将适用于单个名称：

```
SELECT name, lap_time, date
FROM laps
WHERE name = 'Alex'
ORDER BY date DESC
LIMIT 1 
```

**结果**

```
| 姓名 | LAP_TIME | 日期 |
-------------------------------------------------- ---
| 亚历克斯 | 32.2 | 2013 年 2 月 17 日 14:24:32+0000 |
```

## [查看演示](http://www.sqlfiddle.com/#!2/a23eb/2)

这应该适用于所有名称：

```
SELECT a.name, b.lap_time, a.date
FROM
  (SELECT name, MAX(date) AS date FROM laps GROUP BY name) a
LEFT JOIN laps b 
  ON b.date = a.date AND b.name = a.name 
```

**结果**

```
| 姓名 | LAP_TIME | 日期 |
-------------------------------------------------- -----
| 亚历克斯 | 32.2 | 2013 年 2 月 17 日 14:24:32+0000 |
| 乔治 | 20.3 | 2013 年 1 月 17 日 09:17:14+0000 |
| 迈克 | 14.8 | 2013 年 3 月 17 日 06:58:34+0000 |
```

## [查看演示](http://www.sqlfiddle.com/#!2/a23eb/1)

# c# - 在 C# 中找不到 C++ COM DLL 中的导出函数

> ID：14385524
> 
> 赞同：2
> 
> 时间：2013-01-17T18:17:29.933
> 
> 标签：c#, c++, dll, com

我有一个现有的 COM DLL，当前通过 VB 包装类访问（只有一个函数）并从 C# 类调用。

我正在尝试将回调添加到我的 C# 代码中（4 个单独的回调）。我选择的方法是我发现的唯一方法，但我遇到了问题。

它说“无法在 DLL 'xxxx' 中找到名为 'InitDotNet' 的入口点。

## 我的 DLL 头文件：

```
extern "C"
{
#define DLL __declspec(dllexport)
typedef void (__stdcall * CB_func1)(int);
typedef void (__stdcall * CB_func2)(char *);

DLL void InitDotNet(CB_func1 func1, CB_func2 func2);
}

...

class CComInterface : public CCmdTarget
...
   afx_msg void mainCall(short parm1, LPCTSTR parm2);
... 
```

## 我的 DLL C++ 文件：

```
...
CB_func1  func1Function;
CB_func2  func2Function;
...
IMPLEMENT_DYNCREATE(CComInterface, CCmdTarget)
...
BEGIN_DISPATCH_MAP(CComInterface, CCmdTarget)
   DISP_FUNCTION(CComInterface, "mainCall", mainCall, VT_EMPTY, VTS_I2 VTS_BSTR)
END_DISPATCH_MAP()
...
IMPLEMENT_OLECREATE(CComInterface, "MyDll.Interface", ...)

...
void CComInterface::mainCall(short parm1, LPCTSTR parm2)
{
   ...

   // at various times call func1Functoin and func2Function

   ...
}

DLL void InitDotNet(CB_func1 func1, CB_func2 func2)
{
   func1Function = func1;
   func2Function = func2;
} 
```

## 我的 VB 包装器如下所示：

```
Public Class MyWrapperClass
   Private Shared Protocol As Object = CreateObject("MyDll.Interface")

   Public Shared Sub mainCall(ByVal parm1 As Short, ByVal parm2 As String)
      Protocol.mainCall(parm1, parm2)
   End Sub
End Class 
```

## 我的 C# 代码如下所示：

```
...
using System.Runtime.InteropServices
namespace MyNamespace
{
   public partial class MyForm : AnotherForm
   {
      ...
      [UnmanagedFunctionPointer(CallingConvention.StdCall)]
      public delegate void func1Callback(int value);

      [UnmanagedFunctionPointer(CallingConvention.StdCall)]
      public delegate void func2Callback(string value);

      [DllImport("mycppdll.dll")]
      public static extern void InitDotNet([MarshalAs(UnmanagedType.FunctionPtr)] func1Callback f1c,
         [MarshalAs(UnmanagedType.FunctionPtr)] func2Callback f2c);
      ...
      private void MyFunc()
      {
         func1Callback f1c = 
            (value) =>
            {
               // work here
            };
         func2Callback f2c =
            (value) =>
            {
               // work here
            };

         InitDotNet(f1c, f2c);

         MyWrapperDll.MyWrapperClass.mainCall(1, "One");

} 
```

有人对我做错了什么有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:42:42.523

我看到的问题：

1.  `InitDotNet`需要很长时间而不是`CB_func1`and `CB_func2`。对于 64 位版本的程序来说，这是一个双重问题：它会导致 stdcall 函数的导出名称不匹配，更糟糕的是，如果`InitDotNet`设法以某种方式被调用，它可能会导致指针截断。

2.  InitDotNet 未标记`__stdcall`。默认调用约定是 cdecl。cdecl 命名约定是“带下划线的前缀”，因此导出的名称是“_InitDotNet”。但是，stdcall 命名约定是“带有下划线的前缀，带有 @ 的后缀，后跟参数的大小，以字节为单位”，因此预期的导出名称将是“_InitDotNet@8”（当前签名采用两个长整数）。你应该使用像dumpbin 或[depends.exe](http://www.dependencywalker.com/)这样的程序来查看你的DLL 导出的函数的名称。**这种不匹配可能是运行时找不到的原因`InitDotNet`，假设是 32 位 Windows**。`EntryPoint``DllImport`

3.  正如 cdhowie 在评论中指出的那样，您需要保持您传递给本机代码的两个委托“活动”。.NET 垃圾收集器无法知道函数指针是由本机代码存储的。为了防止垃圾收集器收集它们，请保留对委托的引用（例如在保证比本机代码对它们的使用长的对象的字段中）或使用`GCHandle`. 请注意，如果您使用`GCHandle`：您不需要使用固定手柄；实际传递给您的代码的函数指针是一个存根，即使垃圾收集器移动了委托，该存根仍保留在同一位置。但是，在收集委托时会删除存根，因此确保在本机代码不再需要回调之前不会收集委托至关重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:50:58.027

COM 传递回调的方式是接口。正如您所经历的那样，尝试将非托管函数指针与 .NET 委托匹配是复杂且容易出错的。接口不如委托实用，但仍比函数指针好。

因此，如果我是你，我会将回调放在 COM DLL 导出的 COM 接口中：

（以下是IDL代码，必须放在与C++项目关联的.idl文件中。）

```
interface ISomeObject : IUnknown
{
    HRESULT DoTask1([in] int i);
    HRESULT DoTask2([in] BSTR s);
} 
```

然后构建 C++ 项目，并将类型库添加为 C# 项目的引用。如果类型库已注册，您可以通过在Visual Studio的**解决方案资源管理器**窗格中右键单击 C# 项目名称来添加它，选择**Add Reference**，转到**COM**选项卡，查找类型库的名称并将其添加为一个参考。

一旦添加了对类型库的引用，就可以像使用 C# 接口一样使用 COM 接口：

```
class MyForm : AnotherForm, ISomeObject
{
      // ISomeObject methods:
    public void DoTask1(int i) { ... }
    public void DoTask2(string s) { ... }

    ...
} 
```

然后 InitDotNet 将接受一个 ISomeObject 指针，而 C# 代码将简单地通过传递**this**来调用它：

C++：

```
ISomeObject* g_pSomeObject;

extern "C" __declspec(dllexport) void __stdcall InitDotNet(ISomeObject* o)
{
    g_pSomeObject = o;
} 
```

C＃：

```
[DllImport("mycppdll.dll")]
private static extern void InitDotNet(ISomeObject o);

private void DoInitDotNet()
{
    // The following works because MyForm implements ISomeObject
    InitDotNet(this);
} 
```

但我也会让 InitDotNet 成为 COM 接口的方法，而不是全局函数。

最后但同样重要的是，VB 类的目的是什么？如果它的唯一目的只是包装 COM 类，则不需要它：COM 类/接口可直接从 C# 中使用。

# c# - 使用本地 DBSet 进行多个查询

> ID：14385527
> 
> 赞同：0
> 
> 时间：2013-01-17T18:17:45.770
> 
> 标签：c#, wpf, entity-framework

我正在尝试使用本地 DBSet 运行查询，但我提出的两个解决方案存在问题。

解决方案 1：这将运行查询并将我的查询结果绑定到我的结果控件，并且可以编辑数据并将其保存到数据库中。但是，如果我尝试在同一个表上运行另一个查询（如果我切换表一切都很好），结果项不会更新（它会添加任何新结果，但任何不应再存在的旧结果都保留在那里）

```
 //This part gets a DBSet from the context with the passed in table
            Type t = context.GetType();
            dynamic myDBSet= t.InvokeMember(table,
                        BindingFlags.DeclaredOnly |
                        BindingFlags.Public | BindingFlags.NonPublic |
                        BindingFlags.Instance | BindingFlags.GetProperty, null, context, new object[0]);

            //This is the query I want to run. I am then loading it into the localDBSet
            ((IQueryable)myDBSet).AsQueryable().Where(condition).Load();
            results.ItemsSource = myDBSet.Local; 
```

解决方案 2：这将运行查询并正确绑定数据。此外，所有新查询的数据都会更新，但数据网格中的数据不再可编辑

```
 //This part gets a DBSet from the context with the passed in table
            Type t = context.GetType();
            dynamic myDBSet= t.InvokeMember(table,
                        BindingFlags.DeclaredOnly |
                        BindingFlags.Public | BindingFlags.NonPublic |
                        BindingFlags.Instance | BindingFlags.GetProperty, null, context, new object[0]);

            //This is the query I want to run. I am then loading it into the localDBSet
            ((IQueryable)myDBSet).AsQueryable().Where(condition).Load();
            DbSet copiedDBSet= myDBSet;
            results.ItemsSource = copiedDBSet.Local.AsQueryable().Where(condition); 
```

有没有人有一个解决方案可以让我运行多个查询并仍然编辑数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:20:00.867

> 有没有人有一个解决方案可以让我运行多个查询并仍然编辑数据？

每个查询使用一个上下文。

这样您就可以使用解决方案 1 并直接绑定到本地 observable 集合。如果您不想要以前的查询结果，那么没有理由保留上下文。您动态调用上下文 dbset 方法而不使用泛型的任何原因`context.Set<T>()`？

# makefile - Giza++安装，FORTRAN问题

> ID：14385537
> 
> 赞同：1
> 
> 时间：2013-01-17T18:18:29.590
> 
> 标签：makefile, fortran, fpic, giza++

我正在尝试在 Ubuntu 12.10 64 位上安装 Giza++ 和 Moses。虽然让我不断遇到同样的问题：

```
Finished building giza

cp ../lib/libgiza.a /usr/local/lib/ 
```

...................................

```
giza-pgplot.o -L/usr/X11R6//lib -lX11 -L/usr/X11R6//lib -lcairo -lm  -L/usr/local /lib/x86_64/ -lgfortran

/usr/bin/ld: giza-fortran.o: relocation R_X86_64_32 against `.rodata' can not be used when making a shared object; recompile with -fPIC

giza-fortran.o: could not read symbols: Bad value
collect2: error: ld returned 1 exit status

make[1]: *** [../lib/libpgplot.so] Error 1

make[1]: Leaving directory `/home/maria/moses/giza/build'

make: *** [install] Error 2 " 
```

谷歌搜索没有多大帮助。对于如何解决此问题的任何提示，我将不胜感激。我应该怎么做才能用 -fPIC 重新编译它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:45:14.870

这个问题只存在于从 svn 中检出的 giza 中。这个来自 tar.gz [http://code.google.com/p/giza-pp/downloads/list](http://code.google.com/p/giza-pp/downloads/list)安装没有任何问题。不管是什么...

# locale - 我应该为多语言软件使用哪些标准语言代码？

> ID：14385541
> 
> 赞同：3
> 
> 时间：2013-01-17T18:18:40.037
> 
> 标签：locale, multilingual, globalization

我经常看到缩写“en-US”，它对应于 ISO639-1 中标准化的 2 字符语言代码。我也了解语言标签的格式通常由一个主要语言（子标签）代码组成，然后是一系列用破折号分隔的其他子标签，如[https://www.rfc-editor.org/rfc/rfc5646](https://www.rfc-editor.org/rfc/rfc5646)中所述。

该链接提到在 ISO639-2、ISO639-3 和 ISO639-5 中还定义了 3 个字母的语言代码。

尽管如此，这里仍然为 Windows/.NET 定义了更多代码：http: [//msdn.microsoft.com/en-us/goglobal/bb896001.aspx](http://msdn.microsoft.com/en-us/goglobal/bb896001.aspx)。这些将语言标签称为“文化名称”，并为“语言名称”使用不同的 3 字符代码。因此，“文化名称”似乎是 2 个字符的语言代码，尽管我不确定它们为什么在 Windows 版本之间有所不同，或者它们遵循标准语言代码的程度如何。“en-US”真的是“语言代码”还是“文化名称”？

如果我正在开发使用语言代码的软件，我应该使用哪个标准？（2 字符代码还是 3 字符代码？如果是 3 字符，那么 ISO639-2、3 或 5？）

为什么我要选择一个而不是另一个？（对于操作系统平台或编程框架的兼容性？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:11:17.203

[Bcp47](http://tools.ietf.org/html/bcp47)是识别语言的行业最佳实践标准。您应该使用这些语言标签。Bcp47 规定，如果可以使用 2 字母或 3 字母标签来识别语言，则应使用 2 字母标签。

文化和语言环境与语言标签在它们如何构思区域信息方面是不同的。语言标签中的地区信息标识特定方言的来源（en-US 是美国英语或起源于美国的各种英语），区域设置中的地区信息标识信息相关的位置。由于大多数美国英语使用者也居住在美国，因此在提供诸如如何拼写单词或格式化日期或数字等信息时，这种区别并不重要。

Windows 正在从区域设置或文化的概念转向更具表现力的语言和区域概念（单独标识），这使我们能够识别居住在英国的美式英语使用者等情况。

请注意，在某些情况下，Windows 仍然使用早于该标准的旧名称，并且根据您依赖操作系统的方式，您可能需要在标准兼容名称和旧名称之间进行映射。

# ios - 重命名后项目崩溃

> ID：14385542
> 
> 赞同：9
> 
> 时间：2013-01-17T18:18:41.493
> 
> 标签：ios, xcode, rename

如果我在导航器视图中更改 XCode 中 iOS 项目的名称：

[Xcode 4中Project-> Rename的等价物是什么](https://stackoverflow.com/questions/6077876/what-is-the-equivalent-of-project-rename-in-xcode-4)

或者在 Inspector 中，像这样：

[http://woolybeastsoftware.com/woolyblog/2012/01/22/xcode-4-renaming-projects/](http://woolybeastsoftware.com/woolyblog/2012/01/22/xcode-4-renaming-projects/)

...XCode 意外退出？有人遇到这个问题吗？

为什么会发生这种情况，如何避免？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T19:49:33.553

如果您的 Xcode 项目已损坏，您可以执行以下操作，

*   在查找器中，右键单击您的 .xcodeproject 文件，然后单击显示包内容。
*   然后右键单击您的 project.pbxproj 并在一些文本编辑器中打开它。
*   然后搜索您使用的先前项目名称并手动将其重命名为新名称。
*   更改后保存，然后重新打开项目。

原因是因为存储与项目相关的所有详细信息的 project.pbxproj 文件已损坏，导致 Xcode 无法解析它并因此崩溃。理想情况下，重命名时不应该发生这种情况，但在您的情况下，它以某种方式被损坏了。——</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T07:22:41.917

升级到 Xcode 6.3 后我遇到了这个问题。降级到 6.2 后，它再次正常工作。所以看起来某些版本的 Xcode 处理重命名比其他版本更好。你在这里找到一个旧版本：[https](https://developer.apple.com/downloads/index.action?name=Xcode) ://developer.apple.com/downloads/index.action?name= Xcode 希望这可以帮助别人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:58:15.613

还有一种更简单的方法：转到构建设置-> 搜索“产品名称”并重命名。

# php - 不打印mysql表中的所有行

> ID：14385547
> 
> 赞同：1
> 
> 时间：2013-01-17T18:19:05.097
> 
> 标签：php, mysql

我正在为私人目的创建一个电影数据库。作为数据库的一部分，我希望能够通过按流派排序、电影的起始字母或只显示所有来显示电影。

我想在三列表中显示命中，直到数据库表中的所有行都被打印出来。

例如：

```
Ice age 1     Ice age 2     Ice age 3

Die Hard 1    Die Hard 2    Die hard 3 
```

下面的代码会发生什么（当所有电影都应该显示时使用）是它在 39 行后停止，即使我知道它是 50 行，mysql_num_rows() 返回 50，当我刚刚在 1 列中打印完整的 db 表时，我有50行。

```
$counterone = 0;
  $countertwo = 0;
  if ($_movietype == 'showmeeverything')
  {
    $movieresult = mysql_query("SELECT url,title FROM movies ORDER BY title");
    if(mysql_num_rows($movieresult) == 0)
    {
        nomovie();
    }

    echo '<p align="center"><a href="index.php">Go back</a></p>';
    echo '<table border="1" cellspacing="2" cellpadding=2" align="center">';
    echo '<tr><td colspan="3" align="center"><b>Title</b></td></tr>';

    echo mysql_num_rows($movieresult);
    while ($counterone < mysql_num_rows($movieresult))
    {
        $counterone++;
        echo '<tr>';
        while (($result = mysql_fetch_array($movieresult)) && $countertwo < 3)
        {
            echo '<td>';
            echo '<a href="'.$result['url'].'">' . $result['title'] . '</a>';
            echo '</td>';
            $countertwo++;
        }
    echo '</tr>';
    $countertwo = 0;
    }
    echo '</table>';
    echo '<p align="center"><a align="center" href="index.php">Go back</a></p>';
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:26:02.487

你没有`$counterone`在正确的位置增加。您正在计算表 ROWS，但正在处理记录数。$counterone 应该在内部`while($result)`循环中。一旦它在那里， $countertwo 是多余的。

试试这个：

```
$counter = 0;
while($row = mysql_fetch_array($movieresult)) {
   if ($counter % 3 == 0)
       echo '<tr>';
   }
   echo "<td> blah blah blah </td>";
   if ($counter % 3 == 2) {
       echo '</tr>';
   }
   $counter++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:24:53.347

尝试这个：

```
$counterone = 0;
$countertwo = 0;
if ($_movietype == 'showmeeverything')
 {
 $movieresult = mysql_query("SELECT url,title FROM movies ORDER BY title");
 if(mysql_num_rows($movieresult) == 0)
{
    nomovie();
}

echo '<p align="center"><a href="index.php">Go back</a></p>';
echo '<table border="1" cellspacing="2" cellpadding=2" align="center">';
echo '<tr><td colspan="3" align="center"><b>Title</b></td></tr>';

echo mysql_num_rows($movieresult);
$numrows =  mysql_num_rows($movieresult);
while ($counterone < $numrows)
{
    $counterone++;
    echo '<tr>';
    while (($result = mysql_fetch_array($movieresult)) && $countertwo < 3)
    {
        echo '<td>';
        echo '<a href="'.$result['url'].'">' . $result['title'] . '</a>';
        echo '</td>';
        $countertwo++;
    }
echo '</tr>';
$countertwo = 0;
}
echo '</table>';
echo '<p align="center"><a align="center" href="index.php">Go back</a></p>'; 
```

}

# javascript - 如何在jquery中启用无限滚动

> ID：14385549
> 
> 赞同：1
> 
> 时间：2013-01-17T18:19:09.117
> 
> 标签：javascript, jquery

我在以下标记上使用[无限滚动插件。](https://github.com/paulirish/infinite-scroll)在字体按钮 div 中，我们正在加载 google 字体，而不是在回调中，我们创建所有 google 字体系列名称的按钮，将按钮附加到 li 项中，而不是将 li 附加到 ul 中，最后将 ul 附加到 div#fontsbutton 中。

```
<div id="fontsbutton" class="container" style="width: 450px; height: 100px; overflow: auto;">
</div>
<a id="next" href="index2.html">next page?</a> 
```

我的JS代码如下：

```
$.ajax({
    url: "https://www.googleapis.com/webfonts/v1/webfonts?key=xxxxxx",
    type: 'GET',
    dataType: 'JSONP',
    success: function (fonts) {   //fetch all google fonts ; data returned is an array 

        var ul = $("<ul />");
        $.each(fonts.items, function (index, value) {
            var li = $("<li style='list-style:none;float:left;'/>");
            var button = $("<button />").css("font-family", value.family).html(value.family);
            li.append(button);
            ul.append(li);
        });
        $("#fontsbutton").append(ul);

        $('#fontsbutton').infinitescroll({
            navSelector: "#next:last",
            nextSelector: "a#next:last",
            itemSelector: "#fontsbutton ul li",
            binder: $("#fontsbutton"),
            debug: true,
            dataType: 'json',
            loading: {
                finished: undefined,
                finishedMsg: "<em>Congratulations, you've reached the end of the internet.</em>",
                msg: null,
                msgText: "<em>Loading the next set of posts...</em>",
                selector: null,
                speed: 'fast',
                start: undefined
            },
            state: {
                isDuringAjax: false,
                isInvalidPage: false,
                isDestroyed: false,
                isDone: false, // For when it goes all the way through the archive.
                isPaused: false,
                currPage: 1
            }
       }); 
```

无限滚动不起作用。谁能告诉我我在这里做错了什么？

# c++ - C++ 字符串流

> ID：14385552
> 
> 赞同：2
> 
> 时间：2013-01-17T18:19:24.970
> 
> 标签：c++, string, stringstream

执行此操作时 stringstream 如何工作：

```
stringstream ss;
ss << "123" << "abc"; 
```

它是创建一个一次性的“123abc”字符串还是对字符串流连续执行这两个操作？

我想复制该功能，但没有重载我似乎使用两个参数，如上面的代码......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T18:21:46.323

这相当于对 << 运算符进行两个单独的函数调用：

```
(ss.operator<<("123")).operator<<("abc") 
```

所以是的，它“连续”执行这两项操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T18:30:36.933

实际上它等价于：

```
std::operator<<(std::operator<<(ss, "123"), "abc"); 
```

请注意，**没有作为参数的成员**函数`const char*`。它是一个非成员函数，并`ss`作为第一个参数传递给它，并`const char*`作为第二个参数传递。函数返回`std::ostream&`，然后再次传递给它。它更像是这样的：

```
print( print (ss, "123"), "abc"); //just for clarity 
```

这意味着有两个函数调用。替换`print`为`std::operator<<`。现在一切都会清楚了。

希望有帮助。

* * *

另一个答案是这样说的：

```
(ss.operator<<("123")).operator<<("abc") //copied from other answer (wrong) 
```

是错的！`operator<<`这是错误的，因为它假定`const char*`作为参数的参数是一个不正确的成员函数！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T18:26:26.983

`std::stringstream::operator<<(const char*)`返回一个`std::stringstream&`。

这种技术可以让你“链接”它。

这并不完全正确——但对于您的目的而言，它几乎等同于事实。

一个稍微更准确的说法是`std::stringstream& operator<<(std::stringstream&, const char*)`可以链接。

一个更准确的陈述是`ostream& operator<<(ostream&, const char*)`存在，并且`std::stringstream`是一个`ostream`，然后重载决议`<<`调用它。

# php - Twitter Bootstrap Modal 在两个选项卡中都不起作用

> ID：14385555
> 
> 赞同：2
> 
> 时间：2013-01-17T18:19:34.767
> 
> 标签：php, twitter-bootstrap

我将 Twitter Bootstrap 用于选项卡和模式。我有两个使用相同代码的选项卡。在第一个选项卡中，模式可以完美运行，但在第二个选项卡中，屏幕会变暗，但模式不会出现。

这是我在 list.php 中调用模式的代码（两个选项卡中使用的代码相同）：

```
<a type="button" href="edit.php?id='.$id.'" data-target="#edit_modal" data-toggle="modal">Edit</a> 
```

这是我在 list.php 中的模式

```
<div class="modal hide fade" id="edit_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times</button>
    <h3>Edit Testimonials</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
</div> 
```

这是edit.php，模态的真实主体是

```
<div id="edit_modal"> 
  <div class="modal-body">
  <?php echo ($name_error != "") ? $name_error : ""; ?>
  <form class="form-horizontal" action="edit.php?id=<?php echo $id; ?>" method="post">
    <div class="control-group">
      <label class="control-label">Testimonial</label>
      <div class="controls">
        <textarea class="input-xlarge" name="body" cols=100 rows=5><?php echo $testimonial['body']?></textarea>
      </div>
    </div>
    <div class="control-group">
      <label class="control-label">Author</label>
      <div class="controls">
        <textarea class="input-xlarge" name="author" cols=100 rows=5><?php echo $testimonial['author']?></textarea>
      </div>
    </div>
    </div>
    <div class="modal-footer">
      <input type="submit" class="btn btn-primary" value="Update Testimonial" name="submit-form" />
      <a href="#" class="btn" data-dismiss="modal">Close</a>  
    </div>
  </form>
</div> 
```

# windows-8 - Metro风格应用程序中的串行通信？

> ID：14385557
> 
> 赞同：0
> 
> 时间：2013-01-17T18:19:38.833
> 
> 标签：windows-8, microsoft-metro, serial-communication

我正在开发 Metro 风格的应用程序，它应该使用串行通信从外部设备读取数据，但不幸的是 Metro 应用程序不支持**“串行和并行端口 API”**。所以我想使用**超级终端**从串口读取数据并在我的 Metro 应用程序中使用它。有没有办法在 Metro 风格应用程序中使用 C# 直接从超级终端访问数据？如果没有，还有其他方法可以从 Metro 风格应用程序中的串行端口访问数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:56:24.827

您也不能使用 Hyperterminal 进行这项工作。商店应用程序在其中运行的沙箱明确挫败了商店应用程序可能使用进程间通信机制的任何尝试。

问问自己在商店中发布这样的应用程序是否有意义。访问商店的用户拥有使您的应用程序有用所需的硬件的可能性非常小。这些类型的应用程序将在很长一段时间内保留桌面应用程序。如果设备制造商看到了让他的设备在商店应用程序中运行的市场机会，那么他将为它创建一个与商店兼容的驱动程序。但这取决于他们，你不能自己做。

# javascript - 如何使用代码注入调试 Chrome 扩展示例？

> ID：14385560
> 
> 赞同：9
> 
> 时间：2013-01-17T18:19:43.240
> 
> 标签：javascript, google-chrome-extension

也许这个问题有点菜鸟风格，但我不明白这个 JavaScript 的东西。我的问题：如何调试以下 [chrome 扩展示例](http://developer.chrome.com/extensions/examples/api/downloads/download_links.zip)的注入代码？文件 popup.js 执行 send_links.js （这是注入的文件，如果我理解正确的话）。我想调试 send_links.js。我无法设置任何断点，因为我在 Chrome 的开发者工具中看不到 send_links.js。我尝试了命令“调试器；” 在 send_links.js 但它不起作用。"console.log("废话");" 命令也被忽略。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T11:46:25.443

`debugger`如果您在按下操作按钮之前打开当前选项卡的开发人员工具，则该关键字将起作用。

此外，如果您希望脚本显示其名称，请在 中的任意位置添加以下行`send_links.js`：

```
//@ sourceURL=send_links.js 
```

然后脚本将显示在当前选项卡的开发人员工具的“内容脚本”选项卡中。在那里你可以设置断点等。但是在按下按钮之前，您需要始终打开选项卡的开发工具。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T18:40:45.067

All `Injected Files`or `Content Scripts`are Exposed to Page `Developer Tools`，您可以设置断点以及您在常规 Java 脚本页面上执行的所有常规操作。

[![图片](../Images/b470ae3f9769a61cb8c89ce3e5df497f.png)](https://i.stack.imgur.com/h1FwI.png)
[（来源：[google.com](https://developers.google.com/chrome-developer-tools/docs/scripts-files/scripts_panel_navigator.png)）]

您的所有控制台日志都出现在它们被注入的页面中。

## 前任：

如果我注入[http://www.google.co.in/](http://www.google.co.in/)`console.log(document.getElementsByTagName('body')[0].style);` ，那么我需要打开[http://www.google.co.in/](http://www.google.co.in/)页面的 devtools 并查看其控制台。

![在此处输入图像描述](../Images/1812a0fc1102a69dfd005beb68e69be5.png)

出现的输出类似于常规调试结果。

# 编辑 1

它们通过[chrome.tabs.executeScript()](https://developer.chrome.com/extensions/tabs#method-executeScript)公开，但间接地，当您设置`debugger;`命令时，您可以检查代码。

# 示范

如果一些示例代码注入

```
chrome.tabs.executeScript(35, {
    "code": "console.log('hi');debugger;//@ sourceURL=send_links.js"
}); 
```

页面调试器显示正在注入的脚本。

![在此处输入图像描述](../Images/d90bcbab432bee6ff36aca3d40a5844e.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T21:12:51.157

我猜这是因为您在选项卡上而不是在扩展上打开了调试器工具。右键单击扩展程序的图标，然后选择**检查弹出**菜单项。您可以在此页面上找到更多信息[http://developer.chrome.com/extensions/tut_debugging.html](http://developer.chrome.com/extensions/tut_debugging.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-18T18:48:43.810

在这种情况下，在您打开弹出窗口之前不会注入脚本。弹出窗口加载后，它会注入`send_links.js`，它会在完成获取链接后立即发送一条消息。您可以反转此消息并将文件注入清单中：

```
"content_scripts": [{
  "matches": ["<all_urls>"],
  "js": ["send_links.js"]
}], 
```

添加一个消息处理程序以`send_links.js`支持发送响应

```
chrome.extension.onMessage.addListener(function(message,sender,sendResponse){
  [...]
  sendResponse(links);
}); 
```

然后用回调替换`onMessage`处理程序并`executeScript` 在弹出窗口中`sendMessage`

```
chrome.windows.getCurrent(function (currentWindow) {
  chrome.tabs.query({active: true, windowId: currentWindow.id},function(tab) {
    chrome.tabs.sendMessage(tab[0].id, {method: "getlinks"},function(links){
      for (var index in links) {
        allLinks.push(links[index]);
      }
      allLinks.sort();
      visibleLinks = allLinks;
      showLinks();
    });
  });
}); 
```

这种安排将放入`send_links.js`每个页面，以便您可以更轻松地对其进行调试。一旦它没有错误，您就可以切换回程序化注入，因为在这种情况下它更有效。`plfdheimenpnchlahmhicnkejgmhjhom`您可以在 Sources > Content Scripts > One 其中（例如）下找到该脚本。

[编辑的源文件](https://dl.dropbox.com/u/12636410/download_links.7z)

# hadoop - 查询预处理：Hadoop或分布式系统

> ID：14385561
> 
> 赞同：0
> 
> 时间：2013-01-17T18:19:44.380
> 
> 标签：hadoop, mapreduce, search-engine, distributed-computing

我正在尝试通过预处理所有结果来优化搜索引擎的性能。我们有大约 50,000 个搜索词。我打算事先搜索这 50k 个术语并将其保存在内存中（memcached/redis）。在我的情况下，搜索所有 50k 个术语需要超过一天的时间，因为我们进行了深度语义搜索。所以我打算将搜索（预处理）分布在几个节点上。我正在考虑使用hadoop。我的输入大小非常小。即使总搜索词超过 50k，也可能不到 1MB。但是搜索每个术语需要花费最少的时间，即更多面向计算而不是面向数据。所以我想知道是否应该使用 Hadoop 或构建自己的分布式系统。我记得读到主要在输入非常大的情况下使用 hadoop。请建议我如何去做。

我读了hadoop以块大小读取数据。即每个jvm/mapper 64mb。是否可以使其成为行数而不是块大小。示例：每个映射器获得 1000 行而不是 64mb。有没有可能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:21:01.193

Hadoop 绝对可以处理这个任务。是的，Hadoop 的大部分旨在处理具有非常大的输入或输出数据的作业，但这不是它的唯一目的。它可以很好地用于接近任何类型的分布式批处理。你会想看看[NLineInputFormat](http://hadoop.apache.org/docs/r0.20.1/api/org/apache/hadoop/mapred/lib/NLineInputFormat.html)；它允许您根据您想要的行数来拆分您的输入。

# powershell - 遍历多维数组

> ID：14385563
> 
> 赞同：0
> 
> 时间：2013-01-17T18:19:53.457
> 
> 标签：powershell

我觉得我一直在烦扰每个人，很抱歉“又是这个人”。

我的四连胜游戏现在可以正常工作，直到需要检查四连胜。X 和 O 像魅力一样添加到列中，并且网格显示正确。现在的重点是，我想在我的多维数组中连续检查四个，但是使用 if 语句似乎并不是真正适合我的方法，因为我必须这样写：

```
if ($CreateBoard[1,0] -and $CreateBoard[1,1] -and $CreateBoard[1,2] -and $CreateBoard[1,3] -eq "X") {Write-host "Exit script!"}
if ($CreateBoard[1,1] -and $CreateBoard[1,2] -and $CreateBoard[1,3] -and $CreateBoard[1,4] -eq "X") {Write-host "Exit script!"}
if ($CreateBoard[1,2] -and $CreateBoard[1,3] -and $CreateBoard[1,4] -and $CreateBoard[1,5] -eq "X") {Write-host "Exit script!"} 
if ($CreateBoard[1,3] -and $CreateBoard[1,4] -and $CreateBoard[1,5] -and $CreateBoard[1,6] -eq "X") {Write-host "Exit script!"} 
if ($CreateBoard[1,4] -and $CreateBoard[1,5] -and $CreateBoard[1,6] -and $CreateBoard[1,7] -eq "X") {Write-host "Exit script!"} 
if ($CreateBoard[1,5] -and $CreateBoard[1,6] -and $CreateBoard[1,7] -and $CreateBoard[1,8] -eq "X") {Write-host "Exit script!"} 
if ($CreateBoard[1,6] -and $CreateBoard[1,7] -and $CreateBoard[1,8] -and $CreateBoard[1,9] -eq "X") {Write-host "Exit script!"}
if ($CreateBoard[1,7] -and $CreateBoard[1,8] -and $CreateBoard[1,9] -and $CreateBoard[1,10] -eq "X") {Write-host "Exit script!"} 
```

对于每一列，然后是行，然后是对角线。现在的问题是：有没有一种快速的方法可以通过我的 10x10 网格（我想使用 for 循环的 Foreach-Object？），如果是，你能提供一个基本的例子吗？（如果重要的话，我正在尝试连续查找 4 次字符串“X”或“O”）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:07:49.737

这更像是一个算法问题而不是 PowerShell 问题。:-) 也就是说，一种简单的方法是这样的：

```
function FindFourInARow($brd, $startRow, $startCol)
{
    $numRows = $brd.GetLength(0);
    $numCols = $brd.GetLength(0);

    #search horizontal
    $found = 0;
    $cnt  = 0;
    for ($col = $startCol; $col -lt $numCols -and $cnt -lt 4; $col++, $cnt++)
    {
        if ($brd[$startRow, $col] -eq 'X')
        {
            $found += 1
            if ($found -eq 4) { return $true }
        }
    }

    #search vertical
    $found = 0;
    $cnt = 0;
    for ($row = $startRow; $row -lt $numRows -and $cnt -lt 4; $row++, $cnt++)
    {
        if ($brd[$row, $startCol] -eq 'X')
        {
            $found += 1
            if ($found -eq 4) { return $true }
        }
    }

    #search diag forwards
    $found = 0;
    $row = $startRow
    $col = $startCol
    $cnt = 0;
    for (;$row -lt $numRows -and $col -lt $numCols -and $cnt -lt 4; 
          $row++, $col++, $cnt++)
    {
        if ($brd[$row, $col] -eq 'X')
        {
            $found += 1
            if ($found -eq 4) { return $true }
        }
    }

    return $false
}

# TODO: implement search diag backwards

$brd = New-Object 'char[,]' 10,10
$brd[2,2] = $brd[3,3] = $brd[4,4] = $brd[5,5] = 'X'

$numRows = 10
$numCols = 10
for ($r = 0; $r -lt ($numRows - 3); $r++)
{
    for ($c = 0; $c -lt ($numCols - 3); $c++)
    {
        if (FindFourInARow $brd $r $c)
        {
            "Found four in a row at $r,$c"
            $r = $numRows
            break;
        }
    }
} 
```

我刚刚将其直接输入SO。它可能有一些错误，但它应该为您提供基本的要点。

# twitter - Twitter aouth API：我每次都必须对用户进行身份验证吗？

> ID：14385567
> 
> 赞同：0
> 
> 时间：2013-01-17T18:20:05.937
> 
> 标签：twitter, twitter-oauth

因此，在用户在我的网站上使用他的 Twitter 帐户登录并获得令牌和密码后，当他移动到其他页面时，我是否必须生成新的令牌和密码才能执行某些操作，例如获取他的 Twitter 用户名或者我可以向 api.twitter.com/1/account/verify_credentials.json 提出一个简单的请求，附加我之前在页面上获得的所有数据，它会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:12:24.563

当您获得用户的令牌和密码后，您可以代表该用户向 twitter 发出请求。

因此，要使用这些令牌和机密以供将来使用，您应该将其与用户的凭据一起保存在某个数据存储中。只要您将这些信息附加到请求标头，您就可以代表 twitter 用户发出请求，而无需再请求用户本身的许可。

参考：[https ://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request)

干杯

# ruby-on-rails - 插入 Rails 而不发送空值

> ID：14385570
> 
> 赞同：1
> 
> 时间：2013-01-17T18:20:08.857
> 
> 标签：ruby-on-rails, sql-server, rails-activerecord

我在 SQL Server 中设置了一个表，其默认值为`uniqueidentifier not null`.

我不希望 ActiveRecord 将空值发送到数据库，但它会导致“无法将空值插入非空列”错误。

如何在不发送具有默认值的列的情况下保存 ActiveRecord？我真的不想：

1.  使列可以为空。
2.  使用 Rails 生成 GUID 并将其发送到数据库
3.  手动编写查询。

我*可以*做 2 或 3 这似乎*必须*在普通的 ActiveRecord/RoR 中可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:46:11.773

不幸的是，我认为这是带有 Sql Server 的 Rails 的一个问题，因为使用带有 MySql 的 Rails 可以正确处理默认值（以及这种情况）。可能还有其他选项，但最快的可能是将 before_create 回调添加到您的 ActiveRecord 类并在那里设置 guid。

# javascript - 选择时按钮颜色变化

> ID：14385572
> 
> 赞同：0
> 
> 时间：2013-01-17T18:20:14.717
> 
> 标签：javascript, dom-events, javascript-framework

我在一个 HTML 页面中有 10 个按钮。我想在选择按钮时使用 JavaScript 更改特定按钮（按钮 1）的颜色。当用户单击另一个按钮（按钮 2）时，该按钮的颜色应更改，并且应取消选择第一个选择的按钮（按钮 1）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:28:24.370

您可以为所选按钮定义不同的 CSS 类。

```
.button-selected {
    border: 2px solid red;
} 
```

然后当一个按钮被点击时，你可以像这样调用函数：

```
function focusMe(button) {
    document.getElementsByClassName("button-selected")[0].className = "";
    button.className = "button-selected";
} 
```

将此添加到 HTML

```
<button name="button1" onClick="focusMe(this);" /> 
```

# php - 使用特定模板过滤搜索到帖子

> ID：14385573
> 
> 赞同：1
> 
> 时间：2013-01-17T18:20:15.640
> 
> 标签：php, wordpress

有没有办法使用 Wordpress 修改原生搜索功能，以便只显示特定页面模板的帖子。例如：

add_filter('pre_get_posts','searchfilter');

```
function searchfilter($query) {

    if ($query->is_search) {
        $query->set('post_template','a-template-name'); // Pseudocode
    }

    return $query;

} 
```

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:15:37.303

试试这个：

```
function searchfilter($query) {

if ($query->is_search) {
    $query->set('meta_key','_wp_page_template');
    $query->set('meta_value', 'page-some-template.php'); //Change filename to yours
}

return $query;

} 
```

# c# - 在（潜在的）多行字符串中查找以特定值开头和结尾的值

> ID：14385575
> 
> 赞同：1
> 
> 时间：2013-01-17T18:20:20.483
> 
> 标签：c#, replace

我确定这个问题已经在某个地方被问过（也许在这里），但我找不到任何信息，这可能是因为我不确定如何准确描述它。

本质上，我正在寻找高级查找和替换。更换我确信我可以弄清楚它什么时候可以使用，但现在我无法找到工作。

在一个应用程序中，有很多 htm 文件被加载。用户选择一个文件并对其执行操作。完成此操作后，我希望系统再扫描一次文件以确保没有问题。例如，此字符串可能存在于 htm 文件中：

```
<?strange_tag_start 
     name="var_value" ?>Name<?strange_tag_end ?> 
```

而且，是的，它可以像这样被打破。以上不是问题，除非发生这种情况：

```
<?strange_tag_start 
     name="var_value" ?><?strange_tag_start 
     name="var_value" ?>Name<?strange_tag_end ?><?strange_tag_end ?> 
```

换行符可能不同。我想要做的是在文档中搜索包含`<?strange_tag`然后包含`<?strange_tag_end ?>`. 如果找到这些，我想在字符串中检查是否有 another`<?strange_tag_start`或 another `<?strange_tag_end ?>`。

我最初尝试读取文件并获取特定值的每个索引，然后尝试比较它们。但是，文件中可能存在以下内容，这些内容完全可以，但系统会找到它们并为我标记它们：

```
<?strange_tag_start 
     name="var_value" ?>Name<?strange_tag_end ?> There is other text here
and some more text on another line. Then this <?strange_tag_start name="var_value"
             ?>Name<?strange_tag_end ?> is present. 
```

它归结为一个系统（例如存在于某些应用程序中），其中指定了字符串的开头，指定了字符串的结尾，然后系统检查它是否包含字符串。

如果这没有意义或者您需要更多说明，我可以这样做。

**更新**

让我澄清一下。我有以下多行字符串：

```
I want to preserve<?start_foo  
                bar="value" ?> the content  
<?start_baz qux="value" ?>Name  
<?end-baz_qux ?>that is between weird tags. 
```

我想找到`<?start_foo bar="value"` 我也想找到`<?end-baz_qux ?>`（注意：其中可能有两个彼此相邻。）找到这些后，我想检查该字符串中是否有另一个`<?start_foo bar=`（注意：该标签中的“值”可以也不同。）然后我想删除不应该存在的中间内容，所以我最终得到：

```
I want to preserve<?start_foo  
                bar="value" ?> the content 
<?end-baz_qux ?>that is between weird tags. 
```

这是另一个示例，希望可以使其更清楚：

```
Back <?rh-udv_start name="ctrl_btn" ?><?rh-udv_start name="ctrl_btn" 
    ?>button<?rh-udv_end ?><?rh-udv_end ?> to 
```

完成搜索后，我应该得到这个：

```
Back <?rh-udv_start name="ctrl_btn" ?>button<?rh-udv_end ?> to 
```

本质上，我正在寻找一种说法：

1.  使用 VALUE_X 查找“开始”的字符串（误导为“开始”可能位于字符串的中间）。
2.  如果找到，则在其后找到 VALUE_Y（如果有 VALUE_X，则应始终找到）。
3.  检查 VALUE_Y 之后是否还有另一个 VALUE_Y。
4.  检查 VALUE_X 到 VALUE_Y 的字符串内部是否包含另一个 VALUE_X。
5.  如果还有另一个 VALUE_X，请将其删除。如果*紧跟*在 VALUE_Y 之后有一个 VALUE_Y，则删除第二个 VALUE_Y。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:26:43.313

我相信

```
<\?.*?\?> 
```

可以找到大多数正则表达式风格的标签（包括 Visual Studio 的 - 不确定你使用的是哪个）。

如果你也想替换奇怪标签之间的内容，那你能给我们举一个更现实的例子吗？为了提供正确的正则表达式，准确了解您要匹配的内容（或一些非常接近的近似值）至关重要。例如

```
<?start_strange_tag blah="foo"?>Name<?end_strange_tag?> 
```

与

```
<?foo bar="baz"?>Name<?/foo?> 
```

这不同于

```
<?start_foo bar="baz"?>Name<?foo_end?> 
```

等等。

**更新**

根据您在下面的评论，我将假设您的文档如下所示：

```
I want to preserve<?start_foo  
                    bar=\"value\" ?> the content  
<?start_baz qux=\"value\" ?>Name  
<?end-baz_qux ?>that is not between weird tags. 
```

并且您希望结果是：

```
I want to preserve the content  
that is not between weird tags. 
```

我还将假设您使用的是 .NET 正则表达式程序集（而不是 Visual Studio 内置的正则表达式。是的，它们是不同的。）

如果是这样的话，那么你可以使用这样的东西：

```
static void Main( string[] args )
{

    string l_input =
        "I want to preserve<?start_foo \n" + 
        "                    bar=\"value\" ?> the content\n" +
        "<?start_baz qux=\"value\" ?>Name\n" +
        "<?end-baz_qux ?>that is not between weird tags.";

    string[] l_singleTags = { "foo" };
    string[] l_multiTags = { "baz" };

    // Removing the single tags is easy:

    foreach ( var l_singleTag in l_singleTags )
        l_input = Regex.Replace( l_input, @"<\?start_" + Regex.Escape( l_singleTag ) + @"\b.*?\?>", "", RegexOptions.Singleline );

    // Removing the multi tags is not too bad:

    foreach ( var l_multiTag in l_multiTags )
        l_input = Regex.Replace( l_input, @"<\?start_" + Regex.Escape( l_multiTag ) + @" (?<param>\w+).*?\?>.*?<\?end-" + Regex.Escape( l_multiTag ) + @"_\k<param>.*?\?>", "", RegexOptions.Singleline );

    Console.WriteLine( l_input );

    Console.ReadKey( true );

} 
```

`l_input`变成：

```
I want to preserve the content  
that is not between weird tags. 
```

**更新 2**

为了响应您的问题更新，请尝试以下代码：

```
static void Main( string[] args )
{

    string l_input =
        "Back <?rh-udv_start name=\"ctrl_btn\" ?><?rh-udv_start name=\"ctrl_btn\"" +
        "   ?>button<?rh-udv_end ?><?rh-udv_end ?> to";

    l_input = Regex.Replace( l_input, @"<\?(?<tagname>[-a-z]+_[a-z]+).*?\?>(?=<\?\k<tagname>)", "", RegexOptions.Singleline );

    Console.WriteLine( l_input );

    Console.ReadKey( true );

} 
```

`l_input`变成：

```
Back <?rh-udv_start name="ctrl_btn"   ?>button<?rh-udv_end ?> to 
```

它只是查找重复标签并将其删除。例如：

```
<?a_start foo="bar"?><?a_start    foo="bar"
?> 
```

第一个标签将被删除，只留下：

```
<?a_start    foo="bar"
?> 
```

结束标签也是如此。代码不会容忍标签之间的空间或内容（在这种情况下它不会删除任何一个标签）。随意使用该示例，直到您拥有所需的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:30:00.677

您可以为此使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)。我已经将它用于类似的事情，在 HTML 中查找引用并将 ID 替换为序数。在我的情况下，搜索和替换如下所示：

```
var doc = new HtmlDocument();
doc.LoadHtml(html);
// find using xpath expression
var citeNodes = doc.DocumentNode.SelectNodes("//cite[@data-citationid]");
foreach (var node in citeNodes)
{
    // do some other stuff
    node.Name = "a";
    node.SetAttributeValue("id", "r" + citation.CitationId);
    node.InnerHtml = "[" + citation.Ordinal + "]";
}
return doc.DocumentNode.InnerHtml; 
```

# javascript - 如何将单选按钮中的值乘以 Javascript 中的数字并将答案显示在文本区域内的文本字符串中？

> ID：14385577
> 
> 赞同：0
> 
> 时间：2013-01-17T18:20:27.937
> 
> 标签：javascript

我需要将单选按钮中的 user_input 乘以一个整数。user_input 是 1,2 或 3。我可以将单选按钮值拉入文本区域，但我如何获取该数字并将其乘以某个值？理想情况下，我需要 textstring += 'Fee (£): ' + (user_input) * '5' + '\n';

谢谢你的帮助！

```
 // Get value of the 'Fee' radio buttons.

user_input = '';
for (i=0;i<document.forms['example'].fee.length;i++) {
    if (document.forms['example'].fee[i].checked) {
        user_input = document.forms['example'].fee[i].value;
    }
}
textstring += 'Fee (&#163;): ' + user_input + '\n';

// Write textstring to the textarea.

document.forms['example'].output.value = ("\n*** Thank You for your reservation***"+"\n")+ textstring + ("\n*** End of Form***"+"\n"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:22:10.003

你有没有尝试过：

```
textstring += 'Fee (&#163;): ' + (user_input*5) + '\n'; 
```

# rss - RSS提要目录

> ID：14385580
> 
> 赞同：0
> 
> 时间：2013-01-17T18:20:49.920
> 
> 标签：rss, catalog

你知道是否有任何类型的 rss 源目录，其中 rss 源按国家、类别（例如世界新闻、科技新闻……）语言等进行分类。

最好的格式是计算机可以使用的格式。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:06:10.913

这是我的[http://hobieu.apphb.com/api/1/opml/root](http://hobieu.apphb.com/api/1/opml/root)

我几乎每天都在为我的开源 Android RSS 项目[https://github.com/dodyg/AndroidRivers](https://github.com/dodyg/AndroidRivers)添加新的资源。

# vb.net - 防止电子邮件被发送到 Outlook 的垃圾文件夹

> ID：14385583
> 
> 赞同：0
> 
> 时间：2013-01-17T18:20:59.050
> 
> 标签：vb.net, outlook, exchange-server

我正在编写一个应用程序，它创建一个 word 文档并将其从我们的共享邮箱通过电子邮件发送给用户。该代码工作正常，但邮件被传递到垃圾文件夹而不是收件箱。

我相信这是因为它直接来自电子邮件地址（mymailbox@company.com），而不是我们的全球地址列表（我的邮箱）中的邮箱名称。

有没有办法让 VB.Net 识别我的全局地址列表，以便我可以直接从邮箱名称发送；或者这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:15:26.100

您可以将 mailmessage.from 中的“发件人”地址设置为正确的电子邮件地址。但是，“发件人”地址通常不足以将电子邮件发送到垃圾邮件文件夹。

您可以采取几个步骤来提高您的电子邮件通过率。Rachel Gallen 上方评论中的链接很好地涵盖了这些内容。

[http://www.allspammedup.com/2009/09/7-ways-to-prevent-your-emails-being-blocked-as-spam/](http://www.allspammedup.com/2009/09/7-ways-to-prevent-your-emails-being-blocked-as-spam/)

[http://www.interspire.com/content/2006/09/28/improve-your-email-delivery-rates/](http://www.interspire.com/content/2006/09/28/improve-your-email-delivery-rates/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:37:11.203

垃圾邮件中出现某些内容的原因是收件人的电子邮件客户端和/或 ISP 设置的，而不是您可以控制的。通过使您的电子邮件具有更少的垃圾邮件特征，您可以最大限度地提高您看起来是非垃圾邮件的机会 - 如果您可以重新发送您的发送系统以将邮件创建为电子邮件而不是附件，这可能会有所帮助。

# jquery - 我不明白 bRetrieve (jquery DataTable) 的描述

> ID：14385584
> 
> 赞同：3
> 
> 时间：2013-01-17T18:21:05.700
> 
> 标签：jquery, datatables

从这个页面：

[http://datatables.net/new/1.7](http://datatables.net/new/1.7)

> 使用初始化对象检索 - $(...).dataTable({"bRetrieve":true, ...}); - 像这样在初始化后无法更改表参数，但能够只使用对 $().dataTable() 的单个调用很有用。将 bRetrieve 设置为 true，告诉 DataTables 您承认这一点。

我认为以下行是我不明白的：

> 但是能够只使用对 $().dataTable() 的一次调用很有用。将 bRetrieve 设置为 true，告诉 DataTables 您承认这一点。

相关的是 bDestroy：

> 重新初始化表 - $(...).dataTable({"bDestroy":true, ...}); - 实际上，可以重新初始化表，但它相当残酷。这将破坏旧表，然后初始化一个新表。

有人可以解释这些是如何相互作用的吗？我觉得在阅读此描述之前我应该​​理解一些假设，但显然我没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T10:08:21.363

正如数据表网站中提到的：[http ://www.datatables.net/ref](http://www.datatables.net/ref)

“bRetrieve”属性用于确认您理解的数据表，如果数据表实例已经创建而不是创建新对象，则对于特定表，数据表插件将返回现有对象。

**编辑 ：**

同样适用于“bDestroy”属性。它告诉数据表，这个表也可以被破坏。如果将此属性设置为**false**（这表明您不想破坏此表），则在对数据表对象调用 fnDestroy() 函数后，将弹出一个警告说表不能被破坏。

# php - 将动态数据从 JavaScript 传递到 PHP

> ID：14385585
> 
> 赞同：0
> 
> 时间：2013-01-17T18:21:06.183
> 
> 标签：php, javascript, html

我设置了一些“订单”页面，允许人们选择要购买的物品。当他们点击“订单”时，它会将他们带到一个页面，该页面允许他们选择每个项目的详细信息 drom 动态填充的下拉列表。这些下拉菜单处于循环中，因此每个项目都有自己的集合。

这就是我的问题开始的地方。如果订单页面上只有一件商品，它可以完美运行。从下拉列表中选择的所有信息都被拉入我的 PHP 脚本，并将其格式化为电子邮件并将订单发送给我。如果订单中的商品超过 1 件，则只会发送页面上的最后一件商品。

这是下拉菜单的代码...

```
<form name="mediumselect">
<table>
<tr>
    <td> 
        <select name="sel" onchange="selFormat(this);" style="width:200px">
        <option value="">-Please select delivery format-</option>
        <option value="File">File</option>
        <option value="Tape">Tape</option>
        <option value="Disc">Disc</option>
        </select>
    </td>
    <td>
        <select name="formats" onchange="selRate(this)" style="width:150px">
        </select>
    </td>
    <td>
        <select name="framerate" onchange="selColor(this)" style="width:150px">
        </select>
    </td> 
    <td>
        <select name="color" style="width:150px">
        </select>
    </td>
</table>
</form> 
```

这是PHP...

```
<?php

$asset = $_REQUEST['assetname'];
$medium = $_REQUEST['sel'];
$type = $_REQUEST['formats'] ;
$framerate = $_REQUEST['framerate'] ;
$color = $_REQUEST['color'] ;
$body = <<<EOD

Asset Name: $asset
Asset format: $medium
Format Type: $type
Frame Rate/Resolution: $framerate
Codec or Color Subsample: $color
EOD;

$results = <<<EOD
<html>
<head>
<title>sent message</title>
<style type="text/css">
</style>
</head>
<div align="center">One your order is submitted, a confirmation email will be sent to above email with order details.</div>
</div>
</body>
</html>
EOD;
function spamcheck($field)
{
    //filter_var() sanitizes the e-mail
    //address using FILTER_SANITIZE_EMAIL
    $field=filter_var($field, FILTER_SANITIZE_EMAIL);

    //filter_var() validates the e-mail
    //address using FILTER_VALIDATE_EMAIL
    if(filter_var($field, FILTER_VALIDATE_EMAIL))
    {
        return TRUE;
    }
    else
    {
        return FALSE;
    }
}

if (isset($_REQUEST['email']))
{
    //if "email" is filled out, proceed
    //check if the email address is invalid
    $mailcheck = spamcheck($_REQUEST['email']);
    if ($mailcheck==FALSE)
    {
        echo "Invalid input";
    } else  {
        //send email
        global $body;
        global $results;
        $email = $_REQUEST['email'] ;
        mail("~~~@gmail.com", "Subject: INCOMING ORDER", $body, "From: $email" );
        echo "$results";
    }
} else {//if "email" is not filled out, display the form
    echo "<form method='post' action='mailform.php'>
    Email: <input name='email' type='text'><br>
    Subject: <input name='subject' type='text'><br>
    Message:<br>
    <textarea name='message' rows='15' cols='40'>
    </textarea><br>
    <input type='submit'>
    </form>";
}
?> 
```

我还是 PHP 新手，如果有更好的方法来做这件事，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:32:28.857

我建议将所有 $body 值放入一个字符串中。因此，首先循环遍历每个项目，然后使用 PHP 连接 ($body . =) 添加到字符串 $body。目前您只检索一个值。也许通过遍历字段名称来更改字段名称，以了解名称后面有多少个 ++ 数字，以便遍历那些 _REQUESTS 以将这些字段放入您的 $body .= 电子邮件字符串。

# tweets - 获取推文时出现 tweepy 错误

> ID：14385598
> 
> 赞同：0
> 
> 时间：2013-01-17T18:21:47.650
> 
> 标签：tweets, tweepy

我正在通过 tweepy 收集大量推文，但过了一会儿，它停止并显示以下消息：

```
 File "build/bdist.macosx-10.8-intel/egg/tweepy/binder.py", line 185, in _call
  File "build/bdist.macosx-10.8-intel/egg/tweepy/binder.py", line 168, in execute
tweepy.error.TweepError: [{'message': 'Sorry, that page does not exist', 'code': 34}] 
```

我只收集对已经存在的推文的回复，

所以我猜是回复者拼错了原始推文的作者的情况。

是否有解决方法可以忽略这一点并继续？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:14:37.393

我自己想通了。这非常简单..您可以尝试/排除并传递错误。

```
try:
        # do something                                    
except tweepy.error.TweepError:
        pass 
```

# ruby-on-rails - 为非技术人员分发一个可执行的 Rails 应用程序以安装在服务器上

> ID：14385608
> 
> 赞同：2
> 
> 时间：2013-01-17T18:22:18.983
> 
> 标签：ruby-on-rails, jruby, software-distribution

我知道[StackOverflow 上已经提出了类似的问题](https://stackoverflow.com/questions/55711/options-for-distribution-of-an-offline-ruby-on-rails-application)，但它是在四年半前提出的，我想知道是否有比答案中提供的解决方案更新的解决方案（特别是考虑到一些提到的项目似乎已被搁置）。

简而言之，我正在用 Ruby on Rails 3.2.6 和 PostgreSQL 开发一个小型的内部社交网络应用程序。目前，该应用程序托管在 VPS (Ubuntu) 上。该应用程序几乎是一个“标准”应用程序，但同时依赖于 ImageMagick 和 FFMPEG 库。此外，每个员工在系统上都有一个帐户，因此可以从他们自己的 PC 远程上传数据。

无需过多详细介绍，该应用程序运行良好，以至于一些联系人询问他们是否可以在自己的服务器上使用该应用程序的一个版本。

显而易见的（我认为）解决方案是在 GitHub 上公开源代码，并鼓励我们的联系人克隆应用程序并将其部署到他们自己的服务器上。然而，这种方法存在各种各样的问题，尤其是我们的大多数联系人在技术上都不够熟练，无法安装正确版本的 Ruby、Rails、PostgreSQL 等，并且如果这些依赖项安装不正确，也无法调试东西.

作为替代方案，我们正在考虑创建一个可分发的“空白”（即数据库中没有内容 - 除了管理员帐户之外）版本的应用程序，我们的联系人只需要在其中设置一个Ubuntu服务器，双击可执行文件，嘿，很快，该应用程序可以在他们自己的服务器上供他们自己的员工访问。

所以，我的问题是 - 这里最合适的解决方案是什么？[最近的一篇文章](https://stackoverflow.com/questions/5941157/distributing-an-application-written-in-ruby-on-rails)建议使用[Warbler](https://github.com/jruby/warbler)（我正在考虑使用 JRuby），但对于这个 gem 是否只允许创建独立的 Rails 应用程序（即随后只能在一个人的 PC 上使用的应用程序）或应用程序，我有点困惑它可以托管在服务器上并由更广泛的人群访问。另外，应用程序必须通过相关的 gem 访问 ImageMagick 和 FFMPEG 库——我不确定这是否会影响任何决定。

我意识到这是一个非常开放的问题，因此可能没有任何简单的解决方案，但任何反馈都会最有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:29:09.787

我不确定您提供的某些链接是否已经提到它，但另一种选择是分发您的客户可以在虚拟机中加载的图像（正确安装所有内容）。这是[GitHub Enterprise](https://enterprise.github.com/)采用的方法。

# django - 过滤 Django 查询集：ValueError

> ID：14385610
> 
> 赞同：0
> 
> 时间：2013-01-17T18:22:24.850
> 
> 标签：django, forms, views

使用`HttpResponseRedirect`and`reverse`重定向到另一个视图后，我得到一个 ValueError。这是处理已发布表单的视图（该表单使用 a`ModelChoiceField`从我的`Make`模型中获取一组下拉选项：

```
def browse(request):
    thing_list = Thing.objects.all()
    if request.method == 'POST':
        form = BrowseForm(request.POST)
        if form.is_valid():
            make = form.cleaned_data['make']
            return HttpResponseRedirect(reverse('browse_makes', kwargs={'make':make}))
    else:
        form = BrowseForm()
    return render(request, 'browse.html', {'form':form, 'thing_list':thing_list}) 
```

.. 然后重定向到下一个视图，添加`make`为 kwarg 用于过滤下一个查询集：

```
def makes(request, make):
    thing_list = Thing.objects.filter(make=make)
    return render(request, 'browse-makes.html', {'thing_list':thing_list}) 
```

网址：

```
url(r'^browse/$', 'myapp.views.browse.browse', name='browse'),
url(r'^browse/(?P<make>[\w-]+)/$', 'myapp.views.browse.makes', name='browse_makes'), 
```

`ValueError: invalid literal for int() with base 10: 'Samsung'`从表单中选择选项时的结果。谷歌搜索后，仍然不知道如何解决这个问题..感谢任何想法如何解决这个错误！

* * *

编辑：

缩略型号：

```
class Thing(models.Model):
    user = models.ForeignKey(User)
    created_on = models.DateTimeField(auto_now_add=True)
    updated_on = models.DateTimeField(auto_now=True)
    slug = models.SlugField()
    make = models.ForeignKey(Make) 
```

追溯：

```
Traceback: File "/lib/python2.7/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs) File "/myproject/myapp/views/browse.py" in makes
  21\.     thing_list = Thing.objects.filter(make=make) File "/lib/python2.7/django/db/models/manager.py" in filter
  143\.         return self.get_query_set().filter(*args, **kwargs) File "/lib/python2.7/django/db/models/query.py" in filter
  624\.         return self._filter_or_exclude(False, *args, **kwargs) File "/lib/python2.7/django/db/models/query.py" in _filter_or_exclude
  642\.             clone.query.add_q(Q(*args, **kwargs)) File "/lib/python2.7/django/db/models/sql/query.py" in add_q
  1250\.                             can_reuse=used_aliases, force_having=force_having) File "/lib/python2.7/django/db/models/sql/query.py" in add_filter
  1185\.                 connector) File "/lib/python2.7/django/db/models/sql/where.py" in add
  69\.             value = obj.prepare(lookup_type, value) File "/lib/python2.7/django/db/models/sql/where.py" in prepare
  320\.             return self.field.get_prep_lookup(lookup_type, value) File "/lib/python2.7/django/db/models/fields/related.py" in get_prep_lookup
  137\.             return self._pk_trace(value, 'get_prep_lookup', lookup_type) File "/lib/python2.7/django/db/models/fields/related.py" in _pk_trace
  210\.         v = getattr(field, prep_func)(lookup_type, v, **kwargs) File "/lib/python2.7/django/db/models/fields/__init__.py" in get_prep_lookup
  310\.             return self.get_prep_value(value) File "/lib/python2.7/django/db/models/fields/__init__.py" in get_prep_value
  537\.         return int(value)

Exception Type: ValueError at /browse/Samsung/ Exception Value: invalid literal for int() with base 10: 'Samsung' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:37:29.020

如果您发布您的`Make`模型，我可以给出完整的答案。但一般来说，您直接引用`make`外键 - 这是一个 int（`Make`ID）。您正在将此 int 与导致错误的字符串`'samsung'`进行比较。`make=make`

根据您的`Make`模型具有的字符串字段，您需要引用这些字段之一。例如，如果`Make`有一个`name`接受字符串的字段：

`thing_list = Thing.objects.filter(make__name=make)`

否则，您需要传递`make`ID 而不是`'samsung'`

# android - 即使使用没有送达报告的随机手机号码，短信也始终显示“已发送短信” - android

> ID：14385611
> 
> 赞同：0
> 
> 时间：2013-01-17T18:22:25.930
> 
> 标签：android, sms

为什么每当我向联系人号码发送短信时，当我只使用像“12345678910”这样当然有11位数字的随机手机号码时，它总是显示“已发送短信”。此外，当消息实际传递与否时，它不会显示吐司。

```
private void sendSMS(String phoneNumber, String message)
{        
        sentFailed = new ArrayList<String>();

        final String phoneNumberCopy = phoneNumber;
        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
            new Intent(SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, uniqueIdPerSMS++,
                new Intent(DELIVERED), PendingIntent.FLAG_CANCEL_CURRENT);

        //---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver()
        {
            public void onReceive(Context arg0, Intent arg1)
            {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS Sent", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(getBaseContext(), "Generic failure", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(getBaseContext(), "No service", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off", 
                                Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        }, new IntentFilter(SENT));

        //---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver()
        {
            @Override
            public void onReceive(Context arg0, Intent arg1) 
            {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        sentFailed.remove(phoneNumberCopy);
                        Toast.makeText(getBaseContext(), "SMS delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case Activity.RESULT_CANCELED:
                        Toast.makeText(getBaseContext(), "SMS not delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;                        
                }
            }

        }, new IntentFilter(DELIVERED));  

        SmsManager sms = SmsManager.getDefault();

        //send sms
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T14:05:05.937

SMS SENT 出现是因为您收到了来自 onRecive 方法的发送报告。当您的消息发送时，您的 Onrecive 回调方法被调用并触发 SMS SENT Message

# powershell - Powershell命令将断开连接的用户踢出服务器

> ID：14385614
> 
> 赞同：7
> 
> 时间：2013-01-17T18:22:36.070
> 
> 标签：powershell, windows-server-2008

是否有一个 powershell 命令可以用来将“断开连接”的用户踢出服务器？一旦我知道踢单个用户的单行，我就可以编写脚本。

例如，我想踢掉下面对话框中看到的 8 个用户。

![在此处输入图像描述](../Images/ccc3cbd6df17eff5d8d317f93323edd7.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T19:32:49.840

我不能试试这个：

```
$pc = qwinsta /server:YourServerName | select-string "Disc" | select-string -notmatch "services"

if ($pc)
{
  $pc| % { 

  logoff ($_.tostring() -split ' +')[2] /server:YourServerName 

  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T18:29:15.303

在我看来，最简单的方法是使用你机器上已经存在的 logoff.exe。例如，在您的屏幕截图中注销第一个断开连接的用户：

```
logoff 3 /server:YOURSERVERNAME 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-07T16:30:21.483

这是一个很棒的脚本解决方案，用于远程或本地注销人员。我正在使用 qwinsta 获取会话信息并根据给定的输出构建一个数组。这使得遍历每个条目并仅注销实际用户变得非常容易，而不是系统或 RDP 侦听器本身，这通常只会引发访问被拒绝错误。

```
$serverName = "Name of server here OR localhost"
$sessions = qwinsta /server $serverName| ?{ $_ -notmatch '^ SESSIONNAME' } | %{
$item = "" | Select "Active", "SessionName", "Username", "Id", "State", "Type", "Device"
$item.Active = $_.Substring(0,1) -match '>'
$item.SessionName = $_.Substring(1,18).Trim()
$item.Username = $_.Substring(19,20).Trim()
$item.Id = $_.Substring(39,9).Trim()
$item.State = $_.Substring(48,8).Trim()
$item.Type = $_.Substring(56,12).Trim()
$item.Device = $_.Substring(68).Trim()
$item
} 

foreach ($session in $sessions){
    if ($session.Username -ne "" -or $session.Username.Length -gt 1){
        logoff /server $serverName $session.Id
    }
} 
```

在此脚本的第一行中，如果在本地运行，则为 $serverName 提供适当的值或 localhost。我使用此脚本在自动过程尝试移动某些文件夹之前踢出用户。为我防止“文件正在使用”错误。另请注意，此脚本必须以管理员用户身份运行，否则您可能会在尝试注销某人时被拒绝访问。希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-29T17:38:11.737

干得好：

```
@echo off
(set STATE=Disconnected)
REM !! IMPORTANT set length in 4th from last line !!

FOR /f "Skip=1 tokens=3,4" %%i in ('qwinsta') do (
IF /I NOT "%%i"=="The" (
call :checkpath %%i "%%j"
)
)
::pause
GOTO :EOF

:checkpath
set id=%1
set STATUS=%~2
:: !! The last number in the next line needs to
:: be the length of the STATE string

SET root=%STATUS:~0,12%
IF /I NOT "%ROOT%"=="%STATE%" GOTO :EOF
@echo on
Session ID %ID% is %STATUS%. Logging off...
@echo off
logoff %ID% /server:YOURSERVERNAME 
```

# python - 从硒导入网络驱动程序不起作用？

> ID：14385617
> 
> 赞同：3
> 
> 时间：2013-01-17T18:22:48.613
> 
> 标签：python, selenium, python-2.7, selenium-rc, selenium-webdriver

我下载了包含服务器的 Selenium Python 包，但出现错误：

```
File "<pyshell#6>", line 1, in <module>
from selenium import webdriver
ImportError: cannot import name webdriver 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:59:04.530

Selenium 有两个版本。有一个 Java 服务器，您可以使用 与 Python 进行交互`Selenium RC`，还有一个更新的服务器，您可以使用`Selenium Webdriver`它编写独立脚本（无需运行 Java 服务器）

听起来您可能已经下载`Selenium RC`了`Selenium Webdriver`. 为了`from selenium import webdriver`工作，您必须安装`Selenium Webdriver`.

要做到这一点

```
pip install -U selenium 
```

# wcf - 在客户端记录 WCF 请求的请求和响应值

> ID：14385619
> 
> 赞同：1
> 
> 时间：2013-01-17T18:22:54.197
> 
> 标签：wcf, logging, request, client, response

当客户端正在使用第三方 WebService 时，我正在尝试在客户端中记录请求广告响应消息。

尽管多次尝试日志文件 - MessageLog.svclog 从未使用 app.config 文件中的以下 WCF 配置创建。请帮忙。

```
<system.diagnostics>
<sources>
  <source
     name="System.ServiceModel.MessageLogging"
     switchValue="Information, ActivityTracing" >
    <listeners>
      <add name="yourTrace"
           type="System.Diagnostics.XmlWriterTraceListener"
           initializeData="C:\Log\MessageLog.svclog">
        <filter type="" />
      </add>
    </listeners>
  </source>
</sources>
<trace autoflush="true" />
</system.diagnostics>
<system.serviceModel>
<diagnostics>
<messageLogging
        logMessagesAtTransportLevel="true"
        logMessagesAtServiceLevel="false"
        logMalformedMessages="true"
        logEntireMessage="true"
        maxSizeOfMessageToLog="65535000" maxMessagesToLog="500" />
</diagnostics>
</system.serviceModel> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T19:31:54.943

尝试这个。注意 SharedListeners 节点

```
<system.diagnostics>
  <sources>
    <source name="System.ServiceModel.MessageLogging" 
          switchValue="Warning, ActivityTracing">
      <listeners>
        <add type="System.Diagnostics.DefaultTraceListener" name="Default">
          <filter type="" />
        </add>
        <add name="ServiceModelMessageLoggingListener">
          <filter type="" />
        </add>
      </listeners>
    </source>
  </sources>
  <sharedListeners>
    <add initializeData="C:\Log\MessageLog.svclog"
      type="System.Diagnostics.XmlWriterTraceListener, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
      name="ServiceModelMessageLoggingListener" traceOutputOptions="Timestamp">
      <filter type="" />
    </add>
  </sharedListeners>
  <trace autoflush="true" />
</system.diagnostics>
<system.serviceModel>
    <diagnostics>
        <messageLogging logEntireMessage="true" logMalformedMessages="true"
          logMessagesAtTransportLevel="true" />
    </diagnostics>
    ...
</system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T13:39:15.527

我遇到了 WS 客户端跟踪问题，其中 App.config 和文件夹权限完全正常。就我而言，解决方案是将其重命名为 .exe.config（构建为 WS 客户端 dll 的 .dll.config）。所以请确保：

1.  配置文件文件夹中的名称与程序集名称匹配
2.  当您运行/调试它时，配置文件用于的程序集确实被使用，而不是其他位置的程序集。
3.  如果它内置在 .dll.config 中，它可能会被忽略，因为它应该是 .exe.config。

-m

# maven - 如何使用 Maven 在 CloudBees 中运行 install4j？

> ID：14385621
> 
> 赞同：1
> 
> 时间：2013-01-17T18:22:55.587
> 
> 标签：maven, jenkins, cloudbees, install4j

我在想移植到 CloudBees 的本地 Hudson 实例中有 Maven 构建项目。Install4j 在主机系统上作为可执行文件运行。根据我的经验，这包括安装程序和通过 install4j UI 注册许可证密钥。

如何配置 install4j 以便可以在无头 CloudBees 环境中运行此构建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:22:55.587

我已经能够设置它，而且非常简单。

## 1\. 上传 install4j 到 CloudBees

CloudBees 在 Linux 上运行，因此提取 Linux TAR.GZ 版本的 install4j 并将其上传到您的私有存储库。

提示：通过 FTP => https://{username}@repository-{account}.forge.cloudbees.com/private

所有构建项目都可以通过以下路径访问此目录：/private/{account}

## 2.更新Maven settings.xml

如果您还没有，则需要在同一个私有存储库中创建一个 settings.xml 文件。

进一步阅读如何创建 settings.xml：[如何从 CloudBees 部署到私有 Maven 存储库？](https://stackoverflow.com/questions/12383226/how-do-i-deploy-to-private-maven-repo-from-cloudbees)

您需要根据 Sonatype 文档*将“install4j.home”和“install4j.licenseKey”属性添加到您的 settings.xml 文件中的配置文件中。

提示：“install4j.home”类似于“/private/{account}/install4j5”

## 3.更新项目pom.xml

同样，按照 Sonatype 文档*，使用必要的构建步骤更新项目的 pom.xml。

## * Sonatype 文档

[http://sonatype.github.com/install4j-support/install4j-maven-plugin/](http://sonatype.github.com/install4j-support/install4j-maven-plugin/)

# java - Java 中的可发布 Kerberos 票证

> ID：14385623
> 
> 赞同：1
> 
> 时间：2013-01-17T18:22:58.003
> 
> 标签：java, kerberos, gssapi

我需要在我的 Java 应用程序中使用可发布日期的[Kerberos 票证。](http://www.cmf.nrl.navy.mil/krb/kerberos-faq.html#postdate)但是我没有在`GSSContext`界面中找到任何方法。Java 不支持此 Kerberos 功能吗？

目的如下：在我们的应用程序中，用户可以设置一个批处理，该批处理将在将来运行一段时间。并且应用程序服务器将不得不使用在批处理执行时有效的委托票证，而原始票证可能已过期。

编辑：澄清我的第一个陈述：我发现`GSSContext`,`GSSContextImpl`以及`GSSContextImpl`不允许访问`setAuthTime()`仅在`Krb5Context`. 在没有深入研究所有细节的情况下，似乎只能通过对未记录类的某些直接访问来实现后验身份验证。

由于让客户端浏览器发送带有正确标志的票证似乎还有其他问题 - 正如@Michael-O指出的那样 - 我想我将不得不找到另一个解决方案，也许只是询问用户用户名和密码，将它们与批处理一起加密保存，然后在批处理开始时请求新票。

过期票的概念听起来很适合我的问题，但似乎缺乏实际用途，导致现有环境无法很好地支持它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:31:51.013

除了我的评论：

> 弗兰克，你真的读过[RFC4120](http://www.ietf.org/rfc/rfc4120.txt)的第 2.4 章吗？来自客户端的 TGT 必须具有初始标志`MAY-POSTDATE`。请先检查一下。是的，Java GSS 支持，但我自己没有尝试过。看到[这个](https://i.imgur.com/VPXrA.png)搜索。

弗兰克，有*办法*解决你的问题。昨天刚来找我。我已经回答了这个问题。向后移植此代码可能需要一些工作，但这是值得的。

请参阅[在没有用户密码的情况下生成 AD Kerberos 票证](https://stackoverflow.com/q/13806117/696632)。

# actionscript-3 - 从 Flash 中正确删除子项的问题

> ID：14385626
> 
> 赞同：2
> 
> 时间：2013-01-17T18:23:07.173
> 
> 标签：actionscript-3, flash, adobe

嘿，我在移除我的敌人方块时遇到问题。目前，如果我击中每个人，一切都很好，但是当我避开一个时，我会收到一条错误消息

> ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。在 flash.display::DisplayObjectContainer/removeChild() 在 EnergyJump/onTick() 在 flash.utils::Timer/flash.utils:Timer::_timerDispatch() 在 flash.utils::Timer/flash.utils:Timer::打钩（）

这是我的代码：

```
public function onTick( timerEvent:TimerEvent ):void 
        {
            //if ranrom number is than than i
            if ( Math.random() < i )
            {
                //place block on stage at location X=550, Y=330
                var randomX:Number = Math.random() * 550;
                var newBlock:Blocks = new Blocks( 550, 335 );
                army.push( newBlock );
                addChild( newBlock );
                //increase speed of spawn
                i = i + 0.0001;
            }

            //move blocks in correct direction
            for each ( var block:Blocks in army ) 
            {
                block.move();
                //if block is hit then remove health and remove child object
                    if ( avatar.hitTestObject( block ) ) 
                    {

                        hp.checkHP(20);
                        army.splice(army.indexOf(block), 1);
                        removeChild( block );

                    }
            }
        } 
```

谁能帮助我，说实话，我真的不知道切片是什么或如何使用它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:38:55.337

您应该在[此处查看 Array.splice()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice%28%29)的文档。

第一个参数必须是要删除的项目的*索引*（0、1、2 等），而不是项目本身。Flash 试图读取`block`为整数，但它默认为 0，因此不是删除已命中的块，而是删除列表中的第一个块。试试这个：

```
army.splice(army.indexOf(block), 1); 
```

我假设你有一些代码在游戏结束时清除列表中的任何剩余块，但是由于错误的块正在从列表中删除，它试图删除一些实际已经被击中的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T00:19:44.740

好的，我快速浏览了您的文件。这个问题有点离题，但我会列出我发现的问题。一般来说，尽管您需要查看 Flash 抱怨的部分并确保您确实使用了正确的变量（例如，如果您编写`block`，请尝试确保您知道`block`要查看哪个 Flash，并记住当你改变事情时，顺序很重要。）

很容易意外删除错误的项目或尝试使用空值，因此请检查每一行并考虑每个变量在该点实际上是什么（也许也尝试跟踪变量）。

*   在`avatarEnterFrame`你正在检查已经离开屏幕一侧的块，但你没有添加`for each`像 in 这样的循环`onTick`，所以当你`block`在那里使用时，Flash 正在查看你的 main`public var block:Blocks;`而不是 in 中的块`army`。
*   在`onPowerTick`您需要以`splice`与以前相同的方式调整您的，以便您删除`powerups`您正在检查的对象而不是 0 处的项目。
*   在`restartGame`您`gameOverScreen`尝试删除它之前将其设置为 null，因此 Flash 不知道要删除什么。确保在完成其他所有操作之前将其设置为 null。

我将为您的游戏屏幕问题发布单独的答案，以便它在正确的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T19:14:14.340

您确定在调用 removeChild() 之前对每个对象进行了相应的 addChild() 调用吗？目前显示的代码不足，无法真正了解发生了什么，但还要确保在同一对象上不会多次调用 removeChild() 而不会在每次之间调用 addChild() .

# javascript - 使用服务器端系统时间的客户端时钟

> ID：14385628
> 
> 赞同：1
> 
> 时间：2013-01-17T18:23:21.603
> 
> 标签：javascript, asp.net, .net

我在 .Net 环境中工作，在我的 aspx 页面上，我想添加一个正在运行的带秒数的数字时钟，但我需要它来使用服务器端时间。最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T18:32:44.240

花点时间[**看看**](http://momentjs.com/)这个 javascript 库。

您只需要为您的 javascript 代码提供服务器端时间，可能通过类似数据属性的方式

IE：

```
<html data-server-time="@Model.ServerTime"> 
```

然后你的 JS 应该只是（假设 jQuery 和时刻）：

```
var date = $('html').data('server-time');
var start = new Date();

var updateTime = function (){
    setTimeout(function(){
        var now = moment(date).add(new Date() - start).format('YYYY/MM/DD HH:mm:ss')
        $('.target').text(now);
        updateTime();
    },1000);
}

$(function(){
    updateTime();
}); 
```

[**小提琴**](http://jsfiddle.net/ZQsE6/)

这样，您将使用服务器时间，但您不需要在每次页面加载时多次请求它，从而避免不必要的 AJAX 调用。除非你的服务器有核级时钟或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:32:06.213

你考虑过 AJAX 更新面板吗？

MSDN：[教程：如何按时间间隔刷新 UpdatePanel 控件](http://msdn.microsoft.com/en-us/library/cc295400.aspx)

每秒更新一次可能有点矫枉过正。也许实现它，以便它轮询服务器以检查服务器并且客户端时间仍然同步，如果没有，更新客户端页面？

# php - 为什么我不能选择动态 (PHP) 生成的选项？

> ID：14385631
> 
> 赞同：0
> 
> 时间：2013-01-17T18:23:27.453
> 
> 标签：php, mysql, forms, html-table

我遇到了一个表格问题，其中每个单元格都包含一个 id'd 输入或选择字段。单元格内容是从 MySQL 查询动态生成的。除了我动态生成的 SELECT 下拉菜单外，一切正常。我在 switch 语句中使用以下代码：

```
case 'crew_1':
case 'crew_2': 
    echo '<td><select class="'.classExt($types[$key]).' '. $key .'_c" id="' . $key . '--' . $idx .'">';
    echo '<option value="" selected="selected"></option>';
    while ($rowtech = mysqli_fetch_assoc($rtech)){
        echo '<option value="' . $rowtech['name'] . '">' . $rowtech['name'] . '</option>';
    } mysqli_data_seek($rtech,0);
    echo '<option value="TEST">TEST</option>';      
    echo '</select></td>'; break; 
```

这将创建以下 HTML：

```
<td>
    <select class="varchar crew_1_c" id="crew_1--1">
        <option value="" selected="selected"></option>
        <option value="Name 1">Name 1</option>
        <option value="Name 2">Name 2</option>
        <option value="TEST">TEST</option>
    </select>
</td> 
```

从中我可以选择空白或“TEST”选项，它会在 console.log 中返回正确的值，但如果我选择动态生成的名称之一，该框将返回默认的空白值。我在 Chrome 和 IE 上得到相同的响应。

我的断线在哪里？

包括请求生成输出到控制台的脚本的人：

```
$('tbody select, tbody input').change(function(){
    console.log($(this).val());
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:30:06.040

OP，您缺少该`name`属性。这对我来说很好：

```
<form method="post" action="">
    <select class="varchar crew_1_c" id="crew_1:1" name="choice">
        <option value="" selected="selected"></option>
        <option value="Name 1">Name 1</option>
        <option value="Name 2">Name 2</option>
        <option value="TEST">TEST</option>
    </select>
    <input type="submit" value="Submit" name="submit" />
</form>

<?php
var_dump($_REQUEST);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:13:36.960

发现我的问题。之前的 JS 请求让我回溯我的代码，发现我正在将我的值设置为 toUpperCase() 以便提交以保持一致性，但这破坏了我在下拉列表中的值匹配。我还在选择选项和 TA-DA 中将我的值设置为大写！

谢谢你们的帮助，伙计们。有时需要一双新的眼睛才能指出显而易见的事情。

# scala - Scala 中的 Future[Option] 用于理解

> ID：14385633
> 
> 赞同：37
> 
> 时间：2013-01-17T18:23:41.320
> 
> 标签：scala, future, for-comprehension

我有两个返回期货的函数。我正在尝试使用 for-yield 理解将修改后的结果从第一个函数提供给另一个函数。

这种方法有效：

```
 val schoolFuture = for {
    ud <- userStore.getUserDetails(user.userId)
    sid = ud.right.toOption.flatMap(_.schoolId)
    s <- schoolStore.getSchool(sid.get) if sid.isDefined
  } yield s 
```

但是，我对其中的“if”不满意，看来我应该能够使用地图。

但是当我尝试使用地图时：

```
 val schoolFuture: Future[Option[School]] = for {
    ud <- userStore.getUserDetails(user.userId)
    sid = ud.right.toOption.flatMap(_.schoolId)
    s <- sid.map(schoolStore.getSchool(_))
  } yield s 
```

我得到一个编译错误：

```
[error]  found   : Option[scala.concurrent.Future[Option[School]]]
[error]  required: scala.concurrent.Future[Option[School]]
[error]         s <- sid.map(schoolStore.getSchool(_)) 
```

我玩过一些变化，但没有发现任何有吸引力的东西。谁能提出更好的理解和/或解释我的第二个例子有什么问题？

这是一个使用 Scala 2.10 的最小但完整的可运行示例：

```
import concurrent.{Future, Promise}

case class User(userId: Int)
case class UserDetails(userId: Int, schoolId: Option[Int])
case class School(schoolId: Int, name: String)

trait Error

class UserStore {
  def getUserDetails(userId: Int): Future[Either[Error, UserDetails]] = Promise.successful(Right(UserDetails(1, Some(1)))).future
}

class SchoolStore {
  def getSchool(schoolId: Int): Future[Option[School]] = Promise.successful(Option(School(1, "Big School"))).future
}

object Demo {
  import concurrent.ExecutionContext.Implicits.global

  val userStore = new UserStore
  val schoolStore = new SchoolStore

  val user = User(1)

  val schoolFuture: Future[Option[School]] = for {
    ud <- userStore.getUserDetails(user.userId)
    sid = ud.right.toOption.flatMap(_.schoolId)
    s <- sid.map(schoolStore.getSchool(_))
  } yield s
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-17T19:10:43.817

（编辑给出正确答案！）

`Future`这里的关键是`Option` *不要在里面写`for`*，因为没有正确的`flatMap`签名。提醒一下，对于像这样的脱糖剂：

```
for ( x0 <- c0; w1 = d1; x1 <- c1 if p1; ... ; xN <- cN) yield f
c0.flatMap{ x0 => 
  val w1 = d1
  c1.filter(x1 => p1).flatMap{ x1 =>
    ... cN.map(xN => f) ... 
  }
} 
```

（其中任何`if`语句都会将 a`filter`放入链中——我只给出了一个示例——而 equals 语句只是在链的下一部分之前设置变量）。既然你只能用`flatMap`other `Future`s，那么每个语句`c0`, `c1`, ... 除了最后一个最好产生一个`Future`.

现在，`getUserDetails`and`getSchool`都产生`Futures`, but`sid`是一个`Option`，所以我们不能把它放在 a 的右边`<-`。不幸的是，没有干净的开箱即用的方法来做到这一点。如果`o`是一个选项，我们可以

```
o.map(Future.successful).getOrElse(Future.failed(new Exception)) 
```

把 an`Option`变成已经完成的`Future`. 所以

```
for {
  ud <- userStore.getUserDetails(user.userId)  // RHS is a Future[Either[...]]
  sid = ud.right.toOption.flatMap(_.schoolId)  // RHS is an Option[Int]
  fid <- sid.map(Future.successful).getOrElse(Future.failed(new Exception))  // RHS is Future[Int]
  s <- schoolStore.getSchool(fid)
} yield s 
```

会成功的。这比你拥有的更好吗？疑。但是如果你

```
implicit class OptionIsFuture[A](val option: Option[A]) extends AnyVal {
  def future = option.map(Future.successful).getOrElse(Future.failed(new Exception))
} 
```

然后突然之间，理解又变得合理了：

```
for {
  ud <- userStore.getUserDetails(user.userId)
  sid <- ud.right.toOption.flatMap(_.schoolId).future
  s <- schoolStore.getSchool(sid)
} yield s 
```

这是编写此代码的最佳方式吗？可能不是; 它依赖于将 a`None`转换为异常，仅仅是因为您当时不知道该做什么。由于 ; 的设计决策，这很难解决`Future`。我建议您的原始代码（调用过滤器）至少是一种很好的方法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-17T19:33:01.820

[This answer](https://stackoverflow.com/questions/12245987/do-monads-transformers-apply-to-getting-json-from-services/12248618#12248618) to a similar question about`Promise[Option[A]]`可能会有所帮助。只需替换`Future`.`Promise`

我从您的问题`getUserDetails`中推断出以下类型：`getSchool`

```
getUserDetails: UserID => Future[Either[??, UserDetails]]
getSchool: SchoolID => Future[Option[School]] 
```

由于您忽略了 中的失败值`Either`，而是将其转换为 an `Option`，因此您实际上有两个 type 值`A => Future[Option[B]]`。

一旦你有一个`Monad`实例（在[scalaz](https://github.com/scalaz/scalaz)`Future`中可能有一个，或者你可以按照我链接的答案编写你自己的实例），将转换器应用于你的问题将如下所示：`OptionT`

```
for {
  ud  <- optionT(getUserDetails(user.userID) map (_.right.toOption))
  sid <- optionT(Future.successful(ud.schoolID))
  s   <- optionT(getSchool(sid))
} yield s 
```

请注意，为了保持类型兼容，`ud.schoolID`包装在（已经完成的）Future 中。

这种理解的结果将具有 type `OptionT[Future, SchoolID]`。`Future[Option[SchoolID]]`您可以使用转换器的`run`方法提取类型值。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-18T01:02:28.907

`Option[School]`在is的情况下，您希望发生什么行为`None`？你希望未来失败吗？有什么样的例外？你希望它永远不会完成吗？（这听起来是个坏主意）。

无论如何，`if`for-expression 中的子句对`filter`方法的调用进行去糖化。因此，合同`Future#filter`是：

> 如果当前未来包含满足谓词的值，则新未来也将保持该值。否则，生成的 future 将失败并出现 NoSuchElementException。

可是等等：

```
scala> None.get
java.util.NoSuchElementException: None.get 
```

如您所见， None.get 返回完全相同的内容。

因此，摆脱`if sid.isDefined`应该工作，这应该返回一个合理的结果：

```
 val schoolFuture = for {
    ud <- userStore.getUserDetails(user.userId)
    sid = ud.right.toOption.flatMap(_.schoolId)
    s <- schoolStore.getSchool(sid.get)
  } yield s 
```

请记住， 的结果`schoolFuture`可以是 的实例`scala.util.Failure[NoSuchElementException]`。但是您还没有描述您想要的其他行为。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-11T13:43:17.917

我们在 Future[Option[T]] 上做了一个小包装器，它就像一个 monad（甚至没有人检查过任何 monad 法则，但是有 map、flatMap、foreach、filter 等等）- [MaybeLater](https://github.com/escalate42/MaybeLater)。它的行为远不止异步选项。

那里有很多臭代码，但至少作为示例可能会有用。顺便说一句：有很多悬而未决的问题（[这里](https://groups.google.com/forum/m/#!topic/scala-sips/VRlDgX4yFKE/discussion)是例子。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-07T04:56:54.513

它更易于使用 `https://github.com/qifun/stateless-future`或`https://github.com/scala/async`进行`A-Normal-Form`转换。

# c# - 在不同线程中使用 mshtml 接口

> ID：14385637
> 
> 赞同：2
> 
> 时间：2013-01-17T18:24:10.723
> 
> 标签：c#, .net, com, bho, mshtml

我有用 C# 编写的 BHO。在主线程的 DocumentComplete 事件处理程序中执行初始化，然后我启动单独的线程并希望在该线程中使用 IMarkupServices 但收到以下错误：

> System.InvalidCastException：无法将类型为“mshtml.HTMLDocumentClass”的 COM 对象转换为接口类型“mshtml.IMarkupServices”。此操作失败，因为 IID 为“{3050F4A0-98B5-11CF-BB82-00AA00BDCE0B}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)） .

以下是初始化的完成方式：

```
void ieInstance_DocumentComplete(object pDisp, ref object URL)
{
    InternetExplorer explorer = pDisp as InternetExplorer;
    _ieHtmlDocument2 = (IHTMLDocument2)explorer.Document;
    _markupServices = (IMarkupServices)_ieHtmlDocument2;
    _markupServices.CreateMarkupPointer(out _markupPointerBeginGlob);  // No exception here
    _workerThread = new Thread(WorkerThread);
    _workerThread.IsBackground = true;
    _workerThread.SetApartmentState(Thread.CurrentThread.GetApartmentState());
    _workerThread.Start();
} 
```

这是线程过程：

```
void WorkerThread()
{
    _markupServices.CreateMarkupPointer(out _markupPointerBeginGlob);  // Exception here!
} 
```

**编辑：** 在 C++ 中似乎有必要调用以下函数来实现我所需要的：

```
CoMarshalInterThreadInterfaceInStream
CoGetInterfaceAndReleaseStream 
```

**编辑2：**

尝试显式调用 CoMarshalInterThreadInterfaceInStream / CoGetInterfaceAndReleaseStream 但仍然没有结果（尝试使用标记服务时抛出相同的异常）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:30:50.960

为了传递`IMarkupServices`到工作线程，首先需要实现接口并使其可用，并且它也应该是可编组的。后者似乎没有运气：接口没有对类型库或自定义代理/存根类的引用。它也不能提供自动代理/存根对。因此，它无法穿过公寓边界。

UPD。这里的重点是，如果您*可以*将接口传递给另一个线程，则对象本身将指示底层封送模式（取决于单元类型，对象的`IMarshal`实现可用性），您是否可以直接从后台线程访问对象，或者此访问将被序列化为原始线程。在后一种情况下，编组到工作线程可能会使 UI 线程响应，但由于编组费用增加，整个处理总体上可能会变慢。在您的情况下，您无法首先编组。

基本上，您只能选择在原始线程中使用它。在本机域中，您还可以尝试违反 COM 准则并将原始指针传递到后台线程并从那里使用它。这不能保证有效，我不建议这样做，但取决于对象本身，有时效果很好。在托管代码中，这个技巧甚至更不推荐（如果可能的话）。

# bash - 我的 DOB 排序脚本有什么问题

> ID：14385639
> 
> 赞同：0
> 
> 时间：2013-01-17T18:24:18.580
> 
> 标签：bash, unix

我在第 22 行不断收到错误消息：[!: command not found

我的脚本要求输入姓名、电话号码和出生日期，然后将这些详细信息修改为名为“birthday.csv”的逗号分隔值文件。

然后它按出生日期对“birthday.csv”进行排序。然后显示新排序的文件并计算它们的年龄。

有人可以看看我的脚本，看看为什么会出现这种情况。

```
#!/bin/bash

a=0
while [ $a -lt 2 ];
do
    echo Please enter a first name
    read firstName
    echo Please enter last name
    read lastName
    echo Please enter phone number
    read phoneNumber
    echo Please enter date of birth - format dd/mm/yyyy
    read dob
    echo "$firstName,$lastName,$phoneNumber,$dob" >> userBirthdays.csv
    echo If you would like to add another person press 1 or enter 2 to proceed
    read a
done

    INPUT=./userBirthdays.csv
    OLDIFS=$IFS
    IFS=","
    [! -f INPUT] &  while read Name Surname Telephone DOB
    do
                    birthMonth=${DOB:0:2}
                    birthDay=#10${DOB:3:2}
                    birthYear=${DOB:6:4}

                    currentDate=`date +%d/%m/%Y`

                    currentMonth=${currenDate:0:2}
                    currentDay=#10${currentDate:3:2}
                    currentYear=${currentDate:6:4}

                    if [[ "$currentMonth" -lt "$birthMonth" ]] || [[ "$currentMonth" -eq "$birthMonth" && "$((#10$currentDay))" -lt "$((#10$birthDay))" ]]
                    then
                            let Age=currentYear-birthYear-1
                    else
                            let Age=currentYear-birthYear
                    fi

            echo "Name : $Name"
            echo "Surname : $Surname"
            echo "Telephone : $Telephone"
            echo "DOB : $DOB"
            echo "Age : $Age"
            echo "##########################################"
done < $INPUT
IFS=$OLDIFS
    echo $DATE

exit 0; 
```

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:30:36.687

您需要在 [ 和 ! 字符，即

```
[ ! -f $INPUT ] && while read ....
#^-^--------^-^---^------------ 
```

请注意，您几乎肯定需要两个 '&' 字符，如我的更正中所述。

感谢@GordonDavisson 提供另一个'$' ;-)

IHTH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:29:31.033

分隔`[`并`!`用空格分隔，`[`命令也是如此，并且`!`将是它的第一个参数，正如您所希望的那样。

（不确定有没有其他问题）。

# c# - 如何解决对 Web 服务的调用耗时过长？

> ID：14385640
> 
> 赞同：3
> 
> 时间：2013-01-17T18:24:18.627
> 
> 标签：c#, wcf, rest, asp.net-web-api

我正在开发一个需要从 MVC WebApi 服务器获取数据的 Windows RT 应用程序。问题是响应可能需要几秒钟到 3 分钟。

解决它的最佳方法是什么？

现在，我将 async 调用到 web api 并设置一个较长的超时值以避免异常。这是一个好方法吗？我不太喜欢，因为服务器一直打开一个开放的连接。它会对服务器性能产生重大影响吗？

有没有像“回调”这样的东西，但对于 Web 服务？我的意思是服务器调用客户端发送数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:01:02.500

是的，有一些方法可以让服务器回调客户端，例如 WCF 双工通信。但是，这种技术通常会保持连接打开（在大多数情况下，这是 TCP 会话）。大多数 Web 服务器不支持大量并发请求，因此对服务器的每次长时间调​​用都会增加并发连接的客户端的数量。这将导致在不应该的地方大量使用资源。如果你有很多客户，这样的架构必然会失败。

REST 请求应该是轻量级、小而快的。考虑使用数据库来存储临时结果和工作服务器，以处理负载。这是服务器端的问题，而不是客户端的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T07:34:21.327

最后我使用 WebSockets 解决了它（感谢 oleksii）。它使连接保持打开状态，但我避免重复轮询结果。现在，当服务器完成该过程时，将数据直接发送到客户端。WebSockets 是一种通过 TCP 中继并已标准化的协议。

[http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)

# command-line - 从 TeamCity 多次调用 winrs

> ID：14385642
> 
> 赞同：3
> 
> 时间：2013-01-17T18:24:21.467
> 
> 标签：command-line, teamcity, winrm, winrs

如果我在同一个 Team City 命令行中运行 2 个 winrs 命令，如下所示：

![构建失败](../Images/95e9dd8af3578a42c91d15b7765cc7e7.png)

构建将挂起。

![挂楼](../Images/8784a9fd76e88c70fe36d0c291fec50a.png)

*   如果我手动终止构建代理上的 winrs 进程，构建将完成，但会以代码 1 退出。
*   如果我只运行一个 winrs 命令，构建将通过。
*   如果我将 winrs 命令拆分为 2 个不同的构建步骤，构建也将通过。
*   如果我将这两行放在一个批处理文件中并在构建代理上运行它也可以工作。
*   如果我将这两行放在一个 cmd 文件中并作为构建代理用户在构建代理上运行它也可以工作。

有谁知道这里发生了什么/如何解决这个问题？

我希望 Team City 或 winrs 大师可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:07:43.320

使用 START /WAIT 为您的命令添加前缀

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T18:52:19.803

是的， START /WAIT 有效，即使在同一个构建步骤中对多个服务器的 winrs 请求它也不会返回输出

# sql - SQL 各种组合用于 group by

> ID：14385644
> 
> 赞同：-1
> 
> 时间：2013-01-17T18:24:31.850
> 
> 标签：sql, sybase

我有一个包含列名的表：

类别 1、类别 2、类别 3、值

我想从表中得到以下组合：

```
---> category1,count(*)

---> category1, category2, count(*)

---> category2, category3, count(*) 
```

有没有办法在一个查询中做到这一点，还是我真的需要编写 3 个单独的查询？我正在考虑如下设计：

```
Category1, Category2, Category3, CountNumber 
```

其中案例 1、类别 2 和类别 3 列将为空白，案例 2 类别 3 列将为空白，等等。

```
--------EXAMPLE---------------------------------------------------------
Cat1           Cat2          Cat3        Value
a              NULL           d1           13
b              e1             d1           13
a              e2             d1           13
c              NULL           d2           13
a              e1             d1           13
a              NULL           d1           13
--------DESIRED OUTPUT -------------------------------------------------
Cat1           Cat2           Cat3           CountNumber
a              NULL           NULL           4
b              NULL           NULL           1
c              NULL           NULL           1
a              e1             NULL           1
c              e1             NULL           0
NULL           e1             d1             2 
```

等等谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:50:26.307

试试这个

```
Select category1, null Category2, null category3, count(*)
from table
group by category1
UNION ALL
Select category1, category2, null category3, count(*)
from table
group by category1, category2
UNION ALL
Select null  category1,category2, category3, count(*)
from table
group by category2, category3 
```

在 tmp 表中插入行

```
SELECT * INTO TmpTable FROM (
Select category1, null Category2, null category3, count(*)
from table
group by category1
UNION ALL
Select category1, category2, null category3, count(*)
from table
group by category1, category2
UNION ALL
Select null  category1,category2, category3, count(*)
from table
group by category2, category3) x 
```

# variables - 如何批量更改循环内的变量值

> ID：14385650
> 
> 赞同：4
> 
> 时间：2013-01-17T18:24:49.880
> 
> 标签：variables, loops, batch-file

我使用以下代码从收集器文本文件的前 4 个字符的值创建一个目录

```
@echo off & setlocal enabledelayedexpansion

:loop

set /P txt_file=<Collector.txt
Set collector_id=!txt_file:~0,4!

:: check for existence of [OutputFolder]
:: if [OutputFolder] doesn't exist, create it
if not exist %collector_id% (
  echo folder %collector_id% not found
  echo creating folder %collector_id%
  md %collector_id% 
  )

xcopy *.txt %collector_id% /v 
Del *.txt

goto loop 
```

我想连续执行上述循环以检查当前目录是否为空。如果不是，我想创建一个目录，如果不存在，名称为 collector.txt 的前 4 个字符。

如果目录不为空，一切正常。当上述循环并且我将collector.txt 添加到当前目录时，collector_id 不会改变。

我哪里错了？

有没有其他方法，期待无限循环来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T18:30:16.620

放在`setlocal EnableDelayedExpansion`开头，并使用`!var!`而不是`%var%`. 然后每次都对其进行评估。

# c++ - 将监视器限制在 Linux 中的某个区域

> ID：14385653
> 
> 赞同：4
> 
> 时间：2013-01-17T18:24:53.830
> 
> 标签：c++, linux, graphics, monitor, x11

我有一台 13 英寸显示屏坏了的笔记本电脑。显示屏的左半部分完全是黑色的，我现在无法修复它。我想知道是否可以用任何语言编写程序以将显示限制在右侧，这意味着：

1.  将分辨率更改为当前宽度的一半**或**

2.  保持纵横比但缩小显示并将其发送到右侧。

我最好寻找一种可以在 Linux 中使用的方法（Windows 将是第二优先级）

语言不是问题（尽管我假设 C++ 将是要走的路），我正在寻找一些提示。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:22:20.197

也许（如果`xrandr`不让你高兴的话）你可以使用[Xnest](http://en.wikipedia.org/wiki/Xnest)，适当地定位 Xnest 根窗口，并在其中运行所有其他 X11 应用程序`Xnest`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T19:05:37.957

[您可以使用xrandr](http://www.perpetualpc.net/srtd_resolution.html) Linux 命令更改分辨率。

# audio - 音频分析以检测低音量时段

> ID：14385655
> 
> 赞同：1
> 
> 时间：2013-01-17T18:25:04.173
> 
> 标签：audio, wav, analysis, volume, detect

我有一系列音频文件（它们目前都是 wav 和 mp3）。这些文件由哔哔声、暂停和一个人的回复组成。我需要找出哔哔声和回复人之间的反应时间。有很多数据，所以我想制作一个可以为我做这件事的程序。有谁知道这可以用什么语言完成，或者知道任何现有的程序可以做到这一点。我查看了 python 中的 wave 工具，似乎找不到任何代表低时刻的数据。

我的程序是这样运行的：

```
wav = open(wave file)
chunk = getNextChunk(wav)
volume = analyse(chunk)
check against threshold
if silent period, check for loud period
find difference
log time in seconds 
```

谁能帮我解决这个问题，我知道这是一个非常开放的问题，但我不知道从哪里开始，我已经在 java 和 python 等中编程过，但会使用最好的，与声音格式相同。将文件制作成单声道会更好吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:48:08.010

我找到了一个可行的解决方案，尽管我的音频检测算法非常糟糕，而且不是很准确。声音的幅度或频率似乎是可见的，所以数字的位数越多，声音就越大。我检测到一长串数字来确定这一点，但是一个数字不符合模式并且循环重置。根据前几位数字之间的差异进行真皮会更好。

```
import wave, struct, logging

# open up a wave
w = wave.open('wavefile.WAV', 'rb')
length = w.getnframes()
rate = w.getframerate()
logging.basicConfig(filename='example.log',level=logging.DEBUG)
count = 0
start = 1
end = 0
startData = 0
endData = 0
for i in range(0,length):
    waveData = w.readframes(1)
    data = struct.unpack("<h", waveData)
    if (start == 1):
        if (len(str(int(data[0])))>=len(str(1234))):
            count=count+1
        else:
            count=0
        if (count == 100):
            startData=i-100
            print("Start "+str(startData/float(rate)))
            count = 0
            start = 0
            end = 1
    if (end == 1):
        if (len(str(int(data[0])))<=len(str(12))):
            count=count+1
        else:
            count=0
        if (count == 10):
            endData=i-10
            print("End "+str(endData/float(rate)))
            count = 0
            start = 1
            end = 0
            frames=endData-startData
            duration=frames/float(rate)
            print("Duration: "+str(duration)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T00:32:52.700

至于您选择的语言，我个人会选择 Matlab。但是它要花钱，而且由于您已经有使用 python 的经验，因此 numpy 模块可能对您来说是正确的选择。

根据您对问题的描述，这可能是一种方法：

*   加载 wav
*   寻找包络线并以快速时间常数平滑
*   临界点
*   找时间发出哔声
*   找时间回复
*   计算差异

去单声道会很好，同时减少你的数据量。

# windows - 可以接收的最大数据包数是多少？

> ID：14385656
> 
> 赞同：-1
> 
> 时间：2013-01-17T18:25:13.290
> 
> 标签：windows, networking, tcp, p2p, packets

我正在开发一个 P2P 应用程序，我正在使它扩展到数千万用户。我正在向每个其他对等方广播一个数据包并期待响应。在继续我的编码之前，我想确认我是否可以在不到一分钟的时间内将数据包发送到数以千万计的不同 IP 地址。如果它们都响应，那么我的应用程序甚至我的 PC 是否能够在这么短的时间内处理这么多的连接和数据包？

**使用 TCP 和 Windows。**
允许的最大 CPU 使用率：**20%**
互联网带宽：**假设 2Mbps**
**基于使用 WinSock2 的 C 编程的应用程序**
**假设普通 PC 具有 2 GB Ram、Core 2 Duo、2.8 GHz**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:26:48.807

嗯，是的，你可以，但你可能需要使用 UDP。然而，响应 backc 也将是一个自我 DoS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:06:17.157

通常，需要在一分钟内与数千万用户直接通信的应用程序将基于具有可用互联网带宽和计算能力的服务器集群，因此它们本身不会 DoS。P2P 应用程序不应该要求单个主机与那么多用户进行通信，尤其是在这么短的时间范围内。

雷是正确的，即使您能够发送消息，您最终也会对自己的响应进行 DoSing，除非您在客户端程序中故意放置许多不同长度的延迟以隔开它们的响应。如果您要尝试这样做，他应该使用 UDP 也是正确的。我发现您的操作系统不太可能支持维护 10,000,000 个并发 TCP 连接。

为了从单个主机向数千万主机发送通知，原始主机应通知数千万主机列表中大小为 n 的某个小子集。这些主机中的每一个将依次通知 n 多个主机，依此类推。这将需要 n log_n_（主机总数）时间与主机时间数量的顺序。

如果响应消息只是对收到原始消息的确认，则可以将与此相反的系统用于确认。每个主机都可以向发送消息的主机发送一个 ack，然后一旦该主机收到所有的 ack 或发生超时，它就会向发送它的主机发送一个 ack，其中包含哪些主机的信息已经给它发了一个ack。此过程继续备份树，直到组合的 ack 到达原始主机。这意味着您会收到大约 n 个返回给原始主机的响应，而不是数千万的数量级。

如果响应不仅仅是一个确认，那么您的应用程序可能无法扩展任何远程接近您描述的硬件的东西，因为在太短的时间内将有太多的传入数据。您很可能会自己进行 DoS 攻击，并且很可能会从您的 ISP 那里得到一个 nastygram。

# android - android 中带有 SQLiteOpenHelper 的 NullPointer 游标

> ID：14385662
> 
> 赞同：0
> 
> 时间：2013-01-17T18:25:36.047
> 
> 标签：android, cursor

在使用创建表`pm.createTable()`并向其添加数据后`pm.addDataToTable()`，我试图使用`pm.getData()`我刚刚创建和插入的同一个表检索数据，并将其存储在游标c中。我没有收到任何编译错误或异常。控件总是在 中进入 else 条件`displayData()`。有人可以帮我弄这个吗？

```
PortfolioManager pm;
Cursor c, cMainTable; 

pm = new PortfolioManager(this);        
cMainTable = pm.getData("mainTable");

scriptName = edtxtScriptName.getText().toString();

   try
                {
                System.out.println("Creating table with name "+scriptName);
                pm.createTable(scriptName);
                System.out.println("Table created");
                pm.addDataToTable(scriptName, DOP, purchasedQuantity, purchasedPrice, brokerage, serviceTax, stt, stampDuty);
                System.out.println("data added");

                c = pm.getData(scriptName);
                displayData(c);
                }
                catch (Exception e) {
                    // TODO: handle exception
                    System.out.println("Exception at try catch block");
                }

    private void displayData(Cursor c2) {
            // TODO Auto-generated method stub

            if(c2 != null) // Should enter this statement. Always enters else condition
            {                   
                if(c2.getCount() > 0)
                {
                    c2.moveToFirst();

                    do
                    {

                        // obtain data from cursor

                    }while(c2.moveToNext());
                }
            }
            else
            {
                System.out.println("Cursor c2 is Empty");
            }

        } 
```

投资组合管理器.java

```
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class PortfolioManager extends SQLiteOpenHelper{

    static String name = "portfolio";
    static int version = 1;

    SQLiteDatabase sqlDB;
    Cursor c;

    public PortfolioManager(Context context) {
        super(context, name, null, version);
        // TODO Auto-generated constructor stub

        sqlDB = getWritableDatabase();

    }
    @Override
    public void onCreate(SQLiteDatabase sqlDB) {
        // TODO Auto-generated method stub

        sqlDB.execSQL("create table if not exists maintable(scriptnumber text, scriptname text, totalquantity int, " +
                "averageprice double, lossorgain double)");

    }
    @Override
    public void onUpgrade(SQLiteDatabase sqlDB, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }
    public Cursor getData(String string) {
        // TODO Auto-generated method stub

        String table = string;

        sqlDB.rawQuery("select * from "+table, null);       
        return c;
    }
    public void addDataToTable(String scriptName, String dOP, int purchasedQuantity, double purchasedPrice, 
            double brokerage, double serviceTax, double stt, double stampDuty) {
        // TODO Auto-generated method stub

        sqlDB.execSQL("insert into "+scriptName+" values('"+dOP+"', '"+purchasedQuantity+"', '"+purchasedPrice+"'," +
                "'"+brokerage+"', '"+serviceTax+"', '"+stt+"', '"+stampDuty+"')");
    }
    public void createTable(String scriptName) {
        // TODO Auto-generated method stub

        sqlDB.execSQL("create table if not exists "+scriptName+"(dateofpurchase text, purchasedquantity int, purchasedprice double," +
                " brokerage double, servicetax double, stt double, stampduty double)");

    }

} 
```

输出 ：：：

```
01-17 23:38:16.799: I/System.out(23248): Creating table with name nal
01-17 23:38:16.869: I/System.out(23248): Table created
01-17 23:38:16.929: I/System.out(23248): data added
01-17 23:38:16.929: I/System.out(23248): Cursor c2 is Empty 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:29:44.607

一个问题是您需要使用由`rawQuery()`. 改变这个：

```
public Cursor getData(String string) {
    // TODO Auto-generated method stub

    String table = string;

    sqlDB.rawQuery("select * from "+table, null);       
    return c;
} 
```

类似于：

```
public Cursor getData(String table) {
    return sqlDB.rawQuery("select * from "+table, null);       
} 
```

* * *

此外，您的 if-else 块中的逻辑也不完全正确。除非`rawQuery()`抛出异常，否则它将始终返回游标，因此它可能为*空*，但可能不会为空。尝试：

```
if(c2 != null) // Should enter this statement. Always enters else condition
{                   
    if(c2.getCount() > 0)
    {
        while(c2.moveToNext());
            // read data
        }
    }
    else
    {
        System.out.println("Cursor c2 is Empty");
    }
}
else
{
    System.out.println("Somethings gone horribly wrong");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:30:54.380

您不是在此方法中分配**光标的值**`getData(String string);`

我认为你的`getData(String string)`方法应该是这样的，而不是旧的：

```
public Cursor getData(String string) {
        // TODO Auto-generated method stub
        Curser c= null;
        String table = string;

       c = sqlDB.rawQuery("select * from "+table, null);   

        return c;
    } 
```

# c# - 有什么好办法让用户知道吗？

> ID：14385663
> 
> 赞同：-1
> 
> 时间：2013-01-17T18:25:38.190
> 
> 标签：c#, xaml, windows-phone-8

在 Windows Phone 7 中，我们有这个很棒的 ToastPrompt (http://coding4fun.codeplex.com/)，但是 Windows Phone 8 不支持这个很棒的库，我想知道还有其他工具可以完成这项工作吗？

这是一个让用户知道一些事情（后台工作完成等）的好工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T18:31:52.570

是什么让你认为 WP8 不支持 Coding4Fun 工具包？在我的电脑上工作正常。

```
 private void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        new ToastPrompt()
        {
            Title = "hello world",
            Message = "sup stackoverflow?"
        }.Show();
    } 
```

当我运行上面的代码片段时，它在 WP8 上运行良好：

![WP8 上的 ToastPrompt](../Images/6aaa35514b1ea8aacd534f16e62faf93.png)

如果您在使用 WP8 和 NuGet 时遇到问题，请参阅[此](https://stackoverflow.com/questions/13342630/adding-nuget-ndef-library-to-windows-phone-8-project/13353550#13353550)。如果您在添加参考时遇到问题，请参阅[此](https://stackoverflow.com/questions/13698094/referencing-zxing-net-library/13698737#13698737)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:29:44.773

您的应用程序是 XAML 吗？您可以通过创建一个矩形并在其中添加几行文本来轻松编写自己的应用内“Toast”。

如果您希望在您的应用程序处于后台时执行此操作，您可以使用WP8 中内置的[ShellToast库](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662938%28v=vs.105%29.aspx)

# mysql - 基于总和的排序

> ID：14385669
> 
> 赞同：0
> 
> 时间：2013-01-17T18:25:58.530
> 
> 标签：mysql, group-by, sum

我有三个 mysql 表：文章、类别和标签。

我想获取链接到文章的所有类别和标签的列表，并按每个类别和标签的出现次数对它们进行排序。

文章表具有以下列：article_id 和 name

类别和标签表具有以下列：article_id 和 tid。

最终我正在寻找消息。

以下是表格的外观示例：

```
ARTICLES
article_id   name 
1            Article 1
2            Article 2
3            Article 3
4            Article 4

CATEGORIES
article_id   tid
1            100
2            100
3            100
4            101

TAGS
article_id   tid
1            200
2            200
3            200
4            200
3            201
4            201 
```

我希望看到的是：

```
RESULTS
tid          count
200          4
100          3
201          2
101          1 
```

因为 tid 200 使用了 4 次，tid 100 使用了 3 次，tid 201 使用了 2 次，tid 101 使用了 1 次。

和想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:30:42.503

假设您永远不会拥有相同`tid`的内容`categories`，这将起作用`tags`

```
SELECT a.tid, a.count
FROM
  (SELECT tid, COUNT(article_id) AS count
  FROM categories
  GROUP BY tid
  UNION ALL
  SELECT tid, COUNT(article_id) AS count
  FROM tags
  GROUP BY tid) a
ORDER BY a.count DESC 
```

## [查看演示](http://www.sqlfiddle.com/#!2/d3f73/1)

如果你可能有重复，使用这个：

```
SELECT a.tid, COUNT(article_id) AS count
FROM
  (SELECT tid, article_id 
  FROM categories
  UNION ALL
  SELECT tid, article_id
  FROM tags) a
GROUP BY a.tid
ORDER BY COUNT(article_id) DESC 
```

## [查看演示](http://www.sqlfiddle.com/#!2/d3f73/2)

**结果**

```
| 时间 | 计数 |
---------------
| 200 | 4 |
| 100 | 3 |
| 201 | 2 |
| 101 | 1 |
```

# ruby-on-rails - Rack Gem::LoadError 即使我使用的是 Bundler

> ID：14385670
> 
> 赞同：3
> 
> 时间：2013-01-17T18:25:59.163
> 
> 标签：ruby-on-rails, bundler, rack

我不明白这是怎么发生的：

```
$ bundle install
[...]
$ bundle exec rails server
[...] You have already activated rack 1.4.4, but your Gemfile requires rack 1.4.3\. Using bundle exec may solve this. (Gem::LoadError) 
```

我不明白怎么可能出现这个错误；Bundler 不能防止这种情况发生吗？

```
$ gem list rack

*** LOCAL GEMS ***

rack (1.4.4, 1.4.3, 1.4.1) 
```

在 Gemfile 中，我们需要明确列出 UUID 库的 rack，我相信：

```
gem "rack" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T19:40:12.537

我可以通过简单地卸载我不想要的机架版本来解决这个问题。

```
gem uninstall rack

Select gem to uninstall:
1\. rack-1.4.1
2\. rack-1.4.3
3\. rack-1.4.4
4\. All versions
> 3
Successfully uninstalled rack-1.4.4 
```

# c - 我得到了错误：成员的请求，它不是 C 中的结构或枚举

> ID：14385672
> 
> 赞同：1
> 
> 时间：2013-01-17T18:26:05.940
> 
> 标签：c, list, generics, void

基本上我要做的是创建一个通用列表，我可以在其中使用`void*`to 将任何数据类型放入节点中。这是通用列表和我想要放入其中的结构。

```
typedef struct LIST{
  struct LIST *next;
  void *data;
} LIST;

struct person {
    char *name; 
    int age;
}; 
```

这是分配指针的函数

```
LIST *create_node(void *data, int size) {
    LIST *tmp;
    tmp = NULL;
    tmp = (LIST*)malloc(sizeof(LIST));
    tmp->data = malloc(size);
    tmp->data = data;
    memcpy(tmp->data, data, sizeof(data));
    tmp->next = NULL;
    return tmp;
} 
```

这是我调用函数的`create_node`函数

```
void test_list() {
     LIST *my_list;
     struct person *my_person;
     my_list = NULL;

     my_person = (struct person*)malloc(sizeof(struct person));
     strcpy(my_person->name, "PABLO");
     my_person->age = 23;
     my_list = create_node(my_person, sizeof(struct person));
     printf("%d \n", my_list->data->age);
} 
```

问题出现在我收到错误的最后一行：“成员年龄的请愿书不是结构或枚举”。我怎样才能摆脱这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:27:03.753

您已声明`data`为`void *`. 如果您确定它确实指向 a `person`，那么您需要强制转换：

```
((struct person *)my_list->data)->age 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:41:12.180

我会做一些稍微不同的事情，但这里的具体错误在这个表达式中：

```
my_list->data->age 
```

请记住，从 LIST 类型的声明中，类型`my_list->data`是`void *`. *您*知道这个特定`void *`实际上指向一个`struct person`-- 但编译器不知道，也不知道这一点，因为这两个函数可能在不同时间编译的不同文件中。

因此，您需要明确告诉编译器这`void *`应该被视为`struct person *`使用*类型*转换：

```
((struct person *)my_list->data)->age 
```

# c# - 强制 ListViewItem 占据所有 ListView 宽度

> ID：14385675
> 
> 赞同：2
> 
> 时间：2013-01-17T18:26:15.870
> 
> 标签：c#, wpf, listview, width

我有一个`ListView`，我想添加一些孩子。我希望这些 ListViewItems（例如`Border`实例）的高度为 25，宽度等于 ListView 的宽度，即使我调整了 ListView 的大小。

我尝试使用以下代码添加 10 个元素：

```
for (int i = 0; i < 10; i++)
{
    ListPsw.Items.Add(new Border 
    { 
        BorderThickness = new Thickness(2), 
        BorderBrush = Brushes.Black, 
        Margin = new Thickness(5),
        Height = 25
    });
} 
```

这是结果：

![在此处输入图像描述](../Images/3fd7b71b1c0a92d07b97b433971e2a09.png)

但我想要这样的东西：

![在此处输入图像描述](../Images/5e5cb72909b4e5d90fa3942230b4a057.png)

我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:29:26.650

您必须将`HorizontalContentAlignment`属性设置为`Stretch`。

```
<ListView Name="ListPsw" HorizontalContentAlignment="Stretch" /> 
```

# visual-studio-2012 - 如何在 VisualStudio 2012 中安装 Contract-First Tool

> ID：14385679
> 
> 赞同：5
> 
> 时间：2013-01-17T18:26:22.557
> 
> 标签：visual-studio-2012, xsd, schema, visual-studio-extensions, contract-first

我有 VisualStudio 2012，我正在尝试遵循以下教程[http://msdn.microsoft.com/en-us/library/hh674270.aspx](http://msdn.microsoft.com/en-us/library/hh674270.aspx)

但是我在模板对话框的*WCF 窗格*中找不到选项**架构定义。**

 *我必须安装一些东西吗？那会是什么？一个扩展，也许？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T13:07:12.470

您无需安装它 - 它已经存在。可能会引起您注意的是它仅在“WCF 服务库”模板中可用。

![VS 2012 正确的 WCF 项目](../Images/9366c07010c5b30ea26113488d5b8cae.png)

一旦你添加了一个模式文件，如图所示： ![添加 XML 模式](../Images/446e89dafb9382a2d2dc0af19f39ee7a.png)

然后，您可以在项目属性上获得一个附加选项：

![在此处输入图像描述](../Images/64b1c6620e4dc886a477eb810f84d7ce.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T14:17:18.547

我想添加我的发现。

我也想要 Contract-First 工具，但没有找到 msdn 链接中提到的设置。

但是我发现了如何将它添加到任何项目类型，因为我希望我的 iis 托管服务也首先使用合同。

您所做的是创建一个如上所述的“WCF 服务库”。

然后在文本编辑器中打开项目的 csproj 文件。

然后将看起来像这样的条目复制粘贴到另一个项目文件中

```
 <FlavorProperties GUID="{3D9AD99F-2412-4246-B90B-4EAA41C64699}">
    <WcfProjectProperties>
      <AutoStart>True</AutoStart>
    </WcfProjectProperties>
  </FlavorProperties> 
```

您还需要将目标项目中的 guid:s 更改为以下内容：

```
<ProjectTypeGuids>{3D9AD99F-2412-4246-B90B-4EAA41C64699};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

带有 guid 的 FlavorProperties 标签来自 vs2012 更新 3，因此将来可能会更改。

因此，通过这个 hack，您可以将合同优先服务直接部署到 iis。

然而，问题是为什么它在 Visual Studio 2012 中不能像这样开箱即用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:19:21.740

您不需要从 WCF 窗格中添加 XSD，只需从 Data 窗格中获取 XML Schema 项。

如果 VS 2012 启用了“启用 XSD 作为类型定义语言”选项，它将在您的解决方案的命名空间 +“.ContractTypes”下生成类型。

检查输出窗口以查看构建过程对 XSD 执行的操作。*

# cakephp-2.1 - 使用 ajax 时防止 cakePHP 2.1 auth 组件重定向

> ID：14385683
> 
> 赞同：1
> 
> 时间：2013-01-17T18:26:35.440
> 
> 标签：cakephp-2.1

1个申请。我正在使用 ajax 登录并验证用户。我遇到的问题是 cakephp 2.1 auth 组件。当我手动登录用户时，组件重定向我不想发生，而是将成功代码返回给我的 ajax 请求。有没有办法防止这种默认行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:59:09.423

AuthComponent 正在调用 Controller::redirect(null, 403)。您可以通过在 AppController 中覆盖 redirect() 来捕获这些：

```
/**
 * Proxy for Controller::redirect() to handle AJAX redirects
 *
 * @param string $url 
 * @param int $status 
 * @param bool $exit 
 * @return void
 */
    public function redirect($url, $status = null, $exit = true) {
        // this statement catches not authenticated or not authorized ajax requests
        // AuthComponent will call Controller::redirect(null, 403) in those cases.
        // with this we're making sure that we return valid JSON responses in all cases
        if($this->request->is('ajax') && $url == null && $status == 403) {
            $this->response = new CakeResponse(array('code' => 'code'));
            $this->response->send();
            return $this->_stop();
        }
        return parent::redirect($url, $status, $exit);
    } 
```

# php - 弄清楚每个数组在哪一天开始和结束？

> ID：14385684
> 
> 赞同：1
> 
> 时间：2013-01-17T18:26:39.287
> 
> 标签：php

我有一个单词数组，每个单词从当天下午 5 点到第二天下午 5 点都有效，然后下一个单词有效。**除了周末**，周五的一个词持续到周一下午 5 点。

现在我要做的是确定用户输入的单词在这段时间内是否有效。我有一个工作正常的示例，但我的问题是周末把一切都搞砸了。而且我似乎无法弄清楚如何使它们起作用。

我有一个函数来计算两个时间戳之间有多少个周末

```
// Figure out how many weekends occured between two dates
function weekends($date1, $date2) {
    $d1 = new DateTime('@' . $date1);
    $d2 = new DateTime('@' . $date2);

    // Compare the two dates
    $diff = $d1->diff($d2);

    // Get number of days between them
    $days = $diff->format('%a');

    // Find out day of the week we start on
    $start = $d1->format('w');

    // Verify we are not on a weekend
    if($start == 0 || $start == 6)
        return false;

    // Number of days until weekend
    $until_weekend = 7 - $start; // (6 is Saturday but we are counting today)

    // Find out how many days are left between the first weekend and the end
    $left = $days - $until_weekend;

    // How many weekends
    $weekends = floor($left / 7) + 1;

    return $weekends;
} 
```

然后我得到了一个函数来确定这个词在那个日期范围内是否有效

```
// Keyword Validation
function keyword_validate($keywords = array()) {
    if(empty($keywords)) return false;

    // Break into values
    $keyword = $keywords['keyword'];
    $contest = $keywords['contest'];
    $keywords = $contest['keywords'];

    // Get some dates
    $now = new DateTime('now');
    $start = new DateTime('@' . $contest['start_time']);
    $s1 = new DateTime('@' . $contest['start_time']); // value for timestamps
    $s2 = new DateTime('@' . $contest['end_time']); // value for timestamps
    $end = new DateTime('@' . $contest['end_time']);

    // Verify keyword exists
    if(in_array($keyword, $keywords) === FALSE)
        return false;

    // Get index
    $index = array_search($keyword, $keywords);

    // See if we somehow got more then one keyword
    if(count($index) != 1)
        return false;

    // get number of weekends
    $weekends = weekends($start->getTimestamp(), $end->getTimestamp());

    // Based on index get the two container timestamps
    $s = $s1->add(new DateInterval('P' . $index + $weekends . 'D'));

    // Verify start doesn't equal Friday or a Weekend

    $e = $s2->add(new DateInterval('P' . $index + $weekends + 1 . 'D'));

    if($s === FALSE || $e === FALSE)
        return false; // Something really bad happened

    // Based on dates find out if the keyword works.

    print $s->getTimestamp();
    print $e->getTimestamp();
    // Get the current time

} 
```

如您所见，关键字函数在 atm 中不起作用。我正在做的 atm 是将关键字的索引与一天相匹配，但是如果是星期二（两个周末之后），我怎么能做到这一点，所以索引增加了 4。对不起，如果这没有任何意义，我我有点失落。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:29:17.417

你不能只拥有一个可以包含七个空格的数组吗？当“星期五”索引改变时，设置“星期六”/“星期日”来镜像它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:44:19.173

尝试重新定义问题以使其更简单。与其尝试用有趣的例外进行数学运算来确定哪个项目与哪一天相关联，不如尝试创建一个新数组，其中包含每天的单词值。它可能看起来像这样：

```
array(
    'cake',
    'pie',
    'pudding',
    'happy', //friday
    'happy', //saturday
    'happy', //sunday
    'nothappy',
    ...
); 
```

构建这个数组应该比您现在尝试做的事情更简单。一旦你有了这个数组，检查应该是微不足道的。

# jsf - 使用 MyFaces 2.1 和 Eclipse Juno 时，如何去掉 doctype 后的空格

> ID：14385686
> 
> 赞同：1
> 
> 时间：2013-01-17T18:26:42.973
> 
> 标签：jsf, whitespace, facelets, doctype, myfaces

我已经四处寻找答案，并尝试了很多东西，但没有运气。当我将 MyFaces 2.1 与 Eclipse Juno 一起使用并尝试创建 HTML5 页面时，我得到

> ```
> <!DOCTYTPE html > 
> ```

注意“html”后面的空格。当在 FireFox 中使用 HTML Tidy 查看此页面时，它会抛出一个错误，指出它的文档类型无效。

源 xhtml 文件包含没有空格。有没有人有办法解决吗？

谢谢

担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:56:38.893

我至少可以在 MyFaces 2.1.9 和 2.1.10 中重现它（没有尝试过旧版本）。这个问题在 Mojarra 中没有体现。这无疑是 MyFaces 中的一个错误。我建议将其[报告给 MyFaces 伙计们](http://issues.apache.org/jira/browse/MYFACES)。

与此同时，在他们修复它之前，我找到了一种解决方法。代替`<!DOCTYPE>`

```
<!DOCTYPE html>
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
>
    ...
</html> 
```

经过[`<h:doctype>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/doctype.html)

```
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
>
    <h:doctype rootElement="html" />
    <html lang="en">
        ...
    </html>
</ui:composition> 
```

它的渲染器生成正确的无空格文档类型。

这个问题与 Eclipse 没有任何关系。它只是一个类似记事本的工具。

# gcc - 使用不同的 GCC 版本编译

> ID：14385692
> 
> 赞同：0
> 
> 时间：2013-01-17T18:27:00.470
> 
> 标签：gcc, cuda

[这是对CUDA](https://stackoverflow.com/questions/6622454/cuda-incompatible-with-my-gcc-version)的后续 Q与我的 gcc 版本不兼容。
我最近更新到 Ubuntu 12.04 并获取了最新的 CUDA 工具包。我`nvcc --version`的显示：（`Cuda compilation tools, release 5.0` 我的驱动程序版本是 304.43。）

我正在尝试修复我的构建环境。我在使用 GCC 4.6 时出错。我可能可以在上面链接的帮助下解决这个问题。我想知道这个大型项目中的其他 8 个包。我应该关心用一个版本的 GCC-4.6 构建其他部分，而我的 cuda 东西用 GCC-4.5 构建吗？我认为它们都应该兼容，但我以前从未遇到过这种情况。这是我需要关心的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:31:26.370

我遇到了与不同版本的 GCC 不兼容的问题。

具体来说，GCC 4.7 和 4.6。我的 Qt 应用程序无法为我编译，因为我使用的是 GCC 4.7，并且该库是针对 GCC 4.6 编译的。他们编译得很好，一开始似乎没有问题。但后来我在实际运行它们时遇到了麻烦。

我建议不要在同一个项目中使用不同版本的 GCC。

# ios - 使用自定义 URL 方案启动 Sencha Touch Native iOS 应用程序时，Ext.device.Device.scheme 始终为 false

> ID：14385694
> 
> 赞同：2
> 
> 时间：2013-01-17T18:27:04.693
> 
> 标签：ios, sencha-touch, native

**摘要**：在 Sencha Touch 2.1（和 2.2alpha）中成功创建了一个带有自定义 URL 方案的原生 iOS 应用程序。在 iOS 模拟器和真实设备上，使用自定义 URL 从冷启动应用程序不会将 URL 传递给应用程序（`Ext.device.Device.scheme`始终`false`，无论您是否使用自定义 URL 启动应用程序）。但是，如果应用程序已经在后台运行，则用于恢复它的自定义 URL 将成功传递给`schemeupdate`事件。从冷启动的行为与文档不一致，当应用程序从冷启动时，我需要一种解决方法来获取自定义 URL。

**详情**：

按照[http://docs.sencha.com/touch/2-1/#!/api/Ext.device.Device](http://docs.sencha.com/touch/2-1/#!/api/Ext.device.Device)上的说明为我的原生 iOS 应用程序指定自定义方案 URL。我正在使用 XCode 4.5.1 在 OS X Lion 上构建。

这发生在 Sencha Touch 2.1 和 2.2alpha 以及 iOS 5 和 iOS 6 上。

重现步骤：

1.  使用以下命令生成新应用：

    ```
    $ sencha generate app -path /Library/WebServer/Documents/SchemeTest 
    ```

2.  根据上面链接的文档添加`'Ext.device.Device'`到`requires:`应用程序的属性。

3.  将以下代码添加到 app.js 中的启动函数中：

    ```
    alert("Scheme is " + Ext.device.Device.scheme);

    if (Ext.device.Device.scheme) {
        // the application was opened via another application. Do something:
        alert('Applicaton pened via another application: ' + Ext.device.Device.scheme.url);
    }

    // Listen for future changes
    Ext.device.Device.on('schemeupdate', function(device, scheme) {
        // the application was launched, closed, and then launched another from another application
        // this means onReady wont be called again ('cause the application is already running in the 
        // background) - but this event will be fired
        alert('Applicated reopened via another application: ' + scheme.url);
    }, this); 
    ```

4.  通过将以下行添加到：指定自定义 URL 方案`packager.json`：

    ```
    "rawConfig": "<key>CFBundleURLTypes</key><array><dict><key>CFBundleURLSchemes</key><array><string>sencha</string></array><key>CFBundleURLName</key><string>com.sencha.example</string></dict></array>" 
    ```

    这将导致表单的 URL`sencha:HereIsMyURL`在 iOS 设备或 iOS 模拟器上打开您的应用程序。

5.  使用以下命令在 iOS 模拟器中运行应用程序：

    ```
    $ sencha package run packager.json 
    ```

6.  该应用程序将在 iOS 模拟器中启动，并将显示 URL 方案为 false，因为该应用程序尚未使用自定义 URL 启动：

    [![没有 URL 方案的应用程序启动](../Images/d6ccfbe7b725119ae57b764b69c231e7.png "没有 URL 方案的应用程序启动")](https://i.stack.imgur.com/YmcTJ.png "完整版的“没有 URL 方案的应用程序启动”")

7.  单击“确定”关闭警报对话框，然后按 iOS 模拟器上的“主页”按钮将应用程序移至后台。打开 Mobile Safari 并输入 URL`sencha:HereIsMyURL`并按 Enter 或单击 Go 按钮以恢复应用程序：

    [![使用 URL 方案的应用程序简历](../Images/93155727122c5a4ed0211186be2c4722.png "使用 URL 方案的应用程序简历")](https://i.stack.imgur.com/MLwNs.png "完整版的“带有 URL 方案的应用程序简历”")

8.  该应用程序将重新打开，您将看到 URL 已正确传入：

    [![传递给恢复应用的 URL 参数](../Images/c7fd30eaab1ee7cdf21cb54bb937e294.png "传递给恢复应用的 URL 参数")](https://i.stack.imgur.com/JMGSL.png "'URL 参数传递给恢复的应用程序' 的全尺寸版本")

9.  点击 iOS 模拟器上的 Home 按钮，然后双击 Home 按钮并在“我的应用程序”图标上按住鼠标按钮，直到图标开始抖动。使用红色“-”彻底杀死“我的应用程序”，使其不再运行：

    [![杀死正在运行的应用程序](../Images/427e7a20610fb76ac2fe18f8498fcf6d.png "杀死正在运行的应用程序")](https://i.stack.imgur.com/L9qlm.png "“杀死正在运行的应用程序”的全尺寸版本")

10.  再次按 Home 按钮，然后返回 Mobile Safari 并重新输入 URL `sencha:HereIsMyURL`，然后按 Enter 或单击 Go 按钮启动应用程序。

11.  该应用程序将启动，但`Ext.device.Device.scheme`仍为 false，因此无法检索 URL。

    [![应用程序从 URL 方案冷启动](../Images/d6ccfbe7b725119ae57b764b69c231e7.png "应用程序从 URL 方案冷启动")](https://i.stack.imgur.com/YmcTJ.png "'App start from cold with URL scheme' 完整版")

12.  （可选）`packager.json`使用有效的`applicationName, applicationId, bundleSeedId, certificateAlias`and配置您的文件，`provisionProfile`并将. 然后使用 为您的真实 iOS 设备重建您的本机应用程序，使用 XCode 将应用程序复制到您的设备，并在真实设备上重复步骤 7 到 11。结果是一样的。`platform``iOS``$ sencha package build packager.json`

这意味着只有当应用程序已经在后台运行时才能检索自定义 URL。使用自定义 URL 从冷启动应用程序时，应用程序无法正确检测到已使用自定义 URL 方案，因此无法将信息传递给应用程序。有谁知道这个的解决方法？

我已经提交了一份错误报告，可以在[http://www.sencha.com/forum/showthread.php?254153-ST-2.1-and-2.2alpha-Ext.device.Device.scheme-is-false-看到on-launch-from-custom-URL](http://www.sencha.com/forum/showthread.php?254153-ST-2.1-and-2.2alpha-Ext.device.Device.scheme-is-false-on-launch-from-custom-URL)。

# mongodb - 对简单但大数据库中的小集合的 mongoDB 查询速度非常慢

> ID：14385696
> 
> 赞同：7
> 
> 时间：2013-01-17T18:27:08.933
> 
> 标签：mongodb, optimization, query-optimization, pymongo, database

所以我在 mongoDB 中有一个超级简单的数据库，里面有几个集合：

```
> show collections
Aggregates <-- count: 92
Users <-- count: 68222
Pages <-- count: 1728288847, about 1.1TB
system.indexes 
```

`Aggregates`集合是集合的聚合，`Pages`每个文档如下所示：

```
> db.Aggregates.findOne()
{
        "_id" : ObjectId("50f237126ba71610eab3aaa5"),
        "daily_total_pages" : 16929799,
        "day" : 21,
        "month" : 9,
        "year" : 2011
} 
```

非常简单。但是，让我们尝试通过将所有 92 天相加来获得总页面加载`daily page loads`：

```
>>> def get_total():
...     start = datetime.now()
...     print sum([x['daily_total_pages'] for x in c.Aggregates.find()])
...     end = datetime.now()
...     print (end-start).seconds
...
>>> get_total()
1728288847
43 
```

**43 秒?!??!??!?!**

那 92 个汇总结果很小！我不妨将它们存储在文本文件中，这太疯狂了。

还是它们很小？根据 mongo，它们在磁盘上有多大？

```
> db.Aggregates.stats()
{
        "ns" : "c.AggregateResults",
        "count" : 92,
        "size" : 460250104,
        "avgObjSize" : 5002718.521739131,
        "storageSize" : 729464832,
        "numExtents" : 7,
        "nindexes" : 2,
        "lastExtentSize" : 355647488,
        "paddingFactor" : 1.0690000000000066,
        "systemFlags" : 1,
        "userFlags" : 0,
        "totalIndexSize" : 16352,
        "indexSizes" : {
                "_id_" : 8176,
                "date_1" : 8176
        },
        "ok" : 1
} 
```

**这些微小的每日数字总共有 438 兆字节？**每一个大约是 280 字节，所以它们总共应该是 25~30kb 的最大值。所以存储量很大，查询超级慢。它有可能在磁盘上碎片化吗？在将文档插入完整`Pages`集合后，我创建了聚合。

有人对这种疯狂有任何见解吗？:O

* * *

编辑：解决了 Jared 更具体的 find() 查询。Sammaye 提供的以下视频也提供了一些非常有趣的存储见解。

* * *

编辑2：所以我发现使用 sys.getsizeof() 是找出文档大小的一种*非常*不可靠的方法，因为它不会递归任何树。所以实际上我的文档非常大，最好的办法是使用 find({}, {'daily_page_loads'}) 作为更具体的查询！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T18:46:36.923

这`avgObjSize`与 280 字节的估计值不符。这是说您的对象平均约为 5MB，`storageSize`接近 1GB。如果内存受限，运行需要访问所有 1GB 文件的查询会导致大量页面错误。

你试过[压缩](http://docs.mongodb.org/manual/reference/command/compact/)吗？

```
db.runCommand({compact: 'Aggregates'}) 
```

或[修理](http://docs.mongodb.org/manual/reference/command/repairDatabase/)？

```
db.repairDatabase() 
```

如果这不起作用，请尝试仅拉回总和所需的那些字段，而不是拉动整个文档。可能这些文档实际上是 5MB，而且时间花在通过网络提取数据上。

```
def get_total():
    start = datetime.now()
    print sum([x['daily_total_pages'] for x in c.Aggregates.find({}, {"daily_total_pages": 1})])
    end = datetime.now()
    print (end-start).seconds 
```

# java - Selenium WebDriver 返回？？？当我使用 .getText() 时用于 UI 中的语言字符

> ID：14385699
> 
> 赞同：2
> 
> 时间：2013-01-17T18:27:45.420
> 
> 标签：java, selenium, selenium-webdriver

好的，我正在尝试从模态返回标头。标题是मैंबढ़ियाहूँ。当我在驱动程序上使用“获取文本（）”值时，它返回？？？？？？我如何让 java 返回 मैं बढ़िया हूँ 而不是 ????? 谢谢

```
public String get Title(){
driver.FindElement(By.cssSelector(cssElement)).click();
waitForMonitorToBeVerified(cssElement);
String element = driver.findElement(By.cssSelector(cssElement)).getText();
util.print("UI: "+element);
         driver.findElement(By.cssSelector(cssElement)).click();
        return element;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:22:18.383

据我所知，这不是硒方面的问题。我认为这是您的 eclipse（任何其他 Java IDE）编码问题的问题。

见下面的帖子。

[如何在 Java/Eclipse 中使用特殊字符](https://stackoverflow.com/questions/200691/how-to-use-special-chars-in-java-eclipse)

# xcode - 增加了版本和构建但仍然是关键 CFBundleVersion Info.plist 文件必须包含比之前上传的版本更高的版本

> ID：14385709
> 
> 赞同：1
> 
> 时间：2013-01-17T18:28:23.650
> 
> 标签：xcode, info.plist

我的应用程序在商店中，版本为 2013.0（我选择使用年份）和 Build 1。

尝试更新，甚至尝试了版本 3000 Build 5。

继续收到错误消息：“此捆绑包无效。Info.plist 文件中的密钥 CF BundleVersion 必须包含比之前上传的版本更高的版本。”

我已经阅读了解决这个问题的各种答案——我所做的应该有效。

有什么建议么？xCode 4.5.2

TIA

# c# - \Web Api 和前端数据库

> ID：14385712
> 
> 赞同：0
> 
> 时间：2013-01-17T18:28:30.707
> 
> 标签：c#, asp.net-mvc, database, repository, asp.net-web-api

我想要一个 ASP.NET MVC 网站，它有一些前端用于查看、添加和其他数据。然后我想要有 Web Api 来获取移动设备的数据等等。我想首先使用 EF 的代码（我正在使用 Ninject）。我为酒店和其他人创建课程。我创建了 HotelManagerContext 并创建了数据库并且看起来不错。为此，我正在通过 HomeController 和 Repository 添加数据。当我在 Visual Studio 中查看数据库时，数据就在那里。但是当我尝试将我的 HotelsController 用于 Api 时，数据上下文是空的。怎么了？我忘记设置什么？有连接字符串的东西还是什么？

这是我的 ApiController：

```
public class HotelsController : ApiController
{
    private IHotelRepository _hotelRepo { get; set; }

    public HotelsController(IHotelRepository repo)
    {
        _hotelRepo = repo;
    }

    // GET api/Hotels
    public IEnumerable<Hotel> GetHotels()
    {
        return _hotelRepo.GetAll();
    }

    // GET api/Hotels/5
    public Hotel Gethotel(int id)
    {
        return _hotelRepo.Get(id);
    }
} 
```

这是我的前端控制器的一部分：

```
public class HomeController : Controller
{
    private IHotelRepository _hotelRepo { get; set; }

    public HomeController(IHotelRepository repo)
    {
        _hotelRepo = repo;
    }

    public ActionResult Index()
    {
        return View();
    }

    // next methods, for adding data and so
} 
```

这是我的存储库：

```
public class HotelRepository : IHotelRepository
{
    private HotelManagerContext db { get; set; }

    public HotelRepository()
        :this (new HotelManagerContext())
    {
    }

    public HotelRepository(HotelManagerContext hotelManagerContext)
    {
        // TODO: Complete member initialization
        this.db = hotelManagerContext;
    }

    public Models.Hotel Get(int id)
    {
        return db.hotels.SingleOrDefault(h => h.hotId == id);
    }

    public IQueryable<Models.Hotel> GetAll()
    {
        return db.hotels;
    }

    public Hotel Add(Hotel hotel)
    {
        db.hotels.Add(hotel);
        db.SaveChanges();
        return hotel;
    }
} 
```

这是我的 HotelManagerContext：

```
public class HotelManagerContext : DbContext
{
    public HotelManagerContext() : base("name=HotelManagerContext")
    {
    }

    public DbSet<Hotel> hotels { get; set; }
} 
```

**编辑：**

```
 private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IHotelRepository>().To<HotelRepository>();
        GlobalConfiguration.Configuration.DependencyResolver = new NinjectResolver(kernel);
    } 
```

**Edit2：** 这是我的连接字符串：

```
<add name="HotelManagerContext" connectionString="Data Source=(localdb)\v11.0; Initial Catalog=HotelManagerContext-20121219191411; Integrated Security=True; MultipleActiveResultSets=True; AttachDbFilename=|DataDirectory|HotelManagerContext-20121219191411.mdf" providerName="System.Data.SqlClient" /> 
```

而且我刚刚发现即使在 HomeController 中我也有空的数据上下文。因此，当我在服务器资源管理器中检查数据库内容时，我添加了一些数据（在 HomeController 中）。但是每次当我有请求页面（web api 或前端）时，datacontext 都是空的，我可以添加从零开始计数的项目，但在数据库中已经有下一个但无法获取。这真的很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:54:40.627

您的连接字符串是什么样的？“name=HotelManagerContext”似乎不完整。我认为您至少还想明确指定 providerName="System.Data.EntityClient" （请参见[此处](http://msdn.microsoft.com/en-us/library/cc716756.aspx)）。在任何情况下，通常的做法是将连接字符串放在 Web.Config 文件中并在那里分配名称（即 name="HotelMamangerContext"），然后，在正常情况下，EF 只会按照约定发现连接字符串，只要您的 DbContext 类的名称与 Web.Config 中的连接字符串的名称匹配（否则您仍然可以在构造函数中显式指定它）。

另一方面（我认为这与您当前的问题无关），您也可以考虑注入 DbContext 。然后，您可以在存储库类中删除无参数构造函数，除非您出于其他原因（例如单元测试）需要保留它。此外，如果您使用的是 Ninject.Web.Common，您可能需要考虑将实例范围限定为请求级别（请参阅[InRequestScope](https://github.com/ninject/Ninject.Web.Common/wiki/InRequestScope)）。

```
 ...
 kernel.Bind<HotelMamangerContext>().ToSelf().InRequestScope();
 kernel.Bind<IHotelRepository>().To<HotelRepository>().InRequestScope();
 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:40:05.793

我找不到解决方案，所以我创建了新项目，并做了所有问题。我有相同的课程，复制并粘贴问题中的代码。我找不到任何重要的区别，但它第二次起作用了。

我知道这并不完全是解决方案，但在这种情况下，我可以从乞讨开始我的项目，所以我尝试了它，它真的很有帮助。就是不知道哪里出了问题。

# delphi - 具有未绑定列的 Devexpress 网格

> ID：14385714
> 
> 赞同：2
> 
> 时间：2013-01-17T18:28:41.270
> 
> 标签：delphi, gridview, devexpress

我有一个 DevExpress 网格，我想在其中添加一个未绑定的复选框，以便能够选择一些项目。做出选择后，我按下一个按钮，我必须循环网格以获取所有选定的项目。它必须是一个复选框。我尝试过使用多选网格，但用户无法使用它。

我已经尝试了在支持站点上找到的所有样本，但没有运气。

*   我需要不受约束的方法，因为它是一个多用户设置，并且用户一直在为彼此选择和取消选择。

我的问题：有没有人有一个工作样本来说明如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:10:47.843

我已经这样做了，它（是！）非常丑陋！创建带有绑定列的网格视图，并添加一个字段类型为布尔值的未绑定复选框列。

基本上我处理网格视图的 OnCellClick 。我检查单击的项目是否是复选框列 - 通过在视图中查找具有复选框类型的第一个未绑定列。然后我切换它的状态。

我已将数据集上的 AutoEdit 设置为 true，但将删除/编辑/插入设置为 false，并且 ImmediateEditor 为 false。不完全确定其中哪些是重要的。

我认为最难的事情是试图弄清楚网格和视图级别对象的复杂层次结构，并找出哪些级别包含哪些所需的位。我敢肯定有更好的方法可以做到，但我们现在所拥有的方法是有效的，我不会再碰它了！

这是从我的代码中提取的，但稍作修改并没有按原样进行测试 - 它还需要更多的错误检查：

```
procedure TMyForm.ViewCellClick(Sender: TcxCustomGridTableView;
  ACellViewInfo: TcxGridTableDataCellViewInfo; AButton: TMouseButton;
  AShift: TShiftState; var AHandled: Boolean);
var
  col: TcxGridColumn;
begin
  // Manually handle the clicking of the checkbox cell - otherwise it seems
  // virtually impossible to get the checked count correct.
  col := GetViewCheckColumn(Sender);
  if (Sender.Controller.FocusedItem = col) then
  begin
    ToggleRowSelection(TcxCustomGridTableView(TcxGridSite(Sender).GridView), col);
  end;
end;

procedure TMyForm.ToggleRowSelection(AView: TcxCustomGridTableView; ACol: TcxGridColumn);
var
  rec: TcxCustomGridRecord;
begin
  rec := AView.Controller.FocusedRecord;
  if (rec = nil) then exit;

  if (rec.Values[ACol.Index] = TcxCheckBoxProperties(ACol.Properties).ValueChecked) then
  begin
    rec.Values[ACol.Index] := TcxCheckBoxProperties(ACol.Properties).ValueUnchecked;
  end
  else
  begin
    rec.Values[ACol.Index] := TcxCheckBoxProperties(ACol.Properties).ValueChecked;
  end;
end;

function TMyForm.GetViewCheckColumn(AView: TcxCustomGridView): TcxGridColumn;
var
  index: integer;
  vw: TcxCustomGridTableView;
  item: TcxCustomGridTableItem;
begin
  // We're looking for an unbound check box column - we'll return the first
  // one found.

  Assert(AView <> nil);
  result := nil;
  if (AView is TcxCustomGridTableView) then
  begin
    vw := TcxCustomGridTableView(AView);
    for index := 0 to vw.ItemCount - 1 do
    begin
      item := vw.Items[index];
      if (item.Properties is TcxCustomCheckBoxProperties) then
      begin
        if (item is TcxGridDBColumn) then
        begin
          if (TcxGridDBColumn(item).DataBinding.FieldName = '') then
          begin
            result := TcxGridColumn(item);
            break;
          end;
        end;
      end;
    end;
  end;
end; 
```

然后我通过检查网格的 OnKeyUp 中的空格键并调用 ToggleRowSelection 来扩展它，并且对于双击一行也类似。

遍历行时，您可以测试是否使用以下内容检查了行：

```
function TMyForm.GetViewIsRowChecked(AView: TcxCustomGridView; ARecord: TcxCustomGridRecord): boolean;
var
  col: TcxGridColumn;
begin
  result := False;
  col := GetViewCheckColumn(AView);
  if ((col <> nil) and (ARecord <> nil)) then
  begin
    result := (ARecord.Values[col.Index] = TcxCheckBoxProperties(col.Properties).ValueChecked);
  end;
end; 
```

我想就是这样。我已经从我们已经建立了一段时间的大型网格/视图辅助单元中挖出了它。哦，它目前正在使用带有 DXVCL v2011 vol 1.10 的 Delphi 2010。

希望能帮助到你。

# javascript - 我的 Javascript 应该在点击时加载一个 CSS，但同时加载两者

> ID：14385715
> 
> 赞同：0
> 
> 时间：2013-01-17T18:28:41.690
> 
> 标签：javascript, html, css

当我启动我的页面时，css 完全搞砸了，因为我的 js 应该在点击时动态加载 css（移动或标准网站 css）。目前，它只是加载它们。这是代码：

```
function loadjscssfile(filename, filetype)
{
    if (filetype=="css")
    {
        var fileref = document.createElement("link");
        fileref.rel= "stylesheet";
        fileref.type = "text/css";
        fileref.href = filename;
        document.getElementsByTagName("head")[0].appendChild(fileref)

    }
}
loadjscssfile("HCSS.css", "css") 
```

我在网站上有两个链接。一个加载移动 css，另一个加载标准网站 css。我有它像这样链接：

```
 <a href="javascript:loadjscssfile ('HCSS.css','css')"> load hcss </a>
 <br/>
 <a href="javascript:loadjscssfile ('foundation.css','css')"> load mobile </a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:28:33.323

What you are after is swapping css files, not just loading a new one. In jquery it would probabaly look something like this (code not tested):

```
function swapCssFiles(fileToLoad, fileToUnload) {
  $('head link[href="'+fileToUnload'"]')   // select the tag with css to unload
      .attr('href', fileToLoad);  // swap the href attribute with the file to load
} 
```

This is off course possible with 'pure' javascript, but I'm to much a jQuery addict to tell you how. If you see how easy the syntax is, you can probably tell why.

Your links would look something like this:

```
<a href="javascript:swapCssFiles ('HCSS.css','default.css')"> load hcss </a> 
```

I hope this is helpfull.

Note however that this is not the way I would approach this. If you want to target mobile devices with specific css, I would use mediaqueries to detect screensize, and not javascript.

# java - 如何让“p:focus”在这个简单的应用程序中正常工作（它目前根本没有“聚焦”）

> ID：14385718
> 
> 赞同：1
> 
> 时间：2013-01-17T18:28:57.807
> 
> 标签：java, jsf, primefaces, focus, mojarra

# 问题：

PrimeFaces“p:focus”标签没有***聚焦***。
-即，当 xhtml 页面呈现给用户时，没有输入字段处于焦点。

# 问题：

为什么不？如何让“p:focus”在这个简单的应用程序中正常工作？

***（注意：使用 Java 6、Mojarra v2.1.11、PrimeFaces v3.4.2）***

# 索引.jsp

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
    <f:view contentType="text/html">
        <h:head>
            <title>testcal2 - index.xhtml</title>
            <meta charset="utf-8" />
        </h:head>
        <h:body>
            <h:form id="queryForm">

                <f:event type="postValidate" listener="#{testBean.validate}" />

                <h:panelGroup id="msgsx">
                    <p:messages showSummary="true"/>
                </h:panelGroup>

                <p:panel id="queryPanel"  header="Test p:focus..." style="width:100%;">

                    <p:focus context="queryPanel"/>

                    <h:panelGroup id="msgs" style="height:1.5em; text-align: center;display:block">
                        <p:message id="lastName_msg"    for="lastName"     style="display:none;" showSummary="false"/>
                        <p:message id="birthDate_msg"   for="birthDate"    style="display:none;" showSummary="false"/>
                        <p:message id="startDate_msg"   for="startDate"    style="display:none;" showSummary="false"/>
                    </h:panelGroup>

                    <h:panelGroup id="querypanelgroup" style="display:inline-block;">

                        <h:panelGroup>
                            <h:panelGroup style="text-align:right;vertical-align:middle;display:inline-block;width:150px">
                                <p:outputLabel style="margin-right: 5px;"  value="Last Name:" for="lastName"/>
                            </h:panelGroup>
                            <h:panelGroup style="margin-left: 4px; vertical-align:middle;display:inline-block;width:250px;">
                                <p:inputText
                                    id="lastName"
                                    value="#{testBean.parmMap['lastName']}"
                                    requiredMessage="last name required"
                                    size="95"
                                    maxlength="95"
                                    onfocus="$('#queryForm\\:msgs > div').hide();$('#queryForm\\:msgs > div').eq(0).show();return false;" >
                                </p:inputText>
                            </h:panelGroup>
                        </h:panelGroup>

                        <br/>
                        <br/>

                        <h:panelGroup>
                            <h:panelGroup style="text-align:right;vertical-align:middle;display:inline-block;width:150px">
                                <p:outputLabel style="margin-right: 5px;"  value="Birth Date:" for="birthDate"/>
                            </h:panelGroup>
                            <h:panelGroup style="margin-left: 4px; vertical-align:middle;display:inline-block;width:250px;">
                                <p:inputText
                                    id="birthDate"
                                    value="#{testBean.parmMap['birthDate']}"
                                    requiredMessage="birth date required"
                                    converter="dpConverter"
                                    styleClass="datePicker"
                                    onfocus="$('#queryForm\\:msgs > div').hide();$('#queryForm\\:msgs > div').eq(1).show();$(this).mask('99/99/9999');return false;">
                                    <p:ajax event="change" process="@this" update="@this"/>
                                </p:inputText>
                            </h:panelGroup>
                        </h:panelGroup>

                        <br/>
                        <br/>

                        <h:panelGroup>
                            <h:panelGroup style="text-align:right;vertical-align:middle;display:inline-block;width:150px">
                                <p:outputLabel style="margin-right: 5px;"  value="Start Date:" for="startDate"/>
                            </h:panelGroup>
                            <h:panelGroup style="margin-left: 4px; vertical-align:middle;display:inline-block;width:250px;">
                                <p:inputText
                                    id="startDate"
                                    value="#{testBean.parmMap['startDate']}"
                                    requiredMessage="start date required"
                                    converter="dpConverter"
                                    styleClass="datePicker"
                                    onfocus="$('#queryForm\\:msgs > div').hide();$('#queryForm\\:msgs > div').eq(2).show();$(this).mask('99/99/9999');return false;">
                                    <!-- optional to populate another field with same value...
                                    onchange="$('...hashSymbolHere...queryForm\\:endDate').val($(this).val());">
                                    -->
                                    <p:ajax event="change" process="@this" update="@this"/>
                                </p:inputText>
                            </h:panelGroup>
                        </h:panelGroup>

                        <br/>
                        <br/>

                        <p:commandButton
                            id="submit"
                            value="Submit"
                            oncomplete="applyDatePicker();"
                            type="submit"
                            update="@form"
                            process="@form"
                            action="#{testBean.submitQuery}"
                            style="width:150px;"
                            styleClass="button"/>

                        <p:commandButton
                            value="Reset"
                            update="@form"
                            onclick="location.reload();return true;"
                            process="@this"
                            actionListener="#{testBean.reset}"
                            immediate="true"
                            ajax="false"/>

                    </h:panelGroup>
                </p:panel>
            </h:form>

            <h:outputStylesheet library="styles"    name="query.css"      />
            <h:outputScript      library="primefaces" name="/jquery/jquery.js" />
            <h:outputScript      library="primefaces" name="/jquery/plugins/ui/jquery-ui.custom.js" />
            <h:outputScript     library="primefaces" name="/jquery/plugins/inputmask/maskedinput.js" />
            <h:outputScript      library="js" name="index.js" target="head" />

        </h:body>
    </f:view>
</html> 
```

# index.js

```
$(document).ready(function()
{
    applyDatePicker();
});

function applyDatePicker(){

    $('.datePicker').datepicker(
    {
        showOn: 'button',
        buttonText: "Choose",
        showButtonPanel: true,
        showOptions: {direction: 'up'},
        changeYear: true,
        changeMonth: true,
        yearRange: "c-120:c+0"
    });
} 
```

# TestBean.java

```
package aaa.bbb.ccc.war;

import java.io.Serializable;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.LinkedHashMap;
import javax.faces.application.FacesMessage;
import javax.faces.component.UIForm;
import javax.faces.component.UIInput;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
import javax.faces.event.ComponentSystemEvent;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;

@Component("testBean")
@Scope("request")
public class TestBean implements Serializable
{
    public TestBean()
    {
        parmMap = this.getParmMap();
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("parmMap", parmMap);
    }

    public void reset(ActionEvent event)
    {
        LinkedHashMap<String, Object> m = new LinkedHashMap<String, Object>();
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().remove("parmMap");
        setParmMap(m);
    }

    public String submitQuery()
    {
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().remove("hitlistData");

        if (this.getParmMap().isEmpty())
        {
            return "";
        }

        return "/page2.xhtml?faces-redirect=true";
    }

    private static LinkedHashMap<String, Object> parmMap;
    public LinkedHashMap<String, Object> getParmMap()
    {
        LinkedHashMap<String, Object> map = (LinkedHashMap<String, Object>) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("parmMap");

        if (null == map)
        {
            map = new LinkedHashMap<String, Object>();
        }
        return map;
    }

    public void setParmMap(LinkedHashMap<String, Object> map)
    {
        parmMap = map;
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("parmMap", parmMap);
    }
    private static SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");

    public void validate(ComponentSystemEvent e) throws ParseException
    {
        LinkedHashMap parmMap = this.getParmMap();
        UIForm queryForm = (UIForm) e.getComponent();
        FacesContext fc = FacesContext.getCurrentInstance();

        UIInput lastName_c = (UIInput) queryForm.findComponent("lastName");
        String lastName = (String) (lastName_c.getValue());

        UIInput birthDate_c = (UIInput) queryForm.findComponent("birthDate");
        String birthDate = (String) birthDate_c.getValue();

        UIInput startDate_c = (UIInput) queryForm.findComponent("startDate");
        String startDate = (String) startDate_c.getValue();

        try
        {
            if (null != lastName && lastName.trim().length() > 0)
            {
                if (null == birthDate || birthDate.length() < 1)
                {
                    birthDate_c.setValid(false);
                    fc.addMessage(birthDate_c.getClientId(), new FacesMessage(FacesMessage.SEVERITY_ERROR, birthDate_c.getRequiredMessage(), birthDate_c.getRequiredMessage()));
                }
                else
                {
                    birthDate_c.setValid(true);
                }
            }
            else
            {
                birthDate_c.setValid(true);
            }

            if (null == startDate || startDate.trim().length() < 1)
            {
                startDate_c.setValid(false);
                fc.addMessage(startDate_c.getClientId(), new FacesMessage(FacesMessage.SEVERITY_ERROR, startDate_c.getRequiredMessage(), startDate_c.getRequiredMessage()));
            }
            else
            {
                startDate_c.setValid(true);
            }

            if (fc.getMessageList().size() > 0)
            {
                fc.renderResponse();
            }
        }
        catch (Exception e1)
        {
            e1.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:51:38.887

这是因为您在`false`这里重新关注焦点：

```
<p:inputText
    ...
    onfocus="$('#queryForm\\:msgs > div').hide();$('#queryForm\\:msgs > div').eq(0).show();return false;" >
</p:inputText> 
```

返回`false`会导致事件的默认行为被阻止。

要解决您的问题，只需`return false;`从`onfocus`输入组件的属性中删除。

```
<p:inputText
    ...
    onfocus="$('#queryForm\\:msgs > div').hide();$('#queryForm\\:msgs > div').eq(0).show();" >
</p:inputText> 
```

# azure - 如何将 Azure Active Directory (WAAD) 连接到 Windows Azure 访问控制服务 (ACS)？

> ID：14385721
> 
> 赞同：3
> 
> 时间：2013-01-17T18:29:12.627
> 
> 标签：azure, active-directory, acs, adfs, azure-active-directory

我已经在使用 ACS，并且很想将 Azure Active Directory 设置为身份提供者。

我似乎找不到任何从 WAAD 获取 ADFS 信息的方法，但我想它还处于早期阶段......

有谁知道这是否可能？

乔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T05:39:57.477

是的，这是可能的，请看这里：

[http://blogs.msdn.com/b/vbertocci/archive/2012/11/07/provisioning-a-directory-tenant-as-an-identity-provider-in-an-acs-namespace.aspx](http://blogs.msdn.com/b/vbertocci/archive/2012/11/07/provisioning-a-directory-tenant-as-an-identity-provider-in-an-acs-namespace.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:29:02.197

是的，可以通过访问控制服务 (ACS) 连接 Windows Azure Active Directory。这是 Windows Azure AD 和 ACS 的基本功能。

您可以找到如何连接 Windows Azure AD 和验证用户的详细过程。按照链接 [http://www.windowsazure.com/en-us/develop/net/how-to-guides/access-control/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/access-control/)

# javascript - Javascript 在 iframe 中捕获服务器响应

> ID：14385724
> 
> 赞同：2
> 
> 时间：2013-01-17T18:29:19.873
> 
> 标签：javascript, iframe

我编写了一个 javascript 来将数据发布到服务器。这似乎有效，但我无法在 iframe 中捕获服务器响应。我想在 iframe 或数据流中捕获服务器响应，而不转发到其他页面或刷新，但我会解决只是停止页面被转发或刷新。

我尝试添加`target="my_frame"`到按钮和表单属性，但它似乎不起作用。

我的代码，我稍微修改了我的演示代码：

```
 <html>
  <head>

    <title>post</title>

  </head>
  <body>

<script language="javascript">

   var myDictionary = [];
    myDictionary["username"] = "stackoverflow";
    myDictionary["password"] = "mypassword";

function post(dictionary, url, method) {
    method = method || "post"; 

    var form = document.createElement("form");
    form.setAttribute("method", method);
    form.setAttribute("action", url);

    for (key in dictionary) {
        var hiddenField = document.createElement("input");
        hiddenField.setAttribute("type", "hidden"); 
        hiddenField.setAttribute("name", key);
        hiddenField.setAttribute("value", dictionary[key]);
        form.appendChild(hiddenField); 
    }

    document.body.appendChild(form); 
    form.submit();
}
</script>

<input type="button" target="my_frame" value="Submit" onclick="javascript:post(myDictionary, 'http://www.website.com/register/registernow');" />

    <iframe name="my_frame" src="">

  </body>
</html> 
```

感谢您的阅读和所有回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:36:31.957

您正在寻找的是 Ajax POST。

您不需要创建表单并提交它，而是需要 XMLHttpRequest，或者如果您使用 jquery，您可以使用 $.post 或 $.ajax。

参见例如[http://blog.mgechev.com/2011/07/21/ajax-jquery-beginners/](http://blog.mgechev.com/2011/07/21/ajax-jquery-beginners/)

# java - 'java.util.NoSuchElementException: No line found' 使用扫描器类

> ID：14385730
> 
> 赞同：0
> 
> 时间：2013-01-17T18:29:49.427
> 
> 标签：java, exception, java.util.scanner

当我尝试运行我的程序时出现此错误

```
Exception in thread "main" java.util.NoSuchElementException: No line found
    at java.util.Scanner.nextLine(Scanner.java:1516)
    at studenttextwrite.StudentDAO.open(StudentDAO.java:37)
    at studenttextwrite.StudentTextWrite.main(StudentTextWrite.java:33)
Java Result: 1 
```

我正在尝试将对象写入 txt 文件“student.txt”。我检查了文本文件是否在正确的文件夹中，并且我有要读取的行。该程序应该逐行读取，然后从这些行创建一个对象。

这是代码的样子，任何帮助将不胜感激，谢谢。

```
public class StudentDAO implements DAO {

ArrayList<Student> studentList = new ArrayList();
String outputFileName = "student.txt";
File outputFile = new File(outputFileName);
Scanner in;

public StudentDAO() throws DAOException {
    try {
        in = new Scanner(new BufferedReader(new FileReader(outputFile)));
    } catch (FileNotFoundException ex) {
        throw new DAOException(ex.getMessage());
    }
}

@Override
public void open() {
    while (in.hasNextLine()) {
        String studentName = in.nextLine();
        String studentClass = in.nextLine();
        String teacher = in.nextLine();
        String studentAge = in.nextLine();
        int studentAgeInt = Integer.parseInt(studentAge);
        studentList.add(new Student(studentName, studentClass, teacher,
                studentAgeInt));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:31:18.560

```
while (in.hasNextLine()) {
        String studentName = in.nextLine();
        String studentClass = in.nextLine();
        String teacher = in.nextLine();
        String studentAge = in.nextLine();
} 
```

你`hasNextLine()`只做一次检查。但是您正在阅读 4 行`in.nextLine();`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:25:28.840

问题是您的代码假设每个学生记录由四行组成，但您对特定学生的行数较少。考虑一个包含以下条目的文件（左边的数字是行号）：

1.  a1
2.  车
3.  b1
4.  21
5.  a2
6.  车
7.  b2
8.  22
9.  a3
10.  化学
11.  b3

运行以下代码将产生您遇到的类似错误，因为第三个 (a3) 学生只有三行。检查您的输入文件。

```
while(in.hasNextLine()){
   System.out.println(" "+in.nextLine());
   System.out.println(" "+in.nextLine());
   System.out.println(" "+in.nextLine());
   System.out.println(" "+in.nextLine());
 } 
```

# c# - 使用 c# 项目类解决 .vcxproj 依赖项不会返回包含的文件夹

> ID：14385733
> 
> 赞同：0
> 
> 时间：2013-01-17T18:30:12.157
> 
> 标签：c#, visual-c++, include, project, vcproj

我正在尝试编写一个工具来解决 c++ 和 c# 项目之间的依赖关系。当我尝试获取 vcxproj 中包含的文件夹时，它会返回除包含文件夹之外的所有内容。我搜索了我希望在哪里找到它们：

```
ItemDefinitions -> ClCompile -> AdditionalIncludeDirectories 
```

但他们不在那里，或其他任何地方。

```
Project proj = new Project(projectFileName);

ProjectItemDefinition tp = proj.ItemDefinitions.First(pid =>
    String.Compare(pid.Key,"ClCompile", true) == 0).Value; 

ProjectMetadata tpPMD = tp.Metadata.First(pmd =>
    String.Compare(pmd.Name,"AdditionalIncludeDirectories", true) == 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-02T20:07:34.553

据我所知，C# 项目和 C++ 项目有不同的对象。如果你想获得 VC++ 项目，你应该参考[VCProject](https://msdn.microsoft.com/en-us/library/microsoft.visualstudio.vcproject.aspx)和[VCProjectEngine](https://msdn.microsoft.com/en-us/library/microsoft.visualstudio.vcprojectengine.aspx)。

下面是一个关于如何获取VC项目的例子，你可以参考：

[http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.vcprojectengine.vcproject.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.vcprojectengine.vcproject.aspx)

# magento - Magento 在布局中设置多商店愿望清单错误

> ID：14385737
> 
> 赞同：0
> 
> 时间：2013-01-17T18:30:24.007
> 
> 标签：magento

我正在尝试在 magento 安装上设置新商店。它是安装的第二个网站/商店，托管在不同的域和不同的文件夹中。数据库是一样的。

我按照所有说明配置和设置新商店。我从旧商店复制了布局、设计和皮肤文件而没有更改它们。理论上，两家商店都在运行相同的代码。在浏览器中访问新商店时，出现以下错误：

警告：call_user_func_array() 期望参数 1 是一个有效的回调，类 'Mage_Wishlist_Helper_Data' 在第 323 行的 /httpdocs/app/code/core/Mage/Core/Model/Layout.php 中没有方法 ''

0 [内部函数]: mageCoreErrorHandler(2, 'call_user_func_...', '/var/www/vhosts...', 323, Array) 1 /httpdocs/app/code/core/Mage/Core/Model/Layout .php(323): call_user_func_array(Array, Array) 2 /httpdocs/app/code/core/Mage/Core/Model/Layout.php(213): Mage_Core_Model_Layout->_generateAction(Object(Mage_Core_Model_Layout_Element), Object(Mage_Core_Model_Layout_Element)) 3 /httpdocs/app/code/core/Mage/Core/Model/Layout.php(209): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element)) 4 /httpdocs/app/code/core/Mage/Core/Model/Layout .php(209): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element)) 5 /httpdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(343): Mage_Core_Model_Layout->generateBlocks() 6 /httpdocs /app/code/core/Mage/Core/Controller/Varien/Action.php(270): Mage_Core_Controller_Varien_Action->generateLayoutBlocks() 7 /httpdocs/app/code/core/Mage/Cms/controllers/IndexController.php(60): Mage_Core_Controller_Varien_Action->loadLayout() 8 /httpdocs/app/code/core/ Mage/Core/Controller/Varien/Action.php(418): Mage_Cms_IndexController->defaultIndexAction() 9 /httpdocs/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(253): Mage_Core_Controller_Varien_Action- >dispatch('defaultIndex') 10 /httpdocs/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http)) 11 /httpdocs/app/code/ core/Mage/Core/Model/App.php(340): Mage_Core_Controller_Varien_Front->dispatch() 12 /httpdocs/app/Mage.php(627): Mage_Core_Model_App->run(Array) 13 /httpdocs/index.php(81 ): 法师::运行('我的网站'，'网站'）

我禁用了管理 > 配置 > 客户下的愿望清单和管理 > 配置 > 高级 > 高级中的模块输出。

此外，我的 local.xml 具有以下内容：

```
 <!-- Removes 'Wishlist' link - Default position: 20 -->
        <!-- for Magento 1.3.x -->
        <action method="removeLinkByUrl"><url helper="wishlist/"/></action>

        <!-- for Magento 1.4.x -->
        <remove name="wishlist_link"/> 
```

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:34:08.877

我尝试以多种方式删除链接......最后我一起摆脱了顶级链接并硬编码了我想要的链接。

将此添加到 local.xml 并删除 top.links 部分以将其从站点中删除：

```
 <reference name="root"> 
        <remove name="top.links" />
    </reference> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:48:42.680

好像是配置线

```
<action method="removeLinkByUrl"><url helper="wishlist/"/></action> 
```

是不正确的。

这里发生的是 Mage_Page_Block_Template_Links 类型的块调用它的函数 removeLinkByUrl($url)。参数 $url 由另一个函数生成，该函数由 hepler 类 Mage_Wishlist_Helper_Data 提供。缺少函数的名称：而不是 "wishlist/" 应该是 "wishlist/someFunctionThatGetsAUrl" 。由于没有提供函数名，所以系统找不到并抛出此错误

如果目标是隐藏 wishlink 块，用 line 表示

```
<remove name="wishlist_link"/> 
```

那么为什么不注释掉action config行，这对我来说似乎是多余的？

冗余可能来自尝试为两个较旧的 Magento 版本（1.3x 和 1.4x）提供服务。在 1.3x 中，动作配置可能是有效的，但在您当前的 Magento 版本中似乎并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:38:07.773

在 Magento 中删除愿望清单链接很痛苦，并且可能导致错误。你可以做的是按照这个答案为愿望清单链接设置一个空白模板，这样就不会导致错误（代码见答案的底部）：

[https://stackoverflow.com/a/4424679/823549](https://stackoverflow.com/a/4424679/823549)

# maven - 根据环境激活配置文件

> ID：14385738
> 
> 赞同：1
> 
> 时间：2013-01-17T18:30:26.937
> 
> 标签：maven

这是我的场景：

*   Maven 2.0.9 是我们的构建系统
*   我们将代码安装到多个环境
*   我们所有特定于环境的属性都包含在属性文件中，每个环境一个
    *   [我们目前使用properties-maven-plugin](http://mojo.codehaus.org/properties-maven-plugin/)将这些属性读入 maven ；这个*子项目符号*不是必需的，只是我们当前的解决方案

目标：

*   仅针对某些环境执行构建的某些部分（即插件执行）
*   通过在特定于环境的属性文件中设置值来控制运行哪些部件

到目前为止我已经尝试过：

*   Maven 允许将插件执行放在 pom 配置文件中，可以通过属性激活；不幸的是，[这些必须是*系统*属性](https://stackoverflow.com/a/5676534/539048)- 即。来自 settings.xml 或命令行，而不是来自`properties-maven-plugin`

如果可能，我们希望将所有内容都封装在构建工作区中，如下所示：

```
project
    pom.xml
    src
       ...
    conf
       dev.properties
       test.properties
       prod.properties
    build-scripts
       build.groovy <-- the script that wraps maven to do the build
       install.groovy <-- ... wraps maven to do the install 
```

运行构建看起来像：

```
cd build-scripts
./build.groovy
./install.groovy -e prod 
```

有没有可能用我们正在使用的 maven 版本来实现这些目标？如果没有，是否可以使用更新版本的 Maven？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:08:19.440

仅使用 Maven 是不可能的。（另请参阅[如何通过 maven 属性激活配置文件？](https://stackoverflow.com/questions/5676231/how-to-activate-profile-by-means-of-maven-property)）原因是[配置文件是在确定有效 POM 之前评估的第一件事](https://jira.codehaus.org/browse/MNG-5235)。

我的建议是编写一些预处理器，在启动 Maven 之前解析特定于环境的属性文件并将它们转换为所需的系统属性。此脚本可以包含在您的`~/.mavenrc`文件中，以便在启动 Maven 之前自动运行。这是一个示例脚本，它假定属性文件位于固定位置：

```
properties=`cat /etc/build-env.properties`
while read line; do
   MAVEN_OPTS="$MAVEN_OPTS -D$line"
done <<< "$properties" 
```

如果属性文件不固定，您只需在脚本中添加一些内容即可发现该位置（假设它是可发现的）。

# database - 从某一天但仅在某一小时内检索行

> ID：14385741
> 
> 赞同：0
> 
> 时间：2013-01-17T18:30:35.867
> 
> 标签：database, sql-server-2008

我有一个查询返回三天前的所有行：

```
SELECT * FROM table2 
 WHERE CONVERT(date, given_schedule)
 = CONVERT(date, DATEADD(d, -3, GETDATE())) 
```

但我想知道将行限制为仅相对于当前时间的小时。例如，现在是晚上 9:00 之后，我只想检索三天前和晚上 9:00 到 10:00 之间发生的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:35:56.040

```
SELECT columns FROM dbo.table2
WHERE 
    CONVERT(DATE, given_schedule) 
    = CONVERT(DATE, DATEADD(DAY, -3, CURRENT_TIMESTAMP))
AND 
    DATEPART(HOUR, given_schedule) 
    = DATEPART(HOUR, CURRENT_TIMESTAMP); 
```

要解决@Habo 的观点，您还可以执行以下操作：

```
DECLARE @s SMALLDATETIME = CURRENT_TIMESTAMP;

SET @s = DATEADD(DAY, -3, DATEADD(MINUTE, -DATEPART(MINUTE, @s), @s));

SELECT columns FROM dbo.table2
  WHERE given_schedule >= @s
  AND given_schedule < DATEADD(HOUR, 1, @s); 
```

当然，如果实际上有一个索引以`given_schedule`作为前导列，这当然是最有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:48:30.980

您可以使用 DATEDIFF 函数并将小时作为 datepart 参数传入。

```
SELECT * FROM table2 WHERE DATEDIFF(hour, GETDATE(), given_schedule,) BETWEEN 0 AND 1 
```

有关更多信息，请参阅[此](http://msdn.microsoft.com/en-us/library/ms189794.aspx)内容。

# vb.net - vb.net 在部署的应用程序上崩溃

> ID：14385744
> 
> 赞同：0
> 
> 时间：2013-01-17T18:30:37.640
> 
> 标签：vb.net

我有一个 vb.net 视频应用程序，我使用单击一次将其部署到 Windows 7 机器上。它在启动时因未处理的异常而崩溃，我无法弄清楚它试图做什么。它确实适用于其他已部署的计算机。

以下是跟踪，我希望有人可以帮助我确定要查找的内容。我所看到的只是在 InteropServices (Interop.MSCommLib.DLL) 中有一个类未注册异常，但不确定如何修复它。

```
See the end of this message for details on invoking  just-in-time
(JIT) debugging instead of this dialog box.

    ************** Exception Text ************** System.InvalidOperationException: An error occurred creating the
    form. See Exception.InnerException for details.     The error is:
    Class not registered (Exception from HRESULT: 0x80040154
    (REGDB_E_CLASSNOTREG))
    ---> System.Runtime.InteropServices.COMException:   Class not registered (Exception from HRESULT: 0x80040154
    (REGDB_E_CLASSNOTREG))  at
    System.Windows.Forms.UnsafeNativeMethods.CoCreateInstance(Guid&
    clsid, Object punkOuter, Int32 context, Guid& iid)    at
    System.Windows.Forms.AxHost.CreateWithLicense(String license, Guid
    clsid)    at System.Windows.Forms.AxHost.CreateInstanceCore(Guid
    clsid)    at System.Windows.Forms.AxHost.CreateInstance()    at
    System.Windows.Forms.AxHost.GetOcxCreate()    at
    System.Windows.Forms.AxHost.TransitionUpTo(Int32 state)    at
    System.Windows.Forms.AxHost.CreateHandle()    at
    System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)  
    at System.Windows.Forms.Control.CreateControl(Boolean
    fIgnoreVisible)  at System.Windows.Forms.AxHost.EndInit()    at
    Player.Apex232.InitializeComponent()    at Player.Apex232..ctor()   
    --- End of inner exception stack trace ---    at Player.My.MyProject.MyForms.Create__Instance__[T](T Instance)    at
    Player.My.MyProject.MyForms.get_Apex232()    at
    Player.main.tmrInitialize_Tick(Object sender, EventArgs e)    at
    System.Windows.Forms.Timer.OnTick(EventArgs e)    at
    System.Windows.Forms.Timer.TimerNativeWindow.WndProc(Message& m)   
    at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32
    msg, IntPtr wparam, IntPtr lparam)

    ************** Loaded Assemblies ************** mscorlib
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.296 (RTMGDR.030319-2900)
        CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
    ---------------------------------------- System
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.1001 built by: RTMGDR
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
    ---------------------------------------- Player
        Assembly Version: 1.0.4765.16371
        Win32 Version: 1.0.4765.16371
        CodeBase: file:///C:/Users/1-Admin/AppData/Local/Apps/2.0/KNRBJ7QO.TBP/7LLH8JQX.G77/play..tion_0000000000000000_0002.0000_e02e247c5bbc65ce/Player.exe
    ---------------------------------------- Microsoft.VisualBasic
        Assembly Version: 10.0.0.0
        Win32 Version: 10.0.30319.1 built by: RTMRel
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/Microsoft.VisualBasic/v4.0_10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualBasic.dll
    ---------------------------------------- System.Core
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.233 built by: RTMGDR
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll
    ---------------------------------------- System.Windows.Forms
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.1001 built by: RTMGDR
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
    ---------------------------------------- System.Drawing
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.1001 built by: RTMGDR
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
    ---------------------------------------- System.Runtime.Remoting
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Runtime.Remoting/v4.0_4.0.0.0__b77a5c561934e089/System.Runtime.Remoting.dll
    ---------------------------------------- Microsoft.VisualBasic.Compatibility
        Assembly Version: 10.0.0.0
        Win32 Version: 10.0.30319.1
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/Microsoft.VisualBasic.Compatibility/v4.0_10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualBasic.Compatibility.dll
    ---------------------------------------- System.Data
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.237 (RTMGDR.030319-2300)
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_32/System.Data/v4.0_4.0.0.0__b77a5c561934e089/System.Data.dll
    ---------------------------------------- System.Xml
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.233 built by: RTMGDR
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll
    ---------------------------------------- MySql.Data
        Assembly Version: 6.4.4.0
        Win32 Version: 6.4.4.0
        CodeBase: file:///C:/Users/1-Admin/AppData/Local/Apps/2.0/KNRBJ7QO.TBP/7LLH8JQX.G77/play..tion_0000000000000000_0002.0000_e02e247c5bbc65ce/MySql.Data.DLL
    ---------------------------------------- System.Transactions
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_32/System.Transactions/v4.0_4.0.0.0__b77a5c561934e089/System.Transactions.dll
    ---------------------------------------- AxInterop.WMPLib
        Assembly Version: 1.0.0.0
        Win32 Version: 1.0.0.0
        CodeBase: file:///C:/Users/1-Admin/AppData/Local/Apps/2.0/KNRBJ7QO.TBP/7LLH8JQX.G77/play..tion_0000000000000000_0002.0000_e02e247c5bbc65ce/AxInterop.WMPLib.DLL
    ---------------------------------------- Interop.WMPLib
        Assembly Version: 1.0.0.0
        Win32 Version: 1.0.0.0
        CodeBase: file:///C:/Users/1-Admin/AppData/Local/Apps/2.0/KNRBJ7QO.TBP/7LLH8JQX.G77/play..tion_0000000000000000_0002.0000_e02e247c5bbc65ce/Interop.WMPLib.DLL
    ---------------------------------------- System.Configuration
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Configuration/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
    ---------------------------------------- System.Deployment
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Deployment/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Deployment.dll
    ---------------------------------------- Microsoft.VisualBasic.PowerPacks.Vs
        Assembly Version: 10.0.0.0
        Win32 Version: 10.0.20911.1
        CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.VisualBasic.PowerPacks.Vs/10.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualBasic.PowerPacks.Vs.dll
    ---------------------------------------- Accessibility
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.1 built by: RTMRel
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/Accessibility/v4.0_4.0.0.0__b03f5f7f11d50a3a/Accessibility.dll
    ---------------------------------------- System.EnterpriseServices
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
        CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_32/System.EnterpriseServices/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll
    ---------------------------------------- AxInterop.MSCommLib
        Assembly Version: 1.1.0.0
        Win32 Version: 1.1.0.0
        CodeBase: file:///C:/Users/1-Admin/AppData/Local/Apps/2.0/KNRBJ7QO.TBP/7LLH8JQX.G77/play..tion_0000000000000000_0002.0000_e02e247c5bbc65ce/AxInterop.MSCommLib.DLL
    ---------------------------------------- Interop.MSCommLib
        Assembly Version: 1.1.0.0
        Win32 Version: 1.1.0.0
        CodeBase: file:///C:/Users/1-Admin/AppData/Local/Apps/2.0/KNRBJ7QO.TBP/7LLH8JQX.G77/play..tion_0000000000000000_0002.0000_e02e247c5bbc65ce/Interop.MSCommLib.DLL
    ----------------------------------------

    ************** JIT Debugging ************** To enable just-in-time (JIT) debugging, the .config file for this application or computer
    (machine.config) must have the jitDebugging value set in the
    system.windows.forms section. The application must also be compiled
    with debugging enabled.

    For example:

    <configuration>
        <system.windows.forms jitDebugging="true" />
    </configuration>

    When JIT debugging is enabled, any unhandled exception
    will be sent to the JIT debugger registered on the computer
    rather than be handled by this dialog box. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:37:50.073

您在您的应用程序中使用了 ActiveX 控件，从某些视频播放器控件或串行端口 COM 对象的名称来看，该控件未在您部署 ClickOnce 应用程序的计算机上注册。ClickOnce 应用程序包含的所有内容都是围绕 ActiveX 控件的托管包装，而不是 ActiveX 控件本身。

使用 ClickOnce 安装 ActiveX 控件并不是非常简单。您可以使用 ClickOnce[引导](http://msdn.microsoft.com/en-US/library/ms229432%28v=vs.80%29.aspx)ActiveX 控件的安装，或者根本不使用 ClickOnce 并使用安装 ActiveX 控件的 MSI。

# ruby-on-rails - 新的 Rails 关键安全修复程序是什么？

> ID：14385747
> 
> 赞同：0
> 
> 时间：2013-01-17T18:30:46.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sql-injection

我从 rails 得到了这些更新：

> 我想宣布 3.2.11、3.1.10、3.0.19 和 2.3.15 已经发布。这些版本包含两个极其重要的安全修复程序，因此请立即更新。 [关联](http://weblog.rubyonrails.org/)

正如它所说，这很关键。我刚刚使用 rails 3.1 更新了我的应用程序到 3.11 并且做了`bundle update rails`. 我的问题是：

1.  现在已经修复的rails中的实际漏洞是什么？作为一名学习者，我渴望了解问题所在以及如何解决。我对此一无所知。

2.  真的是一个很大的漏洞吗，所有没有更新的Rails应用程序都有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:37:08.063

这是对黑客的解释： http: [//charlie.bz/blog/rails-3.2.10-remote-code-execution](http://charlie.bz/blog/rails-3.2.10-remote-code-execution)

以及嫩爱的原帖：[https ://groups.google.com/forum/?fromgroups=#!topic/rubyonrails-security/61bkgvnSGTQ](https://groups.google.com/forum/?fromgroups=#!topic/rubyonrails-security/61bkgvnSGTQ)

基本上，任何人都可以使用 YAML 注入 XML 并实例化任何类型的 Ruby 对象......这很复杂，但适用于所有应用程序（当然，除了修补过的应用程序和 Rails 1.X），甚至可以执行系统命令......

任何拥有 Rails 应用程序的人都应该已经升级了……如果没有，现在就做！

# java - Java Prepared 语句未执行

> ID：14385748
> 
> 赞同：1
> 
> 时间：2013-01-17T18:30:51.987
> 
> 标签：java, mysql, database, prepared-statement

我创建了一个小型 3 层程序，包括：前端 -> servlet -> 数据库。

前端我在表单中输入了一些细节。它们被传递给一个 servlet，它将呈现一些 HTML 并显示输入到表单中的值，同时还调用一个类 DatabaseHelper。然后，DatabaseHelper 连接这些相同的值并将其插入到表中。

我知道这些值正在传递给 servlet 类，因为它们正在 HTML 中显示。所以问题必须出在准备好的语句中。问题是，我看不出语句本身有任何错误。当我查询表本身时，那里没有数据。

数据库连接是功能性的，因为我可以使用硬编码语句将值插入数据库，而不是使用准备好的语句。

这是我使用的语句。非常感谢任何建议。

```
 public void addRegisterDetails(String name, String email, String country, String password, ){
    try{ 
        String driver = "com.mysql.jdbc.Driver";    
        Class.forName(driver).newInstance();
        // Make db connection
        con = DriverManager.getConnection(url, USERNAME, PASSWORD);   
        st  = con.createStatement();

        String query = " INSERT INTO user_information (name, email, country, password)" + " VALUES (?, ?, ?, ?)";
        PreparedStatement preparedStmt = con.prepareStatement(query);
        preparedStmt.setString (1, name);
        preparedStmt.setString (2, email);
        preparedStmt.setString (3, country);
        preparedStmt.setString (4, password);
        preparedStmt.execute();

    }catch(ClassNotFoundException ex) {
        System.out.println(ex);
    }catch(Exception e){
         e.printStackTrace();
    }
} 
```

表定义

* * *

## 编号| 姓名 | 电子邮件 | 国家 | 密码

所有 VARCHAR，但 id 为 INT 类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T18:35:32.540

`executeUpdate()`您应该在语句对象上调用该方法。

此外，我没有看到任何提交数据的调用，没有任何事务处理。如果您出于这个问题的目的跳过那段代码，那很好；否则这是一个非常重要的步骤（如果一切顺利，则提交，异常情况回滚）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T18:33:51.320

用于`executeUpdate`数据库写操作：

```
preparedStmt.executeUpdate(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T19:27:38.423

答：数据库 ID 未设置为自动递增。由于某种原因，这不允许您将数据插入到表中。感谢 ChadNC 指出这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T18:41:05.443

还有，为什么`st = con.createStatement();`？

为什么你的查询中有一个前导空格？

```
String query = " INSERT INTO user_information (name, email, country, password)" 
                 + " VALUES (?, ?, ?, ?)"; 
```

这个领先的空间可能重要也可能不重要......

最后，您应该在完成连接后关闭连接，使用 try-with-resources 或 finally 块。

# java - 使用 Graphics2D 实现“打孔”文本

> ID：14385751
> 
> 赞同：2
> 
> 时间：2013-01-17T18:31:07.537
> 
> 标签：java, text, graphics2d

我正在尝试在 Graphics2D 渲染上创建 Punch Out 效果。

我有一个黑色的矩形。文本颜色为红色。我希望能够将颜色设置为 0x00FF0000 并让它从背景中“冲出”。

```
 Graphics2D newG = (Graphics2D)g.create();
    newG.setColor(new Color(0x00,0x00,0x00,0xFF)); //255 Alpha
    newG.fillRect(box.x, box.y, box.width, box.height);

    newG.setColor(new Color(0xFF,0x00,0x00,0x00)); //0 Alpha
    newG.drawString("Welcome", box.x ,box.y); 
```

我看到的是文本在背景上完全透明，但没有打孔。

我所看到的：![http://i.imgur.com/HYTe1.jpg](../Images/324d781b809714b5e7a4699dd95a7a32.png)

我期望看到的：![http://i.imgur.com/YQwZk.jpg](../Images/2e7cbf7149528843dee696ad14c6c7aa.png)

如何使用 Graphics2D 实现“打孔”效果？

编辑：打孔效果就像使用前景设置为 0x00FF0000 和背景设置为 0xFF000000 的 JLabel。它从背景中“删除”/“打出”文本。我也不希望它总是打出来，只有当 alpha 为 0 时。

EDIT2：我尝试了下面的 sugested 代码，结果相同。

```
Rectangle stringBox = new Rectangle(x, y - fm.getHeight() + fm.getDescent(), fm.stringWidth(splitStr[i]), fm.getHeight());

TextLayout textLO = new TextLayout(splitStr[i], newG.getFont(), newG.getFontRenderContext());
 Shape sText = textLO.getOutline(newG.getTransform());      // The Shape of text
Path2D.Double shape = new Path2D.Double(stringBox);     // The rectangle
appendTextShape(shape, sText, newG.getTransform(), 0, 10);
newG.setColor(Color.black);
newG.fill(shape);
newG.setColor(new Color(0xFF, 0x00,0x00,0x00));
newG.drawString(splitStr[i], x, y); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:29:26.797

[http://docs.oracle.com/javase/tutorial/2d/advanced/compositing.html](http://docs.oracle.com/javase/tutorial/2d/advanced/compositing.html)

正确设置组合物是解决方案。SRC_IN 是我正在寻找的组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:51:28.600

如果您的意思是：

![在此处输入图像描述](../Images/b6d36569d7afffb1b2520cebfa4f9acf.png)

您需要获取`Shape`文本的轮廓，然后使用`Path2D`创建组合`Shape`来渲染：

```
Graphics2D g2d = ...;
TextLayout text = new TextLayout("Welcome", g2d.getFont(), g2d.getFontRenderContext());
Shape sText = text.getOutline(g2d.getTransform());      // The Shape of text
Path2D shape = new Path2D.Double(new Rectangle(200, 100));      // The rectangle
appendTextShape(shape, sText, g2d.getTransform(), 0, 10);   // combine the shape
g2d.setColor(Color.BLACK);
g2d.fill(rect); 
```

`appendTextShape`方法在这里：

```
public void appendTextShape (Path2D p, Shape s, AffineTransform t, int x, int y) {
    synchronized (s) {
        PathIterator pit = s.getPathIterator(t);
        float[] coords = new float[6];
        int c = 0;
        while (true) {
            pit.next();
            if (pit.isDone()) {
                break;
            }
            switch (pit.currentSegment(coords)) {
                case PathIterator.SEG_MOVETO:
                    p.moveTo(x + coords[0], y + coords[1]);
                    break;
                case PathIterator.SEG_LINETO:
                    if (c == 0) {
                        p.moveTo(x + coords[0], y + coords[1]);
                    } else {
                        p.lineTo(x + coords[0], y + coords[1]);
                    }
                    break;
                case PathIterator.SEG_QUADTO:
                    if (c == 0) {
                        p.moveTo(x + coords[0], y + coords[1]);
                    } else {
                        p.quadTo(x + coords[0], y + coords[1], x + coords[2], y + coords[3]);
                    }
                    break;
                case PathIterator.SEG_CUBICTO:
                    if (c == 0) {
                        p.moveTo(x + coords[0], y + coords[1]);
                    } else {
                        p.curveTo(x + coords[0], y + coords[1], x + coords[2], y + coords[3], x + coords[4], y + coords[5]);
                    }
                    break;
                case PathIterator.SEG_CLOSE:
                    p.closePath();
                    break;
            }
            c++;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T07:34:27.773

你的`appendTextShape`方法奏效了。

但是，它已经在 的构造函数中实现`Path2D`，如下所示：

```
Path2D path = new Path2D.Double(shape, affineTransform); 
```

# gwt - 如何在 GWT 2.4 中使用 WAI-ARIA

> ID：14385752
> 
> 赞同：0
> 
> 时间：2013-01-17T18:31:08.990
> 
> 标签：gwt, accessibility, wai-aria

我已经在 GWT 中创建了组件，但现在我需要为我们的组件添加可访问性。我们正在使用 GWT 2.4。IE 如何在 DisclosurePanel 中添加角色标签或 aria 标签。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:43:11.780

您是否参考了 ARIA 的 GWT 指南文档 - [https://developers.google.com/web-toolkit/doc/latest/DevGuideA11y](https://developers.google.com/web-toolkit/doc/latest/DevGuideA11y)

另请阅读[http://code.google.com/p/google-web-toolkit/wiki/ARIAImplementationDetails](http://code.google.com/p/google-web-toolkit/wiki/ARIAImplementationDetails)

我不确定在 DisclosurePanel 中添加角色标签或 aria 标签。您可以尝试遵循 GWT 团队用于 Tree 或 Menubar 的原则，它们同样显示/隐藏交互数据。

# java - 如何将 jvm 调整为崩溃而不是英勇 GC 直到 100% CPU 利用率？

> ID：14385753
> 
> 赞同：10
> 
> 时间：2013-01-17T18:31:12.157
> 
> 标签：java, garbage-collection, jvm

我们有一个 JVM 进程，它很少将 CPU 固定在 100%，看起来（根据 visualgc）一个几乎耗尽的堆。我们的假设是，该进程正在大量 GC'ing 导致 CPU 峰值，这会影响整个系统的整体健康状况（由其他 JVM 做不同的事情）。

此过程并不重要，可以重新启动。有没有办法通过命令行来调整 JVM，让它自食其力，而不是继续 GC'ing 并导致整个盒子受苦？

值得注意的是，我们没有收到 OOMExceptions，因此堆并没有完全耗尽，但我们认为几乎没有。

或者，可以让我们深入了解 JVM 中的实际使用 CPU 的方式是确认/拒绝我们的 GC 假设？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:37:50.917

我们可以从

1)：选项 -XX:+PrintGCTimeStamps 将在每个集合开始时添加一个时间戳。这对于查看垃圾收集发生的频率很有用。

使用上述选项，我们可以粗略估计您是否认为该进程是英雄 GC'ing 导致 CPU 峰值。

如果您的假设是正确的，那么开始调整您的 GC 。

```
 Both parallel collector and Concurrent Collector will throw an OutOfMemoryError if too much time is being
 spent in garbage collection: if more than 98% of the total time is spent in garbage collection and 
less than 2% of the heap is recovered, an OutOfMemoryError will be thrown. the option X:-UseGCOverheadLimit 
 is enabled by default for both Parallel and concurrent collector . Check whether this option is disabled in
 your system . 
```

有关 JVM 中 Gc 调优的更多信息，请参阅[此](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)内容，对于 vm 调试选项，请检查[此内容](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#DebuggingOptions)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T19:25:34.583

并行和并发收集器有一个“开销限制”，可能会做你想做的事：

> 如果超过 98% 的总时间花在垃圾收集上，而回收的堆少于 2%，则会抛出 OutOfMemoryError

有关详细信息，请参阅[http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T18:49:46.213

最好的办法是找出内存泄漏并修复它。

退出高内存使用的简单方法：

```
if(Runtime.getRuntime().totalMemory()>100*1024*1024)
    System.exit(0); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T18:50:22.017

尝试查看当前在 JVM 中运行的进程。

*   与`jstack`您一起可以进行线程转储（还有其他方法可以做到这一点）
*   您可以查看 JVM的`jvisualvm`当前状态（占用一些资源）
*   也打开`verbosegc`（证明你假设GC是频繁的）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T18:36:03.497

您需要找到一种方法来收集有关 GC 工作的一些统计信息。实际上有一些方法可以做到这一点。我不会复制粘贴，只是给你类似问题的链接：

[你能在 Java 中获得基本的 GC 统计信息吗？](https://stackoverflow.com/questions/466878/can-you-get-basic-gc-stats-in-java)

我相信，你会想到如何分析这个统计数据，并决定 GC 何时持续活跃。

因为这个问题包含一些应用 GC 统计的新想法，我不认为它是重复的。

# c# - 如何实现提供“导航”组合框的 Visual Studio MEF 扩展

> ID：14385755
> 
> 赞同：0
> 
> 时间：2013-01-17T18:31:13.793
> 
> 标签：c#, visual-studio-2010, mef, visual-studio-extensions

我使用 MEF 开发了一个小型 Visual Studio 扩展。该扩展将文本格式、智能感知和工具提示添加到带有 DSL 的文本文件中。

有什么方法可以使用 MEF 在右上角添加一个组合框，该组合框将包含 DSL 的“第一级”构造，以便轻松导航到文件中定义它们的位置？我正在考虑一些与默认 Visual Studio C# 编辑器用于选择类（左上角）或类中的方法/属性/等（右上角）的非常相似的东西。

由于扩展已经具有格式化和智能感知，识别和标记我想包含在组合中的结构及其行号所需的代码已经完成。我只需要一些关于如何将组合添加到编辑器上边距并使其在选择更改时将光标移动到特定行的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:24:16.423

您对类型和成员下拉栏感兴趣，它们（我上次检查过的）没有暴露给 MEF 扩展。您需要执行以下操作之一：

1.  创建您自己的适配器[`IVsDropdownBar`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.textmanager.interop.ivsdropdownbar.aspx)，您可以从 MEF 扩展中使用它。
2.  完全避免使用标准功能，并实现[`IWpfTextViewMarginProvider`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.editor.iwpftextviewmarginprovider.aspx)在与原始功能相同的位置、样式和功能中创建边距的功能。

如果您使用第二种方法，请记住它与标准功能不同。如果您在 Visual Studio for C# 或其他标准语言中使用 Window → Split 命令，它将创建一个顶部和底部窗格，该窗格将共享一组类型和成员栏。[`IWpfTextViewMargin`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.editor.iwpftextviewmargin.aspx)在同一场景中将复制自定义。

[我的 Visual Studio 2010 的ANTLR 语言支持](http://visualstudiogallery.msdn.microsoft.com/25b991db-befd-441b-b23b-bb5f8d07ee9f)扩展中使用的下拉菜单使用第二种方法，结果证明这种方法远非微不足道，但至少我能够重用为我发布的其他语言扩展创建的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T05:44:23.297

只是为了补充@280Z28 所说的内容，我建议不要实施 an`IVsDropdownBar`并建议使用`IWpfTextViewMarginProvider`. 边距提供程序路由是编辑器直接提供的 MEF 扩展，允许您通过可以放在导出的边距提供程序上的编辑器`TextViewRole`和属性来控制边距的加载。`ContentType`

为了将插入符号移动到给定的函数位置，您可以使用多种方法，例如`IWpfTextView.Caret`. 确保`EnsureVisible`在移动插入符号后调用它，以保证文本视图将滚动到您将插入符号移动到的位置。

关于@280Z28 提到的拆分窗口案例，您始终可以使用 的方法`IPropertyOwner`并将属性添加到提供的属性包中，`ITextBuffer.Properties`以检查您已经为缓冲区提供边距的情况。通过向属性包添加标签，您可以检查拆分案例并在边距提供程序中返回 null 以模仿拆分窗口案例中的 C# 下拉栏行为。如果您决定使用 的属性包`ITextBuffer`，请务必注意投影场景。

# asp.net-mvc - 淘汰赛和 .NET 视图模型之间的区别？

> ID：14385759
> 
> 赞同：3
> 
> 时间：2013-01-17T18:31:29.517
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, knockout.js, viewmodel

我开始 MVC 并且我了解模型和 ViewModels 之间的区别，这要感谢这篇文章：

[http://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp.net-mvc-applications](http://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp.net-mvc-applications)

然而，我向我的同事展示了这个，现在我的印象是，这是使用敲除将视图绑定到模型的替代方法。有人可以解释一下吗？淘汰绑定是否与定义具有属性的 ViewModel 类做同样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T19:52:09.137

按照惯例，您可以使用 Knockout 视图模型作为客户端，而 MVC 视图模型作为服务器端。

**您的问题：**您如何决定使用哪个？

**答：**您可以同时使用两者。这意味着您的单个`cshtml`页面可以有一个淘汰视图模型如下。它包含属性和功能作为一个单元。这个视图模型用于客户端所需的行为功能。

```
 //This is a simple Viewmodel
    //JavaScript that defines the data and behavior of your UI
    function AppViewModel() {
        var self = this;
        self.firstName = ko.observable();
        self.lastName = ko.observable();

        self.fullName = ko.computed(function () {
            return self.firstName() + " " + self.lastName();
        });

        self.capitalizeLastName = function () {
            var currentVal = self.lastName();//Read the current value
            self.lastName(currentVal.toUpperCase());//Write back a modified value
        };
    } 
```

但是对于显示服务器端行为，您可以使用 MVC 视图模型使用更复杂（或更多属性）。这是为了从数据库中获取数据并在视图中显示这些数据。

**结论：**因此，在使用 MVC 时，您可以同时使用两种视图模型。

**重要说明：**但是如果您需要在两种情况下都使用单个视图模型，那么您也可以这样做。为此，您必须使用`KnockoutJS Mapping plugin`.

它可以像下面这样使用。

```
<script src="~/Scripts/knockout.mapping-latest.js"></script>
 <script type="text/javascript">
        $(function() {
            var viewModel = ko.mapping.fromJS(@Html.Raw(Model.ToJson()));
            ko.applyBindings(viewModel);
          });
</script> 
```

您可以从从 ASP.Net MVC 加载 KnockoutJS 视图模型中获得更多详细信息[**，以加快页面加载速度**](http://lostechies.com/erichexter/2012/11/29/loading-knockout-view-models-from-asp-net-mvc/)

如果您需要了解更多关于 Knockout 的信息，请查看[**learn.knockoutjs**](http://learn.knockoutjs.com/#/?tutorial=intro)

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T18:39:01.860

淘汰视图模型是客户端，MVC 是服务器端，这是最大的区别。

Knockout 允许您创建单页应用程序，并在客户端封装逻辑。

MVC 中的 ViewModels 仅在服务器端用于渲染页面和处理回发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T19:33:27.457

Xharze 的答案是有效的，但是......

如果您需要将视图相关逻辑添加到无法在客户端完成的业务实体中，那么您需要拥有服务器端视图模型。如果不是，它们就会变得多余。

和经典 MVC 还是有区别的，这些服务端模型不会用来渲染服务端内容，它们会暴露给使用 REST 的客户端 KO 引擎

# c++ - 发生堆栈溢出时，Libsigsegv 无法与 pthread 一起使用

> ID：14385761
> 
> 赞同：1
> 
> 时间：2013-01-17T18:31:33.447
> 
> 标签：c++, c, pthreads, stack-overflow

libsigsegv[文档](http://www.gnu.org/software/libsigsegv/)说要将 libsigserv 与线程一起使用，必须调用 pthread_sigmask 和 pthread_setcancelstate，但我不知道在哪里使用它。我有下面的代码，我在 Linux 下用 g++ 编译，当然我不能捕获线程堆栈溢出。我应该如何调用这些函数？我还有什么做错的？是否可以捕获线程中由 stackoverflow 引起的 SIGSEGV？

在`main`我的功能上：

```
stackoverflow_install_handler(&stackoverflow_function, myStack, 16 * 1024); 
```

`stackoferflow_function`印刷品“*信号被困”*

并且线程函数调用导致堆栈溢出的无限递归函数。

提前致谢。

# ruby - .{n} 和 ? ：在 Ruby 1.9.3 环境中的 `Regexp` 中工作

> ID：14385763
> 
> 赞同：2
> 
> 时间：2013-01-17T18:31:37.763
> 
> 标签：ruby, regex, ruby-1.9.3

我试图了解如何在Ruby 1.9.3 环境中`.{n}` 工作。但无法理解以下代码如何产生输出：`?<option>:``Regexp`

```
irb(main):001:0> %W{fin\n fi\n\n \n\n fin\r\n find}.grep /f.{2}(?m:.)\Z/
=> ["fin\n", "fin\r\n", "find"]
irb(main):002:0> %W{fin\n fi\n\n \n\n fin\r\n find}.grep /f.{1}(?m:.)\Z/
=> ["fin\n", "fi\n\n"]
irb(main):003:0> %W{fin\n fi\n\n \n\n fin\r\n find}.grep /f.{1}(?m:.)\Z/
=> []
irb(main):010:0> %W{fin\n fi\n\n \n\n fin\r\n find}.grep /f.(?m:.)\Z/
=> ["fin\n", "fi\n\n"]
irb(main):011:0> %W{fin\n fi\n\n \n\n fin\r\n find}.grep /f.(m:.)\Z/
=> []
irb(main):012:0> %W{fin\n fi\n\n \n\n fin\r\n find}.grep /f.(?m:.)\z/
=> [] 
```

谁能帮我理解上面的代码是如何在`IRB`终端中生成上述输出的？

谢谢，

* * *

***根据@Kevin最后一段***，我在下面尝试并找到了预期和理想的输出：

```
irb(main):014:0> %W{fin fi\n\n \n\n fin\r\n find}.grep /f.(?m:.)\z/
=> ["fin"]
irb(main):015:0> %W{fin fi\n\n \n\n fin\r find}.grep /f.(?m:.)\z/
=> ["fin"]
irb(main):016:0> %W{fin fi\n \n\n fin\r\n find}.grep /f.(?m:.)\z/
=> ["fin", "fi\n"]
irb(main):017:0> %W{fin fi\n \n\n fr\n find}.grep /f.(?m:.)\z/
=> ["fin", "fi\n", "fr\n"]
irb(main):018:0> 
```

非常感谢***@Kevin***。你帮助我理解了整个概念！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:40:07.203

`{n}`意思是“重复以前的原子`n`时间”。在正则表达式中，原子是一个自包含的单元。所以单个字符是一个原子。一个点也是如此。一个组也是一个原子（包含其他原子），字符类也是如此。所以`.{n}`意味着“匹配`n`字符”（因为`.`意味着“匹配任何字符”）。

请注意，这`{n}`不像反向引用，因为它不必在每次重复时都匹配相同的文本。`.{5}`行为与`.....`.

这个结构也更强大。它可以采用两个数字，并且匹配整个范围的重复计数。所以`.{3,5}`意味着“匹配 3 到 5 个字符”。并`.{3,}`表示“匹配 3 个或更多字符”。如果您愿意，`?`可以用`{0,1}`、和替换。`*``{0,}``+``{1,}`

* * *

`?<option:`实际上不是一回事。它是`(?<option>:<pattern>)`，这会在`<option>`的持续时间内打开所有列出的标志`<pattern>`。它就像一个组，只是它实际上并没有创建反向引用。所以表达式的`(?m:.)`意思是“匹配一个字符，就像`m`打开了标志一样”。鉴于`m`nhahtdh 在评论中所说的“匹配 \n”的行为，该表达式的`.(?m:.).`意思是“匹配除换行符之外的任何字符，后跟任何字符，后跟除换行符之外的任何字符”。

这种结构有两个好处。首先，它允许您仅将标志应用于模式的一部分，这有时会很有用。其次，如果您将整个模式包装在此构造中，那么您可以控制应用于您的正则表达式的标志，而不管该表达式在哪里使用。当您以用户身份提供正则表达式并且无法控制程序的源时，这很有用。

* * *

让我们看一下您提供的示例：

```
> %W{fin\n fi\n\n \n\n fin\r\n find}.grep /f.{2}(?m:.)\Z/
=> ["fin\n", "fin\r\n", "find"] 
```

您的模式`/f.{2}(?m:.)\Z/`意味着“匹配 f，后跟 2 个任何字符（但换行符），后跟任何字符，并锚定到字符串的末尾或换行符之前”。

因此，在 3 场比赛中`fin`的每场比赛中，都匹配`f.{2}`. 在第一个、第二个和第三个中`(?m:.)`匹配。并匹配第一个字符串的结尾，第二个换行符之前，第三个字符串的结尾。`\n``\r``d``\Z`

`fi\n\n`不匹配，因为没有标志的from`\n`无法匹配此处的第一个。`.``.{2}``m`

```
> %W{fin\n fi\n\n \n\n fin\r\n find}.grep /f.{1}(?m:.)\Z/
=> ["fin\n", "fi\n\n"] 
```

在这两种情况下都`fi`匹配`f.{1}`。`(?m:.)`在这两种情况下都匹配`n`和`\n`，并且`\Z`在换行符之前匹配。

`fin\r\n`不匹配，因为`\Z`只会在字符串中的最后一个换行符之前匹配，而不是在 CRLF 对之前匹配。并且`find`不匹配，因为没有什么可以匹配`d`.

```
> %W{fin\n fi\n\n \n\n fin\r\n find}.grep /f.{1}(?m:.)\Z/
=> [] 
```

我认为您在这里有复制和粘贴错误。这与之前的模式相同，并且匹配。

```
> %W{fin\n fi\n\n \n\n fin\r\n find}.grep /f.(?m:.)\Z/
=> ["fin\n", "fi\n\n"] 
```

这也与之前的模式相同。`.`并且`.{1}`是一回事。事实上，`{1}`总是可以从任何正则表达式中剥离而不改变任何东西。

```
> %W{fin\n fi\n\n \n\n fin\r\n find}.grep /f.(m:.)\Z/
=> [] 
```

您在此模式中删除了`?`，更改了 的含义`(m:.)`。这不再改变选项。现在它只是一个与 pattern 匹配的捕获组`m:.`，这当然不会出现在您的输入中。

```
> %W{fin\n fi\n\n \n\n fin\r\n find}.grep /f.(?m:.)\z/
=> [] 
```

你换`\Z`到`\z`了这里。这两者之间的区别`\Z`可能在尾随换行符之前匹配，但`\z`必须只匹配字符串的结尾。由于无法在尾随换行符之前进行匹配，因此您在此处的输入均不匹配。但是，例如，如果您有`fin`（没有换行符）或`fi\n`（没有第二个换行符）它会起作用。

# perl - 是否可以有条件地将选项传递给 perl 中的方法？

> ID：14385769
> 
> 赞同：6
> 
> 时间：2013-01-17T18:32:04.500
> 
> 标签：perl, methods

[与关于 Ruby](https://stackoverflow.com/questions/10948949/conditionally-set-method-options)的这个问题类似，我想有条件地将参数传递给方法。目前，我将其配置如下：

```
my $recs = $harvester->listAllRecords(
    metadataPrefix => 'marc21',
    metadataHandler => 'MARC::File::SAX',
    set => 'pd',
    from => $from,
    until => $until,
); 
```

我想要的是能够有条件地传递 from 和/或 until 参数，具体取决于以前的代码。这在语法上是不正确的，但类似这样：

```
from => $from if ($from),
until => $until if ($until), 
```

或这个：

```
if ($from) {from => $from,}
if ($until) {until => $until,} 
```

这是可能的，如果是这样，我将如何去做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T18:37:58.583

您可以将三元`?:`运算符与列表操作数一起使用：

```
my $recs = $harvester->listAllRecords(
    metadataPrefix => 'marc21',
    metadataHandler => 'MARC::File::SAX',
    set => 'pd',

    $from ? (from => $from) : (),
    $until ? (until => $until) : (),
); 
```

可能还值得了解[“条件列表包含”伪运算符](https://stackoverflow.com/a/2897939/168657)，在这种情况下，它的工作方式类似于

```
...
(from => $from) x !!$from,
(until => $until) x !!defined($until),
... 
```

但是对于大多数人来说，三元运算符表达式可能更容易阅读。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T19:02:50.303

另一种选择是构建一个 args 列表（或哈希），然后调用该方法：

```
my %args = (
    metadataPrefix => 'marc21',
    metadataHandler => 'MARC::File::SAX',
    set => 'pd',
);
$args{from} = $from if $from;
$args{until} = $until if $until;

my $recs = $harvester->listAllRecords(%args); 
```

# java - 如何减去 x 个工作日

> ID：14385772
> 
> 赞同：2
> 
> 时间：2013-01-17T18:32:07.237
> 
> 标签：java, datetime, jodatime

> **可能重复：**
> [joda time - 添加工作日到日期](https://stackoverflow.com/questions/12728527/joda-time-add-weekdays-to-date)

如何使用 Joda 库从日期中减去一定数量的**工作日**（即不包括周末）？

如果输入日期是 2013 年 1 月 14 日（星期一）并且我减去 1 天，我希望结果是 2013 年 1 月 11 日（星期五）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:25:35.033

可能无法直接使用 Joda 库执行此操作，但您可以编写自己的 Java 功能。在以下示例中，该`subtractWeekdays(d, num)`方法将日期`d`回滚给定`num`的工作日。此示例的输出`Fri Jan 11 00:00:00 CST 2013`如您所愿。

```
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

public class SimpleTest  {
   // NOTE: the input num must be positive.
   public static Date subtractWeekdays(Date d, int num) {
      int count = 0;
      Calendar c = Calendar.getInstance();
      c.setTime(d);

      do {
         c.add(Calendar.DAY_OF_YEAR, -1);
         if(isWeekday(c.get(Calendar.DAY_OF_WEEK))) {
            ++count;
         }
      } while(count < num);

      return c.getTime();
   }

   public static boolean isWeekday(int dayOfWeek) {
      return ((dayOfWeek != Calendar.SATURDAY) && (dayOfWeek != Calendar.SUNDAY));
   }

   public static void main(String[] argv) {
      try {
         SimpleDateFormat dateFormat = new SimpleDateFormat("MMM d, y");
         Date d = dateFormat.parse("Jan 14, 2013");
         Date d2 = subtractWeekdays(d, 1);
         System.out.println(d2);
      } catch(Exception ex) {}
   }
} 
```

# c++ - 清除图形的外观

> ID：14385775
> 
> 赞同：0
> 
> 时间：2013-01-17T18:32:11.983
> 
> 标签：c++, algorithm, opengl, 3d

在我的程序中，我在屏幕上有一个矩形图形，我使用它更改了它的方向，`gluLookAt`并且它总是一直看着窗口的中心。
在`draw`应用程序中不断调用的函数中，我在程序中有一些状态。

```
 draw function
{
    //if condition 1
    gluLookAt(0,0,0); //look At the origin of the window.
    //if condition 2
    glTranslatef(20, 10, 10);//go to some point and STOP looking At 0,0,0
    //if condition 3
    glTranslatef(point);
    glRotatef()
    glTranslate(-point)
} 
```

第一个代码运行良好，`if condition`并且该图形一直正确地朝向原点。当我在我的应用程序中更改标志以使第二个`if condition`变为真时，我得到了翻译，但我的形状仍然继续查看原点。
我该如何停止？我希望形状是直的，因为如果没有lookAt，任何正常的矩形都会被绘制出来。

这里的图形不一定是矩形。也可能是其他形状

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:39:51.997

通过调用来初始化矩阵`glLoadIdentity`（即在调用`if condition`之前的第二个`glTranslatef`）。见[http://www.opengl.org/sdk/docs/man2/xhtml/glLoadIdentity.xml](http://www.opengl.org/sdk/docs/man2/xhtml/glLoadIdentity.xml)

> glLoadIdentity — 用单位矩阵替换当前矩阵

# javascript - javascript中的图像旋转

> ID：14385777
> 
> 赞同：0
> 
> 时间：2013-01-17T18:32:16.987
> 
> 标签：javascript, rotation

我有一个概念问题。

我在服务器上有一组图像，我正在生成一个随机旋转角度。用户将下载图像并使用随机角度旋转它们。用户将旋转图像，然后我想知道角度是否与旋转之前相同，即 0。

我正在使用 HTML5 和 fabric.js。

有什么想法我该怎么做？

提前致谢。

# javascript - 谷歌地图中流畅的自然动画

> ID：14385784
> 
> 赞同：0
> 
> 时间：2013-01-17T18:33:02.103
> 
> 标签：javascript, google-maps

我正在寻找一种方法来沿着谷歌地图中的路径移动/动画一个细长的标记，当它转角时它会旋转。这是为了模拟火车的运动。我希望有一个解决方案可以让它顺利移动。

人们可以建议基于浏览器的输出方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:29:12.360

你有没有想过用谷歌地球插件来代替？我知道谷歌地球插件可以做到这一点，这里有很多例子：[https ://developers.google.com/earth/documentation/demogallery](https://developers.google.com/earth/documentation/demogallery)

# ruby-on-rails - 注册用户仅对管理员可用

> ID：14385787
> 
> 赞同：1
> 
> 时间：2013-01-17T18:33:31.563
> 
> 标签：ruby-on-rails, authentication, devise

我用 Devise 创建了一个 Admin 模型。

现在我想创建一个用户模型（使用设计），用户必须能够恢复密码、编辑配置文件并登录但不能注册。

用户的注册仅对管理员可用。

如果我使用可注册模块生成设计用户模型，我怎样才能拥有注册页面，以便它只对管理员可用而不对用户可用？

谢谢你的支持

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:54:31.110

Devise 为您提供了辅助方法 authenticate_resource！其中资源是您的模型。在这种情况下，您将拥有 authenticate_user！和authenticate_admin！你可以在你的注册控制器中放入类似的东西：

```
before_filter :authenticate_admin!
skip_before_filter :authenticate_user! 
```

第一部分将确保管理员是唯一允许的人，没有其他人。第二部分确保管理员也不必以某种方式成为用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T19:56:47.140

如果你有 app/controllers/registrations_controller.rb 添加：

```
 before_filter :authenticate_admin! 
```

否则，您将不得不显示您正在使用的一些代码。

# ios - 对 UIImage 执行填充

> ID：14385790
> 
> 赞同：2
> 
> 时间：2013-01-17T18:33:47.807
> 
> 标签：ios, objective-c, uiimage, core-graphics, flood-fill

我正在尝试对具有不透明度的 UIImage 执行填充。我尝试使用 CG（http://en.wikipedia.org/wiki/Flood_fill）实现 4-Way Floodfill，但读取像素颜色和着色像素会使其太慢。填充 300x100 像素的区域需要一分钟多的时间。我需要一个类似的功能：

```
-(UIImage*)floodFillOnImage:(UIImage*)image fromPoint:(CGPoint)start; 
```

这已经足够快了。

是否有人对与 UIImages 一起使用的 Objective-C 中的洪水填充算法有一个可行的实现或想法？我在一些 iOS 绘图应用中看到过这样的油漆桶工具。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T19:22:12.957

如果填充 300×100 图像需要一分钟以上的时间，那么获取和设置像素值的实现可能效率极低。如果将图像绘制到位图上下文中，然后直接访问（和修改）像素数据，它应该会快很多。

基本方法是分配一个内存缓冲区（一个 4 (rgba) × width × height 字节的 C 数组），将其传递给`CGBitmapContextCreate`，将源图像绘制到上下文中（例如使用`CGContextDrawImage`），然后直接在缓冲区上操作（像素值）。完成后，您可以使用`CGBitmapContextCreateImage`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T05:59:20.870

> 我正在尝试对具有不透明度的 UIImage 执行填充。

您是否试图填充清晰的区域？如果是这样，那么有一个更简单的解决方案：创建一个上下文，用所需的颜色填充它，在顶部绘制图像，然后从上下文中提取完成的图像。

如果您尝试填充*不*清晰的区域，那么也有一个解决方案：创建一个上下文，首先将图像绘制到其中，将上下文的混合模式设置为[source in](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/econst/kCGBlendModeSourceIn)，填充颜色，然后提取完成的图像。

# javascript - 滑动事件以在触摸设备上导航幻灯片

> ID：14385796
> 
> 赞同：0
> 
> 时间：2013-01-17T18:34:29.940
> 
> 标签：javascript, android, jquery, iphone, jquery-mobile

我正在播放幻灯片，用户可以通过单击下一步或前按钮进行导航。点击时，我正在将下一张或上一张图片加载到 img src 中，如下所示。

我也在尝试保持在触摸设备上的兼容性，并希望启用滑动以从一张照片导航到下一张。我对实现一个普通的滑动事件来处理幻灯片导航的担忧是它不会有流畅的感觉，当触发滑动事件时，会有一点延迟，并且会加载下一张图像，就好像用户只需单击下一个或上一个箭头。

我想要实现的是许多平板电脑/智能手机在浏览相册时的流畅感。

我真的很感激任何帮助实现这一点，

提前谢谢了

**我的 JavaScript**

```
 var index=0;

    $('.catalog-img-container').attr("src", img_array[index]);
    $('#dialog').jqm();
    $(".next").click(function(){
        $('.catalog-img-container').attr("src", img_array[++index%arrayLength]);
    });         
    $(".previous").click(function(){
        if (--index < 0) index = arrayLength - 1;
        $('.catalog-img-container').attr("src", img_array[index%arrayLength]);
    }); 
```

**我的标记**

```
 <div  class="catalogFrame">
            <img class="catalog-img-container" src="">
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:00:44.330

向您的 img 容器添加 swipeleft 和 swiperight：

```
$('.catalog-img-container').on('.catalog-img-container', 'swipeleft', function () {
    //next img
    $('.catalog-img-container').attr("src", img_array[++index%arrayLength]);
}).on('.catalog-img-container', 'swiperight', function () {
    //prev img
    if (--index < 0) index = arrayLength - 1;
    $('.catalog-img-container').attr("src", img_array[index%arrayLength]);
}); 
```

如果您想获得更自然的感觉，请更改这些配置选项，以便可以早晚触发滑动事件：

```
$(document).bind("mobileinit", function(){
    $.event.special.swipe.horizontalDistanceThreshold = 30; //(default: 30px) – Swipe horizontal displacement must be more than this.
    $.event.special.swipe.verticalDistanceThreshold = 75; //(default: 75px) – Swipe vertical displacement must be less than this.
}); 
```

更多信息可以在这里找到：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

基本上就是这样，滑动事件在手机上几乎是流畅的（我有一个轮播 jQuery 移动实现，它工作得很好）所以我认为你不会有太多问题。

这也是我的滑动事件示例：http: [//jsfiddle.net/Gajotres/Np3G4/](http://jsfiddle.net/Gajotres/Np3G4/)它没有使用 jQM 滑动实现，但您可以在 Android 和 iOS 平台上对其进行测试，它会给您感觉（jQM 滑动事件就像那）。这是 jQM 的实现：http: [//jsfiddle.net/Gajotres/qBbsX/](http://jsfiddle.net/Gajotres/qBbsX/)

# vb.net - VB.NET如何检查网页是否存在

> ID：14385798
> 
> 赞同：2
> 
> 时间：2013-01-17T18:34:35.483
> 
> 标签：vb.net, webpage

是否可以检查网页是否存在于 vb.net 应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:17:22.180

您可以通过请求相关网页并查看是否有错误消息来查找。

```
 Dim req As System.Net.WebRequest
    Dim res As System.Net.WebResponse

    req = System.Net.WebRequest.Create("http://www.google.com/werwerfsdfsdf")

    Try
        res = req.GetResponse()
    Catch e As WebException
        ' URL doesn't exists
    End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T03:39:10.857

您不需要“如果”语句来测试不存在。只需在“catch”语句之后立即使用代码来处理这种可能性。只有在搜索中发生错误（“WebRequest”）时，该代码才会运行。错误是找不到页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:42:20.903

您可以这样做来获取网页的文本。

```
string strUrl = "http://forum.codecall.net/external.php?type=RSS2";

WebRequest request = WebRequest.Create(strUrl);

WebResponse response = request.GetResponse();

string data = new System.IO.StreamReader(response.GetResponseStream()).ReadToEnd(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-21T09:10:04.000

```
 Private Function RemoteFileExists(ByVal url As String) As Boolean
    Try
        Dim request As HttpWebRequest = TryCast(WebRequest.Create(url), HttpWebRequest)
        request.Method = "HEAD"
        Dim response As HttpWebResponse = TryCast(request.GetResponse(), HttpWebResponse)
        response.Close()
        Return (response.StatusCode = HttpStatusCode.OK)
    Catch
        Return False
    End Try
End Function 
```

# data-structures - 削波检测的数据结构

> ID：14385799
> 
> 赞同：1
> 
> 时间：2013-01-17T18:34:39.163
> 
> 标签：data-structures, sdl, pygame, clipping

我将 SDL (pygame) 用于 cnc 模拟器。最初，屏幕刷新是使用画家算法完成的（只是从后到前绘制所有内容），但在大表面时它很快变得很慢。

为了加快重绘，我只刷新在任何给定时刻发生变化的屏幕部分，因此如果数值改变了它的值，则只有它的表面*和每个碰撞表面的相应子表面*被重绘。

目前，我对屏幕上的所有内容进行剪切测试以检测碰撞表面，虽然速度要快得多，但我认为应该有一个数据结构和/或算法来避免测试屏幕上的所有表面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:51:41.277

您应该考虑使用[四叉树](http://en.wikipedia.org/wiki/Quadtree)来存储每个曲面的边界。这将在查找碰撞表面时优化您的操作。

您可能会发现[问题/答案](https://stackoverflow.com/questions/4981866/quadtree-for-2d-collision-detection)很有用。

# file-upload - 如何为文件上传创建一个自定义验证器，它接受 asp.net mvc 3 中的图像文件

> ID：14385800
> 
> 赞同：0
> 
> 时间：2013-01-17T18:34:42.303
> 
> 标签：file-upload

我正在使用 asp.net mvc3。我正在使用 dataannotation 和 Jquery unobtrusive 进行服务器端和客户端验证。如何验证仅接受图像文件扩展名的文件上传。需要与其他文件完全相同。我是否需要为服务器端和客户端创建自定义验证器？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:14:30.963

你可以这样做：如果你在模型中使用属性

公共类 ValidateFileAttribute : ValidationAttribute { public override bool IsValid(object value) { int MaxContentLength = 1 * 1024 * 700; //3 MB string[] AllowedFileExtensions = new string[] { ".jpg", ".gif", ".png", ".pdf" };

```
 var file = value as HttpPostedFileBase;

            if (file == null)
                return false;
            else if (!AllowedFileExtensions.Contains(file.FileName.Substring(file.FileName.LastIndexOf('.'))))
            {
                ErrorMessage = "Please upload Your image of type: " + string.Join(", ", AllowedFileExtensions);
                return false;
            }
            else if (file.ContentLength > MaxContentLength)
            {
                ErrorMessage = "Your image is too large, maximum allowed size is : " + (MaxContentLength / 1024).ToString() + "MB";
                return false;
            }
            else
                return true;
        }
    } 
```

# c# - 如何在c#中将值从一个函数传递到另一个函数

> ID：14385801
> 
> 赞同：-2
> 
> 时间：2013-01-17T18:34:50.837
> 
> 标签：c#

我有一个功能

```
 private void button_Click(object sender, RoutedEventArgs e) 
      {
         random();

      }

      private void random()
      {
         //other code
         ImageBrush background = new ImageBrush();
         background.ImageSource = new System.Windows.Media.Imaging.BitmapImage(new                         Uri(actorUri,    UriKind.Relative));
         //other code
       } 
```

我想在按钮单击功能中访问该背景变量，请告诉我如何访问它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:37:38.083

为什么不创建`background`周围类的实例变量？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:35:51.063

您的问题根本不清楚……您是说这个吗？

```
private ImageBrush m_Background = new ImageBrush();

private void button_Click(object sender, RoutedEventArgs e) 
{
    // If actorUri is stored in a TextBox, for example...
    random(textbox1.Text);
}

private void random(String actorUri)
{
    // ...
    m_Background = new ImageBrush();
    m_Background.ImageSource = new BitmapImage(new Uri(actorUri, UriKind.Relative));
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:37:43.683

我不确定，但听起来你在问这个。

```
 private void button_Click(object sender, RoutedEventArgs e) 
    {
         random();
         background.DoSomething();
    }

    ImageBrush background ;
    private void random()
    {
         //other code
         background = new ImageBrush();
         background.ImageSource = new System.Windows.Media.Imaging.BitmapImage(new                         Uri(actorUri,    UriKind.Relative));
         //other code
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T18:37:50.593

```
 private void button_Click(object sender, RoutedEventArgs e) 
  {
     random();
     background.SomeMethod();

  }

  ImageBrush background = new ImageBrush();

  private void random()
  {
     //other code

     background.ImageSource = new System.Windows.Media.Imaging.BitmapImage(new                         Uri(actorUri,    UriKind.Relative));
     //other code
   } 
```

**编辑：**

或者

```
 private void button_Click(object sender, RoutedEventArgs e) 
  {
     ImageBrush bg = random();
     bg.SomeMethod()

  }

  private ImageBrush random()
  {
     //other code
     ImageBrush background = new ImageBrush();
     background.ImageSource = new System.Windows.Media.Imaging.BitmapImage(new                         Uri(actorUri,    UriKind.Relative));
     //other code
     return background;
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T18:38:09.237

```
private void button_Click(object sender, RoutedEventArgs e) 
{
    ImageBrush background = random();
}

private ImageBrush random()
{
    //other code
    ImageBrush background = new ImageBrush();
    background.ImageSource = new System.Windows.Media.Imaging.BitmapImage(new                            Uri(actorUri,    UriKind.Relative));
    return background;
} 
```

# servicestack - 服务堆栈：如何使用 jQuery 发布 DateTime

> ID：14385804
> 
> 赞同：1
> 
> 时间：2013-01-17T18:34:58.530
> 
> 标签：servicestack

假设我有一个如下所示的请求 DTO：

```
public class MyRequest
{
    public DateTime? SomeDateTime { get; set; }
} 
```

在客户端我想使用 jQuery 发布到它：

```
$.ajax({
    type: 'POST',
    url : '/myrequest',
    data: { someDateTime: new Date() },
    dataType: 'json',
    success: function (data) { console.log(data.success); }
}); 
```

为什么这**不起作用**？`MyRequest.SomeDateTime`永远不会被填充。我应该通过什么而不是`new Date()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:02:26.310

传入

```
new Date().toJSON() 
```

有关json 中日期的更多信息，请参阅[“正确的”JSON 日期格式](https://stackoverflow.com/questions/10286204/the-right-json-date-format)

# c# - 查询需要返回 Result1 列表中不存在于 Result2 中的所有项目

> ID：14385805
> 
> 赞同：0
> 
> 时间：2013-01-17T18:35:00.127
> 
> 标签：c#, list

```
public List<Model_Result> GetEsEmails { get; set; } 
```

你好：

我的查询需要从 splitted1 列表中返回 GetEsEmails 中不存在 EmailID 的所有项目。

请你帮忙语法。

```
public void SenDEmail(string esemails)
{
//splitting email string 
      var splitted1 = esmails.Emails.Split(new string[] { System.Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries).Select(s => s.Replace(";",""));

  List<KeyValuePair<string, string>> myList = new List<KeyValuePair<string, string>>();

    var result1 = splitted1
          .Where(x => GetEsEmails.All(email => x != email.EmailAddress))
          .ToList(); 
```

}

谢谢你，乌帕舒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:59:25.440

林克。我爱林奇？你不爱Linq吗？林克有`Except`. `Except`有趣。

```
var addressesToIgnore = GetEsEmails.Select(email => email.EmailAddress);
var results = splitted1.Except(addressesToIgnore ); 
```

请注意第一行，它仅将`EmailAddress`属性提取到`IEnumerable`. 然后第二行返回一个新的`IEnumerable`，它只包含`splitted1`那些不在的成员`addressesToIgnore`；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:53:57.287

如果我理解正确，您可能希望这样做：“我想要那些来自 splitted1 的 x 字符串，GetEsEmails 不包含任何 a.Email 等于 x 的 a 元素”

```
 var result1 = splitted1
              .Where(x => !GetEsEmails.Any(a=>a.Email==x))
              .ToList(); 
```

# reporting-services - 从 WCF 服务直接将 SSRS 打印到打印机？

> ID：14385806
> 
> 赞同：0
> 
> 时间：2013-01-17T18:35:05.687
> 
> 标签：reporting-services

我想知道以下是否可行，如果可以，该怎么做：

假设我有一个 WCF 服务，该服务运行在具有多台打印机的服务器上。我希望 WCF 服务能够要求 SQL Server 报告服务生成特定报告，并且我希望将报告发送到我的服务器的一台打印机。

有人知道怎么做吗？请记住，打印机不在 SSRS 服务器上——它们在托管我的 WCF 服务的服务器上。

# validation - 在 JSF 中有没有办法验证不是 EditableValueHolder 的组件？

> ID：14385808
> 
> 赞同：0
> 
> 时间：2013-01-17T18:35:17.010
> 
> 标签：validation, jsf-2

这是[这个问题](https://stackoverflow.com/q/14385376/516433)的更通用的版本。一般来说，我能否在未实现的元素上进行 JSF 生命周期验证`EditableValueHolder`。这似乎是一个愚蠢的问题，但有些小部件库似乎提供了有这个问题的小部件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:44:27.097

您不能强制对其直接进行验证。您需要将它包装在一个实现 EditableValueHolder 的类中。然后为该类型创建并注册验证器。

# asp.net-mvc - 从 JavaScript 运行控制器方法

> ID：14385811
> 
> 赞同：1
> 
> 时间：2013-01-17T18:35:40.767
> 
> 标签：asp.net-mvc, jquery

这似乎很容易，但不仅对我有用。我有以下代码可以`HomeController`从我的 JavaScript 文件中运行我的方法：

```
function(id) {
    alert("here");
    $.ajax({
        url: '/HomeController/MethodName',
        data: { id: id },
        success: function(data){
             alert('Sucess ' + data);      
        }
    });
} 
```

我的方法是

```
public string MethodName(int id)
{
    return id.ToString() + "test ";
} 
```

调用 javascript 的视图定义了以下脚本：jquery.unobtrusive-ajax.min.js、MicrosoftMvcAjax.js、MicrosoftAjax.js、validate.unobtrusive.min.js、jquery.validate.min.js

但它不仅仅是工作。什么都没发生。该功能的第一个警报确实出现了。但在那之后就没有别的了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:35:50.403

指定的网址错误。而不是`url: '/HomeController/MethodName'`我放`url: '/Home/MethodName',` 虽然我的控制器名称是 HomeController

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:50:47.763

您应该让 MVC 框架的强大功能来处理 URL 的呈现。如果您更改路由，则可能意味着您必须遍历所有 html 页面并更新类似的引用。通过这种方式，您可以避免上述问题。

利用

```
<%= Html.RenderAction("MethodName", "Home") %> 
```

ETC

```
function(id) {
    alert("here");
    $.ajax({
        url: <%= Html.RenderAction("MethodName", "Home") %>,
        data: { id: id },
        success: function(data){
             alert('Sucess ' + data);      
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T21:15:30.043

Your made a formatting mistake. This `url` string property is not correclty closed. You are also missing a comma at the end of the `data` property.

```
function(id)
 alert("here");
 $.ajax({
   url: '/HomeController/MethodName', // last single quote was missing 
   data: { id: id }, // comma was missing
   success: function(data){
    alert('Sucess ' + data);      
  }
 }); 
```

# c++ - 以 C++ 形式捕获异常

> ID：14385814
> 
> 赞同：0
> 
> 时间：2013-01-17T18:35:48.710
> 
> 标签：c++, visual-studio-2010, exception

我是 C++ 新手。我正在尝试用 C++ 编写程序，但是当我使用`e.what()`. 我已经包括在内`#include <exception>`，但我得到了`error C2664 - Cannot convert parameter 1 from const char* to system::string ^`。

这是代码。

```
#pragma once
#include <iostream>
#include <fstream>
#include <exception>
#include <string>

namespace SilverthorneTechnologiesSchoolDashboard {

using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;
using namespace std;

//Form parameters

#pragma endregion
private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {
        ifstream codeFile;
        try{
            codeFile.open("userDetails.info");
        }
        catch (exception &e)
        {
            label1->Text = e.what();
        }
         }
 };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:45:05.870

`codeFile`是非托管代码，引发非托管异常，因此您可以正确捕获异常。您需要做的就是将 转换`const char *`为 a`String^`以将其放入您的 UI 中。

[String](http://msdn.microsoft.com/en-us/library/system.string.aspx)类有一个构造函数，它接受一个（[`char*`](http://msdn.microsoft.com/en-us/library/k9s9t975.aspx)char* is SByte* in C#）。`label1->Text = gcnew String(e.what());` 应该可以解决您的问题。

也就是说，您可以使用托管流对象。这将为您提供托管异常而不是非托管异常，并与您的其余托管代码具有更大的互操作性。看看[FileStream](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)，看看它是否满足您的需求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T18:45:15.700

这有点猜测，但请尝试更改

```
catch (exception &e) 
```

到

```
catch (exception& e) 
```

# c# - 将 TextBox 绑定到字符串的一部分

> ID：14385818
> 
> 赞同：1
> 
> 时间：2013-01-17T18:35:56.693
> 
> 标签：c#, binding, textbox

我有一个字符串保存到数据库，该数据库由两个文本框编译并由`.` 例如，如果一个`TextBox`有`2`，另一个有`5`，则`2.5`保存到数据库中。

我现在遇到的问题是加载保存的答案。无论如何绑定`TextBox.Text`到字符串的某个字符（即第一个文本框将始终是`SavedAnswer[0]`，另一个将是`SavedAnswer[2]`）还是我必须创建一个转换器，传递完整的答案然后解析它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:50:35.627

有几种方法可以解决。最简单的方法是让您的模型具有两个相关的属性，您可以分别绑定它们。重要的部分是确保他们的`PropertyChanged`事件被触发，以便`Binding`在 UI 上正常工作以反映更改。

例子：

```
public class MyModel : INotifyPropertyChanged
{
  string fullAnswer;

  public event PropertyChangedEventHandler PropertyChanged;

  public string FullAnswer
  {
    get { return fullAnswer; }
    set
    {
      if(string.Equals(value, fullAnswer)) return; // skip for equal values

      fullAnswer = value;
      OnPropertyChanged("FullAnswer");
      OnPropertyChanged("Answer1");
      OnPropertyChanged("Answer2");
    }
  }

  public string Answer1
  {
    get
    {
      if(fullAnswer == null) return null;

      var tokens = fullAnswer.Split('.');
      if(tokens.Length < 1) return string.Empty;

      return tokens[0];
    }
  }

  public string Answer2
  {
    get
    {
      if(fullAnswer == null) return null;

      var tokens = fullAnswer.Split('.');
      if(tokens.Length < 2) return string.Empty;

      return tokens[1];
    }
  }

  protected void OnPropertyChanged(string propertyName)
  {
    var handler = this.PropertyChanged;

    if(handler != null)
      handler(this, new PropertyChangedEventArgs(propertyName));
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:11:14.797

使用这三个属性。

```
public string FullNumber
{
    get
    {
        if (String.IsNullOrEmpty(DecimalPart)) {
            return IntegerPart;
        } else if (String.IsNullOrEmpty(IntegerPart)) {
            return "0." + DecimalPart;
        }
        return IntegerPart + "." + DecimalPart;
    }
    set
    {
        if (String.IsNullOrEmpty(value)) {
            IntegerPart = "";
            DecimalPart = "";
        } else if (value.Contains(".")) {
            string[] parts = value.Split('.');
            IntegerPart = parts[0];
            DecimalPart = parts[1];
        } else {
            IntegerPart = value;
            DecimalPart = "";
        }
    }
}

public string IntegerPart { get; set; }
public string DecimalPart { get; set; } 
```

`FullNumber`可用于获取和设置完整号码，因此将在从数据库读取号码或将号码保存到数据库时使用。`IntegerPart`和属性将`DecimalPart`绑定到两个文本框。如果您不想使用数据绑定，则可以删除这两个属性，并在属性代码中的任何位置替换`IntegerPart`为 by`textBox1.Text`和`DecimalPart`by 。`textBox2.Text``FullNumber`

无论数字为空还是`null`包含小数点，这都有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:39:33.307

假设您的字符串名为“str”并且始终包含“。” 性格：

```
TextBox1.Text = str.Split('.')[0];
TextBox2.Text = str.Split('.')[1]; 
```

或者：

```
string[] SavedAnswer = str.Split('.');
TextBox1.Text = SavedAnswer [0];
TextBox2.Text = SavedAnswer [1]; 
```

# ios - 带有 RECurtainViewController 的 UINavigationBar 外观

> ID：14385823
> 
> 赞同：0
> 
> 时间：2013-01-17T18:36:09.663
> 
> 标签：ios, uiviewcontroller, uinavigationbar

我正在使用[RECurtainViewController](https://github.com/romaonthego/RECurtainViewController)在新的视图控制器中进行转换。在我的应用程序委托中，我设置了导航栏外观：

```
[[UINavigationBar appearance] setTitleTextAttributes: @{
                                UITextAttributeTextColor: [UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1.0],
                          UITextAttributeTextShadowColor: [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.8],
                         UITextAttributeTextShadowOffset: [NSValue valueWithUIOffset:UIOffsetMake(0.0f, 1.0f)],
                                     UITextAttributeFont: [UIFont fontWithName:@"Helvetica" size:20.0f]
     }]; 
```

带有导航栏的根视图控制器正确显示。但是，当我使用以下方法引入新的视图控制器时：

```
DemoViewController *test = [[DemoViewController alloc] init];
[self curtainRevealViewController:test
                  transitionStyle:RECurtainTransitionHorizontal]; 
```

UINavigationBar 外观设置回其默认值。任何想法如何使自定义外观持续存在？

**编辑：**

我注意到当显示 DemoViewController 时，我也在控制台中收到此警告：

```
Warning: Attempt to present <DemoViewController: 0x1ddaae70> on <ViewController: 0x1e892040> whose view is not in the window hierarchy! 
```

但是，它仍然显示视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:21:51.527

我最终通过进入 DemoViewController 中的 viewDidLoad 方法并将属性分配给实际的 navBar 实例来解决这个问题：

```
[self.navBar setTitleTextAttributes: @{
                                UITextAttributeTextColor: [UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1.0],
                          UITextAttributeTextShadowColor: [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.8],
                         UITextAttributeTextShadowOffset: [NSValue valueWithUIOffset:UIOffsetMake(0.0f, 1.0f)],
                                     UITextAttributeFont: [UIFont fontWithName:@"Helvetica" size:20.0f]
     }]; 
```

不知道为什么我必须这样做，但它似乎有效。

# java - 未找到小程序类

> ID：14385825
> 
> 赞同：1
> 
> 时间：2013-01-17T18:36:14.293
> 
> 标签：java, html, jsp, applet

我是新的小程序，我正在尝试在我的 html 中显示小程序。（我已经安装了插件，我用的是Chrome，在IE上试过了）

![在此处输入图像描述](../Images/8f949e815aafdf2d0297bc479bd1709d.png)

如您所见，小程序类位于源包中，我想将其显示在网页文件夹中的页面中

这是我的代码：

```
 <applet codebase="/AppletPackage/Applet" code="Applet.class" width=800 height=300>Applet Failed</applet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T10:19:39.013

首先确保你的 jar 文件在 html 文件中，然后试试这个：

```
 <applet archive="AppletJarFile.jar"   code="AppletPackage.AppletClassName" width=800 height=300>Applet Failed</applet> 
```

在 HTML5 上

```
<object type="application/x-java-applet" height="400" width="500">
  <param name="code" value="AppletPackage.AppletClassName" />
  <param name="archive" value="AppletJarFile.jar" />
  Applet failed to run.  No Java plug-in was found. </object> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:24:26.943

尝试这个

```
<applet  code="Applet" codebase="/AppletPackage" width=800 height=300>Applet Failed</applet> 
```

# xamarin.ios - 为什么 UIView.StringSize 需要在 UI 线程上运行？

> ID：14385826
> 
> 赞同：3
> 
> 时间：2013-01-17T18:36:20.303
> 
> 标签：xamarin.ios

如果我`UIView.StringSize`从诸如 a 之类的异步代码中运行`Task.ContinueWith`，它会以 a`UIKitThreadAccessException`开头，因为该方法以调用开始`UIApplication.EnsureUIThread`（MonoDevelop 中的“转到声明”；我不确定许可证是否允许我在此处发布）。

```
Task.Factory.StartNew(() => {
    // Blows up discretely...nothing written to application output.
    // Also blows up for UIViews that exist only in code (not rendered).
    SizeF textSize = someView.StringSize(someString, someFont, new SizeF(someView.Bounds.Width, float.MaxValue), UILineBreakMode.WordWrap);
    Console.WriteLine(textSize);
}); 
```

如果我将这个简化版本包含在 中`InvokeOnMainThread`，一切都很好，但我肯定有时间想在没有那个调用的情况下测量一些文本。同样，我完全理解[异常的目的](http://tirania.org/monomac/archive/2012/Sep-10.html)，并且在之前调用异步代码深处的东西时，它为我节省了很多麻烦，但在这种情况下，`EnsureUIThread`似乎没有必要使用这里。如果我只是简单地将该调用重申为对该`NSString`类的一次点击，它将很高兴地在 UI 线程之外运行。

```
Task.Factory.StartNew(() => {
    // Outputs expected size data: "{Width=##, Height=##}".
    using (NSString nssSomeString = new NSString(someString)) {
        SizeF textSize = nssSomeString.StringSize(someFont, new SizeF(someView.Bounds.Width, float.MaxValue), UILineBreakMode.WordWrap);
        Console.WriteLine(textSize);
    }
}); 
```

的代码`UIView.StringSize`似乎做了大致相同的`NSString`工作，并且似乎没有任何明显的面向 UI 线程的东西。我是否缺少需要从 UI 线程调用此版本的方法的内容？

### 编辑（2013-01-17）：

我[向 Xamarin 提交了一个错误，](https://bugzilla.xamarin.com/show_bug.cgi?id=9657)只是为了查看他们的回复。听起来他们正在考虑将此方法标记为`ThreadSafe`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:50:40.727

这是因为您`UIView`正在从未在其上创建的线程访问。由于您是`NSString`在后台线程中创建的，因此您的第二个示例将可以正常工作并被推荐。（虽然我认为你也不应该尝试`someView.Bounds`从后台线程访问）

我怀疑这也会起作用：

```
var bounds = someView.Bounds; //UI thread
Task.Factory.StartNew(() => {
    // Outputs expected size data: "{Width=##, Height=##}".
    using (UIView view = new UIView()) {
        SizeF textSize = view.StringSize(someString, someFont, new SizeF(bounds.Width, float.MaxValue), UILineBreakMode.WordWrap);
        Console.WriteLine(textSize);
    }
}); 
```

但我会坚持`NSString`：

```
var bounds = someView.Bounds; //UI thread
Task.Factory.StartNew(() => {
    // Outputs expected size data: "{Width=##, Height=##}".
    using (NSString nssSomeString = new NSString(someString)) {
        SizeF textSize = nssSomeString.StringSize(someFont, new SizeF(bounds.Width, float.MaxValue), UILineBreakMode.WordWrap);
        Console.WriteLine(textSize);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:20:59.237

对方法的 UI 限制`StringSize`确实是不必要的。Xamarin 已经[为 "v6.0.10+" 修复了这个问题](https://bugzilla.xamarin.com/show_bug.cgi?id=9657)。

> 我们已经确定 DrawString (drawInRect:* selectors) 在其他线程中没有问题。StringSize 是该功能的一个子集，因此它应该是安全的。未来版本 (6.0.10+) 将被标记为 [ThreadSafe]。

在您针对更新版本进行编码之前，该`NSString`版本将正常工作。

# ruby-on-rails-3 - 带有命名空间模型的 Rails 自定义验证消息

> ID：14385827
> 
> 赞同：2
> 
> 时间：2013-01-17T18:36:28.050
> 
> 标签：ruby-on-rails-3, validation, namespaces, locale

[这](https://stackoverflow.com/questions/808547/fully-custom-validation-error-message-with-rails)是我正在尝试的方向，但我无法让它与命名空间模型一起使用。

```
class Surveys::Hospital::JobMatch < ActiveRecord::Base
  has_many :job_match_answers,
           :class_name => "Surveys::Hospital::JobMatchAnswer",
           :foreign_key => "surveys_hospital_job_match_id"

  validates_presence_of :job_match_answers
end 
```

我希望用户在错误消息中看到“职位名称”而不是“职位匹配答案”。我尝试在 config/locales/en.yml 中更改它。我尝试了几种组合。

1) 嵌套命名空间

```
en:
  activerecord:
    attributes:
      surveys:
        hospital:
          job_match:
            job_match_answers: "Job titles" 
```

2) 内联命名空间

```
en:
  activerecord:
    attributes:
      surveys_hospital_job_match:
        job_match_answers: "Job titles" 
```

3) 没有命名空间

```
en:
  activerecord:
    attributes:
      job_match:
        job_match_answers: "Job titles" 
```

没有任何效果。如何使用命名空间模型执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T20:04:09.397

我遇到了同样的问题，首先找到了您的问题，然后将搜索范围扩大到 en.yml 在另一个问题中找到了答案：[Changing attributes name in en.yml file is not working](https://stackoverflow.com/questions/14199285/changing-attributes-name-in-en-yml-file-is-not-working)

斜杠“/”是命名空间分隔符。

所以

```
 en:
      activerecord:
         attributes:
           surveys/hospital/job_match:
             job_match_answers: "Job titles" 
```

# java - 出于加密目的使用 Java SecureRandom 洗牌？

> ID：14385833
> 
> 赞同：0
> 
> 时间：2013-01-17T18:37:11.610
> 
> 标签：java, random, cryptography, shuffle

我有一个整数列表，其中顺序是必不可少的。该列表可以非常大，最多 2^24 个元素。我想以原始值及其频率保持不变的方式对其进行“加密”；本质上，就是对列表进行洗牌。我发现一种非常简单（但非常不安全！）的方法是使用 PRNG，如 Java.Random。该过程将使用发送方和接收方共享的密钥为 PRNG 播种，然后应用任何随机排序算法（例如 Fisher-Yates）。这样，知道密钥的接收器将能够“恢复”洗牌。

我知道这是一个*非常糟糕的*主意，但使用 SecureRandom 真的会变得更好吗？我知道它的用途适用于加密货币，但我不认为它是用来输出大量数字的。

（总的来说，我知道“从不做你自己的算法”是加密 101，但到目前为止，我还没有找到任何其他具有我想要的属性的算法，即“重新排序”但将值和频率保留在原始列表中。如果存在这样的事情，请您指出来吗？）

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:40:36.983

你的想法很好，你只需要使用一个安全的伪随机流。创建它的最简单方法是流密码，例如 CTR 模式下的 AES。

实现一个`int Random(int count)`从流中读取 8 个字节的函数，采用该整数模数，并将其用作 Fisher-Yates shuffle 中的构建块。这不是完全一致的，但足够接近，在实践中并不重要。如果是偏执狂，将其增加到 16 个字节而不是 8 个字节。

# java - Java 正则表达式组 0

> ID：14385834
> 
> 赞同：8
> 
> 时间：2013-01-17T18:37:13.327
> 
> 标签：java, regex

有人可以帮我解释以下代码吗？谢谢。我对正则表达式分组有点困惑。

```
public static String evaluate(String s) {
    if (s == null) return "";

    Matcher m = Pattern.compile("[0-9]*").matcher(s);

    if (m.find()) {
        MatchResult mr = m.toMatchResult();
        return mr.group(0);
    }
    return "";
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-23T16:10:06.527

希望这使第*0 组*更加清晰：

**例子：**

```
 String str = "start123456end"; // Your input String

    //                                 Group#1 Group#2
    //                                   |      |  
    Pattern p = Pattern.compile("start([0-9]*)(end)");
    //                           |<--- Group#0 --->|

    Matcher m = p.matcher(str); // Create a matcher for regex and input

    while( m.find() ) // As long as your regex matches something
    {
        System.out.println("group#0:\t" + m.group()); // Or: m.group(0)
        System.out.println("group#1:\t" + m.group(1));
        System.out.println("group#2:\t" + m.group(2));
    } 
```

**输出：**

```
group#0:    start123456end
group#1:    123456
group#2:    end 
```

您可以将正则表达式的某些部分*“存储”成组。*在我的示例中，您有 3 个（组介于`(`和之间`)`）：

*   **第 1 组：***开始*词和*结束*词之间的数字。
*   **第 2 组：***仅*结束词
*   **第 0 组：**这是与您的模式匹配的*全部*内容 - 第 0 组是保留的，将始终返回整个匹配项，而其他所有内容都是可选的，由您定义。

* * *

**根据您的代码：**

**例子：**

```
Matcher m = Pattern.compile("[0-9]*").matcher("123456end"); // Matches all numbers

if( m.find() )
{
    System.out.println(m.group(0)); // m.group() possible too
} 
```

只有一组：`0`！

**输出：** `123456`（= 组 0）

现在让我们将更多组放入模式中：

**代码：**

```
 //                            Group#1      Group#2
    //                              |            |
    Matcher m = Pattern.compile("([0-9])[0-9]([0-9])*").matcher(str); // Matches all numbers
    //                           |<---- Group#0 ---->|

    if( m.find() )
    {
        System.out.println("group#0:\t" + m.group(0)); // m.group() possible too
        System.out.println("group#1:\t" + m.group(1)); // 1st digit
        System.out.println("group#2:\t" + m.group(2)); // 3rd digit
    } 
```

现在还有两个组。

**输出：**

```
group#0:    123456
group#1:    1
group#2:    6 
```

* * *

我向您推荐此文档：[**课程：正则表达式**](http://docs.oracle.com/javase/tutorial/essential/regex/index.html)。真正从第一章开始，自己尝试例子。

**额外的：**

*   [Java 正则表达式教程](http://www.vogella.com/articles/JavaRegularExpressions/article.html)（参见[3.4\. 分组和反向引用](http://www.vogella.com/articles/JavaRegularExpressions/article.html#regex_grouping)分组）
*   [Java 正则表达式指南（第 1 部分）](http://ocpsoft.org/opensource/guide-to-regular-expressions-in-java-part-1/)
*   [Java 正则表达式指南（第 2 部分）](http://ocpsoft.org/opensource/guide-to-regular-expressions-in-java-part-2/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-17T18:39:28.713

从[文档](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28int%29)中：

> **零组表示整个模式**，因此表达式`m.group(0)`等价于`m.group()`。

换句话说，`mr.group(0)`就是整场比赛。

# mysql - 数据库表建模 - 列继承

> ID：14385836
> 
> 赞同：0
> 
> 时间：2013-01-17T18:37:22.077
> 
> 标签：mysql, database, inheritance, rdbms, modeling

我想要两张桌子：

```
[Table1]         [Table2]
id1              id2
createdon        createdon
createdby        createdby
column1a         column2
column1b 
```

可以看到两个表都具有“createdon”和“createdby”列。我的其他桌子也有类似的情况。有没有办法通过列继承来建模和实现数据库表结构（就像我会在 OOP 中使用类属性一样）。从概念上讲我的意思是：我想创建一个超级表：

```
[Supertable]
createdon
createdby 
```

并使 Table10 和 Table20 扩展 Supertable。这样我就不必为每个特定表创建“createdon”和“createdby”列，因为它们将从超级表继承。

```
[Table10]  extends  [Supertable]   results in wanted   [Table1]
id1                 createdon                          id1
column1a            createdby                          createdon
column1b                                               createdby
                                                       column1a
                                                       column1b

[Table20]  extends  [Supertable]   results in wanted   [Table2]
id2                 createdon                          id2
column2             createdby                          createdon
                                                       createdby
                                                       column2 
```

所以Table10，Table20和Supertabe只是RDBMS内部的结构，Table1和Table2是数据库用户在访问数据库时看到的最终表。在 MySQL（或任何其他 RDBMS）中是否有可能发生这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:43:54.897

您还可以将表与关联键链接在一起：

```
[supertable]
id
createdon
createdby

[Table1]  
id1  
supertable_id      
column1a    
column1b 
```

这并不完全是您正在寻找的，但可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:44:13.587

从纯建模的角度来看……为什么不可能呢？

您的表结构将如下所示（我已经调整了您的语法）：

```
[Table1]       [Table2]
id1            id2
column1a       column2
column1b 
```

...和...

```
[Table0]
table   <- either Table1 or Table2
id      <- either the value id1 or id2
createdon
createdby 
```

但最大的问题是……你会在你的应用程序中受益吗？如果不深入了解您将要做什么，我无法回答这个问题。

# c# - 在没有表格的情况下在屏幕上绘图

> ID：14385838
> 
> 赞同：37
> 
> 时间：2013-01-17T18:37:27.523
> 
> 标签：c#, console, drawing, screen

是否可以在不使用表单应用程序的情况下在屏幕上创建一个大的白色矩形？

如果可能，它应该覆盖整个屏幕。我知道我必须使用`System.Drawing`并尝试了几个步骤，但没有一个真正在我的屏幕上打印任何内容！

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-18T11:56:33.130

# 方法一：调用Windows API

你需要`System.Drawing`和`System.Runtime.InteropServices`。您可能需要向它们添加项目引用。

```
using System.Runtime.InteropServices;
using System.Drawing; 
```

使用 P/Invoke 将方法添加到您的类

```
[DllImport("User32.dll")]
public static extern IntPtr GetDC(IntPtr hwnd);
[DllImport("User32.dll")]
public static extern void ReleaseDC(IntPtr hwnd, IntPtr dc); 
```

获取`Graphics`整个屏幕的对象并用它绘制一个矩形：

```
IntPtr desktopPtr = GetDC(IntPtr.Zero);
Graphics g = Graphics.FromHdc(desktopPtr);

SolidBrush b = new SolidBrush(Color.White);
g.FillRectangle(b, new Rectangle(0, 0, 1920, 1080));

g.Dispose();
ReleaseDC(IntPtr.Zero, desktopPtr); 
```

这种方法的问题是，如果屏幕完全刷新，矩形将被覆盖，这对于大多数实际应用程序来说毫无用处。

# 方法二：创建无边框表格

和以前一样，您需要一个项目参考。这次来`System.Windows.Forms`。您还需要`System.Drawing`：

```
using System.Drawing;
using System.Windows.Forms; 
```

制作新表单，删除它的边框，用它填满屏幕，然后把它放在任务栏的顶部：

```
Form f = new Form();
f.BackColor = Color.White;
f.FormBorderStyle = FormBorderStyle.None;
f.Bounds = Screen.PrimaryScreen.Bounds;
f.TopMost = true;

Application.EnableVisualStyles();
Application.Run(f); 
```

一个可能的问题是用户可以在窗口之外使用 alt+tab。如果你想做更复杂的图形，你需要写一些像[这样](http://msdn.microsoft.com/en-us/library/55aa1t17%28v=VS.90%29.aspx)的绘图代码。要使表单背景透明，请将其设置`TransparentKey`为与其`Backolor`.

我刚刚在 .NET 4.5 和 Windows 7 中测试了这两个版本，因此早期版本可能会有所不同。更多信息[在这里](https://stackoverflow.com/a/3379369/626796)和[这里](https://stackoverflow.com/a/277776/626796)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T18:42:58.167

是的，可以在屏幕上绘制，但使用最上面的无边框形式可能更容易。

如果必须，您也可以从控制台应用程序执行此操作，前提是您引用必要的程序集，但这将导致控制台窗口在应用程序的生命周期内保留在屏幕上。

```
this.TopMost = true;
this.FormBorderStyle = FormBorderStyle.None; 
```

或者，我相信您可以创建一个实例`Window`并调用`Show`它。

[This answer to a different question](https://stackoverflow.com/a/1536194/83264)解释了如何使用 GDI+ 调用直接绘制到屏幕上。

# android - 为什么 Google 选择了 RenderScript 而不是 OpenCL

> ID：14385843
> 
> 赞同：45
> 
> 时间：2013-01-17T18:37:41.853
> 
> 标签：android, opencl, renderscript

我一直想知道是否可以使用 OpenCL for Android，发现这是不可能的，然后完全放弃了这个主题。但是感谢官方 Android 开发者博客 (http://android-developers.blogspot.fr/2013/01/evolution-of-renderscript-performance.html) 1 月 14 日的博文，我发现并行编程是可能的从 Android 4.0 开始，感谢 RenderScript！一个与 OpenCL 有很多共同特性的 API。

我现在想知道的是：为什么 Google 选择实施这个新的解决方案，而不是推动 OpenCL（现在由 Khronos 小组处理的开放规范）。

我的意思是，我知道，从一种转换到另一种并不难，但仍然......

无论如何，如果有人作为真正的解释，请告诉我！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-17T19:24:59.450

Apple 拥有 OpenCL 上的商标。谷歌与苹果竞争。或许真的就这么简单。

我们已经在 Android 上完成了 OpenCL 的工作（[请参阅此处](http://arrayfire.com/opencl-on-mobile-devices/)），并且很高兴看到它在英特尔、Imagination 和其他芯片制造商的努力下取得进展。谷歌很快就会好转。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-17T22:44:06.887

答案是 Android 的需求与 OpenCL 试图提供的非常不同。

OpenCL 使用 CUDA 中首次引入的执行模型。在这个模型中，一个内核由一组或多组worker组成，每个组在该组内都有快速共享内存和同步原语。这样做会导致算法的描述与应该如何在特定架构上调度该算法（因为您正在决定组的大小以及何时在该组内同步）混合在一起。

当您为一种架构编写并且想要绝对的峰值性能时，这很棒，但它以牺牲性能可移植性为代价获得了峰值性能。也许在您的架构上，您有足够的寄存器和共享内存来每组运行 256 个工作程序以获得最佳性能，但在另一种架构上，您最终会出现大量寄存器溢出，每组超过 128 个工作程序，导致 80% 的性能回归. 同时，由于您的代码是为每组 256 个工作人员明确编写的，因此运行时无法尝试改善另一个架构上的情况——它必须遵守您所编写的内容。在 GPU 计算的桌面/HPC 端从架构迁移到架构时，这种情况很常见。

在移动设备上，Android 需要许多不同架构的 GPU 和 CPU 供应商之间的性能可移植性。如果 Android 依赖于 CUDA 风格的执行模型，几乎不可能编写单个内核并让它在一系列设备上可接受地运行。

RenderScript 以牺牲一些峰值性能为代价，将调度控制从开发人员手中抽象出来；但是，我们在 RenderScript 的可能性方面不断缩小差距。例如，在 Android 4.2 中引入的 API ScriptGroup 是我们进一步改进 GPU 代码生成计划的重要组成部分。还有很多新的改进，也使编写快速代码变得更加容易。

# android - 纵横比图像视图

> ID：14385845
> 
> 赞同：0
> 
> 时间：2013-01-17T18:37:44.567
> 
> 标签：android

![在此处输入图像描述][1]我会为这个问题发疯。我无法修复图像的纵横比。我尝试了重力和矩阵，但没有保持纵横比。我该如何解决？我在 textview 中有一个可变文本（来自一个数组），我想要一个固定的图像。

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="#000000"
 android:orientation="vertical" >

 <LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:orientation="vertical" >

<ImageView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/luna1"
    android:textSize="15pt" 
    android:layout_weight="1"/>

<ScrollView
    android:id="@+id/scrollView10"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:background="#000000"
    android:layout_weight="1" >

    <TextView
        android:id="@+id/textView10"
        android:layout_width="match_parent"
        android:layout_height="320dp"
        android:background="#000000"
        android:gravity="center"
        android:textColor="#ffffff"
        android:textSize="14sp"
               android:text="jjkjkljkjkldjklsdfjkljklsdfjklsdfjklsdfjklsdfjklsdfjklsdfjklfjlsdfjkl"
        android:autoLink="web|email"
        android:textStyle="italic" />
</ScrollView>
</LinearLayout>

<Button
android:id="@+id/button10"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:text="Chiudi" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:49:23.350

你正在寻找[`scaleType`](http://developer.android.com/reference/android/widget/ImageView.html#attr_android%3ascaleType). 将 设置`scaleType`为类似`centerCrop`or`centerInside`并且您的纵横比将保持不变。

**更新**：

还要确保您[`src`](http://developer.android.com/reference/android/widget/ImageView.html#attr_android%3asrc)用于设置图像而不是`background`.

# javascript - 如何附加带有子元素的元素？

> ID：14385846
> 
> 赞同：0
> 
> 时间：2013-01-17T18:37:46.353
> 
> 标签：javascript, jquery, html, dom

我熟悉使用 jQuery 创建元素的首选方法：

```
jQuery('<div/>', {
    id: 'foo',
    href: 'http://google.com',
}).appendTo('#mySelector'); 
```

但是我需要创建一些比上面更复杂的元素。有没有办法可以构建我的代码，以便它输出如下内容：

```
<div id="foo" href="http://google.com"> 
   <h1> Heading </h1>
   <div id="child-div">
      Conetent created from jQuery vars
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:43:49.050

您可以简单地将 html 字符串传递给 jQuery 函数

```
jQuery('<div id="foo" href="http://google.com"><h1> Heading </h1><div id="child-div">Conetent created from jQuery vars</div></div>')
.appendTo('#mySelector'); 
```

或单独创建每个元素

```
jQuery('<div/>', {
    id: 'foo',
    href: 'http://google.com',
})
.append('<h1/>', {text: ' Heading '})
.append('<div/>', {id: 'child-div', text: 'Conetent created from jQuery vars'})
.appendTo('#mySelector'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:45:18.833

它可能是这样的：

```
var html = '<div id="foo">';
html += '  <h1>Heading</h1>';
html += '  <div id="child-div">';
html += '    <p>'+myVar+'</p>';      //Content created from jQuery vars
html += '  </div>';
html += '</div>';
$('#mySelector').append( html ); 
```

您可以`html`在一行中声明您的变量，但由于其清晰性，我更喜欢这些多行方式。

请记住，您不能添加[`href`](http://www.w3schools.com/tags/att_a_href.asp)到 div 元素！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:43:42.750

您可以直接在 jQuery 函数中创建元素。

例子：

```
$("<div></div>"); 
```

将创建一个 div 元素并升级 DOM 集合。

# javascript - 防止 JS 点击计数器出现负数

> ID：14385852
> 
> 赞同：2
> 
> 时间：2013-01-17T18:37:55.277
> 
> 标签：javascript, jquery

我有一个简单的 JS 计数器，带有两个用于统计人数的按钮（+ 和 -）。工作正常，但它允许用户在减少计数时进入负数。可能是一个简单的解决方案，但不适合我。任何帮助，将不胜感激。谢谢。

JS

```
 //Pax Counter

$(document).ready(function(){
    //Count Function
    $('#increase').click(function() {
    $('#pax_count').val(function(i, val) { return val*1+1 });
});
    $('#decrease').click(function() {
    $('#pax_count').val(function(i, val) { return val*1-1 });
}); 

  }); 
```

HTML

```
<input name="pax_count" type="text" class="pax_input_box" id="pax_count" value="0" >

<div id="pax_counter_container"><!-- open #pax_counter_container -->
<button id="increase" type="button" class="click_button" onTouchStart="EvalSound('audio3')"></button>
<button id="decrease" type="button" class="click_button" onTouchStart="EvalSound('audio3')"></button>
</div><!-- close #pax_counter_container --> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T18:39:25.880

您可以使用`Math.max()`：

```
$("#pax_count").val(function(i, val) {
    return Math.max(0, val - 1);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T18:41:22.887

我只是修改了你的函数，在减去之前检查该值是否大于或等于 0。

```
$(document).ready(function(){
    //Count Function
    $('#increase').click(function() {
    $('#pax_count').val(function(i, val) { return val*1+1 });
});
    $('#decrease').click(function() {
    $('#pax_count').val(function(i, val) { 
         if(val*1>0){
             return val*1-1;
         }else{
             return val;
         }
}); 

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T18:47:15.800

只需检查 val 是否更小 1

```
$('#decrease').click(function() {
    $('#pax_count').val(function(i, val) { return val>=1?val*1-1:0 });
}); 
```

# java - 如何使用一个类的 int 并将其与其他类的 int 进行比较？

> ID：14385855
> 
> 赞同：0
> 
> 时间：2013-01-17T18:38:08.740
> 
> 标签：java, eclipse

我正在尝试制作老虎机游戏。我搜索了其他论坛，但他们似乎都在使用 int 与我尝试使用它们的方式略有不同

我有 4 个课程，这是一个简单的版本：

```
import java.util.*;
public class ExampleCode {

    public static void main(String[] args) {

        int a = 0;
        int b = 0;
        int c = 0;

        SlotLeft left = new SlotLeft();
        SlotMid mid = new SlotMid();
        SlotRight right = new SlotRight();

        left.left(a);
        mid.mid(b);
        right.right(c);

        if(a==b){
            System.out.println("text");
        }
        if(a==c){
             System.out.println("different text");
        }
        if(b==c){
            System.out.println("More text");
        }
        if(a==b&&a==c&&b==a&&b==c&&c==a&&c==b){
            System.out.println("last text");
        }
    }
}

//left class
import java.util.*;
public class SlotLeft {
    public void left(int a) {
        int 1;
    }
}
//mid class
import java.util.*;
public class SlotMid {
    public void mid(int b) {
        int b = 1;
    }
}

//right class
import java.util.*;
public class SlotRight {
    public void right(int c) {
        int c = 1;
    }        
} 
```

括号可能弄乱了，但这不是我关心的问题。我正在尝试在三个类中设置某些 int，然后能够在主类中为它们提供该值并比较三个数字。有什么建议么？

编辑：试图使它更明确，抱歉相对较新的Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:44:24.943

直接将值分配给传递给您的方法的参数不会在调用方法中更改它。换句话说：

```
public class Test {
    public static void main(String[] args) {
        int i = 0;
        foo(i);
        System.out.println(i); // Prints "0", not "1"
    }

    public void foo(int i) {
        i = 1;
    }
} 
```

这打印`0`，不是`1`。同样，直接赋值不会改变调用方法中的值。相反，请执行以下操作：

```
public class Test {
    public static void main(String[] args) {
        int i = foo();
        System.out.println(i); // Prints "1"
    }

    public int foo() {
        return 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:42:09.907

对每个插槽使用数组而不是类：

```
public static final int SLOT_LEFT = 0 ;
public static final int SLOT_MID = 1 ;
public static final int SLOT_RIGHT = 2 ;

int[] slots = new int[3]; 
```

设置插槽的值：

```
slots[SLOT_MID] = 1; 
```

您也可以将所有内容整合到一个类中

```
class SlotManager {
    public static final int SLOT_LEFT = 0 ;
    public static final int SLOT_MID = 1 ;
    public static final int SLOT_RIGHT = 2 ;

    int[] slots = new int[3];

    public void setSlot(int slotId, int value) {
       slots[slotId] = value;
    }

} 
```

# drupal - 每当我在 Drupal 7 中更改视图时，我都会收到此错误？

> ID：14385859
> 
> 赞同：0
> 
> 时间：2013-01-17T18:38:13.093
> 
> 标签：drupal, module, views

每当我尝试保存更改时，我的视图模块都会做这件烦人的事情。它闪烁并产生一个乱码屏幕。我必须单击后退按钮才能返回编辑屏幕。我所做的更改已保存，但这显然不是使用视图模块的理想方式。我的模块是否损坏？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:22:10.343

我相信您在 Drupal 安装中使用了最新版本的 jQuery，这就是您面临这个问题的原因。

你可以做两件事——要么回滚到已发布的 Drupal jQuery 版本，要么使用[这个](https://drupal.org/project/jquery_update)模块更新 jQuery，我希望你的问题能得到解决。我用同样的方法解决了我的问题..

# ruby - if语句中的Ruby while循环

> ID：14385860
> 
> 赞同：3
> 
> 时间：2013-01-17T18:38:14.477
> 
> 标签：ruby

在 Ruby 中使用以下代码：

```
if (tickFormat.length > 12 && tickFormat.length < 24)
    i = 1
    while(i < tickFormat.length) do
        if (i%2 != 0)
          tickFormat.at(i)[1] = ''
        end
        i++
    end
end 
```

我得到了第二个“end”语句的“unexpected keyword_end”。如果我删除 while 循环，则代码运行时不会出错。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:40:02.287

试试这个：

```
if (tickFormat.length > 12 && tickFormat.length < 24)
  i = 1
  while(i < tickFormat.length) do
    if (i%2 != 0)
      tickFormat.at(i)[1] = ''
    end
    i += 1
  end
end 
```

语法在 Ruby中`i++`不起作用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T19:30:23.017

你显然来自 C 角，所以我这边有一些额外的信息：

首先我想引用[阿列克谢·阿努弗里耶夫的话](https://softwareengineering.stackexchange.com/a/27268)

> 我认为您应该使用您的平台采用的命名约定。underscore_case 在 C# 代码中看起来很奇怪，就像 Ruby 中的 camelCase =)

所以你应该考虑使用下划线表示法。

另外，您的代码是漂亮的 C 风格。这有点像红宝石（尽管您是否在同一行中编写简短的语句是一个品味问题）：

```
if tick_format.length === (13..23)
  tick_format.each_with_index do |tf, i|
    tf[1] = '' if i.odd?
  end
end

# if you use active support's core extensions (which is recommended imho)
# you can rewrite line 1 as:
if tick_format.length.in? 13..23 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T18:53:15.930

Ruby 有太多的糖来编写 C 风格的代码 :)

尝试类似的东西

```
if tickFormat.length.between?(13,23)
  (1..tickFormat.length).step(2) do |i|
    tickFormat.at(i)[1] = ''
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T18:43:49.130

您想使用 i+=1 来增加。

```
if tickFormat.length > 12 && tickFormat.length < 24
        i = 1
        while i < tickFormat.length do
            if (i%2 != 0)
              tickFormat.at(i)[1] = ''
            end
            i+=1
        end
    end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T18:44:25.867

唯一错误的是`i++`. 我可能会建议将风格从 C 类迁移到规范的 Ruby，但这只是个人选择......

```
if (13..23) === tickFormat.length
  i = 1
  while i < tickFormat.length
    if i % 2 != 0
      tickFormat.at(i)[1] = ''
    end
    i += 1
  end
end 
```

# regex - 跨换行符的正则表达式匹配

> ID：14385863
> 
> 赞同：0
> 
> 时间：2013-01-17T18:38:37.993
> 
> 标签：regex

我有这个 json 文件。部分内容如下：

```
{ "has_more" : false,
  "items" : [ { "aliases" : [ "http://www.stackoverflow.com" ],
        "api_site_parameter" : "stackoverflow",
        "markdown_extensions" : [ "Prettify" ],
        "name" : "Stack Overflow",
        "related_sites" : [ { "name" : "Stack Overflow Chat",
              "relation" : "chat",
              "site_url" : "http://chat.stackoverflow.com"
            } ],
        "site_state" : "normal",
        "site_type" : "main_site",
        "site_url" : "http://stackoverflow.com",
        "styling" : { "link_color" : "#0077CC",
            "tag_background_color" : "#E0EAF1",
            "tag_foreground_color" : "#3E6D8E"
          }
      },
      { "api_site_parameter" : "serverfault",
        "markdown_extensions" : [ "Prettify" ],
        "name" : "Server Fault",
        "related_sites" : [ { "api_site_parameter" : "meta.serverfault",
              "name" : "Meta Server Fault",
              "relation" : "meta",
              "site_url" : "http://meta.serverfault.com"
            },
            { "name" : "Chat Stack Exchange",
              "relation" : "chat",
              "site_url" : "http://chat.stackexchange.com"
            }
          ],
        "site_state" : "normal",
        "site_type" : "main_site",
        "site_url" : "http://serverfault.com",
        "styling" : { "link_color" : "#10456A", 
```

我想匹配字符串

```
 "related_sites" : [ { "name" : "Stack Overflow Chat",
              "relation" : "chat",
              "site_url" : "http://chat.stackoverflow.com"
            } ], 
```

和

```
 "related_sites" : [ { "api_site_parameter" : "meta.serverfault",
              "name" : "Meta Server Fault",
              "relation" : "meta",
              "site_url" : "http://meta.serverfault.com"
            },
            { "name" : "Chat Stack Exchange",
              "relation" : "chat",
              "site_url" : "http://chat.stackexchange.com"
            }
          ], 
```

不启用多行。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:42:54.617

“启用多行”正是您匹配多行的方式。这就是为什么它被称为“多行”。但是由于它所做的只是更改`.`为 include `\n`，因此您可以`(.|\n)`改为编写。

但鉴于这是 JSON，你到底为什么要在上面使用正则表达式？只需将其解析为数据结构并从那里开始工作。

```
data = json.loads(json_string)
for item in data['items']:
    print item['related_sites'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:09:22.620

如果“related_sites”元素中没有数组，请尝试：

`"related_sites" : \[(?:[^\]]*\n?)*\]`

# tcl - 设置 TCL 以访问 tcl 库

> ID：14385865
> 
> 赞同：3
> 
> 时间：2013-01-17T18:38:47.897
> 
> 标签：tcl, tclsh

我是 TCL 新手，正在努力访问其他模块。SOURCE 命令帮助我包含了我在 TCL 程序中编写的其他代码。但是，我认为我在访问代码库时遇到了问题。

例如，当我引用一个数学函数时，找不到它。我认为在搜索通过 tchsh85 调用的程序时，我必须做一些事情来包括数学库在我的计算机上的位置。

```
invalid command name "::math::statistics::mv-ols"
None of these directories exist on my computer: info library= C:/Tcl/lib/tcl8.5 auto_path= C:/Tcl/lib/tcl8.5 C:/Tcl/lib c:/tcl/lib/teapot/package/win32-x86_64/lib c:/tcl/lib/teapot/package/tcl/lib tcl library= C:/Tcl/lib/tcl8.5 auto_index= source C:/Tcl/lib/tcl8.5/word.tcl auto_index= source C:/Tcl/lib/tcl8.5/tm.tcl auto_index= source C:/Tcl/lib/tcl8.5/tm.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/parray.tcl auto_index= source C:/Tcl/lib/tcl8.5/history.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/history.tcl auto_index= source C:/Tcl/lib/tcl8.5/package.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/history.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/word.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/word.tcl auto_index= source C:/Tcl/lib/tcl8.5/package.tcl auto_index= source C:/Tcl/lib/tcl8.5/tm.tcl auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl auto_index= source C:/Tcl/lib/tcl8.5/history.tcl auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/history.tcl auto_index= source C:/Tcl/lib/tcl8.5/package.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/history.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/tm.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/word.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/package.tcl auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl auto_index= source C:/Tcl/lib/tcl8.5/history.tcl auto_index= source C:/Tcl/lib/tcl8.5/package.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/word.tcl auto_index= source C:/Tcl/lib/tcl8.5/history.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl auto_index= source C:/Tcl/lib/tcl8.5/history.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl auto_index= source C:/Tcl/lib/tcl8.5/tm.tcl auto_index= source C:/Tcl/lib/tcl8.5/tm.tcl auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl 
```

我收到了这个答案： ::math::statistics 是 TCLlib 的一部分。要检查是否已安装，请键入

package 需要 tcllib，如果安装了，它会告诉你版本号。如果没有安装，您可以使用 Teacup 为您安装。

我试过代码：

```
catch {package require nonexistentName}
 package names
puts "[package names]" 
```

我收到了：

```
Thread logger img::pixmap TclOO tablelist_tile struct::tree opt tcltest img::ico img::pcx struct::set msgcat pngtcl tablelist::common ftp Tclx trsync tdom img::sgi report comm dde Mk4tcl img::sun img::gif img::window textutil cmdline csv img::tga Img img::png Tktable Itk Ttrace tipstack zlibtcl img::base platform fileutil Tk vfs ActiveTcl http tbcload Memchan style struct::graph tablelist treectrl struct::queue img::jpeg activestate::teapot::link img::bmp registry jpegtcl tdomhtml tooltip snit img::ppm struct::stack tcl::tommath img::tiff tls widget struct img::xpm md5 BWidget img::xbm log starkit Tcl Trf tifftcl Itcl img::ps sqlite3 base64 trofs
0.7 
```

我可能不理解 TCL，但在我使用过的其他语言中，有一种方法可以设置目录或文件列表，以便按特定顺序搜索被调用代码。在我看来，我需要告诉 tclsh85 去哪里看。

我从 ActiveState 下载了 tcl 8.5.13 和 BWidget 1.9.6 我安装了 tcl 并在我的计算机上解压了 BWidget，但它与我的 tcl 程序位于不同的位置。数学是其中的一部分吗？如果没有，我应该下载什么？当我在 Windows Vista 上运行时，我更喜欢只获得一个可执行版本而不是我需要构建的东西。我可以创建 tcl 程序，只要它们是独立的，或者如果我可以使用 SOURCE，一切都很好。我遇到麻烦的地方是在我的程序之外调用代码。

我担心需要为我的环境设置 auto_path，因为它现在与我计算机上的任何内容都不对应。

假设我对 tcl 的工作原理一无所知，请回答。我正在尝试自学（在互联网文档和回答问题的人的帮助下）。

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T20:53:03.830

好的，我试着总结一下你的问题：

**您想知道如何安装所需的软件包。**

您可以使用`teacup`来安装它们，例如`teacup install math::statistics`，应该可以完成这项工作，或者下载[tcllib](https://sourceforge.net/projects/tcllib/)并安装它。Tcllib 的安装很简单，应该会自动选择正确的安装路径。要在代码中使用库，您只需要做`package require math::statistics`

**您想知道如何在 Tcl 应该查找库的位置添加目录。**

根据它是什么类型的库，有两种可能性：

*   如果有一个名为 pkgIndex.tcl 或 autoIndex 的文件，那么您必须修改该`auto_path`变量。这可以通过`lappend auto_path path/to/the/files`.
*   如果只有一个以 .tm 结尾的文件，那么它会稍微复杂一点：您必须添加正确的父目录。因此，如果您有一个位于 /some/directory/math/statistics.tm 中的 statistics.tm 文件，并且这是 math::statistics 包，那么适当的目录是 /some/directory。您可以使用添加它`::tcl::tm::path add /some/directory`。

这样的事情*几乎从来没有*必要，因为您成功地安装了 BWidgets，所以 auto_path 对您来说应该没问题。请注意，Tcl 使用（与许多其他语言一样，包括 Java、Perl 等）单个`/`作为路径分隔符，而不是通常的 windows `\`。

**你更喜欢单文件可执行文件** 是的，这是可能的，但你应该首先了解如何获取包，需要哪些文件等。单文件 Tcl 分发的技术称为[Starkit](http://wiki.tcl.tk/starkit)，这是一个非常有用的东西，但你应该已经熟悉 Tcl。

# php - 表单提交后如何在同一个html页面上回显？

> ID：14385867
> 
> 赞同：3
> 
> 时间：2013-01-17T18:38:50.737
> 
> 标签：php, html, forms, submit, echo

提交表单后，我的页面被重定向到 PHP 并显示回显。如何在不重定向到 PHP 页面的情况下显示回显？所以回显应该显示在html页面中（html表单所在的位置）。

```
<form method="post" action="../form.php">
<input type="submit" name="1" value="YES" />
<input type="submit" name="1" value="NO" />
</form> 
```

-

```
<?php 
$answer = $_POST['1'];  
if ($answer == "YES") {          
    echo 'Good!!!';      
}
else {
    echo 'Try Again!';
} 
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T18:52:37.467

我想你可以结合使用`<iframe>`和 javascript 来获得结果。

```
<form method="post" action="submit.php" target="myIframe" >
    <input type="submit" name="1" value="YES" />
    <input type="submit" name="1" value="NO" />
</form>

<iframe name="myIframe">
</iframe> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T18:48:13.257

您不能在同一个页面上执行此操作 - 至少在没有异步客户端-服务器通信技术（如 AJAX）的情况下不能。否则，您可以使用以下内容：

```
<form action="<?php echo $_SERVER['PHP_SELF']; ? method=....>" 
```

作为您的表单开始标记，然后将 PHP 处理代码放在文档顶部，如下所示：

```
<?php
  if(isset($_POST['form_field_name'])){
       //process your data here
?>

HTML in case of Form filled in goes here

<?php
}else{
?>

HTML in case of Form not filled in goes here

<?php
  }
?>

HTML in any case goes here 
```

通过这种方式，您可以根据表单是否填写来更改页面的布局。$_SERVER['PHP_SELF'] 包含对当前请求页面的引用，因此即使它被重命名也总是设置为正确的页面。这可以节省您跟踪错误的时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T18:41:44.820

```
<?php

if(isset($_POST['1'])){
    echo ($_POST['1'] == 'YES') ? 'Good!!!' : 'Try Again!';
}

?>

<!-- your HTML goes here --> 
```

您可以在同一页面上组合 HTML 和 PHP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-08T11:34:53.113

```
<html>
<body>
<form method="post" action="">
<input type="text" maxlength="30" name="nm">
<input type="email" maxlength="30"  name="em"><br>
<input type="checkbox" name="chkbox1" value="male">Male
<input type="checkbox" name="chkbox2" value="male">Male
<input type="checkbox" name="chkbox3" value="male">Male
<input type="checkbox" name="chkbox4" value="male">Male
<input type="checkbox" name="chkbox5" value="male">Male
<input type="Submit" name="submit">
</form>
</body>
</html>
<?php
if(isset($_POST['submit']))
{
echo "Welcome :".$_POST['nm']."<br>";
echo "Your email Address is: ".$_POST['em']."<br>";
}
$count=0;
if(isset($_POST['chkbox1']))
$count++;
if(isset($_POST['chkbox2']))
$count++;
if(isset($_POST['chkbox3']))
$count++;
if(isset($_POST['chkbox4']))
$count++;
if(isset($_POST['chkbox5']))
$count++;
echo" Number of checkboxes ticked are:".$count;
?>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-24T02:20:56.480

您可以将操作设置为同一页面，例如：

如果我正在处理一个名为 index.php 的文件

这将是我的形式：

```
<form action="index.php" method="post">
   <input type="text" name="Example" placeholder="Enter Text"> 
```

# asp.net-mvc - 捕获路由错误

> ID：14385875
> 
> 赞同：5
> 
> 时间：2013-01-17T18:39:41.280
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, asp.net-web-api-routing

我正在构建一个 RESTful API，我想控制所有可能的输出给我的消费者。我正在实现`ExceptionFilterAttribute`过滤控制器中引发的所有异常。然而，这并不能让我控制在到达控制器代码之前我的应用程序中可能发生的错误——例如路由错误。默认行为发回一个标准的序列化 HttpError ，泄露了太多我喜欢的内部信息，例如控制器类名等。我想避免这种情况。改变这种行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T18:59:08.137

您可以添加一个`MessageHandler`来执行此操作。 `MessageHandlers`在管道中首先和最后运行，允许您处理原始传入请求和原始传出响应。

例如：

```
public class ErrorHandler : DelegatingHandler
{
    protected override async Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        var response = await base.SendAsync(request, cancellationToken);

        if (!response.IsSuccessStatusCode)
        {
                Debug.WriteLine("something happened! - " + response.ReasonPhrase);
        }

        return response;
    }
} 
```

然后在你的注册`GlobalConfiguration`

```
config.MessageHandlers.Add(new ErrorHandler()); 
```

这基本上检查传出响应并检查状态代码是否为 2xx。如果没有，你可以用它做点什么——记录，或者重置响应的内容来隐藏你想隐藏的任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T19:13:42.287

实际上，默认情况下，我们非常小心不要将内部信息泄露给远程客户端。如果请求来自本地机器以进行调试，我们将提供内部信息，但我们不会将其发送到远程客户端。如果您想查看远程客户端的响应可能是什么样子，请在您的配置中尝试以下设置：

```
config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Never; 
```

您可能还想查看此博客文章以获取有关 WebAPI 错误处理的更多信息：

[http://blogs.msdn.com/b/youssefm/archive/2012/06/28/error-handling-in-asp-net-webapi.aspx](http://blogs.msdn.com/b/youssefm/archive/2012/06/28/error-handling-in-asp-net-webapi.aspx)

If the defaults still don't work for you, then you should follow Filip's suggestion and just intercept the response with a message handler to send back anything you like.

# java - SWT 树种群

> ID：14385876
> 
> 赞同：1
> 
> 时间：2013-01-17T18:39:46.447
> 
> 标签：java, tree, swt

我有一个从 2d 数组列表中填充的 SWT 树，但结果并不完全正确。我正在尝试按项目编号对顶级树项目进行分组，但我的算法没有任何运气。我附上了一张图片来更好地解释一下。项目 4324226 出现两次，带有不同的子项目，我想将两个孩子分组在一个父项下。

![在此处输入图像描述](../Images/c2b5c9c0eb86454667c300e27de49698.png)

这是我的树代码。有任何想法吗？我忽略了一些简单的事情吗？

```
 long[][] listOrders;
    listOrders = database.getUnfinishedOrders();

    for (int i=0; i<listOrders.length; i++) {
        TreeItem iItem = new TreeItem (tree, 0);
        iItem.setText (Long.toString(listOrders[i][0]));
        for (int j=1; j<listOrders[i].length; j++) {
            TreeItem jItem = new TreeItem (iItem, 0);
            jItem.setText (Long.toString(listOrders[i][j]));
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:44:47.597

我建议在之前创建一个模型（因此对其进行分组）并在您执行此操作后将其添加到树中。

从设计的角度来看，这会好很多。因为视图的东西与数据的东西是分开的。

您可以使用地图来存储特定顺序的元素列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T01:29:00.983

遵循@Michal Borek 的建议，这里是在`Map<Long, Set<Long>>`数据结构中对父级和子级进行分组的代码。它假设对于每个父母，重复的孩子应该只包含一次（否则只需替换`Set`by`List`和`LinkedHashSet`by `ArrayList`）：

```
private Map<Long, Set<Long>> buildModel(long[][] originalModel) {
    final Map<Long, Set<Long>> model = new LinkedHashMap<Long, Set<Long>>();
    for (int i = 0; i < originalModel.length; i++) {
        model.put(originalModel[i][0], new LinkedHashSet<Long>());
    }

    for (int i = 0; i < originalModel.length; i++) {
        final Long key = originalModel[i][0];
        for (int j = 1; j < originalModel[i].length; j++) {
            model.get(key).add(originalModel[i][j]);
        }
    }

    return model;
} 
```

这是构建 SWT 树的方法：

```
long[][] listOrders = database.getUnfinishedOrders();
final Map<Long, Set<Long>> ordersModel = buildModel(listOrders);

for (Map.Entry<Long, Set<Long>> entry : ordersModel.entrySet()) {
    TreeItem iItem = new TreeItem (tree, 0);
    iItem.setText(entry.getKey().toString()); 
    for (Long child : entry.getValue()) {
       TreeItem jItem = new TreeItem (iItem, 0);
       jItem.setText (child.toString());
    }
} 
```

# javascript - 刷新后浏览器的“返回原始位置”发生在Javascript事件链的哪个位置？

> ID：14385877
> 
> 赞同：9
> 
> 时间：2013-01-17T18:39:50.437
> 
> 标签：javascript, jquery, browser, cross-browser, dom-events

我有一个繁忙的网页，里面有很多小部件。有时需要一两秒钟才能加载。

当我从页面顶部以外的某个位置点击刷新时，我可以看到页面加载好像`scrollTop==0`并且在某些时候突然回到我的原始位置。

问题是我在`.ready()`事件处理程序中发生了各种初始化，其中一些依赖于`scrollTop`and `scrollLeft`。这些初始化发生在文档返回到其原始位置之前，然后从原始位置给出无意义的结果。

将这些初始化包装在`.load()`事件处理程序中似乎也不起作用。起作用的是通过处理程序内部的 setTimeout 添加（相当长的）延迟`.load()`。由于显而易见的原因，这是不可取的。

这表明“返回原始位置”独立于标准事件链发生，即。ECMA 标准中未指定或依赖于浏览器实现。

处理仅在浏览器返回原始位置后才需要进行的初始化的最佳方法是什么？有关联事件吗？有什么方法可以识别已经发生刷新并且在这种情况下只会延迟？

我所有的测试都是在 Chrome 和 Firefox 中进行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:53:42.910

“返回原始位置”行为是浏览器作为奖励添加的一项功能，而不是标准化的功能。我认为没有特定事件是“浏览器因页面刷新而滚动”事件。

但是，如果浏览器行为正常，我怀疑它应该在滚动时触发[onscroll 事件。](https://stackoverflow.com/questions/2561917/using-window-onscroll-event-to-detect-page-frame-scrolling)`window`这必然是在页面加载事件之后（因为否则浏览器没有什么可以滚动*到的*，所以我会在加载事件之后查找滚动事件并推断页面已被浏览器滚动。

请记住，您必须成功处理页面*未*刷新*且未*收到 onscroll 事件的情况。因此，我会做的（如果可能的话）是假设页面没有滚动，然后如果你*确实*得到了 onscroll 事件，请通过重新定位新位置来重新开始。在加载然后重新加载的地方有一点“闪光”，但这将处理回调的异步性质。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:57:59.633

由于这不是标准事件（正如您所说），我建议创建一个可以为您进行快速重复*测试*的小系统，以确保在加载/刷新后您当前高于该 0 点，然后为您的小部件等运行任何代码。

```
var scrollTopInterval;

$(window).load(function () {
  var i = 0;

  scrollTopInterval = setInterval( function () {
    console.log( $(window).scrollTop() );

    if ($(window).scrollTop() > 0) {
      weAreReady(); // do stuff, we are ready to go
      clearInterval(t);
    }

    i++;

    // 2 seconds might be way too much (but you said you needed a long delay)
    if (i >= 2000) { clearInterval(scrollTopInterval); }
  }, 1);
});

function weAreReady() {
   alert('we moved down past 0 after refresh');
} 
```

此外，如果用户开始滚动（可能只是第一次加载页面等），请确保我们清除此间隔；

```
$(window).scroll(function () { 
   clearInterval(scrollTopInterval);
}); 
```

这是这个的[jsFiddle](http://jsfiddle.net/8wwWc/)，当然你不能在jsFiddle中**刷新**，所以只需将代码复制到一个html文件或其他东西中（这就是我做测试的方式）。

它似乎有效，如果您已经在页面顶部，一切都很好，如果您再往下看，您会看到 0 弹出然后更高的数字，您会立即收到警报（我们调用我们的函数来运行其余部分页）。

# java - requestLocationUpdates 在之后生成位置..？

> ID：14385880
> 
> 赞同：0
> 
> 时间：2013-01-17T18:40:01.400
> 
> 标签：java, android

我的应用程序出现错误，因此我需要检查每一行以找到导致我提出这个问题的错误：

如果我在 requestLocationUpdates 方法中将 10 秒作为 minTime 发送，该方法将在调用侦听器时开始计数到 ​​10？或者当侦听器方法完成时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:16:20.917

答案其实都不是。在幕后，后台服务处理从硬件获取更新并将它们传递给最终的侦听器。由于多线程，minTime 参数仅表示在最终将消息传递给您的侦听器之前，“硬件”更新消息之间必须经过多少秒。

不建议依赖此内部 10 秒间隔。它只是用作流控制，以确保您不会比需要的更频繁地获得更新。

# dotnetnuke - 从自定义类访问模块设置

> ID：14385886
> 
> 赞同：2
> 
> 时间：2013-01-17T18:40:17.660
> 
> 标签：dotnetnuke, dotnetnuke-module

我在使用 DotNetNuke 7 访问模块设置时遇到问题

```
Settings["mySetting"].ToString(); 
```

来自继承“myModuleBase”的自定义部分类中的方法。我正在使用一个模块开发模板，该模板已经定义了一个名为“view”和“edit”的部分类，它们继承了 myModuleBase 并且能够使用上述内容获取模块设置。

我不明白问题出在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:55:30.773

我在 DNN Community Exchange 上收到了这个答案，所以我想我会在这里发布它以防它帮助其他人

由 DotnetNuke 培训总监 Chris Hammond 提供

> 为了访问设置，请确保您已将 ModuleConfiguration 传递给其他类。
> 
> 你可以通过我的简单文章模块看到一个例子
> 
> [http://dnnsimplearticle.codeplex.com/SourceControl/changeset/view/20228#83727](http://dnnsimplearticle.codeplex.com/SourceControl/changeset/view/20228#83727)

```
var controlToLoad = "Controls/ArticleList.ascx";
if (ArticleId > 0) {
    controlToLoad = "Controls/ArticleView.ascx";
}
var mbl = (dnnsimplearticleModuleBase)LoadControl(controlToLoad);
mbl.ModuleConfiguration = ModuleConfiguration;
mbl.ID = System.IO.Path.GetFileNameWithoutExtension(controlToLoad);
phViewControl.Controls.Add(mbl); 
```

# windows-phone-7 - 如何以编程方式在 Windows Phone 中打开 ApplicationBar

> ID：14385889
> 
> 赞同：2
> 
> 时间：2013-01-17T18:40:44.010
> 
> 标签：windows-phone-7, application-bar

在 Windows Phone 中，如何以编程方式打开 ApplicationBar，让用户在应用程序启动时读取按钮标签，而无需点击角点（“...”）？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T01:10:48.857

据我所知，由于默认行为，您**无法**实现此目的。当`ApplicationBar`用户点击这些点时，它会被用户扩展`'...'`。您将不得不让用户点击三个点，并且无法以编程方式进行操作。

希望在未来，Windows Phone 将允许这样做。

# javascript - Javascript函数检查按键事件的浮点值？

> ID：14385890
> 
> 赞同：0
> 
> 时间：2013-01-17T18:40:48.830
> 
> 标签：javascript, validation, keypress

我是 JavaScript 新手，您能否建议我如何在按键事件中验证浮点值。我试过一个例子，它需要两个'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:43:48.377

这是给你的代码，这个函数可以用于整数和小数

```
<input id="MyTextBox1" onkeypress=' IntegerAndDecimal(event,this,true)' >

function IntegerAndDecimal(e,obj,isDecimal)
{
    if ([e.keyCode||e.which]==8) //this is to allow backspace
    return true;

    if ([e.keyCode||e.which]==46) //this is to allow decimal point
    {
      if(isDecimal=='true')
      {
        var val = obj.value;
        if(val.indexOf(".") > -1)
        {
            e.returnValue = false;
            return false;
        }
        return true;
      }
      else
      {
        e.returnValue = false;
        return false;
      }
    }

    if ([e.keyCode||e.which] < 48 || [e.keyCode||e.which] > 57)
    e.preventDefault? e.preventDefault() : e.returnValue = false; 
} 
```

# ios - sudzc soap客户端反序列化错误

> ID：14385898
> 
> 赞同：0
> 
> 时间：2013-01-17T18:41:21.337
> 
> 标签：ios, soap, sudzc

我在 iOS 应用程序中使用 sudzc soap 客户端。

这是肥皂方法声明

`(SoapRequest*) UploadData: (myid <SoapDelegate>) handler myid: (NSString*) myid props: (NSString*) props`

 `例如，如果我在第二个参数中传递字符串“<test>”，我会收到以下错误：

> a:DeserializationFailed 格式化程序在尝试反序列化消息时抛出异常：反序列化操作“UploadData”的请求消息正文时出错。预期来自命名空间“http://tempuri.org/”的结束元素“道具”。从命名空间“http://tempuri.org/”中找到元素“test”。第 1 行，位置 338。

为什么 sudzc 不能处理字符串参数中的“<”或“>”字符？我必须手动转义这些字符吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:04:08.483

我不认为这个错误与 iOS 或 sudzc 生成器有关。SOAP 使用 XML 进行数据传输，因此您必须根据[XML 规范](http://www.w3.org/TR/xml/)对任何特殊字符进行编码。请参阅[以下答案](https://stackoverflow.com/questions/6898259/whats-all-about-escaping-characters-in-xml)。`

# azure - Windows Azure - 无法加载 StorageClient 框架

> ID：14385909
> 
> 赞同：0
> 
> 时间：2013-01-17T18:42:06.677
> 
> 标签：azure, azure-storage

我已调试并发现无法加载 StorageClient 框架...我收到此错误无法加载文件或程序集 Microsoft.WindowsAzure.StorageClient, Version=1.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:08:47.310

Microsoft.WindowsAzure.StorageClient 1.1.0.0 应该在非常低版本的 Azure SDK 中。目前它应该是 1.7 以及 SDK 1.8 和 2.0 单独的 NuGet 包。

您可以安装最新的 SDK 来解决这个问题。或者，您可能需要将此程序集标记为 Copy Local = true，以便可以将其上传到 azure。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:31:21.470

我确实从我的项目中删除了 StorageClient 1.0 并添加了 StorageClient 1.7

# android - Facebook 与 android sdk 3.0 连接

> ID：14385910
> 
> 赞同：2
> 
> 时间：2013-01-17T18:42:08.637
> 
> 标签：android, facebook, facebook-oauth, facebook-android-sdk

我尝试在我的应用程序中使用 facebook 身份验证，但我无法登录，我总是被重定向到询问我是否允许应用程序访问我的信息的表单（即我的代码中的“dologin”方法..这是我的代码：

```
package com.fbconnect;

import android.app.Activity;
import android.os.Bundle;
import com.facebook.*;
import com.facebook.model.*;
import com.facebook.widget.*;

import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.content.Intent;

public class MainActivity extends Activity {

    private TextView textInstructionsOrLink;
    private Button buttonLoginLogout;

    private Session.StatusCallback statusCallback = new SessionStatusCallback();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        buttonLoginLogout = (Button)findViewById(R.id.login_button);
        setContentView(R.layout.main);
        Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);
        Session session = Session.getActiveSession();
        if (session == null) {
            if (savedInstanceState != null) {
                session = Session.restoreSession(this, null, statusCallback, savedInstanceState);
            }
            if (session == null) {
                session = new Session(this);
            }
            Session.setActiveSession(session);
            if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
                session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
            }
        }

        updateView();

    }

    @Override
    public void onStart() {
        super.onStart();
        Session.getActiveSession().addCallback(statusCallback);
    }

    @Override
    public void onStop() {
        super.onStop();
        Session.getActiveSession().removeCallback(statusCallback);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        Session session = Session.getActiveSession();
        Session.saveSession(session, outState);
    }

    private void updateView() {
        Session session = Session.getActiveSession();
        Log.i("session log", session.toString());
        if (session.isOpened()) {
            TextView welcome = (TextView) findViewById(R.id.welcome);
            welcome.setText("Hello !");
        } else {

            doLogin();
        }
    }

    private void doLogin() {
        Session session = Session.getActiveSession();
        if (!session.isOpened() && !session.isClosed()) {
            session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
        } else {
            Session.openActiveSession(this, true, statusCallback);
        }
    }

    private class SessionStatusCallback implements Session.StatusCallback {
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            updateView();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:48:05.513

问题实际上来自密钥哈希我在 Windows 上遇到了几个愚蠢的问题，这里有一些建议：

*   不要使用windows cmd，通过cygwin来做
*   不要使用 %HOMEPATH% （即使它在 facebook 上显示...），更喜欢长距离：“C:\Users\...\.android\debug.keystore”
*   用引号括住您的密钥库路径（即使其中没​​有空格）
*   如果生成器没有询问您密码，它将无法工作，您在命令中做错了

# ms-access - 基于另一个表中的 2 个字段值访问更新查询

> ID：14385917
> 
> 赞同：0
> 
> 时间：2013-01-17T18:42:25.153
> 
> 标签：ms-access, sql-update

我正在尝试基于单独表中的 2 个字段运行更新查询。我知道如何基于一个字段，添加两个表，在两个相关字段之间创建连接并运行更新。但是，当我尝试使用两个连接运行它时，它说它无法执行，因为它包含不明确的连接。这是我要实现的目标的简短示例

表 1 包含项目的名称、位置和数量。表 2 包含项目数量的名称、位置和空白字段。

当我尝试使用表 1 中的信息更新表 2，并在 2 个名称字段之间连接时，它会为每个不同的位置更新相同数量的项目。

更新：

我已经修复了它，我认为我错误地链接了连接。

这是完成的 SQL 语句：

```
UPDATE Tbl_Hourly_Pick_Performance 
LEFT JOIN Tbl_Temp_Count_Info 
  ON (Tbl_Hourly_Pick_Performance.[Sign On]=Tbl_Temp_Count_Info.[Picker ID]) 
  AND (Tbl_Hourly_Pick_Performance.[Pick Floor]=Tbl_Temp_Count_Info.Floor) 
SET Tbl_Hourly_Pick_Performance.[No of Stores] = Tbl_Temp_Count_Info.Count; 
```

# python - Scipy Binary Closing - 边缘像素失去价值

> ID：14385921
> 
> 赞同：6
> 
> 时间：2013-01-17T18:42:49.657
> 
> 标签：python, image, image-processing, numpy, scipy

我正在尝试填补二进制图像中的漏洞。图像相当大，所以我把它分成块进行处理。

当我使用这些`scipy.ndimage.morphology.binary_fill_holes`功能时，它会填充图像中较大的孔。所以我尝试使用`scipy.ndimage.morphology.binary_closing`，它给出了填充图像中小孔的预期结果。但是，当我将块重新组合在一起以创建整个图像时，我最终会得到接缝线，因为该`binary_closing`函数会从每个块的边界像素中删除任何值。

有什么办法可以避免这种影响？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T18:59:30.550

是的。

1.  `ndimage.label`使用（首先反转图像，孔=黑色）标记您的图像。
2.  找到孔对象切片`ndimage.find_objects`
3.  根据您的大小标准过滤对象切片列表
4.  反转您的图像并`binary_fill_holes`在符合您标准的切片上执行。

应该这样做，而无需将图像切碎。例如：

输入图像：

![在此处输入图像描述](../Images/92280725aa0034e5644896f0b6dda4c6.png)

输出图像（中等大小的孔消失了）：

![在此处输入图像描述](../Images/ee2bfd8376f222a26d75441795f16b44.png)

这是代码（设置不等式以删除中等大小的斑点）：

```
import scipy
from scipy import ndimage
import numpy as np

im = scipy.misc.imread('cheese.png',flatten=1)
invert_im = np.where(im == 0, 1, 0)
label_im, num = ndimage.label(invert_im)
holes = ndimage.find_objects(label_im)
small_holes = [hole for hole in holes if 500 < im[hole].size < 1000]
for hole in small_holes:
    a,b,c,d =  (max(hole[0].start-1,0),
                min(hole[0].stop+1,im.shape[0]-1),
                max(hole[1].start-1,0),
                min(hole[1].stop+1,im.shape[1]-1))
    im[a:b,c:d] = scipy.ndimage.morphology.binary_fill_holes(im[a:b,c:d]).astype(int)*255 
```

另请注意，我必须增加切片的大小，以便孔周围有边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:59:04.270

涉及来自相邻像素的信息的操作，例如`closing`边缘总是会遇到问题。在您的情况下，这很容易解决：只需处理比平铺略大的子图像，并在拼接时保留好的部分。

# iphone - Tapku 日历：需要禁用日期月份更改

> ID：14385922
> 
> 赞同：1
> 
> 时间：2013-01-17T18:42:49.363
> 
> 标签：iphone, ios, objective-c, calendar, tapku

我目前正在使用tapkuCalendar，它运行良好，但我需要做一些设置：

我希望日历在用户单击另一个月份的日期（灰色框，例如：下个月的 1 号或 2 号）时返回选定的日期，而不是当用户单击左箭头或右箭头时（目前它下个月或上个月的第一天还给我）。

您能帮我了解如何配置功能 monthDidChange 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T20:18:36.323

这对我有用：据我所知，您可以根据 [TKCalendarMonthView dateSelected] 的值进行区分，因为当您点击左右箭头时它为 NULL。

所以你的代表最终看起来像这样：

```
- (void)calendarMonthView:(TKCalendarMonthView *)monthView didSelectDate:(NSDate *)d {
    [self handleDateSelection:d];
}

- (void)calendarMonthView:(TKCalendarMonthView *)monthView monthDidChange:(NSDate *)d {
    if ( [monthView dateSelected] == NULL ) {
        NSLog(@"No date selected, genuine month change");
        return;
    }

    [self handleDateSelection:d];
}

-(void) handleDateSelection:(NSDate *)date {
    // do something here
} 
```

# javascript - Dojo 浮动窗格

> ID：14385928
> 
> 赞同：0
> 
> 时间：2013-01-17T18:43:14.087
> 
> 标签：javascript, dojo

我最近开始使用 Dojo 框架，并且必须为网站制作浮动窗格。在google和stackoverflow上搜索后，我遇到了一个很好的例子：

[jsfiddle](http://jsfiddle.net/phusick/3vTXW/)

但问题是每次我最小化浮动窗格然后单击底部的小选项卡再次显示它时，窗格的大小都会增加！它也可以在 jsfiddle 示例中看到，尽管您需要重复多次，因为更改类似于 2px。

有人可以帮我解决这种奇怪的行为吗？JavaScript 代码：

```
dojo.require("dojo.dnd.move");
dojo.require("dojox.layout.FloatingPane");

dojo.ready(function() {

    var ParentConstrainedFloatingPane = dojo.declare(dojox.layout.FloatingPane, {

        postCreate: function() {
            this.inherited(arguments);
            this.moveable = new dojo.dnd.move.parentConstrainedMoveable(
                this.domNode, {
                    handle: this.focusNode,
                    area: "content",
                    within: true
                }
            );                            
        }

    });

    var BoxConstrainedFloatingPane = dojo.declare(dojox.layout.FloatingPane, {

        postCreate: function() {
            this.inherited(arguments);
            this.moveable = new dojo.dnd.move.boxConstrainedMoveable(
                this.domNode, {
                    handle: this.focusNode,
                    box: {l: 10, t: 10, w: 400, h: 400},
                    within: true
                }
            );                            
        }

    });

    var ConstrainedFloatingPane = dojo.declare(dojox.layout.FloatingPane, {

        postCreate: function() {
            this.inherited(arguments);
            this.moveable = new dojo.dnd.move.constrainedMoveable(
                this.domNode, {
                    handle: this.focusNode,
                    constraints: function() {
                        var coordsBody = dojo.coords(dojo.body());
                        // or
                        var coordsWindow = {
                            l: 0,
                            t: 0,
                            w: window.innerWidth,
                            h: window.innerHeight                            
                        };

                        return coordsWindow;
                    },
                    within: true
                }
            );                            
        }

    });

    var searchboxNode = dojo.byId("searchbox");
    var floatingPane = new ParentConstrainedFloatingPane({
        title: "A floating pane",
        resizable: true,
        dockable: true,
        //constrainToContainer: true,
        style: "position:absolute;top:40px;left:40px;width:160px;height:100px;"       
    }, searchboxNode);

    floatingPane.startup();
}); 
```

编辑#1：我已经为它提出了一个官方错误票，可以通过这个链接检查进一步的响应：http: [//bugs.dojotoolkit.org/ticket/16598](http://bugs.dojotoolkit.org/ticket/16598)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T05:48:37.760

那是一个 dojox 浮动窗格错误，我不知道它是否报告过，但是当您直接使用该类时也会发生这种情况

```
dojox.layout.FloatingPane 
```

代替

```
ParentConstrainedFloatingPane 
```

并且如果您更改了 dojo 版本（尝试 1.8.3 进行验证），所以除非您愿意弄乱修复它，否则请尝试向 dojo 报告它，看看它是否已修复。

# java - Java Thread Dump java.lang.Thread.State: TIMED_WAITING（停车）解释

> ID：14385930
> 
> 赞同：3
> 
> 时间：2013-01-17T18:43:30.093
> 
> 标签：java

我对我的应用程序进行了线程转储，该应用程序的 CPU 峰值持续超过 100%，并且我在**java.lang.Thread.State: TIMED_WAITING (parking)**状态中有 30 个线程。以下是转储中的一个示例。有人知道如何解释这些吗？

```
Full thread dump OpenJDK 64-Bit Server VM (14.0-b16 mixed mode):

"hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-31" prio=10 tid=0x00007f143003a800 nid=0x1b07 waiting on condition [0x00007f146c341000]
   java.lang.Thread.State: TIMED_WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
        at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
        at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
        at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:636)

"ajp-8009-Acceptor-0" daemon prio=10 tid=0x00007f14f036a000 nid=0x1b04 runnable [0x00007f146c442000]
   java.lang.Thread.State: RUNNABLE
        at org.apache.tomcat.jni.Socket.accept(Native Method)
        at org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:1156)
        at java.lang.Thread.run(Thread.java:636)

"ajp-8009-CometPoller-0" daemon prio=10 tid=0x00007f14f0ca3000 nid=0x1b03 in Object.wait() [0x00007f146c543000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:502)
        at org.apache.tomcat.util.net.AprEndpoint$Poller.run(AprEndpoint.java:1313)
        - locked <0x00007f148e6ab818> (a org.apache.tomcat.util.net.AprEndpoint$Poller)
        at java.lang.Thread.run(Thread.java:636)

"ajp-8009-Poller-0" daemon prio=10 tid=0x00007f14f05b3000 nid=0x1b02 in Object.wait() [0x00007f146c644000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:502)
        at org.apache.tomcat.util.net.AprEndpoint$Poller.run(AprEndpoint.java:1313)
        - locked <0x00007f148e67b438> (a org.apache.tomcat.util.net.AprEndpoint$Poller)
        at java.lang.Thread.run(Thread.java:636)

"http-8080-Acceptor-0" daemon prio=10 tid=0x00007f14f0953000 nid=0x1b01 runnable [0x00007f146c745000]
   java.lang.Thread.State: RUNNABLE
        at org.apache.tomcat.jni.Socket.accept(Native Method)
        at org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:1156)
        at java.lang.Thread.run(Thread.java:636)

"http-8080-Sendfile-0" daemon prio=10 tid=0x00007f14f05b0000 nid=0x1b00 in Object.wait() [0x00007f146d460000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:502)
        at org.apache.tomcat.util.net.AprEndpoint$Sendfile.run(AprEndpoint.java:1771)
        - locked <0x00007f148e5c7ac8> (a org.apache.tomcat.util.net.AprEndpoint$Sendfile)
        at java.lang.Thread.run(Thread.java:636)

"http-8080-CometPoller-0" daemon prio=10 tid=0x00007f14f0c03800 nid=0x1aff in Object.wait() [0x00007f146d35f000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:502)
        at org.apache.tomcat.util.net.AprEndpoint$Poller.run(AprEndpoint.java:1313)
        - locked <0x00007f148e5c7700> (a org.apache.tomcat.util.net.AprEndpoint$Poller)
        at java.lang.Thread.run(Thread.java:636)

"http-8080-Poller-0" daemon prio=10 tid=0x00007f14f099e800 nid=0x1afe in Object.wait() [0x00007f146d25e000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:502)
        at org.apache.tomcat.util.net.AprEndpoint$Poller.run(AprEndpoint.java:1313)
        - locked <0x00007f148e5a39e8> (a org.apache.tomcat.util.net.AprEndpoint$Poller)
        at java.lang.Thread.run(Thread.java:636)

"ContainerBackgroundProcessor[StandardEngine[Catalina]]" daemon prio=10 tid=0x00007f14f0a01000 nid=0x1afd waiting on condition [0x00007f146d561000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
        at java.lang.Thread.sleep(Native Method)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1579)
        at java.lang.Thread.run(Thread.java:636)

        hz.2.threads._hzInstance_2_dev.cached.thread-1" prio=10 tid=0x00007f14651bc000 nid=0x1afc waiting on condition [0x00007f146c846000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f149609a970> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "Mojarra-ResourceCache-1-thread-1" daemon prio=10 tid=0x00007f14f068f000 nid=0x1afb waiting on condition [0x00007f146d965000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f1491c8b7b0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2081)
            at java.util.concurrent.DelayQueue.take(DelayQueue.java:193)
            at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:688)
            at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:681)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-30" prio=10 tid=0x00007f1430039000 nid=0x1af5 waiting on condition [0x00007f146d662000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.TCP.Listener" prio=10 tid=0x00007f14f088c800 nid=0x1af4 runnable [0x00007f146d763000]
       java.lang.Thread.State: RUNNABLE
            at java.net.PlainSocketImpl.socketAccept(Native Method)
            at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:375)
            at java.net.ServerSocket.implAccept(ServerSocket.java:470)
            at com.hazelcast.impl.management.ManagementCenterService$SocketReadyServerSocket.doAccept(ManagementCenterService.java:585)
            at com.hazelcast.impl.management.ManagementCenterService$TCPListener.run(ManagementCenterService.java:173)

    "hz.UDP.Sender" prio=10 tid=0x00007f14f0d13000 nid=0x1af3 waiting on condition [0x00007f146d864000]
       java.lang.Thread.State: TIMED_WAITING (sleeping)
            at java.lang.Thread.sleep(Native Method)
            at com.hazelcast.impl.management.ManagementCenterService$UDPSender.run(ManagementCenterService.java:228)

    "hz.UDP.Listener" prio=10 tid=0x00007f14f04fd000 nid=0x1af2 runnable [0x00007f146de6a000]
       java.lang.Thread.State: RUNNABLE
            at java.net.PlainDatagramSocketImpl.receive0(Native Method)
            - locked <0x00007f1495f28108> (a java.net.PlainDatagramSocketImpl)
            at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:135)
            - locked <0x00007f1495f28108> (a java.net.PlainDatagramSocketImpl)
            at java.net.DatagramSocket.receive(DatagramSocket.java:729)
            - locked <0x00007f1496029668> (a java.net.DatagramPacket)
            - locked <0x00007f1496015fb0> (a java.net.DatagramSocket)
            at com.hazelcast.impl.management.ManagementCenterService$UDPListener.run(ManagementCenterService.java:197)

    "hz.2.MulticastThread" prio=10 tid=0x00007f14f080f800 nid=0x1af0 runnable [0x00007f146da66000]
       java.lang.Thread.State: RUNNABLE
            at java.io.DataInputStream.readFully(DataInputStream.java:195)
            at java.io.DataInputStream.readUTF(DataInputStream.java:609)
            at java.io.DataInputStream.readUTF(DataInputStream.java:564)
            at com.hazelcast.config.GroupConfig.readData(GroupConfig.java:118)
            at com.hazelcast.config.Config.readData(Config.java:641)
            at com.hazelcast.cluster.JoinRequest.readData(JoinRequest.java:68)
            at com.hazelcast.cluster.JoinInfo.readData(JoinInfo.java:59)
            at com.hazelcast.impl.MulticastService.receive(MulticastService.java:128)
            - locked <0x00007f1496026d98> (a java.lang.Object)
            at com.hazelcast.impl.MulticastService.run(MulticastService.java:101)
            at java.lang.Thread.run(Thread.java:636)

    "hz.2.ServiceThread" prio=10 tid=0x00007f14f0a0f800 nid=0x1aef in Object.wait() [0x00007f146db67000]
       java.lang.Thread.State: TIMED_WAITING (on object monitor)
            at java.lang.Object.wait(Native Method)
            at com.hazelcast.cluster.ClusterService.run(ClusterService.java:168)
            - locked <0x00007f1496026db0> (a java.lang.Object)
            at java.lang.Thread.run(Thread.java:636)

    "hz.2.OutThread" prio=10 tid=0x00007f14f068b800 nid=0x1aee runnable [0x00007f146dc68000]
       java.lang.Thread.State: RUNNABLE
            at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
            at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:230)
            at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:83)
            at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
            - locked <0x00007f1496026dc8> (a sun.nio.ch.Util$1)
           - locked <0x00007f1496026de0> (a java.util.Collections$UnmodifiableSet)
            - locked <0x00007f14952a5b98> (a sun.nio.ch.EPollSelectorImpl)
            at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
            at com.hazelcast.nio.SelectorBase.run(SelectorBase.java:124)
            at java.lang.Thread.run(Thread.java:636)

    "hz.2.InThread" prio=10 tid=0x00007f14f0a99000 nid=0x1aed runnable [0x00007f146dd69000]
       java.lang.Thread.State: RUNNABLE
            at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)
            at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:230)
            at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:83)
            at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:87)
            - locked <0x00007f1496026df8> (a sun.nio.ch.Util$1)
            - locked <0x00007f1496026e10> (a java.util.Collections$UnmodifiableSet)
            - locked <0x00007f14952a5c10> (a sun.nio.ch.EPollSelectorImpl)
            at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:98)
            at com.hazelcast.nio.SelectorBase.run(SelectorBase.java:124)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-29" prio=10 tid=0x00007f1430037000 nid=0x1aea waiting on condition [0x00007f146df6b000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-28" prio=10 tid=0x00007f1430035000 nid=0x1ae9 waiting on condition [0x00007f146e06c000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
           at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-27" prio=10 tid=0x00007f1430033000 nid=0x1ae8 waiting on condition [0x00007f146e16d000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-26" prio=10 tid=0x00007f1430031000 nid=0x1ae7 waiting on condition [0x00007f148818d000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-25" prio=10 tid=0x00007f143002f000 nid=0x1ae6 waiting on condition [0x00007f148828e000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-24" prio=10 tid=0x00007f143002d000 nid=0x1ae5 waiting on condition [0x00007f148838f000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-23" prio=10 tid=0x00007f143002b000 nid=0x1ae4 waiting on condition [0x00007f1488490000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-22" prio=10 tid=0x00007f1430029000 nid=0x1ae3 waiting on condition [0x00007f1488591000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-21" prio=10 tid=0x00007f1430027000 nid=0x1ae2 waiting on condition [0x00007f1488692000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-20" prio=10 tid=0x00007f1430025000 nid=0x1ae1 waiting on condition [0x00007f1488793000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-19" prio=10 tid=0x00007f1430023000 nid=0x1ae0 waiting on condition [0x00007f1488894000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-18" prio=10 tid=0x00007f1430021000 nid=0x1adf waiting on condition [0x00007f1488995000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)

    "hz.1.threads._hzInstance_1_spot-gen2-prod.cached.thread-17" prio=10 tid=0x00007f143001f000 nid=0x1ade waiting on condition [0x00007f1488a96000]
       java.lang.Thread.State: TIMED_WAITING (parking)
            at sun.misc.Unsafe.park(Native Method)
            - parking to wait for  <0x00007f14932fd3a0> (a java.util.concurrent.SynchronousQueue$TransferStack)
            at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
            at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:453)
            at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:352)
            at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:903)
            at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636) 
```

# javascript - 条件内部 for 循环不通过。为什么？

> ID：14385932
> 
> 赞同：0
> 
> 时间：2013-01-17T18:43:34.420
> 
> 标签：javascript, jquery, for-loop, conditional-statements

我无法弄清楚是什么问题，请帮助。

传入了新的 Num，控制台日志显示它正在为 activeSlide 找到正确的元素

```
var activeSlide = $("#ep"+newNum);

for (var i=0; i< allSlides.length; i++){

    var slidegrab = $("#ep"+i);

    console.log(slidegrab == activeSlide)
    if (slidegrab == activeSlide){
        console.log("stop loop and stop shuffle");
        return;
    } else {
        slidegrab.appendTo('#slideshow');
    }
} 
```

我的控制台将为 slidegrab 和 activeSlide 变量显示正确的名称。对于每个循环，条件将显示为假，从不为真。我错过了什么？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:46:21.587

它们是两个不同的 jQuery 对象。您需要比较 DOM 元素。

```
slidegrab[0] === activeSlide[0] 
```

或者，也许您想按索引而不是按元素跟踪当前幻灯片。这更常见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T18:47:21.107

您可以比较 id 而不是包装器：

```
var activeSlide = $("#ep"+newNum);

for (var i=0; i< allSlides.length; i++){

    var slidegrab = $("#ep"+i);

    if (newNum== i){
        console.log("stop loop and stop shuffle");
        return;
    } else {
        slidegrab.appendTo('#slideshow');
    }
} 
```

# php - PHP Foreach 和未设置变量

> ID：14385941
> 
> 赞同：1
> 
> 时间：2013-01-17T18:43:50.973
> 
> 标签：php, mysql, foreach, pdo

我将 PDO 准备参数数组传递到 foreach 语句中，以便我可以修改数据。我正在根据前缀修改一些数据。这是我的代码中的示例：

```
foreach($param as $key => $t)
{
    if(strpos($key,"int")===0)
    {
        $t = (int) $param[$key];
        $key = str_replace("int","",$key);
        unset($param[$key]);
        $param[$key] = $t;
    }
} 
```

我不确定如何取消设置以 int 为前缀的数组元素，并且由于 PDO 错误，我无法执行查询：

```
Invalid parameter number: number of bound variables does not match number of tokens 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T18:45:02.797

你需要`unset($param[$key])`在你改变之前`$key`。

# ember.js - Emberjs：防止更改在整个事务中传播

> ID：14385950
> 
> 赞同：2
> 
> 时间：2013-01-17T18:44:25.667
> 
> 标签：ember.js, ember-data

我有一个场景，我在页面中列出产品并允许用户仅在模式窗口中编辑产品的属性。

当用户单击产品并开始编辑产品的属性时，更改会立即传播到产品列表页面中的产品以及直接或间接绑定到正在更改的属性的页面的任何部分。不是期望的行为。仅当用户确认更改（即单击保存按钮、事务提交和模式窗口关闭）时才应传播更改

```
transaction: APP.store.transaction(),

renderTemplate:function(controller, record) {
    this.transaction.add(record);
    // append the modal view
    App.ModalView.create().append();        
},

onSaveClick: function(record) {
    this.transaction.commit();
    this.transitionTo('products');
}, 
```

理想情况下，我需要指示 Ember 停止传播对产品的任何更改，直到提交事务。我尝试使用 beginPropertyChanges 和 endPropertyChanges 来推迟以这种方式通知任何相关观察者：

```
renderTemplate:function(controller, record) {        
    this.transaction.add(record);
    record.beginPropertyChanges();
    // append the modal view
    App.ModelView().create().append();        
},

onSaveClick: function(record) {
    record.endPropertyChanges();
    this.transaction.commit();
    this.transitionTo('products');
}, 
```

这可以防止更改传播到列表，但是事务没有提交，并且当模式窗口关闭时项目仍然是脏的。

我很确定我没有正确使用它。只要项目未提交，如其 currentState 所反映，我需要一种方法来使更改远离商店

使用项目状态 isDirty 无助于解决此问题，因为当使用它时，项目会从列表中完全删除，这是不可接受的。

```
 {{#each item in controller}}
   {{#unless item.isDirty}}
     {{item.name}}
   {{/unless}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:53:24.317

它与您正在编辑的对象**完全相同**，因为您正在输入的文本字段绑定到属性，并且主列表中的表示也绑定到它们都被更新的相同属性。

Ember-data 负责将对象持久化到后端，而不是在应用程序的状态之间。

你应该看看[这个](http://www.solitr.com/blog/2012/06/ember-input-field-with-save-button/)。它解释了如何制作一个惰性文本字段对象，该对象不会立即使用绑定更新对象，而是仅在单击保存按钮后才更新。

# javascript - mikeal 请求仅返回部分 h tml 正文

> ID：14385956
> 
> 赞同：1
> 
> 时间：2013-01-17T18:44:35.430
> 
> 标签：javascript, node.js, web-scraping

我正在做一个简单的获取请求，但我的代码只返回网页 html 的“块”。我认为“请求”应该负责缓冲并返回单个字符串？

```
var request = require('request');
    request("EXAMPLE-URL", function (error, response, body) {
    if (!error && response.statusCode == 200) {
         console.log(body);
    }
}); 
```

# php - 嵌入式数据集的 mySQL INSERT 和 SELECT 查询

> ID：14385959
> 
> 赞同：0
> 
> 时间：2013-01-17T18:44:55.503
> 
> 标签：php, mysql, select, group-by

我正在尝试使用此 JSON 数据编写一个高效的 mySQL INSERT 查询（为清楚起见，转换为 JSON）：

```
[
    {
        "job": "Avocado Books Binding",
        "tasks": [
            "Finish collating the signatures",
            "Fix perfect binders",
            "Fold signatures"
        ]
    },
    {
        "job": "Prepress Workflow Development",
        "tasks": [
            "Research new proofing machines",
            "Find free proofing software"
        ]
    }
] 
```

生成的表结构将是（使用此数据）

```
Table: Jobs
job_id   job_title
1        Avocado Books Binding
2        Prepress Workflow Development

Table: Tasks
task_id   task_description                    job_id
1         Finish collating the signatures     1
2         Fix perfect binders                 1
3         Fold signatures                     1
4         Research new proofing machines      2
5         Find free proofing software         2 
```

作业和任务通过 job_id 关联的位置。

我也在尝试编写一个 SELECT 查询，以一种高效的方式获取这些数据。

**非常感谢任何帮助、参考或建议。**

更新：

**结构为 PHP 数组**

```
Array
(
    [0] => Array
        (
            [job] => Avocado Books Binding
            [tasks] => Array
                (
                    [0] => Finish collating the signatures
                    [1] => Fix perfect binders
                    [2] => Fold signatures
                )

        )

    [1] => Array
        (
            [job] => Avocado Books Binding
            [tasks] => Array
                (
                    [0] => Finish collating the signatures
                    [1] => Fix perfect binders
                    [2] => Fold signatures
                )

        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:54:57.313

如果禁用 PDO 的准备好的语句模拟，那么重复执行此类（服务器端准备好的）语句将比多个未准备好的语句更有效：

```
$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE);

$insert_job = $dbh->prepare('
  INSERT INTO Jobs (job_title) VALUES (?)
');

$insert_task = $dbh->prepare('
  INSERT INTO Tasks (task_description, job_id) VALUES (:desc, :id)
');

$insert_task->bindParam(':desc', $task  , PDO::PARAM_STR);
$insert_task->bindParam(':id',   $job_id, PDO::PARAM_INT);

foreach (json_decode($json, TRUE) as $job) {
  $insert_job->execute([$job['job']]);
  $job_id = $insert_job->lastInsertId();
  foreach ($job['tasks'] as $task) $insert_task->execute();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:51:13.667

试试这个：

```
SELECT j.job_id, GROUP_CONCAT(t.task_description) task 
FROM jobs j 
INNER JOIN tasks ON j.job_id = t.job_id 
GROUP BY j.job_id; 
```

# vb6 - winsock remoteport和winsock localport visual basic 6的区别

> ID：14385963
> 
> 赞同：0
> 
> 时间：2013-01-17T18:45:13.483
> 
> 标签：vb6, winsock

我搜索了互联网但没有得到答案可以解释一下它们之间的区别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:41:39.080

服务器侦听本地端口，而客户端从本地端口发送数据。客户端远程端口应该与服务器本地端口相同。即：服务器侦听端口 n（相对于服务器的本地端口）客户端连接到端口 n 上的服务器（相对于客户端的远程端口）

要回答您的问题，区别在于名称，基于视角。

[这似乎是开始 VB6 套接字通信的好地方](http://www.osix.net/modules/article/?id=25)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:15:33.853

TCP“连接”是一个 4 元组。本地 IP、本地端口、远程 IP 和远程端口。每一端都在其 TCP 堆栈中维护此标识，但意义相反（本地与远程）。

这 4 个值的组合必须是唯一的。这解释了人们在编写一个重用套接字重新连接到同一服务器的 TCP 客户端时经常遇到的问题。

“关闭”连接会将此 ID 在每一端的表中保留一段时间，处于 TIME_WAIT 状态。这是 TCP 机制的产物，即使物理层连接中断，也可以保持连接完整性，防止挂起的数据包被第二个连接接收等。TIME_WAIT 可以持续长达 4 分钟。

除非客户端将其套接字的 LocalPort 重置为 0（这是对自动临时端口分配的请求），否则如果在 TIME_WAIT 到期之前尝试重新连接，它可能会失败。由于新创建的套接字为 0，因此程序员在调用 Connect 之前经常会忽略此要求。

LocalPort 不仅仅是监听套接字的问题。

# javascript - 用jquery滚动底部div

> ID：14385971
> 
> 赞同：1
> 
> 时间：2013-01-17T18:45:48.257
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 jQuery 滚动到包含大量文本的 div 的底部](https://stackoverflow.com/questions/3742346/use-jquery-to-scroll-to-the-bottom-of-a-div-with-lots-of-text)

我有一个 div 从数据库中加载一些评论。div 的高度以 em 而不是 px 表示。它还启用了溢出。

当我写评论并给它充电时，我希望滚动移动到 div 的末尾。在成功使用`$("# boxcoment"). ScrollTop (400)`并正常工作时，我会自动移动滚动条。

但我与 em 一起工作，想知道是否`.scrollTop()`与 em 一起工作，或者是否有另一种方法可以向下滚动到 div 的末尾。

我也试过：

```
height = $("#boxcoment").height();
$("#boxcoment").scrollTop(height); 
```

但卷轴只是中途停止。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:54:52.397

您可以使用`scrollHeight`DOM Element 对象的属性。

> 元素滚动视图的高度；它包括元素填充但不包括其边距。

```
var $box = $('#boxcoment'); 
var height = $box.get(0).scrollHeight;
$box.scrollTop(height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:49:01.197

试试这个：

```
 var docHeight = $(document).height();

  $("#boxcoment").scrollTop(docHeight);
  //or
  $('html, body').animate({ scrollTop:docHeight+'px'},444); 
```

# c# - 如何加快大 Linq 查询的计数？

> ID：14385972
> 
> 赞同：4
> 
> 时间：2013-01-17T18:45:57.267
> 
> 标签：c#, .net, linq

我有一些字节数组列表，我用 Linq 组合/检查它们。这些列表和数组的长度可以不同。问题是当我尝试计算结果时。此外，如果我添加了`.Take(1)`子句，事情也不会改变。我将发布一些代码以便更好地理解`Permute()`。函数将返回该特定数组的所有排列。

```
List<byte[]> firstList =new List<byte[]>();
List<byte[]> secondList=new List<byte[]>();
List<byte[]> thirdList =new List<byte[]>();

 IEnumerable<byte[]> sql = (
                            from rid in firstList
                            from s in secondList
                            from p in thirdList
                            from per in Permute(s)
                            where per.SequenceEqual(p)
                            select rid  
                           );

IEnumerable<byte[]> result = (from s in sql
                              where sql.Count(item =>item.SequenceEqual(s)) == 10
                              select s.ToArray()
                             ).Take(1);
if (result.Count() != 0)
{
  byte[] myByte=result.First();
//Do something
} 
```

当我执行`result.Count()!=0`和`myByte=result.First()`等待时间可能需要一个小时，如果我限制列表（前十个元素，第二个 150 和第三个 200）。那么，有什么方法可以加快计数速度，或者以`result`“快速”的方式检查是否包含某些内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T18:47:23.077

您可以通过调用将时间减半，如果没有结果`result.FirstOrDefault()`，它将返回。`null`

这意味着您只需要迭代一次，这意味着您永远不需要迭代整个集合（不像`.Count()`）

* * *

您还可以通过编写高效`IEqualityComparer<byte[]>`和调用`sql.ToLookup()`而不是`.Count()`在第二个查询中来使查询本身更快。

# java - 是否可以创建一个可以为任何具体类添加功能的动态代理？

> ID：14385973
> 
> 赞同：2
> 
> 时间：2013-01-17T18:45:57.647
> 
> 标签：java, netty, shiro, javassist, dynamic-proxy

我将在下面简要概述我的目标，以防万一有更好的替代方法来实现我想要的。 [这个问题](https://stackoverflow.com/questions/3291637/alternatives-to-java-lang-reflect-proxy-for-creating-proxies-of-abstract-classes)与我需要的非常相似，但并不完全是我需要的。我的问题...

我有一个界面：

```
public interface Command<T> extends Serializable {} 
```

..加上一个实现：

```
public class EchoCommand implements Command<String> {
    private final String stringToEcho;

    public EchoCommand(String stringToEcho) {
        this.stringToEcho = stringToEcho;
    }

    public String getStringToEcho() {
        return stringToEcho;
    }
} 
```

如果我创建另一个接口：

```
public interface AuthorizedCommand {
    String getAuthorizedUser();
} 
```

..有没有办法在不知道子类类型的情况下在运行时在 EchoCommand 上实现 AuthorizedCommand 接口？

```
public <C extends Command<T>,T> C authorize(C command) {
    // can this be done so the returned Command is also an
    // instance of AuthorizedCommand?
    return (C) theDecoratedCommand;
} 
```

为什么...我使用 Netty 为自己构建了一个非常简单的基于命令的概念验证客户端/服务器框架。在客户端和服务器之间共享的命令与命令处理程序之间存在一对一的关系。处理程序仅在服务器上，它们实现起来非常简单。这是界面。

```
public interface CommandHandler<C extends Command<T>,T> {
    public T execute(C command);
} 
```

在客户端，事情也非常简单。在客户端保持简单是我决定尝试基于命令的 API 的主要原因。客户端发送命令并返回 Future。很明显，调用是异步的，而且客户端没有处理诸如将调用包装在`SwingWorker`. 为什么要针对异步调用（网络上的任何内容）构建同步 API 只是为了将同步调用包装在异步辅助方法中？我为此使用番石榴。

```
public <T> ListenableFuture<T> dispatch(Command<T> command) 
```

现在我想添加身份验证和授权。我不想强迫我的命令处理程序了解授权，但在某些情况下，我希望他们能够询问有关正在为哪个用户执行命令的*某些内容。*主要是我希望能够`lastModifiedBy`对某些数据具有属性。

我正在考虑使用 Apache Shiro，所以显而易见的答案似乎是使用它们`SubjectAwareExecutor`来获取授权信息`ThreadLocal`，但是我的处理程序需要了解 Shiro，或者我需要通过找到某种映射命令的方式来抽象它Shiro 中的认证/授权信息。

由于每个命令都已经携带状态并通过我的整个管道传递，如果我可以装饰已授权的命令以便它们实现 AuthorizedCommand 接口，事情就会简单得多。然后我的命令处理程序可以使用已装饰的信息，但它是完全可选的。

```
if(command instanceof AuthorizedCommand) {
    // We can interrogate the command for the extra meta data
    // we're interested in.
} 
```

这样，我还可以独立于我的应用程序的核心业务逻辑开发与身份验证/授权相关的所有内容。它还会（我认为）让我将会话信息与 Netty 相关联，`Channel`或者`ChannelGroup`我认为这对 NIO 框架更有意义，对吧？我认为 Netty 4 甚至可能允许在一个`Channel`听起来很适合跟踪会话信息之类的东西上设置类型属性（不过我还没有研究过）。

我想要完成的主要事情是能够非常快速地构建应用程序的原型。我想从客户端调度程序开始，它是命令类型到命令处理程序的简单映射，完全忽略了事物的网络和安全方面。一旦我对我的原型感到满意，我将换入基于 Netty 的调度程序（使用 Guice），然后，在开发周期的后期，我将添加 Shiro。

我非常感谢任何评论或建设性的批评。如果我解释的内容有意义并且在普通的旧 Java 中是不可能的，我会考虑在另一种 JVM 语言中构建该特定功能。也许是斯卡拉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T12:56:53.757

你可以尝试做这样的事情：

[Java：在运行时扩展类](https://stackoverflow.com/questions/10046056/java-extending-class-at-runtime)

在运行时，您的代码将扩展要实例化的 Command 类并实现 AuthorizedCommand 接口。这将使该类成为 AuthorizedCommand 的实例，同时保留原始的 Command 类结构。

需要注意的一件事是，您将无法使用“final”关键字扩展任何类。

# r - ggplot中x轴值的颜色点

> ID：14385974
> 
> 赞同：1
> 
> 时间：2013-01-17T18:46:02.477
> 
> 标签：r

我有以下代码来制作我的数据图表：

```
library(ggplot2)
library(reshape)

sdata <- read.csv("http://dl.dropbox.com/u/58164604/sdata.csv", stringsAsFactors = FALSE)
pdata<-melt(sdata, id.vars="Var")
p<-ggplot(pdata, aes(Var,value,col=variable))
p+geom_point(aes(shape = variable),alpha=0.7) 
```

这将创建一个图表，其中“Var”为 x 轴，“值”为 y 轴。我想做的是改变点的颜色。我希望它们不是变量名，而是它们的“Var”值。所以我希望 Var 值在 1-10 之间的所有点都是一种颜色，11-20 是另一种颜色，以此类推 21-30、31-35 和 36-41。我还希望在这些点后面有一个带阴影的色带/区域，从每个 Var 值的最高值到最低值延伸，但是这个色带也必须与这些点具有相同的颜色，只是透明度较低等级。

对于一个额外的问题，我也无法从我的示例中获取“平均”变量以显示为 geom_line 而不是 geom_point。我一直在玩这个：

```
 p+geom_point()+geom_line(data=pdata[which(pdata$variable=="Mean")]) 
```

但我无法让它工作。如果有人可以提供任何帮助，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:36:36.620

使用`cut`with options `labels=F`，我添加了一个用于着色的新变量。

```
pdata <- transform(pdata,varc =cut(pdata$Var,10,labels=F))
p<-ggplot(subset(pdata,variable!='Mean'), aes(Var,value,col=varc))
p+geom_point(aes(shape = variable),alpha=0.7)+
 geom_line(data=subset(pdata,variable =='Mean'),size=2) 
```

**编辑：功能区部分**

我不明白功能区的一部分（也许如果你能更多地解释上下值），但我认为在这里我们可以简单地使用 geom-polygon

```
last_plot()+ geom_polygon(aes(fill=varc, group=variable),alpha=0.3,linetype=3) 
```

![在此处输入图像描述](../Images/0f95f015d1f85bff176017ea6129f43c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:14:47.050

关于您的第一个问题，您可以使用该`cut`功能将连续数据分类。例如：

```
with(mtcars, cut(mpg, seq(min(mpg), max(mpg), length = 5)) 
```

这会将`mpg`列中的连续值分成 5 个类。

# php - 使用需要 MySQL 查询 + PHP 的 AJAX 刷新 DIV

> ID：14385979
> 
> 赞同：0
> 
> 时间：2013-01-17T18:46:14.400
> 
> 标签：php, mysql, ajax, jquery, web

我目前正在开发一个主要使用 PHP/MySQL 和 HTML5 编码的网站，以此来学习代码并变得更好。我曾经在一个使用 AJAX 重新加载最新帖子的论坛工作，就好像用户刚刚刷新了网页一样，只是它只是动态更改了内容而没有完全重新加载。

我的网页：http: [//vgrnews.com](http://vgrnews.com)

我的具体情况如下：首页从 MySQL DB 加载四个最新公告和（即将）评论，并显示它们最快 -> 最新。它位于名为 maincontent 的 div 中。

我想做的事：无论用户是否刷新，都让公告通过 AJAX 动态显示。它可能会大约每 5-10 秒轮询一次服务器。

我不打算像那样保持主页刷新，但是一旦我添加更多内容，最好知道如何定期刷新 div。我已经阅读了 AJAX，但我不太了解所有的后勤工作，他们只是给你代码并希望你拿起它。如果我不理解，很难修改代码以适用于我的网站。

很抱歉长时间阅读并感谢所有回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:52:37.690

```
function reload_content() {
  $('#latest_post').load('ajax/get_latest.php');
}

window.setInterval(reload_content, 10000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:04:56.187

我将为您澄清亚历山大的回答。load() 函数所做的是对给定的 URL 执行 AJAX 请求，然后将所选 div(s) 的 HTML 设置为返回的内容。这意味着您的服务器应该返回正确的 HTML（并且只返回您想要在该 div 中的 HTML）。

您可以查看[http://api.jquery.com/load/](http://api.jquery.com/load/)了解有关 load() 的更多信息。

如果您计划让服务器返回信息的 JSON（或 XML）表示，则必须使用 jQuery get() (http://api.jquery.com/get/)，然后处理返回的数据带有回调。

请注意，get() 和 load() 都只是 jQuery ajax() 方法的隐式应用 (http://api.jquery.com/jQuery.ajax/)

编辑：

setTimeout 只是让浏览器每 x 毫秒调用一次函数。这就是它每 x 秒检查一次的内容。

# prolog - Prolog - 降序列表

> ID：14385988
> 
> 赞同：1
> 
> 时间：2013-01-17T18:46:43.120
> 
> 标签：prolog

我正在尝试编写一个函数 -它按降序`decListRange(X,List)`给出范围内的列表。`[X-1:1]`例如 -
`decListRange(9,List).`

会给 -

```
List = [8,7,6,5,4,3,2,1]. 
```

我尝试了以下但它进入无限循环 -

```
decListRange(1,[]) :- !. 
decListRange(X,[H|Rest]) :-
    H  = X-1, NextX = X - 1 ,decListRange(NextX,Rest). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:53:52.113

你有两个问题。第一个真正的问题是您需要使用`is`而不是`=`：

```
H is X-1 
```

这是触发算术评估所必需的。您的第二个问题不是真正的问题，而是说明了一个更大的误解，那就是`H`并且`NextX`是等效的。因为 Prolog 只有绑定而不是“可赋值”，所以您永远不需要创建两个具有相同绑定的“变量”。没有保留状态供您以后修改。

清理两个你得到这个：

```
decListRange(1, []) :- !.
decListRange(X, [H|Rest]) :-
  X > 1,
  H is X-1,
  decListRange(H, Rest). 
```

**编辑 2**：clpfd 实现

```
:- use_module(library(clpfd)).

declist(N, L) :- N == 1, !, L = []. % green cut
declist(1, []). 
declist(N, [N1|Ns]) :- 
  N #> 1, 
  N1 #= N - 1, 
  declist(N1, Ns). 
```

这个具有@false 在评论中提到的属性：

```
?- declist(3, L).
L = [2, 1] ;
false.

?- declist(3, [2,1]).
true ;
false.

?- declist(N, [3,2,1]).
N = 4.

?- declist(N, X).
N = 1,
X = [] ;
N = 2,
X = [1] ;
N = 3,
X = [2, 1] ;
N = 4,
X = [3, 2, 1] ;
N = 5,
X = [4, 3, 2, 1] . 
```

**编辑**`=`：关于和之间区别的简短插曲`is`。

在过程语言`=`中，几乎总是将特定值分配给变量的语法。在 Prolog 中，变量是绑定，一旦建立，就不能通过重新分配不同的值来直接修改它们。相反，它们更像数学和逻辑中的变量，其中变量“代表”有趣的值，但这些值本身基本上是不可变的。在 Prolog 中，`=`本质上是要求统一引擎建立绑定。因此，如果您要执行以下操作：

```
?- name(X, Y) = name(bob, tony). 
```

Prolog 以变量绑定响应：

```
X = bob,
Y = tony. 
```

一旦存在这些绑定，矛盾的绑定将失败，而肯定的绑定将成功：

```
?- name(X, Y) = name(bob, tony), X = bob.
X = bob,
Y = tony.

?- name(X, Y) = name(bob, tony), X = william.
false. 
```

统一算法本身对算术一无所知。这具有令人愉快的副作用，您可以使用任何原始表达式。例如：

```
?- Expr = X + 3, Z + Q = Expr.
Expr = Z+3,
X = Z,
Q = 3. 
```

这可能真的很令人惊讶。你可能会期望 Prolog 足够聪明地保留表达式，因为它注意到 X 是一个变量或其他东西，但这也不是真的：

```
?- X = 4, Expr = X + 3, Z + Q = Expr.
X = 4,
Expr = 4+3,
Z = 4,
Q = 3. 
```

另一种看待这一点的方式是，Prolog 认为`+`只是另一个运算符，所以这样`X+3`的事实`add(X, 3)`并不一定有任何特殊含义。无论您以哪种方式看待它，`is/2`运算符的存在都是为了应用算术推理并产生一个值：

```
?- X = 4, Expr is X + 3.
X = 4,
Expr = 7. 
```

请注意，Expr 具有计算值，但没有原始结构：

```
?- X = 4, Expr is X + 3, Z + Q = Expr.
false. 
```

在实践中，如果您需要对算术进行大量推理，您将需要使用类似`clpfd`或`clpqr`取决于您是否对整数或实数感兴趣的库。该库使您能够更轻松地做更多有趣的事情，例如指定一个方程对某个范围内的值成立并取出这些值。

# nhibernate - QueryOver 的多个子查询

> ID：14385989
> 
> 赞同：0
> 
> 时间：2013-01-17T18:46:45.370
> 
> 标签：nhibernate, queryover

我需要帮助将此 sql 查询转换为 QueryOver Nhibernate 条件。

```
select distinct * from event e where e.name like '%req%' 
or e.Id in (select r.eventId from requirement r where r.name like '%req%') 
or e.Id in (select r.eventId from requirement r where r.id 
in (select s.requirementId from solution s where s.name like '%sol%'))

var queryOver = session.QueryOver<Event>()
                       .Where(x => x.Name.IsInsensitiveLike("%"+searchTerms[1]+"%"))
                       .OrderBy(x => x.CreatedOn).Asc; 
```

到目前为止，我有主要查询，但找不到足够的关于如何添加子查询的参考资料。使用 joinQueryOver 没有成功。

事件与需求具有一对多的关联，需求与解决方案具有一对多的关联。

```
 Requirement reqAlias = null;
  Solution solAlias = null;

  var subQuery = QueryOver.Of<Event>()                                
      .JoinAlias(x => x.Requirements, () => reqAlias)
      .Where(x => x.Name.IsInsensitiveLike(searchTerms[2]))
      .JoinAlias(() => reqAlias.Solutions, () => solAlias)
      .Where(x => x.Name.IsInsensitiveLike(searchTerms[3]))
      .Select(Projections.Group<Event>(x => x.Id));

  var events = session.QueryOver<Event>()
      .Where(x => x.Name.IsInsensitiveLike(searchTerms[1]))
      .WithSubquery.WhereProperty(x => x.Id).In(subQuery)
      .List().ToList(); 
```

还是行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:34:02.387

当您使用`IsInsensitiveLike`NHibernate 时，会附加`%`解析后的内容，并用于`lower`进行小写比较。在您的代码中，您正在附加`%`自己，这会导致，

```
select distinct * from event e where e.name like %lower('%req%')% 
```

反过来，这不起作用。

此外，您有 3 个子查询，不是很大，因此您需要重组代码以解决此问题：

```
select r.eventId from requirement r where r.name like '%req%' 
```

到

```
var firstQuery = QueryOver.Of<Requirement>()                                
                          .Where(r => r.Name.IsInsensitiveLike(searchTerms[2]))
                          .Select(r => r.EventId); 
```

然后，

```
select s.requirementId from solution s where s.name like '%sol%' 
```

到

```
var solutionQuery = QueryOver.Of<Solution>()                                
                           .Where(s => s.Name.IsInsensitiveLike(searchTerms[3])); 
```

然后，

```
select r.eventId from requirement r where r.id 
in (select s.requirementId from solution s where s.name like '%sol%') 
```

到

```
var requirementQuery = QueryOver.Of<Requirement>()
                                .WithSubquery
                                .WhereProperty(r => r.Id).In(solutionQuery)
                                .Select(r => r.EventId); 
```

`Restrictions.Or`然后，您需要使用包含 3 个查询来构建主查询。

# ruby-on-rails - Rails：从数组中的哈希中检索值

> ID：14385994
> 
> 赞同：0
> 
> 时间：2013-01-17T18:47:00.067
> 
> 标签：ruby-on-rails, ruby

有很多相关的问题，但他们的答案对我没有帮助。我有一个`fetch_all_sections`用这一行填充数组的方法：

```
all_sections << {:id => section.id, :sortlabel => section.sortlabel, :title => section.title, :depth => depth} 
```

在视图的循环中，我想通过键轻松访问值，如下所示：

```
<% fetch_all_sections(@standard).each do |section| %>
  <%= section.id %>
<% end %> 
```

这表示部分没有方法ID。`section[:id]`并且`#{section['id']}`有类似的主题错误。为了便于检索，我使用了散列 - 我应该使用不同的结构吗？

我希望我不需要像`section.map { |id| id[:id] }`每个值一样的 .map 。

编辑：这是上下文。这有点循环（双关语），但它做了预期的事情。

```
# Calls itself for each section recursively to fetch all possible children
def fetch_all_sections(standard, section = nil, depth = 0)
  all_sections = []

  if section.nil?
    rootsections = standard.sections.sorted
    if ! rootsections.nil?
      rootsections.each_with_index do |section, i|
        depth = section.sortlabel.split('.').length - 1
        all_sections.push(fetch_all_sections(standard, section, depth))
      end
    end
  else

    all_sections << {:id => section.id, :sortlabel => section.sortlabel, :title => section.title, :depth => depth}

    section.children.sorted.each do |section|
      all_sections | fetch_all_sections(standard, section)
    end
  end

  return all_sections
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:50:29.723

尝试以下方法：

```
<% fetch_all_sections(@standard).each do |section| %>
  <%= section['id'] %>
<% end %> 
```

如果不起作用，请尝试使用以下方法进行调试：

```
<% fetch_all_sections(@standard).each do |section| %>
  <%= section.inspect %>
  <%= section.class %>
<% end %> 
```

正如问题作者所说，这已解决：

```
all_sections << fetch_all_sections(standard, section, depth).first 
```

并告诉我们检查的输出

# c# - 在 VS 中的本地网络服务器上测试子域

> ID：14385995
> 
> 赞同：1
> 
> 时间：2013-01-17T18:47:00.303
> 
> 标签：c#, asp.net-mvc, azure, multi-tenant

我仍在试验 Azure 多租户开发。我现在有我的第一个试用版，但为了使用子域名 (customer.site.com)，我需要将我的 Azure 网站切换为共享/保留。由于我仍在试验，我宁愿不开始为 Azure 付费。有没有解决的办法？或者，是否可以在我的本地 Visual Studio 网络服务器中测试多租户部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T07:36:49.867

不，您不能在免费网站上拥有自定义域名。

但是您可以做的是将租户识别从子域切换到路径。因此，与其拥有`tenant10.site.com/`你，不如拥有`mysites.azurewebsites.net/tenant10/`. 这基本上只是 URL 重写规则的改变——我认为这是在 URL 级别处理多租户识别的正确方法。Azure 网站和 Azure 云服务都支持 URL 重写。

在本地测试多租户更加容易。您只需打开您的[主机](http://en.wikipedia.org/wiki/Hosts_%28file%29)文件（在典型的 Windows 安装中，它位于`c:\windows\system32\drivers\etc\hosts`. 只需为您要测试的所有（子）域添加条目，并将它们映射到 127.0.0.1。类似于：

```
127.0.0.1   tenant1.mydomain.com
127.0.0.1   tenant2.mydomain.com
127.0.0.1   tenant15.mydomain.com
... 
```

`F5`然后，像往常一样运行您的项目，并在浏览器的地址栏中手动输入新地址：tenant1.mydomain.com。

但是首先启动项目时`F5`要检查本地开发结构的真实 IP 地址，因为有时它可能不是 127.0.0.1，而是 127.0.0.8 或其他。浏览器初始启动时使用的 IP 地址是您必须填写`hosts`文件的 IP 地址。

但是，如果您使用文件中的真实（子）域名`hosts`，请不要忘记从中删除条目，因为您将永远无法访问真实的 Internet 站点。

# java - ObjectInputStream 自定义类加载器反序列化问题：未调用 resolveClass()

> ID：14385997
> 
> 赞同：3
> 
> 时间：2013-01-17T18:47:09.030
> 
> 标签：java, classloader, inputstream, deserialization

我有一个`ObjectInputStream`并且想要使用自定义加载类`ClassLoader`。

因此创建了一个`ObjectInputStream`覆盖该`resolveClass()`函数的子类。

现在我的问题是我想`ClassLoader`在执行期间更改。但有时我在这个流上`resolveClass()`执行时似乎没有执行。`readObject()`然后类加载错误`ClassLoader`。

知道为什么`resolveClass()`不执行以及如何解决此问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:08:54.467

`resolveClass()`将在流中的每个类描述符调用一次。我不知道如果您为同一个完全限定的类名编写多个描述符会发生什么 - 可能未指定。正确的解决方案是使用多个流（可以相互嵌套）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:09:55.010

来自 Java API 文档`ObjectInputStream.resolveClass()`：

> 对于流中的每个唯一类，该方法只会被调用一次。

可能的快速修复：

`reset()`发送后始终调用`ObjectOutputStream`。这将重置流，就好像它们是新的一样，并使他们忘记已经发送/接收了一个类。

# vim - 如何将当前行作为 Vim EX 命令执行？

> ID：14385998
> 
> 赞同：25
> 
> 时间：2013-01-17T18:47:15.743
> 
> 标签：vim

假设我正在编辑我的`_vimrc`文件并且我刚刚添加了几行，例如一个新的键映射。我不想重新加载*整个*文件 ( `:so %`)，因为这会重置很多我正在尝试的临时内容。我只想运行我目前正在处理的两条线。

我没有运气尝试将这些行复制/粘贴到命令缓冲区中，因为我不能在那里使用 put 命令。有什么方法可以将当前行（或当前选择）作为 EX 命令运行？

* * *

**概括：**

在[Anton Kovalenko](https://stackoverflow.com/users/1947008/anton-kovalenko)的回答和[Peter Rincker](https://stackoverflow.com/users/438329/peter-rincker)的评论之后，我最终得到了这些关键映射，它们要么执行当前行，要么在可视模式下执行当前选定的行：

```
" Execute current line or current selection as Vim EX commands.
nnoremap <F2> :exe getline(".")<CR>
vnoremap <F2> :<C-w>exe join(getline("'<","'>"),'<Bar>')<CR> 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-10-22T16:16:08.880

要将当前行作为 ex 命令执行，您还可以使用：

```
yy:@" 
```

这会将当前行拉到“-register 并执行它。我不认为这是太多的打字。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-17T18:53:43.323

将光标下的行作为 Ex 命令执行：

```
:execute getline(".") 
```

2条线足够方便。~~（我会想办法用区域来做这件事，但我不是 vim 用户）~~。对于当前选定的区域，以下似乎可以完成这项工作：

```
:execute getreg("*") 
```

* * *

正如[Peter Rincker](https://stackoverflow.com/users/438329/peter-rincker)评论的那样，此映射可用于执行当前选定的行：

```
:vnoremap <f2> :<c-u>exe join(getline("'<","'>"),'<bar>')<cr> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-17T19:03:21.723

为此，我定义了以下命令和映射：

```
":[range]Execute    Execute text lines as ex commands.
"                   Handles |line-continuation|.
" The same can be achieved via "zyy@z (or yy@" through the unnamed register);
" but there, the ex command must be preceded by a colon (i.e. :ex)
command! -bar -range Execute silent <line1>,<line2>yank z | let @z = substitute(@z, '\n\s*\\', '', 'g') | @z

" [count]<Leader>e  Execute current [count] line(s) as ex commands, then
" {Visual}<Leader>e jump to the following line (to allow speedy sequential
"                   execution of multiple lines).
nnoremap <silent> <Leader>e :Execute<Bar>execute 'normal! ' . v:count1 . 'j'<CR>
xnoremap <silent> <Leader>e :Execute<Bar>execute 'normal! ' . v:count1 . 'j'<CR> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-17T18:50:22.500

发布此消息后，我找到了解决方法。我可以使用 将文本复制到剪贴板`"*y`，然后使用鼠标中键将该文本放入命令缓冲区。这对我有用，但对于没有剪贴板支持、鼠标支持或只是厌恶将手从 Vim 位置移开的人来说，这并不是一个方便的解决方案。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-18T19:55:03.860

接受的答案不处理延续部分。此外，令人惊讶的是，不需要该栏，换行符很好。这将起作用，首先将文本拉入寄存器 x：

```
vno <c-x> "xy:exe substitute(@x,"\n\\",'','g')<cr> 
```

正如有人已经提到的，唯一的例外是“吃掉”换行符的命令。例如，在以下位置执行上述映射：

```
:sign define piet text=>> texthl=Search 
:exe ":sign place 2 line=23 name=piet file=" . expand("%:p") 
```

将导致 vim 认为用户正在尝试将 textl 定义为 "Search\n:exe ":sign place... 等。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-02T17:40:32.920

你也可以试试 `:<C-R><C-L><CR>`

根据 vim 文档，该组合会将当前行放入命令行。从那里，按回车键就可以了。我意识到这不能处理多行情况，但是它不需要 .vimrc，因此可以开箱即用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-15T07:05:09.877

> 我不想重新加载整个文件 (:so %)，因为这会重置很多我正在试验的临时内容。我只想运行我目前正在处理的两条线。

如果你想执行一个命令，因为你想在将它提交到 _.vimrc 之前对其进行优化，那么你应该为 Ex 模式命令启动一个命令行窗口，使用`q:`.

启动时，命令行窗口会缓冲命令行历史记录的内容。它是一个普通的 Vim 窗口，其内容可以作为任何文本缓冲区进行编辑，除非在执行该行命令的任何行上按下。当您想稍微更改之前编写的长而复杂的命令并重新运行它时，它非常有用。

要为搜索字符串启动“命令行窗口”，请按`q/`。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-22T14:51:59.597

如果你正在做很多实验（我想尝试一下你可能想要添加到你的 vimrc 中的东西？）在一个像experimental.vim 这样的临时文件中这样做可能会有所帮助，这样你就不仅仅依赖于你的历史以了解您正在尝试什么。既然您拥有这些出色的映射，就可以轻松地从实验或 vimrc 重新运行东西，而无需获取整个文件。

另外（对不起，我似乎还不能评论答案），我尝试了彼得的这个映射：

```
vnoremap <Leader>es :<c-u>exec join(getline("'<","'>"),'<BAR>')<CR> 
```

这在大多数情况下都有效，但它在函数定义上特别失败。

```
function! TestMe()
  echo "Yay!"
endfunction 
```

此映射将这些行连接成一个字符串，由它们分隔`<BAR>`然后执行它们。

我不完全确定为什么，但是如果我尝试在正常模式下使用函数定义来做到这一点：

```
:exec 'function! TestMe()|  echo "Yay!"|endfunction'
-> E488: Trailing characters 
```

经过一些测试，我发现它可以与换行符一起使用：

```
:exec "function! TestMe()\n  echo 'Yay!'\nendfunction"
:call TestMe()
-> Yay! 
```

因此，我将映射更改为：

```
vnoremap <Leader>es :<c-u>exec join(getline("'<","'>"),"\n")<CR> 
```

我想有一个 vim 或 ex 原因导致该`<BAR>`方法不适用于函数（甚至可能是我的某些设置？），如果有人知道，我很想知道它是什么。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-10T20:33:03.930

`!!`（的简写）根据[POSIX](https://pubs.opengroup.org/onlinepubs/9699919799/) &`:.!`将当前行作为命令的输入执行。如果它是系统命令，您可能需要附加。 [`ex`](https://pubs.opengroup.org/onlinepubs/9699919799/utilities/ex.html)[`vi`](https://pubs.opengroup.org/onlinepubs/9699919799/utilities/vi.html)[`sh`](https://pubs.opengroup.org/onlinepubs/9699919799/utilities/sh.html)

`!!`在空行上执行（并省略`sh`）是将 shell 命令直接读入缓冲区的快捷方式。它的本质是`:.!`覆盖当前行，同时`:.r!`在下面的行上插入。

* * *

```
ls -A | head -n +4
~
~
!sh 
```

结果：

```
.sh_history
.sh_logout
.kshrc
corelist.txt
~
~
4 lines added; 1 line deleted` 
```

这意味着无需将管道重定向到文件，然后检查数据以查看内容是否有效。`vi`直接执行命令，`u`如果出错则ndo。

* * *

或者，将行作为命名缓冲区拉出允许您将其作为`ex`命令执行，几乎就像宏一样。您仍然可以编辑和`u`ndo 该行以使其正确，而不是尝试`:`在命令模式下编辑该行。

这里推荐的功能都是[POSIX](https://pubs.opengroup.org/onlinepubs/9699919799/)并且已经支持了 40 多年，所以不需要特殊的*vim*或其他增强功能。

```
:%s/meep/pEEp/ | g/foo/ s//BAR

foo
grok
meep
~
~ 
```

将[`ex`](https://pubs.opengroup.org/onlinepubs/9699919799/utilities/ex.html)命令（第 1 行，`:%s...`）拉到命名缓冲区/宏中。

我只是使用“宏”的标签`m`。

`"myy`

*或者*

`:1y m`

现在在命令模式下执行命名的缓冲区/宏，使用`@`：

`@m`

结果：

```
:%s/pEEp/pEEp/ | g/BAR / s//BAR

BAR
grok
pEEp
~
~
4 lines changed 
```

* * *

但请记住，“多次撤消”*不是*POSIX。 `u`ndo 只是“历史上准确且合规” `ex`/`vi`实现中的撤消和重做之间的切换。
解决方法是在执行有问题的编辑之前保存到临时（或有效）文件名：

`:w $$.tmp`

然后只是`:e!`在需要时“重置并重新加载”。

* * *

您还可以在进行多项更改之前使用`:pre`（保留）制作*特殊的临时备份文件。*然后使用`:reco! %`（恢复这个！）恢复到那个点。意识到`:preserve`创建一个类似快照的文件，一旦它回滚就被删除。是否保存编辑并不重要。因此，编写您自己的文件 ( `:w ...`) 并使用恢复`:e!`可能仍然有价值，因为系统不会自动删除它。

`:pre`当您应该运行`sudo vi ...`或没有必要的权限时是完美的 - 但您只是在进行了几次更改*后才意识到错误。*即 `vi /etc/sudoers`代替`sudo vi /etc/sudoers`.
^^**永远不要这样做！只是一个例子！改用`sudo visudo`！**

您可以获取现有恢复文件的列表，并根据需要`vi -r`直接使用恢复文件，也可以选择使用.`vi -r filename``sudo vi -r filename`

这里的区别在于，即使“ `:preserve`d 文件”在内部有自己的“特殊”名称和路径，它也会在“ ed ==> `:write`时到达原始的预期位置，但请 务必使用，而*不是*像完成你的“恢复”，否则您仍然会丢失您尝试保存的编辑。`:recover``/etc/sudoers``:wq!`*`ZZ`*

 *顺便说一句，`^R`预计会根据 POSIX 重绘或重绘显示；`vi`在任何合规的实现中，它都不是“撤消” 。*

# ruby-on-rails - 将使用 Carrierwave_Direct 上传的文件与对象相关联

> ID：14385999
> 
> 赞同：1
> 
> 时间：2013-01-17T18:47:17.427
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave

我正在使用carrierwave_direct gem 将文件直接上传到S3，一切都很顺利。但是，当亚马逊重定向回 中指定的 URL 时`success_action_redirect`，我没有将上传的文件与对象关联。

我的控制器看起来像

```
def edit
  @excel_version = ExcelVersion.find(params[:id])
  @uploader = @excel_version.excel_everest_macro
  @uploader.success_action_redirect = edit_admin_excel_version_url
end

def update
  @excel_version = ExcelVersion.find(params[:id])
  @excel_version.assign_attributes(params[:excel_version])
  @excel_version.save
end 
```

我的视图中有一个隐藏的表单字段，看起来像 = form_for @excel_version do |form| = form.hidden_​​field :key

因此，在我的更新操作中，我只是使用`@excel_version.assign_attributes(params[:excel_version])` 亚马逊返回的密钥使其进入模型就好了。但是，安装在 @excel_version 对象上的上传程序没有获取 url，我无法设置链接来下载文件。

关于如何使用返回给我的 S3 参数将文件与模型关联起来的任何建议，因为carrierwave 通常会这样做？

谢谢！

PS 此处的另一个答案建议阅读 github 上的carrier_wave 直接文档，我已经并且发现在这方面没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:23:54.367

要将图像与模型相关联，您可以在控制器中创建一个方法，该方法将使用来自亚马逊的参数并创建图像链接

例如你可以做 -

```
 def image_url
    respond_to do |format|
      format.json { render :json => { :filelink => "https://s3.amazonaws.com/#{params[:bucket]}/#{params[:key]}" } }
    end
  end 
```

这段代码将做的是，当亚马逊成功重定向到 image_url 方法时，它将使用参数“bucket”和“key”来创建指向图像的精确链接。（发送的参数有键和桶名）

现在，您可以将此图像 url 放在视图上的隐藏对象中，这样当表单发布到服务器时，url 也会随之发布。您可以将其与您的模型相关联。

希望这可以帮助。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:50:47.313

所以我的问题是我的`hidden_field :key`字段格式错误。我错误地将字段放在将`direct_upload_form_for @uploader`文件上传到 S3 的表单上。

当然，您需要用户在将文件发布到 S3*后*`:key`返回的表单上的字段（即在传递给方法的 url 处）。S3 将在那里返回参数中的密钥，您可以将其与您的模型相关联。*`success_action_redirect`*

 *感谢所有有用的建议！*