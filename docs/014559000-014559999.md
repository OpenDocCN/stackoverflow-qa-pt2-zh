# StackOverflow 问答 14559000-14559999

# jquery - 如何使用 jquery 访问子父 div

> ID：14559002
> 
> 赞同：0
> 
> 时间：2013-01-28T09:29:27.617
> 
> 标签：jquery, html, parent-child

我有多个 div id,s = slide

我正在单击`<a id=medium>`并想检查图片是否存在或`rsImg class`（在幻灯片 div 中）是否存在（检查图片是否在 div 中）

![在此处输入图像描述](../Images/a21fbfc0eae0d73815e9046d55ec2f10.png)

```
var test = $('#slide').children().hasClass('rsImg'); 
```

这返回 true - 猜我必须添加一个 $this 但找不到解决方案

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:31:14.163

您需要使用 find 方法来获取 jQuery 对象而不是 hasClass。

```
var test = $('#slide').children().find('.rsImg'); 
```

或者您可以简单地使用使用后代选择器。

```
var test = $('#slide .rsImg') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:36:14.140

```
$('a#medium').on('click', function(){
    if($(this).parents('#slide').find('img').length) {
        //Do some cool stuff here
    }
}); 
```

# google-analytics - 谷歌分析目标和查询字符串公正跟踪

> ID：14559007
> 
> 赞同：0
> 
> 时间：2013-01-28T09:29:41.427
> 
> 标签：google-analytics

我们在 GA 中设定了一个目标，应该以 /welcome 结尾。

为了跟踪这一点，我们添加了以下目标渠道：

1.  “/”
2.  “/加入”
3.  "/加入?x="
4.  “/welcome”（目标网址）

有时参数 x 被填充，有时没有。我们在匹配类型中使用“头部匹配”。

GA 可以跟踪最终目标，但在第 3 步中，它始终是 100% 的转化率。

这是目标漏斗的截图：http: [//imgur.com/WYKKkk7](http://imgur.com/WYKKkk7)

“Bli medlem (skjema)”是第 3 步。

我们如何设置 GA 以正确跟踪第三个 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:54:08.413

我认为您应该使用正则表达式匹配而不是头部匹配，因为这会忽略 url 末尾的参数。

确保在问号之前放一个反斜杠，`/join\?x=`以防止它在正则表达式中表示其他含义。

# android - 更改微调器中项目的颜色

> ID：14559012
> 
> 赞同：0
> 
> 时间：2013-01-28T09:29:56.417
> 
> 标签：android, android-layout, android-spinner

我想将微调器中项目的颜色更改为 3 种不同的颜色，并且所有项目都应该动态添加。我正在通过列表在微调器中添加项目。假设我有 2 个列表，并且我想将两个列表项合并到单个微调器项中，但两者都应该是不同的颜色。我的 xml 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >`

<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:background="#66CCFF"
    android:gravity="center"
    android:text="abcd"
    android:textColor="@android:color/white"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/tvMaterial"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/material"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<Spinner
    android:id="@+id/spinMaterial"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 

    />

<TextView
    android:id="@+id/tvWeight"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/Weight"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/etWeight"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="text"
    android:hint="Enter Weight"
    >
</EditText>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/bAddCat"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Add" />

    <Button
        android:id="@+id/bCancelCat"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Cancel" />

</LinearLayout>    
</LinearLayout> 
```

Java类是

```
 package com.androidui;
    import java.util.ArrayList;
    import java.util.List;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.text.Editable;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.ArrayAdapter;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.Spinner;
    import android.widget.TextView;
    import android.widget.Toast;

    public class AddCategory extends Activity {

TextView tv1;
String cat = null;
Spinner spin;
Button add;
Button cancel;
EditText etWt;
@Override

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.add_category);

    tv1 = (TextView)findViewById(R.id.textView1);
    add = (Button)findViewById(R.id.bAddCat);
    cancel = (Button)findViewById(R.id.bCancelCat);
    etWt = (EditText)findViewById(R.id.etWeight);

    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        cat = extras.getString("name");
        tv1.setText(cat);
    }

    addItemsOnSpinner();

    //Onclick listners to buttons
    add.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(AddCategory.this,
                    "Material : "+ spin.getSelectedItem().toString() + "\nWeight : " + etWt.getText().toString(),
                    Toast.LENGTH_LONG).show();
        }
    });

    cancel.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            finish();
        }
    });
}

public void addItemsOnSpinner() {

    spin = (Spinner) findViewById(R.id.spinMaterial);
    List<String> list = new ArrayList<String>();
    list.add("Material 1");
    list.add("Material 2");
    list.add("Material 3");
    list.add("Material 4");
    list.add("Material 5");
    list.add("Material 6");

    //Second List
    List<String> list2 = new ArrayList<String>();
    list2.add("Mat 7");
    list2.add("Mat 8");
    list2.add("Mat 9");

    //Combined List
    List<String> listCombine = new ArrayList<String>();
    listCombine.addAll(list);
    listCombine.addAll(list2);

    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_spinner_item, listCombine); 

    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spin.setAdapter(dataAdapter);
  }

    } 
```

请提出一种方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:35:00.660

您可以尝试 SpannableString 为您的文本着色 [http://developer.android.com/reference/android/text/SpannableString.html](http://developer.android.com/reference/android/text/SpannableString.html)

# geometry - 逐行拆分二维四边形

> ID：14559015
> 
> 赞同：2
> 
> 时间：2013-01-28T09:30:08.270
> 
> 标签：geometry, 2d, polygon, divide

我发现了许多处理通过给定线分割**多边形**的实现，但我只需要分割一个**四边形**（具有 4 个顶点的矩形）。

是否有针对此任务优化的算法？**简单**比性能更重要。

我缩小了 4 种类型的交叉点：

### 邻近的

线路从一侧进入并从相邻侧离开的位置。
这将生成 1 个具有**3 个点**的多边形和 1 个具有**5 个点**的多边形。

![邻近的](../Images/06bbcaf0340c0117df9e5f55b7879c04.png)

### 对面的

线路从一侧进入并从另一侧离开的位置。
这将生成 1 个带有**4 个点**的多边形和 1 个带有**4 个点**的多边形。

![对面的](../Images/9a20fae57b191fa5c6ae46bca8232205.png)

### 对角线对面

线进入一个角落并通过对角离开的地方。
这将生成 1 个具有**3 个点**的多边形和 1 个具有**3 个点**的多边形。

![对角线对面](../Images/1b02f00515d1927ec751924b0564901b.png)

### 对角相邻

线路进入一个角落并从相邻一侧离开的地方。
这将生成 1 个具有**3 个点**的多边形和 1 个具有**4 个点**的多边形。

![对角相邻](../Images/d9ee5001d8893296a2b2d34ab780a8f1.png)

但**到目前为止**，我无法想出一个**好的简单**算法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:35:44.343

有[很多有效的算法](http://en.wikipedia.org/wiki/Line_clipping)可以通过矩形窗口剪裁一条线。

我已经为我的目的使用了[Liang-Barski 之一](http://en.wikipedia.org/wiki/Liang%E2%80%93Barsky)（查看“外部链接”部分以获得有效实施）

# android - 使用 Samba/JCIFS 问题写入/上传文件（SmbAuthException：访问被拒绝）

> ID：14559019
> 
> 赞同：10
> 
> 时间：2013-01-28T09:30:12.890
> 
> 标签：android, samba, jcifs

所以我正在尝试将文件从 android 设备写入 windows 共享文件夹。我正在使用最新版本的 JCIFS 和[显示可用网络共享的代码](https://stackoverflow.com/questions/9389366/how-to-access-share-folder-in-windows-through-android-and-read-files)工作正常。所以我假设 JCIFS 和我的 LAN、WiFi 等一切正常。这是文件上传的代码（实际上我只想将文本 Sring 写入文件）：

```
 public boolean save2Samba(String text, String fileName) {
        try {

            // My Windows shares doesn't require any login/password
            // String name="login";//my windows username
            // String password="password1";//my windows password

            // sSambaFolder contains a path like MYPC/E/SharedFolderName/
            String url = "smb://" + sSambaFolder.toLowerCase()+fileName;

            SmbFile file = null;
            try {
                // assume ANONYMOUS is my case but there is no description of this in JCIFS API
                NtlmPasswordAuthentication auth = NtlmPasswordAuthentication.ANONYMOUS;
                file = new SmbFile(url, auth);
                android.util.Log.i("TestApp",url);
                // output is like smb://mypc/e/sharedfoldername/file.txt;
                SmbFileOutputStream out = new SmbFileOutputStream(file);
                out.write(text.getBytes());
                out.flush();
                out.close();

            } catch (Exception e) {
                e.printStackTrace();
                return false;
            }

            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    } 
```

由于记录了 url，我确定它是正确的（我也使用上面提到的代码检查了 url，它浏览了文件夹的包含）。
但问题是我总是一样：

```
W/System.err(3214): jcifs.smb.SmbAuthException: Access is denied. 
```

共享不受密码保护，因此我不需要任何用户名/密码即可访问。我可以从另一台 WinPC 读取/写入/删除文件，并且不需要授权。我也尝试为 WinPC 上的用户创建一个共享密码，但结果是一样的。所以我尝试了几个版本的 NtlmPasswordAuthentication 都没有运气：

```
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("");
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication(":");
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("Administrator:"); //actual username on WinPC with shares
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("Administrator");
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication(null,"Administrator","");
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication(null,"",""); 
```

那么我做错了什么以及当不需要身份验证来访问共享文件夹时如何实现我的目标？
顺便说一句，我的基于 linux 并使用 samba 客户端的三星电视正在毫无问题地访问同一个共享文件夹并从那里播放 MP3（嗯，是的，它只读）。由于我的 AOS 设备通过 WiFi（而不是通过以太网连接的电视）访问我的 LAN，我还检查了使用 notebook+WiFi 对共享文件夹的访问，没有发现任何问题。
**补充：**
我现在正在尝试执行以下几行：

```
file = new SmbFile(url, auth);
android.util.Log.i("save2Samba", "file.exists(): " + file.exists()); 
```

并获得相同的访问被拒绝。我什至没有尝试写文件...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T18:08:43.823

我的天啊！！！解决方法很简单！！！要访问不受登录名/密码保护因此不需要任何授权的网络不是 NtlmPasswordAuthentication.ANONYMOUS 但它是：

```
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication(null, null, null); 
```

该死的不是那么明显！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:33:14.047

尝试使用此代码

```
 NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("",
                            username, password);
    sharepath = "smb://" + pathtosharefolder + test.txt;  

 sFile = new SmbFile(sharepath, auth);
    SmbFileOutputStream out = new SmbFileOutputStream(file, true);
    out.write(text.getBytes()); 
```

还要检查您是否共享了您正在访问的文件夹路径。还要检查它是否已授予该文件夹的写权限

# ruby-on-rails - Active Record 查询错误

> ID：14559024
> 
> 赞同：1
> 
> 时间：2013-01-28T09:30:52.480
> 
> 标签：ruby-on-rails, postgresql, gem, rails-activerecord

此查询引发错误：

```
EncodingPreset.where('default = ?', false)

ActiveRecord::StatementInvalid: PG::Error: ERROR:  syntax error at or near "default"
LINE 1: ...coding_presets".* FROM "encoding_presets"  WHERE (default = ...
                                                             ^
: SELECT "encoding_presets".* FROM "encoding_presets"  WHERE (default = 'f') 
```

但这有效：

```
EncodingPreset.where(:default => false) 
```

为什么第一个查询不起作用？

版本：

```
ruby-1.9.3-p194
activerecord-3.2.11 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T09:36:59.083

这是因为 default 是一个关键字，并且必须放在引号中才能在查询中使用。这应该有效：

```
EncodingPreset.where('"default" = ?', false) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T09:35:44.497

**default**是 postgreSQL 中的保留关键字，这就是它抛出错误的原因。用其他名称更改列名，然后它可以工作

# android - Android.mk：如何包含 ffmpeg 和 Opencv

> ID：14559034
> 
> 赞同：1
> 
> 时间：2013-01-28T09:31:17.440
> 
> 标签：android, opencv, ffmpeg

这是我的项目情况：我使用[本教程](https://stackoverflow.com/questions/10665039/does-anyone-find-this-useful-compiling-ffmpeg-on-windows-with-cywin-and-ndk-r)在 Windows 中编译了 ffmpeg，并导入了在我的 android 项目（在 jni 文件夹下）中生成的 ffmpeg 文件夹（包含在 libffmpeg.so 文件中）。在我的项目中，我有一个 jni_part.cpp，我在其中插入了我的 jni 函数以使用 opencv 进行操作。在我的 Android.mk 中，我使用下面的代码导入 opencv 并编译 jni_part.cpp

```
include $(CLEAR_VARS)
include ../../sdk/native/jni/OpenCV.mk
LOCAL_MODULE    := mixed_sample
LOCAL_SRC_FILES := jni_part.cpp
LOCAL_LDLIBS +=  -llog -ldl 
LOCAL_SHARED_LIBRARY := ffmpeg-prebuilt
include $(BUILD_SHARED_LIBRARY) 
```

但是我应该使用什么代码来导入ffmpeg？我尝试使用此代码：

```
include $(CLEAR_VARS)
LOCAL_MODULE := ffmpeg-prebuilt
LOCAL_SRC_FILES := ffmpeg-0.8/android/armv7-a/libffmpeg.so
LOCAL_EXPORT_C_INCLUDES := ffmpeg-0.8/android/armv7-a/include/
LOCAL_EXPORT_LDLIBS := ffmpeg-0.8/android/armv7-a/libffmpeg.so
LOCAL_PRELINK_MODULE := true
include $(PREBUILT_SHARED_LIBRARY) 
```

但是如果从我的 jni_part.cpp 代码中尝试包含一些 ffmpeg 文件/库`"#include <libavutil/avstring.h>"`，我会收到此错误：

```
**** Build of configuration Default for project OpenCV Tutorial 4 - Mix Java+Native OpenCV ****

C:\android-ndk-r8c\ndk-build.cmd 
Prebuilt       : libffmpeg.so <= jni/ffmpeg-0.8/android/armv7-a/
Install        : libffmpeg.so => libs/armeabi-v7a/libffmpeg.so
"Compile++ thumb : mixed_sample <= jni_part.cpp
jni/jni_part.cpp:24:32: fatal error: libavutil/avstring.h: No such file or directory
compilation terminated.
make: *** [obj/local/armeabi-v7a/objs/mixed_sample/jni_part.o] Error 1

**** Build Finished **** 
```

有人可以帮助我吗？我需要这样做以包含 ffmpeg 编解码器并希望使用函数 cvCaptureFromAVi ...提前致谢

# javascript - 在javascript中向右滑动

> ID：14559035
> 
> 赞同：0
> 
> 时间：2013-01-28T09:31:17.930
> 
> 标签：javascript, animation

当我单击它的孙子时，我正在尝试为 div 设置动画以向右移动。但是，我经常遇到时间问题。我怀疑我没有`setTimeout`正确使用该功能。有人可以看看他们是否发现错误。如果我自己的函数有效而不是使用`jquery`函数，我更愿意，因为我之前没有这方面的经验`jquery`

```
function sendrequest(element) {
    var element=element.parentNode.parentNode;
    var i=0;

    while(i<150) {
        right=i+"%";
        myVar=setTimeout(element.style.right=right,3000);
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:34:36.997

是的，您在调用 async 之前同步递增`setTimeout`。这是如何完成的：

```
var element = element.parentNode.parentNode;
var i=0, myVar;
function sendrequest(){
    if (i < 150) {
       var right = i+"%";
       element.style.right = right;
       i++;
       myVar = setTimeout(sendrequest, 3000);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:36:24.273

请在使用 TRANSLATE 的地方添加 css 样式。所以这会对你有所帮助，而不是使用 setTimeOut，因为它基本上是系统时钟周期，它会产生令人讨厌的结果，所以我宁愿不要依赖它

只需使用以下格式

```
 el.on('click', function(){
          document.getElementByid("#id").style = "xyz";

        }) 
```

并在 CSS 样式表中使用类似这样的东西

```
 .xyz{translate-x://x position in pixels} 
```

有关更多信息，请阅读有关向元素添加样式并在 CSS 中翻译的信息

愿这对你有帮助

# java - JSP 表单和对象

> ID：14559038
> 
> 赞同：0
> 
> 时间：2013-01-28T09:31:34.883
> 
> 标签：java, forms, jsp, populate

我想问你如何用现有的 java 对象的属性在 jsp（form:form 或通常是 html 表单）中填充表单。更改它们后，如何保存此属性？我用谷歌搜索了很长时间，但我找不到任何相关信息。感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:34:22.457

这取决于您使用的框架。

如果你使用任何基于组件的MVC框架，你的表单、你的对象之间的绑定都可以完成。这样您的表单将预先填充对象中可用的值，反之亦然。示例框架有 JSF、Spring MVC

如果你想手动完成

在 JSP 中生成表单时，您可以手动遍历 JSP 中的 java 对象并使用 scriptlet 为表单字段赋值 例如

```
<input type="text" name="name" value='<%=yourObject.getField()%>' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:35:38.633

如果您使用的是常规形式，则可以使用以下符号。

```
<html>
<body>
<form action="somepage.jsp">
<input type="text" name="name" value='<%=request.getParameter("name")==null?"":request.getParameter("name")'/>
<input type="submit"/>
</form>
</body>
</html> 
```

您可以使用相同的`request.getParameter("name")`调用访问服务器端的参数。我强烈建议您在这里使用 Spring MVC、Struts2 等框架，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:42:00.847

struts1、struts2 等框架可以为您做这些事情。基本上，您需要某种 bean 或 DTO 来保存 jsp 页面数据。在 struts2 中，它非常简单、动态且功能强大。Struts2 将 jsp-page 数据保存在其 value-stack 中。

**但是在使用 servlet 的 jsp 中，您必须在scriptlet-tags**内的 jsp-page 上使用 java-objects 。

# c# - 在 c# 表单应用程序中放大图片 az 地图

> ID：14559040
> 
> 赞同：1
> 
> 时间：2013-01-28T09:31:51.853
> 
> 标签：c#

我有一张图片，我应该在我的 C# 表单应用程序中将其用作地图。

有什么方法可以让我在这张图片上放置一些点或按钮，当用户点击它时会发生一些事情。对我来说重要的一件事是我希望用户可以放大地图。但是如果用户放大地图按钮就不会移动。我想在地图中找到一些可以缩放和移动的可点击点。谢谢。

# c# - 将数据添加到图钉

> ID：14559043
> 
> 赞同：0
> 
> 时间：2013-01-28T09:31:59.843
> 
> 标签：c#, wpf, visual-studio-2010, silverlight

这是我在 Bing 地图上的图钉代码。

```
 MapLayer layer = new MapLayer();
        Pushpin pin1 = new Pushpin();
        GeoCoordinate geo = new GeoCoordinate();
        geo.Latitude = 1.369963;
        geo.Longitude = 103.849275;
        pin1.Location = geo;
        layer.Children.Add(pin1);
        Pushpin pin2 = new Pushpin();
        GeoCoordinate geo1 = new GeoCoordinate();
        geo1.Latitude = 1.350678;
        geo1.Longitude = 103.848224;
        pin2.Location = geo1;
        layer.Children.Add(pin2);
        map1.Children.Add(layer); 
```

如何向两个图钉添加信息（地址、电话号码）？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:38:44.633

您必须在 Pushpin 的[Content](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.content.aspx)属性中添加一些内容。这可能是一个简单的字符串

```
pin1.Content = "Hello, World."; 
```

或更复杂的东西，例如带有一些子元素的面板：

```
var panel = new StackPanel();
panel.Children.Add(...);
...
pin1.Content = panel; 
```

* * *

在第二步中，您可能会定义一个[DataTemplate](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.aspx)并将其分配给 Pushpin 的[ContentTemplate属性，或者通过设置其](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.contenttemplate.aspx)[DataType](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.datatype.aspx)让它自动应用：

```
<UserControl.Resources>
    <DataTemplate DataType="local:Restaurant">
        <StackPanel>
            <TextBlock Text="{Binding Name}"/>
            <TextBlock Text="{Binding Address}"/>
        </StackPanel>
    </DataTemplate>
</UserControl.Resources> 
```

现在您只需将您的项目数据类（`Restaurant`此处具有`Name`和`Address`属性）分配或绑定到图钉的`Content`.

# iphone - 无效的数据库安装路径。- Appcelerator Ttianium

> ID：14559051
> 
> 赞同：0
> 
> 时间：2013-01-28T09:32:18.110
> 
> 标签：iphone, ios, sqlite, appcelerator, titanium-mobile

我是加速器钛的新手。我试图安装一个数据库，但我不能。

我尝试了以下代码，

```
 Ti.Database.install('myDB.sqlite', 'myDB');
    var db = Ti.Database.open('myDB');

    var db = Titanium.Database.install('myDB.db','myDB');

    var db = Titanium.Database.install('myDB.sqlite','myDB'); 
```

但它显示了错误 -

```
invalid database install path. /Users/wintech/Library/Application Support/iPhone Simulator/5.0/Applications/E1DC3E24-7BA6-4A69-94B7-87256846F500/Sample.app/myDB.sqlite  in -[TiDatabaseProxy install:name:] (TiDatabaseProxy.m:120) 
```

请帮助我的朋友！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:42:23.877

刚刚结束了很好的教程系列：

[http://mobile.tutsplus.com/tutorials/appcelerator/titanium-mobile-database-driven-tables-with-sqlite/](http://mobile.tutsplus.com/tutorials/appcelerator/titanium-mobile-database-driven-tables-with-sqlite/)

您会发现很多 Titanium 教程。

干杯!

# r - 用 R 中的颜色填充绘图的等高线

> ID：14559055
> 
> 赞同：1
> 
> 时间：2013-01-28T09:32:45.427
> 
> 标签：r, colors, plot, fill, contour

我有以下代码将生成一个带有几条等高线的图。现在我想用特定颜色填充这些轮廓或至少一个（例如 25% 的轮廓线）。我尝试了不同的选项，但我不确定如何从特定轮廓中选择多边形区域并用颜色填充它。

```
dd1<-read.table(text="dist  depth
            4916.64 8.661827
            4916.64 14.789091
            4916.64 13.555909
            4916.64 12.92816
            4916.64 11.708774
            4916.64 15.28
            4916.64 13.369875
            4916.64 14.039655
            4916.64 13.454545
            4916.64 12.638261
            4916.64 13.251081
            4916.64 14.006341
            4916.64 12.64
            4916.64 15.521818
            4916.64 10.202121
            4916.64 14.816667
            4916.64 15.504
            9674.844    23.93
            11000.151   22.157143
            11414.31    22.72
            11414.31    25.7
            11414.31    19.07
            11414.31    23.085714
            9481.57 17.266667
            11414.31    26.8
            11414.31    19.382222
            5616.09 12.016667
            10658.02    18.873913
            11414.31    25.2
            11414.31    20.9
            11414.31    27.65
            11414.31    22.133333
            11414.31    30.9
            5616.09 23.3
            11172.718   20.391667
            9964.755    23.51
            5616.09 19.43
            5616.09 19.1
            4916.64 18.42
            8515.2  17.683333
            11414.31    22.128571
            11414.31    22.8608
            10391.095   24.955882
            10931.125   25.225
            6444.407    20.228571
            11276.257   23.77619
            10585.993   23.285714
            10641.214   20.653333
            9757.676    24.007143
            11414.31    18.817
            11414.31    23.525
            11414.31    22.873684
            11414.31    26.15
            10486.595   21.9
            11000.151   24.142857
            11414.31    24.3875
            10819.621   20.569231
            10360.088   29.345455
            9708.951    21.488235
            11414.31    30.775
            11414.31    25.5
            11414.31    18.477917
            10327.144   26.8625
            11414.31    26.12963
            11414.31    29.28125
            11414.31    23.166667
            10689.532   21.8625
            11414.31    28.328571
            11414.31    22.563158
            11414.31    25.490909
            11414.31    26.0625
            11414.31    34.5
            11414.31    17.375294",header=T) 
```

这是将生成绘图的代码。任何建议将不胜感激。

```
library(ks)
## auto bandwidth selection
H.pi2<-Hpi(dd1,binned=TRUE)*1
ddhat<-kde(dd1,H=H.pi2)

# Kernel contour plot
plot(ddhat,cont=c(95),drawpoints=TRUE,col="black",xlab="Distance (m)",lwd=2.5, 
        ylab="Depth (m)",ptcol="grey15",cex=0.7,
        xlim=c(min(dd1[,1]-dd1[,1]*0.4),max(dd1[,1]+dd1[,1]*0.4)),ylim=c(45,-1)) 

plot(ddhat,cont=c(25),add=TRUE,col="red",lwd=2.4)
plot(ddhat,cont=c(50),add=TRUE,col="seagreen2",lwd=2.4)
plot(ddhat,cont=c(75),add=TRUE,col="royalblue",lty=5,lwd=2.5)  

# End of the script 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:57:39.177

您可以将`display="filled.contour2"`其作为参数添加到`plot.kde`. 例如 ：

```
plot(ddhat,cont=c(75),add=FALSE,lty=5,lwd=2.5, display="filled.contour2", col=c(NA,"blue"))
plot(ddhat,cont=c(95),drawpoints=TRUE,col="black",xlab="Distance (m)",lwd=2.5, 
      ylab="Depth (m)",ptcol="grey15",cex=0.7,
      xlim=c(min(dd1[,1]-dd1[,1]*0.4),max(dd1[,1]+dd1[,1]*0.4)),ylim=c(45,-1),add=TRUE) 
plot(ddhat,cont=c(50),add=TRUE,lwd=2.4, display="filled.contour2", col=c(NA,"green"))
plot(ddhat,cont=c(25),add=TRUE,lwd=2.4, display="filled.contour2",col=c(NA,"red")) 
```

这使 ：

![在此处输入图像描述](../Images/77bde8d496b6eb2f69318be74fba4f07.png)

# android - 测试我的 gps 位置获取并计算我在 android 中行驶的总距离时强制关闭

> ID：14559058
> 
> 赞同：1
> 
> 时间：2013-01-28T09:32:59.630
> 
> 标签：android, gps, locationmanager, locationlistener

最近我正在学习使用 gps 和标记来确定我当前的位置。现在我尝试进行修改，以便代码能够跟踪我当前的位置，并在我的位置更新时计算我的总行驶距离。一开始，它可以找到。但是 2-3 分钟后，我的应用程序开始挂起并提示我强制关闭，因为我的应用程序没有响应。

下面是我的代码：

```
public class WhereAmINowActivity extends Activity {
//declaration of variables

public void getPrevActivityValue(){
    Intent intent = getIntent();
    // get the value from prev activity
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.start_distance);
    getPrevActivityValue();
    btnStart = (Button)findViewById(R.id.btnStart);
    btnStop = (Button)findViewById(R.id.btnStop);
    distance = (TextView)findViewById(R.id.distance);

    locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setCostAllowed(true);
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    provider = locationManager.getBestProvider(criteria, true);

    location = locationManager.getLastKnownLocation(provider);

    updateWithNewLocation(location);

    locationManager.requestLocationUpdates(provider, TWO_MIN, HUNDRED_METERS ,locationListener);

    addListenerOnBtnStart();
    addListenerOnBtnStop();
}

public void addListenerOnBtnStart(){
    btnStart.setOnClickListener(new View.OnClickListener(){
      public void onClick(View paramAnonymousView){
        if(!startPressed){
// Initialize the variables of current and old location coordinates

            }
            catch (Exception e){
                e.printStackTrace();
            }
        }
        else{
            // Do nothing
        }
      }
    });
}

public void addListenerOnBtnStop(){
    btnStop.setOnClickListener(new View.OnClickListener(){
      public void onClick(View paramAnonymousView){
        try{

            if(connected to internet is true)

// Do something here

                }
                else{
// prompt message to notify user connectivity is not available
                }
        }
        catch (Exception e){
            e.printStackTrace();
        }
      }
    });
}

  private final LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
          updateWithNewLocation(location);
        }

        public void onProviderDisabled(String provider){
          updateWithNewLocation(null);
        }

        public void onProviderEnabled(String provider){ }
        public void onStatusChanged(String provider, int status, 
                                    Bundle extras){ }
      };

      private void updateWithNewLocation(Location location) {

// Update the current location, old coordinates and get the address 

        }

} 
```

一些值是通过使用 getIntent() 从先前的活动传递的。

谁能帮我弄清楚我做错了哪一部分？

另外：我删除了覆盖并仅在位置侦听器上进行了测试。我发现当它运行大约 2-3 分钟时，我的应用程序界面不会响应我按下的内容（因为我声明了两个按钮 - 开始和停止）。当我按下停止按钮时，什么也没发生，然后提示我强制关闭消息。这是我做错的部分吗？当我使用 GPS 行走时，我应该如何更正它以便它可以像正常的距离计算一样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-18T22:55:17.107

我已经在我的开源 Gps Tracker 中解决了这个确切的问题。完整的 android 项目在这里：

[https://github.com/nickfox/GpsTracker/tree/master/phoneClients/android](https://github.com/nickfox/GpsTracker/tree/master/phoneClients/android)

下面是进行跟踪的类。您想查看名为 totalDistanceInMeters 的变量。

```
package com.websmithing.gpstracker;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.location.Location;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesClient;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.location.LocationClient;
import com.google.android.gms.location.LocationListener;
import com.google.android.gms.location.LocationRequest;
import com.loopj.android.http.AsyncHttpResponseHandler;
import com.loopj.android.http.RequestParams;

import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.TimeZone;

public class LocationService extends Service implements
        GooglePlayServicesClient.ConnectionCallbacks,
        GooglePlayServicesClient.OnConnectionFailedListener,
        LocationListener {

    private static final String TAG = "LocationService";

    // use the websmithing defaultUploadWebsite for testing and then check your
    // location with your browser here: https://www.websmithing.com/gpstracker/displaymap.php
    private String defaultUploadWebsite;

    private boolean currentlyProcessingLocation = false;
    private LocationRequest locationRequest;
    private LocationClient locationClient;

    @Override
    public void onCreate() {
        super.onCreate();

        defaultUploadWebsite = getString(R.string.default_upload_website);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // if we are currently trying to get a location and the alarm manager has called this again,
        // no need to start processing a new location.
        if (!currentlyProcessingLocation) {
            currentlyProcessingLocation = true;
            startTracking();
        }

        return START_NOT_STICKY;
    }

    private void startTracking() {
        Log.d(TAG, "startTracking");

        if (GooglePlayServicesUtil.isGooglePlayServicesAvailable(this) == ConnectionResult.SUCCESS) {
            locationClient = new LocationClient(this,this,this);

            if (!locationClient.isConnected() || !locationClient.isConnecting()) {
                locationClient.connect();
            }
        } else {
            Log.e(TAG, "unable to connect to google play services.");
        }
    }

    protected void sendLocationDataToWebsite(Location location) {
        // formatted for mysql datetime format
        DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        dateFormat.setTimeZone(TimeZone.getDefault());
        Date date = new Date(location.getTime());

        SharedPreferences sharedPreferences = this.getSharedPreferences("com.websmithing.gpstracker.prefs", Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();

        float totalDistanceInMeters = sharedPreferences.getFloat("totalDistanceInMeters", 0f);

        boolean firstTimeGettingPosition = sharedPreferences.getBoolean("firstTimeGettingPosition", true);

        if (firstTimeGettingPosition) {
            editor.putBoolean("firstTimeGettingPosition", false);
        } else {
            Location previousLocation = new Location("");
            previousLocation.setLatitude(sharedPreferences.getFloat("previousLatitude", 0f));
            previousLocation.setLongitude(sharedPreferences.getFloat("previousLongitude", 0f));

            float distance = location.distanceTo(previousLocation);
            totalDistanceInMeters += distance;
            editor.putFloat("totalDistanceInMeters", totalDistanceInMeters);
        }

        editor.putFloat("previousLatitude", (float)location.getLatitude());
        editor.putFloat("previousLongitude", (float)location.getLongitude());
        editor.apply();

        final RequestParams requestParams = new RequestParams();
        requestParams.put("latitude", Double.toString(location.getLatitude()));
        requestParams.put("longitude", Double.toString(location.getLongitude()));

        Double speedInMilesPerHour = location.getSpeed()* 2.2369;
        requestParams.put("speed",  Integer.toString(speedInMilesPerHour.intValue()));

        try {
            requestParams.put("date", URLEncoder.encode(dateFormat.format(date), "UTF-8"));
        } catch (UnsupportedEncodingException e) {}

        requestParams.put("locationmethod", location.getProvider());

        if (totalDistanceInMeters > 0) {
            requestParams.put("distance", String.format("%.1f", totalDistanceInMeters / 1609)); // in miles,
        } else {
            requestParams.put("distance", "0.0"); // in miles
        }

        requestParams.put("username", sharedPreferences.getString("userName", ""));
        requestParams.put("phonenumber", sharedPreferences.getString("appID", "")); // uuid
        requestParams.put("sessionid", sharedPreferences.getString("sessionID", "")); // uuid

        Double accuracyInFeet = location.getAccuracy()* 3.28;
        requestParams.put("accuracy",  Integer.toString(accuracyInFeet.intValue()));

        Double altitudeInFeet = location.getAltitude() * 3.28;
        requestParams.put("extrainfo",  Integer.toString(altitudeInFeet.intValue()));

        requestParams.put("eventtype", "android");

        Float direction = location.getBearing();
        requestParams.put("direction",  Integer.toString(direction.intValue()));

        final String uploadWebsite = sharedPreferences.getString("defaultUploadWebsite", defaultUploadWebsite);

        LoopjHttpClient.get(uploadWebsite, requestParams, new AsyncHttpResponseHandler() {
            @Override
            public void onSuccess(int statusCode, org.apache.http.Header[] headers, byte[] responseBody) {
                LoopjHttpClient.debugLoopJ(TAG, "sendLocationDataToWebsite - success", uploadWebsite, requestParams, responseBody, headers, statusCode, null);
                stopSelf();
            }
            @Override
            public void onFailure(int statusCode, org.apache.http.Header[] headers, byte[] errorResponse, Throwable e) {
                LoopjHttpClient.debugLoopJ(TAG, "sendLocationDataToWebsite - failure", uploadWebsite, requestParams, errorResponse, headers, statusCode, e);
                stopSelf();
            }
        });
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {
            Log.e(TAG, "position: " + location.getLatitude() + ", " + location.getLongitude() + " accuracy: " + location.getAccuracy());

            // we have our desired accuracy of 500 meters so lets quit this service,
            // onDestroy will be called and stop our location uodates
            if (location.getAccuracy() < 500.0f) {
                stopLocationUpdates();
                sendLocationDataToWebsite(location);
            }
        }
    }

    private void stopLocationUpdates() {
        if (locationClient != null && locationClient.isConnected()) {
            locationClient.removeLocationUpdates(this);
            locationClient.disconnect();
        }
    }

    /**
     * Called by Location Services when the request to connect the
     * client finishes successfully. At this point, you can
     * request the current location or start periodic updates
     */
    @Override
    public void onConnected(Bundle bundle) {
        Log.d(TAG, "onConnected");

        locationRequest = LocationRequest.create();
        locationRequest.setInterval(1000); // milliseconds
        locationRequest.setFastestInterval(1000); // the fastest rate in milliseconds at which your app can handle location updates
        locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);

        locationClient.requestLocationUpdates(locationRequest, this);
    }

    /**
     * Called by Location Services if the connection to the
     * location client drops because of an error.
     */
    @Override
    public void onDisconnected() {
        Log.e(TAG, "onDisconnected");

        stopLocationUpdates();
        stopSelf();
    }

    @Override
    public void onConnectionFailed(ConnectionResult connectionResult) {
        Log.e(TAG, "onConnectionFailed");

        stopLocationUpdates();
        stopSelf();
    }
} 
```

# jquery - 使用 AJAX 调用显示 PDF

> ID：14559060
> 
> 赞同：15
> 
> 时间：2013-01-28T09:33:19.553
> 
> 标签：jquery, ajax, pdf

我正在尝试通过 AJAX 调用显示 PDF（在服务器端创建并作为 Web 流传递到客户端）。我的代码如下：

```
jQuery.ajax({
    type: "POST",
    processData: false,
    url: "aaaa.p?name=pdf",
    data: inputxml,
    contentType: "application/xml; charset=utf-8",
    success: function(data)
    {
      // here the data is the PDF stream i'm getting from the server side. 

    }
}); 
```

“inputxml”包含服务器创建 PDF 的输入参数。以及包含 PDF 流的成功函数中的“数据”。有没有办法在AJAX调用的成功功能内在浏览器上打开PDF文件而不做任何页面提交？在服务器端，PDF 也不是物理生成的。非常感谢您的帮助....

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T09:39:55.377

为什么要通过 AJAX 加载它？为什么不将它加载到您在需要时生成的 IFRAME 中。标准浏览器插件将在该 iframe 中显示它。

```
$('#link').click(function(e) {
    e.preventDefault(); // if you have a URL in the link
    jQuery.ajax({
        type: "POST",
        processData: false,
        url: "aaaa.p?name=pdf",
        data: inputxml,
        contentType: "application/xml; charset=utf-8",
        success: function(data)
        {
            var iframe = $('<iframe>');
            iframe.attr('src','/pdf/yourpdf.pdf?options=first&second=here');
            $('#targetDiv').append(iframe);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-10T13:13:50.587

这是我处理这个问题的方法。它基于此 pdfmake 文件 ( [https://github.com/bpampuch/pdfmake/blob/master/src/browser-extensions/pdfMake.js](https://github.com/bpampuch/pdfmake/blob/master/src/browser-extensions/pdfMake.js) ) 的第 50 行。

1.  假设您有一个 pdf 流，我将其转换为 base64 并将其回显到我的 AJAX：

    ```
    $pdfString = $mpdf->Output('', 'S');
    $pdfBase64 = base64_encode($pdfString);
    echo 'data:application/pdf;base64,' . $pdfBase64; 
    ```

2.  这是我的 AJAX 代码。接收数据时，它会打开一个新窗口并将 url 替换为 base64 ended 数据：

    ```
    var ajaxRequest = $.ajax({
        url: "php/generate-pdf/print-control.php",
        data: '',
        cache: false,
        contentType: 'application/json',
        processData: false,
        type: 'POST'

    });
    $.when(ajaxRequest).done(function (ajaxValue) {
        var win = window.open('', '_blank');
        win.location.href = ajaxValue;
    }); 
    ```

    这种方法的缺点是您在地址栏中获得了一个 base64 字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-01T21:35:31.857

# 对于任何偶然发现这一点的人。这是一个使用 axios 的示例

1.  responseType 必须是“arrayBuffer”
2.  从响应创建一个 Blob 对象
3.  从可以加载到 iframe 中的 blob 创建一个“对象 url”

    ```
     axios({
            url: `path/to/pdf`,
            method: "GET",
            responseType: 'arraybuffer'
        }).then((response) => {
            let blob = new Blob([response.data], { type: response.headers['content-type'] } );
            let url = window.URL.createObjectURL(blob);

            $('#frame').attr('src',url);
        }); 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T09:44:44.123

您可以生成一个临时 URL 来访问存储在服务器上的 PDF 文件，而不是将其发送回 AJAX 调用。只需将生成的 URL 传递回客户端即可。然后，当您收到 URL 时，您可以执行例如`window.location =`将浏览器重定向到下载的操作。

确保为生成的文件（`Content-Disposition: attachment`等）设置了正确的标题，一切都应该没问题。

**编辑：**尽管您可能只使用常规（非 JavaScript）链接来生成和下载文件。但是通过 AJAX 执行它可以让您在生成文件时向用户显示一些特定的动画等。

# bash - 将文件中每一行中的单词填充到临时数组中

> ID：14559063
> 
> 赞同：2
> 
> 时间：2013-01-28T09:33:28.403
> 
> 标签：bash, shell, grep

```
$ cat file 
line1: Joe Frank tom Jim Michelle Antony
line2: Frank Joe tom Jim Antony Michelle higgs julien
$ arr=`cat file | grep line1`
$ echo $arr 
line1: Joe Frank tom Jim Michelle Antony
$ echo ${arr[1]}
line1: Joe Frank tom Jim Michelle Antony 
```

而我期望`Joe`的输出`echo ${arr[1]}`

是否有任何最短的方法可以进入临时数组中的每个名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:40:05.433

怎么样

```
arr=(`grep line1 file`) 
```

或者更好

```
read -a arr < <(grep line1 file) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:46:12.807

```
grep line1 file | cut -f2 -d " " 
```

...检查这种方式

# android - 如何以编程方式设置 rw- r-- r-- 权限？

> ID：14559068
> 
> 赞同：6
> 
> 时间：2013-01-28T09:33:39.973
> 
> 标签：android, file-permissions

我正在开发一个可以将应用程序的数据恢复到 /data/data/{packageName} 的应用程序。恢复文件后，我将权限设置为 rw- r-- r--。我是这样设置的：

```
public int chmod(File path, int mode) throws Exception {
    Class fileUtils = Class.forName("android.os.FileUtils");
    Method setPermissions = fileUtils.getMethod("setPermissions",
            String.class, int.class, int.class, int.class);
    return (Integer) setPermissions.invoke(null, path.getAbsolutePath(),
            mode, -1, -1);
} 
```

并打电话`chmod(file, 644);`

但是当我在文件资源管理器中检查这些文件的权限时，它会显示“--- rwx rx”。

那么如何将权限设置为 rw- r-- r--？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T10:02:29.133

```
Process process = null;
DataOutputStream dataOutputStream = null;

try {
    process = Runtime.getRuntime().exec("su");
    dataOutputStream = new DataOutputStream(process.getOutputStream());
    dataOutputStream.writeBytes("chmod 644 FilePath\n");
    dataOutputStream.writeBytes("exit\n");
    dataOutputStream.flush();
    process.waitFor();
} catch (Exception e) {
    return false;
} finally {
    try {
        if (dataOutputStream != null) {
            dataOutputStream.close();
        }
        process.destroy();
    } catch (Exception e) {
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T11:25:33.003

值不对，正确的是420（十进制的420就是八进制的644）。或者，您可以添加前导`0`以使其成为 java 八进制文字。IE

```
chmod(destinationFile, 0644) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-07T19:28:13.173

您应该能够使用以下命令对文件设置这些权限（rw- r-- r--）：

```
path.setReadOnly(true); //Sets all permissions for every owner back to read-only
path.setWritable(true); //Sets the owner's permissions to writeable 
```

`path`你的[File](https://developer.android.com/reference/java/io/File.html)对象在哪里。

您不需要使用带有反射的 FileUtils 来设置文件的权限。您可以只使用[File](https://developer.android.com/reference/java/io/File.html)类上的辅助方法。使用 File，您还可以调用：[setReadable()](https://developer.android.com/reference/java/io/File.html#setReadable(boolean,%20boolean))、[setWritable()](https://developer.android.com/reference/java/io/File.html#setWritable(boolean,%20boolean))和[setExecutable()](https://developer.android.com/reference/java/io/File.html#setExecutable(boolean,%20boolean))

# c# - 为什么泛型 IList<> 不继承非泛型 IList

> ID：14559070
> 
> 赞同：15
> 
> 时间：2013-01-28T09:33:41.803
> 
> 标签：c#, .net, generics, library-design

`IList<T>`不继承`IList`where`IEnumerable<out T>`继承`IEnumerable`。

如果修饰符是唯一的原因，那么为什么（例如，）`out`的大多数实现都实现了接口。`IList<T>``Collection<T>``List<T>``IList`

所以任何人都可以说好的，如果该陈述对于所有实现都是正确的，那么在必要时`IList<T>`直接将其转换为。`IList`但问题是虽然`IList<T>`不继承`IList`，所以不能保证每个`IList<T>`对象都是`IList`.

此外 using`IList<object>`显然不是解决方案，因为没有`out`修饰符泛型不能分配给继承较少的类；并且在这里创建 List 的新实例不是解决方案，因为有人可能希望将 实际引用`IList<T>`为`IList`指针；并且使用`List<T>`insteed of`IList<T>`实际上是一种糟糕的编程习惯，并不能满足所有目的。

如果 .NET 想要提供灵活性，即每个实现`IList<T>`都不应该有非泛型实现的合同（即`IList`），那么为什么他们不保留另一个实现泛型和非泛型版本的接口，并且不建议所有具体的想要为通用和非遗传项目收缩的类应该通过该接口收缩。

铸造`ICollection<T>`to`ICollection`和`IDictionary<TKey, TValue>`to也会出现同样的问题`IDictionary`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-18T11:34:54.103

正如您所注意到的，`T`in`IList<T>`不是*covariant*。根据经验：任何可以修改其状态的类都不能是协变的。原因是此类类通常具有具有`T`作为其参数之一类型的方法，例如`void Add(T element)`. *并且输入*位置中不允许使用协变类型参数。

除其他原因外，还添加了泛型以提供类型安全性。例如，您不能将一个添加`Elephant`到`Apple`. 如果`ICollection<T>`要扩展`ICollection`，那么您可以调用`((ICollection)myApples).Add(someElephant)`而不会出现编译时错误，就像`ICollection`方法一样`void Add(object obj)`，它似乎允许您将*任何*对象添加到列表中，而实际上您只能添加`T`. 因此，不`ICollection<T>`延伸也不延伸。`ICollection``IList<T>``IList`

C# 的创造者之一 Anders Hejlsberg 是[这样解释](http://blogs.msdn.com/b/brada/archive/2005/01/18/355755.aspx)的：

> 理想情况下，所有泛型集合接口（例如`ICollection<T>`）`IList<T>`都将从它们的非泛型对应物继承，这样泛型接口实例既可以与泛型代码一起使用，也可以与非泛型代码一起使用。
> 
> 事实证明，唯一可行的通用接口是`IEnumerable<T>`，因为只有`IEnumerable<T>`逆变*[sic ¹ ]*：在`IEnumerable<T>`中，类型参数`T`仅用于“输出”位置（返回值）而不是“输入”位置（参数）。`ICollection<T>`并且在输入和输出位置都`IList<T>`使用`T`，因此这些接口是不变的。

¹ )`IEnumerable<T>`是*协*变的

* * *

从 .Net 4.5 开始，就有了[`IReadOnlyCollection<out T>`](http://msdn.microsoft.com/en-us/library/hh881542.aspx)和[`IReadOnlyList<out T>`](http://msdn.microsoft.com/en-us/library/hh192385.aspx)协变接口。但是`IList<T>`，`ICollection<T>`许多列表和集合类并没有实现或扩展它们。坦率地说，我发现它们不是很有用，因为它们只定义`Count`and `this[int index]`。

* * *

如果我可以从头开始重新设计 .Net 4.5，我会将列表接口拆分为一个只读协变接口`IList<out T>`，其中包括`Contains`and`IndexOf`和一个可变不变接口`IMutableList<T>`。然后你可以投到`IList<Apple>`. `IList<object>`我在这里实现了这个：

> [**M42 Collections**](https://bitbucket.org/Virtlink/m42-collections/) - 协变集合、列表和数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-18T11:12:58.603

请注意，自 2012 年以来，在 .NET 4.5 及更高版本中，存在一个协变（`out`修饰符）接口，

```
public interface IReadOnlyList<out T> 
```

请参阅[其文档](http://msdn.microsoft.com/en-us/library/hh192385.aspx)。

像通常的集合类型`List<YourClass>`，`Collection<YourClass>`和`YourClass[]`做实现`IReadOnlyList<YourClass>`，因为协方差也可以被用作`IReadOnlyList<SomeBaseClass>`和最终`IReadOnlyList<object>`。

正如您已经猜到的那样，您将无法通过`IReadOnlyList<>`引用来修改您的列表。

使用这个新界面，您也许可以同时避免使用非泛型`IList`。但是，您仍然会遇到`IReadOnlyList<T>`不是`IList<T>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T09:45:17.137

创建一个接口`MyIList<T>`并让它继承自`IList<T>`and `IList`：

```
public interface MyIList<T> : IList<T>, IList
{ } 
```

现在创建一个类`MySimpleList`并让它实现`MyIList<T>`：

```
public class MySimpleList<T> : MyIList<T>
{
    public int Count
    {
        get { throw new NotImplementedException(); }
    }

    public bool IsFixedSize
    {
        get { throw new NotImplementedException(); }
    }

    public bool IsReadOnly
    {
        get { throw new NotImplementedException(); }
    }

    public bool IsSynchronized
    {
        get { throw new NotImplementedException(); }
    }

    public object SyncRoot
    {
        get { throw new NotImplementedException(); }
    }

    object IList.this[int index]
    {
        get
        {
            throw new NotImplementedException();
        }
        set
        {
            throw new NotImplementedException();
        }
    }

    public T this[int index]
    {
        get
        {
            throw new NotImplementedException();
        }
        set
        {
            throw new NotImplementedException();
        }
    }

    public void Add(T item)
    {
        throw new NotImplementedException();
    }

    public int Add(object value)
    {
        throw new NotImplementedException();
    }

    public void Clear()
    {
        throw new NotImplementedException();
    }

    public bool Contains(T item)
    {
        throw new NotImplementedException();
    }

    public bool Contains(object value)
    {
        throw new NotImplementedException();
    }

    public void CopyTo(T[] array, int arrayIndex)
    {
        throw new NotImplementedException();
    }

    public void CopyTo(Array array, int index)
    {
        throw new NotImplementedException();
    }

    public IEnumerator<T> GetEnumerator()
    {
        throw new NotImplementedException();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        throw new NotImplementedException();
    }

    public int IndexOf(T item)
    {
        throw new NotImplementedException();
    }

    public int IndexOf(object value)
    {
        throw new NotImplementedException();
    }

    public void Insert(int index, T item)
    {
        throw new NotImplementedException();
    }

    public void Insert(int index, object value)
    {
        throw new NotImplementedException();
    }

    public bool Remove(T item)
    {
        throw new NotImplementedException();
    }

    public void Remove(object value)
    {
        throw new NotImplementedException();
    }

    public void RemoveAt(int index)
    {
        throw new NotImplementedException();
    }
} 
```

您现在可以很容易地看到，您必须双重实现一堆方法。一种用于类型 T，一种用于对象。在正常情况下，您希望避免这种情况。这是一个协方差和逆变的问题。

您可以找到的最佳解释（对于 IList 和 IList 的这个具体问题，Jon 在问题的评论中已经提到了[Brad 的文章。](http://blogs.msdn.com/b/brada/archive/2005/01/18/355755.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-09T09:07:29.473

已经给出了很好的答案。不过关于 IList 的通知：

[MSDN IList 备注](https://msdn.microsoft.com/en-us/library/system.collections.ilist(v=vs.110).aspx)：“IList 实现分为三类：只读、固定大小和可变大小。(...)。有关此接口的通用版本，请参阅 `System.Collections.Generic.IList<T>`。”

这有点误导，因为在泛型方面，我们有`IList<T>`可变[大小](https://msdn.microsoft.com/en-us/library/bb354714(v=vs.110).aspx)，并且`IReadOnlyList<T>`自 4.5 以来是只读的，但是 AFAIK，没有固定大小的泛型列表。

# clojure - ClassCastException java.lang.Boolean 无法转换为 clojure.lang.IFn

> ID：14559071
> 
> 赞同：12
> 
> 时间：2013-01-28T09:33:48.860
> 
> 标签：clojure

```
(defn is-member? [a lst] 
((cond 
        (empty? lst) false
        (= a (first lst)) true
        :else (is-member? a (rest lst))
    )))

(is-member? :b '(:a :b :c)) 
```

当我执行上面的代码时，我得到了错误

> ClassCastException java.lang.Boolean 不能强制转换为 clojure.lang.IFn 用户/是成员？(NO_SOURCE_FILE:28)

为什么？我知道，如果一个表达式用括号括起来，那么这意味着它将被评估为一个函数..

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-28T09:49:30.503

你得到了双括号中的 cond 表达式。这会导致 cond 的最终结果（真或假）被作为函数调用。修复它，它可以工作。

```
=> (defn is-member?
     [a lst] 
     (cond 
       (empty? lst) false
       (= a (first lst)) true
       :else (is-member? a (rest lst))))
#'user/is-member?

=> (is-member? :b '(:a :b :c))
true 
```

顺便说一句，在 Clojure 中最惯用的方法是使用`some`.

```
=> (some #{:b} [:a :b :c])
:b 
```

这将返回实际的第一个值，但由于 Clojure 的[真实性](http://blog.jayfields.com/2011/02/clojure-truthy-and-falsey.html)，它可以在条件句中以与 true 和 false 大致相同的方式使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-10T18:49:47.623

正如我发现的那样，即使`cond`表达式在单括号中，`ClassCastException`如果将每个条件测试表达式对包装在括号中，也会得到相同的结果。

```
;; INCORRECT
(defn is-member?
  [a lst] 
  (cond 
    ((empty? lst) false)
    ((= a (first lst)) true)
    (:else (is-member? a (rest lst)))))

;; CORRECT
(defn is-member?
  [a lst] 
  (cond 
    (empty? lst) false
    (= a (first lst)) true
    :else (is-member? a (rest lst)))) 
```

# php - 在观察者中获取购物篮产品 ID

> ID：14559072
> 
> 赞同：1
> 
> 时间：2013-01-28T09:34:05.943
> 
> 标签：php, magento, observers

我已经设置了一个观察者，`sales_quote_add_item`以便在要添加某种产品时清除购物车（它只应该单独订购）。我只是不确定如何获取即将添加的产品的产品 ID。经过一些试验和错误，我想出了这个：

```
 $tmp = $observer->getEvent()->getQuoteItem()->getData();
    echo $tmp['product_id']; 
```

这似乎是一个非常丑陋的解决方案。我确定有一些快捷方式或适当的功能可以调用这个，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:39:37.920

使用以下代码获取报价项目数据的产品ID

```
$cart = Mage::getModel('checkout/cart')->getQuote();
foreach ($cart->getAllItems() as $item) 
{
   $productId = $item->getProduct()->getId();
} 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:43:45.293

您的解决方案足够好

```
$productId = $observer->getEvent()->getQuoteItem()->getProductId(); 
```

如果需要，您可以在之后加载产品

```
$product = Mage::getModel('catalog/product')->load($productId); 
```

# c# - 覆盖 DateTimePicker 以添加周数时设置日历大小

> ID：14559074
> 
> 赞同：5
> 
> 时间：2013-01-28T09:34:17.467
> 
> 标签：c#, winforms, datetimepicker

我正在尝试创建一个`DateTimePicker`显示周数的项目，[如此处所示（代码项目示例）](http://www.codeproject.com/Articles/17063/ExtendedDateTimePicker-control-with-week-numbers)。

它工作得相当好，除了一个小细节；尝试选择日期时弹出的日历大小不合适。如您所见，日历区域有点“狭窄”，尤其是在右边缘。

![在此处输入图像描述](../Images/70e0d6c5119d5ee62192a2404b876f41.png)

我可以单击此处的右下角，然后将其拖出一点 - 足以将其展开以使其看起来正确：

![在此处输入图像描述](../Images/a7ceee3f3c76725172e50863a9321751.png)

我似乎找不到任何方法来强制日历从一开始就正确/完整大小，或者调整它的大小。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T14:09:45.007

终于找到了一个似乎可行的解决方案——至少现在是这样。

日历部分似乎有两个窗口`DateTimePicker`。显然，我的代码会自动找到内部的正确大小（至少或多或少？），但不是外部的。

一些研究导致了下面的代码。以下链接提供了一些有用且相关的信息：

*   [GetWindowLong 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633584%28v=vs.85%29.aspx)（用于获取有关要编辑的窗口的信息）
*   [GetParent 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633510%28v=vs.85%29.aspx)（查找外部窗口，因此我们也可以对其应用设置）

诀窍是在（内部）窗口的高度和宽度上添加一点，然后将相同的高度和宽度应用于外部窗口（我使用该`GetParrent()`函数访问）。我通过反复试验找到了“正确”的尺寸：当尺寸与日历内容所需的尺寸相匹配时，它就无法再调整大小了。

是的，这感觉有点像 hack，不，我还无法验证它是否可以在我自己的计算机之外的其他计算机上完美运行。我有点担心必须给出特定的高度和宽度值，但我希望这不会受到屏幕分辨率或其他任何东西的影响。

**希望处于类似情况的其他人会发现该代码很有用。**
（*下面可以直接替换一个常规`DateTimePicker`来显示日历中的周数*）

```
using System;
using System.ComponentModel;
using System.Drawing;
using System.Runtime.InteropServices;
using System.Windows.Forms;

public class DatePickerWithWeekNumbers : DateTimePicker
{
    [DllImport("User32.dll")]
    private static extern int GetWindowLong(IntPtr handleToWindow, 
                                            int offsetToValueToGet);

    [DllImport("User32.dll")]
    private static extern int SetWindowLong(IntPtr h, 
                                            int index, 
                                            int value);

    private const int McmFirst = 0x1000;
    private const int McmGetminreqrect = (McmFirst + 9);
    private const int McsWeeknumbers = 0x4;
    private const int DtmFirst = 0x1000;
    private const int DtmGetmonthcal = (DtmFirst + 8);

    [DllImport("User32.dll")]
    private static extern IntPtr SendMessage(IntPtr h,
                                             int msg, 
                                             int param, 
                                             int data);

    [DllImport("User32.dll")]
    private static extern IntPtr GetParent(IntPtr h);

    [DllImport("User32.dll")]
    private static extern int SendMessage(IntPtr h, 
                                          int msg,
                                          int param, 
                                          ref Rectangle data);

    [DllImport("User32.dll")]
    private static extern int MoveWindow(IntPtr h, 
                                         int x, 
                                         int y,
                                         int width, 
                                         int height, 
                                         bool repaint);

    [Browsable(true), DesignerSerializationVisibility(
        DesignerSerializationVisibility.Visible)]
    public bool DisplayWeekNumbers { get; set; }

    protected override void OnDropDown(EventArgs e)
    {
        // Hex value to specify that we want the style-attributes
        // for the window:
        const int offsetToGetWindowsStyles = (-16);

        IntPtr pointerToCalenderWindow = SendMessage(Handle, 
                                                     DtmGetmonthcal,  
                                                     0,  
                                                     0);
        int styleForWindow = GetWindowLong(pointerToCalenderWindow, 
                                           offsetToGetWindowsStyles);

        // Check properties for the control - matches available 
        // property in the graphical properties for the DateTimePicker:
        if (DisplayWeekNumbers)
        {
            styleForWindow = styleForWindow | McsWeeknumbers;
        }
        else
        {
            styleForWindow = styleForWindow & ~McsWeeknumbers;
        }

        // Get the size needed to display the calendar (inner window)
        var rect = new Rectangle();
        SendMessage(pointerToCalenderWindow, McmGetminreqrect, 0, ref rect);

        // Add to size as needed (I don't know why 
        // this was not correct initially!)
        rect.Width = rect.Width + 28;
        rect.Height = rect.Height + 6;

        // Set window styles..
        SetWindowLong(pointerToCalenderWindow, 
                      offsetToGetWindowsStyles, 
                      styleForWindow);

        // Dont move the window - just resize it as needed:
        MoveWindow(pointerToCalenderWindow, 
                   0, 
                   0, 
                   rect.Right, 
                   rect.Bottom, 
                   true);

        // Now access the parrent window..
        var parentWindow = GetParent(pointerToCalenderWindow);
        // ...and resize that the same way:
        MoveWindow(parentWindow, 0, 0, rect.Right, rect.Bottom, true);

        base.OnDropDown(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-27T07:15:09.343

对我来说，`MCS_WEEKNUMBERS`通过 DateTimePicker 的`DTM_SETMCSTYLE`消息设置会自动产生正确的 MonthCal 控件大小：

```
SendMessage(Handle, DTM_FIRST + 11, 0, SendMessage(Handle, DTM_FIRST + 12, 0, 0) | MCS_WEEKNUMBERS); 
```

在Kjartan 的解决方案中的位置`DTM_FIRST = 0x1000`和位置。是并且在Microsoft 的文档中。`MCS_WEEKNUMBERS = 0x4``DTM_FIRST + 11``DTM_SETMCSTYLE``DTM_FIRST + 12``DTM_GETMCSTYLE`

与 Kjartan 的解决方案不同，此调用必须在第一个下拉菜单之前使用，但在某些情况下，在表单初始化时对我不起作用，所以我将其延迟到表单已经创建并在这些情况下可见的时候。一个电话就足够了，DateTimePicker 将保存样式以供将来的下拉菜单使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-05T10:11:57.930

好的，尝试在 Program.cs 中注释行

```
Application.EnableVisualStyles(); 
```

然后尝试执行。

# python - 当有任何异常时，Python 脚本应该给我发邮件

> ID：14559077
> 
> 赞同：0
> 
> 时间：2013-01-28T09:34:27.870
> 
> 标签：python, smtp

我希望我的 Python 脚本在出现任何异常时向我发送邮件。我尝试了一些与我发现的 SMTP 相关的代码，但不幸的是它没有执行并显示错误。请帮我找出主要问题。

SMTP 代码：

```
import smtplib
import string

SERVER = 'localhost'
SUBJECT = "Test email from Python"
TO = "abc.def@defghij.com"
FROM = "python@mydomain.com"
text = "Sample of mail"
BODY = string.join(("From: %s" % FROM,"To: %s" % TO,"Subject: %s" %SUBJECT ,"",text), "\r\n")

server = smtplib.SMTP(SERVER) #Here in this line it showing error 

server.sendmail(FROM,TO,BODY)

server.quit() 
```

> ** 错误消息***服务器 = smtplib.SMTP(SERVER)
> 
> socket.error: (10047, '协议族不支持地址族：参见[http://wiki.python.org/jython/NewSocketModule#IPV6addresssupport](http://wiki.python.org/jython/NewSocketModule#IPV6addresssupport) ')

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T21:23:58.023

你可以用 yagmail 试试这个，它会更方便：

```
from yagmail import SMTP
SMTP(FROM).send(TO, SUBJECT, text) 
```

它真的只需要这么多，如果你做了一些设置，你已经注册并且安全（不需要在脚本中写你的用户名和密码）。

[在github 上](https://github.com/kootenpv/yagmail)阅读有关它的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:59:16.930

我用 Jython 2.5.3 和 Python 2.7 测试了这段代码，如果我`SERVER`从`localhost`真正的 SMTP 服务器更改它就可以工作。我从我的电子邮件客户端配置中获取了 SMTP 服务器地址。

# c++ - 在 C/C++ 源代码中验证格式字符串的工具

> ID：14559084
> 
> 赞同：2
> 
> 时间：2013-01-28T09:34:49.180
> 
> 标签：c++, c

我在大型 C/C++ 代码库中更新了 printf 样式格式字符串的内容和参数。代码编译正常，但很难真正得到这些错误并验证我的更改是否正确。

是否有工具/编译器选项可以验证格式字符串是否具有正确的编号。的论点。如果它不尝试编译整个东西会很好，因为依赖项等必须存在于预期的位置。

我可以编写一个快速脚本，但我可以重用已经存在的东西并处理极端情况。

就像是 ：-

```
% cat test.c

#include <iostream>
#include "dependency2.h"
int main()
{
    function2(log, "You encountered a common error %s: %d", error)
}

% somenicetool test.c

5: too few arguments 
```

我试过clang，但它给出的第一个错误是：-

```
% clang -fsyntax-only test.c

#include "dependency2.h"
         ^
file not found
1 error generated 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T09:55:40.863

如果使用`gcc`and `--Wformat`，并且您有自己的功能，则需要使用`__attribute__(format, printf, format_argno, first_var_arg)`after 功能。

例如：

```
void log_print(FILE *logfile, int level, const char *format, ...)
   __attribute__(format, printf, 3, 4); 
```

gcc 还理解“scanf”、“strfmon”和“strftime”格式规范，只需将“printf”替换为适合您功能的任何内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T09:46:57.287

使用 gcc，您可以使用以下`--Wformat`选项：

> 检查对 printf 和 scanf 等的调用，以确保提供的参数具有适合指定格式字符串的类型，并且格式字符串中指定的转换是有意义的。这包括 printf、scanf、strftime 和 strfmon（X/Open 扩展，不在 C 标准中）系列（或其他特定于目标的系列）中的标准函数和其他由格式属性（请参阅函数属性）指定的函数。

有关更多详细信息，请参阅[gcc 文档](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wformat-272)。

编辑：更仔细地看一下，您似乎想要检查对您自己的函数的调用，这些函数可能会将调用转发给 printf 和朋友。您可能必须使用[`format`function 属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#index-Wformat-2586)来装饰您的函数，以便从 gcc 获取警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T09:50:05.640

我认为[CPPCheck 会](http://cppcheck.sourceforge.net/)收集这些，还有很多很多......

**编辑：**嗯。我有一种感觉，它只适用于标准库函数，并且不理解你可以用来告诉 GCC 你自己的函数使用格式字符串的“函数属性”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-17T17:54:43.687

关于解决方案要记住一件事`__attribute__ ((format (printf, n, m)))`：如果您的函数是类的非静态成员方法，则必须将 1 添加到 n 和 m 因为它被编译为一个简单的函数，**this**指针作为实际的第一个参数。

# javascript - 缩小网页以适应 iframe 尺寸

> ID：14559085
> 
> 赞同：0
> 
> 时间：2013-01-28T09:34:53.000
> 
> 标签：javascript, jquery, html, css, bsp

我正在尝试将网页的内容放入尺寸固定的 iframe 中。

我需要调整页面大小，以使整个页面适合 iframe 的给定尺寸而不会被截断。

而且我不需要滚动条，页面应该适合没有滚动条。

我已经尝试过这样的事情，但没有奏效。

```
<iframe width="650" height="350" src="http://www.bbc.co.uk" style="-ms-transform: scale(,);"></iframe> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:48:47.567

恐怕你不能。您的选择是使用站点特定的 css 来减小元素的大小。

如果您不想要滚动条，请尝试溢出：隐藏的 css 属性。

检查此[堆栈溢出重复项](https://stackoverflow.com/questions/2630308/possible-to-shrink-contents-of-iframe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:10:53.397

由于 iframe 的给定尺寸，您不需要滚动条，所以只需添加 scrolling="no"

检查这个

```
<iframe width="650" height="350" scrolling="no" src="http://www.bbc.co.uk"></iframe> 
```

Preeti Chawla， [网络开发人员](http://www.tekritisoftware.com/brochure/Web-2.0-Design)

# c# - 在 windows phone 7 中解析 xml 时出错

> ID：14559089
> 
> 赞同：1
> 
> 时间：2013-01-28T09:35:03.587
> 
> 标签：c#, linq, windows-phone-7, xml-parsing

下面要在我的 Windows Phone 应用程序中解析的 xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist>
   <dict>
  <key>2013</key>
   <dict>
      <key>January</key>
        <dict>
        <key>Girivalam</key>
        <dict>
            <key>StartDate</key>
            <date>2013-01-26T04:10:00Z</date>
            <key>EndDate</key>
            <date>2013-01-27T05:26:00Z</date>
            <key>FullMoon</key>
            <date>2013-01-26T04:10:00Z</date>
        </dict>
                </dict>
       </dict>
      </dict>
</plist> 
```

我使用以下代码对其进行了解析。

```
 private void Parsing()
    {
        using (XmlReader reader = XmlReader.Create(new StringReader("/Parse/appmodel-data.xml")))
        {
            XDocument document = XDocument.Load(reader);
            IEnumerable<XElement> AuthElement = from elements in document.Descendants("dict")
                                                select elements;
        }
    } 
```

当我执行应用程序时，我收到错误**“根级别的数据无效。第 1 行，位置 1。”** 谁能纠正我哪里出错了？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:56:21.160

```
StreamResourceInfo xml = Application.GetResourceStream(new Uri("/ProjectName;component/FileFolder/filename.xml", UriKind.Relative));
XElement xmlElement = XElement.Load(xml.Stream); 
```

您可以使用您的语句本身。唯一的事情是正确引用 XML 的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:56:42.640

将文件标记为资源并尝试以下操作；

```
System.IO.Stream fileStream = Application.GetResourceStream(new Uri(@"/Change this with the AssemblyName;component/Parse/appmodel-data.xml",UriKind.Relative)).Stream;

XDocument document = XDocument.Load(fileStream);                        
IEnumerable<XElement> AuthElement = from elements in document.Descendants("dict")
                                        select elements; 
```

# android - 关于绘图速度

> ID：14559091
> 
> 赞同：0
> 
> 时间：2013-01-28T09:35:08.807
> 
> 标签：android, performance, canvas, drawing

我想绘制保存到数据对象的 2000 个点。

我使用以下代码：

```
Bitmap bitmap = Bitmap.createBitmap(2000,100，Config.ARGB_8888);
Canvas canvasTemp=new Canvas(bitmap);
Paint paint=new Paint();
for (int i = 0; i < 2000; i++) {
canvasTemp.drawPoint(i, data.getData(i), paint);
}
   Matrix matrix = new Matrix(); 
    float scaleWidth = ((float) 640 / 2000);   
float scaleHeight = ((float) 480/ 100);   
matrix.postScale(scaleWidth, scaleHeight);   
 Bitmap newbmp = Bitmap.createBitmap(bitmap, 0, 0,2000, 100, matrix, true);   
canvas.drawBitmap(newbmp, 0, 0, new Paint()); 
```

这个绘图速度太慢了。它需要大约 5 或 6 秒。

如何让绘图速度更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:40:50.137

为什么不直接在画布上作画？它可以节省您创建两个（大）位图：

```
Paint paint=new Paint();
Matrix matrix = new Matrix(); 
float scaleWidth = ((float) 640 / 2000);   
float scaleHeight = ((float) 480/ 100);   
matrix.postScale(scaleWidth, scaleHeight);   
canvast.concat(matrix);
for (int i = 0; i < 2000; i++) {
  canvas.drawPoint(i, data.getData(i), paint);
} 
```

只需用于[`concat()`](http://developer.android.com/reference/android/graphics/Canvas.html#concat%28android.graphics.Matrix%29)缩放画布的绘制命令。

附加说明：不建议在 a 的 draw 方法中创建新对象（ `paint`, `matrix`, 两个大！位图） 。`View`它会导致大量实例创建/删除，从而导致更频繁地激活垃圾收集器 (GC)，从而导致应用程序出现（巨大的）性能问题！

相反，在你的构造函数中创建一次`paint`and`matrix`对象`View`。

# yii - 将多维保存到数据库

> ID：14559095
> 
> 赞同：0
> 
> 时间：2013-01-28T09:35:31.287
> 
> 标签：yii

```
大批
(
    [名称] => 数组
        (
            [0] => 1
            [1] => 1
        )

    [年龄] => 数组
        (
            [0] => 今天
            [1] => 今天
        )

    [grp] => 数组
        (
            [0] => 2
            [1] => 2
        )

)
```

我如何将其保存到 yii 中的表格中。name、age 和 grp 可以有无限数量的值。

表 id、名称、年龄和 grp

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:11:45.817

如果每个数组索引都是 db 中的新记录，则可以在控制器中使用它：

```
$lenth = count($yourArray['name']); // this line will return the count of records must be inserted to db table
for( $i = 0 ; $i < $lenth ; $i++ )
{
    $newRecord = new ModelName;
    $newRecord->name = $yourArray['name'][$i];
    $newRecord->age = $yourArray['age'][$i];
    $newRecord->grp = $yourArray['grp'][$i];
    $newRecord->save();
} 
```

# php - 对象分配与引用

> ID：14559100
> 
> 赞同：4
> 
> 时间：2013-01-28T09:35:41.230
> 
> 标签：php, oop, class, object

我在[PHP Classes and Objects: The Basics](http://php.net/manual/en/language.oop5.basic.php)上找到了以下示例，但我不明白后台发生了什么。

有一个说法：

> 将已创建的类实例分配给新变量时，新变量将访问与分配的对象相同的实例。将实例传递给函数时，此行为是相同的。可以通过克隆来制作已创建对象的副本。

我假设这是默认情况下通过引用传递对象的状态，所以[`clone`](http://php.net/manual/en/language.oop5.cloning.php)如果打算制作真实副本，应该这样做。（~~PHP 中没有浅拷贝。~~是的`clone`，默认情况下有。）

考虑以下示例（从上面的链接复制）：

```
<?php

$instance = new SimpleClass();

$assigned   =  $instance;
$reference  =& $instance;

$instance->var = '$assigned will have this value';

$instance = null; // $instance and $reference become null

var_dump($instance);
var_dump($reference);
var_dump($assigned);

?> 
```

正如那里所说，这会输出以下内容：

```
NULL
NULL
object(SimpleClass)#1 (1) {
   ["var"] => string(30) "$assigned will have this value"
} 
```

我不明白。

如果`$assigned = $instance;`默认情况下是通过引用（别名）对对象进行分配，那么为什么`$assigned`仍然是 的对象`SimpleClass`持有`$var`具有 that 的属性`string`，而`NULL`被分配给`$instance`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:38:45.533

说这`$assigned = $instance`是引用分配是一种误导。你最好把它想象成`$instance`一个指针：它具有值（不是引用）语义，尽管它的许多副本可以指向同一个对象。

另一方面，`$reference =& $instance`确实创建了一个别名：当检查另一个变量时，其中一个变量发生的任何事情也立即可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:44:36.290

对象引用和变量引用是有区别的：

对象引用实际上是*对象标识符*，存储为变量的*值*，对象本身存储在单独的表中，与变量无关。

# python - 如何验证ssl证书？

> ID：14559101
> 
> 赞同：1
> 
> 时间：2013-01-28T09:35:43.117
> 
> 标签：python, validation, ssl-certificate

我正在研究 dns 屏蔽。我要求用户提供屏蔽和 SSL 证书的 URL。我需要验证用户提供的证书格式是否有效。问题是如果用户没有提供有效的证书 apache 不会重新启动。我使用python。

我尝试了此处提供的一些解决方案，但无法验证 ssl 证书。

任何帮助将不胜感激。

谢谢！

# asp.net-mvc - Spring Social：获取用户（LinkedIn、Facebook）电子邮件

> ID：14559104
> 
> 赞同：0
> 
> 时间：2013-01-28T09:35:51.183
> 
> 标签：asp.net-mvc, spring, spring.net

我正在使用 Spring Social 连接到 LinkedIn 和 Facebook。我从这个链接下载了源代码：

[Github Spring Social LinkedIn 示例](https://github.com/SpringSource/spring-net-social-linkedin "Github Spring Social LinkedIn 示例")

在这个项目中，我在示例[目录](https://github.com/SpringSource/spring-net-social-linkedin/tree/master/examples/Spring.MvcQuickStart)下运行“Spring.MvcQuickStart” 。它工作得很好，但我不知道如何获取用户的电子邮件。我需要知道如何在此[链接](https://github.com/SpringSource/spring-net-social-linkedin/blob/master/examples/Spring.MvcQuickStart/Spring.MvcQuickStart/Controllers/LinkedInController.cs)给出的控制器中获取用户的电子邮件。我添加了这样的范围参数：

```
parameters.Add("scope", "r_emailaddress r_fullprofile"); 
```

我可以像这样获得用户的完整个人资料：

```
LinkedInFullProfile profile = linkedInClient.ProfileOperations.GetUserFullProfil eAsync().Result; 
```

但完整的个人资料不包含用户电子邮件（用户在其 LinkedIn 个人资料中提供的电子邮件）。我不知道如何获取用户的电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:48:43.700

实际实现不会读取 email 属性，但您可以使用经典的 REST 操作来获取它：

```
JsonValue jsonResult = linkedIn.RestOperations.GetForObjectAsync<JsonValue>("people/{~}:(email-address)?format=json").Result; 
```

# jsf - 即使 columns 属性设置为 2，值也显示在单个列中

> ID：14559105
> 
> 赞同：1
> 
> 时间：2013-01-28T09:36:01.293
> 
> 标签：jsf, jsf-2

我正在使用 a 在两列中打印两个字符串，如下面的代码所示：

```
<h:panelGrid
            columns="2" border="1">
        <ui:repeat
            value="#{bean.selectedLocales}"
                    var="locale">
            <h:outputText value="#{msg[locale]}"/>
        </ui:repeat>
</h:panelGrid> 
```

上面打印了两个语言环境**en**和**de**从*同一*列中的列表中获取，尽管我使用`ui:repeat`and `columns="2"`in `<h:panelGrid>`。如何让它在两个不同的列中打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:50:30.923

原因是您`h:panelGrid`只包含一个嵌套元素：`ui:repeat`，并且它不能在两列中显示一个元素。`columns`使用供应商特定的例如做一个动态数据表怎么样。`p:columns`，`ice:columns`在 JSF 页面和`javax.faces.model.ListDataModel`托管 bean 中？

# iphone - ZBarReader 在 iOS 6 中仅扫描 UPC_A 格式

> ID：14559111
> 
> 赞同：1
> 
> 时间：2013-01-28T09:36:15.747
> 
> 标签：iphone, ipad, ios6, barcode-scanner, zbar-sdk

我正在**iOS 6**中开发条形码阅读器应用程序，

我正在使用`ZBar sdk`，我使用本 [教程开发了应用程序..](http://zbar.sourceforge.net/iphone/sdkdoc/tutorial.html#create-the-app) 当我扫描任何条形码时，它只扫描`UPC`格式的产品，但它不扫描任何其他格式的产品，如`EAN_13`或`Code_128`等。

这是我的代码片段，

```
- (IBAction) scanButtonTapped
{

    ZBarReaderViewController *reader = [ZBarReaderViewController new];
    reader.readerDelegate = self;
    reader.supportedOrientationsMask = ZBarOrientationMaskAll;

    ZBarImageScanner *scanner = reader.scanner;

    [scanner setSymbology: ZBAR_I25
                   config: ZBAR_CFG_ENABLE
                       to: 0];

    [self presentViewController:reader animated:YES completion:nil];

}

- (void) imagePickerController: (UIImagePickerController*) reader
 didFinishPickingMediaWithInfo: (NSDictionary*) info
{
    id<NSFastEnumeration> results =
    [info objectForKey: ZBarReaderControllerResults];
    ZBarSymbol *symbol = nil;
    for(symbol in results)
        break;

    NSLog(@"symbol.data=%@",symbol.data);

    [reader dismissViewControllerAnimated:YES completion:nil];

} 
```

如何扫描所有类型的产品？任何想法 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:50:02.850

来自[Zbar 常见问题解答](http://zbar.sourceforge.net/iphone/sdkdoc/faq.html)

> ZBar 解码器默认仅启用 EAN-13

和

> UPC-A 符号系统是 EAN-13 的子集，以前导 0 开头...您可以通过显式启用 UPC-A 来选择接收 12 位结果。

听起来好像启用了 EAN 13。要启用 Code 128，请在禁用 Interleaved 2 of 5 (I25) 后添加以下代码段

```
[scanner setSymbology: ZBAR_CODE128
     config: ZBAR_CFG_ENABLE
     to: 1]; 
```

如果您想严格控制启用和禁用的内容，请禁用所有符号系统并有选择地启用您想要的符号系统

```
// Disable all symbologies
[scanner setSymbology: 0
     config: ZBAR_CFG_ENABLE
     to: 0];
// Enable EAN 13
[scanner setSymbology: ZBAR_EAN13
     config: ZBAR_CFG_ENABLE
     to: 1];
// Enable UPC-A
[scanner setSymbology: ZBAR_UPCA
     config: ZBAR_CFG_ENABLE
     to: 1];
// Enable Code 128
[scanner setSymbology: ZBAR_CODE128
     config: ZBAR_CFG_ENABLE
     to: 1] 
```

# android - 为什么 Setvisibility() 在自定义视图中不起作用？

> ID：14559115
> 
> 赞同：1
> 
> 时间：2013-01-28T09:36:23.937
> 
> 标签：android, visibility, custom-component

我有这样的布局

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:alignParentTop ="true"
        android:scrollbars="none" >

        <LinearLayout
            android:id="@+id/linearLayout4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <Button
                android:id="@+id/btnLogin"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginBottom="10dip"
                android:layout_marginTop="10dip"
                android:text="Login" />

            <RelativeLayout
                android:id="@+id/layout"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginBottom="10dip"
                android:layout_marginTop="10dip"
                android:visibility="gone" >
                <Button
                    android:id="@+id/btnEditUser"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/txtLoggedInfo"
                    android:layout_centerInParent="true"
                    android:layout_marginTop="5dip"
                    android:text="Edit User" />
            </RelativeLayout>

        </LinearLayout>
    </ScrollView>

</RelativeLayout> 
```

我的自定义视图是

```
public class MyView extends RelativeLayout {

    private Context context = null;
    private TextView txtLoggedInfo;
    private View contentView = null;

    public MyView(Context context) {
        super(context);
        this.context = context;
        getLayout();
    }

    private void getLayout() {

        LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Service.LAYOUT_INFLATER_SERVICE);
        contentView = layoutInflater.inflate(R.layout.main, null);
        this.addView(contentView);

                //......

        if (bool ) {
            ((Button)findViewById(R.id.btnLogin)).setVisibility(View.GONE);
            ((RelativeLayout) findViewById(R.id.layout)).setVisibility(View.VISIBLE);

        } else {

            ((Button)findViewById(R.id.btnLogin)).setVisibility(View.VISIBLE);
            ((RelativeLayout) findViewById(R.id.layout))
                    .setVisibility(View.GONE);
        }

    }

    } 
```

我想在单击登录按钮时开始一个新活动并在登录后返回 MyView。我使用

```
RelativeLayout.LayoutParams layputParams = new Relative.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
this.addContentView(new MyView(this), layputParams); 
```

在活动中返回活动。这样做时，视图可见性不会改变。这里有什么问题，我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:52:11.860

我强烈建议你这样做

```
 @Override
  public void onWindowFocusChanged(boolean hasFocus) {
 if (bool ) {
        ((Button)findViewById(R.id.btnLogin)).setVisibility(View.GONE);
        ((RelativeLayout) findViewById(R.id.layout)).setVisibility(View.VISIBLE);

    } else {

        ((Button)findViewById(R.id.btnLogin)).setVisibility(View.VISIBLE);
        ((RelativeLayout) findViewById(R.id.layout))
                .setVisibility(View.GONE);
    }
  super.onWindowFocusChanged(hasFocus);
} 
```

这意味着如果窗口焦点发生了变化，则所有内容都已创建。在您之前的代码中，条件可能不起作用，因为尚未加载所有内容。

# maven - 如何在 jacoco:report 之后禁用 jacoco-agent？

> ID：14559117
> 
> 赞同：4
> 
> 时间：2013-01-28T09:36:26.087
> 
> 标签：maven, integration-testing, jacoco

我有一个 Maven 项目，使用“测试”阶段和“集成测试”阶段。在测试阶段，执行 JUnit-Tests，在集成测试中有 HTMLUnit-tests。我正在使用 Jacoco[1]-maven-plugin 来测量我的项目的 JUnit 测试完成的代码覆盖率。在进行集成测试时，我使用 maven-embedded-glassfish-plugin 启动 glassfish-server 并在执行测试之前部署我的应用程序。

可悲但真实，我必须暂时禁用 jacoco，因为它与“集成测试”阶段不协调。

Jacoco 的报告目标是/应该在准备包阶段执行，所以我认为它不应该影响集成测试阶段。但是当我启用 jacoco:report 时，由于内存大小问题 [2]，我的集成测试不再运行。

如何停止 jacoco:report 影响集成测试阶段？

* * *

[1] [http://www.eclemma.org/jacoco/](http://www.eclemma.org/jacoco/)

[2]

```
java.lang.instrument.IllegalClassFormatException: Error while instrumenting class com/steadystate/css/parser/SACParserCSS21TokenManager.
        at org.jacoco.agent.rt_6l8m50.CoverageTransformer.transform(CoverageTransformer.java:91)
        at sun.instrument.TransformerManager.transform(TransformerManager.java:188)
        at sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:424)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
        at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at com.steadystate.css.parser.SACParserCSS21.<init>(SACParserCSS21.java:2196)
        at com.steadystate.css.parser.SACParserCSS21.<init>(SACParserCSS21.java:23)
        at com.gargoylesoftware.htmlunit.javascript.host.css.CSSStyleSheet.parseCSS(CSSStyleSheet.java:530)
        at com.gargoylesoftware.htmlunit.javascript.host.css.CSSStyleSheet.<init>(CSSStyleSheet.java:152)
        at com.gargoylesoftware.htmlunit.javascript.host.html.HTMLStyleElement.getSheet(HTMLStyleElement.java:73)
        at com.gargoylesoftware.htmlunit.javascript.host.css.StyleSheetList.item(StyleSheetList.java:129)
        at com.gargoylesoftware.htmlunit.javascript.host.Window.getComputedStyle(Window.java:1591)
        at com.gargoylesoftware.htmlunit.javascript.host.html.HTMLElement.getCurrentStyle(HTMLElement.java:2465)
        at com.gargoylesoftware.htmlunit.html.DomNode.isDisplayed(DomNode.java:688)
        at com.gargoylesoftware.htmlunit.html.HtmlSerializer.isVisible(HtmlSerializer.java:377)
        at com.gargoylesoftware.htmlunit.html.HtmlSerializer.appendText(HtmlSerializer.java:371)
        at com.gargoylesoftware.htmlunit.html.HtmlSerializer.appendNode(HtmlSerializer.java:126)
        at com.gargoylesoftware.htmlunit.html.HtmlSerializer.appendChildren(HtmlSerializer.java:249)
        at com.gargoylesoftware.htmlunit.html.HtmlSerializer.appendNode(HtmlSerializer.java:198)
        at com.gargoylesoftware.htmlunit.html.HtmlSerializer.appendChildren(HtmlSerializer.java:249)
        at com.gargoylesoftware.htmlunit.html.HtmlSerializer.appendNode(HtmlSerializer.java:198)
        at com.gargoylesoftware.htmlunit.html.HtmlSerializer.appendChildren(HtmlSerializer.java:249)
        at com.gargoylesoftware.htmlunit.html.HtmlSerializer.appendNode(HtmlSerializer.java:198)
        at com.gargoylesoftware.htmlunit.html.HtmlSerializer.appendChildren(HtmlSerializer.java:249)
        at com.gargoylesoftware.htmlunit.html.HtmlSerializer.appendNode(HtmlSerializer.java:198)
        at com.gargoylesoftware.htmlunit.html.HtmlSerializer.asText(HtmlSerializer.java:57)
        at com.gargoylesoftware.htmlunit.html.DomNode.asText(DomNode.java:740)
        at webappTest.IndexIT.index(IndexIT.java:24)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
        at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray2(ReflectionUtils.java:208)
        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:158)
        at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:86)
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:95)
Caused by: java.lang.RuntimeException: Method code too large!
        at org.jacoco.agent.rt_6l8m50.asm.MethodWriter.a(Unknown Source)
        at org.jacoco.agent.rt_6l8m50.asm.ClassWriter.toByteArray(Unknown Source)
        at org.jacoco.agent.rt_6l8m50.core.instr.Instrumenter.instrument(Instrumenter.java:70)
        at org.jacoco.agent.rt_6l8m50.core.instr.Instrumenter.instrument(Instrumenter.java:82)
        at org.jacoco.agent.rt_6l8m50.CoverageTransformer.transform(CoverageTransformer.java:89)
        ... 67 more
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.313 sec
Exception in thread "ThreadedStreamConsumer" Exception in thread "Thread-25" Exception in thread "Thread-26" Exception in thread "DynamicReloader" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T13:58:58.043

好的，所以我看到了问题。

类的方法 jjMoveNfa_0

[http://grepcode.com/file/repo1.maven.org/maven2/net.sourceforge.cssparser/cssparser/0.9.5/com/steadystate/css/parser/SACParserCSS21TokenManager.java](http://grepcode.com/file/repo1.maven.org/maven2/net.sourceforge.cssparser/cssparser/0.9.5/com/steadystate/css/parser/SACParserCSS21TokenManager.java)

4203 loc 非常长。因此，您的解决方案应该是避免对此类进行检测。

您可以通过告诉 jacoco-maven-plugin 来排除包含该类的包“com.steadystate”：

```
<plugin>
  <groupId>org.jacoco</groupId> 
  <artifactId>jacoco-maven-plugin</artifactId>
  <version>${jacoco.version}</version>
  <configuration>
  <excludes>
    <exclude>**com.steadystate*</exclude>
  </excludes>
  ...
</plugin> 
```

# javascript - 为什么这条线在javascript中执行？

> ID：14559120
> 
> 赞同：1
> 
> 时间：2013-01-28T09:36:32.423
> 
> 标签：javascript

收到同事的询问。我无法回答这个问题。

```
var x = '9'; // Line no 1
x=='7' // Line no 2
//doing something with x 
```

第 2 行没有给出任何错误。

另一种情况

```
var x == '7'; 
```

浏览器：语法错误：缺失；声明之前

这是因为分配总是由单个'='完成。

问题 ：

1.  第一个场景如何执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:38:12.180

```
x == '7' 
```

该行是一个布尔表达式。它的值被计算并简单地丢弃。有些人鼓励使用尤达条件

```
if(7 == x) 
```

代替

```
if(x == 7) 
```

这样您就不会意外键入`if(x = 7)`并让自己难以找到错误。

这个

```
var x == '7' 
```

另一方面，应该是一个变量声明，所以`==`操作符在这里是非法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:39:29.083

Javascript`x=='7'`视为`(x=='7')`.

基本上你有：

```
var x = '9'; // Line no 1
false;
//doing something with x 
```

Js 引擎评估`false`. 然后转到下一条指令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:39:31.923

== 不是赋值，它是一个布尔表达式。

我怀疑浏览器看到返回值从未使用过，甚至通过不执行此位进行优化。

您使用哪种浏览器（或解释器）？

# python - 如何覆盖面板的最小尺寸？

> ID：14559124
> 
> 赞同：1
> 
> 时间：2013-01-28T09:36:45.467
> 
> 标签：python, wxpython, wxwidgets

我正在尝试实现一个面板子类，如果内容超出其垂直边界，它将自动插入垂直滚动条。我希望面板在各个方面都像普通面板一样工作**，**除了一个：面板的最小高度不是它的尺寸器的最小高度，它应该有一个静态值（比如 200），并且当面板低于其尺寸器的高度，应该会出现一个垂直滚动条。换句话说，当面板的高度*高于*sizer的最小高度时，它的功能应该与普通面板完全一样。

我遇到的问题是面板上的`DoGetBestSize`和之类的覆盖函数`GetMinSize`没有任何效果，因为这些函数从未被调用（我通过插入断点进行了检查）。我猜面板的父级直接与面板的 sizer 通信，在这种情况下，它是从面板外部设置的普通 box sizer。

```
class ScrolledPanel(wx.Panel):
    """A panel that will automatically add scrollbars when needed."""

    def __init__(self, parent):
        wx.Panel.__init__(self, parent, -1)

        self.SetBackgroundColour('#FF0000')

    # This function is never called.
    def DoGetBestSize(self):
        """Override the minimum size of the panel."""

        default = self.GetSizer().GetMinSize()
        default.SetHeight(250)

        return default 
```

能不能达到我想要的效果？如果是这样，我该如何规避上述问题？

[这是我尝试使用滚动面板的代码](http://pastebin.com/XJi13Zge)。

* * *

### 更新

我想我会尝试覆盖该`SetSizer`功能，将那个sizer作为人质并就尺寸进行咨询，但实际上并没有在面板上设置sizer。这样`DoGetBestSize`就可以调用自定义大小函数。虽然失败了。即使没有设置 sizer，这些函数仍然不会被调用。我都试过了`Panel`和`PyPanel`。这是我当前的滚动面板：

```
class ScrolledPanel(wx.PyPanel):
    """A panel that will automatically add scrollbars when needed."""

    def __init__(self, parent):
        wx.Panel.__init__(self, parent, -1)

        self.SetBackgroundColour('#FF0000')

    # This function is called.
    def SetSizer(self, sizer):
        import pdb; pdb.set_trace()
        self._pet_sizer = sizer

    # The below functions are never called.
    def DoGetBestSize(self):
        """Override the minimum size of the panel."""
        import pdb; pdb.set_trace()
        default = self.GetSizer().GetMinSize()
        default.SetHeight(250)

        return default

    def DoGetClientSize(self):
        import pdb; pdb.set_trace()

    def DoGetSize(self):
        import pdb; pdb.set_trace()

    def DoGetVirtualSize(self):
        import pdb; pdb.set_trace() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:27:08.667

wxPython 中的重写方法目前需要使用基类，这些基类旨在反映对 Python 中重写方法的一些 C++ 虚拟函数的调用。这意味着如果你想在一个面板中捕捉那些你需要从 wx.PyPanel 而不是 wx.Panel 派生你的类。见[http://wiki.wxpython.org/OverridingMethods](http://wiki.wxpython.org/OverridingMethods)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:46:43.250

你不需要做任何特别的事情。如果您调用`SetVirtualSize()`any `wxWindow`，包括`wxPanel`，它已经会根据需要显示滚动条，并且 sizer 将使用虚拟大小来布置此窗口内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:20:06.277

你为什么要重新发明轮子？wxPython 提供了一个 ScrolledPanel 小部件：wx.lib.scrolledpanel

你应该只使用它。wxPython 演示有一个示例。

**编辑：这是一个在 sizer 内带有 scrolledPanel 的示例脚本。**

```
import wx
import  wx.lib.scrolledpanel as scrolled

########################################################################
class MyScrolledPanel(scrolled.ScrolledPanel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        scrolled.ScrolledPanel.__init__(self, parent)

########################################################################
class MainPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

        text = "one two buckle my shoe three four shut the door five six pick up sticks seven eight lay them straight nine ten big fat hen"

        mainSizer = wx.BoxSizer(wx.VERTICAL)
        sizer = wx.BoxSizer(wx.VERTICAL)
        sPanel = MyScrolledPanel(self)

        words = text.split()
        for word in words:
            hSizer = wx.BoxSizer(wx.HORIZONTAL)
            label = wx.StaticText(sPanel, -1, word+":")
            tc = wx.TextCtrl(sPanel, -1, word, size=(50,-1))

            hSizer.Add(label, flag=wx.ALIGN_RIGHT | wx.ALIGN_CENTER_VERTICAL | wx.LEFT, border=10)
            hSizer.Add(tc, flag=wx.LEFT, border=10)
            sizer.Add(hSizer)

        sPanel.SetSizer(sizer)
        sPanel.SetAutoLayout(1)
        sPanel.SetupScrolling()

        mainSizer.Add(sPanel, 1, wx.EXPAND)
        self.SetSizer(mainSizer)

########################################################################
class MainFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None)
        panel = MainPanel(self)

if __name__ == "__main__":
    app = wx.App(False)
    frame = MainFrame()
    frame.Show()
    app.MainLoop() 
```

# c# - C# - 从特定起点开始按 TimeSpan 分组列表

> ID：14559131
> 
> 赞同：1
> 
> 时间：2013-01-28T09:37:08.770
> 
> 标签：c#, linq, list, grouping, timespan

我想按时间步长（小时、天、周等）对列表进行分组，并计算每个组的总和，但从特定时间开始。

现在我有输入列表：

```
TIME    VALUE
11:30   2
11:50   2
12:00   6
12:30   10
12:50   2 
```

和小时步

```
var timeStep=new TimeSpan(1,0,0); 
```

我正在用这样的东西对我的列表进行分组

```
var myList = list.GroupBy(x =>
            {
                return x.Time.Ticks / timeStep.Ticks;
            })
            .Select(g => new { Time = new DateTime(g.Key * timeStep.Ticks), Value = g.Sum(x => x.Value) }).ToList(); 
```

它工作正常（也适用于任何其他步骤，例如每天、每周）并给出结果：

```
TIME    SUM
11:00   4
12:00   18 
```

但是现在我必须用小时步长对我的列表进行分组，但是从例如每小时 30 分钟开始，所以我该怎么做才能有这样的事情：

```
TIME    SUM
11:30   10
12:30   12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:48:06.933

最好使用自定义 DateTme 比较器：

```
internal class DateTimeComparer : IEqualityComparer<DateTime>
{
    public bool Equals(DateTime x, DateTime y)
    {
        return GetHashCode(x) == GetHashCode(y);  
        // In general, this shouldn't be written (because GetHashCode(x) can equal GetHashCode(y) even if x != y (with the given  comparer)). 
        // But here, we have: x == y <=> GetHashCode(x) == GetHashCode(y)
    }

    public int GetHashCode(DateTime obj)
    {
        return (int)((obj - new TimeSpan(0, 30, 0)).Ticks / new TimeSpan(1, 0, 0).Ticks);
    }
} 
```

和：

```
var myList = list.GroupBy(x => x.Time, new DateTimeComparer())
                 .Select(g => new { Time = g.Key, Value = g.Sum(x => x.Value) }).ToList(); 
```

# python - Python gevent+瓶子。查询 API。如何使用gevent防止超时锁？

> ID：14559135
> 
> 赞同：3
> 
> 时间：2013-01-28T09:37:21.593
> 
> 标签：python, api, asynchronous, timeout, gevent

我正在使用 gevent + bottle 进行以下操作：

1.  在远程服务器上调用 API 方法
2.  API 处理结果
3.  返回 HTML

我已经为 API 调用（httplib/socket）设置了一个 tiemout，但如果它设置为 5 秒（例如），我的 python 脚本在那段时间很忙，无法返回任何其他页面（这是正常的）。

问题：我能否巧妙地使用 gevent（可能是在单独的脚本中？）来处理如此长的请求？

我正在考虑在 localhost:8080 上启动一个单独的 API 询问脚本并将其放在负载均衡器后面（如“Internet”所建议的那样），但我确信有更好的方法。

我不是一个经验丰富的程序员，所以谢谢你的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T13:50:56.860

实际上，您的问题不应该存在。gevent 服务器后端可以同时处理任意数量的请求。如果一个被阻塞 5 秒，这不会影响到达服务器的其他请求。这就是 gevent 服务器后端的重点。

1）您确定您正确使用gevent服务器后端吗？而不仅仅是 wsgiref 默认服务器（单线程）的猴子补丁版本？

2）您是否通过启动服务器`bottle.py --server gevent`？如果没有，您`gevent.monkey.patch_all()`在导入所有其他与套接字相关的东西（包括瓶子）之前是否这样做过？

例子：

```
from gevent import monkey
monkey.patch_all()
import bottle
import urllib2

@bottle.route(...)
def callback():
   urllib2.open(...)

bottle.run(server='gevent') 
```

# javascript - 如何将 HTTP 方法传递给 window.open

> ID：14559137
> 
> 赞同：1
> 
> 时间：2013-01-28T09:37:24.980
> 
> 标签：javascript, jquery, http

有没有办法在[`window.open`](https://developer.mozilla.org/en-US/docs/DOM/window.open)调用中指定 HTTP 方法（POST、DELETE、PUT）？

我知道我可以进行 Ajax 调用，并且允许指定 HTTP 方法，但在这种情况下，我希望浏览器“真正地”进行调用（跟踪所有重定向、正确加载响应等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:53:10.680

我最终使用隐藏表单来包装 HTTP 请求。该方法特定于我的后端（Rails），因为它使用[隐藏的`_method`输入](https://stackoverflow.com/questions/5177595/why-dont-the-modern-browsers-support-put-and-delete-form-methods/5366062#5366062)来发布伪 PUT 或伪 DELETE 操作。使用 Rails，我还必须添加[隐藏的 CSFR 字段](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf)。我的原始 HTML 如下：

```
<button class="btn action-button btn-danger"
  id="delete-object"
  data-action-href="<%= object_path(@object) %>"
  data-action-method="delete"><i class="icon-trash icon-white"></i>Delete</button> 
```

实现它的 CoffeeScript 是：

```
$("button.action-button").each (index, element) ->               
  $(element).click (eventObject) ->                              
    url = $(this).data("action-href")                            
    httpMethod = $(this).data("action-method")                   
    if httpMethod?                                               
      form = $("<form/>",                                        
        id: "action-method-temp-form"                            
        action: url                                              
        method: "post"                                           
        style: "display: none")                                  
      form.appendTo $(this)                                      
      csfr = $('meta[name="csrf-token"]').attr("content")        
      $("<input/>",                                              
        type: "hidden"                                           
        name: "authenticity_token"                               
        value: "#{csfr}").appendTo form                          
      $("<input/>",                                              
        type: "hidden"                                           
        name: "_method"                                          
        value: httpMethod).appendTo form if httpMethod != "post" 
      form.submit()                                              
    else                                                         
      window.location = url 
```

我知道这不是我问的，但它做同样的事情。相比之下，Ajax 调用后跟文档内容替换将无法正确处理重定向和非 html 内容类型响应等问题。

# wordpress - 按 id 获取页面并显示 阅读更多

> ID：14559138
> 
> 赞同：1
> 
> 时间：2013-01-28T09:37:28.110
> 
> 标签：wordpress

在 Wordpress 页面中显示多个页面的最佳方式是什么。我只想在阅读更多内容之前显示文本。以下代码显示全部内容，而不仅仅是阅读更多内容。

```
 $args=array(
        'orderby' =>'parent',
        'order' =>'asc',
        'post_type' =>'page',
        'post__in' => array(9,24,33),
        );

        $page_query = new WP_Query($args); ?>

        <?php while ($page_query->have_posts()) : $page_query->the_post(); ?>
            <article class="g320">
                 <?php the_content("Lees meer",true);?>

            </article>
        <?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:56:09.643

有一个全局变量 $more 可以为 the_content() 函数启用/禁用此功能。[在 Codex 中阅读更多信息](https://codex.wordpress.org/Function_Reference/the_content#Overriding_Archive.2FSingle_Page_Behavior)

在您的示例中，解决方案将如下所示：

```
$args=array(
        'orderby' =>'parent',
        'order' =>'asc',
        'post_type' =>'page',
        'post__in' => array(9,24,33),
        );

        $page_query = new WP_Query($args); ?>

        <?php while ($page_query->have_posts()) : $page_query->the_post(); ?>
            <article class="g320">
                 <?php global $more; $more = 0; ?>
                 <?php the_content("Lees meer",true);?>

            </article>
        <?php endwhile; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:39:57.657

目前，您正在使用 the_content 显示完整内容。但是您可以在每篇文章的末尾显示带有 [...] 的摘录。因此，将 the_content 更改为 the_excerpt 并检查这是否符合您的需求。

在这里阅读更多 - [http://codex.wordpress.org/Function_Reference/the_excerpt](http://codex.wordpress.org/Function_Reference/the_excerpt)

正如您在上面的链接中所读到的“默认情况下，摘录长度设置为 55 个单词。要使用 excerpt_length 过滤器更改摘录长度，请将以下代码添加到主题中的 functions.php 文件中：

```
function custom_excerpt_length( $length ) {
return 20;
}
add_filter( 'excerpt_length', 'custom_excerpt_length', 999 ); 
```

# functional-programming - 使用选项和模式匹配的 SML 列表总和

> ID：14559139
> 
> 赞同：1
> 
> 时间：2013-01-28T09:37:32.330
> 
> 标签：functional-programming, pattern-matching, sml, smlnj, ml

我正在创建列表总和并`option`在其中使用。当我传递一个空列表时，我应该得到`NONE`or else `SOME value`。

我可以通过以下方式做到这一点：

```
fun sum_list xs =
    case xs of
        [] => NONE
      | x => 
        let
            fun slist x =
                case x of
                    [] => 0
                  | x::xs' => x + slist xs'
        in 
            SOME (slist x)
        end 
```

但是我想以相反的方式使用模式匹配来做到这一点，我想评估结果`sum_list`以查看它是否是`NONE`或包含其他值。

我已经尝试过各种方式，但我无法掌握如何以这种方式进行操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T10:21:22.417

*我认为您目前拥有的内容非常清晰易懂。*

如果要避免使用`slist`，则必须`sum_list`在列表的尾部递归调用，对该`option`值进行模式匹配并返回适当的结果：

```
fun sum_list xs =
    case xs of
       [] => NONE
     | x::xs' => (case (sum_list xs') of
                     NONE => SOME x
                   | SOME y => SOME (x+y)) 
```

# jquery - 多个 ajax 请求调用。

> ID：14559140
> 
> 赞同：0
> 
> 时间：2013-01-28T09:37:34.607
> 
> 标签：jquery, ajax

我正在尝试获取正在运行的请求的状态，并在第一个请求运行时在页面上更新它。但它在请求运行时不会更新，它只会在开始和结束时更新。怎么了？

这是我的代码：

```
    函数 get_remote() {
        $.ajax({
            url: "Html->url(array('action'=>'getstatus','test')) ?>",
            成功：功能（响应）{
                $("#info").html(响应);
                console.log('ok');
                如果（响应！='完成'）
                    setTimeout("get_remote()", 10);
            }
        });
    }

    $（函数（）{
        $('#initimport').click(function(){      
           get_remote();
           $.ajax({
                url: "Html->url(array('action'=>'initimport'))?>",
                成功：函数（）{
                    console.log('成功', this);
                }
           });
           返回假；
        });
    });

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:42:22.097

好的，这就是我要尝试的方法，我认为您需要一种更好的方法来记录时间。我不确定你现在在做什么来测试时代，但这是一个好方法。

如果您还没有这样做，请获取适用于 Firefox 的 Firebug。

打开 Firebug 并转到 net 选项卡。确保启用它。

当您单击每个按钮时，您应该会看到传入的每个请求。如果单击每个按钮，则在上一个请求结束之前您看不到下一个请求开始，那么这告诉我 javascript 有问题。但是，我猜您应该将每个小节的开头相隔 1 秒。这样做，让我们知道你看到了什么。

**编辑**

我想我发现你的问题。我猜你在 php 中使用 sleep 函数。sleep 函数为当前会话休眠。如果您打开 3 个选项卡并输入 ajax url，您会注意到相同的行为。5、10 和 15 秒完成每个选项卡。我尝试使用谷歌搜索并与其他人发现相同的结果。这可能是因为 PHP 并不是真正的多线程。我建议使用不同的框架。

# android - SCanvasView 网格

> ID：14559141
> 
> 赞同：0
> 
> 时间：2013-01-28T09:37:34.467
> 
> 标签：android, android-layout

我想显示 4 ScanvasView，默认情况下，SDK 3 ScanvasView 垂直显示。我不知道你如何使用RelativeLayout 或LinearLayout 来做到这一点。

我想在下面显示 2 个 ScanvasView 水平和 2 个：

```
 ImageView1
ScanvasView1      ScanvasView2
ScanvasView3     ScanvasView4
          TextView
         ImageView2 
```

你是怎样做的？谢谢你。

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" 
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingLeft="70dip"
android:paddingRight="70dip"
android:background="@drawable/fond_pages">  
<RelativeLayout 
    android:id="@+id/canvas_container1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="20dip"
    android:layout_marginBottom="20dip"     
    android:layout_weight="1">
    <com.samsung.spensdk.SCanvasView 
        android:id="@+id/canvas_view1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" />
</RelativeLayout>
<RelativeLayout 
    android:id="@+id/canvas_container2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="20dip"
    android:layout_marginBottom="20dip"
    android:layout_weight="1"
    >
    <com.samsung.spensdk.SCanvasView 
        android:id="@+id/canvas_view2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"/>
</RelativeLayout>
<RelativeLayout 
    android:id="@+id/canvas_container3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="20dip"
    android:layout_marginBottom="20dip"
    android:layout_weight="1"
    >
    <com.samsung.spensdk.SCanvasView 
        android:id="@+id/canvas_view3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"/>
</RelativeLayout>
  </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T14:33:39.927

我有一个 9x9 网格，我只使用一个 SCanvasView。您可以从 SCanvasView 获取坐标和其他信息，这些信息可以让您计算笔在屏幕上做出手势的位置。

# regex - 正则表达式匹配特定句子加上日期和时间

> ID：14559144
> 
> 赞同：0
> 
> 时间：2013-01-28T09:37:47.880
> 
> 标签：regex, date, sentence

我已经尝试弄清楚如何使正则表达式匹配特定的内容，然后是日期和时间。我这辈子都想不通！

我想匹配以下句子，当然日期和时间可能是随机的：

书房 25/01/2013 吉隆坡。14.03 skrev

所以它应该像这样匹配：Den dd/mm/yyyy kl。hh.mm skrev

请注意，时间采用 24 小时格式。

有人可以在这里帮忙吗？我可以很容易地找到一个匹配日期或时间的例子，但我不知道如何将它与这个特定的句子结合起来:(

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:43:07.900

只需将它们组合为：

```
Den (0[1-9]|[12][0-9]|3[01])/(0[1-9]|1[0-2])/(0{3}[1-9]|((?!0{3}\d)\d{4})) kl\. ([01][0-9]|[2[0-3])\.([0-5][0-9]) skrev 
```

**注意：**日期未正确验证。将匹配 2000 年 2 月 30 日

`Den`像这样匹配`Den`。

`(0[1-9]|[12][0-9]|3[01])/(0[1-9]|1[0-2])/\d{3}[1-9]`匹配日期。`0{3}[1-9]|((?!0{3}\d)\d{4})`避免**0000**作为年份。

`kl\.`匹配之前是转义，`kl.`这是正则表达式中的特殊字符`\``.``.`

`([01][0-9]|[2[0-3])\.([0-5][0-9])`比赛时间从**00.00**到**23.59**

`skrev`像这样匹配`skrev`。

**以下验证日期更好一点**

```
Den ((0[1-9]|[12][0-9]|3[01])/(?=(0[13578]|1[02]))(0[13578]|1[02])|(0[1-9]|[12][0-9]|30)/(?=(0[469]|11))(0[469]|11)|(0[1-9]|[12][0-9])/(?=(02))(02))/(0{3}[1-9]|((?!0{3}\d)\d{4})) kl\. ([01][0-9]|[2[0-3])\.([0-5][0-9]) skrev 
```

**仍然匹配 1999 年 2 月 29 日 - 没有验证闰年与否**

**要匹配单个数字的日期和月份，请将日期部分替换为以下内容：**

```
(0?[1-9]|[12][0-9]|3[01])/(0?[1-9]|1[0-2])/(0{3}[1-9]|((?!0{3}\d)\d{4})) 
```

使前面的部分成为可选的`?`，即`0`成为可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:52:57.053

```
`Den ([0-3]\d)/([0-1]\d)/(\d{4}) kl\. ([0-2]\d)\.([0-5]\d) skrev` 
```

捕获值以便于验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:54:08.313

也许不是最聪明的解决方案，但这个表达式应该符合您的要求：

密度\s[0-3][0-9]/[0-1][[0-9]/[0-9][0-9][0-9][0-9]\skl.\ s[0-2][0-9].[0-6][0-9]\sskrev

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T10:02:43.737

原来我真正需要的是：

（Den ../../.. kl. .. skrev）

自从 。只匹配随机字符，并且由于这句话是由电子邮件客户端自动生成的，因此无需实际验证它是否是日期，而只需查找此模式并丢弃之后的所有内容。没有人会在常规文本的中间写得如此特别。

如果有人想知道，这是用于 SpiceWorks 回复标头过滤的。

# grails - 在 Centos 上安装 grails

> ID：14559145
> 
> 赞同：2
> 
> 时间：2013-01-28T09:37:48.147
> 
> 标签：grails

当我`./gradlew libs`在 grails 目录中运行时，出现以下错误：

```
Could not find property 'org' on root project 'grails-2.1.3' 
```

我在 2.2.0 版本中遇到了同样的问题，任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T21:48:29.023

```
rm grandlew libs grandlewlibs
chmod 755 grandlewlibs
./grandlewlibs 
```

这行得通吗？

# java - 如何使用搜索功能使过滤后的项目显示在列表视图中（android）

> ID：14559154
> 
> 赞同：2
> 
> 时间：2013-01-28T09:38:21.547
> 
> 标签：java, android, listview, layout, widget

我的活动中有一个编辑文本、搜索按钮和列表视图，根据编辑文本框中给出的关键字，所有相关项目都应该显示在列表视图中，现在我可以在 toast 中获取这些相关项目，仅此而已相关项目在吐司中一一弹出并消失，但我希望它显示在列表视图中，我将如何制作它？这是我的代码

```
public class Home extends ListActivity {
ArrayList<HashMap<String, String>> songsList;
ListView list;
LazyAdapter adapter;
JSONArray posts;

 //ArrayList thats going to hold the search results
  ArrayList<HashMap<String, String>> searchResults;
  LayoutInflater inflater;
// All static variables
static final String URL = "http://www.example.com/ads/?json=get_recent_posts";

static final String KEY_POSTS = "posts";
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DATE = "date";
static final String KEY_CONTENT = "content";
static final String KEY_AUTHOR = "author";
static final String KEY_NAME = "name";
static final String KEY_ATTACHMENTS = "attachments";
static final String KEY_SLUG = "slug";
static final String KEY_THUMB_URL = "thumbnail";
static final String KEY_IMAGES = "images";
static final String KEY_URL = "url";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final EditText searchBox=(EditText) findViewById(R.id.search);
    final ListView  list=(ListView)findViewById(android.R.id.list);

    //get the LayoutInflater for inflating the customomView
     //this will be used in the custom adapter
     inflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

  final  ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
        // Creating JSON Parser instance
                final JSONParser jParser = new JSONParser();

                // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(URL);
                try {
                     posts = json.getJSONArray(KEY_POSTS);

        // looping through all song nodes <song>
                for(int i = 0; i < posts.length(); i++){
                    JSONObject c = posts.getJSONObject(i);
                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String title = c.getString(KEY_TITLE);
                    String date = c.getString(KEY_DATE);
                    String content = c.getString(KEY_CONTENT);
                    // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", "");

                    //authornumber is agin  JSON Object
                    JSONObject author = c.getJSONObject(KEY_AUTHOR);
                    String name = author.getString(KEY_NAME);

                    String url = null;
                    String slug = null;
                    try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for(int j = 0; j < atta.length(); j++){
                        JSONObject d = atta.getJSONObject(j);

                        slug = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                        url = thumbnail.getString(KEY_URL);

                    }
                    } catch (Exception e) {
                        e.printStackTrace();

                    }

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(KEY_ID, id);
            map.put(KEY_TITLE, title);
            map.put(KEY_DATE, date);
            map.put(KEY_NAME, name);
            map.put(KEY_CONTENT, content);
            map.put(KEY_SLUG, slug);
            map.put(KEY_URL, url);

            // adding HashList to ArrayList
            songsList.add(map);
                }   
                }catch (JSONException e) {
                    e.printStackTrace();
                }

              //searchResults=OriginalValues initially
                searchResults=new ArrayList<HashMap<String, String>>(songsList);
         // Getting adapter by passing json data ArrayList
            adapter=new LazyAdapter(this, songsList);    
             list.setAdapter(adapter);

             searchBox.addTextChangedListener(new TextWatcher() {

                 public void onTextChanged(CharSequence s, int start, int before, int count) {
                   //get the text in the EditText
                   String searchString=searchBox.getText().toString();
                   int textLength=searchString.length();

                          //clear the initial data set
                   searchResults.clear();

                   for(int i=0;i<songsList.size();i++)
                   {
                  String playerName=songsList.get(i).get("title").toString();

                  if(textLength<=playerName.length()){

                  //compare the String in EditText with Names in the ArrayList
                    if(searchString.equalsIgnoreCase(playerName.substring(0,textLength)))
                          Toast.makeText(getApplicationContext(),playerName,1).show();
                    searchResults.add(songsList.get(i));
                  }
                   }

                   adapter.notifyDataSetChanged();
                 }

                 public void beforeTextChanged(CharSequence s, int start, int count,
                     int after) {

                   }

                   public void afterTextChanged(Editable s) {

                   }
                  });

    // Launching new screen on Selecting Single ListItem
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            HashMap<String, String> map = songsList.get(position);

            Intent in = new Intent(Home.this, Singlemenuitem.class);
            in.putExtra(KEY_TITLE, map.get(KEY_TITLE));
            in.putExtra(KEY_DATE, map.get(KEY_DATE));                         
            in.putExtra(KEY_NAME, map.get(KEY_NAME));
            in.putExtra(KEY_CONTENT, map.get(KEY_CONTENT));
            in.putExtra(KEY_URL, map.get(KEY_URL));

            startActivity(in);
        }                
    });   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:55:22.280

我替换了以下代码，使我的搜索功能正常工作:)

```
searchBox.addTextChangedListener(new TextWatcher() {

                 public void onTextChanged(CharSequence s, int start, int before, int count) {
                   //get the text in the EditText
                    searchString=searchBox.getText().toString();
                    textLength=searchString.length();
                   searchResults.clear();

                   for(int i=0;i<songsList.size();i++)
                   {
                   playerName=songsList.get(i).get("title").toString();
                  System.out.println("player name "+playerName);
                  if(textLength<=playerName.length()){
                  //compare the String in EditText with Names in the ArrayList
                    if(searchString.equalsIgnoreCase(playerName.substring(0,textLength))){
                    searchResults.add(songsList.get(i));
                    System.out.println("the array list is "+songsList.get(i));
                    adapter=new LazyAdapter(Home.this, searchResults);   

                     list.setAdapter(adapter);
                    }

                      }

                   }
                   if(searchResults.isEmpty()){
                       Toast toast= Toast.makeText(getApplicationContext(), 
                                  "No Items Matched", Toast.LENGTH_SHORT);  
                                  toast.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL, 0, 0);
                                  toast.show();
                   }
                   adapter.notifyDataSetChanged();
                 }

                 public void beforeTextChanged(CharSequence s, int start, int count,
                     int after) {
                 System.out.println("before changed");

                   }

                   public void afterTextChanged(Editable s) {

                                               System.out.println("after changed");
                   }
                  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:09:07.663

您使最后的过滤变得非常混乱。试试对我有用的代码。

首先为列表设置过滤为真，

```
 listView.setAdapter(adapter);
    listView.setTextFilterEnabled(true); 
```

然后使用编辑文本进行过滤，如下所示，

```
 editText.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {

        }

        public void beforeTextChanged(CharSequence arg0, int arg1,
                int arg2, int arg3) {

        }

        public void afterTextChanged(Editable arg0) {
            MyActivity.this.adapter.getFilter().filter(arg0);

        }
    }); 
```

使用此代码并检查它是否有效。

# android - 带有 actionbarsherlock 的暗淡、几乎透明的活动

> ID：14559157
> 
> 赞同：2
> 
> 时间：2013-01-28T09:38:32.280
> 
> 标签：android

我希望我的活动变暗，几乎透明。与 spotify 应用程序一样，下面的示例来自 iPhone 应用程序，但行为几乎相同

![在此处输入图像描述](../Images/6707d97c4ad3491bdf2823046e5be564.png)

让我们假设这是一个android应用，前面的view是一个activity，后面的view也是一个activity。`res/styles.xml`为了获得这个设计，我需要设置哪个属性？我用谷歌搜索，但我只能找到像这样的 java 示例：

```
WindowManager.LayoutParams windowManager = getWindow().getAttributes();
    windowManager.dimAmount = 0.75f;
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND); 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T10:57:48.027

找到了解决方案：

在`res/styles.xml`

```
 <style name="Theme.Opacity" parent="Sherlock.__Theme.DarkActionBar">
     <item name="android:windowBackground">@android:color/transparent</item>
     <item name="android:windowIsTranslucent">true</item>
     <item name="android:background">#00000000</item>
 </style> 
```

# java - 无法从tomcat中的jar读取文件

> ID：14559158
> 
> 赞同：1
> 
> 时间：2013-01-28T09:38:37.940
> 
> 标签：java, file-io, classloader, tomcat7

我有一个在 tomcat 7 下运行的 Web 应用程序，在其中一个类中，我试图读取 WEB-INF/lib 文件夹下的一个 jar 中的文件。

```
URL resourceURL = MyClass.class.getClassLoader().getResource("xml/xslt/master.xsl");
File xslfile = new File(resourceURL.getPath());
AssertUtil.assertTrue(xslfile.exists(),"xsl file not found"); 
```

MyClass 和 master.xsl 都位于同一个 jar 中，并且打包没有问题。但是上面的代码片段在断言语句中失败，因为`xslfile.exists`返回 false。URL 正确解析为 jar 中文件的位置，如下所示

```
file:/<MY_WEBAPP_LOCATION>/MyApp/WEB-INF/lib/MyComponent.jar!/xml/xslt/master.xsl 
```

其中 MY_WEBAPP_LOCATION 对应于我的 tomcat 服务器 webapp 目录的绝对路径。

但是，如果我重写下面的代码以读取为输入流，它就可以正常工作。

```
InputStream xslFile = MyClass.class.getClassLoader().getResourceAsStream("xml/xslt/master.xsl"); 
```

谁能解释是什么阻止了从 jar 资源创建文件，而输入流创建工作得很好。tomcat 端是否需要任何其他权限设置才能读取 jar 中的文件？

**编辑**：再观察一下，如果文件放在 WEB-INF/classes 下，则使用上述代码创建文件可以正常工作。问题仅在于将它放在 WEB-INF/lib 下的 jar 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:46:05.573

小心似乎 ClassLoader.getResource 不处理相对路径。看到[这个](https://stackoverflow.com/questions/6608795/what-is-the-difference-between-class-getresource-and-classloader-getresource)。

GetResourceAsStream 恰好采用相对于 ClassLoader 的路径（而不是类！！）。我认为你很幸运，这里也有同样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:49:59.353

如果它是桌面应用程序 getResource() 将起作用但由于这是一个 Web 应用程序，因此需要从 Context 中提取资源，因此 getResoruceAsStream()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:15:11.540

这不是权限问题，而是使用 java.io.File API - 特别是构造函数[http://docs.oracle.com/javase/7/docs/api/java/io/File.html#File%28java .lang.String%29](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#File%28java.lang.String%29)

当您使用构建 File 对象时

```
File xslfile = new File(resourceURL.getPath()); 
```

您正在使用需要“抽象路径名”的 java.io.File#File(String) 方法。什么是可接受/有效的路径名由 File 类的 javadoc 描述：http: [//docs.oracle.com/javase/7/docs/api/java/io/File.html](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)

您从 getPath() 方法获得的字符串值：

```
file:/<MY_WEBAPP_LOCATION>/MyApp/WEB-INF/lib/MyComponent.jar!/xml/xslt/master.xsl 
```

根本不构成有效的“抽象路径名”——它是一个转换为 java.lang.String 的 URL（恕我直言，应该返回 URL 方案为“jar”而不是“file”）。因此调用

```
isExist() 
```

返回 false，因为您的磁盘上没有具有该名称的文件。另一方面，如果资源在 jar 之外（例如，在 WEB-INF/classes 目录下），resourceURL.getPath() 将返回一个表示有效抽象路径名的值，因为所讨论的资源确实是一个简单文件。

当您使用 java.lang.ClassLoader#getResourceAsStream(java.lang.String) 时，该方法将资源直接流出到 java.lang.InputStream 中，甚至可能在其实现中不使用 File 类。

# java - 在多租户应用程序中使用 SAML 的 SSO

> ID：14559159
> 
> 赞同：0
> 
> 时间：2013-01-28T09:38:40.300
> 
> 标签：java, single-sign-on, saml

我需要在我的和另外一个应用程序中启用 SSO。这两个应用程序都是多租户应用程序。（要登录，用户必须提供用户名、密码和租户名称）。

每个租户都将在身份提供者中拥有自己的目录或使用不同的 IDP。

使用用户名和密码旁边的租户名称对身份提供者上的用户进行身份验证是否有意义？

是否有能够提供此服务的 IDP 解决方案？（3参数登录）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:02:15.660

我认为可以使许多 IDP 接受三个参数。如果您使用的是通用 SAML Web SSO 规范，我认为使用 SAML 没有任何问题。

例如，OpenAM 是完全可定制的、免费的并且支持 SAML。

这可能有帮助 [https://wikis.forgerock.org/confluence/display/openam/Write+a+custom+authentication+module](https://wikis.forgerock.org/confluence/display/openam/Write+a+custom+authentication+module)

# c++ - 虚拟机和内存访问问题

> ID：14559161
> 
> 赞同：0
> 
> 时间：2013-01-28T09:38:43.277
> 
> 标签：c++, qt, memory, virtual-machine

我正在尝试监视一个目录并通知文件更改（创建），我在 Windows 7 和 Ubuntu 12.04 上使用虚拟机（VirtualBox）作为来宾，当一个文件添加到我的监视文件夹时我测试存在获取它的大小并稍后对其进行操作，问题是：有时它返回 0 作为大小，尽管文件存在并且大小不为零，这是我的代码：

```
void Watcher::OnFileChanged (char* FileBaseName)
{

    QDir watchDir(RootToWatch);
    QString fileN="";
    fileN=QString::fromLocal8Bit(FileBaseName);
    QFileInfo file(RootToWatch+"/"+fileN);
    qDebug()<<"Watcher::OnFileChanged "<<fileN;

    try
       {
       if(file.exists())
       {
           qDebug()<<"FileWatcher::OnFileChanged "<<fileN<<"exists";
           qDebug()<<"OnFileChanged:fileName "<<file.fileName()
                   <<"\nOnFileChanged File().size"<<QFile(fileN).size()
                   <<"\nOnFileChanged QFileInfo Size:"<<file.size();
 ....
       }
       }
} 
```

我应该等待一段时间才能获得实际大小（如果是的话，如何匹配以及如何测试文件是否准备好读取）还是我错过了一些东西。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:47:57.637

这听起来确实像是“在文件最终写入之前观察者关闭”的典型案例——这确实是完全可以预料的行为，因为你只能说“告诉我这个文件是否已经改变”——大小为零绝对是change - 无论是以前存在还是刚刚存在，它都是对先前状态的更改。

在这种情况下，我的方法是再次设置手表，并查看文件下次是否“增长”。

# ruby-on-rails - haml 视图中的 if 条件

> ID：14559166
> 
> 赞同：2
> 
> 时间：2013-01-28T09:38:51.237
> 
> 标签：ruby-on-rails, ruby, if-statement, haml, custom-data-attribute

如果满足条件，我想设置一个 :data 属性。在这种情况下，用户应该有一个角色。所以这是一个布尔语句。让我举个例子。

```
 - @data = 'contract-confirm'

 .create_button= link_to 'Something', new_some_path(@customer), :class => 'btn btn-success', :'data' => @data ? 'contract' : nil
 .clearer 
```

所以我知道这可能看起来很奇怪，但如果客户被标记，我想设置一个数据属性，然后将 js 挂钩到该数据属性。那部分有效。不起作用的是，现在我总是在设置属性。因此，即使在客户没有角色的情况下，js 也会上钩。我知道我并没有明确指出这里的所有角色。我有一个@customer.role？但我似乎无法正确地合并它。我之前用 if else 语句管理过它，但后来有很多重复，我不太喜欢。有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:12:52.537

尝试替换**:'data' => @data ？'contract' : nil** with **:'data' => 'contract' if @data**。我检查了它和下一个代码：

```
- @data_present = true
= link_to 'Something', root_path, :class => 'btn', :'data' => ('test' if @data_present) 
```

呈现为：

```
<a href="/" class="btn" data="test">Something</a> 
```

并且没有**- @data_present = true**的代码呈现为：

```
<a href="/" class="btn">Something</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:24:53.397

你可以试试这段代码：

```
link_to 'Something', ... , :data => @customer.role? ? 'contract' : nil 
```

haml 不会包含*nil*属性，因此它应该可以按您的预期工作。

# ios - 获取图像视图和触摸之间的角度

> ID：14559169
> 
> 赞同：0
> 
> 时间：2013-01-28T09:38:54.417
> 
> 标签：ios, objective-c, cocoa-touch

我有一个图像视图，其位置 (`x:138`和`y:107`) 不在屏幕中央。现在我不想计算这些点与水平线之间的角度，但我不知道该怎么做。

谁能告诉我更多关于这个的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:46:35.147

您可以执行类似的操作，其中 Start- 和 endpoint 是图像位置。

```
Example:

CGPoint endPoint = CGPointMake(50, 100);

CGPoint startPoint = CGPointMake(100, 100);

float angleVal = (((atan2((endPoint.x - startPoint.x) , (endPoint.y - startPoint.y)))*180)/M_PI); 
```

# ios - MagicalRecord + AFNetworking + NSFetchedResultsController，如何使其工作？

> ID：14559177
> 
> 赞同：3
> 
> 时间：2013-01-28T09:39:21.580
> 
> 标签：ios, core-data, nsfetchedresultscontroller, afnetworking, magicalrecord

在我的应用程序中，我尝试同时使用 MagicalRecord + AFNetworking + NSFetchedResultsController 来同步数据并在地图或 tableView 中动态显示它。

让我们看一些下载方法的代码：

```
+ (void) getDataWithCompletionBlock: (void (^)(void)) block {

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:URL_GET_DATA]];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
            for (NSDictionary *dict in JSON) {
                [MyModel createOrUpdateMyModelFromDict:[dict mutableCopy]];
            }

            [[NSManagedObjectContext MR_contextForCurrentThread] MR_saveInBackgroundCompletion:^{
                [[NSManagedObjectContext MR_contextForCurrentThread] MR_saveNestedContexts];

                block();
            }];
        });

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        DDLogError(@"getDataWithCompletionBlock FAILURE: %@", error);
    }];

    [operation start];
} 
```

我使用 下载数据`AFJSONRequestOperation`，然后使用 GCD 和后台线程创建模型，保存当前线程的上下文并执行`successBlock`（MagicalRecord 在`successBlock`上运行`dispatch_get_main_queue()`，因此在 GUI 线程中调用它。

这个同步模型好吗？因为有时（在真实设备上比在模拟器上更常见）我会收到一些错误，`NSFetchedResultsController`例如“索引处没有对象：在索引部分：”或“CoreData 无法完成故障......”。

他们都认为，Core Data 和多线程环境有问题。有没有人尝试将所有这三个工具连接起来一起工作？如果是这样，我错过了什么？对于该架构，您是否有任何运行良好的代码示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T02:57:24.607

我建议使用：

`[MagicalRecord saveWithBlock:(void(^)(NSManagedObjectContext *localContext))block];`

它为您处理线程，因此您不必担心从后台上下文中保存在父上下文中的任何内容。

我强烈建议您阅读这篇博文（由 MagicalRecord Saul Mora 的创建者撰写）：[轻松导入数据](http://www.cimgf.com/2012/05/29/importing-data-made-easy/)。它是关于 MagicalRecord 工作原理的超级好的背景信息以及如何使用它的示例。

如果您正确设置了数据模型，您实际上可以让 MagicalRecord 为您完成所有映射，您所要做的就是`importFromObject:`在`saveWithBlock:`块内调用，您不必担心处理映射。我在上面链接的文章详细介绍了如何正确执行此操作，但这需要一些练习。

# android - 打电话给 G+ 意图签到？

> ID：14559183
> 
> 赞同：0
> 
> 时间：2013-01-28T09:39:42.637
> 
> 标签：android, android-intent, google-plus

我想在我的应用程序中添加一个“签入”选项，该选项至少会使用 Facebook 和 Google+，现在我有一个问题 - 如何调用他们的意图来做到这一点？

对于 FB，我发现：

```
String uri = "fb://places";
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
startActivity(intent); 
```

URI 来自该帖子的位置： [从其他应用启动 facebook 应用](https://stackoverflow.com/questions/4191492/launch-facebook-app-from-other-app)

但我不知道 Google+，我查看了文档（很差），一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:23:22.160

目前，无法以任何形式写入用户的 Stream，包括签到。但是，您可以并且应该在我们的问题跟踪器中提出这些功能请求，您可以在[https://developers.google.com/+/support](https://developers.google.com/+/support)上找到它。此外，可能值得查看 Google+ 历史记录的开发者预览版，它允许编写“时刻”。但是，请记住，这是一个开发者预览版，而不是您目前可以在其上构建应用程序的东西。

# assembly - 如何在 8086 中声明局部变量？

> ID：14559184
> 
> 赞同：3
> 
> 时间：2013-01-28T09:39:51.713
> 
> 标签：assembly, x86-16

如果我在 .data 下声明我的变量，它们被视为全局变量，我如何在本地声明它们

@paul我可以分配内存，但是我如何输入它们（例如有符号和无符号整数）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:02:24.667

汇编代码中局部变量的声明取决于您的汇编程序，它可能根本不支持此类声明。

通常，局部变量是通过移动（递减）堆栈指针来分配的。如果使用 push 指令，堆栈上的局部变量的分配和初始化可以融合在一起，该指令推进堆栈指针并写入堆栈。这个例子：

```
; input: eax = some integer >= 1
; output: eax = factorial of the integer
; used registers: ebx, eflags
factorial:
cmp   eax, 1
je    factorial_end
push  eax ; created a local variable on the stack
dec   eax
call  factorial
pop   ebx ; destroyed a local variable on the stack
mul   ebx
factorial_end:
ret 
```

至于签名，未签名和铸造，在汇编中没有这样的事情。CPU 完全按照您的指示行事。他们不解释输入或输出，是你，程序员做出解释。因此，如果要将两个整数除以无符号`DIV`数，则使用整数的值执行，如果要进行有符号除法，则对`IDIV`指令执行相同操作。如果您使用`IDIV`您认为是无符号整数（或`DIV`在有符号整数上），CPU 会很乐意为您执行此操作，错误的结果（或除法溢出异常）将是您要处理的问题。幸运的是，无符号整数和 2 的补码有符号整数的加法、减法和乘法是由 CPU 以相同的方式对这两种整数进行的，您不需要做任何特别的事情，比如为每种整数选择正确的指令。通常，有符号整数和无符号整数之间只有除法和比较不同。但同样，您在代码中明确处理了这种差异。

# driver - 三星 Galaxy S3 没有出现在 Eclipse 中，而是出现在设备管理器中？

> ID：14559185
> 
> 赞同：7
> 
> 时间：2013-01-28T09:39:55.153
> 
> 标签：driver, adb, galaxy

我知道很多人都报告了几乎相同的问题，但我还没有找到解决方案。

我已经安装了eclipse。

1.  在我的电脑上安装 Kies 以获取手机的 ADB 驱动程序。
2.  我可以在 windows vista 上看到 ADBdriver。
3.  我将 Galaxy 置于开发者模式和 USB 故障排除模式。
4.  在 windows vista 中检测到手机。我可以在 Windows 资源管理器中看到它。
5.  如果我从“cmd”运行 adb devices，它会列出我的手机。

但是在eclipse中它没有出现？我已经尝试重新安装驱动程序几次，但没有成功。

请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T17:31:50.540

首先，我是应用程序开发的新手。我安装了 Eclipse、插件、插件、sdk 等，并且正在关注 Deitel 开发者系列中的“Android for Developers, an App-Driven Approach”一书。

我有同样的问题...我可以在 AVD 中运行示例应用程序，但我的手机没有出现在 Android 设备选择器中。Eclipse 看不到我连接的手机，所以我尝试从命令行运行“adb devices”：

> C:\Program Files (x86)\Android\android-sdk\platform-tools\

没有设备出现。我确保 Galaxy 处于开发者模式并检查了 USB 驱动程序。

我可以在 Windows 资源管理器中看到三星 Galaxy S3，并且设备管理器在“其他设备”下显示驱动程序警告。我尝试了“自动更新”，但失败了。

我去了这个地址： http: [//www.samsung.com/ca/support/model/SGH-I747MBABMC](http://www.samsung.com/ca/support/model/SGH-I747MBABMC)

我下载了凯斯。安装需要一段时间（大约 10 分钟）......它说它正在安装 HotFix。最后，系统提示我选择要沿 KIES 安装的项目。我选择了所有三个以确保安全（统一驱动程序安装程序、视频转换编解码器和 Kies Air Message）。这又花了一两分钟。

当 Kies 出现时，它说“请连接设备”。我这样做了。凯斯移动到“连接”屏幕。过了一会儿，设备管理器正确地说明了“SAMSUNG Android Phone”和“SAMSUNG Android ADB Interface device under it”（我假设驱动程序是由 Kies 安装的，导致设备管理器更新）。Kies 仍然说“正在连接”，但它没有继续，所以我关闭了 Kies（设备管理器似乎表明现在一切正常，并且运行“adb devices”工作）

它现在出现在 Eclipse 中。

看起来我*确实*需要 Kies，它解决了这个问题。

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-13T22:15:14.400

使用 Android 4.3 为我的 S3 工作1\. 从[http://www.samsung.com/us/kies/](http://www.samsung.com/us/kies/)
下载 Kies 3 2\. 运行它 3\. 转到> 4\. 我的手机提示我允许 USB 调试 => 设备出现在 Eclipse“Android 设备选择器”中

`Tools``Reinstall Device drivers`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-03T13:49:26.677

我按照以下步骤使其工作：

1.  已安装 Kies -> 单击工具并“安装驱动程序”
2.  转到设备管理器右键单击移动设备和ins的USB

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-11T09:01:02.897

跟随这个线程并让它工作。最初它没有。有些点没有提到。1\. 工作时它在设备管理器中显示为“Samsung Android Phone” 2\. 最初它显示为未经授权。需要去电话和弹出消息授权。

我尝试过的其他事情。1\. 在 Regedit 中，我删除了所有 USB 挂载设备 hklm/system/mounted devices 2\. 在 Kies 中，我重新安装了驱动程序。tools/ 3\. 安装 Kies 后，我做了一个 Windows 更新。没什么新东西 4\. 在设备上的设置/常规/开发选项中，我勾选了“显示所有 ANR” 5\. 在设置/常规/安全中，我取消勾选了“未知来源”

我不确定这些是否有效果，但花了 5 分钟，它起作用了。去搞清楚....

=========

# 关于删除已安装设备的警告。它切换了我的 d: 和 e: 驱动器，这让我很困惑。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-11T20:56:05.807

使用 regedit delete hklm\system\mounteddevices （不是硬盘驱动器）对我有用。安装 KIES 后，我将设备插入。我去了设备管理器，我的手机在“其他”中，带有警告标签。当我查看属性时，它说设备驱动程序未安装。在设备管理器中，我点击更新驱动程序，使用互联网。

没有改变。

在 KIES 中，我点击了工具更新驱动程序。它告诉我删除我的手机。我做了并继续。更新后我再次插入手机。

没有变化，设备管理器说安装的驱动程序有错误。

我删除了设备。dos 提示符，regedit，导航到 hklm/system/mounteddevices 并删除所有接受硬盘。接受警告。

我重新插入手机并点击设备管理器。我的手机没有错误，“SAMSUNG Android phone/SAMSUNG Android ADB Interface”。

我开始 eclipse 并点击设备，我的手机在那里有一个问号和标签“未经授权”。我走到电话旁，解锁并接受了有关信任这台计算机的消息，并勾选了“始终”复选框。

一切都很好，进行了部署，启动并运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-01T11:14:51.120

我的 Windows 8.1 也遇到了这个问题，就像你的一样。我的不能和凯斯一起工作。但我解决了。

有时，即使在资源管理器中，Windows 也根本无法检测到我的 Galaxy s3，我的问题会变得更糟！首先，我通过以下链接安装“Windows 8.1 的 N 和 KN 版本的媒体功能包”解决了这个问题：[这里](http://www.microsoft.com/en-us/download/details.aspx?id=40744)

但对于您的主要问题，我发现 Wondershare MobileGo 应用程序。有了这个，您可以在 eclips 设备选择器窗口上看到您的手机，并可以在其上运行您的应用程序。

你可以从[这里找到它！](http://www.softpedia.com/dyn-postdownload.php?p=183693&t=0&i=1)

如果有朋友找到更好的方法，请告诉我。

# mysql - 从 csv 导入 mysql 的日期为 0000-00-00

> ID：14559188
> 
> 赞同：10
> 
> 时间：2013-01-28T09:39:59.797
> 
> 标签：mysql, csv, import

我有一些数据保存为 txt 文件。我将 txt 文件保存为 csv，以便使用我的 sql 工作台将其导入数据库。我正在做的是以下内容：

```
LOAD DATA LOCAL INFILE '/path/to/csv/file.csv' INTO TABLE mytable FIELDS TERMINATED BY ',' ENCLOSED BY '"' lines terminated by '\n'; 
```

但是我的专栏之一是日期，它被导入为 0000-00-00

如何以一种好的方式导入它？ **编辑** 这是我的 csv 包含的内容：

```
id  task    hoursWorked begindate   enddate                         
0   task1   15  11/17/2012          11/18/2012                          
1   task2   20  11/18/2012          11/20/2012                          
2   task3   20  12/4/2012           12/5/2013                           
3   task4   22  1/5/2013            1/7/2013 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T10:32:01.470

请试试这个：

```
LOAD DATA LOCAL INFILE '/path/to/csv/file.csv' 
INTO TABLE mytable 
LINES TERMINATED BY '\n'
(id, task, hoursWorked, @var1, @var2) 
SET begindate = STR_TO_DATE(@var1, '%m/%d/%Y'),     
enddate = STR_TO_DATE(@var2, '%m/%d/%Y'); 
```

有关详细信息，请参阅[加载数据](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)和[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)

注意：我删除了该`FIELDS TERMINATED BY ',' ENCLOSED BY '"'`部分，因为我既看不到`,`也看不到`"`您的 CSV。但是，如果它对您来说效果很好，请随时恢复:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T10:48:12.387

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-07T06:31:54.947

如果它不起作用，只需在 CVS 中添加年、月和日的列，并将日期的日、月和年分开，然后使用以下内容：

`set date_column = concat(@year , '-' , @month , '-' , @day)`

# jquery - 单击单选按钮后的文本区域验证

> ID：14559191
> 
> 赞同：1
> 
> 时间：2013-01-28T09:40:15.240
> 
> 标签：jquery

我有以下代码：

```
$.metadata.setType("attr", "validate");
$(document).ready(function(){
    $("#form1").validate({
        rules: {
            $("#comment"): {
                required: "#welcome:checked"
            }
        }, debug:true
    });
    $("#welcome").click(function() {
        $("#comment").valid();
    });
}); 
```

它仅在我输入文本区域的名称而不是 id 字段（代码行 5，`#comment`）时才有效。如何通过 id 进行验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:50:54.840

通过使用对象初始化`validate`插件`rules`，您*必须*使用`name`元素的属性作为选择器。这是因为在规范中，`name`参数是唯一必须使用的标识属性。所有其他都是可选的。

相反，您需要将规则单独应用于元素，如下所示：

```
$('#form1').validate();
$('#comment').rules('add', { 
    required: $('#welcome').is(':checked')
});
$('#welcome').click(function() {
    $("#comment").valid();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:49:09.357

采用：

```
$("#comment").rules("add", { 
  required: $("#welcome").is(':checked')
}); 
```

# iphone - IOS：通过软件打开/关闭大写锁定

> ID：14559192
> 
> 赞同：1
> 
> 时间：2013-01-28T09:40:19.467
> 
> 标签：iphone, ios, keyboard, led, capslock

是否可以在代码中关闭/打开蓝牙键盘的 LED？

（这似乎不可能，但我宁愿确定，可能有人找到了解决方法）

# php - 我的语法有什么问题？

> ID：14559194
> 
> 赞同：-4
> 
> 时间：2013-01-28T09:40:30.730
> 
> 标签：php, sql, if-statement, insert-statement

我遇到了错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 '){ concat(' Glucose Oxidase', '|', ' 4.2-6.4 mmol/l', '|', 'o'), } 附近使用的正确语法其他 {' 在第 4 行

葡萄糖氧化酶，4.2-6.4 mmol/l，o 从表格中检索。

```
 $sql="INSERT INTO adenclinicalchemistry (idclinicalchemistry, Glucose, totalcholesterol, triglyceride, highdensitylipoprotein, lowdensitylipoprotein, 
                bloodureanitrogen, creatinine, blooduricacid, sgot, sgpt, status, date, patientid, userid) 
                VALUES ('',
                if($exams[0] != ''){
                    concat('$_POST[glumet]', '|', '$_POST[glunor]', '|', '$_POST[glures]'),
                } else { 
                    concat('', '|', '', '|', ''),
                }
                if($exams[1] != ''){
                    concat('$_POST[cholmet]', '|', '$_POST[cholnor]', '|', '$_POST[cholres]'),
                }else{
                    concat('', '|', '', '|', ''),
                }
                if($exams[2] != ''){
                    concat('$_POST[trimet]', '|', '$_POST[trinor]', '|', '$_POST[trires]'),
                }else{
                    concat('', '|', '', '|', ''),
                }
                if($exams[3] != ''){
                    concat('$_POST[himet]', '|', '$_POST[hinor]', '|', '$_POST[hires]'),
                }else{
                    concat('', '|', '', '|', ''),
                }
                }if($exams[4] != ''){
                    concat('$_POST[lowmet]', '|', '$_POST[lownor]', '|', '$_POST[lowres]'),
                }else{
                    concat('', '|', '', '|', ''),
                }
                }if($exams[5] != ''){
                    concat('$_POST[ureamet]', '|', '$_POST[ureanor]', '|', '$_POST[ureares]'),
                }else{
                    concat('', '|', '', '|', ''),
                }
                }if($exams[6] != ''){
                    concat('$_POST[cremet]', '|', '$_POST[crenor]', '|', '$_POST[creres]'),
                }else{
                    concat('', '|', '', '|', ''),
                }
                }if($exams[7] != ''){
                    concat('$_POST[uricmet]', '|', '$_POST[uricnor]', '|', '$_POST[uricres]'),
                }else{
                    concat('', '|', '', '|', ''),
                }
                }if($exams[8] != ''){
                    concat('$_POST[astm]', '|', '$_POST[astm]', '|', '$_POST[astm]'),
                }else {
                    concat('$_POST[astmet]', '|', '$_POST[astnor]', '|', '$_POST[astres]'),
                }
                }if($exams[9] != ''){
                    concat('$_POST[altmet]', '|', '$_POST[altnor]', '|', '$_POST[altres]'),
                }else{
                    concat('', '|', '', '|', ''),
                }
                'confirm1', 
                '$date',
                '$_POST[patid]',
                '" .$_SESSION['user']. "')"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:47:20.050

如果您将代码写在字符串中，PHP 不会解释您的代码。

将它放在字符串之外，并正确*生成*您的 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:47:29.890

在 php 中执行 concat 并将变量传递给 sql 查询，例如

```
$str = '';
if($exams[0] != ''){
 $str .=$_POST['glumet'] . '|' . $_POST['glunor'] . '|' . $_POST['glures'];
} else { 
 $str .='| |';
}
..similar for others and user $str in your query 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:47:58.403

您不能将 PHP 代码直接写入 SQL 查询。将其设置为“.[PHP-Code].”- 就像您对 $_SESSION 变量所做的那样。

**请记住，这是将表单数据插入数据库的一种非常不安全的方式！** 很容易操纵您的查询！

# android - android 那是这个参数？

> ID：14559195
> 
> 赞同：0
> 
> 时间：2013-01-28T09:40:31.260
> 
> 标签：android

这是一个愚蠢的问题，但我真的需要理解这一点。

```
android.media.audiofx.Visualizer

getfft(byte[] fft) 
```

那是`byte[] fft`？是我需要得到的 fft 频率数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:52:38.770

这是一个快速傅里叶变换。

[http://en.wikipedia.org/wiki/Fast_Fourier_transform](http://en.wikipedia.org/wiki/Fast_Fourier_transform)

在该方法中，您传入一个空数组进行填充。该数组应该是由`visualizer.getCaptureSize()`.

# java - 从下到上定位 JXTreeTable

> ID：14559196
> 
> 赞同：1
> 
> 时间：2013-01-28T09:40:32.790
> 
> 标签：java, swing, orientation, swingx, jxtreetable

有没有办法`JXTreeTable`从下到上定位？我的意思是，而不是像这样的默认布局：

```
Node 0
  |-     Node 0/Column 0      Node 0/Column 1
Node 1
  |-     Node 1/Column 0      Node 1/Column 1 
```

我希望展开的行出现在相应的节点上方，如下所示：

```
 |-     Node 0/Column 0      Node 0/Column 1
Node 0
  |-     Node 1/Column 0      Node 1/Column 1
Node 1 
```

# github - 声纳+github 集成

> ID：14559197
> 
> 赞同：5
> 
> 时间：2013-01-28T09:40:36.080
> 
> 标签：github, sonarqube

我想用 git 启用声纳，但是否有必要首先使用 hudson 或其他东西从 git 存储库中提取项目，然后声纳会定期在 hudson 上分析代码。我是正确的意思是我的步骤：

1.使用 hudson 从 git 拉取项目。

2\. hudson 上的Sonar 将分析代码并发送更新。？

或者直接我们可以使用 git+sonar 它是如何工作的，任何人都可以指导我让它工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T10:34:31.010

是的，您需要先从 GitHub 拉取您的项目，然后在您的本地副本上启动 Sonar 分析（Sonar 需要文件存在于文件系统上才能分析它们）。

所以你可以手动拉你的项目，或者使用像 Jenkins/Hudson 这样的 CI 服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-09T13:59:11.303

好消息，昨天（2015-07-08）SonarQube 推出了 Github Pluging，每次提交 pull request，CI 系统都会启动 SonarQube 预览分析。

**参考： http:** [//www.sonarqube.org/github-pull-request-analysis-helps-fix-the-leak/](http://www.sonarqube.org/github-pull-request-analysis-helps-fix-the-leak/)

# javascript - 如何从 Mongoose 的集合中排除一个特定字段？

> ID：14559200
> 
> 赞同：75
> 
> 时间：2013-01-28T09:40:49.613
> 
> 标签：javascript, mongodb, mongoose, mongodb-query

我有一个带有 Mongoose ODM（**Mongoose 3.3.1**）的 NodeJS 应用程序。我想从我的集合中检索除 1 之外的所有字段。例如：我有一个包含 6 个字段的集合产品，我想选择除字段 "Image" 之外的所有字段。我使用了“**排除**”方法，但出错了。这是我的代码。

```
 var Query = models.Product.find();
    Query.exclude('title Image');

    if (req.params.id) {
        Query.where('_id', req.params.id);
    }

    Query.exec(function (err, product) {
        if (!err) {
            return res.send({ 'statusCode': 200, 'statusText': 'OK', 'data': product });
        } else {
            return res.send(500);
        }
    }); 
```

但这会返回**错误**

```
Express
500 TypeError: Object #<Query> has no method 'exclude'......... 
```

我也试过了，`var Query = models.Product.find().exclude('title','Image');`但是`var Query = models.Product.find({}).exclude('title','Image');` 得到了同样的错误。如何从 Mongoose 的集合中排除一个/（两个）特定字段。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2013-01-28T13:50:31.817

用于[`query.select`](http://mongoosejs.com/docs/api.html#query_Query-select)当前 (3.x) Mongoose 构建中的字段选择。

在要排除的字段名称前加上`-`; 所以在你的情况下：

```
Query.select('-Image'); 
```

顺便说一句：在 JavaScript 中，应为构造函数保留以大写字母开头的变量。因此，请考虑在您的代码中`Query`重命名。`query`

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-01-28T09:48:34.847

我不知道你在哪里读到了 .exclude 函数，因为我在任何文档中都找不到它。

但是您可以通过使用 find 方法的第二个参数来排除字段。

[这是官方文档](http://docs.mongodb.org/manual/core/read-operations/)中的示例：

```
db.inventory.find( { type: 'food' }, { type:0 } ) 
```

> 此操作返回 type 字段的值为 food 的所有文档，但输出中不包含 type 字段。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-11-03T14:14:42.903

```
Model.findOne({ _id: Your Id}, { password: 0, name: 0 }, function(err, user){
  // put your code
}); 
```

这段代码在我的项目中有效。谢谢！！祝你今天过得愉快。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-03-23T13:05:08.930

你可以这样做

```
const products = await Product.find().select(['-image']) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-23T00:21:12.580

我将它与异步等待一起使用

```
async (req, res) => {
      try { 
        await User.findById(req.user,'name email',(err, user) => {
          if(err || !user){
            return res.status(404)
          } else {
            return res.status(200).json({
              user,
            });
          }
        });
      } catch (error) {
        console.log(error);
      } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-01T11:30:03.267

在 Mongoose 的更新版本中，您可以按如下方式使用它来获取选定的字段。

```
user.findById({_id: req.body.id}, 'username phno address').then(response => {
  res.status(200).json({
    result: true,
    details: response
  });
}).catch(err => {
  res.status(500).json({ result: false });
}); 
```

# android - 将值传递给android中的调用按钮

> ID：14559204
> 
> 赞同：-1
> 
> 时间：2013-01-28T09:40:55.903
> 
> 标签：android

我正在创建一个调用应用程序。我正在尝试在 actionView 中使用默认号码，并希望在手机通话按钮中传递手机号码。

这是我的代码：-

```
public void onClick(View arg0) {
                  // this is real calling number 
        long mobile = "tel:9999999999";
                                           // this is default number.and show in textfield of calling.
                    Uri uri = Uri.parse("tel:+919910699440");
                 Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        // here i want to pass real calling num in Button. so when i press the                         
                    //calling button . button will get mobile num but not show.     

                     intent.setData(Uri.parse("tel:"+mobile));

                 startActivity(intent);

                } 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:46:55.810

你有两个选择：

*   使用`Intent.ACTION_CALL`：

    ```
    Intent intent = new Intent(Intent.ACTION_CALL);
    intent.setData(Uri.parse("tel:" + number.trim()));
    startActivity(intent); 
    ```

    这将有效地拨打提供的`number`电话号码。请记住，此操作需要`android.permission.CALL_PHONE`清单中的权限：

    ```
    <uses-permission android:name="android.permission.CALL_PHONE" /> 
    ```

*   使用`Intent.ACTION_DIAL`：

    ```
    Intent intent = new Intent(Intent.ACTION_DIAL);
    intent.setData(Uri.parse("tel:" + number.trim()));
    startActivity(intent); 
    ```

    这显示了`number`已拨入的拨号器视图，但允许用户决定是否实际拨打电话。这*不需要*额外的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:43:49.163

借助以下代码，您可以调用**`ACTION_CALL Intent`**

```
int Number = 0377778888;
Intent callIntent = new Intent(Intent.ACTION_CALL);
callIntent.setData(Uri.parse("tel:" + number));
startActivity(callIntent); 
```

并且您还需要将此权限添加到 AndroidManifest 文件

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T10:00:46.540

试试这个代码我改变了这个代码：

```
 no=txt_no.getText().toString().trim();

   String URI_TEL = "tel";
           Uri uri = Uri.fromParts(URI_TEL, no, null);

            Intent intent = new Intent(Intent.ACTION_CALL,uri);
            //intent.setData(Uri.parse(no));
            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

            startActivity(intent); 
```

# c# - LINQ 从一个集合中获取不属于另一个集合的元素

> ID：14559206
> 
> 赞同：2
> 
> 时间：2013-01-28T09:41:08.140
> 
> 标签：c#, linq

我有一个`List<MyObject> allObjects`and `List<MyObject> someObjects`（其中的所有对象也`someObjects`属于`allObjects`。我想从中获取`allObjects`不属于的元素`someObjects`？我怎样才能用 LINQ 实现呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T09:42:16.407

这很容易[`allObjects.Except(someObjects)`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)

但是，您应该知道，这使用默认的相等比较器来比较值。

如果您希望使用 custom `IEqualityComparer<MyObject>`，那么有[一个重载](http://msdn.microsoft.com/en-us/library/bb336390.aspx)可以让您这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:42:27.623

```
var exceptionList= allObjects.Except(someObjects); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:45:17.273

尝试这个

```
allObjects.Except(someObjects) 
```

# sql - 按数字和字符串属性排序的 SQL

> ID：14559207
> 
> 赞同：0
> 
> 时间：2013-01-28T09:41:09.607
> 
> 标签：sql, sql-server, sql-order-by

我遇到的问题是通过查询关联一个包含数字和日期时间值的顺序，并将对 ASC 进行排序，并且还有一个字符串值需要按特定顺序从高到低排序。我能够在使用案例的查询中对优先级本身进行排序，但不能为其他值添加任何其他条件。另一个问题是在运行时决定了它们的排序顺序，因此顺序会改变。

单独排序优先级

```
SELECT [Task], [Start Date] AS Start_Date, [End Date] AS End_Date, [Priority], [Time Allowance] AS Time_Allowance, [Details] FROM [schedulerData0]
ORDER BY (CASE Priority
 WHEN 'Very High' Then 1  
 WHEN 'High' Then 2 
 WHEN 'Medium' Then 3 
 WHEN 'Low' Then 4 
 WHEN 'Very Low' Then 5
END) 
```

尝试合并案例

```
SELECT [Task], [Start Date] AS Start_Date, [End Date] AS End_Date, [Priority], [Time Allowance] AS Time_Allowance, [Details] FROM [schedulerData0]
ORDER BY
-- numeric columns
CASE _orderby WHEN 'Time_Allowance' THEN Time_Allowance END ASC;
-- string columns
CASE _orderby Priority
 WHEN Priority = 'Very High' THEN 1,
 WHEN Priority = 'High' THEN 2,
 WHEN Priority = 'Medium' THEN 3,
 WHEN Priority = 'Low' THEN 4,
 WHEN Priority = 'Very Low' THEN 5;
-- datetime columns
CASE _orderby WHEN 'Start_Date' THEN Start_Date END ASC,
CASE _orderby WHEN 'End_Date' THEN End_Date END DESC;
END 
```

当前在下面有声明，其中第一个第二个和第三个选择所声明的属性。因为这将对所有数字数据进行排序，但按字母顺序排序优先级。

```
SELECT [Task], [Start Date] AS Start_Date, [End Date] AS End_Date, [Priority], [Time Allowance] AS Time_Allowance, [Details] FROM [schedulerData0] ORDER BY [" + firstSelect + "], [" + secondSelect + "], [" + thirdSelect + "]" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:52:54.140

试试这个。

```
SELECT [Task], [Start Date] AS Start_Date, [End Date] AS End_Date, [Priority], [Time     Allowance] AS Time_Allowance, [Details] FROM [schedulerData0]
ORDER BY (CASE Priority
  WHEN 'Very High' Then 1  
  WHEN 'High' Then 2 
  WHEN 'Medium' Then 3 
  WHEN 'Low' Then 4 
  WHEN 'Very Low' Then 5
END), [Start Date] ASC, [End Date] DESC 
```

# css - Sprite 动画在开始时跳跃

> ID：14559209
> 
> 赞同：0
> 
> 时间：2013-01-28T09:41:15.783
> 
> 标签：css, animation, sprite

我正在创建一个宝箱打开的精灵动画。我在一个“png”格式的图像上制作了 7 个并排放置的阶段。它适用于以下代码，但由于某种原因，在动画开始时图像会跳起来。我认为这是图像的问题，第一阶段可能比其他阶段低一点。事实并非如此，所以我不知道问题是什么。谁能告诉我问题是什么？

```
body {
text-align: center;
}

@-webkit-keyframes wink {
    from { background-position: 0px; }
    to { background-position: -3600px; }
}

@-moz-keyframes wink {
    from { background-position: 0px; }
    to { background-position: -3600px; } 
}

@keyframes wink {
    from { background-position: 0px; }
    to { background-position: -3600px; }
}

.chest {
    background-image: url("file://///FILESERVER/scratch/Sean/sprite2.png");
    height: 600px;
    margin: 0 auto;
    width: 550px;
}

.chest:hover {    
    -webkit-animation: wink 2.5s steps(6, end) 1 forwards;
    -moz-animation: wink 2.5s steps(6, end) 1 forwards;
    animation: wink 2.5s steps(6, end) 1 forwards;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:43:27.517

这是因为您没有设置初始背景位置，所以当动画开始时，背景图像会向上跳跃。

```
.chest {
    background-image: url("file://///FILESERVER/scratch/Sean/sprite2.png");
background-position: 0 0;
    height: 600px;
    margin: 0 auto;
    width: 550px;
} 
```

这应该解决它

# java - 每行具有可变列宽的表格（类似于 iOS 的 UICollectionView）

> ID：14559213
> 
> 赞同：11
> 
> 时间：2013-01-28T09:41:38.107
> 
> 标签：java, android, android-layout

Android SDK中的 iOS [UICollectionView](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)是否有等价物？

我需要实现如下类似的“表格”布局，但是由于有很多单元格（用户将滚动屏幕以查看所有内容）**，出于性能原因，我需要重新使用单元格。**

```
+-----------------+----------+--------+
| cell 1          | cell 2   | cell 3 |
+-----------------+--+-------+--+-----+
| cell 4  | cell 5   | cell 6   |
+---------+---+------+-----+----+---------+
| cell 7      | cell 8     | cell 9       |
+-------------+------------+--------------+ 
```

我正在考虑为每一行使用单独的 GridView，但我需要一次滚动所有表格，我不确定单元格重用是否会以这种方式正常工作。

实现上表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T00:18:49.797

如果您可以将单元格设置为预定义的宽度，您应该查看[TwoWayGridView](https://github.com/jess-anders/two-way-gridview)。

否则，您正在寻找的是 AOSP 的实验分支，它被称为 StaggeredGridView。他们已经开始实施，但它还很年轻，还没有准备好，尽管它可能会给你一个关于从哪里开始的提示。

通常，对此有不同的方法，根据我的经验，您最终可能不得不编写一个强大的视图回收器并自己重新使用，以便能够依赖现有的 API 和小部件，您只需计算滚动的宽度，并在它们分离或需要在滚动事件时附加到您的容器时放置视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:26:05.473

我认为[***StaggeredGridView***](https://github.com/maurycyw/StaggeredGridViewDemo)或[***QuiltView***](https://github.com/jacobmoncur/QuiltViewLibrary)库将帮助您解决问题。使用这些库，我们可以根据宽度和高度排列图像

如果您正在使用被子视图，您可以通过更改`ScaleType`等来以不同的样式排列它。

我没有尝试过 TwoWayGridView 但值得一试。我希望这有帮助.. ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T06:59:26.690

我不确定，但您可以在[此处找到您的问题的解决方案。](https://stackoverflow.com/questions/10679997/in-the-google-play-app-how-is-the-viewgroup-showing-the-application-top-lists-i/10703676#10703676)

我认为[Bucket List Adapter](https://github.com/rzsombor/bucket-list-adapter)是您问题的解决方案。请尝试实施它并让我知道。

随意发表评论。享受编码。:)

**更新**

你也可以像你说的那样做。只需在用户从下到上滚动时创建 Dynamic TableLayout。因此它不会占用太多内存，并且还会根据您的自定义视图显示数据。这样，您将拥有 Scroll 将所有单元格并解决内存问题。

# html - 为什么默认情况下css不支持变量和层次结构？

> ID：14559223
> 
> 赞同：0
> 
> 时间：2013-01-28T09:42:10.907
> 
> 标签：html, css

我对 UI 开发有点陌生，但我对 CSS 的实际工作方式感到非常不舒服。

我的用例：[尝试使用 css & less]

我想`div`在页面上的特定内容中应用一些特定样式。

**CSS尝试：**

```
div.class1 {
    font: normal 12px arial, helvetica, sans-serif;
    font-color: #f30;
}
div.class1 div.class2 {
    border: 1px solid #f30;
} 
```

**少尝试：**

```
@red: #f30;
@font-family: arial, helvetica, sans-serif;
div.class1 {
    font: normal 12px @font-family;
    font-color: @red;
    div.class2 {
        border: 1px solid @red;
    } 
```

*   现在，编写 css 可能会导致错误，因为它会迫使您在每次尝试实现层次结构和变量重用时`#f30`重复`div.class2`。

**我的问题 ：**

*   为什么那 css 让事情变得困难？
*   less 没有什么特别的 - 只是做了明显的改进并转化为 css ？
*   css 想要激励用户的是什么，因为它促进了这种冗余的编码风格？

**我坚信css应该是less。当然，我忽略了为什么在 css 中以这种方式完成的一些明显优势。**

我认为这是一个遗留问题，但当我看到没有尝试使用 css3 解决这个问题时，我感到很惊讶。

请帮助我了解我应该如何处理 css ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:52:15.260

Css 是一门古老的语言，过时的用户代理需要很长时间才能变得不受欢迎，以至于开发人员停止支持它们。多年来，我没有看到 css 发生重大变化。

另外，我相信 css 和 html 最初是为不熟悉编程语言的人准备的。

# wcf - IIS - 目录可浏览时未找到资源

> ID：14559232
> 
> 赞同：2
> 
> 时间：2013-01-28T09:42:31.657
> 
> 标签：wcf, rest, iis-7

我的系统有一点奇怪的问题。我在我的系统上托管了一个服务、休息服务（特定）。当我尝试访问同一服务的 svc 页面时，它给了我 HTTP 404（找不到资源。）错误，而我可以浏览整个目录并且在该目录中它显示 svc 文件位于文件夹中，但是当我单击 svc 文件我得到 404 错误。

我试图在其他系统上托管相同的服务，它工作正常。我不确定是什么导致它不在我的系统上显示。

任何线索都会有很大帮助。

# android - PreferenceCategory 自动重置行为中的奇怪 SwitchPreferencerence

> ID：14559238
> 
> 赞同：4
> 
> 时间：2013-01-28T09:42:46.327
> 
> 标签：android, android-preferences

几天前，我向现有的 android 应用程序添加了一个新的 SwitchPreference。一切似乎都很好，直到我遇到一个非常奇怪的问题 - 向上滚动设置屏幕时 - 开关首选项会自动重置！

查看切换侦听器的日志时 - 用户似乎已恢复设置！此时，我试图隔离问题，并删除不必要的代码。

这是简化的代码：

```
public class NewSettingsActivity extends PreferenceActivity {
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.settings_screen);
    }
} 
```

这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
  <PreferenceCategory android:title="bugger">
      <SwitchPreference
          android:title="BUGGER"
          android:key="cxyz" />
  </PreferenceCategory>

    <PreferenceCategory android:title="blabla">
      <Preference android:title="some1" android:key="some11" />
      <Preference android:title="some2" android:key="some12" />
      <Preference android:title="some3" android:key="some13" />
      <Preference android:title="some11" android:key="some41" />
      <Preference android:title="some12" android:key="some51" />
      <Preference android:title="some13" android:key="some16" />
      <Preference android:title="some14" android:key="some17" />
      <Preference android:title="some15" android:key="some18" />
      <Preference android:title="some16" android:key="some19" />
      <Preference android:title="some18" android:key="some199" />
  </PreferenceCategory>

  <PreferenceCategory android:title="testtest">
    <SwitchPreference
      android:title="BUGGEE"
      android:key="d" />
  </PreferenceCategory>

</PreferenceScreen> 
```

此时我意识到 - 当 SwitchPreference 隐藏在视图下时，它会被重置，并显示另一个 SwitchPreference！

为了调试它，我实现了 MySwitchPreference，它扩展了 SwitchPreference 并记录了每个调用的公共/受保护方法，但不幸的是（？） - 刚刚解决了问题！:)

所以我对此有一个绕道，但这是非常有趣的行为。有没有人遇到过类似的事情？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T18:03:59.193

此处提供了一个[答案](https://stackoverflow.com/a/15744076/238374)，它已[在 Android 错误跟踪器上标记为已发布](https://code.google.com/p/android/issues/detail?id=26194)（已在 Lollipop 中修复）。

Joe 的解决方法是扩展 SwitchPreference 类并在您的视图中使用该扩展。我会进一步总结他的解决方法，但他上面链接的帖子已经很简洁了。

# javascript - 使用javascript从div中选择复选框时自动滚动

> ID：14559241
> 
> 赞同：0
> 
> 时间：2013-01-28T09:43:03.193
> 
> 标签：javascript

我有两个部门标签，一个用于维护溢出内容，另一个包含复选框，当我单击任何复选框时，我只需要根据复选框向上滚动条，即有 20 个复选框，如果需要，可以看到 9-10其他然后你必须滚动滚动条，但我想要功能，比如当我点击 9 复选框并且用户想要前进然后 10 复选框自动出现。此功能已在热邮件中提供，用于选择邮件。

对于那个我使用以下

```
<div>
<div id="text" style="width: 500px; height:200px; border: solid 1px grey; overflow: scroll;">
    <input id="check1" type="checkbox" onclick="update(this.id)">Auto-scroll1<br>
    <input id="check2" type="checkbox" onclick="update(this.id)">Auto-scroll2<br>
    <input id="check3" type="checkbox" onclick="update(this.id)">Auto-scroll3<br>
    <input id="check4" type="checkbox" onclick="update(this.id)">Auto-scroll4<br>
    <input id="check5" type="checkbox" onclick="update(this.id)">Auto-scroll5<br>
    <input id="check6" type="checkbox" onclick="update(this.id)">Auto-scroll6<br>
    <input id="check7" type="checkbox" onclick="update(this.id)">Auto-scroll7<br>
    <input id="check8" type="checkbox" onclick="update(this.id)">Auto-scroll8<br>
    <input id="check9" type="checkbox" onclick="update(this.id)">Auto-scroll9<br>
    <input id="check10" type="checkbox" onclick="update(this.id)">Auto-scroll10<br>
    <input id="check11" type="checkbox" onclick="update(this.id)">Auto-scroll11<br>
    <input id="check12" type="checkbox" onclick="update(this.id)">Auto-scroll12<br>
    <input id="check13" type="checkbox" onclick="update(this.id)">Auto-scroll13<br>
    <input id="check14" type="checkbox" onclick="update(this.id)">Auto-scroll14<br>
    <input id="check15" type="checkbox" onclick="update(this.id)">Auto-scroll15<br>
    <input id="check16" type="checkbox" onclick="update(this.id)">Auto-scroll16<br>
    <input id="check17" type="checkbox" onclick="update(this.id)">Auto-scroll17<br>
    <input id="check18" type="checkbox" onclick="update(this.id)">Auto-scroll18<br>
    <input id="check19" type="checkbox" onclick="update(this.id)">Auto-scroll19<br>
    <input id="check20" type="checkbox" onclick="update(this.id)">Auto-scroll20<br>
    <script type="text/javascript">
        function update(checkID) {
            var box = document.getElementById("checkID");
            var tag = document.getElementById("text");
            tag.scrollTop = tag.scrollTop - 17;
            setTimeout('update(checkID)', 1000);
        }
    </script>
</div>
</div> 
```

当用户从列表中选择复选框时如何滚动滚动条，以及如果用户选择向前而不是向下滚动或用户选择向后而不是根据用户要求向上滚动

请帮助我提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:15:30.173

我想我做了你想要的。为此，您将需要 jQuery。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

<div id="text" style="width:500px;height:200px;border:solid 1px grey;overflow:scroll;">
    <input type="checkbox" />Auto-scroll1<br/>
    <input type="checkbox" />Auto-scroll2<br/>
    <input type="checkbox" />Auto-scroll3<br/>
    <input type="checkbox" />Auto-scroll4<br/>
    <input type="checkbox" />Auto-scroll5<br/>
    <input type="checkbox" />Auto-scroll6<br/>
    <input type="checkbox" />Auto-scroll7<br/>
    <input type="checkbox" />Auto-scroll8<br/>
    <input type="checkbox" />Auto-scroll9<br/>
    <input type="checkbox" />Auto-scroll10<br/>
    <input type="checkbox" />Auto-scroll11<br/>
    <input type="checkbox" />Auto-scroll12<br/>
    <input type="checkbox" />Auto-scroll13<br/>
    <input type="checkbox" />Auto-scroll14<br/>
    <input type="checkbox" />Auto-scroll15<br/>
    <input type="checkbox" />Auto-scroll16<br/>
    <input type="checkbox" />Auto-scroll17<br/>
    <input type="checkbox" />Auto-scroll18<br/>
    <input type="checkbox" />Auto-scroll19<br/>
    <input type="checkbox" />Auto-scroll20<br/>
</div>

<script type="text/javascript">
$(function() {
    var ct = $('#text'),
        cboxes = $('input[type="checkbox"]', ct),
        lastChecked = null;

    cboxes.click(function() {
        if (!lastChecked)
            lastChecked = this;

        var _current = $(this),
            _last = $(lastChecked),
            cindex = cboxes.index(_current),
            lindex = cboxes.index(_last),
            t = null;

        //next
        if (cindex >= lindex) {
            t = $(cboxes[cindex + 1]);
            if (t) ct.animate({ scrollTop: ct.scrollTop() + t.height() * 1.5 }, 500);

        //prev
        } else if (cindex < lindex) {
            t = $(cboxes[cindex - 1]);
            if (t) ct.animate({ scrollTop: ct.scrollTop() - t.height() * 1.5 }, 500);
        }

        lastChecked = this;
    });
});
</script> 
```

看到[这个](http://jsfiddle.net/pbaris/Nv2tE/14/)

# r - 如何知道在 R 中的预测方法中使用哪些 x 值？

> ID：14559244
> 
> 赞同：-1
> 
> 时间：2013-01-28T09:43:12.690
> 
> 标签：r, linear-regression, lm, predict

我已经拟合了一个线性模型：

```
f <- lm(y ~ x) 
```

从那我使用了预测方法

```
p <- predict(f) 
```

但是 predict 方法并没有提供预期的结果。在下图中，我将拟合范围标记为红色。

```
lines(x, y, col="red") 
```

蓝色是预测值

```
lines(x, p, col="blue") 
```

但预测值并非从预期点开始。我曾期望预测点的第一个 y 值从与第一个拟合值相同的点开始。

所以现在我知道为什么这不会发生。因为我从已知的 x 值预测了未知的 y 值。但是我怎样才能轻松实现蓝线向下移动，以便您可以看到蓝线与红线相关联？因此，我如何知道要使用哪些 x 值？

![拟合值和预测值图](../Images/b4e410f03fd8beb4a4dac7b06f0d4df3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:52:16.713

当您从函数中省略`newdata`参数时`predict`，您将使用模型的拟合值（请参阅 参考资料`?predict.lm`）。如果你从你的数据中取最小的 x 值并画一条垂直线，你可以看到这个，即

```
abline(v=min(x), col=4, lty=3) 
```

# c# - 在安装项目中替换现有文件后看不到最近的更新

> ID：14559245
> 
> 赞同：1
> 
> 时间：2013-01-28T09:43:35.663
> 
> 标签：c#, installation, windows-applications

我为 Windows Application 创建了一个安装项目。我设置了以下属性以用新版本替换现有版本。

```
RemovePreviousversion=True;
Productcode=change; 
```

但是当我`exe`从新安装的版本运行时。我看不到我的新更新。它给了我以前版本的输出！

完整的解释在这里

我将 RemovePreviousVersions 设置为 TRUE，InstallAllUsers 设置为 TRUE。

当我需要发布新版本时，我会在安装程序中使用新版本号更新版本字段，VS 会提示我更新产品代码，我回答是。我已经验证它确实更改了产品代码，但包代码也随之更改（通过使用 sourcesafe 区分项目文件进行验证）。

UpgradeCode 在版本之间永远不会改变。

我的版本号更改形式为：例如“1.1.2”->“1.1.3”（以防万一与它有关）。

所以构建之间只有 3 个字段不同：ProductCode、PackageCode 和 ProductVersion。

完成所有这些后，我构建了安装程序。当我安装新版本时（我总是为所有用户安装并且总是安装到同一个目录中），我在不同的时间看到了三种不同的结果：

1.  它似乎会安装新版本，但我最终还是得到了旧文件（以及添加/删除程序中的一个实例）。
2.  我最终在添加/删除程序中得到了 2 个应用程序实例，它们都具有相同的名称，并且都指向同一个目录。
3.  它会先卸载旧的，然后安装新的（它应该做的）。

向用户解释说为了安全起见，他们必须在安装新版本之前手动卸载旧版本是非常令人沮丧的，因为我必须告诉他们“它并不总是像预期的那样卸载旧版本”。

有什么建议么？为什么这不起作用？我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:25:28.827

我找到了答案。

还需要更改**AssemblyInfo.cs**中的AssemblyVersion和**AssemblyFileVersion**

# perl - 无法在 ubuntu 中安装 perl 模块 Apache2::Const

> ID：14559246
> 
> 赞同：-1
> 
> 时间：2013-01-28T09:43:41.270
> 
> 标签：perl, apache, apache2, cpan, apache-modules

我在安装 perl 模块时遇到问题`Apache2::Const`。

当我尝试使用 cpan.pm 安装它时，它显示以下错误

```
Warning: Cannot install Apache2::Const, don't know what it is. 
```

我正在使用 Ubuntu 12.04、Apache/2.2.22、Perl 5.14。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:57:11.757

Apache2::Const 是 mod_perl 的一部分。

如果您使用的是 ubuntu 提供的 apache，您可能只想：

```
sudo apt-get install libapache2-mod-perl2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:46:56.467

看着这个网站

[http://ubuntuforums.org/archive/index.php/t-1747708.html](http://ubuntuforums.org/archive/index.php/t-1747708.html)

尝试：

```
apt-get install apache2-mpm-prefork 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T03:49:43.743

我只花了一个小时在 Ubuntu 12.04 上解决完全相同的问题，终于弄明白了。我已经安装了 libapache2-mod-perl2 ：

```
$ sudo apt-get install libapache2-mod-perl2
Reading package lists... Done
Building dependency tree   
Reading state information... Done
libapache2-mod-perl2 is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded. 
```

尽管如此，当我尝试通过 cpan 安装 Apache2::Const 模块时，我仍然遇到同样的错误：

```
$ cpan Apache2::Const
Going to read '/home/jdoe/.cpan/Metadata'
  Database was generated on Sun, 27 Apr 2014 08:29:02 GMT
Warning: Cannot install Apache2::Const, don't know what it is.
Try the command

    i /Apache2::Const/

to find objects with matching identifiers. 
```

我终于发现 Apache2::Const在安装libapache2-mod-perl2 时**已经安装（我想是二进制）：**

```
$ perl -MApache2::Const < /dev/null
$ 
```

因此**Apache2::Const 不应该使用 cpan 安装**。

# lotus-domino - 未知的触发器和搜索类型；代理可能已损坏 - Lotus Notes/Domino 代理错误

> ID：14559253
> 
> 赞同：1
> 
> 时间：2013-01-28T09:43:53.127
> 
> 标签：lotus-domino, lotus, agent

我有一个预定的 Lotus Notes/Domino 代理 (8.5.3)，它不会运行。手动运行时效果很好。代理日志给出错误“未知的触发器和搜索类型；代理可能已损坏”。代理使用服务器 ID 进行签名。安全级别 =“允许受限操作”。我还能检查什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:57:33.893

如果您将代理设置为以一种方式激活，并且您尝试强制它以另一种方式运行，则可能会出现“未知触发器和搜索类型”错误。

例如，您已将其设置为在传入文档上运行，但尝试从服务器控制台运行它。

您需要检查代理首选项中的以下设置，看看它们是否正确：

![运行时首选项](../Images/62f54744e49d693a4e3578c11500d9ae.png)

有关这些设置的更多详细信息，请点击此处。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.notes85.help.doc/agt_trigger_agent_on_event_t.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.notes85.help.doc/agt_trigger_agent_on_event_t.html)

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.notes85.help.doc/agt_trigger_agent_on_schedule_t.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.notes85.help.doc/agt_trigger_agent_on_schedule_t.html)

如果是损坏的情况，您可以尝试修改这些设置并保存代理。或者创建一个新代理，复制代码并将其替换为以前的代理。

# php - 如何在 Magento 中获取原始（所有商店视图）当前类别名称？

> ID：14559255
> 
> 赞同：3
> 
> 时间：2013-01-28T09:43:54.587
> 
> 标签：php, magento

如何在 Magento 中获取“原始”类别名称，我已经翻译了当前商店视图的类别名称。我想获取在所有商店视图中输入的类别名称，因为我想将原始（英文）名称发送到 GA 进行跟踪 - 当我在类别页面上时我需要这个。

我可以通过这种方式获得本地化的类别名称：

```
<?php 
$currentCategory = Mage::registry('current_category');
$name = $currentCategory->getName();
?> 
```

但是如果不额外调用数据库，就无法找到一种方法来获取未翻译的名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T10:14:32.283

如上所述，这将需要额外的数据库请求。以下应该有效：

```
$defaultStoreCategory = Mage::getModel('catalog/category');
$defaultStoreCategory->setStoreId(Mage_Catalog_Model_Abstract::DEFAULT_STORE_ID);
$defaultStoreCategory->load($currentCategory->getId());

$name = $defaultStoreCategory->getName(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:01:53.590

尝试使用此代码

```
 $storeId = Mage::app()->getStore()->getId();

 $product = Mage::getModel('catalog/category')
     ->setStoreId(Mage::app()->getStore()->getId())
     ->load(YOUR_CATEGORY_ID); 
```

希望这可以帮助。

# objective-c - UINavigationController - JTRevealSidebar

> ID：14559263
> 
> 赞同：0
> 
> 时间：2013-01-28T09:44:51.517
> 
> 标签：objective-c, uiviewcontroller, uinavigationcontroller

我在 JTRevealSiderbar 的 Sidebarviewcontroller 中有一个问题，其中侧边栏按钮按下委托我正在调用如下代码：

```
OpeningViewController *controller = [[OpeningViewController alloc] init];
controller.view.backgroundColor = [UIColor clearColor];
//controller.title = (NSString *)object;
controller.leftSidebarViewController  = sidebarViewController;
controller.leftSelectedIndexPath      = indexPath;
sidebarViewController.sidebarDelegate = controller;
NSArray *viewControllerArray = [[NSArray alloc] initWithObjects:controller, nil];
[self.navigationController setViewControllers:viewControllerArray]; 
```

我从 baseviewcontroller 、 siderbarviewcontroller 和我的 openingviewcontroller 中检查过，uinavigationcontroller 的内存地址是相同的。

此外，当我调用上面的代码时，OpeningViewController 的 viewdid 加载并出现也没有问题。

但这是我的问题，没有显示视图！？我不知道为什么会出现这个问题。

我检查了 self.navigationController 的 viewControllers 属性是否为空？也许这就是问题所在，但我也无法弄清楚为什么导航控制器的视图控制器是空的？

请有人帮助我，任何想法将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:28:00.460

因为我使用的是故事板和 segues，所以我为每个视图控制器为我的故事板创建了一个 viewid，并使用它们的故事板 ID 创建每个视图控制器。当我实现这个时，我只需要给我的每个视图控制器一个背景图像（我仍然不知道为什么会这样）。但这完全解决了我的问题。

如果您需要任何帮助，您可以对此发表评论，然后我将传递一些代码。

# c# - winforms MDI 如何使子窗体看起来像父窗体的自然部分

> ID：14559264
> 
> 赞同：1
> 
> 时间：2013-01-28T09:45:07.053
> 
> 标签：c#, winforms, visual-studio, mdi

问题是这样的 - 我有一个`parent`带有菜单的主窗体 ( ) 和其他几个子窗体，我希望它们加载到主窗体中。我遇到的问题是——`child`表单在主表单（`parent`）中加载，但它看起来像一个单独的窗口。这：

![在此处输入图像描述](../Images/fb29abfc401b6295af6c1588ece23129.png)

`parent`而且它不仅像窗口中的窗口一样，而且在看起来合乎逻辑但不是我想要的时候也不会调整大小。

我想要的是这样的：

![在此处输入图像描述](../Images/478a65f82a9c5824521df262e057555d.png)

我希望在没有, , , 蓝线和所有这些东西`child`的窗口控制器的情况下加载表单，而是看起来像窗口的一部分并响应一些父事件，例如.`minimize``maximize``close``parent``resize`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:49:58.970

尝试将以下代码添加到您的子窗口中（并订阅 FormLoaded 事件）

```
private void FormLoad(object sender, EventArgs e)
{
    FormBorderStyle = FormBorderStyle.None;
    WindowState = FormWindowState.Maximized;
} 
```

# iphone - didFinishPickingMediaWithInfo 中的应用程序崩溃

> ID：14559271
> 
> 赞同：0
> 
> 时间：2013-01-28T09:45:28.567
> 
> 标签：iphone, objective-c, crash, uiimagepickercontroller

当用户录制视频然后单击选择时，我的应用程序崩溃了。这是我的代码：

```
UIImagePickerController *picker = [[UIImagePickerController alloc] init];
        picker.sourceType = UIImagePickerControllerSourceTypeCamera;
        picker.mediaTypes = [[NSArray alloc] initWithObjects:(NSString *)kUTTypeMovie, nil];
        //picker.mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:picker.sourceType];
        picker.allowsEditing = NO;
        picker.delegate = self;
        picker.videoQuality = UIImagePickerControllerQualityTypeMedium;
        [self presentModalViewController:picker animated:YES];

-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
   // [self dismissModalViewControllerAnimated:YES];
    AppDelegate *del = [[UIApplication sharedApplication]delegate];

    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];

    moviePath = [[info objectForKey:UIImagePickerControllerMediaURL]path];..//using this for upload

    del.globalMoviePath = moviePath;

    if (CFStringCompare ((__bridge CFStringRef) mediaType, kUTTypeMovie, 0)== kCFCompareEqualTo)
    {

        moviePath = [[info objectForKey:UIImagePickerControllerMediaURL] path];

        del.globalMoviePath = moviePath;

        picker.videoMaximumDuration = 60.0f;
        picker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModeVideo;

        NSLog(@"nrgkrg===>%@",moviePath);

       videoUrl=(NSURL*)[info objectForKey:UIImagePickerControllerMediaURL];
         NSLog(@"Urlllll===>%@",videoUrl);

        videoData = [NSData dataWithContentsOfURL:videoUrl];

        del.globalMoviePath = moviePath;

        NSLog(@"video is====>%@",del.globalMoviePath);

        MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:videoUrl];
        UIImage *thumbnail = [player thumbnailImageAtTime:1.0 timeOption:MPMovieTimeOptionNearestKeyFrame];
        [player stop];

        videoImage = [[UIImageView alloc]initWithImage:thumbnail];

        //NSLog(@"imegsvideo====>%@",thumbnail);

        //if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(moviePath))
        //{
          //  UISaveVideoAtPathToSavedPhotosAlbum (moviePath, self, @selector(video:didFinishSavingWithError:contextInfo:), nil);
       // }
        //MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:videoUrl];
        //UIImage  *thumbnail = [player thumbnailImageAtTime:1.0 timeOption:MPMovieTimeOptionNearestKeyFrame];
    }

    [self dismissModalViewControllerAnimated:YES];

      //[[picker parentViewController] dismissModalViewControllerAnimated: YES];

} 
```

当用户录制视频并单击时，选择应用程序会崩溃，但从相机胶卷中选择时可以正常工作。

请帮忙！！

这是日志：

```
Nov 29 20:28:14  ReportCrash[259] <Notice>: Formulating crash report for process [254]
Nov 29 20:28:14  com.apple.launchd[1] <Warning>: (UIKitApplication:[0xcc37]) Job appears to have crashed: Segmentation fault: 11
Nov 29 20:28:14  backboardd[52] <Warning>: Application 'UIKitApplication:[0xcc37]' exited abnormally with signal 11: Segmentation fault: 11
Nov 29 20:28:14  ReportCrash[259] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
Nov 29 20:28:14  ReportCrash[259] <Notice>: Saved crashreport to /var/mobile/Library/Logs/CrashReporter/ using uid: 0 gid: 0, synthetic_euid: 501 egid: 0
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) mstreamd: Checking on job state for Photo Stream
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) mstreamd: No jobs scheduled for Photo Stream.
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) mstreamd: Checking on job state for Shared Stream
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) mstreamd: No jobs scheduled for Shared Stream.
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) PS: Media stream daemon stopping.
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) AS: <MSIOSAlbumSharingDaemon: 0x1ee72590>: Shared Streams daemon shutting down.
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) AS: <MSIOSAlbumSharingDaemon: 0x1ee72590>: Shutting down state machine for personID 1446684163.
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) AS: <MSASStateMachine: 0x1ed3e060>: Shutting down uploader.
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) AS: <MSASStateMachine: 0x1ed3e060>: Shutting down downloader.
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) AS: <MSASStateMachine: 0x1ed3e060>: Shutting down state machine.
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) AS: <MSIOSAlbumSharingDaemon: 0x1ee72590>: Shutting down model.
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) AS: <MSASServerSideModel: 0x1ed39d50>: Command Queue has shut down.
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) AS: <MSIOSAlbumSharingDaemon: 0x1ee72590>: Model has shut down.
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) AS: <MSIOSAlbumSharingDaemon: 0x1ee72590>: Shared Streams daemon has shut down.
Nov 29 20:28:38  mstreamd[257] <Notice>: (Note ) mstreamd: <MSPowerBudget: 0x1ed394b0>: Stopping post-foreground timer.
Nov 29 20:28:38  mstreamd[257] <Notice>: (Warn ) mstreamd: mstreamd shutting down.
Nov 29 20:49:16  UserEventAgent[13] <Warning>: PLAggregateState Error: Leaving state pluggedin_screen_off even though we are not in it, doing nothing
Nov 29 20:49:16  kernel[0] <Debug>: AppleD1881PMUPowerSource: AppleUSBCableDetect 0
Nov 29 20:49:16  kernel[0] <Debug>: AppleD1881PMUPowerSource: AppleUSBCableType Detached
Nov 29 20:49:16  kernel[0] <Debug>: virtual IOReturn AppleUSBDeviceMux::message(UInt32, IOService *, void *) - kMessageInterfaceWasDeActivated
Nov 29 20:49:16  kernel[0] <Debug>: AppleUSBDeviceMux::reportStats: USB mux statistics:
Nov 29 20:49:16  kernel[0] <Debug>: USB mux: 190 reads / 0 errors, 899 writes / 0 errors
Nov 29 20:49:16  kernel[0] <Debug>: USB mux: 0 short packets, 0 dups
Nov 29 20:49:16  UserEventAgent[13] <Warning>: PLAggregateState Error: Leaving state pluggedin_charging even though we are not in it, doing nothing
Nov 29 20:49:16  UserEventAgent[13] <Warning>: PLAggregateState Error: Leaving state unplugged_screen_off even though we are not in it, doing nothing
Nov 29 20:49:16  ptpd[104] <Notice>: PTP interface has been deactivated.
Nov 29 20:49:18  UserEventAgent[13] <Warning>: PLAggregateState Error: Leaving state unplugged_asleep even though we are not in it, doing nothing
Nov 29 20:49:18  kernel[0] <Debug>: AppleD1881PMUPowerSource: AppleUSBCableDetect 1
Nov 29 20:49:18  kernel[0] <Debug>: AppleD1881PMUPowerSource: AppleUSBCableType USBHost
Nov 29 20:49:18  UserEventAgent[13] <Warning>: PLAggregateState Error: Leaving state unplugged_screen_off even though we are not in it, doing nothing
Nov 29 20:49:18  UserEventAgent[13] <Warning>: PLAggregateState Error: Leaving state pluggedin_screen_off even though we are not in it, doing nothing
Nov 29 20:49:19  ptpd[104] <Notice>: PTP interface has been activated at high speed.
Nov 29 20:49:56  lockdownd[29] <Notice>: 2fe93000 special_case_get: MGCopyAnswer(kMGQMobileEquipmentIdentifier) returned NULL
Nov 29 20:49:56  lockdownd[29] <Notice>: 2fe93000 copy_phonenumber: CTSettingCopyMyPhoneNumber() returned NULL
Nov 29 20:49:56  mobile_installation_proxy[265] <Error>: 0x3cbd7b88 MobileInstallationSlowLookupBreak: MobileInstallationBrowse was called without specifying an options dictionary containing kLookupReturnAttributesKey. This usage is inefficient and may cause performance problems. Break on MobileInstallationSlowLookupBreak to debug.
Nov 29 20:49:56  mobile_installation_proxy[265] <Error>: 0x3cbd7b88 MobileInstallationSlowLookupBreak: Existing options dictionary: <CFBasicHash 0x1c545b90 [0x3bfb1100]>{type = mutable dict, count = 1,
entries =>
6 : <CFString 0x1c545bc0 [0x3bfb1100]>{contents = "ApplicationType"} = <CFString 0x1c545b30 [0x3bfb1100]>{contents = "User"}
}
Nov 29 20:49:57  mc_mobile_tunnel[267] <Notice>: (Note ) MC: mc_mobile_tunnel starting.
Nov 29 20:49:57  mc_mobile_tunnel[267] <Notice>: (Note ) MC: mc_mobile_tunnel shutting down.
Nov 29 20:49:57  mc_mobile_tunnel[268] <Notice>: (Note ) MC: mc_mobile_tunnel starting.
Nov 29 20:49:57  mc_mobile_tunnel[268] <Notice>: (Note ) MC: mc_mobile_tunnel shutting down.
Nov 29 20:49:57  lockdownd[29] <Notice>: 2fe93000 set_response_error: handle_start_session SessionActive
Nov 29 20:49:57  lockdownd[29] <Notice>: 2fe93000 set_response_error: handle_start_session SessionActive
Nov 29 20:50:03  mc_mobile_tunnel[270] <Notice>: (Note ) MC: mc_mobile_tunnel starting.
Nov 29 20:50:03  mc_mobile_tunnel[270] <Notice>: (Note ) MC: mc_mobile_tunnel shutting down.
Nov 29 20:51:31  UserEventAgent[13] <Warning>: PLAggregateState Error: Leaving state pluggedin_screen_off even though we are not in it, doing nothing
Nov 29 20:51:31  kernel[0] <Debug>: AppleD1881PMUPowerSource: AppleUSBCableDetect 0
Nov 29 20:51:31  kernel[0] <Debug>: AppleD1881PMUPowerSource: AppleUSBCableType Detached
Nov 29 20:51:31  kernel[0] <Debug>: virtual IOReturn AppleUSBDeviceMux::message(UInt32, IOService *, void *) - kMessageInterfaceWasDeActivated
Nov 29 20:51:31  kernel[0] <Debug>: AppleUSBDeviceMux::reportStats: USB mux statistics:
Nov 29 20:51:31  kernel[0] <Debug>: USB mux: 195 reads / 0 errors, 493 writes / 0 errors
Nov 29 20:51:31  kernel[0] <Debug>: USB mux: 0 short packets, 0 dups
Nov 29 20:51:31  UserEventAgent[13] <Warning>: PLAggregateState Error: Leaving state pluggedin_charging even though we are not in it, doing nothing
Nov 29 20:51:31  UserEventAgent[13] <Warning>: PLAggregateState Error: Leaving state unplugged_screen_off even though we are not in it, doing nothing
Nov 29 20:51:31  ptpd[104] <Notice>: PTP interface has been deactivated.
Nov 29 20:51:41  UserEventAgent[13] <Warning>: PLAggregateState Error: Leaving state unplugged_asleep even though we are not in it, doing nothing
Nov 29 20:51:41  kernel[0] <Debug>: AppleD1881PMUPowerSource: AppleUSBCableDetect 1
Nov 29 20:51:41  kernel[0] <Debug>: AppleD1881PMUPowerSource: AppleUSBCableType USBHost
Nov 29 20:51:41  UserEventAgent[13] <Warning>: PLAggregateState Error: Leaving state unplugged_screen_off even though we are not in it, doing nothing
Nov 29 20:51:41  UserEventAgent[13] <Warning>: PLAggregateState Error: Leaving state pluggedin_screen_off even though we are not in it, doing nothing
Nov 29 20:51:41  ptpd[272] <Error>: ptpd: startResponder
Nov 29 20:51:41  kernel[0] <Debug>: launchd[272] Builtin profile: ptpd (sandbox)
Nov 29 20:51:42  ptpd[272] <Notice>: PTP interface has been activated at high speed.
Nov 29 20:51:43  lockdownd[29] <Notice>: 2ffcf000 verify_pair_record: The strings don't match. Is this really a UUID?
Nov 29 20:51:43  lockdownd[29] <Notice>: 2ffcf000 store_escrow_record: Creating escrow bag (hash=9263ecf9c114f3a5cecdf7a52df193b4ce25044f) for 30264900-17792825678462560
Nov 29 20:51:52  lockdownd[29] <Notice>: 01442000 verify_pair_record: The strings don't match. Is this really a UUID?
Nov 29 20:51:52  lockdownd[29] <Notice>: 01442000 store_escrow_record: Creating escrow bag (hash=9de39584e1758f58137d28e4bd8c2fd79b5ba0a2) for 30264900-1682617038156454252
Nov 29 20:51:53  lockdownd[29] <Notice>: 01442000 special_case_get: MGCopyAnswer(kMGQMobileEquipmentIdentifier) returned NULL
Nov 29 20:51:53  lockdownd[29] <Notice>: 01442000 copy_phonenumber: CTSettingCopyMyPhoneNumber() returned NULL
Nov 29 20:51:53  mobile_installation_proxy[275] <Error>: 0x3cbd7b88 MobileInstallationSlowLookupBreak: MobileInstallationBrowse was called without specifying an options dictionary containing kLookupReturnAttributesKey. This usage is inefficient and may cause performance problems. Break on MobileInstallationSlowLookupBreak to debug.
Nov 29 20:51:53  mobile_installation_proxy[275] <Error>: 0x3cbd7b88 MobileInstallationSlowLookupBreak: Existing options dictionary: <CFBasicHash 0x1c5119d0 [0x3bfb1100]>{type = mutable dict, count = 1,
entries =>
6 : <CFString 0x1c511a00 [0x3bfb1100]>{contents = "ApplicationType"} = <CFString 0x1c511970 [0x3bfb1100]>{contents = "User"}
}
Nov 29 20:51:53  mc_mobile_tunnel[277] <Notice>: (Note ) MC: mc_mobile_tunnel starting.
Nov 29 20:51:53  mc_mobile_tunnel[277] <Notice>: (Note ) MC: mc_mobile_tunnel shutting down.
Nov 29 20:51:53  mc_mobile_tunnel[278] <Notice>: (Note ) MC: mc_mobile_tunnel starting.
Nov 29 20:51:53  mc_mobile_tunnel[278] <Notice>: (Note ) MC: mc_mobile_tunnel shutting down.
Nov 29 20:51:55  mc_mobile_tunnel[280] <Notice>: (Note ) MC: mc_mobile_tunnel starting.
Nov 29 20:51:55  mc_mobile_tunnel[280] <Notice>: (Note ) MC: mc_mobile_tunnel shutting down.
Nov 29 20:52:01 iPhone4S mc_mobile_tunnel[282] <Notice>: (Note ) MC: mc_mobile_tunnel starting.
Nov 29 20:52:01 iPhone4S mc_mobile_tunnel[282] <Notice>: (Note ) MC: mc_mobile_tunnel shutting down. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:21:43.283

这是因为您可能会在关闭选择器后关闭视图：

```
[picker dismissModalViewControllerAnimated:YES];

[self dismissModalViewControllerAnimated:YES]; 
```

由于您使用了动画 YES，选择器尚未关闭，因此请使用新 API

```
[picker dismissViewControllerAnimated:YES completion:^{
        [self dismissModalViewControllerAnimated:YES];
    }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:36:20.640

该应用程序崩溃，因为在 iOS6`[self dismissModalViewControllerAnimated:YES];` 中已弃用，您将其替换为`[picker dismissViewControllerAnimated:YES completion:nil];`可能会解决您的问题。

# php - 从 php 执行一个简单的 SQL Server 存储过程

> ID：14559280
> 
> 赞同：1
> 
> 时间：2013-01-28T09:46:18.923
> 
> 标签：php, sql-server

首先：我对google和stackoverflow进行了研究，但对我没有帮助。

我是初学者，所以请不要仅仅通过阅读标题并投票反对我来直接责备我。Stackoverflow 有时似乎**非常**激进:(

我正在尝试从 PHP 执行一个简单的存储过程。连接到数据库工作。

此代码还通过 SQL Server Management Studio 中的查询工作：

```
Execute SP_TPL_DeleteUser
@ExternalFieldID = 22 
```

关于本手册：[PHP 存储过程和 SQL Server](http://www.sweeting.org/mark/blog/2005/02/24/php-stored-procedures-and-sql-server)和[MSSQL 绑定](http://php.net/manual/en/function.mssql-bind.php)

我构建了这行代码：

```
$id=22;
$stmt=mssql_init("SP_TPL_DeleteUser", $conn);
mssql_bind($stmt, "@ExternalFieldID", $ExternalFieldID, SQLVARCHAR, false, false, 255);
mssql_execute($stmt);
mssql_free_statement($stmt); 
```

我的输出是：

> ( ! ) 致命错误：在第 32 行调用 C:\Users\kians_000\dev\traka\index.php 中未定义的函数 mssql_init()

当然，我尝试过玩耍，但没有任何效果:(我会感谢任何提示。

编辑：

我可以用这个连​​接到数据库：

```
$serverName = "KIAN-PC";
$connectionInfo = array( "Database"=>"T32Database");
$conn = sqlsrv_connect( $serverName, $connectionInfo);

if( $conn )
{
    echo "Connection established.\n";
}
else
{
    echo "Connection could not be established.\n";
    die( print_r( sqlsrv_errors(), true));
} 
```

但是像这样的简单查询：

```
$version = mssql_query('SELECT *  FROM [T32Database].[dbo].[TUsers]');
$row = mssql_fetch_array($version);

echo $row[0]; 
```

产生这个输出：

> 致命错误：在第 42 行调用 C:\Users\kians_000\dev\traka\index.php 中的未定义函数 mssql_query()

phpinfo 给我看这个：

> sqlsrv
> 
> 启用 sqlsrv 支持
> 
> 指令本地值主值
> sqlsrv.ClientBufferMaxKBSize 10240 10240 sqlsrv.LogSeverity 0 0
> sqlsrv.LogSubsystems 0 0 sqlsrv.WarningsReturnAsErrors On On

编辑3：我尝试了所有驱动程序。这是唯一有效的。也许我的消息来源有问题。

```
<?php

//-----------------------------------------------
// Connect to SQL Server DB
//-----------------------------------------------

$serverName = "KIAN-PC";
$connectionInfo = array( "Database"=>"T32Database");
$conn = sqlsrv_connect( $serverName, $connectionInfo);

if( $conn )
{
    echo "Connection established.\n";
}
else
{
    echo "Connection could not be established.\n";
    die( print_r( sqlsrv_errors(), true));
}

//-----------------------------------------------
// Perform operations with connection.
//-----------------------------------------------

$version = mssql_query('SELECT *  FROM [T32Database].[dbo].[TUsers]');
$row = mssql_fetch_array($version);

echo $row[0];

/* Close the connection. */
sqlsrv_close( $conn);

?> 
```

我的输出是：

> 连接已建立。( ! ) 致命错误：在第 42 行调用 C:\Users\kians_000\dev\traka\index.php 中未定义的函数 mssql_query()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:58:36.373

而不是绑定尝试调用您的过程作为查询：

```
mssql_query('exec SP_TPL_DeleteUser @ExternalFieldID = ' . $ExternalFieldID, $con); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:20:31.770

我将两个不同的驱动程序混合在一起。

有 mssql 和 sqlsrv 驱动程序。检查语句是否以 mssql_ 或 sqlsrv_ 开头。我使用 MSSQL Express 2012，似乎无论如何都没有使用 mssql 驱动程序。

这现在可以工作了（作为一个你好世界）：

```
<?php

//-----------------------------------------------
// Connect to MSSQL-DB
//-----------------------------------------------

$serverName = "KIAN-PC";
$connectionInfo = array( "Database"=>"T32Database");
$conn = sqlsrv_connect( $serverName, $connectionInfo);

if( $conn === false ) {
    die( print_r( sqlsrv_errors(), true));
}

//-----------------------------------------------
// Perform operations with connection.
//-----------------------------------------------

if( $client_info = sqlsrv_client_info( $conn)) {
    foreach( $client_info as $key => $value) {
        echo $key.": ".$value."<br />";
    }
} else {
    echo "Error in retrieving client info.<br />";
}

/* Close the connection. */
sqlsrv_close( $conn);

?> 
```

无论如何，感谢大家的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:57:49.037

如果您使用的是 WAMP，请确保已启用 mssql 模块。如果是，它将在上下文菜单中的名称旁边有一个复选标记。

# uipopovercontroller - 在 iOS 中移除 uipopover 控制器的边框

> ID：14559283
> 
> 赞同：0
> 
> 时间：2013-01-28T09:46:33.450
> 
> 标签：uipopovercontroller, uipopover

我想创建一个带有白色边框的弹出框。我已经通过将子类的实例分配给 popoverBackgroundViewClass 来完成。我可以用白色（在背景上使用白色图像）来实现这一点，但不会删除弹出框的边框。白色边框仍然出现。有什么办法可以去掉吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:29:09.927

是的，有一个疯狂的解决方案）在你呈现Popover之后，你需要调用这个方法

> ```
> -(void)removeInnerShadow {
> UIWindow *window = [[[UIApplication sharedApplication] delegate] window];
> 
> for (UIView *windowSubView in window.subviews) {
>     if ([NSStringFromClass([windowSubView class]) isEqualToString:@"UIDimmingView"]) {
>         for (UIView *dimmingViewSubviews in windowSubView.subviews) {
>             for (UIView *popoverSubview in dimmingViewSubviews.subviews) {
>                 if([NSStringFromClass([popoverSubview class]) isEqualToString:@"UIView"]) {
>                     for (UIView *subviewA in popoverSubview.subviews) {
>                         if ([NSStringFromClass([subviewA class]) isEqualToString:@"UILayoutContainerView"]) {
>                             subviewA.layer.cornerRadius = 0;
>                         }
> 
>                         for (UIView *subviewB in subviewA.subviews) {
>                             if ([NSStringFromClass([subviewB class]) isEqualToString:@"UIImageView"] ) {
>                                 [subviewB removeFromSuperview];
>                             }
>                             if ([NSStringFromClass([subviewB class]) isEqualToString:@"UILayoutContainerView"] ) {
>                                 for (UIView *subviewC in subviewB.subviews) {
>                                     if ([NSStringFromClass([subviewC class]) isEqualToString:@"UIImageView"]) {
>                                         [subviewC removeFromSuperview];
>                                     }
>                                 }
>                             }
>                         }
>                     }
>                 }
>             }
>         }
>     }
> }
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T10:23:01.693

你可以试试这个库[https://github.com/ddebin/DDPopoverBackgroundView](https://github.com/ddebin/DDPopoverBackgroundView)

```
UIPopoverController *popOver = [[UIPopoverController alloc] initWithContentViewController:content];
[popOver setPopoverBackgroundViewClass:[DDPopoverBackgroundView class]]; 
```

刚刚设置

```
[popOver.popoverBackgroundViewClass setContentInset:0.0f]; 
```

而已。但请记住，这仅适用于**iOS 5+**

# android - 无法安装生成的 apk 文件

> ID：14559285
> 
> 赞同：0
> 
> 时间：2013-01-28T09:46:37.097
> 
> 标签：android, flashdevelop, haxe, nme

经过很长时间，我终于使用 FlashDevelop 编译了针对 android 的 Haxe 代码。我将包含apk文件的bin文件夹复制到我的手机，当我点击apk文件时，“你想安装这个应用程序吗？” 显示，但如果我点击安装，没有任何反应，如果我点击取消，安装页面将隐藏。

我在 Galaxy S3、android 4.1.2 上试过

任何想法？

这是我得到的构建日志：

```
Building HelloWorld
haxelib run nme build "C:\Users\KETAB\test haxe with android\application.nmml" android
haxelib run hxcpp Build.xml haxe -Dandroid -Dcpp -Dhaxe_208 -Dhaxe_209 -Dhaxe_210 -Dnme -Dnme_install_tool -Dsys -Dtrue
Buildfile: C:\Users\KETAB\test haxe with android\bin\android\bin\build.xml

-set-mode-check:

-set-debug-files:

-check-env:
 [checkenv] Android SDK Tools Revision 21.0.1
 [checkenv] Installed at D:\C_Desktop\Development\Android SDK

-setup:
     [echo] Project Name: HelloWorld
  [gettype] Project Type: Application

-set-debug-mode:

-debug-obfuscation-check:

-build-setup:
     [echo] Resolving Build Target for HelloWorld...
[gettarget] Project Target:   Android 2.2
[gettarget] API level:        8
     [echo] ----------
     [echo] Creating output directories if needed...
     [echo] ----------
     [echo] Resolving Dependencies for HelloWorld...
[dependency] Library dependencies:
[dependency] No Libraries
[dependency] 
[dependency] ------------------
[dependency] API<=15: Adding annotations.jar to the classpath.
     [echo] ----------
     [echo] Building Libraries with 'debug'...
   [subant] No sub-builds to iterate on

-pre-build:

-code-gen:
[mergemanifest] Found Deleted Target File
[mergemanifest] Merging AndroidManifest files into one.
[mergemanifest] Manifest merger disabled. Using project manifest only.
     [echo] Handling aidl files...
     [aidl] No AIDL files to compile.
     [echo] ----------
     [echo] Handling RenderScript files...
[renderscript] No RenderScript files to compile.
     [echo] ----------
     [echo] Handling Resources...
     [aapt] Found Deleted Target File
     [aapt] Generating resource IDs...
     [echo] ----------
     [echo] Handling BuildConfig class...
[buildconfig] Generating BuildConfig class.

-pre-compile:

-compile:
    [javac] Compiling 10 source files to C:\Users\KETAB\test haxe with android\bin\android\bin\bin\classes

-post-compile:

-obfuscate:

-dex:
      [dex] input: C:\Users\KETAB\test haxe with android\bin\android\bin\bin\classes
      [dex] input: D:\C_Desktop\Development\Android SDK\tools\support\annotations.jar
      [dex] Using Pre-Dexed annotations-9b179f85f2e5e5c36108e0339b2e749b.jar <- D:\C_Desktop\Development\Android SDK\tools\support\annotations.jar
      [dex] Found Deleted Target File
      [dex] Converting compiled files and external libraries into C:\Users\KETAB\test haxe with android\bin\android\bin\bin\classes.dex...
       [dx] Merged dex A (25 defs/30.3KiB) with dex B (2 defs/1.1KiB). Result is 27 defs/36.0KiB. Took 0.0s

-crunch:
   [crunch] Crunching PNG Files in source dir: C:\Users\KETAB\test haxe with android\bin\android\bin\res
   [crunch] To destination dir: C:\Users\KETAB\test haxe with android\bin\android\bin\bin\res
   [crunch] Processing image to cache: C:\Users\KETAB\test haxe with android\bin\android\bin\res\drawable-hdpi\icon.png => C:\Users\KETAB\test haxe with android\bin\android\bin\bin\res\drawable-hdpi\icon.png
   [crunch]   (processed image to cache entry C:\Users\KETAB\test haxe with android\bin\android\bin\bin\res\drawable-hdpi\icon.png: 0% size of source)
   [crunch] Processing image to cache: C:\Users\KETAB\test haxe with android\bin\android\bin\res\drawable-ldpi\icon.png => C:\Users\KETAB\test haxe with android\bin\android\bin\bin\res\drawable-ldpi\icon.png
   [crunch]   (processed image to cache entry C:\Users\KETAB\test haxe with android\bin\android\bin\bin\res\drawable-ldpi\icon.png: 0% size of source)
   [crunch] Processing image to cache: C:\Users\KETAB\test haxe with android\bin\android\bin\res\drawable-mdpi\icon.png => C:\Users\KETAB\test haxe with android\bin\android\bin\bin\res\drawable-mdpi\icon.png
   [crunch]   (processed image to cache entry C:\Users\KETAB\test haxe with android\bin\android\bin\bin\res\drawable-mdpi\icon.png: 0% size of source)
   [crunch] Processing image to cache: C:\Users\KETAB\test haxe with android\bin\android\bin\res\drawable-xhdpi\icon.png => C:\Users\KETAB\test haxe with android\bin\android\bin\bin\res\drawable-xhdpi\icon.png
   [crunch]   (processed image to cache entry C:\Users\KETAB\test haxe with android\bin\android\bin\bin\res\drawable-xhdpi\icon.png: 0% size of source)
   [crunch] Crunched 4 PNG files to update cache

-package-resources:
     [aapt] Creating full resource package...
     [aapt] Warning: AndroidManifest.xml already defines debuggable (in http://schemas.android.com/apk/res/android); using existing value in manifest.

-package:
[apkbuilder] Current build type is different than previous build: forced apkbuilder run.
[apkbuilder] Creating HelloWorld-debug-unaligned.apk and signing it with a debug key...

-post-package:

-do-debug:
 [zipalign] Running zip align on final apk...
     [echo] Debug Package: C:\Users\KETAB\test haxe with android\bin\android\bin\bin\HelloWorld-debug.apk
[propertyfile] Creating new property file: C:\Users\KETAB\test haxe with android\bin\android\bin\bin\build.prop
[propertyfile] Updating property file: C:\Users\KETAB\test haxe with android\bin\android\bin\bin\build.prop
[propertyfile] Updating property file: C:\Users\KETAB\test haxe with android\bin\android\bin\bin\build.prop
[propertyfile] Updating property file: C:\Users\KETAB\test haxe with android\bin\android\bin\bin\build.prop

-post-build:

debug:

BUILD SUCCESSFUL
Total time: 10 seconds
Build succeeded
Done(0) 
```

# javascript - 递归查找数组中的元素

> ID：14559286
> 
> 赞同：16
> 
> 时间：2013-01-28T09:46:40.597
> 
> 标签：javascript, algorithm

我有一个对象数组。数组中的每个对象都有一个 id 和一个 item 属性，该属性是一个包含其他对象的数组。我需要能够通过 id 在数组中找到一个元素。这是我到目前为止所做的一个示例，但是递归函数总是返回未定义的。

当我多次递归调用函数时，如何退出函数并返回项目？

```
 $(function () {
    var treeDataSource = [{
        id: 1,
        Name: "Test1",
        items: [{
            id: 2,
            Name: "Test2",
            items: [{
                id: 3,
                Name: "Test3"
            }]
        }]
    }];
    var getSubMenuItem = function (subMenuItems, id) {
        if (subMenuItems && subMenuItems.length > 0) {
            for (var i = 0; i < subMenuItems.length; i++) {
                var item;
                if (subMenuItems[i].Id == id) {
                    item = subMenuItems[i];
                    return item;
                };
                getSubMenuItem(subMenuItems[i].items, id);
            };
        };
    };
    var searchedItem = getSubMenuItem(treeDataSource, 3);
    alert(searchedItem.id);
}); 
```

[**jsFiddle**](http://jsfiddle.net/6VZxB/9/)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-28T09:48:08.453

你应该更换

```
 getSubMenuItem(subMenuItems[i].items, id); 
```

和

```
 var found = getSubMenuItem(subMenuItems[i].items, id);
  if (found) return found; 
```

为了在找到元素时返回它。

并且注意属性的名称，javascript区分大小写，所以你也必须替换

```
 if (subMenuItems[i].Id == id) { 
```

和

```
 if (subMenuItems[i].id == id) { 
```

[示范](http://jsfiddle.net/dystroy/MDsyr/)

* * *

最终（清理）代码：

```
var getSubMenuItem = function (subMenuItems, id) {
    if (subMenuItems) {
        for (var i = 0; i < subMenuItems.length; i++) {
            if (subMenuItems[i].id == id) {
                return subMenuItems[i];
            }
            var found = getSubMenuItem(subMenuItems[i].items, id);
            if (found) return found;
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-02T15:30:57.107

我知道它晚了，但这里有一个更通用的方法

```
Array.prototype.findRecursive = function(predicate, childrenPropertyName){
    if(!childrenPropertyName){
        throw "findRecursive requires parameter `childrenPropertyName`";
    }
    let array = [];
    array = this;
    let initialFind =  array.find(predicate);
    let elementsWithChildren  = array.filter(x=>x[childrenPropertyName]);
    if(initialFind){
        return initialFind;
    }else if(elementsWithChildren.length){
        let childElements = [];
        elementsWithChildren.forEach(x=>{
            childElements.push(...x[childrenPropertyName]);
        });
        return childElements.findRecursive(predicate, childrenPropertyName);
    }else{
        return undefined;
    }
} 
```

使用它：

```
var array = [<lets say an array of students who has their own students>];
var joe = array.findRecursive(x=>x.Name=="Joe", "students"); 
```

如果你想要过滤而不是查找

```
Array.prototype.filterRecursive = function(predicate, childProperty){
    let filterResults = [];
    let filterAndPushResults = (arrayToFilter)=>{
        let elementsWithChildren  = arrayToFilter.filter(x=>x[childProperty]);
        let filtered = arrayToFilter.filter(predicate);
        filterResults.push(...filtered);
        if(elementsWithChildren.length){
            let childElements = [];
            elementsWithChildren.forEach(x=>{
                childElements.push(...x[childProperty]);
            });
            filterAndPushResults(childElements);
        }
    };
    filterAndPushResults(this);
    return filterResults;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-28T00:59:19.667

是的，谢谢，但是如果有一个嵌套数组，例如您想自己构建一个菜单面板并且想要获得具有特定 ID 的项目，无论它在哪里，我都会遇到问题

示例： `var treeDataSource = [ { Id: 1, Name: "s", Children: [ { Id: 2, Name: "m", Children: [ { Id: 3, Name: "q", Children: [ { Id: 4, Name: "a", Children: [ { Id: 5, Name: "w", Children: [ { Id: 6, Name: "needed", Children: [], } ], } ], } ], } ], } ], }, ]` 我想返回与 ID 6 匹配的项目

# php - 如何解决在 Mage 结帐控制器中覆盖 addaction() 的问题

> ID：14559288
> 
> 赞同：0
> 
> 时间：2013-01-28T09:46:46.353
> 
> 标签：php, magento-1.7

我正在做一个 magento 定制站点我需要将某些产品详细信息添加到数据库中，所以我在 Mage 结帐控制器中使用了函数 addAction()，为了使其成为一个模块，我必须覆盖 cartController 的 Addaction()

我已经引用了 stackoverflow 的最重要的控制器问题，但没有使用它使用 Mage 结帐控制器中的编码

我用过下面的代码，

```
code\local\SmartGrowth\CompatibleWith\etc

<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <SmartGrowth_CompatibleWith>
            <version>0.1.0</version>
        </SmartGrowth_CompatibleWith>
    </modules>
<!-- Configure our module's behavior in the global scope -->
 <global>
        <blocks>
            <catalog>
                <rewrite>
                    <product_view>SmartGrowth_CompatibleWith_Block_CompatibleWith</product_view>
                </rewrite>
            </catalog>
        </blocks>

    </global>

    <frontend>
        <routers>
            <checkout>
               <use>standard</use>

                    <modules>
                        <SmartGrowth_CompatibleWith_Checkout  before="Mage_Checkout">SmartGrowth_CompatibleWith_Checkout</SmartGrowth_CompatibleWith_Checkout>
                    </modules>

            </checkout>
        </routers>

    </frontend>

</config> 
```

app\code\local\SmartGrowth\CompatibleWith\controllers\Checkout

```
 require_once 'Mage/Checkout/controllers/CartController.php';
class SmartGrowth_CompatibleWith_Checkout_CartController extends Mage_Core_Controller_Front_Action
{

    public function addAction()
    {

        $cart   = $this->_getCart();

        $params = $this->getRequest()->getParams();
        $postData = Mage::app()->getRequest()->getPost();

            try {
            if (isset($params['qty'])) {
                $filter = new Zend_Filter_LocalizedToNormalized(
                    array('locale' => Mage::app()->getLocale()->getLocaleCode())
                );
                $params['qty'] = $filter->filter($params['qty']);
            }

            $product = $this->_initProduct();
            $related = $this->getRequest()->getParam('related_product');

            /**
             * Check product availability
             */
            if (!$product) {
                $this->_goBack();
                return;
            }

            $cart->addProduct($product, $params);
            if (!empty($related)) {
                $cart->addProductsByIds(explode(',', $related));
           }

            $cart->save();
            $cart_id = $cart->getQuote()->getId();

            $product_id=Mage::helper('core')->escapeHtml($product->getId());

           $write = Mage::getSingleton('core/resource')->getConnection('core_write');
           $readresult=$write->query("SELECT item_id FROM  mage_sales_flat_quote_item WHERE quote_id='$cart_id' AND product_id='$product_id'");
           $row = $readresult->fetch() ;
            $item_id=$row['item_id'];
             $brand = Mage::getSingleton('core/session')->getMyModelbrandData();

            if($postData['check_value']==1)
            {
                $myData   = Mage::getSingleton('core/session')->getMyModelTypeData();
               $myDataver = Mage::getSingleton('core/session')->getMyModelVersionData();

            }else if($postData['check_value']==2)
            {
                 $model_type = $postData['model_type']; 
                 $myDataver  = Mage::getSingleton('core/session')->getMyModelVersionData();

            }else if($postData['check_value']==3)
            {
                $model_version =$postData['model_version'];
                $myData   = Mage::getSingleton('core/session')->getMyModelTypeData();

            }else if($postData['check_value']==4)
            {
                $model_type    =$postData['model_type']; 
                $model_version =$postData['model_version'];
            }

            /*if($postData['model_type']!=''&& $postData['model_version']!='')
            {
                $model_type    =$postData['model_type']; 
                $model_version =$postData['model_version'];
            }else
            {
            $myData = Mage::getSingleton('core/session')->getMyModelTypeData();
            $myDataver = Mage::getSingleton('core/session')->getMyModelVersionData();   
            }*/
            if($myData !=''):
              // now $write is an instance of Zend_Db_Adapter_Abstract
              $readresult=$write->query("SELECT * FROM mage_eav_attribute_option_value WHERE option_id='$myData'");
              $row = $readresult->fetch() ;
               $model_type=$row['value'];
               endif;

               if($myDataver !=''):
                $readresult1=$write->query("SELECT * FROM mage_eav_attribute_option_value WHERE option_id='$myDataver'");
                $row1 = $readresult1->fetch() ;
                $model_version=$row1['value'];
                endif;

            $write->beginTransaction();  
            $fields = array();  
            $fields['model_type']    = $model_type;  
            $fields['model_version'] = $model_version;  
            $fields['brand']         = $brand;
            $where = $write->quoteInto('item_id =?', $item_id);  
            $write->update('mage_sales_flat_quote_item', $fields, $where);  
            $write->commit();

            /**
             * @todo remove wishlist observer processAddToCart
             */
            Mage::dispatchEvent('checkout_cart_add_product_complete',
                array('product' => $product, 'request' => $this->getRequest(), 'response' => $this->getResponse())
            );

            if (!$this->_getSession()->getNoCartRedirect(true)) {
                if (!$cart->getQuote()->getHasError()){

                    $message = $this->__('%s was added to your shopping cart.', Mage::helper('core')->escapeHtml($product->getName()));
                    $this->_getSession()->addSuccess($message);
                }
                $this->_goBack();
            }
        } catch (Mage_Core_Exception $e) {
            if ($this->_getSession()->getUseNotice(true)) {
                $this->_getSession()->addNotice(Mage::helper('core')->escapeHtml($e->getMessage()));
            } else {
                $messages = array_unique(explode("\n", $e->getMessage()));
                foreach ($messages as $message) {
                    $this->_getSession()->addError(Mage::helper('core')->escapeHtml($message));
                }
            }

            $url = $this->_getSession()->getRedirectUrl(true);
            if ($url) {
                $this->getResponse()->setRedirect($url);
            } else {
                $this->_redirectReferer(Mage::helper('checkout/cart')->getCartUrl());
            }
        } catch (Exception $e) {
            $this->_getSession()->addException($e, $this->__('Cannot add the item to shopping cart.'));
            Mage::logException($e);
            $this->_goBack();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:54:21.970

而不是使用覆盖方法您可以为 magento 事件编写观察者。

代码\本地\SmartGrowth\CompatibleWith\etc

```
 <frontend>
             <events>
                <checkout_cart_add_product_complete>
                    <observers>
                       <SmartGrowth_CompatibleWith_Model_Observer>
                          <type>singleton</type>
                          <class>SmartGrowth_CompatibleWith_Model_Observer</class>
                          <method>cartproductcomplete</method>
                       </SmartGrowth_CompatibleWith_Model_Observer>
                   </observers>
                </checkout_cart_add_product_complete>
            </events>
          </frontend> 
```

并在 code\local\SmartGrowth\CompatibleWith\Model\Observer.php 中编写观察者代码

```
class SmartGrowth_CompatibleWith_Model_Observer {

public function cartproductcomplete() {

//Database operation
}

} 
```

使用事件比使用覆盖方法更好

# javascript - 使用 JavaScript this.target 打开一个 jQuery 窗口但阻止（第二个）新的空白窗口打开？

> ID：14559289
> 
> 赞同：0
> 
> 时间：2013-01-28T09:46:50.950
> 
> 标签：javascript, window

当用户单击 HTML 中的登录表单上的提交按钮时，我正在使用此 JavaScript 打开一个 jQuery 窗口。

问题是我正在使用“this.target”来打开一个 jQuery 窗口，所以它看起来像一个小对话框，上面写着“请稍候，我们正在登录。”

我遇到的问题是脚本似乎需要`this.target = 'shadowbox'`正常运行，但是同一段代码导致第二个空白窗口打开，我不希望这种情况发生。

我尝试使用阻止默认功能，这解决了我遇到的问题，但这也阻止了用户登录，所以有没有办法让这个第二个空白窗口不打开？

```
<script>
    $(document).ready(function() {
    $('#myform').submit(function() {
        Shadowbox.open({
        content:    '<iframe src="loginin.php" width="500" height="300" scrolling="no" style="overflow:hidden; border:none;"></iframe>',
        player:     "html",
        height:     300,
        width:      500
    });

        this.target = 'shadowbox' 

    });
});
</script> 
```

# grails - 在 JDBC 设置之后尝试启动 Grails 时出错

> ID：14559296
> 
> 赞同：0
> 
> 时间：2013-01-28T09:47:06.420
> 
> 标签：grails, jdbc, groovy, datasource, sql-server-express

我有可能重用我现有的问题。 [将 groovy 应用程序连接到 SQL Server Express](https://stackoverflow.com/questions/14523050/connecting-a-groovy-application-to-sql-server-express/14523114#comment20251270_14523114)

但这似乎有点不同。这个问题是在配置测试应用程序时提出的，现在我正在做真实的事情，这是真正出错的时候。

如您所见，Jar 文件位于我的 lib 和类路径中

![ggts 中显示的 jdbc](../Images/705e37c3158875e60efc5b3255776eac.png)

我的数据源配置如下（几乎是我的工作示例中的复制粘贴作业）

```
dataSource {
username = "sa"
password = "password"
url = "jdbc:sqlserver://localhost:1433;databaseName=TimeTracker"
driverClassName = "com.microsoft.sqlserver.jdbc.SQLServerDriver"
dialect = "org.hibernate.dialect.SQLServerDialect" 
```

我在 grails run-app 上收到以下错误，任何建议都会张开双臂欢迎

```
Error 2013-01-27 16:09:06,772 [localhost-startStop-1] ERROR context.GrailsContextLoader  
- Error executing bootstraps: Error creating bean with name 'transactionManagerPostProcessor': 
Initialization of bean failed; nested exception is 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 
'transactionManager': Cannot resolve reference to bean 'sessionFactory' 
while setting bean property 'sessionFactory'; nested exception is 
org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'sessionFactory': 
Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 
'lobHandler'; nested exception is org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'lobHandlerDetector': 
Invocation of init method failed; nested exception is 
org.springframework.jdbc.support.MetaDataAccessException: 
Error while extracting DatabaseMetaData; 
nested exception is org.apache.commons.dbcp.SQLNestedException: 
Cannot load JDBC driver class 'com.microsoft.sqlserver.jdbc.SQLServerDriver'
Message: Error creating bean with name 'transactionManagerPostProcessor': 
Initialization of bean failed; nested exception is 
org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'transactionManager': 
Cannot resolve reference to bean 'sessionFactory' while setting bean property 
'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' 
while setting bean property 'lobHandler'; nested exception is 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 
'lobHandlerDetector': Invocation of init method failed; nested exception is 
org.springframework.jdbc.support.MetaDataAccessException: 
Error while extracting DatabaseMetaData; nested exception is 
org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 
'com.microsoft.sqlserver.jdbc.SQLServerDriver' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:22:48.500

再做`grails --refresh-dependencies compile`一次，就好了。

如果问题仍然存在，以下是需要仔细检查的附加信息：

1.  检查路径中是否有空格。如果路径包含空格字符，Grails 就不能正常工作，尤其是在 Windows 上。
2.  检查您的 Grails 安装，并确保它适用于简单的应用程序。
3.  检查您的 ivy 缓存 (`under ~/.grails/`或`c:\<your home>\.grails`) 是否健康。如果没有，只需删除它，Grails 就会为您重新创建一个新的 ivy 缓存。
4.  如果不。1-3 忍不住，删除`~/.grails`或`c:\<your home>\.grails`清理了与 Grails 相关的所有内容，然后重新开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:37:42.633

这个问题主要在于我的 Grails 版本，特别是随着时间的推移而建立的 IVY 文件......从第一天开始，我几乎一直在消灭这个项目，你在 grails 中运行的每个项目都会创建它自己的grails 主目录中的配置文件。经过数月的滥用，我的已经变得非常腐败。

通过重命名文件夹并将我的 grails 版本再次下载到预期的目录，应用程序文件被重新创建，应用程序立即能够找到 SQL JDBC jar。

[我应该为ChanWit](https://stackoverflow.com/users/60903/chanwit)找到这个解决方案， 如果没有他，我认为我会精神崩溃。

# c# - Lucene.net 为 MultiFieldQueryParser 设置优先级

> ID：14559297
> 
> 赞同：0
> 
> 时间：2013-01-28T09:47:13.603
> 
> 标签：c#, .net, lucene

我们的项目使用*Lucene.net*进行全文搜索。在*IndexSearcher*中，我们使用*MultiFieldQueryParser*和一些字段。例如：

```
 var parser = new MultiFieldQueryParser(Version, new[] { "ArtNo", "Name", "Description" }, analyzer); 
```

我对返回的结果有疑问。Lucene 通过*Sort.RELEVANCE*对所有字段进行排序。但我需要字段*“ArtNo”的*结果必须首先是*“名称”*等，为字段设置优先级。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:24:38.300

排序选项在`IndexSearcher`而不是在`Query`nor中指定`QueryParser`。您应该能够在下面几行中找到正在初始化的搜索器。

# php - 如何在 htaccess 中更改两个 php 文件的 url

> ID：14559299
> 
> 赞同：0
> 
> 时间：2013-01-28T09:47:24.040
> 
> 标签：php, .htaccess

我不了解.htaccess。我在这里需要帮助。我的 .htaccess 中有这段代码

```
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.*)$ pro_detail.php?client=$1 [PT] 
```

变化

```
http://xyx.pk/abc/pro_detail.php?client=umair 
```

到

```
http://xyz.pk/abc/umair 
```

现在我需要改变

```
http://xyz.pk/abc/project_detail.php?project=dreamhousing 
```

到

```
http://xyz.pk/abc/dreamhousing 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:54:18.783

此 url 方案将不起作用。因为 .htaccess 规则不知道哪个文本属于项目或哪个文本属于客户端。它总是匹配第一条规则。最好使用前缀`project/`或`client/`. 这样它们就可以正确映射。所以用这个，

```
RewriteRule ^client/(.*)$ pro_detail.php?client=$1 [L,PT]
RewriteRule ^project/(.*)$ project_detail.php?project=$1 [L,PT] 
```

这将允许`http://xyz.pk/abc/project/dreamhousing`映射`http://xyz.pk/abc/project_detail.php?project=dreamhousing`

# ios - 精灵在触摸时不可见

> ID：14559302
> 
> 赞同：0
> 
> 时间：2013-01-28T09:47:46.160
> 
> 标签：ios, objective-c, cocoa-touch, cocos2d-iphone

> **可能重复：**
> [移动一个精灵时所有精灵不可见](https://stackoverflow.com/questions/14577193/all-sprite-not-visible-while-moving-one-sprite)

我的场景中有 7 个精灵。所有精灵都添加到 mutablearray。当我触摸一个精灵移动时，其他精灵在我触摸移动方法后不可见

这是我的代码

```
if( (self=[super init])) {

    sprites=[[NSMutableArray alloc]init];

    CCLayer *base=[CCSprite spriteWithFile:@"Base.png"];
    base.position=ccp(512,384);
    [self addChild:base];

    x=0;
    for(int i=1;i<=7;i++)
    {
        CCSprite *hole=[CCSprite spriteWithFile:@"ball.png"];
        hole.position=ccp(140+x,318);
        hole.tag=i;
    [self addChild:hole];
        hole.visible=YES;
        [sprites addObject:hole];
        x=x+75;
    }

    self.isTouchEnabled=YES;

}
return self;
} 
```

我的 touchesmove 方法：

```
-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
NSLog(@"count:%i",[sprites count]);
UITouch *touch=[touches anyObject];
CGPoint location=[touch locationInView:[touch view]];
location=[[CCDirector sharedDirector]convertToGL:location];
location=[self convertToNodeSpace:location];

for(CCSprite *s in sprites)
{
s.position=ccp(location.x,location.y);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:50:38.510

您似乎将所有精灵位置设置为与您的触摸位置相同。这意味着除了最上面的精灵之外，所有精灵都被掩盖了......

```
for(CCSprite *s in sprites)
{
   s.position=ccp(location.x,location.y);
} 
```

# java - 寻找数字根

> ID：14559305
> 
> 赞同：0
> 
> 时间：2013-01-28T09:47:53.113
> 
> 标签：java

我需要一些帮助来检查我的程序以找到数字根。如果用户输入 5635，则数字根为 1。要找到数字的数字根，请将数字 5 + 6 + 3 + 5 中的所有数字相加，得到结果 19。然后将结果相加 1 + 9 = 10。然后你加 1 + 0 直到你得到 1，这是你的数字根。

1.  我有正确的方法还是我对这个问题的方法完全不正确？

2.  为什么我得到 0 作为结果而不是 1 的正确答案？

```
import acm.program.*; 

public class DigitRoot extends ConsoleProgram {

    public void run() {
        println("this program attemts to find the digit root a user enters.");

        int n = readInt("please enter any positive integer: ");

        int dsum = 0;
        int sumtotal = 0;
        int threesum = 0;
        int foursum = 0;

        while (n > 0) {
            dsum += n % 10;
            n /= 10;

            if (dsum > 9) {
                sumtotal = (dsum / 10) + (dsum % 10);
            } else if (sumtotal > 9) {
                threesum = (sumtotal / 10) + (sumtotal % 10);
            } else if (threesum > 9) {
                foursum = (threesum / 10) + (threesum % 10);
            } else if (foursum < 9) {
                println("your digit root is" + foursum);
            } else {
                println("this program is borken.");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:58:31.923

一些数学告诉你，这只是除以 9 时的余数（我们用 9 替换 0 的余数）。以下适用于`n > 0`：

```
int root = n % 9;
if (root == 0) root = 9; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T10:22:21.677

试试这个

```
int n = 5635;
int total = 0;
do {
    while (n > 0) {
        total = total + (n % 10);
        n = (n / 10);
    }
    n = total;
    total = 0;
} while (n > 9);
System.out.println(n); 
```

**或者使用递归，**

```
 int n = 5635;
    int total = 0;

    do {
        total = Test.sumofdigit(n);
        n = total;
    } while (total >= 10);

    System.out.println(total);

public static int sumofdigit(int inputnumber) {
    if (inputnumber < 10)
        return inputnumber;
    return sumofdigit(inputnumber / 10) + inputnumber % 10;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T09:56:14.093

你的逻辑似乎很复杂..试试这个

```
while ( n > 0 ) {
                dsum +=  n % 10;
                n /= 10;
                if(n==0 && dsum >9){
                    n=dsum;
                    dsum =0;
                }

        }
        System.out.println(dsum); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T10:04:20.137

使用递归的示例 - 我使用字符串计算数字的总和：它不是很有效，但（稍微）更容易。随意通过`n % 10`循环使用来改进。

```
public static void main(String[] args) throws Exception {
    System.out.println(calculateRoot(5635)); //prints 1
}

public static int calculateRoot(int n) {
    int sum = sumFigures(n);
    return sum < 10 ? sum : calculateRoot(sum);
}

public static int sumFigures(int n) {
    String s = String.valueOf(n);
    int sum = 0;
    for (char c : s.toCharArray()) {
        sum += c - '0';
    }
    return sum;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T10:17:33.487

玩chars怎么样？

```
@Test
    public void testGetRoot(){
        int n=3565;
        char[] chars;
        while (n>9){
            int r=0;
            chars = String.valueOf(n).toCharArray();
            for(char c : chars)r+=(c-'0');
            n=r;
        }
        System.out.println(n);
    } 
```

这将输出 1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T10:39:49.237

这是另一个答案中嵌套循环解决方案的两个功能版本，可能更容易理解：

```
int digitRoot(int num) {
  // calculate digit root as specified:
  // get sum of digits until there is only one digit, which is the root
  while (num > 9) {
    num = sumOfDigits(num);
  }
  return num;
}

int sumOfDigits(int num) {
  int sum = 0;
  // negative numbers not supported, for them 0 is returned...
  while (num > 0) {
    sum += num % 10; // add least significant digit's value to sum
    num /= 10; // remove the least significant digit from num
  }
  return sum;
} 
```

# wpf - 如何以 WPF 形式为视频提供资源地址？

> ID：14559312
> 
> 赞同：1
> 
> 时间：2013-01-28T09:48:06.563
> 
> 标签：wpf, wpf-controls

我是 WPF 编程的初学者，有一个简单的问题！我使用此代码以 WPF 形式显示电影。

```
<MediaElement x:Name="meShowClip" Source=""  FlowDirection="LeftToRight"  Width="800" Height="600" /> 
```

当我将源地址设置为`Source="C:\Rezaii\ATM\ATM\Videos\ANIMFORCD.MPG"`它不起作用。
当它设置为`Source="~\Videos\ANIMFORCD.MPG"`或它不起作用时。如何给它一个地址
`Source="~/Videos/ANIMFORCD.MPG"`？ 这是我的解决方案路径图片：
`Source="Videos/ANIMFORCD.MPG"`

![在此处输入图像描述](../Images/ee6db77d94cd7f8349f9bb1d831da57b.png)

# android - Android ImageView 位置在设备方向更改时更改

> ID：14559313
> 
> 赞同：0
> 
> 时间：2013-01-28T09:48:06.930
> 
> 标签：android, imageview, orientation

我正在为我的应用程序开发自己的画廊（因为画廊小部件已被弃用......）

我用于此的所有 3rd 方库如下：

*   [水平寻呼机](https://github.com/ysamlan/horizontalpager/ "水平寻呼机")
*   [通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader/ "通用图像加载器")

我面临的问题是当屏幕方向改变时，我的 ImageView 不会保持在屏幕中心。它只是移动到另一个位置，可能是左上角，或者其他一些位置。

这是我的屏幕截图。

方向改变前：

![在此处输入图像描述](../Images/0c728c2acbf459db2329775cedae0f8d.png)

方向改变后：

![在此处输入图像描述](../Images/a8d4708e7f2d63dd3e6afd88c4d2599a.png)

这是我的布局 XML 的关键部分：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" android:background="#FF000000" android:keepScreenOn="true">
  <!-- I want my title bar and control bar in front of MorizontalPager -->
  <com.github.ysamlan.horizontalpager.HorizontalPager android:id="@+id/hPager" android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="horizontal">
  </com.github.ysamlan.horizontalpager.HorizontalPager>

  <LinearLayout android:id="@+id/head" android:orientation="horizontal" android:layout_width="match_parent" android:layout_height="wrap_content" android:background="@drawable/head_bar" android:gravity="center_vertical" android:layout_alignParentTop="true">
    <Button android:id="@+id/btnBack" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textSize="12sp" android:background="@drawable/btn_back" android:textColor="#FFFFFFFF" />
    <TextView android:id="@+id/txtFolder" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textSize="18sp" android:text="@string/app_name" android:gravity="center_vertical|center_horizontal" android:layout_weight="1" android:textColor="#FFFFFFFF" />
    <Button android:id="@+id/btnMenu" android:layout_width="wrap_content" android:layout_height="wrap_content" android:background="@drawable/btn_menu" />
  </LinearLayout>
  ...some more...
</RelativeLayout> 
```

我的部分活动：

```
private HorizontalPager hPager=null;
hPager=(HorizontalPager)findViewById(R.id.hPager);

...some code...

private void loadPhotos()
{
  for(int i=0; i<Constants.PHOTO_LIST.size(); i++)
  {
    ImageView img=new ImageView(this);
    LayoutParams lp=new LayoutParams(android.view.ViewGroup.LayoutParams.MATCH_PARENT, android.view.ViewGroup.LayoutParams.MATCH_PARENT, Gravity.CENTER);
    lp.setMargins(0, 0, 0, 0);
    img.setLayoutParams(lp);
    img.setPadding(0, 0, 0, 0);
    img.setMaxWidth(Constants.SCREEN_WIDTH);
    img.setMaxHeight(Constants.SCREEN_HEIGHT);
//      img.setScaleType(ScaleType.FIT_CENTER);
    img.setAdjustViewBounds(false);
    img.setClickable(true);
    img.setFocusable(true);
    img.setFocusableInTouchMode(true);
    img.setOnClickListener(new OnClickListener()
    {
      public void onClick(View v)
      {
        isControlShow=!isControlShow;
        if(isControlShow)
        {
          head.setVisibility(View.VISIBLE);
          foot.setVisibility(View.VISIBLE);
        }
        else
        {
          head.setVisibility(View.GONE);
          foot.setVisibility(View.GONE);
        }
      }
    });
    img.setOnTouchListener(new MultiPointTouchListener());
    hPager.addView(img);
    Log.i(Constants.TAG, "Preparing photo: "+i);
    imageLoaderSet(Constants.PHOTO_LIST.get(i).getFileId(), img);
  }
  hPager.setOnScreenSwitchListener(onScreenSwitchListener);
  hPager.setCurrentScreen(currentIndex, true);
}

@Override
public void onConfigurationChanged(Configuration newConfig)
{
  super.onConfigurationChanged(newConfig);
  return;
}

@Override
protected void onResume()
{
  super.onResume();
  Log.i(Constants.TAG, "on PhotoShow resume...");
  loadPhotos();
} 
```

直到现在，我仍然不知道是什么导致了这个问题，希望有人能给我一些提示。

# linux-kernel - 我找不到 linux-kernel-devel 包

> ID：14559319
> 
> 赞同：0
> 
> 时间：2013-01-28T09:48:28.267
> 
> 标签：linux-kernel

我正在使用 ubuntu 12.10，我想自定义我的内核。当我开始使用安装所需的软件包时

```
sudo apt-get install linux-kernel-devel fakeroot kernel-wedge build-essential 
```

它返回以下错误：

```
E: Unable to locate package linux-kernel-devel 
```

这个包有必要吗？如果有怎么获得

问候，

泰米尔语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:18:34.657

编译内核需要内核的源代码。您需要该`linux-source`包来获取最新的内核源包（在 Ubuntu 中可用）。

有关 tis 包的更多详细信息，请查看[包页面](http://packages.ubuntu.com/quantal-updates/linux-source)。

# javascript - onsubmit 无法使用 javascript 函数

> ID：14559327
> 
> 赞同：0
> 
> 时间：2013-01-28T09:48:40.603
> 
> 标签：javascript, html

在下面的代码中，有一个为新用户创建登录的表单。在按下继续按钮时，它应该调用“validateForm()”函数。在检查表格中填写的值以及缺少正确值的情况下，它应该发出警报消息。但是，即使出现错误也不会发出任何警报，就像我按下“继续”一样，即使表格完全是空的。

```
<html>
<head>
<title></title>
<script type="text/javascript">
function validateForm()
{
    var email=document.forms["newlogin"]["email"].value;
    var cemail=document.forms["newlogin"]["cemail"].value;
    var pass=document.forms["newlogin"]["pwd"].value;
    var cpass=document.forms["newlogin"]["cpwd"].value;
    var answ1=document.forms["newlogin"]["ans1"].value;
    var answ2=document.forms["newlogin"]["ans2].value;

    alert("I am IN");

    if(email==null || email=="" || cemail==null || cemail=="") {
        alert("Enter Email ID and confirm.");
        return false;
    }
    if(pass==null || pass=="" || cpass==null || cemail=="") {
        alert("Enter Password and confirm.");
        return false;
    }
    if(answ1==null || answ1=="" || answ2=null || answ2=="") {
        alert("Enter Answer 1 & Answer 2.");
        return false;
    }
    if(email!=cemail) {
        alert("Confirmed Email ID is not matching.");
        return false;
    }
    if(pass!=cpass) {
        alert("Confirmed Password is not matching.");
        return false;
    }
}
</script>
</head>

<body>
<h1 style="font:swis721 bt">enginenc</h1>
<form name="newlogin" method="POST" action="http://localhost/cgi-bin/createlogin" onsubmit="return validateForm()">
    <table align="center" cellpadding="10" cellspacing="0" style="margin-top:2cm;background-color:#FFD700;border-top:1px solid;border-bottom:1px solid;border-left:1px dotted;border-right:1px dotted" border=0>
        <tr>
            <td align="left" style="font:westwood let">Enter a valid Email ID:</td>
            <td align="left" style="font:westwood let"><input type="text" name="email"></td>
        </tr>
        <tr>
            <td align="left" style="font:westwood let">Confirm the Email ID:</td>
            <td align="left" style="font:westwood let"><input type="text" name="cemail"></td>
        </tr>
        <tr>
            <td align="left" style="font:westwood let">Enter password:</td>
            <td align="left" style="font:westwood let"><input type="password" name="pwd"></td>
        </tr>
        <tr>
            <td align="left" style="font:westwood let">Confirm Passowrd:</td>
            <td align="left" style="font:westwood let"><input type="password" name="cpwd"></td>
        </tr>
        <tr>
            <td align="left" style="font:westwood let">Select Question 1:</td>
            <td align="left" style="font:westwood let"><select name="ques1"><option value=1>1\. What is your mother's maiden name?</option><option value=2>2\. Which is your birth city?</option><option value=3>3\. Which is your favorite place?</option></select></td>
        </tr>
        <tr>
            <td align="left" style="font:westwood let">Answer 1:</td>
            <td align="left" style="font:westwood let"><input type="text" name="ans1"></td>
        </tr>
        <tr>
            <td align="left" style="font:westwood let">Select Question 2:</td>
                        <td align="left" style="font:westwood let"><select name="ques2"><option value=1>1\. Which is your dream car?</option><option value=2>2\. What is your nick name?</option><option value=3>3\. Who is your favorite singer?</option></select></td>
        </tr>
        <tr>
                        <td align="left" style="font:westwood let">Answer 2:</td>
                        <td align="left" style="font:westwood let"><input type="text" name="ans2"></td>
                </tr>
        <tr>
            <td align="left" style="font:westwood let"><input style="margin-left:3cm;padding:11px" type="submit" value="Continue"></td>
            <td align="left" style="font:westwood let"><input style="padding:11px" type="reset"></td>
        </tr>
    </table>
</form>
</body>
</html> 
```

**在这里，使用onsubmit()="return validateForm()"**函数提交表单。Form 没有调用函数**validateForm()**。我尝试了很多但没有发现错误。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:55:36.143

你有错别字：

`var answ2=document.forms["newlogin"]["ans2].value;`- 失踪 ”

`if(answ1==null || answ1=="" || answ2=null || answ2=="")`- 失踪==

然后它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:55:42.960

改变

```
var answ2=document.forms["newlogin"]["ans2].value; 
```

到

```
var answ2=document.forms["newlogin"]["ans2"].value; //missing quote 
```

和

```
if(answ1==null || answ1=="" || answ2=null || answ2=="") { 
```

到

```
if(answ1==null || answ1=="" || answ2==null || answ2=="") { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:58:55.357

有一些语法错误。

检查这条线。`"`该行中缺少。更改行从，

```
var answ2=document.forms["newlogin"]["ans2].value; 
```

到，

```
 var answ2=document.forms["newlogin"]["ans2"].value; 
```

而且，您必须使用`==`if 语句检查条件。但在下面一行中，您只使用了一个`=`. 换行，

```
if(answ1==null || answ1=="" || answ2=null || answ2=="") {
        alert("Enter Answer 1 & Answer 2.");
        return false;
    } 
```

到，

```
if(answ1==null || answ1=="" || answ2==null || answ2=="") {
        alert("Enter Answer 1 & Answer 2.");
        return false;
} 
```

建议：使用 firebug 或 javascript 错误控制台找出这些错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T09:59:52.123

尝试在调用函数中添加“ **this** ”：`<form name="newlogin" method="POST" action="http://localhost/cgi-bin/createlogin" onsubmit="return validateForm(this)">`

# node.js - 填充后数组顺序错误

> ID：14559329
> 
> 赞同：1
> 
> 时间：2013-01-28T09:48:51.177
> 
> 标签：node.js, mongodb, express, mongoose

我有问题，但我不能在这里粘贴整个代码，所以让我试着解释一下。我需要通过 id 找到一些文档并填充其 ObjectId 的数组元素。假设我有以下来自用户集合的文档：

```
{
  _id: 1,
  "first_name":"Nick",
  "last_name":"Parsons",
  "email":"nick@movementstrategy.com",
  "password":"foo",
  "clients":[
    "50f5e901545cf990c500000f",
    "50f5e90b545cf990c5000010",
    "50f5e90b545cf990c5000013"
  ]
} 
```

找到它后，我会像这样填充它的客户：

```
User.findById(1)
  .populate('clients')
  .exec(function (err, user) {

  }); 
```

执行上面的代码后，我有一个填充了客户端数组的“用户”变量。但是客户的订单错误，如下所示：

```
 {
          _id: "50f5e901545cf990c500000f",
          "first_name":"cl1",
       },
       {
          _id: "50f5e90b545cf990c5000013",
          "first_name":"cl3",
       },
       {
          _id: "50f5e90b545cf990c5000010",
          "first_name":"cl2",
       } 
```

应该：

```
 "50f5e901545cf990c500000f",
    "50f5e90b545cf990c5000010",
    "50f5e90b545cf990c5000013" 
```

代替：

```
 "50f5e901545cf990c500000f",
    "50f5e90b545cf990c5000013",
    "50f5e90b545cf990c5000010" 
```

有人有类似的问题还是我很幸运？

**编辑：**我添加了代码：[http](http://pastie.org/5901177) : //pastie.org/5901177 在该代码中，我创建了 3 个客户端并推送到 user.clients 数组中。之后，我在 user.clients 数组的顶部又添加了一个客户端。所以当我这样做的时候

```
 Client.where('_id').in(user.clients) 
```

我得到错误的顺序。请通过控制台查看此内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:09:10.537

在 MongoDB 中，每个修改（或添加的文档）都位于列表的底部。如果您希望以特定顺序返回您的项目，请在查询中指定：

```
User.find()
    .sort({_id: 1}) 
```

where`-1`指定相反的顺序。您可以按任何其他标准进行排序。

# python - Python 列表中的附加元素随着其原始变量的变化而变化

> ID：14559332
> 
> 赞同：3
> 
> 时间：2013-01-28T09:49:01.673
> 
> 标签：python, list, dictionary, append

所以这是我在python中尝试做的抽象代码。

```
list_ = []
dict_ = {}
for i in range(something):
    get_values_into_dict(dict_)
    list_.append(dict_)
    dict_.clear()
print list_ 
```

在这里，当我清除 dict_ 时，显然 list_ 中的所有元素都被删除了，因为它们只是映射到变量 dict_ 的地址。

什么，我想要的是复制dict_的实例，以便我可以将它存储在list_中。

有人可以解释一下将每个循环中获得的dict存储到list_中的方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:52:16.663

您正在向列表中添加对字典的引用，然后清除字典*本身*。这将删除字典的内容，因此对该字典的所有引用都将显示它现在是空的。

将其与创建两个指向同一字典的变量进行比较：

```
>>> a = {'foo': 'bar'}
>>> b = a
>>> b
{'foo': 'bar'}
>>> a.clear()
>>> b
{} 
```

字典是可变的；你改变对象本身。

在循环中创建一个新字典，而不是清除和重用一个：

```
list_ = []
for i in range(something):
    dict_ = {}
    get_values_into_dict(dict_)
    list_.append(dict_)
print list_ 
```

或者更好的是，改为`get_values_into_dict()` *返回*字典：

```
list_ = []
for i in range(something):
    dict_ = return_values_as_dict()
    list_.append(dict_)
print list_ 
```

# asp.net - 如果页面无效，如何将窗口滚动位置设置为要验证的字段，单击按钮？

> ID：14559339
> 
> 赞同：0
> 
> 时间：2013-01-28T09:49:24.487
> 
> 标签：asp.net, vb.net

我在页面上有很多字段需要用户向上/向下滚动页面，并且我对每个字段都有验证，我在按钮单击时显示错误但是有没有办法可以将滚动位置设置为那个位置需要在页面上验证的字段，以便用户知道有一些错误？

我正在使用 ASP.Net 和 VB.Net

**编辑 01：**我在 aspx 中使用“RequiredFieldValidator”进行客户端验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:52:52.673

您可以使用验证器的 SetFocusOnError = True ..

# asp.net - 是否可以在机器之间共享 asp.net mvc 会话？

> ID：14559342
> 
> 赞同：0
> 
> 时间：2013-01-28T09:49:32.270
> 
> 标签：asp.net, asp.net-mvc, session, iis

我希望我的网站能够通过在多台机器之间共享打开的会话来克服服务器崩溃。

我怎样才能做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:00:22.940

配置[进程外会话状态](http://technet.microsoft.com/en-us/library/cc754032%28v=ws.10%29.aspx)

> 进程外会话状态模式通过在运行 ASP.NET 应用程序的工作进程之外运行来保留会话状态数据。使用以下配置之一来维护进程外会话状态：
> 
> *   状态服务器，它依赖于 Windows 状态服务 Aspnet_state.exe 来存储会话状态数据
>     
>     
> *   SQL Server 数据库

# joomla - joomla 应用程序无法在服务器上运行

> ID：14559343
> 
> 赞同：0
> 
> 时间：2013-01-28T09:49:32.947
> 
> 标签：joomla

我正在 joomla 中做一个应用程序。我已将我的应用程序上传到我的服务器。但是我无法访问我的应用程序的前端模块，而管理员部分工作正常。我收到以下问题：

```
Forbidden

You don't have permission to access /fugenx1/public_html/ntutu/ntutu_demo/demo/ on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request.
Apache Server at fgtpl.com Port 80 
```

我正在使用 filezilla 上传我的文件和文件夹。虽然 2 天前它工作正常。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:26:29.970

尝试使您的文件可写权限也转到管理>>全局配置>>服务器选项卡

确保

```
Force SSL = none 
```

并尝试更改 ftp 设置中的端口

```
FTP Port =21(default) 
```

# android - 可以获得关于 Alfresco 服务器上节点的信息类型？

> ID：14559347
> 
> 赞同：1
> 
> 时间：2013-01-28T09:49:53.513
> 
> 标签：android, alfresco, getter

我正在使用Alfresco 网站上的**Alfresco Mobile SDK for Android 。**

我正在尝试从 Alfresco 服务器获取以下信息，如果可能的话，使用现有的 easymethod（可能未在提供的文档中记录）：

*   a 中的***字符数`Document`***（我尝试了`getContentStreamLength()`可以​​应用于 Document 类型的 Object 的方法）

*   a的***大小`Document`***，然后是 a 的大小`Folder`，或者如果有直接获取文件夹大小的方法。检索到的这个大小 (Go, ...) 的统一是哪一个？

*   与a***共享******的人员列表`Node`***

*   文件夹子项的***数量和文件子项的数量`Folder`***

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:09:35.653

***文档中的字符数***

这是不可能的。实际上，取决于什么类型的文档（文本、办公文档、图像、电影等），一个字符是否相关。所以不，这是不可能的。

***文档的大小***

是的。可以简单地使用`Document.getContentStreamLength()`. 它以字节为单位返回文档的大小。-1 如果没有内容。

***文件夹的大小***

不，这是不可能的。

***文件夹子项的数量，以及文件夹的文件子项***

可以知道文件夹内限制为-1级的子文件夹或文档的数量。换句话说，如果文件夹的深度大于 1，则不可能列出所有内容。我们仅限于-1级

您可以使用这些方法`DocumentFolderService.getDocuments()`或`DocumentFolderService.getFolders()`列出文件夹或文档。

***与节点共享的人员列表***

目前不支持权限管理。

希望能帮助到你。

注意：如果您想在 SDK 中提供新功能，请随时将任何要求发布到[https://issues.alfresco.com/jira](https://issues.alfresco.com/jira)

# java - 为什么 GMail 接受无需身份验证发送邮件？

> ID：14559348
> 
> 赞同：1
> 
> 时间：2013-01-28T09:49:54.877
> 
> 标签：java, gmail, jakarta-mail, sendmail

```
public class SendMail {

  private class SMTPAuthenticator extends javax.mail.Authenticator 
  {

    @Override
    public PasswordAuthentication getPasswordAuthentication() {
      return new PasswordAuthentication("userID", "pwd");
    }
  }

   public void sendMail() throws Exception {
   String strFromIds = "xyz@gmail.com";
   String strToIds = "xyz@domain.com";
   String strSubject = "Sample Mail Subject.";
   String strContent = "Sample Mail Content";
   Properties objProperties = System.getProperties();
   objProperties.put("mail.smtp.host", "<smtp host name>");
   objProperties.put("mail.smtp.port", "25");
   objProperties.put("mail.transport.protocol", "smtp");
   objProperties.put("mail.smtp.submitter", "<user id>");
   objProperties.put("mail.smtp.auth", true);
   objProperties.put("mail.debug", "true");
   Session objSMTPSession = Session.getDefaultInstance(objProperties, new  
                                                     SMTPAuthenticator());

   Message objMessage = new MimeMessage(objSMTPSession);
   objMessage.setFrom(new InternetAddress(strFromIds));
   InternetAddress[] objToAddress = new InternetAddress[1];     
   objToAddress[0] = new InternetAddress(strToIds);
   objMessage.setRecipients(Message.RecipientType.TO, objToAddress);

   objMessage.setSubject(strSubject);

   Multipart objMultiPart = new MimeMultipart();
   MimeBodyPart objBodyPart = new MimeBodyPart();

   objBodyPart.setText(strContent);
   objMultiPart.addBodyPart(objBodyPart);

   objMessage.setContent(objMultiPart);

   Date objSentDate = new Date();
   objMessage.setSentDate(objSentDate);
   Transport.send(objMessage);
    objMessage = null;
 }

 public static void main(String[] args) {
try {
    new SendMail().sendMail();
} catch (Exception ex) {
    System.out.println("Exception in main :: " + ex);
    }
 }
} 
```

通过使用上面的代码，我可以使用 GMail 邮件 id 的发件人地址（例如：xyz@gmail.com）向 gmail 用户发送邮件，而无需提供 gmail id 的身份验证详细信息，

在这里，我给出了我的 smtp（公司邮件服务器）服务器主机名，以及我公司邮件服务器的用户 ID 和密码（作为 smtp 主机给出）...

有了这些，我以 GMail 用户的身份发送邮件，

但是为什么 GMAIL 接受这种类型的邮件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T19:55:58.027

您已经发现了为什么会有垃圾邮件。:-)

您正在通过公司的邮件服务器发送邮件。您公司的邮件服务器似乎没有检查您使用的发件人地址是否对您的邮件服务器有效，因此它允许您使用您的 Gmail 地址而不是您的公司地址。不，它不会通过 Gmail 检查是否正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:57:40.617

未经任何身份验证，Gmail 无法发送邮件。

您无法使用错误的凭据进行身份验证。换句话说，如果您有密码（而 gmail 需要密码），您将无法在不发送密码的情况下登录，因此您将无法发送任何内容。

一般来说，你可以，当然。在您的具体示例代码中，您使用的是不允许匿名发送的 GMail。

从他们的参考资料：

smtp.gmail.com（使用身份验证） 使用身份验证：是 TLS/STARTTLS 端口：587 SSL 端口：465

关于您的 catch 子句的附加评论：

在我看来，您严重滥用了异常的想法。更好的方法是：

```
catch(Exception x)
 {
var s = x.Message;
if ( x.InnerException!=null )
{
    s += Environment.NewLine + x.InnerException.Message;
}

MessageBox.Show(s);
} 
```

# windows - 使用谷歌字体渲染行高

> ID：14559349
> 
> 赞同：1
> 
> 时间：2013-01-28T09:49:56.450
> 
> 标签：windows, macos, css

我有一个关于谷歌字体的行高问题，特别是 josefin sans。在 MAC 操作系统中，行高大于 Windows 操作系统，有什么解决方法吗，我需要它们相同，因为我应用了底部边框。这是一个例子的jfiddle：

[http://jsfiddle.net/qX3na/](http://jsfiddle.net/qX3na/)

```
h1 span.main {
    border-bottom: 1px solid #000;
    display: inline-block;
    font-family: 'Josefin Sans',sans-serif;
    font-size: 4em;
    line-height: 74px;
    margin: 0 auto;
    padding-bottom: 0;
    text-transform: uppercase;
}

<link href='http://fonts.googleapis.com/css?family=Josefin+Sans' rel='stylesheet' type='text/css'>
    <h1 class="clearfix">
            <span class="bottom">
                <span class="inner">    
                    <span class="left">&nbsp;</span> 
                    <span class="main">Company name</span> 
                    <span class="right">&nbsp;</span> 
                </span>
            </span>
        </h1> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:31:13.493

我有同样的问题，我发现这是一个谷歌字体 api 问题，它不能正确管理每个浏览器/操作系统的不同字体扩展。

我没有使用谷歌字体解决它，而是托管字体并使用 fontquirrel [webfont generator](http://www.fontsquirrel.com/tools/webfont-generator)嵌入它。

# php - 如何根据 Javascript/JQuery 中的 if 语句更改多个 div 的内容

> ID：14559354
> 
> 赞同：0
> 
> 时间：2013-01-28T09:50:08.440
> 
> 标签：php, mysql

如何使用 jascript 更改基于 mysql 结果的多个 div 的内容

这是我的代码：

```
<?php
$sql = "SELECT userid, username FROM tbl_user";
$myResult = mysql_query ($sql); 
$num=mysql_numrows($myResult);
$i=0;

while ($i < $num) 
{
?>
<div id="userName"><?php echo mysql_result($myResult,$i,"username"); ?></div>
<div id="onlineStatus"></div>
<script language="javascript" type="text/javascript">
    window.onload = function() {
        jqcc.cometchat.getUser('<?php echo mysql_result($myResult,$i,"userid"); ?>','checkstatus');
   }
   function checkstatus(data) {
       console.log(data); // To see output using Firebug
       if (data.s == 'available') {
           document.getElementById("onlineStatus").innerHTML="Online";
       }
       else
       {
           document.getElementById("onlineStatus").innerHTML="Offline";
       }
   }                    
</script>
<?php
    $i++;
}
?> 
```

这只会将第一个“onlineStatus”div 更改为 Online 或 Offline。如何相应地更改所有“onlineStatus” div？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:00:18.567

你应该尝试将 php mysql_result($myResult,$i,"userid") 分配给一个变量，然后检查它的类型..（它是一个数组，一个字符串，它是空的......）如果它是一个常见的字符串并且可以用 echo 打印，您应该可以在 js 代码中标记它：

```
<?php $myVar = mysql_result($myResult,$i,"userid"); ?>
jqcc.cometchat.getUser('<?php echo $myVar; ?>','checkstatus'); 
```

# apache-storm - Vertica 的风暴螺栓

> ID：14559355
> 
> 赞同：0
> 
> 时间：2013-01-28T09:50:09.027
> 
> 标签：apache-storm, vertica

我是 Storm 世界的新手，我正在寻找易于使用且性能良好的优质 Vertica Bolt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:40:43.227

Vertica 使用 JDBC，因此您应该搜索 jbdc bolt。

看起来有有用的链接：

[http://jayatiatblogs.blogspot.ru/2012/07/storm-rdbms-integration.html](http://jayatiatblogs.blogspot.ru/2012/07/storm-rdbms-integration.html) [http://frommyworkshop.blogspot.ru/2012/12/real-time-data-processing-with-storm.html](http://frommyworkshop.blogspot.ru/2012/12/real-time-data-processing-with-storm.html)

# ios - 从 NSMutableData 转换 NSString 时获取 Null？

> ID：14559356
> 
> 赞同：0
> 
> 时间：2013-01-28T09:50:11.053
> 
> 标签：ios, stream, metadata

我想这将是重复的，在元数据中我得到“Live365”流元数据，但我仍然在问我`null`是否正在使用

```
NSLog(@"SONG META :%@", [[NSString alloc] 
       initWithData:metaData encoding:NSUTF8StringEncoding]); 
```

如果我使用它，它会打印 ASCII 值

```
NSLog(@"SONG META :%@", [[NSString alloc] 
         initWithData:metaData encoding:NSASCIIStringEncoding]); 
```

我尝试了以下方案但为空：

```
 NSUTF8StringEncoding
   NSUTF16BigEndianStringEncoding
   NSUTF16LittleEndianStringEncoding
   NSUTF32BigEndianStringEncoding
   NSUTF32StringEncoding 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:24:00.817

你必须确保你的`NSMutableData`对象确实是完整的。如果您从 Web 服务下载它，您应该只在下载完成后分配初始化字符串。

如果它是一个有效的字符串，那么您的方法应该可以正常工作。

如果不是，它不是一个有效的字符串，结果是预期的。

# c++ - 为什么不能推导出嵌套在模板类中的枚举的模板参数？

> ID：14559359
> 
> 赞同：4
> 
> 时间：2013-01-28T09:50:28.290
> 
> 标签：c++, templates, c++11

我有一些这样命名的常量：

```
template<int n> class usart {
private:
    usart();
public:
    enum class tx {};
    enum class rx {};
    enum class ck {};
};

template<> class usart<1> {
public:
    enum class tx { A9  = gpio::A9,  C4 = gpio::C4 };
    enum class rx { A10 = gpio::A10, C5 = gpio::C5 };
    enum class ck { A8  = gpio::A8 };
};

// two more of these 
```

where`gpio`只是一个简单的整数枚举。

我想在另一个文件中对我的类强制执行一些类型安全：

```
class USART {
public:
    template<int N>
    USART(typename usart<N>::tx pin_tx, typename usart<N>::rx pin_rx) {
        //This signature enforces correct pins with types, doesn't it?
    }
}; 
```

但是，当我将它与

```
USART us = USART(usart<1>::tx::A9, usart<1>::rx::A10); 
```

~~我得到错误~~

 ~~> ```
> error: expected ')' before 'pin_tx' 
> ```~~ 

~~为什么这个语法是非法的？~~ **编辑**：`typename`

现在，当我尝试实例化类时，这给了我这个错误：

> ```
> error: no matching function for call to 'USART::USART(usart<1>::tx, usart<1>::rx)'
> note: template<int N> USART::USART(typename usart<N>::tx, typename usart<N>::rx)
> note:   template argument deduction/substitution failed:
> note:   couldn't deduce template parameter 'N' 
> ```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T10:09:15.363

函数实参中使用的模板形参是不可推导的，因为实参属于依赖类型。

“但那很愚蠢！” 你会说；“很明显，N 是 1！为什么编译器不能聪明地推断出来呢？”

考虑以下：

```
template<> class usart<4321> {
public:
    typedef usart<1>::tx tx;
    typedef usart<1>::rx rx;
    typedef usart<1>::ck ck;
}; 
```

N 应该是 1 还是 4321？毕竟`usart<4321>::tx`和`usart<1>::tx`都是同一类型。

`tx`如果不检查是否只有一个 usart 实例具有该确切类型作为成员，编译器就无法知道 N 应该是多少。这将需要太多的实例化或过于复杂的逻辑来证明在一般情况下没有实例化会导致这种情况。当然，为这种特殊情况实现某些东西可能很简单，但这对于所有其他情况并不是非常有用。C++ 委员会只是决定不要求编译器编写者这样做。

# css - css3 关键帧动画由于未知原因无法正常工作

> ID：14559362
> 
> 赞同：0
> 
> 时间：2013-01-28T09:50:40.113
> 
> 标签：css, animation

这很奇怪。好像我的所有语法都是正确的。仍然无法在任何浏览器上按预期工作？有什么帮助吗？

顺便说一句：我知道 -moz、-webkit、-o 前缀的东西。我也试过这些。它只是不工作

我想要一个缓慢的反弹效果。这是我完整的[jsFiddle](http://jsfiddle.net/blueclue/RaXgq/6/)

```
div {
    width:24px;
    height:24px;
    position:relative;
    left:0px;
    top:0px;
    animation:glide 5s linear 2s ease-in-out alternate;
}

@keyframes glide {
    from {left:0px; top:0px;}
    to {left:0px; top:20px;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:56:26.063

```
div {
    width:24px;
    height:24px;
    position:relative;
    display: inline-block;
    -webkit-animation:glide 5s infinite;
}
@-webkit-keyframes glide {
    from {left:0px; top:0px;}
    to {left:0px; top:120px;}
} 
```

效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:42:18.797

你的动画声明有点乱。你只需要声明一个时间，一个缓动等等......例如你要声明`5s`and then `2s`，然后是两个不同的缓动。

这是一个工作小提琴（在 Chrome/Safari 中查看）：http: [//jsfiddle.net/gleezer/RaXgq/10/](http://jsfiddle.net/gleezer/RaXgq/10/)

# symfony - Symfony2 视频流

> ID：14559371
> 
> 赞同：2
> 
> 时间：2013-01-28T09:51:12.160
> 
> 标签：symfony, streaming, video-streaming

我正在编写应用程序，`symfony2`但视频流有问题。

如果一个操作需要很长时间才能执行 - 例如`1 minute`，整个应用程序被冻结（在第二个选项卡中打开时）并且必须等待该执行结束。

问题出在哪里？

//编辑

```
 public function streamAction($fileName) {

    $user = $this->get('security.context')->getToken()->getUser();
    $request = $this->getRequest();

    $uid = $request->get('uid') != 'null' ? $user->getId() : $request->get('uid');

    $libPath = $this->_libPath('Users', 'uid' . str_pad($uid, 6, "0", STR_PAD_LEFT));

    $file = pathinfo($fileName);
    $fileName = $file['basename'];
    $fileExt = $file['extension'];
    $filePath = realpath($libPath . $fileName);

    if (in_array($fileExt, $this->formats['video'])) {
        $mime = 'video';
    }

    if (in_array($fileExt, $this->formats['audio'])) {
        $mime = 'audio';
    }

    $mime .= '/' . $fileExt;

    header("Accept-Ranges: bytes");

    if (is_file($filePath)) {
        header("Content-type: $mime");
        if (isset($_SERVER['HTTP_RANGE'])) {

            $fp = fopen($filePath, 'rb');
            $size = filesize($filePath);
            $length = $size;
            $start = 0;
            $end = $size - 1;

            if (isset($_SERVER['HTTP_RANGE'])) {
                $c_start = $start;
                $c_end = $end;
                list(, $range) = explode('=', $_SERVER['HTTP_RANGE'], 2);

                if (strpos($range, ',') !== false) {
                    header('HTTP/1.1 416 Requested Range Not Satisfiable');
                    header("Content-Range: bytes $start-$end/$size");
                    exit;
                }

                if ($range == '-') {
                    $c_start = $size - substr($range, 1);
                } else {
                    $range = explode('-', $range);
                    $c_start = $range[0];
                    $c_end = ( isset($range[1]) && is_numeric($range[1]) ) ? $range[1] : $size;
                }

                $c_end = ($c_end > $end) ? $end : $c_end;
                if ($c_start > $c_end || $c_start > $size - 1 || $c_end >= $size) {
                    header('HTTP/1.1 416 Requested Range Not Satisfiable');
                    header("Content-Range: bytes $start-$end/$size");
                    exit;
                }

                $start = $c_start;
                $end = $c_end;
                $length = $end - $start + 1;
                fseek($fp, $start);
                header('HTTP/1.1 206 Partial Content');
                header('ETag: "' . md5(microtime()) . '"');
            }

            header("Content-Range: bytes $start-$end/$size");
            header("Content-Length: $length");
            header('Connection: Close');

            $buffer = 1024 * 8;
            while (!feof($fp) && ($p = ftell($fp)) <= $end) {
                if ($p + $buffer > $end) {
                    $buffer = $end - $p + 1;
                }
                set_time_limit(0);
                echo fread($fp, $buffer);
                flush();
            }
            fclose($fp);
        } else {
            header("Content-Length: " . filesize($filePath));
            readfile($filePath);
        }
    } else {
        echo "error";
    }
    die();
} 
```

问题不在于代码，因为 symfony2 不仅会阻止流式传输，还会阻止其他长时间的操作，例如下载文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-29T12:25:36.820

如果你使用像 Symfony 这样的 OOP 框架，为什么还要使用过程方法而不是 Symfony 提供的呢？比如[`StreamedResponse`](http://api.symfony.com/master/Symfony/Component/HttpFoundation/StreamedResponse.html)班级。

我在下面为您提供了更多面向 OOP / Symfony 的内容，但是如果提供的 Range 只是`-`，您当前将范围开始重置为...文件大小？我很确定这不是你应该做的。我认为你应该仔细检查一下！

这是 streamAction() 的审查版本：

```
use SplFileInfo;
use RuntimeException;

// Symfony >= 2.1
use Symfony\Component\HttpFoundation\StreamedResponse;

public function streamAction($fileName) {
    $user = $this->getUser();
    $request = $this->getRequest();

    // Create the StreamedResponse object
    $response = new StreamedResponse();

    $uid = $request->get('uid') != 'null' ? $user->getId() : $request->get('uid');
    $libPath = $this->_libPath('Users', 'uid' . str_pad($uid, 6, "0", STR_PAD_LEFT));

    try {
        $file = new SplFileObject($libPath . $fileName);
    }
    catch (RuntimeException $runtimeException) {
        // The file cannot be opened (permissions?)
        // throw new AnyCustomFileErrorException() maybe?
    }

    // Check file existence
    if (!($file->isFile())) {
        // The file does not exists, or is not a file.
        throw $this->createNotFoundException('This file does not exists, or is not a valid file.');
    }

    // Retrieve file informations
    $fileName = $file->getBasename();
    $fileExt  = $file->getExtension();
    $filePath = $file->getRealPath();
    $fileSize = $file->getSize();

    // Guess MIME Type from file extension
    if (in_array($fileExt, $this->formats['video'])) {
        $mime = 'video';
    } elseif (in_array($fileExt, $this->formats['audio'])) {
        $mime = 'audio';
    }

    $mime .= '/' . $fileExt;

    $response->headers->set('Accept-Ranges', 'bytes');
    $response->headers->set('Content-Type', $mime);

    // Prepare File Range to read [default to the whole file content]
    $rangeMin = 0;
    $rangeMax = $fileSize - 1;
    $rangeStart = $rangeMin;
    $rangeEnd = $rangeMax;

    $httpRange = $request->server->get('HTTP_RANGE');

    // If a Range is provided, check its validity
    if ($httpRange) {
        $isRangeSatisfiable = true;

        if (preg_match('/bytes=\h*(\d+)-(\d*)[\D.*]?/i', $httpRange, $matches)) {
            $rangeStart  = intval($matches[1]);

            if (!empty($matches[2])) {
                $rangeEnd  = intval($matches[2]);
            }
        } else {
            // Requested HTTP-Range seems invalid.
            $isRangeSatisfiable = false;
        }

        if ($rangeStart <= $rangeEnd) {
            $length = $rangeEnd - $rangeStart + 1;
        } else {
            // Requested HTTP-Range seems invalid.
            $isRangeSatisfiable = false;
        }

        if ($file->fseek($rangeStart) !== 0) {
            // Could not seek the file to the requested range: it might be out-of-bound, or the file is corrupted?
            // Assume the range is not satisfiable.
            $isRangeSatisfiable = false;

            // NB : You might also wish to throw an Exception here...
            // Depending the server behaviour you want to set-up.
            // throw new AnyCustomFileErrorException();
        }

        if ($isRangeSatisfiable) {
            // Now the file is ready to be read...
            // Set additional headers and status code.
            // Symfony < 2.4
            // $response->setStatusCode(206);
            // Or using Symfony >= 2.4 constants
            $response->setStatusCode(StreamedResponse::HTTP_PARTIAL_CONTENT);

            $response->headers->set('Content-Range', sprintf('bytes %d/%d', $rangeStart - $rangeEnd, $fileSize));
            $response->headers->set('Content-Length', $length);
            $response->headers->set('Connection', 'Close');
        } else {
            $response = new Response();

            // Symfony < 2.4
            // $response->setStatusCode(416);
            // Or using Symfony >= 2.4 constants
            $response->setStatusCode(StreamedResponse::HTTP_REQUESTED_RANGE_NOT_SATISFIABLE);
            $response->headers->set('Content-Range', sprintf('bytes */%d', $fileSize));

            return $response;
        }
    } else {
        // No range has been provided: the whole file content can be sent
        $response->headers->set('Content-Length', $fileSize);
    }

    // At this step, the request headers are ready to be sent.
    $response->prepare($request);
    $response->sendHeaders();

    // Prepare the StreamCallback
    $response->setCallback(function () use ($file, $rangeEnd) {
        $buffer = 1024 * 8;

        while (!($file->eof()) && (($offset = $file->ftell()) < $rangeEnd)) {
            set_time_limit(0);

            if ($offset + $buffer > $rangeEnd) {
                $buffer = $rangeEnd + 1 - $offset;
            }

            echo $file->fread($buffer);
        }

        // Close the file handler
        $file = null;
    });

    // Then everything should be ready, we can send the Response content.
    $response->sendContent();

    // DO NOT RETURN $response !
    // It has already been sent, both headers and body.
} 
```

# c# - 将数组值分配给某个变量，填充数组

> ID：14559373
> 
> 赞同：-3
> 
> 时间：2013-01-28T09:51:14.153
> 
> 标签：c#

ArrayList`USStates`填充了如图所示的值，但是如果我想访问数组中的这些值，我该怎么做？通过引用`USStates(1)`不起作用。谁能解释这行代码？

```
USStates.Add(new USState("Alabama", "AL")); 
```

完整代码：

```
// Populate the list box using an array as DataSource.
ArrayList USStates = new ArrayList();
USStates.Add(new USState("Alabama", "AL"));
USStates.Add(new USState("Washington", "WA"));
USStates.Add(new USState("West Virginia", "WV"));
USStates.Add(new USState("Wisconsin", "WI"));
USStates.Add(new USState("Wyoming", "WY"));
ListBox1.DataSource = USStates;

// Set the long name as the property to be displayed and the short
// name as the value to be returned when a row is selected.  Here
// these are properties; if we were binding to a database table or
// query these could be column names.
ListBox1.DisplayMember = "LongName";
ListBox1.ValueMember = "ShortName";

public class USState
{
    private string myShortName;
    private string myLongName;

    public USState(string strLongName, string strShortName)
    {
        this.myShortName = strShortName;
        this.myLongName = strLongName;
    }

    public string ShortName
    {
        get
        {
            return myShortName;
        }
    }

    public string LongName
    {
        get
        {
            return myLongName;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:55:25.340

我建议您`Generic List`用于性能需要`(Boxing unboxing, ...)`

```
List<USState> listToBind = new List<USState> { new USState("Alabama", "AL"), new USState("Washington", "WA") };
ListBox1.DataSource = listToBind ;
ListBox1.DisplayMember = "ShortName";
ListBox1.ValueMember = "LongName"; 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/6sh2ey19.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/6sh2ey19.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:10:04.713

这个问题有点令人困惑/不完整，如果您的目的只是创建一个查找表并将其绑定到下拉列表，那么您可以这样做。

```
private static Hashtable LookUpIdTable = null; 
```

然后在您的主要功能中，或者如果您想创建一个单独的类：

```
 LookUpIdTable.Add("AL", "Alabama");
            LookUpIdTable.Add("AK", "Alaska");
            LookUpIdTable.Add("AS", "American Samoa");
            LookUpIdTable.Add("AZ", "Arizona");
            LookUpIdTable.Add("AR", "Arkansas");
            LookUpIdTable.Add("CA", "California");
            LookUpIdTable.Add("CO", "Colorado");
            LookUpIdTable.Add("CT", "Connecticut"); 
```

当你想绑定时：

```
 DropDown.DataSource = LookUpIdTable
        DropDown.DataValueField = "Key";
        DropDown.DataTextField = "Value";
        DropDown.DataBind(); 
```

# ios - 如何获取 CPTFill 对象的 CPTColor

> ID：14559374
> 
> 赞同：0
> 
> 时间：2013-01-28T09:51:26.713
> 
> 标签：ios, objective-c, core-plot

如何获取 CPTFill 对象的 CPTColor？

提前致谢/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T00:25:48.377

你不能。`CPTFill`是一个类簇。实例可以是颜色、渐变或图像，每一个都由一个私有子类表示。填充不会公开 API 来确定其内容。

# android - 改变资源

> ID：14559381
> 
> 赞同：0
> 
> 时间：2013-01-28T09:52:07.930
> 
> 标签：android, resources

繁忙的应用程序切换到运行时资源文件 string.xml 是否有可能。对我来说，保持多语种很重要。

应用名称将不再是 STRING，但应修改为 STRING2

`[resources]
   [string name="app_name"]STRING[/string]
 [/resources]` 

谢谢鲍勃

# c++ - solvePnP 返回错误的结果

> ID：14559382
> 
> 赞同：6
> 
> 时间：2013-01-28T09:52:09.677
> 
> 标签：c++, image-processing, opencv, computer-vision, pose-estimation

我正在使用函数 solvePnP 通过视觉标记估计我的机器人的姿势。有时我会在两个连续的帧中得到错误的结果。在文件 question.cpp 中，您可以看到这些结果之一。

点集对应于两个连续帧中的相同标记。它们之间的差异很小，solvePnP的结果也很不同，但只是在旋转向量上。翻译向量没问题。

这大约每 30 帧发生一次。我用相同的数据测试了 CV_ITERATIVE 和 CV_P3P 方法，它们返回相同的结果。

这是该问题的一个示例：

```
#include <opencv2/calib3d/calib3d.hpp>
#include <opencv2/core/core.hpp>
#include <iostream>
using namespace std;
using namespace cv;
int main(){
vector<Point2f> points1, points2;

//First point's set
points1.push_back(Point2f(384.3331f,  162.23618f));
points1.push_back(Point2f(385.27521f, 135.21503f));
points1.push_back(Point2f(409.36746f, 139.30315f));
points1.push_back(Point2f(407.43854f, 165.64435f));

//Second point's set
points2.push_back(Point2f(427.64938f, 158.77661f));
points2.push_back(Point2f(428.79471f, 131.60953f));
points2.push_back(Point2f(454.04532f, 134.97353f));
points2.push_back(Point2f(452.23096f, 162.13156f));

//Real object point's set
vector<Point3f> object;
object.push_back(Point3f(-88.0f,88.0f,0));
object.push_back(Point3f(-88.0f,-88.0f,0));
object.push_back(Point3f(88.0f,-88.0f,0));
object.push_back(Point3f(88.0f,88.0f,0));

//Camera matrix
Mat cam_matrix = Mat(3,3,CV_32FC1,Scalar::all(0));
cam_matrix.at<float>(0,0) = 519.0f;
cam_matrix.at<float>(0,2) = 320.0f;
cam_matrix.at<float>(1,1) = 522.0f;
cam_matrix.at<float>(1,2) = 240.0f;
cam_matrix.at<float>(2,2) = 1.0f;

//PnP
Mat rvec1i,rvec2i,tvec1i,tvec2i;
Mat rvec1p,rvec2p,tvec1p,tvec2p;
solvePnP(Mat(object),Mat(points1),cam_matrix,Mat(),rvec1i,tvec1i,false,CV_ITERATIVE);
solvePnP(Mat(object),Mat(points2),cam_matrix,Mat(),rvec2i,tvec2i,false,CV_ITERATIVE);
solvePnP(Mat(object),Mat(points1),cam_matrix,Mat(),rvec1p,tvec1p,false,CV_P3P);
solvePnP(Mat(object),Mat(points2),cam_matrix,Mat(),rvec2p,tvec2p,false,CV_P3P);

//Print result
cout<<"Iterative: "<<endl;
cout<<" rvec1 "<<endl<<" "<<rvec1i<<endl<<endl;
cout<<" rvec2 "<<endl<<" "<<rvec2i<<endl<<endl;
cout<<" tvec1 "<<endl<<" "<<tvec1i<<endl<<endl;
cout<<" tvec1 "<<endl<<" "<<tvec2i<<endl<<endl;

cout<<"P3P: "<<endl;
cout<<" rvec1 "<<endl<<" "<<rvec1p<<endl<<endl;
cout<<" rvec2 "<<endl<<" "<<rvec2p<<endl<<endl;
cout<<" tvec1 "<<endl<<" "<<tvec1p<<endl<<endl;
cout<<" tvec1 "<<endl<<" "<<tvec2p<<endl<<endl;

return 0;

} 
```

这是结果：

```
Iterative: 
rvec1 
[-0.04097605099283788; -0.3679435501353919; 0.07086072250132323]
rvec2 
[0.4135950235376482; 0.6834759799439329; 0.1049879790744613]
tvec1 
[502.4723979671957; -582.21069174737; 3399.430492848247]
tvec2 
[774.9623278021523; -594.8332356366083; 3338.42153723169]
P3P: 
rvec1 
[-0.08738607323881876; -0.363959462471951; 0.06617591006606272]
 rvec2 
[0.4239629869157338; 0.7210136877984544; 0.1133539043199323]
tvec1 
[497.3941378807597; -574.3015171812298; 3354.522829883918]
tvec1 
[760.2641421675842; -582.2718972605966; 3275.390313948845] 
```

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-03T20:11:20.080

我假设您的输入图像是 640x480 并将两个观察到的标记绘制到白色画布上。第一帧的标记为红色，第二帧的标记为蓝色。

![观察到的标记](../Images/7e9ffbd3854f71d42cd0ed58f43a91db.png)

正方形在两张图像中大致面向相机，并且在屏幕上非常小。这意味着很难估计位置和旋转。尤其是到物体的距离以及围绕 x 和 y 轴的旋转。围绕这些轴的旋转的适度变化几乎不会引起注意，因为这些点大多会朝向或远离相机移动。标记检测的错误将对结果产生很大影响。

[估计的标记位置和方向的不确定性可以使用从projectPoints](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=projectpoints#projectpoints)方法获得的雅可比来估计。

```
// Compute covariance matrix of rotation and translation
Mat J;
vector<Point2f> p;
projectPoints(object, rvec1i, tvec1i, cam_matrix, Mat(), p, J);
Mat Sigma = Mat(J.t() * J, Rect(0,0,6,6)).inv();

// Compute standard deviation
Mat std_dev;
sqrt(Sigma.diag(), std_dev);
cout << "rvec1, tvec1 standard deviation:" << endl << std_dev << endl; 
```

> rvec1, tvec1 标准差：
> [0.0952506404906549；0.09211686006979068; 0.02923763901152477; 18.61834775099151；21.61443561870643；124.9111908058696]

此处获得的标准偏差应根据观察点的不确定性（以像素为单位）进行缩放。可以看到围绕 x 和 y 的旋转不确定性大于围绕 z 的旋转不确定性，并且到相机的距离具有很大的不确定性。

如果将结果复制到 matlab，则可以像这样绘制协方差矩阵：

```
imagesc(sqrt(abs(Sigma))) 
```

![协方差可视化](../Images/e9b884a2cbc7caa309c6fd8510fd201d.png)

该图像告诉我们，平移 z 方向的不确定性最大，并且该方向的估计与估计的 x 和 y 位置（在 3D 空间中）密切相关。因为旋转和平移使用不同的单位，所以很难将旋转误差与位置误差联系起来。

如果您想要更稳定的标记估计，我建议使用[扩展卡尔曼滤波器](http://en.wikipedia.org/wiki/Extended_Kalman_filter)或类似的东西过滤数据。这将使您受益于知道图像是序列的一部分并跟踪不确定性，这样您就不会被信息很少的观察所愚弄。OpenCV 有一些[卡尔曼滤波](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html?highlight=kalman#kalmanfilter)功能可能会派上用场。

也许你很久以前就解决了你的问题，但我希望这篇文章能给别人带来一些见解！

# jquery - 使用 jQuery 获取边距和高度的总和

> ID：14559389
> 
> 赞同：20
> 
> 时间：2013-01-28T09:52:17.963
> 
> 标签：jquery, css, height, sum, margin

我想得到`margin-top`大小和`height`另一层的总和。

的边距顶部`.nav1`为 30px，高度`.main`为 28px

我使用这段代码：

```
$('.nav').css('margin-top').replace('px', '') + $('.main').outerHeight() 
```

但我总和的结果是`3028`

如何计算这两个数字的总和？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-11-11T18:06:49.027

`outerHeight(true)`如果您想计算`margin-top`和`margin-bottom`属性，您可以使用在没有数学的情况下将边距添加到高度：http: [//api.jquery.com/outerheight/#outerHeight-includeMargin](http://api.jquery.com/outerheight/#outerHeight-includeMargin)

```
var heightWithMargin = $('.main').outerHeight(true); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-28T09:53:42.453

这是因为您要附加两个字符串，而不是添加两个整数。试试这个：

```
var total = parseInt($('.nav').css('margin-top'), 10) + $('.main').outerHeight(); 
```

# php - 告诉我如何从两个表中访问数据

> ID：14559390
> 
> 赞同：0
> 
> 时间：2013-01-28T09:52:21.720
> 
> 标签：php, database

我有两个 erd 向我展示了从表中访问数据的最佳方法，即

表一是类别，表二是文章

```
TWO Tables ERD

 Table Category 

(CategoryId
CategoryName
CategoryDescription );

Table Articles 

(ArticlesId
 ArticlesTitle
 ArticlesBody
 ArticlesCreatedby
 CategoryId (`forigen Key`FK)); 
```

我没有发布图片的声誉，但这里是图解 ERD 图片的链接。

[http://i341.photobucket.com/albums/o377/pakistanihaider/relation1_zps06c6e6ec.png](http://i341.photobucket.com/albums/o377/pakistanihaider/relation1_zps06c6e6ec.png)

**或者**

表一是Category，表二是Articles，第三个是Category & Articles

```
Three Tables ERD

Table Category

(CategoryId
CategoryName
CategoryDescription );

Table  Articles

(ArticlesId
 ArticlesTitle
 ArticlesBody
 ArticlesCreatedby
    );

Table Category & Articles

(Category_id
Articles_id); 
```

第二个代码的图解 ERD：

[http://i341.photobucket.com/albums/o377/pakistanihaider/relation_zpsea5d55a9.png](http://i341.photobucket.com/albums/o377/pakistanihaider/relation_zpsea5d55a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:55:35.863

这取决于您的数据。如果每篇文章只需要一个类别，那么选项一将起作用。但是，如果您将来可能需要每篇文章不止一个类别，那么您的第二个选项会更好。您缺少的一件事是第二个选项，Category & Articles 表应该将​​两个字段都作为外键。

上面第二个选项中的第三个表是一个连接表。它的明确目的是提供其他两个表之间的链接。这允许多对多关系（一个类别可以有很多文章，一篇文章可以有很多类别），而第一个选项只提供一对多关系（每篇文章只能有一个类别）。

文章表中的两个字段都应该是外键的原因是因为它们总是与其他表中的记录相关。通过将它们设置为外键，您可以保护您的数据输入（如果您尝试输入并且 ID 不正确，则会出错），并且您正在帮助数据库优化您加入数据的任何查询。

# c# - 编译器错误 CS0029：“if (int & int)”

> ID：14559391
> 
> 赞同：3
> 
> 时间：2013-01-28T09:52:22.670
> 
> 标签：c#, boolean, int, implicit-conversion

适配C++中的旧代码编译器不传递类型表达式“if(a&b)”

```
int a = 32;
int b = 1;
if (a & b) {} <--- Compiler Error 
```

从 Int 到 Bool 的隐式转换。我可以更改为`if ((a & b)! = 0) {}` 但在许多地方阅读和发现更糟糕。

有没有办法解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T09:53:27.697

C#中没有隐式转换。并且`if`只接受布尔值。

你所要做的 ：`if ((a & b) != 0) {}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T09:54:44.617

在 C# 中，`int`非零值不会`true`自动评估为。An`int`是 an`int`而不是 a `bool`，因此`if (i)`仅当`i`是 a时才有效`bool`。

# websocket - 如何区分websocket的onmessage

> ID：14559393
> 
> 赞同：0
> 
> 时间：2013-01-28T09:52:28.507
> 
> 标签：websocket

现在我正在开发使用 WEB SOCKET 将数据从服务器发送到客户端的应用程序。但是我应该如何区分 onMessage() 事件以接受来自 Server.Anyway 的不同数据来做到这一点？

# plot - 关于 splot 中颜色的问题

> ID：14559395
> 
> 赞同：2
> 
> 时间：2013-01-28T09:52:40.983
> 
> 标签：plot, gnuplot

我`gnuplot`在 Win XP 32 位上有版本 4.6 补丁级别 0。当我`splot`为了创建三维图而使用时，我遇到了一个问题，我想知道这是否是新版本的错误。让我用一个简单的场景来解释这种情况。

```
set hidden
set isosamples 50
splot sin(x+y) 
```

该功能正在运行。但是，它对曲面的所有部分（底部和顶部）使用默认的红色。在以前的版本中`gnuplot`，程序使用绿色作为底部，红色作为顶部。为什么这在最新版本中不起作用？这是一个错误吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:24:54.770

这是 4.6 补丁级别 0 版本中的一个错误。根据4.6 补丁级别 1的[发行说明，它已被修复。](http://www.gnuplot.info/announce.4.6.1)

> *   在不使用调色板/RGB 颜色时修复 hidden3d 中的顶部/底部颜色区别

# java - 验证数据

> ID：14559396
> 
> 赞同：1
> 
> 时间：2013-01-28T09:52:44.747
> 
> 标签：java, dependencies, validation

我有两个验证器类。假设：汽车验证器和车轮验证器，第二个包含在第一个中。

```
CarBodyValidator.validate(){
    WheelValidator.validate();
} 
```

我在 CarBodyValidator、fe EngineValidator 等中有更多验证器。 validate() 应该只返回 true 或 false，并且有一次我想打印尽可能多的错误（如果验证对某个类返回 false，我想验证其他类如果它们不相互依赖）。现在，假设 Wheel 验证器返回了我在 CarBody 验证器中需要的有用信息。Fe 如果车轮直径太大，那么我需要汽车验证器中的信息来验证其他东西。我如何传递这些信息。我可以在 Wheel 验证器中创建一个存储参数的字段，但可以像这样访问它：

```
carBodyValidator.validate(){
    wheelValidator.validate();
    if (WheelValidator.getSmomething() == somethingElse){
      ...
    }

} 
```

似乎是错误的（我的意思是验证器应该只验证而不做任何其他事情）。这是正确的方法还是我应该做不同的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:00:24.690

有多种方法可以做到这一点。一如你所说。让 validate() 返回一个布尔值并保留一组在验证期间发生的错误。如果需要，您可以稍后询问这些错误。

一个更优雅的解决方案可能是让 validate() 方法返回一个名为 ValidationResults 的特定类的实例。此类可以包含验证状态和错误集。

第三种选择可能是在 validate() 中抛出异常。尽管有人反对这种方法，因为不建议使用异常来决定应用程序的执行流程，但我发现它在某些情况下很有用。

希望能帮助到你，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:01:23.917

这将是[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)的一个很好的应用。

这意味着您有一个传递给每个验证器的对象（访问者）。验证器向访问者报告他们的错误消息和/或将其传递给执行相同操作的其他子验证器。

访问者存储传递给它的所有错误消息。之后，您可以阅读访问者收集的错误消息，并以您认为合适的任何方式处理它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T10:01:53.090

如果对象无效，您可以抛出异常，而不是返回指示验证是否通过的布尔值：

```
public void validateCar(Car car) throws ValidationException {
    if (car.getEngine() == null) throw new ValidationException("Engine is null", "engine");
} 
```

ValidationException 包含错误字段，然后可以在另一个验证器中重用。

但对我来说，当您知道对象无效时调用另一个验证器似乎有点错误。也许您应该合并这两个验证器并使其返回无效字段列表？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T10:06:05.453

在这种情况下，我经常依赖观察者模式。请注意，这都是伪代码。

**创建一个 ValidatorObserver 接口。**

```
public interface ValidatorObserver{
   public void notify(int errorKey);
} 
```

**让 CarBodyValidator 实现这个接口。**

```
public class CarBodyValidator implements ValidatorObserver{

    public void notify(int errorKey){
       switch(errorKey){
         //Evaluate cases and do something.
       }
    }
} 
```

**在 WheelValidator 上创建注册方法并设置通知**

```
public class WheelValidator{
    private List<ValdiatorObserver> observers = new ArrayList<ValidatorObserver>();

    public void addObserver(ValidatorObserver observer){
       observers.add(observer);
    }

    public void validate(){
       //if validation fails
       for(ValidationObserver observer: observers){
          observers.notify(1); //1 is an error code
       }
    }
} 
```

**您需要在代码中的某处注册观察者**

```
CarBodyValiator cbValidator = new CarBodyValidator();
WheelValidator wheelValidator = new WheelValidator();
wheelValidator.addObserver(cbValidator); 
```

# vmware-workstation - 每次我运行 Vmware 时，我都会收到此错误：开机时出错：VMware 授权服务未运行

> ID：14559398
> 
> 赞同：21
> 
> 时间：2013-01-28T09:52:49.380
> 
> 标签：vmware-workstation

开机时出错：VMware Authorization Service 未运行。

为了解决这个错误，我去：

“开始/控制面板/管理工具/服务，单击列表中的VMware授权服务并单击左侧的开始链接。”

但每次我想使用虚拟机时，我都必须这样做。

有人知道永久解决方案吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-28T10:06:54.963

去`Start > Control Panel > Administrative Tools > Services`双击`VMware Authorization Service`一个窗口就会打开。

它看起来像这样

![在此处输入图像描述](../Images/3539ce711381a513cccdd817f2e0901a.png)

在该窗口中，从 附近的下拉菜单中选择自动`Startup Type:`。然后单击`OK`按钮保存更改。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-28T16:58:40.653

我通过以管理员身份启动 VMware Workstation 解决了这个问题。

# osgi - 如何通过它在 OSGI 中的名称获取类的类加载器？

> ID：14559399
> 
> 赞同：0
> 
> 时间：2013-01-28T09:52:51.000
> 
> 标签：osgi, classloader

如何通过它在 OSGI 中的名称获取给定类的类加载器？该类在另一个包中声明，并且可能不会被导出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:48:04.707

这基本上是不可能的，因为一个类的名称不足以唯一标识它。多个模块可能包含同名的类；这是任何提供模块隔离的模块系统的必然属性。

事实上，在“普通”Java 中这在理论上也是不可能的，因为类的标识由它的完全限定名称和它的 ClassLoader 组成。因此，您要问的是如何仅在给定另一半的情况下获得类的一半身份。

如果您确实知道哪个包/模块包含该类，那么您可以从该包中加载该类，`Bundle.loadClass("Foo")`并从您可以调用的 Class 对象中加载该类`getClassLoader()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:30:29.090

为什么要从另一个包中加载类？更简洁的方法是在包含它的包中实例化类并将其作为服务发布。或者，如果您需要多个实例，您可以将工厂注册为服务。

# r - 如何在 R 中合并两个数据集，其中一个数据集具有几何变量

> ID：14559401
> 
> 赞同：0
> 
> 时间：2013-01-28T09:52:50.980
> 
> 标签：r, merge

我想合并两个数据集，其中一个具有几何（多边形）数据的列。 `Geom`数据如下所示：

```
0xE8200000010431123000556D272278CC2640331EB53791A14740ABC99B2F71............ 
```

不幸的是，数据被 R 定义为数字无穷大，因此合并不起作用。好吧，我四处寻找解决方案，但这个问题显然非常罕见。我会很感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:50:25.517

注意你没有提到你的数据是什么类（`class(data$Geom)`），我想一个想法是将此列转换为字符，然后计算 crc32 哈希（使用`digest()`包中的函数`digest`）：

```
data$crc <- sapply(as.character(data$Geom), digest, algo="crc32") 
```

然后您可以尝试按此列合并。

# sql - 从两个表中获取单列

> ID：14559403
> 
> 赞同：1
> 
> 时间：2013-01-28T09:52:55.480
> 
> 标签：sql

我是 SQL 的新手，我正在编写这个查询

```
SELECT
    SalesreturnDetails.[Price]
FROM
    SalesreturnDetails,
    SalesReturn
WHERE
    SalesReturn.Session='12-13'; 
```

但在 SalesReturn 表中有两条记录，SalesreturnDetails 表有 3 条记录，但输出是 6 行，但我希望输出应该是 3 行。

表是：SalesReturn

```
Bill_Number    Session
 2              12-13
 2              12-13 
```

销售退货详情

```
Bill_Number    Price
  2             700
  2             900
  2             300 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:55:24.013

您应该尝试在 Bill_Number 上进行外部连接：[http://en.wikipedia.org/wiki/Join_(SQL)](http://en.wikipedia.org/wiki/Join_(SQL))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:00:00.127

```
SELECT  a.Price
FROM    SalesReturnDetails a
        INNER JOIN 
        (
            SELECT  DISTINCT Bill_number
            FROM    SalesReturn
            WHERE   Session='12-13'
        ) b ON a.Bill_number = b.Bill_number 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/14b3a/2)

# android - 通过意图启动 Mx Player

> ID：14559406
> 
> 赞同：2
> 
> 时间：2013-01-28T09:53:05.957
> 
> 标签：android, android-intent

这是我调用 mxplayer 的代码，但它不起作用，为什么？

```
Intent myIntent ;
PackageManager manager = getPackageManager();
myIntent = manager.getLaunchIntentForPackage("com.mxtech.videoplayer.ad");
startActivity(myIntent); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:30:35.707

MX Player 的开发者在这里记录了它的包命名空间：[https ://sites.google.com/site/mxvpen/api](https://sites.google.com/site/mxvpen/api)

所以如果你安装了专业版，你需要使用另一个名字。

```
[Package]
com.mxtech.videoplayer.pro  - Pro Edition
com.mxtech.videoplayer.ad - Free Edition. 
```

此外，您还可以捕捉到系统上未安装 MX Player 的例外情况：

```
Intent myIntent;
    PackageManager pm = getPackageManager();
    try {
        myIntent = pm.getLaunchIntentForPackage(YourPackageName);
        if (null != myIntent)
            this.startActivity(myIntent);
    } catch (ActivityNotFoundException e) {

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:00:43.723

官方的解释是说，如果出现报错信息，你的程序是什么？返回“良好”意图以在包中启动前门活动，例如用于在浏览包时实现“打开”按钮。

# maven - Maven：将 JAR 的类包含到另一个 JAR 中

> ID：14559408
> 
> 赞同：2
> 
> 时间：2013-01-28T09:53:14.747
> 
> 标签：maven

我想用另一个 JAR 的某些类（但不是所有类）生成 JAR 文件。我知道我可以使用`maven-dependency-plugin:copy-dependencies`将 JAR 包含到另一个 JAR 中，但是我怎样才能只包含一些类而不包含整个 JAR？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:25:22.527

您可以在 maven-dependency-plugin 的配置中包含/排除。

请参阅[解包特定工件](http://maven.apache.org/plugins/maven-dependency-plugin/examples/unpacking-artifacts.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:59:24.663

另一个解决方案是[Maven Shade 插件](http://maven.apache.org/plugins/maven-shade-plugin/)，它允许包含依赖项，但也允许转换它们的包名称（以及对它们的所有引用），以便如果捆绑的 JAR 也在类路径上，则生成的 überjar 不受类路径重复项的影响。

一个例子是[这个 pom.xml](https://github.com/cloudbees/cloudbees-api-client/blob/master/cloudbees-api-client-nodeps/pom.xml)，其中使用的 XStream 类被重新定位到不同的包。这允许在使用不同且不兼容的 XStream 版本的应用程序中使用 jar 文件（在这种情况下，工件用于 Jenkins 插件中）

# php - PHP 加载不同的 MySQL 服务器版本

> ID：14559413
> 
> 赞同：0
> 
> 时间：2013-01-28T09:53:28.723
> 
> 标签：php, mysql, apache, ubuntu, phpinfo

我已经在 Ubuntu 12.10 32bit 上安装了 MySQL 5.6.9 dev，而不是使用 apt-get 来安装稳定版本 5.5.29。

我的 PHP5、Apache 和 MySQL 都在工作，但是，我没有看到使用 phpinfo 的 MySQL 部分。

我以为我没有在 php.ini 中启用 MySQL。我“apt-get install php5-mysql”，然后我可以在 phpinfo 下看到 MySQL 部分，但它显示客户端 api 库版本 5.5.29，这是不正确的，因为我没有安装 MySQL 5.5.29。

我认为这与php5-mysql有关。我如何配置 PHP 以使用 MySQL 5.6.9，这是我在我的机器上安装的唯一版本的 MySQL？

# extjs - sencha 架构师将配置存储为对象

> ID：14559414
> 
> 赞同：2
> 
> 时间：2013-01-28T09:53:32.540
> 
> 标签：extjs, extjs4, sencha-touch, extjs4.1, sencha-architect

我正在尝试这样做：

```
...
store: ZAdmin.store.TreeFactory.create('ZAdmin.model.Category', 'Application\\Entity\\Category')
... 
```

但是得到：

```
...    
store: 'ZAdmin.store.TreeFactory.create(\'ZAdmin.model.Category\', \'Application\\Entity\\Category\')'
... 
```

无法将存储从字符串更改为对象类型。

如何解决？

PS 我要在 GUI 中编辑配置属性。Sencha Architect 假设 store 是一个字符串，所以自动转义任何值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:33:04.630

store config 采用 store 对象或其名称，因此如果您想传递一个对象，您可以就地创建它或在初始化方法中创建它，您可以这样做：

```
var myStore = ZAdmin.store.TreeFactory.create('ZAdmin.model.Category', 'Application\\Entity\\Category'); // Any kind of store creation
this.setStore(myStore);
myStore.load();   // Optional 
```

延迟存储关联/加载使您能够快速显示视图而无需等待数据加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:51:37.963

如果您热衷于在定义中保留初始化，那么最好为您的对象创建一个覆盖类。即在代码编辑窗口的顶部按下“创建覆盖”按钮，然后在配置下输入您自己的初始化代码。例如，如果您想以这种方式设置数据视图对象的存储，则使用如下代码为数据视图创建覆盖：

```
Ext.define('MyApp.view.MyDataView', {
extend: 'Ext.dataview.DataView',

config: {
    store: ZAdmin.store.TreeFactory.create('ZAdmin.model.Category', 'Application\\Entity\\Category')
}
}); 
```

为了能够以这种方式覆盖您的控件，您需要先将其提升为类（右键单击控件 -> 提升为类 -> 为新创建的类创建覆盖）。

# java - 用于延迟的 NTP

> ID：14559416
> 
> 赞同：0
> 
> 时间：2013-01-28T09:53:33.373
> 
> 标签：java

我想知道 NTP 是否可用于测量分布式计算环境中发布者和订阅者之间的延迟。在所有节点上都配置了 NTP。我能够单独收集统计数据。如何使用 NTP 准确测量发布者和 s 之间的延迟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:57:59.420

You can use NTP to synchronize the machines in a network. Then you use the local time i.e. System.currentTimeMillis() to get the time locally.

One way to make the timing easier is to send the time in the message. This way you can compare the time sent with the time received to get the latency.

Note: this is only accurate to milli-seconds. For greater accuracy you need special infrastructure.

# javascript - $冲突禁用站点的其他元素

> ID：14559421
> 
> 赞同：1
> 
> 时间：2013-01-28T09:53:50.330
> 
> 标签：javascript

嗨，我正在创建一个网络应用程序，但遇到了一些编码问题......网络应用程序有一个侧面菜单，就像 facebook 一样。此外，它还有一个相当先进的查询表单，并具有由 .js 文件控制的动态字段。在表单中，您可以选择一个类别，然后选择基于该类别的产品或服务，一旦您选择了感兴趣的字段，js 文件就会生效并在表单中填充新字段。现在这个文件与我的侧边菜单冲突，因为我尝试输入 Jquery 但没有运气......有没有像 JS No Conflict 这样的其他方法我可以把它包装进去？它已经杀死了我好几个星期了，我似乎无法克服它。这是代码：

```
 function $() {
    var elements = new Array();
    for (i = 0; i < arguments.length; i++) {
        var element = arguments[i];
        if (typeof element == 'string')
          element = document.getElementById(element);
        if (arguments.length == 1)
          return element;
        elements.push(element);
    }
    return elements;
} 
```

您对此的想法将不胜感激，谢谢。

哦，这是完整的 .js

```
 //++ Functions for Ajax

function GetXmlHttpObject()
{
    var xmlHttp=null;
    try
    {
        // Firefox, Opera 8.0+, Safari
        xmlHttp=new XMLHttpRequest();
    }
    catch (e)
    {
        // Internet Explorer
        try
        {
            xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch (e)
        {
            xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
    }
    return xmlHttp;
}
function ajaxOnSuccess()
{
    return xmlHttp.responseText;
}
//--
//++ Function for process element in HTML
function formSerialize(formID)
{
    var f=$(formID);
    var elem = f.elements;
    var flength = elem.length;
    var i = 0;
    var str = "";
    for(i=0;i<flength;i++)
    {
        if(elem[i].type=='radio' || elem[i].type=='checkbox')
        {
            if(elem[i].checked==true)
    {
                if(i<flength-1)
                {
                    str += elem[i].name + "=" + nl2br(elem[i].value) + "&";
                }
                else
                {
                    str += elem[i].name + "=" + nl2br(elem[i].value);
                }
            }
        }
        else
        {
            if(i<flength-1)
            {
                str += elem[i].name + "=" + nl2br(elem[i].value) + "&";
            }
            else
            {
                str += elem[i].name + "=" + nl2br(elem[i].value);
            }
                }
    }
    //alert(str);
    return str;
}

function $() {
    var elements = new Array();
    for (i = 0; i < arguments.length; i++) {
        var element = arguments[i];
        if (typeof element == 'string')
          element = document.getElementById(element);
        if (arguments.length == 1)
          return element;
        elements.push(element);
    }
    return elements;
} 
```

# magento - 管理网格未显示所有行

> ID：14559422
> 
> 赞同：1
> 
> 时间：2013-01-28T09:53:54.903
> 
> 标签：magento, grid, admin

在我的自定义模块中，我使用以下代码获得了网格视图。另外，我得到了正确的计数，但是网格只显示 1 行。即，它显示“共找到 2 条记录”，但在网格中只显示一行..

请帮忙。

我的自定义模块的 grid.php 代码如下：

```
public function __construct()
{
    parent::__construct();
    $this->setId(‘order_tailor’);
    $this->setUseAjax(true);
}

/**
* Retrieve collection class
*
* @return string
*/
protected function _getCollectionClass()
{
    return ‘sales/order_invoice_grid_collection’;
}

protected function _prepareCollection()
{
    $collection = Mage::getResourceModel($this->_getCollectionClass())
    ->addFieldToSelect('entity_id')
    ->addFieldToSelect('order_id')
    ->setOrderFilter($this->getOrder())
    ;
    $collection->getSelect()->join('custom_order_info', 'main_table.entity_id = custom_order_info.custom_id',array('tailor_name','created_at','custom_id','id'));
    $collection->getSelect()->group('entity_id');
    $this->setCollection($collection);
    return parent::_prepareCollection();
}

protected function _prepareColumns()
{
   $this->addColumn(‘id’, array(
   ‘header’ => Mage::helper(‘sales’)->__(‘ID’),
   ‘index’ => ‘id’,
   ‘width’ => ’120px’,
   ));

   $this->addColumn(‘tailor_name’, array(
   ‘header’ => Mage::helper(‘sales’)->__(‘Tailor Name’),
   ‘index’ => ‘tailor_name’,
   ));

   $this->addColumn(‘created_at’, array(
   ‘header’ => Mage::helper(‘sales’)->__(‘Date Sent’),
   ‘index’ => ‘created_at’,
   ‘type’ => ‘datetime’,
   ));

   $this->addColumn(‘delivery_at’, array(
   ‘header’ => Mage::helper(‘sales’)->__(‘Date Delivery Expected’),
   ‘index’ => ‘delivery_at’,
   ‘type’ => ‘datetime’,
   ));

   $this->addColumn(‘status’, array(
   ‘header’ => Mage::helper(‘sales’)->__(‘Status’),
   ‘index’ => ‘status’,
   ‘type’ => ‘options’,
   ‘options’ => array(
       1 => ‘Draft’,
       2 => ‘Sent’,
       3 => ‘Accepted’,
      ),
   ));

   $this->addColumn(‘base_grand_total’, array(
   ‘header’ => Mage::helper(‘customer’)->__(‘Amount’),
   ‘index’ => ‘base_grand_total’,
   ‘type’ => ‘currency’,
   ‘currency’ => ‘base_currency_code’,
   ));

   return parent::_prepareColumns();
}

/**
* Retrieve order model instance
*
* @return Mage_Sales_Model_Order
*/
public function getOrder()
{
    return Mage::registry(‘current_order’);
}

public function getRowUrl($row)
{
    return $this->getUrl(‘*/sales_order_test/view’,
    array(
       ‘id’ => $row->getId(),
       ‘order_id’ => $row->getOrderId()
      )
   );
}

public function getGridUrl()
{
    return $this->getUrl(‘*/*/grid’, array(‘_current’ => true));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:56:39.077

I think you will need to override a core method to get correct count and rows in grid. If you are using "group by" in your query in Magento grid, it sometimes doesn't handle it properly. I will recommend to check my post on this issue to fix it:

[http://ka.lpe.sh/2012/01/05/magento-wrong-count-in-admin-grid-when-using-group-by-clause-overriding-lib-module/](http://ka.lpe.sh/2012/01/05/magento-wrong-count-in-admin-grid-when-using-group-by-clause-overriding-lib-module/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T08:55:06.147

我有同样的问题！我解决了它找出 config.xml 中的配置，我设置了不同的数据库资源！像那样：

```
 <resources>
        <home_write>
            <connection>
                <use>some_setup</use>
            </connection>
        </home_write>
        <home_read>
            <connection>
                <use>some_setup</use>
            </connection>
        </home_read>
    </resources> 
```

我修改为default_setup，它解决了！

# c# - 以编程方式将新行添加到 DataTable C#

> ID：14559435
> 
> 赞同：2
> 
> 时间：2013-01-28T09:54:54.567
> 
> 标签：c#, datatable

我有一个从数据库填充的 DataTable，我试图在每行之后再添加 3 行。下面是代码。但在第 6 行我得到

> 引发了“System.OutOfMemoryException”类型的异常。

```
 for (int i = 0; i < AlldaysList.Rows.Count; i++)
    {
        DataRow row;
        row = AlldaysList.NewRow();
        DataRow row1;
        row1 = AlldaysList.NewRow();
        DataRow row2;
        row2 = AlldaysList.NewRow();

        // Then add the new row to the collection.
        row["scenarionid"] = DBNull.Value;
        row["description"] = "";
        row1["scenarionid"] = DBNull.Value;
        row1["description"] = "";
        row2["scenarionid"] = DBNull.Value;
        row2["description"] = "";
        AlldaysList.Rows.InsertAt(row, i + 1);
        AlldaysList.Rows.InsertAt(row1, i + 2);
        AlldaysList.Rows.InsertAt(row2, i + 3);
        i++;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T10:03:25.813

```
//This could be the problem
i < AlldaysList.Rows.Count 
```

我认为你应该有一个名为 int rowCount = AlldaysList.Rows.Count 的变量；在循环之前..

```
the loop should be  for (int i = 0; i < rowCount; i++) 
```

我之所以这么说是因为如果你在循环中添加 3 行，你的 AlldaysList.Rows.Count 会改变 +3 并且你的目标是动态变量而不是静态变量，所以它再次进入循环并导致异常..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:05:50.287

我认为你应该这样做：

```
int origRowCount = AlldaysList.Rows.Count;
for (int i = 0; i < origRowCount; i++)
{
    for (int j = 1; j <= 3; j++)
    {
        AlldaysList.Rows.InsertAt(MakeNewAlldaysRow(AlldaysList), i * 4 + j);
    }
}

// ....
// (separate method)
static DataRow MakeNewAlldaysRow(DataTable table)
{
    DataRow row = table.NewRow();
    row["scenarionid"] = DBNull.Value;
    row["description"] = "";

    return row;
} 
```

由于行列表将增加，因此您需要在开始添加行*之前记下行数。*此外，插入位置将增加*4*，因此`i * 4 + j`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T07:50:34.557

您的代码的通用版本，您可以通过更改变量 RowsToAdd 的值来添加任意数量的行。您不需要创建三个 DataRow 变量（row,row1,row2）...

```
int RowsToAdd=3
int rowCount = AlldaysList.Rows.Count;
for (int i = 0; i < rowCount; i++)
{
   for (int j = 0; j < RowsToAdd; j++)
   {
     DataRow dr = AlldaysList.NewRow();
     dr["scenarionid"] = DBNull.Value;
     dr["description"] = "";

     AlldaysList.Rows.Add(dr);
   }
} 
```

# html - Prism HTML 荧光笔

> ID：14559436
> 
> 赞同：23
> 
> 时间：2013-01-28T09:54:55.463
> 
> 标签：html, syntax-highlighting, prism.js

我正在使用[Prism](http://prismjs.com/)，它在 CSS 上运行良好：

```
<pre><code class="language-css">p { color: red }</code></pre> 
```

但我不能让它为 html 工作：

```
<pre><code class="language-html"><p class="red">red text</p></code></pre> 
```

我有两个问题：

1.  `<`并`>`表示为标签，而不是文本，但我可以将其替换为`&lt;`and`&gt;`

2.  更重要的是，即使如问题 1 所示更换，highliter 也不会突出显示任何代码，一切都只是黑色。尽管它适用于 CSS，但整个代码如下所示：

> ```
> <!DOCTYPE html>
> <html>
>     <head>
>         <link href="prism.css" rel="stylesheet" />
>     </head>
>     <body>
>         <script src="prism.js"></script>
>         <pre><code class="language-css">p { color: red }</code></pre>
>     </body>
> </html> 
> ```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-25T03:32:41.360

用于`<code class="language-markup">`样式化 html 代码。

此外，您只需用 转义标签的开头`&lt;`，不用担心`&gt;`字符。最简单的方法是将您的 html 代码粘贴到 pre 标记中，然后对所有`<`字符执行查找和替换。

这应该有效：

```
<!DOCTYPE html>
<html>
    <head>
        <link href="prism.css" rel="stylesheet" />
    </head>
    <body>
        <script src="prism.js"></script>
        <pre><code class="language-markup">
            &lt;p class="red">red text &lt;/p>
        </code></pre>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-09T21:54:28.950

**解决问题 1)**：

您可以使用[unexcaped-markup 插件](http://prismjs.com/plugins/unescaped-markup/)

这是它的工作原理：

```
<script type="text/plain" class="language-markup">
   <p>Example</p>
</script> 
```

要忽略第一个和最后一个返回，我建议使用[normalize whitespace plugin](http://prismjs.com/plugins/normalize-whitespace/)。

**解决问题2）：**

没有`languages-html`看到[http://prismjs.com/index.html#languages-list](http://prismjs.com/index.html#languages-list)。HTML 是一种超文本**标记**语言，因此它包含在**language-markup**中。这就是你必须使用的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-24T13:16:29.930

我对 HTML 也有同样的问题。我不想用 < > 替换 <, > 所以我所做的是将代码放在隐藏 div 内的 textarea-elements 中，一旦加载页面，将所有 textarea 的内容复制到代码元素。通过这种方式，我能够保持代码原样并毫无问题地渲染它。

当然，明显的缺点是没有 JS 就没有内容，但是荧光笔也不起作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-11-27T07:45:53.993

我想补充一点，另一个非常简单的可能性是`<xmp>`像这样使用archaic -tag：

```
<pre><code class="language-html">
<xmp>
  <p>this markup is now rendered as expected although your IDE might be upset about you using that old tag</p>
</xmp>
</code></pre> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-28T11:10:56.557

最好的解决方案是将要突出显示的 html 保存到单独的文件中。您需要将文件高亮插件包含在您的 js.js 中。

语法高亮将从扩展中解决

```
<pre data-src="assets/partials/picture.html"></pre> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-12T12:58:16.537

我实际上遇到了同样的问题，我将 prism js 和 prism css 放在 html 页面上，但无法突出显示。不确定这是否会是其他人的问题，但对我来说，是一些全局 CSS 被设置为所有“代码”、“预”标签的黑色。在我从那里删除该颜色后，棱镜突出显示开始显示。如果它仍然不起作用，您可以按照这篇文章 [Code syntax higlighter using Prism js 进行操作](https://www.code2night.com/Blog/MyBlog/Code-syntax-higlighter-using-Prism-js)。我看不出有什么不同，但是当我将 prism js 放在我想要突出显示的代码下方时遇到了问题。当我将其移至顶部时，它开始工作。如果有人有问题，他们可以试试这个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-21T04:56:42.100

我认为亚当的答案应该是这种情况下的最佳解决方案。我只是详细说明了使用[unexcaped-markup 插件](http://prismjs.com/plugins/unescaped-markup/)以最简单的方式制作 HTML 荧光笔。

由于 <script /> 仅适用于单行代码，因此您可能需要插入简单的 HTML 注释来转义所有代码：

```
<pre class="language-markup"><code><!--
  <p>Example</p>
  <p>Example</p>
  <p>Example</p>
--></code></pre> 
```

评论中的所有内容都会被漂亮地打印出来。[如果您需要使用Prism](http://prismjs.com/)打印 HTML 标记，值得一试。

# jsp - Woodstock Java EE Web 应用程序 - 迁移到标准 JSF

> ID：14559439
> 
> 赞同：1
> 
> 时间：2013-01-28T09:55:13.507
> 
> 标签：jsp, jsf, jakarta-ee, migration, woodstock

我正在维护相当旧的 Web 应用程序（大约十个视图，包括一个选项卡式视图），它使用 Woodstock 组件库，并希望将其迁移到普通的 JavaServer Faces。

有两种选择：

*   从头开始重建它作为一个单独的项目，或者
*   在主（生产）版本中一一迁移现有视图

（当然第二个选项会发生在单独的版本控制分支中，并且只有在测试时才会将更改合并到主干）

我还阅读了[JSF - 组件库，迁移还是不迁移？](https://stackoverflow.com/questions/7818223/jsf-component-libraries-migrate-or-not-migrate)，它与 Woodstock 组件库相关，并给出了许多迁移的原因。

我是否正确理解 Woodstock 使用 JSF 1 标准进行 UI/代码绑定，所以我只需要关心用 JSF 1 标准实现中的相应组件替换 Woodstock 组件吗？

* * *

附加信息：Web 应用程序当前将 JavaServer Pages (JSP) 用于这些视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:50:31.307

> 我是否正确理解 Woodstock 使用 JSF 1 标准进行 UI/代码绑定

实际上，woodstock 组件创建 JavaScript DOM，而不是与 JSF 不同的 HTML

> 我只需要关心用 JSF 1 标准实现中的相应组件替换 Woodstock 组件

正确，但不必是 JSF 1

此外，您可以使用任何 MVC 框架，通过它您可以将 JSP 元素（woodstock 组件）转换为生成 HTML 的元素

# javascript - 在外部单击时隐藏多个元素的最有效方法？

> ID：14559442
> 
> 赞同：3
> 
> 时间：2013-01-28T09:55:24.690
> 
> 标签：javascript, jquery, css, performance

好的，所以我们都知道在单击外部元素（即元素失去焦点）时隐藏元素（和多个元素）的这种方式：

```
$('document').on('click', function () { $(element).hide(); });

$(element).on('click', function (e) { e.stopPropagation(); /* ka-chow! */ }); 
```

这意味着到达文档的任何点击事件都会隐藏元素，而元素内的任何点击都不会传播到文档，也不会触发点击事件。

这一切都很好，而且绝对不是新闻。

但是，我有一个复杂而丰富的 UI。这个接口有许多需要这种行为的元素。让我们假设在每个事件中只需要隐藏一个元素。我是否需要每次都遍历整个区域，才能找到我想要隐藏的一个元素？

如果是这样，最有效的方法是什么？给他们一个唯一的类名？或者将每个元素的类名/ID/DOM 实例存储在一个数组中并每次循环遍历它？在我看来，每个解决方案都比另一个解决方案效率低下。

你会怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:50:02.193

认为：

1.  这些元素由 javascript 显示/隐藏。

2.  规则是越晚出现，越早隐藏。

然后我会维护一个数组来处理它，例如：

```
var displayedElements = [];

...

// called when you want to display an element
function showUp (ele) {
    // push element into array
    displayedElements.push(ele);
    ...
}

// called when you want to close the last displayed element
function closeOneIfAvailable () {
    var len = displayedElements.length;
    if (len > 0) {
        var idx = len - 1;
        hideIt (displayedElements[idx]);
        displayedElements.splice(idx, 1);
    }
}

// called when you want to hide an element
function hideIt (ele) {
    ...
} 
```

# python - Python unicode 字符串文字 :: '\u0391' 和 u'\u0391' 有什么区别

> ID：14559444
> 
> 赞同：7
> 
> 时间：2013-01-28T09:55:28.093
> 
> 标签：python, unicode, unicode-literals

我正在使用 Python 2.7.3。任何人都可以解释文字之间的区别：

```
'\u0391' 
```

和：

```
u'\u0391' 
```

以及它们在下面的 REPL 中回显的不同方式（尤其是添加到 a1 的额外斜线）：

```
>>> a1='\u0391'
>>> a1
'\\u0391'
>>> type(a1)
<type 'str'>
>>> 
>>> a2=u'\u0391'
>>> a2
u'\u0391'
>>> type(a2)
<type 'unicode'>
>>> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T09:56:12.877

您只能`\uabcd`在 unicode 字符串文字中使用 unicode 转义 ( )。它们在字节串中没有意义。Python 2 Unicode 文字 ( `u'some text'`) 是与 Python 字节字符串 ( ) 不同类型的 Python 对象`'some text'`。

这就像使用`\t`vs `\T`; 前者在 python 文字中具有意义（它被解释为制表符），后者仅表示反斜杠和大写 T（两个字符）。

为了帮助理解 Unicode 和字节字符串之间的区别，请阅读[Python Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)；我还可以推荐[Joel Spolsky 关于 Unicode 的文章](http://www.joelonsoftware.com/articles/Unicode.html)。

注意：在 Python 3 中，应用相同的差异，但`'some text'`它是 Unicode 字符串文字，并且`b'some text'`是字节串语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T10:00:07.420

与 C 不同，在 Python 中，字符串可以用单引号 ( `'`) 和双引号 ( `"`) 括起来——撇开三双引号`"""`。

因此，`'\u0391'`只是一个包含字母`\`、`u`、`0`、`3`和`9`的字符串`1`。当漂亮地打印这个字符串时，`\`通过另一个`\`.

相反，`u`前面有 a 会使字符串被视为 Unicode，并且所有转义都被评估。因此，被解释为与上述不同的“`u'\u0391'`包含代码点的 Unicode 字符串”。`0391`

# android - 是否有标准可以及时获得最新的修复（而不是最准确的）

> ID：14559450
> 
> 赞同：0
> 
> 时间：2013-01-28T09:56:00.767
> 
> 标签：android, gps, locationmanager

这是我用来在不添加侦听器的情况下获取最后一个已知位置的代码。我不想耗尽电池，所以我使用了：

```
public static Location getLastLoc(Context context){

    Location loc = null;

    LocationManager locationManager = (LocationManager) context
            .getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    String best = locationManager.getBestProvider(criteria, true);
    //Log.i("***", best);
    if (best != null) {
        loc = locationManager.getLastKnownLocation(best);
    }
    //Sometimes getLastKnownLocation return null (new device), so I use network as default when possible. 
    if (loc == null) {
        try {
            loc = locationManager
                    .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    return loc;
} 
```

我目前正在尝试此代码，最好的提供商听起来是 GPS。

不幸的是，我今天早上从 A 市搬到了 B 市，但我还没有 GPS 定位。（但 GPS 已打开）

所以我在B市时仍然得到旧城A，并且网络位置知道B市（用谷歌地图测试）

所以，由于我不需要准确的位置，怎么可能及时获得最新的修复（GPS 3 小时前，网络 10 分钟前）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:05:49.477

您必须使用侦听器来获取最后知道的位置。因为

```
 locationManager.getLastKnownLocation(best); 
```

它不会调用 GPS 来获取更新的位置此方法仅将最后一个已知位置提供给 locationManager 对象。这就是您的位置没有更新的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:43:51.350

在等待更好的答案时，我唯一让它起作用的是检查最新的已知位置是否不超过一小时：

```
loc = locationManager.getLastKnownLocation(best);
if ((System.currentTimeMillis() - loc.getTime()) < DateUtils.HOUR_IN_MILLIS)
    return loc;

try {
    if (locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER) != null)
        loc = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

# java - 以编程方式检测当前 Ubuntu 版本是否低于或高于 Ubuntu 12.04

> ID：14559451
> 
> 赞同：0
> 
> 时间：2013-01-28T09:56:00.667
> 
> 标签：java, ubuntu-12.04, network-interface

我正在开发 Java Web 应用程序，其中逻辑会根据操作系统版本而有所不同。

目前我们在 Ubuntu 12.04 和 Ubuntu 10 上部署我们的应用程序。Web 应用程序允许通过其 UI 更改 DNS 名称服务器。部署在 Ubuntu 10 中的应用程序使 DNS 名称服务器保持打开状态，`etc/resolv.conf`但 Ubuntu 12.04 将它们保持在`etc/network/interfaces`.

存储 DNS 名称服务器时，逻辑就像

```
if(ubuntuVersion < ubuntu 12.04) then
    store it in etc/resolv.conf
else
    store it in etc/network/interfaces. 
```

`System.getProperty("os.name")`or`System.getProperty("os.arch")`或任何其他系统属性不输出 Ubuntu 软件包信息。

该`if`部分如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:03:53.020

试试这个命令`lsb-release`，它应该返回发行版的发布版本。您应该能够从输出中提取版本。

只跑

```
lsb_release --release --short 
```

将返回 ubuntu 版本号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:11:29.747

您可以通过以下方式获取操作系统版本：

`lsb_release -a|grep Release|cut -f2`

# java - 如何使用 Java 访问 flickR 上的私人照片集？

> ID：14559452
> 
> 赞同：1
> 
> 时间：2013-01-28T09:56:01.460
> 
> 标签：java, flickr

目前我使用 FlickR-API-1.2 for Java 从 flickR 调用图像。用户身份验证成功，但我无法从该用户那里获取私人照片集。

怎么了？我得到了一个可以阅读的令牌。我将照片集称为：

```
 Collection<Photoset> sets=photoSetsInterface.getList(auth.getUser().getId()).getPhotosets; 
```

集合仅包含来自该用户的公共集。

//EDIT: 令牌的权限被读取

问候

# node.js - 如何强制 dotcloud 上的 nodejs 仅使用 HTTPS？

> ID：14559453
> 
> 赞同：0
> 
> 时间：2013-01-28T09:56:04.380
> 
> 标签：node.js, https, dotcloud

默认情况下，dotcloud 允许我通过 HTTPS 访问我的节点实例，但我应该只允许 HTTPS 并将每个 HTTP 请求转发到 HTTPS。

在dotcloud平台上应该怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:08:25.380

它应该与托管在其他地方的任何其他 node.js 应用程序相同。

您是否尝试过这些答案中的解决方案？

[如何在 Express.js 中强制 SSL / https](https://stackoverflow.com/questions/8605720/how-to-force-ssl-https-in-express-js)

[使用 node.js/express 自动 HTTPS 连接/重定向](https://stackoverflow.com/questions/7450940/automatic-https-connection-redirect-with-node-js-express)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:43:25.780

dotCloud 提供了一个额外的标头：x-forwarded-proto，它允许您了解代理源。

在您的代码中，您可以使用 req.headers['x-forwarded-proto'] （是 'http' 或 'https' ）来了解来源。当它是http时，您可以重定向到https。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:33:31.157

作品！多谢你们！

```
connectApp.use(function(req, res, next){
    if( req.headers['x-forwarded-proto'] && req.headers['x-forwarded-proto'] == "http" )
        res.redirect( 'https://' + global.config.server.address );
    else
        next();
}); 
```

# asp.net - 在本地服务器上测试 ASP.NET

> ID：14559457
> 
> 赞同：1
> 
> 时间：2013-01-28T09:56:11.547
> 
> 标签：asp.net

如何在本地服务器中测试 ASPX.NET Web 应用程序？我需要安装什么？对不起各位，只是新手。我也进行了一些搜索，但我总是失败。我遇到了一个所谓的 IIS 服务器，但我几乎无法得到它。希望有人可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:08:05.713

正如其他人所说，IIS 是操作系统的一部分（无论是在 Windows 服务器操作系统中，还是在 Windows XP/Vista/7 的专业版中）。

您还可以回退到[IIS express](http://www.microsoft.com/en-us/download/details.aspx?id=1038)，它允许您使用登录用户的身份在本地运行应用程序。

这足以运行任何 asp.net Web 应用程序（具有同时连接数等限制，...）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:01:41.170

IIS 服务器安装附带 windows 安装。你不能单独得到它。它是 Windows 服务器安装的一部分。您可以从控制面板的添加/删除 Windows 组件部分安装它。

此外，还有许多其他 Web 服务器可以用于它。例如 cassini Web 服务器（Visual Studio 也提供）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T10:00:58.207

如果你想在本地测试，你不需要服务器应用程序 IIS，你有 Cassini 服务器，如果你使用 Framework 2.0 或更高版本，他默认安装在你的运行时

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T11:10:24.313

尝试写入`Run...`选项（单击开始/运行...） `inetmgr`此命令（如果您有 IIS Express 或完整版本的 IIS）将向您显示 IIS 服务器管理器。

在管理器中，您将在计算机的右列名称中看到单击`plus`左侧的符号。然后右键单击`Sites`并选择`Add Web Site...`

您需要填写网站名称，提供项目路径（包含 web.config 的文件夹），并更改端口

在此之后，您需要检查`Application pool`您的网站（它的名称将与您的网站相同），如果您使用 .NET Framework 版本 4，则需要更改（框架的默认版本是 2.0）

**编辑：** 在 IIS 上测试应用程序（具有调试功能）的下一步是：

*   在 Visual Studio（解决方案导航器）中右键单击项目解决方案并选择属性
*   选择左侧的 Web 书签
*   在使用本地 IIS Web 服务器附近的部分`Servers`选中单选按钮
*   在下面的文本框中（Project Url :) 写入`http：/ localhost：您在创建网站时在 IIS 中编写的端口

这就是您需要做的一切:) 从现在开始，您可以在 IIS 上本地测试您的项目:)

希望这会有所帮助:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T10:45:28.993

与 PHP 一样，您的机器上需要一些东西来提供 PHP 页面，例如 WAMP 服务器，同样您必须设置机器来提供 asp.net 页面。作为 PHP 的 WAMP，为 ASP.NET 安装 IIS。您需要查看一些有关 Web 部署的 MSDN。[这](http://msdn.microsoft.com/en-us/library/dd394698.aspx)是一个很好的起点。

# c# - Repeater 检索上一个 index 属性值

> ID：14559460
> 
> 赞同：-4
> 
> 时间：2013-01-28T09:56:16.190
> 
> 标签：c#, asp.net

我在 Asp.net 中使用中继器控件。

我有一个场景，根据条件我必须检索以前的索引属性值。

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:25:52.433

如果在对中继器进行数据绑定时您的 DataSource 可用，则可以执行以下操作：

数据源定义仅用于显示示例：

```
protected DataTable Data
{
    get
    {
        if (ViewState["Data"] == null)
        { 
            DataTable table = new DataTable();
            table.Columns.Add("ID", typeof(int));
            table.Columns.Add("Name");
            table.Columns.Add("Color");
            table.Columns.Add("Weight", typeof(int));

            table.Rows.Add(1, "Ball", "Red", 10);
            table.Rows.Add(2, "Table", "Black", 50);
            table.Rows.Add(3, "Chair", "Green", 30);
            ViewState["Data"] = table;
        }
        return (DataTable)ViewState["Data"];
    }
} 
```

页面加载（中继器数据绑定）：

```
protected void Page_Load(object sender, EventArgs e)
{
    rpt.DataSource = Data;
    rpt.DataBind();
} 
```

中继器代码：

```
<asp:Repeater ID="rpt" runat="server">
    <ItemTemplate>
        <%# 
            Condition ? Data.Rows[Container.ItemIndex - 1]["Name"] : Eval("Name")
        %> 
    </ItemTemplate>
</asp:Repeater> 
```

`Data`引用代码隐藏上的受保护属性，即 DataTable。

# javascript - 无法可靠地检测 iPhone 纵向和横向模式之间的滚动底部

> ID：14559461
> 
> 赞同：2
> 
> 时间：2013-01-28T09:56:18.733
> 
> 标签：javascript, jquery, iphone, scroll, detect

我试图检测用户何时滚动到文档底部。我当前的解决方案在桌面浏览器中运行良好，并且在横向模式下使用 Mobile Safari（我还无法解释 1px 的差异）。但是，在横向模式下，Mobile Safari 得到了完全不同的结果。

我在这里有一个工作示例：http: [//dl.dropbox.com/u/5634676/checkbottom.html](http://dl.dropbox.com/u/5634676/checkbottom.html)

检测例程归结为：

```
if ($(window).scrollTop() + $(window).height() >= $(document).height())) {
  // Bottom reached
} 
```

您能否解释这两种模式之间的区别并帮助我可靠地检测用户何时滚动到文档底部？

**更新**

我已经更新了链接示例，修复了 theflyingbrush 指出的错误。横向和纵向模式的结果现在更接近了（但仍然存在 52 像素的无法解释的差异）。但重要的是，对于纵向和横向模式，仍然无法检测到滚动到页面底部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-28T01:36:53.350

我在 IOS 移动设备上遇到了同样的问题。将“文档”替换为“正文”解决了我的问题。

```
if($(window).scrollTop() + $(window).height() > $('body').height() - 200 )
```

此外，最好检查屏幕是否“靠近”底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:35:47.340

当设备方向改变时，窗口的高度会改变，从而使存储在文档中的 windowHeight 变量失效。通过监听orientationchange事件并重新计算窗口高度来更新它。就像是：

```
window.addEventListener("orientationchange", change);

function change(){
    windowHeight = $(window).height();
} 
```

**编辑**：混淆这一点，因为它还涉及视口比例。这是一个工作版本的链接：http: [//appunit.co.uk/scroll](http://appunit.co.uk/scroll)

您需要在计算中考虑地址栏的高度，因为 $(window).scrollTop() 在地址栏滚动到屏幕外之前返回 0。因此，将地址栏高度 (60px) 添加到 scrollTop 以获得滚动距离。如果您没有在 html 中设置视口元标记并指定 width=device-width，这将变得更加复杂。在这种情况下，视口将从 320x356 缩放到 980x1091，并且地址栏占用的虚拟高度也会被缩放。概括：

```
var scaleFactor = ($(window).height()/356).toPrecision(2);
// toPrecision(2) prevents rounding error..
var addressBarHeight = 60 * scaleFactor;

// and when calculating scrollTop
var scrollTop = addressBarHeight + $(window).scrollTop(); 
```

# web-applications - DropDownList 包含在 MVC4 Web 应用程序中编辑和创建视图的目录中的文件列表

> ID：14559470
> 
> 赞同：0
> 
> 时间：2013-01-28T09:56:41.303
> 
> 标签：web-applications, asp.net-mvc-4, views

我想在 MVC4 Web 应用程序的编辑和创建视图中显示包含目录中文件列表的下拉框。我在控制器的编辑部分使用了它：

```
DirectoryInfo directory = new DirectoryInfo(Server.MapPath("~/DownloadFiles"));
var filesListing = directory.GetFiles().ToList<FileInfo>();
ViewBag.zipListing = filesListing; 
```

这在编辑视图中：

```
@Html.DropDownListFor(model => model.DownloadName, new SelectList   (ViewBag.zipListing).AsEnumerable()) 
```

哪个工作正常，（*DownloadName*是表字段的名称），它会更新字段并在编辑页面加载时显示正确的 db 表项。**但是**，如果我尝试在 Create 视图中使用它，它会错误地抱怨 Null 或找不到参考。

我有一个块的副本：

```
DirectoryInfo directory = new DirectoryInfo(Server.MapPath("~/DownloadFiles"));
var filesListing = directory.GetFiles().ToList<FileInfo>();
ViewBag.zipListing = filesListing; 
```

在控制器的 Create 部分中，使用 var *filesListing*和 ViewBag。*zipListing*重命名以避免混淆（我想我应该将目录读数放在一个地方列出东西，但一次可能只有一件事..）

请问如何将此目录列表用作“创建”视图中的下拉列表？我尝试了很多变化，但似乎没有任何效果。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:30:51.327

除了使用 ViewBag，您是否想过只是向您绑定到创建视图的模型添加一个属性，如下所示：

```
public List<FileInfo> FileList 
    {
        get
        {
            DirectoryInfo directory = new DirectoryInfo(HttpContext.Current.Server.MapPath("~/DownloadFiles"));
            return directory.GetFiles().ToList<FileInfo>();
        }
    } 
```

# angularjs - AngularJS：使用动态属性值的自定义指令在“ng-repeat”中不起作用

> ID：14559475
> 
> 赞同：19
> 
> 时间：2013-01-28T09:56:52.587
> 
> 标签：angularjs, angularjs-directive

您能否解释一下为什么以下指令不起作用？

`attrs.ngMydirective`似乎`undefined`在链接功能内。

[现场示例在这里](http://plnkr.co/edit/o5OTuV?p=preview)

HTML：

```
<body ng-controller="MyCtrl">
  <ul>
    <li ng-repeat="person in people">
      {{ person.name }}
      <span ng-mydirective="{{ person.age }}"></span>  
    </li>
  </ul>
</body> 
```

JS：

```
var app = angular.module('myApp', []);

app.directive('ngMydirective', function() {
  return {
    replace: true,
    link: function(scope, element, attrs) {
      if (parseInt(attrs.ngMydirective, 10) < 18) {
        element.html('child'); 
      }
    }
  };
});

app.controller('MyCtrl', function($scope) {
  $scope.people = [
    {name: 'John', age: 33},
    {name: 'Michelle', age: 5}
  ];
}); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-28T10:15:32.217

您应该使用`attrs.$observe`具有实际价值。

另一种方法是将此值传递给指令的范围和`$watch`它。

两种方法都在这里显示（[现场示例](http://plnkr.co/edit/58OCBM?p=preview)）：

```
var app = angular.module('myApp', []);

app.directive('ngMydirective', function() {
  return {
    replace: true,
    link: function(scope, element, attrs) {
      attrs.$observe('ngMydirective', function(value) {
        if (parseInt(value, 10) < 18) {
          element.html('child'); 
        }
      });
    }
  };
});
app.directive('ngMydirective2', function() {
  return {
    replace: true,
    scope: { ngMydirective2: '@' },
    link: function(scope, element, attrs) {
      scope.$watch('ngMydirective2', function(value) {
        console.log(value);
        if (parseInt(value, 10) < 18) {
          element.html('child'); 
        }
      });
    }
  };
});

app.controller('MyCtrl', function($scope) {
  $scope.people = [
    {name: 'John', age: 33},
    {name: 'Michelle', age: 5}
  ];
}); 
```

```
<body ng-controller="MyCtrl">

  <ul>
    <li ng-repeat="person in people">
      {{ person.name }}
      <span ng-mydirective="{{ person.age }}"></span>  
    </li>
    <li ng-repeat="person in people">
      {{ person.name }}
      <span ng-mydirective2="{{ person.age }}"></span>  
    </li>
  </ul>

</body> 
```

# c++ - 在 DateEdit Qt C++ 中打开 .txt 中的日期

> ID：14559476
> 
> 赞同：3
> 
> 时间：2013-01-28T09:57:09.367
> 
> 标签：c++, qt, date

我试图在 .txt 中保存 QtDesigner 中的 DataEdit 日期，然后打开 .txt 并将日期放入 DataEdit 中。

保存是好的：

```
QTextStream out(&sFile);

        out << ui.lineEdit_2->text()<< "\n"
            << ui.lineEdit->text()<< "\n" 
            << ui.dateEdit->text(); 
```

打开（这是问题所在）：

```
 QTextStream in(&sFile);
        QString text = in.readLine();
        QString name = in.readLine();
        QDateEdit fecha = in.readLine();

        sFile.close();
        ui.lineEdit_2->setText(text);
        ui.lineEdit->setText(name);
        ui.dateEdit->date(fecha); 
```

错误 1 ​​错误 C2440：“正在初始化”：无法从“QString”转换为“QDateEdit”
错误 2 错误 C2660：“QDateTimeEdit::date”：函数不接受 1 个参数

我不知道喜欢改变这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:16:25.700

QDateEdit 是一个不是[QDate](http://doc.qt.digia.com/qt/qdate.html#operator-lt-lt-105)的小部件，并且 QDate 可以序列化该小部件对序列化没有意义 - 您实际上是在写下 QDateEdit 的文本并希望从该文本创建一个 QDateEdit。

相反，您需要序列化该编辑的 QDate，然后取回 QDate 并将其设置为 ui.dateEdit。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:36:23.017

这不是存储设置的最佳方式。您将其存储为文本，但不控制文本编码、日期格式等。

无论如何，您的代码的最小更改如下：

```
QDate fecha = QDate::fromString(in.readLine());
...
ui.dateEdit->setDate(fecha); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:47:41.063

尝试`QDate::fromString()`从中获取的方法`QDate`。然后打电话`QDateEdit::setDate(const QDate& date)`

苏龙仔

# php - 5e-08 在 PHP 中转换为十进制

> ID：14559482
> 
> 赞同：0
> 
> 时间：2013-01-28T09:57:45.360
> 
> 标签：php, bitcoin

我正在尝试将 5e-08 转换为正确的小数点，我如何使用 PHP 完成此操作

```
<?php

$value = 5;

$real_btc = $value/1e8;

echo $real_btc; 
```

这返回

```
5.0E-8 
```

我需要它返回正确的十进制值 0.00000005

我怎么能用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:59:31.907

[`printf`](http://php.net/manual/en/function.printf.php)与适当的格式说明符一起使用：

```
printf("%.8f", 5 / 1e8); 
```

# neural-network - 神经网络的输出值没有达到期望值

> ID：14559485
> 
> 赞同：0
> 
> 时间：2013-01-28T09:57:49.323
> 
> 标签：neural-network, backpropagation

我制作了一个也有反向传播的神经网络。它在输入层有 5 个节点，在隐藏层有 6 个节点，在输出层有 1 个节点，并且具有随机权重，我`sigmoid`用作激活函数。

我有两组数据供输入。

例如 ：

```
13.5 22.27 0 0 0          desired value=0.02
7 19 4 7 2                desired value=0.03 
```

现在我用 5000 次迭代训练网络，否则如果出现错误，迭代将停止

value( `desired - calculated output value`) 小于或等于 0.001。

每个输入集的第一次迭代的输出值约为 60 并且在每次迭代中都会减小。

现在的问题是第二组输入（期望值为 0.03）导致迭代停止，因为计算出的输出值为 3.001，但第一组输入没有达到期望值（即 0.02）和它的输出约为 0.03 。

**编辑：**

我使用`LMS`算法并更改了错误阈值 0.00001 以找到正确的错误值，但现在 0.03 和 0.02 的期望值的最后一次迭代的输出值介于 0.023 和 0.027 之间，这还不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:11:23.587

对于您的错误值停止阈值，您应该在一个时期（所有数据集的每个错误的总和）上计算错误，而不仅仅是数据集中的一个成员。这样，您将不得不增加错误阈值的值，但这将迫使您的神经网络对您的所有示例进行良好的分类，而不仅仅是对某些示例。

# go - 如何在 Google Go 中增加堆空间

> ID：14559487
> 
> 赞同：3
> 
> 时间：2013-01-28T09:57:52.223
> 
> 标签：go

我正在运行 Rober Hundt 的基准测试中的 Go 代码，以比较 Go 与其他语言的性能。当我从该基准运行 Go 代码时（请参阅[http://code.google.com/p/multi-language-bench/source/browse/trunk/src/#src%2Fhavlak%2Fgo](http://code.google.com/p/multi-language-bench/source/browse/trunk/src/#src%2Fhavlak%2Fgo)）我内存不足例外：

................运行时：内存不足：无法分配 1048576 字节块（1270808576 正在使用中）抛出：内存不足

我的问题是如何增加 Go 的内存空间。是否有可以相应设置的编译器的一些启动参数或一些标志？Go 源代码的 Makefile 文件没有显示任何内容......

谢谢，奥利弗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T23:54:50.070

如果您分享您的操作系统版本，如果它是 32 位和 64 位以及您的`go version`结果，我们可能会为您提供更多帮助。

*   32 位版本的 Go 存在已知的堆内存问题，一般不会在生产环境中使用。确保您在 64 位平台上使用 64 位版本的 Go。
*   Go 提示，将成为 Go 1.1 的 go 分支[已将最大堆空间从 8 GB 升级到 128 GB](https://codereview.appspot.com/6828055/)。与我交谈过的核心 Go 开发人员建议将 Go tip 用于内存密集型生产用途。
*   Go on Windows 使用较少，因此测试较少，这可能是一个错误。Go 在 Linux 和 OS X 上的尝试和真实性要小得多。
*   正如 peterSO 所提到的，Robert Hundt 的基准测试是有缺陷的——在这里阅读更多：[Profiling Go Programs](http://blog.golang.org/2011/06/profiling-go-programs.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T10:08:42.497

由于缺乏更多细节，人们只能疯狂猜测。

*   如果您运行的是 32 位 Go 版本，请尝试使用 64 位版本并使用最新版本。
*   如果可能，请使用 *nix 平台 - 它具有 IMO 更好的内存管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T12:03:12.563

罗伯特亨特的基准是有缺陷的。它不是 Go 的有效基准。阅读[Profiling Go Programs](http://blog.golang.org/2011/06/profiling-go-programs.html)了解详情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:11:47.777

对于那些可能感兴趣的人，我给先生发了一封邮件。hunt 自己询问是否有一些（未记录的）编译器开关可以以某种方式调整或参数化堆大小。这是因为我首先错误地认为这样的开关必须存在，但没有记录。在这里回复我的帖子的人似乎也不知道。我想我对 jvm 的工作方式“受到了太多启发”......

无论如何，他建议尝试不同的编译器（基于 gcc 的编译器或基于 plan-9 的编译器），因为其中一种可能比另一种更好。然后在 64 位机器上尝试，当然。

他还为我指出了一些关于 Go 的内存管理的好文章：http: [//lwn.net/Articles/428100/](http://lwn.net/Articles/428100/)

但是不，没有编译器开关可以处理内存设置。

问候，奥利弗

# javascript - 悬停时使用 javascript 和 html 的工具提示

> ID：14559489
> 
> 赞同：2
> 
> 时间：2013-01-28T09:57:59.550
> 
> 标签：javascript, jquery, html, tooltip

JS函数：

```
function DisplayToolTip() {
    document.getElementById('divToolTip').style.left = window.event.x;
    document.getElementById('divToolTip').style.top = window.event.y;
    document.getElementById('divToolTip').style.visibility = 'visible';
}

function HideToolTip() {
    document.getElementById('divToolTip').style.visibility = 'hidden';
} 
```

HTML：

```
<span id="spanName" style="font-weight: bold;border: solid 2px red;" onmouseover="javascript:DisplayToolTip();" onmouseout="javascript:HideToolTip();">
    THIS IS THE SPAN
</span>

<div id="divToolTip" style="position: absolute; visibility: hidden; z-index: 20; background-color: white; border: solid 1px Blue;">
    This is ToolTip Text
</div> 
```

有了这个，我得到了一个 JS 错误`window.event.x is not defined`。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:23:45.150

你应该在这个方法中使用 jQuery

```
jQuery(".abc").mousedown(function(e){ 
        jQuery('#divToolTip').css('top',(e.pageY)+'px');
        jQuery('#divToolTip').css('left',(e.pageX)+'px');
        jQuery('#divToolTip').css('visibility', 'visible');
}); 
```

# php - 从数组中提取项目

> ID：14559490
> 
> 赞同：-3
> 
> 时间：2013-01-28T09:58:19.630
> 
> 标签：php, arrays

我希望能够从 PHP 中的这个数组中提取 [HostName] 的输出。谢谢！

```
Array
(
    [Protocol] => 17
    [HostName] => [HG] JAILBREAK #1 - HeLLsGamers.com | 30+ LR's | FastDL
    [Map] => ba_jail_hellsgamers_fx6
    [ModDir] => cstrike
    [ModDesc] => Counter-Strike: Source
    [AppID] => 240
    [Players] => 12
    [MaxPlayers] => 64
    [Bots] => 0
    [Dedicated] => d
    [Os] => l
    [Password] => 
    [Secure] => 1
    [Version] => 1.0.0.75
    [GamePort] => 27015
    [ServerID] => -682722125
    [GameTags] => HLstatsX:CE,alltalk,bunnyhopping,cool,drugs,free,gameme,gang,hellsgamers,hg,increased_maxplayers,jail,jailbr,nostats,startmoney
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:01:06.303

像这样：

```
echo $Array[HostName]; // output: [HG] JAILBREAK #1 - HeLLsGamers.com | 30+ LR's | FastDL 
```

`$Array`您在此处打印和复制的数组在哪里。

我建议你从[php.net](http://php.net)开始阅读- 因为这是你能做的最基本的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:02:41.797

那是最简单的问题…………就用这个

```
echo $Your_array[HostName]; 
```

# php - 如何使用 datepicker 使未来的日期不可用

> ID：14559494
> 
> 赞同：0
> 
> 时间：2013-01-28T09:58:31.727
> 
> 标签：php, javascript, datepicker

我正在使用网络上的日期选择器 jsDatePick.jquery.min.1.3。它可以 100% 工作，但我如何将日期限制在今天或更早，所以明天无法选择。

脚本代码如下，调用 jsDatePick.jquery.min.1.3.js 进行处理。

```
<script type="text/javascript">
    window.onload = function(){
        new JsDatePick({
            useMode:2,
            target:"collectdate",
            dateFormat:"%Y-%m-%d",
            yearsRange:[2013,2020],
            */
            /*
            cellColorScheme:"beige",
            dateFormat:"%m-%d-%Y",
            imgPath:"img/",
            weekStartDay:1*/
        });
    };
</script> 
```

任何援助将不胜感激。如果您需要 js 文件语法，请告诉我，这是一个相当大的文件，因此无法在此问题上放置太多代码。

一如既往地感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:07:19.560

对所需功能使用“limitToToday”选项：

```
<script type="text/javascript">
window.onload = function(){
    new JsDatePick({
        limitToToday:true,
        useMode:2,
        target:"collectdate",
        dateFormat:"%Y-%m-%d",
        yearsRange:[2013,2020],
        */
        /*
        cellColorScheme:"beige",
        dateFormat:"%m-%d-%Y",
        imgPath:"img/",
        weekStartDay:1*/
    });
};
</script> 
```

# selenium - sendKeys() 不适用于 HtmlUnitDriver

> ID：14559498
> 
> 赞同：1
> 
> 时间：2013-01-28T09:58:44.717
> 
> 标签：selenium, webdriver, selenium-webdriver

我有这个代码

```
public static void switchUser(HtmlUnitDriver driver, String uid) {

    WebElement username = driver.findElement(By.id("principal_uid"));        
    username.sendKeys(uid); 
```

当我使用它 FirefoxDriver 时，这工作得很好，但是因为我将它更改为 HtmlUnitDriver，它就停止了。我的问题有两个方面：

1.  `SendingKeys()`根本不填写用户名字段。调用`username.getText()`返回空白。
2.  我需要按 Enter 键来完成 sendKeys，这对 HtmlUnitDriver 来说似乎很难。打电话`username.sendKeys(Keys.RETURN);`给`NullPointerException`.

告诉我一个解决这个问题的方法。可能是因为用户名字段触发了 onChange javascript？

# php - 如何在 cake php 中访问组件中的参数？

> ID：14559499
> 
> 赞同：1
> 
> 时间：2013-01-28T09:58:46.387
> 
> 标签：php, cakephp, cakephp-2.1, cakephp-1.2

访问`$this->params`和`$this->data`组件。

```
class LoginComponent extends Object {
   /*  */
   public function login() {   
      pr($this->params);
      pr($this->data);
   }
} 
```

我在 cake **v1.2**中使用它。我想知道**v1.2**和**v2.1**中的解决方案。请给我一个建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T10:23:00.550

看看你的库中的一些组件。我知道这适用于 Cake 2.x，而不是 1.2.x。*更新：正如[评论](https://stackoverflow.com/questions/14559499/how-to-access-params-in-components-in-cake-php/14559887#comment20313752_14559887)中提到的[标记](https://stackoverflow.com/users/461173/mark)，这对于 1.x 版本是一样的。*

例如，当我打开时，`SecurityComponent`我会发现一个名为`startup()`. 该方法将自身定义为：

```
public function startup(Controller $controller) {
     //Rest of code goes here
} 
```

如您所见，它们`import`是 Controller 对象。您现在可以访问 Controlelr 方法和变量。因为您可能知道：`$this`调用时`$this->data`指的是`Controller`.

因此，如果我将其存储`$controller`在组件中调用的受保护变量`$_Controller`中，我可以轻松访问数据和参数，如下所示：

```
# CakePhp 2.x
$this->_Controller->request->data;
$this->_Controller->request->params;

# CakePhp 1.x
$this->_Controller->data;
$this->_Controller->params; 
```

也看看[这个答案](https://stackoverflow.com/questions/5983633/cakephp-component-this-controller-modelclass)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:25:07.573

通过路由器检查： `Router::getParams();`

# qt - PyQt 和 matplotlib

> ID：14559500
> 
> 赞同：3
> 
> 时间：2013-01-28T09:58:47.913
> 
> 标签：qt, matplotlib, pyqt

`plt.show()`我从 PyQt 应用程序调用 matplotlib 函数。我总是有警告：

```
QCoreApplication::exec: The event loop is already running 
```

似乎 matplotlib 调用了一个已经启动的新 QCoreApplication 我该怎么做才能删除这个警告？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-06T10:55:02.873

如果您不生成多个绘图，最简单的方法是`plt.ion()`在初始化图形之前使用。消除`plt.show()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-18T21:53:49.530

我遇到了类似的问题。根本原因是您的 PyQt 应用程序使用了 Qt（这当然是显而易见的）。但是您尝试制作的 matplotlib 图形也使用 Qt。要知道，matplotlib 图有自己的窗口，它源自 Qt。所以有冲突。

**方法一**

有几种方法可以解决它。这里解释了一种方法：

[您自己的 PyQt4 GUI 中的 Matplotlib 动画](https://stackoverflow.com/questions/36665850/matplotlib-animation-inside-your-own-pyqt4-gui/36669876#36669876)

该链接将您引向我几天前在线发布的 stackoverflow 问题。我试图从我自己的 PyQt 应用程序中启动 matplotlib 动画。

**方法2** 这里解释第二种方法：

[无法移动 Matplotlib 绘图窗口并使用红色 X 按钮退出它](https://stackoverflow.com/questions/36675269/cannot-move-matplotlib-plot-window-and-exit-it-using-red-x-button/36704822#36704822)

我希望这对你有所帮助。如果您有任何问题，请随时问我。我很乐意提供帮助。

# php - 通过密码使用 Redis 和 Laravel

> ID：14559503
> 
> 赞同：3
> 
> 时间：2013-01-28T09:58:50.853
> 
> 标签：php, redis, laravel, appfog

我有一个使用 Laravel 编写的应用程序。我在本地开发时一直在使用 Redis。我现在已经将我的项目移到了运行 redis 服务的 AppFog 上。似乎他们需要密码（已提供），但我不确定如何将密码添加到 database.php 中的 redis 配置中。

当我尝试在没有密码的情况下使用 redis 时，我收到“Redis 错误：不允许操作”。快速浏览一下，似乎这就是未提供密码时发生的情况。

有人知道在使用 Laravel 连接到 Redis DB 时如何提供密码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T22:27:29.573

以防万一有同样问题的人。这是使用密码启用 laravel redis 连接的代码。

[https://gist.github.com/bslima/6207163](https://gist.github.com/bslima/6207163)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:36:18.757

Laravel 似乎没有按照您提到的方式执行此操作的方法。但是，您似乎应该能够像使用任何其他方法一样使用 run 方法来执行 redis auth 命令。您将在创建连接后执行此操作。

Redis 在连接时不进行身份验证，它实现了一个命令来处理身份验证，如[http://redis.io/commands/auth中所述](http://redis.io/commands/auth)

至于将密码存储在配置文件中，也可能是向配置中添加一个变量并像引用任何其他配置变量一样引用它。

# c# - 通过 Java 客户端连接到 WCF 服务

> ID：14559505
> 
> 赞同：1
> 
> 时间：2013-01-28T09:58:53.360
> 
> 标签：c#, java, wcf

我有 WCF 服务，它有 2 个端点：wsHttpBinding 和 basicHttpBinding。我可以通过 C# 客户端连接到每个端点。

我的 Wcf 服务配置

```
 <service behaviorConfiguration="App.ServiceBehavior"
          name="MyService">
        <endpoint address="/ws" binding="wsHttpBinding" bindingConfiguration="httpBindingForWs"
           contract="Namespace.IMyService">
          <identity>
            <dns value="127.0.0.1" />
          </identity>
        </endpoint>
        <endpoint address="/basic" binding="basicHttpBinding" bindingConfiguration="httpBindingForBasic"
            contract="Namespace.IMyService">
          <identity>
            <dns value="127.0.0.1" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://127.0.0.1:12000/MyService" />
          </baseAddresses>
        </host>
      </service> 
```

我可以在 Java 中生成 wsdl。你能给我看示例代码吗，我如何在 Java 中使用 basicHttpBinding？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T10:01:53.417

您可以使用 Java 使用 Web 服务，有不同的框架可以让您的工作更轻松，例如[AXIS](http://axis.apache.org/axis/)和[Apache CXF](http://cxf.apache.org/)

查看以下文章以获取更多相同的指示

[使用 Java 使用 WCF 服务](http://www.hoonzis.com/consuming-wcf-services-with-java-client/)

# php - 启用 url 重写后在 joomla 3.0 中进行 URL 重写 YES 但给出错误

> ID：14559509
> 
> 赞同：4
> 
> 时间：2013-01-28T09:59:00.517
> 
> 标签：php, .htaccess, joomla, url-rewriting, joomla3.0

我已经重命名了**.htaccess**文件，在我的本地主机上，它工作正常，但在网上它会抛出错误：

```
404 - File or directory not found.

The resource you are looking for might have been removed, had its name changed, or is temporarily unavailable. 
```

这是我的**.htaccss**文件代码：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
RewriteRule .* index.php [F]

#RewriteBase /

RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

RewriteCond %{REQUEST_URI} !^/index\.php

RewriteCond %{REQUEST_URI} /component/|(/[^.]*|\.(php|html?|feed|pdf|vcf|raw))$ [NC]

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule .* index.php [L] 
```

我的网站是 abcxyz.co.uk

我将 Joomla 代码`www/root`与**.htaccess**文件放在文件夹中。

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:20:39.597

将 htaccess.txt 重命名为 .htaccess 还从全局配置中设置 Use URL rewriting = yes

和你的 htaccess 像这样：-

```
## Mod_rewrite in use.

RewriteEngine On

## Begin - Rewrite rules to block out some common exploits.
# If you experience problems on your site block out the operations listed below
# This attempts to block the most common type of exploit `attempts` to Joomla!
#
# Block out any script trying to base64_encode data within the URL.
RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
# Block out any script that includes a <script> tag in URL.
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL.
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL.
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Return 403 Forbidden header and show the content of the root homepage
RewriteRule .* index.php [F]
#
## End - Rewrite rules to block out some common exploits.

## Begin - Custom redirects
#
# If you need to redirect some pages, or set a canonical non-www to
# www redirect (or vice versa), place that code here. Ensure those
# redirects use the correct RewriteRule syntax and the [R=301,L] flags.
#
## End - Custom redirects

##
# Uncomment following line if your webserver's URL
# is not directly related to physical file paths.
# Update Your Joomla! Directory (just / for root).
##

 RewriteBase /

## Begin - Joomla! core SEF Section.
#
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
#
# If the requested path and file is not /index.php and the request
# has not already been internally rewritten to the index.php script
RewriteCond %{REQUEST_URI} !^/index\.php
# and the request is for something within the component folder,
# or for the site root, or for an extensionless URL, or the
# requested URL ends with one of the listed extensions
RewriteCond %{REQUEST_URI} /component/|(/[^.]*|\.(php|html?|feed|pdf|vcf|raw))$ [NC]
# and the requested path and file doesn't directly match a physical file
RewriteCond %{REQUEST_FILENAME} !-f
# and the requested path and file doesn't directly match a physical folder
RewriteCond %{REQUEST_FILENAME} !-d
# internally rewrite the request to the index.php script
RewriteRule .* index.php [L]
#
## End - Joomla! core SEF Section. 
```

如果仍然有任何问题，此链接将很有帮助[http://forum.joomla.org/viewtopic.php?p=2689903](http://forum.joomla.org/viewtopic.php?p=2689903)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T18:56:19.997

`RewriteBase /`在 .htaccess 文件中取消注释。（删除行前的#）：

```
#RewriteBase / 
```

应该成为

```
RewriteBase / 
```

# asp.net-mvc - NServiceBus：没有为消息指定目的地：

> ID：14559510
> 
> 赞同：5
> 
> 时间：2013-01-28T09:59:04.220
> 
> 标签：asp.net-mvc, nservicebus

我刚刚创建了这个链接中指定的新 NServiceProject ：

[http://support.nservicebus.com/customer/portal/articles/856687-getting-started---creating-a-new-project](http://support.nservicebus.com/customer/portal/articles/856687-getting-started---creating-a-new-project)

但运行项目后，我收到以下错误

`"No destination specified for message(s):".`

我不确定我哪里出错了。

我创建了 ASP.NET MVC 类型的项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-06-12T18:45:47.160

NServiceBus“没有为消息指定目的地：”通常是由于路由配置丢失或定义不正确造成的。

为了让 NServiceBus 为消息找到正确的目标队列，路由配置必须定义传递映射。可以为命令、类型或事件定义路由。

[https://docs.particular.net/nservicebus/messaging/routing](https://docs.particular.net/nservicebus/messaging/routing)

以下片段显示了 NServiceBus 6 的路由示例：

```
var transport = endpointConfiguration.UseTransport<SqlServerTransport>();
var routerConfig = transport.Routing();
routerConfig.RouteToEndpoint(
    assembly: typeof(MyMessage).Assembly,
    destination: "my.nservicebus.queue"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-27T11:46:51.697

您应该指定端点配置：

```
<UnicastBusConfig ForwardReceivedMessagesTo="audit">
<MessageEndpointMappings>
  <add Messages="InternalMessages.Commands.SendOrderConfirmationEmail, InternalMessages" Endpoint="ExternalGateway.Salesforce" />
</MessageEndpointMappings> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:52:52.187

我不确定你可能做了什么，但听起来你在某个地方错过了一步。我按照教程创建了一个工作副本供您参考，希望它能帮助您识别问题。

[https://github.com/sliedig/NServiceBusStudio.Amazon.Demo](https://github.com/sliedig/NServiceBusStudio.Amazon.Demo)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T10:39:00.643

这是因为您错过了添加 NServiceBus 主机端点的步骤：

继续创建另一个名为 OrderProcessing 的端点作为 NServiceBus 主机。

# c# - 如何将 C# 标头转换为 delphi

> ID：14559516
> 
> 赞同：0
> 
> 时间：2013-01-28T09:59:18.193
> 
> 标签：c#, delphi, pinvoke

我怎样才能用 Delphi 代码写这个？

```
[DllImport("FT_ND_API.dll")]
public static extern uint epas_CreateContext(out IntPtr hContextHandle, 
    uint ulFlags, uint ulApiVersion);

[DllImport("FT_ND_API.dll")]
public static extern uint epas_OpenDevice(IntPtr hContextHandle, 
    uint ulQueryType, IntPtr pQueryData);

[DllImport("FT_ND_API.dll")]
public static extern uint epas_GetProperty(IntPtr hContextHandle, uint ulFlags, 
    IntPtr pRefData, byte[] pPropData, uint ulPropSize);

[DllImport("FT_ND_API.dll")]
public static extern uint epas_CreateDir(IntPtr hContextHandle, uint ulFlags, 
    String pucName, String pucGuid, ref WDirInfo pDirInfo, uint ulSizeOfDirInfo); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T10:04:39.853

像这样：

```
function epas_CreateContext(
  out hContextHandle: NativeInt; 
  ulFlags: Cardinal; 
  ulApiVersion: Cardinal
): Cardinal; stdcall; external 'FT_ND_API.dll';

function epas_OpenDevice(
  hContextHandle: NativeInt; 
  ulQueryType: Cardinal; 
  pQueryData: IntPtr
): Cardinal; stdcall; external 'FT_ND_API.dll';

function epas_GetProperty(
  hContextHandle: NativeInt; 
  ulFlags: Cardinal; 
  pRefData: NativeInt; 
  pPropData: PByte; 
  ulPropSize: Cardinal
): Cardinal; stdcall; external 'FT_ND_API.dll';

function epas_CreateDir(
  hContextHandle: NativeInt; 
  ulFlags: Cardinal; 
  pucName: PAnsiChar; 
  pucGuid: PAnsiChar; 
  var pDirInfo: WDirInfo; 
  ulSizeOfDirInfo: Cardinal
): Cardinal; stdcall; external 'FT_ND_API.dll'; 
```

笔记：

*   `IntPtr`是一个指针大小的整数。在德尔福就是`NativeInt`.
*   `uint`是一个无符号的 32 位整数，`Cardinal`在 Delphi 中。
*   `string`编组为 C 字符串，指向以空字符结尾的字符串的指针。由于没有`CharSet`指定，所以使用默认的`CharSet.Ansi`。那是`PAnsiChar`在德尔福。
*   指定否`CallingConvention`，因此`CallingConvention.StdCall`应用默认值。所以，那是`stdcall`在德尔福。
*   是`byte[]`一个字节数组。这被编组为指向数组第一个字节的指针。所以，`PByte`在德尔福。
*   您还需要翻译`WDirInfo`为 Delphi。看起来它可能是一个结构。

使用 C++ 头文件而不是 p/invoke 声明可能会更好。最好从接口定义的原始来源开始工作。

# php - 使用 phpize 构建 PHP 扩展时如何设置构建优化级别

> ID：14559517
> 
> 赞同：0
> 
> 时间：2013-01-28T09:59:17.527
> 
> 标签：php, c++, php-extension

我正在使用[这个示例](http://php.webtutor.pl/en/2011/07/07/how-to-create-php-extensions-in-c-part-i-adding-simple-function/)在 C++ 中编写一个 PHP 扩展。

在 Visual Studio 项目“属性 -> c/c++ -> 优化”中，我可以设置速度优化（O2）或完全优化（Ox）。

正如我想象的那样，在linux中运行后：

```
phpize 
./configure 
```

有什么建议应该在哪里设置优化参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:16:07.227

您可能可以（我没有尝试，但通常情况下是这样）在运行配置脚本时向它添加额外的编译器标志。首先导出您需要的标志并重新运行常规编译步骤：

```
export CFLAGS="-O2"
# Just to make sure that the old files are removed:
phpize --clean
phpize
./configure
make 
```

`-O2`显然，您也可以使用其他优化级别来代替。

# sql - SQL-Server：使用整数作为 id（主键）创建表，但没有 autoid/autoincrement？

> ID：14559518
> 
> 赞同：0
> 
> 时间：2013-01-28T09:59:18.333
> 
> 标签：sql, multithreading, sql-server-2008, tsql, sql-server-2005

问题：

在 SQL-Server 中，是否可以将整数（不是 GUID）作为 ID（主键），但**不使用 AutoID/AutoIncrement**，这样我可以在需要时手动设置 ID，而不会遇到麻烦多线程环境（Web 应用程序）？

如果是这样，如果我必须连续插入两行以上，并且没有给出主键，我该如何设计生成插入 ID 的函数，以便它是线程安全的，我不会得到相同的2+ 插入/记录的 id ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:11:12.563

我不确定您是否不能为此使用增量标识，但您可以使用 UNIQUEIDENTIFIER 模拟唯一键。

```
PRINT CONVERT( BIGINT, CONVERT( VARBINARY, NEWID() ) ) 
```

基本上，这向您展示了如何将 uniqueidentifier ( `NEWID()`) 转换为 bigint。因此，您将能够实现您想要的结果，但将其放入函数中。

# python - 如何中止 python 实例创建并继续脚本？

> ID：14559527
> 
> 赞同：0
> 
> 时间：2013-01-28T09:59:56.007
> 
> 标签：python, instantiation

我实现了一个 python 类，其实例存储在一个 h5 文件中。因此，`__init__()`这个类的 -function 首先检查这个 h5 文件是否存在于以前的模拟中，如果存在，则引发一个 raw_input 要求覆盖这个文件（然后文件被新实例覆盖），然后一个引发错误。

我正在寻找一种方法，当这个文件（以及实例）已经存在并且在`__init__()`-method 中注明时，我不会在脚本停止后引发错误，而是“取消”启动的实例化和脚本只是继续......有没有一种干净的方法来实现这种“取消和ocntinue”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:06:03.843

正确的做法*是*引发异常。默认情况下，异常将从 传播`__init__`到调用它的任何人，并最终一直传播到顶部，停止脚本。

但是，如果您想处理该异常并继续，请在您想继续的任何级别使用`try`/`catch`块，如[处理异常](http://docs.python.org/2/tutorial/errors.html#handling-exceptions)中所述。

例如：

```
class ThingyAlreadyExistsError(RuntimeError):
    pass

class Thingy(object):
    def __init__(self, pathname):
        if os.path.exists(pathname):
            yn = raw_input('{} already exists. Overwrite (y/N)?'.format(pathname))
            if yn.lower != 'y':
                raise ThingyAlreadyExistsError(pathname)
        # finish initialization

thingies = []
for pathname in pathnames:
    try:
        thingy = Thingy(pathname)
    except ThingyAlreadyExistsError:
        continue
    thingies.append(thingy) 
```

如果您想在到达之前捕获它`__init__`，您可以随时在`__new__`方法、`@classmethod`工厂函数或`for`循环中进行检查，在这种情况下，您甚至不需要异常；只是不要初始化。但是没有什么能阻止你在里面提出异常`__init__`。

# php - 上传 pdf 时出现错误 500

> ID：14559528
> 
> 赞同：0
> 
> 时间：2013-01-28T09:59:59.927
> 
> 标签：php, upload, runtime-error

我的网站在上传 pdf 时抛出错误 500。

我已经进入 php.ini 页面并更改了

```
file_uploads = On
upload_max_filesize = 2m 
```

至

```
file_uploads = On
upload_max_filesize = 100m 
```

然而它仍然抛出 500 错误。我不知道为什么我的服务器不允许这样做。

我还应该说明我正在测试的文件只有 50kb。

编辑：

* * *

这个错误的根源导致了另一个我有但还没有准备好弄清楚的问题。无论如何，它来了。

我让用户验证他们上传的 pdf 的内容，然后我想将它传递到另一个页面以将文件保存到本地驱动器。

日志抛出的错误是

```
PHP Parse error:  syntax error, unexpected ';' in updatePDF-check.php on line 36 
```

第36行如下

```
echo "<input type = 'hidden' name = 'uploadedFile' value = '".$_FILES['file']."'">; 
```

这导致了这个问题。我应该如何让这个页面显示文件，然后将它传递到下一页以便保存？

双重编辑，修正了上一行中的错字，但我相信我的问题仍然存在

```
echo "<input type = 'hidden' name = 'uploadedFile' value = '".$_FILES['file']."'>"; 
```

值得一提的是，它`display_errors`在 php.ini 文件中也被关闭了。所以我也把它打开了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:12:32.430

您的解析错误将通过以下方式修复：

```
echo "<input type = 'hidden' name = 'uploadedFile' value = '".$_FILES['file']."'>"; 
```

你的 > 离右边太远了 :)

# javascript - 如何在 dGrid 中设置行的样式

> ID：14559530
> 
> 赞同：0
> 
> 时间：2013-01-28T10:00:03.330
> 
> 标签：javascript, dojo, dgrid

如何设置 dGrid 的特定行的样式？

我有一组要突出显示的行的 id，但我不知道如何突出显示这些行。这是一个有数千条记录的 onDemandGrid，所以我不能只遍历行并突出显示。

我尝试将 renderCell 方法应用于列，然后使用 grid.row( data ) 获取行，但我不认为在调用 renderCell 时已附加单元格。

```
renderCell = function( object, data, cell ) 
{
    // style row
    var row = squadronGrid.row( data );
    console.log( row.element ); // shows as undefined! 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:20:33.797

知道了！Aspect.after 救援...

```
// highlight thumbed rows
aspect.after( myGrid, 'renderRow', function( row, args )
{
    if( rowsToHighlight.indexOf( args[0].id ) != -1 ) // NB. rowsToHighlight is an array of ids
    {
        domClass.add( row, 'dgrid-row-thumbed' );
    }   
    return row;
} ); 
```

# iphone - 如何实现前一个第二天按钮来更改iphone中的日期

> ID：14559534
> 
> 赞同：0
> 
> 时间：2013-01-28T10:00:10.627
> 
> 标签：iphone, objective-c, datepicker, nsdate, nsdateformatter

![提供截图](../Images/fd55660ae695ae4e61ef0fb03bc8f253.png)

如上页所示，我在标签上有一个日期（默认为当前日期）。格式为 MM dd。

我有两个按钮可以更改第二天和前一天的日期。

我应该如何使用这些按钮来实现更改日期？

任何教程/建议（我不认为 datepicker 参与其中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:04:28.357

使用这两个函数获取上一个日期和下一个日期，然后使用返回的日期并仅使用月份和年份显示在标签上。

```
+ (NSDate *) getDate:(NSDate *)fromDate daysAgo:(NSUInteger)days
{
    NSDateComponents *dateComponents = [[NSDateComponents alloc] init];
    dateComponents.day = -1*days;
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDate *previousDate = [calendar dateByAddingComponents:dateComponents
                                                     toDate:fromDate
                                                    options:0];
    [dateComponents release];
    return previousDate;
}

+ (NSDate *) getDate:(NSDate *)fromDate daysAhead:(NSUInteger)days
{
    NSDateComponents *dateComponents = [[NSDateComponents alloc] init];
    dateComponents.day = days;
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDate *previousDate = [calendar dateByAddingComponents:dateComponents
                                                     toDate:fromDate
                                                    options:0];
    [dateComponents release];
    return previousDate;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T10:08:41.873

试试这些方法

```
- (NSDate *) dateByAddingDays: (int) dDays : (NSDate*)presntdate
{
NSTimeInterval aTimeInterval = [presntdate timeIntervalSinceReferenceDate] + 86400 * dDays;
NSDate *newDate = [NSDate dateWithTimeIntervalSinceReferenceDate:aTimeInterval];
return newDate;
}

- (NSDate *) dateBySubtractingDays: (int) dDays : (NSDate*)presntdate
{
return [self dateByAddingDays: dDays*-1 :presntdate];
} 
```

# asp.net - APNS 在后台使用 ASP .net 服务器

> ID：14559541
> 
> 赞同：0
> 
> 时间：2013-01-28T10:00:36.993
> 
> 标签：asp.net, ios6, apple-push-notifications

我是实施推送通知服务的新手。我正在实现一个带有推送通知服务的应用程序。在服务器端，我们使用 .net 编码并使用月球应用程序代码向设​​备发送通知。我的问题是当我们托管它时使用开发人员证书（p12 文件）时我收到通知我无法获取设备。我们还使用生产（p12 文件）证书对此进行了测试。事件虽然我没有收到通知。你们能建议我在托管之前我们需要的流程实现和要求吗？

谢谢你，塞卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:10:26.580

确保以下步骤正确。

```
var push = new PushNotification(false, "p12 file location","password");
                               //true-sandbox and false-production. 
```

如果不是以上则说明 Ur p12 认证有问题。

# activemq - 将 Grizzly 与 JMS/ActiveMQ 一起使用

> ID：14559544
> 
> 赞同：0
> 
> 时间：2013-01-28T10:00:48.440
> 
> 标签：activemq, spring-integration, grizzly

我正在从事概念验证项目，旨在探索将工作从 NIO 服务器卸载到消息队列以进行后端处理的好处。我将 Grizzly 用于 NIO 样板文件，将 Spring Integration 用于消息传递（使用 JMS/ActiveMQ 作为消息传递实现）。基本上，我想做的是：

客户端连接 -> 服务器 -> 服务器创建“待完成的工作”消息 -> JMS/ActiveMQ

在 ActiveMQ 消息队列上，许多“工作人员”将积极地使用这些消息，处理它们，并将结果放在另一个队列中。服务器正在侦听该队列上的“响应消息”，一旦接收到消息，它将执行以下操作：

响应队列->服务器将消息序列化为客户端可以理解的内容->返回给客户端

我的直接问题是我对 Grizzly 缺乏了解，特别是如何将事件处理与消息传递分离。服务器必须以这样的方式创建待完成的消息，当回复消息从工作人员返回时，服务器知道客户端是谁（在 Grizzly 中找到相关的 FilterChainContext）以便发送 tcp信息。

我也许可以使用 FilterChainContext.getAddress() 并将其放在工作消息上，但我不确定如何编写一个方法，该方法采用对等地址和消息并以某种方式发送 (FilterChainContext.write()) 时它没有 FilterChainContext。

我现在正在考虑保留 Map 的想法，但我对这种方法感到担忧，因为如果在序列化或处理期间消息发生问题，我不希望地图中的内容过时。

欢迎提出想法和建议。

-迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:54:11.253

您可以使用 TCP 适配器/网关（可以选择使用 NIO）以及自定义（反）序列化程序。如果你必须使用 Grizzly，你可以编写一个服务器连接工厂实现。在出站适配器（或入站网关）的情况下，端点注册为“TcpListener”（使用 connectionId），并且 SI 消息包含`IpHeaders.CONNECTION_ID`用于确定哪个连接获得回复的标头。当连接关闭时，它会被取消注册（从地图中删除）。

# python - 神经网络可以识别屏幕并复制一组有限的动作吗？

> ID：14559547
> 
> 赞同：0
> 
> 时间：2013-01-28T10:00:52.077
> 
> 标签：python, neural-network, image-recognition, online-algorithm

我了解到，神经网络可以复制任何功能。

通常，神经网络被输入一组描述符给它的输入神经元，然后在它的输出神经元上给出一个特定的分数。我希望我的神经网络能够识别屏幕上的某些行为。屏幕上的物体已经经过预处理并且清晰可见，因此识别应该不是问题。

是否可以使用神经网络来识别屏幕的像素化图片并在此基础上做出决策？训练数据的数量当然是巨大的。有没有办法通过在线监督学习来教授人工神经网络？

编辑：因为评论者说编程问题太笼统了：我想先在 python 中实现它，看看它是否有效。如果有人能指出我可以使用 python 进行在线学习的资源，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:02:35.473

我会建议

[http://www.neuroforge.co.uk/index.php/getting-started-with-python-a-opencv](http://www.neuroforge.co.uk/index.php/getting-started-with-python-a-opencv) [http://docs.opencv.org/doc/tutorials/ml/table_of_content_ml/table_of_content_ml.html](http://docs.opencv.org/doc/tutorials/ml/table_of_content_ml/table_of_content_ml.html) [http： //blog.damiles.com/2008/11/the-basic-patter-recognition-and-classification-with-opencv/](http://blog.damiles.com/2008/11/the-basic-patter-recognition-and-classification-with-opencv/) [https://github.com/bytefish/machinelearning-opencv](https://github.com/bytefish/machinelearning-opencv)

openCV 基本上是一个图像处理库，但也有一些令人惊叹的帮助类，您可以将它们用于几乎任何任务。它的机器学习模块非常易于使用，您可以通过源代码查看有关每个功能的解释和背景理论。

您还可以使用纯 Python 机器学习库，例如： [http ://scikit-learn.org/stable/](http://scikit-learn.org/stable/)

但是，在您将屏幕上的数据（我假设那是像素？）输入到您的 ANN 或 SVM 或您选择的任何 ML 算法之前，您需要对您的数据执行“特征提取”。（这是屏幕上的对象）

特征提取可以被认为是在屏幕上表示相同的数据，但数字更少，因此我可以提供给我的 ANN 的数字更少。在找到适合您的特定场景的组合之前，您需要尝试不同的功能。一个样本可能看起来像这样：

[x1,y1,x2,y2...,col]

这基本上是代表对象所在区域的边缘点列表。一种 ROI（感兴趣区域）并执行 egde 检测、颜色检测并提取任何其他相关特征。重要的是，现在您的所有对象，它们的形状/颜色信息都由许多这样的列表表示，每个检测到的对象都有一个。

这是可以作为输入提供给神经网络的数据。但是您必须根据您的具体问题陈述定义一些有意义的输出参数，然后才能训练/测试您的系统。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:32:53.517

这并不完全正确。

一个 3 层前馈 MLP 理论上可以复制任何 CONTINUOUS 函数。

如果存在不连续性，则需要第 4 层。

由于您正在处理像素化屏幕等，您可能需要考虑第四层。

最后，如果您正在查看圆形等，那么径向基函数 (RBF) 网络可能更合适。

# .htaccess - Htaccess 从子域重定向到新域，但也将索引重定向到子目录

> ID：14559548
> 
> 赞同：0
> 
> 时间：2013-01-28T10:00:55.307
> 
> 标签：.htaccess

我正在将子域（每个子域中都有一个 htaccess）重定向到一个新域，但我想将索引页面重定向到新域上的一个子目录。

`subdomain.example.com/index.php`至`example.com/folder/index.php`

*   这仅适用于其余子域的索引页面

`subdomain.example.com`至`example.com`

*   这适用于所有内容页面，而不是索引页面。

我不能让两者同时重定向。有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:04:47.763

尝试将这些规则放在您的 .htaccess 文件中：

```
RewriteEngine on
Options +FollowSymlinks -MultiViews

# handles http redirect sub-dir
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{SERVER_PORT} =80
RewriteCond %{HTTP_HOST} ^(.+\.)?mysite\.com$ [NC] 
RewriteRule ^/?(.*)$ http://www.anotheriste.com/feed?v=$1 [R=301,L,QSA,NE]

# handles http redirect non sub-dir
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{SERVER_PORT} =80
RewriteCond %{HTTP_HOST} ^(.+\.)?mysite\.com$ [NC] 
RewriteRule ^/?(.*)$ http://www.anotheriste.com/$1 [R=301,L,QSA,NE]

# handles https redirect sub-dir
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{SERVER_PORT} =443
RewriteCond %{HTTP_HOST} ^(.+\.)?mysite\.com$ [NC] 
RewriteRule ^/?(.*)$ https://www.anotheriste.com/feed?v=$1 [R=301,L,QSA,NE]

# handles https redirect non sub-dir
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{SERVER_PORT} =443
RewriteCond %{HTTP_HOST} ^(.+\.)?mysite\.com$ [NC] 
RewriteRule ^/?(.*)$ https://www.anotheriste.com/$1 [R=301,L,QSA,NE]
R=301 will redirect with https status 301 
```

L 将制定最后一条规则

NE 用于无转义查询字符串

QSA 将附加您现有的查询参数

$1 是您的 REQUEST_URI

# validation - grails：如何验证命令对象中的单个字段

> ID：14559551
> 
> 赞同：4
> 
> 时间：2013-01-28T10:01:05.720
> 
> 标签：validation, grails

我想手动验证命令对象中的字段

我知道我可以通过以下方式获得字段的最大值（和最小值）：

```
MyDomain.constraints.myField.getAppliedConstraint('max').maxValue 
```

如何在“myField”上执行“验证”命令并获取错误对象？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T10:13:41.020

查看[grails 文档](http://grails.org/doc/latest/ref/Domain%20Classes/validate.html)。

您可以`validate()`在定义的属性列表上使用该方法：

```
if(!yourObject.validate(['myField'])) {
    yourObject.errors.each { 
        println it
    }
} 
```

# java - Windows Server 2012 上的 JavaService.exe

> ID：14559559
> 
> 赞同：2
> 
> 时间：2013-01-28T10:01:38.800
> 
> 标签：java, windows, windows-services, windows-server-2012, java-service-wrapper

我正在尝试在 Windows Server 2012 上使用 JavaService.exe ( [http://forge.ow2.org/projects/javaservice ) 将 Java 应用程序作为 Windows 服务运行。](http://forge.ow2.org/projects/javaservice)

我收到一般性错误，服务没有启动。在事件查看器中，我得到以下信息：

> 找不到来自源“XXX”的事件 ID 4097 的描述。引发此事件的组件未安装在您的本地计算机上，或者安装已损坏。您可以在本地计算机上安装或修复该组件。

任何想法如何在 windows server 2012 中将 java 作为 windows 服务运行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T15:15:33.797

我设法通过将 msvcr100.dll 文件从 Java 7 的 bin/ 目录复制到与 java 服务可执行文件相同的目录中来使其工作

# java - java.io.IOException：使用 BouncyCastle 关闭流

> ID：14559562
> 
> 赞同：0
> 
> 时间：2013-01-28T10:01:50.563
> 
> 标签：java, exception, stream, bouncycastle

我正在尝试使用 BouncyCastle 使用 PGPEncryption 加密文件。当我将加密数据格式化为 AsciiArmored 时，解密也可以正常工作。

但是当我禁用 AsciiArmored 时，它会生成大约 12kb 的文件 [加密格式]。我尝试用相同的代码解密相同的代码，现在抛出错误

```
java.io.IOException: Stream closed
at java.io.BufferedInputStream.getInIfOpen(Unknown Source)
at java.io.BufferedInputStream.available(Unknown Source)
at org.bouncycastle.openpgp.PGPUtil$BufferedInputStreamExt.available(Unknown Source)
at org.bouncycastle.bcpg.BCPGInputStream.available(Unknown Source)
at org.bouncycastle.bcpg.BCPGInputStream$PartialInputStream.available(Unknown Source)
at org.bouncycastle.bcpg.BCPGInputStream.available(Unknown Source)
at java.io.FilterInputStream.available(Unknown Source)
at org.bouncycastle.crypto.io.CipherInputStream.nextChunk(Unknown Source)
at org.bouncycastle.crypto.io.CipherInputStream.read(Unknown Source)
at org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)
at org.bouncycastle.openpgp.PGPEncryptedData$TruncatedStream.read(Unknown Source)
at java.io.InputStream.read(Unknown Source)
at org.bouncycastle.util.io.TeeInputStream.read(Unknown Source)
at org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)
at org.bouncycastle.openpgp.PGPCompressedData$1.fill(Unknown Source)
at java.util.zip.InflaterInputStream.read(Unknown Source)
at org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)
at org.bouncycastle.bcpg.BCPGInputStream$PartialInputStream.read(Unknown Source)
at org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)
at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
at sun.nio.cs.StreamDecoder.read(Unknown Source)
at java.io.InputStreamReader.read(Unknown Source)
at java.io.BufferedReader.fill(Unknown Source)
at java.io.BufferedReader.readLine(Unknown Source)
at java.io.BufferedReader.readLine(Unknown Source) 
```

测试类：

```
public void testDecrypt() throws Exception {
        this.pgpFileProcessor.setPassphrase(PASSPHRASE);
        this.pgpFileProcessor.setSecretKeyFileName(PRI_KEY_FILE);
        this.pgpFileProcessor.setAsciiArmored(false);

        this.pgpFileProcessor.setInputFileName(OUTPUT);
        this.pgpFileProcessor.setOutputFileName(TEMP_SG);
        InputStream is = this.pgpFileProcessor.decryptToStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(is));

        StringBuilder sb = new StringBuilder();

        String line;
        while ((line = br.readLine()) != null) {
            sb.append(line + "\n");
        }

        System.out.println(sb.toString());

        br.close();
        is.close();
    } 
```

实用类

```
public InputStream decryptToStream() throws Exception {
    FileInputStream in = new FileInputStream(this.inputFileName);
    FileInputStream keyIn = new FileInputStream(this.secretKeyFileName);
    InputStream inputStream = this.pgpUtils.decryptFile(in, keyIn, this.passphrase.toCharArray());
    in.close();
    keyIn.close();
    return inputStream;
} 
```

实际代码：

```
public InputStream decryptFile(InputStream in, InputStream keyIn, char[] passwd) throws Exception {
    InputStream decryptedData = null;

    Security.addProvider(new BouncyCastleProvider());
    in = org.bouncycastle.openpgp.PGPUtil.getDecoderStream(in);
    PGPObjectFactory pgpF = new PGPObjectFactory(in);
    PGPEncryptedDataList enc;

    Object o = pgpF.nextObject();
    if (o instanceof PGPEncryptedDataList) {
        enc = (PGPEncryptedDataList) o;
    } else {
        enc = (PGPEncryptedDataList) pgpF.nextObject();
    }

    Iterator<PGPPublicKeyEncryptedData> it = enc.getEncryptedDataObjects();
    PGPPrivateKey sKey = null;
    PGPPublicKeyEncryptedData pbe = null;

    while (sKey == null && it.hasNext()) {
        pbe = it.next();

        sKey = findPrivateKey(keyIn, pbe.getKeyID(), passwd);
    }

    if (sKey == null) {
        in.close();
        throw new IllegalArgumentException("Secret key for message not found.");
    }
    if (pbe == null) {
        in.close();
        throw new IllegalArgumentException("Encrypted Data is Malformed");
    }

    InputStream clear = pbe.getDataStream(new BcPublicKeyDataDecryptorFactory(sKey));

    PGPObjectFactory plainFact = new PGPObjectFactory(clear);

    Object message = plainFact.nextObject();

    if (message instanceof PGPCompressedData) {
        PGPCompressedData cData = (PGPCompressedData) message;
        PGPObjectFactory pgpFact = new PGPObjectFactory(cData.getDataStream());

        message = pgpFact.nextObject();
    }

    if (message instanceof PGPLiteralData) {
        PGPLiteralData ld = (PGPLiteralData) message;

        decryptedData = ld.getInputStream();
        /*
         * int ch; while ((ch = unc.read()) >= 0) { out.write(ch); }
         */

    } else if (message instanceof PGPOnePassSignatureList) {
        in.close();
        clear.close();
        throw new PGPException("Encrypted message contains a signed message - not literal data.");
    } else {
        in.close();
        clear.close();
        throw new PGPException("Message is not a simple encrypted file - type unknown.");
    }
    if (pbe.isIntegrityProtected()) {
        if (!pbe.verify()) {
            in.close();
            clear.close();
            throw new PGPException("Message failed integrity check");
        }
    }
    clear.close();
    in.close();
    return decryptedData;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:15:16.227

您正在关闭最后一行的流`decryptFile()`：

```
in.close();
return decryptedData; 
```

不要在那里关闭流。通常规则是：以打开它的相同方法关闭流。该模式应如下所示：

```
InputStream in = null;
try {
    in = ...
    // use the stream here.
} finally {
    if (in != null) {
        in.close();
    }
} 
```

或者，如果您使用的是 java 7：

```
try (
    InputStream in = ...; // initialize stream here

) {
    // use the stream here.
} 
```

您不必关闭已初始化的流`try ()`。它将自动关闭。享受java 7！

# php - url编码的奇怪问题

> ID：14559564
> 
> 赞同：1
> 
> 时间：2013-01-28T10:01:52.187
> 
> 标签：php, javascript, url, character-encoding

搜索我的应用程序的未捕获异常日志（ js -> php -> vb6 dll ）我注意到一个奇怪的错误：

```
file: /displaywords_GET.php?GreekWord=%E1%ED%E8%F1%F9%F0%EF%EC%DE%ED%E1%F2&selectedRes=1 # <b>Source:</b> mydll<br/><b>Description:</b> Invalid procedure call or argument # Variables:
 # Array
(
    [GreekWord] => ανθρωπομήνας
    [selectedRes] => 1
) 
```

因此 .dll 中的异常发生在给定参数上。我在应用程序中通过输入特定单词自己测试了它，并且没有出现错误。然后我在地址栏直接输入编码后的URL进行测试查看，错误重现。所以为了看看编码是否有问题，我在javascript中做了

```
encodeURIcomponent("ανθρωπομήνας") 
```

结果是：

```
%CE%B1%CE%BD%CE%B8%CF%81%CF%89%CF%80%CE%BF%CE%BC%CE%AE%CE%BD%CE%B1%CF%82 
```

这与上面 php 日志中的 GET 参数有很大不同。然后我尝试解码 url get 参数，如 php 文件中所示：

```
decodeURIcomponent("%E1%ED%E8%F1%F9%F0%EF%EC%DE%ED%E1%F2") 
```

和 javascript 说：**格式错误的 URI 序列**。为什么会这样？显然，应用程序崩溃是因为特定的 URL 参数格式不正确，而不是正确的。

现在，我的问题是，如何查看编码的字符串是正确的字符串还是损坏的字符串？（虽然我不确定为什么 php 似乎在日志中正确解码它，但当 javascript 说它格式错误时）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:16:12.107

`%E1%ED...`是以 ISO-8859-7 字符集表示的字符串的 URL 编码。在对字节进行 URL 编码之前，您需要转换为 UTF-8 编码，因为 JavaScript 仅适用于 UTF-8 字符串。

```
$word = 'ανθρωπομήνας';
var_dump(urlencode($word)); // %E1%ED%E8%F1%F9...

$utf8word = iconv('ISO-8859-7', 'UTF-8', $word);
var_dump(urlencode($utf8word)); // %CE%B1%CE%BD... 
```

# c# - 评估数值表达式的库

> ID：14559568
> 
> 赞同：1
> 
> 时间：2013-01-28T10:01:53.917
> 
> 标签：c#

是否有可以执行数值运算并返回值的 .NET 库？

我有这样的表达：

1 + 1/2

这应该返回相同的双重等价物。我不会传递一个字符串，它将是一个数值，返回应该是一个数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:06:21.547

我已经使用[NCalc](http://ncalc.codeplex.com/)进行中到复杂的计算，它似乎可以满足您的需求。

* * *

关于OP对原始问题的评论：

```
double d = 1/2; 
```

在c#中会返回0，因为整数1除以整数2，得到的整数结果为0。

如果您需要触发实数数学运算，则必须至少将其中一个操作数定义为实数。您可以通过使用小数点指定它（1.0 而不是 1），或者在值之后添加类型说明符（1f 或 1d 而不是 1）来做到这一点。看看这个例子：

```
double d1 = (1 + 1/2); //returns 1
double d2 = (1 + 1.0/2); //returns 1.5
double d3 = (1 + 1/2.0); //returns 1.5
double d4 = (1 + 1f/2); //returns 1.5
double d5 = (1 + 1d/2); //returns 1.5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:04:13.993

请参阅此处[CodeDom 计算器 - 动态评估 C# 数学表达式](http://www.c-sharpcorner.com/UploadFile/mgold/CodeDomCalculator08082005003253AM/CodeDomCalculator.aspx)

# javascript - 为什么我的程序首先执行函数 addmarkers() - 而不是 addAddresstoMap()

> ID：14559569
> 
> 赞同：0
> 
> 时间：2013-01-28T10:01:55.680
> 
> 标签：javascript, google-maps, callback, google-maps-api-2

我有一个函数 LoadXML() 在其中对服务器进行 ajax 调用后，我得到了一个包含 100 个地址类型字符串的数组；

同样在这里我们调用函数extractAddressed()，函数`addmarkers`作为回调；

```
function loadXMLDoc(l)
    {    
      //making ajax call to the server to get the addresses

    arrayMyAddresses.push(rec[i][8] + "," + rec[i][10]);

    extractAddresses(addmarkerss);

    } 
```

这是`extractAddresses`发送我想使用`getLocations`对谷歌服务器执行异步调用的方法进行 地理编码的部分地址的函数

```
function extractAddresses(callback)
    {    alert (startman);
          i=startman;

        while  (i<startman+intPageSize)
        {
            geocoder = new GClientGeocoder();
            //alert(arrayMyAddresses[i]);
            geocoder.getLocations(arrayMyAddresses[i], addAddressToMap);
            i++;

        }

        //callback();
        setTimeout(callback,300);

    } 
```

在这里，您还可以看到`addAddresstoMap`处理来自 google 服务器的响应并创建 gmarkers 数组的函数！

```
function addAddressToMap(response) 
    {

        if (!response || response.Status.code != 200) 

        {
           alert("Sorry, we were unable to geocode that address");
        } 

        else 
        {   

            place = response.Placemark[0];
            point = new GLatLng(place.Point.coordinates[1], place.Point.coordinates[0]);
            var marker = new GMarker(point);
            batch.push(marker);
            //alert ("batchaddaddresstomap " + batch.length);

        } 

    } 
```

最后`addmarkerss`() 函数将 Gmarkers 数组添加到地图中；

```
function addmarkerss()
    {

        // alert("batchf: " + batch.length);         
         mgr = new MarkerManager(map);
         mgr.addMarkers(batch,13);
         mgr.refresh();

    } 
```

所以这就是我调用程序时程序的工作方式，我`extractAddresses`一个一个地给出地理编码的地址，`addAddresstoMap`它们被动态添加到 Gmarker 类型的数组中；当我准备好这个时，我调用 addmarkers() 将标记放在我的地图上；

**但它实际上是什么**

当我`extractaddresses`以某种方式调用它时，它首先`addmarkers`运行它看到`banch`数组是空的并且它没有加载任何标记；当我提出`setTimeout(callback,300);`并推迟执行`addmarkers`所有工作时。

* * *

**可能是什么原因。而且我还想问一下问题是否在这里：虽然如果回调函数放在函数的最后，它确实会最后执行，但这并不总是会发生。例如，如果函数包含某种异步执行（**像我的情况下的 Ajax 调用****），**那么回调将在异步操作开始之后执行，但可能在它完成之前执行**。是我的情况吗？`settimeout`*还有我怎么能在没有**的情况下解决我的问题*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:40:38.437

*如果函数包含某种异步执行（比如我的情况下的 Ajax 调用），那么回调将在异步操作开始之后执行，但可能在它完成之前执行。**是我的情况吗？***

确实如此，地理编码是一个异步过程。

您必须在达到预期长度时调用**`addmarkerss()`**内部 （最后一个地理编码请求已完成）**`addAddressToMap()`****`batch`**

# oracle - 如何将图片保存为 BLOB 格式？

> ID：14559570
> 
> 赞同：0
> 
> 时间：2013-01-28T10:01:57.293
> 
> 标签：oracle, vb6

我为提示输入 .jpeg 文件的过程编写了代码，将该文件转换为 Byte 数组，并使用 Append chunk 方法将 Byte Array 保存到表中。另一个过程使用 GetChunk 方法从表中检索图片图像，将数据转换为文件并在图片框中显示该文件。

现在，我的问题是如何将图片框中显示的图像保存到数据库中，以便我可以执行以下操作：添加/更新等。我做了这样的事情：

```
Private Sub CmdSave_Click()
  if(cmbRNO=" ") then
    sql = "INSERT INTO STUDENT_RECORD_DATABASE(ROLLNO,PICS)"
    sql = sql + "VALUES(" & RNo & ","& picture1.picture &")"
    Set RES = CON.Execute(sql)
  Else
    sql = "UPDATE STUDENT_RECORD_DATABASE SET "
    sql = sql + "ROLLNO= " & Val(CmbRNO) & ","
    sql = sql + "PICS=" & Picture1.Picture & "  "
    sql = sql + "WHERE ROLLNO= " & Val(CmbRNO) & ""

    Set RES = CON.Execute(sql)
  End If
End Sub
<code for appendchunk method>    
Public Sub Command1_Click()
  Dim PictBmp As String
  Dim ByteData() As Byte   'Byte array for Blob data.
  Dim SourceFile As Integer
  ' Open the BlobTable table.
  strSQL = "Select ID, DOC from LOB_TABLE WHERE ID = 1"
  Set Rs = New ADODB.Recordset
  Rs.CursorType = adOpenKeyset
  Rs.LockType = adLockOptimistic
  Rs.Open strSQL, Cn
  ' Retrieve the picture and update the record.
  CommonDialog1.Filter = "(*.jpeg)|*.jpeg"
  CommonDialog1.ShowOpen
  PictBmp = CommonDialog1.FileName
  ' Save Picture image to the table column.
  SourceFile = FreeFile
  Open PictBmp For Binary Access Read As SourceFile
  FileLength = LOF(SourceFile)  ' Get the length of the file.
  If FileLength = 0 Then
      Close SourceFile
      MsgBox PictBmp & " empty or not found."
      Exit Sub
  Else
      Numblocks = FileLength / BlockSize
     LeftOver = FileLength Mod BlockSize
      ReDim ByteData(LeftOver)
      Get SourceFile, , ByteData()
      Rs(1).AppendChunk ByteData()
      ReDim ByteData(BlockSize)
      For i = 1 To Numblocks
          Get SourceFile, , ByteData()
          Rs(1).AppendChunk ByteData()
      Next i
      Rs.Update   'Commit the new data.
     Close SourceFile
  End If
  End Sub 
```

尝试将图像保存到特定记录时，发生运行时错误：不一致的数据类型，预期的 BLOB 得到编号 Where as: ?sql UPDATE STUDENT_RECORD_DATABASE SET ROLLNO= 132,PICS=688195876 WHERE ROLLNO= 132

# android - 从 LoaderManager 获取“已启动时调用 doStart”。为什么？

> ID：14559573
> 
> 赞同：7
> 
> 时间：2013-01-28T10:02:18.627
> 
> 标签：android, android-loadermanager

我的代码有一个 Activity，它有一个 FragmentPagerAdapter，它可以根据需要创建“n”个片段。Activity 有一个 loader，每个 Fragment 都有自己的 loader。所有加载程序都有唯一的 ID。（Activity的loader实际上决定了adapter中的Pages数量）

我一直在这里和那里收到此警告，无法确定是什么原因造成的。它似乎并不重要，还查看了引发此警告的 LoaderManger 的代码，但仍然 - 警告通常是错误的标志..

最初使用 FragmentStatePagerAdapter，然后移至 FragmentPagerAdapter，认为这可能是问题所在 - 但显然不是。

发布代码确实会使这复杂化并且添加的很少。

有什么想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T18:15:51.103

在您的片段中，将您的 initLoader 方法移动到 onActivityCreated 方法中。

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);

    LoaderManager lm = getLoaderManager();
    lm.initLoader(LOADER_ID, null, this);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-15T01:40:30.200

我刚刚用支持库完成了几个小时的调试会话。

TL;DR：**不要打电话`getLoaderManager`，`Fragment.onCreate`使用[`onActivityCreated`](https://raw.githubusercontent.com/xxv/android-lifecycle/master/complete_android_fragment_lifecycle.png)！**
（这意味着您`initLoader`以前不能这样做`onActivityCreated`）

`Fragment.getLoaderManager()`将从活动中懒惰地为您获取一个`LoaderManager`实例。但是，要使其成为有效的片段，必须已激活片段 ( `FragmentManager.makeActive`)，这意味着与此处相关的两件事：

*   已添加片段
    ( `FragmentManager.addFragment`)
*   Fragment 有一个内部标识符 ( `mWho`)
    (`makeActive`调用`Fragment.setIndex`)

后者非常重要，因为当你打电话时`Fragment.getLoaderManager()`，反过来又要求`FragmentActivity.getLoaderManager(who, ...)`真正的经理。当从调用`Fragment.onCreate()`中`makeActive`调用时还没有发生，所以你会得到一个不好`LoaderManagerImpl`的`mWho == null`结果，因为框架会将`LoaderManager`实例重新分配给每个具有相似生命周期的片段。

由于这种重新分配，`LoaderManager`已经由一个片段启动，但另一个片段也会尝试启动它，因为活动不知道哪个片段在询问，它们都没有自己的身份（`mWho`）。

# mysql - 如何对mysql中的表进行列备份

> ID：14559576
> 
> 赞同：-2
> 
> 时间：2013-01-28T10:02:25.440
> 
> 标签：mysql, sql

如何对mysql中的表进行列备份。我们有任何命令。请提供解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:22:12.560

**您可以通过“mysql”**命令行实用程序仅导出选定的字段

请参见下面的示例：

```
mysql -u USERNAME --password=PASSWORD --database=DATABASE --execute='SELECT `FIELD`, `FIELD` FROM `TABLE` LIMIT 0, 10000 ' -X > file.xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:59:01.500

您可以使用 MySqlBackup.NET 来帮助做到这一点：http:
[//mysqlbackupnet.codeplex.com](http://mysqlbackupnet.codeplex.com)

```
string file = "C:\\backup.sql";
string conn = "server=localhost;user=root;pwd=qwerty;database=test;";
var mb = new MySqlBackup(conn);
mb.ExportInfo.FileName = file;
mb.ExportRows = false;
mb.ExportTableStructure = true;
mb.Export(); 
```

# c# - OpenFileDialog 在不同的项目中看起来不同

> ID：14559577
> 
> 赞同：0
> 
> 时间：2013-01-28T10:02:26.037
> 
> 标签：c#, .net, wpf, openfiledialog

我正在尝试[Sams Teach Yourself WPF in 24 Hours](http://www.informit.com/store/sams-teach-yourself-wpf-in-24-hours-9780672329852)一书中的示例应用程序。我输入的代码与我从他们的网站下载的代码几乎相同。

有一部分是使用`OpenFileDialog`类的。我正在 Windows 7、Visual Studio 2010 Ultimate 中开发。我认为作者使用的系统是不同的。

以下是`OpenFileDialog`我电脑上 s 的快照：

![我的项目中的 OpenFileDialog](../Images/440b3bf0226f23375b6037ade96919d8.png) ![下载项目中的 OpenFileDialog](../Images/32def85d4b045f8c03882d0d2bb8c2ca.png)

第一个是`OpenFileDialog`我项目中的快照，第二个是下载项目的快照（同样，它们的代码几乎完全相同）。

我认为是因为下载的版本是在另一个版本的 Windows 中编译的，因此存在差异。但它是一样的，即使我在我的电脑上编译它。

造成差异的原因是什么？

**编辑：**我尝试删除解决方案目录中的`obj`and文件夹，并重建文件。`bin`窗户仍然不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:33:22.837

该项目可能针对不同的框架

右键单击项目>属性>应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:04:13.633

您在不同的命名空间中有两个不同`OpenFileDialog`的。

*   `Microsoft.Win32.OpenFileDialog`
*   `System.Windows.Forms.OpenFileDialog`：您也可以在 WPF 项目中使用 WinForms 对话框

检查您在项目中使用的是哪一个。

# javascript - 有条件地在javascript中更改视频的来源和尺寸

> ID：14559582
> 
> 赞同：0
> 
> 时间：2013-01-28T10:02:50.757
> 
> 标签：javascript, video-streaming, conditional-statements

我在下面有这段代码：

```
 <script type="text/javascript">
           jwplayer("container").setup({
           flashplayer: "http://test.captive-portal.com/jwplayer/player.swf",
                        file: "http://content.captive-portal.com/files/video/cirque-du-soleil/mob.mp4",
                        image: "http://content.captive-portal.com/files/video/cirque-du-soleil/mob.jpg",
                        height: 285,
                        width: 480,
           });
      </script> 
```

整个页面都在这里（以防万一）：[video page](http://content.captive-portal.com/files/video/cirque-du-soleil/index.html)。

**我要做的是根据窗口的分辨率更改 4 行：文件：（...）、图像（...）、高度（...）和宽度（...）。**我已经设法用 css 做到这一点，所以样式被正确应用，但这是 javascript，我真的不知道如何修改它。我试图在 div 的一页上放置 2 个类似的脚本，并在大屏幕的情况下隐藏小脚本，或者在小屏幕的情况下隐藏大脚本，但它不起作用。视频没有播放。我认为这可能是由 Flash 播放器文件中的某些脚本引起的。

有没有办法根据屏幕分辨率为这 4 行设置条件？非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:28:08.973

这些参数只是一个对象。

因此，您应该能够从 jwplayer 调用中创建该对象，然后将其传入。例如

```
var params = {};
params.flashplayer = "http://test.captive-portal.com/jwplayer/player.swf";
if(!mobile){ //you need to handle checking for mobile devices
    params.file = "http://content.captive-portal.com/files/video/cirque-du-soleil/desktop.mp4";
    params.image = "http://content.captive-portal.com/files/video/cirque-du-soleil/desktop.jpg";
    params.height = 570;
    params.width = 960;
}else{
    //set params in same way but with mobile settings
}

jwplayer("container").setup(params); 
```

如果您以后只想调整播放器的大小。JwPlayer 有一个“调整大小”功能，您可以调用它：`jwplayer.resize(width,height)`

# ios - 在 iOS 中获取 GPS 卫星和原子钟时间戳

> ID：14559583
> 
> 赞同：1
> 
> 时间：2013-01-28T10:02:50.670
> 
> 标签：ios, gps

是否可以在 iOS 中获取 GPS 原子钟时间戳？另外，是否可以查看某个样本中使用了哪些卫星？

据我所知，GPS 接收器可以获取此信息，但我没有找到任何访问它的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:14:33.420

iOS 不提供任何此类公共 API 来访问这些详细信息。

根据苹果文件：

> 位置管理器对象为以下与位置相关的活动提供支持：
> 
> 以可配置的准确度跟踪用户当前位置的大小变化。
> 
> 从机载指南针报告航向变化。（仅限 iOS）
> 
> 监视不同的感兴趣区域并在用户进入或离开这些区域时生成位置事件。
> 
> 在应用程序处于后台时延迟位置更新的传递。（仅限 iOS）
> 
> 向附近的信标报告范围。

没有任何地方提到 GPS 原子钟时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T23:29:16.063

这可以获取 GPS 时间：

```
#import <CoreLocation/CoreLocation.h>

CLLocation* gps = [[CLLocation alloc]
                       initWithLatitude:(CLLocationDegrees) 0.0
                       longitude:(CLLocationDegrees) 0.0];
NSDate* now = gps.timestamp; 
```

我没有看到任何让我相信您可以通过官方 API 获得卫星号码的东西。也许通过未发表的方法？但是，这会将您的应用程序从 App Store 中排除。

# android - 在 Android 中 - 如何在不丢失当前状态的情况下使用不同的 main.xml？

> ID：14559591
> 
> 赞同：1
> 
> 时间：2013-01-28T10:03:26.047
> 
> 标签：android, android-layout

我想在不丢失活动当前状态的情况下改变方向。

我在 manifest.xml 中使用**android:configChanges="orientation|keyboardHidden|screenSize"**，然后它不会加载横向的 xml 文件，而是更改 hte Portrait main.xml 的方向。

当方向更改为 landsacpe 时，我想要 layout-land/main.xml，反之亦然，而无需重新启动活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:29:36.900

这会在一定程度上帮助你

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
super.onConfigurationChanged(newConfig);

// Checks the orientation of the screen
if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
   //Do your action
   } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        //Do your action
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:50:56.020

当您必须实施的方向发生变化时，该活动将重新启动，`onSaveInstanceState()`并且`onRestoreInstanceState()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:09:27.260

这可以帮助你

```
 @Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
    }
} 
```

获取更多帮助或详细信息 使用处理[运行时更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)

# mysql - MySQL查询所有字段，除了

> ID：14559594
> 
> 赞同：0
> 
> 时间：2013-01-28T10:03:28.563
> 
> 标签：mysql

我想知道是否有一个查询来检查表中的所有字段而不枚举所有字段。我的伪代码将类似于：

```
SELECT * FROM table WHERE * > 5 except table.id; 
```

有这样的查询吗？

# visual-c++ - Windows 窗体应用程序：访问其他窗体中的元素 Visual Studio 2012 C++

> ID：14559597
> 
> 赞同：0
> 
> 时间：2013-01-28T10:03:37.323
> 
> 标签：visual-c++

使用 c++ vs2010 访问（添加）Form2 的元素到 Form1 工作得很好。如果我在 Visual Studio Express 2012 中从头开始尝试相同的操作，我会不断收到错误消息，指出 Form2 是未声明的标识符。有什么想法有什么问题吗？

```
 #include "stdafx.h"
    #include "Form2.h"
    ....

    Form2^ frm = gcnew Form2;
    this->Controls->Add(frm->panel1); 
```

错误 C2065：“Form2”：未声明的标识符

代码表格1：

# 包括“stdafx.h”

# 包括“Form2.h”

```
 #pragma once

    namespace WindowsFormsApplication{

        using namespace System;
        using namespace System::ComponentModel;
        using namespace System::Collections;
        using namespace System::Windows::Forms;
        using namespace System::Data;
        using namespace System::Drawing;

        /// <summary>
        /// Summary for Form1
        /// </summary>
        public ref class Form1 : public System::Windows::Forms::Form
        {
        public:
            Form1(void)
            {
                InitializeComponent();
                //
                //TODO: Add the constructor code here
                //
            }

        protected:
            /// <summary>
            /// Clean up any resources being used.
            /// </summary>
            ~Form1()
            {
                if (components)
                {
                    delete components;
                }
            }
        private: System::Windows::Forms::Button^  button1;
        protected: 

        private:
            /// <summary>
            /// Required designer variable.
            /// </summary>
            System::ComponentModel::Container ^components;

    #pragma region Windows Form Designer generated code
            /// <summary>
            /// Required method for Designer support - do not modify
            /// the contents of this method with the code editor.
            /// </summary>
            void InitializeComponent(void)
            {
                this->button1 = (gcnew System::Windows::Forms::Button());
                this->SuspendLayout();
                // 
                // button1
                // 
                this->button1->Location = System::Drawing::Point(31, 32);
                this->button1->Name = L"button1";
                this->button1->Size = System::Drawing::Size(75, 27);
                this->button1->TabIndex = 0;
                this->button1->Text = L"button1";
                this->button1->UseVisualStyleBackColor = true;
                this->button1->Click += gcnew System::EventHandler(this,   &Form1::button1_Click);
                // 
                // Form1
                // 
                this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
                this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
                this->ClientSize = System::Drawing::Size(284, 262);
                this->Controls->Add(this->button1);
                this->Name = L"Form1";
                this->Text = L"Form1";
                this->ResumeLayout(false);

            }
    #pragma endregion
        private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
                     Form2^ frm = gcnew Form2;
            this->Controls->Add(frm->panel1);

                 }
        };
    } 
```

代码表格2：

```
 #pragma once

    namespace Windows_Forms_Application{

        using namespace System;
        using namespace System::ComponentModel;
        using namespace System::Collections;
        using namespace System::Windows::Forms;
        using namespace System::Data;
        using namespace System::Drawing;

        /// <summary>
        /// Summary for Form2
        /// </summary>
        public ref class Form2 : public System::Windows::Forms::Form
        {
        public:
            Form2(void)
            {
                InitializeComponent();
                //
                //TODO: Add the constructor code here
                //
            }

        protected:
            /// <summary>
            /// Clean up any resources being used.
            /// </summary>
            ~Form2()
            {
                if (components)
                {
                    delete components;
                }
            }
        public: System::Windows::Forms::Panel^  panel1;
        protected: 

        private:
            /// <summary>
            /// Required designer variable.
            /// </summary>
            System::ComponentModel::Container ^components;

    #pragma region Windows Form Designer generated code
            /// <summary>
            /// Required method for Designer support - do not modify
            /// the contents of this method with the code editor.
            /// </summary>
            void InitializeComponent(void)
            {
                this->panel1 = (gcnew System::Windows::Forms::Panel());
                this->SuspendLayout();
                // 
                // panel1
                // 
                this->panel1->BackColor =        System::Drawing::SystemColors::ActiveCaptionText;
                this->panel1->Location = System::Drawing::Point(106, 85);
                this->panel1->Name = L"panel1";
                this->panel1->Size = System::Drawing::Size(132, 118);
                this->panel1->TabIndex = 0;
                // 
                // Form2
                // 
                this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
                this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
                this->ClientSize = System::Drawing::Size(284, 262);
                this->Controls->Add(this->panel1);
                this->Name = L"Form2";
                this->Text = L"Form2";
                this->ResumeLayout(false);

            }
    #pragma endregion
        };
    } 
```

代码cpp：

```
 // Windows Forms Application.cpp : main project file.

    #include "stdafx.h"
    #include "Form2.h"
    #include "Form1.h"

    using namespace WindowsFormsApplication;

    [STAThreadAttribute]
    int main(array<System::String ^> ^args)
    {
        // Enabling Windows XP visual effects before any controls are created
        Application::EnableVisualStyles();
        Application::SetCompatibleTextRenderingDefault(false); 

        // Create the main window and run it
        Application::Run(gcnew Form1());
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:19:53.083

尝试使用类前向声明​​。这是您的问题的最可能原因。

[如果您不确定（ C++ - 2 classes 1 file](https://stackoverflow.com/questions/677325/c-2-classes-1-file)），这里有一个如何做的例子。在您的情况下，请尝试在下面添加以下行

```
#include "stdafx.h"
#include "Form2.h"
class form2; 
```

或者，您可以尝试添加

```
using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

class form1; 
```

如果这不起作用，我们将需要查看更多代码和文件结构。
您需要前向声明，因为它有助于编译器了解代码中存在哪些函数和对象以及如何访问它们。

# batch-file - 有人可以帮助理解这个批处理脚本吗？

> ID：14559600
> 
> 赞同：1
> 
> 时间：2013-01-28T10:03:43.457
> 
> 标签：batch-file, batch-processing

我正在阅读一个批处理文件，但我不明白，有人可以帮忙解释一下吗？

据我了解 %0 是批处理文件的名称，我们可以对其进行迭代吗？还是表示文件夹的便捷方式？

我在文件中找不到变量 %BatchPath%，你认为它是在哪里定义的？似乎 APATH 是在两个循环中定义的？

```
for %%x in (%0) do set APATH=%%~dpsx
for %%x in (%BatchPath%) do set APATH=%%~dpsx
pushd %APATH% 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:24:22.027

您可以迭代单个值。它只是意味着该`set`语句执行一次。然后`~dps`删除文件名，以便只保留目录。

第一行对 %0 执行此操作，实际上是当前脚本的路径和名称。

第二行对给定变量执行相同的操作，现在这是有趣的部分，因为如果`%BatchPath%`为空，则不会迭代任何内容，因此`set`根本不执行该行上的语句。

如此有效，它存储了一个目录，默认情况下该目录是脚本的目录，但可以通过`%BatchPath%`在调用此脚本之前显式分配路径来覆盖。

`pushd`允许您保存目录，以便稍后使用`popd`. 它允许脚本跳转到另一个目录，并能够在 shell 终止之前将其恢复到原始目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:31:00.883

> > %0 是当前的批处理文件。
> > %%~dpsx 在这里给出当前批处理文件的短路径它给出驱动器名称例如“D:\” **Pushd**存储当前目录的名称以供popd 命令在将当前目录更改为指定目录之前使用。APATH 是一些用于存储路径的变量。

所以基本上该脚本正在获取有关脚本文件名、其驱动器位置的详细信息并将其存储为用作最后一个批处理文件运行的位置或类似的位置。

# jquery - 鼠标悬停时更改背景

> ID：14559601
> 
> 赞同：0
> 
> 时间：2013-01-28T10:03:47.030
> 
> 标签：jquery

我想更改鼠标悬停在 new_r_div 上的 li 链接的颜色为此，我在链接 id 处包含了悬停类。在元素的mouseouver背景上应该改变这是我的代码[链接](http://jsfiddle.net/xrcwrn/QQvv6)请看

HTML

```
<div id="response"> <a href="#">Response Request</a>
    <div class="new_r_div hidden">
        <ul>
            <li><a href="#" id="link">Confirm</a></li>
            <li><a href="#" id="link">Delete</a></li>
        </ul>
    </div>
</div> 
```

jQuery

```
$("#response").hover(
    function () {
        $('.new_r_div').removeClass('hidden');
    }, 
    function () {
        $('.new_r_div').addClass('hidden');
    }
);

$("#new_r_div").hover(
    function () {
        $('#link').addClass('hover');
    }, 
    function () {
        $('#link').removeClass('hover');
    }
); 
```

CSS

```
.new_r_div {
    position:absolute;
    width:100px;
    height:40px;
    background:#ccc;
    overflow: hidden;
    border: solid 2px #ccc;
    background: #99CCFF;
    z-index: 9999;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}
.hidden {
    visibility: hidden;
}
.hover {
    background:red;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:08:59.577

# 用于选择需要使用classSelector的id。参考以下代码

```
$(".new_r_div").hover(function(){
    $('#link').addClass('hover');
},function(){
    $('#link').removeClass('hover');
}); 
```

[http://jsfiddle.net/QQvv6/9/](http://jsfiddle.net/QQvv6/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:10:47.487

我注意到这段代码有一些问题。它只适用于一个`a`标签，因为有多个`#link`元素。以下代码应该适用于两个锚点。

```
$("#response").hover(function(){
    $('.new_r_div').removeClass('hidden');
},function(){
    $('.new_r_div').addClass('hidden');
});

//switched selector to only target the anchor tags
$(".new_r_div li a").hover(function(){  
    $(this).addClass('hover');  //targeting anchor tags allow us to use this
},function(){
    $(this).removeClass('hover');
}); 
```

示例：http: [//jsfiddle.net/QQvv6/23/](http://jsfiddle.net/QQvv6/23/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:09:35.700

你的 `new_r_div`是`class`而不是`id`选择器是`.`

试试这个

```
 $(".new_r_div").hover(function(){
 .... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T10:11:00.020

假设我正确理解了您的问题，您可以单独使用 CSS - 不需要 jquery：

```
.new_r_div li:hover {
    background-color: red;
} 
```

```
$("#response").hover(
    function () {
        $('.new_r_div').removeClass('hidden');
    }, 
    function () {
        $('.new_r_div').addClass('hidden');
    }
); 
```

[**更新的小提琴**](http://jsfiddle.net/QQvv6/14/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T10:13:31.897

编辑：jsFiddle 工作代码：http: [//jsfiddle.net/joquery/QQvv6/7/](http://jsfiddle.net/joquery/QQvv6/7/)

您的代码中有一些错误：

1.  您不能必须具有相同 id ( `id="link"`)的元素
2.  `new_r_div`不是 id 它是你的 html 中的一个类
3.  您想将鼠标悬停在属于`new_r_div`. 所以你需要写`$(".new_r_div li")`而不是`$(".new_r_div")`

我已经更新了你的 JavaScript：

```
$("#response").hover(function(){
    $('.new_r_div').removeClass('hidden');
},function(){
    $('.new_r_div').addClass('hidden');
});
$(".new_r_div li").hover(function(){
    $(this).addClass('hover');
},function(){
    $(this).removeClass('hover');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T10:14:18.130

```
$("#new_r_div").hover(...) 
```

`new_r_div`是类，不是`id`

```
<li><a href="#" id="link">Confirm</a></li>
<li><a href="#" id="link">Delete</a></li> 
```

`id`必须是唯一的

你的例子可以不用jquery编写：

```
.new_r_div:hover{
    background:red;
} 
```

演示：http: [//jsfiddle.net/QQvv6/19/](http://jsfiddle.net/QQvv6/19/)

**添加：** 或 [http://jsfiddle.net/QQvv6/27/](http://jsfiddle.net/QQvv6/27/)（悬停菜单项）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-28T10:17:24.657

HTML

```
<div id="response">
                <a href="#">Response Request</a>

<div class="new_r_div hidden">
    <ul>
        <li class="menuItem"><a href="#"  >Confirm</a></li>
        <li class="menuItem"><a href="#"  >Delete</a></li>

    </ul>
  </div>
</div> 
```

jQuery

```
$("#response").hover(function(){
    $('.new_r_div').removeClass('hidden');
},function(){
    $('.new_r_div').addClass('hidden');
});

$(".menuItem").hover(function(){
    $(this).addClass('hover');
},function(){
    $(this).removeClass('hover');
}); 
```

[小提琴示例](http://jsfiddle.net/QQvv6/26/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-28T10:19:23.510

首先：您使用了两次相同的 id “链接”。一个 id 只能在文档中使用一次，一个 id 必须是唯一的。第二：背景颜色的属性是“背景颜色”，而不是“背景”:) 第三：你很困惑：列表容器有一个类，但你试图通过 id 选择。

我想这就是你想要的：

```
 $("#response").hover(function(){
    $('.new_r_div').removeClass('hidden');
},function(){
    $('.new_r_div').addClass('hidden');
});
$(".new_r_div").find(".link").hover(function(){
    $(this).addClass('hover');
},function(){
    $(this).removeClass('hover');
}); 
```

# css - 为什么不重新启动 WEBrick 就不会显示我的 css 更改？

> ID：14559615
> 
> 赞同：3
> 
> 时间：2013-01-28T10:04:38.340
> 
> 标签：css, ruby-on-rails, asset-pipeline, webrick

我正在对 rails 3.2 项目进行一些简单的 css 编辑，除非我重新启动 webrick，否则我的更改不会显示。

我遇到了一些说它可能正在使用 public/assets 目录的东西，但我不认为是这种情况，因为我的更改会在服务器重新启动时显示。不知道为什么会这样。

有谁知道我是否需要修复某种配置来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:13:54.373

```
bundle exec rake assets:clean 
```

运行这个命令

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T11:04:19.187

我将此添加到我的 development.rb 文件中，现在它可以工作了。

```
config.assets.digest = false 
```

# clojure - Datomic - 需要对唯一 ID 进行显式手动编码？

> ID：14559620
> 
> 赞同：10
> 
> 时间：2013-01-28T10:04:50.473
> 
> 标签：clojure, datomic

我的问题是——Dataomic 是否需要最终用户明确*手动创建唯一序列号*？还是只是提供的示例？

我正在阅读 Datomic 教程。

当我查看在 seattle-data0.dtm 中加载的数据时，我在前两行看到：

```
[
{:district/region :region/e, :db/id #db/id[:db.part/user -1000001], :district/name "East"}
{:db/id #db/id[:db.part/user -1000002], :neighborhood/name "Capitol Hill", :neighborhood/district #db/id[:db.part/user -1000001]} 
```

特别注意这些值

```
:db/id #db/id[:db.part/user -1000001],
:db/id #db/id[:db.part/user -1000002]
#db/id[:db.part/user -1000001] 
```

也许您可以帮助我理解 -在准备插入数据时，这似乎明确需要*手动生成的唯一 ID 序列号。*

当然，在现代数据库中，我们可以依靠数据库为我们生成序列号吗？

当我去做我自己的示例模式和数据插入时 - 我发现我也需要插入手动 ID 号。我错过了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T21:57:08.140

回答您的问题：No Datomic 不需要最终用户生成标识符。您在西雅图示例中看到的是[临时 ids](http://docs.datomic.com/transactions.html)。

每次你想向 Datomic 添加一些关于新实体的事实时，你必须给每个新实体一个临时 ID。这个 id 将被 Datomic 替换为真正的唯一 id。

现在你可能会问自己，为什么你必须首先使用这个临时 ID？需要临时 id 来表达单个事务中所有新实体之间的关系。在您的示例中，您具有以下 ID：

```
:db/id #db/id[:db.part/user -1000001],
:db/id #db/id[:db.part/user -1000002]
#db/id[:db.part/user -1000001] 
```

其中两个是相同的（我稍后会解释负数）。这意味着用临时 id 标记的新实体`#db/id[:db.part/user -1000001]`在两个[断言](http://docs.datomic.com/glossary.html)中是相同的。

现在我必须解释[数据文字](http://support.datomic.com/customer/portal/articles/811807-when-to-use-data-literals) [（其他链接）](https://github.com/edn-format/edn) `#db/id[:db.part/user -1000001]`。`#db/id`是 Datomic 临时 ID 的标记。标签后面是两个分量的向量`:db.part/user`和`-1000001`。第一部分是数据库分区，是必需的。第二部分是可选的。如果你只写`#db/id[:db.part/user]`，每次出现这个文字时，你都会得到一个新的（不同的）临时 id。如果您编写`#db/id[:db.part/user -1000001]`，每次使用负索引时都会获得相同的临时 id `-1000001`。所以`#db/id[:db.part/user -1000001]`不同于`#db/id[:db.part/user -1000002]`.

我不完全知道为什么这些示例使用低于 1000000 的索引。[tempid](http://docs.datomic.com/javadoc/datomic/Peer.html#tempid(java.lang.Object,%20long))的 JavaDoc中的数据文字`#db/id`解析为，表示从 -1（包括）到 -1000000（不包括）的数字保留给用户创建的 temp身份证。所以也许有人可以对此有所了解。

总结一下：`#db/id[...]`是在一个事务中表示相同实体的临时 ID，并在事务结束时由 Datomic 替换为真实的唯一 ID。如果您不必在事务中两次引用同一个实体，则只需`#db/id[:db.part/user]`为每个临时 ID 就可以了。

# php - php：验证 POST 的最佳方法

> ID：14559623
> 
> 赞同：2
> 
> 时间：2013-01-28T10:05:31.063
> 
> 标签：php, validation, post

我一直在使用下面的代码通过 $_POST 验证我的用户输入：

```
if(isset($_POST['name']) && !empty($_POST['name'])) {
    $n=$_POST['name'];
}
else {
    $errors[] = "Please give a name";
} 
```

此代码检查是否实际设置了“名称”，这是显而易见且需要的。其次，它检查用户是否在文本字段中输入了一些内容以提供名称值。但是，如果用户将空格“”作为输入，它会接受它，因为它不是空的，它有空格。

我找到了一种正确的方法：

```
if(isset($_POST['name'])) {
    $n = trim($_POST['name']);
    if(empty($n)) {
        $errors[] = "Please give a name";
    }
}

else {
$errors[] = "Please give a name";
} 
```

但是在这里我重复了两次相同的错误信息，那么如何优化呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T10:07:30.160

```
if(isset($_POST['name']) && trim($_POST['name']) !== "") {
    $n=$_POST['name'];
}
else {
    $errors[] = "Please give a name";
} 
```

取出空的，然后进行修剪。

老实说，除非您打开了通知，否则您甚至不需要 isset：

```
 if(trim($_POST['name']) !== "") { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T10:08:32.017

如果不需要修剪后的字符串，可以将修剪本身移动到 if 子句：

```
if(isset($_POST['name']) && (trim($_POST['name']) != '') ) {
    $n=$_POST['name'];
}
else {
    $errors[] = "Please give a name";
} 
```

如果您进一步需要它，您可以在检查之前修改输入：

```
$_POST['name'] = trim( $_POST['name'] );
if(isset($_POST['name']) && !empty($_POST['name'])) {
    $n=$_POST['name'];
}
else {
    $errors[] = "Please give a name";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:07:22.283

像这样试试

```
if(trim(isset($_POST['name']))) {
    $n = trim($_POST['name']);
}
else {
    $errors[] = "Please give a name";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T10:07:58.903

尝试

```
 if(isset($_POST['name'])) {
        $n = trim($_POST['name']);
     }
        if(empty($n) or !isset($_POST['name'])) {
            $errors[] = "Please give a name";
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T10:08:54.683

只需将上面的代码更改为此

```
 if(trim(isset($_POST['name'])))
{
$n = trim($_POST['name']);
}
else 
{
$errors[] = "Please give a name";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T10:09:07.213

尝试使用这个

```
if(isset($_POST['name']) && trim($_POST['name']) != false) {
    $n=$_POST['name'];
}
else {
    $errors[] = "Please give a name";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-28T12:03:01.410

最后我开始使用下面的代码。更好，因为在这里我什至可以控制最少的字符数。

```
if(isset($_POST['name']) && strlen(trim($_POST['name'])) > 1) {
        $block->name = trim($_POST['name']);
    }
    else {
        $errors[] = "Please give a name. It should be at least two characters";
    } 
```

# repository - 如何将模块从一个 CVS 存储库移动到另一个？

> ID：14559625
> 
> 赞同：1
> 
> 时间：2013-01-28T10:05:35.030
> 
> 标签：repository, cvs, transfer

是否可以将模块从一个 CVS 存储库移动到另一个而不丢失历史记录（包括已删除的文件）？

我有两个 CVS 存储库，我想将一个模块（CVS 根目录的顶级子目录）从一个移动到另一个。

我可以简单地移动模块目录，还是有其他事情要做？似乎存储库目录中的 CVSROOT 目录确实包含对模块的一些引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:07:46.187

您应该能够将顶级模块目录从一个存储库移动（或复制）到另一个存储库。模块的历史是自包含的。

如果您想维护任何其他行为（例如，预提交挂钩），则必须将引用复制到 CVSROOT 模块中的模块。

# c# - 更改图钉 WPF 的图像

> ID：14559630
> 
> 赞同：2
> 
> 时间：2013-01-28T10:05:53.827
> 
> 标签：c#, wpf, bing-maps, pushpin

我有 2 个图钉，pin1 和 pin2。如何将默认的黑色图像更改为我自己的图像？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T10:17:19.873

如果您不需要所有图钉功能，您可以使用 a`Image`并将其添加到 a中。`MapLayer`

例子：

```
MapLayer mapLayer = new MapLayer();
Image myPushPin = new Image();
myPushPin.Source = new BitmapImage(new Uri("YOUR IMAGE URL",UriKind.Relative));
myPushPin.Width = 32; 
myPushPin.Height = 32;
mapLayer.AddChild(myPushPin, <LOCATION_OF_PIN>, PositionOrigin.Center);
bingMap.Children.Add(mapLayer); 
```

如果您确实需要某些 Pushpin 功能，另一种选择是使用 PushPin 模板：

```
Pushpin pushpin = new Pushpin();
pushpin.Template = Application.Current.Resources["PushPinTemplate"]  
    as (ControlTemplate); 
```

然后在您的应用程序资源 XAML 中，您可以像这样定义模板：

```
<ControlTemplate x:Key="PushPinTemplate">
    <Grid>
        <Rectangle Width="32" Height="32">
            <Rectangle.Fill>
               <ImageBrush BitmapSource="YOUR IMAGE URL" /> 
            </Rectangle.Fill>
        </Rectangle>
    </Grid>
</ControlTemplate> 
```

# javascript - 如何使用 jqplot 仅绘制点

> ID：14559631
> 
> 赞同：0
> 
> 时间：2013-01-28T10:06:00.767
> 
> 标签：javascript, jquery, charts, jqplot

现在我正在使用 LineRenderer 但我实际上需要这些点，我想避免在它们之间有线条。有渲染器吗？我试过 lineWidth: 0 但它仍然存在。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:26:47.313

设置 `showLine`为`false`

```
seriesDefaults: {    
                showLine:false, 
                }, 
```

`showLine`使用属性，是否渲染线段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T19:35:21.400

你可以自定义你的情节

```
var plot = $.jqplot(id, [array], {
      axes:{
        xaxis:{
          renderer:$.jqplot.DateAxisRenderer, 
          tickOptions:{formatString:'%H:%M'},
          min:'June 16, 2008 8:00AM', 
          tickInterval:'2 weeks'
        }
      },
      series:[{lineWidth:1, 
            markerOptions: { style:'none', display: 'none' },
                showMarker:false}],
      seriesColors:["#FF0000"]
      ,grid: {
            backgroundColor: 'rgb(211, 233, 195)',
            shadow: true
            drawGridLines: true,        
            gridLineColor: '#cccccc',   
            background: '#fffdf6',      
            borderColor: '#999999',     
            borderWidth: 2.0,           
            shadow: true,               
            shadowAngle: 45,            
            shadowOffset: 1.5,          
            shadowWidth: 3,             
            shadowDepth: 3,             
            shadowAlpha: 0.07,  
            renderer: $.jqplot.CanvasGridRenderer, 
            rendererOptions: {}
      }
  }); 
```

更多示例：[JQplot 示例页面](http://www.jqplot.com/examples/line-charts.php)

# visual-studio-2010 - 在解决方案中跨项目共享 packages.config

> ID：14559634
> 
> 赞同：0
> 
> 时间：2013-01-28T10:06:13.607
> 
> 标签：visual-studio-2010, configuration, nuget

我正在做代码审查。我们已经开始使用 Nuget 来导入 3rd 方库，例如 Enterprise Library。

以前，我们在解决方案中的所有项目都可以访问的共享上拥有企业库的 dll。当它更新时，它已针对所有项目进行了更新。

现在它由 packages.config 控制，它是每个项目的一个文件。更改将意味着更改多个文件，有可能并非所有应该更新的文件都已更新。

有没有办法跨项目共享 packages.config，或者能够同时更新所有 packages.config 的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:32:02.107

为了同时更新所有项目中的包，您可以在解决方案级别启动“管理 NuGet 包”对话框（右键单击解决方案）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:46:56.383

既然您正在进行代码审查，请允许我这样说：**强制对其消费者进行包更新通常不是一个好习惯**。

在解决方案级别更新包是确保您也将更新 packages.config 文件的唯一方法（*NuGet.exe 更新*不会更改这些文件）。

packages.config 文件是与项目相关的，只有在项目使用的所有包完全相同的情况下才能共享。在项目中添加链接，更新 repositories.config 以指向共享的 packages.config，并希望最好（不确定 NuGet 是否检查 packages.config 是否物理存在于项目目录中。

如您所见，这种情况不是主流，因此没有以最佳方式支持。

# barcode - zxing 库，MonochromeBitmapSource 和 BufferedImageMonochromeBitmapSource 丢失？

> ID：14559637
> 
> 赞同：0
> 
> 时间：2013-01-28T10:06:31.517
> 
> 标签：barcode, zxing

我正在使用 zxing 库

添加 zxing 2.1 依赖项后，以下代码给出编译时错误

```
MonochromeBitmapSource source = new BufferedImageMonochromeBitmapSource(bufferedImage); 
```

我把它换成了

```
LuminanceSource lumiancesource = new BufferedImageLuminanceSource(bufferedImage);
BinaryBitmap source = new BinaryBitmap(new GlobalHistogramBinarizer(lumiancesource)); 
```

**我是对的？？？？？？**由于项目仍在其他编译错误中，我无法运行和检查，因此需要帮助。

请提出建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:31:58.540

`MonochromeBitmapSource`不是项目中的一个类。您的第二个片段看起来正确。

# android - 将应用程序安装到 sd 卡（外部存储）

> ID：14559640
> 
> 赞同：3
> 
> 时间：2013-01-28T10:06:46.680
> 
> 标签：android, installation, android-sdcard

我试图将我的android应用程序的默认安装位置设置到我的sd卡（外部存储）中。所以我尝试了这些命令，

adb shell pm getInstallLocation（显示 0[auto]）

所以我运行这个命令来使它成为 sd-card

adb shell pm setInstallLocation 2

我再次运行它以查看命令是否成功运行。

adb shell pm getInstallLocation（这显示 2[外部）

但毕竟这些仍然是我的应用程序正在安装到内存中，并且我的手机内存空间不足。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T10:10:49.280

您是否尝试在 manifest.xml 文件中使用 installLocation="PreferredExternal" 选项？

如果您尝试此操作，您的应用程序将安装在外部存储中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T10:09:43.320

您是否在 Manifest.xml 中指定了**installLocation**？

另请参阅[http://developer.android.com/guide/topics/manifest/manifest-element.html](http://developer.android.com/guide/topics/manifest/manifest-element.html)

# android - FragmentManager - 无法访问另一个活动中的片段

> ID：14559642
> 
> 赞同：0
> 
> 时间：2013-01-28T10:06:56.750
> 
> 标签：android, android-fragments, android-listfragment, android-fragmentactivity

我有两个片段，例如左侧面板一个片段和右侧另一个片段。

当我单击添加按钮时，左侧面板片段中有添加按钮，它会启动另一个活动，我正在尝试从该活动访问片段，但我没有得到。

这是我在活动中使用的代码

LeftFragment left = (LeftFragment) getFragmentManager().findFragmentById(R.id.fragment1); 结束（）;

谁能帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:58:35.830

您可以像这样在 Fragment 中定义另一个 ListFragment：

```
SecondListFragment SecondListFragment= (SecondListFragment )getFragmentManager().findFragmentById(R.id.second_list_fragment);
SecondListFragment.SetupSecondFragmentList();//its written on onListItemClick in FirstFragment 
```

SetupSecondFragmentList() 是一个在我的第二个 ListFragment 中设置列​​表视图的函数，它从第一个调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:19:15.430

好吧，这是因为您无法访问`FragmentManager`other `Activity`，这绝对是正常的。

您可以简单地将第二个片段提交到与第一个片段相同的容器（使用 single `Activity`）并使用方法`setCustomAnimations(...)`将您的事务处理为动画。

祝你好运！

# php - 查找数组中的共同值

> ID：14559643
> 
> 赞同：2
> 
> 时间：2013-01-28T10:07:04.683
> 
> 标签：php, arrays

嗨我有**两个**数组

`$arrays = Array ( [0] => 2 [1] => 3 ) ;`

**和**

```
$result_array = Array ( 
  [0] => Array ([0] => 1 
                [1] => sa 
                [2] => asa 
                [3] => sas 
                [4] => asa
                [5] => ada
                [6] => Y ) 
  [1] => Array ([0] => 2 
                [1] => TEST1
                [2] => TEST1
                [3] => TEST1
                [4] => TEST1 
                [5] => Coverage
                [6] => Y ) 
  [2] => Array ([0] => 3 
                [1] => TEST2
                [2] => TEST2
                [3] => TEST2
                [4] => TEST2
                [5] => Coverage
                [6] => Y ) ); 
```

我想要实现的是从 $result_array 获取所有数组，其中应该包含 $arrays 的值

我试过了`$new_array = array_intersect($arrays,$result_array);`

和

```
foreach($result_array as $array)
  {
for($i=0;$i<count($arrays);$i++)
{
    echo $arrays[$i];
    $key = array_search($array, $arrays[$i]); 
    $result = $array[$key];
}

break;
  } 
```

第二个给我这个错误`Warning: array_search() [function.array-search]: Wrong datatype for second argument in D:\xampp\htdocs\WEB_1\index.php on line 96`

还有其他方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:30:44.660

简单如**π**

```
$arrays = array(2,3);
$result_array = array( 
  0 => array(0 => "1", 
                1 => "sa",
                2 => "asa", 
                3 => "sas", 
                4 => "asa",
                5 => "ada",
                6 => "Y" ), 
  1 => array(0 => "2", 
                1 => "TEST1",
                2 => "TEST1",
                3 => "TEST1",
                4 => "TEST1", 
                5 => "Coverage",
                6 => "Y" ), 
  2 => array(0 => "3", 
                1 => "TEST2",
                2 => "TEST2",
                3 => "TEST2",
                4 => "TEST2",
                5 => "Coverage",
                6 => "Y" ));
$common = array();

foreach ($result_array as $arr) {
  foreach($arrays as $search){
    if(in_array($search, $arr)){
      $common[] = $arr;
    }
  }

}

print_r($common); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:19:18.247

像这样使用.... 交换 array_search() 函数中的参数。

```
$result = array();
foreach($result_array as $array)
{
    for($i=0; $i<count($arrays); $i++)
   {
       echo $arrays[$i];
       $key = array_search($arrays[$i], $array); 
       $result[] = $array[$key];
   } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:30:54.573

试试下面的代码

```
$new_array=array();
            foreach($arrays as $key=>$val)
            {
                if(array_key_exists($val,$result_array))
                {
                    $new_array=$result_array[$val];
                }
            } 
```

# vb.net - 我们如何使 PopUpMenu 在 VB.NET 中显示后停止？

> ID：14559645
> 
> 赞同：0
> 
> 时间：2013-01-28T10:07:08.570
> 
> 标签：vb.net, vb6-migration

`PopMenu`在 VB.NET 中显示控件时出现问题。在 VB6 中，`PopUpMenu`在我们之后也有代码之后，在屏幕事件上显示控制之后。但是当我们将其转换为 VB.NET 时，我们会`ContextMenu.Show()`发现控件并没有保持在屏幕上并执行下一个语句。此语句必须在单击 VB6 中的菜单项后执行。这没有发生。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:38:55.740

`ShowDialog()`会阻止代码，但不幸的`ContextMenu`是没有那个方法。您需要使用 a`Form`来获得此功能。

# php - 为什么这个准备好的 PHP PDO 语句在 query() 时不起作用？

> ID：14559646
> 
> 赞同：1
> 
> 时间：2013-01-28T10:07:08.007
> 
> 标签：php, mysql, pdo, prepared-statement

我可能很愚蠢，但我有这个函数，它根据输入计算必要的页数，从中计算需要多少页并返回它。

```
function get_total_pages($field, $table, $page_size = 20, $where_something = "", $equals_something = ""){
    global $dbh;
    try {
        if(empty($where_something)){
        // I deleted irrelevant code here
        }
        elseif(!empty($where_something) && !empty($equals_something)){
            $count_query = $dbh->prepare("SELECT COUNT(:field) FROM :table WHERE :where=:equals");
            $count_query->bindParam(":field", $field);
            $count_query->bindParam(":table", $table);
            $count_query->bindParam(":where", $where_something);
            $count_query->bindParam(":equals", $equals_something);
            $count_query->execute();
            $count = $count_query->fetch();
            $total_records = $count[0];                 // calculating number of records in history table
            $total_pages = ceil($total_records / $page_size);   // calculating number of pages necessary
            return $total_pages;
        }
        return false;
    }
    catch(PDOException $e){
        echo $e->getMessage();
    } 
```

我称之为
`$total_pages = get_total_pages("username", "comments", $page_size, "username", $_GET['user']);`

这是我得到的错误：

`SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''comments' WHERE 'username'='redbot'' at line 1`

但是，如果我将所有函数的代码换成更简单的 query() 而不是准备好的语句，它就可以工作，只要我在用户名后面加上引号：

```
function get_total_pages($field, $table, $page_size = 20, $where_something = "", $equals_something = ""){
    global $dbh;
    try {
        if(empty){
          //   irrelevant code
        }
        elseif(!empty($where_something) && !empty($equals_something)){
            $count_query = $dbh->query("SELECT COUNT({$field}) FROM {$table} WHERE {$where_something}={$equals_something}");
            $count = $count_query->fetch();
            $total_records = $count[0];                 // calculating number of records in history table
            $total_pages = ceil($total_records / $page_size);   // calculating number of pages necessary
            return $total_pages;
        }
        return false;
    }
    catch(PDOException $e){
        echo $e->getMessage();
    }
} 
```

`$total_pages = get_total_pages("username", "comments", $page_size, "username", "\"" . $_GET['user'] . "\"");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:10:43.197

您[不能在准备好的语句中使用动态字段和表名称。](https://stackoverflow.com/questions/1622521/which-tokens-can-be-parameterized-in-pdo-prepared-statements)

您必须自己检查它们（理想情况下，根据现有和允许的表和列名称的白名单）并自己将它们放入查询字符串中。

[以下](https://stackoverflow.com/questions/2542410/how-do-i-set-order-by-params-using-prepared-pdo-statement)是一些代码片段，展示了如何执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:11:27.273

你不能用占位符定义列名，也看看`bindParam`和之间的区别`bindValue`

通常，参数仅在数据操作语言 (DML) 语句中合法，在数据定义语言 (DDL) 语句中不合法。

# asp.net - SharePoint 中的自定义控件不存在异常

> ID：14559648
> 
> 赞同：0
> 
> 时间：2013-01-28T10:07:14.480
> 
> 标签：asp.net, sharepoint, user-controls, web-parts

我正在尝试将自定义网站添加`UserControl`到我的 SharePoint 应用程序。我已将我添加`UserControl`到 SharePoint WebPart，现在我正尝试在我的页面中加载该 WebPart。

但是当我添加 WebPart 时，我得到以下异常：

```
The file /usercontrols/Test3Report.ascx does not exist. 
```

但我 100% 确定文件和文件夹都存在。到用户控件对`path`我来说似乎也很好。这就是我尝试加载控件的方式：

```
protected string UserControlPath = @"~/usercontrols/";
protected string UserControlName = @"Test3Report.ascx";

private Test3Report mycontrol;

protected override void CreateChildControls()
{
    try
    {
        mycontrol = (Test3Report)this.Page.LoadControl(UserControlPath + UserControlName);
        Controls.Add(mycontrol);
    }
    catch (Exception CreateChildControls_Exception)
    {
        exceptions += "CreateChildControls_Exception: " + CreateChildControls_Exception.Message;
    }
    finally
    {
        base.CreateChildControls();
    }
} 
```

这对我来说似乎是正确的。我不知道为什么它抱怨我找不到`Test3Report.ascx`.

我读过一些关于 TrustLevel 未设置为 full 或其他内容的内容。会是这样吗？还是有其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:04:25.123

尝试通过在 VS2010 的解决方案资源管理器中右键单击您的解决方案来添加新的自定义控件 -> 添加 -> 新项目，从右侧列表中选择 sharepoint2010 后，选择“用户控件”。这样，您的控件将自动创建并稍后部署在映射的“~/_ControlTemplates/PROJECTNAME/UserControlNAME.ascx”文件夹中，以后可以引用该文件夹。

还要确保用户控件包含在包中，方法是打开解决方案资源管理器下“包”文件夹中的“.package”文件，并检查用户控件是否列在“包中的项目”下。

提示：*如果您的用例可能，您可以将目标页面置于设计模式，然后通过将 .ascx 文件从解决方案资源管理器拖放到您中来添加自定义控件，而不是在 CreateChildControls() 中以编程方式添加自定义控件页。*

我希望这会有所帮助:)

# javascript - 根据屏幕宽度切换“a href”的文本

> ID：14559650
> 
> 赞同：1
> 
> 时间：2013-01-28T10:07:16.367
> 
> 标签：javascript, jquery, css

使用 jQuery/jQueryMobile，我有一个链接如下：

```
<a href="index.html" id="HomeLink" data-role="button" data-mini="true" data-icon="home" data-iconpos="top" >Home</a> 
```

我正在尝试测试各种屏幕尺寸，如果屏幕宽度小于 300px，我想更改：

```
data-iconpos="top" 
```

至

```
data-iconpos="notext" 
```

所以我只得到图标。我曾尝试使用 JavaScript 来做到这一点：

```
var hl = document.querySelector('#HomeLink');
if ($(window).width() < 300) {
    hl.setAttribute("data-iconpos", "notext");
} else {
    hl.setAttribute("data-iconpos", "top");
} 
```

但它不会起作用。

问题：可以用 CSS 代替吗？

如果不是：如何在 JavaScript 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:10:16.397

据我所知，您无法真正使用 CSS 设置数据属性，但既然您已经在使用 jQuery，为什么不一直尝试一下：

```
$('#HomeLink').data('iconpos', ($(window).width() < 300 ? 'notext' : 'top') ); 
```

请记住将其包装在准备好的文件中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:15:41.470

您可以通过这种方式更改代码：

```
 var hl = $('#HomeLink');
    if ($(window).width() < 300) {
        hl.data("iconpos", "notext");
    } else {
        hl.data("iconpos", "top");
    } 
```

与`.attr()`：

```
 var hl = $('#HomeLink');
    if ($(window).width() < 300) {
        hl.attr("data-iconpos", "notext");
    } else {
        hl.data("data-iconpos", "top");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:18:21.880

尝试将代码包装在窗口调整大小事件中，例如：

```
$(window).resize(function () {
check();
})
$(function () {
check();
})

function check() {
if ($(window).width() < 300) {
    $('#HomeLink').attr('data-iconpos', 'notext');
} else {
    $('#HomeLink').attr('data-iconpos', 'top');
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T10:36:03.907

我想建议使用不同的方法。

这里`data-iconpos="top"`看起来有点格格不入。我有一种感觉（也许我错了）您正在尝试将样式内联到 HTML 中。

为什么不尝试媒体查询？

```
@media screen and (max-width: 300px) {
    #HomeLink {
        /* styling for HomeLink when screen width is less than 300px */
    }
} 
```

这是一个纯 CSS 的解决方案。如果用户决定在页面加载后调整屏幕大小，它会起作用。**[尝试在此 jsfiddle](http://jsfiddle.net/XLTwP/)**中调整“结果”框架的大小，并注意链接颜色的变化。

推荐阅读：

*   [http://alistapart.com/article/responsive-web-design](http://alistapart.com/article/responsive-web-design)
*   [https://developer.mozilla.org/en-US/docs/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

以下是有关媒体查询的文档：http: [//www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

**警告**：记住咳咳，IE 低于 9，咳咳……

# http - 交互式 HTTP 服务器

> ID：14559657
> 
> 赞同：2
> 
> 时间：2013-01-28T10:07:42.783
> 
> 标签：http, integration-testing, httpserver

为了在我的应用程序中手动测试 HTTP 客户端，我想使用一个工具来启动我的应用程序可以连接到的 HTTP 服务器，并让我手动响应来自我的应用程序的请求。我基本上是在寻找一个带有 GUI 的工具，它列出了所有传入的请求并允许我选择状态代码并输入响应消息。我已经用单元测试测试了这个功能，但我也想手动验证它，不要模拟等。

听起来很简单，但我没有找到这样的工具。我发现了一些可以编写脚本但没有交互式的。你认识一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:23:14.647

这可以通过在[servlet](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpServlet.html)服务方法中创建 Swing GUI 对话框弹出窗口来相对容易地编写。从未见过 Tomcat 以这种方式运行，但可能会。只是，请注意服务器超时。它可能不足以让您进行输入并需要在客户端进行配置。此外，并行调用会产生多个可能难以响应的弹出窗口，但可能这是单个客户端应用程序。

作为最简单的解决方案，服务器 GUI 可以在调用后简单地处理，并在下一个调用到达时重新创建。这将使一切独立于 servlet 容器如何管理 servlet（它是否保留，是否被销毁，也许类被卸载，谁知道）。高级解决方案可能包括将通过其自己的 JSP 页面进行交互的“服务器 servlet”，但是当新调用到达时更新它可能会很复杂（除非可能定期刷新）。

# c - 从 COBOL 调用 C：stderr 出现问题

> ID：14559666
> 
> 赞同：0
> 
> 时间：2013-01-28T10:08:26.237
> 
> 标签：c, cobol, hp-nonstop, tandem

从我的 COBOL 程序中，我调用了我的 C 模块，它本身调用了一个专有库。这个库坚持写到，尽管由于主程序是用 COBOL 编写的`stderr`，所以没有可用的。`stderr`因此，程序中止并显示以下消息：

```
cannnot open stderr 
```

惠普的支持人员建议我发布

```
PARAM SAVE-ENVIRONMENT ON 
```

在运行程序之前在 TACL 中。这确实解决了我的问题。但是，我的程序将被多个脚本中的几个人使用，我不想强​​迫他们`PARAM SAVE-ENVIRONMENT ON`在运行程序之前发布。

是否有一些 COBOL85 指令允许我在不手动更改任何参数的情况下正确运行程序？就像是

```
?PARAM SAVE-ENVIRONMENT ON 
```

会很好...

编辑：

因为我能够修改 C 模块（*而不是*库），所以我对基于 C 的解决方案完全满意。但是，`stderr`在调用库之前简单地打开并不能解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:25:50.940

如果你可以从 Cobol 执行 TACL 命令，那就可以了。

您可以在分配给 stderr 的 Cobol 中打开文件吗？也许确切地发现 PARAM SAVE-ENVIRONMENT ON 的作用可能也会有所帮助。

大多数 C 贡献者不会了解 HP/Tandem 上的操作系统，这会影响答案的价值。我不知道您是否可以从您的 C 程序中“退出”以发出 TACL 命令或运行 TACL 脚本。

对你的 HP/Tandem 的 Cobol、TACL 和 C 手册进行一些研究可能会引导你找到答案，也许还有一两个谷歌。

无论如何，在他们的脚本中包含该语句有什么问题？如果他们希望程序正常工作？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:32:17.360

作为 HP NonStop 开发人员，我有一些问题。stderr 是 C 中的一个特殊符号。文件通道 2（0 标准输入，1 标准输出，2 标准错误），但这些是低级通道号。stderr 是指向 FILE 结构的默认指针。回到 GNU/Linux，/usr/include/stdio.h 将它们定义为

```
/* Standard streams.  */
extern struct _IO_FILE *stdin;          /* Standard input stream.  */
extern struct _IO_FILE *stdout;         /* Standard output stream.  */
extern struct _IO_FILE *stderr;         /* Standard error output stream.  */
/* C89/C99 say they're macros.  Make them happy.  */
#define stdin stdin
#define stdout stdout
#define stderr stderr 
```

打开一个名为“stderr”的文件不是一回事。创建的任何进程都应该已经打开了 0、1 和 2。main 使用什么编程语言无关紧要。HP NonStop 与其他 POSIX-ey 系统有那么大的不同吗？stderr（文件指针）通常对包含 stdio.h 的任何代码都是全局的

顺便说一句，来自 OpenCOBOL 和 GNU/Linux 的粉丝：关于你对经验教训的其他评论，

*   务必混合使用 COBOL 和 C（以及 Fortran、Ada、Vala、Python、Java 和 ...）
*   一定要使用 COBOL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:45:54.823

`PARAM SAVE-ENVIRONMENT ON`使 HP COBOL 程序保存环境变量（它们在启动时从 Guardian 作为消息接收）以供将来`getenv()`从 C 模块调用。

实际上，我正在使用的库试图打开`stderr`，因为它无法读取环境变量。一种解决方案是将 设置`PARAM SAVE-ENVIRONMENT`为`ON`，以便`getenv()`再次正常运行。这必须在每个 TACL 会话中完成。

除非：您在 COBOL 程序中使用`?SAVE STARTUP`- 或 -指令来达到相同的效果。`?SAVE ALL`

得到教训：

*   不要混合 COBOL 和 C。
*   根本不要使用 COBOL。

# php - 从 sales_quote_add_item 观察者中止产品添加

> ID：14559668
> 
> 赞同：0
> 
> 时间：2013-01-28T10:08:30.997
> 
> 标签：php, magento, observers

在我的`sales_quote_add_item`-observer 中，我将如何以标准方式使用自定义错误消息中止产品添加？显然试图谷歌它并检查核心来源而没有变得更聪明......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:15:37.163

你可能会抛出新的异常。像：

```
Mage::throwException(
            Mage::helper('sales')->__('Nominal item can be purchased standalone only. To proceed please remove other items from the quote.')
        ); 
```

查看发送 sales_quote_add_item 事件的类和方法：

```
class Mage_Sales_Model_Quote extends Mage_Core_Model_Abstract
...
public function addItem(Mage_Sales_Model_Quote_Item $item) 
```

它还会抛出异常，该异常将在控制器中捕获并正确显示。

你也可以试试这个：

```
$observer->getEvent()->getQuoteItem()->getQuote()->addErrorInfo(..);
Mage::throwException(..); 
```

下面是 addErrorInfo 函数的说明：

```
public function addErrorInfo($type = 'error', $origin = null, $code = null, $message = null, $additionalData = null) 
```

# ios6 - 使用 Autolayout 为 IB 中创建的视图设置动画

> ID：14559677
> 
> 赞同：0
> 
> 时间：2013-01-28T10:08:54.433
> 
> 标签：ios6, core-animation, autolayout, nslayoutconstraint

我有很多在代码上创建的标签和按钮的视图，因为在 IB 中太复杂了。这工作正常。

在 IB 中，我还创建了一个输入视图，我希望通过点击按钮从底部显示该视图。如果你愿意的话，非常像键盘。因为这个输入视图是向前的，所以它是在 IB 上创建的，它包含滑块、标签等。我没有将它添加为 IB 上 self.view 的子视图。

通过点击按钮，我为输入视图设置了所有约束：我设置了宽度，我将它设置在 self.view 的底部，垂直大小，然后我删除了这个约束，我添加了实际的高度和然后我用 [self.view layoutIfNeeded] 制作动画。

问题是输入视图 itsef 动画正确，但它的子视图没有那么多。它们有点像一下子出现。

我尝试以编程方式添加一个输入视图，只有一个开关。它的动画效果非常好。

我猜测控件与其superView之间的约束存在问题。但我不确定，因为虽然它们的动画效果不正确，但它们位于正确的位置并且比例正确。我想我在这里遗漏了一些东西。也许混合 IB 集控件和视图并以编程方式修改它们不是一个好主意？

有人有这方面的经验吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:52:23.320

我建议您在 Apple 的开发板上发布有关此主题的信息。我最近在那里看到了几个帖子。回复的苹果工程师说，使用自动布局，您基本上可以让自动布局拥有视图的中心、大小，有时甚至是变换。

要为使用自动布局的视图设置动画，您显然应该使用 UIView 块动画并为视图上的约束设置设置动画。然后系统将动画您所做的更改。

不确定是否以编程方式添加新视图并让它们动画到位。

# c# - Elmah 最大日志条目

> ID：14559679
> 
> 赞同：3
> 
> 时间：2013-01-28T10:08:57.677
> 
> 标签：c#, asp.net, elmah

我将[Elmah](http://code.google.com/p/elmah/)生成的异常保存为 XML 文件。

有什么方法可以配置它以自动删除超过 X 天的文件？或者目录中的最大文件数？或者我是否需要创建一个自定义批处理作业来执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T15:55:35.507

来自[Elmah 项目站点](http://code.google.com/p/elmah)的[ErrorLogImplementations](http://code.google.com/p/elmah/wiki/ErrorLogImplementations)。（为强调添加斜体）

> **XmlErrorLog**
> 
> XmlFileErrorLog 将错误存储到可配置目录中的松散 XML 文件中。每个错误都有自己的文件，其中包含其所有详细信息。这些文件可以轻松复制、删除、压缩或邮寄给某人以进行进一步诊断。它不需要任何数据库引擎或设置，如 SQL Server 和 Oracle，因此管理开销非常小，您无需担心托管计划的额外成本。虽然很简单，但它依赖于文件系统的性能来粉碎目录、读取文件并对其进行排序。*保持基于 XmlFileErrorLog 平稳运行的日志的一种聪明方法是通过安排任务定期归档旧日志并清理文件夹来限制文件的数量。*

您将需要创建一个自定义批处理作业来执行此操作。

# c# - C#函数中的多种数据类型输入

> ID：14559681
> 
> 赞同：0
> 
> 时间：2013-01-28T10:08:57.830
> 
> 标签：c#, .net, arduino, .net-micro-framework, netduino

我正在从 Arduino（c 语言）切换到 Netduino（c# 语言）。

在我的 arduino 程序中，我有以下功能（内置）：

[约束](http://arduino.cc/en/Reference/constrain)

我想将其转换为 C#。我有以下代码：

```
int ConstrainValue(int value, int min, int max)
    {
        int Value = value;
        int Min = min;
        int Max = max;

        if (Value >= Max)
        {
            Value = Max;
            return Value;
        }
        else if (Value <= Max)
        {
            Value = Min;
            return Value;
        }
        return Value;
    } 
```

但是，我也希望能够将其用于`double`数据类型。是否可以修改函数以便可以使用多种数据类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T10:12:39.123

它是，使用`IComparable`.

```
static T ConstrainValue<T>(T value, T min, T max) where T : IComparable
{
    if (value.CompareTo(max) > 0)
        return max;
    else if (value.CompareTo(min) < 0)
        return min;
    return value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:11:43.787

是的，您需要将其设为通用函数，如下所示：

`T ConstrainValue<T>(T value, T min, T max) where T : IComparable`

我认为您需要添加更多接口

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T10:17:00.783

通过指定`struct`，调用方法时不会装箱，但使用时调用时仍会得到装箱，`IComparable`因为`CompareTo`该接口方法需要一个`object`.

所以使用`IComparable<T>`，我很确定现在没有拳击：

```
 private static T ConstrainValue<T>(T value, T min, T max)
      where T : struct, IComparable<T>
    {
        if (value.CompareTo(max) > 0)
        {
            return max;
        }

        if (value.CompareTo(min) < 0)
        {
            return min;
        }

        return value;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T16:09:42.147

.net micro (netduino)从 v4.2 开始**不支持泛型**。

您将不得不使用另一种方案，例如将对象作为参数然后执行工作的函数。然后，您必须在调用函数的返回值上使用“as”或强制转换：

```
 object ConstrainValueInt(object value, object min, object max)
        {
   /* this could still get you in trouble with bool type */
          if (value.GetType().isValueType && min.GetType().isValueType && max.GetType().isValueType )
          return ( (value >= max)? max : ((value <= min)? min : value));
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T10:18:27.443

通过使用泛型，您可以使用多种数据类型

T ConstrainValue(T value, T min, T max) 其中 T : IComparable

# python - 没有任何循环的 Scipy 快速一维插值

> ID：14559687
> 
> 赞同：7
> 
> 时间：2013-01-28T10:09:13.243
> 
> 标签：python, numpy, matplotlib, scipy

我有两个二维数组 x(ni, nj) 和 y(ni,nj)，我需要在一个轴上进行插值。我想为每个 ni 沿最后一个轴进行插值。

我写

```
import numpy as np
from scipy.interpolate import interp1d

z = np.asarray([200,300,400,500,600])
out = []
for i in range(ni):
    f = interp1d(x[i,:], y[i,:], kind='linear')
    out.append(f(z))
out = np.asarray(out) 
```

但是，我认为如果数组大小太大，由于循环，这种方法效率低下且速度慢。像这样插入多维数组的最快方法是什么？有没有办法在没有循环的情况下执行线性和三次插值？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T23:05:22.667

您提出的方法确实有一个 python 循环，因此对于较大的值`ni`它会变慢。就是说，除非你打算拥有大的，否则你`ni`不应该太担心。

我使用以下代码创建了示例输入数据：

```
def sample_data(n_i, n_j, z_shape) :
    x = np.random.rand(n_i, n_j) * 1000
    x.sort()
    x[:,0] = 0
    x[:, -1] = 1000
    y = np.random.rand(n_i, n_j)
    z = np.random.rand(*z_shape) * 1000
    return x, y, z 
```

并用这两个版本的线性插值对它们进行了测试：

```
def interp_1(x, y, z) :
    rows, cols = x.shape
    out = np.empty((rows,) + z.shape, dtype=y.dtype)
    for j in xrange(rows) :
        out[j] =interp1d(x[j], y[j], kind='linear', copy=False)(z)
    return out

def interp_2(x, y, z) :
    rows, cols = x.shape
    row_idx = np.arange(rows).reshape((rows,) + (1,) * z.ndim)
    col_idx = np.argmax(x.reshape(x.shape + (1,) * z.ndim) > z, axis=1) - 1
    ret = y[row_idx, col_idx + 1] - y[row_idx, col_idx]
    ret /= x[row_idx, col_idx + 1] - x[row_idx, col_idx]
    ret *= z - x[row_idx, col_idx]
    ret += y[row_idx, col_idx]
    return ret 
```

`interp_1`是您的代码的优化版本，遵循 Dave 的回答。`interp_2`是线性插值的矢量化实现，它避免了任何 python 循环。编写这样的代码需要对 numpy 中的广播和索引有充分的了解，而且有些事情的优化程度会低于实际`interp1d`情况。一个典型的例子是找到插入值的 bin：`interp1d`一旦找到 bin，肯定会提前跳出循环，上面的函数是将值与所有 bin 进行比较。

所以结果将非常依赖于什么`n_i`和`n_j`是什么，甚至你`z`的插值数组有多长。如果`n_j`是小和`n_i`大，您应该期望从 中获得优势，如果相反`interp_2`，则从 中获得优势。`interp_1`较小的`z`应该是一个优势`interp_2`，较长的`interp_1`。

实际上，我已经用各种`n_i`和对这两种方法进行了计时`n_j`，对于`z`形状`(5,)`和`(50,)`，以下是图表：

![在此处输入图像描述](../Images/902f37c99fbd4f9c406b914a81289324.png)

![在此处输入图像描述](../Images/6773504324d0c3f317870cc58cc45827.png)

因此，您似乎应该随时随地`z`与其他地方一起去。毫不奇怪，门槛是不同的形状，现在左右。似乎很容易得出结论，您应该坚持使用您的代码 if ，但如果不是，请将其更改为类似上面的内容，但该声明中有大量的推断！如果您想自己进一步试验，这里是我用来生成图表的代码。`(5,)``interp_2``n_j < 1000``interp_1``z``(50,)``n_j < 100``n_j * len(z) > 5000``interp_2`

```
n_s = np.logspace(1, 3.3, 25)
int_1 = np.empty((len(n_s),) * 2)
int_2 = np.empty((len(n_s),) * 2)
z_shape = (5,)

for i, n_i in enumerate(n_s) :
    print int(n_i)
    for j, n_j in enumerate(n_s) :
        x, y, z = sample_data(int(n_i), int(n_j), z_shape)
        int_1[i, j] = min(timeit.repeat('interp_1(x, y, z)',
                                        'from __main__ import interp_1, x, y, z',
                                        repeat=10, number=1))
        int_2[i, j] = min(timeit.repeat('interp_2(x, y, z)',
                                        'from __main__ import interp_2, x, y, z',
                                        repeat=10, number=1))

cs = plt.contour(n_s, n_s, np.transpose(int_1-int_2))
plt.clabel(cs, inline=1, fontsize=10)
plt.xlabel('n_i')
plt.ylabel('n_j')
plt.title('timeit(interp_2) - timeit(interp_1), z.shape=' + str(z_shape))
plt.show() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:38:14.393

一种优化是像这样分配结果数组一次：

```
import numpy as np
from scipy.interpolate import interp1d

z = np.asarray([200,300,400,500,600])
out = np.zeros( [ni, len(z)], dtype=np.float32 ) 
for i in range(ni):
    f = interp1d(x[i,:], y[i,:], kind='linear')
    out[i,:]=f(z) 
```

这将为您节省一些在您的实现中发生的内存复制，这发生在对`out.append(...)`.

# magento - Magento中图像代码的路径

> ID：14559690
> 
> 赞同：0
> 
> 时间：2013-01-28T10:09:17.580
> 
> 标签：magento

我正在使用magento 1.6。我想知道哪些文件包含图像功能的代码，例如上传图像时，不包括图像等。实际上我想根据用户类别隐藏产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:20:49.253

有几个文件处理您的图像。查看 app/code/core/Mage/Catalog/Helper/Image.php 作为入口点。

# html - 是否有任何电子商务插件可以集成

> ID：14559691
> 
> 赞同：1
> 
> 时间：2013-01-28T10:09:18.343
> 
> 标签：html, web-applications, e-commerce

是否有任何网络商店插件可以集成到我现有的网站中？

我知道有很多 WordPress 插件，但作为开发人员，我正在制作自己的应用程序，我不想拥有他们的模板，因为首先我会为这些网上商店服务收费，我不能给他们 WordPress店铺..

我在考虑做个人电子商务服务，但老实说为什么要花时间尝试“重新发明轮子”。

如果有人知道一些可以提供帮助的插件，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:29:58.613

作为一名网络开发人员，涉及到很多东西。您正在寻找的**插件**将取决于您的网站是如何开发的、托管在哪里以及**您真正想用它做什么**。

开始的主要问题是：

*   你的网站地址是什么。
*   在哪里托管。
*   您将使用什么服务器（共享服务器不允许您使用自定义插件）。
*   你的目标是什么（这是你最需要关心的）。

一旦你回答了这些问题，你就可以开发任何你想要的东西，但在此之前，如果你想为其他人或公司创建电子商务网站，那么我的建议是你从购物车开始。

购物车已经过测试，可以满足您客户的所有需求，除非需要高级编程，这意味着您可以自己编写代码或在互联网上搜索您需要的东西，因为它最有可能拥有。

现在，我认为您应该从[http://opencart.com](http://opencart.com)之类的免费购物车开始。您需要做的就是在您的服务器下创建一个数据库，更新商店 URL 的 DNS 以将其指向您的服务器。完成此操作后，您当然需要按月付款或按您的意愿付款，但您需要收到钱，因此使用[**PayPal**](http://paypal.com)帐户您可以创建**定期付款**，PayPal 将根据您指定的设置自动向您的客户收费定期付款。

我自己使用它，因为它是最简单的方法。此外，有些网站可以让您选择将它们用作服务提供商/合作伙伴，这意味着您和该公司都可以分享利润。所有决定权都在你手里。

希望有帮助 ;D

**编辑**

我想每个人都认为同样简单的方法^^，

Soz重新发布..开始时没有答案：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:15:07.133

我不清楚你所说的电子商务是什么意思。如果您正在寻找完整的开发但需要较少的努力，则可以使用 CI 框架。如果你只是在寻找购物车——检查这个线程 ->[购物车框架](https://stackoverflow.com/questions/12684919/shopping-cart-framework)

如果您正在寻找商业用途，并且想要更轻松地可靠，您可以购买可用的脚本。

这是此类产品之一 [http://www.inoutscripts.com/products/inout_shopping_cart/](http://www.inoutscripts.com/products/inout_shopping_cart/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:17:32.883

如果您考虑到商店应具备的所有功能，则“插件”可能不足以运行“商店”：计费、客户数据库、产品可用性、运输、税收等——但对于小型/简单的解决方案，您可以寻找像[http://www.opencart.com这样的“购物车”](http://www.opencart.com)

更多提示： [哪些 PHP 开源购物车解决方案具有使我作为 Web 开发人员受益的功能？](https://stackoverflow.com/questions/69715/which-php-open-source-shopping-cart-solutions-have-features-that-benefit-me-as-t)

（这可能是重复的吗？）

# php - PHP Mysqli 没有错误，没有查询

> ID：14559698
> 
> 赞同：0
> 
> 时间：2013-01-28T10:09:50.077
> 
> 标签：php, mysqli

我正在尝试使用 mysqli 而不是 mysql 查询，但它不起作用。mysqli：

```
$mysqli->connect($db1['host'], $db1['user'], $db1['password'], $db1['database']);
if ($mysqli->connect_errno) {
        printf("Connect failed: %s\n", $mysqli->connect_error);
        exit();
    } 
```

没有错误。如果我尝试这个查询：

```
if(isset($_POST['username']))
{
    $password = $_POST['p']; 

    $random_salt = hash('sha512', uniqid(mt_rand(1, mt_getrandmax()), true));

    $password = hash('sha512', $password.$random_salt);

    if ($insert_stmt = $mysqli->prepare("INSERT INTO members (username, email, password, salt) VALUES (?, ?, ?, ?)")) {    
       $insert_stmt->bind_param('ssss', $username, $email, $password, $random_salt); 

       $insert_stmt->execute();
    }
    echo "Success";
} 
```

没有插入任何内容，mysqli 错误没有错误。表结构正确，表示成功。我是mysqli的新手，我习惯了mysql。错误报告有什么我错过的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:17:14.150

最好试试这个，它来自 php 手册

```
<?php
$mysqli = new mysqli("localhost", "user", "password", "database");
if ($mysqli->connect_errno) 
{
echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli- >connect_error;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:19:55.650

你必须这样做

```
$password = hash('sha512', $password.$random_salt);

$insert_stmt = $mysqli->prepare("INSERT INTO members (username, email, password, salt) VALUES (?, ?, ?, ?)");     
$insert_stmt->bind_param('ssss', $username, $email, $password, $random_salt); 

if($insert_stmt->execute())
{
    echo "Success";
} 
```

实际上，您首先检查查询，然后绑定参数，因为它只是显示`Success`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:00:06.037

你可以做 $stmt->execute(); 在这样的 if 循环中：

```
if ($stmt->execute()){

    $result = $stmt->affected_rows;

    if ($result) { echo "yay" } else { echo "boo"; }
}
else {
    printf("Execute error: %s", $stmt->error);
} 
```

# grid - 剑道网格特价人物

> ID：14559700
> 
> 赞同：2
> 
> 时间：2013-01-28T10:10:02.150
> 
> 标签：grid, kendo-ui, character

我正在使用 Kendo Grid 来读取 JSON 数据。“内容类型：”应用程序/json；charset=utf-8"," 已指示，但特殊字符如 'é'、'à' 等...未编码并且看起来像 "%Ã" 或其他东西。如何将它们显示为“é”、“à”等...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:15:55.993

似乎您正在为数据发送正确的编码，但是......包括网格的 HTML 页面呢？

尝试添加`<meta charset="UTF-8"/>`到`head`您的 HTML 部分。

# android - 手机重启或开机后需要将我的应用程序切换到后台

> ID：14559704
> 
> 赞同：0
> 
> 时间：2013-01-28T10:10:20.573
> 
> 标签：android, android-intent

在手机重启/开机后，我需要我的 android 应用程序处于后台模式。

目前我正在使用以下代码，以便在手机重启/开机后成功启动我的应用程序。

**AndroidManifest.xml：**

```
<receiver android:enabled="true" android:name="my_package.BootUpReceiver" android:permission="android.permission.RECEIVE_BOOT_COMPLETED" >
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</receiver> 
```

**BootUpReceiver.java：**

```
public class BootUpReceiver extends BroadcastReceiver
{
    private static SharedPreferences aSharedSettings;

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        aSharedSettings = context.getSharedPreferences("MyPreferences", Context.MODE_PRIVATE);
        boolean isUserLoggedIn = aSharedSettings.getBoolean(Key.AUTHENTICATED, false); 
        if(isUserLoggedIn) 
        {
            Intent aServiceIntent = new Intent(context, MyHomeView.class);
                    aServiceIntent.addCategory(Intent.CATEGORY_HOME);
            aServiceIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startActivity(aServiceIntent); 
        }
    }
} 
```

正如我上面所说，我的应用程序在手机重启/开机后成功启动。

但是，手机重启/开机后，我的应用程序处于前台模式。但我需要我的应用程序处于后台模式。

谁能说一下，如何在手机重启或开机后使应用程序处于后台模式。

我什至尝试将意图类别更改为

```
<category android:name="android.intent.category.HOME" /> 
```

但是在里面没有用。谁能帮帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:01:45.113

> 我需要我的应用程序在手机重启后在后台运行，以便用户可以从最小化的应用程序中进行选择

我认为你的方法是错误的。您现在要做的就是将您的应用程序图标添加到最近的应用程序列表中。您的应用程序不会在后台运行，我认为您并不真正想要它。我对吗？

由 android 管理的最近应用程序列表和恕我直言，强制您的应用程序出现在最近的应用程序列表中并不是一个好主意。用户将在需要时从桌面上的启动器或图标启动您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:34:41.837

如果您的广播接收器工作正常并且应用程序成功启动，那么您可以在`MyHomeView`Activity 的`onCreate`方法中使用以下代码转到主屏幕。

> 诀窍是在应用程序启动时以编程方式单击 HOME 按钮。

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

您可以从 BroadcastReceiver 传递一些变量来区分正常请求和 BroadcastReceiver 的请求以使上述代码有条件。

**但是，如果您想始终在后台执行它，那么最好使用[Service](http://developer.android.com/reference/android/app/Service.html)。**

**建议将您的代码更改为服务以在后台运行它。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:42:14.010

列奥尼多斯回答的建议是正确的。

但是，这只是一个解决方法：

在我的 BootUpReceiver 中，我为此设置了一个单独的布尔标志！（这是一种不好的方法。但只是一种解决方法）

```
SharedPreferences.Editor aPrefEditor = aSharedSettings.edit();
aPrefEditor.putBoolean(Key.IS_DEVICE_RESTARTED, true);
aPrefEditor.commit(); 
```

在 MyHomeView 的 Oncreate 方法中：

```
boolean isDeviceRestarted = aSharedSettings.getBoolean(Key.IS_DEVICE_RESTARTED, false);
if(isDeviceRestarted)
{
    SharedPreferences.Editor aPrefEditor = aSharedSettings.edit();
    aPrefEditor.putBoolean(MamaBearKey.IS_DEVICE_RESTARTED, false);
    aPrefEditor.commit();
    moveTaskToBack(true);
} 
```

谢谢

# c# - GridView DevExpress 检查是否有任何单元格为空

> ID：14559707
> 
> 赞同：4
> 
> 时间：2013-01-28T10:10:37.547
> 
> 标签：c#, devexpress

![在此处输入图像描述](../Images/b5e4b66b40e755895b856e28f0779f8f.png)

我需要检查一个单元格是否为空并存储一条消息，然后在包含所有消息的每一行中创建一个新单元格

但我不知道如何使用 DevExpress 有人可以帮助我的代码

```
 string Name = "First Name";
    string FName = "Father Name";
    string LName = "Last Name";
    string EmpCode = "Employee Code";
    string Tax = "Tax#";
    string SocSec = "Soc.Sec#";
    string EmpType = "Employment Type";
    string DepCode = "Department Code";
    string DepDesc = "Department Description";
    private void simpleButton1_Click(object sender, System.EventArgs e)
    {
        try
        {
            OleDbConnection con = new OleDbConnection();
            con.ConnectionString = "Provider=Microsoft.Ace.OLEDB.12.0;Data Source=C:\\Users\\pc\\Documents\\Emp.xlsx;Extended Properties=\"Excel 12.0;HDR=Yes\"";

            con.Open();
            DataTable dtSchema;
            dtSchema = con.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });
            OleDbCommand Command = new OleDbCommand ("select * FROM [" + dtSchema.Rows[0]["TABLE_NAME"].ToString() + "]", con);
            OleDbDataAdapter da = new OleDbDataAdapter(Command);
            DataSet ds = new DataSet ();
            da.Fill(ds);
            dataGrid1.DataSource = ds.Tables[0];
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
```

这个循环没有给我关于空单元格的正确信息我认为我写的内容不正确也许还有另一种更好的方法......

```
 for (int rows = 0 ; rows < gridView3.RowCount ; rows ++)
        {
            string[] msg = new string[50];

            if ((gridView3.GetRowCellValue(rows, gridView3.Columns["LName"])) == null)
            {
                msg[rows] = "name missing";
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:50:01.263

据我所知，单元格的值不会为空。然而，底层数据源将具有空值。

要检查单元格的数据是否为空或从空值求和：

```
private bool IsNullValue(PivotDrillDownDataSource ds, PivotGridField field)
{
    if (ds.RowCount == 0 || field == null) return false;
    for (int i = 0; i < ds.RowCount; i++)
    {
        if (Equals(ds[i][field], null))
        return true;
    }
    return false;
 } 
```

要更改空单元格中的文本：

```
if (IsNullValue(e.CreateDrillDownDataSource(), e.DataField))
     e.DisplayText = "NULL OR SUM WITH NULL"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-31T12:40:04.867

我遇到了同样的问题，下面的代码对我来说很好，只是与 OP 尝试的略有不同。我希望它会帮助某人。

```
for (int rows = 0 ; rows < gridView3.RowCount ; rows ++)
    {
        string[] msg = new string[50];

        if ((gridView3.GetRowCellValue(rows, "LName")) == null)
        {
            msg[rows] = "name missing";
        }
    } 
```

LName 需要替换为字符串 fieldName。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T09:49:03.663

```
private void gridViewPro_RowStyle(object sender, 
    DevExpress.XtraGrid.Views.Grid.RowStyleEventArgs e)
{
    GridView View = sender as GridView;
    if (e.RowHandle >= 0)
    {
        double Sale = Convert.ToDouble(
            View.GetRowCellDisplayText(e.RowHandle, View.Columns["PRO_S3M"]));
        double Qua = Convert.ToDouble(
            View.GetRowCellDisplayText(e.RowHandle, View.Columns["PRO_QTY"]));
        if (Sale > 0 && Qua > 0)
        {
            if (Sale >= Qua)
            {
                e.Appearance.BackColor = Color.OrangeRed;
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T10:17:31.793

使用 AspxGridView 这个事件

```
 protected void grid_HtmlDataCellPrepared(object sender, ASPxGridViewTableDataCellEventArgs e)
{        // Get Cell Values here and compare as per your conditions
    string text = e.CellValue.ToString();                   
 } 
```

# c# - c# 使用 snmp 获取所有打印机的页数

> ID：14559727
> 
> 赞同：1
> 
> 时间：2013-01-28T10:11:57.070
> 
> 标签：c#, snmp, mib, oid

我有需要获取黑色、彩色、扫描页数（总数）的 ac# 程序。

我目前正在使用带有 OID 的 SNMP 来获取它，但这非常困难，因为每台打印机都有自己的 OID。问题是每台打印机都有自己的 MIB 编号来获取黑色、彩色、扫描页数。

我正在寻找一种适用于大多数（如果不是全部）的通用解决方案。关于如何做到这一点的任何想法和例子？

# javascript - 防止 Dojo DropdownMenu 关闭

> ID：14559728
> 
> 赞同：0
> 
> 时间：2013-01-28T10:12:03.240
> 
> 标签：javascript, dojo

我使用 Dojo 增强网格来显示各种数据。使用 DropDownMenu 我让用户能够显示其他列。
但这有点不舒服。因为用户必须点击菜单上的每个新列。
是否有可能阻止 DropDownMenu 关闭？或者我应该为此使用另一个小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:54:13.233

我建议您查看 Dojo [dgrid](http://dojofoundation.org/packages/dgrid/)和 ColumnHider[扩展](https://github.com/SitePen/dgrid/wiki/Extensions)。它可以有效地重新创建您正在做的事情，并且开箱即用，包括您所追求的功能。

另一种解决方案是使用[dijit/TooltipDialog](http://dojotoolkit.org/reference-guide/1.8/dijit/TooltipDialog.html)，其默认行为是在单击其中一个内容时保持打开状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T13:41:27.540

yourGrid.openDropDown(); 将再次打开菜单，您不会真正注意到它在关闭后再次显示。

# php - 在同一个查询中多次从同一个表中选择

> ID：14559730
> 
> 赞同：0
> 
> 时间：2013-01-28T10:12:30.673
> 
> 标签：php, mysql, codeigniter

我有一个名为展览的表格，其中包含：

*   ex_id
*   ex_inv_id
*   ex_user_id
*   ex_pref_one
*   ex_pref_two
*   ex_pref_three
*   ex_pref_four
*   ex_terms_conditions
*   ex_pref_one_approved
*   ex_pref_two_approved
*   ex_pref_three_approved
*   ex_pref_four_approved

还有一张名为 stand 的桌子，其中包含：

*   stand_id
*   站号
*   stand_type

我现在需要通过从 ex_pref_one/two/three/four columns = stand_id 的展览表中选择来将值放入数据表中

我尝试使用连接，但我得到一个错误，说表`stand`不存在我正在使用 codeigniter PHP 框架

这是代码对不起我没有先发布它

```
 $user_id = $this->session->userdata('user_id');
    if(!$user_id || $user_id == 0 )return 0;

    $where = array(
        'exhibit.ex_user_id'=>$user_id,
        );
    return $this->db->select('
        exhibit.*,
        S1.*,
        S2.*,
        S3.*,
        S4.*,
        ')
    ->join('stand AS S1', 'exhibit.ex_pref_one = S1.stand_id', 'LEFT')
    ->join('stand AS S2', 'exhibit.ex_pref_two = S2.stand_id', 'LEFT')
    ->join('stand AS S3', 'exhibit.ex_pref_three = S3.stand_id', 'LEFT')
    ->join('stand AS S4', 'exhibit.ex_pref_four = S4.stand_id', 'LEFT')
    ->where($where)
    ->from('exhibit')
    ->get()
    ->result(); 
```

$this->db->last_query() 的结果；

```
 SELECT `exhibit`.*,
       `S1`.*,
       `S2`.*,
       `S3`.*,
       `S4`.*
FROM (`exhibit`)
LEFT JOIN `stand` AS S1 ON `exhibit`.`ex_pref_one` = `S1`.`stand_id`
LEFT JOIN `stand` AS S2 ON `exhibit`.`ex_pref_two` = `S2`.`stand_id`
LEFT JOIN `stand` AS S3 ON `exhibit`.`ex_pref_three` = `S3`.`stand_id`
LEFT JOIN `stand` AS S4 ON `exhibit`.`ex_pref_four` = `S4`.`stand_id`
WHERE `exhibit`.`ex_user_id` = 1 
```

结果的 var_dump

```
array (size=1)

 0 => 

 object(stdClass)[25]
  public 'ex_id' => string '2' (length=1)
  public 'ex_inv_id' => string '2147483647' (length=10)
  public 'ex_user_id' => string '1' (length=1)
  public 'ex_pref_one' => string '6' (length=1)
  public 'ex_pref_two' => string '14' (length=2)
  public 'ex_pref_three' => string '13' (length=2)
  public 'ex_pref_four' => string '21' (length=2)
  public 'ex_terms_conditions' => string '1' (length=1)
  public 'ex_pref_one_approved' => string '0' (length=1)
  public 'ex_pref_two_approved' => string '0' (length=1)
  public 'ex_pref_three_approved' => string '0' (length=1)
  public 'ex_pref_four_approved' => string '0' (length=1)
  public 'stand_id' => string '21' (length=2)
  public 'stand_no' => string '20' (length=2)
  public 'stand_type' => string 'Gold' (length=4) 
```

但似乎它只通过 ex_pref_four 而没有其他人为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:27:55.520

首先给你不需要的别名`AS`。所以你可以这样做：

```
$this->db->select('
        exhibit.*,
        S1.*,
        S2.*,
        S3.*,
        S4.*,
        ')
    ->from('exhibit')
    ->join('stand S1', 'exhibit.ex_pref_one = S1.stand_id', 'LEFT')
    ->join('stand S2', 'exhibit.ex_pref_two = S2.stand_id', 'LEFT')
    ->join('stand S3', 'exhibit.ex_pref_three = S3.stand_id', 'LEFT')
    ->join('stand S4', 'exhibit.ex_pref_four = S4.stand_id', 'LEFT')
    ->where('whatever') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:17:17.630

您需要为同一个表的多个连接提供区分引用。IE

```
SELECT * FROM exhibit LEFT JOIN stand AS a ON exhibit.ex_pref_one = stand.stand_id LEFT JOIN stand AS b ON exhibit.ex_pref_two = stand.stand_id 
```

然后使用这些引用来参考结果——您将从此类查询中获得的结果中了解我的意思。

# android - 为android安装ADB接口驱动

> ID：14559734
> 
> 赞同：1
> 
> 时间：2013-01-28T10:12:40.253
> 
> 标签：android, device-driver

我尝试通过设备管理器安装。将手机连接到笔记本电脑后，我在设备管理器的“其他设备”部分中获得了“Celkon 集成 GSM 手机”的链接。我右键单击并单击'uddate驱动程序'和'从指定位置安装'并找到'inf'文件（usb2ser_2kXP.inf），但消息是'无法安装此硬件，'向导找不到必要的软件'。 .

那么，我必须如何编辑“inf”文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-13T08:37:46.403

> 右击我的电脑-->然后进入管理-->然后右键单击它并选择更新设备驱动程序-->在设备管理器的其他设备中选择您的设备-->

[![步骤1](../Images/15533998a7311b6c8405f4d93bab8feb.png)](https://i.stack.imgur.com/Z9EK5.jpg)

> 选择手动搜索设备而不是自动搜索。

[![第2步](../Images/57c1c8c00761d66078222042e760bf87.png)](https://i.stack.imgur.com/JwtKO.jpg)

> 选择显示所有设备。

[![第 3 步](../Images/74b4d81bf421fb5656eb31b7847bd53e.png)](https://i.stack.imgur.com/6aglE.jpg)

> 要手动定位 ADB 接口的设备驱动程序，请单击从磁盘安装。

[![第4步](../Images/111bf036f77a198cf90cdee350e49fbd.png)](https://i.stack.imgur.com/wNtxC.jpg)

> 点击“浏览”

[![在此处输入图像描述](../Images/442024a1df5797e1fa57cabf846bc62d.png)](https://i.stack.imgur.com/QvISg.jpg)

> 去sdk-->extra-->google-->usb driver-->然后点击android_winusb.inf-->点击open

```
Check your SDK Manager whether your 'Google USB driver' is installed or not.
Make sure that your environment variables are set up:

ANDROID_HOME : %LOCALAPPDATA%\Android\Sdk

PATH: ;%LOCALAPPDATA%\Android\Sdk\platform-tools;%LOCALAPPDATA%\Android\Sdk\tools 
```

[![在此处输入图像描述](../Images/1dfc43a02edd966470b06e40623e6d53.png)](https://i.stack.imgur.com/c4HNl.jpg)

> Android ADB 接口将被识别。

[![第 7 步](../Images/c55f512ccb2d931f15bbcd2345e13a2f.png)](https://i.stack.imgur.com/7oWL4.jpg)

检查错误是否已消除，并且您的 ADB 设备接口现在应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-13T08:22:03.473

[http://adbdriver.com/upload/adbdriver.zip](http://adbdriver.com/upload/adbdriver.zip)

*   下载 adb 驱动安装程序并打开
*   将手机连接到 PC（确保 USB 调试已启用）
*   无论是否安装，手机都会列出驱动程序状态
*   只需单击安装，如果有任何弹出窗口询问，则允许安装驱动程序并等待一段时间
*   安装驱动后，将手机重新连接电脑

注意：此驱动程序可以在任何 Android 设备上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-13T09:52:07.583

我之前也有同样的问题，但我只需按照以下步骤轻松解决：

```
*connect your android phone in a debugging mode 
```

（要启用调试模式，进入**设置**，向下滚动**关于手机**，向下滚动**点击七次内部版本号**，它将自动启用开发者选项，打开开发者选项并检查 USB 调试）

下载[通用 ADB 驱动安装程序](http://adbdriver.com/)

*选择 Adb 驱动安装程序（通用）

```
*install it 
*it will automatically detect your android device(any kind of brand) 
```

*选择设备并安装

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T10:12:40.253

```
STEP A:
Get the MTK6573 ADB driver from
h*t*t*p://chinamobiles.org/downloads/zap/MT6573ADBdrivers.zip
And extract it to a folder. The MTK6573 ADB interface driver works fine on MTK6575 based devices.

STEP B:
Get the VENDOR and DEVICE Ids of your Celkon A97 phone.
To get it,
Connect the phone to your PC. Open Device Manager. Look for Celkon incorporated GSM handset under Other Devices
Open 'Celkon incorporated GSM handset' -->Properties-->Details tab.
Under property dropdown menu, Select Hardware IDs
and note the 4 digit VID_XXXX and PID_YYYY values. These are the phones Hardware iDs.

STEP C:
Open the file android_winusb.inf using your favourite text editor.
Add three lines after this line.

[Manufacturer]
%ProviderName% = Google, NTx86, NTamd64

The three lines are
; CELKON A97
%CompositeAdbInterface% = USB_Install, USB\VID_XXXX&PID_YYYY&MI_01
;

Replace XXXX, YYYY with Vendor and Device IDs of your phone.
Save the file.

STEP D:
Once you update these values, update the driver from the device manager by pointing to the folder of android_winusb.inf.
Now you should see a ADB interface device in the device manager. 
```

# regex - 如果数字大于正则表达式减去金额

> ID：14559740
> 
> 赞同：-4
> 
> 时间：2013-01-28T10:13:09.803
> 
> 标签：regex, subtraction

如果数字大于指定值，我正在寻找一种减去固定金额的方法 - 使用正则表达式

例如

如果数字大于 10000，我想减去 5000，所以它应该如下所示：

175 -> 175
7831 -> 7831
12091 -> 7091

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:50:13.247

正则表达式用于**模式**匹配，替换文本。

您不能使用正则表达式进行数学运算。

在最大的情况下，在 C# 中你可以这样做：

```
String s = Regex.Replace(input, @"\b\d{5,}\b", m => (int.Parse(m.Value)-5000).ToString()); 
```

所以，

```
44 10000 15000 1 100 
```

会成为

```
44 5000 10000 1 100 
```

# django - Django：如何在实例化期间访问模型上的函数？

> ID：14559742
> 
> 赞同：1
> 
> 时间：2013-01-28T10:13:17.497
> 
> 标签：django

我有一个我想重用的表单的自定义函数。因此，我将它推入模型中，以便表单仍然可以访问它，我也可以从其他地方访问它。

现在，在该模型实例化的演示页面上，我需要访问该函数`round_time_to_nearest_quarter()`。但是该实例尚未创建，因此如何访问该函数？这是先有鸡还是先有蛋的情况：

```
event = c3.event_set.create(                        
                    due_date_time = (???) round_time_to_nearest_quarter() + timezone.timedelta(days=1, hours=3),                        
                    ) 
```

有没有更好的策略来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:45:43.483

如果你有一些不依赖于任何模型的函数，把这个方法放到你的 utils.py 文件中。

# gridview - 在相关的gridview上没有找到结果

> ID：14559745
> 
> 赞同：0
> 
> 时间：2013-01-28T10:13:24.610
> 
> 标签：gridview, yii, foreign-keys, relation

```
<?php echo CHtml::beginForm('','post',array('id'=>'base-si-received-item-form'));?><?php 
$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'base-si-received-item-grid',
    'dataProvider'=>$searchModel->search(),
    //'filter'=>$searchModel,
    'columns'=>array(       
        array(
            'class'=>'CCheckBoxColumn',
            'id'=>'base-si-received-item-id',       
            'selectableRows'=>2, // multiple rows can be selected       
        ),      
        array(
            'name' => 'details.stockno',
            'header'=>'Stock No',
            'value' => '$data->details->stockno',
        ),
        array(
            'name' => 'details.details_description_search',
            'header'=>'Description',
            'value' => '$data->details->details_description_search',
        ), 
```

我的模型

```
public function relations() {
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.      
    return array(
        'details' => array(self::BELONGS_TO, 'BaseRefSiDetails', 'details_id'),
    );
} 
```

我已经尝试了很多方法，但它们都不起作用..我需要的是显示来自另一个模型的数据，这种关系已经在 gii 生成器的帮助下完成，但仍然没有发现我卡住的结果。

# java - HtmlUnit WebClient 超时

> ID：14559746
> 
> 赞同：3
> 
> 时间：2013-01-28T10:13:28.073
> 
> 标签：java, multithreading, timeout, web-scraping, htmlunit

在我之前关于 HtmlUnit 的问题 中，[跳过 HTML 单元中的特定 Javascript 执行](https://stackoverflow.com/questions/14439991/skip-particular-javascript-execution-in-html-unit) 和 [使用 HtmlUnit 获取页面源： URL 卡住了](https://stackoverflow.com/questions/14396052/fetch-page-source-using-htmlunit-url-got-stuck)

我曾提到 URL 卡住了。我还发现它被卡住了，因为 HtmlUnit 库中的一种方法（解析）没有退出执行。

我对此做了进一步的工作。如果需要超过指定的超时秒数才能完成，我编写了代码以退出该方法。

```
import java.io.IOException;
import java.net.MalformedURLException;
import java.util.Date;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.TimeoutException;

import com.gargoylesoftware.htmlunit.BrowserVersion;
import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlPage;

public class HandleHtmlUnitTimeout {

public static void main(String[] args) throws FailingHttpStatusCodeException, MalformedURLException, IOException, InterruptedException, TimeoutException 
    {   
        Date start = new Date();
        String url = "http://ericaweiner.com/collections/";
        doWorkWithTimeout(url, 60);
    }

public static void doWorkWithTimeout(final String url, long timeoutSecs) throws InterruptedException, TimeoutException {
    //maintains a thread for executing the doWork method
    ExecutorService executor = Executors.newFixedThreadPool(1);
    //logger.info("Starting method with "+timeoutSecs+" seconds as timeout");
    //set the executor thread working

    final Future<?> future = executor.submit(new Runnable() {
        public void run() 
            {
            try 
                {
                getPageSource(url);
                }
            catch (Exception e) 
                {
                throw new RuntimeException(e);
                }
        }
    });

    //check the outcome of the executor thread and limit the time allowed for it to complete
    try {
        future.get(timeoutSecs, TimeUnit.SECONDS);
    } catch (Exception e) {
        //ExecutionException: deliverer threw exception
        //TimeoutException: didn't complete within downloadTimeoutSecs
        //InterruptedException: the executor thread was interrupted

        //interrupts the worker thread if necessary
        future.cancel(true);

        //logger.warn("encountered problem while doing some work", e);
        throw new TimeoutException();
    }finally{ 
    executor.shutdownNow();
    }
}

public static void getPageSource(String productPageUrl)
    {
    try {
    if(productPageUrl == null)
        {
        productPageUrl = "http://ericaweiner.com/collections/";
        }   

        WebClient wb = new WebClient(BrowserVersion.FIREFOX_3_6);
        wb.getOptions().setTimeout(120000);
        wb.getOptions().setJavaScriptEnabled(true);
        wb.getOptions().setThrowExceptionOnScriptError(true);
        wb.getOptions().setThrowExceptionOnFailingStatusCode(false);
        HtmlPage page = wb.getPage(productPageUrl);
        wb.waitForBackgroundJavaScript(4000);
        wb.closeAllWindows();
} 
catch (FailingHttpStatusCodeException e) 
    {
    e.printStackTrace();
    } 
catch (MalformedURLException e) 
    {
    e.printStackTrace();
    } 
catch (IOException e) 
    {
    e.printStackTrace();
    }
    } 
```

}

这段代码确实来自 doWorkWithTimeout(url, 60); 方法。但这并没有终止。

当我尝试使用以下代码调用类似的实现时：

```
import java.util.Date;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;
import java.util.concurrent.TimeUnit;

import org.apache.log4j.Logger;

public class HandleScraperTimeOut {

private static Logger logger = Logger.getLogger(HandleScraperTimeOut .class);

public void doWork() throws InterruptedException {
    logger.info(new Date()+ "Starting worker method ");
    Thread.sleep(20000);
    logger.info(new Date()+ "Ending worker method ");
    //perform some long running task here...
}

public void doWorkWithTimeout(int timeoutSecs) {
    //maintains a thread for executing the doWork method
    ExecutorService executor = Executors.newFixedThreadPool(1);
    logger.info("Starting method with "+timeoutSecs+" seconds as timeout");
    //set the executor thread working

    final Future<?> future = executor.submit(new Runnable() {
        public void run() 
            {
            try 
                {
                doWork();
                }
            catch (Exception e) 
                {
                throw new RuntimeException(e);
                }
        }
    });

    //check the outcome of the executor thread and limit the time allowed for it to complete
    try {
        future.get(timeoutSecs, TimeUnit.SECONDS);
    } catch (Exception e) {
        //ExecutionException: deliverer threw exception
        //TimeoutException: didn't complete within downloadTimeoutSecs
        //InterruptedException: the executor thread was interrupted

        //interrupts the worker thread if necessary
        future.cancel(true);

        logger.warn("encountered problem while doing some work", e);
    }
    executor.shutdown();
}

public static void main(String a[])
    {
        HandleScraperTimeOut hcto = new HandleScraperTimeOut ();
        hcto.doWorkWithTimeout(30);

    } 
```

}

如果有人可以看看并告诉我问题是什么，那将非常有帮助。

有关问题的更多详细信息，您可以查看[在 HTML 单元中跳过特定的 Javascript 执行](https://stackoverflow.com/questions/14439991/skip-particular-javascript-execution-in-html-unit) 并 [使用 HtmlUnit 获取页面源：URL 卡住了](https://stackoverflow.com/questions/14396052/fetch-page-source-using-htmlunit-url-got-stuck)

* * *

**更新 1** 奇怪的是：future.cancel(true); 在这两种情况下都返回 TRUE。我的预期是：

*   使用 HtmlUnit 它应该返回 FALSE，因为进程仍然挂起。
*   使用正常的 Thread.sleep(); 它应该返回 TRUE，因为该过程已成功取消。

**更新 2** 它只与`http://ericaweiner.com/collections/`URL 挂起。如果我给任何其他 URL 即`http://www.google.com`, `http://www.yahoo.com`，它不会手。在这些情况下，它会抛出 IntruptedException 并退出进程。

似乎`http://ericaweiner.com/collections/`页面源具有某些导致问题的元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T14:20:41.307

Future.cancel(boolean) 返回：

*   如果任务无法取消，则返回 false，通常是因为它已经正常完成
*   否则为真

取消意味着线程在取消之前没有完成，取消标志设置为真，如果请求线程被中断。

中断线程意味着它称为 Thread.interrupt 仅此而已。Future.cancel(boolean) 不检查线程是否实际停止。

因此，在这种情况下取​​消返回 true 是正确的。

中断线程意味着它应该尽快停止，但不是强制执行的。您可以尝试使其停止/无法关闭它需要的资源或其他东西。我通常通过从套接字读取（等待传入数据）的线程来做到这一点。我关闭了套接字，使其停止等待。

# java - Java：int[] 数组与 int 数组 []

> ID：14559749
> 
> 赞同：58
> 
> 时间：2013-01-28T10:13:37.090
> 
> 标签：java, arrays, performance, definition

有没有区别

```
int[] array = new int[10]; 
```

和

```
int array[] = new int[10]; 
```

?

两者都有效，结果完全相同。哪个更快或更好？有没有推荐的风格指南？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-01-28T10:19:45.317

两者是等价的。看看以下内容：

```
int[] array;

// is equivalent to

int array[]; 
```

```
int var, array[];

// is equivalent to

int var;
int[] array; 
```

```
int[] array1, array2[];

// is equivalent to

int[] array1;
int[][] array2; 
```

```
public static int[] getArray()
{
    // ..
}

// is equivalent to

public static int getArray()[]
{
    // ..
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-28T10:18:53.850

来自 JLS [http://docs.oracle.com/javase/specs/jls/se5.0/html/arrays.html#10.2](http://docs.oracle.com/javase/specs/jls/se5.0/html/arrays.html#10.2)

以下是不创建数组的数组变量声明示例：

```
int[ ] ai;          // array of int
short[ ][ ] as;         // array of array of short
Object[ ]   ao,     // array of Object
        otherAo;    // array of Object
Collection<?>[ ] ca;        // array of Collection of unknown type
short       s,      // scalar short 
        aas[ ][ ];  // array of array of short 
```

以下是创建数组对象的数组变量声明的一些示例：

```
Exception ae[ ] = new Exception[3]; 
Object aao[ ][ ] = new Exception[2][3];
int[ ] factorial = { 1, 1, 2, 6, 24, 120, 720, 5040 };
char ac[ ] = { 'n', 'o', 't', ' ', 'a', ' ',
                 'S', 't', 'r', 'i', 'n', 'g' }; 
String[ ] aas = { "array", "of", "String", }; 
```

**[ ] 可能作为类型的一部分出现在声明的开头，或者作为特定变量的声明符的一部分，或者两者兼而有之**，如下例所示：

```
byte[ ] rowvector, colvector, matrix[ ]; 
```

**这个声明等价于：**

```
byte rowvector[ ], colvector[ ], matrix[ ][ ]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-28T10:15:27.837

它们基本相同，在性能上没有任何区别，但是推荐的是第一种情况，因为它更具可读性。

```
int[] array = new int[10]; 
```

来自[**JLS**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.2)：

> [] 可以作为类型的一部分出现在声明的开头，或者作为特定变量的声明符的一部分，或者两者兼而有之。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-28T10:16:32.967

两者都是一样的。我通常使用`int[] array = new int[10];`, 因为类型的更好（连续）可读性`int[]`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-28T10:16:25.273

不，没有区别。但我更喜欢使用`int[] array`它，因为它更具可读性。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-28T10:59:39.857

这两个声明之间没有区别，并且都具有相同的性能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-28T10:15:40.190

几乎没有区别。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-28T10:19:32.737

在这两个示例中，您都将 a 分配`new int[10]`给参考变量。

以任何一种方式分配给参考变量在性能上都是相同的。

```
int[] array = new int[10]; 
```

上面的符号被认为是可读性的最佳实践。

干杯

# c# - Sharepoint 2010 中的 JQuery

> ID：14559752
> 
> 赞同：0
> 
> 时间：2013-01-28T10:13:58.950
> 
> 标签：c#, jquery, sharepoint-2010, web-parts

我正在为 Sharepoint 2010 编写网络部件，我需要使用 JQuery。

```
$(function(){
    canvas = document.getElementById("canvas");
    ctx = canvas.getContext("2d");

    clockImage = new Image();
    setInterval(drawScene, 1000);
}); 
```

但是当我尝试调试我的 web 部件时，出现错误：

**运行时错误 Microsoft JScript：“$”的值或为 NULL，或者如果它未定义或不是对象函数**

我已将 JQuery 添加到样式库和我的 ascx 页面：

```
<script type="text/javascript" src="~/StyleLibrary/scripts/jquery.js"></script> 
```

我应该怎么做才能修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:49:54.877

在您的页面或母版页中寻找另一个可用于 Jquery 的参考？

如果是，则删除其中一个引用..

如果 jquery 脚本有多个可用的引用调用，它将破坏 jquery 脚本的功能。

在调用引用之前还要检查是否有任何其他调用 jquery 脚本？

谢谢

# jquery - 使用 .attr() 方法和 event.preventDefault() 的 jQuery 库

> ID：14559758
> 
> 赞同：0
> 
> 时间：2013-01-28T10:14:35.480
> 
> 标签：jquery

我一直在尝试创建一个动态 jQuery 图像库，当用户单击链接时不需要将其带到新的目的地。可以在这里找到 - [http://the-session.co.uk/JSgallery/](http://the-session.co.uk/JSgallery/)

我创建了`showPic`一个接受 2 个参数的函数 - 事件对象和一个元素节点对象（一个特定的元素，用 . 类单击`link)`。`source`变量使用该`.attr()`方法并充当“getter”来获取`src`元素的属性节点传递给`showPic`函数。

然后我将其存储`<img id="placeholder">`在一个名为`gallery`. 然后的想法是将`src`属性设置`gallery`为`src`from`source`变量。

然后我已经使用`event.preventDefault();`了，以便不会触发事件的默认操作。然而， `elements`他们仍在将用户带到一个不希望的新目的地。

最后一步是选择`.link`（`<a>`元素）然后使用该`.on`方法，以便在用户单击时调用匿名函数。然后调用该`showPic`函数，并将使用单击的特定元素传递给它`$(this)`。

目前代码不起作用，我不明白为什么。有什么建议么？

```
function showPic (event, el) {
    var source = el.attr('source'); // getter
    var gallery = $('#placeholder'); // <img id="placeholder">
    gallery.attr('src', source); // setter
    event.preventDefault();
}

$('.link').on('click', function() {  
        showPic($(this));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:16:54.790

当在这样的函数中时，您还需要传递事件：

```
function showPic (event, el) {
    event.preventDefault();
    $('#placeholder').attr('src', el.attr('source'));
}

$('.link').on('click', function(event) {  
    showPic(event, $(this));
}); 
```

另一方面，如果您直接引用该函数，则将传递事件，并且您可以使用 event.target 来获取单击的元素，如果这与绑定的元素相同：

```
function showPic (event) {
    event.preventDefault();
    $('#placeholder').attr('src', $(event.target).attr('source'));
}

$('.link').on('click', showPic); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:16:20.000

你错过了第一个参数，，

```
$('.link').on('click', function(e) {  
    showPic(e,$(this));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:17:40.857

你的 showPic 函数有两个参数 event 和 el

但是您只是将元素传递给 showPic 并且在 showPic 中，此元素存储在事件参数中。

将您的代码更新为以下内容：

```
$('.link').on('click', function(event) {  
        showPic(event, $(this));
}); 
```

# django - 无法解析字段 id django sweetpie mongoengine

> ID：14559759
> 
> 赞同：1
> 
> 时间：2013-01-28T10:14:40.300
> 
> 标签：django, mongoengine, tastypie

看来这个错误不取决于我的代码我尝试在不使用 django-norel 的情况下一起使用 mongodb 和 mysql

```
{"error_message": "Cannot resolve field \"id\"", "traceback": "Traceback (most recent call last):\n\n  File \"/usr/local/lib/python2.7/dist-packages/tastypie/resources.py\", line 192, in wrapper\n    response = callback(request, *args, **kwargs)\n\n  File \"/usr/local/lib/python2.7/dist-packages/tastypie/resources.py\", line 397, in dispatch_list\n    return self.dispatch('list', request, **kwargs)\n\n  File \"/usr/local/lib/python2.7/dist-packages/tastypie_mongoengine/resources.py\", line 339, in dispatch\n    return super(MongoEngineResource, self).dispatch(request_type, request, **kwargs)\n\n  File \"/usr/local/lib/python2.7/dist-packages/tastypie/resources.py\", line 427, in dispatch\n    response = method(request, **kwargs)\n\n  File \"/usr/local/lib/python2.7/dist-packages/tastypie/resources.py\", line 1033, in get_list\n    to_be_serialized = paginator.page()\n\n  File \"/usr/local/lib/python2.7/dist-packages/tastypie/paginator.py\", line 155, in page\n    count = self.get_count()\n\n  File \"/usr/local/lib/python2.7/dist-packages/tastypie/paginator.py\", line 110, in get_count\n    return self.objects.count()\n\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 1033, in count\n    return self._cursor.count(with_limit_and_skip=True)\n\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 607, in _cursor\n    self._cursor_obj = self._collection.find(self._query,\n\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 588, in _collection\n    self._ensure_indexes()\n\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 490, in _ensure_indexes\n    if index_types and '_types' in self._query and not types_indexed:\n\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 389, in _query\n    self._mongo_query = self._query_obj.to_query(self._document)\n\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 212, in to_query\n    query = query.accept(QueryCompilerVisitor(document))\n\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 277, in accept\n    return visitor.visit_query(self)\n\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 169, in visit_query\n    return QuerySet._transform_query(self.document, **query.query)\n\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 727, in _transform_query\n    fields = QuerySet._lookup_field(_doc_cls, parts)\n\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 680, in _lookup_field\n    % field_name)\n\nInvalidQueryError: Cannot resolve field \"id\"\n"}

class RssItem(Document):
    rss=fields.StringField()
    title=fields.StringField()
    description=fields.StringField()

class RssItemsResource(resources.MongoEngineResource):
   class Meta:
        queryset = RssItem.objects.all()
        resource_name = 'rssitem'
        include_resource_uri=False
        authorization= customOauth2Authorization()
        collection = "items" # collection name 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T15:41:27.620

这是关于我在删除该行并添加后在 build_filters 中使用 id

id=StringField(db_field="_id")

```
meta = {
        'collection': 'items',
         'allow_inheritance': False,
         } 
```

记录所有已解决的问题

# c++ - 在 Visual C++ 编译器中使用 std::initializer_list 2012 年 11 月 CTP

> ID：14559761
> 
> 赞同：8
> 
> 时间：2013-01-28T10:14:44.473
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, initializer-list

[我想像这个例子](http://musingstudio.com/2012/11/27/stdinitializer_list-an-even-better-way-to-populate-a-vector/)`std::initializer_list`中的一个人一样在 Visual Studio 2012中使用s 。我的操作系统是 Windows 8 x64。

因此，我最近安装了[Visual C++ 编译器 2012 年 11 月 CTP](http://www.microsoft.com/en-us/download/details.aspx?id=35515)，正如微软所说，我更改了项目的平台工具集以使用新的更新编译器。

但即使这样做了，也没有可用`std::initializer_list`的`<initializer_list>`标头。但是微软的链接网站告诉我（在标题“概述”下）初始化列表将随该更新提供。我重新启动了 IDE 和我的 PC。我不确定这是否可能是由于我（遗憾地）使用德文版的 Visual Studio 并且编译器更新是英文的。我究竟做错了什么？

更新：尝试编译`auto a = { 0 };`被 IntelliSense 批评的行，编译器输出显示`'Microsoft Visual C++ Compiler Nov 2012 CTP' is for testing purposes only.`，然后编译器崩溃并出现一个错误窗口，显示为`Microsoft (R) C/C++ Compiler Driver has stopped working`. 没有任何新语法，一切都可以编译并在所选的新编译器下正常工作。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-28T22:01:21.807

（我为 Microsoft 工作并与 Dinkumware 一起维护 VC 的标准库实现。）

[丹尼哈尔]

> 我不确定这是否可能是由于我（遗憾地）使用德文版的 Visual Studio 并且编译器更新是英文的。

不幸的是，只有英文的 CTP 不支持德文 VS。

“编译器驱动程序”cl.exe 调用编译器前端 c1xx.dll、编译器后端 c2.dll 和链接器 link.exe。编译器驱动程序崩溃是非常不寻常的。我推测它试图显示 CTP 添加的错误消息之一，但由于 CTP 没有更新德语资源，编译器驱动程序无法加载错误消息并继续崩溃。

请注意，这与前端或后端中的内部编译器错误或恰好被错误发出的正常编译器错误不同。（CTP 发布后，许多 ICE 和虚假错误已得到修复。）

> 但即使这样做了，也没有可用的 std::initializer_list 或 <initializer_list> 标头。

CTP 将 <initializer_list> 安装在特殊位置。（它实际上是由编译器团队编写的。）

在命令行上，使用 CTP 并将 <initializer_list> 放在包含路径上的咒语是（假设默认位置）：

```
"C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.bat" x86
set PATH=C:\Program Files (x86)\Microsoft Visual C++ Compiler Nov 2012 CTP\bin;%PATH%
set INCLUDE=C:\Program Files (x86)\Microsoft Visual C++ Compiler Nov 2012 CTP\include;%INCLUDE% 
```

> 试图编译行 auto a = { 0 }; 被 IntelliSense 批评

这已记录在案 - CTP 未更新 Intellisense，因此它不会识别任何新功能。

[rubenvb]

> C++ 标准库没有用编译器更新，让你没有像样的 <tuple> 和 <intializer_list> （这包括所有标准容器的括号初始化列表构造函数的省略）

您可能有兴趣了解我们已更新标准库以完全支持范围枚举和初始化列表。这包括当前工作文件 (N3485) 规定的所有 initializer_list 重载，以及在通常位置安装 <initializer_list> 以及所有其他标准头文件。（它也是 Dinkumware 的官方副本，尽管它与编译器团队的“假”版本之间的差异主要是装饰性的。）无论何时何地，这些东西都将在下一个公开版本中可用。我们的下一个任务是使用显式转换运算符和可变参数模板更新标准库，替换我们脆弱的模拟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T18:21:53.767

正如您所注意到的，11 月 CTP 的可用性非常有限，至少有两个原因：

1.  编译器有许多导致崩溃的错误，例如您发现的错误。

2.  C++ 标准库没有用编译器更新，让你没有像样的`<tuple>`和`<intializer_list>`（这包括*所有*标准容器的括号初始化列表构造函数的省略）

另外：链接的示例是非常丑陋的代码。如果您想使用此功能，请使用支持此语法的编译器，如 GCC 或 Clang。它们都可用于 Windows。通过编写额外的代码来破解半实现的语言功能是愚蠢的。

# javascript - 阅读ckeditor内容

> ID：14559764
> 
> 赞同：2
> 
> 时间：2013-01-28T10:14:58.600
> 
> 标签：javascript, jquery, asp.net, ckeditor

我在我的 asp.net 页面中使用 CKEditor。为此，我已将 ckeditor.dll 添加到我的项目中。我在 .aspx 页面中使用了这个引用。我的问题是我无法在 javascipt 中读取 ckeditor 内容。谁能告诉我如何实现这一目标。这是我的代码

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="CKEditorVamshi._Default" %>
<%@ Register Assembly="CKEditor.NET" Namespace="CKEditor.NET" TagPrefix="CKEditor" %>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
    <script type="text/javascript" language="javascript">
        function validate() {
            var text = $('#cke_<%= CKEditorGettingStarted.ClientID %> iframe').contents().find('body').html();
           alert(text);
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <CKEditor:CKEditorControl AutoPostBack="True" ID="CKEditorGettingStarted" runat="server"
    Height="300px" BasePath="~/CKEditor" MaxLength="10" Width="100%" CausesValidation="true">
 </CKEditor:CKEditorControl>
 <br />
 <input type="button" id="btnPreview" value="Preview" onclick="validate();" />
    </form>
</body>
</html> 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:08:37.390

尝试

`CKEDITOR.instances.Your_Editor_Client_ID.getData();`

# windows-phone-7 - 图像保存到保存的图片并检索回来并在我的 Windows 手机应用程序中显示

> ID：14559765
> 
> 赞同：1
> 
> 时间：2013-01-28T10:15:01.033
> 
> 标签：windows-phone-7

你好朋友我是WP7的新手

我现在正在开发小型应用程序。在该应用程序中，我从相机中拍摄了一张照片，并尝试将其保存在具有某些名称的已保存图片中，我喜欢检索该图像并再次显示在我的应用程序库屏幕中

我在我的第一个 PivotItem 名称是 Gallery 和第二个 PivotItem 名称是 Camera 中为此应用程序使用 Pivot 控件

现在我可以很好地使用相机从相机拍摄照片后，我想为此添加一些注释并保存到我保存的图像中，然后检索相同的图像并显示在画廊中，注释重量我保存

谁能说我怎样才能很好地完成这个应用程序

使用 mainpage.xaml.cs 保存图像的代码

```
 private void saveimg_Tap(object sender, System.Windows.Input.GestureEventArgs e)
       {
        string fileName = myValue.ToShortDateString() + ".jpg";
        var library = new MediaLibrary();
        //library.SavePictureToCameraRoll(fileName, e.ChosenPhoto);
        library.SavePicture(fileName, imageBits);
        MessageBox.Show("Photo Saved to Picture Hub");

        } 
```

我需要检索该保存的图像并在加载时显示在我的应用程序中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:50:05.340

将图像保存到独立存储和图片库。当想通过应用程序查看图像时，请使用独立存储中的图像。

无需使用 SQLite，使用索引号将图像保存在独立存储中，还可以使用索引号存储评论，这可能会让您感到轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:02:04.127

如果您需要在将图像保存在媒体库中后访问它，您还应该将其保存到独立存储中。

这是一个展示如何做到这一点的教程：http:
[//www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---Read-and-Save-Images](http://www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---Read-and-Save-Images)

# asp.net-mvc - 打开子表单时，我应该如何保存和重新填充表单数据？

> ID：14559773
> 
> 赞同：3
> 
> 时间：2013-01-28T10:15:22.750
> 
> 标签：asp.net-mvc, asp.net-mvc-4

在一个 MVC4 项目中，我有一个包含部分视图的表单，它是在学校学习的语言的索引视图。它是默认类型视图模板索引，每行包含添加、删除、编辑链接等。添加或编辑时，它会打开语言的添加或编辑视图。例如添加语言后，返回更新的局部视图。

我的问题是，如果用户打开语言表单，主表单上的编辑和捕获将丢失。我不能在打开 Language 表单之前进行 Ajax 保存，因为主表单可能只是部分完成并且验证失败。我正在考虑做的是使用一个`AjaxPreserve`动作，它需要 a`FormCollection`并将其存储在会话中（o 在磁盘上或任何地方），因此不执行模型绑定和服务器验证。

然后我有两个问题：我需要在调用 AJAX 操作之前禁用客户端验证，并且我需要使用`FormCollection`我之前保存的重新填充主表单。我认为应该有一些 jQuery voodoo 来禁用客户端验证，但我完全无法重新填充表单。

*替代解决方案*：我可以使用pop-ip表单中的编辑器模板代替使用“子表单”，其中不需要FK ID，但仅在某些情况下才需要，所以我的问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T19:43:16.527

您能否使用类似 Knockout 的方法创建 javascript 模型并将其绑定到网格/对话框编辑/模板视图。我会将整个数据转换为 JS 模型，将其绑定到表/网格，然后跟踪客户端的所有更改。完成后，只需将整个模型序列化回服务器并更新数据存储。如果这是一个可接受的方案，它将为您省去很多麻烦。需要熟悉 Knockout，但如果您以前使用过它，您将能够以非常干净和有效的方式解决这个问题。

Knockout 网站上的这个例子给出了我试图建议的想法。编辑、删除、添加在客户端完成，直到您将所有数据发送回服务器。您需要跟踪每个对象的标志，以了解它是否被添加、编辑或删除。

[http://knockoutjs.com/examples/contactsEditor.html](http://knockoutjs.com/examples/contactsEditor.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:14:36.137

简单地发出使用 Ajax 添加语言的子请求并重新填充下拉列表或您在成功保存时在主窗体上接受语言的任何方式。

**这样会省很多力气。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:29:40.480

你为什么不只使用javascript？例如，您有存储一些数据的主窗体。当您需要添加特定的语言时，您可以使用部分视图打开弹出窗口，允许用户填写表单，但是当用户按下提交时，您会使用 js 拦截操作，将内容保存到 javascript 数组/对象或其他任何内容，并可能将其存储在主表单的隐藏字段 - 用于最终提交

```
var newData = new Object();
newData.Field1 = $("#yourField1");
...
lanuageData.push(newData);
$("#languageContainer").val(JSON.stringify(languageData));
... 
```

DataAnnotation 验证也适用于：

```
$.validator.unobtrusive.parse("your_partial_view_container"); 
```

当您需要编辑一些已添加到 js 数组的对象时 - 打开弹出窗口并用您的 js 数组的元素填充它。所以基本上你在客户端做所有的 CRUD，只在最终提交时保存更改。为了使控制器中的代码更清晰，您可以使用自定义模型绑定器，将一些字符串字段从 JSon 反序列化为 List 或任何其他类型的对象 -> 以便可以在服务器端对其进行验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T21:29:44.820

将您的值保存到本地存储是否可以接受？使用 TempData 怎么样？

# c# - 在 RhinoMocks 中模拟一个接受委托的方法

> ID：14559779
> 
> 赞同：6
> 
> 时间：2013-01-28T10:15:41.237
> 
> 标签：c#, unit-testing, rhino-mocks

我有以下课程：

```
public class HelperClass  
{  
    HandleFunction<T>(Func<T> func)
    {
         // Custom logic here

         func.Invoke();

         // Custom logic here  
}

// The class i want to test  
public class MainClass
{
    public readonly HelperClass _helper;

    // Ctor
    MainClass(HelperClass helper)
    {
          _helper = helper;
    }

    public void Foo()
    {
         // Use the handle method
         _helper.HandleFunction(() =>
        {
             // Foo logic here:
             Action1();
             Action2(); //etc..
        }
    }
} 
```

我只想测试`MainClass`。我使用 RhinoMocks`HelperClass`在我的测试中进行模拟。
问题是，虽然我对测试`HandleFunction()`我有兴趣检查`Action1`的方法以及在调用时`Action2`发送到的其他操作不感兴趣`HandleFunction()`。
我如何模拟该`HandleFunction()`方法并在避免其内部逻辑的同时调用发送到的代码它作为一个参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T10:29:50.400

因为您的被测单元很可能需要在继续之前调用委托，所以您需要从模拟中调用它。调用助手类的真实实现和模拟实现还是有区别的。模拟不包括此“自定义逻辑”。（如果你需要，不要嘲笑它！）

```
IHelperClass helperMock = MockRepository.GenerateMock<IHelperClass>();
helperMock
  .Stub(x => x.HandleFunction<int>())
  .WhenCalled(call => 
  { 
    var handler = (Func<int>)call.Argument[0];
    handler.Invoke();
  });

// create unit under test, inject mock

unitUnderTest.Foo(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T17:04:29.500

除了 Stefan 的回答，我想展示另一种定义存根的方法，它调用传递的参数：

```
handler
    .Stub(h => h.HandleFunction(Arg<Func<int>>.Is.Anything))
    .Do((Action<Func<int>>)(func => func())); 
```

[请在此处](http://ayende.com/Wiki/Rhino+Mocks+The+Do%28%29+Handler.ashx)和[此处](http://ayende.com/Wiki/Rhino+Mocks+The+Do%28%29+Handler.ashx?Discuss=1)阅读有关`Do()`处理程序的更多信息。

# c# - 使用反射的通用集合映射

> ID：14559785
> 
> 赞同：0
> 
> 时间：2013-01-28T10:15:58.587
> 
> 标签：c#, generics, ienumerable

如果任何类`IEnumerable`在其层次结构的某个阶段实现接口，是否可以创建一个集合并填充该类？

我想编写一个简单的函数，如果它需要一个实现 , 等的对象，`IList<>`或者`ICollection<>`是`IEnumerable<>`一个`Array`（所以在某个阶段都实现了`IEnumerable`），我可以用一组值填充它。

所以这个函数不知道它是否会接收一个`List<object>`或`object[]`但将能够填充两者。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:26:57.500

[IEnumerable](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)接口仅指定一种方法，该方法为您提供枚举器以枚举对象的项。因此没有关于该对象的其他能力是什么的信息。因此，您无法从外部判断项目的数量是固定的，还是可变的，甚至是可变的。

提供此接口的第一个接口是[IList](http://msdn.microsoft.com/en-us/library/system.collections.ilist.aspx)，除了随机访问之外，它还提供添加对象的方法。仅仅因为你有一个 IList 并不意味着你有写权限，因为 IList 可以是只读的。还有[IDictionary](http://msdn.microsoft.com/en-us/library/system.collections.idictionary.aspx)为类字典对象指定添加方法。所有其他标准集合通常不实现为您提供此功能的接口。

因此，您不能在不知道其实现或至少更具体的实现细节（IList 或 IDictionary）的情况下用值填充任意集合。

> 我不需要捕获所有功能，我只需要涵盖大多数情况的东西。因此，如果通过了 IEnumerable、ICollection 或 IList，那么我可以只返回一个列表。

如果你得到一个`IList<T>`or `ICollection<T>`，你也有一个`IEnumerable<T>`（因为两者都实现了它），所以你只有一个案例。您可以只接受一个 IEnumerable 并基于它创建一个列表：

```
public IList<T> CreateList<T> (IEnumerable<T> enumerable)
{
    List<T> list = new List<T>(enumerable);

    // add custom items
    list.Add(GetCustomItem<T>());

    return list;
} 
```

`<T>`如果您愿意，您还可以通过从定义中删除所有 s 来制作非通用版本。

# android - 如何修复内存泄漏？

> ID：14559788
> 
> 赞同：1
> 
> 时间：2013-01-28T10:16:01.547
> 
> 标签：android, actionscript-3, flash, air

我试图找出一种方法来修复我的 AIR for Android 应用程序中的内存泄漏。

问题似乎源于我将外部、本地存储的 SWF 和 mp4 文件加载到我的舞台并一个接一个地播放它们。应用程序似乎没有从内存中删除文件，并且每次播放时它都会从本地目录中读取文件，应用程序会不断将它们推入内存并填满。

在将子 SWF/mp4 影片剪辑从舞台上移除后，我尝试将其设置为 NULL（如各种在线资源所建议的那样），但这似乎不起作用。

然后我尝试`System.gc();`在播放剪辑之前使用（所以，播放剪辑 A，剪辑 A 完成，运行垃圾收集，播放剪辑 B）但同样，它似乎没有做任何事情。

所以，我正在想办法阻止这种内存泄漏。

我的想法是将每个影片剪辑添加到一个数组中，然后循环遍历它。我认为这可能有效，因为如果剪辑存储在数组中，我不会从本地目录重新读取它们，因此不应将它们重新添加到内存中。这是一个安全的假设吗？

还有其他方法可以对抗这种类型的内存泄漏吗？

最后，在 Android 设备上进行压力测试时，这种内存泄漏导致我的应用程序在大约一个小时后自行关闭的可能性有多大？（没有错误消息弹出，应用程序只是关闭，没有警告）

# windows - 在 Windows 批处理中打印一个段落

> ID：14559789
> 
> 赞同：4
> 
> 时间：2013-01-28T10:16:04.170
> 
> 标签：windows, batch-file

以下代码可以很好地打印段落

```
@echo off
setlocal disableDelayedExpansion
set "skip="
for /f "delims=:" %%N in (
  'findstr /x /n ":::BeginText" "%~f0"'
) do if not defined skip set skip=%%N
>test.txt (
  for /f "skip=%skip% tokens=*" %%A in (
   'findstr /n "^" "%~f0"'
  ) do (
    set "line=%%A"
    setlocal enableDelayedExpansion
    echo(!line:*:=!
    endlocal
  )
)
type test.txt
exit /b

:::BeginText
This text will be exactly preserved with the following limitations:

  1) Each line will be terminated by CR LF even if original has only LF.

  2) Lines are limited in length to approximately 8191 bytes.

Special characters like ^ & < > | etc. do not cause a problem.
Empty lines are preserved!
;Lines beginning with ; are preserved.
:::Leading : are preserved 
```

有没有办法添加一个文本标记，这样只打印和`:::Endtext`之间的段落 。`:::BeginText``:::Endtext`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T12:37:46.403

当然 ：-）

您可以在脚本中嵌入多个命名段落，并通过为每个段落使用唯一标签来选择性地编写它们。

只要 GOTO 和/或 EXIT /B 阻止文本被执行，命名文本就可以出现在脚本中的任何位置。

为了方便起见，下面的脚本将逻辑封装在一个`:printParagraph`例程中。

```
@echo off
setlocal disableDelayedExpansion
goto :start

:::BeginText1
Paragraph 1
  is preserved

Bye!
:::EndText

:start
echo Print paragraph 1 directly to screen
echo ------------------------------------------
call :printParagraph 1
echo ------------------------------------------
echo(
echo(

call :printParagraph 2 >test.txt
echo Write paragraph 2 to a file and type file
echo ------------------------------------------
type test.txt
echo ------------------------------------------
echo(
echo(

echo Print paragraph 3 directly to screen
echo ------------------------------------------
call :printParagraph 3
echo ------------------------------------------
echo(
echo(

exit /b

:::BeginText2
This is paragraph 2

Pure poetry
:::EndText

:printParagraph
set "skip="
for /f "delims=:" %%N in (
  'findstr /x /n ":::BeginText%~1" "%~f0"'
) do if not defined skip set skip=%%N
set "end="
for /f "delims=:" %%N in (
  'findstr /x /n ":::EndText" "%~f0"'
) do if %%N gtr %skip% if not defined end set end=%%N
for /f "skip=%skip% tokens=*" %%A in (
 'findstr /n "^" "%~f0"'
) do (
  for /f "delims=:" %%N in ("%%A") do if %%N geq %end% exit /b
  set "line=%%A"
  setlocal enableDelayedExpansion
  echo(!line:*:=!
  endlocal
)
exit /b

:::BeginText3
One more...

  ...for good measure
:::EndText 
```

# java - 带有 JAVA 错误的 MySql。最后一个成功发送到服务器的数据包是 0 毫秒前

> ID：14559794
> 
> 赞同：18
> 
> 时间：2013-01-28T10:16:12.793
> 
> 标签：java, mysql, mysql-connector

我已经阅读了很多有关此异常的信息，但我无法解决我的。

Mysql 服务器正在工作。

我可以从 NetBeans 连接到它，但我无法从 java 代码连接到它。

```
Exception in thread "main" com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:344)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2332)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:243)
    at javaapplication3.JavaApplication3.main(JavaApplication3.java:32)
Caused by: java.net.SocketException: Permission denied: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:241)
    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:257)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:294)
    ... 15 more
Java Result: 1 
```

我用任何从 java 代码连接到 Mysql 的方法都捕获了这个异常，但是从 MysqlWorkBench 和从 NetBeans 是可以的。我没有防火墙。我试过127.0.0.1，结果是一样的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-25T18:43:55.913

搜索文件 my.cnf 并注释该行

```
skip-networking 
```

至

```
#skip-networking 
```

重启mysql

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T10:24:53.900

尝试指定端口

```
conn = DriverManager.getConnection("jdbc:mysql://localhost/mysql?"
                                        + "user=root&password=onelife"); 
```

我认为你应该有这样的东西：

```
conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/mysql?"
                                            + "user=root&password=onelife"); 
```

此外，我的示例中的端口号 (3306) 是默认端口，但您可以在安装 MySQL 时更改它。

我认为指定密码和用户的更好方法是将它们与 URL 分开，如下所示：

```
connection = DriverManager.getConnection(url, login, password); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-09T18:49:27.453

问题主要是由于 MySQL 服务未运行，因此请确保它已运行。如果不是，请以管理员权限运行此 CMD 以启动它：

```
sc start [Your MySQL Service name] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-25T11:04:36.437

此问题已通过新的 mysql 连接器修复，请使用[http://mvnrepository.com/artifact/mysql/mysql-connector-java/5.1.38](http://mvnrepository.com/artifact/mysql/mysql-connector-java/5.1.38)

我曾经在更新连接器 jar 后收到此错误，问题已解决。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-21T09:49:26.180

尝试以下建议：

1.  您的机器可能有一个静态 IP；将此 IP 映射到`hosts`文件为`localhost`.
2.  尝试从您的计算机或网络内通过`mysql`命令登录；如果登录成功，则说明 MySQL 运行良好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-08T07:22:15.550

有两件事

1.  禁用防火墙（如果有）或添加例外或检查您是否有正确的驱动程序文件。禁用任何防病毒软件（如果有）

2.  并确保您的驱动程序类型是`mysql.jdbc.driver`.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-28T10:40:21.403

您的 Java 代码似乎使用的是 IPv6 而不是 IPv4。请尝试使用`127.0.0.1`而不是`localhost`. 例如：您的连接字符串应该是

```
jdbc:mysql://127.0.0.1:3306/expeditor?zeroDateTimeBehavior=convertToNull&user=root&password=onelife 
```

PS：请更新 URL 连接字符串。

# android - 如何解决以下内存不足异常？

> ID：14559799
> 
> 赞同：0
> 
> 时间：2013-01-28T10:16:31.517
> 
> 标签：android, out-of-memory

我正在使用 Android，我正在使用 Imagedownloader 类下载图像并按顺序设置为列表视图项目中的图像视图。

但是当我连续滚动列表视图时，有时会出现 Outoffmemory 异常。

例外情况如下。

```
 01-28 15:30:47.580: E/AndroidRuntime(3723): FATAL EXCEPTION: main
   01-28 15:30:47.580: E/AndroidRuntime(3723): java.lang.OutOfMemoryError
   01-28 15:30:47.580: E/AndroidRuntime(3723):  at       android.graphics.Bitmap.nativeCreate(Native Method)
   01-28 15:30:47.580: E/AndroidRuntime(3723):  at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
   01-28 15:30:47.580: E/AndroidRuntime(3723):  at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
   01-28 15:30:47.580: E/AndroidRuntime(3723):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:618)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:593)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:445)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.content.res.Resources.loadDrawable(Resources.java:1968)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.content.res.Resources.getDrawable(Resources.java:677)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at com.lt.appmedia.customise.SpeakersAdapter.getView(SpeakersAdapter.java:118)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.widget.AbsListView.obtainView(AbsListView.java:2197)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.widget.ListView.makeAndAddView(ListView.java:1774)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.widget.ListView.fillDown(ListView.java:672)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.widget.ListView.fillGap(ListView.java:636)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.widget.AbsListView.trackMotionScroll(AbsListView.java:5259)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.widget.AbsListView$FlingRunnable.run(AbsListView.java:4467)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.os.Handler.handleCallback(Handler.java:605)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.os.Handler.dispatchMessage(Handler.java:92)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.os.Looper.loop(Looper.java:137)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at android.app.ActivityThread.main(ActivityThread.java:4511)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at java.lang.reflect.Method.invokeNative(Native Method)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at java.lang.reflect.Method.invoke(Method.java:511)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
  01-28 15:30:47.580: E/AndroidRuntime(3723):   at dalvik.system.NativeStart.main(Native Method) 
```

我不知道如何解决这个问题。

ImageDownloader 类是

```
public class ImageDownloader {

private final Map<String, SoftReference<Drawable>> mCache = new HashMap<String, SoftReference<Drawable>>();
private final LinkedList<Drawable> mChacheController = new LinkedList<Drawable>();
private ExecutorService mThreadPool;
private final Map<ImageView, String> mImageViews = Collections
        .synchronizedMap(new WeakHashMap<ImageView, String>());

public static int MAX_CACHE_SIZE = 150;
public int THREAD_POOL_SIZE = 3;

private static ImageDownloader imageDownloader;

public static ImageDownloader shareInstance(){
    if(imageDownloader == null){
        imageDownloader = new ImageDownloader();
    }
    return imageDownloader;
}

/**
 * Constructor
 */
public ImageDownloader() {
    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);
}

/**
 * Clears all instance data and stops running threads
 */
public void Reset() {
    ExecutorService oldThreadPool = mThreadPool;
    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);
    oldThreadPool.shutdownNow();

    mChacheController.clear();
    mCache.clear();
    mImageViews.clear();
}

public void loadDrawable(final String url, final ImageView imageView,
        Drawable placeholder) {
    mImageViews.put(imageView, url);
    Drawable drawable = getDrawableFromCache(url);

    // check in UI thread, so no concurrency issues
    if (drawable != null) {
        // Log.d(null, "Item loaded from mCache: " + url);
        imageView.setBackgroundDrawable(drawable);
    } else {
        imageView.setBackgroundDrawable(placeholder);
        queueJob(url, imageView, placeholder);
    }
}

private Drawable getDrawableFromCache(String url) {
    if (mCache.containsKey(url)) {
        return mCache.get(url).get();
    }

    return null;
}

private synchronized void putDrawableInCache(String url, Drawable drawable) {
    int chacheControllerSize = mChacheController.size();
    if (chacheControllerSize > MAX_CACHE_SIZE)
        mChacheController.subList(0, MAX_CACHE_SIZE / 2).clear();

    mChacheController.addLast(drawable);
    mCache.put(url, new SoftReference<Drawable>(drawable));

}

private void queueJob(final String url, final ImageView imageView,
        final Drawable placeholder) {
    /* Create handler in UI thread. */
    final Handler handler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            String tag = mImageViews.get(imageView);
            if (tag != null && tag.equals(url)) {
                if (imageView.isShown())
                    if (msg.obj != null) {
                           imageView.setBackgroundDrawable((Drawable) msg.obj);
                    } else {
  //                               imageView.setImageDrawable(placeholder);
                        imageView.setBackgroundDrawable(placeholder);
                        // Log.d(null, "fail " + url);
                    }
            }
        }
    };

    mThreadPool.submit(new Runnable() {
        @Override
        public void run() {
            final Drawable bmp = downloadDrawable(url);
            // if the view is not visible anymore, the image will be ready
            // for next time in cache
            if (imageView.isShown()) {
                Message message = Message.obtain();
                message.obj = bmp;
                // Log.d(null, "Item downloaded: " + url);

                handler.sendMessage(message);
            }
        }
    });
}

private Drawable downloadDrawable(String url) {
    try {
        InputStream is = getInputStream(url);

        Drawable drawable = Drawable.createFromStream(is, url);
        putDrawableInCache(url, drawable);
        return drawable;

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return null;
}

private InputStream getInputStream(String urlString)
        throws MalformedURLException, IOException {
    URL url = new URL(urlString);
    URLConnection connection;
    connection = url.openConnection();
    connection.setUseCaches(true);
    connection.connect();
    InputStream response = connection.getInputStream();

    return response;
}
 } 
```

我正在通过以下方式将图像设置为 ListView 项目：

```
imageDownloader.loadDrawable(EventsListActivity.stylesheet.getBaseurl()+""+speaker.getPhoto(), imageView, mContext.getResources().getDrawable( R.drawable.noimage )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:28:45.890

中没有问题`ImageDownloader`，但与您的列表有关。

当您创建包含大量图像的列表时，请执行以下几个步骤：

1.  重用项目视图。这由适配器支持并且易于实现。

2.  不要在本地保存所有图像。如果您的位图占用大量空间，您应该释放对旧的引用，并让 GC 收集它们。当列表向后滚动时，不要忘记再次下载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:45:25.243

资源在移动设备上受到限制，这在 Android 上尤为突出，尤其是在处理诸如此类的列表视图中的多个图像时。

我会建议：

1.  **调查 LRUCache**以缓存您的图像，以防止再次下载它们。您可以在此处找到有关此信息：[http](http://android-er.blogspot.com.au/2012/07/caching-bitmaps-with-lrucache.html) ://android-er.blogspot.com.au/2012/07/caching-bitmaps-with-lrucache.html和此处：http: [//developer.android.com/reference/ android/util/LruCache.html](http://developer.android.com/reference/android/util/LruCache.html)。如果您针对的是旧平台，它也在支持库中。

2.  **实现一个列表适配器**——这就是他们的目的。这样，您只会用尽资源来显示可见图像。这里有一些关于这个和下载图像的很好的讨论：[How to display a list of images in a ListView in Android?](https://stackoverflow.com/questions/459729/how-to-display-list-of-images-in-listview-in-android)

3.  **使用 Bitmpafactory**缩小图像： http: [//developer.android.com/reference/android/graphics/BitmapFactory.html](http://developer.android.com/reference/android/graphics/BitmapFactory.html) - 这将确保您不会过度分配资源。仅使用您需要的尺寸/比例。

4.  覆盖适配器类时，请确保您使用上面的 LRUCache 并*首先* **检查图像是否在缓存**中，如果没有，则下载图像。这将大大加快向上滚动，而不必重新获取图像。

图像是棘手的资源消耗，但整洁的适配器、适当的缩放/重采样和缓存的使用将提供可靠的用户体验，而不会出现令人讨厌的内存不足错误。

# c# - MVC 嵌套视图模型属性

> ID：14559804
> 
> 赞同：1
> 
> 时间：2013-01-28T10:16:39.487
> 
> 标签：c#, asp.net, asp.net-mvc

我在将属性从我的视图模型映射到嵌套视图模型时遇到问题。我的结构（瘦身）：

**视图模型：**

```
public class PolicyViewModel
{
     public int PolicyId { get; set; }
     public NoteViewModel NoteVM { get; set; }
}

public class NoteViewModel
{
     public int PolicyId { get; set; }
} 
```

**策略控制器：**

```
public ActionResult Adjustment(int policyId = 0, int historyId = 0)
{
    GroupPolicyViewModel groupPolicyVM = new GroupPolicyViewModel();
    // Automap all property values, then assign the policy Id to the nested controller?!
    groupPolicyVM.NoteVM = new NoteViewModel { PolicyId = policyId };

    return View(groupPolicyVM);
} 
```

**音符控制器**

```
public int PolicyId { get; set; } // null
public JsonResult Get(int take, int skip, FilterExpression filter, NoteViewModel NoteVM)
{
     // How do I get the PolicyId here?! NoteVM PolicyId is null
     // This function is being called via jQuery from the Policy form and I obviously don't want to send the policyId via QueryString.

} 
```

**当然** ，在我看来，我有：

```
@Html.Partial("_Notes", Model.NoteVM)

@Html.HiddenFor(model => model.PolicyId)

@Html.HiddenFor(model => model.NoteVM.PolicyId) // also tried this with no success! 
```

我想这应该是一件很受欢迎的事情，但我不知道我做错了什么。有任何想法吗？我这样做是因为我需要多个页面的 Note 部分视图。

# html - td 内的 100% 高度活动链接 - 响应式表格设计 - IE

> ID：14559807
> 
> 赞同：0
> 
> 时间：2013-01-28T10:16:48.363
> 
> 标签：html, css, css-tables

我目前正在制作一个带有 html 和 css 的响应式表格。我让它在除 IE 之外的所有浏览器中都能正常工作，这是 IE 的任何版本，包括 10。我只需要它在 IE 8,9 和 10 上工作。

表中的 TD 在所有浏览器中都是 100% 的高度，但 TD 中的活动链接在 IE 中不起作用。如果你看到下面的 js fiddle 你可以看到当天的背景颜色应该填充 TD 而它在 IE 中没有。有谁知道如何解决这一问题？任何帮助深表感谢。下面是 js fiddle、表格样式和表格 td 中的活动链接的链接

```
.compact_month_view {
    background-color: white;
    border-collapse: collapse;
    height: 100%;
    position: relative;
    table-layout: fixed;
}

.day_cell a {
    background: none repeat scroll 0 0 #FFFFFF;
    color: #CCCCCC;
    display: inline-table;
    height: 100%;
    line-height: 100%;
    overflow: hidden;
    position: relative;
    text-align: center;
    width: 100%;
} 
```

[http://jsfiddle.net/LtHFK/](http://jsfiddle.net/LtHFK/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:26:07.690

为 td 提供高度 - .compact_month_view td

# java - 如果存在两条以上的记录，则从数据库中获取数据

> ID：14559811
> 
> 赞同：1
> 
> 时间：2013-01-28T10:16:56.630
> 
> 标签：java, android, database, servlets, resultset

我正在开发一个应用程序，在其中我从数据库中选择 rcode(numbers) 的名称。如果名称存在，它将显示与其关联的 rcode。输出像

```
10001 
```

假设，如果存在两个具有相同名称的名称，它将显示为

```
10001 10002 
```

这是我的 servlet 代码。

```
ResultSet rs=stmt.executeQuery("select * from newfarmer where rname='"+get+"'");
while(rs.next()){
    username=rs.getString("rname");

    if(get.equals(username)){
        rcode=rs.getString("rcode");
        out.println(rcode);
    }
} 
```

而且，我在我的 android 应用程序中使用以下代码从中获取数据。那就是我需要选择像 where rname="" 这样的所有数据。现在的问题是，如果存在两条同名记录，它只会拾取一条记录。但 servlet 输出显示为

```
10001 10002 
```

在我的应用程序中，我计算记录总数并显示它。但它只显示一个

```
String line = null;
while ((line = reader.readLine()) != null) {
    StringTokenizer st=new StringTokenizer(line);
    count=st.countTokens();
    Toast.makeText(getBaseContext(), count+" names found", 
            Toast.LENGTH_SHORT).show();
    r_code=st.nextToken();
    ff=1;
} 
```

所以，我需要访问这两个记录并计算记录总数。任何人都可以帮助做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:29:55.277

`out.println(rcode)`添加一个 CRLF（当您使用浏览器查看输出时会忽略它）。如果用空格字符替换它会发生什么？

```
out.print(rcode);
out.print(" "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:31:47.383

使用列表显示记录并添加一个计数器......，列表参考[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:42:49.650

我不明白你为什么在 if 语句中写这个。您无需编写该语句，因为用户名将始终等于获取。删除该语句并尝试再次运行它。

# c# - 内容类型生命周期管理

> ID：14559813
> 
> 赞同：2
> 
> 时间：2013-01-28T10:17:01.780
> 
> 标签：c#, sharepoint, sharepoint-2010

我在下面的链接中看到了这篇文章，我想知道你是否可以帮助我解决我的一些问题

[http://msdn.microsoft.com/en-us/library/ee330223(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/ee330223(v=office.12).aspx)

在我们当前的项目中，我们没有开发但我们必须维护，我们面临一些问题，看起来像其他公司第一次开发内容类型，他们做得很好，使用 xml 定义，创建列表模板并且列表实例也做得很好并且有条理。

但是，在某个时间点，在内容类型和列表已经在生产中运行之后，必须进行一些更改（向现有内容类型添加新字段，更改显示名称或组名的翻译，更改所需的属性，showinnewform，showineditform， ETC）

在互联网上，我发现很多人都遇到了非托管内容类型的问题，这意味着内容类型与其 XML 定义分离，据我所知，当有人使用 UI 修改子内容类型或列表时会发生这种情况。

我正在尝试收集部署后管理内容类型的最佳实践列表：

**1.如何在现有内容类型中添加新字段？**

为此，我们使用了 UpgradeActions 和 AddFieldRef

**2.如何从内容类型中删除现有字段？**

为此，我们还不需要它，但我看到还存在可以在 UpgradeActions 中使用的 RemoveFieldRef 元素

**3.如何对内容类型中的字段进行重新排序？**

我们通过自定义升级操作中的代码来执行此操作。

**4.如何更改现有字段的翻译？**

我们通过自定义升级操作中的代码来执行此操作。

**5.如何更改 ShowInDisplayForm、ShowInNewForm、Hidden、Required 等属性。**

我们通过自定义升级操作中的代码来执行此操作。

我想知道我上面的特别点 3,4 和 5 是否可以称为最佳实践，或者我是否遗漏了什么或做错了什么？为什么？几周前我们遇到了很多问题，当通过代码进行更改并且下推更改不起作用时，没有推送更改（我们没有在列表中看到更改）。在阅读了几个小时后，我发现这可能是因为列表内容类型 LINK 与其父内容类型定义不同。

我发现可以使用 SQL 来重新建立此链接，但它当然不受支持。

[http://www.olavaukan.com/2010/10/content-types-can-be-unghosted-too/](http://www.olavaukan.com/2010/10/content-types-can-be-unghosted-too/)

[http://soerennielsen.wordpress.com/2007/09/08/convert-%E2%80%9Dvirtual-content-types%E2%80%9D-to-physical/](http://soerennielsen.wordpress.com/2007/09/08/convert-%E2%80%9Dvirtual-content-types%E2%80%9D-to-physical/)

也许有人可以指导我正确的方向？

# php - 在 PHP 变量中存储多个值

> ID：14559826
> 
> 赞同：0
> 
> 时间：2013-01-28T10:17:37.737
> 
> 标签：php, mysql, arrays

我有点麻烦...我正在执行一个可能有 5 个结果（1、2、3、4 或 5）的查询，并将它们放入 PHP 变量中。我需要立即在另一个查询中使用这个变量，在这个表中只有这 5 个值中的 1 个存在。

目前，我认为该变量仅持有“5”，即找到的最后一个结果，并且如果当前值不是“5”，则随后在第二个查询中找不到任何结果。

我很想知道是否有一种方法可以将所有 5 个值存储在一个变量中，并在第二个查询中循环遍历它们而不使用数组？

我的代码在这里：

```
//Find the User's ID and the ID of the last question answered
$sqlA = mysql_query("SELECT PKID, LastQuestionAnswered FROM User WHERE EmailAddress = '***'");
//If the operation produces an error, output an error message
if (!$sqlA) {
    die('Invalid query for SQLA: ' . mysql_error());
}
//Count the number of rows output
$sqlACount = mysql_num_rows($sqlA);
//If rows exist, define the values
if ($sqlACount > 0) {
    while ($row = mysql_fetch_array($sqlA)) {
        $sqlAPKID = $row["PKID"];
        $sqlALastQuestionAnswered = $row["LastQuestionAnswered"];
    }
}

//Find the answer given by the user to the last answered question
$sqlB = mysql_query("SELECT Answer FROM Responses WHERE User = $sqlAPKID");
//If the operation produces an error, output an error message
if (!$sqlB) {
    die('Invalid query for SQLB: ' . mysql_error());
}
//Count the number of rows output
$sqlBCount = mysql_num_rows($sqlB);
//If rows exist, define the values
if ($sqlBCount > 0) {
    while ($row = mysql_fetch_array($sqlB)) {
        $sqlBAnswer = $row["Answer"];
    }
}

//Find the number of the next question to be answered based on the user's previous answer and the question they answered
$sqlC = mysql_query("SELECT NextQuestion FROM Answers WHERE QuestionNumber = $sqlALastQuestionAnswered AND PKID = $sqlBAnswer");
//If the operation produces an error, output an error message
if (!$sqlC) {
    die('Invalid query for SQLC: ' . mysql_error());
}
//Count the number of rows output
$sqlCCount = mysql_num_rows($sqlC);
//If rows exist, define the values
if ($sqlCCount > 0) {
    while ($row = mysql_fetch_array($sqlC)) {
        $sqlCNextQuestion = $row["NextQuestion"];
    }
}
//If there is no value for $sqlCNextQuestion, the user has finished the survey
if (empty($sqlCNextQuestion)) {
    //Redirect the user to the "Survey Complete" page
    echo '<meta http-equiv="refresh" content="0; URL=surveycomplete.php">';
    //If there is a value for $sqlCNextQuestion, the user has not finished the survey
} else { 
```

等等

因此，目前，如果没有找到 的值`$SQLCNextQuestion`，用户将被重定向到“调查完成”页面。

任何想法和帮助将不胜感激，请放心，在推出之前将编辑代码以利用 PDO ... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:25:48.407

如果您有超过 1 个的结果，请使用数组。

```
$sqlCNextQuestion[] = ... 
```

代替

```
$sqlCNextQuestion = ... 
```

最后您可以通过 print_r 或 var_dump 函数查看结果

```
print_r($sqlCNextQuestion); 
```

$sqlBAnswer 等也一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:27:24.753

例如，尝试使用 implode 函数

```
<form action="" method="post">
<input type="submit" name="foo" value="A" />
<input type="submit" name="foo" value="B" />
<input type="submit" name="foo" value="C" />
<input type="submit" name="foo" value="D" />
</form>

<?php
echo implode('', $_POST['foo']);
?> 
```

每个提交按钮中的属性名称： name="foo[]" 然后，在 php 中，$_POST['foo'] 包含一个数组，其中每个 "foo[]" 的值

```
echo implode('', $_POST['foo']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:23:14.280

如果您不想使用数组（我不知道您为什么不这样做），您可以将结果连接到一个带有分隔符的字符串中（一个绝对不会出现在任何潜在查询中的分隔符）结果），然后explode（）该字符串稍后。

然而，这仍然使它成为一个数组，但另一种方法是通过从中生成子字符串来搜索连接的字符串，所有这些都是完全混乱的。请使用数组:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T10:34:43.243

您可以使用[PHP 数组](http://php.net/manual/en/language.types.array.php)来获得最佳输出。

```
//Count the number of rows output
$sqlALastQuestionAnswered = array();

$sqlACount = mysql_num_rows($sqlA);
$count = 0;
//If rows exist, define the values
if ($sqlACount > 0) {
    while ($row = mysql_fetch_array($sqlA)) {
        $sqlAPKID[$count] = $row["PKID"];
        $sqlALastQuestionAnswered[$count] = $row["LastQuestionAnswered"];
        $count++;
    }
} 
```

> 计数变量将包含结果的总数。
> 
> 现在您将能够通过数组索引访问特定元素，例如 **$sqlALastQuestionAnswered[0]**将返回第一个值，依此类推。

# portlet - 如何重置 portlet 的状态？

> ID：14559831
> 
> 赞同：0
> 
> 时间：2013-01-28T10:17:47.923
> 
> 标签：portlet, websphere-portal

每当用户第一次导航到该页面时，是否可以重置 portlet 的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T07:40:39.770

尝试重定向到干净的 URL。由于状态是由 URL 管理的，因此清理它会重置状态。

# python - Scapy：将 sr 的输出保存到磁盘

> ID：14559833
> 
> 赞同：0
> 
> 时间：2013-01-28T10:17:59.047
> 
> 标签：python, pickle, dump, scapy

在**Scapy**中，我想将输出保存到磁盘以`sr`供以后分析。

```
ans, unans = sr(somePackets) 
```

虽然`unans`scapy 的内置函数没有问题`wrpcap`，但我似乎无法保存`ans`到磁盘。

```
>>> wrpcap(locationOnDisk, ans)
WARNING: PcapWriter: unknown LL type for tuple. Using type 1 (Ethernet)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/scapy/utils.py", line 470, in wrpcap
    PcapWriter(filename, *args, **kargs).write(pkt)
  File "/usr/lib/python2.7/dist-packages/scapy/utils.py", line 653, in write
    self._write_packet(p)
  File "/usr/lib/python2.7/dist-packages/scapy/utils.py", line 692, in _write_packet
    sec = int(packet.time)
AttributeError: 'tuple' object has no attribute 'time' 
```

事实上，这是我最感兴趣的`time`添加到每个数据包的属性。`sr`

所以我尝试了**pickle**，但情况更糟：

```
>>> pickle.dump(ans, open(locationOnDisk, "w+"))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/pickle.py", line 1370, in dump
    Pickler(file, protocol).dump(obj)
  File "/usr/lib/python2.7/pickle.py", line 224, in dump
    self.save(obj)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 725, in save_inst
    save(stuff)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "/usr/lib/python2.7/pickle.py", line 663, in _batch_setitems
    save(v)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 600, in save_list
    self._batch_appends(iter(obj))
  File "/usr/lib/python2.7/pickle.py", line 615, in _batch_appends
    save(x)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 562, in save_tuple
    save(element)
  File "/usr/lib/python2.7/pickle.py", line 331, in save
    self.save_reduce(obj=obj, *rv)
  File "/usr/lib/python2.7/pickle.py", line 419, in save_reduce
    save(state)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "/usr/lib/python2.7/pickle.py", line 663, in _batch_setitems
    save(v)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "/usr/lib/python2.7/pickle.py", line 663, in _batch_setitems
    save(v)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 725, in save_inst
    save(stuff)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "/usr/lib/python2.7/pickle.py", line 663, in _batch_setitems
    save(v)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 748, in save_global
    (obj, module, name))
pickle.PicklingError: Can't pickle <function <lambda> at 0x976c224>: it's not found as scapy.layers.inet.<lambda> 
```

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:53:38.603

```
[13:44:49][root@box:~]$ scapy    
Welcome to Scapy (2.1.0)
>>> sr
<function sr at 0x8cc3614>
>>> ans, unans = sr(IP(dst="www.slashdot.org")/ICMP()/"XXXXXXXXXXX")
Begin emission:
.Finished to send 1 packets.
.*
Received 3 packets, got 1 answers, remaining 0 packets

>>> ans
<Results: TCP:0 UDP:0 ICMP:1 Other:0>
>>> type(ans)
<type 'instance'>
>>> dir(ans)
['__add__', '__doc__', '__getattr__', '__getitem__', '__getslice__', '__init__', '__module__', '__repr__', '_dump_document', '_elt2pkt', '_elt2show', '_elt2sum', 'afterglow', 'conversations', 'diffplot', 'display', 'filter', 'hexdump', 'hexraw', 'listname', 'make_lined_table', 'make_table', 'make_tex_table', 'multiplot', 'nsummary', 'nzpadding', 'padding', 'pdfdump', 'plot', 'psdump', 'rawhexdump', 'replace', 'res', 'sessions', 'show', 'sr', 'stats', 'summary', 'timeskew_graph'] 
```

那么我们知道什么？我们现在知道这`ans`绝对不是数据包列表，而是提供元组语义（`__getitem__`等）的其他实例对象，因此 scapy 将拒绝将其转储到捕获文件：

```
>>> wrpcap("test.cap", ans)
WARNING: PcapWriter: unknown LL type for tuple. Using type 1 (Ethernet)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/usr/local/lib/python2.7/site-packages/scapy/utils.py", line 466, in wrpcap
    PcapWriter(filename, *args, **kargs).write(pkt)
  File "/usr/local/lib/python2.7/site-packages/scapy/utils.py", line 649, in write
    self._write_packet(p)
  File "/usr/local/lib/python2.7/site-packages/scapy/utils.py", line 688, in _write_packet
    sec = int(packet.time)
AttributeError: 'tuple' object has no attribute 'time' 
```

正如我在上面的评论中所说，提示在错误消息中。**`ans`不是你想的那样**：

```
>>> type(ans[0])
<type 'tuple'>
>>> len(ans[0])
2
>>> ans[0]
(<IP  frag=0 proto=icmp dst=216.34.181.48 |<ICMP  |<Raw  load='XXXXXXXXXXX' |>>>, <IP  version=4L ihl=5L tos=0x0 len=39 id=51902 flags=DF frag=0L ttl=235 proto=icmp chksum=0xbe0 src=216.34.181.48 dst=10.227.33.1 options=[] |<ICMP  type=echo-reply code=0 chksum=0xee45 id=0x0 seq=0x0 |<Raw  load='XXXXXXXXXXX' |<Padding  load='\x00\x00\x00\x00\x00\x00\x00' |>>>>)
>>> ans[0][0]
<IP  frag=0 proto=icmp dst=216.34.181.48 |<ICMP  |<Raw  load='XXXXXXXXXXX' |>>>
>>> ans[0][1]
<IP  version=4L ihl=5L tos=0x0 len=39 id=51902 flags=DF frag=0L ttl=235 proto=icmp chksum=0xbe0 src=216.34.181.48 dst=10.227.33.1 options=[] |<ICMP  type=echo-reply code=0 chksum=0xee45 id=0x0 seq=0x0 |<Raw  load='XXXXXXXXXXX' |<Padding  load='\x00\x00\x00\x00\x00\x00\x00' |>>>> 
```

那么我们现在知道什么？的每个元素`ans`都是一个二元组：

*   元组的第一个元素是发送的数据包。
*   元组的第二个元素是接收到的相应数据包

因此，假设您希望输出中包含两种类型的数据包：

```
>>> all_packets = [elem[0] for elem in ans] + [elem[1] for elem in ans]
>>> import operator
>>> all_packets.sort(key=operator.attrgetter("time"))
>>> wrpcap("test.cap", all_packets)
/usr/local/lib/python2.7/site-packages/scapy/utils.py:665: DeprecationWarning: 'I' format requires 0 <= number <= 4294967295
  self.f.write(struct.pack(self.endian+"IIII", sec, usec, caplen, wirelen))
>>> exit()

[14:03:09][root@box:~]$ ls -ltra | tail -1
-rw-r--r--  1 root root       141 2013-02-13 14:02 test.cap 
```

我已确认此文件在 Wireshark 中正确打开，所以你应该很高兴；我建议进一步测试以确定。然而，结论是：`ans`不是你想的那样。

# javascript - Google Maps API V3 使用地图本身外部的按钮放大/缩小

> ID：14559835
> 
> 赞同：0
> 
> 时间：2013-01-28T10:18:08.110
> 
> 标签：javascript, google-maps-api-3

我在我一个熟人的公司网站上工作。公司在全国设有7个办事处。他要求我创建一个列出这些办公室的页面（包含联系信息、图片等），并在其中添加一个谷歌地图，其中包含多个指示办公室的标记。

我已经这样做了，但是看到缩放级别（一个完整的国家）并不是很详细，我正在考虑在点击上述列表中的办公室时将地图放大到特定的标记/办公室。

但是，我不知道是否有办法从地图外部执行地图内部的操作。有人知道吗？

该网站尚未上线，但作为示例，您可以查看以下链接： http: [//www.inter-psy.nl/contact/contactgegevens](http://www.inter-psy.nl/contact/contactgegevens) 我想做的是（例如）制作彩色块/标题在单击特定标记时执行地图放大到特定标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:04:40.960

您必须使`map`- 变量全局可访问，然后您可以从页面中的任何位置对地图执行任何操作（例如`map.setCenter()`，将地图居中于特定位置或`map.setZoom()`设置缩放级别）

要使变量全局可访问，请**`var`**在创建地图时删除 -keyword

# html - 具有不透明度的元素在 Firefox 中位于 iframe 后面

> ID：14559841
> 
> 赞同：7
> 
> 时间：2013-01-28T10:18:42.767
> 
> 标签：html, css, iframe, opacity

我有一个位于 iframe 上方的元素（条），如果我在该元素上设置不透明度，它会停留在 iframe 下方，即使该项目的 z-index 比 iframe 更大。

但是，如果我在该元素和 iframe 周围创建一个容器 (foo)，并在那里设置不透明度，则 (bar) 元素会像预期的那样停留在 iframe 的前面。

**CSS：**

```
#bar {
    width:100px; 
    opacity:0.5;
    height: 150px; 
    position:relative; 
    top:100px; 
    z-index:2; 
    background:red
}

#foo {
  /* opacity:0.5; */ 
} 
```

**HTML**

```
<div id="foo">
    <div id="bar">
        <ul>
            <li>test</li>
            <li>test</li>
            <li>test</li>
            <li>test</li>
            <li>test</li>
            <li>test</li>
        </ul>
    </div>

    <iframe src="http://www.adelaide.edu.au/myuni/tutorials/docdesign/guides/docDesignGuide_KeepPDFsmall.pdf" width="200px" height="200px" frameborder="0" style="z-index:-1"></iframe>
</div> 
```

创建该容器可以解决我的问题，但我不能这样做，因为我当前的标记不允许这样做。我需要不透明度留在条形元素中。

这仅在 Firefox 中发生，并且 iframe 的内容是一个 .pdf 文件。

如何让 bar 元素保持在 iframe 顶部，同时保持其不透明度设置？

[在这里摆弄](http://jsfiddle.net/N9cZp/5/)

**更新：**

似乎问题与我在 iframe 中采购 pdf 文件而不是网页的事实有关。

[更新的小提琴](http://jsfiddle.net/N9cZp/8/)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-11T23:05:25.820

如果使用 background: rgba(255,255,255,0.5) 其他元素将不受半透明背景的影响。

在我提供的示例中，当您使用 rgba 时，rgb 颜色（255,255,255）为白色，最后一位数字用于设置不透明度，0.5 将是 50% 半透明。

```
#foo {
    background: rgba(255,255,255,0.5);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:40:25.713

据我了解，您希望文字在图片上方且透明？我在我的旧网站 chadwaddell.info 的封面页上做了类似的事情。我做了一个容器div，然后把图片放在自己的div里，把文字放在自己的div里。将容器位置设置为相对，将图片位置设置为绝对。另外，我会使用 rgba 来做这样的不透明度

```
#bar {
width:100px; 
opacity:0.5;
height: 150px; 
position:relative; 
top:100px;  
color: rgba(3,3,3,0.5)
background:rgba(255,0,0,0.5)
} 
```

我上了你的小提琴，做了我想说的，希望这有助于 [http://jsfiddle.net/N9cZp/23/](http://jsfiddle.net/N9cZp/23/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:32:48.003

看看那些链接。我认为这是对您的问题的讨论：

[StackOverflow](https://stackoverflow.com/questions/3820325/overlay-opaque-div-over-youtube-iframe)和[Adob​​e 针对这个问题的声明](http://helpx.adobe.com/x-productkb/multi/swf-file-ignores-stacking-order.html)

我又找到了一个主题来讨论这个问题。作为您的情况，他们使用 pdf iframe：

[链接在这里](http://bytes.com/topic/javascript/answers/883893-div-over-pdf-iframe)

# actionscript-3 - 从影片剪辑定位根

> ID：14559846
> 
> 赞同：0
> 
> 时间：2013-01-28T10:19:16.257
> 
> 标签：actionscript-3, root, movieclip

我无法从影片剪辑 AS3 中定位回主时间线。

我已经尝试了下面的代码，但仍然什么都不做？我已经标记了我希望它在主要时间转到的帧，并将此代码添加到影片剪辑中的动作中，但是当我单击按钮时它什么也不做？我有没有错误出现？

有任何想法吗？

```
map_UK.addEventListener(MouseEvent.CLICK, MAIN);

function MAIN(e:MouseEvent):void
{
MovieClip(root).gotoAndPlay("MAIN");
} 
```

# shell - 在脚本中包含 bash“脚本”命令

> ID：14559849
> 
> 赞同：0
> 
> 时间：2013-01-28T10:19:24.843
> 
> 标签：shell, logging, include

在每次执行某个任务之前，我需要在我的 shell 中设置一些变量并格式化 shell 提示符。我还需要记录我的行为。

目前，我正在运行一个脚本，收集它需要的所有信息（部分通过用户输入），并设置新的 shell 提示符和变量。然后我开始录制`script $var-actionlog-$anothervar-1.log`。使用的变量是在调用`my_script.sh`. 然后，由于脚本命令产生了一个新的 shell，我需要`source my_script.sh`再次调用。

有没有办法可以`script`直接将 -part 包含在内，`my_script.sh`这样我就不必输入所有内容两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:58:50.053

您可以`export`在初始设置脚本中使用使局部变量成为全局变量。例如，您的安装脚本`my_script.sh`可能是：

```
#!/bin/sh
# A startup script

export var="world"
export PS1="\u@\h \w> "

echo "Please enter a number, followed by [ENTER]:"
read num

export anothervar="$num"

script $var-actionlog-$anothervar-1.log 
```

然后，一旦脚本启动，确认您可以运行：

```
echo var=$var, anothervar=$anothervar 
```

如果您想`$PS1`在您的 , 中设置不同的 shell 提示符 ( )`my_script.sh`以供打字稿使用，请确保您没有`$PS1`在`~/.bashrc`. 打字稿 ,每次都会`script $var-actionlog-$anothervar-1.log`调用，并将覆盖您的提示变量. 要仅为登录 shell 设置提示，请将其设置为. `~/.bashrc``$PS1``~/.bash_login`

# java - 如何使用java从最后一行读取文件到第一行

> ID：14559859
> 
> 赞同：0
> 
> 时间：2013-01-28T10:20:34.720
> 
> 标签：java

```
 FileInputStream fstream = new FileInputStream("\\file path");
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
     while (br.ready()) {

                                line = br.readLine();
    } 
```

如果行号不固定且随时间变化，请告诉我如何从最后一行读取文件？我知道上面的内容对于从第一行读取它很有用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:26:51.307

将文件读入列表，并向后处理该列表......文件和流通常设计为向前工作；所以直接用流做这个可能会有点尴尬。仅在文件非常大时才建议...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:33:20.843

您不能向后读取缓冲区，但是您可以按照以下链接中的说明计算缓冲区的行数

[http://www.java2s.com/Code/Java/File-Input-Output/Countthenumberoflinesinthebuffer.htm](http://www.java2s.com/Code/Java/File-Input-Output/Countthenumberoflinesinthebuffer.htm)

然后使用此代码选择您的行：

```
FileInputStream fs= new FileInputStream("someFile.txt");
BufferedReader br = new BufferedReader(new InputStreamReader(fs));
for(int i = 0; i < 30; ++i)
  br.readLine();
String lineIWant = br.readLine(); 
```

正如您所看到的，您在到达您想要的那一行之前迭代、读取每一行（并且什么都不做）（这里我们通过了 31 行，而 #32 是读取的那一行）。如果您的文件很大，这将花费很多时间。

另一种方法是在 List 中输入所有内容，然后使用 sizeof() 和 for() 您可以选择所需的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:43:34.200

如果您知道每行的长度，那么您可以通过查看文件的大小并除以每行的长度来计算出有多少行。（这当然会忽略文件中任何可能的元数据）

然后，您可以使用一些数学来获取最后一行的起始字节。一旦你有了，你就可以在文件上打开一个 RandomAccessFile，然后使用[seek](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html#seek%28long%29)去那个点。然后使用 readline 你可以[读取](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html#readLine%28%29)最后一行

这确实假设这些线都是相同的长度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T10:50:35.577

您可以使用[FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)

并使用这种方法

```
static List<String> readLines(File file) 
          Reads the contents of a file line by line to a 
          List of Strings using the default encoding for the VM. 
```

这将返回一个 List 然后使用[Collections.reverse()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#reverse%28java.util.List%29)

然后简单地迭代它以以相反的顺序获取文件行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T12:56:01.927

这可能对您有帮助 [1]： http: [//mattfleming.com/node/11](http://mattfleming.com/node/11)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-04T23:41:53.853

只需向后保存信息，这就是我所做的一切。只需阅读 Pryor 即可保存和使用 \n

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-28T10:39:45.693

您可以将行保存在列表中（在我的代码中为 arraylist）并从 arraylist 向后“读取”行：

```
try
    {

        FileInputStream fstream = new FileInputStream("\\file path");
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String line = "";
        ArrayList<String> lines = new ArrayList<String>();

        //Read lines and save in ArrayList 
        while (br.ready())
        {
            lines.add(br.readLine());
        }

        //Go backwards through the ArrayList
        for (int i = lines.size(); i >= 0; i--)
        {
            line = lines.get(i);
        }
    }
    catch (Exception e)
    {
        e.printStackTrace();
    } 
```

# c# - WCF 中的事务范围

> ID：14559866
> 
> 赞同：1
> 
> 时间：2013-01-28T10:21:04.320
> 
> 标签：c#, wcf, wcf-security

下面给出的是我的示例代码。它们都是客户端对服务的同步调用。我的问题是，我的远程服务如何知道调用 -> ts.Complete();

```
using (TransactionScope ts = new TransactionScope(TransactionScopeOption.RequiresNew))
{
    try
    {
        ServiceReference1.Service1Client obj = new ServiceReference1.Service1Client();
        obj.UpdateData();
        ServiceReference2.Service1Client obj1 = new ServiceReference2.Service1Client();
        obj1.UpdateData();
        ts.Complete();
    }
    catch (Exception ex)
    {
        ts.Dispose();
    }
} 
```

我正在使用 WSHttpbinding。我的问题是：

1.  WSHttpbinding 和 basicHttpBinding 都支持事务吗？
2.  在“ts.Complete()”调用期间，或在客户端范围内的异常期间，远程 WCF 服务是否会发生请求调用以使事务管理器提交/回滚他的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:56:17.120

**Will WSHttpbinding and basicHttpBinding both support transactions?**

You need to use WSHttpBinding to use TransactionScope as a BasicHttpBinding doesn't support the required WS-* standards for transactions.

**During "ts.Complete()" call Or During exception in client scope, will a request call happen to remote wcf service to make the transaction manager commit/rollback his job**

The complete call doesn't guarantee everything is committed. This tells the transaction manager you are done. It is the complete call on the transaction owner that causes the transaction manager to inform all parties to commit or rollback. If it can't communicate with all parties, it will throw an exception.

So to answer the question, the complete call on child-participants (i.e. not the owner) don't cause a call to the transaction manager, but the complete call from the owner-participant does call the transaction manager, which will then attempt to commit.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:50:19.017

TransactionScope 使用 MSDTC ：

> MSDTC 是 Microsoft 分布式事务协调器的首字母缩写词。顾名思义，MSDTC 是一种为分布式系统提供事务基础设施的 Windows 服务。在这种情况下，事务意味着构建分布式系统中自治代理之间交互的一般方式。每个事务都是具有四个关键属性的状态转换 - ACID 属性：原子（全有或全无）、一致（合法）、隔离（独立于并发事务）和持久（一旦发生，就不能被废除）。有不同的技术可以实现 ACID 属性，但最著名的一种是两阶段提交。

您应该从这篇文章开始：http: [//blogs.msdn.com/b/florinlazar/archive/2004/03/04/what-is-msdtc-and-why-do-i-need-to-care-about -it.aspx](http://blogs.msdn.com/b/florinlazar/archive/2004/03/04/what-is-msdtc-and-why-do-i-need-to-care-about-it.aspx)

# doctrine-orm - Symfony 2.1 - FPNTagBundle - 添加标签错误？

> ID：14559869
> 
> 赞同：1
> 
> 时间：2013-01-28T10:21:25.233
> 
> 标签：doctrine-orm, symfony-2.1

我已经通过作曲家安装了[FPNTagBundle 。](https://github.com/FabienPennequin/FPNTagBundle)

```
 $tagArray=array('uno','due');
        $tagManager = $this->get('fpn_tag.tag_manager');
        $tagsObj = $tagManager->loadOrCreateTags($tagArray);
        $tagManager->replaceTags($tagsObj,$entity);
        $em->persist($entity);
        $em->flush(); 
```

我收到此错误，可避免标签持续存在：

> 使用参数 {"1":null,"2":"uno","3" 执行 'INSERT INTO Tag (name, slug, created_at, updated_at) VALUES (?, ?, ?, ?)' 时发生异常：空，“4”：空}：
> 
> SQLSTATE [23000]：违反完整性约束：1048 列“名称”不能为空 500 内部服务器错误 - DBALException

调用 $tag = parent::createTag($name); 似乎有问题 在 TagManager.php 的第 35 行

有任何想法吗？五。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T11:46:56.437

我在我的项目中遇到了同样的问题。问题是 Tag 实体阻止了`BaseTag`( `FPN\TagBundle\Entity\Tag`) 类中构造函数的执行。我很确定您的 Tag 类有自己的构造函数，并且您不会调用父类，它会设置实体中缺少的 name 属性。

这是一个示例自定义 Tag 类，它调用父构造函数来设置名称：

```
use FPN\TagBundle\Entity\Tag as BaseTag;

class Tag extends BaseTag
{
    protected $tagging;
    public function __construct($name = null)
    {
        parent::__construct($name);
        $this->tagging = new ArrayCollection();
    }
} 
```

# php - 为什么strtotime对不同的时区返回相同的结果

> ID：14559873
> 
> 赞同：1
> 
> 时间：2013-01-28T10:21:46.280
> 
> 标签：php, strtotime, unix-timestamp, date-conversion

我正在使用 php 和 mysql 来开发我的应用程序。对于此应用程序，时间起着重要作用，因为我想根据用户选择的时区向他们显示数据。为此，我使用 strtotime 将时间转换为数字形式，但我只是注意到 strtotime 为所有时区返回相同的值。我编写了以下代码进行测试。

```
date_default_timezone_set("Asia/Kolkata");
echo date("Y-m-d H:i:s")." ------ ";
echo strtotime(date("Y-m-d H:i:s"))."<br/><br/>";
date_default_timezone_set("America/New_York");
echo date("Y-m-d H:i:s")." ------ ";
echo strtotime(date("Y-m-d H:i:s")); 
```

但输出是

```
2013-01-28 15:40:11 ------ 1359367811

2013-01-28 05:10:11 ------ 1359367811 
```

为什么返回值相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:24:53.807

`strtotime()`返回“自 1970 年 1 月 1 日 00:00:00 [**UTC**](http://php.net/manual/en/function.strtotime.php)[以来的秒数](http://php.net/manual/en/function.strtotime.php)**”**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:26:13.477

正如@Bobby 的评论所说，“Unix 时间戳始终是 UTC”。这意味着您实际上是在对 UTC 时区进行两次等效转换。

考虑到*[1]**时区中的**t [1]时间戳和 a* *[2]***中相同的** *t [1]时间戳在*转换*为时区 a [3]*时会产生相同的结果。在您的示例中，“相同的结果”以秒为单位，但原理是相同的。

换句话说，在您的代码中，您正在从看似两个不同的日期生成两个 UNIX 时间戳。但是您实际上正在做的是在*同一时间点*生成两个不同但等效的表示（亚洲和美国时区） 。然后，您将两个等效表示转换为相同的第三个表示（UTC 时区）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T06:28:10.647

根据 PHP 手册`strtotime`，

`The function expects to be given a string containing an English date format and will try to parse that format into a Unix timestamp (the number of seconds since January 1 1970 00:00:00 UTC), relative to the timestamp given in now, or the current time if now is not supplied.`

如上所述，strtotime 将给定的日期格式转换为 Unix 时间戳，该时间戳是相对于 Unix 纪元计算的。纪元是一个固定点，其定义与用户的时区无关，从那时起的秒数在所有时区中相对相同。

设置时区只会影响时间戳值的解释。**

# oracle - 在 unix 上使用 SQL 查询

> ID：14559874
> 
> 赞同：0
> 
> 时间：2013-01-28T10:21:55.163
> 
> 标签：oracle, shell, unix, sqlplus

> **可能重复：**
> [使用 shell 脚本从 sql 脚本中选择列到局部变量中](https://stackoverflow.com/questions/4130878/select-columns-into-local-variable-from-sql-script-using-shell-script)

我正在尝试编写一个 unix 脚本，该脚本将使用 sql 查询检索参数，然后使用此参数运行脚本。目前，我只是试图让它回显检索到的参数。在 toad (oracle 8) 上运行良好的 sql 查询是：

```
select billcycle from bc_run
where billcycle not in (50,16)
and control_group_ind is null
and billseqno=6043 
```

上面的查询给出了一个数字。

现在我写的脚本是：

```
#!/bin/bash

echo "this script will print the billcycle date"

v_bc=`sqlplus -s /@bscsprod <<EOF
select billcycle from bc_run
where billcycle not in (50,16)
and control_group_ind is null
and billseqno=6043`

echo "billcycle number is $v_bc" 
```

我运行文件时的结果是

```
billcycle number is 
```

后面没有数字。

有什么想法有什么问题吗？也许是连接到 sql server 的语法？

谢谢阿萨夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:29:16.750

我认为你也应该以 EOF 结尾：

```
v_bc=`sqlplus -s /@bscsprod <<EOF
select billcycle from bc_run
where billcycle not in (50,16)
and control_group_ind is null
and billseqno=6043
EOF` 
```

编辑：糟糕，由 Alex Poole 更正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:56:33.167

链接到的重复问题 APC 显示了一个工作示例，但为了澄清您有两个问题。第一个是非致命的，只是你没有`EOF`，正如 Rembunator 指出的那样~~（尽管它在那个答案中的位置错误）~~。

更重要的是，尽管您的查询没有终止`;`，所以 SQL*Plus 不会执行它 - 它只是退出而没有输出。

如果您在 SQL*Plus 命令提示符下键入原始查询，它将让您在进一步的提示符处等待输入，然后如果您再次按回车键，则返回到正常提示符，而不实际执行查询：

```
SQL> select billcycle from bc_run
  2  where billcycle not in (50,16)
  3  and control_group_ind is null
  4  and billseqno=6043
  5
SQL> 
```

您可能还需要至少一些输出格式。所以这应该工作：

```
v_bc=`sqlplus -s /@bscsprod <<EOF
set pagesize 0
select billcycle from bc_run
where billcycle not in (50,16)
and control_group_ind is null
and billseqno=6043;
EOF` 
```

# ruby-on-rails-3 - 使用 simpleform gem 的 HABTM 复选框

> ID：14559875
> 
> 赞同：0
> 
> 时间：2013-01-28T10:21:56.537
> 
> 标签：ruby-on-rails-3, simple-form, has-and-belongs-to-many

我有三个模型，我正在尝试使用简单的表单 gem 和复选框保存到第三个表中。

```
class Work < ActiveRecord::Base
    has_many :skills, through: :skillships
end 
```

第二个模型是

```
class Skill < ActiveRecord::Base
   has_many :works, through: :skillships
end 
```

第三个是

```
class Skillship < ActiveRecord::Base
  belongs_to :work
  belongs_to :skill
end 
```

使用工作模型，我试图将数据保存在技能表上。类似于此[http://railscasts.com/episodes/17-habtm-checkboxes-revised](http://railscasts.com/episodes/17-habtm-checkboxes-revised)的内容。你能帮忙吗？

**编辑**

表格

```
<%= simple_form_for(@work) do |f| %>
  <%= f.error_notification %>

<div class="form-inputs">

    <%= f.input :title, :label => 'Project Title' %>
    <%= f.input :excerpt, :as => :text %>

   <fieldset>
   <legend>Skills Used </legend> 
      Would like to check the skills i used here.
   </fieldset>

  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

我试过..

```
<%= hidden_field_tag "work[skill_ids][]", nil %>
<% Skill.all.each do |skill| %>
  <%= check_box_tag "work[skill_ids][]", skill.id, @work.skill_ids.include?(skill.id), id: dom_id(skill) %>
  <%= label_tag dom_id(skill), skill.title %><br>
<% end %> 
```

我这样做的原因是因为工作可以使用许多技能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:09:33.287

我以错误的方式解决这个问题。一个连接表解决了这个问题。

```
rails g migration create_skills_works_table 
```

然后

```
class CreateSkillsWorksTable < ActiveRecord::Migration
  def self.up
    create_table :skills_works, :id => false do |t|
        t.references :skill
        t.references :work
   end

    add_index :skills_works, [:skill_id, :work_id]
    add_index :skills_works, [:work_id, :skill_id]

  end

  def self.down
    drop_table :skills_works
  end

end 
```

在工作视图上使用简单的表单。

```
<fieldset>
   <legend>Skills Used </legend> 
        <%= f.association :skills %>
</fieldset> 
```

# php - 如何拆分成表格行

> ID：14559876
> 
> 赞同：0
> 
> 时间：2013-01-28T10:21:56.463
> 
> 标签：php

我尝试了这里给出的许多解决方案，但我无法将这段代码拆分为多个表行。提前谢谢了！！

更新：对不起，如果我的问题不清楚。我希望有 5 个列并在此之后开始一个新的表格行，希望这会有所帮助。感谢所有的答案！

更新2：有人可以在这里帮助我吗？Minesh 的代码很接近，但我仍然收到错误，请参阅下面的评论。非常，非常感谢提前！

```
$opties.='<b>'.$option['name'].':</b><br /><table><tr>';

      foreach ($option['option_value'] as $option_value) { 

        $opties.= '<td><img src="image/cache/'.$option_thumb.'" /><br />'.$option_value['name'].'</td>';

      }
       $opties.='</tr></table>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:25:46.100

那是因为在循环中你只放 TD 而不是 TR。您需要维护在每个循环中递增 1 的**计数器。**

然后在**foreach**循环中，您可以使用模运算符检查是否打印了 4 列，您需要完成 TR 标签并开始新的 TR 标签。

@更新：基于用户对 5 列的评论

见下面的代码：

```
$opties.='<b>'.$option['name'].':</b><br /><table><tr>';
$cnt=0;
foreach ($option['option_value'] as $option_value) { 
    if($cnt % 5 == 0 && $cnt > 1) 
        $opties .= '</tr><tr>';
    $opties .= '<td><img src="image/cache/'.$option_thumb.'" /><br />'.$option_value['name'].'</td>';
    $cnt++;
}
if(count($option['option_value']) % 5 > 0)
    $opties.='</tr>';
$opties.='</table>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:27:43.630

我不确定这是否是您要查找的内容，但请尝试：

```
$opties.='<b>'.$option['name'].':</b><br /><table>';

      foreach ($option['option_value'] as $option_value) { 

        $opties.= '<tr><td><img src="image/cache/'.$option_thumb.'" /><br />'.$option_value['name'].'</td></tr>';

      }
$opties.='</table>'; 
```

如果你想创建多行，你必须在循环中使用`<tr>`标签。`foreach`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:28:01.887

首先

你应该有 2 个循环

```
foreach($opties as $rows => $column)
    //now it's row so echo 
    <tr>
    foreach( $column as $key => $value) {
        // now it's <td> turn
        <td> data </td>
    }
    </tr>
} 
```

这只是解释 2 个循环的伪代码

希望这有帮助；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T09:21:34.597

我不知道你的数组包含什么，所以我给你一个更通用的例子。

```
$array  = array(1,2,3,4,5,6,7,8,9,10);
$chunks = array_chunk($array, 5);
$output = '<table>' . PHP_EOL;

foreach ($chunks as $row) {
    $output .= '<tr>';

    foreach ($row as $col) {
        $output .= '<td>' . $col . '</td>';
    }

    $output .= '</tr>' . PHP_EOL;
};

$output .= '</table>';

echo $output; 
```

这与@Piya 的回答略有不同。

# java - 在java中将String转换为macAddress Formate

> ID：14559878
> 
> 赞同：-1
> 
> 时间：2013-01-28T10:22:04.827
> 
> 标签：java, string

我想知道在Java中将字符串“00155D038D01”转换为macAdress格式的最简单方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T10:32:43.223

尝试使用正则表达式

```
char divisionChar = ':';//change to '-' if you want your mac to be like 00-15-5D-03-8D-01
String unformattedMAC = "00155D038D01";
String formattedMAC = unformattedMAC.replaceAll("(.{2})", "$1"+divisionChar).substring(0,17); 
```

适用于您拥有的所有 MAC 地址

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T10:34:31.307

我会说这`"00155D038D01".replaceAll("(..)(?!$)", "$1-")`是最简单的:)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-28T10:26:44.847

明显地，

```
public String convertToMacAddress(String input) {
   if (input.equals("00155D038D01") {
       return "00-15-5D-03-8D-01";
   } 

   return null; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T10:36:54.920

```
String address = "00155D038D01";
StringBuilder sb = new StringBuilder(address);

for(int i = 2; i < address.length()+(i/3); i+=3){
   sb.insert(i, ':');
}

System.out.println(sb.toString()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T10:32:45.603

直截了当的方法：

```
String s = "00155D038D01";
StringBuilder sb = new StringBuilder();
for(int i = 0; i < s.length();)
{
    sb.append(s.substring(i++, ++i));
    if(i < s.length()) sb.append("-");
}
String mac = sb.toString(); 
```

# icalendar - iCal：持续时间与 dtend？

> ID：14559882
> 
> 赞同：4
> 
> 时间：2013-01-28T10:22:17.307
> 
> 标签：icalendar, duration

似乎有两种方法可以在 iCal 中定义事件的结束。一种使用持续时间，另一种使用 dtend。他们中的任何一个都比另一个有什么好处吗？除了 dtend 似乎覆盖持续时间之外，我找不到任何其他信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T10:36:29.913

如果你有一个事件并改变了'dtstart'，事件的结束时间；

1.  如果您指定“dtend”，则不应更改
2.  如果您指定“持续时间”，则应该转移

[RFC5545](https://www.rfc-editor.org/rfc/rfc5545)说

> ```
> ; either 'dtend' or 'duration' may appear in 
> ```

```
; a 'eventprop', but 'dtend' and 'duration'
; MUST NOT occur in the same 'eventprop' 
```

# c++ - 删除套接字时处理程序会发生什么

> ID：14559886
> 
> 赞同：2
> 
> 时间：2013-01-28T10:22:48.647
> 
> 标签：c++, boost-asio

当套接字关闭/关闭然后删除（即运行析构函数并释放内存）时，完成处理程序会发生什么？AFAIK 在关闭后关闭所有完成处理程序将在下次轮询循环时收到错误代码。但是，如果 socked 在处理程序有机会运行之前就被删除了，会发生什么？在调度事件处理程序之前删除套接字是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:49:56.950

在执行未完成的处理程序之前删除套接字是安全的。未完成的操作将设置它们的处理程序以调用`boost::asio::error::operation_aborted`. 应用程序代码有责任确保处理程序不会调用已删除套接字上的操作。

具体来说，[销毁](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/basic_io_object/_basic_io_object.html)一个IO对象，比如socket，会导致IO对象的服务被销毁。[`SocketService`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/SocketService.html)要求将`destroy()`隐式取消异步操作。未完成的异步操作将尝试尽快完成。这会导致取消操作的处理程序被传递错误代码`boost::asio::error::operation_aborted`，并安排在`io_service`. 如果这些处理程序是从`io_service`处理事件循环的线程中调用的，或者`io_service`是被[破坏](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/io_service/_io_service.html)的，则这些处理程序将从中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:27:38.237

保证调用所有处理程序。如果套接字已关闭 - 将使用一些错误代码调用处理程序。

通常，您需要使用此保证来使用 boost::enable_shared_from_this 控制对象的生命周期。

```
class Writer : boost::enable_shared_from_this<Writer>
{  
  boost::asio::socket scoket_;

  ...

  void StartWrite() 
  {
      boost::asio::async_write(socket_,
          boost::asio::buffer(buffer_, bytes_sent_),
          boost::bind(&Writer::Handler, shared_from_this,
              boost::asio::placeholders::error));
  ...
  void Handler(boost::system::error_code const& err) {...} 
```

使用这种方法，您的套接字对象将比所有待处理的处理程序寿命更长。

# actionscript-3 - 如何检查 Adob e AIR 应用程序的性能？任何工具？

> ID：14559896
> 
> 赞同：0
> 
> 时间：2013-01-28T10:23:40.017
> 
> 标签：actionscript-3, apache-flex, air, flex4

嗨，我正在创建一个 adobe AIR 应用程序。它工作正常，但我想让我的应用程序没有性能问题。如何检查 Adob​​e AIR 应用程序性能？有可用的工具吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T14:25:54.027

看看[**Adob​​e Scout**](http://gaming.adobe.com/technologies/scout/)

“Adobe Scout 是 Adob​​e Flash Player 和 AIR 的下一代分析工具。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T11:00:01.850

1.  在构建任何 Flash 应用程序时，您需要定义应用程序 FPS。如果真正的 FPS（flash 可以在高负载下跳帧）低于定义的 FPS——你就有麻烦了。[您可以在此处](https://www.google.ru/search?q=actionscript+fps+meter)通过各种 FPS 仪表检查 FPS 。
    如果您的真实 FPS 与定义的 FPS 一致 - 这很好，但尝试将定义的 FPS 值提高到 120（最大值）并检查实际值，在动画期间它几乎不会高于 60，但您越高可以得到 - 你的应用程序越好。使用这种方法，您可以消除或至少指出“慢代码”。
    **添加：**还值得一提的是，如果定义的 FPS 值为 24，并且应用程序处于稳定状态（动画数量、动画复杂度和计算复杂度大致相同），则实际值将“浮动”在某个值上，让我们比如说 23 FPS，散布为 1-2（即 22.7、23.5、23.9、23.1 等）。并且平均值将始终低于定义的 FPS 值。

2.  尝试检查内存使用情况。当您的应用程序在设备上实时运行时，我会开始尝试远程启动 Flash Builder 分析器并检查内存利用率。[参考这个](http://help.adobe.com/en_US/flashbuilder/using/WS6f97d7caa66ef6eb1e63e3d11b6c4d0d21-7e46.html)

3.  尝试检查重绘区域。请注意，不可见的MovieClips（例如颤动者）仍在重绘，除非它们被停止。因此，如果您看到某些区域在没有合理理由的情况下重绘 - 尝试找出原因。理想的情况是调用`stop()`和`visible=false`/或从舞台中删除未使用的动画。
    **添加：**重绘区域指示器是 Flash Player Debug 版本的一部分。您可以通过 Flash Player 调试版本的上下文菜单启用它。

**更新：**当我看到对 Adob​​e Flash 性能问题的兴趣时，我在答案中添加了一些细节。我不记得确切的文章了，但我在 Abode 的网站上找到了很多有用的建议，现在我发现[那里的此类文章的数量有所增加。](http://www.adobe.com/cfusion/search/index.cfm?term=flash%20perfomance) 我之前也不知道 Adob​​e Scout，但听起来很有希望。我一定会很快尝试的。

# jquery - 使用自定义下拉占位符同步选择列表

> ID：14559898
> 
> 赞同：0
> 
> 时间：2013-01-28T10:23:48.537
> 
> 标签：jquery

我有一个带有基础选择列表的自定义下拉列表。它的工作方式类似于亚马逊的搜索范围选择器。目前，我将自定义下拉列表与选择列表“同步”，如下所示：
（prev() 是自定义元素）

```
var $select = $('select');
$select.each(function(index, value) {
  var newValue = $(this).find('option:selected').text();
  $(this).prev().text(newValue);
});

$('select').change(function() {
  var newValue = $(this).find('option:selected').text();
  $(this).prev().text(newValue);
}); 
```

该代码工作正常，并负责在页面加载和 change() 上预设自定义下拉元素。但是，我想学习如何以更好的方式做到这一点 - 例如，我可以以某种方式使用 on() 保持同步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:44:50.237

我从 codereview 得到这个

```
$('select').change(function() {
  var optionText = $(this).find('option:selected').text();
  $(this).prev().text(optionText);
}).trigger('change'); 
```

[https://codereview.stackexchange.com/questions/20976/maintain-sync-of-select-list](https://codereview.stackexchange.com/questions/20976/maintain-sync-of-select-list)

# sql - Sql 脚本运行器

> ID：14559899
> 
> 赞同：0
> 
> 时间：2013-01-28T10:23:58.487
> 
> 标签：sql, sql-server, powershell, scripting

```
Get-ChildItem ".\Stored Procedures\*.sql" | ForEach-Object { sqlcmd -S ServerName -d     DatabaseName -E -i $_.FullName } 
```

当我使用上述命令从文件夹中运行一批脚本时，如果中间脚本中仍然存在问题（如中间的 create/Alter/DROP DML 脚本），那么它应该只停在那里并且需要给我一条错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:55:28.510

你需要做几件事：

1.  将 ErrorActionPreference 设置为停止
2.  将 -b 参数与 sqlcmd.exe 实用程序一起使用
3.  捕获并记录或显示 sqlcmd.exe 实用程序的输出

我[在另一个论坛上回答了类似的问题，](http://powershellcommunity.org/Forums/tabid/54/aft/8882/Default.aspx)并在这里重新发布了答案：

```
echo "select 'Good 1'" > C:\temp\scripts\1.sql
echo "select * from missingTable" > C:\temp\scripts\2.sql
echo "Select 'Good 3'" > C:\temp\scripts\3.sql

$ErrorActionPreference = "Stop"

ForEach ($S In Gci -Path "C:\Temp\Scripts\" -Filter *.sql | Sort-Object Name) {
    try { 
        $result = SqlCmd -b -S $env:computername\sql1 -i $S.FullName
        $result = $result -join "`n"

        if ($LASTEXITCODE -ne 0) {
            throw "$S.FullName : $lastexitcode : $result"
        }
        else {
            write-output "Success: $($s.fullname) : $result" | Out-File C:\Temp\Scripts\sqllogging.txt -Append
        }
    }
    catch {
        write-output "Failed: $_ " | Out-File C:\Temp\Scripts\sqllogging.txt -Append
        throw
    } 
} 
```

# wpf - 使用 DataGridComboBoxColumn 作为 DataGrid 中的自动完成组合框

> ID：14559902
> 
> 赞同：3
> 
> 时间：2013-01-28T10:24:03.570
> 
> 标签：wpf, mvvm

我想将 DataGridComboBoxColumn 用作自动完成组合框。

我已经部分工作了。当 Row 处于 EditMode 时，我可以在 ComboBox 中键入文本，同样在 ViewMode 中，控件返回文本。仅如何通过鼠标双击将标签（在模板中）设置为 EditMode？

在前面，我不想使用 DataGridTemplateColumn 控件，因为它不像 DataGridComboBoxColumn 那样处理键盘和鼠标输入（选项卡、箭头、编辑/查看模式/双击等）。

看起来像：

![应用程序](../Images/a3ff657c24dd319732e57e6c96c1b73e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:03:59.080

我修复了它，添加了一个行为以`TextBox`获取到父 DataGrid 的链接，然后通过调用将 Row 设置为编辑模式`BeginEdit()`。

我使用的解决方案：

**看法**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns:local="clr-namespace:WpfApplication1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Window.Resources>
        <local:BindingProxy x:Key="proxy" Data="{Binding}" />
    </Window.Resources>
    <Grid>
        <DataGrid ItemsSource="{Binding Model.Things}" Name="MyGrid" ClipboardCopyMode="IncludeHeader">
            <DataGrid.Resources>

            </DataGrid.Resources>
            <DataGrid.Columns>
                <DataGridComboBoxColumn Header="Object" MinWidth="140" TextBinding="{Binding ObjectText}" ItemsSource="{Binding Source={StaticResource proxy}, Path=Data.Model.ObjectList}" >
                    <DataGridComboBoxColumn.EditingElementStyle>
                        <Style TargetType="ComboBox">
                            <Setter Property="IsEditable" Value="True"/>
                            <Setter Property="Text" Value="{Binding ObjectText}"/>
                            <Setter Property="IsSynchronizedWithCurrentItem" Value="True" />
                        </Style>
                    </DataGridComboBoxColumn.EditingElementStyle>
                    <DataGridComboBoxColumn.ElementStyle>
                        <Style TargetType="ComboBox">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate>
                                        <TextBox IsReadOnly="True" Text="{Binding Path=DataContext.ObjectText, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGridRow}}}">
                                            <TextBox.Resources>
                                                <Style TargetType="{x:Type TextBox}">
                                                    <Setter Property="local:CellSelectedBehavior.IsCellRowSelected" Value="true"></Setter>
                                                </Style>
                                            </TextBox.Resources>
                                        </TextBox>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </DataGridComboBoxColumn.ElementStyle>
                </DataGridComboBoxColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

**模型**

```
public class Model : BaseModel
{
    //List of objects for combobox
    private List<string> _objectList;
    public List<string> ObjectList { get { return _objectList; } set { _objectList = value; } }

    //Rows in datagrid
    private List<Thing> _things;
    public List<Thing> Things
    {
        get { return _things; }
        set { _things = value; OnPropertyChanged("Things"); }
    }
}

public class Thing : BaseModel
{
    //Text in combobox
    private string _objectText;
    public string ObjectText
    {
        get { return _objectText; }
        set { _objectText = value; OnPropertyChanged("ObjectText"); }
    }
} 
```

**视图模型**

```
public class ViewModel
{
    public Model Model { get; set; }

    public ViewModel()
    {
        Model = new WpfApplication1.Model();
        Model.ObjectList = new List<string>();
        Model.ObjectList.Add("Aaaaa");
        Model.ObjectList.Add("Bbbbb");
        Model.ObjectList.Add("Ccccc");
        Model.Things = new List<Thing>();
        Model.Things.Add(new Thing() { ObjectText = "Aaaaa" });
    }
} 
```

**行为**

```
public class CellSelectedBehavior
{
    public static bool GetIsCellRowSelected(DependencyObject obj) { return (bool)obj.GetValue(IsCellRowSelectedProperty); }

    public static void SetIsCellRowSelected(DependencyObject obj, bool value) { obj.SetValue(IsCellRowSelectedProperty, value); }

    public static readonly DependencyProperty IsCellRowSelectedProperty = DependencyProperty.RegisterAttached("IsCellRowSelected",
      typeof(bool), typeof(CellSelectedBehavior), new UIPropertyMetadata(false, OnIsCellRowSelected));

    static void OnIsCellRowSelected(DependencyObject depObj, DependencyPropertyChangedEventArgs e)
    {
        TextBox item = depObj as TextBox;
        if (item == null)
            return;

        if (e.NewValue is bool == false)
            return;

        if ((bool)e.NewValue)
            item.MouseDoubleClick += SelectRow;
        else
            item.MouseDoubleClick -= SelectRow;
    }

    static void SelectRow(object sender, EventArgs e)
    {
        TextBox box = sender as TextBox;
        var grid = box.FindAncestor<DataGrid>();
        grid.BeginEdit();
    }
} 
```

**助手（查找 DataGrid）**

```
public static class Helper
{
    public static T FindAncestor<T>(this DependencyObject current) where T : DependencyObject
    {
        current = VisualTreeHelper.GetParent(current);
        while (current != null)
        {
            if (current is T)
            {
                return (T)current;
            }
            current = VisualTreeHelper.GetParent(current);
        };
        return null;
    }
} 
```

# c# - 如何访问 mvc 应用程序上的 ACS 令牌？

> ID：14559905
> 
> 赞同：0
> 
> 时间：2013-01-28T10:24:11.733
> 
> 标签：c#, asp.net-mvc, azure, acs

我正在使用访问控制服务 (ACS)。我将 MVC-4 应用程序配置为使用 ACS。我将返回 url 放到我的控制器中，这是`http://127.0.0.1:81/ACS/LogOn`在使用任何身份提供者登录后，我们成功返回到控制器。但是现在有人可以告诉我如何在控制器中访问颁发的令牌吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:30:11.563

假设您已使用基于 WIF 的普通机制将您的应用程序配置为使用 ACS，那么您需要的所有内容都应该可以通过 Thread.CurrentPrincipal 访问。在大多数情况下，您不想要令牌本身，而是想要其中的声明。请参阅[此示例](http://msdn.microsoft.com/en-us/library/hh291061.aspx)。

如果您实际上需要 XML/字符串形式的底层令牌而不是声明（我大多数时候不建议这样做），那么您可以通过将服务配置中的[SaveBoostrapContext](http://msdn.microsoft.com/en-us/library/system.identitymodel.configuration.identityconfigurationelement.savebootstrapcontext.aspx)设置为 true 并通过[BootstrapContext](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsidentity.bootstrapcontext.aspx)属性访问它来获取它索赔身份。

`Thread.CurrentPrincipal.Identity.BootstrapContext;`

# android - 无法在适用于 Android 的 Windows 环境中构建 MUPDF 库

> ID：14559906
> 
> 赞同：-1
> 
> 时间：2013-01-28T10:24:13.243
> 
> 标签：android, pdf, sdk, android-ndk, mupdf

我知道在 GPL 许可下有 MUPDF 库可用于在 android 中呈现 PDF 文件。该库包含本机代码。对于 Native 代码编译，我们需要 android NDK。和 CYGWIN 工具。

我从 code.google.com 网站下载了一个 MUPDF 库代码。我还下载并安装了 android-NDK 和 CYGWIN 工具。我已经按照不同论坛上提到的步骤开始构建 MUPDF 库。

但是当我使用这些步骤构建我的应用程序时，[将 MuPDF Reader 集成到应用程序中](https://stackoverflow.com/questions/8500530/mupdf-reader-integrate-in-project/8587527#8587527)

但是无法成功编译，因此当我运行我的项目时，它会在库代码的这一行抛出异常

```
System.LoadLibrary(mupdfc); 
```

我需要有关此问题的帮助。我正在使用 Windows XP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T12:05:45.677

奇怪的是，当你构建库失败时，库加载将失败，项目将无法运行。

在不提供任何错误消息或诊断信息的情况下询问我们库构建失败的原因不太可能为您提供任何有用的答案。

# c# - C#中的属性

> ID：14559909
> 
> 赞同：16
> 
> 时间：2013-01-28T10:24:25.233
> 
> 标签：c#, properties, accessor

为什么我们可以写作

```
public int RetInt
{
   get;set;
} 
```

代替

```
public int RetInt
{
   get{return someInt;}set{someInt=value;}
} 
```

两者有什么区别？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-28T10:25:24.570

此功能称为[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)，并在 C# 3.0 中引入

> 在 C# 3.0 及更高版本中，当属性访问器中不需要额外的逻辑时，自动实现的属性使属性声明更加简洁。它们还使客户端代码能够创建对象。当您如下例所示声明属性时，**编译器会创建一个私有的匿名支持字段，该字段只能通过属性的 get 和 set 访问器访问**。

```
class Customer
{
    // Auto-Impl Properties for trivial get and set 
    public double TotalPurchases { get; set; }
    public string Name { get; set; }
    public int CustomerID { get; set; } 
```

对于你的问题

> 两者有什么区别？

在你的情况下，没有。由于您在设置或检索值时没有做任何事情，但假设您想要进行一些验证或想要执行其他类型的检查：

```
private int someInt;
public int RetInt
{
    get
    {
        if (someInt > 0)
            return someInt;
        else
            return -1;
    }
    set { someInt = value; } // same kind of check /validation can be done here
} 
```

以上无法使用自动实现的属性来完成。

您可以看到差异的另一件事是在初始化自定义类类型属性时。

如果`MyClass` 在 Normal 属性的情况下您有 Th​​en 列表，则可以初始化/实例化其支持字段而不是构造函数。

```
private List<MyClass> list = new List<MyClass>();
public List<MyClass> List
{
    get { return list; }
    set { list = value; }
} 
```

如果是 Auto 实现的属性，

```
public List<MyClass> SomeOtherList { get; set; } 
```

您只能`SomeOtherList`在构造函数中初始化，不能在字段级别进行初始化。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-28T10:27:19.813

> 这两个有什么不同？

*至少*有两点不同：

1.  在普通属性中，您必须在之前定义一个字段（`someInt`在您的情况下）
2.  在普通属性中，您*可以*在修饰符中设置*断点*`set/get`，而在自动属性中则不能这样做。

换句话说：如果您需要“仅属性”，请使用自动属性，如果您需要对工作流程进行更多控制（在 上引发事件`set`、调试、在内部运行其他内容），请使用“正常”属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T10:27:09.043

这些是自动实现的属性。请参阅[http://msdn.microsoft.com/en-us/library/bb384054.aspx](http://msdn.microsoft.com/en-us/library/bb384054.aspx)了解更多信息。

引入这些的基本原因是为了减少程序员创建私有变量的开销，比如`someInt`在属性中使用它几乎没有用处。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T10:30:15.870

实际上，这些并没有真正的不同，在这两种情况下，您都有一个与您的属性相对应的私有字段，但在第一种情况下，它是由编译器生成并隐藏的。

如果您需要在您的类中经常使用属性后面的变量，我认为最好以旧方式（第二个）声明您的属性，因为每次您访问它时，如果您这样做，这将调用 getter “新方法。

如果您只需要在课堂外使用它（或在大多数情况下），那么您可以采用“新”方式（第一种）

# ruby-on-rails - Rails：如何显示产品类别

> ID：14559912
> 
> 赞同：-1
> 
> 时间：2013-01-28T10:24:43.697
> 
> 标签：ruby-on-rails

对于我的应用程序，我需要找到产品的类别。但是不知道怎么找。类别有许多子类别。子类别有很多产品。SubCategory 和 product 通过 product_sub_category 关联。有没有办法知道产品的类别？帮助！

```
Category model is:
  has_many :sub_categories
  accepts_nested_attributes_for :sub_categories, :allow_destroy => true
  has_many :products, :through => :sub_categories

Sub-category model:
  attr_accessible :category_id, :description, :sub_category, :sub_category_url
  belongs_to :category
  has_many :product_sub_categories
  has_many :products, :through => :product_sub_categories
  has_one :photo, :as => :attachable, :dependent => :destroy  
  accepts_nested_attributes_for :photo, :allow_destroy => true

ProductSubCategory
  belongs_to :product
  belongs_to :sub_category
  belongs_to :category
  attr_accessible :sub_category_id
  before_save :assign_category_id

Product
  belongs_to :user
  has_many   :product_sub_categories
  has_many   :sub_categories, :through => :product_sub_categories
  has_many   :categories, :through => :sub_categories 
  accepts_nested_attributes_for :photos, :allow_destroy => true
  accepts_nested_attributes_for :product_sub_categories 
```

我正在显示产品页面并希望显示其类别。这该怎么做？如果我需要提供任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:32:21.903

在您的控制器中

```
@products = Product.all 
```

在你看来

```
@products.each do |product|    
  product_category = product.sub_category.category
end 
```

通过这样做，您可以获得产品的类别对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:41:30.653

我假设您只需要在显示产品信息（显示操作）时获取产品所属的类别，而不是子类别。

在你的控制器中

```
def show
  @product = Product.includes(:categories).find(params[:id])
end 
```

在你看来（show.html.erb）

```
<% @product.categories.each do |category| %>
  <span><%= category.name %></span>
<% end %> 
```

希望它会有所帮助。我还没有测试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-07T23:00:38.593

**product.category**将为您提供产品类别的 ID。product.categroy.name将为您提供**产品**类别的名称。您可以在视图中使用它。

注意：如果它们之间有 has_many 和 belongs_to 关系。谢谢享受！

# deployment - 确认安装提示后未安装 ActiveX

> ID：14559918
> 
> 赞同：0
> 
> 时间：2013-01-28T10:25:10.983
> 
> 标签：deployment, activex

我有一个柜子可以在我的站点内部署一个 activex。安装提示正确，当我单击“确认”时，似乎将安装activex，但不幸的是不是......它每次都要求我安装......

安装如何工作？有没有办法查看安装错误？

我的内阁 .inf 文件是这样的：

```
[version]
signature="$CHICAGO$"
AdvancedINF=2.0

[Add.Code]
Setup.msi=Setup.msi

[Deployment]
InstallScope=operator

[Setup.msi]
file-win32-x86=thiscab
clsid={72645213-AEA3-49E1-B65E-268101ADF535}
FileVersion=1,0,0,0

[Setup Hooks]
RunSetup=RunSetup

[RunSetup]
run="""msiexec.exe""" /i """%EXTRACT_DIR%\Setup.msi""" /qn 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:55:34.933

要查看 ActiveX 安装日志，您可以使用代码下载日志查看器。[从微软下载](http://download.microsoft.com/download/6/8/3/683DB9FE-8D61-4A3C-B7B8-3169FF70AE9F/cdllogvw.exe)

除此之外，也许尝试在没有 /qn 的情况下运行 msi 并检查安装

# java - 嵌入式码头应用

> ID：14559932
> 
> 赞同：2
> 
> 时间：2013-01-28T10:25:49.763
> 
> 标签：java, jetty

我是码头的新手。我创建了一个应用程序，在其中嵌入了 jetty Web 容器。当我从 Eclipse 运行应用程序时，它运行完美，没有任何问题。但是，当我使用所有必需的库导出项目并从命令行运行它时，我无法像以前在 eclispe 中那样访问 index.jsp 网页。这是运行 jetty web 容器的文件。

```
public class JettyServer {

// The folder containing all the .jsp files
private final static String WEB_ROOT = "src/WebContent";

// Instance of the Jetty server
private final static Server SRV = new Server();

// Context Path
private final static String CONTEXT_PATH = "/smpp";

// Logging 
private final static org.slf4j.Logger logger = LoggerFactory.getLogger(JettyServer.class);

/**
 * @param args
 * @throws ConfigurationException 
 */
public static void main(String[] args) throws ConfigurationException {
    logger.info("Initializing Web Server......");

    // Servlet Context
    final ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);

    // Set the security constraints
    context.setContextPath(CONTEXT_PATH);
    context.setResourceBase(WEB_ROOT);

    context.setClassLoader(Thread.currentThread().getContextClassLoader());

    context.addServlet(DefaultServlet.class, "/");
    context.setInitParameter("org.eclipse.jetty.servlet.Default.dirAllowed", "false");

    String [] welcomeFiles = {"index.jsp"};
    context.setWelcomeFiles(welcomeFiles);
    // Set the .jsp servlet handlers
    final ServletHolder jsp = context.addServlet(JspServlet.class, "*.jsp");
    jsp.setInitParameter("classpath", context.getClassPath());

    // Session Manager
    SessionHandler sh = new SessionHandler();       
    context.setSessionHandler(sh);

    /* Http Request Handlers */
    context.addServlet(HttpRequestProcessor.class, "/HttpHandler");

    // Server configuration setup
    // Connector setup
    //  We explicitly use the SocketConnector because the SelectChannelConnector locks files
    Connector connector = new SocketConnector();
    connector.setHost("localhost");
    connector.setPort(Integer.parseInt(System.getProperty("jetty.port", new PropertiesConfiguration("smpp-config.properties").getString("http_port").trim())));
    connector.setMaxIdleTime(60000);

    JettyServer.SRV.setConnectors(new Connector[] { connector });
    JettyServer.SRV.setHandler(context);
    JettyServer.SRV.setAttribute("org.mortbay.jetty.Request.maxFormContentSize", 0);
    JettyServer.SRV.setGracefulShutdown(5000);
    JettyServer.SRV.setStopAtShutdown(true);

    logger.info("Starting Jetty Web Container....");
    try{
        JettyServer.SRV.start();
    } 
    catch(Exception ex){
        logger.error("Jetty Web Container failed to start [CAUSE : " + ex.getMessage() + "]");
        return;
    }

    logger.info("Jetty Web Container running....");
    while(true){
        try{
            JettyServer.SRV.join();
        }
        catch(InterruptedException iex){
            logger.error("Jetty Web Container interrupted [CAUSE : " + iex.getMessage() + "]");
        }
    }       
}   
} 
```

代码格式正确

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:51:48.053

您在 中使用相对路径`context.setResourceBase("src/WebContent");`会给您带来问题。

使用完整的、绝对的 URI 引用和`context.setResourceBase(String)`.

请注意，您可以使用以下 URI 方案：`file`、`ftp`、`jar`，甚至`http`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:06:39.740

而不是这个

```
final ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS); 
```

你能用这个吗？

```
WebAppContext root = new WebAppContext(); 
```

其余代码作为示例：

```
String webappDirLocation = "src/Webcontent/";

Server server = new Server(8080);

root.setContextPath(CONTEXT_PATH);
root.setDescriptor(webappDirLocation + "/WEB-INF/web.xml");
root.setResourceBase(webappDirLocation);

root.setParentLoaderPriority(true);

server.setHandler(root); 
```

# mysql - 如何在 MYSQL 中比较和更改值

> ID：14559936
> 
> 赞同：0
> 
> 时间：2013-01-28T10:25:53.693
> 
> 标签：mysql

我的桌子看起来像：

```
[Number]     [Value1]
1234567         8
1234567C        7
9876543         1
9876543C        2
5555555         3
5555555C        3 
```

我想在第一列中搜索相同值的条目（数字末尾的“C”除外），并将第二列中的较高值设置为较低的值。总是只有两个相同的值（一个带有“C”），有些对在第二列中具有相同的值，有些则不同。

查询的结果应该是：

```
Number          Value1
1234567           7
1234567C          7
9876543           1
9876543C          1
5555555           3
5555555C          3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:47:48.700

实际上，您不需要任何检查，因为只有 2 个值（因此查询更简单）：

```
UPDATE 
    table
SET
    Value1 = 
    (
        SELECT
            MAX(Value1)
        FROM
            table t
        WHERE
            table.Number = t.Number 
            OR table.Number = t.Number + 'C' 
    )
WHERE
    RIGHT(Number, 1) != 'C' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:19:28.340

以下不是理想的解决方案，但应该做你想做的：

```
update yourTable
set value1 = (
select min(value1) from (
select * from yourTable
) as x
where yourTable.number = x.number + 'C'); 
```

我已经在 mysql 工作台中对此进行了测试：

```
create table yourTable(number varchar (10),value1 int);
insert into yourTable Values('1234567',8);
insert into yourTable Values('1234567C',7);
insert into yourTable Values('9876543',1);
insert into yourTable Values('9876543C',2);
insert into yourTable Values('5555555',3);
insert into yourTable Values('5555555C',3);
insert into yourTable Values('55555556',10);
insert into yourTable Values('55555556C',2); 
```

然后`select * from yourTable;`会返回：

```
1234567     8
1234567C    7
9876543     1
9876543C    2
5555555     3
5555555C    3
55555556    10
55555556C   2 
```

更新后`select * from yourTable;`会返回：

```
1234567     7
1234567C    7
9876543     1
9876543C    1
5555555     3
5555555C    3
55555556    2
55555556C   2 
```

希望这是你想要的:)

# android - Android Facebook SDK - 点赞按钮（用于 URL）

> ID：14559939
> 
> 赞同：1
> 
> 时间：2013-01-28T10:26:04.903
> 
> 标签：android, facebook-like, android-facebook

我知道不可能使用 Android Facebook SDK 来点赞页面。但是，如果我有自己的网站，我希望人们喜欢，那么 URLS 呢？

我可以为此使用 Android Facebook SDK 吗？如何使用？

# jquery - jQGrid 子网格与服务器生成的单个 JSON

> ID：14559942
> 
> 赞同：2
> 
> 时间：2013-01-28T10:26:10.967
> 
> 标签：jquery, jquery-ui, jqgrid

我试图使用 jQGrid 构建一个子网格来显示父子关系。我关注经理和员工的关系。我正在服务器上构建一个 JSON，这就是它的外观

```
{"total":1,"page":1,"records":20,
"rows":[{"id":"Mgr 001","EmpId":"Mgr 001","Manager Name":"Murali","Dept":"D1"
 ,"Employees":[{"EmpId":"Emp 100","Name":"Alex","Dept":"Infrastucture"}]}] 
```

> 问题是当我单击展开时，我从本地存储的employeeLocalJSON 变量中查找数据并将集合分配给子网格。但它没有显示在子网格中。我不知道为什么会这样。我想从服务器加载 json 并显示我应该使用相同的子网格，所以我将它存储在本地变量 employeeLocalJSON 中。

我[从一个嵌套的 json 跟随 jqgrid 子网格](https://stackoverflow.com/questions/13238614/jqgrid-subgrids-from-a-single-nested-json)

[带有“本地”数据的 jqGrid 子网格](https://stackoverflow.com/questions/10163970/jqgrid-subgrid-with-local-data/10178440#10178440)

[以子网格和单个 XML 文件作为输入的 JqGrid](https://stackoverflow.com/questions/5473755/jqgrid-with-subgrid-and-single-xml-file-as-input)

这是我的 jQGrid 代码

```
$(function() {

var employeeLocalJSON;
jQuery("#list").jqGrid({
    //start
    url: '/Employee/Search',
    datatype: "json",
    postData: {
        searchModel: function () {
            var result = {}, i, item,
             formInfo = $('#search-form').serializeArray(),
             l = formInfo.length;
            for (i = 0; i < l; i++) {
                item = formInfo[i];
                result[item.name] = item.value;
            }
            return JSON.stringify(result);
        }
    },
    mtype: "POST",
    colNames: ['id', 'EmpId', 'Manager Name', 'Dept'],
    colModel: [
    { name: 'id', index: 'id', hidden: true, width: 1, align: 'left', key: true },
    { name: 'EmpId', index: 'EmpId', search: true, width: 260, align: 'left' },
    { name: 'ManagerName', index: 'ManagerName', search: false, width: 110, align: 'left' },
    { name: 'Dept', index: 'Dept', search: true, width: 54, align: 'left' }],
    pager: $("#pager"),
    rowNum: 20,
    rowList: [5, 10, 20, 50],
    sortname: 'EmpId',
    sortorder: "asc",
    viewrecords: true,
    loadonce: true,
    sortable: true,
    jsonReader: {
        repeatitems: false
    },
    loadComplete: function (data) {
        if (data.rows) {
            employeeLocalJSON = data.rows; // save original JSON data
        }
    },
    caption: 'Employee Manager Detail',
    subGrid: true,
    subGridOptions: {
        "plusicon": "ui-icon-triangle-1-e",
        "minusicon": "ui-icon-triangle-1-s",
        "openicon": "ui-icon-arrowreturn-1-e",
        "reloadOnExpand": false,
        "selectOnExpand": true
    },
    subGridRowExpanded: function (grid_id, row_id) {
        //            //start of subgrid row expanded
        var subgrid_table_id, pager_id;
        subgrid_table_id = grid_id + "_tone";
        pager_id = "pone_" + subgrid_table_id;
        $("#" + grid_id).html("<table id='" + subgrid_table_id + "' class='scroll' style='width:100%'></table><div id='" + pager_id + "' class='scroll'></div>");
        var indexes = $(this).jqGrid('getGridParam', '_index');

        var empList = employeeLocalJSON[indexes[row_id]].Employees;

        $("#" + subgrid_table_id).jqGrid({
            datatype: 'local',
            data: empList,
            colNames: ['EmpId', 'Name', 'Dept'],
            colModel: [
                        { name: 'EmpId', width: 170 },
                        { name: 'Name', width: 110 },
                        { name: 'Dept', width: 60 }
                       ],
            sortname: 'EmpId',
            viewrecords: true,
            sortorder: "asc",
            width: 960
        });
    }

    //end
});
//                         });
jQuery("#list").jqGrid('navGrid', '#pager', { add: false, edit: false, del: false });
}); 
```

***如何实现从单个 JSON 加载子网格？我的代码可能有什么问题？我无法看到子网格，即使我绑定了数据***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:46:30.633

您遇到的第一个重要问题是**值****中空格的使用`id`**（请参阅`"id":"Mgr 001"`您的数据）。我可以建议你两个替代方案来解决这个问题。第一个是更改生成 id 值的算法。例如，如果可能的话，您可以从 id 中删除所有空格，或者替换`" "`为任何其他字符。另一种选择是更改jqGrid 代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.3/js/grid.base.js#L144)

```
return String(sid).replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"\\$&"); 
```

到

```
return String(sid).replace(/[!"#$%&'()* +,.\/:;<=>?@\[\\\]\^`{|}~]/g,"\\$&"); 
```

（在应该由 jqGrid 编码的字符列表中添加空格）。

要将子网格信息与主网格数据一起发布在**一个响应**`userdata`中，我建议您使用JSON 的一部分，稍后将作为`"userData"`jqGrid 的参数访问（大小写很重要！！！）。如果您不能在服务器端执行此操作，您可以在`beforeProcessing`回调中对服务器响应进行相应的转换。请参阅相应代码示例[的答案](https://stackoverflow.com/a/14205263/315935)。

**更新**：我再次提醒托尼（见[这里](http://www.trirand.com/blog/?page_id=393/bugs/usage-of-jgrid-jqid-everywhere-where-its-needed/#p28152)）关于在`id`. 刚才（参见[此处](https://github.com/tonytomov/jqGrid/commit/ca1a3ab9843410787c39f2f83013118169d007ab)）更改已包含在 jqGrid 的主代码中。所以在下一个版本（比当前的 4.4.3 更高）中，jqGrid 将使用带有空格的 id。

# python - 生成所有组的固定长度组合

> ID：14559946
> 
> 赞同：5
> 
> 时间：2013-01-28T10:26:20.323
> 
> 标签：python, algorithm

我正在寻找一种算法和/或 Python 代码来生成将一组`n`元素划分为零组或多组`r`元素和余数的所有可能方式。例如，给定一个集合：

```
[1,2,3,4,5] 
```

和`n = 5`，`r = 2`我想得到

```
((1,2,3,4,5),)
((1,2),(3,4,5))
((1,3),(2,4,5))
...
((1,2),(3,4),(5,))
((1,2),(3,5),(4,))
... 
```

换句话说，从集合中提取0组两个项目的结果，加上从集合中提取1组两个项目的结果，再加上从集合中提取2组两个项目的结果，...如果`n`更大，这将继续。

生成这些结果的顺序并不重要，每个单独组中元素的顺序也不重要，结果中组的顺序也不重要。（例如`((1,3),(2,4,5))`，等价于`((3,1),(4,5,2))`和`((2,5,4),(1,3))`等。）我正在寻找的是每个不同的结果至少产生一次，最好是一次，以尽可能有效的方式。

* * *

蛮力方法是`r`从`n`元素中生成所有可能的组合，然后创建任意数量的这些组合（[powerset](http://docs.python.org/2/library/itertools.html#recipes)）的所有可能组，迭代它们并仅处理组中的组合在其中没有元素的组合常见的。即使是少量元素也需要很长时间（它需要迭代 2^(n!/r!(nr)!) 个组，因此复杂度是双指数的）*。*

基于[这个问题](https://stackoverflow.com/questions/8886476/enumeration-of-all-possible-two-member-group-constellations)中给出的代码，这基本上是特殊情况`r = 2`，`n`甚至，我想出了以下内容：

```
def distinct_combination_groups(iterable, r):
    tpl = tuple(iterable)
    yield (tpl,)
    if len(tpl) > r:
        for c in combinations(tpl, r):
            for g in distinct_combination_groups(set(tpl) - set(c), r):
                yield ((c,) + g) 
```

这似乎确实产生了所有可能的结果，但它包括一些重复，当它们`n`相当大时，它们中的一个不平凡的数量。所以我希望有一种算法可以避免重复。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T17:02:36.483

这个怎么样？

```
from itertools import combinations

def partitions(s, r):
    """
    Generate partitions of the iterable `s` into subsets of size `r`.

    >>> list(partitions(set(range(4)), 2))
    [((0, 1), (2, 3)), ((0, 2), (1, 3)), ((0, 3), (1, 2))]
    """
    s = set(s)
    assert(len(s) % r == 0)
    if len(s) == 0:
        yield ()
        return
    first = next(iter(s))
    rest = s.difference((first,))
    for c in combinations(rest, r - 1):
        first_subset = (first,) + c
        for p in partitions(rest.difference(c), r):
            yield (first_subset,) + p

def partitions_with_remainder(s, r):
    """
    Generate partitions of the iterable `s` into subsets of size
    `r` plus a remainder.

    >>> list(partitions_with_remainder(range(4), 2))
    [((0, 1, 2, 3),), ((0, 1), (2, 3)), ((0, 2), (1, 3)), ((0, 3), (1, 2))]
    >>> list(partitions_with_remainder(range(3), 2))
    [((0, 1, 2),), ((1, 2), (0,)), ((0, 2), (1,)), ((0, 1), (2,))]
    """
    s = set(s)
    for n in xrange(len(s), -1, -r): # n is size of remainder.
        if n == 0:
            for p in partitions(s, r):
                yield p
        elif n != r:
            for remainder in combinations(s, n):
                for p in partitions(s.difference(remainder), r):
                    yield p + (remainder,) 
```

来自 OP 的示例：

```
>>> pprint(list(partitions_with_remainder(range(1, 6), 2)))
[((1, 2, 3, 4, 5),),
 ((4, 5), (1, 2, 3)),
 ((3, 5), (1, 2, 4)),
 ((3, 4), (1, 2, 5)),
 ((2, 5), (1, 3, 4)),
 ((2, 4), (1, 3, 5)),
 ((2, 3), (1, 4, 5)),
 ((1, 5), (2, 3, 4)),
 ((1, 4), (2, 3, 5)),
 ((1, 3), (2, 4, 5)),
 ((1, 2), (3, 4, 5)),
 ((2, 3), (4, 5), (1,)),
 ((2, 4), (3, 5), (1,)),
 ((2, 5), (3, 4), (1,)),
 ((1, 3), (4, 5), (2,)),
 ((1, 4), (3, 5), (2,)),
 ((1, 5), (3, 4), (2,)),
 ((1, 2), (4, 5), (3,)),
 ((1, 4), (2, 5), (3,)),
 ((1, 5), (2, 4), (3,)),
 ((1, 2), (3, 5), (4,)),
 ((1, 3), (2, 5), (4,)),
 ((1, 5), (2, 3), (4,)),
 ((1, 2), (3, 4), (5,)),
 ((1, 3), (2, 4), (5,)),
 ((1, 4), (2, 3), (5,))] 
```

# java - 对双数求和时出错

> ID：14559949
> 
> 赞同：0
> 
> 时间：2013-01-28T10:26:27.063
> 
> 标签：java, android, floating-point, double

> **可能重复：**
> [将小数位移动到双精度](https://stackoverflow.com/questions/4937402/moving-decimal-places-over-in-a-double)

我在使用双变量的 android 应用程序中遇到问题。An`EditText`解析一个数字，一个double，并将其放入sql数据库中。当我提取该值并与其他值求和时，结果不正确。

例如：

*   我在我的数据库中写了这个：64.1
*   另一个值：12.6
*   另一个值：400

然后我将这两个值相加，结果是 476.70000000000005，这是不正确的（应该是 476.7）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:33:10.983

使用这个功能：

```
double roundTwoDecimals(double d) {
            DecimalFormat twoDForm = new DecimalFormat("#.##");
        return Double.valueOf(twoDForm.format(d));
} 
```

# php - mysql_num_rows 有什么问题？它正在返回错误

> ID：14559951
> 
> 赞同：-1
> 
> 时间：2013-01-28T10:26:29.860
> 
> 标签：php, mysql, mysql-num-rows

我使用了这个系列并且我已经完成了这个视频，并且`mysql_num_rows`从一开始就让我很生气。 [http://www.youtube.com/watch?v=HP75yyjHgTg](http://www.youtube.com/watch?v=HP75yyjHgTg) 我轻松地花了 5 个小时来尝试修复所有这些`mysql_num_rows`错误。目前我正在做个人资料页面，我收到一个错误。错误是：

> 警告：mysql_num_rows() 期望参数 1 是资源，在第 8 行的 /home/ztechrel/public_html/TESTING/blarg/REMAKE/profile.php 中给出 null （第一行是 mysql_num_rows 部分）

profile.php 中的代码是：

```
<?php include("inc/incfiles/header.php"); ?>
<?php
if(isset($_GET['u'])) {
    $username = mysql_real_escape_string($_GET['u']);

    if(ctype_alnum($username))   //check user exists
        $check = mysql_query("SELECT username,first_name FROM users WHERE username='$username'");

    if(mysql_num_rows($check)===1) 
    {
        $get = mysql_fetch_assoc($check);
        $username = $get['username'];
        $firstname = $get['first_name'];
    }
    else
    {
        echo "<h2>User Does Not Exist</h2>";
        exit();
    }
}
?> 
```

有什么办法可以解决这个问题吗？或者有谁知道我可以写这个的另一种方式？我不会对他`mysql_num_rows`再次使用感到惊讶，有没有我可以使用的易于实现的东西？如果您需要任何其他信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:29:27.660

使用它来检查查询中的错误

```
$username = mysql_real_escape_string($_GET['u']);
if(ctype_alnum($username)) {
    //check user exists
    $check = mysql_query("SELECT username,first_name FROM users 
    WHERE username='$username'") or die(mysql_error());
    if(mysql_num_rows($check)===1){
        $get = mysql_fetch_assoc($check);
        $username = $get['username'];
        $firstname = $get['first_name'];
    }
    else
    {
        echo "<h2>User Does Not Exist</h2>";
        exit();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:29:48.410

确保从 PHP 中捕获错误。

可能是之前的语句 mysql_query 未执行，因此未设置结果。

如果 mysql_query 执行正确，请尝试以下操作或注意

```
$check = mysql_query("SELECT username,first_name FROM users WHERE username='$username'")  or die(mysql_error()."<br>".$sql); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:30:11.643

这意味着您的查询不返回任何内容。为您的查询添加回显并将其显示在浏览器中。然后复制查询并在 phpmyadmin 或 mysql 查询浏览器或其他一些 mysql 编辑器中运行它。尝试查找`$username`查询中是否具有正确的值或任何字段名称错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T11:11:58.560

确保变量`$username`不为空。，`ctype_alnum`返回假。所以`$query`是空的。

```
<?php include("inc/incfiles/header.php"); ?>
<?php

    if(isset($_GET['u'])) {
        $username = mysql_real_escape_string($_GET['u']);

        if ($username != "" && if(ctype_alnum($username))) {
            $check = mysql_query("SELECT username,first_name FROM users WHERE username='$username'");

            if(mysql_num_rows($check)===1) 
            {
                $get = mysql_fetch_assoc($check);
                $username = $get['username'];
                $firstname = $get['first_name'];
            }
            else
            {
                echo "<h2>User Does Not Exist</h2>";
                exit();
            }
        }
    }

?> 
```

# javascript - 使用 AJAX 验证网址

> ID：14559952
> 
> 赞同：0
> 
> 时间：2013-01-28T10:26:37.367
> 
> 标签：javascript, ajax, validation, url

以下是我的问题的解释。

**案子：**

我只是在这里大声思考，所以如果我走错了路，请纠正我。我正在研究这个 B2B 系统。我正在为客户构建一个“配置器”应用程序，以便他可以根据需要自定义页面。有一个表单希望用户添加 2 个 url。

**问题：**

我现在想验证这些网址。目前我在 js 中使用正则表达式模式来验证 url 模式。但不知何故，我想确认虽然 url 有正确的模式，但它们并没有被破坏。

**可能的解决方案：**

我正在考虑使用 js 进行 ajax 调用或点击 url，并看到我在标题中没有收到任何错误代码（例如 404）。

那么有可能还是我只是愚蠢？如果可能的话，最好的方法是绕过它。

谢谢杰汉则布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:30:41.540

不，[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)会阻止您在大多数网站上看到状态代码。

测试它们的唯一方法是从服务器解析它们。但是，您可以编写一个执行此操作的 Web 服务并使用 Ajax 进行处理。（确保缓存结果，并且在给定的时间段内不允许对同一台服务器发出过多的请求，以免被用于发起攻击）。

# android - Android上的pkpass

> ID：14559959
> 
> 赞同：15
> 
> 时间：2013-01-28T10:26:54.257
> 
> 标签：android, passbook

有一个 Android 应用程序 Passwallet，它能够解释用于苹果应用程序 Passbook 的 pkpass 文件（[https://play.google.com/store/apps/details?id=com.attidomobile.passwallet](https://play.google.com/store/apps/details?id=com.attidomobile.passwallet)）

我想知道如何读取 pkpass 文件。

Pkpass 文件似乎是 zip 文件，其中包含 json 文件中的所有信息。pkpass 文件是否有默认结构？如果是这样，那是什么？将其导入android应用程序的好方法是什么？

* * *

对于想知道如何读取 pkpass 文件内容的人，请参考以下代码：

我使用 pkpass 文件的意图过滤器设置了此活动

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />

            <data
                android:mimeType="application/vnd-com.apple.pkpass"
                android:scheme="content" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />

            <data
                android:mimeType="application/vnd.apple.pkpass"
                android:scheme="content" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />

            <data
                android:mimeType="application/vnd-com.apple.pkpass"
                android:scheme="file" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />

            <data
                android:mimeType="application/vnd.apple.pkpass"
                android:scheme="file" />
        </intent-filter> 
```

* * *

```
@Override
protected void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
Intent intent = getIntent();
Uri uri = intent.getData();
String scheme = uri.getScheme();

if(ContentResolver.SCHEME_CONTENT.equals(scheme)) {
    try {
        InputStream attachment = getContentResolver().openInputStream(uri);
        handleZipInput(attachment);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
}
else {
    String path = uri.getEncodedPath();
    try {
        FileInputStream fis = new FileInputStream(path);
        handleZipInput(fis);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
}
}

private void handleZipInput(InputStream in) {
    try {
        ZipInputStream zis = new ZipInputStream(in);
        ZipEntry entry;
        while((entry = zis.getNextEntry()) != null) {
            String filename = entry.getName();
            if(filename.equals("pass.json")) {
                StringBuilder s = new StringBuilder();
                int read = 0;
                byte[] buffer = new byte[1024];
                while((read = zis.read(buffer, 0, 1024)) >= 0)
                    s.append(new String(buffer, 0, read));

                JSONObject pass = new JSONObject(s.toString());
                break;
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-28T10:48:09.140

[您可以从此处](https://developer.apple.com/library/ios/#documentation/UserExperience/Reference/PassKit_Bundle/Chapters/Introduction.html)下载 .pkpass 包的完整规范。通行证内容存储在名为 pass.json 的 JSON 文件中。.pkpass 包是一个 zip 文件，其中包含 pass.json、pass 图像、可选的语言环境文件和一个清单文件。

清单需要使用 Apple 颁发的 Pass ID 证书进行签名。但是对于 Android 或任何其他第三方应用程序，构建通行证所需的所有内容都可以从 pass.json 和捆绑的图像中读取。

# jquery - 当 Ctrl + F5 在 jquery 加载之前按下 ie 时，模态对话框内容显示，如何摆脱它？

> ID：14559963
> 
> 赞同：1
> 
> 时间：2013-01-28T10:27:10.540
> 
> 标签：jquery, modal-dialog

我正在使用[Jquery Modal Popup](http://jqueryui.com/dialog/)，请参阅我在[这里使用的实时代码](http://jsbin.com/anuced/1)

按`Ctrl`+`F5`几次，您将看到 div "Hello World" 的内容。

为什么它首先表明它以及如何摆脱它？

以下是我正在使用的完整代码，您可以使用此[链接](http://jsbin.com/anuced/1/edit)在此处编辑代码。

**HTML**

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>jQuery UI Dialog - Default functionality</title>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
        <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
        <link rel="stylesheet" href="/resources/demos/style.css" />  
    </head>
    <body>
        <input type="button" id="btn1" value="Open Jquery Modal Popup" />
        <div id="dialog">
            <h2>Hello World</h2>
        </div>
    </body>
</html> 
```

**JS**

```
$(function() {
    $("#dialog").dialog({
        autoOpen: false,
        width: 350,
        modal: true,
        resizable: false
    });

    $("#btn1").click(function(){
        console.log("aa");
        $( "#dialog" ).dialog("open");
    })
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T10:29:44.743

如果你的意思是你可以`#dialog`在页面加载时看到 div 在它消失之前的瞬间，那是因为它在 DOM 加载之前是可见的，然后它被隐藏了。

您可以使用 CSS 手动隐藏它，如下所示：

```
#dialog {
    display: none;
} 
```

然后，该`dialog`插件将负责为您显示/隐藏它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:34:15.720

将显示设置为无以使用 css。

```
display: none; 
```

# c++ - 最佳实践：隐藏未使用的参数

> ID：14559970
> 
> 赞同：4
> 
> 时间：2013-01-28T10:27:37.827
> 
> 标签：c++

我在类中添加了一个方法，该方法具有一些参数但仍需要稍后实现。

IE

```
void AAA::doSmth(const int32_t status)
{
    // TODO : Add implementation
} 
```

在编译期间，我收到有关未使用参数的警告。基本上我想做的是做一些技巧，使编译器不打印关于未使用参数的警告，但仍然保持空实现。

所以我想知道为了避免编译过程中的警告而对参数进行一些“虚拟”使用的最佳做法是什么？什么是最佳做法？？？

**请不要提供任何 IDE 或编译器相关选项来隐藏警告！！！**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T10:29:19.180

我通常像这样简单地注释掉参数：

```
void AAA::doSmth(const int32_t /*status*/)
{
    // TODO : Add implementation
} 
```

# mysql - 具有多个条件或命令的mysql查询，然后用不同的变量保存每个结果

> ID：14559976
> 
> 赞同：0
> 
> 时间：2013-01-28T10:28:05.047
> 
> 标签：mysql

是否可以使用多个条件或订单进行查询，然后将每个结果保存到一个变量中？

比方说

```
SELECT * FROM table (WHERE common='yes') AS common_result (ORDER BY last_update DESC) AS update_result, (ORDER BY priority DESC) AS priority_result 
```

详细说明：

我想将查询保存到 common='yes'，然后将其保存到 common_result。

我想保存查询 ORDER BY last_update DESC，然后将其保存到 update_result。

我想保存查询 ORDER BY priority DESC，然后将其保存到 priority_result。

请注意，它与此不同

```
SELECT * FROM table WHERE common='yes'  ORDER BY last_update DESC, priority DESC 
```

每个条件/顺序彼此不相关。

是否有任何 mysql 语法可以做到这一点？

我以前这样做是因为我认为它有助于轻松地进行查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:34:05.033

我不清楚你的问题，但我宁愿这样做

```
 SELECT * FROM table 
 WHERE common='yes'
 ORDER BY last_update DESC,      
 priority DESC 
```

# c# - 当它是密件抄送邮件时，查找接收到哪个帐户的电子邮件

> ID：14559979
> 
> 赞同：1
> 
> 时间：2013-01-28T10:28:11.843
> 
> 标签：c#, vba, outlook, outlook-addin

我有一个 Outlook pst，将收到“aperson@domian.com”帐户和“bperson@domain.com”帐户的电子邮件。我需要处理收到到“aperson@domian.com”帐户的所有新电子邮件。基本上对于普通电子邮件（即，在 TO 或 CC 字段中标记地址），我们检查电子邮件的收件人字段。对于密件抄送邮件（即在密件抄送字段中标记地址），我们无法检查帐户。因为在 TO 字段中可能包含未公开的收件人或发件人电子邮件地址。我检查了这些邮件的互联网标题。我知道“aperson@domian.com”基于它收到的 SMTP 在一些 X-Header 字段中。

有什么方法可以找到收到电子邮件的帐户（如果是密件抄送邮件）？有什么方法可以在 c# 中以编程方式读取 Outlook-internet 标头？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-29T22:55:29.747

当然，您可以使用 读取帐户名称和印章`MailItem.PropertyAccessor.GetProperty`。
帐户名称属性的 DASL 名称是
`http://schemas.microsoft.com/mapi/id/{00062008-0000-0000-C000-000000000046}/8580001F`

您还可以使用 PR_TRANSPORT_MESSAGE_HEADERS 属性（DASL 名称）读取 MIME 标头- 使用[OutlookSpy](http://www.dimastr.com/outspy/home.htm)`http://schemas.microsoft.com/mapi/proptag/0x007D001F`查看消息以查看可用属性。

# php - 在保存到服务器之前让用户验证文件

> ID：14559981
> 
> 赞同：0
> 
> 时间：2013-01-28T10:28:20.680
> 
> 标签：php, upload

我的脚本有一个用户上传一个 pdf。我找到了一个 pdf 解析器，它可以显示纯文本的第一部分。然后，用户将验证数据是正确的数据。如果是，则用户提交数据并将其保存到文件中。对于不是文件的数据，我总是使用不可见的表单字段将信息传递给执行页面。但是，对于文件，我不确定最好的方法。

```
if ($_FILES["file"]["error"] > 0){
    echo "Error: " . $_FILES["file"]["error"] . "<br>";
}
else{
    $uploadedFile = $_FILES["file"]["tmp_name"];
    $result = pdf2text($uploadedFile);
    echo substr($result, 0, 200);
    echo "<BR>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:33:58.847

基于[POST方法上传手册](http://www.php.net/manual/en/features.file-upload.post-method.php)

> 如果该文件未被移走或重命名，则该文件将在请求结束时从临时目录中删除。

您需要将 tmp_file 移动到应用程序内的缓存目录，然后根据您的验证是真还是假将其删除，或将其移动到永久目录。

```
if ($_FILES["file"]["error"] > 0){
    echo "Error: " . $_FILES["file"]["error"] . "<br>";
}
else{
    $uploadedFile = $_FILES["file"]["tmp_name"];
    $tmp_file     = PATH_TO_CACHE_FOLDER . time(). $_FILES["file"]["name"]
    if (move_uploaded_file($_FILES['userfile']['tmp_name'], $tmp_file)) {
        $result = pdf2text($uploadedFile);
        echo substr($result, 0, 200);
        echo "<BR>";

    }
} 
```

在下一个脚本中

```
if(isValid() === true)
{
    $tmp_file = $_POST['tmp_file_name'];
    $file_name = $_POST['file_name'];
    move_uploaded_file($tmp_file, PERMANENT_PATH . $file_name);
} 
```

这只是模拟代码，但应该给你一个更好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:34:40.560

移动上传的文件：

move_uploaded_file($uploadedFile, "some/where/temp.pdf" );

...并创建一个包含新文件名的隐藏表单字段（一些/哪里...）。

# c# - 直接将项目添加到数据库时，不会更新 ObservableCollection

> ID：14559983
> 
> 赞同：2
> 
> 时间：2013-01-28T10:28:24.267
> 
> 标签：c#, wpf, entity-framework, observablecollection

我正在使用 EF 连接到我的数据库。我有一个`DbContext`用来获取`DbSet<MyDataModel>`. 我使用 an`ObservableCollection<MyDataModel>`将数据绑定到`GridView`WPF 中的 a 。这就是我填充集合的方式：

```
ObservableCollection<MyDataModel> myCollection = new ObservableCollection<MyDataModel>(dataContect.MyDataModels); 
```

问题是我的数据库是从另一个来源（完全是另一个应用程序）更新的，`ObservableCollection`并且没有检测到何时将项目添加到数据库中。我不知道它会怎样，但我不知道我怎么能做到？该数据库包含很多条目（> 10k），所以我不希望定期重新加载所有条目。

我能做些什么？

**编辑：** 我想我有点不清楚（并且不确定如何`ObservableCollections`工作），但是，是的，我现在意识到我的主要问题是如何`DbContext`在数据库更新时刷新。和它本身并没有太大的关系`ObservableCollection`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:44:23.457

添加项目时，可观察集合会通知您的 UI。如果您绑定到它，您的界面将正确更新。

您仍然需要将项目添加到您的 Observable 集合中才能触发此行为。所以你仍然需要刷新你的 DataContext。

查看[本文](http://www.codeproject.com/Articles/233770/AutoRefresh-Entity-Framework-data-using-SQL-Server)以强制从 SQL 服务器刷新

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T10:48:16.537

似乎根本问题是您需要知道您的应用程序需要知道的某些事情发生了变化。

如果您对第二个应用程序有任何控制权，那么您可以从中发布一条消息，让您的应用程序知道它需要重新加载（或者甚至它可以自己发布更改）。

如果您无法控制其他应用程序，则需要自己检测这些。您可以使用类似的东西[`SqlDependency`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)，尽管这不适合客户端应用程序。您需要一个中央服务来执行监控，然后发布更改通知。

我当然可能完全错了，并且 EF 中可能内置了一些东西来通知更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T10:32:03.480

顾名思义，可观察集合是可观察的，但它不观察任何东西。它的主要用途是在有人添加/删除项目时发出通知，因此您可以使用它来让 UI 自动反映集合中的更改。

# java - 无需证书验证即可发送 HTTP POST 数据并检索 HTML 数据

> ID：14559984
> 
> 赞同：1
> 
> 时间：2013-01-28T10:28:36.387
> 
> 标签：java, url

我想知道如何能够在没有 SSL 证书验证的情况下将 POST 数据发送到 HTTPS URL，以及如何从该请求中取回 html（它实际上是 xml 数据）。

到目前为止，我有以下内容：

```
public void sendPost(final String request, final String urlParameters) throws IOException {

    URL url = new URL(request); 
    HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();           
    connection.setDoOutput(true);
    connection.setDoInput(true);
    connection.setInstanceFollowRedirects(false); 
    connection.setRequestMethod("POST"); 
    connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
    connection.setRequestProperty("charset", "utf-8");
    connection.setRequestProperty("Content-Length", "" + Integer.toString(urlParameters.getBytes().length));
    connection.setUseCaches (false);

    DataOutputStream wr = new DataOutputStream(connection.getOutputStream ());
    wr.writeBytes(urlParameters);
    wr.flush();
    wr.close();
    connection.disconnect();        

} 
```

所以我需要知道以下内容：

*   如何忽略 ssl 证书验证
*   如何从该请求中检索 html 数据

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:33:55.593

基本上，您需要在以下位置设置自己`HostnameVerifier`的`HttpsUrlConnection`：

```
connection.setHostnameVerifier( new AlwaysTrustHostnameVerifier() ); 
```

在哪里

```
class AlwaysTrustHostnameVerifier implements X509TrustManager 
{
    public void checkClientTrusted( X509Certificate[] x509 , String authType ) throws CertificateException { /* nothing */ }
    public void checkServerTrusted( X509Certificate[] x509 , String authType ) throws CertificateException { /* nothing */ }
    public X509Certificate[] getAcceptedIssuers() { return null; }      
} 
```

关键是如果证书链不受信任，则`check*`方法应该抛出`CertificateException`，在您的情况下应该忽略。

干杯，

# joomla - 如何在一个视图中使用两个模型 - Joomla 3

> ID：14559985
> 
> 赞同：3
> 
> 时间：2013-01-28T10:28:40.657
> 
> 标签：joomla, joomla2.5, joomla3.0

我想基于 com_weblinks 创建组件。

该组件将在单个页面上显示类别和链接。

在 3.0 中，我不明白**如何在一个视图中使用 2 个模型（类别模型和链接模型）。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T10:33:15.070

**第一种方法**

我通过如下修改控制器来做到这一点（这是用户的控制器）

```
function doThis(){ // the action in the controller "user" 
    // We will add a second model "bills"
    $model = $this->getModel ( 'user' ); // get first model
    $view  = $this->getView  ( 'user', 'html'  ); // get view we want to use
    $view->setModel( $model, true );  // true is for the default model  
    $billsModel = &$this->getModel ( 'bills' ); // get second model     
    $view->setModel( $billsModel );             
    $view->display(); // now our view has both models at hand           
} 
```

在视图中，您可以简单地对模型进行操作

```
function display($tpl = null){              
    $userModel = &$this->getModel(); // get default model
    $billsModel = &$this->getModel('bills'); // get second model

    // do something nice with the models

    parent::display($tpl); // now display the layout            
} 
```

**替代方法**

在视图中直接加载模型：

```
function display($tpl = null){
 // assuming the model's class is MycomponentModelBills 
 // second paramater is the model prefix    
        $actionsModel = JModel::getInstance('bills', 'MycomponentModel'); 
} 
```

# ssl - 为什么 nginx 后面的 gunicorn 比单独的 gunicorn 慢 88%？

> ID：14559987
> 
> 赞同：5
> 
> 时间：2013-01-28T10:28:52.737
> 
> 标签：ssl, https, nginx, flask, gunicorn

所以，我有一个简单的 Flask API 应用程序，它在运行 tornado 工作者的 gunicorn 上运行。gunicorn 命令行是：

```
gunicorn -w 64 --backlog 2048 --keep-alive 5 -k tornado -b 0.0.0.0:5005 --pid /tmp/gunicorn_api.pid api:APP 
```

当我从另一台服务器直接针对 gunicorn 运行 Apache Benchmark 时，以下是相关结果：

```
ab -n 1000 -c 1000 'http://****:5005/v1/location/info?location=448&ticket=55384&details=true&format=json&key=****&use_cached=true'
Requests per second:    2823.71 [#/sec] (mean)
Time per request:       354.144 [ms] (mean)
Time per request:       0.354 [ms] (mean, across all concurrent requests)
Transfer rate:          2669.29 [Kbytes/sec] received 
```

所以我们的性能接近 3k reqs/sec。

现在，我需要 SSL。所以我将 nginx 作为反向代理运行。以下是同一台服务器上针对 nginx 的相同基准测试：

```
ab -n 1000 -c 1000 'https://****/v1/location/info?location=448&ticket=55384&details=true&format=json&key=****&use_cached=true'
Requests per second:    355.16 [#/sec] (mean)
Time per request:       2815.621 [ms] (mean)
Time per request:       2.816 [ms] (mean, across all concurrent requests)
Transfer rate:          352.73 [Kbytes/sec] received 
```

这意味着性能下降了 87.4%。但是对于我的生活，我无法弄清楚我的 nginx 设置有什么问题。这是：

```
upstream sdn_api{
    server 127.0.0.1:5005;

    keepalive 100;
}

server {
        listen [::]:443;

    ssl on;
    ssl_certificate /etc/ssl/certs/api.sdninja.com.crt;
    ssl_certificate_key /etc/ssl/private/api.sdninja.com.key;
    ssl_protocols SSLv3 TLSv1;
    ssl_ciphers ALL:!kEDH:!aNULL:!ADH:!eNULL:!LOW:!EXP:RC4+RSA:+HIGH:+MEDIUM;
    ssl_session_cache shared:SSL:10m;

    server_name api.*****.com;
    access_log  /var/log/nginx/sdn_api.log;

    location / {
        proxy_pass http://sdn_api;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

        client_max_body_size 100M;
        client_body_buffer_size 1m;
        proxy_intercept_errors on;
        proxy_buffering on;
        proxy_buffer_size 128k;
        proxy_buffers 256 16k;
        proxy_busy_buffers_size 256k;
        proxy_temp_file_write_size 256k;
        proxy_max_temp_file_size 0;
        proxy_read_timeout 300;
    }

} 
```

还有我的 nginx.conf：

```
user www-data;
worker_processes 8;
pid /var/run/nginx.pid;

events {
    worker_connections 2048;
    # multi_accept on;
}

http {

    ##
    # Basic Settings
    ##

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    # server_tokens off;

    # server_names_hash_bucket_size 64;
    # server_name_in_redirect off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    ##
    # Logging Settings
    ##

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    ##
    # Gzip Settings
    ##

    gzip off;
    gzip_disable "msie6";

    # gzip_vary on;
    # gzip_proxied any;
    # gzip_comp_level 6;
    # gzip_buffers 16 8k;
    # gzip_http_version 1.1;
    # gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    ##
    # nginx-naxsi config
    ##
    # Uncomment it if you installed nginx-naxsi
    ##

    #include /etc/nginx/naxsi_core.rules;

    ##
    # nginx-passenger config
    ##
    # Uncomment it if you installed nginx-passenger
    ##

    #passenger_root /usr;
    #passenger_ruby /usr/bin/ruby;

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
} 
```

那么有没有人知道为什么它在这个配置下运行得这么慢？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T18:49:58.030

HTTPS 开销的很大一部分是在握手中。将 -k 传递给 ab 以启用持久连接。您将看到基准测试现在明显更快。

# javascript - express - 末尾的可选斜杠

> ID：14559988
> 
> 赞同：1
> 
> 时间：2013-01-28T10:28:56.183
> 
> 标签：javascript, node.js, express

我必须遵循以下路线：

```
app.get("/download/:id/:name?",function(req,res){}); 
```

如果未给出参数“名称”，如何在 url 可选中添加最后一个斜杠？例如，请求“/download/abc”与此路由不匹配。它必须是“/download/abc/”。有没有办法让“/download/abc”匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:45:31.907

```
app.get("/download/:id/:name?*", ...); 
```

这适用于`download/parameter`，但也适用于`download/parameter/anotherparameter/...`

# django - 我可以在 App Engine 中使用 Django 格式化电子邮件正文吗？

> ID：14559992
> 
> 赞同：0
> 
> 时间：2013-01-28T10:29:10.473
> 
> 标签：django, google-app-engine, email

我试图了解是否可以使用 Django 在应用引擎中格式化电子邮件正文。我有 Django 的所有网站格式，但我不明白我是否可以对电子邮件做同样的事情。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:02:47.753

在写评论时，我得到了解决方案：

```
testo = template.render(u'prova.html',{'prova':prova})
mail.send_mail(sender=email, to=email2, subject=oggetto,body=testo) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:07:09.200

你可以。您不需要 HTML 文件，也可以将 .txt 文件用于模板。

# android - java.sql.SQLException：无法在对象上运行插入 stmt

> ID：14559993
> 
> 赞同：5
> 
> 时间：2013-01-28T10:29:14.757
> 
> 标签：android, sqlite, ormlite

我一直试图在数据库中插入一条记录，但即使我以前做过，它也不能在 Android 中工作。这是我第一次在 ORMLite 中处理多个表。

这就是我想要做的：将数据从 XML 存储到模型中，然后尝试从模型中插入数据。

使用的数据库：SQLite ORM：ORMLite

活动类

```
TbDriverInfoBO tbDriverInfoBO = new TbDriverInfoBO();
Document doc = XMLfunctions.XMLfromString(strResult);
NodeList nodes = doc.getElementsByTagName("root");
Element root = (Element) nodes.item(0);
jabongModel.setLoginId(XMLfunctions.getValue(root, "UserId"));
jabongModel.setPassword(XMLfunctions.getValue(root, "UserPwd"));
jabongModel.setDrsno(XMLfunctions.getValue(root, "DRSNo"));
jabongModel.setBrancode(XMLfunctions.getValue(root, "BranchCode"));
jabongModel.setLoginDate(XMLfunctions.getValue(root, "LoginDate"));
//clsDriverInfo obj = new clsDriverInfo(loginId, pswd, drsno,
/*tbDriverInfoBO.setColUserId(jabongModel.getLoginId());
tbDriverInfoBO.setColPwd(jabongModel.getPassword());
tbDriverInfoBO.setColDrs(jabongModel.getDrsno());
tbDriverInfoBO.setColBranch(jabongModel.getBrancode());*/

tbDriverInfoBO.fillBo(jabongModel);

dbHelperTbDriverInfo.addData(tbDriverInfoBO); 
```

BO类：

```
public class TbDriverInfoBO {

    @DatabaseField(generatedId = true)
    int id;
    @DatabaseField
    String colUserId;
        ...

        // getters and setters

    public TbDriverInfoBO(String colUserId, String colPwd, String colDrs, String colBranch)
    {
        this.colBranch = colBranch;
        this.colDrs = colDrs;
        this.colPwd = colPwd;
        this.colUserId = colUserId;
    }

    public TbDriverInfoBO() {
        // TODO Auto-generated constructor stub
    }
    public void fillBo(JabongModel jabongModel)
    {
       this.colBranch = jabongModel.getBrancode();
       this.colDrs = jabongModel.getDrsno();
       this.colPwd = jabongModel.getPassword();
       this.colUserId = jabongModel.getLoginId();
       //this.id = jabongModel.getId();

    }
}

DBHelperClass
public int addData(TbDriverInfoBO tbDriverInfoBO) {
    int i=0;
    RuntimeExceptionDao<TbDriverInfoBO, String> dao = getTbDriverInfoDaO();
    try{
     i = dao.create(tbDriverInfoBO);
    }
    catch (Exception e) {
        e.getStackTrace();// TODO: handle exception
    }
    return i;
} 
```

我无法弄清楚我哪里出错了。有人请帮忙！！！

这是堆栈跟踪（获得日志猫）：

```
01-28 15:43:46.251: D/dalvikvm(368): threadid=1: still suspended after undo (sc=1 dc=1 s=Y)
01-28 15:43:46.251: D/dalvikvm(368): GC_FOR_MALLOC freed 8148 objects / 498080 bytes in 72ms
01-28 15:43:49.514: D/dalvikvm(368): threadid=1: still suspended after undo (sc=1 dc=1 s=Y)
01-28 15:43:50.790: D/dalvikvm(368): threadid=1: still suspended after undo (sc=1 dc=1 s=Y)
01-28 15:43:50.900: I/Database(368): sqlite returned: error code = 1, msg = no such table: tbdriverinfobo
01-28 15:43:58.681: D/dalvikvm(368): threadid=1: still suspended after undo (sc=1 dc=1 s=Y)
01-28 15:44:01.956: D/dalvikvm(368): threadid=1: still suspended after undo (sc=1 dc=1 s=Y) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T14:28:16.643

在我看来，您*没有*为`tbdriverinfobo`.

```
sqlite returned: error code = 1, msg = no such table: tbdriverinfobo 
```

你能`onCreate()`在助手中展示你的方法吗？您的应用程序是否有一个现有的数据库，并且您后来添加了此表？你需要增加你的数据库版本号吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-14T13:07:46.063

您收到此错误是因为您在想要的新表之前创建了数据库和表

> tbDriverInfoBO（这是你的新表）

并且 ORMLite 库正在抛出类似“找不到表***tbDriverInfoBO*** ....”之类的异常。所以您需要从手机中卸载您的移动应用程序，然后您应该将所有表类写入 onCreate 方法，如下面的代码。 ..

```
@Override
public void onCreate(SQLiteDatabase database, ConnectionSource connectionSource) {
    try {
        TableUtils.createTable(connectionSource, Table1.class);
        TableUtils.createTable(connectionSource, Table2.class);
        TableUtils.createTable(connectionSource, Table3.class);
        TableUtils.createTable(connectionSource, Table4.class);
        TableUtils.createTable(connectionSource, Table5.class);//you must add all your table class 
        TableUtils.createTable(connectionSource, TableN.class);
    } catch (SQLException e) {
        e.printStackTrace();
    }

} 
```

添加所有表类后，您可以将数据添加到本地表...

我希望我的回答对某人有所帮助......快乐的编码

# cocos2d-iphone - ConvertToGL()......Cocos 2dx

> ID：14559997
> 
> 赞同：0
> 
> 时间：2013-01-28T10:29:25.827
> 
> 标签：cocos2d-iphone, cocos2d-x

```
 CCTouch* touch = (CCTouch*)( touches->anyObject() );
 CCPoint location = touch->locationInView();
 location = CCDirector::sharedDirector()->convertToGL(location); 
```

任何人都可以向我解释这种方法是什么以及为什么需要使用！？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:15:54.410

UIKit 坐标的 Y 坐标从左上角开始。OpenGL 的 Y 坐标从左下角开始。

`convertToGL()`通过从屏幕高度减去 Y 坐标，简单地将左上坐标系转换为左下坐标系。

另外注意，cocos2d 是完全开源的，如果你想知道一个函数是做什么的，看看源代码就行了。