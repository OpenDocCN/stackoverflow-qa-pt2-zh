# StackOverflow 问答 13200000-13200999

# ruby-on-rails - Rails 3.0.15 自定义 404 和 500

> ID：13200001
> 
> 赞同：0
> 
> 时间：2012-11-02T17:11:15.023
> 
> 标签：ruby-on-rails, http-status-code-404, custom-error-pages

我已经看到很多关于 Rails 自定义错误视图的问题，但还没有找到解决我的问题的方法！

对于 404，现在我的 routes.rb 在底部有一个包罗万象的功能，可以重定向未知的命名路由，例如“webroot/adsfsdfasdf/”，但它因无效 id 而失败，例如“webroot/people/x1df1231” - ActiveRecord::RecordNotFound (找不到 ID=x1df1231 的人）

对于500，我还没有找到解决方案。

我目前无法升级 Rails，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:19:19.127

如果你想在生产环境中使用 apache 或 nginx，你可以在服务器配置文件中设置它，而不是在 rails 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:11:15.023

我发现的最佳解决方案是使用“around_filter”

在 application_controller 之上：

```
around_filter :handle_errors 
```

然后在下面

```
def handle_errors
    yield
    rescue => e
        logger.debug "\n ====== ERROR ====== \n\n #{e.message} \n\n #{e.annoted_source_code} \n\n #{e.backtrace} \n\n ================= \n\n"
        if e.is_a?(ActiveRecord::RecordNotFound)
            render '/errors/e404'
        else
            render '/errors/e500'
        end
end 
```

其中'/errors/e404' 是一个模板，例如views/errors/e404.html.haml 没有修改routes.rb。最初的包罗万象的路线有时会破坏应用程序。

# eclipse - Eclipse Git 自签名证书错误

> ID：13200005
> 
> 赞同：2
> 
> 时间：2012-11-02T17:11:21.223
> 
> 标签：eclipse, git, egit

我正在尝试使用 Eclipse（Eclipse Juno）中的 GIT 插件克隆可通过 HTTPS 协议访问的存储库。此存储库具有自签名证书。

当我使用命令行`git clone`并指定`sslVerify`选项时，我**可以在本地克隆该存储库：**

```
git config --global http.sslVerify no 
```

但是，我想在 Eclipse 的 EGit 或 GIT 客户端插件上实现这一点。

如何在 Eclipse 中设置此配置？

更新：

试过这个：[https](https://stackoverflow.com/a/9742520/405117) : //stackoverflow.com/a/9742520/405117 没用:(

更新 2：

**收到错误**：username@servername/git/repository 项目：无法打开 git-upload-pack：

请检查：

*   网络连接设置
*   网络连接->SSH2 Eclipse 首选项

进行这些更改后，您可能还需要重新启动 Eclipse。

这些更改已经完成，但没有运气:(

更新 3：与 Egit 2.2.0 相同的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:16:07.313

您正在运行哪个版本的 EGit/JGit？

我发现[这篇](http://code.google.com/p/gitblit/issues/detail?id=4)文章说这是一个正在处理的错误。然而，这篇文章是从 2011 年 6 月开始的，所以我想象到现在补丁已经在那里了。

它在 GitBlit 文档上这么说。我不知道你的远程仓库是否在 GitBlit 上运行，但值得检查`Creating your own Self-Signed Certificate`（[链接](http://gitblit.googlecode.com/git-history/d9be12d95657435b0542861a64bb1fd781f14de8/setup.html)）下的设置部分

> 远程 Eclipse/EGit/JGit 客户端 (<= 1.1.0) 将无法使用此证书进行通信，因为 JGit 始终验证证书的主机名，而不管客户端的 http.sslVerify=false 设置如何。

在同一问题上还有[另一个](https://stackoverflow.com/questions/10453881/egit-clone-does-not-work)关于 SO 的问题。

根据 James Moger 的评论，显然 GitBlit 的引用应该是

> 远程 Eclipse/EGit/JGit 客户端**(<= 2.1.0)**将无法使用此证书进行通信，因为 JGit 始终验证证书的主机名，而不管客户端的 http.sslVerify=false 设置如何。

# php - 使用 cURL 取回 JSON

> ID：13200010
> 
> 赞同：0
> 
> 时间：2012-11-02T17:11:40.217
> 
> 标签：php, web-services, curl

我正在尝试学习 cURL 以使用 JSON Web 服务。我在网上尝试了几个教程，但似乎都没有帮助。

我想访问这个网址：[https](https://uat.petfirsthealthcare.com/pfh.service.webservices/coreservice.svc/json/GetColorList) ://uat.petfirsthealthcare.com/pfh.service.webservices/coreservice.svc/json/GetColorList 并返回结果以在另一个调用中使用。但是当我尝试时，我没有得到任何回报。

我用这个：

```
$request = 'https://uat.petfirsthealthcare.com/pfh.service.webservices/coreservice.svc/json/GetColorList';
curl_init($request);
curl_setopt($session, CURLOPT_HEADER, false);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
$response = curl_exe($session);
curl_close($session);
echo $response; 
```

当您只是转到 URL 时，它会返回 JSON 就好了。感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:13:44.950

这是**经过测试**和**工作**的！

```
<?php

$request = 'https://uat.petfirsthealthcare.com/pfh.service.webservices/coreservice.svc/json/GetColorList';
$session = curl_init();
curl_setopt($session, CURLOPT_URL, $request);
curl_setopt($session, CURLOPT_HEADER, false);
curl_setopt($session, CURLOPT_SSLVERSION,3); 
curl_setopt($session, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt($session, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
curl_setopt($session, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($session, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
$response = curl_exec($session);
curl_close($session);
var_dump($response); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:13:59.983

### 你初始化了`$session`吗？

```
$session = curl_init($request); 
```

这里有一个错字：

```
$response = curl_exec($session); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:14:50.563

我可以看到您有两个问题：

1.  你没有分配`$session`
2.  它是`curl_exec()`，不是*curl_exe*

**更新代码**

```
<?php
$request = 'https://uat.petfirsthealthcare.com/pfh.service.webservices/coreservice.svc/json/GetColorList';
$session = curl_init($request);
curl_setopt($session, CURLOPT_HEADER, false);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($session);
curl_close($session);
echo $response; 
```

# opencv - 如何使用 SVM 进行人员识别？

> ID：13200011
> 
> 赞同：6
> 
> 时间：2012-11-02T17:11:41.910
> 
> 标签：opencv, image-processing, svm, face-recognition

我正在运行 opencv 2.4.2 C++。

我正在尝试使用 opencv 进行人员识别。

我正在使用 VidTIMIT 数据集，其中包含不同方向的不同人。

我正在使用 CvSVM 对这些人进行分类。

我的问题是 svm 的输出总是一样的。

我遵循的算法是：

1.  使用 Haar 进行人脸检测
2.  调整脸部大小 (58*58)
3.  支持向量机培训
4.  分类

现在，我想知道我是否在训练中做错了什么。

我正在尝试这种方法，考虑到 5(num_name) 个人，每个人 10(num_images) 个不同的图像。

```
void runFaceDetectionRecognition(vector<Mat_<uchar> > &images){
vector<vector<Rect> > faces;
for (unsigned i=0; i<images.size(); ++i) {

    /// detection face
    vector<Rect> f;
    faceDetection(images[i], f);

    if (!f.empty()) {
        faces.push_back(f);

        /// I keep only the face
        Mat_<uchar> roi = ( images[i](f[0]) );

        /// resize
        resize(roi, roi, Size(58, 58));

        roi.copyTo(images[i]);            
    }
}

/// Set up parameters
CvSVMParams params;
params.svm_type    = CvSVM::C_SVC;
params.kernel_type = CvSVM::LINEAR;
params.term_crit   = cvTermCriteria(CV_TERMCRIT_ITER, 100, 1e-6);

/// Set up training data
float labels[num_name][num_images];
float label = 0;

/// different label for different person
for (unsigned i=0; i<num_name; ++i) {
    for (unsigned j=0; j<num_images; ++j)
        labels[i][j] = label;

    label++;
}

/// labeling matrix
Mat labelsMat(num_name*num_images, 1, CV_32FC1, labels);

/// unrolling images
float data[images.size()][58*58];
for (unsigned l=0; l<images.size(); ++l)

    for (unsigned i=0; i<58; ++i)
        for (unsigned j=0; j<58; ++j)
            data[l][j+58*i] = images[l].at<float>(i,j);

/// training matrix
Mat train((int) images.size(),58*58, CV_32FC1, data);
CvSVM svm(train, labelsMat, Mat(), Mat(), params);

/// Validation
valSVM(svm, train.rowRange(0, 1));
} 
```

验证码：

```
void valSVM(CvSVM &svm, Mat train){

/// prediction
float response = svm.predict(train);

cout << "Response ===> " << response << " ";

/// output
if (response == 0)  cout << "lea";
else if (response == 1)  cout << "maria";
else if (response == 2)  cout << "ramona";
else if (response == 3)  cout << "teresa";
else if (response == 4)  cout << "yan";
} 
```

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-17T16:27:17.407

这里的另一个答案是说 SVM 必须使用 PCA 才能运行是不正确的。我在没有 PCA 的 128x128 图像上使用了 SVM，并取得了很好的效果。我对 cohn-kanade 数据集做了类似的事情。这是一些可能会有所帮助的源代码。

```
vector<Mat> preImages;//Fill this with your images from your dataset
vector<int> labels;//Fill this with the labels from the dataset
vector<Mat> images;

CascadeClassifier haar_cascade;
haar_cascade.load("/usr/local/share/OpenCV/haarcascades/haarcascade_frontalface_alt.xml");
vector< Rect_<int> > faces;
Mat procFace;
cout << "images: " << preImages.size() << "    labels: " << labels.size() << endl;
for(unsigned int i = 0; i < preImages.size(); i++)
{
    procFace = preImages[i].clone();
    //haar_cascade.detectMultiScale(procFace, faces);
    haar_cascade.detectMultiScale(
            procFace,
            faces,
            1.1,
            3,
            CASCADE_FIND_BIGGEST_OBJECT|CASCADE_DO_ROUGH_SEARCH,
            Size(110, 110)
    );

    if(faces.size() > 0)
    {

        // Process face by face:
        Rect face_i = faces[0];
        // Crop the face from the image.
        Mat face = procFace(face_i);

        ////You can maybe use the equalizeHist function here instead//////
        face = illuminationComp(face);

        //crop face
        Rect cropped(face_i.width*0.18, face_i.height*0.2, int(face_i.width*0.7), int(face_i.height*0.78));
        Mat Cface = face(cropped);

        Mat face_resized;
        resize(Cface, face_resized, Size(128, 128), 1.0, 1.0, INTER_CUBIC);

        images.push_back(face_resized);
    }
}

//svm parameters:
SVMParams params = SVMParams();
params.svm_type = SVM::C_SVC;
params.kernel_type = SVM::LINEAR;
params.degree = 3.43; // for poly
params.gamma = 0.00225; // for poly / rbf / sigmoid
params.coef0 = 19.6; // for poly / sigmoid
params.C = 0.5; // for CV_SVM_C_SVC , CV_SVM_EPS_SVR and CV_SVM_NU_SVR
params.nu = 0.0; // for CV_SVM_NU_SVC , CV_SVM_ONE_CLASS , and CV_SVM_NU_SVR
params.p = 0.0; // for CV_SVM_EPS_SVR
params.class_weights = NULL; // for CV_SVM_C_SVC
params.term_crit.type = CV_TERMCRIT_ITER | CV_TERMCRIT_EPS;
params.term_crit.max_iter = 1000;
params.term_crit.epsilon = 1e-6;

if(images.size() == labels.size())
{
    cout << "Creating SVM Classification" << endl << endl;

    int rowsSize = images.size();
    int trainingArea = images[0].rows * images[0].cols;
    Mat trainingMat = Mat::zeros(rowsSize, trainingArea, CV_32FC1);
    int counter;

    for(int index = 0; index < rowsSize; index++)
    {
        counter = 0;
        for(int rows = 0; rows < images[0].rows; rows++)
        {
            for(int cols = 0; cols < images[0].cols; cols++)
            {
                trainingMat.at<float>(index, counter) = images[index].at<uchar>(rows,cols);
                    counter++;
            }
        }
    }

    Mat matLabels = Mat::zeros(labels.size(),1,CV_32FC1);
    for(size_t index = 0; index < labels.size(); index++)
    {
        matLabels.at<float>(index,0) = float(labels[index]);
    }

    if(trainingMat.rows == matLabels.rows)
    {
        SVM svm;
        svm.train(trainingMat,matLabels,Mat(),Mat(),params);
        svm.save("svm_model.yml");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:09:54.913

看来您正在用完整的 58*58 人脸训练您的 SVM。为了让 SVM 工作，您需要使用 OpenCV 中已经包含的 PCA（主成分分析）等方法来减小维度（获取主成分）。

如果您将维度从 58*58 数组减少到其中 n 是主要特征的*n 数组，则 SVM 的训练将仅使用主要特征，并会产生改进的解决方案。

有很多关于 OpenCV 人脸识别的文档，你可以从[这里](http://opencv.willowgarage.com/wiki/FaceRecognition)开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T19:54:28.717

我还在构建一个项目，我在其中对对象进行了分类。我正在使用 SVM 和 Bag of Features(BOf)/BOW 的组合。在这种方法中，首先您创建字典/码本，然后训练您的 SVM。结果相当不错。

你可以看看这个链接以获得一个想法[http://www.morethantechnical.com/2011/08/25/a-simple-object-classifier-with-bag-of-words-using-opencv-2- 3-w-代码/](http://www.morethantechnical.com/2011/08/25/a-simple-object-classifier-with-bag-of-words-using-opencv-2-3-w-code/)

# jquery - jQuery slideDown 最后延迟

> ID：13200013
> 
> 赞同：0
> 
> 时间：2012-11-02T17:11:51.823
> 
> 标签：jquery, drop-down-menu, slidedown

在[http://teneo.telegraphbranding.com/index.php/](http://teneo.telegraphbranding.com/index.php/)，当点击 sidbar 上的“关于”链接时，会触发下拉菜单。然而，在最终完成之前，它在结尾处结结巴巴。我难住了。这是我的jQuery：

```
$(document).ready(function () {
$('h3.about').on('click', function() {
    $('.dropdown').slideDown(function() {
        window.parent.location = '/about.php'
        return false;
    });
});
}); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:19:20.780

这是`inline`元素的常见问题。您可以添加您的`h1`to`div`并为其设置动画或指定 css`display: block`作为标题。

# c# - 一维数组碰撞

> ID：13200025
> 
> 赞同：3
> 
> 时间：2012-11-02T17:12:29.830
> 
> 标签：c#, arrays, collision-detection

我正在为一维数组的碰撞检测类型方法而苦苦挣扎。

我有一个最多 4 名玩家的控制台游戏，每个玩家轮流掷骰子并在棋盘上移动。

规则是棋盘上同时只能有一名玩家。

因此，如果玩家一掷出 1，他就在第一格。如果玩家 2 在他的回合中掷出 1，他就在第二格。如果玩家 3 在他的回合中掷出 1，那么他就在第三格。等等...

```
private static void PlayerMove(int playerNo)
{
    // TODO: Makes a move for the given player

        for (int i = 0; i < NumberOfPlayers; i++)
        {
            NextMove = playerPositions[i] + playerPositions[i] + DiceThrow();
            playerPositions[i] = NextMove;
        }
} 
```

这是我目前移动玩家的方法，这是目前的一种测试方法，证明玩家每个人都能移动。这样做的结果是每个玩家都落在 1 号方格上。

```
static bool PlayerInSquare(int squareNo)
{
    //TODO: write a method that checks through the 
    //rocket positions and returns true if there is a rocket in the given square

    if (This conditional is what has me confused)
    {
        return true;
    }

} 
```

这是让我头疼的方法。我一直在试验条件，并让它工作了一半，但似乎无法正确处理。

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:17:11.883

假设`playerPositions[]`是一个整数数组，其中包含玩家所在方格的编号，您可以尝试：

```
static bool PlayerInSquare(int squareNo)
{
    return playerPositions.Any(pos => pos == squareNo);
} 
```

一个较少的 Linq-y 解决方案（相当于同一件事）将是：

```
static bool PlayerInSquare(int squareNo)
{
    for (int i = 0; i < NumberOfPlayers; i++)
        if (playerPositions[i] == squareNo)
            return true;

    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:17:30.217

看起来你可以使用：

```
static bool PlayerInSquare(int squareNo)
{
    return playerPositions.Any(pos => pos == squareNo);
} 
```

# python - Python JSON 格式化数据管理

> ID：13200038
> 
> 赞同：1
> 
> 时间：2012-11-02T17:13:25.420
> 
> 标签：python, json, weather-api

我正在尝试从**Python (2.7)中的****开放天气地图**API 的**JSON**数据中提取所需的数据！JSON 文件看起来像这样。

 ****```
{u'calctime': 0.0331,
 u'cnt': 2,
 u'cod': u'200',
 u'list': [{u'clouds': {u'all': 75},
            u'coord': {u'lat': 45.551109, u'lon': 18.69389},
            u'distance': 0.001,
            u'dt': 1351870200,
            u'id': 3193935,
            u'main': {u'humidity': 93,
                      u'pressure': 1008,
                      u'temp': 287.15,
                      u'temp_max': 291.18,
                      u'temp_min': 287.15},
            u'name': u'Osijek',
            u'weather': [{u'description': u'broken clouds',
                          u'icon': u'04d',
                          u'id': 803,
                          u'main': u'Clouds'}],
            u'wind': {u'deg': 70, u'speed': 4.6}},
           {u'clouds': {u'all': 75},
            u'coord': {u'lat': 45.568611, u'lon': 18.61389},
            u'distance': 6.526,
            u'dt': 1351870200,
            u'id': 3187657,
            u'main': {u'humidity': 93,
                      u'pressure': 1008,
                      u'temp': 285.43,
                      u'temp_max': 287.15,
                      u'temp_min': 282.15},
            u'name': u'Visnjevac',
            u'weather': [{u'description': u'light intensity shower rain',
                          u'icon': u'09d',
                          u'id': 520,
                          u'main': u'Rain'}],
            u'wind': {u'deg': 70, u'speed': 4.6}}],
 u'message': u'Model=GFS-OWM, '} 
```

这是两个地理点的天气数据。我知道如何使用 json 包从两个点（例如湿度或温度）中提取单个数据，但问题是我无法从不同的地理点提取多个相同类型的数据。在此示例中，我想提取/打印这些点的名称（osijek、visnjevac）。

有没有办法使用 json 编码器/解码器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:18:26.743

你所拥有的不是 JSON，它是一个 Python 对象，所以我假设你已经通过原始 JSON 字符串`json.loads()`或类似的东西。

要提取`'name'`城市列表中每个字典的值，可以使用以下命令：

```
names = [city['name'] for city in data['list']] 
```

结果：

```
>>> names
[u'Osijek', u'Visnjevac'] 
```

假设您在变量中拥有帖子中的内容`data`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:28:23.253

我想在 FJ 的回答中补充一点，如果您想动态提取特定城市的数据，您可以执行以下操作：

```
cities = ['osijek', 'visnjevac']
cities_data = filter(lambda i: i['name'].lower() in cities, data['list']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T10:31:00.260

您可能会发现我的 GitHub Python 项目[PyOWM](https://github.com/csparpa/pyowm)很有用，它是一个简单的面向对象的客户端包装器，围绕 Open Weather Map Web API。****

# ajax - 在选择时使用带有 AJAX 的 Dojo Uploader

> ID：13200051
> 
> 赞同：0
> 
> 时间：2012-11-02T17:14:02.063
> 
> 标签：ajax, file-upload, dojo, uploader

我想创建一个 Dojo Uploader 按钮。

当用户完成选择文件时，我想立即将文件上传到服务器（不要等待提交点击）。

这是我的代码：

```
<script type="text/javascript">
require(["dojo/parser", "dojox/form/Uploader", "dojox/form/uploader/plugins/IFrame", "dojox/form/uploader/FileList", "dojo/domReady!"],
   function(parser) {
      parser.parse();
});
</script> 
```

在 HTML 文档的正文中：

```
<input name="restoreFile" multiple="false" type="file" id="restoreBtn"
       data-dojo-type="dojox/form/Uploader"
       data-dojo-props='label: "Upload", 
                        url: "<s:url action="restore-backup" />", 
                        uploadOnSelect: "true"' />
<div id="fileList" data-dojo-type="dojox/form/uploader/FileList" 
     data-dojo-props='uploaderId: "restoreBtn"'></div> 
```

我尝试将这两个标签都放入表单标签中，但行为没有变化。

当我点击上传器时，我看到了文件选择器。当我选择文件并单击“打开”时，FileList 显示所选文件，但没有任何内容发送到服务器。

我尝试要求所有三个上传插件，HTML5（在 IE 中不受支持，但在 Chrome 中也无法正常工作）、IFrame 和 Flash。

我误解了 uploadOnSelect 应该如何工作？为什么上传者选择后不上传文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T01:06:25.443

简单的信息；因为我不确定这是否适用于您的问题 - 但如果与旧版加载器（同步 XHR 1.7 之前的加载器）一起使用，上传器效果最好。这是由于作者选择插件架构的方式（flash / iframe / html5）。但是，它不应该与事件处理混淆

*   我在想，尝试将其设置为程序组件 - 在 dojo.ready 和 dojo.parser 都完成了他们的任务之后..

或者，测试 1.6 版是否可以工作 - 或者设置 dojo.config.async = false 是否对您有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T06:55:31.473

您可以将 dojox.form.Uploader 与 dojox.form.uploader.FileList 一起使用。只需如下声明这 2 个。

```
up = new dojox.form.Uploader({
            label: 'Select files',
            multiple: true,
            class:"browseButton",
            url: "UploadFile.php"
        }).placeAt(form);

        list = new dojox.form.uploader.FileList({
            uploader: up
        }).placeAt(form);

        btn = new Button({
            label: 'upload',
            onClick: function() {
                up.upload();
            }
        }).placeAt(form);

        btn.startup();
        up.startup();
        list.startup(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-28T11:45:40.457

我确实尝试过同样的事情，并且在删除引号后它起作用了（使用 Dojo 1.10）

`data-dojo-props="uploadOnSelect: true"` **代替** `data-dojo-props='uploadOnSelect: "true"'`

# javascript - 如何在 Firefox page-mod 中进行重定向？

> ID：13200058
> 
> 赞同：4
> 
> 时间：2012-11-02T17:14:16.520
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我正在尝试将我的 Google Chrome 扩展程序移植到 Firefox Add-On SDK，我需要该扩展程序来过滤我网站中的页面并进行重定向。例如，如果用户打开“ **[http://example.com/special](http://example.com/special)** ”，我需要将他发送到同一浏览器选项卡中的“ **[http://example.com/redirect ”。](http://example.com/redirect)**

这就是我尝试这样做的方式：

```
var pageMod = require("page-mod").PageMod({
    include: "*",
    contentScriptWhen: "start",
    contentScript: "",

    onAttach: function(worker) {
       if (worker.tab.url == worker.url && 
           worker.url.indexOf("example.com/special") > -1) {
           worker.tab.url = "http://example.com/redirect";
       }
    }
}); 
```

问题是：我的浏览器在重定向后有时会挂起（在新页面显示在选项卡中之后立即）。我究竟做错了什么？

*使用 Firefox 16.0.2，附加 SDK 1.11*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-18T01:46:11.980

最好的方法是在较低级别进行：

```
const { Cc, Ci, Cr } = require("chrome");

var events = require("sdk/system/events");
var utils = require("sdk/window/utils");

function listener(event) {
    var channel = event.subject.QueryInterface(Ci.nsIHttpChannel);
    var url = event.subject.URI.spec;

    // Here you should evaluate the url and decide if make a redirect or not.
    // Notice that "shouldIredirect" and "newUrl" are guessed objects you must replace!
    if (shouldIredirect) {
      // If you want to redirect to another url, the you have to abort current request
      // See https://developer.mozilla.org/en-US/docs/XUL/School_tutorial/Intercepting_Page_Loads
      channel.cancel(Cr.NS_BINDING_ABORTED);

      // Aet the current gbrowser object (since the user may have several windows and tabs) and load the fixed URI
      var gBrowser = utils.getMostRecentBrowserWindow().gBrowser;
      var domWin = channel.notificationCallbacks.getInterface(Ci.nsIDOMWindow);
      var browser = gBrowser.getBrowserForDocument(domWin.top.document);

      browser.loadURI(newUrl);
    } else {
      // do nothing, let Firefox keep going on the normal flow
    }
  };
};

exports.main = function() {
  events.on("http-on-modify-request", listener);
}; 
```

如果您想在 actiton 中查看此代码，请查看[此插件](https://github.com/matagus/remove-google-redirects-addon/blob/master/lib/main.js)（**免责声明：**这是我开发的插件）。

# ios - iOS 6：MKMapView 滚动被禁用但不服从

> ID：13200059
> 
> 赞同：2
> 
> 时间：2012-11-02T17:14:18.937
> 
> 标签：ios, ios6, mkmapview

此行为不会出现在 iOS5 中。

我在 MKMapView 上覆盖了一个视图，当用户触摸内部时，我想锁定 mapview ( `setScrollEnabled:NO`) 并调整该 UIView 的大小。我在地图视图中添加了一个自定义手势识别器来检查触摸的位置，如果它在覆盖范围之外，用户可以移动/捏合地图以更改区域。

问题是`scrollEnabled`设置为 NO，即使它总是在我检查它时报告适当的值`NSLog`，但地图视图仍然会滚动。

代码

我的视图控制器.m

```
// viewcontroller that contains the map view; this is the delegate as well
@implementation MyViewController
{
    //private vars
    MKMapView *_mapView;
}

//...

- (void)configTheMap
{
    _mapView = //initwithframe
    //add it as subview, bring it to front
    [_mapView setDelegate:self]

    //setup gesture recognizer
    [gesture setTouchesBeganBlock:^(NSSet *touches, UIEvent *event) {
        //if touch is in the circle set _mapView scrollEnabled:NO
    }];

    //touchesMoved, touchesEnded

    [_mapView addGestureRecognizer:gesture];
} 
```

正如我所说，在 iOS 5 中，这按预期工作，当我在我定义的点内触摸时，地图视图区域被锁定。在 iOS 6 中，这样做并不可靠。有时该区域会保持锁定状态，有时它似乎会挣脱。我可以退出视图并返回到它，我无法预测它会如何行动。我在 touchesMoved 中添加了一个 NSLog 来检查`_mapView`'s的状态，`scrollEnabled`它`NO`按预期返回。

任何人都可以帮忙吗？

# c++ - 类型转换时C ++中的（void *）变量和（void *＆）变量有什么区别

> ID：13200064
> 
> 赞同：2
> 
> 时间：2012-11-02T17:14:30.647
> 
> 标签：c++, void-pointers

在[How to print member function address in C++](https://stackoverflow.com/a/11112061/930125) it use (void *&) to type cast the variable 中，我尝试使用 (void *)，但它有问题。我要问的是类型转换时 C++ 中的 (void *)variable 和 (void *&) 变量有什么区别。链接中的代码片段：

```
void TestClass::PrintMyFuncAddress(void)
{
  void (TestClass::* ptrtofn)() = &TestClass::MyFunc;
  cout << (void*&)ptrtofn<< endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:40:01.607

`void*`强制转换尝试将 , 的值转换为指向`ptrtofun`空指针类型的值。C++ 没有提供从指针到成员函数到 的这种转换`void*`，这就是它有问题的原因（可能它无法编译）。

`void*&`强制转换创建一个引用，它的引用是从`sizeof(void*)`object 占用的第一个字节开始的内存的第一个字节`ptrtofn`。`ptrtofun`没有类型`void*`或兼容类型，甚至不需要与`void*`. 所以使用引用有未定义的行为（它违反了严格的别名），但编译器不需要发现问题。

可移植地打印指向成员函数的唯一方法是打印`sizeof(ptrtofun)`从`(unsigned char*)(&ptrtofun)`. 您可以自己决定如何表示这些字节（十六进制是显而易见的选择），但请注意，结果*不一定*是`TestClass::MyFunc`. 指向成员函数的指针根本不会那样工作，因为例如它们需要允许指向虚函数的指针，该指针将根据调用它的对象的动态类型调用不同的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:43:02.310

强制转换为 void *& 将为您提供对 void * 类型的引用，这意味着它可以用作左值。void * 将给出可用于表达式的 r 值。但这实际上与您的问题无关。

您不能将指向成员函数的指针转换为指向数据的指针或指向函数的指针；这些是根本不同的类型。通常 sizeof(ptr_to_member_function) != sizeof(void*) （或 sizeof(void (*)() 就此事而言）。

指向成员函数的指针不一定包含指向该函数代码开头的指针。它可能包含虚拟功能的 VTBL 偏移量。

虽然我不确定我是否非常有信心 C++ 标准不允许这些转换。

# ruby-on-rails - Rubygems - 包在哪里下载？

> ID：13200065
> 
> 赞同：5
> 
> 时间：2012-11-02T17:14:35.847
> 
> 标签：ruby-on-rails, ruby, rubygems

当您安装新软件包时，例如“gem install fb-graph”，下载的文件在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T17:21:27.987

使用此命令查找特定 gem 的安装位置：

```
gem which <gem_name> 
```

例如：

```
gem which fb-graph 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T17:20:33.690

```
$ gem environment 
```

这将吐出信息，告诉您正在安装的位置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-02T17:31:38.920

正如@Philip 建议的那样，用于`gem environment`查看默认位置。

如果您需要安装在自定义文件夹中，请设置`GEM_HOME`变量：

```
export GEM_HOME=~/gems
gem install fb-graph 
```

将安装`fb-graph`在您的主目录中的`gems/`文件夹中

要坚持这一点，请放入`export GEM_HOME=/path/to/gems`您的`.bash_profile`or`.bashrc`文件中

# javascript - Jquery Error Uncaught TypeError 对象没有方法'wijmenu'

> ID：13200066
> 
> 赞同：0
> 
> 时间：2012-11-02T17:14:37.197
> 
> 标签：javascript, jquery, html, css

我可以在 jquery 中调用这个函数，总是给我这个错误。未捕获的类型错误：对象 [object Object] 没有方法“wijmenu”

带有来源的页面在底部

这是我使用的 wijmo 版本：[https ://github.com/wijmo/Wijmo-Open](https://github.com/wijmo/Wijmo-Open)

* * *

这是我的html代码：

```
<div> 
<ul id='ipodmenu'>
    <li>
        <h3>
            Menu example</h3>
    </li>
    <li></li>
    <li><a href='#'>CSS Library</a> 
        <ul>
            <li><a href='www.google.pt'>Horizontal CSS Menus</a></li>
            <li><a href='http://www.sapo.pt'>Vertical CSS Menus</a></li>
            <li><a href='http://www.facebook.com'>Image CSS</a></li>
        </ul>
    </li>
    <li><a href='#'>CSS Drive</a> 
        <ul>
            <li><a href='#4'>Menu Gallery</a> 
                <ul>
                    <li><a href='#5'>Blue Color</a></li>
                    <li><a href='#6'>Green Color</a> 
                        <ul>
                            <li><a href='#5'>Blue Color</a></li>
                            <li><a href='#6'>Green Color</a> 
                                <ul>
                                    <li><a href='#5'>Blue Color</a></li>
                                    <li><a href='#6'>Green Color</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><a href='www.microsoft.pt'>Web Design News</a></li>
        </ul>
    </li>
    <li><a href='#'>JavaScript Kit</a> 
        <ul>
            <li><a href='#8'>JavaScript tutorials</a></li>
            <li><a href='#8'>JavaScript Reference</a></li>
            <li><a href='#10'>DOM Reference</a></li>
        </ul>
    </li>
</ul>
<br style='clear: left' /> 
```

* * *

这里脚本错误 ![脚本错误](../Images/26e28d229dee1ae9e209f8ed0ceab6cf.png)

* * *

这是脚本列表 ![在此处输入图像描述](../Images/fdc69baaa00b1a0750f41a0561f1790e.png)

* * *

脚本列表全部定义在头部

```
<link type="text/css" rel="stylesheet" href="wijmoMenu\jquery-wijmo.css" charset="UTF-8" />
<link type="text/css" rel="stylesheet" href="wijmoMenu\jquery.wijmo.wijsuperpanel.css" charset="UTF-8" />
<link type="text/css" rel="stylesheet" href="wijmoMenu\jquery.wijmo.wijmenu.css" charset="UTF-8" />
<script type="text/javascript" src="wijmoMenu\jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="wijmoMenu\jquery-ui-1.8.23.custom.min.js"></script>
<script type="text/javascript" src="wijmoMenu\jquery.mousewheel.min.js"></script>
<script type="text/javascript" src="wijmoMenu\jquery.bgiframe-2.1.3-pre.js"></script>
<script type="text/javascript" src="wijmoMenu\jquery.wijmo.wijutil.js"></script>
<script type="text/javascript" src="wijmoMenu\jquery.wijmo.wijsuperpanel.js"></script> 
```

* * *

IpodMenu 网页：[下载](http://www.2shared.com/file/Vkrzgiab/ipodMenu.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:42:41.013

基于您使用的是[http://github.com/wijmo/Wijmo-Open](http://github.com/wijmo/Wijmo-Open)的事实，那么您需要包含您希望使用的功能的所有文件。在这种情况下，您使用的是 wijmenu，因此您需要包含该源文件：`jquery.wijmo.wijmenu.js`

假设文件在您的服务器上，请将其添加到 html 中的脚本列表中：

`<script type="text/javascript" src="wijmoMenu\jquery.wijmo.wijmenu.js"></script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:19:31.227

根据 wijmo 文档，`id`需要将其设置为“menu”，并且您已将其设置为“ipodmenu”。

这是文档的链接： [http ://wijmo.com/wiki/index.php/Menu#Markup_and_Scripting](http://wijmo.com/wiki/index.php/Menu#Markup_and_Scripting)

还要确保您也包含所有 wijmo 脚本文件，您的问题中没有显示 HTML 的那部分。

# c# - 使用 LINQ 构建 Dictionary 以便轻松访问已安装程序的注册表项

> ID：13200070
> 
> 赞同：1
> 
> 时间：2012-11-02T17:15:06.133
> 
> 标签：c#, windows, linq, registry

Windows 注册表的`SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall`键由一组键组成，每个已安装的程序对应一个键。每个程序的键名都被命名为一个明显随机的字符串，这使得查找给定程序的注册表键变得简单易行（不是！）。注册表项的`DisplayName`值包含程序的名称。我想`Dictionary<string, RegistryKey>`使用 LINQ 构造一个字典 ()，对于每个注册表项，将`DisplayName`值映射到注册表项本身。关于如何做到这一点的任何建议？

与此同时，我将阅读[LINQ](http://msdn.microsoft.com/en-us/library/bb384065%28v=vs.100%29.aspx)，看看是否能找到解决方案——这是我第一次真正考虑使用 LINQ。我在这里发布我的问题，因为我认为这可能是一项中等常见的任务，因此其他人可能会受益。

提示：`Microsoft.Win32.Registry`是用于访问 Windows 注册表的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:41:33.300

一个不错的 LINQ 示例链接（没有双关语）

[http://www.deepakkapoor.net/get-a-list-of-installed-applications-using-linq-and-c/](http://www.deepakkapoor.net/get-a-list-of-installed-applications-using-linq-and-c/)

我会像这样修改你的情况：

```
string registryKey =
    @"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall";

using (Microsoft.Win32.RegistryKey key = 
    Registry.LocalMachine.OpenSubKey(registryKey))
{
    (from a in key.GetSubKeyNames()
    let r = key.OpenSubKey(a)
    select new
    {
        DisplayName = r.GetValue("DisplayName"),
        RegistryKey = r
    })
  .Where(c => c.DisplayName!= null)
  .ToDictionary(k=>k.DisplayName, v=>v.RegistryKey);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:20:27.193

你可以在这些行上写一些东西：

```
string registryKey = @"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall";
var dict = new Dictionary<string, RegistryKey>();

using(var key = Registry.LocalMachine.OpenSubKey(registryKey))
{
    foreach(string subkeyName in key.GetSubKeyNames())
    {
        using(var subkey = key.OpenSubKey(subkeyName))
        {
            dict.Add(subkey.GetValue("DisplayName"), subkey);
        }
    }
} 
```

或者如果你想使用 LINQ：

```
string registryKey = 
    @"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall";
var dict = new Dictionary<string, RegistryKey>();

  using (var key = Registry.LocalMachine.OpenSubKey(registryKey))
  {
    var query = from a in
    key.GetSubKeyNames()
    let r = key.OpenSubKey(a)
    select new
      {
        displayName = r.GetValue("DisplayName")
        subKey = r
      };

    foreach (var item in query)
    {
       dict.Add(item.displayName, item.subKey);
    }
  } 
```

# java - 这是使用 md5 哈希比较两个 java 对象值的可行方法吗？

> ID：13200078
> 
> 赞同：1
> 
> 时间：2012-11-02T17:15:45.513
> 
> 标签：java, json, compare, md5

例如，我有两个对象，一个类，Person。

```
Person A:
User_name:n1
Password:1234
Email:n1@email.com

Person B:
User_name:n1
Password:1234
Email:n1@email.com 
```

因为 Person A 和 Person B 的值相同，所以我想编写自己的 isValueEqual 函数。首先，我想比较它们的类，然后，我将它们的值逐一检查是否相等。我认为这种方式非常耗时。因此，我认为将其变成 JSON 字符串并使用 md5 对它们进行散列并仅比较散列是可靠的。那么，这是比较它们的价值的更好方法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T17:17:40.607

不会。您可能会遇到[哈希冲突](http://en.wikipedia.org/wiki/Collision_%28computer_science%29)，从而将两个不同的对象识别为相同的对象。

比较字段需要什么时间？如果您担心计算时间，请先测量它（如果您认为它太慢，我会感到非常惊讶，并且哈希计算会非常慢）。如果您担心实施时间，请查看[Apache Commons EqualsBuilder](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/builder/EqualsBuilder.html)或类似工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:30:36.207

为了更详细地解释 Jim Garrison 在此评论中解释的内容，只需考虑通过比较字段来实现 equals 所需的工作，以及通过生成哈希和比较哈希来实现它所需的工作。让我们以您的示例为例，A 和 B 仅在电子邮件的最后一个字母上有所不同（这是最坏的情况）。

第一种方法：

*   遍历所有名称字符并比较它们
*   遍历所有密码字符并比较它们
*   遍历所有电子邮件字符并进行比较。

第二种方法：

*   创建两个新的 StringBuilders
*   遍历所有名称字符以填充 JSON 字符串中的名称，并将它们附加到 StringBuilder，用引号括起来，特殊字符转义等。
*   遍历所有密码字符以将密码填充到 JSON 字符串中，并将它们附加到 StringBuilder 中，用引号括起来，特殊字符转义等。
*   遍历所有电子邮件字符以将电子邮件填充到 JSON 字符串中，并将它们附加到 StringBuilder，用引号括起来，特殊字符转义等。
*   将 StringBuilders 转换为 Strings
*   将字符串转换为字节数组
*   对两个字节数组应用复杂的加密函数
*   遍历每个字节数组并比较字节。

请注意，如果人员的第一个字符或姓名的长度不同，第一种方法会立即停止，而第二种方法必须执行每一步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:19:30.460

哈希函数会给您带来误报，因此您最终可能会遇到错误匹配。

尽管如果您的对象不会耗尽 MD5 并且错误匹配不会打扰您，那么您当然可以选择 MD5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T17:30:09.553

这样的事情比将对象转换为 JSON 然后计算它的 MD5 要快得多

```
public boolean equals( Object o ) {
    Person p = null;
    return    o instanceof Person
           && this.name.equals((p = (Person) o).name) 
           && this.password.equals(p.password)
           && this.email.equals(p.email);
} 
```

但是，不要相信我，测量。

# c++ - 如何附加到文本文件？

> ID：13200079
> 
> 赞同：2
> 
> 时间：2012-11-02T17:15:46.907
> 
> 标签：c++, c, file, handles

我有一个用 C++ 编写的程序，它接受来自用户的文本并使用文件句柄将其保存到文本文件中。以下是该程序的片段：

该程序运行良好。唯一的问题是它不会将文本附加到文本文件中。相反，它会“删除”所有现有文本并仅保存新文本。

也就是说，在程序的先前会话中保存的文本被丢弃，而新的文本被保存。请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T17:18:32.293

打开文件时包含`O_APPEND`标志。请参阅参考页[`_open()`](http://msdn.microsoft.com/en-us/library/z0kc8e3z%28v=vs.80%29.aspx)。

由于这是 C++，请考虑使用 an[`ofstream`](http://en.cppreference.com/w/cpp/io/basic_ofstream)代替。这些是类型安全的，并且不需要指定写入文件的参数长度：

```
std::ofstream out(full_path, std::ios_base::app);
if (out.is_open())
{
    out << "----Session----\n\n"
        << "Date/Time: " << datetime << "\n\n"
        << "Text: " << text << "\n\n\n\n";
} 
```

# vb.net - SSIS - 获取脚本任务中两个日期之间的分钟差

> ID：13200081
> 
> 赞同：0
> 
> 时间：2012-11-02T17:16:10.463
> 
> 标签：vb.net, ssis

我已经使用 vb.net 编写了脚本组件并使用以下内容：

```
 Dts.VariableDispenser.LockForWrite("User::StepStartTime")
        Dts.VariableDispenser.LockForWrite("User::StepEndTime") 
```

在 Start vars("User::StepStartTime").Value = Date.Now

在 End vars("User::StepEndTime").Value = Date.Now

我正在努力寻找一个可以在上述两个日期之间以分钟为单位的函数。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:14:19.703

只需减去它们...

```
DateTime tStart = Dts.VariableDispenser.LockForRead("User::StepStartTime");
DateTime tEnd = Dts.VariableDispenser.LockForRead("User::StepEndTime");

// Capture differnce between two datetime values
TimeSpan tSpan = tEnd.Subtract ( tStart );

// Capture tSpan in minutes
Dts.VariableDispenser.LockForWrite("User::DiffInMinutes") = tSpan.TotalMinutes; 
```

参考

[http://msdn.microsoft.com/en-us/library/1905yhe2.aspx](http://msdn.microsoft.com/en-us/library/1905yhe2.aspx)

[http://msdn.microsoft.com/en-us/library/system.timespan.aspx](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

# c# - 奇数接口语法

> ID：13200086
> 
> 赞同：1
> 
> 时间：2012-11-02T17:16:32.180
> 
> 标签：c#, syntax

所有，我遇到了以下属性和对象声明。第一个返回一个接口，第二个我不太确定

```
public IConfig this[int index]
{
    get { return (IConfig)configList[index]; }
}

object IList.this[int index]
{
    get { return configList[index]; }
    set {  }
} 
```

我从未见过这种类型的声明，即`public IConfig this[int index]`带方括号和奇怪使用`this`and `object IList.this[int index]`。有人可以解释这两种符号吗？

我试图查看我拥有的书籍，并使用谷歌，但我不确定我在寻找什么。谢谢你的时间。

编辑。这些在一个继承如下的类中

```
public class ConfigCollection : ICollection, IEnumerable, IList
{
    ....
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T17:18:22.023

它被称为 an[`indexer`](http://msdn.microsoft.com/en-us/library/2549tw02.aspx)并且允许您在`instance[1];`从对象中获取元素时执行此操作。你可以看看这个答案[`implementing IList`](https://stackoverflow.com/a/1176502/1069200)作为参考

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T17:25:20.990

我还想在 Johan 的帖子中添加更多细节 - 由于有多个接口，您实际上在该类中有 2 个索引器。

实现的索引器是`IList`显式声明的，因此默认情况下不会调用这个索引器。如果你想使用`IList`索引器的版本，你需要这样做：

```
ConfigCollection thisCollection = GetCollectionItems();

// this invokes the IList.this indexer....
var firstItem = ((IList)thisCollection)[0];  

// this invokes the other indexer
var firstItemAsIConfig = thisCollection[0]; 
```

`IList.this`根据您与我们共享的代码，我认为索引器是多余的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T17:41:07.153

说你有

```
public class MyAggregate
{
  private List<String> _things;
  public MyAggregate()
  {
    _things = new List<String>();
  }
} 
```

所以你可以添加

```
public String GetItem(int argIndex)
{
  return _things[argIndex];
} 
```

和

```
public void SetItem(int argIndex, String argValue)
{
  _things[argIndex] = argValue;
} 
```

然后通过访问`myAggregate.GetItem(0)`来获取它并`myAggregate.SetItem(0,"Thing")`设置它。

或者你可以添加

```
public string this[int argIndex] 
{
  get {return _things[argIndex];}
  set { _things[argIndex] = value;}
} 
```

并通过访问它`myAggregate[0]`来获取和`myAggregate[0] = "Thing"`设置它。

后者往往感觉更自然，您不必每次都想出两个方法名称。

# c# - 在 Visual Studio 扩展中打开标准对话框

> ID：13200090
> 
> 赞同：3
> 
> 时间：2012-11-02T17:16:43.193
> 
> 标签：c#, visual-studio-2012, visual-studio-extensions, vsix

我正在编写一个 Visual Studio 扩展，并希望在单击时打开**连接到 Team Foundation Server**标准对话框。

我可以使用[`DTE2.ExecuteCommand`](http://msdn.microsoft.com/en-us/library/envdte80.dte2.executecommand.aspx)类似的`DTE2.ExecuteCommand("Team.ConnecttoTeamFoundationServer")`方法来做到这一点，但我觉得必须有更好的方法来做到这一点，然后使用 Visual Studio 宏。

非常感谢任何帮助。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-24T16:30:27.630

您可以使用[Team Project Picker](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.client.teamprojectpicker.aspx)类的`Microsoft.TeamFoundation.Client`程序集。该[博客](http://geekswithblogs.net/TarunArora/archive/2011/06/18/tfs-2010-sdk-connecting-to-tfs-2010-programmaticallyndashpart-1.aspx)提供了有关如何使用它的完整详细信息。我在下面粘贴上面博客文章中的示例代码，它将帮助您显示对话框。

```
private static TfsTeamProjectCollection _tfs;
private static ProjectInfo _selectedTeamProject;

// Connect to TFS Using Team Project Picker
public static void ConnectToTfsUsingTeamProjectPicker()
{
     // The  user is allowed to select only one project
     var tfsPp = new TeamProjectPicker(TeamProjectPickerMode.SingleProject, false);

     tfsPp.ShowDialog();

     // The TFS project collection
     _tfs = tfsPp.SelectedTeamProjectCollection;

     if (tfsPp.SelectedProjects.Any())
     {
          //  The selected Team Project
          _selectedTeamProject = tfsPp.SelectedProjects[0];
     }
 } 
```

# php - 正则表达式匹配带有换行符的 url/链接

> ID：13200092
> 
> 赞同：0
> 
> 时间：2012-11-02T17:16:42.950
> 
> 标签：php, regex

什么正则表达式将与下面的链接相匹配，其中包含换行符和“=”。我目前正在使用这个正则表达式，但它并不完全匹配：

```
((https?://)?([-\w]+\.[-\w\.]+)+\w(:\d+)?(/([-\w/_\.\,]*(\?\S+)?)?)*) 
```

这是示例链接：

```
http://www.linkedin.com/e/-eiijvz-h8zq2onn-2/VHWTzmPYQo40LPs2VhS6b_Nyx0MiE=
3in240VQyyWqfjjL007hj1UF1JEF-nYdDR/blk/I319184359351_65/0UcDpKqiRzolZKqiRybmR=
SrCBvrmRLoORIrmkZt5YCpnlOt3RApnhMpmdzgmasdhxrSNBszYRdBYNdjcVe34Vcjd9bSRjjS5dh=
CAQbPoUdzATdjsScPALrCBxbOYWrSlI/eml-comm_invm-b-in_ac-inv28/?hs=3Dfalse&to=
k=3D2PRdy1KvKbNls1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:47:30.197

我遇到了同样的问题 - 垃圾邮件发送者试图通过使用 '=\n' 多次分解他们的 URL 来混淆他们的 URL。

试试这个正则表达式 - 它似乎工作得很好。它匹配被破坏两次或多次的 URL。一个有效的 URL 不太可能以这种方式被多次分解。

```
['"]https?:\/\/(?:\S*=\s){2,}(?:\S*)['"] 
```

如果他们在 http 中设置了中断，那就是这个（有点骇人听闻）

```
['"]h(?:=\s)?t(?:=\s)?t(?:=\s)?p(?:=\s)?s?:(?:=\s)?\/(?:=\s)?\/(?:\S*=\s){2,}(?:\S*)['"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:52:40.173

试试这个

```
((https?://)?([-\w]+\.[-\w\.]+)+\w(:\d+)?(/([-\w/_\.\,\=]*(\?\S+)?)?)*) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T13:35:32.753

1.  搜索`https?://(\S+|(?<==)\n)*`

2.  如果找到匹配项，则`=\n`用空字符串替换每个出现的

# asp.net - Ninject Wcf 构造函数注入不起作用

> ID：13200105
> 
> 赞同：1
> 
> 时间：2012-11-02T17:17:11.520
> 
> 标签：asp.net, wcf, ninject

我试图让构造函数注入在 WCF 应用程序中工作，但它正在调用我的无参数构造函数，而不是具有 [inject] 作为参数的构造函数。我通过 Nuget 安装了 Ninject WCF，它为我安装了依赖项。

这是我的包裹：

```
<packages>
    <package id="Microsoft.Web.Infrastructure" version="1.0.0.0" targetFramework="net40" />
    <package id="Ninject" version="3.0.1.10" targetFramework="net40" />
    <package id="Ninject.Extensions.Wcf" version="3.0.0.5" targetFramework="net40" />
    <package id="Ninject.Web.Common" version="3.0.0.7" targetFramework="net40" />
    <package id="WebActivator" version="1.5.1" targetFramework="net40" />
</packages> 
```

它为我创建了一个 NinjectWebCommon.cs 类并将其放在 App_Start 中。以下是该文件中的内核绑定。注意：我正在使用实体框架 pocos，并且需要上下文才能实例化 repo。

```
private static void RegisterServices(IKernel kernel)
{
    var camContext = new STCAMx0Entities();
    var iseaContext = new iseaEntities();

    kernel.Bind<IRepository<EnrgyProfl>>().To<EnrgyProflRepository>().InRequestScope().WithConstructorArgument("context", camContext);
    kernel.Bind<IRepository<GenUnitCost>>().To<GenUnitCostRepository>().InRequestScope().WithConstructorArgument("context", camContext);
    kernel.Bind<IRepository<LglGenUnit>>().To<LglGenUnitRepository>().InRequestScope().WithConstructorArgument("context", camContext);

    kernel.Bind<IRepository<dly_sch>>().To<DlySchRepository>().InRequestScope().WithConstructorArgument("context", iseaContext);
    kernel.Bind<IRepository<DealModel>>().To<WtDealRepository>().InRequestScope().WithConstructorArgument("context", iseaContext);
    kernel.Bind<IRepository<EnrgyProfl>>().To<WtEnergyProfileRepository>().InRequestScope().WithConstructorArgument("context", iseaContext);
} 
```

在我的服务中，我有这个作为我的构造函数：

```
[Inject]
public CamService(IRepository<dly_sch> dlySchRepo, IRepository<dly_unit> dlyUnitRepo, IRepository<LglGenUnit> lglGenRepo, IRepository<EnrgyProfl> enrgyProflRepo, IRepository<DealModel> wtDealRepo)
{
    _dlySchRepo = dlySchRepo;
    _dlyUnitRepo = dlyUnitRepo;
    _lglGenRepo = lglGenRepo;
    _enrgyProflRepo = enrgyProflRepo;
    _wtDealRepo = wtDealRepo;
} 
```

这是我的一个存储库的示例：

```
public class DlySchRepository : IRepository<dly_sch>
{
    private static readonly CommonLogger Log = LogFactory.Singleton.Create(typeof (DlySchRepository));
    private iseaEntities _context = new iseaEntities();
    public DlySchRepository(iseaEntities context) { _context = context; }
    public DlySchRepository() { }
... 
```

请帮忙！！！！

谢谢你。

# javascript - 跨域上传文件头认证

> ID：13200108
> 
> 赞同：2
> 
> 时间：2012-11-02T17:17:28.597
> 
> 标签：javascript, html, file-upload, cross-domain

我需要从浏览器中的客户端将文件上传到第三方，并且需要在标头中发送 api 令牌。我需要一个适用于新旧浏览器的通用解决方案。

这就是卷曲的样子

```
curl -v -H "X-LLNW-Authorization: $TOKEN" \
-F uploadFile=@/tmp/wobble.txt \
-F directory=/testpost \
-F basename=wobble-004.txt https://api.lama.lldns.net/post/file 
```

基本名称并不重要。

我相信我仅限于 javascript 可以让我在这里做的事情。我无权访问服务器。

这可以做到吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:46:52.900

编辑：如果您有自定义标头，跨域请求将不起作用。如果您有自定义标头，则会自动发送一个 OPTIONS 请求，服务器必须回复 200 OK，然后发送实际的 POST。由于您必须使用自定义标头进行身份验证，因此您必须更改服务器端以接受 OPTIONS 请求。我怀疑你运气不好。

下面是没有自定义标头的情况下的代码，其中跨域请求工作：使用与此类似的 HTML：

```
<form >
  <input type="file" name="file" id="fileToUpload" onchange="uploadFile()">
</form> 
```

使用此代码

```
function uploadFile() {
  var fd = new FormData();
  fd.append("fileToUpload", document.getElementById('fileToUpload').files[0]);
  fd.append("directory","/testpost");
  fd.append("basename","wobble-004.txt");

  var oReq = new XMLHttpRequest();
  oReq.open("POST", "https://api.lama.lldns.net/post/file", true);
  oReq.onreadystatechange = alert(status);
  oReq.send(fd);
} 
```

有关更多信息，请参阅[此 Mozilla 博客文章](https://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-25T23:34:31.490

对于带有 CORS 的 CSS，您需要从选项预检请求中返回一个标头，该标头枚举要发送的已接受标头列表，可以是任何标头，但浏览器只会发送包含在该列表中的自定义标头。浏览器将仅遵循返回的标头中指示的 OPTIONS。检查 CORS OPTIONS 响应标准。

# javascript - Coffeescript 在本地使用时添加了一个我不想要的 return 语句；可能是一个崇高的文本 2 问题

> ID：13200111
> 
> 赞同：1
> 
> 时间：2012-11-02T17:17:30.583
> 
> 标签：javascript, coffeescript, sublimetext2

[当我在http://coffeescript.org](http://coffeescript.org)页面上使用“Try coffeescript”时，以下咖啡脚本编译为精细的 javascript 。但是，在我的电脑上，我得到`return`了我不想要的地方。`return`前面应该没有`drawAC`。任何想法我可以如何解决它。看起来缩进应该是正确的，因为当我复制时，将它准确地粘贴到咖啡脚本网站上，我没有任何问题。

**Coffeescript 片段**

```
plotAC = (fc,c,d) ->
    acData = (ac(fc, c, d, q) for q in quantities)
    qACpairs = d3.zip(quantities, acData)
    qACpairs = (item for item in qACpairs when item[1] < 12)
    drawAC = canvas.append('svg:path')
                   .attr({
                        d: createsvgpath(firmXscale)(qACpairs),
                        stroke: 'steelblue'                     
                    })
    return 
```

**在我的计算机上使用 CoffeeScript 1.4.0 版编译的 JS**

```
 plotAC = function(fc, c, d, q) {
    var acData, drawAC, item, qACpairs;
    acData = (function() {
      var _i, _len, _results;
      _results = [];
      for (_i = 0, _len = quantities.length; _i < _len; _i++) {
        q = quantities[_i];
        _results.push(ac(params.fc, params.c, params.d, q));
      }
      return _results;
    })();
    qACpairs = d3.zip(quantities, acData);
    qACpairs = (function() {
      var _i, _len, _results;
      _results = [];
      for (_i = 0, _len = qACpairs.length; _i < _len; _i++) {
        item = qACpairs[_i];
        if (item[1] < 12) {
          _results.push(item);
        }
      }
      return _results;
    })();
    return drawAC = canvas.append('svg:path').attr({
      d: createsvgpath(firmXscale)(qACpairs),
      stroke: 'steelblue'
    });
  };

  return; 
```

我应该补充一点，以下是有效的。但是，这对我来说似乎不是正确的缩进。

**有效的代码**

```
plotAC = (fc,c,d) ->
    acData = (ac(fc, c, d, q) for q in quantities)
    console.log(acData)
    qACpairs = d3.zip(quantities, acData)
    console.log(qACpairs);
    qACpairs = (item for item in qACpairs when item[1] < 12)
    console.log(qACpairs);

    drawAC = canvas.append('svg:path')
                   .attr({
                        d: createsvgpath(firmXscale)(qACpairs),
                        stroke: 'steelblue'                     
                    })

                    return 
```

**完整代码**

```
dim = 
    width: 1200,
    height: 600,
    padding: 60,
    paddingL: 35,
    paddingR: 25      

canvas = d3.select('#longRunEqm')
           .append("svg:svg")
           .attr
                'width': dim.width,
                'height': dim.height

# Rectangle to show boundaries
canvas.append('svg:rect')
     .attr({
         x: 0,
         y: 0,
         height: dim.height,
         width: dim.width
     }).style({
         fill: 'none',
         stroke: 'gray',
         'stroke-width': '2px'
     })

###
========================================================================
Market Demand and Supply functions
========================================================================
###
params = 
        a: 9,
        b: 0.1,
        c: 2,
        d:0.1,
        fc: 20,
        numFirmsOrig: 100,
        numFirms: 100

quantities = d3.range(0,95)

supplyPrices = d3.range(2,11)

inverseDemand = (a,b,q) -> a - (b*q)

demand = (a,b,p) -> (a-p)/b

inverseSupply = (c,d,q) -> c + (d*q)

tc = (fc,c,d,q) -> c*q + (d*q*q)/2 + fc

ac = (fc,c,d,q) -> tc/q

supply = (c,d,p) -> (p-c)/d

marketSupply = (c, d, p) -> (params.numFirms * supply(c,d,p))/100

eqmQuantity = (a,b,c,d) -> (a-c)/(b+d)

eqmPrice = (a,b,c,d) -> ((a*d) + (b*c))/(b+d)

###
========================================================================
Scales
========================================================================
###

marketXscale = d3.scale.linear().domain([0,105])
                       .range([0+dim.paddingL, (dim.width/2)-dim.paddingR])

firmXscale = d3.scale.linear().domain([0,105])
                     .range([(dim.width/2)+dim.paddingL, \
                              dim.width-dim.paddingR])

yscale = d3.scale.linear().domain([0,12])
                          .range([dim.height-dim.padding, 0+dim.padding])

createsvgpath = (panel) ->
    d3.svg.line()
        .x (d) ->
            panel(d[0])
        .y (d) ->
            yscale(d[1])
        .interpolate('linear')

###
========================================================================
 Axes
========================================================================
###

# X-AXIS MARKET GROUP
xaxisMarket = d3.svg.axis()
              .scale(marketXscale)
              .orient('bottom')
              .ticks(10)
              .tickSubdivide(1)

xaxisMarketgroup = canvas.append('g')
                .attr
                    class: 'axis xaxis',
                    transform: "translate(0,#{dim.height-dim.padding})"
                .call(xaxisMarket)

xaxisMarketgroup.selectAll('text')
          .attr
              transform: "translate(10,0) rotate(45)"
              'text-anchor': 'start'

# xaxisMarket label
xMarketlabel = canvas.append('svg:text')
               .attr
                    x: marketXscale(80),
                    y: yscale(0),
                    dy: 50,
                    'text-anchor': 'middle',
                    class: 'textlabel'
               .text('Market Quantity')
               .style
                    'font-size': '60%'  

# xaxisFirm label
xFirmlabel = canvas.append('svg:text')
                   .attr
                        x: firmXscale(80),
                        y: yscale(0),
                        dy: 50,
                        'text-anchor': 'middle',
                        class: 'textlabel'
                   .text('Firm Quantity')
                   .style
                        'font-size': '60%'                                  

# X-AXIS FIRM GROUP
xaxisFirm = d3.svg.axis()
              .scale(firmXscale)
              .orient('bottom')
              .ticks(10)
              .tickSubdivide(1)

xaxisFirmgroup = canvas.append('g')
                       .attr
                           class: 'axis xaxis',
                           transform: "translate(0,#{dim.height-dim.padding})"
                       .call(xaxisFirm)

xaxisFirmgroup.selectAll('text')
              .attr
                  transform: "translate(10,0) rotate(45)"
                  'text-anchor': 'start'

yaxis = d3.svg.axis()
              .scale(yscale)
              .orient('left')
              .ticks(10)
              .tickSubdivide(1)

# Y-AXIS MARKET GROUP
yaxisMarketgroup = canvas.append('svg:g')
                .attr
                    class: 'axis',
                    transform: "translate(#{dim.paddingL},0)"
                .call(yaxis)

# Y-AXIS FIRM GROUP
yaxisFirmgroup = canvas.append('svg:g')
                       .attr
                           class: 'axis',
                           transform: "translate(#{dim.width/2 + dim.paddingL},0)"
                       .call(yaxis)

# yaxis label
ylabelMarketgroup = canvas.append('svg:text')
                          .attr
                               x: 0,
                               y: 0,
                               'text-anchor': 'middle',
                               transform: 'translate(40,40)',
                               class: 'textlabel'
                          .text('Price')

ylabelFirmgroup = canvas.append('svg:text')
                        .attr
                             x: 0,
                             y: 0,
                             'text-anchor': 'middle',
                             transform: "translate(#{dim.width/2 + dim.paddingL},40)",
                             class: 'textlabel'
                        .text('Price')

###
========================================================================
 Plot supply curve
========================================================================     
###

plotSupply = (c,d,panel,label) ->
    if panel == firmXscale
        supplyFunction = supply
    else
        supplyFunction = marketSupply

    quantitySupplied = (supplyFunction(params.c, params.d, p) for p in \
                            supplyPrices)

    quantityPricePairsSupply = d3.zip(quantitySupplied, supplyPrices)

    # Keep data points where quantity is positive and price is positive
    quantityPricePairsSupply = (item for item in \
        quantityPricePairsSupply when (0 <= item[0] <= 100) and item[1] >=0)

    numQuantityPricePairs = quantityPricePairsSupply.length

    drawSupplyFunction = canvas.append('svg:path')
                           .attr
                                d: createsvgpath(panel)(quantityPricePairsSupply)
                                stroke: '#7E8F7C'    

    labelSupplyFunction = canvas.append('svg:text')
                                .attr({
                                    x: panel(quantityPricePairsSupply[numQuantityPricePairs-1][0]),
                                    y: yscale(quantityPricePairsSupply[numQuantityPricePairs-1][1]),
                                    dx: -5,
                                    dy: -5,
                                    class: 'textlabel',
                                    'text-anchor': 'start'})
                                .style({
                                    stroke: '#7E8F7C' 
                                    })                                     
                                .text(label)

    return 

plotSupply(params.c, params.d, marketXscale, 'S')
plotSupply(params.c, params.d, firmXscale, 'MC')
params.numFirms = 150
plotSupply(params.c, params.d, marketXscale, 'S1')

###
========================================================================
 Plot AC curve
========================================================================
###
plotAC = (fc,c,d) ->
    acData = (ac(fc, c, d, q) for q in quantities)
    qACpairs = d3.zip(quantities, acData)
    qACpairs = (item for item in qACpairs when item[1] < 12)
    drawAC = canvas.append('svg:path')
                   .attr({
                        d: createsvgpath(firmXscale)(qACpairs),
                        stroke: 'steelblue'                     
                    })
    return

plotAC(params.fc, params.c, params.d) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:28:36.087

忽略我之前的回答。这是一个合法的语言错误。有时在 CoffeeScript 中插入非语义缩进时会遇到类似的奇怪情况——在这种情况下，是`.attr`子句之前的缩进。

最好的解决方案是删除非语义缩进，如下所示：

```
plotAC = (fc,c,d) ->
    acData = (ac(fc, c, d, q) for q in quantities)
    qACpairs = d3.zip(quantities, acData)
    qACpairs = (item for item in qACpairs when item[1] < 12)
    drawAC = canvas.append('svg:path')
    .attr({
        d: createsvgpath(firmXscale)(qACpairs),
        stroke: 'steelblue'
    })
    return 
```

这可能看起来有点奇怪，但这是一种完全合理的风格。

请随时在[https://github.com/jashkenas/coffee-script/issues](https://github.com/jashkenas/coffee-script/issues)报告此问题。[在 Michael Fcarra 的CoffeeScript Redux](https://github.com/michaelficarra/CoffeeScriptRedux)编译器下，这很可能不再是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:05:02.857

正如其他人所建议的那样，这几乎肯定是由混合制表符和空格引起的。打开您的 ST2 用户首选项并添加该行

```
"translate_tabs_to_spaces": true, 
```

它将为您节省很多很多对空格敏感的语言的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:22:10.573

~~如果您只想解决问题，请执行`return this`.~~

我的猜测是您使用的编译器期望返回一个值，而忽略了最终的 return 语句。[http://js2coffee.org](http://js2coffee.org)显示相同的行为，忽略最终返回。（实际上，它编译时没有最后的 return 语句，这更离奇。）

~~编辑：实际上，在这种情况下编译没有返回是最有意义的。无论哪种方式，这都表明您的编译器存在问题。~~

我的回答是错误的，但我不想失去下面的讨论。这很可能是空白问题。

# css - Base64 代码作为背景图像可破解？

> ID：13200114
> 
> 赞同：-2
> 
> 时间：2012-11-02T17:17:37.253
> 
> 标签：css, image, base64

我通过 CSS 文件使用 base64 代码作为背景图像。有可能以这种方式被黑客入侵吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T17:30:14.327

**不**，它不能因此被黑客入侵，您的主机对它是什么感到困惑，您只需要告诉他们它与使用`url(/path/to/image.jpg);`.

# jquery - 通过 jQuery 将所有较长的单词从段落转换为链接

> ID：13200118
> 
> 赞同：-3
> 
> 时间：2012-11-02T17:18:13.927
> 
> 标签：jquery, text, hyperlink

我对一些实验性的想法有疑问。可能只有 jQuery 大师可以在这里帮助我 :)

我有一段：

```
<p>Lorem Ipsum is simply dummy text of the printing 
and typesetting industry. Lorem Ipsum has been the 
industry's standard dummy text ever since the 1500s,
when an unknown printer took a galley of type and
scrambled it to make a type specimen book.</p> 
```

我需要**在 jQuery 的帮助下将所有具有至少 4 个字符“on-the-fly” onMouseOver 的单词转换为从每个单词创建的链接**。

我不想在 HTML 中生成它（因为带宽，它会增长到兆），该代码将如下所示：

```
<p>
<a href="/search?q=Lorem">Lorem</a> 
<a href="/search?q=Ipsum">Ipsum</a> 
is 
<a href="/search?q=simply">simply</a>
.........
</p> 
```

我也会感谢任何文本装饰 onMouseOver。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:28:28.713

尝试这样的事情：

```
$("p").on("hover", function(){
    var content = ​$("p").text();​​​​​
    var words = content.split(" ");
    var length = words.length;
    var newContent = [];

    for(var i = 0; i < length; i++){
        if(words[i].length >= 4){
          newContent.push("<a href='/search?q=simply'>" + words[i] +"</a>")
         }else{
           newContent.push(words[i])
         }
    }     
    $(this).text("");
    $(this).html(newContent.join(" "));              
}); 
```

但是，这不会`a`在您悬停后删除标签，并将针对每个悬停事件运行。这两个问题都有可能修复，但我会把这些留给你去解决。

**[例子](http://jsfiddle.net/N9WQt/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:28:31.237

将此添加到您的 document.ready 或 document.load 调用中：

```
$('p').on('hover', 'a', function(){ /* do whatever needs to be done on your link */});
var new_text = [];
$.each($('p').text().split(" "), function(index, word) {
    if (word.length >= 4) {
        word = word.replace(/(\w*)/, '<a href="YOUR URL HERE">\1</a>');
    }
    new_text.push(word);
});
var new_text_as_str = new_text.join(" ");
$('p').html(new_text_as_str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:29:50.513

不确定这有多有效，但是：

```
​$('p').hover(function(){
    var txt = $(this).text();
    txt = txt.replace(/\b([a-z]{4,})\b/ig, '<a class="word" href="/search?q=$1">$1</a>');
    $(this).html(txt);
}, function(){
    $('a.word', this).each(function(){
        $(this).replaceWith($(this).text());
    });
});​ 
```

它在 上添加链接并在 上`mouseenter`删除它们`mouseleave`。

演示：http: [//jsfiddle.net/8Yqfb/](http://jsfiddle.net/8Yqfb/)

# python - 如何将列表中的每个项目与Python中另一个列表的所有值一起使用

> ID：13200124
> 
> 赞同：0
> 
> 时间：2012-11-02T17:18:32.970
> 
> 标签：python

> **可能重复：**
> [列表列表的所有组合](https://stackoverflow.com/questions/798854/all-combinations-of-a-list-of-lists)

我一直在尝试使用 python 将两个字符串列表添加在一起，但我无法让它与我尝试过的 for 循环的不同安排一起工作。我有两个列表，我想从另外两个列表中创建第三个列表，以便列表 1 中的 index[0] 依次添加列表 2 中的所有索引（每个都是新列表中的单独条目list)，然后对于 list1 中的 index[1] 也是如此，依此类推..

```
snippets1 = ["aka", "btb", "wktl"]
snippets2 = ["tltd", "rth", "pef"]

resultlist = ["akatltd", "akarth", "akapef", "btbtltd", "btbrth", "btbpef", "wktltltd", "wktlrth", "wktlpef"] 
```

我知道答案很简单，但无论我做什么，我都会得到一些根本不起作用的东西，或者它将片段1 [0]添加到片段2 [0]，将片段1 [1]添加到片段2 [1]等等。请帮忙！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T17:22:30.393

```
import itertools

snippets1 = ["aka", "btb", "wktl"]
snippets2 = ["tltd", "rth", "pef"]

resultlist = [''.join(pair) for pair in itertools.product(snippets1, snippets2)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T17:26:07.330

你可以这样尝试

```
resultlist=[]
for i in snipppets1:
 for j in snippets2:
  resultlist.append(i+j)
print resultlist 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T17:42:05.220

为了完整起见，我想我应该指出一个不使用的衬垫`itertools`（但`product`应该首选 itertools 方法）：

```
[i+j for i in snippets1 for j in snippets2]
# ['akatltd', 'akarth', 'akapef', 'btbtltd', 'btbrth', 'btbpef', 'wktltltd', 'wktlrth', 'wktlpef'] 
```

# javascript - 加速递归函数

> ID：13200128
> 
> 赞同：0
> 
> 时间：2012-11-02T17:19:08.500
> 
> 标签：javascript, jquery

下面的函数将改变`<meta ... content="...densityDPI=250dpi" />` 密度 DPI 将在每次循环时减少 20dpi。

有没有办法可以加快速度，所以它通过比较先前值的比率在大约 4 个循环中完成......？`x++`我认为在可以将 5 更改为更大一点的东西之前应该有一些东西，这样会`$(window).width()==480`更快。

```
$(document).ready(function (){
        $('meta[name="viewport"]').remove();
        $('<meta name="viewport" id="the_vp_special" content="width=320,target-densityDPI=250dpi"/>').appendTo('head');
        setTimeout(function (){
            var x = 0;
            var changeDPI = function (curr){
                x++;
                var sub = 5;
                if(x>500)  return false;
                var curr = curr?parseInt(curr):320;
                curr = curr-sub;
                var txt = $('<meta/>',{name:"viewport",id:"the_vp_special",content:"width=320,initial-scale=1,target-densityDPI="+(parseInt(curr))+"dpi"}); 
                $('#the_vp_special').replaceWith(txt)
                if($(window).width()==480) {}
                else setTimeout(function (){ changeDPI(curr); },5);
            }
            changeDPI(250);
        }, 2500);
    }); 
```

请询问，如果不清楚，我会尽力解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:27:43.133

好的，让我直截了当地说：您想要的是将客户端的 dpi 设置为一个值`x`，以便客户端的视口跨越的宽度正好是`480px`.

现在，您有两个选项，具体取决于您设置的 dpi 和显示的像素之间的关系。

1.  如果是线性关系（这对我来说最有意义）：

    ```
    $(function)( {
        var dpi = 250,
            width;

        $('meta[name="viewport"]').remove();
        $('<meta name="viewport" id="the_vp_special" content="width=320,target-densityDPI=250dpi"/>').appendTo('head');

        setTimeout(function() {
            width = $(window).width();
            dpi   = Math.round((480 * dpi) / width);

            $('#the_vp_special').replaceWith(
                $('<meta/>', {
                    name: "viewport",
                    id: "the_vp_special",
                    content: "width=320 ... target-densityDPI="+dpi+"dpi"
                })
            );
        }, 2500);            
    }); 
    ```

2.  在任何其他关系的情况下，您可能希望使用具有 O(log n) 的最差/平均情况性能的[二进制搜索。](http://en.wikipedia.org/wiki/Binary_search)鉴于您的 250 dpi 并缩小到 - 比如说 - 72 dpi，这将产生平均 7 次尝试来找到正确的分辨率。
    （明天我会用一个例子更新我的帖子……等等）。

# jquery - 哪个 jquery-rails gem 版本适用于 Rails 3.0？

> ID：13200129
> 
> 赞同：1
> 
> 时间：2012-11-02T17:19:17.457
> 
> 标签：jquery, ruby-on-rails-3, ujs

根据文档，[jquery-ujs 安装](https://github.com/rails/jquery-ujs#installation)就像添加一样简单

```
gem 'jquery-rails', '~> 2.1' 
```

到 Gemfile，并运行：

```
$ bundle install 
```

* * *

我的应用程序正在运行**Rails 3.0.15**，并且`jquery-rails`似乎与它兼容：

> 对于 Rails 3.0，运行 [...]

但是在捆绑`jquery-rails`2.1 时，我似乎需要 Rails 3.1+：

```
Bundler could not find compatible versions for gem "railties":
  In Gemfile:
    jquery-rails (~> 2.1) x86-mingw32 depends on
      railties (< 5.0, >= 3.1.0) x86-mingw32

    rails (= 3.0.15) ruby depends on
      railties (3.0.15) 
```

什么`jquery-rails`gem 版本与 Rails 3.0 兼容？

*（也在[这里](https://github.com/rails/jquery-ujs/issues/286)问）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:46:15.683

尝试早期版本的 gem 时

```
`gem 'jquery-rails', '2.0.2'` 
```

依赖性更高：

```
 In Gemfile:
    jquery-rails (= 2.0.2) ruby depends on
      railties (< 5.0, >= 3.2.0) ruby 
```

所以对于 Rails **3.0.15**，我最终完全从 Gemfile 中取出了版本，最终得到了 1.0.19**版本**。

```
Installing jquery-rails (1.0.19) 
```

# uitoolbar - ios如何创建带有弹出按钮的工具栏按钮

> ID：13200131
> 
> 赞同：2
> 
> 时间：2012-11-02T17:19:25.083
> 
> 标签：uitoolbar, uisegmentedcontrol, uitoolbaritem

我正在尝试创建一个类似于[tweetbot](http://tapbots.com/img/software/tweetbot/icon_tabbar.png)中的工具栏，如果您按下工具栏中的按钮 - 更多按钮会在其上方垂直弹出。我尝试使用 uisegmented 控件并将其旋转 90 度，但它看起来非常糟糕。有谁知道正确的方法吗？

# javascript - Javascript在方向改变后获取手机屏幕宽度

> ID：13200135
> 
> 赞同：9
> 
> 时间：2012-11-02T17:19:33.930
> 
> 标签：javascript, jquery, mobile, jquery-mobile, screen-orientation

我正在捕捉这样的`orientationchange`事件：

```
 $(window).bind( 'orientationchange', function(e){

            }); 
```

之后如何获得新的屏幕宽度和高度（以像素为单位）`orientationchage`？

我已经尝试过`screen.width`，但这并没有改变，它仍然是初始宽度，即使在方向改变之后也是如此。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T17:23:40.007

```
$(window).bind( 'orientationchange', function(e){
    var ori = window.orientation,
        width = (ori==90 || ori==-90) ? screen.height : screen.width;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-18T10:01:30.853

你也可以使用`screen.availWidth`. 它会随着方向而改变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-19T16:39:20.007

使用**$(window).resize**，它在**orientationchange之后运行**

```
$(window).resize(function(){
        //your logic
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-02T16:38:02.433

如果您使用的是元标记视口，您还可以更新该标记（使用 jquery 示例：）

```
 function adapt_to_orientation() {
        var ori = window.orientation;
        var screenwidth = (ori==90 || ori==-90) ? screen.height : screen.width;
        var screenheight = (ori==90 || ori==-90) ? screen.width : screen.height;
                  // resize meta viewport
                  $('meta[name=viewport]').attr('content', 'initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,width='+screenwidth + ',height=' + screenheight);
                }   
        adapt_to_orientation();
        $(window).bind( 'orientationchange', adapt_to_orientation); 
```

# node.js - 发生错误时停止 node-csv-parser

> ID：13200136
> 
> 赞同：0
> 
> 时间：2012-11-02T17:19:37.033
> 
> 标签：node.js, parsing, csv

我正在使用 node-csv-parser ( [http://www.adaltas.com/projects/node-csv/from.html](http://www.adaltas.com/projects/node-csv/from.html) ) 来解析上传到 node+express 实例的 CSV 文件。当“记录”事件发生错误时，我想停止文件解析并将错误返回给客户端，但“错误”事件被多次调用（对于 CSV 文件中的每条记录）。

这是我的代码：

```
 csv()
  .from(req.files.file.path)
  .on('record', function(data, index){
    var date = data[0];
    var vehicle = data[1];
    var taxId = data[4];
    var customer = data[7];
    var address = data[8] + ' ' + data[9];
    var quantity = data[10]
    console.log(date + ' | ' + vechile + ' | ' + taxId + ' | ' + customer + ' | ' + address + ' | ' + quantity);
  })
  .on('end', function() {
    fs.unlinkSync(req.files.file.path);
    res.end();
  })
  .on('error', function(error) {
    fs.unlinkSync(req.files.file.path);
    console.log('HI');
    res.end('error|' + req.files.file.name);
  }); 
```

正如您在上面看到的，打印控制台完整记录时存在故意错误。名为vehicle 的变量输入错误（vechile）。然后多次触发“错误”事件，将“HI”多次打印到控制台。

我想要的是在第一个错误发生时中断文件解析，这样我就可以正确地删除文件（现在它被多次删除，第二次失败）并将错误返回给客户端。

我尝试使用 end() 方法，但没有成功。

我在正确的轨道上吗？有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:01:41.993

我想我会尝试这样做。仅在 end 方法上清理文件。在使用 csv 解析器的函数内部捕获进程外部变量中的任何错误。

读完包含结果的 csv 后返回给用户。

```
function parseCsv(req, res) {
 var errs = [];
csv()
  .from(req.files.file.path)
  .on('record', function(data, index){
   //
  })
  .on('end', function() {
    fs.unlinkSync(req.files.file.path);
    rs.end(errs);
  })
  .on('error', function(error) {
    errs.push(error);
  });
} 
```

客户端可以检查返回并决定对客户端的响应应该是什么。您可以将此函数移动到它自己的模块中，并将 filePath 和 cb 作为参数以进一步解耦您的代码，但除了您要执行的操作之外。这样做的一个好处是您可以一次显示所有错误，因此用户可以修复文件一次并重新提交。

缺点是您正在处理整个文件，但我看不到停止处理此库中的文件的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:14:23.763

我在 GitHub 上写了这个问题的详细答案： [https ://github.com/wdavidw/node-csv-parser/issues/58](https://github.com/wdavidw/node-csv-parser/issues/58)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-19T13:58:23.200

你可以这样做：

```
let csvstream = csv.fromPath(csvFile, opt)
  .on('error', (data) => {
    csvstream.pause();
    // Do whatever to handle error

    // If you want to restart csv processing
    csvstream.resume();
  })
  .on('data', (data) => {
     // Do whatever
  }); 
```

我正在使用版本 2.4.1

# android - 多层移动设备支持

> ID：13200138
> 
> 赞同：0
> 
> 时间：2012-11-02T17:19:43.900
> 
> 标签：android, iphone, html, webserver, wap

尝试研究创建支持所有级别设备的移动 web 应用程序的最有效方法：

支持 WAP 和 xHTML 的最笨的功能手机

黑莓/Windows Phone/触摸“哑”手机

机器人/iOS

显然应该有渐进式增强，但我完全愿意为每个设备层设置不同的逻辑。您对如何最好地解决这个问题有何看法？对任何技术开放。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:32:24.063

大多数手机都支持`J2ME`，甚至是旧手机。但是您将无法使用应用程序中的所有电话服务。但是，它会比网站浏览更好......

# java - 在从实例初始化程序调用的方法中记录期望

> ID：13200140
> 
> 赞同：2
> 
> 时间：2012-11-02T17:19:57.347
> 
> 标签：java, jmockit, expectations

我不太了解下面测试的行为。看着它，`test_OK`并且`test_Not_OK`严格等效-唯一的区别是`test_OK`具有“内联” `callMethod`。

但是，`test_OK`通过而`test_Not_OK`失败。这种行为有原因吗？

```
public class MethodCallTest {
    @Test
    public void test_Not_OK() {
        new NonStrictExpectations() {
            Whatever w;
            {
                callMethod();
            }
            private void callMethod() {
                w.method();
                result = 1;
            }
        };
        assertEquals(new Whatever().method(), 1); //fails
    }

    @Test
    public void test_OK() {
        new NonStrictExpectations() {
            Whatever w;
            {
                w.method();
                result = 1;
            }
        };
        assertEquals(new Whatever().method(), 1); //passes
    }

    public static class Whatever {
        public int method() {
            return 0;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:27:07.917

好问题。原因是 JMockit 在构造函数和子类的初始化块中对字节码执行某些`Expectations`转换`NonStrictExpectations`。（本质上，这样做是为了让模拟 API 工作。例如，对特殊`result`字段的每个分配实际上都被替换为方法调用，以便它与当前期望正确关联。）

*然而，期望块中的方法*尚未转换。他们应该是，所以我现在正在实施它。从下一个版本 (0.999.19) 开始，将支持此功能。

# .net - 使用 Web 服务的异步方法

> ID：13200145
> 
> 赞同：3
> 
> 时间：2012-11-02T17:20:34.107
> 
> 标签：.net, wcf, silverlight, asynchronous, .net-4.5

我想编写一个小的 Silverlight 应用程序，其中有三个 DataGrid。每个 Datagrid 都使用异步方法从 Web 服务获取数据。现在，我希望第一个数据网格从 web 服务获取数据，而不是从 web 服务获取第二个数据网格的数据，其中参数来自第一个数据网格中选定行的参数，第三个数据网格具有前两个数据网格的参数。第一个数据网格通过注册事件处理程序获取 MainPage 方法中的数据，然后使用异步方法。

现在我的问题是我在 SelectionChanged（事件处理）方法中对其他数据网格使用异步方法，我猜这是错误的概念，因为在数据网格 2 中选择某些内容并返回到数据网格 1 后，所有数据网格都消失了。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.ServiceModel;
using Rebat.SymptomeService;

namespace Rebat
{
    public partial class MainPage : UserControl
    {
        ServiceClient client = new ServiceClient();

        public MainPage()
        {
            InitializeComponent();
            ServiceClient client = new ServiceClient();
           client.SymptomeListCompleted += new EventHandler<SymptomeListCompletedEventArgs>(client_SymptomeListCompleted);
            client.SymptomeListAsync();
        }

        void client_SymptomeListCompleted(object sender, SymptomeListCompletedEventArgs e)
        {
            CustomerGrid.ItemsSource = e.Result;
        }
        void client_CustomerListCompleted(object sender, CustomerListCompletedEventArgs e)
        {
           CustomerGrid2.ItemsSource = e.Result;
        }
        void client_SalzListCompleted(object sender, SalzListCompletedEventArgs e)
        {
            SalzGrid.ItemsSource = e.Result;
        }

        private void CustomerGrid_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            Symptome sympt = CustomerGrid.SelectedItem as Symptome;
            client.CustomerListCompleted += new EventHandler<CustomerListCompletedEventArgs>(client_CustomerListCompleted);
            client.CustomerListAsync(sympt.sId.ToString());

        }

        private void CustomerGrid2_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            Symptome2 sympt2 = CustomerGrid2.SelectedItem as Symptome2;
            client.SalzListCompleted += new EventHandler<SalzListCompletedEventArgs>(client_SalzListCompleted);
            //this is the PROBLEM:
            client.SalzListAsync(sympt2.sy1.ToString(), sympt2.sy2.ToString());
        }

    }
} 
```

我必须改变什么，或者我必须如何使用异步方法？您可以在事件处理方法中使用异步方法吗？这是否适用于使用网络服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:41:11.247

假设您可以使用 .NET 4.5 异步功能，如果您将服务代理调整为基于任务的异步模式，则执行此类调用会简单得多。您可以在事件处理程序中使用异步方法，您只需将其设为异步即可充分受益于新的 async/await 关键字。

要调整您的代理，首先声明一个辅助静态类：

```
public static partial class TAPExtensions
{
    public static void HandleCompletion<T>(TaskCompletionSource<T> tcs, AsyncCompletedEventArgs args, Func<T> getResult, Action unregisterHandler = null)
    {
        // Transfers the results from the AsyncCompletedEventArgs and getResult() to the 
        // TaskCompletionSource, but only AsyncCompletedEventArg's UserState matches the TCS 
        // (this check is important if the same WebClient is used for multiple, asynchronous 
        // operations concurrently).  Also unregisters the handler to avoid a leak. 
        if (args.UserState == tcs)
        {
            if (args.Cancelled) tcs.TrySetCanceled();
            else if (args.Error != null) tcs.TrySetException(args.Error);
            else tcs.TrySetResult(getResult());
            if (unregisterHandler != null) unregisterHandler();
        }
    }
} 
```

现在，创建另一个帮助类来扩展您的代理。为每个操作创建一个适配器方法：

```
public static class ServiceClientEx
{
    public static async Task<IEnumerable<ReturnType>> SalzListTask(this ServiceClient proxy, string arg1, string arg2)
    {
        var tcs = new TaskCompletionSource<IEnumerable<ReturnType>>();
        EventHandler<SalzListCompletedEventArgs> handler = (s, args) => TAPExtensions.HandleCompletion(tcs, args, () => args.Result);
        proxy.SalzListCompleted += handler;

        try
        {
            proxy.SalzListAsync(arg1, arg2, tcs);
            return await tcs.Task;
        }
        finally { proxy.SalzListCompleted -= handler; }
    }
} 
```

现在您可以在代码中使用扩展方法（假设您为 ServiceClientEx 类的命名空间添加了“使用”指令）。结果将是这样的：

```
public partial class MainPage : UserControl
{
    ServiceClient client = new ServiceClient();

    public MainPage()
    {
        InitializeComponent();
        ServiceClient client = new ServiceClient();
    }

    private async void CustomerGrid2_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        Symptome2 sympt2 = CustomerGrid2.SelectedItem as Symptome2;

        alzGrid.ItemsSource = await client.SalzListTask(sympt2.sy1.ToString(), sympt2.sy2.ToString());
    }
} 
```

请注意在事件处理程序声明中使用“async”关键字。它将异步行为传播到该方法：一旦选择更改，处理程序将正常执行，直到它到达第一个等待，然后它将返回到原始调用者（控件的调度程序）。调用完成时，将在 UIThread 中执行延续（将 itemssource 设置为操作结果）。

您甚至可以包装调用以检查异常，例如：

```
private async void CustomerGrid2_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        try{
            Symptome2 sympt2 = CustomerGrid2.SelectedItem as Symptome2;

            alzGrid.ItemsSource = await client.SalzListTask(sympt2.sy1.ToString(), sympt2.sy2.ToString());
        }catch(MyException ex){
            MessageBox.Show(ex.ToString());
        }
    } 
```

一些建议：

*   我不认为从构造函数触发异步调用是一个好主意。例如，您可以在控件的 Loaded 事件中进行一些初始化后触发它（更好的方法是在 ViewModel 中执行此类操作，遵循 MVVM 模式并仅从您的 UI 中使用它，但这是另一个主题） .
*   按照您现在的方式，每次选择更改时都会将一个新的处理程序添加到您的代理中，因此您的处理程序将被执行更多次。
*   每次拨打电话时都尝试实例化您的代理，因为如果代理出现故障，该实例将变得不可用。

# json - Webservices：多少数据太多了？

> ID：13200148
> 
> 赞同：4
> 
> 时间：2012-11-02T17:20:48.027
> 
> 标签：json, web-services, networking, mobile

当涉及到 web 服务响应消息时，有多少数据太多了？

我有一个用 Java 编写的 HTTP servlet，它在我们的网络之外打开。它调用数据库，然后通过防火墙发回 JSON 消息。我们所说的 344kb 仅用于数据，不包括数据包标头。我不会认为这很重要。我们在 iOS 和 Android 平台上都收到了响应，总往返时间可能在 1 秒到 15 秒之间。平均可能 > 6。我想在 5 秒内稳定地完成这个，我正在学习这是相当了不起的壮举。根据我的时间，对数据库的 web 服务调用是毫秒。我们直接在防火墙后面连接，但在互联网前面（因此排除了互联网），并且看到了可能一秒钟的总往返行程。

作为一项测试，我将返回 JSON 修剪为仅返回 1 行数据 (4kb)，当然，我看到速度大幅提高...... 这真的引出了一个问题，当返回 JSON 消息以在期望小于 5 秒的移动设备上消费时，是否存在最大数据大小？运行 wireshark 向我展示了这是作为多个数据包交付的，我想与它有很多关系。

我还计算了客户端接收消息的时间以及在屏幕上呈现消息所花费的时间……仅毫秒。

我不想将我的客户端程序分解为针对不同数据的多个 Web 服务调用，因为该程序非常基础，而且我认为它不需要多次调用。

你怎么看？责怪互联网，只是制作一个漂亮的启动/加载屏幕？:)

** 编辑：我也忘了补充说我正在通过 SSL **

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T17:59:21.857

归咎于移动连接及其增加的延迟。明确地说，它甚至不是下载速度，而是保持恒定连接的可能性和非分块数据包。

可悲的是，您不会在这里找到“正确”的答案。

在完美的条件下，一部手机的 RTT 可能只有一两秒，其中包含您的所有数据。
在不太理想的情况下，您的数据可能永远不会到达。

因此，您需要订阅重量与频率的平衡行为。
除了你，没有人能真正给你这个比例。

就个人而言，我的建议可能是开始按模块分解数据。
如果你有组成应用程序的小模块化小部件，每个小部件都需要配置数据或用户数据，请分别以松散耦合的方式加载每个小部件。

作为一个简单的例子，你可能有一个聊天应用程序，你的消息窗口、在线朋友列表和 PM 列表都相互独立加载。

如果每个都在准备就绪时进行初始化，并且每个都有自己单独的“加载”指示器（进度很好，但实际上“正在处理”就可以了）。

如果您的应用更像是一个博客卷或一组项目，其中只有少数可以在屏幕上显示，那么根据每个屏幕的平均数量对它们进行逻辑分块。
将其设置在计时器上，或者在成功加载触发下一次异步加载的队列中设置，直到您得到空响应。

如果您的应用程序更像是一个分析套件，您要在其中加载数千行统计信息......好吧，您无能为力，但请确保用户知道它正在运行。您可以发送带有第一个结果的“总计”字段，并根据您迄今为止加载的唯一行数来标记您的进度。
或者，如果您有按天计算的统计数据，您可以按天或按周进行分组，并在条形图或日历上标记您当前可用的集合有多远。

这里没有简单的答案，但希望能得到一点帮助和一条建议：

在一个程序中等待 5 秒钟，我可以看到所有内容都在流入，并且在完成后将起作用，这比在完成的产品弹出之前只是一个空白屏幕并且没有人告诉我任何事情的 3 秒钟更可以忍受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:47:16.673

对于移动集成，JSON 中的 65000 个字符非常好...... 对于更大尺寸的 JSON，您应该进行批处理。

对于更多字符，问题来自带宽。如果互联网带宽变慢，那么您可能无法接收数据（数据丢失）。

# jquery - 用 jQuery 标记空字段

> ID：13200149
> 
> 赞同：0
> 
> 时间：2012-11-02T17:21:02.420
> 
> 标签：jquery

我有一个表单，其字段结构如下：

```
<span class="req">*</span>
<label for="name">Name</label><br>
<input type="text" id="name"> 
```

在提交时，我想标记前面有星号的空字段。我假设我可以用它`.each()`来遍历我的表单字段，但我如何只定位必填字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:23:16.093

```
$('.req').each(function(){
    if($(this).text()=='*') {
        if(!$(this).siblings('input').val()) {//Has no value
            //DO STUFF HERE
        }
    }
}); 
```

像这样？

或者你可以做这样的事情：

```
$('input').each(function(){
    //IF NO VALUE AND IS REQUIRED
    if(!$(this).val() && $(this).siblings('.req').length != 0) {
        $(this).addClass('error');//AS PRAVEEN SUGGESTS
        alert('Field is required');
    }
}); 
```

**警告** 此代码假定您的`span`,`label`和`input`位于另一个元素中，并且不共享其他输入和`.req`'s。否则该`.siblings()`方法将返回多个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:23:24.710

请给一个不应该为空`required`的s 说一个类。`input`并使用此功能：

```
$('.required').each(function(){
    if($(this).val() == '') {
        $(this).addClass("error");
    }
}); 
```

在 CSS 中，定义`.error`为：

```
.error {border: 1px solid #f00;} 
```

### 演示：http: [//jsfiddle.net/jr8r9/](http://jsfiddle.net/jr8r9/)

# http - 为什么说“HTTP 是无状态协议”？

> ID：13200152
> 
> 赞同：202
> 
> 时间：2012-11-02T17:21:13.690
> 
> 标签：http, stateless

HTTP 有 HTTP Cookie。Cookies 允许服务器跟踪用户状态、连接数、上次连接等。

HTTP 具有持久连接 (Keep-Alive)，其中可以从同一个 TCP 连接发送多个请求。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-11-02T17:24:44.130

Even though multiple requests can be sent over the same HTTP connection, the server does not attach any special meaning to their arriving over the same socket. That is solely a performance thing, intended to minimize the time/bandwidth that'd otherwise be spent reestablishing a connection for each request.

As far as HTTP is concerned, they are all still separate requests and must contain enough information on their own to fulfill the request. That is the essence of "statelessness". Requests will not be associated with each other absent some shared info the server knows about, which in most cases is a session ID in a cookie.

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2012-11-02T17:53:30.280

来自[维基百科](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)：

> HTTP 是一种无状态协议。无状态协议不要求服务器在多个请求期间保留有关每个用户的信息或状态。
> 
> 但是某些 Web 应用程序可能必须跟踪用户从一个页面到另一个页面的进度，例如当需要 Web 服务器为用户自定义网页内容时。这些情况的解决方案包括：
> 
> *   HTTP cookie 的使用。
> *   服务器端会话，
> *   隐藏变量（当当前页面包含表单时），以及
> *   使用 URI 编码参数的 URL 重写，例如 /index.php?session_id=some_unique_session_code。

使协议无状态的原因是服务器*不需要*跟踪多个请求的状态，而不是如果它愿意就不能这样做。这简化了客户端和服务器之间的合同，并且在许多情况下（例如通过 CDN 提供静态数据）最大限度地减少了需要传输的数据量。如果*要求*服务器维护客户端访问的状态，则发出和响应请求的结构将更加复杂。事实上，模型的简单性是其最大的特点之一。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-11-02T17:25:05.630

Because a stateless protocol does not require the server to retain session information or status about each communications partner for the duration of multiple requests.

HTTP is a stateless protocol, which means that the connection between the browser and the server is lost once the transaction ends.

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2019-01-05T13:02:22.523

**HTTP**被称为a是`stateless protocol`因为每个请求都是独立执行的，不知道之前执行的请求，这意味着一旦事务结束，浏览器和服务器之间的连接也会丢失。

使该协议`stateless`的原因在于，在其最初的设计中，**HTTP**是一个相对简单的`file transfer protocol`：

1.  请求以 URL 命名的文件，
2.  获取文件作为响应，
3.  断开。

一个连接和另一个连接之间没有任何关系，即使来自同一个客户端也是如此。这简化了客户端和服务器之间的合同，并且在许多情况下最大限度地减少了需要传输的数据量。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-08-03T02:54:20.510

# 现代 HTTP 是有状态的。过去的 HTTP 是无状态的。

在 Netscape 在 1994 年发明 cookie 和 HTTPS 之前，HTTP 可以被认为是无状态的。随着时间的推移，出于各种原因（包括性能和安全性）添加了许多有状态组件。但是有状态的添加就是这样，添加，所以它仍然通俗地说 HTTP 是无状态的，因为核心明确寻求无状态。

虽然 HTTP/1 最初寻求无状态，但许多 HTTP/2 组件正是有状态的定义。 **HTTP/2 放弃了无状态目标**。不再是有状态组件的“添加”，而是在 HTTP/2 标准的核心中定义了有状态组件。

以下是有状态 HTTP/1 和 HTTP/2 组件的有限列表，但并不详尽：

*   Cookies，被 RFC 命名为“HTTP 状态管理机制”。
*   HTTPS，它存储密钥因此状态。
*   HTTP 身份验证需要状态。
*   网络存储。
*   HTTP 缓存是有状态的。
*   流标识符的真正目的是状态。它甚至以 RFC 部分的名称“流状态”。
*   建立流标识符的标头块是有状态的。
*   引用流标识符的帧是有状态的。
*   HTTP RFC 明确表示有状态的标头压缩是有状态的。
*   机会加密是有状态的。

HTTP/2 RFC 的第 5.1 节“流状态”是 HTTP/2 标准定义的状态机制的一个很好的例子。[第 5.3.4 节](https://datatracker.ietf.org/doc/html/rfc7540#section-5.3.4)甚至被命名为“优先状态管理”。

**Web 应用程序将 HTTP/2 视为无状态协议是否安全？**

HTTP/2 是有状态的协议，但这并不意味着您的 HTTP/2 应用程序不能是无状态的。您可以选择不对无状态 HTTP/2 应用程序使用有状态功能。

如果尝试无状态地使用它们，需要状态的现有 HTTP/1 和 HTTP/2 应用程序将中断。例如，如果禁用 cookie，则可能无法登录某些 HTTP/1.1 网站，从而破坏应用程序。假设特定的 HTTP/1 或 HTTP/2 应用程序是无状态的可能并不安全。

#### TL;博士：

有状态机制是后来对原始无状态标准的 HTTP 添加。HTTP/1 通俗地说是无状态的，尽管在实践中我们使用标准化的有状态机制，如 cookie、TLS 和缓存。与 HTTP/1 不同，HTTP/2 从一开始就在其标准中定义了有状态组件。特定的 HTTP/2 应用程序可以使用 HTTP/2 功能的子集来保持无状态，但协议本身预计状态是常态，而不是例外。

错误的“HTTP 是无状态的”是古老的教条，与 HTTP 的现代有状态现实相去甚远。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-01-21T05:56:40.727

如果协议 HTTP 作为状态完整协议给出，浏览器窗口使用单个连接与 Web 服务器进行通信，以向 Web 应用程序发出多个请求。这使浏览器窗口有机会长时间参与浏览器窗口和 Web 服务器之间的连接并保持它们长时间处于空闲状态。即使客户端中的大部分连接都处于空闲状态，这也可能会造成Web服务器达到最大连接数的情况。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-04-04T06:29:25.627

HTTP 是无连接的，这是 HTTP 是无状态协议的直接结果。服务器和客户端仅在当前请求期间才知道彼此。之后，两个人都忘记了对方。由于协议的这种性质，客户端和浏览器都不能保留跨网页的不同请求之间的信息。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-06-25T12:59:26.287

`HTTP`是无国籍的。`TCP`是有状态的。没有所谓的`HTTP connection`，只有`HTTP request`和`HTTP response`。我们不需要维护任何东西来制作另一个`HTTP request`. **一个“keep-alive”**的连接头意味着`TCP`将被后续的`HTTP`请求和响应重用，而不是一直断开和重新建立`TCP`连接。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-02-13T16:51:24.387

**什么是无国籍？？**

一旦发出请求并将响应返回给客户端，连接将被丢弃或终止。服务器将忘记请求者的所有信息。

**为什么是无国籍？？**

网络选择使用无状态协议。这是一个天才的选择，因为网络的最初目标是允许将文档（网页）提供给非常大的数量。的人为服务器使用非常基本的硬件。

维持长时间运行的连接将非常耗费资源。

如果 web 被选择为有状态协议，那么服务器上的负载将会增加以维持访问者的连接。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-03-16T17:31:08.923

我认为有人为无状态概念选择了非常不幸的名称，这就是造成整个误解的原因。它不是关于存储任何类型的资源，而是关于客户端和服务器之间的关系。

客户：我把所有的资源都放在我这边，并把所有需要处理的重要项目的“清单”发给你。做你的工作。

服务器：好吧..让我负责过滤重要的内容，以便给您正确的响应。

这意味着服务器是客户端的“奴隶”，每次请求后都必须忘记他的“主人”。实际上，STATELESS 仅指服务器的状态。

[https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_1_3](https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_1_3)

# c++ - C++，当我使用这种数组存储数据时，为什么我的程序会挂起？

> ID：13200153
> 
> 赞同：0
> 
> 时间：2012-11-02T17:21:15.973
> 
> 标签：c++

当我尝试输入 x pt.1 的任何坐标时，我的程序只是挂起。

任何人都可以帮助我吗？

```
// shape.h
#include <string>
#ifndef SHAPE_H
#define SHAPE_H 1
using namespace std;

class Shape
{

protected:
    int x, y;
    string name;
public:
// a simple inline constructor
    Shape(int new_x, int new_y, string new_name): x(new_x), y(new_y), name(new_name)
    {
        return;
    };

    virtual ~Shape()
    {
        return;
    };
// inline getter/setter functions
    string getName() { return name; };
    void setName(string new_name)
    {
        name = new_name;
    }

    int getX() { return x; };
    void setX(int set_x)
    {
        x = set_x;
    }

    int getY() { return y; };
    void setY(int set_y)
    {
        y = set_y;
    }

    void toString();
};
#endif 
```

形状标题。这个程序也是关于继承的..

```
// square.h
#ifndef SQUARE_H
#define SQUARE_H 1
#include <string>
#include "Shape.h"
using namespace std;

class Square : public Shape
{
protected:
int size;
public:
// a c'tor that calls the parent class's c'tor
Square(int new_x, int new_y, string new_name): Shape(new_x, new_y, new_name)
{
    return;
};

void setXY();
Square *arraySquare[1];
};

void Square::setXY()
{
int count = 0;
for(int i=0; i<4; i++)
{
    cout<<"Please enter x-ordinate of pt. "<<i+1<<" : ";
    cin>>x;
    arraySquare[count]->setX(x);
    cout<<"Please enter y-ordinate of pt. "<<i+1<<" : ";
    cin>>y;
    arraySquare[count]->setY(y);
    count++;
}
}

#endif 
```

方形标题..形状的子类..

```
#include <iostream>
#include <string>
#include "Shape.h"
#include "Square.h"
using namespace std;

class Main
{
public:
    void mainMenu();
    char menuChoice;
    void stringToUpper(string &s);
};

void stringToUpper(string &s)
{
    for(unsigned int l = 0; l < s.length(); l++)
    {
        s[l] = toupper(s[l]);
    }
}

void Main::mainMenu()
{
    cout<<"Welcome to Main program!"<<endl<<endl;
    cout<<"1)   Input data"<<endl;
    cout<<"2)   2"<<endl;
    cout<<"3)   3"<<endl;
    cout<<"4)   4"<<endl;
    cout<<"Q)   Enter 'Q' to quit"<<endl<<endl;
}

int main()
{
    char menuChoice;

    bool quit=false;
    Main main;
    Square *square;

    string shape, special;

    while ( !quit )
    {
        main.mainMenu();
        cout<<"Please enter your choice : ";
        cin>>menuChoice;
        menuChoice = toupper(menuChoice);

        switch(menuChoice)
        {
            case '1':
            cout<<endl<<"[ Input data ]"<<endl;
            cout<<"Please enter name of shape : "<<endl;
            cin>>shape;
            stringToUpper(shape);
            if(shape=="SQUARE")
            {
                square->setXY();
            }
            break;
            case '2':
            cout<<"Print"<<endl<<endl;
            break;           
            case '3':
            cout<<"You choosen 3"<<endl<<endl;
            break;                   
            case '4':
            cout<<"You choosen 4"<<endl<<endl;
            break;
            case 'Q':
            cout<<"You have chosen to quit!"<<endl<<endl;
            quit=true;
            exit(0);                 
            default:
            cout<<"Invalid entry!"<<endl<<endl;
            break;
        }
    }
} 
```

这是程序的脸..

每当我运行它并输入第一个坐标 x 时，它就会挂起。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:43:43.393

您的程序挂起，因为它访问未分配的对象。每次看到指针声明时，都必须应用 3 条规则： a) 它是否设置为默认值？b) 是否已分配/分配？c) 它被删除了吗？

在类 Square 中，您已经声明了这个数据成员：

```
Square *arraySquare[1]; 
```

因此，Square 类型的对象有一个包含 1 个指向 Square 的指针的数组。（我相信您应该使用 Shape 而不是 Square。）您必须分配一个 Square 并将其放入`arraySquare`（规则 b）。由于您有一个指针，因此您应该`NULL`在构造函数中将其设置为（规则 a），并且必须在析构函数中将其删除（规则 c）。

然后在`setXY()`你想设置 4 对 X&Y，但`arraySquare`只有 1 个实例的空间并且它没有被分配。一个简单的解决方法是修改 arraySquare 的定义，使其具有 4 个指针的数组，而不是只有 1 个。在 for 循环中设置 X 和 Y 之前，如果它仍然为 NULL，则必须分配一个 Square 实例（`setXY()`允许在同一个对象上多次调用）。现在您有 4 个指针，您必须更新构造函数以将所有 4 个指针设置为 NULL，并更新析构函数以删除所有 4 个指针。

在`main()`中，您还使用指针。我把它留给你来应用规则。

注意：使用 Point 类型会更清楚，因为我们通常说“一个正方形有 4 个角/点”。通过使用 Square an `arraySquare`，Square 的每个角落都有自己的“名称”。

# android - Joda-Time 库无法加载

> ID：13200154
> 
> 赞同：0
> 
> 时间：2012-11-02T17:21:20.113
> 
> 标签：android, eclipse, jodatime

我正在使用 Joda-Time 库`org.joda.time.DateTime`和`org.joda.time.Days`，并且我已经在项目中导入了这两个库。

我还将主 .jar 文件放在项目的用户库中，并将源和 javadoc .jar 作为附件放在正确的位置。（Joda-Time 2.1）然后我在 Manifest 中声明了库的使用。

我从 PackageManager 收到一条错误消息：

`Package com.example.igestao (my package) requires unavailable shared library org.joda.time.DateTime; failing!`

它只是中止了发射..

有任何想法吗 ？谢谢。

编辑：这是在 Eclipse IDE 顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:36:49.067

它起作用了，我只是从头开始重新做一遍，我添加了外部 JAR，而不是从 WorkSpace 添加它们。

希望这对其他人有帮助..

# windows-8 - 无法获得 Windows 8 的开发人员许可证

> ID：13200158
> 
> 赞同：3
> 
> 时间：2012-11-02T17:21:33.897
> 
> 标签：windows-8, windows-store

尝试在Visual Studio 2012中创建windows store程序时，提示安装开发者许可，但是VS2012一直无法获取许可，请看下图。 ![在此处输入图像描述](../Images/a630658e15fa7f0cc8a1bdc80455ce56.png)

我关闭了此对话框并从 Project-Store-Acquire Developer License 再次尝试，但仍然出现相同的错误。我google了一会儿，发现MSDN上的一个页面说有命令模式，我试了一下，得到同样的错误，见下图。 ![在此处输入图像描述](../Images/e61a5e5bc7ee10fb1565ba6304224935.png)

几天前我从 Windows 7 升级了我的 Windows 8，它被激活了。 ![在此处输入图像描述](../Images/253c7f420c89a8369caeefa7c9890e58.png)

我没有为我的互联网连接使用任何代理，没有许可证我无法构建我的 windows 商店 prgram。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:50:22.017

运行`Command Prompt`为`administrator`. 如果系统提示您输入管理员密码或确认，请键入`password`或提供确认。`netsh winhttp reset proxy` 在命令提示符下键入，然后按`Enter`。尝试`licence`再次获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:25:36.867

我有一个类似的问题。我刚刚安装了 Windows 更新，现在一切正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-27T08:34:47.240

1.  打开“编辑组策略”管理编辑器
2.  单击以展开计算机配置、管理模板、Windows 组件，然后是应用程序包部署。
3.  双击允许在不安装开发人员许可证的情况下开发 Windows 应用商店应用设置。
4.  在允许在不安装开发人员许可证的情况下开发 Windows 应用商店应用窗口中，单击启用，然后单击确定。
5.  双击允许所有受信任的应用程序安装设置。
6.  在允许安装所有受信任的应用程序窗口中，单击启用，然后单击确定。将组策略设置为允许在不安装开发人员许可证的情况下开发 Windows 应用商店应用程序会更新以下注册表设置：HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\Appx\AllowDevelopmentWithoutDevLicense = 1 设置组策略以允许受信任的应用程序更新以下注册表设置：HKEY_LOCAL_MACHINE\Software\Policies\Micros oft\Windows\Appx\AllowAllTrustedApps = 1  

如果您仍然面临同样的问题 请按照以下步骤操作： 1\. 打开以下链接并下载 Hotfix [http://support.microsoft.com/kb/2871280](http://support.microsoft.com/kb/2871280)   2\. 安装 Hotfix 并重新启动计算机。 
-  

  另一种选择： • 在系统上启动 Fiddler，然后尝试获取 Window Developer License

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T11:06:26.943

我有同样的问题，我在网上找到的任何东西都没有帮助。MSDN 开发者热线的好人向我指出，系统日期和时间必须设置为正确的本地时间。这终于解决了问题，我现在能够激活开发人员许可证。

如果我理解他的话，这是由于如果两个参与者的时间设置差异太大，某些 SSL 连接会失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T07:20:33.673

我已经开始 Windows 8 应用程序开发。Visual Studio 是我的开发工具。在中间，我找不到获得 Windows 8 开发人员许可证的方法。搜索 Google 并找到了一种很酷的描述性方法来获得 Windows 8 的开发人员许可证，请参阅此处[如何获得 Windows 8 的开发人员许可证并续订旧的一个很快。](http://dothisbest.com/how-to/get-a-developer-license-for-windows-8/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-13T03:39:47.153

以上都不起作用，我再次刷新我的 Windows 8。现在可以了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-04T16:23:40.050

问题是由于升级过程中的任务计划程序损坏微软发布了一个修复程序，它解决了这个问题：http: [//support.microsoft.com/kb/2687198](http://support.microsoft.com/kb/2687198)

如果应用修补程序不起作用，请尝试以下操作：

1.  创建一个新的临时用户。
2.  切换到新的临时用户。（转到开始屏幕，单击您的姓名/头像，单击下拉框中的新用户名，然后输入密码。）
3.  以新用户身份打开 Visual Studio 11。
4.  创建一个新的 Metro 项目。当被要求获取新许可证时，请使用您的 Microsoft 帐户登录。
5.  注销并切换回我的普通用户帐户。
6.  打开 Visual Studio 并尝试运行 Metro 项目。
7.  禁用临时用户。（许可证到期时可能再次需要它。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-20T20:22:17.897

以管理员身份运行命令提示符。键入

> netsh winhttp 重置代理

在命令提示符下，然后按 Enter。尝试再次获得许可证。它对我有用。

# python - Python argparse：位置参数的单独选项

> ID：13200160
> 
> 赞同：6
> 
> 时间：2012-11-02T17:21:37.737
> 
> 标签：python, argparse

我编写了一个带有一个或多个输入文件的脚本。我希望能够为脚本（A 和 B）和每个输入文件（C 和 D）分别指定选项。

用法应如下所示：

```
script.py [-A] [-B]  [-C] [-D] file1 [[-C] [-D] file2] ... 
```

怎么办`argparse`？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T17:56:15.480

如果可能，请尝试[docopt](https://github.com/docopt/docopt)。它更容易使用，并且有足够的示例可供入门。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T18:13:26.583

我想做这个已经有一段时间了，但从来没有想过一个用例。你找到了：谢谢！

您可以通过两个阶段的 argparsing 来做到这一点。在第一阶段，您只寻找`-A`或`-B`选项。

在第二阶段，您将剩余的参数拆分为片段（在本例中使用生成器函数）并调用`parse_args`片段：

```
import argparse

def fileargs(args):
    result = []
    for arg in args:
        result.append(arg)
        if not arg.startswith('-'):
            yield result
            result = []

parser = argparse.ArgumentParser()
parser.add_argument('-A', action = 'store_true')
parser.add_argument('-B', action = 'store_true')
args, unk = parser.parse_known_args()
print(args)

file_parser = argparse.ArgumentParser()
file_parser.add_argument('-C', action = 'store_true')
file_parser.add_argument('-D', action = 'store_true')
file_parser.add_argument('file')
for filearg in fileargs(unk):
    fargs = file_parser.parse_args(filearg)
    print(fargs) 
```

然后`test.py -A -B -C -D file1 -C file2`产生

```
Namespace(A=True, B=True)
Namespace(C=True, D=True, file='file1')
Namespace(C=True, D=False, file='file2') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T18:12:23.890

我的，这个答案很复杂：

```
import sys

#Unforunately, you can't split up positional arguments in a reasonable way if you
#don't know about all of them...  Count positional arguments (files)

def how_many_files(lst):
    return sum(1 for x in lst if not x.startswith('-'))

args = sys.argv[1:]
Nfiles = how_many_files(args)

import argparse

#Create our own NameSpace class so that we can have an easy handle on the
#attributes that the namespace actually holds.
class MyNameSpace(argparse.Namespace,dict):
    def __init__(self):
        argparse.Namespace.__init__(self)
        dict.__init__(self)

    def __setattr__(self,k,o):
        argparse.Namespace.__setattr__(self,k,o)
        self[k] = o

class MyParser(argparse.ArgumentParser):
    def __init__(self,*args,**kwargs):
        self.my_parents = kwargs.get('parents',[])
        argparse.ArgumentParser.__init__(self,*args,**kwargs)

class FooAction(argparse.Action):
    def __call__(self,parser,namespace,value,option_string=None):
        ref = namespace.pop('accumulated',{})
        try:
            del namespace.accumulated
        except AttributeError:
            pass

        #get a new namespace and populate it with the arguments we've picked up
        #along the way        
        new_namespace = self.__default_namespace(parser)
        for k,v in namespace.items():
            setattr(new_namespace,k,v)
            delattr(namespace,k)  #delete things from `namespace.__dict__`

        namespace.clear() #also remove things from the dictionary side.
        namespace.accumulated = ref
        new_namespace.file = value
        ref[value] = new_namespace

    def __default_namespace(self,parser):
        n = argparse.Namespace()
        for parent in parser.my_parents:
            parent.parse_args([],namespace=n)
        return n

parser = argparse.ArgumentParser()
parser.add_argument('-A',action='store_true')
parser.add_argument('-B',action='store_true')
parser.add_argument('-C',action='store_true')
parser.add_argument('-D',action='store_true')

parser2 = MyParser(parents=[parser],conflict_handler='resolve')
for i in range(Nfiles):
    parser2.add_argument('files%d'%i,action=FooAction,default=argparse.SUPPRESS)

n = parser2.parse_args(args,namespace = MyNameSpace())
for k,v in n.accumulated.items():
    print k,v 
```

调用它：

```
~ $ python test.py -A foo bar -A -B -C qux 
```

产量：

```
qux Namespace(A=True, B=True, C=True, D=False, file='qux')
foo Namespace(A=True, B=False, C=False, D=False, file='foo')
bar Namespace(A=False, B=False, C=False, D=False, file='bar') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T10:48:50.140

像往常一样，这个问题似乎并不完全是需要的......对不起。这是我的工作结果（受 unutbu 答案的启发），它还允许带有参数的每个文件选项。

```
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('-A', action = 'store_true')
parser.add_argument('-B', action = 'store_true')
args, unk = parser.parse_known_args()

file_parser = argparse.ArgumentParser()
file_parser.add_argument('-C', action = 'store_true')
file_parser.add_argument('-D', action = 'store_true')
file_parser.add_argument('-V', "--variable-list")
file_parser.add_argument('file')

fargs=[]
n=len(unk)
while True:
        i=0
        for i in  range(n): # finding longest fully parsable tail
            Parsed, unkf = file_parser.parse_known_args(unk[i:n])
            if not unkf: break
        if i==n: # did not found parsable tail
            file_parser.parse_args(unk[0:n]) # cause error 
        else:
            fargs.append(Parsed)
            n=i
        if (n<=0): break
fargs.reverse()

print args
for argl in fargs:
        print argl 
```

调用它：

```
myscript.py -A -B -C -D file1 -C -V a,b,c file 
```

产量：

```
Namespace(A=True, B=True)
Namespace(C=True, D=True, file='file1', variable_list=None)
Namespace(C=True, D=False, file='file2', variable_list='a,b,c') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T18:50:58.037

该`action=append`选项可能会有所帮助。这将使您可以多次指定一个选项，并且具有特定选项的所有参数都将存储在它们各自的列表中。

...这是一个例子，让我们称之为`sample.py`：

```
if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument("-c", "--cfilein", action="append")
    parser.add_argument("-d", "--dfilein", action="append")
    args = parser.parse_args()
    print args.cfilein
    print args.dfilein

Execute: ./sample.py -c f1 -d f2 -c f3 -d f4
Output:  ['f1', 'f3']
         ['f2', 'f4'] 
```

查看：[http](http://docs.python.org/2/library/argparse.html#action) ://docs.python.org/2/library/argparse.html#action ...希望这会有所帮助...

# httpclient - Netty - 使用相同的 channelFactory 导致只处理 3 个响应

> ID：13200165
> 
> 赞同：2
> 
> 时间：2012-11-02T17:21:53.027
> 
> 标签：httpclient, netty, nio, channelfactory

我被分配创建一个基于 Netty 的 HTTP 客户端，但我遇到了一些困难，我希望有一个答案。

好吧，为了充分利用 NIO，我想使用同一个 channelFactory，这意味着所有连接都由同一个老板线程处理并分配给同一个工作线程池。

我遇到的问题是，如果我使用 3 名工人，我只能进行 3 次操作，然后流程就会卡住。即使我在处理响应后关闭了通道，似乎工作线程也没有被释放以进行下一次分配......

以下是我如何定义我稍后分配给引导程序的静态 channelFactory：

```
static NioClientSocketChannelFactory channelFactory =  new NioClientSocketChannelFactory(
          Executors.newFixedThreadPool(1),
          Executors.newFixedThreadPool(3)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:39:40.297

找到了原因 - 我应该使用 newCachedThreadPool 并使用包含#Workers 的第二个构造函数构造 channelFactory。

netty 需要一个 cachedPool ，否则它不能重用 WI

# c++ - 深度复制对象数组c ++

> ID：13200166
> 
> 赞同：3
> 
> 时间：2012-11-02T17:22:00.910
> 
> 标签：c++, arrays, deep-copy

让我的代码正常运行时遇到问题。它编译并显示我想要的，但是最后它崩溃了。我在想我没有在我的集合类中创建我的 items 数组的深层副本。下面是我的类实现以及我的驱动程序文件。任何帮助将不胜感激。

```
#ifndef COLLECTION_H
#define COLLECTION_H

#include <string>
#include <sstream>
#include <iostream>
using namespace std;

namespace VC {

    /*************************************************************************/
    /* Abstract class Vehicle.
     * This class serves as the superclass for all the concrete vehicles. It
     * provides the abstract method Type() that returns the type of each vehicle.
     */
    class Vehicle {
    private:
        string type;

    protected:
        /* Initializes the vehicle's type. It is protected,
         * so only child classes have access. The class is
         * abstract after all.
         */
        Vehicle(const string& type) { 
            this->type = type;
        } // end Vehicle()

    public:
        /* Returns the vehicle type. */
        string getType() const { 
            return type;
        } // end getType()

        /* No definition. Forces child class to implement, thus making
         * sure child can create a deep copy of itself.
         */
        virtual Vehicle* clone() const = 0;

        /* No definition. Child must implement. */
        virtual string toString() const =0;
    }; // end Vehicle
    /*************************************************************************/

    /* Concrete class Motorcycle.
     * This class defines a 'Motorcycle' type vehicle.
     */
    class Motorcycle : public Vehicle {
    private:
        int horsePowerInCc;

    public:
        // Initializes the horsepowerInCc and sets the type to "Motorcycle".
        Motorcycle(const int horsePowerInCc) :Vehicle("MotorCycle"){ 
            this->horsePowerInCc = horsePowerInCc;

        } // end Motorcycle()

        // Returns the horse power.
        int getHorsePowerInCc() const { 
            return horsePowerInCc;
        } // end getHorsePowerInCc

        // Sets the horse power.
        void setHorsePowerInCc(int horsePowerInCc) { 
            this->horsePowerInCc = horsePowerInCc;
        } // end setHorsePowerInCc

        // Returns a string with the type and CC power as:
        // <horsePowerInC><cc ><type>, i.e., 150cc Motorcycle.
        virtual string toString() const { 
            ostringstream oss;
            oss << horsePowerInCc << "cc " << getType() << "\n";
            return  oss.str();
        } // end toString()

        // Returns a deep copy of itself.
        virtual Motorcycle* clone() const { 
        return new Motorcycle(*this);
        } // end clone()
    }; // end Motorcycle

    /*************************************************************************/

    /* Concrete class Car.
     * This class defines a 'Car' type vehicle.
     */
    class Car : public Vehicle {
    private:
        int cylinders;

    public:
        // Initializes the cylinders with the parameter.
        // Sets the type to "Car".
        Car(const int cylinders) :Vehicle("Car"){ 
            this->cylinders = cylinders;

        } // end Car()

        // Returns the number of cylinders.
        int getCylinders() const { 
            return cylinders;
        } // end getCylinders

        // Sets the number of cylinders.
        void setCylinders(int cylinders) { 
            this->cylinders = cylinders;
        } // end setCylinders

        // Returns a string with the type and #of cylinders as:
        // <cylinders>< cylinder ><type>, i.e., 8 cylinder Car.
        virtual string toString() const { 
            ostringstream oss;
            oss << cylinders << " cylinder " << getType() << "\n";
            return  oss.str();
        } // end toString)

        // Returns a deep copy of itself.
        virtual Car* clone() const { 
            return new Car(*this);
        } // end clone()
    }; // end Car

    /*************************************************************************/

    /* Template class Collection.
     * This class serves as the template for our collection of objects. In
     * this version of the application, we are dealing with Vehicles.
     *
     * The template methods will be defined inline, thus avoiding the need for
     * an external implementation file, or the method implementations at the end
     * of this file.
     *
     * Inline means you simply add your implementation code inside each method
     * below. Also, make sure you turn this into a template right away.
     */

    template <typename T>
    class Collection {
    private:
        T* items[100];
        int numberOfItems;

        // Releases all the allocated memory to the heap.
        void releaseItems() { 
            for(int i = 0; i<100;i++){
                items[i] = NULL;
            }
            numberOfItems = 0;
        } // end releaseItems()

        // Clones all the items.
        void cloneItems(const Collection& cloneCollection) { 
            T* temp[100];

            for(int i = 0; i < 100; i++){
                temp[i] = NULL;
            }

            for(int i = 0; i < cloneCollection.count(); i++){

                temp[i] = cloneCollection.items[i];

            }

            for(int i = 0; i < cloneCollection.count(); i++){

                items[i] = temp[i];

            }

            numberOfItems = cloneCollection.count();

        } // end cloneItems()

    public:
        // Sets each element of the array to NULL, and numberOfItems to 0.
        Collection() {
            for(int i = 0; i<100;i++){
                items[i] = NULL;
            }
            numberOfItems = 0;
        } // end Collection()

        // Makes a deep copy of the parameter collection
        Collection(const Collection& cloneCollection) { 
            numberOfItems = cloneCollection.numberOfItems;
            cloneItems(cloneCollection);

        } // end Collection()

        /* Releases all the allocate memory to the heap. Sets each deleted
         * element to NULL.
         */
        virtual ~Collection() { 
            releaseItems();
        } // end ~Collection()

        /* Makes a clone of the parameter collection.
         */
        Collection operator =(const Collection& assignCollection) {  // end operator =()
            //if (this != &assignCollection) {
            releaseItems();
            numberOfItems = assignCollection.numberOfItems;
            cloneItems(assignCollection);
            return *this;
            //}
        }

        // Returns the numberOfItems in the collection.
        int count() const { 
            return numberOfItems;
        } // end count()

        /* If array is full, gives error message, does not add the object
         * and returns false. If not full, adds the object to the end of 
         * the array, increments numberOfItems and returns true.
         */
        bool add(T* object) { 
            if(numberOfItems == 100){
                cout<< "Array is full";
                return false;
            }else{
                items[numberOfItems] = object;
                numberOfItems++;
                return true;
            }
        } // end add()

        /* Removes the object at the specified index. If index is invalid,
         * gives an error message and returns false. If index is valid, then
         * deletes the object and moves the last element to fill the deleted
         * element, thus avoiding shifting of elements; it then decrements the
         * numberOfItems and returns true.
         */
        bool remove(const int index) { 
            if(index < 0 || index > numberOfItems -1){
                cout<<"Invalid index";
                return false;
            }else{
                for(int i = index; i < numberOfItems; i++){
                    items[i] = items[i+1];
                }
                return true;
            }
        } // end remove()

        /* If index is valid, returns reference to object. If index is invalid,
         * gives error message and returns NULL.
         */
        T* objectAt(const int index) const { 
            if(index < 0 || index > numberOfItems -1){
                cout<<"Invalid index";
                return NULL;
            }else{
                return items[index];
            }

        } // end objectAt()

        /* Returns the formatted collection of items. */
        string toString() const { 
            return "TEST-Collection";
        } // end toString()
    }; // end Collection

    /*************************************************************************/

} // end namespace
#endif 
```

**驱动文件：**

```
#include "collection.h"
#include <iostream>

using namespace std;
using namespace VC;

int main() {
    Collection<Vehicle> vehicles;

    // Let's add a few vehicles to the collection.
    vehicles.add( new Motorcycle(150) );
    vehicles.add( new Car(4) );
    vehicles.add( new Car(6) );
    vehicles.add( new Motorcycle(200) );

    // Create another collection to test copy constructor and =().
    Collection<Vehicle> moreVehicles(vehicles);

    moreVehicles.add( new Car(8) );

//  // Display both collections.
//  // Now, let's display all the vehicles and their type.
    cout << "Original Collection: vehicles"
         << endl
         << "-----------------------------"
         << endl;
    for (int i = 0; i < vehicles.count(); i++) {
        cout << "item[" << i << "] = " << vehicles.objectAt(i)->toString();
    } // end for

    cout << endl << endl;
// Now, let's display all the vehicles and their type.
    cout << "Clone Collection: moreVehicles"
         << endl
         << "------------------------------"
         << endl;
    for (int i = 0; i < moreVehicles.count(); i++) {
        cout << "item[" << i << "] = " << moreVehicles.objectAt(i)->toString();
    } // end for

    cout << endl << endl;

    vehicles = moreVehicles;
    moreVehicles.remove(4);

    // Display both collections.
    // Now, let's display all the vehicles and their type.
    cout << "Assigned Collection: vehicles"
         << endl
         << "-----------------------------"
         << endl;
    for (int i = 0; i < vehicles.count(); i++) {
        cout << "item[" << i << "] = " << vehicles.objectAt(i)->toString();
    } // end for

    cout << endl << endl;

    // Now, let's display all the vehicles and their type.
    cout << "Adjusted Collection: moreVehicles"
         << endl
         << "---------------------------------"
         << endl;
    for (int i = 0; i < moreVehicles.count(); i++) {
        cout << "item[" << i << "] = " << moreVehicles.objectAt(i)->toString();
    } // end for

    cout << endl << endl;
    return (0);

} // end main() 
```

# ruby-on-rails - Safari 6 打破 Rails 收集路线

> ID：13200167
> 
> 赞同：1
> 
> 时间：2012-11-02T17:22:07.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, safari

我的 routes.rb 文件中有以下代码：

```
resources :wbs_nos, except: [:new, :create] do
  collection { get 'wbs_tpr_filtered' }
end

resources :task_plan_requests do
  resources :wbs_nos, only: [:new, :create]

  collection do
    get :auto_complete_for_wbs_number_wbs_number
    get :auto_complete_for_task_plan_request_fabrication_work_order_number
    get :auto_complete_for_task_plan_request_requestor_building
    get :auto_complete_for_task_plan_request_requestor_name
    get :auto_complete_for_task_plan_request_requestor_email
  end
end 
```

在 Chrome 中，当我转到 localhost:3000/wbs_nos/wbs_tpr_filtered 时，请求被正确发送到 WbsNosController 中的 was_tpr_filtered 操作。

在 Safari 6 中，它会将我发送到 WbsNosController 中的 show 操作，并且 rails 给出了错误：

> 找不到 id=wbs_tpr_filtered 的 WbsNo。

当我运行 rake 路线时，我得到以下信息：

```
wbs_tpr_filtered_wbs_nos GET /wbs_nos/wbs_tpr_filtered(.:format)  wbs_nos#wbs_tpr_filtered 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:12:21.627

当“Couldn't find WbsNo with id=wbs_tpr_filtered”是一个有效错误时，没关系 Safari 缓存页面。删除文件夹 Library/Caches/com.apple.Safari 解决了这个问题。

# xuggler - Xuggler 音频直播播放不连续

> ID：13200174
> 
> 赞同：4
> 
> 时间：2012-11-02T17:22:55.143
> 
> 标签：xuggler

我有一份工作，我必须连续截屏并从桌面捕获声音，然后将它们发布为实时视频流。我使用 Wowza Media Server 3.0.3 进行流媒体发布。我还使用 Xuggler 生成图像帧并将它们与声音缓冲区一起放入数据包中。我有以下问题：

我启动我的程序，图像帧和声音包的发布正在进行中。Wowza 控制台通知我，数据包已发布。当我打开媒体播放器（在本例中为 VLC）时，流的视频部分就像一个魅力（我看到从我的桌面连续捕获的图像帧），但音频部分很差。我的意思是，当我开始播放直播时，VLC 会缓冲从我的桌面录制的大约 3 秒长的声音部分，并以更高的速度播放。经过较长时间的休息后，它再次缓冲并播放下一部分。在我的代码中，我不断发送以 MP3 编码的声音 iBuffer 并将它们发布到数据包中，所以我无法理解为什么声音没有像图像帧那样连续播放。

任何人都可以得到我的问题的答案或任何经验吗？

我已经从我的代码中复制了一份，我只是在其中流式传输桌面声音，而不是图像帧。这是片段，我在其中获取声音，并将其发送到编码和发布：

```
while (true)
    {
        byte buffer[] = new byte[line.available()];
        int count = line.read(buffer, 0, buffer.length);
        IBuffer iBuf = IBuffer.make(null, buffer, 0, count);

        //Itt írjuk a stream-be az audioframe-et
        _AudioWriter.encodeFrameToStream(iBuf, buffer, firstTimeStamp);
        try {
            Thread.sleep(100);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

这是我获取 iBuffer 并将其编码为 mp3 的部分。在我将其作为数据包发布后：

```
public void encodeFrameToStream(IBuffer ibuffer, byte[] buffer, long firstTimeStamp) {
    long now = System.currentTimeMillis();
    long timeStamp = (now - firstTimeStamp);

    IAudioSamples outChunk = IAudioSamples.make(ibuffer, 1, IAudioSamples.Format.FMT_S16);
    if (outChunk == null)
    {
        return;
    }
    long numSample = buffer.length / outChunk.getSampleSize();
    outChunk.setComplete(true, numSample, 44100, 1, Format.FMT_S16, timeStamp);

    //System.out.println(outChunk + " =========== " + outChunk.getPts());
    IPacket packet2 = IPacket.make();
    packet2.setStreamIndex(0);
    getCoder2().encodeAudio(packet2, outChunk, 0);
    outChunk.delete();

    if (packet2.isComplete()) {
        //System.out.println("completed");
        getContainer().writePacket(packet2);
        //System.out.println("Size: "+packet2.getSize());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T00:15:41.087

我们必须进行更多调试才能了解所有相关因素。

*   通常当以不同的音高播放音频流时，这意味着输入和输出的采样率不匹配。您当前手动将采样格式设置为*FMT_S16*并将采样率设置为*44.100 Hz*。只要输入已经以这种方式格式化，这将正常工作。

    `IAudioResampler`您可能希望通过在输入和输出之间使用中间值来确保数据包具有正确数量的通道、采样格式和采样率。使用`IMediaWriter`和`IStreamCoder`函数`getChannels()`和`getSampleRate()`作为 的输入`IAudioResampler`。

*   我不熟悉*Wowza Media Server*，但它似乎自己执行某种转码。我无法从您的代码中看出，但您似乎是直接流式传输到 Wowza 而不是使用文件容器。您可以尝试输出到文件，然后查看是否可以播放。这样您就可以检查音频/视频数据是否正确编码。

    如果是这样，问题可能出在Wowza 上。检查它是否对编解码器、样本格式、样本大小、通道、采样率和比特率有任何特定限制。

    如果输出文件无法播放，请尝试仅写入音频流并忽略任何视频。如果确实播放，那么问题在于音频和视频数据的数据包形成。

*   最后，您能否在编写时尝试输出每个视频帧和音频样本的时间戳？通过这种方式，您可以确保所有数据包都按时间顺序整齐排列。如果在视频文件中的某个时间点，这些数据包的顺序错误，则无法正确流式传输和播放文件。

例如，这是一个格式错误的视频文件：

```
0ms video frame  1
0ms audio sample 1
10ms video sample 2
8ms audio frame 2` 
```

# php - 删除 img 标签 src 是一个使用 preg_replace 的 url

> ID：13200177
> 
> 赞同：0
> 
> 时间：2012-11-02T17:23:05.323
> 
> 标签：php, regex, html

嗨，我想删除一个 img 标签，它的 src 是使用 preg_replace 的内容中的 url

前任。

```
 $content = "<center><img src="http://example.net/wp-content/uploads/2012/10/cell-degeneration-contn.jpg" alt="" title="cell-degeneration-contn" width="950" height="272" class="alignnone size-full wp-image-100" /></center><h2>A first-in-class approach to stop & reverse </h2>"; 
```

所以输出将是：

```
 $content="<center></center><h2>A first-in-class approach to stop & reverse </h2>"; 
```

但如果可能的话，最好的输出是：

```
 $content="A first-in-class approach to stop & reverse "; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:30:38.797

[preg_match_all()](http://php.net/manual/en/function.preg-match-all.php)可以在这里工作，但对于 HTML，它不是最有效的。

```
$content = '<center><img src="http://example.net/wp-content/uploads/2012/10/cell-degeneration-contn.jpg" alt="" title="cell-degeneration-contn" width="950" height="272" class="alignnone size-full wp-image-100" /></center><h2>A first-in-class approach to stop & reverse </h2>';

preg_match("/<h2>(.*)<\/h2>/",$content,$matches);
$output = $matches[1];
echo $output; 
```

最简单的方法是使用[strip_tags()](http://php.net/manual/en/function.strip-tags.php)

```
$output = strip_tags($content);
echo $output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:39:09.953

你可以这样做：

```
 $content = "<center><img src='http://example.net/wp-content/uploads/2012/10/cell-degeneration-contn.jpg' alt='' title='cell-degeneration-contn' width='950' height='272' class='alignnone size-full wp-image-100' /></center><h2>A first-in-class approach to stop & reverse </h2>'";
    preg_match("/<h2>(.+)<\/h2>/", $content, $matches);  
    $match = $matches[1];
    echo $match; 
```

# c# - 找到 C# dll 时未找到 C++ dll（并且在我的计算机上工作）

> ID：13200181
> 
> 赞同：0
> 
> 时间：2012-11-02T17:23:18.253
> 
> 标签：c#, c++, windows, visual-studio-2010

在一台干净的计算机（没有 Visual Studio）上，我为其他人（在我的计算机上工作）压缩了 Debug 文件夹，其他人试图启动该程序，但我得到了错误

System.DllNotFoundException：无法加载 DLL 'HookHandler.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）

然后我让他安装 [http://www.microsoft.com/en-us/download/details.aspx?id=8328](http://www.microsoft.com/en-us/download/details.aspx?id=8328)

认为这会有所帮助。任何想法为什么它没有在他的计算机上找到 dll 但在我的计算机上发现它很好？

编辑：我应该注意到 HookHandler.dll 与 exe 位于同一文件夹中。同样，当我运行 exe 并且 HookHandler 在我的文件夹中时，它可以在我的计算机上运行。我用 HookHandler 将其压缩并交给其他人，但它不起作用，我确认 HookHandler 存在于他的文件夹中。

出于某种原因，安装 Visual Studio 解决了这个问题。所以它必须是 HookHandler 依赖的东西，所以我需要尝试 ProcMon 工具或depends.exe 来查看我猜的 HookHandler 依赖于什么。

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:31:10.487

不确定问题是什么，但我建议安装 .Net Framework 4 并试一试。

这是下载链接：[http ://www.microsoft.com/en-us/download/details.aspx?id=17851](http://www.microsoft.com/en-us/download/details.aspx?id=17851)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:36:18.140

我的猜测是 HookHandler.dll 不在您的本地项目中，而 VS 正在从您计算机上的其他地方获取它。如果这是真的，那么您所要做的就是：

在您的项目中（使用 VS），查看 HookHandler.dll 的属性，将“复制本地”设置为 True，重新构建、重新压缩并重新发送。

我过去曾遇到过这个问题（但使用了不同的 DLL），现在解决了这个问题，希望它对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:39:48.613

确保 DLL 在 bin 中。属性 -> 复制本地 -> 始终

你不能指望人们在他们的电脑上会有像 HookHandler.dll 这样晦涩难懂的废话：p

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T20:07:54.227

好吧，这很奇怪。我们使用 Debug 配置构建我们的东西并交付，因为我们需要所有行号和生产中的所有好东西。这些信息值得使用发布版本的任何微小性能改进的好处（加上我们的性能远远超过我们现在需要的方式）。

也就是说，更换 C++ dll、pdf、同类等的 Release 版本解决了这个问题！！！！！！所以它与找不到它们无关，而是使用一些 Visual Studio dll 与它有关，因为它是在调试配置中编译的。

所以基本上任何 C++ dll 都必须在发布模式下编译，而我们的其他项目现在在调试模式下编译，这解决了这个问题。

# jquery - 使用 jQuery 一次加载一个函数？

> ID：13200183
> 
> 赞同：1
> 
> 时间：2012-11-02T17:23:21.063
> 
> 标签：jquery, while-loop

我有一个函数列表，我想一次加载一个。我无法让他们加载一个，然后在加载数据后转到下一个。这是我的代码：

```
$(document).ready(function() {
    //step through the data sets
    var count = 1;
    if (count = 1) {
        loadingAjax('connectConferenceData','connectAttendanceData',count);
    }
    if (count = 2) {
        loadingAjax('connectWorkshopData','cwsData',count);
    }
    if (count = 3) {
        loadingAjax('relayCenterData','rcData',count);
    }
    if (count = 4) {
        loadingAjax('collectionCenterData','ccData',count);
    }
    if (count = 5) {
        loadingAjax('regionalStatsData','rsData',count);
    }
    if (count > 5) {
        $("#statusMsg").html('All tools have been loaded.').fadeIn('slow');
        setTimeout(function() {
            $('#statusMsg').fadeOut();
        }, 10000 );
    }
});

//function to get datasets
function loadingAjax(div_id,action_id,count) {  
    $("#loading").show();
    $("#"+div_id).html('<img src="images/admin_uploading.gif"> Loading data...');  

    $.ajaxSetup ({  
        cache: true  
    }); 

    $.ajax({  
        type: "GET",  
        url: "dashboard_functions.php",  
        data: "actionID="+action_id,  
        success: function(data){  
            $("#"+div_id).html(data).fadeIn();
            count++; 

            if (count != 6) {
                $("#statusMsg").html('<img src="./images/admin_uploading.gif" /> Loading data for tool #'+count+' loading'); 
            }

            $("#loading").hide();
        }  
    });  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:31:31.153

您可以像这样设置一系列回调：

```
//step through the data sets
function DataSetStep(count){
 if (count == 1) {
    loadingAjax('connectConferenceData','connectAttendanceData',count);
 }
 if (count == 2) {
    loadingAjax('connectWorkshopData','cwsData',count);
 }
 if (count == 3) {
    loadingAjax('relayCenterData','rcData',count);
 }
 if (count == 4) {
    loadingAjax('collectionCenterData','ccData',count);
 }
 if (count == 5) {
    loadingAjax('regionalStatsData','rsData',count);
 }
 if (count > 5) {
    $("#statusMsg").html('All tools have been loaded.').fadeIn('slow');
    setTimeout(function() {
        $('#statusMsg').fadeOut();
    }, 10000 );
 }
}

$(document).ready(function() {
 DataSetStep(1);
});

//function to get datasets
function loadingAjax(div_id,action_id,count) {  
 $("#loading").show();
 $("#"+div_id).html('<img src="images/admin_uploading.gif"> Loading data...');  

 $.ajaxSetup ({  
    cache: true  
 }); 

 $.ajax({  
    type: "GET",  
    url: "dashboard_functions.php",  
    data: "actionID="+action_id,  
    success: function(data){  
        $("#"+div_id).html(data).fadeIn();
        count++; 

        if (count != 6) {
            $("#statusMsg").html('<img src="./images/admin_uploading.gif" /> Loading data for tool #'+count+' loading'); 
        }

        $("#loading").hide();
        DataSetStep(count);
    }  
 });  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:26:51.870

In your `$.ajax()` call set `async: false`.

You would then also not need your `count` variable or various `if` statements either.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:27:58.740

$(document).ready(function() { ... 仅在页面加载时执行，并且仅执行第一步。尝试在 ajax 调用的成功处理程序中执行后续步骤

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T17:50:38.413

您也可以递归地执行此操作：

```
$(function () {
    // This is global, so do it once, outside the function
    $.ajaxSetup ({  
        cache: true  
    }); 

    loadingAjax('connectConferenceData','connectAttendanceData',1);

    function loadingAjax(divId, actionId, count) {
        $("#"+div_id).html('<img src="images/admin_uploading.gif"> Loading data...');  
        if (count !== 6) {
            $("#statusMsg").html('<img src="./images/admin_uploading.gif" /> Loading data for tool #'+count+' loading'); 
        }
        $.ajax({  
            type: "GET",  
            url: "dashboard_functions.php",  
            data: "actionID="+action_id,  
            success: function(data){  
                $("#"+div_id).html(data).fadeIn();
                count++;

                if (count === 2) {
                    loadingAjax('connectWorkshopData','cwsData',count);
                }
                if (count === 3) {
                    loadingAjax('relayCenterData','rcData',count);
                }
                if (count === 4) {
                    loadingAjax('collectionCenterData','ccData',count);
                }
                if (count === 5) {
                    loadingAjax('regionalStatsData','rsData',count);
                }
                if (count > 5) {
                    $("#statusMsg").html('All tools have been loaded.').fadeIn('slow');
                    setTimeout(function() {
                        $('#statusMsg').fadeOut();
                    }, 10000 );
                }
                $("#loading").hide();
            }  
        });    
    }
}); 
```

# desire2learn - Desire2Learn 用户密钥更新

> ID：13200190
> 
> 赞同：0
> 
> 时间：2012-11-02T17:23:40.030
> 
> 标签：desire2learn

我的问题是，是否有可能/方式在 API 密钥过期之前更新它们？

因此，假设 API 密钥仅在 30 天内有效，并且假设密钥将在 11 月 30 日到期。所以我的问题是我们可以在 11 月 30 日之前更新 API 密钥吗？还是我们必须等到 11 月 30 日才能更新密钥。如果是，如何？

另外，DOME 变量 d2l.Security.API.TokenTimeout 的空值是什么意思？它是否计算到某个默认值。密钥过期前几天？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:45:01.610

当用户 ID 或用户密钥不再有效时（由于超时或由于用户显式重置其密钥或由于密码更改），下一个 API 调用将[失败，并根据本文档显示 403 代码](http://docs.valence.desire2learn.com/basic/apicall.html#disposition-and-error-handling)：

我们建议您使用其中一个也有助于解释这种情况的库：

请参阅[Java 解释](http://docs.valence.desire2learn.com/externaldocs/javadocs/javaclientlib/com/d2lvalence/idkeyauth/ID2LUserContext.html#interpretResult%28int,%20java.lang.String%29)结果：

该 Dome 变量控制这些用户 ID 和用户密钥到期前的时间。某些版本设置为 30 天，而在其他版本中设置为“无限期”(-1)。需要通过 Desire2Learn 的帮助台请求此更改。

您可能还想[查看管理页面](http://docs.valence.desire2learn.com/admin/manage.html#dome-settings)

更新：根据下面的屏幕截图，管理员在用户管理工具中明确清除应用程序密钥 ![显示撤消应用程序访问权限的上下文菜单](../Images/fb367db195b8432ed90b2b908832e7a5.png)

# c++ - 使用 rapidjson 进行字符串化

> ID：13200191
> 
> 赞同：7
> 
> 时间：2012-11-02T17:23:42.697
> 
> 标签：c++, json, rapidjson

我正在使用 socket.io-clientpp，[https://github.com/ebshimizu/socket.io-clientpp](https://github.com/ebshimizu/socket.io-clientpp)，它使用 rapidjson。

当收到一个事件时，我的函数被调用：

```
void data_published(socketio::socketio_events&, const Value& v) { 
```

值是一个 rapidjson 值。我的问题是我看到将其字符串化的唯一方法是使用 Document 类。但是要将值放入文档中，所有函数都采用非常量引用，例如：

```
GenericValue& AddMember(const Ch* name, GenericValue& value, Allocator& allocator) { 
```

我习惯了 jsonpp，我想我错过了一些愚蠢的东西。问题很简单：如何对 const rapidjson 值进行字符串化？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-14T07:30:12.160

I am the author of rapidjson. Thank you for your question. I recorded this to issue in [http://code.google.com/p/rapidjson/issues/detail?id=45](http://code.google.com/p/rapidjson/issues/detail?id=45)

It is due to that GenericValue::Accept() is non-const.

As GenericValue::Accept() just generates events for handler, it does not need to modify the value and its decedents. So it should change from:

```
template <typename Handler>
GenericValue& Accept(Handler& handler) 
```

to

```
template <typename Handler>
const GenericValue& Accept(Handler& handler) const 
```

You may patch this to your rapidjson/document.h or download the latest version (trunk or 0.1x branch).

After this change, you can stringfy a const Value as in tutorial:

```
const Value& v = ...;
FileStream f(stdout);
PrettyWriter<FileStream> writer(f);
v.Accept(writer); 
```

Or to a string buffer:

```
const Value& v = ...;
StringBuffer buffer;
PrettyWriter<StringBuffer> writer(buffer);
v.Accept(writer);
const char* json = buffer.GetString(); 
```

# perl - 对输入列表进行排序

> ID：13200196
> 
> 赞同：0
> 
> 时间：2012-11-02T17:24:07.353
> 
> 标签：perl

我有一个跟踪指标的系统提供的输入列表。我需要对其进行排序以删除低于给定阈值的使用数据，我真的不知道如何处理它。提供给我的数据应该类似于：

```
ID                    Usage                  Estimated Cost
------------------------------------------------------------------
University Name       260000                 1600.00 
```

第一个字段是名称，接下来的两个字段是整数值。我正在考虑尝试创建列表列表，但可能有更简单的方法。我将如何删除仅获取 3 个字段并按使用值对它们进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:44:28.427

列表列表非常简单。

```
my @list;
while(<>) {
    push @list, [$_,(split(/\s+/,$_,3))[1]];
}
foreach my $out (sort {$a->[1] <=> $b->[1]} @list) {
    print $out->[0];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:49:40.877

您可以记住整行，因此您不必再次对其进行格式化。另外，只记住并排序使用值超过阈值的行：

```
perl -ane 'BEGIN { $threshold = 2000 }              # Insert your value here.
           next if 1 .. 2 or $F[-2] < $threshold;   # Skip the header and filtered lines.
           push @A, [ $F[-2], $_ ];                 # Remember the usage and the whole line.
           }{                                       # At the end...
           print map $_->[1],
                 sort { $a->[0] <=> $b->[0] } @A' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T17:44:51.437

标准方法是创建一个哈希列表。在您的情况下，您会将输入文件转换为：

```
my @records = (
  { ID => "University Name", Usage => 260000, EstCost => 1600.00 },
  { ID => "...", Usage => 12345, EstCost => 9999.99 },
  ...

); 
```

然后使用如下代码对它们进行排序（例如按使用情况）：

```
my @sorted = sort { $a->{Usage} <=> $b->{Usage} } @records; 
```

然后使用以下代码从排序记录创建报告：

```
for my $r (@sorted) {
  print "ID: ", $r->{ID}, ..., "\n";
} 
```

如果你愿意，你可以走捷径，但是将每一行转换成一个哈希有几个优点：

*   它使您的代码更易于阅读、理解和修改——也就是说，很明显`sort { $a->{Usage} <=> $b->{Usage} ...`按用法排序
*   还有很多其他库对哈希列表进行操作，即有一些库可以将哈希列表转换为 CSV 文件或 HTML 表或纯文本表或将行插入数据库等。

# http - 眩晕 229 无法在 Windows 8 上运行

> ID：13200198
> 
> 赞同：1
> 
> 时间：2012-11-02T17:24:28.983
> 
> 标签：http, localhost

今天我在 Windows 8 上安装了 Vertrigo 229，但它不工作它显示消息

“Apache HTTP 服务器无法正常工作。请检查其他应用程序是否使用服务器端口（通常为 80）并终止它们。此外，请检查防火墙设置和配置文件的正确性。”

它甚至不打开本地主机我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T00:16:35.270

尝试以管理员身份运行 Vertrigo。然后，您将能够通过 8080 端口 (127.0.0.1:8080) 访问 localhost。要更改该更改，请在 c:\program files\vertrigo serv\apache\conf\httpd.conf 中编辑以下行（确保以管理员身份运行文本编辑器）：

听8080

至

听 80

现在您应该可以访问本地主机了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T15:40:04.967

如果以管理员身份运行 Vertrigo 不起作用，请仔细检查您的 Apache 配置。

将我的 Apache 设置转移到新计算机后，我遇到了这个问题，问题出在单个 VirtualHost 指令中，其中 DocumentRoot 指向了我的新计算机上不存在的目录。删除这个 VirtualHost，然后重新启动 Vertrigo 解决了这个问题。

```
<VirtualHost *> 
    ServerName somesite.dev
    DocumentRoot "c:/www/non/existent/directory"
</VirtualHost> 
```

# file - 从文件中调用变量

> ID：13200199
> 
> 赞同：1
> 
> 时间：2012-11-02T17:24:29.013
> 
> 标签：file, variables, store, cat

我需要检索已存储在文件中的变量。我正在捕获用于安装 prostgress 和其他一些程序的变量。这是我用来在安装脚本开头创建 variables.sh 文件的脚本。

#!/bin/bash # 初始化

函数暂停（）{读取-p“$*”}

echo " 输入数据库用户名 " echo " "

```
read dbuser

echo " "
echo " Enter name of database  "
echo " "

read dbname

echo " "
echo " Enter db password "
echo "  "

read pws

echo " "
echo " Enter Port Number "
echo " "

read port

echo " "
echo " Enter URL i.e. my.hospital.com:8191 or 78.12.156.234:8191 "
echo " "

read url

cat > variables.dat << EOF

dbuser=$dbuser
dbname=$dbname
pws=$pws
port=$port
url=$url

EOF

if [ -f variables.sh ];

   then 
     echo " Data stored ready for next phase "

   else 

     echo " Data not stored - exit program start again "
     echo " "
     pause " Press [CTL] [Z] to exit the program now "

fi

chmod +x variables.sh

exit 
```

在执行我编写的其他模块期间。我希望能够打开或调用变量文件并将变量传递给执行脚本。所以我的 pac-install.sh 将包含 variables.sh 文件并将其内容传递给 pac-install.sh 脚本，并能够使用 dbuser=$dbuser。我希望这更具体。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:29:54.710

也许 bash **source**命令是您正在寻找的？

如果文件*variables.sh*包含以下行

```
dbuser="the user"
dbname="the name"
... 
```

然后你可以执行

```
source variables.sh 
```

从 bash shell 脚本读取并执行该文件中的命令。这会将值分配给 shell 变量`$dbuser`等`$dbname`。

请注意，如果值包含空格，则应将它们括在引号中。

**示例**如何从文件中读回变量：

```
#!/bin/bash

source variables.sh
echo "dbuser=$dbuser"
echo "dbname=$dbname" 
```

# expressionengine - 跨站点的 MSM 成员管理

> ID：13200200
> 
> 赞同：4
> 
> 时间：2012-11-02T17:24:30.123
> 
> 标签：expressionengine

我有一个较大的站点，它使用 MSM 分成子域。这些站点中的每一个都有自己的一组员工来管理该部分。我的想法是创建成员组以反映这些员工组，并为每个子域分配适当的访问权限。每个子域都有自己的 CP 访问管理位置，以使它们保持简单。

所以：blog.domain.com 在成员组中有一个名为 Bloggers 的组，他们将在 blogadmin.domain.com 登录

管理员帐户可以在 MSM 下拉菜单下位于 admin.domain.com 的 CP 上的站点之间切换。他们拥有分配给每个站点所需的所有访问权限。博主可以尝试登录 admin.domain.com，但被拒绝并被告知他们没有权限。他们只能登录 blogadmin.alamode.com，CP 只向他们显示分配给他们的 blog.domain.com 站点功能，而 MSM 下拉列表中不显示其他站点。

当我这样做时，我创建了一个在主站点中没有访问权限的用户，只有我需要的子域。当我访问任一站点并尝试列出成员时，问题就出现了。我收到一条错误消息，指出我缺少 ID。

查看 EE 数据库，我看到成员组有一个用于“group_id”和“site_id”的数据库字段，但成员表只有“member_id”和“group_id”。

如何创建成员而不收到错误？？？？这让我觉得自己像一个完整的新手。

我安装了最新的 EE 和 MSM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:41:22.377

如果您使用的是 2.5.3 版，您可能遇到了[这个开放的错误，其中成员组未添加到 MSM 安装中的所有站点](http://expressionengine.com/bug_tracker/bug/18245)。您可以在那里下载一个修补程序。

# ios - iOS Retina 4" 启动图；多个目标坚持使用同一张图

> ID：13200202
> 
> 赞同：1
> 
> 时间：2012-11-02T17:24:33.443
> 
> 标签：ios, xcode4.5

这不是一个非常关键的问题，但在我的项目中，我为不同版本的应用程序设置了多个目标。我可以添加 4" 视网膜启动图像“Default-568h@2x.png”，但我不能像其他图像一样为每个目标指定不同版本；在一个目标中更改它会改变它（错误地）在其他目标中。似乎是一个 xcode 4.5 错误，但想问一下以防我错过了什么。事实上，解决方法是在我切换目标时在每次构建之前简单地更改图像。我担心的是那个这些天，我会忘记这样做;-) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:18:58.630

虽然我还没有验证您描述的错误，但这似乎很简单，可以解决。iOS 所做的只是在启动时在您的应用程序包中查找 Default.png （等）。

如果你不能让 Target Info 窗格做你想做的事，你可以通过在Xcode 的其余部分完成*后替换 Default-568h@2x.png 来覆盖它。*

这是我的建议。您需要**为每个目标**执行此操作。

1.  将您的 Default-568h@2x.png 图像移动到子目录。
2.  **在末尾**为每个目标添加一个 Copy Files 构建阶段。
3.  将构建阶段设置为复制到**资源**目录。
4.  将适当的 Default-568h@2x.png 拖入构建阶段。

试试这个，看看它是否能满足你的需要。如果它有效但给你一个构建警告，你可以使用一个脚本阶段，就像这样：

```
cp ${PROJECT_DIR}/your-subdirectory-here/Default-568h@2x.png \
   ${CODESIGNING_FOLDER_PATH}/Default-568h@2x.png 
```

脚本阶段的好处是可以指定目标文件的名称；你真的不需要把你的图像放在子目录中。

也就是说，除非您对脚本编写感到满意，否则我建议您先尝试**复制阶段**。如果它无论如何都不起作用，那么玩你不喜欢的东西是没有意义的。

# ios - Weird error when enabling guard malloc

> ID：13200205
> 
> 赞同：9
> 
> 时间：2012-11-02T17:24:43.557
> 
> 标签：ios, xcode, cocos2d-iphone

So I try to debug an `EXC_BAD_ACCESS` error by editing my scheme, enabling all the different checks.

But the damn compiler gives me this error:

```
dyld: could not load inserted library '/usr/lib/libgmalloc.dylib' because image not found 
```

I've googled around, someone solved by installing some kind of OS X combo installer (OS X 10.7.3), but I'm already running a newer version.

My Xcode is up to date so what is going wrong here?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-18T22:27:21.460

根据官方文档：[https ://developer.apple.com/library/mac/documentation/performance/Conceptual/ManagingMemory/Articles/MallocDebug.html](https://developer.apple.com/library/mac/documentation/performance/Conceptual/ManagingMemory/Articles/MallocDebug.html)

> 要使用 Guard Malloc 进行调试，请将您的项目配置为在 Xcode 的方案编辑器中使用 Guard Malloc 运行。您可以将此选项用于在模拟器中运行的 Mac 应用程序和 iOS 应用程序。

所以没有设备支持。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-02-08T12:26:13.220

![在此处输入图像描述](../Images/54f6e677c324ede995ca9811fc783122.png)

我已经通过执行以下功能解决了这个问题，它工作正常

1.首先进入项目中的Manage Schemes。

2.之后点击编辑按钮。

3.禁用“启用保护Malloc”。

4.之后点击确定按钮。

之后它工作正常

请检查上面的图片

# jquery - I am fetching the collection from server once the save is complete. But as fetch is async the view is rendering before fetch is complete

> ID：13200207
> 
> 赞同：0
> 
> 时间：2012-11-02T17:25:01.713
> 
> 标签：jquery, backbone.js

I am calling a fetch on a collection and inside its success methods fetching another collection. Once its done I am adding both the collections and rendering to the view. After I save a new item in the view, it saves in the db and after save is complete I am calling the methods that does fetching. All I want to do is to render the updated collection which now should include a newly crated model. But, When I debug step by step using chrome debugger, it gets the updated collection from the server otherwise the collection is not getting updated. I assume it is rendering before fetching. Page refresh is working just fine. Can you suggest anything I can do to change or delay rendering until fetch is complete?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:08:48.837

根据你给我的信息，你应该可以做这样的事情。

```
var promises = [];
_.each(models, function (model) {
    var destroying = model.destroy();
    promises.push(destroying);
});

$.when.apply(null, promises).done(this.displayAllRows); 
```

您可能必须修改它，但这应该让您了解如何销毁所有模型然后渲染行。

# php - How to add extra data at the end of downloading content in PHP

> ID：13200210
> 
> 赞同：0
> 
> 时间：2012-11-02T17:25:11.570
> 
> 标签：php

I am developing a security for my downloadable contents simply securing my download content like this.

```
<?php
$file = 'monkey.gif';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}
?> 
```

Now I simply want to add 100 extra bytes (my custom details about that download file as per each download)

I want some way to add these 100 bytes after readfile($file); so downloaded file will have this extra information in it.

```
something like 
readfile($file) + myBytes() 
```

I am new to PHP so please help me

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:25:13.153

将多余的字节存储在文件、变量、数据库等中，并在读取文件功能后回显它

```
$file = 'monkey.gif';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    readfile("extra_filename.ext");
    /* 
    //or use this
    $extra_bytes = "store extra bytes here";
    echo $extra_bytes;
    */
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:35:41.773

如果您只处理图像，我建议您使用[`steganography`](http://en.wikipedia.org/wiki/Steganography)而不是将字节粘贴到文件末尾。谷歌搜索“php 隐写库”出现了一些点击：

*   [斯蒂格](http://steghide.sourceforge.net/)
*   [phpstegano](http://code.google.com/p/phpstegano/)

# ios - Cocos2d: how can I find the center point of a CCSprite?

> ID：13200211
> 
> 赞同：0
> 
> 时间：2012-11-02T17:25:16.427
> 
> 标签：ios, math, cocos2d-iphone, sprite

how can I find the center point of a CCSprite?

My pseudocode is:

```
A get sprite bounding box
B compute center point of the sprite
C move center point relative to sprite position and anchor point (this will be the center point of the sprite) 
```

And my pseudosolution is so far like this:

A [sprite boundingbox] B [How to find the Center Coordinate of Rectangle?](https://stackoverflow.com/questions/9734821/how-to-find-the-center-coordinate-of-rectangle) C I don't know :)

Any suggestion?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T21:00:44.667

精灵的中心点：

```
sprite.position; 
```

这是假设 anchorPoint 是默认值，即 0.5,0.5，强烈建议不要更改它，因为它会让您处于您现在所处的这种情况。

无需更改精灵的锚点，而是将精灵作为子对象添加到 CCNode 对象，并将精灵从 CCNode 偏移。从那时起，通过更改节点的位置属性来移动或重新定位精灵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T21:56:42.747

```
CGPoint spriteCenter = CGPointApplyAffineTransform(ccp(sprite.contentSize.width/2, sprite.contentSize.height/2),
                                                   sprite.nodeToParentTransform); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:57:23.487

默认情况下，任何精灵的锚点都是它的中心点，只需编写 mySprite.position 即可根据 CGPoint 给出中心点。您可以使用 mySprite.position.x 和 mySprite.position.y 找出 x 和 y 坐标。您还可以使用代码将任何精灵的锚点从其中心移动到任何所需的点

```
mySprite.setAnchorPoint=ccp(0,0);// left down corner as anchor point here 
```

您可以获取并打印任何精灵的中心点

```
NSLog("x=%d  ,y=%d",mySprite.position.x,mySprite.position.y); 
```

# jquery - preload all content

> ID：13200214
> 
> 赞同：1
> 
> 时间：2012-11-02T17:25:25.723
> 
> 标签：jquery, html, video, load

I have a page that I display a number of images and video in a type of slideshow, however I want to determine if all content on the page has currently loaded before I start. Does

$(window).load()

Check to see if all content, including video has been loaded?

cheers thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:31:29.883

`$(window).load()`检查页面是否已完全加载，包括所有图像。根据[jQuery 网站](http://api.jquery.com/load-event/)。

> 示例：当页面完全加载（包括图形）时运行函数。`$(window).load(function () { // run code });`

基本上`$(document).ready()`检查 HTML 文档是否已完全加载和解析，`$(window).load()`将等到所有资源都被请求并（如果找到）加载到网页中，这包括所有图像。

如果您想在视频加载后做某事，您可以使用`$(window).load()`，但我建议使用回调函数。如果您使用的是 YouTube、Vimeo 或 Brightcove 之类的 API，那么我建议您使用他们的库的回调而不是使用`$(window).load()`，这是因为如果您从远程服务器获取视频数据，那么 jQuery 就没有办法（客户端）固有地知道视频是否已完成流式传输。然而，jQuery 会知道连接到远程源的脚本是否已加载。

# .net - SQLite .Net 3.5 Provider returns all DataColumn(s) as System.Object

> ID：13200216
> 
> 赞同：1
> 
> 时间：2012-11-02T17:25:34.283
> 
> 标签：.net, sqlite

I have a method that takes an SQL string and returns a DataTable object from a SQLite data base. This works just fine, but when I look at the DataColumns in the DataTable the DataType returned is always "System.Object". How do I get it to return the correlating DataType that matches up with SQLite (ex. VARCHAR2 = System.String, BOOL = System.Boolean, ....). Below is the code I have for creating the DataTable. Is there some addition step that I can get without having to hard code the appropriate type cast?

```
public DataTable                GetDataTable
(
string sql
)
{
    DataTable dt = new DataTable();
    try
    {
        openConnection();
        SQLiteCommand mycommand = new SQLiteCommand(m_cnn);
        mycommand.CommandText = sql;
        SQLiteDataReader reader = mycommand.ExecuteReader();
        dt.Load(reader);
        reader.Close();
        closeConnection();
    }
    catch (Exception e)
    {
        throw new DatabaseException(DatabaseException.DatabaseExceptionTypes.GetDataTable,e);
    }
    return dt;
    enter code here 
```

# ms-access - Access control properties can set with True/False, but not with Boolean variable?

> ID：13200218
> 
> 赞同：1
> 
> 时间：2012-11-02T17:25:34.330
> 
> 标签：ms-access, vba

In my Access database I have a global variable (`Global allowEditing as Boolean`) defined in a module (Main). I set this variable, then I want to use it later at the form level to disable some buttons. I'm having trouble with this.

```
For Each ctl In Me.Controls
    ctl.Enabled = False            'Works for True or False            
    ctl.Enabled = allowEditing     'Throws error               
  Next 
```

The error thrown is:

> Run-time error '438': Object doesn't support this property or method.

Whats happening here and how can I use the boolean value?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:43:20.583

当您尝试设置不存在的属性（如为标签控件启用）时，会发出错误 438。

尝试这个

```
For Each ctl In Me.Controls
  If TypeOf ctl Is TextBox Then
    ctl.Enabled = False            'Works for True or False
    ctl.Enabled = allowEditing     'Throws error
  End If
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:17:55.947

每个控件都有一个`ControlType`属性。您可以利用该属性仅禁用您从支持该`Enabled`属性的控件中选择的那些。此过程将设置`Enabled`复选框、组合、列表框和文本框的属性。

```
For Each ctl In Me.Controls
    With ctl
        Select Case .ControlType
        Case acCheckBox, acComboBox, acListBox, acTextBox
            .Enabled = allowEditing
        Case Else
            ' pass
        End Select
    End With
Next 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T17:28:21.050

听起来像一个范围问题。如果你想在多个表单之间全局使用这个布尔值，我建议创建一个 Access 表来保存全局状态变量。只需对表运行查询以获取值。

# iphone - How to change keyboard orientation in ios6

> ID：13200220
> 
> 赞同：0
> 
> 时间：2012-11-02T17:25:36.800
> 
> 标签：iphone, ipad, keyboard, ios6

I have a problem. I am developing a game like ludo. In this i have to create text field, for all players participating in game. These players may be in all directions of iPad. And for filling answer in this text field user can use keyboard of iPad. But problem is that I am unable to open keyboard form all sides of iPad.

I am using-

```
[[UIApplication sharedApplication] setStatusBarOrientation:toInterfaceOrientation animated:YES]; 
```

for changing orientation of keyboard. It is working in lower ios versions. But in ios6 it is not working properly. Any help will be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:55:29.767

永远不要总是返回 YES

```
-(BOOL)shouldAutorotate
{
   return YES;
} 
```

在 AppDelegate 中编写代码

```
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"_rotation"]; 
```

并像这样更改上述方法

```
-(BOOL)shouldAutorotate
 {
    return [[NSUserDefaults standardUserDefaults] boolForKey:@"_rotation"];
 } 
```

现在您要在应用程序中更改方向。将 _rotation 的上述标志设置为 NO 并在调用 statusBarOrientation 的方法后再次将其设置为 YES。这是因为 statusBarOrientation 方法只有在 shouldAutorotate 方法返回 NO 时才会起作用。

```
[[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"_rotation"];
[[UIApplication sharedApplication] setStatusBarOrientation:toInterfaceOrientation animated:YES];
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"_rotation"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:20:07.097

你写过ios 6的定位方法吗？并且您是否允许 .info plist 文件中的所有方向？

如果没有，那么它在这里写下来..

```
-(BOOL)shouldAutorotate
{
   return YES;
}
-(NSInteger)supportedInterfaceOrientations
{
   return UIInterfaceOrientationMaskAll;
} 
```

然后尝试定位您的设备并让我知道它是否工作......！

快乐编码！

# jquery - 如何停止 使 jquery 模型框无效？

> ID：13200222
> 
> 赞同：0
> 
> 时间：2012-11-02T17:25:41.800
> 
> 标签：jquery, hyperlink, modal-dialog

我有一个弹出框，提示来自`<a>`. 在里面我想把有链接的内容放在`<a>`里面。一旦我放入另一个`<a href>`，就会打破整个盒子，所有隐藏的内容都会暴露出来，从而破坏我的页面。

```
<span class="modalboxContent">
    <div class="links_box">
        <div class="link_title_holder">
            <div class="link_title">
                <a href="/index.php/general/watch">
                    <span class="red">WATCH</span> Videos on topics you care about.
                </a>
            </div>
            <div class="link_title">
                <a href="/index.php/general/read">
                    <span class="red">READ</span> Informational booklets and handouts.
                </a>
            </div>
            <div class="link_title">
                <a href="/index.php/general/link">
                    <span class="red">LINK</span> Find additional online resources
                </a>
            </div>
        </div>
    </div>
</span> 
```

提前感谢，如果您需要查看任何其他代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:56:25.417

**编辑**将 .on() 处理程序更改为 .live() 处理程序以使用动态生成的元素（现在应该工作）

[**.on() 小提琴**](http://jsfiddle.net/videsignz/wM4BG/3/)
[**.live() 小提琴**](http://jsfiddle.net/videsignz/wM4BG/4/)

**HTML**样式它与悬停状态等

```
 <span id="clickme" class="simulatedlink" >Click Me!</span> 
```

**jQuery**

```
 $('#clickme').live('click', function(){ window.location.href = 'http://www.videsignz.com/'; }); 
```

# mysql - 用于搜索最长公共前缀的 SQL 查询

> ID：13200223
> 
> 赞同：0
> 
> 时间：2012-11-02T17:25:48.887
> 
> 标签：mysql, search, prefix

在我的数据库中，我有一个带有 VARCHAR(255) 列 PRODNAME 的表 PRODUCT。在该列中，我存储了我所有的产品名称。

现在我必须实现一个简单的搜索引擎来查看该列。我想使用 LIKE 语句作为精确匹配 == 对字符串的限制过于严格，但我只想匹配 PRODNAME 列文本内的前缀。怎么做？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:28:42.387

您可以使用通配符（百分号），即。

`SELECT * FROM PRODUCT WHERE PRODNAME LIKE 'prefix%'`

要搜索所有子字符串，请使用：

`SELECT * FROM PRODUCT WHERE PRODNAME LIKE '%substring%'`

或后缀：

`SELECT * FROM PRODUCT WHERE PRODNAME LIKE '%suffix'`

# c# - Crystal 报告参数不正确 C#

> ID：13200234
> 
> 赞同：0
> 
> 时间：2012-11-02T17:26:33.587
> 
> 标签：c#, crystal-reports, crystal-reports-xi

我有一个包含两个参数的报告：ponumber 和receiptno。我正在尝试从通过 URL 传入参数值的 C# 页面调用报告。当我调用报告时，我收到一个错误“参数不正确”，但无法弄清楚原因。我根据网上查到的，做了各种代码修改，因为一开始Report Viewer说没有参数，所以这个方法好像*更好*，但是不行。

我的代码：

```
string ponumber =  Request.QueryString["ponumber"].ToString();
string receiptno = Request.QueryString["receiptno"].ToString();

    // Put Away Report

    CrystalReportSource CrystalReportSource1 = new CrystalReportSource();
    CrystalReportViewer CrystalReportViewer1 = new CrystalReportViewer();

    ParameterFields paramFields1 = new ParameterFields();
    ParameterFields paramFields2 = new ParameterFields();
    ParameterField paramField1 = new ParameterField();
    ParameterField paramField2 = new ParameterField();
    ParameterDiscreteValue paramDiscreteValue1 = new ParameterDiscreteValue();
    ParameterDiscreteValue paramDiscreteValue2 = new ParameterDiscreteValue();

    paramField1.Name = "@ponumber";
    paramDiscreteValue1.Value = ponumber;
    paramField1.CurrentValues.Add(paramDiscreteValue1);
    paramField1.HasCurrentValue = true;
    paramFields1.Add(paramField1);

    paramField2.Name = "@receiptno";
    paramDiscreteValue2 = new ParameterDiscreteValue();  // <-- This line is added
    paramDiscreteValue2.Value = receiptno;
    paramField2.CurrentValues.Add(paramDiscreteValue2);
    paramField2.HasCurrentValue = true;
    paramFields2.Add(paramField2);

    CrystalReportViewer1.ParameterFieldInfo = paramFields1;
    CrystalReportViewer1.ParameterFieldInfo = paramFields2;

    TableLogOnInfo logOnInfo = new TableLogOnInfo();

    logOnInfo.ConnectionInfo.ServerName =   ConfigurationManager.AppSettings["WarehouseReportServerName"];
    logOnInfo.ConnectionInfo.DatabaseName = ConfigurationManager.AppSettings["WarehouseReportDatabaseName"];
    logOnInfo.ConnectionInfo.UserID = ConfigurationManager.AppSettings["WarehouseReportUserID"];
    logOnInfo.ConnectionInfo.Password = ConfigurationManager.AppSettings["WarehouseReportPassword"];

    TableLogOnInfos infos = new TableLogOnInfos();
    infos.Add(logOnInfo);
    CrystalReportViewer1.LogOnInfo = infos;

    maindiv.Controls.Add(CrystalReportSource1);
    maindiv.Controls.Add(CrystalReportViewer1);
    CrystalReportViewer1.ReportSource = CrystalReportSource1;
    CrystalReportViewer1.EnableParameterPrompt = false;
    CrystalReportSource1.Report.FileName = "Report3.rpt";
    CrystalReportSource1.EnableCaching = false;
    CrystalReportViewer1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:43:15.793

我不熟悉 Crystal Reports，但我突然想到了一些事情，即这里：

```
 CrystalReportViewer1.ParameterFieldInfo = paramFields1;
    CrystalReportViewer1.ParameterFieldInfo = paramFields2; 
```

您正在覆盖第二行的 ParameterFieldInfo 集合，因此实际上`paramFields1`永远不会发送到报告中。相反，我认为您想*添加*到集合中。我已经修改了您的代码来执行此操作（并删除了不必要的行）：

```
 string ponumber = Request.QueryString["ponumber"].ToString();
    string receiptno = Request.QueryString["receiptno"].ToString();

    // Put Away Report

    CrystalReportSource CrystalReportSource1 = new CrystalReportSource();
    CrystalReportViewer CrystalReportViewer1 = new CrystalReportViewer();

    ParameterField paramField1 = new ParameterField();
    ParameterField paramField2 = new ParameterField();
    ParameterDiscreteValue paramDiscreteValue1 = new ParameterDiscreteValue();
    ParameterDiscreteValue paramDiscreteValue2 = new ParameterDiscreteValue();

    paramField1.Name = "@ponumber";
    paramDiscreteValue1.Value = ponumber;
    paramField1.CurrentValues.Add(paramDiscreteValue1);
    paramField1.HasCurrentValue = true;

    paramField2.Name = "@receiptno";
    paramDiscreteValue2.Value = receiptno;
    paramField2.CurrentValues.Add(paramDiscreteValue2);
    paramField2.HasCurrentValue = true;

    CrystalReportViewer1.ParameterFieldInfo.Add(paramField1);
    CrystalReportViewer1.ParameterFieldInfo.Add(paramField2);

    TableLogOnInfo logOnInfo = new TableLogOnInfo();

    logOnInfo.ConnectionInfo.ServerName = ConfigurationManager.AppSettings["WarehouseReportServerName"];
    logOnInfo.ConnectionInfo.DatabaseName = ConfigurationManager.AppSettings["WarehouseReportDatabaseName"];
    logOnInfo.ConnectionInfo.UserID = ConfigurationManager.AppSettings["WarehouseReportUserID"];
    logOnInfo.ConnectionInfo.Password = ConfigurationManager.AppSettings["WarehouseReportPassword"];

    TableLogOnInfos infos = new TableLogOnInfos();
    infos.Add(logOnInfo);
    CrystalReportViewer1.LogOnInfo = infos;

    maindiv.Controls.Add(CrystalReportSource1);
    maindiv.Controls.Add(CrystalReportViewer1);
    CrystalReportViewer1.ReportSource = CrystalReportSource1;
    CrystalReportViewer1.EnableParameterPrompt = false;
    CrystalReportSource1.Report.FileName = "Report3.rpt";
    CrystalReportSource1.EnableCaching = false;
    CrystalReportViewer1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:22:41.997

我在 SO 上找到了另一个答案，让我克服了困难。我将 13 行代码替换为：

```
CrystalReportSource1.ReportDocument.SetParameterValue(0, ponumber);
CrystalReportSource1.ReportDocument.SetParameterValue(1, receiptno); 
```

[将值传递给 Crystal 报表](https://stackoverflow.com/questions/10622498/passing-values-to-a-crystal-report)

而不是手动构建集合，看起来源有不同的方法来设置参数值。我怀疑我的第一次尝试是动态创建参数。

# google-apps-script - Ui Interaction - Update Textboxes with ScriptDb Values

> ID：13200237
> 
> 赞同：2
> 
> 时间：2012-11-02T17:26:36.210
> 
> 标签：google-apps-script

I'm trying to load values retrieved from ScriptDb into an interface application developed within an interface built with GUI Builder. I've loaded the interface via:

```
var app = UiApp.createApplication();
app.add(app.loadComponent("ScriptDBUi")) 
```

Now that it's loaded I would like to load values into text boxes to display ScriptDb values, however when I try to use `setValue` or `setText`, I'm notified that properties can't be changed or modified.

Can you point me in the right direction to be able to interact with UI elements?

* * *

Here's some additional code:

```
function ReadScriptDb() {
var DB = ScriptDb.getMyDb();
var Ob = DB.query({Number: "0002"}).next();
var Ui = doGet()
var TextBox = Ui.getElementById("Project")
TextBox.setText(Ob.Project)
}

function doGet() {
  var app = UiApp.createApplication();
  app.add(app.loadComponent("ScriptDBUi"));
  return app;
} 
```

I've then published this simple script as a Web App so I can test the Ui. After publishing i'll get 1 of 2 things depending on my changes: 1 - The text block doesn't update with the value returned (..i've debugged to insure that Ob.Project is returning a string value), or I've been prompted that i cant assign or modify a value.

Thanks for any insights you can offer.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T13:59:07.490

感谢阿伦的帮助。最后，我不了解代码正在处理的顺序。这就是它最终所做的。基本上（..我相当愚蠢）我没有调用 ReadScriptDb，因为我不明白 doGet() 是我的应用程序的入口点。我将“应用程序”传递给我的 ReadScriptDb 函数，然后再次返回到 doGet，一切正常。谢谢你指路。

```
function ReadScriptDb(app) {
var DB = ScriptDb.getMyDb();
var Ob = DB.query({Number: "0002"}).next();
var Project = Ob.Project;
var TextBox = app.getElementById("Project");
TextBox.setText(Project);
return app;
}

function doGet() {
  var app = UiApp.createApplication();
  app.add(app.loadComponent("ScriptDBUi"));
   ReadScriptDb(app)
  return app;
} 
```

这个参考帮助我清除了它： [UI服务](https://developers.google.com/apps-script/uiapp)

“..doGet 函数是在用户访问部署脚本的 URL 时运行的函数..”

***干杯***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:44:13.003

你可以在这里读更多关于它的内容 -

[https://developers.google.com/apps-script/gui_builder#extending](https://developers.google.com/apps-script/gui_builder#extending)

您的代码看起来像这样（未经测试）

```
var app = UiApp.createApplication();
app.add(app.loadComponent("ScriptDBUi"))
var textBox = app.getElementById("myTextBoxName");//ID you gave in the GUI builder
textBox.setText("Hello world"); 
```

编辑 -

在回调函数中，您需要使用[UiAp.getActiveApplcation](https://developers.google.com/apps-script/class_uiapp#getActiveApplication)而不是 createApplication

```
Your code should be this - 
function ReadScriptDb() {
var DB = ScriptDb.getMyDb();
var Ob = DB.query({Number: "0002"}).next();
var Ui = UiApp.getActiveApplication();//CHANGED THIS
var TextBox = Ui.getElementById("Project")
TextBox.setText(Ob.Project)
}

function doGet() {
  var app = UiApp.createApplication();
  app.add(app.loadComponent("ScriptDBUi"));
  return app;
} 
```

# entity-framework - 实体框架导航属性为空

> ID：13200242
> 
> 赞同：6
> 
> 时间：2012-11-02T17:26:51.433
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我有 2 个简单的课程：

```
public class Setting
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid SettingId { get; set; }

    [Required]
    public String Name { get; set; }

    public String Value { get; set; }

    [Required]
    public SettingCategory SettingCategory { get; set; }
}

public class SettingCategory
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid SettingCategoryId { get; set; }

    [Required]
    public String Value { get; set; }

    public ICollection<Setting> Settings { get; set; }
} 
```

当我`SettingCategory`从数据库中检索 a 时，集合设置始终为空。

当我把它变成一个`virtual`然后它会说：`The ObjectContext instance has been disposed and can no longer be used for operations that require a connection.`

如何访问我的`Settings`列表？

另一种方法是，如果我`Setting`从数据库中检索 a ，则该`SettingCategory`属性已被填充。

这是我最初的代码迁移脚本：

```
CreateTable(
    "dbo.Settings",
    c => new
        {
            SettingId = c.Guid(nullable: false, identity: true),
            Name = c.String(nullable: false),
            Value = c.String(),
            SettingCategory_SettingCategoryId = c.Guid(nullable: false),
        })
    .PrimaryKey(t => t.SettingId)
    .ForeignKey("dbo.SettingCategories", t => t.SettingCategory_SettingCategoryId, cascadeDelete: true)
    .Index(t => t.SettingCategory_SettingCategoryId);

CreateTable(
    "dbo.SettingCategories",
    c => new
        {
            SettingCategoryId = c.Guid(nullable: false, identity: true),
            Value = c.String(nullable: false),
        })
    .PrimaryKey(t => t.SettingCategoryId); 
```

这是从数据库中获取它的部分：

```
public SettingCategory Get(Guid settingCategoryId)
{
    using (var context = new BackofficeContext())
    {
        return context
            .SettingCategories
            .FirstOrDefault(s => s.SettingCategoryId == settingCategoryId);
    }
} 
```

**回答**

我忘记了 include in `.SettingCategories`，但我正在使用 lambda 进行尝试：

```
public SettingCategory Get(Guid settingCategoryId)
{
    using (var context = new BackofficeContext())
    {
        return context
            .SettingCategories
            .Include(s => s.Settings)
            .FirstOrDefault(s => s.SettingCategoryId == settingCategoryId);
    }
} 
```

这不起作用，但这样做：

```
public SettingCategory Get(Guid settingCategoryId)
{
    using (var context = new BackofficeContext())
    {
        return context
            .SettingCategories
            .Include("Settings")
            .FirstOrDefault(s => s.SettingCategoryId == settingCategoryId);
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-02T17:47:52.630

因为你正在处理你的，所以`BackofficeContext`你不能使用 LazyLoading，这就是你制作`Settings`虚拟时发生的事情。

您可以增加您的`BackofficeContext`或急切加载的生命周期`Settings`。您可以使用预先加载与`Include`.

```
public SettingCategory Get(Guid settingCategoryId)
{
    using (var context = new BackofficeContext())
    {
        return context
            .SettingCategories
            .Include(s => s.Settings)
            .FirstOrDefault(s => s.SettingCategoryId == settingCategoryId);
    }
} 
```

# youtube-api - 上传基于浏览器和 HTTPS

> ID：13200244
> 
> 赞同：2
> 
> 时间：2012-11-02T17:27:04.680
> 
> 标签：youtube-api

首先对不起我的英语不好！

我需要在 facebook 应用程序中放置一个上传表单。我使用基于浏览器的上传。

我使用时一切正常：

```
$tokenHandlerUrl = 'http://gdata.youtube.com/action/GetUploadToken';
$nextUrl = "https://myurl.com/videoStatut.php";
[...etc...] 
```

（但有一条安全消息）

但是当我使用

```
$tokenHandlerUrl = 'https://gdata.youtube.com/action/GetUploadToken';
$nextUrl = "https://myurl.com/videoStatut.php";
[...etc...] 
```

表格已发送，但我的视频没有上传，我再也看不到我的 nexturl。

谢谢你的帮助。

# 铅解决了

Firefox (v17) 的更新解决了这个问题。现在 https:// 调用适用于所有浏览器

# android - Android openGL ES 2.0 场景滚动

> ID：13200245
> 
> 赞同：0
> 
> 时间：2012-11-02T17:27:06.427
> 
> 标签：android, opengl-es-2.0

我正在使用 openGL es 2.0 为 android 开发一个简单的游戏。游戏将是 2D 的，类似于旧的超级马里奥，玩家可以左右/上下移动，但没有深度。

级别将大于屏幕，因此图形必须滚动。这就是问题所在。我不知道在哪里/何时停止滚动。

例子。假设背景是 100x100 大小的带有纹理的正方形。假设在屏幕上，任何时候都只有 1/4 的背景可见。然后当我将屏幕向右移动时，我希望它在背景的右边缘到达屏幕边缘时停止滚动。

我现在能做的最好的事情就是在“视图”的中心位于背景边缘时停止滚动。但这并不好，因为屏幕的 3/4 都是空白的。

如何计算从视图中心到屏幕边缘的“偏移量”？

注意：我不想使用正交投影。

这是渲染器的代码。

```
package com.huntedseas;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.opengl.GLES20;
import android.opengl.GLSurfaceView.Renderer;
import android.opengl.Matrix;
import android.util.Log;

public class GameRenderer implements Renderer {
    protected LevelGenerator generator;
    protected SquareGL squareGL;

    protected static float angleX;
    protected static float angleY;
    protected static float angleZ;
    protected static float viewX = 0;
    protected static float viewY = 0;
    //private float viewZ = 0;

    private float[] mProjectionMatrix = new float[16]; //Projekcijska matrika
    private float[] mVMatrix = new float[16];
    private float[] mMVPMatrix = new float[16];

    @Override
    public void onSurfaceCreated(GL10 unused, EGLConfig conunused) {
        GLES20.glClearColor(1.0f,1.0f,1.0f,1.0f);

        GLES20.glDisable(GLES20.GL_CULL_FACE); //No culling of back faces  \\ To nevem al je treba da je uklopljeno al ne
        GLES20.glDisable(GLES20.GL_DEPTH_TEST); //No depth testing          \\  --||--
        GLES20.glEnable(GLES20.GL_BLEND); //Blending
        GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA,GLES20.GL_ONE_MINUS_SRC_ALPHA); //Interpolated blending

        generator = new LevelGenerator();
    }

    @Override
    public void onDrawFrame(GL10 unused) {
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);
        moveView();
        Matrix.setLookAtM(mVMatrix, 0, viewY, viewX, -10, viewY, viewX, 0, 0.0f, 1.0f, 0.0f); //set view
        Matrix.multiplyMM(mMVPMatrix, 0, mProjectionMatrix, 0, mVMatrix, 0); //calculate view transformation

        generator.draw(mMVPMatrix);     
    }

    @Override
    public void onSurfaceChanged(GL10 unused, int width, int height) {
        GLES20.glViewport(0, 0, width, height);

        float ratio = (float) width/height;
        float left =-ratio;
        float right = ratio;
        float bottom = -1.0f;
        float top = 1.0f;
        float near = 1.0f;
        float far = 20.0f;      
        Log.d("ratio","ratio: "+left+"  r: "+right+"  w: "+width+"  h: "+height);
        Matrix.frustumM(mProjectionMatrix, 0, left, right, bottom, top, near, far);

    }

    long lastTime = System.currentTimeMillis();
    public void moveView(){
        if((System.currentTimeMillis()-lastTime) >= 33){
            lastTime = System.currentTimeMillis();
            Log.d("viewX","viewX: "+viewX + "viewY:"+viewY);
            if( (viewX - angleX/10) < Level1.viewXP && (viewX - angleX/10) > Level1.viewXM) viewX -= angleX/10; 
            if( (viewY - angleY/10) < Level1.viewYP && (viewY - angleY/10) > Level1.viewYM) viewY -= angleY/10;

            //if(Math.abs(viewX - angleX/10) < 10) viewX-=angleX/10;
            //if(Math.abs(viewY - angleY/10) < 10) viewY-=angleY/10;
            //if(Math.abs(viewZ - (angleZ-5)/10) < 10) viewZ+=(angleZ-5)/10;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:08:45.103

我通过修改 Matrix.frustumM 的参数解决了这个问题，因此它们代表 FOV。当您知道从中间到侧面的角度时，您可以使用 tangens 函数计算偏移量。

```
 GLES20.glViewport(0, 0, width, height);

    float ratio = (float) width/height;
    float near = 1.0f;
    float far = 150.0f;
    float fov = 80;
    float top = (float) (Math.tan(fov * Math.PI / 360.0f) * near);
    float bottom = -top;
    float left = ratio * bottom;
    float right = ratio * top;

    offsetY = (float) (Math.tan(Math.PI/180*fov/2) * Math.abs(cameraAway));
    offsetX = offsetY * ratio; //because we know ratio between x and y

    Matrix.frustumM(mProjectionMatrix, 0, left, right, bottom, top, near, far); 
```

您也可以使用 Matrix.perspectivM()，但它仅适用于 api 14+。

# jsf-2 - 以一种形式从另一种形式提交数据 JSF

> ID：13200248
> 
> 赞同：1
> 
> 时间：2012-11-02T17:27:12.773
> 
> 标签：jsf-2, datatable

选择编辑时，将调用支持 bean，但表单字段未预先填充数据。

```
<h:form id="EmpDetails">
   <h:inputText value="#{empBean.fName}">
      <f:validateBean disabled="#{param[skipBeanValidation]}"/>
    </h:inputText>

<h:dataTable> 
 <h:column>
    [<h:commandLink value="Edit" immediate="true">
      <f:ajax execute="@form" render="@form" listener="#{empBean.edit}"/>
     </h:commandLink>  ]
     Changed to 
     <h:commandLink value="Edit" action="#{empBean.edit}">
       <f:param name="skipValidation" value="true"/>
     </h:comamndLink>
  </h:column>     
 </h:dataTable>

<h:commandLink value="#{empBean.addEmployee}"/>
<h:commandLink value="#{empBean.continue}"/>
</h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:43:54.893

这不是 HTML 表单应该如何工作的。单个 HTML 表单应包含所有参与*同一表单的**所有*输入元素和按钮。

 *将相关的表单元素放在同一个表单中。如果您遇到问题，则必须以不同的方式解决。例如，通过在 ajax 中使用部分提交。*

# c# - 如何通过 C# ASP.NET MVC4 更新数据库？

> ID：13200251
> 
> 赞同：1
> 
> 时间：2012-11-02T17:27:28.683
> 
> 标签：c#, asp.net-mvc-4

我有这样的问题。我必须将 ContenuReponse 更新为数据库。鉴于 ContenuReponse，我有：

```
<div class="editor-field">
        @Html.EditorFor(model => model.ContenuReponse)
        @Html.ValidationMessageFor(model => model.ContenuReponse)
    </div> 
```

（我对文本框使用编辑视图的模板 MVC4 Internet App 的快递）并且在响应控制器中我有：

```
public ActionResult Reponse(int id = 0)
    {
        Question question = db.Questions.Find(id);
        if (question == null)
        {
            return HttpNotFound();
        }
        return View(question);
    }

    [HttpPost]
    public ActionResult Reponse(Question question)
    {

    } 
```

我应该做什么

```
[HttpPost]
    public ActionResult Reponse(Question question)
    {

    } 
```

从 View 的文本框中获取值。有任何想法吗 ？非常感谢您的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:35:34.023

在动作方法中

```
[HttpPost]
public ActionResult Reponse(Question question)
{

} 
```

在 Question 问题参数中，所有值都将从视​​图中发布到此处。然后，您可以使用 will 值并将其插入数据库。要插入数据库，我建议您使用 Entity Framework，在谷歌上搜索一下。

最好的理解方法是在此方法中创建一个断点并查看发布到 Question 问题参数的值

希望这可以帮助。

# jquery - Safari 和 Opera 中的 fullcalendar refetchEvents 和 rerenderEvents 问题

> ID：13200252
> 
> 赞同：1
> 
> 时间：2012-11-02T17:27:34.050
> 
> 标签：jquery, fullcalendar

在按天创建新事件时保存对话框后单击我使用此代码

```
addEvent(calEvent); // запиcываем в БД при создании eventa 

                $dialogContent.dialog("close");                            

                $('#calendar').fullCalendar('removeEventSource', source1);
                $('#calendar').fullCalendar('removeEventSource', source2);
                $('#calendar').fullCalendar('removeEventSource', source3);
                $('#calendar').fullCalendar('removeEvents'); // need it for not generating doubles of events

                var source1 =  
                    {
                        url: '/admin_schedule/get_schedule_db/',//"<?echo $data_path?>",
                    };
                var source2 =  {
                        url: '/admin_schedule/get_schedule_db_recurring_events/',//"<?echo $data_path?>",
                        backgroundColor: 'green',
                        //borderColor: 'yellow',
                        //textColor: 'black' // an option!
                    };
                var source3 =  {
                        url: '/admin_schedule/get_schedule_db_recurring_events_on_daysweek/',//"<?echo $data_path?>",
                        backgroundColor: 'red',
                    }; 

                $('#calendar').fullCalendar('addEventSource', source1); // without this 3 lines fullcalendar doesn't refetch in Safari, but WITH them it renders doubles in all browsers
                $('#calendar').fullCalendar('addEventSource', source2);
                $('#calendar').fullCalendar('addEventSource', source3);
                  $calendar.fullCalendar('updateEvent', calEvent);   // обновляет календарь после закрытия dialog'а  
                  //$calendar.fullCalendar('renderEvents');
                  $calendar.fullCalendar('rerenderEvents');                                                          
                  $('#calendar').fullCalendar('refetchEvents'); 
```

它不会在 Safari 和 Opera 浏览器中重新呈现日历事件。但它适用于 Chrome 和 Firefox。错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:21:35.227

只需调用`refetchEvents`内部`addEvent()`函数。

所以在保存对话框中离开

```
addEvent(calEvent); // запиcываем в БД при создании eventa 
    $dialogContent.dialog("close"); 
```

并添加到 addEvent: **$('#calendar').fullCalendar('refetchEvents');**

```
function addEvent(calEvent) { 
    //var start = Date.parse(calEvent.start) / 1000; // 1323930600
    //var end = Date.parse(calEvent.end) / 1000;

    var start = $.fullCalendar.formatDate(calEvent.start, "yyyy-MM-dd HH:mm");
    var end = $.fullCalendar.formatDate(calEvent.end, "yyyy-MM-dd HH:mm");
    var recurring_start = $.fullCalendar.formatDate(calEvent.recurring_start, "yyyy-MM-dd");
    var recurring_end = $.fullCalendar.formatDate(calEvent.recurring_end, "yyyy-MM-dd");

    //set form data into a variable
    var dataString = 'title='+calEvent.title+'&start='+start+'&end='+end+'&recurring_start='+recurring_start+'&recurring_end='+recurring_end+'&frequency_as_day='+calEvent.frequency_as_day+'&body='+calEvent.body+'&teacher_id='+calEvent.teacher_id;
    dataString = dataString + calEvent.days;
    $.ajax({
        type:"POST",
        url:"<?=base_url().'admin_schedule/add_schedule/'?>",
        data: dataString,
        success:function(html){ 
            $('#calendar').fullCalendar('refetchEvents'); 
            //on succes clear form
            //$("form").clearForm();
            //show result
            //$(".helper").html(html).fadeIn('slow').animate({opacity: 1.0}, 2000);
            //remove old fullcalendar data source
            //$("#calendar").fullCalendar( 'removeEventSource', '<?echo $data_path?>' )
            //add a new one 
            //$("#calendar").fullCalendar( 'addEventSource','<?echo $data_path?>');
        }
    });
    return false;
} 
```

# jquery-ui - jquery ui拖动，抓取内部img而不是外部contianer

> ID：13200255
> 
> 赞同：0
> 
> 时间：2012-11-02T17:27:38.360
> 
> 标签：jquery-ui, jquery-ui-draggable

希望有人以前遇到过这个问题。

我有这个html：

```
<div class='item_to_drag'><img src="" /></div> 
```

我使用这个 jquery ui 命令：

```
$('.item_to_drag').draggable(); 
```

问题是大多数时候，IMG 最终是可拖动的，而不是容器。有没有人遇到过这个问题？

# ruby - Nokogiri 将值作为字符串返回，而不是数组

> ID：13200256
> 
> 赞同：3
> 
> 时间：2012-11-02T17:27:48.253
> 
> 标签：ruby, nokogiri

我正在使用返回多个值的 Nokogiri 运行脚本。我的印象是（并且被多个消息来源保证）结果应该是数组的形式。相反，我得到了一个难看的字符串。这是代码

```
require 'nokogiri'
require 'open-uri'
require 'spreadsheet'

profile_page_scraper = Nokogiri::HTML(open('http://www.crunchbase.com/company/facebook'))       
puts profile_page_scraper.css('div.col1_content td.td_left').text 
```

这会返回：

```
PublicDateRaisedPost IPO ValuationWebsiteBlogTwitterCategoryEmployeesFoundedDescription 
```

我知道我可以用它`map`来快速解决这个问题，但我很困惑为什么它没有返回一个数组。从理论上讲，它应该返回如下内容：

```
["Public", "Date", "Raised" ... "Description"] 
```

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T17:39:40.723

`NodeSet#text`总是返回一个字符串（否则它可能会被调用`NodeSet#texts`）。Nokogiri 文档不是很好，如有疑问请查看源代码：

```
 # lib/nokogiri/xml/node_set.rb
  def inner_text
    collect{|j| j.inner_text}.join('')
  end
  alias :text :inner_text 
```

要获取文本数组：`nodes.map(&:text)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:40:30.710

该`css`方法返回 的实例`Nokogiri::XML::NodeSet`，其中包括`Enumerable`。

```
require 'nokogiri'
require 'open-uri'

doc = Nokogiri::HTML(open('http://www.crunchbase.com/company/facebook'))  
nodes = doc.css('div.col1_content td.td_left')
nodes.class.ancestors
# => [Nokogiri::XML::NodeSet, Enumerable, Object, Kernel, BasicObject] 
```

因此，您可以将所有标准迭代器与`content`此结果集中每个元素的属性结合使用。例如：

```
nodes.each { |n| puts n.content } 
```

# git - git aws.push 上的损坏包文件

> ID：13200258
> 
> 赞同：2
> 
> 时间：2012-11-02T17:27:54.983
> 
> 标签：git, amazon-web-services, virtualenv, amazon-elastic-beanstalk

在尝试将新版本的应用程序代码（Django 应用程序）部署到 AWS Elastic Beanstalk 环境时，我遇到以下错误：

```
git aws.push
Counting objects: 1648, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (970/970), done.
Writing objects: 100% (1505/1505), 336.19 KiB, done.
Total 1505 (delta 989), reused 645 (delta 436)
remote: 
remote: error: Encountered corrupt pack file: Git command exited with status code 128: error: Trying to write ref refs/heads/master with nonexistent object 8fce6c2b73f03ac271173f85026b3566ef304313
remote: fatal: Cannot update the ref 'refs/heads/master'.
remote: 
remote: 
To https://xxx:xxx@git.elasticbeanstalk.us-west-2.amazonaws.com/repos/xxx/environment-master
! [remote rejected] HEAD -> master (hook declined)
error: failed to push some refs to 'https://xxx:xxx@git.elasticbeanstalk.us-west-2.amazonaws.com/repos/xxx/environment-master' 
```

我这边似乎没有任何改变。AWS 方面似乎也没有任何变化。几天前部署工作很顺利，但现在不行。

任何想法将不胜感激。谢谢！

**编辑：**这里是部署快照日志，显示了无数可能与 virtualenv 相关的问题： http: [//pastebin.com/Ec0jHt0i](http://pastebin.com/Ec0jHt0i)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T21:20:49.440

可能是因为您超出了允许的最大版本数 (500)。

检查部署的版本数的命令：

```
elastic-beanstalk-describe-application-versions |grep '| git-'|wc -l 
```

如果超过版本数，您可以要求 Amazon Web Services 团队增加对您的应用程序的限制，或者只删除过时的版本。

希望能帮助到你。

# c++ - BOOST_BINARY 宏如何解析空格？

> ID：13200264
> 
> 赞同：11
> 
> 时间：2012-11-02T17:28:22.350
> 
> 标签：c++, boost, macros

考虑下面的代码。

```
int value1 = BOOST_BINARY( 100 111000 01 1 110 ); 
```

有人可以解释 BOOST_BINARY 如何计算那里的 int 值吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T18:13:57.437

使用来源，卢克！

```
The following code works by converting the input bit pattern into a
Boost.Preprocessor sequence, then converting groupings of 3 bits each into
the corresponding octal digit, and finally concatenating all of the digits
together along with a leading zero. This yields a standard octal literal
with the desired value as specified in bits. 
```

这很容易。我们只需要定义一些宏。紧紧抓住。

```
#define BOOST_BINARY( bit_groupings )                                          \
  BOOST_BINARY_LITERAL_D( BOOST_PP_DEDUCE_D(), bit_groupings ) 

// ...

#define BOOST_BINARY_LITERAL_D( d, bit_groupings )                             \
  BOOST_PP_SEQ_CAT                                                             \
  ( (0) BOOST_DETAIL_CREATE_BINARY_LITERAL_OCTAL_SEQUENCE( d, bit_groupings )  \
  ) 

#define BOOST_DETAIL_CREATE_BINARY_LITERAL_OCTAL_SEQUENCE( d, bit_groupings )  \
  BOOST_PP_SEQ_TRANSFORM                                                       \
  ( BOOST_DETAIL_TRIPLE_TO_OCTAL_OPERATION                                     \
  , BOOST_PP_NIL                                                               \
  , BOOST_PP_IDENTITY( BOOST_DETAIL_CONVERT_BIT_SEQUENCE_TO_TRIPLE_SEQUENCE )()\
    ( BOOST_DETAIL_COMPLETE_TRIPLE_SEQUENCE                                    \
      (                                                                        \
        d                                                                      \
      , BOOST_DETAIL_CREATE_BINARY_LITERAL_BIT_SEQUENCE( d, bit_groupings )    \
      )                                                                        \
    )                                                                          \
  ) 

#define BOOST_DETAIL_CONVERT_BIT_SEQUENCE_TO_TRIPLE_SEQUENCE( bit_sequence )   \
  BOOST_PP_CAT                                                                 \
  ( BOOST_DETAIL_CONVERT_BIT_SEQUENCE_TO_PARENTHETIC_TUPLE_1 bit_sequence      \
  , END_BIT                                                                    \
  ) 

#define BOOST_DETAIL_BITS_PER_OCTIT 3

#define BOOST_DETAIL_COMPLETE_TRIPLE_SEQUENCE( d, incomplete_nibble_sequence ) \
  BOOST_PP_CAT                                                                 \
  ( BOOST_DETAIL_CREATE_TRIPLE_COMPLETION_SEQUENCE_                            \
  , BOOST_PP_MOD_D( d                                                          \
                  , BOOST_PP_SEQ_SIZE( incomplete_nibble_sequence )            \
                  , BOOST_DETAIL_BITS_PER_OCTIT                                \
                  )                                                            \
  )                                                                            \
  incomplete_nibble_sequence 

#define BOOST_DETAIL_FIXED_COMPL( bit )                                        \
  BOOST_PP_CAT( BOOST_DETAIL_FIXED_COMPL_, bit )

#define BOOST_DETAIL_FIXED_COMPL_0 1 

#define BOOST_DETAIL_FIXED_COMPL_1 0 

#define BOOST_DETAIL_CREATE_BINARY_LITERAL_BIT_SEQUENCE( d, bit_groupings )    \
  BOOST_PP_EMPTY                                                               \
  BOOST_PP_CAT( BOOST_PP_WHILE_, d )                                           \
  ( BOOST_DETAIL_BINARY_LITERAL_PREDICATE                                      \
  , BOOST_DETAIL_BINARY_LITERAL_OPERATION                                      \
  , bit_groupings ()                                                           \
  ) 

#define BOOST_DETAIL_BINARY_LITERAL_PREDICATE( d, state )                      \
  BOOST_DETAIL_FIXED_COMPL( BOOST_DETAIL_IS_NULLARY_ARGS( state ) ) 

#define BOOST_DETAIL_BINARY_LITERAL_OPERATION( d, state )                      \
  BOOST_DETAIL_SPLIT_AND_SWAP                                                  \
  ( BOOST_PP_CAT( BOOST_DETAIL_BINARY_LITERAL_ELEMENT_, state ) ) 

#define BOOST_DETAIL_TRIPLE_TO_OCTAL_OPERATION( s, dummy_param, tuple )        \
  BOOST_DETAIL_TERNARY_TRIPLE_TO_OCTAL tuple 

#define BOOST_DETAIL_TERNARY_TRIPLE_TO_OCTAL( bit2, bit1, bit0 )               \
  BOOST_DETAIL_TRIPLE_TO_OCTAL_ ## bit2 ## bit1 ## bit0 

#define BOOST_DETAIL_CREATE_TRIPLE_COMPLETION_SEQUENCE_1 (0)(0)
#define BOOST_DETAIL_CREATE_TRIPLE_COMPLETION_SEQUENCE_2 (0)
#define BOOST_DETAIL_CREATE_TRIPLE_COMPLETION_SEQUENCE_0  

#define BOOST_DETAIL_CONVERT_BIT_SEQUENCE_TO_PARENTHETIC_TUPLE_1END_BIT  

#define BOOST_DETAIL_CONVERT_BIT_SEQUENCE_TO_PARENTHETIC_TUPLE_1( bit )        \
  ( ( bit, BOOST_DETAIL_CONVERT_BIT_SEQUENCE_TO_PARENTHETIC_TUPLE_2 

#define BOOST_DETAIL_CONVERT_BIT_SEQUENCE_TO_PARENTHETIC_TUPLE_2( bit )        \
  bit, BOOST_DETAIL_CONVERT_BIT_SEQUENCE_TO_PARENTHETIC_TUPLE_3 

#define BOOST_DETAIL_CONVERT_BIT_SEQUENCE_TO_PARENTHETIC_TUPLE_3( bit )        \
  bit ) ) BOOST_DETAIL_CONVERT_BIT_SEQUENCE_TO_PARENTHETIC_TUPLE_1 

#define BOOST_DETAIL_SPLIT_AND_SWAP( params )                                  \
  BOOST_PP_IDENTITY( BOOST_DETAIL_SPLIT_AND_SWAP_PARAMS )()( params )

#define BOOST_DETAIL_SPLIT_AND_SWAP_PARAMS( first_param, second_param )        \
  second_param first_param 

#define BOOST_DETAIL_LEFT_OF_COMMA( params )                                   \
  BOOST_PP_IDENTITY( BOOST_DETAIL_FIRST_MACRO_PARAM )()( params ) 

#define BOOST_DETAIL_FIRST_MACRO_PARAM( first_param, second_param )            \
  first_param 

/* Begin derived concepts from Chaos by Paul Mensonides */

#define BOOST_DETAIL_IS_NULLARY_ARGS( param )                                  \
  BOOST_DETAIL_LEFT_OF_COMMA                                                   \
  ( BOOST_PP_CAT( BOOST_DETAIL_IS_NULLARY_ARGS_R_                              \
                , BOOST_DETAIL_IS_NULLARY_ARGS_C param                         \
                )                                                              \
  ) 

#define BOOST_DETAIL_IS_NULLARY_ARGS_C()                                       \
  1 

#define BOOST_DETAIL_IS_NULLARY_ARGS_R_1                                       \
  1, BOOST_PP_NIL 

#define BOOST_DETAIL_IS_NULLARY_ARGS_R_BOOST_DETAIL_IS_NULLARY_ARGS_C          \
  0, BOOST_PP_NIL 

/* End derived concepts from Chaos by Paul Mensonides */

#define BOOST_DETAIL_TRIPLE_TO_OCTAL_000 0 
#define BOOST_DETAIL_TRIPLE_TO_OCTAL_001 1 
#define BOOST_DETAIL_TRIPLE_TO_OCTAL_010 2 
#define BOOST_DETAIL_TRIPLE_TO_OCTAL_011 3 
#define BOOST_DETAIL_TRIPLE_TO_OCTAL_100 4 
#define BOOST_DETAIL_TRIPLE_TO_OCTAL_101 5 
#define BOOST_DETAIL_TRIPLE_TO_OCTAL_110 6 
#define BOOST_DETAIL_TRIPLE_TO_OCTAL_111 7 

#define BOOST_DETAIL_BINARY_LITERAL_ELEMENT_0 (0), 
#define BOOST_DETAIL_BINARY_LITERAL_ELEMENT_1 (1), 

#define BOOST_DETAIL_BINARY_LITERAL_ELEMENT_00 (0)(0), 
#define BOOST_DETAIL_BINARY_LITERAL_ELEMENT_01 (0)(1), 
// ... and so on, until ...
#define BOOST_DETAIL_BINARY_LITERAL_ELEMENT_11111110 (1)(1)(1)(1)(1)(1)(1)(0), 
#define BOOST_DETAIL_BINARY_LITERAL_ELEMENT_11111111 (1)(1)(1)(1)(1)(1)(1)(1), 
```

这会大量使用 中的宏`boost/preprocessor/`，但我不会在这里重复。它是数千行代码。

我知道这不是一个很有帮助的深入答案，但无论如何我都会发布它，因为它总比没有好。希望有人有勇气涉足这一点并提供更有见地的东西！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T18:58:32.527

这是非常非常复杂的。这个 BOOST 库使用由其他宏构造的宏。

我将向您展示一些预处理器编程的简化示例：

简化的问题：

如何使宏在休息开始时添加 0 或 1 - 就像在这个例子中：

```
CAT ( 0 1 ) --> 01
CAT ( 1 100 ) --> 1100 
```

所以 -`,`必须以某种方式将它们按顺序放在两个参数之间。好吧，我这样做了：

```
// start point - this is our desired format
#define CATS(a,b) a##b
// helper macro to invoke preprocessor on result of a
#define CALLP(a) a
// some helper symbols to build CATS() 
#define CATB (
#define CATE )
#define CATSN CATS
//  I use that only 0 or 1 is expected at the beginning:
//  CATS ( 0, 
#define CAT_B0 CATSN CATB 0,
//  CATS ( 1, 
#define CAT_B1 CATSN CATB 1,

// the final macro:
// Example:
//  CAT(0 XXX) --> CALLP( CAT_B ## 0 XXX  ) )  
// --> CALLP(CAT_B0 XXX ) --> CALLP(CATSN ( 0, XXX ) )
// --> CALLP( CATS(0, XXX) ) --> CATS(0,XXX) --> 0##XXX -> 0XXX 
#define CAT(tt)   CALLP (CAT_B ## tt CATE) 
```

它确实有效（至少在 gcc 上）：http: [//ideone.com/EKlTGt](http://ideone.com/EKlTGt)

现在想象一下 BOOST 人在他们的图书馆里所做的工作有多复杂？是的，它非常复杂 - 但使用我提出的这种预处理器技巧，也许还有许多其他技巧 - 我查看了这个 BOOST 库的来源[http://www.boost.org/doc/libs/1_46_1/boost/utility/binary .hpp](http://www.boost.org/doc/libs/1_46_1/boost/utility/binary.hpp)今天第一次（信不信由你）。

# java - 导入语句中是否支持 SpEL？

> ID：13200269
> 
> 赞同：7
> 
> 时间：2012-11-02T17:28:34.440
> 
> 标签：java, spring, spring-el

我想根据某些条件导入不同的资源文件。这可能吗？

这些不起作用：

```
<import resource="#{ systemProperties['foo'] }.xml" /> 

<import resource="#{ T(my.testpkg).getValue() }.xml" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:51:49.420

支持 SpEL，但 Spring 很早就解析了 import 语句。

当 spring 解析 import 语句时，属性占位符尚未解析。

例如：

定义以下属性：

```
import.fileName=${blah}
blah=properties.props 
```

然后我们可以使用“import.fileName”属性作为导入的参数

```
<import resource="${import.fileName}" /> 
```

这解决了：

```
<import resource="${blah}" /> 
```

并且大概资源'${blah}'不存在。

话虽如此，您可以使用属性来解析导入文件名。

# opencl - clEnqueueBarrier 和 clFinish 有什么区别？

> ID：13200276
> 
> 赞同：7
> 
> 时间：2012-11-02T17:28:59.493
> 
> 标签：opencl, gpu

OpenCL 1.1 规范说：

cl_int clEnqueueBarrier(cl_command_queue command_queue)

> clEnqueueBarrier 是一个同步点，可确保 command_queue 中的所有排队命令都已完成执行，然后才能开始执行下一批命令。

cl_int clFinish(cl_command_queue command_queue)

> 阻塞，直到 command_queue 中所有先前排队的 OpenCL 命令都发送到相关设备并完成。clFinish 在 command_queue 中所有排队的命令都被处理和完成之前不会返回。clFinish 也是一个同步点。

应该必须对按顺序或无序执行做一些事情，但我看不出有什么区别。如果我有顺序执行，他们是否需要？目前我做类似的事情：

```
...
for(...){
    clEnqueuNDRangeKernel(...);
    clFlush(command_queue);
    clFinish(command_queue);
}
... 
```

在英伟达 GPU 上。任何相关评论表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T18:22:15.433

如果您正在编写乱序队列作为确保依赖关系的一种方法，则需要将屏障加入队列。您还可以使用这些`cl_event`对象来确保命令队列中命令的正确排序。

如果您正在编写代码，以便`clFinish`在每次内核调用后调用 a，那么 using`clEnqueueBarrier`不会对您的代码产生任何影响，因为您已经确保了排序。

使用的要点是`clEnqueueBarrier`这样的情况：

```
clEnqueueNDRangeKernel(queue, kernel1);
clEnqueueBarrier(queue);
clEnqueueNDRangeKernel(queue, kernel2); 
```

在这种情况下，kernel2 依赖于 kernel1 的结果。如果这个队列是无序的，那么在没有屏障的情况下，kernel2*可以*在 kernel1 之前执行，从而导致不正确的行为。您可以通过以下方式实现相同的排序：

```
clEnqueueNDRangeKernel(queue, kernel1);
clFinish(queue);
clEnqueueNDRangeKernel(queue, kernel2); 
```

因为`clFinish`将等到队列为空（所有内核/数据传输都已完成）。但是，`clFinish`将等到 kernel1 完成，在这种情况下，while`clEnqueueBarrier`应该立即将控制权返回给应用程序（允许您将更多内核排入队列或执行其他有用的工作。

作为旁注，我认为这`clFinish`会隐式调用`clFlush`，因此您不需要每次都调用它。

# ios - ios6 是否有任何 API 允许您与手机交互，而不是发送号码以拨打电话？

> ID：13200283
> 
> 赞同：-3
> 
> 时间：2012-11-02T17:29:41.370
> 
> 标签：ios, iphone, ios6

我知道除非越狱，否则您无法删除 iPhone 上的苹果预装应用程序。我的问题围绕着发送/接听电话的实际电话应用程序。ios6 是否有任何 API 允许您与手机交互，而不是发送号码以拨打电话？有没有办法让应用程序拦截来电详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:22:23.317

不，您无法访问呼叫详细信息。由于调用本身就是一个应用程序，并且在 iOS 中，您无法从您的应用程序访问其他应用程序的数据。

# jquery - Jquery：如果和其他

> ID：13200293
> 
> 赞同：-1
> 
> 时间：2012-11-02T17:30:40.690
> 
> 标签：jquery, css, if-statement

```
$("#bottomWatch").click(function(){
                var doops = $(".videoMove").display;

                if (doops == "none") {  
                $("#video").css("left","15%", "display: block");
                 } else {
                $(".videoMove").css("left","200%", "display: none");
                }); 
```

我在这里有正确的想法吗？我该怎么做？我想单击按钮，如果 id 被隐藏，它会显示为块并拉入，如果不是，它会返回 200% 并隐藏自身。

Toggle 不适用于我正在做的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T17:32:14.007

您应该使用以下[`is`](http://api.jquery.com/is)方法：

```
if ($('.videoMove').is(':hidden')) {
    ...
} else {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:15:18.717

试试这个：

```
$("#bottomWatch").click(function() {
    if ($(".videoMove").is(":hidden")) {
        console.log("hidden");
        $('.videoMove').show().animate({
            'left': '200px',
        }, "slow", function() {
           //callback
        });
    } else {
        $('.videoMove').animate({
            'left': '280px'
        }, "slow", function() {
            //done
            $(this).hide();
        });
    }
});​ 
```

工作[小提琴](http://jsfiddle.net/4y6LA/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:32:01.120

```
if ($(".videoMove").is(":hidden")) {
   ///...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T17:32:19.587

.display 不是 jQuery 属性...

代替

```
var doops = $(".videoMove").display; 
```

和

```
var doops = $(".videoMove").css('display');   // jQuery Object 
```

或者

```
 var doops = $(".videoMove").get().style.display;  // DOM Object 
```

# visual-studio-2010 - 如何在 Visual Studio 2012 中设置断点的背景颜色？

> ID：13200296
> 
> 赞同：4
> 
> 时间：2012-11-02T17:31:17.320
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

在 VS2010 中，断点以背景颜色突出显示：

![在此处输入图像描述](../Images/93cf6836ce22ed8b356f09fe12937ae7.png)

在VS2012中，设置还在，但是没有效果；断点如下所示：

![在此处输入图像描述](../Images/b13c2a9fd4d279ba681466afd7b4867a.png)

是每个人都这样，还是只有我这样？我可以以某种方式恢复背景颜色吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:49:43.840

这应该开箱即用。用于断点的颜色在显示项“Breakpoint (Enabled)”下的工具 -> 选项 -> 环境 -> 字体和颜色中设置。

如果看起来设置正确，但您仍然没有得到正确的行为，请检查您是否有任何可能覆盖设置的扩展。

# java - Java XML 数字字符引用

> ID：13200297
> 
> 赞同：0
> 
> 时间：2012-11-02T17:31:24.817
> 
> 标签：java, xml, xml-parsing

我在解析具有数字字符引用（即  ）的 XML 文档时遇到问题。我遇到的问题是，在解析文档时， & 被替换为 & （在 ; 之前没有空格），所以我解析的文档将包含 & ;#xA0;。我该如何阻止这种情况发生？我试过使用`xmlDoc.setExpandEntityReferences(false)`，但这似乎并没有改变任何东西。

这是我解析文档的代码：

```
public static Document getXmlDoc(File xmlFile) throws ParserConfigurationException, SAXExeption, IOException {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setIgnoringElementContentWhitespace(true);
    factory.setExpandEntityReferences(false);
    DocumentBuilder builder = factory.newDocumentBuilder();
    return builder.parse(xmlFile);
} 
```

任何帮助将不胜感激。

编辑：

从上面的代码中解析的 XML 被修改，然后写回一个文件。执行此操作的代码如下：

```
public static File saveXmlDoc(Document xmlDocument, String outputToDir, String outputFilename) throws IOException {
    String outputDir = outputToDir;
    if (!outputDir.endWith(File.separator)) outputDir += File.separator;
    if (!new FIle(outputDir).exists()) new File(outputDir).mkdir();
    File xmlFile = new File(outputDir + outputFilename);
    Transformer transformer = TransformerFactory.newInstance().newTransformer();
    transformer.setOutputProperty(OutputKeys.INDENT, "no");
    StreamResult saveResult = new StreamResult(outputDir + outputFilename);
    DOMSource source = new DOMSource(xmlDocument);
    transformer.transform(source, saveResult);

    return xmlFile;
} 
```

编辑2：

修正了一个错字`factory.setIgnoringElementContentWhitespace(true);`。

编辑 3 - 我的解决方案：

由于我的声誉太低而无法回答我自己的问题，因此这是我用来解决所有这些问题的解决方案。

以下是我为解决此问题而更改的功能：

要获取 XML 文档：

```
 public static Document getXmlDoc(File xmlFile) throws ParserConfigurationException, SAXException, IOException {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setIgnoringElementContentWhitespace(true);
        factory.setExpandEntityReferences(false);
        DocumentBuilder builder = factory.newDocumentBuilder();
        return builder.parse(xmlFile);
    } 
```

要保存 XML 文档：

```
 public static File saveXmlDoc(Document xmlDocument, String outputToDir, String outputFilename) throws Exception {
        readNodesForHexConversion(xmlDocument.getChildNodes());
        String xml = getXmlAsString(xmlDocument);

        // write the xml out to a file
        Exception writeError = null;
        File xmlFile = null;
        FileOutputStream fos = null;
        try {
            if (!new File(outputToDir).exists()) new File(outputToDir).mkdir();
            xmlFile = new File(outputToDir + outputFilename);
            if (!xmlFile.exists()) xmlFile.createNewFile();
            fos = new FileOutputStream(xmlFile);

            byte[] xmlBytes = xml.getBytes("UTF-8");
            fos.write(xmlBytes);
            fos.flush();
        } catch (Exception ex) {
            ex.printStackTrace();
            writeError = ex;
        } finally {
            if (fos != null) fos.close();
            if (writeError != null) throw writeError;
        }

        return xmlFile;
    } 
```

要将 XML 文档转换为字符串：

```
 public static String getXmlAsString(Document xmlDocument) throws TransformerFactoryConfigurationError, TransformerException {
    DOMSource domSource = new DOMSource(xmlDocument);
    StringWriter writer = new StringWriter();
    StreamResult result = new StreamResult(writer);
    Transformer transformer;
    transformer = TransformerFactory.newInstance().newTransformer();
    transformer.transform(domSource, result);
    return writer.toString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:04:08.473

我目前无法重现该问题。这是一个简短但完整的程序，它试图：

```
import org.w3c.dom.*;
import java.io.*;
import javax.xml.*;
import javax.xml.parsers.*;

public class Test {
    public static void main (String[] args) throws Exception {
        byte[] xml = "<foo>&#xA0;</foo>".getBytes("UTF-8");
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setIgnoringElementContentWhitespace(true);
        factory.setExpandEntityReferences(false);
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document document = builder.parse(new ByteArrayInputStream(xml));
        Element element = document.getDocumentElement();
        String text = element.getFirstChild().getNodeValue();
        System.out.println(text.length()); // Prints 1
        System.out.println((int) text.charAt(0)); // Prints 160
    }
} 
```

现在还不清楚上面的 XML 是否会被再次写出——如果你能显示你用来做这件事的代码会有所帮助——但很明显文本节点的单字符值*没有*被读取作为＆符号，后跟“#xA0;” 分开，因为我*相信*你的问题描述了它，所以看到它写成“ ”我真的很惊讶。

你能写一个类似的简短但完整的程序来*演示*这个问题吗？我自己会继续尝试这样做。

# powershell - 更改内容后将项目保存在powershell中？

> ID：13200299
> 
> 赞同：-1
> 
> 时间：2012-11-02T17:31:29.807
> 
> 标签：powershell

我在powershell相对较新。有人可以帮我写一个简单的脚本吗？这是脚本：

```
Clear-Host #clear command window
Set-Location c:\MyDir
Get-ChildItem -include *.txt -recurse  | Get-Content  | Foreach-Object {
                                                            $_  -replace 'TextToReplace1', '' `
                                                                -replace 'TextToReplace2', ''
                                                           } | Set-Content -WhatIf 
```

当然，最后一个 Set-Content 失败了。我正在尝试保存我刚刚更改的 txt 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:28:49.190

我这样做：

```
Get-ChildItem -path c:\MyDir -filter *.txt -recurse | 
     Foreach-Object { 
                     (gc $_.FullName) | % 
                                        {
                                         $_  -replace 'TextToReplace1', '' `
                                              -replace 'TextToReplace2', ''
                                        } | Set-Content  -Path $_.fullname 
                    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T17:34:20.717

这就是我最终编写脚本的方式：

```
Set-Location c:\MyDir
$ProjFiles = Get-ChildItem -include *.txt -recurse  

foreach ($file in $ProjFiles)
{
    $NewFile = Get-Content $file.PSPath  | Foreach-Object {
                                                            $_  -replace 'TextToReplace1', '' `
                                                                -replace 'TextToReplace2', '' ` 
                                                           } 
     Set-Content $file.PSPath $Newfile                                                     
} 
```

# php - 从 a 中的链接显示 html 在同一页上

> ID：13200301
> 
> 赞同：-5
> 
> 时间：2012-11-02T17:31:35.157
> 
> 标签：php, xhtml

我创建了 2 个 div 标签。在一个 div 标签中，我有链接，我想将结果显示到另一个标签中。

我的代码是：

```
<div>
  <div id="loginDiv"><a href="login.php">LogIn</a></div>
  <div id="loginPageDiv"></div>
</div> 
```

如何在“loginPageDiv”中显示我的登录页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:41:18.947

尝试使用ajax。--> [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

例如

```
$('#loginDiv a').click(function(e){
  e.preventDefault();
  $.ajax({
    type: "GET",
    url: this.href,

  }).done(function( html ) {
    $("#loginPageDiv").append(html);
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:36:46.937

您可以使用 java Script (Ajax call) 来实现这一点

并在 ajax 调用中将结果设置为该 div id

```
document.getElementById("loginPageDiv").innerHTML = result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:49:43.610

使用 jQuery：

```
<script>
    $(function() {
        $('#loginDiv a').click(function() {
            $.get(this.href, function(data) {
                $('#loginPageDiv').html(data);
            });
            return false;
        });
    });
</script> 
```

# java - 有条件的 Spring 安全性

> ID：13200307
> 
> 赞同：4
> 
> 时间：2012-11-02T17:31:53.223
> 
> 标签：java, spring, spring-security

我想拥有应该通过布尔标志开关类型的功能来配置的弹簧安全性。

例如，

```
<bean class="org.springframework.ws.server...">
<property name="interceptors">
<list>
----> Here I would like an if condition test based on external property i.e. if true, register the interceptor, else do nothing
   <ref local="wsSecurityInterceptor">
--> other interceptors like logging etc.
</list>
</property>
</bean> 
```

这可能在 config.xml 中吗？非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T19:27:23.903

如果您使用的是 Spring 3.1，您可以尝试使用名为 Profile 的新功能。[一个例子](http://java.dzone.com/articles/spring-31-environment-profiles)

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-11T11:35:51.513

您可以执行以下添加的操作：

```
<security:intercept-url pattern="/api/**" access="isAuthenticated() and #{SAMLUtil.isStateOne()}" /> 
```

其中 #{boolean_function}

# java - 将焦点放在 JDateChooser 上

> ID：13200317
> 
> 赞同：0
> 
> 时间：2012-11-02T17:32:23.247
> 
> 标签：java, swing, focus, jcalendar, jdatechooser

是否可以将焦点从 a 更改`jFormattedTextField`为 a `JDateChooser`？

我尝试了以下方法：

```
jFormattedTextField.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e){
            jDateChooser.requestFocus();
        }
}); 
```

但它不起作用。按 T​​ab 或 Enter 时光标消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:22:29.553

requestFocusInWindow() 解决了这个问题。谢谢！

```
jFormattedTextField.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e){
        jDateChooser.requestFocusInWindow();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T06:56:19.730

更好的方法

```
jDateChooser.getDateEditor().getUiComponent().requestFocusInWindow(); 
```

# java - 想在java中发送十六进制字符串数据

> ID：13200319
> 
> 赞同：4
> 
> 时间：2012-11-02T17:32:39.900
> 
> 标签：java, javascript, android

我在 char[] 数组中有整数数据。示例：12、03、10。我想以字符串的十六进制格式发送数据。

示例：0C030A

但是在转换成十六进制后，我得到了 C3A。
请建议我获取正确的数据为 0C030A。

我正在使用以下代码

```
String messageBody = "A3";
SimpleDateFormat sdf = new SimpleDateFormat("MM:dd:yy:HH:mm:ss");
String currentDateandTime = sdf.format(new Date(mLocation.getTime()));
char[] temp;
temp = currentDateandTime.split(delimiter);
for( int i = 0; i < temp.length; i++ )
{
    messageBody += Integer.toHexString (Integer.parseInt( temp[i]));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T17:39:55.523

你可以使用[`String.format()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.util.Locale,%20java.lang.String,%20java.lang.Object...%29)with `"%02x"`。`02`表示用零填充，直到长度为 2。`x`表示十六进制。

```
messageBody += String.format("%02x", Integer.parseInt(temp[i])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:16:09.423

`String.format()`在性能受到关注的情况下（创建大量孤立对象并立即丢弃），它可能是相当重量级的。

如果你想要更紧一点的东西，你可以这样做：

```
final StringBuilder sb = new StringBuilder("0x00000000");
String fmt(int item) {

    int tmp;
    char c;

    for (int i = 9; i >= 2; i--) {

        tmp = (item & 0xF); item >>= 4;
        c = (char) (tmp < 10 ? '0' + tmp : 'A' + tmp - 10);
        sb.setCharAt(i, c);
    }

    return sb.toString();
} 
```

你可以进一步优化它（即使用更少的变量并执行更少的迭代），但我认为现在这已经足够详尽了:) 不是线程安全的等。

# youtube-api - 无法从 Youtube 获取令牌

> ID：13200320
> 
> 赞同：0
> 
> 时间：2012-11-02T17:32:46.377
> 
> 标签：youtube-api, token

我们正在尝试在我们的服务器上集成 Youtube API。但是当我们尝试上传视频时，我们在连接到[http://gdata.youtube.com/action/GetUploadToken](http://gdata.youtube.com/action/GetUploadToken)时遇到了问题。错误状态，`ERROR Unable to connect to tcp://gdata.youtube.com:80\. Error #110: Connection timed out HTTP details`。

为什么会发生此错误，我们如何解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-07T03:35:59.333

尝试使其成为安全连接

```
https://gdata.youtube.com/action/GetUploadToken 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:51:57.310

由于 YouTube 的服务器问题，这可能是一个临时错误。如果不是这种情况，并且您仍然可以重现错误，那么您的网络设置有问题。YouTube API 服务器现在应该可以正常运行，并且在任何情况下它们都不会故意拒绝传入的网络连接——至少，您总是会从活动服务器返回 HTTP 错误响应。

# dos - 任何人都知道如何从 DOS 批处理脚本中的字符串中去除引号字符？

> ID：13200321
> 
> 赞同：1
> 
> 时间：2012-11-02T17:32:47.537
> 
> 标签：dos, cmd

有谁知道如何从 DOS 批处理脚本中的字符串中去除引号字符？使用字符串替换功能可以轻松去除字符，但去除引号（或感叹号）似乎有点困难。这是我试图开始工作的测试脚本：

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
echo.
set "NAME=Izomorphius"
call :append NAME " is my dear friend."
echo Message: %NAME%
echo.
goto :end
:: Functions
:append @varname @value
IF NOT "%3"=="" (
  echo Too many arguments to function.
)
set vara=%1
set stra=%2
set stra=%stra:""=%
set "%1=!%1! %2"
exit /B 0
:end
pause 
```

这是此脚本的输出：

```
Message: Izomorphius " is my dear friend." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:55:40.280

修饰符将从参数中删除封闭的`~`引号。从命令提示符键入`HELP CALL`完整的修饰符列表。相同的修饰符也可用于 FOR 变量。

```
@echo off
setlocal enableDelayedExpansion
echo.
set "NAME=Izomorphius"
call :append NAME " is my dear friend."
echo Message: %NAME%
echo.
goto :end

:: Functions

:append @varname @value
IF NOT "%~3"=="" echo Too many arguments to function.
set "%~1=!%~1! %~2"
exit /B 0

:end
pause 
```

# javascript - Chrome.cookies.getAll 在函数内未定义

> ID：13200322
> 
> 赞同：0
> 
> 时间：2012-11-02T17:32:58.463
> 
> 标签：javascript, jquery, google-chrome-extension

我正在编写一个小扩展，主要使用 jQuery 作为留言板的助手。在我的选项/配置页面上，我希望能够检查用户是否登录到某个网站。

该页面调用了一个名为 options js 的 js 文件，在此文件中很容易执行以下操作，效果很好：

```
$(document).ready(function() {
  chrome.cookies.getAll({url:"http://mysite.com", name:"mycookiename"}, function(cookies){
    // If the cookie is present.
    if (cookies) {
        // Do stuff
    }
    else {
        // do other stuff
    }
  });
}); 
```

但是，我想更加模块化，所以将这段代码放入一个可以随时调用的函数中。不幸的是，这没有用，我对为什么有点困惑。

```
function checkLogin() {
  chrome.cookies.getAll({url:"http://mysite.com", name:"mycookiename"}, function(cookies){
    // If the cookie is present.
    if (cookies) {
        return true;
    }
    else {
        return false;
    }
  });
}

$(document).ready(function() {
  // Call our function
  checkLogin();
}); 
```

当我通过将输出记录到控制台来测试它时，它只是告诉我“未定义”。

# java - Java 如何从 HttpRequest 中的 SSL 证书中提取“颁发给”或用户？

> ID：13200326
> 
> 赞同：2
> 
> 时间：2012-11-02T17:33:19.307
> 
> 标签：java, ssl, httprequest

在 Java 中，如何从 SSL 证书中提取“颁发给”或用户`HttpRequest`？

我正在使用什么：

```
 Object certChain = request
    .getAttribute("javax.servlet.request.X509Certificate");
if (certChain != null)
{
  X509Certificate certs[] = (X509Certificate[]) certChain;
  X509Certificate cert = certs[0];
  String user = cert.getSubjectDN().getName();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:08:36.207

这是在 httprequest 中提取证书的“颁发给”又名主题的代码，

```
import java.security.cert.X509Certificate;
import javax.naming.InvalidNameException;
import javax.naming.ldap.LdapName;
import javax.naming.ldap.Rdn;

X509Certificate[] certs = (X509Certificate[])request.getAttribute("javax.servlet.request.X509Certificate");
if ((certs == null) || (certs.length == 0)) {
   return null;
}

String name = certs[0].getSubjectX500Principal().getName(); // if you are looking for issuer then use cert[0].getIssuerX500Principal().getName();
LdapName ldapName = null;
try {
   ldapName = new LdapName(name);
} catch (InvalidNameException e) {
   throw new RuntimeException(e);
}

for (Rdn rdn : ldapName.getRdns()) {
   String type = rdn.getType();
   if ("CN".equals(type)) { 
        String issuedTo = (String)rdn.getValue();
   }
} 
```

JDK 6 本地的 rt.jar 中有 API getSubjectX500Prinicpal()，不确定以前的版本， ![在此处输入图像描述](../Images/607dbcd943998e02732157e121ac7926.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:49:32.763

[`getSubjectDN()`](http://docs.oracle.com/javase/7/docs/api/java/security/cert/X509Certificate.html#getSubjectDN%28%29)不应再使用。

> **Denigrated**，由 getSubjectX500Principal() 代替。

所以使用：

```
cert[0].getSubjectX500Principal().getName(); 
```

这是用于[`getSubjectX500Principal()`](http://docs.oracle.com/javase/7/docs/api/java/security/cert/X509Certificate.html#getSubjectX500Principal%28%29).

# android - 如何设置持久通知背景图像

> ID：13200329
> 
> 赞同：0
> 
> 时间：2012-11-02T17:33:32.757
> 
> 标签：android, notifications, android-notification-bar

我一直在开发一个 android 应用程序，我需要在其中设置一个持久通知，它永远不会离开状态栏。所有的东西都设置正确，但我需要在通知中使用完整的背景，没有任何文字或任何东西。因为我附上了截图。

![通知背景，如 Yandex 搜索应用程序](../Images/7f03982607b1fcfdfa6e4734a66c058b.png)

我使用了以下代码：

```
String notificationTitle = "Here My App Name Goes";
        String notificationMessage = "Search with ---------";

        Intent targetIntent = new Intent(Intent.ACTION_MAIN);
        targetIntent.setClassName(this, this.getClass().getName());

        int requestCode = AppSingleton.NOTIFICATION_ID_ALWAYS;

        PendingIntent contentIntent = PendingIntent.getActivity(this,
                requestCode, targetIntent, 0);
        String statusBarTickerText = "Search from ----------";
        int icon = R.drawable.ic_launcher;

        Notification notification = new Notification(icon,
                statusBarTickerText, System.currentTimeMillis());
        notification.flags = Notification.FLAG_ONGOING_EVENT
                | Notification.FLAG_NO_CLEAR;
        notification.setLatestEventInfo(this, notificationTitle,
                notificationMessage, contentIntent);

        nm.notify(AppSingleton.NOTIFICATION_ID_ALWAYS, notification); 
```

我可以设置我的应用程序图标并在其上写一些文字，但我需要设置完整的背景，因为它是提供的屏幕截图。

请帮助我摆脱这个 prm。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:14:26.517

我得到了解决我的问题的方法，只需要通过一些代码更改来自定义通知布局。以下是我编辑的代码。：

```
Notification notification = new Notification(
                R.drawable.ic_launcher, "All ----",
                System.currentTimeMillis());

        RemoteViews contentView = new RemoteViews(getPackageName(),
                R.layout.notification);

        notification.contentView = contentView;
        final Intent notificationIntent = new Intent(this,
                MainActivity.class);

        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
                | Intent.FLAG_ACTIVITY_CLEAR_TOP);

        nm = (NotificationManager) getSystemService(MainActivity.NOTIFICATION_SERVICE);

        notification.flags |= Notification.FLAG_NO_CLEAR;
        notification.flags |= Notification.FLAG_ONGOING_EVENT;

        PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
                notificationIntent, 0);
        notification.contentIntent = contentIntent;

        nm.notify(AppSingleton.NOTIFICATION_ID_ALWAYS, notification); 
```

正如您在上面看到的那样 RemoteViews 类没有问题地完成了我的工作。刚刚做了一个布局并在这里引用它。而且，繁荣得到了我的通知的背景。

# python - 如何在 Windows 上安装 python-levenshtein？

> ID：13200330
> 
> 赞同：20
> 
> 时间：2012-11-02T17:33:49.023
> 
> 标签：python, windows, levenshtein-distance

在搜索了几天之后，我准备放弃为[Python Levenshtein 库](http://pypi.python.org/pypi/python-Levenshtein/)的 Python 2.7 (Windows 64-bit) 寻找预编译的二进制文件，所以我不是在尝试自己编译它。我已经安装了最新版本的*MinGW32*（版本 0.5-beta-20120426-1）并将其设置为*distutils*中的默认编译器。

开始了：

```
C:\Users\tomas>pip install python-levenshtein
下载/解压 python-levenshtein
  为包 python-levenshtein 运行 setup.py egg_info

    警告：在目录“docs”下找不到匹配“*”的文件
    警告：在分发的任何地方都找不到与“*pyc”匹配的先前包含的文件
    警告：在分发的任何地方都找不到与“.project”匹配的先前包含的文件
    警告：在分发的任何地方都找不到与“.pydevproject”匹配的先前包含的文件
已满足要求（使用 --upgrade 升级）：c:\python27\lib\site-packages\setuptools-0.6c11-py2.7.egg 中的 setuptools（来自 python-levenshtein）
安装收集的包：python-levenshtein
  为 python-levenshtein 运行 setup.py install
    构建“Levenshtein”扩展
    C:\MinGW\bin\gcc.exe -mno-cygwin -mdll -O -Wall -IC:\Python27\include -IC:\Python27\PC -c Levenshtein.c -o build\temp.win-amd64-2.7 \发布\levenshtein.o
    cc1.exe：错误：无法识别的命令行选项“-mno-cygwin”
    错误：命令“gcc”失败，退出状态为 1
    命令 C:\Python27\python.exe -c "import setuptools;__file__='c:\\users\\tomas\\appdata\\local\\temp\\pip-build\\python-levenshtein\\ 的完整输出setup.py';exec(compile(open(__file__).rea
d().replace('\r\n', '\n'), __file__, 'exec'))" install --record c:\users\tomas\appdata\local\temp\pip-7txyhp-record\ install-record.txt --single-version-externally-managed:
    运行安装

运行构建

运行 build_ext

构建“Levenshtein”扩展

C:\MinGW\bin\gcc.exe -mno-cygwin -mdll -O -Wall -IC:\Python27\include -IC:\Python27\PC -c Levenshtein.c -o build\temp.win-amd64-2.7 \发布\levenshtein.o

cc1.exe：错误：无法识别的命令行选项“-mno-cygwin”

错误：命令“gcc”失败，退出状态为 1

```

现在我被困住了。我假设该选项已过时并且对于我拥有`-mno-cygwin`的版本不再有效。`gcc`如果是这样的话，我仍然不知道如何解决这个问题。

感谢任何人都可以在此问题上提供的任何帮助。

* * *

编辑：

删除错误选项后，我手动运行了编译行：

```
C:\MinGW\bin\gcc.exe -mdll -O -Wall -IC:\Python27\include -IC:\Python27\PC -c Levenshtein.c -o build\temp.win-amd64-2.7\Release\levenshtein .o
```

在构建文件夹中成功提供了*levenshtein.o*，但是当我尝试运行时，`python setup.py install`它只是尝试再次构建并失败。我在哪里可以删除`-mno-cygwin`？我认为它在*distutils*的来源中的某个地方，但我找不到它。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2018-02-22T22:34:48.537

如果您使用 Anaconda，请尝试：

```
conda install -c conda-forge python-levenshtein 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-04-28T17:34:54.270

对于像 pip 一样简单的 64 位安装，请尝试：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#python-levenshtein](http://www.lfd.uci.edu/~gohlke/pythonlibs/#python-levenshtein)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-02T21:15:15.247

[从http://www.microsoft.com/en-us/download/details.aspx?id=6506](http://www.microsoft.com/en-us/download/details.aspx?id=6506)下载 vcsetup.exe （抱歉，此链接现在已损坏，它适用于 VC++ 2008 ...）

运行

完成后打开你的 command.exe

类型：（`easy_install python-Levenshtein`假设您已经有 setuptools）

坐下来让它安装

完毕

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2020-11-09T22:06:07.393

我在这里尝试了所有方法，但对我的 Windows 10 没有任何效果。最后，我发现这个库[python-Levenshtein-wheels](https://pypi.org/project/python-Levenshtein-wheels/)在 Windows 上是“pip-able”的。

```
pip install python-Levenshtein-wheels 
```

在此之后，像往常一样使用 Levenshtein

```
import Levenshtein
Levenshtein.distance('It works at last', 'Well it works at last') 
```

更新：

库[rapidfuzz](https://pypi.org/project/rapidfuzz/)提供了更多基于 Levenshtein 度量的比率。只是`pip install rapidfuzz`。您可以根据您的用例使用它们。这是一个例子

```
from rapidfuzz import fuzz

fuzz.ratio("fuzzy wuzzy was a bear", "wuzzy fuzzy was a bear")
# 90.90908813476562
fuzz.token_sort_ratio("fuzzy was a bear", "fuzzy fuzzy was a bear")
# 83.8709716796875 
```

hth

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-06-05T14:58:43.867

如何在 Windows 10 64 位上安装 python-Levenshtein/fuzzywuzzy：

1.  打开一个 DOS 窗口。

2.  `C:\Users\username> pip install fuzzywuzzy`

3.  `C:\Users\username> pip install python-levenshtein`

    如果您遇到以下错误：

    ```
    ERROR: Setup script exited with error: Microsoft Visual C++ 14.0 is required. Get it with "Microsoft Visual C++ Build Tools": https://visualstudio.microsoft.com/down 
    ```

    解决方案是：

    1.  从 python Levenshtein 轮子：[https](https://www.lfd.uci.edu/~gohlke/pythonlibs/#python-levenshtein) ://www.lfd.uci.edu/~gohlke/pythonlibs/#python-levenshtein，下载相关的.whl：python_Levenshtein-0.12.0-cp37-cp37m-win_amd64.whl

    2.  在 Python37 目录下创建一个 wheel 目录（或任何你喜欢的名称）：`C:\Users\username\AppData\Local\Programs\Python\Python37\wheels`

    3.  将文件从下载文件夹复制或移动`python_Levenshtein-0.12.0-cp37-cp37m-win_amd64.whl`到车轮文件夹。

    4.  使用记事本在 Python37 目录下创建一个 .bat 文件，`C:\Users\username\AppData\Local\Programs\Python\Python37\pip_install_python-levenshtein.bat` 内容如下（假设 `C:\Users\username\AppData\Local\Programs\Python\Python37\python.exe` 是 的根目录`Python.exe`）：

        ```
        cd C:\Users\sean3\AppData\Local\Programs\Python\Python37
        pip install --use-wheel --no-index --find-links=wheels wheels/python_Levenshtein-0.12.0-cp37-cp37m-win_amd64.whl 
        ```

    5.  运行`pip_install_python-levenshtein.bat`：

        ```
        C:\Users\firstname.lastname\AppData\Local\Programs\Python\Python37> pip_install_python-levenshtein.bat >> output1.txt
        C:\Users\firstname.lastname> pip install fuzzywuzzy 
        ```

        输出：成功安装 python-Levenshtein-0.12.0

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-07-21T23:05:19.813

对于@Laurenz Albe 的回答，这对我有帮助，因为您必须删除“--use-wheel” [Docker：没有这样的选项：--use-wheel](https://stackoverflow.com/questions/49835842/docker-no-such-option-use-wheel)

```
output - Successfully installed python-Levenshtein-0.12.0 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-29T07:25:21.557

如果你有 Conda 虚拟环境

```
conda install -n virtualEnvironmentName python-levenshtein 
```

# android - Android USB API：在充电和数据发送之间切换

> ID：13200334
> 
> 赞同：7
> 
> 时间：2012-11-02T17:34:02.140
> 
> 标签：android, api, usb, arduino

我开始使用 Android USB API 将数据从 Arduino 发送到 Android 设备。是否可以以编程方式在发送/接收数据之间切换并为 Android 手机充电？

我知道你不能同时做这两件事，而且，因为你必须打开一个`FileInputStream`才能接收数据，只要它是打开的，设备就不会被收费。

是否会像关闭此流以再次充电一样简单？如果就这么简单，那么Arduino可以发送基本信息以要求设备再次打开流吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-06T20:20:15.133

我不确定，我理解你的担心。同时通过USB进行充电和通信，可以使用OTG。这是来自亚马逊的链接，我分享了：[https](https://rads.stackoverflow.com/amzn/click/com/B00CXAC1ZW) ://www.amazon.com/Micro-Cable-Samsung-Player-OTHERS/dp/B00CXAC1ZW 我在我的一个项目中使用它，它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-01T22:23:48.957

首先，为了让您可以使用您的 Android 设备与其他设备进行通信，您必须使用[OTG](https://en.wikipedia.org/wiki/USB_On-The-Go)电缆或适配器，这已经使设备处于通信模式，并且已经为此提供了 Android USB api你不需要操纵它，因为自动的变化

# android - 如何将 Eclipse 链接到 YouWave？

> ID：13200335
> 
> 赞同：1
> 
> 时间：2012-11-02T17:34:01.827
> 
> 标签：android, eclipse, android-emulator, emulation

[YouWave](http://youwave.com/)是比 Android SDK 中的 Android 模拟器更快的 Android 模拟器。我可以将 Eclipse 链接到 YouWave，以便当我在 Eclipse 中运行程序时，YouWave 会自动运行该项目吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:08:21.947

尝试在命令 shell 中输入这一行。它对我来说很好。

**亚行连接本地主机：5558**

它逐渐采用格式--->> **adb connect [your ip]:port number**

**adb 的默认端口为**5555，5555-5557 保留用于某些目的。

所以这里 5558 是使用的端口号。

如果您对机器的 IP 地址有任何困惑，只需输入“localhost”即可。

希望这可以帮助，

席德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:00:08.463

如果我没记错的话，你目前不能这样做。他们把它列在他们要做的事情清单上，但据我所知，他们还没有做。

[http://youwave.com/forum/index.php?topic=1942.0](http://youwave.com/forum/index.php?topic=1942.0)

您可以执行以下操作：“您可以编写一个脚本将您的 APK 文件复制到一个目录并使用 YouWave 运行它”

您可以在 YouWave.com 中查看此帖子以获取更多详细信息：

[https://youwave.com/forum/index.php?topic=71.0](https://youwave.com/forum/index.php?topic=71.0)

# eclipse - Eclipse 以 64 位运行应用程序。JAR 作为 32 位运行

> ID：13200336
> 
> 赞同：2
> 
> 时间：2012-11-02T17:34:12.357
> 
> 标签：eclipse, jar, 64-bit, 32bit-64bit, 32-bit

我在安装了“Windows 7 64 位”的 64 位机器上使用 32 位版本的 Eclipse。我制作了一个小应用程序，它创建了一个 JFrame 并在标题中显示应用程序是作为 64 位还是 32 位运行。我将它导出为 .jar 文件。在任何机器上执行 jar 将始终显示“32”。但是，当我直接从 Eclipse 运行应用程序时，它显示“64”。

为什么 Eclipse 以 64 位运行应用程序，而 JAR 以 32 位运行？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T17:38:16.240

这完全取决于运行应用程序的 JVM。在您的情况下，在 Eclipse 下，应用程序以 64 位模式运行。这是因为（通过 Eclipse）运行应用程序的 JVM 是 64 位 JVM。当您在其他机器上运行它时，您使用的是 32 位 JVM。

要查看正在使用的 JVM Eclipse，请查看 Launch Configuration（`Run`菜单）并查看 JRE 选项卡。

# php - 你如何收到你当前的 php 文件 url

> ID：13200339
> 
> 赞同：0
> 
> 时间：2012-11-02T17:34:42.223
> 
> 标签：php, url, navigation, uri

我想让导航更容易，所以让我们说当我调用页面时

```
http://test.nl/admin/xxx.php?id=423 
```

如果我想使用不同的参数重定向到同一页面。我可以

```
Header("Location: xxx.php$rest"); 
```

但有没有办法让 xxx.php 动态？我试过 $_SERVER[PHP_SELF] 它在本地主机上工作，但在我的服务器上却不行。我得到：[http ://test.nl/test.nl/admin/xxx.php?id=423](http://test.nl/test.nl/admin/xxx.php?id=423)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:36:53.083

尝试以下操作：

`$basename = basename($_SERVER['REQUEST_URI']);`

这应该会在 URL 中为您提供文件的名称，包括扩展名。当然，如果您想获得**不带**文件扩展名的文件名，请尝试：

`$basename = str_replace(".php","",basename($_SERVER['REQUEST_URI']));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:38:03.423

您应该使用 URL 重写。看一下`Zend_Router`Zend 框架中的组件。

并且为了获取当前文件 URL：

```
<?php
function curPageURL() {
     $pageURL = 'http';
     if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
     $pageURL .= "://";
     if ($_SERVER["SERVER_PORT"] != "80") {
          $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
     } else {
          $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
     }
     return $pageURL;
}

echo curPageURL();

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T07:11:23.513

您不需要当前网址，您可以链接新的查询字符串：

带有html链接：

```
<a href="?foo=bar"> 
```

或 php 重定向：

```
Header("Location: ?foo=bar"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T17:37:34.063

只需重定向到`/xxx.php?$rest`. 如果您不离开目录，则不需要完整地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T17:37:46.090

我看不出它在生产站点上不起作用，但在本地起作用。

```
header("Location: {$_SERVER['REQUEST_URI']}?$rest"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T18:13:16.993

您可以使用 $_SERVER['SCRIPT_NAME'] 变量来检索当前脚本的路径，即当前文件的完整路径和文件名

有关 $_SERVER 变量的更多详细信息，请参阅下面 url 中提到的文档

[http://in3.php.net/reserved.variables.server](http://in3.php.net/reserved.variables.server)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-21T11:03:53.267

我喜欢在这些情况下使用正则表达式。（或者更确切地说，其他答案都不适用的情况，例如访问与此相关的文件。）

`$foldername = preg_replace('/(.*)(\/admin\/.*)/', '$2', dirname(__FILE__));`

`$filename = preg_replace('/(.*)(\/admin\/.*)/', '$2', __FILE__);`

请注意，这`\/admin\/`是在第二个捕获组的开头。`$2`使 preg replace 直接引用整个捕获组。因此 admin 必须是捕获组所在的 Web 根目录中的第一个文件夹。

# deployment - 我如何（或者我可以？）创建一个可以在平板电脑和笔记本电脑/台式机上运行的 Windows 8 应用程序？

> ID：13200341
> 
> 赞同：0
> 
> 时间：2012-11-02T17:34:41.987
> 
> 标签：deployment, windows-8, visual-studio-2012

在*调试 | 配置管理器...*，我将*活动解决方案配置*设置为**Debug**并将*活动解决方案平台*设置为**x86**，并且我将*项目上下文*设置为：

我的项目，Debug，ARM，同时选中了 Build 和 Deploy 复选框。

这是否意味着我的应用程序只能在 ARM 设备上运行？如果是这样，我可以让这个项目“跨设备”还是我需要两个独立但几乎相同的项目？

## 更新

这效果不太好（在项目上下文中设置为“ARM”），因为在设计器中我得到“设计视图不适用于 x64 和 ARM 目标平台”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:39:18.700

它将在 ARM 上运行，并且**可能**在具有兼容架构的其他设备上运行。您不需要 2 个相同的项目，您可以有 2 个不同的配置并有 2 个（或您想要的任何数量）构建 - 例如，一个用于 ARM，一个用于 x86。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:46:30.523

默认情况下，您的应用程序将在所有 3 个平台上运行（如果您在活动解决方案平台中选择“任何 CPU”）当您创建要上传到商店的应用程序包时（项目->商店->创建应用程序包），您可以单独选择平台。如果您使用 Bing 地图，您需要这样做（您必须为每个平台单独编译）

# linux - 如果守护进程被用户杀死，如何重新启动 Linux 守护进程

> ID：13200342
> 
> 赞同：1
> 
> 时间：2012-11-02T17:34:43.197
> 
> 标签：linux, gcc, linux-kernel, daemon, libc

我用c写了一个Linux守护进程，现在我的问题是如果用户杀死守护进程，守护进程必须自动重启，我怎样才能在守护进程中实现它。

喜欢 :: on shutdown event 收到 > 重新启动守护进程

> 示例场景
> 
> 守护进程是长寿的。通常，在系统启动时会创建一个守护进程并一直运行到系统关闭，例如：一个名为 XXX 的守护进程，它执行重要的例程，例如监视特定日志文件的功能，如果发现，请在高安全性应用程序中提醒管理员, 如果这个守护进程被杀死，它需要自动重启

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:50:06.520

如果用户使用`kill`pid 来关闭守护程序，则您无法从守护程序内部执行太多操作来重新启动它。（因为大多数用户会在某个地方阅读您需要始终使用`kill -9`的内容，这在几乎所有情况下都是一个非常糟糕的主意，但他们仍然会这样做）

如果您可以保证您的用户没有使用`kill -9`（而且您不能），那么您可以设置一个信号处理程序来干净地退出并重新启动守护程序。

否则，最好的办法是让另一个进程在守护进程死亡或被杀死时重新启动它。查看[daemontools](http://cr.yp.to/daemontools.html)或仅使用简单的 shell 脚本：

```
while true; do
    daemon
    sleep 1
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:12:35.597

这是一个错误的问题。重启看门狗（这是你要问的）是一种容错技术。您不会使用容错来纠正人机操作员的**故意和故意决定。**如果您不希望用户杀死您的进程，请告诉他们不要这样做。如果他们忽略它，那么他们已经破坏了他们的系统。标准系统守护进程通常不会重生，为什么要重生？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T18:41:13.510

我在想 cron 是否可以成为验证守护进程活动的好/安全的主意。

例如：

每 30 分钟启动一个脚本以测试守护程序是否处于活动状态。

```
$ */30 * * * * <script to verify daemon activity> 
```

脚本（伪代码）：

```
if daemon is active
then
    :
else
    restart daemon
fi 
```

# django - 姜戈。Q() 如何真正起作用？

> ID：13200344
> 
> 赞同：3
> 
> 时间：2012-11-02T17:34:53.593
> 
> 标签：django, django-models, django-q

在我的数据库中有一个包含一些用户信息的表。该表被调用`UserBalance`，字段包括`user`,`credits_in`和（`credits_out`以及`remark`其他）

我正在尝试`credits_in`为某个用户求和，但对于不同的情况我得到不同的总和。看看这个：

```
>>> cg = UserBalance.objects.filter(user=ranked_user).filter(remark__icontains='credits g').aggregate(sum_in=Sum('credits_in'))
>>> cg
{'sum_in': 35.85}
>>> cg = UserBalance.objects.filter(user=ranked_user).filter(Q(remark='credits gained') or Q(remark='credits given')).aggregate(sum_in=Sum('credits_in'))
>>> cg
{'sum_in': 26.16}
>>> cg = UserBalance.objects.filter(user=ranked_user).filter(Q(remark='credits given') or Q(remark='credits gained')).aggregate(sum_in=Sum('credits_in'))
>>> cg
{'sum_in': 9.69} 
```

在第一种情况下，我使用`i_cointains`，在第二种和第三种情况下，我使用 Q() 但它的术语已切换。

有人能解释一下第 2 种情况和第 3 种情况有什么区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T17:59:41.047

你应该使用`(Q(remark='credits gained')|Q(remark='credits given'))`，而不是`(Q(remark='credits gained') or Q(remark='credits given'))`

这是 2 个完全不同的运算符：| 是按位或，但它被 Q() 覆盖：

```
def __or__(self, other):
    return self._combine(other, self.OR) 
```

while`or`是逻辑（或者更确切地说是“合并”）运算符。这意味着`Q(remark='credits gained') or Q(remark='credits given')`将返回第一个 not-None 对象，这就是为什么在第二种情况下它会导致`Q(remark='credits gained')`，而在第三种情况下 - 在`Q(remark='credits given')`

# java - 调试使用 maven-weblogic-plugin 部署的 Weblogic 应用程序

> ID：13200345
> 
> 赞同：2
> 
> 时间：2012-11-02T17:34:57.007
> 
> 标签：java, maven, weblogic, remote-debugging, jdeveloper

我有一个在 Weblogic 服务器上运行的 Web 应用程序，我必须对其进行修改。为此，我安装了带有集成 Weblogic 10.3 服务器的 JDeveloper 11g R2。

应用程序作为 maven 项目出现 - 我已将 maven 项目导入 JDeveloper。但是，虽然我可以编译，但尝试从 JDeveloper 中部署失败（服务器将抱怨缺少 3rd 方类）。

但是，使用 maven，我可以成功构建一个 war 包并将其部署到集成 Weblogic 服务器（`maven-weblogic-plugin:deploy`）。

问题是如何调试我的应用程序？

[我尝试了这里](http://www.oracle.com/technetwork/developer-tools/jdev/remotedebugwls-086628.html)描述的远程调试，在将正确的选项传递给服务器后，我可以使用 JPDA 调试器附加到它，但它不会在断点处停止......

我做错了什么还是只能使用直接从 JDeveloper 部署的 webapp？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:00:47.110

你在做什么是正确的。您需要通过修改 startWeblogic.cmd 文件在 Weblogic 上启用远程调试。再次验证您的设置是否正确。

我通常使用以下内容：

```
set JAVA_OPTIONS=-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=8888,server=y,suspend=n %SAVE_JAVA_OPTIONS% 
```

这也是我最初设置时使用的一些文档：http: [//docs.oracle.com/cd/E21764_01/web.1111/e13702/maven_deployer.htm](http://docs.oracle.com/cd/E21764_01/web.1111/e13702/maven_deployer.htm)

# javascript - 如何将带分数转换为小数？

> ID：13200347
> 
> 赞同：2
> 
> 时间：2012-11-02T17:35:26.143
> 
> 标签：javascript, jquery

如何将“1 1/4”转换为 1.25？

我想接受用户输入并将其转换为等效的逻辑数字。我说是合乎逻辑的，因为 2 R 和 R 2 需要为 2（与测量脊椎按摩调整有关）。一切正常，直到他们需要能够使用混合分数。

有这方面的图书馆吗？

唯一不起作用的数字是“1 1/4”，它错误地转换为“2.75”。

```
 // Sample input
    var values = ["2.5", "1 1/4", "1/4", "2 R", "R 2"];

    function l(msg) {
        console.log(msg)
    }

    function toDecimal(x) {
        if (x.indexOf('/') != -1) {
            var parts = x.split(" ")
            var decParts = parts[1].split("/")
            return parseInt(parts[0], 10) + (parseInt(decParts[0], 10) / parseInt(decParts[1], 10))
        } else {
            return x
        }
    }

    function total_it_up(values){
        var total = 0,
            value = 0

        if(values === undefined)
            return 0

        $.each(values, function(index, value){
            value = value.replace(/[^0-9./]+/g, "")
            value = eval(value)
            l(value)
            total += parseFloat(value)
        })

        return total
    } 
```

# 解决方案

```
 function toDecimal(x) {
        if (x.indexOf('/') != -1) {
            var parts = x.split(" ")
            var decParts;
            if (parts.length > 1) {
                decParts = parts[1].split("/");
            }
            else {
                decParts = parts[0].split("/");
                parts[0] = 0;
            }
            return parseInt(parts[0], 10) + (parseInt(decParts[0], 10) / parseInt(decParts[1], 10))
        } else {
            return x
        }
    }

    function total_it_up(values){
        var total = 0;

        if(values === undefined)
            return 0;

        $.each(values, function(index, value){
            total += parseFloat(toDecimal($.trim(value.replace(/[^0-9./ ]+/g, ""))));
        })

        return total;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:46:20.153

我们没有看到对 toDecimal() 的任何调用，所以我假设`$.each`循环在您的原始代码中调用它。如果是这种情况，那么 1 1/4 将变为 2.75，因为正则表达式正在剥离 1 和 1/4 之间的空间，从而得到 11/4，即 2.75。允许空格，但`$.trim`结果是任何前导或尾随空格都被删除。你也不应该使用`eval()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:39:15.447

我之前不小心发布了 perl 而不是 JS。这是正确的。请进行清洁。

例子

```
 <html>
  <body>
    <script language=javascript>

 var txt='4 1/2';

      var re1='(\\d+)'; // Integer Number 1
      var re2='.*?';    // Non-greedy match on filler
      var re3='(\\d+)'; // Integer Number 2
      var re4='.*?';    // Non-greedy match on filler
      var re5='(\\d+)'; // Integer Number 3

      var p = new RegExp(re1+re2+re3+re4+re5,["i"]);
      var m = p.exec(txt);
      if (m != null)
      {
          var int1=m[1];
          var int2=m[2];
          var int3=m[3];
          document.write("("+int1.replace(/</,"&lt;")+")"+"("+int2.replace(/</,"&lt;")+")"+"("+int3.replace(/</,"&lt;")+")"+"\n");
      }
    </script>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:45:15.790

这很糟糕。

```
function ConvertFraction(fraction)
{
     eval(fraction.replace('R','').trim().replace(' ', '+'))
} 
```

# dynamic - 表达式引擎类别

> ID：13200351
> 
> 赞同：1
> 
> 时间：2012-11-02T17:35:35.513
> 
> 标签：dynamic, navigation, expressionengine, categories

我有 1 个模板和 45 个类别。当我点击我唯一的类别组“产品”链接时，我的侧导航显示所有类别的父母和孩子，这很好。

例如，我现在希望能够选择“中央吸尘器”类别之一，并让我的侧导航变成仅与“中央吸尘器”相关的所有类别。我找到了一种使用细分的方法，但它似乎只允许我在“中央真空”中显示子类别，而不是其他父母中的任何其他类别。

另一个例子。如果我从我的“品牌”父级中选择一个类别，则只会显示该品牌的产品。然后我想选择另一个类别，并将其限制为两个类别。

我希望这对某人有意义，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:42:41.700

您应该检查这个 EE1/EE2 插件，它可能会满足您的需求：

**GWcode 分类**

[http://devot-ee.com/add-ons/gwcode-categories](http://devot-ee.com/add-ons/gwcode-categories)

**您可以使用该插件执行的操作示例如下：**

[http://gwcode.com/add-ons/gwcode-categories/examples](http://gwcode.com/add-ons/gwcode-categories/examples)

**可用的参数和变量在这里：**

[http://gwcode.com/add-ons/gwcode-categories/documentation](http://gwcode.com/add-ons/gwcode-categories/documentation)

# git - 哪个git模型更好？

> ID：13200354
> 
> 赞同：2
> 
> 时间：2012-11-02T17:36:14.433
> 
> 标签：git

我们有两个开发团队，想使用 git。

但是我不知道用git哪种方式更好：

1.  **带有裸仓库的模型**。这里有两个本地存储库 + 一个裸（主）存储库，其中 2 个开发人员正在同步他们的提交。

2.  **没有裸回购的模型**。这是两个本地存储库，其中一个设置为另一个远程存储库。

我想知道哪种型号更好用，为什么？特别是当我想使用第二种模型时会有什么样的困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:57:38.833

您通常不会推入他们工作的人们的存储库，那会很麻烦。裸存储库用于推入，而非裸存储库往往有一个开发人员在他们面前，他负责管理它并从其他地方拉入它。

因此：没有中央存储库的模型将包含两个非裸存储库（每个都将另一个作为远程；将远程列表视为存储库的“地址簿”）。

在工作期间，您会定期相互拉取更改，但这会产生一些问题：

*   需要一些额外的沟通（什么时候拉，拉哪些分支）？
*   您需要确保两个 repos 都可用（这样开发人员 A 就不需要等待开发人员 B 在需要拉取某些东西时打开他的 PC）

一个裸露的中央存储库有助于解决这个问题：

*   它应该始终可用
*   您决定哪些分支处于“准备就绪”状态、共享什么、保留什么
*   它用作同步点：始终*存在*当前版本，因此在出现分歧时，始终清楚谁应该合并。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T17:42:29.187

对于两个开发人员来说，第一个选项更好。在第二个选项中，两个开发人员都有自己的修改后的工作副本，这可能会在推送时导致问题或混乱。查看此[推送到非裸 Git 存储库](https://stackoverflow.com/questions/1764380/push-to-non-bare-repository)

# firefox - Firefox RotateY 转换不起作用

> ID：13200355
> 
> 赞同：0
> 
> 时间：2012-11-02T17:36:15.580
> 
> 标签：firefox, css-transitions

我有一个页面显示可以通过 jQuery 调整大小的人物图片。我正在使用一个精灵图像，它显示 3 个正方形，当您选择/悬停它们时它们会发生变化。我正在使用 CSS3 Transition & Transform (RotateY) 为更改设置动画。转换和转换在 Chrome (v22) 中有效，但在 Firefox (v16) 中无效。

我创建了一个 jsFiddle 示例：http: [//jsfiddle.net/WPEbW/7/](http://jsfiddle.net/WPEbW/7/)

```
<div id="divOptions" runat="server" style="padding: 0 10px; margin: 10px; overflow: hidden; zoom: 1">
    <div style="float: left">
        <div id="divSmallImage" runat="server" class="ResizeImages Small" title="Small">
        </div>
        <div id="divMediumImage" runat="server" class="ResizeImages Medium Selected" title="Medium">
        </div>
        <div id="divLargeImage" runat="server" class="ResizeImages Large" title="Large">
        </div>
    </div>
</div>​

.ResizeImages { cursor: pointer; display: inline-block; background-position: 0; -moz-transform:rotateY(0deg) }
.ResizeImages:hover { box-shadow: #CCC 1px 1px 5px; -webkit-transition: none; -moz-transition: none; -o-transition: none; transition: none; }
.ResizeImages.Selected { -webkit-transition: background-position 0 .4s,-webkit-transform 1s; -webkit-transform: rotateY(180deg); -moz-transition: background-position 0 .4s,-moz-transform 1s; -moz-transform: rotateY(180deg); -o-transition: background-position 0 .4s,-o-transform 1s; -o-transform: rotateY(180deg); transition: background-position 0 .4s,transform 1s; transform: rotateY(180deg); }
.ResizeImages.Small { background: url('https://www.new-innov.com/RMSImages/square_sprite.png') 0 0 no-repeat; width: 12px; height: 12px; }
.ResizeImages.Small:hover { background-position: 0 -12px; }
.ResizeImages.Small.Selected { background-position: 0 -24px; }
.ResizeImages.Medium { background: url('https://www.new-innov.com/RMSImages/square_sprite.png') -12px 0 no-repeat; width: 16px; height: 16px; }
.ResizeImages.Medium:hover { background-position: -12px -16px; }
.ResizeImages.Medium.Selected { background-position: -12px -32px; }
.ResizeImages.Large { background: url('https://www.new-innov.com/RMSImages/square_sprite.png') -28px 0 no-repeat; width: 20px; height: 20px; }
.ResizeImages.Large:hover { background-position: -28px -20px; }
.ResizeImages.Large.Selected { background-position: -28px -40px; }

$(document).ready(function() {
    function SetSize(selectedImage) {
        if (typeof selectedImage !== 'undefined') {
            $('.ResizeImages.Selected').removeClass('Selected');
            $(selectedImage).addClass('Selected');
        }
    }
    SetSize();
    $('.ResizeImages').click(function() {
        SetSize(this);
    });
});​ 
```

我相信我正在使用的转换和转换应该在 Firefox 中工作，但不知道为什么不能。

在此先感谢，-
亚伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T07:47:57.877

`background-position 0 .4s` is not a valid `<single-transition>` as defined at [http://dev.w3.org/csswg/css3-transitions/#single-transition](http://dev.w3.org/csswg/css3-transitions/#single-transition) so your entire `-moz-transition` rule gets discarded by the CSS parser. As the error console says:

> [03:47:02.876] Error in parsing value for '-moz-transition'. Declaration dropped. @ [http://fiddle.jshell.net/WPEbW/7/show/:18](http://fiddle.jshell.net/WPEbW/7/show/:18)

It works in Chrome because Chrome unfortunately doesn't actually implement the spec for parsing transition values correctly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:03:08.480

感谢@Boris Zbarsky，我能够解决自己的问题。我拼出了转换，而不是尝试使用该类的速记版本。

我更新了 jsFiddle 示例：http: [//jsfiddle.net/WPEbW/10/](http://jsfiddle.net/WPEbW/10/)

这是我更改的唯一类 css：

```
.ResizeImages.Selected { 
    -webkit-transition-property: background-position, -webkit-transform;
    -webkit-transition-duration: 0s, 1s;
    -webkit-transition-delay: .4s, 0s;
    -webkit-transform: rotateY(180deg); 
    -moz-transition-property: background-position, -moz-transform;
    -moz-transition-duration: 0s, 1s;
    -moz-transition-delay: .4s, 0s;
    -moz-transform: rotateY(180deg); 
    -o-transition-property: background-position, -o-transform;
    -o-transition-duration: 0s, 1s;
    -o-transition-delay: .4s, 0s;
    -o-transform: rotateY(180deg); 
    transition-property: background-position, transform;
    transition-duration: 0s, 1s;
    transition-delay: .4s, 0s;
    transform: rotateY(180deg); 
} 
```

# php - PHP 获取数组值并在其他数组中使用它

> ID：13200357
> 
> 赞同：0
> 
> 时间：2012-11-02T17:36:33.130
> 
> 标签：php, multidimensional-array

我有这个：

```
while($row = mysql_fetch_array($result))
{
$post[] = intval($row[counted]);
$descrip = $row[desc];
} 
```

并在此使用 $post：

```
$pie->set_values( array($post,new pie_value($post[1], ".$descrip.")) ); 
```

但我得到了这个结果：

```
values": [ [ 1, 1, 1, 1 ], { "value": 1, "label": ".PROCESADOR INTEL CELERON G530." } ] } ]
```

问题是结果需要是这样的：

```
values": [ 1, 1, 1, 1, { "value": 1, "label": ".PROCESADOR INTEL CELERON G530." } ] } ]
```

我必须删除 post 数组的 [ ]。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:07:14.567

您是否尝试将**pie_value**类的对象添加为要传递的数组的最后一个元素？

```
$post[] = new pie_value($post[1], ".$descrip.");
$pie->set_values( $post ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:41:21.627

您将数组作为第一个参数添加，因此您将数组作为第一个参数。

你可以这样简化：（未测试）

```
$arr = array();
foreach ($post as $p)
    $arr[] = $p;

// Add the other parameters
$arr[] = new pie_value($post[1], ".$descrip.");

$pie->set_values( $arr ); 
```

# ruby-on-rails - Rails：锁定数据库？- SQLite3::BusyException：

> ID：13200361
> 
> 赞同：0
> 
> 时间：2012-11-02T17:36:47.117
> 
> 标签：ruby-on-rails

我不断收到错误消息：

```
SQLite3::BusyException: database is locked: INSERT INTO "users" ("created_at", "email", "name", "password_digest", "updated_at") VALUES (?, ?, ?, ?, ?) 
```

当我尝试执行代码时：

```
@user = User.new(:name => "User1", :email => "email@gmail.com", :password => "password", :password_confirmation => "password")
@user.save 
```

创建用户后调用 save 有问题吗？我需要超时吗？如果是这样，我该如何设置/获取数据库变量。

我不知道这里出了什么问题。User 变量的创建很好，因为如果我删除了 save 函数，我可以输出 @user 变量的属性。我只是假设我在做一些非常错误的事情。我知道我不应该对用户进行硬编码，但我这样做是出于测试目的。

这里发生了什么？

编辑：

我已经尝试过`drop`我的数据库，但它抱怨 sqlite3 文件丢失了。但是，当我导航到它抱怨的确切路径时，这些文件将列在`ls`.

我假设这是我的问题。这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:52:03.403

您是否尝试在 Rails 服务器运行时执行此操作？

或者您是否尝试过使用 SQLite 数据库浏览器等工具手动插入或删除表中的行？

Sqlite 的并发支持很差，任何使数据库稍微关闭的操作都会引发 Busy 异常。

如果错误继续发生，并且您在数据库中的数据不是那么重要，只需删除数据库并再次迁移。错误应该消失了。

# c# - 如何将 Ctrl/Shift/Alt + 组合键发送到应用程序窗口？（通过发送消息）

> ID：13200362
> 
> 赞同：13
> 
> 时间：2012-11-02T17:36:46.290
> 
> 标签：c#, sendmessage

我可以成功地将任何单个键消息发送到应用程序，但我不知道如何发送键组合（如`Ctrl`+ `F12`、`Shift`+ `F1`、`Ctrl`+`R`等）

尝试这样做：

```
SendMessage(handle, WM_KEYDOWN, Keys.Control, 0);
SendMessage(handle, WM_KEYDOWN, Keys.F12, 0);
SendMessage(handle, WM_KEYUP, Keys.F12, 0);
SendMessage(handle, WM_KEYUP, Keys.Control, 0); 
```

但这似乎不起作用（应用程序的行为就像只`F12`按下，而不是`Ctrl`+ `F12`）。

任何想法如何使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T17:45:41.033

您可能会发现使用 SendInput [（此处的文档）](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)效果更好。您将需要从 C# 中 P/Invoke 它，[例如此处](http://www.pinvoke.net/default.aspx/user32.sendinput)。您可以提供带有向下和向上键的数据数组，并正确设置其他消息参数，例如是否按下了左键或`Ctrl`右键。`Shift``Alt`

您还可以使用`SendKeys`该类（[此处的文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)）。这允许您按名称指定键，例如`{^F12}`for `Ctrl`+ `F12`。

**编辑**：OP现在说他需要将输入发送到最小化的应用程序而不激活它们。这不可能以*任何方式*可靠地完成，即使使用专门的硬件也是如此。我从事自动化工作。这是不可能的。OP 需要使用`FindWindow`/`SetForegroundWindow`来打开目标应用程序，然后他可以切换回他的应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-29T15:50:05.450

> OP 现在说他需要将输入发送到最小化的应用程序而不激活它们。这不可能以任何方式可靠地完成，即使使用专门的硬件也是如此。我从事自动化工作。这是不可能的。

实际上，将输入发送到最小化的应用程序是可能的，不确定鼠标输入，但键盘输入工作得很好。在以前的答案中考虑一下这是我能够完成的（代码在 Delphi 中，但它非常简单，因此您可以将其翻译成您需要的语言）：

```
procedure SendKeys(const Win : HWND; const Key,sKey: Cardinal);
var
  thrID : Cardinal;
  KB : TKeyBoardState;
begin
  if sKey <> 0 then
  begin
    thrID := GetWindowThreadProcessId(win,nil);
    GetKeyboardState(KB);
    AttachThreadInput(GetCurrentThreadID, thrID, True);
    KB[sKey] := KB[sKey] or $80;
    SetKeyboardState(KB);
  end;
  SendMessage(Win,WM_KEYDOWN,Key,0);
  SendMessage(Win,WM_KEYUP,Key,0);
  if sKey <> 0 then
  begin
    KB[sKey] := 0;
    SetKeyBoardState(KB);
    AttachThreadInput(GetCurrentThreadId, thrID, False);
  end;
end; 
```

[Win] 必须是接收输入的控件，而不是其父窗体等。 [Key] 是要按下的键；[sKey] 是在按下 [Key] 时按下的替代键，例如 CTRL/SHIFT（ALT 通过消息本身传输，有关详细信息，请参阅 MSDN WM_KEYDOWN 参考）。

发送一个单独的击键相当简单，您只需发送消息即可完成，但如果您需要 CTRL+SPACE 之类的东西，这里就变得复杂了。每个线程都有自己的 KeyboardState，在您自己的应用程序中更改 KeyboardState 不会影响另一个线程，除非您通过 AttachThreadInput 函数加入他们的线程输入。当应用程序处理 WM_KEYDOWN 消息时，它还通过调用 GetKeyboardState 函数（可以通过 WM_KEYDOWN 消息的附加参数发送 ALT 键）来测试当前的移位状态（CTRL/SHIFT），这就是附加线程输入发挥作用的时候。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-31T11:30:21.963

I already tried the method with GetKeyboardState and SetKeyboardState (preceded by attaching the window thread and ended with detaching from window thread). I doesn't work for combinations of keys like Ctrl+Something or combinations using Alt or Shift also. Control, Alt and Shift keys are not seen as pressed. It seems like the maximum you can get when the window is minimized is pressing individual keys using PostMessage with WM_KEYDOWN messages. Another thing I noticed is that if you Post WM_KEYDOWN and WM_KEYUP (for the same key) the key will be pressed twice. So only use WM_KEYDOWN one time. This is not an 100% accurate method but when window is minimized there are some limitations.

The same situation happens when screen is locked.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T20:59:38.637

也许你正在寻找类似的东西：

```
procedure GoCursorUp(Obj: TControl);
var   KeyState : TKeyboardState;
begin
  GetKeyboardState(KeyState);
  KeyState[VK_CONTROL] := KeyState[VK_CONTROL] or $80;
  SetKeyboardState(KeyState);// control down
  Obj.Perform(WM_KEYDOWN,VK_HOME,0); //ex. with HOME key
  KeyState[VK_CONTROL] := $0;
  SetKeyboardState(KeyState);// control up
end; 
```

...

GoCursorUp（自我）；

或者是这样的：

```
 //for example: SHIFT + TAB
  keybd_event(VK_SHIFT, 0, 0, 0);
  keybd_event(VK_TAB, 0, 0, 0);
  keybd_event(VK_SHIFT, 0, KEYEVENTF_KEYUP, 0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-18T09:10:26.480

如果您想模拟击键以最小化窗口，您可以执行以下操作：

```
uint windowThreadId = GetWindowThreadProcessId(hwnd, IntPtr.Zero);
uint myThreadId = GetCurrentThreadId();
AttachThreadInput(myThreadId, windowThreadId, true); 
```

下一步是使用[GetKeyboardState](https://msdn.microsoft.com/en-us/library/windows/desktop/ms646299(v=vs.85).aspx)函数来检索窗口线程的所有键状态的数组。使用它们的虚拟键代码将 SHIFT 或 CTRL 或 ALT 键的状态修改为被按下。然后调用 SetKeyboardState 来应用这些状态。按 F12 键：

```
SendMessage(hwnd, WM_KEYDOWN, Keys.F12, 0);
SendMessage(hwnd, WM_KEYUP, Keys.F12, 0); 
```

将 SHIFT、CTRL 或 ALT 键的状态修改为被释放。再次调用 SetKeyboardState。最后，从窗口线程中分离：

```
AttachThreadInput(myThreadId, windowThreadId, false); 
```

# spring - 如何在我的 Spring 应用程序上下文中设置 Web 服务客户端？

> ID：13200366
> 
> 赞同：0
> 
> 时间：2012-11-02T17:36:56.870
> 
> 标签：spring, web-services, jax-ws, webservice-client, applicationcontext

我正在使用 Maven 3.0.3 和 Spring 3.1.1.RELEASE。我想自动装配一个 Web 服务客户端，我正在使用 jaxws-maven-plugin 生成其类...

```
<plugin>
     <groupId>org.codehaus.mojo</groupId>
             <artifactId>jaxws-maven-plugin</artifactId>
                    <executions>
                           <execution>
                                <goals>
                                  <goal>wsimport</goal>
                                 </goals>
                                 <configuration>
                                      <wsdlUrls>
                                         <wsdlUrl>${wsdl.url}</wsdlUrl>
                                      </wsdlUrls>
                                 <sourceDestDir>${basedir}/src/main/java</sourceDestDir>
                                 <packageName>org.myco.myws</packageName>
                                 </configuration>
                         </execution>
                  </executions>
</plugin> 
```

但是，我对如何设置我的 Spring 应用程序上下文感到困惑。我有

```
 <bean id="organizationWebService" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean">
        <property name="serviceInterface" value="org.myco.myws.OrganizationWebService" />
        <property name="namespaceUri" value="http://myco.org/myws/" />
        <property name="serviceName" value="api" />
        <property name="endpointAddress" value="http://hbs-01.qa2.myco.cb:8443/bsg/myws/OrganizationService?WSDL" />
    </bean> 
```

但我得到这个错误。请注意“相关原因：WSDL 元数据不可用于创建代理”。我该如何正确配置这个东西？

```
java.lang.IllegalStateException: Failed to load ApplicationContext^M
        at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)^M
        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)^M
        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)^M
        at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)^M
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)^M
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)^M
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)^M
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)^M
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)^M
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)^M
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)^M
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)^M
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)^M
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)^M
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)^M
        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)^M
        at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)^M
        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)^M
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)^M
        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)^M
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)^M
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)^M
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)^M
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)^M
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)^M
        at java.lang.reflect.Method.invoke(Method.java:597)^M
        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)^M
        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)^M
        at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)^M
        at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)^M
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)^
    ...
Related cause: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;organizationWebService&apos; defined in class path resource [testAppContextHSQL.xml]: Invocation of init method failed; nested exception is javax.xml.ws.WebServiceException: WSDL Metadata not available to create the proxy, either Service instance or ServiceEndpointInterface org.myco.myws.OrganizationWebService should have WSDL information 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:13:29.717

您在 Spring 配置中缺少 WSDL 文档 URL：

```
<bean id="organizationWebService" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean">
    <property name="serviceInterface" value="org.myco.myws.OrganizationWebService" />
    <property name="namespaceUri" value="http://myco.org/myws/" />
    <property name="serviceName" value="api" />
    <property name="endpointAddress" value="http://hbs-01.qa2.myco.cb:8443/bsg/myws/OrganizationService" />
    <property name="wsdlDocumentUrl" value="classpath:org/myco/mywscampaignmonitor/mywscampaignmonitor.wsdl" />
</bean> 
```

使用上述配置，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-13T06:59:53.477

面对同样的问题，事实证明，我错过了这些依赖：

```
 <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http</artifactId>
        <version>3.0.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-frontend-jaxws</artifactId>
        <version>3.0.0</version>
    </dependency> 
```

只需将它们添加到我的类路径即可解决问题。

# touch - 更改视图时选择字段事件丢失

> ID：13200372
> 
> 赞同：0
> 
> 时间：2012-11-02T17:37:09.397
> 
> 标签：touch, extjs, onchange, event-listener

我的所有选择字段都有一个奇怪的问题。当我第一次进入一个视图时，它包含一个带有在控制器中定义的更改事件侦听器的选择字段，它工作正常。我可以做一个选择，事件就会触发。但是当我进入另一个视图并弹出该视图以便我返回带有选择字段的视图时，更改事件不再触发。选定的值也消失了。我试图将侦听器添加到视图中的配置中，但这根本不起作用？

这或多或少是我正在做的一个例子。

控制器：

```
Ext.define('MyApp.controller.Search', {
    extend: 'Ext.app.Controller',
    config: {
        refs:{
            distanceSelect:'#distanceSelect',
        },
        control:{
            distanceSelect:{
                change:'filterSearchList',
            },
        }
    },

    filterSearchList:function(){
        alert('42!!');
    }
}); 
```

看法：

```
Ext.define('Abedrijven.view.search.Search_main', {
    extend:'Abedrijven.view.Screen',
    alias:'widget.search_main',
    requires:[
        'Ext.field.Select',
    ],

    config:{
        items:[{
           xtype: 'selectfield',
           id: 'distanceSelect',
           name:'distance',
           options: [{
               text: '- All -',
               value: '0'
           }, {
               text: '5 Km.',
               value: '5'
           }, {
               text: '10 Km.',
               value: '10'
           }
        }]
    }
}); 
```

**编辑**

我的 app.js 中有这个。当我想改变视图时，我会调用这些。

```
launch: function() {
    // Destroy the #appLoadingIndicator element
    Ext.fly('appLoadingIndicator').destroy();

    // Initialize the main view
    var view = Ext.create('Abedrijven.view.Main');
    Ext.Viewport.add(view);

    Abedrijven.app.view = view;

    Abedrijven.app.pushView = function(xtype,data){
        Abedrijven.app.view.push({xtype:xtype,data:data});
    }

    Abedrijven.app.popView = function(){
        Abedrijven.app.view.pop();
    },

    Abedrijven.app.goHome = function(){
        Abedrijven.app.view.reset();
    }

    Abedrijven.app.view.add({xtype:'home_main'});
}, 
```

我的主要观点：

```
Ext.define("Abedrijven.view.Main", {

extend:'Ext.NavigationView',
requires:[
    'Ext.Toolbar',
    'Ext.tab.Panel',
    'Ext.TitleBar',
],
alias:'widget.main',
id:'mainview',

config:{
    cls:['mainview'],
    fullscreen: true,
    ui:'dark',
    items:[ 
```

第一次一切正常时，更改为其他视图，然后更改回此视图，更改事件不会触发。我正在使用 ST 2.0.1.1 GPL。在 iOS 和浏览器上测试。

任何帮助都会很棒！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:56:13.097

我遇到了同样的问题，因为我使用的是在运行时定义和实例化的视图。第一次很好，第二次控制器正在失去听众。

我简单地使用 dom 子查询解决了这个问题。

配置：{ refs：{ RecordTypeSelectField：' **NewRecordPanel** #recordTypeSelectField'

Essentially you simply add the parent container to the query key. That's all!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:35:57.943

我发现了这个错误。我使用的是**id**，但**itemId**更好。[这是帮助我](https://stackoverflow.com/a/10624087/536590)弄清楚这一点的答案。

```
id:'myid' 
```

替换为

```
itemId:'myid' 
```

需要更改一些代码才能再次获得正确的元素，但现在它可以工作了

# objective-c - 修剪变量并分配给自己似乎不起作用

> ID：13200373
> 
> 赞同：0
> 
> 时间：2012-11-02T17:37:12.233
> 
> 标签：objective-c, ios

我有一个表单字段，我得到这样的输入：

```
 NSString *name = personName.text; 
```

然后我这样做：

```
NSString *name = [name stringByTrimmingCharactersInSet:
              [NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

但是多余的字符串似乎并没有消失。我做错了什么吗？当我获得字段值时，有没有办法正确地进行修剪，而不会在输入为 nil 的情况下跳闸，从而不会产生异常？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:05:19.893

我不确定，但我认为您不应该再次创建“名称”。直接赋值就行了。像：name = [name stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:40:30.407

`name`当is时，上面的代码应该不是问题`nil`。在 Objective-C 中允许向 发送消息，`nil`结果将再次为`nil`. 问题必须出在其他地方。当您尝试使用 else 时，可能在这部分之后的某个地方`name`，例如将其添加到数组或字典中。

考虑将 a 替换`nil` `name`为空字符串。

```
if (!name) name = @""; 
```

# asp.net-mvc - ASP.NET MVC 4 应用程序调用远程 WebAPI

> ID：13200381
> 
> 赞同：61
> 
> 时间：2012-11-02T17:37:44.383
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我过去创建了几个 ASP.NET MVC 应用程序，但我以前从未使用过 WebAPI。我想知道如何创建一个简单的 MVC 4 应用程序，该应用程序通过 WebAPI 而不是通过普通的 MVC 控制器执行简单的 CRUD 操作。诀窍是 WebAPI 应该是一个单独的解决方案（事实上，很可能在不同的服务器/域上）。

我怎么做？我错过了什么？是否只是设置指向 WebAPI 服务器的路由的问题？我发现的所有显示如何使用 MVC 应用程序使用 WebAPI 的示例似乎都假设 WebAPI 已“嵌入”到 MVC 应用程序中，或者至少位于同一台服务器上。

哦，澄清一下，我不是在谈论使用 jQuery 的 Ajax 调用......我的意思是 MVC 应用程序的控制器应该使用 WebAPI 来获取/放置数据。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-11-03T06:25:21.273

您应该使用新的 HttpClient 来使用您的 HTTP API。我还可以建议您使您的呼叫完全异步。由于 ASP.NET MVC 控制器动作支持基于任务的异步编程模型，它非常强大和简单。

这是一个过于简化的例子。以下代码是示例请求的帮助程序类：

```
public class CarRESTService {

    readonly string uri = "http://localhost:2236/api/cars";

    public async Task<List<Car>> GetCarsAsync() {

        using (HttpClient httpClient = new HttpClient()) {

            return JsonConvert.DeserializeObject<List<Car>>(
                await httpClient.GetStringAsync(uri)    
            );
        }
    }
} 
```

然后，我可以通过我的 MVC 控制器异步使用它，如下所示：

```
public class HomeController : Controller {

    private CarRESTService service = new CarRESTService();

    public async Task<ActionResult> Index() {

        return View("index",
            await service.GetCarsAsync()
        );
    }
} 
```

您可以查看下面的帖子，了解使用 ASP.NET MVC 进行异步 I/O 操作的效果：

[我对 C# 5.0 和 ASP.NET MVC Web 应用程序中基于任务的异步编程的看法](http://www.tugberkugurlu.com/archive/my-take-on-task-base-asynchronous-programming-in-c-sharp-5-0-and-asp-net-mvc-web-applications)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-05T18:50:14.037

感谢大家的回复。我认为@tugberk 让我走上了正确的道路。这对我有用...

对于我的 CarsRESTService 助手：

```
public class CarsRESTService
{
    readonly string baseUri = "http://localhost:9661/api/cars/";

    public List<Car> GetCars()
    {
        string uri = baseUri;
        using (HttpClient httpClient = new HttpClient())
        {
            Task<String> response = httpClient.GetStringAsync(uri);
            return JsonConvert.DeserializeObjectAsync<List<Car>>(response.Result).Result;
        }
    }

    public Car GetCarById(int id)
    {
        string uri = baseUri + id;
        using (HttpClient httpClient = new HttpClient())
        {
            Task<String> response = httpClient.GetStringAsync(uri);
            return JsonConvert.DeserializeObjectAsync<Car>(response.Result).Result;
        }
    }
} 
```

然后对于 CarsController.cs：

```
public class CarsController : Controller
{
    private CarsRESTService carsService = new CarsRESTService();

    //
    // GET: /Cars/

    public ActionResult Index()
    {
        return View(carsService.GetCars());
    }

    //
    // GET: /Cars/Details/5

    public ActionResult Details(int id = 0)
    {
        Car car = carsService.GetCarById(id);

        if (car == null)
        {
            return HttpNotFound();
        }
        return View(car);
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-03T09:07:43.640

您可以使用 WCF 来使用该服务。像这样：

```
[ServiceContract]
public interface IDogService
{
    [OperationContract]
    [WebGet(UriTemplate = "/api/dog")]
    IEnumerable<Dog> List();
}

public class DogServiceClient : ClientBase<IDogService>, IDogService
{
    public DogServiceClient(string endpointConfigurationName) : base(endpointConfigurationName)
    {
    }

    public IEnumerable<Dog> List()
    {
        return Channel.List();
    }
} 
```

然后你可以在你的控制器中使用它：

```
public class HomeController : Controller
{
    public HomeController()
    {
    }

    public ActionResult List()
    {
        var service = new DogServiceClient("YourEndpoint");
        var dogs = service.List();
        return View(dogs);
    }
} 
```

在您的 web.config 中放置端点的配置：

```
<system.serviceModel>
  <client>
    <endpoint address="http://localhost/DogService" binding="webHttpBinding"
    bindingConfiguration="" behaviorConfiguration="DogServiceConfig" 
    contract="IDogService" name="YourEndpoint" />
  </client>
  <behaviors>
    <endpointBehaviors>
      <behavior name="DogServiceConfig">
        <webHttp/>
      </behavior>
    </endpointBehaviors>
  </behaviors>
</system.serviceModel> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T17:47:14.183

[http://restsharp.org/](http://restsharp.org/)是您问题的答案。我目前在具有类似结构的应用程序中使用它。

但更一般地说，使用 WebAPI 只是发布和请求数据，如何处理取决于您。你甚至可以使用标准的 WebRequest 和 JavascriptSerializer。

干杯。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-03T03:36:34.380

在这种情况下，您可以使用[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)从控制器中使用 Web API。

# facebook - 打开图形标签不起作用，同时 google+ 工作正常

> ID：13200383
> 
> 赞同：0
> 
> 时间：2012-11-02T17:37:50.570
> 
> 标签：facebook, api, facebook-graph-api, facebook-opengraph, meta-tags

[http://www.malayalam-dictionary.com/在](http://www.malayalam-dictionary.com/)[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)的指导下开发了 Facebook 开放图形标签

通过facebook分享链接时，它不起作用 ![在此处输入图像描述](../Images/4ce7baf43977c73cf231a947f721bf78.png)

同时 google+ 准确地显示了预期:) ![在此处输入图像描述](../Images/2c0dbdca1877b843d0fdc66b5e0e1e53.png)

这是代码

```
<meta property="og:title" content="A complete Malayalam English Dictionary" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://www.malayalam-dictionary.com/" />
<meta property="og:image" content="http://www.malayalam-dictionary.com/images/logo.jpeg" />
<meta property="og:site_name" content="malayalam-dictionary.com" />
<meta property="og:description" content="A complete Malayalam dictionary." />
<meta property="fb:admins" content="100001641332681" /> 
```

[**演示**](http://www.malayalam-dictionary.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:21:19.550

当我把它放在脸书上时，它显示得很好。

如果 OG 标签不起作用，请始终检查调试器中的链接：

[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.malayalam-dictionary.com%2F](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.malayalam-dictionary.com%2F)

它还会刷新 OG 数据。

# android - 如何在 ubuntu 的 Oracle JDK 7 中使用 keytool？

> ID：13200387
> 
> 赞同：1
> 
> 时间：2012-11-02T17:38:17.060
> 
> 标签：android, java-7, keytool

我需要一个 MD5 证书才能在 android 的 MapView 中使用。我安装了 Oracle 的 JDK 7。但是跑步

```
keytool -v -list -alias alias_name -keystore my-release-key.keystore 
```

没有给我结果，而是说要安装openjdk。如何在 oracle jdk 7 中使用 keytool。我使用的是 ubuntu 12.04 64 位。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T16:55:39.613

您可以通过执行以下操作来使用 keytool：

```
cd /usr/lib/jvm/jdk1.7.0/bin
./keytool -v -list -alias alias_name -keystore my-release-key.keystore 
```

默认情况下，Keytool 不在您的路径中，但它不必在您的路径中才能使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:59:22.490

看起来你的 jdk 安装有问题。

检查是否有任何环境变量或路径条目指向错误的 JDK 版本。

# java - 基本箭头按钮高度

> ID：13200392
> 
> 赞同：2
> 
> 时间：2012-11-02T17:38:45.830
> 
> 标签：java, size, height, overriding

我正在尝试将我的 BasicArrowButtons 更改为更高或更改它的最小尺寸，以便将其放在面板的南部。到目前为止，我尝试覆盖paint(Graphics g) 以使用我的fontSize 而不是它的defaultSize，但这并没有改变它在面板中的适合方式。

```
 rightUsers=new BasicArrowButton(BasicArrowButton.LEFT){

        @Override
        public void paint(Graphics g)
          {
            super.paint(g);
            Insets insets = getInsets();
            Rectangle bounds = getBounds();
            int x = insets.left
                    + (bounds.width - insets.left - insets.right - fontSize) / 2;
            int y = insets.top
                    + (bounds.height - insets.left - insets.right - fontSize) / 2;
            paintTriangle(g, x, y, fontSize, direction, isEnabled());
          }
  }; 
```

如果有办法将 defaultSize 更改为我的尺寸，那将是最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:02:36.693

BasicArrowButton 的源代码可以在这里找到：

[http://www.jdocs.com/javase/7.b12/javax/swing/plaf/basic/BasicArrowButton.html](http://www.jdocs.com/javase/7.b12/javax/swing/plaf/basic/BasicArrowButton.html)

该`paint()`函数用于`getSize()`确定按钮的大小。您可以尝试使用`setSize`，或者您可以尝试复制/粘贴该代码并进行所需的更改。

# git - 我如何才能返回到特定的 GIT 提交而不会错过从该日期到现在的任何更改？

> ID：13200395
> 
> 赞同：2
> 
> 时间：2012-11-02T17:38:51.103
> 
> 标签：git, commit, restore, rollback

我有一个提交列表，我想恢复它们，但不要弄乱其余的更改...我只想恢复对该提交所做的更改，可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:45:07.170

如果我理解您的问题，您正在尝试撤销在当前 HEAD 之前一段时间的提交，而不是在之后撤销提交。

为此，请使用`git revert <commit>`

`git revert`创建一个反转指定提交的新提交。

手册页：[http ://www.kernel.org/pub/software/scm/git/docs/git-revert.html](http://www.kernel.org/pub/software/scm/git/docs/git-revert.html)

# jquery - 原型.js Element.addMethods

> ID：13200398
> 
> 赞同：2
> 
> 时间：2012-11-02T17:39:00.847
> 
> 标签：jquery, plugins, prototypejs

在对如何构建 jQuery 插件有了基本的了解之后，我一直在寻找也将其转换为 Prototype。

我在 [这里](http://ajaxian.com/archives/prototype-and-jquery-a-code-comparison)和插件/扩展幻灯片上找到了这个演示文稿，它显示：

在**jQuery**中： `jQuery.fn.myPlugin = function(args) {return: this;};`

在**原型**中：

```
Element.addMethods({
  myPlugin: function(element) { 
  return element;
  }
}); 
```

我设法像这样将我的简单插件转换为原型，但现在我想知道这是否实际上是编写它的*正确*方法，或者是否应该实际使用类。我对 OOP 中的类知之甚少，但在 Google 上搜索 Element.addMethods 也没有得到太多启发。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:45:47.160

迟到的回复，但根据您的评论，我肯定会为此创建一个课程。

当您想要执行与元素实例相关的功能时，扩展元素很有用。通常，至少对于 Prototype 提供的那些，它们具有更多的实用性质：更改属性值、从 dom 添加/删除等。

我真的无法想象一个元素方法可以包含手风琴所需的所有逻辑。您提到您希望能够在同一页面上拥有多个手风琴 - 这并不要求它是元素方法。[您可以定义一个手风琴类](http://www.prototypejs.org/learn/class-inheritance)，然后为每个要使用它的位置实例化它。

假设您的手风琴类要求您拥有一个容器 div，并且所有打开/关闭选项卡（或者您想要定义它们）都是直接后代。您的标记将如下所示：

```
<div id="accordion1">
  <div class="slide"><!-- content --></div>
  <div class="slide"><!-- content --></div>
  <div class="slide"><!-- content --></div>
</div> 
```

你会设置你的课程：

```
var MyAccordion = Class.create({
  initialize: function(containingElement) {
    var slides = $(containingElement).select('.slide');
    ... do all your other stuff, hook up event handlers to open/close, etc
  }
}); 
```

并像这样实例化它：

```
new MyAccordion($('accordion1')); 
```

这肯定会让你有多个实例。这就是使用类的全部意义所在。

如果要扩展 Element 以添加方法，则必须执行以下操作来实例化：

```
$('accordion1').accordion(); 
```

您的所有功能都需要在一个方法中，这似乎不如创建类灵活。只是感觉有点奇怪和错误，也是。

希望这可以帮助。如果您有任何问题，请告诉我。

# html - 带有显示的项目内绝对位置的 Firefox 问题：table-cell

> ID：13200399
> 
> 赞同：1
> 
> 时间：2012-11-02T17:39:03.187
> 
> 标签：html, css, firefox

我有 3 个 li，我试图水平排列，然后在每个 li 内放置一个跨度。

跨度在 Chrome 中正确定位，但在 Firefox 中的 li 边界之外。

[http://jsfiddle.net/brendan_rice/mPnCh/1/](http://jsfiddle.net/brendan_rice/mPnCh/1/)

有人可以帮忙吗？

```
<div id="blank-slate-steps">
   <ul>
      <li class="first">
         <h3><em>Step 1</em>Create Something</h3>
         <p>Once you have created Something Else you can Create Final Thing</p>
         <span></span>
      </li>
      <li class="second">
         <h3><em>Step 2</em>Create Something Else</h3>
         <p>Once you have created Something Else you can Create Final Thing</p>
         <span></span>
      </li>
      <li class="third">
         <h3><em>Step 3</em>Create Final Thing</h3>
         <p>Once you have created Something Else you can Create Final Thing</p>
         <span></span>
      </li>
   </ul>
</div>​ 
```

CSS

```
body{
padding-top: 300px;
}
#blank-slate-steps {
    background-color: #E8E8E8;
    bottom: 0;
    font-family: OpenSansCondensedBold,sans-serif;
    text-align: center;
    width: 100%;
}
#blank-slate-steps li {
    display: table-cell;
    max-width: 300px;
    padding: 40px;
    position: relative;
    width: 300px;
}
#blank-slate-steps h3 {
    font-size: 1.6em;
    margin-bottom: 0.6em;
}
#blank-slate-steps h3 em {
    color: #878787;
    float: left;
    font-size: 0.8em;
    font-style: normal;
    margin-bottom: 4px;
    text-transform: uppercase;
    width: 100%;
}
#blank-slate-steps li.second span {
    background: red url("../images/sprite/icons-grey-38.png") no-repeat scroll 0 -56px transparent;
    height: 37px;
    width: 36px;
}
#blank-slate-steps span {
background-color: red;
    display: block;
    height: 20px;
    left: -10px;
    position: absolute;
    top: 50px;
    width: 20px;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T17:56:13.240

对空白步骤 div 使用相对位置。

```
#blank-slate-steps {
    background-color: #E8E8E8;
    bottom: 0;
    font-family: OpenSansCondensedBold,sans-serif;
    text-align: center;
    width: 100%;
    position: relative;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:47:45.310

好的，我已经成功了，你可以这样做：[fiddle](http://jsfiddle.net/mPnCh/2/)

解释：我所做的是，我用`position: relative;`了，`#blank-slate-steps`然后`position: relative;`再用了`div`，把内容包裹在`<li>`里面

HTML

```
<div id="blank-slate-steps">
   <ul>
      <li class="first">
          <div style="position: relative;">
         <h3><em>Step 1</em>Create Something</h3>
         <p>Once you have created Something Else you can Create Final Thing</p>
         <span></span>
          </div>
      </li>
      <li class="second">
          <div style="position: relative;">
         <h3><em>Step 2</em>Create Something Else</h3>
         <p>Once you have created Something Else you can Create Final Thing</p>
         <span></span>
           </div>
      </li>
      <li class="third">
          <div style="position: relative;">
         <h3><em>Step 3</em>Create Final Thing</h3>
         <p>Once you have created Something Else you can Create Final Thing</p>
         <span></span>
          </div>
      </li>
   </ul>
</div> 
```

CSS

```
body{
    padding-top: 300px;
}
#blank-slate-steps {
    background-color: #E8E8E8;
    bottom: 0;
    font-family: OpenSansCondensedBold,sans-serif;
    text-align: center;
    width: 100%;
    position: relative;
}
#blank-slate-steps li {
    display: table-cell;
    max-width: 300px;
    padding: 40px;
    width: 300px;
}
#blank-slate-steps h3 {
    font-size: 1.6em;
    margin-bottom: 0.6em;
}
#blank-slate-steps h3 em {
    color: #878787;
    float: left;
    font-size: 0.8em;
    font-style: normal;
    margin-bottom: 4px;
    text-transform: uppercase;
    width: 100%;
}
#blank-slate-steps li.second span {
    background: red url("../images/sprite/icons-grey-38.png") no-repeat scroll 0 -56px transparent;
    height: 37px;
    width: 36px;
}
#blank-slate-steps span {
    background-color: red;
    display: block;
    height: 20px;
    left: -10px;
    position: absolute;
    top: 50px;
    width: 20px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T17:52:08.510

试着把你的跨度放在第一位：

```
<li class="second">
     <span></span>
     <h3><em>Step 2</em>Create Something Else</h3>
     <p>Once you have created Something Else you can Create Final Thing</p>
  </li> 
```

并将跨度放入`position:relative`和`float:left`

# sql - WHERE 子句中的 SQL 日期比较，TypoScript

> ID：13200407
> 
> 赞同：0
> 
> 时间：2012-11-02T17:39:21.970
> 
> 标签：sql, date, typo3, where, typoscript

我想比较 TypoScript 选择中的日期。这是我所拥有的（请注意，我评论了**are**子句）：

```
lib.my_val = CONTENT
lib.my_val {
  select {
    pidInList = 100000
    max = 1
    #where = effective_date < CURDATE()
    #where = TIMESTAMP(effective_date) < NOW()
    orderBy = effective_date DESC
  }
  table = tx_my_table
  renderObj = COA
  renderObj {
    5 = TEXT
    5{
      field = my_field
      wrap = <span>|</span>
    }
    [...]
  }
} 
```

哪个返回行。

我尝试使用静态日期或变量以任何方式添加**where语句......但没有成功。**我对**where**子句的理解*是*，在 SQL 查询中`=`转储之后的所有内容。但似乎我错过了什么。

 *基本上我希望 TypoScript 生成一个与此类似的 SQL 查询：

`SELECT * FROM tx_my_table WHERE effective_date < NOW() ORDER BY effective_date DESC LIMIT 1;`

这应该很简单。过去有没有人这样做过？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:40:23.780

您的 TypoScript 似乎没问题。

*   如果将 SQL Query 直接输入 MySQL 会发生什么？
*   请注意，使用您的代码，只`pid=100000`选择了一条记录。
*   你有没有试过这个：

--

```
lib.my_val {  
       select {  
        pidInList = 100000  
        max = 1  
        where = UNIX_TIMESTAMP(effective_date) < UNIX_TIMESTAMP()  
        orderBy = UNIX_TIMESTAMP(effective_date) DESC  
      }  
      table = tx_my_table  
    } 
```

[TYPO3 Wiki 上的选择](http://wiki.typo3.org/TSref/select)*

# sql-server - 插入记录后如何将文件保存（上传）到数据库

> ID：13200408
> 
> 赞同：0
> 
> 时间：2012-11-02T17:39:26.660
> 
> 标签：sql-server

我在一些示例使用中看到的：

```
string strQuery = "insert into tblFiles(Name, ContentType, Data)" + 
                  " values (@Name, @ContentType, @Data)" 
```

用于将文件保存到数据库。

现在，如果我有一个现有的表，其中有一些行和一些不同的填充列，并且在向`Name, ContentType, Data`这个现有表添加新列 () 之后，我喜欢上传或保存文件。

我必须使用什么 SQL 语句来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:43:28.800

如果数据字段是`binary`字段，则您拥有的 INSERT 语句应该可以工作。但是，始终最好将文件保存在文件系统中，并将链接存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:44:30.113

这里大致是你需要做的：

1.  在某些服务器端代码中获取文件内容并将其转换为字节数组（SQL Server 之外）
2.  使用字节数组将文件插入数据库

这是使用 ASP.Net MVC 的示例：

[ASP MVC 2 将文件上传到数据库（blob）](https://stackoverflow.com/questions/3461638/asp-mvc-2-uploading-file-to-database-blob)

# android - 如何实现径向饼形菜单

> ID：13200411
> 
> 赞同：4
> 
> 时间：2012-11-02T17:39:36.823
> 
> 标签：android, menu, radial, pie-chart

我想在我的 android 应用程序上实现一个看起来像[Labbler 的菜单的径向 / 饼形菜单。](https://labbler.com/)它应该是类似的，但更简单一点的按钮，显示在饼图布局上，只是导致另一个活动。

有没有图书馆可以做到这一点？否则我怎么能这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T18:07:23.347

你可以检查这个：

[径向菜单小部件-Android strider2023](https://github.com/strider2023/Radial-Menu-Widget-Android)

和这个

[径向菜单小部件](http://code.google.com/p/radial-menu-widget/)

# asn.1 - 将 DN 从 ASCII 字符串转换为 ASN.1 DER 编码的 API

> ID：13200415
> 
> 赞同：0
> 
> 时间：2012-11-02T17:39:52.490
> 
> 标签：asn.1, der

是否有任何 API/C 程序可以将 ASCII 字符串格式的专有名称（DN）转换为 DER 编码的 ASN.1 DN？

例如，我想以 ASN.1 DER 格式对该字符串“C=CH, O=Texas, CN=iss”进行编码，以便发送数据包。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:05:48.303

这是 ITU-T X.500 系列建议的一部分。我假设您已经拥有包含此专有名称的 ASN.1 规范。如果没有，您可以从[http://www.itu.int/rec/T-REC-X.500/en](http://www.itu.int/rec/T-REC-X.500/en)获得。然后，您需要一个 ASN.1 Toolkit 来简化此操作。可在[http://www.itu.int/ITU-T/asn1/links/index.htm](http://www.itu.int/ITU-T/asn1/links/index.htm)找到 ASN.1 工具（一些免费，一些商业）的重要列表。

您将 ASN.1 规范（来自 X.500）提供给 ASN.1 编译器，该编译器将以您的目标语言（听起来像您的语言是 C）生成编码器/解码器，以将您的信息从 C 结构转换为 DER 二进制流反之亦然。

[http://asn1-playground.oss.com](http://asn1-playground.oss.com)这是一个在线ASN.1编译器和编码器/解码器，您可以使用它来查看给定您的值，您的 ASN.1 规范将产生什么编码。

# objective-c - 如何使 UITableView 看起来像联系人中的那个？

> ID：13200420
> 
> 赞同：3
> 
> 时间：2012-11-02T17:40:04.047
> 
> 标签：objective-c

我试图让`UITableViewController`看起来像下面。（它有图片和几行供某人识别。）

我想知道如何以编程方式跟随。

如何调整`UITableViewCell`origin.x 和宽度？如何在左上角添加图片？

请帮助我..我会感谢你的。

![在此处输入图像描述](../Images/a9cbac62dd67131667e4a10354222801.png)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell;

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SimpleTableIdentifier];

    cell.frame = CGRectMake(50, 0, 250, 44) <--- ?????? I think this is wrong way.

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:46:14.800

`UITableViews`我最好的选择是在 a中有两个静态`UIScrollView`或者它是一些自定义子类`UIView`设置为`tableHeaderView`和样式看起来像在图片上。如果我要实施它，我会选择第二个选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:46:23.677

做一个子类`UITableView`。为您的子类属性提供参考照片井和三个特殊行单元格的属性。

覆盖`layoutSubviews`调用`[super layoutSubviews]`然后设置照片的框架和三个特殊的行单元格。

照片井不应该是细胞。

# ios - 更改 UIView 按钮操作

> ID：13200425
> 
> 赞同：0
> 
> 时间：2012-11-02T17:40:37.720
> 
> 标签：ios, uiview, uibutton

我有一个视图，上面有三个按钮。

当其中任何一个被按下时，它会调用一个带有另一个按钮的自定义 UIView。

我想做的是将自定义视图按钮更改为不同的操作，具体取决于称为新视图的按钮。

希望这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:51:04.437

我建议您为自定义视图动态创建按钮：

```
CGRect buttonFrame = CGRectMake( 10, 280, 100, 30 );
UIButton *button = [[UIButton alloc] initWithFrame: buttonFrame];
[button setTitle: @"My Button" forState: UIControlStateNormal];
[self.view addSubview: button];
if(//clicked button 1)
 {
     [button addTarget: self 
           action: @selector(action1:) 
 forControlEvents: UIControlEventTouchDown];
 }
 else if(//clicked button 2)
 {
     [button addTarget: self 
           action: @selector(action2:) 
 forControlEvents: UIControlEventTouchDown];
 }
else
 {
     [button addTarget: self 
           action: @selector(action3:) 
 forControlEvents: UIControlEventTouchDown];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:51:34.170

我相信你可以做这样的事情来动态地向按钮添加动作：

```
UIButton *button = [UIButton alloc] init]
[button addTarget:self action: @selector(pressButton:) forControlEvents:UIControlEventTouchUpInside]; 
```

希望有帮助！

# jquery - 是否可以仅使用 jquery、javascript 和 mysql 创建站点？

> ID：13200426
> 
> 赞同：0
> 
> 时间：2012-11-02T17:41:02.527
> 
> 标签：jquery, mysql

我想知道是否可以在服务器上使用 Javascript，但不使用 PHP 或 ASP。这是一种常见的做法吗？

我想访问 mysql db，但我不喜欢使用 PHP 或 ASP。所以只使用 Javascript 服务器代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:43:41.380

> 在服务器上使用 Javascript

如果您的意思是*在浏览器中运行的客户端 Javascript 执行*直接在服务器上更改内容的操作，那么答案是否定的。您需要在服务器端运行一个层来验证访问、存储数据等。如果使用客户端 JavaScript 可以做到这一点，那么每个人和他们的狗都可以更改您的网站。你会怎么想？

有[服务器端 JavaScript 实现](http://en.wikipedia.org/wiki/JavaScript#Server-side_JavaScript)，但我认为这不是您所要求的。它们需要特定的服务器端设置。

# java - 添加到 HashMap 可以提供 NPI

> ID：13200427
> 
> 赞同：0
> 
> 时间：2012-11-02T17:41:06.000
> 
> 标签：java, static, nullpointerexception, hashmap

在我在启动时运行的主类中，它尝试将一些数据放入 HashMap。但是它说HashMap为null，并且它不能添加数据。

```
public class COD extends JavaPlugin{

    public void loadConfig(){
        Settings.gunradius.put("Famas", getConfig().getInt("guns.Famas"));
    }
}

public class Settings {
    static HashMap<String, Integer> gunradius;
} 
```

它不会将数据放入 HashMap 中。我怀疑这与静态方法有关，但我真的不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:41:56.670

改变

```
 static HashMap<String, Integer> gunradius; 
```

至

```
 static HashMap<String, Integer> gunradius= new HashMap<String, Integer(); 
```

否则您`gunradius`将指向`null`.

对引用的任何操作都会`null`导致`NullPointerException`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T17:42:13.243

您需要`HashMap`在使用它之前进行初始化。内化到对象的默认值是`null`

```
static final Map<String, Integer> gunradius = new HashMap<String, Integer>(); 
```

# c# - 无法在 EF 对象上查询名为“组”的属性

> ID：13200430
> 
> 赞同：2
> 
> 时间：2012-11-02T17:41:10.670
> 
> 标签：c#, linq, entity-framework, entity-framework-5

我有一个`sysSettings`具有一些属性的 EF 实体对象类。`group`并且`name`在这些属性中。

`quer`在下面的代码中是一个`IQueryable<sysSettings>`对象。

在尝试编写以下查询时，我在使用第二个 where 子句时遇到了困难。

```
var query = from setting in quer
    where (setting.name.Equals("Url") && setting.group.Equals("system"))
select setting; 
```

似乎当我在名为 Entity 的对象上有一个属性时，`group`我无法从 LINQ 查询中访问该属性。

我认为这可能是因为`group`可能是 LINQ 中的保留/上下文工作/操作。

不幸的是，更改实体的属性名称不是一种选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:16:33.450

将`@`符号添加到您的属性名称（仅用于查询，不要更改设置类定义）：

```
var query = from setting in quer
            where (setting.name.Equals("Url") && setting.@group.Equals("system"))
            select setting; 
```

此符号允许您使用保留字（即`group`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:07:35.017

如果你用流利的语法写作怎么办？

```
var query = quer.Where(e => e.name.Equals("Url") &&
                            e.group.Equals("system")); 
```

# jquery - 当当前 div 中的输入具有焦点时，jQuery 选择器抓取前一个 div

> ID：13200431
> 
> 赞同：0
> 
> 时间：2012-11-02T17:41:11.507
> 
> 标签：jquery

我有以下html结构

```
<div id="container">
  <div class="label">
    @Html.LabelFor(m => m.SomeProperty) 
  </div>
  <div class="input">
    @Html.EditorFor(m => m.SomeProperty) 
  </div>
<!--on and on-->
</div> 
```

我想要做的是在标签 div 上设置背景颜色，当相应 div 中的输入具有焦点时。

换句话说，当用户单击（或选项卡） SomeProperty 的文本框时，我想通过向标签 div 添加一个 css 类来突出显示 SomeProperty 的标签。

我知道我可以在标签 div 上设置 class="SomeProperty" 然后有一些 jQuery 来添加一些 CSS，如下所示：

```
$('#container input').focus(function () {
  var thisId = $(this).attr('id');
  $('.' + thisId).addClass('highlight');
  //...
}); 
```

但我想知道是否有更好的方法。我真的不想为所有标签 div 分配类，因为它看起来很草率，而且可能很难在以后维护。

在我看来，我想写一个可以跳上一级的脚本，然后抓取上一个兄弟，可能是 parent() 和 prev() 的某种组合，但我一直没能做到。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:47:10.340

我建议，如果`.label`元素*总是*在元素之前`.input`：

```
$('#container input').focus(function(){
    $(this).closest('div').prev('div.label').addClass('highlight');
}); 
```

或者，允许更灵活的独立于 DOM 的方法：

```
$('#container input').focus(function(){
    $('div.label[for="' + this.id + '"]').addClass('highlight');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:47:49.750

您可以通过两种方式解决此问题..

一种是在 .closest() 上使用 .find()

**或这个**

使用**.prev()**

```
$('#container input').focus(function(){
    $(this).closest('.input').prev('.label').addClass('highlight');
}); 
```

使用**.prevAll()**

```
 $('#container input').focus(function(){
        $(this).closest('.input').prevAll('.label').first().addClass('highlight');
    }); 
```

# types - dnn 无法加载类型

> ID：13200437
> 
> 赞同：0
> 
> 时间：2012-11-02T17:41:34.753
> 
> 标签：types, dotnetnuke

我在 DotNetNuke 的帮助下创建了一个站点。将新模块添加到项目后，我单击构建解决方案，但出现错误“无法加载类型 XYZ”。我的模块定义

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="DemoRequestControl.ascx.cs" Inherits="ABC.Controls.DemoRequest.DemoRequestControl" %> 
```

DemoRequestControl.ascx.cs 文件命名空间

```
namespace ABC.Controls.DemoReport
{
    public partial class DemoReportControl : PortalModuleBase 
```

也许缺少一些参考，或者这是一个命名空间问题......我不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:22:51.883

这看起来不错。我相信您正在为您的模块使用 Web 应用程序项目并且没有设置构建路径。做这个：

*   项目属性 > 构建
*   选择您的 dnn 门户的 bin 目录作为输出路径。

这样，您的模块的 dll 将位于 /Bin 文件夹中，并且 dnn 可以加载程序集。

如果您需要任何其他帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T19:31:56.847

此错误的另一个常见原因是不兼容的 dll 文件。如果您安装/更新模块，则会发生这种情况。如果整个 DNN 站点出现故障并且您收到可怕的 DNN 错误并且部分 url 看起来像`/Default.aspx?tabid=56&error=Could+not+load+type+%27DotNetNuke....`，那么您可以通过以下方式恢复站点；

1.  转到[DNN Codeplex 站点](http://dotnetnuke.codeplex.com/)并下载当前 DNN 版本的**安装文件。**选择与您的 DNN 站点相同的版本***非常重要。***
2.  解压缩文件夹并打开**bin**文件夹。
3.  复制 bin 文件夹的全部内容。
4.  打开网站文件夹中的 bin 文件夹并粘贴到此文件夹中，替换旧的 dll 文件。
5.  再次启动您的网站，您应该重新开始营业。

# css - javafx2.2 制作透明背景的滚动条

> ID：13200439
> 
> 赞同：8
> 
> 时间：2012-11-02T17:41:40.833
> 
> 标签：css, background, scrollbar, javafx, skinning

我正在尝试通过在 javafx 2.2.3 中使用 css 对其进行样式设置来制作具有透明（或至少纯色）背景的滚动条的滚动窗格。

```
.scroll-pane .track{-fx-opacity: 0;}
.scroll-pane .scroll-bar{-fx-base: transparent;} 
```

奇怪的是，上面的代码使滚动条变黑了。用 alfa 给 -fx-base 任何值就可以了。

背景颜色根本没有效果......

我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T20:43:57.277

Here is a [sample](https://gist.github.com/2838292) which displays a scroll bar with a transparent background.

The sample includes some extra program logic to only show visual feedback on the scrollbar when the user hovers over the scrollbar - you may or may not need that.

The css related to the scrollbar in the sample is:

```
.address .scroll-pane {
  -fx-background-color: transparent;
}

.address .scroll-bar .increment-button {
  visibility: hidden;
}

.address .scroll-bar .decrement-button {
  visibility: hidden;
}

.address .scroll-bar:vertical {
  -fx-background-color: transparent;
}

.address .scroll-bar:vertical .track-background {
  visibility: hidden;
}

.address .scroll-bar:vertical .track {
  visibility: hidden;
}

.address .hide-thumb .scroll-bar:vertical .thumb {
  -fx-background-color: transparent;
} 
```

Where the scroll bar being made transparent has the additional custom style class of address assigned to it.

I determined the css to use by studying the scroll-bar section of the default JavaFX 2.2 css stylesheet [caspian.css](http://hg.openjdk.java.net/openjfx/2.2/master/rt/raw-file/tip/javafx-ui-controls/src/com/sun/javafx/scene/control/skin/caspian/caspian.css).

Output of the sample is:

![The Gettysburg address](../Images/e02b67bb1efb929deb778c881a86bba1.png)

# c++ - 使用指针反转列表的元素

> ID：13200440
> 
> 赞同：-1
> 
> 时间：2012-11-02T17:41:51.053
> 
> 标签：c++, arrays, algorithm, list, pointers

> **可能重复：**
> [如何向后读取单链表？](https://stackoverflow.com/questions/1116720/how-to-read-a-singly-linked-list-backwards)
> [反转LinkedList c ++](https://stackoverflow.com/questions/13033592/reverse-a-linkedlist-c)

如何不使用`reverse`连接的元素`list``arrays`

（我必须只使用指针，这就是我的问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:41:30.487

您不需要交换节点*内容*或堆栈。如果你想反转一个单链表，只需在迭代循环中用一对指针加上中间指针来遍历它。完成后不要忘记更新头指针；

```
void reverse_list(node **head)
{
    node *cur=NULL, *nxt=NULL;

    if (!(head || *head || (*head)->next))
        return;

    nxt = *head;
    while (nxt != NULL)
    {
        node *prv = cur;
        cur = nxt;
        nxt = nxt->next;
        cur->next = prv;
    }

    *head = cur;
} 
```

假设列表节点是这样的：

```
typedef struct node
{
    ..data..
    struct node *next;
} node; 
```

并且它得到了适当的管理，然后您可以这样调用：

```
node *head = NULL;

...fill the list...

reverse_list(&head); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:46:08.053

将列表视为堆栈，弹出元素并将它们推送到新列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:49:30.943

考虑一个名为的列表`lst`，它允许我们向后移动，即它是`doubly linked list`

`lst`您可以通过简单地交换开始和结束节点的内容来反转列表

```
void reverse(lst *beg,lst *end)
{
    lst temp;
    while(beg!=end)
    {
        //swap the content of the nodes
        *temp=*beg;
        *beg=*end;
        *end=*temp;

        beg=beg->Next();//move to next node
        end=end->prev();//move to previous node
    }
} 
```

* * *

**或者**

* * *

如果它是一个`singly linked list`，你可以使用`stack`

```
void reverse(lst* beg)
{
    stack<lst*> stc;
    lst* temp=beg;
    lst* temp1=beg;
    while(temp)//store pointers to lst nodes in stack
    {
        stc.push(temp);
        temp=temp.Next();
    }
    while(temp1)//pop the stack by inserting it into list from beginning
    {
       *temp1=*stc.top();
        temp1=temp1.Next(); 
        stc.pop();
    }
} 
```

# sql-server-2008 - 在 Access 中选择期间反转是/否字段

> ID：13200445
> 
> 赞同：2
> 
> 时间：2012-11-02T17:42:07.153
> 
> 标签：sql-server-2008, ms-access-2007, data-migration

有没有办法在 Access 中的选择语句期间反转是/否字段？我知道如何在 SQL 期间这样做，但这在 Access 中并不适用。

这是场景：

我正在将数据从 Access DB 迁移到 SQL DB。Access 中所述数据中的 Yes/No 字段是 obsolete_flag。相应地，在 SQL 中，我有 IsActive。SQL 的值需要反转，因为 IsActive 暗示它为真，而 obsolete_flag 表明它为假。

任何建议，将不胜感激。谢谢。

最诚挚的问候，查德·约翰逊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:37:54.503

好的，最简单的方法是将值加 1。这将反转是/否字段并同时使其兼容。

```
SELECT obsolete_flat+1 AS IsActive 
```

这会将 Access False 值 (0) 更改为 SQLServer True (1)，并将 Access True 值 (-1) 更改为 SQLServer False (0)。

你们只是想多了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:46:01.777

是/否有点，你可以用 `SELECT NOT obsolete_flat AS IsActive`.....

关于什么

`SELECT CASE WHEN obsolete_flag = 0 THEN 1 ELSE 0 END as IsActive`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:40:11.440

好吧，我想出了自己的解决方案。在将 obsolete_flag 插入 SQL 之前，我只是 foreach 循环了 Access 数据并反转了它的值。不优雅，但我猜是有效的。如果有人有办法在 SQL 或 Access 中做得更好，请告诉我，我会给你功劳。谢谢。

# jquery - jQuery使用元素名称创建数组多次显示

> ID：13200448
> 
> 赞同：0
> 
> 时间：2012-11-02T17:42:16.337
> 
> 标签：jquery

我有这段代码使用元素名称创建一个数组，但不是只显示一次，而是显示数组 4 次。我现在做错了什么？

HTML

```
<ul>
    <li><a draggable="true" href="#" id="one" name="uno" class="imgHvr">One</a></li>
    <li><a draggable="true" href="#" id="two" name="dos" class="imgHvr">2</a></li>
    <li><a draggable="true" href="#" id="three" name="tres" class="imgHvr">three</a></li>
    <li><a draggable="true" href="#" id="four" name="sweet" class="imgHvr">4</a></li>
</ul> 
```

jQuery

```
$("#subBtn").click(function() {
    var answers = []
    $('#bin a').each(function() {
        answers.push($(this).attr('name'));
        console.log(answers);
    })
}); 
```

我已经在这里发布了完整的代码[Demo](http://jsfiddle.net/G22ZA/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:50:44.183

在回答形式：

```
$("#subBtn").click(function() {
    var answers = []
    $('#bin a').each(function() {
        answers.push($(this).attr('name'));
    })
    console.log(answers);
}); 
```

# ruby-on-rails - 强制多态类型具有属性

> ID：13200449
> 
> 赞同：0
> 
> 时间：2012-11-02T17:42:20.993
> 
> 标签：ruby-on-rails, polymorphic-associations

我有一个标准的多态关系设置，如：

```
#Foo
has_many: bar, as: foobar

#Qux
has_many: bar, as: foobar

#Bar
belongs_to :foobar, polymorphic: true 
```

我希望能够强制执行`has_many: bar, as: foobar`具有某些属性的模型，例如 a `name`，因此我可以执行以下操作：

```
bar.foobar.name 
```

并且知道此时 foobar 的型号并不重要。（因为所有的 foobars 都有一个 name 属性）

有没有办法做到这一点，或者`responds_to?`每次我想使用它时我都必须对其进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:05:07.997

您可以通过创建`Foo`并`Qux`扩展的基类来提供默认值。代替

```
class Foo < ActiveRecord::Base
  has_many: bar, as: foobar
end

class Qux < ActiveRecord::Base
  has_many: bar, as: foobar
end 
```

你可以做类似的事情

```
class Foobar < ActiveRecord::Base
  has_many: bar, as: foobar
end

class Foo < Foobar; end

class Qux < Foobar; end 
```

然后，您可以为那些希望与扩展的类保持一致的属性创建一个默认访问器方法`Foobar`。

```
class Foobar < ActiveRecord::Base
  has_many: bar, as: foobar

  def name
    "some default name"
  end
end

class Foo < Foobar
  def name
    "some overloaded name for Foo"
  end
end

class Qux < Foobar; end 
```

`name`您可以如上所示重载`Foo`，或如所示省略它`Qux`。无论如何，一个`name`属性将可用，即使它只是来自`Foobar`.

```
foo = Foo.new
puts foo.name  # "some overloaded name for Foo"

qux = Qux.new
puts qux.name # "some default name" 
```

如果您希望像其他语言一样通过接口或抽象类创建更多合同，Ruby 也不支持。但是，您可以使用包含在其中的 mixin，`Foo`如果未定义`Qux`则抛出异常。**[在此处阅读此类实现的示例](http://metabates.com/2011/02/07/building-interfaces-and-abstract-classes-in-ruby/)**。`name`

**请注意**，这些模型应该在表中具有关联`name`列的可能性，您可能希望`read_attribute(:name)`在重载`name`方法中的某个位置合并。**[请参阅上的文档`read_attribute`](http://apidock.com/rails/ActiveRecord/AttributeMethods/Read/read_attribute)**

# visualization - 在线图形和数据可视化框架

> ID：13200453
> 
> 赞同：0
> 
> 时间：2012-11-02T17:42:36.297
> 
> 标签：visualization, data-visualization

我一直在查看具有丰富图形、图表和数据可视化的 Web 应用程序和网站，并且在很大程度上能够确定网站正在使用哪些框架或工具。但是我正在查看“ [resumup.com](http://resumup.com) ”，无法确定他们使用的是什么。有谁知道或者你能告诉我吗？它看起来不像我见过的任何 javascript 框架，除非它是自定义的……它是某种 flash 或 flex 框架吗？任何帮助将不胜感激。

谢谢， 马克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T04:57:05.220

对于无法超链接所有内容，我提前道歉。StackOverflow 对我可以放在这里的链接数量进行了限制。不得不将 9 个链接缩减为 2 个。

我对 ResumUP 不太熟悉，所以我不能直接说。不过，既然它在 Facebook 上，我猜它几乎肯定是使用自制的、基于 javascript 的可视化代码。

从更广泛的角度讲整个网络，以及您帖子的第一部分，D3 正在成为基于网络的可视化（尤其是交互式可视化）最流行的选项。您可能已经看到的 D3 示例是[纽约时报的 2013 年预算可视化](http://www.nytimes.com/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html)（以及纽约时报上的大多数其他交互式可视化，就此而言）。然而，D3 不仅仅能够进行可视化。将纽约时报的示例与 Visual.ly 的美国不平等网站进行比较，该网站也是使用 D3 制作的。

对于条形图等更基本的可视化，许多公司提供用于创建可视化的 API，例如 Google 的图表工具。甚至更多不使用任何工具包。以 Fernanda Viegas 和 Martin Wattenberg 的流行风可视化工具为例。[这个](http://www.elibrosen.com/civilwar/)展示内战可视化的网站仅依赖于 jQuery 的 javascript 代码（以及 Google Maps API）。

其他框架包括但不限于 Protovis（我会改用 D3）、processing.js 和无数其他框架。

我不确定您是否有任何制作基于 Web 的可视化工具的计划，但如果您有，我强烈建议您使用 D3。有一点学习曲线，但它会让你从数据的角度考虑可视化，这只能帮助提高你最终制作的质量。作为一个额外的好处，就如何处理可视化创建而言，D3 是更好的工具包之一。在 D3 中创建和组合视觉图元的方式是相当自然的。不完美，但绝对比大多数替代品更好。

最后，在可视化之上，互联网上充斥着信息图表（参见 Visual.ly 的博客以获取示例）。虽然理论上这些可以使用 D3 等框架制作，但它们更有可能使用 Adob​​e Illustrator 制作，保存为图像，然后上传。

# actionscript-3 - swf跨域时window.onbeforeunload后保存flash游戏状态到服务器

> ID：13200458
> 
> 赞同：1
> 
> 时间：2012-11-02T17:42:51.160
> 
> 标签：actionscript-3, flash, cross-domain, dom-events, externalinterface

我的 Facebook 应用程序是一个 Flash 游戏。我希望游戏 swf 在窗口卸载时将其最新状态保存到服务器。由于我使用 swfobject 嵌入了 swf，因此我使用它的 embed 处理程序将`onbeforeunload`侦听器添加到窗口：

```
function embedHandler(event)        
{
shell=event.ref;
window.onbeforeunload=function(event)
{
    shell.message("save", null);
        //delay the unloading a bit so flash has time to contact server
    var now = new Date().getTime();
     var later=now+50;
     while (now < later)
     {
        now = new Date().getTime();
      }
     }
 } 
```

这就是问题所在。每次直接从应用程序（rails 应用程序）加载 swf 时，这都会起作用。从亚马逊加载 swf 时，它永远不会工作。

所有跨域问题都在 swf 和应用程序之间解决——rails 应用程序接受来自 Amazon swf 的调用，而 Amazon swf 从 rails 应用程序加载数据。

`ExternalInterface`也适用于拨出和拨入电话。但我怀疑这仍然是一个浏览器安全问题，因为内向`ExternalInterface`调用仅在以下情况下失败：

1.  它是从处理程序内部调用`window.onbeforeunload`的
2.  swf 来自亚马逊。

问题是什么？当游戏来自 CDN 并且保存由`onbeforeunload`Javascript 触发时，如何不显眼地保存游戏状态？还是有更好的方法来完成同样的事情？

在 Firefox 中进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:37:09.073

> ExternalInterface 也适用于呼出和呼入。但我怀疑这仍然是一个浏览器安全问题，因为内向 ExternalInterface 调用仅在以下情况下失败：
> 
> 1.  它是从 window.onbeforeunload 处理程序内部调用的
> 2.  swf 来自亚马逊。

从它的声音你解决了所有的安全问题。
当 onbeforeunload 被触发时，您更有可能对幕后发生的事情缺乏了解。
这是一个不会等待您的“game.swf”通过 ExternalInterface 完成回调的函数。这就是为什么您添加了一个停止机制来延迟该过程的原因。但是，我在这里假设这适用于 rails 应用程序，因为那是本地服务器，您不受延迟怪物的影响。
现在您可能想得很好，我延迟了它应该可以工作。那么延迟是50毫秒。尝试增加到 5000（5 秒），您应该会看到它开始在 cdn 上工作。

数据的保存应通过 Flash 应用程序控制，而不是由外部源触发。
在游戏本身中，您应该具有应该触发保存事件的里程碑。

最后，我确实想补充一点，这是迄今为止您可以用来将信息保存到服务器的最糟糕的方法。onbeforeunload 是不可靠的，并且会受到跨浏览器问题的影响，更不用说在 JavaScript 中放置*滞后循环*只是一个坏主意，最终只会惹恼您的用户，以至于他们不会返回。

# sql-server - 如何阻止 SQL 服务器恢复覆盖数据库？

> ID：13200464
> 
> 赞同：0
> 
> 时间：2012-11-02T17:43:08.210
> 
> 标签：sql-server, backup, restore

我有一个 ELMAH 数据库，我想使用以下脚本进行还原：

```
RESTORE DATABASE [Elmah] 
FROM DISK = N'E:\Elmah_backup_2012_11_02_030003_1700702.bak' 
WITH FILE = 1,  
MOVE N'Elmah' TO N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\Elmah.mdf',  
MOVE N'Elmah_log' TO N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\Elmah.ldf',  
NOUNLOAD, STATS = 10
GO 
```

即使我不包括`WITH REPLACE`每次执行此语句时，它都会恢复现有数据库。

在此操作之前，我将始终删除所有数据库，并且我不希望此代码在生产环境中意外恢复数据库。

如何更改此代码以使其永远不会覆盖现有数据库？

我实际上是通过 SMO 对象执行此操作，但原理和结果是相同的，因此我希望将其简化为仅必要的 TSQL，希望我可以将该信息概括为需要在适当的 SMO.Restore 上设置的内容目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:57:06.460

您需要 (a) 给恢复的数据库一个新的逻辑名称，并且 (b) 您需要定义新的物理文件名，这样现有的文件名就不会被覆盖。尝试这样的事情：

```
RESTORE DATABASE [Elmah_Restored]       <== new (and unique) logical database name
FROM DISK = N'E:\Elmah_backup_2012_11_02_030003_1700702.bak' 
WITH FILE = 1,  
MOVE N'Elmah' TO 
     N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\Elmah_restored.mdf',   <== new (and unique) physical file name
MOVE N'Elmah_log' TO 
     N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\Elmah_restored_log.ldf',   <== new (and unique) physical file name
NOUNLOAD, STATS = 10
GO 
```

# c# - 双缓冲客户绘制列表框

> ID：13200465
> 
> 赞同：0
> 
> 时间：2012-11-02T17:43:10.990
> 
> 标签：c#, listbox, doublebuffered

我有一个自定义绘制方法，所以我可以在列表框中制作不同颜色的项目。问题是我每 500 毫秒重新绘制一次列表框以检查值是否已更改。这使列表框闪烁，我不知道如何双缓冲代码。有人可以帮忙吗？

```
private void listBox_DrawItem(object sender, DrawItemEventArgs e)
{
    ListBox sendingListBox = (ListBox)sender;

    CustomListBoxItem item = sendingListBox.Items[e.Index] as CustomListBoxItem; // Get the current item and cast it to MyListBoxItem

    if (item != null)
    {
         e.Graphics.DrawString( // Draw the appropriate text in the ListBox
            item.Message, // The message linked to the item
            zone1ListBox.Font, // Take the font from the listbox
            new SolidBrush(item.ItemColor), // Set the color 
            0, // X pixel coordinate
            e.Index * zone1ListBox.ItemHeight // Y pixel coordinate.  Multiply the index by the ItemHeight defined in the listbox.
         );
    }
    else
    {
        // The item isn't a MyListBoxItem, do something about it
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T17:49:53.270

如果您需要启用 ListBox 的双缓冲区，您应该从它继承一个类，因为属性 is`private`并将其设置为`true`，或者使用该`SetStyle()`方法并应用`WS_EX_COMPOSITED`标志：

```
public class DoubleBufferedListBox : ListBox {
    protected override CreateParams CreateParams {
        get {
            CreateParams cp = base.CreateParams;
            cp.ExStyle |= 0x02000000;   // WS_EX_COMPOSITED
            return cp;
        }
    }

    public DoubleBufferedListBox( ) {
        this.SetStyle(ControlStyles.DoubleBuffer, true);         
        this.SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
    }
} 
```

# css - 谷歌浏览器将部分屏幕外的 div 加宽一个像素

> ID：13200466
> 
> 赞同：3
> 
> 时间：2012-11-02T17:43:14.060
> 
> 标签：css, google-chrome, css-float

两年前我写了一个设计：目标是适应 1024 像素的屏幕，但有一些额外的图形内容，这样在大屏幕上就不会显得太小。结果是[http://megalest.org/](http://megaglest.org/)，一个开源项目的网站。

这是 HTML：我不想使用 img 标签，因为它可以让我在不会加载此类图像的响应式设计中工作：

```
<div id='all'>
    <div id="header">
        <div id="header_left"></div>
    </div>
</div> 
```

这是相应的CSS：

```
#all {
    width: 1016px;
    margin: 0 auto;
}
#header {
    height: 313px;
    background-color: #4dd;
}

#header_left {
    float: left;
    width: 140px;
    margin-left: -140px;
    height: 379px;

    /* works fine */
    /* background: #dd4; */

    /* there's a one pixel offet */
    background:
       url("http://megaglest.org/uploads/megaglest2011/header/left.jpg")
       no-repeat; 
} 
```

仅在 Google Chrome（Linux 上为 22.0.1229.94）上，并且仅在某些窗口大小下（当只有 #header_left 的一部分可见时），我在图像和蓝色标题之间得到一个像素的偏移量。当“结果窗格”非常宽时，可以看到使用这个 jsFiddle：http: [//jsfiddle.net/hTbJA/](http://jsfiddle.net/hTbJA/)

[这是该问题的屏幕截图](http://i.stack.imgur.com/EkPgb.png)。奇怪的是，Google Chrome 开发者工具在“metrics”中说 div 是 140px 宽，但是当我使用“Elements”窗​​格并悬停#header_left 时，它却显示为 141px！会不会是浏览器的bug？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T17:47:38.987

问题是由于您的`#header_left`对象和`#header_right`对象以负边距推出超过中心线边缘的事实引起的 - 但中心部分的水平`margin`设置为`auto`.

发生的情况是，当`body`是偶数个像素宽时 -`auto`使宽的 居中`#header`，`1016px`两边的像素数为偶数，因为`margin: 0 auto;`（例如：如果 body 是`1200px`宽的，则有`184px`可用的，所以浏览器`92px`在左侧和`92px`右侧分配。`#header_left`然后，您的 获得一个`margin-left: -140px;`规则 - 将其放在`140px`的左边缘的左侧`#header`，并且它对齐像素完美。

但是，当`body`是*奇数*个像素宽时，例如`1199px`- 并且`margin: 0 auto;`开始，分配部分像素（在这种情况下仅产生`91.5px`每边）。因为一个对象不能在半个像素内绘制——浏览器**四舍五入**寻找开始渲染的实际位置`#header`——并且左边缘在`91.5px`. 当您的边距然后`-140px`在`#header_left`元素上进行时，您会在另一个奇数像素上结束 - 但是这一次，计算会向下舍入。（内部数学可能通过先四舍五入计算 - 然后减去）。

这使您的外观减少了 1 个像素...

修复 - 在您的场景中 - 是将您`#header_left`的`margin-left`CSS 规则更改`-139px`为`140px`- 并允许轻微重叠。我已经在您的实际站点上对其进行了测试——它看起来很好并且融合得很好。

所以 - 回答你的问题 - 不 - 这本身不是一个错误 - 它只是意味着开发人员工具和元素窗格的计算方式不同。在处理部分像素时，其中一个向上舍入，一个向下舍入。或者，一个是衡量实际在屏幕上有效呈现的内容，另一个衡量的是 CSS 规则所指示的内容。

# sql-server-2008 - 死锁事务 - 通信缓冲区资源

> ID：13200471
> 
> 赞同：0
> 
> 时间：2012-11-02T17:43:48.100
> 
> 标签：sql-server-2008, database-deadlocks

我想获得有关改进导致 sql 服务器返回死锁消息的设置的建议。我有多个线程应用程序，它实际上使用 TaskParallel 库，每个任务将使用一个存储过程从表中选择一个 id 以用于其处理。我立即在同一语句中从表中删除了该 ID，我认为这就是导致死锁的原因。该表由一列没有索引的唯一 ID 组成。我曾想过定期进行批量删除，但这意味着要在多个服务器上保留已用 id 的计数。

这是我的 sql 存储过程：

```
 CREATE PROCEDURE [dbo].[get_Ids]
   @id nvarchar(20) OUTPUT

    AS

    BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
   SET NOCOUNT ON;

       Select top 1 @id = siteid from siteids 
       delete siteids where siteid = @id

   END 
```

有没有更好的方法来做到这一点？我的流程工作得非常快，我曾经从 webrequest 服务请求这个 id，但这需要 3 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:46:21.663

Some things to try: Maybe try hinting to the DB that you will delete the record you just selected, this way it will grab the lock early. For this to work you'll need to wrap the whole procedure in a transaction, then hint the select. Should look something like:

```
BEGIN TRANSACTION  
  SELECT TOP 1 @id = siteid from siteids WITH (UPDLOCK, HOLDLOCK)
  DELETE siteids WHERE siteid = @id
COMMIT TRANSACTION 
```

Also make sure the `siteid` column is indexed(or tag it as primary key, since you say it is unique), otherwise it would have to scan the table to get the record to delete, which could make deadlocking worse since it spends a bunch more time deleting.

For deadlocks in general, run the SQL profiler and see what the deadlock graph looks like - might be something else is going on.

# caching - Sitecore 缓存和语言

> ID：13200476
> 
> 赞同：4
> 
> 时间：2012-11-02T17:44:05.407
> 
> 标签：caching, sitecore

我对 Sitecore 缓存的工作原理有基本的了解，包括所有不同变体的工作原理。

但我不是 Sitecore 在缓存期间处理语言的方式。页面的每个语言版本是否都被视为不同的数据源，然后是 varybydata 答案吗？如果没有，我怎样才能安全地将缓存应用于页面的不同语言版本？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T20:37:09.943

Sitecore 在缓存键中包含当前语言等，因此每个子布局或渲染都被视为每种语言的不同版本。所以将缓存应用到不同的语言版本应该是没有问题的。

# solr - SOLR 4 是否知道文档是否在更新时发生了更改？

> ID：13200478
> 
> 赞同：0
> 
> 时间：2012-11-02T17:44:07.380
> 
> 标签：solr, indexing

我正在设计一个索引元数据的系统。随着完整数据的到来，我将提取几条信息（元数据）并创建一个 SOLR 文档并将该文档添加到 SOLR。当收到完整数据已更改的通知时，我将再次提取元数据，然后更新 SOLR 索引。元数据实际上可能不会改变。如果我向 SOLR 4 发送更新，它会检测到文档没有更改并且什么都不做吗？我是否需要从 SOLR 获取文档并自己比较值，并且仅在 SOLR 文档中的值确实发生更改时才调用更新？

# spring - 是否可以将系统路径设置为弹簧上下文

> ID：13200479
> 
> 赞同：3
> 
> 时间：2012-11-02T17:44:12.487
> 
> 标签：spring, annotations, applicationcontext

我想通过这样的注释加载我的 Spring 应用程序上下文：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "file:/path/to/spring-context1.xml", "file:/path/to/spring-context2.xml"}) 
```

我正在尝试这个，因为上下文文件不在我的类路径中。我已经读过好几次了，这是可能的，但它似乎不起作用。所以我的问题是：“这真的可能吗？我做错了吗？

如果这可能发生，我还有另一个问题：如果我想使用相对路径而不是绝对路径，它应该从哪里开始？从 pom.xml 位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:46:18.293

正如我在第一篇文章的评论中所说，问题来自我;）所以答案是：

*   是的，您可以使用“file:”前缀来设置您的 Spring 上下文
*   是的，您可以使用相对路径，相对于 pom.xml 目录

希望这可以帮助。

# magento - Magento 自动将我从子目录重定向到主域

> ID：13200481
> 
> 赞同：1
> 
> 时间：2012-11-02T17:44:23.357
> 
> 标签：magento, redirect, subdirectory

我在将 Magento 移动到另一台服务器时遇到问题。

旧服务器地址：oldserver.com/shop

新服务器地址：newserver.com/shop

我从旧服务器备份数据库和 FTP 文件，然后上传文件并将数据库导入新服务器。使用新的数据库详细信息更改 local.xml 文件后，Magento 后端工作正常，但我从前端重定向时遇到奇怪的问题。当我进入 newserver.com/shop 时，我可以在一瞬间看到我的商店主页，然后自动将我重定向到主域：newserver.com。

我尝试在管理面板中更改地址：基本 URL：{{base_url}} -> [http://newdomain.com/shop/](http://newdomain.com/shop/) 基本链接 URL：{{unsecure_base_url}} -> [http://newdomain.com/shop](http://newdomain.com/shop)

其余编辑字段和“安全”选项卡编辑也是如此。它不起作用，仍然将我从商店目录重定向到主域。在 oldserver 字段 {{unsecure_base_url}} 是默认的，没有 newserver.com/shop 并且它工作正常。

我尝试在安装后刷新/禁用所有 Magento 缓存，但仍然无法正常工作。

我试图在 newdomain.com 目录中安装干净的 Magento，一切都很好，它不会将我重定向到主域。有什么想法吗？:)

我的 .htaccess 文件是：

```
DirectoryIndex index.php

<IfModule mod_php5.c>
php_flag magic_quotes_gpc off
php_flag session.auto_start off
php_flag suhosin.session.cryptua off
php_flag zend.ze1_compatibility_mode Off
</IfModule>

<IfModule mod_security.c>
SecFilterEngine Off
SecFilterScanPOST Off
</IfModule>

<IfModule mod_deflate.c>
</IfModule>

<IfModule mod_ssl.c>
SSLOptions StdEnvVars
</IfModule>

<IfModule mod_rewrite.c>
Options +FollowSymLinks
RewriteEngine on
#RewriteBase /magento/  (I have tried to change it to /shop/ and uncomment and still redirect me)
#RewriteRule ^api/([a-z][0-9a-z_]+)/?$ api.php?type=$1 [QSA,L]
## rewrite API2 calls to api.php (by now it is REST only)
RewriteRule ^api/rest api.php?type=rest [QSA,L]
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
RewriteRule .* - [L,R=405]
#RewriteCond %{REQUEST_URI} !^/mobiledirectoryhere/.*$
#RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
#RewriteRule ^(.*)$ /mobiledirectoryhere/ [L,R=302]
RewriteCond %{REQUEST_URI} !^/(media|skin|js)/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule .* index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:04:59.850

不幸的是，今天我在一个新的 magento 项目中遇到了同样的问题。:-) 请检查表 core_config_date 中的每一行。Web 安全和不安全路径可以出现不止一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:34:26.637

检查 db 表 core_config_data 中的安全和不安全的 magento 路径。

干净的

```
/var/cache/* 
/var/session/* 
/var/log/* 
```

并清理浏览器的缓存。

最后检查是否设置了根目录下的 .htaccess 中的 RewriteBase。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:54:50.623

如果您的 magento 安装的根目录中没有 .htaccess，您应该添加它。您无需进行全新的全新安装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T16:51:23.663

我询问了在 oldserver.com/shop 上创建这个主题的公司来移动 Magento。现在它在新服务器上工作，但新服务器有点慢，所以当我进入 newdomain.com/shop 时，我可以看到页面标题：404，然后 Magento 会自动重定向到“家庭”类别之一。我认为我的问题是因为在 Magento 重定向到主域之前找不到主页，现在他们设置了一个类别的重定向。我希望它对将来的任何人都有用。

# asp.net-mvc-3 - 列上的 Mvc3 webgrid 条件语句

> ID：13200487
> 
> 赞同：0
> 
> 时间：2012-11-02T17:44:41.383
> 
> 标签：asp.net-mvc-3, razor, webgrid

我有一个 webgrid，我想在其中对我将拥有的列数据放置一个条件语句？

有可能吗？如果可以，你能举个例子吗？

**编辑**

只是一个片段

```
grid.Column("Status","Status",canSort: true) 
```

如果状态的值是“正确的”，我想显示图像而不是文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T09:07:45.447

一个不那么乏味且更易读的代码（仅在一年半之后）。

```
var columnsToAdd = new List<WebGridColumn>();
///here add yout collumns according to conditions

@grid.GetHtml(columns: columnsToAdd.ToArray()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:20:26.330

[资源](http://yassershaikh.com/how-to-hide-specific-columns-values-in-webgrid-mvc3-razor/)

在检查条件时，我隐藏了我的两列密码和电子邮件地址。通过这样做，我可以阻止我的 webgrid 显示我不想在特定条件下显示的列。

```
var grid = new WebGrid(Model.User)

if(myConditionCanGoInHere) {

@grid.GetHtml(columns: grid.Columns(

grid.Column("Name"),
grid.Column("Password"),
grid.Column("EmailAddress") ))

}
else{

@grid.GetHtml(columns: grid.Columns(

grid.Column("Name")
// Here I have not included Password and EmailAddress columns.

))

} 
```

这是您想隐藏整个列的时候，但是如果您想显示该列并仅隐藏特定值怎么办，那么在这种情况下该怎么办？这也可以做到，你可以有一个 if else 条件，如下所示……</p>

```
@grid.GetHtml(
    columns: grid.Columns(
        grid.Column(header: "Edit", format: item => item.CanEdit ? Html.ActionLink("Edit","Edit","Person",new {id = item.PersonId},null) : Html.Raw("uneditable")),

        grid.Column(columnName: "CanEdit", header: "Editable?"),
        grid.Column(columnName: "DisplayName", header: "Display Name"),
        grid.Column(columnName: "Email", header: "Email")
    )
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:02:39.660

如果我正确理解了您的问题，您可能希望在您的视图中添加“if”语句。就像是：

```
@{
    var option1 = true;
    var option2 = false;
}
@if(option1){
    <div id="grid1">
        @grid.GetHtml(
            tableStyle: "grid",
            headerStyle: "head",
            alternatingRowStyle: "alt",
            columns: grid.Columns(
                grid.Column("firstColumn"),
                grid.Column("secondColumn")
            )
        )
    </div>
} else if (option2) {
    <div id="grid2">
        @grid.GetHtml(
            tableStyle: "grid",
            headerStyle: "head",
            alternatingRowStyle: "alt",
            columns: grid.Columns(
                grid.Column("firstColumn"),
                grid.Column("secondColumn"),
                grid.Column("thirdColumn")
            )
        )
    </div>
} else {
    <div id="grid3">
        No grid
    </div>
} 
```

# maven - 如何以编程方式列出所有传递依赖项，包括使用 DependencyGraphBuilder 在 Maven 中覆盖的依赖项？

> ID：13200497
> 
> 赞同：7
> 
> 时间：2012-11-02T17:45:21.280
> 
> 标签：maven, maven-3, aether

这类似于其他问题（[如this](https://stackoverflow.com/questions/1492000/how-to-get-access-to-mavens-dependency-hierarchy-within-a-plugin)），但我希望能够使用最新的API 来做到这一点。maven-dependency-plugin:tree 详细选项已被弃用，并且在最新的 (2.5.1) 代码中没有任何作用，因此没有很好的示例说明如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T07:19:42.803

我相信来自[jcabi-aether 的](http://www.jcabi.com/jcabi-aether/)[`Aether`](http://www.jcabi.com/jcabi-aether/apidocs-0.7.5/com/jcabi/aether/Aether.html)实用程序类可以帮助您获取任何 Maven 工件的所有依赖项的列表，例如：

```
File repo = this.session.getLocalRepository().getBasedir();
Collection<Artifact> deps = new Aether(this.getProject(), repo).resolve(
  new DefaultArtifact("junit", "junit-dep", "", "jar", "4.10"),
  JavaScopes.RUNTIME
); 
```

如果您不在 Maven 插件之外：

```
File repo = new File("/tmp/local-repository");
MavenProject project = new MavenProject();
project.setRemoteProjectRepositories(
  Arrays.asList(
    new RemoteRepository(
      "maven-central",
      "default",
      "http://repo1.maven.org/maven2/"
    )
  )
);
Collection<Artifact> deps = new Aether(project, repo).resolve(
  new DefaultArtifact("junit", "junit-dep", "", "jar", "4.10"),
  "runtime"
); 
```

您需要的唯一依赖项是：

```
<dependency>
  <groupId>com.jcabi</groupId>
  <artifactId>jcabi-aether</artifactId>
  <version>0.7.5</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-23T15:36:11.517

在这里包括我的方法，因为附加步骤可能会成为您实际用例的一部分，尤其是。如果从事复合或多模块项目。

（Maven 3，我的运行时是 3.6；不直接依赖于 Aether）

就我而言，我想`foo-runtime`从插件内部解析特定工件的依赖树；然而，

*   一些依赖版本仅在其父`foo-parent`POM 中可用（即在`foo-runtime`自己的 POM 中不存在）。
*   父 POM 还具有其他详细信息，例如某些`foo-runtime`依赖项的排除项 - via `dependencyManagement`。

所以我不得不：

*   显式加载父模型，
*   将子模型链接到它，
*   填写子模型缺少的版本号（还是不知道为什么Maven在链接父模型后没有自动解决这些），然后
*   为孩子运行依赖解决方案。

为了避免从头开始构建模型，我派生了`foo-runtime`使用现有工件的模型`foo-api`（在我的情况下，它始终保证存在于正在构建的 Maven 项目中）。所有这些工件都共享相同的`groupId`.

```
 @Component
    public LifecycleDependencyResolver resolver;

    // ...

    // `artifacts` contains all artifacts of current/reactor `MavenProject` obtained via `project.getArtifacts()`
    private Set<Artifact> resolveRuntimeDeps(Set<Artifact> artifacts) throws MojoExecutionException {

        // foo-api will always be present; use it to derive coordinates for foo-runtime
        Artifact fooApi = artifacts.stream().filter(artifact -> "foo-api".equals(artifact.getArtifactId()))
                .findFirst().orElseThrow(() -> new MojoExecutionException("Unable to find foo-api"));

        Collection<String> scopes = Arrays.asList("compile", "runtime");

        MavenProject fooRoot = deriveProject(fooApi, "foo-parent");
        Model fooRootPom = fooRoot.getModel();

        MavenProject fooSrv = deriveProject(fooApi, "foo-runtime");
        fooSrv.setParent(fooRoot);

        // some foo-runtime deps depend on versions declared on parent pom; merge them
        Map<String, Artifact> depMgt = fooRootPom.getDependencyManagement().getDependencies().stream()
                .collect(Collectors.toMap(dep -> dep.getGroupId() + ":" + dep.getArtifactId() + ":" + dep.getType(), this::toArtifact));
        for (Dependency d : fooSrv.getDependencies()) {
            if (d.getVersion() == null) {
                Artifact managed = depMgt.get(d.getGroupId() + ":" + d.getArtifactId() + ":" + d.getType());
                if (managed != null) {
                    d.setVersion(managed.getVersion());
                }
            }
        }

        try {
            resolver.resolveProjectDependencies(fooSrv, scopes, scopes, session, false, Collections.emptySet());
            return fooSrv.getArtifacts();
        } catch (LifecycleExecutionException e) {
            throw new MojoExecutionException("Error resolving foo-runtime dependencies", e);
        }
    }

    // load POM for another artifact based on foo-api JAR available in current project
    private MavenProject deriveProject(Artifact fooApi, String artifactId) throws MojoExecutionException {
        Model pom;
        String pomPath = fooApi.getFile().getAbsolutePath().replaceAll("foo-api", artifactId).replaceAll("\\.jar$", ".pom");
        try (InputStream fooRootPomData = new FileInputStream(pomPath)) {
            pom = new MavenXpp3Reader().read(fooRootPomData);
            pom.setPomFile(new File(pomPath));
        } catch (IOException | XmlPullParserException e) {
            throw new MojoExecutionException("Error loading " + artifactId + " metadata", e);
        }

        // set these params to avoid skips/errors during resolution
        MavenProject proj = new MavenProject(pom);
        proj.setArtifact(toArtifact(pom));
        proj.setArtifactFilter(Objects::nonNull);
        proj.setRemoteArtifactRepositories(Collections.emptyList());
        return proj;
    }

    private Artifact toArtifact(Model model) {
        return new DefaultArtifact(
                Optional.ofNullable(model.getGroupId()).orElseGet(() -> model.getParent().getGroupId()), model.getArtifactId(),
                Optional.ofNullable(model.getVersion()).orElseGet(() -> model.getParent().getVersion()), "compile", model.getPackaging(), null,
                project.getArtifact().getArtifactHandler());
    }

    private Artifact toArtifact(Dependency dep) {
        return new DefaultArtifact(dep.getGroupId(), dep.getArtifactId(), dep.getVersion(), dep.getScope(), dep.getType(), dep.getClassifier(),
                project.getArtifact().getArtifactHandler());
    } 
```

（我尝试了几乎所有其他建议的方法，但是所有这些方法最终都出现了一些错误。现在回想起来，我怀疑其中许多错误可能是由于我的叶子 POM 缺少某些版本号似乎（可以接受）“模型丰富”阶段——传播父版本等——是由 Maven 流程中的一些早期组件执行的；调用者在调用依赖项时必须至少部分处理这一点从头开始解析器。）

# database - 用大量数据填充 MS SQL 数据库的最快方法是什么

> ID：13200498
> 
> 赞同：0
> 
> 时间：2012-11-02T17:45:26.780
> 
> 标签：database, performance, full-text-search, sql-server-2012, sql-server-performance

**困境：**

我即将在 MS SQL Server（2012 开发版）上执行数据填充。数据基于生产数据。数量约为 4TB（约 2.5 亿个项目）。

**目的：**

测试全文搜索和常规索引的性能。目标数量应该是大约 3 亿个项目，每个项目大约 500K。

**问题：**

我应该做些什么来加快我应该担心的过程或后果？

前任。

1.  关闭统计？
2.  我应该为每笔交易而不是单笔交易批量插入 1k 个项目吗？
3.  简单的恢复模式？
4.  日志截断？

**重要的：**

我将使用 2k 个生产项目的样本来创建每个将插入数据库的随机项目。我将使用在 c# 中生成的近乎独特的样本。这将是一张桌子：

```
table 
(
    long[id], 
    nvarchar(50)[index], 
    nvarchar(50)[index], 
    int[index], 
    float, 
    nvarchar(50)[index], 
    text[full text search index]
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:47:39.207

在这样的情况下，我几乎总是使用 SSIS，而且我遇到过其中的几个。SSIS 是我所知道的将大量数据导入 SQL Server 数据库的最快方法。您可以完全控制批处理（事务大小），它将执行批量插入。此外，如果您有转换需求，SSIS 将轻松处理。

# ruby-on-rails - 使用 ID 进行 Ruby Sunspot 关键字搜索

> ID：13200501
> 
> 赞同：1
> 
> 时间：2012-11-02T17:45:50.953
> 
> 标签：ruby-on-rails, ruby, search, solr, sunspot

简单的问题：

我有两个模型：`Show`和`Contact`. 我想做的是搜索 a`Show#id`或 a `Contact#name`。所以我的模型设置如下：

```
class Show < ActiveRecord::Base

  searchable do
    text :id
  end
end

class Contact < ActiveRecord::Base

  searchable do
    text :name
  end
 end 
```

然后我按如下方式运行搜索：

```
Sunspot.search(Contact, Show) do
  keywords(MY_QUERY)
end 
```

这非常适合按姓名查找联系人，但不适用于该`Show#id`字段。谁能解释这是为什么？

乔

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-03T05:14:42.297

该`id`字段是一个整数，因此您应该`integer :id`在模型中具有。您需要指定正确的数据库列类型。查看[http://sunspot.github.com/](http://sunspot.github.com/)上的示例。

# apache - 如何重定向特定文件以通过 Apache 配置从远程服务器加载？

> ID：13200502
> 
> 赞同：0
> 
> 时间：2012-11-02T17:45:56.243
> 
> 标签：apache, mod-rewrite

我想`http://mysite.com/somefile.html`通过 Apache 从远程服务器加载。这可以使用`RewriteCond`'s吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:10:27.337

mod_rewrite 提供 [P] 标志，它允许通过 mod_proxy 将 URL 传递到另一个服务器。

如果您将此添加到您的 .htaccess 文件并针对您的特定情况进行自定义，它将按照您描述的方式工作。

```
RewriteEngine  on
RewriteBase    /products/
RewriteRule    ^widget/(.*)$  http://product.example.com/widget/$1  [P]
ProxyPassReverse /products/widget/ http://product.example.com/widget/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:40:51.183

您可能希望使用`mod_proxy`它而不是重写：

```
<IfModule mod_proxy.c>
  ProxyRequests Off

  <proxy *>
    Order deny,allow
    Allow from all
  </proxy>

  ProxyPass /somefile.html http://remote.example.com/somefile.html
  ProxyPassReverse /somefile.html http://remote.example.com/somefile.html
</IfModule> 
```

# sql - 如何使用 Microsoft SQL Server Management Studio 为数据库中的所有触发器生成脚本

> ID：13200511
> 
> 赞同：72
> 
> 时间：2012-11-02T17:46:28.837
> 
> 标签：sql, sql-server-2008, triggers

我想生成一个 SQL 脚本，其中包含用于创建数据库中存在的所有触发器的 SQL。触发器是通过 SSMS 查询窗格直接添加的，因此目前除了数据库本身的触发器之外没有其他来源。

我已经尝试过右键单击数据库，选择`Tasks->Generate Scripts`并使用“脚本整个数据库和所有对象”选项的方法。虽然这确实为表和约束创建了一个 SQL 脚本，但它不会为触发器生成 SQL。

我也知道我可以右键单击数据库中的每个触发器并选择“生成 SQL 脚本”选项，但是目前有 46 个表正在审核中（用于插入、更新和删除）。

而是手动为 46 个表中的每一个生成插入、更新和删除触发器脚本，有没有更简单的方法来做到这一点？或者，我应该开始单击、复制和粘贴吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-11-02T17:55:02.503

**数据库-> 任务-> 生成脚本-> 下一步-> 下一步**

在**选择脚本选项**UI 的表/视图选项标题下，将**脚本触发器设置为 True**。

![在此处输入图像描述](../Images/e79562da58602ed9607ba1aa88ccefd1.png)

![在此处输入图像描述](../Images/362d1267b441d681410be00a672b12a7.png)

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-11-28T13:45:06.610

我知道答案已经被接受，但是想为由于某种原因 SSMS 向导无法为触发器生成脚本的情况提供另一种解决方案（在我的情况下是 MSSQL2008R2）

此解决方案基于上述[dana](https://stackoverflow.com/users/315689/dana "布施")的想法，但如果超过 4000 个字符，则使用 'sql_modules' 来提供触发器的完整代码（限制 'syscomments' 视图的 'text' 列）

```
select [definition],'GO' from sys.sql_modules m
inner join sys.objects obj on obj.object_id=m.object_id 
 where obj.type ='TR' 
```

右键单击结果网格，然后“将结果另存为...”保存到文件并保留格式

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-02T17:49:44.273

这个怎么样？

`select text from syscomments where text like '%CREATE TRIGGER%'`

**编辑**- 根据 jj 在下面的评论，`syscomments`已弃用，将来将被删除。请继续使用上面列出的基于向导或基于脚本的解决方案:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-09-14T13:11:06.813

要编写所有触发器的脚本，您可以定义存储过程：

```
SET ANSI_NULLS ON; 
GO 
SET QUOTED_IDENTIFIER ON; 
GO 
-- Procedure:
--   [dbo].[SYS_ScriptAllTriggers]
--
-- Parameter: 
--   @ScriptMode bit   
--     possible values:
--     0 - Script ALTER only
--     1 - Script CREATE only
--     2 - Script DROP + CREATE

ALTER PROCEDURE [dbo].[SYS_ScriptAllTriggers]
    @ScriptMode int = 0
AS 
BEGIN

    DECLARE @script TABLE (script varchar(max), id int identity (1,1))

    DECLARE 
        @SQL VARCHAR(8000), 
        @Text            NVARCHAR(4000), 
        @BlankSpaceAdded INT, 
        @BasePos         INT, 
        @CurrentPos      INT, 
        @TextLength      INT, 
        @LineId          INT, 
        @MaxID           INT, 
        @AddOnLen        INT, 
        @LFCR            INT, 
        @DefinedLength   INT, 
        @SyscomText      NVARCHAR(4000), 
        @Line            NVARCHAR(1000), 
        @UserName        SYSNAME, 
        @ObjID           INT, 
        @OldTrigID       INT; 

    SET NOCOUNT ON; 
    SET @DefinedLength = 1000; 
    SET @BlankSpaceAdded = 0; 

    SET @ScriptMode = ISNULL(@ScriptMode, 0);

    -- This Part Validated the Input parameters   
    DECLARE @Triggers TABLE (username SYSNAME NOT NULL, trigname SYSNAME NOT NULL, objid INT NOT NULL); 
    DECLARE @TrigText TABLE (objid INT NOT NULL, lineid INT NOT NULL, linetext NVARCHAR(1000) NULL); 

    INSERT INTO 
        @Triggers (username, trigname, objid) 
    SELECT DISTINCT 
        OBJECT_SCHEMA_NAME(B.id), B.name, B.id
    FROM 
        dbo.sysobjects B, dbo.syscomments C 
    WHERE 
        B.type = 'TR' AND B.id = C.id AND C.encrypted = 0; 

    IF EXISTS(SELECT C.* FROM syscomments C, sysobjects O WHERE O.id = C.id AND O.type = 'TR' AND C.encrypted = 1) 
    BEGIN 

        insert into @script select '/*'; 
        insert into @script select 'The following encrypted triggers were found'; 
        insert into @script select 'The procedure could not write the script for it'; 

        insert into 
            @script 
        SELECT DISTINCT 
            '[' + OBJECT_SCHEMA_NAME(B.id) + '].[' + B.name + ']' --, B.id 
        FROM   
            dbo.sysobjects B, dbo.syscomments C 
        WHERE  
            B.type = 'TR' AND B.id = C.id AND C.encrypted = 1; 

        insert into @script select '*/'; 
    END; 

    DECLARE ms_crs_syscom CURSOR LOCAL forward_only FOR 
    SELECT 
        T.objid, C.text
    FROM   
        @Triggers T, dbo.syscomments C 
    WHERE  
        T.objid = C.id 
    ORDER  BY T.objid, 
        C.colid 
    FOR READ ONLY; 

    SELECT @LFCR = 2; 
    SELECT @LineId = 1; 

    OPEN ms_crs_syscom; 

    SET @OldTrigID = -1; 

    FETCH NEXT FROM ms_crs_syscom INTO @ObjID, @SyscomText; 

    WHILE @@fetch_status = 0 
    BEGIN 

        SELECT @BasePos = 1; 
        SELECT @CurrentPos = 1; 
        SELECT @TextLength = LEN(@SyscomText); 

        IF @ObjID <> @OldTrigID 
        BEGIN 
            SET @LineID = 1; 
            SET @OldTrigID = @ObjID; 
        END; 

        WHILE @CurrentPos != 0 
        BEGIN 
            --Looking for end of line followed by carriage return         
            SELECT @CurrentPos = CHARINDEX(CHAR(13) + CHAR(10), @SyscomText, @BasePos); 

            --If carriage return found         
            IF @CurrentPos != 0 
            BEGIN 

                WHILE ( ISNULL(LEN(@Line), 0) + @BlankSpaceAdded + @CurrentPos - @BasePos + @LFCR ) > @DefinedLength 
                BEGIN 
                    SELECT @AddOnLen = @DefinedLength - (ISNULL(LEN(@Line), 0) + @BlankSpaceAdded ); 

                    INSERT 
                        @TrigText 
                    VALUES 
                        ( @ObjID, @LineId, ISNULL(@Line, N'') + ISNULL(SUBSTRING(@SyscomText, @BasePos, @AddOnLen), N'')); 

                    SELECT 
                        @Line = NULL, 
                        @LineId = @LineId + 1, 
                        @BasePos = @BasePos + @AddOnLen, 
                        @BlankSpaceAdded = 0; 
                END; 

                SELECT @Line = ISNULL(@Line, N'') + ISNULL(SUBSTRING(@SyscomText, @BasePos, @CurrentPos - @BasePos + @LFCR), N''); 

                SELECT @BasePos = @CurrentPos + 2; 

                INSERT 
                    @TrigText 
                VALUES
                    ( @ObjID, @LineId, @Line ); 

                SELECT @LineId = @LineId + 1; 

                SELECT @Line = NULL; 
            END; 
            ELSE 
            --else carriage return not found         
            BEGIN 
                IF @BasePos <= @TextLength 
                BEGIN 
                    /*If new value for @Lines length will be > then the         
                    **defined length         
                    */ 
                    WHILE ( ISNULL(LEN(@Line), 0) + @BlankSpaceAdded + @TextLength - @BasePos + 1 ) > @DefinedLength 
                    BEGIN 
                        SELECT @AddOnLen = @DefinedLength - ( ISNULL(LEN(@Line), 0 ) + @BlankSpaceAdded ); 

                        INSERT 
                            @TrigText 
                        VALUES 
                            ( @ObjID, @LineId, ISNULL(@Line, N'') + ISNULL(SUBSTRING(@SyscomText, @BasePos, @AddOnLen), N'')); 

                        SELECT 
                            @Line = NULL, 
                            @LineId = @LineId + 1, 
                            @BasePos = @BasePos + @AddOnLen, 
                            @BlankSpaceAdded = 0; 
                    END; 

                    SELECT @Line = ISNULL(@Line, N'') + ISNULL(SUBSTRING(@SyscomText, @BasePos, @TextLength - @BasePos+1 ), N''); 

                    IF LEN(@Line) < @DefinedLength AND CHARINDEX(' ', @SyscomText, @TextLength + 1) > 0 
                    BEGIN 
                        SELECT 
                            @Line = @Line + ' ', 
                            @BlankSpaceAdded = 1; 
                    END; 
                END; 
            END; 
        END; 

        FETCH NEXT FROM ms_crs_syscom INTO @ObjID, @SyscomText; 
    END; 

    IF @Line IS NOT NULL 
        INSERT 
            @TrigText 
        VALUES
            ( @ObjID, @LineId, @Line ); 

    CLOSE ms_crs_syscom; 

    insert into @script select '-- You should run this result under dbo if your triggers belong to multiple users'; 
    insert into @script select ''; 

    IF @ScriptMode = 2 
    BEGIN 

        insert into @script select '-- Dropping the Triggers'; 
        insert into @script select ''; 

        insert into @script 
        SELECT 
            'IF EXISTS(SELECT * FROM sysobjects WHERE id = OBJECT_ID(''[' + username + '].[' + trigname + ']'')'
            + ' AND ObjectProperty(OBJECT_ID(''[' + username + '].[' + trigname + ']''), ''ISTRIGGER'') = 1)'
            + ' DROP TRIGGER [' + username + '].[' + trigname +']' + CHAR(13) + CHAR(10) 
            + 'GO' + CHAR(13) + CHAR(10)
        FROM   
            @Triggers; 
    END; 

    IF @ScriptMode = 0
    BEGIN   
        update 
            @TrigText 
        set 
            linetext = replace(linetext, 'CREATE TRIGGER', 'ALTER TRIGGER') 
        WHERE 
            upper(left(replace(ltrim(linetext), char(9), ''), 14)) = 'CREATE TRIGGER' 
    END

    insert into @script select '----------------------------------------------'; 
    insert into @script select '-- Creation of Triggers'; 
    insert into @script select ''; 
    insert into @script select ''; 

    DECLARE ms_users CURSOR LOCAL forward_only FOR 
    SELECT 
        T.username, 
        T.objid, 
        MAX(D.lineid) 
    FROM   
        @Triggers T, 
        @TrigText D 
    WHERE  
        T.objid = D.objid 
    GROUP BY    
        T.username, 
        T.objid 
    FOR READ ONLY; 

    OPEN ms_users; 

    FETCH NEXT FROM ms_users INTO @UserName, @ObjID, @MaxID; 

    WHILE @@fetch_status = 0 
    BEGIN 

        insert into @script select 'setuser N''' + @UserName + '''' + CHAR(13) + CHAR(10); 

        insert into @script 
        SELECT 
            '-- Text of the Trigger' = 
            CASE lineid 
                WHEN 1 THEN 'GO' + CHAR(13) + CHAR(10) + linetext 
                WHEN @MaxID THEN linetext + 'GO' 
                ELSE linetext 
            END 
        FROM   
            @TrigText 
        WHERE  
            objid = @ObjID 
        ORDER  
            BY lineid; 

        insert into @script select 'setuser'; 

        FETCH NEXT FROM ms_users INTO @UserName, @ObjID, @MaxID; 
    END; 

    CLOSE ms_users; 

    insert into @script select 'GO'; 
    insert into @script select '------End ------'; 

    DEALLOCATE ms_crs_syscom; 
    DEALLOCATE ms_users; 

    select script from @script order by id

END 
```

如何执行它：

```
SET nocount ON 
DECLARE @return_value INT 

EXEC @return_value = [dbo].[SYS_ScriptAllTriggers] @InclDrop = 1 
SELECT 'Return Value' = @return_value 
```

去

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-07T01:31:21.643

使用我自己的版本以及此处和其他帖子中找到的答案的组合（找不到原始问题。

```
select OBJECT_NAME(parent_obj) AS table_name,sysobj.name AS trigger_name,
[definition],'GO'
from sys.sql_modules m
inner join sysobjects sysobj on sysobj.id=m.object_id
INNER JOIN sys.tables t ON sysobj.parent_obj = t.object_id
INNER JOIN sys.schemas s ON t.schema_id = s.schema_id
WHERE sysobj.type = 'TR' and sysobj.name like 'NAME_OF_TRIGGER'
order by sysobj.name 
```

# facebook - Facebook Like 按钮不再显示

> ID：13200519
> 
> 赞同：1
> 
> 时间：2012-11-02T17:46:47.420
> 
> 标签：facebook, facebook-like

我在该站点的每个子页面上的[http://www.racket-center.de](http://www.racket-center.de)页面上实现了点赞按钮。我注意到它并没有出现在每个页面上，所以我尝试了不同的实现版本（html5、iframe 等），但它不起作用。如果我没记错的话，我尝试的次数越多，按钮出现的页面就越少。

现在该按钮不再显示 - 即使在[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)的向导中也不显示您可以自己尝试：如果您输入站点的 URL + 然后更改另一个选项以让向导检查 url，like-button 将消失。

我尝试通过 linter 进行调试并修复了它抱怨的一些小警告（例如调整 og:image-size 以适应 200x200px），但这并没有带回按钮。

我猜该页面有点被列入黑名单，但我不知道 + 如果它被列入黑名单，我不知道为什么。

有没有人知道这里可能发生了什么，或者向我指出有关 fb 黑名单的任何资源？

能得到一些帮助会很高兴。

谢谢，迈克尔

# php - 验证 MYSQL 执行的结果不使用 get_result()

> ID：13200523
> 
> 赞同：1
> 
> 时间：2012-11-02T17:47:03.083
> 
> 标签：php, mysqli

当您不能使用以下代码时，验证 mysql 成功执行然后返回结果的最佳方法是什么：

```
$db = dbConnect();
//begin prepared statements to search db
$stmt = $db->prepare("SELECT email,authentication,email_confirm,externalid,password,id, admin FROM users WHERE email=?");
$stmt->bind_param('s',$email);
$stmt->execute();
$result = $stmt->get_result();
if (!$result){
  //error statement
} if (!(mysqli_num_rows($result)==0)){
  //action to perform
} else {
  // no result returned
} 
```

我在我的脚本中多次使用 get_result，而我的托管服务提供商没有 mysqlnd 驱动程序，所以我必须重写很多代码。我知道我仅限于 bind_result 和 fetch()，但我需要一些帮助来重写代码，因为我的思维方式停留在我第一次这样做的方式上。

我也在使用 mysqli 而不是 PDO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:02:21.450

Mysqli`fetch()`函数将返回 3 个值之一：

*   真——成功。数据已提取
*   FALSE - 发生错误
*   NULL - 不再存在行/数据或发生数据截断

这意味着您可以像这样设置查询：

```
$db = dbConnect();
$query = "SELECT email,authentication,email_confirm,externalid,password,id, admin FROM users WHERE email=?";
$stmt = $db->prepare();
$stmt->bind_param('s',$email);
$stmt->execute();
$stmt->bind_result($email,$auth,$email_confirm,$externalid,$password,$id,$admin);

// Will only execute loop if returns true
$record_count = 0;
while($result = $stmt->fetch())
{
    // Increment counter
    $record_count++;

    // Do something with bound result variables
    echo("Email is $email");
}

// After the loop we either ran out of results or had an error
if($result === FALSE)
{
    echo("An error occurred: " . $db->error());
}
elseif($record_count == 0)
{
    echo("No records exist.");
} 
```

# ios - 使用 iOS 自动布局在子视图控制器与其父视图之间建立约束

> ID：13200525
> 
> 赞同：7
> 
> 时间：2012-11-02T17:47:06.583
> 
> 标签：ios, uiviewcontroller, autolayout

在我的根视图控制器中，我将子视图控制器的视图添加为子视图，如下所示：

```
ChildViewController *cvc = [[ChildViewController alloc] init];
[self addChildViewController:cvc];
[self.view addSubview:cvc.view];
[cvc didMoveToParentViewController:self]; 
```

我现在想使用 NSLayoutConstraint 将 cvc.view 定位在父视图（self.view）中，这样 cvc.view 将定位在父视图底部上方 25 pts 处。我的理解是以下应该有效：

```
UIView *superview = self.view;
UIView *childview = cvc.view;
NSLayoutConstraint *cn = 
    [NSLayoutConstraint withItem:childview 
      attribute:NSLayoutAttributeBottom 
      relatedBy:NSLayoutRelationEqual 
      toItem:superview attribute:NSLayoutAttributeBottom 
      multiplier: 1.0 
      constant: -25.0];
[superview addConstraint: cn]; 
```

但是约束在运行时失败。我最初认为子视图中的自动调整大小掩码可能会导致问题（并遵循 WWDC 2012 Intro video on auto layout），所以我设置`[childview setTranslatesAutoresizingMaskIntoConstraints:NO]`了 ，但随后子视图根本无法出现。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:31:31.397

我不确定，但以下应该有效，或者类似的东西：

```
UIView *superview = self.view;
UIView *childview = cvc.view;
NSDictionary *constrainedViews = NSDictionaryOfVariableBindings(childview);
NSArray *constraints =
[superview addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[childview]-25-|"
                                                                  options:0
                                                                  metrics:nil
                                                                    views:constrainedViews]; 
```

如果不确定您实际上是在为子视图设置大小，例如：

```
UIView *superview = self.view;
UIView *childview = cvc.view;
NSDictionary *constrainedViews = NSDictionaryOfVariableBindings(childview);
NSArray *constraints =
[superview addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[childview]|"
                                                                  options:0
                                                                  metrics:nil
                                                                    views:constrainedViews]; 
```

说，让它填满视图的宽度。或者：

```
UIView *superview = self.view;
UIView *childview = cvc.view;
NSDictionary *constrainedViews = NSDictionaryOfVariableBindings(childview);
NSArray *constraints =
[superview addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[childview(>100,<304)]-|"
                                                                  options:0
                                                                  metrics:nil
                                                                    views:constrainedViews]; 
```

这意味着像 childview 之类的东西的宽度应该大于 100 但小于 304，并且默认为 superview 的边距。请注意，我不知道上述约束是否真的有意义（例如，它可能总是给你 304 宽度的子视图，因为这会留下默认边距），但它只是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T16:48:37.297

要使用自动布局正确设置和调整子视图控制器的大小，请执行以下操作：

```
childView.translatesAutoresizingMaskIntoConstraints = NO;

NSLayoutConstraint *left = [NSLayoutConstraint constraintWithItem:superview attribute:NSLayoutAttributeLeft relatedBy:NSLayoutRelationEqual toItem:childview attribute:NSLayoutAttributeLeft multiplier:1 constant:0];
[self.view addConstraint:left];
NSLayoutConstraint *top = [NSLayoutConstraint constraintWithItem:superview attribute:NSLayoutAttributeTop relatedBy:NSLayoutRelationEqual toItem:childview attribute:NSLayoutAttributeTop multiplier:1 constant:0];
[self.view addConstraint:top];
NSLayoutConstraint *width = [NSLayoutConstraint constraintWithItem:superview attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:childview attribute:NSLayoutAttributeWidth multiplier:1 constant:0];
[self.view addConstraint:width];
NSLayoutConstraint *height = [NSLayoutConstraint constraintWithItem:superview attribute:NSLayoutAttributeHeight relatedBy:NSLayoutRelationEqual toItem:childview attribute:NSLayoutAttributeHeight multiplier:1 constant:0];
[self.view addConstraint:height]; 
```

如果您更喜欢视觉格式，您可以执行以下操作：

```
childView.translatesAutoresizingMaskIntoConstraints = NO;

NSDictionary *views = @{@"childview": childview};
[superview addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|-0-[childview]-0-|" options:0 metrics:nil views:views]];
[superview addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-[childview]-0-|" options:0 metrics:nil views:views]]; 
```

# opengl - CG 到 GLSL：f3texRECT 等效？

> ID：13200536
> 
> 赞同：0
> 
> 时间：2012-11-02T17:47:44.457
> 
> 标签：opengl, glsl, cg

我正在尝试将 CG 程序转换为 GLSL 程序。

到目前为止我所做的似乎是正确的，但是 GLSL 着色器输出不正确的输出。*不正确*的行为由一组测试图像定义。

我正在调查的唯一暗点是`f3texRECT`我已经翻译的函数`texture`。但是，我找不到任何关于`f3texRECT`.

有人可以说明一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:12:46.590

f3texRECT() 看起来它会使用 sampler2DRect 而不是 sampler2D 映射到[texture()](https://www.opengl.org/sdk/docs/manglsl/xhtml/texture.xml) ——这意味着纹理坐标是非标准化的（[0..textureSize-1] 而不是 [0..1]）。“f3”前缀表示结果是三通道颜色。旧版本的 GLSL 有一个为此目的的 textureRect() 函数，但它已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:01:36.407

`f3texRECT(..args..)`与 Cg 中的完全相同`texRECT(..args..).xyz`——它作为旧 HSL 的遗留物而存在，没有完全通用的调酒。

在 GLSL 中，等效函数是`texture`，因此您也应该在那里使用`texture(..arg..).xyz`，尽管 args 可能略有不同。

将纹理调用从 Cg 转换为 GLSL 的主要混淆在于处理阴影纹理 - Cg 中的阴影纹理查找使用普通采样器，但`tex`调用在坐标中有一个额外的组件。GLSL 有不同的阴影采样器类型。因此，在将 Cg 转换为 GLSL 时，您需要根据使用方式确定哪些纹理是“正常”纹理，哪些是“阴影”纹理。在极少数情况下，您有一个纹理同时用于普通和阴影查找，您需要将其拆分为 GLSL 的两个采样器。

# sql - 在搜索值之前检查视图中是否存在列

> ID：13200547
> 
> 赞同：1
> 
> 时间：2012-11-02T17:48:37.903
> 
> 标签：sql, view, plsql

我正在尝试在数据库中的每个视图中搜索诸如“%THIS%”之类的特定值

我想出了这个plsql代码

```
DECLARE
  match_count INTEGER;
BEGIN
  FOR t IN (SELECT name FROM user_dependencies where type = 'VIEW') LOOP

    EXECUTE IMMEDIATE 
    'SELECT COUNT(*) FROM '|| t.name || ' Where Column_Name LIKE ''%THIS%'' '
    INTO match_count;

    IF match_count > 0 THEN
      dbms_output.put_line( t.name ||' '||match_count );
    END IF;

  END LOOP;
END; 
```

但是当我尝试运行它时，我在执行即时查询中收到列名的无效标识符错误。

对我来说问题很明显，不是每个视图都有 Column_Name，但我不知道如何在运行查询之前检查列是否存在，因为我循环遍历所有视图。

我还可以使用稍微修改过的版本来遍历所有表，虽然它们并不都有那一列，但我没有遇到这个问题。

编辑：我包括了可以用来循环遍历表的 plsql 代码。

```
DECLARE
  match_count INTEGER;
BEGIN
  FOR t IN (SELECT table_name, column_name FROM all_tab_columns 
            where table_name LIKE 'THIS%' and data_type = 'VARCHAR2' AND column_name = 'Column_name') LOOP

    EXECUTE IMMEDIATE 
    'SELECT COUNT(*) FROM '||t.table_name || ' Where Column_name LIKE ''%THIS%'' '
    INTO match_count;

    IF match_count > 0 THEN
      dbms_output.put_line( t.table_name ||' '||t.column_name||' '||match_count );
    END IF;

  END LOOP;
END; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T17:57:42.523

我假设这是 Oracle，因为您标记了 pl/sql。您可以使用 Oracle 的元数据表来查看表/视图具有哪些列。特别[是 USER_TAB_COLUMNS](http://ss64.com/orad/USER_TAB_COLUMNS.html)。

```
select count(*) 
from user_tab_columns 
where table_name = [name of view] 
and column_name = [name of column] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:11:16.270

This should query every view that has a column_name like '%START%'

```
declare
cursor getViews is
select table_name, column_name from user_tab_cols where table_name in
(select view_name from user_views)
and column_name like '%START%';
myResult number;
BEGIN
   for i in getViews
   LOOP
      execute immediate 'select count(*) from '||i.table_name into myResult;
   END LOOP;
END; 
```

# jquery-ui - jquery-ui Datepicker中的年份列表 - 它可以从特定年份开始吗？

> ID：13200548
> 
> 赞同：2
> 
> 时间：2012-11-02T17:48:58.900
> 
> 标签：jquery-ui, datepicker

问题是标题。当我在 Jquery-UI 日期选择器中显示年份列表时，我可以控制列表从哪一年开始吗？

更新代码

```
 $(".datepicker").datepicker({ 
     changeYear: true, 
     dateFormat: 'dd-M-yy', 
     altFormat: 'dd-M-yy', 
     minDate: '2001-01-01', 
     duration: ''
    }); 
```

我需要从 2001 年开始的年份列表。这个控件可以实现吗？上面的代码没有实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:18:25.450

您可以通过几种不同的方式完成它：

```
$(".datepicker1").datepicker({ yearRange: "2001:2012", changeYear: true, defaultDate: new Date(2001,0,1)});

$(".datepicker2").datepicker({changeYear: true, defaultDate: new Date(2001,0,1)}); 
```

包括 `datepicker1`a`defaultDate`但不是必须的。如果您将其省略，它将默认为今天的日期，并且年份选择将从当前年份开始。

请注意，这`datepicker2`包括年份选择框中的默认年份范围。

[年范围](http://api.jqueryui.com/datepicker/#option-yearRange)

[http://jsfiddle.net/ymvNT/](http://jsfiddle.net/ymvNT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:51:33.883

您可以使用该`defaultDate`参数。 [链接](http://api.jqueryui.com/datepicker/#option-defaultDate)。

如果您只想设置一个特定的年份，请使用`minDate`and`maxDate`参数（即`{minDate: '2010-01-01', maxDate: '2010-12-31'}`。它都在文档中。给它一个阅读。

# ios - 将我的 iPhone 项目升级到通用。CADisplayLink 现在只有 30fps

> ID：13200549
> 
> 赞同：0
> 
> 时间：2012-11-02T17:49:28.003
> 
> 标签：ios, ipad, opengl-es, ios6, cadisplaylink

当给定“1”作为其帧间隔时，有什么方法可以找出为什么 CADisplayLink 以 30fps 运行？

我在 iPad mini 上运行该应用程序。当在 iPad mini 中作为 iPhone 应用程序运行时（使用带有 2x 按钮的模式），它运行如丝般顺滑 (60fps)。但是，在 iPad mini 上作为通用应用程序运行时，即使它什么也没画，也可以产生 30fps 的最大值。

是什么原因造成的？它确实调用了 [displayLink setFrameInterval: 1]，所以这不可能......对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:51:58.517

好吧，事实证明，使用 GLKit 东西而不是 CADisplayLink (GLKView, GLKViewDelegate) 和 preferredFrameRate 解决了这个问题。我只需要重新实现一些东西，但它似乎起到了作用。

我想它一定是一个 CADisplayLink 错误。

# python - dev_appserver.py 没有重新加载更改的代码

> ID：13200557
> 
> 赞同：3
> 
> 时间：2012-11-02T17:49:43.800
> 
> 标签：python, google-app-engine

在过去几个月的某个时候，dev_appserver.py 完全停止在我的 Google App Engine 项目上重新加载更改的代码。不幸的是，由于我的开发差距与 appserver 平台中的至少一个版本更改相吻合，因此我无法更具体地确定症状开始的确切时间。

手动停止和启动 dev_appserver.py 确实会立即反映更改，但旧的行为非常有用，我渴望让它再次工作。

我在 appengine 源代码`_internal/django/utils/autoreload.py`（重新加载代码看起来相当简单，并且似乎不依赖于操作系统中任何花哨的通知工具，所以我不认为这是一个操作系统错误。我在 MacOS 10.8.2 和 Python 2.7.2 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:09:21.773

Stack Overflow 是 App Engine 技术问题的官方场所，但这听起来更像是一份错误报告。错误报告最好发送到[问题跟踪器](http://code.google.com/p/googleappengine/issues/list)。

# api - LinkedIn API 人员公司

> ID：13200558
> 
> 赞同：1
> 
> 时间：2012-11-02T17:49:48.433
> 
> 标签：api, linkedin

我想显示一家公司的人数。为此，我显示搜索结果。

我得到了一个 numResult 但这个数字不是公司的真实数字

```
IN.API.PeopleSearch()
.fields("id", "firstName", "lastName", "headline", "pictureUrl","location","public-profile-url")
.params({
"company-name": "Google",
"current-company": true,
"count": 8,
})
.result(function(result, metadata) {
setSearchResults(result, metadata);
});
} 
```

然后我`result.numResults`有谁不是公司的好号码。有人有想法吗？

我猜这是连接时用户的公司号码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:10:24.247

[您可以从Company API](https://developer.linkedin.com/documents/company-lookup-api-and-fields)检索有关公司的详细信息，包括公司规模。包含公司规模范围的特定字段是`employee-count-range`。

在通过 JavaScript API 访问数据方面，请考虑使用该[`IN.API.Raw()`](https://developer.linkedin.com/documents/inapiraw)方法。

# hibernate - ehcache with Hibernate 4 ，给 运行 Junit 测试时无法初始化类 net.sf.ehcache.config.ConfigurationFactory

> ID：13200562
> 
> 赞同：1
> 
> 时间：2012-11-02T17:50:04.657
> 
> 标签：hibernate, junit, ehcache, hibernate-4.x

我正在尝试使用 Ehcache 作为我的二级缓存来实现 Hibernate 4

Hibernate 属性的 XML 配置

```
<prop key="hibernate.cache.use_second_level_cache">true</prop>
    <prop key="hibernate.cache.region.factory_class">org.hibernate.cache.ehcache.EhCacheRegionFactory</prop>
<prop key="hibernate.cache.use_query_cache">true</prop>
<prop key="hibernate.generate_statistics">true</prop> 
```

用于测试用例和应用程序的 pom

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-ehcache</artifactId>
        <version>4.1.8.Final</version>
    </dependency> 
```

我的 pom 中也有 ehcache core 2.4.3，但是现在当我运行 Hibernate Junit 测试用例时，出现以下错误

```
 Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [spring/database/Hibernate.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: Could not initialize class net.sf.ehcache.config.ConfigurationFactory
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 24 more
Caused by: java.lang.NoClassDefFoundError: Could not initialize class net.sf.ehcache.config.ConfigurationFactory
    at org.hibernate.cache.ehcache.internal.util.HibernateUtil.loadAndCorrectConfiguration(HibernateUtil.java:63)
    at org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory.start(SingletonEhCacheRegionFactory.java:91)
    at org.hibernate.internal.CacheImpl.<init>(CacheImpl.java:70) 
```

# sql-server-2008 - 在服务器之间复制文件 SQL 作业

> ID：13200565
> 
> 赞同：0
> 
> 时间：2012-11-02T17:50:23.970
> 
> 标签：sql-server-2008, jobs, xcopy

我有一个 SQL 作业，我想将目录中的文件复制到另一台服务器上的目录中。这是我正在运行的 CMD

xcopy \DB1\TEST*.* \DB2\foo /S /Y

我得到这个错误以用户身份执行：DOMAIN\SA$。找不到文件 - *。* 0 个文件已复制。处理退出代码 0。该步骤成功。

我也尝试过以相同的结果复制到同一台服务器，以及只是尝试抓取一个文件并复制

我已将 DOMAIN\SA 帐户添加为服务器上的管理员，但仍然收到此信息。这只是一个错误还是我缺少一些权限设置？

# ios - Facebook graph api的邀请好友接受回调（iOS）

> ID：13200566
> 
> 赞同：3
> 
> 时间：2012-11-02T17:50:29.843
> 
> 标签：ios, facebook-graph-api, callback, facebook-invite

我找不到我的问题的任何答案：

在我的 facebook iOS 应用上，如果用户邀请他的朋友（通过这个`method: apprequests`东西），我是否可以知道是否/有多少朋友对此邀请回答“OK”？

# html - 我们可以在 XSL 变量中插入 HTML 标记吗

> ID：13200567
> 
> 赞同：11
> 
> 时间：2012-11-02T17:50:32.920
> 
> 标签：html, xml, xslt, xsl-variable

我只是想确认我们是否可以在 xsl 变量中插入 html 标签？例子

```
<xsl:variable name="htmlContent">
<html>
<body>
hiiii
</body>
</html>
</xsl:variable> 
```

如果我使用

```
<xsl:value-of select="$htmlContent"/> 
```

我应该得到

```
<html>
<body>
hiiii
</body>
</html> 
```

可能吗？我努力了

```
<xsl:value-of disable-output-escaping="yes" select="$htmlContent"/> 
```

尽管我没有得到想要的输出

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-02T17:54:25.400

不要使用`value-of`，它获取所选节点的*文本值*。而是使用`copy-of`，它将整个树（节点和所有）复制到输出中：

```
<xsl:copy-of select="$htmlContent"/> 
```

这是一个完整的例子：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:variable name="htmlContent">
    <html><body>hiiii</body></html>
</xsl:variable>

<xsl:template match="/">
    <xsl:element name="htmlText">
        <xsl:copy-of select="$htmlContent"/>
    </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

这将始终生成 xml：

```
<htmlText>
    <html>
       <body>hiiii</body>
    </html>
</htmlText> 
```

# javascript - Javascript onClick 触发两个事件

> ID：13200570
> 
> 赞同：0
> 
> 时间：2012-11-02T17:50:43.687
> 
> 标签：javascript, jquery, css, javascript-events

我为我的一个朋友整理了一个快速网站，我基本上只是使用查询滑块来管理所有内容，但是当访问者点击播放他的一首歌曲时，它似乎也触发了导航（由 onClick 触发）。问题是播放音乐也会使用滑块，而我在 javascript/jquery 方面还不够好，还没有弄清楚如何将这两个事件分开。任何帮助将不胜感激。

```
<script>

function goto(id, t){   
//animate to the div id.
$(".contentbox-wrapper").animate({"left": -($(id).position().left)}, 600);

// remove "active" class from all links inside #nav
$('#nav a').removeClass('active');

// add active class to the current link
$(t).addClass('active');    
} 
```

```
</head>

<body>

    <div id="wrap">

    <div id="header">
            <img src="images/header.gif" width="320" height="59">

      </div>

    <div id="content">
    <div id="nav">
        <ul>
            <li ><a class="active" href="#" onClick="goto('#about', this); return false"><img src="images/bioblack.gif" width="93" height="55"></a></li>
            <li><a href="#" onClick="goto('#work', this); return false"><img src="images/soundblack.gif" width="146" height="55"></li>
            <li><a href="#" onClick="goto('#contact', this); return false"><img src="images/contactblack.gif" width="183" height="54"></li>
        </ul>
    </div>

        <div class="contentbox-wrapper">

            <div id="about" class="contentbox">

            <img src="images/bio.gif" width="549" height="270">
          </div>

            <div id="work" class="contentbox">

            <img src="images/slowlane.gif" width="165" height="38">

            <embed height="45" alt="slow lane" width="500" autoplay="false" autostart="false" type="audio/mpeg" src="music/6_People_Get_Ready_This_Is_Rock_Steady_.aiff"></embed> 

            <img src="images/speedlimit.gif" width="169" height="39">
            <embed height="45" alt="speed limit"width="500" autoplay="false" autostart="false" type="audio/mpeg" src="music/7_Odyssey.aiff"></embed>

            <img src="images/fastlane.gif" width="169" height="37">
            <embed height="45" alt="fast lane"width="500" autoplay="false" autostart="false" type="audio/mpeg" src="music/9_Salsa_Verde.aiff"></embed> 

              </div>

            <div id="contact" class="contentbox">

            <img src="images/contact.gif" width="422" height="188"></div>

        </div>          

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:58:22.767

您的 html 有很多未闭合的标签，请尝试使用固定和缩进的 html：

```
<body>
    <div id="wrap">
        <div id="header">
            <img src="images/header.gif" width="320" height="59">
        </div>

        <div id="content">
            <div id="nav">
                <ul>
                    <li>
                        <a href="#" onClick="goto('#about', this); return false" class="active">
                            <img src="images/bioblack.gif" width="93" height="55">
                        </a>
                    </li>
                    <li>
                        <a href="#" onClick="goto('#work', this); return false">
                            <img src="images/soundblack.gif" width="146" height="55">
                        </a>
                    </li>
                    <li>
                        <a href="#" onClick="goto('#contact', this); return false">
                            <img src="images/contactblack.gif" width="183" height="54">
                        </a>
                    </li>
                </ul>
            </div>

            <div class="contentbox-wrapper">

                <div id="about" class="contentbox">
                    <img src="images/bio.gif" width="549" height="270">
                </div>

                <div id="work" class="contentbox">
                    <img src="images/slowlane.gif" width="165" height="38">
                    <embed height="45" alt="slow lane" width="500" autoplay="false" autostart="false" type="audio/mpeg" src="music/6_People_Get_Ready_This_Is_Rock_Steady_.aiff"></embed> 

                    <img src="images/speedlimit.gif" width="169" height="39">
                    <embed height="45" alt="speed limit"width="500" autoplay="false" autostart="false" type="audio/mpeg" src="music/7_Odyssey.aiff"></embed>

                    <img src="images/fastlane.gif" width="169" height="37">
                    <embed height="45" alt="fast lane"width="500" autoplay="false" autostart="false" type="audio/mpeg" src="music/9_Salsa_Verde.aiff"></embed> 
                </div>

                <div id="contact" class="contentbox">
                    <img src="images/contact.gif" width="422" height="188"></div>
                </div>
            </div>
        </div>
    </div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:54:30.107

event.preventDefault() 可以解决您的问题。只是阻止按钮的默认行为，让 js 触发正确的事件。

# http - Haskell 找不到模块“Network.HTTP.Conduit”

> ID：13200580
> 
> 赞同：8
> 
> 时间：2012-11-02T17:51:39.483
> 
> 标签：http, haskell, networking, https, http-conduit

我无法让这个导入在haskell中工作。

```
import Network.HTTP.Conduit 
```

当我尝试编译时，出现以下错误：

```
$ ghc Play.hs

Play.hs:1:8:
    Could not find module `Network.HTTP.Conduit'
    Use -v to see a list of the files searched for. 
```

如果我尝试在 GHCI 中加载文件，也会发生同样的错误。

我已经通过 cabal 安装了最新版本的 http-conduit。这是 cabal 的输出：

```
$ cabal -list http-conduit
* http-conduit
    Synopsis: HTTP client package with conduit interface and HTTPS support.
    Default available version: 1.8.2
    Installed versions: 1.6.0.4, 1.8.2
    Homepage: http://www.yesodweb.com/book/http-conduit
    License:  BSD3

* http-conduit-browser
    Synopsis: Browser interface to the http-conduit package
    Default available version: 1.6.3
    Installed versions: 1.6.3
    Homepage: https://github.com/exbb2/http-conduit-browser
    License:  BSD3 
```

如果它可能有所作为，我使用的是 Ubuntu 12.04。

任何想法为什么这不会导入？

编辑：'ghc-pkg list'的输出：

```
$ ghc-pkg list http-conduit
WARNING: there are broken packages.  Run 'ghc-pkg check' for more details.
/var/lib/ghc/package.conf.d
   http-conduit-1.6.0.4
   http-conduit-1.8.2
~/.ghc/i386-linux-7.4.1/package.conf.d 
```

从'ghc-pkg check'：

```
$ ghc-pkg check
The following packages are broken, either because they have a problem
listed above, or because they depend on a broken package.
derive-2.5.11
derive-2.5.11
peakachu-0.3.0
peakachu-0.3.0 
```

运行“ghc-pkg unregister derived-2.5.11”和“ghc-pkg unregister peakachu-0.3.0”后，来自“ghc-pkg list http-conduit”的警告不再出现，但问题并未解决。

从'ghc-pkg check'的标准错误：

```
Warning: haddock-interfaces: /usr/local/share/doc/http-conduit-browser-1.6.3/html/http-conduit-browser.haddock doesn't exist or isn't a file
Warning: haddock-html: /usr/local/share/doc/http-conduit-browser-1.6.3/html doesn't exist or isn't a directory
Warning: haddock-interfaces: /usr/local/share/doc/http-conduit-1.8.2/html/http conduit.haddock doesn't exist or isn't a file
Warning: haddock-html: /usr/local/share/doc/http-conduit-1.8.2/html doesn't exist or isn't a directory 
```

使用“-package http-conduit”编译时的输出：

```
$ ghc -package http-conduit Play.hs -v
<command line>: cannot satisfy -package http-conduit: 
    http-conduit-1.8.2-13f7764675fbae0ac9de8bcf7925f78e is unusable due to missing or recursive dependencies:
      asn1-data-0.7.1-cb75ffc05237f33632b42d2fb76a7a29 attoparsec-conduit-0.5.0.1-5fe0cc7293ce100ae00db2d7e67f682f blaze-builder-conduit-0.5.0.1-59a72b475661fd25bd4619f58e8b40de certificate-1.3.1-dd3ba477e9b28bd6e4ab3d8865f22a87 conduit-0.5.2.4-88846c185b7e5037f242975916feb7e2 failure-0.2.0.1-49a74d2d91efe8118b3ce4233a86c2be lifted-base-0.1.2-1905d9349e322d5bbdfc585c7291efe4 monad-control-0.3.1.4-2629785f64d5c6eb4b6a72e854127870 network-2.4.0.1-53e0509d073f1b67ec3e641af74cb551 resourcet-0.4.0.1-07b5b503a019bd31b56feec9c26dfaec tls-1.0.1-f578324e807426668353637611a71070 tls-extra-0.5.0-459144227bb52a8255b4a149f58f3520 transformers-base-0.4.1-d27396afe6939ffd84456ceebf04bfbb zlib-conduit-0.5.0.1-f6b2f2e99cffe03ace3d731c20826f12
http-conduit-1.6.0.4-963a389e596e9c9f7c021dc97238cc52 is unusable due to missing or recursive dependencies:
  asn1-data-0.7.1-cb75ffc05237f33632b42d2fb76a7a29 attoparsec-conduit-0.5.0.1-5fe0cc7293ce100ae00db2d7e67f682f blaze-builder-conduit-0.5.0.1-59a72b475661fd25bd4619f58e8b40de certificate-1.2.8-78aa58c1d97c0315f599845cf7924ae2 conduit-0.5.2.4-88846c185b7e5037f242975916feb7e2 failure-0.2.0.1-49a74d2d91efe8118b3ce4233a86c2be lifted-base-0.1.2-1905d9349e322d5bbdfc585c7291efe4 monad-control-0.3.1.4-2629785f64d5c6eb4b6a72e854127870 network-2.4.0.1-53e0509d073f1b67ec3e641af74cb551 resourcet-0.4.0.1-07b5b503a019bd31b56feec9c26dfaec tls-0.9.10-bedda6ba89d62d8b86895a07b0d4437e tls-extra-0.4.6-e10848dbad24b59704ecb96d86e5362a transformers-base-0.4.1-d27396afe6939ffd84456ceebf04bfbb zlib-conduit-0.5.0.1-f6b2f2e99cffe03ace3d731c20826f12 
```

看来我确实列出了所有依赖项。这是'cabal list'的输出

```
* asn1-data
Synopsis: ASN1 data reader and writer in RAW, BER and DER forms
Default available version: 0.7.1
Installed versions: 0.7.1
Homepage: http://github.com/vincenthz/hs-asn1-data
License:  BSD3

* attoparsec-conduit
Synopsis: Consume attoparsec parsers via conduit.
Default available version: 0.5.0.2
Installed versions: 0.5.0.1
Homepage: http://github.com/snoyberg/conduit
License:  BSD3

* blaze-builder-conduit
Synopsis: Convert streams of builders to streams of bytestrings.
Default available version: 0.5.0.1
Installed versions: 0.5.0.1
Homepage: http://github.com/snoyberg/conduit
License:  BSD3

* certificate
Synopsis: Certificates and Key Reader/Writer
Default available version: 1.3.1
Installed versions: 1.2.8, 1.3.1
Homepage: http://github.com/vincenthz/hs-certificate
License:  BSD3

* conduit
Synopsis: Streaming data processing library.
Default available version: 0.5.2.7
Installed versions: 0.5.2.4
Homepage: http://github.com/snoyberg/conduit
License:  BSD3

* failure
Synopsis: A simple type class for success/failure computations.
Default available version: 0.2.0.1
Installed versions: 0.2.0.1
Homepage: http://www.haskell.org/haskellwiki/Failure
License:  BSD3

* lifted-base
Synopsis: lifted IO operations from the base library
Default available version: 0.2
Installed versions: 0.1.2
Homepage: https://github.com/basvandijk/lifted-base
License:  BSD3

* monad-control
Synopsis: Lift control operations, like exception catching, through monad
          transformers
Default available version: 0.3.1.4
Installed versions: 0.3.1.4
Homepage: https://github.com/basvandijk/monad-control
License:  BSD3

* network
Synopsis: Low-level networking interface
Default available version: 2.4.0.1
Installed versions: 2.4.0.1
Homepage: https://github.com/haskell/network
License:  BSD3

* resourcet
Synopsis: Deterministic allocation and freeing of scarce resources.
Default available version: 0.4.0.2
Installed versions: 0.4.0.1
Homepage: http://github.com/snoyberg/conduit
License:  BSD3

* tls
Synopsis: TLS/SSL protocol native implementation (Server and Client)
Default available version: 1.0.1
Installed versions: 0.9.10, 1.0.1
Homepage: http://github.com/vincenthz/hs-tls
License:  BSD3

* tls-extra
Synopsis: TLS extra default values and helpers
Default available version: 0.5.0
Installed versions: 0.4.6, 0.4.6, 0.5.0, 0.5.0
Homepage: http://github.com/vincenthz/hs-tls
License:  BSD3

* transformers-base
Synopsis: Lift computations from the bottom of a transformer stack
Default available version: 0.4.1
Installed versions: 0.4.1
Homepage: https://github.com/mvv/transformers-base
License:  BSD3

* zlib-conduit
Synopsis: Streaming compression/decompression via conduits.
Default available version: 0.5.0.1
Installed versions: 0.5.0.1
Homepage: http://github.com/snoyberg/conduit
License:  BSD3 
```

这是 'ghc-pkg list xxxx' 的输出，其中 xxxx 是依赖项列表中的每个包，这些包是使用 '-package http-conduit' 标志编译产生的：

```
/var/lib/ghc/package.conf.d:
asn1-data-0.7.1

~/.ghc/i386-linux-7.4.1/package.conf.d:

/var/lib/ghc/package.conf.d:
attoparsec-conduit-0.5.0.1

~/.ghc/i386-linux-7.4.1/package.conf.d:

/var/lib/ghc/package.conf.d:
blaze-builder-conduit-0.5.0.1

~/.ghc/i386-linux-7.4.1/package.conf.d:

/var/lib/ghc/package.conf.d:
certificate-1.2.8
certificate-1.3.1

~/.ghc/i386-linux-7.4.1/package.conf.d:

/var/lib/ghc/package.conf.d:
conduit-0.5.2.4

~/.ghc/i386-linux-7.4.1/package.conf.d:

/var/lib/ghc/package.conf.d:
failure-0.2.0.1

~/.ghc/i386-linux-7.4.1/package.conf.d:
failure-0.2.0.1

/var/lib/ghc/package.conf.d:
lifted-base-0.1.2

~/.ghc/i386-linux-7.4.1/package.conf.d:

/var/lib/ghc/package.conf.d:
monad-control-0.3.1.4

~/.ghc/i386-linux-7.4.1/package.conf.d:
monad-control-0.3.1.4

/var/lib/ghc/package.conf.d:
network-2.4.0.1

~/.ghc/i386-linux-7.4.1/package.conf.d:
network-2.4.0.1

/var/lib/ghc/package.conf.d:
resourcet-0.4.0.1

~/.ghc/i386-linux-7.4.1/package.conf.d:

/var/lib/ghc/package.conf.d:
tls-0.9.10
tls-1.0.1

~/.ghc/i386-linux-7.4.1/package.conf.d:

/var/lib/ghc/package.conf.d:
tls-extra-0.4.6
tls-extra-0.5.0

~/.ghc/i386-linux-7.4.1/package.conf.d:

/var/lib/ghc/package.conf.d:
transformers-base-0.4.1

~/.ghc/i386-linux-7.4.1/package.conf.d:
transformers-base-0.4.1

/var/lib/ghc/package.conf.d:
zlib-conduit-0.5.0.1

~/.ghc/i386-linux-7.4.1/package.conf.d: 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T20:39:45.013

我无法直接解决问题。但是，我能够“核对”已安装的软件包并重新开始。

```
rm -rf ~/.ghc/i386-linux-7.4.1
cabal install http-conduit 
```

在此之后，它工作得很好。您还必须重新安装所有其他软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-10T06:04:06.343

FWIW我使用“cabal install http-conduit”然后我得到以下提示：

```
Building     http-conduit-2.3.8 (lib)
Installing   http-conduit-2.3.8 (lib)
Completed    http-conduit-2.3.8 (lib)
Warning:
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@ WARNING: Installation might not be completed as desired! @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
Without flags, the command "cabal install" doesn't expose libraries in a
usable manner. You might have wanted to run "cabal install --lib http-conduit". 
```

然后我尝试加载我的文件并在 ghc 中得到它：

```
Prelude> :l Main.hs
[1 of 1] Compiling Main             ( Main.hs, interpreted )

Main.hs:9:1: error:
    Could not load module ‘Network.HTTP.Conduit’
    It is a member of the hidden package ‘http-conduit-2.3.8’.
    You can run ‘:set -package http-conduit’ to expose it.
    (Note: this unloads all the modules in the current scope.)
    Use -v (or `:set -v` in ghci) to see a list of the files searched for.
  |
9 | import Network.HTTP.Conduit (simpleHttp)
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Failed, no modules loaded. 
```

所以“cabal install --lib http-conduit”解决了这个问题。

# php - 无法移动文件

> ID：13200581
> 
> 赞同：1
> 
> 时间：2012-11-02T17:51:48.067
> 
> 标签：php, mkdir

我正在创建一个目录，然后将上传的文件移动到其中，但它给了我这个警告

```
Warning: move_uploaded_file(): The second argument to copy() function cannot be a directory in G:\xampp\htdocs\product_management\admin\process\process_product.php on line 43

Warning: move_uploaded_file(): Unable to move 'G:\xampp\tmp\phpE5B0.tmp' to '../product_images/10/thumb' in     G:\xampp\htdocs\product_management\admin\process\process_product.php on line 43 
```

我的代码是

```
if($_FILES['thumb']['name']!=="") {
         echo $path = "../product_images/".$insert_id."/thumb";
         mkdir($path,0777, true);
         move_uploaded_file($_FILES['thumb']['tmp_name'],$path);
     }
     exit; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T17:53:58.367

```
move_uploaded_file($_FILES['thumb']['tmp_name'],
    $path.'/'.basename($_FILES['thumb']['tmp_name'])); 
```

试试上面的代码。**您不能将文件移动到文件夹中。**您将文件移动到另一个文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:54:44.037

PHP 复制函数以参数（fromfile、tofile）为参数，因此您实际上希望将整个文件名指定为两个参数，而不仅仅是一个目录。

[http://www.w3schools.com/php/func_filesystem_copy.asp](http://www.w3schools.com/php/func_filesystem_copy.asp)

# c# - 在 TreeView 周围移动节点

> ID：13200590
> 
> 赞同：2
> 
> 时间：2012-11-02T17:52:29.030
> 
> 标签：c#, wpf, treeview, treeviewitem

我试图让用户`TreeViewItems`在 a 周围移动`TreeView`（特别是通过按住控制键并按下箭头键）。我可以将节点移入和移出其他节点，并且可以在顶层上下移动节点，但是当我尝试在子节点内向上移动节点时，它什么也不做，如果我尝试在一个子节点内向下移动节点子节点，我得到以下异常：

元素已经有一个逻辑父级。在附加到新的父级之前，它必须与旧的父级分离。

当我尝试将节点添加回其原始集合时会发生这种情况（当然是在删除它之后）。这是原始实现：

```
private TreeViewItem getParent(TreeViewItem item)
{
    for (int i=0; i<fragment_tree.Items.Count; ++i)
    {
        TreeViewItem r = getParent((TreeViewItem)(fragment_tree.Items[i]), item);
        if (r != null)
        {
            return r;
        }
    }
    return null;
}
private TreeViewItem getParent(TreeViewItem test, TreeViewItem item)
{
    for (int i=0; i<test.Items.Count; ++i)
    {
        if (test.Items[i] == item)
        {
            return test;
        }
    }
    for (int i=0; i<test.Items.Count; ++i)
    {
        TreeViewItem r = getParent((TreeViewItem)(test.Items[i]), item);
        if (r != null)
        {
            return r;
        }
    }
    return null;
}
private ItemCollection getContainingList(TreeViewItem item, out int id)
{
    return getContainingList(fragment_tree.Items, item, out id);
}
private ItemCollection getContainingList(ItemCollection test, TreeViewItem item, out int id)
{
    for (int i=0; i<test.Count; ++i)
    {
        if (test[i] == item)
        {
            id = i;
            return test;
        }
    }
    for (int i=0; i<test.Count; ++i)
    {
        ItemCollection r = getContainingList((TreeViewItem)(test[i]), out id);
        if (r != null)
        {
            return r;
        }
    }
    id = -1;
    return null;
}
private void fragment_tree_PreviewKeyDown(object sender, KeyEventArgs e)
{
    TreeViewItem selected_item = (TreeViewItem)(fragment_tree.SelectedItem);
    if (selected_item.Header is String)
    {
        if (e.KeyboardDevice.IsKeyDown(Key.LeftCtrl) || e.KeyboardDevice.IsKeyDown(Key.RightCtrl))
        {
            if (e.Key == Key.Up)
            {
                int id;
                ItemCollection collection = getContainingList(selected_item, out id);
                if (collection != null) // it'll never be null, but w/e
                {
                    if (id > 0)
                    {
                        collection.RemoveAt(id);
                        collection.Insert(id-1, selected_item);
                        selected_item.IsSelected = true;
                    }
                }
                e.Handled = true;
            }
            else if (e.Key == Key.Down)
            {
                int id;
                ItemCollection collection = getContainingList(selected_item, out id);
                if (collection != null) // it'll never be null, but w/e
                {
                    if (id < collection.Count)
                    {
                        collection.RemoveAt(id);
                        collection.Insert(id+1, selected_item); // here is the exception
                        selected_item.IsSelected = true;
                    }
                }
                e.Handled = true;
            }
            else if (e.Key == Key.Left)
            {
                TreeViewItem parent = getParent(selected_item);
                if (parent != null)
                {
                    int id;
                    ItemCollection collection = getContainingList(parent, out id);
                    parent.Items.RemoveAt(id);
                    collection.Insert(id, selected_item);
                    selected_item.IsSelected = true;
                }
                e.Handled = true;
            }
            else if (e.Key == Key.Right)
            {
                int id;
                ItemCollection collection = getContainingList(selected_item, out id);
                if (id+1 < collection.Count)
                {
                    TreeViewItem next_item = (TreeViewItem)(collection[id+1]);
                    collection.RemoveAt(id);
                    next_item.Items.Insert(0, selected_item);
                    next_item.IsExpanded = true;
                    selected_item.IsSelected = true;
                }
                e.Handled = true;
            }
        }
    } 
```

我尝试对所选内容进行深度克隆`TreeViewItem`（尽管我不想承担开销），但出现了一些奇怪的行为。当我尝试在它的子树中向上或向下移动一个项目时，它会跳到父级。当我尝试向上或向下移动顶层节点时，它会删除其邻居。我觉得好像缺少一些基本的东西

```
private TreeViewItem cloneTreeViewItem(TreeViewItem item)
{
    TreeViewItem r = new TreeViewItem();
    r.Header = item.Header;
    r.Tag = item.Tag;
    for (int i=0; i<item.Items.Count; ++i)
    {
        r.Items.Add(cloneTreeViewItem((TreeViewItem)(item.Items[i])));
    }
    return r;
}

....
if (e.Key == Key.Up)
{
    int id;
    ItemCollection collection = getContainingList(selected_item, out id);
    if (collection != null) // it'll never be null, but w/e
    {
        if (id > 0)
        {
            collection.RemoveAt(id);
            TreeViewItem clone = cloneTreeViewItem(selected_item);
            collection.Insert(id-1, clone);
            clone.IsSelected = true;
        }
    }
    e.Handled = true;
}
else if (e.Key == Key.Down)
{
    int id;
    ItemCollection collection = getContainingList(selected_item, out id);
    if (collection != null) // it'll never be null, but w/e
    {
        if (id < collection.Count)
        {
            collection.RemoveAt(id);
            TreeViewItem clone = cloneTreeViewItem(selected_item);
            collection.Insert(id+1, clone);
            clone.IsSelected = true;
        }
    }
    e.Handled = true;
}
..... 
```

我确实花了至少一个小时研究这个主题，我知道`TreeViewItem`必须将其与其逻辑父级分离，并且我从测试中知道 a 的父级`TreeViewItem`始终是 a `TreeView`，我只是不知道如何分离它。我知道你试图让网站没有无聊的问题，我希望我的不是。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T03:24:12.563

快速的答案是

```
[whatevertheparentofyourUIElement].Children.Remove(childrenitem); 
```

正确的答案是：不要在代码中操作 UIElements。您有一个概念（设计）缺陷：您的 UI 不是数据，您的数据是数据，您的 UI 只是在屏幕上显示数据的好方法。`ObservableCollection<T>`如果你在关卡中有一个地方`ViewModel`并且必须操纵它，那不是更容易吗？相反，您正在操作复杂的 WPF 对象，编写大量不必要的意大利面条式代码，并且由于 UI 虚拟化之类的东西，您最终会遇到很多问题。

如果您`TreeView`以正确的方式实现，则此任务将减少为 2 行代码：从一个中删除所选项目`ObservableCollection`并将其插入`ObservableCollection`位于层次`ViewModel`结构中其他位置的另一个中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:49:58.730

好吧，感谢您的输入，但是经过进一步调试，我意识到我的问题是 getContainingList 中的递归调用，

```
ItemCollection r = getContainingList((TreeViewItem)(test[i]), out id); 
```

应该

```
ItemCollection r = getContainingList(((TreeViewItem)(test[i])).Items, item, out id); 
```

这就是我凌晨 2 点编码所得到的

# iphone - 如何从 iphone/ipad 检索唯一标识？

> ID：13200594
> 
> 赞同：1
> 
> 时间：2012-11-02T17:52:52.230
> 
> 标签：iphone, ios, xcode, cocoa

> **可能重复：**
> [用于生成唯一 ID 的 iOS 硬件参数](https://stackoverflow.com/questions/11689702/ios-hardware-parameters-for-unique-id-generation)

我需要唯一标识 IOS 设备而不是需要注册才能唯一标识我的应用程序的消费者，这些数据将通过使用 WCF 服务操作发送到我们的服务器。

我怎样才能识别它？

PS。IP不是一种选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:55:40.660

UDID ( `[UIDevice currentDevice].uniqueIdentifier;`) 已弃用，所以我不建议您使用它...

我们在我们的应用程序中所做的是生成一个 UUID 并将其存储在钥匙串上，与客户 ID 一起使每个“个人资料”都独一无二......

```
CFUUIDRef uuidObj = CFUUIDCreate(nil);//create the new UUID
NSString *uuidString = (NSString*)CFUUIDCreateString(nil, uuidObj); 
```

PS 请注意，Apple 不喜欢您将用户绑定到设备，因此最好准备好解释您为什么需要这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:19:37.163

如果你打算只支持 iOS6，你可以使用 UIDevice identifierForVendor。

# perl - Perl中哈希数组树的路径列表

> ID：13200595
> 
> 赞同：3
> 
> 时间：2012-11-02T17:53:02.347
> 
> 标签：perl, perl-data-structures, template-toolkit

我有一系列路径

```
C:\A
C:\B\C
D:\AB 
```

我想把这些放在哈希数组树中，这样我就可以在 TT2 模板中浏览它们。

我的意思是这样的：

```
@dirs = [
          {
            name => "C:",
            subs => [
                      {
                        name => "A",
                        subs => [],
                      },
                      {
                        name => "B",
                        subs => [
                                  {
                                    name => "C",
                                    subs => [],
                                  }
                                ],
                      }
                    ]
          },
          { 
            name => "D:",
            subs => [
                      {
                        name => "AB",
                        subs => [],
                      }
                    ],
          }
        ] 
```

我也知道我可能在这里做 Brainderp，所以我对其他方法持开放态度，唯一的要求是将路径列表转换为可以使用 TT2 模板工具包重建为树的东西。

还有那个结构叫什么？我只是想到了哈希数组树，但我敢打赌这是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T12:37:46.557

这是一个非常简短的方法。请注意，这只能如此简单，因为我将您的数据格式更改为与您的树结构完全匹配的哈希哈希。请参阅下面的代码以将结果结构转换为您的结构。

```
my $tree = {root => {}};
foreach my $input (<DATA>) { chomp $input;
    my $t = $tree;
    $t = $t->{$_} //= {} for split /\\/ => $input;
}

use Data::Dumper; print Dumper $tree;

__DATA__
C:\A
C:\B\C
D:\AB
C:\B\A
C:\B\A\C 
```

**输出**：

```
$VAR1 = {
          'C:' => {
                    'A' => {},
                    'B' => {
                             'A' => {
                                      'C' => {}
                                    },
                             'C' => {}
                           }
                  },
          'D:' => {
                    'AB' => {}
                  }
        }; 
```

要将此数据结构转换为您的数据结构，只需使用以下代码：

```
sub transform {
    my $tree        = shift;
    my @children    = ();
    while (my ($name, $children) = each %$tree) {
        push @children, {
            name => $name,
            subs => [ transform($children) ],
        }
    }
    return @children;
}

my $AoH_tree = {name => 'root', subs => [transform($tree)] }; 
```

完毕。:) 对于具有更多糖、功能和可读性但更多 LOC 的完全不同的方法，请参阅我的[其他答案](https://stackoverflow.com/a/13208927/1184510)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T11:57:38.540

这是一个更长但更具可读性和更舒适的解决方案。您不必（并且可能不想）使用它，但也许它可以帮助（不仅是您）了解更多关于不同方法的信息。它为树节点引入了一个小的[Moo](http://p3rl.org/Moo)类，它可以通过可读的排序和字符串化方法**递归地为其自身添加名称。**

**编辑**：对于完全不同且极短的替代方案，请参阅我的[其他答案](https://stackoverflow.com/a/13209256/1184510)。我把它分成两个答案，因为它们是完全不同的方法，而且这个答案已经足够长了。;)

## 树类

请注意，这基本上只不过是您的嵌套 AoHoAoH... 结构 - 添加了一点点糖。;)

```
# define a tree structure
package Tree;
use Moo; # activates strict && warnings
use List::Util 'first';

# name of this node
has name => (is => 'ro');

# array ref of children
has subs => (is => 'rw', isa => sub { die unless ref shift eq 'ARRAY' }); 
```

现在在基本准备之后（我们的对象有一个标量`name`和一个数组 ref `subs`），我们来到这个答案的主要部分：递归`add_deeply`方法。请注意，从这里开始，一切都反映了数据结构的*递归性质：*

```
# recursively add to this tree
sub add_deeply {
    my ($self, @names)  = @_;
    my $next_name       = shift @names;

    # names empty: do nothing
    return unless defined $next_name;

    # find or create a matching tree
    my $subtree = first {$_->name eq $next_name} @{$self->subs};
    push @{$self->subs}, $subtree = Tree->new(name => $next_name, subs => [])
        unless defined $subtree;

    # recurse
    $subtree->add_deeply(@names);
} 
```

以下两种方法并不重要。基本上他们在这里是为了使输出漂亮：

```
# sort using node names
sub sort {
    my $self = shift;
    $_->sort for @{$self->subs}; # sort my children
    $self->subs([ sort {$a->name cmp $b->name} @{$self->subs} ]); # sort me
}

# stringification
use overload '""' => \&to_string;
sub to_string {
    my $self    = shift;
    my $prefix  = shift // '';

    # prepare
    my $str = $prefix . '{TREE name: "' . $self->name . '"';

    # stringify children
    if (@{$self->subs}) {
        $str .= ", children: [\n";
        $str .= $_->to_string("    $prefix") for @{$self->subs};
        $str .= "$prefix]";
    }

    # done
    return $str . "}\n";
} 
```

## 如何使用这个

现在是简单的部分。只需阅读输入（从`__DATA__`这里）和`add_deeply`：

```
# done with the tree structure: now use it
package main;

# parse and add names to a tree
my $tree = Tree->new(name => 'root', subs => []);
foreach my $line (<DATA>) {
    chomp $line;
    $tree->add_deeply(split /\\/ => $line);
}

# output
$tree->sort;
print $tree;

__DATA__
C:\A
C:\B\C
D:\AB
C:\B\A
C:\B\A\C 
```

**输出**：

```
{TREE name: "root", children: [
    {TREE name: "C:", children: [
        {TREE name: "A"}
        {TREE name: "B", children: [
            {TREE name: "A", children: [
                {TREE name: "C"}
            ]}
            {TREE name: "C"}
        ]}
    ]}
    {TREE name: "D:", children: [
        {TREE name: "AB"}
    ]}
]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T20:00:32.237

我做了一个复杂的哈希结构来跟踪已经放置的节点，然后我做了这个。更多步骤，但代码更精简。

```
while ( <> ) {
    chomp;
    my $ref = \@dirs;
    foreach my $dir ( split /\\/ ) {
        my $i = 0;
        $i++ while ( $ref->[$i] and $ref->[$i]{name} ne $dir );
        my $r = $ref->[$i] ||= { name => $dir, subs => [] };
        $ref  = $r->{subs};
    }
} 
```

# wordpress - 我不知道从哪里开始...htaccess 文件，可能还有 Apache？

> ID：13200597
> 
> 赞同：0
> 
> 时间：2012-11-02T17:53:21.413
> 
> 标签：wordpress, apache, .htaccess, http-status-code-404, internal-server-error

我不知道这些东西是什么意思。我只知道 GoDaddy 技术支持人员说这是 .htaccess、WordPress 和 Apache 的问题。

简而言之，当我从根目录中删除 .htaccess 文件时，我的博客页面和类别链接会导致内部服务器错误，而我其他站点目录中的自定义 404 页面工作正常。

反之亦然。当我在根目录上放置一个空白的 .htaccess 文件时，我的博客可以正常工作，而我的其他目录站点会收到内部服务器错误，而不是自定义 404。

我做了一个截屏视频来实际解释和展示我遇到的问题，希望有人能弄清楚并指出我正确的方向。

至于编写代码 - 我可以复制/粘贴我得到的内容，但我不是程序员。这对我来说都是陌生的，真的非常令人沮丧。

这是 YouTube 上的视频，可以更好地解释正在发生的事情，以防我没有正确解释。

[http://youtu.be/8FL1ihplQws](http://youtu.be/8FL1ihplQws)

谢谢！

凯伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:30:12.023

将原始 .htaccess 放回根文件夹

创建一个包含以下内容的新 .htaccess 文件

重写引擎关闭

将其放在子文件夹中，例如 the-bookmarks-store

我的预感是插件域正在读取 .htaccess 但重写规则对该网站无效。我建议的治疗方法会关闭插件域的重写

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:36:19.193

当您使用默认的永久链接结构时会发生什么`?p=123`？尝试来回更改，看看链接是否使用默认设置！

# r - 在 R 中处理面板数据

> ID：13200600
> 
> 赞同：6
> 
> 时间：2012-11-02T17:53:32.413
> 
> 标签：r, data.table, xts, zoo

我想看看人们在 R 中使用大型数据集（即 50 mil + obs）处理面板数据时使用什么：该`data.table`包很有用，因为它有键并且非常快。该`xts`软件包很有用，因为它具有执行各种时间序列数据的功能。因此，似乎有两个不错的选择：

1.  有一个`data.table`并编写自定义时间序列函数来处理它
2.  有一个`xts`对象列表，并`lapply`在每次您想做某事时在该列表上运行。最终这将需要合并到一个`data.frame`做回归等。

我知道这个`plm`包，但没有发现它对数据管理有用，因为上面的两个选项。你们都用什么？关于什么时候最有效的任何想法？

让我提出一个场景：想象有 N 个公司，有 T 个时间段，其中 N>>0 和 T>>0。`data.table`如果我想将每个公司滞后 1 个时间段，将会非常快，例如：

```
x <- data.table(id=1:10, dte=rep(seq(from=as.Date("2012-01-01"), to=as.Date("2012-01-10"), by="day"), each=10), val=1:100, key=c("id", "dte"))
x[,lag_val:=c(NA, head(val, -1)),by=id] 
```

另一种方法可能是：

```
y <- lapply(ids, function(i) {xts(x[id==i, val], order.by=x[id == i, dte])})
y <- lapply(y, function(obj) { cbind(obj, lag(obj, 1)) }) 
```

前者的优势在于它处理大数据的速度。后者的优点是能够做类似的事情`period.apply`并使用`xts`. 是否有使`xts`表示更快的技巧？也许是两者的结合？从对象转换到`xts`对象的成本似乎很高。

# iphone - 如何将 Admob 横幅放在 iPhone 4S 和 iPhone 5 的底部？

> ID：13200601
> 
> 赞同：2
> 
> 时间：2012-11-02T17:53:47.563
> 
> 标签：iphone, objective-c, ios, admob

在 iPhone 5 之前，我可以将 admob 横幅放在屏幕底部（就在标签栏上方）。但由于 iPhone 5 的屏幕尺寸，现在一切都受到了干扰。我什至尝试通过自动布局来做到这一点（它没有用）。我怎样才能为两种屏幕尺寸做到这一点？

这是我的代码 -

```
-(void) viewDidLoad {

[super viewDidLoad];

        adMob = [[GADBannerView alloc] initWithFrame:CGRectMake(0.0,
                                                                367.0 -
                                                                GAD_SIZE_320x50.height,
                                                                GAD_SIZE_320x50.width,
                                                                GAD_SIZE_320x50.height)];

        adMob.translatesAutoresizingMaskIntoConstraints=NO;

        // Specify the ad's "unit identifier." This is your AdMob Publisher ID.
        adMob.adUnitID = @"XXXXXXXX";

        // Let the runtime know which UIViewController to restore after taking
        // the user wherever the ad goes and add it to the view hierarchy.
        adMob.rootViewController = self;
        GADRequest *request = [GADRequest request];

        request.testing=YES;
        [self.view addSubview:adMob];

        // Initiate a generic request to load it with an ad.
        [adMob loadRequest:[GADRequest request]];
        [adMob release];

     // Create a view of the standard size at the bottom of the screen.
        // Available AdSize constants are explained in GADAdSize.h.

    } 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T17:31:45.913

如果您使用的是 iOS 6，您应该只使用 AutoLayout。将横幅添加到视图层次结构后，您可以将此代码放入广告展示位置代码中：

```
self.googleAdBannerView.translatesAutoresizingMaskIntoConstraints = NO;
[self.view addSubview:self.googleAdBannerView];

// Constraint keeps ad at the bottom of the screen at all times.
[self.googleAdBannerView.bottomAnchor constraintEqualToAnchor:self.view.bottomAnchor].active = YES;

// Constraint keeps ad in the center of the screen at all times.
[self.googleAdBannerView.centerXAnchor constraintEqualToAnchor:self.view.centerXAnchor].active = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:58:50.947

`y`根据他们使用的屏幕更改位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:34:18.293

您必须使用视图的自动布局属性，没有其他方法可以解决，因为在任何设备中，视图的高度都保持不变，现在是 499.0。

# google-maps-api-3 - 从地图中删除多边形后构建多边形

> ID：13200605
> 
> 赞同：0
> 
> 时间：2012-11-02T17:54:01.443
> 
> 标签：google-maps-api-3, event-handling, geojson

一旦瓷砖加载到地图上，我可以在 5 秒后清除多边形，但是当我尝试再次构建多边形时，多边形是由原始数据生成的。我想使用新的数据集。

我究竟做错了什么？

抱歉问了这么多问题。我在学习 API 时获得了很多乐趣。

先感谢您。

```
 var map;

    function initialize() { 
        var kansas_city = new google.maps.LatLng(39.316858,-94.963194);
        var mapOptions = {
        zoom: 13,
        center: kansas_city,
        mapTypeId: google.maps.MapTypeId.TERRAIN
        };
        map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

        google.maps.event.addListener(map, 'tilesloaded', function() {
            setTimeout(function() { removeSectors() }, 3000);
            setTimeout(function() { updateMap() }, 4000);
            });     
    }

    function removeSectors() {
        if ( allPolygons ) {
            for ( i = 0; i < allPolygons.length; i++ ) {
                allPolygons[i].setMap(null);
            }
        allPolygons.length = 0;
        }
    }

    var data;
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'json_template.json', true);
    xhr.onload = function() {
        data = JSON.parse(xhr.responseText)
        sector_callback(data);
    };
    xhr.send();

    function updateMap() {
        var data;
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'json_template1.json', true);
        xhr.onload = function() {
            data = JSON.parse(xhr.responseText)
            sector_callback(data);
        };
        xhr.send();
    }

    function createClickablePoly(poly, html) {
    google.maps.event.addListener(poly, 'click', function(evt) {
        infowindow.setContent(html);
        infowindow.setPosition(evt.latLng);
        infowindow.open(map);
        });
    }
    var infowindow = new google.maps.InfoWindow({});        

    function sector_callback() {
        var bounds = new google.maps.LatLngBounds();        
        for (var i = 0, len = data.features.length; i < len; i++) {
            var coords = data.features[i].geometry.coordinates[0];
            siteNames = data.features[i].properties.Name; // added for site names
            var path = [];
        for ( var j = 0, len2 = coords.length; j < len2; j++ ){ // pull out each     set of coords and create a map object
            var pt = new google.maps.LatLng(coords[j][1], coords[j][0])
            bounds.extend(pt);
            path.push(pt);

        }

        var polygons = new google.maps.Polygon({
        path: path,
            strokeColor: "#000000",
            strokeOpacity: 0.8,
            strokeWeight: 1,
            fillColor: "#000000",
            fillOpacity: 0.35,
        map: map
        });
        createClickablePoly(polygons, siteNames);
        //console.debug(siteNames);

        google.maps.event.addListener(polygons, 'mouseover', function() {
        var currentPolygon = this;

        currentPolygon.setOptions({ 
            fillOpacity: 0.45,
            fillColor: "#FF0000"
            })
        });

        google.maps.event.addListener(polygons, 'mouseout', function() {
        var currentPolygon = this;
        currentPolygon.setOptions({ 
            fillOpacity: 0.35,
            fillColor: "#000000"
            })
        });

        allPolygons.push(polygons);
        }

    }
    var allPolygons = []; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:33:29.723

将 tilesloaded 事件移动到初始化函数中。正如它所坐的那样，您将添加与多边形一样多的侦听器，并且它们都将尝试清除/更新地图。

# youtube-api - 上传浏览器 Base 的进度条

> ID：13200607
> 
> 赞同：1
> 
> 时间：2012-11-02T17:54:05.670
> 
> 标签：youtube-api

我正在寻找一种向用户显示上传进度的方法，因为它很长。

我尝试使用 ajax 发布文件，但这不起作用。该文件似乎已上传，但实际上我从未在我的 youtube 频道上看到该视频，而且我在完整的回调中没有任何内容。

我看到很多话题都在谈论这个，但它们已经很老了（2009/2010）所以我希望你们中的一个人找到了解决方案。

我也不能使用实验性 api v3，因为我的应用程序适用于需要非常稳定的大品牌，iframe 也不能使用，因为我需要设计上传表单。

非常感谢。

格温

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:28:14.157

我渴望实现同样的目标，但我认为现在不可能。我问了同样的问题，[YouTube API Browser-Based Upload with Ajax for Progress Bar](https://stackoverflow.com/questions/13146803/youtube-api-browser-based-upload-with-ajax-for-progress-bar)，并得到了 Google YouTube 团队成员的回复。但是，他们的建议对我来说并没有成功，但也许对你有用。

# sql - 如何绕过将表达式转换为数据类型 int 的算术溢出错误？

> ID：13200609
> 
> 赞同：5
> 
> 时间：2012-11-02T17:54:14.960
> 
> 标签：sql, sql-server, sql-server-2005

我有以下查询：

```
-- CTE to remove outliers, e.g. remove the fastest and slowest results
;WITH MinMaxCTE AS 
(
  SELECT ServerName, CONVERT(VARCHAR(10), UpdatedOn, 101) AS [Date], Version, 
    MIN(JaguarStartupTime) AS MinStartTime, MAX(JaguarStartupTime) AS MaxStartTime
  FROM dbo.MachineConfiguration (NOLOCK)
  WHERE DomainLogin NOT IN (SELECT DomainLogin FROM dbo.SupportGroup)
  GROUP BY ServerName, CONVERT(VARCHAR(10), UpdatedOn, 101), Version
)

SELECT  AVG(mc.JaguarStartupTime) AS AverageTime
    , COUNT(*) AS NumEntries
    , mc.Version
FROM    #Eligible mc (NOLOCK)
JOIN MinMaxCTE cte ON mc.ServerName = cte.ServerName 
  AND CONVERT(VARCHAR(10), mc.UpdatedOn, 101) = cte.[Date] 
  AND mc.Version = cte.Version 
  AND mc.JaguarStartupTime <> cte.MinStartTime 
  AND mc.JaguarStartupTime <> cte.MaxStartTime
GROUP BY mc.Version
ORDER BY Version DESC, AVG(mc.JaguarStartupTime) ASC 
```

#Eligible 临时表的定义是

```
create table #Eligible (
    Version nvarchar(50), JaguarStartupTime int, 
    ServerName nvarchar(50), UpdatedOn datetime ) 
```

无论我注释掉什么条件或聚合，我总是收到以下错误：`Arithmetic overflow error converting expression to data type int`.

我可以从这里去哪里？我该如何进一步调试？

编辑：样本数据

```
Version JaguarStartupTime    ServerName     UpdatedOn
6.4.6.082      16040         NewOrleansLA   2012-08-08 12:34:12.330
6.5.1.012      40390         BatonRougeLA   2012-08-08 18:33:17.440
6.5.1.012      48379         HonoluluHI     2012-08-09 04:42:50.453 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T18:02:19.407

您是否尝试过将您的 jaguarstartup 时间转换为您的 avg 聚合中的 bigint，就像这样...

AVG(CAST(mc.JaguarStartupTime AS BIGINT))

这应该解决算术溢出问题。

要计算平均平均值，服务器需要能够首先对所有整数求和，因此您要平均的数据类型需要能够存储这些值的总和，即使返回的答案在整数的范围内

# ios - 固定页眉高度

> ID：13200615
> 
> 赞同：0
> 
> 时间：2012-11-02T17:54:29.927
> 
> 标签：ios, css, wordpress, responsive-design

我制作了一个 Wordpress 移动主题，在我修复了 HEADER 的单个页面上，如果视图模式为横向，则在 iPhone 上，标题高度为 50%，在 css 中我为标题 { height:70px; } 但仅在 iPhone（横向）上，标题高度为 50%。谢谢。

标题CSS：

```
#header { width:100%; float:left; height:70px; }
.fixed { position:fixed; top:0; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:09:30.210

只需将其添加到您的样式表中。它只会在窗口被触发时触发

```
@media only screen and (min-width : 321px) and (max-width: 480px) {
    #header { height:50%; }
} 
```

您还需要将以下元标记添加到页面的 head 标记中：

```
<meta name="viewport" content="width=device-width, minimum-scale=1.0"> 
```

# objective-c - 皱巴巴的纸 UI View 动画

> ID：13200620
> 
> 赞同：7
> 
> 时间：2012-11-02T17:54:42.407
> 
> 标签：objective-c, ios, cocoa-touch, animation

你知道任何将 UIView 压缩为动画的 iOS 库吗？

只是为了说明一下 crumple 在这种情况下的含义：

![在此处输入图像描述](../Images/9d06237aca80cbd2fbda2dadf3f9962b.png)

![截屏](../Images/5017671e67ac0c47baa56b045ddfd5bc.png)

（截取自 CSS 褶皱效果的屏幕截图）

很可能不存在，但想知道...

# winforms - zXing：无法读取有效的二维码

> ID：13200624
> 
> 赞同：0
> 
> 时间：2012-11-02T17:55:14.427
> 
> 标签：winforms, c#-4.0, decode, qr-code, zxing

我在 VS 2010 的 winforms 应用程序中使用 zXing C# 库来解码 QR 码。它适用于某些图像，但对一些图像无效。

**异常消息：**

> “抛出了‘com.google.zxing.ReaderException’类型的异常。”

**这是我的代码：**

***返回解码数据的函数代码***

```
 public string GetQRValue(Bitmap value)
    {
        string result = string.Empty;

        try
        {
            QRCodeReader reader = new QRCodeReader();
            //com.google.zxing.Reader re
            com.google.zxing.LuminanceSource source = new RGBLuminanceSource(value, value.Width, value.Height);
            var binarizer = new HybridBinarizer(source);
            var binBitmap = new BinaryBitmap(binarizer);
            result = reader.decode(binBitmap).Text;
        }
        catch(Exception ex)
        {
            result = ex.Message; //string.Empty;
        }

        return result;
    } 
```

***调用上述函数的代码：***

```
Bitmap image1 = (Bitmap)Image.FromFile(txtFile.Text , true);
lblData.Text = cls.GetQRValue(image1); 
```

这里txtFile是文件的路径，cls是包含解码函数的类的对象。

***以下是无法解码的图像。***

![无法解码的二维码](../Images/629ecb1fef7302856986c01b195e3a3d.png)
我尝试在以下网站上对其进行解码。并在那里解码。
[http://www.patrick-wied.at/static/qrgen/](http://www.patrick-wied.at/static/qrgen/)

***并且下面的图像被成功解码。***

![解码成功的二维码](../Images/fdd4ce50182f375f52b11cc733817cf3.png)

请帮我解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:07:27.337

C# 端口有些陈旧且未维护。它看起来像是您的二值化问题或端口中的一些问题，因为主分支（Java）可以很好地解码这些：

[http://zxing.org/w/decode?u=http%3A%2F%2Fi.stack.imgur.com%2FTEiIH.jpg&full=true](http://zxing.org/w/decode?u=http%3A%2F%2Fi.stack.imgur.com%2FTEiIH.jpg&full=true) http://zxing.org/w/decode?u=http%3A %2F%2Fi.stack.imgur.com%2FP8irV.png&full=true

# debugging - 如何获取特定源文件行的指令 adr - gcc 4.71 - Arm Cortex-M4

> ID：13200625
> 
> 赞同：1
> 
> 时间：2012-11-02T17:55:27.453
> 
> 标签：debugging, gcc, debug-symbols

我正在使用 gcc 4.71 工具链为 STM32F4 (ARM Cortex-M4) 微控制器编译我的 c 程序。在我的程序被编译和链接后（我有 .elf 文件），我想为每个源代码行提取第一条指令的地址。目前我正在尝试通过解析反汇编文件来做到这一点 - 例如，在下面我得到了 main.c 中第 41 行的 adr 0x8000c44。

还有其他更方便的方法如何使用一些 gcc 工具获取这些信息吗？

示例反汇编文件：

c:\a_test2/main.c:41

8000c44: b580 推 {r7, lr}

我用来编译和链接的命令行：

c:\Yagarto471\bin\arm-none-eabi-gcc.exe -c -mcpu=cortex-m4 -mthumb -ffunction-sections -fdata-sections -Wall -Wextra -Wno-unused-parameter -Wno-unknown-pragmas -Wno-unused-variable -Wno-unused-but-set-variable -std=gnu89 -g -ggdb3 -fverbose-asm -Wa,-ahlms=app.lst -DUSE_STDPERIPH_DRIVER -DSTM32F4XX -DUSE_STM32F4_DISCOVERY -DUSE_USB_OTG_FS -DHSE_VALUE=8000000 - MD -MP -MF app.d -I。-Iinc -save-temps -c main.c -o main.o

c:\Yagarto471\bin\arm-none-eabi-g++ -mcpu=cortex-m4 -mthumb -Tstm32f4xx.ld -g -Wl,-Map=Map.map,--cref,--no-warn-mismatch - wl,--gc-sections -nostartfiles startup\startup_stm32f4xx.o startup\stm32f4_discovery.o startup\system_stm32f4xx.o startup\stm32f4xx_rcc.o startup\stm32f4xx_gpio.o startup\stm32f4xx_tim.o startup\misc.o startup\stm32f4xx_usart.o startup \syscalls.o main.o sys.o intr.o vars.o debug.o lib.o -o stm32f4_temp.elf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-09T02:56:00.617

gdb 是做你想做的事的好工具。

> arm-none-eabi-gdb -batch -ex '文件 stm32f4_temp.elf' -ex '反汇编 main'

您将获得每条指令的地址信息。

# sql - sql server 外部工具记录错误日志

> ID：13200627
> 
> 赞同：1
> 
> 时间：2012-11-02T17:55:44.820
> 
> 标签：sql, sql-server-2008

在 SQL Server 2008 中，我安装了一些外部工具，然后将它们删除。不知何故，我在错误日志中收到了这个错误。如何删除此队列？

```
The activated proc '[LakeSideLockLogger].[_LakeSide_DbTools_LockMonitorEvents]' running on queue 'msdb.LakeSideLockLogger._LakeSide_DbTools_LockQueue' output the following:  'Could not find stored procedure 'LakeSideLockLogger._LakeSide_DbTools_LockMonitorEvents'.' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:17:18.587

尝试以下链接卸载：

[http://www.sqlsolutions.com/products/sql-deadlock-detector/Uninstall.html](http://www.sqlsolutions.com/products/sql-deadlock-detector/Uninstall.html)

# ruby-on-rails-3 - Rails Active Record 查询——“或”条件

> ID：13200629
> 
> 赞同：1
> 
> 时间：2012-11-02T17:56:01.800
> 
> 标签：ruby-on-rails-3

我有一张工作表；每个作业都有一个 start_date 和一个 end_date。对于给定的月份，我想拉出在某个月的任何部分或全部“运行”的所有工作。问题是如何为 5 个不同的“或”条件编写查询，以捕获在一个月的全部或任何部分运行的作业的概念。所以，我需要在月初之前开始并在当月结束的所有工作，**或者**在当月开始和结束的所有工作，**或者**在当月开始并在月底之后完成的所有工作......好吧，五个中有三个。那么在 Jobs.where 子句中，“或”是如何紧凑表达的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:07:59.483

```
beginning_of_month = Time.now.beginning_of_month
end_of_month = Time.now.end_of_month
Job.where("(start_date BETWEEN ? AND ?) OR (end_date BETWEEN ? AND ?)", beginning_of_month, end_of_month, beginning_of_month, end_of_month) 
```

使用标准的 ActiveRecord 我认为我们不能再短了。没有`OR`，`BETWEEN`可以这样优雅地表达：

```
Job.where(start_date: beginning_of_month..end_of_month) 
```

但既然你需要`OR`，想不出更好的了，但你可能有兴趣看看[squeel gem](https://github.com/ernie/squeel)

# html - 在 ie9 和 ie10 中转换相同的 xsl 文件会产生不同的 html

> ID：13200634
> 
> 赞同：2
> 
> 时间：2012-11-02T17:56:24.600
> 
> 标签：html, xml, xslt, internet-explorer-9, internet-explorer-10

我有看起来像这样的 XSL 代码......

```
<xsl:template name="doHeader">
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" />
<head>
    <xsl:processing-instruction name="IMPORT">
        namespace="search" implementation="../html/scripts/button.htc"
    </xsl:processing-instruction>
    <style type="text/css">
        @import url("../temp/theme.css");
        @import url("../html/css/view.css");
        @import url("../html/css/search.css");
    </style>
    <script src="../html/scripts/utils.js" />
    <script src="../html/scripts/search.js" />
</head>
</xsl:template> 
```

（当然，我在 ie10 版本中添加了那个元标记）。无论如何，在ie9中运行的html中，有按钮的代码，但在ie10中，没有按钮代码。

ie9看起来像这样...

```
<TR><TD>
    <?import namespace = search urn = "_" implementation = "file:///C:/Users/.../button.htc" /><search:button onclick=handleSubmit() value="OK">
    <DIV>
    <DIV style="LINE-HEIGHT: 1px; BACKGROUND-COLOR: #a1b8c9; MARGIN: 0px 2px; DISPLAY: block; HEIGHT: 1px; FONT-SIZE: 1px">&nbsp;</DIV>
    <DIV style="BORDER-BOTTOM: #a1b8c9 0px solid; BORDER-LEFT: #a1b8c9 1px solid; LINE-HEIGHT: 1px; MARGIN: 0px 1px; DISPLAY: block; BACKGROUND: #eef5f9; HEIGHT: 1px; FONT-SIZE: 1px; BORDER-TOP: #a1b8c9 0px solid; BORDER-RIGHT: #a1b8c9 1px solid">&nbsp;</DIV>
    <DIV style="BORDER-BOTTOM: #a1b8c9 0px solid; POSITION: relative; TEXT-ALIGN: center; BORDER-LEFT: #a1b8c9 1px solid; PADDING-BOTTOM: 4px; BACKGROUND-COLOR: #eef5f9; PADDING-LEFT: 20px; PADDING-RIGHT: 20px; DISPLAY: block; FONT-FAMILY: tahoma; WHITE-SPACE: nowrap; COLOR: #000000; FONT-SIZE: 10pt; BORDER-TOP: #a1b8c9 0px solid; CURSOR: default; BORDER-RIGHT: #a1b8c9 1px solid; PADDING-TOP: 4px; TOP: 0px; LEFT: 0px" tabIndex=0>
    <DIV>OK</DIV>
    <P style="POSITION: absolute; COLOR: #ff0000; TOP: 5px; LEFT: 35px"></P></DIV>
    <DIV style="BORDER-BOTTOM: #a1b8c9 0px solid; BORDER-LEFT: #a1b8c9 1px solid; LINE-HEIGHT: 1px; MARGIN: 0px 1px; DISPLAY: block; BACKGROUND: #eef5f9; HEIGHT: 1px; FONT-SIZE: 1px; BORDER-TOP: #a1b8c9 0px solid; BORDER-RIGHT: #a1b8c9 1px solid">&nbsp;</DIV>
    <DIV style="LINE-HEIGHT: 1px; BACKGROUND-COLOR: #a1b8c9; MARGIN: 0px 2px; DISPLAY: block; HEIGHT: 1px; FONT-SIZE: 1px">&nbsp;</DIV></DIV></search:button>
</TD></TR> 
```

但在 ie10 中它看起来像......

```
<TR><TD><search:button onclick=handleSubmit() value="OK"></search:button></TD></TR> 
```

我需要做什么才能让 ie10 生成与 ie9 相同的（ish）html？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:32:10.523

在将 xml 转换为 html 时，我需要指定 UTF-8 字符集。我不得不将此标签添加到我的 XSL 文件的顶部。

`<xsl:output method="html" encoding="UTF-8"/>`

在某些文件中，`<xsl:output method="html" />`存在，但添加编码解决了问题。

# java - Java 应用程序在 Windows 关机时挂起

> ID：13200636
> 
> 赞同：1
> 
> 时间：2012-11-02T17:56:29.083
> 
> 标签：java, windows, exit, shutdown

我有整个代码。Windows 强制关闭然后取消后，我的应用程序挂起。

`application running... >> windows force shutdown >> cancel >> back to windows (application HANGS Up)`

它是一个java错误。我想在应用程序挂断之前或窗口关闭之前退出应用程序。

谢谢

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.net.*;
import java.util.Random;

public class ServerWindow implements ActionListener{

    private RemoteDataServer server;

    private Thread sThread; //server thread

    private static final int WINDOW_HEIGHT = 200;
    private static final int WINDOW_WIDTH = 350;

    private String ipAddress;

    private JFrame window = new JFrame("Remote Control for Android");

    private JLabel addressLabel = new JLabel("");
    private JLabel portLabel = new JLabel("Android Remote Control Port: ");
    private JTextArea[] buffers = new JTextArea[3];
    private JTextField portTxt = new JTextField(5);
    private JLabel serverMessages = new JLabel("Not Connected");

    private JButton connectButton = new JButton("Start Server");
    private JButton disconnectButton = new JButton("Stop Server");

    public boolean connected = false;

    public ServerWindow(){
        server = new RemoteDataServer();
        window.setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        connectButton.addActionListener(this);
        disconnectButton.addActionListener(this);

        Container c = window.getContentPane();
        c.setLayout(new FlowLayout());

        try{
            InetAddress ip = InetAddress.getLocalHost();
            ipAddress = ip.getHostAddress();
            addressLabel.setText("Android Remote Control Server IP Address: "+ipAddress);
        }
        catch(Exception e){addressLabel.setText("IP Address Could Not be Resolved");}

        int x;
        for(x = 0; x < 3; x++){
            buffers[x] = new JTextArea("", 1, 30);
            buffers[x].setEditable(false);
            buffers[x].setBackground(window.getBackground());
        }

        portTxt.setEditable(false);
        Random portRandom = new Random();
        for (int i = 0; i < 10; i++) {

          int port = portRandom.nextInt(4998) + 1;
          int portNum = 5000+port;
          String portString = Integer.toString(portNum);
          portTxt.setText(portString);
          }

        c.add(addressLabel);
        c.add(buffers[0]);
        c.add(portLabel);
        //portTxt.setText("5444");
        c.add(portTxt);
        c.add(buffers[1]);
        c.add(connectButton);
        c.add(disconnectButton);
        c.add(buffers[2]);
        c.add(serverMessages);

        window.setLocationRelativeTo(null);
        window.setVisible(true);
        window.setResizable(false);

    }

    public void actionPerformed(ActionEvent e){
        Object src = e.getSource();

        if(src instanceof JButton){
            if((JButton)src == connectButton){
                int port = Integer.parseInt(portTxt.getText());
                runServer(port);
            }

            else if((JButton)src == disconnectButton){
                closeServer();
            }
        }
    }

    public void runServer(int port){
        if(port <= 9999){
            server.setPort(port);
            sThread = new Thread(server);
            sThread.start();
        }
        else{
            serverMessages.setText("The port Number must be less than 10000");
        }
    }

    public void closeServer(){
        serverMessages.setText("Disconnected");
        server.shutdown();
        connectButton.setEnabled(true);
    }

    public static void main(String[] args){
        new ServerWindow();
    }

    public class RemoteDataServer implements Runnable{
        int PORT;
        private DatagramSocket server;
        private byte[] buf;
        private DatagramPacket dgp;

        private String message;
        private AutoBot bot;

        public RemoteDataServer(int port){
            PORT = port;
            buf = new byte[1000];
            dgp = new DatagramPacket(buf, buf.length);
            bot = new AutoBot();
            serverMessages.setText("Not Connected");
        }

        public RemoteDataServer(){
            buf = new byte[1000];
            dgp = new DatagramPacket(buf, buf.length);
            bot = new AutoBot();
            serverMessages.setText("Not Connected");
        }

        public String getIpAddress(){
            String returnStr;
            try{
                    InetAddress ip = InetAddress.getLocalHost();
                    returnStr = ip.getCanonicalHostName();
            }
            catch(Exception e){ returnStr = new String("Could Not be Resolve Ip Address");}
            return returnStr;
        }

        public void setPort(int port){
            PORT = port;
        }

        public void shutdown(){
            try{server.close();
                serverMessages.setText("Disconnected");}
            catch(Exception e){}
        }
        public void run(){
            try {

                InetAddress ip = InetAddress.getLocalHost(); 
                serverMessages.setText("Waiting for connection on " + ip.getCanonicalHostName());
                server = new DatagramSocket(PORT, ip);
                connected = true;
                connectButton.setEnabled(false);
            }
            catch(BindException e){ serverMessages.setText("Port "+PORT+" is already in use. Use a different Port"); }
            catch(Exception e){serverMessages.setText("Unable to connect");}

            while(connected){
                // get message from sender
                try{ server.receive(dgp);

                    // translate and use the message to automate the desktop
                    message = new String(dgp.getData(), 0, dgp.getLength());
                    if (message.equals("Connectivity")){
                        //send response to confirm connectivity
                        serverMessages.setText("Trying to Connect");
                        server.send(dgp); //echo the message back
                    }else if(message.equals("Connected")){
                        server.send(dgp); //echo the message back
                    }else if(message.equals("Close")){
                        serverMessages.setText("Controller has Disconnected. Trying to reconnect."); //echo the message back
                    }else{
                            serverMessages.setText("Android Phone Connected to ARD Server");
                            bot.handleMessage(message);}
                }catch(Exception e){
                    serverMessages.setText("Disconnected");
                    connected = false;}
            }

        }

    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:05:39.680

没有花太多时间来审查你的代码（老实说）只是从投诉中让我感到震惊，它是你的套接字的 I/O 线程。
你不能打断它，它仍然挂着。
在您的情况下，您应该强制关闭网络代码中关闭挂钩的输出/输入流。另一种选择是尝试让你的线程守护进程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T05:22:06.467

这为我解决了这个问题：

```
Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {
    public void run() {
        // your shutdown code

        // if you really want to be sure the program exits
        Runtime.getRuntime().halt(0);
    }
}, "shutdown hook thread")); 
```

# excel - 如何更改 Excel VB6 表单组合框显示的下拉项目数

> ID：13200638
> 
> 赞同：0
> 
> 时间：2012-11-02T17:56:31.190
> 
> 标签：excel, vba, combobox

默认情况下，组合框在其下拉列表中显示 8 个项目

任何人都可以指出一些（希望是最小的）Excel VB6 代码来更改这个默认值吗？

看起来它必须包含API

我可以找到 VB6 的示例（ [VB6：Extend number of items in combo box](https://stackoverflow.com/questions/1282942/vb6-extend-number-of-items-in-combo-box/)），但没有特定于 Excel VB6 Form Combobox

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:54:05.490

Combobox.ListRows 属性可以解决问题

# django - django网站上https上传的CSRF Coo kie未设置或CSRF验证失败

> ID：13200640
> 
> 赞同：3
> 
> 时间：2012-11-02T17:56:50.560
> 
> 标签：django-csrf, django, django, django-csrf

[django-csrf](/questions/tagged/django-csrf "显示标记为“django-csrf”的问题") [django](/questions/tagged/django "显示标记为“django”的问题")

和周围的人一样，我在使用 CSRF 和 Django 时遇到了很多问题。

这里是上下文：
- 我创建了一个 https 网站，用户可以在其中上传文件
- 我使用 Django 1.4.2 创建这个网站
- 我创建了一个应用程序 *file_manager* 可以满足我的需求
- 我是仅通过管理员网址使用此应用

如果我禁用my `django.middleware.csrf.CsrfViewMiddleware`，一切正常。 我可以在 Debian Squeeze 下的命令行中使用 cURL 在我的模板上上传一个文件，该文件会到达服务器，没问题。 但是，似乎并不安全。`MIDDLEWARE_CLASSES``settings.py`

所以我启用`django.middleware.csrf.CsrfViewMiddleware` 了它不再起作用了。我收到有关 CSRF 验证的各种错误。

我相信我已经消除了通常的嫌疑人（至少我希望如此）：
- `{% csrf_token %}`
- `RequestContext`
-`CsrfViewMiddleware`在**settings.py**

您将在下面找到该过程涉及的所有文件（我希望）：

**视图.py**

```
from django.http import HttpResponse, HttpResponseRedirect, Http404
from django.template import Context, loader, RequestContext
from django.shortcuts import render, get_object_or_404, redirect, render_to_response
from django.core.urlresolvers import reverse

from django.core.context_processors import csrf
from django.views.decorators.csrf import csrf_exempt

from file_manager.models import MyClass
from file_manager.forms import MyClassForm

def index(request):
    latest_file_list = MyClass.objects.order_by('-name')[:5]
    context = Context({
        'latest_file_list': latest_file_list,
    })
    return render(request, 'file_manager/index.html', context)

def list(request):
    # Handle file upload
    if request.method == 'POST':
        form = MyClassForm(request.POST, request.FILES)
        if form.is_valid():
            newdoc = MyClass(name='testupl', filefield = request.FILES['docfile'], uploader='fcav')
            newdoc.save()

            # Redirect to the document list after POST
            return HttpResponseRedirect(reverse('file_manager.views.list'))

    else:
        form = MyClassForm() # A empty, unbound form

    # Load documents for the list page
    documents = MyClass.objects.all()

    # Render list page with the documents and the form
    con = {'documents': documents, 'form': form}
    con.update(csrf(request))
    return render_to_response(
        'list.html',
        con,
        context_instance=RequestContext(request)
    ) 
```

**列表.html**

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Minimal Django File Upload Example</title>
    </head>
    <body>
    <!-- List of uploaded documents -->
    {% if documents %}
        <ul>
        {% for document in documents %}
            <li><a href="{{ document.filefield.url }}">{{ document.filefield.name }}</a></li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No documents.</p>
    {% endif %}

        <!-- Upload form. Note enctype attribute! -->
        <form action="{% url list %}" method="post" enctype="multipart/form-data">{% csrf_token %}
            <p>{{ form.non_field_errors }}</p>
            <p>{{ form.docfile.label_tag }} {{ form.docfile.help_text }}</p>
            <p>
                {{ form.docfile.errors }}
                {{ form.docfile }}
            </p>
            <p><input type="submit" value="Upload" /></p>
        </form>
    </body>
</html> 
```

这是我的卷曲请求：

```
 curl --cacert /home/fcav/apache.pem --user admin:password
-e "https://domain.com/admin/" -X POST 
-F "docfile=@/home/fcav/Downloads/basket.csv"
https://domain.com/admin/file_manager/myclass/list/ 
```

我通过尝试在请求中发送 cookie 也尝试了 curl 请求的许多变体，但现在我认为我的想法完全混淆了 cURL 如何处理上传。

我得到的只是 CSRF Coo​​kie 未设置或 CSRF 验证失败。

如果有人知道 cURL 和 Django 足以给我关于如何在不禁用 CSRF 的情况下尝试上传到我的网站的提示，我将非常感激。

问候，弗洛里安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T20:47:06.300

通过 CSRF 验证有两种方法：

*   传递`csrftoken`包含 CSRF 令牌的 CSRF cookie，Django 将使用它来验证请求
*   将 CSRF 令牌作为`X-CSRFToken`HTTP 标头传递

当您在 中发出请求时`curl`，您正在向 Django 将使用 CSRF 验证的页面发出请求，但是您没有将 CSRF 令牌传递给它，因此 Django 无法验证请求。

我不知道如何使用 curl，所以请原谅我不知道如何在 curl 中执行此操作，但以下步骤应该可以帮助您解决问题：

**1**第一步是获取 csrf 令牌：

您可以通过首先使用视图负责`GET`的 url请求来做到这一点。`list`这将返回一个 HTML 文档，其中包含`{% csrf_token %}`返回的内容。您可以解析该段并从那里存储令牌值。

第二种方法是将`ensure_csrf_cookie` [装饰器](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#django.views.decorators.csrf.ensure_csrf_cookie)添加到`list`视图中。该装饰器将确保视图将始终`csrftoken`随请求返回一个 cookie。然后您仍然需要发出请求，但是您可以从返回的 cookie 中获取 csrf 令牌`GET`，而不是解析 的结果。`{% csrf_token %}`

此步骤将为您提供您将在下一步中使用的 csrf 令牌的值。

**2**现在您将拥有 csrf 令牌，在发出`POST`请求时，您还将传递`X-CSRFToken`带有您在上一步中获得的令牌值的附加标头。传递令牌将允许 Django 验证请求并因此处理上传的文件。

* * *

遵循这些步骤将允许您发出 csrf-valid 请求。请使用这种方法，无论请求是使用 HTTP 还是 HTTPS 发出的。HTTPS 提供数据完整性、数据保密性的保证并验证服务器的真实性。它不向服务器提供客户端验证，这就是 CSRF 适用于 HTTP 和 HTTPS 的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:30:38.257

所以...我做到了...
进行了很多测试，但我终于成功了...
看起来我需要通过 cURL 发送：
-来自服务器的证书
-带有域名的引用标头
-带有 csrftoken 的 cookie它的值
- 带有 csrf 令牌值的额外标头
- 我要上传的文件

有点像这样：

```
curl --cacert /path/to/cert/apache.pem -e "https://domain.com" --cookie "csrftoken=[value]" -H "X-CSRFToken: [value]" -X POST -F "docfile=@/path/to/myfile/file.csv" https://domain.com/admin/list/ 
```

# eclipse - 在哪里可以找到 Eclipse 的“动态 Web 项目”版本？

> ID：13200643
> 
> 赞同：0
> 
> 时间：2012-11-02T17:57:08.490
> 
> 标签：eclipse, eclipse-wtp

我通常安装 Eclipse 的 Java EE 版本，但这有很多我们不需要的令人困惑的东西，并且缺少像我们需要的 git 这样的关键元素。

曾经有一个名为 WTP 或 WPT 的 eclipse 版本或类似的用于使用 java/tomcat 等进行网站开发的版本。现在这似乎不作为 eclipse 版本存在。

我安装了eclipse的“java”版本，希望在“软件更新”下找到某种插件来提供动态Web项目，但没有。为什么 elcipse 没有开箱即用的方式来安装标准的基本 eclipse 插件？

我发现一个帖子说 WTP 在软件更新仓库下：http: [//download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)但它不在那里。

我找到了一个 Eclipse webtools 项目的一些链接：http: [//www.eclipse.org/projects/project.php?](http://www.eclipse.org/projects/project.php?id=webtools#) id=webtools# 入门链接已损坏，我找不到任何有关如何进入 WPT 的信息eclipse - 我看到我可以下载 WTP 项目源代码，但没有安装说明。

如果我不能让 WTP 进入 eclipse，另一个选择是安装 Java EE 版本，然后寻找 git 插件，这可能更容易，因为它存在于市场上（但 WTP 不存在）。

在进行了更多研究后，WTP 项目站点没有提到任何与 Juno 版本兼容的版本，只有 Galileo、Helios 和 Indigo。

同时我想我会设置tomcat。太好了，那也不可用。在逻辑“Window->preferences->Server->Runtime Environemnts->add”下没有服务器。在“下载其他服务器适配器”下有很多服务器，但没有 tomcat。有谁知道如何让tomcat进入eclipse？这从来没有这么难...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:18:09.723

放弃了，安装了Java EE 版本的eclipse，WTP 和Tomcat 在那个版本下工作。

# jquery - 加载时的 jQuery 背景推子

> ID：13200644
> 
> 赞同：0
> 
> 时间：2012-11-02T17:57:09.170
> 
> 标签：jquery

我希望当人们访问我的网站时，我希望背景为白色，当页面完全加载时，5 秒后开始淡入背景中的图片，然后每 15 秒后淡入新图片。您是否知道这样做的好方法，或者是否已经有一些预制插件等。

谢谢，

马汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:59:17.607

[`document.ready`](http://api.jquery.com/ready/)结合使用[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)？

您将[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)在[`document.ready`](http://api.jquery.com/ready/)函数中使用不同的计时器调用两个函数。这些中[`fadeIn`](http://api.jquery.com/fadeIn/)的每一个都将通过更改[`css`](http://api.jquery.com/css/)使用来生成图像：

```
$('body').css('background-image', 'YOURIMAGESRC'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:02:20.953

加载 5 秒后，在 img 标签的 id 上使用 fadeIn()。每 15 秒运行一次计数器以执行相同的操作。

```
 <img id="book" src="book.png" alt="" width="100" height="123" /> 
```

最初隐藏元素后，我们可以慢慢显示它：

```
 $(window).load(function () {
      $('#book').fadeIn(15000, function() {
        // Animation complete
      });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:12:28.343

对于颜色过渡效果，您需要使用外部插件。

**[这是要检查的jsFiddle。](http://jsfiddle.net/w75mN/20/)**

```
$(document).ready(function() {

    function repeat() {
        $('body')
            .delay(5000).animate({'background-color':'#fff'},1000)
            .delay(5000).animate({'background-color':'#000'},1000);
    }
    window.setInterval(repeat, 10000);

}); 
```

颜色过渡效果源： [纯jQuery动画的特殊颜色过渡效果//无ui或其他库](https://stackoverflow.com/questions/12349958/special-color-transition-effect-with-pure-jquery-animation-no-ui-or-other-lib)

# algorithm - 在 R 中创建一个长度为 40 的布尔值向量的排列

> ID：13200650
> 
> 赞同：1
> 
> 时间：2012-11-02T17:57:34.583
> 
> 标签：algorithm, r, permutation

我正在尝试创建向量的独特排列

```
 c(rep(0,20),rep(1,20)) 
```

但是组合包中的 permn 说“向量中的错误......指定的向量大小太大”。

[我还尝试了这个问题](https://stackoverflow.com/questions/5671149/permute-all-unique-enumerations-of-a-vector-in-r)中的脚本 uniqueperm2并再次得到“指定的向量太大”错误。

在我的理解 permn 将创建 40！排列。

我也许可以通过找到这个向量的唯一排列的数量来解决我正在研究的整体问题。

找到长度为 40 的向量的唯一排列的问题对 R 来说太大了吗？谁能向我解释如何计算列出向量的唯一排列的数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:04:36.687

该向量的每个唯一排列对应于来自 {1, 2, ..., 40} 的大小为 20 的子集（即 1 的索引）。

这些子集的数量是“40 选择 20”，即 40！/（20！x 20！）。根据谷歌计算器，这等于 137,846,528,820

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:04:00.617

正如您已经被告知的，排列的数量可以计算为：

```
R> choose(40,20)
[1] 137846528820 
```

但是，R 当前可以处理的最长向量是 2^31 - 1 个元素长，即：

```
R> 2^31 - 1
[1] 2147483647 
```

这比您要生成的排列数要小得多。因此，如果您使用标准函数尝试此操作以生成这些排列，则会出现您遇到的错误和错误`combn()`：

```
R> combn(40, 20)
Error in matrix(r, nrow = len.r, ncol = count) : 
  invalid 'ncol' value (too large or NA)
In addition: Warning message:
In combn(40, 20) : NAs introduced by coercion 
```

此时，您将不得不求助于编写代码以类似浴的方式生成排列并研究 R 上的许多大数据包之一（请参阅[高性能计算](http://cran.r-project.org/web/views/HighPerformanceComputing.html)任务视图）。

或者，这就是我的**建议**，考虑一下你可能会用 1370 亿美元做什么！（美式）排列然后采取另一种方法。如果您可以处理每秒 1 次（即对耗时 1 秒的排列做一些有意义的事情），您仍然可以在 4000 年的时间内研究结果！

那么为什么你想要所有的排列呢？较小的随机集就足够了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:04:09.313

有（40 个选择 20）独特的排列（即，在 s 的 40 个位置中选择 20 个，为`0`s 使用另外 20 个`1`。）这仍然是一个很大的数字，但是您可以尝试 combn(40, 20)

# c++ - 从现有指针 C++ 创建一个新对象

> ID：13200651
> 
> 赞同：3
> 
> 时间：2012-11-02T17:57:34.447
> 
> 标签：c++, pointers, syntax, copy-constructor, auto-ptr

我一直在寻找答案，但仍然无法弄清楚。

抱歉，但我的工作太复杂，无法在此处复制示例代码。

我有一个函数，它获取一个指针作为参数；我使用它，但后来，我需要一种回调，我想在其中使用我的旧指针对象。

问题是，当调用此回调时，指针已被删除或释放。我的想法是在堆上复制指向对象，并在回调完成时释放它。但我在指针、复制构造函数和其他东西之间迷路了。解决方案可能很简单，但我被卡住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T17:58:36.930

如果你有一个`T * p`，那么你可以像这样创建一个新对象：

```
T x(*p); 
```

或者，如果您必须（但认真地，不要！），动态分配的对象：

```
T * q = new T(*p); 
```

不要使用第二种形式。您对此感到头疼的问题永无止境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:59:42.007

假设你有一个 type`T`和一个指针`T* ptr;` 假设`ptr`当前是一个有效指针，那么`T* ptr2 = new T(*ptr);`应该调用 T 上的复制构造函数在堆上创建一个新指针。现在，这要求您的类型`T`具有正确编写的复制构造函数和析构函数等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-31T16:49:20.877

另一种方法：

```
MyObject* pointerFromOld;
...
MyObject newObject = *pointerFromOld; 
```

在指针返回它指向的对象之前的星号（将地址的内容解释为对象），同时将该对象分配给 newObject 进行复制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T14:14:05.440

我刚刚发现了这个： [C++ Idioms/Virtual Constructor](http://en.wikibooks.org/wiki/More_C++_Idioms/Virtual_Constructor)

# android - 通过 SurfaceTexture 在 GLSurfaceView 上显示相机流

> ID：13200652
> 
> 赞同：8
> 
> 时间：2012-11-02T17:57:38.220
> 
> 标签：android, opengl-es, android-camera

我正在尝试通过传输到 OpenGL ES 2.0 着色器的 SurfaceTexture 在 GLSurfaceView 中显示相机流。

我从这篇[文章](https://stackoverflow.com/questions/12519235/modifying-camera-output-using-surfacetexture-and-opengl)中获得了灵感。

图像是完整的，但在我的平板电脑上没有正确显示。屏幕似乎分为 2x2 部分。图像显示在左上角，而其他三个部分是黑色的。

我怀疑问题来自我对[此处记录的序列返回的转换矩阵的使用](http://developer.android.com/reference/android/graphics/SurfaceTexture.html#setDefaultBufferSize%28int,%20int%29)

```
updateTexImage();
getTransformMatrix(...); 
```

我在顶点着色器中传输这个矩阵来为片段着色器生成纹理坐标。

顶点着色器：

```
attribute vec3 aPosition;
uniform mat4 uMvpTransform;
// Matrix retrieved by getTransformMatrix(...);
uniform mat4 uTexMatTransform;
varying vec2 vTexCoord;

void main(void)
{
  gl_Position = uMvpTransform *vec4(aPosition.xyz, 1);
  vec4 l_tex =  uTexMatTransform*vec4(aPosition.xyz, 1);
  vTexCoord=l_tex.xy;
} 
```

片段着色器：

```
#extension GL_OES_EGL_image_external : require
varying mediump vec2 vTexCoord;
uniform samplerExternalOES uSampler; 

void main(void) 
{ 
    mediump vec4 l_tex = texture2D(uSampler, vTexCoord);
    gl_FragColor=l_tex;
} 
```

纹理附加到以下正方形：

```
 // Image container
 GLfloat l_vertices[] = {
  -1.0f, 1.0f,  0.0f,
  -1.0f, -1.0f,  0.0f,
  1.0f,  -1.0f,  0.0f,
  1.0f,  1.0f,  0.0f }; 
```

有没有人取得类似的成就？

2012 年 11 月 3 日编辑：

顶点着色器的修正：

```
attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uMvpTransform;
// Matrix retrieved by getTransformMatrix(...);
uniform mat4 uTexMatTransform;
varying vec2 vTexCoord;

void main(void)
{
  gl_Position = uMvpTransform *vec4(aPosition.xyz, 1);
  vec4 l_tex =  uTexMatTransform*vec4(aTexCoord.xy,0, 1);
  vTexCoord=l_tex.xy;
} 
```

和：

```
// Texture
GLfloat l_texCoord[] = {
   0.0f, 1.0f,
   0.0f, 0.0f,
   1.0f,  0.0f,
   1.0f,  1.0f 
```

};

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T03:46:18.773

我已成功使用 SurfaceTexture 在自定义 opengl 纹理上绘制相机帧，而无需使用 android 提供的转换矩阵。

只需尝试按照正常纹理绘制的方式定义索引顶点和纹理。比如像这样。

```
const GLfloat Vertices[] = {0.5, -0.5, 0,
                            0.5, 0.5, 0,
                           -0.5, 0.5, 0,
                           -0.5, -0.5, 0};

const GLubyte Indices[] = { 0, 1, 2,
                            2, 3, 0 };

const GLfloat Textures[] = { 1.,0.,
                             0.,0.,
                             0.,1.,
                             1.,1\. }; 
```

您应该能够像使用普通纹理一样使用表面纹理。

如果您想执行某种 3D 投影，这是一篇关于如何生成适当 MVP 矩阵的[好文章。](http://db-in.com/blog/2011/04/cameras-on-opengl-es-2-x/)您可以使用它与顶点着色器中的位置相乘。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-21T21:47:08.780

由于我有同样的问题，即使这个问题有点老了，可能值得详细说明一下*“为什么使用转换矩阵”*。

转换矩阵将 SurfaceTexture 使用的特定坐标集（*或者更有可能* **是当前视频源流** *到 SurfaceTexture...*）映射到标准 OpenGL 纹理坐标。

绝对应该使用它的原因是，尽管 Startibartfast 答案适用于一个或多个特定设置，并且可能很容易实现，*但当同一程序在不同设备上运行时，它可能会产生奇怪的可视化错误*，例如关于每个平台的视频驱动程序实现。

例如，在我的情况下，变换矩阵只是将内容颠倒过来（我在 Nexus 7 上将 SurfaceTexture 与 MediaPlayer 结合使用），而不是 Fabien R 指出的结果。

*在2012 年 11 月 3 日的 Fabien R 编辑*中指出了使用矩阵的正确方法，我报告了一些小修饰（例如使用 st 索引） ，并对 int/float 不匹配进行了小幅修正：

```
attribute   vec2 uv;
varying     vec2 vTexCoord;
uniform     mat4 transformMatrix;

vTexCoord = (transformMatrix * vec4(uv, 0.0, 1.0)).st; 
```

希望能帮助到你

# c# - asp.net ajax 服务器端错误处理

> ID：13200657
> 
> 赞同：0
> 
> 时间：2012-11-02T17:57:46.313
> 
> 标签：c#, asp.net, ajax, telerik

我在 VS2010 asp.net web 项目中使用 Telerik ajax 控件。我只针对 IE v8 浏览器。

当我遇到服务器端代码异常时，我收到一个错误对话框“回调中出现错误”。

当我单击确定时，服务器端没有任何反应，代码停止执行。

**我完全知道错误在哪里。我只是希望它冒泡到 Global.asax Application_Error。**

在这个 Web 应用程序中，任何地方都没有 try catch 异常处理。所有异常都会冒泡到 global.asax 中的 Application_Error。在这种特定情况下，我怎样才能将异常冒泡到 Global.asax？

以下帖子准确地描述了我想要实现的目标。早在 2009 年，这是不可能的。

[http://www.telerik.com/community/forums/aspnet-ajax/combobox/load-on-demand-and-exception-handling.aspx#2359140](http://www.telerik.com/community/forums/aspnet-ajax/combobox/load-on-demand-and-exception-handling.aspx#2359140)

现在有可能吗？

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:15:34.910

作为 ajax 请求的一部分，您不一定会将错误冒泡到全局 asax。您的客户端脚本发送一个请求，然后您在服务器中出现错误并将其发送回客户端，失败或一般失败消息）。服务器端（假设您的 ajax 请求已到达服务器端）。你仍然可以捕获你的错误，但仅此而已。使事情变得更加困难，因为您正在使用第三方控件，您甚至不知道是否真的引发了异常。清单

```
 url --> are you reaching the server
 sever -> does the control raise exceptions.
 error trapping -> consider implementing loggin
 request debugging -> you can use a tool like fiddler or firebug to emulate the request, debug in visual studio and track the error down. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:05:42.240

在使用 Telerik 控件时，我也遇到过类似的问题，尤其是在处理 ajax 操作时。我建议您使用 fiddler 或 firebug 来验证链接是否正确指向，然后检查是否有任何服务器端错误。

注意：我确实意识到对于 JQuery AJAX 请求，404 异常被捕获在全局错误事件中。但是正如我所提到的，在 Telerik ajax 控件中，我遇到过这类问题，但我不知道它会被抓住。

# c# - LINQ to Entities - 如何从实体返回单个字符串值

> ID：13200658
> 
> 赞同：8
> 
> 时间：2012-11-02T17:57:50.200
> 
> 标签：c#, asp.net-mvc, linq, linq-to-entities

我正在使用 asp mvc 3 应用程序。我有一个名为 History 的模型/实体。我有一个返回一个值的 linq 查询。根据我所做的，当调用该方法时，我会在控制器中收到“对象未设置为实例”错误，或者我会收到“无法从字符串隐式转换为 Models.History 类型”。所以我正在寻找解决问题的帮助，我只需要投射它还是什么？

这是给出“未设置对象”错误的方法：

```
public string GetPastAbuseData(int Id)
{

  var query = (from h in _DB.History
              where h.ApplicantId.Equals(Id)
              select h.AbuseComment).FirstOrDefault();

  return query.ToString();
 } 
```

控制器：vm.HistoryModel.AbuseComment = repo.GetPastAbuseData(Id);

如果我将方法类型从字符串更改为历史记录，则会出现“无法转换”错误：

```
public History GetPastAbuseData(int Id)
{
    return (from h in _DB.History
            where h.ApplicantId.Equals(Id)
            select h.AbuseComment).SingleOrDefault();
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T18:06:46.247

您正在从 中选择`AbuseComment`属性（即字符串）`HistoryObject`。因此，您的代码尝试将字符串转换为`History`. 只需返回整个`History`实体：

```
public History GetPastAbuseData(int Id)
{
    return (from h in _DB.History
            where h.ApplicantId.Equals(Id)
            select h).SingleOrDefault();
} 
```

同样在第一种情况下`query`将是字符串类型。你不需要调用`ToString`这个变量。更重要的是，当您陷入困境时`OrDefault()`，您将拥有`NullReferenceException`.

```
public string GetPastAbuseData(int Id)
{
  return (from h in _DB.History
          where h.ApplicantId.Equals(Id)
          select h.AbuseComment).FirstOrDefault();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T18:24:46.620

你的第一个例子很好，你只需要检查空值。

```
public string GetPastAbuseData(int Id)
{

    var query = (from h in _DB.History
          where h.ApplicantId.Equals(Id)
          select h.AbuseComment).FirstOrDefault();

    return query == null ? string.empty : query;
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T18:49:25.273

您可以使用 null 合并运算符，它将检查是否为 null，如果为 null，则返回 string.Empty。 [?? 操作员](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

```
public string GetPastAbuseData(int Id)
{
     return _DB.History.FirstOrDefault(h=>h.ApplicantId.Equals(Id)).Select(h=>h.AbuseComment) ?? string.Empty;
} 
```

# jquery - 使用 jQuery 验证自定义错误标签放置（针对所有或部分错误）

> ID：13200659
> 
> 赞同：60
> 
> 时间：2012-11-02T17:57:57.550
> 
> 标签：jquery, jquery-validate, validation

我想在自定义位置放置一个错误标签（**不是全部**）。jQuery 提供了这个[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)选项，但我找不到任何关于如何放置一个特定错误消息而不更改所有其余部分的默认位置的信息？

请务必检查以下所有答案。对此有多种解决方案。谢谢大家！

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-11-02T17:57:57.550

因此，如果您希望所有 jQuery Validate 错误消息出现在一个地方，您可以在该页面上使用 [http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions) (Find errorPlacement) 选项。

我注意到这里的一些答案回答了一个但不是两个选项。

1）话虽如此，如果您想要为所有错误自定义放置，您可以这样做：

```
$("#myform").validate({
  errorPlacement: function(error, element) {
     error.appendTo('#errordiv');
   }
}); 
```

2) 如果您想为一个或多个错误标签指定特定位置，您可以这样做。

```
errorPlacement: function(error, element) {
    if (element.attr("name") == "email" )
        error.insertAfter(".some-class");
    else if  (element.attr("name") == "phone" )
        error.insertAfter(".some-other-class");
    else
        error.insertAfter(element);
} 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-12-26T07:30:26.320

实际上它没有必要使用任何 javascript 代码，我为此找到了一个简单的解决方案。您可以强制 jQuery Validate 将验证错误放在 DOM 元素中。

例如，jQuery 会生成如下错误：

```
 <label for="firstname" generated="true" class="error">This field required.</label> 
```

您可以将此标签 DOM 元素放置在您的下一个`td`块或`li`元素中，或者任何您想要的空白处。

```
<label for="firstname" generated="true" class="error"></label> 
```

jQuery 将找到该空白字段并为您放置错误消息。

只是不要忘记标签元素中的**for字段！**

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-02T18:13:39.303

这是一个更通用的解决方案，并不特定于 OP 的 HTML 结构。

如果您只想将一个特定的错误标签放在不同的位置，而其余的则保留在默认位置，试试这个...

```
$("#myform").validate({
  errorPlacement: function(error, element) {
     if (element.attr("name") == "myFieldName") {

       // do whatever you need to place label where you want

         // an example
         error.insertBefore( $("#someOtherPlace") );

         // just another example
         $("#yetAnotherPlace").html( error );  

     } else {

         // the default error placement for the rest
         error.insertAfter(element);

     }
   }
}); 
```

[`errorPlacement:`选项的在线文档](https://jqueryvalidation.org/validate/#errorplacement)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-16T21:05:32.040

我发现，如果您在不同位置有两个以上的自定义错误标签，如果您不这样做，也可能会出现一个疯狂的位置错误，如果对于 errorPlacement，每个都没有返回，在这个示例中，我有两个复选框，错误标签，一个复选框，一个标签

HTML 代码

```
<p><label for="owner"><input  type="checkbox" name="option[]" id="owner" value="1"  validate="required:true, minlength:2" /> I am Owner of my Company</label></p>
<p><label for="agency"><input  type="checkbox" name="option[]" id="agency" value="1" /> I am an Agency</label>
<div id="errordiv"></div></p>
<hr>
<p><label for="agree"><input type="checkbox" name="agree" id="agree" value="1" required /> I Agree and I read the Privacy Polities and Use of Terms</label>
<div id="error_agree"></div> 
```

脚本

```
<script>
        $("#register_form").validate({ 
                        errorPlacement: function(error, element) {
                            if(element.attr("name") == "option[]"){
                                error.appendTo('#errordiv');
                                return;
                            }

                            if(element.attr("name") == "agree"){
                                    error.appendTo('#error_agree');
                                    return;
                            }else {
                                error.insertAfter(element);
                            }
                       }
                    });

        </script> 
```

# c++ - 具有两种不同视图的 Qt 数据模型

> ID：13200666
> 
> 赞同：0
> 
> 时间：2012-11-02T17:58:26.067
> 
> 标签：c++, qt

总而言之，我无法确定处理此问题的好方法。我有一个数据模型，我们称之为`MyData`. 我已将我的数据建模为 a `QObject`，因此它具有信号和插槽。

要修改模型中的任何数据，您可以连接到其插槽，也可以直接调用插槽。当该修改发生时，模型会发出信号表明其数据已更改。例如：

```
class MyData : public QObject
{
   ...
public slots:
     void AddPoint(QPointF);

signals:
     void AddedPoint(QPointF);
};

void MyData::AddPoint(QPointF p)
{
    //added the point
    emit AddedPoint(p);
} 
```

现在我的观点是两件不同的事情：

1.  我有一个`QGraphicsView`代表使用点的`QGraphicsEllipseItem`
2.  我有一个`QListView`使用 a`QAbstractItemModel`列出点的。

我使用信号和槽同步这两个图形视图（我将 QGraphicsItem 子类化为从 QObject 继承）。

**问题：**当一个表进行更改时，它会发出信号`MyData`，而后者又会发出信号`AddedPoint`连接到 QGraphicsView。 **但是**,`MyData::AddedPoint`也连接到表，因此在尝试同步时会添加两个相同的点。任何人都可以就如何进行提供任何建议吗？

* * *

到目前为止我的想法和想法：

*   我可以检查该点是否存在，并防止重复。非常适合插入，但不适合删除和更新。
*   **我认为最好的方法是：**在`MyData`插槽中，将 sender() 阻塞一秒钟，然后解除阻塞。

* * *

**编辑：** `MyData`实际上是一个“控制器/接口”类，真实模型使用 OpenCV 类型，因此我想让它与 Qt 架构分开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:44:39.587

你可以这样得出`QAbstractListModel`：

```
class MyData : public QAbstractListModel
{
    Q_OBJECT
public:
    enum CustomRoles {
        PositionRole = Qt::UserRole + 1,
        BoundingRectRole
    };
    MyData(QObject *parent = 0) : QAbstractListModel(parent)
    {
        QHash<int, QByteArray> roles;
        roles[PositionRole] = "Position";
        roles[BoundingRectRole] = "BoundingRect";
        setRoleNames(roles);
    }
    int rowCount(const QModelIndex & parent = QModelIndex()) const
    {
        return points.count();
    }

    QVariant data(const QModelIndex & index, int role = Qt::DisplayRole) const
    {
        if (index.row() < 0 || index.row() > points.count())
             return QVariant();

         const QGraphicsEllipseItem &p = points[index.row()];
         QVariant actualData;
         if (role == Qt::DisplayRole)
             actualData = "some point";
         else if (role == PositionRole)
             actualData = p.scenePos();
         else if (role == BoundingRectRole)
             actualData = p.boundingRect();

         return actualData;
    }

public slots:
    void addPoint(int x, int y)
    {
        beginInsertRows(QModelIndex(), rowCount(), rowCount());
        QGraphicsEllipseItem *it = new QGraphicsEllipseItem(0,0, 5, 5);
        it->setPos(x,y);
        points << it;
        endInsertRows();
    }

private:
    QVector<QGraphicsEllipseItem*> points;
}; 
```

现在您可以将此模型简单地添加到您的 QListView 并`QGraphicsScene`连接到模型的`rowsInserted(...)`和/或`rowsRemoved(...)`信号。

我也可以推荐阅读[这个](http://invalidmagic.wordpress.com/2010/10/05/qgraphicsscene-used-as-a-qabstractitemview-iii/)

# android - 通过不在android光标中工作来订购

> ID：13200671
> 
> 赞同：1
> 
> 时间：2012-11-02T17:58:51.073
> 
> 标签：android, sqlite, contacts, android-contentprovider, android-contacts

我有一些游标可以从 Android 中检索联系人，一切正常，但问题是我无法使用“Order by”子句。我尝试了很多东西，甚至使用“ `Upper`”和`localized collection` 子句但似乎不起作用，我使用哈希图来存储结果，所以我想我需要订购哈希图，但我不想要这个，因为 order by 应该解决问题并保存处理时间。这是我的代码：

```
 private Cursor getContacts() {
        // Run query
        Uri uri = ContactsContract.Contacts.CONTENT_URI;
        String[] projection = new String[] { ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME };
        String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '"
            + ("1") + "' AND "+ ContactsContract.Contacts.HAS_PHONE_NUMBER +"='" +("1")+"'";
        String sortOrder =" "+  ContactsContract.Contacts.DISPLAY_NAME +" ASC";

        CursorLoader query = new CursorLoader(context,uri, projection,
                selection, null,
            sortOrder);
        return query.loadInBackground();
      } 
```

这是按组获取联系人的其他方法：

```
contactInfo = new HashMap<String, ContactInfo>();
         Cursor c = context.getApplicationContext().getContentResolver().query(ContactsContract.Data.CONTENT_URI
                , new String[] {
                ContactsContract.Contacts.DISPLAY_NAME, ContactsContract.Contacts._ID, 
                ContactsContract.RawContacts.CONTACT_ID },
                ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID + " = ?"+ " AND "
                + ContactsContract.Contacts.HAS_PHONE_NUMBER +"='" +("1")+"'",
                new String[] { groupId },"UPPER("+ ContactsContract.Contacts.DISPLAY_NAME + ") ASC"); 
```

获得光标后，我使用 `while(c.moveToNext())`代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:16:51.897

搞定了，

```
context.getContentResolver().query(CONTENT_URI, null, buf == null ? null : buf.toString(),args,Cons.ATTRIBUTES_NAME + " ASC"); 
```

在 orederby 字符串中没有空格，

```
=" "+  ContactsContract.Contacts.DISPLAY_NAME +" ASC" 
```

从上面的行中删除属性名称之前的空格。

# java - 安卓蓝牙；是否可以？

> ID：13200672
> 
> 赞同：0
> 
> 时间：2012-11-02T17:58:53.167
> 
> 标签：java, android, sockets, bluetooth

所以我正在考虑为android编写一个蓝牙应用程序，我需要以下功能：

**是否可以使用蓝牙 android 2.3.6**

*   向运行相同应用程序的其他手机广播该应用程序已启用。
*   在手机之间共享数据（一个充当服务器，多个用户同时接收文件）。
*   一部手机同时充当服务器和客户端。
*   一部安卓手机同时发送和接收。
*   一部手机在与另一部设备聊天时可以与另一部手机进行通信。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:07:59.867

1.）如果您启动应用程序时另一部手机运行相同的应用程序，是的，可以向另一部手机显示您的应用程序也在运行，但不完全通过广播。您可以每 30 秒进行一次蓝牙发现，因此当另一部手机的下一次发现发生时，它会显示您现在“在线”。

考虑到 Android 蓝牙的挑剔程度，2、3、4、5 非常棘手。因此，我强烈建议您在开始尝试之前真正了解蓝牙在 Android 中的工作原理。我对如何实现这些没有任何具体的知识，所以我会让其他人指导你做什么。但是，我确实相信 3.) 和因此 4.) 是可能的，因为我已经看到了实现该功能的应用程序。我不记得它叫什么了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:51:39.530

它很简单：

使用蓝牙，您需要与其他设备配对，否则您无法连接。

配对后，您可以尝试连接到该手机。但是，该电话需要监听传入的 BT 连接。

通常您不能将 2 个设备相互连接两次。一旦建立了一个BT连接，它就足够了。

您可以对文件等执行的操作取决于您的应用程序已获得的权限。

连接后，您在每个设备上都有一个传入和传出字节流。您可以使用这两个编码任何类型的通信或协议，这取决于您。

# jquery-validation-engine - 10位电话号码的组合功能 - 没有空格

> ID：13200674
> 
> 赞同：1
> 
> 时间：2012-11-02T17:58:59.297
> 
> 标签：jquery-validation-engine

一直在尝试使用 10 位数的电话号码进行验证，没有空格或除数字以外的任何其他字符。我认为我有正确的 reg ex，但不确定如何实现代码，因此它也可以使用 NO 空格。

**到目前为止我所做的：在 jquery.validationEngine-en.js 中添加**

```
// ADDED for 10 digit phone
"phone10": {
  "regex": /^[\d ]+$/, 
  // alertText brings up two error messages so using alertText2
  "alertText2": " numbers only: xxxxxxxxxx", 
}, 
```

**然后我在 jquery.validationEngine.js 中添加了 phone10 case 语句：**

```
case "phone10":
  errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, 
    options, methods._phone10Size);
break; 
```

**并将下面的函数称为_phone10Size：**

```
_phone10Size: function(field, rules, i, options) {
  var max = rules[i + 1];
  var len = field.val().length;

  if (len < 10) {
    var rule = options.allrules.phone10;
    return 10 + rule.alertText2;
  }
}, 
```

哦，是的，我还必须将 maxlength="10" 放在表单输入字段中。我知道它不优雅，甚至不“适当”。有人能告诉我如何实现这 10 位数字，但不允许空格？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T18:25:44.197

想出了一个仅适用于 10 个数字的解决方案（没有空格）。对于我在球场上的课程，我已经提出：

```
class="validate[required,custom[onlyNumber],minSize[10],maxSize[10]] text-input" 
```

并将函数 OnlyNumber 添加到 jquery.validationEngine-en.js 文件的第 97 行：

```
"onlyNumber": {
    "regex": /^[0-9]+$/,
    "alertText": "* Numbers only"
 }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-13T06:34:53.537

您可以使用下面显示的“数字”示例在 jquery.validationEngine-en.js 中使用默认验证函数：

```
class="validate[required,custom[number],minSize[10],maxSize[12]] text-input" 
```

您可以使用电话功能，如下所示：

```
class="validate[required,custom[phone]] text-input" type="text" 
```

# html - 当被固定内容包围时，如何使 iframe 随浏览器窗口增大/缩小？

> ID：13200685
> 
> 赞同：3
> 
> 时间：2012-11-02T17:59:51.090
> 
> 标签：html, css, iframe

考虑以下代码：

```
<html>
<head>
<style>
html {height:100%;}
body {margin:0;}
iframe {height:100%;border:1px dotted red;}

.hdr {min-width:765px}
.logo_left {margin:4px}
.logo_right {float:right;margin:4px}
.menu {float:left;width:175px}
</style>
</head>
<body>

<div class="hdr">
    <img class="logo_left" src="img.png">
    <img class="logo_right" src="img2.png">
 </div>
<iframe class="menu" src="/menu.shtm"></iframe>
<iframe class="content" src="/home.htm"></iframe>
</body>
</html> 
```

从上面的代码中，我有一个具有最小宽度的标题，并且可以随着浏览器窗口宽度的增大或缩小而增大。在标题下方，我有一个`iframe`可以增加高度的固定宽度，但固定在左侧并紧邻标题下方。

我的问题是内容`iframe`元素。我需要的是顶部和左侧边缘固定到位，右侧和底部边缘随浏览器增大和缩小。我找不到办法做到这一点。

我在这里通读了许多具有很好答案的问题，其中许多都倾向于使用`div`标签。有没有一种方法可以让我的内容`iframe`按照我想要的方式进行布局，严格使用 CSS 和 HTML 属性。就我而言，我不能使用 JavaScript，所以这不是一个选项。

此外，我宁愿远离将宽度和高度设置`iframe`为百分比。标题和左侧菜单的存在摆脱了定位。如果绕过这个限制，我愿意接受建议。

从代码中可以看出，我将两个`iframe`元素的高度都设置为 100%。这意味着这些`iframe`元素的大小总是超出浏览器的下限，等于我的标题的高度。这是一个烦恼，但我可以忍受它。我真正需要的是将内容的边缘固定`iframe`到标题、菜单和浏览器窗口的相应边缘。这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:40:33.050

您可以将 div 包裹在 iframe 周围，并将这些 div 绝对定位到您需要的底部、顶部和侧面。

像这样：http:
[//jsfiddle.net/wKHVz/](http://jsfiddle.net/wKHVz/)

```
<html>
    <head>
        <style>
            html {height:100%;}
            body {margin:0; min-height: 100%; position: relative;}
            .menuIframe, .contentIframe {width: 100%; height: 100%; border: none; }
            .menuIframe {background: #ff9999; }
            .contentIframe {background: #99ff99; }

            .logo_left {float: left; margin:4px}
            .logo_right {float:right; margin:4px}
            .menu {position: absolute; top: 50px; left: 0px; bottom: 0px; width:175px}
            .content {position: absolute; top: 50px; left: 175px; bottom: 0px; right: 0px;}
        </style>
    </head>

    <body>
        <div class="hdr">
            <img class="logo_left" src="img.png">
            <img class="logo_right" src="img2.png">
         </div>
        <div class="menu"><iframe class="menuIframe" src="/menu.shtm"></iframe></div>
        <div class="content"><iframe class="contentIframe" src="/home.htm"></iframe></div>
    </body>
</html>​​​​​​​​​​ 
```

在此示例中，我为您的标题留出了 50 像素的空间，但您可以将其更改为您需要的任何大小的标题。只需更改两个 iframe 的最高值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:09:51.030

将 iframe 弹出到 position:relative 的包装器中；

# php - 分页记录

> ID：13200690
> 
> 赞同：0
> 
> 时间：2012-11-02T18:00:23.747
> 
> 标签：php, javascript, jquery, sql, ajax

我正在通过 PHP/SQL 生成记录。该代码显示 5 条记录。我正在尝试编程，以便在按下下一个按钮时，将显示接下来的 5 条记录。

编码：

```
function show(qstring,qtype)
{
 $("#vsdiv").show();
 var myurl="scripts/searchpage.php"; 
 $.ajax({url: myurl, 
         dataType:'json',  
         data:{querystring:qstring,querytype:qtype},
         success: function(member)
         {
            $("#results").append('<tr class="me">'+'<th>#REC</th> <th>name</th><th>surname</th>');
            var j=0;
            var totrecs=1;
            for(var i=0;i<5;i++)
            {
                $("#results").append('<tr class="rows'+j+'">'+'
                                      <td class="ids" id="z'+i+'">'+totrecs+'</td>'+'
                                      <td>'+name[i].bdate+'</td>'+'
                                      <td class="users" id="username'+i+'">'+member[i].username+'</td>'+'
                                      <td id="contact'+i+'">'+member[i].fname+' '+member[i].lname+'</td>'+'
                                      <td><input type="checkbox" name="whome" id="showMe'+i+'"'+'
                                      class="boxes" onclick="getMe('+i+')" /></td></tr>');  
                totrecs++;
                j++;
            }
         }
       });
} 
```

对于 HTML 按钮：

```
<input type="button" id="next5" title="Next 5 Records" disabled="disabled" value="Next 5>>" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:02:08.147

你想要的是`LIMIT`关键字。您可以像这样指定要开始和结束的记录：

```
blah sql statment blah LIMIT 1,5; 
```

您的下一个查询是：

```
blah slq statement blah LIMIT 6,10; 
```

如果您希望能够仅通过一个查询显示所有内容，请查看 JQuery 库：

[http://datatables.net/](http://datatables.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:13:45.720

您可以将 ajax 调用的返回值存储在 javascript 变量中。然后还将接下来的五个记录的起始位置存储在数组中。

```
var returnedData = null;
var startingPos = 0;

function addFiveResults(){
  //Your code to append to results
  //from startingPos to startingPos + 5
  startingPos += 5;
}

$.ajax(...
success: function(member) {
    returnedData = member;
    startingPos = 0;
    addFiveResults();
}); 
```

还要进行 onclick 调用 addFiveResults();

这将减少 ajax 请求的数量并且更加通用。您可以轻松地将硬编码的 5 设置为另一个可以更改的变量

# c# - 当前上下文中不存在 dgv

> ID：13200691
> 
> 赞同：0
> 
> 时间：2012-11-02T18:00:32.970
> 
> 标签：c#, mysql, winforms

```
public partial class Form7 : Form
{
    private MySqlDataAdapter da;
    private MySqlConnection conn;
    BindingSource bsource = new BindingSource();
    DataSet ds = null;
    string sql; 

    public Form7()
    {
        InitializeComponent();
    }

    private void LoadData()
    {
        string connectionString = "Data Source=localhost;database=d1; uid=root; password=123;port=3307;";
        conn = new MySqlConnection(connectionString);
        sql = "SELECT Name, Address, id, Status FROM t1";

        da = new MySqlDataAdapter(sql, conn);
        conn.Open();
        ds = new DataSet();
        MySqlCommandBuilder commandBuilder = new MySqlCommandBuilder(da);
        da.Fill(ds, "Orders");
        bsource.DataSource = ds.Tables["Orders"];
        dgv.DataSource = bsource;
    }
} 
```

它给了我一个错误调用：

```
dgv does not exist in the current context 
```

我能做些什么来修复它？我应该使用任何软件包或其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:08:52.090

从您的代码中，您似乎缺少该`dgv`对象，例如：`private DataGridView dgv = new DataGridView();`

请参阅 msdn 的[示例](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource.aspx)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T15:16:38.877

检查您的标记文件（它可能是文件类型 *.ascx 或 *.aspx）并确保您实际调用了 DataGrid 对象“dgv”。我之前遇到过确切的错误，这是由于对象名称拼写错误造成的。只需将标记文件中的名称复制并粘贴到您的代码文件中，以确保您的拼写正确！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-08-26T11:41:03.557

这可能是标记文件的问题。如果您在 wpf 窗口中使用带有 datagridview 的 windows 窗体主机，则可能是由于命名空间解析。使用 x:Name 而不是 Name 在 xaml 中为其命名。

# windows-phone-8 - Windows Phone 8 上 Speech Rec SDK 的资源在哪里？

> ID：13200694
> 
> 赞同：0
> 
> 时间：2012-11-02T18:01:20.357
> 
> 标签：windows-phone-8, speech-recognition

我刚刚参加了 Build 2012 会议上的 Windows 8 Phone 语音识别会议。Phone 8 与 7 有新的/不同的功能。演示者展示了许多特定的代码示例，但在会议结束后，我现在无法找到命名空间，是否需要下载 Windows Phone 8 SDK 之外的 SDK 等。

我的问题 - 任何人都有特定于 Phone 8 中可用 API 的文档、示例和文档的链接？

到明天这个时候，PowerPoint 演示文稿应该会在线发布，而且他有一些我没有足够快地写下来的链接。但与此同时，如果有人有这些链接，我想现在开始！

还有另一个与此类似的问题，但它是在会议之前发布的并且得出了错误的结论（链接指向旧的 SDK 等）。

由于今天是星期五，我敢打赌至少要在星期一才能使用此幻灯片。我会尝试给演示者发送电子邮件。

更新 1 - 就二进制文件/程序集而言，看起来只需安装 Windows 8 SDK 就足够了。我现在可以在 windows phone 项目中使用 Windows.Phone.Speech.Recognition 命名空间。我认为这个命名空间是为新东西准备的，尽管我并不肯定。

更新 2 - 这是我发现的与新 SDK 文档最接近的内容：[MSDN 文章于 10/23 发布](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.speech.recognition%28v=vs.105%29.aspx)。下面的人也发现了这个：[另一篇 MSDN 文章](http://code.msdn.microsoft.com/wpapps/Speech-recognition-and-debe5858) 这是另一个页面：[MSDN 3rd 相关页面](http://msdn.microsoft.com/library/windowsphone/develop/jj206958%28v=vs.105%29.aspx)

更新 3 - 找到并成功运行了这个使用 Windows 8 特定功能的示例应用程序：[MSDN 语音记录和文本到语音示例](http://code.msdn.microsoft.com/wpapps/Speech-recognition-and-debe5858)

最终更新 - 我现在拥有我想要的一切。希望这对其他人有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:11:49.410

API 文档可在 MSDN 上找到：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207021(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207021(v=vs.105).aspx)

那是你要找的吗？

# google-maps - 在移动网站上使用 Google Maps API 显示从 GPS 位置到给定位置的路线

> ID：13200695
> 
> 赞同：0
> 
> 时间：2012-11-02T18:01:24.440
> 
> 标签：google-maps, mobile, gps

我正在创建一个移动网上商店，用户可以在其中看到一些实体店的位置（地址等）。我想要的是，由于它是一个移动网站，当用户点击属于特定商店的图像时，将使用谷歌地图显示从他的位置到商店的路线。

我已经有了它的 API 密钥。我已阅读 API 的文档并尝试了解其中的一些内容（https://developers.google.com/maps/documentation/javascript/directions），但这仅使用特定的起始位置和特定目的地。我找不到如何使用 GPS 输入用户的当前位置，然后创建从该位置到特定目的地的路线。

有人可以使用 GPS 位置作为起点创建到目的地的简单路线吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:22:15.573

您可以在支持它的浏览器上使用`navigator.geolocation` [http://dev.w3.org/geo/api/spec-source.html](http://dev.w3.org/geo/api/spec-source.html)。

`google.loader.ClientLocation`在其他人上，您可以从[https://developers.google.com/loader/](https://developers.google.com/loader/)退回

# wpf - 在最后一个单元格上切换时 WPF DataGrid 失去焦点

> ID：13200696
> 
> 赞同：0
> 
> 时间：2012-11-02T18:01:27.737
> 
> 标签：wpf, datagrid

我的窗口中有一些按钮和一个数据网格。

```
<Button>Save</Button>
<Button>Back</Button>
<DataGrid x:Name="data" ItemsSource="{Binding Scores}" /> 
```

当我编辑 NewItemPlaceholder-row 时，会在更改第一个值时创建新项目（但没有新的 NewItemPlaceholder-row）。当我编辑最后一个值并使用 Tab 键继续时，会生成一个新行。但是光标移动到保存按钮而不是该新行中的第一个单元格。

我怎样才能将注意力集中在网格上？

为了完整性：我使用 ObservableCollection 作为 ItemsSource。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:28:29.467

使用[KeyboardNavigation.TabNavigation](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboardnavigation.tabnavigation%28v=vs.100%29.aspx)附加属性：

```
<DataGrid x:Name="data" 
          ItemsSource="{Binding Scores}" 
          KeyboardNavigation.TabNavigation="Cycle" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T23:23:43.373

我在这里找到了一个解决方案：[Customize focus behavior after a row commit through the DataGrid.RowEditEnding event](http://blogs.msdn.com/b/vinsibal/archive/2009/04/14/5-more-random-gotchas-with-the-wpf-datagrid.aspx)

```
private void data_RowEditEnding_1(object sender, DataGridRowEditEndingEventArgs e) {
    if (e.EditAction == DataGridEditAction.Commit) {
        if (e.Row.Item == data.Items[data.Items.Count - 2]) {
            var rowToSelect = data.Items[data.Items.Count - 1];
            int rowIndex = data.Items.IndexOf(rowToSelect);
            this.Dispatcher.BeginInvoke(new DispatcherOperationCallback((param) => {
                var cell = DataGridHelper.GetCell(data, rowIndex, 0);
                cell.Focus();
                data.BeginEdit();
                return null;
            }), DispatcherPriority.Background, new object[] { null });
        }
    }
} 
```

从这里使用 GetCell 和 GetRow 方法：[datagrid get cell index](https://stackoverflow.com/questions/6888892/datagrid-get-cell-index)

```
static class DataGridHelper {
    static public DataGridCell GetCell(DataGrid dg, int row, int column) {
        DataGridRow rowContainer = GetRow(dg, row);

        if (rowContainer != null) {
            DataGridCellsPresenter presenter = GetVisualChild<DataGridCellsPresenter>(rowContainer);

            // try to get the cell but it may possibly be virtualized
            DataGridCell cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(column);
            if (cell == null) {
                // now try to bring into view and retreive the cell
                dg.ScrollIntoView(rowContainer, dg.Columns[column]);
                cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(column);
            }
            return cell;
        }
        return null;
    }

    static public DataGridRow GetRow(DataGrid dg, int index) {
        DataGridRow row = (DataGridRow)dg.ItemContainerGenerator.ContainerFromIndex(index);
        if (row == null) {
            // may be virtualized, bring into view and try again
            dg.ScrollIntoView(dg.Items[index]);
            row = (DataGridRow)dg.ItemContainerGenerator.ContainerFromIndex(index);
        }
        return row;
    }

    static T GetVisualChild<T>(Visual parent) where T : Visual {
        T child = default(T);
        int numVisuals = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < numVisuals; i++) {
            Visual v = (Visual)VisualTreeHelper.GetChild(parent, i);
            child = v as T;
            if (child == null) {
                child = GetVisualChild<T>(v);
            }
            if (child != null) {
                break;
            }
        }
        return child;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T21:44:18.230

[这是另一种](https://stackoverflow.com/a/19847216/439024)打包方式，您可以在默认样式中启用它并在`DataGrid`整个应用程序中应用它。

# mod-rewrite - 与添加域有关的 mod_rewrite 问题

> ID：13200698
> 
> 赞同：1
> 
> 时间：2012-11-02T18:01:36.477
> 
> 标签：mod-rewrite

我在我的网站上实施了一些 mod_rewrite 规则，它们都运行良好。但是，我的虚拟主机帐户通过将文件放在我的主站点目录的子文件夹中来支持一个帐户上的多个域。

我的 mod_rewrite 规则似乎干扰了这些附加域。有谁知道我如何将规则限制在我的主域中。然后我是否可以在子文件夹中添加新的 .htaccess 文件，以便为每个添加域具有单独的重写规则。

这是我的 .htaccess 文件：

```
ErrorDocument 400 /?error=400
ErrorDocument 401 /?error=401
ErrorDocument 403 /?error=403
ErrorDocument 404 /?error=404
ErrorDocument 500 /?error=500

RewriteEngine on

RewriteRule \.(css|jpe?g|gif|png)$ - [L]

RewriteCond %{REQUEST_URI} ^/[^\.]+[^/]$
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1/ [R=301,L]

RewriteRule ^([^/\.]+)/?$ index.php?content=$1 [L,QSA]
RewriteRule ^news/page/([0-9]+)/$ index.php?content=news&page=$1 [L,QSA]
RewriteRule ^news/([0-9]+)/([^/\.]+)/?$ index.php?content=news&id=$1&ptitle=$2 [L,QSA]
RewriteRule ^photos/page/([0-9]+)/$ index.php?content=photos&page=$1 [L,QSA]
RewriteRule ^photos/gallery/([0-9]+)/$ index.php?content=photos&gallery=$1 [L,QSA]
RewriteRule ^photos/gallery/([0-9]+)/page/([0-9]+)/$ index.php?content=photos&gallery=$1&page=$2 [L,QSA]
RewriteRule ^music/release/([0-9]+)/([^/\.]+)/?$ index.php?content=music&release=$1&ptitle=$2 [L,QSA]
RewriteRule ^edit_news/([0-9]+)/$ index.php?content=post_news&id=$1 [L,QSA]
RewriteRule ^download/(.*)?$ media/downloads/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:04:03.660

我在使用 Bluehost 时遇到了同样的问题，这就是为什么我现在使用虚拟私有主机，例如[prgmr.com](http://prgmr.com)

没有办法解决它 - 所以 Bluehost 的帮助台告诉我。:(

# django - 无法让 django-debug-toolbar 工作

> ID：13200700
> 
> 赞同：1
> 
> 时间：2012-11-02T18:01:51.623
> 
> 标签：django, django-debug-toolbar

我一直在`debug-toolbar`这里结合各种线程的建议，但不知何故无法让它发挥作用。请提供一些帮助。

1.  我没有在本地开发。托管代码的服务器是 WebFaction 服务器，我正在本地机器上的浏览器中对其进行测试。`debug-toolbar`安装在服务器上，我可以在服务器的`PYTHONPATH`.

2.  使用的 IP 地址是 ( `request.HTTP_X_FORWARDED_FOR`, `request.REMOTE_ADDR`)的元组

3.  当我在本地机器上的新 Django 测试项目中使用这些相同的调试工具栏设置时，它可以工作。

4.  一篇文章提到使用 show_toolbar 并返回 True 会使所有 IP 地址检查无效。我也尝试过（如下）无济于事。

5.  （编辑）这适用于外壳。我可以跑`python manage debugsqlshell`

`settings.py`：

```
DEBUG = True

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'debug_toolbar.middleware.DebugToolbarMiddleware',
)

INSTALLED_APPS = (
    ....
    'debug_toolbar',   # last in list
)

# Debug toolbar settings
INTERNAL_IPS = ('x.x.x.x', 'y.y.y.y') 
# This is IP address from request.HTTP_X_FORWARDED_FOR and request.REMOTE_ADDR that I see when I put an assert 0 in the code.
# When I got desperate, I also tried adding'127.0.0.1', '10.0.2.2' to no avail

DEBUG_TOOLBAR_PANELS = (
    'debug_toolbar.panels.version.VersionDebugPanel',
    'debug_toolbar.panels.timer.TimerDebugPanel',
    'debug_toolbar.panels.settings_vars.SettingsVarsDebugPanel',
    'debug_toolbar.panels.headers.HeaderDebugPanel',
    'debug_toolbar.panels.request_vars.RequestVarsDebugPanel',
    'debug_toolbar.panels.template.TemplateDebugPanel',
    'debug_toolbar.panels.sql.SQLDebugPanel',
    'debug_toolbar.panels.signals.SignalDebugPanel',
    'debug_toolbar.panels.logger.LoggingPanel',
)

# One post mentioned that using show_toolbar and returning True voided all the IP address checks. Trying it
def show_toolbar(request):
    return True

DEBUG_TOOLBAR_CONFIG = {
    'INTERCEPT_REDIRECTS': False,
    'SHOW_TOOLBAR_CALLBACK': show_toolbar,
    'HIDE_DJANGO_SQL': False,
    'TAG': 'div',
} 
```

`page.html`: ...

```
<body id="try">
    <meta http-equiv="content-type" content="text/html"; charset="UTF-8">
    ...stuff...
</body> 
```

现在，我在这里没有看到什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T12:37:41.463

你的：不应该 `<meta http-equiv="content-type" content="text/html"; charset="UTF-8">` 是这个吗？ `<meta http-equiv="Content-Type" content="text/html; charset=utf8" />`

# windows - 需要在 CMD 中使用 FOR 循环解析 %PATH%

> ID：13200701
> 
> 赞同：0
> 
> 时间：2012-11-02T18:01:56.160
> 
> 标签：windows, batch-file, cmd

我需要创建一个 FOR 循环来对 %PATH% 变量中的每个路径进行一些操作。但是 FOR 将 %PATH% 视为一行，并且只对整个变量进行一次迭代。如何解析 %PATH% 中每个目录的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:17:33.113

```
for %G in ("%path:;=" "%") do @echo %G 
```

从：

[http://ss64.com/nt/path.html](http://ss64.com/nt/path.html)

# c++ - 如何让 CMenu 弹出菜单消失？

> ID：13200702
> 
> 赞同：2
> 
> 时间：2012-11-02T18:01:59.540
> 
> 标签：c++, visual-studio-2010, windows-7, mfc

我在系统托盘中有我的应用程序的弹出菜单。我遇到的问题是我无法在不选择项目的情况下让菜单消失。

**当我单击窗口中的其他位置时，如何使弹出菜单消失？**

这是使弹出菜单出现的代码：

```
LRESULT WindowProc(UINT message, WPARAM wParam, LPARAM lParam)
{
    if( message == WM_MYMESSAGE && lParam == WM_RBUTTONDOWN)
    {
        m_menu.CreatePopupMenu();        
        POINT point;

        GetCursorPos(&point);
        m_menu.AppendMenu(MF_POPUP, WM_MAXIMIZE, _T("Maximize"));
        m_menu.AppendMenu(MF_POPUP, WM_EXIT, _T("Exit"));
        m_menu.TrackPopupMenu(TPM_LEFTALIGN|TPM_RIGHTBUTTON, point.x, point.y, this);

    }
    return CDialog::WindowProc(message, wParam, lParam);
} 
```

我试过使用`CMenu::DestroyMenu`没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:02:58.543

对我有用的解决方案是`SetForegroundWindow();`在调用`TrackPopupMenu`.

我在功能描述的[备注](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648002%28v=vs.85%29.aspx)中找到了解决方案。`TrackPopupMenu`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:06:26.563

添加 TPM_RETURNCMD 标志。使用此标志，如果选择了菜单项或用户在外部单击，则 TrackPopupMenu 函数将返回。

```
CMenu menu;
CMenu *pSub = NULL;

// popup a menu to get the number of pages to display
VERIFY(menu.LoadMenu(IDR_MY_MENU));
pSub = menu.GetSubMenu(0);

int command = pSub->TrackPopupMenu(
        TPM_LEFTALIGN | TPM_LEFTBUTTON | TPM_RETURNCMD, 
        point.x, 
        point.y, 
        this); 
```

这对我有用。

# java - 将 csv 文件上传到服务器，然后从中读取

> ID：13200704
> 
> 赞同：1
> 
> 时间：2012-11-02T18:02:15.970
> 
> 标签：java, web-applications, csv, oracle10g

我正在尝试用 Java 开发一个 Web 应用程序，其中我需要使用 csv 文件填充数据库。我已经使用 csv reader 来实现这一点。只要 csv 文件位于应用程序所在的服务器中，该应用程序就可以像魅力一样工作。从另一个站点访问应用程序时，我收到一条错误消息，提示找不到该文件。如何直接从客户端机器读取或如何将文件导入服务器然后从中读取？任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:16:13.817

上传 csv 文件与上传普通文件相同。您可以为此使用 html 文件输入字段。您将不得不编写一个单独的服务器端实现来接收文件并将其存储在服务器中的某个位置。
现在您有了要处理的文件。阅读并更新数据库。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:16:24.903

您可以使用 ftp 或 sftp(secure ftp) 从客户端机器获取文件。以下链接可能有用 [http://wiki.jsch.org/index.php?Manual%2FExamples%2FSftpFileCopyExample](http://wiki.jsch.org/index.php?Manual/Examples/SftpFileCopyExample)

# java - 通过蓝牙在 android 2.3 中共享文件

> ID：13200708
> 
> 赞同：1
> 
> 时间：2012-11-02T18:02:24.753
> 
> 标签：java, android, bluetooth, connection, file-sharing

我正在开发成员可以相互共享数据的应用程序。我已经用 wi-fi 做到了，但蓝牙有问题。我怀疑是否可以通过蓝牙一次在不同成员之间共享数据。例如，一个成员拥有一些数据，而其他成员想要通过蓝牙访问该数据。就像通过蓝牙进行的双向通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:53:37.577

蓝牙连接中只能有 7 或 8 个从站。但是在通过蓝牙进行的 P2P 通信中，您可能会遇到问题，例如，当您将文件发送给其他成员时，其他成员将处于等待状态，您必须像警报一样告诉他们他们需要等待多少时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:16:16.643

它很简单：

使用蓝牙，您需要与其他设备配对，否则您无法连接。

配对后，您可以尝试连接到该手机。但是，该电话需要监听传入的 BT 连接。

通常您不能将 2 个设备相互连接两次。一旦建立了一个BT连接，它就足够了。

您可以对文件等执行的操作取决于您的应用程序已获得的权限。

连接后，您在每个设备上都有一个传入和传出字节流。您可以使用这两个编码任何类型的通信或协议，这取决于您。

# python - 使用 Python（或 R）提取 Google Scholar 结果

> ID：13200709
> 
> 赞同：15
> 
> 时间：2012-11-02T18:02:29.597
> 
> 标签：python, r, google-scholar

我想使用 python 来抓取 google 学者搜索结果。我找到了两个不同的脚本来做到这一点，一个是[gscholar.py](https://github.com/venthur/gscholar)，另一个是`scholar.py`（那个可以用作 python 库吗？）。

现在，我也许应该说我对 python 完全陌生，如果我错过了显而易见的事情，我很抱歉！

问题是当我`gscholar.py`按照自述文件中的说明使用时，我得到了结果

`query() takes at least 2 arguments (1 given)`.

即使我指定另一个参数（例如`gscholar.query("my query", allresults=True)`，我得到

`query() takes at least 2 arguments (2 given)`.

这让我很困惑。我还尝试指定第三个可能的参数（`outformat=4`; 这是 BibTex 格式），但这给了我一个函数错误列表。一位同事建议我在运行查询之前导入 BeautifulSoup 和[this](http://code.activestate.com/recipes/523047-search-google-scholar/)，但这也不会改变问题。任何建议如何解决这个问题？

我找到了 R 的代码（参见[链接](http://www.github.com/gimoya/theBioBucket-Archives/blob/master/R/Functions/GScholarScraper_3.1.R)）作为解决方案，但很快就被谷歌阻止了。也许有人可以建议如何改进该代码以避免被阻止？任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-07T15:22:13.550

我建议你不要使用特定的库来爬取特定的网站，而是使用经过良好测试并具有良好文档格式的通用 HTML 库，例如 BeautifulSoup。

要使用浏览器信息访问网站，您可以使用带有自定义用户代理的 url 打开器类：

```
from urllib import FancyURLopener
class MyOpener(FancyURLopener):
    version = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/33.0.1750.152 Safari/537.36'
openurl = MyOpener().open 
```

然后下载所需的url如下：

```
openurl(url).read() 
```

要检索学者结果，只需使用`http://scholar.google.se/scholar?hl=en&q=${query}`url。

要从检索到的 HTML 文件中提取信息，您可以使用以下代码：

```
from bs4 import SoupStrainer, BeautifulSoup
page = BeautifulSoup(openurl(url).read(), parse_only=SoupStrainer('div', id='gs_ab_md')) 
```

这段代码提取了一个具体`div`元素，其中包含 Google Scholar 搜索结果页面中显示的结果数量。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-02T18:10:18.077

谷歌会阻止你......因为很明显你不是浏览器。也就是说，与合理的人类活动相比，它们将检测到相同的请求签名发生得太频繁。

你可以做：

*   [如何在 Python 中通过 Tor 发出 urllib2 请求？](https://stackoverflow.com/questions/1096379/tor-with-python)
*   在您的大学计算机上运行代码（可能没有帮助）
*   使用[Google 学者 API](http://www.academicproductivity.com/2009/google-scholar-api/)可能会花费您的钱，并且无法为您提供作为人性化的普通用户所看到的全部功能。

* * *

**2020年编辑**：

你可能想在[学术上检查](https://pypi.org/project/scholarly/)

```
>>> search_query = scholarly.search_author('Marty Banks, Berkeley')
>>> print(next(search_query))
{'_filled': False,
 'affiliation': 'Professor of Vision Science, UC Berkeley',
 'citedby': 17758,
 'email': '@berkeley.edu',
 'id': 'Smr99uEAAAAJ',
 'interests': ['vision science', 'psychology', 'human factors', 'neuroscience'],
 'name': 'Martin Banks',
 'url_picture': 'https://scholar.google.com/citations?view_op=medium_photo&user=Smr99uEAAAAJ'} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-27T04:14:19.920

看起来使用 Python 和 R 进行抓取会遇到问题，即由于请求中缺少用户代理，Google Scholar 将您的请求视为机器人查询。StackExchange 中有一个类似的问题，关于[下载从网页链接的所有 pdf](https://stackoverflow.com/questions/12272488/downloading-all-pdf-files-from-google-scholar-search-results-using-wget/12281361#12281361?newreg=071b9dc52ddf4ce58353308d8f56eec0)，答案引导用户使用 Unix 中的 wget 和 Python 中的 BeautifulSoup 包。

[卷曲](http://curl.haxx.se/docs/programs.html)似乎也是一个更有希望的方向。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T18:26:48.530

COPython 看起来是正确的，但这里有一些示例解释......

考虑 f：

```
def f(a,b,c=1):
    pass 
```

f 无论如何都需要 a 和 b 的值。您可以将 c 留空。

```
f(1,2)     #executes fine
f(a=1,b=2) #executes fine
f(1,c=1)   #TypeError: f() takes at least 2 arguments (2 given) 
```

您被 Google 阻止的事实可能是由于您的标头中的用户代理设置...我不熟悉 R，但我可以为您提供解决此问题的一般算法：

1.  使用普通浏览器（firefox 或其他）访问 url，同时监控 HTTP 流量（我喜欢 wireshark）
2.  记下在适当的 http 请求中发送的所有标头
3.  尝试运行您的脚本并注意标题
4.  指出不同
5.  设置您的 R 脚本以使用您在检查浏览器流量时看到的标头

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T18:10:41.867

这是查询（）的调用签名...

```
def query(searchstr, outformat, allresults=False) 
```

因此，您至少需要指定一个 searchstr 和一个 outformat，并且 allresults 是一个可选的标志/参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-26T10:15:38.617

您可能希望使用[Greasemonkey](http://www.greasespot.net/)来完成此任务。优点是如果您另外降低请求频率，谷歌将无法将您检测为机器人。您还可以在浏览器窗口中观看脚本。

您可以学习自己编写代码或使用[这些](http://wiki.greasespot.net/User_Script_Hosting)来源之一的脚本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-23T10:28:46.733

一个理想的场景是当您拥有良好的代理时，住宅是理想的选择，这将允许您选择特定的位置（国家、城市或移动运营商）和 CAPTCHA 解决服务。

* * *

作为替代解决方案，您可以使用来自 SerpApi 的[Google Scholar API 。](https://serpapi.com/google-scholar-api)

它是一个付费 API，带有免费计划，可以通过代理和 CAPTCHA 解决方案绕过 Google 的阻止，可以扩展到企业级，而且最终用户无需从头开始创建解析器并随着时间的推移维护它。 HTML 已更改。

此外，它还支持[cite](https://serpapi.com/google-scholar-cite-api)、[profile](https://serpapi.com/google-scholar-profiles-api)、[author](https://serpapi.com/google-scholar-author-api)结果。

集成以解析有机结果的示例代码：

```
import json

from serpapi import GoogleScholarSearch

params = {
    "api_key": "Your SerpAPi API KEY",
    "engine": "google_scholar",
    "q": "biology",
    "hl": "en"
}

search = GoogleScholarSearch(params)
results = search.get_dict()

for result in results["organic_results"]:
    print(json.dumps(result, indent=2))

# first organic results output:
'''
{
  "position": 0,
  "title": "The biology of mycorrhiza.",
  "result_id": "6zRLFbcxtREJ",
  "link": "https://www.cabdirect.org/cabdirect/abstract/19690600367",
  "snippet": "In the second, revised and extended, edition of this work [cf. FA 20 No. 4264], two new chapters have been added (on carbohydrate physiology physiology Subject Category \u2026",
  "publication_info": {
    "summary": "JL Harley - The biology of mycorrhiza., 1969 - cabdirect.org"
  },
  "inline_links": {
    "serpapi_cite_link": "https://serpapi.com/search.json?engine=google_scholar_cite&q=6zRLFbcxtREJ",
    "cited_by": {
      "total": 704,
      "link": "https://scholar.google.com/scholar?cites=1275980731835430123&as_sdt=5,50&sciodt=0,50&hl=en",
      "cites_id": "1275980731835430123",
      "serpapi_scholar_link": "https://serpapi.com/search.json?as_sdt=5%2C50&cites=1275980731835430123&engine=google_scholar&hl=en"
    },
    "related_pages_link": "https://scholar.google.com/scholar?q=related:6zRLFbcxtREJ:scholar.google.com/&scioq=biology&hl=en&as_sdt=0,50",
    "versions": {
      "total": 4,
      "link": "https://scholar.google.com/scholar?cluster=1275980731835430123&hl=en&as_sdt=0,50",
      "cluster_id": "1275980731835430123",
      "serpapi_scholar_link": "https://serpapi.com/search.json?as_sdt=0%2C50&cluster=1275980731835430123&engine=google_scholar&hl=en"
    },
    "cached_page_link": "https://scholar.googleusercontent.com/scholar?q=cache:6zRLFbcxtREJ:scholar.google.com/+biology&hl=en&as_sdt=0,50"
  }
}
... other results
''' 
```

在我的SerpApi 博客文章中，还有一个[使用 Python 的专用 Scrape 历史 Google Scholar 结果。](https://serpapi.com/blog/scrape-historic-google-scholar-results-using-python/)

> 免责声明，我为 SerpApi 工作。

# emacs - 是否可以从某种文件转储或类似文件中获取 emacs 中的邮件？

> ID：13200713
> 
> 赞同：1
> 
> 时间：2012-11-02T18:02:39.120
> 
> 标签：emacs, ssh, outlook

这可能非常重要，但前几天我想知道是否有可能在收到电子邮件时让诸如 Outlook 之类的 Windows 应用程序触发 putty，这样它就可以`scp`将消息传递到现有 emacs 实例的 linux 主机上能够检测并“接收”电子邮件。

# google-maps - 为什么 Google Places JS API 不使用 API 密钥？

> ID：13200716
> 
> 赞同：1
> 
> 时间：2012-11-02T18:02:41.090
> 
> 标签：google-maps, google-maps-api-3, google-places-api

我正在研究 Google Places 实现，当我读到有关加载[JS 库](https://developers.google.com/maps/documentation/javascript/places#loading_the_library)和使用他们的[实验场所 API](https://developers.google.com/places/documentation/search)的信息时，我有点惊讶。JS API 不需要 API 密钥（仅用于加载 MAP，这是强制性的）。另一方面，新 API 使用 API 密钥。

Places JS API 是否有任何日常限制？是每个IP吗？有参考吗？如果我猜对了，我最好坚持使用客户端 JS 以部分避免 Google 配额。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T23:45:16.830

Google Maps JavaScript API 的 Places 库仅受每个 IP 地址的请求速率限制。

Google Places Web Service API 最初限制为每天 1,000 次查询，在项目启用计费后每天 100,000 次查询。目前使用 Web 服务是免费的，即使启用了计费，如果您超出配额，您只会收到响应`"status": "OVER_QUERY_LIMIT"`。

[按照文档请求更多配额](https://developers.google.com/places/uplift)页面上的说明，您每天可以请求超过 100,000 个查询。

# sql-server - 将记录更改为 Sql 中的列

> ID：13200717
> 
> 赞同：-3
> 
> 时间：2012-11-02T18:02:44.010
> 
> 标签：sql-server

我有如下表

```
CustomFieldValueId  CustomFieldId   ProjectId   CustomFieldName CustomFieldValue
35                  69              1           User Name       kaliya
36                  72              1           City            Bangalore
37                  74              1           Email           mm@gmail.com
38                  69              1           User Name       mvkperumal
39                  72              1           City            Chennai
40                  74              1           Email           mvkperumal@gmail.com
41                  69              1           User Name       Yohesh
42                  72              1           City            Delhi
43                  74              1           Email 
```

我需要如下输出

```
User Name   City       Email
kaliya      Bangalore  mm@gmail.com
mvkperumal  Chennai    mverumal@gmail.com
Yohesh      Delhi 
```

我正在根据 CustomFieldValueId 取值并对 ProjectId 进行分组，所以请对此提供帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:25:36.260

您可以使用 a 来执行此操作，`PIVOT`但您需要有某种方式将每个`User Name`与`Email`等相关联。如果您能弄清楚，那么您可以使用以下内容：

```
select [User Name], [City], [email]
from
(
  select customfieldname, customfieldvalue,
    row_number() over(partition by ProjectId, CustomFieldId 
                      order by CustomFieldValueId) rn
  from yourtable
) src
pivot
( 
  max(customfieldvalue)
  for customfieldname in ([User Name], [City], [email])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/0543f/7)

由于您没有提供关联每个值的方法，因此我将 a`row_number()`应用于每条记录。

# android - 在 SettingsFragment 中更新自定义 DialogPreference 的标题

> ID：13200718
> 
> 赞同：1
> 
> 时间：2012-11-02T18:02:49.370
> 
> 标签：android

我有一个`PreferenceActivity`显示几个基于`DialogPreference`. 它们从 中`PreferenceActivity`显示`TextView`，单击时会显示一个对话框以允许用户设置值。我希望中显示的视图`PreferenceActivity`包括设置的标题（即“音量”），加上它的值（“大声”）。`setTitle()`用和`getTitle()`从做这件事并不难`Preference`。这对于最初查看 的效果很好`PreferenceActivity`，但是一旦我做出更改并`PreferenceActivity`从我的自定义对话框返回，标题就不会更新。我已经尝试在值更改时更新它，并且当对话框被关闭时，但它不会更新，直到再次单击设置（在它再次显示该对话框之前的瞬间）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:09:47.230

您必须从 PreferenceActivity 手动更新您的自定义视图。例如，对于 ListDialog，您可以执行以下操作：

```
 ListPreference myList = (ListPreference) findPreference("listPref");
 myList.setSummary(your_string); 
```

对于编辑文本：

```
EditTextPreference myEditTextPref = (EditTextPreference)findPreference("myEditText"); 
```

使用 findPreference() 方法并使用其方法 setSummary()、setTile() 等更新您的视图。

# sql-server - UNION select sql 语句返回重复结果

> ID：13200720
> 
> 赞同：0
> 
> 时间：2012-11-02T18:03:08.090
> 
> 标签：sql-server, tsql, union

我的目标是同时拥有 HomeNumber 和 OfficeNumber 的一条记录，并且我保留 PersonID 以引用客户表。我在想我什至不应该使用 UNION 而可能是来自两个嵌套子查询的选择查询。

返回的结果如下所示。

```
1A370535-9432-45B9-8F08-004F040EE196    ''          ''
1A370535-9432-45B9-8F08-004F040EE196    6127319561  ''
E8FA1667-416C-4639-ADDC-02143D651B4E    ''          6512096719
E8FA1667-416C-4639-ADDC-02143D651B4E    6515786963  '' 
```

这是我的查询：

```
 SELECT PhoneNumbers.PersonID, PhoneNumbers.HomeNum, PhoneNumbers.OfficeNum
    FROM (
      SELECT PhoneHub.PersonID, ISNULL(PhoneHub.PhoneNbr, '') AS HomeNum, '' AS OfficeNum
      FROM 
        --PhoneType INNER JOIN 
        PhoneHub --ON PhoneType.ID = PhoneHub.TypeID 
      WHERE 
        (PhoneHub.FranID = @FranID) AND
        (PhoneHub.TypeID = '28321161-668e-4a56-90be-67a146fa1353') -- Home# ID
      UNION
      SELECT PhoneHub.PersonID, '' AS HomeNum, ISNULL(PhoneHub.PhoneNbr, '') AS OffNum
      FROM 
        --PhoneType AS PhoneType_2 INNER JOIN 
        PhoneHub --AS PhoneHub ON PhoneType_2.ID = PhoneHub.TypeID
      WHERE 
        (PhoneHub.FranID = @FranID) AND
        (PhoneHub.TypeID = '02a4125b-b968-4dc6-9734-7f75f45f7635') --Office# ID
     ) AS PhoneNumbers  
     ORDER BY PhoneNumbers.PersonID 
```

表架构 - PhoneHub

```
PK  ID          uniqueidentifier    
FK  FranID      uniqueidentifier      Franchise.ID
FK  PersonID    uniqueidentifier      Customer.ID   
FK  TypeID      uniqueidentifier      PhoneType.ID
PhoneNbr    nvarchar(20)    
PhoneExt    nvarchar(10)    
IsDefault   bit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:12:37.657

这看起来像是一个枢纽要求。

```
 SELECT PersonID,
          Max(case when TypeID = '28321161-668e-4a56-90be-67a146fa1353'
                   then PhoneNbr End) HomeNum,
          Max(case when TypeID = '02a4125b-b968-4dc6-9734-7f75f45f7635'
                   then PhoneNbr End) OfficeNum
    FROM
      PhoneHub
    WHERE 
      PhoneHub.FranID = @FranID
    GROUP BY PersonID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:23:20.083

```
Select  a.PersonID,Coalesce(home.PhoneNbr, '') AS HomeNum,Coalesce(office.PhoneNbr, '') AS OffNum from
(
      SELECT PhoneHub.PersonID
      FROM 
        PhoneHub
      WHERE 
        (PhoneHub.FranID = @FranID) AND
        (PhoneHub.TypeID = '28321161-668e-4a56-90be-67a146fa1353')
      UNION
      SELECT PhoneHub.PersonID
      FROM 
        PhoneHub
      WHERE 
        (PhoneHub.FranID = @FranID) AND
        (PhoneHub.TypeID = '02a4125b-b968-4dc6-9734-7f75f45f7635')
) as a
left join    PhoneHub home on   (home.PersonID = a.PersonID)  and  (home.FranID = @FranID) AND (home.TypeID = '28321161-668e-4a56-90be-67a146fa1353')
left join    PhoneHub office on (office.PersonID = a.PersonID)  and (office.FranID = @FranID) AND (office.TypeID = '02a4125b-b968-4dc6-9734-7f75f45f7635')
order by a.PersonID 
```

# c# - 收到推送通知时隐藏 Toast 通知

> ID：13200723
> 
> 赞同：1
> 
> 时间：2012-11-02T18:03:48.830
> 
> 标签：c#, azure, windows-8, push-notification

我正在使用 Windows 天蓝色推送通知。每次收到新通知时，都会显示带有收到信息的 Toast，无论如何我可以通过编程方式禁用此功能吗？我想要这个的原因是因为我正在尝试开发 FPS 游戏并且我正在使用推送通知来更新位置，显然我不希望显示收到的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:41:16.650

您可以通过将 ToastNotification 的过期时间设置为 DateTime.Now 来隐藏 toast 通知，这样它就会在显示后立即过期。您可以通过使用传递的 PushNotificationReceivedEventArgs 参数来做到这一点。

```
 args.ToastNotification.ExpirationTime = DateTime.Now; 
```

Gaurav 提供的更好的解决方案是使用

```
args.Cancel=true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T18:14:08.760

您可以做的是使用 PushNotificationReceived 事件，然后在那里处理它。我对我构建的一个示例聊天应用程序做了同样的事情。在我的博客文章中查找 app.xaml.cs 的代码：http: [//gauravmantri.com/2012/08/30/how-i-built-an-awesome-chat-application-for-windows-8-与-windows-azure-mobile-service/](http://gauravmantri.com/2012/08/30/how-i-built-an-awesome-chat-application-for-windows-8-with-windows-azure-mobile-service/)。

# content-management-system - 使用 Twitter Bootstrap 和 Orchard CMS 的图像轮播

> ID：13200725
> 
> 赞同：1
> 
> 时间：2012-11-02T18:03:56.600
> 
> 标签：content-management-system, orchardcms

我正在使用 Orchard CMS 和 Bootstrap 主题。我一直在尝试使用引导程序中内置的轮播来工作，如以下博客文章所示：http: [//www.stevetaylor.me.uk/image-carousel-using-twitter-bootstrap-and-orchard-cms-projections](http://www.stevetaylor.me.uk/image-carousel-using-twitter-bootstrap-and-orchard-cms-projections) . 我已按照教程进行操作，但我无法让我的新布局文件出现在网格和 html 列表下的查询中。我相信我已经逐字复制了代码，但仍然可以让它工作。任何人都请帮忙，因为认为这将是一个很棒的功能。如果我让它工作，我会要求它被添加到这里的引导主题：http: [//orchardbootstrap.codeplex.com/](http://orchardbootstrap.codeplex.com/)

请参见下面的代码：

**CarouselLayoutForm.cs**

```
using System;
using Orchard.DisplayManagement;
using Orchard.Forms.Services;
using Orchard.Localization;

namespace Orchard.Projections.Providers.Layouts {

public class CarouselLayoutForms : IFormProvider {
    protected dynamic Shape { get; set; }
    public Localizer T { get; set; }

    public CarouselLayoutForms(
        IShapeFactory shapeFactory) {
        Shape = shapeFactory;
        T = NullLocalizer.Instance;
    }

    public void Describe(DescribeContext context) {
        Func<IShapeFactory, object> form =
            shape => {

                var f = Shape.Form(
                    Id: "CarouselLayout",                        
                    _HtmlProperties: Shape.Fieldset(
                        Title: T("Html properties"), 
                        _ListId: Shape.TextBox(
                            Id: "outer-grid-id", Name: "OuterDivId",
                            Title: T("Outer div id"),
                            Description: T("The id to provide on the div element."),
                            Classes: new[] { "textMedium", "tokenized" }
                            ),
                        _ListClass: Shape.TextBox(
                            Id: "outer-div-class", Name: "OuterDivClass",
                            Title: T("Outer div class"),
                            Description: T("The class to provide on the div element."),
                            Classes: new[] { "textMedium", "tokenized" }
                            ),
                        _InnerClass: Shape.TextBox(
                            Id: "inner-div-class", Name: "InnerDivClass",
                            Title: T("Inner div class"),
                            Description: T("The class to provide on the inner div element."),
                            Classes: new[] { "textMedium", "tokenized" }
                            ),
                         _FirstItemClass: Shape.TextBox(
                            Id: "first-item-class", Name: "FirstItemClass",
                            Title: T("First item class"),
                            Description: T("The class to provide on the first item element."),
                            Classes: new[] { "textMedium", "tokenized" }
                            ),
                        _ItemClass: Shape.TextBox(
                            Id: "item-class", Name: "ItemClass",
                            Title: T("Item class"),
                            Description: T("The class to provide on the item element."),
                            Classes: new[] { "textMedium", "tokenized" }
                            )
                        )
                    );

                return f;
            };

        context.Form("CarouselLayout", form);

    }
}
   /*
public class CarouselLayoutFormsValitator : FormHandler {
    public Localizer T { get; set; }

    public override void Validating(ValidatingContext context) {
        if (context.FormName == "CarouselLayout") {
            if (context.ValueProvider.GetValue("Alignment") == null) {
                context.ModelState.AddModelError("Alignment", T("The field Alignment is required.").Text);
            }

            if (context.ValueProvider.GetValue("Columns") == null) {
                context.ModelState.AddModelError("Columns", T("The field Columns/Lines is required.").Text);
            }
            else {
                int value;
                if (!Int32.TryParse(context.ValueProvider.GetValue("Columns").AttemptedValue, out value)) {
                    context.ModelState.AddModelError("Columns", T("The field Columns/Lines must be a valid number.").Text);
                }
            }
        }
    }
}
*/

} 
```

**轮播布局.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using Orchard.ContentManagement;
using Orchard.DisplayManagement;
using Orchard.Localization;
using Orchard.Projections.Descriptors.Layout;
using Orchard.Projections.Models;
using Orchard.Projections.Services;

namespace Orchard.Projections.Providers.Layouts {
public class CarouselLayout : ILayoutProvider {
    private readonly IContentManager _contentManager;
    protected dynamic Shape { get; set; }

    public CarouselLayout(IShapeFactory shapeFactory, IContentManager contentManager) {
        _contentManager = contentManager;
        Shape = shapeFactory;
        T = NullLocalizer.Instance;
    }

    public Localizer T { get; set; }

    public void Describe(DescribeLayoutContext describe) {
        describe.For("Html", T("Html"),T("Html Layouts"))
            .Element("Carousel", T("Carousel"), T("Organizes content items in a carousel."),
                DisplayLayout,
                RenderLayout,
                "CarouselLayout"
            );
    }

    public dynamic RenderLayout(LayoutContext context, IEnumerable<LayoutComponentResult> layoutComponentResults) {

        string outerDivClass = context.state.outerDivClass;
        string OuterDivId = context.state.OuterDivID;
        string innerDivClass = context.state.InnerDicClass;
        string firstItemClass = context.state.FirstItemClass;
        string itemClass = context.state.ItemClass;

        IEnumerable<dynamic> shapes =
           context.LayoutRecord.Display == (int)LayoutRecord.Displays.Content
               ? layoutComponentResults.Select(x => _contentManager.BuildDisplay(x.ContentItem, context.LayoutRecord.DisplayType))
               : layoutComponentResults.Select(x => x.Properties);

        return Shape.Carousel(Id: outerDivId, Items: shapes, OuterClasses: new[] { outerDivClass }, 
                InnerClasses: new[] {innerDivClass}, FirstItemClasses: new[] {firstItemClass}, ItemClasses: new[] {itemClass});
    }
}
} 
```

**布局形状.cs**

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Web.Mvc;
using System.Web.Mvc.Html;
using Orchard.ContentManagement;
using Orchard.DisplayManagement;
using Orchard.Localization;
using Orchard.Mvc.Html;
using Orchard.Utility.Extensions;

namespace Orchard.Projections.Providers.Layouts {
public class LayoutShapes : IDependency {
    public LayoutShapes() {
        T = NullLocalizer.Instance;
    }

    public Localizer T { get; set; }

    [Shape]
    public void Carousel(dynamic Display, TextWriter Output, HtmlHelper Html, string Id, IEnumerable<dynamic> Items, 
                        IEnumerable<string> OuterClasses, IDictionary<string, string> OuterAttributes,
                        IEnumerable<string> InnerClasses, IDictionary<string, string> InnerAttributes, 
                        IEnumerable<string> FirstItemClasses, IDictionary<string, string> FirstItemAttributes, IEnumerable<string> ItemClasses,  IDictionary<string, string> ItemAttributes ) 
    {            
        if (Items == null) return;

        var items = Items.ToList();
        var itemsCount = items.Count;

        if (itemsCount < 1) return;

        var outerDivTag = GetTagBuilder("div", Id, OuterClasses, OuterAttributes);
        var innerDivTag = GetTagBuilder("div", string.Empty, InnerClasses, InnerAttributes);
        var firstItemTag = GetTagBuilder("div", string.Empty, FirstItemClasses, FirstItemAttributes);
        var itemTag = GetTagBuilder("div", string.Empty, ItemClasses, ItemAttributes);

        Output.Write(outerDivTag.ToString(TagRenderMode.StartTag));
        Output.Write(innerDivTag.ToString(TagRenderMode.StartTag));

        int i = 0;

        foreach (var item in items)
        {
            if (i== 0)
               Output.Write(firstItemTag.ToString(TagRenderMode.StartTag)); 
            else
               Output.Write(itemTag.ToString(TagRenderMode.StartTag)); 

            Output.Write(Display(item));
            Output.Write(itemTag.ToString(TagRenderMode.EndTag));
            i++;
        }

        Output.Write(innerDivTag.ToString(TagRenderMode.EndTag));

        Output.Write("<a href=\"#{0}\" class=\"carousel-control left\" data-slide=\"prev\">&lsaquo;</a>",id);
        Output.Write("<a href=\"#{0}\" class=\"carousel-control right\" data-slide=\"next\">&lsaquo;</a>",id);

        Output.Write(outerDivTag.ToString(TagRenderMode.EndTag));

        Output.Write("<script>$(function () {$('"+ Id +"').carousel();}); </script>");

    }

    static TagBuilder GetTagBuilder(string tagName, string id, IEnumerable<string> classes, IDictionary<string, string> attributes) {
        var tagBuilder = new TagBuilder(tagName);
        tagBuilder.MergeAttributes(attributes, false);
        foreach (var cssClass in classes ?? Enumerable.Empty<string>())
            tagBuilder.AddCssClass(cssClass);
        if (!string.IsNullOrWhiteSpace(id))
            tagBuilder.GenerateId(id);
        return tagBuilder;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:55:50.390

您是否按照说明将代码添加到模块 Orchard.Projections 中？您需要在 Visual Studio 中添加文件并保存项目以将它们包含在 .csproj 中（除非动态编译不会考虑这些文件），或者您可以构建模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T13:03:20.243

您在 CarouselLayou.cs 文件中缺少 DisplayLayout() 的定义：

```
 public LocalizedString DisplayLayout(LayoutContext context)
    {
        string columns = context.State.Columns;
        bool horizontal = Convert.ToString(context.State.Alignment) != "vertical";

        return horizontal
                   ? T("{0} columns grid", columns)
                   : T("{0} lines grid", columns);
    } 
```

此外，LayourShapes.cs 中的变量“id”应该是“Id”，并且声明中还有其他不正确的大小写：

```
string outerDivClass = context.state.outerDivClass;
string OuterDivId = context.state.OuterDivID;
string innerDivClass = context.state.InnerDicClass;
string firstItemClass = context.state.FirstItemClass;
string itemClass = context.state.ItemClass; 
```

应该：

```
string outerDivClass = context.State.OuterDivClass;
string outerDivId = context.State.OuterDivID;
string innerDivClass = context.State.InnerDicClass;
string firstItemClass = context.State.FirstItemClass;
string itemClass = context.State.ItemClass; 
```

# ember.js - 从 Ember 中的视图将上下文传递给控制器

> ID：13200726
> 
> 赞同：0
> 
> 时间：2012-11-02T18:04:05.017
> 
> 标签：ember.js

由 someParentController 控制的模板

```
{{#each post in content}}
{{view App.PostView postBinding="post"}}
{{/each}} 
```

在视图上设置控制器的实例

```
App.PostView = Ember.View.extend
  post: null # set when the view is created
  controller: App.PostController.create()
  templateName: 'post.handlebars' 
```

现在我的视图实例有上下文而不是我的控制器实例。有没有更聪明的方法来处理这个问题？如果我要路由到特定帖子，我会使用 {{outlet}}，但主模板显示所有帖子。我希望每个帖子都有自己的控制器。为每个帖子创建一个出口似乎并不正确，因为您无法命名动态数量的出口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:47:11.890

您可以通过在 post.handlebars 中的操作助手上使用以下语法完全绕过视图。

```
{{action someMethodOnController context="post" target="controller"}} 
```

# php - 从 XML 外部去除前置和附加的文本

> ID：13200730
> 
> 赞同：0
> 
> 时间：2012-11-02T18:04:12.667
> 
> 标签：php, xml

我们有一个我们向第三方制作的 PHP XML RPC，他们在返回 XML 正文之外的其他文本时遇到了问题，例如

```
133
<Envelope>
<Body>
<RESULT>
<SUCCESS>true</SUCCESS>
<SESSIONID>99B153C1DFA889C34213B</SESSIONID>
<ORGANIZATION_ID>f528764d624db129b32c21fbca0cb8d6</ORGANIZATION_ID>
<SESSION_ENCODING>;jsessionid=99B153C1DFA889C34213B</SESSION_ENCODING>
</RESULT>
</Body>
</Envelope>

0 
```

附加文本各不相同，并不总是数字。他们的工作人员正在解决这个问题，但在此期间，如果使用 PHP 我可以干净地消除他们响应中的`<Envelope></Envelope>`.

有人给我小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:18:57.210

例如：

```
<?php

$xml = '133
<Envelope>
<Body>
<RESULT>
<SUCCESS>true</SUCCESS>
<SESSIONID>99B153C1DFA889C34213B</SESSIONID>
<ORGANIZATION_ID>f528764d624db129b32c21fbca0cb8d6</ORGANIZATION_ID>
<SESSION_ENCODING>;jsessionid=99B153C1DFA889C34213B</SESSION_ENCODING>
</RESULT>
</Body>
</Envelope>

0';

$open_tag = '<Envelope>';
$close_tag = '</Envelope>';

$start_index = strpos($xml,$open_tag);
$length = strpos($xml, $close_tag) - $start_index + strlen($close_tag);
$clean_xml = substr($xml, $start_index, $length);

echo $clean_xml;

echo "\r\n"; 
```

其他解决方案，内联但不太优雅：

```
$clean_xml = $open_tag . reset(explode($close_tag,end(explode($open_tag,$xml)))) . $close_tag;

echo $clean_xml;

echo "\r\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:33:16.993

```
$xml = preg_replace('~^.*(<Envelope>.+?</Envelope>).*$~si', '$1', $xml); 
```

**试试这个。**懒惰的版本:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:13:36.390

有多种方法。您可以使用`preg_match`和正则表达式来获取数据，或简单的字符串匹配。由于您有明确定义的起点和终点，我可能会选择字符串匹配。简单地说，将整个响应读入一个字符串。用于`strpos`查找 和 的`<Envelope>`位置`</Envelope>`。仅用于`substr`提取两个位置之间的字符串（请注意，您需要在结束标记的位置添加 11 以在提取的字符串中包含结束标记。

# pyparsing - pyparsing 用于查询化学元素数据库

> ID：13200731
> 
> 赞同：1
> 
> 时间：2012-11-02T18:04:17.080
> 
> 标签：pyparsing

我想解析一个化学元素数据库的查询。

数据库存储在一个 xml 文件中。解析该文件会生成一个嵌套字典，该字典存储在从 collections.OrderedDict 继承的单例对象中。

要求一个元素会给我一个有序的字典，它对应的属性（即 ELEMENTS['C'] --> {'name':'carbon','neutron' : 0,'proton':6, ...} ）。

相反，要求一个属性会给我一个有序字典，其中包含所有元素的值（即 ELEMENTS['proton'] --> {'H' : 1, 'He' : 2} ...）。

一个典型的查询可能是：

```
mass > 10 or (nucleon < 20 and atomic_radius < 5) 
```

其中每个“子查询”（即质量 > 10）将返回与其匹配的元素集。

然后，查询将在内部转换并转换为一个字符串，该字符串将被进一步评估以生成一组与其匹配的元素的索引。在这种情况下，运算符和/或不是布尔运算符，而是作用于 python 集的集成运算符。

我最近发了一个帖子来构建这样的查询。感谢我得到的有用答案，我认为我或多或少地完成了这项工作（我希望以一种好的方式！）但我仍然有一些与 pyparsing 相关的问题。

这是我的代码：

```
import numpy

from pyparsing import *

# This import a singleton object storing the datase dictionary as
# described earlier
from ElementsDatabase import ELEMENTS

and_operator = oneOf(['and','&'], caseless=True) 
or_operator  = oneOf(['or' ,'|'], caseless=True) 

# ELEMENTS.properties is a property getter that returns the list of 
# registered properties in the database
props = oneOf(ELEMENTS.properties, caseless=True)

# A property keyword can be quoted or not.
props = Suppress('"') + props + Suppress('"') | props
# When parsed, it must be replaced by the following expression that 
# will be eval later.
props.setParseAction(lambda t : "numpy.array(ELEMENTS['%s'].values())" % t[0].lower())

quote = QuotedString('"')
integer = Regex(r'[+-]?\d+').setParseAction(lambda t:int(t[0]))
float_  = Regex(r'[+-]?(\d+(\.\d*)?)?([eE][+-]?\d+)?').setParseAction(lambda t:float(t[0]))

comparison_operator = oneOf(['==','!=','>','>=','<', '<='])
comparison_expr = props + comparison_operator + (quote | float_ | integer)
comparison_expr.setParseAction(lambda t : "set(numpy.where(%s)%s%s)" % tuple(t))

grammar = Combine(operatorPrecedence(comparison_expr, [(and_operator, 2, opAssoc.LEFT) (or_operator, 2, opAssoc.LEFT)]))

# A test query
res = grammar.parseString('"mass     "  >  30 or (nucleon == 1)',parseAll=True)

print eval(' '.join(res._asStringList())) 
```

我的问题如下：

```
1 using 'transformString' instead of 'parseString' never triggers any 
  exception even when the string to be parsed does not match the grammar. 
  However, it is exactly the functionnality I need. Is there is a way to do so ?

2 I would like to reintroduce white spaces between my tokens in order 
that my eval does not fail. The only way I found to do so it the one 
implemented above. Would you see a better way using pyparsing ? 
```

很抱歉这篇长文，但我想更深入地介绍它的背景。顺便说一句，如果您发现这种方法不好，请随时告诉我！

非常感谢您的帮助。

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:12:13.147

不用担心我的担心，我找到了解决办法。我使用了 pyparsing 附带的 SimpleBool.py 示例（感谢 Paul 的提示）。

基本上，我使用了以下方法：

```
1 for each subquery (i.e. mass > 10), using the setParseAction method, 
I joined a function that returns the set of eleements that matched 
the subquery

2 then, I joined the following functions for each logical operator (and, 
or and not):

def not_operator(token):

    _, s = token[0]

    # ELEMENTS is the singleton described in my original post
    return set(ELEMENTS.keys()).difference(s)

def and_operator(token):

    s1, _, s2 = token[0]

    return (s1 and s2)

def or_operator(token):

    s1, _, s2 = token[0]

    return (s1 or s2)

# Thanks for Paul for the hint.
grammar = operatorPrecedence(comparison_expr,
          [(not_token, 1,opAssoc.RIGHT,not_operator),
          (and_token, 2, opAssoc.LEFT,and_operator),
          (or_token, 2, opAssoc.LEFT,or_operator)])

Please not that these operators acts upon python sets rather than 
on booleans. 
```

这就是工作。

我希望这种方法对你们中的任何人都有帮助。

埃里克

# cocos2d-iphone - 给定 CCNode 局部坐标的父坐标

> ID：13200736
> 
> 赞同：0
> 
> 时间：2012-11-02T18:04:40.527
> 
> 标签：cocos2d-iphone, cocos2d-x

是否有任何 cocos2d 函数在给定节点局部坐标的情况下返回父坐标？这一定是一个很常见的用例，但我没有找到任何原生 cocos2d 函数。有没有？

我想是这样的。注意，我没有测试过这个。;)

```
-(CGPoint) nodeToParent: (CGPoint) localPoint
{
  CGFloat phi = -self.rotation * B2_pi / 180;
  return ccpAdd(self.position, ccpRotateByAngle(localPoint, ccp(0, 0), phi));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:51:07.200

正如m.ding所说... parent->ConvertToNodeSpace() .....

这是给你的解释，所以你知道什么时候该做什么？

convertToWorldSpace(const CCPoint& nodePoint) 将节点上的坐标转换为 SCREEN 坐标。让我们将带有锚点和位置 (0,0) 的 layerA 附加到屏幕上，并在该图层上的点 (100, 100) 处有一个精灵。精灵的屏幕坐标是什么？- (100, 100)

让我们将 layerA 移动到点 (- 50, - 20)。精灵的屏幕坐标是什么？- (100 - 50, 100 - 20)，即 (50, 80) - 如果我们调用 layerA->convertToWorldSpace(ccp(100, 100))，这就是 convertToWorldSpace 返回给我们的内容。

至于 convertToWorldSpaceAR - 将位置相关地返回到锚点：所以如果我们的场景 - 根层有 AP (0.5f, 0.5f) - 默认值，convertToWorldSpaceAR 应该返回相对于屏幕中心的位置。我用过 convertToNodeSpace

convertToNodeSpace(const CCPoint& worldPoint) - 将 SCREEN 坐标转换为 NODE 的本地坐标。即，如果对于我们的移动层调用示例： layerA->convertToNodeSpace(ccp(50, 80)) - 应该返回 (100, 100) - 我们的 sprite 节点坐标。

convertToNodeSpaceAR - 与 convertToWorldSpaceAR 相同的逻辑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:09:50.547

假设你的父节点是

```
CCSprite* parent; 
```

您可以使用：

```
parent->convertToNodeSpace(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:08:21.620

我猜是

```
-(CGPoint) convertToWorldSpace:(CGPoint)pt 
```

可以做到这一点，看看[这里](http://www.cocos2d-iphone.org/api-ref/0.99.5/interface_c_c_node.html#a3f43b7356576a39f137ff24960ced8f2)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T12:03:46.407

看起来你在正确的轨道上。 `[node position]`应该给出节点在父坐标空间中的位置，所以如果你有一个偏移的局部点，`[node position]`那么你需要像你所做的那样添加偏移量。我不确定这`ccpRotateByAngle`是正确的方法，但你只需要测试它并找出答案！

# vba - 复选框 VS 按钮

> ID：13200742
> 
> 赞同：0
> 
> 时间：2012-11-02T18:05:10.087
> 
> 标签：vba, excel

请找到以下工作簿 [https://dl.dropbox.com/u/69651453/fff.xlsm](https://dl.dropbox.com/u/69651453/fff.xlsm) ，有没有办法我们可以使用复选框？从某种意义上说，可以取消检查并删除该按钮的复制行并再次关闭间隙？

还有一种方法可以禁用复选框，具体取决于工作表中的值。在我们的例子中，如果在工作表中检测到任何无效数据，复选框将显示为灰色......或以某种方式被阻止。

任何 Active X 解决方案也将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:08:35.117

如果您使用复选框并将它们绑定到该特定单元格，则将单元格的单击事件视为按钮单击事件，它应该以相同的方式运行。

# objective-c - NSString unicode 下标

> ID：13200748
> 
> 赞同：1
> 
> 时间：2012-11-02T18:05:40.983
> 
> 标签：objective-c, ios, cocoa-touch

如何编写带有下标数字的 NSString？我正在尝试创建一个带有“10”作为下标的 X10 字符串。
我尝试使用 unicode 数字 @"\u0081" 和 @"\u0080"，但 xcode 给出错误“无效的通用字符”。上标数字（例如@"\u00B3"）工作正常，但我不能让下标工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:13:01.703

您正在寻找 U+2081 和 U+2080。（U+0081 和 U+0080 不是有效的代码点。）

# c# - 2种以上颜色的混色

> ID：13200751
> 
> 赞同：5
> 
> 时间：2012-11-02T18:05:51.497
> 
> 标签：c#, .net, colors

我正在尝试找到一种基于百分比量混合颜色的算法。我正在做一个选举项目，希望能够为比赛中的每个候选人分配不同的颜色，然后根据候选人获得的选票创建一个“结果”颜色。

这个问题：

[是否有一种颜色混合算法可以像混合真实颜色一样工作？](https://stackoverflow.com/q/1351442/1518211)

接近我要问的问题 - 但可能我需要能够将 3 或 4 或 5 种颜色混合在一起。我知道这最终是一个非常复杂的问题 - 但我很好奇建议的方法是在超过 2 种颜色上执行此操作。所以，我可能有：

红色 (40%)、绿色 (10%)、蓝色 (50%)

或者

红色 (40%)、黄色 (5%)、蓝色 (10%)、橙色 (45%)

再一次，我知道最后一个例子可能会产生某种灰色或棕色或黑色 - 这很好。我的问题是我什至没有试图解决这个问题的算法。

* * *

编辑：所以 - 发布此消息后，我意识到我真正想要完成的基本上是 PAINT 颜色混合。换句话说，我不想要 LIGHT 颜色混合，我想模拟 PAINT 混合会发生什么 - 因为这是我一直“期待”的“可预测”结果 - 并且难以获得。

我找到了这个链接： http: [//painting.about.com/library/blpaint/blcolormixingpalette1.htm](http://painting.about.com/library/blpaint/blcolormixingpalette1.htm)

这与我想要完成的工作非常接近 - 并暴露了我最初想法中的一个小“缺陷”。所展示的是，即使我可以使用该算法混合多达 6 种颜色，实际的“数据”总是被分解为 3 种原色。

即便如此 - 这非常接近。

感谢所有为这个线程做出贡献的人——所有这些建议都对探索这个令人惊讶的复杂问题/领域非常有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T18:22:58.813

你试过简单地取一个加权和吗？

```
d.R = a.R*0.25 + b.R*0.25 + c.R*0.5
d.G = a.G*0.25 + b.G*0.25 + c.G*0.5
...
where a, b, c are the colors you're mixing 
```

根据我的研究，似乎没有任何一个正确的答案，但似乎能产生最合适的效果。此外，我认为简单地混合颜色并不能真正表明信息图上的任何内容。你最好尝试像真正的颗粒抖动[http://en.wikipedia.org/wiki/Dither#Digital_photography_and_image_processing](http://en.wikipedia.org/wiki/Dither#Digital_photography_and_image_processing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T23:50:08.957

RGB 颜色系统不适合这种计算，因为它不像我们人类感知颜色那样工作。例如，我们只是不认为黄色是绿色和红色的混合物。第一步是在颜色空间中转换颜色，其中有一个亮度坐标和两个颜色坐标。这可以是 HLS 或 CIELAB。HLS 转换更简单，但 CIELAB 中的坐标更能代表人类色彩体验。这个色彩空间中的相等距离​​至少是人类感知中大致相等的距离。

在这个颜色空间中，您有坐标 L、A 和 B。对于所有颜色，L 应该相同。你的基色应该在灰点周围的一个圆圈上，所以它们有相同的距离，没有颜色比其他颜色强。所以你基本上在平面上有几个点，需要计算这些点的加权中点。您将此点转换回 RGB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T18:28:21.297

这完全取决于您的[颜色模型](http://en.wikipedia.org/wiki/Color_model)中的原色。看起来您正在使用[RGB 颜色模型](http://en.wikipedia.org/wiki/RGB_color_model)，这意味着所有颜色都可以用红色、绿色和蓝色的混合来表示。

也就是说，任何*不是*红色、绿色或蓝色的颜色，您都可以将它们分解为红色、绿色和蓝色对应物，然后将这些权重乘以总体权重。

在您的第二个示例中：

> 红色 (40%)、黄色 (5%)、蓝色 (10%)、橙色 (45%)

黄色和橙色需要分解。假设你有`Color`橙色的实例，你可以这样做：

```
orangeRed = o.R * .05;
orangeBlue = o.B * .05;
orangeGreen = o.G * .05; 
```

这实际上可以在*所有* `Color`实例中推广（对于原色，只有和中的一个将具有值） `R`，然后可以采用总和和加权平均值来获得混合颜色。`G``B`

一个简单的扩展方法是：

```
static Color Mix(this IEnumerable<Tuple<Color, double>> colors)
{
    // The red, green, and blue values.
    double red = 0.0, green = 0.0, blue = 0.0;

    // The denominator for the weighted average for a color.
    double denominator = byte.MaxValue * 3.0;

    // Cycle through the colors.
    foreach (Tuple<Color, double> color in colors)
    {
        // Get the weighted average value for each component, and then
        // multiply that by the weight for the color.
        red   += ((color.Item1.R / denominator) * color.Item2);
        green += ((color.Item1.G / denominator) * color.Item2);
        blue  += ((color.Item1.B / denominator) * color.Item2);
    }

    // Create the color and return.
    return Color.FromArgb((int) red, (int) green, (int) blue);
} 
```

# css - 如何水平对齐裁剪的元素？

> ID：13200755
> 
> 赞同：3
> 
> 时间：2012-11-02T18:06:19.220
> 
> 标签：css, image, alignment

如何将裁剪的图像从两侧对齐到中心，这也被缩放到它的高度？或者只是居中裁剪图像？[（参见http://jsfiddle.net/iegik/ZzXru](http://jsfiddle.net/iegik/ZzXru)中的 4、5 ）

```
 |//////////|
 |----------|   ----------------   ------------
 |          |   |/|          |/|   |          |
 |scaled by |   |/|scaled by |/|   |  empty   |
 |  width   |   |/|  height  |/|   |   div    |
 |          |   |/|          |/|   |          |
 |----------|   ----------------   ------------
 |//////////| 
```

或者

```
 -------------- 
|//////////////|
|//----------//| 
|/|          |/|
|/|   just   |/|
|/| cropped  |/|
|/|          |/|
|//----------//| 
|//////////////|
 -------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T04:40:01.827

如果您不必支持 IE8 或更低版本，您可以这样做。更改样式属性而不是使用图像元素。

```
figure {
     display: block;
     background-repeat: no-repeat;
     background-position: center center;
     background-size: cover;
}

<figure style="background-image:url(http://placekitten.com/250/300)"></figure> 
```

这使图像居中，填充容器，您不必担心横向与纵向。图像的纵横比将被保留。如果您想查看整个图像但一侧或另一侧有间隙，请使用“背景尺寸：包含”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:11:24.047

实际上这真的很棘手，因为图像尺寸不同，所以更棘手，你可以在这里查看[这篇](http://www.brunildo.org/test/img_center.html)关于这个主题的好文章......

如果您想手动将每个图像居中，您可以这样做

```
.img {
   position: absolute;
   width: 200px;
   height: 200px;
   left: 50%;
   top: 50%; 
   margin-left: -100px; /* Half of your image width */
   margin-top: -100px;  /* Half of your image height */
} 
```

不要忘记让你的`div`容器`position: relative;`

# javascript - JS断点没有被命中，但代码执行

> ID：13200758
> 
> 赞同：2
> 
> 时间：2012-11-02T18:06:29.357
> 
> 标签：javascript, jquery, firebug

我有一个不寻常的问题，并且从几个小时开始就一直在解决它。我的断点没有在函数中被击中，但功能仍然有效，这让我发疯。我已经用 Chrome/开发者工具和 Firefox/Firebug 都试过了。我以前从未有过这样的事情。

当我单击 New Conversation 按钮时，第一个断点命中。但是，当我单击通过 jquery .load() 出现的取消按钮时，断点没有命中。然而，它背后的功能会执行（div 被清空）。

请问我错过了什么？

```
function cancel_new_conversation(event){
    //2nd Breakppoint below this line doesn't get hit, but the empty() statement works.
    event.preventDefault();
    $('#new_conversation_div').empty();
}

function new_conversation(event){
    event.preventDefault();
    var url = $(this).attr("href") + "/";
    $('#new_conversation_div').load(url, function(){
       //1st Breakpoint gets hit.               
       $('#new_conversation_cancel_button').click(cancel_new_conversation);     
    }); 
}

$(document).ready(function (){      
  $('#new_conversation_button').click(new_conversation);
} 
```

我在做什么会以某种方式破坏 javascript？

编辑：

警报的好主意。这是证据。也许是环境问题？我必须在另一台机器上尝试。

![在此处输入图像描述](../Images/ee0aefb11f5d17d51f5e9c383f7cf9fc.png) ![在此处输入图像描述](../Images/6c09970694173cdbe6476be5ed1db980.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T12:57:21.467

昨天午饭后，在我无限的智慧中，我将原本要加载的部分 html`$('#new_conversation_div').load(url, function()`设计为带有标题和正文的完整 html。

因此，一旦它被加载到我的 div 中，html 标记就变得一团糟（两个标题，两个正文）

我将 javascript 文件从损坏的部分 html 移动到我的主 html 中，并从部分 html 中删除了标题和正文。现在我 .load() 部分 html，一切都按预期工作并且断点命中。很难找到。

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:21:13.967

我可以在您的代码中看到的唯一问题是您在加载新对话时没有取消绑定 #new_conversation_cancel_button 上的单击事件。如果您使用 jquery >1.7，您应该测试以下代码：

```
function cancel_new_conversation(event){
    //2nd Breakppoint below this line doesn't get hit, but the empty() statement works.
    event.preventDefault();
    console.log("cancel_new_conversation");
    $('#new_conversation_div').empty();
}

function new_conversation(event){
    event.preventDefault();
    var url = $(this).attr("href") + "/";
    $('#new_conversation_div').load(url, function(){
       //1st Breakpoint gets hit.               
       $('#new_conversation_cancel_button').off('click').on('click',cancel_new_conversation);     
    }); 
}
$(document).ready(function (){      
  $('#new_conversation_button').on('click',new_conversation);
});

​ 
```

# java - Jsoup获取具有CDATA标签的javascript内容？

> ID：13200761
> 
> 赞同：5
> 
> 时间：2012-11-02T18:06:49.577
> 
> 标签：java, javascript, jsoup, cdata

我正在使用 Jsoup 解析网页。但是有些如果我要解析的信息位于 CDATA 标记内，该标记会阻止解析器提取其中的数据。我将如何从 CDATA 标记中提取数据？例子：

```
<script type='text/javascript'><!--// <![CDATA[
    OA_show('300x250');
// ]]> --></script>
         <script type='text/javascript'>alert("Hello");</script> 
```

如果我使用 Jsoup 解析此页面并尝试使用“script [type = text/javascript]”选择页面中的所有匹配元素，我将返回页面中没有 CDATA 标记但没有警报的其他脚本的内容（“你好”）; 价值。我将如何使用 Jsoup 在 CDATA 标记中获取该值？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-08T21:56:01.227

```
String page = "<script type='text/javascript'><!--// <![CDATA[\n" +
        "    OA_show('300x250');\n" +
        "// ]]> --></script>\n" +
        "         <script type='text/javascript'>alert(\"Hello\");</script>";

String html = Jsoup.parse(page).select("script").get(0).html();
html = html.replace("<!--// <![CDATA[", "");
html = html.replace("// ]]> -->", "");

System.out.println(html); 
```

结果

```
OA_show('300x250'); 
```

# visual-studio-2010 - Visual Studio 2010 不记得字体设置

> ID：13200763
> 
> 赞同：4
> 
> 时间：2012-11-02T18:07:02.673
> 
> 标签：visual-studio-2010, fonts

我在 VS2010 中将我的字体设置为 Consolas 10，它总是有效。
从上周开始，每次我打开 VS2010 的新实例时，字体都会更改为其他字体（可能是默认字体？），但字体对话框显示我仍在使用 Consolas 10。

![在此处输入图像描述](../Images/e0d8cca6b9dabd0de4f78c68bf99e2e4.png)

要返回 Consolas，我必须将字体大小设置为 11，单击确定，然后打开对话框并将其设置回 10。

这很烦人。有人有解决方案吗？

# javascript - 如何使用javascript使用两个下拉菜单选择进行页面重定向

> ID：13200764
> 
> 赞同：0
> 
> 时间：2012-11-02T18:07:12.273
> 
> 标签：javascript, redirect, drop-down-menu

我是 JavaScript 的初学者，感谢您对我的问题的帮助。

我需要有两个下拉菜单，每个下拉菜单都有 URL 值，当被选中时，它们会附加在一起并在点击提交按钮后重定向到选定的 URL。

它类似于类似文章中的实时示例：http: [//www.jsfiddle.net/Yxw7k/13](http://www.jsfiddle.net/Yxw7k/13)

如果第一个下拉菜单中第二个选项的值是：`/a/something1`，第二个下拉菜单中第三个选项的值是`/3/index.html`，点击提交后你会被重定向到`www.somesite.com/a/something1/3/index.html` 我希望在不使用的情况下实现这个的jQuery。我怎样才能使用常规 JS 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:21:08.470

使用 jquery 更容易选择值，您可以创建一个检测所选值的函数，然后在用户按下提交按钮时更新重定向链接。因此，您需要将该功能添加到按钮的 onclick 事件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:15:25.423

我建议如下：

```
function makePath(directory, file, domain) {
    if (!directory || !file) {
        return false;
    }
    else {
        directory = directory.nodeType == 1 ? directory.value : document.getElementById(directory).value;
        file = file.nodeType == 1 ? file.value : document.getElementById(file).value;
        return newURL = [domain || 'http://' + location.hostname, directory, file].join('/');
    }
}

document.getElementById('fileName').onblur = function(){
    // using console.log() in the demo
    document.location = makePath('directoryPath', this, 'http://example.com');
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3C7u5/1/)。

以上内容与以下 HTML 一起使用：

```
<select id="directoryPath">
    <option>directoryA</option>
    <option>directoryB</option>
    <option>directoryC</option>
</select>

<select id="fileName">
    <option>file1.html</option>
    <option>file2.html</option>
    <option>file3.html</option>
</select> 
```

# c# - c# hash和php MD5文件/文件夹hash不一样

> ID：13200767
> 
> 赞同：0
> 
> 时间：2012-11-02T18:07:22.447
> 
> 标签：c#, php, md5sum

我必须在客户端（C#）和服务器（PHP）文件结构上对文件/文件夹进行 MD5 哈希处理。（服务器域是 PHP，客户端域是 c#。）问题是它们在工作时不匹配。任何想法将不胜感激

这是我的两个算法

C＃

```
using System;
using System.IO;
using System.Security.Cryptography;
using System.Text;

namespace nofolder
{
    public class classHasher
    {
        /**********
         *  recursive folder MD5 hash of a dir
         */
        MD5 hashAlgo = null;
        StringBuilder sb;
        public classHasher()
        {
            hashAlgo = new MD5CryptoServiceProvider();
        }
        public string getHash(String path)
        {
            // get the file attributes for file or directory
            if (File.Exists(path)) return getHashOverFile(path);
            if (Directory.Exists(path)) return getHashOverFolder(path);
            return "";
        }
        public string getHashOverFolder(String path)
        {
            sb = new StringBuilder();
            getFolderContents(path);
            return sb.ToString().GetHashCode().ToString();
        }
        public string getHashOverFile(String filename)
        {
            sb = new StringBuilder();
            getFileHash(filename);
            return sb.ToString().GetHashCode().ToString();
        }
        private void getFolderContents(string fold)
        {
            foreach (var d in Directory.GetDirectories(fold))
            {
                getFolderContents(d);
            }
            foreach (var f in Directory.GetFiles(fold))
            {
                getFileHash(f);
            }
        }
        private void getFileHash(String f)
        {
            using (FileStream file = new FileStream(f, FileMode.Open, FileAccess.Read))
            {
                byte[] retVal = hashAlgo.ComputeHash(file);
                file.Close();
                foreach (var y in retVal)
                {
                    sb.Append(y.ToString());
                }
            }
        }
    }
} 
```

PHP

```
function include__md5_dir($dir){
    /**********
    *   recursive folder MD5 hash of a dir
    */
    if (!is_dir($dir)){
        return  md5_file($dir);
    }

    $filemd5s = array();
    $d = dir($dir);

    while (false !== ($entry = $d->read())){
        if ($entry != '.' && $entry != '..'){
             if (is_dir($dir.'/'.$entry)){
                 $filemd5s[] = include__md5_dir($dir.'/'.$entry);
             }
             else{
                 $filemd5s[] = md5_file($dir.'/'.$entry);
             }
         }
    }
    $d->close();
    return md5(implode('', $filemd5s));
} 
```

**编辑。**

我已经决定*c# 必须改变*。**PHP 很好**。第一个 100% 有效的代码获得赏金

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:10:30.210

您的 PHP 代码正在组装十六进制数字（根据`md5_file()`文档）

您的 C# 代码正在组装非 0 填充的十进制数字。
您需要`y.ToString("x2")`格式化为十六进制。

还有，`return sb.ToString().GetHashCode().ToString();`是非常错误的。不要打电话`GetHashCode()`；这不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:29:33.267

我最终自己解决了这个问题，并为未来的后代提供了答案——**这个解决方案的关键是消除 linux 和 windows 使用的不同的默认目录 ORDERING**。这仅在 linux 服务器（Cent OS6.3）和 Windows 7 客户端上进行了测试。

C＃

```
public class classHasher
    {
        /**********
        *   recursive folder MD5 hash of a dir
        */
        MD5 hashAlgo = null;
        StringBuilder sb;
        public classHasher()
        {
            hashAlgo = new MD5CryptoServiceProvider();
        }

        public string UltraHasher(String path)
        { 
            /**********
            *   recursive folder MD5 hash of a dir
            */
            if (!Directory.Exists(path))
            {
                return  getHashOverFile(path);
            }

            List<string> filemd5s = new List<string>();
            List<string> dir = new List<string>();

            if (Directory.GetDirectories(path) != null) foreach (var d in Directory.GetDirectories(path))
            {
                dir.Add(d);

            }
            if (Directory.GetFiles(path) != null) foreach (var f in Directory.GetFiles(path))
            {
                dir.Add(f);                
            }

            dir.Sort();

            foreach (string entry in dir)
            {
                if (Directory.Exists(entry))
                {
                    string rtn = UltraHasher(entry.ToString());
                    //Debug.WriteLine("   ULTRRAAHASHER:! " + entry.ToString() + ":" + rtn);
                    filemd5s.Add(rtn); 
                } 
                if (File.Exists(entry))
                {
                    string rtn = getHashOverFile(entry.ToString());
                    //Debug.WriteLine("   FILEEEEHASHER:! " + entry.ToString() + ":" + rtn);
                    filemd5s.Add(rtn);
                }
            }

            //Debug.WriteLine("   ULTRRAASUMMMM:! " + String.Join("", filemd5s.ToArray()));
            string tosend = CalculateMD5Hash(String.Join("", filemd5s.ToArray()));
            //Debug.WriteLine("   YEAHHAHHAHHAH:! " + tosend);
            return tosend;
        }

        public string getHashOverFile(String filename)
        {
            sb = new StringBuilder();
            getFileHash(filename);
            return sb.ToString();
        }
        private void getFileHash(String f)
        {
            using (FileStream file = new FileStream(f, FileMode.Open, FileAccess.Read))
            {
                byte[] retVal = hashAlgo.ComputeHash(file);
                file.Close();
                foreach (var y in retVal)
                {
                    sb.Append(y.ToString("x2"));
                }
            }
        }
        public string CalculateMD5Hash(string input)
        {
            byte[] inputBytes = System.Text.Encoding.ASCII.GetBytes(input);
            byte[] hash = hashAlgo.ComputeHash(inputBytes);

            StringBuilder sz = new StringBuilder();
            for (int i = 0; i < hash.Length; i++)
            {
                sz.Append(hash[i].ToString("x2"));
            }
            return sz.ToString();
        }
 } 
```

PHP

```
function md5_dir($dir){
        /**********
        *   recursive folder MD5 hash of a dir
        */
        if (!is_dir($dir)){
            return  md5_file($dir);
        }

        $filemd5s = array();
        $bit = array();
        $d = scandir($dir);

        foreach($d as $entry){
            if ($entry != '.' && $entry != '..'){
                 $bit[] = $entry;
            }
        }

        asort($bit);

        foreach($bit as $entry){
            if (is_dir($dir.'/'.$entry)){
                $sz = md5_dir($dir.'/'.$entry);
                //echo "\n   ULTRRAAHASHER:! ".$dir.'/'.$entry.":$sz";
                $filemd5s[] = $sz;
             }
             else{
                $sz = md5_file($dir.'/'.$entry);
                $filemd5s[] = $sz;
                //echo "\n   FILEEEEHASHER:! ".$dir.'/'.$entry.":$sz";
             }
         }
        //echo "\n   ULTRRAASUMMMM:! ".implode('', $filemd5s)."";
        //echo "\n   YEAHHAHHAHHAH:! ".md5(implode('', $filemd5s))."";
        return md5(implode('', $filemd5s));
    } 
```

这两个将遍历 C# Windows 和 PHP linux 文件夹，并返回 Linuxland 内和 Windowsland 内所有目录（递归，因此它包括子目录）的相同哈希值。

# asp.net - 如何为这个表结构实现 DIV

> ID：13200768
> 
> 赞同：0
> 
> 时间：2012-11-02T18:07:28.550
> 
> 标签：asp.net, html, css

![在此处输入图像描述](../Images/9ffe7cf2c8cf2d2098e52e3df31c0388.png)

我正在尝试使用 div 复制此表结构。

```
<asp:Table ID="tblAnnualReportServiceForm" runat="server" Width="100%" CellSpacing="1" CellPadding="5">
    <asp:TableRow >
        <asp:TableCell HorizontalAlign="Left">
            <asp:Table ID="Table1" runat="server" CellSpacing="1" CellPadding="5">
                <asp:TableRow>
                    <asp:TableCell>
                        <asp:Label ID="lblStartDate" runat="server" Text="Start Date"></asp:Label>
                    </asp:TableCell>
                    <asp:TableCell>
                        <asp:TextBox ID="txtStartDate" Width="130px" runat="server"></asp:TextBox>
                    </asp:TableCell>
                </asp:TableRow>
                <asp:TableRow >
                    <asp:TableCell>
                        <asp:Label ID="lblEndDate" runat="server" Text="End Date"></asp:Label>
                    </asp:TableCell>
                    <asp:TableCell>
                        <asp:TextBox ID="txtEndDate" runat="server" Width="130px" style="text-align:left" ValidationGroup="MKE" />
                    </asp:TableCell>
                </asp:TableRow>             
            </asp:Table>
        </asp:TableCell>
    </asp:TableRow>
</asp:Table> 
```

我尝试了以下 DIV，但我没有太多 CSS 经验。

```
<div>
    <div  style="float:left">
         <asp:Label ID="Label1" runat="server" Text="Start Date"></asp:Label>
    </div>
    <div>
        <asp:TextBox ID="TextBox1" Width="130px" runat="server"></asp:TextBox>
   </div>    
   <div>
        <asp:Label ID="Label2" runat="server" Text="End Date"></asp:Label>
        <asp:TextBox ID="TextBox2" runat="server" Width="130px" style="text-align:left" ValidationGroup="MKE" />
  </div>
</div> 
```

任何指针都会有很大帮助。我有太多需要转换为 DIV 的表结构。我很感激帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:38:28.713

复制表的一般结构是这样的。

```
<!--table-->
<div>
        <!--tr-->
        <div style="clear:both"></div>
                <!--td-->
                <div style="float:left">
                </div>
                <!--td-->
                <div style="float:right">
                </div>
        <!--tr-->
        <div style="clear:both"></div>
                <!--td-->
                <div style="float:left">
                </div>
                <!--td-->
                <div style="float:right">
                </div>
        <!--tr-->
        <div style="clear:both"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:22:10.133

你可以这样做：

```
<div>
    <div style="clear:both;">
        <div style="float:left;width:50%;">
            <asp:Label ID="lblStartDate" runat="server" Text="Start Date"></asp:Label>
        </div>
        <div style="float:left;width:50%;">
            <asp:TextBox ID="txtStartDate" Width="130px" runat="server"></asp:TextBox>
        </div>
    </div>
    <div style="clear:both;">
        <div style="float:left;width:50%;">
            <asp:Label ID="lblEndDate" runat="server" Text="End Date"></asp:Label>
        </div>
        <div style="float:left;width:50%;">
            <asp:TextBox ID="txtEndDate" runat="server" Width="130px" style="text-align:left" ValidationGroup="MKE" />
        </div>
    </div>
</div> 
```

如果您想获得一些填充/边距，您可以将另一个 div 添加到单元格 div 中：

```
<div style="float:left;width:50%;">
    <div style="border:solid 1px black;padding:5px;margin:1px;">                
            <asp:Label ID="lblStartDate" runat="server" Text="Start Date"></asp:Label>
    </div>
</div> 
```

[JsFiddle DEMO](http://jsfiddle.net/jGkxJ/)或[这里](http://jsfiddle.net/jGkxJ/2/)是一个带有类的演示（使用`style`不是一个好主意，所以我创建了几个类并从 div 标签中删除了样式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:16:35.670

查看：

1.) **[YUI Grids](http://developer.yahoo.com/yui/grids/)** - 用于无表**设计**

基础的 YUI Grids CSS 提供了四种预设页面宽度、六个预设模板，以及堆叠和嵌套两列、三列或四列的细分区域的能力。4kb 文件提供超过 1000 种页面布局组合。

2.) [960 Grid System](http://960.gs/)：该系统的前提非常适合快速原型制作，但在集成到生产环境中时同样可以正常工作。有可打印的草图、设计布局和具有相同测量值的 CSS 文件。

# phpexcel - PHPExcel图表轴选项设置最小值

> ID：13200770
> 
> 赞同：3
> 
> 时间：2012-11-02T18:07:36.253
> 
> 标签：phpexcel

我对 PHPExcel 有疑问，这不是 PHPExcel 的错。在图表中，显示的值非常大，因此由于“最小值”轴选项的默认设置是“自动”，Excel 决定使用 Y 轴的最小值 156,000。通过进入“轴格式”选项并将该轴的最小值设置为 0 的固定值，可以在 Excel 中“修复”该问题。

所以我一直试图弄清楚你是否可以在 PHPExcel 中设置这个选项，但不知道它是否可能。

那么您可以从 PHPExcel 中更改图表轴格式选项吗？如果可以的话……如何？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:48:24.427

这是 PHPExcel 尚不可用的选项

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-02T19:58:06.847

现在应该可以使用此修复程序：[https ://github.com/PHPOffice/PHPExcel/commit/1a237573f9127a02388f4e306732122b39d1ea49](https://github.com/PHPOffice/PHPExcel/commit/1a237573f9127a02388f4e306732122b39d1ea49)

使用示例（最大值为 100）：

```
$axis =  new PHPExcel_Chart_Axis();
$axis->setAxisOptionsProperties('nextTo', null, null, null, null, null, null, 100);

$chart = new PHPExcel_Chart('chart' . $locTL, $title, $legend, $pa, true, 0, NULL, NULL, $axis); 
```

我只测试了最大限制，但我相信它对于最小限制也应该正常工作。

# sql - 转场？

> ID：13200776
> 
> 赞同：0
> 
> 时间：2012-11-02T18:08:01.963
> 
> 标签：sql, db2

我使用 IBM DB2 SQL。

这是我当前的查询：

```
select 
EXSHPE as "Shape",
EXDLVY as "Delivery",

  Sum(Case When EXSURF = 'Print' Then EXRLTO Else 0 End) As Retail_Print,
  Sum(Case When EXSURF = 'Pattern' Then EXRLTO Else 0 End) as Retail_Pattern,
  Sum(Case When EXSURF = 'Solid' Then EXRLTO Else 0 End) As Retail_Solid,
  Sum(Case When EXSURF = 'UnknownA' Then EXRLTO Else 0 End) as Retail_UnknownA,
  Sum(Case When EXSURF = 'UnknownB' Then EXRLTO Else 0 End) As Retail_UnknownB,
  Sum(Case When EXSURF = 'UnknownC' Then EXRLTO Else 0 End) as Retail_UnknownC,

  Sum(Case When EXSURF = 'Print' Then EXWHLO Else 0 End) As Wholesale_Print,
  Sum(Case When EXSURF = 'Pattern' Then EXWHLO Else 0 End) as Wholesale_Pattern,
  Sum(Case When EXSURF = 'Solid' Then EXWHLO Else 0 End) As Wholesale_Solid,
  Sum(Case When EXSURF = 'UnknownA' Then EXWHLO Else 0 End) as Wholesale_UnknownA,
  Sum(Case When EXSURF = 'UnknownB' Then EXWHLO Else 0 End) As Wholesale_UnknownB,
  Sum(Case When EXSURF = 'UnknownC' Then EXWHLO Else 0 End) as Wholesale_UnknownC,

  Sum(Case When EXSURF = 'Print' Then EXUNTO Else 0 End) As Units_Print,
  Sum(Case When EXSURF = 'Pattern' Then EXUNTO Else 0 End) as Units_Pattern,
  Sum(Case When EXSURF = 'Solid' Then EXUNTO Else 0 End) As Units_Solid,
  Sum(Case When EXSURF = 'UnknownA' Then EXUNTO Else 0 End) as Units_UnknownA,
  Sum(Case When EXSURF = 'UnknownB' Then EXUNTO Else 0 End) As Units_UnknownB,
  Sum(Case When EXSURF = 'UnknownC' Then EXUNTO Else 0 End) as Units_UnknownC,

  Sum(Case When EXSURF = 'Print' Then EXAURA Else 0 End) As Actual_AUR_Print,
  Sum(Case When EXSURF = 'Pattern' Then EXAURA Else 0 End) as Actual_AUR_Pattern,
  Sum(Case When EXSURF = 'Solid' Then EXAURA Else 0 End) As Actual_AUR_Solid,
  Sum(Case When EXSURF = 'UnknownA' Then EXAURA Else 0 End) as Actual_AUR_UnknownA,
  Sum(Case When EXSURF = 'UnknownB' Then EXAURA Else 0 End) As Actual_AUR_UnknownB,
  Sum(Case When EXSURF = 'UnknownC' Then EXAURA Else 0 End) as Actual_AUR_UnknownC,

  Sum(Case When EXSURF = 'Print' Then EXMERA Else 0 End) As Merch_AUR_Print,
  Sum(Case When EXSURF = 'Pattern' Then EXMERA Else 0 End) as Merch_AUR_Pattern,
  Sum(Case When EXSURF = 'Solid' Then EXMERA Else 0 End) As Merch_AUR_Solid,
  Sum(Case When EXSURF = 'UnknownA' Then EXMERA Else 0 End) as Merch_AUR_UnknownA,
  Sum(Case When EXSURF = 'UnknownB' Then EXMERA Else 0 End) As Merch_AUR_UnknownB,
  Sum(Case When EXSURF = 'UnknownC' Then EXMERA Else 0 End) as Merch_AUR_UnknownC

from EXOWMSPD
Where (EXCO || '/' || EXDIV)  = ?
Group By
  EXSHPE,
  EXDLVY
Order By
  EXSHPE DESC,
  EXDLVY DESC 
```

数据库如下所示： ![在此处输入图像描述](../Images/c25643f8114ff5332703a6e6028cc606.png)

我需要旋转 Surface，但是是动态的。问题是，我只知道前 3 个表面描述。但我需要为最多 6 人做好准备。

有没有办法可以动态地旋转它来抓取前 6 个表面。

例子，

```
RETAIL_DOLLARS_1   10.00
RETAIL_DOLLARS_2   20.00
RETAIL_DOLLARS_3   50.00
RETAIL_DOLLARS_4   0.00
RETAIL_DOLLARS_5   0.00
RETAIL_DOLLARS_6   0.00 
```

在这个例子中，找到了 3 个表面的数据，另外 3 个我想用 0 填充。

我正在使用它来制作报告，我将隐藏 SURFACE_DESCRIPTION_X 等于“”的列。

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:27:54.013

如果您想对各个维度上的数据进行多维数据集，请尝试

```
 GROUP BY CUBE 
```

条款

# vb.net - 如果出现异常，此代码中的所有内容都会自动关闭

> ID：13200777
> 
> 赞同：1
> 
> 时间：2012-11-02T18:08:08.820
> 
> 标签：vb.net

请问三个问题

1) 如果在下面的尝试中出现异常，请求流会自动关闭，因为它在`using`

2)`do I even need the requestStream.Close() and requestStream.Dispose() as it is in a using?`

3) 我需要关闭 System.Net.FtpWebRequest 吗？

```
Try

    Dim rqst As System.Net.FtpWebRequest = DirectCast(System.Net.WebRequest.Create("ftp://1.com/text.txt"), System.Net.FtpWebRequest)
    rqst.Credentials = New System.Net.NetworkCredential("useb", "pass")
    rqst.Method = System.Net.WebRequestMethods.Ftp.UploadFile

    'Throw New ApplicationException("Exception Occured")
    Dim fle() As Byte = System.IO.File.ReadAllBytes("C:\test.txt")

    Using requestStream As Stream = rqst.GetRequestStream()

        requestStream.Write(fle, 0, fle.Length)
        requestStream.Close() 'do I need this?
        requestStream.Dispose() 'do I need this ?

    End Using

Catch ex As Exception

    MessageBox.Show(ex.Message.ToString())

End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:11:41.380

不，如果您正在使用`using`. 由于`using`本身是用来处置的。此外，“使用”语句的原因是确保对象始终正确处理，并且不需要显式代码来确保发生这种情况。

当控制流退出 using 块时，立即调用 Dispose 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:16:52.190

是的。如果在 using 语句中执行代码时发生异常，则流将在进入 Catch 块之前被释放。

# jquery - jQuery mouseenter 和 mouseout 动画

> ID：13200782
> 
> 赞同：1
> 
> 时间：2012-11-02T18:08:49.433
> 
> 标签：jquery

我试图在 mouseenter 和 mouseout 上做一个事件。如果我将鼠标悬停不止一次，它会重复我这样做的次数，即使仍然在第一个动画上。我还试图在 mouseleave 上停止动画并将其动画化。提前致谢

这是javascript

```
$('.velejador').mouseenter(function(){
    $('.velejador').animate({
        left: '-=50',
        width: '40px'
      }, 2000);
}).mouseleave(function(){
    $('.velejador').animate({
        left: '+=50',
        width: '40px'
      }, 2000);
}); 
```

这里的html

```
<div id="hidden-cartoons">
    <img src="<?php echo base_url().'assets/img/cartoons/velejador.png' ?>" class="cartoon velejador">
    <img src="<?php echo base_url().'assets/img/cartoons/bodoleite.png' ?>" class="cartoon bodoleite">
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:55:00.533

你可以试试这个。。

```
var velejador = $('.velejador');
var position = velejador.position();
velejador.mouseenter(function(){
    var $this = $(this);
    console.log(position);
    $this.css('left',position.left);
    $this.stop(1,0).animate({
        left: '-=50',
        width: '40px'
      }, 2000,function(){
        $this.stop(1,0).animate({
            left: '+=50',
            width: '40px'
        }, 2000);
      });       
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T18:34:41.990

```
$('.velejador').mouseover(function() {
    $('.velejador').animate({
        left: '-=50',
        width: '40px'
    }, 2000);
}).mouseout(function() {
    $('.velejador').animate({
        left: '+=50',
        width: '40px'
    }, 2000).stop();
}); 
```

根据图像在“mouseout”上的位置，您可能希望使用 .css() 将图像返回到原始位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T18:36:03.593

您正在寻找的是[.stop()](http://api.jquery.com/stop/)

试试这个[小提琴](http://jsfiddle.net/zSAjB/)

有两件事，我曾经`stop`取消任何当前正在运行的动画。其次，我用绝对值替换了 '+=50' 和 '-=50' 因为没有这些，如果你不断进出鼠标，div 最终会在屏幕上越来越远，我认为这是不是你的目标。

要记住的另一件事是，当在 mouseenter 上执行移动或调整元素大小的动画时，您可能最终会触发 mouseout 事件，除非用户在您移动元素时“追逐”该元素。

# dynamics-crm - 在 CRM 2011 中创建时使用工作流自动填充表单字段

> ID：13200783
> 
> 赞同：0
> 
> 时间：2012-11-02T18:08:50.233
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-4

我想让一个字段自动填充我在工作流程中定义的内容。目前我在创建记录时运行工作流，但是该字段仅在用户第一次保存记录后才填充。

在用户保存表单之前，如何使用工作流填充该字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:24:13.867

你不能。工作流在*服务器*端起作用，但您询问的是在联系服务器*之前填充**客户端*字段。此外，工作流是异步触发的，根据定义，这意味着必须提前创建记录。

 *您需要将 JavaScript 函数附加到`OnSave`事件，或者在预验证或预操作 .NET 插件中触发字段填充。我想您也可以使用对话框，但这需要用户输入。有关插件、工作流和对话框之间差异的更多详细信息，请参阅以下链接。

*   [选项：插件、工作流或对话框](http://blogs.msdn.com/b/crm/archive/2011/06/22/options-plugin-workflow-or-dialog.aspx "Microsoft Dynamics CRM 博客")
*   [在 Microsoft Dynamics CRM 中自动化业务流程](http://msdn.microsoft.com/en-us/library/gg328264.aspx "在 Microsoft Dynamics CRM 中自动化业务流程")*

# c# - Metro Style 应用程序的颜色选择器？

> ID：13200785
> 
> 赞同：4
> 
> 时间：2012-11-02T18:09:11.103
> 
> 标签：c#, wpf, microsoft-metro

我正在尝试将 ColorPicker 添加到我的 Metro 风格应用程序中。经过一番研究，我发现 Extended WPF Toolkit 包含 ColorPicker。但是当我尝试通过“添加引用”将 .dll 文件添加到我的项目时，它会说：

*“项目以 .NETCore 为目标，而文件引用以 .NETFramework 为目标。这不是受支持的方案。”*

我的问题是，如何添加这个 .dll 文件？是否可以编译此 .dll 以便以 .NETCore 为目标？还有其他（简单）方法可以在 Metro Style App 中实现颜色选择器吗？

（我对WPF的概念完全陌生。如果我犯了任何错误，请纠正我。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T06:19:53.897

它不是来自微软，ColorPicker 还没有完成（它被描述为“正在开发中”），但你当然可以尝试一下。 [http://winrtxamltoolkit.codeplex.com/](http://winrtxamltoolkit.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-11T05:31:09.643

我最近对其进行了测试，它在 Metro 应用程序中也很好用。如果您的工作不正常，请尝试通过 Nuget Packages 添加 wpf 扩展文件，它将正常工作:)

# javascript - jQuery 代码在 Firefox/Chrome 中不起作用

> ID：13200787
> 
> 赞同：0
> 
> 时间：2012-11-02T18:09:23.567
> 
> 标签：javascript, jquery, html

```
var matcheduserID = $('.checkone')[1].matcheduserID;

<input type="checkbox" matcheduserID='user1' class="checkone" onclick="javascript:HoldItem('H')"> 
```

此代码在 Internet Explorer 中有效，但在 Firefox 和 Chrome 中我得到它返回未定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:14:10.377

我认为您首先尝试访问错误的元素..您是否尝试访问`First element or the second element`..

NodeList 是**基于 0 索引的**。

如果它是您尝试访问的第一个元素，则使用

```
var matcheduserID = $('.checkone')[0].matcheduserID; 
```

尝试使用该`.getAttribute()`方法

**.get(1)** 获取给定类的第二个元素..

```
var matcheduserID = $('.checkone').get(1).getAttribute("matcheduserID"); 
```

也许您遇到这个问题是因为`matcheduserID`不是元素的默认属性

**jQuery**

```
var matcheduserID = $('.checkone:eq(1)').attr('matcheduserID'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T18:15:17.890

我认为您正在尝试这样做

```
matcheduserID = $('.checkone:first').attr('matcheduserID'); 
```

# java - 将图像插入到 sqlite

> ID：13200789
> 
> 赞同：1
> 
> 时间：2012-11-02T18:09:40.530
> 
> 标签：java, database, sqlite, netbeans, blob

我正在使用 sqlite 数据库和 netbeans 创建应用程序。将图像保存到数据库时出现问题。我在数据库中有一个数据类型为 BLOB 的图像字段，我正在插入一个字节数组。我知道它不匹配。但是当我保存它时，它的值是这样的“[B@2c8f544b”，但实际值应该是这样的“BLOB（大小：1850）”。如果有这样的值，那么只有我可以检索图像。我真的不知道该怎么做。如果您有任何参考，请告诉我。

我的想法是在保存到数据库之前将字节数组转换为 BLOB 类型。但我找不到任何代码。

```
 String fname = p.fname;
        String lname = p.lname;
        byte[] image = p.image_det;
        String mob = p.mobile;
        String wor = p.work;
        String hom = p.home;
        String fax = p.fax;
        int pID ;

        ResultSet rst = stmt.executeQuery("SELECT MAX(pID) FROM person");

        pID =    Integer.parseInt(rst.getString(1))+1;

        Statement stmt1 = con.createStatement();
        stmt1.executeUpdate("INSERT INTO person(pID,F_name,L_name,image) VALUES ("+pID+" ,'"+fname+"','"+lname+"','"+image+"' ) "); 
```

//-------------------------获取图像路径并将图像数据获取到名为 image_details 的数组中

```
 File f;
    String ipath = f.getAbsolutePath();  // getting image path
    byte[] image_detail = null;

    try 
    {
        File image = new File(ipath);
        FileInputStream fis = new FileInputStream(image); 

        ByteArrayOutputStream baos = new ByteArrayOutputStream();

        byte[] buf = new byte[1024];

        for(int readNum;(readNum = fis.read(buf))!= -1;)
        {
            baos.write(buf, 0,readNum);
        }

        image_detail =  baos.toByteArray();

        per.setImage_det(image_detail); // set image data for person class 
```

# javascript - 宽度太小时重定向到移动页面

> ID：13200792
> 
> 赞同：3
> 
> 时间：2012-11-02T18:09:48.600
> 
> 标签：javascript, html, redirect

由于我的网站在小屏幕上看起来一点也不好看，所以我想创建一个 JS 函数，当屏幕宽度小于或等于 800px 时将我重定向到页面的移动版本。

这是它的代码：

```
if (screen.width <= 800) {
  document.location ="index_mobile.html";
}; 
```

如果代码有效，那么当我将浏览器窗口缩小到 800 像素宽时，应该会显示 index_mobile.html。但它现在没有出现。有谁知道发生了什么？

[http://jsfiddle.net/RZMmV/](http://jsfiddle.net/RZMmV/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:16:43.253

移动浏览器不会报告或使用真实设备分辨率，因为这基本上会使互联网上的所有网站都无法使用。

他们所做的是创建一个“虚拟屏幕”，其分辨率接近桌面 PC 的分辨率，然后在页面上实现缩放。

如果您想知道真实的设备分辨率，您需要禁用在设备上完成的自动缩放。例如，对于 iOS 和 Android 设备，可以添加

```
<meta name="viewport"
      content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/> 
```

到`<head>`您页面的部分。这会通知浏览器该页面是为处理低分辨率设备而设计的，并禁用虚拟屏幕层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:16:50.350

`screen.width`将返回监视器的宽度，而不是窗口的宽度，因此您不能只是缩小浏览器窗口以获得不同的值。为此，您将需要使用`window.outerWidth`或其他东西。

# ios - IOS 打印机列表菜单图标文档

> ID：13200793
> 
> 赞同：0
> 
> 时间：2012-11-02T18:09:53.320
> 
> 标签：ios, icons

出现 IOS 打印机选择菜单时，有时会在打印机名称旁边显示图标。是否有关于这些图标的列表/文档以及它们的索引值是多少？

我在 Mac/PC 上的 AirPrint 助手应用程序中看到了云图标和灯光图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:06:33.333

这些被称为 Emojis....Emojii.... Emoji....

# google-apps-script - 尝试在 Google App Script HTMLService 中发布 Ajax 帖子时出现问题（Caja 干扰？）

> ID：13200794
> 
> 赞同：0
> 
> 时间：2012-11-02T18:10:00.340
> 
> 标签：google-apps-script, google-caja

我有一个用 HtmlServices 制作的网页。这个页面有一个表单，我想提交给一个 GAS Web 应用程序，该应用程序作为 Web 服务运行。

当我使用谷歌应用脚​​本 UrlFetch 从我的第一个 GAS 应用程序调用我的网络服务时，我经常会超时。不幸的是，我们无法设置我认为大约 10 秒的 GAS UrlFetch 超时值。10 秒对于 GAS 应用程序复制文件、打开/编辑电子表格和发送电子邮件来说是不够的！

所以我决定在用 HtmlServices 构建的网页中使用 Jquery 并做一个 ajax 发布（因为我可以设置超时值）。（所以我的页面被 Google Caja 清理了）。据说Jquery得到了Caja的支持。

但我注意到 Ajax URL 总是被重写为第一个 Web 应用程序 URL（我想发布到的 url 由 Caja 更改）。在我看来，谷歌的 Caja 正在阻止 Ajax 调用。我在 GAS HtmlService 中找不到有关 Caja / Ajax 帖子限制的任何内容。

您对如何从 GAS Web App 调用 Web 服务有什么建议，而不受 GAS 超时限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:23:35.887

我现在能给出的最好建议是使用 JSONP 而不是 Ajax 进行调用。在这种情况下，您不应该看到超时，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:09:05.417

几件事

1.  从部署在 script.google.com 上的 Web 应用程序到部署在 script.google.com 上的内容服务的 AJAX 调用（使用 jQuery 或 vanilla JS）不起作用。我已经确认了这一点，我相信这是一个安全限制。我尝试了几种不同的解决方法，这看起来没有短期选择。

2.  关于 UrlFetchApp 的服务器端选项。我相信超时实际上是 30 秒。但是，这可能还不够，而且看起来您遇到的频率已经够多了。

所以基本上我推荐的第三个（不太理想的）选项是一种基于“队列”的方法。在这种方法中 - 让您的 HTML Web 应用程序调用 ScriptDb 队列。然后，您可以有一个定时触发器（每分钟或每小时）在您执行必要操作时运行。只需在两个脚本之间共享相同的脚本库，以便您可以共享队列的脚本数据库参考。

# html - 具有不同角度和形状的 css3 角

> ID：13200796
> 
> 赞同：1
> 
> 时间：2012-11-02T18:10:04.973
> 
> 标签：html, css, css-transitions

在下面的 [DEMO][1] 中，我一直在忙于开发所有样式。但仅使用 css3 无法正确完成。您是否有一种仅在 CSS3 中实现的快速或好方法？所以我可以让他们更有活力？谢谢。

![按钮和形状](../Images/a0b74c7df1fd93dc2ec8f3efb95b05ae.png)

# python - 如何按字母顺序排列字符串中的字符，不考虑大小写？

> ID：13200797
> 
> 赞同：0
> 
> 时间：2012-11-02T18:10:09.323
> 
> 标签：python, python-3.x

是否可以按字母顺序排列字符串中的字符，而不考虑大小写？我需要它们留在它们所在的情况下，所以我不能使用`.lower()`or `.upper()`，但我希望它们以字母优先的方式排列，因此生成的字符串将类似于：

`"LMmqRRs"`

代替

`"LMRRmqs"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:18:34.550

这确保大写字母排在第一位：

```
s = 'mqRMRsL'
result = ''.join(sorted(s, key=lambda c:(c.lower(), c)))
# LMmqRRs 
```

这不会：

```
s = 'mqRMRsL'
result = ''.join(sorted(s, key=str.lower))
# LmMqRRs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T19:56:49.287

这是对 BlaXpirit 解决方案的轻微改动，以使排序稳定：

```
def alphabet_cmp(a, b):
    a_lower, b_lower = a.lower(), b.lower()
    if a_lower == b_lower:
        return cmp(a, b)
    else:
        return cmp(a_lower, b_lower)

x = 'ABcdCDab'
''.join(sorted(x, cmp=alphabet_cmp))
# 'AaBbCcDd' 
```

# xml - Papyrus 实现的 MARTE 规范

> ID：13200805
> 
> 赞同：4
> 
> 时间：2012-11-02T18:11:08.740
> 
> 标签：xml, eclipse, profile, uml, papyrus

我是 MARTE 的新手，我阅读了 OMG 推广的与时间建模子配置文件相关的规范。

我将纸莎草用于 MARTE 我想知道是否有实施这些规范的实际示例？我无法通过 Google 搜索找到示例

# python - 在 Python 中为代码实现错误消息

> ID：13200806
> 
> 赞同：0
> 
> 时间：2012-11-02T18:11:12.157
> 
> 标签：python, implementation

```
def parse(expression):
    operators= set("*/+-")
    numbers= set("0123456789")#not used anywhere as of now
    opExtrapolate= []
    numExtrapolate= []
    buff=[]
    for i in expression:
        if i in operators:
            if len(buff) >0: #prevents buff if multiple operators
                numExtrapolate.append(''.join(buff))
            buff= []
            opExtrapolate.append(i)
            opExtrapolation=opExtrapolate
        else:
            buff.append(i)

    numExtrapolate.append(''.join(buff))

    numExtrapolation=numExtrapolate
    print(numExtrapolation)
    print("z:", len(opExtrapolation))
    return numExtrapolation, opExtrapolation

def errors():

    numExtrapolation,opExtrapolation=parse(expression)
    #Error for muliple operators
    if (len(numExtrapolation) ==3) and (len(opExtrapolation) !=2):
        print("Bad1")
    if (len(numExtrapolation) ==2) and (len(opExtrapolation) !=1):
        print("Bad2")
    # 
```

我在一个较旧的问题中发布了类似的代码，但是在这篇文章中问题的前提是不同的。

上面的代码接受用户在变量表达式中输入的数学输入，并将其拆分为操作数和运算符。如果输入不正确，errors 函数稍后会打印错误。

输入看起来像这样，其中运算符只能在 set("*/+-") 中，操作数是实数。因此示例输入为 45/23+233

在 SO 用户的帮助下，我能够使其中一个错误正常工作（多个操作员的错误），但是我在实现更多错误消息时遇到了麻烦。

1）如果输入包含不是数字或不允许的运算符的项目，则显示错误消息

2）如果用户输入一个数字，例如 0.23 或类似 554 的数字。如果小数位之前或小数位之后没有数字，则会显示不同的错误。（请注意，像 0.23 这样的数字很好）。

3) 如果用户试图除以零，则会显示错误。

::我尝试过的：

在 parse() 的 else 语句中，我尝试在 buff.append(i) 上设置条件，以便它仅在 buff.isdigit()==true 时运行该代码，但我收到错误提示 buff 中没有数字. 我还尝试创建一个名为“数字”的集合（在下面的代码中），并通过类似于初始 for 语句的 for 语句将 buff.append(i) 限制为该集合。但不幸的是，没有任何效果。任何和所有的帮助将不胜感激。

请不要引入大量比下面代码更高级的代码。我正在尝试解决问题，而不是完全更改我的代码。感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:19:03.183

您可以使用正则表达式进行这些检查：

1.  如果输入包含不是数字或不允许的运算符的项目，则会显示错误消息

    ```
    if not re.match(r'[\d.*/+\- ]+$', expression):
        print("Bad3")  # Characters exist that are not allowed 
    ```

    说明：`[\d.*/+\- ]`将仅匹配数字、您的运算符和空格、`+`允许这些字符中的一个或多个字符的方法，以及`$`字符串末尾的匹配项。 `re.match()`从字符串的开头开始，因此这意味着只允许使用这些字符。

2.  如果用户输入诸如 0.23 或 554 之类的数字。如果小数位之前或小数位之后没有数字，则会显示不同的错误。（请注意，像 0.23 这样的数字很好）。

    ```
    if re.search(r'(?<!\d)\.|\.(?!\d)', expression):
        print("Bad4")  # There is a '.' without a digit before or after it 
    ```

    说明：`\.`在正则表达式中匹配文字 '.' 特点。中间`|`是一个交替，所以如果正则表达式两边的表达式匹配，则正则表达式将匹配。 `(?<!\d)`表示前一个字符不是数字，`(?!\d)`表示下一个字符不是数字，所以这个正则表达式的意思是“匹配一个'。” 前面没有数字或匹配“。” 后面没有数字”。

3.  如果用户试图除以零，则会显示错误。

    ```
    if re.search(r'/ *[0.]+(?![.\d])', expression):
        print("Bad5")  # Division by 0 
    ```

    说明：这匹配`/`后跟任意数量的空格，然后是一个或多个`0`or`.`字符，因此如果`expression`您的任何地方有类似`/ 0`,`/ 0.0`或的内容，这将匹配`/ 0.00`。这`(?![.\d])`意味着下一个字符不能是数字或`.`，这将阻止您匹配类似`/ 0.4`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:18:10.303

我会给你一些指示，但不会为你解决:)。如果您需要更多，请提出一个准确的问题，我会回答。

我给你的答案与你的代码没有直接关系。

您可以通过尝试强制转换来测试字符串变量是否可以是整数：

```
try:
    var2 = int(var) 
```

我让你看看它给出了什么错误

对于不使用try的版本，可以看[isdigit方法](http://www.tutorialspoint.com/python/string_isdigit.htm)

您可以通过检查它来查看字符串变量是否是您的运算符之一

```
if (var in ["+", "-", "/", "*"]) 
```

要检查更多，您可以先查看变量的长度

```
if len(var) != and ... see above 
```

要检查用户是否输入了类似 .543 的内容并拒绝它，并且可以查看字符串变量的第一个元素：

```
if myvar[0] is ".": 
```

要检查您的用户是否要除以 0，您只需检查最后一个数字是否等于 0

```
if int(myvar) == 0: 
```

不过，所有这些都希望您能够首先获得运算符和数字。

另一种解决方案是在解析数字和运算符之前使用正则表达式来执行这些检查。与您尝试完成的练习相比，它似乎相当复杂，因为它是家庭作业。无论如何，看看它们可能是个好主意。

# c++ - 在 C++ 中从 Excel 中读取单元格？

> ID：13200809
> 
> 赞同：3
> 
> 时间：2012-11-02T18:11:33.507
> 
> 标签：c++, excel, fstream

我想知道如何在 C++ 中从 Excel 电子表格中读取特定单元格。我知道我们必须使用“fstream”库，但我不知道如何从某个单元格获取这些值，并将其打印在屏幕上。任何帮助将不胜感激，谢谢！地毯嘶嘶声

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:14:54.720

在 linux 中你有这个免费的：http: [//libxls.sourceforge.net/](http://libxls.sourceforge.net/)

在 Windows 中，你有[http://www.libxl.com/](http://www.libxl.com/)这似乎要花钱：

```
Book* book = xlCreateBook();
if(book)
{
    if(book->load(L"example.xls"))
    {
        Sheet* sheet = book->getSheet(0);
        if(sheet)
        {
            const wchar_t* s = sheet->readStr(2, 1);
            if(s) wcout << s << endl;

            double d = sheet->readNum(3, 1);
            cout << d << endl;
        }
    } 
```

**我认为最好的办法是将文件保存`.csv`为更易于使用的文件。**

更多参考：

1.  [什么是用于处理 Excel 文件的简单可靠的 C 库？](https://stackoverflow.com/questions/493111/what-is-a-simple-and-reliable-c-library-for-working-with-excel-files)

2.  [在 C++ 中读取和写入 Excel 文件](http://www.codeproject.com/Questions/417270/Reading-from-and-writing-to-Excel-files-in-Cpluspl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:19:03.750

Excel 2007 之前的 Excel 版本使用专有的二进制格式，但 Excel 2007 及更高版本使用 XML（[维基百科写道](http://en.wikipedia.org/wiki/Microsoft_Excel#File_formats)）。

[还有一个](http://www.codeproject.com/Articles/42504/ExcelFormat-Library)用于处理 Excel 文件的 C++ 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-13T17:18:39.080

对于写作，使用：

[https://sourceforge.net/projects/simplexlsx/](https://sourceforge.net/projects/simplexlsx/)

对于阅读，我使用：

sourceforge.net/projects/xlsxio/?source=directory

此外，对于 xlsxio，我编写了一个 OO 包装器，以使其对 c++ 集成更加友好。它只支持阅读，但无论如何你都应该使用 simplexlsx 来写作！

```
#include "XlsxBook.h"
#include "XlsxSheet.h" 
```

[https://drive.google.com/file/d/0B_HJu4VOsY8hMnRla2NMOEM3Z2M/view?usp=sharing](https://drive.google.com/file/d/0B_HJu4VOsY8hMnRla2NMOEM3Z2M/view?usp=sharing)

# javascript - 让 Heroku 的配置变量在 node.js 中工作

> ID：13200810
> 
> 赞同：18
> 
> 时间：2012-11-02T18:11:37.360
> 
> 标签：javascript, node.js, heroku

我有一个节点应用程序，它有这样一行：

```
var ip = process.env.IP || 'http://localhost'; 
```

我将它与`passport-facebook`节点包一起使用来定义来自 Facebook 身份验证的回调：

```
passport.use(new FacebookStrategy({
clientID: FACEBOOK_APP_ID,
clientSecret: FACEBOOK_APP_SECRET,
callbackURL: ip + ":" + port + "/auth/facebook/callback"
},
  function(accessToken, refreshToken, profile, done) {
    // asynchronous verification, for effect...
    process.nextTick(function () {
      return done(null, profile);
    });
  }
)); 
```

Heroku 似乎不知道`process.env.IP`，所以我继续`config var`在 Heroku 中定义了 a：

```
heroku config:add process.env.IP=http://app.mydomain.com 
```

调试服务器我发现 ip 不是我想要的，但它`http://localhost`与我在第一行代码中定义的后备相同。

如何让节点从 heroku 正确读取配置变量？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-02T18:18:05.027

你想用`heroku config:set IP=http://app.mydomain.com`; 它定义了一个名为 的环境变量`IP`，您可以在 Node.js 中通过`process.env.IP`. 有关详细信息，请参阅[为已部署的应用程序设置配置变量](https://devcenter.heroku.com/articles/config-vars#setting-up-config-vars-for-a-deployed-application)。

# excel - 如何将宏结果设置到excel列中？我是 Macro 的新手，非常基础。请解释一下

> ID：13200811
> 
> 赞同：0
> 
> 时间：2012-11-02T18:11:37.277
> 
> 标签：excel, vba

'需要在excel“Sheet1”的A列中设置employee(0),employee(1)......,employee(25)的值。

```
Sub testingarray()
For n = 0 To n = 25
employee(n) = Chr(n + 65)
Next n
For n = 0 To n = 25
MsgBox employee(n) 
Next n
End Sub

'Tried to use this:** Please say if am wrong
Public Sub putvalue()
Range("A1").Value = employee(0)
'Sheets("Sheet1").Cells(1, 1).Value = employee(n)
n = n + 1
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:17:11.080

您可以使用类似的循环

```
Public Sub putvalue()
dim n as long

For n = 0 To n = 25
employee(n) = Chr(n + 65)
Next n

for n=0 to 25
cells(n+1,1).Value = employee(n)
next n

End Sub 
```

您也可以完全不使用数组：

```
Public Sub putvalue()
dim n as long

for n=0 to 25
cells(n+1,1).Value = Chr(n + 65)
next n

End Sub 
```

甚至更快

```
Public Sub putvalue()
range("A1:A26").formular1c1= "=char(row()+64)"
range("A1:A26").value=range("A1:A26").value

End Sub 
```

# amazon-ec2 - 如何为弹性豆茎实例添加多个键？

> ID：13200815
> 
> 赞同：37
> 
> 时间：2012-11-02T18:11:56.937
> 
> 标签：amazon-ec2, amazon-web-services, ssh-keys, amazon-elastic-beanstalk

[[How to] SSH to Elastic [an] Beanstalk instance](https://stackoverflow.com/questions/4742478/ssh-to-elastic-beanstalk-instance)有一个很好的问题，但我注意到的一件事是，通过这种方法，只能添加一个 SSH 密钥。

如何向一个实例添加多个 SSH 密钥？有没有办法自动将多个键添加到新实例？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-11-20T01:14:33.330

创建一个名为的文件`.ebextensions/authorized_keys.config`是另一种方法。

```
files:
  /home/ec2-user/.ssh/authorized_keys:
    mode: "000400"
    owner: ec2-user
    group: ec2-user
    content: |
      ssh-rsa AAAB3N...QcGskx keyname
      ssh-rsa BBRdt5...LguTtp another-key 
```

文件名`authorized_keys.config`是任意的。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-06-22T18:51:22.820

结合 rhunwicks 和 rch850 的答案，这是一种添加额外 SSH 密钥的干净方法，同时通过 AWS 控制台保留一组密钥：

```
files:
  /home/ec2-user/.ssh/extra_authorized_keys:
    mode: "000400"
    owner: ec2-user
    group: ec2-user
    content: |
      ssh-rsa AAAB3N...QcGskx keyname
      ssh-rsa BBRdt5...LguTtp another-key
commands:
  01_append_keys:
    cwd: /home/ec2-user/.ssh/
    command: sort -u extra_authorized_keys authorized_keys -o authorized_keys
  99_rm_extra_keys:
    cwd: /home/ec2-user/.ssh/
    command: rm extra_authorized_keys 
```

请注意，`eb ssh`仅当私有密钥文件与 AWS 控制台中定义的私有密钥同名时才有效。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-05-27T15:18:54.833

继 Jim Flanagan 的回答之后，您可以通过`.ebextensions/app.config`在应用程序源目录中创建内容来将密钥添加到每个实例中：

```
commands:
  copy_ssh_key_userA: 
    command: echo "ssh-rsa AAAB3N...QcGskx userA" >> /home/ec2-user/.ssh/authorized_keys
  copy_ssh_key_userB: 
    command: echo "ssh-rsa BBRdt5...LguTtp userB" >> /home/ec2-user/.ssh/authorized_keys 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-11-20T16:51:02.553

不可以，Elastic Beanstalk 仅支持单个密钥对。您可以手动将 SSH 密钥添加到`authorized_keys`文件中，但 Elastic Beanstalk 工具不会知道这些密钥。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-11-02T20:16:34.220

您可以完成此操作的一种方法是创建一个用户数据脚本，该脚本将您要使用的其他密钥对的公钥附加到 ~ec2-user/.ssh/authorized_keys，并使用该用户数据启动实例，例如：

```
#!
echo ssh-rsa AAAB3N...QcGskx keyname >> ~ec2-user/.ssh/authorized_keys
echo ssh-rsa BBRdt5...LguTtp another-key >> ~ec2-user/.ssh/authorized_keys 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-09-17T21:25:53.003

# The most dynamic way to add multiple SSH keys to Elastic Beanstalk EC2 instances

## Step 1

Create a group in IAM. Call it something like `beanstalk-access`. Add the users who need SSH access to that group in IAM. Also add their public ssh key(s) to their IAM `Security credentials`.

## Step 2

The deployment script below will be parsing JSON data from AWS CLI using a handy Linux tool called `jq` ([jq official tutorial](https://stedolan.github.io/jq/tutorial/)), so we need to add it in .ebextensions:

```
 packages:
    yum:
      jq: [] 
```

## Step 3

Add the following BASH deployment script to .ebextensions:

```
 files:
    "/opt/elasticbeanstalk/hooks/appdeploy/post/980_beanstalk_ssh.sh":
      mode: "000755"
      owner: ec2-user
      group: ec2-user
      content: |
        #!/bin/bash
        rm -f /home/ec2-user/.ssh/authorized_keys
        users=$(aws iam get-group --group-name beanstalk-access | jq '.["Users"] | [.[].UserName]')
        readarray -t users_array < <(jq -r '.[]' <<<"$users")
        declare -p users_array
        for i in "${users_array[@]}"
        do
        user_keys=$(aws iam list-ssh-public-keys --user-name $i)
        keys=$(echo $user_keys | jq '.["SSHPublicKeys"] | [.[].SSHPublicKeyId]')
        readarray -t keys_array < <(jq -r '.[]' <<<"$keys")
        declare -p keys_array
        for j in "${keys_array[@]}"
        do
        ssh_public_key=$(aws iam get-ssh-public-key --encoding SSH --user-name $i --ssh-public-key-id $j | jq '.["SSHPublicKey"] .SSHPublicKeyBody' | tr -d \")
        echo $ssh_public_key >> /home/ec2-user/.ssh/authorized_keys
        done
        done
        chmod 600 /home/ec2-user/.ssh/authorized_keys
        chown ec2-user:ec2-user /home/ec2-user/.ssh/authorized_keys 
```

Unfortunately, because this is YAML, you can't indent the code to make it more easily readable. But let's break down what's happening:

*   (In the code snippet directly below) We're removing the default SSH key file to give full control of that list to this deployment script.

    ```
     rm -f /home/ec2-user/.ssh/authorized_keys 
    ```

*   (In the code snippet directly below) Using AWS CLI, we're getting the list of users in the `beanstalk-access` group, and then we're piping that JSON list into `jq` to extract only that list of `$users.

    ```
     users=$(aws iam get-group --group-name beanstalk-access | jq '.["Users"] | [.[].UserName]') 
    ```

*   (In the code snippet directly below) Here, we're converting that JSON `$users` list into a BASH array and calling it `$users_array`.

    readarray -t users_array < <(jq -r '.[]' <<<"$users") declare -p users_array

*   (In the code snippet directly below) We begin looping through the array of users.

    ```
     for i in "${users_array[@]}"
      do 
    ```

*   (In the code snippet directly below) This can probably be done in one line, but it's grabbing the list of SSH keys associated to each user in the `beanstalk-access` group. It has not yet turned it into a BASH array, it's still a JSON list.

    ```
     user_keys=$(aws iam list-ssh-public-keys --user-name $i)
      keys=$(echo $user_keys | jq '.["SSHPublicKeys"] | [.[].SSHPublicKeyId]') 
    ```

*   (In the code snippet directly below) Now it's converting that JSON list of each users' SSH keys into a BASH array.

    ```
     readarray -t keys_array < <(jq -r '.[]' <<<"$keys")
     declare -p keys_array 
    ```

*   (In the code snippet directly below) Now it's converting that JSON list into a BASH array.

    ```
     readarray -t keys_array < <(jq -r '.[]' <<<"$keys")
     declare -p keys_array 
    ```

*   (In the code snippet directly below) Now we loop through each user's array of SSH keys.

    ```
     for j in "${keys_array[@]}"
     do 
    ```

*   (In the code snippet directly below) We're adding each SSH key for each user to the `authorized_keys` file.

    ```
    ssh_public_key=$(aws iam get-ssh-public-key --encoding SSH --user-name $i --ssh-public-key-id $j | jq '.["SSHPublicKey"] .SSHPublicKeyBody' | tr -d \")
    echo $ssh_public_key >> /home/ec2-user/.ssh/authorized_keys 
    ```

*   (In the code snippet directly below) Close out both the `$users_array` loop and `$users_keys` loop.

    ```
    done
    done 
    ```

*   (In the code snippet directly below) Give the `authorized_keys` file the same permissions it originally had.

    ```
    chmod 600 /home/ec2-user/.ssh/authorized_keys
    chown ec2-user:ec2-user /home/ec2-user/.ssh/authorized_keys 
    ```

## Step 4

If your Elastic Beanstalk EC2 instance is in a public subnet, you can just ssh into it using:

`ssh ec2-user@ip-address -i /path/to/private/key`

If your Elastic Beanstalk EC2 instance is in a private subnet (as it should be for cloud security best practices), then you will need to have a "bastion server" EC2 instance which will act as the gateway for tunneling all SSH access to EC2 instances. Look up `ssh agent forwarding` or `ssh proxy commands` to get an idea of how to accomplish SSH tunneling.

## Adding new users

All you do is add them to your IAM `beanstalk-access` group and run a deployment, and that script will add them to your Elastic Beanstalk instances.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-21T17:06:21.347

instead of running `echo` and storing your keys on Git, you can upload your public keys to IAM user's on AWS and than do:

```
commands:
  copy_ssh_key_userA: 
    command: rm -f /home/ec2-user/.ssh/authorized_keys;aws iam list-users --query "Users[].[UserName]" --output text | while read User; do aws iam list-ssh-public-keys --user-name "$User" --query "SSHPublicKeys[?Status == 'Active'].[SSHPublicKeyId]" --output text | while read KeyId; do aws iam get-ssh-public-key --user-name "$User" --ssh-public-key-id "$KeyId" --encoding SSH --query "SSHPublicKey.SSHPublicKeyBody" --output text >> /home/ec2-user/.ssh/authorized_keys; done; done; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-23T19:10:21.857

[https://stackoverflow.com/a/16776129/7459377](https://stackoverflow.com/a/16776129/7459377)

最简单的方法——比如@rhunwicks，但在第一个副本上有一个“>”符号：

问候。

# c# - 使用 Ninject 将超级接口绑定到子接口

> ID：13200818
> 
> 赞同：0
> 
> 时间：2012-11-02T18:12:16.607
> 
> 标签：c#, ninject

此代码不起作用。我基本上有一些超接口和子接口的实现。我希望超级接口返回所有实现，子接口只返回子实现。我不想明确地将子实现绑定到子接口和超级接口。我只想将它绑定到子接口并以某种方式将子绑定到超级。我正在尝试像这样设置它，但它不起作用：

```
class Program
{
    static void Main(string[] args)
    {
        IKernel kernel = new StandardKernel();
        kernel.Bind<ISuperInterface>().To<ISubInterface>(); // What can I do instead of this?
        kernel.Bind<ISuperInterface>().To<SuperImplementation>();
        kernel.Bind<ISubInterface>().To<SubImplementation>();

        var subs = kernel.GetAll<ISubInterface>(); // I want this to return a SubImplementation
        var supers = kernel.GetAll<ISuperInterface>(); // I want this to return a SuperImplementation and a SubImplementation

        Console.WriteLine(subs.Count());
        Console.WriteLine(supers.Count());
    }
}

public class SubImplementation : ISubInterface
{
}

public class SuperImplementation : ISuperInterface
{
}

public interface ISuperInterface
{
}

public interface ISubInterface : ISuperInterface
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:11:51.737

Ninject 支持接口隔离：

```
kernel.Bind<ISuperInterface>().To<SuperImplementation>();
kernel.Bind<ISuperInterface, ISubInterface>().To<SubImplementation>(); 
```

或者，如果您正在使用约定，您可以使用`BindAlInterfaces`

# r - 使用 stringr 中的 str_sub 替换向量的所有元素中的字符

> ID：13200821
> 
> 赞同：0
> 
> 时间：2012-11-02T18:12:23.030
> 
> 标签：r

我正在尝试替换字符串向量的所有元素中的字符，其中字符不同，但始终与字符串的开头或结尾有一定距离。我可以`substr`成功地使用替换字符串开头的字符。我试图`str_sub`从包中使用`stringr`来替换字符串末尾的字符（因为它允许用负数倒数）。它替换了字符，但对于第一个元素之后的所有元素，它将字符右侧的所有内容替换为第一个元素的字符串末尾：

```
> require(stringr)
> x <- c("A'B'C","E!FG@H","I$JKL&M")
> substr(x,2,2) <- ":"
> x
[1] "A:B'C"   "E:FG@H"  "I:JKL&M"
> str_sub(x,-2,-2) <- ":"
> x
[1] "A:B:C"   "E:FG:C"  "I:JKL:C" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T18:30:35.247

试试这个：

```
require(stringr)
x <- c("A'B'C","E!FG@H","I$JKL&M")
substr(x,2,2) <- ":"
str_sub(x, rep(-2, length(x)),  rep(-2, length(x))) <- ":" 
```

它表现得像这样的原因是因为通过 str_c`str_sub<-`传递了结果，这对你来说是崩溃的地方。`str_sub(x, start, end)`

源代码中的函数是：

```
"str_sub<-" <- function(string, start = 1L, end = -1L, value) {
     str_c(
        str_sub(string, end = start - 1L),
        value,
        ifelse(end == -1L, "", str_sub(string, start = end + 1L)))
 } 
```

因此，我们有效地将三个参数传递给`str_c`函数，一个或多个字符向量、一个插入字符串和一个折叠参数（ifelse 位）。如果`str_sub`不使用赋值函数运行的结果是（如果我们已经运行了第一个str_sub：

```
> (test.string <- str_sub(x, start = 1L, end = -2 - 1L)) #start defaults to 1L
[1] "A:B"   "E:FG"  "I:JKL"
> replace.string <- ":"
> (collapse.string <- ifelse(end == -1L, "", str_sub(string, start = end + 1L)))
[1] "C"
> str_c(test.string, replace.string, collapse.string)
[1] "A:B:C"   "E:FG:C"  "I:JKL:C" 
```

因此，首先我们将所有内容保存到要替换的符号左侧，然后设置折叠参数。折叠参数有点有趣，如果你查看 str_c 的文档，你会发现它说

> 如果 collapse 是...非'NULL'，则在每行的末尾插入该字符串，并且整个矩阵折叠为单个字符串。

所以这正是这里发生的事情，当我们替换我们的字符串时，它会将折叠参数添加到我们每个字符串的末尾。

但实际上，如果不使用 ifelse 函数，这将起作用，因为没有 ifelse，`str_sub(string, start = end + 1L)`将返回`[1] "C" "H" "M"`而不是仅获取第一个索引“C”。

所以这就是为什么当我们添加 c(-2, -2, -2) 的开始和结束值时，我们可以得到正确的答案：

```
> (test.string <- str_sub(x, start = 1L, end = c(-2, -2, -2) - 1L)) #start defaults to 1L
[1] "A:B"   "E:FG"  "I:JKL"
> replace.string <- ":"
> (collapse.string <- ifelse(end == -1L, "", str_sub(string, start = c(-2, -2, -2) + 1L)))
[1]  "C" "H" "M"
> str_c(test.string, replace.string, collapse.string)
[1] "A:B:C"   "E:FG:C"  "I:JKL:C" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:25:10.403

不知道问题出在哪里`str_sub`，但你可以自己动手：

```
my_sub <- function(x,n,s) {
  N <- nchar(x)-n+1
  substr(x,n,n) <- substr(x,N,N) <- s
  x 
}
my_sub(x,2,":")
# [1] "A:B:C"   "E:FG:H"  "I:JKL:M" 
```

# c# - 根据屏幕分辨率选择图像

> ID：13200832
> 
> 赞同：0
> 
> 时间：2012-11-02T18:13:05.540
> 
> 标签：c#, xaml, windows-8, windows-runtime, screen-resolution

我正在使用 XAML/C# 开发 Windows 8 Metro 应用程序。

我在解决方案中添加了每个图像的缩放版本以支持不同的屏幕分辨率。

每个图像将有 2 个不同大小的附加副本 (100,140,​​180 %)。

例如：sample_100.png,sample_140.png,sample_180.png

现在我想知道如何根据屏幕分辨率选择正确的图像？

我们使用转换器是一个好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:39:37.963

如果您正确命名它们，则无需执行任何操作。如果你使用像这样的名字

*   样本.scale-100.png
*   样本.scale-140.png
*   sample.scale-180.png

然后您只需键入 sample.png 即可在 XAML 中使用它们。它会自动选择具有正确资源限定符的那个。

查看这篇 msdn 文章：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965324.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965324.aspx)

# bash - 如何测试 Bash 4.2 中是否存在数组键？

> ID：13200834
> 
> 赞同：1
> 
> 时间：2012-11-02T18:13:16.570
> 
> 标签：bash, associative-array

我得出的最接近的解决方案是：

```
declare -A foobar=([foo]=bar [bar]=foo)
(set -u; true ${foobar[foo]}) 2>/dev/null 
```

理想情况下，我想`test -v`用来测试是否定义了数组键。但`test -v foobar[bar]`显然总是返回`1`。此外，我不想要全局`set +u`并冒着访问未定义变量的风险。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:13:57.473

```
keys=" ${!foobar[*]} "
wanted=foo
if [[ $keys == *" $wanted "* ]]; then
    echo "foobar contains key $wanted"
else
    echo "key $wanted not present"
fi 
```

如果键可能包含空格，或者如果想要的键恰好是“bar foo”或连续键的某种组合，这可能会失败。

更新：这可能效率较低，但它既安全（空白）又更清晰：

```
for key in "${!foobar[@]}"; do
    if [[ $key = $wanted ]]; then
        echo "foobar contains key $wanted"
        break
    fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:30:59.773

从 bash 版本“4.2.39(1)-release”开始，我看不到如何使用命令测试数组键的存在`test -v`。`test -v foobar[foo]`只是总是失败。对我来说，最好的选择看起来应该使用`${foobar[foo]-bar}`参数替换进行测试。为了使用 shopt 的`nounset`shell 选项和每个新版本重新测试 Bash 的行为，我编写了以下 Bash shell 脚本：

```
#!/bin/bash

shopt -os nounset

declare -ri colors=1
if (( "$colors" )); then
  declare -r bold="\e[1m"
  declare -r red="\e[41m"
  declare -r green="\e[42m"
  declare -r end="\e[0;m"
else
  declare -r bold=
  declare -r red=
  declare -r green=
  declare -r end=
fi
declare -ri a="${1:-0}"
case "$a" in
  1)
    echo -e "$a. Accessing ${bold}\"\$foobar\"${end} when unset should result in an error."
    echo "$foobar"
    ;;
  2)
    echo -e "$a. Accessing ${bold}\"\${foobar-bar}\"${end} when unset should result in the \"bar\" default value."
    echo "${foobar-bar}"
    ;;
  3)
    echo -e "$a. Accessing ${bold}\"\${foobar:-bar}\"${end} when unset should result in the \"bar\" default value."
    echo "${foobar:-bar}"
    ;;
  4)
    echo -e "$a. Accessing ${bold}\"\$foobar\"${end} when set to the NULL string should result in it (whitespace)."
    declare -r foobar=
    echo "$foobar"
    ;;
  5)
    echo -e "$a. Accesssing ${bold}\"\${foobar-bar}\"${end} when set to the NULL string should result in it (whitespace)."
    declare -r foobar=
    echo "${foobar-bar}"
    ;;
  6)
    echo -e "$a. Accesssing ${bold}\"\${foobar:-bar}\"${end} when set to the NULL string should result in the \"bar\" default value."
    declare -r foobar=
    echo "${foobar:-bar}"
    ;;
  7)
    echo -e "$a. Accessing ${bold}\"\$foobar\"${end} when set to the \"foo\" string should result in it."
    declare -r foobar=foo
    echo "$foobar"
    ;;
  8)
    echo -e "$a. Accessing ${bold}\"\${foobar-bar}\"${end} when set to the \"foo\" string should result in it."
    declare -r foobar=foo
    echo "${foobar-bar}"
    ;;
  9)
    echo -e "$a. Accessing ${bold}\"\${foobar:-bar}\"${end} when set to the \"foo\" string should result in it."
    declare -r foobar=foo
    echo "${foobar:-bar}"
    ;;
  10)
    echo -e "$a. Accessing ${bold}\"\${foobar[foo]}\"${end} when unset should result in an error."
    declare -rA foobar=()
    echo "${foobar[foo]}"
    ;;
  11)
    echo -e "$a. Accessing ${bold}\"\${foobar[foo]-bar}\"${end} when unset should result in the \"bar\" default value."
    declare -rA foobar=()
    echo "${foobar[foo]-bar}"
    ;;
  12)
    echo -e "$a. Accessing ${bold}\"\${foobar[foo]:-bar}\"${end} when unset should result in the \"bar\" default value."
    declare -rA foobar=()
    echo "${foobar[foo]:-bar}"
    ;;
  13)
    echo -e "$a. Accessing ${bold}\"\${foobar[foo]}\"${end} when set to the NULL string should result in it (whitespace)."
    declare -rA foobar=([foo]=)
    echo "${foobar[foo]}"
    ;;
  14)
    echo -e "$a. Accessing ${bold}\"\${foobar[foo]-bar}\"${end} when set to the NULL string should result in it (whitespace)."
    declare -rA foobar=([foo]=)
    echo "${foobar[foo]-bar}"
    ;;
  15)
    echo -e "$a. Accessing ${bold}\"\${foobar[foo]:-bar}\"${end} when set to the NULL string should result in the \"bar\" default value."
    declare -rA foobar=([foo]=)
    echo "${foobar[foo]:-bar}"
    ;;
  16)
    echo -e "$a. Testing with ${bold}\"test -v foobar\"${end} when unset should fail."
    test -v foobar
    ;;
  17)
    echo -e "$a. Testing with ${bold}\"test -v foobar\"${end} when set to the NULL string should succeed."
    declare -r foobar=
    test -v foobar
    ;;
  18)
    echo -e "$a. Testing with ${bold}\"test -v foobar\"${end} when set to the \"bar\" string should succeed."
    declare -r foobar=
    test -v foobar
    ;;
  19)
    echo -e "$a. Testing with ${bold}\"test -v foobar[foo]\"${end} when unset should fail."
    declare -rA foobar=()
    test -v foobar[foo]
    ;;
  20)
    echo -e "$a. Testing with ${bold}\"test -v foobar[foo]\"${end} when set to the NULL string should fail."
    declare -rA foobar=([foo]=)
    test -v foobar[foo]
    ;;
  21)
    echo -e "$a. Testing with ${bold}\"test -v foobar[foo]\"${end} when set to the \"bar\" string should succeed."
    declare -rA foobar=([foo]=bar)
    test -v foobar[foo]
    ;;
  0)
    echo -e "Testing shopt's \"nounset\" shell option with Bash version \"$BASH_VERSION\"."
    echo
    declare -i b
    for ((b=1; b<=21; b+=1)); do
      "$0" "$b"
      if (( "$?" )); then
        echo -e "${red}Failure.${end}"
      else
        echo -e "${green}Success.${end}"
      fi
      echo
    done
    ;;
esac 
```

# wikipedia - 从 curid 获取 Wikipedia 主题标题

> ID：13200835
> 
> 赞同：2
> 
> 时间：2012-11-02T18:13:18.950
> 
> 标签：wikipedia, wikipedia-api

我将 Wikipedia 页面指定为：我可以解析 curid 并使用它来获取特定的 Wiki 页面。

问题：如何使用此 curid 获取 Wikipedia 主题标题？当 curid=37274 并且页面是关于“华尔街”时，我正在尝试如下。我想在给定 page_id 的情况下提取这个“华尔街”： `http://en.wikipedia.org/w/api.php?action=query&pageids=37274&format=xml`

我可以解析这个查询的输出。但是有没有更简单的方法来获得这个？顺便说一句，我使用 Java ..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:02:05.363

我不知道有什么更简单的方法可以做到这一点。如果您告诉我们您特别觉得该方法有哪些不便之处，也许会有所帮助。

如果你不喜欢解析 XML，你可以得到[其他几种格式](http://www.mediawiki.org/wiki/API%3aData_formats)的结果，包括 JSON。

另外，可以肯定的是，您确实知道可以[通过一个查询解析多个页面 ID](http://en.wikipedia.org/w/api.php?action=query&pageids=37274|12345|11111|1)，对吗？

# hamming-code - 汉明码查找错误

> ID：13200837
> 
> 赞同：0
> 
> 时间：2012-11-02T18:13:33.060
> 
> 标签：hamming-code

一条 4 位消息已使用汉明码 H(7,4) 进行编码，并通过可能有噪声的信道传输，最多有一个错误。收到消息 0100101（二进制）。

你好，

我在 Parity 6 发现了一个错误，原来的 4 位消息是 0100111。我被告知我错了。有人可以帮忙解释一下原因吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:59:41.477

H(7,4)中只有三个奇偶校验位；这些位位于（单索引）位置 1、2 和 4。没有要检查的“奇偶校验 6”。让我们检查收到的消息：

1.  位置 1 的奇偶校验位 1 覆盖位 1、3、5 和 7。这些位分别为 0、0、1 和 1。我们取这些位的总和，即为 2。这是一个偶数和，因此我们假设该位是安全的。

2.  位置 2 的奇偶校验位 2 覆盖位 2、3、6 和 7。这些位分别为 1、0、0 和 1。同样，这些位的总和是偶数，因此不存在问题。

3.  位置 4 的奇偶校验位 3 覆盖位 4、5、6 和 7。这些位分别为 0、1、0 和 1。总和是偶数，所以这里也没有问题。

奇偶校验全部加起来，因此接收到的消息中没有错误迹象。

# asp.net-mvc - MVC 的 OAuth 2.0 - RequestToken 如何工作？

> ID：13200846
> 
> 赞同：0
> 
> 时间：2012-11-02T18:13:55.553
> 
> 标签：asp.net-mvc, oauth-2.0

我正在使用 MVC 的 OAuth 2.0，可在此处找到：http: [//community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged -实现.aspx](http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged-implementation.aspx)

对于与此有关的任何人-我对 RequestToken 感到困惑。实现了一个控制器，可让您获得一个请求令牌，该令牌将在 5 分钟后过期，然后您将该令牌传回以获取 AccessToken。但它从不检查请求令牌的有效性 - 似乎您可以传入任何您想要的访问令牌。此处 RequestToken 的想法是什么 - 您是否应该在这 5 分钟内创建自己的存储、引用和删除该令牌的方法？

谢谢，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:46:11.827

这就是 OAuth 如何与您的应用程序 ID、应用程序密钥和应用程序的有效域一起工作的全部内容。这是一般的过程

1.  您的应用程序使用您的应用程序 ID 和密码以及回调（返回 Url）向 OAuth 提供者发送请求。

2.  OAuth 提供者获取请求，检查您的应用程序 ID 和密码，并验证回调 url 来自您为应用程序指定的域。

    2a. 如果回调 url 不是来自您指定的域，则请求将被拒绝并出现错误。

    2b 如果回调 url 来自您的域，它会向您的服务器返回一个临时请求密钥。

3.  鉴于您收到了请求密钥，您将其发送回 OAuth 提供者以获取用户的实际访问令牌。

现在，至于为什么需要请求密钥步骤，这是为了防止和帮助保护“坏人”尝试使用您的应用程序 ID 对其他用户进行虚假身份验证。通过向您发送请求令牌（您已批准的回调 URL），OAuth 提供者确信请求实际上来自您的服务器。

您当然可以发送回任何字符串而不是请求令牌，但您会很快从 OAuth 提供者那里收到错误消息，因为该请求令牌与任何已知应用程序的任何现有身份验证请求都不对应。

最后，我不清楚您所说的“验证请求令牌”是什么意思？您没有生成令牌，可能不了解生成请求令牌的算法。鉴于此，我不确定您将如何验证这一点。如果您担心验证第一步，请查看 Facebook OAuth 流程。在那里，他们建议发送请求密钥作为返回 URL 的一部分（作为查询字符串参数）。该请求密钥将返回到您的应用程序，然后您可以将其用作验证，实际上，这是对您提出的请求的响应。如何存储和跟踪请求密钥取决于您（会话、数据库）。在 PHP 示例中，他们使用“状态”变量来跟踪唯一/任意字符串： [Facebook OAuth 服务器端登录示例（在 PHP 中）](http://developers.facebook.com/docs/howtos/login/server-side-login/)

# ios - UINavigationBar 按钮在栏下方发生触摸时触发

> ID：13200850
> 
> 赞同：0
> 
> 时间：2012-11-02T18:14:09.847
> 
> 标签：ios, uinavigationbar

似乎导航栏按钮项目接受触摸实际栏下方的一些像素。这给我带来了问题，因为我在导航栏正下方有另一个 UIView，但它不会接收触摸事件，除非您在其 y 原点下方 16 像素处触摸它。

除了我自己的项目之外，我已经在几个项目上对此进行了测试，它们似乎都表现得这样。这是预期的行为吗？有没有办法阻止它发生？

我正在使用 IOS 6 进行开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:16:52.953

您可以使用自定义按钮为该视图创建自己的导航栏。

# jquery - Jquery 悬停隐藏/显示：setTimeout clearTimeout

> ID：13200855
> 
> 赞同：0
> 
> 时间：2012-11-02T18:14:33.100
> 
> 标签：jquery, hover, settimeout

所以我有一个元素（链接），它通过悬停在另一个元素（目标）上来控制它的可见性。当鼠标悬停链接时，目标应该变为可见，当鼠标离开时，目标应该在 2 秒后变为不可见。

到目前为止，一切都很好。但是我该如何做到这一点，如果鼠标在 2 秒上升之前悬停在可见目标上，目标仍然可见？

我让它与 setTimeout 和 clearTimeout 一起工作，但它确实有问题，而且感觉一点也不好。

```
var time = 1000;
$(".link").hover(

      function () {
        $('.target').css('display', 'none');
        clearTimeout($(this).data('timeout'));
          $('.target').css({'display': 'block'});
      },

      function () { 

        var timer = setTimeout(function() {$('.target').fadeOut(1000).delay(100).css('display', 'none'); clearTimeout(timer); }, time);

        $('.target').hover(
              function () {
                clearTimeout(timer);
              },
              function () {
                var timer = setTimeout(function() {$('.target').fadeOut(1000).delay(100).css('display', 'none'); clearTimeout(timer); }, time);
              }
            );        
      }

); ​ 
```

( [http://jsfiddle.net/VfDkq/](http://jsfiddle.net/VfDkq/) )

任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:29:44.893

尝试重构您的代码：

```
(function() {

    var time = 1000,
        timer;

    function handlerIn() {
        clearTimeout(timer);
        $('.target').stop(true).css('opacity', 1).show();
    }
    function handlerOut() {
        timer = setTimeout(function() {
            $('.target').fadeOut(3000);
        }, time);
    }

    $(".link, .target").hover(handlerIn, handlerOut);

}()); 
```

[**现场演示**](http://jsfiddle.net/VfDkq/6/)

这应该非常接近您描述的行为。我还添加了一条额外的行，以便`mouseenter`在它淡出时立即显示它，正如您在`handlerIn`.

* * *

我从您的代码中删除的几个错误：

*   您在其中一个处理程序中声明了另一个`timer`var `mouseleave`，无法在任何地方取消。`timer`必须在公共范围内可访问；
*   您在同步方法之前应用了动画延迟`.css`，这没有效果；
*   在 a 完成后设置`display`to是没有意义的，它会自动这样做；`none`[`fadeOut`](http://api.jquery.com/fadeOut/)
*   `setTimeout`在它执行之后也没有必要清除 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:22:06.110

您使用了过多的延迟和淡出持续时间。浏览器不喜欢它。你介意用 hide() 代替那些吗？

[http://jsfiddle.net/VfDkq/4/](http://jsfiddle.net/VfDkq/4/)

```
 var timer = setTimeout(function() {$('.target').hide().css('display', 'none'); clearTimeout(timer); } 
```

或者您可以减少延迟时间和淡出持续时间。

# apache-flex - 如何清除组的显式宽度和高度

> ID：13200857
> 
> 赞同：1
> 
> 时间：2012-11-02T18:14:46.003
> 
> 标签：apache-flex, flex4, flex-spark

我有一个按其包含的内容调整大小的组，但要使用 Tweener 执行转换，我必须设置宽度和高度属性。动画完成后，我将如何清除显式宽度和高度属性，以便 Group 根据其内容返回大小调整？

前：

```
<s:Group ><content.../></s:Group> 
```

代码：

```
width = 250;
height = 250;
Tweener.addTween(this, {width:500, height:500, time:0.25, onComplete:openAnimationComplete}); 
```

在补间之后，组被有效地设置为 500x500，就好像它是这样的：

```
<s:Group width="500" height="500" ><content /></s:Group> 
```

我希望它回到这个：

```
<s:Group ><content /></s:Group> 
```

 **使用 Flextras 的解决方案**更新测试代码：****

 **```
<fx:Script>
    <![CDATA[
        protected function button1_clickHandler(event:MouseEvent):void
        {
            var w:Object = myGroup.width;
            var h:Object = myGroup.height;

            if (myGroup.width!=300) {
                myGroup.width = 300;
                myGroup.height = 300;
            }
            else {
                myGroup.width = NaN;
                myGroup.height = NaN;

                w = myGroup.width; // NaN
                h = myGroup.height; // NaN

                //myGroup.validateNow()
                if (myGroup.parent is IInvalidating) {
                    IInvalidating(myGroup.parent).validateNow();
                }

                w = myGroup.width; // 600
                h = myGroup.height; // 100
            }

        }
    ]]>
</fx:Script>

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<s:Group id="myGroup" minHeight="0" minWidth="0" clipAndEnableScrolling="true">     
    <s:Button width="600" height="100" label="here is a button" click="button1_clickHandler(event)"/>
</s:Group> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T20:31:41.193

将高度和宽度设置为 NaN；这将有效地告诉 Flex 框架“我不知道这个值是什么”，然后将在组件下次呈现自身时执行 measure() 事件；导致它更新measuredHeight和measuredWidth属性；父容器又将使用它来调整组的大小。**

# c++ - C++：为什么这会加快我的代码速度？

> ID：13200858
> 
> 赞同：4
> 
> 时间：2012-11-02T18:14:49.170
> 
> 标签：c++, performance, gcc

我有以下功能

```
double single_channel_add(int patch_top_left_row, int patch_top_left_col, 
        int image_hash_key, 
        Mat* preloaded_images,
        int* random_values){

    int first_pixel_row = patch_top_left_row + random_values[0];
    int first_pixel_col = patch_top_left_col + random_values[1];
    int second_pixel_row = patch_top_left_row + random_values[2];
    int second_pixel_col = patch_top_left_col + random_values[3];

    int channel = random_values[4];

    Vec3b* first_pixel_bgr = preloaded_images[image_hash_key].ptr<Vec3b>(first_pixel_row, first_pixel_col);
    Vec3b* second_pixel_bgr = preloaded_images[image_hash_key].ptr<Vec3b>(second_pixel_row, second_pixel_col);

    return (*first_pixel_bgr)[channel] + (*second_pixel_bgr)[channel];
} 
```

这被调用了大约一百万次，对于`patch_top_left_row`和具有不同的值`patch_top_left_col`。这需要大约 2 秒的时间来运行，现在当我将 first_pixel_row 等的计算更改为不使用参数而是使用硬编码数字（如下所示）时，事情会在亚秒内运行，我不知道为什么。编译器在这里做一些聪明的事情吗（我正在使用 gcc 交叉编译器）？

```
double single_channel_add(int patch_top_left_row, int patch_top_left_col, 
        int image_hash_key, 
        Mat* preloaded_images,
        int* random_values){

        int first_pixel_row = 5 + random_values[0];
        int first_pixel_col = 6 + random_values[1];
        int second_pixel_row = 8 + random_values[2];
        int second_pixel_col = 10 + random_values[3];
            int channel = random_values[4];

    Vec3b* first_pixel_bgr = preloaded_images[image_hash_key].ptr<Vec3b>(first_pixel_row, first_pixel_col);
    Vec3b* second_pixel_bgr = preloaded_images[image_hash_key].ptr<Vec3b>(second_pixel_row, second_pixel_col);

    return (*first_pixel_bgr)[channel] + (*second_pixel_bgr)[channel];
} 
```

编辑：

我已经使用参数从函数的两个版本粘贴了程序集：http: [//pastebin.com/tpCi8c0F](http://pastebin.com/tpCi8c0F) 使用常量： http: [//pastebin.com/bV0d7QH7](http://pastebin.com/bV0d7QH7)

编辑：

使用 -O3 编译后，我得到以下时钟滴答和速度：

使用参数：1990000 滴答和 1.99 秒使用常量：330000 滴答和 0.33 秒

编辑：使用带有-03编译的参数：http://pastebin.com/fW2HCnHc 使用带有-03编译[的](http://pastebin.com/fW2HCnHc) 常量：http: [//pastebin.com/FHs68Agi](http://pastebin.com/FHs68Agi)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T18:40:51.063

在 x86 平台上，有一些指令可以非常快速地将小整数添加到寄存器中。这些指令是`lea`（又名“加载有效地址”）指令，它们用于计算结构等的地址偏移量。添加的小整数实际上是指令的一部分。智能编译器知道这些指令非常快，即使不涉及地址，也可以使用它们进行加法。

我敢打赌，如果您将常数更改为至少 24 位长的随机值，您会看到大部分加速消失。

其次，这些常数是已知值。编译器可以做很多事情来以最有效的方式将这些值安排在寄存器中。使用参数，除非参数在寄存器中传递（并且我认为您的函数有太多参数无法使用该调用约定），否则编译器别无选择，只能使用堆栈偏移加载指令从内存中获取数字。这不是一个特别慢的指令或任何东西，但是使用常量，编译器可以自由地做一些比简单地从指令本身获取数字要快得多的事情。这些`lea`说明只是最极端的例子。

**编辑：现在您已经粘贴了程序集，事情变得更加清晰**

在非常量代码中，添加的方法如下：

```
addl    -68(%rbp), %eax 
```

这会从堆栈中获取一个偏移量`-68(%rpb)`并将其添加到`%eax%`寄存器中。

在常量代码中，添加是如何完成的：

```
addl    $5, %eax 
```

如果您查看实际数字，您会看到：

```
0138 83C005 
```

很明显，要添加的常量作为一个小值直接编码到指令中。出于多种原因，这将比从堆栈偏移中获取值要快得多。首先它更小。其次，它是没有分支的指令流的一部分。因此它将被预取并流水线化，不会出现任何类型的缓存停顿。

因此，虽然我对指令的猜测`lea`不正确，但我仍然走在正确的轨道上。常量版本使用专门针对向寄存器添加小整数的小指令。非常量版本必须从堆栈偏移量中获取一个可能具有不确定大小的整数（因此它必须获取所有位，而不仅仅是低位）（它添加了一个额外的添加来计算来自偏移量和堆栈基地址）。

**编辑 2：现在您已经发布了`-O3`结果**

嗯，现在更混乱了。它显然是内联了有问题的函数，并且在内联函数的代码和调用函数的代码之间跳跃了一大堆。我将需要查看整个文件的原始代码以进行适当的分析。

但我现在强烈怀疑正在发生的是，从中检索到的值的不可预测性`get_random_number_in_range`严重限制了编译器可用的优化选项。事实上，它看起来在常量版本中甚至都懒得调用`get_random_number_in_range`，因为该值被丢弃并且从未使用过。

* * *

我假设 和 的值`patch_top_left_row`是`patch_top_left_col`在某个循环中生成的。我会把这个循环推到这个函数中。如果编译器知道这些值是作为循环的一部分生成的，那么就有大量的优化选项可供它使用。在极端情况下，它可以使用一些 SIMD 指令，这些指令是各种 SSE 或 3dnow 的一部分！指令套件使事情变得比使用常量的版本更快。

另一种选择是使这个函数内联，这会提示编译器它应该尝试将它插入到调用它的循环中。如果编译器接受了提示（这个函数有点大，所以编译器可能不会），它会产生与将循环填充到函数中一样的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T18:23:38.383

好吧，`immediate constant vs. memory`格式的二进制算术运算预计会产生比`memory vs. memory`格式更快的代码，但是您观察到的时间效应似乎过于极端，特别是考虑到该函数内部还有其他操作。

难道是编译器决定内联你的函数？内联将允许编译器轻松消除与第二版中未使用`patch_top_left_row`和`patch_top_left_col`参数相关的所有内容，包括在调用代码中准备/计算这些参数的任何步骤。

从技术上讲，即使函数没有内联，也可以这样做，但通常更复杂。

# c# - 如何编写允许插件的应用程序？

> ID：13200861
> 
> 赞同：1
> 
> 时间：2012-11-02T18:14:57.543
> 
> 标签：c#, plugins, add-in

我本可以发誓有几个关于这方面的教程，但我似乎找不到它们，并且不记得我过去是如何做到的（已经多年并且在不同的公司）......

我将在 C# 中工作。我认为我所做的是创建一个接口，其中包含应用程序和插件所需的属性/方法来来回通信......

运行应用程序，扫描文件夹中的插件，加载插件并通过前面提到的界面与之交互......

如果以上内容正确，有人可以指出加载插件的示例或更好的教程吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:41:22.280

有很多方法，但很简单：

扫描文件夹：

```
string[] files = System.IO.Directory.GetFiles("yourpath", "*.dll"); 
```

然后加载程序集（对于上面的每个文件）

```
Assembly.Load or Assembly.LoadFrom 
```

从汇编到枚举类型：

```
Type[] types = assembly.GetTypes(); 
```

检查类型是否实现了您的接口

```
Type t;
YourInterface.IsAssignableFrom(t); 
```

然后实例化：

```
object o = Activator.CreateInstance(t);
YourInterface iface = (YourInterface)o; 
```

就是这样，当然省略了异常处理和其他位

一些 DI 包可以为您完成很多工作，具体取决于您的用例，它们可能非常有用，也可能只是矫枉过正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:18:25.697

可能值得一看 Managed Extensibility Framework：

[http://mef.codeplex.com/](http://mef.codeplex.com/)

# rest - REST - 使用什么动词来检查授权

> ID：13200862
> 
> 赞同：6
> 
> 时间：2012-11-02T18:14:58.833
> 
> 标签：rest, http, authentication

我正在设计一个授权服务，其他公共服务将在内部查询该服务，这些公共服务正在接收`Authorization`请求中的标头。

该服务处理授权（一对公钥（user_id）和私钥），它的任务是重新生成签名（HMAC）-它是唯一知道私钥的服务-，所以我认为识别这个是正确的作为服务器资源。然后我认为没有用户就没有授权资源，所以我最终得到了这个基本 URI：

```
/user/:user_id/authorization 
```

然后我设计了 CRUD 操作来处理授权，在创建新用户时创建，在请求时更新，在删除用户时读取和删除。

注意：用户实体由另一个服务处理，我仅使用此 URI 以逻辑方式传递公钥（因为它与用户严格相关）。

我不确定我应该如何从其他服务中查询此服务以说：“嘿，这个键对吗？” 与此请求一起传递重新生成签名所需的所有数据。

**所以我需要的是一种以宁静的方式检查授权的方法**

我已经坚持了这样的事情：

```
GET /user/:user_id/authorization?signature=SOMETHING&data=JSON-DATA-TO-REGENERATE-KEY 
```

但也许，我们也可以看到它正在创建一个新的授权资源（如果没有返回，它不是令牌系统），从而使 PUT 或 POST 更适合此目的。

你的观点是什么？处理这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:51:17.760

> GET /user/:user_id/authorization?signature=SOMETHING&data=JSON-DATA-TO-REGENERATE-KEY

永远不要忘记 GET 方法应该是“[安全](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.1.1)的”。它不应该“具有采取检索以外的行动的意义”。换句话说，客户“不应该请求副作用”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:37:53.520

就我个人而言，我认为获取会话/用户/任何内容的初始授权（登录）应该是一个 POST，因为它（大概）确实创建了一些新的东西：一些授权令牌。

后续的授权验证请求应该是 GET。它们不会创建任何新内容，并且基本上返回一个布尔值（尽管通过响应代码）来指示授权标头是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:44:04.190

> This service handles the authorization (a pair of public key (user_id) and private key)

Are you storing the private key server-side? And are you handling authorization and authentication on the same service?

I would personally prefer an architecture like WebID. See:

*   [http://webid.info](http://webid.info)
*   [http://www.w3.org/wiki/WebID](http://www.w3.org/wiki/WebID)

# android - java.util.zip.GZIPInputStream.close 能否导致android.os.NetworkOnMainThreadException

> ID：13200863
> 
> 赞同：0
> 
> 时间：2012-11-02T18:15:05.250
> 
> 标签：android, android-networking

该应用程序在 2.2.1 和 2.2 上运行良好，但在 4.0.3 上导致以下错误

```
android.os.NetworkOnMainThreadException
at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1178)
at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:163)
at libcore.io.IoBridge.recvfrom(IoBridge.java:503)
at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)
at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)
at org.apache.http.impl.io.AbstractSessionInputBuffer.read(AbstractSessionInputBuffer.java:134)
at org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:161)
at org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:175)
at org.apache.http.impl.io.ChunkedInputStream.exhaustInputStream(ChunkedInputStream.java:289)
at org.apache.http.impl.io.ChunkedInputStream.close(ChunkedInputStream.java:262)
at org.apache.http.conn.BasicManagedEntity.streamClosed(BasicManagedEntity.java:179)
at org.apache.http.conn.EofSensorInputStream.checkClose(EofSensorInputStream.java:266)
at org.apache.http.conn.EofSensorInputStream.close(EofSensorInputStream.java:213)
at java.io.FilterInputStream.close(FilterInputStream.java:64)
at java.util.zip.InflaterInputStream.close(InflaterInputStream.java:256)
at java.util.zip.GZIPInputStream.close(GZIPInputStream.java:148)
at com.myapp.apper.contact.ContactService.a(SourceFile:390)
at com.myapp.apper.contact.ContactService.a(SourceFile:347)
at com.myapp.apper.contact.ContactService.a(SourceFile:41)
at com.myapp.apper.contact.g.a(SourceFile:322)
at com.myapp.apper.contact.q.a(SourceFile:58)
at com.myapp.apper.contact.q.onPostExecute(SourceFile:23)
at android.os.AsyncTask.finish(AsyncTask.java:602)
at android.os.AsyncTask.access$600(AsyncTask.java:156)
at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:154)
at android.app.ActivityThread.main(ActivityThread.java:4974)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

我所有的网络操作都在 AsyncTask 中，从堆栈跟踪看起来错误是由它引起的`java.util.zip.GZIPInputStream.close`，它也指向类似 390 的代码，即`gzipIn.close();`.

GZIPInputStream 是否会导致此错误？如果不是，错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:23:37.567

看起来您正在使用 GZIPInputStream`onPostExecute()`在 UI 线程中运行的异步任务中读取某些内容。从 4.0 开始，UI 线程中不允许有网络连接。我建议在`doInBackground()`方法中移动 GZIPInputStream 读取部分。

Edit1：或者您可以通过以下代码禁用严格模式：

```
if (android.os.Build.VERSION.SDK_INT > 9) {
StrictMode.ThreadPolicy policy = 
        new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy);
} 
```

# javascript - 使用 JavaScript 框架或简单的 html5 + 纯 JavaScript 的最佳交互式 UI？

> ID：13200867
> 
> 赞同：-4
> 
> 时间：2012-11-02T18:15:18.607
> 
> 标签：javascript, html, jquery-ui, frameworks, web

我将从事一个需要丰富 UI 交互和高性能网站的 Web 应用程序项目。

可以显示的所有可能意义上的交互。这包括各种类型的交互，如`keyboard events`、`animations`、`simple yet effective usability`、`drag and drop`等`lightweight (while loading and rendering)`。

我知道一点 ExtJS（Sencha JavaScript 库）、javascript 和一些 html5 编码。

我的问题是

*   我是否需要混合所有可能的可用[JavaScript UI 框架（ExtJS、jQuery、MooTools、Prototype、Angular JS 等）](https://stackoverflow.com/a/2144878/1641298)库来制作丰富的交互式 UI？如果是，是否有相同的示例演示？

*   如果没有，我的目标是否可以通过仅使用***纯 html5 和纯 javascript***来实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:20:54.510

Jquery UI、CSS 和 HTML5 就足够了...如果您真的是 javascript 专家并且喜欢玩对象、json、事件，那么它应该没有那么困难...否则，您必须导入大量库这最终会导致性能问题、可扩展性和可管理性。

一个好的方法是在网页上有一个单独的 JS 文件和一个用于图标的图像...您可以调整其 x、y 位置...您可以播放动画，无需使用 flash 对象。ExtJS 无疑是一个很棒的库...使用一个库，并选择能够满足您所有要求的最佳库。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:23:02.207

MooTools 和 Prototype 实际上进行 DOM 更改，而 jQuery 在其自己的命名空间中工作。我只是混合了 jQuery 和 Prototype 的项目。您只需将 jQuery 设置为无冲突模式，它们应该可以一起使用，尽管我强烈建议只使用一个。

我偏爱 jQuery，因为它拥有庞大的用户群，并且 jQuery UI 有很多库存小部件可用作基础，但这实际上取决于您自己的编码风格和项目需求。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T18:25:21.987

如果不了解您的应用程序，就无法知道它是否可以仅使用客户端技术来构建。大多数具有显着复杂性的应用程序至少需要一些服务器端逻辑。当然你可以使用 node.js 来处理这个只需要使用 javascript。

如果不需要，我不建议混合使用多个框架。如果你确实看到了一个你认为最能满足你所​​有需求的框架（例如，jQuery UI 等），那么就去做吧。但是，我可能会推荐 jQuery 作为您的主要框架，因为与竞争框架相比，使用它的插件、库等要多得多，并且可以通过 StackOverflow 等地方获得帮助的用户群要大得多.

我不希望找到完全满足您所有需求的灵丹妙药框架，但是通过对 jQuery 的一些投资，您会发现它非常灵活且非常强大，可以满足大多数 UI 需求。

对于非常复杂的胖客户端应用程序（听起来您正在为之努力），我会疏忽不指出优秀的 Backbone.js 和 Underscore.js 库。它们使构建复杂的 javascript 应用程序变得更加容易，并且可以很好地与 jQuery 配合使用。

# jquery - 在项目构建路径上启用 jQuery 1.4.2 时出现错误消息

> ID：13200868
> 
> 赞同：0
> 
> 时间：2012-11-02T18:15:19.477
> 
> 标签：jquery, aptana

我正在尝试在 Aptana 3 中为我的项目配置 jQuery 1.4.2 的自动完成功能。我已经安装了 jQuery 包，重新启动了 Eclipse，并为我的项目赋予了“Web”性质。我看到在项目中启用 jQuery 1.4.2 和 1.6.2 的选项。但是，当我选中该框并单击“确定”时，它会在日志中引发错误并且自动完成功能不起作用。Eclipse 日志中显示的错误消息是：

插件：com.aptana.parsing 消息：（构建 3.2.2.1343263605）[错误] 无效的返回类型：

有人可以建议我缺少什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:08:32.713

我解决了这个问题。这些消息似乎并不是问题的一部分。问题是我使用了错误的编辑器。我需要右键单击 Javascript 文件，选择 Open With... 默认选项是 Javascript Editor。我需要选择 Javascript Source Editor，它可能是与 Aptana 关联的编辑器。一旦我这样做了，那么预输入就会正常工作。

希望这对其他人有帮助。

# sql - SSIS 在我的事实表中查找多个日期，如何使用一个日期维度来解决这个问题？

> ID：13200869
> 
> 赞同：0
> 
> 时间：2012-11-02T18:15:22.237
> 
> 标签：sql, ssis, data-warehouse, dimensions, lookup-tables

在我的 SSIS/DW 项目中，我有一个 DIM.DATE 维度，它通过代理键链接到我的 FACT 表，如下所示：

```
ALTER TABLE FACT.SALES ADD date_id INT NOT NULL
ALTER TABLE FACT.SALES WITH CHECK ADD CONSTRAINT FK_dim_date FOREIGN KEY (date_id) REFERENCES DIM.DATE(date_id) 
```

这会在我的事实表中创建一个“date_id”，现在在我的 SSIS 导入过程中，我传递了一个日期列（shipped_date），我使用它来查找 DIM.DATE 表并在我的维度中传递代理键。

这很好用，但现在我需要为发票日期、收到日期等设置几个不同的日期维度。

我对如何利用现有的 DIM.DATE 来做到这一点感到困惑？

然后我可以在我的事实表中添加更多列..

```
-- add column into fact table
ALTER TABLE FACT.SALES ADD shipped_date_id INT NOT NULL
ALTER TABLE FACT.SALES ADD invoice_date_id INT NOT NULL

-- add foreign key
ALTER TABLE FACT.SALES WITH CHECK ADD CONSTRAINT FK_shipped_date FOREIGN KEY (shipped_date_id) REFERENCES DIM.DATE(date_id)
ALTER TABLE FACT.SALES WITH CHECK ADD CONSTRAINT FK_invoice_date FOREIGN KEY (invoice_date_id) REFERENCES DIM.DATE(date_id) 
```

但是当我进行查找时，我只能传入“date_id”列。我很困惑如何让这一切一起工作。

任何人都可以为我解决这个问题？![在此处输入图像描述](../Images/7c2cc20f50bd24157e0c2e986ce4899d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:17:39.490

您必须对事实表中的每个 DateKey 字段使用多个 LookUp 转换... 1。

# html - 如何在浏览器中模拟页面过渡动画（类似于手机中的页面滑动）？

> ID：13200871
> 
> 赞同：0
> 
> 时间：2012-11-02T18:15:26.173
> 
> 标签：html, animation, jquery-animate, css-transitions

我有一个显示本周图片库的网页，并且我有一个顶部栏导航“上一个”和“下一个”链接来循环浏览画廊。当前单击链接会导致整个页面刷新。我认为，如果当我们单击“下一步”时，我们会从右到左为下一页内容的幻灯片制作动画，反之亦然，如果我们单击“上一个”，我们会为前一周的结果制作动画，我认为用户体验会更流畅从左到右（类似于滑动时页面转换在移动应用中的工作方式）。请注意，我不需要检测实际的滑动手势，我认为 jquery 移动标记是矫枉过正的。

要预加载将滑入的数据，我可以进行 ajax 调用，甚至可以将数据预加载到 json 中，以便我在屏幕外构建替换 html。我将使用 html5 窗口历史推送状态将 url 更改为我们将导航到的实际位置。我唯一找不到的是做实际的动画。我研究过旋转木马，但没有一个能完全满足我的要求。是否存在仅处理页面过渡动画的现有库，具有轻微的后坐反弹效果？

谢谢。

编辑：我刚刚发现 jquery.animate 我认为这可能会奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:18:22.317

您可能想从中选择任意数量的基于 jQUery 的图像库库。如果您找不到一个以您想要的方式在不同画廊之间转换的方法，那么使用 jQuery 异步加载新画廊然后将它们设置为动画应该不是问题。

# actionscript-3 - AIR 上的 stage.mouseLock - 错误 #1056

> ID：13200874
> 
> 赞同：1
> 
> 时间：2012-11-02T18:15:50.750
> 
> 标签：actionscript-3, air

我在**AIR** (3.2-3.4)上设置`stage.mouseLock`属性时遇到问题

 ****在FlashPlayer** (11.2-11.4) 项目中编译以下类可以正常工作：

```
package  
{
    import flash.display.Sprite;
    import flash.display.StageDisplayState;
    import flash.events.KeyboardEvent;

    public class Main extends Sprite 
    {
        public function Main() 
        {
            stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
        }

        private function onKeyDown(event:KeyboardEvent):void 
        {
            stage.displayState = StageDisplayState.FULL_SCREEN;
            stage.mouseLock = true;
        }
    }
} 
```

但是，当我尝试编译针对 AIR 而不是 FlashPlayer 的同一类时，会出现以下错误：

`Error #1056: Cannot create property mouseLock on flash.display.Stage.`

我正在使用`AIR SDK Version: 3.4.0.2710`FlashDevelop 4.1.0 作为我的 IDE。

**编辑**：即使在全新安装 FlashDevelop、从头开始下载 Flex SDK、AIR SDK、FlashPlayerDebugger 之后，问题仍然存在。

**编辑 2**：谢谢你，TheDarkIn1978。添加`-swf-version=17`AND编辑`application.xml`以手动使用正确的版本（3.4）后，它起作用了...我会尝试找出它是否是最新FlashDevelop或AIR SDK中的错误（可能在FD中）...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:05:35.163

您的代码是正确的，所以我认为您需要检查 FlashDevelop 是否确实至少针对*AIR SDK 3.2*。

首先，注释掉有问题的代码并在构造函数中跟踪运行时版本：

```
trace("AIR SDK Version: ", NativeApplication.nativeApplication.runtimeVersion); 
```

这应该至少输出：

> *AIR SDK 版本：3.2.x.xxxx*

如果不是，您应该检查 FlashDevelop 所针对的 Flex SDK（带 AIR）：

***工具 > 程序设置 > AS3Context > 语言 > 已安装的 Flex SDK***

如果您不确定您拥有哪个版本，或者您的目标版本早于 AIR SDK 3.2，您可以从 Adob​​e 的游戏网站下载最新的 AIR SDK（与 Flex SDK 预合并）（[下载 Adob​​e® AIR® SDK](http://gaming.adobe.com/getstarted/)），将其保存到磁盘并将其位置链接到 FlashDevelop。

![在此处输入图像描述](../Images/06760fdd9194d4e4f23e194f6eb9cdb8.png)

**[编辑]**

* * *

我忘记提及的最后一件事：确保您的项目平台目标设置为至少 AIR 3.2，并且您的项目 AIR SDK 目标设置没有覆盖您的全局 AIR SDK 目标设置。

***项目 > 属性***

![在此处输入图像描述](../Images/ca2610a8fe4475ddf73af4b6dbfd586e.png)

![在此处输入图像描述](../Images/254e0a607877c93f4294d76fb7771cae.png)

**[编辑 2]**

* * *

尝试手动覆盖目标 swf 版本并将其分配给版本 17。

***项目 > 属性 > 编译器选项 > 高级 > 其他编译器选项***

将以下内容添加到编译器选项数组：

> -swf-版本=17

![在此处输入图像描述](../Images/f5373a4fe1ca621ce2ea8745e6199da7.png)**

# javascript - 添加后的窗口 hashchange 列表器调用

> ID：13200876
> 
> 赞同：2
> 
> 时间：2012-11-02T18:15:54.053
> 
> 标签：javascript, hashchange

```
overlay.onclick = function(e){
    e.preventDefault();
    window.location.hash = 'overlay';

    var close = function(){
        //do some stuff
        window.removeEventListener('hashchange', close);
    }

    window.addEventListener('hashchange', close, false);
} 
```

基本上，只要我单击链接，哈希就会更新，并且关闭函数正在调用。在哈希更改之后，不应绑定关闭函数。为什么`close`添加侦听器后立即调用该函数，以及如何防止它。在 Chrome 中进行测试，最新版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:28:45.450

我认为这是因为 Javascript 是同步的，所以当您设置 时`window.location.hash`，该`window.onhashchange`方法将不会运行，直到`onclick`当前运行的函数完成。那有意义吗？因此，您设置了`.hash`值，然后绑定了一个`hashchange`事件……在绑定之后，该`onhashchange`事件实际上会触发。这样依次调用`close`。尝试在整个代码中放置`console.log`语句以查看执行顺序。

**更新**：

这是一个演示事物顺序的小提琴：http: [//jsfiddle.net/jmWDY/](http://jsfiddle.net/jmWDY/)

请注意如何首先调用原始`onhashchange`函数（在您的函数完成后），然后是您的新绑定（即`close`）。我希望这有帮助！

# c++ - 为什么是“Unknwn.h”而不是“Unknown.h”？是不是印错了？

> ID：13200877
> 
> 赞同：7
> 
> 时间：2012-11-02T18:15:54.927
> 
> 标签：c++, c, com, library-design

为什么微软的 COM 头文件命名为[`Unknwn.h`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680509%28v=vs.85%29.aspx), 而不是`Unknown.h`? 是印刷错误，还是这样命名有客观原因？

# c# - 将不规则形状缩放到不规则边界

> ID：13200878
> 
> 赞同：0
> 
> 时间：2012-11-02T18:15:57.277
> 
> 标签：c#, silverlight, xaml

我正在尝试制作一个可重用的 XAML 图标。它由三部分组成。

背景、边框和图形路径对象。形状为矩形，右上角切掉，边框形状相同，中间切掉，边距为 1。

我需要图形路径以略微边缘适合其中。

我希望它足够智能，可以自行缩放以适应挡板的范围，无论其形状如何。像 ClipToBounds 一样，我不希望图形被剪辑 - 我希望它能够缩放。

我最初认为设置边距会起作用，但是，设置图形的边距是基于矩形而不是边框​​的不规则形状；因此，具有更矩形形状的图形通常会接触或太靠近边框的右侧切口。

有人对我如何实现这种 ScaleToBounds 行为有任何想法吗？

**编辑：**

有关问题的示例，请参见附图。两个图形都包含在带有 Margin 的 ViewBox 中。圆形图形是我希望在图形周围看到的理想边距。矩形图形离边框太近 - 我想让诸如矩形图形之类的图形稍微缩小，这样它们就可以在边框内留出一些余量。

[矩形图形 http://s11.postimage.org/a5v05ve2n/rectangular.png](http://s11.postimage.org/a5v05ve2n/rectangular.png) [圆形图形 http://s11.postimage.org/do7029eyn/circular.png](http://s11.postimage.org/do7029eyn/circular.png)

# c# - 在.Net中获取实际的dll路径

> ID：13200880
> 
> 赞同：2
> 
> 时间：2012-11-02T18:16:24.017
> 
> 标签：c#, .net, wpf, dll

我有一个名为 JIMS.Printing.dll 的 dll，它位于主应用程序 JIMS.exe 的 Reporting 文件夹中。

但是在运行 JIMS.exe 的 Reporting 中调用 JIMS.Printing.dll 代码中的 Templates 文件夹中的某些文件时出现错误

```
JIMS.exe
--------->Reporting
------------------->JIMS.Printing.dll
------------------->Templates
-----------------------------> Files 
```

代码：

```
string _templatePath = Path.Combine(Path.GetDirectoryName(System.Reflection.Assembly.GetAssembly(typeof(JIMS.Printing.PrintInvoice)).Location), "Templates"); 
```

JIMS.Printing.dll 中的代码

JIMS.exe 在 JIMS.exe Path\Templates\file 中寻找文件，但实际上该文件在 JIMS.Printing.dll Path\Templates\files 中

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T18:22:57.307

您可以使用：

```
Assembly.GetExecutingAssembly().Location 
```

这将为您提供执行程序集的路径，然后使用：

```
System.IO.Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) 
```

这将给出包含文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T18:19:44.013

你可以试试这个：-

```
 string path1= System.Reflection.Assembly.GetAssembly(typeof(DaoTests)).Location;

 string directory= Path.GetDirectoryName( path1 ); 
```

# java - 启动 Datomic shell 时出错：java.lang.NoClassDefFoundError: jline/ConsoleRunner

> ID：13200887
> 
> 赞同：2
> 
> 时间：2012-11-02T18:16:39.727
> 
> 标签：java, windows, datomic

我按照 Datomic 站点上的说明进行操作：http://docs.datomic.com/getting-started.html [，](http://docs.datomic.com/getting-started.html)但在尝试启动 datomic shell 提示时出现此错误。我正在使用Windows机器。有什么建议么？我在我的 linux 机器上尝试了同样的事情，但没有收到这个错误。

编辑：移动到另一台 Windows 机器，它正在工作。如果我有时间解决此问题并找到解决方案，我会报告

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T22:19:15.227

我注意到您无法从 bin 目录中运行 shell.cmd，您需要使用父目录中的 bin\shell.cmd 调用它...希望对您有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T08:59:43.290

如果您正在使用`cygwin/bash`并调用`bin/shell`： Windows 上的 java 运行时不理解带有**“：”**的类路径， 但这是您从中得到的`bin/classpath`。要么更正这个，要么使用 DOS-CMD shell 并在里面调用 bin/shell.cmd。

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-20T23:25:22.657

在 Windows（至少 7 个）上运行 datomic 的一些提示：

不要将 datomic 下载到 Program Files 中。在启动时，它会在自己的目录中创建日志目录和临时文件，因此除非您以管理员身份运行命令提示符，否则您将看到充满*无法写入文件...*错误的屏幕。

您需要像这样运行 datomic（假设您将下载解压缩到 C :)

```
c:\datomic-free-0.x.xxxx>bin\shell.cmd 
```

注意反斜杠。永远绊倒我来自 *nix 世界。

之后，返回您定期安排的 datomic 教程。

# ui-automation - 在设备上测试时出现scrollToVisible错误，UIAutomation

> ID：13200893
> 
> 赞同：3
> 
> 时间：2012-11-02T18:16:48.070
> 
> 标签：ui-automation, ios-ui-automation

对于这行测试代码：view.scrollViews()[0].tapWithOptions({tapOffset:{x:0.32, y:0.25}})

我收到此错误

```
2012-11-02 18:09:23 +0000 None: Script threw an uncaught JavaScript error: target.frontMostApp().mainWindow().scrollViews()[0] could not be tapped on line 244 of feature.js
2012-11-02 18:09:23 +0000 Debug: target.frontMostApp().mainWindow().scrollViews()[0].tapWithOptions({tapOffset:{x:"0.32", y:"0.25"}})
2012-11-02 18:09:23 +0000 Debug: target.frontMostApp().mainWindow().scrollViews()[0].scrollToVisible()
2012-11-02 18:09:23 +0000 Debug: target.frontMostApp().mainWindow().scrollViews()[0] - scrollToVisible cannot be used on the element because it does not have a scrollable ancestor.
2012-11-02 18:09:23 +0000 Debug: target.frontMostApp().mainWindow().scrollViews()[0] - scrollToVisible cannot be used on the element because it does not have a scrollable ancestor.
2012-11-02 18:09:23 +0000 Debug: target.frontMostApp().mainWindow().scrollViews()[0] could not be tapped 
```

对数元素树看起来像这样

```
UIATarget "MyiPadname" {{0, 0}, {1024, 768}}
elements: {
UIAApplication "myAppName" {{0, 0}, {1024, 768}}
elements: {
    UIAWindow "(null)" {{0, 0}, {1024, 768}}
    elements: {
        UIAScrollView "(null)" {{0, 0}, {1024, 768}}
        elements: {
            UIAImage "(null)" {{1017, 761}, {7, 7}}
            UIAImage "(null)" {{1017, 761}, {7, 7}}
        }
        UIAImage "nav_bar.png" {{0, 724}, {1024, 44}}
        UIAButton "button featured" {{0, 730}, {134, 39}}
        UIAButton "See the world" {{134, 730}, {223, 39}}
        UIAButton "button my favorites" {{357, 730}, {180, 39}}
        UIAButton "button settings" {{967, 736}, {33, 27}}
    }
 }
} 
```

我正在使用 XCode 4.5.1 。谁能帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:54:39.437

您是否有机会使用 iOS 5.x 模拟器或 iOS 5.x 设备？如果是，那么我看到了同样的问题。我相信 Xcode 4.5.1 不喜欢 ScrollViews。

但是，我找到了解决方法。

我的元素看起来像：

```
target.frontMostApp().mainWindow().scrollViews()[0].buttons()["Wikipedia"] 
```

因此，我没有直接访问按钮，而是尝试访问按钮的 staticText。

```
target.frontMostApp().mainWindow().scrollViews()[0].buttons()["Wikipedia"].staticTexts()["Wikipedia"].tap(); 
```

我希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:12:39.633

`flickInsideWithOptions`在滚动视图上执行时，我遇到了同样的错误。我相信自动化框架正在尝试滚动到您要首先点击的元素，但是如果由于某种原因禁用了滚动，它会因您提到的错误而失败。

只有一种方法可以解决它 - 自动化框架无法知道我们正在点击滚动视图 - 我们必须避免其特殊版本的点击/滑动/轻弹功能。我们将`mainWindow`改为点击，例如

```
var buttonRect = button.rect();
var windowRect = mainWindow.rect();

var xPos = (20 + buttonRect.origin.x) / windowRect.size.width;
var yPos  = (50 + buttonRect.origin.y) / windowRect.size.height;

mainWindow.tapWithOptions({tapOffset:{x:xPos, y:yPos}}); 
```

# c# - Windows Identity Foundation (WIF) - 主体/身份未从服务中返回

> ID：13200898
> 
> 赞同：1
> 
> 时间：2012-11-02T18:16:54.937
> 
> 标签：c#, wif, servicestack

我有一个使用 WIF 的 ServiceStack 服务 - 内部一切正常 - 创建 ClaimsPrincipal 和 ClaimsIdentity 对象，从它们添加/读取声明完全没有问题。

但是，当我尝试从客户端（尝试过的 ServiceStack 客户端和 c# WebRequest）获取此对象时，它只返回对象的一部分——无论我是否在客户端上安装了 WIF 并尝试强制转换。如果我直接调用并获得 json 结果，这就是返回的全部内容：

```
{"Principal":{"__type":"Microsoft.IdentityModel.Claims.ClaimsPrincipal, Microsoft.IdentityModel","Identity":{"__type":"Microsoft.IdentityModel.Claims.ClaimsIdentity, Microsoft.IdentityModel","Name":"BoogeyFace","AuthenticationType":"","IsAuthenticated":true}}} 
```

如何跨服务边界获取完整的 WIF ClaimsPrincipal？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T10:20:30.497

要重用已发布的令牌，您必须配置您的服务以保存引导令牌。这个接缝在 .net 4.5中被称为[保存引导上下文。](http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.securitytokenhandlerconfiguration.savebootstrapcontext.aspx)这将使您可以访问您在`IClaimsIdentity.BootstrapToken`财产中的令牌。有关更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.claims.iclaimsidentity.bootstraptoken.aspx)。

将您的原始令牌放在服务端允许您与另一个服务进行通信，就像您在客户端上一样。例如，您可以使用[这里](http://msdn.microsoft.com/en-us/library/ee708780.aspx)`CreateChannelWithIssuedToken`描述的。

# python - 升级后 Python 未在 Windows 8 中从 cmd 运行

> ID：13200900
> 
> 赞同：0
> 
> 时间：2012-11-02T18:17:09.087
> 
> 标签：python, windows, cmd

我可以运行 Python 的命令行版本，但似乎无法从命令提示符运行它。我最近从 Windows 7 升级到 Windows 8，它在 Windows 7 上运行良好。现在 Windows 8 将无法识别 Python。谢谢，威廉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:23:41.797

它在菜单项而不是命令提示符下工作的原因是菜单项指定了`"Start in"`可以找到 Python 可执行文件的目录。

可能是 Win 7 -> Win 8 升级未能保留 PATH 环境变量，其中 Python 先前指定的路径，允许您从*任何*命令提示符控制台调用 Python。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T01:44:23.730

我安装如下：

*   Python 3.3.2 Windows X86-64 MSI 安装程序
*   视窗 8
*   “为所有用户安装”
*   打开“将python.exe添加到路径”

当我完成时，Python 没有从命令 shell 执行。

我检查了环境变量，果然，我安装它的“C:\Python33\”在系统环境变量中。

但由于某种原因，如果我打开管理员的命令 shell，“python”只会在命令 shell 中调用 Python——打开非特权命令 shell 不会在路径中包含 C:\Python33\。

我的解决方法是创建一个 PATH 环境变量，其值为“C:\Python33”作为用户变量，然后它就起作用了。

可能还有其他方法可以做到这一点。例如，重新启动或注销并登录可能值得一试。

也可以看看：

*   [http://bugs.python.org/issue3561——](http://bugs.python.org/issue3561)关于如何处理 Windows 路径及其语用学的长 Python 讨论
*   [http://www.symantec.com/connect/forums/wise-7-win-7-problems-updating-environment-variable-current-user](http://www.symantec.com/connect/forums/wise-7-win-7-problems-updating-environment-variable-current-user) -- 有关路径问题的进一步 Internet 讨论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:56:28.637

1.  转到 C:\python33 或安装它的任何位置。
2.  右键单击“pythonw”并固定到任务栏，
3.  从任务栏运行。

# xampp - 无法登录 xampp

> ID：13200902
> 
> 赞同：0
> 
> 时间：2012-11-02T18:17:15.153
> 
> 标签：xampp

如果您丢失了 xampp 的旧用户名和密码，有没有办法找到它？此外，xampp 服务器说 'xampp user; 这是否意味着“xampp 用户”是用户名？

或者，如果无法恢复原件，有没有办法恢复用户名和密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-15T23:04:24.683

老问题，但这是答案，因为我最近遇到了这个问题：转到 \xampp\security 并删除 xamppdirpasswd.txt，然后将 xampp.users 的内容替换为“用户”。现在在 localhost 上刷新，应该会提示您输入用户名和密码，您只需要输入“用户”并且没有密码。然后去http://[localhost]/security/xamppsecurity.php 设置一个新的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:29:44.760

我认为唯一的方法是手动设置新密码和/或用户名。Stacowerflow 上已经有一篇文章很好地解释了如何做到这一点：

*   转到您的 xampp\mysql\bin\ 文件夹
*   编辑 my.ini 并在 [mysqld] 下面插入 skip-grant-tables
*   重启 MySQL
*   通过运行 UPDATE mysql.user SET 为您的 root 用户设置新密码
*   Password=PASSWORD('new_password') WHERE User='root' in phpMyAdmin in mysql 数据库（或者如果无法从远程主机访问 MySQL，就这样保留）

[原帖](https://stackoverflow.com/questions/4124447/reset-root-password-with-wrong-mysql-config)

# html - Way to detect if WebGL viewport is on screen?

> ID：13200904
> 
> 赞同：1
> 
> 时间：2012-11-02T18:17:28.450
> 
> 标签：html, iframe, canvas, webgl, compositing

Is there any way to be able to query the GPU to tell me if my viewport in my webpage is currently on screen or not? For example, if I had a 3d scene rendering in a canvas in an iframe, is there a way to query the hardware (within my iframe and only the pixels or verts in the viewport) to say if I am on screen or scrolled off screen?

I'm curious as to whether this is something I can do at the vertex shader level. Does WebGL even perform the shader program on a viewport that is offscreen? Lets say if it is scrolled below the canvas, or the viewport is obstructed by another webpage browser window? Is there a way to query the compositing portion of webgl to see if it is even in view or Iterate through the "RenderObject" Tree to test if it is even onscreen and then return this value? I am trying to get much more performance out of a project I am working on and I am trying to only render what is visible on screen.

Any possible ideas? Is this even possible? Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:45:52.147

You don't ask this question at the canvas/WebGL level, because it might, for example, be scrolled back on screen before you draw another frame, and browsers don't want to not have content to show, so there's no provision to not draw.

I believe you will have to consult the DOM geometry properties (e.g. `.scrollLeft`) of your scrollable areas to determine whether the canvas is visible. There is enough information in said properties that you can do this generically without hardcoding knowledge of your page structure.

Also, make sure you are exclusively using `requestAnimationFrame` for your drawing/simulation scheduling; it will pause animations if the page is hidden/minimized/in another tab/otherwise explicitly invisible.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:51:09.443

RequestAnimationFrame is only reasonable way to handle unnecessary performance loss even semantically because [window.requestAnimationFrame tells the browser that you wish to perform an animation...](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame) So browser will figure out how it should handle your wish in optimal way taking into account current page state. But since iframes communicate using local storage you can push to them your base page state so each of them will decide should it RequestAnimationFrame or not. But im not shure that it is a good thing to have multiply render contexts on your page, they all eat resources and can't share them (data that stored in GPU is sandboxed) so eventually they will start to push each other from GPU memory and cause lags + GPU pipeline might be not so happy with all those tiny standalone entities. Fragmentation is main GPU performance enemy.

# azure - 2012 年 10 月更新后，工人角色继续回收

> ID：13200908
> 
> 赞同：4
> 
> 时间：2012-11-02T18:17:56.730
> 
> 标签：azure, azure-worker-roles

我更新了一个工作解决方案以使用 2012 年 10 月的版本。从那时起，我的工人角色不断回收。我无法在 OnStop 或 Run 的 OnStart 中命中任何断点。

Web 角色按预期工作。

我激活了调试的所有异常，似乎没有被捕获。就好像在实例中运行的角色是默认角色而不是我的代码。

任何人都有任何见解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:02:00.027

问题是我升级了我的解决方案以使用最新的 Windows Azure SDK。我从 1.7 转到 1.8。

但是对“Microsoft.WindowsAzure.ServiceRuntime”的引用仍然指向 1.7。SDK 是按站点安装的，不会一个接一个。

由于版本不匹配，我的代码从未被模拟器和 Windows azure 中的角色执行。执行的代码是默认的 Role 实现，并且 Run 方法不断完成，进而导致角色不断循环。

# marklogic - xdmp:document-insert() 跨森林的文档分布

> ID：13200912
> 
> 赞同：0
> 
> 时间：2012-11-02T18:18:09.323
> 
> 标签：marklogic

使用什么算法为 xdmp:document-insert() 选择森林以及哪些因素会影响文档在森林中的分布？

我看到 xdmp:document-insert 没有平均分配文档。我尝试将 cts:uris 的输出传递给 xdmp:document-assign，然后使用 key=forest-name 和 value=uris 计数填充地图。

让 $index := xdmp:document-assign($uri,$forests-count) 让 $forest-name := xdmp:forest-name($forests[$index])

当 $forests-count 较低时，文档在森林之间也保持平衡，但如果不是。森林的数量很高（~ 50），这使得 uri 分布不均匀。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:58:05.880

该算法使用 64 位散列，因此它有足够的地址空间用于 50 多个森林。部署了数百个森林的集群，可能有数千个。对于我使用的集群，文档数量通常在平均值的 10% 以内。这已经足够统一了，因为大多数森林作业都是`O(log n)`.

当 URI 本身均匀分布时，放置往往效果最好。例如，作为序列号的 URI 可能会更多地聚集在一起。

# waveform - 创建自动 DJ 应用

> ID：13200917
> 
> 赞同：1
> 
> 时间：2012-11-02T18:18:44.293
> 
> 标签：waveform, audio-player

我正在尝试创建一个“自动 dj”应用程序，它可以让智能手机用户选择歌曲的播放列表，它会创建一个无缝的播放混音。这涉及到几个因素：读取音频文件的播放列表，计算它们的波形/频谱，确定 BPM，并按照播放顺序将兼容的歌曲组织到新的播放列表中（基于兼容的速度和键） ）。

该应用程序必须能够扫描歌曲的波形并识别歌曲“主要”部分的开头（跳过缓慢的前奏/后奏）。我还想象有一些效果：过滤，所以它可以过滤掉新轨道中的低音，并在适当的时间切换低音。也许用户也可以控制混响。

我只是看到这个项目在约 4 个月的时间里对于 3-4 名忙碌的大学生来说是多么可行。不确定它是 Android 还是 iOS 应用程序，甚至是 Windows 应用程序。不确定我们会使用哪种语言（可能是 Python 或 Java）；以最有用的音频分析库为准。显然，它对于某些类型的音乐（浩室音乐、恍惚音乐）会更好，但我仍然很想尝试创作它。

感谢您的任何反馈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:20:10.463

尽管我很想听听更有经验的人对此的看法，但根据您的情况，我会说这将是一项非常艰巨的任务。由于听起来您没有使用音频分析库/程序的经验，您可能想开始尝试这些库/程序，其中大多数可能会使用 C/C++，而不是 java/Python。以下是我知道的一些，但我建议您自己进行研究。

[http://www.underbit.com/products/mad/](http://www.underbit.com/products/mad/) http://audacity.sourceforge.net/

在您的情况下听起来并不可行，但这仅取决于您的编程/项目经验和创建它的动机。

祝你好运

# android - 如何从 FeedBurner URL 获取图像形式的 RSS 提要？

> ID：13200918
> 
> 赞同：0
> 
> 时间：2012-11-02T18:18:46.670
> 
> 标签：android, rss

我正在尝试从`FeedBurner`URL 获取图像，但我无法做到这一点。

编辑：

这是[网址](http://androidheadlines.com/feed)。

我注意到图像位于 < content:encoded > 标签内。

我也无法从此[URL](http://feeds.feedburner.com/AndroidNewsGoogleAndroidForums)检索图像。

我无法从中提取信息。

这是我的代码：

```
class RSSHandler extends DefaultHandler {

private Post currentPost = new Post();

StringBuffer chars = new StringBuffer();

@Override
public void startElement(String uri, String localName, String qName,
        Attributes atts) {

    chars = new StringBuffer();

    if (localName.equalsIgnoreCase("thumbnail")) {          
        String thumbnail = atts.getValue("url");    
        currentPost.setThumbnail(thumbnail);
    }
}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {

    if (localName.equalsIgnoreCase("title")
            && currentPost.getTitle() == null) {
        currentPost.setTitle(chars.toString());

    }
    String pubd;
    if (localName.equalsIgnoreCase("pubDate")
            && currentPost.getPubDate() == null) {

        currentPost.setPubDate(chars.toString());
        Home.DATE_1.add(chars.toString()); 
    }

    if (localName.equalsIgnoreCase("link") && currentPost.getUrl() == null) {

        currentPost.setUrl(chars.toString());
    }

    if (localName.equalsIgnoreCase("item")) {
        FragmentView.PostList.add(currentPost);

        currentPost = new Post();
        }

}

@Override
public void characters(char ch[], int start, int length) {
    chars.append(new String(ch, start, length));
} 
```

}

我正在使用这个处理程序从 RSS 提要中获取信息。对于其他提要，一切正常，但是当它是`FeedBurner`URL 时，我似乎无法获取图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T07:07:20.997

您可以通过正则表达式从内容中提取图像，但如果您使用 XmlPullParser 代替它是首选。

这个库有一个很好的例子： [https ://github.com/Pkmmte/PkRSS](https://github.com/Pkmmte/PkRSS)

此代码片段可在该库的 Rss2Parser.java 文件中找到，它完全可以满足您的需要。只需将内容作为参数传递。

/**

```
 * Pulls an image URL from an encoded String.

 *

 * @param encoded The String which to extract an image URL from.

 * @return The first image URL found on the encoded String. May return an

 * empty String if none were found.

 */

private String pullImageLink(String encoded) {

    try {

        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();

        XmlPullParser xpp = factory.newPullParser();

        xpp.setInput(new StringReader(encoded));

        int eventType = xpp.getEventType();

        while (eventType != XmlPullParser.END_DOCUMENT) {

            if (eventType == XmlPullParser.START_TAG && "img".equals(xpp.getName())) {

                int count = xpp.getAttributeCount();

                for (int x = 0; x < count; x++) {

                    if (xpp.getAttributeName(x).equalsIgnoreCase("src"))

                        return xpp.getAttributeValue(x).replaceAll("-110x52", "");

                }

            }

            eventType = xpp.next();

        }

    }

    catch (Exception e) {

        log(TAG, "Error pulling image link from description!\n" + e.getMessage(), Log.WARN);

    }

    return "";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:31:54.423

首先，您需要获取图像的 URL

```
<media:content url="http://thenextweb.com/wp-content/blogs.dir/1/files/2012/11/SC20121102-150432.png" medium="image">
<media:title type="html">SC20121102-150432</media:title>
<media:thumbnail url="http://thenextweb.com/wp-content/blogs.dir/1/files/2012/11/SC20121102-150432-150x150.png" /> 
```

将图像转换为位图后，示例代码：

```
public Bitmap getBitmapFromURL(String src) {
    try 
    {
        URL url = new URL(src);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        return BitmapFactory.decodeStream(input);
    } 
    catch (IOException e) 
    {
        //TODO on error
        return null;
    }
} 
```

编辑：

首先阅读您的 HTML 文件，然后使用正则表达式获取带有 IMG 标签的 src url

正则表达式：

```
String imgRegex = "<img[^>]+src\\s*=\\s*['\"]([^'\"]+)['\"][^>]*>"; 
```

使用 imgregex 值获取位图图像。

# java - SWING - 绘制直线，编译时不会出现

> ID：13200928
> 
> 赞同：1
> 
> 时间：2012-11-02T18:19:38.753
> 
> 标签：java, swing, jframe, paintcomponent

我试图在`JFrame`窗口中用鼠标画线，当我尝试这样做时，它不起作用！请忽略菜单，我稍后会尝试使用它！我错过了什么！如果您能给我一些提示，我将不胜感激！

```
public class newGUI extends JFrame implements ActionListener, MouseMotionListener, MouseListener {
private static final long serialVersionUID = 1L;
public static final int WIDTH = 300;
public static final int HEIGHT = 200;
Point point1;
Point point2;
Line2D line2d;

public static void main(String[] args){
    newGUI gui = new newGUI();
    gui.setVisible(true);
}

public newGUI()
{
    super("Menu Demonstration");
    setSize(WIDTH, HEIGHT);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JMenu colorMenu = new JMenu("Choose Colors");
    JMenuItem greenChoice = new JMenuItem("GREEN");
    greenChoice.addActionListener(this);
    colorMenu.add(greenChoice);
    JMenuItem redChoice = new JMenuItem("RED");
    colorMenu.add(redChoice);
    JMenuBar bar = new JMenuBar();
    bar.add(colorMenu);
    setJMenuBar(bar);
    addMouseListener(this);
    addMouseMotionListener(this);
}
@Override
public void actionPerformed(ActionEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mouseClicked(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mouseEntered(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mouseExited(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mousePressed(MouseEvent arg0) {
    // TODO Auto-generated method stub
    point1=arg0.getPoint();
}

@Override
public void mouseReleased(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mouseDragged(MouseEvent arg0) {
    // TODO Auto-generated method stub
    point2=arg0.getPoint();
    line2d=new Line2D.Double(point1, point2);
    repaint();

}

@Override
public void mouseMoved(MouseEvent arg0) {
    // TODO Auto-generated method stub

}
public void paintComponent(Graphics g){
    Graphics2D g2d = (Graphics2D) g;
    if(point1!=null && point2!=null){
        g2d.setPaint(Color.RED);
        g2d.setStroke(new BasicStroke(1.5f));
        g2d.draw(line2d);
        repaint();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T18:33:45.820

*   始终以大写字母开头类名，即`NewGui`
*   用于[`Event Dispatch Thread`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)创建和更改 UI 组件
*   不要不必要地扩展`JFrame`课程
*   不要调用，`setSize(..)`而是调用实例`JFrame#pack()``JFrame`
*   `JFrame`没有`paintComponent(..)`，而是添加自定义`JPanel`并覆盖其`paintComponent(..)`and`getPreferredSize(..)`
*   不要忘记调用`super.paintComponent(..)`您的自定义`JPanel`
*   不要`repaint()`从内部调用`paintComponent(..)`（这将导致重新绘制的无限循环超出需要）
*   同样在可能的情况下（如果其他类不使用它）使用匿名`MouseListener`s/ `MouseMotionListener`s 而不是使用`MouseAdapter`/ `MouseListener`s`MouseMotionListener`等。

这是我制作的一个示例（基本上是您提到的带有修复的代码）：

![在此处输入图像描述](../Images/8467b2ca86764ea14c1a3e49adfb6199.png)

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Line2D;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class NewGui implements ActionListener {

    private static final long serialVersionUID = 1L;
    public static final int WIDTH = 300;
    public static final int HEIGHT = 200;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                NewGui gui = new NewGui();
            }
        });
    }

    public NewGui() {
        initComponents();
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        // TODO Auto-generated method stub
    }

    private void initComponents() {
        JFrame frame = new JFrame("Menu Demonstration");

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JMenu colorMenu = new JMenu("Choose Colors");
        JMenuItem greenChoice = new JMenuItem("GREEN");
        greenChoice.addActionListener(this);
        colorMenu.add(greenChoice);
        JMenuItem redChoice = new JMenuItem("RED");
        colorMenu.add(redChoice);
        JMenuBar bar = new JMenuBar();
        bar.add(colorMenu);
        frame.setJMenuBar(bar);

        frame.add(new MyPanel());

        frame.pack();
        frame.setVisible(true);
    }
}

class MyPanel extends JPanel {

    Point point1;
    Point point2;
    Line2D line2d;

    public MyPanel() {
        addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent me) {
                super.mousePressed(me);
                point1 = me.getPoint();
            }
        });
        addMouseMotionListener(new MouseAdapter() {
            @Override
            public void mouseDragged(MouseEvent me) {
                super.mouseDragged(me);
                // TODO Auto-generated method stub
                point2 = me.getPoint();
                line2d = new Line2D.Double(point1, point2);
                repaint();
            }
        });
    }

    //so our panel will be visible
    @Override
    public Dimension getPreferredSize() {
        return new Dimension(400, 200);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;

        //Set  anti-alias!
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON); 

        if (point1 != null && point2 != null) {
            g2d.setPaint(Color.RED);
            g2d.setStroke(new BasicStroke(1.5f));
            g2d.draw(line2d);
        }
    }
} 
```

# vb.net - 如何测试 requestStream 是否已关闭和处置

> ID：13200930
> 
> 赞同：0
> 
> 时间：2012-11-02T18:19:58.380
> 
> 标签：vb.net

如果发生异常，我如何测试 requestStream 是否已关闭和处置

```
Try
    Using requestStream As Stream = rqst.GetRequestStream()

        requestStream.Write(fle, 0, fle.Length)

        Throw New ApplicationException("Exception Occured")

    End Using

Catch ex As Exception

    MessageBox.Show(ex.Message.ToString())

Finally
    'test if the requeststream is closed and disposed?
    MessageBox.Show("")

End Try 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:21:16.600

就是`Using`这样。即使有异常，也会`using`导致编译器在一个`finally`子句中烘焙，该子句将调用`Dispose`.

无需再做一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T11:39:54.070

我尝试使用一些模拟和假实现来解决这个问题，但 Stream 基类对此并不友好。最后，我在单元测试中使用与spender建议的完全相同的原则解决了它（使用C#）：

```
[TestMethod]
[ExpectedException(typeof(ObjectDisposedException))]
public void When_EmailResource_gets_disposed_Should_dispose_ContentStream()
{
    var stream = new System.IO.MemoryStream();

    var resource = new EmailResource
    {
        ContentStream = stream,
    };

    resource.Dispose();

    stream.ReadByte();
} 
```

流.ReadByte(); 导致异常。

也许在 SystemWrapper 的帮助下它存在一种更简洁的方式，请参阅[https://systemwrapper.codeplex.com/](https://systemwrapper.codeplex.com/)

高温高压

# jquery - blueimp - jquery 文件上传 onClick 事件

> ID：13200936
> 
> 赞同：2
> 
> 时间：2012-11-02T18:20:42.907
> 
> 标签：jquery, file-upload, blueimp

我们正在使用 Blueimp Jquery 文件上传。

我们如何添加一个按钮来触发上传？

现在，只要用户选择一个文件，就会立即上传。我们希望用户选择文件，然后单击“立即上传”按钮。

我已经更改了 JS 文件，将 autoUplaod 设置为 false，但可以弄清楚如何让 OnClick 工作。

```
<script>
$(function () {
    $('#fileupload').fileupload({
        dataType: 'json',
        done: function (e, data) {
            $.each(data.result, function (index, file) {
                $('<p/>').text(file.name).appendTo(document.body);
            });
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-02T18:30:52.527

也许您正在寻找添加函数回调：

```
$(function () {
    $('#fileupload').fileupload({
        dataType: 'json',
        done: function (e, data) {
            $.each(data.result, function (index, file) {
                $('<p/>').text(file.name).appendTo(document.body);
            });
        },
        add:function (e, data) {
           $("#uploadBtn").off('click').on('click',function () {           
             data.submit();
           });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T19:34:24.657

我尝试修改“添加”功能，除了在所有 Internet Explorer 浏览器中选择的文件没有出现在输入框中之外，它有点工作。另外，根据我的经验，如果您在单击按钮之前多次更改它，所有文件都会上传。这对我有用：1\. 不要立即实例化 blueimp fileupload 对象 2\. 创建一个基本上实例化 fileupload 对象的函数 3\. 将上面#2 中的函数附加到按钮单击我意识到下面的代码中有一些冗余. 我也强制 IframeTransport，你可能可以做一个浏览器检查。您也可以在浏览器中检查添加功能，例如，您可以使用“fileInput”，对于其他所有人，您可以使用“file”。这对我来说在所有浏览器中都很好，除了进度条，

```
<script>
    $(function () {
        /*do your jquery stuff here, but do not call fileupload*/
        $("btnUpload").click(function(){
            /*i can add additional post params*/
            /*some of this is redundant*/
            var post = Array({name:"hello", value:"there"});
            uploadFileOnClick("fileupload", $("#fileupload") ,post, true);
        });
    });
    function uploadFileOnClick(id, file, post, _autoUpload) {
        $('#'+id).fileupload({
            dataType: 'json',
            multipart: true,
            autoUpload: true,
            formData: post,
            forceIframeTransport: true,
            progress: function (e, data) {
                /*insert progress code here*/
            },
            done: function (e, data) {
                /*insert your code here*/
            }
        });
        if (_autoUpload) {
            $('#'+id).fileupload('add', {files: file});
        }
    }
</script>
<body>
    <form method="post" enctype="multipart/form-data">
        <input type="file" id="fileupload" name="somename" data-url="yourserver.php?goeshere=true"/>
    </form>
    <!-- i use a link in my case, it will work if you use a button in the form as well-->
    <a href="javascript:void(0);" id="btnUpload">Upload</a>
</body> 
```

# zend-framework - Zend Framework 表单表装饰器

> ID：13200939
> 
> 赞同：1
> 
> 时间：2012-11-02T18:20:56.353
> 
> 标签：zend-framework, zend-form

我想将我的表单包装在一个表格中，因此 html 输出如下所示：

```
<form enctype="application/x-www-form-urlencoded" method="post" action="">
    <table width="100%" cellspacing="0" cellpadding="0">
        <tr>
            <td id="name-label" class="td2 required">Page Name</td>
            <td class="td3">
                <input type="text" name="name" id="name" value="">
            </td>
        </tr>
        <tr>
            <td id="seo_name-label" class="td2 required">Page SEO Name</td>
            <td class="td3">
                <input type="text" name="seo_name" id="seo_name" value="">
            </td>
        </tr>
        <tr>
            <td id="title-label" class="td2 optional">Page Title</td>
            <td class="td3">
                <input type="text" name="title" id="title" value="">
            </td>
        </tr>
        <tr>
            <td id="order-label" class="td2 required">Page SEO Name</label></td>
            <td class="td3">
                <input type="text" name="order" id="order" value="">
            </td>
        </tr>
        <tr>
            <td class="td1" colspan="2" align="center">
                <input type="submit" name="Save" id="Save" value="Save">
            </td>
        </tr>
        <input type="hidden" name="csrf" value="0fd12c3fd912bb8f2e59ccae28c886f5" id="csrf">
    </table>
</form> 
```

所以我根据一些搜索写了这个：

```
class Forms_PageEdit extends Zend_Form
{
    public $elementDecorators = array(
        'ViewHelper',
        'Errors',
        array(
            array('data' => 'HtmlTag'), 
            array('tag' => 'td', 'class' => 'td3')
        ),
        array('Label', 
            array('tag' => 'td', 'class'=>'td2')
        ),
        array(
            array('row' => 'HtmlTag'), 
            array('tag' => 'tr')
        ),
    );

    public function init()
    {
        $this->setMethod('post');
        $this->setDisableLoadDefaultDecorators(true);
        $this->removeDecorator('DtDdWrapper');
        $this->setDecorators(array(
                    'FormElements',
                    array('HtmlTag',array('tag'=>'table', 'width'=>'100%', 'cellspacing' => '0', 'cellpadding'=>'0')),
                    'Form'
                ));

        // Add an page name
        $this->addElement('text', 'name', array(
            'label'      => STC_Model::getInstance('AdminPhrases')->getPhraseByName('pages_edit_name',3),
            'decorators' => $this->elementDecorators,
            'required'   => true,
            'filters'    => array('StringTrim'),
        ));

        // add Page SEO Name Element
        $this->addElement('text', 'seo_name', array(
            'label'      => STC_Model::getInstance('AdminPhrases')->getPhraseByName('pages_edit_seo',3),
            'decorators' => $this->elementDecorators,
            'required'   => true,
        ));

        // add Page Title Element
        $this->addElement('text', 'title', array(
            'label'      => STC_Model::getInstance('AdminPhrases')->getPhraseByName('pages_edit_title',3),
            'decorators' => $this->elementDecorators,
        ));

        // add Page Title Element
        $this->addElement('text', 'order', array(
            'label'      => STC_Model::getInstance('AdminPhrases')->getPhraseByName('pages_edit_seo',3),
            'decorators' => $this->elementDecorators,
            'required'   => true,
            'validators' => array(                                 
                                array('Digits'),
                                array('GreaterThan', -1),
                            ),
        ));

        // Add the submit button
        $this->addElement('submit', STC_Model::getInstance('AdminPhrases')->getPhraseByName('save'), array(
            'decorators' => array(
                    'ViewHelper',
                    'Errors',
                    array(
                        array('data' => 'HtmlTag'), 
                        array('tag' => 'td', 'class' => 'td1', 'colspan' => '2', 'align' => 'center')
                    ),
                    array(
                        array('row' => 'HtmlTag'), 
                        array('tag' => 'tr')
                    ),
                ),
            'ignore'   => true,
        ));
        $element = $this->getElement(STC_Model::getInstance('AdminPhrases')->getPhraseByName('save'));
        $element->removeDecorator('label');
        $element->removeDecorator('DtDdWrapper');

        // And finally add some CSRF protection
        $this->addElement('hash', 'csrf', array(
            'ignore' => true,
        ));

        $element = $this->getElement('csrf');
        $element->removeDecorator('label');
        $element->removeDecorator('DtDdWrapper');
    }
} 
```

但它真正为每个标签做的是：

```
<td id="name-label"><label for="name" class="td2 required">Page Name</label></td> 
```

我怎样才能调整它，使标签是我想要的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:44:39.830

您可能会发现[viewScript](http://framework.zend.com/manual/1.12/en/zend.form.standardDecorators.html#zend.form.standardDecorators.viewScript)装饰器正是您所寻找的。

这个装饰器允许您将 Zend_Form 元素放入您描述的 HTML 中。

# php - Route.php 找不到我创建的控制器类

> ID：13200941
> 
> 赞同：4
> 
> 时间：2012-11-02T18:21:02.903
> 
> 标签：php, silex

我正在尝试构建一个 silex 应用程序。我的文件结构是：

```
根/
    /应用程序/
        /Controller/{IndexController.php}
        /Config/{dev.php,prod.php,route.php}
    /小贩
    /web/{index.php, index_dev.php}

```

当我试图查看时`http://localhost/web/`出现错误：

> PHP 致命错误：在第 2 行的 ../App/config/route.php 中找不到类 'App\Controller\IndexController'

以下是相关文件：

**index_dev.php**

```
<?php

require_once __DIR__.'/../vendor/autoload.php';

require __DIR__.'/../App/config/dev.php';
$app = require __DIR__.'/../App/app.php';

$app->run();

?> 
```

**应用程序.php**

```
<?php

use Silex\Application;
use Silex\Provider\TwigServiceProvider;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;

$app = new Application();

require __DIR__.'/config/route.php';
return $app;

?> 
```

**路由.php**

```
<?php

$app->mount('/', new App\Controller\IndexController());

?> 
```

**索引控制器.php**

```
<?php

namespace App\Controller;

use Silex\Application;
use Silex\ControllerProviderInterface;
use Silex\ControllerCollection;

class IndexController implements ControllerProviderInterface {

  public function index(Application $app) {
    return phpinfo();
  }

  public function connect(Application $app) {
    $controllers = $app['controllers_factory'];

    $app->get('/', 'App\Controller\IndexController::index');

    return $controllers;
  }

}

?> 
```

**作曲家.json**

```
{
    "require": {
        "silex/silex": "1.0.*"
    },
    "minimum-stability": "dev"
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T18:55:11.713

您在以下位置缺少 autoloder 选项`composer.json`：

```
"autoload": { "psr-0": { "App": "./" } } 
```

# c# - 使用 SSH 将 C# 应用程序与远程计算机连接

> ID：13200944
> 
> 赞同：0
> 
> 时间：2012-11-02T18:21:12.700
> 
> 标签：c#

嗨，我正在尝试使用 C# 构建应用程序。

该应用程序将使用 ssh 或类似方式连接到远程机器。

例如，它将连接到远程机器并从该进程获取正在运行的进程列表到我本地机器中的文本文件。

有什么简单的方法我可以做到。我查看了 sharshh，它看起来很旧，几乎没有文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:55:28.370

您可能想尝试[Codeplex 上的 SSH.Net 库](http://sshnet.codeplex.com/documentation)。

使用它非常简单，但您可能需要根据需要调整显示正在运行的进程的命令以适应您的场景：

```
using (var client = new SshClient("host", "username", "password"))
{
  client.Connect();
  var cmd = client.RunCommand("ps -ef");
  File.WriteAllText("your-process-file.txt", cmd.Result);
  client.Disconnect();
} 
```

# html - 可从网页导出的 SVG

> ID：13200948
> 
> 赞同：2
> 
> 时间：2012-11-02T18:21:19.537
> 
> 标签：html, svg

我如何`svg`在`html`没有往返服务器的情况下直接从浏览器下载页面？

我希望用户能够按下按钮，`svg`页面中的元素将本地保存在用户的计算机上，就像“下载为”功能一样。

我怎样才能做到这一点？

PS：请耐心等待：我今天有点慢。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:24:29.593

您可以使用数据 URI，可能像这样：

```
<a target="_blank" href="data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg'><circle r='30'/></svg>">Click here</a> 
```

SVG 将在新窗口中打开并可以保存。当然，点击链接后，不会弹出对话框，但需要用户手动保存文件。我不确定这是否可以进一步自动化。

# c - main() 的返回值会发生什么？

> ID：13200949
> 
> 赞同：2
> 
> 时间：2012-11-02T18:21:28.123
> 
> 标签：c, return, main

> **可能重复：**
> [main() 在 C/C++ 中应该返回什么？](https://stackoverflow.com/questions/204476/what-should-main-return-in-c-c)

```
#include<stdio.h>
int main()
{
    return 0;
} 
```

在上面给出的代码片段中，main 返回的 return 0 到哪里去了？或者换句话说，哪个函数在开始时调用了主函数。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T18:24:14.407

`main`由 C 运行时库中的某些启动函数调用。C 语言标准说从返回`main`等同于调用[`exit`](http://linux.die.net/man/3/exit)函数，所以大多数 C 运行时看起来像这样：

```
void _start(void)  /* Exact function signature may vary */
{
    /* Platform-specifi startup (e.g. fetch argc and argv from the OS) */
    ...
    int status = main(argc, argv);
    exit(status);
    /* Never reached */
} 
```

退出状态被传递回操作系统，然后从那里发生的事情取决于操作系统。

当您编译和链接您的程序时，可执行文件格式（例如 PE 或 ELF）包含一个起始地址，即开始执行的虚拟地址。该函数通常是 C 运行时库的一部分（如`_start`上面的示例）。该函数必须通过调用诸如 之类的系统调用来结束`exit`，因为如果它刚刚返回，它将无处可去：它只会从堆栈中弹出一个地址并跳转到该位置，这将是垃圾。

根据操作系统加载程序初始化进程的方式，程序参数`argc`、`argv`和其他数据（例如环境）可能作为函数参数（通过寄存器或堆栈）进入，或者它们可能需要系统调用（例如`GetCommandLine`在 Windows 上）检索它们。但是处理所有这些都是 C 运行时的工作，除非您明确地想尽办法避免使用 C 运行时，否则您不必担心这些细节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T18:24:41.490

您的编译器以特定平台为目标，其中包括用于启动进程的操作系统特定机制。该平台特定代码的一部分包含`main`. 当您将程序链接到可执行文件时，链接器会添加一段特定于操作系统的二进制代码，该代码负责调用`main`并将返回值报告回操作系统。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T18:24:42.123

返回值转到托管环境。通常，操作系统调用`main`并获取程序的退出状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T18:25:27.337

> main 返回的 return 0 去哪里了？或者换句话说，哪个函数在开始时调用了主函数。

It is called by the C startup library, a stub function that is called (almost) directly by the kernel. For example, on Linux and OS X, it's a function named `_start`. It has the same signature as `main()` and the operating system itself uses its return value.

# html - 使用视口元标记设置内容的最小宽度

> ID：13200950
> 
> 赞同：5
> 
> 时间：2012-11-02T18:21:30.913
> 
> 标签：html, responsive-design, meta-tags

我需要将内容的最小宽度设置为 480px，以便任何在屏幕上查看 <= 的人都必须滚动浏览内容。这样做的原因是不可能使布局低于此分辨率。

这就是我所拥有的

```
<meta name="viewport" content="width=device-width,  initial-scale=1, maximum-scale=1, minimum-scale=1"> 
```

我需要这样的东西，但显然这不起作用

```
<meta name="viewport" content="width=device-width,, min-width=480px,  initial-scale=1, maximum-scale=1, minimum-scale=1"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-31T17:35:20.890

这是一个仅适用于平板电脑和台式机的响应式 Web 版本的解决方案。

此代码我们动态禁用移动版本。在移动：

```
<!-- Meta Responsive -->
<meta id="myViewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<script>
window.onload = function () {
    if(screen.width <= 767) {
        var mvp = document.getElementById('myViewport');
        mvp.setAttribute('content','width=767');
    }
}
</script>
<!-- End of Meta Responsive --> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T18:44:35.837

听起来您正在尝试设置页面上内容的最小宽度，而不是视口本身。[这篇文章](http://www.quirksmode.org/mobile/viewports.html)可能会帮助你。

您可能希望这样做：

```
@media all and (max-width: 480px) {
    // styles assigned when width is smaller than 480px;

} 
```

像这样，在该块中，您可以在宽度为 480 像素及以下的屏幕上发送内容样式。

希望这就是你要找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T23:23:25.830

我尝试了很多代码并在重新加载视口方面取得了一些不错的效果......但是，我认为最好的方法是创建一个完全响应的网站（高达 320px ;）

那是最好的方法：

```
<script>
//VIEWPORT

function mobileFriendly() {
    setTimeout(function () {
        if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
            var ww = ( document.documentElement.clientWidth < window.screen.width ) ? jQuery(window).width() : window.screen.width; //get proper width
            var mw = 725; 
            //alert ("width" + ww);
            var ratio = ww / mw; //calculate ratio
            //alert ("ratio: " + ratio);
                if( ratio < 1 ){ //smaller than minimum size
                    jQuery("meta[name='viewport']").attr('content', 'initial-scale=' + ratio + ', maximum-scale=' + ratio + ', minimum-scale=' + ratio + ', user-scalable=yes, width=' + mw);
                }else{ //regular size
                    jQuery("meta[name='viewport']").attr('content', 'initial-scale=1.0, maximum-scale=2, minimum-scale=1.0, user-scalable=yes, width=' + ww);
                }
            }
        }, 600);
    }
    jQuery( document ).ready( function(){
    mobileFriendly()
    });
    window.addEventListener("orientationchange", mobileFriendly, false);

</script>
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<meta content="user-scalable=yes, maximum-scale=1.6, width=device-width, initial-scale=1, target-densitydpi=device-dpi" name="viewport">
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-24T18:14:16.277

您的第二个解决方案实际上确实有效 - 您可能没有看到 2 之后有 2 个逗号`width=device-width`，这可能就是您没有让它工作的原因。我已经复制了它，没有任何问题。

有时新鲜的眼睛可以做到这一切。

编辑：但是，是的，就您而言，媒体查询正是您所需要的。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-06-19T09:18:48.367

```
<script>
        //viewport just for screens under/with 480px width other screen widths show the whole page resized
        if(screen.width <= 480) {
            document.getElementById("viewport").setAttribute("content", "width=device-width, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;");} 
        //for devices with more and less/equal than 480px width 
        window.onresize = changeViewport;
            function changeViewport(){
                if(screen.width <= 480) {
                    document.getElementById("viewport").setAttribute("content", "width=device-width, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;");} 
                if(screen.width > 480) {
                    document.getElementById("viewport").setAttribute("content", "");}           
                }
    </script> 
```

# objective-c - objc_msgSend 15 崩溃

> ID：13200951
> 
> 赞同：1
> 
> 时间：2012-11-02T18:21:41.047
> 
> 标签：objective-c, ios, c, xcode, crash

我正在尝试追踪一个错误，并且我有一个看起来像这样的崩溃日志：

```
0    libobjc.A.dylib     objc_msgSend + 15

1    CoreFoundation  __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 14

2    CoreFoundation  __CFRunLoopDoTimer + 272

3    CoreFoundation  __CFRunLoopRun + 1232

4    CoreFoundation  CFRunLoopRunSpecific + 356

5    CoreFoundation  CFRunLoopRunInMode + 104

6    GraphicsServices    GSEventRunModal + 74

7    UIKit   UIApplicationMain + 1120

8    MyApp  main.m line 21 
```

不幸的是，MyApp 行是所有线程中唯一提到我的应用程序的地方。

任何可能导致这样的崩溃的指针？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:13:54.340

该应用程序正在尝试调用不再存在的东西。并且调用是通过计时器或类似的东西从另一个运行循环触发的，但已经被释放。

因此，您可能想检查是否在对象上设置了任何计时器，这些计时器在计时器触发之前可能会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T12:11:34.917

就像其他答案所暗示的那样，这是因为僵尸对象。正在对实例已被释放的对象进行调用。

尝试使用僵尸工具并在方案中启用僵尸对象来定位崩溃。这应该可以帮助您确定哪个对象被释放以及哪个方法导致了崩溃。大多数情况下，这发生在使用委托时。

这应该会有所帮助：[https ://developer.apple.com/library/ios/recipes/Instruments_help_articles/FindingMessagesSenttoDeallocatedObjects/FindingMessagesSenttoDeallocatedObjects.html](https://developer.apple.com/library/ios/recipes/Instruments_help_articles/FindingMessagesSenttoDeallocatedObjects/FindingMessagesSenttoDeallocatedObjects.html)

# linux - Bash：通过 ssh 启动远程 python 应用程序并获取其 PID

> ID：13200965
> 
> 赞同：7
> 
> 时间：2012-11-02T18:22:53.403
> 
> 标签：linux, bash, ssh, remote-access, pid

我正在创建一个小 bash 脚本来将新文件从 windows 机器复制到远程 linux centos 服务器（我使用 git-shell 运行这个脚本）然后我想重新启动在服务器中运行的 python 应用程序以使用那些新的文件。

问题是，每次我运行这个脚本时，我都想在再次启动之前结束实际运行的进程，所以我想获取我启动的进程的 pid 并将其保存到远程主机中的文件中，以便我可以读取它从那里下次我运行程序并杀死它。

我的代码现在看起来类似于：

```
echo "Copying code files to server..."
# The destination folder has to exist in the server
scp -r ./python/ root@myserver:/root/

echo "Checking for running processes..."

if ssh root@myserver 'ls dmr.pid >/dev/null'; then
    echo "PID file exists, reading file..."
    PID=$(ssh root@myserver 'cat dmr.pid')

    # Terminate the actual process
    echo "Terminating the process with PID '$PID'..."
    ssh root@myserver 'kill $PID'
else
    echo "PID file doesn't exist, not known processes running"
fi

# Restart the server and get the PID
echo "Restarting the server..."
ssh root@myserver 'python /root/python/run_dev_server.py > /dev/null 2>&1 &'

SERV_PID=$(ssh root@myserver 'echo $!')

echo "Saving PID to file dmr.pid"
ssh root@myserver "echo '$SERV_PID' > \"dmr.pid\""

echo "Sucesfully finished!" 
```

重要的几行是：

```
ssh root@myserver 'python /root/python/run_dev_server.py > /dev/null 2>&1 &'
SERV_PID=$(ssh root@myserver 'echo $!') 
```

这样做的问题是脚本完成但文件最终为空以及 $SERV_PID 变量。

如果我不重定向输出而只是做这样的事情：

```
SERV_PID=$(ssh root@myserver 'python /root/python/run_dev_server.py & echo $!') 
```

我在“重新启动服务器”后卡住了，永远不会得到 PID 或包含它的文件，甚至脚本的结尾。

但是如果我在控制台中运行它：

```
ssh root@myserver 'python /root/python/run_dev_server.py & echo $!' 
```

我得到一个打印到终端的PID。

对此的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:12:51.750

```
ssh root@myserver 'python /root/python/run_dev_server.py > /dev/null 2>&1 &'
SERV_PID=$(ssh root@myserver 'echo $!') 
```

使用上面的代码，您正在运行两个 ssh 命令，并且都创建了两个不同的 shell。问题是从*当前*shell 中`echo $!`给出了最新的后台进程的 ID，它是无的。

 *也就是说，当您第二次 ssh 时，它是*新*的shell，并且没有后台进程在其中运行，因此`echo $!`没有输出。这解释了为什么您的 PID 文件为空。

相反，您可以做的是查找 python 脚本的所有实例并使用`killall`命令杀死它们。`ps`或使用命令的类似想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T20:05:25.277

感谢 Kingslndian，我通过一个命令完成了我需要的三个步骤来解决它，因此避免了在不同 shell 中运行的问题：

```
 ssh root@myserver 'python /root/python/run_dev_server.py > /dev/null 2>&1 & echo $! > "dmr.pid"' 
```*

# java - Grails/Spring 集成应用程序中的意外 Unicode 翻译

> ID：13200972
> 
> 赞同：1
> 
> 时间：2012-11-02T18:23:02.363
> 
> 标签：java, grails, unicode, spring-integration, clob

我有一个 Grails 应用程序，其中包含一个基于 Java 的 Spring Integration 驱动的电子邮件适配器。电子邮件适配器处理来自单一来源的电子邮件，并根据业务规则，通过更新一些内部表格（包括将电子邮件的 HTML 正文添加到 Oracle`CLOB`以供参考）将某些通信报告回用户。

大约有一半的时间，HTML 中的链接在添加到 CLOB 时会损坏。例如，“ **=df** ”被解释为 Unicode **U+00DF**，并转换为“ **ß** ”（拉丁小写字母 SHARP S），“ **=20** ”被转换为**空格**。这两个意外的映射都会破坏链接。

```
http://www.mycompany.com/MyProject/MyApp.xxx?field1=dfa1.0&field2=2.0&field3=20012345&field4=N

http://www.mycompany.com/MyProject/MyApp.xxx?field1ßa1.0&field2=2.0&field3 012345&field4=N 
```

这种损坏并非一直都在发生，我也无法确定它何时发生的模式。

这是唯一“接触”电子邮件中 ​​HTML 内容的代码......

```
public void processMessage(Message<?> message) {
    if (message.getPayload() instanceof MimeMessage) {
        MimeMessage mimeMessage = (MimeMessage) message.getPayload();
        try {
            String subject = mimeMessage.getSubject();

            logger.info("Subject : " + subject);

            // Get the main body of the message -- Assumes the email is in HTML format and
            // uses that to isolate the interesting bits of the email to analyze
            String content = convertStreamToString(MimeUtility.decode(mimeMessage.getDataHandler().getDataSource().getInputStream(), "quoted-printable"));
            logger.info("Content Length (bytes) : " + content.length());
            int htmlStart = content.indexOf(HTML_START);
            int htmlEnd = content.lastIndexOf(HTML_END);
            String html;
            try {
                html = content.substring(htmlStart, htmlEnd + HTML_END.length());
            } catch (IndexOutOfBoundsException e) {
                // Don't try and prune the string
                html = content;
            }

            // Do the major processing of the actual HTML contents. This is where the magic happens.
            processHtmlMessageContent(html);

        } catch (MessagingException e) {
            logger.error("Error in processing message:", e);
        } catch (IOException e) {
            logger.error("Error in processing message:", e);
        }
    } else {
        logger.error("DON'T KNOW HOW TO PROCESS [" + message.getPayload().getClass() + "] MESSAGE");
    }
    logger.info("Done.");
} 
```

我怀疑问题出在`convertStreamToString`or中`MimeUtility.decode`，但我无法隔离它。当它存储在 a 中时，我也不排除一些奇怪之处`CLOB`，但我发现这不太可能。

作为参考，我的`convertStreamToString()`方法是...

```
protected String convertStreamToString(java.io.InputStream is) {
    try {
        return new java.util.Scanner(is).useDelimiter("\\A").next();
    } catch (java.util.NoSuchElementException e) {
        return "";
    }
} 
```

我试过换...

```
String content = convertStreamToString(MimeUtility.decode(mimeMessage.getDataHandler().getDataSource().getInputStream(), "quoted-printable")); 
```

至...

```
String content = convertStreamToString(mimeMessage.getDataHandler().getDataSource().getInputStream()); 
```

但现在我失去了基本的 mime 解码。

我还尝试使用 MimeUtility 来获取编码

```
String encoding = MimeUtility.getEncoding(mimeMessage.getDataHandler().getDataSource()); 
```

这会返回`7bit`，我已经尝试过使用它，但后来我得到`=3D`了等号之类的东西。

在解码的内容中，我得到以下内容，这表明`quoted-printable`

```
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable 
```

我已经浏览了 javadocs、源代码和在线示例，但这对我来说真的没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:05:19.803

您看到的转换完全是引用可打印的解码，所以我怀疑您正在尝试解码最初不是 QP 编码的数据。您可能应该检查的标头来`mimeMessage`决定您需要做什么解码，而不是无条件地执行 Q​​P。

# android - 带有九个补丁的代码中的Android ScaleAnimation不起作用

> ID：13200975
> 
> 赞同：3
> 
> 时间：2012-11-02T18:23:32.643
> 
> 标签：android, animation, button, scale, nine-patch

我有一个显示“登录”的按钮。当用户点击它时，它会弹出一个警告对话框，其中包含用户登录信息。一旦用户输入他们的信息并点击 OK，按钮就会伸展到包含“欢迎，[用户名]”所需的宽度。我想要做的是将按钮宽度从“登录”更改为“欢迎，[用户名]”的动画。

我用九个补丁制作了按钮背景，如果我在 xml 文件中指定不同的宽度，它可以完美地工作。当我尝试将宽度从默认宽度更改为更长的宽度时，它只会像普通的 .png 而不是 9.png 一样拉伸。

这是我用来从一个静态宽度拉伸到另一个静态宽度的代码：

```
<Button
    android:id="@+id/signIn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:background="@drawable/button_nine_patch"
    android:textSize="20dip"
    android:layout_marginBottom="-2dip" /> 
```

和

```
 ScaleAnimation stretch = new ScaleAnimation(1.0f ,10.0f, 1.0f, 1.0f);

 this.signIn = (Button) this.findViewById(R.id.signIn);
 this.signIn.setOnClickListener(this);

 stretch.setDuration(2000);
 signIn.startAnimation(stretch); 
```

因为我不知道一个人的名字有多少个字母，所以我需要能够从代码中设置按钮的最终宽度。

我疯狂地用谷歌搜索并浏览了所有的android文档，但我找不到这个问题的答案。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T01:01:22.800

当 Android 在视图上进行动画处理时，它会为当前视图而不是实际视图的*位图表示动画。*为视图设置动画需要处理视图周围的组件，并且成本会高得多。虽然这通常是有益的，但在您的情况下，它会将 9patch 变成任何旧位图，因此不会给您想要的结果。

我不知道有什么方法可以只转换视图的特定区域，并且在这里有一个专门针对此的问题：[拉伸/缩放视图/位图的特定区域](https://stackoverflow.com/questions/16225973/stretch-scale-a-specific-region-of-view-bitmap)

# java - Mac OS X 上所有空间中的 JFrame

> ID：13200982
> 
> 赞同：0
> 
> 时间：2012-11-02T18:23:43.667
> 
> 标签：java, macos, spaces

我正在尝试在 Java 应用程序（JFrame）中创建一个窗口，在 Mac OS X 10.5 及更高版本的所有空间之间跟随用户，但我似乎无法找到如何做到这一点。我找到了如何在 Objective-C 中做到这一点，但是在 Java 中必须有一些方法来做到这一点！

如何在 Objective-C 中做到这一点：http: [//www.cocoabuilder.com/archive/cocoa/192813-floating-window-across-all-spaces.html](http://www.cocoabuilder.com/archive/cocoa/192813-floating-window-across-all-spaces.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:27:25.243

由于它非常特定于平台，因此听起来您必须编写某种 JNI/JNA 才能做到这一点。幸运的是，有人可能已经为您完成了这项工作 - 查看**http://code.google.com/p/rococoa/**

[这个线程](http://java.net/projects/rococoa/lists/users/archive/2009-01/message/33)有一些关于获取 NSWindow 的 API 的信息。

# php - 为什么我的文件上传脚本不起作用？

> ID：13200983
> 
> 赞同：0
> 
> 时间：2012-11-02T18:23:47.370
> 
> 标签：php, html, file-upload

你知道这里有什么问题吗？我什么也找不到。

这打印：

```
echo $_FILES["new_text_file"]["name"]; 
```

这也是：

```
echo $_FILES["new_text_file"]["tmp_name"]; 
```

**php:**
"; echo $_FILES["new_text_file"]["tmp_name"]; //上传文本文件到服务器

```
 if(move_uploaded_file($_FILES["new_text_file"]["tmp_name"]), $_FILES["new_text_file"]["name"]) 
        {
            //header('Location: ga-dev-exercise-pavan.php');
            echo 'worked';
        }else {
            echo 'did not work';
        }
}
?> 
```

**html:**

```
 <form enctype="multipart/form-data" action="ga-dev-exercise-pavan.php" method="POST">
        Choose a text file you want to upload and search through: 
        <input type='file' name='new_text_file'>

        <input type="hidden" name="submit_yes_file" value="true" />
        <br /><br />
        <input type="submit" value="upload">
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:28:10.077

你应该指定一个目标路径

```
$target_path = "uploads/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
} 
```

[http://www.tizag.com/phpT/fileupload.php](http://www.tizag.com/phpT/fileupload.php)

**编辑：** 如评论中所述，括号放错了位置：

**错误的 ：**

if(move_uploaded_file($_FILES["new_text_file"]["tmp_name"]), $_FILES["new_text_file"]["name"])

**正确的**

if(move_uploaded_file($_FILES["new_text_file"]["tmp_name"], $_FILES["new_text_file"]["name"]))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T18:31:04.197

不会自动允许您将上传的文件移动到任何地方。您需要将其移动到您的 PHP 脚本有权写入的位置。

所以例如

```
$src = $_FILES["new_text_file"]["tmp_name"];
$dst = './tmp_dir/'.basename($_FILES["new_text_file"]["name"]);

if (move_uploaded_file($src, $dst))
{ 
```

保护您免受用户指定恶意文件路径的`basename`影响（对重复的文件名没有任何作用），它`tmp_dir`是您可以写入的目录。

使用`$src`并`$dst`清除一些代码，并让我看到您的示例中有一个额外的括号......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T20:10:39.380

括号去掉了。它应该是这样的：

```
if(move_uploaded_file($_FILES["new_text_file"]["tmp_name"], $_FILES["new_text_file"]["name"])) 
```

# jquery - Select2 和 CSS 变换：下拉菜单处于关闭位置

> ID：13200987
> 
> 赞同：3
> 
> 时间：2012-11-02T18:24:29.297
> 
> 标签：jquery, css, transform

我正在使用[select2 jQuery 选择框替换](http://github.com/ivaynberg/select2)，但我遇到了 CSS 变换的问题。

基本上，我在页面上有一个按钮，可以增加转换和字体大小属性。当变换为 1.25 时，选择框的下拉菜单处于关闭位置。

我的 jsFiddle 测试 1（默认缩放）：http: [//jsfiddle.net/ugPmm/1/](http://jsfiddle.net/ugPmm/1/)

我的 jsFiddle 测试 2（放大倍数）：http: [//jsfiddle.net/wCALL/2/](http://jsfiddle.net/wCALL/2/)

在测试 2 中，您可以看到下拉菜单本身没有正确定位。

我在 CSS 中所做的页面修改是：

```
.zoom-largest {
  font-size: 18px; }

body.zoom-largest {
    -o-transform: scale(1.25);
    -moz-transform: scale(1.25);
    -ms-transform: scale(1.25);
    -webkit-transform: scale(1.25);
    transform: scale(1.25);
} 
```

是什么导致下拉菜单的位置不正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:22:59.223

这是 jquery 如何计算已应用 css 转换的元素上的偏移量的错误。Tt 应该返回未转换的像素值，但它会计算并返回转换后的像素值。

这是关于该问题的 jquery bug 票：http:
[//bugs.jquery.com/ticket/8362](http://bugs.jquery.com/ticket/8362)

下面是stackoverflow对offset问题的解释和解决方法：
[Webkit and jQuery draggable jumping](https://stackoverflow.com/questions/3523747/webkit-and-jquery-draggable-jumping/8730874#8730874)

因此，select2 jquery 插件获取了错误的偏移值并使用错误的像素值定位下拉菜单。

我们可以做的是替换 select2 插件中的 offset 调用来修复错误：

替换它（第 986 行）：

```
var offset = this.container.offset(), 
```

有了这个：

```
var offset = { top: this.container[0].offsetTop, left: this.container[0].offsetLeft }, 
```

演示：http:
[//jsfiddle.net/wCALL/3/](http://jsfiddle.net/wCALL/3/)