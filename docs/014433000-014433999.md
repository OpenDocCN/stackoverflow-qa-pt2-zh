# StackOverflow 问答 14433000-14433999

# ios - UIAccessibility 删除 UITableViewCells

> ID：14433001
> 
> 赞同：0
> 
> 时间：2013-01-21T05:16:29.587
> 
> 标签：ios, uitableview, cocoa-touch, voiceover, uiaccessibility

从 ios6 开始，在邮件和消息等原生应用程序中，如果打开了旁白，并且您点击其中一个表格视图单元格（即电子邮件），然后转动两根手指以调出转子，那么其中一个可以选择的选项是“操作”，它允许您删除该表格视图单元格。

我想知道是否有人知道如何在 SDK 中执行此操作？我试图实现同样的事情。我知道这是可能的，因为 Dropbox 已经实现了该功能，但经过数小时的搜索，我似乎找不到任何有关如何执行此操作的信息。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T03:21:33.643

经过一天的沮丧和查看博客和反复试验，我终于找到了简单的解决方案：

为您的 tableview 的委托实现此方法：

```
-(UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:    (NSIndexPath *)indexPath{

    return UITableViewCellEditingStyleDelete;
} 
```

一切都会神奇地到位！

# qt - 将 Qt 4.8 转换为 5 QPluginLoader->instance 返回 null

> ID：14433007
> 
> 赞同：3
> 
> 时间：2013-01-21T05:17:10.637
> 
> 标签：qt, qt5

我使用 QT 4.8.2 编写了一个应用程序。它确实动态加载不同的插件以为用户提供多种功能。现在 Qt5 发布了，我想将我的项目转换为最新版本。

除了使用 QPluginLoader->instance() 加载插件外，我得到了一切工作。在使用 Qt 4.8.2 时，它运行良好。

->errorString 说：“文件 '.../plugins/nlprod.dll' 不是有效的 Qt 插件。”</p>

那是我的代码：

插件加载器.cpp：

```
//"fileName" contains the name of the .dll
pluginLoader->setFileName(pluginsDir->absoluteFilePath(fileName));

//"a" contains the correct path + name of the .dll
QString a = pluginLoader->fileName();      

//"plugin" is null and success "false"
QObject *plugin = pluginLoader->instance();
bool success = pluginLoader->isLoaded(); 
```

我的插件.h：

```
class NLPro : public QObject, IConnection
{
    Q_OBJECT
    Q_PLUGIN_METADATA(IID "NLPro" FILE "nlpro.json") // <- New since I've ported to Qt 5
    Q_INTERFACES(IConnection)
...
} 
```

MyPlugin.cpp：我删除了以下内容：

```
Q_EXPORT_PLUGIN2(NLPro, NLPro); 
```

我添加了一个包含以下内容的 .json 文件：

```
{ "Keys": [ "NLPro"] } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-13T10:04:02.530

*OP的解决方案。*

解决它：

尽管

```
TARGET = $$qtLibraryTarget(nlpro) 
```

与 Qt 4.8 一起正常工作我不得不将其更改为

```
TARGET = $$qtLibraryTarget(NLPro) 
```

对于 Qt 5.0

# javascript - 为什么需要调用对象（构造函数）中的函数才能使用使用.this（JavaScript）的方法

> ID：14433008
> 
> 赞同：0
> 
> 时间：2013-01-21T05:17:11.483
> 
> 标签：javascript, object, methods

```
var setAge = function (newAge) {
  this.age = newAge;
};
// now we make bob
var bob = new Object();
bob.age = 30;
bob.setAge = setAge;
bob.setAge(50);
console.log(bob.age); 
```

这行得通，但是当我尝试这样做时

```
var setAge = function (newAge) {
  this.age = newAge;
};
var bob = new Object();
bob.age = 30;
bob.setAge(50);
console.log(bob.age); 
```

它在编译器中返回“bob.setAge() 不是函数”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:19:34.513

第二个示例不起作用，因为您没有定义 setAge，就像您在此处定义的那样`bob.setAge = setAge;`。您创建了一个`new Object()`，而不是一个新的自定义对象。你正在使用排序混合代码......这就是你可以做“类”的方式

```
var MyObject = function (age) {
  this.age = age;
  var that = this;
  this.setAge = function (newAge) {
    that.age = newAge;
  }
};
var foo = new MyObject(10);
alert(foo.age);
foo.setAge(20);
alert(foo.age); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T05:20:14.453

您创建了一个对象“Bob”，但该对象在分配之前没有方法“setAge”。

您可能想考虑在您的设计中做这样的事情：

```
function Person(){
this.age = 30;
this.setAge = function(age){
 this.age = age;
 return this;
}
}

var bob = new Person;
bob.setAge(20);
console.log(bob.age); 
```

# java - 如何显示具有路径的图像？

> ID：14433014
> 
> 赞同：2
> 
> 时间：2013-01-21T05:18:07.123
> 
> 标签：java, android

我正在尝试显示具有绝对路径的图像。我在stackoverflow上遇到了这段代码，理论上应该可以工作，但是我`Bitmap too big to be uploaded into a texture`在大多数图像上都遇到了错误，所以我正在寻找另一种方法来做到这一点。令人惊讶的是，除了这个之外，没有任何关于如何做到这一点的例子。

这就是我正在尝试的：

```
Bitmap myBitmap = BitmapFactory.decodeFile(imagePath);                  
ImageView image = new ImageView(context);
image.setImageBitmap(myBitmap);
layout.addView(image); 
```

顺便说一句，我正在使用的图像是使用默认相机应用程序拍摄的，因此它们没有任何不常见的格式或大小（并且可以在图库应用程序上毫无问题地看到）。如何将它们添加到我的布局中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:37:01.763

您可能希望使用`inSampleSize`适合堆的较小样本大小 ( )

首先，创建一个适合堆的位图，可能比您需要的略大

```
BitmapFactory.Options bounds = new BitmapFactory.Options();
this.bounds.inJustDecodeBounds = true;
BitmapFactory.decodeFile(filePath, bounds);
if (bounds.outWidth == -1) { // TODO: Error }
int width = bounds.outWidth;
int height = bounds.outHeight;
boolean withinBounds = width <= maxWidth && height <= maxHeight;
if (!withinBounds) {
    int newWidth = calculateNewWidth(int width, int height);
    float sampleSizeF = (float) width / (float) newWidth;
    int sampleSize = Math.round(sampleSizeF);
    BitmapFactory.Options resample = new BitmapFactory.Options();
    resample.inSampleSize = sampleSize;
    bitmap = BitmapFactory.decodeFile(filePath, resample);
} 
```

第二步是调用 Bitmap.createScaledBitmap() 来创建一个新的位图到你需要的精确分辨率。

确保在临时位图后清理以回收其内存。（要么让变量超出范围并让 GC 处理它，要么在加载大量图像并且内存紧张时调用 .recycle() 。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T05:51:01.040

只需尝试先使用以下代码调整图像大小，然后将其设置为`ImageView`：

> ```
>  public static Drawable GetDrawable(String newFileName)
> {
>     File f;
>     BitmapFactory.Options o2;
>     Bitmap drawImage = null;
>     Drawable d = null;
>     try
>     {           
>         f = new File(newFileName);          
>         //decodes image and scales it to reduce memory consumption
>         //Decode image size
>         BitmapFactory.Options o = new BitmapFactory.Options();
>         o.inJustDecodeBounds = true;            
>         o.inTempStorage = new byte[16 * 1024];          
>         BitmapFactory.decodeStream(new FileInputStream(f), null, o);            
>         //The new size we want to scale to
>         final int REQUIRED_SIZE = 150;          
>         //Find the correct scale value. It should be the power of 2.
>         int scale = 1;
>         while ((o.outWidth / scale / 2 >= REQUIRED_SIZE) && (o.outHeight / scale / 2 >= REQUIRED_SIZE))
>             scale *= 2;         
>         //Decode with inSampleSize
>         o2 = new BitmapFactory.Options();
>         o2.inSampleSize = scale;            
>         drawImage = BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
>         //Bitmap bmp = pictureDrawableToBitmap((PictureDrawable) drawable);         
>         d = new BitmapDrawable(drawImage);
>         //drawImage.recycle();
>         //new BitmapWorkerTask          
>     }
>     catch (FileNotFoundException e)
>     {
>     }
>     return d;
> } 
> ```

使用上述方法如下：

> imageView.setImageBitmap(myBitmap);

# php - PHP：数组中的非重复选择

> ID：14433019
> 
> 赞同：2
> 
> 时间：2013-01-21T05:18:31.210
> 
> 标签：php, arrays, random

在我的 php 脚本中，我有一个变量 $data ，其中包含一个可能有不同数量元素的数组。

该脚本随机选择一个数组元素并将其输出到浏览器：

```
# count number of elements in $data
$n = count($data);

# pick a random number out of the number of elements in $data
$rand = rand(0, ($n - 1));

# output a random element
echo '<p> . trim($data[$rand]) . '</p>'; 
```

问题：我想改进该脚本，使其在数组元素用完之前不会再次输出相同的数组元素。例如，如果一个数组包含编号为 0 到 9 的元素，并且脚本选择了一个数组元素 #4，我希望它记住这一点，并在下次运行脚本时排除 #4 的元素。

它可能可以通过许多不同的方式完成，但我正在寻找最简单和最优雅的解决方案，并感谢 PHP 专家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T05:24:11.883

保存已在用户会话中选择的号码。

```
session_start();
$n = count($data); 

// If the array isn't initialized, or we used all the numbers, reset the array
if( !isset( $_SESSION['used_nums']) || count( $_SESSION['used_nums']) == $n) {
    $_SESSION['used_nums'] = array();
}

do{ 
    $rand = rand(0, ($n - 1));
} while( isset( $_SESSION['used_nums'][$rand]));

echo '<p>' . trim($data[$rand]) . '</p>';    
$_SESSION['used_nums'][$rand] = 1; 
```

* * *

或者，也许是更聪明的方式，使用[`array_intersect_key`](http://php.net/array_intersect_key)and [`array_rand`](http://php.net/array_rand)：

```
session_start();
$n = count($data); 

// If the array isn't initialized, or we used all the numbers, reset the array
if( !isset( $_SESSION['used_nums']) || count( $_SESSION['used_nums']) == $n) {
    $_SESSION['used_nums'] = array();
}

$unused = array_intersect_key( $data, $_SESSION['used_nums'];
$rand = array_rand( $unused);

echo '<p>' . trim($unused[$rand]) . '</p>';    
$_SESSION['used_nums'][$rand] = 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T06:12:26.927

您可以对数组进行洗牌，然后简单地对其进行迭代：

```
shuffle($data);
foreach ($data as $elem) {
    // …
} 
```

如果您不想更改数组顺序，您可以简单地打乱数组的键：

```
$keys = array_keys($data);
shuffle($keys);
foreach ($keys as $key) {
    // $data[$key]
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T05:24:26.597

您可以使用会话来存储您目前使用的索引。试试这个。

```
session_start();

$used = &$_SESSION['usedIndexes'];

// used all of our array indexes
if(count($used) > count($data)) 
    $used = array();

// remove the used indexes from data
foreach($used as $index)
    unset($data[$index]);

$random = array_rand($data);

// append our new index to used indexes
$used[] = $random;

echo '<p>', trim($data[$random]) ,'</p>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T05:22:23.980

```
$selection=$x[$randomNumber];
unset($x[$randomNumber]); 
```

# configuration - 在 Spring Framework 下： WARN: WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader)

> ID：14433023
> 
> 赞同：4
> 
> 时间：2013-01-21T05:18:49.057
> 
> 标签：configuration, log4j, slf4j, appender

我花了一整天的时间来解决我在 webapp 中使用 log4j 时遇到的日志记录问题。无论我做什么，我都无法摆脱以下内容：

```
log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

为了清楚起见，我已经阅读了 Stack Overflow 上解决这个问题的所有文章。我已经阅读了 log4j 手册。我已经完成了十几个不同的教程。我已经尝试过属性方法和 XML 方法（分别为 log4j.properties 和 log4j.xml）。另外，我已经确认正在读取 log4j.xml 文件。除了服务器在启动期间告诉我这一点之外，我还可以通过 .xml 文件影响反馈级别。所以，是的，log4j.xml 文件位于 CLASSPATH 中。

我知道我缺少一些简单而基本的东西。以下是相关文件：

LOG4J.XML (/WEB-INF):

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration PUBLIC "-//APACHE//DTD LOG4J 1.2//EN" "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

<!-- Appenders -->
<appender name="console" class="org.apache.log4j.ConsoleAppender">
    <param name="Target" value="System.out" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%-5p: %c - %m%n" />
    </layout>
</appender>

<!-- Application Loggers -->
<logger name="com.tiersoftinc.testlog">
    <level value="info" />      
</logger>

<!-- 3rdparty Loggers -->
<logger name="org.springframework.core">
    <level value="info" />      
</logger>

<logger name="org.springframework.beans">
    <level value="info" />      
</logger>

<logger name="org.springframework.context">
    <level value="info" />      
</logger>

<logger name="org.springframework.web">
    <level value="info" />      
</logger>

<!-- Root Logger -->
<root>
    <priority value="warn" />
    <appender-ref ref="console" />
</root>

</log4j:configuration> 
```

和 WEB.XML (/WEB-INF)：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets and Filters, and the applicationContext.xml file -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring/root-context.xml
        /WEB-INF/spring/app-context.xml         
    </param-value>      
</context-param>    

<!-- Logging listener -->
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener>
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/log4j.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>      
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>           
    </init-param>       
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>  

</web-app> 
```

和 APP-CONTEXT.XML (/WEB-INF/spring):

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:p="http://www.springframework.org/schema/p"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

<!-- Activates various annotations to be detected in bean classes -->   
<context:annotation-config />   

<!-- Scans the classpath for annotated components that will be auto-registered as Spring beans. 
For example @Controller and @Service. Make sure to set the correct base-package --> 
<context:component-scan base-package="com.tiersoftinc.gridlab3" />   

<!-- Configures the annotation-driven Spring MVC Controller programming model.  
Note that, with Spring 3.0, this tag works in Servlet MVC only! --> 
<mvc:annotation-driven />

<mvc:resources mapping="/resources/**" location="/resources/" />        

<!-- Imports datasource configuration -->   
<import resource="app-context-mongo.xml"/>

</beans> 
```

和 APP-CONTEXT-MONGO.XML (/WEB-INF/spring)：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:c="http://www.springframework.org/schema/c"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mongo="http://www.springframework.org/schema/data/mongo"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                    http://www.springframework.org/schema/tx
                    http://www.springframework.org/schema/tx/spring-tx-3.1.xsd                      
                    http://www.springframework.org/schema/context                       
                    http://www.springframework.org/schema/context/spring-context-3.1.xsd                        
                    http://www.springframework.org/schema/data/mongo                        
                    http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd                       
                    http://www.springframework.org/schema/util                      
                    http://www.springframework.org/schema/util/spring-util-3.1.xsd">    

<!-- Activate Spring Data MongoDB repository support -->
<mongo:repositories base-package="com.tiersoftinc.gridlab3.repository" />

<bean id="propertyPlaceholderConfigurer"   
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">  
    <property name="locations">  
        <list>  
            <value>/WEB-INF/spring/database.properties</value>  
        </list>  
    </property> 
</bean>  

<!-- MongoDB host -->
<mongo:mongo host="${mongo.host.name}" port="${mongo.host.port}"/> 

<!-- Template for performing MongoDB operations -->
<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate"

c:mongo-ref="mongo" c:databaseName="${mongo.db.name}"/>

<!-- Service for initializing MongoDB with sample data using MongoTemplate -->
<bean id="initGridLab3Service" class="com.tiersoftinc.gridlab3.services.InitGridLab3Service" init-method="init"/>   

</beans> 
```

最后，ROOT-CONTEXT.XML (/WEB-INF/spring)：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">    

<!-- Root Context: defines shared resources visible to all other web components -->     
<context:annotation-config />

</beans> 
```

我错过了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T07:43:34.677

你试过这个吗？

```
 <logger name="org.springframework.web">
     <level value="info" /> 
     <appender-ref ref="console" />     
 </logger> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-21T04:54:42.793

将这些行放在您的开头`web.xml`：

```
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener>
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>classpath:/main/resources/log4j.xml</param-value>
</context-param> 
```

# java - 想要获取单个数据库值

> ID：14433025
> 
> 赞同：0
> 
> 时间：2013-01-21T05:18:51.610
> 
> 标签：java, sql, database, swing, resultset

我有一个登录表单，如果登录成功。我想获取记录的名称，请参见我的代码：

```
 try {
             if(jTextField1.getText().equals(""))
        {
              JOptionPane.showMessageDialog(null, "Pleass Input Username");
        }
        else if(jPasswordField1.getText().equals(""))
        {
              JOptionPane.showMessageDialog(null, "Please Input Password");
        }
        else
        {
            rs = con.executeQuery("SELECT * FROM MsEmployee WHERE EmployeeID='"+jTextField1.getText()+"' And Password='"+jPasswordField1.getText()+"'");
            if (rs.next())
            {
             help.IDemployee = jTextField1.getText(); 
             JOptionPane.showMessageDialog(null, "Login Success! welcome "+ help.IDemployee);
             MainMenu mm = new MainMenu(true);
             mm.setVisible(true);
             this.dispose();
            }else
            {
            JOptionPane.showMessageDialog(null, "Username not found!!");
            }
        }
        } catch (SQLException ex) {
            JOptionPane.showMessageDialog(null,ex.getMessage());
        } 
```

所以我想显示它`EmployeeName`从中`MSEmployee`获得的`EmployeeID`。我认为是这样的：

```
String qry;
qry = "Select EmployeeName From MsEmplyee WHERE EmployeeID = '" + jtextField1.gettext() + "'" ; 
```

但是当我编译时，它只是打印上面的文本，而不是获取值。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:29:34.080

你可以试试这个！

String EmployeeName = rs.getString("数据库中的列标签（如 EmployeeName）");

System.out.println(EmployeeName);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:26:54.503

正如评论中所建议的，请检查哪个名称 MsEmplyee/MsEmployee 是正确的。

这与您的问题无关，但我认为您的代码可以有一个（可能的）改进。

而不是使用

```
if(jTextField1.getText().equals("")) 
```

在使用 equals() 方法之前最好使用 trim() 方法。因此，如果用户在 jTextField1 中输入一个空格，在这种情况下您的检查将被绕过。所以最好使用 trim() 方法从字符串中删除所有第一个和最后一个空格字符。

```
if(jTextField1.getText().trim().equals("")) 
```

密码字段也可以这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:38:12.263

您没有读取结果集值。

```
// help.IDemployee = jTextField1.getText(); 
help.IDemployee = rs.getString(1); 
```

第一列的列索引从 1 开始。不是从 0

# assembly - 在系统编程的上下文中，什么是汇编程序？

> ID：14433026
> 
> 赞同：-3
> 
> 时间：2013-01-21T05:18:53.597
> 
> 标签：assembly, systems-programming

什么是系统编程上下文中的“汇编程序”？“一次通过”和“二次”汇编程序有什么区别？我正在寻找详细的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:14:01.847

汇编是人类还能使用的最低级编程语言，即转译成二进制，每条指令都有一个与二进制平行的字面量，过程中没有解释，只是将符号替换为一定数量的二进制指令位。

两遍汇编程序对整个代码进行两次检查：第一次收集所有符号并创建一个将符号与地址匹配的表，然后第二次用地址替换符号（链接过程）。这允许您在任何您想要的地方定义事物，因为编译器将首先查看所有代码的定义，然后查看定义的使用。

One-pass 汇编器一次遍历代码，试图一次完成整个过程，即在读取一次时将文件和定义链接到标签。在这里保持正确的顺序很重要，如果您不这样做，它将根本不起作用，因为在您尝试使用它之后它不会找到您定义的符号。

当然第一种方法更自然，但需要两倍的时间。对于速度较慢的旧计算机，这是一个巨大的开销，因此最好通过一次代码来实现能够在任何地方定义符号的商品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T12:12:27.180

这些是将兼容M/CA的汇编语言程序自动翻译成兼容M/CA的机器语言程序的系统程序，但底层的M/CS

# java - 使用不同排序标准从树集中获取元素的有效方法

> ID：14433027
> 
> 赞同：0
> 
> 时间：2013-01-21T05:18:57.963
> 
> 标签：java, collections

我有一个包含学生对象（姓名、卷号、地址和年龄）的树集，并按名称的升序存储，如果名称相同，则存储卷号。这个列表来自一个文件，可能会变得非常大。

现在我必须提供一种方法来显示可以按任何顺序排列的列表 - 根据姓名、年龄、地址或卷号按升序/降序排序。我正在为我的问题寻找一个有效的解决方案。

我正在考虑做的是获取一个临时数组列表并按照我想要的顺序将元素放入其中。但为此，我将不得不为每个标准实施不同的方法，这对我来说似乎效率低下。

有什么方法可以让我以我想要的方式将树集中的元素放入数组中，因为我只需要打印值并在之后销毁临时列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:17:57.173

正如您所说，唯一的方法是遍历树并将所有匹配元素拉出到 ArrayList 中。完成后，您可以根据特定的比较器进行排序。

如果您只想根据自然顺序提取元素，则可以使用子集方法，但这取决于树中的 compareTo 方法，这对于您想要执行的所有不同搜索都无效。

鉴于此，您为什么首先使用 TreeSet？您的元素是否具有 TreeSet 所利用的自然顺序？如果不是，为什么不将它们全部转储到 ArrayList 并根据需要对 ArrayList 进行排序？

# pandas - 如何获取 Pandas 数据框的 sub_level 索引值？

> ID：14433039
> 
> 赞同：4
> 
> 时间：2013-01-21T05:20:24.420
> 
> 标签：pandas

我有一个多级数据框`df`：

```
>>> df
                   sales     cash
STK_ID RPT_Date                  
000568 20120630   51.926   42.845
       20120930   80.093   57.488
000596 20120630   22.278   18.247
       20120930   32.585   26.177
000799 20120630    9.291    6.513
       20120930   14.784    8.157 
```

我想获取 sub_level index 的值列表`'STK_ID'`，它将返回`['000568','000596','000799']`.
是否有任何直接功能可以做到这一点（不使用`reset_index`和获取列值）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T05:38:38.470

您正在寻找`index.levels`：

```
In [10]: df1.index.levels
Out[10]: 
[Index(['000568', '000596', '000799'], dtype=object),
 Int64Index([20120630, 20120930], dtype=int64)]

In [11]: df1.index.levels[0]
Out[11]: Index(['000568','000596','000799'], dtype=object) 
```

请注意，您可以看到索引名称：

```
In [12]: df1.index.names
Out[12]: ['STK_ID', 'RPT_Date'] 
```

*这些在[此处](http://pandas.pydata.org/pandas-docs/dev/indexing.html#creating-a-multiindex-hierarchical-index-object)的文档中进行了讨论。*

# actionscript-3 - ActionScript 错误：未找到编译时合成

> ID：14433040
> 
> 赞同：0
> 
> 时间：2013-01-21T05:20:27.150
> 
> 标签：actionscript-3, flash, hittest

很长一段时间以来，我一直对这段简单的代码感到沮丧。我快要放弃了。几乎我试图让两个物体在它们碰撞时做出反应，但是我经常收到这个错误：

```
 Scene 1, Layer 'hero', Frame 1, Line 27 1046: Type was not found or was not a compile-time constant: hit. 
```

![动作脚本] (http://i.imgur.com/qDAxam6.jpg)![idk](../Images/8164ea17e451ed26965dc35903eb1a42.png) ![动作脚本] (http://i.imgur.com/yOPmgSz.jpg)![idk](../Images/9541f025e0a64546a73bcbee3fdd5403.png) 这是类文件（我确定我做错了什么）： ![动作脚本] (http://i.imgur.com/zKTGQGv.jpg)![idk](../Images/0cffbfc8673082cc7141ce263bcd2fa3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:11:29.653

问题在于：

```
var hit:hit = new hit(); 
```

您有类名和实例冲突，重命名局部变量并在任何地方使用它：

```
var hit1:hit = new hit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:15:04.370

查看您的代码后，似乎没有任何问题。话虽如此，以下一项或多项可能会导致您的问题：

在文件`->`ActionScript 设置中，您可能有一个大`1`于此字段的值：

![在此处输入图像描述](../Images/77b9f7a7f8ea8fab77f508519cdca6ef.png)

同样，您可能在创建符号时未选中“在第 1 帧中导出”字段。

![在此处输入图像描述](../Images/c6a491e46b5be78ce78a450fc7cb4e51.png)

如果是前者，`hit`则在您的 SWF 到达您输入的帧之前，您的符号将不可用。如果是后者，您的符号`hit`将不可用，直到您的 SWF 越过您放置它的框架。

# c++ - Lamport's Bakery 算法的实现有超过 1 个线程的段错误

> ID：14433041
> 
> 赞同：-1
> 
> 时间：2013-01-21T05:20:28.137
> 
> 标签：c++, multithreading, segmentation-fault

我正在使用 pthreads 和处理器类来实现 Lamport 的烘焙算法，以充当共享内存。使用单个线程它工作正常，使用 2 个线程在线程 2 运行所有 30 次访问“面包店”的尝试后，我得到了 seg 错误：

> dl-tls.c：没有这样的文件或目录。

使用 3 个或更多线程时，我从 bakeryAlgo 函数输出“here”两次后出现段错误：

> 0x0804ae52 in Processor::getNumber (this=0x5b18c483) at Processor.cpp:33

面包店.cpp

```
struct argStruct {
    vector<Processor>* processors;
    Processor* processor;
};

int findMax(vector<Processor>* processors) {
    int max = -99;
    for (int i = 0; i < processors->size(); i++) {
        if (processors->at(i).getNumber() > max) {
            max = processors->at(i).getNumber();
        }
    }
    return max;
}

void* bakeryAlgo(void* arg) {
    struct argStruct* args = static_cast<struct argStruct *>(arg);
    cout << "here" << endl;
    for (int i = 0; i < 30; i++) {
        args->processor->setChoosing(1);
        args->processor->setNumber(findMax(args->processors));
        args->processor->setChoosing(0);
        for (int j = 0; j < args->processors->size(); j++) {
            int jChoosing = args->processors->at(j).getChoosing();
            int jNumber = args->processors->at(j).getNumber();
            int jId = args->processors->at(j).getId();
            int pNumber = args->processor->getNumber();
            int pId = args->processor->getId();
            if (jId != pId) {
                while (jChoosing != 0) {}
                while (jNumber != 0 && ((jNumber < pNumber) || ((jNumber == pNumber) && (jId < pId)))) { }
            }
        }
        cout << "Processor: " << args->processor->getId() << " executing critical section!" << endl;
        args->processor->setNumber(0);
    }
}

int main(int argc, char *argv[]) {

    // Check that a command line argument was provided
    if (2 == argc) {
        int numProcessors = atoi(argv[1]);
        vector<Processor> processors;
        vector<argStruct> argVect;
        vector < pthread_t > threads;
        for (int i = 0; i < numProcessors; i++) {
            Processor p = Processor(i);
            processors.push_back(p);
        }
        for (int i = 0; i < numProcessors; i++) {
            pthread_t processorThread;
            struct argStruct args;
            args.processors = &processors;
            args.processor = &processors.at(i);
            argVect.push_back(args);
            threads.push_back(processorThread);
            pthread_create(&threads.at(i), NULL, &bakeryAlgo, &argVect.at(i));
        }
        for (int i = 0; i < numProcessors; i++) {
            pthread_join(threads.at(i), NULL);
        }
    } 
    else {
        cout << "Usage: bakery num, num is number of threads." << endl;
    }
    return 0;
} 
```

Processor.cpp / Processor.h 中的代码很简单，它只是值 id、choice 和 number 的几个 getter 和 setter，带有一个默认构造函数和一个采用 int id 的构造函数。

```
Processor::Processor() {

}

Processor::Processor(int idval) {
    id = idval;
    choosing = 0;
    number = 0;
}

Processor::~Processor() {

}

int Processor::getChoosing() {
    return choosing;
}

int Processor::getNumber() {
    return number;
}

int Processor::getId() {
    return id;
}

void Processor::setChoosing(int c) {
    choosing = c;
}

void Processor::setNumber(int n) {
    number = n;
} 
```

有谁知道为什么会发生这些段错误？gdb 说它们发生的地方对我来说就像是无辜的代码行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:15:58.220

您是否使用指向`vector`定义的指针`main`作为您的数据？堆栈不在线程之间共享，因此访问此内存的其他线程充其量是未定义的行为。我想这是你麻烦的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:22:16.203

您正在获取正在更改的向量中元素的地址：

```
 for (int i = 0; i < numProcessors; i++) {
        pthread_t processorThread;
        struct argStruct args;
        args.processors = &processors;
        args.processor = &processors.at(i);
        argVect.push_back(args);
        threads.push_back(processorThread);

        // danger! 
        pthread_create(&threads.at(i), NULL, &bakeryAlgo, &argVect.at(i));
    } 
```

每次将新线程推入 时`threads vector`，向量可能会在内存中重新定位，因此当添加下一个线程时，传递给 pthread_create 的指针可能指向垃圾。

你想这样做：

```
 for (int i = 0; i < numProcessors; i++) {
        pthread_t processorThread;
        struct argStruct args;
        args.processors = &processors;
        args.processor = &processors.at(i);
        argVect.push_back(args);
        threads.push_back(processorThread);
    }
    for (int i = 0; i < numProcessors; i++) {
        pthread_create(&threads.at(i), NULL, &bakeryAlgo, &argVect.at(i));
    } 
```

通过在创建线程之前等到所有元素都添加到向量中，您现在传递的指针在线程运行时保持良好。

# c# - 由于断点未命中，DNN7 模块无法调试

> ID：14433042
> 
> 赞同：1
> 
> 时间：2013-01-21T05:20:42.937
> 
> 标签：c#, dotnetnuke

当我使用默认 DNN7 创建模块（DotNetNuke 编译模块）时，我想尝试在 Page_load 上进行调试

```
CustomModuleController objCustomModules = new CustomModuleController(); 
```

并在该行或 Page_load 上的任何行上创建和断点，它给出了错误。

当前不会命中断点。没有为此文档加载任何符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:01:10.753

我建议您查看[http://christoctemplate.codeplex.com](http://christoctemplate.codeplex.com)上的模板，坦率地说，Visual Studio 入门工具包中的模板不起作用。

话虽如此，如果您想确保当前模板可以正常工作，请检查以下内容

1.  DLL的构建位置是什么（右键单击项目，选择属性，检查构建选项卡）
2.  您是否在 web.config 文件中启用了调试？
3.  您是在 DEBUG 还是 RELEASE 模式下构建？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T14:24:15.623

如果您想在网站项目以外的单独项目中开发动态模块（非编译）怎么办？Christoc 模板都编译好了，对吧？

# php - 安装 APC 后站点没有样式

> ID：14433044
> 
> 赞同：2
> 
> 时间：2013-01-21T05:21:27.153
> 
> 标签：php, css, centos, cpanel, apc

我最近在我的专用服务器上安装了 APC，现在我的网站的 CSS 根本没有被读取。或者我认为是因为该网站没有样式。

有什么想法可以解决这个问题吗？该站点已安装以下内容：

APC 3.1.9 - PHP 5.4.10 - CENTOS 5.9 x86_6 - WHM 11.34.1。(Build 7) - 与 WHM 相同版本的 cPanel - Perl 版本 5.8.8 - mod_fcgid 2.3.6 - SocialEngine 4.2.5

非常欢迎任何反馈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:15:13.527

所以我启用了suEXEC，优雅地重新启动了服务器并解决了问题。写这个以防其他人遇到同样的问题。

# c++ - 确定没有 EXIF 数据的图像之间的停靠点差异

> ID：14433051
> 
> 赞同：3
> 
> 时间：2013-01-21T05:22:43.150
> 
> 标签：c++, c, image-processing

我有一组相同场景但曝光不同的图像。这些图像没有 EXIF 数据，因此无法提取 f-stop、快门速度等有用信息。

我要做的是确定图像之间的停止差异，即 Image1 是 Image0 的 +1.3 停止。

我目前的方法是首先使用公式从图像的 RGB 值计算亮度

`L = 0.2126 * R + 0.7152 * G + 0.0722 * B`

我已经看到方程式中使用了不同的数字，但通常它不会对最终结果 L 产生太大影响。

之后，我得出图像的对数平均亮度。

```
exp(avg of log(luminance of image)) 
```

但不知何故，对数平均亮度似乎并没有对图像的曝光差异给出太多指示。关于如何确定曝光差异的任何想法？

编辑：在 C/C++ 上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:56:36.673

您通常必须解决两个问题：

**1.线性化你的图像数据**

（如果它的含义不明显：像素收集的光增加两倍将导致*线性化*图像中的强度值增加两倍。）

您的图像输入可能已经（充分）线性化了 -> 您可以跳到第 2 部分。如果您的内容来自相机并且是 JPEG，那么肯定不会是这种情况。

这个问题的真正“解决方案”是找到相机响应函数，您希望将其反转并应用于图像数据以获得线性强度值。这绝不是一项微不足道的任务。EMoR[模型](http://www.cs.columbia.edu/CAVE/projects/rad_cal/)广泛用于各种软件（Photoshop、PTGui、Photomatix 等）中，用于描述相机响应功能。一些解决这个问题的开源软件（但使用不同的模型 iirc）是[PFScalibrate](http://www.mpi-inf.mpg.de/resources/hdr/calibration/pfs.html)。

话虽如此，您可能会使用一个简单的逆伽马应用程序。可以通过执行以下操作找到正确 gamma 值的粗略“估计”：

1.  *使用两个曝光时间e*和*e/2*捕捉均匀照明的静态场景
**   在两个图像上应用几个逆伽马变换（例如，以 0.1 步长从 1.8 到 2.4）*   将所有短曝光图像乘以 2.0，然后从相应的长曝光图像中减去它们*   选择导致最小整体差异的伽玛*

 ***2.求出实际的辐照度差，即log2(scale factor)**

假设场景是静态的（没有移动的物体或相机），这相对容易：

```
sum1 = sum2 = 0
foreach pixel pair (p1,p2) from the two images:
  if p1 or p2 is close to 0 or 255:
    skip this pair
  sum1 += p1 and sum2 += p2
return log2(sum1 / sum2) 
```

在大图像上，如果您对图像进行二次采样，这肯定会同样有效并且速度更快。

如果相机是静态的但场景不是（移动的物体），这开始效果不佳。在这种情况下，我通过简单地重复上述过程几次并使用前一次运行的输出作为正确比例因子的估计值，然后丢弃商与当前估计值相差太远的像素对来产生可接受的结果。所以基本上用`if`以下内容替换上面的行：

```
if <see above> or if abs(log2(p1/p2) - estimate) > 0.5: 
```

我会在固定次数的迭代后停止重复，或者如果两个连续的估计彼此足够接近。

**编辑：关于转换为亮度的说明**

您根本不需要这样做（正如 Tony D 已经提到的那样），如果您坚持，那么在线性化步骤之后进行（正如 Mark Ransom 指出的那样）。在完美的设置（静态场景、无噪声、无去马赛克、无量化）中，每个像素的每个通道都将具有相同的比率`p1/p2`（如果两者都不饱和）。因此，不同通道的相对权重是无关紧要的。您可以对所有像素/通道求和（对 R、G 和 B 进行同等加权），或者只使用绿色通道。*

# assembly - 如何找出ret地址

> ID：14433052
> 
> 赞同：0
> 
> 时间：2013-01-21T05:22:48.487
> 
> 标签：assembly, buffer, x86-64, buffer-overflow

```
void function(int a, int b, int c)
{    char buffer[1];
     int *ret;
     ret = buffer + 20;
     (*ret) += 7;
}
void main()
{    int x;
    x = 0;
    function(1, 2, 3);
    x = 1;
    printf("%d\n", x);
} 
```

在这个程序中，我想做的是重写返回寄存器地址，以便程序的结果是打印“0”而不是“1”作为 main 中的 x 值。

但是我没有找到返回地址——缓冲区的偏移量，以及返回地址的偏移量。

这是汇编语言的一部分：

```
function:
.LFB0:
.cfi_startproc
pushq   %rbp
.cfi_def_cfa_offset 16
.cfi_offset 6, -16
movq    %rsp, %rbp
.cfi_def_cfa_register 6
movl    %edi, -20(%rbp)
movl    %esi, -24(%rbp)
movl    %edx, -28(%rbp)
leaq    -9(%rbp), %rax
addq    $20, %rax
movq    %rax, -8(%rbp)
movq    -8(%rbp), %rax
movl    (%rax), %eax
leal    7(%rax), %edx
movq    -8(%rbp), %rax
movl    %edx, (%rax)
popq    %rbp
.cfi_def_cfa 7, 8
ret
.cfi_endproc 
```

和，

```
main:
.LFB1:
.cfi_startproc
pushq   %rbp
.cfi_def_cfa_offset 16
.cfi_offset 6, -16
movq    %rsp, %rbp
.cfi_def_cfa_register 6
subq    $16, %rsp
movl    $0, -4(%rbp)
movl    $3, %edx
movl    $2, %esi
movl    $1, %edi
call    function
movl    $1, -4(%rbp)
movl    $.LC0, %eax
movl    -4(%rbp), %edx
movl    %edx, %esi
movq    %rax, %rdi
movl    $0, %eax
call    printf
leave
.cfi_def_cfa 7, 8
ret
.cfi_endproc 
```

编译后我用gdb查找返回地址

```
 0x000000000040054e <+0>: push   %rbp
0x000000000040054f <+1>:    mov    %rsp,%rbp
0x0000000000400552 <+4>:    sub    $0x10,%rsp
0x0000000000400556 <+8>:    movl   $0x0,-0x4(%rbp)
0x000000000040055d <+15>:   mov    $0x3,%edx
0x0000000000400562 <+20>:   mov    $0x2,%esi
0x0000000000400567 <+25>:   mov    $0x1,%edi
0x000000000040056c <+30>:   callq  0x400524 <function>
0x0000000000400571 <+35>:   movl   $0x1,-0x4(%rbp)
0x0000000000400578 <+42>:   mov    $0x400694,%eax
0x000000000040057d <+47>:   mov    -0x4(%rbp),%edx
0x0000000000400580 <+50>:   mov    %edx,%esi
0x0000000000400582 <+52>:   mov    %rax,%rdi
0x0000000000400585 <+55>:   mov    $0x0,%eax
0x000000000040058a <+60>:   callq  0x400418 <printf@plt>
0x000000000040058f <+65>:   leaveq 
0x0000000000400590 <+66>:   retq 
```

这就是我选择“20”和“7”的原因。但它不起作用，它说“段错误”。我尝试了很多数字，有时会出现“总线错误”。我不知道为什么以及如何找到它。我在 64 位机器上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:41:36.613

用我的评论看代码：

```
function:
pushq   %rbp ; save rbp on the stack
movq    %rsp, %rbp ; rbp = address of previous value of rbp on the stack
movl    %edi, -20(%rbp)
movl    %esi, -24(%rbp)
movl    %edx, -28(%rbp)
leaq    -9(%rbp), %rax ; rax = address of buffer = rbp - 9
addq    $20, %rax ; rax = buffer + 20 = rbp - 9 + 20 = rbp + 11
movq    %rax, -8(%rbp)
movq    -8(%rbp), %rax
movl    (%rax), %eax ; read 4 bytes from address rbp + 11, WHY 4? 8-byte pointers!
leal    7(%rax), %edx ; add 7 to those
movq    -8(%rbp), %rax
movl    %edx, (%rax) ; store the sub back
popq    %rbp ; restore rbp from the stack
ret ; return 
```

请注意，最后两条指令（pop 和 ret）从堆栈中弹出两项，即 rbp 的前一个/保存的值和返回地址。

这意味着返回地址正好在堆栈上保存的 rbp 值的上方，或者在 rbp + 8 处。

但是您正在 rbp + 11 处修改内存。

此外，您只修改了 4 个字节，而所有指针都是 64 位（8 字节）。

所以，你需要改变

```
int *ret; 
```

到

```
unsigned long long *ret; 
```

然后更正常量，因此您修改地址 rbp + 8 处的 8 个字节，而不是 rbp + 11 或 rbp + 其他位置。

火箭科学？没有。只需阅读代码，单步执行，看看会发生什么并思考。你有调试器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:05:08.370

如果您使用的是 Visual Studio，请考虑调用编译器内部

```
void* _ReturnAddress(void);
#pragma intrinsic(_ReturnAddress);

function main()
{
    void* ret = _ReturnAddress();
    printf("%p", ret);
} 
```

# google-drive-api - 从单独的谷歌驱动器文件夹中的文件创建单个 zip

> ID：14433056
> 
> 赞同：1
> 
> 时间：2013-01-21T05:23:36.957
> 
> 标签：google-drive-api

是否可以从位于不同谷歌驱动器文件夹中的单独文件创建单个 zip？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:20:08.683

可以从旧 Docs List API 中的不同文件创建档案：

[https://developers.google.com/google-apps/documents-list/#creating_archives_of_documents_and_files](https://developers.google.com/google-apps/documents-list/#creating_archives_of_documents_and_files)

但是，Drive API 没有类似的调用。您可以使用已弃用的 API，该 API 将在 2015 年 4 月 20 日之前有效，或者您可以通过 Drive API 获取您想要的文件并直接在您的应用程序中执行 zip 创建。

# c - 在 C 程序中，收到警告：“Statement with no effect”

> ID：14433057
> 
> 赞同：2
> 
> 时间：2013-01-21T05:23:43.540
> 
> 标签：c, for-loop, segmentation-fault, gcc-warning

当我尝试使用 编译特定程序时`-Wall`，GCC 将警告显示为：

```
expcal.c:66:5: warning: statement with no effect [-Wunused-value] 
```

此警告指的是以下行：

```
ed.operator[j] == str[i]; 
```

在以下循环中找到：

```
for(i=0;i<strlen(str);i++)
        {
                j=0;
                if(str[i] == '+' || str[i] == '-' || str[i] == '*')
                {
                        if(str[i+1] == '+' || str[i+1] == '-' || str[i+1] == '*')
                                return 0;
                        else
                        {
                                //j=0;
                                ed.operator[j] == str[i];
                                count++;
                                j++;
                        }
                }
        } 
```

我知道当赋值语句有问题时会出现这个警告。上面的代码有什么问题会导致 GCC 产生这样的警告？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T05:28:26.350

该声明

```
ed.operator[j] == str[i]; 
```

不是任务；这是使用的比较`==`。要将其作为一项作业，请尝试编写

```
ed.operator[j] = str[i]; 
```

您收到的警告意味着比较产生了一个从未使用过的值，因此该语句对程序没有任何可见的影响。这暗示您可能想将其重写为具有副作用的东西。

希望这可以帮助！

# ssrs-2008-r2 - SSRS2008R2：我们如何使用两个“间隔”是折线图的 X 轴标签？

> ID：14433058
> 
> 赞同：0
> 
> 时间：2013-01-21T05:23:43.657
> 
> 标签：ssrs-2008-r2

我是ssrs世界的新手。我只想在一个水平轴标签中使用两个间隔。例如，我在 X 轴上使用日期字段 (sample_date)，对于 1 月，间隔为 31，2 月间隔为 28，12 月间隔为 31，等等。间隔类型为 Day。任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:22:17.767

当然，如果我相信我理解您的问题是您希望显示月末日期而不是日期。你需要做一些事情来做到这一点：

1.  您需要从数据集中查看一个月中有多少天。这是一个示例数据集：

    ```
    declare @Dates table ( dt date, val int)

    insert into @Dates values('1-1-12', 10),('1-10-12',20),('1-30-12',14),('2-1-12', 11),('2-11-12', 19),('2-20-12', 20),('3-10-12',10)

    select *,  datediff(day,
    Dateadd(month, datediff(month, 0, dt), 0),
    Dateadd(day, -1, Dateadd(month, datediff(month, 0, dt) + 1, 0))
    ) as DaysInMonth
    from @Dates 
    ```

2.  您现在有了日期和值以及列表，告诉您该月有多少天。创建一个像你通常会的线或其他的图表。在示例中将“值”设置为“val”，在示例中将“类别组”设置为“dt”。

3.  创建图表后，单击水平网格，直到该部分（x 轴）周围只有一个虚线矩形。单击“水平图表属性”。

4.  将轴类型更改为“标量”单选按钮。选择如下：

    一种。将最小值更改为 [Min(dt)] b。将最大值更改为 [Max(dt)] c。将 Interval 更改为以下表达式：

    ```
    =(Fields!DaysInMonth.Value - 1) 
    ```

    d。将间隔类型更改为“天”

5.  Run your report and it should be grouping by days, but using the data you found to be the count of days in a month dynamically at run time. Since you are subtracting one from this number it should show the grouping for the first day but then the last day each time. If you find this not to be true I would alter the expression slightly as when I tested it, it worked for the duration I gave.

If this fails you could set a label to be the last day of the month obtained from a sql statement and have that be your 'label' for a category group possibly as well.

# c++ - WM_WINDOWPOSCHANGING 和主窗口可见性问题

> ID：14433059
> 
> 赞同：0
> 
> 时间：2013-01-21T05:23:46.707
> 
> 标签：c++, winapi, user-interface, mfc

我有一个大型 C++/MFC 应用程序，它可以以两种模式启动：1）常规 GUI 模式和 2）使用命令行参数启动时的特殊模式，在这种情况下，程序的 GUI 部分没有显示，而是我添加了一个图标到通知（系统）托盘。

为了确保不显示模式 2 的主窗口，我按如下方式处理 WM_WINDOWPOSCHANGING：

```
void OnWindowPosChanging(WINDOWPOS* lpwndpos)
{
    CDialog::OnWindowPosChanging(lpwndpos);

    // TODO: Add your message handler code here

    //Prevent main window from showing
    lpwndpos->flags &= ~SWP_SHOWWINDOW;
} 
```

如果在处理此消息后逻辑确定命令行中有错误并希望显示主窗口，则会出现此问题。但是在处理 WM_WINDOWPOSCHANGING 消息后，我似乎无法显示主窗口，就像我在上面显示的那样。

PS。该项目是为 Visual Studio 2008 编写的 C++ MFC。

# sql-server - VS 2010 无法创建集成服务项目

> ID：14433060
> 
> 赞同：0
> 
> 时间：2013-01-21T05:23:59.203
> 
> 标签：sql-server, visual-studio-2010, ssis

我已经安装了 sql server 2012 标准版并安装了 SSDT (10.3.21208.0)。但是当我尝试在 VS 2010 专业版中创建集成服务项目时，我收到以下消息：

Microsoft Visual Studio 无法加载此文档：

若要在 SQL Server Data Tools (SSDT) 中设计集成服务包，SSDT 必须通过以下 SQL Server 2012 版本之一安装：标准版、企业版、开发版或评估版。要安装 SSDT，请运行 SQL Server 安装程序并选择 SQL Server Data Tools。”

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T13:33:53.507

您之前是否也安装过 SQL Server 2008 R2？似乎在某些情况下，并排安装往往会犯一些错误。下面文章中的建议解决方案是先卸载早期的 Express/2008，然后重新安装。

[http://social.msdn.microsoft.com/Forums/sqlserver/en-US/99386641-daf9-4370-bf1e-a52affd8c1ef/vs2008-unable-to-load-integration-services-package-document-after-creation](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/99386641-daf9-4370-bf1e-a52affd8c1ef/vs2008-unable-to-load-integration-services-package-document-after-creation)

# html - 在 Rails 中向 content_tag 添加类

> ID：14433061
> 
> 赞同：2
> 
> 时间：2013-01-21T05:24:00.357
> 
> 标签：html, css, ruby-on-rails

我想`(:i)`在 Rails 代码中的标签中添加一个类：

```
<td><%= link_to content_tag(:i), item %></td> 
```

我希望最终代码看起来像：

```
<td><a href="/items/2"><i class="#"></i></a></td> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T06:08:12.047

@Dogbert 是正确的，只是您需要`nil`作为第二个参数传递，因为`content_tag`定义为

```
def content_tag(tag, content_or_options_with_block=nil, options=nil, escape=true, &block)
  ...
end 
```

如果您传递块，则第二个参数仅被视为内容。为了扩展它，此时传入的任何额外选项都将成为 HTML 属性，因此相同的形式适用于 ID、data-* 等内容。

```
content_tag(:i, nil, class: '#', id: 'foo', data: {foo: 'bar'}) 
```

会变成

```
<i class="#" id="foo" data-foo="bar"></i> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:05:21.190

试试这个

<%= link_to content_tag(:i, :class => '#'), item %>

# c - 如何让 GCC 将所有符号导出到输出文件

> ID：14433065
> 
> 赞同：2
> 
> 时间：2013-01-21T05:24:51.817
> 
> 标签：c, gcc, elf, relocation

我正在开发一个操作系统，我需要在设置分页之前加载一些模块。因此，由于此时没有设置分页，我需要将程序中的所有符号重新定位到物理地址。我的问题是，并非所有符号都可以在符号表中找到，并且并非所有重定位信息都可以在 rel.text 中找到。如何让 GCC 导出所有符号数据？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:15:05.603

当然，任何需要重定位的东西都在重定位表中。还能怎么加载？无论是否启用分页，重定位的工作方式完全相同 - 二进制中的绝对位置条目以偏移量列出，然后由加载软件处理。没有搬迁，其他一切都应该没问题。

请注意，符号表本身对于解析重定位没有意义，因为它只给出了符号的位置。

您是否正在考虑操作系统本身中的符号？如果是这样，这确实是以适当的方式从您的操作系统中导出符号的情况。Linux 有 EXPORT_SYMBOL(name)，它在内核本身内构建一个符号表。[请注意，这不是由`gcc`or生成的符号`ld`，而是由宏构建并在内核中处理的符号。

编辑以澄清，因为我在“评论”中的空间不足：有两种类型的“重定位”：内部的 - 您对自己模块中的事物有绝对引用，例如指向字符串的指针、指向函数的指针、跳转表对于 switch 语句，等等 - 这些应该只是将当前值与二进制实际所在位置的偏移量相加的问题（当然是虚拟地址）。另一个是“外部引用”，比如当你的模块调用时，比如说`spinlock()`- 这不是在模块内部实现的，所以它会有一个“外部参考”。在这种情况下，将有一个以“spinlock”作为名称的重定位条目以及对 spinlock 的调用在模块中的偏移量。现在您显然需要一个符号表来查找内核“自旋锁”的位置[如果您想变得非常复杂，请允许模块引用其他模块，但我会保留它，直到您有一个模块加载OK第一的！]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:45:16.530

真的，您的问题是关于链接器的。答案取决于您使用的链接器。

如果是`ld`gcc下的标准链接器，试试“-Wl,-r”选项。

# windows-8 - User '' does not have required permissions, SSRS 2008 on Windows 8

> ID：14433068
> 
> 赞同：10
> 
> 时间：2013-01-21T05:25:22.637
> 
> 标签：windows-8, ssrs-2008

When you try to log into SSRS's root site at http:// (servername)/Reports it displays:

User '' does not have required permissions. Verify that sufficient permissions have been granted and Windows User Account Control (UAC) restrictions have been addressed.

This is on a 64 bit edition of Windows 8 Pro, running SQL Server 2008 enterprise. Everything should be using the local system as the account of execution.

I have tried changing the execution account as my user which is admin, I have added the site as the trusted site, I have UAC turned completely off, I have tried to hit the site with **IE AS ADMIN**, Chrome, and Firefox. Everything I try the site states back that I don't have the rights. I go into SQL Server and ensure my roles are everything for my user. It does not care. I am currently reinstalling the SSRS node of the SQL Server install but am curious if anyone else had this issue yet.

I am going to try to change my account to a 'local' account as I am thinking that may be an issue yet I don't understand why SQL Server can recognize my login integrated just fine. Honestly I never ran into this and am wondering if this is an issue just with Windows 8 accessing SQL Server 2008\. I would upgrade but I have a full version of SQL Server 2008 and not of 2012 so I am hesitant to just upgrade unless Express 2012 will come with Business Intelligence Development Studio and SSRS site with tools.

EDIT: 3-8-2016:

1.  No answer with: "Just turn on site settings" is valid as this is the first time installing as the admin of the server or machine locally and not able to access the landing page as that admin.
2.  No answer with: "Just run IE as admin" will work last I tested that.
3.  Answers with "Trusted SITE settings MAY WORK" on Windows 8 and higher as I had a similar problem to this with Windows 10 and on Windows 10 it did fix it. I am not going to rollback two OS versions to check at home though, sorry.

I don't get how this question can be existing for a while and people are now on a mission to claim it is duplicate when the very answer is different than the potential duplicate. That whole thread deals with someone able to get into the site with elevated permission and just not setting up roles and users after the fact. This is the main user of the machine not getting to the landing page as an admin to the site listed as the default landing. Not even the same ballpark. Getting into a page as an admin to let local users in versus the highest level God user not getting in is not the same.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T12:52:03.287

Everything in [this answer](https://stackoverflow.com/a/14442782/849741) is true but don't reinstall all of SSRS thats nonsense...

Windows 8

1.  Disable UAC
2.  Enable Administrator Account (You can go to Control Panel > Computer Management > Users)
3.  Restart PC
4.  Run IE ad Administrator when prompted login with your local Administrator account you enabled.
5.  You will need to adjust site settings security and folder settings security. Easy fast fix just add "Everyone" in both of those with full rights.

Problem solved!

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-21T06:20:12.223

I ran into the same issue myself but with Windows 7 and SQL Server 2008\. I resolved the issue following the instructions from Suresh Kumar's blog post at [http://skamie.wordpress.com/2010/06/24/ssrs-and-uac/](http://skamie.wordpress.com/2010/06/24/ssrs-and-uac/)

In a nutshell here are the steps you need to take to resolve this issue:

Start your browser using 'run as Administrator'.

Navigate to the report manager and under Site Settings -> Security assign your account or the local administrators group to the System Administration role.

Then navigate to the home folder and under the security settings assign your account or the local administrators group to the Browser, Conent Manager, My Reports, Publisher and Report Builder roles.

Now you should be able to run your browser as normal and access SSRS without any issues.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-21T16:17:18.340

Okay this is really annoying what needed to be done but here goes.

From what I kept reading Windows 8 does not by default enable the default administrator account.

I usually don't use this account but in this case I was desperate as my account could not get in.

I understand ONCE YOU ARE IN you can set the site settings, that does not help if you cannot even see the site's main landing page to see that setting.

The steps I took to finally resolve were;

1.  Uninstall SSRS Node COMPLETELY by going to control panel>SQL Server 2008>Remove>Check Reporting Services
2.  Enable default admin account: command prompt>run as administrator>net user administrator p@ssw0rD, hit enter.
3.  New line: net user administrator /active:yes
4.  Reboot
5.  Reinstall SSRS from disc with logging in as default administrator
6.  Install SP3 as administrator
7.  Go to IE.exe DIRECTLY in Windows 8: C:\Program Files\Internet Explorer\iexplore.exe>Run as administrator.
8.  Go to http:// (servername)/Reports
9.  You SHOULD now be able to finally see site settings. NOW YOU CAN FOLLOW everyone's directions of adding YOUR USER under site settings. Also go to folder permissions and add the user as a default here as well.
10.  (optional) For safety I would hide the default admin account now by using step 2 but substitute /active:no in.

If your main admin can't open the door, no one is getting in. That was the main issue I was having. My default admin could not get in. Now everything is working fine and dandy like it should with deploying from BIDS as well.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T13:56:16.177

I had the same problem on my Windows 8 system (32 bit) with SQL Server 2008R2\. When I started IE using 'run as Administrator' it still asked for a user name and password and resulted in "user does not have permissions"-error when I entered my user name and password. This is what fixed it for me:

I disabled UAC in the registry (Set HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System\EnableLUA to 0). I first set notify-level under Control Panel | System and Security | Change User Account Control to the lowest level but that didn't make any difference.

After reboot I started IE using 'run as Administrator'. Went to Report Manager | Site Settings | Security: added my account as System administrator.

Still in Report Manager I went to Home | Folder Settings and added my account with role Content Manager.

I enabled UAC through Control Panel | System and Security | Change User Account Control settings by setting it to default level again. (Reboot required)

When I run IE as Administrator now and supply my user name and password it does show the homepage of the report manager.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-20T19:56:03.210

**Run** Internet Explorer **as administrator** (right click on the Taskbar icon)

Step 1 :: Add your local username to the **Site Settings** security roles page. (Security - System Administrator)

Step 2 :: Add your local username to the **Folder Settings** on the home page. (Select Content Manager)

Close the Administrator IE session. Open IE in normal mode under your user account.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-15T23:23:10.210

Windows 8.1

I resolved this with help from the answer by Austin McLaughlin posted earlier. In my case I had been logged in with a local account that had administrator privileges, but attempting to [http://127.0.0.1/Reports](http://127.0.0.1/Reports) (hearinafter referred to as "the Reporting Services Manager") produced the error reported by the OP.

The key for me was that the Administrator account was disabled by default in my Windows 8.1 laptop. Note that I did not originally have Windows 8.1 Pro, so there was no "Local Users and Groups" under "Computer Management". Thus, I had to purchase the [Windows 8.1 Pro Pack](http://www.microsoftstore.com/store/msusa/en_US/pdp/Windows-8.1-Pro-Pack/productID.288392300) online from MS for $100.

1.  In Windows Explorer, right click on the Computer node and select "Manage".
2.  Navigate to Local Users and Groups > Users
3.  Right click on Administrator and select Properties
4.  De-select "Account is disabled"
5.  Restart PC
6.  Log in to the PC as Administrator (I did not have to enter a password for the Administrator account on first login.)
7.  From the desktop, run IE. No need to run as Administrator, of course, since you logged in as Administrator.
8.  Navigate to the Reporting Services Manager.

At this point you should be logged in to the Report Administrator and on the Home screen. I had not been able to get this far before.

9.  On the Home screen, click "New Role Assignment"
10.  In "Group or user name", enter the local administrator account you use for development; i.e.: [yourmachine]\[username]
11.  Select all the checkboxes (shortcut is to click the checkbox to the left of "Role") and click OK.
12.  In the upper right hand side of the page, click Site Settings.
13.  On the left side of the page, click Security.
14.  Click "New Role Assignment"
15.  In "Group or user name" enter the same account as in step 10
16.  Check "System Administrator" checkbox and click OK
17.  As a precaution, disable the Administrator account that you enabled in step 4.
18.  Log out, then back in with your local account from step 10.
19.  In IE, browse to the Reporting Services Manager. Note: It was not necessary for me to start IE as Administrator.

At this point you should be able to access Reporting Services Manager page, and configure reporting services further.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-15T06:59:30.470

Change service account type as "**Network Service**" in service account tab then stop and start service and run IE as Administrator.

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-07-10T14:53:49.520

From **Reporting Services Configuration Manager** you can get to the node **Report Manager Url**. The URL works from this screen. Now you can use the *Folder Settings* to add yourself as a *Content Manager*, etc... Now the url will work for your user.

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-08-19T14:55:56.137

In IE, just add Add the reporting services website to "Local intranet" sites. That's it.

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-10-31T19:04:54.253

Just open IE as Run As Administrator and just type URL as [http://localhost/reports](http://localhost/reports)

# java - Apache Tomcat 应用程序的默认会话超时

> ID：14433070
> 
> 赞同：96
> 
> 时间：2013-01-21T05:26:57.387
> 
> 标签：java, tomcat, session-timeout

Tomcat5.5 上部署的 Web 应用程序的默认会话超时是多少？它是特定于浏览器的吗？`web.xml`在我的 Web 应用程序中，代码中都没有提到默认超时。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-01-21T05:31:15.817

# 在 web.xml 中定义

打开`$CATALINA_BASE/conf/web.xml`并找到这个：

```
<!-- ==================== Default Session Configuration ================= -->
<!-- You can set the default session timeout (in minutes) for all newly   -->
<!-- created sessions by modifying the value below.                       -->

<session-config>
    <session-timeout>30</session-timeout>
</session-config> 
```

所有的 webapps 都隐式地继承了这个默认的 web 描述符。您可以通过 webapp 自己的`web.xml`文件覆盖这些默认设置。

这实际上来自我的 Tomcat 7（Windows），但我认为 Tomcat 5.5 的配置差别不大

# php - 当我使用 sencha touch 通过 ajax 请求向 php 发送文本字段值时出现错误

> ID：14433072
> 
> 赞同：2
> 
> 时间：2013-01-21T05:28:50.830
> 
> 标签：php, sencha-touch-2

我的视图包含以下代码

```
this.keypadDisplay = Ext.create('Ext.field.Text', {
            xtype:'textfield',
            disabled: true,
            value: ''
        }); 
```

我的ajax请求代码是

```
handler: function(b, e) {
                    var thisUser = this.getValue();
                   alert(thisUser);
                    //params[this.getSubmitParamName()] = this.getValue();
                    Ext.Ajax.request({
                        url:'http://localhost/sencha2011/keypadapp/code.php',
                        params: thisUser,
                        method:'GET',
                        success: function(response, opts){
                            var text = response.responseText;
                            console.log(response.responseText);
                            alert(thisUser);
                            //alert(this.getValue());
                            //alert('Value: ' + this.getValue());
                            Ext.Msg.alert('success', text);
                        },
                        failure: function(response, opts){
                            Ext.Msg.alert('Error','Error while submitting the form');
                            console.log(response.responseText);
                           },
                        scope: this
                    });
            } 
```

在这里，我成功获得了“this.getValue”。我想将 this.getValue 插入到代码表中。我的 code.php 包含以下代码

```
<?php
$con = mysql_connect("localhost","root","");
mysql_select_db('form',$con);

$insert = "INSERT INTO codetable(password) VALUES ('".$_GET['thisUser.value']."')";

if(mysql_query($insert))
{
    echo('values inserted successfully');
}
else
{
    echo('failure' . mysql_error());
}
?> 
```

在这里，我在第 5 行收到错误为“.../keypadapp/code.php 中的未定义索引：thisUser.Value”。有人可以帮我吗？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:46:02.043

尝试在 PHP 中更改`$_GET['thisUser.value']`为`$_GET['thisUser_value']`点`$_GET`并`$_POST`转换为下划线。有关更多信息，请参阅此[https://stackoverflow.com/a/68742/589909](https://stackoverflow.com/a/68742/589909)

**更新**

仔细查看您的代码，您无法像您正在做的那样在 php 中获取对象的 javascript 值。我假设这`thisUser`是一个对象。因此，当将其作为参数传递时，其属性将单独发布到服务器。因此，如果它有一个名为的属性，`foo`您会像这样得到它。`$_GET['foo'];`您也可以转储获取请求以查看发送的内容。`var_dump($_GET);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:17:39.467

将参数值分配给 ajax 调用中的变量：

```
 Ext.Ajax.request({
                    url:'http://localhost/sencha2011/keypadapp/code.php',
                    params: 'thisuser='+thisUser, 
```

然后在 php 中，访问该值：

```
$insert = "INSERT INTO codetable(password) VALUES ('".$_GET['thisuser']."')"; 
```

# c++ - 调试器已附加 - cscript

> ID：14433077
> 
> 赞同：0
> 
> 时间：2013-01-21T05:31:42.820
> 
> 标签：c++, windows, debugging, jscript

我有一个简短的 JScript，它创建一个活动的 X 对象并调用一个函数。该活动 X 对象是用 C++ 编写的。当我运行命令时，`cscript scriptName.js //X`我以调试模式启动 VS2012。比我尝试附加一个调试器，但如您所知，已经附加了一个。

有没有办法重新连接调试器或以某种方式连接到它？

我目前的解决方案是不使用 JScript 并从 C++ 调用代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:20:40.160

你想使用哪个调试器？Visual Studio 还是 WinDBG？您真的需要同时调试 JavaScript 代码和 C++ 代码*吗*？

如果后者对您来说不是问题，并且您想专注于 C++ 代码，则在 Visual Studio（或 WinDBG）中只调试 cscript.exe，不带 /x 标志。甚至不需要附加，您可以在 Visual Studio 中使用 F5 开始调试。

1.  在 Visual Studio（2008、2010 或 2012 - 它们都有效）中，右键单击 ActiveX 项目（即 C++ 项目）。
2.  转到：配置属性 -> 调试
3.  在命令中输入 cscript 完整路径：C:\Windows\System32\cscript.exe
4.  在命令参数中输入 JS 文件的完整路径
5.  在您的 ActiveX 代码上放置一个断点（在 dllmain 或 COM 对象的构造函数上）
6.  按 F5
7.  Visual Studio 会抱怨缺少 cscript 的符号。没关系。继续。
8.  你会遇到断点

需要考虑的几点：

1.  设置符号路径以包含 Microsoft 符号。这样，您将看到调用您的代码的函数的名称（oleaut32.dll 和朋友）。

此外，这是默认设置，但请确保：

1.  同一属性框中的调试器类型可以是 Native 或 Auto。

# jquery - CSS 位置：固定在 Mobile Safari 中未固定...再次

> ID：14433078
> 
> 赞同：0
> 
> 时间：2013-01-21T05:32:40.673
> 
> 标签：jquery, css, mobile-safari, css-position

朋友们，

我对 jQuery 还是很陌生，并且正在花时间弄清楚如何让这个东西粘在我的 Mobile Safari 窗口的顶部。我试过 iScroll，我试过 jQuery Mobile，我读过关于让它在滚动时隐藏和消失的技巧，等等。但我似乎无法让它工作。我想要的只是让小导航框在我上下滑动页面时保持在屏幕顶部。就像现在一样，当我向下滑动页面进行滚动时，固定元素会随着内容向上滑动页面。如果有人可以告诉我我错过了什么，我将不胜感激。

这是一个不喜欢 Mobile Safari 的 Safari 工作小提琴：http: [//jsfiddle.net/gZ9ze/](http://jsfiddle.net/gZ9ze/)

它基本上是一个具有固定位置的标准 div，当单击该位置时，它会向上滑动到负的顶部值。再次单击时，它会向下滑动到 0 顶部值。

在此先感谢，莱恩

CSS

```
.navigationBox {
    position: fixed;
    top:0px;
    left: 25px;
    width: 300px;
    height: 100px;
    background-color: black;
    color: grey;
    text-align: center;
}
.sliderButton {
    position: absolute;
    bottom: 0px;
    width: 100%;
    cursor: pointer;
    color:white;
}
.storyContent {
    padding-left: 15px;
    padding-top: 30px;
} 
```

jQuery

```
var easingMethod = "easeOutCubic";
var opened = true;
function openNav() {
    $(".navigationBox").animate({
        top: 0
    }, 500, easingMethod);
    opened = true;
};
function closeNav() {
    $(".navigationBox").animate({
        top: -75
    }, 500, easingMethod);
    opened = false;
};
$('.sliderButton').click(function () {
    if (opened == true) {
        closeNav();
    } else {
        openNav();
    }
}); 
```

HTML

```
<div class="navigationBox">
    <div class="dummyNav">Dummy Nav Elements<br/>which will do other things.</div>
    <div class="sliderButton">Click here to slide me</div>
</div>
<div class="storyContent">
    <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus feugiat porttitor porttitor. Ut tortor quam, convallis ut scelerisque eget, dignissim eu lorem. Ut ullamcorper velit a tellus iaculis rhoncus laoreet lectus cursus. Fusce et leo at magna pulvinar consectetur in vitae lacus. Morbi lorem odio, fermentum vitae tristique placerat, varius ac massa. Mauris egestas, mauris ac dictum consequat, turpis dui vehicula velit, et ornare ante dolor sed libero. 
    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:11:37.867

Position: fixed doesn't work on mobile browsers. You have to simulate this with js. Set position: absolute on .navigationBox and bind on the scroll event to update the offset from the top.

```
$(document).scroll(function () {
   $(".navigationBox").css('top', $(document).scrollTop());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T09:36:46.110

您可以将事件处理程序添加到“touchstart”和“touchend”以隐藏和显示您的 div。

# c# - 为属性分配默认值

> ID：14433092
> 
> 赞同：1
> 
> 时间：2013-01-21T05:51:48.200
> 
> 标签：c#

我有一个像这样的xml：

```
<Settings>
  <User default="Programmer"></User>
  <Level default="2"></Level>
<Settings> 
```

这被反序列化为 UserSettings 类型的对象：

```
[Serializable]
[XmlRoot("Settings")]
public class UserSettings
{
    [XmlElement("User")]
    public string User { get; set; }

    [XmlElement("Level")]
    public string Level { get; set; }

} 
```

UserSettings 对象在运行时给出标签的任何值。

当标签为空或传入的 xml 中不存在标签时，我希望类返回默认属性值。

因此，如果有一个 UserSettings 类型的对象 objUserSettings 那么

`objUserSettings.User`

如果标签用户为空，则应给出“程序员”或 xml 中的默认属性值。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:02:06.463

试试这个

```
using System.ComponentModel;

[Serializable]
[XmlRoot("Settings")]
public class UserSettings
{
    [DefaultValue("Yogesh")]
    [XmlElement("User")]
    public string User { get; set; }

    [DefaultValue("1st")]
    [XmlElement("Level")]
    public string Level { get; set; }

} 
```

有关更多信息，请参阅[此](http://msdn.microsoft.com/en-us/library/system.componentmodel.defaultvalueattribute%28v=vs.71%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:45:43.267

添加另一个答案，因为我对这个问题很感兴趣。接受或离开它，但这可能是我攻击此功能的方式。

这是一个更复杂的答案，但它使用泛型为您提供了类型安全性，并且大部分繁重的工作都在一个基类中完成（无需一遍又一遍地复制/粘贴相同的代码）。

向 UserSettings 添加了一个属性以显示另一种类型的示例...

```
[Serializable]
[XmlRoot("Settings")]
public class UserSettings
{
    public UserSettings()
    {
        User = new DefaultableStringValue();
        Level = new DefaultableIntegerValue();
        IsFullscreen = new DefaultableBooleanValue();
    }

    [XmlElement("User")]
    public DefaultableStringValue User { get; set; }

    [XmlElement("Level")]
    public DefaultableIntegerValue Level { get; set; }

    [XmlElement("IsFullscreen")]
    public DefaultableBooleanValue IsFullscreen { get; set; }
} 
```

类型化 DefaultableValues 的简单实现...

```
[Serializable]
public class DefaultableStringValue : DefaultableValue<string>
{
    public DefaultableStringValue() : base(s => s) { }
}

[Serializable]
public class DefaultableIntegerValue : DefaultableValue<int>
{
    public DefaultableIntegerValue() : base(int.Parse) { }
}

[Serializable]
public class DefaultableBooleanValue : DefaultableValue<bool>
{
    public DefaultableBooleanValue() : base(bool.Parse) { }
} 
```

完成解析和缓存解析值的所有繁重工作的基类......

```
[Serializable]
public abstract class DefaultableValue<T>
{
    protected Func<string, T> _parsingFunc;

    private string _valueText;
    private T _cachedValue;
    private bool _isValueCached;

    private string _defaultText;
    private T _cachedDefault;
    private bool _isDefaultCached;

    protected DefaultableValue(Func<string, T> parsingFunc)
    {
        _parsingFunc = parsingFunc;
        _isValueCached = false;
        _isDefaultCached = false;
    }

    [XmlAttribute("default")]
    public string DefaultText
    {
        get { return _defaultText; }
        set
        {
            _defaultText = value;
            _isDefaultCached = false;
        }
    }

    [XmlText]
    public string ValueText
    {
        get { return _valueText; }
        set
        {
            _valueText = value;
            _isValueCached = false;
        }
    }

    [XmlIgnore]
    public T Default
    {
        get
        {
            if (_isDefaultCached)
                return _cachedDefault;

            if (HasDefault)
                return ParseAndCacheValue(DefaultText, out _cachedDefault, out _isDefaultCached);

            return default(T);
        }
        set
        {
            DefaultText = value.ToString();
            _cachedDefault = value;
            _isDefaultCached = true;
        }
    }

    [XmlIgnore]
    public T Value
    {
        get
        {
            if (_isValueCached)
                return _cachedValue;

            if (HasValue)
                return ParseAndCacheValue(ValueText, out _cachedValue, out _isValueCached);

            return Default;
        }
        set
        {
            ValueText = value.ToString();
            _cachedValue = value;
            _isValueCached = true;
        }
    }

    [XmlIgnore]
    public bool HasDefault { get { return !string.IsNullOrEmpty(_defaultText); } }

    [XmlIgnore]
    public bool HasValue { get { return !string.IsNullOrEmpty(_valueText); } }

    private T ParseAndCacheValue(string text, out T cache, out bool isCached)
    {
        cache = _parsingFunc(text);
        isCached = true;

        return cache;
    }
} 
```

还有一个示例程序来演示用法......

```
public class Program
{
    private static void Main(string[] args)
    {
        UserSettings userSettings = new UserSettings();
        userSettings.User.Default = "Programmer";
        userSettings.Level.Default = 2;
        userSettings.Level.Value = 99;

        XmlSerializer xmlSerializer = new XmlSerializer(typeof(UserSettings));

        string serializedUserSettings;
        using (StringWriter stringWriter = new StringWriter())
        {
            xmlSerializer.Serialize(stringWriter, userSettings);
            serializedUserSettings = stringWriter.GetStringBuilder().ToString();
        }

        UserSettings deserializedUserSettings;
        using (StringReader stringReader = new StringReader(serializedUserSettings))
        {
            deserializedUserSettings = (UserSettings)xmlSerializer.Deserialize(stringReader);
        }

        Console.Out.WriteLine("User: HasDefault={0}, Default={1}, HasValue={2}, Value={3}", 
            deserializedUserSettings.User.HasDefault ? "Yes" : "No", 
            deserializedUserSettings.User.Default,
            deserializedUserSettings.User.HasValue ? "Yes" : "No", 
            deserializedUserSettings.User.Value);

        Console.Out.WriteLine("Level: HasDefault={0}, Default={1}, HasValue={2}, Value={3}",
            deserializedUserSettings.Level.HasDefault ? "Yes" : "No",
            deserializedUserSettings.Level.Default,
            deserializedUserSettings.Level.HasValue ? "Yes" : "No",
            deserializedUserSettings.Level.Value);

        Console.Out.WriteLine("IsFullscreen: HasDefault={0}, Default={1}, HasValue={2}, Value={3}",
            deserializedUserSettings.IsFullscreen.HasDefault ? "Yes" : "No",
            deserializedUserSettings.IsFullscreen.Default,
            deserializedUserSettings.IsFullscreen.HasValue ? "Yes" : "No",
            deserializedUserSettings.IsFullscreen.Value);

        Console.ReadLine();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:10:44.603

您可以使用属性的默认值属性。

在你的情况下，它会是，

```
[Serializable]
[XmlRoot("Settings")]
public class UserSettings
{
    [XmlElement("User")]
    [DefaultValue("Programmer")]
    public string User { get; set; }

    [XmlElement("Level")]
    [DefaultValue(2)]
    public string Level { get; set; }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T07:22:33.493

我不相信有办法告诉字符串使用默认的 xml 属性。您必须将这些对象中的每一个反序列化为一个结构，该结构具有作为 xml 属性的属性的默认值。

这是一个例子......

```
[Serializable]
[XmlRoot("Settings")]
public class UserSettings
{
    [XmlElement("User")]
    public DefaultableValue User { get; set; }

    [XmlElement("Level")]
    public DefaultableValue Level { get; set; }

}

[Serializable]
public class DefaultableValue
{
    [XmlAttribute("default")]
    public string Default { get; set; }

    [XmlText]
    public string Value { get; set; }
} 
```

以及演示用法的示例程序...

```
public class Program
{
    private static void Main(string[] args)
    {
        UserSettings userSettings = new UserSettings();
        userSettings.User = new DefaultableValue()
            {
                Default = "Programmer", 
                Value = "Tyler"
            };
        userSettings.Level = new DefaultableValue()
            {
                Default = "2", 
                Value = "99"
            };

        XmlSerializer xmlSerializer = new XmlSerializer(typeof(UserSettings));

        string serializedUserSettings;
        using (StringWriter stringWriter = new StringWriter())
        {
            xmlSerializer.Serialize(stringWriter, userSettings);
            serializedUserSettings = stringWriter.GetStringBuilder().ToString();
        }

        UserSettings deserializedUserSettings;
        using (StringReader stringReader = new StringReader(serializedUserSettings))
        {
            deserializedUserSettings = (UserSettings)xmlSerializer.Deserialize(stringReader);
        }

        Console.Out.WriteLine("User: Default={0}, Actual={1}", 
            deserializedUserSettings.User.Default, 
            deserializedUserSettings.User.Value);

        Console.Out.WriteLine("Level: Default={0}, Actual={1}", 
            deserializedUserSettings.Level.Default, 
            deserializedUserSettings.Level.Value);
    }
} 
```

（请注意，我在代码中有默认值，但它们很可能来自 xml 文件）

# ruby-on-rails-3.2 - 在 Rails 资产管道中使用索引文件

> ID：14433093
> 
> 赞同：3
> 
> 时间：2013-01-21T05:52:42.733
> 
> 标签：ruby-on-rails-3.2, asset-pipeline, charisma

我想在我的应用程序中包含一个主题文件夹[https://github.com/usmanhalalit/charisma](https://github.com/usmanhalalit/charisma)。

作为本文档[http://guides.rubyonrails.org/asset_pipeline.html#asset-organization](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization)，我将主题文件夹克隆到 app/assets/charisma ，并将

> config.assets.paths << Rails.root.join("app", "assets", "charisma")

到我的应用程序配置。

然后我在 app/assets/charisma/ 上创建 index.js 和 index.css：

```
/*
 *= require_tree .
*/

//= require_tree . 
```

然后我添加`//= require charisma`到我的application.js，它报错：`couldn't find file 'charisma'`当我的应用程序运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:30:37.203

我认为您不应该将新文件夹添加到 assets paths 。只需将存储库克隆到`vendor/assets/charisma`or`lib/assets/charisma`并在那里创建您的索引文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T13:32:24.197

最后我想通了。[实际上，我认为http://guides.rubyonrails.org/asset_pipeline.html#using-index-files](http://guides.rubyonrails.org/asset_pipeline.html#using-index-files)的文档中有错误。索引文件应命名为 library_name.css 而不是 index.css（在您的情况下创建 /vendor/assets/charisma/charisma.css），然后在您的 application.css 中您可以调用 //= require charisma 。

# android - 允许用户在 android 应用程序中插入图像

> ID：14433096
> 
> 赞同：10
> 
> 时间：2013-01-21T05:57:29.430
> 
> 标签：android, android-widget, android-imageview, android-image

我的问题是：如何创建允许用户从手机上传图像并将其作为图片配置文件插入应用程序的 imageButton？例如whatsapp，它允许用户从手机中选择图像并将其设置为图片配置文件。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T06:10:40.853

以下是以下链接..

[创建图像按钮](https://developer.android.com/reference/android/widget/ImageButton)

上传图片

[示例 1](https://stackoverflow.com/questions/9107900/how-to-upload-image-from-gallery-in-android)

[示例 2](http://viralpatel.net/blogs/pick-image-from-galary-android-app/)

[示例 3](http://android.forums.wordpress.org/topic/upload-images-to-gallery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-09T13:30:27.897

我的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent">

<ImageView
    android:id="@android:id/icon"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:onClick="selectImage"
    /> 
```

我的档案

```
public class Test extends AppCompatActivity {
private static final int SELECT_PICTURE = 0;
private ImageView imageView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test);
    imageView = (ImageView) findViewById(android.R.id.icon);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        Bitmap bitmap = getPath(data.getData());
        imageView.setImageBitmap(bitmap);
    }
}

private Bitmap getPath(Uri uri) {

    String[] projection = {MediaStore.Images.Media.DATA};
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    String filePath = cursor.getString(column_index);
   // cursor.close();
    // Convert file path into bitmap image using below line.
    Bitmap bitmap = BitmapFactory.decodeFile(filePath);

    return bitmap;
}

private void selectImage() {

    Intent intent = new Intent();
    intent.setType("image/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent, "Select Picture"), SELECT_PICTURE);
}

} 
```

# ios - UILabel 默认 shadowRadius 是什么？

> ID：14433099
> 
> 赞同：0
> 
> 时间：2013-01-21T05:59:45.183
> 
> 标签：ios, objective-c, uilabel, shadow, quartz-core

我使用 QuartzCore 在 UITableViewCell 中设置 UILabel 阴影：

```
cell.textLabel.layer.shadowColor = [[UIColor orange] CGColor];
cell.textLabel.layer.shadowOffset = CGSizeMake(0.0, 1.0);
cell.textLabel.layer.shadowRadius = 0.0;
cell.textLabel.layer.masksToBounds = NO; 
```

但是由于它的性能很慢，我必须实现`-(void)drawRect:(CGRect)rect`方法。最近我发现 UILabel 的阴影可以用它的属性来设置：

```
cell.textLabel.shadowColor = [UIColor orangeColor];
cell.textLabel.shadowOffset = CGSizeMake(0.0, 1.0); 
```

现在我想要删除`drawRect:`实现并通过属性设置阴影。

QuartzCore CALayer`shadowRadius`默认值为 3.0。虽然 UILabel 没有这个属性，但是否意味着阴影半径等于 0.0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:05:09.290

[UILabel](http://developer.apple.com/library/ios/documentation/uikit/reference/UILabel_Class/Reference/UILabel.html#//apple_ref/occ/instp/UILabel/shadowColor)的文档说：

> 文本阴影使用指定的偏移量和颜色绘制，**没有模糊**。

所以，是的，阴影半径为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T06:06:01.250

只是一个建议 -`QuartzCore`在`UITableView`单元格中使用设置阴影会影响滚动性能。它绝对不会平滑滚动。

我建议您在 的`UIImageView`下方使用 a`UILabel`来获得相同的效果。它可能需要更多的工作来保持阴影图像随着设计的变化而更新，但如果它是在减少开发人员的工作量或改善用户体验之间进行权衡的话；我会倾向于后者 10 次中的 9 次...

# python - 如何禁用 wtforms SelectField 选项验证？

> ID：14433104
> 
> 赞同：10
> 
> 时间：2013-01-21T06:00:53.590
> 
> 标签：python, flask, wtforms

我有一个 wtforms 表单

```
class MyForm(Form):
    names = SelectField('name', choices=[]) 
```

名称字段的选择是动态构建的，并通过 ajax 调用在模板中呈现。当我提交表单时，它会引发一个异常“不是有效的选择”。我不希望表单为我验证名称字段的选择。如何禁用验证？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-08T02:24:52.470

我做了这样的事情来绕过`SelectMultipleField`WTForms 中的验证。它应该以与平原相同的方式工作`SelectField`

```
class NonValidatingSelectMultipleField(SelectMultipleField):
    """
    Attempt to make an open ended select multiple field that can accept dynamic
    choices added by the browser.
    """
    def pre_validate(self, form):
        pass 
```

我只是覆盖了内置验证。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-04-12T19:28:40.233

我遇到了同样的问题。Xealot 提供的解决方案很棒。我发现有一个选项可以将验证设置为`False`使用`validate_choice=False`. 我已经包含了以下两种解决方案的示例。

```
class NonValidatingSelectField(SelectField):
    """
    Attempt to make an open ended select multiple field that can accept dynamic
    choices added by the browser.
    """
    def pre_validate(self, form):
        pass

class MyForm(Form):
    names = NonValidatingSelectField('name')
    names2 = SelectField('name2', validate_choice=False) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:10:50.797

通过“我不希望表单验证选择”，我假设您*实际上*的意思是“我稍后会自己做，并怀疑表单正确执行它的能力”。

但你很幸运！您可以对现有表单进行子类化以动态添加选项。

```
class MyForm(Form):
    # other fields...

def some_handler(request):
    name_choices = build_name_choices()
    class RealForm(MyForm):
        names = SelectField('name', choices=name_choices)

    form = RealForm(request.GET)
    form.validate() 
```

这也使您免于将表单的验证和错误消息与您以后自己生成的消息合并的乏味。

# ios - UIScrollView 缩放不适用于自动布局

> ID：14433109
> 
> 赞同：38
> 
> 时间：2013-01-21T06:01:48.347
> 
> 标签：ios, uiscrollview, zooming, autolayout

使用严格的自动布局环境使用 UIScrollView 进行缩放似乎不起作用。

这尤其令人沮丧，因为 iOS 6 发行说明确实让我相信，当在这里[http://developer.apple.com/library/ios/#releasenotes/General/RN-写关于“纯自动布局方法”的文章时应该这样做iOSSDK-6_0/_index.html](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

我查看了 WWDC 2012 的第 202、228 和 232 场幻灯片，但没有看到答案。

我在互联网上看到的唯一一个专门针对这个问题的问题是[UIScrollView zooming with Auto Layout](https://stackoverflow.com/questions/14026807/uiscrollview-zooming-with-auto-layout)，但它没有提供问题的代码，也没有答案。

这个用户[https://stackoverflow.com/users/341994/matt](https://stackoverflow.com/users/341994/matt)对 UIScrollView 自动布局问题给出了很多很好的回应，甚至链接到 git hub 上的代码，但我在那里找不到任何可以回答这个问题的东西。

我试图将这个问题归结为绝对最低限度以使其清楚。

我创建了一个带有情节提要的新单视图应用程序，并且在界面构建器中没有进行任何更改。

我在项目“pic.jpg”中添加了一个大图片文件。

SVFViewController.h

```
#import <UIKit/UIKit.h> 
@interface SVFViewController : UIViewController <UIScrollViewDelegate>
@property (nonatomic) UIImageView *imageViewPointer;
@end 
```

SVFViewController.m

```
#import "SVFViewController.h"

@interface SVFViewController ()

@end

@implementation SVFViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    UIScrollView *scrollView = [[UIScrollView alloc] init];
    UIImageView *imageView = [[UIImageView alloc] init];
    [imageView setImage:[UIImage imageNamed:@"pic.jpg"]];
    [self.view addSubview:scrollView];
    [scrollView addSubview:imageView];

    scrollView.translatesAutoresizingMaskIntoConstraints = NO;
    imageView.translatesAutoresizingMaskIntoConstraints = NO;
    self.imageViewPointer = imageView;
    scrollView.maximumZoomScale = 2;
    scrollView.minimumZoomScale = .5;
    scrollView.delegate = self;

    NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(scrollView,imageView);
    NSLog(@"Current views dictionary: %@", viewsDictionary);
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[scrollView]|" options:0 metrics: 0 views:viewsDictionary]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[scrollView]|" options:0 metrics: 0 views:viewsDictionary]];
    [scrollView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[imageView]|" options:0 metrics: 0 views:viewsDictionary]];
    [scrollView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[imageView]|" options:0 metrics: 0 views:viewsDictionary]];
}

-(UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView{
    return self.imageViewPointer;
}

@end 
```

请注意，我特别努力使它与 iOS 6 发行说明中提供的示例代码一样，只是做了最简单的实现缩放。

那么，问题呢？

当您运行此应用程序并在滚动视图中平移时，一切都很好。但是当您缩放时，问题很明显，图像来回闪烁，并且每次缩放时图像在滚动视图中的位置都会变得更加错误。

看起来 imageView 的内容偏移量正在进行战斗，似乎每次“缩放”都会被两个不同的东西设置为不同的值。（imageView 的内容偏移属性的 NSLog 似乎证实了这一点）。

我在这里做错了什么？有谁知道如何在纯自动布局环境中的 UIScrollView 中实现缩放。那里有这样的例子吗？

请帮忙。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T22:57:53.430

再次阅读[iOS SDK 6.0 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html)，我发现：

> 请注意，您可以通过在视图和滚动视图的子树之外的视图（例如滚动视图的超级视图）之间创建约束，使滚动视图的子视图看起来浮动（不滚动）在其他滚动内容之上。

## 解决方案

**将您的子视图连接到外部视图。换句话说，就是嵌入了滚动视图的视图。**

并以以下方式应用约束，我已经成功了：

```
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[scrollView]|" options:0 metrics: 0 views:viewsDictionary]];
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[scrollView]|" options:0 metrics: 0 views:viewsDictionary]];
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[imageView(width)]" options:0 metrics:@{@"width":@(self.imageViewPointer.image.size.width)} views:viewsDictionary]];
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[imageView(height)]" options:0 metrics:@{@"height":@(self.imageViewPointer.image.size.height)} views:viewsDictionary]]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-18T04:40:18.147

发生的问题是缩放过程中图像视图的位置变化。在缩放过程中，imageview 的原点位置将变为负值。我相信这就是为什么会发生生涩的运动。同样，在缩放完成后，imageView 仍然在错误的位置，这意味着滚动会出现偏移。

如果你`-(void) scrollViewDidZoom:(UIScrollView *)scrollView`在这段时间内实现并记录 UIImageView 的框架，你可以看到它的原点发生了变化。

我最终通过实施这样的策略来解决[问题](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/ch20p573scrollViewAutoLayout/ch20p573scrollViewAutoLayout/ViewController.m)

除了在缩放时更改 contentView 的框架

```
-(void) scrollViewDidZoom:(UIScrollView *)scrollView {
    CGRect cFrame = self.contentView.frame;
    cFrame.origin = CGPointZero;
    self.contentView.frame = cFrame;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-06T10:23:43.117

这些解决方案都很有效。这是我所做的，不需要任何黑客或子类，使用这个设置：

```
[view]
  [scrollView]
    [container]
      [imageView]
      [imageView2] 
```

1.  `scrollView`在 IB 中，将to的顶部、前导、底部和尾部连接起来`view`。
2.  `container`连接到的顶部、前导、底部和尾随`scrollView`。
3.  将 center-x 和 center-y`container`连接到 center-x 和 center-y 上，`scrollView` **并将其标记为*在 build time 上删除***。这只需要使 IB 中的警告静音。
4.  在视图控制器中实现`viewForZoomingInScrollView:`，它应该是 scrollView 的委托，并从该方法返回`container`。
5.  设置`imageView`的图像时，确定最小缩放比例（因为现在它将以原始大小显示）并设置它：

    ```
    CGSize mySize = self.view.bounds.size;
    CGSize imgSize = _imageView.image.size;
    CGFloat scale = fminf(mySize.width / imgSize.width,
                          mySize.height / imgSize.height);
    _scrollView.minimumZoomScale = scale;
    _scrollView.zoomScale = scale;
    _scrollView.maximumZoomScale = 4 * scale; 
    ```

这对我有用，在设置图像时缩放滚动视图以显示整个图像并允许放大到初始大小的 4 倍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-12T14:33:23.593

假设你在情节提要“`UIImageView`里面” `UIScrollView`“里面`UIView`”。

将 " " 中的所有约束`UIScrollView`与视图控制器 + UIView ( `Horizontal Space - Scroll View - View`& `Horizontal Space - Scroll View - View`) 中的两个约束链接。

为“”设置视图控制器 AS 委托`UIScrollView`。

然后实现这段代码：

```
@interface VC () <UIScrollViewDelegate>
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;
@property (weak, nonatomic) IBOutlet UIImageView *imageView;
@property (strong, nonatomic) IBOutletCollection(NSLayoutConstraint) NSArray* constraints;
@end

@implementation FamilyTreeImageVC

- (void)viewDidLoad {
    [super viewDidLoad];
    [self.scrollView removeConstraints:self.constraints];
}

- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return self.imageView;
}

-(void) scrollViewDidZoom:(UIScrollView *)scrollView {
    CGRect cFrame = self.imageView.frame;
    cFrame.origin = CGPointZero;
    self.imageView.frame = cFrame;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-10T10:03:06.043

尝试仅使用 scrollView 从情节提要的项目中实现缩放时，我遇到了同样的问题。

我通过添加一个单独的捏手势识别器来修复它。我只是将它从工具箱拖到我的场景中。然后我将它连接到一个我称为“doPinch”的动作，它实现了缩放。我将它连接到一个我称为“pinchRecognizer”的插座，以便我可以访问它的 scale 属性。这似乎覆盖了滚动视图的内置缩放，并且跳跃消失了。也许它不会在起源上犯同样的错误，或者更优雅地处理它。在 IB 的布局之上几乎没有什么工作。

将捏合手势识别器引入场景后，您确实需要 action 和 viewForZoomingInScrollView 方法。错过任何一个，缩放停止工作。

我的视图控制器中的代码是这样的：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
return self.zoomableImage;
}

- (IBAction)doPinch:(id)sender

{
NSLog(@"In the pinch action now with scale: %f", self.pinchRecognizer.scale);
[scrollView setZoomScale:self.pinchRecognizer.scale animated:NO];
} 
```

这个非常基本的实现确实有一个副作用：当您返回缩放图像并再缩放一些时，比例的值为 1.0f，因此它会跳回原始比例。

您可以通过引入属性“currentScale”来跟踪缩放并在再次开始缩放时设置捏合手势识别器缩放来解决此问题。您需要使用手势识别器的 state 属性：

```
- (IBAction)doPinch:(id)sender
{
NSLog(@"In the pinch action now with scale: %f", self.pinchRecognizer.scale);
NSLog(@"Gesture recognizer state is: %d", self.pinchRecognizer.state);

switch (self.pinchRecognizer.state)
{
    case 1:
        NSLog(@"Zoom begins, with current scale set to: %f", self.currentScale);
        [self.pinchRecognizer setScale:self.currentScale];
        break;
    case 3:
        NSLog(@"Zoom ends, with pinch recognizer scale set to: %f", self.pinchRecognizer.scale);
        self.currentScale = self.pinchRecognizer.scale;
    default:
        break;
}

[scrollView setZoomScale:self.pinchRecognizer.scale animated:NO];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-03T20:50:25.120

所以这就是我设法解决的问题。

这是我的更改的原件：

```
@interface ScrollViewZoomTestViewController () <UIScrollViewDelegate>

@property (nonatomic, strong) UIImageView* imageViewPointer;

// These properties are new
@property (nonatomic, strong) NSMutableArray* imageViewConstraints;
@property (nonatomic) BOOL imageViewConstraintsNeedUpdating;
@property (nonatomic, strong) UIScrollView* scrollViewPointer;

@end

@implementation ScrollViewZoomTestViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIScrollView *scrollView = [[UIScrollView alloc] init];
    UIImageView *imageView = [[UIImageView alloc] init];
    [imageView setImage:[UIImage imageNamed:@"pic.jpg"]];
    [self.view addSubview:scrollView];
    [scrollView addSubview:imageView];

    scrollView.translatesAutoresizingMaskIntoConstraints = NO;
    imageView.translatesAutoresizingMaskIntoConstraints = NO;
    self.imageViewPointer = imageView;
    // New
    self.scrollViewPointer = scrollView;
    scrollView.maximumZoomScale = 2;
    scrollView.minimumZoomScale = .5;
    scrollView.delegate = self;

    NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(scrollView, imageView);
    NSLog(@"Current views dictionary: %@", viewsDictionary);
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[scrollView]|" options:0 metrics: 0 views:viewsDictionary]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[scrollView]|" options:0 metrics: 0 views:viewsDictionary]];

    // Saving the image view width & height constraints
    self.imageViewConstraints = [[NSMutableArray alloc] init];
    // Constrain the image view to be the same width & height of the scroll view
    [_imageViewConstraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[imageView(scrollView)]|" options:0 metrics: 0 views:viewsDictionary]];
    [_imageViewConstraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[imageView(scrollView)]|" options:0 metrics: 0 views:viewsDictionary]];

    // Add the image view constraints to the VIEW, not the scroll view
    [self.view addConstraints:_imageViewConstraints];

    // Flag
    self.imageViewConstraintsNeedUpdating = YES;
} 
```

所以在这里回顾一下，我将所有约束添加到 self.view，保存`UIImageView`在`NSMutableArray`属性中设置的约束，并设置`UIImageView`约束需要更新的标志。

这些对工作的初始限制从`UIImageView`设置它开始。它将与`UIScrollView`. 但是，这不允许我们缩放图像视图。它将保持与滚动视图相同`width`/ 。`height`不是我们想要的。这就是我保存约束并设置标志的原因。我们会在一分钟内解决这个问题。

现在，设置缩放视图：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return self.imageViewPointer;
} 
```

好的，所以现在我们需要实际允许我们缩放。我正在删除初始`UIImageView`约束并添加一些新约束，这一次约束到`UIScrollView`'s `contentSize` `width`& `height`：

```
- (void)scrollViewWillBeginZooming:(UIScrollView *)scrollView withView:(UIView *)view
{
    if(_imageViewConstraintsNeedUpdating)
    {
        // Remove the previous image view constraints
        [self.view removeConstraints:_imageViewConstraints];

        // Replace them with new ones, this time constraining against the `width` & `height` of the scroll view's content, not the scroll view itself
        NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(_scrollViewPointer, _imageViewPointer);
        [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[_imageViewPointer(width)]|" options:0 metrics:@{@"width" : @(_scrollViewPointer.contentSize.width)} views:viewsDictionary]];
        [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[_imageViewPointer(height)]|" options:0 metrics:@{@"height" : @(_scrollViewPointer.contentSize.height)} views:viewsDictionary]];

        self.imageViewConstraintsNeedUpdating = NO;
    }
}

@end 
```

我们不能像这样设置约束，`-viewDidLoad`因为图像还没有被渲染到`UIImageView`，所以`UIScrollView`'s `contentSize`will be `{0,0}`。

这对我来说似乎很老套，但它确实有效，它确实使用纯自动布局，我找不到更好的方法来做到这一点。在我看来，Apple 需要提供一种更好的方法来缩放内容并`UIScrollView`使用自动布局约束。

# javascript - JSON：最好使用一个对象（key/val 对），还是使用两个对象将数据与模型分开？

> ID：14433112
> 
> 赞同：3
> 
> 时间：2013-01-21T06:02:49.747
> 
> 标签：javascript, json, data-structures, data-modeling

我没有实现太多 JSON，所以我很好奇是否有建议的方法来处理数据。我猜有两种主要方法（也许它们是无效的 JSON），但我想看看是否有任何额外的优点/缺点，或者更好的方法？

* * *

**方法 1**：键/值对的组合

```
var all_in_one = { "person"  : [{
                                  "firstName" : "John",
                                  "lastName"  : "Smith",
                                  "phone"     : [{ 
                                                   "areaCode"  : "800", 
                                                   "number"    : "222-3333" 
                                                 },
                                                 {
                                                   "areaCode"  : "800",
                                                   "number"    : "222-3334",
                                                   "extension" : "1111"
                                                 }]
                                },
                                {
                                  "firstName" : "John",
                                  "lastName"  : "Rolfe"
                                },
                                {...}],
                   "other"    : [{...}]
                 }; 
```

好处：

*   键接近值（循环和拉取值时代码更直观、更清晰）
*   不需要值/键（流体模型/结构）

问题：

*   多条记录的更多开销（重复键）

* * *

**方法 2**：键与值的分离

```
var json = { "model" : { "person" : ["firstName","lastName",["areaCode","number","extension"]],
                         "other"  : [...]
                       },
             "data"  : { "person" : [["John","Smith",[["800","222-3333",undefined],
                                                      ["800","222-3334","1111"]]],
                                     ["John","Rolfe",[[undefined,undefined,undefined]],
                                     [...]
                                    ],
                         "other"  : [...]
                       }
            }; 
```

好处：

*   更少的开销（键定义一次）
*   可在一处更改的静态模型/结构

问题：

*   如果预期会发生变化，静态模型/结构可能会出现更多问题
*   提取数据时代码可能更混乱

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:17:31.370

我从未见过有人使用方法 2。它没有将“数据与模型”分开；无论如何，这没有意义，因为数据**就是**模型。你所做的只是让你很难分辨出任何数据*是*什么。

我想现在您可以在一个地方重命名一个字段，但这必须是最不常见的模式更改类型之一。添加一个字段、移动一个字段、删除一个字段、交换两个字段、将一个字段设为可选等等，都将是一场无法验证的噩梦。

（至于开销，gzip 将在线上处理它，并且您的 JSON 解码器和/或语言希望足够聪明，可以为每个重复的键重用相同的字符串对象。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:32:09.610

我从未见过对象形式的方法 2，但它看起来与数据表非常相似，其中第一个数组包含列名，其他数组包含数据。

我看到第二种方法的两个主要问题：

*   它更严格（例如添加另一个电话属性并不容易）
*   稀疏数据不方便，因为您最终会得到很多“未定义”

明显的好处是数据大小要小得多，因为不需要重复属性名称。

底线：如果数据很好地适合表格（只有几个空单元格）并且数据集很大，我会使用第二种方法。

[编辑] 至于你的问题“我很好奇我是否也应该传递其他元数据”，这绝对是第二种方法的额外好处。正如我在评论中已经提到的，谷歌可视化是一个很好的例子。我还使用 Microsoft SharePoint 2013，它正是这样做的。以下是 SharePoint 的示例：

```
{"Name": "Editor",
"FieldType": "User",
"RealFieldName": "Editor",
"DisplayName": "Modified By",
...
"AllowGridEditing": "FALSE"} 
```

# objective-c - 自动登录 Facebook

> ID：14433113
> 
> 赞同：-4
> 
> 时间：2013-01-21T06:02:52.790
> 
> 标签：objective-c, facebook

如果有人在 iphone 中登录了 fb，则在我的应用中自动登录 facebook。如果 facebook a/c 已登录任何应用程序或 iphone，这就是我不要求用户提供凭据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:09:07.113

试试这个代码。

```
- (void)fbDidLogout
{
    //NSLog(@"facebook did logout");

    NSHTTPCookie *cookie;
    NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (cookie in [storage cookies])
    {
        NSString* domainName = [cookie domain];
        NSRange domainRange = [domainName rangeOfString:@"facebook"];
        if(domainRange.length > 0)
        {
            [storage deleteCookie:cookie];
        }
    }
    //////NSLog(@"facebook did logout");
    [self showLoggedOut:YES];
    logoutButton.hidden=YES;

} 
```

它可以帮助你

# javascript - JQuery .on 事件等函数

> ID：14433114
> 
> 赞同：1
> 
> 时间：2013-01-21T06:03:04.240
> 
> 标签：javascript, jquery

由于不推荐使用 .live()，我开始使用 .on()。

我有以下代码：

```
$('.myClass').on("click", function(event)
{
    var args = '......';

     SendAjax(args);
}); 
```

SendAjax 函数执行以下操作：

```
SendAjax(args)
{
    $.ajax(
    {
        type: "POST",
        url: webPageName,
        data: queryParams+'&'+unique,
        success: function(result)
        {
            MyReturnFunction(result);
        }
    });
} 
```

ajax 会返回这个函数：

```
MyReturnFunction(response)
{
      $('.myClass').html(response);
} 
```

但是在这个 MyReturnFunction() 之后，.myClass 上的事件不再起作用。如何使用 .on() 或 .bind() 解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:04:39.517

该`.on()`函数可以接受一个额外的参数：

```
$('body').on('click', '.myClass', function() { ... }); 
```

这就是`.live()`为您所做的，但它是一种向后的 API 设计。现在您必须决定将委托处理程序放在哪里。body 元素是一个很好的默认值，但它可以是任何父元素。有时，当您处理对表格中事物的点击时，最好在`<table>`元素上进行绑定（尽管主体也可以正常工作）。

所以基本上规则是当你以前写的时候：

```
$('something').live('event-name', function() { ... }) 
```

你写：

```
$('container-selector').on('event-name', 'something', function() { ... }) 
```

“container-selector”表示您希望*真正的*事件处理程序放置在哪里——检查冒泡事件的目标是否与给定的“something”选择器匹配。和以前一样，您可以传递事件名称列表（以空格分隔），而不仅仅是一个。还有一个变体可让您将对象映射事件名称传递给函数。

# c# - 每个请求的会话 MVC 应用程序的 NHibernate 问题

> ID：14433118
> 
> 赞同：3
> 
> 时间：2013-01-21T06:03:49.607
> 
> 标签：c#, asp.net-mvc, nhibernate, session-management, session-per-request

我编写了一个使用 NHibernate 作为 ORM 的 C# MVC 3，并且在大多数页面加载时都抛出了一些奇怪的异常。它们似乎主要与封闭会话等有关，我已经检查了大多数常见问题，但发现几乎没有帮助。一些例外情况包括：

```
 [[NHibernate.Util.ADOExceptionReporter]] : System.InvalidOperationException: There is already an open DataReader associated with this Command which must be closed first.
   at System.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)

    [[NHibernate.Transaction.AdoTransaction]] : Begin transaction failed
    System.Data.SqlClient.SqlException (0x80131904): The server failed to resume the transaction. Desc:3b00000006.

    [[NHibernate.Transaction.AdoTransaction]] : Commit failed
    System.NullReferenceException: Object reference not set to an instance of an object.

    [[NHibernate.Transaction.AdoTransaction]] : Commit failed
    System.Data.SqlClient.SqlException (0x80131904): The COMMIT TRANSACTION request has no corresponding BEGIN TRANSACTION.

    [[NHibernate.Util.ADOExceptionReporter]] : System.InvalidOperationException: The transaction is either not associated with the current connection or has been completed.
       at System.Data.SqlClient.SqlCommand.ValidateCommand(String method, Boolean async)

    [[NHibernate.Transaction.AdoTransaction]] : Begin transaction failed
    System.InvalidOperationException: SqlConnection does not support parallel transactions. 
```

我为异常之墙道歉，我怀疑它们是相关的，但代码中可能存在另一个错误，也可能导致一两个错误。我不喜欢对这些东西使用随机这个词，但我似乎无法追踪调用它们的任何特定代码行，它们似乎只是出现在与 ISession 对象相关的代码行中。我什至在 Global.asax 文件中的 BeginTranscation 方法上抛出了“会话已关闭”异常。

应用程序使用 hibernate.cfg.xml 中 current_session_context_class 的 web 选项。

我怀疑它与我的会话管理代码有关。该网站通常会同时加载大约 10 个 AJAX 请求，当同时加载多个页面时，错误似乎更频繁地发生。有两个会话工厂，一个用于每个正在使用的数据库。

这是我相关的 Global.asax 代码：

```
protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();
            HibernatingRhinos.Profiler.Appender.NHibernate.NHibernateProfiler.Initialize();
            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);
            _sessionFactory = (new WebClientSessionManager()).MakeSessionFactory();
            _sessionFactoryNotWeb = ClientSessionManager.MakeSessionFactory();
        }
protected void Application_BeginRequest(object sender, EventArgs e)
        {
            _session = _sessionFactory.OpenSession();
            _sessionNotWeb = _sessionFactoryNotWeb.OpenSession();
            CurrentSessionContext.Bind(_sessionNotWeb);
            CurrentSessionContext.Bind(_session);
            _session.BeginTransaction();
            _sessionNotWeb.BeginTransaction();
        }
 protected void Application_EndRequest(object sender, EventArgs e)
        {
            //Same code is repeated for the _sessionFactoryNotWeb
            ISession session = CurrentSessionContext.Unbind(_sessionFactory);
            if (session != null)
            {
                if (session.Transaction.IsActive)
                {
                    try
                    {
                        session.Transaction.Commit();
                    }
                    catch
                    {
                        session.Transaction.Rollback();
                    }
                }
                try
                {
                    session.Dispose();
                }
                catch
                {

                }
            } 
```

我查看了 NHibernate profiler 中运行的页面。有时会话不是以 BeginTranscation 开始的，有时它们不是 Committed，有时两者都不是；最令人费解的是，有时它们启动了三遍，但没有完成。

对 ISession 对象的任何调用都通过此代码进行管理（每个工厂都有一个）：

```
public static ISession WebSession()
        {
            if (CurrentSessionContext.HasBind(MvcApplication._sessionFactory))
            {
                if (MvcApplication._sessionFactory.GetCurrentSession().IsOpen)
                {
                    return MvcApplication._sessionFactory.GetCurrentSession();
                }
                else
                {
                    log4net.LogManager.GetLogger(typeof(DBHandler)).Debug("Unbinding NHibernate session");
                    CurrentSessionContext.Unbind(MvcApplication._sessionFactory);
                    return WebSession();
                }
            }
            else
            {
                log4net.LogManager.GetLogger(typeof(DBHandler)).Debug("Initialising NHibernate session");
                var session = MvcApplication._sessionFactory.OpenSession();
                CurrentSessionContext.Bind(session);
                session.BeginTransaction();
                return session;
            }
        } 
```

在整个应用程序中没有对 BeginTransaction 或 Commit 的调用，除非它们被刷新、提交、会话处理，然后按照上面的代码重新打开。你们能对此有所了解的任何线索将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T07:25:08.803

您似乎将会话存储在 Global.asax.cs 中的全局（应用程序范围）属性中。这意味着，该属性包含创建的最后一个会话，而不是特定请求的会话。同时有两个请求，您甚至不知道您是否仍然访问刚刚创建的会话，因为它可能已经被下一个请求的另一个会话覆盖，运行相同的代码。如果您想遵循 Session-per-Request 模式，则不应将会话存储在与 Web 请求无关的位置。例如，您可以将 NH 会话存储在 HttpContext.Items-Collection 中。作为 MVC 中会话管理的另一种方式，[Ayende](http://ayende.com/blog/4809/refactoring-toward-frictionless-odorless-code-what-about-transactions)发布了一个很好的示例，说明如何围绕单个 MVC 操作而不是整个请求来包装会话管理。

# php - 用 php 为 ajax 编码 javascript 的最佳方法？

> ID：14433122
> 
> 赞同：3
> 
> 时间：2013-01-21T06:04:20.317
> 
> 标签：php, jquery, ajax

以下 PHP 函数输出 JS：

```
function dothething( $data ){
    $res = "
        <div id=\"blah\">
            Here's some stuff, ". $data['name'] ."
        </div>";
    echo "$('#container').html('". $res ."');";
} 
```

这个函数是通过 jQuery 调用的`$.ajax()`，使用`dataType: 'script'`... 所以任何`echo`ed 都像 JS 函数一样运行。当然还有更多，但我的问题与编码有关。当`$res`包含换行符或撇号时，ajax 将失败。所以在上面添加这个`echo`似乎现在正在工作：

```
$res = str_replace("\n", "\\n", addslashes($res)); 
```

这是格式化 PHP 变量`$res`以为 ajax 生成有效 javascript 的最佳方法吗？

还有什么我应该添加的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:08:32.700

在你的情况下，我会使用`json_encode()`其他任何东西：

```
echo "$('#container').html(" . json_encode($res) . ");"; 
```

当应用于字符串值时，它将自动用双引号将其封装并转义其中的任何内容，否则会导致解析错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:23:33.917

试试这个，

```
if(count($result)>0) {
    $status = 0;
} else {
    $status = 1;
}   

$json['status'] = $status;
$json['result'] = $output;
print(json_encode($json)); 
```

# android - 我如何知道应用程序是否正在创建文件夹？

> ID：14433126
> 
> 赞同：0
> 
> 时间：2013-01-21T06:04:54.447
> 
> 标签：android, directory

我怎么知道一个应用程序是否在 sdcard 上创建一个文件夹？我想让用户在卸载后删除应用程序留下的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:09:47.020

您可以使用以下代码检查目录是否存在

```
File f = new File(Environment.getExternalStorageDirectory() + "/somedir");
if(f.isDirectory()) { 
```

您也可以使用 f.exist()

如果您真的想检查文件夹是否被删除，请使用应用商店的文件资源管理器来探索 sdcard 的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T06:11:06.643

好吧，如果您将任何类型的数据存储在数据库、文件等中，那么就会创建一个文件夹。否则不是。

默认情况下，卸载 android 应用程序会删除它的数据（Android 2.2+，如果您手动创建的文件是使用 存储的`getExternalDir()`），所以您不必担心。系统会替你处理。

# networking - Base64 如何对 2 字节序列进行编码？

> ID：14433139
> 
> 赞同：0
> 
> 时间：2013-01-21T06:06:13.963
> 
> 标签：networking, encoding, base64, decoding

我得到一个 2 字节序列并要求对它进行 Base64 编码：

> 00000001 00010001

据我了解，在使用 Base64 时，您只能编码 6 位序列。所以因为 16 位不能被 6 整除，所以我有点卡住了。

我可以看到的解决方案是将给定的 2 字节序列转换为 3 字节序列，使其可被 6 整除。但是如何在不更改初始序列的值的情况下执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:14:07.463

基本上，你用零填充它到下一个 6 位的倍数，然后用`=`s 填充最后的四个字符序列。由于最后两个零字节不构成完整的输入字节，解码器知道忽略它们。（`=`填充不是完全必要的，但习惯上使最终结果的长度始终为 4 个字符的倍数。）

例如，您得到的序列是：

```
00000001 00010001 
```

将其分成 6 组，我们得到：

```
000000 010001 0001 
```

用零填充：

```
000000 010001 000100 
```

转换为 ASCII：

```
ARE 
```

并把它垫出来：

```
ARE= 
```

# jsf - Primefaces 计划组件未显示

> ID：14433141
> 
> 赞同：2
> 
> 时间：2013-01-21T06:06:19.073
> 
> 标签：jsf, primefaces, myfaces

我是一个 JSF 2.0 新手，我正在尝试构建一个调度程序。到目前为止，在使用 primefaces 和 JSF 标记方面一切都进展顺利。但是我很难使用 p:schedule 标签。在列表中，我只希望日历（议程）显示在我的页面中，然后再继续下一部分并添加事件。我的问题是，这段代码不应该至少在我的页面中生成一些东西吗？

这是我的 scheduleBean.java

```
 @ManagedBean(name="scheduler")
    @ViewScoped
    public class SchedulerBean extends PageCodeBase implements Serializable {

    private static final long serialVersionUID = -1426310201082465397L;
    private String loggedInUser;
    private boolean authorizeduser=false;
    private boolean showUnauthorizeduserMessage=true;
    private String theme;
    private AuthorizeduserManager AUM =  (AuthorizeduserManager)getManagedBean("AuthorizeduserManager");
    private ScheduleModel eventModel;

    public void pageOnLoad(){
        this.setLoggedInUser(getFacesContext().getExternalContext().getRemoteUser());
        this.checkAuthorization();
        this.retriveTheme();
        this.eventModel = new DefaultScheduleModel();
    }

    private void checkAuthorization(){
        ArrayList<Authorizeduser> athorizedUser= new ArrayList<Authorizeduser>();
        athorizedUser.addAll(AUM.getAuthorizeduser());
        for(Authorizeduser au:athorizedUser){
            if (loggedInUser.equalsIgnoreCase(au.getEmail())){
                setAuthorizeduser(true);
                showUnauthorizeduserMessage = false;
                return;
            }
        }   
    }//end checkAuthorization

    private void retriveTheme(){
        if(authorizeduser){
            this.theme = AUM.findAuthorizeduserByEmail(loggedInUser).getThemepref();
        }else{
            this.theme = "blitzer";
        }
    }

    private void persistTheme(String theme){
        //System.out.println("persistTheme was called");
        ArrayList<Authorizeduser> athorUser= new ArrayList<Authorizeduser>();
        athorUser.addAll(AUM.getAuthorizeduser());
        for(Authorizeduser au:athorUser){
            if (loggedInUser.equalsIgnoreCase(au.getEmail())){
                try {
                    au.setThemepref(theme);
                    AUM.updateAuthorizeduser(au);
                } catch (Exception e) {
                    e.printStackTrace();
                }           
            }
        }
    }

    //Getters and setters
    public String getLoggedInUser() {
        return loggedInUser;
    }

    private void setLoggedInUser(String loggedInUser) {
        this.loggedInUser = loggedInUser;
    }

    public boolean isAuthorizeduser() {
        return authorizeduser;
    }

    private void setAuthorizeduser(boolean authorizeduser) {
        this.authorizeduser = authorizeduser;
    }

    public boolean isshowUnauthorizeduserMessage() {
        return showUnauthorizeduserMessage;
    }

    public void setshowUnauthorizeduserMessage(boolean showUnauthorizeduserMessage) {
        this.showUnauthorizeduserMessage = showUnauthorizeduserMessage;
    }

    public String getTheme() {
        return theme;
    }

    public void setTheme(String theme){
        this.theme = theme;
        this.persistTheme(theme);
    }   

     public String logout() {
         FacesContext.getCurrentInstance().getExternalContext().invalidateSession();
         //System.out.println("logoutRequested");
         return "logout";
     }

    public ScheduleModel getEventModel() {
        return eventModel;
    }

    public void setEventModel(ScheduleModel eventModel) {
        this.eventModel = eventModel;
    }

    } 
```

这是我的 MasterLayout.xhtml

```
 <f:view>
    <!-- WelcomeBar -->
    <div id="WelcomeBar">
      <ui:include src="/resources/templates/WelcomeBar.xhtml"></ui:include>
    </div>

    <f:event listener="#{scheduler.pageOnLoad }" type="preRenderView"></f:event>

    <h:form styleClass="form" id="form1" height="30">
      <p:panel>

        <div id="Header">

          <ui:include src="/resources/templates/Header.xhtml"></ui:include>
        </div>

        <div id="content">
          <ui:insert name="content"></ui:insert>
        </div>

        <div id="Footer">
          <ui:include src="/resources/templates/Footer.xhtml"></ui:include>
        </div>

      </p:panel>
    </h:form>
  </f:view>

</h:body> 
```

这是我的 schedule.xhtml，其中包含 p:schedule 标记：

```
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html" 
    template="/resources/templates/MasterLayout.xhtml"
    xmlns:p="http://primefaces.org/ui">

    <!-- Content Properties  -->
    <ui:define name="content">
        <p:schedule value="#{scheduler.eventModel}" widgetVar="myschedule">
        </p:schedule>
    </ui:define>

</ui:composition> 
```

仅供参考，我创建了一个简单的页面 text.xhtml，它可以工作。所以它必须与我的模板方式有关：

```
<h:body>
  <f:view>
    <h:form styleClass="form" id="form1" height="30">
      <p:panel>
          <f:event listener="#{scheduler.pageOnLoad }" type="preRenderView"></f:event>
          <h:outputText value="test"/>
          <p:schedule value="#{scheduler.eventModel}" widgetVar="myschedule">
          </p:schedule>
      </p:panel>
    </h:form>
 </f:view>

</h:body> 
```

# android - Android sqlite 从列表视图中删除

> ID：14433142
> 
> 赞同：1
> 
> 时间：2013-01-21T06:06:28.580
> 
> 标签：android, sqlite

我在从列表视图（和数据库）中删除项目时遇到问题。到目前为止，我一直遵循这个例子： [http](http://www.vogella.com/articles/AndroidSQLite/article.html) ://www.vogella.com/articles/AndroidSQLite/article.html但我不喜欢那里的删除（总是删除第一个的按钮）。

这是我的活动课：

```
public class FirstActivity extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_1);

    final ShoppingSQL shoppingSQL = new ShoppingSQL(this);
    List<ShoppingData> list = shoppingSQL.getAll();

    ArrayAdapter<ShoppingData> adapter = new ArrayAdapter<ShoppingData>(
            this, android.R.layout.simple_list_item_1, list);
    setListAdapter(adapter);

    this.getListView().setLongClickable(true);
       this.getListView().setOnItemLongClickListener(new OnItemLongClickListener() {
            public boolean onItemLongClick(AdapterView<?> parent, View v, int position, long id) {
                Log.w("DELETED", " DELETED");
                shoppingSQL.delete((int)id);
                return true;
            }
        });     

}

protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Log.w("CLICKED", "CLICKED");
} 
```

}

正如你所看到的，我已经设置了长点击的侦听器以及需要 ID 的删除方法。问题是 ID，我目前给出的似乎只是订单号（0、1、2、3）——而不是 db 中的实际 ID。所以，我的问题是我如何获得真实身份？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:18:25.597

您可以通过以下方式获取您的购物 ID 数据

```
this.getListView().setOnItemLongClickListener(new OnItemLongClickListener() {
            public boolean onItemLongClick(AdapterView<?> parent, View v, int position, long id) {
                Log.w("DELETED", " DELETED");

                //here You can get your id by 

                list.get(position).getID();

                //getID id the getter method of shoppingdata ,here you can declare your method for ID as whatever you have in shopping data
                shoppingSQL.delete((int)list.get(position).getID());
                return true;
            }
        }); 
```

对于删除项目

adapetr.remove(list.get(i)); 然后在 listview 上调用 notifydatasetchanged

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:18:18.313

您可以获取从 ListView 中选择的项目，然后从 List 中检查其 ID，如下所示，

```
 String selectedItem =(String) (MyListView.getItemAtPosition(position));
    int ItemID = list.indexOf(selectedItem);
    shoppingSQL.delete(ItemID); 
```

# traversal - 检查给定的订单是否是合法的后序遍历

> ID：14433143
> 
> 赞同：1
> 
> 时间：2013-01-21T06:06:32.423
> 
> 标签：traversal, binary-search-tree

如果你有一个有十个节点的二叉搜索树，存储整数 0 到 9，我们如何判断一个序列是否不能代表树的后序遍历？我知道根必须是序列中的最后一个，但我无法得出任何模式。伪代码也很棒！（不是作业，练习面试）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:13:26.670

正如你所说，你知道根是什么。所以你知道每个子树中值的范围。如果序列，减去根，没有分成两个序列，一个小于根，一个大于根，那么它是无效的。如果是，则需要递归检查两个子遍历。如果一切正常，那么它是有效的。

# c# - 序列在 Linq 语句中不包含匹配元素错误

> ID：14433147
> 
> 赞同：8
> 
> 时间：2013-01-21T06:06:53.093
> 
> 标签：c#, .net, linq

我正在尝试调试我的方法，但我不知道它有什么问题。

有时它会引发错误，有时它没关系。我不知道怎么了。

这是我的方法：

```
private void GetWorkingWeek(int month, int year)
    {
        var cal = System.Globalization.CultureInfo.CurrentCulture.Calendar;

        var daysInMonth = Enumerable.Range(1, cal.GetDaysInMonth(year, month));

        var listOfWorkWeeks = daysInMonth
            .Select(day => new DateTime(year, month, day))
            .GroupBy(d => cal.GetWeekOfYear(d, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday))
            .Select(g => Tuple.Create(g.Key, g.First(), g.Last(d => d.DayOfWeek != DayOfWeek.Saturday && d.DayOfWeek != DayOfWeek.Sunday)))
            .ToList();
         foreach (var weekGroup in listOfWorkWeeks)
                {
                    Console.WriteLine("Week{0} = {1} {2} to {1} {3}"
                        , weekNum++
                        , System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(month)
                        , weekGroup.Item2.Day
                        , weekGroup.Item3.Day);
                }
    } 
```

这是出现错误的行：

```
var listOfWorkWeeks = daysInMonth
            .Select(day => new DateTime(year, month, day))
            .GroupBy(d => cal.GetWeekOfYear(d, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday))
            .Select(g => Tuple.Create(g.Key, g.First(), g.Last(d => d.DayOfWeek != DayOfWeek.Saturday && d.DayOfWeek != DayOfWeek.Sunday)))
            .ToList(); 
```

这是错误：

```
 InvalidOperationException : Sequence contains no matching element 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T06:12:31.617

```
var listOfWorkWeeks = daysInMonth
        .Select(day => new DateTime(year, month, day))
        .GroupBy(d => cal.GetWeekOfYear(d, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday))
        .Select(g => Tuple.Create(g.Key, g.FirstOrDefault(), g.LastOrDefault(d => d.DayOfWeek != DayOfWeek.Saturday && d.DayOfWeek != DayOfWeek.Sunday)))
        .ToList(); 
```

尝试使用`FirstOrDefault`and`LastOrDefault`而不是`First`and `Last`，如果没有元素与您作为参数提供的 lambda 表达式匹配，这些方法将返回调用它们的类型的默认值。

在 的情况下`g.FirstOrDefault()`，如果 g 为空，则返回默认值；如果是，`g.LastOrDefault(d => d.DayOfWeek != DayOfWeek.Saturday && d.DayOfWeek != DayOfWeek.Sunday)`则如果所有日期都是星期六或星期日，则返回默认值。

# c# - 如何在 C# 中使用 OSM 进行离线地图应用程序？

> ID：14433149
> 
> 赞同：1
> 
> 时间：2013-01-21T06:07:19.933
> 
> 标签：c#, asp.net, openstreetmap

我想用 C# 开发一个应用程序，它有一个离线地图，我想在上面绘制一些标记。是否可以将 OSM 用于 C# 或 ASP.NET 的离线地图？如果有可能，那怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:15:49.890

[您可以使用http://download.geofabrik.de/index.html](http://download.geofabrik.de/index.html)下载 OSM 数据。应用程序最常用的格式之一是 ESRI 标准的 Shapefile。您可以下载 Shapefile 格式的数据。从那里，您可以通过各种途径在 .Net 应用程序中使用它。[SharpMap](http://sharpmap.codeplex.com/)是支持 shapefile 的开源项目之一。这将是一个离线地图应用程序，因为您的应用程序将保存数据。[DotSpatial](http://dotspatial.codeplex.com/)是另一个开源项目，您可以查看它。

对于 ASP.Net 应用程序和离线地图，您必须设计某种缓存方法。您还需要自己的服务器来渲染地图图块。这样客户就可以在他/她的一端拥有地图数据。我建议您不要使用自己的服务器，而是查看[OSM Map API](http://wiki.openstreetmap.org/wiki/API)并在您的 Web 应用程序中使用它。

# c# - 设置无法解决？（尝试将用户设置与 UI 绑定，使用转换器）

> ID：14433150
> 
> 赞同：1
> 
> 时间：2013-01-21T06:07:33.030
> 
> 标签：c#, wpf

我正在尝试将所选选项卡与用户设置绑定：已选择，但我收到此“资源设置无法解析”错误。

问题出在这一行：

```
SelectedItem="{Binding Source={StaticResource Settings}, Path=Default.Selected, Converter={StaticResource SelectedTabConverter}}" 
```

我的xml：

```
<Window x:Class="MyHomework__MVVM_.MyHomeworkView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converter="clr-namespace:MyHomework__MVVM_"
       Title="My Homework" Height="450" Width="800" ResizeMode="CanMinimize">
    <Window.Resources>
        <converter:SelectedTabConverter x:Key="SelectedTabConverter"/>
    </Window.Resources>
    <Grid Margin="0,0,10,10">
        <TabControl HorizontalAlignment="Left" Height="330" VerticalAlignment="Top" Width="764" Margin="10,10,0,0" ItemsSource="{Binding AllTabs}" SelectedItem="{Binding Source={StaticResource Settings}, Path=Default.Selected, Converter={StaticResource SelectedTabConverter}}">
            <TabControl.ItemContainerStyle>
                <Style TargetType="TabItem">
                    <Setter Property="Header" Value="{Binding Header}"/>
                    <Setter Property="ContentTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <Grid>
                                    <TextBox Text="{Binding Text, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" FontSize="16" AcceptsReturn="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" TextChanged="OnTextChanged">
                                    </TextBox>
                                </Grid>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="FontSize" Value="20"/>
                </Style>
            </TabControl.ItemContainerStyle>
        </TabControl>
        <Button Content="Add Course" HorizontalAlignment="Left" VerticalAlignment="Top" Width="105" Margin="10,351,0,0" Height="50" Command="{Binding AddCourseCommand}"/>
        <Button Content="Drop Course" HorizontalAlignment="Left" VerticalAlignment="Top" Width="76" Margin="126,379,0,0" Height="22" Command="{Binding DropCourseCommand, UpdateSourceTrigger=PropertyChanged}"/>
        <Button Content="Save HW" HorizontalAlignment="Left" VerticalAlignment="Top" Width="105" Margin="669,351,0,0" Height="50" Command="{Binding SaveHomeworkCommand, UpdateSourceTrigger=PropertyChanged}"/>
    </Grid>
</Window> 
```

我的 App.xaml：

```
<Application x:Class="MyHomework__MVVM_.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:properties="clr-namespace:MyHomework__MVVM_.Properties"
             Exit="OnExit"
             StartupUri="MyHomeworkView.xaml">
    <Application.Resources>
        <properties:Settings x:Key="Selected"/>
    </Application.Resources>
</Application> 
```

我的转换器类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Data;

namespace MyHomework__MVVM_
{
    class SelectedTabConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            object result = DependencyProperty.UnsetValue;

            if (value != null)
            {
                int index = (int)value;
                result = MyHomeworkViewModel.GetTabs()[index];
            }

            return result;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            object result = DependencyProperty.UnsetValue;

            if (value != null)
            {
                MyHomeworkModel tab = (MyHomeworkModel)value;
                result = MyHomeworkViewModel.GetTabs().IndexOf(tab);
            }

            return result;
        }
    }
} 
```

我相信转换器应该在 App.xaml 以外的 view.xaml 中“注册”，这与设置不同，对吗？还是没有区别？

编辑：我移动了

```
<converter:SelectedTabConverter x:Key="SelectedTabConverter"/> 
```

到 App.xaml，问题仍然存在......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:32:47.610

试试这个

**在 App.XAML 中**

如下添加 XAML 命名空间

```
xmlns:properties="clr-namespace:MyHomework__MVVM_.Properties"

<Application.Resources>
    <properties:Settings x:Key="Settings" />
<Application.Resources> 
```

**在您的页面中**

如下添加 XAML 命名空间

```
xmlns:properties="clr-namespace:MyHomework__MVVM_.Properties" 
```

现在设置绑定如下

```
SelectedItem="{Binding Source={x:Static properties:Settings.Default}, Path=Selected, Converter={StaticResource SelectedTabConverter}}" 
```

* * *

**编辑**：请注意，如上所示绑定时，

```
SelectedItem="{Binding Source={x:Static properties:Settings.Default}, Path=Selected, ..." 
```

绑定源对象是应用程序类中`Settings`的静态属性返回的实例。它*不是*作为资源创建的实例。除非对该资源有任何其他引用，否则您可以简单地删除它。`Default``Settings`*`Application.Resources`*

# android - 在 HTML5 缓存的情况下，Webview 无法正常工作

> ID：14433151
> 
> 赞同：0
> 
> 时间：2013-01-21T06:07:51.033
> 
> 标签：android, html, caching, webview, titanium

我使用 Titanium Appcelerator 创建了一个应用程序，其中我使用 web 视图来显示一些网页。要在 webview 中显示的所有网页都启用了 HTML5 缓存，因为我希望即使应用程序脱机运行也可以使用这些网页。

我面临的问题是，当没有网络连接时，webview 无法显示缓存的网页。但是我已经测试了浏览器中的所有网页，并且它们都运行良好。

我在Android平台上面临这个问题。

这是 webview 的代码：

```
 //FirstView Component Constructor
function FirstView() {
    //create object instance, a parasitic subclass of Observable
    var self = Ti.UI.createView();

 var webview = Ti.UI.createWebView({
    url: 'http://www.w3schools.com/html/tryhtml5_html_manifest.htm'
});

self.add(webview);

    return self;
}

module.exports = FirstView; 
```

非常网址在浏览器中运行良好。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:50:22.113

您可以使用本地 html，它使用 jquery .ajax 加载另一个网页，例如 //inside local page

```
 <div id="pull"></div>
 <script>
 $.ajax({
 url: "http://www.w3schools.com/html/tryhtml5_html_manifest.htm",
 cache: true,type: "POST"}).done(function( html ) {
 $("#pull").append(html);  
 });
</script> 
```

# events - 立即响应 Dart 中的 textarea 更改

> ID：14433156
> 
> 赞同：5
> 
> 时间：2013-01-21T06:08:18.207
> 
> 标签：events, textarea, dart

我的 html 文件中有这个：

```
<textarea id="inputbox" placeholder="type here"></textarea> 
```

连接一个处理程序的正确方法是什么，该处理程序会在文本区域的内容发生变化时立即触发？（无论是通过键盘、鼠标/剪贴板、语音输入、脑波阅读器等）

我试过了：

```
 query("#inputbox").on.change.add(handler) 
```

但是（至少在 Dartium 上）它只会在您离开现场后触发。

目的是更新“实时预览”窗口，类似于 Stackoverflow 在您键入时呈现 Markdown 输出的方式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T06:08:18.207

这是迄今为止我想出的最好的。如果有人知道更紧凑或更优选的替代方案，我将很高兴听到。

*编辑：代码片段更新为事件注册的[新模式。](http://news.dartlang.org/2013/01/new-dom-event-streams-api.html)*

```
import 'dart:html';

void main() {
  query("#inputbox")
    ..onChange.listen(handler)
    ..onKeyDown.listen(handler)
    ..onKeyUp.listen(handler)
    ..onCut.listen(handler)
    ..onPaste.listen(handler);
}

void handler(Event event) {
  print((query("#inputbox") as TextAreaElement).value);
} 
```

浏览器和操作系统之间的精确行为会有所不同。

您可以跳过`keyDown`，但要注意*keyDown*和*keyUp*行为受操作系统影响，并且[不能保证是对称](http://lists.w3.org/Archives/Public/www-dom/2011AprJun/0202.html)的。您可能会错过更改，至少在下一个*keyUp*或*更改*事件被触发之前。事实上，我通过在 Windows 7 上创建一个小应用程序来向 Dartium 和 IE9 发送孤立的 WM_KEYDOWN 消息证明了这一点。

`keyPress`可以用来代替*keyUp*和*keyDown*，但[不会](https://stackoverflow.com/questions/3911589/why-doesnt-keypress-handle-the-delete-key-and-the-backspace-key)为某些键（如退格键和删除键）生成事件。

`cut`并`paste`立即对使用鼠标执行的剪切或粘贴做出反应。如果您不使用它们，该`change`事件将捕获更改，但直到字段失去焦点之后，或者[有时甚至更晚](https://stackoverflow.com/a/8922439/589059)。

该`input`事件可以替换上面的所有侦听器，并且在 Dartium 中似乎工作得很好，但在 IE9 下它只捕获字符添加，而不是删除。

注意`keyUp`并`keyDown`可能为光标键、home、end、shift 等生成额外的不需要的事件（例如在 IE9 中）。当用户使用快捷键进行这些操作时，除了剪切/粘贴侦听器之外，它还会触发。

虽然这个问题是针对 Dart 的，但上面的很多讨论都适用于任何监听 DOM 的代码。甚至*keyCode*值[也没有](http://www.javascripter.net/faq/keycodes.htm)跨浏览器标准化（[更多细节](http://www.quirksmode.org/dom/events/keys.html)）。

[检查一下KeyboardEventController](http://api.dartlang.org/docs/bleeding_edge/dart_html/KeyboardEventController.html)类也可能是值得的，但总的来说，当我测试它时，边缘情况的行为与上面提到的类似。这可能是也可能不是设计使然。Dart 开发人员确实做出了一些努力来[使您](http://www.dartlang.org/articles/improving-the-dom/#cross-browser-consistency)免受跨浏览器不一致的影响，但它仍在进行中。

另外，当我们谈论*textarea*时，请记住使用它的`value`属性，[而不是它的*text*属性](https://stackoverflow.com/questions/11705499/cannot-get-text-from-text-area)。最后，请确保您`handler`限制它对“突发”键盘活动的反应（例如，某种计时器会暂时延迟处理程序的内部并汇总同时发生的任何其他事件）。

**相关问题和链接：**

*   [在 DART 中处理事件](https://stackoverflow.com/questions/10197010/handle-events-in-dart)
*   [在 Dart 语言中处理键盘事件](https://coderwall.com/p/5n6c3q)
*   [你如何在 Dart 中监听 keyUp 事件？](https://stackoverflow.com/questions/10560113/how-do-you-listen-for-a-keyup-event-in-dart)
*   [Dart 中的跨浏览器键事件处理程序](https://stackoverflow.com/questions/13141946/cross-browser-key-event-handler-in-dart)
*   [跳过键盘事件并绑定到*propertychange的 jQuery 示例*](https://stackoverflow.com/a/11338644/589059)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-09T02:32:13.023

目前尚不清楚您是否使用聚合物，但如果您使用了，您可以通过在聚合物元素中以 [变量名称]Changed(oldvalue) 的形式在聚合物元素中创建一个函数来订阅对使用 @observable 注释的变量的更改。我最初在这里找到了这个：[如何订阅可观察字段的更改](https://stackoverflow.com/questions/19184079/how-to-subscribe-to-change-of-an-observable-field)

# visual-studio-2010 - 如何在 Visual Studio 2010 C++ for Windows 8 中传递参数？

> ID：14433158
> 
> 赞同：0
> 
> 时间：2013-01-21T06:08:21.077
> 
> 标签：visual-studio-2010, visual-studio, visual-c++, windows-8, argument-passing

以下代码适用于 Windows XP 和 Windows 7，但不适用于 Windows 8。我可以获取文件路径并在 XP 和 7 中打开。但是当我尝试在 Windows 8 中打开时，它不起作用。为什么 ？任何想法 ？谢谢。

```
int main(int argc, char** argv)
{
  if (argc == 2)
  {
    if(OpenFile(argv[1], false))
        cout<<"\nFile has been opened successfully."<<endl;
  }
  return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:22:07.933

我已经解决了这个问题。问题在于 FLTK 参数传递。我忽略了它并创建了一个简单的参数，正如我上面在 main 函数开头提到的那样。

# java - SVN 中的身份验证

> ID：14433161
> 
> 赞同：1
> 
> 时间：2013-01-21T06:08:32.043
> 
> 标签：java, jsp, svn, servlets

我正在尝试使用 java 为 svn 构建自定义 UI。它只是一个简单的应用程序，您可以在其中在文本框中提供 svn url。浏览器要求用户名和密码进行身份验证。然后就可以浏览SVN的目录结构了（仅供阅读）

为此，我选择了 svnkit jars。身份验证（业务逻辑）非常简单。

```
public static ISVNAuthenticationManager authManager = null; // currently used a static variable in the class

public List<String> myfunction(String path, String uName, String password){

   public static SVNRepository repository = 
                    SVNRepositoryFactory.create(SVNURL.parseURIEncoded(url.toString()));

        if(authManager == null){ // initializing if the authentication is not present
        if( uName != null 
               && password != null 
                   && !uName.trim().equals("") && !password.trim().equals("") ){
                        authManager = 
                            SVNWCUtil.createDefaultAuthenticationManager(uName, password);}
}

         repository.setAuthenticationManager(authManager);

       // logic for fetching files/folders for the specific url
} 
```

问题是我每次向存储库提供 url 时都需要设置身份验证管理器。显然我不想在会话中存储用户名和密码，我不确定将 authManager 对象保存在会话中是否安全。

有人可以建议一种从安全角度来看可能是安全的身份验证方法吗？

# jquery - 表格搜索和分页 - jquery light 插件

> ID：14433165
> 
> 赞同：0
> 
> 时间：2013-01-21T06:08:48.143
> 
> 标签：jquery, search, pagination

我需要在我的表格列表中实现分页和搜索。我对使用 JQ 表排序器或数据表不感兴趣，因为它的大小很大。

任何人都可以建议我一个满足我要求的插件/代码。

注意：不使用数据库

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:27:46.493

[Editable Grid](http://www.editablegrid.net/page/en/1/home.html)是一个非常好的开源 JavaScript 库，旨在将表格变成完全可编辑的组件。

*   [特征](http://www.editablegrid.net/page/en/2/features.html)
*   [演示](http://www.editablegrid.net/page/en/6/demos.html)

# c# - Ninject Interceptor 调用两次 beforeinvoke 和 afterinvoke 方法

> ID：14433168
> 
> 赞同：1
> 
> 时间：2013-01-21T06:09:10.843
> 
> 标签：c#, asp.net, ninject, ninject-extensions, ninject-interception

我正在 asp.net 中开发一个应用程序，在该应用程序中我正在实现 Ninject 拦截器，我在其中绑定/注册服务，例如

```
kernel.Bind<IPracticeManagement>().To<PracticeManagementClient>().InRequestScope().Intercept().With<TimingInterceptor>(); 
```

当我调用此服务的方法时

```
public class HomeController : Controller
    {
        private readonly IPracticeManagement _practiceManagement;

        public HomeController(IPracticeManagement practiceManagement)
        {
            this._practiceManagement = practiceManagement;
        }

        public ActionResult Index()
        {

            var specialities = this._practiceManagement.GetSpecialty();

            this.ViewBag.Specialities = specialities;

            ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

            return View();
        }
} 
```

方法 BeforeInvoke 在 TimeInterceptor 中调用了两次。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-24T09:02:32.330

`Ninject.Extensions.Interception.DynamicProxy`也许你已经`Ninject.Extensions.Interception.Linfu`安装了两个？如果是这样，请尝试仅使用其中一个。

# php - 如何像在 php 中一样将 URL 变量传递给 express.js？

> ID：14433173
> 
> 赞同：2
> 
> 时间：2013-01-21T06:09:45.460
> 
> 标签：php, javascript, node.js, url, express

现在正在将我的 php 网站转换为表达 js。我的前端有很多 pf 脚本。所有这些脚本都会生成类似**page.php?id=10&something=anything**的链接。在 express js 中，如果 url 像这个 page.php?/10/anything**，我可以捕捉到。有什么方法可以从 url 中捕获变量，例如express js 中的**page.php?id=10&something=anything**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:59:39.737

您可以使用传统的 Express 方式，例如“/myroute/id/:number”，也可以使用“myroute?id=:number”

首先：如果您的路线如下所示，请更改路线代码：

```
app.get('/user/:id', user.list); 
```

至

```
app.get('/user/', user.list); 
```

在您的 users.js 中更改行为以获取参数...

```
exports.list = function(req, res){
    var id = req.query.id;
    console.log("ID: " + id);
}; 
```

根据需要获取参数的秘诀是**req.query.id**中的“查询” 。

# javascript - 使用带有 Html 表单及其元素的 jquery 进行验证

> ID：14433179
> 
> 赞同：0
> 
> 时间：2013-01-21T06:10:07.533
> 
> 标签：javascript, jquery, html

请帮我解决一个问题。我正在使用以下 jquery 代码进行验证。

```
$(function(){
  $("#signup_step1").validationEngine('attach', 
      {promptPosition : "centerRight", autoHidePrompt:true, autoHideDelay: 900}); 
```

我有这样的表格

```
 <form id="signup_step1" 
       name="signup_step1" 
       method="post" 
       enctype="multipart/form-data"> 
```

我有不同的输入元素，为其调用验证并且工作正常。

问题在于某些元素我想更改错误消息的位置。当我尝试给输入元素一个新的 id 并复制给 jquery 函数并用新的 id 编辑它不起作用。请帮助
*注意：*我正在使用 php 来保存并回显错误，所以这不是问题。问题是我想更改某些输入元素的显示错误的位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:50:43.287

1.  您能否确保新添加的元素没有重复的 ID。
2.  确保您的新副本过去 jQuery 的 DOM 就绪函数中的 javascript 函数（ $(function(){} ）

如果这不能帮助您解决问题，能否请您通过新添加元素的代码？

# seo - 要阻止爬虫的子域与子目录

> ID：14433180
> 
> 赞同：3
> 
> 时间：2013-01-21T06:10:12.100
> 
> 标签：seo, indexing, search-engine, web-crawler

我用谷歌搜索了很多，阅读了很多文章，但反应不一。

如果我想阻止我网站的某个部分被搜索引擎索引，我有点困惑哪个是更好的选择。基本上，我对我的网站进行了很多更新并为客户设计，我不希望我上传的所有“测试数据”都被编入索引，以避免重复的内容问题。

1.  我应该使用子域并阻止整个子域

    或者

2.  创建一个子目录并使用`robots.txt`.

我是网页设计的新手，对使用子域有点不安全（在某处读到它是一个有点高级的过程，即使是一个小错误也可能产生很大的后果，此外，Matt Cutts 也提到了类似的东西（[来源](http://www.mattcutts.com/blog/subdomains-and-subdirectories/)）：

> “我建议您使用子目录，直到您开始对自己网站的架构充满信心。到那时，您将更有能力为自己的网站做出正确的决定。”

但另一方面，我对使用`robots.txt`以及任何人都可以访问该文件犹豫不决。

两者的优缺点是什么？

现在我的印象是谷歌对两者的处理方式相似，最好使用`robots.txt`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T22:20:34.820

*要么*您要求机器人不要为您的内容编制索引（→ robots.txt）*，要么*您将所有人拒之门外（→ 密码保护）。

对于此决定，您是否使用单独的子域或文件夹都无关紧要。您可以同时使用 robots.txt 或密码保护。请注意，robots.txt 始终必须放在文档根目录中。

使用 robots.txt 没有任何保证，这只是一个礼貌的请求。有礼貌的机器人会尊重它，而其他机器人则不会。人类用户仍然可以访问您的“不允许”页面。即使是那些尊重您的 robots.txt（例如 Google）的机器人也可能在他们的搜索中*链接*到您的“不允许的”内容（但他们不会索引内容）。

使用登录机制可以保护您的页面免受*所有*机器人和访问者的侵害。

# android - 使用传感器的方向

> ID：14433182
> 
> 赞同：4
> 
> 时间：2013-01-21T06:10:32.427
> 
> 标签：android, android-sensors

在我的应用程序中，我想显示设备方向，例如北、南、东、西。为此，我正在使用加速度计和磁传感器并尝试使用以下代码。

```
public class MainActivity extends Activity implements SensorEventListener 
{

public static float swRoll;
public static float swPitch;
public static float swAzimuth;

public static SensorManager mSensorManager;
public static Sensor accelerometer;
public static Sensor magnetometer;

public static float[] mAccelerometer = null;
public static float[] mGeomagnetic = null;

public void onAccuracyChanged(Sensor sensor, int accuracy) {
}

@Override
public void onSensorChanged(SensorEvent event) 
{
    // onSensorChanged gets called for each sensor so we have to remember the values
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) 
    {
        mAccelerometer = event.values;
    }

    if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD) 
    {
        mGeomagnetic = event.values;
    }

    if (mAccelerometer != null && mGeomagnetic != null) 
    {
        float R[] = new float[9];
        float I[] = new float[9];
        boolean success = SensorManager.getRotationMatrix(R, I, mAccelerometer, mGeomagnetic);

        if (success) 
        {
            float orientation[] = new float[3];
            SensorManager.getOrientation(R, orientation);
            // at this point, orientation contains the azimuth(direction), pitch and roll values.
            double azimuth = 180 * orientation[0] / Math.PI;
            //double pitch = 180 * orientation[1] / Math.PI;
            //double roll = 180 * orientation[2] / Math.PI;

            Toast.makeText(getApplicationContext(), "azimuth: "+azimuth, Toast.LENGTH_SHORT).show();
            //Toast.makeText(getApplicationContext(), "pitch: "+pitch, Toast.LENGTH_SHORT).show();
            //Toast.makeText(getApplicationContext(), "roll: "+roll, Toast.LENGTH_SHORT).show();
        }
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
    accelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    magnetometer = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
}

@Override
protected void onResume() {
    super.onResume();

    mSensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_GAME);
    mSensorManager.registerListener(this, magnetometer, SensorManager.SENSOR_DELAY_GAME);
}

@Override
protected void onPause() {
    super.onPause();
    mSensorManager.unregisterListener(this, accelerometer);
    mSensorManager.unregisterListener(this, magnetometer);
}
} 
```

我阅读了一些文章并了解到方位角值用于获取方向。但它没有显示正确的值，即它总是在任何方向显示 103 到 140 之间的值。我正在使用三星 Galaxy s 进行测试。我哪里出错了。任何帮助将不胜感激...谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T06:34:24.330

编辑：我将保持这个答案，因为这里没有其他答案，但我再次查看这段代码的直觉是它可能无法正常工作。使用风险自负，如果有人给出一个体面的答案，我会删除这个

这是我为自己使用而编写的指南针传感器。它工作，有点。实际上，它需要更好的过滤——来自传感器的结果非常嘈杂，我在其上构建了一个过滤器以减慢更新速度并改进了一些东西，但如果要在生产中使用它需要一个更好的过滤器

```
package com.gabesechan.android.reusable.sensor;

import java.lang.ref.WeakReference;
import java.util.HashSet;

import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Handler;
import android.os.Message;

public class CompassSensor {

SensorManager sm;
int lastDirection = -1;
int lastPitch;
int lastRoll;
boolean firstReading = true;
HashSet<CompassListener> listeners = new HashSet<CompassListener>();

static CompassSensor mInstance;

public static CompassSensor getInstance(Context ctx){
    if(mInstance == null){
        mInstance = new CompassSensor(ctx);
    }
    return mInstance;
}

private CompassSensor(Context ctx){
    sm = (SensorManager) ctx.getSystemService(Context.SENSOR_SERVICE);
    onResume();
}

public void onResume(){
    sm.registerListener(sensorListener, sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
    sm.registerListener(sensorListener, sm.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD), SensorManager.SENSOR_DELAY_UI);
    firstReading = true;
    //Restart the timer only if we have listeners
    if(listeners.size()>0){
        handler.sendMessageDelayed(Message.obtain(handler, 1),1000);
    }
}

public void onPause(){
    sm.unregisterListener(sensorListener);
    handler.removeMessages(1);
}

private final SensorEventListener sensorListener = new SensorEventListener(){
    float accelerometerValues[] = null;
    float geomagneticMatrix[] = null;
    public void onSensorChanged(SensorEvent event) {
        if (event.accuracy == SensorManager.SENSOR_STATUS_UNRELIABLE)
            return;

        switch (event.sensor.getType()) {
        case Sensor.TYPE_ACCELEROMETER:
            accelerometerValues = event.values.clone();

            break;
        case Sensor.TYPE_MAGNETIC_FIELD:
            geomagneticMatrix = event.values.clone();
            break;
        }   

        if (geomagneticMatrix != null && accelerometerValues != null && event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD) {

            float[] R = new float[16];
            float[] I = new float[16];
            float[] outR = new float[16];

            //Get the rotation matrix, then remap it from camera surface to world coordinates
            SensorManager.getRotationMatrix(R, I, accelerometerValues, geomagneticMatrix);
            SensorManager.remapCoordinateSystem(R, SensorManager.AXIS_X, SensorManager.AXIS_Z, outR);
            float values[] = new float[4];
            SensorManager.getOrientation(outR,values);

            int direction = normalizeDegrees(filterChange((int)Math.toDegrees(values[0])));
            int pitch = normalizeDegrees(Math.toDegrees(values[1]));
            int roll = normalizeDegrees(Math.toDegrees(values[2]));
            if((int)direction != (int)lastDirection){
                lastDirection = (int)direction;
                lastPitch = (int)pitch;
                lastRoll = (int)roll;
            }
        }
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {

    }
};

//Normalize a degree from 0 to 360 instead of -180 to 180
private int normalizeDegrees(double rads){
    return (int)((rads+360)%360);
}

//We want to ignore large bumps in individual readings.  So we're going to cap the number of degrees we can change per report
private static final int MAX_CHANGE = 3;
private int filterChange(int newDir){
    newDir = normalizeDegrees(newDir);
    //On the first reading, assume it's right.  Otherwise NW readings take forever to ramp up
    if(firstReading){
        firstReading = false;
        return newDir;
    }       

    //Figure out how many degrees to move
    int delta = newDir - lastDirection;
    int normalizedDelta = normalizeDegrees(delta);
    int change = Math.min(Math.abs(delta),MAX_CHANGE);

    //We always want to move in the direction of lower distance.  So if newDir is lower and delta is less than half a circle, lower lastDir
    // Same if newDir is higher but the delta is more than half a circle (you'd be faster in the other direction going lower).
    if( normalizedDelta > 180 ){
        change = -change;
    }

    return lastDirection+change;
}

public void addListener(CompassListener listener){
    if(listeners.size() == 0){
        //Start the timer on first listener
        handler.sendMessageDelayed(Message.obtain(handler, 1),1000);
    }
    listeners.add(listener);
}

public void removeListener(CompassListener listener){
    listeners.remove(listener);
    if(listeners.size() == 0){
        handler.removeMessages(1);
    }

}

public int getLastDirection(){
    return lastDirection;
}
public int getLastPitch(){
    return lastPitch;
}
public int getLastRoll(){
    return lastPitch;
}

private void callListeners(){
    for(CompassListener listener: listeners){
        listener.onDirectionChanged(lastDirection, lastPitch, lastRoll);
    }             

}

//This handler is run every 1s, and updates the listeners
//Static class because otherwise we leak, Eclipse told me so
static class IncomingHandler extends Handler {
    private final WeakReference<CompassSensor> compassSensor; 

    IncomingHandler(CompassSensor sensor) {
        compassSensor = new WeakReference<CompassSensor>(sensor);
    }
    @Override
    public void handleMessage(Message msg)
    {
        CompassSensor sensor = compassSensor.get();
         if (sensor != null) {
              sensor.callListeners();
         }
        sendMessageDelayed(Message.obtain(this, 1), 1000);
    }
}

IncomingHandler handler = new IncomingHandler(this);

public interface CompassListener {
    void onDirectionChanged(int direction, int pitch, int roll);
}

} 
```

# java - 内在锁和许可证一样吗？（信号量、锁、线程......）

> ID：14433184
> 
> 赞同：-4
> 
> 时间：2013-01-21T06:10:40.277
> 
> 标签：java, multithreading, locking, semaphore

我正在阅读有关内在锁和信号量的 http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html，但随后阅读了[一些](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)[http://docs.oracle.com/javase/1.5.0/ docs/api/java/util/concurrent/Semaphore.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)关于许可 - 都与术语“释放”和“获取”一起使用。

我想知道这些术语是否基本相同。

提前致谢。

编辑：我真的专注于许可与锁以及它们之间的关系，但是嗯。我现在有了更好的理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:22:45.970

信号量和锁的相似之处在于它们都允许您修改代码以使其成为线程安全的。不同的是，当使用信号量时，你可以说“一次最多两个线程可以抓住这个锁”的意思；使用锁，您只能允许一个线程在所有情况下获取锁。

# android - 如何在我的跨平台项目中使用单声道

> ID：14433188
> 
> 赞同：0
> 
> 时间：2013-01-21T06:11:01.790
> 
> 标签：android, ios, windows-phone-7, mono, cross-platform

我一直在为我的企业应用寻找解决方案，至少需要支持 3 个平台，分别是 iOS、Android 和 Window Phone。经过一整天的搜索，我终于将目光投向了2个很有前途的跨平台解决方案，一个是monocross，另一个是phonegap。monocross 似乎完全使用 c# 和 .net，是否可以访问本机库和语言？我在某处读到它直接编译成可以在目标平台上执行的二进制文件。而关于phonegap，它使用每个平台上的webviews来提供向最终用户展示用户界面的能力。由于它是通过解释语言和高级api实现的，性能可能无法满足我们的需求。最后，我们（我的团队）决定尝试一下 mono，架构如下图所示：

+++++++++++++++++++++++表示层++++++++++++++++++++++++++++
[monotouch,monodroid,silverlight]or [native gui calls] or [html5/js/css]

+++++++++++++表示控制器/业务逻辑层+++++++++++++++
[mono/c#]

++++++++++++++++++++++++++ ++服务器端+++++++++++++++++++++++++++++
[云端]

我想用mono/c#来写一些通用的业务逻辑和数据结构，而对于一些通用的平台特性，比如存储服务，通知，我想把它们包装在每个平台上，并公开统一的api用于c#（业务逻辑层）使用。至于表示层，我们决定从上面列出的 3 个可选解决方案中进行选择。

要做到这一点，首先我必须弄清楚是否可以调用本机框架。所以，我的问题是：
1、mono 是如何工作的，我的意思是，c# 代码是否编译成可以直接在 iOS、Android 和 Windows Phone 上执行的二进制文件？
2，是否有一种机制来进行本机调用？和cocos2d-x一样，我可以通过JNI调用java方法，而在iOS中，c++可以直接调用oc。我可以用 c# 在单声道中调用可可触摸的东西吗？
3，是否可以在一个项目中管理所有这些东西，以及如何构建它们？
4、有没有更好的解决方案？

任何建议将不胜感激，感谢您的耐心等待！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:38:36.383

我想知道为什么 Xamarin 没有出现在您的搜索结果的第一页，

[http://xamarin.com/features](http://xamarin.com/features)

但这就是 Mono 开发人员为想要针对移动平台的 C# 开发人员创建的内容。MonoTouch 和 Mono for Android 都具有与 Microsoft .NET 相同的通用库库，以及特定于平台的绑定。

您的非 UI 代码应该能够在可移植库中使用并在它们之间共享。Microsoft 的便携式库是 Windows 特定的，现在我不确定 Mono 的人能接受多少，但即使 PCL 失败，您也可以基于源文件的相同副本创建多个特定于平台的项目（我在 #SNMP 中做过）。剩下的任务是为 Windows Phone、iOS 和 Android 开发特定于平台的 UI。

有很多文章展示了这些功能，

[http://docs.xamarin.com/](http://docs.xamarin.com/)

还有许多成功的应用程序

[http://xamarin.com/apps](http://xamarin.com/apps)

学习产品的最佳方式是试用（在 Xamarin 的案例中是免费的）。这也适用于 MonoCross（基于 Mono 构建的框架）。

我不熟悉PhoneGap，所以你需要有人对此提出建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:08:40.260

免责声明：这不是一个完整的答案 - 但我确实希望它至少能回答您的部分问题

* * *

我在 18 个月前开始使用 Mono 产品进行跨平台开发时遇到了类似的问题。

从那以后我建立的方法称为 MvvmCross - 它很久以前从 MonoCross 分叉出来 - 现在不与它共享任何代码（但也许有一天我们会再次合作！）。

该方法使用 PCL 来共享代码。这并非完全无痛，但在您完成一些设置步骤后很容易 - [http://slodge.blogspot.co.uk/2012/12/cross-platform-winrt-monodroid.html](http://slodge.blogspot.co.uk/2012/12/cross-platform-winrt-monodroid.html)

You can learn more about this approach on this video: [http://slodge.blogspot.co.uk/2012/12/mvvmcross-video-presentation-xaminar.html](http://slodge.blogspot.co.uk/2012/12/mvvmcross-video-presentation-xaminar.html)

# android - 不幸的是，相机已停止工作

> ID：14433189
> 
> 赞同：2
> 
> 时间：2013-01-21T06:11:03.120
> 
> 标签：android, video, camera

我是安卓新手。我正在使用以下代码捕获视频：

```
final int REQUEST_VIDEO_CAPTURED = 1;
Long tsLong = System.currentTimeMillis() / 1000;
String ts = tsLong.toString();
String imagepath = Environment.getExternalStorageDirectory() + "/"
                    + galleryStart + "/" + FolderName + "/" + ts + ".mp4";

File file = new File(imagepath);
Uri outputFileUri = Uri.fromFile(file);
Intent intent = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,outputFileUri);
startActivityForResult(intent, REQUEST_VIDEO_CAPTURED); 
```

如果我没有设置路径，它的工作正常，否则它会给我错误。“不幸的是，相机已经停止工作。” 我正在设置将视频保存在特定目录中的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:40:20.623

**相机应用程序不会让您成为您在`Uri`. 所以试着先做。**

```
String imagepath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/" + galleryStart + "/" + FolderName + "/" + ts + ".mp4";
File file = new File(imagepath);
  try 
  {
  if(file.exists() == false) 
    {
     file.getParentFile().mkdirs();
     file.createNewFile();
    }
  } 
  catch (IOException e) 
  {
   Log.e(TAG, "Could not create file.", e);
  }
Uri outputFileUri = Uri.fromFile(file); 
```

希望对你有所帮助！！

# html - HTML 5 音频、视频不工作 Safari 5.1 WinXP

> ID：14433192
> 
> 赞同：2
> 
> 时间：2013-01-21T06:11:24.033
> 
> 标签：html, audio, video, safari, windows-xp

我正在使用 safari 5.1 版本的浏览器。请参阅有关我的 Safari 的屏幕截图。![关于 Safari](../Images/cf171260ac097d08116158ccc487368b.png)

我正在将以下音频标签作为 html 文件执行，音频没有播放。

```
<!DOCTYPE html>
<html>
   <head>
      <title>Multi-Source Audio Player</title>
   </head>
   <body>
      <audio controls>
            <source src="data/horse.ogg" type="audio/ogg">
            <source src="data/horse.mp3" type="audio/mpeg">
      </audio>
  </body>
</html> 
```

而且我还用现场[样本](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_audio_all)w3school 测试了音频，它也没有播放。

请建议我如何在 safari 5.1 上播放 HTML5 音频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:23:11.367

你有安装 QuickTime 吗？Safari 需要 QuickTime 来播放 HTML5 音频和视频。我知道愚蠢，但就是这样。

# java - java中是否有任何命令选项来设置环境变量？

> ID：14433198
> 
> 赞同：0
> 
> 时间：2013-01-21T06:12:00.430
> 
> 标签：java, environment-variables

我正在研究Java。

是否有任何选项`"java"`可以将用户定义的环境变量设置为我们将使用`"java"`命令执行的可执行文件。例如，我们有一个选项 -XX:+AllowUserSignalHandlers。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:21:44.160

您可以在程序本身开始时将调整参数设置为 JVM。

前任 -

```
java -XMS50m -XX:+AllowUserSignalHandlers Test.class 
```

一旦 jvm 启动，您就不能设置环境变量，但您可以查看它们`System.genEnv`，它会返回当前系统环境的不可修改的字符串映射视图。

如果您正在创建一个新进程，那么您可以使用`ProcessBuilder.environment`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:21:58.780

java.exe 没有解析并用于设置命令行参数的环境变量。

您必须编写一个程序/脚本来处理您的自定义环境变量，然后传递给实际的 java 程序。

# c# - 如何在 DataGrid 中设置 DisplayMemberPath？

> ID：14433200
> 
> 赞同：2
> 
> 时间：2013-01-21T06:12:20.703
> 
> 标签：c#, wpf, xaml, datagrid

我正在努力解决 Wpf `DataGrid`。它`ItemsSource`是一个`DataTable`由类型单元组成的地方`Tuple<int, string>`

这是关于如何创建我的`DataTable`.

```
 // Create columns
            for (int j = 0; j < maxCount; j++) {
                dt.Columns.Add(selectedTests[i].Name + " " + (j + 1).ToString(), typeof(Tuple<int, string>));
            }

            // Create rows 
            for (int k = 0; k < tuple.Item2.Count; k++) {
                var newRow = dt.NewRow();
                dt.Rows.Add(newRow);
            }

            ...
            dt.Rows[k][i + m] = new Tuple<int, string>(n, str); 
```

然后我将它设置`DataTable`为我的`DataGrid`，我只想显示`Item2`元组中的属性，此时我需要保留元组实例。并且无法定义我的列来设置，`displaymemberPath`因为它是自动生成的。

```
 <DataGrid  x:Name="dataGrid" LoadingRow="dataGrid_LoadingRow_1" ItemsSource="{Binding DataTable}" DisplayMemberPath="{Binding Item2}"> 
```

我的数据网格一直转换为字符串我的元组，如下所示：

![在此处输入图像描述](../Images/8bd3b05af1b9d2e30f2ad671a286a382.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-24T05:18:14.923

正如这个[问题](https://stackoverflow.com/questions/6885711/wpf-c-bind-datagrid-column-with-code-behind)所说，您可以使用您的代码隐藏设置绑定。

因此，您可以订阅该`yourgrid_AutoGeneratingColumn`事件并执行以下操作：

```
(e.Column as DataGridTextColumn).Binding = new Binding("Title"); 
```

*当然，您应该通过一些解决方案将您的事件`ColumnName`传递给...`AutoGeneratingColumn`*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T06:50:54.217

您只需要手动设置列并将其绑定到 Item2 列。

```
<DataGrid ItemsSource="{Binding DataTablePropertyInYourDataContext}">
<DataGrid.Columns>
<DataGridTextColumn 
            Header="Item2" 
            Binding="{Binding ColumnNameInYourDataTable}" 
            />
</DataGrid.Columns>
</DataGrid> 
```

或另一种解决方法：您可以订阅 AutoGeneratingColumn 事件，当不需要的列等于 true 时设置取消。[在MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratingcolumn%28v=vs.95%29.aspx)上看看这个

希望有帮助

# struts2 - 如何在 xls 中获得预览？

> ID：14433207
> 
> 赞同：0
> 
> 时间：2013-01-21T06:13:02.853
> 
> 标签：struts2, ireport

我正在使用下面的代码来获取 xls 中的输出。

```
else if ("xls".equalsIgnoreCase(reporttype)) {
        try
        {

            System.out.println("inside xls1");

        response.setContentType("application/vnd.ms-excel");
        System.out.println("inside xls2");
        response.setHeader("Content-Disposition", "inline; filename=\""
                + strId + ".xls\"");
        System.out.println("inside xls3");
        exporter = new JRXlsExporter();
        System.out.println("inside xls4");
        exporter.setParameter(JRExporterParameter.JASPER_PRINT,
                jasperPrint);
        System.out.println("inside xls5");
        exporter.setParameter(JRExporterParameter.OUTPUT_STREAM,
                ouputStream);
        System.out.println("inside xls6");

        System.out.println("inside exporter for XLS: "+exporter);
        }
        catch(Exception e)
        {
            System.out.println("inside xls catch");
            e.printStackTrace();
        }

    } 
```

但它发生在错误之下。

> Struts 问题报告 Struts 检测到一个未处理的异常：消息：没有为操作 com.coin.fk.SalesAction 定义结果和结果异常
> 文件：file:/D:/blm/.metadata/.plugins/org.eclipse.wst.server .core/tmp0/wtpwebapps/blm/WEB-INF/classes/struts.transaction.xml
> 行号：44 列号：77

```
 <action name="salesAction_*" method="{1}" class="com.coin.fk.SalesAction">      
            <interceptor-ref name="defaultLoginStack"/>     
            <interceptor-ref name="defaultStack"> 
```

堆栈跟踪

> 没有为操作 com.coin.fk.SalesAction 和结果异常定义结果 - 操作 - 文件：/D:/blm/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/blm/WEB- INF/classes/struts.transaction.xml:44:77
> com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:350)
> com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:253)
> org.apache.struts2 .impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
> org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504)
> org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419)
> org .apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
> org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java: 235)
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
> org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
> org.apache.catalina.core.StandardContextValve.invoke( StandardContextValve.java:191)
> org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
> org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
> org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
> org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
> org.apache.coyote.http11.Http11Processor.process(Http11Processor. java:859)
> org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
> org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
> java.lang。 Thread.run（未知来源）
> 
> 您看到此页面是因为启用了开发模式。开发模式或 devMode 启用额外的调试行为和报告以帮助开发人员。要禁用此模式， 请在 WEB-INF/classes/struts.properties 文件中 设置：
> struts.devMode=false 。

我该如何面对这个问题。请帮助如何调试此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:02:04.450

看来您正在尝试在`Global Exceptions`没有`Global Result`名称的情况下进行配置`Exception`。

像这样的东西：

```
<global-results>
    <result name="exception">jsp/error.jsp</result>
</global-results>

<global-exception-mappings>
    <exception-mapping exception="java.lang.Exception"
        result="exception" />
</global-exception-mappings> 
```

按照这个特定的顺序。

似乎您也有两个拦截器堆栈，一个带有您的自定义拦截器，另一个是默认堆栈。您应该只使用一个堆栈，以及您需要的所有拦截器，以避免在每个请求上执行两次：

```
 <action name="salesAction_*" method="{1}" class="com.coin.fk.SalesAction">      
            <interceptor-ref name="defaultLoginStack"/>     
            <interceptor-ref name="defaultStack">   
            <!--result ecc...-->
 </action> 
```

应该成为

```
 <action name="salesAction_*" method="{1}" class="com.coin.fk.SalesAction">      
            <interceptor-ref name="defaultLoginStack"/>     
            <!--result ecc...-->
 </action> 
```

# java - SNMPv3 陷阱发送问题

> ID：14433208
> 
> 赞同：1
> 
> 时间：2013-01-21T06:13:06.810
> 
> 标签：java, snmp4j

在使用**SNMP4J**创建的**陷阱发送器中，privProtocol** **3DES、AES192**和**AES256**的V3 陷阱发送失败。发生异常如下：

 ****```
org.snmp4j.MessageException: Message processing model 3 returned error: Unsupported security level
at org.snmp4j.MessageDispatcherImpl.sendPdu(MessageDispatcherImpl.java:501)
at org.snmp4j.Snmp.sendMessage(Snmp.java:1005)
at org.snmp4j.Snmp.send(Snmp.java:885)
at org.snmp4j.Snmp.send(Snmp.java:878)
at org.snmp4j.Snmp.send(Snmp.java:843) 
```

相同的代码适用于 privProtocol DES 和 AES128 以及所有 authProtocol。

代码如下：

```
 USM usm = new USM(SecurityProtocols.getInstance(), new OctetString(
                MPv3.createLocalEngineID()),0);
        SecurityModels.getInstance().addSecurityModel(usm);
        Snmp snmp = new Snmp(transport);

        //Creating USM user according to Security level

        //Security Level: noAuthNoPriv
        if(trapDetails.getSecurityLevel()==1){
            snmp.getUSM().addUser(
                    new OctetString(trapDetails.getUserName()),
                    new UsmUser(new OctetString(trapDetails.getUserName()), null, null,
                            null,null));
            }

        //Security Level:AuthNoPriv
        if(trapDetails.getSecurityLevel()==2){
            snmp.getUSM().addUser(
                    new OctetString(trapDetails.getUserName()),
                    new UsmUser(new OctetString(trapDetails.getUserName()), new OID(
                            trapDetails.getAuthProtocol()), new OctetString(trapDetails.getAuthPassword()),
                            null,null));
            }

        //Security Level:AuthPriv
        if(trapDetails.getSecurityLevel()==3){
        snmp.getUSM().addUser(
                new OctetString(trapDetails.getUserName()),
                new UsmUser(new OctetString(trapDetails.getUserName()), new OID(
                        trapDetails.getAuthProtocol()), new OctetString(trapDetails.getAuthPassword()),
                        new OID (trapDetails.getPrivProtocol()),new OctetString(trapDetails.getPrivPassword())));
        } 
```

…………

```
//Creating PDU

        ScopedPDU pdu= new ScopedPDU();
        pdu.setType(PDU.NOTIFICATION);
        pdu.setRequestID(new Integer32(200));
        pdu.setErrorIndex(0);
        pdu.setErrorStatus(SnmpConstants.SNMP_ERROR_BAD_VALUE);
        pdu.add(new VariableBinding(SnmpConstants.sysUpTime,new TimeTicks(255)));
        pdu.add(new VariableBinding(SnmpConstants.snmpTrapOID, new OID(trapDetails
                .getTrapOID())));
        pdu.add(new VariableBinding(SnmpConstants.snmpTrapEnterprise,new OID(SnmpConstants.snmpTrapEnterprise)));

//Creating target to send trap

        UserTarget uTarget= new UserTarget();
        ArrayList<String> destinationList = new ArrayList<String>(trapDetails.getDestinationIP());
        Iterator<String> itr= destinationList.iterator();
        String element;
        while(itr.hasNext()){
        uTarget = new UserTarget();
        element= itr.next().toString();
        uTarget.setAddress(new UdpAddress(InetAddress.getByName(element),trapDetails.getPort()));
        uTarget.setRetries(2);
        uTarget.setTimeout(5000);
        uTarget.setVersion(SnmpConstants.version3);
        uTarget.setSecurityLevel(trapDetails.getSecurityLevel());
        uTarget.setSecurityName(new OctetString(trapDetails.getUserName()));
        snmp.send(pdu, uTarget);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-04T23:50:19.823

检查 SecurityProtocols 是否添加了 PrivacyProtocols。如果没有，你可以添加喜欢

SecurityProtocols.getInstance().addPrivacyProtocol(new Priv3DES());

此外，要使用任何大于 128 位的加密，请确保使用适当的 JCE，例如 SunJCE。请参阅[http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html)****

# css - 在我们网站的 2 页上的火狐标题上方的空间。其他还好

> ID：14433211
> 
> 赞同：0
> 
> 时间：2013-01-21T06:13:31.057
> 
> 标签：css, wordpress, firefox

[此页](http://thebc.co/website-design-graphic-design)和[此页](http://thebc.co/los-angeles-music-licensing-mastering-consulting)在页眉上方有一个空格。它们只是在更新后出现，但我错过了问题可能出在哪里。

注意：这只发生在 FireFox 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:10:13.653

我会从 中删除整个类`columns`或整个`sixteen columns`类`header`，它在那里没有用，只剩下一小部分`padding`用于徽标，这就是你会错过的所有内容。现在它与`.columns`css 样式冲突。

或者您可以为仅适用于标头的类重写 css。

在 mac 上删除 chrome 和 ff 中的列类后：

![在此处输入图像描述](../Images/034c7a7baca019700019572d2cff6479.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:32:52.260

才发现问题。我有

```
#artists {margin-bottom: 40px}
#album-design {margin-bottom: 40px} 
```

我将其更改为：

```
#artists {padding-bottom: 40px}
#album-design {padding-bottom: 40px} 
```

我知道这是问题所在，因为它只发生在作品集和音乐页面上，只有两个页面具有特定的 CSS。

有大佬在看吗？

感谢所有的答案。大多数让我知道我将解决的其他问题。

谢谢你们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:31:10.023

我要检查的第一件事是您的标记是否有效。 [根据 w3c 验证器](http://validator.w3.org/check?uri=http://thebc.co/website-design-graphic-design&charset=%28detect%20automatically%29&doctype=Inline&group=0)，您在`div`某处有一个未关闭的地方。以我的经验，这正是会在不同浏览器中导致不同呈现的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T06:31:18.353

`margin-top: 16px;`从中删除`#header`。

也减少`padding-top: 5px;` 从 `#header .inner`,

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T06:33:21.557

.column, .columns 在这个类中 float:left; 和 display:inline 导致问题...请尝试删除这两个属性，但它可能会影响其他一些地方.. 在标题 id 中做一件事放置 float:none; 所以它只对标题有效。

```
#header {clear: both;  display: inline-block; float: none; margin-top: 16px;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-21T06:50:20.870

```
.column, .columns {
  display: inline;
  float: left;
  margin-left: 10px;
  margin-right: 10px;
} 
```

在这个类`float:left`里面是多余的，去掉他是正常的。和两个班分开写。像这样：

```
.columns {      
  margin-left: 10px;
  margin-right: 10px;
}

.column{
  display: inline;
  float: left;
  margin-left: 10px;
  margin-right: 10px;
} 
```

# javascript - 如何从 javascript 调用 REST API

> ID：14433212
> 
> 赞同：11
> 
> 时间：2013-01-21T06:13:31.083
> 
> 标签：javascript, jquery, html

我有一个提供 json 数据的 url...

我想从 javascript 中访问该 URL，但出现此错误：

未声明纯文本文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则文档将在某些浏览器配置中呈现乱码。文件的字符编码需要在传输协议中声明或者文件需要使用字节序标记作为编码签名

代码 ：

```
function a(){
$.getJSON(url,function(data) { alert(data);});
} 
```

完整代码：

```
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
<script language="JavaScript" type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script>

function a(){
$.getJSON(url,function(data) { alert(data);});
}
</script>
</head>
<body>
<input type="text"/>
<input type="submit" value="search" onclick="a()"/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T06:34:56.270

您的代码似乎正确。

你在做一个`fully qualified URL call`吗？

如果您要进行完全限定的 URL 调用，请确保以下内容。

1.  您正在调用相同的域（相同的服务器）。您不能对另一个域进行简单的 JSON 调用。
2.  如果要使用跨域调用，则必须使用 JSONp

**更新：** 这是行不通的，因为它是跨域调用。

解决这个问题

**JavaScript**

创建一个函数

```
function getMyData(data) {
    alert(data);
    //Do the magic with your data
} 
```

**服务器端**

在服务器端将数据包装在函数语法中

```
getMyData("Enter your data here"); 
```

**JavaScript**

然后创建一个脚本标签并添加一个链接到你的跨域页面

```
 <script type="text/javascript"
         src="cross ref url">
 </script> 
```

供参考：[维基百科](http://en.wikipedia.org/wiki/JSONP)

编辑：另一个选项是在您的域上创建代理。即在您的域中创建一个页面，该页面在内部调用跨域页面并将相同的数据返回给您的Ajax 调用。

# c# - C# wpf 多线程

> ID：14433213
> 
> 赞同：0
> 
> 时间：2013-01-21T06:13:31.137
> 
> 标签：c#, wpf, multithreading

我想在线程中生成 3 个随机数，然后将其保存到列表中。这是我的代码

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Data;
    using System.Windows.Documents;
    using System.Windows.Input;
    using System.Windows.Media;
    using System.Windows.Media.Imaging;
    using System.Windows.Navigation;
    using System.Windows.Shapes;
    using System.Threading;
    using System.IO;

    namespace Multithreading1
    {
        /// <summary>
        /// Interaction logic for MainWindow.xaml
        /// </summary>
        public partial class MainWindow : Window
        {
            List<int> myList = new List<int>();
            int threadNumber = 0;
            int currentRecNumber = -1;

            public MainWindow()
            {
                InitializeComponent();
            }

            void ThreadHandler(int recNumber,int number)
            {
                Action action = null;
                action = () =>
                        {
                            myList[recNumber] = number;
                            ++currentRecNumber;
                            --threadNumber;
                            if (currentRecNumber < myList.Count)
                            {
                                ++threadNumber;
                                Thread t = new Thread(() => GetRandomNumber(currentRecNumber));
                                t.Start();
                            }
                            else
                                if (threadNumber == 0) //finish
                                {
                                    List<String> stringList = new List<String>();
                                    for (int i = 0; i < myList.Count;i++)
                                    {
                                        stringList.Add(myList[i].ToString());
                                    }
                                    File.WriteAllLines("C:\\Users\\Public\\Documents\\MyList.txt", stringList);
                                    System.Windows.MessageBox.Show("Finish");
                                }
                        };
                this.Dispatcher.BeginInvoke(action);
            }

            void GetRandomNumber(int recNumber)
            {
                Random rnd = new Random();
                int randomInt = rnd.Next(1, 13);
                ThreadHandler(recNumber, randomInt);
            }

            private void button1_Click(object sender, RoutedEventArgs e)
            {
                for (int i = 0; i < 20; i++)
                {
                    myList.Add(-1);
                }
                for (int i = 0; i < 3; i++)
                {
                    ++currentRecNumber;
                    ++threadNumber;
                    Thread t = new Thread(() => GetRandomNumber(currentRecNumber));
                    t.Start();
                }
            }
        }
    } 
```

问题是： 1\. 有时它会在 myList[recNumber] = number 处抛出 ArgumentOutOfRangeException；2\. 如果超过 (1)，则生成的文件仍然包含 -1，例如：

```
-1
-1
8
6
11
-1
1
3
-1
3
3
8
8
8
8
10
10
10
10
12 
```

有谁知道出了什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:53:37.220

您的 Dispatcher.BeginInvoke 将调用与调度程序关联的线程上的每个操作，因此您实际上并没有在不同的线程上实际运行这些操作。在 ThreadHandler 方法中尽可能多地做可能会更好，并且只在 BeginInvoke 操作中进行 UI 更改。

同样在 button1_Click 中，在启动每个线程之前增加 currentRecNumber，这样会导致前几个线程跳过列表中的前几个项目。

您还有一个主要问题，因为您正在从不同的线程访问共享变量（currentRecNumber、threadNumber 和 myList），这可能会导致各种线程问题。您需要使用某种同步来确保每个线程都从这些变量中读取和写入正确的值。您可以使用[InterlockedIncrement](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.increment%28v=vs.110%29.aspx)和 InterlockedDecrement 来缓解其中一些问题，但不是全部。

我还要指出，创建线程很昂贵，最好在[线程池线程](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem.aspx)上安排您想要执行的工作，使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/4852et58%28v=vs.95%29.aspx)或使用并行库之一，如任务并行库或 PLINQ。

我建议阅读Joe Albahari的[这本关于线程的免费电子书。](http://www.albahari.com/threading/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:34:21.860

感谢马特的电子书。这很容易理解。我设法通过少量添加来修复我的代码。它的问题的关键是“Lambda 表达式和捕获的变量”，所以我给它添加了几个局部变量。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Threading;
using System.IO;

namespace Multithreading1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        List<int> myList = new List<int>();
        int threadNumber = 0;
        int currentRecNumber = -1;

        public MainWindow()
        {
            InitializeComponent();
        }

        void ThreadHandler(int recNumber,int number)
        {
            Action action = null;
            action = () =>
                    {
                        myList[recNumber] = number;
                        ++currentRecNumber;
                        --threadNumber;
                        int localCurrentRecNumber = currentRecNumber;
                        int localThreadNumber = threadNumber;
                        if (localCurrentRecNumber < myList.Count)
                        {
                            ++threadNumber;
                            Thread t = new Thread(() => GetRandomNumber(localCurrentRecNumber));
                            t.Start();
                        }
                        else
                            if (localThreadNumber == 0) //finish
                            {
                                List<String> stringList = new List<String>();
                                for (int i = 0; i < myList.Count;i++)
                                {
                                    stringList.Add(myList[i].ToString());
                                }
                                File.WriteAllLines("C:\\Users\\Public\\Documents\\MyList.txt", stringList);
                                System.Windows.MessageBox.Show("Finish");
                            }
                    };
            this.Dispatcher.BeginInvoke(action);
        }

        void GetRandomNumber(int recNumber)
        {
            Random rnd = new Random();
            int randomInt = rnd.Next(1, 13);
            ThreadHandler(recNumber, randomInt);
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            for (int i = 0; i < 20000; i++)
            {
                myList.Add(-1);
            }
            for (int i = 0; i < 3; i++)
            {
                ++currentRecNumber;
                ++threadNumber;
                int localCurrentNumber = currentRecNumber;
                Thread t = new Thread(() => GetRandomNumber(localCurrentNumber));
                t.Start();
            }
        }
    }
} 
```

# jasper-reports - 动态页面高度，每页显示 10 条记录，StretchWithOverflow 属性设置为 true

> ID：14433217
> 
> 赞同：-1
> 
> 时间：2013-01-21T06:14:06.200
> 
> 标签：jasper-reports

我使用分页符属性在 jasper 中每页（9 列）有 10 条记录。我已将详细信息带的 StretchWithOverflow 属性设置为 true。因此，当有更多数据时，我的表格会垂直放大。我的问题是，如果数据更多，它不会每页显示 10 条记录，因为在 jasper 中我们给出了页面的静态高度。

如果我设置了更高的页面高度，那么在这种情况下，如果数据较少，则报告上有很多无效空间。如果有人遇到此问题，请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:48:55.980

问题解决了。我在细节带中使用了框架（来自 Pallete ctrl+shift+8），并将所有单元格数据放入框架中。因此，当页面高度更高时，空白显示而不是我的最后一行高度会增加。现在，由于页面的额外高度，我的单元格无法拉伸。

# macos - 任务流程标识符可可

> ID：14433219
> 
> 赞同：0
> 
> 时间：2013-01-21T06:14:15.473
> 
> 标签：macos, cocoa, nstask

好的，这是我的代码..

tid 的返回值通常是实际 pid 的 2-3 左右。试图弄清楚为什么它不会给我确切的 pid，这让我发疯。

所以当我试图杀死进程时，它不会杀死，我想我可以写一个来做 ps -u | grep ssh vars 特定于这个过程，但我不应该有。有任何想法吗？

编辑这里是粘贴的实际代码

```
- (void)startService {
 NSString *temp = @"-D 8080 user@127.0.0.1 -N";
 task = [[NSTask alloc] init];
 [task setLaunchPath: @"/usr/bin/ssh"];
 [task setArguments: [temp componentsSeparatedByString:@" "]];
 NSPipe *input = [NSPipe pipe];
 [task setStandardInput: input];
 [task launch];

 int tid = [task processIdentifier];
 NSLog(@"Starting task: %i", tid);
}

- (void)stopService {
 if ([self isRunning]) {
      int tid;
      tid = [task processIdentifier];
      running = false;
      [task terminate];
      NSString *killTask = [NSString stringWithFormat:@"/bin/kill -KILL %i", tid];
      //NSLog(@"Attepting to KILL: %i", tid);
      system([killTask cStringUsingEncoding:NSASCIIStringEncoding]);
      //[task ];
 }
} 
```

# database - 如何将关系数据库中的数据暴露给语义网？

> ID：14433220
> 
> 赞同：2
> 
> 时间：2013-01-21T06:14:22.650
> 
> 标签：database, rdf

如何将关系数据库中的数据暴露给语义网？

是否应该将数据转换为 RDF 序列化？或者有没有办法在不转换关系数据的情况下将关系数据公开给语义网？

如果要转换数据，必须是RDF吗？将关系数据转换为 RDF 数据库的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:25:06.257

RDF 模型方法在 W3C 上有相同的规范。我找到了关于[R2RML](http://www.w3.org/TR/r2rml/)的规范。作为 RDF 访问关系数据库的项目是[d2rq](http://d2rq.org/)。

# python - 三行代码在 Python 中找到一串数字中的最大乘积

> ID：14433226
> 
> 赞同：-2
> 
> 时间：2013-01-21T06:15:04.687
> 
> 标签：python

完全披露：这是一个任务。简单地获得工作代码就足够了，但是在三行中完成这项工作让我获得了额外的荣誉。

我正在尝试获取 1000 位字符串并找到 5 个连续数字的最大乘积。您可能会认为这是 Project Euler 的问题 #8。

我尝试了很多选择，但我似乎被卡住了。我正在努力弄清楚我是否可以发表一个有效的`lambda`声明，但我没有经验，`lambda`所以它在逃避我。

这是我到目前为止所拥有的：

```
for i in range(1, 996):
    max = int(number[i+0]) * int(number[i+1]) * int(number[i+2]) * int(number[i+3]) * int(number[i+4]) if max < int(number[i+0]) * int(number[i+1]) * int(number[i+2]) * int(number[i+3]) * int(number[i+4]) else max = max
return max 
```

这不起作用并触发`SyntaxError: can't assign to conditional expression`。

我不想要直接的代码，或者至少不想要一个完整的功能，而只是帮助理解我如何前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:18:34.100

这不是合法的蟒蛇：

```
x = y if z else x = w 
```

这是：

```
x = y if z else w 
```

这是这样的：

```
if z: x = y 
```

顺便说一句，有一个单行解决方案，比你的三个更短更清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:19:24.473

`=`在您的（非常长的）行中出现两次。实际上你有这个：

```
max = something if something else max = max 
```

Python解析为：

```
max = (something if something else max) = max 
```

而且，确实，您不能分配给条件表达式，这就是中间的全部内容。

你可能不打算在最后进行决赛`= max`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T06:33:36.707

调查：

*   **用于查找序列中最大数**的内置 max 函数，****
***   **内置 map 函数**将函数应用于列表中的所有元素，*   **内置reduce函数**通过将重复返回单个对象的函数应用于列表中的两个元素来获取单个对象，*   **lambda 定义**能够定义您可以传递给 map() 和 reduce() 的函数对象，*   和**列表推导**（和生成器，它们非常相似）以单行方式组合上述函数。**

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T06:38:38.520

```
In [15]: def myinput(l,n):
    ...:     for x in l:
    ...:         yield l[x:x+n]
    ...:         

In [16]: max([reduce(lambda a,b:a*b, x) for x in myinput(range(1000),5) if len(x)==5])
Out[16]: 985084775273880L 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-21T06:39:43.417

就像提到的递归一样，有一个简单的单线解决方案。它涉及使用`max`函数——在内置函数之后命名变量总是不好的！

在 Python 2 中，它看起来像这样：

```
max(reduce(lambda x, y: x*y, map(int, num[i:i+5])) for i in xrange(996)) 
```

在 Python 3`reduce`中被删除了，所以你必须通过它`functools`：

```
from functools import reduce
max(reduce(lambda x, y: x*y, map(int, num[i:i+5])) for i in range(996)) 
```**

# c# - 如何在 Visual Studio 2010 设置和部署项目中包含第三方 exe？

> ID：14433227
> 
> 赞同：4
> 
> 时间：2013-01-21T06:15:07.100
> 
> 标签：c#, visual-studio-2010, exe, setup-project

假设`A.exe`是我的`exe`项目在`windows system`.

假设`B.exe`是`A.exe`. 目前我正在分别安装这两个项目。现在，我想将驱动程序包含在我的`A.exe`安装中，即当用户安装时`A.exe`，会`B.exe`自动首先安装。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T06:51:33.227

请参阅[文档](http://msdn.microsoft.com/en-us/library/ms235317%28v=VS.90%29.aspx)：

1.  从项目菜单中，选择添加并单击文件。
2.  找到包含 MyApplication.exe 和 MyLibrary.DLL 的文件夹并选择它们。
3.  在文件系统窗口中，右键单击应用程序文件夹，指向添加并单击创建以创建一个新文件夹。称之为我的图书馆。
4.  再次单击 Application Folder，选择 MyLibrary.DLL 并将其拖到 MyLibrary 文件夹中。在解决方案资源管理器中，在您的项目下的 Detect Dependencies 中，您应该看到 Visual Studio 检测到 MFC90.dll 和 MSVCR90.dll 的依赖关系。您必须为这些 DLL 添加相应的合并模块。
5.  从项目菜单中，指向添加并单击合并模块。选择 Microsoft_VC90_CRT_x86.msm 和 Microsoft_VC90_MFC_x86.msm，然后单击确定。对于这些合并模块的调试版本，请选择 Microsoft_VC90_DebugCRT_x86.msm 和 Microsoft_VC90_DebugMFC_x86.msm。

对于 VS2010 部署示例，请查看[此处](http://msdn.microsoft.com/en-us/library/ms235285%28v=vs.100%29.aspx)。

# c# - 如何在 (*.*) 格式化文件 [abc.tx, file.html 等] 之前获取两个特定字符之间的直接子字符串

> ID：14433234
> 
> 赞同：0
> 
> 时间：2013-01-21T06:16:00.143
> 
> 标签：c#, string, substring

给定一个字符串文件路径，如何获取表示给定字符串路径中包含文件的目录名的子字符串。例如，`\\subfolder\\abc.txt`或者 `\\folder\\subfolder\\abc.txt` 我怎样才能轻松获得两个反斜杠之间的子文件夹字符串`\\`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:25:34.183

您可以像这样使用[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)和[DirectoryInfo](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)类 -

```
FileInfo file = new FileInfo(@"C:\folder\subfolder\abc.txt");
DirectoryInfo dir = file.Directory;
string dirName = dir.Name; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T06:23:44.433

使用 fileinfo 类进行主要操作：http: [//msdn.microsoft.com/en-us/library/system.io.fileinfo_properties.aspx](http://msdn.microsoft.com/en-us/library/system.io.fileinfo_properties.aspx)

您还可以使用 String.Split 在“\”字符上进行拆分：http: [//msdn.microsoft.com/en-us/library/b873y76a.aspx](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)

```
string file = "\\folder\\subfolder\\abc.txt";

FileInfo fi = new FileInfo(file);

string directory = fi.DirectoryName;

string[] folderNames = directory.Split(new string [] {"\\"}, StringSplitOptions.None); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:32:02.947

我想它可以帮助你

```
 string path = @"\folder\subfolder\abc.txt";
        var arr=path.Split('\\');

        for (int i = 0; i < arr.Length; i++)
        {
            //Select the required value
            string val = arr[i];
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T06:39:56.303

```
 one more way to get "subfolder" from the path....

    string path = "\\folder\\subfolder\\abc.txt";
    var arr=path.Split('\\');
    string val = arr[arr.Length-2]; 
```

假设在“路径”中我们将获得上述格式的字符串......

# c# - 编写和加载 C# 项目中的文件？

> ID：14433235
> 
> 赞同：1
> 
> 时间：2013-01-21T06:16:12.127
> 
> 标签：c#, dotnetzip

经过大量搜索和广泛研究，我有一个无疑是愚蠢的问题，但我只是错过了一些简单的东西。我刚刚发布了我的第一个网站，显然必须进行一些更改。我正在使用一个作家类，在它只是写入我的计算机上的路径之前，但这显然不是现在的选择，我正在尝试的是：

```
using (StreamWriter writer = new StreamWriter(@"~\Files\test.txt")) 
```

我只想将此写入我项目中的 Files 文件夹。语法是什么？我也在使用 dotnetzip 并在尝试不同的语法时遇到同样的问题：

```
zip.AddFile("Files/test.txt"); 
```

这样做的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:18:09.437

对于 Windows（桌面）应用程序，请执行以下操作：

```
Path.Combine(Application.StartupPath, "Files", "test.txt") 
```

应用程序路径可在 中访问[`Application.StartupPath`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.startuppath.aspx)，您可以使用它[`Path.Combine`](http://msdn.microsoft.com/en-us/library/dd784047.aspx)来将路径的各个部分组合在一起。

对于 ASP.net，您需要[`Server.MapPath`](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)代替`Application.StartupPath`：

```
Path.Combine(Server.MapPath("~", "Files", "test.txt") 
```

当然，既然这都是硬编码的，你也应该能够简单地做

```
Server.MapPath("~/Files/test.txt") 
```

根据您的需要，您可能需要使用`.`而不是`~`. 另请参见[Server.MapPath(".")、Server.MapPath("~")、Server.MapPath(@"\")、Server.MapPath("/")。有什么不同？](https://stackoverflow.com/questions/275781/server-mappath-server-mappath-server-mappath-server-mappath).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:47:25.513

非常感谢 Ic。为响应。我没有提到这是一个 asp.net 项目，但我发现 asp.net 中的等价物是：

```
Server.MapPath(".") 
```

有许多选项，而不是 . 但这就是我要找的。另外，我试图在课堂上进行设置，但没有成功，因为我需要这样做：

```
HttpContext.Current.Server.MapPath(".") 
```

谢谢！

# sql - 需要编写带有条件的查询

> ID：14433238
> 
> 赞同：1
> 
> 时间：2013-01-21T06:16:31.640
> 
> 标签：sql, oracle, oracle10g, oracle11g

我需要写一个查询

如果表中已经存在记录 id，并且具有一些不同值的相同记录 id，那么我必须在表中更新其到期日期，并将具有新值的记录 id 插入表中。如果没有记录 id 不存在，则在表中创建一个新条目。

例如：在一个表中 tmp record_id =101 存在，然后更新所有记录 id='101' 的行的 main_table expiry_date 并从 tmp 插入一个新行到 main_table 否则插入到 main_table。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:21:47.057

您需要一个[Merge 语句](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm)和一个插入：

```
merge into your_table t
using(select 5 as id, sysdate as expiry_date from source where coditions) S
on(s.id = t.id)
when matched then update t.expiry_date = s.expiry_date;

insert into your_table t   
values (5 , sysdate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:26:23.740

请检查这个：

```
MERGE INTO mytable b
USING (SELECT * from mytable where id = 10) a
ON b.id = a.id
WHEN MATCHED THEN UPDATE SET b.expirydate = a.expirydate
;
INSERT (id, col1, col2...) VALUES (a.id, col1, col2...) 
```

如果匹配，您将更新。在任何时候你都会插入。

# google-maps - 谷歌地图 - 单击标记打开信息窗口并绘制路线

> ID：14433239
> 
> 赞同：0
> 
> 时间：2013-01-21T06:16:32.327
> 
> 标签：google-maps

是否可以同时打开和 infowindow 并在“home”标记和单击的标记之间绘制路线？我所拥有的是带有“家”标记的地图上的多个标记。我想在地图上绘制从这个“家”标记到点击标记的路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:58:13.287

您想要的是事件标记上的事件侦听器`click`。在其中，使用`DirectionsService`来绘制您的路线。

# wpf - 确定 WPF 应用程序的硬件和软件要求

> ID：14433240
> 
> 赞同：0
> 
> 时间：2013-01-21T06:16:33.210
> 
> 标签：wpf

我已经创建了一个 WPF 应用程序，并且正在编写有关它的文档。在我的文档中，我需要说明我的 WPF 应用程序的硬件和软件要求。无论如何，我可以检查 WPF 应用程序的要求吗？谢谢。

关于我的申请：

```
 Target Framework: .NET Framework 4 client profile    
 Output type : Windows Application 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:45:35.067

我不确定我是否 100% 理解您的问题，但无论如何我都会尽力帮助您。

使用 WPF 进行开发时，图形硬件是一个非常重要的元素。

运行 WPF 应用程序的设备的图形硬件功能和性能级别由[渲染层](http://msdn.microsoft.com/en-us/library/ms742196.aspx)定义。MSDN 链接描述了层的类型和最低图形硬件。

简而言之，您可以使用[RenderCapability.Tier](http://msdn.microsoft.com/en-us/library/system.windows.media.rendercapability.tier.aspx)获取当前线程的渲染层。

在代码中

```
int renderingTier = (RenderCapability.Tier >> 16); 
```

如果您在 WPF 应用程序中使用了一些繁重的图形效果，那么可能建议您在具有`RenderCapability.Tier > 0`.

# mysql - MySQL 几个使用 if 的查询

> ID：14433241
> 
> 赞同：1
> 
> 时间：2013-01-21T06:16:34.227
> 
> 标签：mysql, sql, database, if-statement

我现在正在编写一些 MySQL 命令，它们可以让我生成更好的统计数据。我现在的问题是，在特殊情况下应该调用一些查询，而在其他情况下则不需要。

我目前的尝试：（我把它短路了）

```
SET @var1=0, @var2=0;
SELECT @var1 := `id` FROM `sg_playerstats` ORDER BY `id` ASC LIMIT 0, 1;
SELECT @var2 := `Last Updated` FROM `sg_playerranking` LIMIT 0, 1;
IF @var1 > @var2 THEN (

TRUNCATE `sg_playerranking`;

SET
    @Rank := 0;

INSERT INTO
    `sg_playerranking`
SELECT
    @Rank := @Rank + 1 AS `Rank`,
    t.*,
    @var1 AS `Last Updated`
FROM
    (
        SELECT
            `player` AS `Player`,
        FROM
            `sg_playerstats`
        GROUP BY
            `player`
        ORDER BY
            `Score` DESC, ...
    ) t;  )
END IF

SELECT `Rank`, ... FROM `sg_playerranking` WHERE 1 
```

If 语句不起作用（语法错误。每个查询部分本身都在工作！）我做了一些研究，但除此之外什么也找不到！

括号没有区别！

编辑：

现在我真的很困惑！

我的代码是：

```
CREATE PROCEDURE generate_statistics (OUT param1 INT)
BEGIN

    SET @var1=0, @var2=0;
    SELECT @var1 := `id` FROM `sg_playerstats` ORDER BY `id` ASC LIMIT 0, 1;
    SELECT @var2 := `Last Updated` FROM `sg_playerranking` LIMIT 0, 1;
    IF @var1 > @var2 THEN

    TRUNCATE `sg_playerranking`;

    SET
        @Rank := 0;

    INSERT INTO
        `sg_playerranking`
    SELECT
        @Rank := @Rank + 1 AS `Rank`,
        t.*,
        @var1 AS `Last Updated`
    FROM
        (
            SELECT
                `player` AS `Player`,
                SUM(1) AS `Games`,
                SUM(`points`) AS `Points`,
                SUM(`points`) / SUM(1) AS `Points per Game`,
                SUM(IF(`position` = 1, 1, 0)) AS `Wins`,
                SUM(IF(`position` = 1, 1, 0)) / SUM(1) AS` Wins per Game`,
                SUM(IF(`position` = 1, 0, 1)) AS `Loses`,
                SUM(IF(`position` = 1, 0, 1)) / SUM(1) AS `Loses per Game`,
                SUM(`kills`) AS `Kills`,
                SUM(`kills`) / SUM(1) AS `Kills per Game`,
                SUM(`death`) AS `Deaths`,
                SUM(`death`) / SUM(1) AS `Deaths per Game`,
                SEC_TO_TIME(SUM(`time`) / 1000) AS `Time played`,
                ROUND(sqrt(SUM(`points`)) + 10 * SUM(`points`) / SUM(1) + 10 * sqrt(SUM(IF(`position` = 1, 1, 0))) + 100 * SUM(IF(`position` = 1, 1, 0)) / SUM(1) - 5 * sqrt(SUM(IF(`position` = 1, 0, 1))) - 50 * SUM(IF(`position` = 1, 0, 1)) / SUM(1) + 7.5 * sqrt(SUM(`kills`)) + 75 * SUM(`kills`) / SUM(1) - 3.75 * sqrt(SUM(`death`)) - 37.5 * SUM(`death`) / SUM(1), 2) AS `Score`
            FROM
                `sg_playerstats`
            GROUP BY
                `player`
            ORDER BY
                `Score` DESC,
                `Points per Game` DESC,
                `Wins per Game` DESC,
                `Loses per Game` ASC,
                `Kills per Game` DESC,
                `Deaths per Game` ASC,
                `Points` DESC,
                `Wins` DESC,
                `Loses` ASC,
                `Kills` DESC,
                `Deaths` ASC,
                `Games` DESC,
                `Time played` DESC,
                `Player` DESC
        ) t;
    END IF;

    SELECT `Rank`, `Player`, `Games`, `Points`, `Points per Game`, `Wins`, `Wins per Game`, `Loses`, `Loses per Game`, `Kills`, `Kills per Game`, `Deaths`, `Deaths per Game`, `Time played`, `Score` INTO param1 FROM `sg_playerranking` WHERE 1
END; 
```

这是我得到的错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 4 
```

好吧，如果我服用 DECLARE 也没关系！

（对不起，长查询！）

编辑2：

我终于解决了！此代码有效！

```
DELIMITER //

CREATE PROCEDURE gamestats ()
BEGIN
    SET
        @var1 = 1,
        @var2 = 0;

    SELECT
        @var1 := `id`
    FROM
        `sg_playerstats`
    ORDER BY
        `id` DESC
    LIMIT
        0,
        1;

    SELECT
        @var2 := `Last Updated`
    FROM
        `sg_playerranking`
    LIMIT
        0,
        1;

    IF
        @var1 > @var2
    THEN
        TRUNCATE
            `sg_playerranking`;
        SET
            @Rank := 0;
        INSERT INTO
            `sg_playerranking`
        SELECT
            @Rank := @Rank + 1 AS `Rank`,
            t.*,
            @var1 AS `Last Updated`
        FROM
            (
                SELECT
                    `player` AS `Player`,
                    SUM(1) AS `Games`,
                    SUM(`points`) AS `Points`,
                    SUM(`points`) / SUM(1) AS `Points per Game`,
                    SUM(IF(`position` = 1, 1, 0)) AS `Wins`,
                    SUM(IF(`position` = 1, 1, 0)) / SUM(1) AS` Wins per Game`,
                    SUM(IF(`position` = 1, 0, 1)) AS `Loses`,
                    SUM(IF(`position` = 1, 0, 1)) / SUM(1) AS `Loses per Game`,
                    SUM(`kills`) AS `Kills`,
                    SUM(`kills`) / SUM(1) AS `Kills per Game`,
                    SUM(`death`) AS `Deaths`,
                    SUM(`death`) / SUM(1) AS `Deaths per Game`,
                    SEC_TO_TIME(SUM(`time`) / 1000) AS `Time played`,
                    ROUND(sqrt(SUM(`points`)) + 10 * SUM(`points`) / SUM(1) + 10 * sqrt(SUM(IF(`position` = 1, 1, 0))) + 100 * SUM(IF(`position` = 1, 1, 0)) / SUM(1) - 5 * sqrt(SUM(IF(`position` = 1, 0, 1))) - 50 * SUM(IF(`position` = 1, 0, 1)) / SUM(1) + 7.5 * sqrt(SUM(`kills`)) + 75 * SUM(`kills`) / SUM(1) - 3.75 * sqrt(SUM(`death`)) - 37.5 * SUM(`death`) / SUM(1), 2) AS `Score`
                FROM
                    `sg_playerstats`
                GROUP BY
                    `player`
                ORDER BY
                    `Score` DESC,
                    `Points per Game` DESC,
                    `Wins per Game` DESC,
                    `Loses per Game` ASC,
                    `Kills per Game` DESC,
                    `Deaths per Game` ASC,
                    `Points` DESC,
                    `Wins` DESC,
                    `Loses` ASC,
                    `Kills` DESC,
                    `Deaths` ASC,
                    `Games` DESC,
                    `Time played` DESC,
                    `Player` DESC
            ) t;
    END IF;
END;
//
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:21:15.420

在 Mysql 中，if 语句只适用于存储过程。它在常规 sql 批处理中不可用。

# actionscript-3 - itemrenderers prepare() 函数有什么作用？

> ID：14433242
> 
> 赞同：0
> 
> 时间：2013-01-21T06:16:49.360
> 
> 标签：actionscript-3, apache-flex

覆盖[`IGridItemRenderer.prepare()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/gridClasses/IGridItemRenderer.html#prepare%28%29)功能并做一些事情。

```
override public function prepare(hasBeenRecycled:Boolean):void
{
  cb.selected = grid.selectionContainsIndex(rowIndex);//cb is CheckBox itemrenderer
} 
```

什么时候调用这个准备函数？多少次？它有什么作用？在调试时我注意到这个方法被连续调用，重写这个方法有没有性能问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:07:44.620

在 flex 中，项目渲染器由框架自动构建、销毁和回收。它试图回收以前未使用的对象以节省资源。

当项目渲染器受到新行、单元格、对象、...的影响时，会调用 prepare

您可以使用它来初始化一些标签、字段、...

如果在调试中您注意到“持续调用”，则可能是由于以下工作流程： - 项目获得焦点，框架调用 prepare() - 您的 IDE 停止在该方法中，然后您的应用程序失去焦点 - 一旦您完成调试，您的应用程序重新获得焦点，然后调用 prepare 方法，-等等，...

最终，您可以使用与 {data.myFields} 的绑定来在数据对象受到影响时自动显示值（通过 prepare 方法静默），否则您将覆盖此方法以准备一些要显示的属性。

在性能方面，一切都应该相似。

HIH

# android - 布局不适应小屏幕尺寸

> ID：14433243
> 
> 赞同：-1
> 
> 时间：2013-01-21T06:16:57.407
> 
> 标签：android, layout, screen

> **可能重复：**
> [应用程序骨架支持多屏幕](https://stackoverflow.com/questions/12242111/application-skeleton-to-support-multiple-screen)

我正在开发一个安卓应用程序。在 res 文件夹中为不同大小创建了不同的文件夹，例如 layout-large、layout-small。除了小屏幕尺寸外，它工作正常。在小屏幕尺寸下，它不会从 layout-small 文件夹中获取布局。可能是什么原因。在小屏幕尺寸中，我们正在考虑 240*400。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:23:45.307

小屏幕尺寸是指屏幕的物理尺寸，根据[文档](http://developer.android.com/guide/practices/screens_support.html)，它必须在 3 到 3.5 英寸以下。

像素的数量并不重要（除了明显的相关性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:20:49.010

试试这样。。

```
<manifest ... >
    <compatible-screens>
        <!-- all small size screens -->
        <screen android:screenSize="small" android:screenDensity="ldpi" />
        <screen android:screenSize="small" android:screenDensity="mdpi" />
        <screen android:screenSize="small" android:screenDensity="hdpi" />
        <screen android:screenSize="small" android:screenDensity="xhdpi" />
        <!-- all normal size screens -->
        <screen android:screenSize="normal" android:screenDensity="ldpi" />
        <screen android:screenSize="normal" android:screenDensity="mdpi" />
        <screen android:screenSize="normal" android:screenDensity="hdpi" />
        <screen android:screenSize="normal" android:screenDensity="xhdpi" />
    </compatible-screens>
    ...
    <application ... >
        ...
    <application>
</manifest> 
```

有关更多信息，请关注[此](http://developer.android.com/guide/practices/screens-distribution.html)、[此](http://developer.android.com/guide/practices/screens_support.html)或[此](http://developer.android.com/guide/practices/screen-compat-mode.html)

# python - 如何在excel文件中获取具有完全相同格式的合并单元格的表格

> ID：14433245
> 
> 赞同：0
> 
> 时间：2013-01-21T06:17:07.470
> 
> 标签：python, python-2.7, beautifulsoup

我正在尝试以相同的方式从 Excel 文件中的链接获取表格，我正在使用下面的代码获取表格

```
#Getting particular table from the page and sending to excel file
page    = urllib2.urlopen('http://developer.android.com/about/dashboards/index.html').read()
soup    = BeautifulSoup(page)
a       = soup('div', {'class' : 'col-5'})[0]
with open('android version 2013_01_18.csv', 'wb') as csvfile:
    csvout = csv.writer(csvfile, delimiter=',')
    csvout.writerow(["Version","Codename","API", "Distribution"])
    for table in a.findAll('table'):
        print '#'
        print '# Table'
        print '# Fields: ' + ','.join([tr.text for tr in table.findAll('th')])
        for row in table.findAll('tr'):
            csvout.writerow([tr.text for tr in row.findAll('td')]) 
```

我在excel中得到输出：

```
1.6 Donut   4   0.20%
2.1 Eclair  7   2.40%
2.2 Froyo   8   9.00%
"2.3 - 2.3.2
"   Gingerbread 9   0.20%
"2.3.3 - 2.3.7
        "   10  47.40%  
3.1 Honeycomb   12  0.40%
3.2 13  1.10%   
4.0.3 - 4.0.4   Ice Cream Sandwich  15  29.10%
4.1 Jelly Bean  16  9.00%
4.2 17  1.20% 
```

这里的问题在于合并单元格后立即出现的行，因为 td 计数是 3 而不是 4 我发现代码中使用了创建合并单元格 rowspan=2 ，但我想知道如何使用这些信息来获取数据完全一样，下面是HTML结构

```
<tr>
 <td>
 <a href="/about/versions/android-2.3.html">2.3 - 2.3.2</a>
 </td>
 <td rowspan="2">Gingerbread</td>
 <td>9</td>
 <td>0.2%</td>
</tr>
<tr>
 <td>
 <a href="/about/versions/android-2.3.3.html">2.3.3 - 2.3.7 </a>
 </td>
 <td>10</td>
 <td>47.4%</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T06:44:40.640

在 Excel 可以读取的格式中，.csv 是最容易生成的格式之一，但也是最不强大的格式之一。它不支持合并单元格（或为单元格设置数据类型，或具有多个工作表）。

如果您使用的是 Excel 2007 或更新版本，您可以使用[openpyxl](http://openpyxl.readthedocs.org/en/latest/index.html)编写一个 .xlsx 文件。创建工作表并填写数据后，您可以在工作表上对原始 HTML 中具有 rowspan=X 的那些单元格使用[merge_cells ，以获得您想要的效果。](http://openpyxl.readthedocs.org/en/latest/api.html#openpyxl.worksheet.Worksheet.merge_cells)

如果您有旧版本的 Excel，您可能需要查看[xlwt](https://pypi.python.org/pypi/xlwt)

# asp.net-mvc-3 - Twitterizer 获取用户信息

> ID：14433246
> 
> 赞同：0
> 
> 时间：2013-01-21T06:17:29.267
> 
> 标签：asp.net-mvc-3, twitter

我对使用 Twitterizer 有疑问我想获取 TwitterUser 模型以从 Twitter 上的响应请求中获取用户信息，但我不知道方法。

这是我的代码：

```
public ActionResult Logon(string oauth_token, string oauth_verifier, string ReturnUrl)
    {
        if (string.IsNullOrEmpty(oauth_token) || string.IsNullOrEmpty(oauth_verifier))
        {
            UriBuilder builder = new UriBuilder(this.Request.Url);
            builder.Query = string.Concat(
                builder.Query,
                string.IsNullOrEmpty(builder.Query) ? string.Empty : "&",
                "ReturnUrl=",
                ReturnUrl);

            string token = OAuthUtility.GetRequestToken(
                ConfigurationManager.AppSettings["TwitterConsumerKey"],
                ConfigurationManager.AppSettings["TwitterConsumerSecret"],
                builder.ToString()).Token;

            //return Redirect(OAuthUtility.BuildAuthorizationUri(token, true).ToString());
            Response.Redirect(string.Format("http://twitter.com/oauth/authenticate?oauth_token={0}&force_login=true", token), true);  
        }

        var tokens = OAuthUtility.GetAccessToken(
            ConfigurationManager.AppSettings["TwitterConsumerKey"],
            ConfigurationManager.AppSettings["TwitterConsumerSecret"],
            oauth_token,
            oauth_verifier);
        OAuthTokens accessToken = new OAuthTokens();
        accessToken.AccessToken = tokens.Token;
        accessToken.AccessTokenSecret = tokens.TokenSecret;
        accessToken.ConsumerKey =  ConfigurationManager.AppSettings["TwitterConsumerKey"];
        accessToken.ConsumerSecret = ConfigurationManager.AppSettings["TwitterConsumerSecret"];
        //TwitterUser u = 

        TwitterUser myTwitterUser = .............. 
        ..............

    } 
```

我已经获得了 OAuthTokens。在“.........”之后，我不知道下一步该怎么做才能为用户获取信息。

任何人都可以帮助我。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:27:01.913

您是否尝试查看[`documentation`](http://www.twitterizer.net/)：

```
TwitterResponse<TwitterUser> myTwitterUser = TwitterUser.Show(accessToken, "twit_er_izer"); 
```

# spring - Spring MVC 绑定到相同的@RequestMapping

> ID：14433248
> 
> 赞同：1
> 
> 时间：2013-01-21T06:17:34.833
> 
> 标签：spring, jakarta-ee, spring-mvc

假设我们有这个用于登录的代码，如果凭据用于管理页面，则 RequestMapping 用于管理员，如果用于用户凭据，则用户重定向到用户面板。现在，两者的主页都反对我在下面的代码中定义的相同网址，例如：

```
http://localhost:8080/project/{username}/main 
```

我的问题是：

在Controller类中完成登录检查后，当它们具有相同的RequestMapping“main”时，我们如何将这两个方法分开？

```
@RequestMapping(value = "/login")
public String welcome(@RequestParam("j_username") String username, @RequestParam("j_password") String password, HttpSession session, Model model) throws RemoteException, NotBoundException {

    int checkAccount = uiClient.checkAdminAccount(username, password);
    if (checkAccount == 1) {
        session.setAttribute("username", username);
        return "redirect:/" + username + "/main";
    } else if (checkAccount == 0) {
        checkAccount = uiClient.checkAccount(username, password);
        if (checkAccount == 1) {
            session.setAttribute("username", username);
            return "redirect:/" + username + "/main";
        } else if (checkAccount == 0) {
            return "login";
        }
    } else {
        return "databaseError";
    }
    return "login";
}

@RequestMapping(value = "/{username}/main")
public String indexPage(@PathVariable("username") String username) {
    return "/user/userPanel";
}

@RequestMapping(value = "{username}/main")
public String adminIndexPage(@PathVariable("username") String username){
    return "/admin/adminPanel";
} 
```

我的意思是，有什么方法可以像特殊标签或我们可以为每个映射放置并在登录过程完成后将它们分开，以便管理员重定向到 adminPanel 并且用户也重定向到 userPanel 但两者都具有相同的 url：

```
http://localhost:8080/project/{username}/main 
```

？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:49:53.037

这种方式怎么样：

```
@RequestMapping(value = "/login")
public String welcome(@RequestParam("j_username") String username, @RequestParam("j_password") String password, HttpSession session, Model model) throws RemoteException, NotBoundException {

    int checkAccount = uiClient.checkAdminAccount(username, password);
    if (checkAccount == 1) {
        session.setAttribute("username", username);
        session.setAttribute("userrole", "Admin");
        return "redirect:/" + username + "/main";
    } else if (checkAccount == 0) {
        checkAccount = uiClient.checkAccount(username, password);
        if (checkAccount == 1) {
            session.setAttribute("username", username);
            session.setAttribute("userrole", "Admin");
            return "redirect:/" + username + "/main";
        } else if (checkAccount == 0) {
            return "login";
        }
    } else {
        return "databaseError";
    }
    return "login";
}

@RequestMapping(value = "/{username}/main")
public String indexPage(@PathVariable("username") String username) {
    if ("Admin".equals(session.getAttribute("userrole"))) {
        return "/admin/adminPanel";
    } else {
        return "/user/userPanel";
    }
} 
```

为简单起见，这里我没有使用 Spring Security 来检查用户角色。

# ios - 当 UIApplication 无法打开 URL 时如何显示警报？

> ID：14433250
> 
> 赞同：2
> 
> 时间：2013-01-21T06:17:42.993
> 
> 标签：ios, web, uiapplication

当网站字符串不为空且长度至少为 3 时，此方法在 Safari 中打开 url。但是当我有 supplierWebsite=@"www.heritage.com" 时，什么也没有发生。我知道 Heritage.com 不是有效的网站，因此它没有在 UIApplication 中激活。我想至少显示一个弹出窗口，告诉用户该网站不可用。有什么办法可以显示 Alertview 告诉该网站不可用。

```
- (IBAction)doWebOpen:(UIButton *)sender {

if (self.provider.supplierWebSite && [self.provider.supplierWebSite length] > 3) {
    NSString *urlString = [self.provider supplierWebSite];
    NSURL *url = [NSURL URLWithString:urlString];
    [[UIApplication sharedApplication] openURL:url];

}else {

    NSError *err = [NSError errorWithDomain:@"com.cantopenweb" code:509 andDescription:@"This supplier does not have a website."];
    [self showErrorAlert:err];
}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:20:49.087

你可以使用 canOpenURL 方法，

> [[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"你的网站"]];

该方法返回一个 BOOL，因此请检查 YES 或 NO。

如果是，则可以，否则为否。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T06:20:34.580

只需使用`canOpenURL`UIApplication[**类**](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)，例如：

```
if([[UIApplication sharedApplication] canOpenURL:url])
 {
    [[UIApplication sharedApplication] openURL:url];
 }
 else
 {
   //show alert
 } 
```

* * *

> **可以打开网址：**
> 
> **返回应用程序是否可以打开给定的 URL 资源。**
> 
> `- (BOOL)canOpenURL:(NSURL *)url`
> 
> **参数**
> 
> **网址**
> 
> ```
> A URL object that identifies a given resource. The URL’s scheme—possibly a custom scheme—identifies which application can 
> ```
> 
> 处理网址。
> 
> **返回值**
> 
> 如果没有可以接受 URL 的应用程序可用，则为 NO；否则，返回 YES。讨论
> 
> 该方法保证如果调用 openURL: 会启动另一个应用程序来处理它。它不保证完整的 URL 是有效的。可用性
> 
> ```
> Available in iOS 3.0 and later. 
> ```
> 
> 在 UIApplication.h 中声明

# codeigniter - 如何使用 Codeigniter 从最后插入的行中获取值

> ID：14433251
> 
> 赞同：6
> 
> 时间：2013-01-21T06:17:47.047
> 
> 标签：codeigniter

是否有任何 codeigniter 功能可以做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T06:22:53.060

试试这个代码：

```
$this->db->insert_id(); 
```

参考： [https ://www.codeigniter.com/user_guide/database/helpers.html](https://www.codeigniter.com/user_guide/database/helpers.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-21T10:06:01.050

没有特殊的功能。但是您可以获取刚刚插入的行的 id，然后获取它的数据：

```
$this->db->insert('table_name', $data);

$id = $this->db->insert_id();
$q = $this->db->get_where('table_name', array('id' => $id));
return $q->row(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T07:56:43.570

插入后使用 Active Record 方法。返回最后插入的 id

```
function insert($data)
{
    $this->db->insert('tablename', $data);
    return $this->db->insert_id();
} 
```

[这里](http://ellislab.com/codeigniter/user-guide/database/helpers.html)是参考

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-28T07:34:20.843

我有建议给你。当您要插入数据时，请返回您的数据数组，您可以对其进行编辑。

```
 public function set_alb_photos() {
     $data = array(
      'alp_title' => $this->input->post('alp_title'),
      'alp_file_location' => $this->input->post('alp_file_location'),
      'alp_album_id' => $this->input->get('alb_id'),
      'alp_created_at' => date("Y-m-d H:i:s"),
      'alp_updated_at' => date("Y-m-d H:i:s")
     );
     $this->db->insert('alb_photos', $data);
     return $data;
   } 
```

我希望这会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-08T23:28:51.610

这将帮助您从表中获取最后插入的行。

```
$last = $this->db->order_by('id',"desc")->limit(1)->get('tablename')->row();
    print_r($last); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-30T08:24:09.923

您可以通过以下代码获取插入的数据，

```
$query = $this->db->get_where('table1', array('id' => $id)); //get inserted data
return $query->result_array(); 
```

参考：[https ://www.codeigniter.com/user_guide/database/query_builder.html](https://www.codeigniter.com/user_guide/database/query_builder.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-21T07:10:40.220

关于什么 ：

```
$this->db->get('mytable', 1,0) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-18T14:49:32.580

仅使用 codeigniter 的活动记录尝试此操作。此代码为您提供表格的最后一行。

```
$this->db->limit(1);
$this->db->order_by('id','desc');
$query = $this->db->get('tablename');
return $query->result_array(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-28T14:09:47.333

根据选项尝试此操作并返回：

```
$data = {} //your array;
// now if your $data array contained all the values of the new row just do this
function yourFunction(){
  // insert into array into db
  $this->db->insert('table_name', $data);
  // get created rows id
  $id = $this->db->insert_id();
  // update your $data array with the new generated id and return it
  $data['id'] = $id;
  return $data;
}

// Option 2: if row has fields that auto populates (example current timestamp)
function yourFunctionAlt(){
  // insert into array into db
  $this->db->insert('table_name', $data);
  // get created rows id
  $id = $this->db->insert_id();
  // get row as a array 
  $_rowArray = $this-db->get_where('table_name',array('id'=>$id)->row_array();
  return $_rowArray;
  // or get as a object
  $_Object = $this->db->get_where('table_name',array('id'=>$id);
  return $_Object;
} 
```

# javascript - 使用 Meteor.settings 功能

> ID：14433254
> 
> 赞同：3
> 
> 时间：2013-01-21T06:18:15.893
> 
> 标签：javascript, settings, meteor

Meteor 最近从 v0.5.4 开始添加了一个全新的[Meteor.settings](http://docs.meteor.com/meteor_settings#meteor_settings)对象。并且以一种非常烦人的方式，没有正确解释，例如，在他们的文档中如何设置设置。

在我的应用程序中，我有一个名为“settings.json”的文本文件（在根目录中）：

```
{
    "initURL" : "http://localhost:60326/"
} 
```

但是当我尝试使用 启动应用程序时`meteor --settings settings.json`，出现以下错误：

```
undefined:1
∩╗┐{
^
SyntaxError: Unexpected token ∩╗┐
    at Object.parse (native)
    at Object.exports.getSettings (C:\Program Files (x86)\Meteor\app\meteor\run.
js:537:10)
    at start_server (C:\Program Files (x86)\Meteor\app\meteor\run.js:239:28)
    at exports.run.restart_server (C:\Program Files (x86)\Meteor\app\meteor\run.
js:655:21)
    at C:\Program Files (x86)\Meteor\app\meteor\run.js:726:9
    at Socket.exports.launch_mongo (C:\Program Files (x86)\Meteor\app\lib\mongo_
runner.js:187:9)
    at Socket.EventEmitter.emit (events.js:93:17)
    at Pipe.onread (net.js:391:31) 
```

有谁知道我的 Meteor 应用程序的设置有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T06:57:35.707

您的 中隐藏了字符`settings.json`，可能是由于复制粘贴。

您最好的选择是删除文件并手动编写，或者获取可以查看所有这些 un​​icode 字符并删除它们的文本编辑器。

# asp.net - asp.net vb RJS PopCalendar 控件停止工作

> ID：14433259
> 
> 赞同：1
> 
> 时间：2013-01-21T06:18:28.123
> 
> 标签：asp.net, vb.net, datepicker

我正在使用一个名为 RJS PoPCalendar 的日期选择器控件。它以前工作得很好，但我的视觉 Web Developer 2010 发生了一些奇怪的事情。这是我检查过的：

对 RJS PopCalendar 的 .dll 文件的引用仍然存在 已验证 Library2010 文件夹和 .dll 文件在我的站点的 bin 文件夹中 已验证 POPCalendar2010 文件夹在站点根目录中 已验证装配线包含在 .aspx Web 表单顶部（<%@ 注册assembly="RJS.Web.WebControl.PopCalendar.Net.2010" namespace="RJS.Web.WebControl" tagprefix="rjs" %>) 验证 POPCalendar 控件在工具箱中可见

当我将控件拖放到文本框控件旁边时，什么也没有发生，什么也没有出现。

这曾经完美地工作，我失去了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T22:51:57.757

经过一个小时左右的挣扎，我自己解决了这个问题，所以值得为别人节省时间。

如果您将文件移动到新项目中，Visual Web Developer 2010 喜欢忘记引用（我一直在各个网站上进行尝试，并在我让它们工作后将它们移动到我的实际项目中）。

要解决上述问题，我必须重新引用 .dll，将文件删除并重新添加到我的 bin 和根目录，然后将控件删除并重新添加到我的工具箱中。

希望这可以帮助某人在将来节省时间和头痛！

# linux - bsp 的驱动程序要求。bsp 是否应该包含在 spi 上运行的设备的驱动程序？

> ID：14433262
> 
> 赞同：1
> 
> 时间：2013-01-21T06:18:32.070
> 
> 标签：linux, drivers, spi, bsp

我正在为 Linux 板开发 BSP。这些板包含一个在 SPI 上运行的设备。你能告诉我 BSP 是否应该包含该设备的驱动程序，还是我应该只在 BSP 中提供 SPI 端口驱动程序？

此外，如果某些设备具有用户模式驱动程序而不是内核模式。那么这个用户模式驱动程序会成为 BSP 的一部分吗？

# iphone - 我如何解决“身份 iPhone 开发人员：我的名字（*）与我们的钥匙串中的任何有效的、未过期的证书/私钥对不匹配”

> ID：14433264
> 
> 赞同：0
> 
> 时间：2013-01-21T06:18:33.787
> 
> 标签：iphone, objective-c, ios6

我在设备中测试应用程序时遇到问题，问题是：

“身份 iPhone 开发人员：我的名字 (*) 与我们钥匙串中的任何有效的、未过期的证书/私钥对不匹配”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:04:44.490

这是证书错误。请从您的钥匙串中删除开发证书，从您的 iTunes 帐户重新下载并重新安装。还要检查您使用正确配置的天气

# php - preg_replace 移除参数变量

> ID：14433265
> 
> 赞同：0
> 
> 时间：2013-01-21T06:18:41.493
> 
> 标签：php, url, preg-replace

想要`p2`从 url 字符串中删除变量，下面是 3 种情况，如果`case 3`也删除`?`符号。

案例1：`http://www.domain.com/myscript.php?p1=xyz&p2=10&p3=ghj`
结果：`http://www.domain.com/myscript.php?p1=xyz&p3=ghj`

案例2：`http://www.domain.com/myscript.php?p2=10&p3=ghj`
结果：`http://www.domain.com/myscript.php?p3=ghj`

案例3：`http://www.domain.com/myscript.php?p2=10`
结果：`http://www.domain.com/myscript.php`

想用单个 preg_replace 表达式实现结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:36:40.863

处理 URL 值时不要使用正则表达式。将它们作为 URL 而不是纯文本处理要容易得多（也更安全）。

这可能是一种方法：

1.  先拆分url，解析查询字符串
2.  取出参数
3.  重建网址

下面的代码是这种算法的一个例子：

```
// remove $qs_key from query string of $url
// return modified url value
function clean_url_qs($url, $qs_key)
{
    // first split the url in two parts (at most)
    $parts = explode('?', $url, 2);

    // check whether query string is passed        
    if (isset($parts[1])) {
      // parse the query string into $params
      parse_str($parts[1], $params);

      // unset if $params contains $qs_key
      if (array_key_exists($qs_key, $params)) {
          // remove key
          unset($params[$qs_key]);
          // rebuild the url
          return $parts[0] . 
              (count($params) ? '?' . http_build_query($params) : '');
      }
    }
    // no change required
    return $url;
} 
```

测试代码：

```
echo clean_url('http://www.domain.com/myscript.php?p1=xyz&p2=10&p3=ghj', 'p2'), "\n";
echo clean_url('http://www.domain.com/myscript.php?p2=10&p3=ghj', 'p2'), "\n";
echo clean_url('http://www.domain.com/myscript.php?p2=10', 'p2'), "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:31:08.940

在我的一个旧项目中找到了这个（有点垃圾代码，但是......），可能会对您有所帮助：

```
$unwanted_param = 'p2';
$s = 'http://www.domain.com/myscript.php?p1=xyz&p2=10&p3=ghj';
$s = parse_url($s);
$params = explode('&', $s['query']);
$out_params = array();
foreach ($params as $key => &$param) {
    list($name, $value) = explode('=', $param);
    if ($unwanted_param == $name) {
        unset($params[$key]);
    } else {
        $out_params[$name] = $value;
    }
}

$query = '?' . http_build_query($out_params);

$result = $s['scheme'] . '://' . $s['host'] . $s['path'] . $query;

var_dump($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:54:04.263

使用 preg_replace，类似

```
$url = preg_replace('!([\?&]p2=[^&\?$]+)!i', '', $url); 
```

但是，我个人会执行以下操作

```
if (strpos($url, '?') !== false) {
    list($domain, $qstring) = explode('?', $url, 2);
    parse_str($qstring, $params);
    if (isset($params['p2'])) {
        unset($params['p2']);
    }
    $qstring = !empty($params) ? '?' . http_build_query($params) : '';
    $url = $domain . $qstring;
} 
```

# python - 运行代码不提供任何输出

> ID：14433270
> 
> 赞同：1
> 
> 时间：2013-01-21T06:19:01.550
> 
> 标签：python, function, read-eval-print-loop

我有一个简化的程序，如下所示：

```
def listAssign(lst,index,item):
    """Assigns item item to list lst at index index, returns modified list."""
    lst[index] = item
    return lst

def listInsert(lst,index,item):
    """Inserts item item to list lst at index index, returns modified list."""
    lst.insert(index.item)
    return lst

# ...

def listSurgery(lst,indices,f,*extraArgs):
    """Performs operation f on list lst at depth at indices indices, returns modified list."""
    parent = lst
    for index in indices[:-1]:
        parent = parent[index]
    parent = f(parent,indices[-1],*extraArgs)
    return listSurgery(lst,indices[:-1],listAssign,parent)

# ...

def parseStringToList(s):
    """Takes in a user-input string, and converts it into a list to be passed into parseListToExpr."""
    for c in s[:]: # Removes extra spaces from beginning of string
        if c == ' ':
            s = s[1:]
        else:
            break
    for c in s[::-1]: # Removes spaces from end of string
        if c == ' ':
            s = s[:-1]
        else:
            break
    l = [] # List to build from string; built by serially appending stuff as it comes up
    b = True # Bool for whether the parser is experiencing spaces (supposed to be True if last character processed was a space)
    t = False # Bool for whether the parser is experiencing a string of non-alphanumeric characters (supposed to be True if last character was a non-alphanumeric character)
    lvl = 0 # Keeps track of depth at which operations are supposed to be occurring
    for c in s:
        if c == ' ': # If the character is a space, do nothing, but make sure that it's documented that the last character processed was a space
            b = True
        elif c == '(' or c == '[': # If the character is an opening parenthesis, add a new level of depth to the list, by appending another list to the lowest level and incrementing lvl
            l = listSurgery(l,[-1]*(lvl+1),listInsert,[])
            lvl += 1
            if c == '[': # ] (left here for overzealous parsers) If the bracket is square, also append a comma as the first element of the appended list
                l = listSurgery(l,[-1]*(lvl+1),listInsert,',')
        elif c == ')' or c == ']': # If it's a closing parenthesis, make it stop paying attention to the list it's working on
            lvl -= 1
        elif c == ',': # If it's a comma, then append it to the list as a separate element and start a new string to append characters to
            l = listSurgery(l,[-1]*(lvl+1),lambda x,y,z:listAssign(x,y,x[y]+z),[',',''])
        elif not c.alnum(): # If it's non-alphanumeric and not any of the above, then append it to string that it's working on if it's a non-alphanumeric string
            if not t: # If the string that it's working on isn't non-alphanumeric, then finish working on that string and append a new string to work on
                l = listSurgery(l,[-1]*(lvl+1),listInsert,'')
            l = listSurgery(l,[-1]*(lvl+1),lambda x,y,z:listAssign(x,y,x[y]+z),c)
            t = True
        else: # If the character is alphanumeric, append it to the string it's working on
            assert c.isalnum()
            if b or t: # If the string it's working on isn't alphanumeric or doesn't exist, append a new string
                l = listSurgery(l,[-1]*(lvl+1),listInsert,'')
                b, t = False, False
            l = listSurgery(l,[-1]*(lvl+1),lambda x,y,z:listAssign(x,y,x[y]+z),c)
    return l

# ...

cmds = {
        'help':"List the available functions.",
        'quit':"Quit this application.",
        'exit':"Exit this application (exactly the same thing)."
        }

print "MAT (Michael's Analysis Tool), version 0.0.0"

op = '' # Declare string to use for input
while op != 'exit' and op != 'quit': # Keep a REPL unless the user types "exit" or "quit", in which case exit
    op = raw_input("> ")
    if op == 'help':
        print "The commands available in addition to free evaluation are:"
        for item in cmds:
            print ' ', item + ":", cmds[item]
    elif op == 'quit' or 'exit':
        pass
    else:
        print str(parseStringToList(op)) 
```

当我使用`help`, `quit`, or`exit`作为命令时，效果很好。但是当我给它任何其他类型的输入时，例如`1 + 1 = 2`(which should elicit `['1','+','1','=','2']`) 或`This is a sentence.`(which should elicit `['This','is','a','sentence','.']`，它不会打印任何内容，只是要求更多输入。(也就是说，它在功能上等同于该程序的最后一行替换为`continue`。）而且我不明白为什么。`parseStringToList`以非常简单的方式定义。它*至少*应该返回`[]`它返回的变量的原始值。但是它不打印任何东西。为什么？（我会明天尝试更彻底的调试，但到目前为止我还没有努力。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T06:27:09.010

你需要改变这个：

```
elif op == 'quit' or 'exit': 
```

对此

```
elif op == 'quit' or op == 'exit': 
```

# c++ - C/C++ Posix tcp/ip 网络客户端，只连接本地主机

> ID：14433271
> 
> 赞同：0
> 
> 时间：2013-01-21T06:19:02.773
> 
> 标签：c++, sockets, posix

我在 Ubuntu 12 上编写了这个简单的客户端。它是简单的 C/C++ 连接到服务器代码。它可以连接到本地主机。但我无法让它连接到外部服务器。每次我连接到不同的主机时，它实际上都会连接到“localhost”。我想这可能是我的 /etc/hosts 文件的配置方式，但我不知道。

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

#include <errno.h>
#include <netdb.h>
#include <unistd.h>
#include <errno.h>
#include <fcntl.h>
#include <time.h>

int connect(const std::string host, const std::string path) {
    const int port = 80;
    // Setup the msock
    int m_sock;
    sockaddr_in m_addr;
    memset(&m_addr, 0, sizeof(m_addr));
    m_sock = socket(AF_INET, SOCK_STREAM, 0);

    int on = 1;
    if (setsockopt(m_sock, SOL_SOCKET, SO_REUSEADDR, (const char*) &on, sizeof(on)) == -1) {
        return false;
    }

    // Connect //
    m_addr.sin_family = AF_INET;
    m_addr.sin_port = htons(port);
    int status = inet_pton(AF_INET, host.c_str(), &m_addr.sin_addr);

    cout << "Status After inet_pton: " << status << " # " << m_addr.sin_addr.s_addr << endl;
    if (errno == EAFNOSUPPORT) {
        return false;
    }
    status = ::connect(m_sock, (sockaddr *) &m_addr, sizeof(m_addr));
    if (status == -1) {
        return false;
    }
} // End of the function // 
```

在这一行：m_addr.sin_addr.s_addr

我得零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:46:09.563

您应该首先从 DNS 服务器解析您的域名的 IP 地址，然后尝试建立连接。 将给出从具有结构`gethostbyname`的域名解析的 IP 地址列表。`hostent`您可以按如下方式使用它：

```
struct hostent *hent;
hent = gethostbyname(host.c_str()); 
```

然后移到hostent给你的地址列表并测试连接，这是`hostent`结构和`gethostbyname`定义：

```
#include <netdb.h>
struct hostent *gethostbyname(const char *name);

struct hostent {
  char  *h_name;            /* official name of host */
  char **h_aliases;         /* alias list */
  int    h_addrtype;        /* host address type */
  int    h_length;          /* length of address */
  char **h_addr_list;       /* list of addresses */
} 
```

# gwt - 如何在 gwt 中管理分辨率？

> ID：14433272
> 
> 赞同：2
> 
> 时间：2013-01-21T06:19:05.317
> 
> 标签：gwt, gwt-ext

我正在 GWT 中开发一个 Web 应用程序。在基本 HTML 页面中，我使用 htlm`<table>`标签，例如`<tr>`，`<td>`并且我将表格大小设置为 990 像素，因为 gwt 中使用的面板以像素为单位（即 AbsolutePanel）。这在 1024 中可以正常工作，但在任何其他分辨率下，这会产生问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:17:43.363

你正在以错误的方式去做。gwt-ext 早就死了。

当前选择 - 纯 GWT UiBinder、纯 GWT LayoutPanel、Sencha GXT、Vaadin。

不建议使用 AbsolutePanel 构建整个屏幕。要让屏幕在多种分辨率下工作，您需要从这里开始[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels)

还要确保您了解与 LayoutPanel 和 RootLayoutPanel 相关的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:52:54.723

无论何时何地，无论分辨率如何，都可以摆脱高度宽度问题。

请考虑在“%”中使用。最好在代码中避免静态像素数。

# android - Android 中的项目列表，如 GooglePlay

> ID：14433273
> 
> 赞同：0
> 
> 时间：2013-01-21T06:19:05.263
> 
> 标签：android, android-listview, google-play

我是Android开发的初学者。我正在创建一个应用程序，我需要在其中将产品显示为列表：

*   缩略图
*   姓名
*   价格
*   评分

我想让它有点像 Google play 中的应用程序列表。有人可以指导我制作这种 UI 的起点吗？我认为这与某些事情有关，`GridView`但如果是，则不确定如何进行。谢谢。

**编辑：**我认为人们误解了我的 GooglePlay 参考。我粘贴了一张图片来展示我希望我的用户界面如何。

[http://i49.tinypic.com/2cqjqx0.png](http://i49.tinypic.com/2cqjqx0.png) （我不允许发布图片..）

我已经有了标签滑动和一切。只想知道如何创建这种类型的列表。再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:36:45.283

我认为[这](http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/)[就是](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)你需要的。查看链接。它们会对你有用。它称为自定义列表视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:44:16.147

您需要做的是创建一个`custom view`被调用`layout`的列表**Item**。

以下代码将创建您选择的列表项。根据您的要求修改代码。但是您可以从以下代码中想到。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
 >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/txtItemName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/imageView1"
    android:text="Item Name"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/txtItemPrice"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imageView1"
    android:layout_alignLeft="@+id/txtItemName"
    android:text="Item Price" />

<TextView
    android:id="@+id/txtRating"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView1"
    android:layout_alignBottom="@+id/textView1"
    android:layout_alignParentRight="true"
    android:text="Rating"
    android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

只需将上面的代码复制并粘贴到您的`layout`并切换到`Graphical Layout`. 你可以看到结果。

以下链接可帮助您如何`customized layout`在列表视图中使用。 [自](http://www.thepcwizard.in/2012/09/android-creating-custom-listview-for.html)定义列表 1和[自定义列表 2](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:45:17.510

这两种方式的 Android GridView 可以配置为水平或垂直滚动​​。

[这个](https://github.com/jess-anders/two-way-gridview)gridview 就是你要找的。

希望能帮助到你 ：）

# python-2.7 - 使用 python 客户端从 blobstore 将 csv 上传到谷歌驱动器

> ID：14433278
> 
> 赞同：2
> 
> 时间：2013-01-21T06:19:40.290
> 
> 标签：python-2.7, google-drive-api

Google drive api 确实提供了一些示例来创建和更新电子表格。

但是，由于我们有不同的 csv，我们将设计更多。我正在寻找的是一个通用的解决方案，它将获取存储在 blobstore 中的 csv 的 url 并将这些文件保存在 Google 驱动器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:52:36.623

我的解决方案是这样的，借助 drEdit 示例：

```
 def get_data(self):
    blob_reader = blobstore.BlobReader(self.__blob_key__)
    data = blob_reader.read()
    fh = io.BytesIO(data)
    return fh

  def save_file(self, dest_filename, description, mime_type):
    service = self.create_drive()
    resource = {
      'title': dest_filename,
      'description': description,
      'mimeType': mime_type,
    }
    try:
      file_data = self.get_file_data()
      resource = service.files().insert(
          body=resource,
          media_body=MediaIoBaseUpload(
              file_data,
              mime_type,
              resumable=False)
      ).execute()
    except AccessTokenRefreshError:
      pass 
```

调用 save_file：

```
 drive.save_file('testing_drive', 'testing....', 'text/csv') 
```

或者

```
drive.save_file('testing_drive.csv', 'testing....', 'text/csv') 
```

但是，此代码存在一个小问题。Google drive API 在上传时不会将此文件转换为电子表格，因此预览不起作用。要查看文件，我必须在电子表格中打开此文档，将文件转换为谷歌电子表格。我在[API 文档](https://developers.google.com/drive/v2/reference/files/insert)中看到了有关转换选项的信息。但是，在使用 RPC 调用时，我找不到任何转换文件的方法。请建议我怎样才能做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:49:29.947

我知道没有通用的解决方案，但我们实际上是在谈论 4 或 5 行 Python 来实现这一点。

DrEdit [Python](https://developers.google.com/drive/examples/python)示例将文件从 App Engine Python 保存到云端硬盘，使用 blobstore 将是一个简单的补充。

# android - Android Fragment Pager 和自定义页面指示器（由 Jake Wharton 创建的 ViewPagerIndicator）

> ID：14433281
> 
> 赞同：4
> 
> 时间：2013-01-21T06:19:51.850
> 
> 标签：android, android-fragments, android-viewpager, android-pageradapter

我正在使用[**ViewPageIndicator**](http://viewpagerindicator.com/#credits)开发带有指示器的寻呼机视图

我的代码

**活动**

```
public class Pager extends Activity{

    private MyPagerAdapter mAdapter;
    private ViewPager mPager;
    private CirclePageIndicator mIndicator;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_pager);

    mAdapter=new MyPagerAdapter(getApplicationContext());

    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    mIndicator = (CirclePageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);
} 
```

**我的页面适配器.java**

```
public class MyPagerAdapter extends PagerAdapter{

 protected static final String[] CONTENT = new String[] { "This", "Is", "A", "Test", "Demo","Sample","Example" ,
        "Application","To","Study","And","Implement","Page-Viewer","And","Page-Indicator","For","News"};

        private Context ctx;
        private int mCount = CONTENT.length;

        public MyPagerAdapter(Context ctx){
            this.ctx = ctx;
        }

        @Override
        public int getCount() {
            return mCount;
        }

        @Override
        public Object instantiateItem(View collection, int position) {
            TextView view = new TextView(ctx);
            view.setGravity(Gravity.CENTER);
            view.setTextSize(20 );
            view.setPadding(20, 20, 20, 20);
            view.setText(CONTENT[position]);
            ((ViewPager)collection).addView(view);
            return view;
        }

        @Override
        public void destroyItem(View collection, int position, Object view) {
             ((ViewPager) collection).removeView((View) view);
        }

        @Override
        public boolean isViewFromObject(View view, Object object) {
            return view == object;
        }

        @Override
        public Parcelable saveState() {
            return null;
        }

        @Override
        public void restoreState(Parcelable arg0, ClassLoader arg1) {
        }

        @Override
        public void startUpdate(View arg0) {
        }

        @Override
        public void finishUpdate(View arg0) {
        }
} 
```

我修改了**JakeWharton**创建的[**CirclePageIndicator.java**](https://github.com/JakeWharton/Android-ViewPagerIndicator) 以供我使用

```
public class CirclePageIndicator extends View implements PageIndicator {
private static final int INVALID_POINTER = -1;

private float mRadius;
private final Paint mPaintPageFill = new Paint(ANTI_ALIAS_FLAG);
private final Paint mPaintStroke = new Paint(ANTI_ALIAS_FLAG);
private final Paint mPaintFill = new Paint(ANTI_ALIAS_FLAG);
private ViewPager mViewPager;
private ViewPager.OnPageChangeListener mListener;
private int mCurrentPage;
private float mPageOffset;
private int mScrollState;
private int mOrientation;
private boolean mCentered;

private int mTouchSlop;
private float mLastMotionX = -1;
private int mActivePointerId = INVALID_POINTER;
private boolean mIsDragging;

int mCount = 0;

public CirclePageIndicator(Context context) {
    this(context, null);
}

public CirclePageIndicator(Context context, AttributeSet attrs) {
    this(context, attrs, R.attr.vpiCirclePageIndicatorStyle);
}

public CirclePageIndicator(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    if (isInEditMode()) return;

    //Load defaults from resources
    final Resources res = getResources();
    final int defaultPageColor = res.getColor(R.color.default_circle_indicator_page_color);
    final int defaultFillColor = res.getColor(R.color.default_circle_indicator_fill_color);
    final int defaultOrientation = res.getInteger(R.integer.default_circle_indicator_orientation);
    final int defaultStrokeColor = res.getColor(R.color.default_circle_indicator_stroke_color);
    final float defaultStrokeWidth = res.getDimension(R.dimen.default_circle_indicator_stroke_width);
    final float defaultRadius = res.getDimension(R.dimen.default_circle_indicator_radius);
    final boolean defaultCentered = res.getBoolean(R.bool.default_circle_indicator_centered);

    //Retrieve styles attributes
    TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.CirclePageIndicator, defStyle, 0);

    mCentered = a.getBoolean(R.styleable.CirclePageIndicator_centered, defaultCentered);
    mOrientation = a.getInt(R.styleable.CirclePageIndicator_android_orientation, defaultOrientation);
    mPaintPageFill.setStyle(Style.FILL);
    mPaintPageFill.setColor(a.getColor(R.styleable.CirclePageIndicator_pageColor, defaultPageColor));
    mPaintStroke.setStyle(Style.STROKE);
    mPaintStroke.setColor(a.getColor(R.styleable.CirclePageIndicator_strokeColor, defaultStrokeColor));
    mPaintStroke.setStrokeWidth(a.getDimension(R.styleable.CirclePageIndicator_strokeWidth, defaultStrokeWidth));
    mPaintFill.setStyle(Style.FILL);
    mPaintFill.setColor(a.getColor(R.styleable.CirclePageIndicator_fillColor, defaultFillColor));
    mRadius = a.getDimension(R.styleable.CirclePageIndicator_radius, defaultRadius);

    Drawable background = a.getDrawable(R.styleable.CirclePageIndicator_android_background);
    if (background != null) {
      setBackgroundDrawable(background);
    }

    a.recycle();

    final ViewConfiguration configuration = ViewConfiguration.get(context);
    mTouchSlop = ViewConfigurationCompat.getScaledPagingTouchSlop(configuration);
}

public void setCentered(boolean centered) {
    mCentered = centered;

     notifyDataSetChanged();

}

public boolean isCentered() {
    return mCentered;
}

public void setFillColor(int fillColor) {
    mPaintFill.setColor(fillColor);

    notifyDataSetChanged();
}

public int getFillColor() {
    return mPaintFill.getColor();
}

public void setOrientation(int orientation) {
    switch (orientation) {
        case HORIZONTAL:
        case VERTICAL:
            mOrientation = orientation;
            requestLayout();
            break;

        default:
            throw new IllegalArgumentException("Orientation must be either HORIZONTAL or VERTICAL.");
    }
}

public int getOrientation() {
    return mOrientation;
}

public void setStrokeColor(int strokeColor) {
    mPaintStroke.setColor(strokeColor);

    notifyDataSetChanged();
}

public int getStrokeColor() {
    return mPaintStroke.getColor();
}

public void setStrokeWidth(float strokeWidth) {
    mPaintStroke.setStrokeWidth(strokeWidth);

     notifyDataSetChanged();
}

public float getStrokeWidth() {
    return mPaintStroke.getStrokeWidth();
}

public void setRadius(float radius) {
    mRadius = radius;

     notifyDataSetChanged();
}

public float getRadius() {
    return mRadius;
}

boolean greaterThanFive  = false;
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    if (mViewPager == null) {
        return;
    }
    //if(!greaterThanFive){
        mCount = mViewPager.getAdapter().getCount();
 //   }

        int condition=5;
        if(mCurrentPage>4)
            condition=2;

    if (mCount == 0) {
        return;
    }

    if (mCurrentPage >= mCount) {

       setCurrentItem(mCount-1);
       return;
    }

    int longSize;
    int longPaddingBefore;
    int longPaddingAfter;
    int shortPaddingBefore;
    if (mOrientation == HORIZONTAL) {
        longSize = getWidth();
        longPaddingBefore = getPaddingLeft();
        longPaddingAfter = getPaddingRight();
        shortPaddingBefore = getPaddingTop();
    } else {
        longSize = getHeight();
        longPaddingBefore = getPaddingTop();
        longPaddingAfter = getPaddingBottom();
        shortPaddingBefore = getPaddingLeft();
    }

    final float threeRadius = mRadius * 3;
    final float shortOffset = shortPaddingBefore + mRadius;
    float longOffset = longPaddingBefore + mRadius;
    if (mCentered) {
        longOffset += ((longSize - longPaddingBefore - longPaddingAfter) / 2.0f) - ((condition * threeRadius) / 2.0f);
    }

    float dX;
    float dY;

    float pageFillRadius = mRadius;
    if (mPaintStroke.getStrokeWidth() > 0) {
        pageFillRadius -= mPaintStroke.getStrokeWidth() / 2.0f;
    }

    //Draw stroked circles
    for (int iLoop = 0; iLoop < condition; iLoop++) {
        float drawLong = longOffset + (iLoop * threeRadius);
        if (mOrientation == HORIZONTAL) {
            dX = drawLong;
            dY = shortOffset;
        } else {
            dX = shortOffset;
            dY = drawLong;
        }
        // Only paint fill if not completely transparent
        if (mPaintPageFill.getAlpha() > 0) {
            canvas.drawCircle(dX, dY, pageFillRadius, mPaintPageFill);
        }

        // Only paint stroke if a stroke width was non-zero
        if (pageFillRadius != mRadius) {
            canvas.drawCircle(dX, dY, mRadius, mPaintStroke);
        }
    }

    //Draw the filled circle according to the current scroll
    float cx= mCurrentPage* threeRadius;
    cx += mPageOffset * threeRadius;
    if (mOrientation == HORIZONTAL) {
        dX = longOffset + cx;
        dY = shortOffset;
    } else {
        dX = shortOffset;
        dY = longOffset + cx;
    }
    canvas.drawCircle(dX, dY, mRadius, mPaintFill);
}

public boolean onTouchEvent(android.view.MotionEvent ev) {
    if (super.onTouchEvent(ev)) {
        return true;
    }
    if ((mViewPager == null) || (mViewPager.getAdapter().getCount() == 0)) {
        return false;
    }

    final int action = ev.getAction() & MotionEventCompat.ACTION_MASK;
    switch (action) {
        case MotionEvent.ACTION_DOWN:
            mActivePointerId = MotionEventCompat.getPointerId(ev, 0);
            mLastMotionX = ev.getX();
            break;

        case MotionEvent.ACTION_MOVE: {
            final int activePointerIndex = MotionEventCompat.findPointerIndex(ev, mActivePointerId);
            final float x = MotionEventCompat.getX(ev, activePointerIndex);
            final float deltaX = x - mLastMotionX;

            if (!mIsDragging) {
                if (Math.abs(deltaX) > mTouchSlop) {
                    mIsDragging = true;
                }
            }

            if (mIsDragging) {
                mLastMotionX = x;
                if (mViewPager.isFakeDragging() || mViewPager.beginFakeDrag()) {
                    mViewPager.fakeDragBy(deltaX);
                }
            }

            break;
        }

        case MotionEvent.ACTION_CANCEL:
        case MotionEvent.ACTION_UP:
            if (!mIsDragging) {
                final int count = mViewPager.getAdapter().getCount();
                final int width = getWidth();
                final float halfWidth = width / 2f;
                final float sixthWidth = width / 6f;

                if ((mCurrentPage > 0) && (ev.getX() < halfWidth - sixthWidth)) {
                    if (action != MotionEvent.ACTION_CANCEL) {
                        mViewPager.setCurrentItem(mCurrentPage - 1);
                    }
                    return true;
                } else if ((mCurrentPage < count - 1) && (ev.getX() > halfWidth + sixthWidth)) {
                    if (action != MotionEvent.ACTION_CANCEL) {
                        mViewPager.setCurrentItem(mCurrentPage + 1);
                    }
                    return true;
                }
            }

            mIsDragging = false;
            mActivePointerId = INVALID_POINTER;
            if (mViewPager.isFakeDragging()) mViewPager.endFakeDrag();
            break;

        case MotionEventCompat.ACTION_POINTER_DOWN: {
            final int index = MotionEventCompat.getActionIndex(ev);
            mLastMotionX = MotionEventCompat.getX(ev, index);
            mActivePointerId = MotionEventCompat.getPointerId(ev, index);
            break;
        }

        case MotionEventCompat.ACTION_POINTER_UP:
            final int pointerIndex = MotionEventCompat.getActionIndex(ev);
            final int pointerId = MotionEventCompat.getPointerId(ev, pointerIndex);
            if (pointerId == mActivePointerId) {
                final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
                mActivePointerId = MotionEventCompat.getPointerId(ev, newPointerIndex);
            }
            mLastMotionX = MotionEventCompat.getX(ev, MotionEventCompat.findPointerIndex(ev, mActivePointerId));
            break;
    }

    return true;
}

@Override
public void setViewPager(ViewPager view) {
    if (mViewPager == view) {
        return;
    }
    if (mViewPager != null) {
        mViewPager.setOnPageChangeListener(null);
    }
    if (view.getAdapter() == null) {
        throw new IllegalStateException("ViewPager does not have adapter instance.");
    }
    mViewPager = view;
    mViewPager.setOnPageChangeListener(this);
     notifyDataSetChanged();

}

@Override
public void setViewPager(ViewPager view, int initialPosition) {
    setViewPager(view);
    setCurrentItem(initialPosition);
}

@Override
public void setCurrentItem(int item) {
    if (mViewPager == null) {
        throw new IllegalStateException("ViewPager has not been bound.");
    }

    mViewPager.setCurrentItem(item);
    mCurrentPage = item;
     notifyDataSetChanged();

}

@Override
public void notifyDataSetChanged() {
    invalidate();
}

@Override
public void onPageScrollStateChanged(int state) {
    mScrollState = state;

    if (mListener != null) {
        mListener.onPageScrollStateChanged(state);
    }
}

@Override
public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    mCurrentPage = position;
    mPageOffset = positionOffset;
     notifyDataSetChanged();

    if (mListener != null) {
        mListener.onPageScrolled(position, positionOffset, positionOffsetPixels);
    }
}

@Override
public void onPageSelected(int position) {
    /*if(position>4){
        mCount=2;
        greaterThanFive=true;
        mCurrentPage = position;

         notifyDataSetChanged();
        return;
    }*/
    if (mScrollState == ViewPager.SCROLL_STATE_IDLE) {
        mCurrentPage = position;
         notifyDataSetChanged();
    }

    if (mListener != null) {
        mListener.onPageSelected(position);
    }
}

@Override
public void setOnPageChangeListener(ViewPager.OnPageChangeListener listener) {
    mListener = listener;
}

public void onExcessPage(){

}

/*
 * (non-Javadoc)
 *
 * @see android.view.View#onMeasure(int, int)
 */
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    if (mOrientation == HORIZONTAL) {
        setMeasuredDimension(measureLong(widthMeasureSpec), measureShort(heightMeasureSpec));
    } else {
        setMeasuredDimension(measureShort(widthMeasureSpec), measureLong(heightMeasureSpec));
    }
}

/**
 * Determines the width of this view
 *
 * @param measureSpec
 *            A measureSpec packed into an int
 * @return The width of the view, honoring constraints from measureSpec
 */
private int measureLong(int measureSpec) {
    int result;
    int specMode = MeasureSpec.getMode(measureSpec);
    int specSize = MeasureSpec.getSize(measureSpec);

    if ((specMode == MeasureSpec.EXACTLY) || (mViewPager == null)) {
        //We were told how big to be
        result = specSize;
    } else {
        //Calculate the width according the views count
        final int count = mViewPager.getAdapter().getCount();
        result = (int)(getPaddingLeft() + getPaddingRight()
                + (count * 2 * mRadius) + (count - 1) * mRadius + 1);
        //Respect AT_MOST value if that was what is called for by measureSpec
        if (specMode == MeasureSpec.AT_MOST) {
            result = Math.min(result, specSize);
        }
    }
    return result;
}

/**
 * Determines the height of this view
 *
 * @param measureSpec
 *            A measureSpec packed into an int
 * @return The height of the view, honoring constraints from measureSpec
 */
private int measureShort(int measureSpec) {
    int result;
    int specMode = MeasureSpec.getMode(measureSpec);
    int specSize = MeasureSpec.getSize(measureSpec);

    if (specMode == MeasureSpec.EXACTLY) {
        //We were told how big to be
        result = specSize;
    } else {
        //Measure the height
        result = (int)(2 * mRadius + getPaddingTop() + getPaddingBottom() + 1);
        //Respect AT_MOST value if that was what is called for by measureSpec
        if (specMode == MeasureSpec.AT_MOST) {
            result = Math.min(result, specSize);
        }
    }
    return result;
}

@Override
public void onRestoreInstanceState(Parcelable state) {
    SavedState savedState = (SavedState)state;
    super.onRestoreInstanceState(savedState.getSuperState());
    mCurrentPage = savedState.currentPage;
    requestLayout();
}

@Override
public Parcelable onSaveInstanceState() {
    Parcelable superState = super.onSaveInstanceState();
    SavedState savedState = new SavedState(superState);
    savedState.currentPage = mCurrentPage;
    return savedState;
}

static class SavedState extends BaseSavedState {
    int currentPage;

    public SavedState(Parcelable superState) {
        super(superState);
    }

    private SavedState(Parcel in) {
        super(in);
        currentPage = in.readInt();
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        super.writeToParcel(dest, flags);
        dest.writeInt(currentPage);
    }

    @SuppressWarnings("UnusedDeclaration")
    public static final Parcelable.Creator<SavedState> CREATOR = new Parcelable.Creator<SavedState>() {
        @Override
        public SavedState createFromParcel(Parcel in) {
            return new SavedState(in);
        }

        @Override
        public SavedState[] newArray(int size) {
            return new SavedState[size];
        }
    };
}
} 
```

**页面指​​示器.java**

```
public interface PageIndicator extends ViewPager.OnPageChangeListener {

void setViewPager(ViewPager view);

void setViewPager(ViewPager view, int initialPosition);

void setCurrentItem(int item);

void setOnPageChangeListener(ViewPager.OnPageChangeListener listener);

void notifyDataSetChanged();
} 
```

我的**布局 XML**是

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:gravity="center_horizontal"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/btn_play"
        android:layout_width="90dp"
        android:layout_height="wrap_content"
        android:text="play" />

    <Button
        android:id="@+id/btn_pause"
        android:layout_width="90dp"
        android:layout_height="wrap_content"
        android:text="pause" />

    <Button
        android:id="@+id/btn_stop"
        android:layout_width="90dp"
        android:layout_height="wrap_content"
        android:text="stop" />
</LinearLayout>

<SeekBar
    android:id="@+id/seekBar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="3dp" />

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    />

    <com.example.demopager.CirclePageIndicator
        android:id="@+id/indicator"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="10dip" />

 </LinearLayout> 
```

在这里您可以看到我的寻呼机中有超过 10 页。当我到达第 6 页时，我想要将页面指示器重绘为 2 个点而不进行选择。

对于前 5 个页面更改，它应该是这样的

![在此处输入图像描述](../Images/0b83e8875aa7e567882b75461a71adcc.png)

当我移动到下一页（**第 >5 页**）后，我想避免选择指标并只显示两个指标

![在此处输入图像描述](../Images/5ed51353fb14dd4ac2b03751d752072d.png)

希望你明白我的需要（我的英语不是那么好）..

所以请建议我如何做到这一点

礼貌：**Patrik Åkerfeldt & Jake Wharton**

# iphone - 本地化动态 NSString

> ID：14433292
> 
> 赞同：0
> 
> 时间：2013-01-21T06:20:36.717
> 
> 标签：iphone, ios, objective-c, nslocalizedstring

通过许多关于 NSLocalizedString 的示例，我发现我们需要在 Localized.string 文件中为您想要本地化的任何语言预先定义所有字符串。但是，是否可以本地化动态字符串。我的想法是，我在 UILabel 中显示了一些在 Web 请求后获得的文本。这意味着字符串现在本质上是动态的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:44:00.087

在 Localizable.strings 中声明

```
"SAMPLE_LOCALIZE_STRING" = "This is sample dynamic localize string for %@."; 
```

像这样使用它

```
NSString *dynamicStr = @"Test";
label.Text = [NSString stringWithFormat:NSLocalizedString(@"SAMPLE_LOCALIZE_STRING", nil), dynamicStr]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:29:30.270

```
[NSString stringWithFormat:NSLocalizedString(@"Table View Cell Row %d", @""), indexpath.row]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T06:29:30.707

如果这些字符串是固定的（我的意思是选项数量有限），则将它们预先存储在本地化的字符串文件中。

如果没有，我建议在您的请求中添加一个参数来指示语言，然后服务器将返回该语言的字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T06:32:02.673

我处理这种情况如下，

在请求中包含语言。例如：`http://yourIp/language/notesandcondition`

Web 服务应设计为处理不同的语言。

# c# - 当 DataColumn 为 AllowDBNull 且默认值为“0”时，将插入什么值？

> ID：14433295
> 
> 赞同：1
> 
> 时间：2013-01-21T06:20:46.013
> 
> 标签：c#, sql-server-2008, dataset, sqldataadapter

在将记录插入 DB 时，我遇到了数据集的问题。我有一个表**地址**，其中***phno (AllowNulls=False,Defaultvalue='0')***和***mbno(AllowNulls=True,Defaultvalue='0')*** 。在插入记录时当我没有向两列提供任何输入时，通过数据集进入数据库 phno 采用默认值（'0'）并且 mbno 采用“Null”。我想当没有输入时两者都必须采用默认值。

我不知道为什么会这样。我写过这样的代码

```
 SqlConnection con = new SqlConnection(connStr);
    DataSet ds = new DataSet();
    DataRow dr;
    SqlCommand cmd = new SqlCommand("select * from address",con);
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    SqlCommandBuilder cmdBuilder;
    da.FillSchema (ds,SchemaType.Source );
    da.Fill(ds, "address");

    dr = ds.Tables["address"].NewRow();
    dr["sname"] = "tomy";
    dr["fname"] = "peter";

    ds.Tables["address"].Rows.Add(dr);

    cmdBuilder = new SqlCommandBuilder(da);
    da.Update(ds, "address"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:54:41.930

在此[msdn 参考页面](http://msdn.microsoft.com/en-us/library/ms173565%28v=sql.110%29.aspx "创建默认")的备注部分中，解释了在哪些情况下将插入什么值。
由于`AllowNulls = true`在您的 DataSet 上，它可能会`null`向数据库提交 a ，这将使数据库插入一个`null`. 如果要插入默认值，请`AllowNulls`从插入语句中删除或显式删除参数（在这种情况下，您必须编写自己的 InsertCommand）。

顺便说一句，你想通过 AllowNull 和 Default 的组合来归档什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:53:39.030

好吧，如果您在列中允许 Null，那么它当然会更新为 Null 而不是默认值。因此，要么将列更改为 Allow nulls=false，要么从代码中传递默认值。

# iphone - 后台更新数据库有问题

> ID：14433299
> 
> 赞同：0
> 
> 时间：2013-01-21T06:21:04.840
> 
> 标签：iphone, objective-c

从服务器下载数据后，我必须将一些数据存储到数据库中，我已经成功下载了数据，但是当我将其更新到 sqlite 数据库时需要时间。在这种情况下，如果用户将应用程序保持在后台，并且有时用户将应用程序带回前台，那么几分钟后它就会崩溃。

当用户将应用程序带回前台时，加载用户离开它的同一个屏幕需要很长时间，并且在屏幕出现之前应用程序崩溃了。

请帮助我......我怎样才能让这个过程在后台和前台运行而没有任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:57:17.593

尝试这个：

```
[self performSelectorInBackground:@selector(dataBaseUpdateMethod:)
                       withObject:dictForUpdatingTheDatabase]; 
```

其中，dataBaseUpdateMethod 将是更新数据库的方法，而 dictForUpdatingTheDatabase 是 NSDictionary 对象（或者说任何其他任何类型的对象）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:00:49.250

用这个：

```
[self performSelectorInBackground:@selector(updateDB:) withObject:dictionary]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:51:20.837

在后台线程中更新您的 sqlite 数据库（使用`performSelectorInBackground`）。

*如果您在主线程中更新它，那么当用户尝试在前台应用程序时，应用程序主线程正忙于完成您的更新数据库任务并且无法加载应用程序并导致崩溃。*

# c++ - 字符数组和 printf 使程序变慢

> ID：14433300
> 
> 赞同：-2
> 
> 时间：2013-01-21T06:21:10.723
> 
> 标签：c++

（嗯，我的英语不好）:)

我的朋友现在正在学习 C++，他发现了一个我无法解释原因的问题。

第一个代码，运行时间超过 2000 毫秒

```
#include <cstdlib>
#include <cstdio> 
#include <cstring>

using namespace std;

int ans[2000000];
char a[2000000];

int main()
{
    scanf("%s\n",a);
    int l=1,r=strlen(a);
    for (int i=0;i<strlen(a);i++) 
        if (a[i]=='l')
            ans[r--] = i+1;
        else
            ans[l++] = i+1;
    for (int i=1;i<=strlen(a);i++)
        printf("%d\n",ans[i]);
    return 0;
} 
```

第二个代码，它运行465MS

```
#include <cstdlib>
#include <cstdio>
#include <cstring>

using namespace std;

int ans[2000000];
char a[2000000];
int size;

int main()
{
    scanf("%s",a);
    int l=1,r=strlen(a);
    size = r;
    for (int i=0;i<strlen(a);i++) 
        if (a[i]=='l') ans[r--]=i+1;else ans[l++]=i+1;
    for (int i=1;i<=size;i++)
        printf("%d\n",ans[i]);
    return 0;
} 
```

第三个代码，运行时间超过2000MS

```
#include <cstdlib>
#include <cstdio>
#include <cstring>

using namespace std;

int ans[2000000];
char a[2000000];
int size;

int main()
{
    scanf("%s",a);
    int l=1,r=strlen(a);
    size = r;
    for (int i=0;i<size;i++) 
        if (a[i]=='l') ans[r--]=i+1;else ans[l++]=i+1;
    for (int i=1;i<=strlen(a);i++)
        printf("%d\n",ans[i]);
    return 0;
} 
```

最后的代码，它运行 515 毫秒

```
#include <cstdlib>
#include <cstdio>
#include <cstring>
#include <iostream>
#include <string>

using namespace std;

int ans[2000000];
string a;

int main()
{
cin >>a;
    int l=1,r=a.size();
    for (int i=0;i<a.size();i++) 
        if (a[i]=='l') ans[r--]=i+1;else ans[l++]=i+1;
    for (int i=1;i<=a.size();i++)
        printf("%d\n",ans[i]);
    return 0;
} 
```

当输入字符串大小为 10^5 时

所以，原因是关于第二个 for 循环。

我的问题是为什么“strlen”函数和for循环中的打印会使代码这么慢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:24:07.740

当您在循环中使用该`strlen`函数时，每次都必须通过循环执行该函数。这是一个额外的函数调用，它必须遍历整个字符串才能找到它的长度。

将长度缓存在`size`, 意味着每次循环都不必重做。

所以，没有错误。这是预期的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:24:40.627

`strlen`通过在循环条件中写入——一个有*200 万*次迭代的循环——你正在扫描一个 2MB 的字符串 200 万次。当然，这需要一些时间！

当您只预先计算一次字符串长度时，这种延迟就会消失。

此外，您可能会发现在任何情况下将 2MB 的文本流式传输到控制台都会明显“慢”。

# java - 我的 Swing 应用程序有什么问题？

> ID：14433302
> 
> 赞同：1
> 
> 时间：2013-01-21T06:21:14.973
> 
> 标签：java, image, swing, awt

**2013 年 2 月 2 日编辑**

在您的一些答案和我找到的一个简单的 Swing 应用程序指南的帮助下，我能够取得一点进步，我现在将它们全部放在一个类中。但是，我仍然无法关闭它，我不得不制作一个按钮来完成它，因为不得不拉起任务管理器真的很烦人。工具提示也不起作用。我不知道这是否重要，但我正在 Eclipse 中进行。

```
import javax.swing.SwingUtilities;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JButton;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class Thing extends JFrame
{
    private static final long serialVersionUID = 1L;

    public Thing()
    {
        setTitle("Thing");
        setSize(1024, 768);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);

        JPanel panel = new JPanel();
        getContentPane().add(panel);
        panel.setLayout(null);
        panel.setToolTipText("A panel container");

        JButton quit = new JButton("Quit");
        quit.setBounds(50, 60, 80, 30);
        quit.setToolTipText("A button component");
        quit.addActionListener(new ActionListener() 
        {
            public void actionPerformed(ActionEvent event)
            {
                System.exit(0);
            }
        });
        panel.add(quit);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                Thing thing = new Thing();
                thing.setVisible(true);
            }
        });
    }
} 
```

这是我尝试用 X 关闭它时给出的错误。（关闭按钮可以正常工作）

```
java.lang.NoClassDefFoundError: sun/awt/TimedWindowEvent
    at sun.awt.windows.WToolkit.eventLoop(Native Method)
    at sun.awt.windows.WToolkit.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:24:19.860

> 由于某种原因，我无法关闭它，必须使用任务管理器。

用于`SwingUtilies.invokeLater()`创建 GUI。

[http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T09:42:01.657

`Toolkit.getDefaultToolkit().getImage("image.jpg")`可能使用后台加载程序从主绘制线程（或事件调度线程，AKA EDT）加载图像。

这基本上意味着，该方法将立即返回，但图像实际上并没有加载。

这是为低容量带宽系统完成的（在过去的日子里），以防止系统在下载并加载到内存中的图像时停止。现在，这已不再那么令人担忧了。

相反，在您的构造函数中`Title`应该预加载图像......

```
private BufferedImage background;
public Title() throws IOException {        
    background = ImageIO.read(new File("image.jpg"));
} 
```

在你的`paintComponent`方法中......

```
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    if (background != null) {
        g.drawImage(background, 0, 0, this);
    }
} 
```

您当前加载图像的方法的其他问题涉及它如何处理错误。您当前的方法往往会默默地消耗错误，并且很难确定实际出了什么问题。

您可以查看[JButton only show up on mouseover](https://stackoverflow.com/questions/14431251/jbutton-only-show-up-on-mouseover/14431376#14431376)以获得更多完整示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:53:43.360

我不确定您是否解决了问题，但我遇到了类似的问题：对于我的应用程序，我扩展了 JFrame，但无法使用任何 setDefaultCloseOperation(...) 关闭或隐藏它。在最小化、恢复或最大化框架时，我遇到了与您在上面显示的相同的错误。
**我修复了它，**将 jdk 和 jre 更新到**最新的 Java 1.7**并使用它。**在 Eclipse 中，如果在 64 位系统上工作**，请转到`Window > Preferences > Java > Installed JREs`并选择您最新的 Java ，最好也使用 64 位 Java 。在子菜单中选择左侧的 Java 1.7 和右侧的兼容 Java 1.7 64 位 JRE。 我不确定到底是什么问题，但我猜 Java 64 位应用程序和 32 位运行时环境之间可能存在一些不兼容。**`> Execution Environment`**

# jquery - Jquery 提交到 iframe 在 IE9 中不起作用

> ID：14433307
> 
> 赞同：2
> 
> 时间：2013-01-21T06:21:27.243
> 
> 标签：jquery, iframe, internet-explorer-9

我的 Jquery 脚本最近停止在 IE9 中工作。我有一个联系表单，可以通过提交到隐藏的 iframe 来使用 Jquery 上传文件。该脚本适用于 FF、Chrome、IE10，并且曾经适用于 IE9（尚未在 8 或 7 中测试过）。我的 iframe 提交功能如下。我在 IE 中收到的错误消息是“未定义”。我在 IE9 浏览器模式下使用 IE10 在 Windows 8 上。我知道这里有很多类似的问题，但没有一个暗示可行的解决方案。有人能告诉我我需要改变什么来解决这个问题吗？谢谢！

编辑：我发现 Jquery load() 不适用于 iframe 的 IE。

```
function mcIframeSubmit(){
    // remove iframe if exists
    $('#mcHiddenIframe').remove();

    // change target attribute on form
    mcForm.attr('target', 'mcHiddenIframe');

    // create and add iframe to page
    $('<iframe />', {
        name: 'mcHiddenIframe',
        id: 'mcHiddenIframe',
        style: 'display:none'
    }).appendTo('body');

    // on response from php file
    $('#mcHiddenIframe').load(function(){
        var mcIframeResponse = $(this).contents().find('.mc1').html();
        var mcIframeError = $(this).contents().find('.mc2').html();

        // reset form
        mcResetForm();

        // hide loading image
        $(mcLoading).hide();

        // scroll to top
        $(mcWrapElement).stop().animate({scrollTop: mcForm.offset().top -60},'slow');

        // display response message
        if (mcIframeError == true) {
            mcResponse(mcIframeResponse, true);
        } else {
            mcResponse(mcIframeResponse, true);

            // redirect on success?
            mcSuccessRedirect();
        }

        // stop iframe load
        $(this).unbind('load');

        // remove form target attribute
        mcForm.removeAttr('target');

        // refresh captcha image
        mcReloadRecaptcha();
    });
} 
```

# nginx - 如何在 nginx 配置文件中定义一个全局变量

> ID：14433309
> 
> 赞同：50
> 
> 时间：2013-01-21T06:21:33.253
> 
> 标签：nginx

如何在 nginx conf 文件中定义一个全局变量，在 http 块中定义一个全局变量，下面的所有服务器和位置都可以使用它。

```
http{
      some confs
      ...
      //define a global var mabe like
      set APP_ROOT /home/admin
      // and it can be use in all servers and locations below, like
      server {
        root $APP_ROOT/test1
      }

      server {
        root $APP_ROOT/test2
      }
  } 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-01-21T21:12:13.133

你可以做一个小技巧。如果必须可以从一个`server`块中的每个块访问此值，`http`则可以使用`map`指令。这将如何运作？
该`map`指令允许您在块中的任何位置使用变量，该变量的`http`值将在某个映射键上计算。万能的例子：

```
http {

  ...

  /* 
     value for your $my_everywhere_used_variable will be calculated
     each time when you use it and it will be based on the value of $query_string.
  */
  map $query_string $my_everywhere_used_variable {

    /* 
       if the actual value of $query_string exactly match this below then 
       $my_everywhere_used_variable will have a value of 3
    */
    /x=1&y=2&opr=plus     3;

    /* 
       if the actual value of $query_string exactly match this below then
       $my_everywhere_used_variable will have a value of 4
    */
    /x=1&y=4&opr=multi    4;

  /*
    it needs to be said that $my_everywhere_used_variable's value is calculated each
    time you use it. When you use it as pattern in a map directive (here we used the
    $query_string variable) some variable which will occasionally change 
    (for example $args) you can get more flexible values based on specific conditions
  */
  }

  // now in server you can use this variable as you want, for example:

  server {

    location / {
      rewrite .* /location_number/$my_everywhere_used_variable;
      /* 
         the value to set here as $my_everywhere_used_variable will be
         calculated from the map directive based on $query_string value
      */
    }
  }
} 
```

那么现在，这对你意味着什么？您可以使用该`map`指令通过这个简单的技巧为所有`server`块设置全局变量。您可以使用`default`关键字为您的*地图值设置默认值*。就像这个简单的例子一样：

```
map $host $my_variable {
  default lalalala;
} 
```

在这个例子中，我们计算`$my_variable`on 的`$host`值，但实际上它并不重要，`$host`因为我们总是将*lalalala*默认设置为我们的变量的值，并且没有其他选项。现在在您的代码中的任何地方，当您`$my_variable`以与所有其他可用变量相同的方式使用时（例如使用`set`指令创建），您将获得*lalalala的值*

为什么这比简单地使用`set`指令更好？因为`set`指令，正如文档所说，[nginx set 指令](http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#set)只能在`server, location and if`块内访问，所以它不能用于为多个`server`块创建全局变量。

此处提供有关`map`指令的文档：[map 指令](http://nginx.org/en/docs/http/ngx_http_map_module.html#map)

# mysql - 如何使用php发送多封电子邮件

> ID：14433319
> 
> 赞同：0
> 
> 时间：2013-01-21T06:22:30.923
> 
> 标签：mysql, php

我有一个按钮，当按下它时，它将通过电子邮件发送数据库中电子邮件的更新。

这是我的代码。我也从论坛上得到了这个，但我不知道它没有在数据库中收到电子邮件是怎么回事：

```
$form_action = $_POST['form_action'];
if ($form_action == 'REGISTER') {

//send to your self
$to ="admin@admin.com";

$subject = 'System Email';

// message
$message = "<html>".
"<head>".
" <title>System Email</title>".
"</head>".
"<body>".
"message here!".
"</body>".
"</html>";

//get email list

//open database connection
$username = "root";
$password = ""; //input your password here.
$database = "dbase";
//connect to database
$link=mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die("<b>Unable to specified database</b>");

$query="SELECT email_address FROM db_other_details";
$result=mysql_query($query) or die('Error, query failed');
mysql_close($link);

$row=1;
$numrows=mysql_num_rows($result);
$bccfield="Bcc: ". mysql_result($result,0,"email_address");
while($row<$numrows)
{
$email=mysql_result($result,$row,"email_address");
$bccfield .= "," . $email; //seperate by comma 
$row++;
}
$bccfield .= "\r\n";

// To send HTML mail, the Content-type header must be set
$headers = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= $bccfield;

$headers .= 'From: System <admin@admin.com>' . "\r\n";

// Mail it
mail($to, $subject, $message,$headers);

 if (mail($to,$subject,$message,$headers)) {
   header("Location: ".WEBSITE_URL."email-all.html?result=success");
} else {
    header("Location: ".WEBSITE_URL."email-all.html?result=failed");
}
}

switch (trim($_GET['result'])) {
    case "failed":
        $sendmail_result    = "failed";
        $form_message       = "Cannot send email to " . $numrows . "registrants at this time. Please try again later.";
        break;
    case "success":
        $sendmail_result    = "success";
        $form_message       = "Email sent to" . $numrows ." registrants.";
} 
```

关于如何做到这一点的任何建议？我在这里用同样的问题检查了其他一些主题，但没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:44:47.597

您应该尝试以下替代方案。

[http://swiftmailer.org/](http://swiftmailer.org/)

[http://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:52:09.523

1) 使用 PDO。

2) 确保您有关于 php.ini 的错误消息。

3) var_dump / print_r 你的变量& GET 请求来查看数据是否可用。

4) 检查 mysql 错误日志是否有潜在的查询错误。

5) 在使用 php::mail() 函数发送数据之前，对您的数据进行 UTF-8 编码。

# regex - 关于 \d

> ID：14433320
> 
> 赞同：1
> 
> 时间：2013-01-21T06:22:32.703
> 
> 标签：regex

在一个教程中，有这样的文字：

Windows 1.03 和 Windows 2.0 分别于 1985 年和 1987 年首次发布。Windows 95 和 Windows 98 是继任者。然后出现了Windows 2000 和Windows Xp。Windows Vista 是该系列的最新版本。

它用于`Windows [\d.]+\b` 匹配，但为什么结果只是

```
Windows 1.03  
Windows 2.0   
Windows 95   
Windows 98   
Windows 2000 
```

我想知道什么`[\d.]`意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:34:40.333

`\d`表示任何数字。So与任何数字或句`[\d.]`点相同，`[0-9.]`并且将匹配任何数字或句点。

请注意，`.`通常表示“除`\n`”之外的任何内容，但在字符类 ( `[]`) 中，它仅表示实际的句点字符。

字符类中唯一的特殊字符是*：*

*   `^`开头，意思是“不是这些字符”
*   `]`标记结束（除非它先出现）
*   `-`标记一个范围（除非它是第一个或最后一个）
*   `\x`对于转义序列（尽管这取决于特定的引擎）
*   `[:foo:]`对于 POSIX 字符类（这又取决于引擎）

其他任何东西都只是一个普通字符。

# java - 如何在小程序中为俄罗斯方块游戏解决图像

> ID：14433321
> 
> 赞同：0
> 
> 时间：2013-01-21T06:22:36.290
> 
> 标签：java, applet, awt, event-dispatch-thread, tetris

我使用小程序开发俄罗斯方块游戏。我生成了随机形状并使其移动。但我不知道如何让它在底部安定下来。一旦到达屏幕的末端，我的形状就会消失。请在这方面帮助我。这是我的代码。

```
import java.applet.Applet;
import java.awt.*;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JFrame;
import javax.swing.JLabel;

public class TetrisGame
{
    public static void main (String argsp[])
    {
        JFrame frame = new JFrame("Tetris");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final AppletClass applet = new AppletClass();
        frame.getContentPane().add(applet);
        applet.init();
        Thread t = new Thread(new Runnable()
        {

            @Override
            public void run() 
            {
                while(true)
                {
                    try 
                    {
                        Thread.sleep(1000);
                        applet.repaint();
                    }
                    catch (InterruptedException e) 
                    {
                        e.printStackTrace();
                    }               
                }
            }

        });
        t.start();

        frame.setBounds(10,10,410,610);
        frame.setVisible(true);
    }
}

class AppletClass extends Applet implements KeyListener
{

    private static final long serialVersionUID = 1L;
    static int xpos = 190;
    static int ypos =0;
    static int random1;
    static int reached_end=1;

    public void init()
    {
             System.out.println("aaa");
        setFocusable(true);
        requestFocus();
        addKeyListener(this);

    }
    public void paint (Graphics g)
    {

        generateRandomShapes(g);
    }

    public void generateRandomShapes (Graphics g)
    {

        int i=0;
        int x[] = new int[4];
        int y[] = new int[4];

        if(reached_end==1)
        {
            random1=(int)Math.floor(Math.random()*100);
            ypos=0;
        }

        x[0]=xpos;
        ypos =ypos+30;
        y[0]=ypos;

        if(ypos>420)
        {
            reached_end=1;
            ypos=0;
        }
        else
            reached_end=0;

        switch(random1%7)
        {
                case 0:
                    //straight line
                    for(i = 0;i<3;i++)
                    {
                        x[i+1]=x[i];
                        y[i+1]=y[i]+30;
                    }
                    break;
                case 1:
                    //L shape
                    for(i = 0;i<2;i++)
                    {
                        x[i+1]=x[i];
                        y[i+1]=y[i]+30;
                    }
                    x[i+1]=x[i]+30;
                    y[i+1]=y[i];
                    break;
                case 2:
                    //reverse L shape
                    for(i = 0;i<2;i++)
                    {
                        x[i+1]=x[i];
                        y[i+1]=y[i]+30;
                    }
                    x[i+1]=x[i]-30;
                    y[i+1]=y[i];
                    break;
                case 3:
                    //square shape
                    i=0;
                        x[i+1]=x[i];
                        y[i+1]=y[i]+30;
                    i++;
                        x[i+1]=x[i]+30;
                        y[i+1]=y[i];
                    i++;
                        x[i+1]=x[i];
                        y[i+1]=y[i]-30;
                    break;
                case 4:
                    //Inverse T shape
                    x[i+1]=x[i]-30;
                    y[i+1]=y[i]+30;
                    for(i = 1;i<3;i++)
                    {
                        x[i+1]=x[i]+30;
                        y[i+1]=y[i];
                    }
                    break;
                case 5:
                    //S shape
                    x[i+1]=x[i]-30;
                    y[i+1]=y[i]+30;
                    i++;
                    x[i+1]=x[i]+30;
                    y[i+1]=y[i];
                    i++;
                    x[i+1]=x[i]+30;
                    y[i+1]=y[i]-30;
                    break;
                case 6:
                    //Z shape
                    x[i+1]=x[i]+30;
                    y[i+1]=y[i];
                    i++;
                    x[i+1]=x[i];
                    y[i+1]=y[i]+30;
                    i++;
                    x[i+1]=x[i]+30;
                    y[i+1]=y[i];
                    break;

        }
        g.setColor(Color.BLACK);
        for(i=0;i<4;i++)
        {
            g.fillRect(x[i], y[i], 30, 30);
        }

    }

    public void keyReleased(KeyEvent e){;}
     public void keyTyped(KeyEvent e){;}

    public void keyPressed(KeyEvent e) 
    {
        System.out.println("Kkk "+e.getKeyCode());
        if(e.getKeyCode() == KeyEvent.VK_LEFT)
     {
        if(xpos>=30)
        {
            xpos=xpos-30;
        }
        System.out.println("xpos is :" + xpos);
     }
     if(e.getKeyCode() == KeyEvent.VK_RIGHT)
     { 
         xpos=xpos+30;
     }

     if(e.getKeyCode() == KeyEvent.VK_DOWN || e.getKeyCode() == KeyEvent.VK_SPACE)
     {
         ypos=420;
     }
 }
} 
```

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:28:10.757

您的代码仅绘制一个块。您必须存储所有生成块的坐标并在每个游戏帧重绘它们。

# html - 绘制矩形形状以将图像拖放到 html5 画布

> ID：14433322
> 
> 赞同：0
> 
> 时间：2013-01-21T06:22:38.487
> 
> 标签：html, drag-and-drop, html5-canvas

如果我拖动一个名为矩形的图像，我想绘制一个形状（比如说矩形）。如果它是一个圆形图像，那么绘制的图像应该是一个圆形。我怎样才能做到这一点......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:26:52.397

不确定这是否有帮助，但我有一个项目，如果你点击一个矩形的图像，你可以画一个矩形，点击一个椭圆，然后你可以画一个椭圆。我的形状存储为对象，然后使用 Canvas 进行绘制。

我的项目在[http://canvimation.github.com/](http://canvimation.github.com/)

我的项目的源代码位于[https://github.com/canvimation/canvimation.github.com](https://github.com/canvimation/canvimation.github.com)

master 分支是当前的工作代码。欢迎您使用任何代码或分叉项目。

# ios - 在 iPhone 上切换 WIFI 和 GPRS 通知 /

> ID：14433326
> 
> 赞同：2
> 
> 时间：2013-01-21T06:22:57.630
> 
> 标签：ios

是否有任何默认通知或机制可以通知设备已从 WIFI 切换到 GPRS，反之亦然（iPhone + iPad）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:47:37.893

NO 没有可用于此的默认通知或机制。
但是您可以通过使用这两种方法中的任何一种来轻松地做到这一点。

1.  使用[苹果可达性](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)类。

2.  使用 tonymillion[的 Reachability](https://github.com/tonymillion/Reachability/blob/master/iOSReachabilityTestARC/iOSReachabilityTestARC/TMViewController.m) ARC 支持的类。

这个 SO 答案将指导[如何检查 iPhone SDK 上的活动 Internet 连接？](https://stackoverflow.com/questions/1083701/how-to-check-for-an-active-internet-connection-on-iphone-sdk?answertab=active#tab-top)

在此参见第 8 点，他展示了如何区分网络类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:09:11.860

如果 Reachability 对您不起作用，您可以使用 AFNetworking 检查您的 wifi 连接

[AF网络](https://github.com/AFNetworking/AFNetworking)

# php - 如何将 mssql 中的数据放入列表框中？PHP

> ID：14433327
> 
> 赞同：0
> 
> 时间：2013-01-21T06:22:57.857
> 
> 标签：php, html, sql-server-2008

```
if (!$conn)
  {exit("Connection Failed: " . $conn);}

   $sql_exp = "select * from dbo.PC inner join dbo.FA_PC on dbo.PC.PCID = dbo.FA_PC.PCID WHERE UserID is NOT NULL order by dbo.fa_pc.PCID"; 
   $sql_exp1= "select * from dbo.users inner join dbo.FA_PC on dbo.users.UserID = dbo.FA_PC.UserID order by dbo.fa_pc.PCID";
   $sql_exp2 = "SELECT * FROM dbo.FA_PC WHERE FA_TypeID is NOT NULL ORDER BY PCID"; 
   $rs = $conn->Execute($sql_exp);
    $rs1 = $conn->Execute($sql_exp1);
   $rs2 = $conn->Execute($sql_exp2);
   echo "<table border='1' cellpadding='1' cellspacing='0' id='rounded-corner'><tr><th>Desktop Number</th><th>Employee</th><th><p align=left>Fixed Asset Accountability</p></th></tr>";
   while (!$rs->EOF) {
       set_time_limit(0);
       echo "<td>CP # <br>".$rs->Fields("PC_Number")."</td>";   
       echo "<td>".$rs1->Fields("EmployeeName")."</td>";    
       echo "<td>".$rs2->Fields("FA_TypeID")."</td><tr>";   

      $rs->MoveNext();
      $rs1->MoveNext();
   }
   echo "</table>";   
   $rs->Close();
       ?> 
```

我如何将 $rs->Fields("PC_Number") 放入将提交到新表单的列表框中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:31:21.020

如果`$rs->Fields("PC_Number")`不是数组，则可以使用它。如果它是数组，则必须使用循环语句...这将为您提供一个仅包含一个选项的列表框。

```
<select>
   <option value="1"><?php echo $rs->Fields("PC_Number");?></option>
</select> 
```

# php - 为什么在电子邮件中打印 html 代码接收 PHP 发送？

> ID：14433328
> 
> 赞同：0
> 
> 时间：2013-01-21T06:22:58.730
> 
> 标签：php, mysql

我正在为`Php`mailer cron 工作编写代码。电子邮件正在发送和接收，但为什么我`HTML`在电子邮件中收到代码。而不是`HTML`模板。

我还使用了正确的电子邮件标题，并测试了其他用户的电子邮件帐户。`HTML`但在电子邮件中打印代码也有同样的问题。

我也在**`<html><body><h2>Hello</h2></body></html>`**消息中使用而不是模板代码。`<html><body><h2>Hello</h2></body></html>`但在电子邮件接收中打印同样的问题。

**php代码**

```
 //database connection
        require_once("include/config.inc.php");
        require_once("include/functions.inc.php");

        //init function 
        mailerCrone();

        //defined functions
        function mailerCrone() {

            $site_admin  = 'myemail@gmail.com';
            $headers = "MIME-Version: 1.0" . "\r\n";
            $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
            $headers = "From: " . $site_admin . "\r\n";
            $headers .= "Reply-To: ". $site_admin . "\r\n";

            $currentdate =  date('Y-m-d H:i:s');

            //get data to send mails 
            $getDataTomail = mysql_query("SELECT * FROM sendmails where status = 0 ORDER BY id ASC limit 0,10");

            while($resDataTomail = mysql_fetch_array($getDataTomail)) {

                $templateId = $resDataTomail['templ_id'];   
                $dataPreparedId = $resDataTomail['id'];     

                //get the template data
                $getTemplate = mysql_query("SELECT * FROM templates where id  = $templateId");
                $resTemplate = mysql_fetch_array($getTemplate);
                echo $msg = '<html><body>'.$resTemplate['templ_content'].'</body></html>';
                //mail($to, $subject, $message, $headers);
                $mailResponce = mail($resDataTomail['subs_email'], $resTemplate['templ_name'], $msg, $headers);

                if($mailResponce == '1') { 
                    //update status of selected data after send mail
                    $updateSendMailData = mysql_query("UPDATE sendmails SET status = '1' WHERE id = $dataPreparedId") or die(mysql_error());

                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:48:55.543

改变这个：
$headers = "From: " 。$site_admin 。"\r\n";

为此：
$headers .= "From:" 。$site_admin 。"\r\n";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:52:15.657

我建议不要使用`mail()`函数，而是尝试使用[phpMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)，但是可以确定的一种好方法是将标题更改为：

```
$to = 'bob@example.com';
$subject = 'Website Change Reqest';
$headers = "From: " . strip_tags($_POST['req-email']) . "\r\n";
$headers .= "Reply-To: ". strip_tags($_POST['req-email']) . "\r\n";
$headers .= "CC: susan@example.com\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

通过[CSS 技巧](http://css-tricks.com/sending-nice-html-email-with-php/)

# php - php中的在线离线和离线同步

> ID：14433331
> 
> 赞同：0
> 
> 时间：2013-01-21T06:23:03.763
> 
> 标签：php, tags

我想在我的 php 页面中创建一个按钮，它可以将数据库从 localhost 同步和更新到服务器和服务器到 localhost。本地主机拥有自己的用户 ID 和密码。我的意思是，如果互联网不工作，他们可以离线更新他们的数据库，当有互联网时，他们可以在服务器中更新他们的数据库，同时从服务器更新的数据库也应该在 localhost 中更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:34:43.303

`localStorage`您应该在浏览器离线时尝试使用：

1.  [http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)
2.  [http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

稍后您应该在浏览器再次建立 Internet 连接后使用 AJAX，这样您就可以将`localStorage`内容发送到您的服务器：

1.  [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)
2.  [通过 jQuery Ajax 函数发送 localStorage 变量而不在 url 中](https://stackoverflow.com/questions/12931039/sending-localstorage-variables-through-the-jquery-ajax-function-without-it-being)
3.  [http://www.w3schools.com/ajax/default.ASP](http://www.w3schools.com/ajax/default.ASP)

# c# - 避免将重复元素添加到列表 C#

> ID：14433332
> 
> 赞同：40
> 
> 时间：2013-01-21T06:23:08.990
> 
> 标签：c#, asp.net, asp.net-mvc, list, c#-4.0

```
string[] lines3 = new string[100];
List<string> lines2 = new List<string>();
lines3 = Regex.Split(s1, @"\s*,\s*");

if (!lines2.Contains(lines3.ToString()))
{
    lines2.AddRange(lines3.Distinct().ToArray());
} 
```

我已经检查了所有的空格等，但我的行中仍然有重复的值2`List`

我必须在这里自己删除我的重复值

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-21T06:34:51.803

您可以使用[Enumerable.Except](http://msdn.microsoft.com/en-us/library/bb300779.aspx)从 lines3 中获取不同的项目，这些项目不在 lines2 中：

```
lines2.AddRange(lines3.Except(lines2)); 
```

如果lines2 包含lines3 中的所有项目，则不会添加任何内容。顺便说一句，内部除了用于`Set<string>`从第二个序列中获取不同的项目并验证第一个序列中存在的那些项目。所以，它非常快。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-01-21T06:28:24.807

你的这张支票：

```
if (!lines2.Contains(lines3.ToString())) 
```

是无效的。您正在检查您的`lines2`contains `System.String[]`since`lines3.ToString()`是否会给您。您需要检查 item from 是否`lines3` 存在`lines2`。

您可以迭代`lines3`检查每个项目是否存在，`lines2`然后添加它。就像是。

```
foreach (string str in lines3)
{
    if (!lines2.Contains(str))
        lines2.Add(str);
} 
```

或者，如果您`lines2`是任何空列表，那么您可以简单地将`lines3`不同的值添加到列表中，例如：

```
lines2.AddRange(lines3.Distinct()); 
```

那么您`lines2`将包含不同的值。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2016-01-22T20:12:08.370

使用 a`HashSet<string>`而不是 a `List<string>`。它准备好执行更好的性能，因为您不需要为任何项目提供检查。该集合将为您管理它。`list`这就是 a和 a的区别`set`。样品：

```
HashSet<string> set = new HashSet<string>();

set.Add("a");
set.Add("a");
set.Add("b");
set.Add("c");
set.Add("b");
set.Add("c");
set.Add("a");
set.Add("d");
set.Add("e");
set.Add("e");

var total = set.Count; 
```

总计为`5`，值为`a`, `b`, `c`, `d`, `e`。

的实现`List<T>`并没有给你原生。你可以做到，但你必须提供这种控制。对于示例，此`extension method`：

```
public static class CollectionExtensions
{
    public static void AddItem<T>(this List<T> list, T item)
    {
       if (!list.Contains(item))
       {
          list.Add(item);
       }
    }
} 
```

并使用它：

```
var list = new List<string>();
list.AddItem(1);
list.AddItem(2);
list.AddItem(3);
list.AddItem(2);
list.AddItem(4);
list.AddItem(5); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-21T06:32:54.747

如果您不希望列表中有重复项，请使用[`HashSet`](http://msdn.microsoft.com/en-us/library/bb359438.aspx). 这样，任何其他阅读您的代码的人都会清楚您的意图是什么，并且您可以编写更少的代码，因为`HashSet`已经处理了您正在尝试做的事情。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-21T06:35:50.940

你可以使用一个简单的`Union`+ `Distinct`：

```
var lines = lines2.Union(lines3).Distinct(); 
```

这会将第二个列表中的所有项目添加到第一个列表中，然后返回组合列表中的所有唯一字符串。不太可能在大型列表中表现良好，但它很简单。

参考：http: [//msdn.microsoft.com/en-us/library/bb341731.aspx](http://msdn.microsoft.com/en-us/library/bb341731.aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-21T06:33:19.373

如果您的支票有效，它会添加所有项目，或者根本不添加。`ToString`但是，在数组上调用该方法会返回数据类型的名称，而不是数组的内容，并且该`Contains`方法只能查找单个项目，而不是项目的集合。

您必须检查数组中的每个字符串：

```
string[] lines3;
List<string> lines2 = new List<string>();

lines3 = Regex.Split(s1, @"\s*,\s*");

foreach (string s in lines3) {
  if (!lines2.Contains(s)) {
    lines2.Add(s);
  }
} 
```

但是，如果您从一个空列表开始，您可以使用该`Distinct`方法删除重复项，并且您只需要一行代码：

```
List<string> lines2 = Regex.Split(s1, @"\s*,\s*").Distinct().ToList(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-21T06:38:02.530

如果要将不同的值保存到集合中，可以尝试[HashSet Class](http://msdn.microsoft.com/en-us/library/bb359438%28v=vs.100%29.aspx)。它将自动删除重复值并节省您的编码时间。:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-26T17:35:08.640

使用`HashSet`它更好

看看这里： http: [//www.dotnetperls.com/hashset](http://www.dotnetperls.com/hashset)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-12-14T09:21:59.337

将 a`HashSet`与您一起使用`List`：

```
List<string> myList = new List<string>();
HashSet<string> myHashSet = new HashSet<string>();

public void addToList(string s) {
    if (myHashSet.Add(s)) {
        myList.Add(s);
    }
} 
```

`myHashSet.Add(s)``true`如果`s`其中不存在，将返回。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-26T12:17:37.977

不是一个好方法，而是一种快速修复，使用布尔值检查整个列表中是否有任何重复条目。

```
bool containsKey;
string newKey;

public void addKey(string newKey)
{
    foreach (string key in MyKeys)
    {
        if (key == newKey)
        {
            containsKey = true;
        }
    }

    if (!containsKey)
    {
        MyKeys.add(newKey);
    }
    else
    {
        containsKey = false;
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-08-13T04:57:10.207

从#Felipe Oriani 那里得到提示，我做了扩展，我想在这里永久分享。

```
public static class CollectionExtension
{
    public static void AddUniqueItem<T>(this List<T> list, T item, bool throwException)
    {
        if (!list.Contains(item))
        {
            list.Add(item);
        }
        else if(throwException)
        {
            throw new InvalidOperationException("Item already exists in the list");
        }
    }
    public static bool IsUnique<T>(this List<T> list, IEqualityComparer<T> comparer)
    {
        return list.Count == list.Distinct(comparer).Count();
    }
    public static bool IsUnique<T>(this List<T> list)
    {
        return list.Count == list.Distinct().Count();
    }
} 
```

# mobile - 是否有任何 API 可用于将网页转换为移动网页？

> ID：14433338
> 
> 赞同：0
> 
> 时间：2013-01-21T06:23:39.720
> 
> 标签：mobile, webpage, mobile-website

我项目的目标之一是将标准网页转换为适合移动设备的网页。谁能帮我找到用于开发执行此操作的算法的 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:52:04.613

移动网页是一个普通的网页，但专门写在移动设备上显示。您可以添加媒体查询 (CSS3) 为具有特殊特征的页面（在本例中为移动屏幕）设置其他样式。例如：

```
@media screen and (max-device-width:480px )
{
    .your_css_class
    {
        font-size: 0.8em;
    }
} 
```

此代码将更改屏幕尺寸小于 480 像素的设备的字体大小。此外，您可以使用以下属性：设备纵横比、设备像素比、方向（纵向/横向）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:43:25.160

我知道没有特定的 api，因为“网页”可能意味着许多不同的东西。通常，网站会有 10 项导航，每个下拉菜单包含另外 10 项。一个简单的按钮转换不会很有效。正确的方法是在设计和建造时兼顾两者。

# angularjs - AngularJS - 由于承诺对象的无限循环

> ID：14433339
> 
> 赞同：2
> 
> 时间：2013-01-21T06:23:43.380
> 
> 标签：angularjs, promise

我是 AngularJS 的新手，所以这实际上可能指向一些我还没有完全理解的核心概念。我正在尝试使用`$q`&`promise`对象将“远程数据”视为本地数据。直到未获取远程数据时，`promise`对象才解析，但一旦解析，我希望视图中的所有相关数据绑定都得到更新。然而，下面的方法会导致一个无限循环，在这个循环中`remote_total`被重复调用，即使之前的调用`remote_total`导致了一个已解析的 promise 对象。

这是我的观点

```
<div ng-controller="MyController">
  {{ remote_total() }}
</div> 
```

这是控制器的相关片段：

```
function MyController($scope, $q, $http) {
  $scope.remote_total = function() {
    var def = $q.defer();
    $http.get('/my/remote/service.json').success(function(data) {
      def.resolve(data);
    });
    return def.promise;
  }
} 
```

首先，如果有人能向我解释为什么这会进入无限循环，那就太好了。其次，实现我想要做的事情的最佳方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T23:06:56.567

**注意：有关 Angular 1.2+，请参阅下面的更新**

AngularJS 的承诺（提供）实际上很有趣`$q`，它们被 AngularJS 识别。还有一个是它们是可链接的！

所以在你的代码中你可以做

```
$scope.remote_total = $http.get('/my/remote/service.json').then(function(data) {
  return data;
}); 
```

并且只是查看`<div>{{remote total}}</div>`（注意：不是功能，只是价值）。

AngularJS 会自动识别它的 promise，解析 $http.get promise，然后链接到你的函数中，并将结果值放入模板中。

就这样 ：）

**更新：**默认情况下，AngularJS 1.2 中禁用了 Promise 的自动解包，并将在 1.3 中完全删除。

有效的代码：

```
$http.get('/my/remote/service.json').then(function(response) {
  $scope.remote_total = response.data;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T06:43:16.593

Angular 进行脏检查以实现 2 路绑定。在每个周期中，它存储被监视属性的先前值并将其与新值进行比较。如果该属性是一个函数，则调用它并比较结果。

您确实放置了一个要监视的函数，并且在每个周期中，都会调用您的函数，从而导致 http 请求。

您想要做的是自己创建承诺并将该承诺附加到观看范围（或显示在视图中）。

此外， $http 服务已经返回了一个承诺，您不需要创建另一个承诺。

```
function MyController($scope, $q, $http) {
  $scope.getRemoteTotal = function() {
    var def = $http.get('/my/remote/service.json').then(function(response) {
      $scope.remoteTotal = response.data;
    });
  }
  $scope.getRemoteTotal();
} 
```

.

```
<div ng-controller="MyController">
  {{ remoteTotal }}
</div> 
```

# ruby-on-rails - 在 Ruby on Rails 中使用全局数据的 Ruby 习语是什么？

> ID：14433342
> 
> 赞同：1
> 
> 时间：2013-01-21T06:23:49.603
> 
> 标签：ruby-on-rails, web-applications, eventmachine

我有一个`Ruby on Rails`应用程序需要经常向远程服务器发送 HTTP 请求。而且我想在全球范围内保留这些（有多个客户）`em-http-client`，而不是每次都创建一个客户。但是我不太清楚我应该在哪里存储客户端数组？例如，存储在会话中？或者，ROR 已经准备好开箱即用的单例模式之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:27:45.907

首先，`ruby`本身具有`singleton`格局能力。查看[文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/singleton/rdoc/Singleton.html)。

因此，您需要在请求之间持久存在的进程内存储。

在`RubyOnRails`您可以使用以下选项：

*   **全局**变量（坏主意，我不知道为什么）
*   **类** 变量（坏主意，因为它们通过整个继承树共享）
*   **的实例**变量`metaclass`
*   **线程内**存储 ( `Thread.current[:whatever]`)
*   *在我忘记的其他地方*

好主意是将其初始化为`config/initializers/your_initializer.rb`.

我更喜欢第三种选择。

这是您正在寻找的天真的实现。

```
 class EMClient

    class << self
      attr_accessor :pool
    end
    @pool = []

  end 
```

# json - Json struts2插件中的includeProperties不起作用

> ID：14433349
> 
> 赞同：7
> 
> 时间：2013-01-21T06:24:28.787
> 
> 标签：json, struts2, struts2-json-plugin

我正在使用`struts2-json-plugin-2.2.3.jar`. 并尝试`filterList`像这样序列化类的属性：

`struts.xml`代码

```
<action name="jsonUserFilterListAction"  class="com.my.fitnessb.actions.UserArticlesAction" method="filterList">
        <result  name="success" type="json">
            <param name="includeProperties">filterList</param>
        </result>
 </action> 
```

动作类

```
public class UserArticlesAction extends ActionSupport implements SessionAware, ServletRequestAware {

  private List<FilterType> filterList;
  HttpServletRequest request;

  public String filterList() {
    filterList = new ArrayList<FilterType>();
    filterList.add(new FilterType(10, "Latest Articles"));
    filterList.add(new FilterType(1, "Trending Articles"));
    filterList.add(new FilterType(2, "Top Rated Articles"));
    filterList.add(new FilterType(3, "Most Viewd Atricles"));
    filterList.add(new FilterType(4, "All Atricles"));
    return SUCCESS;
  }
  //setter & getter of filterList
} 
```

但我无法获得 FilterType 类的这个属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T07:58:30.790

假设您的字段`FilterType`已命名`id`并且`desc`

尝试

```
<param name="includeProperties">
filterList\[\d+\]\.id,
filterList\[\d+\]\.desc
</param> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T07:21:45.590

Struts2-json 插件将序列化你在动作类中的所有动作属性。

这是我在使用 struts2-json-plugin 时遇到的问题。尽管 [plugin-doc](http://struts.apache.org/2.2.3/docs/json-plugin.html)显示了`includeProperties`参数的工作示例，但它从未对我有用，并且在经过如此多的试验和谷歌搜索后也从未奏效。所以我不得不使用`excludeProperties`从序列化中删除不需要的内容，而不是指定我想要序列化的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T08:46:59.837

如果更喜欢注释风格

```
@ParentPackage("json-default")
@Namespace("/")
@ResultPath(value = "/")
@Results({  @Result(name="firstDir",type="json"
,params = {"includeProperties","fileList\\[\\d+\\]"}
) })

fileList = new ArrayList<String>();
        for (File img : folder.listFiles()) {
            fileList.add(img.getName());
        }
return "firstDir" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-14T12:07:07.680

你可以试试这个：

```
<param name="includeProperties">
    filterList.*
</param> 
```

# python - 提取文件大小和在 Python/Django 中创建文件的日期？

> ID：14433359
> 
> 赞同：0
> 
> 时间：2013-01-21T06:25:53.070
> 
> 标签：python, django

我`rsync --recursive`用来查找所有文件和目录：

```
 command = subprocess.Popen(['sshpass', '-p', password, 'rsync', '--recursive', source],
                           stdout=subprocess.PIPE)
    command = command.communicate()[0] 
```

我得到我的输出：

```
 drwxr-xr-x 4,096 2013/01/20 22:37:39 files 
```

如何提取文件大小以及何时在 Python/Django 中创建文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:11:31.387

```
command  = "drwxr-xr-x 4,096 2013/01/20 22:37:39 files".split()
filesize = command[1] 
date = command[2] 
```

# asp-classic - ASP Classic 正确处理使用 UTF-8 保存的文件

> ID：14433360
> 
> 赞同：2
> 
> 时间：2013-01-21T06:25:54.273
> 
> 标签：asp-classic, utf-8

在我的网络电子邮件服务器上，用户可以从他们的电子邮件中下载附件。

当他们收到一个不是英文的文件名时，文本在 IE 8/9 中会被破坏，但在 Chrome/Firefox 中却完全正常。这是当前处理下载的代码：

```
<%
    attachfile = request("file")%>
<%
    files = Split(attachfile,"\")
    Set fso = CreateObject("Scripting.FileSystemObject")

    Response.Clear
    'Response.CharSet="UTF-8" 
    Response.ContentType = "application/unknown"
    Response.AddHeader "Pragma", "no-cache"
    Response.AddHeader "Expires", "0"
    Response.AddHeader "Content-Transfer-Encoding", "binary"
    Response.AddHeader "Content-Disposition","attachment; filename = " & files(Ubound(files)) 

    Set objStream = Server.CreateObject("ADODB.Stream")
    objStream.Open

    objStream.Type = 1 
    objStream.LoadFromFile attachfile

    Response.BinaryWrite objStream.Read
    Response.Flush

    objStream.Close : Set objStream = nothing

    Set fso = Nothing
%>
</BODY>
</HTML> 
```

因此，我将文件名在 content-disposition 中传递的方式更改为以下内容，希望它在保存到客户端计算机之前正确地以 UTF-8 编码字符串：

```
Response.AddHeader "Content-Disposition","attachment; filename = " & Server.URLEncode(files(Ubound(files))) 
```

现在我已经解决了一个问题，但我面临着两个新问题-_-

第一个问题是当我在 IE 8/9 中下载文件时文件名不再损坏，但它在文件扩展名的末尾添加了一个奇怪的 [1] 或 [2]。因此，如果我有 파일 1.docx，IE 会将文档保存为 파일 1.docx[1]

第二个问题是，在 chrome 中，浏览器从字面上获取 UTF-8 编码的字符串，因此它被保存为 파일%20%1.docx。请注意，文件的非英文部分显示正确，但空白区域显示为 Unicode 字符代码 20。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:47:11.587

**解决方案**

最兼容浏览器的方法似乎是将所需的文件名放入 url，而不是`Content-Disposition`响应头。

例如：

```
http://localhost/[webpage]/파일.docx 
```

当用户单击上面的链接时，它将保存正确的文件名。以下来自 IE 8：

![IE 8 文件下载提示](../Images/cabfff92277381a1fc1eb331e45901d2.png)

所以问题就变成了——你如何让asp识别具有上述格式的url？答案是您使用 url 重写器。

*   对于 IIS 7 及更高版本，有[来自 Microsoft 的官方重写模块](http://www.iis.net/learn/extensions/url-rewrite-module)。
*   对于 IIS 6，您可以使用[Ionics Isapi Rewrite Filter](http://iirf.codeplex.com/releases/view/70382)的最新版本 (2.x) 。Microsoft[建议](http://blogs.msdn.com/b/dotnetinterop/archive/2008/06/18/rewriting-urls-on-iis5-iis6-or-iis7-mod-rewrite-on-iis.aspx)对较旧的 IIS 版本使用此方法。
*   对于 IIS 5，您还可以使用[Ionics Isapi Rewrite Filter](http://iirf.codeplex.com/releases/view/70382)，但是您*可能*必须使用 (1.x) 版本。要下载旧版本，请参阅链接右侧的“其他下载”部分。该文档在说明哪个版本的过滤器支持哪个 IIS 版本方面似乎不一致。

如果您使用的是 IIS 4 或更早版本，我强烈建议您升级。

我没有太多使用 URL 重写器的经验，但我能够让 Microsoft 轻松地工作。我使用向导添加了一条`user-friendly`规则：

![添加用户友好的规则对话框](../Images/827b40385d657aeef34b224fc3b46749.png)

规则本身很简单：

![IIS 重写规则设置](../Images/d1ea6c7bb486178d758fc5597cc9791d.png)

如您所见，我正在创建一个重写的规则

```
http://localhost/default2/foo.doc/
http://localhost/default2/foo.doc (also works) 
```

到

```
http://localhost/default2.asp?f=foo.doc 
```

当调用网页（default2.asp）时，它可以从 url 参数中获取文件名`f`。

与您的问题无关，但您可能还需要进行一些身份验证以确保只有适当的用户才能访问文件链接，从而访问您的文件。

**来源**

[如何在 HTTP 中对 Content-Disposition 标头的文件名参数进行编码？](https://stackoverflow.com/questions/93551/how-to-encode-the-filename-parameter-of-content-disposition-header-in-http)

[如何为 HTTP 标头编码 UTF8 文件名？（Python，Django）](https://stackoverflow.com/questions/1361604/how-to-encode-utf8-filename-for-http-headers-python-django)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:02:53.943

作为脚本方面的解决方案，首先需要处理请求的浏览器是否是 Internet Explorer（听起来很熟悉，不是吗？）。
我试图在评论中做出解释。请同时考虑以下示例并在所有主要浏览器中进行测试。

```
Sub AddDisposHdr(ByVal FileName)
    If InStr(Request.ServerVariables("HTTP_USER_AGENT"), "MSIE") Then 'Internet Explorer
        Dim FileExt
        If InStr(FileName, ".") > 1 And Len(FileName) > 2 Then 'handling files without extension
            'file extension. shouldn't be encoded to get rid of meaningless square brackets in file names
            FileExt = Mid(FileName, InStrRev(FileName, "."))
            FileName = Mid(FileName, 1, InStrRev(FileName, ".") - 1) 'file name without extension
            FileName = Replace(Server.URLEncode(FileName), "+", " ") 'urlencode + replace plus signs with spaces
            FileName = FileName & FileExt
        End If
        Response.AddHeader "Content-Disposition", "attachment; filename=""" & FileName & """"
    Else ' Not Internet Explorer
        'According to RFC 2231 @ http://tools.ietf.org/html/rfc2231#section-3
        Response.AddHeader "Content-Disposition", "attachment; filename*=UTF-8''" &  _ 
        Server.URLPathEncode(FileName) ' It's an undocumented method.
        'Server.UrlPathEncode is used specifically to encode path names.
        'Its difference from UrlEncode is encodes space as "%20" not "+" 
        'and it doesn't encode the following characters at all : $#!&*.+-/@:? but UrlEncode does.
    End If
End Sub

Response.ContentType = "application/x-download"
AddDisposHdr FileNames("こんにちは 1.zip")
Response.Write "1" 'something to output 
```

# crystal-reports - 在水晶报表的公式中查找子字符串

> ID：14433361
> 
> 赞同：0
> 
> 时间：2013-01-21T06:25:56.460
> 
> 标签：crystal-reports, crystal-reports-xi

我需要检查公式中是否存在子字符串并将其删除。有人可以为此建议一个解决方法。目前我有一个将用户输入加入逗号分隔字符串的公式。我的要求是检查此公式是否包含“全部”，如果是，请将其删除。

请指教。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T06:41:20.637

您可以使用替换功能。

代码：

```
Replace (inputString, findString, replaceString) 
```

例子

```
Replace ({@YourJoinedCommaDelimitedFormula}, 'All', '') 
```

以上将用空白字符串替换单词“All”，以便将其从列表中删除。

# c# - 如何创建子进程以在 C# 中执行方法？

> ID：14433364
> 
> 赞同：1
> 
> 时间：2013-01-21T06:26:18.583
> 
> 标签：c#, libpcap, winpcap, child-process

**在从脱机转储文件中读取文件时，我从****winpcap**库中得到了一个逻辑错误。因为他们在阅读后没有关闭文件。因此，当文件计数达到 509 时，我收到“无法打开文件”的异常。

 **我正在使用带有 c# 的 pcap.net 库。这是我的代码

```
OfflinePacketDevice selectedDevice = new OfflinePacketDevice(filename);
PacketCommunicator communicator = selectedDevice.Open(65536,PacketDeviceOpenAttributes.Promiscuous,1000);    
communicator.ReceivePackets(0, DispatcherHandler);
communicator.Dispose(); 
```

现在我需要将上述语句作为**子进程**执行，所以我认为我可以通过为每个 pcap 文件调用子进程来避免该异常。但我不知道如何在 c# 中将方法作为子进程执行。谁能给我一个解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:43:52.313

至于所谓的WinPcap库错误，读取转储文件的程序*是*在读取文件的最后一个数据包后调用`pcap_close()`的，对吗？如果不是，则错误在程序中，而不是在 WinPcap 中。即使是这样，错误也可能在 pcap.net 中，而不是 WinPcap。**

# java - Java 程序无法为某些用户打开

> ID：14433367
> 
> 赞同：3
> 
> 时间：2013-01-21T06:26:30.057
> 
> 标签：java, ip-address, runtime.exec, launch4j

我创建了一个 Java 程序，可以为我快速更改笔记本电脑的 IP 地址。它在我测试的每台机器上都运行良好，所以我将它分发给我的同事，以便他们也可以使用它。但是，其中一位技术人员无法打开该程序。我已经确认他正在运行 Java 版本 1.7.0，但是当他双击该程序（我已将其打包为带有 Launch4j 的 .exe）时，没有任何反应。即使他试图以管理员身份运行。我编写了一个快速的“Hello World”程序，它会打开一个新窗口并简单地显示“Hello World”，只是为了测试他的 Java。该程序运行良好。他和我一样在运行 Win 7 x64。

我相信这是 Java 中的一个安全设置，它不喜欢 java.lang.Runtime.getRuntime().exec() 命令，但我查看了所有设置，无法想象是什么设置阻止了程序运行。

谁能给我任何关于我应该看什么的想法？

# iphone - 位置管理器不会停止

> ID：14433368
> 
> 赞同：-2
> 
> 时间：2013-01-21T06:26:36.033
> 
> 标签：iphone, gps

我正在启动 GPS，然后将其保持打开状态并在应用程序中拨打电话`openUrl`，然后再次返回应用程序并尝试通过调用停止 GPS，`stopUpatingLocation`但 GPS 并没有停止。

请给出一些停止GPS的解决方案。

**代码**

```
 app.locationManager.delegate=app;
 [app.locationManager startMonitoringSignificantLocationChanges];
 [app.locationManager startUpdatingLocation]; //start gps 
```

**然后使用代码调用 hangup** `[[UIApplication sharedApplication] tel:@"number"];`

```
**Now after call hangup i need to stop that gps .... i have already written code below** 

[app.locationManager stopMonitoringSignificantLocationChanges];
[app.locationManager stopUpdatingLocation];
app.locationManager=nil;
[app.locationManager release]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:56:07.210

我想只是为位置管理器对象发布一个版本。也让它为零。

例子：：

```
[locationManager release];
locationManager=nil; 
```

在你的dealloc中写下这两行。希望能帮助到你

# winrt-xaml - 为什么我的图像有时会在恢复时重新加载（并且 WriteableBitmaps 消失）？

> ID：14433370
> 
> 赞同：4
> 
> 时间：2013-01-21T06:26:42.957
> 
> 标签：winrt-xaml, writeablebitmap

当我恢复我的应用程序时，有时它会丢失图像。即使在琐碎的应用程序中，我也可以重现这一点。

这以两种不同的方式表现出来，具体取决于图像的来源：

*   如果我做了类似的事情`<Image Source="/Assets/Logo.png"/>`（即，通过 URI 从我的应用程序包中加载图像），图像将短暂消失，然后重新加载。当屏幕包含许多图像时，这更容易看到；它们按顺序重新加载，因此我可以在屏幕上看到图像加载波纹。
*   如果我创建了一个`WriteableBitmap`并将其绑定到 Image.Source，那么位图将完全消失，永远不会返回。

如果它只是重​​新加载图像（尽管涟漪效应令人不快），我可能会忍受这个，但我做了很多动态图像生成，而且我的所有 WriteableBitmaps 消失并不酷。

并非每次应用程序暂停和恢复时都会发生这种情况，只是有时会发生。我还没有确定一个可靠的复制案例，但似乎它被暂停的时间越长，我在此期间做的其他事情就越多（在桌面 Chrome 中浏览网页，玩 TapTiles 和 Microsoft Minesweeper 等全屏 DirectX 游戏） ，越有可能，当我切换回我的应用程序时，图像就会丢失。（应用程序*不会*被终止并重新启动——它仍然是同一个应用程序实例。）

我想知道这是否与从视频内存中刷新图像有关。但我不知道如何检验这个假设，所以在这一点上只是一个猜测。

到目前为止，我还没有找到任何方法让我的程序甚至告诉 WriteableBitmaps 正在丢失。事件的顺序与正常的挂起和恢复相同：

*   Window.Current.Activated 使用 args.WindowActivationState == Deactivated 触发
*   Window.Current.VisibilityChanged 使用 args.Visible == false 触发
*   应用程序.暂停火灾
*   （时间流逝）
*   应用程序.恢复火灾
*   Window.Current.VisibilityChanged 使用 args.Visible == true 触发
*   Window.Current.Activated 使用 args.WindowActivationState == CodeActivated 触发

我没有任何运气找到“顺便说一句，你所有的图像都消失了”事件。[WriteableBitmap](http://msdn.microsoft.com/en-us/library/windows/apps/BR243259)没有事件。[Image](http://msdn.microsoft.com/library/windows/apps/BR242752)有 ImageOpened 和 ImageFailed 事件，但这些事件仅在我从 URI 加载图像时触发——当 Source 是 WriteableBitmap 时它们永远不会触发。

我已经能够在琐碎的应用程序中重现这一点，所以它不是由某些第三方库引起的。如果应用程序已暂停一段时间然后您恢复它，则具有通过 URI 加载的图像的空白页面将再次触发 ImageOpened（并且图像在完成重新加载之前会短暂闪烁）。如果应用程序已暂停一段时间，然后您恢复它，则带有初始化为 WriteableBitmap 的图像的空白页面将消失。

**如何修复 WriteableBitmaps 的丢失（如果可能，还有 content-URI 图像）？**有什么方法可以防止图像首先丢失？如果没有，有什么方法可以检测到它们已经丢失，所以我可以重新创建我的 WriteableBitmaps？

（对于奖励积分，我很想知道*为什么*图像会消失，但这部分完全是可选的。我早就放弃了期待 WinRT 有意义。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T01:44:58.583

我做了一些实验，清楚地表明 WinRT 只是丢失了 WriteableBitmap 的内容，而不是 WriteableBitmap 本身。WriteableBitmap 实例仍然可行；如果你给它新的像素数据，它工作正常。只是有时，在应用程序恢复时，它的内容会被一大片透明像素所取代。

我已经能够通过挂钩我的应用程序的 OnResuming 事件并使用该事件来获取我的 WriteableBitmap 的 PixelBuffer.AsStream()、写入新像素并调用 WriteableBitmap.Invalidate() 来解决这个问题。如果重新生成图像的代码是同步的，那么当应用程序恢复时，图像甚至不会闪烁。

我怀疑普通位图（通过源 URI 加载）也丢失了它们的像素缓冲区，并且在应用程序恢复后必须重新加载它们的像素。图像加载是异步的，这解释了其内容重新出现之前的延迟/闪烁。

我还没有找到一种方法来知道图像是否丢失了像素（尽管显然 URI 加载的图像有一些知道的方法，因为它们会自动重新加载）。因此，对于 WriteableBitmaps，最安全的做法似乎是始终在应用恢复时重新填充它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T20:03:49.193

为了在某​​种程度上取代先前的答案，我发现简单地使 WriteableBitmap 无效就可以解决问题。我建议在重写图像之前先尝试一下，因为这可能对您的应用程序产生比仅仅使它无效的更大的影响。

这个错误也可以通过强制你的应用程序暂停和恢复来重现。最初我们很难确定何时会发生，因为我们正在等待应用程序暂停。[这是](http://blogs.msdn.com/b/visualstudio/archive/2012/08/23/new-visual-studio-2012-debugging-features-for-the-windows-8-app-lifecycle-model.aspx)有关如何在 WinRT 应用程序中模拟挂起和恢复的文章的链接。

# sqlite - 将格式错误的 CSV 导入 SQLite

> ID：14433372
> 
> 赞同：1
> 
> 时间：2013-01-21T06:26:49.653
> 
> 标签：sqlite, sqlite-shell

我正在尝试通过将一些包含数百万行的大型 CSV 文件导入 SQLite 来解析和分析日志文件。
我正在使用我的 .NET 程序通过 LINQ 在较小的日志文件上实现相同的操作，而无需任何数据库。
但我面临着性能和可扩展性问题。
然后我发现 SQLite 可能是从我的 .NET 程序中卸载性能问题的最佳选择。我使用 SQLite 命令行中的以下命令导入了日志文件。
（名称被替换以避免提供不必要的信息）：

```
sqlite> Create Table MLogTable(DateTimeC text, Field1 text, Field2 text, Field3 text, Field4 text, Field5 text, Field6 text, Field7 text, Field8 text, Field9 text, Field10 text); 
```

`sqlite> .separator ","`

```
sqlite> .import "D:\\logs\\xyz\\abc.log" MLogTable 
```

日志记录机制似乎有问题，我在日志文件中得到一些不完整的行。例如：

> 预期格式为 (f1, f2, f3 f4, f5, f6, f7, f8, f9 ,f10, f11)
> 
> 但几行的实际格式是 (f1, f2)

因此，日志文件的几行（数百万行）与预期不符，并且在导入时会导致以下类型的错误：

> 错误：D:\logs\xyz\abc.log 第 4499214 行：预期 11 列数据，但找到 2

错误行的数量非常少，我无法控制在记录时如何纠正它。
因此，在 SQLite 导入完成时需要忽略这些行。
SQLite可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:48:59.653

命令行工具的 CSV 导入功能`sqlite3`仅适用于格式良好的 CSV 文件。

您必须手动转换文件，或编写自己的导入器。

# android - Android上的lib64？

> ID：14433379
> 
> 赞同：0
> 
> 时间：2013-01-21T06:27:29.273
> 
> 标签：android

什么是 lib64/ld-linux-x86-64？它是我下载的 android 的 AOSP 文件的一部分还是我需要单独安装的东西？

从我的笔记本电脑：我确实安装了 lib64，但我想我需要 ld-linux-x86-64.so？

```
laptop:/usr/lib64$ ls
libfakeroot 
```

然而，这是我在尝试编译 AOSP 时收到的警告。

```
laptop:/media/HDD3_AOSP/AOSP_ANDROID$  source build/envsetup.sh
including device/asus/grouper/vendorsetup.sh
including device/asus/tilapia/vendorsetup.sh
including device/generic/armv7-a-neon/vendorsetup.sh
including device/generic/armv7-a/vendorsetup.sh
including device/generic/mips/vendorsetup.sh
including device/generic/x86/vendorsetup.sh
including device/google/phantasm/vendorsetup.sh
including device/lge/mako/vendorsetup.sh
including device/samsung/maguro/vendorsetup.sh
including device/samsung/manta/vendorsetup.sh
including device/samsung_slsi/arndale/vendorsetup.sh
including device/samsung/toroplus/vendorsetup.sh
including device/samsung/toro/vendorsetup.sh
including device/ti/panda/vendorsetup.sh
including sdk/bash_completion/adb.bash
laptop:/media/HDD3_AOSP/AOSP_ANDROID$  lunch full-eng
/lib64/ld-linux-x86-64.so.2: No such file or directory
/lib64/ld-linux-x86-64.so.2: No such file or directory
/lib64/ld-linux-x86-64.so.2: No such file or directory
============================================
PLATFORM_VERSION_CODENAME=AOSP
PLATFORM_VERSION=4.2.1.2.4.8.16.32.64
TARGET_PRODUCT=full
TARGET_BUILD_VARIANT=eng
TARGET_BUILD_TYPE=release
TARGET_BUILD_APPS=
TARGET_ARCH=arm
TARGET_ARCH_VARIANT=armv7-a
HOST_ARCH=x86
HOST_OS=linux
HOST_OS_EXTRA=Linux-2.6.32-41-generic-i686-with-Ubuntu-10.04-lucid
HOST_BUILD_TYPE=release
BUILD_ID=OPENMASTER
OUT_DIR=out
============================================ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:30:02.017

ld 是链接器-它将目标文件链接到可执行文件中。如果它不是下载的构建的一部分，您需要获取它的副本。我的猜测是 gnu 版本就足够了，但我不能发誓。

# oracle - 如何在 PL/SQL 中连接到另一个用户

> ID：14433382
> 
> 赞同：0
> 
> 时间：2013-01-21T06:27:51.023
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我需要在 pl/sql 中从用户连接到另一个用户，注意我没有 DBA 权限。

你能给我两个用户之间连接的命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:39:56.007

PL/SQL 没有改变连接的命令。如果您需要某些特定权限，则必须授予它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:02:19.003

您不需要新的连接，只需将其他用户名添加到他/她的表和过程中：

```
SELECT * FROM user_name.his_table WHERE ...; 
```

如果您收到错误消息`ORA-00942: table or view does not exists`，则以新用户身份登录并设置访问权限：

```
GRANT SELECT ON his_table TO <old_user>; 
```

# iphone - 如何从私人文档目录文件夹中选择多张图片，而不是从 iPhone 的照片库中选择

> ID：14433383
> 
> 赞同：0
> 
> 时间：2013-01-21T06:27:52.940
> 
> 标签：iphone

我是电话编程新手。任何人都可以告诉我如何从私人文档目录文件夹中选择多张图片。我得到了一些像 ELCImagePickercontroller 这样的代码，我可以选择表单照片库图像，但我想选择图像表单私人文件夹。任何人都可以告诉我，我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:40:09.177

假设您有来自 Document 目录的 fatch 图像并`Viewcontroller`使用`ScrollVIew`类似`photoGallary`的方式创建。？那么可能是您添加了每个图像`UIButton`以获取特定图像标签。如果你像我上面的逻辑那样做这些事情，那么你可以像下面的点一样选择多个图像。

*   you have to creat Anoter IBAction with Button Tag with identify `isSelected`or not if is not then when Select you can set other ImageView Transparant Layor on UIButton with same size and set CheckImage

*   然后，您还可以从文档目录添加特定的选定 imagePath，并将每个选定的 imagePath 添加到一个`NSMutableArray`

*   然后你可以用这个创建的 selectedImageMutaleArray 节目做你的逻辑和东西，删除你想要的任何东西

希望我的上述逻辑和信息对您有所帮助:)

# c# - 在 QT C++ 中计算像素距离

> ID：14433387
> 
> 赞同：0
> 
> 时间：2013-01-21T06:28:09.633
> 
> 标签：c#, c++

我正在编写一个应用程序，要比较 2 个相同尺寸的图像，我需要比较距离例如，如果两个相同的图像，那么这两个图像之间的距离将为零。如果两个图像完全不同，那么它们之间的距离会非常大。该项目涉及获取样本图像并将其用作基础，并查看后续图像中是否发生颜色或渐变的任何失真。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:36:19.783

很难定义图像之间的距离，该距离类似于人脑识别为“近距离”图像的距离。特别是图像的失真不容易捕捉。但是，如果您只查看颜色和渐变的逐点失真，您可以将图像 A 和 B 之间的距离定义为：

```
d(A,B) = sqrt ( sum ( A(i,j)-B(i,j) )^2 ) 
```

其中 A(i,j) 是图像 A 中坐标 i,j 处像素颜色的 RGB 分量的 3D 向量。

# symfony-2.1 - 如何在不使用命名空间的情况下包含外部库

> ID：14433389
> 
> 赞同：0
> 
> 时间：2013-01-21T06:28:14.593
> 
> 标签：symfony-2.1

我不习惯 SwiftMailer，所以我刚刚下载了 PHPMailer 以供使用。问题是 PHPMailer 没有任何“命名空间”语句，所以我不能在 Controller 中使用它。如何包含和声明它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-04T02:54:38.527

解决方法是将它放在`vendor`文件夹中，然后放入`namespace`PHPMailer 的每个文件中。然后`use`在Controller中。有用。

# c# - 编译所有文件 C#/IronPython

> ID：14433393
> 
> 赞同：1
> 
> 时间：2013-01-21T06:29:09.960
> 
> 标签：c#, embed, ironpython

我将 IronPython 嵌入到 C# 中，作为修改我正在处理的程序的一种方式。因此，有多个文件需要一次使用。

```
 Code = "";
        Engine = Python.CreateEngine();
        Runtime = Engine.Runtime;
        var files = Directory.GetFiles("script", "*.py", SearchOption.AllDirectories);
        foreach (var tr in files.Select(file => new StreamReader(file)))
        {
            Code += "\n";
            Code += tr.ReadToEnd();
            tr.Close();
        }
        Scope = Engine.CreateScope();

        Engine.CreateScriptSourceFromString(AddImports(Code)).Execute(Scope); 
```

这需要 /script 中的所有文件并将它们组合成一个字符串以从它们创建脚本源，这当然是一个有缺陷的方法，因为如果类不按字母顺序继承，则会发生 UnboundNameException

```
class bar(foo):
    pass

class foo():
    pass 
```

我将如何以正常方式编译所有文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T09:00:00.170

如果您将代码/文件构建为 python[模块](http://docs.python.org/2/tutorial/modules.html)，导入并使用它们，python 运行时将处理/解析您的导入和依赖项。假设您的主要 python 文件包含您的主要入口点作为*A.py*

```
import B, C
foo = B.Foo()
bar = C.Bar()

foo.foo()
bar.bar(foo)

print("done") 
```

该文件使用*B.py*和*C.py*中定义的模块**B**和**C。**

 **B.py：

```
class Foo:
    def foo(self):
        print("Foo.foo()") 
```

C.py（注意模块**C**也使用/导入模块**B**）：

```
import B
class Bar:
    def bar(self, foo):
        print("Bar.bar()") 
```

用于设置引擎和执行所有内容的 .NET 样板（假设*A.py*、*B.py*和*C.py与 .NET 二进制文件位于同一目录或路径上）看起来像*

```
var engine = Python.CreateEngine();
var scope = engine.CreateScope();
var source = engine.CreateScriptSourceFromFile("A.py");
source.Execute(scope); 
```

请注意，只需要*加载 A.py*（作为主要入口点），其他所有内容都将由运行时解决。

如果您的脚本被拆分为多个文件夹，您可能必须相应地更改搜索路径。假设除*A.py*之外的所有文件都位于一个名为*scripts*的文件夹中，该文件夹可能看起来像

```
var paths = engine.GetSearchPaths();
paths.Add("scripts");
engine.SetSearchPaths(paths); 
```

请注意，如果由于某种原因您希望在使用类时避免模块命名空间，您也可以导入 *. 这对于某些用例可能更容易，但可能会产生命名冲突（例如，如果**A**和**B**都定义了一个类**Foo**）。

```
from B import *
from C import *
foo = Foo()
bar = Bar() 
```**

# java - Java的HashMap中equals的作用

> ID：14433398
> 
> 赞同：2
> 
> 时间：2013-01-21T06:29:31.610
> 
> 标签：java, data-structures, null, hashmap

我有一个`HashMap`关于使用`equals`. 当我首先进行空检查时，如下所示：

```
public boolean equals(final Object obj) {
    // object must be Test at this point
    if (obj == null) {
        return false;
    }
} 
```

如果我不这样做，它会快一点。

所以，要创建`HashMap`- 我只是想知道 - 与`HashMap`. 当我放置、插入或获取时，我从不插入任何`null`对象。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T06:32:53.847

我真的不会担心单个 if 语句的成本 - 这是一个微优化，除非你有文件证明它是你程序中的瓶颈，否则你绝对不应该担心它。几乎普遍地，程序的放缓是由于大规模的低效率而不是个别的 if 语句。

`HashMap`话虽如此 -可以比较存储在 a 中的对象，但是`HashMap`想要比较它们。这通常在插入、删除和查找期间完成，以便`HashMap`知道两个对象是否相等，但也可以在重新散列期间完成（因为对象通过 重新分配`HashMap`）。该实现甚至可能尝试将您的对象`null`与然后执行某种疯狂的激进缓存或合并方案进行比较，以提高内存使用率。你真的不能假设太多，因为合同的一部分`HashMap`必须`equals`适用于你的对象。

此外，如果您不支持`null`in `equals`，那么您将违反[in 中指定](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)[的合同`equals``Object`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)，其中明确提到传入`null`应该返回`false`。如前所述，这几乎可以肯定是一个非常糟糕的主意，除非您有可验证的数据表明它是一个瓶颈。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T06:45:48.957

在大多数现代 CPU 上，正确进行分支预测的空值检查几乎是免费的。说真的，你不应该担心它。

通常虽然在这种情况下我会`instanceof`先进行检查，这使得空检查变得不必要：

```
public boolean equals(final Object obj) {
    if (obj instanceof MyObject) {
        // do comparison
    } else {
        return false
    }
} 
```

请注意，您不需要显式的空检查：该`else`子句处理此问题的方式与它为其他任何不是有效`MyObject`实例的内容返回 false 的方式相同。

# twitter - 评分系统是否违反 Twitter 显示要求？

> ID：14433400
> 
> 赞同：1
> 
> 时间：2013-01-21T06:29:59.117
> 
> 标签：twitter, requirements

我对新的[推特显示要求](https://dev.twitter.com/terms/display-requirements)感到困惑。

**背景**

我根据其受欢迎程度动态生成包含一系列推文的页面。在推文的右侧，我有一个喜欢/不喜欢的评级系统，用于确定推文的受欢迎程度。

**问题**

我可以在推文附近放置喜欢/不喜欢的图标吗？

评级系统是否违反任何 Twitter 开发者规则？

# c# - 从驱动器号获取 Windows 设备句柄

> ID：14433405
> 
> 赞同：0
> 
> 时间：2013-01-21T06:30:14.013
> 
> 标签：c#, .net, winapi, pinvoke

我正在为我为我编写的操作系统编写的文件系统编写文件资源管理器工具。资源管理器在 C# 中，我想知道是否可以从 .NET 中的驱动程序字母（如 C:) 或使用 P/Invokes 获取 Windows 设备句柄

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:06:31.053

要使用 P/Invoke 获得卷句柄，您需要一个已安装的卷。

要在 Windows 中挂载具有自定义文件系统的卷，您需要该文件系统的适当 Windows 驱动程序。如果您已经编写了自定义操作系统和自定义文件系统，那么编写 Windows 驱动程序对您来说是小菜一碟，我敢肯定。

但我不知道您的问题与 C# 甚至 .NET 有什么关系。:)

# c# - Javascript：如何遍历模型中的对象列表

> ID：14433406
> 
> 赞同：10
> 
> 时间：2013-01-21T06:30:22.453
> 
> 标签：c#, javascript, asp.net-mvc, razor

所以我需要在视图模型中的学生对象列表中获取学生的姓名，然后通过 $.post 将它们发送到服务器，后者我已经弄清楚了，但我不知道如何遍历对象列表。基本上我有这个：

```
//Student object
public class Student 
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    //Like a bunch of other attributes here
} 
```

这是视图中的模型：

```
//StudentSearchResult ViewModel

public class StudentSearchResult {

    public IEnumerable<Student> { get; set;}
} 
```

起初我虽然只是按原样发送学生列表对象，但这可能不是一个好主意，因为它捆绑了太多属性（当我尝试发送模型时它给了我这个“循环”错误）而且我只真的需要使用我已经拥有的 $.post 方法将连接的 FirstName 和 LastName 发送到控制器。我试过这样的事情：

```
var names = []  
var length = "@Model.StudentSearchResult.count()";  
for (int i = 0; i < length; i++) 
{
     names[] = "@Model.StudentSearchResult[i].Name + @Model.StudentSearchResult[i].LastName"
}
//$.post function here that calls the controller and send the concatenated names of each student in studentsearchresult. 
```

但是我会得到一个错误，“i”不存在所以，我如何在 javascript 中遍历我的视图模型中的对象列表，访问属性并将它们连接起来，然后将它们存储在字符串数组中，以便我可以将它发送给控制器吗？我想控制器看起来像这样

```
[HttpPost]
public ActionResult StudentSearchResult(/*other stuff I send here, */ string[] studentNames){
   //stuff here

  return View();
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-21T06:34:32.397

你那里有一些无效的javascript。

首先修复您的视图模型，以便您拥有编译的 C# 代码（您缺少属性名称）：

```
public class StudentSearchResult 
{
    public IEnumerable<Student> Students { get; set;}
} 
```

然后假设您的控制器操作将 JSON 结果发送到客户端（这可确保视图模型正确地进行了 JSON 编码并`application/json`发送了响应内容类型标头）：

```
[HttpPost]
public ActionResult StudentSearchResult(/*other stuff I send here, */ string[] studentNames)
{
    StudentSearchResult model = ... //stuff here to populate your view model
    return Json(model);
} 
```

您可以使用以下功能轻松地在客户端上进行迭代[`$.each()`](http://api.jquery.com/jQuery.each/)：

```
var studentNames = ['name1', 'name2'];
$.post('/Students/StudentSearchResult', studentNames, function(result) {
    var students = result.Students;
    $.each(students, function() {
        alert('FirstName: ' + this.FirstName + ' LastName:' + this.LastName);
    });
}); 
```

`for`如果您愿意，甚至可以使用普通的 ol'循环：

```
$.post('/Students/StudentSearchResult', studentNames, function(result) {
    var students = result.Students;
    for (var i = 0; i < students.length; i++) {
        var student = students[i];
        alert('FirstName: ' + student.FirstName + ' LastName:' + student.LastName);
    }
}); 
```

* * *

更新：

看来我犯了一个错误，认为您正在执行 AJAX 请求。相反，您需要的是在 javascript 中访问模型属性。这是如何做到的：

```
@model StudentSearchResult
<script type="text/javascript">
    var students = @Html.Raw(Json.Encode(Model.Students));
    // students is a javascript array that will look like this:
    // students = [{"FirstName":"fn1","LastName":"ln1"}, {"FirstName":"fn2","LastName":"ln2"}, ...];
    for (var i = 0; i < students.length; i++) {
        var student = students[i];
        alert('FirstName: ' + student.FirstName + ' LastName:' + student.LastName);
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:34:40.160

您可以使用 $.each 的 jquery 来迭代结果。

```
$.each(yourModel,function(){//do with loop}); 
```

和错误。你在声明循环变量时犯了错误

```
for (var i = 0; i < length; i++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T06:34:57.703

看起来您需要将用户名作为 JSON 输出到客户端？试试这个：

```
var names = @Model.StudentSearchResult.Select(s => new { s.FirstName, s.LastName }).ToList(); 
```

我对 Razor 的语法不是很熟悉，但我想你还是可以理解上面的代码的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T06:34:13.670

```
for (var i = 0; i < length; i++) 
```

代替

```
for (int i = 0; i < length; i++) 
```

应该管用。

# c - C中的字符串：给出一些逻辑错误

> ID：14433407
> 
> 赞同：1
> 
> 时间：2013-01-21T06:30:24.870
> 
> 标签：c

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
#include<stdbool.h>
char output[17]={0};
const char* change_mac(char ch[100])
{
    int i = 0;
    int k = 0;

    bool flag = false;
    while(i < strlen(ch)) 
    {
        flag = false;
        int j = 0;
        while (j < 2)
        {
            if(ch[i] == ':' || strlen(ch) == i ) 
            {
                if(k != 0) 
                {
                    char temp = output[k-1];
                    output[k-1] = '0';
                    output[k] = temp;
                }
                flag = true;
            } 
            else 
            { 
                output[k] = ch[i];
            }
            i++;
            j++;
            k++;
        }
        if(i < strlen(ch) && memchr(ch, ':', strlen(ch)))
        {
            output[k] = ':';
            output[k+1] = '\0';
        }
        else{
            output[k] = ch[i];
        }
        k++;
        if(!flag) 
        {
            i++;
        }
    }

    output[k-1] = 0;
   return output;
}

int main(int argc,char **argv)
{
char name[]="";
char ch[100] = "0:0:0:0:0:0";

if(sscanf(argv[1],"%s",ch) == 1)
{
  name=change_mac(ch);
} 
return 0;
} 
```

/*我想将MAC作为CMD行争论将其更改为正确的格式并将其存储到此“名称”变量中，因此我可以在此处进一步使用它它显示了一些类型转换错误*/

/* 执行：./a.out 0:c:f4:dr:4r:1 */

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T06:38:08.850

你忘了`'\0'`在末尾添加`output[]`。在`printf("%s\n",output);`添加以下代码之前：

```
output[k-1] = '\0'; 
```

接下来，
我不太确定，但是对于第二个功能，如果下面的代码会改变你：

```
if(i !=sizeof(ch))
{
    output[k] = ':';
} 
```

跟随（*仅当它存在时**添加`':'``ch[]`*）

```
if(i !=sizeof(ch) && memchr(ch, ':', sizeof(ch)))
{
     output[k] = ':';
}
else{
    output[k] = ch[i];
} 
```

并包含一个头文件`string.h`。

试试看！！如果您还有其他疑问，请告诉我。

但是，是的，它不像您想要*“尝试捕获或错误处理之类”*

**编辑**
正如您在我的回答中评论的那样，我正在修复您的错误：
在之前添加以下代码`printf("%s\n",output);`

```
output[k-1] = 0;
if(memchr(ch, ':', sizeof(ch))==NULL){
        output[k-2] = 0;
} 
```

[**阳离子：**这不是修复此类错误的好方法，建议您重写代码]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:21:19.850

你以错误的方式改变了你的问题:(

我已将您的代码更正如下：

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
int main()
{
    //char ch[] = {'0',':','1','0',':','1',':','C',':','B','F',':','9','8'};
    char ch[] = {'a','b','c','d','e','f','g','f'};
    char output[20]={0};
    int i = 0;
    int k = 0;
    bool flag = false;

    while(i < sizeof(ch)) 
    {
        flag = false;
        int j = 0;
        while (j < 2)
        {
            if(ch[i] == ':') 
            {
                if(k != 0) 
                {
                    char temp = output[k-1];
                    output[k-1] = '0';
                    output[k] = temp;
                }
                flag = true;
            } 
            else 
            { 
                output[k] = ch[i];
            }
            i++;
            j++;
            k++;
        }
        if(i !=sizeof(ch) && memchr(ch, ':', sizeof(ch)))
        {
            output[k] = ':';
            output[k+1] = '\0';
        }
        else{ // added this else in your code
            output[k] = ch[i];
        }
        k++;
        if(!flag) 
        {
            i++;
        }
    }
    output[k-1] = 0;  // added this
    printf("%s\n",output);
    printf("%d\n",sizeof(ch));
    printf("%d\n",sizeof(output));

   return 0;
} 
```

它的工作很好！

**案例 1** 如果`char ch[] = {'a','b','c','d','e','f','g'};`

```
~$ ./a.out 
abcdefg
8
20 
```

**案例 2** 如果`char ch[] = {'0',':','9',':','1',':','C',':','B',':','9','8'};`

```
:~$ ./a.out 
00:10:01:0C:BF:98
14
20 
```

[虽然给代码不好，但是因为你从早上就开始尝试我给了]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:53:47.280

你已经改变你的问题太多次了：

您的代码通过参数传递：

```
#include<stdio.h>
#include <string.h>
#include<stdlib.h>
void function(char* ch);
int main(int argc, char* argv[]){
    if(argc!=2){
        printf("\n wrong number arguments!\n");
        exit(0);
    }
    function(argv[1]);
    return 0;
}
void function(char* ch){
    char output[20]={0};

    int i = 0;
    int k = 0;
    bool flag = false;

    while(i < strlen(ch)) 
    {

        flag = false;
        int j = 0;

        while (j < 2)
        {
            if(ch[i] == ':') 
            {
                if(k != 0) 
                {
                    char temp = output[k-1];
                    output[k-1] = '0';
                    output[k] = temp;
                }
                flag = true;
            } 
            else 
            { 
                output[k] = ch[i];
            }
            i++;
            j++;
            k++;
        }

        if(i !=strlen(ch) && memchr(ch, ':', strlen(ch)))
        {
            output[k] = ':';
            output[k+1] = '\0';

        }
        else{
            output[k] = ch[i];
        }
        k++;

        if(!flag) 
        {
            i++;
        }
    }
    output[k] = 0;

    /*for (i=0;i<sizeof(output);i++)
    {
        printf("%c", output[i]);
    }*/

    printf("%s\n",output);
} 
```

运行此代码：

**案例1**：

```
~$ ./a.out  abcderf
abcderf 
```

**案例2**：

```
:~$ ./a.out  0:9:1:C:B:98
00:09:01:0C:0B:98 
```

# ruby-on-rails - 如何像拨号或移动连接一样运行 Selenium (rspec2/capybara) 测试？

> ID：14433409
> 
> 赞同：0
> 
> 时间：2013-01-21T06:30:54.307
> 
> 标签：ruby-on-rails, selenium, rspec2

我想像在手机或拨号连接上一样运行我的测试套件。我正在使用带有 rspec2 和 selenium 的 rails 堆栈。有什么建议吗？

# angularjs - 如何从控制器中添加 ng-show 功能？

> ID：14433410
> 
> 赞同：2
> 
> 时间：2013-01-21T06:30:54.480
> 
> 标签：angularjs

假设我有几个这样的元素：

```
<note ng-show="hasText()">
    {{text}}
</note> 
```

我有这样的指令：

```
directive('note', function() {
    return {
        restrict: 'E',
        controller: 'NoteCtrl'
    }
}) 
```

像这样的控制器：

```
function NoteCtrl($scope, $element) {
    $scope.text = "Hello, world!";
    $scope.hasText = function() {
        return $scope.text.length > 0;
    }
} 
```

这将做的是如果它有文本则显示注释，否则隐藏它。

我想知道的是，有没有办法`ng-show`从 HTML 中删除，并从控制器中动态添加它？

例如，您可以尝试将其设为 中的第一行`NoteCtrl`，但它不起作用：

```
$($element).attr('ng-show', 'hasText()'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-16T10:03:43.500

为了更接近角度行为，我建议使用 ng-hide css 类。
从标记示例开始：

```
myApp.directive('note', function() {
    return {
        restrict: 'E',
        controller: function($scope) {
            $scope.text = "Hello, world!";
            $scope.clearText = function() {
                $scope.text = '';
            }
        },
        link: function($scope, $element) {
            $scope.$watch('text.length', function(len){
                if (len <= 0) {
                    $element.addClass("ng-hide");
                } else {
                    $element.removeClass("ng-hide");
                }
            });
        }
    }
}) 
```

这样，如果定义了自定义隐藏类，它也将适用于此。
（见[https://docs.angularjs.org/api/ng/directive/ngHide](https://docs.angularjs.org/api/ng/directive/ngHide)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T02:12:13.527

结合@Valentyn 和@Josh 的输入，这是一个仅在控制器中进行数据操作的指令，并使用链接函数进行CSS 操作：

```
myApp.directive('note', function() {
    return {
        restrict: 'E',
        controller: function($scope) {
            $scope.text = "Hello, world!";
            $scope.clearText = function() {
                $scope.text = '';
            }
        },
        link: function($scope, $element) {
            $scope.$watch('text.length', function(len){
                $element.css('display', len > 0 ? '' : 'none');
            });
        }
    }
}) 
```

HTML：

```
<note>
    {{text}}
    <br><a ng-click="clearText()">clear text</a>
</note> 
```

[小提琴](http://jsfiddle.net/mrajcok/jGqwa/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T06:49:13.530

ngShow 所做的只是将 CSS`display`属性可变地设置为“none”。因此，最简单的做法就是复制该功能：

```
$scope.$watch( 'text.length', function hideWhenEmpty(length){
  element.css('display', length > 0 ? '' : 'none');
}); 
```

# c# - 跨平台RESTful WCF方法，传递和返回字节数组

> ID：14433420
> 
> 赞同：4
> 
> 时间：2013-01-21T06:31:49.353
> 
> 标签：c#, .net, web-config, cross-platform, wcf-rest

理论上如此简单，但我从来都不是 WCF 配置方面的专家。我想要做的是：我有一个匹配这个签名的 WCF 方法：

```
[OperationContract]
[WebInvoke(Method = "POST")]
Stream PostPackets(Stream rawPackets); 
```

我真正关心的是从 Android/iPhone/Blackberry/任何其他类型的设备获取一个字节数组到我的 wcf 服务，处理该数组，然后发回一个不同的字节数组。就我而言，它可能看起来像：

```
[OperationContract]
[WebInvoke(Method = "POST")]
byte[] PostPackets(byte[] rawPackets); 
```

尽管我看到的所有示例似乎都使用了 Stream。

我已经阅读了许多不同的文章和帖子，但没有直接回答如何在文件传输的上下文之外执行此操作（这不是我的意图）。以下是我面临的问题：

1-我假设我需要使用 webHttpBinding 使该服务成为 RESTful。这是正确的吗？如果是这样，你能指点我一个示例配置吗？

2 - （这绝对是我在任何地方都找不到的！）我需要确保这不会对设备开发人员造成巨大的痛苦。您能否向我展示使用 RESTful 服务的 Android 和 iPhone 设备的示例以及（非常重要）它们如何向我的服务发送字节数组？

请原谅我的菜鸟... WCF 配置是我每天都不会做的事情之一。一旦我弄清楚了我的配置，我通常会继续前进，直到我的下一个项目（这可能是很长时间）之前都不必碰它。请帮忙！

**更新**

我的同事建议我们使用 http 处理程序而不是 wcf。我们真的必须诉诸于此吗？
例如：

```
public void ProcessPackets (HttpContext context) 
```

**更新 2：**

我想知道，有没有办法在没有 JSON 的情况下做到这一点？将数组发布为“text/plain”类型是否有任何缺点/替代方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T09:15:30.487

也许这个简单的（和工作的例子）可以帮助

**服务器**

```
void StartServer()
{
    Task.Factory.StartNew(() =>
    {
        WebServiceHost host = new WebServiceHost(typeof(MyService), new Uri("http://0.0.0.0:80/MyService/"));
        host.Open();
    });
}

[ServiceContract]
public class MyService
{
    [OperationContract]
    [WebInvoke(
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    public byte[] PostPackets(byte[] rawPackets)
    {
        rawPackets[0] = 99;
        return rawPackets;
    }
} 
```

**客户**

```
<html>
<script src='jquery-1.8.3.min.js'></script>

<body>
<script>
         $(document).ready(function () {
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: "/MyService/PostPackets",
                data: JSON.stringify({rawPackets:[65,66,67]}), 
                dataType: "text",
                success: function (data) {
                    //var div = $("#test").empty();
                    //$("#test").html(data.d);
                    alert('success');
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert('error');
                }
            });
        });
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T06:47:21.660

最终解决方案如下。（确实很简单）

服务端：

```
[ServiceContract]
public interface IMyService
{
    [OperationContract]
    [WebInvoke(Method = "POST",
        BodyStyle = WebMessageBodyStyle.Wrapped,
        UriTemplate="TestMethod/")]
    Stream TestMethod(Stream input);

}

public class MyService: IMyService
{
    Stream IMyService.TestMethod(Stream input)
    {
        byte[] buffer = new byte[10000];
        int bytesRead, totalBytesRead = 0;
        this.currentResponseOffset = 0;
        do
        {
            bytesRead = input.Read(buffer, 0, buffer.Length);
            totalBytesRead += bytesRead;
        } while (bytesRead > 0);

        input.Close();

        return new MemoryStream(buffer, 0, totalBytesRead);
    }
} 
```

配置如下：

```
<services>
  <service name="MyService" >
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/Design_Time_Addresses/MyService/" />
        <add baseAddress="net.tcp://localhost:4504/Design_Time_Addresses/MyService/" />
      </baseAddresses>
    </host>
    <endpoint address="MyTCPService" binding="netTcpBinding" contract="IMyTCPService">
    </endpoint>

    <endpoint address="MyHTTPService" binding="webHttpBinding" behaviorConfiguration="web" contract="IMyService"></endpoint>  

    <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange" />
    <endpoint address="mex"  binding="mexHttpBinding" contract="IMetadataExchange"/>
    <!--<endpoint binding="mexHttpsBinding" bindingConfiguration="" contract="IMetadataExchange" />-->
  </service>
</services>
<behaviors>
   <endpointBehaviors>
    <behavior name="web">
      <webHttp />
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

我能够使用 .net 客户端对其进行测试，尽管这篇文章的重点是了解如何使其跨平台。我想我们很快就会看到！感谢@I4V 的帮助，非常感谢。

# ruby-on-rails - 有哪些方法可以知道生产服务器何时关闭？

> ID：14433426
> 
> 赞同：0
> 
> 时间：2013-01-21T06:32:11.590
> 
> 标签：ruby-on-rails, shell, nginx, webserver, unicorn

我们正在使用rails 3.1。我们使用 nginx 作为网络服务器和独角兽作为应用服务器，并且我们正在运行一些后台作业（例如：Solr、延迟作业等）来完成一些任务。我们如何才能知道这些服务器中的任何一个何时出现故障？每个人通过运行一些脚本以自动重新运行该过程或生成一些邮件警报或电话警报来获取信息的常用方法是什么？

需要一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:49:06.580

看看[god](http://godrb.com/ "上帝")或[monit](http://mmonit.com/monit/ "监控")。作为 ruby​​ist 我更喜欢`god`.

# php - php中的致命错误

> ID：14433427
> 
> 赞同：2
> 
> 时间：2013-01-21T06:32:14.093
> 
> 标签：php

```
 if(!empty($home) && !empty($title) && !empty($meta))
{

function updcfg($condition,$status){
$db->query("UPDATE site_config SET status = '".$status."' WHERE condition = '".$condition."' ");
}
updcfg("home",$home);
updcfg("title",$title);
updcfg("meta",$meta);
updcfg("news",$news);
} 
```

您在上面看到的当前代码不起作用并给我这个错误：

```
Fatal error: Call to a member function query() on a non-object in /home/main.php on line 20 
```

我删除了该功能..并且代码没有问题！谁能告诉代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:36:30.010

在函数中传递 $db。

```
function updcfg($condition,$status,$db){
$db->query("UPDATE site_config SET status = '".$status."' WHERE condition = '".$condition."' ");
}
updcfg("home",$home,$db); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:34:37.017

您应该将函数放在 if 语句之外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T06:36:05.420

`$db`没有在函数内部定义`updcfg`，也没有定义为`global`. 所以，有三个选项： 1\. 使用`global`关键字：

```
function updcfg($condition,$status){
global $db; 
```

2.传递`$db`给函数参数：`function updcfg($condition, $status, $db)` 3.函数内部的init `$db`（你做的方式）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T06:36:23.080

请在调用查询方法之前加载数据库类

```
function updcfg($condition,$status){
$this->load->database();
$this->db->query("UPDATE site_config SET status = '".$status."' WHERE condition = '".$condition."' ");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T06:39:31.233

您需要初始化`$db`变量。如果你之前已经初始化在 updcfg 函数中是不活动的，但你可以将`$db`上下文作为参数传递：

```
function updcfg($condition, $status, $db){
    $db->query("UPDATE site_config SET status = '".$status."' WHERE condition = '".$condition."' ");
}
$db = new ....
#Now you can do this
updcfg("home",$home, $db);
updcfg("title",$title,$db);
updcfg("meta",$meta,$db);
updcfg("news",$news,$db); 
```

# python - Numpy：代替迭代数组 - apply_over_axis

> ID：14433428
> 
> 赞同：2
> 
> 时间：2013-01-21T06:32:26.277
> 
> 标签：python, numpy, iteration

据我了解，这`np.apply_over_axis`是迭代 Numpy 数组的可行替代方案，因为这样做 python 方式存在瓶颈，这会使事情变慢；然而，似乎迭代需要大约 9% 的时间`apply_over_axis`！捎带上这篇[之前的帖子](https://stackoverflow.com/questions/8652785/why-does-numpy-apply-along-axis-seem-to-be-slower-than-python-loop)，我决定为自己做一个快速的时间安排：

```
import numpy as np
import timeit

def triv():
     ial = [i for i in xrange(100)]

def super(fluous):
     return fluous

>>> print (timeit.timeit("triv()", setup="from __main__ import triv"))
12.3305490909
>>> print (timeit.timeit("np.apply_along_axis(super, 0, np.arange(100))", setup="from __main__ import np, super"))
130.721563921 
```

为什么会这样？我真的不知道`timeit`那口井的复杂性（或者关于`timeit`这件事的很多事情），但我认为我的例子很简单。我想知道是否有人找到了一个好的解决方法，因为我在非常大的数组中迭代行的笛卡尔积的实际问题是如此缓慢以至于阻碍了进展。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:27:14.847

首先，您的示例很奇怪，因为`apply_over_axis`在一维数组上只会将整个数组作为单个参数传递。它不会为每个元素重复调用。为此，您想要`vectorize`.

不过，更一般地说，numpy 并不能真正加速任意 Python 函数的应用。numpy 的主要优点是它提供了自己的许多数学函数的实现，而且*速度*很快。它不能神奇地发挥任何功能，只是让它运行得更快。

此外，您的示例并不完全平行。一方面，您不会在两者中调用相同的函数。更具体地说，您的测试都包括在定时测试中创建输入——也就是说，您在测试的定时部分中创建`xrange(100)`和内部。`np.arange(100)`因此，您正在测量的部分内容是创建 Numpy 数组比创建`xrange`对象要慢：

```
>>> timeit.timeit("np.arange(100)", "import numpy as np")
0.95243776
>>> timeit.timeit("xrange(100)", "import numpy as np")
0.2129926399999995 
```

这大约是 5 倍。但是在实际应用程序中，您几乎可以肯定已经创建了输入数组，因此这不是一个现实的测试。

使用并行测试，我发现普通列表版本的速度只有大约两倍：

```
def doNothing(crud):
    return crud

>>> timeit.timeit("np.vectorize(doNothing)(thing)", "import numpy as np; from __main__ import doNothing; thing = np.arange(100)")
49.13036320000003
>>> timeit.timeit("[doNothing(x) for x in thing]", "import numpy as np; from __main__ import doNothing; thing = np.arange(100)")
25.873566400000072 
```

此外，如果您应用的是 numpy 函数，则 numpy 版本可以更快：

```
>>> timeit.timeit("np.log(thing)", "import numpy as np; import math; from __main__ import doNothing; thing = np.arange(100)+1")
3.2039433600000393
>>> timeit.timeit("[math.log(x) for x in thing]", "import numpy as np; import math; from __main__ import doNothing; thing = np.arange(100)+1")
37.74219519999997 
```

这个故事的寓意是 numpy 真的是 NUMpy——它是为进行*数值*计算而设计的，并且它具有快速计算的功能。这不仅仅是加速你所有循环的东西。如果您只是有大量对象要对其应用任意函数，那么 numpy 不太可能加快您的代码速度，甚至可能减慢它的速度。（它对于非数字数据仍然非常有用，因为它对多维数组的复杂索引等功能很方便，并且可能比使用嵌套列表等的等效 Python 结构更快。它只是对加速循环没有用处这些结构。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:39:17.617

如果你去你的 numpy 安装目录，你可以在文件`np.apply_along_axis`的`\ma`子目录中找到 python 代码`extras.py`。

其缓慢的原因是，当它将您的函数应用于沿所选轴的数组的一维切片时，它将结果存储在数组中`dtype=object`并跟踪所有 return `dtypes`。一旦完成处理，它会选择`dtype`列表中最大的，并在返回之前重铸整个东西。这使它成为一个非常健壮且非常缓慢的代码。一般来说，最好避免使用numpy中的所有[函数式编程](http://docs.scipy.org/doc/numpy/reference/routines.functional.html)例程：如果需要使用它们，最好不要使用numpy，因为速度不会有。

这并不意味着您的问题无法通过标准、快速、numpy 功能正确解决。你为什么不把它作为一个问题发布？

# caching - 用于缓存的最佳 NoSQL 解决方案

> ID：14433429
> 
> 赞同：2
> 
> 时间：2013-01-21T06:32:43.643
> 
> 标签：caching, nosql, couchbase, distributed-caching

最近我开始在我的项目基于 Couchbase 的缓存系统上遇到问题。当我尝试检查对象是否已经在数据库中时，似乎遇到了奇怪的缓存未命中。这导致系统无法将对象保存在 prumary 数据存储中，因为它已经在数据库中。

所以，我想玩弄另一个 NoSQL 解决方案，以了解它是 Couchbase 问题还是我的缓存层中的问题。我知道大多数人为此使用 memcache，但是 memcache 存储桶已经集成到 Couchbecase 中，所以我需要一些不同的东西。

要求是：

1.  将数据存储在 RAM 中
2.  能够在 Windows 上运行
3.  用于监控的集成工具（我真的很喜欢 Couchbase 网络界面）
4.  快速读取和足够的写入速度
5.  能够以键值方式存储对象（不需要查询支持）
6.  分布式缓存
7.  自由的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:41:48.363

Redis 怎么样？

Redis 有一个不错的 GUI：[https ://github.com/steelThread/redmon](https://github.com/steelThread/redmon)

# c# - 链接不同返回类型的任务（TPL 和 HttpWebRequest）

> ID：14433437
> 
> 赞同：1
> 
> 时间：2013-01-21T06:33:00.270
> 
> 标签：c#, task-parallel-library, async-await

伙计们，我发现自己处于一个奇怪的境地。我需要将不同返回类型的任务链接在一起。通常，您可以执行以下操作

```
Task<T> t = Task<T>.Factory.StartNew(() => ... some T instance);
Task t2 = t.ContinueWith<U>(parent => ...);
return Task.WhenAll(t, t2); 
```

然而，我的复杂之处在于使用`FromAsync`辅助方法来包装开始/结束对并将其转换为任务。我正在尝试使用 HttpWebRequest 和 .NET 4.0 上的任务编写异步客户端（因此 await 不是一个选项）。

我的问题是返回类型`FromAsync`是 Task 本身，它阻止我在`ContinueWith`方法中使用它（`ContinueWith`期望返回类型并将数据本身包装在一个`Task`对象中）。

这是我到目前为止的代码，它产生了正确的函数结果，但不是真正的异步：

```
public Task<string> GetHttpRequest(string url, string contentType)
{
    var httpWebRequest = CreateHttpWebRequest(url, "GET", contentType);
    Task<WebResponse> httpTask = Task.Factory.FromAsync<WebResponse>(httpWebRequest.BeginGetResponse, httpWebRequest.EndGetResponse, null);

    return httpTask.ContinueWith(httpAntecedent =>
          {
              WebResponse webResponse = httpAntecedent.Result;
              Stream responseStream = webResponse.GetResponseStream();
              byte[] data = new byte[webResponse.ContentLength];

              var streamReadTask = Task<int>.Factory.FromAsync(responseStream.BeginRead, responseStream.EndRead, data, 0, data.Length, TaskCreationOptions.AttachedToParent);

              return streamReadTask.ContinueWith(parent =>
                  {
                      responseStream.Close();
                      webResponse.Close();

                      return Encoding.UTF8.GetString(data);
                  });
          }).Result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:55:10.333

重新表述你的问题，你有`Task<Task<string>>`并且你想从中得到`Task<string>`，而不是同步等待`Task`完成。

在 C# 5.0 中，您可以使用 double `await`:来执行此操作`return await await task;`。

如果没有 C# 5.0，您可以使用[`Unwrap()`](http://msdn.microsoft.com/en-us/library/dd781129.aspx)，它完全符合您的要求：`return task.Unwrap();`.

如果出于某种原因，您想自己执行此操作，则可以将`ContinueWith()`inside`ContinueWith()`与`TaskCompletionSource`.

* * *

但是您的代码有缺陷：它假定您将在一次读取中获得整个响应。这根本无法保证，实际上通常不会正常工作。正确执行此操作将需要更复杂的代码，并且可能还需要`TaskCompletionSource`.

# java - 如何使用 NamedParameterJDBCTemplate 中的字符串列表来获取结果

> ID：14433438
> 
> 赞同：23
> 
> 时间：2013-01-21T06:33:04.170
> 
> 标签：java, spring, spring-jdbc

尝试使用 Spring-JDBC。我[以此](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html)为参考。我正在尝试获取具有相同姓氏的演员列表。运行这段代码给了我想要的结果：

```
public List<String> getActorsWithSameLastName(String lastName,
            NamedParameterJdbcTemplate template) {
        String query = "SELECT FIRSTNAME FROM ACTORS WHERE LASTNAME=:LASTNAME";
        Map<String, String> paramMap = new HashMap<String, String>();
        paramMap.put("LASTNAME", lastName);
        return template.queryForList(query, paramMap, String.class);
    } 
```

我有一个`List<String>`姓氏。如何使用我拥有的列表获取演员列表？我是遍历姓氏列表并`getActorsWithSameLastName()`每次都调用，还是 spring 提供了一种方法来进行迭代并为我获取结果？请指教。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-21T06:40:58.593

使用 IN 子句..

[如何在 JDBCTemplates 中使用 SELECT IN 子句？](https://stackoverflow.com/questions/4504592/how-to-use-select-in-clause-in-jdbctemplates)

```
List<String> lastnames= new ArrayList<>();

Map namedParameters = Collections.singletonMap("lastnamevalues", lastnames);

StringBuffer recordQueryString = new StringBuffer();

recordQueryString.append("select FIRSTNAME, LASTNAME from ACTORS where lastname in (:lastnamevalues)");

List nameInvolvements = this.namedparameterJdbcTemplate.query(recordQueryString.toString(), namedParameters, new MyMapper()); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-05T01:24:36.030

您还可以使用[MapSqlParameterSource](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/core/namedparam/MapSqlParameterSource.html)

```
String query = "SELECT FIRSTNAME FROM ACTORS WHERE LASTNAME in (:LASTNAME)";
Set<String> ids = ....;

MapSqlParameterSource parameters = new MapSqlParameterSource();
parameters.addValue("LASTNAME", ids);

this.namedparameterJdbcTemplate.query(query, parameters); 
```

# c# - 添加到表时出现空异常

> ID：14433439
> 
> 赞同：0
> 
> 时间：2013-01-21T06:33:10.113
> 
> 标签：c#, asp.net, null

我正在使用以下代码从 Web 表单中收集数据：

```
secondContact.FirstName = txtFirstNameContact2.Text;
secondContact.LastName = txtlastNameContact2.Text;
secondContact.EmailAddress = txtEmailAddressContact2.Text;
secondContact.PhoneNumber = txtPhone1Contact2.Text + txtPhone2Contact2.Text + txtPhone3Contact2.Text;
if (!string.IsNullOrEmpty(rblContactTypeContact2.SelectedValue))
{
    secondContact.SecondaryContactTypeID = Convert.ToInt32(rblContactTypeContact2.SelectedValue);
}
secondContact.ContactPosition = 2;
secondContact.ProspectID = prospect.Id; 
```

将代码发送到存储库以使用以下代码保存（它成功获取了前景.Id）：

```
if (prospect.Id != 0)
   {
    if (!string.IsNullOrEmpty(secondContact.FirstName) || !string.IsNullOrEmpty(secondContact.LastName) || !string.IsNullOrEmpty(secondContact.EmailAddress) || !string.IsNullOrEmpty(secondContact.PhoneNumber))
    {
        this.repository.SaveAltContact(prospect.Id, 2, secondContact);
    }
} 
```

存储库尝试保存数据：

```
public void SaveAltContact(int prospectID, int contactPosition, SecondaryContact contact)
{
    using (var context = new CoyleHomeBuyerEntities())
    {
        SecondaryContact currentAltContact = new Model.SecondaryContact();

        currentAltContact = (from sec in context.SecondaryContact
                             where sec.ContactPosition == contactPosition
                             where sec.ProspectID == prospectID
                             select sec).FirstOrDefault();

        if (currentAltContact == null)
        {
            context.AddToSecondaryContact(currentAltContact);
        }

        currentAltContact.FirstName = contact.FirstName;
        currentAltContact.LastName = contact.LastName;
        currentAltContact.EmailAddress = contact.EmailAddress;
        currentAltContact.PhoneNumber = contact.PhoneNumber;
        currentAltContact.SecondaryContactTypeID = contact.SecondaryContactTypeID;
        currentAltContact.ProspectID = prospectID;
        currentAltContact.ContactPosition = contactPosition;

        context.SaveChanges();
    }
} 
```

在此行之后它总是失败并出现 Null 异常：

```
context.AddToSecondaryContact(currentAltContact); 
```

我很困惑，因为我希望上面的查询此时返回一个 NULL 值。 `SecondaryContactID`设置为主键并自动递增。

```
Exception Details: System.ArgumentNullException: Value cannot be null.
Parameter name: entity 
```

有人可以指出我在尝试向数据库添加新行时为什么失败的正确方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:36:34.557

您正在添加 null 作为记录，`contact`而不是`currentAltContact`在数据库中没有记录时添加。AddToSecondaryContact 方法将具有添加新记录的联系人对象和当您想要更新记录时的 currentAltContact。

*改变*

```
if (currentAltContact == null)
{
    context.AddToSecondaryContact(currentAltContact);
} 
```

*至*

```
if (currentAltContact == null)
{
    context.AddToSecondaryContact(contact);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:52:25.817

实际上，我通过简单地在顶部声明 currentAltContact 变量并仅在有空记录时实例化一个新对象来使其工作

```
public void SaveAltContact(int prospectID, int contactPosition, SecondaryContact contact)
    {
        using (var context = new CoyleHomeBuyerEntities())
        {
                SecondaryContact currentAltContact;

            currentAltContact = (from sec in context.SecondaryContact
                                 where sec.ContactPosition == contactPosition
                                 where sec.ProspectID == prospectID
                                 select sec).FirstOrDefault();

            if (currentAltContact == null)
            {
                currentAltContact = new Model.SecondaryContact();
                context.AddToSecondaryContact(currentAltContact);
            }

            currentAltContact.FirstName = contact.FirstName;
            currentAltContact.LastName = contact.LastName;
            currentAltContact.EmailAddress = contact.EmailAddress;
            currentAltContact.PhoneNumber = contact.PhoneNumber;
            currentAltContact.SecondaryContactTypeID = contact.SecondaryContactTypeID;
            currentAltContact.ProspectID = prospectID;
            currentAltContact.ContactPosition = contactPosition;

            context.SaveChanges();
        }
    } 
```

# asp.net - 如何在 asp .net 的下拉列表中显示 kruti dev 10 印地语字体？

> ID：14433440
> 
> 赞同：0
> 
> 时间：2013-01-21T06:33:11.217
> 
> 标签：asp.net

我已将下拉列表数据源设置为访问文件，但它以英文显示字体而不是 kruti dev 10。我已将下拉列表的字体设置为 kruti dev 10。但它仍以英文显示字体。![在此处输入图像描述](../Images/769d1ae3d5682ea8fb31a205de554d36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:54:56.063

您必须管理**.config**文件上的本地化设置。如果您在问题中输入一些代码，那将很容易。不管怎样，看看这篇关于 CodeProject [多语言下拉列表框的文章](http://www.codeproject.com/Questions/136272/multi-language-app_resources-dropdownlist-box-engl)

# batch-file - 批处理文件选择指定在 Windows Server 2008 R2 Enterprise 上创建/修改的文件

> ID：14433442
> 
> 赞同：1
> 
> 时间：2013-01-21T06:33:20.257
> 
> 标签：batch-file, batch-processing

当我在 Windows Server 2008 上运行以下批处理时遇到问题，它将选择昨天和今天日期的那些文件，但我只想要今天。当我尝试在 Windows 7 上测试这个批处理文件时，它工作正常，它只会复制今天的文件。
那么是因为Windows不同还是代码？有什么建议吗？？
我的批处理文件代码：
`robocopy "D:\Program Files\My LogFiles\JobServer_01" "D:\Program Files\My LogFiles\LogDestination" s*.txt /MAXAGE:1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:14:28.987

您是否尝试过使用 vb 脚本？使用 vb 处理基于日期的操作然后使用批处理调用相同的 vb 脚本要简单得多。

```
target="d:\path2\"
Set objFSO = CreateObject("Scripting.FileSystemObject")
objStartFolder = "D:\path1"
Set objFolder = objFSO.GetFolder(objStartFolder)
Set colFiles = objFolder.Files
For Each objFile in colFiles
    if (DateDiff("d",objFile.DateCreated, NOW)=<1) Then  
    objFSO.MoveFile objFile, target
    Wscript.Echo objFile.Name & vbcrlf  
    end if
Next 
```

将上述代码保存在 .vbs 文件中。用所需的文件夹替换 startfolder 和 target 变量。这将轮询今天创建的任何文件并将其复制到目标文件夹。

# php - 在 Centos 6 上使用 yum 安装 PHP。位置在哪里？

> ID：14433444
> 
> 赞同：0
> 
> 时间：2013-01-21T06:33:25.753
> 
> 标签：php, centos, yum

我一直在使用 yum 安装 php。我想找到我的 php 目录来编译我的地图服务器。谁能告诉我我的php的位置在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T07:32:48.743

所以只要运行这个：

```
whereis php
which php 
```

# linux - fcitx 不适用于铬

> ID：14433449
> 
> 赞同：1
> 
> 时间：2013-01-21T06:34:00.693
> 
> 标签：linux

我之前用过 Archlinux + Slim + Openbox，我的 fcitx 运行正常。

最近，我用 Awesome 替换了 OpenBox。之后，我无法正常使用 fcitx 与铬和叶垫。

但是，它在终端和歌剧中运行良好。

我尝试过其他一些平铺窗口，例如 Xmonad、Stumpwm，但情况相同。

我的 .xinitrc 文件如下，

```
eval `dbus-launch --sh-syntax --exit-with-session`
LC_CTYPE=zh_CN.UTF-8
#fcitx
export GTK_IM_MODULE=fcitx 
export QT_IM_MODULE=fcitx 
export XMODIFIERS="@im=fcitx"

fcitx &
exec awesome 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:51:08.753

请查看截图： http: [//fcitx-im.org/wiki/Configure_%28Other%29](http://fcitx-im.org/wiki/Configure_%28Other%29)

如果“fcitx”没有作为屏幕截图显示在菜单中，那么您的安装肯定有问题。

确保您已安装 fcitx-gtk2。

如果您已经安装了它，但它仍然不在菜单中，那可能是因为升级时 pacman 中的错误/限制，请重新安装它以确保安装后脚本正确。

# python - python gae中的类指的是什么？

> ID：14433450
> 
> 赞同：0
> 
> 时间：2013-01-21T06:34:05.550
> 
> 标签：python, google-app-engine, google-cloud-datastore

我在 facebook.py 用户文件中看到了这一点。

```
class User(db.Model):
    username = db.StringProperty(required=True)
    password = db.StringProperty(required=True)
@classmethod
def get_by_email(cls, email):
    return cls.query(cls.email == email).get() 
```

cls 是什么意思？如果你把self，它通常是指用户类。但是 cls 指的是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T06:36:50.697

名称无关紧要，但应用`classmethod`装饰器使该方法成为类方法。在这种情况下，第一个参数是一个类，而不是一个实例。

请看一下使用以下代码的实例、类和静态方法的比较：

```
>>> class Test(object):
    def instance_method(sth, x):
        return sth, x
    @classmethod
    def class_method(sth, x):
        return sth, x
    @staticmethod
    def static_method(x):
        return x

>>> a = Test()
>>> a.instance_method('abc')
(<__main__.Test object at 0x0000000002C26D30>, 'abc')
>>> a.class_method('abc')
(<class '__main__.Test'>, 'abc')
>>> a.static_method('abc')
'abc' 
```

按照惯例，当您引用同一个实例时，您将其命名为`self`。当你提到它的类时，你命名它`cls`。这只是一个约定，但为了保持一致性，最好遵循它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T06:40:06.100

“cls”是用于表示“类”的传统标识符。

@classmethod 装饰器调用该方法，例如。`obj.method(arg)`，向第一个参数（在本例中为 cls）传递一个表示对象类的类对象。

如果没有 @classmethod 装饰器，对象本身将被传递给第一个参数（在本例中为 cls）。

# c - 如何在运行时检查内存地址是否可写？

> ID：14433468
> 
> 赞同：6
> 
> 时间：2013-01-21T06:35:41.863
> 
> 标签：c, unix, operating-system

如何在运行时检查内存地址是否可写？

例如，我想在下面的代码中实现 is_writable_address。是否可以？

```
#include <stdio.h>

int is_writable_address(void *p) {
    // TODO
}

void func(char *s) {
    if (is_writable_address(s)) {
        *s = 'x';
    }
}

int main() {
    char *s1 = "foo";
    char s2[] = "bar";

    func(s1);
    func(s2);
    printf("%s, %s\n", s1, s2);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T11:07:41.067

我一般同意那些认为这是一个坏主意的人。

也就是说，鉴于问题有`UNIX`标签，在类 UNIX 操作系统上执行此操作的经典方法是使用`read()`from `/dev/zero`：

```
#include <fcntl.h>
#include <unistd.h>

int is_writeable(void *p)
{
    int fd = open("/dev/zero", O_RDONLY);
    int writeable;

    if (fd < 0)
        return -1; /* Should not happen */

    writeable = read(fd, p, 1) == 1;
    close(fd);

    return writeable;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:01:57.317

这在技术上可能是可行的，但没有可移植的方式来做到这一点，而且永远没有必要这样做。如果您设法忘记了一个指针是否可写，那么还有很多您也不知道的更重要的细节，比如它指向什么，以及您的代码是否**应该**写入它.

# java - 如何让我的应用显示为图库？

> ID：14433475
> 
> 赞同：0
> 
> 时间：2013-01-21T06:36:18.670
> 
> 标签：java, android, gallery, share, android-4.2-jelly-bean

当您想要添加/共享图片时，有些应用程序会显示为图库（如果您单击共享 -> 图库，您可以在原生 Android 图库应用程序和自定义图库应用程序之间进行选择）。

我想自己写一个这样的画廊应用程序。如何管理我自己的应用程序以在 Android 上显示为图库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:59:37.840

我认为您正在寻找的是，当用户想要“挑选”一个项目时，您的应用程序应该会出现。为此，请在清单中的标记内包含这些行：

```
<action android:name="android.intent.action.PICK" />
<category android:name="android.intent.category.DEFAULT" /> 
```

您可以通过指定 mimetype 进一步过滤用户可以从您的应用中“挑选”的项目类型：

```
<data android:mimeType="image/*" />
<data android:mimeType="video/*" /> 
```

# android - 在 Android 上的 chrome 浏览器中添加书签

> ID：14433480
> 
> 赞同：2
> 
> 时间：2013-01-21T06:36:30.367
> 
> 标签：android, browser, bookmarks, android-browser

是否可以向 Google chrome 浏览器 Android 添加书签（通过代码）？有谁知道怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T12:26:28.723

是的，这是可能的，我可以做到。

如果您熟悉内容提供程序，默认和 chrome 都提供书签内容提供程序，因此我们可以使用它们轻松更改/插入书签。

```
ContentValues values = new ContentValues();
values.put(Browser.BookmarkColumns.TITLE, "Yahoo Inc.");
values.put(Browser.BookmarkColumns.URL, "http://www.yahoo.com");
values.put(Browser.BookmarkColumns.BOOKMARK, 1);
values.put(Browser.BookmarkColumns.DATE, 0);

// add bookmark to default browser              
getContentResolver().insert(Browser.BOOKMARKS_URI, values);

// add bookmark to Chrome
Uri chromeUri = Uri.parse("content://com.android.chrome.browser/bookmarks");
getContentResolver().insert(chromeUri,values); 
```

不要忘记在清单中添加写权限：

```
<uses-permission android:name="com.android.browser.permission.WRITE_HISTORY_BOOKMARKS"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T20:55:36.170

Chrome 的内容提供者的 URI 是“content://com.android.chrome.ChromeBrowserProvider/bookmarks”。但默认浏览器的 URI 是 Browser.BOOKMARKS_URI

```
ContentValues values = new ContentValues();
values.put(Browser.BookmarkColumns.TITLE, "title");
values.put(Browser.BookmarkColumns.URL, "http://ss.com");
values.put(Browser.BookmarkColumns.BOOKMARK, 1);
values.put(Browser.BookmarkColumns.CREATED, 0);
values.put(Browser.BookmarkColumns.DATE, 0);
values.put("parentId", 3); // just for Chrome

getContentResolver().insert(Uri.parse("content://com.android.chrome.ChromeBrowserProvider/bookmarks"), values); 
```

已在 Android 4.04 和 Chrome 18.0.1 中测试。

# android - 如何在 Android 中恢复 MediaPlayer？

> ID：14433482
> 
> 赞同：4
> 
> 时间：2013-01-21T06:36:31.380
> 
> 标签：android, android-mediaplayer

我正在制作一个用于视频流的媒体播放器。它工作正常，但是当我按下主页按钮时，活动再次进入后台，我打开媒体播放器，而不是从头开始，它没有恢复。而不是如何在媒体播放器中恢复视频。这是我的代码

```
public class VideoSample extends Activity implements OnSeekBarChangeListener, Callback, OnPreparedListener, OnCompletionListener, OnBufferingUpdateListener,
    OnClickListener, OnSeekCompleteListener, AnimationListener {
private TextView textViewPlayed;
private TextView textViewLength;
private SeekBar seekBarProgress;
private SurfaceView surfaceViewFrame;
private ImageView imageViewPauseIndicator;
private MediaPlayer player;
private SurfaceHolder holder;
private ProgressBar progressBarWait;
private Timer updateTimer;
private Bundle extras;
private Animation hideMediaController;
private LinearLayout linearLayoutMediaController;
private static final String TAG = "log_tag";
private boolean b =false;
private int seekint,seeksec;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.customvideoview);
    extras = getIntent().getExtras();

    linearLayoutMediaController = (LinearLayout) findViewById(R.id.linearLayoutMediaController);
    linearLayoutMediaController.setVisibility(View.GONE);

    hideMediaController = AnimationUtils.loadAnimation(this, R.anim.disapearing);
    hideMediaController.setAnimationListener(this);

    imageViewPauseIndicator = (ImageView) findViewById(R.id.imageViewPauseIndicator);
    imageViewPauseIndicator.setVisibility(View.GONE);
    if (player != null) {
        if (!player.isPlaying()) {
            imageViewPauseIndicator.setVisibility(View.VISIBLE);
        }
    }

    textViewPlayed = (TextView) findViewById(R.id.textViewPlayed);
    textViewLength = (TextView) findViewById(R.id.textViewLength);

    surfaceViewFrame = (SurfaceView) findViewById(R.id.surfaceViewFrame);
    surfaceViewFrame.setOnClickListener(this);
    surfaceViewFrame.setClickable(false);

    seekBarProgress = (SeekBar) findViewById(R.id.seekBarProgress);
    seekBarProgress.setOnSeekBarChangeListener(this);
    seekBarProgress.setProgress(0);

    progressBarWait = (ProgressBar) findViewById(R.id.progressBarWait);

    holder = surfaceViewFrame.getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    player = new MediaPlayer();
    player.setOnPreparedListener(this);
    player.setOnCompletionListener(this);
    player.setOnBufferingUpdateListener(this);
    player.setOnSeekCompleteListener(this);
    player.setScreenOnWhilePlaying(true);
    player.setDisplay(holder);
}
@Override
protected void onDestroy() {
super.onDestroy();
        player.stop();
        player.release();
        player = null;
        Toast.makeText(VideoSample.this, "back",Toast.LENGTH_SHORT).show();
        finish();
}
private void playVideo() {
    if (extras.getString("video_path").equals("VIDEO_URI")) {
        showToast("Please, set the video URI in HelloAndroidActivity.java in onClick(View v) method");
    } else {
        new Thread(new Runnable() {
            public void run() {
                try {
                    player.setAudioStreamType(AudioManager.STREAM_MUSIC);
                    player.setDataSource(VideoSample.this, Uri.parse(extras.getString("video_path")));
                    //player.setVolume(0, 0);
                    player.setVolume(AudioManager.ADJUST_LOWER, AudioManager.ADJUST_RAISE);
                    //player.setAudioStreamType(AudioEncoder.DEFAULT);
                    player.prepareAsync();
                } catch (IllegalArgumentException e) {
                    showToast("Error while playing video");
                    e.printStackTrace();
                    Log.i(TAG,"tag"+ e.getMessage());
                } catch (IllegalStateException e) {
                    showToast("Error while playing video");
                    e.printStackTrace();
                    Log.i(TAG, "tag"+e.getMessage());
                } catch (IOException e) {
                    e.printStackTrace();
                    showToast("Error while playing video. Please, check your network connection.");
                    Log.i(TAG, "tag"+e.getLocalizedMessage());
                }
            }
        }).start();
    }
}

private void showToast(final String string) {
    runOnUiThread(new Runnable() {
        public void run() {
            Toast.makeText(VideoSample.this, string, Toast.LENGTH_LONG).show();
            finish();
        }
    });
}

private void hideMediaController() {
    new Thread(new Runnable() {
        public void run() {
            try {
                Thread.sleep(5000);
                runOnUiThread(new Runnable() {
                    public void run() {
                        linearLayoutMediaController.startAnimation(hideMediaController);
                    }
                });
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }).start();
}

public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    Log.i(TAG, "========== onProgressChanged : " + progress + " from user: " + fromUser);
    if (!fromUser) {
        textViewPlayed.setText(Utils.durationInSecondsToString(progress));
    }
}

public void onStartTrackingTouch(SeekBar seekBar) {
}

public void onStopTrackingTouch(SeekBar seekBar) {
    if (player.isPlaying()) {
        progressBarWait.setVisibility(View.VISIBLE);
        player.seekTo(seekBar.getProgress() * 1000);
        Log.i(TAG, "========== SeekTo : " + seekBar.getProgress());
    }
}

public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {

}

public void surfaceCreated(SurfaceHolder holder) {
    playVideo();
}

public void surfaceDestroyed(SurfaceHolder holder) {

}

public void onPrepared(MediaPlayer mp) {
    if (!player.isPlaying()) {
        b = true;
        player.start();

        updateMediaProgress();
        linearLayoutMediaController.setVisibility(View.VISIBLE);
        hideMediaController();
    }
    Log.i(TAG, "========== onPrepared ===========");
    int duration = mp.getDuration() / 1000; // duration in seconds
    seekBarProgress.setMax(duration);
    textViewLength.setText(Utils.durationInSecondsToString(duration));
    progressBarWait.setVisibility(View.GONE);

    // Get the dimensions of the video
    int videoWidth = player.getVideoWidth();
    int videoHeight = player.getVideoHeight();
    float videoProportion = (float) videoWidth / (float) videoHeight;
    Log.i(TAG, "VIDEO SIZES: W: " + videoWidth + " H: " + videoHeight + " PROP: " + videoProportion);

    // Get the width of the screen
    int screenWidth = getWindowManager().getDefaultDisplay().getWidth();
    int screenHeight = getWindowManager().getDefaultDisplay().getHeight();
    float screenProportion = (float) screenWidth / (float) screenHeight;
    Log.i(TAG, "VIDEO SIZES: W: " + screenWidth + " H: " + screenHeight + " PROP: " + screenProportion);

    android.view.ViewGroup.LayoutParams lp = surfaceViewFrame.getLayoutParams();

    if (videoProportion > screenProportion) {
        lp.width = screenWidth;
        lp.height = (int) ((float) screenWidth / videoProportion);
    } else {
        lp.width = (int) (videoProportion * (float) screenHeight);
        lp.height = screenHeight;
    }

    surfaceViewFrame.setLayoutParams(lp);

    surfaceViewFrame.setClickable(true);
}

public void onCompletion(MediaPlayer mp) {
    mp.stop();
    if (updateTimer != null) {
        updateTimer.cancel();
    }
    finish();
}

private void updateMediaProgress() {
    updateTimer = new Timer("progress Updater");
    updateTimer.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {
            runOnUiThread(new Runnable() {
                public void run() {
                    if(player != null){
                    int position = player.getCurrentPosition();
                    seekBarProgress.setProgress(position / 1000);
                    }
                }
            });
        }
    }, 0, 1000);
}

public void onBufferingUpdate(MediaPlayer mp, int percent) {
    Log.v("log_tag","buffer"+mp.getDuration()*percent/100);
    if(b){
    int progress = (int) ((float) mp.getDuration() * ((float) percent / (float) 100));
    seekBarProgress.setSecondaryProgress(progress / 1000);
    }
}

public void onClick(View v) {
    if (v.getId() == R.id.surfaceViewFrame) {
        if (linearLayoutMediaController.getVisibility() == View.GONE) {
            linearLayoutMediaController.setVisibility(View.VISIBLE);
            hideMediaController();
        } else if (player != null) {
            if (player.isPlaying()) {
                b = false;
                player.pause();
                imageViewPauseIndicator.setVisibility(View.VISIBLE);
            } else {
                b = true;
                player.start();
                imageViewPauseIndicator.setVisibility(View.GONE);
            }
        }
    }
}

public void onSeekComplete(MediaPlayer mp) {
    progressBarWait.setVisibility(View.GONE);
}

public void onAnimationEnd(Animation animation) {

}

public void onAnimationRepeat(Animation animation) {

}

public void onAnimationStart(Animation animation) {
    linearLayoutMediaController.setVisibility(View.GONE);
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T09:16:18.327

为了暂停我使用的媒体播放器：

```
Mediaplayer.pause();
media_length=Mediaplayer.getCurrentPosition(); 
```

并从停止的位置恢复播放器：

```
Mediaplayer.seekTo(length);
Mediaplayer.start(); 
```

设置搜索栏的位置后，您的代码`Mediaplayer.start();`中丢失了。

# java - 为每个单独的项目单击膨胀单独的菜单

> ID：14433484
> 
> 赞同：0
> 
> 时间：2013-01-21T06:36:40.427
> 
> 标签：java, android, eclipse, android-contextmenu

从这里的大量帮助中，每当单击一个项目时，我都能够使用此代码来膨胀上下文菜单。但是，我无法弄清楚如何为每个项目添加单独的单独菜单。当单击不同的项目时，我希望弹出一个不同的菜单。现在，无论我单击哪个项目，都会弹出相同的菜单。我该如何解决这个问题？这是我正在使用的代码。

```
package com.carouseldemo.main;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.MenuInflater;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

import com.carouseldemo.controls.Carousel;
import com.carouseldemo.controls.CarouselAdapter;
import com.carouseldemo.controls.CarouselAdapter.OnItemClickListener;
import com.carouseldemo.controls.CarouselAdapter.OnItemSelectedListener;
import com.carouseldemo.controls.CarouselItem;

public class MainActivity extends Activity {

     @Override
      public void onCreateContextMenu (ContextMenu menu, View v, ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.testmenu, menu);
      }

        /** Called when the activity is first created.
         * @return */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    MediaPlayer mp = MediaPlayer.create(this, R.raw.radio);
    mp.start();
    Carousel carousel = (Carousel)findViewById(R.id.carousel);
    registerForContextMenu (carousel);
    carousel.setOnItemClickListener(new OnItemClickListener(){

                    public void onItemClick(CarouselAdapter<?> parent, View view,
                                    int position, long id) {       

                            openContextMenu (view);
                            Toast.makeText(MainActivity.this,
                                            String.format("%s has been clicked",
                                            ((CarouselItem)parent.getChildAt(position)).getName()),
                                            Toast.LENGTH_SHORT).show();                            
                    }

                    @Override
                    public void onCreateContextMenu(ContextMenu menu,
                            View v, ContextMenuInfo menuInfo) {
                        // TODO Auto-generated method stub

                    }

    });

    carousel.setOnItemSelectedListener(new OnItemSelectedListener(){

                    public void onItemSelected(CarouselAdapter<?> parent, View view,
                                    int position, long id) {

                    final TextView txt = (TextView)(findViewById(R.id.selected_item));

                            switch(position){
                            case 0:
                                    txt.setText("The cat (Felis catus), also known as the domestic cat or housecat to distinguish it from other felids and felines, is a small, usually furry, domesticated, carnivorous mammal that is valued by humans for its companionship and for its ability to hunt vermin and household pests. Cats have been associated with humans for at least 9,500 years, and are currently the most popular pet in the world. Owing to their close association with humans, cats are now found almost everywhere in the world.");
                                    break;
                            case 1:
                                    txt.setText("The hippopotamus (Hippopotamus amphibius), or hippo, from the ancient Greek for \"river horse\" (á¼±Ï€Ï€Î¿Ï€ÏŒÏ„Î±Î¼Î¿Ï‚), is a large, mostly herbivorous mammal in sub-Saharan Africa, and one of only two extant species in the family Hippopotamidae (the other is the Pygmy Hippopotamus.) After the elephant, the hippopotamus is the third largest land mammal and the heaviest extant artiodactyl.");
                                    break;
                            case 2:
                                    txt.setText("A monkey is a primate, either an Old World monkey or a New World monkey. There are about 260 known living species of monkey. Many are arboreal, although there are species that live primarily on the ground, such as baboons. Monkeys are generally considered to be intelligent. Unlike apes, monkeys usually have tails. Tailless monkeys may be called \"apes\", incorrectly according to modern usage; thus the tailless Barbary macaque is called the \"Barbary ape\".");
                                    break;
                            case 3:
                                    txt.setText("A mouse (plural: mice) is a small mammal belonging to the order of rodents. The best known mouse species is the common house mouse (Mus musculus). It is also a popular pet. In some places, certain kinds of field mice are also common. This rodent is eaten by large birds such as hawks and eagles. They are known to invade homes for food and occasionally shelter.");
                                    break;
                            case 4:
                                    txt.setText("The giant panda, or panda (Ailuropoda melanoleuca, literally meaning \"black and white cat-foot\") is a bear native to central-western and south western China.[4] It is easily recognized by its large, distinctive black patches around the eyes, over the ears, and across its round body. Though it belongs to the order Carnivora, the panda's diet is 99% bamboo.");
                                    break;
                            case 5:
                                    txt.setText("Rabbits (or, colloquially, bunnies) are small mammals in the family Leporidae of the order Lagomorpha, found in several parts of the world. There are eight different genera in the family classified as rabbits, including the European rabbit (Oryctolagus cuniculus), cottontail rabbits (genus Sylvilagus; 13 species), and the Amami rabbit (Pentalagus furnessi, an endangered species on Amami ÅŒshima, Japan)");
                                    break;
                            }

                    }

                    public void onNothingSelected(CarouselAdapter<?> parent) {
                    }

    }
    );

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:00:24.547

这在android中很简单。唯一的问题是您可能必须动态地向系统添加菜单，而不是使用 xml 文件加载菜单项或根据用户的选择加载不同的 xml 菜单。

这是一个示例应用程序，它显示了如何执行此操作，

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
        if(flag)
        {
        menu.add("hi");
        menu.add("this");
        }
        else
        {
            menu.add("context");
            menu.add("menu");
        }
    super.onCreateContextMenu(menu, v, menuInfo);
} 
```

上述基于标志值的方法膨胀了不同的菜单项集。

下面是 onCreate() 方法，它有一个按钮，每次点击它都会在其中注册上下文菜单。

```
 Button button=null;
    boolean flag=false;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    button=(Button)findViewById(R.id.button1);
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            if(flag)
            {
                flag=false;
            }
            else
            {
                flag=true;
            }
            registerForContextMenu(v);
            openContextMenu(v);
        }
    });
    } 
```

这是输出，

当标志为真时，

![在此处输入图像描述](../Images/8767a4479f36a28134578f7b9ba087af.png)

当标志为假时，

![在此处输入图像描述](../Images/d0128f5bbf5addee324311c971d6aa5a.png)

而且我相信关键是`registerForContextMenu(v);`在需要加载新菜单项时调用。

# php - wamp 子域别名奇怪的行为

> ID：14433485
> 
> 赞同：0
> 
> 时间：2013-01-21T06:36:40.600
> 
> 标签：php, mod-rewrite, localhost, wamp, alias

我在 Windows 7 上使用 WAMP

已将 zf2-tutorial.localhost 设为别​​名，已将其添加到 drivers/etc/hosts 中还启用了虚拟主机设置：

```
Include conf/extra/httpd-vhosts.conf 
```

已根据此在此文件中设置了我的别名

```
<VirtualHost *:80>
    ServerName zf2-tutorial.localhost
    DocumentRoot /path/to/zf2-tutorial/public
    SetEnv APPLICATION_ENV "development"
    <Directory /path/to/zf2-tutorial/public>
        DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

当我打开 zf2-tutorial.localhost 时，它会按预期显示 zend 页面。但是当我试图打开 localhost 页面时，它会显示：

```
Forbidden

You don't have permission to access / on this server. 
```

在 httpd.conf 中禁用虚拟主机，允许打开 localhost 但无法打开 zf2-tutorial.localhost

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:10:37.270

[此处](https://superuser.com/questions/539850/after-setup-virtual-host-my-wampserver-has-strange-behavior)可能重复。

为了能够在启用虚拟主机时访问 localhost，您的 httpd-vhosts.conf 中的第一个条目需要命名为 localhost 并链接到您的 Web 根目录。

```
<VirtualHost *:80>
     ServerName localhost
     DocumentRoot "path/to/your/www/folder"
</VirtualHost>
<VirtualHost *:80>
    ServerName zf2-tutorial.localhost
    DocumentRoot /path/to/zf2-tutorial/public
    SetEnv APPLICATION_ENV "development"
    <Directory /path/to/zf2-tutorial/public>
        DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

[请参阅设置 Apache 以服务多个站点](http://www.virendrachandak.com/techtalk/creating-multiple-virtual-websites-in-wampserver/)的第三步中的示例。

# c - C 语言中的谜题解决方案 (CodeChef.com)

> ID：14433494
> 
> 赞同：-1
> 
> 时间：2013-01-21T06:37:42.810
> 
> 标签：c, puzzle, factorial

我在[http://www.codechef.com/problems/FCTRL编写了我的代码来解决一个难题](http://www.codechef.com/problems/FCTRL)

根据我的测试，该程序适用于任何数字字符串。显然，CodeChef 网站报告了错误的输出。

有人可以纠正我吗？

这是我编码的内容：

```
#include <stdio.h>

int main(int argc, const char * argv[])
{
    int i,iterations,target,victim1,victim2,victim3;

    scanf("%d",&iterations); //take the number of acceptable iterations.

    for(i=0;i<iterations;i++)
    {
        scanf("%d", &target); //take the number as a target input the user want's to calculate on.
        victim1=target/5;
        victim2=victim1;

        while(victim1>=5)
        {
            victim1=(victim1)/5;
            victim3=victim3+victim1;
        }

        printf("%d\n",victim2+victim3);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:43:50.700

`victim3`从未初始化......所以它可以从任何值开始。

您应该可能初始化`victim3`为`0`.

# python - python 不被识别为内部或外部命令

> ID：14433499
> 
> 赞同：7
> 
> 时间：2013-01-21T06:38:20.783
> 
> 标签：python, path-variables

我尝试安装[这个](https://github.com/joyent/node/wiki/Installation)软件。为此需要 Python。

[我从这里](http://python.org/ftp/python/2.7.3/)安装了 Python name `python-2.7.3.msi`。

我正在使用 Windows 7。

[我的 Python 软件的层次结构与本文中的](https://stackoverflow.com/questions/10215810/easy-install-is-not-recognized-as-an-in-internal-or-external-command-operable)相同。

之后，我做`PATHVALUE = C:\Python27\Scripts`

当我运行任何 Python 文件时，它显示

> python 不被识别为内部或外部命令、可运行程序或批处理文件。创建 vc 项目文件失败。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T06:41:53.043

您想附加到您`PATH`的字符串`C:\Python27`，而不是脚本文件夹。`python.exe`基本上，您希望路径上有实际二进制文件的文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T06:59:59.493

试试这个[截屏视频](http://showmedo.com/videotutorials/video?name=960000&fromSeriesID=96)或（不是最好的方法）将 python 可执行文件放入 C:\Windows\system32 文件夹。

更好的方法是更改​​ Windows 环境变量。总之，你的路径是：我的电脑‣属性‣高级‣环境变量

有关更多详细信息，请参阅[此](http://docs.python.org/2/using/windows.html#setting-envvars)。

# asp.net - 如何运行 .exe 文件 asp.net

> ID：14433507
> 
> 赞同：0
> 
> 时间：2013-01-21T06:38:59.550
> 
> 标签：asp.net, .net, exe

我需要使用 Asp.net 从 Web 浏览器运行 .EXE，每当单击网页中的特定按钮时，它应该打开安装向导，而不是下载它 任何人都可以帮助我

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T06:40:32.667

出于明显的安全原因，您不能从 Web 应用程序在客户端计算机上运行 EXE。如果这是可能的，那将是一个巨大的安全漏洞。您可以做的最好的事情是提供可执行文件的下载链接，并要求客户端下载并安装它。

另一方面，如果您想在服务器上运行可执行文件，则可以使用该[`Process.Start`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:54:28.880

您不能在用户机器上运行您选择的任何 exe。这将是一个巨大的安全漏洞。

如果你绝对必须使用这样的东西，你可以考虑[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)

> ClickOnce 是一项 Microsoft 技术，使用户能够通过单击网页中的链接来安装和运行 Windows 应用程序。

参考：[ClickOnce 部署概述](http://msdn.microsoft.com/en-us/library/142dbbz4%28v=vs.80%29.aspx)

然而，浏览器支持仅限于 IE 和通过 Firefox 上的插件。

# php - php domdocument 在一行中

> ID：14433511
> 
> 赞同：0
> 
> 时间：2013-01-21T06:39:16.303
> 
> 标签：php, xml, domdocument

我正在尝试使用 PHP 编程语言创建一个单行 XML 字符串。

我正在为此使用 DomDocument。

我设置`preserveWhitespace`为 false 和`formatOutput`false 但是当我执行 `saveXML()`输出时仍然显示每个 XML 输出之间的新行。有任何想法吗？

我的代码：

```
 $domtree = new \DOMDocument();

            $domtree->preserveWhiteSpace = false;
            $domtree->formatOutput = false;
            ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:10:42.247

尝试以下操作：

```
$dom    = new DOMDocument( '1.0' );
$dom->loadXML( '<nodes><test/></nodes>', LIBXML_NOBLANKS | LIBXML_COMPACT );
$dom->preserveWhiteSpace = false;
$dom->formatOutput  = false;
// remove all new lines
$XmlFileText = preg_replace("/\n/", "", $dom->saveXML());
echo $XmlFileText; 
```

不是最好的方法，但有效。希望能帮助到你。

# objective-c - 制作静态库时，xcode 中头文件的链接错误

> ID：14433512
> 
> 赞同：0
> 
> 时间：2013-01-21T06:39:17.663
> 
> 标签：objective-c, categories

我正在做的事情如下.. 1）首先我在我的项目中使用了 OAConsumer 库和 Base64 库，然后我制作了一个可可触摸静态库以及我自己的类.. 2）当我在我的项目中使用这个库时，它无法链接 NSData + BAse64.m 文件

我收到以下错误，它崩溃了..

```
-[NSConcreteData base64EncodedString] : Unrecognised selector sent to instance 0x158250 
```

这个问题类似于以下问题.. [Objective-C 中的类别不起作用](https://stackoverflow.com/questions/4137988/categories-in-objective-c-arent-working)

我尝试了其中的解决方案......但没有奏效......

# outlook - Outlook - iCalendar 邀请进入时没有接受/拒绝选项

> ID：14433513
> 
> 赞同：1
> 
> 时间：2013-01-21T06:39:19.743
> 
> 标签：outlook, icalendar, invite

我已经在 iCalendar 上工作了很长一段时间，经过长时间的努力，我有了一个 iCalendar 格式，它或多或少可以为所有版本的 Outlook 所接受。我面临的问题是，有时客户抱怨他们没有选择接受/拒绝/暂定邀请。我一直在谷歌上搜索很多，但什至找不到可以为我指明解决方案的提示。我已经在我的计算机和其他计算机上验证了邀请，在 Outlook 2003、2007 和 2010 上，它们似乎都很好地向我显示了邀请，也就是说，使用正常选项。我很确定客户一直面临这些问题，他们不仅仅是在抱怨。

我正在寻找的是有关是否存在 Outlook 设置的一些信息，该设置会强制 Outlook 在我的 iCalendar 文本中隐藏特定设置的接受/拒绝选项。我不是在寻找为我解决这个问题的人，如果我什至得到提示或指向解决方案的指示，我相信我能够遵循这个路径。

如果你们中的任何人曾经遇到过这样的问题，请联系。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:48:17.413

You probably want to check with your clients whether they use Outlook against a Microsoft Exchange Server (which version ?) or against an IMAP Server. Exchange will do a fair amount of preprocessing of iCalendar data so you can expect a different behavior.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T14:13:42.523

有时您可能会将 iCal 作为约会而不是会议转发。我自己也曾几次落入这个陷阱。要检查，请打开 Outlook 日历中的条目，如果您在功能区中看到“邀请与会者”的选项/按钮，那么，您知道您已经转发了约会......不是会议......因此为什么收件人不'没有收到接受/拒绝的选项。要更正，只需点击“邀请与会者”按钮将约会转换为会议，然后再次尝试转发。

希望这对你有用吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:51:59.813

我观察到的是，当 icalendar 无效时，Outlook 不会显示通常的按钮。在我的情况下，我在 dtstart 之前有一个 dtend，这足以让 Outlook 不认为邀请是有效的（尽管谷歌日历和 Outlook.com 确实如此）。

# javascript - 使用 javascript 验证 html 表单

> ID：14433514
> 
> 赞同：-2
> 
> 时间：2013-01-21T06:39:24.243
> 
> 标签：javascript, validation

在我的 html 表单中，我有不同的元素、文本框、单选框和选择框。当我提交此表单时，我想验证它（只是文本框为空，选中单选框，选中选择框）是否可以一次验证所有这些元素。不管它是否可以使用jquery来完成？任何人都可以建议我一个方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:44:24.530

如果 JQuery 是一个选项：

```
$('#submitbuttonid').submit(function() {  
    //validate as many things as you want here.  
    //If everything is valid, you can 'return true;'  else 'return false;'  
}); 
```

将 #submitbuttonid 替换为提交按钮的 ID。看看这里，更多讨论：[http ://api.jquery.com/submit/](http://api.jquery.com/submit/)

# python - 如何使用python将文件上传到远程服务器

> ID：14433520
> 
> 赞同：-2
> 
> 时间：2013-01-21T06:39:50.073
> 
> 标签：python, wsgi

我需要使用 python - wsgi 将文件上传到远程位置。远程位置不是指托管 python 应用程序的服务器，而是不同的服务器。

我尝试将文件上传到正是应用程序主机的服务器。它成功了。

使用以下代码，

```
 post = cgi.FieldStorage(fp=environ['wsgi.input'],environ=environ,keep_blank_values=True)
        self.msg = str(post)            

        try:
            fileitem = post['Filedata']
            if fileitem.file:
                filename = fileitem.filename.decode('utf8').replace('\\','/').split('/')[-1].strip()
                if not filename:
                    raise Exception('No valid filename specified')
                file_path = os.path.join(self.uploadpath, filename)
                # Using with makes Python automatically close the file for you
                counter = 0
                with open(file_path, 'wb') as output_file:
                    while 1:
                        data = fileitem.file.read(1024)
                        # End of file
                        if not data:
                            break
                        output_file.write(data)
                        counter += 1
                        if counter == 100:
                            counter = 0
            self.msg = "Uploaded Successfully !!!! "
        except:
            pass 
```

但这是针对 python 应用程序托管的本地位置。我搜索谷歌如何在 python 中将文件上传到远程位置。但我找不到合适的解决方案。有些建议从 python 代码中执行 scp 。

更多的..

假设有两台服务器，分别称为 A 和 B。我用于文件上传的 python-wsgi 应用程序托管在服务器 A 上。在 python-wsgi 应用程序中，当用户单击上传时，有一个 Web 表单供用户选择文件，然后该文件需要上传到服务器 B（已知位置）

有人知道使用 python 将文件上传到远程位置的方法或库吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T08:22:21.550

对于 HTTP，如果在服务器端没有足够的对应物，您将没有任何机会将文件放在服务器上，即 Python / Perl / PHP / Ruby / 任何获取您在**HTTP POST**中提供的数据的脚本- 请求并将它们写入文件。我建议设置一个 FTP 服务器。这正是 FTP 的发明目的。

通常，大多数 HTTP 服务器也有 FTP。你如何把你的 HTML 文件放在服务器上？FTP 是执行此操作所需的一种最小访问权限。设置起来真的不难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T06:54:27.583

文件上传通常使用*enctype=multipart/form-data*实现为 HTTP POST 操作。

看

[http://www.w3schools.com/tags/att_form_enctype.asp](http://www.w3schools.com/tags/att_form_enctype.asp)

在 Python 中，为了方便起见，您可以使用**requests**模块。

除此之外：你的问题很糟糕。

# python - 有没有什么好办法或者插件可以很方便的走到vim中python的一个函数的末尾

> ID：14433521
> 
> 赞同：3
> 
> 时间：2013-01-21T06:39:50.547
> 
> 标签：python, vim

当我查看 python 代码时，我发现如果一个函数的代码行太多，就很难找出函数的结尾在哪里。

我先想想只要找到下一个`def`就可以了。但是如果函数是像下面这样的装饰器，这个方法就不起作用了。

```
def require_player(view_func):
    @warps(view_func)
    def decorate(request, *args, **kwds):
        #my code here
        return
    return decorate 
```

所以我想知道在vim中有什么好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:44:57.957

[python-mode](https://github.com/klen/python-mode)对此有键绑定：例如`[[`，`]]`将在顶级函数之间来回跳转。在您的情况下，它会忽略 inner `def`，我认为这就是您要问的。

喝了很多 Kool-Aid，但到目前为止，在不使用它的功能时，我还没有看到任何严重的开销。所以我把它安装好了，然后在我喜欢它的时候去看看它还能做什么——有点像我用 vim 做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:43:40.343

有一些 Vim 脚本/插件旨在为您准确处理这些类型的情况，例如[Python.vim](http://www.vim.org/scripts/script.php?script_id=30) - 它们将为您提供绑定，您可以使用这些绑定轻松跳到/选择函数、类等。

# web-services - 无法在 RESTful Web 服务上捕获请求

> ID：14433525
> 
> 赞同：1
> 
> 时间：2013-01-21T06:39:58.857
> 
> 标签：web-services, rest, jakarta-ee

一般来说，我是 Web 服务的新手，并且一直在对其进行大量研究，但我目前无法捕获用于身份验证所需的请求标头。

场景如下：在向请求标头添加用户名/密码组合后，我有一个 Android 客户端在我的 JAX-RS RESTful Web 服务上调用 login() 方法。Web 服务（在 JBoss AS 7.1 上运行）应该捕获这些标头。

问题是每次调用这个 login() 方法时，请求似乎还没有得到服务，因此在执行 WebServiceContext.getMessageContext() 时会导致 IllegalStateException。

我尝试将 @PostConstruct 注释添加到方法的标头，但无济于事。当我这样做时，该方法似乎根本没有被初始化。相反，我在调用它时有一个 ClassNotFoundException 。

我怎样才能解决这个问题？几天来，我一直坚持这一点，并在客户端和 Web 服务上尝试了多种不同的方法来捕获这些标头，但它们要么不适用于项目的架构，要么根本无法按预期工作。

这是服务的界面：

```
@ApplicationPath("/apppath")
@Path("/wspath")
public interface LoginService {

    @GET
    @Path("/login")
    @Produces(MediaType.APPLICATION_JSON)
    public String login();
} 
```

这是服务的实现：

```
@Stateless
@Local(LoginService.class)
public class LoginServiceImpl implements LoginService {

    @Resource
    WebServiceContext wsContext;

    @Override
    public String login() {

        // This line throws an IllegalStateException.
        MessageContext msgContext = wsContext.getMessageContext();

        // TODO: Capture authentication data from headers.   
        @SuppressWarnings("unchecked")
        Map<String, List<String>> headers = (Map<String, List<String>>) msgContext.get(MessageContext.HTTP_REQUEST_HEADERS);

        // Dummy return for testing purposes.
        return "It works" + headers.toString();
    }
} 
```

这是一个简单的 JUnit 测试代码，我正在尝试解决客户端的问题。

```
public class LoginServiceTest {

    @Test
    public void test() {

        String mEmail = "a@a.com";
        String mPassword = "aaaa";

        HttpGet request = new HttpGet("http://localhost:8080/apppath/wspath/login"); 

        String auth = Base64.encodeBytes((mEmail + ":" + mPassword).getBytes());
        request.addHeader("Authorization", "Basic " + auth);

        HttpClient httpClient = new DefaultHttpClient();

        try {
            InputStream inputStream = httpClient.execute(request).getEntity().getContent();

            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));             
            String wsReturn;

            while ((wsReturn = bufferedReader.readLine()) != null) {
                System.out.println(wsReturn);
            }
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:32:42.783

这不是在 JAX-RS 服务中访问服务上下文的正确方法，`WebServiceContext`该类被注入到 JAX-WS Web 服务中。在 JAX-RS 服务类中，您可以使用`@Context`注释来`HttpServletRequest`注入请求对象并要求它提供标头。例如：

```
@GET
@Path("/login")
@Produces(MediaType.APPLICATION_JSON)
public String login(@Context HttpServletRequest request); 
```

您可以查看此[链接](http://jersey.java.net/nonav/documentation/latest/jax-rs.html)以获取有关 JAX-RS 的更多信息或浏览[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/gkncy.html)。

# linux - 董事会支持包的组成部分、要求和规定。基于 SPI 的设备

> ID：14433526
> 
> 赞同：0
> 
> 时间：2013-01-21T06:40:00.000
> 
> 标签：linux, spi, bsp

我正在为 Linux 板开发 BSP（板支持包）。该板包含一个在 SPI 上运行的设备。我会喜欢你关于天气的建议，我应该为 BSP 提供一个设备特定的驱动程序，或者一个 SPI 驱动程序就足够了。

此外，如果某些设备具有用户模式驱动程序而不是内核模式。那么这个用户模式驱动程序会成为 BSP 的一部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:29:53.517

恕我直言，最好为 BSP 提供设备特定的驱动程序，因为您的驱动程序知道您提供的硬件组件的细节，否则您需要共享 SPI 从硬件细节，以便其他人可以为特定的 SPI 设备开发驱动程序。

只有内核模式工件才能成为 BSP 的一部分。

# css - 当 z-index 较高时，图像链接不适用于覆盖的 div

> ID：14433533
> 
> 赞同：0
> 
> 时间：2013-01-21T06:40:18.717
> 
> 标签：css, hyperlink, position, z-index, supersized

我在网站上使用超大幻灯片，但我在 div 中添加了纹理覆盖

```
 #slideshow-wrapper
{
    width: 100%;
    margin: -100px 0 0 0;
    padding: 0;
    height: 500px;
    background: url(/slideshow/img/slideshow-front-3.png) repeat;
    position: relative;
    z-index: 3;
} 
```

这是超大的 div

```
 #supersized
{
    display: block;
    position: absolute;
    left: 0;
    top: -15px;
    overflow: hidden;
    z-index: 1;
    height: 500px;
    width: 100%;
} 
```

如果我将 #slideshow-wrapper 上的 z-index 更改为 0，则链接效果很好，但是我会松开图像上的纹理。

是否有解决方法，以便链接可以在仍显示纹理覆盖的同时工作？

感谢任何帮助。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:44:21.257

您需要在纹理图像上放置一个事件侦听器并捕获鼠标坐标，然后将点击事件传递给它下面*应该被*点击的项目，它共享相同的坐标空间。

# python - 将结果重定向到文件中

> ID：14433536
> 
> 赞同：0
> 
> 时间：2013-01-21T06:40:28.613
> 
> 标签：python

我正在使用下面的脚本从一些轨迹文件中提取数据并将数据转储到新的文件文件中。我可以使用指令“>”将结果重定向到一个文件中，但我需要对超过 2000 个文件这样做。为了方便起见，我尝试打开一个文件并让 python 本身将结果定向到一个文件中。

为了实现这一点，我在代码中的 (##) 位置添加了一行来打开一个文件，如下所示。我还添加了一行将结果定向到文件中，如下面的代码所示，行包含 (###)。

```
#!/usr/bin/env python
'''
always put -- #!/usr/bin/env python -- at the shebang
'''

from Scientific.IO.NetCDF import NetCDFFile as Dataset
import itertools as itx

inputfile = "../traj-waters/waters1445-MD001-run1000.traj"

for FRAMES in range(0,2):
   frame = FRAMES

   text_file = open("velo-Output.dat", "w")   (##)

   #inputfile = 'mdcrd'
   ppp = inputfile

   def grouper(n, iterable, fillvalue=None):
       args = [iter(iterable)] * n
       return itx.izip_longest(fillvalue=fillvalue, *args)

   formatxyz = "%12.7f%12.7f%12.7f%12.7f%12.7f%12.7f"
   formatxyz_size = 6
   formatxyzshort = "%12.7f%12.7f%12.7f"
   formatxyzshort_size = 3

   #ncfile = Dataset(inpitfile, 'r')
   ncfile = Dataset(ppp, 'r')

   variableNames = ncfile.variables.keys()
   #print variableNames

   shape = ncfile.variables['coordinates'].shape
   '''
   do the header
   '''

   print 'title ' + str(frame)
   print "%5i%15.7e" % (shape[1],ncfile.variables['time'][frame])

   '''
   do the velocities
   '''
   try:
       xyz = ncfile.variables['velocities'][frame]
       temp = grouper(2, xyz, "")

       for i in temp:
           z = tuple(itx.chain(*i))
           if (len(z) == formatxyz_size): 
               print formatxyz % z
               text_file.write('formatxyz\n' % z))  (###)
           elif (len(z) == formatxyzshort_size): print formatxyzshort % z

   except(KeyError):

       xyz = [0] * shape[2] 
       xyz = [xyz] * shape[1]
       temp = grouper(2, xyz, "")

       for i in temp:
           z = tuple(itx.chain(*i))
           if (len(z) == formatxyz_size): print formatxyz % z
           elif (len(z) == formatxyzshort_size): print formatxyzshort % z
           x = ncfile.variables['cell_angles'][frame]
           y = ncfile.variables['cell_lengths'][frame]
   text_file.close() 
```

但是，如果我按以下方式运行此代码，则会出现错误。

```
 Traceback (most recent call last):
File "./Nctorst-onlyVelo.py", line 73, in <module>
  text_file.write(str('formatxyz\n' % z))
TypeError: not all arguments converted during string formatting 
```

由于我是 python 的新手，我发现无法纠正这个问题。

提前感谢您的帮助。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:47:12.233

要么你打错字，要么不明白[使用替换运算符的字符串格式是](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)如何 工作的

线

```
text_file.write('formatxyz\n' % z))  (###) 
```

应该写成类似于上一行

```
text_file.write(formatxyz % z + '\n')  (###) 
```

你也应该期待使用[格式字符串语法](http://docs.python.org/2/library/string.html#format-string-syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:42:34.953

`print formatxyz % z` <-- 这里是模运算符

`text_file.write('formatxyz\n' % z))` (###) <--- 这里是字符串替换。不使用

`formatxyz\n'` 作为一个字符串。

而是这样做：

```
 text_file.write(str(formatxyz % z ) + '\n' ) 
```

显示两者之间差异的示例：

```
>>> formatxyz = 97
>>> z = 10
>>> formatxyz % z
7
>>> 'formatxyz' % z
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: not all arguments converted during string formatting
>>> x = 'Hello world'
>>> 'formatxyz is %s' % x
'formatxyz is Hello world' 
```

# c - BMI计算器不工作

> ID：14433538
> 
> 赞同：0
> 
> 时间：2013-01-21T06:40:32.963
> 
> 标签：c

```
#include <stdio.h>
#include <stdlib.h>
int main() {
    double w, h, b;
    printf("Enter your weight in pounds \n");
    scanf("%d", &w);
    printf("Enter your height in inches \n");
    scanf("%d", &h);
    h = h/12;
    b = w*703 / (h*h);
    if (b < 18.5) {
        printf("underweight");
    } else if (b>=18.5 && b<25) {
        printf("normal");
    } else {
        printf("overweight");
    }
    system("Pause");
} 
```

好的，所以无论我输入什么数字，我的代码都会打印“体重不足*”，我不知道为什么。如果有人能指出我正确的方向，那将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T06:42:23.667

当它们是双倍时，您正在将数字读取为整数。你要

`scanf("%lf", &w);`

等等

# sybase - 在sybase错误日志中打印死锁信息

> ID：14433541
> 
> 赞同：0
> 
> 时间：2013-01-21T06:40:52.463
> 
> 标签：sybase

sybase 中发生死锁信息时如何打印它。具体来说，我想知道哪些查询导致了死锁。

我已阅读有关 sp_configure 但不知道如何运行它？ [http://sybaseblog.com/sybasewiki/index.php?title=How_can_we_print_Deadlock_information_in_errorlog%3F](http://sybaseblog.com/sybasewiki/index.php?title=How_can_we_print_Deadlock_information_in_errorlog%3F)

这是什么提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:53:37.540

sp_configure "打印死锁信息"

这是一个 sa_role 任务 - 你的问题是你没有 sa_role 吗？谁是 DBA？让他们这样做。他们可能会提到增加日志的大小，但这应该不是问题。

只要您的客户端代码也记录了时间，如果您在不同的事情上有很多死锁，您就可以很容易地找到单个死锁。

您可以使用 perl 来扫描日志并制表。

或者，如果您已经安装了 mda 监控表，您也可以使用它们。

有关上述两者的详细信息，请参见 sybooks。

# zend-framework - Zend 框架缓存编码

> ID：14433543
> 
> 赞同：0
> 
> 时间：2013-01-21T06:41:01.570
> 
> 标签：zend-framework, zend-cache

我正在开发 Zend 应用程序。它缓存菜单项以减少数据库事务。我正在寻找一种将缓存文件的编码设置为 UTF8 的方法。在`application.ini`我有：

```
resources.view.encoding = "UTF-8" 
```

虽然似乎不起作用。

**更新：**

我找不到`_initCache`负责缓存的函数或任何其他代码。缓存仅在以下内容中指定`application.ini`：

```
resources.cache.frontEnd = core
resources.cache.backEnd = file
resources.cache.frontEndOptions.lifetime = 1200
resources.cache.frontEndOptions.automatic_serialization = true
resources.cache.backEndOptions.lifetime = 3600
resources.cache.backEndOptions.cache_dir = APPLICATION_PATH "/../cache"
pluginPaths.CMS_Application_Resource   = APPLICATION_PATH "/../library/CMS/Application/Resource" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:21:03.537

在布局上有这个吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T13:52:39.887

> 我正在寻找一种将缓存文件的编码设置为 UTF8 的方法

Zend_Cache 没有编码选项，也不处理编码！Zend_Cache 只是将数据存储为二进制流，因此如果存储 UTF-8 文本，则存储字节流，如果存储 ASCII 文本，则存储字节流。**您**必须知道您存储在缓存中的数据类型以及如何使用它。如果您没有`magic_quote_runtime`启用，您将获得与之前存储的相同字节，否则禁用此已弃用的 PHP-INI-Setting（以及所有其他魔术引号设置）。

# c# - 如何选择在 C# 中扩展的特定树节点

> ID：14433545
> 
> 赞同：0
> 
> 时间：2013-01-21T06:41:07.033
> 
> 标签：c#, treeview, treenode

我通过树视图在 db 中显示数据。每个数据都有自己的代码和父代码（不是级别）。我的显示算法步骤是这样的

*   步骤1：查找父代码为空的数据（根节点）
*   步骤 2：查找父代码为步骤 1 的数据（步骤 1 的父代码）
*   第 3 步：将 1,2 添加到 treeView 并显示
*   第四步：点击节点时，查找父代代码被选中节点的数据
*   第 5 步：将第 4 步添加为选定代码的子节点

> 节点1
> 
> └ node2 - 点击展开图标
> 
> 　 └ 节点3　
> 
> └ node4 - 选择的节点

在这种情况下，我只能检查选定的节点（node4）。因此，如果我在事件单击或展开/折叠中添加添加子节点代码，则代码正在选定节点（节点 4）上工作，而不是节点 2。

这就是我使用点击事件的原因。

我想检查单击了哪个节点的展开图标。在这个例子中，我想要获取的节点是 node2。

一个无知但简单的方法很好......保存所有节点的状态并在扩展之前与之后进行比较。当节点数量很大时，这种方式会花费太长时间。

如果有其他简单的方法来选择*node2*，我想知道如何找到它。

对不起，我的解释很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:50:19.560

您可以使用树视图的[OnBeforeExpand](http://msdn.microsoft.com/de-de/library/system.windows.forms.treeview.onbeforeexpand.aspx%20OnBeforeExpand)事件。该事件有一个[TreeViewCancelEventArgs](http://msdn.microsoft.com/de-de/library/system.windows.forms.treeviewcanceleventargs.aspx%20TreeViewCancelEventArgs)参数，该参数在其 Node 属性中携带要展开的节点。

# facebook - Facebook 应用程序通知错误

> ID：14433555
> 
> 赞同：0
> 
> 时间：2013-01-21T06:41:48.020
> 
> 标签：facebook, facebook-graph-api

使用 open graph api explorer 发送应用通知时出现错误，错误信息如下

{ "error": { "message": "(#15) 必须使用应用程序访问令牌调用此方法。", "type": "OAuthException", "code": 15 } }

谁能告诉我如何解决这个问题，因为我尝试了不同的应用设置组合，但没有任何效果。

# javascript - 转发页面时`popState`不起作用

> ID：14433557
> 
> 赞同：1
> 
> 时间：2013-01-21T06:41:53.273
> 
> 标签：javascript, jquery, ajax

我正在做一些 AJAX 页面重新加载，一切都很好，希望`popState`只能向后工作。我可以回到历史，但我不能回到过去。问题是，应该`popState`双向工作，如果不是，那么观察前进的相反方法是什么？

确切地说，我既可以点击`pushState`工作，也`popState`可以让我返回。回来后行不通的是继续前进。

示例：我点击我的链接 3 次并浏览`A-B-C`状态。现在，我单击返回并最终到达`B`. 最后，我想在浏览器中（而不是在我的应用程序上）单击“转发”，从而以`C`. 好吧，浏览器状态发生了变化，但我并没有以`C`. 这是否意味着我也必须`pushState`为基于浏览器的行为编写代码？我的印象是`popState`应该同时处理前后行为？

# php - 使用 PHP 检索 JSON 数据

> ID：14433565
> 
> 赞同：-3
> 
> 时间：2013-01-21T06:42:45.563
> 
> 标签：php, json

```
$data = array (
'email' => 'ravi.uvi@yahoo.com',
'pwd' => 'success'
);

$bodyData = array (
'json' => json_encode($data)
); 
```

上面我已经在 json 中编码了数据。在我的 php 文件中，我将该值解码并存储到变量中。结果如下所示：

```
$result = {"email":"ravi.uvi@yahoo.com","pwd":"success"} 
```

现在，我正在尝试使用以下方法获取电子邮件和密码的价值：

```
$emails = $result['email'];
$password = $result['pwd']; 
```

我没有得到价值观。请帮助我获得这些值，在此先感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:44:05.837

使用 json_decode

```
$res = json_decode($result);
print_r($res); 
```

# javascript - ng-click 和 ng-show 的问题

> ID：14433566
> 
> 赞同：0
> 
> 时间：2013-01-21T06:42:50.733
> 
> 标签：javascript, angularjs

我正在尝试在我的应用程序中制作一个小模态框架..

这是我的控制器：

```
function ModalCtrl($scope){
    $scope.openModal = function(name){
        $scope.modalStatus = true;
    }
    $scope.closeModal = function(name){
        $scope.modalStatus = false;
    }
    $scope.modal = function(){
        return $scope.modalStatus;
    }
    $scope.modalStatus = false;
} 
```

继承人的HTML：

```
<div ng-controller="ModalCtrl">
  <div ng-show="modal()" class="modal_window">
    <h2>The title</h2>
    <span>The content</span>
    <a ng-click="closeModal()">Close</a>
  </div>
</div>

<div ng-controller="ModalCtrl">
    <a ng-click="openModal('xyz')">Open it up</a>
</div> 
```

只是完全不起作用..不能更困惑

编辑：用 jsfiddle 更新：http: [//jsfiddle.net/TeYfY/](http://jsfiddle.net/TeYfY/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:53:37.587

我没有详细检查您的代码，但是您的 ngClick 是在 ngController*之外*定义的，因此它无法访问该`openModal`函数。您需要在控制器内部使用它来访问作用域上的方法，例如：

```
<div ng-controller="ModalCtrl">
  <div ng-show="modal()" class="modal_window">
    <h2>The title</h2>
    <span>The content</span>
    <a ng-click="closeModal()">Close</a>
  </div>

  <a ng-click="openModal('xyz')">Open it up</a>
</div> 
```

如果还有更多问题，请随时发布 Plunker 或 jsFiddle 并更新您的问题，我很乐意仔细查看并修改我的答案。

PS：此代码属于指令。

**更新**

OP 在评论中提到他想从另一个位置控制模态。这通常通过服务来完成：

```
module.factory( 'ModalService', function () {
  var is_visible = false;

  return {
    isVisible: function ( value ) {
      if ( angular.isDefined( value ) ) {
        is_visible = value;
      } else {
        return is_visible;
      }
    }
  };
}); 
```

在 modal 指令中，可以监听服务的状态：

```
$scope.$watch( ModalService.isVisible, function ( status ) {
  $scope.isVisible = status;
}); 
```

从一个遥远的控制器，可以改变服务的状态：

```
$scope.openModal = function () {
  ModalService.setVisible( true );
} 
```

这是高度做作和过度简化的，但它应该说明这一点。除了服务之外，还可以使用事件来完成组件间的通信，但大多数情况下服务更干净。

# javascript - Knockout.js ViewModels 中的继承

> ID：14433568
> 
> 赞同：0
> 
> 时间：2013-01-21T06:42:56.827
> 
> 标签：javascript, knockout.js, prototypal-inheritance

我的 5 个视图模型中的每一个都有一个 rowNumber 属性。此外，还有一个基于 rowNumber 属性的计算 observable。这是代码：

```
function EntityViewModel() {
    this.rowNumber = ko.observable();

    this.isOdd = ko.computed(function () {
        return this.rowNumber() % 2 != 0;
    }, this);

    this.isEven = ko.computed(function () {
        return this.rowNumber() % 2 == 0;
    }, this);
} 
```

我有一个继承自 EntityViewModel 的 CountryViewModel，如下所示：

```
CountryViewModel.prototype = new EntityViewModel();

function CountryViewModel() {
    this.id = ko.observable();
    this.name = ko.observable();
    this.abbrev = ko.observable();
} 
```

问题：我现在可以从 CountryViewModel 对象中设置 rowNumber，如下所示：

```
var cvm = new CountryViewModel();
cvm.rowNumber(index); 
```

在我的情况下，计算的 observable isOdd / isEven 没有得到正确计算。尽管我通过 CountryViewModel 设置 rowNumbers，但似乎 rowNumber 为 0。计算出的可观察函数是否有任何问题——尤其是设置为此的上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:19:59.457

除了使用原型，您还可以执行以下操作：

```
function EntityViewModel() {
    // ...
}
function CountryViewModel() {
    EntityViewModel.apply(this);
} 
```

我已经更新了您的 jsfiddle 作为示例：http: [//jsfiddle.net/Ht8GR/4/](http://jsfiddle.net/Ht8GR/4/)

# java - 类路径错误：找不到 org.aspectj.lang.JoinPoint

> ID：14433569
> 
> 赞同：9
> 
> 时间：2013-01-21T06:42:56.787
> 
> 标签：java, jakarta-ee, maven, classpath, pom.xml

我正在使用 Maven 来构建我的项目。它之前编译成功。当我这样做时，它已经开始出现错误`mvn clean install`。

> `[ERROR] classpath error: unable to find org.aspectj.lang.JoinPoint (check that aspectjrt.jar is in your classpath)`

下面是我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.guavus</groupId>
    <artifactId>Exporter</artifactId>
    <version>atlas2.1</version>
    <packaging>jar</packaging>

    <name>Exporter</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <aspectj.version>1.6.10</aspectj.version>
        <org.springframework.version>3.0.5.RELEASE</org.springframework.version>        
    </properties>

    <build>
         <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-site-plugin</artifactId>
                <version>3.0-beta-2</version>
                <configuration>
                    <reportPlugins>
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-javadoc-plugin</artifactId>
                            <version>2.7</version>
                        </plugin>
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-jxr-plugin</artifactId>
                            <version>2.1</version>
                            <configuration>
                                <aggregate>true</aggregate>
                            </configuration>
                        </plugin>
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-surefire-report-plugin</artifactId>
                            <version>2.6</version>
                        </plugin>
                        <plugin>
                            <groupId>org.codehaus.mojo</groupId>
                            <artifactId>cobertura-maven-plugin</artifactId>
                            <version>2.4</version>
                            <configuration>
                                <formats>
                                    <format>xml</format>
                                    <format>html</format>
                                </formats>
                            </configuration>
                        </plugin>
                        <!--
                            plugin> <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-checkstyle-plugin</artifactId>
                            <version>2.6</version> </plugin
                        -->
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-pmd-plugin</artifactId>
                            <version>2.5</version>
                            <configuration>
                                <rulesets>
                                    <ruleset>/rulesets/basic.xml</ruleset>
                                    <ruleset>/rulesets/design.xml</ruleset>
                                    <ruleset>/rulesets/logging-java.xml</ruleset>
                                </rulesets>
                                <targetJdk>1.5</targetJdk>
                                <format>xml</format>
                                <linkXref>true</linkXref>
                                <sourceEncoding>utf-8</sourceEncoding>
                                <minimumTokens>100</minimumTokens>
                            </configuration>
                        </plugin>
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-project-info-reports-plugin</artifactId>
                            <version>2.3.1</version>
                        </plugin>
                    </reportPlugins>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
                <version>1.3</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <aspectDirectory>src/main/aspect</aspectDirectory>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>       <!-- use this goal to weave all your main classes -->
                        </goals>
                    </execution>
               </executions>
                <dependencies>
                    <dependency>
                        <groupId>org.aspectj</groupId>
                        <artifactId>aspectjtools</artifactId>
                        <version>${aspectj.version}</version>
                    </dependency>
                </dependencies>
           </plugin>        
        </plugins>
    </build>

    <dependencies>
    <!-- local snapshots  -->
        <dependency>
            <groupId>com.guavus</groupId>
            <artifactId>CubeCreator</artifactId>
            <version>atlas2.1</version>
        </dependency>
        <dependency>
            <groupId>com.guavus</groupId>
            <artifactId>ConcurrentFlows</artifactId>
            <version>atlas2.1</version>
        </dependency>
        <dependency>
            <groupId>ps</groupId>
            <artifactId>thriftGenerated</artifactId>
            <version>atlas2.1</version>
        </dependency>
    <!-- local snapshots  -->
    <!-- local 3rd Party -->
        <dependency>
            <groupId>apache</groupId>
            <artifactId>libthrift</artifactId>
            <version>0.5.0</version>
        </dependency>
    <!-- local 3rd Party -->
    <!-- remote 3rd Party -->
        <dependency>
            <groupId>org.apache.hadoop</groupId>
            <artifactId>hadoop-core</artifactId>
            <version>0.20.203.0</version>
        </dependency>
        <dependency>
          <groupId>com.google.code.gson</groupId>
          <artifactId>gson</artifactId>
          <version>1.7.1</version>
        </dependency>

    <!-- remote 3rd Party -->
        <!-- test libs -->
        <!-- test libs -->
    <dependency>
                <groupId>log4j</groupId>
                        <artifactId>log4j</artifactId>
                <version>1.2.16</version>
        </dependency>
                <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-api</artifactId>
                <version>1.6.4</version>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-access</artifactId>
                <version>1.0.1</version>
        </dependency>
        <dependency>
                <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
                <version>1.0.1</version>
        </dependency>
        <dependency>
                <groupId>ch.qos.logback</groupId>
            <artifactId>logback-core</artifactId>
                <version>1.0.1</version>
        </dependency>

    </dependencies>

</project> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T12:35:02.593

我猜你缺少一个依赖项？一些[谷歌搜索](http://www.findjar.com/class/org/aspectj/lang/JoinPoint.html)建议您可能需要导入：

```
<dependency>
  <groupId>aspectj</groupId>
  <artifactId>aspectjrt</artifactId>
  <version>1.5.4</version>
</dependency> 
```

请注意，这`1.5.4`是报告的最新版本：http: [//mvnrepository.com/artifact/aspectj/aspectjrt](http://mvnrepository.com/artifact/aspectj/aspectjrt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:26:28.977

这似乎来自

```
<dependency>
<groupId>org.aspectj</groupId>
<artifactId>aspectjtools</artifactId>
<version>${aspectj.version}</version>
</dependency> 
```

您最近是否通过更改更改了以下行？

```
<aspectj.version>1.6.10</aspectj.version> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-28T09:09:50.590

对于即时运行，只需更改 aspectj 依赖项的范围，如下所示：

```
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>${aspectj.version}</version>
    <scope>runtime</scope>
</dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-02T11:32:12.903

我得到了同样的错误，

```
[ERROR] error classpath error: unable to find org.aspectj.lang.JoinPoint (check that aspectjrt.jar is in your classpath) 
```

该`<plugin>`标签`aspectj-maven-plugin`在尝试运行插件时包含了未找到的依赖项，即 aspectjrt.jar 文件。如果您使用的是 aspectj-maven-plugin，那么您需要在 pom.xml 中添加以下依赖项，

```
<!-- AspectJ -->
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>${aspectj.version}</version>
</dependency> 
```

在`aspectj.version`标签中提到的地方，

```
<aspectj.version>1.8.1</aspectj.version> 
```

# c# - 不在调试模式下渲染控件

> ID：14433570
> 
> 赞同：1
> 
> 时间：2013-01-21T06:43:05.593
> 
> 标签：c#, winforms

我有一个 winform 应用程序，我在其中调用一个设置窗口作为新线程上的 ShowDialog。

当我在调试模式下运行应用程序时，设置表单的 Show() 事件不会触发。我尝试了备用 Load() 事件，它起作用了。在这个方法中，我填充了一个列表（DataGridView）并显示它。当表单呈现时，什么都没有显示。它只是一个空白表格。

但是，对于相同的代码，当我在没有调试（ctrl + F5）的情况下运行它时，会触发 Show() 方法并显示列表。

该代码是一个庞大框架的一部分，因此，我认为我无法提供足够可理解的度量。

我使用的是 Win7 64 位 m/c。

此外，即使我签入 spy++，它也没有在表单中显示任何内容 - 因此它没有使用任何控件呈现。也没有为 DEBUG 隔离代码。

为什么会发生这种情况，哪些设置可能需要更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:53:37.117

我认为解决方案非常简单。在 WinForms 编程中有一种叫做[UI Thread](http://www.google.nl/search?q=c%23+winforms+ui+thread&oq=c%23+winforms+ui+thread)的东西。这意味着所有与 UI 相关的代码都应该在这个线程上执行。如果您在非 UI 线程上执行与 UI 相关的代码，您将获得“跨线程操作无效”异常或意外行为。

我认为这里的解决方案是在 UI 线程而不是新线程上创建设置窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:56:02.617

对于初学者，在新线程上调用 ShowDialog() 表明您确实想改为调用 Show()。也就是说，当调试和发布版本执行不同时，通常意味着某些东西不同步。不知道它如何或为什么会发生，但修复通常就像单击“重建解决方案”一样简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-07T16:00:16.107

`StartPosition`在我遇到的类似情况下，将表单设置为例`WindowsDefaultLocation`如有`CenterScreen`帮助。

# android - 互联网调用 Gson 数据到列表视图

> ID：14433574
> 
> 赞同：0
> 
> 时间：2013-01-21T06:43:30.913
> 
> 标签：android, json, gson

我不知道我的代码有什么问题。它应该返回视频标题列表，但强制关闭。我究竟做错了什么？

代码（请原谅基本评论）。

```
package com.aer.illbehonest;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;

import org.apache.commons.io.IOUtils;

import com.google.gson.JsonArray;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class VideosList extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_videos_list);

        new GetTitlesTask().execute("");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_videos_list, menu);
        return true;
    }

    class GetTitlesTask extends AsyncTask<String, Void, ArrayList<String>> {

        ArrayList<String> titlesList;

    @Override
    protected ArrayList<String> doInBackground(String... args) {

            URL jsonURL = null;
            try {
                jsonURL = new URL("http://gdata.youtube.com/feeds/api/users/illbehonest/uploads?v=2&alt=jsonc");
            } catch (MalformedURLException e) {
                System.out.println("Malformed URL... check");
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                URLConnection jc = null;
                try {
                    jc = jsonURL.openConnection();
                } catch (IOException e) {
                    System.out.println("jc problem");
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                InputStream is = null;
                try {
                    is = jc.getInputStream();
                } catch (IOException e) {
                    System.out.println("is problem");
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                String jsonTxt = null;
                try {
                    jsonTxt = IOUtils.toString(is);
                } catch (IOException e) {
                    System.out.println("jsontxt problem");
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            JsonObject json = new JsonParser().parse(jsonTxt).getAsJsonObject();
            JsonObject jdata = json.getAsJsonObject("data");
            JsonArray jentry = jdata.getAsJsonArray("items");

            for (int entryNumber = 0; entryNumber<=25; entryNumber++){

                JsonObject entry = jentry.get(entryNumber).getAsJsonObject();
                titlesList.add(entry.get("title").toString());

                }

            return titlesList;
        }
        protected void onPostExecute(ArrayList<String> result) {
            ListView listView = (ListView)VideosList.this.findViewById(R.id.videolist);
            ArrayAdapter<String> adapter = new ArrayAdapter<String> (VideosList.this,
                    android.R.layout.simple_list_item_1, android.R.id.text1, titlesList);
            (listView).setAdapter(adapter);
        }

    }
} 
```

这是我的 LogCat 输出（注意我使用的是远程物理设备）。

```
01-21 01:19:11.430: W/dalvikvm(389): threadid=11: thread exiting with uncaught exception (group=0x41b28930)
01-21 01:19:11.696: E/AndroidRuntime(389): FATAL EXCEPTION: AsyncTask #1
01-21 01:19:11.696: E/AndroidRuntime(389): java.lang.RuntimeException: An error occured while executing doInBackground()
01-21 01:19:11.696: E/AndroidRuntime(389):  at android.os.AsyncTask$3.done(AsyncTask.java:299)
01-21 01:19:11.696: E/AndroidRuntime(389):  at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
01-21 01:19:11.696: E/AndroidRuntime(389):  at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
01-21 01:19:11.696: E/AndroidRuntime(389):  at java.util.concurrent.FutureTask.run(FutureTask.java:239)
01-21 01:19:11.696: E/AndroidRuntime(389):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
01-21 01:19:11.696: E/AndroidRuntime(389):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-21 01:19:11.696: E/AndroidRuntime(389):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-21 01:19:11.696: E/AndroidRuntime(389):  at java.lang.Thread.run(Thread.java:856)
01-21 01:19:11.696: E/AndroidRuntime(389): Caused by: java.lang.NullPointerException
01-21 01:19:11.696: E/AndroidRuntime(389):  at com.aer.illbehonest.VideosList$GetTitlesTask.doInBackground(VideosList.java:87)
01-21 01:19:11.696: E/AndroidRuntime(389):  at com.aer.illbehonest.VideosList$GetTitlesTask.doInBackground(VideosList.java:1)
01-21 01:19:11.696: E/AndroidRuntime(389):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-21 01:19:11.696: E/AndroidRuntime(389):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
01-21 01:19:11.696: E/AndroidRuntime(389):  ... 4 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:38:00.080

从 entryNumber<=25 更改 for 循环增量；到 entryNumber<25; 可以修复它。

在您从服务器收到的 JSON 数据中，只有 25 个项目，从 0 到 24 您试图访问第 26 个项目。

您可能在 for 循环中使用了 entryNumber <= jentry.Length。

# mongodb - 从多个子文档中获取匹配mongodb中某个条件的字段

> ID：14433575
> 
> 赞同：2
> 
> 时间：2013-01-21T06:43:37.823
> 
> 标签：mongodb

以下是我在 mongodb 中的收藏 -

```
{
    "_id" : ObjectId("50f69176904e1d66affec20d"),
    "connections" : [
    {
        "id" : "50f651a3b58bba7fbec2f222"
    },
    {
        "group" : "Roomies",
        "users" : [
        {
            "id" : "50f651a3b58bba7fbec2f222"
        },
        {
            "id" : "50f651b8b58bba7fbec2f223"
        }
        ]
    },
    {
        "group" : "College",
        "users" : [
        {
            "id" : "50f651b8b58bba7fbec2f223"
        },
        {
            "id" : "50f651a3b58bba7fbec2f222"
        }
        ]
    },
    {
        "group" : "Work",
        "users" : [
        {
            "id" : "50f651a3b58bba7fbec2f222"
        }
        ]
    },
],
"email" : "arunko350@gmail.com",
"name" : "Arun"
} 
```

在这里，我想获取 id = 50f651a3b58bba7fbec2f222 存在的所有组名。请帮我。我正在浏览 2 天的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:57:19.407

您可以使用 MongoDB 2.2 的[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)来做到这一点。在外壳中：

```
db.test.aggregate([
      // Duplicate the docs, one per connections array element.
      {$unwind: '$connections'},
      // Only include the docs with the specified user id
      {$match: {'connections.users.id': '50f651a3b58bba7fbec2f222'}},
      // Bring group out to the only top level field and exclude _id
      {$project: {_id: 0, group: '$connections.group'}}
]) 
```

输出：

```
{
  "result": [
    {
      "group": "Roomies"
    },
    {
      "group": "College"
    },
    {
      "group": "Work"
    }
  ],
  "ok": 1
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T08:35:45.033

$elemMatch 运算符可用于对数组元素进行投影。

> [http://docs.mongodb.org/manual/reference/projection/elemMatch/#_S_elemMatch](http://docs.mongodb.org/manual/reference/projection/elemMatch/#_S_elemMatch)

以下应该没问题

```
var projection = {"connections.group":1, "connections":{$elemMatch: {"users.id":"507c35dd8fada716c89d0013"}}}

db.collection.find( {{"connections.users.id": "507c35dd8fada716c89d0013"}}, projection); 
```

# php - 使用php跟踪文件下载进度

> ID：14433580
> 
> 赞同：1
> 
> 时间：2013-01-21T06:43:56.300
> 
> 标签：php, jquery, mysql, download, progress-bar

我有一个简单的下载页面。当用户点击“下载”按钮时，它想要显示下载的进度（在进度条中）。另外我想跟踪文件是否下载。我可以用 php 和 Jquery 做到这一点吗？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:50:47.497

无法通过 jQuery 或其他任何方式跟踪下载进度。

请参阅此帖子的已接受答案[我可以使用 jQuery UI 进度条来指示下载文件的进度吗？](https://stackoverflow.com/questions/2595317/can-i-use-jquery-ui-progress-bar-to-indicate-the-progress-of-downloading-a-file)原因。

# linux - 从 Linux 上的 WMI 客户端获取 CPU 利用率

> ID：14433584
> 
> 赞同：0
> 
> 时间：2013-01-21T06:44:06.023
> 
> 标签：linux, perl, wmi, monitoring, wql

我正在使用用于 linux 的 wmi 客户端。通过它你可以执行WQL来远程查询windows服务器。

例如;

```
 Select * from Win32_ComputerSystem 
```

我想做的是计算使用的 CPU 百分比。

我一直在从“Win32_PerfFormattedData_Counters_ProcessorInformation”中获取“PercentProcessorTime”的值。我认为这对于具有单个 CPU 的计算机来说工作得很好，但是我不知道如何计算具有多个 CPU 的计算机的 CPU 使用率。

很感谢任何形式的帮助。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:43:22.663

如果你`SELECT * FROM Win32_PerfFormattedData_Counters_ProcessorInformation`那么你会得到一个结果集的列表。第一组是所有 CPU 的总体值，其余的是各个 CPU 的值。

这段代码显示了这个想法。请注意，您应该替换`SYSTEM`为您要查询的计算机的名称。

```
use strict;
use warnings;

use Win32::OLE;
use Win32::OLE::Variant;

STDOUT->autoflush;

my $wmi = Win32::OLE->GetObject('winmgmts:\\\\SYSTEM\root\cimv2') or die Win32::OLE->LastError;
my $list = $wmi->ExecQuery('SELECT * FROM Win32_PerfFormattedData_Counters_ProcessorInformation');
my $n = 0;
for my $cpu (in $list) {
  printf "%s: %d%%\n", $n ? "CPU$n" : ' ALL', $cpu->PercentProcessorTime;
  $n++;
} 
```

**输出**

```
 ALL: 8%
CPU1: 8%
CPU2: 12%
CPU3: 6%
CPU4: 12%
CPU5: 6%
CPU6: 6%
CPU7: 6% 
```

# javascript - Javascript onclick 事件可以显示但不能隐藏

> ID：14433585
> 
> 赞同：0
> 
> 时间：2013-01-21T06:44:13.470
> 
> 标签：javascript, html, onclick

这是一个非常基本的脚本，但基本上我在单击时显示一个 div，然后在您稍后单击按钮标题时隐藏 div。我以前做过，而且效果很好。我似乎无法找出我做错了什么，或者做错了什么。就像我说的，第一个`click()`显示完美，第二个`hide()`什么都不做

JS：

```
function click1(){
    document.getElementById('form1').style.display='block';
}

function hide1(){
    document.getElementById('form1').style.display='none';
} 
```

HTML：

```
<tbody>
 <tr>
  <td style="cursor:pointer;" onclick="click1()">
   <div id="form1" style="display:none;">
    <form action="enter.php" method="post">
     <label for="entry1">Entry1</label>
      <input type="text" id="entry1" name="entry1" size="15" /><br>
     <label for="entry2">Entry2</label>
      <input type="text" id="entry2" name="entry2" size="15"/><br>
     <label for="entry3">Entry3</label>
      <input type="text" id="entry3" name="entry3" size="15"/><br>
      <input type="hidden" name="id" value="1" /><br>
      <input type="hidden" name="table" value="table" /><br>
      <input type="submit" value="GO!" />
      <input type="button" value="later" onClick="hide1()"/>
    </form>
   </div><sub>1</sub>
  </td>
 </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:00:27.900

该按钮是 的子级，`td`因此两个函数都将在同一个点击事件上触发。

将此添加到`hide1()`：

```
function hide1(e){
    document.getElementById('form1').style.display='none';
    e.stopPropagation();
} 
```

这将防止事件冒泡 DOM 并触发该`td`事件。

您还需要在点击处理程序中传递事件：`onClick="hide1(event)"`

演示：http: [//jsfiddle.net/7PT8U/](http://jsfiddle.net/7PT8U/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:09:21.627

你可以做这样的事情

```
 <tbody>
 <tr>
  <td style="cursor:pointer;">
   <div id="form1" style="display:none;">
    <form action="enter.php" method="post">
     <label for="entry1">Entry1</label>
      <input type="text" id="entry1" name="entry1" size="15" /><br>
     <label for="entry2">Entry2</label>
      <input type="text" id="entry2" name="entry2" size="15"/><br>
     <label for="entry3">Entry3</label>
      <input type="text" id="entry3" name="entry3" size="15"/><br>
      <input type="hidden" name="id" value="1" /><br>
      <input type="hidden" name="table" value="table" /><br>
      <input type="submit" value="GO!" />
      <input type="button" value="later" onClick="hide1()"/>
    </form>
   </div><sub onclick="click1()">1</sub>
  </td>
 </tr>
</tbody> 
```

# icons - 应该在 Photoshop for Android 图标中设置什么 dpi？

> ID：14433587
> 
> 赞同：1
> 
> 时间：2013-01-21T06:44:18.040
> 
> 标签：icons, android-icons

对于在 Android 平台中设计启动器图标，相应的指南说：

> 从大型画板开始
> 
> 因为您需要为不同的屏幕密度创建资源，所以最好在尺寸是目标图标大小的倍数的大型画板上开始您的图标设计。例如，启动器图标的宽度为 96、72、48 或 36 像素，具体取决于屏幕密度。如果您最初在 864x864 画板上绘制启动器图标，那么当您将画板缩小到最终资产创建的目标尺寸时，调整图标会更容易、更清晰。

但是在这里我无法理解 864x864 画板是什么意思。谁能澄清一下？

另外，要在 Photoshop 中设置的 DPI 是多少？

在 web 平台上，我们通常设置 72dpi 来设计从 16x16 到 512x512 的各种尺寸的图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:46:13.170

关于 864x864，864 是所有这些尺寸的通用乘数。您可以轻松缩小 864 的图像而不会丢失以上所有分辨率，864/9=96 864/12=72...

# linq-to-sql - 通过最后一个查询的多个结果选择具有 LINQ 的多个字段

> ID：14433588
> 
> 赞同：0
> 
> 时间：2013-01-21T06:44:20.000
> 
> 标签：linq-to-sql

我需要用 linq 查询一个表，并将 linq 查询返回的行绑定到一个对象

```
WebChatDBDataContext dataContext = new WebChatDBDataContext();
var executiveSession= dataContext.ExecutiveSessions.FirstOrDefault(s => s.SessionId == httpcontext.Session.SessionID);
var talkerId = (from cRoom in dataContext.ChatRooms
                where cRoom.ExecutiveId == executiveSession.ExecutiveSessionId
                select cRoom.TalkerId
               );
var msglst = from msgPool in dataContext.MessagePools
             // I want to use talkerId from the previous query
             where msgPool.TalkerId == ???
            select msglst; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:12:07.873

听起来你想加入。如果您不需要`talkerId`其他任何东西，那么在单个查询中执行此操作将是最简单的：

```
var executiveSessionId = dataContext.ExecutiveSessions
        .FirstOrDefault(s => s.SessionId == httpcontext.Session.SessionID)
        .ExecutiveSessionId;

var pools = from room in dataContext.Rooms
            where room.ExecutiveId == executiveSessionId
            join pool in dataContext.MessagePools
              on room.TalkerId equals pool.TalkerId
            select pool; 
```

# c++ - OOPS：__cmp__ 函数

> ID：14433592
> 
> 赞同：0
> 
> 时间：2013-01-21T06:44:38.847
> 
> 标签：c++, python, oop

当我在我的类中实现函数时，python 是否会在内部重载“==” `__cmp__`，就像我们在 C++ 中那样做？

只是好奇。我是 python 新手。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:49:30.003

当`==`您定义`__cmp__`. 在这种特殊意义上，Python 级别的“==-operator”由您的定义修改`__cmp__`（请注意，仅当您不定义时才如此`__eq__`）。

但是`operator==`在 C++ 级别上不受此影响，原因有两个：

*   Python 不是用 C++ 实现的，而是用 C 实现的，并且没有运算符重载
*   当您编写或使用 Python 代码时，Python 本身不会重新编译

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:48:29.920

是的，连同`__eq__`, `__ne__` `__lt__`, `__le__`, `__gt__` 和`__ge__`[(doc)](http://docs.python.org/2/reference/datamodel.html#object.__cmp__)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T06:48:42.463

相对于什么？这`__cmp__`就是. *_*

虽然它已经被弃用了一段时间，而且它完全在 3 中消失了，你应该使用[`__eq__`和朋友](http://docs.python.org/2/reference/datamodel.html#object.__lt__)来代替。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T06:49:45.010

是的，还有很多其他的运算符和方法。[Python 文档](http://docs.python.org/2/reference/datamodel.html#specialnames)中有完整的列表。

# php - 当源是整数而目标是字符串时，与 Pascal 的 Move 等效的 PHP 是什么？

> ID：14433595
> 
> 赞同：-2
> 
> 时间：2013-01-21T06:44:54.593
> 
> 标签：php, delphi, pascal

我正在将一些 Pascal 转换为 PHP。在返回类型的函数内部`AnsiString`有以下代码行：

```
SetLength(Result, 3);
Move(I, Result[1], Length(Result)); 
```

`I`是一个`Longint`值为 5051253 的值。最终`Result`是`'u'#19'M'`.

如何在 PHP 中复制它？它在做什么？我知道`Move`从中读取字节`I`并将它们放入`Result`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:52:49.810

第一行将变量“Result”的长度设置为 3 个字节。

我不知道 I 的值来自哪里，但它可能指向内存中的另一个变量。

第二行是从指向的内存区域复制 3 个字节到变量“Result”中。

您需要做的是查看变量“I”指向的位置并据此构建 PHP 代码。

比方说，我指的是另一个 ansistring 变量“Source”。然后你可以这样做：

`$Result = substr($Source, 0, 3);'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T08:02:34.867

```
function low3bytes( $I) {
  return chr(         $I           % 256)
       . chr( ((int) ($I /   256)) % 256)
       . chr( ((int) ($I / 65536)) % 256);
} 
```

**警告：**未经测试。

# mysql - Mysql合并查询

> ID：14433598
> 
> 赞同：0
> 
> 时间：2013-01-21T06:45:10.300
> 
> 标签：mysql, join, parent-child, treenode

嘿伙计们，我正在尝试将两个查询合并在一起，但遇到了问题，也许您可​​以看一下，我有这两个单独的查询，我正在尝试合并。第三个连接将在那里获得一个字段，该字段将计算它还有多少父母，而我还没有开始。

```
SELECT
    e.baseName AS baseName, 
    s.baseName AS masterName
FROM dataSet e 
INNER JOIN dataSet s 
    ON s.id = e.entityId 
ORDER BY e.entityId

SELECT  
    e.baseName AS baseName, 
    b.baseName AS masterName, 
    COUNT(*)-1 AS siblingCount 
FROM dataSet e 
JOIN dataSet b 
    ON b.id=e.entityId 
GROUP BY b.id, b.baseName 
```

我想出了这个，但遇到了问题

```
SELECT
    e.baseName AS baseName, 
    s.baseName AS masterName,
    COUNT(*)-1 AS siblingCount 
FROM dataSet e 
    JOIN dataSet b ON b.id = e.entityId
    INNER JOIN dataSet s ON s.id = e.entityId 
GROUP BY b.id, b.baseName 
ORDER BY e.entityId 
```

表结构是这样的

```
+----+--------------------+----------+
| id | baseName           | entityId |
+----+--------------------+----------+
|  1 | 000000000000000001 |        1 |
|  2 | 000000000000000002 |        1 |
|  3 | 000000000000000003 |        1 |
|  4 | 000000000000000004 |        2 |
|  5 | 000000000000000005 |        2 |
|  6 | 000000000000000006 |        2 |
|  7 | 000000000000000007 |        2 |
|  8 | 000000000000000008 |        2 |
|  9 | 000000000000000009 |        3 |
| 10 | 000000000000000010 |        3 |
| 11 | 000000000000000011 |        3 |
| 12 | 000000000000000012 |        3 |
| 13 | 000000000000000013 |        3 |
| 14 | 000000000000000014 |        3 |
| 15 | 000000000000000015 |        3 |
| 16 | 000000000000000016 |        4 |
| 17 | 000000000000000017 |        4 |
| 18 | 000000000000000018 |        4 |
| 19 | 000000000000000019 |        4 |
| 20 | 000000000000000020 |        4 |
+----+--------------------+----------+ 
```

我真正想要的是这个

```
+--------------------+--------------------+--------------+-------------+
|      baseName      |      masterName    | siblingCount | parentCount | 
+--------------------+--------------------+--------------+-------------+
| 000000000000000001 | 000000000000000001 |          999 |           0 |
| 000000000000000002 | 000000000000000001 |          998 |           1 |
| 000000000000000003 | 000000000000000001 |          998 |           1 |
| 000000000000000004 | 000000000000000002 |          997 |           2 |
| 000000000000000005 | 000000000000000002 |          997 |           2 |
| ....               | ....               |         .... |        .... |
+--------------------+--------------------+--------------+-------------+ 
```

帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:49:49.940

好的，所以我最大的障碍就是理解你的数据，但我想我是在“工作”/“树”类比之后得到的。下面是一个 SQL 查询，我认为它会得到你想要的输出。还有一个[sqlfiddle](http://sqlfiddle.com/#!2/da4a7/18) ，里面有我用来给你玩的测试数据。希望这可以帮助。

```
SELECT
    e.baseName AS baseName, 
    s.baseName AS masterName,
    (SELECT COUNT(id) FROM dataSet WHERE entityId < e.entityId) as parentCount,
    (SELECT COUNT(id) FROM dataSet WHERE entityId > e.entityId) as siblingCount
  FROM 
    dataSet e 
    LEFT JOIN dataSet s ON s.id = e.entityId
  ORDER BY 
    e.entityId 
```

祝你好运！

# javascript - 默认情况下如何显示第一个 TAB 活动？

> ID：14433600
> 
> 赞同：0
> 
> 时间：2013-01-21T06:45:25.427
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

我有两个选项卡 TAB 1 和 TAB 2。现在我想在每次加载页面时默认显示 TAB 1。我该怎么做？我正在使用 jquery Mobile 开发移动应用程序。

```
<script type="text/javascript">
    $('div[data-role="navbar"] a').live('click', function () {
    $(this).addClass('ui-btn-active');
    $('div.content_div').hide();
    $('div#' + $(this).attr('data-href')).show();
    });
    </script>

    <div data-role="navbar">
        <ul>
                <li><a href="#" data-href="a" class="tabbs " >TAB 1</a></li>
                <li><a href="#" data-href="b" class="tabbs" >TAB 2</a></li>
        </ul>
        </div><!-- /navbar -->
    <div id="a" class="content_div"> </div>
    <div id="b" class="content_div" > </div> 
```

提前谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:26:24.447

使用`$(window).load()` 给`ul`一个**id**。然后使用该**id**找到第一个孩子并用它添加类。它会很好地工作。

```
$(window).load(function{
$('UL_ID li: first-child').addClass('class_Name');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:47:00.340

您可以将类添加到第一个元素以使其在 doucment.ready 上处于活动状态。您还必须在单击事件中取消选择先前选择的选项卡。

**[现场演示](http://jsfiddle.net/rajaadil/jxwZ2/)**

```
<script type="text/javascript">
    prevTab = $('div[data-role="navbar"] a');    
    prevTab.eq(0).addClass('ui-btn-active'); //Selects first tab.

     $('div[data-role="navbar"] a').live('click', function () {
       prevTab.removeClass('ui-btn-active'); 
       $(this).addClass('ui-btn-active');
       $('div.content_div').hide();
       $('div#' + $(this).attr('data-href')).show();
       prevTab = $(this);
     });

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:50:17.900

为什么不直接将`ui-btn-active`类添加到 HTML 中的第一个选项卡和另一个类以显示内容 div？

看到这个小提琴： http: [//jsfiddle.net/YEqBh/1/](http://jsfiddle.net/YEqBh/1/)（也编辑了jQuery）（哎呀更新链接）

# macos - 使用applescript全局隐藏菜单栏和停靠

> ID：14433602
> 
> 赞同：6
> 
> 时间：2013-01-21T06:45:36.123
> 
> 标签：macos, osx-lion, applescript

我正在尝试让 OS X Lion 中的停靠栏和菜单栏在全球范围内自动隐藏。我希望它对所有程序都这样做的原因是因为我正在尝试在 wine 中玩游戏，并且在全屏运行时 CPU 使用率会飙升，所以在玩窗口时我总是不得不手动告诉停靠在播放前隐藏。

我知道编辑 info.plist 和 LSUIPresentationMode 键，但不幸的是游戏启动器注意到该文件已被编辑并在启动前修复它。所以我唯一的选择是在开始之前让它对所有程序隐藏，这可能吗？AppleScript 甚至是解决此问题的最佳方法吗？我对在 Mac 上进行编码仍然很陌生，因此对如何完成此操作的任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T15:41:20.687

你可以很容易地做码头。我不知道如何全局做菜单栏。我怀疑这是可能的。这是码头的脚本。它将根据当前情况将其切换为自动隐藏或不自动隐藏。祝你好运。

```
tell application "System Events"
    tell dock preferences to set autohide to not autohide
end tell 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-02T03:58:13.270

对于那些仍然感兴趣的人，这对于那些使用 OS X 的人来说是一个解决方案。“常规设置”页面现在从`tab`不起作用的搜索栏开始。这是一个解决方法。

```
tell application "System Preferences"

    --open General Settings
    activate
    set the current pane to pane id "com.apple.preference.general"
    try

        --wait for screen to boot
        repeat until window "General" exists
            delay 0.2
        end repeat
        delay 0.5
    on error error_message
        get error_message
    end try
end tell

--click the appropriate check box
tell application "System Events"
    click checkbox "Automatically hide and show the menu bar" of window "General" of application process "System Preferences" of application "System Events"
end tell 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-12-19T03:06:47.100

对于大苏尔：

```
tell application "System Events"
    tell dock preferences to set autohide menu bar to not autohide menu bar
end tell 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-01T04:24:51.907

这是一个为我做的applescript，因为它也是我真正想看到的东西。我不确定它是否会赢得风格点，但我使用 Automator 服务调用它并为其设置键盘快捷键，从那以后我没有抱怨过它。

```
tell application "System Events"
    tell dock preferences
        --get the properties list of the dock and set (or assign) it to our variable we'll call "dockprops"
        set dockprops to get properties
        --in our now "dockprops" list, assign our target dock property ("autohide") to the variable "dockhidestate"
        set dockhidestate to autohide of dockprops
        --the dock's "autohide" property is a boolean: it's value can only be either true or false
        --an "if statement" provides the necessary logic to correctly handle either of these cases in this one single script
        if autohide = true then
            tell application "System Events"
                tell dock preferences to set autohide to not autohide
            end tell
        else
            set autohide to true
        end if
    end tell
end tell

tell application "System Preferences"

    activate
    --  tell application "Finder" to tell process "System Preferences" to set visible to false
    set the current pane to pane id "com.apple.preference.general"

    --  The delays are necessary as far as I can tell
    delay 0.5
    tell application "System Events" to keystroke tab
    delay 0.5
    tell application "System Events" to keystroke tab
    tell application "System Events" to keystroke tab
    tell application "System Events" to keystroke space
    tell application "System Events" to key code 13 using {command down}
end tell 
```

# c++ - Qt：可执行文件未重新生成

> ID：14433603
> 
> 赞同：0
> 
> 时间：2013-01-21T06:45:38.350
> 
> 标签：c++, qt, executable

我有简单的 Qt 程序。运行`make`时会出现 1200 行长的错误

```
make: Circular main.o <- QThread dependency dropped.
In file included from mythread.h:4,
                 from main.cpp:3:
./QThread:1: error: stray '\127' in program
./QThread:1: error: stray '\2' in program
./QThread:1: error: stray '\1' in program
./QThread:1: error: stray '\1' in program
In file included from mythread.h:4,
                 from main.cpp:3:
./QThread:1:8: warning: null character(s) ignored
./QThread:1: error: stray '\2' in program
./QThread:1:18: warning: null character(s) ignored
./QThread:1: error: expected constructor, destructor, or type conversion before '>' token
./QThread:1:20: warning: null character(s) ignored
./QThread:1: error: stray '\1' in program
./QThread:1:22: warning: null character(s) ignored
./QThread:1: error: stray '\240' in program
./QThread:1: error: stray '\21' in program
./QThread:1:28: warning: null character(s) ignored
./QThread:1: error: stray '@' in program
./QThread:1:34: warning: null character(s) ignored
./QThread:1: error: stray '@' in program
./QThread:1: error: stray '\24' in program
./QThread:1:43: warning: null character(s) ignored
./QThread:1:54: warning: null character(s) ignored
./QThread:1: error: stray '@' in program
./QThread:1:56: warning: null character(s) ignored
./QThread:1: error: stray '\8' in program
./QThread:1:58: warning: null character(s) ignored
./QThread:1:60: warning: null character(s) ignored

...

./QThread:16: error: stray '\255' in program
./QThread:16: error: stray '\255' in program
./QThread:16: error: stray '\235' in program
./QThread:16: error: stray '\156' in program
./QThread:16: error: stray '\137' in program
./QThread:16: error: stray '\195' in program
./QThread:16: error: stray '\199' in program
./QThread:16: error: stray '\144' in program
./QThread:16:252: warning: null character(s) ignored
./QThread:16: error: stray '@' in program
./QThread:16: error: stray '\139' in program
./QThread:16: error: stray '\16' in program
./QThread:16: error: stray '\240' in program
./QThread:16: error: stray '\255' in program
./QThread:16: error: stray '\8' in program
./QThread:16: error: stray '\15' in program
./QThread:16: error: stray '\149' in program
./QThread:16: error: stray '\194' in program
./QThread:16: error: stray '\132' in program
./QThread:16: error: stray '\210' in program
./QThread:16: error: stray '\139' in program
./QThread:16: error: expected declaration before '}' token
In file included from main.cpp:3:
mythread.h:1:1: unterminated #ifndef
make: *** [main.o] Error 1 
```

`QThread`是可执行文件。当我删除它并`make`再次运行时，它编译正常。但是当我做一些改变时，我也会遇到`make`同样的错误。我正在`Makefile`使用创建`qmake`，为什么可执行文件没有重新生成？

```
QThread.pro
######################################################################
# Automatically generated by qmake (2.01a) Mon Jan 21 10:22:12 2013
######################################################################

TEMPLATE = app
TARGET = 

# Input
HEADERS += mythread.h
SOURCES += main.cpp mythread.cpp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:29:05.997

你`mythread.h`这样做`#include <QThread>`了，当你自己的可执行文件被命名时`QThread`，它会找到你刚刚构建的可执行文件，而不是 Qt 自己的头文件。

您已根据 Jeremy 的评论重命名该程序，并且您已经看到它可以正常工作。这是一个不错的选择。另一个是确保你包含`<QThread>`而不是`"QThread"`（如果你还没有这样做的话）并确保你的编译器标志设置为使得当前目录在 Qt 的头目录之前不被搜索。

# ruby - 将破坏性方法链接在一起会导致“nil:NilClass 的未定义方法”错误

> ID：14433606
> 
> 赞同：0
> 
> 时间：2013-01-21T06:46:08.563
> 
> 标签：ruby, methods

而不是

```
str.downcase!
str.gsub!(/\W/, "") 
```

看来我应该能够连续使用多个破坏性的 String 方法：

```
str.downcase!.gsub!(/W/, "") 
```

有时这可行，但有时会导致错误。

```
irb(main):001:0> str = "Foobar!"
"Foobar!"
irb(main):002:0> str.downcase!.gsub!(/\W/, "")
"foobar"
irb(main):003:0> str
"foobar"
irb(main):004:0> str.downcase!.gsub!(/\W/, "")
NoMethodError: undefined method `gsub!' for nil:NilClass
    from (irb):4
    from /usr/bin/irb:12:in `<main>' 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:46:08.563

许多破坏性方法，包括，如果它们不改变任何东西，就会`gsub`返回。`nil`因此，链接它们通常不是一个好主意。而是使用

```
str.downcase!
str.gsub!(/\W/, "") 
```

或者

```
str = str.downcase.gsub(/\W/, "") 
```

# matlab - 在命令行窗口中禁用 Matlab 中的启动提示？

> ID：14433609
> 
> 赞同：2
> 
> 时间：2013-01-21T06:46:13.217
> 
> 标签：matlab, window, command, startup, prompt

我最近为我的 Mac 购买了 Matlab 学生版。我已经将它安装在我的计算机上，现在，每次启动 Matlab 时，都会收到以下提示：

学生许可证——与学位授予机构提供的课程结合使用。禁止专业和商业用途。

我觉得它有点烦人，想知道是否有任何方法可以防止它在启动时显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:09:06.570

尝试使用以下命令启动 matlab：

```
matlab -nosplash 
```

要控制 matlab 启动时发生的情况，您可以使用 \edit [matlabrc](http://www.mathworks.com/help/matlab/ref/matlabrc.html)或使用 \edit [startup.m](http://www.mathworks.com/help/matlab/ref/startup.html) with `clc`，在链接中的文档中查看更多信息。

# c - 在字符串数组中逐个字符存储

> ID：14433610
> 
> 赞同：0
> 
> 时间：2013-01-21T06:46:15.500
> 
> 标签：c, string, segmentation-fault, storing-data

我想编写 ac 程序，用于根据运算符拆分“23 * 34”字符串，并将数字单独存储为字符串数组中的单独字符串。我是以下代码。

```
struct exp_details
{
        char operator[10];
        char *number[10];
}ed;

int split(int m,int n,char *str) /*m for operator index, n for str index */
{
        int i,j=0;
        for(i=n;(str[i] != ed.operator[m]) && (str[i] != '\0');i++,j++)
        {
                ed.number[m][j] = str[n];
        }
        if(str[i] != '\0')
        {
                split(m++,i++,str);
        }
        else
                return 1;
        return 0;
} 
```

但这种编码显示分段错误。它正在运行

```
ed.number[m][j] = str[n]; 
```

这个声明。我认为这个声明只会引起问题。我想，我的逻辑是正确的。但我不知道如何纠正它。请帮我。提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:48:05.430

看起来你没有初始化`j`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:50:56.407

可能您需要`j`在 for 循环中进行初始化：-

```
for(i=n, j = 0;(str[i] != ed.operator[m]) && (str[i] != '\0');i++,j++) 
```

另外，我发现您的递归调用存在一些问题。在下面的声明中： -

```
split(m++,i++,str); 
```

您正在传递`m++`. `operator index`因此，在这里您假设字符串中的运算符将按照与`char operator[10]`数组中列出的顺序相同的顺序出现。这是完全错误的。

**例如： -**

如果您的运算符数组包含： - `{'*', '+', '/', '-'}`。您的字符串是： - `23*45-30+29`，然后当您在第一个运算符 - 上拆分字符串时`*`，然后在下一次调用时，您将`+`作为运算符传递，因为它在您的`operator array`. 现在，在下一次运行时，您的循环将迭代直到它`+`在您的字符串中找到，因此它将 - 添加`45-30`到您的`numbers`数组中。所以，有错误。

您可能需要在迭代时测试字符串中的每个字符，无论它是否存在于`operator`数组中。否则你最终也会`operators`在你的`numbers`数组中存储一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:21:48.653

The incrementation here is meaningless

```
 split(m++,i++,str); 
```

since m and i are local and you increment them *after* you call the `split()` function.

you should also check the bounds when you address the array, make sure they are inside the valid range i.e. 0..9

```
assert( m >= 0 && m <= 9 );
assert( j >= 0 && j <= 9 );
assert( n >= 0 && n <= 9 );

ed.number[m][j] = str[n] 
```

better still setup a constant for your arrays

```
#define MAXSIZE 10

struct exp_details
{
        char operator[MAXSIZE];
        char *number[MAXSIZE];
} ed;

...
assert( m >= 0 && m < MAXSIZE );
assert( j >= 0 && j < MAXSIZE );
assert( n >= 0 && n < MAXSIZE ); 
```

# android - Android SimpleCursorAdapter，滚动加载数据

> ID：14433611
> 
> 赞同：2
> 
> 时间：2013-01-21T06:46:29.737
> 
> 标签：android, simplecursoradapter

以下代码完美运行。但是，我尝试加载 10,000 条记录，而 simplecursoradapter 假设在滚动时加载记录，而不是一次加载整个 10,000 条记录。我试图弄清楚如何制作它，因此它一次只能加载大约 10-15 条记录，并继续加载滚动。知道怎么做吗？

```
package com.example.scoredata;

import android.app.Activity;
import android.content.Context;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.ListFragment;
import android.support.v4.widget.CursorAdapter;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class ScoreBoard extends ListFragment {

    public DatabaseHelper db;
    private Cursor cursor;
    public Result r;
    public SimpleCursorAdapter adapter;
    public static String[] FROM = {DatabaseHelper.KEY_POS, DatabaseHelper.KEY_MISTAKES, DatabaseHelper.KEY_DATE, DatabaseHelper.KEY_TIME, DatabaseHelper.KEY_SCORE};
    public static int[] TO = {R.id.score_Pos, R.id.score_Mistakes, R.id.score_Date, R.id.score_Time, R.id.score_Score}; 
    public ListView list;

    public ScoreBoard() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.scoreboard, null);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {       
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {

        list = (ListView) getActivity().findViewById(android.R.id.list); 
        db = new DatabaseHelper(getActivity());
        r = new Result(4, 3, 21, "19-01-2013", "2:42", 59);
        db.addResult(r);
        cursor = db.getRow();
        adapter = new SimpleCursorAdapter(getActivity(), R.layout.scorerow, cursor, FROM, TO, 0);
        list.setAdapter(adapter);

        super.onViewCreated(view, savedInstanceState);
    }

    @Override
    public void onDestroyView() {
        if(db != null) {
            db.close();
        }
        super.onDestroyView();
    }
}

public class DatabaseHelper extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "sudokuScores";

    // Contacts table name
    private static final String TABLE_RESULTS = "results";

    private DatabaseHelper databaseHelper;
    private SQLiteDatabase db;

    // Contacts Table Columns names
    public static final String KEY_ID = "_id";
    public static final String KEY_DIFF = "diff";
    public static final String KEY_POS = "pos";
    public static final String KEY_MISTAKES = "mistakes";
    public static final String KEY_DATE = "date";
    public static final String KEY_TIME = "time";
    public static final String KEY_SCORE = "score";

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        databaseHelper = this;
        db = databaseHelper.getWritableDatabase();
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_RESULTS_TABLE = "CREATE TABLE " + TABLE_RESULTS + "("
                + KEY_ID + " INTEGER PRIMARY KEY, " + KEY_DIFF + " INTEGER, "
                + KEY_POS + " INTEGER, " + KEY_MISTAKES + " INTEGER, "
                + KEY_DATE + " TEXT, " + KEY_TIME + " TEXT, " + KEY_SCORE + " LONG)";
        db.execSQL(CREATE_RESULTS_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_RESULTS);

        // Create tables again
    }

   public void addResult(Result result) {

       ContentValues values = new ContentValues();
       values.put(KEY_DIFF, result.getDifficulty()); 
       values.put(KEY_POS, result.getPos());
       values.put(KEY_MISTAKES, result.getTotalMistakes());
       values.put(KEY_DATE, result.getDate());
       values.put(KEY_TIME, result.getTimeLeft());
       values.put(KEY_SCORE, result.getScore());    

       // Inserting Row
       db.insert(TABLE_RESULTS, null, values);
   }

   public Cursor getRow() {
       String selectQuery = "SELECT * FROM " + TABLE_RESULTS;
       //return db.rawQuery(selectQuery, null);
       return db.query(TABLE_RESULTS, null, null, null, null, null, null);
   }
} 
```

# php - 如何在文本字段中获取 excel 函数类型的功能？

> ID：14433612
> 
> 赞同：0
> 
> 时间：2013-01-21T06:46:42.340
> 
> 标签：php, javascript, jquery

我有一个如下所示的页面。其中一些数据来自数据库，并且在数据库数据旁边也会有表单字段。所有都是动态的，所以我们也需要对每个字段进行验证。

请检查这个[http://jsbin.com/efinak/22/edit](http://jsbin.com/efinak/22/edit)

```
Total Spent Cost: ((t1*100+t2*200)*x%+(t3*110)*y%)spent for A + spent for B

Client : A

product        No of Hours      Avg Rate/Hour       Cost
A1                  t1              100             t1*100
A2                  t2              200             t2*200

Total Cost:                                         t1*100+t2*200
Percentage(%):                                          x
Spent Cost:                                         (t1*100+t2*200)*x%

Client : B

product        No of Hours      Avg Rate/Hour       Cost
B1                  t3              110             t3*100

Total Cost:                                         t3*110
Percentage(%):                                        y
Spent Cost:                                         (t3*110)*y% 
```

在上面的示例客户端中，产品和小时数将来自数据库。我为平均费率/小时保留了一个文本字段，还为成本保留了一个文本字段。

为什么我在问题中提到了 excel 的一种功能，我将在这里解释。如果假设我设置了 Avg Rate/Hour 文本字段，那么应该自动计算成本而无需任何重定向。同样，如果您设置成本平均费率/小时应自动计算。

一旦计算成本总成本应该自动计算。像上面的百分比也有一个文本字段，它也将由用户设置一些值。基于此，您需要计算花费的成本。

我需要为每个客户做这件事。一旦自动计算每个客户的花费成本，总花费成本也应该即时计算。

我需要想法，如果可能的话，需要更多帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:59:24.733

如果每个客户端都有相同的聚合函数，则可以创建一个 javascript 类并将其附加到每个表，将计算绑定到输入字段的更改事件。

你可以制作一个像这样的 jquery 插件：（我还没有接近完成它，但它是一个开始）

您必须为每一行和每一项添加类，以便您在使用 jquery 的 dom 中更轻松地识别它，但最终它会变得更干净。

```
(function($){

   var Client = function(el){
       var $table = $(el);
     $.each($('.product-row'),function(row){
       var $row = $(row);
       //do the product total calculations here and bind it
     });
     $.each($('.total-row'),function(row){
       //bind your total calculation
     });
      //do this for discount and final rows also 

       $table.data('Client', this);
   };

   $.fn.client = function(){
      return this.each(function(){
         (new Client(this));
      });
   };

})(jQuery);

$(document).ready(function(){
 $('.client-table').client();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:04:59.723

您可以为此使用 jquery 脚本。我举一个简短的例子，你可以从中了解这背后的基本逻辑。假设您有 4 个字段。A、B、C 和 D 具有适当的类名。

这里A和B来自数据库，C是输入字段，D是最终答案的输入字段。您可以按如下方式自动计算 D。

```
$(document).ready(function() {
     $('.class_C').live('change', function() {
          var A = $('.class_A').val();
          var B = $('.class_B').val();
          var C = $('.class_C').val();

          // Calculate D as per A, B and C.
          var D = A + B * C / 50;

          // Put new value in to D field.
          $('.class_D').val(D);
     });
}) 
```

**编辑：：**

检查：http: [//jsbin.com/efinak/27/edit](http://jsbin.com/efinak/27/edit)

```
$('input[name="quantity"]').change(function() {   
  var total = 0;
  $('input[name="price"]').map(function(i,n) {
    total += Number(n.value);
  });
  $('input[name="total"]').val(total);
}); 
```

# macros - 在 clojure 宏中使用 count 函数会产生异常

> ID：14433615
> 
> 赞同：2
> 
> 时间：2013-01-21T06:47:13.413
> 
> 标签：macros, clojure

我有这个函数可以创建一个符号向量：

```
(defn makevars [n] 
"Gives a list of 'n' unique symbols" 
(let [vc (repeatedly n #(gensym ))] vc)) 
```

这是有问题的宏：

```
(defmacro make-strings [syms]
;eg given 2 strings ["abc" "ab"] => ("aa" "ab" "ba" "bb" "ca" "cb")  
(let [nl (count syms) vs (makevars nl) forargs (vec (interleave vs syms))]  
`(for ~forargs (str ~@vs)))) 
```

当宏执行时`(make-strings ["abc" "ab"])`出现所需的输出。但是，如果宏运行为`(make-strings sy)`，其中 sy 定义为`["abc" "ab"]`发生此错误：

```
UnsupportedOperationException count not supported on this type: Symbol  clojure.lang.RT.countFrom (RT.java:545) 
```

我做错了什么，如何解决？作为宏观知识的新手，我希望我的理解有些不对劲。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T07:45:25.880

首先，我强烈建议您在此处删除宏，并使用普通函数实现您想要实现的逻辑：宏仅在您想要创建一些方便的自定义语法时有用，并且您只想计算的笛卡尔积两组字符。最简单的方法是使用 contrib lib [math.combinatorics](https://github.com/clojure/math.combinatorics)：

```
user=> (def sy ["abc" "ab"])
user=> (map #(apply str %) (apply cartesian-product sy))
("aa" "ab" "ba" "bb" "ca" "cb") 
```

也就是说，您遇到的问题是宏在编译时执行，因此接收您作为参数传递的未评估形式。这意味着当您调用时：

```
(make-strings sy) 
```

不是传递由 引用的向量，而是将`sy`符号`sy`赋予`make-strings`宏，以便调用

```
(count sy) 
```

然后将触发上述异常。由于宏由于其编译时间性质而无法评估其输入，因此您永远无法从宏中获取符号背后的值：对此类符号的所有操作都必须以宏本身的返回形式完成，即然后在运行时执行。

`for`当您希望能够传递文字或符号时，上述内容使您制作绑定的策略不可行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T08:55:59.093

我认为 skuro 很好地回答了问题所在和原因，还建议了一个非常有用的库，您可以使用它来解决您的原始目标。“那我为什么要读这个？” 我听到你问。我只是觉得分享一下如何只用几行代码就可以将函数应用于事物的笛卡尔积很有趣——而不会侵入可怕的宏观领域。

当我说泛化时，我的意思是目标是能够做类似的事情：

```
user> (permute str ["abc" "ab"])
=> ("aa" "ab" "ba" "bb" "ca" "cb") 
```

好消息是，如果我们开发这个迄今为止不存在的置换函数，我们可以使用相同的函数来执行以下操作：

```
user> (permute + [[1 2 3] [10 20 30]])
=> (11 21 31 12 22 32 13 23 33) 
```

这是一个玩具示例，但希望能够传达您通过这种方式进行概括所获得的灵活性。

好吧，这是我想出的一个非常简洁的方法：

```
(defn permute [f [coll & remaining]]
  (if (nil? remaining)
    (map f coll)
    (mapcat #(permute (partial f %) remaining) coll))) 
```

我开始的核心思想是迭代`map`或`mapcat`进行尽可能多的迭代，因为有不同的字符串要组合。我从你的例子开始，写了一个“冗长”的非通用解决方案：

```
user> (mapcat (fn [i] (map (partial str i) "ab")) "abc")
=> ("aa" "ab" "ba" "bb" "ca" "cb") 
```

这个`mapcat`sa函数下来了`"abc"`。具体来说，它的`mapcat`一个功能`"abc"`是将此时它正在使用的单个元素`map`( ) 与来自 的每个元素组合在一起。`str``"abc"``i``"ab"`

为了让我理解如何将其概括为一个函数，我必须“更深一层”，并尝试使用第三个字符串。

```
user> (mapcat (fn [i] (mapcat (fn [j] (map (partial str i j) "def")) "ab")) "abc")
=> ("aad" "aae" "aaf" "abd" "abe" "abf" "bad" "bae" "baf" "bbd" "bbe" "bbf" "cad" "cae" "caf" "cbd" "cbe" "cbf") 
```

这`mapcat`是一个以组合方式将元素组合在一起的`mapcat`函数。呸。现在我开始了解如何进行概括。最里面的表达式总是在要重新组合的字符串列表中的最后一个字符串中使用某种偏函数。外部表达式只是s 与连续更靠前的字符串，直到最外面的地方使用字符串列表中的第一个字符串重新组合。`map``str``map``str``mapcat`

我想从这里我注意到我不需要`str`一次定义整个部分函数，​​而是我可以在递归调用时“构建它” `permute`。

希望我现在已经给出了足够的上下文来解释这个函数是如何工作的。的最后一次迭代`permute`发生在没有剩余 colls 时（即`(nil? remaining)`返回`true`）。它只是`map`在最后一个 coll 中给出的任何功能。

当还有剩余的 coll 时，它是当前 coll 的变体`mapcat`。这个置换变体使用带有匿名参数`permute`的部分函数，​​并且正在关闭剩余的 colls。通过这样做，它将逐步构建一个部分函数，​​一旦它到达 colls 列表的末尾，最终将被调用。然后，在我的脑海中，我想象它向后追溯，调用 nested s 直到它最终与结果重新组合的 coll 解开。`f``permute``mapcat`

我想这个函数虽然简洁，但可能不是最佳的。坦率地说，我没有太多的 CS 背景，但从我读到的关于 Clojure 的内容来看，使用`loop`/`recur`而不是自递归调用往往更“有效”。我想如果优化对您很重要，那么`loop`重新设计要使用的功能将是相当简单的。`recur`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T08:27:15.970

不评估宏参数。当您将`["abc" "ab"]`作为参数提供给宏时，它会将其作为字符串向量获取，因为字符串是自评估对象。但是当你发送`sy`宏时得到的只是一个符号`'sy`。这就是发生错误的原因。

# php - 为什么 CURL 选择 URL 的一半进行请求？

> ID：14433618
> 
> 赞同：1
> 
> 时间：2013-01-21T06:47:31.403
> 
> 标签：php, curl

以下代码给出的错误是

HTTP/1.0 400 错误请求：请求行中的 HTTP 版本无效。行：GET /http/send-message?to=233445566&message=Some String

```
 $curl = curl_init();
     curl_setopt_array($curl, 
     array( CURLOPT_RETURNTRANSFER => 1,
            CURLOPT_HEADER => 1,
            CURLOPT_TIMEOUT => 4,
            CURLOPT_VERBOSE => 1,
                    CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
                    CURLOPT_URL => 'http://GATEWAY:9710/http/send-message?to='.$mobileNumber.'&message='.$message

     )); 
```

让我知道发生了什么事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:51:04.880

这不是 cURL，这就是 HTTP 的工作方式——URL 的域部分在`Host:`标头中传递，而不是在请求中传递。请求本身从`/`域之后的第一个开始。

您返回的错误似乎是由于您明确设置了 HTTP 1.1，并且服务器是 1.0 服务器。

*编辑*：看起来你的问题在上面的评论中得到了解决。通常，对要放入 URL 的内容进行 urlencoding 很有用。:)

# ruby-on-rails - 理解 Ruby/Rails 中的块

> ID：14433621
> 
> 赞同：3
> 
> 时间：2013-01-21T06:47:56.130
> 
> 标签：ruby-on-rails, ruby

我使用脚手架为帖子创建了一个 CRUD 系统。在控制器中，我看到了这个：

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end 
```

*   它是什么`respond_to`以及它来自哪里？由于它使用`do`运算符，因此我假设它是某种可迭代的列表。在该列表中的每一个`format`上，它将执行`html`和`json`方法。

*   `{ render json: @posts }`与该方法有关的工作如何`json`？是否`render json: @posts`作为参数传递给方法？`render`和`json`每个都是对象吗？我从未见过在符号之外使用冒号表示法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:24:28.873

1.  **PostsController从****ApplicationController**继承方法，而**ApplicationController**从**ActionController::Base**继承。那是`responds_to`从哪里来的。值得研究的主题是“方法查找”。
2.  `do ... end`是编写块的一种方式。 `{ render json: @posts }`是另一种方式。
3.  `json: "foo"`是比写作更现代的替代品`:json => "foo"`
4.  `format`是您要在块内使用的任意变量。`render`是一种方法，`:json`也是一种象征。`respond_to`将响应 Rails 相应格式化响应的用户请求。
5.  为了理解该方法，还有这个：

[http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to](http://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to)

如果您想查看[源代码](https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/metal/mime_responds.rb#L36-L50)（它有点厚），例如`respond_with`Paul 提到的方法，那在 Rails 源代码中：

**rails/actionpack/lib/action_controller/metal/mime_responds.rb**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:05:39.573

首先，`respond_to`不是 Rails 中的现代东西。但无论如何我都会提供[参考](http://api.rubyonrails.org/classes/ActionController/MimeResponds.html#method-i-respond_to "回应")解释。

更现代的助手是[respond_with](http://api.rubyonrails.org/classes/ActionController/MimeResponds.html#method-i-respond_with "响应与")。

可能这个[截屏视频](http://railscasts.com/episodes/224-controllers-in-rails-3)对您有用。

# matlab - 基于变量之一在Matlab中用N变量参数求解N方程

> ID：14433625
> 
> 赞同：0
> 
> 时间：2013-01-21T06:48:19.017
> 
> 标签：matlab, equation

我是 Matlab 的新手，我有 3 个这样的方程：

-5*x + y + z == 0；

x - 2*y + z == 0；

x + y - z == 0；

例如，我想基于 x 获得 y 和 z 的值

z= 3*x

y= 2*x

谁能帮我？

（如果可以使用'solve'（matlab命令），请解释一下如何？）一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:26:56.373

解决这个问题的一种可能方法是使用符号工具箱。

我将按如下方式进行：

```
syms x y z real
assumptions(x)
assumptions(y)
assumptions(z)
f1 = '-5*x + y + z';
f2 = 'x - 2*y + z';
f3 = 'x + y - z';
Sol = solve(f1,f2,f3,'x,y,z');
Sol.x
Sol.y
Sol.z 
```

结果会是

```
Warning: The solutions are parametrized by the symbols:
u = R_

> In solve at 180 

ans =

u/3

ans =

(2*u)/3

ans =

u 
```

这意味着三元组`(x,y,z)`将根据您分配给的值采用不同的值`u`，例如

```
subs(Sol.x,1) = 0.3333 
```

我希望这能澄清你可能有的任何疑问。

# c++ - 可变大小位集

> ID：14433626
> 
> 赞同：16
> 
> 时间：2013-01-21T06:48:20.590
> 
> 标签：c++, data-structures, bitset

我正在练习一个关于数组的问题，我必须在其中找到独特的元素。现在为此，我的逻辑是找到数组中的最大元素并为此定义位集。但问题是 bitset 需要一个常数值，所以如何克服这个问题，下面是我的一些问题：

a）我可以用可变大小定义位集吗？
b）如果不是，那么使用`vector<bool>`or的最佳方法是什么`vector<char>`？
c）我知道 boost 有一个动态的位集，但是当我这样做是为了学习时，我想知道其他方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-21T06:51:11.040

`std::bitset<N>`模板需要预先固定大小。这`std::vector<bool>`是 C++ 标准提供可变长度位向量的方式，它提供类似于可以增长和缩小的位集的功能。

`vector<char>`至于使用or是更好还是更差`vector<bool>`：这`vector<bool>`是实现这一目标的更直接的方法。我会先使用它，然后`vector<char>`在性能不可接受时切换到它。一般来说，最好先尝试编写最干净、最直接的实现，然后再进行优化。

希望这可以帮助！

# java - 如何在 Java 中禁用 kerberos 重放缓存？

> ID：14433628
> 
> 赞同：0
> 
> 时间：2013-01-21T06:48:30.233
> 
> 标签：java, kerberos

我发现定义环境变量 KRB5RCACHETYPE=none 可以在 c/c++ 应用程序中禁用 kerberos 重放缓存，Java 有自己的 kerberos 身份验证实现，有人知道如何在 Java 中禁用重放缓存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:42:43.287

我会禁用重放检测：[http ://docs.oracle.com/javase/1.5.0/docs/api/org/ietf/jgss/GSSContext.html#requestReplayDet%28boolean%29](http://docs.oracle.com/javase/1.5.0/docs/api/org/ietf/jgss/GSSContext.html#requestReplayDet%28boolean%29)

# backbone.js - 覆盖 Backbone 中的委托事件

> ID：14433631
> 
> 赞同：1
> 
> 时间：2013-01-21T06:48:48.740
> 
> 标签：backbone.js, coffeescript

我的观点之一应该是监听窗口调整大小事件，所以我试图覆盖 delegateEvents 和 undelegateEvents 来绑定/取消绑定该监听器。

在视图类中，我放了这个：

```
delegateEvents: => 
    $(window).on 'resize',@windowResized
    super

undelegateEvents: => 
    $(window).off 'resize',@windowResized
    super 
```

但是不知何故，这会导致一旦视图被实例化，就会立即被 delegateEvents 调用 undelegateEvents，我认为这是它处理某些错误情况的方式。为什么这不起作用，做我想做的事情的正确方法是什么？

编辑：

看起来问题可能与重写 delegateEvents 无关。即使自定义的 delegateEvents 方法被注释掉，undelegateEvents 也会被立即调用。为什么会这样？

编辑2：

为了给混合添加更多奇怪的东西，即使在调用了 undelegateEvents 之后，在 events 属性中定义的其他事件也会继续工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:16:40.947

如果你看Backbone源代码，`View.delegateEvents`方法定义如下：

```
 delegateEvents: function(events) {
      if (!(events || (events = _.result(this, 'events')))) return;
      this.undelegateEvents();
      //...
 } 
```

所以 Backbone 在内部调用了`undelegateEvents`第一件事。这大概是为了使`delegateEvents`方法可重入，因此可以多次调用而不会产生副作用。

您可以通过让超类首先委托事件来解决此问题：

```
delegateEvents: => 
  super
  $(window).on 'resize',@windowResized 
```

# php - file_get_contents() 期望参数 1 是字符串，

> ID：14433637
> 
> 赞同：0
> 
> 时间：2013-01-21T06:49:30.163
> 
> 标签：php

我正在尝试制作图像上传表单。以下是表格的代码

```
<table align="center">
<form enctype="multipart/form-data" action="register.php" method="post" onsubmit="return vaidate();" >
<tr><td>
Username:</td><td><input type="text"id="user" name="user"> </td> </tr>
<tr><td>
Password:</td><td><input type="password" id="pass" name="pass" ></td></tr>
<tr><td>
Confirm Password:</td><td><input type="password" id="cpass" name="cpass" onchange="validate()" ></td><td> <div id="error"></div></tr>
<tr ><td>
Profile Picture: </td> <td> <input name="userfile[]" type="file" />
</td>
</tr>
<tr align="center"><td colspan="2">
<input id="submit" align="center" type="submit" > </td>
</form> 
```

并且接收 php 页面是

```
if(isset($_FILES['userfile'])){

            $imgData =addslashes (file_get_contents($_FILES['userfile']));
            $query = 'INSERT INTO users (User,Password,Picure) VALUES ("'.$_POST["user"].'","'.$_POST["pass"].'","'.$imgData.' ")';
            }

        else
        {
        $query = 'INSERT INTO users (User,Password,) VALUES ("'.$_POST["user"].'","'.$_POST["pass"].' ")';
        } 
```

但我不断收到错误

> `file_get_contents() expects parameter 1 to be string, array given`

请问有什么解决办法吗？

根据答案的建议，我替换为以下内容

```
$imgData =addslashes (file_get_contents($_FILES['userfile']["tmp_name"][0])); 
```

但现在我的查询不会运行。在打印 $query 时，我意识到函数连接的字符串末尾没有“）。有什么想法吗？

echo $query 的输出是

```
INSERT INTO users (User,Password,Picure) VALUES ("12312312","1122","ÿØÿà\0JFIF\0\0\0d\0d\0\0ÿì\0Ducky\0\0\0\0\0P\0\0ÿî\0Adobe\0dÀ\0\0\0ÿÛ\0„\0               ÿÀ\0\07\0Î\0ÿÄ\0©\0\0\0\0\0\0\0\0\0\0\0\0   \0\0\0\0\0\0\0\0\0\0\0\0\0\0   \0\0\0\0!1  Aa\"Q2q‘BR#bÓ–XrÒ$ð±ñ‚3CcÔ&\0\0\0\0\0\0\0!1AQaq‘¡±Ñ\"2BðÁRá²#3$ÿÚ\0\0\0?\0?gÃ >žâû9ÜFùw2Ã   ÙÜ§!ÃðÊ:úKØ°¨òÉMë+:\0ô•6Oø? 8ÓqSÃ#sÀ$Õ\'¾ŽI$ÀQn½µ;NÝ\\#~¬÷v6òï‰‡ãÏŒuËHîGD‹ßËQ:/¢?œ9éÔ’tÔqç–¿ŽHv±ÀÔèQcnæÈ\\àEðÔ|ÿ\0ñã6œ*ê>*êýA4B@n¦smöÛ;Ïl_C1*9¶jqÍ:JØeKmùµô¤‰ƒõâUýUy7;—ÿ\0²œ    ð7ÿ\0\'¡Ìz¯ê¯ýåÜþzæS¾cùòp~<}UýT³»ZÃl°ß6—ºžýÌ|~<Ë‰rHó}U‡T×›:%?KK|¶žZô¤k©çÆõáÓ¸ŒpZ;v‘ªpŽ+UuUÔ8*­Ö9r<ø”UWPà(UÔ.*ëõp!WP« º‡QU~¡À…ZŽ\"¨Vë?ÇÃ‰B® xŠ¡_QÁT*Ôxq(ZÛ›XTTö—vNˆõÔñ`ùðCÐ]qG]<’xÝÄª     %E–ÇÜ‹»—í-å×îzá@Ÿ9ù0 }²µÁ—\\*C(Rãt¡:$jxÙ&Ü§ò~tºi;ÜÛÍ{{È··}s\'²&î¬,gcþlxÑš‰OPÙeå Gi¡õ¾ÓÚë¯$‚=J(Ù8Ž1JSÌ¦–’=ÑïqA~ÛÜ‹»7®®åTîƒê\'XÉ“Wu•®zhÎ8TÓ)+Œ£¢¢y“áãâKæñ6ûh[Ž©Y½–¦Ž]&«Ý}èvÆU+w\'&ÝÛg¥NÍî\"E*k’ÚÄJø,!qÅ«©kuÑÒžI^½Iæî\'IZQ d5+Ø¿xe}Sg±ïgºû9Ë°‘¿cN­]E¸“}#žº#„5§/‚tâØãíÚ)°x®.º•ßr$}‡wƒœw—Oí»¸v îž;–UIzªÆÒt¹IEœÚPÒÒ’¤©iêJ’ªéQÈØ2Ý¾¬_)¯UzÎèÊv?Zo½¾ÔGzPÙœG©yï°W\0€Èêë\'ÈðHN¼%ü©Þqí)€†6ý£ÉDkyrÈYÞën_Y_¦¯!¿Ÿ*ªºAˆìCSÊÛi´è”€ØHåÆâÞ3mmkAOœ”‡8‘Õi]†Æ2j ÏÝlÓ¬ÈãI–Æ3µm    ™m 2*s%ä) ¨ºÒu^Dp‹œ¹psXÓMpLxèƒ.EÞoo; `B¦ì¾%Iq·R¥PWõ¶ABò£Ó:…òñéKzü¸bÉl˜h<ªª–\\8WÖñ¾á7×ž‹ZI\'™$üx}ncnæÔÓÚ–Iy(qJsÝ}q­±²¤rØåû§ut¹   ÌnâÅôUUHi   n48q’Øy× Qqß¥#D„¬Sáü§*ë ÊÛ=*Ôú_G[ÅÛ|½y0Õ?o­ØÎ7Ÿ·ZÜÓq2ä¹I¾µ…2Ím4Âºu%¤t2”\'’V>g98YÛZ((šÙHé#©)–û‡÷ážm–ãÒí.ÅåI¢³Ä›wí¦#ÊS’ä õ >‡ÓjóÑ:•-  Ôt(_ÉX_ ÀäkÛ²×ma\\ç³=ðïcº½ÎfŽnïL¨ÛŒQlÙîüjšÔ¯Ó…êÕ{+ÐRìÎ• uBÜÐô„«¯!okkvüÇ!Åsµ–i]õ`œÇv^ç8–Ð[ÚíæÎÖÅÜî©ÅÅ¼¾µ ZÉ  )”–T§®J )BO\"µ)*@§eÃ:aºC@tÔ®÷á†=P‰Ë{üî×1šä¹;ÉkDÛ‡ùphÍ[ Á\"2¢4Óó(ðõœ]»¯z\\ûÉ\\~¥÷ÁýÀ»´Á¬šÎíØäì …;W’¥±Ýþ•‡šÀâOÏˆ“‹·ShÈmä­ÇuQ‡Æ½É)2žÕwz+ñˆîžÙ³ «í¹zR“Ç§O‡\\Ìæ\0¸¨Ýs¢žK ¢¯ÊáDþ(¶á±×å:øç‚fÛêÆ]LBïà{Ž·í?u&6ÿ\0“c•ÁF+TºTµÜ,F| ‚©Œ^_/áâ·©pÑÓÖòM‘¨ñÞ™!˜±ÛSÒe:–£´‘ª–·¢R?IÐq¶+:4 M]É¼ÇkžÞÁa(C¶N/YƒGSjÌ°³HE“€Š’d¹ËŒ… ü›ÊéR|4O§>ŒQBë‰m´©Ç^¡ •(ž@\09’uåÆ¼ù$!H×µ¿l¤Æ° ›ÝùÆÎu¸™6åXÓÊ’ûi’òzÄF›Œã^cÈZ•¢‡òútêVRó—‘ÏÛ£AóNíìWf‚\'tX!µÝÀî¾‚&lt;êñ<^õØ•-¼ául$!r1uD©^CŠSZ¨•‘ÔI× œ®’¹Ù•NÐÙ\'ûí·]ï}¹ÒP‚P\"²º~…M¹tø+ñC1œâãÂÎvm±µO¹]ãc«‹º\"ñÞÎå£jû^ÝÜ•%›ÔÎPRHR¥Ü¨@AoN}M¥å8?à<$ã¢õgkt­|±LnŸ²2TC¹xøxxòðùq¸Yµ.žÇv×ûUÚîÒãÏ²Y³´¨NEt•€%\\¨Î(_Í´:–ÿ\0òñ†äeõ.FU¢ÑÚ3d`v\'%•exæŽÛåymÔLs¢Ž©6×SÝK,0Òyu)J? \0sQ \0IŠ¬a{ƒZ*JîçŠœ™ßºæÇà¶Y)´’2‰–²—.ß&x3C|Â:L§R†^‘ ÔêP­><=‡„™ÿ\0ò:”Ó4µüƒ[ôµ3 Ì÷Sî[<¬ŸK·E¶0æ²¶^°¡Žë–Im|•Ñ*[¯yJ\0ò[hJ“â’‡‹Ðð³SßOÙU“‘Â‚ãÌè|ý¿î8 ’“†ÎÆOj~ÜIÉ&µä]·†LÊe$ÛŠ³ÈArjÿ\0†#ÇéÓŒ„îü›Ì2­<º{ø`¯g½FEKRÖ§Q[‹%JZŽ¤¨u$ó:Ÿ5ÔH‘Õí/Úã¿Á)7¸W-dÛäñ‘:«oàÉ0Y… ô…²g:ØóÔú‘¢º´Ò®¥kÓ¾æ^[š¦¶ö\0´¢«±}½m·nxåÖ+µõò«io-¹—d§&-/¸Ûl„¡ÇuPBÒBA\'æI$ð–âêK‡ó’c-ŒQ½TK·öƒúW|· ùH¥Í¯¡0þ6¬Kcõ¤6ÖÝ]Ø=Ë9(£ÈíE¿´â*»röòÎsù%©7Ñ³«Z\\©Ít™s2\'c¶ ?q´u>ç1ô!@¢E}jn/t \'¹2¶œEn]­Ppª¬Í÷pâÖ@nVWŸî-×Kzž§æXXZñ3‘¾1ÚµÈˆ¯éAï¥{Ænkn=´ÛAJT¦=VW|ÂW©IP0àõ$xj=Açò?ð0“ºJv+¼›òoŠ}–íê·3¹ýžÇÖWÆ¾fâå’5A‰S¬×‚þJòzéá·!)ŽžÊyà©ZÇºP…ÑY‡»q\'µISÚÃnW„ö¹_’Kd7a¹÷“ïÖTpDd¦º*U¯Àˆªu:x‡5ã#ÌM¾âƒ \0ñO8øöÅ^©¶{ÅîrY¤Ú}ž‡\'ùö¤å·±­–£!P uâ§dhÅ[àa©t”Ë\0¸rr`ƒVË`.n–îm¶Ý¡$µ˜duÕsADWßH’à&gt; !®µ~®ÜIéÆçt  \\MÜð;TÑši¶i†[K,°„¶ËH%)HÐ$à\0>~MMz­@ÁG»Ý×w2{-ÓÅvb<É0Üj’5ôÚÄ(¥©–s–òû©–e-ëùJœþ.5 lfC™4ðI¹)IvÝc]¤à»¸[»Ÿ¸<í86¹ùÞkzTYÌim¥ªõLÐˆáiZÜRÎ…A   )R‚ƒù$du‰µ&gt;åRÙ¬s¾s@Ÿy{›Ù†²s¶µŠÜiü›)¶‚Œªòž²\\j® Õ)I72Ò·\\RŸi”èÛÊÕ=z9)wËæõ&\'…~[º|MfÖP×T5ö+o]ÝmãÛ=¹Buk.Èà@œ@\'¢\"žI”æƒøWêá½Ì¢8œþ€ª3{ÀêQË÷rÜ¦1˜ÁvžµHbNysë%DkAÑ[J„¨\' i¢TûÍtòÓè?‡Î\"é]!Ð{JmÈ¿kGêˆ/v­¶ƒw{†Ú\\    ÖDªël‚;÷Œ”õ%UÐ5›1*–Ša…§_|hofô¢{û=é]¼{äL]    éJR4J@Ð\0>ŒÓôWâP¢MßåÇû¾Þø¡¯-mØ³@Ð ~á <¥ˆæ§IãmÆ;u»;½Ä¬åØ¤®ïMzfY‘NÆ©ðÉ6n;ŒcófÙTS€€ÓRìÂ%?È¥8˜Í¨Fš uºÝÅßq\\waDy}¬{Rþ“ÇqùÅXNK–ÆT}³‰! ®CÃ¥Ùà+š\\˜>†Ïˆd    KÇŒÏ3{¼úM8ûúÛ· ÞsÑ\'ýå)­]ÇvG!oÌ]$;zù@Ð‰RYŽó=GÀ!—4#ÇNÃsÇbóÉ‚@: É³[€©Ý}»Ü¥Öýå¬ ƒpõPW–§Ñä­m¥d•IÓ‘Ó‡óÅêÆæu+‰ÛtGãqýÙ6£ •?m Ýæ¼Ø§ìÔS`®X²Ÿ¤Ï}kü­žd1ÖTGHRuëˆx9œê>€\'2r\0í­Twòì‡?Ë.2K¹Þe9u›³¬$\0\\zLÉ®•«¥#RJ”­?\0–†ÄÐA&$¸×Ttq.ÆóœWÛßtðÆh“¾»žÄ‚u\"ˆ#±ÆƒU(^œÞ,Â$£ÃÎWFº®3’r-uã]_‘µ`¦­´-·#R½wí«½»÷»¹¦äÜï4Ôk‹)Åà=bÜ…N—Ý\\«)HM6°¦£«^|¼´PFpÜ;Q5‹äqq!uŽË=½²Ù7Nßr2ÜÒŸ-Z¨ªÇãÖ³!¥°ô§[Sî¹ç$£mô\'CûÇÃŽ‡&amp;.#kiÕtµ²1;q+˜wí«¼=ÀoNwº³7c¯‹‘Ìm4unÅ˜µÅ®ŠÊ#Äe])    êKmŽ®žED«ãÇkNV8#Úpýu\\æ±|.¨]Ã±îÃ-»WËól×,Ëª²Û›ê¦i¨UXËÍ±–ø‘/Ì/uqm3§OðŸÇŠü$.Z1ªíiha5%:þç6Ç4Þ]”Í6ÃÉ b–ù›,×Ì¹°C«i0ú1°–‚Ž®´•7áà£áÅ9[ïY…ì!¦…ãìßºzjáÅ ‡åà4\'ñÐøsãAþú?âRÃÆ»¨G_n0¨{u·ØF^¤.E_JÃÍ§ 8 ÇCgOÀ¬ ¨üÏ©^dyqÔ¦±·c@è…¯u^Ý{»Ü¦õd»šîêcu4ÒY‰]ŠÓH-Çb@ŠÐµ”$\'¨¼§:ù¸ueÊÇofÓ]U  ìŸ+Ëª(¾Ý¦ûiäû½ØöëeùíU‰;í•#HC¾¶\\uÅK‡Ï!(mÕA×]9|x‹ÞY³Å± ‚{QmbèÞMQy#öðŽ‰’bÝáö/‡w[ö\\„d.à»‹ŽÄU|,•¸ÂlyPzÔò\"ÌŒ\\dÛ‹R›Z’žµê¨‡\"ûL3oERæÑ³c‘Cž?³fã)þ™{ÓŽGÌyÌ×LyÃóèZÛ_ÍË†ÇŸf>j—ú×u¡Æöc­òZ2ûƒ”dt;ÉÆ¯øz¬µý¼s?ú£=¿Ñ{`þ^Äá;göÓÇûuÝÊ×^èÈÎ$QC˜ÅM3Ôè‚–ß–Êã—Ôè—#^–œP ÎºòÓŠw|»®#1í¥{Wh,NÝZžå¢ï+°Õî›v™Íáî^=ãô±iñºI‘¥8ûHB–ô…:[$¸óª:ƒùBGÃ\\%´{KMI® .¬Ý3ë\\4^{4öíÉ»jÞ·;-Î)2ÖcÐL­¦‡_Co32cŒ…&lt;¥<\0é¥Ärñ+ðåÄò¨¸cAêtEµ‘‰û‰ª+\\þ?¦ þ#C÷mí½›÷½÷û­n%9_{¹‡+\'Æ’ãézdF**h¤¶:ëðáå,Ø\"p&ŸºæÈÊòàh¹Û{?ÝTg˜µ®ãîMCƒVND¼Ž‚¶4¦äNi­1BÝ)Cª.uè*éú´ã¼Üà,! ®Lãˆp.8#›$xqØ‰;QbÅm,ÆŠÊBm´\0”¡ H\0% \0\0‡ÃjšLIº»U„ï&gt;{·[ƒP›œjý ‰,õt<Ë¨=MHŽàÔ¶ëJIPýT’Hf|/i¡ÌŒ7kDÜglþŒ§¶£t¨ï)VJ¢ÁÉÛ‘_5´ë¢[S±’Ó¥#÷ú[×øG(¹Öó´økíJ¤ã]_”ŠÇ½Ÿ·útÄ£#ÏpŠþ¤ù²#=>{á?ŠôŒ$‘øúxöþr-O}>+Èã^s \"uÛ?·†Ìöíe.’ìÉÜX?Tªá¤5œÁ\\+C+#÷Ö·?uIðáMç)-Æ7§Å^‚É‘ã™OãA§‡Ë…tWÈ0­à±»Ÿ:‡{Çi¤(TG…0Ç¨‘êy*_\"1ðùñ(Zíöû¸V¿Òßçð)Z»¼cxqÚ™÷—ËÁ¨©¬h¿>Ê^\'ZÛ,¶Ÿ-J\0ý¼HEBÖâ•û¡›U¬Oºj¼Ž°:¦›­qu\0)M¹¤’P •Ò­„4“ÉZÄŠ„¢^-¼¨·b]ËAM¼ˆ®Nf¬âuÞ¡q™ZqÔ£ÔëÒ•8Nž$q j¾m^éWÙË¦›Ý-L;XuN^J¬{¬KíV2¿-É‹A”ä¥GB½4ãÀ¢¡mÄwÚä[#¹8j¬r0–›!‰Öù‚ž¿7Ìõ==<õ×M9ð)Á%°×³ýÀûÃ{±¨É…Z\'úR¹~Wš ›Qÿ\0©:¥`j•¥C˜\'‰\"Š*ãû}¾ÿ\0î¯ô…ùüB•ó{ß6qç;‰a¦ÙI[Ž+¯Ñ)HÔ“ÿ\0QðIÈuû¡Þò—«I[}EZý]^) QàB®.9Ü93ö6 ]–¨ñ×‰²ãÀaÅ·-•†×&amp;ZÛe¾²žV 5#‰njI-³ÍÛYçû¹˜_ÕWa÷Öÿ\0a®±ÀbXC±™ÐEymN²rÎ$;)BP P|¦‘ù¹%ÊÓí­nKzwf_ÚgHÆ­nº“súµl¸˜m‚‡ªZuRZ“Ô¥¤¨V€q.É5•ž9’U÷·÷Xî-.cÖ0Ñq]_6.KeJ–#Ku/Hhi¢¼¤r?t@ÉÅ,7Nòò’u“&amp;¿3/¾%JÂ¶MF‘Ðóˆ[ËÕCèl)Zj­:A<@RRO¸ªK‹ØŽ 2½­Ný€Å+%Kéu“âú’Ð}ö:„fŸnQ)\'E´Þ©:€e§ª TXÓc‘{|½ ÁæÖMÇÁì`ÐØ\"T·ºß¡u´º©EÀÀB•©ZÊÂG2H©Y\"ƒ€Ö@Èé­ê%EKb7Þn\"^<û%¤ãRa­m†µä„ëÈp9@\\Æ,i·²—!—&amp;´{¼Ÿq£À¦~æµÓV•OKËW”ãÉ©Œ€¥4t+Kg^©\'äW|õoö5d“Çk·Ž ©L&_Rì«”:b—êoDýNt$ô¤ž¥#Eép=øÆ¬-·-´¥E5«ÀKø#v6Pzkhuñm  ø’$²ç¤z*–•:°–Ð¯¯¬ñ à‚ZÎ±ÄÜvÏa*æ¾•+Âã#îr¥0+“äÆi}ÉóRÏçOA_™ÓÒuê#ˆÕ%}œ{s§äÙm¶_ÈÄ±:Úw±LjE•]¢#H-¹êÓ   úâJcå„%ÏŽªO# —Q@NÒ²¼9Ù^V1Ù´rq:Xsaöð¨V¤ªu%„Ÿ]=èèfC«PŠâ‘+¥# áÇ·j7¢‹7´Ü÷/àYcÕy6ªq±øµŒŠác;F]Â 9\"KnÆóS ÇxýIiòž•b»pµ^#‰ØSÔFº·ªÌ(ì!ãr¬¡Uªk­ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:54:13.887

`$_FILES['userfile']`是一个数组，你需要使用索引来访问特定的文件属性：

```
$_FILES["file"]["name"] - the name of the uploaded file
$_FILES["file"]["type"] - the type of the uploaded file
$_FILES["file"]["size"] - the size in kilobytes of the uploaded file
$_FILES["file"]["tmp_name"] - the name of the temporary copy of the file stored on the   server
$_FILES["file"]["error"] - the error code resulting from the file upload 
```

所以使用这样的东西：

```
$imgData =addslashes (file_get_contents($_FILES['userfile']['tmp_name'])); 
```

# machine-learning - Cleartk：初始化错误 [class org.cleartk.classifier.jar.DefaultSequenceDataWriterFactory] 字段“dataWriterClassName”是必需的

> ID：14433641
> 
> 赞同：0
> 
> 时间：2013-01-21T06:49:58.540
> 
> 标签：machine-learning, nlp, uima, cleartk

我的主程序看起来像：

```
 public static void main(String args[]) throws UIMAException, IOException{
    //TypeSystemDescription tsd = TypeSystemDescriptionFactory.createTypeSystemDescription(Question.class);

    AggregateBuilder builder = new AggregateBuilder();
    //builder.add(SentenceAnnotator.getDescription());
    builder.add(AnalysisEngineFactory.createPrimitiveDescription(POSAnnotator1.class,
            ExampleComponents.TYPE_SYSTEM_DESCRIPTION,
            GenericJarClassifierFactory.PARAM_CLASSIFIER_JAR_PATH, outputDirectory + File.separator + "model.jar",
            CleartkAnnotator.PARAM_IS_TRAINING, true,
            DefaultDataWriterFactory.PARAM_DATA_WRITER_CLASS_NAME, InstanceDataWriter.class.getName(),
            DirectoryDataWriterFactory.PARAM_OUTPUT_DIRECTORY, new File(outputDirectory)));

    JCas jcas = JCasFactory.createJCas();
    jcas.setDocumentText(testData);

    SimplePipeline.runPipeline(jcas, builder.createAggregateDescription());

} 
```

谁能解释这个错误？

> 原因：java.lang.IllegalArgumentException：初始化错误 [class org.cleartk.classifier.jar.DefaultSequenceDataWriterFactory] ​​字段“dataWriterClassName”是必需的

我试图用其他数据写入器替换 InstanceDataWriter，但它们不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T08:40:24.843

POS Annotator 使用序列数据编写器来编写示例。您从 DefaultDataWriterFactory.PARAM_DATA_WRITER_CLASS_NAME 设置 DataWriter 类名称参数。对于序列数据写入器，它应该是 DefaultSequenceDataWriterFactory.PARAM_DATA_WRITER_CLASS_NAME。序列意味着您在 cas（许多 POS 标签）中有多个标签，而“普通”分类器只为整个文档提供 1 个标签。

[http://cleartk.googlecode.com/svn-history/r4142/tags/cleartk-release-1.2.0/apidocs/org/cleartk/classifier/jar/DefaultSequenceDataWriterFactory.html](http://cleartk.googlecode.com/svn-history/r4142/tags/cleartk-release-1.2.0/apidocs/org/cleartk/classifier/jar/DefaultSequenceDataWriterFactory.html)

# awk - 在awk中不使用打印的任何其他方式打印$ 0？

> ID：14433642
> 
> 赞同：2
> 
> 时间：2013-01-21T06:49:59.560
> 
> 标签：awk

我正在解决这个问题[http://www.spoj.com/problems/NEXTODD/](http://www.spoj.com/problems/NEXTODD/)

在这个问题中，您必须以最少的字节数解决它。

我的代码：-`{print$1%2?$1+2:$1+1}`这是 21 个字节。

最佳解决方案是 10 个字节。

有没有其他方法可以在不使用 print 或 printf 语句的情况下打印 $0 来帮助我减少代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T07:31:52.013

在 AWK 的模式/动作语言中，当模式评估为真时，有一个隐含的打印 $0 的动作，但没有描述明确的动作。关于您的挑战，请参阅此示例（13 个字符）：

```
{$0+=$0%2+1}1 
```

向“某个人”致敬，他在抽签上比我更快地发布代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T07:09:34.053

缩短两个字符：

`'{$0%2?$0+=2:$0+=1}1'`

`1`在这里而不是`{print $0}`. `1`是模式，匹配任何记录。`{print $0}`是默认动作。

**已编辑。**更好（-6 个字符）：

`{$0+=$0%2?2:1}1`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T13:49:38.127

您所需要的只是条件，因为它永远不会是非零的，因此将始终调用打印当前记录的默认操作：

```
awk '$0+=$0%2+1' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:13:53.493

我还为此研究了一个技巧..这可以打高尔夫球吗？

```
{$0=or($0+1,1)}1 
```

# php - 遍历 MySQL 列中的重复条目

> ID：14433643
> 
> 赞同：1
> 
> 时间：2013-01-21T06:50:01.823
> 
> 标签：php, mysql

我是编程新手，所以可能有一个简单的解决方案来解决我的问题。

我想要完成的是在 MySQL 列中查找重复的字段条目，这些条目将是日期示例`01/20/13`

我需要搜索日期字段并确定一个日期有多少重复条目，然后在找出我需要创建一个循环的数字后，将日期更改为日期的日期然后添加一个`.`和后面的数字`.`

所以例如`01/20/13`是星期天，所以在我下面的数据库示例中，有 4 个重复的条目，所以输出需要是`Sunday.1, Sunday.2, Sunday.3, Sunday.4`

我有这个功能在下面的 PHP 程序中工作，但我需要它来搜索 7 天范围示例中的重复项`01/20/13 - 01/26/13`，从星期日开始到星期六结束。我不想硬编码一周的日期值。这就是我的问题所在，我不知道从哪里开始我被困住了。我只能考虑硬编码数周的值以获得所需的结果，但我知道有一种更简单的方法。

我的PHP代码：

```
<?php

    require '../TimeCard/DB.php';

    $i = 1;

    try{
    $stmt = $conn->prepare('SELECT `date` FROM `timeRecords` WHERE `employeeID`= 1 ORDER BY date ');
    $stmt->execute();
    } catch(PDOException $e){
        echo'ERROR: ' . $e->getMessage();
    }

    while($row = $stmt->fetch())
  {
    if ($row['date'] == "01/20/13"){

        $date = date("l", strtotime($row['date']));
        $$date = "Hello today is " . $date . "." . $i . "<br>";
        echo $Sunday;
        $i++;
    }
  }

?> 
```

数据库：

```
+----+------------+----------+--------+-------------------+-----------+------------+-----------+---------+
| id | employeeID | date     | timeIn | jobDescription    | equipType | unitNumber | unitHours | timeOut |
+----+------------+----------+--------+-------------------+-----------+------------+-----------+---------+
| 10 |          1 | 01/20/13 | 20:30  | Blah1             |           | 01E        |      NULL | NULL    |
|  2 |          1 | 01/20/13 | 1:00   | Test              |           | 02S        |      NULL | NULL    |
|  9 |          1 | 01/20/13 | 13:00  | Blah12            |           | 02E        |      NULL | NULL    |
|  8 |          1 | 01/20/13 | 6:00   | Blah              |           | 02D        |      NULL | NULL    |
|  1 |          1 | 01/21/13 | 09:12  | Worked in hubbard | Excavator | 01E        |      8375 | 09:14   |
|  3 |          1 | 01/22/13 |        |                   |           | NULL       |      NULL | NULL    |
|  4 |          1 | 01/23/13 |        |                   |           | NULL       |      NULL | NULL    |
|  5 |          1 | 01/24/13 |        |                   |           | NULL       |      NULL | NULL    |
|  6 |          1 | 01/25/13 |        |                   |           | NULL       |      NULL | NULL    |
|  7 |          1 | 01/26/13 |        |                   |           | NULL       |      NULL | NULL    |
+----+------------+----------+--------+-------------------+-----------+------------+-----------+---------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:59:01.897

你的方法似乎太复杂了。查找今天日期的计数并改为指定员工。

```
 SELECT date, COUNT(*) FROM timeRecords 
  WHERE employeeID = 1 AND date BETWEEN DATE_SUB(NOW(),INTERVAL 1 WEEK) AND NOW() 
  GROUP BY date
  ORDER BY date DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:40:23.620

尝试这个：

```
select `date`,DATE_FORMAT(str_to_date(`date`,'%m/%d/%y'),'%W') as ddd from timeRecords where `employeeID` = 1 
and str_to_date('01/20/13','%m/%d/%y') between str_to_date('01/20/13','%m/%d/%y') and date_add(str_to_date('01/20/13','%m/%d/%y'),interval 1 week); 
```

替换所需日期的“01/20/13”的值。

# javascript - 通过 PhoneGap 将应用程序移至 iPhone 上的后台

> ID：14433646
> 
> 赞同：-1
> 
> 时间：2013-01-21T06:50:19.417
> 
> 标签：javascript, iphone, ios, html, cordova

我意识到这`iOS`不适用于可以关闭应用程序的表单。

我使用的是`PhoneGap`2.2.0 版本，我喜欢有我的应用程序退出按钮，

我考虑了当您单击按钮退出时**将应用程序移至后台并返回 iPhone 主页的可能性。**

我没有找到如何通过`PhoneGap`

有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:58:08.083

已经有一个退出按钮——设备上的主页按钮。您不需要在您的应用程序中添加一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:02:19.767

看看这篇文章：[https ://gamedev.stackexchange.com/questions/17709/can-an-ios-application-have-an-explicit-quit-button](https://gamedev.stackexchange.com/questions/17709/can-an-ios-application-have-an-explicit-quit-button)

Apple 很有可能，甚至可能会拒绝您的应用程序这样做。用户只需按下主页按钮即可关闭应用程序。

**更新：**仅仅因为 Android 有一个按钮供您关闭应用程序并不意味着在 iOS 版本上需要一个按钮。正如其他海报所说，两个操作系统之间的约定是不同的。

# iphone - 测试字符串所有字符的ascii值是否存在于给定范围内

> ID：14433648
> 
> 赞同：-4
> 
> 时间：2013-01-21T06:50:30.293
> 
> 标签：iphone, ios, objective-c

我需要检查字符串的所有字符的 ascii 值是否存在于给定范围内，比如（65 到 90），该方法应该根据测试返回 true 或 false，我如何在 Objective-c 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:19:21.747

Try this one:

Call the method as :

```
NSLog(@"Result: %d",[self isString:string fromASCII:65 toASCII:90]);

//Result: 1, says it is a valid string as per given range of ascii, and 0 for invalid. 
```

The method is:

```
-(BOOL)isString:(NSString *)string fromASCII:(NSInteger)from toASCII:(NSInteger)to{
    BOOL isValid=YES;
    for (NSInteger i=0; i<string.length; i++) {
        if (!([string characterAtIndex:i]>=from && [string characterAtIndex:i]<=to) ){
            isValid=NO;
            break;
        }
    }    
    return isValid;
} 
```

# javascript - javascript电子邮件验证不起作用

> ID：14433662
> 
> 赞同：0
> 
> 时间：2013-01-21T06:51:41.583
> 
> 标签：javascript, html

我正在使用 javascript 验证来验证我的表单，因为整个验证工作正常，但电子邮件验证不起作用。我的表单代码如下

```
<form method="post" action="contact.php" name="myForm" onsubmit="return validateForm()">

<h3>To know more contact us today.</h3>

    <table>
        <tr>
            <td>Name:
                <br />
                <input id="name" name="name" type="text" />
            </td>
        </tr>
        <tr>
            <td>Contact No:
                <br />
                <input id="contact" name="contact" type="text" />
            </td>
        </tr>
        <tr>
            <td>Email:
                <br />
                <input id="email" type="text" name="email" />
            </td>
        </tr>
        <tr>
            <td>Address:
                <br />
                <textarea cols="34" id="address" name="address" type="text"></textarea>
            </td>
        </tr>
        <tr>
            <td>
                <input type="submit" value="Submit" />
            </td>
        </tr>
    </table>
</form> 
```

我的javascript代码如下

```
 <script type="text/javascript">
        function validateEmail() {

            var emailID = document.["myForm"]["email"].value;
            atpos = emailID.indexOf("@");
            dotpos = emailID.lastIndexOf(".");
            if (atpos < 1 || (dotpos - atpos < 2)) {
                alert("Please enter correct email ID")
                document.myForm.email.focus();
                return false;
            }
            return (true);
        }
        function validateForm() {
            var x = document.forms["myForm"]["name"].value;
            if (x == null || x == "") {
                alert("First name must be filled");
                return false;
            }
            var x = document.forms["myForm"]["contact"].value;
            if (x == null || x == "" || isNaN(document.myForm.contact.value) || document.myForm.contact.value.length != 10) {
                alert("Contact Number Must be 10 Digits");
                return false;
            }
            var x = document.forms["myForm"]["email"].value;
            if (x == null || x == "") {
                alert("Email is must");
                return false;
            }
            else {

                var ret = validateEmail();
                if (ret == false) {
                    return false;
                }
            }
            var x = document.forms["myForm"]["address"].value;
            if (x == null || x == "") {
                alert("Address cannot be empty");
                return false;
            }
            return (true);
        }

    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T06:53:19.717

```
var emailID = document.["myForm"]["email"].value;
                      ^^ 
```

语法错误。点符号或方括号符号。只选择一个（每个属性）。

我很惊讶 Firebug / Chrome Developer Tools / Dragonfly / etc 在您测试时没有给您明确的指示。

# jquery - MVC 中的单页应用程序

> ID：14433669
> 
> 赞同：1
> 
> 时间：2013-01-21T06:52:21.957
> 
> 标签：jquery, asp.net-mvc, razor, asp.net-mvc-4, single-page-application

我是 MVC 的新手.....

我对单页应用程序有一些问题....

通过使用...我想制作这种网页... [http://www.irealities.com/#team](http://www.irealities.com/#team)

1.  我尝试过的描述... ========================================= ============================================

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - My ASP.NET MVC Application</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
    </head>

             @**************SCRIPT CODE TO MAKE APPLICATION ONE SCROLL *************@

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".contactLink").click(function () {
            if ($("#contactForm").is(":hidden")) {
                $("#contactForm").slideDown("slow");
            }
            else {
                $("#contactForm").slideUp("slow");
            }
        });
    });
    function closeForm() {
        $("#messageSent").show("slow");
        setTimeout('$("#messageSent").hide();$("#contactForm").slideUp("slow")', 2000);
    }

    $(document).ready(function () {
        function filterPath(string) {
            return string
              .replace(/^\//, '')
              .replace(/(index|default).[a-zA-Z]{3,4}$/, '')
              .replace(/\/$/, '');
        }
        $('a[href*=#]').each(function () {
            if (filterPath(location.pathname) == filterPath(this.pathname)
            && location.hostname == this.hostname
            && this.hash.replace(/#/, '')) {
                var $targetId = $(this.hash), $targetAnchor = $('[name=' + this.hash.slice(1) + ']');
                var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor : false;
                if ($target) {
                    var targetOffset = $target.offset().top;
                    $(this).click(function () {
                        $('html, body').animate({ scrollTop: targetOffset }, 1000);
                        var d = document.createElement("div");
                        //d.style.height = "101%";
                        d.style.overflow = "hidden";
                        document.body.appendChild(d);
                        window.scrollTo(0, scrollToM);
                        setTimeout(function () {
                            d.parentNode.removeChild(d);
                        }, 10);
                        return false;
                    });
                }
            }
        });
    });
    </script>
    <body>
      <section id="main">
         @RenderBody()
     </section>

 <div id="header">
  <table>
   <tr>
     <td><img src="Midasnext.png" alt="Midasnext LOGO" width="400" height="110">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td><div id="nav">        
        <a href="#HOME" class="Circle">HOME</a>
        <a href="#ABOUT" class="Circle">ABOUT</a>
        <a href="#SERVICES" class="Circle">SERVICES</a>
        <a href="#CLIENTS" class="Circle">CLIENTS</a>
        <a href="#CONTACT" class="Circle">CONTACT</a></div>
     </td>
   </tr>
  </table>
 </div>

<div id="page-wrap">

    <div id="page1">

        <a name="HOME"></a>
        <div class="page-padding"></div>
        @*@RenderPage("~/Views/Clients/Index.cshtml")*@
         @*<% Html.RenderPartial("~/Views/Clients/Index.cshtml"); %>*@
        <p>This is what you see on the HOME page.</p>
    </div> <!--END page1-->

    <div id="page2">
        <a name="ABOUT"></a>
        <div class="page-padding"></div>
        <p>This is what you would see on the ABOUT page.</p>
    </div> <!--END page2-->

    <div id="page3">
        <a name="SERVICES"></a> 
        <div class="page-padding"></div>
        @*@RenderPage("~/Views/Home/Contact.cshtml")*@
        <p>This is what you see on the SERVICES page.</p>
    </div> <!--END page3-->

    <div id="page4">
        <a name="CLIENTS"></a>
        <div class="page-padding"></div>
        <p>This is what you would see on the CLIENTS page.</p>
    </div> <!--END page2-->

    <div id="page5">
        <a name="CONTACT"></a> 
        <div class="page-padding"></div>
         @*@RenderPage("~/Views/Home/Contact.cshtml")*@
        <p>This is what you see on the Contact page.</p>
    </div> <!--END page3-->

</div> <!--END page-wrap-->
    </body>

</html> 
```

==================================================== ========================================

# 2.错误：-

假设我点击了客户端菜单项，然后它会在客户端页面以及页面末尾显示客户端的内容。

我很困惑，该怎么做，怎么做？？？请 frnd 建议我仅在 MVC 中的任何解决方案......

# admob - mraid 展开面板上的 admob 关闭按钮

> ID：14433672
> 
> 赞同：0
> 
> 时间：2013-01-21T06:52:39.520
> 
> 标签：admob

Admob SDK 6.2.1 在展开时为 Mraid 广告提供了一个默认的面板关闭按钮。我可以知道是否可以禁用它并让创意处理面板关闭按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:34:00.570

从 AdMob [MRAID 文档](http://media.admob.com/mraid/v1/docs/index.html)中，您可以调用`mraid.useCustomClose(true)`以删除 AdMob 自定义关闭按钮。只需确保您的广告素材处理得当，这样用户就不会被广告卡住。

# git - 在预先存在的分支上调用 git checkout -b branchname；旧的被覆盖了吗？

> ID：14433674
> 
> 赞同：5
> 
> 时间：2013-01-21T06:52:55.300
> 
> 标签：git, command-line

我克隆了一个维护良好的大型存储库。意外地，我`-b`在签出不同的分支时使用了该标志。Git 说“切换到新分支”。是否覆盖了预先存在的分支，git 的输出是否具有误导性，或者我是否犯了另一个错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T07:09:04.090

> 先前存在的分支是否被覆盖，

否
。[默认分支](https://stackoverflow.com/questions/1485578/how-do-i-change-a-git-remote-head-to-point-to-something-besides-master)已被签出，并且已从其 HEAD 创建了一个新的本地分支。

你可以看到所有的分支：

```
git branch -a 
```

只需切换回您选择的上游分支

```
git checkout -b aBranch --track origin/aBranch
# if the local branch was already there
git checkout -B aBranch --track origin/aBranch 
```

请注意，如果您有正在进行的工作，则需要先执行 a `git stash`，如“[在`git checkout`不覆盖数据](https://stackoverflow.com/a/1291470/6309)的情况下执行”中所述。

# c# - 无法从 C# 类获取静态类变量到 VB.NET 类

> ID：14433680
> 
> 赞同：0
> 
> 时间：2013-01-21T06:53:26.853
> 
> 标签：c#, vb.net, static-members

c#类：

```
public class AClass<T> where T : INterFace
{
  public static float m_var = 0.91F;
...
} 
```

VB.NET 类

```
Public Class AnotherClass
...
Public ReadOnly Property V As Single
Get
   Return AClass(Of XX).m_var
End Get
End Property
End Class 
```

XX 是一个类（实现了接口）

不知道为什么我看不到这个 - 我收到一个错误：“ `m_var is not a member of AClass(Of XX)`”

我也用 c# 版本尝试过：

```
public class AClass<T> where T : INterFace
    {
      private const float m_var = 0.91F;
public static float VV { get { return m_var ; } }// change name in VB as needed
    ...
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:48:54.193

这很好用，注意 [INterface] 上的括号，因为它是 VB 中的保留字（不像 C# 那样区分大小写）

**C＃**

```
public interface INterface
{
}

public class AClass<T> where T : INterface
{
    public static float m_var = 0.91F;
} 
```

**VB**

添加对 C# 项目的引用

```
Imports MyCSharpNamespace

Public Class AnotherClass

    Public ReadOnly Property V As Single
        Get
            Return AClass(Of XX).m_var
        End Get
    End Property

End Class

Public Class XX
    Implements [INterface]

End Class 
```

# java - 在 Android 中连接到数据库服务器

> ID：14433681
> 
> 赞同：1
> 
> 时间：2013-01-21T06:53:29.793
> 
> 标签：java, android

我有一个带有用户身份验证模块的 Android 应用程序。目前系统在本地检查用户名。我需要它连接到远程数据库服务器并通过查看远程服务器来检查用户名。在 Android 上执行此类任务的最有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:21:00.980

我们可以使用 Mysql 服务器。我们需要在 android 应用程序和数据库之间使用该网站。android调用网站和网站请求mysql数据库。作为回报，mysql数据库将数据提供给网站，网站进一步将json格式返回给应用程序。最后，来自网络的数据被解析并在我们的应用程序中使用。

有关使用 php 的 Mysql 的更多详细信息，[请单击此处](http://blog.sptechnolab.com/2011/02/10/android/android-connecting-to-mysql-using-php/)

# android - Playstore 中的 Android 应用程序审批流程

> ID：14433688
> 
> 赞同：2
> 
> 时间：2013-01-21T06:54:01.383
> 
> 标签：android, google-play

我是 android 开发的新手，我创建了一个 android 应用程序，我想在提交到 Play 商店之前从各个方面测试这个应用程序。我不知道游戏商店的审批流程。请让我知道 Play 商店的审批流程，并告诉我如何测试我的应用程序没有任何错误（这将被 Play 商店拒绝）并反对 Play 商店的审批流程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T06:59:53.470

Play商店没有太多的审批流程，当然不像苹果以前那样。你只需要确保你阅读[了这篇](http://developer.android.com/distribute/googleplay/publish/preparing.html)文章并且你的应用程序在所有方面都很好。

> *告诉我如何在没有任何错误的情况下测试我的应用程序*

好吧，没有捷径可走。做你的测试..谷歌不会为你做..如果您的应用程序很好，那么只有用户下载它..您必须考虑的不仅仅是谷歌..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:56:18.140

没有 Play Store 审批流程。他们会针对恶意软件运行一些自动化测试，您将在几个小时内上市。因此，只需进行足够的测试以使您对质量感到满意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:58:36.123

您负责测试自己的应用程序。谷歌不会。您只需遵守一些基本规则，您的应用就会获得批准：

1.  除非您使用 Google 的应用内购买，否则您不能销售应用内内容。您可以使用其他付款方式销售实物商品。
2.  您不能让您的应用程序免费，然后再将其更改为付费。一旦他们自由了，他们总是自由的。
3.  你不能做任何种族主义、犯罪、仇恨等...你不能做任何你不透露的事情——即窃取用户的联系人并将它们上传到你自己的服务器用于恶意目的。

非常注意测试。如果您的应用程序存在错误，用户会很快抱怨并降低您的应用程序的评分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-08T06:06:18.617

谷歌游戏商店没有“错误政策”。即使您的应用程序包含错误，谷歌仍会发布它。开发您的应用程序，牢记用户。

# excel - 在 excel vba 中显示来自多列的值的消息框

> ID：14433699
> 
> 赞同：2
> 
> 时间：2013-01-21T06:54:50.793
> 
> 标签：excel, vba

共有三列。一列有一些表名，第二列有可用空间，第三列有使用百分比。

需要的帮助是：

1.  Msgbox 应该在它发现超过 90 的单元格中显示 PERCENTAGE USED 列的值。
2.  它还应该显示相应表的名称以及它在第一步中显示值的表的可用空间。

msgbox 输出应为：“ABCD 表已使用 96.67%，剩余空间为：7431MB”

仅显示表名和使用百分比的示例代码：

```
Dim rngValues As Range
Dim strTableName As String
Dim cell As Range

 ' Adjust ranges to suit
 Set rngValues = [JI3:JI90]
For Each cell In rngValues
       If cell.Value > 94.45 Then
       cell.Select

       MsgBox Range(cell.Address).Offset(0, -268).Value _
       & " table has current size: " & cell.Value
       cell.Interior.Color = RGB(255, 0, 0)

       End If 
```

此代码的示例输出：ABCD 表的当前大小：97.87%

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:22:21.770

解决此问题的一种方法是使用第二条`Range(cell.Address).Offset().Value`语句将附加信息附加到消息框显示的文本中。确切的代码将取决于显示剩余可用空间的列距“JI”列有多少列。

假设它是包含 % space used 您可以执行以下操作的列之前的列：

```
 MsgBox Range(cell.Address).Offset(0, -268).Value _
   & " table has current size: " & cell.Value _
  & " and the space left is: " & Range(cell.Address).Offset(0, -1).Value 
```

如果它不是包含已用 % 空间的列之前的列，则只需`Range(cell.Address).Offset(0,-1).Value`正确调整列偏移量。例如，如果包含可用空间的列在 JI 列之后出现 9 列，则将偏移更改为`Offset(0,9)`

Offset 括号之间的第一个参数是行数，第二个参数是列数。负偏移指定出现在所选单元格之前的行或列，正偏移指定出现在所选单元格之后的行或列。'0' 指定当前行或列。

# vba - flexgrid的强制拟合列

> ID：14433702
> 
> 赞同：1
> 
> 时间：2013-01-21T06:55:08.370
> 
> 标签：vba, vb6, msflexgrid

**在 vb6 中强制安装**msflexgrid 列的最佳方法是什么？
所以，所有的列都是可见的，它们占据了网格的**最大宽度！**

* * *

我已经尝试过这段代码，但它不适合网格内的最后一列，任何人都可以提出可能是什么问题？

```
Public Sub **FlexGrid_AutoSizeColumns (** ByRef pGrid As MSHFlexGrid, _  
                                ByRef pForm As Form, _  
                                Optional ByVal pIncludeHeaderRows As Boolean = True, _  
                                Optional ByVal pAllowShrink As Boolean = True, _  
                                Optional ByVal pMinCol As Long = 0, _  
                                Optional ByVal pMaxCol As Long = -1, _  
                                Optional ByVal pBorderSize As Long = 8, _  
Optional fitToScreen As Boolean = False **)**  

Dim lngMinCol As Long, lngMaxCol As Long, lngCurrRow As Long  
Dim lngMinRow As Long, lngMaxRow As Long, lngCurrCol As Long  
Dim lngMaxWidth As Long, lngCurrWidth As Long  
Dim fntFormFont As StdFont  
Dim totalWidth As Integer  
totalWidth = 0  

Set fntFormFont = New StdFont  
Call CopyFont(pForm.Font, fntFormFont)  

Call CopyFont(pGrid.Font, pForm.Font)  

    With pGrid  
        lngMinCol = pMinCol  
        lngMaxCol = IIf(pMaxCol = -1, .Cols - 1, pMaxCol)  
        lngMinRow = IIf(pIncludeHeaderRows, 0, .FixedRows)  
        lngMaxRow = .Rows - 1  

        For lngCurrCol = lngMinCol To lngMaxCol  
            lngMaxWidth = IIf(pAllowShrink, 0, pForm.ScaleX(.ColWidth(lngCurrCol), vbTwips, pForm.ScaleMode))  

            For lngCurrRow = lngMinRow To lngMaxRow   '..find widest text (in scalemode of the form)
                lngCurrWidth = pForm.TextWidth(Trim(.TextMatrix(lngCurrRow, lngCurrCol)))
                If lngMaxWidth < lngCurrWidth Then lngMaxWidth = lngCurrWidth
            Next lngCurrRow

           lngMaxWidth = pForm.ScaleX(lngMaxWidth, pForm.ScaleMode, vbTwips)
           .ColWidth(lngCurrCol) = lngMaxWidth + (pBorderSize * Screen.TwipsPerPixelX)
           totalWidth = .ColWidth(lngCurrCol) + totalWidth

       Next lngCurrCol
   End With

Call CopyFont(fntFormFont, pForm.Font)

    If fitToScreen = True Then
        Dim i As Integer
        Dim gridWidth As Long
        gridWidth = pGrid.Width
        For i = 0 To pGrid.Cols - 1
            pGrid.ColWidth(i) = Int(gridWidth * pGrid.ColWidth(i) / totalWidth)
        Next
    End If 
```

结束子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:11:55.820

我能想到的一种方法是**调整列**的大小（具有可见性）以适应列（文本）中的最大宽度。该函数返回 0 或双精度值。只要返回的最大列宽不为零，我们就可以相应地调整当前网格列宽。如果为零，则保持不变。

```
Dim i, j,  as Integer
Dim maxWidth as Double
For i = 0 to MsFlexGrid1.Rows - 1
      For j = 0 to MsFlexGrid1.Cols - 1
             maxWidth = maxColWidth(j)
             If maxWidth > 0 then
                MsFlexGrid.ColWidth(j) = maxWidth
             End If
      Next j
Next i

Private Function maxColWidth(coNum as Integer) as Double
Dim i, Max as Integer
Max = 0
    With MsFlexGrid1
         For i = .FixedRows to .Rows-1
              If TextWidth(.TextMatrix(i, colNum)) > Max Then
                   Max = TextWidth(.TextMatrix(i, colNum))
              End If
         Next i    
         maxColWidth = Max
    End With
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:27:09.503

将剩余空间分布在列上，将其除以列数并将其添加到每一列

```
'1 form with :
'    1 msflexgrid : name=MSFlexGrid1
Option Explicit

Private Sub Form_Load()
  Dim intCol As Integer
  'example form and grid configuration
  Move 0, 0, 10000, 5000
  With MSFlexGrid1
    .FixedRows = 0
    .FixedCols = 0
    .Rows = 10
    .Cols = 10
    For intCol = 0 To .Cols - 1
      .ColWidth(intCol) = (intCol + 1) * 107
    Next intCol
  End With 'MSFlexGrid1
End Sub

Private Sub Form_Resize()
  MSFlexGrid1.Move 0, 0, ScaleWidth, ScaleHeight
End Sub

Private Sub MSFlexGrid1_Click()
  DistributeWidth
End Sub

Private Sub DistributeWidth()
  Dim intCol As Integer, intColSel As Integer
  Dim lngWidth As Long
  Dim lngRemaining As Long
  Dim lngExpand As Long
  With MSFlexGrid1
    intColSel = .Col                                          'remember selected column
    .Col = 0                                                  'select first column to ...
    lngWidth = .Width - .CellLeft * 2                         '... take flexgrid-borders into account
    .Col = intColSel                                          'select column again
    lngRemaining = lngWidth - InUse                           'calculate the remaining space
    If lngRemaining > 0 Then
      lngExpand = lngRemaining \ .Cols                        'distribute the remaining space over the columns
      For intCol = 0 To .Cols - 1
        .ColWidth(intCol) = .ColWidth(intCol) + lngExpand
      Next intCol
      lngExpand = lngRemaining Mod .Cols
      .ColWidth(.Cols - 1) = .ColWidth(.Cols - 1) + lngExpand 'since we are working with longs, apply the remaining fraction to the last column
    Else
      'what to do with lack of space? Shrink columns or expand grid or nothing?
    End If
  End With 'MSFlexGrid1
End Sub

Private Function InUse() As Long
'calculate how much of the gridwidth is already in use by the columns
  Dim intCol As Integer
  Dim lngInUse As Long
  With MSFlexGrid1
    lngInUse = 0
    For intCol = 0 To .Cols - 1
      lngInUse = lngInUse + .ColWidth(intCol)
    Next intCol
  End With 'MSFlexGrid1
  InUse = lngInUse
End Function 
```

上面的例子并不总是完全填满这个区域，虽然我认为逻辑是正确的，我看不到任何遗漏......

我想这与您所拥有的结果相似？还是稍微好一点？

# xslt - 为 xslt 制作复合 xpath 语句：匹配

> ID：14433703
> 
> 赞同：2
> 
> 时间：2013-01-21T06:55:11.740
> 
> 标签：xslt, xpath, xslt-1.0, docbook, docbook-5

这是一个通用的 XSLT 1.0 问题，我需要知道它来编写用于处理 docbook xml 文件的 XSLT 语句。在我的 docbook XML 中，我试图在 XSLT 1.0 中编写一个复合 xpath 语句，它说，为 html 输出中的 p 标签硬编码一个新属性“class =”play”。

我希望对没有这些属性的**每个标签都执行此操作** `<para>`

1.  角色=“正常播放段落”和
2.  角色=“无缩进”和
3.  “角色=”行诗“

这是我的 XML 源代码：

```
<chapter xmlns="http://docbook.org/ns/docbook" 
 xmlns:xlink="http://www.w3.org/1999/xlink"
        version="5.0" xml:id="play">
  <title> Hamlet </title>

    <para role="no-indent"> SPHINX. Do you think about it very much?</para>
    <para role="normal-play-para"> INTERVIEWER. I do so say. </para>
    <para>SPHINX. Hello </para>
    <para> INTERVIEWER. dddddWhy I do so say. </para>
    <para> SPHINX. Yes. </para>
    <para role="line-verse"> Cosmologists have theorized or guessed</para>
</chapter> 
```

在 Docbook XSLT 处理之后，我希望 HTML 输出看起来像这样：

```
<html>
<body>
<p class="no-indent">SPHINX. Do you think about it very much? much. </p>
 <p class="normal-play-para"> INTERVIEWER. I do so say. </p>
   <p class="play">SPHINX. Hello </p>
   <p class="play">INTERVIEWER. dddddWhy I do so say. </p>
   <p class="play">SPHINX. Yes.  </p>
 <p class="line-verse"> Cosmologists have theorized or guessed</p>
</body>
<html> 
```

docbook xslt 有 2 种机制在起作用，您并不需要真正了解它们。

首先，在`<para role="">`元素中，角色的值变成了p的类。这是默认行为。其次，我使用一种特殊模式将 a 硬编码`"class='play'"`为 p 标签。

```
<xsl:template match="d:chapter[@xml:id = 'play']/d:para" mode="class.attribute" >
  <xsl:param name="class" select="local-name(.)"/>
  <xsl:attribute name="class">play</xsl:attribute>
</xsl:template> 
```

但是，我希望仅在不存在其他属性和值时才对 class="play" 进行硬编码。我可以修改上述语句以排除所有具有属性 role="line-verse" 的 para 标记：

```
 <xsl:template match="d:chapter[@xml:id = 'play']/d:para[@role != 'line-verse']" mode="class.attribute" >
    <xsl:param name="class" select="local-name(.)"/>
    <xsl:attribute name="class">play</xsl:attribute>
  </xsl:template> 
```

但我需要的不止这些。我不仅要排除 role="line-verse"，还要排除 role="no-indent" 和 role="normal-play-para"。

所以我必须更改 match 属性中 xpath 语句的值，使其排除三个属性值。我不知道该怎么做。有人知道吗？谢谢。

**关于答案的更新：**

首先，我要感谢大家花时间理解我的问题并制定答案。我应该提一下，我还是这个东西的新手，而且，我的问题有点不公平，因为我使用的是一些复杂/复杂的 Docbook XSL。因此，我需要一个不会与 Docbook XSL 样式表发生冲突的答案。另外，我意识到如果我没有同时导入 docbook xsl，您编写的转换可能是生成 html 输出的完全有效的答案。

我在这里选择为“最佳”的答案可能不是最优雅的，而只是在我导入 epub3 docbook-ns 样式表时对我有用的答案。因此，Rishe 先生的单行答案实际上完全符合我的需要，即使它不那么优雅。

我真的不知道在我开始的这个定制中发生了什么：

```
<xsl:template match="d:chapter[@xml:id = 'play']/d:para" mode="class.attribute" >
  <xsl:param name="class" select="local-name(.)"/>
  <xsl:attribute name="class">play</xsl:attribute>
</xsl:template> 
```

我所知道的是它正在调用一个`<xsl:template name="generate.class.attribute">`在这里找到的。`http://50.56.245.89/xsl-ns/xhtml-1_1/html.xsl`

另一件事。Dimitre Novatchev 的 2 个答案看起来好像可行。顺便说一句，您忘记包含该 `<xsl:param name="class" select="local-name(.)"/>`语句（很容易修复）并且该解决方案有效。

但是，Dimitre，我还有一个问题。您给出的第二个答案使用了变量，看起来简单而实用。如果我尝试一下，我的 Saxon 6.5 解析器会给出验证错误。*（E [Saxon6.5.5] xsl:template 中的匹配模式可能不包含对变量的引用）。*也许这很简单，比如一个错字。但是有没有可能在 XSLT 1.0 模板匹配中不允许使用变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:22:43.610

你可以试试这个：

```
<!-- Special handling for paras with one of the three roles -->
<xsl:template 
  match="d:chapter[@xml:id = 'play']/d:para[@role = 'line-verse' or @role = 'normal-play-para' or @role - 'line-indent']" 
  mode="class.attribute" >
  <xsl:attribute name="class">
      <xsl:value-of select="@role" />
  </xsl:attribute>
</xsl:template>

<!-- Other paras get the default class "play" -->
<xsl:template match="d:chapter[@xml:id = 'play']/d:para" mode="class.attribute">
  <xsl:attribute name="class">play</xsl:attribute>
</xsl:template> 
```

更进一步的做法是`<xsl:attribute>`在调用这些模板的模板中包含 ，并且在`class.attribute`模板本身中包含所需的值。像这样的东西：

```
<xsl:template match="d:chapter[@xml:id = 'play']/d:para">
    <p>
      <xsl:attribute name="class">
         <xsl:apply-templates select="." mode="class.attribute" />
      </xsl:attribute>
    ...
    </p>
</xsl:template>

<!-- Special handling for paras with one of the three roles -->
<xsl:template 
  match="d:chapter[@xml:id = 'play']/d:para[@role = 'line-verse' or @role = 'normal-play-para' or @role - 'line-indent']" 
  mode="class.attribute" >
      <xsl:value-of select="@role" />
</xsl:template>

<!-- Other paras get the default class "play" -->
<xsl:template match="d:chapter[@xml:id = 'play']/d:para" mode="class.attribute">
  <xsl:text>play</xsl:text>
</xsl:template> 
```

要专门回答您的原始问题，如果您确实需要一个专门匹配*不*具有这些值之一的`para`s的模板，您可以在此 XPath 上进行匹配：*`@role`*

 *```
d:chapter[@xml:id = 'play']/d:para[not(@role = 'line-verse' or @role = 'normal-play-para' or @role - 'line-indent')] 
```

但我认为我上面介绍的方法（将`para`这些角色视为特例，并将其他所有内容视为默认值）是更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:31:44.100

**一种可能的解决方案是**：

```
 <xsl:template mode="class.attribute" match=
  "d:chapter[@xml:id = 'play']
       /d:para[not(@role = 'line-verse' 
                  or @role = 'no-indent' 
                  or @role = 'normal-play-para'
                   )]"  >
    <xsl:attribute name="class">play</xsl:attribute>
  </xsl:template> 
```

**但是，我会使用更灵活和可扩展的解决方案，允许轻松修改“非播放”值**：

```
 <xsl:param name="pNonPlayVals">
  <val>line-verse</val>
  <val>no-indent</val>
  <val>normal-play-para</val>
 </xsl:param>

  <xsl:template mode="class.attribute" match=
  "d:chapter[@xml:id = 'play']/d:para
         [not(@role = document('')/*/xsl:param[@name='pNonPlayVals']/val)]"  >
    <xsl:attribute name="class">play</xsl:attribute>
  </xsl:template> 
```*

# java - 在Java中加密和解密文本文件，保持第一行可读

> ID：14433705
> 
> 赞同：0
> 
> 时间：2013-01-21T06:55:36.443
> 
> 标签：java, aes, encryption, des

我需要加密和解密一个文本文件。对于加密和解密，我可以使用 DES/AES 算法。我有一个用于加密和解密文本文件的代码，但问题是，文件中的第一行必须以这样的方式加密应该是可以理解的。使用 AES 和 DES 加密后我得到不可读的格式。加密后我需要读取文件的第一行。请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:00:08.283

为什么不在文件的开头添加一个用户可读的幻数，并在完成文本块后再次添加？像这样的东西：

```
MagiKrypt

This file has been encrypted with MagiKrypt, and you will need the program at (URL HERE) to decrypt it.

MakiKrypt\x00\x01\x02\x03
(AES data here)
EOF 
```

这样你的程序就可以很容易地分辨出文本在哪里，AES 数据在哪里，并且用户可以读取文件的第一部分。如果他们在文本编辑器中打开它仍然会一团糟，但至少他们会看到介绍块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:10:00.143

加密产生字节，而不是人类可读的字符。为了使您的字节可读，您需要将它们转换为不同的格式。我建议将[Base64](https://stackoverflow.com/questions/469695/decode-base64-data-in-java)作为执行此操作的常用方法。

加密文件后，根据需要将其转换为 Base64 并显示 Base64 部分。它没有任何意义，但它不会包含任何太奇怪的东西。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-21T07:03:21.253

最好保持第一行不加密，或者您应该创建自己的规则并加密第一个（和所有）文本。最好使用 SHAI 算法进行更好的加密。除了 SHA1，另一种选择是 BTE 加密

# c# - 删除默认样式以开始清理 WPF/XAML 中的样式

> ID：14433706
> 
> 赞同：1
> 
> 时间：2013-01-21T06:55:41.603
> 
> 标签：c#, wpf, xaml, styles

如何摆脱给定控件的默认 WPF 样式？例如：

如果我添加一个触发器来更改鼠标悬停时按钮的背景颜色，它会这样做，但随后会立即淡入默认的蓝色色调。有没有正确的方法来摆脱这些，以免它们妨碍自定义样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:00:25.663

我猜您正在寻找类似的东西，[或者](https://stackoverflow.com/questions/643440/override-default-styling-in-wpf-textbox-based-on-presentationframework-aero)只是看看[OverridesDefaultStyle Property](https://stackoverflow.com/questions/1497176/overridesdefaultstyle-in-wpf)。如果您对默认样式有任何问题，您可以简单地禁用它，但这会做很多工作，因为您被迫自己编写所有样式行为。

# android - 提高性能启动混合应用程序

> ID：14433709
> 
> 赞同：1
> 
> 时间：2013-01-21T06:55:48.907
> 
> 标签：android, ios, performance, gwt, web-applications

我有一个问题，当我启动我的混合应用程序时。加载第一页需要很长时间。约 40 秒。

我与**GWT**、**Google App Engine**和**RequestFactories**一起工作。我检测到，该应用程序向服务器发出了多个请求（约 10 个请求）。

现在我想知道，如何提高启动我的应用程序的性能。

1.  将所有请求分组为一个请求，该请求通过一个请求交付所有数据。（~300kb 数据）
2.  制作一个请求和数据量较少的启动页面。（~50kb 数据）
3.  更好的主意？

我更喜欢，我可以保留当前的启动页面。你能分享你的经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:17:14.277

您已经指出了减少启动时间的两种主要方法。

1.- 减少请求：使用 RF，如果您共享同一个服务实例并且只调用一次 .fire() 方法，您可以将所有请求归为一个。将 Bundles 用于图像、css 和其他资源，以便在同一个请求中下载它们。

2.- 减少 js 的大小：使用 GWT.runAsync() 将代码分成几部分。因此，在用户与之交互之前，第一段代码可能是启动应用程序的最少内容。您可以使用 gwt 编译报告来查看您的代码是否更大。您可以使用 gwt-2.5 中新的闭包编译器来减少和优化最终的 js。

3.- 您必须检查的另一件事是您的网络服务器配置正在发送适当的标头，以便浏览器缓存 gwt 片段，以及您应该在发送到客户端之前检查它是否正在压缩文件。您可以制作 gwt 编译器来预压缩这些 js 片段。

4.- 对于连续加载，我的意思是用户第二次访问您的应用程序，考虑使用本地存储来缓存某些不会更改的内容，而不是再次请求它们。配置您的 HTML5Manifest，如果您使用的是 mgwt，这真的很容易，因为它们包含一个链接器来在编译时生成清单。

5.- 考虑使用轻量级的小部件和框架，而不是重的小部件（js 集合、元素、gquery、mgwt 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:09:21.767

我有几个建议：

*   加载启动时在单个请求中很少更改的数据。
*   在您的服务器上激活 GZip 压缩。
*   当应用程序在用户空闲时间启动完成时使用后台调用。
*   在单个请求中分组相关请求。

# javascript - Grails+Jquery-ui - 集成问题？

> ID：14433710
> 
> 赞同：1
> 
> 时间：2013-01-21T06:55:54.600
> 
> 标签：javascript, jquery, jquery-ui, grails, grails-2.0

我一直在尝试将 grails 与 jquery-ui 插件一起使用，我创建了一个简单的控制器以及一个使用日期选择器的 gsp 页面，我无法让日期选择器显示日期列表。我已经阅读了论坛等上的插件文档+文章，但没有找到解决方案。

插件文档 - [http://grails.org/plugin/jquery-ui](http://grails.org/plugin/jquery-ui)

**开发环境 = grails 2.2.0, JDK 7, GGTS 最新版本**

任何让这个工作的指针都会很棒。

（我曾尝试在网络应用程序/其他文件夹中复制/重命名文件，但没有成功）

步骤 1\. 创建一个新的 grails 项目

1.  安装了jQuery-ui插件

2.  创建了一个控制器和 gsp 页面 - 根据文档

3.  当我导航到该页面时，它给了我以下错误

    **错误 resource.ResourceMeta - 找不到资源：/plugins/jquery-ui-1.8.24/jquery-ui/themes/darkness/jquery-ui-1.8.24.custom.css | 错误 ERROR [/Test2].[default] - Servlet.service() for servlet [default] in context with path [/Test2] throw exception 消息：看起来您缺少对 r:layoutR 的一些调用**

如原始帖子中所述，在我的环境中工作的 23-jan-13 上的正确解决方案如下所示，我发现 grails 网站上发布的代码不一定按原样工作 - 因此进行了此编辑。（如果有人有任何修改，请直接告诉我）

普惠制代码：

```
<html>
    <head>
        <title>Simple GSP page</title>
        <g:javascript library="jquery" />
        <g:javascript library="jquery-ui"/>

        <script type="text/javascript">

            $(document).ready(function() { 
               $("#datepicker").datepicker({dateFormat: 'yy/mm/dd'}); }) 
        </script>
 <r:layoutResources/>   
 </head>
    <body>
        <div>
            <p> Between <input type="text" id="datepicker"> </p>        
        </div>
      <r:layoutResources/>
    </body>
</html> 
```

控制器代码：

```
def testDatePicker = { 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:19:24.837

你在使用资源框架吗？如果是，您应该`jquery-ui`像这样使用模块：

```
<r:require module="jquery-ui"/> 
```

[关于jquery-ui 和资源框架的](http://grails-plugins.github.com/grails-resources/guide/1.%20Overview.html#1.1.2%20Install%20jQuery%20UI%20and%20Blueprint%20plugins)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T18:39:23.703

您需要为插件添加以下行。

```
plugins {    
        runtime ":jquery:1.8.3"
        compile ":jquery-ui:1.8.24"
    } 
```

并在您使用 Jquery UI 的 gsp 页面上添加以下行。

```
< head>
     < g:javascript library="jquery" />
     < r:require modules="jquery-ui"/>
     < r:script>
        $(document).ready(function() {
               your code...
        });
     < /r:script>
< /head> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T03:46:38.883

***注意 - 我在提供答案的同时错误地编辑了我的原始问题，原始问题也有解决方案描述。***

我终于成功地集成了 jquery-ui 和 grails，遇到了一些允许解决方案运行的问题。脚步。

1.  新建**Grails**项目（我的环境grails 2.2.0，JDK 7，GGTS最新版本）
2.  安装**jquery-ui**插件，编辑*BuildConfig*添加**运行时 ":jquery-ui:1.8.24"**。
3.  使用 grails 创建控制器和 gsp 页面

**普惠制页面内容**

```
 <html>
    <head>

    <title>Simple GSP page</title>
    <g:javascript library="jquery" />
    <g:javascript library="jquery-ui"/>

    <r:layoutResources/>   

    <script type="text/javascript">

       $(document).ready(function() { 
           $("#datepicker").datepicker({dateFormat: 'yy/mm/dd'}); }) 
    </script>

     </head>
        <body>
            <div>
                <p> Between <input type="text" id="datepicker"> </p>        
            </div>
          <r:layoutResources/>
        </body>
    </html> 
```

**控制器代码：**

```
 def testDatePicker = { 
    } 
```

4\. 在 grails 中运行解决方案，导航到页面上的日期选择器，它应该向您显示时尚的日期选择器

# python - Python Popen().stdout.read() 挂起

> ID：14433712
> 
> 赞同：15
> 
> 时间：2013-01-21T06:55:58.510
> 
> 标签：python, subprocess, stdout, popen, freeze

我正在尝试使用 Python 获取另一个脚本的输出，`subprocess.Popen`如下所示

```
process = Popen(command, stdout=PIPE, shell=True)
exitcode = process.wait()
output = process.stdout.read()   # hangs here 
```

它挂在第三行，只有当我将它作为 python 脚本运行并且我无法在 python shell 中重现它时。

另一个脚本只打印了几个字，我假设这不是缓冲区问题。

有谁知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T06:59:37.357

您可能想要使用[`.communicate()`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.communicate)而不是`.wait()`plus `.read()`。请注意文档页面`wait()`上的警告：`subprocess`

> 警告这将在使用`stdout=PIPE`和/或时发生死锁，`stderr=PIPE`并且子进程会向管道生成足够的输出，从而阻塞等待 OS 管道缓冲区接受更多数据。用来`communicate()`避免这种情况。

[http://docs.python.org/2/library/subprocess.html#subprocess.Popen.wait](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.wait)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-23T16:20:51.863

您可以在下一个来源中看到如何处理挂起的 stdout/stderr 读取：

[阅读过程](https://github.com/sergzach/readingproc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-14T23:54:02.990

read() 在返回之前等待 EOF。

你可以：

*   等待子进程终止，然后 read() 将返回。
*   如果您的输出被分成几行，请使用 readline() （如果没有输出行，仍然会挂起）。
*   使用 os.read(F,N) 从 F 中返回最多 N 个字节，但如果管道为空，仍然会阻塞（除非在 fd 上设置了 O_NONBLOCK）。

# jpa - 带有 JPA 的 Openejb - 能够检索但无法插入数据库

> ID：14433716
> 
> 赞同：0
> 
> 时间：2013-01-21T06:56:29.030
> 
> 标签：jpa, ejb-3.0, eclipselink, openejb

我使用 openejb 作为我的独立容器来运行我的单元测试用例，在所有测试中的所有测试中，我都能够检索值但无法插入或更新。即使我尝试 entitymanager.merge(obj)，它也会正确选择值，但不会更新它。

我是新手，所以请帮我解决这个错误

提前致谢

我的 persistence.xml 文件

```
 <persistence-unit name="test"
        transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>java:/OracleDS</jta-data-source>
.....entity classes.....
<properties>
            <property name="eclipselink.target-server" value="JBoss" />
            <property name="eclipselink.target-database" value="Oracle" />
            <property name="eclipselink.logging.level" value="FINE" />
            <property name="eclipselink.logging.parameters" value="true" />
        </properties>
    </persistence-unit> 
```

我的道法

```
tp.setname("van");
tp.settype("vehicle");
//entityManager.getTransaction().begin();
entityManager.merge(tp);
//entityManager.getTransaction().commit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:55:43.867

执行以下操作

**坚持新实体：**

```
Transport tp = new Transport();
tp.setname("van");
tp.settype("vehicle");
entityManager.getTransaction().begin();  
entityManager.persist(tp);
entityManager.getTransaction().commit(); 
```

**更新现有实体：**

```
Query qry = entityManager.createQuery("Select t from 
                                       Transport t where t.type ='vechicle'");
List list = qry.getResultList();
//assume result return single entity
Transport tp = list.get(0);
tp.setInspectionDone(new Date()) ;
entityManager.getTransaction().begin();
entityManager.merge(tp);
entityManager.getTransaction().commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T06:48:21.253

我认为您需要在类或方法中添加 @Transactional 注释

# asp.net-mvc - 如何有选择地强制某些派生类实现抽象方法？

> ID：14433717
> 
> 赞同：0
> 
> 时间：2013-01-21T06:56:31.323
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, viewmodel

我有一个 base `MappedViewModel`，也就是说，它是为与域和其他模型的“自动”映射而构建的：

```
public abstract class MappedViewModel<TEntity> : ViewModel
{
    public virtual void MapFromEntity(TEntity entity, bool forCreate = false)
    {
        Mapper.Map(entity, this, typeof(TEntity), GetType());
        if (ModelPurpose == ViewModelPurpose.Create)
        {
            NullifyReferenceProperties();
        }
    }

    public virtual TEntity MapToEntity()
    {
        return Mapper.Map<TEntity>(this);
    }

    protected virtual void NullifyReferenceProperties()
    {            
    }
} 
```

我不知何故觉得它`NullifyReferenceProperties`应该在基类中是抽象的，以强制需要它的类来实现它，但许多类不需要它，而且当模型不是为创建新实体而构建时，许多类需要它。是否可以像现在一样`virtual`，或者有什么方法可以确定如何强制使用它？

也许是`MappedViewModel`一个派生的基地`MappedViewModelForCreate`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:12:41.040

如果你想强制**所有**派生的类`MappedViewModel`重写`NullifyReferenceProperties`方法 make it `abstract`。如果没有，我认为最好离开它`virtual`。

# javascript - IOS/android + phonegap/cordova框架中的返回键

> ID：14433722
> 
> 赞同：1
> 
> 时间：2013-01-21T06:56:52.827
> 
> 标签：javascript, ios, objective-c, cordova

我正在使用 phonegap/cordova 框架在 IOS/android 中创建一个应用程序。我有一组输入类型，如输入框、选项列表等。如何设置返回键以使其在按下时专注于下一个输入框。我曾尝试在 phonegap 中使用 javascript，例如： `document.getElementByid('nextElement').focus();`

返回/进入时；但它似乎没有工作，即。焦点从当前元素中丢失，但软键盘消失并且焦点没有到达下一个元素。知道我在哪里失踪吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:53:20.420

经过一番谷歌搜索，事实证明这在 Mobile Safari 上是不可能的（尽管桌面 WebKit 可以工作）。

您可以将焦点设置在下一个元素上，但根本不会出现软键盘。

这是 PoC：[http ://www.hakoniemi.net/labs/focusOnNext/](http://www.hakoniemi.net/labs/focusOnNext/)

# ide - 如何按名称按 sublimetext2 顺序获取函数列表

> ID：14433724
> 
> 赞同：2
> 
> 时间：2013-01-21T06:56:58.253
> 
> 标签：ide, sublimetext2

我想知道 sublime 如何`Ctrl + R`按名称排序函数列表，
或者什么包名称可以处理这应该更有用。谢谢

# sql - 如何优化这个长期运行的 sqlite3 查询以查找重复项？

> ID：14433728
> 
> 赞同：0
> 
> 时间：2013-01-21T06:57:40.760
> 
> 标签：sql, ruby, sqlite

我有这个相当疯狂的查询，用于查找**除 FIRST**记录之外的所有重复值。运行 38000 条记录需要很长时间；大约 50 秒。

```
UPDATE exr_exrresv
    SET mh_duplicate = 1
WHERE exr_exrresv._id IN
(
     SELECT F._id
     FROM exr_exrresv AS F
     WHERE Exists 
     (
          SELECT PHONE_NUMBER, 
                 Count(_id)
          FROM exr_exrresv
          WHERE exr_exrresv.PHONE_NUMBER = F.PHONE_NUMBER 
                AND exr_exrresv.PHONE_NUMBER != '' 
                AND mh_active = 1 AND mh_duplicate = 0
          GROUP BY exr_exrresv.PHONE_NUMBER
          HAVING Count(exr_exrresv._id) > 1)
     )
AND exr_exrresv._id NOT IN
(
   SELECT Min(_id)
   FROM exr_exrresv AS F
   WHERE Exists 
   (
       SELECT PHONE_NUMBER,
       Count(_id)
       FROM exr_exrresv
       WHERE exr_exrresv.PHONE_NUMBER = F.PHONE_NUMBER 
             AND exr_exrresv.PHONE_NUMBER != '' 
             AND mh_active = 1 
             AND mh_duplicate = 0
       GROUP BY exr_exrresv.PHONE_NUMBER
       HAVING Count(exr_exrresv._id) > 1
   )
       GROUP BY PHONE_NUMBER
); 
```

关于如何优化它或我应该如何开始它的任何提示？我已经检查了查询计划，但我真的不确定如何开始改进它。临时表？更好的查询？

这是解释查询计划的输出：

```
0|0|0|SEARCH TABLE exr_exrresv USING INTEGER PRIMARY KEY (rowid=?) (~12 rows)
0|0|0|EXECUTE LIST SUBQUERY 0
0|0|0|SCAN TABLE exr_exrresv AS F (~500000 rows)
0|0|0|EXECUTE CORRELATED SCALAR SUBQUERY 1
1|0|0|SEARCH TABLE exr_exrresv USING AUTOMATIC COVERING INDEX (PHONE_NUMBER=? AND mh_active=? AND mh_duplicate=?) (~7 rows)
1|0|0|USE TEMP B-TREE FOR GROUP BY
0|0|0|EXECUTE LIST SUBQUERY 2
2|0|0|SCAN TABLE exr_exrresv AS F (~500000 rows)
2|0|0|EXECUTE CORRELATED SCALAR SUBQUERY 3
3|0|0|SEARCH TABLE exr_exrresv USING AUTOMATIC COVERING INDEX (PHONE_NUMBER=? AND mh_active=? AND mh_duplicate=?) (~7 rows)
3|0|0|USE TEMP B-TREE FOR GROUP BY
2|0|0|USE TEMP B-TREE FOR GROUP BY 
```

任何提示将不胜感激。:)

此外，我正在使用 Ruby 进行 sql 查询，所以如果逻辑离开 SQL 并用 Ruby 编写更有意义，那是可能的。

架构如下，你可以在这里使用sqlfiddle：[http ://sqlfiddle.com/#!2/2c07e](http://sqlfiddle.com/#!2/2c07e)

```
_id INTEGER PRIMARY KEY
OPPORTUNITY_ID varchar(50)
CREATEDDATE varchar(50)
FIRSTNAME varchar(50)
LASTNAME varchar(50)
MAILINGSTREET varchar(50)
MAILINGCITY varchar(50)
MAILINGSTATE varchar(50)
MAILINGZIPPOSTALCODE varchar(50)
EMAIL varchar(50)
CONTACT_PHONE varchar(50)
PHONE_NUMBER varchar(50)
CallFromWeb varchar(50)
OPPORTUNITY_ORIGIN varchar(50)
PROJECTED_LTV varchar(50)
MOVE_IN_DATE varchar(50)
mh_processed_date varchar(50)
mh_control INTEGER
mh_active INTEGER
mh_duplicate INTEGER 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:30:17.793

从您的帖子中猜测，您似乎正在尝试更新`mh_duplicate`具有相同电话号码的任何记录的列，如果它不是具有该电话号码的第一条记录？

如果这是正确的，我认为这应该让您更新 id（您可能需要添加适当的 where 条件）——从那里，更新是直截了当的：

```
SELECT e._Id
FROM exr_exrresv e
JOIN
 ( SELECT t.Phone_Number
    FROM exr_exrresv t
    GROUP BY t.Phone_Number
    HAVING COUNT (t.Phone_Number) > 1
  ) e2 ON e.Phone_Number = e2.Phone_Number
LEFT JOIN 
 ( SELECT MIN(t2._Id) as KeepId
    FROM exr_exrresv t2
    GROUP BY t2.Phone_Number
  ) e3 ON e._Id = e3.KeepId
WHERE e3.KeepId is null 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!7/359f5/1)。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:06:55.460

如果存在具有匹配 phone_number 和较小 _id 的活动记录，则认为记录重复。（无需分组或计数。）

```
update exr_exrresv
    set mh_duplicate = 1
where exr_exrresv._id in (
  select target._id
  from exr_exrresv as target
  where target.phone_number != ''
  and target.mh_active = 1
  and exists (
    select null from exr_exrresv as probe
    where probe.phone_number = target.phone_number 
    and probe.mh_active = 1
    and probe._id < target._id
  )
) 
```

如果 phone_number 上存在索引，则此查询将有很大帮助，理想情况下`exr_exrresv (phone_number, _id)`

[SQLFiddle](http://sqlfiddle.com/#!5/1e7bc/1/0)

# html - 如何在字体中制作嵌套的向右箭头？

> ID：14433729
> 
> 赞同：0
> 
> 时间：2013-01-21T06:57:41.797
> 
> 标签：html, fonts

不是`<`or `>`，而是像文件层次结构直角来表示文件夹中的嵌套文档

看起来类似于大写字母“L”，但长度相等，并且中心 lin 在字体高度的中间？

或它的垂直倒数：↵（使其指向右侧）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:02:43.887

只需将其输入到您的文本中并确保您将文本存储在 unicode 中？↳</p>

或将其编码为实体↳（即`&#x21B3;`）

# html - box-shadow 不遵循 z-index 序列

> ID：14433734
> 
> 赞同：0
> 
> 时间：2013-01-21T06:58:08.917
> 
> 标签：html, css

我有关于 box-shadow 的问题是不遵循 div。

我设置了 z-index 但仍然无法正常工作，请帮忙。

box-shadow 总是在伪类后面

下面是html代码：

```
<div class="img-holder sub-images">
<img src="http://dl.dropbox.com/u/80589894/mobileUI/images/flash0.png" />
                        <div class="back-image"></div>
                    </div> 
```

CSS：

```
.img-holder{
width:80px;
height:71px;
position: relative;
z-index:1;
text-align: center;
margin:10px 15px;
border:solid 3px #fff;
-webkit-border-radius: 3px;
-moz-border-radius: 3px;
border-radius: 3px;
-webkit-box-shadow: 0 1px 5px rgba(15, 15, 15, 0.66);
-moz-box-shadow: 0 1px 5px rgba(15, 15, 15, 0.66);
box-shadow: 0 1px 5px rgba(15, 15, 15, 0.66);
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box; 
```

}

```
.img-holder img{
cursor:pointer;
max-width:100%; 
```

}

```
.sub-images:after{
content: " ";
background:url(http://dl.dropbox.com/u/80589894/mobileUI/images/cat-blank-bg.jpg) top center no-repeat;
width:100%;
height:100%;
position: absolute; 
z-index:-1;
border:solid 3px #fff;
top:-3px;
left: -3px;
top:0px \9;/* IE 9 */
left: 0px \9;/* IE 9 */
-ms-transform:rotate(-10deg); /* IE 9 */
-webkit-transform: rotate(-10deg);
-moz-transform: rotate(-10deg);
transform: rotate(-10deg);
-webkit-border-radius: 3px;
-moz-border-radius: 3px;
border-radius: 3px;
-webkit-box-shadow: 0 1px 5px rgba(15, 15, 15, 0.66);
-moz-box-shadow: 0 1px 5px rgba(15, 15, 15, 0.66);
box-shadow: 0 1px 5px rgba(15, 15, 15, 0.66); 
```

}

检查这个：http: [//jsfiddle.net/3WuST/](http://jsfiddle.net/3WuST/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:08:47.343

您需要在`.img-holder`和中交换一些 CSS `.img-holder img`。见[http://jsfiddle.net/3WuST/1/](http://jsfiddle.net/3WuST/1/)

# eclipse - 将 .apk 签名到 BlackBerry App World

> ID：14433737
> 
> 赞同：1
> 
> 时间：2013-01-21T06:58:27.357
> 
> 标签：eclipse, blackberry-eclipse-plugin, blackberry-playbook, blackberry-10

我将 .apk 文件从 Eclipse 运行到 BlackBerry Playbook。它运行成功。之后，当我从 Eclipse 为 BlackBerry App World 签署我的应用程序时，它成功签署并在 dist 文件夹中为我提供 bar 文件。但是，该文件被标记为划线，这表明 bar 文件包含错误。我不知道如何调试错误。我做了 2 种布局：一种用于 Playbook，另一种用于 BlackBerry Alpha 10。这是导致错误还是其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:30:28.243

```
This APK was already packaged and signed, please update the APK’s version number to package again 
```

此错误意味着您正在使用相同的版本号再次签署相同的版本。黑莓签名者将调试版本和发布版本标识为相同，因为它们具有相同的版本号。所以要克服这个问题，只需更改版本号。的发布版本。它会毫无问题地工作。

# java - 映射到服务器的库中的公共静态变量

> ID：14433742
> 
> 赞同：-1
> 
> 时间：2013-01-21T06:58:45.860
> 
> 标签：java, webserver, classloader

如果有一个库映射到服务器库，并且它有一个类，其中一个变量作为公共静态变量。根据我的理解 1\. 在该服务器上它将是一个副本。

1.  如果该服务器与具有更多服务器的某个集群映射，则该静态实例将再次复制到集群公共内存，然后再次在所有服务器中作为单个实例提及。

2.  现在，如果有超过 1 个集群，那么所有集群都将拥有自己的该静态实例的副本。

有人可以验证这三点。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:52:59.983

由于各种原因，可变静力学是不好的 - 避免！

每个类都有一个静态字段的值。由单独的 s 加载的`ClassLoader`类是不同的类。进程之间不共享任何实例。因此，进程之间不共享静态字段值。就 servlet 容器而言，应用程序范围也不在进程之间共享。

# android - Android Listview 字体样式

> ID：14433748
> 
> 赞同：-1
> 
> 时间：2013-01-21T06:59:19.197
> 
> 标签：android, android-listview, custom-font

我是安卓新手。在 android listview 中，我想以自己的风格更改字体。请回复。提前感谢如何在列表视图中更改字体。

在 xml 中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:19:19.500

First add your font file in your assets folder and use this code

```
Typeface arial = Typeface.createFromAsset(getAssets(), "fonts/arial.ttf");
name_txt.setTypeface(arial); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:51:17.137

使用自定义列表 -

要更改为不同的内置字体，请在 List Item XML 中使用 android:typeface

或 ArrayAdopter 的 getView 中的 setTypeface()。

```
public class CustomeArrayAdopter extends ArrayAdapter<String> {
int res;
Typeface tf;

public CustomeArrayAdopter(Context ctx, int resource,  
    List<String> items) {

super(ctx, res,items);
res=resource;
tf=Typeface.createFromAsset(ctx.getAssets(),"font/Arial.ttf");
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
//Apply new TypeFace here
TextView item_text=(TextView)findViewById(R.id.listItemtv);
item_text.setTypeface(tf);

.....
} 
```

_ }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:08:10.943

```
Typeface typeBold = Typeface.createFromAsset(getAssets(),"fonts/helveticabold.ttf");
Typeface typeNormal = Typeface.createFromAsset(getAssets(), "fonts/helvetica.ttf"); 
```

更多信息请尝试以下链接

[示例1](https://stackoverflow.com/questions/4576441/custom-font-in-android-listview)

[示例2](https://stackoverflow.com/questions/9531647/android-own-font-in-listview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T07:11:29.847

```
In android listview i want to change the font in my own style. 
```

这样，我想您想更改列表中显示的子视图中的字体。为此，您需要如下 `typeface`设置`TextView`内部`getView()`

首先在适配器的构造函数中初始化字体可能如下

```
private Typeface typeFace;
public MyContructor(Context context)
    {
        super(context);
        mInflater = LayoutInflater.from(mContext);
        typeFace=Typeface.createFromAsset(mContext.getAssets(), "Fonts/GrinchedRegular.ttf"));
    } 
```

然后在`getView()`

```
@Override
    public View getView(final int position, View convertView, final ViewGroup parent)
    {
        if (convertView == null)
        {
            convertView = mInflater.inflate(R.layout.sample, null);
        }
        myText = (TextView) convertView.findViewById(R.id.my_text);
        myText.setTypeface(typeFace);
        return convertView;
    } 
```

# php - PHP图像调整大小比例问题

> ID：14433749
> 
> 赞同：0
> 
> 时间：2013-01-21T06:59:21.473
> 
> 标签：php, image, resize

Php thumb 根据提供的宽度和高度调整图像大小，我正在处理配置文件图像，即：130x130

当用户上传长高度（矩形）的图像导致图像宽度被拉伸时，当上传长宽度图像（矩形）然后被拉伸时，我希望你明白我的意思。因为当任何人使用大方形图像时，它会调整大小以校正 130x130，但更长的宽度和高度会被拉伸。

我正在考虑有一个很好的建议或想法来解决这些图像，或者从顶部裁剪它们以使它们首先成为完美的正方形。

谢谢，纳吉姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:06:01.507

通常，您会选择较长的一侧，将其放大，然后将较短的一侧按相同的百分比进行缩放。一个这样的片段是[here](http://snipplr.com/view/753/)。您还可以使用适合您的整体设计的平滑背景预先填充画布。

# http - 指定 Retry-After 时，循环重定向是个好选择吗？

> ID：14433754
> 
> 赞同：0
> 
> 时间：2013-01-21T06:59:45.093
> 
> 标签：http, http-headers, http-redirect

我需要通知客户我希望它在 30 秒内重新访问资源，因为我无法立即给他满意的答复。这不是典型的情况，但时有发生。

302 重定向是否`Retry-After: 30`指向客户端标头请求的相同 URL 是一个不错的选择？或者这样的循环重定向总是不好的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:36:12.813

这样做是合理的；进行循环检测是客户端的责任（HTTP 本身也谈到了这一点）。

James Snell 在这里进行了一些可能相关的深入探讨，具体取决于您要执行的操作： http: [//chmod777self.blogspot.com.au/2013/01/asynchronous-patterns.html](http://chmod777self.blogspot.com.au/2013/01/asynchronous-patterns.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:29:54.983

这种重定向循环对我来说似乎是个坏主意。

您可以只通知客户端他们需要启动重新加载。“抱歉，请稍后再试”

另一个要考虑的选项是 SignalR。通过使用它，您可以自动更新您的 UI 而无需重新加载页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-11T18:49:33.290

您可以回复 503 Service Unavailable 并使用回复后指示您可以提供满意回复的时间。即使您的服务以某种方式可用，但实际上并非如此，因为它无法提供所需的响应。

# python - Python 为什么要使用 [:] 而不是 =

> ID：14433759
> 
> 赞同：25
> 
> 时间：2013-01-21T06:59:57.183
> 
> 标签：python, python-3.x

我只是在学习 python，我正在学习[https://developers.google.com/edu/python/strings上的教程](https://developers.google.com/edu/python/strings)

在**字符串切片**部分下

> s[:] is 'Hello' -- 省略两者总是给我们一个完整的副本（这是复制字符串或列表等序列的pythonic方式）

出于好奇，您为什么不直接使用`=`运算符？

```
s = 'hello';
bar = s[:] 
foo = s 
```

据我所知，两者`bar`具有`foo`相同的价值。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-21T07:03:48.783

`=`做一个参考，通过使用`[:]`你创建一个副本。对于不可变的字符串，这并不重要，但对于列表等来说，它是至关重要的。

```
>>> s = 'hello'
>>> t1 = s
>>> t2 = s[:]
>>> print s, t1, t2
hello hello hello
>>> s = 'good bye'
>>> print s, t1, t2
good bye hello hello 
```

但：

```
>>> li1 = [1,2]
>>> li = [1,2]
>>> li1 = li
>>> li2 = li[:]
>>> print li, li1, li2
[1, 2] [1, 2] [1, 2]
>>> li[0] = 0
>>> print li, li1, li2
[0, 2] [0, 2] [1, 2] 
```

**那么为什么在处理字符串时使用它呢？**内置字符串是不可变的，但是每当您编写需要字符串的库函数时，用户可能会给您一些“看起来像字符串”和“行为像字符串”的东西，但它是一种自定义类型。这种类型可能是可变的，所以最好注意这一点。

这种类型可能看起来像：

```
class MutableString(object):
    def __init__(self, s):
        self._characters = [c for c in s]

    def __str__(self):
        return "".join(self._characters)

    def __repr__(self):
        return "MutableString(\"%s\")" % str(self)

    def __getattr__(self, name):
        return str(self).__getattribute__(name)

    def __len__(self):
        return len(self._characters)

    def __getitem__(self, index):
        return self._characters[index]

    def __setitem__(self, index, value):
        self._characters[index] = value

    def __getslice__(self, start, end=-1, stride=1):
        return str(self)[start:end:stride]

if __name__ == "__main__":
    m = MutableString("Hello")
    print m
    print len(m)
    print m.find("o")
    print m.find("x")
    print m.replace("e", "a") #translate to german ;-)
    print m
    print m[3]
    m[1] = "a"
    print m
    print m[:]

    copy1 = m
    copy2 = m[:]
    print m, copy1, copy2
    m[1] = "X"
    print m, copy1, copy2 
```

**免责声明：这只是一个示例，用于展示它如何工作并鼓励使用`[:]`. 它未经测试，不完整，可能性能非常糟糕**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:04:28.913

它们具有相同的值，但在处理可变对象时存在根本区别。

说`foo = [1, 2, 3]`。您分配`bar = foo`和`baz = foo[:]`。现在假设您要更改`bar`- `bar.append(4)`。您检查 的值`foo`，并且...

```
print foo
# [1, 2, 3, 4] 
```

那额外的钱`4`是从哪里来的呢？这是因为您分配`bar`了**的身份**，`foo`所以当您更改一个时，您会更改另一个。你改变了`baz`- `baz.append(5)`，但其他两个没有发生任何事情 - 那是因为你分配了to**的副本**。`foo``baz`

但是请注意，因为字符串是不可变的，所以没关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:05:01.423

如果你有一个列表，结果会有所不同：

```
l = [1,2,3]
l1 = l
l2 = l[:] 
```

l2 是 l（不同对象）的副本，而 l1 是 l 的别名，这意味着 l1[0]=7 也会修改 l，而 l2[1]=7 不会修改 l。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T07:13:17.940

虽然引用对象和引用对象的副本对于像字符串这样的不可变对象没有区别，但对于可变对象（和可变方法），例如列表。

可变对象也是如此：

```
a = [1,2,3,4]
b = a
c = a[:]
a[0] = -1
print a    # will print [1,2,3,4]
print b    # will print [-1,2,3,4]
print c    # will print [1,2,3,4] 
```

A visualization on pythontutor of the above example - [http://goo.gl/Aswnl](http://goo.gl/Aswnl).

# entity-framework-4 - 实体框架/POCO/WCF

> ID：14433761
> 
> 赞同：1
> 
> 时间：2013-01-21T07:00:07.193
> 
> 标签：entity-framework-4, asp.net-mvc-4

我们正在从头开始创建一个网站，并将在 MVC 4.0 和 EF4.0 中创建我们希望使用 EF 创建一个通用数据访问层并使用 WCF 公开 EF。由于 EF 包含 CodeLogic，我们希望将 EF 与客户端调用分开。客户端必须通过 POCO 对象调用 WCF，而 WCF 将反过来使用 POCO 返回某种结果。

我的问题是这种逻辑是可以的。如何将 POCO 转换为 EF，反之亦然。

感谢您的时间和耐心

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:08:56.183

首先，我不知道直接从 Web 服务公开实体是否是个好主意。也许您想使用[数据传输对象](http://en.wikipedia.org/wiki/Data_transfer_object)，也许您想使用 WCF REST 或 WebApi（网络服务已经过时了）。如果您在 WebService 中有业务逻辑，那将是一个好主意。如果不是，那么使用 Entify Framework 功能然后将所有优势隐藏在 Web 服务背后是很奇怪的。

无论如何，有一个很棒的工具可以从一个对象转换到另一个对象，它叫做[automapper](http://automapper.org/)。

# postgresql - 读取数据问题同时更新和/或写入 Postgres DB

> ID：14433764
> 
> 赞同：0
> 
> 时间：2013-01-21T07:00:21.123
> 
> 标签：postgresql

我是 DB 新手，我需要它来进行项目。我的问题如下：我有 3 个写入 Postgres DB 的脚本和另一个对其进行更新的脚本。到目前为止，我没有任何问题。但是，现在我需要同时读取该数据。更具体地说，从该数据库中，我需要同时读取最后 1 分钟的数据。我有另一个脚本。但是，当我运行这个脚本时，我看不到应该写入的脚本中的任何写入。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:18:18.370

您的其他脚本可能尚未`COMMIT`编辑其数据，这意味着您的查询尚看不到它们的更新。

# cakephp - CakePHP debug() 不工作，但 Debugger::dump() 很好

> ID：14433774
> 
> 赞同：4
> 
> 时间：2013-01-21T07:00:41.783
> 
> 标签：cakephp

自 PHP4 和 Cake 1.3 以来，我一直在使用`debug($data);`CakePHP 中调试模型输出等内容。

但是，自从升级到 PHP5.4 后，我注意到这`debug($data)`似乎并不总是有效。比如今天我做了一个直截了当`$data = $this->Model->find('all');`的，内容`debug($data);`似乎是空的。没有错误，只是在 HTML 输出中引用了我调用调试和行号的事实，然后没有调试输出。

但是，如果我`Debugger::dump($data);`在完全相同的 find 上运行，它会起作用 find 并且我会看到整个输出。

它似乎只在`$data`有大量数据（比如 100 多条记录）时才会发生，但我在 PHP5.4 之前使用过这种大小的数据集，从来没有问题，也没有错误，内联或 apache /php 日志表明存在任何内存问题，并且我已将调试设置为 3。

有谁知道这是为什么？我可以很容易地开始使用`Debugger::dump($data);`，但每次都需要尝试一下，我想知道为什么我不能再使用`deubg();`了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T10:11:49.747

如果您的应用程序的其余部分是 UTF-8，那么您的数据库记录中的非 utf8 编码数据可能会发生这种情况。 `debug()`然后将只输出“无”。`var_dump()`，`print_r()`但其他 php 内部方法仍应打印输出。

您通常可以使用 iconv() 等将它们重新编码为 utf8。

# wpf - 在 Metro 风格的 gridview 中实现 wpf gridview

> ID：14433775
> 
> 赞同：1
> 
> 时间：2013-01-21T07:00:44.720
> 
> 标签：wpf, gridview, wpf-controls, microsoft-metro, wpfdatagrid

对于我的 WPF 应用程序，我正在尝试在 WPF 中获取 Windows 8 Metro Gridview 样式。这是我的 Metro 风格 Gridview 设计的示例代码：

```
<DataTemplate x:Key="DashboardItemTemplate">
    <Grid HorizontalAlignment="Left" Width="600" Height="120">
        <Border BorderThickness="0" Background="#4B0F03">
            <Image Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title}"/>
        </Border>
        <StackPanel VerticalAlignment="Bottom" Background="#000000">
            <TextBlock Text="{Binding Title}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource TitleTextStyle}"     Height="70" Margin="15,0,15,0"/>
            <TextBlock Text="" Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap" Margin="15,0,15,10"/>
        </StackPanel>
    </Grid>
</DataTemplate>

<GridView
        x:Name="itemGridView"
        AutomationProperties.AutomationId="ItemsGridView"
        AutomationProperties.Name="Items"
        TabIndex="1"
        Grid.RowSpan="2"
        Padding="116,136,116,46"
        ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
        ItemTemplate="{StaticResource DashboardItemTemplate}"
        SelectionMode="None"
        IsSwipeEnabled="false"
        IsItemClickEnabled="True"
        ItemClick="ItemView_ItemClick"/> 
```

但是我没有在 WPF Gridview 中绑定 DataTemplate 的任何选项，是否有任何选项可用于在 WPF 应用程序中将 Gridview 与 DataTemplate 绑定？或任何其他获取 WPF Gridview 的方式，如 Windows 8 Gridview 样式。

# python - python 示例中的 dsl 需要像 ruby 中一样

> ID：14433785
> 
> 赞同：1
> 
> 时间：2013-01-21T07:01:26.540
> 
> 标签：python, metaprogramming, eval, dsl

我基本上是一个 ruby​​ 人，并且遇到了我需要在 py 中制作一个小的 dsl 的情况，如下所示，我知道在 ruby​​ 中以下是可行的，我在 py 中寻找完全相同

```
from_a_dsl_file = "
   take_this 'abc'
   and_process_it
   and_give_me_the_output
"

class A
   def take_this abc
   end

   def and_process_it
   end

   def and_give_me_the_output
     'desired'
   end
end

A.new.instance_eval from_a_dsl_file
# => 'desired' 
```

任何提示，或者很高兴有一个工作示例

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T08:08:27.760

据我了解，在 Ruby 中，您可以使用不需要括号的函数调用来做一些棘手的事情：

```
x y 
```

在 Ruby 中，这可能是一个函数调用，其中函数`x`被调用`y`为参数。

好吧，在 Python 中，我们没有这些技巧。如果你正在调用一个函数，你需要在函数名后面加上括号。所以，我认为你不会有太多的运气尝试为此玩游戏`eval()`。

更好的方法是编写一个解析器来为您解析语言并弄清楚该语言正在尝试做什么。为此，Python 有一个特别好的库：`pyparsing`

[http://pyparsing.wikispaces.com/](http://pyparsing.wikispaces.com/)

PS 只是在 Google 上搜索“Python 领域特定语言”会发现一些很好的链接，其中很多都在 StackOverflow 中。这是我找到的最好的：

[Python中的迷你语言](https://stackoverflow.com/questions/1547782/mini-languages-in-python)

编辑：好的，你问了一个例子，你去。这是我在 PyParsing 中的第一个程序，非常简单。我什至没有阅读文档；我刚刚从网上找到的演示文稿中的示例开始工作。

这是演示文稿的 URL：[http ://www.ptmcg.com/geo/python/confs/TxUnconf2008Pyparsing.html](http://www.ptmcg.com/geo/python/confs/TxUnconf2008Pyparsing.html)

```
from pyparsing import *

def give_desired_output(s):
    return "desired"

TAKE_THIS = Suppress("take_this") + Suppress(Word(printables))
AND_PROC = Suppress("and_process_it")
AND_GIVE = Keyword("and_give_me_the_output")
AND_GIVE.setParseAction(give_desired_output)

LANGUAGE_LINE = TAKE_THIS | AND_PROC | AND_GIVE

LANGUAGE = ZeroOrMore(LANGUAGE_LINE)

def parse_language(text):
    lst = LANGUAGE.parseString(text)
    assert len(lst) == 1  # trivial language returns a single value
    return lst[0]

if __name__ == "__main__":
    from_a_dsl_file = \
"""
   take_this 'abc'
   and_process_it
   and_give_me_the_output
"""

    print(parse_language(from_a_dsl_file))  # prints the word: desired 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:06:20.333

听起来您可能想查看[`exec()`](http://docs.python.org/2/library/functions.html#exec)和/或[`execfile()`](http://docs.python.org/2/library/functions.html#execfile)（特别是诸如指定可用全局变量和局部变量的能力之类的东西）。

（还有[`eval()`](http://docs.python.org/2/library/functions.html#eval)，但它只允许一个表达式，而不是一系列命令。）

# asp.net-mvc-3 - 在 ISiteMapNodeVisibilityProvider 中使用 NInject 进行注入

> ID：14433789
> 
> 赞同：1
> 
> 时间：2013-01-21T07:01:41.407
> 
> 标签：asp.net-mvc-3, ninject, mvcsitemapprovider

我有一个小问题，希望你能帮我解决。

我正在使用`MvcSiteMapProvider`，并且我想使用通过服务接口访问数据库来定义每个节点的可见性。

```
 public class AreaSiteMapNodeVisibilityProvider : MvcSiteMapProvider.Extensibility.ISiteMapNodeVisibilityProvider
{   
[Inject]
public ISecurityService _SecurityService {get;set;}
        public AreaSiteMapNodeVisibilityProvider()
    {

    }
    public bool IsVisible(SiteMapNode node, HttpContext context, IDictionary<string, object> sourceMetadata)
    {
        MvcSiteMapNode thisNode = node as MvcSiteMapNode;
        return _SecurityService.CalculateNodeVisibility(thisNode,context.Cache["someValueIHaveStoredHere"])

    }
} 
```

但是，我的`_SecurityService`会员始终是`null`. 有什么建议么？我接受任何类型的指示，包括摆脱注射并另辟蹊径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:29:00.963

你`ISecurityService`是`null`，因为在这种情况下，Ninject 不管理创建（在 MVC 应用程序中，Ninject 解决了从控制器*根*`MvcSiteMapProvider`连接的依赖项，因为它管理控制器的创建 - 它覆盖了创建控制器的默认方法）。

 *解决您的问题的选项：

**1)** 使用 Ninject 作为服务定位器。**不建议！**，*因为它被广泛认为是一种反模式（但这取决于......）*。

```
var app = HttpContext.ApplicationInstance as NinjectHttpApplication;
var service = app.Kernel.Get<ISecurityService>(); 
```

**2)**阅读*R. Gloor*对类似问题的回答：[MVC3, Ninject, MvcSiteMapProvider - How to injection dependency to overridden method](https://stackoverflow.com/questions/7933995/mvc3-ninject-mvcsitemapprovider-how-to-inject-dependency-to-overridden-metho) and do it in his way。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:42:25.293

确保

1.  **web.config 中未**配置siteMapNodeVisibilityProvider
2.  有一个绑定`ISiteMapNodeVisibilityProvider`*

# perl - 管道被 Perl 中的子进程阻塞

> ID：14433793
> 
> 赞同：1
> 
> 时间：2013-01-21T07:02:08.300
> 
> 标签：perl, fork, pipe

我写了两个perl脚本（parent.pl和child.pl），它们的源代码如下：

**父.pl：**

```
# file parent.pl

$SIG{CHLD} = sub {
    while(waitpid(-1, WNOHANG) > 0) {
        print "child process exit\n";
    }   
};

my $pid = fork();
if($pid == 0) {
    system("perl child.pl");
    exit;
}
while(1) {
    open my $fh, "date |";                                                                                                                                            
    while(<$fh>) {
        print "parent: ".$_;
    }   
    close $fh;
    sleep(2);
} 
```

**孩子.pl**

```
#file child.pl

while(1) {
   open my $fh, "date |";
   while(<$fh>) {
       print "  child: ".$_;                                                                                                                                          
    }   
   close $fh;
   sleep(2);
} 
```

我想要的是父进程和分叉的子进程交替输出当前日期。但是当我运行时`perl parent.pl`，输出是这样的：

```
$ perl parent.pl 
parent: Mon Jan 21 14:53:36 CST 2013
  child: Mon Jan 21 14:53:36 CST 2013
  child: Mon Jan 21 14:53:38 CST 2013
  child: Mon Jan 21 14:53:40 CST 2013
  child: Mon Jan 21 14:53:42 CST 2013
  child: Mon Jan 21 14:53:44 CST 2013 
```

打开管道时似乎父进程被阻止。

但是，如果我删除信号 CHLD 的以下操作。

```
$SIG{CHLD} = sub {
        while(waitpid(-1, WNOHANG) > 0) {
            print "child process exit\n";
        }   
}; 
```

并再次运行它。好像没问题。

```
$ perl parent.pl 
parent: Mon Jan 21 14:57:57 CST 2013
  child: Mon Jan 21 14:57:57 CST 2013
parent: Mon Jan 21 14:57:59 CST 2013
  child: Mon Jan 21 14:57:59 CST 2013
parent: Mon Jan 21 14:58:01 CST 2013
  child: Mon Jan 21 14:58:01 CST 2013 
```

但我还是觉得莫名其妙。为什么当我尝试打开管道时父进程被阻止？

我不认为删除 SIG{CHLD} 函数是一个好主意，因为应该检索僵尸进程。

任何人都可以帮助我吗？非常感谢你！

==================================================== =================

感谢@Borodin 帮助我解决我的难题。我试图修改`parent.pl`这样的：

```
my $main_pid = $$;
$SIG{USR1} = sub {
        #sleep(1);
        while(waitpid(-1, WNOHANG) > 0) {
                print "child process exit\n";
        }
};

my $pid = fork();
if($pid == 0) {
    $SIG{USR1} = 'IGNORE';
    system("perl child.pl");
    kill USR1, $main_pid;
    exit;
}
while(1) {
    open my $fh, "date |";
    while(<$fh>) {
        print "parent: ".$_;
    }
    close $fh;
    sleep(2);
} 
```

由于`CHLD`信号可能由`open`or启动`system`，所以我使用了另一个自定义信号`USR1`。现在效果很好。

==================================================== =======================

上面的修改还是有问题的。分叉的子进程在退出前发送 USR1 信号。可能是父进程之前应该休眠一段时间`waitpid`，因为子进程还没有退出。

我现在不手动检索子流程，并设置`$SIG{$CHLD} = 'IGNORE'`. 希望子进程退出时能被操作系统找回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:24:48.950

这变得更加复杂，因为`open my $fh, "date |"`和`system("perl child.pl")`都在启动子进程，以及显式的`fork`.

所以`fork`启动了一个子进程，它确实`system("perl child.pl")`启动了它自己的子进程，它反过来又`open my $fh, "date |"`打开了另一个子进程，它现在是主父进程的曾孙。

同时主进程自己`open my $fh, "date |"`启动另一个子进程。最后，主进程有两个孩子，一个孙子和一个曾孙。

不幸的是，开始使用`open`或附加`system`了隐含的孩子`wait`，所以他们会`CHLD`在完成时启动信号，但是当处理程序被执行时，没有什么可以等待，所以它会像你所看到的那样挂起。

[`perldoc perlipc`](http://perldoc.perl.org/perlipc.html#Signals)有这个要说

> 注意：qx()、system() 和一些用于调用外部命令的模块执行 fork()，然后 wait() 获取结果。因此，您的信号处理程序将被调用。因为 system() 或 qx() 已经调用了 wait()，所以信号处理程序中的 wait() 将不再看到僵尸，因此将阻塞。

您可以通过只保留一个父进程和一个子进程来让事情顺利进行，就像这样。

```
use strict;
use warnings;

use POSIX ':sys_wait_h';

STDOUT->autoflush;

$SIG{CHLD} = sub {
  while(waitpid(-1, WNOHANG) > 0) {
    print "child process exit\n";
  }   
};

my $pid = fork();

if ($pid == 0) {
  while(1) {
    printf " child: %s\n", scalar localtime;
    sleep(2);
  }
}
else {
  while(1) {
    printf "parent: %s\n", scalar localtime;
    sleep(2);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T00:37:28.880

### 选项1

做你想做的事情的一种方法是与一对半双工管道同步，用[`pipe`](http://perldoc.perl.org/functions/pipe.html)and创建[`open`](http://perldoc.perl.org/functions/open.html)。使用全双工[`socketpair`](http://perldoc.perl.org/functions/socketpair.html)可以简化簿记。

`"|-"`在子进程上隐式打开句柄，`fork`其标准输入是管道的读取端，写入端是返回给父进程的文件句柄。父级使用此隐式管道释放子级，并使用显式创建的管道作为反向通道。

```
#! /usr/bin/env perl

use strict;
use warnings;

use Fcntl qw/ F_GETFD F_SETFD FD_CLOEXEC /;
use IO::Handle;

pipe my $fromchild, my $toparent or die "$0: pipe: $!";
$_->autoflush(1) for $toparent, $fromchild;

my $flags = fcntl $toparent, F_GETFD, 0        or die "$0: fcntl: $!";
fcntl $toparent, F_SETFD, $flags & ~FD_CLOEXEC or die "$0: fcntl: $!";

my $pid = open my $tochild, "|-";
$tochild->autoflush(1);
die "$0: fork: $!" unless defined $pid;

if ($pid != 0) {
  while (1) {
    print "parent: ", scalar localtime, "\n";
    sleep 1;
    print $tochild "over\n";

    chomp($_ = <$fromchild>);
    exit 0 if $_ eq "over and out";
  }
}
else {
  exec "child.pl", fileno $toparent
    or die "$0: exec: $!";
} 
```

中的代码`child.pl`如下。请注意，父级传递一个*文件描述符*，子级必须`dup`在另一个方向上与父级通信。

```
#! /usr/bin/env perl

use strict;
use warnings;

use IO::Handle;

my($fd) = @ARGV or die "Usage: $0 to-parent-fd\n";
open my $toparent, ">&=", $fd or die "$0: dup: $!";
$toparent->autoflush(1);

my $rounds = 5;
for (1 .. $rounds) {
  my $over = <STDIN>;
  print " child: ", scalar localtime, "\n";
  sleep 1;
  print $toparent ($_ < $rounds ? "over\n" : "over and out\n");
}

exit 0; 
```

在音乐会上，他们看起来像

```
家长：2013 年 1 月 21 日星期一 18:10:39
 儿童：2013 年 1 月 21 日星期一 18:10:40
家长：2013 年 1 月 21 日星期一 18:10:41
 孩子：2013 年 1 月 21 日星期一 18:10:42
家长：2013 年 1 月 21 日星期一 18:10:43
 儿童：2013 年 1 月 21 日星期一 18:10:44
家长：2013 年 1 月 21 日星期一 18:10:45
 孩子：2013 年 1 月 21 日星期一 18:10:46
家长：2013 年 1 月 21 日星期一 18:10:47
 儿童：2013 年 1 月 21 日星期一 18:10:48
```

### 选项 2

一种更奇特的安排是让子进程安排在一个环或循环中彼此轮流。在父进程和子进程之间来回切换仅仅是长度为 2 的循环。

```
#! /usr/bin/env perl

use strict;
use warnings;

use IPC::SysV qw/ IPC_CREAT IPC_PRIVATE S_IRUSR S_IWUSR /;
use IPC::Semaphore;

my $WORKERS = 3; 
```

给定的工作人员从集合中获取自己的信号量，但在完成时释放*下一个*工作人员。

```
sub take {
  my($id,$sem) = @_;
  $sem->op($id, -1, 0) or die "$0: semop: $!";
}

sub release {
  my($id,$sem) = @_;
  my $next = ($id + 1) % $WORKERS;
  $sem->op($next, 1, 0) or die "$0: semop: $!";
}

sub worker {
  my($id,$sem) = @_;

  for (1 .. 3) {
    take $id, $sem;

    print "[worker $id]: ", scalar localtime, "\n";
    sleep 1;

    release $id, $sem;
  }
} 
```

创建信号量集并让第一个准备好运行。

```
my $sem = IPC::Semaphore->new(
  IPC_PRIVATE,
  $WORKERS,
  IPC_CREAT | S_IRUSR | S_IWUSR)
    or die "$0: semget: $!";

$sem->setall((0) x $WORKERS);
$sem->setval(0, 1);  # unblock first only 
```

现在我们准备好`fork`子流程并让它们执行。

```
foreach my $id (0 .. $WORKERS - 1) {
  my $pid = fork;
  die "$0: fork: $!" unless defined $pid;

  if ($pid == 0) {
    worker $id, $sem;
    exit 0;
  }
}

# wait on all workers to finish
my $pid;
do {
  $pid = waitpid -1, 0;
} while $pid > 0; 
```

样本输出：

```
[工人 0]：2013 年 1 月 21 日星期一 18:13:27
[工人 1]：2013 年 1 月 21 日星期一 18:13:28
[工人 2]：2013 年 1 月 21 日星期一 18:13:29
[工人 0]：2013 年 1 月 21 日星期一 18:13:30
[工人 1]：2013 年 1 月 21 日星期一 18:13:31
[工人 2]：2013 年 1 月 21 日星期一 18:13:32
[工人 0]：2013 年 1 月 21 日星期一 18:13:33
[工人 1]：2013 年 1 月 21 日星期一 18:13:34
[工人 2]：2013 年 1 月 21 日星期一 18:13:35
```

# xslt - XSL select="child::node" 问题

> ID：14433794
> 
> 赞同：0
> 
> 时间：2013-01-21T07:02:11.407
> 
> 标签：xslt, xpath

有一个问题看不懂，不胜感激：

我有一个看起来像这样的 xml 文件

```
<xml>
    <parent>
        <child_node>1</child_node>
        <child_node>2</child_node>
        <child_node>3</child_node>
    </parent>
    <parent>
        <child_node>4</child_node>
    </parent>
</xml> 
```

还有一个 xsl 模板：

```
<xsl:template name="template">
    <xsl:param name="top_node"/>

    <xsl:for-each select="$top_node/child::child_node">
        <xsl:value-of select="."/>
    </xsl:for-each>
</xsl:template> 
```

这被称为`<xsl:with-param name="top_node" select="xml/parent">`

我希望这仅返回作为单个父节点的子节点的子节点，如此处所示[，](http://nwalsh.com/docs/tutorials/xsl/xsl/foil22.html)但是它返回所有子节点。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:27:42.540

如果不看更多内容，很难弄清楚这个 XSLT 的最终意图是什么，但您得到这种行为的原因是该路径`xml/parent`选择了与该路径匹配的*所有*节点，而不仅仅是第一个节点。如果您只想将其应用于第一个，您可以这样做：

```
<xsl:with-param name="top_node" select="xml/parent[1]"> 
```

如果您想将其应用于某个其他人：

```
<xsl:with-param name="top_node" select="xml/parent[2]">
<xsl:with-param name="top_node" select="xml/parent[3]">
etc. 
```

# asp.net - 如何在特定时间从 asp.net Web 应用程序发送邮件

> ID：14433795
> 
> 赞同：2
> 
> 时间：2013-01-21T07:02:15.633
> 
> 标签：asp.net, c#-4.0

我是 asp.net 的新手。我有一个项目正在工作。我需要每天上午 12 点向不同的用户发送不同的邮件。
我需要知道如何实现每天在某个时间段醒来的方法。
请帮助我尽可能多的细节，因为我是一个完整的初学者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:06:15.947

使用[Quartz.NET](http://quartznet.sourceforge.net/)。

Quartz.NET 是一个功能齐全的开源企业作业调度系统，使用 .NET 平台编写，可用于从最小的应用程序到大型企业系统。

您也可以使用 Windows 任务计划程序，但您需要一些特定的 Windows 权限才能在生产服务器上执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:15:21.747

您可以创建将在您需要的时间自动执行的**Windows 服务。**Windows 服务应包含发送电子邮件的代码。您可以在[简单 Windows 服务示例](http://www.codeproject.com/Articles/3990/Simple-Windows-Service-Sample)和[发送自动电子邮件警报](http://www.codeproject.com/Articles/16335/Simple-Windows-Service-which-sends-auto-Email-aler)的简单 Windows 服务上查看这些链接。您还可以在您的应用程序中实现一个可以管理它的计时器。如果您想这样做，请查看[这篇文章](http://www.codeproject.com/Articles/49996/Schedule-Email-Through-ASP-NET-or-Schedule-Tasks-U)。

# css - 如何使用 Twitter Bootstrap 在同一行中显示标签和文本框

> ID：14433798
> 
> 赞同：1
> 
> 时间：2013-01-21T07:02:33.420
> 
> 标签：css, twitter-bootstrap

```
<div class="control-group">
    <label for="name" class="control-label"><p class="text-info">Name&nbsp;<i class="icon-star"></i></p></label>
    <div class="controls">
        <input type="text" id="name" placeholder="Enter your name" class="span3">
    </div> 
```

这对我不起作用，我不想为此使用“form-horizo​​ntal”类或表格。我尝试过使用 row 和 row-fluid 类，但它不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T07:16:08.163

您可以使用`<div class="form-horizontal">`. 您不需要`form`使用`form-horizontal`.

[示例](http://jsfiddle.net/arunpjohny/xYyqz/)：

```
<div class="form-horizontal">
    <div class="control-group row-fluid form-inline">
        <label for="name" class="control-label"><p class="text-info">Name&nbsp;<i class="icon-star"></i></p></label>
        <div class="controls">
            <input type="text" id="name" placeholder="Enter your name" class="span3">
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T07:36:24.707

您想要水平表单布局。这可以通过将代码包装在具有水平形式的类的 div 之间来实现。

```
<div class="form-horizontal">
   <div class="control-group">
    <label for="name" class="control-label"><p class="text-info">Name&nbsp;<i class="icon-star"></i></p></label>
    <div class="controls">
        <input type="text" id="name" placeholder="Enter your name" class="span3">
    </div>
</div> 
```

要了解更多信息，请单击[此处](http://www.w3resource.com/twitter-bootstrap/forms-tutorial.php)

# java - 使用正则表达式搜索另一个字符串

> ID：14433800
> 
> 赞同：1
> 
> 时间：2013-01-21T07:02:55.867
> 
> 标签：java, regex

我需要检查一个字符串是否包含在另一个字符串中。

例如，“abc”包含在“abc/def/gh”、“def/abc/gh”**中，但不包含在** “abcd/xyz/gh”、“def/abcd/gh”中。

所以，我`input`用“/”分割了字符串。然后迭代生成的 String 数组以检查`input`.

是否可以使用类似的方法来避免创建数组`Regex`？

另外，有人可以确认使用 Regex 是否会比我使用的数组的创建和迭代更快吗？

提前致谢

```
public class RegexTest {

     public static void main(String[] args) {
          System.out.println(contains("abc/def/gh", "abc"));
          System.out.println(contains("def/abc/gh", "abc"));
          System.out.println(contains("def/abcd/gh", "abc"));
          System.out.println(contains("abcd/xyz/gh", "abc"));

     }

     private static boolean contains(String input, String searchString) {
        String[] strings = input.split("/");
        for (String string : strings) {
            if (string.equals(searchString))
                return true;
        }
        return false;
     }
 } 
```

控制台输出为： true true false false

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:15:43.377

像这样的东西：

```
String pattern = "(.*/)?abc(/.*)?";
System.out.println("abc/def/gh".matches(pattern));
System.out.println("def/abc/gh".matches(pattern));
System.out.println("def/abcd/gh".matches(pattern));
System.out.println("abcd/xyz/gh".matches(pattern)); 
```

印刷

```
true
true
false
false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:17:22.340

使用正则表达式更方便（？），但请自己计时是否更快：

```
if (!searchString.contains("/")) {
    return input.matches("(.*/)?" + Pattern.quote(searchString) + "(/.*)?");
} else {
    return false;
} 
```

在将其作为文字插入之前，我确保`searchString`不包含. 正则表达式将确保输入中的搜索字符串前后有一个，或者搜索字符串是输入中的第一个或最后一个标记。`/`[`Pattern.quote`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)`/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:12:56.703

试试这个正则表达式

```
s.matches("^abc/.+|.+/abc/.+|.+/abc$") 
```

或者

```
 s.startsWith("abc/") || s.contains("/abc/") || s.endsWith("/abc") 
```

# xaml - 设计器抛出 NullReference 异常

> ID：14433801
> 
> 赞同：1
> 
> 时间：2013-01-21T07:02:58.550
> 
> 标签：xaml, pivot, windows-phone-8, itemtemplate

我需要将项目框架边距设置为 10。

设计器视图不断抛出异常，所以我无法继续。

```
<phone:Pivot.ItemTemplate>
    <DataTemplate>
        <phone:PivotItem Margin="10"/>
    </DataTemplate>
</phone:Pivot.ItemTemplate> 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:03:31.747

抱歉，我没有意识到这是 WP8。在 WP8 上，phone*是*Pivots 的默认命名空间。不过，这很随意。你确定问题不在其他地方吗？分享您的 XAML 对您仍然有帮助，但这里有一些对我有用：

```
<phone:Pivot>
    <phone:Pivot.ItemTemplate>
        <DataTemplate>
            <phone:PivotItem Margin="10">
                <Grid>
                    <!--Contents of template-->
                </Grid>
            </phone:PivotItem>
        </DataTemplate>
    </phone:Pivot.ItemTemplate>
    <phone:PivotItem Header="Hello">
        <Grid>
            <!--Contents of "Hello" item-->
        </Grid>
    </phone:PivotItem>
    <phone:PivotItem Header="World">
        <Grid>
            <!--Contents of "World" item-->
        </Grid>
    </phone:PivotItem>
</phone:Pivot> 
```

# java - 如何使用 Selenium 对子 iFrame 执行操作？

> ID：14433805
> 
> 赞同：0
> 
> 时间：2013-01-21T07:03:11.567
> 
> 标签：java, iframe, selenium, selenium-webdriver

我们如何在 iFrame 中的 iFrame 上执行操作？

HTML：

```
<div id="div1">
 <iframe id="iframe1">
   <div id="div2">
     <iframe id="iframe2">
     </iframe>
   </div>
   <div id="div3">
     <iframe id="iframe3">
     </iframe>
   </div>
 </iframe>
</div> 
```

我需要对 iframe2 和 iframe3 执行操作。尝试使用以下代码：

```
1\. driver.switchTo().frame("iframe1.0.iframe2");
2\. WebElement firstFrame = driver.findElement(By.id("iframe1"));
   driver.switchTo().frame(firstFrame);
   WebElement secondFrame = driver.findElement(By.id("iframe2"));
   driver.switchTo().frame(secondFrame); 
```

但无法解决问题。

请建议是否要遵循任何其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:45:16.010

试试这个片段。

```
 //Switch To parent frame "iframe1"
 WebElement parentFrame = driver.findElement(By.id("iframe1"));
 driver.switchTo.frame(parentFrame );

 //Switch To first child frame "iframe2"
 WebElement firstChildFrame = driver.findElement(By.id("iframe2"));
 driver.switchTo.frame(firstChildFrame ); 

 //Do some actions on iframe2
 //Switch To Top (or) Parent frame by using
 driver.switchTo().defaultContent();

 //Switch To parent frame "iframe1"
 WebElement parentFrame = driver.findElement(By.id("iframe1"));
 driver.switchTo.frame(parentFrame );

 //Switch To second child frame "iframe3"
 WebElement secondChildFrame = driver.findElement(By.id("iframe3"));
 driver.switchTo.frame(secondChildFrame); 
```

有关选择框架的更多详细信息，请使用此[http://darrellgrainger.blogspot.ca/2012/04/frames-and-webdriver.html](http://darrellgrainger.blogspot.ca/2012/04/frames-and-webdriver.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:43:06.510

像这样试试

```
//switch the control to first frame
WebElement firstFrame = driver.findElement(By.id("iframe1"));
driver.switchTo().frame(firstFrame);

//switch the control to second frame
WebElement secondFrame = driver.findElement(By.id("iframe2"));
driver.switchTo().frame(secondFrame);

//Switch back the control to first frame before switch it to frame3
driver.switchTo().frame(firstFrame);

WebElement thirdFrame = driver.findElement(By.id("iframe3"));
driver.switchTo().frame(thirdFrame); 
```

# android - 使用 Jsoup 解析不正确

> ID：14433809
> 
> 赞同：0
> 
> 时间：2013-01-21T07:03:31.967
> 
> 标签：android, jsoup

我正在使用 Jsoup解析网站[http://animecalendar.net 。](http://animecalendar.net)Аll 解析得很好，但我有一个问题。我得到了一个混合的 url 列表，但它们被正确解析（见日志）

代码：

```
@Override
    protected ArrayList<Order> doInBackground(String... urls) {

        listItems.clear();
        myAdapter.notifyDataSetChanged();
        String dates = null;
                    String url = null;

        try {
            Document doc = Jsoup.connect(URL).get();

            Elements main = doc.select("div.day");
            for (Element m : main) {
                titles = m.select("div.tooltip");
                for (Element tts : titles) {

                    title = tts.select("td.tooltip_title h4").text();
                    time = tts.select("td.tooltip_info h4").text();
                    img = tts.select("td.tooltip_desc img[src]");

                    Order o = new Order();
                    o.setLink(URL + img.attr("src"));
                    o.setTextName(title);
                    o.setTextTime(time);
                    o.setTextDate(dates);
                    o.setDetailsUrl(URL + url);  // incorrect (mixed) displayed urls list in device
                    listItems.add(o);
                }

                Elements date = m.select("h2");                 
                for (Element m1 : date) {
                    dates = m1.select("a").attr("href");                        
                }

                Elements links = m.select("h3");
                for (Element link : links) {
                    url = link.select("a").attr("href");  // parse urls from site
                         System.out.println(url);  // in LogCat displayed correct urls list
                }                   
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        return listItems;
    } 
```

日志猫：

```
01-21 12:55:55.429: I/System.out(8036): /show/596/Cardfight%21%21_Vanguard%3A_Asia_Circuit_Hen
01-21 12:55:55.429: I/System.out(8036): /show/583/Inazuma_Eleven_GO_2%3A_Chrono_Stone
01-21 12:55:55.445: I/System.out(8036): /show/671/Ai_Mai_Mi_
01-21 12:55:55.445: I/System.out(8036): /show/697/Mangirl%21
etc... 
```

结果，我得到了一个混合的 url 列表。
屏幕：
![在此处输入图像描述](../Images/54c3f35826741b33c5b76bcb115a49bd.png)

如何解决？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:38:29.567

问题这样解决

```
Elements epBox = doc.select("div.ep_box h3");
            int urlcount = 0;
            for (Element ep : epBox) {
                url = ep.select("a").attr("href");

                if (urlcount < listItems.size()) {
                    Order o = (Order) listItems.get(urlcount);
                    o.setDetailsUrl(URL + url);
                    newarraylist.add(o);
                }
                urlcount++;
            } 
```

# jquery - jquery函数参数忽略零

> ID：14433811
> 
> 赞同：0
> 
> 时间：2013-01-21T07:03:34.700
> 
> 标签：jquery, jqgrid

在这里，我有一个 mvcjqgrid，从中我有一个链接按钮，如下所示

```
mvcJqGrid.demo.buttonize = function (cellvalue, options, rowobject) {   
    return <a onclick="return mvcJqGrid.demo.showIdproofmodal('+options.rowId+')"><div class="ui-icon ui-icon-pencil" style="display:inline-block"></div></a>
} 
```

在这里我有链接按钮的功能。

```
mvcJqGrid.demo.showIdproofmodal = function (id){
    $("#NoteDialog").load("/UserAccount/UploadIdProof/" + id, function () 
    {alert(id); 
    $("#NoteDialog").dialog('open'); });
                return false;
    } 
```

当函数**`mvcJqGrid.demo.showIdproofmodal(00038748492234)`**传递一个像上面这样的值时，我*`38748492234`*在实际函数中收到 no ，这会导致我出现一些功能错误，我需要在参数类型中获取确切的值。帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:32:20.343

试试这个代码

```
mvcJqGrid.demo.buttonize = function (cellvalue, options, rowobject) {   
    return "<a onclick=\"return mvcJqGrid.demo.showIdproofmodal('"+options.rowId+"')\"><div class='ui-icon ui-icon-pencil' style='display:inline-block'></div></a>"
} 
```

**更新：**

1.  Here you have called the function as `showIdproofmodal(00038748492234)`. In this case javascript will consider the parameter as a number.
2.  When it is modified to `showIdproofmodal('00038748492234')`, javascript engine will consider it a string variable.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:12:38.997

`00038748492234`如果数据类型是数字，则和之间没有区别`38748492234`。

如果您将数据作为字符串传递，则将保留零。

您不会向我们`options.rowId`展示它是什么或它是如何设置的——我们必须查看该代码以了解那里使用的数据类型以及确保它是字符串的建议。

# asp.net - 不同 div 中的 Grid View 调整

> ID：14433814
> 
> 赞同：0
> 
> 时间：2013-01-21T07:03:52.467
> 
> 标签：asp.net, html, css

我有一个分配了数据源的 Asp.net gridview。网格视图位于具有固定高度的 div 内。如果行超过 20，我想创建另一个 div。因此，在第一个 div 上只显示前 20 行，对于其他 20 行，将创建一个新的动态 div，其余行将放置在其中。有什么建议么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:26:48.727

在第一个 GridView 中，我们将其称为“GridViewA”禁用分页并设置`PageSize`为 20。

如果您的 DataSource 超过 20 条记录，请将另一个名为“GridViewB”的 GridView 放入您的另一个 div，禁用分页，将 PageSize 设置为 20，设置与“GridViewA”相同的 DataSource。唯一的区别是您需要将当前页面设置为 2。

使用这种方法，您将在“GridViewA”中显示 1-20 条记录，在“GridViewB”中显示 21-n 条记录。

# javascript - 令人困惑的 JavaScript 库

> ID：14433815
> 
> 赞同：-2
> 
> 时间：2013-01-21T07:04:00.060
> 
> 标签：javascript, node.js, backbone.js, typescript, mobile-application

我正在使用 HTML5/Javascript/CSS 构建我的第一个移动应用程序。我对大量的 JavaScript 库感到不知所措。我花了很短的时间；我遇到了 JsRender、nodeJS、backbonejs、knockoutjs、TypeScript、CoffeeScript、Jquery... 是否有公认的构建移动应用程序的“最佳实践”文档？这样我就不必阅读这些库中的每一个并弄清楚我应该使用什么和不应该使用什么。

我想这可能不是一个足够具体的问题，但我找不到更好的论坛来提问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T07:12:37.640

首先，您提到的 JS 库各有不同的用途。

*   JsRender 用于 jQuery 模板
*   nodeJS 是一个 JavaScript**服务器**
*   **Backbone 是一个 JS 库，用于按照MVC**模式构建的应用程序客户端
*   **Knockout 是一个 JS 库，用于遵循MVVM**模式构建的应用程序客户端
*   TypeScript 和 CoffeeScript 是 JS**预编译器**（允许您编写代码“更容易”，编译为 JS）

我认为这里没有任何“最佳实践”，因为它们都有不同的目的。了解他们的不同之处，选择一个并接受它。

如果您想构建一个移动应用程序，我建议您使用[jQuery Mobile](http://jquerymobile.com/)（但再一次，这是个人的最爱）。其他包括[Sencha Touch](http://www.sencha.com/products/touch)、[Kendo UI Mobile](http://www.kendoui.com/mobile.aspx)、[PhoneGap](http://phonegap.com/)、...

# android - 找不到提供商信息 com.google.settings Android 地图

> ID：14433816
> 
> 赞同：0
> 
> 时间：2013-01-21T07:04:03.797
> 
> 标签：android

我的 android 应用程序使用 MapView，但在使用 MapView 开始活动后，我连续遇到三个错误：

找不到提供商信息 com.google.settings

然后

无法获取连接工厂客户端

我已经设置了所有权限和 Api 密钥。但显示网格图。

我在过去两周内解决了这个问题，但我没有解决..

有人知道如何解决这个问题？？

**这是我的代码**

```
public class AndroidGPSApplicationActivity extends MapActivity {

    private MapView map=null;
    private MyLocationOverlay me=null;
    private ToggleButton toggle_button;
    private TextView latitude=null;
    public double value;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        map=(MapView)findViewById(R.id.mapview);
        map.getController().setCenter(getPoint(34.0043,71.5448));
        map.getController().setZoom(13);
        map.setBuiltInZoomControls(true);
        map.setTraffic(true);

        Drawable marker=getResources().getDrawable(R.drawable.marker);

        marker.setBounds(0, 0, marker.getIntrinsicWidth(), marker.getIntrinsicHeight());

        map.getOverlays().add(new SitesOverlay(marker));

        me=new MyLocationOverlay(this, map);
        map.getOverlays().add(me);

        MapOverlay mapOverlay = new MapOverlay();
        List<Overlay> listOfOverlays = map.getOverlays();
        listOfOverlays.add(mapOverlay);

        tabView();

        latitude = (TextView)findViewById(R.id.latitude_value);
        //latitude.setText(null);

        toggle_button = (ToggleButton)findViewById(R.id.togglebutton);
        toggle_button.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if(toggle_button.isChecked())
              {
                enableGps();
                Toast.makeText(getApplicationContext(), "The state of GPS is changed to on", Toast.LENGTH_LONG).show();
              }
            else
              {
                disableGps();
                Toast.makeText(getApplicationContext(), "The state of GPS is changed to off", Toast.LENGTH_LONG).show();
              }

            }
        });

    }       // end of onCreate(); function

    @Override
    public void onResume() {
        super.onResume();
        me.enableCompass();
    }       

    @Override
    public void onPause() {
        super.onPause();
        me.disableCompass();
    }   
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_S) {
            map.setSatellite(!map.isSatellite());
            return(true);
        }
        else if (keyCode == KeyEvent.KEYCODE_Z) {
            map.displayZoomControls(true);
            return(true);
        }

        return(super.onKeyDown(keyCode, event));
    }
    private void tabView() {                                //setting two tabs ..for Map and Update

        TabHost tabs = (TabHost)findViewById(R.id.TabHost01);
        tabs.setup();
        TabHost.TabSpec spec1 = tabs.newTabSpec("tag1");
        spec1.setContent(R.id.setting);
        spec1.setIndicator("Setting");

        tabs.addTab(spec1);

        //TabHost tabs = (TabHost)findViewById(R.id.TabHost01);
        //tabs.setup();
        TabHost.TabSpec spec2 = tabs.newTabSpec("tag2");
        spec2.setContent(R.id.layout1);
        spec2.setIndicator("Map");

        tabs.addTab(spec2);

        TabHost.TabSpec spec3 = tabs.newTabSpec("tag3");
        spec3.setContent(R.id.layout2);   
        spec3.setIndicator("Stastistics");

        tabs.addTab(spec3);

    }

    protected void disableGps() {   
        Intent intent=new Intent("android.location.GPS_ENABLED_CHANGE"); 
        intent.putExtra("enabled", false); 
        sendBroadcast(intent); 
    }

    protected void enableGps() 
    {
        Intent intent=new Intent("android.location.GPS_ENABLED_CHANGE"); 
        intent.putExtra("enabled", true); 
        sendBroadcast(intent); 
    }

    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    private GeoPoint getPoint(double lat, double lon) {
        return(new GeoPoint((int)(lat*1000000.0), (int)(lon*1000000.0)));
    }
    /*
     * This is an inner class .
     * for puting an image on specified location..
     */
    private class SitesOverlay extends ItemizedOverlay<OverlayItem> {
        private List<OverlayItem> items=new ArrayList<OverlayItem>();
        private Drawable marker=null;

        public SitesOverlay(Drawable marker) {
            super(marker);
            this.marker=marker;

            items.add(new OverlayItem(getPoint(34.0043, 71.5448),"PK", "PTCL Office Cantt"));
            items.add(new OverlayItem(getPoint(34.004124555, 71.4859698), "Lincoln Center", "Department of Computer Science"));
            items.add(new OverlayItem(getPoint(34.03484758, 71.54653569), "Carnegie Hall", "Where you go with practice, practice, practice"));
            items.add(new OverlayItem(getPoint(34.07492254, 71.5464754), "The Downtown Club", "Original home of the Heisman Trophy"));

            populate();
        }

        @Override
        protected OverlayItem createItem(int i) {
            return(items.get(i));
        }

        @Override
        public void draw(Canvas canvas, MapView mapView, boolean shadow) {
            super.draw(canvas, mapView, shadow);    
            boundCenterBottom(marker);
        }

        @Override
        protected boolean onTap(int i) {
            Toast.makeText(AndroidGPSApplicationActivity.this, items.get(i).getSnippet(),
                            Toast.LENGTH_SHORT).show(); 
            return(true);
        }

        @Override
        public int size() {
            return(items.size());
        }
    }

     private class MapOverlay extends Overlay
        {
            @Override
            public boolean onTouchEvent(MotionEvent event, MapView mapView)
            {

                //---when user lifts his finger---
                if (event.getAction() == 1) {
                    GeoPoint p = mapView.getProjection().fromPixels(
                        (int) event.getX(),
                        (int) event.getY());
                        Toast.makeText(getBaseContext(),
                            "Location: "+
                            p.getLatitudeE6() / 1E6 + "," +
                            p.getLongitudeE6() /1E6 ,
                            Toast.LENGTH_SHORT).show();
                        value= p.getLatitudeE6() / 1E6 ;                     
                        String str_value = Double.toString(value);
                        latitude.setText(str_value);
                }
                return false;
            }
        }
} 
```

**xml文件**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

    <TabHost
      android:id="@+id/TabHost01" 
      android:layout_width="wrap_content"
      android:layout_height="wrap_content">
    <TabWidget 
      android:id="@android:id/tabs"
      android:layout_width="wrap_content" 
      android:layout_height="wrap_content" />
    <FrameLayout 
      android:id="@android:id/tabcontent"
      android:layout_width="wrap_content" 
      android:layout_height="wrap_content" 
      android:paddingTop="90dp"     
        >
        <TextView 
          android:id="@+id/setting" 
          android:text="@string/setting_tab" 
          android:layout_width="wrap_content" 
          android:layout_height="wrap_content" />

        <RelativeLayout
            android:id="@+id/layout1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            >
    <com.google.android.maps.MapView
                android:id="@+id/mapview"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
                 android:apiKey="Api Key"
                 android:clickable="true"
                 />
   <ToggleButton 
                android:id="@+id/togglebutton"
                android:layout_width="50dp"
                android:layout_height="50dp"
                android:textOn="ON"
                android:textOff="OFF"
                android:layout_alignParentBottom="true"/>

    </RelativeLayout>

      <LinearLayout
            android:id="@+id/layout2"
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            >
      <TextView 
          android:id="@+id/latitude_lbl" 
          android:text="@string/latitude" 
          android:layout_width="wrap_content" 
          android:layout_height="wrap_content" /> 

      <TextView 
          android:id="@+id/latitude_value" 
          android:layout_width="wrap_content" 
          android:layout_height="wrap_content" />

      <TextView 
          android:id="@+id/longitude_lbl" 
          android:text="@string/longitude" 
          android:layout_width="wrap_content" 
          android:layout_height="wrap_content" /> 

          </LinearLayout>   

    </FrameLayout>
  </TabHost>
</LinearLayout> 
```

**清单文件**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="android.gps.welcome"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="4" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
         <uses-library android:name="com.google.android.maps"/>
        <activity
            android:name=".AndroidGPSApplicationActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
     <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission>
     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
     <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"></uses-permission>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:20:40.590

Check wheather you have set following line in the manifest

```
 <uses-library android:name="com.google.android.maps" /> 
```

# java - 在 Java EE 中共享数据库连接

> ID：14433825
> 
> 赞同：1
> 
> 时间：2013-01-21T07:04:51.947
> 
> 标签：java, connection

我正在使用 JSP 和 Servlet（IDE：Eclipse，数据库：Oracle10）开发一个 Web 应用程序。

我开发了返回 a 的 java 类，`static connection`我的整个 Web 应用程序都将使用该连接。

```
public class DBConnection 
{
    private static Connection con = null;

    static Connection getConnection(String str)
    {
        try
        {
            Class.forName("oracle.jdbc.driver.OracleDriver");
            con = DriverManager.getConnection("MyValuesHere");
            System.out.println("New instance of Connection is created for: "+str);
        }
        catch(ClassNotFoundException cnfe)
        {
            System.out.println("Error loading class!");
            cnfe.printStackTrace();
        }
        catch(SQLException sqle)
        {
            System.out.println("Error connecting to the database!");
            sqle.printStackTrace();
        }
        return con;
    }//getConnection()
}//class 
```

以上课程工作正常。然后我还有另外 4 个 java 类

1.  插入
2.  更新
3.  删除
4.  选择

来自数据库的数据`using the above connection`。因此，在这 4 个课程中，我获得了在我的`DBConnection`课程中创建的连接，并且这四个课程也运行良好。这四个类在我所有的 Servlet 中都用到了。

为了在这 4 个类中获得连接，我正在编写以下行：

```
private static Connection con = DBConnection.getConnection("UpdateQuery.java"); 
```

但问题是我想在所有四个类中共享相同的连接，但连接是在这 4 个类中单独创建的。那么我应该如何在这四个类中共享相同的连接呢？有更好的方法吗？如果我使用这种方法，Web 应用程序是否会因为共享整个应用程序的连接而出现任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:00:50.290

您正在（隐含地）尝试解决一项重要的任务。

这些事情通常由容器完成 - 从池中获取连接，然后将它们返回，重新连接等......

如果您使用功能齐全的应用程序服务器，您最好配置和使用数据源。

如果您的服务器不支持数据源，请不要将连接保存到私有字段中。例如，当您的连接丢失时会发生什么？您的私有变量将具有非工作连接。有没有恢复机制？

如果您在业务操作开始时获得它然后关闭它，您的代码将更加健壮。

或者尝试找到一个支持连接池的专业编写的库——它在处理连接池方面与经典容器几乎相同。

或者自己写，但这将是一个有很多问题的单独任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:13:41.710

看起来你想`Connection`变成一个单例，但后来忘记检查它是否已经被实例化了。`getConnection`您可以首先检查 if `con`is not null 并立即返回该实例。仅当`con`仍然为空时，才继续初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:13:15.393

您应该将创建的连接实例保存到 中的私有静态字段中`DBConnection`，并在调用 getConnection 时检查该字段是否为空，然后创建连接，然后返回它： `if (connection == null) { connection = createConnection(); } return connection;`

其中`connection`是 DBConnection 类的一个`private static Connection connection`字段。

但是我强烈建议**不要使用**这种方法，因为在并发线程之间共享连接会导致严重的问题。我建议使用[连接池](http://commons.apache.org/dbcp/index.html)

# ruby-on-rails - Moonshine 部署错误

> ID：14433826
> 
> 赞同：0
> 
> 时间：2013-01-21T07:04:53.233
> 
> 标签：ruby-on-rails, ubuntu, deployment, capistrano, rackspace-cloud

当我尝试使用 Moonshine 将我的 rails 应用程序部署到 Rackspace 时，我收到以下错误：

```
 * 2013-01-20 22:54:44 executing `app:symlinks:update'
  * 2013-01-20 22:54:44 executing `deploy:create_symlink'
    triggering before callbacks for `deploy:create_symlink'
  * 2013-01-20 22:54:44 executing `moonshine:apply'
  * executing "sudo -p 'sudo password: ' RAILS_ROOT=/srv/appname/releases/20130121065443 DEPLOY_STAGE= RAILS_ENV=production shadow_puppet  /srv/appname/releases/20130121065443/app/manifests/application_manifest.rb"
    servers: ["appname.com"]
    [appname.com] executing command
 ** [out :: appname.com] Uncaught exception: LoadError: cannot load such file -- /srv/appname/releases/20130121065443/app/manifests/application_manifest.rb
 ** [out :: appname.com] 
 ** [out :: appname.com] 
 ** [out :: appname.com] /usr/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
 ** [out :: appname.com] 
 ** [out :: appname.com] 
 ** [out :: appname.com] /usr/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
 ** [out :: appname.com] 
 ** [out :: appname.com] 
 ** [out :: appname.com] /usr/lib/ruby/gems/1.9.1/gems/shadow_puppet-0.6.2/bin/shadow_puppet:130:in `<top (required)>'
 ** [out :: appname.com] 
 ** [out :: appname.com] 
 ** [out :: appname.com] /usr/bin/shadow_puppet:19:in `load'
 ** [out :: appname.com] 
 ** [out :: appname.com] 
 ** [out :: appname.com] /usr/bin/shadow_puppet:19:in `<main>'
 ** [out :: appname.com] 
    command finished in 2569ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /srv/appname/releases/20130121065443; true"
    servers: ["appname.com"]
    [appname.com] executing command
    command finished in 364ms
failed: "sh -c 'sudo -p '\\''sudo password: '\\'' RAILS_ROOT=/srv/appname/releases/20130121065443 DEPLOY_STAGE= RAILS_ENV=production shadow_puppet  /srv/appname/releases/20130121065443/app/manifests/application_manifest.rb'" on appname.com 
```

我应该如何解决这个问题？如果您不知道如何修复它，还有哪些其他的宝石可以帮助我将我的应用程序部署到 Rackspace。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:40:18.177

我发现了这个问题。Capistrano 正在从 git 中提取源代码，而我忘记推送新代码。这意味着，application_manifest.rb 在服务器上不存在。推后，效果很好。

# android - 需要密码才能运行某些应用程序？

> ID：14433830
> 
> 赞同：3
> 
> 时间：2013-01-21T07:05:07.283
> 
> 标签：android, security, passwords

我想尝试并实现[此应用程序中提供的功能](http://droidlessons.com/how-to-password-protect-apps-on-android/)

也就是说，用户应该输入密码才能运行某些应用程序。我不确定该朝哪个方向前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:29:49.440

我认为必须有服务在后台运行。如果发现任何新活动开始然后检查它是否受密码保护，如果是，那么它将显示安全屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:41:36.363

[这个解决方案](https://stackoverflow.com/a/3448189/1484779)可以帮助你。

提取它：

**将活动上次暂停时的系统时间存储为长变量。**

```
 import android.app.Application;
    public class MyApplication extends Application {
        public long mLastPause;

        @Override
        public void onCreate() {
            super.onCreate();
            mLastPause = 0;
            Log.w("Application","Launch");
        }
    } 
```

**在每个 onPause 方法中，我都会将此值更新为当前时间。**

```
@Override
public void onPause() {
    super.onPause();
    ((MyApplication)this.getApplication()).mLastPause = System.currentTimeMillis();
} 
```

**并在每个 onResume 中，将其与当前时间进行比较。如果经过一定时间（当前为 5 秒），则会显示我的密码提示。**

```
@Override
public void onResume() {
    super.onResume();
    MyApplication app = ((MyApplication)act.getApplication());
    if (System.currentTimeMillis() - app.mLastPause > 5000) {
        // If more than 5 seconds since last pause, prompt for password
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:36:24.703

在库存设备上不可能。您能做的最好的事情是编写一个需要密码才能运行某些应用程序的自定义启动器。用户始终可以将启动器更改为库存启动器，因此作为一项安全功能并没有真正有用。如果您想阻止您的（年幼的）孩子访问您的 Gmail 等，可能会起作用。有一些技巧使它看起来可行，但没有什么是可靠的。

# jquery - Fiddler 可以显示错误信息吗？

> ID：14433832
> 
> 赞同：0
> 
> 时间：2013-01-21T07:05:14.207
> 
> 标签：jquery, cross-domain, fiddler, wcf-rest

Fiddler 如何显示与我在调试器中看到的不同的信息？

我在服务器端有*HelloWorld* RESTful 服务。当我从浏览器调用它时，一切正常。 ![在此处输入图像描述](../Images/303cdaace6ec9473c070d3e7d846a99d.png)

我可以在 Fiddler 中看到这一点。 ![在此处输入图像描述](../Images/eb9dd64416c1f95977a6fe888f60f7f8.png)

但后来我尝试使用*jquery.ajax*方法从 javascript 调用此服务，但出现了问题。 ![在此处输入图像描述](../Images/4e5277c046df3470b1c26dfb8506bbe2.png)

状态是“错误”，第二个参数不是很具有描述性。 ![在此处输入图像描述](../Images/f4c27f70526f1a1b8ed4f8920928a4d3.png)

起初我认为跨域请求有问题，但后来我在 Fiddler 中看到这个请求/响应一切正常。 ![在此处输入图像描述](../Images/136dd6afada009a27f7638a9a36c490d.png)

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:11:37.263

我会看看 JavaScript 控制台。你可能在那里有一个 JS 错误。

你说这是跨域请求。这个问题很可能是你被[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)阻止了。

HTTP 请求和响应运行良好，但出于安全原因，浏览器拒绝 JavaScript 访问数据。

您需要修改服务器，以便它[允许](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)将数据读取到您网站上的 JavaScript。

# mysql - MySQL在两个字母之间搜索

> ID：14433833
> 
> 赞同：3
> 
> 时间：2013-01-21T07:05:24.403
> 
> 标签：mysql, sql, select

我有一长串公司名称，但我只想要结果集只返回以字母 AE 开头的公司的结果。

那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T07:07:34.303

尝试使用`LIKE`

```
SELECT *
FROM   tableName
WHERE  CompanyName LIKE 'A%' OR
       CompanyName LIKE 'B%' OR
       CompanyName LIKE 'C%' OR
       CompanyName LIKE 'D%' OR
       CompanyName LIKE 'E%' 
```

或正则表达式

```
SELECT * 
FROM   tableName
WHERE  CompanyName REGEXP '^[A-E]'; 
```

*   [SQLFiddle Demo（*两个查询*）](http://www.sqlfiddle.com/#!2/c89f1/9)

其他）

*   [MySQL 正则表达式](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T07:10:19.153

您可以（也）使用简单的字符串比较来做到这一点；

```
SELECT *
FROM Companies 
WHERE CompanyName >= 'a'  
  AND CompanyName <  'f';  -- to be sure to get _all_ companies on 'E' 
```

[简单的 SQLfiddle](http://sqlfiddle.com/#!2/dc8db/1)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T07:21:04.177

Company names starting with `A`, `E` using `LEFT`. If you need ending with then you can use `RIGHT` as well.

```
SELECT * 
FROM   YOURTABLE
WHERE  LEFT(CompanyName,1) IN ('A', 'E')
; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-08T08:29:42.660

```
SELECT name FROM TABLE_NAME WHERE name BETWEEN 'a' AND 'e' 
```

或者

```
SELECT Name FROM Employees WHERE Name REGEXP '^[A-E].*$' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T07:09:44.277

```
SELECT * FROM mytable WHERE company_name < 'F'; 
```

# php - PHP 河豚混淆

> ID：14433843
> 
> 赞同：3
> 
> 时间：2013-01-21T07:06:19.713
> 
> 标签：php, hash

我一直在研究更好的程序来保护 php 应用程序中的密码。正式地，我会使用类似的东西（只是一个例子，不要开枪！）：

```
$salt = md5(rand() . md5(rand() . '$%E$%SDRT');
$password = md5('supersecret', $salt); 
```

然后我会为数据库中的每个密码生成不同的盐，以防止使用彩虹表。

虽然看起来大多数（明智的）人都在转向 bcrypt()，但在网上看。关于它是如何工作的，它为什么工作等有很多问题，但我不明白它是如何更安全的？请注意，我可能对这里的理解感到困惑

据我了解，当您使用 crypt($pass, $salt) 时，盐实际上可以作为 crypt 的指标，告诉它使用什么算法。根据 php 手册，您使用“$2a$07”，它告诉 crypt 在 log2 回合中使用河豚。然后它会吐出一个包含盐作为前缀的字符串。

手册中的示例：

```
Blowfish:     $2a$07$usesomesillystringfore2uDLvp1Ii2e./U9C8sBjqp8I90dH6hi 
```

对于所有密码，盐似乎也保持不变。我不明白这是如何安全的。黑客似乎更容易找到盐（甚至不需要从盐柱中拉出），并且开始时有一个信标指示使用的回合和算法。这怎么能更安全？我知道更多的轮次会对硬件造成更高的损失，使其可扩展并增加破解密码所需的时间（由于成本），但它也准确地表明了它是如何完成的。

此外，我喜欢自己编写尽可能多的应用程序，以便对工作原理有更高的了解，并且如果可能的话，我更愿意远离 openwall。我不喜欢依赖其他人的代码并反过来吸收他们的漏洞。我宁愿对自己的漏洞负责并自己修复它们。

还有一件事。如果增加轮数，这是否意味着当前密码散列将与数据库中的散列不匹配？您是否必须重置所有用户的密码，或者您是否在他们下次登录时慢慢将他们移向新的轮数？

正如我所说，这只是我的理解，所以可能只是我的理解混淆了。我不认为这是您可以“尝试并失败”的情况之一，因为如果您失败了，您可能会看到的不仅仅是一个损坏的应用程序......

我一直在阅读的内容：

[使用 PHP 的 crypt 的河豚盐的正确格式是什么？](https://stackoverflow.com/questions/2225644/what-is-the-correct-format-for-a-blowfish-salt-using-phps-crypt)
[PHP 手册 - Crypt](http://php.net/manual/en/function.crypt.php)
[Openwall phpass](http://www.openwall.com/phpass/)
[如何在 PHP 中使用 Blowfish 创建和存储密码哈希](https://stackoverflow.com/questions/4983697/how-to-create-and-store-password-hashes-with-blowfish-in-php)
[如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:16:38.673

据我了解，您的问题是“为什么使用可变盐进行散列更安全？”。

只有一件事：它总是暴力破解，如果盐是恒定的，那么只需一个暴力破解循环就可以“破解”所有密码。（如果哈希等于数据库中的一 - 我们知道用户密码）。

对于简单的 md5() 和 sha1() 哈希函数，还可以将生成的暴力密码哈希存储在数据库中（以备将来使用）。这种方法允许黑客在几秒钟内确定几乎所有的密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:28:35.320

> 对于所有密码，盐似乎也保持不变。我不明白这是如何安全的。

您需要稍微不同地使用 bcrypt。不要将真实密码作为密码参数传递。您可以在字符串的中间添加、附加或放入一些生成的“盐”字符串。然后将带有输出哈希的盐存储到您的存储中。

当用户输入他/她的密码然后获取盐时，对盐和 bcrypt() 再次执行相同的操作，并将结果与​​您存储的哈希值进行比较。

以这种方式使用盐会阻止使用@clover 提到的普通彩虹表。

更简单的解决方案通常是更好的解决方案。简单的 rand() 对于密码盐应该足够了。

# android - kindle fire 主键丢失

> ID：14433850
> 
> 赞同：0
> 
> 时间：2013-01-21T07:06:40.910
> 
> 标签：android, kindle-fire

当我点击我的编辑文本时，软键盘打开但找不到任何返回（输入）键。一个简单的解决方案是添加

```
 android:inputType="textMultiLine" 
```

所以最终它必须显示一个返回（输入）键。

它是一个错误吗？如何在不执行此类操作的情况下使返回键可见？

# ios - 如何在ios的settings.bundle中添加按钮

> ID：14433855
> 
> 赞同：0
> 
> 时间：2013-01-21T07:06:55.930
> 
> 标签：ios, objective-c, application-settings, settings.bundle

我在我的 iOS 应用程序中使用 settings.bundle，但问题是如何在该页面中添加按钮并处理该按钮。任何机构都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:16:58.300

这是不可能的。您无法在设置捆绑包中运行代码。所以没用。系统仅支持与您的应用程序中的值进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-17T19:27:49.313

您唯一可以做的就是包含一个选项列表。像 Netflix 这样的应用程序有一种“操作按钮”。他们实现了一个无线电控制（布尔值）来重置他们的选项。因此，当应用程序再次启动时，它会检查属性的值，如果单选设置为“是”，它会删除所有内容。

[苹果文档](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)

# actionscript-3 - 嵌入 swc 时未找到符号的定义

> ID：14433859
> 
> 赞同：0
> 
> 时间：2013-01-21T07:07:23.313
> 
> 标签：actionscript-3, flashdevelop, swc

当我从 swf 嵌入符号“Tile”时，它工作正常，当我尝试从 swc 嵌入相同的符号时，FlashDebugger 抛出此错误：

```
Error: definition for symbol 'Tile' not found
[Embed(source="../lib/assets.swc", symbol="Tile", mimeType="application/x-shockwave-flash")]
Error: Unable to transcode ../lib/assets.swc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:34:55.627

1.  为什么使用 swc [http://livedocs.adobe.com/flex/3/html/help.html?content=compilers_30.html](http://livedocs.adobe.com/flex/3/html/help.html?content=compilers_30.html)
2.  导入 swc 文件的示例：[Embedding/importing SWC at compile-time in ActionScript, without setting a library path](https://stackoverflow.com/questions/5284985/embedding-importing-swc-at-compile-time-in-actionscript-without-setting-a-libra)
3.  根据您对哪个更好的评论：[Flex 图形资产：SWF 还是 SWC？](https://stackoverflow.com/questions/164162/flex-graphic-assets-swf-or-swc)

# java - 如何创建不同模型的 JTable？

> ID：14433860
> 
> 赞同：5
> 
> 时间：2013-01-21T07:07:29.733
> 
> 标签：java, swing, jtable, tablecellrenderer

我想在我的系统上添加另一个设计/模型`JTable`。这是一个简单的设计，但对我（作为一个新手）来说，我很难设置这种桌子。我希望表格看起来像这样： ![最后一列加粗的表格设计](../Images/a5a7927a306731af2b494bccb3e59c25.png)

是否可以在 Java 中设计这样的表格？请分享您的任何想法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T09:30:07.867

有很多不同的方法可以实现这个结果......

![在此处输入图像描述](../Images/b77a6181669f5a36d7a431534d8a1202.png)

在这里，我用我自己的实现替换了标题，将类型的默认单元格渲染器设置为`Double`我自己的`TableCellRenderer`，并调整了表格的一些内置属性。

```
public class FancyTable {

    public static void main(String[] args) {
        new FancyTable();
    }

    public FancyTable() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JTable table = new JTable(new LoanModel());
                table.setTableHeader(new SingleColumnTableHeader());
                table.setFillsViewportHeight(true);
                table.setShowHorizontalLines(true);
                table.setShowVerticalLines(false);
                table.setGridColor(Color.LIGHT_GRAY);
                table.setDefaultRenderer(Double.class, new CurrencyRenderer());

                JScrollPane scrollPane = new JScrollPane(table);

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(scrollPane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class LoanModel extends AbstractTableModel {

        private List<Loan> loans;

        public LoanModel() {
            loans = new ArrayList<Loan>(25);
            loans.add(new Loan("Davies S.J", 2500000));
            loans.add(new Loan("Lucas M.M", 1700000));
            loans.add(new Loan("Smith R.B", 600000));
            loans.add(new Loan("Jones T.T", 435000));
            loans.add(new Loan("Brown R.B", 600000));
            loans.add(new Loan("Walls T.T", 435000));
            loans.add(new Loan("Healy R.B", 600000));
            loans.add(new Loan("Taylor T.T", 435000));
            loans.add(new Loan("Ginns R.B", 600000));
            loans.add(new Loan("Murphy H", 435000));
        }

        @Override
        public int getRowCount() {
            return loans.size();
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            Class clazz = String.class;
            switch (columnIndex) {
                case 1:
                    clazz = Double.class;
                    break;
            }
            return clazz;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            Object value = null;
            Loan loan = loans.get(rowIndex);
            switch (columnIndex) {
                case 0:
                    value = loan.getName();
                    break;
                case 1:
                    value= loan.getAmount();
                    break;
            }
            return value;
        }

    }

    public class Loan {

        private String name;
        private double amount;

        public Loan(String name, double amount) {
            this.name = name;
            this.amount = amount;
        }

        public String getName() {
            return name;
        }

        public double getAmount() {
            return amount;
        }

    }

    public class CurrencyRenderer extends DefaultTableCellRenderer {

        private Font boldFont;

        public CurrencyRenderer() {
            setHorizontalAlignment(JLabel.RIGHT);
            boldFont = getFont().deriveFont(Font.BOLD);
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {

            if (value instanceof Double) {
                value = NumberFormat.getCurrencyInstance().format(value);
            }

            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            setFont(boldFont);

            return this;
        }

    }

    public class SingleColumnTableHeader extends JTableHeader {

        private JLabel renderer;

        public SingleColumnTableHeader() {
            setBackground(Color.WHITE);
            renderer = new JLabel("Top Ten Loan Balances");
            renderer.setBorder(new EmptyBorder(4, 0, 4, 0));
        }

        @Override
        public Dimension getPreferredSize() {
            return renderer.getPreferredSize();
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            FontMetrics fm = g2d.getFontMetrics();

            Insets insets = getInsets();
            int width = getWidth() - (insets.left + insets.right);
            int height = getHeight() - (insets.top + insets.bottom);

            renderer.setBounds(insets.left, insets.top, width, height);
            renderer.paint(g2d);

            g2d.setColor(Color.LIGHT_GRAY);
            g2d.setStroke(new BasicStroke(2f, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));
            g2d.drawLine(insets.left, insets.top + height - 1, insets.left + width, insets.top + height - 1);

            g2d.dispose();
        }

    }

} 
```

您可以轻松地创建自己的自定义`JTable`并覆盖`configureEnclosingScrollPane`为表头设置自己的组件，但是，就个人而言，我认为这太过分了。

能够提供我自己的渲染器是一种更加灵活的方法，并且可以促进组件元素的重用，而不会产生紧密耦合的代码......

您可能会发现通读[如何使用表格很方便](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

**更新**

我突然想到，在 Guillaume 说了什么之后，您可以简单地将`JTable`s 标题设置为`null`. 然后，将表格添加到滚动窗格后，您可以简单地[`JScrollPane#setColumnHeaderView`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html#setColumnHeaderView%28java.awt.Component%29)将标题设置为类似`JLabel`.

实现你自己的会更容易`JTableHeader`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T07:33:57.443

覆盖 JTable 的 prepareRendere 方法。对于包含文本的第 1 列，使用一种字体，对于第 2 列，使用另一种字体。

![在此处输入图像描述](../Images/e5b5255c93bc15efaba80e68353632b5.png)

```
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Font;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.TableCellRenderer;

public class JTableExample {
public static void main(String[] args) {

    Object[] column = {"Column One", "Column Two"};
    Object[][] data = {{"One", "Two"}, {"Three", "Four"}, {"Five", "Five"}};

    JTable toDoTable = new JTable(data, column) {
        @Override
        public Component prepareRenderer(TableCellRenderer renderer, int rowIndex,
                int columnIndex) {
            if(columnIndex == 1) {
                setFont(new Font("Arial", Font.BOLD, 12));
            } else {
                setFont(new Font("Arial", Font.ITALIC, 12));
            }

            return super.prepareRenderer(renderer, rowIndex, columnIndex);
        }
    };
    JScrollPane jpane = new JScrollPane(toDoTable);
    JPanel panel = new JPanel();
    JFrame frame = new JFrame();
    frame.setSize(new Dimension(400, 100));
    frame.setTitle("JTable Font Setting Example");
    panel.add(jpane);
    frame.add(new JScrollPane(panel));
    frame.setVisible(true);
}
} 
```

**更新：**

正如**MadProgrammer**和**Guillaume Polet**所建议的那样。我使用`DefaultTableCellRenderer`（使用 Guillaume Polet 代码作为参考）修改了我的方法。

![在此处输入图像描述](../Images/3563e89a5dabf81c2d968875c303eddd.png)

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Font;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;

public class JTableExample {
public static void main(String[] args) {

    Object[] column = {"Column One", "Column Two"};
    Object[][] data = {{"One", "Two"}, {"Three", "Four"}, {"Five", "Five"}};

    JTable table = new JTable(data, column);

    table.getColumnModel().getColumn(1).setCellRenderer(new CustomTableCellRenderer());
    table.setShowGrid(false);
    table.setTableHeader(null);
    JLabel label = new JLabel("Top 10 by Loan Balance");
    label.setFont(label.getFont().deriveFont(15.0f));
    JScrollPane scroll = new JScrollPane(table);
    JFrame frame = new JFrame();
    frame.setSize(new Dimension(400, 100));
    frame.setTitle("JTable Font Setting Example");
    frame.add(label, BorderLayout.NORTH);
    frame.add(scroll, BorderLayout.CENTER);
    frame.setVisible(true);
}
}

class CustomTableCellRenderer extends DefaultTableCellRenderer {
    @Override
    public Component getTableCellRendererComponent(JTable table, Object aValue,
            boolean isSelected, boolean hasFocus, int rowIndex, int columnIndex) {
        Component component = super.getTableCellRendererComponent(table, aValue, isSelected, hasFocus, rowIndex, columnIndex);
        component.setFont(component.getFont().deriveFont(Font.BOLD));
        return component;
    }
} 
```

**PS：**

> table.setTableHeader(null): => 用于隐藏列使用。
> 
> DefaultTableCellRenderer: => 这将返回默认的表格单元格渲染器。所以用它来制作 column-1 字体样式。
> 
> table.setShowGrid(false); => 这将使 JTable 中的行不可见。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T10:04:40.743

还有另一种方法。使用适当的 CellRenderer 来实现各种样式并管理文本对齐。至于让 TableHeader 消失，只需将其设置`null`为`JTable`.

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Font;
import java.util.Random;
import java.util.Vector;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.DefaultTableCellRenderer;

public class TestTableHeader {

    public static class BoldTableCellRenderer extends DefaultTableCellRenderer {

        public BoldTableCellRenderer() {
            setHorizontalAlignment(RIGHT);
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            Component renderer = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            renderer.setFont(renderer.getFont().deriveFont(Font.BOLD));
            return renderer;
        }
    }

    protected void initUI() {
        Vector<Vector<Object>> datas = new Vector<Vector<Object>>();
        Vector<String> colNames = new Vector<String>();
        for (int i = 0; i < 2; i++) {
            colNames.add("Col-" + (i + 1));
        }
        for (int i = 0; i < 15; i++) {
            Vector<Object> data = new Vector<Object>();
            data.add("John Smith (" + (i + 1) + ")");
            data.add(new Random().nextInt(4000));
            datas.add(data);
        }

        table = new JTable(datas, colNames);
        table.setShowGrid(false);
        table.getColumnModel().getColumn(1).setCellRenderer(new BoldTableCellRenderer());
        table.setFillsViewportHeight(false);
        table.setTableHeader(null);
        table.setBorder(BorderFactory.createMatteBorder(1, 0, 1, 0, Color.GRAY));
        JLabel label = new JLabel("Top 10 by Loan Balance");
        label.setFont(label.getFont().deriveFont(15.0f));
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        scrollpane = new JScrollPane(table);
        scrollpane.setRowHeaderView(null);
        frame.add(label, BorderLayout.NORTH);
        frame.add(scrollpane, BorderLayout.CENTER);
        frame.setSize(300, 200);
        frame.setVisible(true);
    }

    private JTable table;
    private JScrollPane scrollpane;

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTableHeader().initUI();
            }
        });
    }

} 
```

# jquery - 将动态添加的 Dropdown 控件转换为 Dropkick 控件

> ID：14433867
> 
> 赞同：1
> 
> 时间：2013-01-21T07:08:18.633
> 
> 标签：jquery

当用户向下滚动页面时，我会动态地将下拉控件添加到网页中。使用阿贾克斯。

我不知道如何将动态添加的 DropDown 控件转换为[DRopKick](http://jamielottering.github.com/DropKick/) (Jquery DropKick) 控件

所有动态添加的下拉菜单都具有相同的名称

对于页面上已经存在的控件，Dropkick 正在按预期工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:19:15.960

添加新控件后，您需要调用

```
$('select[name="<your-select-name>"]').dropkick(); 
```

根据更新的评论，以下解决方案应该有效

```
$(txtVal).appendTo('#ContentPlaceHolder1_productList').filter('select[name="cbo_‌​products_listing"]').dropkick(); 
```

# oracle - 如何获取给定日期的月份

> ID：14433870
> 
> 赞同：2
> 
> 时间：2013-01-21T07:08:43.577
> 
> 标签：oracle, date

我只想得到给定日期的月份

前任。我的实体中有一个日期列表

```
01/02/2012
01/03/2012
03/01/2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T07:58:13.940

如果你想得到月份数，`01`那么试试这个

```
select to_char(date_val,'MM') from dual 
```

试试`Mon`这个

```
select to_char(date_val,'Mon') from dual 
```

试试`Month`这个

```
select to_char(date_val,'Month') from dual 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:16:53.497

```
select to_char(date_value,'MM') from dual;
select to_char(date_value,'Mon') from dual;
select to_char(date_value,'Month') from dual; 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T08:09:56.120

To_Char(): [http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions200.htm#SQLRF06129](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions200.htm#SQLRF06129) Date Formats for To_Char(): docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#i34510 Extract(): [http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions059.htm#SQLRF00639](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions059.htm#SQLRF00639)

# ruby-on-rails - jquery Data tables is throwing file not found error on require

> ID：14433872
> 
> 赞同：0
> 
> 时间：2013-01-21T07:08:49.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datatables

为了让数据表正常工作，我们需要`dataTables/src/demo_table_jui` 在 Application.css 中使用。现在我有一个自定义的 application_day.css。现在，每当加载 application_day.css 时，它都会在生产和开发服务器上抛出此错误：

```
ActionView::Template::Error (couldn't find file 'dataTables/src/demo_table_jui'
  (in /home/app/assets/stylesheets/application_day.css:20)): 
```

还有一件事，我在 group :assets for Data Tables 中使用这个 gem：

```
 gem 'jquery-datatables-rails', git: 'https://github.com/rweng/jquery-datatables-rails.git'
  gem 'jquery-ui-rails' 
```

这些是 application_day.css 中包含的文件：-

```
 *= require_self
 *= require style.css
 *= require stylesheet_day.css
 *= require table.css
 *= require table_style.css
 *= require table_jq.css
 *= require form.css
 *= require form1.css
 *= require jquery-ui-1.9.2.custom.min.css
 *= require dataTables/src/demo_table_jui
 *= require msn-form.css 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:39:42.330

按照您的链接 - [http://railscasts.com/episodes/340-datatables](http://railscasts.com/episodes/340-datatables)，需要考虑一些更改 -

```
1)  gem 'jquery-datatables-rails', github: 'rweng/jquery-datatables-rails' 
```

**注意**- 在上面，有`github`和没有`git`。完全那样做。

```
2) *= require jquery.ui.core
   *= require jquery.ui.theme
   *= require dataTables/src/demo_table_jui 
```

**注意**- 在您的问题中，自定义 CSS 中没有`core`和`theme`。按照它们出现的顺序放置它们。

此外，处理数据表确保您`application.js`再次按顺序执行 -

```
//= require jquery
//= require jquery-ui
//= require dataTables/jquery.dataTables 
```

# windows - 如何在笔记本电脑的 Windows 7 上检测电源按钮事件并拒绝它

> ID：14433874
> 
> 赞同：3
> 
> 时间：2013-01-21T07:08:58.850
> 
> 标签：windows

在 Windows XP 上，我可以在按下笔记本电脑的电源按钮时检测到事件。获得 APMQUERYSUSPEND 事件的条件是 [控制面板-> 电源选项-> 系统设置-> 当我按下电源按钮时-> 睡眠] 的选项必须更改为“睡眠”。

```
MainFrm::OnPowerBroadcast(WPARAM wParam, LPARAM lParam) 
```

{

```
 switch (wParam)

         {

                       case PBT_APMQUERYSUSPEND:

                       // Ask question whether to power off or not

                       // If not, return BROADCAST_QUERY_DENY

                       return BROADCAST_QUERY_DENY;

         } 
```

但是从 Windows 7 开始，我没有任何线索可以检测到该事件。基于 Windows 7，删除了 APMQUERYSUSPEND 事件。即使我尝试了 SetThreadExecutionState API 来阻止关闭，它也不起作用。 [http://msdn.microsoft.com/ko-kr/library/windows/desktop/aa372716(v=vs.85).aspx](http://msdn.microsoft.com/ko-kr/library/windows/desktop/aa372716(v=vs.85).aspx)

您知道按下电源按钮时捕捉事件的任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-22T23:58:17.450

根据 Microsoft 的文档，一旦启动睡眠事件，就无法再中断它。[这里](http://download.microsoft.com/download/5/b/9/5b97017b-e28a-4bae-ba48-174cf47d23cd/cpa075_wh06.ppt)有一个关于 Windows Vista/7 电源控制的内容非常丰富的演示文稿。还有一种方法可以捕获睡眠按钮事件。*我将在示例中使用 C# 语法*：

首先，`RegisterHotKey(this.Handle, 0, 0x4000, 0x5F)`从 user32.dll API 调用挂钩睡眠键。然后覆盖你的程序的`WndProc`方法*（取决于你使用的语言和环境，有不同的方法可以做到这一点）*并监听热键消息 312h。收到它后，立即`SetThreadExecutionState(EXECUTION_STATE.ES_AWAYMODE_REQUIRED | EXECUTION_STATE.ES_SYSTEM_REQUIRED | EXECUTION_STATE.ES_CONTINUOUS)` 从 kernel32.dll API 调用以防止 Windows 启动睡眠事件。一段时间后（如果您希望系统能够再次休眠），您可以调用`SetThreadExecutionState(EXECUTION_STATE.ES_CONTINUOUS)`.

请注意，`SetThreadExecutionState`如果已经启动了睡眠程序，则不会产生任何影响，这就是为什么上述对于电源按钮无法执行的原因，据我所知，它不能被钩住**（如果有人真的知道这样做的方法那个，请告诉我！）**。这也可能是为什么`SetThreadExecutionState`不适合你。

常数是：

```
 ES_CONTINUOUS = 0x80000000,
        ES_SYSTEM_REQUIRED = 1,
        ES_AWAYMODE_REQUIRED = 0x00000040 
```

# mysql - 编写一个简单的 MySQL 替换查询

> ID：14433877
> 
> 赞同：-3
> 
> 时间：2013-01-21T07:09:17.307
> 
> 标签：mysql, sql, select, replace

我有两张桌子，一张看起来像这样：

```
ID | Date ID | Data 
```

另一个看起来像这样：

```
Date ID | Date 
```

你能帮我构建一个基本上不需要第二个表的查询吗？我宁愿第一张桌子是：`ID | Date | Data`

如果 MySQL 查询无法做到这一点，是否有一个我应该编写的快速 PHP 脚本来执行此操作？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:15:46.110

您将需要第二张桌子，因为您想加入它们。正确的？

```
SELECT  a.ID, b.Date, a.Data
FROM    table1 a
        INNER JOIN table2 b
            ON a.DataID = b.DataID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T07:24:34.660

这都是关于数据库规范化的。如果您将这两个表保持原样，那么您的记录将减少冗余。但是当您消除第二个表时，日期字段将更频繁地重复。所以，我建议你同时拥有两张桌子，因为这是一种有效的做法。

查询可以以两种方式构建。对于两个表，您应该将连接查询用作：

```
SELECT f.ID, s.Date, f.Data
FROM table1 f
            INNER JOIN table2 s
            ON f.DateID=s.DateID 
```

如果您消除第二个表并让第一个表具有列**ID、日期、数据，**那么查询可能只是：

```
SELECT ID, Date, Data
FROM table1
           WHERE (filter conditions..) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T07:26:07.317

1）创建一个新表：

```
CREATE TABLE table3
(
id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
date DATE,
data TEXT,
PRIMARY KEY (id)
) 
```

2）将您从以前的表中请求的数据插入到新创建的表中：

```
INSERT INTO
table3 
SELECT 
table1.id, 
table1.data, 
table2.date 
FROM 
table1, table2 
WHERE 
table1.date_id = table2.date_id 
```

# android - 如何更改通知号码计数的颜色

> ID：14433881
> 
> 赞同：1
> 
> 时间：2013-01-21T07:09:35.293
> 
> 标签：android, colors, notifications

我正在开发一个应用程序，我在其中使用通知管理器向用户显示未接来电。

我成功地显示了通知，但我想更改通知编号计数的颜色。目前它是绿色的，我想将其更改为**蓝色**或**红色**。

我怎样才能做到这一点？可能吗？

请参考我的应用程序中的快照。 ![在此处输入图像描述](../Images/b86988d33b2ab23866b50f4f66e9f37c.png)

谢谢你。

# sql - 从 xml 列中检索属性值

> ID：14433882
> 
> 赞同：0
> 
> 时间：2013-01-21T07:09:40.110
> 
> 标签：sql, sql-server-2008

```
<storage xmlns="http://energy" created-on="2013-01-21T05:00:15Z">
<country>Italy</country>
<Points>
    <point>Callato;Cellino</point>
</Points>
    </storage> 
```

上面的数据是表中的一列（xmlcolumn），需要从上面单独检索创建的。当我使用下面的查询时，我得到了 null

```
 SELECT
 OutputXML.value('(storage/@created-on)[1]','date') 
  AS ProductType,*
FROM [DataOutput]; 
```

我在做什么错误，谢谢阿伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:47:38.820

您需要为查询指定命名空间：

```
declare @t table (a xml)
insert into @t(a) values ('<storage xmlns="http://energy" created-on="2013-01-21T05:00:15Z">
<country>Italy</country>
<Points>
    <point>Callato;Cellino</point>
</Points>
    </storage>')

 SELECT
 a.value('declare namespace x = "http://energy";
          (x:storage/@created-on)[1]','date') 
  AS ProductType,*
FROM @t; 
```

为了便于阅读，我将其分成两行。然而，没有必要这样做。

结果：

```
ProductType a
----------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
2013-01-21  <storage xmlns="http://energy" created-on="2013-01-21T05:00:15Z"><country>Italy</country><Points><point>Callato;Cellino</point></Points></storage> 
```

# c++ - 检查一个值是否在 if 语句的范围内

> ID：14433884
> 
> 赞同：1
> 
> 时间：2013-01-21T07:09:49.763
> 
> 标签：c++

我在下面做了：

```
if( '0' <= infix.at(i)<= '9'){
// some logic
} 
```

编译器警告我在操作中不安全地使用“bool”类型。我将其更改为以下内容：

```
if( '0' <= infix.at(i)&& infix.at(i) <= '9') 
```

现在它可以工作了。C ++中不允许第一个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T07:12:40.953

第一个版本的[评估如下](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)：

```
if( ( '0' <= infix.at(i) ) <= '9' ) 
```

这就是为什么您会收到警告`bool`-您最终会遇到`true/false <= '9'`没有意义的警告。

某些语言允许您链接比较运算符，但 C++ 不是其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:17:07.320

正如其他人所解释的那样，优先顺序将表达式分组`a <= b <= c`为`(a <= b) <= c`，并且评估的第一部分`a <= b`- 通常预期返回布尔真/假值。

当然，如果`a`和/或是`b`用户定义的类型，您可以创建一个自定义`operator<=`返回用户定义的对象而不是布尔值，并且它可以支持您想要的链接。（因此，Amber 的断言“某些语言允许您链接比较运算符，但 C++ 不是其中之一。”对于用户定义的类型来说是不正确的，但仍然是很好的建议 - 见下文）。您可以在运行时最轻松地进行链接（即通过返回一个对象，该对象保留`bool`指示先前比较的结​​果以及形成 lhs 的值以进行进一步的链接比较），但也可以使用模板表达式和获得有效的短路评估。

这很少是一个好主意，因为其他程序员不会期望您的代码以这种方式进行评估。这会让他们感到非常困惑，而且当你几个月后回来维护代码时，你很可能会感到困惑，并且很可能会导致错误。无论如何，您不能支持对非用户定义类型的这种排序，而且对如何在表达式中混合值有这样的限制通常是有问题的。无意冒犯，但如果您需要问这个问题，您可能还没有准备好尝试实施此问题或应对风险。

# jquery - 用 ajax 加载页面的内容替换整个页面

> ID：14433890
> 
> 赞同：5
> 
> 时间：2013-01-21T07:10:24.077
> 
> 标签：jquery, ajax

我正在使用 JQuery，并试图找到一种用 ajax 加载内容替换整个页面的方法。我找到了建议如何从加载页面执行此操作的答案，但如果可能的话，我想从加载页面执行此操作。

我有一个使用大量 ajax 调用的 webapp。问题是如果用户在这样的页面上并且徘徊了足够长的时间以触发会话超时，那么应用程序会使会话无效，并且下次用户与显示的页面交互时，系统会返回主页要求他们再次登录。当然 - 主页显示在他们上次查看的任何页面中，而不是替换它。有什么我可以在我的主页中放置的东西来确保它总是替换整个页面，而不是必须检查每个 ajax 调用以返回主页？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T07:14:31.013

我不确定你对这次会议的看法。但是，如果您只想使用 ajax 重新加载页面内容，这应该可以：

```
$.ajax({
 type:'post',
 data:{},
 url:'your url',
 dataType:'html',
 success:function(response){
   $('body').html(response);
 }
}); 
```

# form-designer - 带有选项卡和组的 HTML 表单设计器

> ID：14433895
> 
> 赞同：1
> 
> 时间：2013-01-21T07:10:45.353
> 
> 标签：form-designer

我目前正在研究使我能够设计 HTML 表单的组件。设计者必须支持拖放元素（文本框，按钮，...），可以将元素组合在一起并调整组的大小。我们可以用这个设计器创建标签表单。是否有任何组件（开源或商业）使我能够做到这一点？谢谢。

# cassandra - 如何使用 datastax cassandra 二进制文件启用 SimpleAuthenticator

> ID：14433899
> 
> 赞同：0
> 
> 时间：2013-01-21T07:11:28.277
> 
> 标签：cassandra

有没有办法为 Datastax Binary 启用 Simple Authenticator（用于只读访问）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:21:37.887

SimpleAuthenticator 已被移出主源代码树并进入示例部分（因为它不安全）。如果要启用它，则必须从源代码构建它。它不包含在任何二进制版本/包中。

# reporting-services - 地图控件上工具提示中的图形

> ID：14433903
> 
> 赞同：-1
> 
> 时间：2013-01-21T07:11:38.647
> 
> 标签：reporting-services, reporting-services-map

我创建了一个带有地图控件的 SSRS 报告。我对地图中的每个州都有一个工具提示。我想在工具提示中显示一个图表。

是否可以在工具提示中显示图表？如果是这样，请告诉我执行此操作的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:27:44.903

这在任何版本的 SSRS 中都是不可能的。工具提示仅限于文本。我将探索使用操作链接到另一个显示图表的报告。

# .net - Windows 服务启动然后停止

> ID：14433904
> 
> 赞同：2
> 
> 时间：2013-01-21T07:11:45.307
> 
> 标签：.net, windows-services

我创建了一个运行良好的 Windows 应用程序，然后我尝试将此应用程序作为 Windows 服务运行。启动服务后，出现如下错误 ![在此处输入图像描述](../Images/5aa4d3e2cd33ac84fd2a48b8f0ba85a6.png)

下面是我从 EventViewer\Application 得到的错误日志

**错误应用程序名称：MyApp.Client.exe，版本：1.0.0.0，时间戳：0x50fce240 错误模块名称：KERNELBASE.dll，版本：6.1.7600.16385，时间戳：0x4a5bdaae 异常代码：0xe0434352 错误偏移量：0x00009617 错误进程 id： 0x1a7c 错误应用程序启动时间：0x01cdf7a1dcc54dc3 错误应用程序路径：E:\Email Service\Mobile\MyService\Main\Source\Client\Service\Service1\bin\Release\MyApp.Client.exe 错误模块路径：C:\Windows\system32 \KERNELBASE.dll 报告 ID：2ef633e5-6395-11e2-8e41-e4115b2d2915**

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-28T17:13:31.570

这是一个非常模糊的错误。我可以从很多事情中得到结果，绝对不是代码错误。

*   Windows 补丁需要重新启动。sfc /scannow 在命令提示符下以管理员身份。
*   kernal.dll 应该正常存在于错误中提到的位置，否则以管理员身份在命令提示符下运行 regsvr32 KERNELBASE.dll。
*   重新启动您的服务器。
*   确保安装了正确的框架以及对您的配置的任何引用。
*   如果应该使用特定访问或权限运行，请更正服务用户。
*   确保您的应用程序配置设置为任何 CPU 以避免 32 位和 64 位不匹配。
*   确保没有任何系统服务卡在启动中，如果有任何简单的事情要做就是重新启动并验证或检查您的事件日志以找到特定问题

我们是由于服务用户，映射了错误的用户导致了问题。

问候， Saj

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-18T18:08:49.000

我知道这是一个老歌，但我遇到了这个问题，找不到任何有用的东西，所以我希望这对其他人有帮助！

这个问题与`sc create "YourServiceNameHere"`命令有关。使用此命令时，您可以提供参数`type`，提供错误的值可能会导致问题。

运行该`sc query "YourServiceNameHere"`命令时，返回的结果表明该服务在实际需要自己的共享进程时尝试使用共享进程运行。

我的解决方案是将我的命令从 更改`sc create "YourServiceNameHere" type= share`为`sc create "YourServiceNameHere"`。运行指定类型的服务创建命令后，更改 sc 查询命令的输出并显示它正在自己的进程中运行，并且服务成功启动并继续运行。

我真的希望这对某人有所帮助，这给我带来了很大的压力！

# ruby-on-rails - ArgumentError：序列未注册：电子邮件

> ID：14433907
> 
> 赞同：5
> 
> 时间：2013-01-21T07:12:09.120
> 
> 标签：ruby-on-rails, sequence, factory-bot

运行 rspec 时，我不断收到此错误：未注册序列：电子邮件。

但是，我确实在我的 factory.rb 文件中设置了它。有想法该怎么解决这个吗？该应用程序运行良好。

```
Failures:

  1) UsersController GET 'index' for signed-in-users should be successful
     Failure/Error: @users << Factory(:user, :email => Factory.next(:email))
     ArgumentError:
       Sequence not registered: email
     # ./spec/controllers/users_controller_spec.rb:28:in `block (5 levels) in <top (required)>'
     # ./spec/controllers/users_controller_spec.rb:27:in `times'
     # ./spec/controllers/users_controller_spec.rb:27:in `block (4 levels) in <top (required)>'

  2) UsersController GET 'index' for signed-in-users should have the right title
     Failure/Error: @users << Factory(:user, :email => Factory.next(:email))
     ArgumentError:
       Sequence not registered: email
     # ./spec/controllers/users_controller_spec.rb:28:in `block (5 levels) in <top (required)>'
     # ./spec/controllers/users_controller_spec.rb:27:in `times'
     # ./spec/controllers/users_controller_spec.rb:27:in `block (4 levels) in <top (required)>'

  3) UsersController GET 'index' for signed-in-users should have an element for each user
     Failure/Error: @users << Factory(:user, :email => Factory.next(:email))
     ArgumentError:
       Sequence not registered: email
     # ./spec/controllers/users_controller_spec.rb:28:in `block (5 levels) in <top (required)>'
     # ./spec/controllers/users_controller_spec.rb:27:in `times'
     # ./spec/controllers/users_controller_spec.rb:27:in `block (4 levels) in <top (required)>'

  4) UsersController GET 'index' for signed-in-users should paginate users
     Failure/Error: @users << Factory(:user, :email => Factory.next(:email))
     ArgumentError:
       Sequence not registered: email
     # ./spec/controllers/users_controller_spec.rb:28:in `block (5 levels) in <top (required)>'
     # ./spec/controllers/users_controller_spec.rb:27:in `times'
     # ./spec/controllers/users_controller_spec.rb:27:in `block (4 levels) in <top (required)>'

Finished in 2.88 seconds
80 examples, 4 failures 
```

工厂.rb：

```
Factory.define :user do |user|
    user.name "Pavan Katepalli"
    user.email "email@pavan.com"
    user.password "foobar"
    user.password_confirmation "foobar"
end

Factory.sequence :email do |n|
  "person-#{n}@example.com"
end 
```

users_controller_spec.rb：

```
require 'spec_helper'

describe UsersController do

    render_views

    describe "GET 'index'" do
        # book's way is on page 386 
        # I used the repo's way
        describe "for non-signed-in users" do
            it "should deny access" do
                get :index
                response.should redirect_to(signin_path)
                flash[:notice].should =~ /sign in/i
            end
        end

        describe "for signed-in-users" do

            before(:each) do
                @user = test_sign_in(Factory(:user))
                second = Factory(:user, :email => "another@example.com")
                third  = Factory(:user, :email => "another@example.net")

                @users = [@user, second, third]

                30.times do
                    @users << Factory(:user, :email => Factory.next(:email))
                end

            end

            it "should be successful" do
                get :index
                response.should be_success
            end

            it "should have the right title" do
                get :index
                response.should have_selector('title', :content => "All users")
            end

            it "should have an element for each user" do
                get :index
                @users[0..2].each do |user|
                #User.paginate(:page => 1).each do |user|
                    response.should have_selector('li', :content => user.name)
                end
            end

            it "should paginate users" do
                get :index
                response.should have_selector('div.pagination')
                response.should have_selector('span.disabled', :content => "Previous")
                #response.should have_selector('a', :href => "/users?page=2",
                #                                   :content => "2")
                #response.should have_selector('a', :href => "/users?page=2",
                #                                   :content => "Next")
            end
=begin
            it "should have delete links for admins" do
                @user.toggle!(:admin)
                other_user = User.all.second
                get :index
                response.should have_selector('a', :href => user_path(other_user),
                                                   :content => "delete")
            end

            it "should not have delete links for non-admins" do
                other_user = User.all.second
                get :index
                response.should_not have_selector('a', :href => user_path(other_user),
                                                       :content => "delete")
            end
=end
        end
    end

    describe "GET 'show'" do

        before(:each) do
          # used to be just Factory.build(:user)
          @user = Factory(:user)
        end

        it "should be successful" do
          get :show, :id => @user.id
          response.should be_success
        end

        it "should find the right user" do
          get :show, :id => @user.id

          # assigns(:user) returns the 
          # value of the instance variable @user
          assigns(:user).should == @user
        end

        it "should have the right title" do
          get :show, :id => @user.id
          response.should have_selector('title', :content => @user.name)
        end

        it "should have the user's name" do
          get :show, :id => @user.id
          response.should have_selector('h1', :content => @user.name)
        end

        it "should have a profile image" do
          get :show, :id => @user.id
          response.should have_selector('h1>img', :class => "gravatar")
        end
    end

    describe "GET 'new'" do

        it "should be successful" do
          get :new
          response.should be_success
        end

        it "should have the right title" do
          get :new
          response.should have_selector('title', :content => "Sign Up")
        end
    end

    describe "POST 'create'" do

        describe "failure" do

            before(:each) do
                @attr = { :name => "", :email => "", :password => "",
                      :password_confirmation => "" }
            end

            it "should not create a user" do
                lambda do
                    post :create, :user => @attr
                end.should_not change(User, :count)
            end

            it "should have the right title" do
                post :create, :user => @attr
                response.should have_selector('title', :content => "Sign up")
            end

            it "should render the 'new' page" do
                post :create, :user => @attr
                response.should render_template('new')
            end
        end

        describe "success" do

            before(:each) do
                @attr = { :name => "New User", :email => "user@example.com",
                      :password => "foobar", :password_confirmation => "foobar" }
            end

            it "should create a user" do
                lambda do
                    post :create, :user => @attr
                end.should change(User, :count).by(1)
            end

            it "should redirect to the user show page" do
                post :create, :user => @attr
                response.should redirect_to(user_path(assigns(:user)))
            end

            it "should have a welcome message" do
                post :create, :user => @attr
                flash[:success].should =~ /welcome to the sample app/i
            end

            it "should sign the user in" do
                post :create, :user => @attr
                controller.should be_signed_in
            end

        end
    end

    describe "GET 'edit'" do

        before(:each) do
            @user = Factory(:user)
            test_sign_in(@user)
        end

        it "should be successful" do
            get :edit, :id => @user
            response.should be_success
        end

        it "should have the right title" do
            get :edit, :id => @user
            response.should have_selector('title', :content => "Edit user")
        end

        it "should have a link to change the Gravatar" do
            get :edit, :id => @user
            gravatar_url = "http://gravatar.com/emails"
            response.should have_selector('a', :href => 'http://gravatar.com/emails',
                                             :content => "change")
        end
    end

    describe "PUT 'update'" do

        before(:each) do
            @user = Factory(:user)
            test_sign_in(@user)
        end

        describe "failure" do

            before(:each) do
                @attr = { :email => "", :name => "", :password => "",
                          :password_confirmation => "" }
            end

            it "should render the 'edit' page" do
                put :update, :id => @user, :user => @attr
                response.should render_template('edit')
            end

            it "should have the right title" do
                put :update, :id => @user, :user => @attr
                response.should have_selector('title', :content => "Edit user")
            end
        end

        describe "success" do

            before(:each) do
                @attr = { :name => "New Name", :email => "user@example.org",
                          :password => "barbaz", :password_confirmation => "barbaz" }
            end

            it "should change the user's attributes" do
                put :update, :id => @user, :user => @attr
                @user.reload
                @user.name.should  == @attr[:name]
                @user.email.should == @attr[:email]
                #@user.encrypted_password.should == assigns(:user).encrypted_password
            end

            it "should redirect to the user show page" do
                put :update, :id => @user, :user => @attr
                response.should redirect_to(user_path(@user))
            end

            it "should have a flash message" do
                put :update, :id => @user, :user => @attr
                flash[:success].should =~ /updated/
            end
        end
    end

    describe "authentication of edit/update actions" do

        before(:each) do
            @user = Factory(:user)
        end

        describe "for non-signed-in users" do

            it "should deny access to 'edit'" do
                get :edit, :id => @user
                response.should redirect_to(signin_path)
                #flash[:notice].should =~ /sign in/i
            end

            it "should deny access to 'update'" do
                put :update, :id => @user, :user => {}
                response.should redirect_to(signin_path)
            end
        end

        describe "for signed-in users" do

            before(:each) do
                wrong_user = Factory(:user, :email => "user@example.net")
                test_sign_in(wrong_user)
            end

            it "should require matching users for 'edit'" do
                get :edit, :id => @user
                response.should redirect_to(root_path)
            end

            it "should require matching users for 'update'" do
                put :update, :id => @user, :user => {}
                response.should redirect_to(root_path)
            end
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T07:35:33.807

将序列放在定义块中？

```
FactoryGirl.define do

  sequence :email { |n| "person-#{n}@example.com" }

  factory :user do
    name "Pavan Katepalli"
    password "foobar"
    password_confirmation "foobar"
    email { FactoryGirl.generate(:email) }
  end

end 
```

# java - 如何在 Linux 环境中使用 Java 发送邮件？

> ID：14433908
> 
> 赞同：1
> 
> 时间：2013-01-21T07:12:10.200
> 
> 标签：java, linux, jakarta-ee, jakarta-mail

我已经使用 Windows 中的 apache james 服务器使用 Java 成功发送了邮件。我一直在尝试在 Linux 中做同样的事情，但无法启动 james 服务器。我是 Linux 的新手。

发送邮件真的需要詹姆斯服务器吗？如果是这样，如何在 Linux 中启动 james 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:04:38.510

要在 java 中发送电子邮件，您可以使用 java 邮件 api：[http](http://www.oracle.com/technetwork/java/javamail/index.html)
://www.oracle.com/technetwork/java/javamail/index.html 有关使用它的信息，请参阅本教程：[http ://www.tutorialspoint.com /java/java_sending_email.htm](http://www.tutorialspoint.com/java/java_sending_email.htm)

他们在本地主机上使用邮件服务器，但我不建议这样做。如果您的 localhost 是具有正确 DNS 记录的服务器，则完全可以进行测试。如果您从 DNS 反向查找不起作用的 IP 发送电子邮件，则您的邮件很可能会被垃圾邮件过滤器阻止。

如果你想在 localhost 上安装一个邮件服务器，你可以从你的 linux 发行版中安装 exim、postfix、ssmtp 或任何其他 MTA。其中一个可能已经安装并正在运行。

我会使用其他一些邮件服务器，例如您用来发送电子邮件的那个。本教程中的这行代码配置了主机：

```
 // Setup mail server
  properties.setProperty("mail.smtp.host", host); 
```

# jquery - 如何在编辑期间自动填充 django 多选小部件中的多选字段？

> ID：14433909
> 
> 赞同：0
> 
> 时间：2013-01-21T07:12:12.853
> 
> 标签：jquery, django, django-admin

我想在我的应用程序中实现 django 多选小部件。它工作正常。但是我需要一些帮助来使用数据库中的值自动填充“to”选择字段。实际上我已经构建了所需数据的 jquery json 对象。

```
 $.each(sport_intrested_obj, function (sport_name, obj) {
    console.log(sport_name) //works fine
    console.log(obj['id']) // works fine
  $('#id_s_sports_assigned_to').append(
          $("<option></option>")
          .attr("value",obj['id'])
          .text(sport_name));
  }); 
```

“id_s_sports_assigned_to”是我要自动填充详细信息的下拉列表

# java - Java、iRpeort 和 JasperSoft - 没有为编译器设置报告：null

> ID：14433923
> 
> 赞同：0
> 
> 时间：2013-01-21T07:13:03.273
> 
> 标签：java, eclipse, jasper-reports, ireport

我正在研究教授留给课堂的这堆代码，这是一个 Java 程序，旨在利用 Oracle 数据库、提取数据并将它们整齐地编译成报告。

我对 Java 和报表不太熟悉（更熟悉 C# 和 Crystal Reports），因此，学习，但根据我的测试，有几个报表运行良好。然而，三人似乎一心想让我的日子变得不那么光明。

奇怪的是，*所有*报告在 Eclipse 环境中都能正常工作。使用安装程序部署后，会发出一个奇怪的错误：

**没有为语言设置报告编译器：null**

我不知道是什么原因造成的。早期尝试咨询我的朋友 Google 让我相信要么是版本不兼容，要么是缺少未包含的 jar 文件，或者同样难以理解。

其他两个报告在 Eclipse 环境中工作正常并且仅在某些部署中失败，都发出“AWT-EventQueue-0”AbstractMethodError，但由于这并不总是发生（与前一个问题相反，它发生在所有time)，我会从第一个问题开始，一次解决一个问题。

作为参考，以下是我*认为*重要的内容：

*   jasperreports-3.5.2.jar，位于*引用库中*
*   groovy-all.1.5.5.jar 也位于*引用的库中*
*   jasperreports-3.0.0.jar、jasperreports-3.5.2.jar 和 jasperreports-3.7.6.jar，位于*lib*
*   我相信这些报告是用 iReport 3.0.0 创建的

项目结构：项目名称是Goldilocks

*   金发姑娘：
    *   JRE 系统库
    *   引用的库
    *   库
    *   src（其中包含 .java 文件和类的文件夹位于此文件夹中）
    *   报告
        *   jasper（所有 .jrxml 和 .jasper 文件都在这个文件夹中）

使用的操作系统/软件：

*   Windows 7 和 Linux Ubuntu（开发系统）
*   Eclipse，Juno Release（开发软件；由于这个程序是较早制作的，我只是在研究它，实际的开发软件可能是较早的版本，Ganymede iirc）
*   Linux Ubuntu 和 Windows XP（目标系统）

我可以就导致**No report compiler set for language : null**错误的原因提供一些帮助吗？我该如何补救？

谢谢。

问候， Zack_Falcon

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:30:25.353

1.  不要一起使用 jasperreports-3.5.2.jar, jasperreports-3.0.0.jar, jasperreports-3.7.6.jar 只使用与你的 jrxml(jasper) 对应的一个
2.  在 iReport 中打开 yourReport.jrxml 并在报告的属性中设置语言 = java（如果此报告使用 java 为例）。

# asp.net-mvc - ASP.NET MVC / Azure 的缓存框架

> ID：14433924
> 
> 赞同：0
> 
> 时间：2013-01-21T07:13:04.613
> 
> 标签：asp.net-mvc, caching, azure, appfabric

我正在构建一个 ASP.NET MVC 应用程序，它可能托管在 Azure 中。应用程序的多个实例可能在 Azure 中运行。我们可能会也可能不会使用 Azure AppFabric 缓存。

我们如何构建缓存框架，以便：

1.  缓存在开发环境的内存中工作。
2.  在没有 AppFabric 缓存的情况下，缓存在 Azure 中（以某种方式）有效。
3.  缓存使用 AppFabric 缓存在 Azure 产品环境中工作。

以上所有内容都应该与配置文件中的一些开关一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:17:16.273

如果您使用云服务（Web/Worker 角色），您是否考虑过使用[Windows Azure 缓存](http://msdn.microsoft.com/nl-nl/library/windowsazure/hh914161.aspx)？除了它更快和免费（作为您的部署的一部分）这一事实之外，您还可以在本地开发中使用它（感谢模拟器），在 Windows Azure 中运行时，无论是在您的“测试”部署和生产部署中，无需额外成本或无需玩配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:21:37.303

看看这个： http: [//nuget.org/packages/Glav.CacheAdapter](http://nuget.org/packages/Glav.CacheAdapter)

一种通用缓存机制，可在内存、ASP.NET Web、AppFabric 和 memcached 缓存之间提供配置切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:17:07.343

为什么不只使用 ASP.NET 缓存？在 web.config 中，您可以在开发环境中将其设置为 InProc。在 Azure 中，您可以将其设置为 SQL 或其他一些共享提供程序。

# php - 如何处理 POST 表单

> ID：14433925
> 
> 赞同：0
> 
> 时间：2013-01-21T07:13:05.183
> 
> 标签：php, html

我有一个`POST`表格，里面当然有你需要提交的东西。当我提交它时，我通常将它们提交到另一个文件，例如`action.php`。现在这是我的问题：在提交文件并完成用户想要的所有操作之后，您通常如何处理这种情况？你重定向回上一页吗？如果是这样，您如何证明用户想要的操作已执行并且没有错误？更具体地看下面的代码：

```
if ($_POST['something']) {
$doeverything
if $doeverything 
{
what do you usually put here? how can I show a message here, in the same time, I am back to the previous page where I submitted my information in.
} 
```

重定向回来后如何分配错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:17:32.043

您可以使用 PHP 会话来执行此操作。当您完成工作时`action.php`，您将消息存储在会话中`$_SESSION['message'] = 'Completed'`，您可以重定向到上一页。在您提交表单的页面中，您可以使用会话（如 echo）显示消息`$_SESSION['message']`

另一种方法可能是使用`$_GET`超级全局变量。您可以使用 In previous page 重定向到上一页，`redirect_to('previous_page.php?success=yes').`您可以检查的值，`$_GET['success']`如果是，您可以回显“您的表单已成功提交”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T07:16:34.093

您应该让用户知道他们的信息是否已成功提交，然后将他们引导到适当的页面。

例如，如果我有一个表格要求用户写一个关于他们自己的简短简历，在他们提交之后我应该：

1.  告诉他们他们的简历已经更新，并且
2.  为他们提供指向相关页面的链接，例如返回他们的个人资料页面。

# android - 在具有恒定覆盖的视图之间滑动

> ID：14433926
> 
> 赞同：1
> 
> 时间：2013-01-21T07:13:06.470
> 
> 标签：android, xml, layout, overlay

我熟悉Android开发，但我有一段时间没有编码。我不熟悉使用 Fragments，所以我只是想获得一些快速的布局建议。

我正在创建一个应用程序，我想在不同的视图之间滑动，但在活动的底部也有一个恒定的覆盖。将有三种不同的视图，但我不想要标签（TabHost 等）。我只想有一个恒定的覆盖层，它将在顶部显示当前视图的名称，并在底部显示一个恒定的覆盖层，其中包含用户名和一个按钮。这三个视图将只是解析 JSON 数据。

我不需要详细说明如何执行此操作，但任何建议都会很棒！我只是离开安卓游戏太久了。

这是我正在尝试创建的快速示例图片： ![例子](../Images/338f98f35948695e43581cdbbbefeb6f.png)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:20:13.057

> I don't need to have a detailed description of how to do this, but any recommendations would be great! I just have been out of the Android game for too long.

Place the two overlay views in a `RelativeLayout`, one aligned to the top of the `RelativeLayout` and one aligned to the bottom of the `RelativeLayout`. For swiping the json based views use a `ViewPager`. I don't know if you want the two overlay views to be **on top** of the `ViewPager`'s content or the entire `ViewPager` content **between** the two overlays, depending on what you want you'll either place the `ViewPager` between the two previous view in the `RelativeLayout` or simply set if to fill the `RelativeLayout`(and be placed below them).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:31:29.140

为简单起见，添加一些 Internet 上可用的代码。

```
public class AwesomePagerActivity extends Activity {

private ViewPager awesomePager;
private static int NUM_AWESOME_VIEWS = 20;
private Context cxt;
private AwesomePagerAdapter awesomeAdapter;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_awesome_pager);
    cxt = this;

    awesomeAdapter = new AwesomePagerAdapter();
    awesomePager = (ViewPager) findViewById(R.id.awesomepager);
    awesomePager.setAdapter(awesomeAdapter);
}

private class AwesomePagerAdapter extends PagerAdapter {

    @Override
    public int getCount() {
        return NUM_AWESOME_VIEWS;
    }

    @Override
    public Object instantiateItem(ViewGroup collection, int position) {
        TextView text = new TextView(cxt);
        text.setTextSize(50);
                    text.setText("Text"+position);
        collection.addView(text, 0);

        return text;
    }

    @Override
    public void destroyItem(ViewGroup collection, int position, Object view) {
        collection.removeView((TextView) view);
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return (view == object);
    }

    @Override
    public void finishUpdate(ViewGroup arg0) {
    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(ViewGroup arg0) {
    }
            @Override
    public int getItemPosition(Object object) {
        // TODO Auto-generated method stub
        return POSITION_NONE;
    }
           }
         } 
```

您可以添加图像而不是创建新的 TextView。只需在要更改视图的 xml 中添加 ViewPager。无需创建片段，只需根据需要创建新视图（可以是任何图像、文本视图等）。

添加 xml 也是为了更好地理解。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<android.support.v4.view.ViewPager
android:layout_width="match_parent" 
android:layout_height="match_parent" 
android:id="@+id/awesomepager"/>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T00:04:13.990

我知道这有点晚了，但它可能对其他寻找答案的人有用。

另一种选择是使用一个`FrameLayout`托管您的 ViewPager 以及按钮/文本/您想要的任何其他内容。

这里有一个例子给你一个想法：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <!-- ViewPager for main screen -->
    <android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <Button
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:layout_gravity="bottom|center_horizontal"
        />

    <Button
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:layout_gravity="top|center_horizontal"
        />

</FrameLayout> 
```

**注意**：顺序很重要！首先定义的视图将位于所有其他视图的下方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T07:24:43.373

您需要像这样创建 PagerAdapter：

```
public class SamplePagerAdapter extends PagerAdapter{

List<View> pages = null;

public SamplePagerAdapter(List<View> pages){
    this.pages = pages;
}

@Override
public Object instantiateItem(View collection, int position){
    View v = pages.get(position);
    ((ViewPager) collection).addView(v, 0);
    return v;
}

@Override
public void destroyItem(View collection, int position, Object view){
    ((ViewPager) collection).removeView((View) view);
}

@Override
public int getCount(){
    return pages.size();
}

@Override
public boolean isViewFromObject(View view, Object object){
    return view.equals(object);
}

@Override
public void finishUpdate(View arg0){
}

@Override
public void restoreState(Parcelable arg0, ClassLoader arg1){
}

@Override
public Parcelable saveState(){
    return null;
}

@Override
public void startUpdate(View arg0){
} 
```

}

然后创建fragmnet并将这样的代码放置到onCreateView

```
LayoutInflater inflater = LayoutInflater.from(this);
    List<View> pages = new ArrayList<View>();

    View page = inflater.inflate(R.layout.page, null);
    TextView textView = (TextView) page.findViewById(R.id.text_view);
    textView.setText("page1");
    pages.add(page);

    page = inflater.inflate(R.layout.page, null);
    textView = (TextView) page.findViewById(R.id.text_view);
    textView.setText("page2");
    pages.add(page);

    page = inflater.inflate(R.layout.page, null);
    textView = (TextView) page.findViewById(R.id.text_view);
    textView.setText("page 3");
    pages.add(page);

    SamplePagerAdapter pagerAdapter = new SamplePagerAdapter(pages);
    ViewPager viewPager = new ViewPager(this);
    viewPager.setAdapter(pagerAdapter);
    viewPager.setCurrentItem(1);     

    setContentView(viewPager); 
```

并创建一些界面来监听片段上的 ViewChange，并将当前页面通过界面传递给主要活动。这就是所有人:)

# python - Deferred 有时不被调用（twisted python）

> ID：14433929
> 
> 赞同：0
> 
> 时间：2013-01-21T07:13:16.563
> 
> 标签：python, twisted, deferred

我已经完成了一个非常简单的 Web 服务，如下所示：

```
class UploadResource(Resource):

    def onSuccess(self, result):
        self.request.write("OK")

    def onError(self, result):
        self.request.write("Error")

    def render_POST(self, request):
        request.data.save_to_disk()
        d = request.mirror("http://mirror_replica/Upload")
        d.addCallbacks(self.onSuccess, self.onError)
        return server.NOT_DONE_YET 
```

方法`request.mirror()`返回一个延迟，它在 http 客户端请求完成后触发回调将数据发送到同一 Web 服务的另一个副本

当我在一些成功请求后对一个副本运行 /Upload 方法的简单压力测试时，我得到了读取超时客户端异常。对于 1000 个成功的请求，我有一个读取超时异常。经过一些调试后，我发现有时**onSuccess 回调从未调用过**，并且读取超时不是由重负载引起的。

所以，我重写了类代码：

```
class UploadResource(Resource):

    def render_POST(self, request):
        request.data.save_to_disk()
        d = request.mirror("http://mirror_replica/Upload")

        def onSuccess(result):
            request.write("OK")

        def onError(self, result):
            request.write("Error")

        d.addCallbacks(onSuccess, onError)
        return server.NOT_DONE_YET 
```

现在**`onSuccessCallback`总是被调用**并且读取超时消失了。

**问题是“为什么？”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:57:08.037

如果您`Deferred`没有被呼叫，那么有人没有呼叫它。这可能是一个错误，也可能只是请求需要很长时间。如果没有看到该`mirror`方法的代码，甚至都无法猜测。如果您可以生成一个[完整的、可运行的示例](http://sscce.org)，那将对诊断您的问题大有帮助。

# javascript - 用于初始化 Javascript 数组数组的嵌套 For 循环

> ID：14433934
> 
> 赞同：1
> 
> 时间：2013-01-21T07:13:42.087
> 
> 标签：javascript, arrays, loops, for-loop, nested

我的程序中有一个非常简单的部分有问题......数组'population'中的元素也是一个数组..每个'temp'数组有28个随机数被加载到数组population。我的问题是数组“人口”以某种方式保存了所有相同的数组，就像它被覆盖每个循环一样。我在这个非常简单的问题上花了这么多时间，这是某种错误吗？注释的“警报”用于检查人口的元素 0 和 1。并且不知何故，它真的被每个循环覆盖，所以人口数组中的每个临时元素都是一样的。请帮我..

```
var population[];
function init_population(){   
    temp = [];
    //Math.floor(Math.random()*8);
    for(i=0;i<10;i++){
        for(j=0;j<28;j++)
        temp[j] = Math.floor(Math.random()*8);
        population[i]= temp;
    //alert("population[0] = " +population[0] +" and population[1] = " +population[1]);
    }
}

init_population(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:16:54.690

您需要`temp`在内部循环中创建一个新数组，这样您就不会一遍又一遍地重用同一个数组：

```
var population = [];

function init_population() {   
    var temp, i, j;
    for(i=0; i<10; i++) {
        temp = [];
        for(j=0; j<28; j++) {
            temp[j] = Math.floor(Math.random()*8);
        }
        population[i] = temp;
    }
}

init_population(); 
```

* * *

由于将`temp`数组分配到`population`数组中只会对`temp`数组进行引用，因此当您`temp`一遍又一遍地使用相同的数组时，最终会在`temp`数组的每个索引处引用相同的`population`数组。相反，如果您`temp`在内部循环中创建一个新数组，那么数组中的每个`population`数组都会不同。

* * *

仅供参考，我还对您的代码进行了一些其他更正以正确声明变量`temp`，`i`并将`j`其作为局部变量，因此它们不是隐式全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:17:09.503

这是因为它是同一个数组。您创建它，`temp = []`然后将其分配给每个`population[i]`for i=0..9

# c# - 在 WPF 表单之间传递数据

> ID：14433935
> 
> 赞同：3
> 
> 时间：2013-01-21T07:13:49.103
> 
> 标签：c#, wpf, button

`form1`有一个`button btnInvoke`调用`form2`. `form2`包含 a`textbox`和 a `button btn2`。

用户必须输入数据`textbox`并按`btn2`。

`btn2`单击时`form2`已发送`textbox data`到`form1`。

我尝试通过构造函数，但我无法启动`form1`.

我该怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T08:03:47.347

您可以使用两种方法。第一个是使用 ShowDialog 和公共方法，然后测试 DialogResult 是否为真，然后从方法中读取值。

IE

```
if (newWindow.ShowDialog() == true)
            this.Title = newWindow.myText(); 
```

第二种方法是创建一个 CustomEvent 并像这样在创建窗口中订阅它。

**主窗口.xaml.cs**

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        Window1 newWindow = new Window1();
        newWindow.RaiseCustomEvent += new EventHandler<CustomEventArgs>(newWindow_RaiseCustomEvent);
        newWindow.Show();

    }

    void newWindow_RaiseCustomEvent(object sender, CustomEventArgs e)
    {
        this.Title = e.Message;
    }
} 
```

**Window1.xaml.cs**

```
public partial class Window1 : Window
{
    public event EventHandler<CustomEventArgs> RaiseCustomEvent;

    public Window1()
    {
        InitializeComponent();
    }
    public string myText()
    {
        return textBox1.Text;
    }
    private void button1_Click(object sender, RoutedEventArgs e)
    {

        RaiseCustomEvent(this, new CustomEventArgs(textBox1.Text));
    }
}
public class CustomEventArgs : EventArgs
{
    public CustomEventArgs(string s)
    {
        msg = s;
    }
    private string msg;
    public string Message
    {
        get { return msg; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:20:49.723

In your `form1` define a public property.

```
public string MyTextData { get; set; } 
```

In your `form2` on button click, get the instance of the `form1` and set it property to the TextBox value.

```
var frm1 = Application.Current.Windows["form1"] as Form1;
if(frm1 ! = null)
    frm1.MyTextData  = yourTextBox.Text; 
```

In your `Form1` you will get the text in your property `MyTextData`

Its better if you following the convention for naming the windows. Use `Window` instead of `Form` for naming your windows in WPF. Form is usually used with WinForm applications.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T07:52:41.570

这可能是矫枉过正，但在`EventAggregator`这里可能是一个不错的解决方案。它将允许您引发一个事件`form1`，然后可以从 订阅`form2`。

`EventAggregator`在[https://stackoverflow.com/questions/2343980/event-aggregator-implementation-sample-best-practices](https://stackoverflow.com/questions/2343980/event-aggregator-implementation-sample-best-practices)中有一些实现的细节和示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T08:09:39.677

Since you are working with the WPF, use [CommandBindings](http://www.codeproject.com/Articles/238657/How-to-use-Commands-in-WPF) and [Messaging](https://stackoverflow.com/questions/4502686/mvvm-messaging-or-events-or-what-other-option-out-therer). I also recommend you that you take a closser look at MVVM Frameworks, I prevere the [MVVM Light Toolkit](http://mvvmlight.codeplex.com/). There are a lot of HowTos for the framework, just ask google.

# vba - VBA:Lock and change color of excel cells

> ID：14433937
> 
> 赞同：0
> 
> 时间：2013-01-21T07:13:54.307
> 
> 标签：vba, excel, ms-word

Following is my vba code,where i`m trying to get data and assign it to a cell.Now,all I need to do is to lock these cells after filling. And there are many cells where I have to do this, all I got is 'qa' part is same in all the cell names I have to fill.So I have to check if 'qa' is part of the cell name,if yes then lock that complete cell and change the color.

```
ActiveWorkbook.Names("Book.aa.a.qa.qq.le.").RefersToRange = Doc.getAttribute("le")
ActiveWorkbook.Names("Book.bb.a.qa.qq.lf.").RefersToRange = Doc.getAttribute("lf")
ActiveWorkbook.Names("Book.cc.a.qa.qq.lg.").RefersToRange = Doc.getAttribute("lg")
ActiveWorkbook.Names("Book.dd.a.qa.qq.ll.").RefersToRange = Doc.getAttribute("ll") 
```

How to do this? Please suggest a function for this. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:14:55.183

I noticed that you had asked almost similar question earlier. The only different here that you are specifically asking if the name contains `qa`, you would have been able to fix that by now with the given details in that answer. Anyway, here I use `Like` operator on `IF` to do the check on the same code,

```
Dim strName As String, objName As Name, strID As String

Sheet1.Unprotect
For Each objName In ActiveWorkbook.Names
    strName = objName.Name
    If InStr(1, strName, "book", vbTextCompare) > 0 Then
        strID = Mid(strName, InStr(1, strName, ".", vbTextCompare) + 1, 1)
        With ActiveWorkbook.Names(strName).RefersToRange
            .Value = doc.getAttribute(strID)
            '--change here
            If strName Like "*qa*" Then
              .Interior.Color = vbRed
              .Locked = True
            End If
        End With
    End If
Next
Sheet1.Protect 
```

# iphone - 滚动表格视图更改单元格内容

> ID：14433940
> 
> 赞同：0
> 
> 时间：2013-01-21T07:14:22.987
> 
> 标签：iphone, xcode, uitableview

1.  我在同一个视图（ScrollView）中一个接一个地分别加载两个tableViews。但是当我尝试滚动第一个tableView时加载它们之后，它的单元格（第一个和最后一个）内容更改为第二个tableViews单元格（第一个和最后一个) 内容。不明白我哪里出错了？

这是我正在处理的代码：

```
- (void)viewDidLoad
{
      self.tableView1=[[UITableView alloc] initWithFrame:CGRectMake(10,10,310,250) style:UITableViewStylePlain];
        self.tableView1.delegate=self;
        self.tableView1.dataSource=self;
        self.tableView1.rowHeight=80;
        self.tableView1.scrollEnabled = YES;
        currenttableView=@"1";
        [testscroll addSubview:self.tableView1];
 [self performSelector:@selector(callWebserviceMethod) withObject:nil afterDelay:0];
}
-(void)callWebserviceMethod
{
  self.tableView2=[[UITableView alloc] initWithFrame:CGRectMake(10,self.tableView1.frame.origin.y+self.tableView1.frame.size.height+6,310,230) style:UITableViewStylePlain];
        self.tableView2.delegate=self;
        self.tableView2.dataSource=self;
        self.tableView2.rowHeight=80;
         currenttableView=@"2";
        self.tableView2.scrollEnabled = YES;
        [testscroll addSubview:self.tableView2];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier=@"Cell";

    UITableViewCell* cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier]autorelease];

    }
    cell.accessoryType= UITableViewCellAccessoryDetailDisclosureButton;
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    if(currenttableView==@"1")
    {

        cell.textLabel.text = [[filtered objectAtIndex:indexPath.row] objectForKey:@"CompanyName"] ;   //filtered is NSMutableArray
        cell.textLabel.tag=3;
        cell.textLabel.font=[UIFont boldSystemFontOfSize:12];

        UIButton *showDirections = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        showDirections.frame = CGRectMake(10.0f, 52.0f, 85.0f, 20.0f);
        [showDirections setTitle:@"Direction" forState:UIControlStateNormal];
        [showDirections setTag:indexPath.row];
        [showDirections.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
        showDirections.backgroundColor=[UIColor lightTextColor];
        [ showDirections setBackgroundImage:[UIImage imageNamed:@"background-button.png"] forState:UIControlStateNormal];
        showDirections.titleLabel.textColor=[UIColor whiteColor];

        [cell addSubview:showDirections];
        [showDirections addTarget:self action:@selector(showDirectionsfordC:)forControlEvents:UIControlEventTouchUpInside];

        return cell;

    }

     if(currenttableView==@"2")
    {

        cell.textLabel.text = [[places objectAtIndex:indexPath.row] objectForKey:@"name"] ;    //places is NSMutableArray
        cell.textLabel.lineBreakMode=UILineBreakModeWordWrap;
        cell.textLabel.numberOfLines=0;
        cell.textLabel.font=[UIFont boldSystemFontOfSize:12];
        cell.textLabel.tag=3;

        UIButton *showDirections = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        showDirections.frame = CGRectMake(10.0f, 52.0f, 85.0f, 20.0f);
        [showDirections setTitle:@"Direction" forState:UIControlStateNormal];
        [showDirections setTag:indexPath.row];
        [showDirections.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
        showDirections.backgroundColor=[UIColor lightTextColor];
        [ showDirections setBackgroundImage:[UIImage imageNamed:@"background-button.png"] forState:UIControlStateNormal];
        showDirections.titleLabel.textColor=[UIColor whiteColor];

        [cell addSubview:showDirections];
        [showDirections addTarget:self action:@selector(showDirections:)forControlEvents:UIControlEventTouchUpInside];

        NSString *vicinity1 = [[places objectAtIndex:indexPath.row]objectForKey:@"vicinity"];
        UILabel *vicinity = [[UILabel alloc]initWithFrame:CGRectMake(10, 45, 320, 10)];
        vicinity .font=[UIFont fontWithName:@"TimesNewRomanPS-BoldMT" size:12];
        [vicinity  setTextAlignment:UITextAlignmentLeft];
        vicinity.text=[NSString stringWithFormat:@"%@",vicinity1];

        vicinity.tag=4;
        [cell addSubview:vicinity ];
        vicinity.hidden=YES;
        [vicinity release];

        return cell;

    }

    } 
```

我要去哪里错了？

2.. 当 tableView2 为空时，ScrollView 仅加载 tableView1。然后当我尝试滚动 tableView1 时，我收到错误：`Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array'` 在 tableView2 的这一行

```
cell.textLabel.text = [[places objectAtIndex:indexPath.row] objectForKey:@"name"] ;//error 
```

我怎样才能让它继续下去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:25:04.287

与您的第一点一样，您需要`CellIdentifier`替换为

```
 NSString *CellIdentifier =[NSString stringWithFormat:@"%d",indexPath.row]; 
```

和

```
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier]; 
```

第二点错误说你已经`cell.textLabel.text`从没有任何数据或键的placesArray中设置`name`了任何索引你的Array是Nil，这就是你的应用程序在滚动时崩溃的原因

# input - html标签输入ID随着服务器重启而改变？

> ID：14433944
> 
> 赞同：1
> 
> 时间：2013-01-21T07:14:34.300
> 
> 标签：input

我正在使用输入标签的 id 元素，类型是 html 的文本。我指的是 id 来检查 html 页面中是否存在wheater 元素。我的问题是网络服务器/应用程序服务器是否重新启动或更改，它的 ID 是否会更改？

示例标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:21:56.670

不，id 改变的唯一方法是，如果你设置了某种方式让它这样做（启动时的随机 ID）。我不知道你为什么要这样做。

# google-sheets - ArrayFormula 连接中的过滤器（Google 电子表格）

> ID：14433945
> 
> 赞同：4
> 
> 时间：2013-01-21T07:14:38.277
> 
> 标签：google-sheets, formulas, array-formulas

我进行了长时间的搜索，但找不到我要找的东西。也许有人在那里可以提供帮助？

我的 Google 电子表格中有这个公式（我将在下面解释它的作用）：

```
=Join(" ",FILTER(Sheet1!B:B;Sheet1!A:A=A1)) 
```

在表 1 中有一个表格：A 列是名字（例如“James”），B 列是一些评论（例如“Headache”）。詹姆斯（或其他任何人）可能有多行，每行都有不同的评论（例如，詹姆斯有 2 行，一个说“头痛”，另一个说“膝盖疼痛”。）

在工作表 2 的 A 列中，我有一个出现在工作表 1 中的名称列表（使用 '=UNIQUE' 公式）。A1 说“詹姆斯”。在单元格 B1 中，我输入上述公式。

结果几乎正是我想要的。它将詹姆斯的所有评论合并到一个单元格中，每个评论之间有一个空格“”。因此，单元格 B1 中的结果是：“头痛膝痛”。

但是，我必须将此公式拖到下面的所有单元格中。有谁知道我怎样才能使它像我过去使用过的所有其他 ArrayFormulas 一样，公式会自动填充下面的所有单元格？我尝试将其设为数组公式，但没有成功。

我也一直在玩这个公式，它给了我相同的结果“头痛膝盖疼痛”，但该公式仍然不会复制到下面的单元格中。

```
=SUBSTITUTE(Arrayformula(concatenate(FILTER(Sheet1!B:B;Sheet1!A:A=A1)&" "; "|"));" |";"") 
```

如果有人知道如何实现这一点，我将非常感激 - 您的宝贵帮助将不胜感激。

感谢您的关注！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T21:35:38.250

逐行应用像 CONCATENATE 这样的聚合函数通常有点复杂。

`=ArrayFormula(TRIM(TRANSPOSE(SPLIT(CONCATENATE(REPT(TRANSPOSE(Sheet1!B:B&" ");A:A=TRANSPOSE(Sheet1!A:A))&REPT(" "&CHAR(9);TRANSPOSE(ROW(Sheet1!A:A))=ROWS(Sheet1!A:A)));CHAR(9)))))`

*（编辑：抱歉，我没有机会测试错误/错别字，如果您能确认它有效，将删除此行）*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-25T23:10:21.367

我知道这个问题太老了，但是**要在擦除一行时解决问题，你需要改成`A:A`这样`filter(A:A,A:A<>"")`**，

```
=ArrayFormula(TRIM(TRANSPOSE(SPLIT(CONCATENATE(REPT(TRANSPOSE(Sheet1!B:B&" ");A:A=TRANSPOSE(Sheet1!A:A))&REPT(" "&CHAR(9);TRANSPOSE(ROW(Sheet1!A:A))=ROWS(Sheet1!A:A)));CHAR(9))))) 
```

变成：

```
=ArrayFormula(TRIM(TRANSPOSE(SPLIT(CONCATENATE(REPT(TRANSPOSE(Sheet1!B:B&" ");filter(A:A,A:A<>"")=TRANSPOSE(Sheet1!A:A))&REPT(" "&CHAR(9);TRANSPOSE(ROW(Sheet1!A:A))=ROWS(Sheet1!A:A)));CHAR(9))))) 
```

# php - 我的 sql 查询使用 GROUP BY 函数获取中间行值

> ID：14433948
> 
> 赞同：5
> 
> 时间：2013-01-21T07:14:46.100
> 
> 标签：php, mysql, mysqli

我的数据库结构就像

```
Id     Price     Code
1      0.12      93
2      0.13      93
3      0.54      93
4      0.96      93
5      0.10      94
6      0.30      94
7      0.90      94
8      1.40      94
9      2.30      94 
```

我必须使用按代码分组来获取数据，并且我希望中间行作为输出。在上面的示例中，我希望输出为

```
Id     Price     Code
3      0.54      93
7      0.90      94 
```

以上是我想要的输出与中间行或在两个中间行的情况下具有最大价格值的行，例如行数为 4、6、8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:25:01.017

它可以通过一些技巧来完成。

```
SELECT id, 
       price, 
       code 
FROM   table1 
WHERE  id IN (SELECT Ceil(Avg(id)) AS `id` 
              FROM   table1 
              GROUP  BY code); 
```

[SQLFiddle](http://sqlfiddle.com/#!2/8de98/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:47:52.877

```
SELECT table1.* 
FROM table1
JOIN (
    SELECT SUBSTRING_INDEX(SUBSTRING_INDEX( GROUP_CONCAT(id ORDER BY id ASC), ',', CEIL(COUNT(*) / 2) ), ',', -1) AS id
    FROM table1
    GROUP BY CODE
) t USING(id) 
```

[http://sqlfiddle.com/#!2/fdc22/14](http://sqlfiddle.com/#!2/fdc22/14)

# iphone - 如何在 iOS6 中显示谷歌地图

> ID：14433949
> 
> 赞同：1
> 
> 时间：2013-01-21T07:14:47.023
> 
> 标签：iphone, ios, objective-c, google-maps, ios6

嗨，我是 iOS 编程的新手。我的要求是在 iOS6 中显示谷歌地图。这意味着它显示了整个世界地图。请检查附件图像以获得澄清。![在此处输入图像描述](../Images/c6745c199f86cf02fe9e70e754cad936.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:25:04.947

如果您想在 iOS 中显示地图，理想的起点是查看[位置感知编程指南](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/MapKit/MapKit.html)（Apple 的文档，您需要一个免费的开发人员帐户才能访问它。）这将向您展示如何使用 MapKit 框架。

请注意，从 iOS 6 开始，Apple 使用自己的地图后端而不是 Google 数据。如果你只是想显示一张地图，苹果的地图应该足够了。

如果您出于某种原因需要使用 Google 的数据专门显示地图，请查看他们的[iOS Maps SDK](https://developers.google.com/maps/documentation/ios/intro)。

这一切都假设您正在开发本机 Objective C 应用程序，而不是 Phonegap 样式或 Web 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:28:33.833

这是适用于 iOS 的 Google Maps SDK 网站 - [https://developers.google.com/maps/documentation/ios/](https://developers.google.com/maps/documentation/ios/) 但首先，您应该在此处获取 API 密钥 - [https://developers.google.com/maps/ios -使用权](https://developers.google.com/maps/ios-access)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:24:22.283

在 iOS 6.0 及更高版本中，您有一些选择：

*   使用`UIWebView`（谷歌地图渲染“引擎”不像以前那样存在）加载`maps.google.com`页面

*   [使用 Google Maps iOS SDK](https://developers.google.com/maps/documentation/ios/start)（**最佳选择**）

*   使用[MapBox](http://mapbox.com/mobile/)并使用与谷歌地图类似的地形渲染

使用官方的[Google Maps iOS SDK](https://developers.google.com/maps/documentation/ios/start)，您实际上可以将自己的地图添加到您的应用程序中，因此这是您的最佳选择。文档有关于如何设置的详细信息！

# qt - 如何根据窗口大小调整 QMainWindow 的内容

> ID：14433954
> 
> 赞同：3
> 
> 时间：2013-01-21T07:15:20.027
> 
> 标签：qt, qmainwindow

我有一个带有几个小部件的 QMainWIdow，其中一个是 QTableView。

主窗口可调整大小。

如何自动调整窗口内容、字体和所有内容的大小，即当窗口调整大小时，其内容也应该自动调整大小？

我会很感激帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:04:38.077

您应该将所有小部件放入布局中，当用户对 QMainWindow 的大小进行任何更改时，布局会自动调整 QMainWindow 内的所有小部件的大小，您可以通过 Qt Creator IDE 和 Coding 添加布局。

更新：

如果您在 Qt Creator 中添加布局，布局会自动在 moc 文件中编码，无需通过用户编码对其行为进行任何更改。

但是通过类构造函数中的编码：

```
QVBoxLayout *layout = new QVBoxLayout(parent);

layout->addWidget(widget1);   
layout->addWidget(widget2);   
layout->addWidget(widget3);   

this->setLayout(layout); 
```

但是如果要更改 QLabel 的字体，这是通过QMainWindow 中的**resizeEvent**来完成的，因此对于 MainWindow 大小的任何更改，都会触发**resizeEvent** ，因此您可以使用以下代码：

在**mainwindow.h**你声明**resizeEvent**：

```
protected:
    void resizeEvent(QResizeEvent* event); 
```

在**mainwindow.cpp**中实现**resizeEvent**：

```
void MainWindow::resizeEvent(QResizeEvent *event)
{
    MainWindow::resizeEvent(event);
    if(this)
    {
        // QLabel process
    }
} 
```

# c# - 如何对返回函数的字典进行单元测试？

> ID：14433960
> 
> 赞同：0
> 
> 时间：2013-01-21T07:15:36.277
> 
> 标签：c#, rhino-mocks

我的代码如下所示：

```
public class FileFormatLookup : Dictionary<string,Func<string>>
{
    private Workbook workbook;
    private MemoryStream memoryStream;

    public  FileFormatLookup(Workbook workbook, MemoryStream memoryStream)
    {
        this.workbook = workbook;
        this.memoryStream = memoryStream;
        Add();
    }

    private void Add()
    {
        base.Add("xls", () =>
                            {
                                workbook.Save(memoryStream, SaveFormat.Excel97To2003);
                                return "ms-excel";
                            });
    }
} 
```

我正在尝试编写如下测试：

```
class FileFormatLookupTest
{
    FileFormatLookup fileFormatLookup;
    private Workbook workbook;
    private MemoryStream memoryStream;

    [SetUp]
    public void SetUp()
    {
        fileFormatLookup = new FileFormatLookup(workbook, memoryStream);
        workbook = MockRepository.GenerateMock<Workbook>();
        memoryStream = MockRepository.GenerateMock<MemoryStream>();
    }

    [TearDown]
    public void TearDown()
    {
      workbook.VerifyAllExpectations();
    }

    [Test]
    public void ShouldHaveXlsKey()
    {
        var xlsResult = fileFormatLookup["xls"].Invoke();
        workbook.AssertWasCalled(x=>x.Save(memoryStream,SaveFormat.Excel97To2003));
     }
} 
```

这是在字典中测试函子的正确方法吗？它抛出此错误：

```
System.InvalidOperationException : No expectations were setup to be verified, ensure that the method call in the action is a virtual (C#) / overridable (VB.Net) method call 
```

如何测试返回函数的字典？是否可以？我可以断言返回的字符串值，但不能断言方法调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T07:24:52.203

您没有将模拟传递给正在测试的课程。

将设置更改为

```
[SetUp]
public void SetUp()
{
    workbook = MockRepository.GenerateMock<Workbook>();
    memoryStream = MockRepository.GenerateMock<MemoryStream>();
    fileFormatLookup = new FileFormatLookup(workbook, memoryStream);
} 
```

从错误消息来看，似乎需要设置期望，即调用您期望的模拟对象。在这种情况下`workbook.Save(...)`。

为此，`workbook.Save(...)`必须是虚拟的或在接口上。

* * *

**编辑：**在作为评论提供更多信息后。

如果`workbook.Save(...)`它不是虚拟的并且不在您的代码中，您必须走一条稍长的路线才能测试该对象。

创建您自己的`IWorkbook`实现该`Save()`方法的接口，然后创建一个`WorkbookWrapper`包含第 3 方`Workbook`类实例的类，并`IWorkbook`通过将调用转发到包装类来实现。

```
public interface IWorkbook
{
    void Save(...);
}

class WorkbookWrapper : IWorkbook
{
    private _workbook;

    public WorkbookWrapper(...)
    {
        _workbook = new Workbook(...);
    }

    public void Save(...)
    {
        _workbook.Save(...);
    }
} 
```

然后更改您的代码以`IWorkbook`取而代之：

```
private Workbook _workbook;

public FileFormatLookup(IWorkbook workbook, MemoryStream memoryStream)
{
    _workbook = workbook;
    _memoryStream = memoryStream;
    Add();
} 
```

然后，您可以对其他类使用相同的技术，例如`MemoryStream`.

# css - css3 边框和框阴影效果

> ID：14433961
> 
> 赞同：0
> 
> 时间：2013-01-21T07:15:37.277
> 
> 标签：css

我不知道怎么做，但我想制作一个边框，并使用 box-shadow 向该边框添加第二个较亮的图层，从而为整个事物增加深度，就像在这张图片中一样。

![](../Images/6738639405991618cbd5e339585a7564.png)

关于如何完成的任何建议？左边框是我想要实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:29:03.847

你可以尝试这样的事情，使用`box-shadow`：

```
body { background: #555; }
div {
    background: #666;
    border: 1px solid #393939;
    box-shadow: inset 0 0 1px #999;
    width: 200px;
    height: 150px;
    margin: 20px;
    border-radius: 4px;
} 
```

[http://jsfiddle.net/2n2RE/](http://jsfiddle.net/2n2RE/)

然后只需根据需要调整颜色值。您还可以更改模糊量`box-shadow`以实现不同的外观。

# c# - Linq to sql 行为 , 上下文 对象 , DB 关系

> ID：14433966
> 
> 赞同：1
> 
> 时间：2013-01-21T07:15:51.200
> 
> 标签：c#, linq-to-sql

我正在使用 linq to SQL ，我有两个问题。

这是我的 DBML 文件中的快照![在此处输入图像描述](../Images/ae587c63bdcd068f35774d186e2544b0.png)

第一个：- 在 WorkflowInstance 表中，当我调用 WFTypeID 属性或任何关系时，它给了我 int？字段不是对象，不像在 ApplicationForm 表中它工作正常。我检查了designer.cs文件，它继续定义它们 System.Data.Linq.Mapping.ColumnAttribute 而不是 System.Data.Linq.Mapping.AssociationAttribute 知道为什么某些表会发生这种情况而有些则不会？！

第二个问题：- 一些表有 1:N 关系和一些 1:1 关系。将关系显示为 EntityRef 或 EntitySet 的所有表。为什么它不给我一个对象。还是这是正常行为？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:51:59.650

1：LINQ-to-SQL 公开了双重 API：外键通常**以**原始形式**和**对象形式呈现。所以我完全希望`WFTypeID`成为一个`int?`或类似的人。有趣的问题是：还有`WFType`属性吗？如果没有，您可能需要检查*关联*属性。单击虚线，查看子/父属性，并检查基数。

2： {0|1}-* 关系中的**支持字段**是 是正常的`EntityRef<T>`，但是 - LINQ-to-SQL 生成的*公共*API 应该只是`T`; 例如：

```
[global::System.Data.Linq.Mapping.AssociationAttribute(Name="AssociationName", Storage="_User", ThisKey="UserId", OtherKey="Id", IsForeignKey=true)]
[global::System.Runtime.Serialization.DataMemberAttribute(Order=7, EmitDefaultValue=false)]
public User User
{
    get
    {
        if ((this.serializing 
                    && (this._User.HasLoadedOrAssignedValue == false)))
        {
            return null;
        }
        return this._User.Entity;
    }
    set
    {
        if ((this._User.Entity != value))
        {
            this.SendPropertyChanging();
            this._User.Entity = value;
            this.SendPropertyChanged("User");
        }
    }
} 
```

其中 member-name 来自关联的“父属性”>“名称”：

![在此处输入图像描述](../Images/56c5b44a80581a03c3cd2d13d0c9ea8f.png)

请注意，`_User`是`EntityRef<User>`，但 public 属性`User`是 type `User`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:43:05.790

第一个问题：WFTypeID 字段代表一个外键，我猜你的主键是整数；返回整数是正常的。

第二个问题：如果关系是1比1；您将获得一个 EntityRef 对象，该对象代表关系另一端的对象。如果关系是 1:N，另一方面，您将获得一个表示对象的 EntitySet。这是正常行为，在一对多关系中，一个实体将映射到“许多”实体，而不是单个对象。

# javascript - 使用ajax调用时如何实现next/back函数？

> ID：14433967
> 
> 赞同：1
> 
> 时间：2013-01-21T07:16:04.313
> 
> 标签：javascript, jquery, html

我正在一个显示交易记录列表（每页 10 条记录）的网站上工作。

该页面具有**分页**和**搜索**功能，允许用户查看特定的交易记录。（如日期范围，类型....最多10多个参数）

当用户单击任何内容（更改页面/搜索条件）时，将使用 ajax 调用来获取和显示事务而无需重新加载。

但是，假设用户单击下一页（ajax 调用）以查看 page2 并尝试单击浏览器后退按钮。该站点会将他重定向到另一个网页，而不是返回到 page1。

我知道`window.history.pushState`在 chrome/Firefox 中无需重新加载 html5 即可更改 url。但我必须**支持**像 IE7+/FF/Chrome/Safari 这样的旧浏览器。

有没有现有的解决方案来解决这个问题？谢谢。

* * *

**编辑**：我在这个中午尝试了 history.js。

// newUrl: "?para1=value1¶2=value2&....

```
history.pushState({data:"searchTransaction"}, document.title, newUrl); 
```

并且在 ajax 请求之后 url 发生了变化。我有一个问题是如何处理更改事件。我想绑定 back/next(user click) 事件并获取“newUrl”，然后将其解析回参数映射并再次执行 ajax 请求。如果可能的话，我想在 pushState 时存储整个参数数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:27:35.830

不幸的是，您无法捕捉到“后退/下一个”事件，因为它不存在，但您可以捕捉到*statechange*

```
// Bind to StateChange Event
History.Adapter.bind(window,'statechange',function(){ // Note: We are using statechange instead of popstate
    var State = History.getState(); // Note: We are using History.getState() instead of event.state
    History.log(State.data, State.title, State.url);
}); 
```

我通常做的是捕捉用户的点击，如果没有点击就触发了状态更改，我假设用户下一步或返回。

# asp.net-mvc - 剃刀视图中的多个剑道自动完成功能

> ID：14433968
> 
> 赞同：0
> 
> 时间：2013-01-21T07:16:06.297
> 
> 标签：asp.net-mvc, autocomplete, kendo-ui, partial-views

我想在部分视图中使用剑道自动完成功能，并且我在一个视图中有很多，因此我必须动态获取参数，有什么方法可以在 Data fanction 中获取元素 ID？我 $(this).val() 但它不起作用 :( ，我应该使用什么剂量？请帮助我 :( tihs 是我的代码：

```
@(Html.Kendo().AutoComplete()
.Name("Employee" + (string)Session["fileid"]) 
.Placeholder("Employee Name ...")
.Filter(FilterType.StartsWith)
.DataSource(source =>
{
    source.Read(read =>
                 {
        read.Action(
                        "GetEmployeeName",
                         "Proceeds")
                         .Data(
                      "function onAdditionalData() {return { text:$(this).val() };}");
          })
                     .ServerFiltering(true);
})
.Events(e => { e.Open("onOpen");})
.Animation(true)
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-24T14:29:04.783

如果您只需要控件的值而不关心控件本身，您可以这样做......

```
 function onAdditionalData(e) {
    return { text: e.filter.filters[0].value };
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T18:47:55.890

这是一种对我有用的方法...

```
function onAdditionalData(e) {
    return { text: e.filter.filters[0].value };
} 
```

此外，您可以更改控制器操作名称以添加字段的 ID...

```
read.Action("MyAction#" + id, "MyController").Data("onAdditionalData"); 
```

并以这种方式访问​​属性，允许您设置数据参数并在事件中使用它们：

```
function onAdditionalData(e) {
    var filterValue = e.filter.filters[0].value;
    var field = $(this.url.substring(this.url.indexOf('#')));
    return {
        text: filterValue,
        extradata1: field.data("extradata1"),
        extradata2: field.data("extradata2")
    };
} 
```

在 GET 到服务器期间，浏览器将删除 URL 中的哈希标记。

我使用这种方法来传递列表源枚举和各种其他参数来创建一个非常灵活的 AJAX 接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T07:48:06.803

感谢您的回复，我的视图上有许多自动完成控件，我只想为所有这些控件编写一个*read.Action("GetCountries", "Proceeds").Data("onAdditionalData")*函数，我必须得到此函数中每个选定的 AutoComplete 控件的 ID（用于获取用户输入的值并将其传递给指定的操作）。代码如下：

```
 @(Html.Kendo().AutoComplete()
 .Name("Employee" + (string)Session["fileid"]) 
 .Placeholder("Employee Name ...")
 .Filter(FilterType.StartsWith)
 .DataSource(source =>
  {
    source.Read(read =>
                 {
         read.Action(
                    "GetEmployeeName",
                     "Proceeds")
                     .Data("onAdditionalData");
      })
         .ServerFiltering(true);
  })
  .Animation(true)
 )

function onAdditionalData() {
var id = this.element.attr('id');//This line is my problem, because it does not
//work and I can not get the ID of the currently focused AutoComplete control.
id = '#' + id;
return {    text: $(id).val() };
} 
```

这是动作部分：

```
 [System.Web.Mvc.HttpGet]
    public System.Web.Mvc.JsonResult GetEmployeeName(string text)
    {
    return Json(/*SOMEVALUES*/, System.Web.Mvc.JsonRequestBehavior.AllowGet);
    } 
```

如果我不使用 .Data("onAdditionalData") 它将 null 作为参数发送给操作

# php - 任何可以加载超过 200000 条记录的 jquery/javascript 图

> ID：14433970
> 
> 赞同：-1
> 
> 时间：2013-01-21T07:16:10.463
> 
> 标签：php, javascript, jquery, graph

我必须显示产品及其受欢迎程度的区域图。但我在某些类别中有超过 5000 个，所以请让我知道他们是否有任何显示这些记录集的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:23:43.967

在制作图形数据之前，您不能对数据进行一些平均/其他一些处理吗？

# ios - 将 ECSlidingViewController 与 TableView 一起使用

> ID：14433971
> 
> 赞同：3
> 
> 时间：2013-01-21T07:16:21.390
> 
> 标签：ios, objective-c, cocoa-touch, ecslidingviewcontroller

我在我的应用程序中使用[ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)，它包含的拥有`GestureRecognizer`看起来像：

```
[self.view addGestureRecognizer:self.slidingViewController.panGesture]; 
```

它阻止了 TableView 的滚动。当我删除该行滚动工作正常。我的方法有什么问题？

注意：`TableView`是导航控制器的一部分。我正在使用**StoryBoards**。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T03:24:10.217

您需要将 添加`UIGestureRecognizer`到 的视图，而`UINavigationController`不是`UITableView`.

一种方法是创建一个`UINavigationController`子类来处理手势识别器的创建和 ECSlidingViewController 的 underLeft（或 underRight）视图控制器的实例化：

```
// MyNavigationController.h
@interface MyNavigationController : UINavigationController

@end

// MyNavigationController.m
@implementation MyNavigationController

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if (![self.slidingViewController.underLeftViewController isKindOfClass:[MyLeftMenuViewController class]]) {
        self.slidingViewController.underLeftViewController  = [self.storyboard instantiateViewControllerWithIdentifier:@"MenuViewController"];
    }

    [self.view addGestureRecognizer:self.slidingViewController.panGesture];
}

@end 
```

打开 Storyboard Editor，选择导航控制器并将 Identity Inspector 的 Custom Class 字段设置为`MyNavigationController`（而不是默认值`UINavigationController`）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-05T15:29:33.817

我尝试了您建议的方法，但是在 UINavigationController 的子类中插入手势识别器不起作用。奇怪的是，把理论上等价的

```
[self.navigationController.view addGestureRecognizer:self.slidingViewController.panGesture]; 
```

在 TableviewController`viewWillAppear:`方法中可以代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T10:24:54.867

尝试

```
[self.parentView.view addGestureRecognizer:self.slidingViewController.panGesture]; 
```

在 viewWillAppear 上的 TableViewController

# facebook - 部署在 Cloud Foundry 上的 Grails Facebook 登录不起作用

> ID：14433975
> 
> 赞同：0
> 
> 时间：2013-01-21T07:16:36.847
> 
> 标签：facebook, grails, spring-security, cloud-foundry

我已经集成了 grails 应用程序，并且重定向与 facebook 插件配合得很好。我在 Cloud Foundry 上部署了我的 grails 应用程序，facebook 重定向不起作用。http 流量显示在重定向到我的网站时没有设置 jSessionId。而是设置了一个 SessionProxyFilter_SessionId cookie。任何人都可以请帮助如何解决这个问题并使其发挥作用吗？谢谢！

* * *

## 更新

我在日志中发现了这个错误，看起来它可能是我与 grails spring security + Facebook 相关联的配置。仅当我部署到 Cloud Foundry 时才会发生这种情况，而不是在 localhost 上。我在 Facebook 开发人员 a/c 上的配置是正确的 - 具有正确的网站 URL。有人可以阐明一下吗？

* * *

错误 databasesession.GormPersisterService - com.the6hours.grails.springsecurity.facebook.FacebookAccessToken java.io.NotSerializableException: com.the6hours.grails.springsecurity.facebook.FacebookAccessToken at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164) at java .io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518) 在 java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483) 在 java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400) 在 java.io.ObjectOutputStream。 writeObject0(ObjectOutputStream.java:1158) 在 java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518) 在 java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483) 在 java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java ：1400) 在 java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158) 在 java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330) 在 grails.plugin.databasesession.PersistentSessionAttributeValue.setValue(PersistentSessionAttributeValue.groovy:28) 在grails.plugin.databasesession.GormPersisterService.setAttribute(GormPersisterService.groovy:76) 在 grails.plugin.databasesession.SessionProxy.setAttribute(SessionProxy.java:98) 在 org.grails.jaxrs.web.JaxrsFilter.doFilterInternal(JaxrsFilter.java: 46) 在 grails.plugin.databasesession.SessionProxyFilter.doFilterInternal(SessionProxyFilter.java:51) 在 java.lang.Thread.run(Thread.java:662)plugin.databasesession.PersistentSessionAttributeValue.setValue(PersistentSessionAttributeValue.groovy:28) 在 grails.plugin.databasesession.GormPersisterService.setAttribute(GormPersisterService.groovy:76) 在 grails.plugin.databasesession.SessionProxy.setAttribute(SessionProxy.java:98) 在 org .grails.jaxrs.web.JaxrsFilter.doFilterInternal(JaxrsFilter.java:46) 在 grails.plugin.databasesession.SessionProxyFilter.doFilterInternal(SessionProxyFilter.java:51) 在 java.lang.Thread.run(Thread.java:662)plugin.databasesession.PersistentSessionAttributeValue.setValue(PersistentSessionAttributeValue.groovy:28) 在 grails.plugin.databasesession.GormPersisterService.setAttribute(GormPersisterService.groovy:76) 在 grails.plugin.databasesession.SessionProxy.setAttribute(SessionProxy.java:98) 在 org .grails.jaxrs.web.JaxrsFilter.doFilterInternal(JaxrsFilter.java:46) 在 grails.plugin.databasesession.SessionProxyFilter.doFilterInternal(SessionProxyFilter.java:51) 在 java.lang.Thread.run(Thread.java:662)doFilterInternal(JaxrsFilter.java:46) 在 grails.plugin.databasesession.SessionProxyFilter.doFilterInternal(SessionProxyFilter.java:51) 在 java.lang.Thread.run(Thread.java:662)doFilterInternal(JaxrsFilter.java:46) 在 grails.plugin.databasesession.SessionProxyFilter.doFilterInternal(SessionProxyFilter.java:51) 在 java.lang.Thread.run(Thread.java:662)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:36:08.173

终于解决了 - 在 config.groovy 中执行此操作

grails.plugin.databasesession.enabled = false

# java - Java继承；从可变类型扩展

> ID：14433977
> 
> 赞同：1
> 
> 时间：2013-01-21T07:16:52.610
> 
> 标签：java, oop

我可以创建一个父类是动态的子类吗？例如; 在`class A extends B`代码上，我可以`B`根据条件更改吗？如果我可以从方法中返回它，该方法的返回类型是什么？我的意思是`class A extends getClassAccToCondition()`返回类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:34:40.857

正如其他答案已经说过的那样，这是不可能的。

对于此类问题，您可以使用工厂模式。如果您有这样的类层次结构：

```
class SuperType { ... }
class SubType1 extends SuperType {...}
class SubType2 extends SuperType {...} 
```

你可以有这样的工厂：

```
class Factory {
  public static SuperType create (Condition cond) {
    if(cond.matchForType1())
      return new SubType1();
    else
      return new SubType2();
  }
} 
```

您可以通过调用此方法`Factory.create(<condition that match for the required type>)`。

如果你搜索“工厂模式”+“java”，你会发现很多更好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:20:53.313

不，您要扩展的类必须明确说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T07:54:19.153

从技术上讲，它不可能在 java 中实现这一点。但是，我想尝试使用多态性和某种工厂方法模式来解决实际的业务问题。不确定，如果这对您有帮助，但在 java 中无法实现不同的父级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T08:33:50.027

您不能定义在编译时不是静态类型的类。但是，您可以在运行时生成类，看看[javassist](http://www.csg.is.titech.ac.jp/~chiba/javassist/)。话虽如此，代码生成并不是唯一的选择。如果您不需要动态*超类*而只需要一个*接口*，则可以使用[动态代理](http://docs.oracle.com/javase/1.4.2/docs/guide/reflection/proxy.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T10:19:55.423

我决定使用一种类似工厂模式的简单多态变体的方法。我认为这对我有用。感谢您的回答。

```
public class Main {
    public static I getClassBelongToCondition(boolean Condition) {
        if (Condition) {
            return new A();
        } else {
            return new C();
        }
    }

}

interface I {
}

class A extends B implements I {
}

class C extends D implements I {
}

class B {
}

class D {
} 
```

# java - 静态块被调用两次，可能是多个类加载器？

> ID：14433978
> 
> 赞同：3
> 
> 时间：2013-01-21T07:16:52.907
> 
> 标签：java, jakarta-ee, weblogic, ejb-3.0, classloader

我有一个 MDB EJB，里面有静态块。我使用静态块在应用程序第一次运行时（即部署时）只初始化一些组件一次。MDB EJB 部署在除 Admin_Server 之外的单独服务器 (My_Server) 上。

问题是静态块被调用了两次！

*   **第一次：**就在部署 MDB EJB（标记到 My_Server）之后。
*   **第二次：**在 JMS 队列（与 MDB 关联）收到消息之后。

另外，我打印了服务器名称和 pid，它们在两者中都是相同的：

```
System.out.println("server name: " + System.getProperty("weblogic.Name"));
System.out.println("pid: " + ManagementFactory.getRuntimeMXBean().getName().split("@")[0]); 
```

我还注意到一些奇怪的行为。基本上，我附加了一个 Shutdown Hook（从静态块内部）在应用程序关闭时向我发送电子邮件。

*   一旦我关闭 My_Server，我就会收到通知。
*   关闭 Admin_Server 后，我也会收到通知。

我该如何解决这个问题？

* * *

一些额外的信息：

```
Weblogic version: 10.3.0
EJB version: 3.0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T07:18:12.653

只有当您有多个类加载器时才会发生这种情况。我不会在 EJB 中使用静态初始化程序，依赖于 EJB 生命周期挂钩或将初始化程序导出到非托管类中。

EJB 3.1 添加了 @Singleton 和 @Startup 之类的注解，但不幸的是，在 3.0 中，您不得不为这些保证使用基于提供程序的解决方案。

管理员与常规服务器行为相当普遍，因为 WebLogic 通常部署到两者。请参阅[此页面](http://docs.oracle.com/cd/E15051_01/wls/docs103/deployment/understanding.html#wp1050830)了解更多信息。

对于 Weblogic 关闭挂钩，请查看[此文档页面](http://docs.oracle.com/cd/E13222_01/wls/docs81/ConsoleHelp/startup_shutdown.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T07:32:06.947

是的，您可以多次执行静态初始化程序的唯一方法是，如果您实际上已经加载了该类的两个不同副本。只有当你有两个不同的类加载器都加载类时，才会发生这种情况。

防止这种情况的方法是安排有问题的类由两个类加载器的共同祖先类加载器加载。我不知道您将如何使用 Weblogic 执行此操作，但对于 Tomcat，您会将相关 JAR 文件放入指定的公共库目录中，该目录由容器中运行的所有 webapps 共享。

# mysql - 返回模型和加入模型的哈希值在 Rails 中分组

> ID：14433983
> 
> 赞同：1
> 
> 时间：2013-01-21T07:17:05.323
> 
> 标签：mysql, ruby-on-rails-3, activerecord, arel

假设我有两个模型，客户和订单。订单有一个状态栏。我试图避免 N+1 问题，因此我希望一个查询返回带有添加“列”的 Customer 模型，该“列”是每个订单状态的哈希，计数属于该订单。

```
class Customer < ActiveRecord::Base
  has_many :orders
end

class Order < ActiveRecord::Base
  belongs_to :customer
end 
```

预期产出

```
#<Customer:0x007fb64596ba38> {
    :id => 1,
    :first_name => 'Bob',
    :email => 'test@test.com',
    :order_statuses_count: {shipped: 1, returned: 1, :processing: 0}           
} 
```

如果有人有比我预期的输出更好的主意，请告诉我。

# ios - 核心数据中的触发器

> ID：14433984
> 
> 赞同：4
> 
> 时间：2013-01-21T07:17:09.027
> 
> 标签：ios, sql, database, core-data, triggers

如何在我的应用程序中为核心数据模型创建触发器或等效项？我的核心数据模型有很多实体，这些实体没有任何关系。每当添加新数据或在核心数据中修改数据时，我都想触发触发器。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:20:41.073

在这种情况下，您可以使用 NSFetchResultController。[您可以在本](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)教程中找到更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:35:49.483

您应该使用 an`NSFetchedResultsController`来实现这一点。

根据苹果的文档：

> 您使用获取的结果控制器来有效地管理从核心数据获取请求返回的结果，以便为 UITableView 对象提供数据。

这是一个很好的教程，可以帮助您入门：[http ://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)

# java - Struts2：URL动作相对路径

> ID：14433989
> 
> 赞同：1
> 
> 时间：2013-01-21T07:17:23.993
> 
> 标签：java, url, jakarta-ee, struts2

我创建了一个 struts2 标签网址。像这样的东西。

```
<s:url action="login" var="login_url">
</s:url> 
```

看到生成的 HTML。它给了我这个

```
<a href="/MyProjectName/login">login</a> 
```

这是我不喜欢的。我只想看到这个

```
<a href="login">login</a> 
```

它目前正在给我完整的项目名称。使用struts2时有什么方法可以防止这种情况

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:50:33.393

您的应用程序部署在该上下文中。您需要它才能使 url 正常工作。如果上下文不存在，您将收到 404 错误。您应该将应用程序部署为 ROOT 应用程序以不显示该上下文

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:29:51.757

尝试将属性 设置`includeContext`为`false`

```
<s:url action="login" var="login_url" includeContext="false">
</s:url> 
```

如需更多参考，[请查看此](http://struts.apache.org/2.x/docs/url.html)

# javascript - 单选按钮 javascript 验证

> ID：14433992
> 
> 赞同：0
> 
> 时间：2013-01-21T07:17:44.900
> 
> 标签：javascript, html

我有 2 个单选按钮 A 和 B。B 按钮也有一个文本字段。

默认下一个按钮是隐藏的，它应该出现在以下情况下

1.  如果用户单击按钮 A
2.  用户单击按钮 B 并在文本字段中输入文本

我试试这个：

# JavaScript

```
window.onload=function(){
   document.getElementById("next").style.display='none';
} 

function shownext(){
  var A = document.getElementById('A').value;
  var B = document.getElementById('B').value;
  var name = document.getElementById('name').value;
  if(A != "" || (B != "" && name != "")){
  document.getElementById("next").style.display='block';
     return false;
  }
  if(A == "" && B == "" && name == ""){
  document.getElementById("next").style.display='none';
     return false;
  }
} 
```

# HTML

```
<input type="radio" name="A" id="A" value="A" onClick="shownext();"/>
<input type="radio" name="A" id="B" value="B" onClick="shownext();"/>
<input type="text" name="name" id="name" onKeyDown="shownext();" onKeyUp="shownext();"/>

<a href="#q2" id="next"><img src="next.png"/></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:46:32.460

您的第一`if`条语句中有语法错误——您打开的括号多于关闭的括号。

您的单选按钮*始终*有一个`value`，因此您不能仅通过检查值来检查它们的状态。你需要检查他们的`checked`财产。

您也不需要两个`if`s，`else`第一个`if`更合适，因为您基本上只有两种可能的结果（显示“下一步”按钮或隐藏它）。

这是[固定代码的工作演示](http://jsbin.com/onawem/1/edit)。

# php - AS to PHP (decodeToByteArray, encodeByteArray)

> ID：14433993
> 
> 赞同：0
> 
> 时间：2013-01-21T07:17:47.240
> 
> 标签：php, actionscript-3, base64

```
message = "this is the message";
key = "the_key";
timestamp = "20130121";
this_id = "13291";

key = Base64.decodeToByteArray(key);
message = this_id + "-" + timestamp;
hmac = Crypto.getHMAC("sha1");
message = Hex.fromArray(hmac.compute(key, Hex.toArray(Hex.fromString(message)))) + "-" + message;
data = Hex.toArray(Hex.fromString(message));
gen_token = Base64.encodeByteArray(data); 
```

我不知道 AS 但我需要将上面的 AS 函数转换为 PHP。php中是否有类似“decodeToByteArray”和“encodeByteArray”的类似函数？我只能做到以下几点。

```
key = base64_decode(key);
$message = $this_id ."-".$timestamp;
$message = hash_hmac ('sha1', $key , $message) . $message;
$gen_token = base64_encode(key); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:43:06.090

```
string **base64_encode** ( string *$data* ) 
```

[http://php.net/manual/en/function.base64-encode.php](http://php.net/manual/en/function.base64-encode.php)

```
string **base64_decode** ( string *$data* [, bool *$strict = false* ] ) 
```

[http://php.net/manual/en/function.base64-decode.php](http://php.net/manual/en/function.base64-decode.php)

ByteArray（8 位实体数组）实际上是一个字符串。

因此，**base64_encode**和**base64_decode 可以满足**您的所有需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:59:11.903

有些代码没有意义，例如：

```
message = this_id + "-" + timestamp; 
```

那将覆盖 的值`"this is the message"`。

此外，它似乎只在一个 id 和时间戳上生成一个键控散列，使消息内容容易受到不必要的更改。更有意义的是，您计算 和 上的`this_id`键控`timestamp` **散列** `message`。

```
$key = base64_decode('value of key expressed in base64 string');
// calculate signature for remote validation
$sig = hmac_hash('sha1', "$this_id-$timestamp-$message", $key);

$gen_token = base64_encode("$sig-$message"); 
```

# php - PHP安装后Apache无法重启

> ID：14433994
> 
> 赞同：3
> 
> 时间：2013-01-21T07:18:11.017
> 
> 标签：php, apache

我已经在端口 81 上安装了 Apache2，因为 IIS7 使用端口 80。当我通过浏览器加载它时，它加载正常并向我显示目录，但是在使用 msi 安装程序安装 PHP5 后，由于 httpd.conf 中的错误，Apache 无法重新启动它说它无法加载 php5apache2_2.dll 在对 Apache httpd.conf 进行修复后出现此错误

```
#BEGIN PHP INSTALLER EDITS - REMOVE ONLY ON UNINSTALL
PHPIniDir "C:\Webserver\php\"
LoadModule php5_module "C:\Webserver\php\php5apache2_2.dll"
#END PHP INSTALLER EDITS - REMOVE ONLY ON UNINSTALL 
```

这是错误所在。

> cmd 行错误：C:/Webserver/apache/Apache2/conf/httpd.conf 的第 970 行语法错误：
> 无法将 C:/Webserver/php/php5apache2_2.dll 加载到服务器
> %1 中不是有效的 Win32 应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T22:20:37.637

我遇到过同样的问题。我用谷歌搜索并在这里找到了适用于 Windows 的 64 位版本的 PHP 二进制文件：

[http://www.anindya.com/php-5-3-2-x64-64-bit-windows-binary/](http://www.anindya.com/php-5-3-2-x64-64-bit-windows-binary/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T07:25:30.020

您确定 PHP 图像与您的 PC 匹配 - 即 32/64 位吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-05T16:54:42.983

您需要 MS Visual C++ 64 位 (vc_redist.x64.exe)、64 位 Apache 二进制文件 (httpd-2.4.18-win64-VC14.zip) 和 64 位 PHP (php-5.3.2-Win32-VC9-x64.zip) ）。我尝试使用 PHP 7 64 位但没有成功。然后使用这个 PHP(php-5.3.2-Win32-VC9-x64.zip) 它工作。全部用于 64 位 Windows 7 谢谢

# php - Magento Connect 不显示软件包列表？

> ID：14433995
> 
> 赞同：0
> 
> 时间：2013-01-21T07:18:12.217
> 
> 标签：php, magento, magento-1.7

我有 magento `1.5.1.0`。现在我想将它升级到`magento 1.7.2.0`，但是当我去`magento connect manager`它时，它并没有显示已安装的软件包列表。我已经应用了很多东西，但它根本没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:41:14.357

如果您正确编写了所有代码（没有覆盖任何核心文件，没有将模板放在基本文件夹中），您应该进行手动升级。[在这里](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/manual_upgrade_using_fresh_install_and_original_database)你会找到你需要的所有信息（基本上你在你的站点上复制一个全新的 1.7 安装）。

最重要的是：在尝试升级之前进行备份。

升级后，再次设置权限，然后检查您的日志，看看是否有任何错误。