# StackOverflow 问答 14699000-14699999

# jquery - jQuery nestedSortable - 如何使第一项根和根的后续项的子项

> ID：14699000
> 
> 赞同：0
> 
> 时间：2013-02-05T02:05:25.043
> 
> 标签：jquery, jquery-ui-sortable, nested-sortable

我有一个表单，您可以使用它生成可排序的菜单结构。我想将第一项设为父项，将所有后续项设为子项。我已经在视觉上实现了这一点，但我还需要确保代码结构正确。

在我的选择中，我注意到protectRoot 和rootID 不起作用，但我认为它不会影响代码中的任何内容。

jsFiddle [http://jsfiddle.net/clintongreen/EazX7/](http://jsfiddle.net/clintongreen/EazX7/)

**JS**

```
// Nested Sortable Plugin
/*
 * jQuery UI Nested Sortablefdfv
* v 1.3.4 / 28 apr 2011
* http://mjsarfatti.com/sandbox/nestedSortable
*
* Depends:
*     jquery.ui.sortable.js 1.8+
*
* License CC BY-SA 3.0
* Copyright 2010-2011, Manuele J Sarfatti
*/

(function($) {

$.widget("ui.nestedSortable", $.extend({}, $.ui.sortable.prototype, {

    options: {
        tabSize: 20,
        disableNesting: 'ui-nestedSortable-no-nesting',
        errorClass: 'ui-nestedSortable-error',
        listType: 'ol',
        maxLevels: 0,
        noJumpFix: 0
    },

    _create: function(){
        if (this.noJumpFix == false)
            this.element.height(this.element.height());
        this.element.data('sortable', this.element.data('nestedSortable'));
        return $.ui.sortable.prototype._create.apply(this, arguments);
    },

    _mouseDrag: function(event) {

        //Compute the helpers position
        this.position = this._generatePosition(event);
        this.positionAbs = this._convertPositionTo("absolute");

        if (!this.lastPositionAbs) {
            this.lastPositionAbs = this.positionAbs;
        }

        //Do scrolling
        if(this.options.scroll) {
            var o = this.options, scrolled = false;
            if(this.scrollParent[0] != document && this.scrollParent[0].tagName != 'HTML') {

                if((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity)
                    this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;
                else if(event.pageY - this.overflowOffset.top < o.scrollSensitivity)
                    this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;

                if((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity)
                    this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;
                else if(event.pageX - this.overflowOffset.left < o.scrollSensitivity)
                    this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;

            } else {

                if(event.pageY - $(document).scrollTop() < o.scrollSensitivity)
                    scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
                else if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity)
                    scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);

                if(event.pageX - $(document).scrollLeft() < o.scrollSensitivity)
                    scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
                else if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity)
                    scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);

            }

            if(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour)
                $.ui.ddmanager.prepareOffsets(this, event);
        }

        //Regenerate the absolute position used for position checks
        this.positionAbs = this._convertPositionTo("absolute");

        //Set the helper position
        if(!this.options.axis || this.options.axis != "y") this.helper[0].style.left = this.position.left+'px';
        if(!this.options.axis || this.options.axis != "x") this.helper[0].style.top = this.position.top+'px';

        //Rearrange
        for (var i = this.items.length - 1; i >= 0; i--) {

            //Cache variables and intersection, continue if no intersection
            var item = this.items[i], itemElement = item.item[0], intersection = this._intersectsWithPointer(item);
            if (!intersection) continue;

            if(itemElement != this.currentItem[0] //cannot intersect with itself
                &&    this.placeholder[intersection == 1 ? "next" : "prev"]()[0] != itemElement //no useless actions that have been done before
                &&    !$.contains(this.placeholder[0], itemElement) //no action if the item moved is the parent of the item checked
                && (this.options.type == 'semi-dynamic' ? !$.contains(this.element[0], itemElement) : true)
                //&& itemElement.parentNode == this.placeholder[0].parentNode // only rearrange items within the same container
            ) {

                this.direction = intersection == 1 ? "down" : "up";

                if (this.options.tolerance == "pointer" || this._intersectsWithSides(item)) {
                    this._rearrange(event, item);
                } else {
                    break;
                }

                // Clear emtpy ul's/ol's
                this._clearEmpty(itemElement);

                this._trigger("change", event, this._uiHash());
                break;
            }
        }

        var parentItem = (this.placeholder[0].parentNode.parentNode && $(this.placeholder[0].parentNode.parentNode).closest('.ui-sortable').length) ? $(this.placeholder[0].parentNode.parentNode) : null;
        var level = this._getLevel(this.placeholder);
        var childLevels = this._getChildLevels(this.helper);
        var previousItem = this.placeholder[0].previousSibling ? $(this.placeholder[0].previousSibling) : null;
        if (previousItem != null) {
            while (previousItem[0].nodeName.toLowerCase() != 'li' || previousItem[0] == this.currentItem[0]) {
                if (previousItem[0].previousSibling) {
                    previousItem = $(previousItem[0].previousSibling);
                } else {
                    previousItem = null;
                    break;
                }
            }
        }

        newList = document.createElement(o.listType);

        this.beyondMaxLevels = 0;

        // If the item is moved to the left, send it to its parent level
        if (parentItem != null && this.positionAbs.left < parentItem.offset().left) {
            parentItem.after(this.placeholder[0]);
            this._clearEmpty(parentItem[0]);
            this._trigger("change", event, this._uiHash());
        }
        // If the item is below another one and is moved to the right, make it a children of it
        else if (previousItem != null && this.positionAbs.left > previousItem.offset().left + o.tabSize) {
            this._isAllowed(previousItem, level+childLevels+1);
            if (!previousItem.children(o.listType).length) {
                previousItem[0].appendChild(newList);
            }
            previousItem.children(o.listType)[0].appendChild(this.placeholder[0]);
            this._trigger("change", event, this._uiHash());
        }
        else {
            this._isAllowed(parentItem, level+childLevels);
        }

        //Post events to containers
        this._contactContainers(event);

        //Interconnect with droppables
        if($.ui.ddmanager) $.ui.ddmanager.drag(this, event);

        //Call callbacks
        this._trigger('sort', event, this._uiHash());

        this.lastPositionAbs = this.positionAbs;
        return false;

    },

    _mouseStop: function(event, noPropagation) {

        // If the item is in a position not allowed, send it back
        if (this.beyondMaxLevels) {
            var parent = this.placeholder.parent().closest(this.options.items);

            for (var i = this.beyondMaxLevels - 1; i > 0; i--) {
                parent = parent.parent().closest(this.options.items);
            }

            this.placeholder.removeClass(this.options.errorClass);
            parent.after(this.placeholder);
            this._trigger("change", event, this._uiHash());
        }

        $.ui.sortable.prototype._mouseStop.apply(this, arguments);

    },

    serialize: function(o) {

        var items = this._getItemsAsjQuery(o && o.connected);
        var str = []; o = o || {};

        $(items).each(function() {
            var res = ($(o.item || this).attr(o.attribute || 'id') || '').match(o.expression || (/(.+)[-=_](.+)/));
            var pid = ($(o.item || this).parent(o.listType).parent('li').attr(o.attribute || 'id') || '').match(o.expression || (/(.+)[-=_](.+)/));
            if(res) str.push((o.key || res[1]+'['+(o.key && o.expression ? res[1] : res[2])+']')+'='+(pid ? (o.key && o.expression ? pid[1] : pid[2]) : 'root'));
        });

        if(!str.length && o.key) {
            str.push(o.key + '=');
        }

        return str.join('&');

    },

    toHierarchy: function(o) {

        o = o || {};
        var sDepth = o.startDepthCount || 0;
        var ret = [];

        $(this.element).children('li').each(function() {
            var level = _recursiveItems($(this));
            ret.push(level);
        });

        return ret;

        function _recursiveItems(li) {
            var id = ($(li).attr(o.attribute || 'id') || '').match(o.expression || (/(.+)[-=_](.+)/));
            if (id != null) {
                var item = {"id" : id[2]};
                if ($(li).children(o.listType).children('li').length > 0) {
                    item.children = [];
                    $(li).children(o.listType).children('li').each(function () {
                        var level = _recursiveItems($(this));
                        item.children.push(level);
                    });
                }
                return item;
            }
        }
    },

    toArray: function(o) {

        o = o || {};
        var sDepth = o.startDepthCount || 0;
        var ret = [];
        var left = 2;

        ret.push({"item_id": 'root', "parent_id": 'none', "depth": sDepth, "left": '1', "right": ($('li', this.element).length + 1) * 2});

        $(this.element).children('li').each(function () {
            left = _recursiveArray(this, sDepth + 1, left);
        });

        function _sortByLeft(a,b) {
            return a['left'] - b['left'];
        }
        ret = ret.sort(_sortByLeft);

        return ret;

        function _recursiveArray(item, depth, left) {

            right = left + 1;

            if ($(item).children(o.listType).children('li').length > 0) {
                depth ++;
                $(item).children(o.listType).children('li').each(function () {
                    right = _recursiveArray($(this), depth, right);
                });
                depth --;
            }

            id = ($(item).attr(o.attribute || 'id')).match(o.expression || (/(.+)[-=_](.+)/));

            if (depth === sDepth + 1) pid = 'root';
            else {
                parentItem = ($(item).parent(o.listType).parent('li').attr('id')).match(o.expression || (/(.+)[-=_](.+)/));
                pid = parentItem[2];
            }

            if (id != null) {
                    ret.push({"item_id": id[2], "parent_id": pid, "depth": depth, "left": left, "right": right});
            }

            return left = right + 1;
        }

    },

    _clear: function(event, noPropagation) {

        $.ui.sortable.prototype._clear.apply(this, arguments);

        // Clean last empty ul/ol
        for (var i = this.items.length - 1; i >= 0; i--) {
            var item = this.items[i].item[0];
            this._clearEmpty(item);
        }
        return true;

    },

    _clearEmpty: function(item) {

        if (item.children[1] && item.children[1].children.length == 0) {
            item.removeChild(item.children[1]);
        }

    },

    _getLevel: function(item) {

        var level = 1;

        if (this.options.listType) {
                var list = item.closest(this.options.listType);
                while (!list.is('.ui-sortable')/* && level < this.options.maxLevels*/) {
                        level++;
                        list = list.parent().closest(this.options.listType);
                }
        }

        return level;
    },

    _getChildLevels: function(parent, depth) {
        var self = this,
            o = this.options,
            result = 0;
        depth = depth || 0;

        $(parent).children(o.listType).children(o.items).each(function (index, child) {
                result = Math.max(self._getChildLevels(child, depth + 1), result);
        });

        return depth ? result + 1 : result;
    },

    _isAllowed: function(parentItem, levels) {
        var o = this.options
        // Are we trying to nest under a no-nest or are we nesting too deep?
        if (parentItem == null || !(parentItem.hasClass(o.disableNesting))) {
            if (o.maxLevels < levels && o.maxLevels != 0) {
                this.placeholder.addClass(o.errorClass);
                this.beyondMaxLevels = levels - o.maxLevels;
            } else {
                this.placeholder.removeClass(o.errorClass);
                this.beyondMaxLevels = 0;
            }
        } else {
            this.placeholder.addClass(o.errorClass);
            if (o.maxLevels < levels && o.maxLevels != 0) {
                this.beyondMaxLevels = levels - o.maxLevels;
            } else {
                this.beyondMaxLevels = 1;
            }
        }
    }
}));

$.ui.nestedSortable.prototype.options = $.extend({}, $.ui.sortable.prototype.options, $.ui.nestedSortable.prototype.options);
})(jQuery);

// Create Div
$(".add_menu_item").live('click', function() {
var value = $(this).prev().val();
if (value.length) {
    var newDiv = $('<div id="toggleshow' + "0" + numToggle++ +'" class="div_menu_button"></div>');
    var showDiv = $('<div id="show'+ "0" + numShow++ +'" class="menu_button_info">Haywood Tjibloumi</div>');
    $('#created_buttons_list').append(
        newDiv.val(value).text(value) );
        newDiv.wrap("<li></li>");
        newDiv.append(showDiv);
}

});
    var numToggle = 0;
    var numShow = 0;

   // Nested Divs Options
    $('ol#created_buttons_list').nestedSortable({
        disableNesting: 'no-nest',
        protectRoot: true,
        rootID: '#theroot',
        forcePlaceholderSize: true,
        handle: 'div',
        helper: 'clone',
        items: 'li:not(.dontsortme)',
        maxLevels: 10,
        opacity: .6,
        placeholder: 'placeholder',
        revert: 250,
        tabSize: 25,
        tolerance: 'pointer',
        toleranceElement: '> div'
});

    // Toggle Hide/SHow
    $('#toggleshow').live('click', function() {$('#show').slideToggle('slow', function() {});});
    $('#toggleshow00').live('click', function() {$('#show00').slideToggle('slow', function() {});});
    $('#toggleshow01').live('click',function() {$('#show01').slideToggle('slow', function() {});});
    $('#toggleshow02').live('click',function() {$('#show02').slideToggle('slow', function() {});});
    $('#toggleshow03').live('click',function() {$('#show03').slideToggle('slow', function() {});});
    $('#toggleshow04').live('click',function() {$('#show04').slideToggle('slow', function() {});});
    $('#toggleshow05').live('click',function() {$('#show05').slideToggle('slow', function() {});});

// Indent first item
$("input.add_menu_item").live('click', function(){
    $("#created_buttons_list li:first").css('margin-left','0px').addClass('dontsortme');
}); 
```

**CSS**

```
form#create_menu_item{ width:920px; }
form#create_menu_item input#new_menu_name{ padding:5px; float:left; margin:0 10px 10px 0; }
form#create_menu_item input.add_menu_item{font-size:11px; width:60px; height:27px; display:block; -moz-border-radius:3px; -webkit-border-radius:3px; -o-border-radius:3px; border-radius:3px; background:#f5f5f5; background: -moz-linear-gradient(100% 100% 90deg, #eee, #fcfcfc); background: -webkit-linear-gradient(#fcfcfc, #eee) !important; background: -o-linear-gradient(#fcfcfc, #eee);border:1px solid #ccc;color:#666;padding-bottom:3px;float:left;}
div.div_menu_button{font-size:12px;width:295px;height:16px;display:block;-moz-border-radius:3px; -webkit-border-radius:3px; -o-border-radius:3px; border-radius:3px;background:#f5f5f5; background: -moz-linear-gradient(100% 100% 90deg, #eee, #fcfcfc); background: -webkit-linear-gradient(#fcfcfc, #eee) !important; background: -o-linear-gradient(#fcfcfc, #eee);border:1px solid #ccc;color:#666;padding:10px;margin:0 0 10px 0;}
div#created_buttons{ width:680px; border:1px solid #eee; min-height:400px; padding:10px;}
.clear{ clear:both;}
#show, #show00, #show01, #show02, #show03, #show04, #show05 { display:none;}
.ui-nestedSortable-error { background:#fbe3e4; color:#8a1f11;}
ol#created_buttons_list{ margin: 0; padding: 0; padding-left: 30px;}
ol#created_buttons_list, ol#created_buttons_list ol { margin: 0 0 0 25px; padding: 0; list-style-type: none;}
ol#created_buttons_list { margin: 10px 0 10px 0;}
#created_buttons_list li { margin: 7px 0 0 0; padding: 0;}
#created_buttons_list li div  { padding: 10px; margin: 0; cursor: move;}
.placeholder { background-color: #f9f9f9; border:1px dashed #ccc;}
#created_buttons li{margin-left: 25px; padding-left: 25px;} 
```

**HTML**

```
 <div>
          <form id="create_menu_item">
            <ul class="add_remove_list">
                <li><h4>Add Menu Item</h4></li>
                <li><input id="new_menu_name" type="text" name="new_menu_name" placeholder="Please enter your menu title">
                    <input class="add_menu_item" name="add_menu_item" value="Add" type="button">
                </li>
                <li class="clear"><h4>Menu Items</h4></li>
                  <li><div id="created_buttons"> <ol id="created_buttons_list"> </ol>  </div>                        
                </li>
            </ul>
                </form> 
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:09:29.690

[`.live`](http://api.jquery.com/live/)自 v1.7 起已在 jQuery 中弃用，并已在 v1.9 中删除。

您应该将其替换为[`.on()`](http://api.jquery.com/on/).

`.on`有 2 个用于绑定事件处理程序的签名，而`.live`只有 1 个。

如果元素在您绑定时存在，您可以这样做：

```
$('.element').on('click', function(){
  .......
}); 
```

您甚至可以使用速记：

```
$('.element').click(function(){
   .........
}); 
```

如果该元素当时不存在，或者将添加新元素（这是`.live`通常使用的），则需要使用“事件委托”：

```
$(document).on('click', '.element', function(){
   ........
}); 
```

注意：您希望绑定到最近的静态元素，而不是总是`document`.

同时，如果您将 jQuery 升级到最新版本，可以使用[**jQuery Migrate 插件来恢复功能。**](http://jquery.com/upgrade-guide/1.9/#jquery-migrate-plugin)`.live()`

# python - 如何将 python 数组转换为 JSON 字符串，以便可以将其存储在数据库中？

> ID：14699003
> 
> 赞同：0
> 
> 时间：2013-02-05T02:05:31.680
> 
> 标签：python, arrays, json, sqlite, pyramid

我知道在 javascript 中有 stringify 命令，但是在 python 中是否有类似的东西用于金字塔应用程序？现在我有一个可调用的视图，它接受上传的 stl 文件并将其解析为这样的格式。`data= [[[x1,x2,x3],...],[[v1,v2,v3],...]]`如何将其转换为 JSON 字符串，以便将其存储在 SQLite 数据库中？我可以将 javascript stringify 命令插入到我的 views.py 文件中吗？有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T02:09:09.543

您可以使用该`json`模块来执行此操作：

```
 import json
 data_str = json.dumps(data) 
```

还有其他数组表示也可以存储在数据库中（请参阅 参考资料`pickle`）。

但是，如果您实际上是在构建数据库，您应该知道将多个数据存储在关系数据库中的单个值中被认为违反了基本数据库原则（第一范式）。您应该做的是将数组分解为行（可能还有单独的表）并在每个“单元格”中存储一个值。这将允许您使用 SQL 查询和分析数据。

如果您不尝试构建实际的数据库（如果数组对您的应用程序完全不透明，并且您永远不想通过数组中的值进行搜索、排序、聚合或报告），您无需担心这么多关于范式，但您可能还会发现您不需要 SQL 数据库的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:55:34.853

您也可以使用[cjson](http://pypi.python.org/pypi/python-cjson)，它比`json`库更快。

```
import cjson
json_str = cjson.encode(your_string) 
```

# ios - iOS为视图的一部分绘制边界

> ID：14699009
> 
> 赞同：-2
> 
> 时间：2013-02-05T02:06:25.600
> 
> 标签：ios, border

试图搜索类似的问题，但没有成功。

在这个 iOS 应用程序中，我有一个大的方形子视图，我将其分解为四个小的子视图，我称它们为 smallA、smallB、smallC 和 smallD，以及大的子视图 BigS。我在一开始就为 bigS 画了界线。稍后，smallB 将消失，子视图仅包含 smallA/C/D。我现在需要重新绘制边界线，只需要围绕小A/C/D，而不是B。我如何绘制它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:32:57.883

如果我是你，我将子类化`UIView`并在子类的`drawRect`. 因为默认边框无法为您做到这一点。您的 bigS 不是常规矩形。你可以参考这个教程：[Core Graphics 101: Lines, Rectangles, and Gradients](http://www.raywenderlich.com/2033/core-graphics-101-lines-rectangles-and-gradients)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:41:55.810

它只是一个边框模式，而不是边框​​属性。

我认为你应该重写 的`- (void)drawRect:(CGRect)rect`方法，`BigS`并且`Bigs`shuold 有这个属性，，，`drawingBeginPoint`并且在你设置 的 3 个属性之前，可以通过 drawRect 中的 3 个属性计算路径，然后你就可以使用绘制边界”`drawingWidth``drawingHeight``setNeedsDisplay``BigS``Bigs``Core Graphics`

# cocos2d-x - cocos2d-x c++ -> java for android

> ID：14699016
> 
> 赞同：2
> 
> 时间：2013-02-05T02:07:12.140
> 
> 标签：cocos2d-x

目前我正在使用 cocos2d-x 开发游戏。当然，对于多平台使用。基本上我使用 xcode 进行编码和开发。我想将 IAP（应用内购买）分别附加到 iPhone 和 Android 问题的每个编码中，以尝试在 Android 中调用某个不起作用的类的函数。

来源包括以下内容：

cpp端

```
MyClass::invoke_init()
{
   JavaVM* jvm = JniHelper::getJavaVM();
   JNIEnv* env;

   jvm->GetEnv((void **) &env, JNI_VERSION_1_2);

   jclass cls;
   jmethodID method;

   cls = env->FindClass("com/joycestudios/game/SampleActivity");
   method = env->GetMethodID(cls, "initFunc", "()V");
   env->CallVoidMethod(cls, method); 
} 
```

java端

```
public class SampleActivity extends Cocos2dxActivity
{
    public void initFunc()
    {
        Log.v("LOG_INFO", "initFunc()");
    }
} 
```

第一次测试如下： 我正在进行中。从 xcode 构建并从 build_natvie.sh 构建，最后从 eclipse 构建。但是在eclipse上运行后，只是黑屏并关闭。

如何调用java类的函数？我看了几个样例什么的，包括也分析了问题，我没看出有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:24:35.233

你能告诉你是否找到任何错误日志吗？

首先检查您的游戏是否在android上运行良好..

我们可以看看如何调用该函数。

通常为了调用本机方法，我使用`MessageJni`Cocos2d-x 库中可用的类。`MessageJni`我在调用本机方法的类中创建我的方法。它调用本机方法的简便方法。

只是谷歌使用`MessageJni`类。它会减轻你的工作。

:)

# zen-cart - 如何构建一个二次开发很多的zencart网站

> ID：14699021
> 
> 赞同：0
> 
> 时间：2013-02-05T02:07:35.070
> 
> 标签：zen-cart

我现在是我公司的新人，我的公司网站是基于1.3.8a创建的，更改了很多zencart核心文件，增加了很多新的二次开发文件。现在我老板想把公司网站更新到zencart 1.5.1，并且想从头开始建设网站，公司网站的新版本应该结构清晰，易于更新。

有好心人能给点建议吗？以及任何关于此的好消息？我的一些想法：
1.如果添加了新的classes文件，应该放在includes/classes/jy_class.xxx.php（jy是我的公司名称）；
2.如果是新的includes/modules/pages/xxx/header_php.php，应该放在includes/modules/jy/pages/xxx/
header_php.php 3.如果是新的函数，应该放在includes/functions/extra_functions/jy_functions_xxx .php

我知道这个问题是一个开放的问题，但这对我来说非常重要。我希望一些zencart开发专家给我一些好的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:25:37.587

建议1和3都可以。建议 2 行不通；该页面不能在子目录 jy 中 - 它必须在 include/modules/pages/xxx/header_php.php 中。您也希望尽快启动此活动；Zen Cart 1.3.8a 已被盗用很长时间，并不安全。

# android - ViewPager + 片段 - 片段未显示

> ID：14699022
> 
> 赞同：5
> 
> 时间：2013-02-05T02:07:37.847
> 
> 标签：android, android-fragments, actionbarsherlock

我正在尝试使用 viewpager 来显示几个片段。目前我只有一个片段，但它似乎从未被实例化。我尝试使用 pager.setCurrentItem(0) 但适配器中的 getItem 方法从未被调用。有谁知道为什么我的片段没有在下面的代码中加载？

主要活动

```
public class MainActivity extends SherlockFragmentActivity {

MyPagerAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate( savedInstanceState );
    setContentView( R.layout.activity_main );

    // Create the FragmentPager Adapter and assign it to the viewpager
    adapter = new MyPagerAdapter( getSupportFragmentManager(), this );
    ViewPager pager = ( ViewPager ) findViewById( R.id.pager );
    pager.setAdapter( adapter );
    pager.setCurrentItem( 0 );

    // Setup the tab page indicator
    TabPageIndicator indicator = ( TabPageIndicator ) findViewById( R.id.indicator );
    indicator.setViewPager( pager );
}

class MyPagerAdapter extends FragmentStatePagerAdapter {
    private SparseArray<Fragment> fragmentPageMap;

    public MyPagerAdapter(FragmentManager fm, Activity context) {
        super( fm );
        fragmentPageMap = new SparseArray<Fragment>();
    }

    @Override
    public Fragment getItem(int index) {
        switch ( index ) {
        case 0:
            if ( fragmentPageMap.get( index ) != null ) {
                SherlockListFragment scheduleFragment =  ScheduleListFragment.newInstance();
                fragmentPageMap.put( index, scheduleFragment );
                return scheduleFragment;
            } else {
                return fragmentPageMap.get( index );
            }
        default:
            return null;
        }
    }

    /*@Override
    public void destroyItem(View container, int index, Object object) {
        super.destroyItem( container, index, object );
        fragmentPageMap.remove( index );
    }*/

    @Override
    public CharSequence getPageTitle(int index) {
        return ( ( ViewPagerPage ) fragmentPageMap.get( index ) ).getTitle();
    }

    @Override
    public int getCount() {
        return fragmentPageMap.size();
    }
}

public interface ViewPagerPage {
    String getTitle();
} 
```

MainActivity 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<com.viewpagerindicator.TabPageIndicator
    android:id="@+id/indicator"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textStyle="bold" />

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" />

</LinearLayout> 
```

ScheduleListFragment

```
public class ScheduleListFragment extends SherlockListFragment implements ViewPagerPage {

private ScheduleAdapter adapter;
private final String TITLE = "Schedule";

public static ScheduleListFragment newInstance() {
    ScheduleListFragment newFrag = new ScheduleListFragment();
    Bundle args = new Bundle();
    newFrag.setArguments( args );
    return newFrag;
}

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate( R.layout.fragment_schedule_list, null );
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate( R.menu.fragment_schedule_list, menu );
}

// Container Activity must implement this interface
public interface OnAddItemClickedListener {
    public void onAddItemClicked();
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch ( item.getItemId() ) {
    case R.id.add_item:
        Intent myIntent = new Intent( getActivity(), AddScheduleItemActivity.class );
        startActivityForResult( myIntent, 1 );

        return true;
    default:
        return super.onOptionsItemSelected( item );
    }
}

public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated( savedInstanceState );
    setHasOptionsMenu( true );

    adapter = new ScheduleAdapter( getActivity() );

    setListAdapter( adapter );
}

private class SampleItem {
    public String tag;
    public int iconRes;

    public SampleItem(String tag, int iconRes) {
        this.tag = tag;
        this.iconRes = iconRes;
    }
}

public class ScheduleAdapter extends ArrayAdapter<SampleItem> {

    public ScheduleAdapter(Context context) {
        super( context, 0 );
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        if ( convertView == null ) {
            convertView = LayoutInflater.from( getContext() ).inflate( R.layout.results_list_row, null );
        }
        ImageView icon = ( ImageView ) convertView.findViewById( R.id.row_icon );
        icon.setImageResource( getItem( position ).iconRes );
        TextView title = ( TextView ) convertView.findViewById( R.id.row_title );
        title.setText( getItem( position ).tag );

        return convertView;
    }

}

@Override
public String getTitle() {
    return TITLE;
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if ( resultCode == android.app.Activity.RESULT_OK ) {
        String name = ( String ) data.getExtras().get( "TEXT" );
        Toast.makeText( getActivity(), name, Toast.LENGTH_LONG ).show();
    }
} 
```

片段布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

</LinearLayout> 
```

谢谢，内森

当前解决方案：

更改了适配器构造函数以初始化第一个片段并将其添加到内部映射。有没有人认为这样做有什么问题，或者有什么方法可以改进上面发布的任何代码？谢谢！

```
public MyPagerAdapter(FragmentManager fm, Activity context) {
        super( fm );
        fragmentPageMap = new SparseArray<Fragment>();
        SherlockListFragment scheduleFragment = ScheduleListFragment.newInstance();
        fragmentPageMap.put( 0, scheduleFragment );
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T03:11:13.603

`getCount()`正在返回 0，`MyPagerAdapter`因此不会创建 Fragment，`N`如果您希望`N`实例化 Fragment，它应该返回。

`fragmentPageMap`在构造函数中创建并且在`getCount()`被调用和`getCount()`之前被调用时为空`getItem(index)`，这就是为什么`getCount()`返回 0

在这种情况下，您不需要 a`switch` 因为您每次都实例化相同的 Fragment。但是如果你在哪里实例化不同的片段，你会需要它。

```
@Override
public Fragment getItem(int index) {
  switch (index) {
    case 0:
      return new Fragment1();
    case 1:
      return new Fragment2();
  }
  return null;
} 
```

# r - 来自 quantmod 包的 GetOptionChain，您如何为过去日期提取一整天的看涨/看跌期权

> ID：14699024
> 
> 赞同：0
> 
> 时间：2013-02-05T02:07:44.760
> 
> 标签：r, call, options, put, quantmod

我试图在 AAPl 上提取 2 天的看涨/看跌期权。

我正在使用此命令将其保存为 csv，但我只需要 2 天的信息：

> AAPL.csv <- getOptionChain("AAPL")

我试图合并来自不同函数的命令，但它似乎不起作用。下面的代码：

> getOptionChain("AAPL",what=yahooQF(c("Bid","Ask")),from = as.Date("2013-01-30"), to = as.Date("2013-01-31" )，从 EOD_time = "9:30:00" 到 EOD_time = "15:00:00")

关于如何仅提取 2 天的期权和股票数据的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T02:16:10.043

AFAIK yahoo 不提供选项的历史数据。如果是这样，`getOptionChain`则不打算以这种方式使用。

`getOptionChain`更像是`getQuote`比`getSymbols`。它获取期权链的*报价*。您可以获得多个到期和行使价的报价，但您无法获得时间序列的价格。

的**Value**部分`help("getOptionChain")`告诉您函数返回什么：

> 一个包含两个 data.frame 的命名列表，一个用于调用，一个用于放置。如果请求了多个过期，则此二元素列表将包含在长度为 length(Exp) 的列表中。此列表的每个元素都将以到期月份和年份命名（对于 Yahoo 来源的数据）。
> 
> 如果 Exp 设置为 NULL，则将返回所有过期时间。不明确设置只会返回前一个月。

# list - 如何创建一个包含一个字符串和 5 个整数的 ArrayList

> ID：14699025
> 
> 赞同：0
> 
> 时间：2013-02-05T02:08:14.223
> 
> 标签：list, object

这可能吗？例如，假设我正在从具有名称和 X 个整数的文件中读取数据。我需要将每一行（每一行都是不同的记录）添加到列表中，但它们的类型不同（1 个字符串，5 个整数）。如何才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:33:32.313

您没有指定您使用的是什么语言，但是因为您询问的是仅在 Java 中的 ArrayList（嗯，它们确实存在于 .NET 中，但由于 ArrayList 是无类型的，因此或多或少地不赞成使用它们以支持 List )，我假设这是您正在使用的语言。下次，请为您使用的语言添加标签:-)

要具体回答您的问题，您可以通过将 ArrayList 的类型声明为具有语法的 Object 来将不同类型的对象放入 ArrayList 中`new ArrayList<Object>()`。由于字符串和整数（原始整数[自动装箱](http://en.wikipedia.org/wiki/Object_type_%28object-oriented_programming%29#Autoboxing)为整数）都是对象，因此它们可以在此 ArrayList 中。

但是，通过创建一个类来存储您的数据，可能有更好的方法来管理您的数据。例如，如果您正在做库存，您可以创建以下类：

```
public InventoryRecord {

    public InventoryRecord(String name, int warehouse1Count, int warehouse2Count, int warehouse3 count, int warehouse4Count, int warehouse5Count){
        //assign everything to instance variables
    }

    //Create getters and setters
} 
```

然后，您可以将这些 InventoryRecord 对象放入带有`new ArrayList<InventoryRecord>()`.

# python - Python 杆切割算法 - 变体

> ID：14699031
> 
> 赞同：2
> 
> 时间：2013-02-05T02:09:23.753
> 
> 标签：python, algorithm, dynamic-programming

在我的一堂课上，我被问到这是一个脑筋急转弯，但我无法弄清楚（不是家庭作业问题，只是一个助教给我们思考的一个预告）。

给你一根棒子，上面有 n 个要切割的点，例如 [1,5,11]，棒子的总长度，例如 20。你还被告知切割一根棒子的费用是等价的到杆的长度。我们希望找到在所有给定切割下切割棒材的最低成本以及会导致最优成本的切割顺序。

例如，要在位置 5 处切割长度为 20 的杆，您将花费 20 美元，您最终会得到 2 根原木，一根长度为 5，一根长度为 15。

或者在另一个示例中，如果您在位置 5 切割长度为 25 的杆，然后在位置 10 切割，则在位置 5 切割它需要花费 25 美元，留下长度为 5 的杆和长度为 20 的杆，然后花费您在位置 10 再削减 20 美元，您在这两个位置的总成本为 45 美元。但是，如果您在位置 10 处切割杆，然后在位置 5 处切割，则将花费您 25 美元 + 10 美元 = 35 美元。

最后，我们想要`return the minimum cost of cutting the rod at all the given cuts and the sequence of those cuts that would lead to the optimal cost.`

我试图为这个问题提出一个递归解决方案，但一直空手而归。想法？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:12:54.093

我相信棒切割问题的关键在于贪婪算法并不总是产生最佳解决方案 - 这个变体似乎证明了同一点。

考虑要在 处切割的 L=50 杆`[13,25,26]`。选择最接近中点的切割的算法会告诉你做`[25, 13, 26]`的总成本为`50 + 25 + 25 = 100`. 我们可以通过`[26, 13, 25]`花费`50 + 26 + 13 = 89`.

**编辑：**

IE。您将在 处切割一根`L=50`杆，`P=26`导致一根`L=24 (P=26->50)`杆不再需要切割，而一根`L=26 (P=0->26)`杆需要在 处切割`[25,13]`。然后在 处切割`L=26`杆，`P=13`导致一根`L=13 (P=0->13)`杆不再需要切割，而第二`L=13 (P=13->26)`根杆需要在 处进行最终切割`P=25`。然后你进行最后的切割，得到的成本是在每个阶段切割的棒的长度之和 ( `50 + 26 + 13`)。

通常提出的替代方案是自上而下和自下而上的技术，这些技术的效率通常取决于所涉及的逻辑（对于试图最大化销售成本的传统棒材切割问题，自下而上是首选，因为它减少了递归来电）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T15:30:46.633

为了解决这个问题，您必须使用动态编程方法。这是一个基于 O(n^3) 的解决方案。（如果有人有更好的解决方案，请发表评论）。让我们有一个数组 a[n+1][n+1]，其中 n= 棒的长度。a[i][j] 将存储将杆从位置 i 切割到位置 j 的最小成本。我们得到一个切割数组，其中包含切割棒的所有位置。对于每个 ij 杆，我们考虑将其切割为切割数组中给出的所有 k 个位置，并找出最小成本。我们以对角线方式填充数组。（如果需要更多解释，请评论）

```
#include <iostream>
#include <string.h>
#include <stdio.h>  
#include <limits.h>
using namespace std;
int main(){
   int i,j,gap,k,l,m,n;
   while(scanf("%d%d",&n,&k)!=EOF){

    int a[n+1][n+1];
    int cut[k];
    memset(a,0,sizeof(a));
    for(i=0;i<k;i++)
        cin >> cut[i];
    for(gap=1;gap<=n;gap++){
        for(i=0,j=i+gap;j<=n;j++,i++){
            if(gap==1)
                a[i][j]=0;
            else{
                int min = INT_MAX;
                for(m=0;m<k;m++){
                    if(cut[m]<j and cut[m] >i){
                        int cost=(j-i)+a[i][cut[m]]+a[cut[m]][j];

                        if(cost<min)
                            min=cost;
                    }
                }
                if(min>=INT_MAX)
                a[i][j]=0;
                else
                    a[i][j]=min;
            }
        }
    }
    cout << a[0][n] << endl;
}
return 0;
} 
```

# java - CachedRowSetImpl 无法解析为类型

> ID：14699038
> 
> 赞同：12
> 
> 时间：2013-02-05T02:10:02.870
> 
> 标签：java, jdbc, cachedrowset

我正在使用 CachedRowSet 来保存 ResultSet 表单数据库。根据一些演示代码：我编写以下代码：

```
CachedRowSetImpl crs = new CachedRowSetImpl(); 
```

但是eclipse提示我无法将CachedRowSetImpl解析为类型。所以我知道我需要导入一些包。但是不知道要导入哪一个？有谁知道？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T04:50:12.857

CachedRowSetImpl 类被打包在 rt.jar 中。所以你不需要为这个类添加任何 jar。您能否尝试删除当前添加到 eclipse buildpath 中的 JRE，然后重新添加它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-05T05:04:02.440

使用此代码：

```
import javax.sql.rowset.CachedRowSet;
import com.sun.rowset.CachedRowSetImpl

...

CachedRowSet rowSet = new CachedRowSetImpl(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T02:16:01.343

如果你的 eclipse 类路径设置正确，我的意思是包含的 jar 在 eclipse 类路径中，然后使用 ctrl+shift+o。这将组织进口。添加缺少的导入并删除不必要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-28T10:17:07.573

您应该导入`com.sun.rowset.jar`到您的项目中：

1.  [从这里](http://www.java2s.com/Code/JarDownload/com.sun/com.sun.rowset.jar.zip)下载库。
2.  右键单击*项目>属性> Java构建路径>选择“库”>添加外部JAR ...*
3.  然后*浏览...*到您保存的位置`com.sun.rowset.jar`并选择它。
4.  单击*确定*。

# .net - 在 vb.net 中读取非常大的文本文件时出现内存不足错误

> ID：14699039
> 
> 赞同：5
> 
> 时间：2013-02-05T02:10:39.990
> 
> 标签：.net, vb.net, out-of-memory

我的任务是处理一个 3.2GB 的定宽分隔文本文件。每行长 1563 个字符，文本文件中大约有 210 万行。在阅读了大约 100 万行之后，我的程序因内存不足异常错误而崩溃。

```
Imports System.IO
Imports Microsoft.VisualBasic.FileIO

Module TestFileCount
    ''' <summary>
    ''' Gets the total number of lines in a text file by reading a line at a time
    ''' </summary>
    ''' <remarks>Crashes when count reaches 1018890</remarks>
    Sub Main()
        Dim inputfile As String = "C:\Split\BIGFILE.txt"
        Dim count As Int32 = 0
        Dim lineoftext As String = ""

        If File.Exists(inputfile) Then
            Dim _read As New StreamReader(inputfile)
            Try
                While (_read.Peek <> -1)
                    lineoftext = _read.ReadLine()
                    count += 1
                End While

                Console.WriteLine("Total Lines in " & inputfile & ": " & count)
            Catch ex As Exception
                Console.WriteLine(ex.Message)
            Finally
                _read.Close()
            End Try
        End If
    End Sub
End Module 
```

这是一个非常简单的程序，一次读取一行文本文件，所以我认为它不应该在缓冲区中占用太多内存。

对于我的生活，我无法弄清楚它为什么会崩溃。这里有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:12:19.080

我不知道这是否能解决您的问题，但不要使用 peek，将循环更改为：（这是 C#，但您应该能够将其转换为 VB）

```
while (_read.ReadLine() != null)
{
    count += 1
} 
```

如果您需要使用循环内的文本行而不是仅计算行数，只需将代码修改为

```
while ((lineoftext = _read.ReadLine()) != null)
{
    count += 1
    //Do something with lineoftext
} 
```

* * *

有点离题和作弊，如果每行真的是 1563 个字符长（包括行尾）并且文件是纯 ASCII（所以所有字符占用一个字节）你可以这样做（再次 C#，但你应该是可以翻译）

```
long bytesPerLine = 1563;
string inputfile = @"C:\Split\BIGFILE.txt"; //The @ symbol is so we don't have to escape the `\`
long length;

using(FileStream stream = File.Open(inputFile, FileMode.Open)) //This is the C# equivilant of the try/finally to close the stream when done.
{
    length = stream.Length;
}

Console.WriteLine("Total Lines in {0}: {1}", inputfile, (length / bytesPerLine )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:35:13.187

尝试使用 ReadAsync，或者您可以使用 DiscardBufferedData（但速度很慢）

```
Dim inputfile As String = "C:\Example\existingfile.txt" 
    Dim result() As String 
    Dim builder As StringBuilder = New StringBuilder()

    Try
        Using reader As StreamReader = File.OpenText(inputfile)
            ReDim result(reader.BaseStream.Length)
            Await reader.ReadAsync(result, 0, reader.BaseStream.Length)
        End Using 

        For Each str As String In result
            builder.Append(str)         
        Next
      Dim count as Integer=builder.Count()
       Console.WriteLine("Total Lines in " & inputfile & ": " & count)
    Catch ex As Exception
            Console.WriteLine(ex.Message)
    End Try 
```

# visual-studio-2010 - Visual Studio 重新排序 RC 文件

> ID：14699041
> 
> 赞同：2
> 
> 时间：2013-02-05T02:11:28.627
> 
> 标签：visual-studio-2010, resources

我相当确定我没有想象到这一点，但在我看来，Visual Studio (2010) 经常自行更改我的源代码控制 RC 文件中的事物顺序。

例如，我可能会在字符串表中添加一些字符串，或者编辑一个对话框。然后，当我出于源代码控制的目的进行比较时，我发现字符串表的整个部分或整个对话框定义都被移动了，这使得合并之类的痛苦比他们需要的要大得多。

**这是我想象的吗？**

**如果没有，有没有办法阻止它发生？**

# c++ - 替换为系统（“颜色”）

> ID：14699043
> 
> 赞同：0
> 
> 时间：2013-02-05T02:11:30.120
> 
> 标签：c++

我需要一种在不使用系统调用的情况下表现得像系统颜色的方法。我知道有 setConsoleTextAttribute() 但这并没有用只有颜色的新字符填充整个前景和背景。我正在使用 windows7 虽然我想让它与所有 windows 兼容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:48:38.820

根据您的评论，这是您要解决的问题的更完整的解决方案。它基于我的原始答案（可以在此答案的末尾找到）。

我发现了 Windows API 的一个限制，即它无法读取 80 列 x 300 行的默认控制台模式窗口的整个屏幕缓冲区。由于 Windows 进程堆不足（据我从谷歌搜索中得知），它会导致 ERROR_NOT_ENOUGH_MEMORY 错误。我最终实现了一个围绕 XxxConsoleOutput 函数的包装器，以支持根据需要自动细分屏幕缓冲区，直到函数成功或无法读取 1 X 1（单字符）区域。

同样，这段代码可能并不完美，它旨在解释概念，而不是（必然）为您提供完整的解决方案。但是，它现在填充了整个控制台（以前我只填充了窗口的可见部分）并设置了控制台的文本属性以供将来输出。

跳过此代码以阅读原始答案。

```
#define WIN32_LEAN_AND_MEAN
#include <Windows.h>

#include <iostream>
#include <vector>

using namespace std;

// Split a rectangular region into two smaller rectangles
// based on the largest dimension.
void SplitRegion(
    SHORT width, SHORT height,
    COORD dwBufferCoord, const SMALL_RECT& readRegion,
    COORD& dwBufferCoordA, SMALL_RECT& readRegionA,
    COORD& dwBufferCoordB, SMALL_RECT& readRegionB)
{
    dwBufferCoordA = dwBufferCoordB = dwBufferCoord;
    readRegionA = readRegionB = readRegion;

    if (height >= width)
    {
        SHORT half = height / 2;
        dwBufferCoordB.Y += half;
        readRegionB.Top += half;
        readRegionA.Bottom = readRegionB.Top - 1;
    }
    else
    {
        SHORT half = width / 2;
        dwBufferCoordB.X += half;
        readRegionB.Left += half;
        readRegionA.Right = readRegionB.Left - 1;
    }
}

// Utility function to figure out the distance
// between two points.
template <typename type>
inline type DiffHelper(type first, type second)
{
    return (second >= first) ? (second - first + 1) : 0;
}

// A template that wraps up the shared code common between
// reading and writing the screen buffer. If it is ever
// given a region of zero width or height, it will
// "succeed". If it ever tries to subdivide a 1 by 1
// region, it will fail.
template <typename lpBufferType>
BOOL XferConsoleOutputWrapper(
    HANDLE hConsoleOutput, 
    lpBufferType lpBuffer, 
    COORD dwBufferSize, 
    COORD dwBufferCoord, 
    SMALL_RECT& xferRegion,
    BOOL (WINAPI * xferConsoleOutput)(
        HANDLE, lpBufferType, COORD, COORD, PSMALL_RECT))
{
    SHORT width = DiffHelper(xferRegion.Left, xferRegion.Right);
    SHORT height = DiffHelper(xferRegion.Top, xferRegion.Bottom);

    if ((width == 0) || (height == 0))
    {
        return TRUE;
    }

    BOOL success = xferConsoleOutput(hConsoleOutput, 
        lpBuffer, dwBufferSize, dwBufferCoord, &xferRegion);
    if (!success)
    {
        if ((GetLastError() == ERROR_NOT_ENOUGH_MEMORY) &&
            ((width * height) > 1))
        {
            COORD dwBufferCoordA, dwBufferCoordB;
            SMALL_RECT xferRegionA, xferRegionB;
            SplitRegion(
                width, height,
                dwBufferCoord, xferRegion,
                dwBufferCoordA, xferRegionA,
                dwBufferCoordB, xferRegionB);
            success =
                XferConsoleOutputWrapper(hConsoleOutput, lpBuffer, dwBufferSize,
                    dwBufferCoordA, xferRegionA, xferConsoleOutput) &&
                XferConsoleOutputWrapper(hConsoleOutput, lpBuffer, dwBufferSize,
                    dwBufferCoordB, xferRegionB, xferConsoleOutput);
        }
    }
    return success;
}

// ReadConsoleOutput failed to read an 80 by 300 character screen
// buffer in a single call, resulting in ERROR_NOT_ENOUGH_MEMORY.
// ReadConsoleOutputWrapper will subdivide the operation into
// smaller and smaller chunks as needed until it succeeds in reading
// the entire screen buffer.
inline BOOL ReadConsoleOutputWrapper(
    HANDLE hConsoleOutput, 
    PCHAR_INFO lpBuffer, 
    COORD dwBufferSize, 
    COORD dwBufferCoord, 
    SMALL_RECT& readRegion)
{
    return XferConsoleOutputWrapper(hConsoleOutput, lpBuffer, dwBufferSize,
        dwBufferCoord, readRegion, ReadConsoleOutput);
}

// WriteConsoleOutputWrapper will subdivide the operation into
// smaller and smaller chunks as needed until it succeeds in writing
// the entire screen buffer. This may not be necessary as
// WriteConsoleOutput never failed, but it was simple to implement
// so it was done just to be safe.
inline BOOL WriteConsoleOutputWrapper(
    HANDLE hConsoleOutput, 
    const CHAR_INFO* lpBuffer, 
    COORD dwBufferSize, 
    COORD dwBufferCoord, 
    SMALL_RECT& writeRegion)
{
    return XferConsoleOutputWrapper(hConsoleOutput, lpBuffer, dwBufferSize,
        dwBufferCoord, writeRegion, WriteConsoleOutput);
}

void ConsoleFillWithAttribute(WORD fillAttribute)
{
    // Get the handle to the output
    HANDLE hStdout = GetStdHandle(STD_OUTPUT_HANDLE);

    // Get the information for the current screen buffer
    CONSOLE_SCREEN_BUFFER_INFO info;
    GetConsoleScreenBufferInfo(hStdout, &info);

    // Allocate a vector to hold the visible screen buffer data
    vector<CHAR_INFO> buffer(info.dwSize.X * info.dwSize.Y);

    // Initialize a couple of pointers to the begin and end of the buffer
    CHAR_INFO* begin = buffer.data();
    CHAR_INFO* end = begin + buffer.size();

    // Start at the upper left corner of the screen buffer.
    COORD coord;
    coord.X = coord.Y = 0;

    // Initialize the region to encompass the entire screen buffer.
    SMALL_RECT region;
    region.Left = region.Top = 0;
    region.Right = info.dwSize.X - 1;
    region.Bottom = info.dwSize.Y - 1;

    // Read the buffer from the console into the CHAR_INFO vector.
    ReadConsoleOutputWrapper(hStdout, buffer.data(), info.dwSize, coord, region);

    // Change all the attributes to the specified fill attribute.
    while (begin != end)
    {
        begin->Attributes = fillAttribute;
        ++begin;
    }

    // Write the buffer from the CHAR_INFO vector back to the console.
    WriteConsoleOutputWrapper(hStdout, buffer.data(), info.dwSize, coord, region);

    // Finally, set the console text attribute to the fill attribute
    // so that all new text will be printed in the same manner as
    // the attributes we just changed.
    SetConsoleTextAttribute(hStdout, fillAttribute);
}

int main()
{
    cout << "I would like to fill up the console with some text." << endl;
    cout << "The quick brown fox jumped over the lazy dogs." << endl;

    for (int i = 0; i < 100; ++i)
    {
        cout << ' ' << i;
    }

    cout << endl;

    ConsoleFillWithAttribute(
        BACKGROUND_BLUE | FOREGROUND_INTENSITY | 
            FOREGROUND_RED | FOREGROUND_GREEN);

    cout << endl;

    cout << "This should also be printed in the new attribute" << endl;

    return 0;
} 
```

原答案如下：

如果我理解您的要求，您希望能够更改整个控制台模式窗口的属性。您可能想研究`ReadConsoleOutput`and`WriteConsoleOutput`函数。您可以使用`ReadConsoleOutput`将部分或全部控制台缓冲区读入内存，然后根据应用程序的需要操作属性数据，然后`WriteConsoleOutput`将内存写回控制台输出缓冲区。

下面是一些代码，它将更改控制台当前显示部分的属性（假设输出尚未重定向到非控制台句柄）：

```
#define WIN32_LEAN_AND_MEAN
#include <Windows.h>

#include <iostream>
#include <vector>

using namespace std;

void ConsoleFillDisplayWithAttribute(WORD fillAttribute)
{
    // Get the handle to the output
    HANDLE hStdout = GetStdHandle(STD_OUTPUT_HANDLE);

    // Get the information for the current screen buffer
    CONSOLE_SCREEN_BUFFER_INFO info;
    GetConsoleScreenBufferInfo(hStdout, &info);

    // Calculate the size of the displayed portion of the screen buffer
    COORD size;
    size.X = (info.srWindow.Right - info.srWindow.Left + 1);
    size.Y = (info.srWindow.Bottom - info.srWindow.Top + 1);

    // Allocate a vector to hold the visible screen buffer data
    vector<CHAR_INFO> buffer(size.X * size.Y);

    COORD coord;
    coord.X = coord.Y = 0;

    // Read the buffer from the console into the CHAR_INFO vector
    ReadConsoleOutput(hStdout, buffer.data(), size, coord, &info.srWindow);

    // Initialize a couple of pointers to the begin and end of the buffer
    CHAR_INFO* begin = buffer.data();
    CHAR_INFO* end = begin + buffer.size();

    // Change all the attributes to the specified fill attribute
    while (begin != end)
    {
        begin->Attributes = fillAttribute;
        ++begin;
    }

    // Write the buffer from the CHAR_INFO vector back to the console
    WriteConsoleOutput(hStdout, buffer.data(), size, coord, &info.srWindow);
}

int main()
{
    cout << "I would like to fill up the console with some text." << endl;
    cout << "The quick brown fox jumped over the lazy dogs." << endl;

    for (int i = 0; i < 100; ++i)
    {
        cout << ' ' << i;
    }

    cout << endl;

    ConsoleFillDisplayWithAttribute(
        BACKGROUND_BLUE | FOREGROUND_INTENSITY | 
            FOREGROUND_RED | FOREGROUND_GREEN);

    return 0;
} 
```

# javascript - 在 Qt 中使用 JSON 对象

> ID：14699050
> 
> 赞同：2
> 
> 时间：2013-02-05T02:11:52.323
> 
> 标签：javascript, qt

我正在尝试在 Qt 中制作一个小型天气应用程序，我正在使用 JSON 格式的世界天气在线 API。我只是制作了一个简单的文本部分并尝试打印从 JSON 提要中接收到的数据。导入 QtQuick 2.0

```
Rectangle {
TextInput {
    width: 240
    id: city_label
    text: "Chicago"
    font.family: "Helvetica"
    font.pointSize: 12
    color: "#000000"
    focus: true
}

function abc()
{
var doc = new XMLHttpRequest();
doc.onreadystatechange = function() {
   if (doc.readyState == XMLHttpRequest.DONE) {
       var jsonObject = eval('(' + doc.responseText + ')');
       loaded(jsonObject);
    }
}

doc.open("GET", "http://free.worldweatheronline.com/feed/weather.ashx?q=" + city_label.text + "&format=json&num_of_days=2&key=640bc6c793043201130202");
doc.send();
}
function showRequestInfo(text) {
    log.text = log.text + "\n" + text
   console.log(text)
}

function loaded(jsonObject)
{
    showRequestInfo("cloud:" + jsonObject.data.current_condition[0].cloudcover);
    showRequestInfo("humidity:" + jsonObject.data.current_condition[0].humidity);
    showRequestInfo("observation_time:" + jsonObject.data.current_condition[0].observation_time);
    showRequestInfo("precipMM:" + jsonObject.data.current_condition[0].precipMM);
    showRequestInfo("pressure:" + jsonObject.data.current_condition[0].pressure);
    showRequestInfo("temp_C:" + jsonObject.data.current_condition[0].temp_C);
    showRequestInfo("temp_F:" + jsonObject.data.current_condition[0].temp_F);
    showRequestInfo("visibility:" + jsonObject.data.current_condition[0].visibility);
    showRequestInfo("weatherCode:" + jsonObject.data.current_condition[0].weatherCode);
    showRequestInfo("weatherDesc:" + jsonObject.data.current_condition[0].weatherDesc[0].value);

    showRequestInfo("weatherIconUrl:" + jsonObject.data.current_condition[0].weatherIconUrl[0].value);
    image1.source = jsonObject.data.current_condition[0].weatherIconUrl[0].value;

    showRequestInfo("winddir16Point:" + jsonObject.data.current_condition[0].winddir16Point);
    showRequestInfo("winddirDegree:" + jsonObject.data.current_condition[0].winddirDegree);
    showRequestInfo("windspeedKmph:" + jsonObject.data.current_condition[0].windspeedKmph);
    showRequestInfo("windspeedMiles:" + jsonObject.data.current_condition[0].windspeedMiles);

    showRequestInfo("Location:" + jsonObject.data.request[0].query);
}

width: 800
height: 1280

MouseArea {
    anchors.fill: parent
    onClicked: {
        Qt.quit();
    }
}

Text {
    id: log
    width: 360
    anchors.top: parent.top;
    anchors.bottom: parent.bottom;
    anchors.margins: 10

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:39:45.950

与在 Web 浏览器中一样，您可以在 QML 代码中访问本机 JSON.parse 和 JSON.serialize。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:56:29.110

尝试探索 qjson。它提供了用于解析和序列化 json 对象的 api。如果您使用的是 Qt 5，那么 QJson 可能包含在 Qt 库本身中。

# html - 页脚不在页面底部

> ID：14699053
> 
> 赞同：1
> 
> 时间：2013-02-05T02:12:10.103
> 
> 标签：html, css, footer

我试图将页脚保持在页面底部。我尝试的第一种方法是，页脚将位于页面底部上方，并且会显示背景。这是与 position:static; （如下图）

![图像在这里](../Images/2e662d92ed82f7fb204bd1815e6dcab8.png)

我尝试的第二种方法是使用绝对页脚。这会将页脚放在没有足够内容滚动的页面底部，但在有滚动的页面上，它在加载时位于窗口底部并位于内容顶部。它不是底部页。

这是我当前的代码：

```
<div id="container">
    <div id="content">
        <div id="slideshow"></div>
        <div id="clear"></div>
        <div id="boxes">
            <div id="box">
                <div id="boxheader"></div>
                <div id="box1" class="box"></div>
            </div>
            <div id="box">
                <div id="boxheader"></div>
                <div id="box2" class="box"></div>
            </div>
            <div id="box">
                <div id="boxheader"></div>
                <div id="box3" class="box"></div>
            </div>
        </div>
        <div id="clear"></div>
    </div>
</div>
<div id="footer">Content</div> 
```

这是CSS

```
div#container{
  position:relative;
  margin: 4px;
}
#boxes{
  width: 960px;
  margin: 50px auto 0px auto;
}
#footer {
  clear: both;
  margin-top: 50px;
  bottom: 0;
  left: 0;
  height: 200px;
  background-color: #fff;
  width: 100%;
} 
```

如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T14:22:24.987

放

`html, body { height: 100%; }`

将页脚之前的全部内容包装在 div 中。

`.wrapper { height:auto !important; min-height:100%; }`

您可以根据要在浏览器窗口底部显示的页脚量来调整最小高度。如果将其设置为 90%，则在滚动之前将显示 10% 的页脚。

所以在你的例子中

`<body style="height: 100%"> <div id="container" style="min-height: 90%; height: auto !important;"> <div id="content"> <div id="slideshow"></div> <div id="clear"></div> <div id="boxes"> <div id="box"> <div id="boxheader"></div> <div id="box1" class="box"></div> </div> <div id="box"> <div id="boxheader"></div> <div id="box2" class="box"></div> </div> <div id="box"> <div id="boxheader"></div> <div id="box3" class="box"></div> </div> </div> <div id="clear"></div> </div> </div> <div id="footer">Content</div>`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T03:31:55.513

我已经多次使用下面喜欢的文章中描述的方法，并且没有遇到任何问题：

[http://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

希望能帮助到你！

# mysql - 如何匹配mysql中的IP地址？

> ID：14699056
> 
> 赞同：10
> 
> 时间：2013-02-05T02:12:32.680
> 
> 标签：mysql, regex

例如，我有一个存储这样的数据的列。

```
Apple
12.5.126.40
Smite
Abby
127.0.0.1
56.5.4.8
9876543210
Notes 
```

如何仅选择具有 IP 格式数据的行？

我试过了， `'^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$'` 但我不知道为什么它也匹配 9876543210

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-05T02:14:36.880

您将需要使用`REGEXP`来匹配 IP 地址点分四边形模式。

```
SELECT *
FROM yourtable
WHERE 
  thecolumn REGEXP '^[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}$' 
```

从技术上讲，这将匹配不是有效 IP 地址的值，例如`999.999.999.999`，但这可能并不重要。重要的*是*，修复您的数据，以便 IP 地址存储在它们自己的列中，与您在此处拥有的任何其他数据分开。在一列中混合数据类型几乎总是一个坏主意。

```
mysql> SELECT '9876543210' REGEXP '^[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}$';
+---------------------------------------------------------------------------+
| '9876543210' REGEXP '^[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}$' |
+---------------------------------------------------------------------------+
|                                                                         0 |
+---------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> SELECT '987.654.321.0' REGEXP '^[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}$';
+------------------------------------------------------------------------------+
| '987.654.321.0' REGEXP '^[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}$' |
+------------------------------------------------------------------------------+
|                                                                            1 |
+------------------------------------------------------------------------------+ 
```

另一种方法是尝试通过 MySQL 的[`INET_ATON()`函数](https://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_inet-aton)将 IP 地址转换为长整数。将返回无效地址`NULL`。

这种方法可能比正则表达式更有效。

您可以将其嵌入到以下`WHERE`条件中：`WHERE INET_ATON(thecolumn) IS NOT NULL`

```
SELECT INET_ATON('127.0.0.1');
+------------------------+
| INET_ATON('127.0.0.1') |
+------------------------+
|             2130706433 |
+------------------------+

SELECT INET_ATON('notes');
+--------------------+
| INET_ATON('notes') |
+--------------------+
|               NULL |
+--------------------+

SELECT INET_ATON('56.99.9999.44');
+----------------------------+
| INET_ATON('56.99.9999.44') |
+----------------------------+
|                       NULL |
+----------------------------+ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-12T14:22:35.170

[`IS_IPV4()`](https://dev.mysql.com/doc/refman/8.0/en/miscellaneous-functions.html#function_is-ipv4)是一个本地 mysql 函数，可让您检查值是否是有效的 IP 版本 4。

```
SELECT *
FROM ip_containing_table
WHERE IS_IPV4(ip_containing_column); 
```

我没有数据，但我认为这一定是最可靠、最有效的方法。

还有类似的本机功能检查 IP 版本 6 等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T02:14:18.777

这可能不是最有效的方法，而且它在技术上不是正则表达式，但它应该可以工作：

```
SELECT col1 FROM t1 WHERE col1 LIKE '%.%.%.%'; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-13T08:37:34.983

您还可以使用有用的功能 inet_aton()

```
SELECT *
FROM yourtable
WHERE inet_aton(thecolumn) is not null 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-13T08:52:25.217

冗长但工作正常：

```
mysql> SELECT '1.0.0.127' regexp '^([0-1]?[0-9]{1,2}|2[0-4][0-9]|25[0-5])\\.([0-1]?[0-9]{1,2}|2[0-4][0-9]|25[0-5])\\.([0-1]?[0-9]{1,2}|2[0-4][0-9]|25[0-5])\\.([0-1]?[0-9]{1,2}|2[0-4][0-9]|25[0-5])$'; 
```

# java - cassandra 快照时打开的文件过多

> ID：14699057
> 
> 赞同：1
> 
> 时间：2013-02-05T02:12:36.550
> 
> 标签：java, backup, cassandra, snapshot

当我尝试 cassandra 快照时发生 java 错误。

root@cassandra mytest]# /usr/local/apache-cassandra-1.1.7/bin/nodetool -h localhost mytest

* * *

![在此处输入图像描述](../Images/d35a92490aee9c10c0b78810b961cf7e.png)

所以，我添加到 /etc/security/limits.conf

按照这个：[http ://www.datastax.com/docs/1.1/troubleshooting/index#java-reports-an-error-saying-there-are-too-many-open-files](http://www.datastax.com/docs/1.1/troubleshooting/index#java-reports-an-error-saying-there-are-too-many-open-files)

*   软文件 32768
*   硬文件 32768
*   根软文件 32768
*   根硬盘文件 32768
*   软内存无限制
*   硬内存无限
*   根软内存无限
*   root hard memlock 无限
*   柔软无限
*   硬如无限
*   根软无限
*   根硬如无限

但仍然发生错误。

请帮帮我。

我使用 CentOS。

附言。我遵循这个：
在 CentOS、RHEL、OEL 系统上，在 /etc/security/limits.d/90-nproc.conf 中将系统限制从 1024 更改为 10240，然后启动一个新的 shell 以使这些更改生效。* 软 nproc 10240

但我找不到“/etc/security/limits.d/90-nproc.conf”

抱歉。我英语很差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:19:04.110

除了**limits.conf**之外，您还需要执行以下操作：

编辑**/etc/pam.d/login**，添加以下行：

```
session required /lib/security/pam_limits.so 
```

请尝试一下，让我知道结果。

# c++ - string::at 和 string::operator[] 有什么区别？

> ID：14699060
> 
> 赞同：15
> 
> 时间：2013-02-05T02:13:04.340
> 
> 标签：c++, string

我在学校里被教`string::at`过，但是通过探索我看到的弦乐库`string::operator[]`，这是我以前从未见过的。

我现在正在使用`operator[]`和从那以后没有使用`at`过，但有什么区别？这是一些示例代码：

```
std::string foo = "my redundant string has some text";
std::cout << foo[5];
std::cout << foo.at(5); 
```

它们在输出方面基本相同，但有一些我不知道的细微差别吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-05T02:16:15.213

是的，有一个主要区别： using[`.at()`](https://en.cppreference.com/w/cpp/string/basic_string/at)对传递的索引进行范围检查，如果它超出字符串的末尾，则会引发异常，而在这种情况下[`operator[]`](https://en.cppreference.com/w/cpp/string/basic_string/operator_at)只会带来**未定义的行为**。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-05T02:16:16.727

[`at`](http://en.cppreference.com/w/cpp/string/basic_string/at) **进行边界检查**，类型异常`std::out_of_range`将在无效访问时抛出。

[`operator[]`](http://en.cppreference.com/w/cpp/string/basic_string/operator_at) **不检查边界**，因此如果您尝试访问超出字符串的边界，可能会很危险。它比`at`虽然快一点。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-05T02:16:36.923

**std::string::at**

返回对指定位置 pos 的字符的引用。执行边界检查，在无效访问时将抛出 std::out_of_range 类型的异常。

**字符串::运算符[]**

返回对指定位置 pos 的字符的引用。不执行边界检查。使用 . 越界访问是未定义的行为`operator[]`。

`string::operator[]`应该比`std::string::at`

见[参考](http://en.cppreference.com/w/cpp/string/basic_string)

# c# - 如何为我的程序构建 config.ini？

> ID：14699063
> 
> 赞同：-6
> 
> 时间：2013-02-05T02:13:18.957
> 
> 标签：c#

嗯，正如你看到的标题。我正在尝试构建一个 config.ini 将在 exe 路径中自动定位和生成.. 但是。我无法处理它。每次我这样做时，我都会将源代码破坏为菜鸟。

我想做什么？

我想为程序加载这个ini。它会修改我将设置的一些选项（自动生成路径集“我创建了一个表单来自动启动一些 exes，每次运行此表单时，它都会将文本框重置为空字段。”）（自动设置 sql 连接比如 sqlconnection = 1 -> 加载时，sql连接将自动运行，最近一次成功连接发生在程序中 sqlconnection = 0 -> 加载时，它不会加载sql连接。谁运行程序应该这样做手动）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T02:18:27.200

不是直接的答案，但是，这样做的“.Net 方式”是使用`App.config`文件，而不是`.ini`文件。

`App.config`位于可执行文件的文件夹中，是一个包含应用程序配置的 XML 文件。.Net 框架包括用于在运行时读取/写入配置的内置类和方法。

有关详细信息，请参阅[MSDN 。](http://msdn.microsoft.com/en-us/library/vstudio/a65txexh.aspx)

# ios - 如何在某些状态下删除 UIButton 的图像？

> ID：14699064
> 
> 赞同：10
> 
> 时间：2013-02-05T02:13:20.347
> 
> 标签：ios, uibutton, uiimage, cs193p

我正在做一个纸牌游戏。我希望卡片背面显示图像，卡片正面显示卡片内容。我已经将图像显示在背面，但我不知道在选择它时如何清除它。（所有 run-this-code-when-it's-selected 代码都在运行，所以我知道这不是没有实际改变状态的问题。）这是我的代码：

```
-(void)updateUI {
for (UIButton *cardButton in self.cardButtons) {
    Card *card = [self.game cardAtIndex:[self.cardButtons indexOfObject:cardButton]];
    [cardButton setTitle:card.contents forState:UIControlStateSelected];
    [cardButton setTitle:card.contents forState:UIControlStateSelected | UIControlStateDisabled];
    [cardButton setImage:[UIImage imageNamed:@"cardback.png"] forState:UIControlStateNormal];

//I've tried various permutations of the following three lines, but the image never disappears.

    [cardButton setImage:nil forState:UIControlStateSelected];
    [cardButton setImage:nil forState:UIControlStateSelected | UIControlStateHighlighted];
    [cardButton setImage:nil forState:UIControlStateNormal];

    cardButton.selected = card.faceUp;
    cardButton.alpha=(card.unplayable ? 0.3:1.0);
    [self.scoreLabel setText:[NSString stringWithFormat:@"Score: %d",self.game.score]];
}
} 
```

关于我做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T03:58:21.483

我猜你的问题是这样的（来自 Apple 文档`setImage:forState:`）：

> 通常，如果没有为状态指定属性，则默认使用该`UIControlStateNormal`值。如果`UIControlStateNormal`未设置该值，则该属性默认为系统值。因此，您至少应该设置正常状态的值。

因此，您不能简单地取消设置某些状态的图像，因为将使用默认图像。

我看到了这个问题的几个解决方案：

1.  对要显示的状态使用透明图像，而不是`nil`
2.  为您的卡片提供`UIImageView`您设置为卡片背面图像的子视图。如果卡片面朝下，用于`setHidden:`显示子视图。如果卡片正面朝上，用于`setHidden:`隐藏子视图。我可能会使用`– addTarget:action:forControlEvents:`自定义按钮类中的方法来注册显示或隐藏卡片背面子视图的自定义方法。

**请注意**，您可以通过在子视图中显示卡片的正面来轻松地采取选项 2，然后您可以轻松地为这两个子视图之间的翻转过渡设置动画，以便卡片在按下时“翻转”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T00:04:56.317

为其他状态创建透明图像的一种快速方法是分配和分配一个空图像，因为 nil 将默认为 UIControlStateNormal 的值：

```
UIImage *cardBackImage = [UIImage imageNamed:@"cardback.png"];
UIImage *cardFrontImage = [[UIImage alloc] init];
[cardButton setImage:cardBackImage forState:UIControlStateNormal];
[cardButton setImage:cardFrontImage forState:UIControlStateSelected];
[cardButton setImage:cardFrontImage forState:UIControlStateSelected|UIControlStateDisabled]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T03:55:57.743

如果你使用 setBackgroundImage，那就没问题了。这是我的代码。

```
- (void)updateUI
{
    for (int i=0; i < self.cardButtons.count; i++) {
        Card *card = [self.game cardAtIndex:i];
        UIButton *cardButton = self.cardButtons[i];
        [cardButton setTitle:card.contents forState:UIControlStateSelected];
        [cardButton setTitle:card.contents forState:UIControlStateSelected|UIControlStateDisabled];
        cardButton.selected = card.isFaceup;
        cardButton.enabled = !card.isUnplayable;
        cardButton.alpha = card.isUnplayable ? 0.3 : 1.0;
        //handle flipcard backgroundimage changes;
        UIImage *backgroundImage = (!cardButton.selected) ? [CardGameViewController cardBackgroundImage] : nil;
        [cardButton setBackgroundImage:backgroundImage forState:UIControlStateNormal];
        [self updateScoreLabel:self.game.score];
        NSArray *matchCards = [self.game.matchCards lastObject];
        if (matchCards) {
            UIColor *color = [self getOneMatchColor];
            for (NSNumber *matchCardIndex in matchCards) {
                NSUInteger index = [matchCardIndex integerValue];
                UIButton *matchCardButton = self.cardButtons[index];
                if (color) matchCardButton.backgroundColor = color;
            }
            [self.game.matchCards removeLastObject];
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T13:57:47.973

我找到的最简单的解决方案是检查按钮是否被标记为选中。如果不是，则应用背景图像，否则应用 null UIImage。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-01T20:56:51.407

派对迟到了，我不能投票支持 MultiColour Pixel 的答案，或者评论它，我想是因为我是新来的，没有任何声誉。但这确实是最好和最简单的方法；无需透明图像或其他视图。

我现在和 OP 一样学同样的课程，遇到了同样的问题。解决方法是，当按钮被选中时，你仍然将图像设置为***未选中***状态（为 nil）：

```
UIImage *image = [UIImage imageNamed:@"cardback.png"];
// ...
[cardButton setImage:(card.isFaceUp ? nil : image) forState:UIControlStateNormal]; 
```

而且您永远不会为任何其他州设置图像。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-11T19:41:18.547

以防你像我一样对 Objective C 感到厌烦。这是 Sharon 和 MultiColourPixel 用 Swift 实现的解决方案。

```
func removeImageIfSelected(myButton: UIButton) {
    if myButton.isSelected {
        //set nil for .normal so there isn't a default value for Swift to use
        self.setImage(nil, for: .normal) 
    } else {
        self.setImage(UIImage(systemName: "checkmark.circle.fill"), for: .normal)
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T02:56:09.593

您可以使用标签：

例如：

```
- (IBAction)btnClicked:(id)sender {

if([sender tag]==1){

//do something

}
if([sender tag]==2){

//do something else
} 
```

确保通过转到 Attributes Inspector 为按钮设置不同的标签并将默认值 0 更改为其他值...

希望这可以帮助...

# java - 为什么 Java 整数文字的默认类型是 int 而不是 long？

> ID：14699067
> 
> 赞同：16
> 
> 时间：2013-02-05T02:13:50.487
> 
> 标签：java, integer, literals

我很困惑为什么 Java 整数文字默认为`int`而不是`long`. 这似乎造成了不必要的混乱。

`long`首先，它要求程序员在为超过最大`int`大小 (2147483647)的 a 赋值时采用特殊语法（将“L”附加到文字）。

```
long x = 2147483647; // Compiles
long y = 2147483648; // Does not compile
long z = 2147483648L; // Compiles 
```

其次，在使用`Long`包装类时，程序员必须始终使用[这个 SO question](https://stackoverflow.com/questions/14425606/java-wrapper-classes-why-integer-literals-fail-for-long-but-work-for-smaller)`long`中解释的文字表示法。

```
Long x = 250; // Does not compile
Long y = 250L; // Compiles 
```

第三，考虑到从`int`文字到“较窄”数据类型 (`short`和`byte`) 的隐式转换在所有情况下都可以正常工作（据我所知），似乎简单地使所有整数文字类型`long`成为明显的解决方案......对? 这难道不会完全消除在特殊情况下将“L”附加到整数文字的奇怪系统的需要吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T03:14:28.273

此行为是设计¹并编入[JLS: Java Language Specification](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)。

首先，请注意，这与[扩展](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.2)*无关*，这就是为什么（有效）整数文字被提升为长值的原因。相反，这与[int literal](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.2)的规范有关：

> 如果十六进制、八进制或二进制 int 文字不适合 32 位，则会出现编译时错误。

最小和最大的有符号 32 位整数值分别为 -2147483648 和 2147483647。

* * *

¹我不在乎推测它*为什么*会这样工作，并且像 C# 这样的语言有不同的规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T02:30:16.117

速度

仅使用所需的大小即可提高效率。int 适用于从 -2^31 到 2^31 的数字。如果在 int 就足够的地方使用 long ，则会减慢代码速度。例如，这段代码在我的机器上运行时间为 7.116 秒。通过将其切换为使用 int，我将机器上的运行时间减少到 3.74 秒：

```
public class Problem005 {

  private static boolean isDivisibleByAll(long n, long ceiling) {
    for (long i = 1; i < ceiling; i++)
      if (n % i != 0)
        return false;
    return true;
  }

  public static long findSmallestMultiple (long ceiling) {
    long number = 1;
    while (!isDivisibleByAll(number, ceiling))
      number++;
    return number;
  }

}

public class Stopwatch {
  private final long start;

  public Stopwatch() {
    start = System.currentTimeMillis();
  }

  public double elapsedTime() {
    long now = System.currentTimeMillis();
    return (now - start) / 1000.0;
  }

}

public class Main {

  public static void main(String[] args) {

    Stopwatch stopwatch005 = new Stopwatch();

    long highestMultiple = 20;
    long findSmallestMultipleOutput = findSmallestMultiple(highestMultiple);
    double findSmallestMultipleTime = stopwatch005.elapsedTime();
    System.out.println("Problem #005");
    System.out.println("============");
    System.out.print("The multiple of the numbers 1-" + highestMultiple + " is = ");
    System.out.print(findSmallestMultipleOutput);
    System.out.println(" with a time of " + findSmallestMultipleTime + " seconds.\n ");
  }   
} 
```

## 改为使用 int：

```
public class Problem005 {

  private static boolean isDivisibleByAll(int n, int ceiling) {
    for (int i = 1; i < ceiling; i++)
      if (n % i != 0)
        return false;
    return true;
  }

  public static int findSmallestMultiple (int ceiling) {
    int number = 1;
    while (!isDivisibleByAll(number, ceiling))
      number++;
    return number;
  }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T03:09:55.050

默认文字的可能原因之一`int`是使用`lont`可能会导致难以检测到多线程应用程序中的错误，如[JLS 17.7 非原子处理 double 和 long](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7)中所述。

> 出于 Java 编程语言内存模型的目的，对**非易失性**long 或 double 值的单次写入被视为两次单独的写入：每个 32 位一半。这可能导致线程从一次写入中看到 64 位值的前 32 位，而从另一次写入中看到后 32 位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T02:27:02.213

我认为你是对的，`long`今天会是一个更好的默认值。回到 1995 年，`long`可能太长而不能成为默认值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T02:17:16.970

为了

```
Long x = 250; 
```

那是行不通的。Java 使用自动装箱，它自动从对象代表类转换为原始类型。至于其他的，int 只是使用的主要数字类型。至少对于我最常使用它们的用途而言，Long 仅用于日期和时间。另一方面，整数默认用于其他所有内容。

如果你真的想了解细节，我相信这会让你的吉米更加沙沙作响：

```
float pi = 3.14; // Does not compile.
float pi = 3.14F; // Compiles 
```

同样在这种情况下，当涉及小数时，双精度优先。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T02:22:31.253

我认为使 int 文字不需要类型指示的原因是 int 旨在成为普通的整数类型。同样，double 是普通的浮点类型。这个想法似乎是通过默认为最常见的类型来限制需要类型指示的文字数量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T03:54:33.730

如果中间结果是用最长的整数类型计算的，那么语言可能会要求所有不会溢出的整数算术，就好像它们是一样的。在这样的语言中，如果以 L 开头的变量是 64 位，以 W 开头的是 32 位，而以 H 开头的是 16 位，表达式如下

```
L1 = W1*W2;
W3 = (W1+W2) >> 1 
```

将以这样的方式进行评估以避免溢出，但是像这样的表达式

```
W4 = W1+W2 
```

将使用 32 位数学进行评估（因为即使中间结果被评估为 32 位，分配给 W4 也会发生任何溢出），以及类似的表达式

```
W5 = (H1*H2) >> 1 
```

可以评估为 32 位，因为结果不能溢出 32 位值。

这种语言在大多数情况下可能非常有效，因为编译器通常不难确定每个子表达式的最大相关整数大小。在这样的语言中，数字文字是“long”还是“int”并不重要，因为编译器会对它的数值更感兴趣。

然而，在 Java 中，不同大小的数字文字具有不同的语义。如果将 an 乘以`int`常数 128，则`int`必须不大于 16,777,215，否则将发生溢出。如果将 乘以`int`一个常数`128L`，则结果可能只存储在可以接受 的某个地方`long`。

# ruby-on-rails - 如何使查找结果的顺序与数组输入的顺序相匹配

> ID：14699069
> 
> 赞同：0
> 
> 时间：2013-02-05T02:13:55.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在对 Person 模型进行查找。我使用一组 id 作为我的 Find 方法的输入。数组代表特定人的祖先，数组的顺序很重要。

我希望查找结果（关系）与输入祖先数组的顺序相同。不幸的是，返回的结果是按 id 的顺序（升序）排序的。有没有办法防止这种行为，并按照 ancestry_array 的顺序返回结果。

模型中没有反映祖先顺序的属性，所以我看不到使用 order 方法的直接方法。如果可能的话，我希望用 ruby​​ on rails 来实现这一点。

```
ancestry_array = Array.new

ancestry_array = [23,45,89,12,90,5]

Person.find(23,45,89,12,90,5)

returned order of relation: 5,12,23,45,89,90

desired order of returned relation: 23,45,89,12,90,5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:43:59.000

我将在答案中转换上述评论。

我不知道你是否可以在 SQL 中做你想做的事，但如果这在你的情况下是有效的，你可以使用：

```
ancestry_array = [23,45,89,12,90,5] 
r = Person.find(ancestry_array) 
results = ancestry_array.map{|id| r.detect{|p| p.id == id}} 
```

# c++ - 在 c++ 中反转 c 字符串的最快方法是什么？

> ID：14699076
> 
> 赞同：0
> 
> 时间：2013-02-05T02:14:41.040
> 
> 标签：c++

仅使用库在 c++ 中反转 c 字符串的最快方法是什么？特别是，是否有任何方法需要少于 O(strlen) 时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T02:16:27.143

不可能有一种方法可以`n`在短时间内反转一个长度的字符串`O(n)`。根据“反转”的定义，每个字符都必须至少读取一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T02:17:10.157

我怀疑它的复杂性低于 O(N) 是可能的。鉴于 C 字符串的定义方式（NUL 终止），您甚至无法找到复杂度低于 O(N) 的字符串的最终元素，因此很难想象实际上用它做任何复杂度较低的事情。

至于你如何做到这一点，通常是将第一个元素与最后一个元素交换，第二个元素与倒数第二个元素交换，依此类推。

要实现比线性更快的目标，您可能需要从存储字符串的长度开始。然后，您将（例如）设置一个标志以指定从末尾开始，而不是实际反转它。这将允许恒定的复杂性“逆转”。这在 C++ 中相当容易管理，您可以在其中“保护”存储，并重载运算符以提供所需方向的访问。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T02:26:34.613

没有比 O(n) 更好的时间了，因为你必须至少触摸每个字符一次。

所以像：

```
void reverseString (char *s) {
    char t, *d = &(s[strlen (s) - 1]);
    while (d > s) {
        t = *s;
        *s++ = *d;
        *d-- = t;
    }
} 
```

可能与您在标准 C++ 中的效率一样高。

现在有一些方法可以改善这一点，如果你被允许强加额外的信息，你可以根据你的访问模式将成本摊销到小于 O(n) 的程度。

我的意思是在原始字符串中保留一个反向字符串和脏标志。

*   如果您在标志脏时尝试访问反转的字符串，请计算反转，将标志设置为清除并返回计算/存储的反转。成本是 O(n)。
*   如果您在标志干净时尝试访问反转的字符串，只需返回计算/存储的反转。成本是 O(1)。
*   如果您更改了原始字符串，请将标志设置为脏。成本是 O(1)。

如果您访问反向字符串的频率高于更改原始字符串的频率，则成本会低于简单的“每次计算反向字符串”方法。

# ruby-on-rails - 来自一个应用程序的会话影响本地主机上的不同应用程序

> ID：14699081
> 
> 赞同：0
> 
> 时间：2013-02-05T02:15:31.090
> 
> 标签：ruby-on-rails

我有一个使用会话的 Rails 应用程序，我在本地主机上的 Chrome 中使用它。将其关闭后，我在 Chrome 中启动了另一个不使用会话的应用程序，并收到一个会话错误，该错误指的是新的无会话应用程序中不存在的类。

```
ActionDispatch::Session::SessionRestoreError (Session contains objects whose class definition isn't available.
Remember to require the classes for all objects kept in the session.
(Original exception: uninitialized constant Question [NameError])
): 
```

当我在另一个浏览器（我以前没有使用过）中尝试新的“无会话”应用程序时，即使它继续无法在 Chrome 中工作，它也能正常工作，所以我猜测来自第一个应用程序的会话正在徘徊镀铬并干扰第二个。我清除了缓存，但它仍然无法正常工作（所以我可能需要在 Chrome 中再次清除 1000 次），但是，我也找到了这个方法

```
reset_session 
```

[http://api.rubyonrails.org/classes/ActionController/Base.html#M000668](http://api.rubyonrails.org/classes/ActionController/Base.html#M000668)

但是当我把它放在应用程序控制器中时（希望它会清除整个应用程序的所有会话），它说未定义的局部变量或方法。

两个问题

1) 是预期的行为，即来自第一个应用程序的会话会影响第二个应用程序的功能吗？

2）我应该如何使用reset_session来避免这个问题，或者有其他方法吗？

清除缓存后更新在 Chrome 中运行的应用程序，但我仍然想知道如果可能的话如何使用 reset_session

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:04:13.847

Rails 的最佳实践是使用 Ruby 版本管理器。使用 RVM 重新安装 ruby​​ 将比调试此类问题花费更少的时间。

[https://rvm.io/](https://rvm.io/)

# css - 从活动选项卡中删除底部边框

> ID：14699082
> 
> 赞同：0
> 
> 时间：2013-02-05T02:15:38.253
> 
> 标签：css

如何修改下面的 html 代码，以便摆脱或隐藏活动和/或选定选项卡的底部边框？我似乎无法弄清楚这一点，这对我来说没有任何意义。

```
<style type="text/css">
      ul#tabs { list-style-type: none; margin: 30px 0 0 0; padding: 0 0 0.3em 0; }
      ul#tabs li { display: inline; }
      ul#tabs li a { color: #42454a; background-color: #dedbde; border: 1px solid #c9c3ba; border-bottom: none; padding: 0.3em; text-decoration: none; }
      ul#tabs li a:hover { background-color: #f1f0ee; }
      ul#tabs li a.selected { color: #000; background-color: #f1f0ee; font-weight: bold; padding: 0.3em 0.3em 0.38em 0.3em; }
      div.tabContent { width: 1000px; border: 1px solid #c9c3ba; padding: 0.5em; background-color: #f1f0ee; }
      div.tabContent.hide { display: none; }
    </style> 
```

这是小提琴：http: [//jsfiddle.net/EnfxC/](http://jsfiddle.net/EnfxC/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:47:46.313

如果你想隐藏底部边框，那么你可以在css中编写代码：（为此添加另一个类）bottom-border：none！important;

请告诉我html代码...然后我可以帮助你

# java - 是否可以使用带有 JPA 的 Spring MVC 仅更新实体上的属性子集？

> ID：14699087
> 
> 赞同：17
> 
> 时间：2013-02-05T02:16:01.493
> 
> 标签：java, spring, hibernate, jpa, spring-roo

我正在使用 Spring Roo，使用 Spring MVC 和 JPA 对 MySQL 数据库进行持久性。总的来说，我对 Spring MVC 和 Java 非常陌生，但使用过 CakePHP 和 Rails。

我有一个`User`实体，除了密码之外还包含个人详细信息。像这样的东西（不包括其他 .aj 文件中的许多 Roo 生成的功能）：

```
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "ID")
    private Long id;

    @Column(name = "PASSWORD", length = 32)
    private String password;

    @Column(name = "FIRST_NAME", length = 25)
    private String firstName;

    @Column(name = "LAST_NAME", length = 25)
    private String lastName;

    @Column(name = "ADDRESS", length = 255)
    private String address;

    // The appropriate getters and setters
    ...
} 
```

然后我在我的控制器中有一个编辑操作，我`User`从 Roo 的自动生成的脚手架创建了以下约定：

```
@RequestMapping(value="/edit", method = RequestMethod.GET)
public String editForm(Model uiModel) {
    String username = (String) SecurityContextHolder.getContext().getAuthentication().getPrincipal();
    uiModel.addAttribute("user", User.findUserByUsername(username).getSingleResult());
    return "account/edit";
} 
```

还有一个 JSPX 视图来呈现表单，同样遵循 Roo 的约定：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<div xmlns:field="urn:jsptagdir:/WEB-INF/tags/form/fields" xmlns:form="urn:jsptagdir:/WEB-INF/tags/form" xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0">
    <jsp:directive.page contentType="text/html;charset=UTF-8"/>
    <jsp:output omit-xml-declaration="yes"/>
    <form:update id="" label="Personal Details" modelAttribute="user" path="/account" versionField="none">
        <field:input id="" field="firstName" label="First Name" />
        <field:input id="" field="lastName" label="Last Name" />
        <field:textarea id="" field="address" label="Street Address" />
    </form:update>
</div> 
```

我*不*希望表单更新密码，只需要提供的字段（名字、姓氏和地址）。

更新操作，再次遵循 Roo 约定：

```
@RequestMapping(method = RequestMethod.PUT, produces = "text/html")
public String edit(@Valid User user, BindingResult bindingResult, Model uiModel, HttpServletRequest httpServletRequest) {
    if (bindingResult.hasErrors()) {
        uiModel.addAttribute("user", user);
        return "account/edit";
    }
    uiModel.asMap().clear();
    user.merge();
    return "redirect:/account";
} 
```

用户对象已完美更新，但问题是它用 null 覆盖了密码字段，因为它没有作为表单中的输入提供，因此在传递给表单提交请求处理程序的用户对象中设置为 null。Roo 生成的脚手架不会出现问题，因为它们为所有列提供表单输入。所以我可以将它添加为隐藏字段，但这听起来不是一个好主意。而且我觉得有更好的方法来做到这一点......

* * *

## **TL;DR 如何仅更新表单中提供的实体属性而不覆盖其他属性？**

换句话说，我怎样才能让 Spring/JPA 生成 SQL

```
UPDATE user SET firstname=?, lastname=?, address=? 
```

代替

```
UPDATE user SET firstname=?, lastname=?, address=?, password=? 
```

代码示例会很棒，因为我对这一切都不熟悉 :)

* * *

谢谢！

* * *

**更新：**我能够使用 yglodt 的建议使其工作，将以下方法添加到我的用户模型中：

```
@Transactional
public void mergeWithExistingAndUpdate() {
    final User existingUser = User.findUser(this.getId());

    existingUser.setFirstName(this.getFirstName());
    existingUser.setLastName(this.getLastName());
    existingUser.setAddress(this.getAddress());

    existingUser.flush();
} 
```

并从我的控制器操作而不是 user.merge() 调用它：

```
user.mergeWithExistingAndUpdate(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T08:22:51.123

我通常在服务层解决这个问题。

您可以从数据库中读取要更新的实体，并覆盖您从表单中获取的属性。

这样你只改变你想要的属性。

代码示例：

```
@Service
@Transactional
public class UserService {

    @Resource(name = "sessionFactory")
    private SessionFactory  sessionFactory;

    public void mergeWithExistingAndUpdate(final Person personFromPost) {

        Session session = sessionFactory.getCurrentSession();

        Person existingPerson = (Person) session.get(Person.class, personFromPost.getId());

        // set here explicitly what must/can be overwritten by the html form POST
        existingPerson.setName(personFromPost.getName());
        existingPerson.setEmail(personFromPost.getEmail());
        existingPerson.setDateModified(new Date());
        existingPerson.setUserModified(Utils.getCurrentUser());

        session.update(existingPerson);
    }

} 
```

**编辑 1**

实际上有一个 Spring-way 来解决这个问题，使用`@SessionAttributes`，看到这个答案：

[https://stackoverflow.com/a/3675919/272180](https://stackoverflow.com/a/3675919/272180)

我还没有测试它，但它看起来很有希望。

**编辑 2**

最终我测试了它，它按预期工作。

然而，有一件事可以让你在你的脚上开枪：

如果您使用相同的表单打开多个选项卡，则打开最后一个选项卡会覆盖`sessionAttribute`其他选项卡，并且在提交时可能会损坏您的数据。这篇博文中有一个解决方案：http: [//marty-java-dev.blogspot.com/2010/09/spring-3-session-level-model-attributes.html](http://marty-java-dev.blogspot.com/2010/09/spring-3-session-level-model-attributes.html)

但最后，如果您从不打开多个选项卡进行编辑，无论如何您都不会遇到问题。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-10-11T07:14:43.163

如果您不想更新特定属性，可以使用以下标记[`updatable=false`](https://vladmihalcea.com/how-to-update-only-a-subset-of-entity-attributes-using-jpa-and-hibernate/)：

```
@Column(name="CREATED_ON", updatable=false)
private Date createdOn; 
```

一旦你加载了一个实体并且你修改了它，只要当前的`Session`or`EntityManager`是打开的，Hibernate 就可以通过脏检查机制来跟踪变化。然后，在 期间`flush`，将执行 SQL UPDATE。

如果您不喜欢所有列都包含在`UPDATE`语句中，则可以使用动态更新：

```
@Entity
@DynamicUpdate
public class Product {
   //code omitted for brevity
} 
```

然后，只有修改后的列才会包含在`UPDATE`语句中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:02:29.733

[`@DynamicUpdate`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/annotations/DynamicUpdate.html)如果您的持久性提供程序是 Hibernate，请在实体上使用特定于 hibernate 的注释：

> 对于更新，该实体是否应该使用动态 sql 生成，其中仅在准备好的 sql 语句中引用更改的列？
> 
> 请注意，对于分离实体的重新附加，如果不启用 select-before-update ，这是不可能的。

# c# - TreeView 选中/取消选中所有子项

> ID：14699102
> 
> 赞同：4
> 
> 时间：2013-02-05T02:17:46.083
> 
> 标签：c#, treeview

如何选中/取消选中 TreeView 中的所有子项？当其中一项变为选定状态并且子项已选中/未选中时，可能会发生错误。

**[链接到 VS 2010 项目+Exe](http://www.sendspace.com/file/2nrt2a)**

**[YouTube 上的视频](http://www.youtube.com/watch?v=kviRgkpUiMs)**

```
private void Form1_Load(object sender, EventArgs e)
    {
        treeView1.CheckBoxes = true;
        treeView1.BeginUpdate();
        treeView1.Nodes.Add("1111");
        treeView1.Nodes[0].Nodes.Add("2222");
        treeView1.Nodes[0].Nodes.Add("2222");
        treeView1.Nodes[0].Nodes.Add("2222");
        treeView1.Nodes[0].Nodes.Add("2222");
        treeView1.Nodes[0].Nodes[1].Nodes.Add("3333");
        treeView1.Nodes[0].Nodes[1].Nodes[0].Nodes.Add("4444");
        treeView1.Nodes[0].Nodes[1].Nodes[0].Nodes.Add("4444");
        treeView1.Nodes[0].Nodes[1].Nodes[0].Nodes.Add("4444");
        treeView1.EndUpdate();

        treeView1.ExpandAll();
    }

    private void treeView1_AfterCheck(object sender, TreeViewEventArgs e)
    {
        treeView1.BeginUpdate();

        foreach (TreeNode Node in e.Node.Nodes)
        {
            Node.Checked = e.Node.Checked;
        }

        treeView1.EndUpdate();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T02:52:34.533

使用您在 Form_Load 中的代码保持该代码正常工作并在您的代码中添加这两种方法

```
private void Form1_Load(object sender, EventArgs e)
{
    treeView1.CheckBoxes = true;
    treeView1.BeginUpdate();
    treeView1.Nodes.Add("1111");
    treeView1.Nodes[0].Nodes.Add("2222");
    treeView1.Nodes[0].Nodes.Add("2222");
    treeView1.Nodes[0].Nodes.Add("2222");
    treeView1.Nodes[0].Nodes.Add("2222");
    treeView1.Nodes[0].Nodes[1].Nodes.Add("3333");
    treeView1.Nodes[0].Nodes[1].Nodes[0].Nodes.Add("4444");
    treeView1.Nodes[0].Nodes[1].Nodes[0].Nodes.Add("4444");
    treeView1.Nodes[0].Nodes[1].Nodes[0].Nodes.Add("4444");
    treeView1.EndUpdate();
    treeView1.ExpandAll();
}

private void treeView1_AfterCheck(object sender, TreeViewEventArgs e)
{
    foreach (TreeNode childNode in e.Node.Nodes)
    {
        childNode.Checked = e.Node.Checked;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T16:24:51.647

我想出的解决方案如下：

*   要执行我使用 Linq 的选择：

    `if (e.Node.Nodes.Count > 0) e.Node.Nodes.Cast<TreeNode>().Where(tnc => tnc.Checked != e.Node.Checked).ForEach(tn => tn.Checked = e.Node.Checked);`

*   然后为了处理事件选择，我扩展了 TreeView 类： `public class MyTV : TreeView { protected bool TopOfCascade; TreeNode startNode; public Action FinishedCheckEventsDelegate; public Action InitiateCascadeCheckEventsDelegate; public MyTV() : base() { TopOfCascade = false; startNode = null; } protected override void OnBeforeCheck(TreeViewCancelEventArgs e) { base.OnBeforeCheck(e); if (!TopOfCascade && !e.Cancel) { TopOfCascade = true; startNode = e.Node; if (InitiateCascadeCheckEventsDelegate != null) InitiateCascadeCheckEventsDelegate(); } } protected override void OnAfterCheck(TreeViewEventArgs e) { base.OnAfterCheck(e); if (startNode == e.Node && e.Action != TreeViewAction.Unknown) { if (FinishedCheckEventsDelegate != null) FinishedCheckEventsDelegate(); TopOfCascade = false; startNode = null; } }` 在主机控件中，您可以挂钩前置和后置级联事件并遍历所有选中/未选中的树节点，避免大量交叉事件触发。您通过某个容器控制级联。

我从网络上的以下实现中获得了 ForEach 到 IEnumerable：

```
public static void ForEach<T>(this IEnumerable<T> source, Action<T> action)
{
  if (source == null) throw new ArgumentNullException("source");
  if (action == null) throw new ArgumentNullException("action");
  foreach (T item in source)
  {
    action(item);
  }
} 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T20:42:02.900

这是一个答案（来自 Hans Passant）：

[Winforms treeview，递归检查子节点问题](https://stackoverflow.com/questions/3174412/winforms-treeview-recursively-check-child-nodes-problem?rq=1)

我将其写为答案，而不是评论以使其更容易找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-16T15:57:44.930

```
 private void treeView1_AfterCheck(object sender, TreeViewEventArgs e)
    {

        if (e.Action != TreeViewAction.Unknown)
        {
            if (e.Node.Nodes.Count > 0)
            {
                /* Calls the CheckAllChildNodes method, passing in the current 
                Checked value of the TreeNode whose checked state changed. */
                this.CheckAllChildNodes(e.Node, e.Node.Checked);
            }

        }
    }

   private void CheckAllChildNodes(TreeNode treeNode, bool nodeChecked)
    {
        foreach (TreeNode node in treeNode.Nodes)
        {
            node.Checked = nodeChecked;
            if (node.Nodes.Count > 0)
            {
                // If the current node has child nodes, call the CheckAllChildsNodes method recursively. 
                this.CheckAllChildNodes(node, nodeChecked);
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-23T22:18:57.123

```
 private void CheckAllChildNodes(TreeNode treeNode, bool nodeChecked)
    {
        foreach (TreeNode node in treeNode.Nodes)
        {
            node.Checked = nodeChecked;
            if (node.Nodes.Count > 0)
            {
                this.CheckAllChildNodes(node, nodeChecked);
            }
        }
    }
    private void treeView_AfterCheck(object sender, TreeViewEventArgs e)
    {
        if (e.Action != TreeViewAction.Unknown)
        {
            if (e.Node.Nodes.Count > 0)
            {
                if (!e.Node.Checked)
                {
                    this.CheckAllChildNodes(e.Node, e.Node.Checked);
                }
            }
        }

        if (e.Node.Parent != null)
        {
            TreeNode n = e.Node;
            while (n.Parent != null)
            {
                if (n.Checked)
                {
                    n.Parent.Checked = true;
                }
                n = n.Parent;
            }
        }

    } 
```

# perl - 使用 List:Gen 中的范围来遍历各种值

> ID：14699105
> 
> 赞同：0
> 
> 时间：2013-02-05T02:18:00.713
> 
> 标签：perl

我正在尝试使用[List::Gen](https://metacpan.org/module/List%3a%3aGen)遍历包含元素的数组：

```
[0,  5000, 10000, ... 20000] 
```

但是下面的代码给出了一个错误

```
use List::Gen;

my $nsamps = range 0, 5000, 20000;

for( $nsamp ($nsamps) { 
     print $nsamp
 } 
```

错误是：

```
$nsamp requires explicit package ... 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:24:02.610

要使用[`List::Gen`](https://metacpan.org/module/List%3a%3aGen)'s range 函数，步长作为第三个参数提供：

```
use strict;
use warnings;

use feature 'say';
use List::Gen;

my $nsamp = range 0, 20_000, 5_000 ;

say for @$nsamp;  # 0
                  # 5000
                  # 10000
                  # 15000
                  # 20000

# Or, for a faster equivalent

while ( my ( $num ) = $nsamp->() ) {
    say $num;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T02:26:31.303

你从来没有声明过`$nsamp`。

还有，有一个流浪`(`。

最后，你的缩进很不稳定。

固定的：

```
for my $nsamp ($nsamps) { 
    print $nsamp;
} 
```

# file-upload - IEnumerable 不会模型绑定

> ID：14699106
> 
> 赞同：2
> 
> 时间：2013-02-05T02:18:08.637
> 
> 标签：file-upload, asp.net-mvc-4, model-binding

我正在使用 mvc 4 并尝试将多个文件作为模型的一部分提交。

我的表格看起来像这样

```
 <% using (Html.BeginForm("Edit", "Issue",FormMethod.Post, new {id = "issueForm", encType="multipart/form-data"})) %> 
```

呈现

```
<form id="issueForm" method="post" enctype="multipart/form-data" action="/Issue/Edit"> 
```

我的动作如下

```
[Authorize]
[HttpPost]
public ActionResult Edit(IssueViewModel viewmodel) 
```

并且视图模型上有一个属性

```
public IEnumerable<HttpPostedFileBase> Files { get; set; } 
```

该表单包含如下文件的输入：

```
<input id="filesX" type="file" name="Files"> 
```

其中 X 是通过 javascript 添加了多少文件框的递增数。

我使用了提琴手和萤火虫，我可以明确地看到文件正在请求中发送，这也可以通过查看服务器上的 Request.Files[0] （发送 1 个单个文件时）来确认，因为它显示了内容和文件名。

当我查看 Files 属性时，它如下所示： ![在此处输入图像描述](../Images/eef2eea4d6c8dec7528e8fe9ccdeaad4.png)

因此，出于某种原因，文件集合似乎填充了空对象，而不是实际的文件数据，这很奇怪。我认为如果模型绑定不起作用，则整个 Files 集合将为空，而不是其中的第一项。

关于这里发生了什么的任何想法？

**编辑：** 我还尝试将文件作为操作方法中的参数（实际上是这样开始的），尝试更改文件输入名称的大小写，这两者都没有效果。

**编辑 2：** 它似乎在 IE 中提交很好，但在 firefox 或 chrome 中没有

**编辑 3：** 似乎在 FireFox/Chome 中 X-Requested-With 标头与“XMLHttpRequest”一起发送。我怀疑我们正在使用的 ajaxform 插件发生了一些奇怪的事情，并且它没有创建它的 iframe 来正确提交

**编辑 4：** 我已经在一个单独的项目中复制了大部分代码，这一切似乎都有效，不知道为什么在这种情况下它不会发生一定是奇怪的事情。我能够追踪的唯一一件事是任何不支持 xmlhttprequest 级别 2 的浏览器似乎都会导致文件正确绑定。

# vb.net - 找到正确的 OleDb 连接字符串 VB.Net

> ID：14699111
> 
> 赞同：1
> 
> 时间：2013-02-05T02:18:34.970
> 
> 标签：vb.net, connection-string, oledb, oledbconnection

我正在旧 XP 机器上创建一个 32 位应用程序，该应用程序也将在 Win7 或更高版本上运行。

所以我试图测试什么连接字符串可以工作。如：

```
Private Function test_ace_or_jet(ByVal mdb_path As String) As String
        Dim connString As String
        Dim dbMaintPort As OleDb.OleDbConnection

        connString = ""

        Try
            connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & mdb_path

            dbMaintPort = New OleDb.OleDbConnection(connString)
            dbMaintPort.Open()

            dbMaintPort.Close()

            MsgBox("1 was found")
        Catch ex As Exception
            MsgBox("Could not open 1" & vbCrLf & vbCrLf & ex.Message)
            Try
                connString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & mdb_path
                dbMaintPort = New OleDb.OleDbConnection(connString)
                dbMaintPort.Open()
                dbMaintPort.Close()

                MsgBox("2 was found")
            Catch ex2 As Exception
                connString = ""
                MsgBox("Could not open 2" & vbCrLf & vbCrLf & ex2.Message)
            End Try
        End Try
        test_ace_or_jet = connString
    End Function 
```

但是我发现的问题是在 XP 机器上，第一个连接字符串不会失败。它根本没有安装 ACE。

如何测试是否使用其中一种？我能否获得上述函数来给我正确的连接字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:09:03.690

如果你一直在尝试/捕捉直到找到一些东西，你可能会把自己嵌套得很深......你可能会更好（在测试时），做一个循环并有一个连接字符串数组，比如

```
Private Function test_ace_or_jet(ByVal mdb_path As String) As String
   Dim connString As String
   Dim dbMaintPort As OleDb.OleDbConnection
   Dim ValidConnection As Boolean
   Dim finalConnection As String
   Dim connStrings(2) As String
   connStrings(0) = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & mdb_path
   connStrings(1) = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & mdb_path
   connStrings(2) = "AnyOtherProviderTestConnectionStrings..."

   ValidConnection = False
   For value As Integer = 0 To 2
      Try
         dbMaintPort = New OleDb.OleDbConnection(connStrings(value))
         dbMaintPort.Open()
         dbMaintPort.Close()

         MsgBox("Success: " & connStrings(value))
         ValidConnection = True
         finalConnection = connStrings(value)
      Catch 
      End Try

      if ValidConnection
         exit
      endif 

   Next

   ; continue with whatever else you want to do with test result and final string

End Function 
```

另外，您看过 ConnectionStrings.com 吗？他们可能会为您提供更多选项和连接示例，以测试不同的提供商等。

# perl - Perl中的文件修改时间，unix时间戳，时区？

> ID：14699113
> 
> 赞同：1
> 
> 时间：2013-02-05T02:19:00.383
> 
> 标签：perl

我只想在日志目录中保留今天的日志。

```
use POSIX qw(mktime);
use Time::Local;
my $file="20130204.log";
print "$file\t";
open my $fh,'<',$file;
my $modtime = (stat($fh))[9];
print "modtime:$modtime\n";
my $time = timelocal(59,59,23,4,2,2013);
print "Time::Local::time(2013-2-4 23:59:59) => $time\n";
$time = mktime(59,59,59,4,2,2013-1900,0,0);
print "mktime(2013-2-4 23:59:59) => $time\n"; 
```

结果：

```
20130204.log        modtime:1359989999
Time::Local::time(2013-2-4 23:59:59) => 1362409199
mktime(2013-2-4 23:59:59) => 1362538799 
```

`date`：`Tue Feb 5 10:57:00 JST 2013`

`ls -l`

```
-rw-r--r-- 1 root root 945203711 Feb  4 23:59 20130204.log 
```

`date -d '2013-02-04 23:59:59' +%s`: 1359989999

为什么 Time::Local::time 和 mktime 不给我 1359989999？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:22:09.633

一月 = 0, 1900 = 0

```
$time = timelocal(59,59,23,4,2-1,2013-1900);
$time = mktime(59,59,59,4,2-1,2013-1900,0,0); 
```

# java - JAX-WS 客户端：跨多个服务维护会话/cookie

> ID：14699114
> 
> 赞同：11
> 
> 时间：2013-02-05T02:19:04.113
> 
> 标签：java, cookies, jax-ws, session-cookies, jax-ws-customization

我正在使用 Netbeans 自动创建基于 WSDL 文件的 web 服务客户端。这很好用，除了我使用的 Web 服务要求我将 HTTP 标头中的自定义 cookie 传递给每个 Web 服务以证明我的身份。

我使用一个名为的网络服务`Utility`来获得我的授权。这会设置一个 cookie，需要在对任何 Web 服务的所有后续调用中提供该 cookie。

这可以通过将 Web 服务端口的 BindingProvider设置`javax.xml.ws.session.maintain`为来完成。`true`这对于后续调用`Utility`web 服务中的方法非常有用。问题是这仅维护该单个 Web 服务的会话/cookie。我也需要它。

我需要将 cookie 传递给名为 How can I done this?的*单独*Web 服务？`History`拥有一个实用程序和历史都可以扩展并共享相同会话状态的超级服务类是否可行？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-05T14:47:54.450

我找到了解决方案。

拨打电话后，您可以使用它获取响应标头：

```
((BindingProvider)port).getResponseContext().get(MessageContext.HTTP_RESPONSE_HEADERS); 
```

找到`Set-Cookie`标头并存储其值。

然后在您的下一个请求（在任何网络服务中）之前，您可以设置 Cookie 标头：

```
((BindingProvider)port).getRequestContext().put(
            MessageContext.HTTP_REQUEST_HEADERS,
                Collections.singletonMap("Cookie", Collections.singletonList(cookieValue)
            )
        ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-11T19:23:14.623

只是评论，因为上面的解决方案对我不起作用。我得到了 UnsupportedOperationException。我认为问题是因为 singletonMap 不允许更改而引起的。还需要 xml 标头，所以我先设置了这些标头。

```
Map<String, List<String>> headers= CastUtils.cast((Map)port.getRequestContext().get("javax.xml.ws.http.request.headers"));
if (headers == null) {
    headers = new HashMap<String, List<String>>();
    port.getRequestContext().put("javax.xml.ws.http.request.headers", headers);
}

headers.put("Cookie", Collections.singletonList(cookieValue));
((BindingProvider)port).getRequestContext().put(MessageContext.HTTP_REQUEST_HEADERS, headers); 
```

# jquery - 在表单中多次设置errorContainer

> ID：14699116
> 
> 赞同：3
> 
> 时间：2013-02-05T02:19:22.180
> 
> 标签：jquery, jquery-validate

我有一个`$('#myForm')`有两个 div 的表单，`$('#myDiv1')`每个`$('#myDiv2')`都有两个文本字段。我想要`errorContainer`两个 div 中的每一个都有一个。

如果我打电话`$('#myForm').validate({ ... });`，我只能指定一个`errorContainer`，这不是我想要的。

如果我打电话`$('#myDiv1').validate({ ... });`，我会从 jquery-validate: 中得到一个错误`Uncaught TypeError: Cannot read property 'settings' of undefined`。这导致我假设除了表单之外我不能调用 validate 。

有没有办法可以做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:16:43.053

您可以使用以下内容：

```
$("#myform").validate({
   errorPlacement: function(error, element) {}
}); 
```

其中“元素”是当前表单输入的 jQuery 对象。它在[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:26:32.520

验证方法*必须*在表单元素上调用。

我在实践中没有使用过这个，但[选项文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)似乎表明您可以为 errorContainer 选项传递多个选择器。

```
$("#myform").validate({
   errorContainer: "#messageBox1, #messageBox2",
   errorLabelContainer: "#messageBox1 ul",
   wrapper: "li", debug:true,
   submitHandler: function() { alert("Submitted!") }
}); 
```

# php - Linux Centos MySQL PHP InnoDB 上的内存管理

> ID：14699117
> 
> 赞同：0
> 
> 时间：2013-02-05T02:19:31.207
> 
> 标签：php, mysql, linux, apache, webserver

这台服务器是否有足够的内存，如果有或没有，你怎么知道？你会推荐什么改变？

我希望了解我应该如何管理虚拟机 LAMP 堆栈的内存，或者更具体地说，我可以如何配置以最大化可用内存。我不是在寻找诸如“您需要更多内存”或“停止使用 innodb”或“您需要切换到 fastcgi 以提供 PHP 服务”之类的答案。在不更改任何堆栈的情况下，我正在寻找有关如何判断服务器是否有足够内存以及如何调整其性能的答案。一个好的经验法则会很棒，你的交换大小应该等于你的系统内存（这只是一个可以帮助我的例子，我不知道这是不是真的）。

关于正在发生的事情的更多背景信息，我有类似的服务器开始崩溃，然后我有服务器运行相同的堆栈和具有增加内存的 Web 应用程序，从而解决了这个问题。现在，我知道这是因为它们有更多的内存并且可以“处理”负载，但我觉得在不了解底层机制的情况下盲目地增加服务器大小可能不是一个好方法。另外，直觉上我觉得一个 512MB 的网络服务器应该可以处理任何事情，而且我知道我以前运行的次数要少得多。

```
130201 21:04:27  mysqld restarted
InnoDB: The log sequence number in ibdata files does not match
InnoDB: the log sequence number in the ib_logfiles!
130201 21:04:27  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
130201 21:04:28  InnoDB: Started; log sequence number 0 4945108
130201 21:04:28 [Note] /usr/libexec/mysqld: ready for connections.
Version: '5.0.77'  socket: '/var/lib/mysql/mysql.sock'  port: 3306  Source distribution

Number of processes running now: 0
130201 21:08:48  mysqld restarted
InnoDB: Error: pthread_create returned 11
130201 21:08:57  mysqld ended

130201 21:26:19  mysqld started
130201 21:26:35  InnoDB: Error: cannot allocate 8404992 bytes of
InnoDB: memory with malloc! Total allocated memory
InnoDB: by InnoDB 8154720 bytes. Operating system errno: 12
InnoDB: Check if you should increase the swap file or
InnoDB: ulimits of your operating system.
InnoDB: On FreeBSD check you have compiled the OS with
InnoDB: a big enough maximum process size.
InnoDB: Note that in most 32-bit computers the process
InnoDB: memory space is limited to 2 GB or 4 GB.
InnoDB: We keep retrying the allocation for 60 seconds...
130201 21:26:58  mysqld ended 
```

我现在知道上面的情况是由于崩溃造成的，可能是因为 MySQL 没有足够的内存，或者因为 InnoDB 占用了太多并且没有足够的空间让操作系统保持正常运行。下面是我的一个典型服务器在低活动状态下的顶部。我不知道如何解释这一点。例如，100mb 免费好吗？为什么会有这么多 apache 线程使用超过 300m 的内存，这如何可持续？我的 InnoDB 缓冲池应该是多少？任何帮助或指导将不胜感激！

```
top - 01:56:34 up 3 days,  4:05,  1 user,  load average: 0.00, 0.00, 0.00
Tasks:  74 total,   3 running,  71 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:    524288k total,   424172k used,   100116k free,    11680k buffers
Swap:   499992k total,   102684k used,   397308k free,    56552k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                   
26702 apache    15   0  321m  46m 6068 S  0.0  9.1   0:59.08 httpd                                                      
26701 apache    15   0  316m  41m 6312 S  0.0  8.1   0:32.04 httpd                                                      
26705 apache    15   0  313m  30m 6292 S  0.0  5.9   0:31.81 httpd                                                      
26707 apache    15   0  311m  37m 6372 S  0.0  7.3   0:27.49 httpd                                                      
26704 apache    15   0  311m  23m 5820 S  0.0  4.6   0:28.30 httpd                                                      
20799 apache    15   0  310m  35m 6488 S  0.0  7.0   0:27.43 httpd                                                      
26703 apache    15   0  307m  32m 6240 S  0.0  6.4   0:27.78 httpd                                                      
11123 apache    15   0  307m  30m 5984 S  0.0  5.9   0:10.26 httpd                                                      
26410 apache    15   0  297m  21m 5704 S  0.0  4.3   0:17.26 httpd                                                      
 7871 apache    15   0  296m  23m 5616 S  0.0  4.6   0:09.18 httpd                                                      
26708 apache    15   0  296m  20m 5616 S  0.0  4.1   0:25.38 httpd                                                      
26706 apache    15   0  295m  22m 5636 S  0.0  4.4   0:25.78 httpd                                                      
 1332 root      18   0  279m 5452 3632 R  0.0  1.0   0:00.23 httpd                                                      
 1305 mysql     15   0  195m  10m 3836 S  0.0  2.0   0:26.57 mysqld                                                     
10551 root      17   0 99.7m 1196  900 S  0.0  0.2   0:00.00 crond                                                      
10595 root      17   0 99.7m 1196  900 S  0.0  0.2   0:00.00 crond                                                      
10651 root      17   0 99.7m 1196  900 S  0.0  0.2   0:00.00 crond                                                      
10695 root      17   0 99.7m 1196  900 S  0.0  0.2   0:00.00 crond                                                      
10481 root      16   0 91068 3284 2564 S  0.0  0.6   0:00.00 sshd                                                       
10485 assistrx  15   0 91068 1744  976 S  0.0  0.3   0:00.00 sshd                                                       
 5739 root      15   0 90144 3268 2556 S  0.0  0.6   0:00.00 sshd                                                       
 5741 assistrx  15   0 90144 1720  980 S  0.0  0.3   0:00.00 sshd                                                       
 9687 root      15   0 90144 3388 2652 R  0.0  0.6   0:00.01 sshd                                                       
 1340 root      15   0 74848  700  592 S  0.0  0.1   0:00.04 crond                                                      
 9690 root      15   0 66104 1600 1180 S  0.0  0.3   0:00.00 bash                                                       
 1132 root      18   0 65968 1176 1032 S  0.0  0.2   0:01.48 xe-daemon 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T02:29:41.793

MySQL 数据库调优可能令人生畏，但它是可行的。[从 RolandoMySQLDBA](https://stackoverflow.com/questions/5248420/at-what-point-does-mysql-innodb-fine-tuning-become-a-requirement)查看这个答案。他关于如何测量 InnoDB 缓冲池的建议是完美的，我推荐关于 turing 的建议，`innodb_file_per_table`因为在你不得不处理一个阻塞系统的巨大 InnoDB 崩溃文件之前，你真的不知道地狱是什么样的。以下查询直接来自`RolandoMySQLDBA`的回答：

要了解以 KB 为单位制作 innodb 缓冲池的大小，请运行以下查询：

```
SELECT SUM(data_length+index_length)/power(1024,1) IBPSize_KB
FROM information_schema.tables WHERE engine='InnoDB'; 
```

这是MB

```
SELECT SUM(data_length+index_length)/power(1024,2) IBPSize_MB
FROM information_schema.tables WHERE engine='InnoDB'; 
```

这是GB

```
SELECT SUM(data_length+index_length)/power(1024,3) IBPSize_GB
FROM information_schema.tables WHERE engine='InnoDB'; 
```

我也使用[这里讨论](http://www.howtogeek.com/howto/linux/using-a-mysql-performance-tuning-analyzer-script/)`tuning-primer`的脚本。确实帮助我解决了 MySQL 的难题。您需要让数据库启动并运行并激活至少 2 天，以便其数据有用，因此我在生产服务器至少有 2 天的实际流量后在生产服务器上运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T07:52:35.297

在我们进入 mysql 调优之前，您首先需要检查内存分配是否由于 ulimits 或其他一些操作系统设置而失败。

您能否粘贴以下命令的输出 -

1.  `ulimit -a`
2.  `free -m`

这些命令将打印有关在您的操作系统上设置的内存限制以及您的物理内存规格的信息。

# r - 如何在 R 中锁定图形窗口

> ID：14699120
> 
> 赞同：0
> 
> 时间：2013-02-05T02:19:52.143
> 
> 标签：r, graph, plot, window

我有一个用 R 编写的数据收集和绘图程序，在共享计算机上运行，​​有人可能会不小心关闭我的绘图窗口。

有没有办法锁定绘图窗口，这样任何人都无法通过单击关闭按钮来关闭绘图窗口？或者至少当有人试图关闭窗口时它会弹出一个警告对话框？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:07:44.517

我认为您不能单独使用 R 来实现这一点，但是您可以编写一个连接到 R 的 Java 程序并在 Java 窗口中显示绘图，您可以在其中进行更多控制，例如在关闭时显示警告等。

如果你想实现这个解决方案，你可以将需要这些工具[的 R 和 Java 集成](http://www.rforge.net/Rserve/files/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:10:27.867

安装“StickyNote”包，它不在 CRAN 上，但可以从你的文具柜中获得：

```
require(stickynote)
note = createNote("Computer busy, please don't use!", colour="yellow", pen="black")
attachNote(note, PC) 
```

当您的代码完成时：

```
removeNote(note,PC) 
```

我在这里要说的是，技术解决方案并不总是最好的。在 PC 上放置便签也可能会阻止人们将其关闭、关闭其他窗口等。

有一些实际的程序可以在计算机屏幕上放置虚拟的黄色便签。您可以将其中一个放在您的 R 图形窗口上，这样任何用户都必须将其移动到您的图形窗口，但 R 没有一个。快速谷歌显示 Windows 7 中的附件下可能包含一个：[http://www.dummies.com/how-to/content/how-to-use-sticky-notes-in-windows-7.html](http://www.dummies.com/how-to/content/how-to-use-sticky-notes-in-windows-7.html)

# spring - Spring MVC 和 Hibernate - 持久化对象时如何将数据保存在两个表中？

> ID：14699121
> 
> 赞同：0
> 
> 时间：2013-02-05T02:19:58.167
> 
> 标签：spring, hibernate, spring-mvc

我想完成以下任务：

用户可以发布带有标题和描述的消息。他也可以留下他的电子邮件地址、电话号码或两者。

我想将有关他的消息的信息存储在一个表中，其中包含 id、userId、title 和 description 列。我想将有关他的联系信息的信息存储在另一个表中，其中包含 id、messageId、phoneNumber 和 email 列。我希望能够列出消息。对于每条消息，我还想打印电话号码和电子邮件地址。

由于不同的原因，我想将联系信息存储在不同的表中，我无法将它们与消息一起存储在消息表中。

我不知道实现此目的的最佳方法是什么，尤其是知道我希望能够检索带有消息 ID 的联系信息。

我尝试了多种方法，使用@OneToOne、@JoinColumn 或@SecondaryTable，但无法使其正常工作。

这是我现在所拥有的：

留言类：

```
@Entity
@Table(name="messages")
public class Message implements Serializable {
    private int idMessage;
    private int userId;
    private String title;
    private String description;
    private Contact contact;

    @Id
    @GeneratedValue
    @Column(name="idMessage")
    public int getId() {
        return idMessage;
    }

    public void setId(int id) {
        this.id = id;    
    }

    @Column(name="userId", nullable=false)
    public int getUserId() {
        return userId;
    }

    public void setUserId(int userId) {
        this.userId = userId;
    }

    @Column(name="title", nullable=false)
    public int getTitle() {
        return title;
    }

    public void setTitle(int title) {
        this.title = title;
    }

    @Column(name="description", nullable=false)
    public int getDescription() {
        return userId;
    }

    public void setDescription(int description) {
        this.description = description;
    }

    @OneToOne(cascade = {CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REMOVE})
    @JoinColumn(name="contactId", nullable=false)
    public Contact getContact() {
        return contact;
    }

    public void setContact(Contact contact) {
        this.contact = contact;
    }
} 
```

现在，这是我的联系人类： **编辑：我确实`messageId`在联系人类中添加了属性。我还在 Contact 表中添加了该列，并添加了一个指向 Messages 表的 id 列的外键。** @Entity @Table(name="contacts") 公共类联系人 {

```
 private String id;
    private int messageId;
    private Message message;
    private String phoneNumber;
    private String email;

    public Contact(Message message, String phoneNumber, String email) {
        this.message= message;
        this.phoneNumber = phoneNumber;
        this.email = email;
    }

    @Id
    @GeneratedValue
    @Column(name="ID")
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    @OneToOne(fetch = FetchType.LAZY, mappedBy = "contact")
    public Message getMessage() {
        return message;
    }

    public void setMessage(Message message) {
        this.message = message;
    }

    @Column(name="phoneNumber", nullable=true)
    public String getPhoneNumber() {
        return phoneNumber;
    }

    public void setPhoneNumber(String phoneNumber) {
        this.phoneNumber = phoneNumber;
    }

    @Column(name="email", nullable=true)
    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

} 
```

我的一些 JSP 代码，请注意我确实将contact.email 和contact.phoneNumber 放在了`path`电子邮件和电话号码字段的属性中：

```
<form:form method="post" commandName="ad">
            <table width="95%" bgcolor="f8f8ff" border="0" cellspacing="0"
                cellpadding="5">

                <tr>
                    <td align="right" width="20%">Title *</td>
                    <td width="20%"><form:input size="64" path="title" class="input-xxlarge"/></td>
                    <td width="60%"><form:errors path="title" cssClass="error" /></td>
                </tr>
                <tr>
                    <td align="right" width="20%">Description *</td>
                    <td width="20%">
                        <%-- <form:input path="description" /> --%> <textarea rows="3"></textarea>
                    </td>
                    <td width="60%"><form:errors path="description"
                            cssClass="error" /></td>
                </tr>
                <tr>
                    <td align="right" width="20%">Phone Number *</td>
                    <td width="20%"><form:input path="contact.phoneNumber" /></td>
                    <td width="60%"><form:errors path="contact.phoneNumber" cssClass="error" /></td>
                </tr>
                <tr>
                    <td align="right" width="20%">Email *</td>
                    <td width="20%"><form:input path="contact.email" /></td>
                    <td width="60%"><form:errors path="contact.email" cssClass="error" /></td>
                </tr>
            </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:07:46.710

```
@OneToOne(cascade=CascadeType.ALL)
private Contact contact; 
```

这意味着：

*   对于每条消息，只有一个联系人（并且只有一个消息使用一个联系人）
*   每当您对消息执行保存、更新或删除操作时，该操作都会级联到联系人表。

# python - 如何用他们的代码替换“★✿•”？

> ID：14699122
> 
> 赞同：4
> 
> 时间：2013-02-05T02:19:59.527
> 
> 标签：python, encoding, character-encoding, html-parsing

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T02:41:55.847

给定一个包含单个字符的 Unicode 字符串：

```
symbol = u'★' 
```

它可以像这样转换为 HTML 语法：

```
html = '&#{};'.format(ord(symbol)) 
```

要转换回来，通过剥离`&#`and提取数字`;`，转换为整数，然后使用`chr`(Python 3) 或`unichr`(Python 2)。

如果您需要处理不是来自上述转换的输入，您可能还需要处理十六进制的，这看起来像是一堆十六进制数字`&#xZZZ;`在哪里。`ZZZ`要检测这些，只需注意它以`x`;开头。用基数 16 解析余数。

此外，您可能需要处理命名实体。请参阅最后两段。

* * *

如果你想让 Python 处理整个字符串的编码，你可以使用这个：

```
text = u"I like symb★ls!"
html = text.encode('ascii', errors='xmlcharrefreplace').decode('ascii') 
```

不幸的是，没有解码的等价物，而且这也不会转义具有潜在危险的 HTML 字符，例如`<`（可能是也可能不是您想要的）。如果您需要解码，也许使用适当的 HTML 解析器，它也能够处理命名实体，如`&clubs;`(♣)。

如果您想处理命名实体并且不想使用真正的 HTML 解析器，则可以使用机器可读（使用 Python`json`模块）[的实体列表](http://www.w3.org/TR/html5/entities.json)。

# bulletphysics - btGeneric6DofSpringConstraint not working properly

> ID：14699123
> 
> 赞同：2
> 
> 时间：2013-02-05T02:20:01.347
> 
> 标签：bulletphysics

I am trying to connect two bodies (one static and one dynamic) using a spring in Bullet. I am using the btGeneric6DofSpringCOnstraint.

The dynamic body hangs from the static body.

During the simulation, I am changing the mass of the dynamic body:

```
btVector3 localInertia;
btb->getCollisionShape()->calculateLocalInertia(mass,localInertia);
btb->setMassProps(mass,localInertia);
btb->updateInertiaTensor();
//m_dynamicsWorld->addRigidBody(btb);
btb->activate(true); 
```

However, no matter what mass I use, the body is still hanging at a same distance from the static body.

Any idea of why this is happening?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T20:06:04.727

我想约束没有使用新的质量属性，因为它没有被更新，并且缓存了一些内部预先计算的值。您应该搜索一种更新约束的方法，但抱歉我不知道是否有解决方案。

# php - nested while loops not working?

> ID：14699135
> 
> 赞同：1
> 
> 时间：2013-02-05T02:21:50.907
> 
> 标签：php, mysql

i am having a "nonsense" problem with php. The first loop is supposed to get a certain record from the table and compare it to all the record in the second table...

So i expected it to print 41 "2nd"'s after every "1st"'s. Since there are 41 records in the second table. But instead the while loop works the first time and ignores the second while loop afterwards.

The result i get:

1st2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd2nd1st1st1st1st1st1st1st1st1st1st1st1st1st1st1st1st1st1st1st1st1st1st1st...

```
while($row = mysql_fetch_array($select))
{
    echo "1st";
    while($row2 = mysql_fetch_array($select2))
    {
        echo "2nd";
        $string = $row2["header"];
        $find = $row["email"];
        if(strstr($string, $find)) {
            $email = $row["email"];
            echo "found it";
        } else {
            //no email found
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:36:29.350

您需要在进入内部循环之前执行第二个查询：

```
    而($row=mysql_fetch_array($select))
    {
        回声“第一”；

        $select2 = mysql_query("选择 ...");

        而($row2=mysql_fetch_array($select2))
        {

```

更好的是在开始第一个循环之前运行第二个查询，并将记录保存到另一个数组。然后你可以避免 n^2 查询：

```
    $emailToRecord = 数组（）；
    $select2 = mysql_query("选择 ...");
    而($row2=mysql_fetch_array($select2)) {
       $emailToRecord[$row2["header"]] = $row2;
    }

    而($row=mysql_fetch_array($select))
    {
        回声“第一”；
        $find = $row["email"];
        if (isset($emailToRecord[$find])) {
               echo "找到了";
        }
    }

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:25:41.397

除非它在两个查询中的行数相同，否则它当然不会发布相同的内容。
您可以添加查询（$select 和 $select2）吗？

*有人可以告诉我如何发表评论而不是答案吗？*

```
<?php
    $select=mysql_query("SELECT email FROM database.tablename"); 
    $select2=mysql_query("SELECT header FROM database2.tablename2");

    while($row=mysql_fetch_assoc($select))
    {
        echo "1st";
        $find = $row["email"];
        while($row2=mysql_fetch_assoc($select2))
        {
            echo "2nd";
            $string = $row2["header"];
            if(strstr($string, $find))
            {
                $email=$find;
                echo "found it";
            }
             else
            {
                  //no email found
            }

        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:32:49.897

我希望这是有道理的。

这是因为第一个 while 执行然后第二个 while 循环并且直到它完成才结束，然后它完成并返回到第一个 while 并且它返回 true（另一行）并执行并进入下一个 while，但它是指向当前“行”的指针已到达末尾，因此它不会执行，它主要只是执行主循环。这就是为什么你得到 122222221111111

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T02:33:44.140

不要`mysql_fetch_array`在另一个 while 循环中运行。首先提取所有数据并比较两个表的结果。

```
$select=mysql_query("SELECT email FROM database.tablename");
$select2=mysql_query("SELECT header FROM database2.tablename2");    
while($row=mysql_fetch_array($select)) {
    $first[] = $row["email"];
}
while($row2=mysql_fetch_array($select2)) {
    $second[] = $row2["header"];
}
foreach ($first as $item) {
    if (($key = array_search($item, $second)) !== false) {
        $email[] = $second[$key];
    }
}
print_r($email); // Get all the emails that exist in both tables. 
```

# c - Adding n numbers in C

> ID：14699137
> 
> 赞同：-1
> 
> 时间：2013-02-05T02:22:22.137
> 
> 标签：c, while-loop

I'm learning C, and am currently working my way up through command-line programs. I'm interested in writing a program which would add *n* terms to eachother, much like would a normal calculator. The number *n* would be defined by the number of terms the user enters (as opposed to a user-specified *n* inputted explicitly by the user before the operation). How can this be done? Should I use a `while` loop for this?

So far, I've tried simply defining a finite number of terms a user can enter (up to 10 terms, if it's fewer, simply replace the remaining terms with zeros).

```
scanf("%f%c%f%cf%cf%cf%cf%cf%cf%cf%cf", &num1, &op, &num2, &op, &num3, &op, &num4, &op, &num5, &op, &num6, &op, &num7, &op, &num8, &op, &num9, &op, &num10);

    // addition
    if (strcmp(&menuchoice, "a") == 0)
        {
            num3 = num1+num2+num3+num4+num5+num6+num7+num8+num9+num10;
            return num3;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T02:30:53.503

如果您只想在输入*n 个*数字后显示总和，您必须有办法找出所有数字都已输入。一种方法是设置一个用户可以输入的*标记*值。这可能是一个空行或一个字符串，如`=`. 如果您只是添加正数，则可以使用负数`0`表示数字已全部输入。

```
while (1)
{
    /* get input */
    if (/* should exit */)
        break;
    sum += input;
}
/* show sum */ 
```

如果您尝试模拟计算器，您可以在输入每个数字后简单地显示运行总计。*这样你就不会知道n*有多大。

```
while (1)
{
    /* get input */
    sum += input;
    /* show sum */
} 
```

# jquery - Spacing issues with dynamically generated Bootstrap elements

> ID：14699138
> 
> 赞同：1
> 
> 时间：2013-02-05T02:22:23.193
> 
> 标签：jquery, twitter-bootstrap

I'm working with Twitter Bootstrap 2.2.2 and jQuery 1.7.2 trying to use anchors with a flat button style as tags. Such tags are dynamically added after saving a text input; I'm using a very simple HTML structure:

```
<p>
    <a class="btn btn-small"><span>Tag 1</span></a>
    <a class="btn btn-small"><span>Tag 2</span></a>
</p> 
```

With jQuery I just create a new a with the required attributes and values, and it is then attached to the paragraph.

However, whenever you create more than 1, the spacing between elements gets all messed up and new tags are created without spacing between them.

I created the following fiddle to demo my problem: [http://jsfiddle.net/marcelo1251/WeuLb/](http://jsfiddle.net/marcelo1251/WeuLb/)

Click Add Tag more than 2 times and you'll see the problem...

Is there a way to fix the spacing with the dynamically generated elements?

Thanks, Marcelo C.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:31:04.730

我会调查问题，无论如何，如果你这样做

```
 var tagClone = $('.template').html();
    $('p#target').append(tagClone); 
```

有用。

从技术上讲，它们并不相同：

```
 //your code
    var tagClone = $('.template').clone(); //tagClone is a jQuery object
    $('p#target').append(tagClone.find('a')); 
```

创建一个 JQUERY OBJECT 并将其附加到目标。

```
 //my code
    var tagClone = $('.template').html(); //tagClone is a string
    $('p#target').append(tagClone); 
```

获取 html 内容作为 A STRING 并将其附加到目标。append 函数 ( [http://api.jquery.com/append/](http://api.jquery.com/append/) ) 但是可以接受 jquery 对象或 html 字符串，因此它应该可以工作。

# batch-file - 您可以从 Microsoft 服务器检查日期，并为批处理文件设置变量吗？

> ID：14699140
> 
> 赞同：0
> 
> 时间：2013-02-05T02:22:30.030
> 
> 标签：batch-file

我正在编写一个我只想每天运行一次的批处理文件，代码如下：

```
set ACTUALDATE=%date:~4,2%-%date:~7,2%-%date:~10,4%
set /p BEFOREDATE=<date.txt
if %ACTUALDATE% == %BEFOREDATE% GOTO L
echo %ACTUALDATE%>date.txt
start Minecraft/Launcher/Minecraft.exe

C:/Python24/python.exe timer.py

start "" cmd /c "echo Time is almost up!&echo(&pause"

tasklist /FI "IMAGENAME eq python.exe*32" 2>NUL 

:L
C:/Python24/python.exe timer2.py

taskkill /f /im javaw.exe 
```

这工作正常，它运行然后在时间之后终止 Minecraft，这是根据 python 文件判断的。这不是问题，问题是用户对这个程序不是很满意，我正在尝试解决他可以更改计算机上的日期并重新运行程序的事实。

有没有办法从服务器或某种方式设置“ACTUALDATE”，这样他就无法更改日期。如果有任何方法可以解决这项工作，将不胜感激。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:23:40.010

你可以使用`net time \\servername`（/set 如果你想改变当地时间）

# python - Python从列表中删除'\ n'，然后将列表中的字符串转换为整数

> ID：14699144
> 
> 赞同：0
> 
> 时间：2013-02-05T02:22:42.620
> 
> 标签：python, arrays, list, python-3.x, integer

```
my_list = []
with open(home + "/Documents/stocks/" + filePath , newline='') as f:
    array1 = (line.split(',') for line in f.readlines())
    last_col = [line.split(',')[-1] for line in f]
    for line in array1:          
        my_list.append(line[-1]) 
```

这可行，但 my_list`\n`在每行的末尾都有。我怎样才能删除它。删除后如何将其转换为整数列表？我试过做类似的事情

```
list(map(int, my_list)) 
```

但由于新行，我得到一个错误。

```
ValueError: invalid literal for int() with base 10: 'Adj Close\n' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:44:07.237

您现有的代码适用于您正在尝试做的事情。

为了使其独立，我将文件作为 . 移到程序中`StringIO`，否则，这是您的代码，逐字逐句：

```
import io

f = io.StringIO('''1, 2, 3
4, 5, 6
''')

my_list = []
array1 = (line.split(',') for line in f.readlines())
last_col = [line.split(',')[-1] for line in f]
for line in array1:          
    my_list.append(line[-1])

print(list(map(int, my_list))) 
```

这就是它的作用：

```
[3, 6] 
```

这正是你想要的，对吧？

所以，如果它不起作用，那不是因为换行；这是因为别的东西。而且，由于您从未告诉我们错误是什么，或者除了“由于新行而导致错误”之外的任何其他内容，因此没有人可能猜出其他可能是什么。也许你有一个`3.6`在那里，你得到`ValueError: invalid literal for int() with base 10: '3.6'`. 也许您在指定路径没有文件，并且您收到`FileNotFoundError`错误消息。也许您忘记了 shebang，而您正在使用 Python 2 解释器或 bash 运行 Python 3.x 脚本。根据您告诉我们的情况，一切皆有可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:25:16.033

看起来您只想将最后一列作为整数列表。那是对的吗？如果是这样：

```
with open(datafile) as fin:
    last_column = [ int(line.split(',')[-1]) for line in fin ] 
```

应该做的伎俩...

如果您希望每一行作为整数列表：

```
with open(datafile) as fin:
    rows = [ [int(x) for x in line.split(',')] for line in fin ]
    #same as
    #rows = [ list(map(int,line.split(','))) for line in fin ] #if you prefer ... 
```

请注意，在 python 中，`int`将愉快地转换带有任何空格的字符串：

```
>>> print(int('\t\n300\n'))
300 
```

所以换行符不是问题......（使用python3.2和python2.7测试）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:28:40.543

如果你想解析 CSV 文件，你不想处理所有复杂的情况，比如最后一列中的换行符、逗号周围的空格等。只需使用[`csv`](http://docs.python.org/3/library/csv.html)Python 附带的模块：

```
my_list = []
with open(home + "/Documents/stocks/" + filePath) as f:
    for row in csv.reader(f):
        numbers = list(map(int, row))
        my_list.append(line[-1]) 
```

或者，可能更简单：

```
with open(home + "/Documents/stocks/" + filePath) as f:
    my_list = [list(map(int, row)) for row in csv.reader(f)] 
```

将列表推导和 a 混合`map`到一行对我来说有点令人惊讶，但在这种情况下，我认为它看起来比纯推导替代方案要好一些：

```
with open(home + "/Documents/stocks/" + filePath) as f:
    my_list = [[int(col) for col in row] for row in csv.reader(f)] 
```

并且比纯功能替代方案要好得多：

```
my_list = list(map(compose(list, partial(map, int)), 
                   csv.reader(iterwith(open(home + "/Documents/stocks/" + filePath))))) 
```

# jsf-2 - 列出 c:forEach 中未更新的元素

> ID：14699145
> 
> 赞同：0
> 
> 时间：2013-02-05T02:22:53.357
> 
> 标签：jsf-2, dialog, primefaces, arraylist, foreach

我为我的数据库开发搜索引擎。我有一个对话框，我从这个对话框中得到了一些输入。最多有 5 个面板，面板有 selectOneMenus、inputTexts 等。我可以通过按`+`和`-`按钮来显示和隐藏输入行。这不是问题。

问题是没有设置 AdvancedSearch 的任何属性。

Browse 类具有以下对象（setter 和 getter 都可以）：

```
private List<String> advSearchCols = new ArrayList<>();
private List<AdvancedSearch> advSearch = new ArrayList<>(); 
```

高级搜索类：

```
private String selectedColumn = "",
        search = "",
        logic = "",
        isEqual = "";

private int widgetNum=-1; 
```

Setter 和 getter 编写正确并正确`advSearch`初始化。

```
 <h:form >
        <p:dialog width="800px" height="300px" widgetVar="advSearchWg" 
                  closable="true" draggable="true" minimizable="true" dynamic="true"
                  position="center" closeOnEscape="true" header="Advanced Search" onShow="L0.show()">

            <c:forEach items="#{browse.advSearch}" var="adv">                    
                <p:panel widgetVar="L#{adv.widgetNum}" visible="false" style="height: 50px;border:none;margin:0px 20px 0px 20px" closable="true">
                    <h:panelGrid columns="7">
                        <p:selectOneMenu value="#{adv.logic}" style="width: 100px;margin-left: 20px" >  
                            <f:selectItem itemLabel="AND" itemValue="AND" />
                            <f:selectItem itemLabel="OR" itemValue="OR"  />                                                                   
                        </p:selectOneMenu>  
                        <p:selectOneMenu value="#{adv.isEqual}" style="width: 100px;margin-left: 20px" >  
                            <f:selectItem itemLabel="EQUAL" itemValue="equal" />
                            <f:selectItem itemLabel="NOT EQUAL" itemValue="not equal"  />                                                                   
                        </p:selectOneMenu> 
                        <p:inputText value="#{adv.search}" required="true" autocomplete="true" style="width: 100px;margin-left: 20px"/>
                        <h:outputText value="in" style="margin-left: 20px" />
                        <p:selectOneMenu value="#{adv.selectedColumn}" style="width: 100px;margin-left: 20px" >  
                            <f:selectItems value="#{browse.advSearchCols}" />  
                        </p:selectOneMenu>
                        <c:if test="#{adv.nextWg() != (browse.advSearch.size() - 1)}">
                            <p:commandButton icon="ui-icon-plus" oncomplete="L#{adv.nextWg()}.show()" />                                
                        </c:if>
                        <c:if test="#{adv.widgetNum != 0}">
                            <p:commandButton icon="ui-icon-minus" oncomplete="L#{adv.widgetNum}.close()"/>
                        </c:if>
                    </h:panelGrid>                        
                </p:panel>                   
            </c:forEach>
            <p:commandButton process="@this" async="true" action="#{browse.advSearcher()}" value="Search" style="margin-left:60px" icon="ui-icon-search" />
        </p:dialog>
    </h:form> 
```

输出 ：

![在此处输入图像描述](../Images/dc37bfbf1d3e1760cdac7c958b9a1db1.png)

为什么`logic`, `isEqual`,`search`不`selectedColumn`更新？为什么列表的元素没有更新？

我使用 Primefaces 3.5RC1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:24:24.773

这里，

```
<p:commandButton process="@this" ... /> 
```

您没有处理表单中的所有输入组件。您只是在处理按钮组件本身。删除该属性。它默认为`@form`已经。

此外，我建议使用`<ui:repeat>`and`rendered`属性而不是`<c:forEach>`and `<c:if>`。

# maven - 使用本地更改的 jar 而不是 ivy 管理的 jar

> ID：14699147
> 
> 赞同：1
> 
> 时间：2013-02-05T02:23:04.117
> 
> 标签：maven, ivy

我们通过常春藤管理我们的罐子。我们的项目依赖于 ivy 为我们处理的 Common.jar。这一切都很好，可以将最新的 jar 从存储库拉到本地存储库。

但是，我们的团队希望在提交之前对 Common.jar 进行更改并针对项目进行测试。我想将 Common.jar 添加到我们的本地类路径中，这实际上将覆盖本地存储库中的 ivy 依赖项。

这里最好的方法是什么？我应该将 Common.jar 添加到 lib 目录并添加到构建路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:12:23.997

我认为您希望您的本地解析器处于“强制模式”。在 ivysettings.xml 中的本地解析器上设置 force="true"。

强制模式的描述见：http: [//ant.apache.org/ivy/history/latest-milestone/settings/resolvers.html](http://ant.apache.org/ivy/history/latest-milestone/settings/resolvers.html)

（参考：[常春藤：强制本地快照依赖](https://stackoverflow.com/questions/7023302/ivy-forcing-local-snapshot-for-dependency)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:20:59.890

使用配置来区分您的依赖项

```
<configurations>
   <conf name="common" description="Used for common jar"/>
   <conf name="others" description="Other 3rd party dependencies"/>
   <conf name="norm" extends="common,others" description="Normal complete list of dependencies"/>
</configurations>

<dependencies>
   <dependency ... module="common" ... conf="common->default"/>

   <dependency ... conf="others->default"/>
   <dependency ... conf="others->default"/>
</dependencies> 
```

请注意如何使用“扩展”属性来创建依赖项的联合集。然后，您可以在构建中创建其内容由 ivy 控制的类路径

```
<ivy:cachepath pathid="others.path" conf="others"/>
<ivy:cachepath pathid="norm.path"   conf="norm"/> 
```

第一个路径用于针对本地构建的 common.jar 进行测试。第二个路径将另外包含从您的存储库中检索到的公共 jar。

# objective-c - 为什么 GCDAsyncSocket readData 设计为只读一次？

> ID：14699155
> 
> 赞同：3
> 
> 时间：2013-02-05T02:23:40.637
> 
> 标签：objective-c, gcdasyncsocket

我发现 GCDAsyncSocket 的 didReadData 回调不直观的一件事是，除非您发出另一个 readData，否则它不会再次被调用。为什么要这样设计？期望库的用户启动另一个读取调用以获得回调是否正确，或者这是一个设计缺陷？

例如

```
- (void)socket:(GCDAsyncSocket *)sock didAcceptNewSocket:(GCDAsyncSocket *)newSocket {
     ...
    // initiate the first read
    self.socket = newSocket;
    [self.socket readDataWithTimeout:-1 tag:0];
}

- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag {
    // do what you need with the data...

    // read again, or didReadData won't get called!
    [self.socket readDataWithTimeout:-1 tag:0];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T22:01:54.330

为什么会这样设计？

只要您只使用过*readDataWithTimeout:tag:，*只要有新数据到达就调用委托方法似乎更直观。

但是*readDataWithTimeout:tag:*并不是使用 GCDAsyncSocket 读取数据的唯一方法。还有例如*readDataToLength:withTimeout:tag:*和*readDataToData:withTimeout:tag:*

这两种方法都在传入数据的特定点调用委托，并且您可能希望在处理的不同点调用不同的委托。

例如，如果您正在处理一个流格式，其中有一个 CRLF 分隔的标头，后跟一个可变长度的主体，其长度在标头中提供，那么您可能希望在*readDataToData:withTimeout:tag:*调用之间交替调用以读取其标头delimiter 你知道，然后*readDataToLength:withTimeout:tag:*读取你从标题中提取的长度的正文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:21:47.767

那是对的; 您应该在委托方法中继续读取循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T11:39:27.157

扩展西蒙詹金斯所说的：

```
 - (void)socket:(GCDAsyncSocket *)sock didWriteDataWithTag:(long)tag
    {

        // This method is executed on the socketQueue (not the main thread)
        switch (tag) {
            case CHECK_STAUTS:
                [sock readDataToData:[GCDAsyncSocket ZeroData] withTimeout:READ_TIMEOUT tag:CHECK_STAUTS];
                break;

            default:
                break;
        }

    }

    - (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
    {
        // This method is executed on the socketQueue (not the main thread)
     dispatch_async(dispatch_get_main_queue(), ^{
            @autoreleasepool {

                if (tag == CHECK_STAUTS) {
    //TODO: parse the msg to find the length.
    NSString *msg = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];

                    [serverSocket readDataToLength:LENGTH_BODY withTimeout:-1 tag:CHECK_STAUTS_BODY]; 

                } else if (tag == CHECK_STAUTS_BODY) {
//TODO: parse the msg to the body content
    NSString *msg = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
                }

            }
        });

        // Echo message back to client
        //[sock writeData:data withTimeout:-1 tag:ECHO_MSG];
    } 
```

# javascript - 在 javascript 中验证有效的 html 标签

> ID：14699156
> 
> 赞同：1
> 
> 时间：2013-02-05T02:23:43.263
> 
> 标签：javascript, jquery, html, regex

我想在 javascript 中对某些输入进行验证，如果它是有效的 Html 标记，则返回有效。

有没有使用 JQuery 的简单方法来做到这一点？如果没有，那么有什么方法可以使用正则表达式吗？

谢谢：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:25:54.363

您可以只制作一组有效标签，然后使用 jQuery。[inArray](http://api.jquery.com/jQuery.inArray/)（标签，有效标签）；

```
var validTags = ["<html>","<body>","<div>"];
var valid = function(tag){
    return $.inArray(tag,validTags);
}
var x = valid("<body>"); //evaluates to true 
```

如果您想接受任何只有字母的标签名称，这里有一个正则表达式可以帮助您入门。它没有经过彻底测试，但旨在接受一个或多个不区分大小写的字母。如果您还想允许数字，请在括号之间添加一个 \d ，例如**[A-Za-Z\d]**。

```
var validTag = /^<\/?[A-Za-z]+>$/;
var valid = function(tag){
  return validTag.test(tag);
} 
```

有关更多正则表达式帮助，请参阅[此页面](http://www.regular-expressions.info/tutorial.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T21:10:06.940

很久以前我为此写了一个方法。我已经把它变成了一个`Element`财产。使用下面的代码来测试元素标签的有效性，如下所示：

```
ele.isValidTag(); 
```

因此，例如，如果您想查看是否`blink`有效，如果无效，则插入 CSS 以使`<blink>`标签实际闪烁，您可以这样做：

```
if (!document.createElement('blink').isValidTag()) {
    var head = document.head || document.getElementsByTagName("head")[0],
        style = document.createElement("style");
    /* Standard (Mozilla) */
    style.appendChild(document.createTextNode("@keyframes blink { from { opacity: 1; } to { opacity: 0; } }"));
    /* Chrome & Safari */
    style.appendChild(document.createTextNode("@-webkit-keyframes blink { from { opacity: 1; } to { opacity: 0; } }"));
    style.appendChild(document.createTextNode("blink { -webkit-animation: blink 600ms infinite; animation: blink 600ms infinite; text-decoration: blink; }"));
    head.appendChild(style);
} 
```

> ***注意：***
> 接受`true`, 的参数以包含*过时*的标签。或用于`-1`自动绕过*过时*的检查。

```
/*  Copy && Paste   */
Object.defineProperty&&!Element.prototype.hasOwnProperty("isValidTag")?Object.defineProperty(Element.prototype,"isValidTag",{value:function(b){if(this.tagName){var c="acronym applet basefont bgsound big blink center dir font frame frameset hgroup isindex listing marquee multicol nextid nobr noembed noframes plaintext spacer strike tt xmp".split(" "),a=this.tagName;return a.match(/[^a-zA-Z0-9]/)?!1:-1!==b&&-1!==c.indexOf(a.toLowerCase())?b||!1:"[object HTMLUnknownElement]"!==Object.prototype.toString.call(document.createElement(a))}return!1}}):Element.prototype.isValidTag=function(b){if(this.tagName){var c="acronym applet basefont bgsound big blink center dir font frame frameset hgroup isindex listing marquee multicol nextid nobr noembed noframes plaintext spacer strike tt xmp".split(" "),a=this.tagName;return a.match(/[^a-zA-Z0-9]/)?!1:-1!==b&&-1!==c.indexOf(a.toLowerCase())?b||!1:"[object HTMLUnknownElement]"!==Object.prototype.toString.call(document.createElement(a))}return!1};
/*  Copy && Paste   */ 
```

* * *

> 例子：

```
Object.defineProperty && !Element.prototype.hasOwnProperty("isValidTag") ? Object.defineProperty(Element.prototype, "isValidTag", {
        value: function(b) {
            if (this.tagName) {
                var c = "acronym applet basefont bgsound big blink center dir font frame frameset hgroup isindex listing marquee multicol nextid nobr noembed noframes plaintext spacer strike tt xmp".split(" "),
                    a = this.tagName;
                return a.match(/[^a-zA-Z0-9]/) ? !1 : -1 !== b && -1 !== c.indexOf(a.toLowerCase()) ? b || !1 : "[object HTMLUnknownElement]" !== Object.prototype.toString.call(document.createElement(a))
            }
            return !1
        }
    }) :
    Element.prototype.isValidTag = function(b) {
        if (this.tagName) {
            var c = "acronym applet basefont bgsound big blink center dir font frame frameset hgroup isindex listing marquee multicol nextid nobr noembed noframes plaintext spacer strike tt xmp".split(" "),
                a = this.tagName;
            return a.match(/[^a-zA-Z0-9]/) ? !1 : -1 !== b && -1 !== c.indexOf(a.toLowerCase()) ? b || !1 : "[object HTMLUnknownElement]" !== Object.prototype.toString.call(document.createElement(a))
        }
        return !1
    };

if (!document.createElement('blink').isValidTag()) {
	var head = document.head || document.getElementsByTagName("head")[0],
		style = document.createElement("style");
	/* Standard (Mozilla) */
	style.appendChild(document.createTextNode("@keyframes blink { from { opacity: 1; } to { opacity: 0; } }"));
	/* Chrome & Safari */
	style.appendChild(document.createTextNode("@-webkit-keyframes blink { from { opacity: 1; } to { opacity: 0; } }"));
	style.appendChild(document.createTextNode("blink { -webkit-animation: blink 800ms infinite; animation: blink 800ms infinite; text-decoration: blink; }"));
	head.appendChild(style);
}
```

```
<p>
  Hi <blink>I</blink> should be <blink>Blinking</blink>!
</p>
```

# jquery - 如何缓存每个列表项子元素以供以后使用？

> ID：14699157
> 
> 赞同：2
> 
> 时间：2013-02-05T02:24:01.367
> 
> 标签：jquery, caching

我想缓存和分离每个列表项**“div.title”** onload。

根据单击功能（view1 或 view2），**“div.title”**将再次附加到正确的列表项。

当前尝试： http: [//jsfiddle.net/nolfranklin/KxXcd/7/](http://jsfiddle.net/nolfranklin/KxXcd/7/)（所有标题都附加到最后一个列表项）

```
<code>

    <!-- list items -->

    <li class="item-1">
        <img src="image.jpg" />
        <div class="title">Theme One</div>
    </li>
    <li class="item-2">
        <img src="image.jpg" />
        <div class="title">Theme Two</div>
    </li>

/* Cache list items .title */

var title = $('ul').find('.title').detach();

$('a').click(function() {

        // Reattach title to each list item.

        $('ul li').each(function() {
            $(title).appendTo(this);
        });

});

</code> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:28:47.710

尝试这个

```
$('a').click(function() {

    // Reattach title to each list item.

    $('ul li').each(function(i) {
        $(this).append(title[i]);
    });

}); 
```

**[检查小提琴](http://jsfiddle.net/KxXcd/10/)**

此处的标题包含两个 jQuery 对象，您将在 li.. 末尾附加 objectList

您需要遍历将它们附加到 li 的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:30:45.090

`.detach`同时分离所有元素并将它们存储在一个集合中。

有几种方法可以从集合中获取特定索引，例如括号`[index]`或`.get`：

```
$('ul li').each(function() {
    $(title.get($(this).index())).appendTo(this);
}); 
```

[http://jsfiddle.net/ExplosionPIlls/KxXcd/12/](http://jsfiddle.net/ExplosionPIlls/KxXcd/12/)

# python - 带有pycurl中断的S3上传

> ID：14699158
> 
> 赞同：11
> 
> 时间：2013-02-05T02:24:14.820
> 
> 标签：python, curl, tcp, upload, amazon-s3

`boto`我使用 pycurl 作为Python 库的后端。它非常快速且用途广泛，但我遇到的问题是大文件的上传经常在连接重置时失败。当我使用 plain`boto`和 plain`httplib`时，它更可靠。

我使用 Wireshark 发现一段时间后（或者有时也很快），我的机器停止接收来自 S3 的 ACK，因此它重置了连接。它几乎似乎`pycurl`是如此之快，以至于它扼杀了连接。如果我限制上传（我使用多接口）或使用较慢的互联网连接，上传运行良好。

我仍然想知道我可能做错了什么。

我还尝试使用 .NET S3 SDK 上传。它慢了大约 3 倍，但成功了。此外，这一切都在 Windows 7 上，同一网络上的 OS X 机器再次上传速度慢很多，但可靠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:31:24.727

既然您提到您在 Windows 7 上遇到问题，您可以以管理员身份运行命令提示符并发布结果`netsh int tcp show global`吗？您应该会看到如下内容：

```
TCP Global Parameters
----------------------------------------------
Receive-Side Scaling State          : enabled
Chimney Offload State               : automatic
NetDMA State                        : enabled
Direct Cache Acess (DCA)            : disabled
Receive Window Auto-Tuning Level    : normal
Add-On Congestion Control Provider  : none
ECN Capability                      : disabled
RFC 1323 Timestamps                 : disabled 
```

我建议您将结果复制/粘贴到 .txt 文件中，以记录您当前的设置。您感兴趣的设置是烟囱卸载、接收端缩放 (RSS) 和 NetDMA。这些都是试图从/向 NIC 或 CPU 卸载处理的功能，它们有时会导致与您描述的症状相似的问题。

在搞乱 RSS 或 NetDMA 之前，我会尝试通过`netsh int tcp set global chimney=disabled`在`Device Manager > Network Adapters > Advanced tab`.

如果这不能解决您的问题，您可能需要尝试其他两个选项。这是一篇[Microsoft 知识库文章](http://support.microsoft.com/kb/951037)，其中包含有关修改所有这些内容的详细信息。

# php - echo clear 多维数组 PHP

> ID：14699160
> 
> 赞同：0
> 
> 时间：2013-02-05T02:24:31.583
> 
> 标签：php, arrays, echo

这似乎是一个简单的问题，但我不记得为什么：

所以...我在 $_POST 上有一个数组，我想回显该变量：

我这样做：

```
 function h()
   {
    foreach($_POST as $k => $v ){
   echo $v;

    } 
```

那很好，但我有一个问题：

$POST 应该期望两个或多个值，例如：

```
 Array ( [s-armenia] => TRIBUNAL ADMINISTRATIVO DE SUCRE [s-armenia2] => 0 ) 
```

所以..用我的功能我得到了这个：

```
 TRIBUNAL ADMINISTRATIVO DE SUCRE 
   0 
```

¿如何在没有 0 的情况下回显我的函数？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:21:38.493

谢谢大家的帮助，我想到了这样简单的事情，它可以工作：

```
 function h()
 {
 foreach($_POST as $k)
  {
  $p = "/0/";
  $s = "";
  echo preg_replace($p, $s, $k);

  }

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:28:50.227

```
foreach($_POST as $k)
{
   echo $k;
} 
```

=> $v 将是关键（即 0）
你的数组应该看起来像`array(1 => 2, 3 => array(3.1 => 3.2), 4 => 5)`

编辑：从 PHP 手册中添加：

```
<?php
$array = array(
    "foo" => "bar",
    42    => 24,
    "multi" => array(
         "dimensional" => array(
             "array" => "foo"
         )
    )
);

var_dump($array["foo"]);
var_dump($array[42]);
var_dump($array["multi"]["dimensional"]["array"]);
?> 
```

# javascript - 处理 Ajax JSON 数据时，如何在 .each() 循环中使用 .html() 中的变量？

> ID：14699163
> 
> 赞同：0
> 
> 时间：2013-02-05T02:24:48.140
> 
> 标签：javascript, jquery, json, ajax, variables

我什至不确定这是否可能......

我正在使用以下 jquery 代码来处理一些 AJAX JSON 数据，它工作正常......

```
 data = jQuery.parseJSON(data);

    $('textarea#bec_term_id').html(data.bec_term_newlines_term_id); 
    $('textarea#bec_name').html(data.bec_term_newlines_name); 
    $('textarea#bec_slug').html(data.bec_term_newlines_slug); 
    $('textarea#bec_description').html(data.bec_term_newlines_description); 
```

但我想动态创建上述内容（原因？因为它只是完整代码的缩短版本，可能有未知数量的附加行）。

我尝试使用的方法是：

```
 data = jQuery.parseJSON(data);

    var columnslist  = [  'term_id', 'name', 'slug', 'description'];  // plus others

    $.each(columnslist, function(index, colname) {
          $('textarea#bec_' + colname ).html(data.'bec_term_newlines_' + colname);  
    }); 
```

但它不起作用。

导致困难的是 .html(data. ) 的最后一部分（标记为'）。

有谁知道如何在这种情况下使用变量（如果有的话）？如果没有，还有其他方法可以达到同样的目的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:26:26.170

用于`[]`传递 var

```
$('textarea#bec_' + colname ).html(data['bec_term_newlines_' + colname]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:26:35.280

使用方括号表示法

```
$('textarea#bec_' + colname ).html(data['bec_term_newlines_' + colname]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:26:37.343

您不能像在 JavaScript 中那样对访问器使用字符串，但可以使用括号表示法：

```
.html(data['bec_term_newlines_' + colname]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T02:33:24.220

您可能还可以对 的`dataType`设置感兴趣`$.ajax`。

从[api 文档](http://api.jquery.com/jQuery.ajax/)：

> 数据类型（默认：智能猜测（xml、json、脚本或 html））
> 
> 类型：字符串
> 
> 您期望从服务器返回的数据类型。如果没有指定，jQuery 将尝试根据响应的 MIME 类型推断它（XML MIME 类型将产生 XML，在 1.4 中 JSON 将产生一个 JavaScript 对象，在 1.4 中脚本将执行脚本，其他任何内容都将是作为字符串返回）。

您可能可以将其设置`'json'`为避免该`data = jQuery.parseJSON(data);`行。

# c++ - 哪个更好，放在一起还是分开一些成本？

> ID：14699164
> 
> 赞同：0
> 
> 时间：2013-02-05T02:24:48.947
> 
> 标签：c++

将不同职责放在一起的代码。代码更短，看起来很容易使用。

```
// Base class.
class A
{
public:
    // Native responsibility.
    virtual void F();

    // Show it with graphics.
    virtual void ShowGraphics();

    // Show it with table.
    virtual void ShowTable();

    // IO
    virtual void Read();
    virtual void Write();
};

// A number of concrete classes derive from base class.
class B : public A
{
public:
    // Native responsibility.
    virtual void F();

    // Show with graphics.
    virtual void ShowGraphics();

    // Show with table.
    virtual void ShowTable();

    // IO
    virtual void Read();
    virtual void Write();

private:
    // Include attributes required for native responsibility. 
    // Include attributes required for showing with graphics. 
    // Include attributes required for IO. 
    // Include attributes required for showing with table. 
}; 
```

使用图形职责作为示例来分离职责的代码。代码要长得多。它真的值得吗？

```
class AGraphics;
class BGraphics;

class A
{
public:
    // Native responsibility.
    virtual void F();

    // Create AGraphics for showing with graphics.
    virtual AGraphics* CreateGraphics(); // ShowGraphics() becomes
                                         // CreateGraphics().Show().
                                         // For IO and showing table
                                         // do similarly.
                                         // Is this design okay???

    virtual ATable* CreateTable();                                             
    virtual AIo* CreateIo();                                             
};
// for the above code, does a follow singe responsibility principle?

class B : public A
{
public:
    // Native responsibility.
    virtual void F();

    // Create AGraphics for showing with graphics.
    virtual BGraphics* CreateGraphics();
    virtual BTable* CreateTable();                                             
    virtual BIo* CreateIo();                                             

private:
    // Include attributes required for native responsibility.
};

class AGrahics
{
public:
    // Show with graphics.
    virtual void ShowGraphics();
};

class BGrahics : public AGrahics
{
public:
    // Show with graphics.
    virtual void Show();

public:
    B* b; // need B's data attributes.
    // Include attributes required for showing with graphics. 
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:41:51.487

1) 取决于实施。如果实现简单且易于理解，那么您可能希望将其放在一个类中以降低复杂性。但是，如果实现很大且复杂，那么您可能希望将其分成不同的类以降低复杂性。
2) 取决于使用情况。尝试编写单元测试并相应地重构接口。单独测试各种功能应该很容易。如果它易于测试，则易于重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:21:00.493

Gamma 等人的优秀“设计模式”一书谈到了将可能更频繁更改的事物与不太可能改变的事物隔离开来。一般来说，代表事物（图形、表格）的方式的代码会比事物本身的代码更频繁地变化。

因此，将关注点划分为不同类的麻烦的一个原因是，您最终会得到较小的类，每个类都做好一件事。稍后，如果您决定为表格输出的外观添加一个特性，例如，您不必费力地阅读所有有关 IO 和图形的代码。（如果类是分开的）使用包含似乎是一项额外的工作，但它的另一个好处是有助于澄清你对问题的思考——它避免了当你不小心在一部分中使用类变量时出现的讨厌的问题影响另一部分行为的代码。

# java - 多人回合制游戏架构问题

> ID：14699174
> 
> 赞同：3
> 
> 时间：2013-02-05T02:26:11.210
> 
> 标签：java, mysql, webserver, multiplayer

我正在开发一款有趣的 2D 游戏，以了解多人游戏的来龙去脉。游戏本身将使两名玩家的军队在战略回合制战斗中相互对抗。我正在将它开发为一个独立的桌面客户端（最终可能是一个手机应用程序）。

我正在用 Java 编写游戏，我不信任客户端，所以我考虑了安全性。玩家将拥有一个个人帐户，其中包含他们的军队列表和将在服务器上存在的东西。此外，我计划使用 mySQL 将此类数据存储在服务器上。

但是，我不确定如何实现这一点。我是否使用网络服务器之类的东西？这似乎是错误的，但我不知道在客户端不受信任的情况下，Java 前端和后端使用什么技术。请注意，我不是在寻找关于最佳方式的辩论，我只需要了解概念，也许是一些示例技术，也许是指向教程的链接。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T02:36:57.690

除非您打算将其作为浏览器游戏，否则我认为使用网络服务器并不是最好的主意。

套接字可能是您正在寻找的答案，您可以使用它们创建自己的不信任客户端的通信协议。

您的服务器将需要使用服务器套接字并接受多个客户端。

您还可以将[Swing](http://docs.oracle.com/javase/tutorial/uiswing/)用于客户端 UI。

[这](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)是默认的 java Sockets 教程。

例如，您的协议可能包含以下命令： (Client to Server) Move(UnitGroup, Point) - 告诉服务器您要将组移动到某个点，然后服务器执行计算以确定单位到达并开始将它们移动到那里。

（服务器到客户端）PositionUpdated(UnitGroup, Point) - 告诉客户端一个组移动到某处并且可能需要在显示中更新

如果您发布您的协议，玩家甚至可以让他们自己的客户端按照自己的意愿查看游戏。你的服务器会通过只给客户他们应该“看到”的东西来保持公平。

我不知道这会如何影响延迟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T03:08:19.003

只是为 Psetmaj 的有用答案添加一点内容：

Your game client and game server are going to deal with the structures (lists, etc) you use in a very Java-centric way. The part you're not yet experience in is going to be figuring out how to package up these commands and structures for transport in TCP or UDP and then unpacking them at the other end. This is called "marshalling" (when you pack the payload) and "de-marshalling" (when you unpack it and turn it back into something Java can understand). In fact, the "hard" part about it is that it is very tedious and needs to happen for every different message that goes back or forth.

我的建议是在您继续操作时使用辅助函数库，该库负责将您使用的结构转换为当您通过网络发送和接收它们时它们将具有的表示形式。该表示可以是基于文本的，如 AJAX 或基于二进制的，如 Java 的 RMI，无论您决定尝试哪种方式。

# java - Android - 在编译时使用具有未知实现的 Java 接口

> ID：14699178
> 
> 赞同：1
> 
> 时间：2013-02-05T02:26:30.663
> 
> 标签：java, android, dynamic, interface

我有一个带有 Java 接口的 Android 应用程序，它只有一个方法，比如`void doStuff(String className)`. 其他人会为我提供 .jar 文件，每个文件都包含一个实现此接口的类，以包含在我的 APK 中。当`doStuff()`被调用时，我将接收实现接口的类的名称作为参数。我希望能够获得该类的实例并`doStuff()`在运行时调用，而无需在我自己的代码中定义任何特定的实现类类型。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:49:12.393

您可以通过少量的反射来做到这一点：

```
Class<? Extends MyInterface> myClass = (Class<? Extends MyInterface>)Class.forName(className);
MyInterface myObject = myClass.newInstance();
myObject.doStuff(); 
```

这要求实现类具有可访问的无参数构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:42:26.887

您可以通过反射来实现这一点，这是一个说明性示例，您可以根据需要进行更改。

此代码假定 doStuff 不接受任何参数，并且该类定义了默认构造函数。

```
Class<?> myClass = Class.forName(className);

Method doStuffMethod = myClass.getMethod("doStuff");

doStuffMethod.invoke(myClass.newInstance()); 
```

# c - 存储在 eax 寄存器中的 c 变量

> ID：14699186
> 
> 赞同：-2
> 
> 时间：2013-02-05T02:26:52.123
> 
> 标签：c, gcc, assembly, inline-assembly

我在这里做错了什么？

```
int val = 15;
asm ("movl %1, %%eax"::"r"(val):"%eax" );
__asm__ volatile ("int $0x80"); 
```

我想在 eax 中移动 15 然后调用中断

> “错误”：“asm”：操作数超出范围

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T02:35:04.710

每个`asm`构造都是独立的，并且在一个中设置的值/寄存器与另一个无关。为了完成这项工作，您需要一个`asm`. 此外，实际上不需要将值移动到 eax 中——这就是“a”输入约束所做的事情。所以你要：

```
int val=15
asm volatile("int $0x80" : : "a"(val)); 
```

要不就

```
asm volatile("int $0x80"::"a"(15)); 
```

**编辑**

各种约束字母的含义在[gcc 文档](http://gcc.gnu.org/onlinedocs/gcc/Constraints.html#Constraints)中，但基本上，对于 x86，它们是：

```
'r' -- any general register
'm' -- in memory addressable by an EA operand (base reg + index * scale + displacement)
'a' -- al/ax/eax/rax register (depending on the size of the operand)
'b' -- bl/bx/ebx/rbx register
'c' -- cl/cx/ecx/rcx register
'd' -- dl/dx/edx/rdx register
'A' -- edx:eax register pair (holding a 64-bit value)
'D' -- di/edi/rdi
'S' -- si/esi/rdi
'f' -- any 8087 fp register
't' -- ST(0) -- top of 8087 stack
'u' -- ST(1) -- second on 8087 stack
'y' -- any MMX register
'x' -- any XMM register 
```

如果你想把多个东西放在特定的寄存器中，你需要多个输入，每个输入都有适当的约束。例如：

```
int read(int fd, void *buf, int size) {
    int rv;
    asm ("int $0x80" : "=a"(rv) : "a"(3), "b"(fd), "c"(buf), "d"(size) : "memory");
    return rv;
} 
```

直接进行“读取”系统调用。输入约束将各种参数放在 eax/ebx/ecx/edx 寄存器中，返回值最终在 eax 寄存器中。

对于不对应特定寄存器的约束，你会`%n`在asm字符串中使用，它会被编译器选择的寄存器替换，但对于特定寄存器对应的约束，不需要直接提及.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:31:13.987

看起来他在下面的代码示例中明确地将 x 放入 EAX：

[GCC 内联汇编语言中的 r() 和 double percent %% 是什么？](https://stackoverflow.com/questions/3589157/need-some-help-understanding-gcc-inline-assembly-language?rq=1)

我用 g++ 编译了该代码并通过 gdb 运行它。
在 gdb 中，*info register eax*显示正确的数字

您使用的是什么编译器、操作系统和架构？如果您使用的是 64 位 MSVS，则无法进行内联汇编。

```
#include<iostream>
using namespace std;

int main(int argc, char* argv[])
{

cout << "Compile via: g++ -O0 -ggdb -o asm.out asm.cpp" << endl;
cout << "Want to put 15 into register EAX and then call an interrupt." << endl;
cout << "gdb ./asm.out  --> stepi --> info register eaain." << endl;

int eaxin = 15, eaxout=0, ebxin=33, ebxout=0;
cout << "Before calling assembly routines:" << endl;
cout << "eaxin=" << eaxin << "\t" << "eaxout=" << eaxout << "\t" ;
cout << "ebxin=" << ebxin << "\t" << "ebxout=" << ebxout << endl;

asm ("movl %1, %%eax;"
     "movl %%eax, %0;"
    :"=r"(eaxout)   /* 1  eaxout is output operand 1 */
    :"r"(eaxin)     /* 0  eaxin is input operand 0*/
    :"%eax"
    );   /* %eax is clobbered register.  Why not two percent signs here? */

//Lets play in the ebx register.
asm ("movl %1, %%ebx;"
     "inc %%ebx;"
     "inc %%ebx;"
     "movl %%ebx, %0;"
    :"=r"(ebxout) 
    :"r"(ebxin) /* "+" is supposed to allow input and output but did not work */
    :"%ebx"
    ); 

//Call the system interrupt 128.
asm volatile ("int $0x80");

cout << "After calling assembly routines. Value of eaxout should have changed." << endl;
cout << "eaxin=" << eaxin << "  " << "eaxout=" << eaxout << "\t" ;
cout << "ebxin=" << ebxin << "\t" << "ebxout=" << ebxout << endl;
cout << endl;
cout << "https://stackoverflow.com/questions/3589157/need-some-help-understanding-gcc-inline-assembly-language?rq=1" << endl;
cout << "Note: inline assembly CANNOT be done with MS VisualStudio 64bit." << endl;
cout << "   option1:   Use a separate file for the assembler code." << endl;
cout << "   option2:   Use instrinsics." << endl;
cout << " Look for intrn.h at http://software.intel.com/en-us    /node/181178?wapkw=ain86_64+assembly "  << endl;
return 0;
} 
```

*(gdb) info register eax ebx
eax 0xf 15
ebx 0x0 0
(gdb) step
35 asm volatile ("int $0x80");
(gdb) 信息寄存器 eax ebx
eax 0x23 35
ebx 0x23 35*

# php - Php 对链接的数组进行排序

> ID：14699189
> 
> 赞同：1
> 
> 时间：2013-02-05T02:27:08.793
> 
> 标签：php, arrays, sorting

我有 2 个数组。
一个是一个充满名字的数组。
另一个是一个充满时代的数组。
两个数组中的值匹配。名称数组中值 x 处的名称与年龄数组中值 x 处的年龄相匹配。我想根据他们的年龄对数组进行排序。我可以知道如何链接数组，然后使用 asort 或 usort 之类的东西对数组进行排序吗？还是我需要手动对数组进行排序？

```
Names Array ('John','Eric','Dave')
Age Array ('11','4','10')

John is 11, Eric is 4, Dave is 10. 
```

排序后的数组看起来像这样。

```
Names Array ('Eric','Dave','John')
Age Array ('4','10','11') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:31:22.980

```
$names = array('a', 'c', 'd', 'b');
$ages = array(1, 2, 3, 4);

array_multisort($names, $ages);

var_dump($names, $ages); 
```

参考： http: [//php.net/array_multisort](http://php.net/array_multisort)

代码直播：http: [//ideone.com/CGsR3q](http://ideone.com/CGsR3q)

# actionscript-3 - 如何在actionscript 3中重放声音

> ID：14699190
> 
> 赞同：0
> 
> 时间：2013-02-05T02:27:12.383
> 
> 标签：actionscript-3, audio

我试图在我的游戏中重放这个声音......但由于某种原因它正在工作，有人可以解释一下为什么吗？

```
 var morning:Sound =new alarmclock ();
                       var transforming:SoundTransform = new SoundTransform(0.5);
                       var morningChannel:SoundChannel = morning.play(0,0,transforming);
                       morningChannel.addEventListener(Event.SOUND_COMPLETE, replay);
                       function replay (event:Event) {
                    morningChannel = morning.play(0,0,transforming);    
                    trace ("ANYBODY IN THERE????");
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:12:55.080

做这个：

```
function replay (event:Event) {
  morningChannel = morning.play(0,0,transforming);    
  trace ("ANYBODY IN THERE????");
  morningChannel.addEventListener( Event.SOUND_COMPLETE, replay );
} 
```

> [请注意，我们再次将事件侦听器添加到声音通道。这是因为“morningChannel = Morning.play(0,0,transforming);”这一行 导致 Sound Channel 上的所有事件侦听器丢失。]

我从[http://gamedev.michaeljameswilliams.com/2009/03/03/avoider-game-tutorial-9/借来了解释](http://gamedev.michaeljameswilliams.com/2009/03/03/avoider-game-tutorial-9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T08:25:27.917

试试这个 ：

导入 flash.media.Sound；

导入 flash.media.SoundChannel；

导入 flash.events.Event；

var demoSound：声音；

var demoSoundChannel:SoundChannel;

播放声音（）;

功能播放声音（）：无效{

```
demoSound = new soundObj();// soundObj is your sound.
demoSoundChannel = new SoundChannel();
demoSoundChannel = demoSound.play();
demoSoundChannel.addEventListener(Event.SOUND_COMPLETE, onComplete); 
```

}

函数 onComplete(e:Event):void {

```
playSound(); 
```

}

只是一个简单的循环播放示例，它正在工作。您可以在 play 方法中添加参数，它不会影响循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:44:49.830

尝试：

```
function replay (event:Event)
{
    morningChannel = morning.play(pausing,1,transforming);               
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T03:22:19.617

尝试侦听由对象`Event.COMPLETE`调度的那个。`Sound`我过去已经成功地使用它来重放声音。

我不知道`SoundChannel`调度它自己的`Event.SOUND_COMPLETE`事件。您的代码（以及来自@Lee Burrows 的类似代码）似乎都应该可以工作。

无论如何，监听`Event.COMPLETE`对象`Sound`可能值得尝试：

```
var morningChannel:SoundChannel = morning.play(pausing,1,transforming);
morning.addEventListener(Event.COMPLETE, replay);

function replay (event:Event)
{
    morningChannel = morning.play(pausing,1,transforming);               
} 
```

如果这也不起作用，则可能是某些东西正在被垃圾收集。

此外，您正在传递`1`给该`play()`方法，因此它循环一次。那行得通吗？也许这在某种程度上令人困惑。您可以尝试将其设置为 0，因为无论如何您都在重放声音。

最后，如果它仍然不起作用，您应该在`replay()`方法中设置一个断点（或在其中添加一条`trace()`语句），以便您可以确定事件是否被调度。

# android - 如何为按钮动态添加 layout_toRightOf？

> ID：14699192
> 
> 赞同：0
> 
> 时间：2013-02-05T02:27:25.783
> 
> 标签：android, android-button

我的活动相对布局中有几个按钮。但我还想在 onCreate() 中动态添加一个按钮，所以我做了这样的事情：

```
RelativeLayout rl = (RelativeLayout)findViewById(R.layout.activity_start_game);
            ImageButton newbtn1 = new ImageButton(this);
            newbtn1.setBackgroundResource(R.drawable.game_button_2);
            rl.addView(newbtn1); 
```

但我也想设置高度、宽度值和我的新按钮应该正确的信息，例如已经存在的按钮（类似于 toRightOf 在 xml 中，但现在是动态的）。预先感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:58:42.907

为了充实这一点，这些是您需要关注的 API 的主要部分。

一、`addRule(int verb, int anchor)`方法：

[http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#addRule(int)](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#addRule(int))

其次，提供“动词”的常量。

[http://developer.android.com/reference/android/widget/RelativeLayout.html#constants](http://developer.android.com/reference/android/widget/RelativeLayout.html#constants)

你会做这样的事情：

```
RelativeLayout.LayoutParams params = new 
    RelativeLayout.LayoutParams(WRAP_CONTENT,WRAP_CONTENT);
params.addRule(RIGHT_OF, R.id.some_widget);
params.addRule(ALIGN_RIGHT, R.id.some_other_widget);
newBtn1.setLayoutParams(params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:31:57.743

使用 setLayoutParams 并将其传递给 RelativeLayout.LayoutParams 对象。它包含所有的左侧，右侧等信息。您必须为要添加的每项内容添加 1 条规则。

# ios - 创建 PDF 时出现内存警告和崩溃

> ID：14699194
> 
> 赞同：5
> 
> 时间：2013-02-05T02:27:26.993
> 
> 标签：ios, objective-c, cocoa-touch, memory-management

生成大型 PDF 时，我的应用程序收到一条内存警告，然后在 PDF 的生成过程中崩溃。PDF 被绘制到网络视图中，当页面超过一定数量（取决于设备）时，我的内存不足

到目前为止，我对此事的研究使我明白我需要：

更改`UIGraphicsBeginPDFContextToData`为`IGraphicsBeginPDFContextToFile`

1.  创建一个合理的临时文件路径，

2.  把它交给函数，

3.  将文件交给 webview 加载。

4.  完成后删除文件。

问题是，虽然我认为我（只是）主要掌握了它，但我不知道如何实现这一点，或者完全理解它以便在我的代码中实现它。在这件事上的建议非常适用

我也愿意接受任何其他想法来阻止内存崩溃

```
@interface ICPDFPreviewController ()
@property (nonatomic, strong) Certificate *certificate;
@property (nonatomic, strong) NSData *pdfData;
@property (nonatomic) BOOL viewHasUnloaded;
- (void)generatePdf;
- (void)pdfDone:(NSData *)data;
- (NSData *)createPdfWithPages:(NSArray *)pages;
@end

@implementation ICPDFPreviewController
@synthesize certificate=_certificate;
@synthesize scrollView=_scrollView;
@synthesize webView=_webView;
@synthesize pdfData=_pdfData;
@synthesize viewHasUnloaded=_viewHasUnloaded;

- (void)generatePdf
 {
 NSMutableArray *pagesArray = [NSMutableArray array];

 if ([self.certificate.certificateType.title isEqualToString:@"Minor Works"]) {
[pagesArray addObject:[[ICPDFMinorWorksPage1 alloc] initWithCertificate:self.certificate]];
 [pagesArray addObject:[[ICPDFMinorWorksPage2 alloc] initWithCertificate:self.certificate]];

 } else if ([self.certificate.certificateType.title isEqualToString:@"EIC"]) {
[pagesArray addObject:[[ICPDFEICPage1 alloc] initWithCertificate:self.certificate]];
[pagesArray addObject:[[ICPDFEICPage2 alloc] initWithCertificate:self.certificate]];
[pagesArray addObject:[[ICPDFEICPage3 alloc] initWithCertificate:self.certificate]];
[pagesArray addObject:[[ICPDFEICPage4 alloc] initWithCertificate:self.certificate]];
[pagesArray addObject:[[ICPDFEICPage5 alloc] initWithCertificate:self.certificate]];
[self addDistributionBoardsToPagesArray:pagesArray];
ICPDFEICPageFinal *pageFinal = [[ICPDFEICPageFinal alloc]        initWithCertificate:self.certificate];
 pageFinal.pageNumber.text = [NSString stringWithFormat:@"%d", pagesArray.count+1];
[pagesArray addObject:pageFinal];

} else if ([self.certificate.certificateType.title isEqualToString:@"Domestic EIC"]) {
[pagesArray addObject:[[ICPDFDomesticEICPage1 alloc] initWithCertificate:self.certificate]];
[pagesArray addObject:[[ICPDFDomesticEICPage2 alloc] initWithCertificate:self.certificate]];
[pagesArray addObject:[[ICPDFDomesticEICPage3 alloc] initWithCertificate:self.certificate]];
[pagesArray addObject:[[ICPDFDomesticEICPage4 alloc] initWithCertificate:self.certificate]];
[self addDistributionBoardsToPagesArray:pagesArray];
[pagesArray addObject:[[ICPDFDomesticEICPageFinal alloc] initWithCertificate:self.certificate]];

} else if ([self.certificate.certificateType.title isEqualToString:@"EICR"]) {
[pagesArray addObject:[[ICPDFEICRPage1 alloc] initWithCertificate:self.certificate]];
[pagesArray addObject:[[ICPDFEICRPage2 alloc] initWithCertificate:self.certificate]];
[self addObservationsToPagesArray:pagesArray];
[self addDistributionBoardsToPagesArray:pagesArray];
[pagesArray addObject:[[ICPDFEICRInspection alloc] initWithCertificate:self.certificate]];
[pagesArray addObject:[[ICPDFEICRInspectionPage1 alloc] initWithCertificate:self.certificate]];
[pagesArray addObject:[[ICPDFEICRInspectionPage2 alloc] initWithCertificate:self.certificate]];
[pagesArray addObject:[[ICPDFEICRInspectionPage3 alloc] initWithCertificate:self.certificate]];
[pagesArray addObject:[[ICPDFEICRPageFinal alloc] initWithCertificate:self.certificate]];
 }

// Set page count on all pages
int pageNumber = 0;
for (ICCertificateComponent *page in pagesArray) {
page.pageNumber.text = [NSString stringWithFormat:@"%d", ++pageNumber];
page.pageCount.text = [NSString stringWithFormat:@"%d", pagesArray.count];
}

 NSData *pdfData = [self createPdfWithPages:pagesArray];
[self performSelectorOnMainThread:@selector(pdfDone:) withObject:pdfData waitUntilDone:YES];

 }

- (void)pdfDone:(NSData *)data
 {
 self.pdfData = data;
[self.webView loadData:self.pdfData MIMEType:@"application/pdf" textEncodingName:@"utf-8"      baseURL:nil];
 [ICUtils removeProgressView];
 }

 - (NSData *)createPdfWithPages:(NSArray *)pages
  {
 // Creates a mutable data object for updating with binary data, like a byte array
 NSMutableData *pdfData = [NSMutableData data];

 ICCertificateComponent *firstPage = [pages objectAtIndex:0];

UIGraphicsBeginPDFContextToData(pdfData, firstPage.contentView.bounds, nil);

 for (int i = 0; i < pages.count; i++) {
 ICCertificateComponent *thisPage = [pages objectAtIndex:i];
 UIGraphicsBeginPDFPageWithInfo(thisPage.contentView.bounds, nil);

 CGContextRef pdfContext = UIGraphicsGetCurrentContext();
 [thisPage.contentView.layer renderInContext:pdfContext];
 }

 UIGraphicsEndPDFContext();

 return pdfData;
}

- (void)addDistributionBoardsToPagesArray:(NSMutableArray *)pagesArray
{
int pageCount = pagesArray.count;
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"createdAt"       ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil]; 
NSArray *boards = [self.certificate.distributionBoards      sortedArrayUsingDescriptors:sortDescriptors];
 for (DistributionBoard *thisBoard in boards) {
DebugLog(@"Creating a board page");
ICPDFDistributionBoard *boardPage = [[ICPDFDistributionBoard alloc]        initWithDistributionBoard:thisBoard];
boardPage.pageNumber.text = [NSString stringWithFormat:@"%d", ++pageCount];
DebugLog(@"Page number is %d", pageCount);
[pagesArray addObject:boardPage];

NSSortDescriptor *circuitDescriptor = [[NSSortDescriptor alloc] initWithKey:@"createdAt"     ascending:YES];
NSArray *circuitDescriptors = [[NSArray alloc] initWithObjects:circuitDescriptor, nil]; 
NSArray *circuits = [thisBoard.circuits sortedArrayUsingDescriptors:circuitDescriptors];

 //int circuitCount = circuits.count;
 ICPDFCircuitDetails *circuitDetails = boardPage.circuitDetails;

int circuitCount = 0;
for (Circuit *thisCircuit in circuits) {
circuitCount++;
if (circuitCount > 16) {
    // Add an extension page
    DebugLog(@"Adding an extension sheet");
    circuitCount = 1;
    ICPDFDistributionBoardExtension *boardExtension = [[ICPDFDistributionBoardExtension  alloc]   initWithDistributionBoard:thisBoard];
    [pagesArray addObject:boardExtension];
    boardExtension.pageNumber.text = [NSString stringWithFormat:@"%d", ++pageCount];
    circuitDetails = boardExtension.circuitDetails;
   }
    NSString *key = [NSString stringWithFormat:@"circuitRow%d", circuitCount];
   ICCircuitRow *circuitRow = [circuitDetails valueForKey:key];
   [circuitRow populateFromCircuit:thisCircuit];
  }
 }
} 
```

调试控制台警告是其中的一个负载，然后崩溃

```
 2013-02-08 10:38:35.475 iCertifi[5772:907] Received memory warning.
 2013-02-08 10:38:35.477 iCertifi[5772:907] <ICPDFPreviewController: 0x1eb28930>   didReceiveMemoryWarning 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T05:19:08.710

很久以前，在一个完全不同的平台上，我正在生成 PDF 文件并遇到了这种问题。解决方案是一次生成一个页面（在打开下一个页面进行成像之前关闭每个页面（不是文档））。这对我的多页文档产生了巨大的影响。查看您的代码，这与您在这里面临的问题相同。实际上，您还有一个额外的问题，即您首先以图形方式在内存中构建所有页面数据，然后在内存中构建所有 pdf 页面并且它崩溃了。请阅读下文，了解如何解决问题的详细信息。

[在这里](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/GeneratingPDF/GeneratingPDF.html)阅读

看来您想要的顺序是：

```
// start pdf document using default page size (CGRectZero)
UIGraphicsBeginPDFContextToFile(pdfFileName, CGRectZero, nil); 

// then loop through your content drawing it one page at a time.
for ( page p in pages )   // or whatever you are cycling over for page content
{
   UIGraphicsBeginPDFPage();   // or UIGraphicsBeginPDFPageWithInfo

  // do your drawing to the page here by drawing to the current graphics context.
  // if you are setting up transforms and such

}
// close out the last page and the document both
UIGraphicsEndPDFContext(); 
```

所以这应该做的是将内存中的渲染数据量保持在一次一页（加上文档全局数据的一些开销）。

好的。我查看了您的代码，如果我理解正确的话，您似乎最终在内存中至少有 2 个呈现页面的副本。

这是关键——一次只画一页。您没有显示所有`ICPDFEICRPage1`这些是什么，但似乎它们是将页面内容呈现给某种 UIView 的对象？这意味着他们拥有整个视图的像素数据（即副本 1）。因此，在渲染任何 pdf 页面之前，您将一次绘制所有页面的每一页都使用内存。然后打开 PDF 页面上下文，将其呈现为`NSMutableData`（即数据的第二个副本）。

另一个问题是：为什么要渲染到某种内存结构（视图），而不是在打印该页面时仅渲染到每个页面的 pdf 页面图形上下文？我*猜*这是因为您有一个 UIView 层次结构，其中包含字段和在 xib 文件中定义的所有内容，因此您不必手动完成所有布局和字符串的绘制等。正确的？

如果是这样，那么要做的就是让你的 pages 数组成为一个数组，它是你想要的对象的某种列表，`ICPDFEICR...`你想要它们的顺序，而不是实际分配的对象本身。也许为每种可能的页面类型、观察结果、分发板等定义一个枚举。然后您的 pages 数组只是一个整数数组（这些枚举按您希望在文档中显示的顺序排列）。

然后只为当前页面分配实际对象，将其映像到页面，然后在执行下一页之前将其释放。

另外，我假设（希望！）您正在使用 ARC，否则您在此代码中会有很多内存泄漏（！！！）。

希望这足以让您开始走上正确的道路。哦，使用文件技术，你需要给它一个文件路径，然后你只需将该路径作为 file:// url 传递给 webview 以显示。

虽然现在我想起来了，为什么你要使用 UIWebView 来显示 PDF？查看[Zooming PDF Viewer](http://developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Introduction/Intro.html)示例以获取不尝试将整个 PDF 文档加载到内存中以显示它的替代方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T06:11:38.433

也许这可以帮助您解决问题。请注意，代码包含

*   创建文件
*   `UIGraphicsGetCurrentContext();`添加内容[在 after方法中开始绘图
*   在 web 视图中查看

从按钮动作开始

```
- (IBAction)buttonPress:(id)sender
{
    [self createPDFData:[self getPDFFileName]];
}
-(NSString *)getPDFFileName
{
    NSString * fileName = @"Info.PDF";

    NSArray *arrayPaths =
    NSSearchPathForDirectoriesInDomains(
                                        NSDocumentDirectory,
                                        NSUserDomainMask,
                                        YES);
    NSString * path = [arrayPaths objectAtIndex:0];
    NSString *pdfFileName = [path stringByAppendingPathComponent:fileName];
    NSLog(@"path : %@",path);
    NSLog(@"pdf file name : %@",pdfFileName);
    return pdfFileName;

}

-(void)showPDFFile
{

    UIWebView *  webView = [[UIWebView alloc] initWithFrame:CGRectMake(0,44,1024,748)];

    NSURL *url = [NSURL fileURLWithPath:[self getPDFFileName]];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [webView setScalesPageToFit:YES];
    [webView loadRequest:request];

    [self.view addSubview:webView];

}

-(void)createPDFData:(NSString *)fileName{

    CGRect pageFrame = CGRectMake(0,0,768,1024);
    UIGraphicsBeginPDFContextToFile(fileName, CGRectZero, nil);//This starts drawing a pdf to file named "filename"  UIGraphicsBeginPDFPageWithInfo(pageFrame, nil);//For each new page call this
    UIGraphicsGetCurrentContext();
    UIGraphicsBeginPDFPageWithInfo(pageFrame, nil);//Next or new Page
    NSString * timeLabel = [NSString stringWithFormat:@"Some text"];
    [timeLabel drawInRect:CGRectMake(200, 200, 428, 44) withFont:[UIFont boldSystemFontOfSize:10] lineBreakMode:NSLineBreakByWordWrapping alignment:NSTextAlignmentLeft];
    UIGraphicsEndPDFContext();
    [self showPDFFile];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T11:35:27.893

尝试在你的 for 循环中使用 @autoreleasepool

```
for (int i = 0; i < pages.count; i++) {

// notice this line 
     @autureleasepool 
     {
       ICCertificateComponent *thisPage = [pages objectAtIndex:i];
       UIGraphicsBeginPDFPageWithInfo(thisPage.contentView.bounds, nil);

       CGContextRef pdfContext = UIGraphicsGetCurrentContext();
       [thisPage.contentView.layer renderInContext:pdfContext];
     }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-17T18:39:56.220

如果没有其他工作，您可以尝试我的解决方案。它滚动浏览 web 视图并一次将一页添加到 PDF 中。我无法以任何其他方式解决这个问题。这个解决方案的背面是它使用了一个计时器，并且您将在生成 PDF 时在应用程序中看到滚动。

这是代码：

```
...
    CGPoint savedContentOffset;
    CGRect savedFrame;
    NSMutableData * pdfData;
    int pdfOffset;
    NSTimer *timer;
...

- (void)preparePdf {
    CGFloat height = aWebView.scrollView.contentSize.height;
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    int pageHeight = screenRect.size.height;

    savedContentOffset = aWebView.scrollView.contentOffset;
    savedFrame = aWebView.frame;
    pdfData=[NSMutableData data];

    aWebView.scrollView.contentOffset = CGPointZero;
    aWebView.frame = CGRectMake(aWebView.frame.origin.x,aWebView.frame.origin.y,aWebView.frame.size.width,pageHeight);

    UIGraphicsBeginPDFContextToData(pdfData, aWebView.frame, nil);

    NSLog(@"pageHeight = %d", pageHeight);
    pdfOffset = 0;

    timer = [NSTimer scheduledTimerWithTimeInterval: 0.4
                                             target: self
                                           selector: @selector(printPdfPage:)
                                           userInfo: nil
                                            repeats: YES];
}

- (void) printPdfPage: (NSTimer*) timer {
    CGFloat height = aWebView.scrollView.contentSize.height;
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    int pageHeight = screenRect.size.height;

    NSLog(@"pdfOffset = %d", pdfOffset);
    UIGraphicsBeginPDFPage();
    [aWebView drawViewHierarchyInRect:CGRectMake(0, 0, screenRect.size.width, pageHeight) afterScreenUpdates:YES];

    pdfOffset += pageHeight;
    aWebView.scrollView.contentOffset = CGPointMake(0, pdfOffset);

    if (pdfOffset > height) {
        [timer invalidate];
        NSLog(@"pdf data size: %ld", pdfData.length);
        [self emailPdf: pdfData];
    }
}

- (void) emailPdf: (NSMutableData*) pdfData {

    // finally end the PDF context.
    UIGraphicsEndPDFContext();

    aWebView.scrollView.contentOffset = savedContentOffset;
    aWebView.frame = savedFrame;

    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
    mailer.mailComposeDelegate = self;
    [mailer setSubject:[@"iPad Screenshot " stringByAppendingString:[self getDate]]];
    [mailer addAttachmentData:pdfData mimeType:@"application/pdf" fileName:[[self getDate] stringByAppendingPathExtension:@"pdf"]];
    NSString *emailBody = @"";
    [mailer setMessageBody:emailBody isHTML:NO];
    [self presentViewController:mailer animated:YES completion:nil];

    if ([SVProgressHUD isVisible]) {
        [SVProgressHUD showSuccessWithStatus:@"Screenshot prepared."];
    }
    pdfData = nil;
    timer = nil;
} 
```

# mysql - Phpmyadmin 不显示“权限”选项卡

> ID：14699195
> 
> 赞同：21
> 
> 时间：2013-02-05T02:27:35.313
> 
> 标签：mysql, phpmyadmin, wamp, privileges

我在 Windows 上安装了 WAMP，无论如何我似乎都无法在 PhpMyAdmin 中显示“权限”选项卡。阅读其他论坛讨论和文章，我做了以下工作：

*   检查以确保我以 root 身份登录
*   重新安装 wamp
*   重置我的mysql用户
*   对用户运行 mysql 检查
*   清除了我的缓存

通过这些测试，我得到了以下错误：`Can't find file: 'user' (errno: 2)`. 谷歌搜索解决方案被证明是徒劳的。任何帮助，将不胜感激

**更新：截图** ![在此处输入图像描述](../Images/05dcdc7f4130e7f50e1e32b7eaf427f0.png)

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-05T03:19:28.310

如果您确定以 root 身份运行，请尝试清除 cookie 然后刷新。这，AFAIK，是一个特别影响谷歌浏览器的错误，但我不能肯定地说其他浏览器。请注意，您可以通过 Chrome 中的开发人员选项卡选择要删除的 cookie。您只需要删除 localhost cookie。

编辑：

不好了。所以你真的删除了“用户”表。我的建议是，您要么为数据库中的表找到 CREATE 脚本，要么`mysql`完全重新安装（看起来，无论如何您都不会丢失太多数据库）。仅作记录：

```
mysql> USE mysql;
Database changed
mysql> SHOW TABLES;
+---------------------------+
| Tables_in_mysql           |
+---------------------------+
| columns_priv              |
| db                        |
| event                     |
| func                      |
| general_log               |
| help_category             |
| help_keyword              |
| help_relation             |
| help_topic                |
| host                      |
| ndb_binlog_index          |
| plugin                    |
| proc                      |
| procs_priv                |
| proxies_priv              |
| servers                   |
| slow_log                  |
| tables_priv               |
| time_zone                 |
| time_zone_leap_second     |
| time_zone_name            |
| time_zone_transition      |
| time_zone_transition_type |
| user                      |
+---------------------------+
24 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-01T05:18:38.727

对于在使用 cPanel / WHM 时遇到此问题的人，cPanel 网站上链接到下面的帖子指出：

> 根据内部案例编号 37402，由于数据库映射功能，已删除通过 phpMyAdmin 添加/删除/重命名用户和数据库的功能。

这意味着用户/权限选项卡已从 cPanel 的 phpMyAdmin 版本中删除，听起来它不会回来。该帖子是从 2013 年 12 月开始的。

[http://forums.cpanel.net/f354/phpmyadmin-users-tab-gone-367​​661.html](http://forums.cpanel.net/f354/phpmyadmin-users-tab-gone-367661.html)

回复帖子的 cPanel 工作人员 cPanelMichael 推荐了两种选择。

1.  使用“主页 > SQL 服务 > 数据库映射工具”。这似乎缺少 phpMyAdmin 提供的主要功能。
2.  安装您自己的独立版本的 phpMyAdmin 并使用它而不是 cPanel 版本。

你必须热爱进步。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-11T10:39:08.263

**我解决了这样的问题：**

1）我通过这样的SQL查询设置了root密码：

*   在主页上，您应该看到当前的 root 用户 - 通常`root@localhost`
*   因此查询密码更改：
    `SET PASSWORD FOR 'root'@'localhost' = PASSWORD('YOURPASSWORDHERE');`

2）`config.inc.php`在您的 wamp/xampp 文件夹中搜索并更改`auth_type`：

*   您可能会找到更多这些配置，但是您需要的是包含以下行的配置：
    `$cfg['Servers'][$i]['auth_type'] = 'SOMETHING';`-更改`'SOMETHING'`为`'cookie'`
    So you get:（`$cfg['Servers'][$i]['auth_type'] = 'cookie';`或 http 如果您愿意）-

3) 清除/删除服务器的所有浏览器 cookie（通常查找 localhost 或 127.0.0.1 cookie）

4) 再次进入 phpyadmin 的网页 - 现在会提示您登录框（html 或 http - 取决于您设置的是 cookie 还是 http）

5)**登录 - 你就完成了！:)**突然出现“权限”/“用户”选项卡，退出按钮也突然出现！:)（在“小房子”旁边-左上）

PS：`config.inc.php`包含更多有趣的设置:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-19T00:52:59.237

这个我花了很长时间才弄清楚，并且“root”登录没有帮助。

注销并重新登录：

这次我把**root**作为用户名

并**使用与我的用户帐户相同的密码，我获得了访问权限。**

这对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T03:11:00.353

您能否进入`Users`顶部的选项卡并通过单击“编辑权限”然后在“管理”下单击来编辑您的用户（ `root`、、、`admin`等等） ？`any``grant`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-22T03:48:56.020

您必须以**“localhost”** @phpmyadmin**页面身份登录**

授予**“localhost”**用户的权限**有限**

 ****就像您以“root”身份登录而没有任何密码一样，您将拥有所有特权，然后您将在 phpmyadim 主页上看到用户选项卡**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-21T15:48:51.070

如果您不知道root密码，请按照root密码更改然后登录，它对我有用。

要更改 root 用户的 mysql 密码，请执行以下操作：

1.  卸下`mysqld.nlm`
2.  在控制台中，键入：`mysqld_safe --skip-grant-tables --autoclose`
3.  在服务器控制台类型`mysql`

这将带您进入 mysql 提示符。在此提示符下键入以下内容：（其中 ******** 是新密码，注意：需要单引号）

```
mysql> UPDATE mysql.user SET Password=PASSWORD('********') WHERE User='root';
mysql> FLUSH PRIVILEGES; 
```

刷新权限将使更改立即生效。

您可以在 MySQL 3.22 及更高版本中使用 SET PASSWORD 语句：（其中 ******** 是新密码，注意：需要单引号）

```
shell> mysql -u root mysql
mysql> SET PASSWORD FOR root=PASSWORD('********'); 
```

另一种设置密码的方法是使用 mysqladmin 命令：（其中 ******** 是新密码）

```
shell> mysqladmin -u root password ********
shell> mysqladmin flush-privileges 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-31T11:42:54.773

真的，只有一件事对我有用。`root`即使使用 AllowNoPassword 选项，使用空白密码也不起作用。请注意，您可以执行*grant create*（而不是*grant all*）来仅授予*create table*权限。我想要所有权限，因为它是为了我的本地开发。

* * *

我的解决方案，它将为您提供给定用户的所有权限（确保`phpmyadmin`您的用户名可以登录）：

`sudo mysql`

`mysql> grant all on *.* to phpmyadmin@localhost; mysql> flush privileges; mysql> exit`

* * *

然后从 PhpMyAdmin 注销，再次登录，您就拥有了所有权限。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-10T00:09:05.897

对我来说，我已将此添加到“config.inc.php”中，并且效果很好：

```
$cfg['Servers'][$i]['DisableIS'] = true; 
```**

# vpn - 将不同的请求转发到不同的接口

> ID：14699197
> 
> 赞同：1
> 
> 时间：2013-02-05T02:27:43.550
> 
> 标签：vpn, routes, iptables, gateway, ppp

我有一台网关计算机，它通过 ADSL 连接 Internet，并获得了一个虚拟接口 ppp0。我通过ADSL建立了一个pptp vpn，得到了一个虚拟接口ppp1。

有几台计算机连接到此网关计算机，以便共享 Internet 和 vpn 连接。

我想设置一些路由规则或iptables规则，让特定IP范围的特定请求从内部计算机转发到vpn连接（ppp1），其他请求直接通过ADSL连接（ppp0）。

我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:36:37.033

嗨，您可以通过 PREROUTING 链上 iptable 中的 DNAT 来做到这一点

下面的示例将 http 流量从指定的 ips 范围（“start-ip”到“end-ip”）重定向到指定的目标 ip 和端口（gatewayip:vpnportnumber）。

iptables -A PREROUTING -t nat -m iprange --src-range "start-ip"-"end-ip" -i "interface" -p tcp -m tcp --dport 80 -j DNAT --to-destination" gatewayip:vpnportnumber"

# ruby-on-rails-3 - 如何使用选择 [Rails 3] 的 I18n 选项进行翻译

> ID：14699199
> 
> 赞同：0
> 
> 时间：2013-02-05T02:28:03.610
> 
> 标签：ruby-on-rails-3

**如何使用选择的 I18n 选项进行翻译**

**同事，请告诉我，我该怎么做**

```
<%= date_select :user, :birthday,
  {:start_year => Time.now.year,
  :end_year => 1900,
  :use_short_month => false,
  :order => [:day, :month, :year],
  :prompt => {:month => 'Month', :day => 'Day', :year => 'Year'}},
  {:class => 'userBirthday',
  :id => 'userBirthday'}
%>

<%= select :user, :gender, ([["Male", "male"], ["Female", "female"]]), :class => 'bigselect' %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:28:36.373

**我忘了在语言环境文件中添加这个：**

```
es:
  date:
    abbr_day_names:
    - dom
    - lun
    - mar
    - mié
    - jue
    - vie
    - sáb
    abbr_month_names:
    - 
    - ene
    - feb
    - mar
    - abr
    - may
    - jun
    - jul
    - ago
    - sep
    - oct
    - nov
    - dic
    day_names:
    - domingo
    - lunes
    - martes
    - miércoles
    - jueves
    - viernes
    - sábado
    formats:
      default: ! '%d/%m/%Y'
      long: ! '%d de %B de %Y'
      short: ! '%d de %b'
    month_names:
    - 
    - enero
    - febrero
    - marzo
    - abril
    - mayo
    - junio
    - julio
    - agosto
    - septiembre
    - octubre
    - noviembre
    - diciembre
    order:
    - :day
    - :month
    - :year
.......
...
.. 
```

所有在这个链接：[https ://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/es.yml](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/es.yml)

正确选择的选项是： <%= select :user, :gender, ([[t("Male"), "male"], [t("Female"), "female"]]), :class => 'bigselect' %> 谢谢你提醒我@Kaeros

# javascript - 从表单提交自定义查询字符串

> ID：14699201
> 
> 赞同：1
> 
> 时间：2013-02-05T02:28:21.937
> 
> 标签：javascript, jquery, html

我有一个表单，当我提交它时，它会将我带到一个 URL www.domain.com/search/?maxprice=10000000，但是我想要它做的是把我带到一个自定义 URL，例如 www。 domain.com/search/maxprice_10000000/

我发现这个 javascript 代码旨在通过使用阻止表单执行其默认操作来允许自定义 url`event.preventDefault()`但是这要么不起作用，要么一开始就没有加载

这是我的代码：

```
 <script type="text/javascript">
    $(document).ready(function() {
    $("#propertysearch").submit(function(event) {
        event.preventDefault();

        window.location.href = "/"; //whatever i want but the problem is this doesnt seem to execute
    });
});
</script>
    <form id="propertysearch" action="/search" method="GET">

<p>
        <select id="maxprice" name="maxprice" style="width:47%;">
            <option value="10000000">Max Price...</option>
                <option disabled="disabled" value="10000000">- - - - - - - - - - - - - - - - - - - - - - -</option>
                <br />

<option value="100000">?100,000</option>
<option value="150000">?150,000</option>
<option value="200000">?200,000</option>
<option value="250000">?250,000</option>

        </select></p>

        <p><a href="javascript:document.forms['propertysearch'].submit();" title="Find a Property">Find a Property Now</a> &gt;</p>
        </form> 
```

任何帮助，将不胜感激！

**更新**我现在已经通过使用`<input type="submit" value="Submit">`而不是让代码工作`<a href="javascript:document.forms['propertysearch'].submit();" title="Find a Property">Find a Property Now</a>`

那么我怎样才能改变它`<a></a>`以使其工作

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:32:55.153

您示例中的代码使用 jQuery。要么包括 jQuery，要么使用非 jQuery 解决方案，如下所示：

```
document.getElementById('propertytype').addEventListener('submit', function (event) {
    event.preventDefault();

    window.location.href = "/"; //whatever you want
}); 
```

注意以上不是跨浏览器兼容的；您还必须使用`attachEvent`.

* * *

要使用`<a>`，我只需绑定到 click 事件：

```
$("#propertysearch a").on('click', function (e) {
    event.preventDefault();

    //submission code
});

//pre jQuery 1.7
$("#propertysearch a").bind('click', function (e) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:51:19.047

删除代码：href="javascript:document.forms['propertysearch'].submit();" 从你的代码，所以它应该是这样的：`<p><a href='#' title="Find a Property">Find a Property Now</a></p>`

# c++ - SetWindowsHookEx 注入失败

> ID：14699203
> 
> 赞同：0
> 
> 时间：2013-02-05T02:28:34.607
> 
> 标签：c++, dll-injection, setwindowshookex

我正在尝试拦截发送到在另一个进程中运行的窗口的消息，以便我可以对其中的一些做出反应。

注入应用程序是一个 x86 WPF 应用程序，它通过 p/invoke 调用此方法。我将句柄传递给另一个 x86 进程中的窗口。

```
extern "C" BOOL INJ_API ::InterceptMessages(HWND hWnd)
{
    if (!WM_MY_INJECT)
    {
        WM_MY_INJECT = RegisterWindowMessage(TEXT("WM_MY_INJECT"));
    }

    // Get the ID of the thread running the window.
    DWORD ThreadId = GetWindowThreadProcessId(hWnd, NULL);

    // Set the hook
    hhk = SetWindowsHookEx(WH_GETMESSAGE, HookProc, hinstDLL, ThreadId);

    // hhk is non-zero, so the hook is set up

    // This will block until the WM_MY_INJECT message is processed, the hook is unhooked, and we are done injecting the application.
    LRESULT result = SendMessage(hWnd, WM_MY_INJECT, NULL, NULL);

    return TRUE;
} 
```

我知道消息正在发送，因为结果是正确的值。但是 DLL 永远不会被其他进程加载，并且在没有我的钩子拦截它的情况下调用该消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:36:55.917

`WH_GETMESSAGE``GetMessage()`用于挂钩由或从消息队列中检索到的消息`PeekMessage()`。发送的消息`SendMessage()`不通过这些函数，因此不会触发`WH_GETMESSAGE`钩子。您需要使用`PostMessage()`代替`SendMessage()`，或使用`WH_CALLWNDPROC`或`WH_CALLWNDPROCRET`钩子代替`WH_GETMESSAGE`钩子。

# ruby-on-rails - Rails 资产管道/链轮

> ID：14699204
> 
> 赞同：2
> 
> 时间：2013-02-05T02:28:36.170
> 
> 标签：ruby-on-rails, sass, asset-pipeline, sprockets

我最近改用了资产管道。一切运行良好，我可以毫无问题地为生产进行预编译。

我遇到的麻烦是在我的开发环境中，我希望我所做的更改生效而无需预编译。我找不到关于如何在本地立即查看我最新的 CSS 更改的明确说明。例如，除了 application.css.scss 的 @import 语句之外，我还应该使用类似的东西吗？

```
//= depends_on reset
//= depends_on typography

@import "reset.css.scss"
@import "typography.css.scss" 
```

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T02:40:56.087

`rake assets:precompile`如果您想看到本地更改出现，请不要在本地运行。我怀疑这就是您正在做的事情，所以这就是本地更改没有出现的原因。清除`public/assets`，然后它将开始从正确的目录提供资产，如果它们发生变化则编译它们然后提供。

# java - Robot().createScreenCapture() 如此缓慢背后的技术和根本原因是什么？

> ID：14699209
> 
> 赞同：5
> 
> 时间：2013-02-05T02:29:38.227
> 
> 标签：java

我一直在尝试构建一个屏幕录像机来练习我萎缩的 Java 技能（即使已经有太多了）。

然而，我遇到了机器人类速度慢得离谱的问题——即使在我的 i7 驱动的机器上也可能是 15fps，而在我的 macbook 上爬行的速度是 4-5fps。我已经用 Python 构建了一个工作记录器，并且通过使用 PIL 抓取快照至少能够达到可靠的 20-24fps。

所以，我很好奇，课程这么慢的技术原因是什么？

此外，其他屏幕录像机如何工作？Screencast-o-matic 是 Java，并且似乎表现良好。我假设有某种方法可以与底层操作系统连接，并从缓冲区中提取所有内容或其他内容？我认为必须有一些非常快的方法来获取屏幕上正在绘制的内容的副本——毕竟，操作系统的速度足以在进行大量其他计算的同时多次绘制屏幕！似乎将一组颜色从一个地方复制到另一个地方应该是一种相对便宜的操作。

我决心不放弃！我只是不知道*我需要*知道什么才能真正深入了解构建合适的录音机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T16:47:05.453

我不完全确定。但仍然是一个很可能的原因。

操作系统：操作系统已经绘制了屏幕。这是有道理的，它存储了图形，直到发生新的事情。可以轻松保存图形。

java Robot：机器人在存储数据之前收集数据。屏幕截图使用方法。方法是getPixelColor()。它做了一个大循环来获取屏幕上的所有像素。在高清屏幕上该方法被调用921600次（1280*720），这需要时间加上它需要压缩成图像并保存。

# android - 在android中线性放置元素

> ID：14699218
> 
> 赞同：0
> 
> 时间：2013-02-05T02:30:55.020
> 
> 标签：android, android-layout

我对 android 很陌生，并尝试使用没有 xml 的 android api 水平放置元素。

我想要做的是水平放置 RadioButtons 和 EditText 。就像是：

```
R-----E
R-----E 
```

我试过这样的代码：

```
RadioGroup rg = new RadioGroup(this); //create the RadioGroup
rg.setOrientation(RadioGroup.VERTICAL);//or RadioGroup.VERTICAL
for(Map.Entry<String,String> entry : storedCards.entrySet())
{
    RelativeLayout.LayoutParams lp2 = new RelativeLayout.LayoutParams(
        RelativeLayout.LayoutParams.WRAP_CONTENT,
        RelativeLayout.LayoutParams.WRAP_CONTENT);
    EditText ed = new EditText(this);
    RadioButton rb  = new RadioButton(this);
    rb.setId(counter++);

    lp2.addRule(RelativeLayout.RIGHT_OF,rb.getId());
    ed.setLayoutParams(lp2);

    rg.addView(rb); //the RadioButtons are added to the radioGroup instead of the layout
    rb.setText(entry.getKey());
    relativeLayout.addView(ed);
} 
```

这行不通。但这就是我想要做的：首先，我使用`counter`变量为每个单选按钮设置 id，并尝试使用以下方法在该单选按钮的右侧站点上设置 edittext 视图：

```
lp2.addRule(RelativeLayout.RIGHT_OF,rb.getId()); 
```

但我没有得到正确的结果。我只得到这样的：

```
ER
R 
```

一切`EditText`都在重叠。我在哪里犯错误？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:00:00.863

您不能期望`RelativeLayout`相对于它不包含的其他视图放置视图。`RelativeLayout`不了解 的 ID，因为`RadioButtons`它们尚未添加到其中。因此，除了（只是 a ）`RadioButton`之外的任何其他布局中添加的a都不会具有您在用户点击它们进行检查时可能正在寻找的互斥逻辑。`RadioGroup``LinearLayout`

`RadioButton`所以你必须将你的项目垂直布置，让你的项目在它们旁边排列`RadioGroup`的最简单方法`EditText`是在它旁边创建一个第二个`LinearLayout`，并使用固定高度来确保每个“行”匹配。就像是：

```
LinearLayout root = new LinearLayout(this);
root.setOrientation(LinearLayout.HORIZONTAL);

RadioGroup buttonGroup = new RadioGroup(this);
buttonGroup.setOrientation(RadioGroup.VERTICAL);

LinearLayout editLayout = new LinearLayout(this);
editLayout.setOrientation(LinearLayout.VERTICAL);

//Add left/right pane to root layout
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
    RelativeLayout.LayoutParams.WRAP_CONTENT,
    RelativeLayout.LayoutParams.WRAP_CONTENT);
root.addView(buttonGroup, lp);

LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
    RelativeLayout.LayoutParams.MATCH_PARENT,
    RelativeLayout.LayoutParams.WRAP_CONTENT);
root.addView(editLayout, lp);

//Fixed height for each row item (45dp in this case)
//Getting DP values in Java code is really ugly, which is why we use XML for this stuff
int rowHeightDp = (int)TypedValue.applyDimension(COMPLEX_UNIT_DIP, 45.0f, getResources.getDisplayMetrics());

for(Map.Entry<String,String> entry : storedCards.entrySet())
{

    EditText ed = new EditText(this);
    RadioButton rb  = new RadioButton(this);
    rb.setId(counter++);
    rb.setText(entry.getKey());

    //Add each item with its LayoutParams
    LinearLayout.LayoutParams lp1 = new LinearLayout.LayoutParams(
        LinearLayout.LayoutParams.WRAP_CONTENT,
        rowHeightDp) );
    buttonGroup.addView(rb, lp1);

    lp1 = new LinearLayout.LayoutParams(
        LinearLayout.LayoutParams.MATCH_PARENT,
        rowHeightDp) );
    editLayout.addView(ed, lp1);
} 
```

由于固定的项目高度，这将创建两个并排的布局。您可以调整`LayoutParams`每行使用的项目高度。您可以看到在纯 Java 中进行布局非常冗长，这就是首选方法是 XML 的原因。

# javascript - 回调未正确调用数组函数

> ID：14699220
> 
> 赞同：1
> 
> 时间：2013-02-05T02:31:03.940
> 
> 标签：javascript, jquery

我正在使用为用户创建可点击链接菜单的用户脚本。这些条目最初存储在一个数组中，然后迭代数组并将函数添加到 .click 回调中。

这是菜单的构建方式：

```
registerMenuCommand('Options', function() { DisplaySlideMenu(true); });

function registerMenuCommand( oText, oFunc ) {
    falsifiedMenuCom[falsifiedMenuCom.length] = [oText,oFunc];
} 
```

我可以使用标准 javascript 和如下代码成功添加和执行菜单命令：

```
for( var i = 0; GM_falsifiedMenuCom[i]; i++) {
    var menuEntry;
    mdiv.appendChild(menuEntry = document.createElement('a'));
    menuEntry.setAttribute('href','#');
    menuEntry.onclick = new Function('falsifiedMenuCom['+i+'][1](arguments[0]); var e = arguments[0]; e.stopPropagation(); return false;');
        menuEntry.appendChild(document.createTextNode(falsifiedMenuCom[i][0]));
} 
```

但我决定尝试将其转换为 jQuery（这样看起来更漂亮），我把它变成了这样：

```
for( var i = 0; falsifiedMenuCom[i]; i++) {
    var mEntry = $('<a href="#">' + falsifiedMenuCom[i][0] + '</a>');
    mEntry.click(function () { debugger; falsifiedMenuCom[i][1](arguments[0]); var e = arguments[0]; e.stopPropagation(); return false; });
    mdiv.append(mEntry);
} 
```

当然它不起作用。一切都会正确添加到菜单中，但是当我单击其中一个条目时，会调用 .click 并出现错误`Uncaught TypeError: Cannot call method '1' of undefined`。这是有道理的，因为所有菜单的 .click 函数都是 falsifiedMenuCom[i]1 并且 i == falsifiedMenuCom.length 超出了数组的末尾。我明白为什么会这样，但是无论如何要让 .click 函数实际获取 falsifiedMenuCom[i][1] 的实际数组值，而不仅仅是尝试调用 falsifiedMenuCom[i][1] 本身？我应该坚持使用普通的旧javascript吗？

# android - 从 sqlite 数据库中获取字符串值并将其分配给另一个类的变量

> ID：14699223
> 
> 赞同：0
> 
> 时间：2013-02-05T02:31:21.450
> 
> 标签：android, sqlite, variables

如何`String`从我的数据库中获取一个值，然后将其传递`String`给另一个类的变量，以便我可以将该值用作`number`此代码中的字段：`SmsManager.getDefault().sendTextMessage(NUMBER /**string value that I've got from my DB*/, null, messageToSend, null,null);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:33:40.680

在您的 Database 类上创建一个函数：

```
 public Cursor selectAll() {

           String query = "SELECT * FROM TB_number_table";
           System.out.println(query);
            cur = db.rawQuery(query, null);

            cur.moveToFirst();
            return cur;

          } 
```

在你的类上调用上面的类函数。

```
TB_class_name tb=new TB_class_name ();
Cursor c=tb.selectAll();
String number =c.getString(1); 
```

`getString(1)`我假设你的号码在第一列。

光标返回所有值，然后您可以在函数中传递您的值。

```
SmsManager.getDefault().sendTextMessage(number , null, messageToSend, null,null); 
```

# c# - 从不同的线程读取 DependencyProperty

> ID：14699225
> 
> 赞同：1
> 
> 时间：2013-02-05T02:31:29.550
> 
> 标签：c#, dependency-properties, finalizer

我遇到了析构函数问题。这是重现问题的代码：

```
class DPDemo : DependencyObject
{
    public DPDemo()
    {

    }

    ~DPDemo()
    {
        Console.WriteLine(this.Test);   // Cross-thread access
    }

    public int Test
    {
        get { return (int)GetValue(TestProperty); }
        set { SetValue(TestProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Test.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty TestProperty =
        DependencyProperty.Register("Test", typeof(int), typeof(DPDemo), new PropertyMetadata(0));
} 
```

当析构函数运行时，我在行上得到一个 InvalidOperationException `get {SetValue...`。是否有推荐的方法从析构函数或其他线程中读取依赖属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:44:45.480

该`~ClassName()`函数不是析构函数，它是终结器。它的作用与 C++ 析构函数完全不同。一旦您处于对象生命周期的终结器阶段，您就无法可靠地调用该类包含的其他对象，因为它们可能在调用终结器之前已经被销毁。您应该在终结器中做的唯一一件事是释放非托管资源或以正确实现的 dispose 模式调用 Dispose(false) 函数。

如果您需要“析构函数”，则需要[正确](http://msdn.microsoft.com/en-us/library/ms244737%28v=vs.80%29.aspx)实现 IDisposable 模式，以使您的代码以正确的方式运行。

另请参阅[此问题和答案](https://stackoverflow.com/questions/538060/proper-use-of-the-idisposable-interface)以获取有关编写良好 IDisposable 模式的更多提示，它还有助于解释为什么会出现错误（请参阅他开始谈论终结器的部分）。

* * *

回答您的评论：不，它没有。C# 没有在对象生命周期结束时*自动*可靠地调用函数的方法（`IDisposable`类 +[`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)语句替换它）。如果您的对象实现`IDisposable`，则**调用者有责任**处置该对象。

在您的 WPF 应用程序的`OnClose`方法中，您将需要调用您的类的`Save`功能。你根本不需要你的班级`IDisposable`。

```
//Inside the codebehind of your WPF form
public partial class MyWindow: Window
{
    //(Snip)

    protected override void OnClosed(EventArgs e) //You may need to use OnClosing insetad of OnClose, check the documentation to see which is more appropriate for you.
    {
        _DPDemoInstance.Save(); //Put the code that was in your ~DPDemo() function in this save function.
                                //You could also make the class disposeable and call "Dispose()" instead.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:10:04.780

我推荐使用 IDisposable 接口，并在 Dispose 方法中操作 DependencyObject。

# ruby-on-rails - Rails：以嵌套形式操作连接表

> ID：14699226
> 
> 赞同：4
> 
> 时间：2013-02-05T02:31:32.770
> 
> 标签：ruby-on-rails, nested-forms, jointable

我有两个模型通过连接表连接：

```
class Publication < ActiveRecord::Base
  attr_accessible :title, :author_attributes, :translator_attributes

  has_many :publication_contributors
  has_many :authors, :through => :publication_contributors, :source => :contributor,
    :conditions => {:publication_contributors => {:contributor_type => "Author"}}
  has_many :translators, :through => :publication_contributors, :source => :contributor,
    :conditions => {:publication_contributors => {:contributor_type => "Translator"}}

  accepts_nested_attributes_for :authors, :translators
end

class Contributor < ActiveRecord::Base
  attr_accessible :name

  has_many :publications, :through => :publication_contributors
  has_many :publication_contributors
end

class PublicationContributor < ActiveRecord::Base
  attr_accessible :contributor_type

  belongs_to :publication
  belongs_to :contributor
end 
```

请注意，连接表有第三个属性（除了publication_id 和contributor_id），称为contributor_type。此属性可能包含诸如“作者”、“翻译者”、“编辑”或其他角色之类的角色。在我的发布模型中，我为两个更常见的贡献者类型“作者”和“翻译者”创建了一对关联。这些关联在检索相关数据方面表现良好，例如 with `@publication.authors`。但是，当通过嵌套形式创建这些关联时，它会出现问题。

我的表格看起来像这样：

```
<%= form_for @publication, :remote => true do |f| %>

  <%= f.label :title %>:
  <%= f.text_field :title %>

  <%= f.fields_for :authors do |builder| %>
    <%= builder.label :name, "Author" %>:
    <%= builder.text_field :name %>
  <% end %>

  <%= f.fields_for :translators do |builder| %>
    <%= builder.label :name, "Translator" %>:
    <%= builder.text_field :name %>
  <% end %>

  <%= f.submit %>
<% end %> 
```

在我的控制器中：

```
def create
  publication = Publication.create(params[:publication])
end 
```

表单按预期呈现，但在创建操作期间会出现问题。我曾希望 Rails 知道根据发布关联中的条件神奇地分配正确的contributor_type，例如：

```
has_many :authors, :through => :publication_contributors, :source => :contributor,
:conditions => {:publication_contributors => {:contributor_type => "Author"}} 
```

不幸的是，事实并非如此。我在创建过程中收到此错误：

```
Mysql2::Error: Column 'contributor_type' cannot be null 
```

这让我认为我唯一的办法是在`before_create`回调中手动分配contributor_type，但如果是这种情况，我如何确定要分配哪种类型？参数名称中有正确的类型，例如：

```
publication[authors_attributes][0][name] 
```

有什么方法可以访问模型层中的信息吗？

更新：

我的`new`行动：

```
def new
  @publication = Publication.new
  publication_contributor = @publication.publication_contributors.build
  contributor = publication_contributor.contributor.build
end 
```

它在最后一行（一个设置`contributor`）抛出此错误：

```
undefined method `build' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T04:26:11.830

你可以试试下面的吗？

```
class Publication < ActiveRecord::Base
  attr_accessible :title, :publication_contributors_attributes

  has_many :publication_contributors
  has_many :authors, through: :publication_contributors, source: :contributor, conditions: { publication_contributors: { contributor_type: 'Author' } }
  has_many :translators, through: :publication_contributors, source: :contributor, conditions: { publication_contributors: { contributor_type: 'Translator' } }

  accepts_nested_attributes_for :publication_contributors
end

class Contributor < ActiveRecord::Base
  attr_accessible :name

  has_many :publications, through: :publication_contributors
  has_many :publication_contributors
end

class PublicationContributor < ActiveRecord::Base
  attr_accessible :contributor_type

  belongs_to :publication
  belongs_to :contributor

  accepts_nested_attributes_for :contributor
end

<%= form_for @publication, :remote => true do |f| %>

  <%= f.label :title %>:
  <%= f.text_field :title %>

  <%= f.fields_for :publication_contributors do |pc_form| %>
    <%= pc_form.hidden_field :contributor_type %>
    <%= pc_form.fields_for :contributor do |c_form| %>
      <%= c_form.label :name, "Author" %>:
      <%= c_form.text_field :name %>
    <% end %>
  <% end %>

  <%= f.submit %>
<% end %> 
```

更新：控制器代码

```
@publication.publication_contributors.build
@publication.publication_contributors.each do |pc|
  pc.build_contributor
end 
```

# javascript - 选择下拉列表中的某些值时取消选中复选框

> ID：14699237
> 
> 赞同：3
> 
> 时间：2013-02-05T02:32:44.710
> 
> 标签：javascript, jquery, checkbox, html-select

当我从下拉列表中选择某个值或用户未从下拉列表中选择任何值时，我需要取消选中我的复选框。我目前正在使用 Jquery。这是我现在使用的代码，但它不起作用。

脚本

```
<script src="js/jquery-1.8.3.js"></script>
<script>
function sdp4(str) {
       if (  
   $('#drop1').val()!= '' 
|| $('#drop1').val()== "In Process"
|| $('#drop1').val()== "KIV" )

{$('#checkbox1').prop('checked', false);} 
else 
{$('#checkbox1').prop('checked', true);}
</script> 
```

HTML

```
<select class="form-dropdown"  id="drop1" name="drop1" onchange="sdp4">
        <option value=""> </option>
        <option value="In Process"> In Process </option>
        <option value="KIV"> KIV </option>
        <option value="Completed"> Completed </option>
        </select>  
<input type="checkbox" checked="checked" id="checkbox1" name="checkbox1" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:55:11.590

假设您希望选中复选框的唯一时间是选择完成时：

```
 $("#drop1").on('change', function () {
    var val = $(this).val();
    if (val === " " || val === "In Process" || val === "KIV") {
        $('#checkbox1').prop('checked', false);
        return;
    }
    $('#checkbox1').prop('checked', true);
}); 
```

和html：

```
<select class="form-dropdown" id="drop1" name="drop1">
    <option value=" "></option>
    <option value="In Process">In Process</option>
    <option value="KIV">KIV</option>
    <option value="Completed">Completed</option>
</select>
<input type="checkbox"  id="checkbox1" name="checkbox1"/> 
```

这是一个[**小提琴**](http://jsfiddle.net/aaaheatair/JpwPk/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:34:33.733

您需要将调用实际绑定`sdp4`到某些东西：

```
$("#drop1").on('change', sdp4); 
```

那时，`#drop1`当您可以使用`this`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:59:24.907

试试这个：http: [//jsfiddle.net/7cqDB/](http://jsfiddle.net/7cqDB/)

```
function sdp4(str) {
  if (str == '' || str == "In Process" || str == "KIV") {
      $('#checkbox1').prop('checked', false);
  } else {
      $('#checkbox1').prop('checked', true);
  }
}

$(function () {
   $('select').on('change', function () {
       var str = $(this).val();
       sdp4(str);
   });
}); 
```

# algorithm - 动态时间扭曲 - 比较值

> ID：14699239
> 
> 赞同：2
> 
> 时间：2013-02-05T02:32:50.050
> 
> 标签：algorithm, signal-processing, speech, mfcc

抱歉，如果这是在错误的论坛中。

好的，所以我试图比较两个不同的语音信号，我遇到了一个问题。开始：

我已将信号分成块，并计算了每个块的 MFCC 系数。然后我使用 DTW 算法将（输入）信号与训练信号进行比较。

编辑（这个算法会起作用吗）？

我已经更新了算法（写自维基百科文章）：

它现在处理二维向量，而不是一维。我认为这是我出错的地方，因为它打印出一系列数字而不仅仅是 1。

如果（实际的、训练的）MFCC 的输入值完全相同，则差异为“0”，没有差异。我需要检查训练值，但是，这个算法看起来对吗？

# c# - 将 xml 响应映射到类？

> ID：14699242
> 
> 赞同：3
> 
> 时间：2013-02-05T02:33:15.140
> 
> 标签：c#, xml, asp.net-web-api

我不知道如何将一些 XML 表示为 C# 类。有人对如何正确映射此 xml 有任何建议吗？下面是我的尝试：

```
<authenticationResponse>
  <Accounts>
    <AccountId>1</AccountId>
    <AccountId>5</AccountId>
  </Accounts>
</authenticationResponse>

public class authenticationResponse
{
    [XmlElement("Accounts")]
    [DataMember]
    public List<Account> Accounts { get; set; }
}

public class Account
{
    public long id { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T05:49:39.167

Visual Studio 2012 有一个很酷的功能，称为“将 XML 粘贴为类”（在 Edit > Paste Special 下）。您只需将 XML 复制到剪贴板，此“将 XML 粘贴为类”功能将为`authenticationResponse`您生成并粘贴此类：

```
/// <remarks/>
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
public partial class authenticationResponse
{

    private byte[] accountsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlArrayAttribute()]
    [System.Xml.Serialization.XmlArrayItemAttribute("AccountId", IsNullable = false)]
    public byte[] Accounts
    {
        get
        {
            return this.accountsField;
        }
        set
        {
            this.accountsField = value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T02:40:55.203

您可以通过 LINQ to XML 加载这些数据：

```
XElement x = XElement.Load("YourFile.xml");
List<Account> accounts = x.Element("Accounts")
                            .Elements("AccountId")
                            .Select(e => new Account { id = (long)e })
                            .ToList(); 
```

在这种情况下`authenticationResponse`，类是多余的。

如果您在内存中得到响应（而不是在硬盘驱动器上的文件中），您可以使用这个：

```
string response = ...
XElement x = XElement.Load(new StringReader(response)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T04:22:09.730

您可以将 XML 反序列化为以下类：

```
[XmlRoot("authenticationResponse")] 
public class AuthenticationResponse 
{ 
    [XmlArrayItem("AccountId")] 
    public List<long> Accounts { get; set; } 
} 
```

下面是反序列化的代码：

```
AuthenticationResponse response = null; 
var serializer = new XmlSerializer(typeof(AuthenticationResponse));

using (StringReader sr = new StringReader(xml)) 
{ 
    response = (AuthenticationResponse)serializer.Deserialize(sr); 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T13:13:57.890

我不使用 Visual Studio 2012，所以没有将 XML 粘贴为类。但是，在这种情况下，如果我需要快速解决方案，我经常使用 Visual Studio 工具中的 xsd.exe 程序。它从 XML 架构定义（.xsd 文件）生成 C# 类。

如果您没有相关 XML 的 XSD，您可以从许多 XML 工具中快速生成一个。我使用 oXygen（提供试用版），加载您的 XML 示例，然后选择工具 | 生成/转换架构。从长远来看，假设您不想依赖 3rd 方工具，我坚持认为 XML 数据的来源也为我提供了 Schema。

示例 xsd.exe 命令行（从 Visual Studio 命令提示符运行）：

```
 xsd.exe FileName.xsd /n:Namespace.Cust.App.UI /c 
```

将生成一个名为 FileName.cs 的 .cs 文件。

# php - 从数组生成时选择框变得粘滞

> ID：14699246
> 
> 赞同：0
> 
> 时间：2013-02-05T02:33:54.443
> 
> 标签：php, html

我正在使用这个数组来制作一个选择框。没关系。它为我工作。但是我需要使这个选择框具有粘性，这意味着我需要 HTML 表单来记住我是如何填写的。

我在 foreach 循环中添加了这段代码。但它不工作..

```
// Check for stickyness:
if ( $_POST['how_hear'] == $value){
  echo " selected='selected'";
} 
```

这是我的全部代码

```
$howHear = array( 1 =>  'option value 01', 
                        'option value 02', 
                        'option value 03', 
                        'option value 04', 
                        'option value 05', 
                        'option value 06', 
                        'option value 07', 
                        'option value 08'
                    );

echo "<select name='how_hear'>
        <option>--Select an Option--</option>\n";

    foreach ( $howHear AS $key => $value) {
        echo "<option value='{$key}'";

        // Check for stickyness:
        if ( $_POST['how_hear'] == $value){
            echo " selected='selected'";
        }
        echo ">$value</option>\n";
    }
echo "</select>\n"; 
```

希望有人能帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:36:10.097

您需要比较`$_POST['how_hear']`key *，*而不是 value。`<option>`它是键（与表单一起提交的值属性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:36:48.597

您正在将您`$_POST['how_hear']`的值与选择列表的值进行比较，而不是键。尝试：

```
// Check for stickyness:
if ( $_POST['how_hear'] == $key){
    echo " selected='selected'";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T02:38:08.130

请记住，您将“键”作为表单中的实际 HTML 值传递，因此技术上`$_POST['how_hear']`包含键而不是 $ 值。只需更改`if ( $_POST['how_hear'] == $key){`它应该可以工作，假设您的其余代码没问题......

# java - Java Socket，绑定到本地端口

> ID：14699249
> 
> 赞同：10
> 
> 时间：2013-02-05T02:34:51.707
> 
> 标签：java, sockets, client, port, socketexception

我正在尝试将客户端的 Socket 绑定到任何特定的本地端口，在这段代码中我使用了 20000。

如下所示的正常连接工作得很好。但不允许我选择本地端口。

```
hostSocket = new Socket(host,80); 
```

所以我尝试了这个：

```
hostSocket = new Socket(host, 80, InetAddress.getLocalHost(), 20000); 
```

还有这个：

```
hostSocket = new Socket();
hostSocket.bind(new InetSocketAddress("localhost", 20000));
hostSocket.connect(new InetSocketAddress(host,80)); 
```

但是他们都给我留下了这个例外......在第二种情况下，异常发生在连接调用上。我不太确定我错过了什么，我会喜欢一些指针。

```
java.net.SocketException: Invalid argument or cannot assign requested address
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
at java.net.Socket.connect(Socket.java:546)
at java.net.Socket.connect(Socket.java:495)
at com.mb.proxy.netflix.NetflixPrefetchingAgent.connect(NetflixPrefetchingAgent.java:98)
at com.mb.proxy.netflix.NetflixPrefetchingAgent.run(NetflixPrefetchingAgent.java:164)
at java.lang.Thread.run(Thread.java:679)
Exception in thread "Thread-19" java.lang.NullPointerException
at com.mb.proxy.netflix.NetflixPrefetchingAgent.prefetchChunk(NetflixPrefetchingAgent.java:272)
at com.mb.proxy.netflix.NetflixPrefetchingAgent.run(NetflixPrefetchingAgent.java:176)
at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-05T02:51:12.930

您必须绑定到机器的外部（出站）IP 地址，而不是 localhost (127.0.0.1)。

以下适用于我的盒子没有问题：

```
Socket s = new Socket();
s.bind(new InetSocketAddress("172.16.1.102", 5000));
s.connect(new InetSocketAddress("google.com", 80)); 
```

`172.16.1.102`从我的路由器通过 DHCP 分配给此框的 NAT 专用网络地址在哪里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-31T15:26:54.463

布赖恩的回答在确定问题时很准确。

但是，您不需要出站接口的 IP 地址，因为您可以简单地`0.0.0.0`为“任何地址”指定。然后将自动选择正确的出站接口。这很像您在没有先绑定的情况下进行连接。

此外，[指定`0.0.0.0`为地址的最简单方法是省略参数](https://stackoverflow.com/questions/14733183#14740152)。

所以：

```
hostSocket = new Socket();
hostSocket.bind(new InetSocketAddress(20000));
hostSocket.connect(new InetSocketAddress(host, 80)); 
```

# com - COM 中的“远程处理”是什么？

> ID：14699250
> 
> 赞同：0
> 
> 时间：2013-02-05T02:34:55.657
> 
> 标签：com

尽管我已经做了 3-4 年的专业 .NET 程序员，但我从未直接使用过 COM；我试图了解 COM 到底是什么，做什么。查看 [COM] 的 SO 标签 wiki，它提到：“组件对象模型 (COM) 是来自 Microsoft 的组件技术，**具有远程处理**[...]”。（强调我的。）

在这种情况下，“远程处理”是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:39:30.873

在这种情况下，远程处理是指[进程间通信](http://en.wikipedia.org/wiki/.NET_Remoting)。

> .NET Remoting 允许应用程序使对象（称为远程对象）跨远程边界可用，其中包括不同的应用程序域、进程甚至通过网络连接的不同计算机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:42:09.867

在 COM 上下文中进行远程处理意味着“能够引用另一个范围内的对象”，其中该范围可能位于同一进程中的另一个单元中，或者位于同一机器甚至不同机器上的另一个进程中。COM 单元是一个运行上下文，它的配置定义了其他 COM 对象在单元内调用 COM 对象的方式。

[进程、线程和单元 (COM) @ MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693344.aspx)

在 .NET 中，远程处理意味着“与另一个位置的对象对话的能力”，它本身就是一个完整的子系统，用于跨进程和机器边界进行调用。

[.NET Framework 远程处理概述 @ MSDN](http://msdn.microsoft.com/en-us/library/kwdt6w2k.aspx)

.NET 有 AppDomains 的概念，其意图类似于 COM 公寓。大多数在 .NET 上编写的应用程序不会以与 COM 所需的相同感知程度显式管理多个 AppDomain。

[System.AppDomain @ MSDN](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)

# javascript - 在 Processingjs 中将图像加载到绘图循环中

> ID：14699253
> 
> 赞同：0
> 
> 时间：2013-02-05T02:35:16.387
> 
> 标签：javascript, processing

我的蜜蜂不会出现。在绘图循环中加载和显示图像的正确方法是什么？

```
/* @pjs preload="/static/uploaded_resources/p.8706/Flower-Ice-icon.png"; */
/* @pjs preload="/static/uploaded_resources/p.8706/bee.png"; */
void setup() {  // this is run once.   

    PImage img;
    PImage bee;
    // set the background color
    background(255);

    // canvas size (Variable aren't evaluated. Integers only, please.)
    size(256, 256); 

    img = loadImage("/static/uploaded_resources/p.8706/Flower-Ice-icon.png");
    bee = loadImage("/static/uploaded_resources/p.8706/bee.png");
    image(img, 0, 0);
} 
void draw() {  // this is run repeatedly.  
    image(bee, mouseX, mouseY);
} 
```

这是草图的链接： http: [//studio.sketchpad.cc/sp/pad/view/VfC92Mrf5o/rev.119](http://studio.sketchpad.cc/sp/pad/view/VfC92Mrf5o/rev.119)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:33:18.670

Pjs 不支持使用多个预加载。相反，您需要用逗号分隔这两个图像作为单个预加载命令的参数。请参阅[http://processingjs.org/reference/preload](http://processingjs.org/reference/preload)，“多个图像的语法”

# paypal - 通过 PayPal 数字商品升级用户帐户。如何将付款人链接到用户？

> ID：14699254
> 
> 赞同：0
> 
> 时间：2013-02-05T02:35:30.383
> 
> 标签：paypal

当一些用户为升级付费时，我在做善后（提供访问）时如何检测哪一个？

进行交易（数字商品）后，PayPal 会返回很多详细信息。像：PROFILEID、STATUS、SUBSCRIBERNAME、PROFILESTARTDATE 等。

但是没有办法找到应该给哪个用户升级。我可以使用数字商品流将包含用户信息的任何变量传递给 PayPal 吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:18:36.050

执行 GetExpressCheckoutDetails 操作以获取此令牌的 CUSTOM 参数。在 DoExpressCheckout 操作之前执行此操作。

您将在首次调用 PayPal 时设置 CUSTOM 的值（在 SetExpressCheckout 请求中）。

# mips - 不要使用 gp 寄存器

> ID：14699255
> 
> 赞同：0
> 
> 时间：2013-02-05T02:35:38.477
> 
> 标签：mips, mips32

```
jmp_gen_exp:
    la      k0, gen_exp_handler         # requires jump indirect
    jr      k0
    nop 
```

编译器生成上面的代码

```
000019bc:    8f9affc8   lw  $26,-56($28) //lw k0,-56(gp)        
000019c0:    00000000   nop             
000019c4:    275a17d8   addiu   $26,$26,6104=0x17d8   //addiu k0,k0,6104    
000019c8:    03400008   jr  $26     //jr k0 
```

如何避免使用 gp 寄存器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:07:36.500

如果您知道确切的地址，`gen_exp_handler`则可以使用`li`伪指令将该地址加载到寄存器中`$26`。例如，假设`gen_exp_handler`地址是`0x12345600`那么你可以发出

```
 li $k0, 0x12345600 
```

# finalbuilder - PlasticSCM 命令行签入

> ID：14699257
> 
> 赞同：2
> 
> 时间：2013-02-05T02:35:49.180
> 
> 标签：finalbuilder, plasticscm

所以我正在对 Access Database 项目进行一些自动化操作。我运行一个脚本来将访问数据库组合或分解为一个存根文件和代表表单查询等的文本文件集合......

在 FinalBuilder 中，我希望能够签入这些文件。但是没有办法知道这些文件是否真的被我的脚本改变了。

我正在使用“PlascticSCM Check in Items”操作

```
CommandLine: cm ci "C:\Plastic\DuCombAccessDatabases\DucombCustomer.accdb"
The selected items are about to be checked in. Please wait ...
Error: There are no changes in the workspace c:\Plastic\DuCombAccessDatabases
Check In Items Failed. 
```

所以我不明白为什么我会收到这个错误。如果有未更改的文件，让它签入并忽略的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:43:13.383

您应该首先检查[哪些文件已更改](http://www.plasticscm.com/infocenter/technical-articles/kb-no-checkout-workflow.aspx)：

```
cm findchanged -R . | cm ci - -c="comment"
# or
cm fc -R . | cm ci - 
```

这样，您只需签入*已修改*的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T09:08:03.837

如果您使用的是最新的 Plastic SCM 版本之一 (> 4.1.10.359)，您将能够执行以下操作：

```
cm ci -a 
```

所有更改/移动/删除的项目都将被提交。

如果您已按时间戳更改项目并且内容相同（构建过程的结果），Plastic SCM 服务器将丢弃它们以防止重复的内容修订。

# java - 将数字转换为相对字符串，如“14.98 万亿”或“21.47 亿”

> ID：14699263
> 
> 赞同：-2
> 
> 时间：2013-02-05T02:36:31.730
> 
> 标签：java

将 long 转换为十进制格式后跟地名的最有效方法是什么，例如

1,498,000,000,000 - 1.498 万亿

或者

21.47亿 - 21.47亿

操作必须尽快执行，谢谢 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:46:51.750

最有效的方法（从运行时性能的角度来看）是从头开始编写自定义格式化程序，然后再花几天时间对其进行测试、分析和优化。

但是，从不浪费宝贵的软件开发人员时间的角度来看，最有效的方法是在第一部分只使用一个现有的格式化程序类，并为最后一部分使用一些简单的自定义代码来进行缩放。然后你分析*整个应用程序*，并决定是否真的值得优化格式。（我敢打赌，它不会。）

* * *

对于“相对字符串”部分，我只是将其实现为`if`/`else`测试链来选择比例因子和单位（即千、百万、十亿、万亿）。然后将输入数字除以比例因子，转换为双精度并使用标准 API 在固定宽度字段中格式化。

简单、易于理解……您现在可以继续进行应用程序的下一部分。

# php - 使用 SSH cat 在不同的目录中创建一个文件

> ID：14699264
> 
> 赞同：1
> 
> 时间：2013-02-05T02:36:39.290
> 
> 标签：php, ssh, cat

我正在尝试通过 PHP 自动创建一个文件，但是通过 SSH 使用 unix cat 命令。我可以在我所在的目录中创建一个文件，但我想在不同的目录中创建一个文件。这是在我所在的目录中创建文件的代码：

```
$sPath = "/minecraft/servers/";
$sSavingCode = "server.properties";      
echo $ssh->exec("cat >".$sSavingCode." <<".$sPath."
    test"); 
```

这段代码给出了这个错误，但它在我所在的目录中创建了文件：

> bash：第 1 行：警告：第 0 行的此处文档由文件结尾分隔（需要 `/minecraft/servers/'）

我只需要一种在不同目录中创建文件的方法。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T02:41:26.033

您使用路径 ( `$sSavingCode`) 作为 heredoc 语句的分隔符。您应该尝试以下语句。它使用文字`EOF`作为 heredoc 部分的分隔符：

```
echo $ssh->exec("cat > $sPath/$sSavingCode <<EOF
    test
EOF
"); 
```

# mysql - codeigniter 事务 - trans_start trans_complete trans_status

> ID：14699268
> 
> 赞同：3
> 
> 时间：2013-02-05T02:37:21.687
> 
> 标签：mysql, codeigniter, transactions, status

只是想弄清楚为什么造假者的交易行为不像我预期的那样。

* * *

此事务**trans_status()**触发“ **TRANS SUCCESS** ”：

```
 $this->db->trans_start();
      $this->db->query("UPDATE `TABLE1` SET `NAME` = 'AAA' WHERE `ID` = '1'");
      $this->db->query("UPDATE `TABLE2` SET `NAME` = 'BBB' WHERE `ID` = '2'");
    $this->db->trans_complete();

    if($this->db->trans_status() === FALSE){// Check if transaction result successful
       echo "<BR>------- TRANS FAILED -------</BR>";
    }else{
       echo "<BR>------- TRANS SUCCESS -------</BR>";
    } 
```

**TABLE1**更新为“ **AAA** ”，**TABLE2**更新为“ **BBB** ”

* * *

此事务**trans_status()**按预期报告“ **TRANS FAILED** ”，因为**TABLE2中****不**存在“ **errorID** ”列：

 **```
$this->db->trans_start();
  $this->db->query("UPDATE `TABLE1` SET `NAME` = 'AAA' WHERE `ID` = '1'");
  $this->db->query("UPDATE `TABLE2` SET `NAME` = 'BBB' WHERE `incorrectID` = '2'");
$this->db->trans_complete();

if($this->db->trans_status() === FALSE){// Check if transaction result successful
   echo "<BR>------- TRANS FAILED -------</BR>";
}else{
   echo "<BR>------- TRANS SUCCESS -------</BR>";
} 
```

****表**1***未***更新为“ **AAA** ”，**表 2 未**更新***为***“ **BBB** ”**

 ***** * *

然而，即使没有**ID**值为 ' **55** ' **TABLE2** ?!?! ，此事务**trans_status() 仍会**报告 ' **TRANS SUCCESS '：**

 ******```
$this->db->trans_start();
  $this->db->query("UPDATE `TABLE1` SET `NAME` = 'AAA' WHERE `ID` = '1'");
  $this->db->query("UPDATE `TABLE2` SET `NAME` = 'BBB' WHERE `ID` = '55'");
$this->db->trans_complete();

if($this->db->trans_status() === FALSE){// Check if transaction result successful
   echo "<BR>------- TRANS FAILED -------</BR>";
}else{
   echo "<BR>------- TRANS SUCCESS -------</BR>";
} 
```

**TABLE1** 使用“ **AAA** ”更新，而***TABLE2******没有***更新，因为TABLE2 上**没有**ID **55** **-但我希望它会回滚，因为****TABLE2** UPDATE 不会成功。

 ******是什么赋予了？我认为事务背后的想法是**trans_start()**和**trans_complete()**之间的所有内容都必须成功，整个事务才能成功。否则整个**事务都会回滚**。

我已经用 SET 和 UPDATE 尝试过这个并且有同样的问题。第一个**db->query()**将提交并保存更改，而第二个**db->query()**未完成，而**trans_status()**将其报告为成功？？？

我在这里想念什么？

谢谢大家:)

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-21T03:25:18.493

使用此程序。它以某种方式工作^_^

```
$this->db->trans_start();
  $this->db->query("UPDATE `TABLE1` SET `NAME` = 'AAA' WHERE `ID` = '1'");
  $this->db->query("UPDATE `TABLE2` SET `NAME` = 'BBB' WHERE `ID` = '2'");
if($this->db->trans_status() === FALSE){// Check if transaction result successful
   $this->db->trans_rollback();
   echo "<BR>------- TRANS FAILED -------</BR>";
}else{
   $this->db->trans_complete();
   echo "<BR>------- TRANS SUCCESS -------</BR>";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T03:17:20.597

哪些事务正在寻找成功的查询。您的查询

```
$this->db->query("SELECT * FROM TABLE2 WHERE ID = 55"); 
```

是一个正确的查询，它会相应地运行并返回 0 行。不返回任何行并不意味着查询运行失败。

如果您提供更新查询的示例，它可能会更清楚地说明这个问题。******************

# haskell - 为什么 cabal 安装重新安装已经在 .cabal/lib 中的软件包

> ID：14699269
> 
> 赞同：14
> 
> 时间：2013-02-05T02:37:54.843
> 
> 标签：haskell, cabal

我正在尝试使用 CircleCI 来构建一些 Haskell 项目。Circle`/home/ubuntu/.cabal`会在每次构建后自动缓存目录，我认为这会加快构建速度，但它们似乎需要和以前一样长的时间——跳过的只是下载步骤。

我正在使用的构建说明是

```
cabal update
cabal install --only-dependencies --enable-tests
cabal configure --enable-tests
cabal build
cabal test 
```

我预计这`install --only-dependencies`一步会看到缓存并运行得更快。

可能出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:35:12.223

几个月前，[Reddit 上就](http://www.reddit.com/r/haskell/comments/12alw1/why_inbreeding_is_bad_for_your_community_cabal/)阴谋集团问题进行了精彩的讨论。我的回忆是 Haskell 没有指定的应用程序二进制接口，并且编译器在`ghc`编译期间做了很多积极的库间图缩减。因此，在 Haskell 应用程序中没有稳定库安装之类的东西——任何库都可能被拖下并针对全套已安装的库重新编译。

这里的底线是缓存`.cabal/lib`目录不会加快安装速度。总是会重新编译依赖项。除了使用 沙盒 之外，您最好的方法`hsenv`是在调用`cabal install`. 这样，可以提前计算依赖关系，并且编译应该只发生一次。

Haskell 大师，如果我在这里说的有误，请随时纠正我。我已经离开 Haskell 循环几个月了，而且我知道阴谋集团/图书馆问题最近受到了很多关注。

# ios - 新 UIWindow 中的 UILabel 横向显示

> ID：14699278
> 
> 赞同：0
> 
> 时间：2013-02-05T02:38:36.353
> 
> 标签：ios, uilabel

我正在开发一个小型库来创建一个显示 iOS 应用程序可访问性信息的叠加层。

[https://github.com/SeanMcTex/SMAccessibilityOverlay](https://github.com/SeanMcTex/SMAccessibilityOverlay)

我有一些很好的基础知识，但是当我创建我的 UILabel 时遇到了一个特殊的问题。当我处于纵向模式时，一切看起来都很好：

![纵向模式叠加](../Images/b04ec047f9203b2dfe784f13b702ef01.png)

但是，当我以横向模式显示叠加层时，所有 UILabel 的文本都会旋转以匹配纵向：

![在此处输入图像描述](../Images/658cb16f5a0bfe8ad84571d2c2dd9245.png)

这是创建覆盖窗口的代码：

```
self.overlayWindow = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.overlayWindow.windowLevel = UIWindowLevelStatusBar;
self.overlayWindow.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.75];
self.overlayWindow.rootViewController = self; 
```

这是创建每个 UILabel 的代码：

```
 CGRect elementFrame = [view convertRect:view.bounds toView:view.window];

    UILabel *overlayElement = [[UILabel alloc] initWithFrame:elementFrame];
    overlayElement.adjustsFontSizeToFitWidth = YES;
    overlayElement.minimumScaleFactor = 0.5;
    overlayElement.backgroundColor = [UIColor redColor];
    overlayElement.textAlignment = NSTextAlignmentCenter;
    overlayElement.text = view.accessibilityLabel;

    [self.overlayWindow addSubview:overlayElement]; 
```

最后，我在视图控制器中为 iOS 5 和 6 设置了所有旋转方法：

```
# pragma mark - AutoRotation

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return YES;
}

-(BOOL)shouldAutorotate {
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

但是覆盖似乎从来没有正确调整方向——我可以在设备打开时旋转设备，或者在横向模式下打开一个新实例，同样缺乏结果。

我应该很高兴任何人都可以提供任何帮助。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:28:36.207

这只是旋转界面（即 UIAlertViews、顶栏等），因为您可能启用了 AutoLayout，视图正在被拉伸和缩放以填充屏幕但本身并没有旋转......您需要手动旋转标签并使用 CoreGraphics 重新定位它们，或者您需要构建一个已经处于横向的单独视图，并在手机旋转时将其添加为子视图。

# xml - 使用 XSLT 向 SOAP XML 消息添加多个命名空间

> ID：14699279
> 
> 赞同：1
> 
> 时间：2013-02-05T02:38:36.103
> 
> 标签：xml, xslt, soap, namespaces

我有一个 SOAP 请求，我正在尝试使用 XSLT 进行转换。我想为请求中的每个元素添加命名空间限定符。我需要使用两个不同的命名空间。这是我要转换的 XML：

```
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" >
   <soapenv:Header/>
   <soapenv:Body>
      <PingRq>
         <RqUID>1</RqUID>
         <RequestContext>
              <ClientUserID>1</ClientUserID>
              <ClientName>Big Company</ClientName>
              <ClientApplication>
                  <AppName>TestApp</AppName>
                  <AppVersion>1</AppVersion>
              </ClientApplication>
              <ClientLangPref>En-US</ClientLangPref>
              <ClientDt>Mar-29-2013</ClientDt>
         </RequestContext>
      </PingRq>
      </soapenv:Body>
    </soapenv:Envelope 
```

这是我想将其转换为：

```
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" >
      <soapenv:Header/>
      <soapenv:Body>
       <PingRq namespace="http://www.ns1.com">
         <RqUID namespace="http://www.ns2.com">1</RqUID>
         <RequestContext namespace="http://www.ns2.com">
              <ClientUserID namespace="http://www.ns2.com">1</ClientUserID>
              <ClientName namespace="http://www.ns2.com">Big Company</ClientName>
              <ClientApplication namespace="http://www.ns2.com">
                  <AppName namespace="http://www.ns2.com">TestApp</AppName>
                  <AppVersion namespace="http://www.ns2.com">1</AppVersion>
              </ClientApplication>
              <ClientLangPref namespace="http://www.ns2.com">En-US</ClientLangPref>
              <ClientDt namespace="http://www.ns2.com">Mar-29-2013</ClientDt>
         </RequestContext>
         </PingRq>
       </soapenv:Body>
    </soapenv:Envelope> 
```

这是我的样式表

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0" 
     xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">

      <xsl:template match="@*|node()">
         <xsl:copy>
       <xsl:apply-templates select = "@*|node()" />
         </xsl:copy>
     </xsl:template>                

     <xsl:template match="PingRq">
    <xsl:element name="{local-name()}" namespace="http://www.ns1.com">
        <xsl:apply-templates select="@* | node()"/>
    </xsl:element>
     </xsl:template>
     <xsl:template match="PingRq/*">
    <xsl:element name="{local-name()}" namespace="http://www.ns2.com">
        <xsl:apply-templates select="@*|node()"/>
    </xsl:element>
     </xsl:template>        
    </xsl:stylesheet> 
```

这是我得到的结果。

```
<?xml version="1.0" encoding="UTF-8"?>
     <soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
       <soapenv:Header/>
       <soapenv:Body>
        <PingRq xmlns="http://www.ns1.com">
         <RqUID xmlns="http://www.ns2.com">1</RqUID>
         <RequestContext xmlns="http://www.ns2.com">
              <ClientUserID xmlns="">1</ClientUserID>
              <ClientName xmlns="">Big Company</ClientName>
              <ClientApplication xmlns="">
                  <AppName>TestApp</AppName>
                  <AppVersion>1</AppVersion>
              </ClientApplication>
              <ClientLangPref xmlns="">En-US</ClientLangPref>
              <ClientDt xmlns="">Mar-29-2013</ClientDt>
         </RequestContext>
        </PingRq>
       </soapenv:Body>
      </soapenv:Envelope> 
```

我不知道为什么我在后代中得到空的命名空间属性。有人有什么想法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:44:07.903

`PingRq/*`xpath 只匹配元素的直接子元素`PingRq`。要将其所有后代元素放在某个命名空间中，您可以这样做：

```
<xsl:template match="PingRq//*">
  <xsl:element name="{local-name()}" namespace="http://www.ns2.com">
    <xsl:apply-templates select="@*|node()"/>
   </xsl:element>
</xsl:template> 
```

请注意，结果并未显示所有后代的命名空间声明：

```
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
  <soapenv:Header />
  <soapenv:Body>
    <PingRq xmlns="http://www.ns1.com">
      <RqUID xmlns="http://www.ns2.com">1</RqUID>
      <RequestContext xmlns="http://www.ns2.com">
        <ClientUserID>1</ClientUserID>
        <ClientName>Big Company</ClientName>
        <ClientApplication>
          <AppName>TestApp</AppName>
          <AppVersion>1</AppVersion>
        </ClientApplication>
        <ClientLangPref>En-US</ClientLangPref>
        <ClientDt>Mar-29-2013</ClientDt>
      </RequestContext>
    </PingRq>
  </soapenv:Body>
</soapenv:Envelope> 
```

但这是意料之中的，因为下面的元素`RequestContext`从它们的父级继承了它们的命名空间。

# python - 切换 kivy 小部件

> ID：14699280
> 
> 赞同：9
> 
> 时间：2013-02-05T02:38:40.173
> 
> 标签：python, widget, kivy

我正在使用 Kivy python 库。

我定义了两个小部件。

当程序运行时，我运行第一个小部件。

当按下该小部件按钮时，我希望它消失并替换为第二个小部件。

这是两个小部件的 .kv

```
#uitest.kv
<TestForm>:
    canvas:
        Rectangle:
            pos: self.center_x, 0
            size: 10, self.height

    BoxLayout:
        size: root.size
        padding: 40
        Button:
            text: 'Hello'
            on_release: root.testCallback()

<TestForm2>:
    canvas:
        Rectangle:
            pos: self.center_x, 0
            size: self.height, 10 
```

我的主要 python 文件运行应用程序，并返回第一个小部件

```
#main.py
from testform import TestForm
from kivy.app import App

class UITestApp(App):
    def build(self):
        return TestForm()

# Main launching point
if __name__ in ('__main__', '__android__'):
    UITestApp().run() 
```

我的第一个小部件有一个回调。这是有问题的代码所属的地方

```
from testform2 import TestForm2
from kivy.uix.widget import Widget

class TestForm(Widget):
    def testCallback(self):
        TestForm2() # Code in question goes here. @TODO replace this widget with TestForm2 widget. 
```

这里的想法是拥有一个用户界面管理器。该管理器不像树那样运行 UI，而是像列表和堆栈一样运行。该列表包含我所有的 UI 表单的实例。堆栈保存所述表单的遍历，每当我们跳转到一个表单时，我们将其推送到堆栈并“渲染”或其他任何一个。

编辑：我选择了我的答案，但在我的搜索中，我还发现了 Screen 对象： http: [//kivy.org/docs/api-kivy.uix.screenmanager.html](http://kivy.org/docs/api-kivy.uix.screenmanager.html) 就个人而言，clear() 和 add() 命令更多功能强大，但是如果您有兴趣，屏幕会从您手中夺走很多东西。过渡效果也是。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T15:19:09.287

我的建议是拥有一个界面管理器小部件，然后您可以为您的 UI 表单提供各种小部件。

```
import kivy
from kivy.uix.label import Label
from kivy.uix.button import Button
from kivy.uix.boxlayout import BoxLayout
from kivy.app import App

class InterfaceManager(BoxLayout):

    def __init__(self, **kwargs):
        super(InterfaceManager, self).__init__(**kwargs)

        self.first = Button(text="First")
        self.first.bind(on_press=self.show_second)

        self.second = Button(text="Second")
        self.second.bind(on_press=self.show_final)

        self.final = Label(text="Hello World")
        self.add_widget(self.first)

    def show_second(self, button):
        self.clear_widgets()
        self.add_widget(self.second)

    def show_final(self, button):
        self.clear_widgets()
        self.add_widget(self.final)

class MyApp(App):
    def build(self):
        return InterfaceManager(orientation='vertical')

if __name__ == '__main__':
    MyApp().run() 
```

当然，您不会那样构建它。您可以将所有表单保存在 Container 对象的字典中，并具有一个通用回调，该回调通过键提供另一种表单。

```
class InterfaceManager(BoxLayout):

    def __init__(self, **kwargs):
        super(InterfaceManager, self).__init__(**kwargs)
        self.forms = {}

    def add_form(self, key, form):
        self.forms[key] = form

    def uniCallback(self, button):
        self.clear_widgets()
        # You could introduce a more elegant key
        # handling system here.
        self.add_widget(self.forms[button.text]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T05:25:25.450

切换小部件的一种简单方法是让一个成为其容器的全高，让第二个的高度为零。当您需要切换时，只需交换高度即可。

# javascript - JQuery click() 事件不适用于webkit

> ID：14699282
> 
> 赞同：0
> 
> 时间：2013-02-05T02:38:58.343
> 
> 标签：javascript, android, jquery, click, html

我有一个`<span>`已应用事件的标签`.click()`，但它不适用于我尝试过的任何一款 Android 手机。单击它时，文本只是暂时突出显示，但之后没有任何反应。我还验证了它可以在台式机和 iPhone 上运行。

```
<span class="likeunlike" data-text="Unlike">{{#t}}Unlike{{/t}}</span> 
```

以及`.click()`方法

```
this.$el.find('.likeunlike').click(function() {
    //code here
} 
```

我在网上看到一些人说 Android 没有**onclick**事件，但这对我来说似乎很奇怪。

有人对我应该怎么做才能使可点击的跨度工作有任何建议吗？

**编辑 1：**我正在使用旧的 Google 手机进行测试，但似乎没有任何效果。在朋友的较新的 Android 手机上尝试过（在默认浏览器和 Chrome 中），该网站运行良好。哦，碎片化的 Android 生态系统的乐趣。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T02:44:01.740

将空`onclick`属性添加到 span 或应用于`cursor: pointer`样式表中的元素。[更多信息在这里](https://stackoverflow.com/questions/8692072/jquery-click-event-of-a-div-in-li-element-not-fired-in-mobile-safari/8696213#8696213)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:23:49.540

您可以使用`.tap()`：

```
this.$el.find('.likeunlike').on('tap click', function() {
    //code here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-02T05:24:52.043

这是一个老问题，但我在 iphone 和 ipad 的 safari 浏览器中遇到了同样的问题。我不知道相同的解决方案是否也适用于这个问题。解决方案是写`span.likeunlike`而不是`.likeunlike`：

```
this.$el.find('span.likeunlike').click(function() {
    //code here
} 
```

# javascript - 如何使用按钮向使用 AngularJS 的字段添加 +1？

> ID：14699284
> 
> 赞同：0
> 
> 时间：2013-02-05T02:39:01.163
> 
> 标签：javascript, angularjs

我正在尝试学习 AngularJS。对于我的第一个项目，我想创建一个小型记分应用程序。我正在从 JSON 文件中获取数据，然后我想根据谁的得分在屏幕上更新它。

我似乎无法弄清楚如何使用 Angular 更新特定的目标字段。我当前的应用程序将新行推送到记分表：

```
'use strict';

/* Controllers */

function ScoreKeeper($scope, $http) {

  $http.get('json/hometeam.json').success(function(data) {
    $scope.hometeam = data;
  });

  $scope.addGoal = function() {
    $scope.hometeam.push({goals: +1});
  };
} 
```

这是我目前使用的表：

```
 <table class="table table-hover">
        <thead>
            <th>Player ID</th>
            <th>No.</th>
            <th>Name</th>
            <th>GP</th>
            <th>G</th>
            <th>A</th>
            <th>PIM</th>
            <th>Goal</th>
            <th>Assist</th>
            <th>Assist</th>
        </thead>
        <tbody>
            <tr ng-repeat="player in hometeam" >
                <td>{{player.playerid}}</td>
                <td>{{player.no}}</td>
                <td>{{player.name}}</td>
                <td>{{player.gp}}</td>
                <td>{{player.goals}}</td>
                <td>{{player.assists}}</td>
                <td>{{player.pim}}</td>
                <td><button class="btn btn-small" name="add-goal" type="button" ng-click="addGoal()"><i class="icon-plus"></i></button></td>                
            </tr>
        </tbody>
    </table> 
```

我希望能够单击特定玩家的 addGoal，然后更新他们的总进球数。现在，当前函数正在创建一个新行，目标为 1，所有其他字段为空。

我对此很迷茫，数据在刷新时正确呈现，但是，我的更新功能不是。我知道 .push() 不是正确的方法，但是我似乎无法为 Angular 找到一个好的资源来弄清楚什么是正确的使用方法。任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:14:50.530

您需要增加关联播放器项目的目标属性，而不是使用推送创建新的数组项目。 `ng-click="addGoal(player)"`.

```
$scope.addGoal = function (player) {
    player.goals += 1;
}; 
```

要不就

`ng-click="player.goals = player.goals + 1"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:17:58.593

我猜您想将元素添加到`player.goals`中，对吗？

然后你可以这样做：

```
<button ng-click="addGoal($index)"> 
```

在js中：

```
$scope.addGoal = function(index) { $scope.hometeam[index].goals++; }; 
```

# android - 用于实现一个android应用程序

> ID：14699285
> 
> 赞同：0
> 
> 时间：2013-02-05T02:39:04.457
> 
> 标签：android

我有一个关于移动应用程序实现的问题。您可以创建一个直接引用该网站的应用程序吗？

让我解释一下：是否可以创建一个应用程序，用户单击下载的应用程序的图标，将其发送到应用程序网站，而无需打开浏览器？这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:59:34.150

看看[AppGeyser](http://www.appsgeyser.com/)，它会让你很容易做到这一点。除此之外，您只需要嵌入一个`WebView`并在其中设置网站。看看 Trigger.io 等产品。

# variables - 在 Unity 3D 中停止来自另一个脚本的第一人称控制器输入

> ID：14699287
> 
> 赞同：0
> 
> 时间：2013-02-05T02:39:11.780
> 
> 标签：variables, 3d, unity3d, unityscript

我正在使用 Unity 3D 和 unityscript 进行编程。

我有一个带有内置脚本 CharacterMotor.js 的第一人称控制器。在该脚本中，在顶部声明了一个名为“canControl”的变量，它是一个布尔值，用于控制第一人称控制器是否响应输入。

我希望能够从附加到不同对象（如立方体）的脚本中更改该布尔值。

这是我目前正在使用附加到我的多维数据集的脚本执行的操作：

```
#pragma strict

var stop : GameObject;

function Start () {
}

function Update () {
    stop.GetComponent("CharacterMotor").canControl = false;
} 
```

我已将第一人称控制器对象拖到参考检查器侧边栏中的停止变量。

这是我得到的错误：

```
Assets/test.js(15,45): BCE0019: 'canControl' is not a member of 'UnityEngine.Component'. 
```

因此，由于某种原因，它看起来无法在 CharacterMotor.js 脚本中引用变量 canControl。

我环顾四周，找不到我在做什么不同的地方。你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:26:45.643

两个小问题：

首先，GetComponent 总是返回一个“组件”类型的对象。canControl 没有在 Component 中定义，它在 CharacterMotor 中定义。这意味着我们需要将其返回值转换为 CharacterMotor。

其次，需要使用您要查找的组件在 GameObject 上调用 GetComponent。我发现最简单的方法是使用 FindGameObjectWithTag。

结果如下（我假设第一人称控制器有标签“玩家”）：

```
var stop : CharacterMotor;

function Start () {
    stop =(CharacterMotor)GameObject.FindGameObjectWithTag("Player").GetComponent("CharacterMotor");
}

function Update () {
    stop.canControl = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:04:29.560

尝试这个：

```
function Update () {
    stop.GetComponent("CharacterMotor");
    canControl = false;
} 
```

我不太了解 Unity，但`canControl`可能无法附加到`GetComponent`. 如果`canControl`是它自己的变量，那么我的方式应该可行。`GetComponent`只是获取变量。这并不意味着它属于该`GetComponent`功能。

不过，我可能完全错了。这正是我在阅读代码时所看到的。我希望我有所帮助。

# python - 在 GAE 上使用 Python 搜索数据存储区中的数据

> ID：14699288
> 
> 赞同：1
> 
> 时间：2013-02-05T02:39:11.697
> 
> 标签：python, regex, google-app-engine

我有一个由、和字段组成的模型`NDB`。表示用户可以搜索的所有可能的文本。`User``firstname``lastname``username``tag``tag`

我可以使用该`tag`字段搜索可能的用户...

他们有没有其他方式可以在没有该`tag`字段的情况下搜索数据？或者我可以`regex`在数据存储中检索数据时使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:44:21.663

1.  你不能使用正则表达式
2.  如果您需要进行全文搜索，请尝试搜索 API [https://developers.google.com/appengine/docs/python/search/overview](https://developers.google.com/appengine/docs/python/search/overview)

# android - 将参数传递给片段

> ID：14699290
> 
> 赞同：1
> 
> 时间：2013-02-05T02:39:15.687
> 
> 标签：android, android-layout

我创建了一个preference_headers.xml 如下。我的活动能够毫无问题地生成它。我想知道如何将参数（即 IP 地址字符串）从活动传递到片段类。我正在考虑使用 findfragmentbyid() 来访问特定的片段，但是，我不知道如何在preference_headers.xml 的标题标记处添加一个ID。

这是我的示例代码。谢谢

===== SetupActivity.java =======

```
public class SetupActivity extends SherlockPreferenceActivity {

    public void onCreate(Bundle savedInstanceState) {       
        super.onCreate(savedInstanceState);
    }
    public void onBuildHeaders(List<Header> target) {
        loadHeadersFromResource(R.xml.preference_headers, target);
    }
} 
```

===== preference_headers.xml =======

```
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android">

<header android:title="Network" />
<header 
    android:id="@+id/setting_wifi"
    android:fragment="com.example.setup.WIFIFragment" 
    android:title="@string/setting_wifi" >
</header>
</preference-headers> 
```

===== WIFIFragment .java =======

```
public static class WIFIFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preference_wifi);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T06:16:25.347

在你`SherlockPreferenceActivity`覆盖这个方法

```
@Override
public void onHeaderClick(Header header, int position) {

    // Here's an example

    if(header.fragmentArguments == null)
    {
        header.fragmentArguments = new Bundle();
    }
    header.fragmentArguments.putString("IP", "Hi there! My IP is 127.0.0.1");

    super.onHeaderClick(header, position);

} 
```

您可以在 Fragment 中获取参数

```
public static class WIFIFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preference_wifi);

        Bundle b = getArguments();
        if(b != null)
            Toast.makeText(getActivity() , b.getString("IP") , 1).show();
    }

} 
```

我已经在 J​​elly bean 中尝试过，而不是在 Actionbar Sherlock 库中，但您可以尝试一下。希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:54:46.387

您可以使用`findFragmentByTag()`来获取片段。将片段添加到 Activity 时，需要设置标签名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T10:53:28.617

我使用 getPreferenceManager().findPreference(PREF_KEY).getExtras();

得到额外的捆绑包，然后把我想要的东西放进去。

# php - 如何删除输入的数据PHP？

> ID：14699294
> 
> 赞同：1
> 
> 时间：2013-02-05T02:40:32.100
> 
> 标签：php

我有一个程序，可以在其中上传照片并显示在上方。没有任何 AJAX，所以在我刷新页面后，照片就会显示出来。但如果我再次刷新，照片会重新上传并显示。最初上传后如何删除数据？

这里是主页。

```
 <?php

include 'id2.php';

$file = $_FILES['image']['tmp_name'];

if(!isset($file)) {
echo "Please select image.";
} else {
    $image = addslashes(file_get_contents($_FILES['image']['tmp_name']));
    $image_name = $_FILES['image']['name'];
    $image_size = getimagesize($_FILES['image']['tmp_name']);

    if($image_size==FALSE) {
    echo 'that is not an image.';
    } else {
     if (!$insert = mysql_query("INSERT INTO photo VALUES ('', '$image_name', '$image')")) {
      echo "Problem uploading image";
     }
    }

}

?>

<form action="Photosite.php" method="POST" enctype="multipart/form-data">
<input type="file" name="image"></br></br>
<input type="submit" value="Submit">
</form> 
```

我的图像显示页面。

```
$query = "SELECT `id` FROM `photo`.`photo`";
$query_run = mysql_query($query);
while ($data = mysql_fetch_array($query_run)) {
echo '<'.'img src="id.php?id='.$data['id'].'">';
} 
```

其余的

```
$id = abs($_GET['id']);
$query = mysql_query("SELECT `image` FROM `photo`.`photo` WHERE id='$id'");
$data = mysql_fetch_array($query) or die (mysql_error());
$image = $data['image'];

$jpgimage = imagecreatefromstring($image);

    $image_width = imagesx($jpgimage);
    $image_height = imagesy($jpgimage);

    $new_size = ($image_width + $image_height)/($image_width*($image_height/45));
    $new_width = $image_width * $new_size;
    $new_height = $image_height * $new_size;

    $new_image = imagecreatetruecolor($new_width, $new_height);

    imagecopyresized($new_image, $jpgimage, 0, 0, 0, 0, $new_width, $new_height, $image_width, $image_height);

      header('Content-type: image/jpeg');
      imagejpeg($new_image, null);

?> 
```

我觉得答案很简单，但我是新手，所以谢谢！

哦，是的，我知道我的一些查询功能已经过时了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:43:24.083

您正在寻找的概念称为[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)。它与数据的“删除”无关，但您希望在 POST 之后发出单独的 GET 请求，以防止重复提交 POST 数据（并且更加用户友好）。

成功提交表单并存储在数据库中后，执行以下操作：

```
header('Location: /path/to/view/uploaded/image', true, 303);
exit; 
```

...或重定向到您希望用户去的任何地方，即使它是同一页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:43:45.033

照片正在再次上传，因为刷新页面时再次提交表单。要删除照片，您需要按照以下方式编写查询：

```
$query = "DELETE FROM photo WHERE id = " . $id_of_image; 
```

如果您不希望在刷新时上传照片，则应在文件上传后重定向页面。

```
header('Location: http://www.example.com/'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:44:52.113

在上传文件的末尾使用`header('location: showimagefile.php?imageid');` 。这样他们就无法单击 ctrl + r 刷新页面并重新上传图像。如果他们返回一页，它会要求他们重新提交数据，但请使用查询来查看没有包含该数据的行已经存在。

# c++ - 将字符串值 00 与 int 值 0 而非 1 进行比较

> ID：14699300
> 
> 赞同：-1
> 
> 时间：2013-02-05T02:40:59.123
> 
> 标签：c++

我有一个`charArray`带有 values的字符数组`00`。`atoi(charArray)`产生 1 而不是 0。我想将 00 转换为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:44:16.127

以下工作正常。[http://ideone.com/dpTMQq](http://ideone.com/dpTMQq)

```
#include <stdlib.h>
#include <assert.h>

int main( void ) {
    char charArray[] = "00";
    int intValue = atoi( charArray );
    assert( intValue == 0 );
} 
```

# java - 从用 PHP 编码的 JSON 数据获取 Null，输出到 Java

> ID：14699301
> 
> 赞同：0
> 
> 时间：2013-02-05T02:41:05.500
> 
> 标签：java, php, android, json

我在 PHP 中的 JSON 输出是这样完成的：

```
 print json_encode(array('rate' => $topcat, 'hometown' => $hometown, 'talk' => $talk)); 
```

我的 JSON 输出在我的浏览器中如下所示：

{“率”：“电影”，“家乡”：“西雅图，华盛顿”，“谈话”：“电影”}

在 Java/Android 中，我这样做：

受保护的无效onPostExecute（无效v）{

```
 try {
        JSONArray jArray = new JSONArray(result);
        JSONObject json_data = null;
        for (int i = 0; i < jArray.length(); i++) {
            json_data = jArray.getJSONObject(i);

            Hometown = json_data.getString("hometown");
            FavCategory = json_data.getString("rate");              
            Talk = json_data.getString("talk");

        }
    } catch (JSONException e1) {

    } catch (ParseException e1) {
        e1.printStackTrace();
    }

    if (Hometown.equals("")) {
        Hometown = "Not Specified";
    }

    tvHometown.setText(Hometown);
    tvRate.setText(FavCategory);
    tvTalk.setText(Talk);

    Log.d("Log: ", Hometown + " " + FavCategory + " " + Talk);

} 
```

}

在那个日志上，我得到了这个： `Seattle, WA, null, null`

谁能明白为什么？

**编辑：新的 Java 代码，仍然出现错误：**

```
String homeTown = "", favCategory = "", favTalk = "";
        try {
            JSONObject jsonData = new JSONObject(result);

            homeTown = jsonData.getString("hometown");
            favCategory = jsonData.getString("rate");
            favTalk = jsonData.getString("talk");

            tvHometown.setText(homeTown);
            tvRate.setText(favCategory);
            tvTalk.setText(favTalk);

} catch (JSONException e1) {

    } catch (ParseException e1) {
        e1.printStackTrace();
    } 
```

我遇到了一个例外：

```
02-05 08:51:48.078: E/log_tag(22958): Error in http connection org.json.JSONException: Value null of type org.json.JSONObject$1 cannot be converted to JSONArray 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T02:43:19.477

尽管[有 PHP 词汇表](http://php.net/manual/en/language.types.array.php)，但这个 JSON 的顶级元素：

```
{"rate":"Movies","hometown":"Seattle, WA","talk":"Movies"} 
```

是[一个**对象**（一个键值映射），*而不是*一个**数组**](http://json.org/)。`{}`s 是一个死的赠品。

改变这个

```
JSONArray jArray = new JSONArray(result); 
```

对此：

```
JSONObject jsonData = new JSONObject(result); 
```

然后从那里去：

```
String hometown = jsonData.getString("hometown");
String favCategory = jsonData.getString("rate");              
String talk = jsonData.getString("talk"); 
```

请注意，[作为良好的 Java 风格](http://en.wikipedia.org/wiki/Naming_convention_%28programming%29#Java)，我如何使用`lowerCamelCased`变量名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:49:40.107

你应该有一个方括号来表示它是一个 JSONArray 你的结果在 JSONObject 如果你想获取每个 JSONArray 的数据你的结果应该更像这样

```
{"rate": ["samplevalue","samplevalue"],"Movies" : ["samplevalue","samplevalue"],"hometown":["Seattle, WA"],"talk":["Movies"]} 
```

# windows-phone-8 - 如何防止 SIP 隐藏文本框？

> ID：14699308
> 
> 赞同：1
> 
> 时间：2013-02-05T02:41:48.687
> 
> 标签：windows-phone-8

我有一个 WP8 应用程序，其中一个页面在顶部有一个文本框、几个其他控件、三个文本框和两个在底部的切换开关。我在页面上使用了三个 Telerik RadToggleSwitches，和一个 Telerik RadListPicker（列表中的 3 个项目）。

在代码隐藏中，当任何文本框获得焦点时，我创建一个带有两个按钮的 ApplicationBar。其中一个按钮是 Next，它将焦点移动到下一个文本框。当文本框失去焦点时，我隐藏了应用程序栏。

现在，问题。有时，看似完全随机，页面不会向上转换以使文本框从 SIP 后面可见。InputScope，顺便说一句，是数字。我可以点击任何文本框，有时它会随着 SIP 变得可见而向上转换，有时它不会。即使只是来回点击文本框，我偶尔也会让它不起作用。

这是相关的代码隐藏。

```
void onSettingsLoaded(object sender, RoutedEventArgs e)
    {
        ApplicationBar = new ApplicationBar();
        ApplicationBar.IsVisible = false;
    }

    private void onTextGotFocus(object sender, System.Windows.RoutedEventArgs e)
    {
        CreateTxtAppBar();
        tb = sender as TextBox;
        tb.SelectAll();
    }

    private void CreateTxtAppBar()
    {
        ApplicationBar.Buttons.Clear();
        ApplicationBar.MenuItems.Clear();
        ApplicationBar.IsVisible = true;
        ApplicationBarIconButton btnNext = new ApplicationBarIconButton(new Uri("/Toolkit.Content/next.png", UriKind.Relative));
        ApplicationBarIconButton btnOK = new ApplicationBarIconButton(new Uri("/Toolkit.Content/appbar.check.png", UriKind.Relative));
        btnOK.Text = LStrings.OK;
        btnNext.Text = LStrings.Next;
        ApplicationBar.Buttons.Add(btnNext);
        ApplicationBar.Buttons.Add(btnOK);
        btnNext.Click += btnNext_Click;
        btnOK.Click += onBtnOKClick;
    }

    void btnNext_Click(object sender, EventArgs e)
    {
        switch(tb.Name)
        {
            case "tb1":
                this.Focus();
                tb2.Focus();
                break;

            case "tb2":
                tb3.Focus();
                break;

            case "tb3":
                tb4.Focus();
                break;

            default:
                tb1.Focus();
                break;
        }
    }

    private void onTextLostFocus(object sender, System.Windows.RoutedEventArgs e)
    {
        ApplicationBar.IsVisible = false;
        ApplicationBar.Buttons.Clear();
        ApplicationBar.MenuItems.Clear();
    } 
```

如您所见，我试图通过在需要改变焦点的地方粘贴 this.Focus() 来使其工作，但这并没有做到。有时我点击一个文本框并且没有转换，并且键盘隐藏了刚刚获得焦点的文本框 - 没有其他控件参与该操作。

有谁知道为什么会这样？我在 WP7 中没有看到这种行为，所以要么我很幸运，要么（更有可能，因为我似乎找不到任何其他有这个确切问题的帖子）WP8 出现了一个新问题。或者它可能是 Telerik，因为这是我第一次使用它们，但我不看好那个，因为我可以在不来自任何 Telerik 控件的情况下点击文本框并重现问题。

以防万一，这是其中一个文本框的标记。它们本质上都是一样的：

```
 <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition
                                Width="2*" />
                            <ColumnDefinition
                                Width="1*" />
                        </Grid.ColumnDefinitions>

                        <TextBlock
                            Grid.Column="0"
                            Text="{Binding Strings.Age, 
                                Source={StaticResource LocalStrings}}"
                            Style="{Binding Source={StaticResource TBStyle}}" />

                        <TextBox
                            Name="tb2"
                            Grid.Column="1"
                            Style="{StaticResource TxtStyle}"
                            GotFocus="onTextGotFocus"
                            LostFocus="onTextLostFocus"
                            Text="{Binding Age, 
                                Source={StaticResource Settings}, 
                                Mode=TwoWay}" />
                    </Grid> 
```

这一切都在堆栈面板中，而堆栈面板在滚动查看器中。

感谢您的宝贵时间 - 感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:46:29.250

我遇到了类似的问题，并花了一天时间寻找解决方法。对我有用的解决方案：

消除

```
ApplicationBar.IsVisible = false; 
```

从

```
 private void onTextLostFocus(object sender, System.Windows.RoutedEventArgs e)
    {
      //ApplicationBar.IsVisible = false; 
```

就我而言，我正在`IsVisible`设置`onTextGotFocus()`and `onTextLostFocus()`。从这两个函数中删除它就可以了。

我仍然没有完全解释它为什么起作用。似乎该问题与页面未完全加载有关。MSDN 文档`IsVisible`说：

> ```
> This property cannot be accessed using XAML syntax. It can be accessed only when there is a page loaded. 
> ```

而且，根据您的情况，您可以设置`IsVisible = false`页面何时加载`onSettingsLoaded()`。

# c# - 如何让 asp.net MVC 回退到属性注入？

> ID：14699310
> 
> 赞同：1
> 
> 时间：2013-02-05T02:41:53.380
> 
> 标签：c#, asp.net-mvc-4, dependency-injection

假设我的视图有一个隐藏的输入。现在我希望根据包含它的任何请求将此隐藏填充到我的控制器的公共属性中。

我可以这样做吗？

最终结果将是我的基本控制器上的一个属性，该属性为包含匹配命名项的任何请求填充。

```
public class ControllerBase
{
   public bool Debug{ get; set; }
}

public class MyController : ControllerBase
{
   public ActionResult Action1()
   {
      return View(base.Debug ? "in debug mode" : "not in debug mode");
   }
} 
```

另一件事似乎可能是使用构造函数注入的相同想法。

基本上我想我是在说，请求中的可用数据是否可以调整 DI 容器，以便在调用控制器之前为您设置一些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:57:53.957

可能比较简单的方法是创建一个 ActionFilter 并将其应用到 ControllerBase。假设您将其设为 DebugModeAttribute。

```
public class DebugModeAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.RequestContext.HttpContext.Request.Form["hidden_var"] == "true")
        {
            var controller = filterContext.Controller as ControllerBase;
            if (controller != null)
                controller.Debug = true;
        }
    }
} 
```

它应该可以完成工作，尽管它可能不是最干净的解决方案。不管解决方案如何，如果您的 DI 容器没有为每个请求创建新实例，您必须小心。修改 HttpContext.Items 并在基础上添加一个 getter 可能会更安全，它将读出存储在那里的值。

# mysql - 一个 SQL 查询可以让我从多对多关系中获得一行吗？

> ID：14699314
> 
> 赞同：1
> 
> 时间：2013-02-05T02:41:58.603
> 
> 标签：mysql, sql, database

我试图找到一个 SQL 查询，最终得到 1 行，其中包含文章标题及其相关关键字。

```
Articles
-ArticleID PK
-ArticleTitle
-ArticleBody

Keywords
-KeywordID PK
-Keyword UNIQUE

Keyword_Article
-KeywordID PK
-ArticleID PK 
```

如果没有 PHP 中的多个查询，这可能吗？

我所拥有的内容与每篇文章的关键字一样多

```
SELECT Article.ArticleID, 
Article.ArticleTitle, 
Keywords.Keyword, 
Keywords.KeywordID
FROM Article 
LEFT JOIN Keyword_Article
ON (Keyword_Article.ArticleID = Article.ArticleID)
LEFT JOIN Keywords
ON (Keyword_Article.KeywordID = Keywords.KeywordID)
WHERE Article.ArticleID='example' 
```

我很想知道如何以及是否可以使用 1 个 SQL 查询来完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T02:48:20.350

您不能有一个返回可变数量列的 SQL 语句。因此，您不能将每个关键字放在单独的列中，列数会因文章而异（除非您使用动态 SQL）。

您可以使用以下方法将关键字连接到一个列中`group_concat`：

```
SELECT Article.ArticleID, Article.ArticleTitle, 
       group_concat(Keywords.Keyword separator ', ') as keywords
FROM Article  LEFT JOIN
     Keyword_Article
     ON Keyword_Article.ArticleID = Article.ArticleID EFT JOIN
     Keywords
     ON Keyword_Article.KeywordID = Keywords.KeywordID
WHERE Article.ArticleID = 'example' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:47:59.357

您应该考虑使用`GROUP_CONCAT()`：

```
SELECT Article.ArticleID, 
   Article.ArticleTitle, 
   GROUP_CONCAT(Keywords.Keyword) as Keywords
FROM Article 
   LEFT JOIN Keyword_Article
      ON (Keyword_Article.ArticleID = Article.ArticleID)
   LEFT JOIN Keywords
      ON (Keyword_Article.KeywordID = Keywords.KeywordID)
WHERE Article.ArticleID='example' 
```

在您的查询中，您还将返回 KeywordId。您也可以在这些上使用 GROUP_CONCAT，但我怀疑不需要它们。

祝你好运。

# wordpress - 通过一个 Wordpress 安装运行多个客户端站点

> ID：14699322
> 
> 赞同：-1
> 
> 时间：2013-02-05T02:42:39.220
> 
> 标签：wordpress

是否可以通过一次安装运行多个站点，因此我只需更新一组文件，但用户可以管理自己的内容等。

也很想知道是否可以限制访问，以便用户无法安装插件，除非我集中安装它们。

有人有这种事情的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:48:26.970

您可能需要多站点安装。看看：[http ://codex.wordpress.org/Create_A_Network](http://codex.wordpress.org/Create_A_Network)

# jquery - jquery nth-child 在带有childern的列表中选择

> ID：14699324
> 
> 赞同：2
> 
> 时间：2013-02-05T02:42:58.770
> 
> 标签：jquery

我正在尝试使用 jquery 从嵌套列表中选择一个项目，但到目前为止我无法做到

这是我迄今为止尝试过的

查询：

```
$(document).ready(function() {
    var $target= ("div>ul>li>ol>li:nth-child(4)");
    $target.fadeOut('fast');
}); 
```

这是我的html代码：

```
 <div>
        <ul>
            <li>
                <ol>
                    <li>something</li>
                    <li>something</li>
                    <li>something</li>
                    <li>something</li> <--- This is what I am trying to access
                </ol>
            </li>
            <li>something else</li>
            <li>something else</li>
        </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T02:46:20.463

尝试这个

```
$(document).ready(function() {
    var $target= $("div>ul>li>ol>li:nth-child(4)");
    // or var $target= $("div>ul>li>ol>li:last-child");
    $target.fadeOut('fast');
}); 
```

你忘了$

[http://jsbin.com/asazey/1/edit](http://jsbin.com/asazey/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:47:12.117

试试这个，而不是你的`$target.fadeOut('fast');`：

```
$($target).fadeOut('fast'); 
```

您正在尝试对非 jQuery 对象使用 jQuery 方法。

**[jsFiddle 示例](http://jsfiddle.net/j08691/q8mb6/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-26T02:35:49.710

我尝试了乔纳森的答案，它奏效了。

相反，我在第一个“li”之前添加“:nth-child(1)”以使目标更精确（我猜）。

```
$(document).ready(function() {
    var $target = $("div>ul>li:nth-child(1)>ol>li:nth-child(4)");
    $target.fadeOut('fast');
}); 
```

# dbus - 使用 dbus 的键盘布局指示器真棒

> ID：14699328
> 
> 赞同：2
> 
> 时间：2013-02-05T02:43:26.727
> 
> 标签：dbus, awesome-wm

我想使用 dbus 在很棒的 wm 中更新我的键盘布局指示器。这是我在 lua 中的函数

```
module("keyb")    
function getklayout()
            local fd = io.popen("skb a")
            local layout = fd:read()
            fd:close()
          return layout 
    end 
```

和 rc.lua 的一部分

```
require("keyb")
keyinc = widget({type = "textbox"})
keyinc.text = keyb.getklayout() 
```

我不确定我需要使用什么 dbus 服务来更新这个小部件。我的真棒版本：

```
 awesome -v
awesome v3.4.9 (Smack)
 • Build: Apr  9 2011 10:40:59 for i686 by gcc version 4.5.1 (builder@apiary.orion.altlinux.org)
 • D-Bus support: ✔ 
```

需要一个建议）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:40:26.373

我之前用的是skb。并使用定时器定期检查键盘状态。但这并不好。现在我为此使用 dbus 和 kbdd。首先启动 kbdd。并添加 rc.lua：

```
--- {{{ keyboard indicator
mykeyindicator = widget({ type = "imagebox", align = "right" })
mykeyindicator.image = image(home_dir .. "/.icons/flags/Eng.png")

function mykey_update(...)
    local data = {...}
    local layout = data[2]
    lts = {
            [0] = home_dir .. "/.icons/flags/Eng.png",
            [1] = home_dir .. "/.icons/flags/Rus.png",
    }
    mykeyindicator.image = image(lts[layout])
    return
end

dbus.request_name("session", "ru.gentoo.kbdd")
dbus.add_match("session", "interface='ru.gentoo.kbdd',member='layoutChanged'")
dbus.add_signal("ru.gentoo.kbdd", mykey_update)

--- keyboard indicator }}} 
```

kbdd主页：[https ://github.com/qnikst/kbdd](https://github.com/qnikst/kbdd)

# c# - 如何获取正在运行的 System.Diagnostics.Process 的工作目录？

> ID：14699332
> 
> 赞同：0
> 
> 时间：2013-02-05T02:43:36.997
> 
> 标签：c#

我正在尝试使 cmd 进程的工作目录持久化，以便我可以通过 tcp 连续向它发送多个命令。

我了解如何在启动过程时设置工作目录

```
proc.StartInfo.WorkingDirectory = something; 
```

但是在我启动并等待进程退出后，如果使用了“cd”，如何获取当前工作目录？

# haskell - Agda 中的递归方案

> ID：14699334
> 
> 赞同：13
> 
> 时间：2013-02-05T02:43:41.837
> 
> 标签：haskell, recursion, agda, catamorphism, recursion-schemes

不用说，Haskell 中的标准构造

```
newtype Fix f = Fix { getFix :: f (Fix f) }

cata :: (Functor f) => (f a -> a) -> Fix f -> a
cata f = f . fmap (cata f) . getFix 
```

很棒而且非常有用。

尝试在 Agda 中定义类似的东西（为了完整起见，我将其放入）

```
data Fix (f : Set -> Set) : Set where
    mkFix : f (Fix f) -> Fix f 
```

失败，因为`f`不一定是严格积极的。这是有道理的——通过适当的选择，我可以很容易地从这个结构中得到一个矛盾。

我的问题是：有没有希望在 Agda 中编码递归方案？已经完成了吗？需要什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-05T02:46:44.343

您将在[Ulf Norell 的规范 Agda 教程](http://www.cse.chalmers.se/~ulfn/papers/afp08/tutorial.pdf)中找到这样的开发（在有限的函子领域） ！

不幸的是，并非所有常见的递归方案都可以真正编码，因为所有“破坏性”方案都消耗数据，而所有“构造性”方案都产生余数据，因此将一个输入另一个的概念必然是部分的。您可能可以在偏心单子中完成所有操作，但这并不令人满意。这或多或少是分类学家在说 Haskell 的“真实范畴”是 CPO⊥ 时所做的事情，因为它的初始代数和终端代数重合。

# c# - 使用 automapper 更新目标对象并将可为空的类型属性值设置为 null

> ID：14699340
> 
> 赞同：1
> 
> 时间：2013-02-05T02:44:12.557
> 
> 标签：c#, automapper, automapper-2

似乎源中的可为空类型属性被忽略并且未复制到目标。

考虑这些类：

```
public class Source 
{
    public int? Test { get; set; }
}

public class Destination 
{
    public int? Test { get; set; }
} 
```

映射：

```
Mapper.CreateMap<Source, Destination>();

var source = new Source() { Test = 1 };
var destination = new Destination();

Mapper.Map<Source, Destination>(source, destination);

Assert.AreEqual(source.Test, destination.Test); //true

source.Test = null;

Mapper.Map<Source, Destination>(source, destination);

Assert.AreEqual(source.Test, destination.Test); //false (null, 1) 
```

当我使用它时它起作用了：

```
Mapper.CreateMap<Source, Destination>()
    .ForMember(m => m.Test, o => o.ResolveUsing(m => m.Test)); 
```

但是我不想为每个属性设置它，你可以全局设置吗？或者有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:09:58.770

似乎为每个可空类型创建映射到自身，如：

```
Mapper.CreateMap<int?, int?>()
    .ConvertUsing(v => v); 
```

似乎可以解决问题。但我宁愿有一个包含所有可空类型的完整解决方案，然后一一指定它们。很容易错过一些东西。

# jsp - 如何使用spring在单个jsp页面中动态生成多个表单？

> ID：14699342
> 
> 赞同：4
> 
> 时间：2013-02-05T02:44:19.547
> 
> 标签：jsp, spring-mvc, multiple-forms

我有一个场景，我想多次生成相同的表单。我的应用程序基于 spring 3.0 框架。

*场景*：基本上我正在为运输公司设计此应用程序，其中需要安排负载）哪个司机携带哪个负载以及何时以及从哪个起点到哪个目的地）。现在，问题是有时货物不会直接从起点运送到目的地，交付时会出现分裂，例如，一名司机将货物从起点运送到某个地点，而另一名司机再次将货物从该地点运送到目的地。但是拆分的数量可能会因时间而异。

所以我需要根据拆分数量动态生成多个表单来安排负载，例如

```
Enter first splits information
--------------------------------
form1
----------------------------------

Enter second splits information
--------------------------------
form2
-------------------------------

submit button 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:44:10.000

您可以执行以下操作，

首先在页面中的任何`jquery`函数中`jsp`添加以下代码，

```
for(var i=0; i<lcount;i++){ //lcount is number of splits.               
$('#tload'+i).load('url of controller class that helps in loading form');
} 
```

`divs`在同一个jsp页面中写一些`id`，`'tload1','tload2','tload3'`以此类推。

```
<div id="tload1"></div>
<div id="tload2"></div>
<div id="tload3"></div>
............
............
so on 
```

每当从您的控制器返回时，返回到包含加载表单的 iframe 的 jsp 页面。通过使用`.load()`如上所示的功能将自动将`iframe`包含您的表单加载到相应`div tags`的 . 就是这样，您的问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:27:01.513

以下是一些选项：

1.  纯 JavaScript 方法 - 我会使用 JS 库，比如 jQuery，但基本上有 JS 可以将所需的部分添加到表单中。[在这里](https://stackoverflow.com/questions/14653940/using-requestparam-for-multiple-post-parameters/14654181#comment20549225_14654181)查看我的答案。
2.  往返方法 - 让 JSTL 使用模型属性中的“拆分”列表构建表单。当用户点击“添加拆分”时，您会调用相同的 URL，并传入一个可选参数来指示应该有多少拆分。它将一个新的添加到列表中并返回到您的视图

我个人喜欢第一个，因为它减少了对后端的调用次数。您必须注意的一件事是您是否有添加和删除按钮。如果您从模型属性中的地图/列表支持的列表中删除内容，则需要“清除”这些条目，否则当您最终提交表单时它们可能仍然存在。

# java - 有和没有的区别 在声明方法的返回值之前

> ID：14699350
> 
> 赞同：-1
> 
> 时间：2013-02-05T02:45:13.997
> 
> 标签：java, generics

有什么区别

```
public static<V> List<V> myMethod(V v){ return new ArrayList<V>();} 
```

和

```
public static List<V> myMethod(V v){ return new ArrayList<V>();} 
```

`<V>`在方法1中声明返回类型之前是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:57:02.360

区别很简单：

*   第一个编译
*   第二个不编译

第二个没有编译的原因是`V`没有被声明。

第二个编译的唯一方法是如果方法不是静态的并且类有一个泛型参数`V`，因此为所有实例方法声明它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:48:28.847

在第一种方法中，`V`是方法的类型参数。

在第二种方法中，`V`是类或接口类型。

# android - 在 Android 中解析 Google Books JSON

> ID：14699351
> 
> 赞同：1
> 
> 时间：2013-02-05T02:45:22.727
> 
> 标签：android, json, parsing

我对 Android 比较陌生，在尝试从 Google 图书 api 解析以下[Json](https://www.googleapis.com/books/v1/volumes?q=isbn:9780007128457)之前从未使用过任何解析器，提取书名和作者。这是到目前为止的代码：

```
公共无效 parseJson（字符串 stringFromInputStream）
    {
        字符串 strParsed = null;
        尝试
        {
            JSONobject jsonObject= new JSONObject(stringFromInputStream);

 `JSONArray jArray = jsonObject.getJSONArray("items");
        for(int i = 0; i < jArray.length(); i++)
        {
            strParsed = jArray.getJSONObject(i).getString("volumeinfo").toString();
        }` 

我想要在上面的代码中做的是遍历 JSON 数组，即“items”并获取“volumeinfo”，然后我希望从那里提取标题和作者，但我不知道如何继续。所以我希望有人能指出我正确的方向并纠正我，因为上述内容很可能是不正确的。

谢谢。

            回答 #1

赞同：4

时间：2013-02-05T02:51:24.507

Volumeinfo 不是一个字符串，不要把它当作一个字符串

```
for(int i = 0; i < jArray.length(); i++){
    JSONObject volumeInfo = jArray.getJSONObject(i).getJSONObject("volumeInfo");
    String title = volumeInfo.getString("title");
    JSONArray authors = volumeInfo.getJSONArray("authors");
    for(int j =0; j< authors.length(); j++){
        String author = authors.getString(i);
    }
} 
```

```

# c# - 是否可以在 Monogame 中为 Android 编写启动器小部件或动态壁纸？

> ID：14699352
> 
> 赞同：1
> 
> 时间：2013-02-05T02:45:29.670
> 
> 标签：c#, android, xamarin.android, monogame

是否可以在 Monogame 中为 Android 编写启动器小部件或动态壁纸？

到目前为止，我能找到的唯一一个带有 Monodroid 的小部件的例子是一个维基词典的每日词汇小部件，它绝对没有支持文档或解释它在做什么，根本没有动态壁纸的例子，也没有所有在 MonoGame 上做全屏应用程序之外的任何事情。

所以我期待唯一的答案是响亮的“不”或充其量是“有可能，但 NFI 如何”......但值得一试。

# java - shell中的java类路径

> ID：14699353
> 
> 赞同：0
> 
> 时间：2013-02-05T02:45:31.190
> 
> 标签：java, shell, jar, classpath

这是一个shell脚本：

```
#!/bin/sh

cd ../../../lib
ls
MY_LIB=`pwd`

for jar in `ls $MY_LIB/*.jar`
do
    CLASSPATH="$CLASSPATH:""$jar" 
done
echo $CLASSPATH

cd ..

#java -jar build/libs/myproject.jar -classpath \"$CLASSPATH\" 
```

运行此脚本将打印：

```
commons-codec-1.6.jar      httpclient-4.2.1.jar        httpcore-4.2.1.jar  logback-classic-1.0.6.jar  slf4j-api-1.6.0.jar
commons-logging-1.1.1.jar  httpclient-cache-4.2.1.jar  httpmime-4.2.1.jar  logback-core-1.0.6.jar
:/home/user/mygitproject/myproject/lib/commons-codec-1.6.jar:/home/user/mygitproject/myproject/lib/commons-logging-1.1.1.jar:/home/user/mygitproject/myproject/lib/httpclient-4.2.1.jar:/home/user/mygitproject/myproject/lib/httpclient-cache-4.2.1.jar:/home/user/mygitproject/myproject/lib/httpcore-4.2.1.jar:/home/user/mygitproject/myproject/lib/httpmime-4.2.1.jar:/home/user/mygitproject/myproject/lib/logback-classic-1.0.6.jar:/home/user/mygitproject/myproject/lib/logback-core-1.0.6.jar:/home/user/mygitproject/myproject/lib/slf4j-api-1.6.0.jar
Exception in thread "main" java.lang.NoClassDefFoundError: ch/qos/logback/core/joran/spi/JoranException
    at com.test.MainTest.main(MainTest.java:223)
Caused by: java.lang.ClassNotFoundException: ch.qos.logback.core.joran.spi.JoranException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 1 more 
```

为什么我会得到例外？

类路径错了吗？

java -classpath 使用不正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:50:36.163

位于*logback-core-1.0.6.jar*但您不能同时使用`JoranException`和选项。*`-jar``-classpath`*

 *请参阅[java - Java 应用程序启动器](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/java.html)：

> **-jar**
> ...
> 使用此选项时，JAR 文件是所有用户类的来源，其他用户类路径设置将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:27:04.800

将以下行添加到您的脚本中，以便您可以调试程序正在查找的类是否在其中一个 jar 中：

```
for jar in $(cut --output-delimiter=" " -d":" -f2- <<< $CLASSPATH); do
    unzip -l $jar | grep "ch/qos/logback/core/joran/spi/JoranException"
    if [ $? -eq 0 ]; then
        echo "'JoranException' found in $jar" 
    fi
done

# Paste the above code before the following line 
#java -jar build/libs/myproject.jar -classpath \"$CLASSPATH\" 
```

如果您没有收到`'JoranException' found`消息，那么您错过了一个罐子，如果您多次收到相同的消息，那么您在某处有一个重复的课程。如果它只打印一次，请评论此答案以进一步调试它。

顺便说一句，在 linux 中，您可以将您的设置`CLASSPATH`为：

```
CLASSPATH=/home/user/mygitproject/myproject/lib/*.jar 
```

它将扩展到该目录中包含的所有 jar*

# jquery - 移除表头时在表单元格中居中输入字段

> ID：14699357
> 
> 赞同：1
> 
> 时间：2013-02-05T02:45:47.780
> 
> 标签：jquery, css, html-table

标题应该很好概括...

在[这个小提琴](http://jsfiddle.net/verism/m8h3u/)中，当您按下“开关”文本时，jQuery 会创建一个重复的标题来代替原始标题。唯一的错误（目前）是输入字段向右移动。

我怎样才能阻止这个？

jQuery 代码供参考（堆栈溢出不喜欢没有代码）：

```
function duplicate(){
    var w = $('#old').find('tr:last').find('td').map(function(index){
        return $(this).outerWidth();
    }).get();
    var newth = $('#oldHead').find('th').map(function(){
        return $(this).text();
    }).get();
    for (var i = 0; i < newth.length; i++){
        if (i<1){
            $('<span>' + newth[i] + '</span>').appendTo('#new');
        } else {
            $('<span style="width:' + (w[i] - 20) + 'px">' + newth[i] + '</span>').appendTo('#new > #newfloat');
        }
    }
    $('#oldHead').find('tr').remove();
    $('#oldBody').find('tr:first').find('td').each(function(index){
        $(this).css({'width': w[index] + 'px'});
    });
}

$('#switch').click(function(){
    duplicate();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:23:33.763

该问题已通过`min-width`违规`td`标签上的属性解决 - 以及删除左右填充。

[http://jsfiddle.net/verism/s7VBu/](http://jsfiddle.net/verism/s7VBu/)

如果有人知道这可能引发的任何陷阱，我很想听听。

# sublimetext2 - sublime text 2 在浏览器中查看文件。它没有打开。它只是说按 ctrl + alt + v 后保存

> ID：14699359
> 
> 赞同：6
> 
> 时间：2013-02-05T02:46:18.390
> 
> 标签：sublimetext2

我*在浏览器中获得了*[插件](https://github.com/adampresley/sublime-view-in-browser) 视图。因为我不知道如何仅通过击键在浏览器中查看我的 html 内容，我在这个网站上进行了研究，你们建议使用该插件。

 *我想我仔细地遵循了指示。我去了包控制并安装了包。我在包文件夹的*浏览器文件夹中看到了视图。*但是当我按 alt + ctrl +v 时，它只是说文档已保存。并且浏览器没有打开。我想打开它。

请帮助我使用 sublime text 2 在浏览器中打开文件。我有 Windows 7

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T01:19:08.873

该插件默认为 Firefox，它似乎在 Windows 上不起作用（我也无法打开它，可能是因为该命令`firefox`不在`PATH`. 要使用 Chrome 打开它，`View In Browser.sublime-settings`请在包的文件夹中进行编辑。更改并将文件路径更改`selectedBrowser`为chrome 在您的计算机上的位置（可能只是更改用户名）。`chrome``command`

或者，尝试按 F12，它会在浏览器中为我打开当前文件，但我不确定它是否来自我已安装的插件。我通过按 ctrl+shift+p 并输入“浏览器”找到了这个。像这样搜索通常是查找您怀疑存在的功能的好方法，但不知道确切的命令/快捷方式是什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T16:52:30.343

我正在运行 Windows 8，因此我打开了 View In Browser.sublime-settings 并通过键入整个路径并将**selected-Browser**更改为**chrome来更改 chrome 中的****命令**，它对我有用。这是我的设置：

 ****```
"command": "C:/Program Files (x86)/Google/Chrome/Application/chrome.exe"
"selectedBrowser": "chrome" 
```

现在，当我单击 ctrl+alt+v 时，页面会在 Chrome 中打开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-30T18:13:10.383

一旦你安装了“在浏览器中查看”，按“ctrl+shift+p”，搜索“preferences:Browse Packages”。这将打开一个文件夹“Packages”。在此文件夹中，转到“在浏览器中查看”>“在浏览器中查看”（SUBLIME-SETTINGS 文件）。在这里进行 2 处更改：

```
Line 33: "browser": "firefox" 
```

将其更改为

```
Line 33: "browser": "chrome" 
```

和

```
Line 27: "chrome": "%Local AppData%\\Google\\Chrome\\Application\\chrome.exe", 
```

将其更改为

```
Line 27: "chrome": "C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe", 
```

基本上，您将打开文件的默认浏览器更改为 chrome，然后将 windows 的 chrome 路径更正为 chrome 所在的位置，因为由于某种原因，本地应用程序数据没有给出正确的路径。

让我知道是否还有问题。

PS：BEEN_THERE_DONE_THAT

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-13T19:50:56.923

我什至不知道第一步，所以我将发布我的 Chrome 和 Windows 10 解决方案。

当您编辑设置时，需要将其设置为 JSON。最简单的做法是先打开默认设置：`Preferences -> View in Browser -> Default`.

复制那个然后打开`Preferences -> View in Browser -> User`。粘贴。然后编辑该行：

`"browser":"firefox"`至`"browser": "chrome64"`

保存，它的工作原理！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-15T15:10:09.890

我正在运行 WinXP，我遇到了同样的问题，但是当我从**Browser.sublime-settings**中的视图中提到的**“命令”**中的地址中删除**“（x86）”**时，它起作用了。希望这对你有用。

 ****所以它在 sublime-settings 文件中看起来像这样：

“命令”：“C:/Program Files/Mozilla Firefox/firefox.exe”

试试看。如果有人知道为什么会发生这种情况，请告诉我们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-07T17:40:43.723

我遇到了同样的问题，不幸的是无法弄清楚。但是 SideBarEnhancements 与许多添加的有用功能几乎相同。

[titoBouzout/SideBar 增强功能](https://github.com/titoBouzout/SideBarEnhancements)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-06T20:06:37.633

插件的默认设置不适用于每台开箱即用的计算机。在**View In Browser.sublime-settings**的底部，有一行写着“selectedBrowser”：“Chrome”。默认情况下可能会显示 Firefox。如果您使用 Firefox，请将其保留，或者将其设置为 Chrome，或其他。

完成后，在配置文件中继续前进，直到看到要使用的浏览器的名称。确保操作系统的路径指向正确的位置。然后一切都应该正常工作。*********

# c++ - 为什么编译器在将空间作为字符时执行无限循环？

> ID：14699365
> 
> 赞同：0
> 
> 时间：2013-02-05T02:46:44.010
> 
> 标签：c++, database, struct, switch-statement, do-while

```
#include<iostream>
#include <string>
#include <fstream>
#include <stdio.h>
#include <stdlib.h>

using namespace std;

int optionChosen=0;

struct bookStruct
{
    string bookTitle;
    int bookPageN;
    int bookReview;
    float bookPrice;
};

const int MAX_BOOKS=10;

int main()
{
    bookStruct books[10]={};

    do
    {
        cout << "Please Select an Option from the Menu:\n\n" << endl;
        cout << "1\. Display List of Books.\n" << "2\. Find Book.\n" << "3\. Add New Book.\n";
        cout << "4\. Delete Book.\n"<<"5\. Save List to File.\n"<<"6\. Load List from File.\n";
        cout << "7\. Sort List.\n"<<"8\. Exit.\n\n";
        cin >> optionChosen;
        switch(optionChosen)
        {
            case 1:
            {
                for (int i=0;i<MAX_BOOKS;i++)
                {
                    if(books[i].bookTitle!="\0")
                    {
                    cout << "Book Title: " << books[i].bookTitle << endl;
                    cout << "Total Pages: " << books[i].bookPageN << endl;
                    cout << "Book Review: " << books[i].bookReview << endl;
                    cout << "Book Price: " << books[i].bookPrice<< "\n\n" << endl;
                    }
                }
                break;
            }
        case 2:
        {

        }
        case 3:
        {
            for(int i=0;i<MAX_BOOKS;i++)
            {
                if(books[i].bookTitle=="\0")
                {
                cout << "\nPlease Enter the Title: ";
                cin >> books[i].bookTitle ;
                cout << "\nPlease Enter Total Number of Pages: ";
                cin >> books[i].bookPageN ;
                cout << "\nPlease Enter Rating (stars): ";
                cin >> books[i].bookReview ;
                cout << "\nPlease Enter Price: ";
                cin >> books[i].bookPrice;
                cout << "\n\nBook Added.\n\n";
                break;
                }
            }break;

        }
        case 4:
        {

        }
        case 5:
        {

        }
        case 6:
        {

        }
        case 7:
        {

        }
        default:
        {
            if(optionChosen!=8)
            {
                cout << "Wrong Input Chosen\n";
                break;
            }
        }

        }

    }
    while(optionChosen<=8);
    return 0;
} 
```

这是我的代码。2 问题.....1。当我按下任何不是数字（a，b，c，abc）的选项时，程序会执行无限循环（可能）并且不会停止。问#2。当我添加一本书时，如果我使用空间，代码会做同样的事情（执行可能的无限循环）并且永远不会停止。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:49:28.220

第一个很容易。当您输入流中`cin >> some_int;`没有任何`int`内容时，它只会失败并将输入流保持在当前状态。

这意味着下次您返回获取另一个`int`时，它仍将*准备*好读取非整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:01:43.597

正如 paxdiablo 所提到的，非整数输入仍在输入流中。您需要调用 cin.ignore() 来提取和丢弃无效字符。

# xml - dojo 查询以在 XML 中返回 georss:point 值

> ID：14699372
> 
> 赞同：0
> 
> 时间：2013-02-05T02:47:05.723
> 
> 标签：xml, dojo

我有如下的xml：

```
<item>
<title>HOUSE FIRE (NO INJURIES) - MONASH</title>
<link>http://esa.act.gov.au/feeds/currentincidents.xml</link>
<description>
Incident: HOUSE FIRE (NO INJURIES)
</description>
<guid>006782-03022013</guid>
<pubDate>04 Feb 2013 15:43:56 EST</pubDate>
<georss:point>-35.4165878527591 149.095271972785</georss:point>
</item> 
```

DOM 对象上用于返回 georss:point 元素的 lat 和 long 值的 dojo.query 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:33:42.350

我记得几个月前遇到过类似的问题，所以我想试试这个。问题在于 XML 命名空间元素 ( **<georss:point>** )，查找其他元素很简单。

根据[CSS3 选择器规范](http://www.w3.org/TR/selectors/#typenmsp)，可以使用**|选择命名空间元素。**象征。因此，**georss|point**应该是正确的选择器。但是，您需要事先向选择器引擎声明此命名空间。我不知道如何使用[dojo/query](http://dojotoolkit.org/reference-guide/1.7/dojo/query.html)来做到这一点。

一种解决方法是使用*****来表示任何命名空间；因此，***|point**将起作用。但是，它会在文档中找到任何命名空间的任何点元素。在大多数情况下，这不会是一个问题。

例如。

```
<script type="text/javascript">
    require([
        "dojo/query",
        "dojo/request",
        "dojo/dom-attr"
    ], function($, request, domAttr){
        request("test.xml", {
            "preventCache": true,
            "handleAs": "xml"
        }).then(function(xmldom){
            var georss = $("*|point", xmldom.documentElement);
            if(georss.length > 0){ // ensure we have our element
                console.log("georss:point", georss[0]); // Test code
                var latLng = domAttr.get(georss[0], "innerHTML").split(" ");
            }

        }, function(err){
            console.error(err);
        });
    });
</script> 
```

如果获取所有命名空间会导致问题，那么您可以根据它们的**namespaceURI**属性过滤节点。

可能有人知道如何将命名空间传递给 dojo/query，这会使它变得更好。如果 Dojo 还没有包含它，它应该是选择器引擎的一个特性。

**编辑：**看来您在 Chrome、Firefox 或 Opera 中都不需要***|point ，****点**就足够了。但是，这在 Internet Explorer 中不起作用（我在 IE8 中测试过，不确定更高版本）。在 IE 中，命名空间选择器是必需的。

# java - 包资源管理器>查看>平面不起作用；buildpath 库消失了

> ID：14699375
> 
> 赞同：0
> 
> 时间：2013-02-05T02:47:40.313
> 
> 标签：java, eclipse, helios

谁能解开这个谜？直到最近（不确定确切的时间，但怀疑几天或几周，肯定是在我安装 TestNG 插件的今天之前），我的 Eclipse Helios 一直很好。然后它突然变得古怪。1）我所有的构建路径库都消失了。我上周注意到了这一点。当我把它们放回去时，单击确定，然后回到那个窗口查看它们，它们又消失了！不幸的是，这是非常可重复的。2）它失去了在包资源管理器中显示“平面”视图的能力。我没有故意更改任何设置，Flat 仍然显示为选中状态。我还查看了视图过滤器，它们看起来还不错。

我之前没有注意到任何变化，因为 Eclipse 继续启动显示我离开的地方。我有一个 Java 项目，一年多了，它似乎仍然知道它是一个 Java 项目。我一直在编辑和构建，直到我碰巧注意到这些东西（今天安装 TestNG 插件时），这些东西现在会给我带来很多悲伤。- 我们的构建系统不同 - 构建是在命令行上使用 makefile 系统。一年多来也没有太大变化。我用 Eclipse 来编辑（没有自动构建），有时调试（但不是几个星期），很快希望用 TestNG。

我的 Java 观点：我不确定 Reset Perspective 实际上做了什么，所以我没有这样做。未选择包资源管理器 > 快速查看。

一位同事的 Eclipse 运行良好（大约一年前我帮助他设置了它）显示了平面视图和所有构建路径库。因此，是我（或者可能是我的环境？）而不是我们共享的更广泛的环境（Linux）。

我已尝试阅读所有相关帖子，但我已阅读的建议解决方案没有解决该问题。

我当然希望有人能想出一个答案！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T22:09:49.767

更新：我必须创建一个新项目。我对所需的 Package Explorer 平面视图与显示的分层视图的问题与配置构建路径和我为 Source 选择的包有关。然后，我选择用作源文件夹的任何包都将以分层方式出现在所有显示 Flat 的包下方。

现在我可以将平面包转换为分层显示，但还没有弄清楚如何使分层显示的包转换为平面显示。

# ios - 为什么此工具栏中的按钮不触发其目标操作？

> ID：14699379
> 
> 赞同：1
> 
> 时间：2013-02-05T02:48:00.010
> 
> 标签：ios, iphone, objective-c, xcode, selector

我已经用头撞墙了一个小时。这段代码创建的按钮应该会触发，但它们不会。

```
-(void)createToolbar {

[self.bar removeFromSuperview];
self.bar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, screenWidth, TOOLBAR_HEIGHT)];
[self.bar setTintColor:self.userInfo.screenColorTrans];
[self.bar setTranslucent:YES];
NSMutableArray *buttons = [[NSMutableArray alloc] init];

    //It's the buttons send, trashButt, and editButt that appear and that change color when pressed (so I know they're registering user interaction) but that don't actually execute their methods.

UIBarButtonItem *send = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(share)];
[send setStyle : UIBarButtonItemStyleBordered];
UIBarButtonItem *flex = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:Nil];
if (self.ghhaiku.isUserHaiku) {
    UIBarButtonItem *trashButt = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemTrash target:self action:@selector(deleteHaiku)];
    [trashButt setStyle : UIBarButtonItemStyleBordered];
    UIBarButtonItem *editButt = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(editHaiku)];
    [trashButt setTintColor : self.userInfo.screenColorTrans];
    [editButt setTintColor : self.userInfo.screenColorTrans];
    [buttons addObject:editButt];
    [buttons addObject:trashButt];
}

            //Add the buttons to the nav bar.

[buttons addObject:flex];
[buttons addObject:send];
self.bar.items=buttons;
[self.view addSubview:self.bar];

            //Fade navigation bar: first delay, so that buttons are pressable, then fade.

double delayInSeconds = 3.5;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [UIView animateWithDuration:.5
                     animations:^{
                         self.bar.alpha = 0;
                     }];
});
} 
```

这不是选择器方法中的错误——我知道这一点，因为如果我用唯一代码为“是”`share`的方法替换，它仍然不会这样做。`blahBlah``NSLog`

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:01:07.760

尝试在方法“createToolbar”或 viewdidload 上方添加您的方法，如 deleteHaiku、share、editHaiku。我刚刚测试了它，通过将上面的代码粘贴到我的 viewdidload 而不是 createToolbar。它有效。这是截图。让我知道是否它仍然不起作用。

![在此处输入图像描述](../Images/de87e39d726a4d56a32c45a58eb6f95a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T05:04:47.763

检查您的应用程序窗口是否设置正确，例如在您的应用程序委托中：

```
 self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

试试这个代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T03:16:30.213

尝试更改操作方法以将发件人作为参数包括在内，即更改

```
- (void) share; 
```

至

```
- (void) share:(UIBarButtonItem *)sender; 
```

并更改您设置操作的位置，即更改

```
@selector(share) 
```

至

```
@selector(share:) 
```

# bash - shell 使用 awk 获取子字符串

> ID：14699381
> 
> 赞同：1
> 
> 时间：2013-02-05T02:48:18.150
> 
> 标签：bash, shell

我有一些字符串

1000 AS34_59329 RICwdsRSYHSD11-2-IPAAPEK-93 / ifshk5 / BC_IP / PROJECT / T1 1073 / T11073_RICekkR / Fq上/ AS34_59329 / 111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IP AAPEK-93_1.fq.gz / ifshk5 / BC_IP / PROJECT / T11073 / T11073_RICekkR / Fq中/ AS34_5932 9 / 111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_2.fq.gz / ifshk5 / BC_IP /项目/ T11073 / T11073_RICekkR / Fq中/ AS34_59329 / clean_111220_I631_FCC0E5EACXX_ L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz.total.info 11.824 0.981393 43.8283 95.7401 OK

我计划使用 awk 来获取 AS34_59329

```
 dirname= echo "$myline" | awk -F '    ' '{print $2}' 
```

但它行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:52:01.570

awk 的默认分隔符是任意数量的空格。因此，无需使用空格指定分隔符（除非您的分隔符正好是 4 个空格，如您的示例中所示）。此外，您需要一些[命令替换](http://tldp.org/LDP/abs/html/commandsub.html)：

```
dirname=$(echo "$myline" | awk '{ print $2 }') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:57:58.213

因为您的字符串已经用空格分隔，所以无需指定`-F`. 试试吧`awk '{print $2}'`。

# jquery - Jquery中的图像标题

> ID：14699382
> 
> 赞同：1
> 
> 时间：2013-02-05T02:48:19.483
> 
> 标签：jquery, image, caption

我是 Jquery 的新手，虽然 Jquery 有很多图像字幕插件，但我想创建自己的以便学习。

但是我遇到的问题是，当我将鼠标悬停在一张图片上时，图片标题会出现在我页面上的所有图片上。也许它很简单，但我是新手，请帮忙。

我写的 Jquery 是：

```
$(document).ready(function(){
$('.caption').hide();
$('.qitem').hover(function() {
   $('.caption').animate(
        {opacity: 'show',height: 'show'}, 
        {queue: false, duration: 100 });

  }, function() {
    $('.caption').stop(true)
    .animate({
        opacity: 'hide',
        height: 'hide'
        }, {queue: false, duration: 300 });
  });
}); 
```

我的 HTML 是：

```
<!--

<div class="qitem">
    <a class="fancybox fancybox.ajax" href="portfolioclient.html"><img src="tmb.jpg" alt="Test 1" title="" width="180" height="180"/></a>

    <span class="caption"><h4>Tester1</h4><p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.<a class="fancybox fancybox.ajax" href="fancybox/fancyapps-fancyBox-0ffc358/demo/ajax.txt">Ajax</a></p></span>
</div>

<div class="qitem">
    <a class="fancybox fancybox.ajax" href="portfolioclient.html"><img src="2ndimage.jpg" alt="Test 1" title="" width="180" height="180"/></a>

    <span class="caption"><h4>Tester</h4><p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.<a class="fancybox fancybox.ajax" href="fancybox/fancyapps-fancyBox-0ffc358/demo/ajax.txt">Ajax</a></p></span>
</div>
 --> 
```

我的 CSS 是：

```
.qitem {

    width:180px;
    height:180px;   

    /* some styling for the item */
    border:4px solid #222;  
     margin: 5px 20px 20px;

    /* absolute position enabled for children elements*/
    position:relative;

    float:left;

    /* hand symbol for ie and other browser */
    cursor:hand; cursor:pointer;
}

.qitem img {
    border:0;

    }

    /* styling for caption, position absolute is a must to set the z-index */
.qitem .caption {
    position:absolute;
    color:#ccc;
    display:block;
    position: absolute;
    bottom: 0px;
    background: #000; 
    opacity:0.6;

    }

.qitem .caption h4 {
    font-size:18px;
    padding:5px 15px 0px 15px;
    margin:0;
    color: #3A97F7;
    font-family: Verdana;
    letter-spacing: 2px;
}

.qitem .caption p {
    font-size:12px; 
    padding:3px 15px 5px 15px;
    margin:0;
    font-family:verdana;

}

.qitem a:hover{
font-weight:bold;
color:#00FFCC;
text-decoration:underline;
}
.qitem a{
text-decoration:none;
color:#FFFFFF;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:51:35.423

用于`$(this).find('.caption')`查找特殊标题：

```
$(document).ready(function(){
$('.caption').hide();
$('.qitem').hover(function() {
   $(this).find('.caption').animate(
        {opacity: 'show',height: 'show'}, 
        {queue: false, duration: 100 });

  }, function() {
    $(this).find('.caption').stop(true)
    .animate({
        opacity: 'hide',
        height: 'hide'
        }, {queue: false, duration: 300 });
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:50:19.120

悬停后，使用该`this`函数获取悬停的对象...

当您`('.qitem')`在悬停功能中使用时，您会再次获得一切......

```
$(document).ready(function(){
    $('.caption').hide();
    $('.qitem').hover(function() {
        $(this).find('.caption').animate(
        {opacity: 'show',height: 'show'}, 
        {queue: false, duration: 100 });

    }, function() {
        $(this).find('.caption').stop(true)
        .animate({
        opacity: 'hide',
        height: 'hide'
        }, {queue: false, duration: 300 });
    });
}); 
```

# php - PHP 分解多行

> ID：14699388
> 
> 赞同：1
> 
> 时间：2013-02-05T02:49:08.937
> 
> 标签：php, csv, explode

> **可能重复：**
> [如何使用 PHP 和 fgetcsv 函数从 CSV 文件创建数组](https://stackoverflow.com/questions/1269562/how-to-create-an-array-from-a-csv-file-using-php-and-the-fgetcsv-function)

我有一个包含多行逗号分隔值的文件。该文件的示例是：

> 1359739665,511251515,115151515，启动，1277771750，2215812581258,31.55.115.12,0,0 1359739665,511251515,115151515，恢复，1277771750，2215812581258,31.55.115.12,0,0 1359739665,511251515,115151515，恢复，1277771750， ,2215812581258,31.55.115.12,0,0 1359739665,511251515,115151515,结束,1277771750,,2215812581258,31.55.115.12,0,0

我基本上需要遍历每一行。目前，这是我的代码：

```
$file = "log.txt";
$contents = file_get_contents($file);
$fields = explode(',', $contents);

foreach ($fields as $row)
    {
       echo $row;
    } 
```

这适用于输出整个文件。但我的问题是如何一次迭代一行。每行基本上没有逗号结束，但我不知道如何在那里强制休息。我想做的是这个（即使代码不正确）：

```
foreach ($fields as $row)  //need $row to equal each row of the log
  {
      echo $row[0];  // will output 1359739665
      echo $row[1];  // will output 511251515
      etc...
  } 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T02:52:19.643

您应该使用[`str_getcsv()`](http://php.net/str_getcsv)或[`fgetcsv()`](http://php.net/fgetcsv)来读取 CSV 数据。

**使用示例[`fgetcsv()`](http://php.net/fgetcsv)：**

```
if (($handle = fopen("log.txt", "r")) !== FALSE) {
    while (($row = fgetcsv($handle, 1000, ",")) !== FALSE) {
        echo $row[0] . "\n"; // Will output  data contained in the first column
    }
    fclose($handle);
} 
```

**使用示例[`str_getcsv()`](http://php.net/str_getcsv)：**

```
$file = "log.txt";
$contents = file($file, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

$csvRows = array_map('str_getcsv', $contents);

foreach($csvRows as $row) {
    echo $row[0] . "\n"; // Will output  data contained in the first column
} 
```

`explode()`当 CSV 字段的值中可能包含逗号或 CSV 文件的文件结尾不一致时，使用手动解析 CSV 数据可能会导致问题。**最好使用上述专门功能，因为它们是针对此特定任务量身定制的。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:51:59.450

而不是`file_get_contents`只使用[`file`](http://www.php.net/manual/en/function.file.php)：

```
$array_of_contents = file($file, FILE_IGNORE_NEW_LINES); 
```

完成后，您可以遍历数组并使用以下命令获取文件的每个“列” `str_getcsv`：

```
foreach (file($file, FILE_IGNORE_NEW_LINES) as $line) {
    foreach (str_getcsv($file) as $fields) {
        echo $fields[0];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:51:42.737

计算 .txt 文件的行数，使用 foreach() 一次获取一行，展开该行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T02:52:06.043

按新线展开

```
$fields = explode("\n", $contents); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T02:53:24.800

试试这个 ：

```
foreach(file('my.csv') as $line) {
    $record = str_getcsv($line, ',');
    var_dump($record);
} 
```

该函数[`file()`](http://www.php.net/manual/en/function.file.php)返回一个包含文件每一行的数组。迭代文件的行非常好。然后在 foreach 循环中，您可以将每一行分解为单个记录。

感谢 Andrew Moore，我建议您使用该功能`str_getcsv()`而不是`explode()`

# vb.net - 得到

> ID：14699396
> 
> 赞同：-1
> 
> 时间：2013-02-05T02:50:16.330
> 
> 标签：vb.net, http

我需要帮助从标题部分中的站点列表中获取 h1，并将其放入 Visual Basic/Studio 的列表框中。

站点的数量相当多，所以我希望会有多线程，或者其他涉及的东西。

网站 html 标头示例：

```
<header> 
            <a href="http://www.example.org/"><h1>Exmaple header I NEED TO GET THIS</h1></a>
            <p>Example and more gibberish below</p>
            <div class="hero-unit">
                <button data-toggle="modal" data-target="#download" class="btn btn-large btn-download"><i class="icon-unlock icon-white"></i> Instant Download</button>
                <div id="download" class="modal hide fade" aria-hidden="true">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h3>Blahblahblargh</h3>
                    </div>
                    <div class="modal-body" id="gw_content">
                        <img src="./landingpage/_img/wheel-throb.gif" />
                    </div>
                    <div class="modal-footer">
                        <p>Derp</p>
                    </div>
                </div>
                <p>meow</p>
            </div> 
```

我需要从上面的代码中获取 h1。

我很抱歉，因为这可能有点复杂，我计划对此进行很大扩展，我认为这将有利于我的自学经验。

我确实知道 Visual Studio 的基础知识，所以不要认为你必须教我如何制作表单 :)

编辑：

我只需要标题中的 h1 标签。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:58:44.453

您应该尝试使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)来解析 HTML 代码。它可以通过`NuGet Package Manager`插件轻松安装。

一旦你安装了这个包，并研究了它的一些功能，我建议你使用一个工具，比如[HAPTestbed](http://haptestbed.codeplex.com/)来测试你的正则表达式。它将为您节省大量时间。

* * *

这是一个基本示例，您可以将其用作起点：

```
Dim wc As New WebClient()
Dim html = wc.DownloadString("http://some-web-site.com/")
wc.Dispose()
Dim htmlDoc As New HtmlDocument()
htmlDoc.LoadHtml(html)
For Each h1Node In htmlDoc.DocumentNode.SelectNodes("//h1")
    ' Do Something...
Next 
```

# objective-c - 忽略精灵透明区域的像素完美碰撞

> ID：14699400
> 
> 赞同：2
> 
> 时间：2013-02-05T02:50:27.737
> 
> 标签：objective-c, cocos2d-iphone

我最近从这个链接中遇到了两个精灵之间的 Pixel-Perfect 碰撞：http: [//www.cocos2d-iphone.org/forum/topic/18522](http://www.cocos2d-iphone.org/forum/topic/18522)。

我只是想知道是否可以使用 1 个精灵和 CGPoint(touch) 来实现这一点。如果是这样，任何人都可以解释如何以这种方式实现它吗？谢谢

# entity-framework - MVC4验证清单中至少一项检查的正确方法

> ID：14699403
> 
> 赞同：1
> 
> 时间：2013-02-05T02:50:53.443
> 
> 标签：entity-framework, asp.net-mvc-4

我正在开发我的第一个 MVC4 应用程序，在经历了一些 tuts 和一个原型之后，我觉得很舒服可以潜入其中。我正在使用代码优先的方法。我现在可以使用模型中的两个类创建一个联结表，以通过约定创建一个联结表，这很好。现在我有一个与此关系的一端相关联的复选框列表显示在另一个的创建视图中，这是所需的，接下来我想做的是以某种方式验证并显示一条错误消息，如果至少未选中其中一个复选框。

我的两个模型是事件和类别

```
 public class Event
{
    public int EventID { get; set; }
    [Required]
    public string Title { get; set; }
    public string Description { get; set; }
    public string URL { get; set; }
    public DateTime Published { get; set; }
    public DateTime? Modified { get; set; }
    public int Reputation { get; set; }
    public int CityID { get; set; }

    public virtual City City { get; set; }

    public virtual ICollection<Category> Categories { get; set; }
}

    public class Category
{
    public int CategoryID { get; set; }
    [Required]
    public string Name { get; set; }
    public DateTime Created { get; set; }
    public Boolean IsActive { get; set; }

    public virtual ICollection<Event> Events { get; set; }
} 
```

这也会在运行时根据需要创建一个 EventCategory 表。

我的控制器非常简单

```
 public ActionResult Create()
    {
        ViewBag.CityID = new SelectList(db.Cities, "CityID", "Name");
        ViewBag.Categories = new MultiSelectList(db.Categories, "CategoryID", "Name");
        return View();
    }

    [HttpPost]
    public ActionResult Create(Event _event)
    {

        if (ModelState.IsValid && ModelState["Categories"] != null)
        {
            db.Events.Add(_event);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        ViewBag.Categories = new MultiSelectList(db.Categories, "CategoryID", "Name");
        ViewBag.CityID = new SelectList(db.Cities, "CityID", "Name", _event.CityID);
        return View(_event);
    } 
```

在我的视图上生成复选框是由

```
 <div class="editor-label">
            @Html.LabelFor(model => model.Categories, "Categories")
        </div>
        <div class="editor-field">
            @foreach (SelectListItem c in ViewBag.Categories)
            {
                <input value="@c.Value" type="checkbox" name="Categories"/>@c.Text<br />
            }

        </div> 
```

这使我能够引用 ModelStateDictionary 中的“类别”索引，它为我提供了作为逗号分隔列表检查的类别的 ID，我可以处理这个问题，我现在想知道的是**我该怎么做去验证类别中至少有一个复选框被选中？**

我想这样做是使用数据注释，但我不确定此时如何实现这一点，因为复选框列表似乎是一个 hacky 实现。我知道我可以在客户端使用 js，然后使用一些服务器端的东西来检查这个，但是我不确定在这种情况下我将如何从服务器端显示错误，我也希望有一个更清洁的方法是通过框架来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:35:18.947

这是您需要的自定义验证器。

[博客链接](http://weblogs.asp.net/scottgu/archive/2010/12/10/class-level-model-validation-with-ef-code-first-and-asp-net-mvc-3.aspx)

# iphone - theos libxml2：没有这样的文件或目录

> ID：14699409
> 
> 赞同：3
> 
> 时间：2013-02-05T02:51:34.313
> 
> 标签：iphone, jailbreak, dylib, tweak, theos

我正在使用[theos](http://iphonedevwiki.net/index.php/Theos/Getting_Started)编写一个调整并需要使用 libxml2。我已经像这样添加了 LDFLAGS：

```
widget_INSTALL_PATH = /Library/WeeLoader/Plugins/
widget_FRAMEWORKS = UIKit CoreGraphics
widget_LDFLAGS = -lxml2 
```

我的 xxx.m 中的代码

```
#import "BBWeeAppController-Protocol.h"
#import <libxml/HTMLparser.h> 
```

比 make ，错误：

```
error: libxml/HTMLparser.h: No such file or directory 
```

在 xcode 中需要设置 'header search path' -> $SDKROOT/usr/include/libxml2，但是在“ [theos](http://iphonedevwiki.net/index.php/Theos/Getting_Started) ”中怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:54:59.053

我相信你需要使用 CFLAGS。如果您还没有查看 Theos Makefile 页面[http://uv.howett.net/ipf.html](http://uv.howett.net/ipf.html)

# python - PyQt4：我怎样才能避免这种竞争条件？QThread 在完全启动之前断开连接

> ID：14699412
> 
> 赞同：2
> 
> 时间：2013-02-05T02:51:44.467
> 
> 标签：python, multithreading, python-2.7, pyqt4, race-condition

我有一种情况，我想使用单个 QThread 在不同时间运行两个（或更多）单独的方法。例如，我希望 QThread`play()`有时运行，当我玩完时，我想断开 QThread 与此方法的连接，以便我可以将它连接到其他地方。本质上，我希望 QThread 充当我想与主进程并行运行的任何东西的容器。

我遇到了启动 QThread 然后立即断开它会导致运行时出现奇怪行为的问题。在我发现“竞态条件”是什么意思（或者真正了解多线程）之前，我偷偷怀疑线程在断开连接之前还没有完全启动。`start()`为了克服这个问题，我在and调用之间添加了 5 毫秒的睡眠，`disconnect()`它就像一个魅力。它就像一个魅力，但它不是正确的方式。

**如何在不调用 QThread 的情况下使用一个 QThread 实现此功能`sleep()`？**

## 有问题的代码片段：

```
def play(self):

        self.stateLabel.setText("Status: Playback initated ...")

        self.myThread.started.connect(self.mouseRecorder.play)
        self.myThread.start()
        time.sleep(.005)  #This is the line I'd like to eliminate

        self.myThread.started.disconnect() 
```

## 完整脚本：

```
class MouseRecord(QtCore.QObject):

    finished = QtCore.pyqtSignal()    

    def __init__(self):

        super(MouseRecord, self).__init__()        

        self.isRecording = False
        self.cursorPath = []

    @QtCore.pyqtSlot()  
    def record(self):

        self.isRecording = True
        self.cursorPath = []

        while(self.isRecording):

            self.cursorPath.append(win32api.GetCursorPos())
            time.sleep(.02)            

        self.finished.emit()

    def stop(self):

        self.isRecording = False

    @QtCore.pyqtSlot()    
    def play(self):

        for pos in self.cursorPath:
            win32api.SetCursorPos(pos)
            time.sleep(.02)        

        print "Playback complete!"
        self.finished.emit()            

class CursorCapture(QtGui.QWidget):

    def __init__(self):

        super(CursorCapture, self).__init__()

        self.mouseRecorder = MouseRecord()

        self.myThread = QtCore.QThread()

        self.mouseRecorder.moveToThread(self.myThread)
        self.mouseRecorder.finished.connect(self.myThread.quit)

        self.initUI()

    def initUI(self):

        self.recordBtn = QtGui.QPushButton("Record")
        self.stopBtn   = QtGui.QPushButton("Stop")
        self.playBtn   = QtGui.QPushButton("Play")        

        self.recordBtn.clicked.connect(self.record)
        self.stopBtn.clicked.connect(self.stop)
        self.playBtn.clicked.connect(self.play)

        self.stateLabel = QtGui.QLabel("Status: Stopped.")

        #Bunch of other GUI initialization ...

    def record(self):

        self.stateLabel.setText("Status: Recording ...")  

        self.myThread.started.connect(self.mouseRecorder.record)
        self.myThread.start()
        time.sleep(.005)        

        self.myThread.started.disconnect()

    def play(self):

        self.stateLabel.setText("Status: Playback initated ...")

        self.myThread.started.connect(self.mouseRecorder.play)
        self.myThread.start()
        time.sleep(.005)

        self.myThread.started.disconnect() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T11:52:05.757

您想立即启动线程并使用`MouseRecorder`来自 gui 线程的信号和插槽与实例通信。

您`MouseRecorder`通过启动`QThread`（您已连接信号以触发特定事件）来向实例发出信号。通常，如果您有需要在工作线程中仅发生一次的事情，您将希望使用该 sig/slot 连接。否则，您通常会与任何`moveToThread`带有信号和槽的 QObject 进行跨线程通信。

相反，我将其编写如下：

```
class MouseRecord(QtCore.QObject):

    def __init__(self):
        super(MouseRecord, self).__init__()        
        self.isRecording = False
        self.cursorPath = []

    @QtCore.pyqtSlot()  
    def record(self):
        self.isRecording = True
        self.cursorPath = []

        while(self.isRecording):
            #Needed, so that if a sigStop is emitted, self.isRecording will be able to be changed
            QApplication.processEvents()

            self.cursorPath.append(win32api.GetCursorPos())
            time.sleep(.02)   

    @QtCore.pyqtSlot()
    def stop(self):
        self.isRecording = False

    @QtCore.pyqtSlot()    
    def play(self):
        for pos in self.cursorPath:
            win32api.SetCursorPos(pos)
            time.sleep(.02)        
        print "Playback complete!"

class CursorCapture(QtGui.QWidget):

    sigRecord = QtCore.pyqtSignal()
    sigPlay = QtCore.pyqtSignal()
    sigStop = QtCore.pyqtSignal()

    def __init__(self):
        super(CursorCapture, self).__init__()

        self.mouseRecorder = MouseRecord()
        self.myThread = QtCore.QThread()

        self.mouseRecorder.moveToThread(self.myThread)

        self.sigRecord.connect(self.mouseRecorder.record)
        self.sigPlay.connect(self.mouseRecorder.play)
        self.sigStop.connect(self.mouseRecorder.stop)

        self.myThread.start()

        self.initUI()

    def initUI(self):
        self.recordBtn = QtGui.QPushButton("Record")
        self.stopBtn   = QtGui.QPushButton("Stop")
        self.playBtn   = QtGui.QPushButton("Play")        

        self.recordBtn.clicked.connect(self.record)
        self.stopBtn.clicked.connect(self.stop)
        self.playBtn.clicked.connect(self.play)

        self.stateLabel = QtGui.QLabel("Status: Stopped.")

        #Bunch of other GUI initialization ...

    def record(self):
        self.stateLabel.setText("Status: Recording ...")  
        self.sigRecord.emit()

    def play(self):
        self.stateLabel.setText("Status: Playback initated ...")
        self.sigPlay.emit()

    def stop(self):
        self.stateLabel.setText("Status: Recording Stopped...")
        self.sigStop.emit() 
```

这将允许`QThread`您的实例始终运行（这不是问题，因为除非您告诉它，否则它不会做任何事情）`MouseRecorder`等待来自您的 gui 线程的信号。

请注意对`QApplication::processEvents()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T21:57:09.490

正确的方法是`QThread`为每个动作创建新的，这样`sleep`就不需要断开连接。现在，即使你成功消除了`sleep`呼叫，也可能出现以下情况：

1）你运行`play`，并断开插槽

2）你跑`record`之前`play`已经完成了。在这种情况下，先前创建的线程仍在运行，并且：

> 如果线程已经在运行，这个函数什么也不做。

（来自[文档](http://pyqt.sourceforge.net/Docs/PyQt4/qthread.html#start)）

但是，如果您接受这种情况并以某种方式同时防止“播放”和“录制”，那么您应该按照您自己写的那样做：“当我完成播放时，我想断开连接”。所以，不仅仅是在线程启动之后，而是在它完成之后。为此，请尝试以下操作：

1)`self.mouseRecorder.finished.connect(self.myThread.quit)`改为`self.mouseRecorder.finished.connect(self.threadFinished)`

2）实施：

```
def threadFinished(self):
        self.myThread.quit()
        self.myThread.started.disconnect() 
```

# jquery - 如何使左列与文本的高度匹配

> ID：14699418
> 
> 赞同：-3
> 
> 时间：2013-02-05T02:52:20.290
> 
> 标签：jquery, css, alignment

正如图片参考所见，我喜欢编写一个 jQuery 函数来检查右侧文本的高度，并使图像高度匹配它以“推动”文本向右对齐（见红色框）你是怎么做到的？

![在此处输入图像描述](../Images/ec66cfc13d316e2604bd36bc560049f2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:03:46.153

由于投反对票，我将改变我的答案。使用另一个 div 并制作它`display:table;`。这对我有用。

# javascript - 制作一个简单的打卡/打卡网站。第二个按钮未完成分配的任务

> ID：14699421
> 
> 赞同：0
> 
> 时间：2013-02-05T02:52:58.710
> 
> 标签：javascript, html

[问题的 JsFiddle](http://jsfiddle.net/ADWKp/1/ "时钟输入/时钟输出")

我在脚本中有两个函数，一个用于打卡时间，第二个用于打卡时间，它也计算总时间。我还没有在实际计算中添加找到总时间，这不是问题。该行之后的第二个函数中不会运行任何代码`var hoursTwo = currentTime.getHours();`

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:56:34.723

您正在尝试调用未声明的 var

```
var hoursTwo = currentTime.getHours() 
```

应该打电话

```
var hoursTwo = currentTimeTwo.getHours() 
```

等等每个功能。如果你想访问`currentTime`，你应该在函数之外声明它。

仅供参考，使用开发人员工具或萤火虫可以在控制台中显示很多内容。这用简单的英语报告了错误。

# xml - 如何使用 XSLT 将 2 个 XML 文件与公共节点合并？

> ID：14699422
> 
> 赞同：2
> 
> 时间：2013-02-05T02:53:15.077
> 
> 标签：xml, xslt, xpath

## 文件 1.xml：

```
<config>
  <version>
     <input00 version ="1"/>
  </version>
</config> 
```

## 文件 2.xml：

```
 <config>
  <version>
     <input01 version ="2"/>
  </version>
</config> 
```

## 输出.xml：

```
<config>
  <version>
     <input00 version ="1"/>
     <input01 version ="2"/>
  </version>
</config> 
```

这是我尝试生成样式表的方法：merge.xslt

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
</xsl:template>

<xsl:template match="/config">
     <xsl:copy>
        <xsl:apply-templates select="config"/>
        <xsl:apply-templates select="document('./file1.xml')/config/version" />
     </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

这就是我运行 xslt 处理器的方式：

```
 $xsltproc merge.xslt file2.xml 
```

这就是我所得到的：

```
<?xml version="1.0"?>
<config/> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T02:59:53.970

试试这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="version">
    <xsl:copy>
      <xsl:apply-templates select="*"/>
      <xsl:apply-templates select="document('file1.xml')/config/version/*" />
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

# scala - Scala中具有多参数或序列的构造函数？

> ID：14699427
> 
> 赞同：3
> 
> 时间：2013-02-05T02:54:13.620
> 
> 标签：scala

这是基本示例。我无法让 scala 认识到我希望能够以两种不同的方式初始化我的类：通过现有序列或使用多个参数。

我收到的错误是：

> 双重定义：第 9 行的方法 apply:(params: Int*)chorle.scala.tests.MultiParam 和方法 apply:(pList:
> Seq[Int])chorle.scala.tests.MultiParam 在擦除后具有相同的类型：(params:序列）chorle.scala.tests.MultiParam

好的，我知道这里发生了什么 - 编译后两个函数都会产生相同的标头签名。但是，实际上它们的工作方式不同 - 如果我只有 apply(Seq) 版本，我无法调用：apply(1,2,3) ......而且我无法调用 apply(seq)其他方式。我知道可以修补实际函数调用的各种方法，但是如何正确解决这个问题并且只在课堂上解决一次？谢谢！

```
class MultiParam protected (pList:Seq[Int]) 

object MultiParam {
  def apply(pList:Seq[Int]): MultiParam = new MultiParam(pList)
  def apply(params: Int *): MultiParam = new MultiParam(params)

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T03:14:15.397

问题在于所谓的“重复参数”形式是语法糖，无论是在定义站点还是在特殊类型的调用站点`IndexedSeq`，都会导致歧义。

有一种常用的方法来处理这个问题，你可以在标准集合库的各个地方找到它：

```
package rrs.scribble

object MP {
  class MultiParam protected (pList:Seq[Int]) {
    override def toString: String = pList.mkString("[[", ", ", "]]")
  }

  object MultiParam {
    def apply(): MultiParam = new MP.MultiParam(List.empty[Int])
    def apply(ints: Seq[Int]): MultiParam = new MP.MultiParam(ints)
    def apply(i1: Int, iMore: Int*): MultiParam = new MP.MultiParam(i1 +: iMore)
  }
} 
```

在 REPL 中：

```
scala> MultiParam()
res0: rrs.scribble.MP.MultiParam = [[]]

scala> MultiParam(12)
res3: rrs.scribble.MP.MultiParam = [[12]]

scala> MultiParam(12, 34)
res4: rrs.scribble.MP.MultiParam = [[12, 34]]

scala> MultiParam(12, 34, 56)
res5: rrs.scribble.MP.MultiParam = [[12, 34, 56]] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T03:08:37.707

好吧，它们不能按原样使用，因为没有办法生成这两种方法。解决它的唯一方法是消除它们的歧义：

```
object MultiParam {
  def apply(pList:Seq[Int]): MultiParam = new MultiParam(pList)
  def apply(param: Int, params: Int *): MultiParam = new MultiParam(param +: params)
  def apply(): MultiParam = new MultiParam(Nil)
} 
```

# java - 暂时禁用 MouseListener

> ID：14699430
> 
> 赞同：3
> 
> 时间：2013-02-05T02:54:29.920
> 
> 标签：java, swing, jpanel

我正在与两个`JPanel`s 一起工作。一个面板包含一个默认移动的移动球，另一个面板有两个`JRadioButton`标记为`On`和的 s `Off`。我坚持的部分是禁用和启用允许用户单击面板以重新定位球的`MouseListener`( )。`P2.java`我创建了函数`turnOn`并`turnOff`使用`ActionListener`( `P1.java`) 触发。这开始和停止球。我尝试使用`removeActionListener`，但是编译器会抛出我无法使用该方法的错误。

此外，在[这个例子](http://www.java2s.com/Code/Java/Event/ItemListenerforJRadioButton.htm)`ItemListener`中使用like会更容易，这样当已经选择它时它会被忽略？`JRadioButton`

**P1.java**

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class P1 extends JPanel
{
    private JRadioButton on = new JRadioButton("On", true);
    private JRadioButton off = new JRadioButton("Off");

    public P1()
    {
        ButtonGroup group = new ButtonGroup();
        group.add(on);
        group.add(off);

        add(on);
        add(off);

        ButtonHandler bh = new ButtonHandler();
        on.addActionListener(bh);
        off.addActionListener(bh);
    }

    private class ButtonHandler implements ActionListener
    {
        public void actionPerformed(ActionEvent ae)
        {
            if(ae.getSource() == on) turnOn();

            if(ae.getSource() == off) turnOff();
        }
    }

    public static void turnOn () {
        Ball.dx = 1;
        Ball.dy = 1;
    }

    public static void turnOff () {
        Ball.dx = 0;
        Ball.dy = 0;
    }
} 
```

**P2.java**

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class P2 extends JPanel implements MouseListener
{
    public P2()
    {
        super();
        addMouseListener(this);
    }

    public void mousePressed(MouseEvent e)
    {
        ball.x = e.getX();
        ball.y = e.getY();
        repaint();
    }

    ...
} 
```

**项目的其余部分**

*   [`myFrame.java`](http://pastebin.com/SQTieJ1j)
*   [`ball.java`](http://pastebin.com/negBAiem)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T03:06:34.670

如果不查看您的代码，我只会让 MouseListener 的行为取决于它的状态。我会给它一个状态布尔变量，比如说启用，包含 getter 和 setter，然后在启用为 false 时短路代码。即，具体方法可能类似于：

```
public void mousePressed(MouseEvent mEvt) {
  if (!enabled) {
    return;
  }
  // rest of mousePressed goes here
} 
```

另一个建议，不要这样做：

```
public class P2 extends JPanel implements MouseListener { 
```

不要让您的 GUI 类实现您的侦听器接口，因为您要求该类做太多事情。这对于玩具程序或非常小的演示程序是可以的，但对于较大的项目，您将希望将您的逻辑与您的视图与您的控制分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:12:53.713

您还可以使用玻璃窗格来阻止用户交互

例如：[阻止事件](http://www.java2s.com/Code/Java/Swing-JFC/Blockmouseandkeyeventsinanapplication.htm)

# sql - DB Storage vs DB CPU - 存储计算数据或使用视图计算

> ID：14699436
> 
> 赞同：2
> 
> 时间：2013-02-05T02:54:59.240
> 
> 标签：sql, sql-server, database-design, database-schema, database-performance

当我正在考虑为我的数据库设计新的表时。我在将最终计算存储在表格列中，或者在我计划创建的视图中计算它们之间左右为难。例如，如果您要将值 10 存储在一列中，而将 5 存储在另一列中，并且您想在另一列中获得 (10/5)，那么您认为将 5 存储在自己的列中更好，还是计算它在计划的视图中？

该表每天将包含大约 400k 条记录，可能持续一年左右。即使我可以使用简单的数据类型来降低存储成本，我仍然必须为每条记录维护另外 4 个字节的数据 * 在同一行中我可能有多少计算记录。

我将在几天的数据中查询计算值。我仍然想要速度，但也想要更小的数据库、更容易维护的表以及视图的灵活性。

你有什么看法和想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:32:57.613

> 我将查询计算值...

我有什么办法？

*   如果 SELECT 列表中刚刚提到了计算值，则不要存储它。¹
*   如果它在 WHERE 中，您会想要对其进行索引，在这种情况下，大多数 DBMS 会迫使您以一种或另一种方式持久化它。²

* * *

*¹对于 CPU 的小幅增加，您将减少存储需求，从而提高缓存效率，从而减少 I/O，这往往是大多数 OLTP 工作负载中最重要的性能瓶颈。当计算成本很高时，缓存结果是合理的，但简单的除法距离该阈值很远。*

*²在表中作为普通字段，或作为持久计算列或在物化/索引视图中。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:23:42.663

数据完整性是最重要的。

在视图中计算结果可以保证为您提供最新的答案。权衡是 SELECT 语句的运行时性能，尤其是在 WHERE 子句中使用结果时。根据我的经验，计算结果很少用于 WHERE 子句。*计算*，我的意思不仅是算术，还包括字符串和子字符串的提取和连接、校验和计算等。

将计算结果存储在基表中可为您提供最佳 SELECT 性能。权衡是数据完整性。如果您可以编写保证结果始终正确的 CHECK() 约束，那么您应该这样做。但是，如果不使用用户定义的函数，有时无法表达复杂计算的 CHECK() 约束，而且并非所有平台都支持 CHECK() 约束中的用户定义函数。

如果您不能编写 CHECK() 约束，您仍然需要*某种*程序来定期检查您的数据是否有错误。在最坏的情况下，您可以在需求量低时每天或每周运行报告。

物化视图可能会为您提供两全其美的优势 - 可以作为 sargable WHERE 子句目标的计算，并且始终保证是正确的。（SQL Server 等价物称为*索引视图*。）权衡是存储空间和 CPU 周期，以使物化视图及其索引在基表更新后保持最新。

通常，我会先尝试一个视图。但在您的特定情况下——每天 40 万行，持续 365 天——我想我会先尝试物化视图。无论出于何种原因，它都无法正常工作，您可以将其替换为基表中的列，删除物化视图，然后创建一个具有相同名称的新视图。（逻辑数据独立性摇滚。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T03:06:44.700

如果您有一个开发环境，我建议您测试这两种方法并选择一种能够提供最佳性能/维护成本的方法。即使表存储了大约 400k 记录，这取决于您访问该数据的方式，一种方法可能更有意义。

# java - 如何搜索 ArrayList 并将其与另一种方法匹配？

> ID：14699439
> 
> 赞同：0
> 
> 时间：2013-02-05T02:55:06.157
> 
> 标签：java, arraylist

我有两节课。第一个是完整的，它正在制作一个 Item 对象：

```
public class Item {

private String name; // The Name of the item.
private int unitPrice; // The price of each unit of this item, in cents.
private int quantity; // The number of units of this item.

// CONSTRUCTOR

/*
 * Constructs an item with specified name, price, and quantity.
 */
public Item(String name, int unitPrice, int quantity) {
    this.name = name;
    this.unitPrice = unitPrice;
    this.quantity = quantity;
}

// METHODS

/*
 * Gets the name for the item. Returns the name for this item.
 */
public String getName() {
    return name;
}

/*
 * Gets the price of each unit of a given item, in cents. Return the price.
 */
public int getUnitPrice() {
    return unitPrice;
}

/*
 * Gets and returns the number of units of this item.
 */
public int getQuantity() {
    return quantity;
}

/*
 * Increases or decreases the quantity of this item. If value is positive,
 * quantity increases. If negative, quantity decreases.
 */
public void changeQuantity(int value) {
    quantity = quantity + value;
}

/*
 * Gets the total price, in cents. Returns the productof quantity and
 * unitPrice as the total price of this item.
 */
public int getTotalPrice() {
    return quantity * unitPrice;
}

/*
 * Returns a string of this item, including name, price($)
 */
public String toString() {
    return name + ": " + quantity + " ($" + unitPrice / 100 + "."
            + unitPrice % 100 + " per unit)";
} 
```

}

现在，我正在尝试做一个 findItem 方法，我在其中搜索。不完全确定该怎么做。我想浏览所有库存并尝试匹配名称。我相信我应该使用 getName() 但不确定如何遍历每个名​​称。

```
public class Store {
private ArrayList<Item> inventory;

//MOTHODS

/*
 * Finds an item by its name if it is part of the store's inventory
 * Name is case-insensitive
 * Returns the Item object corresponding to the given name if the item was found. If an item with the given name was not found, then this method returns null.
 */
public Item findItem(String name){
    for(int i=0; i<inventory.size();i++){
        if(name.toUpperCase().equals(?????))
    }
} 
```

}

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:59:32.447

为什么不使用[for-each](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)循环？

```
public Item findItem(String name)
{
    for(Item item : inventory)
    {
        if(item.getName().equalsIgnoreCase(name))
        {
            return item;
        }
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:59:12.427

`name`你的对象中已经有一个吸气剂`Item`，所以剩下的就是......

```
 if(name.equalsIgnoreCase(use-your-getter-here())) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:59:31.633

```
public Item findItem(String name){
  for(int i=0; i<inventory.size();i++){
    if(name.toUpperCase().equals(inventory.get(i)))
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T03:01:24.410

这是您需要的代码：

```
import java.util.ArrayList;

public class Store {
    private ArrayList<Item> inventory;

    // MOTHODS

    /*
     * Finds an item by its name if it is part of the store's inventory Name is
     * case-insensitive Returns the Item object corresponding to the given name
     * if the item was found. If an item with the given name was not found, then
     * this method returns null.
     */
    public Item findItem(String name) {
        for (int i = 0; i < inventory.size(); i++) {
            if (name.toUpperCase().equals(inventory.get(i).getName().toUpperCase())) {
                return inventory.get(i);
            }
        }
        return null;
    }
} 
```

# maven - Maven项目中的getClass().getResourceAsStream()

> ID：14699441
> 
> 赞同：22
> 
> 时间：2013-02-05T02:55:18.960
> 
> 标签：maven, resources

我的 maven 项目的 pom.xml 如下所示：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>groupId</groupId>
  <artifactId>artifactId</artifactId>
  <version>0.0.1-SNAPSHOT</version>

  <build>
   <sourceDirectory>src/main/java</sourceDirectory>
   <resources>
    <resource>
     <directory>src/main/resources</directory>
    </resource>
   </resources>
  </build>
</project> 
```

在 src/main/resources 目录中，我有一个名为 test.txt 的文件。在 src/main/java 目录中，我有一个包含以下行的类：

```
System.out.println(this.getClass().getResourceAsStream("test")); 
```

当代码行在 Eclipse 中运行时，我得到输出

```
java.io.BufferedInputStream@1cd2e5f 
```

当我将项目导出为 .jar 并运行它时，我得到了输出

```
 null 
```

我是不是配置错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-02-18T04:45:14.783

在`<build><resources>`确保具有`<include>`如下内容这将明确告诉 maven 获取这些文件并将其包含在构建中。

```
 <build>
     <resources>
        <resource>
            <directory>${basedir}/src/main/resources</directory>
            <includes>
                <include>**/*</include>
            </includes>
        </resource>
     </resources>
     ...
  </build> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-09-30T04:11:13.413

我也面临同样的问题。

当您尝试获取这样的资源时：
`getClass().getResourceAsStream("test")`

您正在尝试查找与该包相关的资源。

要从`src/main/resources`目录中获取资源，您必须在资源名称前添加一个斜杠。
`getClass().getResourceAsStream("/test")`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T04:25:57.937

我收到了这个错误，但是通过大量的谷歌搜索，我找不到解决方案。所有的答案都是关于路径的，没有人关心它可以在 Eclipse 中运行但不能在导出的 jar 文件中运行:(

但是现在我找到了解决方案，非常简单：在 Eclipse 中右键单击您的 maven 项目-> 属性-> Java 构建路径-> 源选项卡

你可以看到一棵树：

```
MyProject/src
   Ouput follder..
   Included (**/*.java)
   Excluded
   ... 
```

双击`Included (**/*.java)`，删除现有的，这样它就变成`Included (All)` 了现在导出jar文件:)

# tomcat - 某些技术是如何得名的？

> ID：14699442
> 
> 赞同：-2
> 
> 时间：2013-02-05T02:55:24.603
> 
> 标签：tomcat, ant, glassfish, names

`Ant`, `Maven`, `Tomcat`, `Glass Fish`, 等是如何得名的？我注意到这些都是动物（相关）名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:13:26.047

来自[Ant 常见问题页面](http://ant.apache.org/faq.html#ant-name)：根据 Ant 的原作者 James Duncan Davidson 的说法，该名称是“Another Neat Tool”的首字母缩写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:32:42.653

不确定其余的，这里是解释为什么 Glassfish 被命名的链接。[https://wikis.oracle.com/display/GlassFish/FaqWhyName](https://wikis.oracle.com/display/GlassFish/FaqWhyName)

# php - mysql不能与php一起使用

> ID：14699443
> 
> 赞同：0
> 
> 时间：2013-02-05T02:55:47.940
> 
> 标签：php, mysql, apache, installation, windows-xp

我试图让 mySQL 在 Windows XP sp3 笔记本电脑上工作。我正在使用`Apache2, php5`和`mysql`。

在命令提示符下，我可以进入 mysql 服务器并开始创建数据库和表。

在 php 中，每次我尝试运行任何数据库操作时，所有脚本都会停止。

在 中`php.ini`，我确实启用了以下功能：

```
extension=php_mysql.dll
extension=php_mysqli.dll 
```

我有以下代码来测试数据库：

```
echo '<p>testinp php script</p>'; 

// mysqli
$mysqli = new mysqli("localhost", "root", $pw, $db);

echo 'Still here<br>';

$result = $mysqli->query("SELECT * from test");
$row = $result->fetch_assoc();
print_r ($row);

echo 'Still here'; 
```

我不知道为什么，但我无法`"Still here"`在屏幕上显示消息，脚本只是执行。

我还启用了防火墙中的端口，但效果不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:29:03.550

您没有向我们展示您为用户名和密码定义变量的位置。

如果您确定此扩展程序处于活动状态。使用以下内容：

```
if (class_exists('mysqli')) {
    echo "MySQLi Class Exists";
}
else
{
 echo "MySQLi Class Does Not Exist";
} 
```

这可以检查您是否已成功启用此类，使用 function_exists 将返回 false，因为 MySQLi 和 PDO（供将来参考）是基于类的。

如果您怀疑您是否正确配置了 MySQLi 连接。请参阅手册。 [http://php.net/manual/en/mysqli.construct.php](http://php.net/manual/en/mysqli.construct.php)

最后但并非最不重要的一点是，因为您已经修改了 PHP.ini.. 请仔细检查以下内容：

1）你确定你修改了apache加载的那个吗？- 如果有疑问.. 使用 phpinfo 来识别 php.ini 的位置

2) 修改 php.ini 需要重新启动/重新加载 apache.. 一直如此。以下之一： *更新：在阅读标签之前，您以为您在 linux 上*

如果使用 IIS：

打开您的管理控制台并选择“重新启动”

如果使用 XAMPP：

打开 Xampp 管理控制台并停止服务，然后重新启动它。

从命令行：

`net stop apache2.4` 然后 `net start apache2.4` （用你的 apache 版本替换 2.4）

请参阅从 CLi 操作服务的手册：

[http://technet.microsoft.com/en-gb/library/cc736564%28v=ws.10%29.aspx](http://technet.microsoft.com/en-gb/library/cc736564%28v=ws.10%29.aspx)

另外，用你的`echo`陈述......因为你有两个相同的回声，试着改变它们......或者至少告诉我们有多少（如果有的话）是可见的？这是第一个..查阅手册..

如果是你的第二个...

请参阅手册了解您的功能：

[http://www.php.net/manual/en/mysqli.query.php](http://www.php.net/manual/en/mysqli.query.php) - MySQLi 查询

[http://www.php.net/manual/en/mysqli-result.fetch-assoc.php](http://www.php.net/manual/en/mysqli-result.fetch-assoc.php) - MySQli Fetch Assoc

**最终更新（S）：**

另请参阅手册以了解 MySQLi 错误：

[http://php.net/manual/en/mysqli.error.php](http://php.net/manual/en/mysqli.error.php)

最后但并非最不重要的...您连接的数据库是否也存在？和你的数据库模式中的那个表一样吗？

# android - 查询服务器并将返回的 JSON 显示到 ListView

> ID：14699444
> 
> 赞同：-3
> 
> 时间：2013-02-05T02:55:51.617
> 
> 标签：android

我想查询我的 PHP 服务器并`ListView`在 Android 中显示结果。问题是，我不断收到此错误：`JSONArray cannot be coverted to JSONObject`. 请耐心等待，因为我尝试了大多数类似错误的解决方案，但似乎无法使其正常工作。

[http://congomikili.com/android_login_api/retrieve_polls_names.php](http://congomikili.com/android_login_api/retrieve_polls_names.php)在我的浏览器上为我提供了以下数据：

```
[{"0":"who will win the next election","name":"who will win the next election"},{"0":"who ","name":"who "}] 
```

然而，在运行我的应用程序后，我得到了一个空白屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:35:44.363

您需要先使用 JSONArray 并获取每个 JSONObject 的索引

# python - Python 中的包和模块，用于使用 Flask 创建 Web 应用程序

> ID：14699450
> 
> 赞同：2
> 
> 时间：2013-02-05T02:56:12.387
> 
> 标签：python, model-view-controller, flask

目前，我正在为一家公司编写 Web 界面。

这个 Web 界面基于 python 微框架 Flask。我想使用MVC原理来构建这个接口。我有一些问题。

该模型将在 SQLAlchemy 的帮助下包含用于 ORM 映射的数据，没有问题。
这些视图基于一些html和css，我认为这里也不会有问题。

另一方面，控制器有点麻烦。
我想将页面分成模块并将脚本应用程序分成单独的模块，并将所有这些模块打包到一个控制器包中，例如：

*   会话模块（登录/注销/Cookie）
*   管理员模块（管理注册帐户/内容/等）
*   应用程序脚本 1 模块
*   应用程序脚本 2 模块
*   应用程序脚本 3 模块

我知道要渲染模板，您需要使用路由等。但是，如果调用某个链接，它将如何调用特定模块并从那里提取方法。是否可以为路由创建一个主控制器，并为路由中的每个方法导入上述模块之一？

```
@app.route('/')
  def index():
    return render_template("index.html")

@app.route('/login/', methods = ('GET', 'POST'))
  def login():
    from session import login
    -> call method from 'login' here

@app.route('/account/<username>', methods = ('GET', 'POST'))
  def login():
    from administrator import view_account
    -> call method from 'view_account' here 
```

这是一个好习惯吗？或者我应该从标题开始并导入我在这个包中的每个模块。我的第一个想法是防止应用程序由于脚本的大小而加载太长，如果访问需要该模块的页面或类似的东西，只会调用某些模块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:13:15.817

如果我的问题是正确的，那么您肯定想使用蓝图 :) 在[文档中阅读更多内容](http://flask.pocoo.org/docs/blueprints/)

基本上，这就是如何在没有一个控制器的情况下使 Flask 应用程序模块化的方法，其中所有可能的模块都在那里导入或其他一些技巧。

在这里，您可以找到使用蓝图[的应用程序示例。](https://github.com/mitsuhiko/flask/wiki/Large-app-how-to)

# javascript - Trunk8 jquery 插件只截断直到第一次破格。如何截断整个帖子？

> ID：14699453
> 
> 赞同：1
> 
> 时间：2013-02-05T02:56:42.590
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, truncate

[我正在使用带有rails（ http://jrvis.com/trunk8/#toggle](http://jrvis.com/trunk8/#toggle) ）的trunk8 jquery插件，它只截断前几句话，直到第一个空格。这是我的代码：

```
<%= simple_format(@post.summary, id:"t8-toggle") %> 
```

如何确保它截断整个帖子？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:34:23.347

使用`lines`参数指定截断前要显示的文本行数。默认情况下，trunk8 只会截断一行文本。这是一个例子：http: [//jrvis.com/trunk8/#lines](http://jrvis.com/trunk8/#lines)

结合切换示例，您的 JavaScript 应如下所示：

```
$('#t8-toggle').trunk8({
  fill: '&hellip; <a id="read-more" href="#">read more</a>',
  lines: 6, //update this number as desired
}); 
```

使用trunk8 的优点是它在截断之前最大化了可见文本的数量。通过使用 Brian Petro 答案中的代码，您将在固定数量的字符后截断，这可能是最佳的，也可能不是最佳的。

披露：我是trunk8插件的创建者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:01:05.890

为什么不直接使用 RoR 版本？

```
 <%= simple_format truncate(@post.summary, length: 140) %> 
```

# php - php会话变量，阻止用户

> ID：14699454
> 
> 赞同：0
> 
> 时间：2013-02-05T02:56:42.620
> 
> 标签：php

嘿，任何人都可以查看我的代码并帮助我...我正在使用 apache，如果用户输入错误的密码和用户名 3 次，它只会将它们转发到 404 html 页面。不幸的是，我的浏览器中显示了一些代码，我不确定为什么。我知道 php，所以如果代码草率或不正确，请不要缠着我。

**登录.php：**

```
<?php 
session_start(); 
$_SESSION['wrong']=0;
$user = $_POST['user'];
$pass = $_POST['pass'];
if($user == "school"
&& $pass == "homework")
{
echo"Password system work!";
}else{
$_SESSION['wrong']=$_SESSION['wrong']+1;
header( 'Location: http://localhost' ) ;
}
?> 
```

**索引.html：**

```
<? session_start(); 
include 'login.php';
global $_SESSION['wrong'];
if($_SESSION['wrong']>=3){
header( 'Location: 404_File_Not_Found.html' ) ; //This is what the browser is showing

}
?>
<html>
<head>
<style type="text/css">

#form{
width:  340px;
height: 400px;
box-shadow: 0px 2px 5px rgba(0,0,0,0.25);
position: relative;
-webkit-box-shadow: 0px 2px 5px;
border: solid 1px #ddd;
padding: 30px 30px 60px 30px;
background: #fff;
border-radius: 10px;
}
p{
font-family: Verdana;

}
div{
margin-left:auto;
margin-right:auto;
margin-top:5%;

}
img{
width: 120;
height: 133;
left: 100px;
position: relative;
}
input{
margin-left:10%;
margin-right:5%;
font-size: 14px;
width: 264px;
padding: 9px 7px 7px;
background: none !important;
position: relative;
z-index: 10;
margin-bottom: 20px;
border-radius: 5px;

}
.button:hover{
color: red;
}
</style>

</head>
<body>
<div id="form">     
<img src="http://traceybaptiste.files.wordpress.com/2011/01/homework2.jpg" />
    <form method="POST" action="login.php">
    <p>User:</p> <input type="text" name="user"></input>
    <p>Pass:</p> <input type="password" name="pass"></input>
    <input type="submit" name="submit" class="button"></input>
    </form>
</div>
</body>
</html> 
```

**404.html：**

```
<html>
<head>
<style>
html{
background-color:grey;
}
body{
background-image:url("404.jpg");
background-repeat:no-repeat;
margin-left: 25%;
margin-right: auto;
margin-top: 10%;

}
</style>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:53:37.077

我不太确定，但我认为您不应该包含 login.php（index.html 的第二行）。我对 php 也有点陌生，但您的表单似乎在 index.html 上，然后您将数据发布到 login.php 并从那里重定向用户。在表单的开头包含 login.php 对我来说没有任何意义。我可能弄错了，但只是想提供帮助。

我也认为 William N 写的代码也是错误的，这就是为什么你被困在 login.php 中，如果你的密码错误，它不会将你重定向到本地主机。

```
<?php 
session_start(); 
$_SESSION['wrong']=0;
$user = $_POST['user'];
$pass = $_POST['pass'];
if($user == "school"
&& $pass == "homework")
{
echo"Password system work!";
}else{  
$_SESSION['wrong']=$_SESSION['wrong']+1;
header( 'Location: http://localhost' ) ;}

if($_SESSION['wrong'] == 3)

header( 'Location: diepage.html' ) ;

?> 
```

尝试这个。

编辑：哦，似乎你每次加载 login.php ($_SESSION['wrong']=0;) 时都通过为其分配 0 来重置 $_SESSION['wrong']，所以它永远不会得到到 3\. 也许你可以做类似的事情：

```
if (!isset ($_SESSION['wrong'])){
$_SESSION['wrong']=0;} 
```

这样只有在没有更早设置的情况下，您才会启动并将其设为零。但我又不完全确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:59:43.743

> ```
> <?php 
> session_start(); 
> $_SESSION['wrong']=0;
> $user = $_POST['user'];
> $pass = $_POST['pass'];
> if($user == "school"
> && $pass == "homework")
> {
> echo"Password system work!";
> }else{  $_SESSION['wrong']=$_SESSION['wrong']+1; if($_SESSION['wrong'] == 3)
> 
> header( 'Location: diepage.html' ) ;
> }
> ?> 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T03:01:16.093

如果你的文件是 named `index.html`，它不会被 PHP 解析。

此外，使用`<?php`而不是 just `<?`，它更可靠，因为它不依赖于特定的配置设置。

# ios - 当iOS处于锁屏模式时，我们可以识别手势吗？

> ID：14699455
> 
> 赞同：0
> 
> 时间：2013-02-05T02:56:43.883
> 
> 标签：ios, objective-c, uigesturerecognizer

我可以像这样在我的应用程序中检测锁定屏幕模式：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    UIApplicationState state = [application applicationState];
    switch (state) {
        case UIApplicationStateInactive:
            NSLog(@"LockScreen");
            [self.viewController addGestureRecognizersToView:self.viewController.view];
            break;

        case UIApplicationStateBackground:
            NSLog(@"Background");
            break;
        default:
            break;
    }
} 
```

我想继续识别手势（点击，长按...），但不需要滑动解锁。可能吗？哪个选项来控制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:04:02.167

不，这是不可能的。当您的应用程序不可见时（例如，当锁定屏幕打开时），您的应用程序不会接收到手势输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:05:11.523

不可能。如果设备被锁定。App 对事件处理几乎无能为力（远程控制事件除外）。因为设备不会处理这些事件。这确实是正确的情况。如果设备仍在处理这些事件，它将消耗大量电池能量。

# php - 如何模块化类设计？

> ID：14699456
> 
> 赞同：1
> 
> 时间：2013-02-05T02:57:11.047
> 
> 标签：php, class

我正在设计一个具有通用代码库的应用程序，但它的某些部分非常特定于某些购物车。随着设计用于容纳的推车数量的增长，我发现自己添加到主类中的方法越多。这使得类相当大和笨重。

如何将事物模块化，以便加载主类的每个特定购物车都有自己的特定方法，只有在购物车的品牌和版本匹配时才会加载这些方法？

例如，假设我现在以这种方式进行设置：

```
class Thingy {
    public function doStuffMagento16() {...}
    public function getMoreMagento16() {...}
    public function doStuffOpencart15() {...}
    public function getMoreOpencart15() {...}
    public function doStuffPrestashop12() {...}
    public function getMorePrestashop12() {...}
    public function doStuffXcart45() {...}
    public function getMoreXcart45() {...}
} 
```

我如何让它看起来更像这样，这样方法只会重载主类中的默认值：

```
class Thingy {
    public function doStuff() {...}
    public function getMore() {...}
} 
```

我真的在想我需要创建子类来扩展主类并在调用主界面时自动加载它们，但我想在我尝试之前确保这确实是最有效且易于维护的选项....或者如果我应该去另一个方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:20:51.053

这需要[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)；您将特定的购物车界面调整为通用界面。

简单的例子：

```
/* existing cart implementation */
class CartFromVendorX
{
    public function addProduct( CartXProduct $product ) {}
}

/* existing cart implementation */
class CartFromVendorY
{
    public function pushProduct( CartYProduct $product ) {}
}

/* generic cart interface */
interface CartAdapterInterface
{
    public function addItem( $item );
}

class CartAdapterVendorX
    implements CartAdapterInterface
{
    protected $adaptee;

    public function __construct( CartFromVendorX $adaptee )
    {
        $this->adaptee = $adaptee;
    }

    public function addItem( $item )
    {
        /* transfrom generic $item to CartXProduct, for instance */

        $this->adaptee->addProduct( $product );
    }
}

class CartAdapterVendorY
    implements CartAdapterInterface
{
    protected $adaptee;

    public function __construct( CartFromVendorY $adaptee )
    {
        $this->adaptee = $adaptee;
    }

    public function addItem( $item )
    {
        /* transfrom generic $item to CartYProduct, for instance */

        $this->adaptee->pushProduct( $product );
    }
} 
```

然后是一个通用的购物车消费客户端：

```
class CartClient
{
    protected $cart;

    public function __construct( CartAdapterInterface $cart )
    {
        $this->cart = $cart;
    }

    /* rest of implementation that acts on CartAdapterInterface instance */
} 
```

用法：

```
$cartAdapter = new CartAdapterVendorX( new CartFromVendorX() );
$client = new CartClient( $cartAdapter ); 
```

PS：您不一定必须实现适配器，以便将原始实现传递给它们的构造函数。像这样的东西也可以工作：

```
class CartAdapterVendorX
    implements CartAdapterInterface
{
    protected $adaptee;

    public function __construct()
    {
        $this->adaptee = new CartFromVendorX();
    }

    public function addItem( $item )
    {
        /* perhaps transfrom generic $item first */

        $this->adaptee->addProduct( $item );
    }
} 
```

然后它的用法将简化为：

```
$cartAdapter = new CartAdapterVendorX();
$client = new CartClient( $cartAdapter ); 
```

您可以更改实际的实现细节，但这应该会给您一个大致的概念。例如，您很有可能最终为部分或所有原始购物车以及它实现了[外观模式，因为您可能希望将对一个原始实现的多个方法调用包装到适配器接口的单个​​方法中。](http://en.wikipedia.org/wiki/Facade_pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:01:09.947

创建一个基类，其中包含您所知道的所有购物车通用的所有内容：

```
class Cart {

    function __construct(){

       $this->id = 1234;
       $this->item = 'basic_item';

    }

} 
```

然后[将该](http://php.net/manual/en/keyword.extends.php)类扩展为另一个类：

```
class anotherCart extends Cart {

    function __construct(){

       $this->item = 'another_basic_item';

    }

} 
```

在这个伪示例中，`$this->id`变量在`Cart`和之间是通用的`anotherCart`，但会随着变化而`anotherCart`得到特殊处理。`$this->item`

以这个概念为基础，添加额外的功能和条件，它应该可以帮助您简化即使是最抽象的概念的使用。

# mysql - 选择2，从2个表中的不同记录，以随机顺序，在mysql中

> ID：14699463
> 
> 赞同：0
> 
> 时间：2013-02-05T02:58:17.183
> 
> 标签：mysql

我有一个查询如下：

```
SELECT tb1.id, tb2.id 
FROM tb1
JOIN tb2 ON tb1.group = tb2.id
WHERE 
tb1.status = 1 AND tb2.status = 1
GROUP BY tb1.group
ORDER BY RAND( ) 
LIMIT 2 
```

两个表都很小（不到 1000 行），所以 ORDER BY RAND() 很好。

对于 tb2 中的每条记录，tb1 中有 10 条记录（由 tb2.id = tb1.group 链接）。我想选择 2 个不同的组，每个组在 tb1 中有一个随机记录。

使用 GROUP BY 子句总是从 tb1 中选择组中的第一条记录。删除 GROUP BY 子句后，它会随机选择一个....但它可以每隔一段时间在同一组中选择 2 个项目。

我如何从 tb1 中选择 2 个不同组中的 2 个随机记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:21:43.063

不知何故，这似乎比我认为的要复杂，但我认为它符合您的要求：

```
select tb2.*,
       (select tb1.id from tb1 where tb1.group = tb2.id and tb1.status = 1 order by rand() limit 1) 
from tb2
where tb2.status = 1 and
      exists (select 1 from tb1 where tb1.status = 1 and tb1.group = tb2.id)
group by tb2.id
order by rand()
limit 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:52:58.090

我可能误读了您的要求，所以让我澄清一下我认为您要问的内容...来自 tb1 的 2 个不同组中的 2 个随机记录...对于每个 tb2 记录，您需要 tb1 表中的两个随机记录。因此，如果 tb2 有 100 条记录，则您希望结果集中有 200 条记录... 2 用于第 1 组，2 用于第 2 组，2 用于第 3 组，等等。

如果是这样，我将包装您的查询并利用 MySQL 变量并为每个组放置一个计数器并应用 HAVING 子句...

```
select
      AllPossible.group,
      @lastSeq := if( AllPossible.group = @lastGroup, @lastSeq +1, 1 ) as GroupSeq,
      @lastGroup = AllPossible.group
   from
      ( SELECT 
              tb1.id, 
              tb2.id 
           FROM 
              tb1
                 JOIN tb2
                    ON tb1.group = tb2.id
           WHERE 
                  tb1.status = 1 
              AND tb2.status = 1
           ORDER BY 
              tb1.group,
              RAND( ) ) AllPossible,
      ( select @lastGroup := 0,
               @lastSeq := 0 ) sqlvars
   having
      GroupSeq < 3; 
```

预查询（别名为 "AllPossible" ）仍然会从两个表中获取您唯一的合格状态 = 1 记录......但是，它首先将它们全部按同一组的顺序排列，然后是随机的，例如

Grp 记录组序列

```
1     19      1     (keep)
1     95      2     (keep)
1     3       3     (throw away)
1     28      4     (throw away)

2     34      1     (keep)
2     14      2     (keep)
2     89      3     (throw away)
2     41      4     (throw away)

3     9       1     (keep)
3     25      2     (keep)
3     42      3     (throw away)
3     76      4     (throw away) 
```

由此，它依次分配一个“组序列”。由于首先应用 RAND() 并以随机顺序返回，它只是标记记录 1、2、3、4、（下一组）-- 1、2、3、4 等...have 子句最后声明 I只希望组序列小于 3 的组，因此每组只保留 1 和 2 个，从最终结果集中丢弃所有其余部分。

# c# - 我可以从网址中删除“default.aspx”吗？

> ID：14699467
> 
> 赞同：0
> 
> 时间：2013-02-05T02:58:45.600
> 
> 标签：c#, default

当我尝试从网址中删除 www 时：

`www.jeans.com.vn`

结果是：`jeans.com.vn/default.aspx`。

我也不想要`/defaul.aspx`。

我怎样才能删除它？

我的代码：

```
if (Request.Url.Host.StartsWith("www") && !Request.Url.IsLoopback)
{
    UriBuilder builder = new UriBuilder(Request.Url);
    builder.Host = Request.Url.Host.Replace("www.", "");
    Response.StatusCode = 301;
    Response.AddHeader("Location", builder.ToString());
    Response.End();
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:07:04.923

只需设置[`Path`](http://msdn.microsoft.com/en-us/library/system.uribuilder.path.aspx)为空或“/”：

```
builder.Path = "/"; 
```

# php - 我的网站运行很慢，请看看我是否犯了一个简单的错误

> ID：14699470
> 
> 赞同：-5
> 
> 时间：2013-02-05T02:58:54.563
> 
> 标签：php, performance, wordpress, pagespeed

所以我的网站[http://www.uniconutrition.com](http://www.uniconutrition.com)运行太慢了。我的主页是 php，因为我需要显示来自 wordpress 托管博客的最新博客文章。网站上的所有其他 html 页面都可以快速加载，但主页需要很长时间。我不是最有经验的开发人员，所以它可能是我缺少的一些快速修复 - 请让我知道你看到了什么，并提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T03:08:54.203

您的网站相对较重 (1.03 MB)。确保您的所有 Javascript[都已](http://en.wikipedia.org/wiki/Minification_(programming))压缩，所有图像均已[压缩](http://en.wikipedia.org/wiki/Image_compression)，并且您只加载网站绝对需要的内容。

您可能想要尝试的另一件事是将图像放入[spritesheet](http://www.codeandweb.com/what-is-a-sprite-sheet)并有选择地从中加载它们。使用 spritesheet 将在一个请求中加载许多图像，从而减少等待服务器响应的时间。

快速浏览一下 Chrome 开发者工具的网络选项卡，这些似乎需要最长的加载时间：

![在此处输入图像描述](../Images/5fd9343b46e61992055588b2034d84cf.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T03:09:14.347

在快速查看您的源代码后，我注意到的第一件事是您的 CSS 有 6 个链接标签。尝试将它们结合起来，并确保它们被缩小。您的页面的 http 请求越多，效率就越低。

我注意到的下一件事是你的一些图像的大小是巨大的。athenahero_03.png 是 600KB。您需要优化图像。

如果您使用的是 Firefox，请安装 Firebug 扩展并使用 Net 面板查看您的站点正在下载的所有资源及其大小。

# php - 用 PHP 上传了一个 txt 文件 - 在文件上传之前更改内容？

> ID：14699471
> 
> 赞同：0
> 
> 时间：2013-02-05T02:58:58.817
> 
> 标签：php

我正在将一个 txt 文件上传到服务器，但我想先用一点 RegEx 对其进行格式化。我如何将其发送到 PHP 脚本，更改其内容，然后上传？

我从中获取它的文件名`$_FILES["userinput"]["name"]`，然后保存它的内容，`file_get_contents()`然后对其进行编辑。但是现在我如何将这个编辑过的字符串移动到服务器而不是原始的、未编辑的文件。

我正在考虑创建一个新的 .txt 文件并用字符串的内容填充它然后上传，但这似乎不是很有效。有没有办法只修改试图上传的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:56:14.993

在用 PHP 上传文件之前，它会保存为临时文件，该文件包含文件的内容，当您上传文件时，它基本上会上传您的临时文件。因此，您需要做的就是使用名称更改文件的内容，`$_FILES['userinput']['tmp_name'];`当您上传时，它会抓取您修改后的临时文件并上传。
编辑文件很容易，以下是您如何执行此操作的示例：

```
$filevalue = file_get_contents($_FILES['userinput']['tmp_name']);
$newfilevalue = PUT YOUR CODE HERE!
file_put_contents($_FILES['userinput']['tmp_name'], $newfilevalue); 
```

注意：如果我有帮助，请单击绿色对勾或 1 点向上按钮！

# android - 尝试检测按钮是否被按住约 3 秒

> ID：14699479
> 
> 赞同：0
> 
> 时间：2013-02-05T02:59:41.903
> 
> 标签：android

我看到一个应用程序，如果您按下按钮，它会播放铃声，然后如果您按住它，则会出现一条消息框询问您是否要保存声音文件。我想让我的应用程序检测按钮是否被按下了几秒钟。

我无法弄清楚如何检测按钮是否被长时间按住。我试着用谷歌搜索它，但结果是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:03:07.893

您正在寻找 OnGestureListener，特别是 onLongPress：

[http://developer.android.com/reference/android/view/GestureDetector.OnGestureListener.html#onLongPress(android.view.MotionEvent)](http://developer.android.com/reference/android/view/GestureDetector.OnGestureListener.html#onLongPress(android.view.MotionEvent))

如果您只想使用 onLongPress，则需要使用便捷类：

[http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:38:35.650

显然你还没有读过关于 onLongClickListener 的内容吧？

阅读以下链接：

[http://developer.android.com/reference/android/view/View.OnLongClickListener.html](http://developer.android.com/reference/android/view/View.OnLongClickListener.html)

示例代码：

```
buttonPlay.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            //Do something when clicked normally.
        }
    });

    buttonPlay.setOnLongClickListener(new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            //Offer additional options when the view is held. 
            return true;
        }
    }); 
```

此外，您可以改为调用 registerForContextMenu() 并传递要设置侦听器的视图。[参考](http://developer.android.com/guide/topics/ui/menus.html#FloatingContextMenu)

示例代码：

```
registerForContextMenu(textView);//Registering the TextView textview for longclicks 
```

您必须编写代码来扩展上下文菜单：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.your_context_menu, menu);
    }       
} 
```

其中 id **your_context_menu**必须是在项目的 Res/Menu/ 文件夹下创建的 .xml 文件。

菜单膨胀后，您还必须编写代码以响应选择的选项。

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    Intent broadcast = new Intent();
    switch (item.getItemId()) {
    case R.id.menu_option_one:          
    //do something
    return true;
    default:
        return super.onContextItemSelected(item);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T03:27:12.890

这取决于您对“几秒钟”部分的具体程度。您可以`OnLongClickListener`在任何视图（包括`Button`... [docs link](https://developer.android.com/reference/android/view/View.html#setOnLongClickListener%28android.view.View.OnLongClickListener%29)）上设置一个用户可以理解的标准系统事件。但是，此事件的超时时间为 500 毫秒。

如果您确实需要将手指向下放置几秒钟，则需要自己计时此事件，在这种情况下，通常会`OnTouchListener`启动`Handler`on`ACTION_DOWN`并检查视图状态`postDelayed()`。

# tomcat - 如何让 Solr 在 Tomcat 中使用除 root 以外的记录器？

> ID：14699482
> 
> 赞同：1
> 
> 时间：2013-02-05T02:59:50.780
> 
> 标签：tomcat, logging, solr

我在 Tomcat 6 中运行了 Solr 4。该应用程序运行得很好，但我无法让 Tomcat 将日志写入我想要的位置。这是我`conf/logging.properties`文件的相关部分。

```
handlers = 1catalina.org.apache.juli.FileHandler, \
           2localhost.org.apache.juli.FileHandler, \
           3manager.org.apache.juli.FileHandler, \
           4host-manager.org.apache.juli.FileHandler, \
           5solr.org.apache.juli.FileHandler, \
           java.util.logging.ConsoleHandler

.handlers = 1catalina.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler

############################################################
# Handler specific properties.
# Describes specific configuration info for Handlers.
############################################################

5solr.org.apache.juli.FileHandler.level = FINE
5solr.org.apache.juli.FileHandler.directory = /var/log/solr
5solr.org.apache.juli.FileHandler.prefix = solr.

# SNIP...

############################################################
# Facility specific properties.
# Provides extra control for each logger.
############################################################

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/solr].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/solr].handlers = 5solr.org.apache.juli.FileHandler

# SNIP... 
```

我已经剪掉了`Handler`s 1 - 4 的设置，因为我没有改变它们在我安装 Tomcat 时的设置。

当我启动 Tomcat 时，它会创建以下日志文​​件。

```
$ ls -l $CATALINA_HOME/logs
-rw-rw-r-- 1 webapp webapp 11836 Feb  4 18:29 catalina.2013-02-04.log
-rw-rw-r-- 1 webapp webapp 11836 Feb  4 18:29 catalina.out

$ ls /var/log/solr -l
-rw-rw-r-- 1 webapp webapp 0 Feb  4 18:29 solr.2013-02-04.log 
```

这些文件包含 Solr`catalina.out`的`catalina.2013-02-04.log`日志输出。我试图做的`logging.properties`是把 Solr 登录`/var/log/solr`。

我预计发生的事情是 Tomcat 获取了我的更改`logging.properties`并在 中创建了日志文件`/var/log/solr`，但是 Solr 的日志消息没有到达正确的位置，最终一直到根记录器。

Solr 使用 SLF4J，它应该能够将日志写入`java.util.logging`接口，但 Tomcat 重新实现了该接口的一部分 (JULI) 以允许每个上下文有一个单独的记录器。SLF4J 和 JULI 之间是否存在一些不兼容？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:10:06.787

您应该将 solr 处理程序设置为新添加的处理程序：-

```
org.apache.solr.level = INFO
org.apache.solr.handlers = 5solr.org.apache.juli.FileHandler 
```

# sql-server-2008 - 在带有故障转移的 SQL Server 中使用链接服务器

> ID：14699487
> 
> 赞同：0
> 
> 时间：2013-02-05T03:00:20.727
> 
> 标签：sql-server-2008

有人知道如何使用故障转移选项在 SQL Server 2008 R2 中创建链接服务器吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:40:29.443

我已经找到了解决方案！

我需要添加一个参数@catalog

```
EXEC master.dbo.sp_addlinkedserver @server = N'MyLinkServer', @srvproduct=N'', @provider=N'SQLOLEDB', @provstr=N'Server=PRINCIPAL;FailoverPartner=SECONDARY;', @catalog='MyDatabaseName' 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T01:32:56.223

根据我的经验，同样重要的是要注意，即使 IP 地址确实可以从 SSMS 或任何其他连接字符串中使用，但使用服务器的 IP 地址可能无法正常工作。

```
EXEC master.dbo.sp_addlinkedserver
     @server = N'MyLinkServer'
   , @srvproduct=N''
   , @provider=N'SQLNCLI'
   , @provstr=N'Server=principal.server.name.not.IP.address;FailoverPartner=secondary.server.name.not.IP.address;'
   , @catalog='MyDatabaseName' 
```

# mysql - MySQL 存储和检索逻辑 - 自由格式的动态数据 - 用户输入的值

> ID：14699489
> 
> 赞同：0
> 
> 时间：2013-02-05T03:00:38.000
> 
> 标签：mysql, logic

我正在寻找一种将用户输入的数据存储和检索为下拉列表的解决方案。

* * *

用户希望从包含品种值的现有下拉列表开始。

**品种选择列表**

```
<select>
<option value="0">select</option>
<option value="1">Afghan Hound</option>
<option value="2">Airedale Terrier</option>
<option value="3">American Bulldog</option>
<option value="4">Belgian Malinois</option>
</select> 
```

* * *

存在品种表

```
|breed_id|  breed_title   |
---------------------------
|   1    |  Afghan Hound  |
|   2    |Airedale Terrier|
|   3    |American Bulldog|
|   4    |Belgian Malinois| 
```

* * *

品种 ID 值将与宠物值一起保存

```
|pet_id| pet_name | pet_sex |breed_id|
--------------------------------------
|  1   | 'Foo Foo'|   'M'   |    2   |
|  2   | 'Sparky' |   'f'   |    4   |
|  3   |  'Spot'  |   'M'   |    1   | 
```

* * *

因为有很多不同类型的品种，并且因为输入错误品种类型的可能性 - 用户希望能够添加、编辑和删除品种类型。

我可以看到我可以在品种表中编辑和添加品种类型。但是如果用户删除了一个品种，比如说品种#2：

```
|breed_id|  breed_title   |
---------------------------
|   1    |  Afghan Hound  |
|   3    |American Bulldog|
|   4    |Belgian Malinois| 
```

该品种的宠物协会丢失了：

```
|pet_id| pet_name | pet_sex |breed_id|
--------------------------------------
|  1   | 'Foo Foo'|   'M'   |   (2)  |<<<<<<<
|  2   | 'Sparky' |   'f'   |    4   |
|  3   |  'Spot'  |   'M'   |    1   | 
```

* * *

对于具有已从品种表中删除的品种​​ ID 的宠物之间的关联，我该怎么办？

下次调用宠物时，我尝试填充**品种选择列表**- 品种 #2 消失了。我现在怎么处理那些宠物品种？我现在如何填充我的下拉列表？

* * *

我可以想出几种方法来处理这个问题 - 但我不确定正确的解决方案 - 或最佳实践。

我意识到可能有更多的逻辑或数据输入方法、解决方案类型。无论解决方案是什么——我只想知道专业人士是如何处理这种事情的。

谢谢 ： ）

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:18:20.187

如何处理引用已删除品种的狗将取决于为什么需要更改品种。

当他们试图实现不同的目标时，每个不同的原因都会产生不同的结果。有几个是：

1.  品种拼写错误或重命名
2.  两个品种实际上是一个
3.  创建了一个错误的（不存在的）品种

我会为每种情况建议以下行为

1.  **重命名**只是更新现有的品种表，能够做到这一点是首先规范化品种数据的主要动机之一。

2.  **合并**，如果您确定*“阿富汗猎犬”*和*“库奇猎犬”*实际上是同一品种，那么您首先将所有引用*“阿富汗猎犬”*的狗改为引用*“库奇猎犬”，*然后您可以删除“阿富汗猎犬”猎犬的品种不用担心悬空的参考。

3.  **删除**，假设创建了一个品种*“Yo Mama”*，如果您决定也不需要该品种类型的狗，您可以先删除所有引用*“Yo Mama”*的狗，然后再删除该品种。如果您想保留这些狗，我建议创建一个*“未知”*品种类型，或将品种设置为*NULLable*，并在删除该品种之前将所有*“Yo Mama”*狗的品种设置为 NULL。

无论哪种方式，这些结果将取决于您希望特定系统的行为类型，但我希望这能让您了解一些常见的迁移类型。

# playframework - 在 Play 2.X 的子域之间共享会话/cookie

> ID：14699490
> 
> 赞同：10
> 
> 时间：2013-02-05T03:00:58.027
> 
> 标签：playframework, playframework-2.0, session-cookies

我只能找到 Play 1.x 有这个设置。如何在 Play 2.X 中进行设置？

[http://www.playframework.org/documentation/1.2.4/configuration](http://www.playframework.org/documentation/1.2.4/configuration)

**application.defaultCookieDomain**

> 启用子域之间的会话/cookie 共享。例如，要使 cookie 对所有以 '.example.com' 结尾的域有效，例如 foo.example.com 和 bar.example.com：
> 
> application.defaultCookieDomain=.example.com 默认值：cookie 仅对特定域有效。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-12-22T15:11:47.623

在 play 2.4 中，`session.domain`已被弃用。您现在应该使用：`play.http.session.domain`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-06T05:18:42.590

该问题发生了变化，[但`Play 2.1`](https://github.com/playframework/Play20/pull/384/commits)不幸的是它没有向后移植到`2.0.x`.

这意味着，从 Play 2.1 开始，您可以在 conf 中使用：

```
session.domain=".mydomain.com" 
```

因为`2.0.x`您需要自己修补源。

# mysql - 错误 - “结果包含多行”，由于 GROUP BY

> ID：14699491
> 
> 赞同：1
> 
> 时间：2013-02-05T03:01:00.010
> 
> 标签：mysql, sql, group-by

我有以下 MYSQL 存储过程，

```
CREATE PROCEDURE DWH.product_stats(OUT int_return INT)
BEGIN
  DECLARE vc_sku, 
      vc_prod_id    VARCHAR(100);

  DECLARE int_views,
      int_fav,
      int_month, 
      int_year, 
      not_found     INT DEFAULT 0;

 DECLARE cur_sku CURSOR FOR

 SELECT product_id, sku FROM product LIMIT 0,10;

 DECLARE CONTINUE HANDLER FOR NOT FOUND SET not_found = 1;

 OPEN cur_sku;
 REPEAT

FETCH cur_sku INTO vc_prod_id, vc_sku;
IF NOT not_found THEN
  -- Number of Views and Favs
  SELECT  COUNT(CASE WHEN event_type_id = 1 THEN 1 END) AS views,
          COUNT(CASE WHEN event_type_id = 5 THEN 1 END) AS favs,
          MONTH(logged_at) AS log_mon, 
          YEAR(logged_at) AS log_year INTO int_views, int_fav, int_month, int_year
  FROM report_event
  WHERE object_id = vc_prod_id
  GROUP BY log_mon, log_year
  ORDER BY log_year, log_mon; 

  -- DEBUG
  SELECT vc_sku, vc_prod_id, int_views, int_fav, int_month, int_year ;
END IF;
UNTIL not_found END REPEAT ;
CLOSE cur_sku;

END; 
```

如果我正常运行，则没有错误。我得到结果。但我在 MYSQL 存储过程中使用它。然后，当我尝试运行存储过程时，它给了我这个错误，说“结果由多行组成”。这是因为我有一个针对月份和年份的 GROUP BY，它将为一个产品生成多个记录。但这就是我想要的功能。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:02:13.303

我认为我采用的方法是完全错误的，因为第二个 SQL 返回多行，要对结果做一些事情，我需要把它作为一个游标放在一起。所以我重写了SP如下，现在它工作正常，

```
DROP PROCEDURE IF EXISTS DWH.product_stats;
CREATE PROCEDURE DWH.product_stats(OUT int_return INT)
BEGIN
DECLARE vc_sku, 
      vc_prod_id    VARCHAR(100);

DECLARE not_found INT DEFAULT 0;

DECLARE cur_sku CURSOR FOR
  SELECT product_id, sku FROM product LIMIT 0,10;

DECLARE CONTINUE HANDLER FOR NOT FOUND SET not_found = 1;

OPEN cur_sku;
REPEAT
  FETCH cur_sku INTO vc_prod_id, vc_sku;
  IF NOT not_found THEN
  SET @vc_prod_id = vc_prod_id;
  -- Number of Views and Favs
  BEGIN
    DECLARE int_views,
            int_fav,
            int_month, 
            int_year INT;

    DECLARE not_found_ev INT DEFAULT 0;

    DECLARE cur_event CURSOR FOR
      SELECT  
        COUNT(CASE WHEN event_type_id = 1 THEN 1 END) AS views,
        COUNT(CASE WHEN event_type_id = 5 THEN 1 END) AS favs,
        MONTH(logged_at) AS log_mon, 
        YEAR(logged_at) AS log_year 
        FROM report_event
        WHERE object_id = @vc_prod_id
        GROUP BY log_mon, log_year
        ORDER BY log_year, log_mon;

    DECLARE CONTINUE HANDLER FOR NOT FOUND SET not_found_ev = 1;  

      OPEN cur_event;

      report_event_loop : LOOP 

        FETCH cur_event INTO int_views, int_fav, int_month, int_year; 
        IF not_found_ev THEN
          CLOSE cur_event;
          LEAVE report_event_loop;
        END IF;
        -- DEBUG
        SELECT @vc_prod_id, vc_sku, vc_prod_id, int_views, int_fav, int_month, int_year ;
      END LOOP;
      SET not_found_ev = 0;
  END;
 END IF;
 UNTIL not_found END REPEAT ;
 CLOSE cur_sku;
END; 
```

# cassandra - 使用 Astyanax 列出 Cassandra 列族中的所有行

> ID：14699495
> 
> 赞同：2
> 
> 时间：2013-02-05T03:01:13.637
> 
> 标签：cassandra, paging, cql, astyanax

我有一些与 Cassandra 相关的问题：

我必须存储一些数据（大约 10M 行）（假设是一个自然键 - 可排序、更新时间戳、createDate（仅限 YYYYMMDD）和一个值字段。我计划创建以下 CF

```
CREATE TABLE data (
  id text,
  createdate text,
  updatedate timeuuid,
  value text,
  PRIMARY KEY (id, updatedate)
);

CREATE TABLE data_createdate (
  id text,
  createdate text,
  value text,
  PRIMARY KEY (id, createdate)
); 
```

我的使用查询将如下所示：

*   获取所有行（id、value、createdate、updatedate），所以像这样的 CQL 就可以了 `SELECT * FROM data`

我正在使用 Astyanax，如何进行分页？我是否必须将分区器启用为保留顺序，以便我可以`token(id)`在范围值中使用来分页。

*   获取具有更新范围的所有行，所以像这样的 CQL 就可以了 `SELECT * FROM data where updatedate > startdate and updatedate < enddate`

再次，我如何进行分页？

*   获取所有具有创建范围的行，它类似于上面的问题，但我可以针对`data_createdate`CF运行 CQL。再次，我如何进行分页？

有什么建议和意见吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:18:15.843

通常，您希望避免需要遍历列族中的所有键的任何事情。就像在 RDBM 中一样，您应该只执行设置了正确索引的查询。

由于`updatedate`是`data`表的复合行键的一部分，因此您可以对该列使用范围查询来进行分页（不幸的是，如何在 Cassandra 中进行分页是一个非常复杂的主题）。这意味着您的两个第一个用例实际上是相同的。

我不太确定你所说的第三种情况是什么意思，你的意思是你想`data`用范围查询来查询行`createdate`- 例如`SELECT * FROM data WHERE createdate > '20130206' AND createdate < '20130228'`？我对您的第二张表 ( `data_createdate`) 及其适合的位置感到困惑。

如果您的意思是我认为您的意思，一种解决方案可能是向( )`createdate`列添加二级索引。[您可以在文档中阅读有关二级索引的更多信息](http://www.datastax.com/docs/1.2/ddl/indexes)。`data``CREATE INDEX data_createdate_index ON data (createdate)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:09:41.517

如果要实现分页，则尝试存储最后检索到的集合中的最后一个键，以便下次要获取下一页切片时，查询的入口点将是最后保存的键。建议您通过此链接 [http://www.datastax.com/docs/1.2/cql_cli/using/paging](http://www.datastax.com/docs/1.2/cql_cli/using/paging)。

# jsf - 我可以监视 JSF/Seam 中的隐藏值更改吗？

> ID：14699496
> 
> 赞同：0
> 
> 时间：2013-02-05T03:01:14.910
> 
> 标签：jsf, richfaces

作为主题，我可以在 JSF 1.2/Richfaces 3.3 中这样做吗：

`<h:inputHidden value="#{manageBean.value}"> <a4j:support event="onchange" reRender="contentID" eventsQueue="eventQueue" /> </h:inputHidden>`

原因是它重新渲染页面上的内容区域取决于值更改，该值不会被页面代码（被支持的 bean）更改，所以我想要一个更改事件。

谢谢你提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:19:33.540

如果这不起作用，您可以尝试

```
<h:inputText id="myHidden" style="display:none" value="#{manageBean.value}">
    <a4j:support event="onchange" reRender="contentID" eventsQueue="eventQueue" />
</h:inputText> 
```

此外，您还必须手动触发其更改事件，例如使用 jQuery：

```
$("#myHidden").change(); //form or naming container prefix might be needed (`$("#myForm\\:myHidden").change();`) 
```

# c# - 参数未传递到 SQL Server 存储过程

> ID：14699500
> 
> 赞同：0
> 
> 时间：2013-02-05T03:01:28.137
> 
> 标签：c#, asp.net, stored-procedures, ado.net

我需要这方面的帮助；看起来很简单，但我就是想不通。

我的代码：

```
 public DataTable GetUserAssociatedModules(string UserEmail)
    {
        // retrieve module titles from Module table to be passed to ddlModules in Student.Master
        try
        {
            SqlCommand getModules = new SqlCommand("GetUserAssociatedModules", con);
            getModules.Parameters.AddWithValue("@userEmail", UserEmail);

            SqlDataReader dr;
            dr = getModules.ExecuteReader();

            //DataTable dt = new DataTable();
            dt.Columns.Add("moduleTitle");
            dt.Load(dr);
            return dt;
        }
        catch (Exception ex)
        {
            HttpContext.Current.Response.Write("Exception: " + ex.Message + ", CourseDAO.GetModules()");
            return null;
        }
        finally
        {
            // close database connection
            if (con != null)
            {
                con.Close();
            }
        }
    } 
```

我不断收到一个例外：

> *过程或函数“GetUserAssociatedModules”需要参数“@userEmail”，但未提供该参数。*

我戴上了手表`UserEmail`；它按照应有的方式从 UI 向下传递值，但 datareader 保持为空...

我检查了我的 SQL；它执行正常。

我进行了双重和三重检查，以确保代码中调用的存储过程名称与数据库中的过程匹配，并且代码中的参数名称与过程中的参数名称匹配......

步骤...

```
ALTER PROCEDURE [dbo].[GetUserAssociatedModules]
    @userEmail nvarchar(MAX)
AS
BEGIN
    SELECT 
        [dbo].[Module].[moduleId],[moduleTitle] 
    FROM 
        [dbo].[Module] 
    INNER JOIN 
        [dbo].[ModuleUser] ON [dbo].[Module].[moduleId] = [dbo].[ModuleUser].[moduleId]
    WHERE 
        [dbo].[ModuleUser].[userId] = (SELECT [userId]
                                       FROM [dbo].[User]
                                       WHERE [eMail] = @userEmail)
    ORDER BY 
        [moduleTitle] ASC
END 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T03:10:23.597

您缺少打开连接：

**conn.Open();**

或者不指定这一行：

**sqlCommand.CommandType = CommandType.StoredProcedure;**

```
public DataTable GetUserAssociatedModules(string userEmail)
{
var dt = new DataTable();
string connString = AppConfigurationManager.GetAppSetting("ConnectionString",IsTest,IsQA, IsProd);
using (var conn = new SqlConnection(connString))
{
    conn.Open();
    using (var sqlCommand = new SqlCommand("GetUserAssociatedModules", conn))
    {
        sqlCommand.CommandType = CommandType.StoredProcedure;
        sqlCommand.Parameters.AddWithValue("@userEmail", userEmail);

        SqlDataReader dr = null;
        DataSet ds = new DataSet();
        try
        {
            dr = sqlCommand.ExecuteReader();
            dt = new DataTable("DatatTable_GetUserAssociatedModules");
            ds.Tables.Add(dt);
            ds.Load(dr, LoadOption.OverwriteChanges, dt);
        }
        catch (SqlException ex)
        {
            LogExceptions(ex, new List<Param> { new Param { Name = "userEmail", Value = userEmail} });
         }
        catch (Exception ex)
        {
            LogExceptions(ex, new List<Param> { new Param { Name = "userEmail", Value = userEmail} });
        }
        finally
        {

        }
    }
}
return dt;
} 
```

# wordpress - htaccess重写规则不起作用

> ID：14699503
> 
> 赞同：1
> 
> 时间：2013-02-05T03:01:49.233
> 
> 标签：wordpress, .htaccess, redirect, rewrite

我一直在尝试使用 htaccess rewrite 修复 Google 网站管理员中的数千个 404 错误，但没有得到任何结果。我读了很多关于它但到目前为止没有成功实施它的运气。

报告的错误采用以下格式：

```
http://sub.example.com/tl/author/admin/page/82
http://sub.example.com/tl/author/admin/page/91
http://sub.example.com/no/author/admin/page/101 
```

这些是由我不再使用的翻译插件创建的页面。“tl”、“no”等是语言文件夹。

我想从 url 中删除语言文件夹以使其：

```
http://sub.example.com/author/admin/page/82 
```

这是我在 htaccess 中输入的内容

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /
RewriteRule ^([A-Za-z][A-Za-z])/author/admin/page/([0-9]+)$ http://sub.example.com/author/admin/page/$2 [L,R=301]
</IfModule> 
```

我尝试了许多重写规则的变体，但没有任何效果。然后我删除了所有正则表达式并简单地使用了完整的网址：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule ^http://sub.example.com/tl/author/admin/page/82$ http://sub.example.com/author/admin/page/82 [L,R=301]
</IfModule> 
```

这也不起作用。

有什么建议么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:13:43.330

不知道为什么它不起作用。我使用*“RedirectMatch 301”*代替相同的正则表达式，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:11:37.323

您最好的选择是向您的托管服务提供商查询。过去，我不得不处理类似这样的托管服务提供商 RE 问题。一些托管服务器以某种方式设法限制/覆盖 .htaccess 中的某些设置。

一个例子是托管在 Windows 服务器上的 Wordpress 站点，我的一个主机不允许 .htaccess 文件以某些方式更改永久链接....

# c++ - 哪个更好？- 向地图添加条目的 3 种方法

> ID：14699504
> 
> 赞同：1
> 
> 时间：2013-02-05T03:01:51.220
> 
> 标签：c++, map, vector

我在`sourceFile.cpp`. `functionA()`首先调用并插入 key1、key2 和 key3 的条目。然后`functionB()`被调用以使用 3 个键的向量。我想在退出后释放所有内存`functionC()`。在将条目放入 3 个键的映射中的三种方法中，哪种方法正确/更好？

```
Class ClassA { ... }

ClassA *key1 = new ClassA();
ClassA *key2 = new ClassA();
ClassA *key3 = new ClassA();

static map<ClassA*, vector<pair<char*, char*> > > stringMap;

// which way of adding an entry into StringMap is better? key1, key2 or key3
void functionA() {
    // insert entries into stringMap for key1 and key2
    vector<pair<char*, char*> > *v1 = new vector<pair<char*, char*> >();
    stringMap[key1] = *v1;
    stringMap[key2]; // map will insert one vector<pair<char*, char*> > object
    // is this vector object on heap or stack?

    vector<pair<char*, char*> > v3;
    stringMap[key3] = v3; // 
}

void functionB() {
    // get entries for key1, key2 and key3
    // use vector.push_back() to populate vectors
}

void functionC() {
    // so when program exits this function, all memory is released
    vector<pair<char*, char*> > *v1 = stringMap[key1];
    v1->clear(); // or loop and v1->erase() 
    stringMap.erase(key1);
    delete v1;

    vector<pair<char*, char*> > v2 = stringMap[key2];
    v2.clear();
    stringMap.erase(key2);
    // v2 was inserted by map, does it need to delete v2 ??? 

    // what about the vector for key3?
} 
```

# ios - 在 ABAddressBook 中找出本地电话号码

> ID：14699509
> 
> 赞同：1
> 
> 时间：2013-02-05T03:02:59.983
> 
> 标签：ios, abaddressbook, telephony, nslocale

我想向用户显示他们的联系人列表（使用`ABAddressBook`），这些联系人仅在用户当前的语言环境中，这样用户**就不会产生任何国际短信费用**。例如，如果用户在美国有电话，则只应显示美国电话号码。

我现在的选择是获取用户当前的语言环境（我相信它是一个 2 个字符串），并将其与任何以 00 或 + 开头的电话号码的国家代码进行比较。任何没有 00 或 + 的电话号码都保证是本地电话号码，但如果有人有 +1 的电话号码，它仍应被视为本地电话号码……但这也可能是加拿大号码。我该如何区分这些？

还有其他想法吗？

# mysql - SQL Join两个表语句

> ID：14699512
> 
> 赞同：-1
> 
> 时间：2013-02-05T03:03:08.133
> 
> 标签：mysql, sql, join, left-join

我只是想知道是否有人能够帮助我进行 SQL 连接，因为我对 MySQL 还很陌生。我正在寻找加入两个表，这里是我的表和我正在寻找的最终结果的样子，在此先感谢！

```
TABLE ARTICLES 
article_id    title    body            date       category     author
1             Lorem    Lorem ipsum..   1/1/2013   1            Mitchell

TABLE CATEGORIES
category_id   category
1             Web Design 
```

SQL 语句

```
select categories.category_id, categories.category as category
from categories left outer join articles on categories.category = articles.category 
```

我正在寻找的 SQL 结果

```
article_id    title    body            date       category     author
1             Lorem    Lorem ipsum..   1/1/2013   Web Design   Mitchell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:06:22.020

您的加入`ON`条件应介于`categories.category_id`和之间`articles.category`。否则，您只需要在列表中添加更多列`SELECT`，因为您快到了。

```
SELECT
  article_id,
  title,
  body,
  date,
  categories.category,
  author
FROM
  articles
  LEFT JOIN categories ON articles.category = categories.category_id 
```

这是在行动：[http ://sqlfiddle.com/#!2/0e0c1/1](http://sqlfiddle.com/#!2/0e0c1/1)

我注意到您在`m/d/yyyy`这里以格式列出了您的日期，而不是`YYYY-MM-DD`MySQL 的默认输出。如果这确实是您将其存储在表中的方式（作为`VARCHAR()`而不是[适当的`DATE`类型](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)），我建议您在深入项目而无法轻松更改之前更改该策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:31:11.163

```
SELECT
  article_id,
  title,
  body,
  date,
  categories.category,
  author
FROM
articles 
  LEFT JOIN categories ON articles.category = categories.category_id 
```

这篇文章会对你在 MYSQL 中帮助很大，[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

# debugging - 我意外地生成了结构化异常。我应该使用 __try/__except() 吗？

> ID：14699513
> 
> 赞同：2
> 
> 时间：2013-02-05T03:03:28.407
> 
> 标签：debugging, visual-c++

我在一个用 MSVC 2005 编译的大型多线程应用程序中遇到了一个神秘的崩溃问题。客户端日常使用该应用程序，任何崩溃都会对它们造成重大破坏。我需要一个解决方法。如果我可以将问题隔离到一个功能，并按照以下方式做一些事情：

```
__try
{
  FunctionWhichMayCauseCrash();
}
__except ( [filter expression] )
{
  Recover();  // magic - this allows us to prevent crash and continue
} 
```

那么这在理论上对我来说似乎是个好主意。在实践中，有些人（例如这里的拉里奥斯特曼和[这里](https://stackoverflow.com/questions/6708937/intermixing-c-exception-handling-and-seh-windows)的道格哈里森[）](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/42985583-36fb-4e14-8642-bd837aac0727)认为这可能是一个非常糟糕的主意 - 不应该用驳船杆接触 SEH。

现实检查：我的程序正在生成结构化异常，我不知道在哪里。我正在使用[Hans Dietrich 的 XCrashReport 的](http://www.codeproject.com/Articles/5259/XCrashReport-Exception-Handling-and-Crash-Reportin)部分内容——它本身就在使用`__try/__except`——试图深入了解这些异常的来源，但到目前为止还没有运气。似乎某些共享资源没有被正确锁定，因此一个线程正在从另一个线程下面拉扯地毯，从而在或多或少随机的地方导致访问冲突。

是否有一个务实的中间立场，这种机制可以防止我的程序崩溃？我是否应该担心我选择的崩溃恢复机制使用了其他人警惕的东西？

**澄清：**由于程序崩溃造成的极端破坏，我寻求一种防止崩溃的解决方法，而不是最终的永久解决方案。我无意用`__try/__except`地毯下的问题扫除。我只是想了解它是否像某些人所说的那样危险，还是应该谨慎使用的合法工具。有些人说话的方式，在我尝试使用定义编译代码的那一刻`/EHa`，我的计算机可能会起火。我很想知道人们是否会说使用`/EHa`,`_set_se_translator`和`try/catch(...)`更好，或者等同于同一件事，或者两者是否真的是坏主意。

**澄清 2：**我不需要帮助调试 :-) 相反，我需要帮助理解混合 SEH 和 C++ 的含义，这似乎在这个论坛和其他论坛上产生的热量多于光。我的低声誉表明论坛的新奇，而不是 C++ 的新奇。我故意将我的应用程序抽象出来，以鼓励人们关注将 SEH 构造引入 C++ 程序的含义。好吧，那是行不通的 :-) 碰巧的是，我的应用程序有一个对象管道，如果我检测到它们中的损坏，我可以很容易地转储其中的任何一个。所以我的神奇`Recover()`功能并不像听起来那么神奇，而且很有可能腐败会限制在堆的一小部分。所以......回到问题：使用`__try/__except`可取吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:19:19.763

**做。不是。做。这个。**

我完全同意 Doug Harrison 在您的链接中的评论 - 使用 SEH 非常危险，因为您最终会在代码中隐藏（可能很严重）错误。

如果您对异常可能发生的位置有一个非常具体的想法，暂时将 SEH 块添加到您的代码中可能有助于跟踪它，但我怀疑情况并非如此 - 您的堆栈已损坏。

我建议不要将 SEH 块添加到程序的大部分中，因为它所做的只是以隐藏这些问题为代价使程序免于崩溃。您将隐藏崩溃，但您不会知道应用程序的状态是否已损坏（以及损坏程度）。如果损坏的数据保存在数据库中，您的客户将不会有太大帮助。

这是另一个[SEH 问题](https://stackoverflow.com/questions/2782915/what-should-i-know-about-structured-exceptions-seh-in-c)，我认为它可能对您有用。

与其尝试使用 SEH，不如使用您的时间和精力来尝试解决问题。使用 WinDbg（如果您从崩溃中获得了小型转储）可以加快速度。如果你不熟悉它，这里有一个[教程](http://windbg.info/doc/2-windbg-a-z.html)。

我不是 SEH 专家，因此其他人可能会给您更详细的建议，但我只会尝试将 SEH 解决方案作为非常非常最后的手段，因为可能会出现更难发现的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:20:27.480

问题是，当 SEH 被调用时，您的应用程序已经完全瘫痪了。 *任何*可以访问（不仅仅是使用）的 RAM`FunctionWhichMayCauseCrash`都必须被假定为已销毁，包括 CRT 在用户空间中完成的所有操作。真正要做的最好的事情是记录所有你能得到的东西——以一种完全依赖于内核函数的方式——中止整个进程，关闭它的所有 IPC 和共享句柄，并在它自己的中启动一个闪亮的新进程地址空间。

如果您真的想要在这种情况下进行细粒度的崩溃恢复，您可能需要重新构建一系列管道连接的进程或类似的进程。

# css - 同时转型和转型？

> ID：14699519
> 
> 赞同：-2
> 
> 时间：2013-02-05T03:04:32.550
> 
> 标签：css

我有一个与`<div>`一个`background-image`和一个`height`。`100px`我想让它在悬停时， div 将从 转换`100px`为`300px`。并且背景图像将过渡到`1s`两个属性的位置。

我的背景图像工作正常，当我将转换应用于 时`height`，`<div>`它可以工作，但背景图像停止工作；相反，它已经处于最终位置，没有过渡。

我能实现我想要做的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:04:13.057

这是我想出的答案[http://jsfiddle.net/m7hHg/](http://jsfiddle.net/m7hHg/)

```
div {
 background-image:url("http://www.whitegadget.com/attachments/pc-wallpapers/130360d1359002342-background-image-background-image-image-1024x768.jpg");/*Insert your image here*/
 width:100px;
 height:100px;
 -webkit-transition:all 1s;
 -moz-transition:all 1s;
 -o-transition:all 1s;
 -ms-transition:all 1s;
 transition:all 1s;
}
div:hover {
 background-position:-350px 0;
 width:300px;
 height:300px;
} 
```

您的代码的问题是您只指定了过渡的背景位置。通过使用`all`而不是`background-position`，您告诉 CSS 说“如果通过 , 等更改样式，则`hover`使用`active`过渡更改每个样式。” 您只需指定是否只希望对一个属性进行动画处理

# jquery - 创建一个简单的主干应用程序

> ID：14699520
> 
> 赞同：2
> 
> 时间：2013-02-05T03:04:52.713
> 
> 标签：jquery, backbone.js

我正在尝试通过将我的简单静态 Web 应用程序转换为单页 Backbone 应用程序来自学 Backbone.js。我的问题是我找不到一个简单的教程来解决我的问题。

我有以下功能：

```
function convert(ins) {
    var numbers = parseFloat(ins);
    //Test for NAN
    if(isNAN(numbers)){
        $("#output").html("Error");
    }else{
        var conver = (numbers * 12);
        $("#output").html(conver);
    }
} 
```

现在，当用户在字段中输入数据时会调用此函数。它会自动更新输出 div。我想要很多转换“应用程序”。当用户访问页面时，转换功能需要更新。我应该如何为我的每个页面制作模型？我想在转换函数中更改的唯一行是：

```
var conver = (numbers * 12); 
```

显然，我对骨干很陌生，这是我可以开始重新处理我的网站代码之前需要解决的最后一个问题。

我真的很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:11:05.757

由于从您发布的代码看来，所发生的一切都是基于某些用户交互的一些转换，因此似乎没有支持模型的普通[视图](http://backbonejs.org/#View)就足够了。如果您的转换函数依赖于某些特定数据（例如来自您的服务器的一些公式），那么可能需要一个[模型](http://backbonejs.org/#Model)，但根据您发布的内容，我并不认为有必要。

例如，假设您的标记类似于以下内容

```
 <div id="divConversionCalc">
    <label for="txtInputNum">Enter inches</label> <input type="number" id="txtInches" />
    <label>Feet</label> <div id="dvOutput"></div>

  </div> 
```

您可以声明一个backbone.js 视图来封装您的函数，如下所示

```
 var ConversionView = Backbone.View.extend({
        el: '#divConversionCalc',

        events: {
            "change #txtInches": "convert"
        },

        convert: function (e) {
            var numbers = parseFloat(this.$el.find('#txtInches').val());
            if (isNaN(numbers)) {
                this.$el.find("#dvOutput").html("Error");
            } else {
                var conver = (numbers * 12);
                this.$el.find("#dvOutput").html(conver);
            }

        }

    });

    $(function () {
        new ConversionView();
    }); 
```

[JSBin](http://jsbin.com/otexot/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:07:02.067

在没有看到其余代码的情况下，您的问题似乎是它`ins`是一个字符串，并且您不能将字符串与 Javascript 中的数字相乘。如果您将其更改为，您可能会很好`numbers * 12`。

# android - 如何在 Android 中的 2 个 RadioGroup 之间切换？

> ID：14699521
> 
> 赞同：1
> 
> 时间：2013-02-05T03:05:10.190
> 
> 标签：android

我有 2 个单选组，每个单选组包含 2 个单选按钮。我试图在这两组之间切换，但到目前为止没有成功。任何帮助，将不胜感激。

* * *

```
 myGroup2 = (RadioGroup) findViewById(R.id.radioGroup2);
        myGroup3 = (RadioGroup) findViewById(R.id.radioGroup3);
        myGroup3.clearCheck();
        myGroup2.clearCheck();

        myGroup2.setOnCheckedChangeListener(this);
        myGroup3.setOnCheckedChangeListener(this);

myGroup2.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
            // @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) {

                    myGroup3.clearCheck();
            }
        });
    myGroup3.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) {

                    myGroup2.clearCheck();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T03:20:01.740

在此处检查 API：

[http://developer.android.com/reference/android/widget/RadioGroup.OnCheckedChangeListener.html](http://developer.android.com/reference/android/widget/RadioGroup.OnCheckedChangeListener.html)

编辑：

不高兴花了多长时间，但我想通了。结果 onCheckedChanged 仅在组已清除时为 checkedId 传递 -1。如果一个框刚刚被取消选中，它的 ID 仍然被传递。

你可以这样做：

```
 myGroup2.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener(){
        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            if(checkedId != -1 &&
                ((RadioButton) findViewById(checkedId)).isChecked()){
                myGroup3.clearCheck();
            }
        }
    });
    myGroup3.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener(){
        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
                if(checkedId != -1 &&
                        ((RadioButton) findViewById(checkedId)).isChecked()){
                    myGroup2.clearCheck();
                }
        }
    }); 
```

或者，可能更明智一点，让活动实现侦听器，这部分在 onCreate 方法之外：

```
@Override
public void onCheckedChanged(RadioGroup group, int checkedId) {
    if(checkedId != -1 && ((RadioButton) findViewById(checkedId)).isChecked()){
        if(group == myGroup2){
            myGroup3.clearCheck();
        }
        else if(group == myGroup3){
            myGroup2.clearCheck();
        }
        // And your switch for whatever you want to happen based on the
        // selected button goes here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:55:28.027

这是我想出的解决方案。

```
radioGroup1 = (RadioGroup) findViewById(R.id.radioGroup1);
    radioGroup2 = (RadioGroup) findViewById(R.id.radioGroup2);
    RadioButton[] tempradbutton1 = {
            (RadioButton) findViewById(R.id.radio1),
            (RadioButton) findViewById(R.id.radio2) };
    RadioButton[] tempradbutton2 = {
            (RadioButton) findViewById(R.id.radio4),
            (RadioButton) findViewById(R.id.radio5) };
    radbutton1 = tempradbutton1;
    radbutton2 = tempradbutton2;
    for (int i = 0; i < radbutton1.length; i++) {
        radbutton1[i].setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                radioGroup2.clearCheck();
            }
        });
        radbutton2[i].setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                radioGroup1.clearCheck();

            }
        });
    } 
```

与其使用**setOnCheckedChangeListener**，不如对 radiogroup 上存在的每个单选按钮使用**onClickListener**。

XML:

```
<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >
    <RadioButton
        android:id="@+id/radio1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="RadioButton" />

    <RadioButton
        android:id="@+id/radio2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="RadioButton" />
</RadioGroup>

<RadioGroup
    android:id="@+id/radioGroup2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/radioGroup1" >
    <RadioButton
        android:id="@+id/radio4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="RadioButton" />

    <RadioButton
        android:id="@+id/radio5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="RadioButton" />
</RadioGroup> 
```

# css - 使用 CSS 样式化表单

> ID：14699524
> 
> 赞同：0
> 
> 时间：2013-02-05T03:05:51.943
> 
> 标签：css, html, forms

我正在尝试在我正在使用 CSS 设计的网站上设置表单样式。我试图调整标签的宽度并没有改变它。这是我的代码： ﻿</p>

```
<h3>Contact Form</h3>
<div>
    <label for="form1_name">Name</label>
    <input id="form1_name" name="name" type="text" required="required" />

</div>

<div>
    <label for="form1_email">Email</label>
    <input id="form1_email" name="email" type="email" placeholder="you@company.com" required="required" />

</div>

<div>
    <label for="form1_email">Telephone</label>
    <input id="form1_telephone" name="telephone" type="text" />
    </div>

<div>
    <label for="form1_message">Comment</label>
    <textarea id="form1_message" name="message" cols="30" rows="4" required="required"></textarea>

</div>

<div>
    <input id="form1_submit" name="submit" value="Send" type="submit" /><input type="hidden" name="cms-form" value="Y29udGFjdDpwZXJjaF9mb3JtczovdGVtcGxhdGVzL2NvbnRlbnQvY29udGFjdC5odG1s" />
</div>

</form></div> 
```

这是我的 CSS：#contact label { width:200px !important; }

然而，这并没有改变我标签的宽度。我究竟做错了什么？这是该页面的链接：[http ://ridgesideredangus.com/about.php](http://ridgesideredangus.com/about.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T03:07:35.217

```
#contact label {display: inline-block; width: 200px;} 
```

默认情况下，标签是内联元素。除非将维度设置为块或内联块，否则您无法添加维度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:29:22.380

作为替代方案，`divs`完全放弃。制作标签块并将表单元素嵌套在其中。将标签设置为相对位置，以便您可以相对于它们定位表单元素。

**HTML**

```
<label >Name<input id="form1_name" name="name" type="text" required="required" /></label>

<label >Email<input id="form1_email" name="email" type="email" placeholder="you@company.com" required="required" /></label>

<label >Telephone<input id="form1_telephone" name="telephone" type="text" /></label> 
```

**CSS**

```
label {display:block;position:relative;padding:5px;}
label input {position:absolute; left:100px;} 
```

[例子](http://jsfiddle.net/y5eQf/)

**然而，** [有些人认为](http://reference.sitepoint.com/html/label/for)最好明确地`label`将`input`

# r - R dopar：只为第一个索引做结果

> ID：14699530
> 
> 赞同：1
> 
> 时间：2013-02-05T03:06:24.483
> 
> 标签：r, foreach, parallel-processing

想请教高手，下面的代码可能有什么问题：

```
resultOptimization <- foreach(i = 1:length(varietyNames) , .combine = rbind, .init = resultOptimization) %dopar% {
    variety <- varietyNames[i]

  subsetVarietyNames <<- subset(observedValues, Variety == variety)
  rowNumberOfObservedValues <<- nrow(subsetVarietyNames)

  inputTrait <<- subsetVarietyNames[,c("Site", "Latitude", "Longitude", "Altitude", "Flooding", 
                                       "Transplanting", "DDTransplantingShock", "Z", "LAIMax", 
                                       "POP", "PLAini", "LRGRMax", "SowingDate")]

  resultOptimTrait <- genoud(fn = minimizationFunction, nvars = numberOfParametersToBeEstimated, max = FALSE,
                             Domains = optimizedParametersBounds, pop.size = 2, max.generations = 2, 
                             wait.generations = 2, hard.generation.limit = TRUE, MemoryMatrix = TRUE, 
                             starting.values = NULL, default.domains = 10, solution.tolerance = 0.001, 
                             gr = NULL, boundary.enforcement = 0, lexical = FALSE, gradient.check = TRUE, 
                             BFGS = FALSE, data.type.int = FALSE, hessian = TRUE, unif.seed = 812821, 
                             int.seed = 53058, extra_arg = fMeteo)

  estimatedParameters <- resultOptimTrait$par
  sumOfErrors <- resultOptimTrait$value

  #In case of abrupt system failure, save preliminary results 
  capture.output(c(variety, estimatedParameters, sumOfErrors),file = "PRE_optim_values.txt",append = (if(i==1) {FALSE} else{ TRUE}))

  resultLine <- c(variety, estimatedParameters, sumOfErrors)

} 
```

我在做什么：

我正在尝试优化几种植物的参数，第一个循环应该得到品种 1 - N 的优化参数，第二个循环将使用优化的参数打印出模拟值。上面的代码是我对使其并行化以加快处理速度的看法，第一个 for 循环一次接收与服务器上的内核一样多的 Varieties。

预期输出：

存储在“resultOptimization”列表中的优化参数

我得到什么：

```
resultOptimization[1] = V1
resultOptimization[2] = V1
resultOptimization[3] = V1 
```

等等，什么时候应该

```
resultOptimization[1] = V1
resultOptimization[2] = V2
resultOptimization[3] = V3 
```

问题是这样的：

当我按顺序运行这个循环时，它会产生正确的结果——每个品种的优化参数（使用 rgenoud），但是当我像上面的代码块中那样并行化它时，输出似乎只是一遍又一遍地重复的第一个品种;

这很奇怪，因为我 100% 确定在每次 genoud() 调用之前加载了正确的值，并且程序的顺序版本可以正常工作。有谁熟悉这个问题？

另外，当我说顺序时，我的意思是 1 core，当我使用 >1 core 时出现问题，两个版本我都使用了上面的代码块

# github - 如何像云共享一样使用github

> ID：14699537
> 
> 赞同：2
> 
> 时间：2013-02-05T03:07:05.390
> 
> 标签：github, repository

我对 github 很陌生，我真的很喜欢它。现在我创建了一个存储库。假设其他人分叉了我的存储库。现在假设如果我在我的存储库中提交了一些更改，那么我希望这些更改也应该转到派生我的存储库的那个人存储库。但是我不想每次在我的存储库中进行一些提交时都向其他人的存储库提出拉取请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:41:40.413

正如已经评论过的那样，对于您的情况，最好只在同一个 repo 上工作，而不是分叉。您可以通过让一个用户创建一个 repo 来做到这一点，然后他们可以添加一个 [**协作者**](https://help.github.com/en/articles/inviting-collaborators-to-a-personal-repository)

*   访问存储库的页面
*   点击设置按钮

[![设置](../Images/8e928d6b071dbbaaa9e6e1a0347d13c5.png)](https://i.stack.imgur.com/iltt3.png)

*   单击协作者选项卡

[合作 http://github-images.s3.amazonaws.com/help/repo-settings-collaborators.png](http://github-images.s3.amazonaws.com/help/repo-settings-collaborators.png)

*   输入用户登录名或电子邮件的一部分
*   从下拉列表中选择用户
*   点击添加

完成这一切后，您可以通过克隆创建本地副本

```
git clone git@github.com:stedolan/jq.git 
```

# c - 在头文件中声明结构

> ID：14699538
> 
> 赞同：9
> 
> 时间：2013-02-05T03:07:14.930
> 
> 标签：c, struct, header-files

我想在头文件中声明一个结构，以便可以在源文件中使用它。我究竟做错了什么？我希望能够从任何函数访问我的结构。

信息.h

```
#ifndef INFO_H
#define INFO_H

typedef struct info
{
   int mem_size;
   int start_loc;
   int used_space;
   int free_space;
} INFO;
#endif 
```

测试.c

```
#include <stdio.h>
#include <stdlib.h>
#include <info.h>

#define F_first 1
#define F_last 2
#define F_data_int 3
#define F_data_char 4
#define F_data_float 5
#define F_print 6

void * f(int code);

int main() {

INFO in;
in.mem_size = 8;
f(F_last, 0,0);
return(0);
}

void * f(int code) {
printf("%d", in.mem_size);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T03:13:27.567

代替：

```
#include <info.h> 
```

和，

```
#include "info.h" 
```

使用`<>`编译器仅在预先指定的头文件夹中搜索头文件。这用于标准库头文件。
编译器首先在`""`.c 文件所在的本地目录中搜索头文件。这用于用户定义的头文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:01:58.640

是的...您必须使用`#include "info.h"`而不是`#include <info.h">`基于自定义的标题。通常它们不是系统分支的一部分，系统分支通常位于`/usr/include`Unix/Linux 平台上的目录中。

# html - 将间隔列添加到 HTML 表格

> ID：14699545
> 
> 赞同：4
> 
> 时间：2013-02-05T03:07:46.017
> 
> 标签：html, css, html-table

我需要在一个长的 13 列表中布局数据。但它需要看起来像两个表，在第 10 列和第 11 列之间有一些空间。在 HTML 中是如何完成的？我的第一个想法是一个 14 列的表，第 11 列占用空间但不可见。不过，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T03:14:36.140

如果您不希望有空的表格单元格，这对于视障人士来说可能很奇怪，试试这个。

```
<style type="text/css">
    td {display: inline-block;}    
    td.spaced {margin-left: 20px;}
</style>
<table>
    <tr>
        <td>One</td>
        <td>Two</td>
        <td class="spaced">Three</td>
    </tr>
</table> 
```

[http://jsfiddle.net/eS3QE/](http://jsfiddle.net/eS3QE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:11:55.220

我认为这更像是一个 CSS 问题，但可以使用`:nth-child`. 创建空表格单元格作为第 11 列并使用：

```
td:nth-child(11) {
    border: 0;
} 
```

[http://jsfiddle.net/ExplosionPIlls/rZYRd/](http://jsfiddle.net/ExplosionPIlls/rZYRd/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-05T03:20:24.840

试试这个例子，看看它是否符合您的喜好...... 5 列，第 2 列和第 4 列之间有一个垫片。它可以改进，但我认为它具有您所追求的外观。

```
<html>
<table cols=5 style='border:thin solid blue'>
<tr>
<th style='border:thin solid blue'>Col 1</th>
<th style='border:thin solid blue'>Col 2</th>
<th>&nbsp</th>
<th style='border:thin solid blue'>Col 3</th>
<th style='border:thin solid blue'>Col 4</th>
</tr>
<tr>
<td style='border:thin solid blue'>Col 1A</th>
<td style='border:thin solid blue'>Col 1B</th>
<td>&nbsp</th>
<td style='border:thin solid blue'>Col 1D</th>
<td style='border:thin solid blue'>Cell 1E</th>
</tr>
</table>
</html> 
```

# html - 如何摆脱 Firefox 中 Text 和 TextArea 的顶部黑色边框？

> ID：14699558
> 
> 赞同：0
> 
> 时间：2013-02-05T03:09:43.727
> 
> 标签：html, css

如果您查看：[texasbruce.com/notes](http://texasbruce.com/notes)

您会注意到顶部有黑色边框。

我已经将它设置`border-color`为蓝色，`outline: none`但它仍然存在。我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:14:31.847

`border-style:solid;`应该用来确保它不会做一些奇怪的事情。

这都可以通过一条规则来完成`border: 1px solid blue;`

但也正如上面评论中提到的那样，这`box-shadow`可能会产生更暗边框的错觉。

# ruby - 匹配由三个大写字母限定的小写字母

> ID：14699559
> 
> 赞同：0
> 
> 时间：2013-02-05T03:09:50.663
> 
> 标签：ruby, regex

我试图找到每边恰好被三个大写字符包围的小写字符的所有实例。然后我想打印这种模式的每次出现。这是python挑战中的一个挑战。这是我所拥有的：

```
contents = "XXXiXXXjXXX"
contents.scan(/[^A-Z]*[A-Z]{3}[a-z][A-Z]{3}[^A-Z]*/) { |i| print i[3] } 
```

它只`"i"`在应该打印的时候打印`"ij"`。我的正则表达式有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:35:38.837

有几件事是错误的，解释什么是错误的是不切实际的。

如果您不需要使用单个正则表达式，这是一种简单的方法：

```
puts " #{contents} ".split(/[A-Z]{3}/).&(("a".."z").to_a).join 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:13:30.223

2 件事。

*   你`[^A-Z]*`什么都不做
*   扫描指针第一次超过完全匹配，这就是它不会拾取“j”的原因。

一个有点复杂的环视解决方案：

```
re = /
  (?<=[A-Z]{3}) # 3 uppers behind
  (?<![A-Z]{4}) # but not 4
  [a-z] # one lower
  (?=[A-Z]{3}) # 3 uppers ahead
  (?![A-Z]{4}) # but not 4
/x

'XXXiXXXjXXX'.scan re
#=> ["i", "j"] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T03:15:46.483

如果您删除导致它不匹配的前/后标准，则正则表达式有效。然后，您应该围绕要提取的值添加括号作为捕获组，如下所示：

```
match = contents.match(/[A-Z]{3}([a-z])[A-Z]{3}/)
match[1] if match 
```

# excel - 使用excel根据字符拆分字符串（101500810100015835001000）

> ID：14699560
> 
> 赞同：0
> 
> 时间：2013-02-05T03:09:50.690
> 
> 标签：excel

我如何使用 excel 或任何其他更简单的语言来实现这一点？

```
original data:
100301010100019743024000 

after formatting:
100,3010,1,01,000,1974,3024,000 

Segment 1 = 3 char
Segment 2 = 4 char
Segment 3 = 1 char
Segment 4 = 2 char
Segment 5 = 3 char
Segment 6 = 4 char
Segment 7 = 4 char
Segment 8 = 3 char 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:11:42.727

VBA 具有`left()`和功能[正是为此](http://support.microsoft.com/kb/213646)`right()`目的。`mid()`

执行此操作的函数如下所示：

```
Function FmtStr (MyStr As String) As String
    If Len (MyStr) <> 24 Then
        FmtStr = "?"
    Else
        FmtStr = _
            Mid (MyStr,  1, 3) + "," + _
            Mid (MyStr,  4, 4) + "," + _
            Mid (MyStr,  8, 1) + "," + _
            Mid (MyStr,  9, 2) + "," + _
            Mid (MyStr, 11, 3) + "," + _
            Mid (MyStr, 14, 4) + "," + _
            Mid (MyStr, 18, 4) + "," + _
            Mid (MyStr, 22, 3)
    End If
End Function 
```

调用它：

```
MsgBox (FmtStr("100301010100019743024000")) 
```

给你一个对话框，因此：

![在此处输入图像描述](../Images/033d0afc4845cb20213b98e39abac3c1.png)

如果您只想在 Excel 公式中使用它，您可以使用：

```
=concatenate(mid(a1,1,3), ",", mid(a1,4,4), ",", ... ",", mid(a1,22,3)) 
```

（假设原始字符串当然在`A1`单元格中）。

# c++ - 使用 msbuild 确保 C++ 项目在 .NET 项目之前构建

> ID：14699561
> 
> 赞同：0
> 
> 时间：2013-02-05T03:09:52.233
> 
> 标签：c++, .net, msbuild

我有一个非托管 C++ 项目，我需要将其输出复制到 .NET 项目的输出文件夹中。

Visual Studio 2010 不允许我将 C++ 项目添加为项目引用，因为它没有创建托管程序集。

我尝试手动将以下内容添加到 .csproj 文件中，但它似乎不起作用（例如，在运行 msbuild 时，首先构建 .NET 项目）

```
<ItemGroup>
    <ProjectReference Include="pathtoproject\unmanaged.vcxproj">
        <ReferenceOutputAssembly>false</ReferenceOutputAssembly>
        <Private>False</Private>
    </ProjectReference>
</ItemGroup> 
```

如何强制此构建依赖项与命令行构建一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:03:24.747

所以事实证明我在问题中给出的例子实际上是正确的。这将导致 C++ 项目首先构建。

我的问题是我试图连接到 .NET 项目中的 MSBuild 目标，然后复制 C++ dll，而我在该项目的构建周期中这样做得太早了（我正在连接到 BeforeBuild）。使用“BeforeCompile”目标似乎在​​构建周期中已经足够晚了，它可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:28:33.893

将这两个项目添加到解决方案并使用项目依赖项确保首先构建非托管项目。您可以从命令行构建解决方案。

![项目依赖对话框](../Images/d3c1258a0195d4308b27c88c73f92201.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T03:32:55.943

我相信您的问题可能已在此线程中得到解答：

[如何添加对由 C# 项目调用的非托管 C++ 项目的引用？](https://stackoverflow.com/questions/5107694/how-do-i-add-a-reference-to-an-unmanaged-c-project-called-by-a-c-sharp-project)

看看 SLaks 的回答

# sql-server - 在 ruby on rails 中使用 MS-SQL 十进制字段显示错误的十进制数

> ID：14699563
> 
> 赞同：2
> 
> 时间：2013-02-05T03:09:57.860
> 
> 标签：sql-server, ruby-on-rails-3, activerecord

我正在使用 MS SQL 2005 数据库进行 RoR 项目。在数据库中，我有一个名为“设备”的表，其中有一个名为“std_unit”的字段，定义为数据类型小数（18,2）。

一个奇怪的行为是，即使我在该字段 2-decimal-place 中存储了一个值，但是，由于我的 ruby​​ 代码，它在小数点后显示了太多的十进制数字。以下示例显示了它存储在其中时的样子，我通过 SQL Management Studio 进行了查找。

```
 e.g (how it looks when stored in the database)

        std_unit
        ========
        11.11

schema definition in Rails 

        schema.rb
        ----------
        t.decimal  "std_unit",      :precision => 18, :scale => 2 
```

当我提取数据以呈现在 Rails 视图中时，我得到的是相同的数字，小数点后的数字太多。

```
Then I retrieve that value via the following line of code thru active_record.

eq.std_unit

standard unit   11.1099853515625 
```

我的配置可能有什么问题吗？以及如何摆脱它？

任何建议将不胜感激。

# c++ - 如何使用特征库计算曼哈顿距离？

> ID：14699567
> 
> 赞同：4
> 
> 时间：2013-02-05T03:10:48.450
> 
> 标签：c++, eigen

我有两个向量

```
int main(int argc, char *argv())
{
.........
Vector3f center(0.4,0.1,0.3) ;
Vector3f point(0.1,0.2,0.7);
.......
} 
```

如何使用特征库计算曼哈顿距离？我正在使用VS2010。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T03:21:41.503

只要您知道曼哈顿距离是多少，这并不难（尽管我以前没有见过用于 3D 向量的术语）——只需查看 Eigen API 文档中的相关函数，您就会发现以下作品：

```
Vector3f center(0.4,0.1,0.3) ;
Vector3f point(0.1,0.2,0.7);
Vector3f diff = center - point;
float manh_dist = diff.cwiseAbs().sum(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T11:05:11.260

另一种方法是观察曼哈顿距离对应于可以使用通用 lpNorm 方法获得的 L1 范数：

```
manh_dist = (center-point).lpNorm<1>(); 
```

请参阅此[页面](http://eigen.tuxfamily.org/dox-devel/classEigen_1_1MatrixBase.html#a1f78d41c2ab7389e3df08384371188bf)以供参考。

# linux - 如何将此 bash 命令行重写为 zsh？

> ID：14699570
> 
> 赞同：-1
> 
> 时间：2013-02-05T03:11:03.247
> 
> 标签：linux, bash, command-line, zsh

我需要输入这个命令。它是用 写的`bash`，但我的终端是`zsh`。我该如何重写它？

```
ssh username@rserver.com -L 127.0.0.1:8888:*:11111 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:14:00.343

这些只是 的论据`ssh`，它们并不`bash`具体。不过，您可能想逃避您的 glob（尽管这也是如此`bash`）。

```
ssh username@rserver.com -L 127.0.0.1:8888:\*:11111 
```

# actionscript-3 - 如何在 flashpunk 中创建一组精灵？

> ID：14699571
> 
> 赞同：1
> 
> 时间：2013-02-05T03:11:06.703
> 
> 标签：actionscript-3, flash

如何在 Flashpunk 中创建具有多个精灵的组或图层？有内置的类吗？如果没有，建议扩展哪个类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:15:49.350

您可以通过图形列表将多个图形分配给实体/层：

```
layer = -1;
var display:Graphiclist = new Graphiclist(buttonBackround,label,etc);
graphic = display; 
```

您还可以使用在世界中添加图形列表

```
addGraphic(display,layerHere); 
```

只需确保按照您希望它们在该层中呈现的顺序列出项目，例如标签之前的按钮图像。

希望有帮助！

# php - 如何在选择选项中制作动态年份

> ID：14699579
> 
> 赞同：0
> 
> 时间：2013-02-05T03:12:00.590
> 
> 标签：php

请帮助我如何在选择选项中做出动态的一年。这是我的代码，这个给了我分开年份的结果。我怎么能在一个选择选项中做出结果？

```
 $yrnw = date("Y");
 $lyr = 1;
$lstyr = $yrnw - $lyr ;
$sy = 10 + $yrnw;

 for($i=$yrnw; $i<$sy ; $i++){
$lst = $i -1;                   
echo "<tr><td>SY:</td></tr><tr><td><select name= 'sy'>
<option value=''>$lst-$i<br/></option>
"; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T03:14:13.583

将`echo "<tr><td>SY:</td></tr><tr><td><select name= 'sy'>`to 移到循环之前*。*`for`

```
echo "<tr><td>SY:</td></tr><tr><td><select name= 'sy'>";
for ($i=$yrnw; $i<$sy ; $i++) {
    $lst = $i -1;                   
    echo "<option value=''>$lst-$i<br/></option>";
} 
 echo "</select></td></tr>"; 
```

# tfs - 将 Wix 项目添加到 VS2010 解决方案后，来自 TFS 的 msbuild 错误 MSB1025

> ID：14699581
> 
> 赞同：1
> 
> 时间：2013-02-05T03:12:25.817
> 
> 标签：tfs, msbuild, wix

我们有许多 Windows 服务安装程序移至 Wix 3.7，我们的 TFS 构建现在因错误而中断：

```
MSBUILD : error MSB1025: An internal failure occurred while running MSBuild.
System.InvalidOperationException: Cannot dispose the build manager because it is not idle.
at Microsoft.Build.Shared.ErrorUtilities.ThrowInvalidOperation(String resourceName, Object[] args)
at Microsoft.Build.Execution.BuildManager.Dispose(Boolean disposing)
at Microsoft.Build.Execution.BuildManager.Dispose()
at Microsoft.Build.CommandLine.MSBuildApp.BuildProject(String projectFile, String[] targets, String toolsVersion, Dictionary`2 globalProperties, ILogger[] loggers, LoggerVerbosity verbosity, DistributedLoggerRecord[] distributedLoggerRecords, Boolean needToValidateProject, String schemaFile, Int32 cpuCount, Boolean enableNodeReuse, TextWriter preprocessWriter, Boolean debugger, Boolean detailedSummary)
at Microsoft.Build.CommandLine.MSBuildApp.Execute(String commandLine) 
```

此错误发生在所有 MSI 已成功构建并复制到放置文件夹后，表明任务或目标本身没有问题，只是构建管理器无法处理。网络搜索显示[的信息很少](http://connect.microsoft.com/VisualStudio/feedback/details/696687/msbuild-4-0-30319-17020-crashes-when-running-wix-heat-task)。

这指向构建管理器引用争用，这似乎是 - 尽管应用解决方法环境变量没有效果。

在他们的环境中从 vdproj 过渡到 WiX 期间，是否有其他人经历过这种情况？还有人对从 TFS/msbuild 中获取有关错误的更多详细信息有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:53:44.270

这是由于 Visual Studio 将“混合平台”配置添加到每个添加的 Wix 项目的解决方案中造成的。在添加后手动将其从解决方案文件中删除似乎可以解决问题，msbuild 不再中断。

# java - 是否有与 Java 的 FixedThreadPool 等效的 Python 库？

> ID：14699586
> 
> 赞同：3
> 
> 时间：2013-02-05T03:13:42.503
> 
> 标签：java, python, multithreading, threadpool

Python 中是否有一个简单的 ThreadPool 库，它具有例如 pool.execute(function, args) 方法，当池已满（直到其中一个线程空闲）时应该阻塞该方法？

我曾尝试使用多处理包中的 ThreadPool，但它的 pool.apply_async() 函数在池已满时不会阻塞。实际上，我根本不明白它的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:52:44.400

这个[ActiveState Code Recipes 页面](http://code.activestate.com/recipes/577187-python-thread-pool)有一个基于[Python 队列](http://docs.python.org/2/library/queue.html)的实现来进行阻塞。`add_task`在你想用的地方使用`execute`。

```
## {{{ http://code.activestate.com/recipes/577187/ (r9)
from Queue import Queue
from threading import Thread

class Worker(Thread):
    """Thread executing tasks from a given tasks queue"""
    def __init__(self, tasks):
        Thread.__init__(self)
        self.tasks = tasks
        self.daemon = True
        self.start()

    def run(self):
        while True:
            func, args, kargs = self.tasks.get()
            try: func(*args, **kargs)
            except Exception, e: print e
            self.tasks.task_done()

class ThreadPool:
    """Pool of threads consuming tasks from a queue"""
    def __init__(self, num_threads):
        self.tasks = Queue(num_threads)
        for _ in range(num_threads): Worker(self.tasks)

    def add_task(self, func, *args, **kargs):
        """Add a task to the queue"""
        self.tasks.put((func, args, kargs))

    def wait_completion(self):
        """Wait for completion of all the tasks in the queue"""
        self.tasks.join()

if __name__ == '__main__':
    from random import randrange
    delays = [randrange(1, 10) for i in range(100)]

    from time import sleep
    def wait_delay(d):
        print 'sleeping for (%d)sec' % d
        sleep(d)

    # 1) Init a Thread pool with the desired number of threads
    pool = ThreadPool(20)

    for i, d in enumerate(delays):
        # print the percentage of tasks placed in the queue
        print '%.2f%c' % ((float(i)/float(len(delays)))*100.0,'%')

        # 2) Add the task to the queue
        pool.add_task(wait_delay, d)

    # 3) Wait for completion
    pool.wait_completion()
## end of http://code.activestate.com/recipes/577187/ }}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T14:52:27.140

我修改了@ckhan 答案并添加了回调功能。

```
#Custom ThreadPool implementation from http://code.activestate.com/recipes/577187/
# Usage:
#       def worker_method(data):
#           ''' do processing '''
#           return data
#           
#       def on_complete_callback(data, isfailed):
#           print ('on complete %s' % data)
#           
#       pool = ThreadPool(5)
#       for data in range(1,10)
#           pool.add_task(worker_method, on_complete_callback, data)    
#       pool.wait_completion()

from Queue import Queue
from threading import Thread
import thread

class Worker(Thread):
    """Thread executing tasks from a given tasks queue"""
    def __init__(self, tasks, thread_id):
        Thread.__init__(self)
        self.tasks = tasks
        self.daemon = True
        self.start()
        self.thread_id = thread_id

    def run(self):
        while True:
            func, callback, args, kargs = self.tasks.get()
            try:
                data = func(*args, **kargs)
                callback(data, False)
            except Exception, e:                
                callback(e, True)
            self.tasks.task_done()

class ThreadPool:
    """Pool of threads consuming tasks from a queue"""
    def __init__(self, num_threads):
        self.tasks = Queue(num_threads)
        for i in range(num_threads): Worker(self.tasks, i)

    def add_task(self, func, callback, *args, **kargs):
        """Add a task to the queue"""
        self.tasks.put((func, callback, args, kargs))

    def wait_completion(self):
        """Wait for completion of all the tasks in the queue"""
        self.tasks.join() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T05:47:30.177

```
from multiprocessing.pool import ThreadPool 
```

# f# - 在 TickSpec 中使用 AfterScenario

> ID：14699590
> 
> 赞同：1
> 
> 时间：2013-02-05T03:13:47.777
> 
> 标签：f#, gherkin

我有一个像这样的功能文件：

```
Feature: Viewing revenue

Background:
Given invoices
| Date     | Amount |
| 1/1/2010 | 200    |
| 1/1/2011 | 300    |

Scenario: Total revenue
Then the total revenue is
| Label | Revenue |
|       | $500    |

Scenario: Total revenue by year
When I choose to view it by "Year"
Then the total revenue is
| Label | Revenue |
| 2010  | $200    |
| 2011  | $300    | 
```

我想在每个场景执行后运行一些清理代码。我有一个用 AfterScenario 属性装饰的函数，如下所示：

```
let [<AfterScenario>] ``Drop Invoices`` () =
  Invoices.removeAll 
```

该函数确实被调用，但只有一次，并且只有当我通过 NUnit 的 gui 运行器重新加载项目时。测试的后续运行，不重新加载项目，不调用该函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T05:29:51.667

调用`Invoices.removeAll`似乎缺少参数，您可能需要添加[()](http://msdn.microsoft.com/en-us/library/dd483472.aspx)。

[TickSpec](http://tickspec.codeplex.com/)期望属性方法返回单位，因此您可能需要通过管道将结果忽略。您可以通过将`Drop Invoices`鼠标悬停在它上面来检查函数的类型，它应该说 unit -> unit，如果它没有尝试这个：

```
let [<AfterScenario>] ``Drop Invoices`` () =
  Invoices.removeAll () |> ignore 
```

在 2012 年 11 月版本的 TickSpec 之前存在一个[问题](http://tickspec.codeplex.com/SourceControl/changeset/234cb04f8b3d)，如果在场景中执行步骤时引发异常，则不会调用 AfterStep 和 AfterScenario 函数。这已在最新的源代码中修复，并且该程序集可通过[CodePlex](http://tickspec.codeplex.com/releases/view/98432)或[Nuget 获得](http://nuget.org/packages/TickSpec)。

如果您有多个标记为 AfterScenario 的函数并且其中任何一个引发异常，则后续的 AfterScenario 方法将不会被调用。理想情况下，您的 BeforeSceanrio 和 AfterScenario 函数不应抛出。

# php - 重定向在php中不起作用，使用标头

> ID：14699591
> 
> 赞同：0
> 
> 时间：2013-02-05T03:13:50.093
> 
> 标签：php, redirect

我想知道为什么这没有将我重新定位到联系页面？

```
 <?php session_start(); ?>

    <?php

    function setSessions($page){
        switch($page)
        {
            case "contact":
                $_SESSION['contact_name'] = $_GET['name'];
                $_SESSION['contact_address'] = $_GET['address'];
                $_SESSION['contact_phone'] = $_GET['phone'];
                header('Location:contact.php');
                exit;
                break;
            case "employment":
                break;
            case "position":
                break;
            default:
                break;
        }

    }

    $current_page = $_REQUEST['page'];
    setSessions($current_page);

    ?> 
```

我很肯定它会在接触案例中进行。谢谢您的帮助

-编辑：NVM，它有效。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:16:33.920

在调用`header()`.

您必须删除：

```
<html> 
```

和

```
echo "i got in here"; 
```

参考：

*   [http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

    `Remember that header() must be called before any actual output is sent, either by normal HTML tags, blank lines in a file, or from PHP.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:29:43.360

以供将来参考，在调用标头之前的白色 html 空间也将阻止它工作。（第 2 行和第 3 行）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T03:15:44.340

这就是为什么：

```
 <html> 
```

如果您向浏览器输出了任何内容，则不能调用 header()。将重定向代码移到此 html 标记上方并删除该回显，您应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T03:35:37.320

问题是您没有得到正确的值`$current_page`; 您可以回显该值，您会看到它是空的。所以你需要做的是你应该使用这个函数在这里获取当前页面值：

```
function getMyurl(){

  $url = (!empty($_SERVER['HTTPS'])) ? "https://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'] : "http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];

  echo $url;

}

now $current_page=getMyurl(); 
```

您应该知道 getMyurl 将返回您网站或应用程序的完整 url，因此您应该在书面联系的情况下对其进行修改，您应该将其替换为“yourwebsite/contact”。

它现在应该适合你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T03:16:32.510

在使用 header() 之前，你不能有任何输出。您的 switch 语句中的 echo 语句被认为是输出，并且会弄乱您的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T03:16:47.997

任何发射都会在 PHP 中发送标头，一旦您发送了标头，您将无法再发送。甚至空格也会这样做，但您会`<html>`输出字符串。你不能那样做。

更好的解决方案是在构建完要输出的所有内容之前不要执行此操作并保存所有排放。

更糟糕的解决方案是使用输出缓冲。在脚本的开头，但是，`ob_start()`. 然后，标题将正常工作。

# java - 如何从另一个网站获取字段名称和值？

> ID：14699593
> 
> 赞同：1
> 
> 时间：2013-02-05T03:14:01.537
> 
> 标签：java, screen-scraping

我在 Java 中遇到了一些问题。我正在尝试获取一个随机命名的输入名称及其值，以及其他一些输入。

我需要从中获取值的页面源如下所示：

```
<form action="/login/" id="memberloginForm" method="post">
        <input name="sid" value="8f324234fds330248j4328" type="hidden" />
        <input data-value="1360027648" type="hidden" name="token" value="b482b673cffd5123345fbb21c7fec05" />
        <input name="redirect" type="hidden" value="" />
        <input type="hidden" name="snvlusskh" value="38c546d1302f025f44f9024dc234bac0" /> 
```

其中“sid”的值、“token”的数据值和值、最后一次输入的名称和值都是在每次访问页面时完全随机化的。我已经尝试研究 JSoup HTML Parser 库来解决这个问题，但无法弄清楚我如何能够获取每个输入的名称，然后将正确的值与之配对。

我需要做的是获取这些字段的所有名称和值，以便我可以在自己的程序中使用它们。该网站需要这些值才能登录，而我的程序需要能够登录该网站。

感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:45:14.087

使用[HtmlUnit 库](http://htmlunit.sourceforge.net/gettingStarted.html)。一旦您按照提供的示例下载并解析页面，您就可以像这样提取表单输入：

```
HtmlForm form = (HtmlForm) HtmlPage.getElementById("memberloginForm");
String sidValue = form.getInputByName("sid").getValueAttribute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:52:31.300

可以通过 xpath 获得的 sid 和令牌：

```
//input[@name="sid"]/@value
//input[@name="token"]/@value 
```

你可以得到的最后一个：

```
//input[last()]/@value 
```

和 data-value 显然只是一个时间戳

# python - AUTH_USER_MODEL 指的是尚未安装和创建的模型 .. AbstractUser 模型无法登录

> ID：14699598
> 
> 赞同：40
> 
> 时间：2013-02-05T03:14:19.180
> 
> 标签：python, django, django-1.5

**`AUTH_USER_MODEL`在 EDIT3 中解决了错误。密码仍然不会通过表单保存用户创建。**

我正在使用 Django 1.5 玩新用户覆盖/扩展功能，我无法通过我的注册表单注册新用户 - 只能通过管理员。通过注册表单注册时，我收到以下错误：

`Manager isn't available; User has been swapped for 'poker.PokerUser'`

模型.py：

```
class PokerUser(AbstractUser):
    poker_relate = models.ForeignKey(settings.AUTH_USER_MODEL, null=True, blank=True)
    token = models.EmailField()
    USER_CHOICES = (
        ('1', 'Staker'),
        ('2', 'Horse')
    )
    user_type = models.CharField(choices=USER_CHOICES, max_length=10)
    username1 = models.CharField(null=True, blank=True, max_length=40)
    username2 = models.CharField(null=True, blank=True, max_length=40)
    username3 = models.CharField(null=True, blank=True, max_length=40)
    username4 = models.CharField(null=True, blank=True, max_length=40)
    username5 = models.CharField(null=True, blank=True, max_length=40) 
```

`PokerUserForm`模型：

```
class PokerUserForm(UserCreationForm):
    class Meta:
        model = PokerUser
        fields = ('username','password1','password2','email','user_type','token','username1','username2','username3','username4','username5',) 
```

我试图更改模型中的`PokerUserForm`模型以使用而不是通过设置而`get_user_model()`不是显式定义模型，但随后我收到以下错误：`model = get_user_model()``model = PokerUser`

```
django.core.exceptions.ImproperlyConfigured: AUTH_USER_MODEL refers to model 'poker.PokerUser' that has not been installed 
```

我`AUTH_USER_MODEL`是`settings.py`这样设置的：

`AUTH_USER_MODEL = 'poker.PokerUser'`

继续 - 我的注册视图位于`views.py`：

```
def UserRegistration(request):
    player = PokerUser()

    if request.method == 'POST':
        form = PokerUserForm(request.POST, instance=player)
        if form.is_valid():
            player.email_address = form.cleaned_data['email']
            player.user_type = form.cleaned_data['user_type']
            # if player is staker, token is their own email. otherwise their token is their staker's email and
            # their relation is their staker
            if player.user_type == '1' or player.user_type == 'staker':
                player.token = player.email_address
            else:
                player.token = form.cleaned_data['token']
                staker = PokerUser.objects.get(email=player.token)
                player.poker_relate = staker
            player.save()
            return HttpResponseRedirect('/')
    else:
        form = PokerUserForm()
    initialData = {'form': form}
    csrfContext = RequestContext(request, initialData)
    return render_to_response('registration/register.html', csrfContext) 
```

**编辑1：**

[根据文档](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#custom-users-and-the-built-in-auth-forms)，`UserCreationForm`必须重新创建以与自定义用户类一起使用。

我覆盖了整个`UserCreationForm`如下：

```
class UserCreationForm(forms.ModelForm):
    """
    A form that creates a user, with no privileges, from the given username and
    password.
    """
    error_messages = {
        'duplicate_username': _("A user with that username already exists."),
        'password_mismatch': _("The two password fields didn't match."),
        }
    username = forms.RegexField(label=_("Username"), max_length=30,
        regex=r'^[\w.@+-]+$',
        help_text=_("Required. 30 characters or fewer. Letters, digits and "
                    "@/./+/-/_ only."),
        error_messages={
            'invalid': _("This value may contain only letters, numbers and "
                         "@/./+/-/_ characters.")})
    password1 = forms.CharField(label=_("Password"),
        widget=forms.PasswordInput)
    password2 = forms.CharField(label=_("Password confirmation"),
        widget=forms.PasswordInput,
        help_text=_("Enter the same password as above, for verification."))

    class Meta:
        model = PokerUser
        fields = ('username','password1','password2','email','user_type','token','username1','username2','username3','username4','username5',)

    def clean_username(self):
        # Since User.username is unique, this check is redundant,
        # but it sets a nicer error message than the ORM. See #13147.
        username = self.cleaned_data["username"]
        try:
            PokerUser.objects.get(username=username)
        except PokerUser.DoesNotExist:
            return username
        raise forms.ValidationError(self.error_messages['duplicate_username'])

    def clean_password2(self):
        password1 = self.cleaned_data.get("password1")
        password2 = self.cleaned_data.get("password2")
        if password1 and password2 and password1 != password2:
            raise forms.ValidationError(
                self.error_messages['password_mismatch'])
        return password2

    def save(self, commit=True):
        user = super(UserCreationForm, self).save(commit=False)
        user.set_password(self.cleaned_data["password1"])
        if commit:
            user.save()
        return user 
```

这能够解决此错误：

`The Manager isn't available; User has been swapped for 'poker.PokerUser'`

现在，用户已创建但无法登录。当我在管理员中检查用户时，所有信息似乎都是正确的，除了密码。在管理员中手动添加密码似乎无法正常工作。尽管如此，通过管理员添加用户仍然可以正常工作。

**编辑2：**

我仍然无法以通过注册表单创建的任何 AbstractUser 模型登录。我已经完全覆盖了`UserCreationForm`上述内容，并且无法实现 `get_user_model()`此错误：

`AUTH_USER_MODEL refers to model 'poker.PokerUser' that has not been installed`

Django 代码`get_user_model()`是：

```
 def get_user_model():
    "Return the User model that is active in this project"
    from django.conf import settings
    from django.db.models import get_model

    try:
        app_label, model_name = settings.AUTH_USER_MODEL.split('.')
    except ValueError:
        raise ImproperlyConfigured("AUTH_USER_MODEL must be of the form 'app_label.model_name'")
    user_model = get_model(app_label, model_name)
    if user_model is None:
        raise ImproperlyConfigured("AUTH_USER_MODEL refers to model '%s' that has not been installed" % settings.AUTH_USER_MODEL)
    return user_model 
```

由于我已经`AUTH_USER_MODEL = 'poker.PokerUser'`在我的 中进行了设置`settings.py`，因此应该可以。我已经通过 Django 控制台验证了这一点：

```
>>> from django.contrib.auth import get_user_model
>>> settings.AUTH_USER_MODEL
Out[14]: 'poker.PokerUser'
>>> from django.db.models import get_model
>>> app_label, model_name = settings.AUTH_USER_MODEL.split('.')
>>> user_model = get_model(app_label, model_name)
>>> user_model
Out[18]: poker.models.PokerUser 
```

但是，实施仍然无法正常工作。

如果你已经读到这里，谢谢！

**编辑3：**

`AUTH_USER_MODEL refers to model 'poker.PokerUser' that has not been installed`已修复。我不小心拥有了`UserCreationForm`我重新创建的`poker.models`而不是`registration.forms`，所以当我运行`get_user_model()`分配给 时`poker.PokerUser`，它无法解析，因为它已经在那个位置。

现在剩下的唯一问题是，在创建新用户时，他们的密码不会保存。通过在此处放置打印语句，我已将其缩小为单个方法`UserCreationForm`：

```
def clean_password2(self):
    password1 = self.cleaned_data.get("password1")
    print password1
    password2 = self.cleaned_data.get("password2")
    print password2
    if password1 and password2 and password1 != password2:
        raise forms.ValidationError(
            self.error_messages['password_mismatch'])
    print password2
    return password2

def save(self, commit=True):
    user = super(UserCreationForm, self).save(commit=False)
    user.set_password(self.cleaned_data["password1"])
    print self.cleaned_data["password1"]
    if commit:
        user.save()
    return user 
```

`print password1`and`print password1`语句中显示`clean_password2`明文密码，但方法`print self.cleaned_data["password1"]`中`save`为空白。为什么我的表单数据没有传递给 save 方法？

**TL;DR** `AbstractUser`模型创建在管理员和注册表单中都有效，但只有通过管理员创建的用户才能登录。通过注册表创建的用户无法登录，并且似乎在没有密码的情况下保存 - 所有其他信息都正确保存。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-06-07T03:56:10.697

我遇到过几次。一直是进口问题。假设我们有 core/models.py，它实现了一个自定义用户并从另一个文件（比如 Else）导入了一个符号：

```
from Something import Else

class CustomUser(AbstractBaseUser):
    pass 
```

然后我们有另一个使用 CustomUser 并定义 Else 的文件。让我们称之为某事/models.py：

```
from core.models import CustomUser

class Else(models.Model):
    pass

class AnotherClass(models.model):
    user = models.ForeignKey(CustomUser) 
```

当 core/models.py 去 import Else 时，它​​会评估 something/models.py 并运行到 AnotherClass 定义中。AnotherClass 使用 CustomUser，但尚未安装 CustomUser，因为我们正在创建它。所以，它会抛出这个错误。

我通过保持我的 core/models.py 独立解决了这个问题。它不会从我的其他应用程序中导入太多内容。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-06T02:08:11.277

好的，我这里有三个问题，所以我将解决所有这些问题，因为我很确定前两个问题会出现在其他人身上。

*   `Manager isn't available; User has been swapped for 'poker.PokerUser'`

这是由于使用但没有重新创建`UserCreationForm`. 在 1.5 中使用自定义模型时，一些模型表单是开箱即用的，但必须重新创建。有关文档，请参见[此处](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#custom-users-and-the-built-in-auth-forms)。

*   `The Manager isn't available; User has been swapped for 'poker.PokerUser'`

虽然我已经`AUTH_USER_MODEL = 'poker.PokerUser'`设置好，但我正在从该位置`settings.py`打电话。您必须从不同的位置拨打电话。将我的表格移动到那里并从那里调用工作正常。`get_user_model()``poker.models``get_user_model()``registration.forms``get_user_model()`

*   新用户不保存

这只是我的大脑放屁。在我的`UserRegistration`模型中，我正在处理表单中的各个字段。当我将这些字段传回给`UserCreationForm`该`save()`方法时，我并没有传递密码字段。哎呀！

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-07-27T12:29:08.650

如果您忘记在设置中注册您的应用程序，可能会发生这种情况。在您的 settings.py 文件中，将您的应用程序的名称添加到 INSTALLED_APPS 列表中。我希望这有帮助。

例如，如果您的应用名称是“用户”，它将如下所示：

```
INSTALLED_APPS = [
  ......

  'users'
] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-09T09:18:20.787

在我的情况下更新，meta 中的正确 app_label 解决了这个问题

```
class APPUser(AbstractUser):
   password = models.TextField(blank=True)

   class Meta:
     app_label = 'app_auth'
     db_table = "app_user" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-08T11:45:05.957

如果您创建了多个目录来维护项目中的结构，请检查您编写的用户模型的目录。只需在该目录的**init** .py 中导入用户模型。

例子：

```
app directory: 
     app/
       views/
         __init__.py
         views.py
       models/
         __init__.py  ->  from .user_model import User
         user_model.py -> class User(AbstractUser): 
```

就我而言，我以这种方式得到了解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-16T09:37:06.930

就我而言，我覆盖了内置的 User 模型，并使导致此问题的类抽象。因此，在元类中更改 abstract=False 解决了这个问题。

```
class User(AbstractBaseUser, PermissionMixin):
      email = models.EmailField(max_length=255)

      class Meta:
      abstract = False 
```

# ember.js - 将模型创建为嵌入式 hasMany 关系的正确方法

> ID：14699602
> 
> 赞同：1
> 
> 时间：2013-02-05T03:14:40.647
> 
> 标签：ember.js, ember-data

如何在不发送单独请求的情况下将模型的新实例创建到嵌入式 hasMany 关系中？

这就是我目前正在做的事情。我的模型：

```
 AUI.TableMetadata = DS.Model.extend({
    name: DS.attr('string'),
    fields: DS.hasMany('AUI.FieldMetadata')
});

AUI.FieldMetadata = DS.Model.extend({
    name: DS.attr('string'),
    table: DS.belongsTo('AUI.TableMetadata')
}); 
```

店铺设置：

```
Adapter = DS.RESTAdapter.extend();

Adapter.map(AUI.TableMetadata, {
    fields: { embedded: 'always'},
});

AUI.store = DS.Store.create({
  revision: 11,
  adapter: Adapter.create({}),
}); 
```

创建记录：

```
var table = AUI.TableMetadata.createRecord({
    name: 'Cool Creatures',
    fields: []
});

var field = AUI.Field.createRecord({
    name: 'octopi',
});

table.get('fields').pushObject(field);
table.get('transaction').commit(); 
```

当我提交表格时，表格帖子正确地嵌入了数据，但它也为每个 404 的子字段发送单独的请求，并将子模型置于错误状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T11:34:46.137

### Ember Data 1.0.0 beta 中 DS.Model 的新语法

```
AUI.TableMetadata = DS.Model.extend({
    name: DS.attr('string'),
    field_metadata: DS.hasMany('field_metadata')
});

AUI.FieldMetadata = DS.Model.extend({
    name: DS.attr('string'),
    table_metadata: DS.belongsTo('table_metadata')
}); 
```

### 在控制器或路由内部

```
this.store.createRecord('field_meta', { name: 'octopi' });
this.store.createRecord('table_meta', { name: 'Cool Creatures' }); 
```

我不确定 Ember 是否能像检测 Rails 这样的复数形式一样好，因此您可能必须将其命名`field_metadata`为`field_metadatas`. 当然，在创建记录的对象中，您必须添加适当的 ID (`field_metadata_id`和`table_metadata_id`) 才能使关系起作用。

# xaml - Winrt & Xaml: Grid with Scrollbar ... 试过 Stackpanel、Scrollviewer，看不到让它工作

> ID：14699603
> 
> 赞同：0
> 
> 时间：2013-02-05T03:14:41.957
> 
> 标签：xaml, windows-runtime, winrt-xaml, scrollviewer, stackpanel

我正在尝试使用 Xaml 在网格上为 WinRT 应用程序获取滚动条。基本页面设置有一个用于顶部和中间部分的整体网格。在中间部分，我放置了另一个 2 行 2 列的网格。在该网格的第 1 列第 1 行内，我想在要显示的数据内放置一个带有另一个网格的边框，并在边框区域内有一个滚动条。

我已经为此绞尽脑汁了大约 3 天，断断续续地在网上搜索

我粗略地尝试了这两种方法，我认为应该可以，但不行。简化了，但文本框的网格有大约 30 个文本框网格要显示。

```
<Grid x:Name="PersonViewContent" Grid.Row="1">
    <ScrollViewer
        x:Name="MainScrollViewer"
        Grid.Row="1"
        ZoomMode="Disabled"
        IsTabStop="False"
        VerticalScrollBarVisibility="Auto"
        HorizontalScrollBarVisibility="Auto"
        Padding="0,0,0,20">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition
                    Height="Auto" />
                <RowDefinition
                    Height="*" />
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition
                    Width="Auto" />
                <ColumnDefinition
                    Width="*" />
            </Grid.ColumnDefinitions>

            <Border
                BorderBrush="Black"
                BorderThickness="5"
                HorizontalAlignment="Left"
                Width="500"
                Margin="10,10,10,10"
                VerticalAlignment="Top">
                <ScrollViewer
                    x:Name="PersonScroller"
                    Margin="0"
                    FontFamily="Segoe UI"
                    FontSize="20"
                    IsHorizontalRailEnabled="true"
                    IsHorizontalScrollChainingEnabled="False"
                    IsDoubleTapEnabled="False"
                    IsHoldingEnabled="False"
                    IsRightTapEnabled="False"
                    IsTapEnabled="False">
                    <StackPanel
                        Margin="0"
                        Width="490"
                        HorizontalAlignment="Left">
                        <Grid
                            Height="250"
                            Margin="10,10,10,10"
                            VerticalAlignment="Bottom">
                            <Image
                                Source="{Binding Image}"
                                AutomationProperties.Name="{Binding ImageSourceSubtitle}"
                                ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Stretch="{Binding ImageStretch}" />
                            <TextBlock
                                Text="{Binding Subtitle}"
                                Margin="0,180,0,0"
                                TextWrapping="Wrap"
                                Style="{StaticResource SubheaderTextStyle}"
                                MaxHeight="60"
                                FontSize="20"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center" />
                        </Grid>

                        <Grid
                            Height="Auto">
                            <TextBlock
                                Text="Textblock"
                                Margin="5,10,0,0"
                                Style="{StaticResource BasicTextStyle}"
                                MaxHeight="60"
                                FontSize="20"
                                FontWeight="Bold" />
                        </Grid>

                        <Grid
                            Height="Auto">
                            <TextBlock
                                Text="Textblock: "
                                Margin="5,0,0,0"
                                Style="{StaticResource BasicTextStyle}"
                                MaxHeight="60"
                                FontSize="20" />
                            <TextBlock
                                Text="{Binding Name}"
                                Margin="152,0,0,0"
                                Style="{StaticResource BasicTextStyle}"
                                FontSize="20" />
                        </Grid>

                        <Grid
                            Height="Auto">
                            <TextBlock
                                Text="Textblock: "
                                Margin="5,0,0,0"
                                Style="{StaticResource BasicTextStyle}"
                                MaxHeight="60"
                                FontSize="20" />
                            <TextBlock
                                Text="{Binding Name}"
                                Margin="152,0,0,0"
                                Style="{StaticResource BasicTextStyle}"
                                FontSize="20" />
                        </Grid>

                        <Grid
                            Height="Auto">
                            <TextBlock
                                Text="Textblock: "
                                Margin="5,0,0,0"
                                Style="{StaticResource BasicTextStyle}"
                                MaxHeight="60"
                                FontSize="20" />
                            <TextBlock
                                Text="{Binding Name}"
                                Margin="152,0,0,0"
                                Style="{StaticResource BasicTextStyle}"
                                FontSize="20" />
                        </Grid>

                        <Grid
                            Height="Auto">
                            <TextBlock
                                Text="Textblock: "
                                Margin="5,0,0,0"
                                Style="{StaticResource BasicTextStyle}"
                                MaxHeight="60"
                                FontSize="20" />
                            <TextBlock
                                Text="{Binding Name}"
                                Margin="152,0,0,0"
                                Style="{StaticResource BasicTextStyle}"
                                FontSize="20" />
                        </Grid>

                        <Grid
                            Height="Auto">
                            <TextBlock
                                Text="Textblock: "
                                Margin="5,0,0,0"
                                Style="{StaticResource BasicTextStyle}"
                                MaxHeight="60"
                                FontSize="20" />
                            <TextBlock
                                Text="{Binding Name}"
                                Margin="152,0,0,0"
                                Style="{StaticResource BasicTextStyle}"
                                FontSize="20" />
                        </Grid>

                        <Grid
                            Height="Auto">
                            <TextBlock
                                Text="Textblock: "
                                Margin="5,0,0,0"
                                Style="{StaticResource BasicTextStyle}"
                                MaxHeight="60"
                                FontSize="20" />
                            <TextBlock
                                Text="{Binding Name}"
                                Margin="152,0,0,0"
                                Style="{StaticResource BasicTextStyle}"
                                FontSize="20" />
                        </Grid>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
    </ScrollViewer>
</Grid> 
```

我尝试的下一种方法将事物简化为更合乎逻辑的网格，但是仍然无法使其正常工作。想象一下`TextBlock`s 有 30 行。在这里，当运行时，`ScrollBar`显示，但没有做任何事情，即使文本明显离开边框区域的底部并且您看不到边框区域的底部。

现在这是直接来自我的代码的示例代码，从页面顶部到相关网格的底部：

```
 <Grid Grid.Row="0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}" />
        <TextBlock x:Name="pageTitle" Grid.Column="1" Text="text" Style="{StaticResource PageHeaderTextStyle}" />
    </Grid>

    <Grid x:Name="PersonViewContent" Grid.Row="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Border Grid.Row="0" Grid.Column="0" BorderBrush="Black" BorderThickness="5" Width="500" Margin="10,10,10,10">
                <ScrollViewer>
                    <StackPanel>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="270" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Row="0" Grid.ColumnSpan="2" Margin="10,10,10,10" VerticalAlignment="Bottom">
                                <Image Source="text" AutomationProperties.Name="text" ScrollViewer.VerticalScrollBarVisibility="Disabled" HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="text"/>
                                <TextBlock Text="text" Margin="0,180,0,0" TextWrapping="Wrap" Style="{StaticResource SubheaderTextStyle}" MaxHeight="60" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                <TextBlock Text="text" Margin="0,215,0,0" TextWrapping="Wrap" Style="{StaticResource SubheaderTextStyle}" MaxHeight="60" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <TextBlock Grid.Row="1" Grid.ColumnSpan="2" Text="text" Margin="5,0,18,10" TextWrapping="Wrap" Style="{StaticResource SubheaderTextStyle}" MaxHeight="60" FontSize="30"/>
                            <TextBlock Grid.Row="2" Grid.ColumnSpan="2" Text="text" Margin="5,10,0,0" Style="{StaticResource ViewPersonTextDataHeaderStyle}"/>
                            <TextBlock Grid.Row="3" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="3" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="4" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="4" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="5" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="5" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="6" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="6" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="7" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="7" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="8" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="8" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="9" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="9" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="10" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="10" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="11" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="11" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="12" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="12" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="13" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="13" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="14" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="14" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="15" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="15" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="16" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="16" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="17" Grid.ColumnSpan="2" Text="text" Margin="5,20,0,0" Style="{StaticResource ViewPersonTextDataHeaderStyle}"/>
                            <TextBlock Grid.Row="18" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="18" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="19" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="19" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="20" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="20" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="21" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="21" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="22" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="22" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="23" Grid.ColumnSpan="2" Text="text" Margin="5,20,0,0" Style="{StaticResource ViewPersonTextDataHeaderStyle}"/>
                            <TextBlock Grid.Row="24" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="24" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="25" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="25" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="26" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="26" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="27" Grid.Column="0" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="27" Grid.Column="1" Text="text" Margin="5,0,0,0" Style="{StaticResource ViewPersonTextDataStyle}"/>
                            <TextBlock Grid.Row="28" Grid.ColumnSpan="2" Text="text" Margin="5,20,0,0" Style="{StaticResource ViewPersonTextDataHeaderStyle}"/>
                            <TextBlock Grid.Row="29" Grid.ColumnSpan="2" Text="text" Margin="5,0,0,0" Style="{StaticResource BasicTextStyle}" IsTapEnabled="False" IsRightTapEnabled="False" IsHoldingEnabled="False" IsDoubleTapEnabled="False" FontSize="16"/>
                        </Grid>
                    </StackPanel>
                </ScrollViewer>
</Border> 
```

无论如何，在这上面旋转我的轮子......希望有一个建议

编辑：这是我想要实现的布局的大致草图：

```
|=========================================
|back button and title area              |
|                                        |
| |===============|                      |
| |               | Grid View here for   |
| | Picture area  | other stuff that the |
| |               | User can click on    |
| | Start of text |                      |
| | data of all   |                      |
| | textblocks    |                      |
| | 30+ rows      |                      |
| | textblock     |                      |
| | textblock     |                      |
| | textblock     |                      |
| | textblock     |                      |
| | textblock     |                      |
| | textblock     |                      |
| | textblock     |                      |
| | textblock     |                      |
| |===============|                      |
|========================================| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:06:15.557

从您提供的 ASCII 图像来看，您似乎可以使用 Grid、StackPanel 和 ScrollViewer 的组合来实现所需的布局。

```
<Page
x:Class="App15.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:App15"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Grid Background="Gray">
    <Grid.RowDefinitions>
        <RowDefinition Height="140" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <StackPanel Grid.ColumnSpan="2" Orientation="Horizontal" Background="DarkCyan">
        <Button Style="{StaticResource BackButtonStyle}" />
        <TextBlock Text="Go Back" Style="{StaticResource PageHeaderTextStyle}" />
    </StackPanel>

    <ScrollViewer Background="DarkOrange" Grid.Row="1">
        <StackPanel Margin="20">
            <Border Background="Crimson" Height="100">
                <TextBlock Foreground="Black">Put picture here</TextBlock>
            </Border>
            <TextBlock>tb1</TextBlock>
            <TextBlock>tb2</TextBlock>
            <TextBlock>tb3</TextBlock>
            <TextBlock>...</TextBlock>
            <TextBlock>tb28</TextBlock>
            <TextBlock>tb29</TextBlock>
            <TextBlock>tb30</TextBlock>
        </StackPanel>
    </ScrollViewer>
    <GridView Background="DarkViolet" Grid.Row="1" Grid.Column="1">
        <GridViewItem>gvi1</GridViewItem>
        <GridViewItem>gvi2</GridViewItem>
        <GridViewItem>gvi3</GridViewItem>
    </GridView>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:24:43.557

好吧，事实证明这并不是我做错了什么。它更多的是我使用的行/列的 Auto 属性。它使该行离开屏幕（不知道为什么），因此滚动条相对没有意义。

基本上，重新做了整个你的做快照和不快照的不同，并且所有的对齐都得到了照顾。

# macos - GetMacOSStatusErrorString/GetMacOSStatusCommentString 的替代品

> ID：14699604
> 
> 赞同：11
> 
> 时间：2013-02-05T03:14:49.677
> 
> 标签：macos, cocoa

从 10.8 开始，GetMacOSStatusErrorString 和 GetMacOSStatusCommentString 函数似乎已被弃用。这些方便的调试功能是否有任何未弃用的替换功能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T08:16:24.503

您可以使用`[NSError errorWithDomain:NSOSStatusErrorDomain code:errorCode userInfo:nil]`来获取`NSError`代表`OSStatus`的`errorCode`。`NSError`提供从错误代码 ( ) 获取本地化错误消息的能力`-localizedDescription`，或用于调试目的的常规非本地化错误消息 ( `-description`)。

# c# - 使用 .NET 的基于文本的报告 (.TXT)

> ID：14699607
> 
> 赞同：0
> 
> 时间：2013-02-05T03:15:17.400
> 
> 标签：c#, .net, reporting

我需要创建包含页眉、页脚、页码等的基于文本的报告（.txt 格式）。这类似于使用 COBOL 编写报告的方式。

有谁知道允许 .NET 应用程序使用此功能的任何库或第三方工具？

我不打算使用 Reporting Services 或任何东西。我只是想创建一个数据集，然后创建我自己的报表，这些报表的格式很好，并且列之间的间距正确。

今天，我通过在我的应用程序中加入 Powershell 的 format-table 命令来实现这一点（没有标题、页码、页脚）。它似乎可以很好地格式化我的报告，而不必担心间距等，而且我可以轻松地对列进行排序。

任何帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:29:06.160

您不需要第三方库来完成您所需要的。您只需要遍历`Collection`然后将分隔符附加到每条记录。然后`string`用适当的 . 作为响应`header`。

`Collection`这是一个示例，但该概念与任何类型或类型都保持相关`List`。

[数据表到文本文件](http://www.c-sharpcorner.com/UploadFile/cd19b9/how-to-download-datatable-to-text-file-in-C-Sharp/)

这是一个示例 DataTable 扩展方法，该方法将其转换为带有可选分隔符的输出字符串。

```
public static string GetStringSeperatedBy(this DataTable dt, string delimiter)
{
    var sb = new StringBuilder();

    var columnNames = dt.Columns.Cast<DataColumn>().Select(column => string.Format("\"{0}\"", column.ColumnName)).ToArray();
    sb.AppendLine(string.Join(delimiter, columnNames));

    foreach (DataRow row in dt.Rows)
    {
       var fields = row.ItemArray.Select(field => string.Format("\"{0}\"", field.ToString().Replace(Environment.NewLine, " ").Replace("\"", ""))).ToArray();
            sb.AppendLine(string.Join(delimiter, fields));
    }
    return sb.ToString();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:12:54.357

我倾向于查看一些[基于 .NET 的模板引擎](http://csharp-source.net/open-source/template-engines)。我以前使用过模板引擎（虽然不是在 .NET 中），我认为它们可以很好地满足您的要求。

在这里查看一些与它们相关的 SO 问题，以便您了解人们会推荐什么。例如，看；

*   [在 .NET 中生成简单报告的模板引擎](https://stackoverflow.com/questions/346449/templating-engine-to-generate-simple-reports-in-net)
*   [.Net 模板引擎/报表解决方案](https://stackoverflow.com/questions/1590772/net-template-engine-report-solution)

# php - 在 mssql pdo 中获取列名

> ID：14699608
> 
> 赞同：3
> 
> 时间：2013-02-05T03:15:22.530
> 
> 标签：php, sql-server, pdo

我正在从一些 MS SQL PDO 查询构建一个 HTML 表。或试图。我遇到的第一个障碍是我无法获取特定表的列名。[在这里](https://stackoverflow.com/questions/5428262/php-pdo-get-the-columns-name-of-a-table)找到，我已经尝试过解决方案

```
function getColumnNames(){ 

$sql = "select column_name from information_schema.columns where table_name = 'myTable'";
#$sql = 'SHOW COLUMNS FROM ' . $this->table; 

$stmt = $this->connection->prepare($sql); //this is the line that triggers the error

try {     
    if($stmt->execute()){ 
        $raw_column_data = $stmt->fetchAll(PDO::FETCH_ASSOC); 

        foreach($raw_column_data as $outer_key => $array){ 
            foreach($array as $inner_key => $value){ 
                        if (!(int)$inner_key){ 
                            $this->column_names[] = $value; 
                        } 
            } 
        } 
        } 
        return $this->column_names; 
    } catch (Exception $e){ 
            return $e->getMessage(); //return exception 
    }         
}  

getColumnNames(); 
```

得到错误：

```
Fatal error: Using $this when not in object context 
```

而这个（来自同一个SO帖子）

```
$q = $dbh->prepare("DESCRIBE username");
$q->execute();
$table_fields = $q->fetchAll(PDO::FETCH_COLUMN);
print_r($table_fields); 
```

产生了错误：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000]: General error: 2812 General SQL Server error: Check messages from the SQL Server [2812] (severity 16) [(null)]' 
```

我只是想获取列的名称，这样我就可以遍历并获取它们每一行的值。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T03:18:14.953

`DESCRIBE`是 MySQL 特定的命令。在 MS SQL 上，您可以为此使用存储过程：

```
exec sp_columns MyTable 
```

您可以在[MSDN上找到文档](http://msdn.microsoft.com/en-us/library/ms176077.aspx)

这里有一个小例子，如何使用 PDO 来完成：

```
<?php

// will contain the result value
$return = null;

// replace table name  by your table name
$table_name = 'table_name';

// prepare a statement
$statement = $pdo->prepare("exec sp_columns @table_name = :table_name");

// execute the statement with table_name as param
$statement->execute(array(
    'table_name' => $table_name
));

// fetch results
$result = $statement->fetchAll($sql);

// test output
var_dump($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T12:29:46.317

这是一个老问题，但无论如何我都会添加我学到的东西。我设法通过这样做来获取列值。

```
try {
            $query = $this->db->prepare("DESCRIBE posts");
            $query->execute();
        //retrieve the columns inside the table posts
            $forumrows = $query->fetchAll(PDO::FETCH_COLUMN); 
            //var_dump($forumrows);
        //Output each column Id with its Value
            foreach($forumrows as $forumrow) {
                echo $forumrow . "</br>";
        }
          } catch(PDOException $e) {
                echo $e->getMessage();
        } 
```

# html - 动态谷歌电子表格数据到 HTML

> ID：14699609
> 
> 赞同：0
> 
> 时间：2013-02-05T03:15:24.537
> 
> 标签：html, templates, google-apps-script

将电子表格生成到 HTML 表格时出现问题。在此之后： [HTML 服务-应用程序脚本](https://developers.google.com/apps-script/html_service)。我不清楚如何定义变量*htmlOutput*或如何显示/返回它。谢谢你的想法。

```
function doGet() {
var t = HtmlService.createTemplateFromFile('myTemplate');
var htmlOutput =  t.evaluate();
return htmlOutput;
} 
```

我的 HTML 模板“myTemplate.html”是：

```
<html>
<table>
<? var sheet = SpreadsheetApp.openById("ID").getSheetByName("Results-List");
 var lastRow = sheet.getLastRow();  
 var myRange = sheet.getRange("A2:G"+lastRow); 
 var data = myRange.getValues();
 for (var i = 0; i < data.length; ++i) { ?>
<tr>
  <? for  (var j = 0; j < data[i].length; ++j) { ?>
    <td><?= data[i][j]?></td>
  <? } ?>
</tr>
<? } ?>
</table>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:41:54.537

*只是我没有发表评论的建议，因为它需要一些高级格式......*

您在保存为的示例中显示 html 模板，您`'myTemplate.html'`是用扩展名命名它还是显示 html 扩展名，因为它出现在屏幕上？

我注意到，如果 html 文件被命名`myTemplate.html`或者只是`myTemplate`两个文件在脚本编辑器界面中以相同的方式显示，但它们绝对是不同的文件。这*可能*是错误的来源。

为了让事情更清楚一点，这里有 2 个屏幕截图来说明： ![在此处输入图像描述](../Images/724cf8b554c13e3293ae60a5365540f7.png)

![在此处输入图像描述](../Images/5cb1f8c7d112838189ebdd3e69d08fdb.png)

如您所见，两个文件在左栏中显示相同，尽管它们的名称不同。我个人不会为 html 文件添加扩展名，因为环境会自动识别文件类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:50:16.493

我能够让这段代码工作。希望这对其他人有所帮助：（请注意，不需要*返回。）*

```
function doGet() {
var t = HtmlService.createTemplateFromFile('myTemplate');
var htmlOutput =  t.evaluate();
var doc = SpreadsheetApp.getActive();
doc.show(htmlOutput);
} 
```

# sql - Oracle UPDATE 语句 - 当我只需要嵌套子查询行时更新所有列

> ID：14699613
> 
> 赞同：1
> 
> 时间：2013-02-05T03:15:46.997
> 
> 标签：sql, oracle

仅当特定情况有效时，我才需要更新特定列。但是，以下内容正在更新我表中的所有内容。我正在嵌套表格本身，因为我必须自行更新表格。

更新所有内容的 Query1：

```
UPDATE TestTable m 
 SET m.column1 =  'VALUE2' -- I don't need any nested column data, I specifically know the data needs to UPDATE from 'Value1' to 'Value2' for filtered rows from nested Query
 WHERE EXISTS
  (
    SELECT  1 
        FROM TestTable m1
        WHERE
        m1.column2='xyz'
        AND (
         m1.nameColumn IN ('%ME%','%MYSELF%')  --- This is not really used, I am just saying I have additional filters.        
        )
        AND ( m1.column1 = 'VALUE1' OR   m1.column1 IS NULL ) -- We need to update the records which have 'VALUE1' column1 only..  

  ) 
```

查询2：也一样......

```
 UPDATE TestTable m 
     SET m.column1
     = (
        select 'VALUE2'   -- Like example1, I don't need the nested table's data at all.
-- I need the nested query to filter out rows to let the outer query know that only those rows are to be updated
           FROM TestTable m1
            WHERE
            m1.column2='xyz'
            AND (
             m1.nameColumn IN ('%ME%','%MYSELF%')  --- This is not really used, I am just saying I have additional filters.        
            )
            AND ( m1.column1 = 'VALUE1' OR   m1.column1 IS NULL ) -- We need to update the records which have 'VALUE1' column1 only..  
      )
      --WHERE m1.column1 != m.column1 --- THIS DOESN'T WORK, this is an added check that I don't update where it is not needed. It can be removed/ignored 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:18:41.263

我不明白您为什么不直接`where`在 上使用简单的子句`update`：

```
UPDATE TestTable m SET m.column1 = 'VALUE2'
WHERE (m.column1 IS NULL OR m.column1 = 'VALUE1')
AND m.nameColumn IN ('ME', 'MYSELF')
AND m.column2 = 'xyz'; 
```

...我错过了一些明显的东西吗？

# actionscript-3 - 将项目从 flashpunk 移植到哪个平台？

> ID：14699614
> 
> 赞同：0
> 
> 时间：2013-02-05T03:15:56.130
> 
> 标签：actionscript-3, flash, game-engine

Flashpunk 项目似乎已关闭。官方网站也被删除了。我想将我的代码移动到另一个引擎**，而无需更改代码或更改代码最少**。

它的继任者是什么？如果不是，哪一个应该是我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:00:21.200

首先，如果它要做同样的事情，转移到另一个引擎有什么好处？如果您有 FlashPunk 的稳定版本并且能够/熟悉它，请继续使用它。我能看到的唯一缺点是，如果他们的网站不再运行，您将无法利用社区。话虽如此，仍然有许多其他在线资源充满了对 FlashPunk 感到满意的人。

其次，您将无法在没有更改或更改很少的情况下转移到另一个引擎。每个引擎可能旨在服务于相同的目的（简单的游戏开发），但实现方式却大不相同。您将无法简单地导入另一个完整的引擎并将一些`extends`语句更改为新类，这不会发生。

最后，FlashPunk 是旧技术。[像Starling](http://gamua.com/starling/)这样的新引擎现已问世，它们利用最新的 API`Stage3D`来极大地提高渲染性能。您应该考虑迁移到更新的引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:24:53.660

FlashPunk 2 将在今年某个时候推出，但在那之前，我们只需要等待网站恢复。我想进入 FlashPunk，但它失败了。它将与以前几乎相同（我认为）具有大量新功能，所以为什么不等待呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T20:10:30.797

Another option would be to check out the work of KickBack Games: [http://www.kickbackgames.com](http://www.kickbackgames.com).

They have a version of FlashPunk that uses Stage3D so is much faster, and is still being maintained.

# c# - MVC4如何将行项目动态添加到EditorFor字段？

> ID：14699615
> 
> 赞同：7
> 
> 时间：2013-02-05T03:16:02.740
> 
> 标签：c#, asp.net-mvc-4, knockout.js

我有一个包含迭代项目的视图模型。我通过 EditorFor() 方法将它们放在我的视图中。

**看法：**

```
@model Models.MyModel 

@using (Html.BeginForm(@Model.Action, @Model.Controller))
{
    <div class="section" id="Terms">
        @Html.EditorFor(m => m.Terms)
    </div>

    <input type="submit" value="Save" />
} 
```

**模型：**

```
public class MyModel 
{
    public IEnumerable<Term> Terms  { get; set; }
} 
```

**EditorTemplates\Term.cshtml：**

```
@model Models.Term

@if (Model != null) 
{
    <fieldset>
        <legend>Term</legend>

        @Html.HiddenFor(model => model.TermID)

        <div class="editor-label">
            @Html.LabelFor(model => model.Identifier)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Identifier)
            @Html.ValidationMessageFor(model => model.Identifier)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Description)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Description)
            @Html.ValidationMessageFor(model => model.Description)
        </div>

    </fieldset> 
} 
```

我希望能够从视图中的列表中动态添加/删除项目，就像 knockout.js 上的这个示例一样，但是如何保留 auto-id 的 MVC 创建的？？：

**[http://knockoutjs.com/examples/cartEditor.html](http://knockoutjs.com/examples/cartEditor.html)**

以下是我对此的要求：

*   添加新条款
*   删除条款
*   验证添加的新术语视图

我已经阅读了关于 SO 的其他问题，但我还没有找到一个真正明确的答案。淘汰赛.js 是公认的方式吗？有没有使用 Knockout 和 MVC 执行此操作的示例？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-06T13:17:12.797

我找到了 Jarrett Meyer 的这篇文章[Nested Collection Models in MVC3](http://jarrettmeyer.com/post/2995732471/nested-collection-models-in-asp-net-mvc-3)，他有一个不使用敲除和最大化代码重用的解决方案。

这涵盖了添加和删除方法。我将在这里概述添加方法。

该模型

```
public class Person {
  public string FirstName { get; set; }
  public string LastName { get; set; }
  public IList<PhoneNumber> PhoneNumbers { get; set; }
  public IList<EmailAddress> EmailAddresses { get; set; }
  public IList<Address> Addresses { get; set; }
} 
```

意见

```
//New.cshtml:    
@using (Html.BeginForm("New", "Person", FormMethod.Post))
{
  @Html.EditorForModel()
  <p>
    <button type="submit">
      Create Person
    </button>
  </p>
}

//Person.cshtml:
@Html.AntiForgeryToken()
@Html.HiddenFor(x => x.Id)

<p>
  <label>First Name</label>
  @Html.TextBoxFor(x => x.FirstName)
</p>
<p>
  <label>Last Name</label>
  @Html.TextBoxFor(x => x.LastName)
</p>
<div id="phoneNumbers">
  @Html.EditorFor(x => x.PhoneNumbers)
</div>
<p>
  @Html.LinkToAddNestedForm("Add Phone Number", "#phoneNumbers", ".phoneNumber", "PhoneNumbers", typeof(PhoneNumber))
</p>

//PhoneNumber.cshtml:
<div class="phoneNumber">
  <p>
    <label>Telephone Number</label>
    @Html.TextBoxFor(x => x.Number)
  </p>
  <br/>
</div> 
```

帮手

```
/// <param name="linkText">Text for Link</param>
/// <param name="containerElement">where this block will be inserted in the HTML using a jQuery append method</param>
/// <param name="counterElement">name of the class inserting, used for counting the number of items on the form</param>
/// <param name="collectionProperty">the prefix that needs to be added to the generated HTML elements</param>
/// <param name="nestedType">The type of the class you're inserting</param>
public static IHtmlString LinkToAddNestedForm<TModel>(this HtmlHelper<TModel> htmlHelper, string linkText,
    string containerElement, string counterElement, string collectionProperty, Type nestedType)
{
    var ticks = DateTime.UtcNow.Ticks;
    var nestedObject = Activator.CreateInstance(nestedType);
    var partial = htmlHelper.EditorFor(x => nestedObject).ToHtmlString().JsEncode();

    partial = partial.Replace("id=\\\"nestedObject", "id=\\\"" + collectionProperty + "_" + ticks + "_");
    partial = partial.Replace("name=\\\"nestedObject", "name=\\\"" + collectionProperty + "[" + ticks + "]");

    var js = string.Format("javascript:addNestedForm('{0}','{1}','{2}','{3}');return false;", containerElement,
        counterElement, ticks, partial);

    TagBuilder tb = new TagBuilder("a");
    tb.Attributes.Add("href", "#");
    tb.Attributes.Add("onclick", js);
    tb.InnerHtml = linkText;

    var tag = tb.ToString(TagRenderMode.Normal);
    return MvcHtmlString.Create(tag);
}

private static string JsEncode(this string s)
{
    if (string.IsNullOrEmpty(s)) return "";
    int i;
    int len = s.Length;

    StringBuilder sb = new StringBuilder(len + 4);
    string t;

    for (i = 0; i < len; i += 1)
    {
        char c = s[i];
        switch (c)
        {
            case '>':
            case '"':
            case '\\':
                sb.Append('\\');
                sb.Append(c);
                break;
            case '\b':
                sb.Append("\\b");
                break;
            case '\t':
                sb.Append("\\t");
                break;
            case '\n':
                //sb.Append("\\n");
                break;
            case '\f':
                sb.Append("\\f");
                break;
            case '\r':
                //sb.Append("\\r");
                break;
            default:
                if (c < ' ')
                {
                    //t = "000" + Integer.toHexString(c); 
                    string tmp = new string(c, 1);
                    t = "000" + int.Parse(tmp, System.Globalization.NumberStyles.HexNumber);
                    sb.Append("\\u" + t.Substring(t.Length - 4));
                }
                else
                {
                    sb.Append(c);
                }
                break;
        }
    }
    return sb.ToString();
} 
```

Javascript

```
//since the html helper can change the text of the item inserted but not the index,
//this replaces the 'ticks' with the correct naming for the collection of properties
function addNestedForm(container, counter, ticks, content) {
  var nextIndex = $(counter).length;
  var pattern = new RegExp(ticks, "gi");

  content = content.replace(pattern, nextIndex);
  $(container).append(content);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:51:39.910

你想要淘汰 MVC [http://knockoutmvc.com/CartEditor](http://knockoutmvc.com/CartEditor)

您不必为此使用淘汰赛，您真正需要的是带有验证和创建/删除操作的 javascript，这些操作映射到 MVC 方面的静止控制器操作。你如何去实现它取决于你。淘汰赛使它变得容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T16:31:16.373

您需要执行以下操作：

1.  将模型发送到您的控制器并为术语呈现一个可编辑字段。
2.  您要求用户提交此内容或单击添加以添加更多条款。
3.  如果用户单击添加，您将创建现有字段的副本并将其清空或其他任何内容，以便他们可以创建新字段。
4.  当用户提交时，您将其发送回接受一系列术语的操作并将其添加到数据库中或不添加到数据库中。或者您可以使用上面示例中的 ajax，或者从[这个示例](http://knockoutjs.com/examples/cartEditor.html)中您可以看到它发送到服务器的是 json 数组对象，而不是使用命名元素形成的。
5.  您可以在创建它们时对其进行处理，也可以在提交时对其进行处理。

也取决于您的应用程序，因此淘汰赛只是帮助您在客户端进行第 3 步，您从旧副本创建新副本。您也可以为此起诉 JQuery 模板和 json2 以使用旧浏览器支持进行序列化。

您需要了解的是，一旦您在客户端上，您已经将您的模型发送到这里一次，所以不要担心服务器端。无论您在客户端构建什么，都可以一次将一个模型发送到 saveTerm 操作，该操作使用术语 id 和其他信息重新运行 json，或者您可以将 saveTerm 的集合作为 json 数组返回，它可以正常工作。

如果您正在考虑在 postBack 而不是 ajax 上发送一个数组，只需保持表单元素名称相同并复制术语输入字段并发送过来。MVC 会将它们映射到一个术语数组，就像它对 json 所做的那样。

# pyside - PySide：带有小动画和按钮的自定义 QListView

> ID：14699623
> 
> 赞同：6
> 
> 时间：2013-02-05T03:16:51.277
> 
> 标签：pyside, qlistview

我想知道**如何使用自定义列表项创建 QListView**。我想在每个条目的左侧显示一个小的精灵动画，并在右侧显示一些信息以及一些按钮。我还需要能够检测到对标题的点击。

我已经调查过了`QListView`，但没有发现我可以用来做这件事。一些[类似](https://stackoverflow.com/questions/3247030/how-to-customize-the-display-of-a-qlistview)[的](https://stackoverflow.com/questions/2597534/is-there-a-way-to-display-icons-in-qlistview-without-text?rq=1) 问题将我指向and ，但没有示例代码，我无法理解它。我坚持使用覆盖的方法 - 我只是不知道如何以产生预期效果的方式覆盖它。`QAbstractItemDelegate``QAbstactListModel``QAbstractItemDelegate``paint()`

非常感谢您的回复！

* * *

即我正在寻找创建这样的东西： ![在此处输入图像描述](../Images/902816b395443533745f96876af27124.png)

# jquery - 复选框的动态下拉列表

> ID：14699630
> 
> 赞同：0
> 
> 时间：2013-02-05T03:17:35.187
> 
> 标签：jquery, checkboxlist, html-select

我想将我当前的代码转换为动态复选框。谁能帮我？

```
<select id="genre" name="genre">
                                    <option value="">-Select-</option>

<select name="category" id="category" multiple="multiple">
                                    <option>-Select-</option>

var options= {
val1:'option1',
val2:'option2',
val3:'option3',
val4:'option4',
}

$('#genre').change(function(){
    $('#category').children().remove().end().append('<option>-Select-</option>');
    if($('#genre').val() == 'Traditional'){
        $.each(traditionalOptions, function(val, text) {
            $('#category').append( new Option(text,text) ); 
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:08:53.103

您是否正在寻找这样的东西：

```
<select id="genre" name="genre">
    <option value="">-Select-</option>
    <option value="classical">Classical</option>
    <option value="traditional">Traditional</option>
</select>
<div id="categories">
Categories go here
</div>

var OPTIONS_MAP = {
    classical: [
        { value: 'loud', text: 'Loud' },
        { value: 'louder', text: 'Louder' },
        { value: 'loudest', text: 'Loudest' }
    ],
    traditional: [
        { value: 'old', text: 'Old' },
        { value: 'older', text: 'Older' },
        { value: 'oldest', text: 'Oldest' }
    ]
};

$('#genre').change(function() {
    // Clear out the <div> where the checkboxes will go
    $('#categories').empty();

    // Add the category checkboxes for the genre
    var options = OPTIONS_MAP[$('#genre').val()];
    if (options) {
        $.each(options, function() {
            $('<label><input type="checkbox" name="category" value="'
                + this.value + '" />' + this.text
                + '</label><br />').appendTo('#categories'); 
        });
    } else {
        $('#categories').append('Categories go here');
    }
}); 
```

[jsfiddle](http://jsfiddle.net/john_s/AUEQD/)

我冒昧地更改了选项，因此它们每个都有一个与显示的文本不同的值。使用 jQuery 生成 DOM 元素有很多不同的方法。我去连接一长串html。我还在每个复选框周围放置了一个“标签”元素，因为它们应该总是有一个。

# c++ - 哪个“标准”是 C++11 标准？

> ID：14699643
> 
> 赞同：3
> 
> 时间：2013-02-05T03:18:44.040
> 
> 标签：c++, c++11, standards

我对什么是 C++11 最终标准感到困惑，如果有这样的东西，什么是标准更新，以及该信息的权威和可信赖来源在哪里。

ISO 网站提供了在[他们的商店](http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=50372)购买的“最终标准”，这似乎是截至 2011 年底的最新标准。

然而，工作组的网站提供了大量的“草稿”，其日期晚于 ISO 出版物。我在 2012 年 11 月在工作组网站上看到的最新版本[(pdf)](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3485.pdf)。

这是否意味着工作组免费拥有更新和更新的规范，而 ISO 则收费出售旧的和过时的文件？或者是别的什么？

可能是描述文件之间关系的官方链接？官方而不是委员会成员的个人博客。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T03:27:36.487

您需要区分“进行中的工作”（AKA：草稿）和ISO 批准的*实际标准。*

C++11 是国际标准，是 ISO 批准的特定文件。有许多修订导致最终标准获得批准，但这些只是修订，而不是最终标准。

标准草案*不是标准*。它们是草稿，就像从 Git 存储库下载随机更改列表不是应用程序的特定版本一样。草案是作为进行中的工作而产生的，以实现*最终*的标准化。但它们不是标准，这就是为什么它们被称为“工作草案”（这就是标题页上的内容）。

只有实际批准的标准才能使以前的标准“过时”。即便如此，它们并没有真正过时，因为编译器不会立即神奇地支持新的编译器。如果有重大更改，代码也不会立即升级以支持新标准。

简而言之，如果你想了解 C++11 是怎么说的，唯一定义 C++11 的文档是 ISO/IEC 14882:2011: Standard For Programming Language C++。之前或之后产生的任何东西都不是 C++11。尽管[N3337](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)非常接近，但请保留较小的编辑更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:49:09.590

ISO 标准流程的官方文档当然[可以在 ISO 的网站上找到](http://www.iso.org/iso/home/standards_development/resources-for-technical-work/stages_of_the_development_of_international_standards.htm)。这是一个非常通用的描述，因为它涵盖了从 ISO 9001（过程质量）到 ISO/IEC 14882 (C++) 的主题。

# c++ - 将纹理传递给网格对象的 D3D9 效果

> ID：14699646
> 
> 赞同：0
> 
> 时间：2013-02-05T03:19:30.993
> 
> 标签：c++, directx, textures, hlsl, mesh

我正在尝试设置一些 DX9 代码来渲染着色器，因为我希望更深入地研究它们。我有一个非常基本的着色器，可以在 FX Composer 中很好地编译和显示，但是在设置我的代码以在我的程序中渲染后，由于某种原因纹理不显示，网格只是深灰色。我认为这可能与 DirectX 处理网格的方式有关，但我不太确定。这是相关的代码片段，一如既往，提前感谢！

.fx 文件

```
float4x4 world_m    : WORLD;
float4x4 view_m     : VIEW;
float4x4 projection_m   : PROJECTION;

Texture gWorldTexture;

sampler2D image = 
sampler_state
{
    Texture = <gWorldTexture>;
    MinFilter = LINEAR;
    MagFilter = LINEAR;
    MipFilter = LINEAR;
    AddressU = CLAMP;
    AddressV = CLAMP;
};

struct VertexIn
{
 float4 pos     : POSITION;
 float2 texco    : TEXCOORD;
};

struct VertexOut
{
 float4 pos     : POSITION;
 float2 texco       : TEXCOORD;
};

struct pixelInput
{   
 float2 texco    : TEXCOORD0;
};

VertexOut  mainVS(VertexIn input)
{
 VertexOut output = (VertexOut)0;
 float4x4 worldview_m       = mul(world_m, view_m);
 float4x4 worldViewProj_m   = mul(worldview_m, projection_m);
 output.pos = mul( input.pos, worldViewProj_m );
 output.texco = input.texco;
 return output;
}

float4 mainPS(pixelInput input) : COLOR0
{
 return tex2D( image, input.texco );
}

technique technique0 
{
 pass p0 
 {
     VertexShader = compile vs_2_0 mainVS();
     PixelShader = compile ps_2_0 mainPS();
 }
} 
```

声明

```
LPD3DXMESH meshSphere;
IDirect3DTexture9 *texture;
LPD3DXEFFECT effect;
D3DXHANDLE gWorldTexture;
D3DXHANDLE technique; 
```

gfx_init 函数

```
LPD3DXBUFFER errorlog;
D3DXCreateTextureFromFile(d3ddev, "earth.png", &texture);    

D3DXCreateEffectFromFile(d3ddev, "dxtshader.fx", 0, 0,     D3DXSHADER_ENABLE_BACKWARDS_COMPATIBILITY, 0, &effect, &errorlog);

D3DXCreateSphere(d3ddev, 5.0f, 25, 25, &meshSphere, NULL); 
```

渲染帧函数

```
void render_frame(void)
{
    d3ddev->Clear(0, NULL, D3DCLEAR_TARGET, D3DCOLOR_XRGB(0, 0, 0), 1.0f, 0);
    d3ddev->Clear(0, NULL, D3DCLEAR_ZBUFFER, D3DCOLOR_XRGB(0, 0, 0), 1.0f, 0);

    d3ddev->BeginScene();

    D3DXMATRIX matView;
    D3DXMatrixLookAtLH(&matView,
    &D3DXVECTOR3 (0.0f, 3.0f, 15.0f),
    &D3DXVECTOR3 (0.0f, 0.0f, 0.0f),
    &D3DXVECTOR3 (0.0f, 1.0f, 0.0f));
    effect->SetMatrix("view_m", &matView);

    D3DXMATRIX matProjection;
    D3DXMatrixPerspectiveFovLH(&matProjection,
                               D3DXToRadian(45),
                               (FLOAT)SCREEN_WIDTH / (FLOAT)SCREEN_HEIGHT,
                               1.0f,
                               100.0f);
    effect->SetMatrix("projection_m", &matProjection);

    static float index = 0.0f; index+=0.03f;
    D3DXMATRIX matRotateY;
    D3DXMatrixRotationY(&matRotateY, index);
    effect->SetMatrix("world_m", &matRotateY);

    effect->Begin(NULL, NULL);
        effect->BeginPass(0);

        effect->SetTexture("gWorldTexture", texture);
            meshSphere->DrawSubset(0);

        effect->EndPass();
    effect->End();

    d3ddev->EndScene(); 

    d3ddev->Present(NULL, NULL, NULL, NULL);

    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:04:57.163

下面是一些代码来生成一个带有纹理坐标的球体：http: [//pastebin.com/GZV8mbbC](http://pastebin.com/GZV8mbbC)，通过这篇文章找到：[http ://www.gamedev.net/topic/629242-d3dxcreatesphere-and-texture/](http://www.gamedev.net/topic/629242-d3dxcreatesphere-and-texture/)

我认为纹理坐标很可能是您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:26:00.250

确实根本没有提供文本坐标，没有任何类型的顶点声明来提供有关顶点数据的信息（例如，您将文本坐标带到顶点着色器:)）

# assembly - 汇编中的加法和乘法

> ID：14699652
> 
> 赞同：-1
> 
> 时间：2013-02-05T03:20:28.390
> 
> 标签：assembly, x86, nasm

我试图解决汇编中的一个问题，我设法编写了代码，但是在显示结果时，我得到了一个奇怪的输出。我想添加 3 个数字的平方，其中一个是负数。这是我的代码，这是我用来组装、链接和运行的代码。谢谢！

编译和执行步骤：

nasm -g -f elf lab1.asm
gcc -o lab1 lab1.o
./lab

```
SECTION .data
message:    db  "Hello, this is Iva.", 0AH
anothermsg  db  "The sum of the numbers %d, %d and %d is %d", 0AH
len:        equ $-message
variable1:  dw  7
variable2:  dw  -11
variable3:  dw  19
SECTION .text
    extern printf
    global main
main:   

mov eax, dword [variable1]
movzx ebx, al
mov eax, ebx

imul eax
push eax

mov eax, dword [variable2]
movzx ebx,al
mov eax,ebx

imul eax
push eax

mov eax, dword [variable3]
movzx ebx,al
mov eax,ebx

imul eax
pop ebx
add eax,ebx
pop ebx
add eax,ebx

push eax

push dword [variable3]
push dword [variable2]
push dword [variable1]
push anothermsg

call printf

mov eax,1
mov ebx,0
int 80h 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:37:43.470

我看到几个错误。

首先，`printf()`接受 ASCIIZ 格式的字符串（所有 C 字符串都是 ASCIIZ、IOW、NUL 终止的）。但是，您的`anothermsg`不以零字节结尾。您必须明确附加一个。

其次，您将整数变量声明为 16 位（`dw`= 16 位），但从内存中获取它们为 32 位（例如`mov eax, dword [variable1]`，`dword`= 32 位）。这可能有效，但意义不大。只需将整数变量声明为 32 位（`dd`= 32 位）。

第三，由于我不知道的原因（也许是因为前面的问题），您将 32 位（或 16 位，取决于人们如何解释它）的值截断为 8 位`movzx`，这使得计算平方-11 错误。

看，您将 -11 存储`variable2`为：

```
1111111111110101 (binary) 
```

在这两条指令之后：

```
mov eax, dword [variable2]
movzx ebx,al 
```

你得到：

```
eax = ????????????????1111111111110101 (??? are the memory contents right after variable2)
ebx = 00000000000000000000000011110101 (245 decimal) 
```

然后在这两条指令之后：

```
mov eax,ebx
imul eax 
```

你得到：

```
eax = 00000000000000001110101001111001 (60025 decimal) 
```

如果你这样做`movsx ebx,al`而不是`movzx ebx,al`，你会得到：

```
eax = ????????????????1111111111110101 (??? are the memory contents right after variable2)
ebx = 11111111111111111111111111110101 (-11 decimal) 
```

然后在这两条指令之后：

```
mov eax,ebx
imul eax 
```

最后：

```
eax = 00000000000000000000000001111001 (121 decimal) 
```

# file - 以空格作为批量参数的文件名

> ID：14699653
> 
> 赞同：2
> 
> 时间：2013-02-05T03:20:38.590
> 
> 标签：file, bash, shell

如果我有一个文件列表，其中一些文件的名称中有空格，生成自，例如：

```
find . -iname "*hs" | grep foo 
```

如何将它们作为参数传递给单个进程，例如`process name1 name2 ...`？

请注意，我想将所有文件名作为单独的参数传递给单个进程，因此标准`for f in *`解决方案不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T03:32:29.057

```
find . -iname "*hs*" -exec grep foo {} +

find . -iname "*hs*" -print0 | xargs -0 grep foo 
```

两者都有效；第一个甚至可能更有效，除非该`+`选项将更少的文件组合到命令行`xargs`中。

如果您通过 shell globbing 生成文件名，则：

```
grep foo *hs* 
```

保留文件名中的间距。用于`ls`生成名称是非常有问题的。

* * *

### 过滤名称

> grep 命令旨在在批量处理之前过滤文件名列表，而不是搜索文件本身的内容。

所以你想要同时匹配' *hs* '和' *foo* '的名字？在这种情况下，你最好`find`还是使用：

```
find . \( -iname "*hs*" -a -iname "*foo*" \) -exec grep foo {} + 
```

使用`find`.

### GNU`grep`扩展`-Z`和`-z`

如果你不能这样做（你的`grep`正则表达式需要太复杂`find`），那么你就会遇到困难，除非你有一个（假设的？）版本`grep`，它将*读取*由空值分隔的“行”。

> `-Z`,`--null`
> 输出一个零字节（ASCII NUL 字符）而不是通常跟在文件名后面的字符。例如，`grep -lZ`在每个文件名之后输出一个零字节，而不是通常的换行符。此选项使输出明确，即使存在包含不寻常字符（如换行符）的文件名。此选项可与 、 、 和 等命令一起使用 `find -print0`， `perl -0`以`sort -z`处理`xargs -0`任意文件名，即使是那些包含换行符的文件名。

这几乎是我们想要的，但不完全是。POSIX 2008[`getdelim()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getdelim.html)函数将是使用的工具；为此目的添加一个`-z`选项`grep`，然后`grep -lzZ ....`在将`find ... -print0`数据馈送到`xargs -0`.

上面的引用来自 Mac OS X 10.7.5 的手册页，GNU`grep`是 2.5.1 版。也许更新版本的 GNU[`grep`](http://www.gnu.org/software/grep/manual/grep.html)可以更好地提供帮助？

你瞧，GNU `grep`2.14 支持必要的选项：

> `-z`,`--null-data`
> 将输入视为一组行，每行都以零字节（ASCII NUL 字符）而不是换行符结尾。与`-Z`or`--null`选项一样，此选项可以与 'sort -z' 之类的命令一起使用，以处理任意文件名。

### 从运行脚本`find`

另一个不容忽视的选项是创建一个由`find`命令运行的脚本：

```
find . -iname "*hs*" -exec ./list-foo + 
```

`list-foo`脚本可能在哪里：

```
for arg in "$@"
do
    case "$arg" in
    (*foo*) echo "$arg";;   # This will still cause problems
    esac
done 
```

这标识了文件；这`echo`是次优的。也许您需要捕获数组中的名称，然后使用数组调用最终命令：

```
array=( )
i=0
for arg in "$@"
do
    case "$arg" in
    (*foo*) array[$((i++))]="$arg";;
    esac
done

if [ "$i" -gt 0 ]
then real_work "${array[@]}"
fi 
```

`real_work`真正起作用的程序（脚本？）在哪里。完成后你可以扔掉`list-foo`它，除非你要一遍又一遍地做同样的过滤工作。

* * *

### 包含空格的通配名称

您可以通过转义空格来全局包含空格的名称：

```
rm -i -- *\ * 
```

这将扩展到名称中带有空格的文件名，这有助于清理文件名包含为测试此问题的答案而创建的文件的目录。

# matrix - 为什么诊断在八度音阶中表现出不一致的行为

> ID：14699667
> 
> 赞同：0
> 
> 时间：2013-02-05T03:22:05.640
> 
> 标签：matrix, octave, diagonal

有人可以解释这里发生了什么吗？

```
octave:1> t = eye(3)
t =

Diagonal Matrix

   1   0   0
   0   1   0
   0   0   1

octave:2> diag(t(3,:))
ans =

Diagonal Matrix

   0   0   0
   0   0   0
   0   0   1

octave:3> diag(t(2,:))
ans =

Diagonal Matrix

   0   0   0
   0   1   0
   0   0   0

octave:4> diag(t(1,:))
ans =  1 
```

为什么前两个返回 3x3 矩阵，而最后一个只是一个数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:11:12.647

问题的出现是因为从 eye(3) 创建 t(1,:) 的方式。

如果您单独输出 t 的行，则结果为：

```
octave.28> t(1,:)
ans = 

**Diagonal Matrix**

   1   0   0

octave.29> t(2,:)

ans = 

   0   1   0

octave.30> t(3,:)

ans = 

   0   0   1 
```

由于某种原因（我无法解释） t(1,:) 仍然被识别为对角矩阵，而 t(2,:) 和 t(3,:) 是向量。当您调用 diag(t(:,1)) 时，它不会接收向量参数，而是接收矩阵。如果在评估之前将 t(:,1) 转换为向量，则会得到预期的结果。

```
octave.31> diag(vec(t(1,:)))
ans = 

**Diagonal Matrix**

   1   0   0
   0   0   0
   0   0   0 
```

# ruby-on-rails - 使用 + 而不是 %2B

> ID：14699668
> 
> 赞同：0
> 
> 时间：2013-02-05T03:22:09.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3, instagram

我正在 Rails 中构建一个 instagram 应用程序。oauth 需要一串范围，`+`并在 url 中将它们分开。但是我注意到 rails 将`+`导致`%2B`我的应用程序授权失败的转换为。

如何`+`在 rails url 中使用符号而不是`%2B`？

**编辑**

编码：

```
redirect_to Instagram.authorize_url(:redirect_uri => CALLBACK_URL, :scope=> "comments+likes") 
```

还可以看看[http://instagram.com/developer/authentication/](http://instagram.com/developer/authentication/)的底部，看看我在说什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:29:24.620

为什么不在每个项目之间发送空格，这应该成为查询字符串中的加号？

# image - 如何在 WP 帖子中传递图像的 HTML ID 和 URL？

> ID：14699671
> 
> 赞同：2
> 
> 时间：2013-02-05T03:22:19.787
> 
> 标签：image, wordpress, post, aviary

我想将 Aviary 编辑器合并到 WordPress 帖子中，以便人们可以单击帖子中图像的编辑按钮，对其进行编辑并保存。Aviary 提供了最后两个的代码，但我不知道如何在编辑按钮的输入标记中传递帖子中图像的 HTML ID 和 URL。我知道这是基本的，但我不是程序员，所以我非常感谢您的耐心和反馈。谢谢。

这是 Aviary 提供的输入静态代码：

```
<!-- Add an edit button, passing the HTML id of the image and the public URL of the image --><p>
<input type='image' src='http://images.aviary.com/images/edit-photo.png' value='Edit photo' 
onclick="return launchEditor('imageid', 'url');" /></p> 
```

我需要知道如何为代码的最后一行传递 ID 和 URL。非常感谢您提供的任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:48:58.610

imageid 是 aviary 使用的 div id，你只需要你创建

```
<div id="imageid"></div> 
```

一个获取图片网址，你可以喜欢这个

```
<?php
  $image = wp_get_attachment_image_src($post->ID);
  $url = $image[0];
?>

<input type='image' src='http://images.aviary.com/images/edit-photo.png' value='Edit photo' onclick="return launchEditor('imageid', '<?php echo $url; ?>');" /></p> 
```

我假设您将其放在附件页面中

# java - 对象数组排序

> ID：14699672
> 
> 赞同：-1
> 
> 时间：2013-02-05T03:22:52.407
> 
> 标签：java, sorting

我了解对数组进行冒泡排序的概念，`Int`但是是否可以将冒泡排序应用于对象数组？具体来说，我想按`int`对象中包含的变量进行排序。

Int 数组只有 1 个 Int 或数组的一个元素的数据成员，但 Objects 有多个数据成员，这才是真正让我感到困惑的部分。

我还研究了比较器，例如 java 的 CompareTo 方法。从我对它的研究中了解到，比较器基本上返回两个对象之间的价值差异。如何将其应用于对数组进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:30:06.903

A[`Comparator<T>`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)不返回两个对象之间的差异。它而是返回`T`.

正如文件所述：

> 返回负整数、零或正整数，因为第一个参数小于、等于或大于第二个。

OOP 的好处是您能够封装数据和行为，这种情况就是一个明显的例子。让我们看看这个样板代码：

```
class HugeClass implements Comparable<HugeClass> {
  // lots of variables

  public int compareTo(HugeClass o) {
    // lots of code to decide if this instance is lesser, equal or greater than o
    // then we return -1, 0 or 1 accordingly
  } 
```

现在您可以轻松实现冒泡排序。取而代之的是直接做`if (x < y)`，就像你对`int`s 做的那样`if (x.compareTo(y) < 0)`，但这是同一个故事，你不关心实际如何计算排序，你只依赖于`compareTo`方法。

实际上，您可以编写一个冒泡排序方法，该方法能够对每个可能的可比较类执行排序。例如：

```
public sort(Comparable<?>[] data) {
  .. code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:32:32.997

*也许这可以帮助您解决困惑：*

```
public class Test {

 public static A a1 = new A("001", "a", "wa~", 7);
 public static A a2 = new A("001", "c", "wa~", 9);
 public static A a3 = new A("001", "b", "wa~", 3);
 public static A a4 = new A("000", "d", "wa~", 6);

 public static void main(String[] args) {
  A[] voA = new A[] { a1, a2, a3, a4 };

  java.util.Arrays.sort(voA, new Mycomparator());

  A[] newA = new A[voA.length];

  for (int i = 0; i < voA.length; i++)
   System.out.println("[" + i + "]:" + voA[i].A1 + " " + voA[i].A2 + " " + voA[i].A3 + " " + voA[i].A4);
 }
}

class A {
 String A1;
 String A2;
 String A3;
 int A4;

 public A(String oA1, String oA2, String oA3, int oA4) {
  this.A1 = oA1;
  this.A2 = oA2;
  this.A3 = oA3;
  this.A4 = oA4;
 }

}

class Mycomparator implements java.util.Comparator {
 public int compare(Object o1, Object o2) {
  A a1 = (A) o1;
  A a2 = (A) o2;
  if(a1.A1.compareTo(a2.A1)!=0) {
   return a1.A1.compareTo(a2.A1);
  } else if(a1.A2.compareTo(a2.A2)!=0) {
   return a1.A2.compareTo(a2.A2);
  } else if(a1.A3.compareTo(a2.A3)!=0) {
   return a1.A3.compareTo(a2.A3);
  } else {
   return a1.A4 >a2.A4?1:a1.A4==a2.A4?0:-1;
  }
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T03:34:00.217

实现 Comparator 的对象不会返回任何类型的差异。当它大于另一个对象时它只返回一个正数，当它小于另一个对象时返回一个负数。这就是 sort 函数所关心的。您可以对对象数组进行排序（实现 Comparable 如下）

```
class MyObject implements Comparable<MyObject>{
  int myInt;
  public int compareTo(MyObject other){
    if(myInt>other.myInt)
      return 1;
    else if(myInt<other.myInt)
      return -1;
    else if(myInt==other.myInt)
      return 0;
    else
      throw new Error("This should never happen");
  }
} 
```

那么如果你有一个数组

```
MyObject[] arr; 
```

你可以用它排序

```
Arrays.sort(arr); 
```

人们接受差异的唯一原因是因为它写起来更快

```
myInt - other.myInt 
```

比编写所有那些 if-else 子句（而且在硬件上也可能更快）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T03:29:57.607

这是一种思考您的困惑的方法：

想象一下，我有一组带有数字的盒子。盒子里有很多物体：大的、小的、红色的、绿色的……如果我让你按照盒子上的数字对盒子（“物体”）进行排序，你就没有问题了。如果我让你查看盒子内部，并按照绿球的大小对它们进行分类，你可能会这样做。无论哪种情况，您都在对对象进行排序...

# sql - 选择由另一列 SQL 分组的列数

> ID：14699674
> 
> 赞同：2
> 
> 时间：2013-02-05T03:23:20.387
> 
> 标签：sql, count, group-by

我有两张表，一张叫做 Products，一张叫做 Products_Category。我想显示每个类别的库存计数（按类别分组），并显示类别的名称。Products 表具有每个产品的库存计数，但 Products_Category 表具有类别名称。如何将两者一起显示？我应该使用某种加入吗？

这是我想要得到的：

Category_Name --------- Sum(Products_Inventory)

------书籍-------- 1 ----------
------玩具----- ----------------- 2 ----------

但截至目前，我只能显示类别*ID*而不是类别*名称*，如下所示：

-------- 1 ------------ 1 ----------
-------- 2 ---------- 2 ----------

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:25:16.743

使用`JOIN`和`GROUP BY`：

```
SELECT PC.Category_Name, Sum(P.Products_Inventory)
FROM Products_Category PC
   INNER JOIN Products P ON PC.ProductId = P.ProductId
GROUP BY PC.Category_Name 
```

顺便说一句——这假设您在每个表中都有一个 ProductId 字段。如果我可以提出建议，您可能也应该有一个类别表（更好地进行规范化）。将您的 ProductId 和 CateogryId 存储在 Products_Category 表中。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:25:44.640

对于这些查询，我假设`product_id`是在两个表上（如果我猜错了，你必须使用正确的字段名称）。我也`Product_Category.description`用作具有类别名称的字段的名称。

此查询将为您获取所有类别，以及在表中**未**找到的任何产品类别的计数为 0 。`Product`

如果库存`Product`中的每个*产品*都包含一条记录（即，4 本书意味着 4`Product`条记录），那么这`COUNT()`就是您想要的功能。

```
SELECT Products_Category.description, COUNT(Product.product_id) AS category_count
FROM Products_Category
   LEFT OUTER JOIN Products ON Products_Category.product_id=Products.product_id
GROUP BY Products_Category.description 
```

如果库存中每种*类型*`Product`的产品都包含一条记录（即，4 本书意味着 1 条记录，其中 a为 4），那么这就是您想要的功能。*`product_count``SUM()`*

 *```
SELECT Products_Category.description, SUM(Product.product_count) AS category_count
FROM Products_Category
   LEFT OUTER JOIN Products ON Products_Category.product_id=Products.product_id
GROUP BY Products_Category.description 
```

如果您只希望在该类别中有库存时返回记录，请将其更改`LEFT OUTER JOIN`为`INNER JOIN`：

```
SELECT Products_Category.description, SUM(Product.product_count) AS category_count
FROM Products_Category
   INNER JOIN Products ON Products_Category.product_id=Products.product_id
GROUP BY Products_Category.description 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T04:19:23.463

最简单的方法是这样做..

SELECT a.Category_Name, Sum(b.Products_Inventory)
FROM Products_Category a, Products b
where a.ProductId = b.ProductId
GROUP BY a.Category_Name

希望能帮助到你*

# c# - 如何从后面的代码访问 XAML 中的元素（组合框）

> ID：14699678
> 
> 赞同：0
> 
> 时间：2013-02-05T03:24:13.910
> 
> 标签：c#, wpf, xaml, data-binding

如何访问嵌套在 XAML 中的控件`GridViewColumn.CellTemplate`？通过访问组合框，我想`ItemsSource`在后面的代码中设置它。

代码：

```
<GridViewColumn Width="80">
    <GridViewColumnHeader Content="UseCLUT"/>
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <Grid>
                <TextBlock Text="{Binding Path=UseCLUT}" Style="{StaticResource GridBlockStyle}"/>
                <ComboBox x:Name="combTrueFalse" SelectedItem="{Binding Path=UseCLUT}" Style="{StaticResource GridEditStyle}" />
            </Grid>
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

我已将组合框命名为 combTrueFalse 并尝试在后面的代码中引用它，但找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:46:25.453

我找到了解决这个问题的方法。

我已将组合框的集合设置为包含组合框选择的集合的类。

mainWindow 类包含数据类的变量。

```
 ItemsSource="{Binding ElementName=mainWindow, Path=data.comboxTFSmall}" 
```

意思是说我已经将组合框的项目设置为一个包含集合的类，而不是来自后面的代码。

```
 <GridViewColumn Width="80" >
                                <GridViewColumnHeader Content="UseCLUT"/>
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <TextBlock Text="{Binding Path=UseCLUT, Mode=TwoWay}" Style="{StaticResource GridBlockStyle}"/>
                                            <ComboBox ItemsSource="{Binding ElementName=mainWindow, Path=data.comboxTFSmall}" SelectedValue="{Binding Path=UseCLUT}" Style="{StaticResource GridEditStyle}" />
                                        </Grid>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn> 
```

如果您发现我的解释具有误导性，请纠正我，谢谢。

问候

# php - 非常简单的 Javascript 部分页面刷新调用 .php 页面不起作用

> ID：14699683
> 
> 赞同：2
> 
> 时间：2013-02-05T03:25:24.087
> 
> 标签：php, javascript, jquery, html, refresh

我已经在互联网上搜索了几个小时，但仍然无法使这个简单的示例工作。我希望有人可以帮助我。我正在尝试使用 Javascript 来显示 php 文件的内容。显示应该经常刷新，因为最终它将用于显示来自 MySql 数据库的文本匹配项，这些匹配项与在搜索栏中输入的字符匹配（类似于 Google 的搜索栏）。我将为此使用 setinterval，但我还没有。我的问题是我有很少的 javascript/AJAX 经验，只是无法让它工作。我已经将它简化为一个简单的请求，但仍然无法使其工作。请建议什么不起作用：

内容应该可见的 index.html 是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="/js/jquery-1.3.2.min.js"></script>
</head>

<body>

<script type="text/javascript">

$().ready(function() {
$("#dynamic").load("blasty.php");
});

</script>
<div id="dynamic"></div>
</div>
</body>
</html> 
```

blasty.php 包含：

```
<?php
echo "hello cruel world!";
?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:39:15.010

确保您的 blasty.php 文件在同一个域中。

此外，为了帮助调试 javascript，请在​​ Chrome 或 Firefox 中右键单击并转到 Inspect Element。然后转到控制台窗口，它将显示大多数错误。

我还推荐这个关于 javascript 的 youtube 视频。我它帮助我弥合了一些 javasrcipt 陷阱的差距。[http://www.youtube.com/watch?v=ljNi8nS5TtQ](http://www.youtube.com/watch?v=ljNi8nS5TtQ)

这是关于调试器的链接：[https ://developers.google.com/chrome-developer-tools/](https://developers.google.com/chrome-developer-tools/)

正如@Explosion Pills 所说，FireFox 的 Firebug 是另一个不错的选择。我将使用两者来帮助调试 javascript。Firebug 很好，因为在 Net 选项卡下，它会显示在后台发生的实际 http 请求，包括参数、响应、标头信息等。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    </head>
    <body>
    <script type="text/javascript">
    $(document).ready(function() {
        $("#dynamic").load("blasty.php");
    });
    </script>
    <div id="dynamic"></div>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:27:52.120

您`document`缺少`$()`.

```
<script type="text/javascript">

$(document).ready(function() {
    $("#dynamic").load("blasty.php");
});

</script> 
```

从视觉上看，这是我看到的唯一问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T03:34:28.120

我使用`$.get`而不是`$.load`.

尝试这样的事情：

```
$.get("blasty.php",
      { nbRandom: Math.random() },
      function(data){
        $("#dynamic").html(data);
      }); 
```

`nbRandom`是为了防止在IE中缓存。

使用 Firebug 确保有来自 AJAX 的响应并从那里开始。

# wordpress - 自定义帖子类型循环仅显示第一个帖子元数据

> ID：14699686
> 
> 赞同：1
> 
> 时间：2013-02-05T03:25:56.377
> 
> 标签：wordpress, custom-post-type

我正在查询存档模板中的自定义帖子类型。每个帖子都附加了元值。该循环确实列出了每个帖子，但每个帖子上的元值都是从第一个帖子中提取的。所以，我有一个帖子列表，所有的元值都是相同的，数据保存在第一个帖子上。数据已正确保存在数据库中。这是我的循环：

```
$current_time = current_time('mysql'); 
list( $today_year, $today_month, $today_day, $hour, $minute, $second ) = split( '([^0-9])', $current_time );
$current_timestamp = $today_year . $today_month . $today_day . $hour . $minute;

$args = array( 'post_type' => 'event',
'order' => 'ASC',
'orderby' => 'meta_value_num',
'posts_per_page' => 20,
'meta_key' => '_start_eventtimestamp',
'meta_query' => array(
    array(
        'key' => '_start_eventtimestamp',
        'value' => $current_timestamp,
        'compare' => '>'
    )
)
 );
// Gets the event start month from the meta field
$month = get_post_meta( $post->ID, '_start_month', true );
// Converts the month number to the month name
//$month = $wp_locale->get_month_abbrev( $wp_locale->get_month( $month ) );
// Gets the event start day
$day = get_post_meta( $post->ID, '_start_day', true );
// Gets the event start year
$year = get_post_meta( $post->ID, '_start_year', true );
$numdays = get_post_meta( $post->ID, '_tour_numdays', true );
$price = get_post_meta( $post->ID, '_tour_price', true );

query_posts( $args );

    while (have_posts() ) : the_post();
    echo '<ul>';
        echo '<li>' . $month . '/' . $day .'</li>';
        echo '<li><a href="' . get_permalink() . '">' . get_the_title() . '</a></li>';
        echo '<li>' . $numdays . '</li>';
        echo '<li>' . $price . '</li>';
        echo '<li><a href="#">Join this Trip</a></li>';
    echo '</ul>';
    endwhile; 
```

我找不到解决方案。我尝试将查询从更改为`WP_Query`，`query_posts`但仍然没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:37:27.523

这是你的逻辑：

```
Get Post Metas ($price, $month, etc.)

Query Post (retuned an array of posts)

Begin looping the array of posts

Echo the results, including Post Metas ($price etc) which is NOT the metas of each post

End loop 
```

`get_post_meta()`您需要通过在循环内使用来获取每个帖子的元数据。

你目前正在做：

```
$month = get_post_meta( $post->ID, '_start_month', true ); 
```

... $post->ID**不是**每个帖子的 ID，只有第一个。

这是 while() 应该是什么样子的示例（我最好不要提供确切的示例，因为我可能会错过一些可能会增加混乱的东西）：

```
while (have_posts() ) : the_post();

$month = get_post_meta( $post->ID, '_start_month', true ); // here it is
// $day = ... continue here

echo '<ul>';
    echo '<li>' . $month . '/' . $day .'</li>';
    echo '<li><a href="' . get_permalink() . '">' . get_the_title() . '</a></li>';
    echo '<li>' . $numdays . '</li>';
    echo '<li>' . $price . '</li>';
    echo '<li><a href="#">Join this Trip</a></li>';
echo '</ul>';
endwhile; 
```

# javascript - NoClickDelay.destroy() 方法或“如何删除 NoClickDelay() 函数”

> ID：14699690
> 
> 赞同：0
> 
> 时间：2013-02-05T03:26:58.920
> 
> 标签：javascript, mobile, dom-events, touch-event

据我所知，[Spinelli 的 NoClickDelay JS 库](http://cubiq.org/remove-onclick-delay-on-webkit-for-iphone)无法“撤消”其功能。

例如：

```
var a = new NoClickDelay('body');
console.log(a)
//returns NoClickDelay

delete a;
console.log(a)
//still returns NoClickDelay

a = null;
//a is now empty, but NoClickDelay still exists 
```

我知道我可以取消绑定`onTouchStart`,`onTouchMove`和`onTouchEnd`事件，但是如何`new NoClickDelay()`从内存和 DOM 中删除实例化的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:09:45.540

尝试以下操作：

```
var Obj = {};
Obj.a = new NoClickDelay('body');
console.log(a);
delete Obj.a;
console.log(a); 
```

小提琴：http: [//jsfiddle.net/benno_007/euATH/1/](http://jsfiddle.net/benno_007/euATH/1/)

您不能删除变量。

> 删除 y; // 返回 false（删除不影响变量名）

来源：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)

**编辑：** 在删除事件监听器方面，尝试添加这个函数并运行它

```
function undoNoClickDelay(el) {
    if( window.Touch ) {
            el.removeEventListener('touchstart', this, false);
            el.removeEventListener('touchmove', this, false);
            el.removeEventListener('touchend', this, false);
            delete Obj.a;
    }
} 
```

# ios - 在保持功能的同时在两个子视图之间切换

> ID：14699691
> 
> 赞同：0
> 
> 时间：2013-02-05T03:27:07.933
> 
> 标签：ios

我想制作一个简单的应用程序，该应用程序在视图顶部有一个带有条形（~50px 高）的表格。该栏将包括一个搜索按钮。按下搜索按钮时，我想用搜索栏替换栏中的视图。我想不出最好的方法来做到这一点。

我在这里有几个选择。我可以以编程方式完成，或者制作每个视图的自定义 .xib 文件并将它们换出。使用自定义 .xib 文件，我不知道如何将功能传递给主 ViewController。

我想在某个地方有一些关于这个的点点滴滴。我想就如何做到这一点的最佳方法获得一些意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:46:25.783

我以这种方式实现了这个功能：

1.  创建一个 UIToolbar 并将其放在顶部（可以在 Storyboard 中完成），为其创建一个属性
2.  创建一个 UISearchBar 并将其放置在顶部附近，然后为其创建一个属性并将 isHidden 设置为 true

在您的代码中：

1.  将 UISearchBar 的框架设置为工具栏的框架。

    `[self.searchBar setFrame:self.toolBar.frame];`

2.  在工具栏中创建一个“搜索”按钮，它将设置 searchBar 的 isHidden = NO 和 toolBar 的 isHidden = YES。

3.  配置 serchBar 的取消按钮以反转两个栏的 isHidden 字段。

这将没有动画。只是一个完整的替换。

要让它动画，使用类似的东西：

```
[self.searchBar setHidden:NO];
[UIView transitionWithView:self.searchBar duration:0.5 options:UIViewAnimationOptionTransitionFlipFromLeft animations:^{} completion:^(BOOL finished) {
    [self.toolBar setHidden:YES];
}]; 
```

# ios - 归档/取消归档 NSMutableDictionary 时出错

> ID：14699692
> 
> 赞同：0
> 
> 时间：2013-02-05T03:27:10.930
> 
> 标签：ios, objective-c, ios6, nskeyedarchiver

在我的应用程序中，我有一个名为 matchDataDictionary 的字典，我设置了以下内容：

```
[[GCTurnBasedMatchHelper sharedInstance].matchDataDictionary setObject:deck forKey:@"deck"]; 
```

其中甲板是甲板的一个实例：[https ://gist.github.com/naderhen/4711899](https://gist.github.com/naderhen/4711899)

然后，我尝试使用以下内容测试归档/取消归档：

**存档（这似乎有效）：**

```
NSMutableData *newData = [[NSMutableData alloc] init];
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:newData];
[archiver encodeObject:[GCTurnBasedMatchHelper sharedInstance].matchDataDictionary forKey:@"root"];
[archiver finishEncoding];

NSLog(@"Archived Data: %@", newData); 
```

**取消归档（不起作用）：**

```
NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:newData];
NSMutableDictionary *matchDataDictionary = [unarchiver decodeObjectForKey:@"root"];
[unarchiver finishDecoding];

NSLog(@"Unarchived Data: %@", matchDataDictionary); 
```

任何关于如何有效归档和随后取消归档这些数据的指导将不胜感激。如果有帮助，这适用于使用 GameKit 框架的回合制游戏，因此我正在尝试准备用户操作以通过当前比赛的 matchData 发送。

还！任何关于我如何修复 Deck 编码以包含其“Tiles”数组的建议将不胜感激。

非常感谢！

纳德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:31:39.710

使用 NSCoding 协议。每个实体对自己进行编码，然后对自己进行解码。有点神奇，它是多么容易，随着应用程序的增长，人们可以将功能添加到对象图的新部分，而无需了解存档器/取消存档器或其格式。

[NS编码协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)

我在 GitHub 上有一个开源项目，可以轻松地对 JSON 进行 NSCoding 或从 JSON 进行 NSCoding：[JSONCoding](http://github.com/ontometrics/JSONCoding.git)。

这是我开发之前的一些代码（来自单元测试）：

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:firstDish];
RestaurantDish *retrievedDish = [NSKeyedUnarchiver unarchiveObjectWithData:data];
assertThat(retrievedDish.name, is(dishName)); 
```

实例 firstDish 只是表示一盘食物的实体 Dish。

# c# - 我们可以将任何格式的文件转换为字节、散列、保存并能够在 C# 中检索它吗？

> ID：14699700
> 
> 赞同：0
> 
> 时间：2013-02-05T03:28:39.027
> 
> 标签：c#, hash, cryptography

我知道这可能很复杂，但我只是在寻找关于这个想法的意见。我打算将特定文件保存在数据库中，然后我想知道是否可以使它更安全。所以我想把它转换成字节，执行散列算法，然后将它保存在我的数据库中。但我的问题是，我不确定，我不知道这是否是正确的方法。我可以将这些文件检索到其原始阶段吗？希望有人能帮忙。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:31:18.350

您当然可以散列文件并保存散列值。

看看 HashAlgorithm.ComputeHash

[http://msdn.microsoft.com/en-us/library/xa627k19.aspx](http://msdn.microsoft.com/en-us/library/xa627k19.aspx)

MSDN 示例明白了这一点，但存在缺陷：

```
FileStream fileStream = fInfo.Open(FileMode.Open);
// Be sure it's positioned to the beginning of the stream.
fileStream.Position = 0;
// Compute the hash of the fileStream.
hashValue = myRIPEMD160.ComputeHash(fileStream); 
```

请务必处理掉类似`FileStream`工具的东西`IDisposable`。

**更新**

只是要清楚......哈希对于*验证*文件自创建哈希以来未被更改/篡改很有用。

您仍然必须存储文件本身。您不能从哈希重新创建文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:35:37.760

如果您正在谈论执行加密哈希以使其更安全（即加密），那么问题在于它是不可恢复的。

如果你想加密文件，那么我会考虑使用 AES（[简单的不安全的双向“混淆”用于 C#](https://stackoverflow.com/questions/165808/simple-2-way-encryption-for-c-sharp)）

现在，如果您正在创建文件的哈希校验值（或 MD5 校验和）以供以后比较，那么根据 Eric 的帖子，这是完全可以接受和可行的

# sql - 循环遍历所有行并连接 SQL 表中的唯一值

> ID：14699703
> 
> 赞同：1
> 
> 时间：2013-02-05T03:29:24.470
> 
> 标签：sql, oracle, stored-procedures, foreach, grouping

我有两个要合并的表。

表 1 由许多行组成，下面是一些 -

```
col1   col2  col3  col4

val1   val2  val3  val4
val1   val2  val3  val5
val1   val2  val3  val6
valx   valy  valz  val4
valx   valy  valz  val5 
```

（val* 都是字符串）

表 2 包含唯一行（大约 1000 行）- col1 col2 col3 col4

```
val1   val2  val3  -
valx   valy  valz  -
vala   valy  valz  - 
```

我想合并这两个表，表 2 如下 -

```
col1   col2  col3  col4

val1   val2  val3  val4,val5,val6
valx   valy  valz  val4,val5
vala   valy  valz  - 
```

Foreach 表 2 中的行，我想找到 col4 表 1 的唯一值并将它们连接起来

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T04:39:57.913

您可以使用您的格式连接为字符串聚合`Table1`，

```
SELECT col1,
     col2,
     col3,
     listagg(col4, ',') within GROUP(
ORDER BY col4) AS col4
FROM agg_test
GROUP BY col1,
     col2,
     col3; 
```

你可以得到如下结果：

```
col1    col2    col3    col4
______________________________________    
val1    val2    val3    val4,val5,val6
valx    valy    valz    val4,val5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:09:17.100

您要求的是 table2 中名为 col4 的多值列。Oracle 不支持多值列。您可以做的是使用 table2 的外键创建另一列并将您的多值数据保存在那里。

例如

```
Table 3

table2_id value
1         val4
1         val5
1         val6
2         val4
2         val5 
```

# java - GAE HTTP 会话；为什么禁用它？

> ID：14699705
> 
> 赞同：1
> 
> 时间：2013-02-05T03:29:29.803
> 
> 标签：java, google-app-engine, httpsession

我的问题是关于 Java GAE 应用程序（[链接](https://developers.google.com/appengine/docs/java/config/appconfig#Enabling_Sessions)）中的 HTTP 会话。在*appengine-web.xml*的默认版本中，会话被禁用。此 HTML 注释位于 XML 文件的每个起始版本中：

```
 <!--
    HTTP Sessions are disabled by default. To enable HTTP sessions specify:

      <sessions-enabled>true</sessions-enabled>

    It's possible to reduce request latency by configuring your application to
    asynchronously write HTTP session data to the datastore:

      <async-session-persistence enabled="true" />

    With this feature enabled, there is a very small chance your app will see
    stale session data. For details, see
    http://code.google.com/appengine/docs/java/config/appconfig.html#Enabling_Sessions
  --> 
```

我显然理解设置`<sessions-enabled>`为 true 的好处：我们可以利用 servlet 中的 HTTP 会话。然而，这让我想知道为什么任何人一开始就**不想**启用会话。启用会话的缺点是什么？有哪些用例可以使它们保持禁用状态？

我不确定这个问题是否与 GAE 的 Python 或 Go 运行时有关，我只知道 Java 运行时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T03:40:58.763

启用会话的缺点是更高的运营成本。许多大型、高流量的网站不保留匿名用户的会话数据以节省基础设施。随着带宽、CPU 和内存变得更便宜，这变得越来越不重要。当然，这取决于您的预算、您的网站做什么以及您希望它在预算范围内扩展多少。

HTTP 是一种无状态协议。这使得它易于实施且非常可扩展，这是其惊人成功的两个原因。

过度依赖会话会使许多 Web 应用程序变得不必要地复杂且难以扩展。

# asp.net - SQL 注入存储过程

> ID：14699710
> 
> 赞同：0
> 
> 时间：2013-02-05T03:29:47.407
> 
> 标签：asp.net, sql-server, tsql, stored-procedures, sql-injection

我正在学习 SQL 注入并想尝试一个。

我创建了一个 Web 应用程序并创建了一个存储过程来访问我的数据库中的一些信息。

这是我的存储过程和 asp .net 应用程序中的代码

```
Create Procedure spTest
(
    @UserName varchar(20),
    @UserPwd varchar(max)
)
AS
Begin
Declare @sql varchar(max)
set @sql = 'select UserName,UserPwd from Users where UserName='''+ @UserName+ ''' 
                                                And UserPwd = '''+ @UserPwd + ''' '
Exec(@sql)
End 
```

C#代码：

```
string connString = System.Configuration.ConfigurationManager.ConnectionStrings["connStr"].ConnectionString;
using (SqlConnection con = new SqlConnection(connString))
{
   SqlCommand cmd = new SqlCommand("spTest",con);
   cmd.CommandType = CommandType.StoredProcedure;
   cmd.Parameters.AddWithValue("@UserName",txtUserName.Text);
   cmd.Parameters.AddWithValue("@UserPwd", txtPassword.Text);
   con.Open();
   SqlDataReader dr = cmd.ExecuteReader();
   dr.Read();
   if (dr.HasRows)
   {
       labelLogin.Text = "Logged in";
   }
   else 
   { 
      labelLogin.Text = "Not logged in"; 
   } 
```

在用户名的文本框中，我输入`bobby' or 1=1--`

“bobby”是一个无效的用户名。

现在，我认为应用程序会使用假用户名登录，因为 1=1 始终为真，并且 SQL 语句的其余部分被注释掉。

但是，它显示“未记录”我在这里缺少什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:54:43.917

您是否只输入 bobby' OR 1=1 --' 作为用户名？它仍然会尝试匹配密码，因为它位于单独的行上。如果您将其与有效密码结合使用或输入 bobby' OR 1=1 --' 作为密码，它应该可以工作。

第一种情况：

```
select UserName,UserPwd from Users 
where UserName='bobby' OR 1=1 --'
And UserPwd = 'xyz' 
```

第二种情况：

```
 select UserName,UserPwd from Users 
    where 'UserName'='bobby' OR 1=1 --'
    And 'UserPwd' = 'bobby' OR 1=1 --' 
```

第一种情况等于：

```
select UserName,UserPwd from Users 
where 
    UserName='bobby' OR 
    (1=1 And UserPwd = 'xyz') 
```

第二种情况等于：

```
select UserName,UserPwd from Users 
where 'UserName'='bobby' OR
    (1=1 And 'UserPwd' = 'bobby') OR 
    1=1 
```

# smalltalk - 流过文本

> ID：14699711
> 
> 赞同：1
> 
> 时间：2013-02-05T03:29:56.590
> 
> 标签：smalltalk, pharo

我正在尝试通过文本流式传输并获取可以分配给发件人和收件人的值以使用 SMTPClient 发送邮件

```
 |message sender recipient Stream peek|
  message:= 'To: myemail@gmail.com, otheremail@yahoo.com 
             From: me@hotmail.com , ab@yahoo.com 
             Subject: mail test

             Simple mail from me.'.

  Stream:= message readStream.
  peek:= Stream next.
  peek = $T ifTrue[Stream position 2.
                   peek:= Stream next.
                   peek = $: ifTrue["How can  get everything For To: and From:
                                      as Senders and recipients"]]. 
```

我的另一个问题是

```
 SMTPClient 
  deliverMailFrom: sender
   to: recipient   
   text: message 
   usingServer: 'mail.mydomain'. 
  " ifTrue[Transcript show:('mail sent successfully')]" 
```

我怎样才能检查这个，看看邮件是否成功发送

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:18:08.997

请将您的问题分开，以便我们正确回答。回答您的第一个问题：

```
| message sender recipient stream subject |
message:= 'To: myemail@gmail.com, otheremail@yahoo.com 
           From: me@hotmail.com , ab@yahoo.com 
           Subject: mail test

           Simple mail from me.'.

stream := message readStream.
[stream atEnd] whileFalse: [
    line := stream nextLine trimBoth.

    (line beginsWith: 'To:') ifTrue: [recipient := line allButFirst: 'To: ' size].
    (line beginsWith: 'From:') ifTrue: [sender := line allButFirst: 'From: ' size].
    (line beginsWith: 'Subject:') ifTrue: [subject := line allButFirst: 'Subject: ' size]]. 
```

我认为你应该看看 PharoByExample 这本书。可以在官网免费下载：http: [//pharobyexample.org/](http://pharobyexample.org/)

# python - 在docopt中实现HTTPie

> ID：14699714
> 
> 赞同：1
> 
> 时间：2013-02-05T03:29:58.413
> 
> 标签：python, command-line-interface, httpie, docopt

我正在尝试使用 docopt 实现 HTTPie 的 CLI，但由于某种原因，我无法将 METHOD 作为第一个参数可选。我删除了大部分用于隔离此问题的选项。

此外，HTTPie 的作者获取 REQUEST ITEM 的方式似乎与 docopt 文档有误，因此想知道实现该部分的最佳替代方案是什么。

HTTPie 的完整文档：[https ://github.com/jkbr/httpie](https://github.com/jkbr/httpie)

[我的文档示例： https](https://gist.github.com/dasickis/4711926) ://gist.github.com/dasickis/4711926

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:46:47.127

**当尝试匹配模式时，**docopt是贪婪的。**所以如果你的模式是：**

 **```
usage: http [METHOD] URL [ITEM...] 
```

然后你运行`$ http google.com bla`docopt 将匹配`google.com`as `METHOD`，因为，哟，这是第一个位置参数！**在这种情况下， docopt**没有任何信息来推断`METHOD`应该是什么样子。但是，如果您有以下用法：

```
usage: http [get|post|put|delete] URL [ITEM...] 
```

然后它知道如果不是`get/post/put/delete`，那么它应该是`URL`。但是，我可以看到这不是最优的：1\. httpie 使用大写名称（被解释为位置参数，而不是 docopt 的命令），2\. 如果有很多命令，则用法可能会变得很长。

如果您不关心与 httpie 的兼容性，我会使用 (A) 小写命令，因为按照惯例，命令是小写的。另一个不兼容的设计决策是 (B) 要求`METHOD`：

```
usage: http METHOD URL [ITEM...] 
```

通过这种方式，您可以使使用模式明确。(C) 为了保持兼容性，我会做以下使用：

```
usage: http URL [ITEM...] 
       http METHOD URL [ITEM...] 
```

在这种情况下，第二个子模式将永远不会匹配（**docopt**对 url 和方法一无所知，这使得第一个模式成为第二个模式的超集），然后我将参数分解为：

```
positional_arguments = [args['URL']] + args['ITEM'] 
```

然后`positional_arguments`手动解析，具体取决于第一个参数看起来像 url 还是像请求动词。

抱歉，**docopt**没有优雅地处理这个案例，我会更多地考虑这个用例。如果您有任何建议，请创建一个问题：[https ://github.com/docopt/docopt/issues](https://github.com/docopt/docopt/issues)

**PS**您是对的，这`REQUEST ITEM`是错误的，非常非常规且令人困惑。它应该是`REQUEST-ITEM`or`REQUEST_ITEM`或 just `ITEM`。**

# python - 如何在 python webdriver 中为 phantomjs/ghostdriver 设置代理？

> ID：14699718
> 
> 赞同：25
> 
> 时间：2013-02-05T03:30:20.347
> 
> 标签：python, proxy, webdriver, phantomjs, ghostdriver

我试图弄清楚如何通过 HTTP 代理路由我的请求。

我正在像这样初始化 webdriver：

```
user_agent = 'my user agent 1.0'
DesiredCapabilities.PHANTOMJS['phantomjs.page.settings.userAgent'] = user_agent
driver = webdriver.PhantomJS() 
```

我已经浏览了文档和源代码，似乎找不到通过 webdriver 使用带有 phantomjs 的代理服务器的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-05-03T07:13:34.877

下面是如何在 Python 中为 PhantomJs 设置代理的示例。您可以更改代理类型：socks5/http。

```
service_args = [
    '--proxy=127.0.0.1:9999',
    '--proxy-type=socks5',
    ]
browser = webdriver.PhantomJS('../path_to/phantomjs',service_args=service_args) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T08:01:12.813

我挖了一点，发现功能在那里，但没有暴露出来。所以它需要一个方便的活动扳手来修补它。这是适用于我的解决方案，直到此功能在 webdriver 调用中完全公开。

编辑：似乎 service_args 现在暴露了，你不再需要修补 selenium 来使用代理......请参阅@alex-czech 答案以了解如何使用。

```
from selenium import webdriver
from selenium.webdriver.phantomjs.service import Service as PhantomJSService

phantomjs_path = '/usr/lib/node_modules/phantomjs/lib/phantom/bin/phantomjs'
# monkey patch Service temporarily to include desired args
class NewService(PhantomJSService):
    def __init__(self, *args, **kwargs):
        service_args = kwargs.setdefault('service_args', [])
        service_args += [
            '--proxy=localhost:8080',
            '--proxy-type=http',
        ]
        super(NewService, self).__init__(*args, **kwargs)
webdriver.phantomjs.webdriver.Service = NewService
# init the webdriver
self.driver = webdriver.PhantomJS(phantomjs_path)
# undo monkey patch
webdriver.phantomjs.webdriver.Service = PhantomJSService 
```

以下设置也很有用，尤其是在使用可能需要很长时间才能加载的代理时。

```
max_wait = 60
self.driver.set_window_size(1024, 768)
self.driver.set_page_load_timeout(max_wait)
self.driver.set_script_timeout(max_wait) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-21T13:40:57.217

以下是如何在 Ruby 中对 Webdriver 执行相同操作。在我深入研究源代码之前，我无法在网上任何地方找到它：

```
phantomjs_args = [ '--proxy=127.0.0.1:9999', '--proxy-type=socks5']
phantomjs_caps = { "phantomjs.cli.args" => phantomjs_args }
driver = Selenium::WebDriver.for(:phantomjs, :desired_capabilities => phantomjs_caps) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-19T20:07:10.883

PhantomJS 更新了 CLI 参数而不更新文档。代理类型必须包含在代理地址中，如下所示：

```
service_args = ['--proxy=http://0.0.0.0:0']
driver = webdriver.PhantomJS(service_args=service_args) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-19T16:48:49.353

我最终需要在 service_args 和作为代理身份验证标头中传递凭据。我不相信 phantomjs 正确地传递代理身份验证。

```
service_args = [
    "--ignore-ssl-errors=true",
    "--ssl-protocol=any",
    "--proxy={}".format(proxy),
    "--proxy-type=http",
]

caps = DesiredCapabilities.PHANTOMJS

authentication_token = "Basic " + base64.b64encode(b'{}:{}'.format(username, password))

caps['phantomjs.page.customHeaders.Proxy-Authorization'] = authentication_token

self.driver = webdriver.PhantomJS(
        service_args=service_args,
        desired_capabilities=caps,
        executable_path="./phantomjs-2.1.1-linux-x86_64/bin/phantomjs") 
```

代理的结构定义为`http://username:password@domain:port`

我冒昧地猜测第一个身份验证参数没有作为标头传递给代理，因此您需要手动执行这两项操作。

# ios - iOS 将 TouchBegan 坐标转换为 OpenGL ES 坐标

> ID：14699719
> 
> 赞同：4
> 
> 时间：2013-02-05T03:30:41.317
> 
> 标签：ios, opengl-es, opengl-es-2.0

这里是 OpenGL ES 的新手。我正在使用以下代码来检测我在 GLKView (OpenGL ES 2.0) 中点击的位置。我想知道我是否触摸了我的 OpenGL 绘制对象。都是二维的。如何将我得到的坐标转换为基于 -1.0 到 1.0 的 OpenGL ES 2.0 坐标？是否已经有内置功能可以做到这一点？

谢谢。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGRect bounds = [self.view bounds];

    UITouch* touch = [[event touchesForView:self.view] anyObject];

    CGPoint location = [touch locationInView:self.view];

    NSLog(@"x: %f y: %f", location.x, location.y);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:30:57.013

-1 到 1 是剪裁空间。如果您的坐标空间在屏幕上显示时位于裁剪空间中，我会说您忘记使用投影矩阵转换空间。如果您正在使用`GLKBaseEffect`（我不建议以后使用，因为它往往会到处发生内存泄漏），那么您需要设置`<baseEffect>.transform.projectionMatrix`一个可以正确转换空间的矩阵。例如，

```
GLKBaseEffect* effect = [[GLKBaseEffect alloc] init];
GLKMatrix4 projectionMatrix = GLKMatrix4MakeOrtho(0, <width>, 0, <height>, 0.0f, 1.0f);
self.effect.transform.projectionMatrix = projectionMatrix; 
```

`width`并且`height`将是设备屏幕/您的`GLKView`/等的宽度和高度。这会自动应用于您传入的坐标，以便您可以使用从 0 到轴和 0 到轴的正常坐标，`<width>`原点`x`位于`<height>`屏幕`y`的左下角。

如果您像我一样使用自定义着色器，那么您可以使用以下方法将投影矩阵作为统一传递： `glUniformMatrix4fv(shaderLocations.projectionMatrix,1,0,projection.m)`

正如他们所说，矩阵在哪里`projection`，并且`shaderLocations.projectionMatrix`是制服名称的标识符。然后，您需要将您的位置乘以投影矩阵。

一旦你从裁剪空间转换出来，无论是通过手动传递矩阵还是设置正确的属性 on `GLKBaseEffect`，OpenGL 空间和 UIKit 空间之间的唯一区别是`y`轴被翻转。`touches`我通过这样的方法和手势识别器转换我收到的触摸。

```
CGPoint openGLTouch = CGPointMake(touch.x, self.view.bounds.size.height - touch.y); 
```

如果您有任何问题，我会尽力澄清，但请记住，我本人对 OpenGL 还比较陌生。:)

# delphi - 禁用键盘快捷键 (delphi)

> ID：14699721
> 
> 赞同：3
> 
> 时间：2013-02-05T03:31:13.730
> 
> 标签：delphi, shortcut, keyboard-shortcuts

我在 Delphi 中创建了一个表单。假设我有一个`Form`带有`speedbutton`标签`"&Add"`（下划线 A，作为键盘快捷键）和一个`dbgrid`（只读状态）（或其他控件，如`TButton`）。

然后我将焦点更改为`Dbgrid`( `dbgrid`got a focus) (或 to `TButton`)。

每次我按上的`a`键，触发器上`dbgrid`的`onClick`方法。`speedbutton`

有时我需要禁用它一段时间，然后我再次启用它。如何禁用`speedbutton`快捷方式？然后如何再次启用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T04:36:10.660

当您按下该按钮时，该表单正在按下该按钮，`A`因为该按钮已表示对该键感兴趣，并且您的表单上没有其他任何内容接受击键。如果您的表单上有一个编辑框，并且它具有输入焦点，则不会触发该按钮。

您可以让控件表明它希望在获得焦点时接收击键，但这通常发生在编写自定义控件时，您可以了解新控件类在接收键盘输入时应该做什么。

如果您不想触发按钮，可以禁用它。另一种选择是在执行通常的单击处理代码之前更改 OnClick 事件处理程序以检查其他条件（例如网格是否具有焦点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T18:37:40.463

您可以通过将速度按钮的标签从 更改为 来禁用快捷`&Add`方式`Add`。当您需要再次启用快捷方式时将其更改回来。

请注意，指定这样的加速器字符会启用*两个*快捷键，一个只是以 开头的键，`&`另一个是相同的键`Alt`。因此，在您的情况下，它们将是`A`and `Alt`+ `A`。同样，消除加速器会禁用这两个快捷方式。因此，请记住，使用这种禁用快捷方式的方法，您将无法使用`A`或使用`Alt`+来触发按钮`A`。

# android - Android KeyboardView 大小不正确

> ID：14699725
> 
> 赞同：4
> 
> 时间：2013-02-05T03:31:55.157
> 
> 标签：android

我最近遇到了 Android 键盘视图的问题。

我想要实现的是一个不错的键盘，我可以在其中添加以像素为单位的键间距，其余空间将由键共享，具体取决于我对它们的加权方式。

我还发现百分比宽度不准确（行末端变化 +-6px）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:31:55.157

每个键都有一个宽度，通常为 64 像素。对于半正常宽度的键，我会分配 32px。对于双倍，我给了它 128px。等等。

然后键盘通过一个名为“fixKeyboard”的函数运行，该函数决定每个键的宽度。你告诉它每行有多少个 64px 宽度的键，它会将键缩放到合适的大小。（即keysPerStandardRow ==键盘宽度是多少像素/64px）

```
private void fixKeyboard(Keyboard k, int keysPerStandardRow)
{
    List<Key> keys = k.getKeys();
    int dw = GlobalHelperFunctions.getDisplay(this).getWidth();
    int ttly = 0;
    int divisor = 64 * keysPerStandardRow;
    int ttl_weights = 0;
    for (Key key : keys)
    {
        //See below for the deal with 424242
        int weight = key.width + (key.gap == 424242 ? 0 : key.gap);
        if (key.gap == 424242)
            key.gap = 0;
        else
            key.gap = (ttl_weights + key.gap) * dw / divisor - ttl_weights * dw / divisor;
        key.width = (ttl_weights + key.width) * dw / divisor - ttl_weights * dw / divisor;
        if (key.y != ttly)
        {
            ttl_weights = 0;
            ttly = key.y;
        }
        key.x = ttl_weights * dw / divisor;
        ttl_weights += weight;
    }
}

...

static public Display GlobalHelperFunctions.getDisplay(Context c)
{
    if (c != null)
    {
        WindowManager wm = (WindowManager)c.getSystemService(Context.WINDOW_SERVICE);
        if (wm != null)
        {
            return wm.getDefaultDisplay();
        }
    }
    return null;
} 
```

唉，这不是故事的结局。似乎键盘视图/键盘在您将 XML 文件交给它的那一刻决定了键盘的宽度。如果由于某种原因您像我一样更改了键，则 android 会将它们缩放回其预先计算的框。我不想要这个，很明显。所以这就是我所做的：我只是通过在每个键（424242px）之间定义一个巨大的水平间隙来强制它具有最大可能的宽度，然后在运行 fixKeyboard 时将其重置为 0。

由于我使用的是这种方法，因此您可以通过不使用触发器编号轻松定义间隙！如果您愿意，可以使用我的 QWERTY 键盘作为示例：

```
<?xml version="1.0" encoding="utf-8"?>
 <Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
         android:keyHeight="80px"
         android:horizontalGap="424242px"
         android:verticalGap="2px" >
     <Row android:keyWidth="64px">
         <Key android:keyLabel="1" android:keycode="KEYCODE_1"/>
         <Key android:keyLabel="2" android:keycode="KEYCODE_2"/>
         <Key android:keyLabel="3" android:keycode="KEYCODE_3"/>
         <Key android:keyLabel="4" android:keycode="KEYCODE_4"/>

         <Key android:keyLabel="5" android:keycode="KEYCODE_5"/>
         <Key android:keyLabel="6" android:keycode="KEYCODE_6"/>
         <Key android:keyLabel="7" android:keycode="KEYCODE_7"/>
         <Key android:keyLabel="8" android:keycode="KEYCODE_8"/>

         <Key android:keyLabel="9" android:keycode="KEYCODE_9" />
         <Key android:keyLabel="0" android:keycode="KEYCODE_0"/>
         <Key android:keyIcon="@android:drawable/ic_input_delete" android:keyOutputText="◁" android:keyWidth="128px" android:codes="0x25C1" android:isRepeatable="true"/>
     </Row>
     <Row android:keyWidth="64px">
         <Key android:keyLabel="q" android:keycode="KEYCODE_Q" />
         <Key android:keyLabel="w" android:keycode="KEYCODE_W"/>
         <Key android:keyLabel="e" android:keycode="KEYCODE_E" />
         <Key android:keyLabel="r" android:keycode="KEYCODE_R" />

         <Key android:keyLabel="t" android:keycode="KEYCODE_T"/>
         <Key android:keyLabel="y" android:keycode="KEYCODE_Y"  />
         <Key android:keyLabel="u" android:keycode="KEYCODE_U"/>
         <Key android:keyLabel="i" android:keycode="KEYCODE_I" />

         <Key android:keyLabel="o" android:keycode="KEYCODE_O" />
         <Key android:keyLabel="p" android:keycode="KEYCODE_P" />
         <Key android:keyLabel="・"/>
         <Key android:keyIcon="@android:drawable/ic_menu_preferences" android:keyOutputText="●" android:codes="0x25CF"/>
     </Row>
     <Row android:keyWidth="64px">
         <Key android:keyLabel="　" android:keyHeight="0px" android:keyWidth="0px" android:horizontalGap="32px"/>
         <Key android:keyLabel="a" android:keycode="KEYCODE_A"/>
         <Key android:keyLabel="s" android:keycode="KEYCODE_S"/>
         <Key android:keyLabel="d" android:keycode="KEYCODE_D"/>

         <Key android:keyLabel="f" android:keycode="KEYCODE_F" />
         <Key android:keyLabel="g" android:keycode="KEYCODE_G"/>
         <Key android:keyLabel="h" android:keycode="KEYCODE_H"/>
         <Key android:keyLabel="j" android:keycode="KEYCODE_J" />

         <Key android:keyLabel="k" android:keycode="KEYCODE_K" />
         <Key android:keyLabel="l" android:keycode="KEYCODE_L" />
         <Key android:keyLabel="ENTER" android:keyOutputText="◒" android:keyWidth="96px"/>
         <Key android:keyLabel="カタ"  android:keyOutputText="◎" android:codes="0x25CE"/>
     </Row>
     <Row android:keyWidth="64px">
         <Key android:keyLabel="「" />
         <Key android:keyLabel="z" android:keycode="KEYCODE_Z"/>
         <Key android:keyLabel="x" android:keycode="KEYCODE_X"/>
         <Key android:keyLabel="c" android:keycode="KEYCODE_C"/>

         <Key android:keyLabel="v" android:keycode="KEYCODE_V" />
         <Key android:keyLabel="b" android:keycode="KEYCODE_B"/>
         <Key android:keyLabel="n" android:keycode="KEYCODE_N"/>
         <Key android:keyLabel="m" android:keycode="KEYCODE_M"/>

         <Key android:keyLabel="、"/>
         <Key android:keyLabel="。"/>
         <Key android:keyLabel="⇧" android:keycode="KEYCODE_SHIFT_RIGHT" android:isModifier="true"/>
         <Key android:keyLabel="HW" android:keyOutputText="◍" android:codes="0x25CD"/>
     </Row>
     <Row android:keyWidth="64px">
         <Key android:keyLabel=" " android:keyWidth="704px"/>
         <Key android:keyLabel="ひら"  android:keyOutputText="◐" android:codes="0x25D0"/>
     </Row>
 </Keyboard> 
```

一些重要的事情：为了在键之前留出一个间隙，我只是添加了一个 0 宽度的键。`<Key android:keyLabel="　" android:keyHeight="0px" android:keyWidth="0px" android:horizontalGap="32px"/>`

另一件事：对于控制键（就像打开 IME 菜单的那个，我使用特殊字符来提醒代码：`android:keyOutputText="◐"`等等。

我花了一些时间寻找打开 IME 菜单的方法，所以这里是： [如何在 Android 中设置/调用新的输入法](https://stackoverflow.com/questions/9777406/how-to-set-call-an-new-input-method-in-android)

HTH，所有代码都是公共领域

# bash - shell sed 获取文件路径

> ID：14699729
> 
> 赞同：0
> 
> 时间：2013-02-05T03:32:26.327
> 
> 标签：bash, shell

我有一个文件路径。

```
/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz 
```

我想得到这部分

```
/T11073_RICekkR/Fq/AS34_59329 
```

作为`$location`.

我怎样才能`sed`得到那些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:38:26.557

使用文件路径时，我发现使用起来更容易`awk`- 但你可以自己决定。这是我要做的：

```
location=$(echo "$path" | awk -F "/" '{ print "", $6, $7, $8 }' OFS="/") 
```

如果您尝试匹配模式，那么`sed`将是一个不错的选择。但是你没有提到任何规格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:50:25.770

使用`cut`或`awk`（按照建议）。

但是要和`sed`你一起做这样的事情：

```
locationpath=/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz
location=$(echo $locationpath | sed 's%\(/[^/]*\)\{4\}\(/[^/]*/[^/]*/[^/]*\).*%\2%') 
```

# php - 更改 PHP 配置后出现奇怪的 PHP 会话问题

> ID：14699732
> 
> 赞同：1
> 
> 时间：2013-02-05T03:32:35.307
> 
> 标签：php, session

所以我有一个 PHP 函数来设置会话变量，如下所示：

```
function createSVar($varext) { 
 [...]
 $_SESSION['v'.$varext) = time(); // hypothetical value set
 [...]
 return $output;
} 
```

以及调用它的函数：

```
function someFunction1() { 
 [...]
 $output = createSVar("name1");
 [...]
 return $output;
}

function someFunction2() { 
 [...]
 $output = createSVar("name2");
 [...]
 return $output;
} 
```

这些函数包含在函数文件中。然后我有一个配置文件设置如下：

```
<?
ob_start();
session_name("mysession");
session_start();
[...]
include("functions.php"); 
```

然后在我的 PHP 页面上使用如下：

```
<?
include("config.php");
[...]
echo someFunction2();
[...]
echo someFunction1(); 
```

我的问题是这个设置在两台使用 PHP 5.2.17 的不同机器上运行良好。在使用 PHP 5.3.0 的第三个中，它没有。`createSVar()`出于某种原因，它会在每次调用函数时更改先前的会话值（对于先前设置的会话变量） 。我检查了更新日志，没有看到任何更新。

这可能是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:41:29.293

我的第一个倾向是在 session_start() 之后调用 ob_start()。Session_start() 需要发送可能被 ob_start() 调用缓冲的 HTTP 标头。

# javascript - 有回调函数时jQuery表单提交不起作用

> ID：14699734
> 
> 赞同：1
> 
> 时间：2013-02-05T03:32:39.640
> 
> 标签：javascript, jquery

我已经为此搜索了很多，但似乎找不到解决方案。我遇到的问题是，当定义了函数时，`jQuery Submit`在 a 上使用该函数`button`不起作用`callback`。例如，这是我拥有的一个小测试代码：

JavaScript

```
function doSomething() {
    alert("Called the function");

    jQuery("#form").bind("submit", function() {
        alert("Form was submitted.");
    });
} 
```

HTML

```
<form id="form" action="">
    <input type="button" onclick="javascript: doSomething();" value="From Button">

    <input type="submit" onclick="javascript: doSomething();" value="From Submit">
</form> 
```

现在，当我单击`button`第二个警报时，不会显示。如果我点击`submit`我会收到两个警报消息。我发现如果我删除该`callback`功能，那么表单提交与两个按钮都可以正常工作。我也尝试`onSubmit`在表单上添加一个，但这也不起作用。

我允许使用（并且不允许更改）的 jQuery 版本是 jQuery **1.3.2**。我知道这是一个非常旧的版本，但由于公司原因，我不允许更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:41:48.860

它应该是

```
jQuery("#form").bind("submit", function() {
    alert("Form was submitted.");
});

function doSomething() {
    alert("Called the function"); 
} 
```

您需要`submit`在提交发生之前绑定处理程序。在您的情况下，表单提交发生，然后您正在注册处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:42:26.053

您会感到困惑，您只需要一个或另一个，因为您通过将 onclick 属性添加到 input 元素来调用 doSomething 。除非您将它放在“doSomething”函数之外，否则永远不会调用此函数中的 jQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T03:46:43.530

好吧，这里有很多话要说。

首先，您将“提交”处理程序绑定到表单——这是正确的，因为表单有一个“提交”事件，而不是按钮。

其次，HTML 标签不会提交表单，除非它们的类型是“提交”。这就解释了为什么绑定到表单的提交处理程序的处理程序不运行。

第三，每次执行 .bind( ) 时，它都会将处理程序的另一个“副本”绑定到事件，因此当您最终单击标签时，它将执行多次。

第四，您不必在 onclick="" 属性中写入“javascript:”。事实上，最好的做法是将活动的 javascript 代码留在 HTML 之外，而是将事件绑定到传递给 jQuery 的函数中——就像你在上面所做的那样。见[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

最后，由于您在提交之前进行警报，我猜您可能想要取消表单提交 - 所以请查看[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

这是执行您可能真正想要的操作的 javascript 代码：

```
 jQuery(function ($) {
            $('#form').submit(function (e) {
                    // do what you have to do
                    e.preventDefault();
            });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T03:43:39.250

发生的事情是，每次用户单击提交按钮时，您都会绑定一个新的“提交”回调。你根本不需要 doSomething 函数。尝试这个：

```
var $submit = $("#submitButton").bind("submit", function(){
    console.log("submit");
}); 
```

...

```
<form>
     <input type="text" />
     <input type="button" />
     <input id="submitButton" type="submit" />
</form> 
```

# jquery - 图像滑块的逻辑会是 jQuery“模式”吗？

> ID：14699742
> 
> 赞同：1
> 
> 时间：2013-02-05T03:33:18.113
> 
> 标签：jquery, design-patterns

我想做一些类似于图像滑块的东西。进入滑块的相同逻辑是我非常需要的东西。我知道存在一百万个插件和教程，但我想要的是从基本的 jQuery 模式中学习，如“滑块”或“手风琴”，而没有任何绒毛。我想查看非常基本的 jQuery 模式来学习。

在[JavaScript 模式集合](http://shichuan.github.com/javascript-patterns/)中找到的模式之一会是我正在寻找的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:00:16.150

我不会将滑块功能称为模式，它更像是一种技巧.. jQuery 的模式确实有限（与 js 它本身.. 或其他语言相比，尽管 jQuery 不被视为一种语言，因为它是一种衍生语言js的工作）

现在 jQuery 的模式（或者在大多数情况下是所有模式）只是一种代码组织方式和代码技巧..

插件创作存在 jQuery 模式...您可以查看[这篇文章，或阅读代码并在](http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/)[jQuery Boilerplate](http://jqueryboilerplate.com)上进行大量评论。

回到您的问题，没有与核心功能相关的模式供您使用，但是您可以使用一个来组织并在将来拥有更好的可扩展代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:27:03.397

图像滑块中没有足够的逻辑来保证正确的软件设计模式。

查看您的链接，其中许多不是模式，而只是对您可以在 javascript 中执行的操作的描述

对于图像滑块本身，让我们从两个组件中查看它：

用户交互组件：按钮（上一个，下一个）或滑块

图片组件：显示当前选中的图片

您真正需要做的就是存储当前选定图像的索引，并在选择该图像时查找将图像滑块滑动到的 x 位置。

这是一个粗略的例子：

[http://jsfiddle.net/mattdlockyer/bNnEw/](http://jsfiddle.net/mattdlockyer/bNnEw/)

你会看到它一开始主要是一个功能循环，它完成所有的腿部工作并存储正确的索引以滑动`#images`div 以使用 jQuery 中的 animate 函数。当用户与按钮交互时调用它，但当滑块触发它的滑动事件时也可以很容易地调用它。有关滑块的更多信息，请参见此处：http: [//jqueryui.com/slider/](http://jqueryui.com/slider/)

就我个人而言，我会采用所有这些函数式编程并将其放入适当的 javascript 模块中。查看此链接，了解如何使用模块模式的一个很好的示例：http: [//www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)

基本上，仅图像滑块的概念并不能保证模式，但是将其包装在一个模块中以便它可以重复使用，甚至可能在同一页面上多次使用，绝对值得做。

Javascript 是一种函数式语言，有很多“模式”可以编写干净、可移植的函数式代码，但恕我直言，它们并不等同于 OOP 设计模式。

享受小提琴，希望这对您的 javascripting 冒险有所帮助。

# php - 如何在 PHP 中使用类的方法设置对象数组

> ID：14699751
> 
> 赞同：0
> 
> 时间：2013-02-05T03:34:45.560
> 
> 标签：php, arrays, object

我正在尝试创建一个我将使用链接的对象数组，我遇到了一个问题，我希望我能得到帮助。这是我的代码：

```
$sql = new sql();
$sqlList[] = $sql->setTable('TableTest1');
$sqlList[] = $sql->setTable('TableTest2');
$sqlList[] = $sql->setTable('TableTest3');
$testDB->delete($sqlList); 
```

sql 类包含一个名为 table 的私有变量，它具有如下的 setter 和 getter 方法：

```
public function setTable($setTable)
{
    $this->table = $setTable;
    return $this;
}

public function getTable()
{
    return $this->table;
} 
```

为了测试这一点，我在 $testDB 对象中有一个简单的删除方法，如下所示：

```
public function delete($sql ,$setClear = true)
{
    echo "<pre>";
    print_r($sql);
    echo "</pre>";
} 
```

我希望返回一个数组，其中的元素包含三个不同的 TableTest 值，但所有三个都只包含“TableTest3”的最后一个条目，如下所示：

```
Array
(
[0] => sql Object
    (
        [table:sql:private] => TableTest3
    )

[1] => sql Object
    (
        [table:sql:private] => TableTest3
    )

[2] => sql Object
    (
        [table:sql:private] => TableTest3
    )
) 
```

我正在使用 PHP 5.4.7。我究竟做错了什么？一个比我有更多经验的程序员建议这种方法能够进行一系列不同的设置来逐步完成，我正在尝试这个来测试我的代码。在我看来，它是在数组的每个条目中引用对象 $sql 而不是我想要的实际对象的副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:41:37.847

您只有“一个”对象，在您创建时创建

```
$sql = new sql(); 
```

而且您刚刚更改了私有 $table 变量 3 次。您需要三个 $sql 对象，每个对象都设置为自己的表。如同：

```
$sql = new sql();
$sqlList[] = $sql->setTable('TableTest1');
$sql = new sql();
$sqlList[] = $sql->setTable('TableTest2');
$sql = new sql();
$sqlList[] = $sql->setTable('TableTest3');
$testDB->delete($sqlList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:43:02.243

用你的`setTable`方法看起来像这样：

```
public function setTable($setTable)
{
    $this->table = $setTable;
    return $this;
}

$sqlList[] = $sql->setTable('TableTest1');
$sqlList[] = $sql->setTable('TableTest2');
$sqlList[] = $sql->setTable('TableTest3'); 
```

中的所有三个“元素”`$sqlList`都只是`$sql`.

如果你想在 上创建一个新实例`setTable`，你可以尝试这样的事情：

```
public function setTable($setTable)
{
    $class=__CLASS__;
    $obj=new $class;
    $obj->table=$setTable;
    return $obj;
} 
```

# android - C 中的错误：数组类型的元素类型不完整

> ID：14699753
> 
> 赞同：1
> 
> 时间：2013-02-05T03:35:21.427
> 
> 标签：android, c, operating-system, kernel

我正在做一个修改部分Android OS的项目，当我尝试实现一个新的系统调用来返回所有进程的状态时，我遇到了以下错误：

```
kernel/sys.c: error: array tpye has incomplete element type. 
```

我在 sys.c 中所做的如下：

```
/***previous code in sys.c***/

SYSCALL_DEFINE2(new_syscall, struct info __user*, buf, int __user*, nr){
    if(!buf || !nr) return -EINVAL;

    int nr_copy;
    int success;

    success = copy_from_user(&nr_copy, nr, sizeof(int));
    if(success == 0) return -EINVAL;
    if(nr_copy < 1) return -EINVAL;

    struct info buf_copy[nr_copy];  /*************

    return 0;
} 
```

编译器抱怨标有星号的行。

我的 info.h 文件如下所示：

```
 #ifndef __LINUX_INFO_H
    #define __LINUX_INFO_H

    struct info {
        long state;         
        pid_t pid;          
        pid_t parent_pid;       
    };

    #endif 
```

我尝试在 sys.c 中包含 info.h，但它根本没有帮助。谁能给我一些关于我应该研究的方向？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:51:36.733

你用的是什么编译器？动态大小的数组是新的 C 功能，可能不受支持。OTOH，它们是在堆栈上分配的，这是内核中*非常*稀缺的商品。`kmalloc`您应该通过或其同类之一为数组分配内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:58:36.430

您是否尝试过将状态显式声明为 long int。

```
long state; 
```

到

```
long int state; 
```

# regex - R：删除“$”符号

> ID：14699761
> 
> 赞同：3
> 
> 时间：2013-02-05T03:35:51.493
> 
> 标签：regex, r

我从网络服务器下载了一些数据，包括为人类格式化的价格，包括美元和千位分隔符。

```
> head(m)
[1] $129,900 $139,900 $254,000 $260,000 $290,000 $295,000 
```

我能够摆脱逗号，使用

```
m <- sub(',','',m) 
```

但

```
m <- sub('$','',m) 
```

不删除美元符号。如果我尝试`mn <- as.numeric(m)`使用 as.integer，我会收到一条错误消息：

> 警告信息：强制引入的 NA

结果是：

```
> head(m)
[1] NA NA NA NA NA NA 
```

如何删除 $ 符号？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T03:39:31.563

```
 dat <- gsub('[$]','',dat)
 dat <- as.numeric(gsub(',','',dat))
 > dat
 [1] 129900 139900 254000 260000 290000 295000 
```

一步到位

```
 gsub('[$]([0-9]+)[,]([0-9]+)','\\1\\2',dat)
[1] "129900" "139900" "254000" "260000" "290000" "295000" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T03:46:31.193

试试这个。这意味着用空字符串替换任何不是数字的东西：

```
as.numeric(gsub("\\D", "", dat)) 
```

或删除既不是数字也不是小数的任何内容：

```
as.numeric(gsub("[^0-9.]", "", dat)) 
```

更新：添加了第二种类似的方法，以防问题中的数据不具有代表性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T03:55:36.090

你也可以使用：

```
x <- c("$129,900", "$139,900", "$254,000", "$260,000", "$290,000", "$295,000")

library(qdap)
as.numeric(mgsub(c("$", ","), "", x)) 
```

**产生：**

```
> as.numeric(mgsub(c("$", ","), "", x))
[1] 129900 139900 254000 260000 290000 295000 
```

如果您想留在基地，请使用`fixed = TRUE`gsub 的参数：

```
x <- c("$129,900", "$139,900", "$254,000", "$260,000", "$290,000", "$295,000")
as.numeric(gsub("$", "", gsub(",", "", x), fixed = TRUE)) 
```

# python - 创建第一个 Django 项目：管理网页不会打开

> ID：14699762
> 
> 赞同：3
> 
> 时间：2013-02-05T03:35:51.983
> 
> 标签：python, django

注意：具体问题在下面。首先，我描述我经历的所有步骤:-)）

我在 Windows 上使用 Python 2.7 和 Django 4.2.1。

我正在创建一个名为“mysite”的项目，它是 docs.djangoproject.com 上使用的项目。

到目前为止，我已经完成了以下操作，就像在教程中一样：

1）typed： `django-admin.py startproject mysite` 这创建了所有标准文件夹，它们是：

```
mysite/
    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py 
```

2) 输入：manage.py runserver，`http://127.0.0.1:8000`在地址栏中输入时，我收到了一条祝贺消息。

到现在为止还挺好..

3）然后我编辑了settings.py文件。首先，我编辑了 DATABASE ENGINE 并输入了以下内容：

```
'django.db.backends.sqlite3' 
```

4) 仍然在 settings.py 中，我指定了一个 DATABASE 名称，以便它创建一个数据库文件。我称之为：

```
'mysitedb' 
```

5）然后我通过键入以下内容同步数据库（以创建表）：

```
manage.py syncdb 
```

6) 然后教程要求创建一个名为 polls 的应用程序。所以我输入：

```
manage.py startapp polls 
```

这创建了以下文件夹和文件：

```
polls/
    __init__.py
    admin.py
    models.py
    tests.py
    views.py 
```

7) 本教程然后要求通过键入以下内容来编辑 models.py：

```
from django.db import models
import datetime
from django.utils import timezone

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

    def __unicode__(self):
        return self.question

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField()

    def __unicode__(self):
        return self.choice_text

    def was_published_recently(self):
        return self.pub_date >= timezone.now() - datetime.timedelta(days=1) 
```

8）继续前进，然后我必须通过键入以下内容来编辑 settings.py 文件中的 INSTALLED_APPS 部分：

```
INSTALLED_APPS = (
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'polls',
) 
```

9）然后我输入以下内容来创建表及其字段（我猜..）：

```
manage.py sql polls 
```

然后打印出以下内容：

```
BEGIN;
CREATE TABLE "polls_poll" (
    "id" integer NOT NULL PRIMARY KEY,
    "question" varchar(200) NOT NULL,
    "pub_date" datetime NOT NULL
);
CREATE TABLE "polls_choice" (
    "id" integer NOT NULL PRIMARY KEY,
    "poll_id" integer NOT NULL REFERENCES "polls_poll" ("id"),
    "choice_text" varchar(200) NOT NULL,
    "votes" integer NOT NULL
);
COMMIT; 
```

10）然后我必须输入这个来创建表（同步）：

```
manage.py syncdb 
```

到目前为止，还是那么好。。

10) 然后他们建议我在命令中运行 python shell 并使用数据库 API。那时一切正常。可以在表格的字段等中添加数据。

但在这里它不起作用。来自本教程的第 2 部分。我必须再次运行服务器（我这样做了：manage.py runserver，它运行良好..）。我打开了一个浏览器网页并输入`http://127.0.0.1:8000/admin/`，我得到了同样的“它成功了！恭喜你的第一个 Django 驱动的页面......”

没有错误信息。那么如何让带有用户登录名（用户名和密码）的管理页面出现？

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T04:10:33.843

通常当 Django 中的管理员不工作时，两个主要罪魁祸首会忘记将以下两行添加到 urls.py 文件中。

```
admin.autodiscover() 
```

和

```
url(r'^admin/', include(admin.site.urls)) 
```

现在您可以继续学习本教程，当您在 admin.py 中注册模型时，不要忘记

```
admin.site.register(MyModelGoesHere, MyModelAdminNameGoesHere) 
```

祝你好运！:)

# wordpress - WordPress 获取条款和帖子查询正在破坏其他帖子

> ID：14699765
> 
> 赞同：0
> 
> 时间：2013-02-05T03:36:47.743
> 
> 标签：wordpress

我有以下查询，旨在显示分类中的术语列表，并在每个术语下显示分配给该术语的帖子列表。

这出现在我的 single.php 帖子页面左侧的边栏中。在页面的主要区域，实际的单个帖子旨在显示。

但是，它不显示当前的单个帖子，而是仅显示最近的单个帖子的标题。

这是我的查询：

```
$terms = get_terms('benefit-cats');
    echo "<ul>";
    foreach ($terms as $term) {
        $wpq = array ('taxonomy'=>'benefit-cats','term'=>$term->slug);
        $query = new WP_Query ($wpq);
        echo "<li class=\"list-item\">".$term->name.""; //<a href=\"".get_term_link($term->slug, 'benefit-cats')."\"></a>//
        echo "<ul class=\"children\">";
        $posts = $query->posts;
        foreach ($posts as $post) {
            echo "<li><a href=\"".get_permalink()."\">".$post->post_title."</a></li>";
        }       
        echo "</ul></li>";
    }
    echo "</ul>"; 
```

我尝试在代码中添加重置查询，但无济于事。我已经确定是这个特定部分导致了问题：

```
$posts = $query->posts;
            foreach ($posts as $post) {
                echo "<li><a href=\"".get_permalink()."\">".$post->post_title."</a></li>";
            } 
```

我在这里到底做错了什么？我一直在解决这个问题 30-40 分钟，但没有任何成功。

希望能解释我的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:36:28.973

尝试使用

```
<?php
if ($query->have_posts() ) : while ($query->have_posts() ) : $query->the_post(); ?>
echo "<li><a href=\"".get_permalink()."\">".the_title()."</a></li>";
<?php endwhile; endif; wp_reset_query(); ?> 
```

代替

```
$posts = $query->posts;
            foreach ($posts as $post) {
                echo "<li><a href=\"".get_permalink()."\">".$post->post_title."</a></li>";
            } 
```

希望这对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:03:46.203

你的论点`WP_Query`没有很好的形成。

以下是分类学应该是这样的（摘自[Codex](http://codex.wordpress.org/Class_Reference/WP_Query)的片段）：

```
$args = array(
    'post_type' => 'post',
    'tax_query' => array(
        array(
            'taxonomy' => 'people',
            'field' => 'slug',
            'terms' => 'bob'
        )
    )
); 
```

在你的论点正确之后，你应该[遍历](http://codex.wordpress.org/The_Loop)结果：

```
while( $query->have_posts() ):
  $query->the_post();
  // It is now that get_permalink() will work
endwhile; 
```

# mysql - 可以免费安装 mySQL Cluster 吗？

> ID：14699766
> 
> 赞同：1
> 
> 时间：2013-02-05T03:36:50.193
> 
> 标签：mysql, cluster-computing, distributed

可以免费安装 mySQL Cluster 吗？ [http://dev.mysql.com/downloads/cluster/7.0.html#win32](http://dev.mysql.com/downloads/cluster/7.0.html#win32)

这只会为您提供 .zip 文件。但它不包含 MSI 安装程序。如果没有安装程序，你怎么会有 C:\ProgramData\MySQL\MySQL Server 7.0\data 下的内容？

我认为您必须为 MSI 付费才能正确安装 mySQL Cluster，对吗？

我尝试解压缩文件，按照说明进行操作，更新了配置文件，但始终无法正常工作。

有人可以确认吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:28:00.470

几个选项。如果您不介意在 Windows 机器上运行 SSH 服务器，那么您可以使用来自 labs.mysql.com 的新自动安装程序。

另一种方法是按照[http://downloads.mysql.com/tutorials/cluster/mysql_wp_cluster_quickstart_windows.pdf](http://downloads.mysql.com/tutorials/cluster/mysql_wp_cluster_quickstart_windows.pdf)中的说明进行操作- 基本上您只需手动复制数据文件。

安德鲁。

# windows - 将文件夹内容复制到创建的 .zip 文件：“找不到文件或没有读取权限”

> ID：14699767
> 
> 赞同：3
> 
> 时间：2013-02-05T03:37:12.677
> 
> 标签：windows, jscript, wsh

我正在尝试使用 JScript 从现有文件夹创建一个 .zip 文件，似乎我的 copyHere 函数没有复制到 .zip 文件夹。相反，即使根据我的 file.attributes 属性的值（32 ）。

这是我正在使用的脚本：

```
//Get commman line arguments
var objArgs = WScript.Arguments;
var zipPath = objArgs(0);
var sourcePath = objArgs(1);

//Create empty ZIP file and open for adding
var fso = new ActiveXObject("Scripting.FileSystemObject");

var file = fso.CreateTextFile(zipPath, true);
// Create twenty-two byte "fingerprint" for .zip
file.write("PK");
file.write(String.fromCharCode(5));
file.write(String.fromCharCode(6));
file.write('\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0');

var objShell = new ActiveXObject("shell.application");
var zipFolder = new Object;

zipFolder = objShell.NameSpace(zipPath);

sourceItems = objShell.NameSpace(sourcePath).items();    

if (zipFolder != null)
{
    zipFolder.CopyHere(sourceItems);  
    WScript.Sleep(1000);      
} 
```

现在 CopyHere 函数用于将 sourcePath 的内容复制到普通文件夹，但是当我尝试创建一个 .zip 文件并将内容复制到该文件夹​​时，什么也没有发生。关于为什么 copyHere 没有将 sourcePath 的内容复制到 .zip 的任何想法？

**调用此脚本的示例**是：

`cscript win-zip.js C:\desired\zip\file.zip C:\path\to\source\folder`

**期望**的结果是创建了 file.zip 并且现在包含源文件夹的内容。这可能是权限问题吗？什么可能导致这种行为？

* * *

**旁注**，使用 vbScript 和相同的命令我可以成功创建和填充 .zip，那么为什么它不能使用 jscript 工作！

```
Set objArgs = WScript.Arguments
ZipFile = objArgs(0)
SourceFolder = objArgs(1)

' Create empty ZIP file and open for adding
CreateObject("Scripting.FileSystemObject").CreateTextFile(ZipFile, True).Write "PK" & Chr(5) & Chr(6) & String(18, vbNullChar)
Set zip = CreateObject("Shell.Application").NameSpace(ZipFile)

' Get items in source folder
Set sourceItems = CreateObject("Shell.Application").NameSpace(SourceFolder).Items

' Add all files/directories to the .zip file
zip.CopyHere(sourceItems)
WScript.Sleep 1000 'Wait for items to be copied 
```

* * *

非常感谢任何*有用的意见，谢谢！*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-27T22:00:45.143

我遇到了同样的问题（文件未找到或没有读取权限，即使根据我的 file.attributes 属性的值我对文件具有读/写权限）。一旦我在目录中的某处找到并禁止使用 copyhere 方法复制的 0 长度文件，问题就消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T22:28:43.617

正如雷蒙德所说，问题是我在`file`我创建的变量中有一个对 .zip 文件夹的开放引用（该文件夹锁定了该文件夹，因此我无法将任何内容复制到其中）。**解决方法**是调用

`file.Close();`

写入文件后，我们可以访问文件以将内容复制到它:)

# php - 为 youtube 视频的图像添加时间戳

> ID：14699771
> 
> 赞同：0
> 
> 时间：2013-02-05T03:37:45.147
> 
> 标签：php, html, css, video, youtube

我正在尝试做的是在 youtube 主页（图片：[单击此处](http://i.imgur.com/uS7RAGm.png)）上获取视频的确切外观，**包括**时间戳。

如果您查看源代码，您会找到指向视频*图像*的链接，但是，我不太清楚如何获取视频的时间戳并将其格式设置为 youtube 仅从一个 youtube 链接（在本例中为：[http](http://www.youtube.com/watch?v=IpBNr-oNT1g) ://www.youtube.com/watch?v=IpBNr-oNT1g ）。我认为这将使用 PHP 完成，但是如何？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:36:44.397

[http://itwigle.com/twig/Capturing_video_thumbnails_with_PHP](http://itwigle.com/twig/Capturing_video_thumbnails_with_PHP)

这是你要找的吗？

# c++ - C++ 中的 volatile 无符号 *

> ID：14699772
> 
> 赞同：3
> 
> 时间：2013-02-05T03:37:49.490
> 
> 标签：c++, pointers, volatile

> **可能重复：**
> [C++ 中的无符号关键字](https://stackoverflow.com/questions/2099830/unsigned-keyword-in-c)

我目前正在学习如何直接访问内存映射设备（特别是 Raspberry Pi GPIO），在一些[示例代码](http://elinux.org/RPi_Low-level_peripherals#GPIO_Driving_Example_.28C.29)中我看到以下内容：

```
// I/O access
volatile unsigned *gpio; 
```

让我感到困惑的是似乎没有定义类型。这是有效的 C++，如果是，上面的代码声明了什么？

谢谢！

PS：我知道 Raspberry Pi StackExchange 但这个问题只与 C++ 语法有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T03:39:24.607

`unsigned`单独是一样的`unsigned int`。

与此相同：

```
volatile unsigned int *gpio; 
```

只是更短。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T03:43:40.370

没有基础类型的`unsigned`限定符只是`unsigned int`.

这`volatile`向编译器表明该值可能会以程序不期望的方式发生变化。换句话说，编译器不应该尝试对值进行任何缓存或优化，因为它不知道它将如何改变。

# html - 并非所有元素都一直在加载 - 主要是在较旧的浏览器上

> ID：14699773
> 
> 赞同：1
> 
> 时间：2013-02-05T03:37:50.753
> 
> 标签：html, dom

所以我在一个网站上工作；[http://taste.fourseasons.com/](http://taste.fourseasons.com/)我注意到从旧浏览器查看网站时，部分页面没有显示。这发生在大约 40% 的时间。有时会丢失标题，有时会丢失整个文本块。

有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:41:29.380

这几乎肯定与正在使用新的（“HTML5”）标签这一事实有关。IE8 不支持这些，并且它不会正确呈现它们或将样式应用于它们。我创建了一个非常简单的脚本，至少可以将样式应用于它们：

[https://github.com/ajcrites/ie.html5.html](https://github.com/ajcrites/ie.html5.html)

关键是`document.createElement('nav')`允许`<nav>`使用和应用样式。这当然必须在`<nav>`元素加载到 DOM 之前完成。

# ruby-on-rails - 可以服务 HTTP 请求的 Rails 测试

> ID：14699776
> 
> 赞同：1
> 
> 时间：2013-02-05T03:38:18.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3

是否可以让 Rails (3.2.9) 测试响应来自外部程序的 HTTP GET 查询（几乎就像您运行了“rails s”一样）？

我有一个 RESTful Rails Web 服务和一个与之对话的配套原生 SDK。我想要它，所以当我运行“rake test”时，其中一个测试会启动一个使用我本机 SDK 的小测试程序，并让该 SDK 向启动它的同一个 Rails 测试环境发出一些 GET 请求。我想让Rails测试等待SDK测试程序退出，如果测试程序遇到错误就报错。

这样，我将针对实际的 Rails 服务器测试实际的本机 SDK 代码，而不是在我的单元测试中模拟 SDK 的请求。

有没有办法做到这一点？

# c# - Excel DNA - 参数适用于电子表格，但不适用于 vba

> ID：14699779
> 
> 赞同：1
> 
> 时间：2013-02-05T03:38:35.603
> 
> 标签：c#, vba, sqlite, excel-dna

这对我来说有点奇怪。

我有以下代码：

```
 public static object[,] dbMultipleSingleQueries(string strDBPath, object[] oSQL)
      {
       //This is needed for attaching a DB.
       object[,] objOut;
       objOut = new Object[1, 1];
       try
       {

        //Prepare DB connection string      
        strDBPath = "Data Source=" +
              @strDBPath +
              ";Version=3";

        //SQL Objs
        SQLiteConnection dbConnection = new SQLiteConnection(strDBPath);
        SQLiteCommand dbCommand = null;
        SQLiteDataAdapter dbAdapter = null;
        DataTable table = new DataTable();
        //For looping
        int j = 0;
        //Conn str
        dbConnection.Open();
        dbCommand = new SQLiteCommand(dbConnection);
        while (j < oSQL.Length)
        {
         try
         {
          dbCommand.CommandText = oSQL[j].ToString();
          dbCommand.CommandType = System.Data.CommandType.Text;
          if (j == (oSQL.Length - 1))
          {
           dbAdapter = new SQLiteDataAdapter(dbCommand);
           dbAdapter.Fill(table);
           objOut = table2Array(table);
          }
          else
          {

           dbCommand.ExecuteNonQuery();
           objOut[0, 0] = "Success!";
          }
         }
         catch (Exception e2)
         {
          System.Console.WriteLine(e2.StackTrace.ToString());
          objOut[0, 0] = e2.StackTrace.ToString();
         }
         j++;
        };
        dbConnection.Close();
        dbConnection = null;

       }
       catch (Exception e)
       {
        objOut[0, 0] = e.StackTrace.ToString();
       }
       return objOut;

      } 
```

如果我从这样的电子表格中提供我的论点，这将非常有效：

```
 o = Application.Run("dbMultipleSingleQueries", "20130201.db", [test]) 
```

其中 [test] 是我的工作簿中的一个范围，其中包含有效的查询，看起来像这样：

`attach database 'a.db' as d1`

`select * from d1.main`

现在，如果我在 vba 中执行以下操作

```
 Option Explicit
    Sub Main()

    Dim sql(1 To 2, 1 To 1)

    sql(1, 1) = "attach database 'a.db' as d1"
    sql(2, 1) = "select * from d1.main"

    o = Application.Run("dbMultipleSingleQueries", "20130201.db", sql)

    End Sub 
```

这不起作用。我收到“类型不匹配”错误。任何输入为什么会是一个巨大的帮助，这让我发疯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:41:32.400

您的函数原型指定第二个参数必须是“Object []”类型 - 但是您传递的变量可能会根据分配认为它是一个字符串数组。

# node.js - 将 base64 图像发布到 Imgur

> ID：14699782
> 
> 赞同：1
> 
> 时间：2013-02-05T03:38:57.523
> 
> 标签：node.js, express

```
http.get('http://path/to/image.jpg', function (res) {
  var img = '';
  res.on('data', function (buff) {
    img += buff;
  });
  res.on('end', function () {
    var data = querystring.stringify({
      image: img.toString('base64'),
      type: 'base64'
    });
    var opts = {
      host: 'api.imgur.com',
      path: '/3/image',
      method: 'POST',
      headers: {
        'Authorization': 'Client-ID myId',
        'Content-Type': 'application/x-www-form-urlencoded',
        'Content-Length': data.length
      }
    };
    var req = https.request(opts, function (res) {
      res.on('data', function (buff) {
        console.log(buff.toString());
      });
    });
    req.end(data);
  });
}); 
```

`img`是我从 URL 下载的字符串。当我执行它时，我得到：

```
querystring.js:114
  return encodeURIComponent(str);
         ^
URIError: URI malformed 
```

如何正确地将帖子数据提交给[Imgur](http://api.imgur.com/endpoints/image#image-upload)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:44:44.643

事情是这样的：你`img`将是一个带有二进制数据的字符串，它不会被正确地进行 base64 编码。正如 switwvu24 提到的，您希望在 base64 编码时有一个缓冲区。不幸的是，该解决方案也不完全正确。

与您已有的相比，最小的变化是创建一个像这样的新缓冲区：

```
var data = querystring.stringify({
  image: new Buffer(img, 'binary').toString('base64')
}); 
```

请注意`'binary'`，这将确保您获得正确的数据转换。另一种解决方案是，当您下载图像时，而不是连接字符串，而是收集数组中的所有块，然后从中创建一个缓冲区`Buffer.concat`：

```
http.get('http://path/to/image.jpg', function (res) {
  var imgData = [];
  res.on('data', function (buff) {
    imgData.push(buff);
  });
  res.on('end', function () {
    var img = Buffer.concat(imgData);
    var data = querystring.stringify({
      image: img.toString('base64'),
      type: 'base64'
    });
    // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:40:30.977

尝试

```
var data = querystring.stringify({
  图片：新缓冲区（img）.toString（'base64'）
});

```

# c# - 什么是通过方法处理每个单独的正则表达式匹配的好模式

> ID：14699783
> 
> 赞同：1
> 
> 时间：2013-02-05T03:39:08.257
> 
> 标签：c#, .net, regex

我试图找出一个模式，我在长字符串上运行正则表达式匹配，每次找到匹配时，它都会对其运行替换。问题是，替换将根据匹配的值而有所不同。这个新值将由一种方法确定。例如：

```
var matches = Regex.Match(myString, myPattern);
while(matches.Success){
   Regex.Replace(myString, matches.Value, GetNewValue(matches.Groups[1]));
   matches = matches.NextMatch();
} 
```

问题（我认为）是，如果我运行 Regex.Replace，所有匹配索引都会变得混乱，因此结果最终会出错。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T03:53:25.133

如果你用一个固定的字符串替换每个模式`Regex.replace`，为你做这件事。您不需要迭代匹配项：

```
Regex.Replace(myString, myPattern, "replacement"); 
```

否则，如果替换依赖于匹配的值，则使用`MatchEvaluator`委托作为 的第三个参数`Regex.Replace`。它接收一个实例`Match`并返回`string`。返回值是替换字符串。如果您不想替换某些匹配项，只需返回`match.Value`：

```
string myString = "aa bb aa bb";
string myPattern = @"\w+";
string result = Regex.Replace(myString, myPattern, 
                      match => match.Value == "aa" ? "0" : "1" );
Console.WriteLine(result);
// 0 1 0 1 
```

如果您确实需要迭代匹配并手动替换它们，则需要从最后一个匹配开始替换到第一个匹配，这样字符串的索引就不会为即将到来的匹配而破坏。这是一个例子：

```
var matches = Regex.Matches(myString, myPattern);
var matchesFromEndToStart = matches.Cast<Match>().OrderByDescending(m => m.Index);
var sb = new StringBuilder(myString);
foreach (var match in matchesFromEndToStart)
{
    if (IsGood(match))
    {
        sb.Remove(match.Index, match.Length)
          .Insert(match.Index, GetReplacementFor(match));
    }
}

Console.WriteLine(sb.ToString()); 
```

请注意，您的匹配项不包含嵌套实例。如果是这样，您要么需要删除另一个匹配项中的匹配项，要么在每次替换后重新运行正则表达式模式以生成新匹配项。我仍然推荐第二种方法，它使用代表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:01:53.010

如果我正确理解您的问题，您希望基于常量正则表达式执行替换，但您使用的替换文本将根据正则表达式匹配的实际文本而改变。

Match 类的 Captures 属性（不是 Match 方法）返回输入字符串中与您的正则表达式匹配的所有匹配项的集合。它包含字符串中的位置、匹配值和匹配长度等信息。如果您使用 foreach 循环遍历此集合，您应该能够单独处理每个匹配项并执行一些字符串操作，您可以在其中动态修改替换值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T04:08:05.110

我会使用类似的东西

```
Regex regEx = new Regex("some.*?pattern");
string input = "someBLAHpattern!";
foreach (Match match in regEx.Matches(input))
{
    DoStuffWith(match.Value);
} 
```

# html - 将居中的 div 对齐到 100% 的高度，并在任何浏览器、不透明度和其他问题上在其他两个 div 之间拉伸

> ID：14699791
> 
> 赞同：1
> 
> 时间：2013-02-05T03:39:42.297
> 
> 标签：html, css

所以，我有几个问题。有问题的网站在这里：

www.vutallindustries.com/penultimatum

我想要做的是让中心框在已经在侧面的两个 div 之间伸展，但也占据整个屏幕（只是不要超过我已经设置的上边距），目前，DIV 将伸展使用文本并根据需要调整大小，但前提是我输入了那么多文本。不喜欢依靠文字来做我的工作！

另一件事是，由于人们将通过各种媒体访问此站点，因此当屏幕被拉伸或分辨率不同时，重要的是不要重叠。我玩过不同的浮动和宽度，但这是我能想到的最好的。

此外，在图库链接上，知道如何将这些图像按原样插入但不透明吗？我想保持中间 div 透明，但不是屏幕截图。感谢你的帮助！

您可能会看到任何其他提示错误，或者您可以找到的编码优化也将不胜感激！

这是样式表：

```
body {
background-color:#000000;
background-image:url(http://www.vutallindustries.com/websitefiles/welcomepage.jpg);
background-repeat:no-repeat;
background-attachment:fixed;
color:#000000;
margin: 0px;
padding: 0px;
}
/* Corp Logo */
.logo {
position: fixed;
height: 128px;
width: 128px;
left: 0px;
top: 0px;
}
/* EVE Logo */
.logo2 {
position: absolute;
height: 128px;
width: 128px;
top: 0px;
right: 0px;
}
/* Site Navigation menu */
.menu {
position: fixed;
width: 128px;
height: 100%;
left: 0px;
top: 128px;
background-color:#FFFFFF;
border: 1px solid black;
text-align:left;
opacity:0.6;
filter:alpha(opacity=60);
}
/* Official EVE news via RSS */
.news {
float:right;
width: 128px;
height: auto;
margin-top: 129px;
margin-right:0px;
background-color:#FFFFFF;
border: 1px solid black;
text-align:left;
opacity:0.6;
filter:alpha(opacity=60);
}
/* website content */
.content {
width: auto;
height: 100%;
text-align: center;
background-color:#FFFFFF;
border: 1px solid black;
opacity:0.6;
filter:alpha(opacity=60);
}
/* centers website content */
div.centerbox-outer {
margin-top:129px;
margin-right:136px;
float: left;
position:fixed;
left:136px;
} 
```

这是主要的索引 HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">
<html>

<head>
    <title>Penultimatum</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link REL="StyleSheet" TYPE="text/css" HREF="layout.css">
</head>
<body>
    <div class="logo">
        <img src="http://www.vutallindustries.com/websitefiles/emblem.png" alt="Penultimatum">
    </div>
    <div class="menu">
        <p> <b> <a href="http://www.vutallindustries.com/penultimatum" target="_self">Home</a> </b>

        </p>
        <p> <b> <a href="http://www.vutallindustries.com/penultimatum/forum" target="_self">Forum</a> </b>

        </p>
        <p> <b> <a href="http://www.vutallindustries.com/penultimatum/gallery.html" target="_self">Gallery</a> </b>

        </p>
        <p> <b>Note: if anyone can figure out how to make the center box centered and scroll with, it would be much appreciated. </b>

        </p>
    </div>
    <div class="logo2">
        <img src="http://www.vutallindustries.com/websitefiles/evelogo.jpg" alt="Penultimatum">
    </div>
    <div class="news">
        <p>
            <script type="text/javascript" src="http://output42.rssinclude.com/output?type=js&amp;id=629071&amp;hash=623340dcbe5d6196e04dc473e9f193b0"></script>
        </p>
    </div>
    <div class="centerbox-outer">
        <div class="centerbox-inner">
            <div class="content">
            <p> <b>Welcome to the EVE Online corporation, Penultimatum! We are currently standing up offices, and this website is under construction. Check back in later for more details</b>
            </p>
            </div>
        </div>
    </div>
    </body>
</html> 
```

然后画廊页面和索引一样，它只是用下面的代码替换了关于欢迎来到 EVE 在线公司的行：

```
<p>
                <center>
                <a href="http://www.vutallindustries.com/websitefiles/test.png">
                    <img src="http://www.vutallindustries.com/websitefiles/test.png" alt="Vutall's Character"
                    width="auto" height="150">
                    </a>
                </center>
                </p>
                <p>
                <center>
                Vutall's Character
                </center>
                </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:41:16.350

我终于在这里想出了解决方案：http: [//jsfiddle.net/yKVq4/5/](http://jsfiddle.net/yKVq4/5/)

**变更摘要**

1.  我清理了很多你的代码，因为有很多多余的东西。
2.  我在左侧和右侧添加了容器，因为这会阻止诸如书写`position:fixed`之类`width:128px`的事情。
3.  我发现当我将位置更改`div.centerbox-outer`为相对，但`position:fixed`后来一直保持下去时，代码突然居中，现在总是跨越整个长度，无论如何。在玩弄了一些代码之后，它的组合就是`right`这样`left` `position`做的。
4.  因为我将容器的对齐方式从 更改`position:fixed;`为`float`，所以结果是一个响应速度更快的解决方案。这是相当粗糙的，但它会完成工作。

我希望这就是你要找的。

**编辑**

我发现如果我将`div.centerbox-outer`'s 的定位改为`absolute`，然后在 ' 中添加一个`margin-right`，`.menu-container`那么响应式设计前景会更好

**更新**

我想出了一个可能的响应式设计布局[http://jsfiddle.net/yKVq4/42/](http://jsfiddle.net/yKVq4/42/)

*概括*

*   一旦屏幕小于 400 像素，请将欢迎横幅移到顶部以使其不碍事。
*   缩小超过 300 像素后将菜单大小增加到 100% 并移除浮动。与其他浮动容器相同。还使图像响应

*其他变化*

*   给菜单增加了一些简单的样式，改成无序列表后
*   添加了过渡
*   修复了后台不工作的问题，虽然现在还没有修复。

我改变了很多。但这是因为我非常喜欢编码；）

# asp.net - .net 程序集的问题

> ID：14699793
> 
> 赞同：0
> 
> 时间：2013-02-05T03:39:50.440
> 
> 标签：asp.net, .net-assembly

我创建了一些 A.cs 类，其功能将在 B.cs 中使用，然后在代码隐藏中的 ASP.net webforms 中调用 B.cs。我的文件 A.cs 和 B.cs 保存在 App_Code 文件夹中。

问题是，如果我在 asp.net webform 代码隐藏中调用 B.cs 的函数，我会收到错误，即函数未定义，您是否缺少程序集？在研究了 SO 之后，我发现要编译类构建操作。虽然它解决了这个问题，但是当我构建应用程序时，我得到了错误，我的程序集作为 app_code 和 assembly.dll 都存在于根目录中

然后我恢复了这个过程，并得到了相同的功能未找到问题。

我严重无法弄清楚，如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:43:15.507

It sounds like you may have defined the `Gal.DB.Service` class in both the ASP.NET web app (under `App_Code`) *and* in an assembly that the web app references (i.e. `Gal.DB.Manager.DLL`).

The class can only be defined once.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:48:37.370

我以前遇到过这个确切的问题。我修复它的方法是将所有代码文件从`App_Code`文件夹移动到一个`Classes`文件夹（或您选择的任何文件夹），然后编译并修复编译错误。之后，错误消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T03:54:14.310

尝试清除临时 asp.net 文件，具体取决于您使用的 Web 服务器，您需要停止、重置或终止它以在删除文件之前释放文件。

听起来这是一个 Web 应用程序，其中 asp.net 对需要编译的内容做出了最好的猜测。如果这种编译模型太麻烦，从长远来看，Web 项目可能会更容易。

# haskell - 具有功能更新的数组的最有效实现是什么？

> ID：14699794
> 
> 赞同：9
> 
> 时间：2013-02-05T03:39:52.127
> 
> 标签：haskell, data-structures, functional-programming, ocaml, immutability

我需要一个具有最快功能更新的类数组数据结构。我已经看到了一些灵​​活数组的不同实现，它们为我提供了这个属性（Braun，随机访问列表），但我想知道是否有专门针对我们对追加或前置不感兴趣的情况进行优化的实现- 只是更新。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T09:22:56.877

Jean-Cristophe Filliâtre 有[一个非常好的](http://www.lri.fr/~filliatr/puf/)持久数组实现，在同一页链接[的论文](http://www.lri.fr/~filliatr/ftp/publis/puf-wml07.ps)中进行了描述（这是关于持久联合查找，其中持久数组是核心组件）。该代码可直接在[此处](http://www.lri.fr/~filliatr/ftp/ocaml/ds/parray.ml.html)获得。

这个想法是将数组的“最后一个版本”表示为一个通常的数组，具有`O(1)`访问*和*更新操作，而以前的版本表示为这个最后一个版本，加上一个差异列表。如果您尝试访问该结构的先前版本，则该数组将“重新植根”以应用差异列表并再次为您提供有效的表示。

这当然不是所有工作流下的 O(1) （如果你经常访问和修改结构的不相关版本，你会经常支付重新root 成本），但对于主要使用一个版本，偶尔回溯到旧版本再次成为“最后一个版本”并获得更新，这是非常有效的。一个非常好的使用隐藏在观察纯界面下的可变性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T13:30:17.953

[我对repa](http://hackage.haskell.org/package/repa)有很好的体验（[很好的演示](http://www.youtube.com/watch?v=UGN0GxGEDsY)）。非常好的性能，自动并行，多维，多态。推荐尝试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T03:56:22.877

您使用哪种语言？在 Haskell 中，您可以将[可变数组](http://www.haskell.org/ghc/docs/latest/html/libraries/array/Data-Array-ST.html)与 state monad 一起使用，而在 Mercury 中，您可以通过线程化 IO 状态来使用可变数组。Ocaml 也有一个数组模块，不幸的是它不保持引用透明性，如果那是你所追求的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-30T13:34:28.433

几天前，我还需要功能数组，并在这个 SO 问题上有所感受。我对 Gasche 提出的解决方案不满意，因为创建新数组是一项昂贵的操作，而且我需要经常访问旧版本的数组（我计划将其用于在数组上播放的 AI alpha/beta 实现）。

（当我说成本高昂时，我猜它是 O(n*h) 其中 h 是历史大小，因为在最坏的情况下，只有一个单元格被重复更新，并且需要遍历每个单元格的整个更新列表。我也当我需要重新路由阵列时，预计大多数单元格不会更新）。

这就是为什么我提出另一种方法的原因，也许我可以在这里得到一些反馈。我的想法是像在 B 树中一样存储数组，除了它不可变，我可以很容易地通过索引访问和更新任何值。

我在项目的存储库上写了一个小介绍：[https](https://github.com/shepard8/ocaml-ptarray) ://github.com/shepard8/ocaml-ptarray 。选择顺序是为了使树的深度和顺序均匀，因此我可以获得很好的复杂性，仅取决于获取/设置操作的顺序，即 O(k^2)。

使用 k = 10，我最多可以存储 10^10 个值。实际上，我的数组不应包含超过 200 个值，但这是为了展示我的解决方案的稳健性。

欢迎任何建议！

# php - 即使指定了“发件人”，Drupal 6 邮件发件人也设置为“无人”

> ID：14699796
> 
> 赞同：0
> 
> 时间：2013-02-05T03:40:22.857
> 
> 标签：php, drupal, drupal-6

我正在尝试发送一封指定发件人的电子邮件。相反，我得到了Nobody@host.edu

```
$test='example body'.$random_String;
$message3 = array(
  'to' => 'fake_user@place.com',
  'from' => 'fake_sender@place.edu',
  //'from' => variable_get('site_mail', 'admin@example.com'), //alternative doesn't work either
  'subject' => t('Example subject'),
  'body' => $test,
  'headers' => array(),
);

drupal_mail_send($message3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:27:41.580

只需使用旧的 php mail() 函数 [http://www.php.net/manual/en/function.mail.php](http://www.php.net/manual/en/function.mail.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:38:37.800

阅读该[`drupal_mail_send()`](http://api.drupal.org/api/drupal/includes!mail.inc/function/drupal_mail_send/6)函数的文档。您没有为`drupal_mail_send()`. 你错过了`id`钥匙。另外，这个函数已经使用了 PHP `mail()`，所以你不必直接使用它。

# windows-7 - 自签名 SSL 证书错误：证书具有无效的数字签名

> ID：14699798
> 
> 赞同：1
> 
> 时间：2013-02-05T03:40:32.213
> 
> 标签：windows-7, https, ssl-certificate, netsh

我有 ac# 程序，其中一部分创建了一个自签名证书。

问题是当我尝试在 MMC 中导入证书时，它显示“此证书具有无效的数字签名”。

当我尝试使用 netsh http add 命令通过命令提示符添加此证书时，它说：

SSL 证书添加失败，错误：1312 指定的登录会话不存在。它可能已经被终止。

我已经尝试了与此类似的其他问题的所有建议，但没有运气。我也尝试过从 Microsoft 下载 Hotfix，但它没有用。

顺便说一句，我的机器是在 Windows7-64bit 下运行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T20:04:31.867

[我在这里](http://www.petri.co.il/forums/showthread.php?t=41782 "阅读底部 homeshark 的评论")遇到了一个答案基本问题是 DC 权威证书创建者马虎并为同一个 DC 证书权威创建多个证书。我使用最新的和 grates DC 证书颁发机构证书创建了我的自签名证书。我必须在我的目标机器上导出并安装根证书和自签名证书，以便它识别服务器上使用的自签名证书。但是我导出的根证书是同名但日期不同的证书。一旦我找到了正确的根证书并将其安装在我的目标计算机上，一切都会完美无缺。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-18T09:18:04.137

就我而言，这是由于旧的自签名证书具有较小的密钥长度。我在这里找到了解决方案 - [https://security.stackexchange.com/a/82606/26742](https://security.stackexchange.com/a/82606/26742)以降低安全性（仅在我的开发环境中）

```
 certutil -setreg chain\minRSAPubKeyBitLength 512 
```

# php - 使用 GROUP BY 从 MySQL 查询不起作用

> ID：14699802
> 
> 赞同：0
> 
> 时间：2013-02-05T03:41:00.653
> 
> 标签：php, mysql

我为我们携带的所有零件创建了一个包含所有车辆、品牌和引擎的 MySQL 表。我正在尝试仅使用 PHP 来制作级联下拉搜索功能。我的脚本在第二个查询中失败；

```
SELECT model FROM veh_types WHERE make = $vehmakeA GROUP BY model 
```

我猜它在 GROUP BY 子句上失败了。

有人可以指出我正确的方向吗？

谢谢！

编辑 ------------- 这是我的更多代码。

```
echo "<p>VEHICLE MAKE"; 
    echo "<select name=\"vehmake\" id=\"vehmake\" onchange=\"this.form.submit();\">";
    echo "<option value=\"--\">SELECT VEHICLE MAKE...</option>";
    echo "<option value=\"--\">SELECT VEHICLE MAKE 2...</option>";

    $queryModel = "SELECT make, model FROM veh_types WHERE make = $vehmakeA GROUP BY model";
    $resultModel = mysql_query($queryModel) or die(mysql_error());
    while($rowModel = mysql_fetch_array($resultModel)) {
        $vehmodel = $rowModel['model'];
        echo "<option value=\"$vehmodel\">$vehmodel</option>\n";    
    }

    echo "</select></p>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:46:50.300

GROUP BY 语句与聚合函数一起使用，以按一列或多列对结果集进行分组。

> SELECT column_name, aggregate_function(column_name) FROM table_name WHERE column_name operator value GROUP BY column_name

**聚合（GROUP BY）函数**

```
Name    Description

AVG()   Return the average value of the argument
BIT_AND()   Return bitwise and
BIT_OR()    Return bitwise or
BIT_XOR()   Return bitwise xor
COUNT(DISTINCT) Return the count of a number of different values
COUNT() Return a count of the number of rows returned
GROUP_CONCAT()  Return a concatenated string
MAX()   Return the maximum value
MIN()   Return the minimum value
STD()   Return the population standard deviation
STDDEV_POP()    Return the population standard deviation
STDDEV_SAMP()   Return the sample standard deviation
STDDEV()    Return the population standard deviation
SUM()   Return the sum
VAR_POP()   Return the population standard variance
VAR_SAMP()  Return the sample variance
VARIANCE()  Return the population standard variance 
```

参考：[链接](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions-and-modifiers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:09:06.587

我只是把我认为你的表的样子放在一起，这个查询对我有用：

```
 CREATE TABLE IF NOT EXISTS `veh_types` (
      `id` int(10) NOT NULL auto_increment,
      `make` varchar(100) default '0',
      `model` varchar(100) default '0',
      `submodel` varchar(100) default '0',
      `type` varchar(100) default '0',
      UNIQUE KEY `id` (`id`)
    ) ENGINE=MyISAM AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;

    INSERT INTO `veh_types` VALUES (1, 'Ford', 'Ranger', 'EX', 'Truck');
    INSERT INTO `veh_types` VALUES (2, 'Ford', 'Focus', 'EX', 'Car');
    INSERT INTO `veh_types` VALUES (3, 'Honda', 'Civic', 'EX', 'Car');
    INSERT INTO `veh_types` VALUES (4, 'Honda', 'Accord', 'LX', 'Car');
    INSERT INTO `veh_types` VALUES (5, 'Chevy', 'S10', 'LS', 'Truck');

    SELECT model
    FROM veh_types 
    WHERE make = 'Ford'
    GROUP BY model; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T05:12:33.497

答案的组合解决了我的问题。我将它从 GROUP BY 更改为 DISTINCT 并在我的变量周围添加了一些单引号，它可以工作！！！感谢大家的帮助！回想起来，这两个答案都来自迈克尔·伯科夫斯基。谢谢迈克尔！

# java - 在 Eclipse 中尝试“导入插件和片段”时没有源文件

> ID：14699806
> 
> 赞同：0
> 
> 时间：2013-02-05T03:41:19.000
> 
> 标签：java, eclipse, eclipse-plugin

按照[这个答案的](https://stackoverflow.com/a/3690378/130758)建议，我尝试使用“导入插件和片段”功能将其他插件的源代码导入我的项目：

![在此处输入图像描述](../Images/ba5528d79ae38860ebee0b870efb13b5.png)

但事实是，它似乎没有显示任何源文件夹，正如我所料：

![在此处输入图像描述](../Images/f7b219616a6e73f2b0dfb1214f94d8e2.png)

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:15:51.253

我怀疑您的活动目标平台不包含源。如果您使用正在运行的 Eclipse 安装作为目标平台，您可能想要安装包含源代码的 Eclipse 包，例如[Eclipse Classic](http://www.eclipse.org/downloads/packages/eclipse-classic-421/junosr1)或[Eclipse for RCP and RAP developers](http://www.eclipse.org/downloads/packages/eclipse-rcp-and-rap-developers/junosr1)。

# jquery - jQuery Autocomplete，通过 API 获取 JSON

> ID：14699807
> 
> 赞同：1
> 
> 时间：2013-02-05T03:41:26.473
> 
> 标签：jquery, json, api

我对 jQuery 自动完成并不完全熟悉，所以我希望你能给我一些关于如何完成任务的想法。

我有以下网址：

```
http://localhost/contactApi.do?mobile=614321 
```

手机可以是整个联系号码，也可以是联系号码的一部分。我设计了这个 API 调用一段时间，当你把这个 url 放在浏览器中并输入时，你会在前端显示一个 JSON 响应，其中包含所有匹配的结果（所有手机都像你在 url 中输入的这个数字）。

我的问题是我如何使用（或者我可以？）这个网址作为我的自动完成源？

就像我想使用 jQuery UI 演示给出的示例一样，我如何将移动设备传递给 url？

我见过一些地方他们使用了这样的来源，如下所示：

```
source:"http://localhost/contactApi.do?mobile=?" 
```

现在它是如何工作的，这个？会选择我每次输入的内容还是什么？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:47:19.673

你可以看看类似的东西

```
$("input").autocomplete({
    source: function (request, response) {
        $.getJSON("http://localhost/contactApi.do?mobile=614321", 
          {  }, 
          function(data) {
              if(data){
                  response(data);
              }
          }
        );        
    }
}); 
```

数据应该是数组，如`[{value: <value>, text: <display-text>}, ....]`.

您还可以查看以下示例
[为什么 jquery 自动完成在 https 上不起作用](https://stackoverflow.com/questions/14607734/why-jquery-autocomplete-doesnt-work-on-https-secure-pages/14624808#14624808)

# php - 访问 array_chunk 的每个块

> ID：14699815
> 
> 赞同：2
> 
> 时间：2013-02-05T03:42:08.547
> 
> 标签：php, arrays

我对 PHP 很陌生，正在研究使用[array_chunk()](http://www.php.net/manual/en/function.array-chunk.php)将数组拆分为三个部分以将其显示为三列列表。假设我有一个这样的数组

```
 $input_array = array('a', 'b', 'c', 'd', 'e', 'f');
 $chunks = array_chunk($input_array, 3, true)); 
```

我想输出如下内容：

```
<div class="left">
 <ul>
  <li>a</li>
  <li>b</li>
 </ul>
 </div>

<div class="middle">
 <ul>
  <li>c</li>
  <li>d</li>
 </ul>
 </div>

<div class="right">
 <ul>
  <li>e</li>
  <li>f</li>
 </ul>
</div> 
```

我在这里看到了一些[非常有用的示例](https://stackoverflow.com/questions/9478973/php-list-structure/9479029#9479029)，但没有一个示例显示如何 foreach 循环原始数组的每个块以放置在 html/css 中您需要的位置。

这是 array_slice 的工作吗？但是如果我的数组是动态填充的并且我不知道在给定时间它会有多大呢？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T04:15:52.487

```
$div_class = array("left","middle","right"); 
$input_array = array('a', 'b', 'c', 'd', 'e', 'f');
$chunks = array_chunk($input_array, 2);

foreach($chunks as $i => $mychunk)
{
    echo "<div class=\"$div_class[$i]\">";
    echo "<ul>";

    foreach($mychunk as $newchunk) 
    {
    echo "<li>";
    echo $newchunk;
    echo "</li>";
    }

    echo "</ul>";
    echo "</div>";
} 
```

输出 -

```
<div class="left">
<ul>
<li>a</li>
<li>b</li>
</ul>
</div>
<div class="middle">
<ul>
<li>c</li>
<li>d</li>
</ul>
</div>
<div class="right">
<ul>
<li>e</li>
<li>f</li>
</ul>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:14:53.953

您的`array_chunk($input_array, 3, true))`代码返回具有三个值的块，但根据您期望的输出，您必须设置 `array_chunk($input_array, 2, true)`

点击链接以了解有关[array_chunk()的更多信息](http://php.net/manual/en/function.array-chunk.php)

```
$input_array = array('a', 'b', 'c', 'd', 'e', 'f');
$chunks = array_chunk($input_array, 2, true);

//print_r($chunks);
for( $i=0;$i<count($chunks);$i++ ){
   echo "<div>\n";
   echo "<ul>\n";
   foreach( $chunks[$i] as $k=>$v ){

     echo "<li>$v</li>\n";

   }
  echo "</ul>\n";
  echo "</div>\n\n";
 } 
```

查看输出检查以下链接[http://codepad.org/8K1luela](http://codepad.org/8K1luela)

# mysql - 计数记录 COUNT 或 SUM 或 ROW？

> ID：14699816
> 
> 赞同：-1
> 
> 时间：2013-02-05T03:42:14.680
> 
> 标签：mysql, sql, count

此表包含服务器监控记录。一旦服务器无法 ping，它就会插入新记录。因此，一台服务器可能会发生多次故障。我想获取 SERVER 3 失败的记录数。

这是`failure_id`主键所在的表。

```
failure_id  server_id  protocol  added_date           
----------  ---------  --------  ---------------------
         1          1  HTTP      2013-02-04 15:50:42  
         2          3  HTTP      2013-02-04 16:35:20 
```

使用 (*) 计算行数

```
SELECT 
  COUNT(*) AS `total` 
FROM
  `failures` `f` 
WHERE CAST(`f`.`server_id` AS CHAR) = 3; 
```

使用 server_id 计算行数

```
SELECT 
  COUNT(`f`.`server_id`) AS `total` 
FROM
  `failures` `f` 
WHERE CAST(`f`.`server_id` AS CHAR) = 3; 
```

使用 SUM 计算行数

```
SELECT 
  IFNULL(SUM(1), 0) AS `total` 
FROM
  `failures` `f` 
WHERE CAST(`f`.`server_id` AS CHAR) = 3; 
```

以上所有查询都返回正确的输出。但是我的数据库将来会很大。根据性能最好使用哪种方法？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:17:10.397

我会说以上都不是。如果您可以控制插入记录的应用程序。如果是这样，如果您的服务器没有表，只需创建一个。否则添加一个名为`current_failure_count`或其他内容的字段并将其粘贴在该表中。因此，当您插入记录时，还要对您的服务器表进行更新并`current_failure_count = current_failure_count + 1`为该服务器设置。这样你只需要读取服务器表中的一条记录（`server_id`我假设索引），你就设置好了。不，这不遵循任何规范化规则，但您正在寻求速度，如果您可以控制客户端软件，这是获得它的最佳方式。

如果您无法控制客户端软件，也许您可​​以在将记录插入失败表时设置触发器，以增加`current_failure_count`服务器表中的值。这也应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T03:56:59.363

嗯，第二个肯定比第一个更有效率。我建议您为服务器创建一个视图，这将大大加快速度

```
CREATE VIEW server3 AS
SELECT server_id
FROM failures
CAST(`f`.`server_id` AS CHAR) = 3; 
```

然后只需对该视图进行计数，就好像它是一张桌子一样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T04:09:08.570

像其他人一样，我不清楚为什么要转换 server_id 值。这将比任何其他问题花费更多的性能。

如果您可以消除该强制转换以便您进行搜索`WHERE server_id = (value)`并在其上创建索引，`server_id`那么您建议的前两个查询中的任何一个都将能够执行仅索引检索并提供最佳性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T04:12:16.833

```
SELECT COUNT(*) AS `total`
FROM  failures f
WHERE f.server_id = 3; 
```

`count(*)`总是比算术计算好，尽管应用索引会给出更快的结果。

第二好的解决方案将是

```
SELECT IFNULL(SUM(1), 0) AS `total`
FROM failures `f`
WHERE f.server_id  = 3; 
```

这个方法是用我的微策略等很多工具的SQL引擎

希望答案有帮助... :)

# ruby-on-rails - Rails 服务器因回形针而失败

> ID：14699819
> 
> 赞同：0
> 
> 时间：2013-02-05T03:42:20.577
> 
> 标签：ruby-on-rails, paperclip

我收到的错误消息

```
/Users/Steve/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/ext/module.rb:36:in `const_missing': uninitialized constant Paperclip (NameError)
from /Users/Steve/Desktop/myapp/config/environment.rb:40:in `<top (required)>' 
```

`environment.rb:40`是`Paperclip.options[:command_path] = "/usr/local/bin/"`

它是 ImageMagick 的路径。我想知道问题是什么以及如何解决它。谢谢！

# regex - 请帮助一些正则表达式

> ID：14699820
> 
> 赞同：-5
> 
> 时间：2013-02-05T03:42:23.337
> 
> 标签：regex

我在看龙书，被一些正则表达式练习卡住了，很有趣，有人能帮忙吗？请为以下语言编写正则表达式：

问题 1：
a 和 b 的所有字符串具有偶数个 a 和奇数个 b。

问题2：
所有不包含子序列abb的字符串。（s 的子序列是通过删除零个或多个不一定连续的 seg 位置形成的任何字符串 baan 是香蕉的子序列。）

问题3：
所有没有重复数字的数字串（重复数字不一定是连续的）。

问题4：
最多有一个重复数字的所有数字串（重复数字不一定是连续的）。

并且请使用 POSIX 语法，以便我们都能很好地理解它。另外我想知道我们是否只能使用三种基本的语言操作，即联合、连接和闭包来实现它们？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:24:16.697

如果您有严格的正则表达式（连接、联合、闭包），您将能够将其转换为 POSIX 正则表达式。如果您有 POSIX 正则表达式，您将能够将其转换为任何更复杂的正则表达式引擎。

**假设（请先阅读此内容）**

这个答案假设了 JavaScript 正则表达式的支持级别（有前瞻但没有后瞻），*但我们也假设`.`匹配任何字符无异常*。这里的正则表达式将假定整个字符串与模式匹配。

**问题 1**

```
^(?=(?:b*ab*a)*b*$)(?=(?:a*ba*b)*a*ba*$)[ab]*$ 
```

可以为这个问题构造一个 DFA，因此，存在一个只有连接、联合和闭包的正则**表达式**。（DFA 中状态中的数字表示 a 和 b 的数量的奇偶性）。

![DFA 问题 1](../Images/4cf03904a20fcd981df0cb361ddd4966.png)

然而，严格的正则表达式的推导相当混乱；环顾四周简化了我们的思考方式。

*   `(?=(?:b*ab*a)*b*$)`是一个前瞻，（由于`^`and的影响`$`）检查**整个**字符串是否匹配`(b*ab*a)*b*`- 这意味着偶数个`a`'s，`b`在两者之间和周围有可选的和有限的多个。
*   `(?=(?:a*ba*b)*a*ba*$)`是一个前瞻，检查**整个**字符串是否匹配`(a*ba*b)*a*ba*`- 这意味着奇数个`b`'s，`a`在两者之间和周围可选且有限多个。

我们将需要 3 次遍历字符串来检查字符串是否满足上述正则表达式的给定属性。

使用 POSIX 正则表达式，您可以针对这 2 个正则表达式测试字符串 2 次以断言 2 个属性：

```
^(b*ab*a)*b*$
^(a*ba*b)*a*ba*$ 
```

但是由于存在严格的正则表达式并且可行，因此存在单个 POSIX 正则表达式来匹配满足属性的字符串。请阅读[这篇文章](https://stackoverflow.com/questions/13676431/regular-expressions-with-repeated-characters/13677120#13677120)了解将 DFA 转换为严格正则表达式的方法。

**问题 2**

```
^(?!.*a.*b.*b).*$ 
```

只是向前看，检查没有办法匹配 subsequence `abb`。

由于没有指定字母表，可以将其解释为存在的任何和所有字符，因此用严格的正则表达式编写它是可能的，但不切实际。但是，如果允许否定字符类，则可以轻松编写：

```
([^a]*a[^b]*b[^b]*|[^a]*a[^b]*|[^a]*) 
```

（上面是严格的正则表达式，但是可以很容易地改写为POSIX正则表达式）

![DFA 问题 2](../Images/48a349013f84e365f13bd1c74f8211ab.png)

交替的 3 个项目（从右到左）对应于 DFA 中的 3 个状态：尚未找到`a`；有一个`a`，但没有`b`前面；有一个`a`，`b`然后在某处之后，但还没有找到第二个`b`。在 DFA 中还有另一个陷阱状态（不可能转换到目标状态）：`abb`已经找到子序列。

**问题 3**

```
^(?!\d*(\d)\d*\1)\d+$ 
```

使用负前瞻，我们将只检查是否没有匹配项可以找到重复的字符。由于这是一个数字字符串，因此我不允许通过指定至少 1 个数字来匹配空字符串`\d+`。此正则表达式的关键点是使用捕获的组和反向引用。

同样，对此存在严格的正则表达式，但这是不切实际的，因为编写这样的正则表达式几乎等同于一一列出所有可能的匹配项。总共有`Sum [i = 1..10] ( 10! / i! )`可能的匹配项（允许前导 0）。没有办法绕过它，因为是否允许下一个字符在很大程度上取决于到目前为止已处理的所有字符。

这在 POSIX 正则表达式中也是不切实际的，因为没有否定捕获组的机制。

**问题 4**

无法为这个想出更好的正则表达式......

```
^(?!(?=.*(.).*\1).*((?!\1).).*\2)(?!.*(.)(?:.*\3){2})\d+$ 
```

失败有 2 个条件：数字重复超过 2 次，或者有 2 个不同的数字重复。

*   `(?!(?=.*(.).*\1).*((?!\1).).*\2)`检查是否有 2 个不同的数字重复。由于 ，这种前瞻`(?=.*(.).*\1)`选择了一个重复的字符（至少两次），并`.*((?!\1).).*\2`选择了一个与之前检查的不同的数字`((?!\1).)`，并尝试找到重复的数字。
*   `(?!.*(.)(?:.*\3){2})`检查一个数字最多重复两次。里面的模式尝试匹配一个数字的 3 个实例。

这与问题 3 有相同的问题，因此编写严格的正则表达式或 POSIX 正则表达式是不切实际的。如果您好奇，`Sum [i = 1..10] ( 10! / i! ) + Sum [i = 1..10] ( (i + 1)C2 * 10! / i! )`可能会有匹配项（允许前导 0）。

* * *

对于问题 3 和 4，尤其是问题 4，更实际的做法是检查字符串是否仅包含数字，然后对数字进行排序并遍历它以检查重复的数字。

# perl - perl 精确字符串匹配

> ID：14699822
> 
> 赞同：4
> 
> 时间：2013-02-05T03:42:28.123
> 
> 标签：perl

我有以下 Perl 代码来提示用户回答是/否。如果用户输入的不是是/否，请继续提示。没有其他词是可以接受的。我不知道为什么这段代码不起作用。我用答案“noooooo”进行了测试，我期待它再次提示，但它没有进入 while 循环。

任何人都可以在这里帮助找到我的错误吗？

```
@files = A, B, C;

foreach $c (@files) {
  if (-e $c  ) { 
     print " $c already exists. Do you want to overwrite?  (yes or no): ";
     chomp ($file_yes_no = <STDIN>);

     while ($file_yes_no !~ m/yes{1}|no{1}/i )  {
         print "$c already exists. Do you want to overwrite?  (yes or no): ";
         chomp ($file_yes_no = <STDIN>);
     }

     if ($file_yes_no =~ m/yes/i ) {
         if (system ("cp -f /home/old_path/ /home/new_path/ == 0) {
             print "$c successfully copied;
         } else {
             die "Error: Copy failed, Check the message above";
         }
     }
 else { print "No files copied\n; } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T03:47:55.783

我只会使用字符串相等运算符`eq`而不是正则表达式。

```
if( $file_yes_no eq 'yes' ) ... 
```

如果我想要它不区分大小写，我会先用`lc`.

您的正则表达式的问题在于它会很高兴地匹配任何顺序*包含*字母的字符串。`yes`如果你愿意，你可以像这样匹配字符串的开头和结尾：

```
if ($file_yes_no =~ m/^yes$/i ) ... 
```

但我个人更喜欢第一种选择。

哦，我错过了第一部分......嗯。同样的交易，如果你*必须*使用正则表达式。

```
m/^(yes|no)$/i 
```

我再一次更倾向于避免使用正则表达式

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T03:48:05.413

您应该使用以下 Perl 正则表达式仅用于匹配`yes`或`no`（不区分大小写）：

```
m/^(yes|no)$/i 
```

仅是，请使用：

```
m/^yes$/i 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T03:49:41.227

因为您使用的是正则表达式。您可以编写正则表达式来匹配字符串的开头或结尾......像这样：

```
while( $file_yes_no !~ /^(yes|no)$/ ) { 
```

`^`and`$`是字符串的开头和结尾。你也可以省略`m`.

或者您可以明确检查值：

```
while( $file_yes_no ne "yes" and $file_yes_no ne "no" ) { 
```

此外，您的系统命令中有错字，但我假设这只是在这里复制它。你真的不应该为此分支到外壳。看看`File::Copy`哪个给你一个`copy`功能

# php - 使用 PHP 通过页面刷新存储数组变量

> ID：14699824
> 
> 赞同：0
> 
> 时间：2013-02-05T03:42:58.673
> 
> 标签：php

所以这是初学者 PHP 课程中的第二个作业。作业的一部分要求您允许用户在 HTML 表单中输入多面墙（该程序是一个计算器，用于计算油漆、人工等成本），但是您不知道有多少墙人要进入，所以表格需要是动态的。

我不认为我们被允许使用 javascript。

我尝试使用 SESSION 变量将值存储到数组中（[如何在多个页面加载时存储变量值](https://stackoverflow.com/questions/7964917/how-to-store-variable-values-over-multiple-page-loads)）并使用 foreach 函数循环和保存数据（[如何将值从 foreach 循环存储到数组中？](https://stackoverflow.com/questions/3045619/need-to-store-values-from-foreach-loop-into-array)） .

似乎没有任何工作。在这个作业中，我们不应该使用 SQL。

还有另一种存储数组的方法吗？我也很高兴有一种方法可以回显数据并将其保留在那里直到缓存被清除。

这是我现在拥有的代码（抱歉有点乱）：

```
print_r($_POST);
      echo "<br />";
      print_r($_REQUEST['wallW']);
      echo "<br />";

      echo "<br />";
      $wallW = $_REQUEST['wallW'];         
      echo "The width is $wallW.";
      echo "<br />";      
      print_r($wallW);

       $_SESSION['wallW'] = $wallW;
        $wallW = $_SESSION['wallW'];

    ?>

            <form name="getOrderInfo" action="" onsubmit="" method="post">
            <table id="wallInfo">
                <th>
                    Order Information
                <th>
                <tr>
                    <td>
                        Wall Width:
                    </td>
                    <td>
                        <input type="text" name="wallW[]" id="wallW" size="20"  value="">
                    </td>
                <tr>

                <tr>
                    <td>
                        Wall Length:
                    </td>
                    <td>
                        <input type="text" name="wallL[]" id="wallL" size="20"  value="">
                    </td>
                <tr>

            </table>

        <input type="submit" value="Add Wall">
</form> 
```

任何帮助都会很棒。谢谢， 切尔西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:45:31.447

你用`session_start();`在文件的顶部，然后`$_SESSION['array'] = $array;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:10:35.757

店铺

```
$data =  $_POST;
$_SESSION['data'] = $data; 
```

并检查下一页

```
if(isset($_SESSION['data'))
{
$data = $_SESSION['data'];
print_r($data);
} 
```

# mysql - 我无法直接从 C++ Builder XE 应用程序更新 MySQL 数据库

> ID：14699826
> 
> 赞同：0
> 
> 时间：2013-02-05T03:43:03.707
> 
> 标签：mysql, c++builder, c++builder-xe

我有一个用 C++ Builder XE 语言编写的名为 SpeZet 的数据库应用程序。我使用 MySQL 远程服务器数据库。

有时我直接从 SpeZet 将数据插入到远程 MySQL 服务器上的“tbtime”表中，它可以工作，但是当我尝试直接从 SpeZet 更新记录时，我收到如下任何错误消息：

**项目 SpeZet.exe 引发异常类 TDBXError，消息“表”SpeZet.tbtime 不存在**

而 tbtime 表确实存在于数据库中。

当我尝试继续该过程时，我再次收到如下错误消息：

**Project SpeZet.exe 引发异常类 EDatabaseError 并带有消息“无法找到记录。没有指定键'**

任何人都可以告诉我这里有什么问题吗？

# scheme - 函数结构定义

> ID：14699828
> 
> 赞同：2
> 
> 时间：2013-02-05T03:43:21.463
> 
> 标签：scheme, racket

我正在尝试制作该功能

`author-book`

给定一本书，产生这本书的作者。这是我为此创建的数据-

```
(define-struct audiobook ( title author length-in-minutes voice-person))

(define-struct ebook ( title author size-in-kolobytes symbol ))

(define-struct hardcover (title author number-of-pages genre ))

(define audiobook1 (make-audiobook "The Hunger Games" "Suzanne Collins" "50 minutes" "David Larrson"))
(define audiobook2 (make-audiobook "Catching Fire" "Suzanne Collins" "55 minutes" "David Larrson"))
(define audiobook3 (make-audiobook "Mockingjay" "Suzanne Collins" "40 minutes" "David Larrson"))

(define ebook1 (make-ebook "Divergent" "Veronica Roth" "100000kbs" 'Kindle))
(define ebook2 (make-ebook "Dracula" "Bram Stocker " "134000kbs" 'Ebook))
(define ebook3 (make-ebook "Jane Eyre" "Charlotte Brontë " "400000kbs" 'IPad))

(define hardcover1 (make-hardcover "Pursued" "Jud White" "100000kbs" "Crime"))
(define hardcover2 (make-hardcover "Private Berlin" "James Patterson" "100000kbs" "Suspense"))
(define hardcover3 (make-hardcover "Francona" "Terry Francona" "100000kbs" "Sports")) 
```

我试过了

```
(define (author-of-book n)
        (audiobook-author n)) 
```

这给了我只有有声读物的作者。有没有办法让我不用编写三个单独的函数就可以得到其余部分的作者？（就像电子书作者...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:12:14.697

你可以很容易地检查它是什么类型的书，然后从那里开始

```
(define (author-of-book b)
    (cond 
        [(audiobook? b) (audiobook-author b)]
        [(hardcover? b) (hardcover-author b)]
        [(ebook? b)     (ebook-author b)])) 
```

这有点冗长，但也没什么不好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T04:37:15.990

这是另一种可能的实现，比@jozefg 的答案短一点（经过测试和工作）：

```
(define (author-of-book b)
  ((cond [(audiobook? b) audiobook-author]
         [(hardcover? b) hardcover-author]
         [(ebook? b)     ebook-author])
   b)) 
```

该`cond`表达式返回在每种情况下使用的正确过程，并且被选中的过程应用于`b`. 例如：

```
(author-of-book audiobook1)
=> "Suzanne Collins"

(author-of-book ebook1)
=> "Veronica Roth"

(author-of-book hardcover1)
=> "Jud White" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T00:26:30.563

您有三个不同的结构，它们共享一个共同的子结构：所有三个都有 a`title`和`author`。您可以在结构定义中对此共享进行编码：

```
(define-struct book (title author))

(define-struct (audiobook book) (length-in-minutes voice-person))
(define-struct (ebook book) (size-in-kolobytes symbol))
(define-struct (hardcover book) (number-of-pages genre)) 
```

我们已经清理了三种结构中的字段重复，作为额外的奖励，我们可以简单地使用`book-author`来访问三种书籍中任何一种的作者字段。

```
> (book-author audiobook1)
"Suzanne Collins"
> (book-author ebook1)
"Veronica Roth"
> (book-author hardcover1)
"Jud White" 
```

# c++ - C++ 的“最佳”输入文件格式？

> ID：14699829
> 
> 赞同：18
> 
> 时间：2013-02-05T03:43:23.820
> 
> 标签：c++, json, sqlite, xml-parsing, file-format

我正在开发一款新软件，最终需要一些强大且可扩展的文件 IO。那里有很多格式。XML、JSON、INI 等。然而，总有优缺点，所以我想我会征求一些社区意见。

以下是一些粗略的要求：

1.  格式是“标准”......如果我不需要，我不想重新发明轮子。它不一定是正式的 IEEE 标准，但作为新用户，您可以通过谷歌搜索并获取一些信息，可能有一些超出 vi 的支持工具（编辑器）。（尽管软件用户通常会精通计算机并乐于使用 vi。）
2.  与 C++ 轻松集成。我不想使用 100mb 的库和三个不同的编译器来启动和运行它。
3.  支持表格输入（2d，n 维）
4.  支持 POD 类型
5.  可以随着需要更多输入而扩展，可以很好地绑定到变量等。
6.  解析速度并不是很重要
7.  理想情况下，写（反映）和读一样容易
8.  在 Windows 和 Linux 上运行良好
9.  支持合成（一个文件引用另一个要读取的文件，依此类推。）
10.  人类可读

在一个完美的世界里，我会使用一个只有头文件的库或一些干净的 STL 实现，但如果它运行良好，我可以使用 Boost 或一些小型外部库。

那么，您对各种格式有何看法？缺点？优点？

**编辑**

要考虑的选项？还有什么要补充的吗？

*   XML
*   YAML
*   SQLite
*   Google 协议缓冲区
*   提升序列化
*   INI
*   JSON

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-05T04:27:39.103

有一种出色的格式可以满足您的所有标准：

> # SQLite！

请阅读**[有关](http://www.sqlite.org/appfileformat.html)**使用 SQLite 作为应用程序文件格式的文章。另外，请**[观看](http://youtu.be/jN_YdMdjVpU)**D. Richard Hipp（SQLite 作者）关于这个主题的 Google 技术讲座。

现在，让我们看看 SQLite 如何满足您的要求：

> **格式是“标准”**

SQLite 已成为大多数移动环境和许多桌面应用程序（Firefox、Thunderbird、Google Chrome、Adobe Reader 等等）的首选格式。

> **与 C++ 轻松集成**

SQLite 有[标准的 C 接口](http://www.sqlite.org/cintro.html)，只有一个源文件和一个头文件。也有[C++ 包装器](http://www.sqlite.org/cvstrac/wiki?p=SqliteWrappers)。

> **支持表格输入（2d，n 维）**

SQLite 表就像你想象的那样是表格的。要表示 3 维数据，请创建包含列的表`x,y,z,value`并将数据存储为一组行，如下所示：

```
x1,y1,z1,value1
x2,y2,z2,value2
... 
```

> **支持 POD 类型**

我假设 POD 是指普通旧数据或 BLOB。SQLite 允许您按原样存储 BLOB 字段。

> **可以根据需要扩展更多输入，很好地绑定到变量**

这是它真正闪耀的地方。

> **解析速度并不是很重要**

但是 SQLite 的速度非常棒。其实解析基本上是透明的。

> **理想情况下，写（反映）和读一样容易**

只是`INSERT`用来写和`SELECT`读——还有什么比这更容易的呢？

> **在 Windows 和 Linux 上运行良好**

你打赌，所有其他平台也是如此。

> **支持合成（一个文件引用另一个文件读取）**

您可以将一个数据库附加到另一个数据库。

> **人类可读**

不是二进制的，但是有很多优秀的 SQLite 浏览器/编辑器。我喜欢Windows上的[SQLite Expert Personal和 Linux 上的](http://www.sqliteexpert.com)[sqliteman](http://sqliteman.com)。还有[用于 Firefox 的 SQLite 编辑器插件](https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/)。

* * *

> SQLite 还免费为您提供了其他优势：

*   数据是**可索引**的，这使得搜索速度非常快。您不能使用 XML、JSON 或任何其他纯文本格式来执行此操作。

*   即使数据量很大，也可以对数据进行**部分**编辑。您不必为了编辑一个值而重写几千兆字节。

*   SQLite 是完全**事务性**的：它保证你的数据在任何时候都是一致的。即使您的应用程序（或整台计算机）崩溃，您的数据也会在下次首次尝试连接到数据库时自动恢复到上次已知的一致状态。

*   **SQLite逐字**存储您的数据：您无需担心转义数据中的垃圾字符（包括嵌入在字符串中的零字节） - 只需始终使用[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)，这就是使其透明所需的全部内容。在处理文本数据格式（尤其是 XML）时，这可能是一个大而烦人的问题。

*   SQLite 以**Unicode**存储所有字符串：（`UTF-8`默认）或`UTF-16`. 换句话说，您无需担心数据格式的文本编码或国际支持。

*   SQLite 允许您以小块（实际上是逐行）处理数据，因此它在**低内存条件下**运行良好。这对于任何基于文本的格式都是一个问题，因为它们通常需要将所有文本加载到内存中来解析它。诚然，市面上很少有高效的基于流的 XML 解析器，但一般来说，任何 XML 解析器与 SQLite 相比都会非常占用内存。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-05T05:18:13.037

在对 XML 和 json 进行了相当多的工作后，以下是我对两者作为可扩展序列化格式的相当主观的看法：

*   格式是“标准”：两者都是
*   轻松与 C++ 集成：两者都可以。在每种情况下，您可能最终都会使用某种库来处理它。在 Linux 上，libxml2 是一个标准，而 libxml++ 是它的 C++ 包装器；您应该能够从发行版的包管理器中获得这两个。让那些在 Windows 上工作的人需要一点点努力。Boost 中似乎对 json 有一些支持，但我没有使用过；我一直使用库来处理 json。真的，图书馆路线对任何一方来说都不是很繁琐。
*   支持表格输入（2d，n 维）：两者都支持
*   支持 POD 类型：两者都支持
*   可以随着需要更多输入而扩展：两者都可以 - 这是他们俩的一大优势。
*   很好地绑定到变量：如果您的意思是文件本身内部的某种方式说“*这*条数据必须在我的程序中自动反序列化到*这个*变量中”，那么两者都不是。
*   编写（反映）和阅读一样容易：取决于您使用的库，但根据我的经验，两者都是。（您实际上可以使用 printf() 完成编写 json 的工作。）
*   在 Windows 和 Linux 上运行良好：两者都可以，同样适用于 Mac OS X。
*   支持一个文件引用另一个文件来读取：如果您的意思类似于 C#include，那么 XML 具有执行此操作的能力（例如文档实体），而 json 则没有。
*   人类可读：两者通常都是用 UTF-8 编写的，并且允许换行和缩进，因此可以是人类可读的。但是，我刚刚处理了一个 479 KB 的 XML 文件，它全部在一行上，所以我必须通过漂亮的打印机运行它才能理解它。json 也可能非常难以阅读，但根据我的经验，它的格式通常比 XML 更好。

开始新项目的时候，我一般比较喜欢json；它更紧凑，更易于阅读。我可能会选择 XML 而不是 json 的主要原因是如果我担心接收格式错误的文档，因为 XML 支持自动文档格式验证，而您必须使用 json 编写自己的验证代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-05T04:27:01.847

查看[谷歌缓冲区](https://developers.google.com/protocol-buffers/)。这可以满足您的大部分要求。

[从他们的文档](https://developers.google.com/protocol-buffers/docs/cpptutorial)中，高级步骤是：

在 .proto 文件中定义消息格式。
使用协议缓冲区编译器。
使用 C++ 协议缓冲区 API 来写入和读取消息。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-02-08T19:25:44.493

就我的目的而言，我认为要走的路是**XML**。

1.  格式是一种标准，但允许随着程序需求的发展而对模式进行修改和灵活更改。
2.  有几个库选项。有些较大（Xerces-C）有些较小（ezxml），但有很多选择，所以我们不会被锁定在一个提供者或非常具体的解决方案中。
3.  它可以支持表格输入（2d，n维）。这需要在“我们的”端进行更多的解析工作，并且可能是 XML 的最薄弱环节。
4.  支持 POD 类型：绝对。
5.  可以在需要更多输入时扩展，通过模式修改和解析器修改很好地绑定到变量等。
6.  解析速度并不是非常重要，因此处理一个或多个文本文件不是问题。
7.  XML 可以像阅读一样容易地以编程方式编写。
8.  在 Windows 和 Linux 或任何其他支持 C 和文本文件的操作系统上运行良好。
9.  支持合成（一个文件引用另一个要读取的文件，依此类推。）
10.  人类可读的许多文本编辑器（Sublime、vi 等）支持开箱即用的语法突出显示。许多网络浏览器可以很好地显示数据。

感谢所有伟大的反馈！我认为如果我们想要一个纯粹的二进制解决方案，Protocol Buffers 或 boost::serialization 可能是我们会采用的方式。

# android - android风格项目名称的含义

> ID：14699832
> 
> 赞同：0
> 
> 时间：2013-02-05T03:43:44.163
> 
> 标签：android

在 Android 样式中，您可以定义如下内容：

```
<item name="android:scrollbars">垂直</item>

```

这意味着，您为 UI 属性“scrollbars”赋予一个值“vertical”以使滚动条垂直。

但是这样的事情呢：

```
<item name="fullDark">@android:drawable/popup_full_dark</item>

```

我注意到名称没有“Android：”前缀，为什么？“@android:drawable/popup_full_dark”从何而来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:46:07.720

Android 在其自己的 R 类中定义了一组样式和值。当您偏爱 android: 时，您是在引用 android 内置的 R 类。当您一无所有时，您将引用从您自己的资源构建的 R 类。您还可以为 3rd 方库定义标签，因此如果您为 foo 定义一个值并且它定义了一个 xml 属性滚动条，则您可以拥有 foo:scrollbars。

# model - Yii 模型默认值。干燥

> ID：14699834
> 
> 赞同：1
> 
> 时间：2013-02-05T03:44:03.710
> 
> 标签：model, yii, dry

我正在编写多用户应用程序。在每个模型中，我都有一个字段 user_id，每个用户登录，我都可以获得他的 id: `Yii::app()->user->id`。

我不想在每个动作查找/更新/插入条件中重复它，所以如何在模型 user_id 中设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T05:43:19.197

使用 CActiveRecordBehavior。这样，您可以为所有模型挂钩 beforeFind/afterFind 和 beforeSave/afterSave 事件。真的很不错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:23:43.550

您必须创建父类并继承它

```
abstract class UserAccess extends CActiveRecord {

    public function getUserAccessCondition($condition, array $params)
    {
        if ($condition instanceof CDbCriteria) {
            $condition->compare('user_id', Yii::app()->user->id);
        } else {
            if(!is_array($condition)) {
                $condition['condition'] = $condition;
                $condition['params'] = $params;
            }
            if (trim($condition['condition']) == '') $condition['condition'] = 'user_id=:user_id';
            else $condition['condition'] .= ' and user_id=:user_id';
            $params[':user_id'] = Yii::app()->user->id;
        }
        return $condition;
    }

    public function find($condition='',$params=array())
    {
        $condition = $this->getUserAccessCondition($condition, $params);
        parent::find($condition, $params);
    }
    // and so on in findAll,  findAttributes...
    // for findByPk you need make some things maybe after find 
    // chek user_id and if is not equal throw access denied exception 
    public function afterFind()
    {
        if ($this->user_id != Yii::app()->user->id) {
            throw new CHttpException(403, 'Access Denied');
        }
    }
}

class UserItem extends UserAccess
{
   //.. rules tableName etc

}
// simple call
$userItem = UserItem::model()->find('name=:name', array(':name' => 'Some search name')); 
```

# c# - 使用额外的 XAML 参数创建自定义 WP7 控件

> ID：14699835
> 
> 赞同：0
> 
> 时间：2013-02-05T03:44:07.127
> 
> 标签：c#, windows-phone-7, controls

我想创建一个继承自 TextBox 的控件，它有一个名为“Filler”的属性。我创建了基本控件（名为 GhostBox），因此我可以将其加载到示例项目中并在设计器中查看，但我不知道如何创建自定义 XAML 参数（例如已经存在的 Text 和 Width） . 请解释如何添加这些？

例子：

```
<ghostbox:GhostBox Name="ghostBox1" Text=""  Height="72" HorizontalAlignment="Left" VerticalAlignment="Top" Width="460" Margin="0,80,0,0" Filler="Filler Text"/> 
```

正如您在标签末尾看到的那样，有一个 Filler 属性。这就是我想补充的，如果我说得不够清楚的话。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:25:03.813

它们被称为依赖属性。阅读有关它们的[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms752914.aspx)。

# git - 可以用 Git 取消推送吗？

> ID：14699838
> 
> 赞同：1
> 
> 时间：2013-02-05T03:44:22.833
> 
> 标签：git, github

所以我目前正在学习rails，我认为将文件推送到git是一个好主意，我错过了一步并将自己设置回一个版本，我眨眼就失去了大约4个小时的工作，有什么办法撤消它？我在`git co filling-in-layouts`做我所有的工作，然后我`co master`和 push 没有合并，现在`filling-in-layouts`什么都没有`git status`，并且`master`什么都没有`git status`。真的很郁闷，有人知道吗？谢谢！

# javascript - 如何在 jQuery 中引用按钮？

> ID：14699840
> 
> 赞同：1
> 
> 时间：2013-02-05T03:44:46.373
> 
> 标签：javascript, jquery, html, dom

在 HTML 中，我有一个这样定义的按钮：

```
<button type="button" onclick="toggleEdit();">Edit</button> 
```

在页面的末尾，我正在处理这个脚本：

```
<script language="JavaScript">
  <!--
  function toggleEdit() {
    var btn = $(this);
    var li = btn.parent();
    var textArea = li.children('.readOnly');
    ...
  }
  //-->
</script> 
```

我无法引用我在脚本中单击的按钮。变量是一个对象，`btn`但除此之外我什么都不知道。

我在网上找到了很多使用这种方法的例子：

```
$(document).ready(function () {
   $('#buttonID').click(function () {
   ... 
```

但我无法通过引用该按钮，`ID`因为它是动态添加的。那么，我该如何引用它呢？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:48:04.933

只是为了保持您的方式，您必须告诉`this`将引用按钮而不是实际功能的代码。

为此，您只需向`toggleEdit`函数添加一个额外的参数。

新的 HTML 看起来像这样（*不需要应用或调用函数*）：

```
<button type="button" onclick="toggleEdit(this);">Edit</button> 
```

然后您的新 JavaScript 将如下所示：

```
<script language="JavaScript">
  <!--
  function toggleEdit(t) {
    var btn = $(t);
    var li = btn.parent();
    var textArea = li.children('.readOnly');
    ...
  }
  //-->
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:49:51.850

您可以将事件传递给函数，然后使用它。

```
<button type="button" onclick="toggleEdit( event );">Edit</button> 
```

然后在你的函数中，你可以得到`target`事件的：

```
function toggleEdit( e ) {
    var btn = $( e.target );
    var li = btn.parent();
    var textArea = li.children('.readOnly');
    ...
} 
```

# javascript - 如何使用 kendoui 动态创建列表视图

> ID：14699841
> 
> 赞同：0
> 
> 时间：2013-02-05T03:44:52.157
> 
> 标签：javascript, jquery, kendo-ui

如何动态创建 KendoUI ListView。我的意思是我想创建 div、dataSource、模板并动态添加、编辑和删除功能。我怎么能用 kendoui 做到这一点。

我已经定义了模板

```
 <script type="text/x-kendo-tmpl" id="template">
          <div class="products">           
      <ul><li>
    # for (var i = 0; i < data.length; i++) { #
        #= data[i] #
    # } #
    </li></ul>            

        <div class="edit-buttons">
            <a class="k-button k-button-icontext k-edit-button" href="\\#"><span class="k-icon k-edit"></span>Edit</a>  

            <a class="k-button k-button-icontext k-delete-button" href="\\#"><span class="k-icon k-delete"></span>Delete</a>
        </div>
    </div>

   </script> 
```

然后动态模板将是

```
 <script type="text/x-kendo-tmpl" id="edittemplate">
          <div class="product-view">

          <ul><li>
          # for (var i = 0; i < data.length; i++) { #
         <input type="text" data-bind="value:data[i]" name="ProductName" required="required" validationMessage="required" />
           # } #
           </li></ul>
         <div class="edit-buttons">
        <a class="k-button k-button-icontext k-update-button" href="\\#"><span class="k-icon k-edit"></span>Update</a>  

        <a class="k-button k-button-icontext k-cancel-button" href="\\#"><span class="k-icon k-delete"></span>Cancel</a>
    </div>

    </div>

   </script> 
```

然后我完成了脚本

```
var data = ["Todd", "Steve", "Burke"];
 $("#dynamicdiv").kendoListView({
  template: kendo.template($("#template").html()),
  editable:true,                                          
  dataSource:data,                                          
 editTemplate:kendo.template($("#edittemplate").html()),
 }).delegate(".k-edit-button", "click", function (e) {
       alert("dtjherut");
       listview.edit();
       e.preventDefault();
}).delegate(".k-delete-button", "click", function (e) {
       alert("clicking");
       var model = dataSource.view()[$(this).closest(".tm").index()];
       dataSource.remove(model);
       e.preventDefault();
       dataSource.sync();
 }).data("kendoListView"); 
```

现在列表视图正在加载三个名称以及编辑和删除按钮。但是删除和编辑按钮不起作用。我没有在这里给出创建、删除和更新的路径。基本上我需要动态创建所有模板和数据源。如有错误请见谅。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T12:16:10.173

看来你做错了。在 kendo UI listview 的构造函数中，您必须为单个项目传递模板，而不是整个列表，例如：

```
$("#listview").kendoListView({
    dataSource: dataSource,
    template: "<div>#: data #</div>"
}); 
```

更多细节可以在这里找到： [http ://docs.kendoui.c​​om/getting-started/web/listview/overview#configuring-listview-behavior](http://docs.kendoui.com/getting-started/web/listview/overview#configuring-listview-behavior)

此外，在此之前应实例化 dataSouce，例如：

```
var dataSource = new kendo.data.DataSource({data: ["Todd", "Steve", "Burke"]}); 
```

希望这有助于开始。

# android - Android ListView 页脚单击的奇怪行为 - 延迟和/或无序触发

> ID：14699843
> 
> 赞同：2
> 
> 时间：2013-02-05T03:44:56.713
> 
> 标签：android

与 ListView 页脚关联的单击事件有时需要很长时间才能触发，尤其是在发生大量滚动之后。常规列表项点击总是立即触发。更奇怪的是，当页脚单击仍在等待处理时单击常规项目时，它将立即触发，完成后页脚单击将立即执行（单击以错误的顺序执行）。

非常感谢任何反馈。

```
private void init()
{
...

        // I attach a footer to this ListActivity instance like so...

        LayoutInflater inflater = ((LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE));
        mFooterView = inflater.inflate(R.layout.row_feed_footer, null, false);

        // Add click handler to footer
        mFooterView.findViewById(R.id.feed_footer_layout).setOnClickListener(new OnClickListener()
        {
           @Override
           public void onClick(View v)
           {
               onFooterClick(v);
           }
        });

        getListView().addFooterView(mFooterView);

        // Register with my custom adapter
        setListAdapter(mFeedData);
}

private void onFooterClick(View footerView)
{
    // After extensive scrolling, this event will take a long time to fire (as long as 5 seconds).
    // Unless onListItemClick, in which case it will fire immediately after
}

@Override
protected void onListItemClick(ListView l, View v, int position, long reportSeqNo)
{
    // After extensive scrolling, this event will still fire immediately
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:03:42.447

以防万一有人遇到类似的问题，我从来没有找到解决方案。这似乎是一个错误。我的解决方法是简单地将页脚实现为我的 ListAdapter 实现中的特殊情况项。

# android - Java 和 Android 网状/星型网络

> ID：14699844
> 
> 赞同：0
> 
> 时间：2013-02-05T03:45:05.237
> 
> 标签：android, networking, bluetooth, mesh-network

我目前正在开发一个 Android 项目，该项目需要连接到将消息发送到不同节点的蓝牙设备。这意味着我必须将正确的消息传递给适当的节点（许多微控制器）。

目前，我可以从主微控制器发送或接收字符串，我认为解决我的问题的最佳方法是主微控制器节点简单地重复并向所有其他节点广播消息。对于 Android 部分，我想知道创建一个包含接收者 id 和我要发送的数据之后的数组是否是一个好习惯。ID 为 8 位，数据为字符串。在我将 int 转换为字符串并连接两个字符串以发送我的 id+data 之后。

这是解决我的问题的好方法还是有更优雅的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:51:46.303

将字符串转换为字节并将其全部作为字节数组发送会更有效。严肃的网络协议永远不会使用这样的文本数据。如果你只是在做一个有趣的试验，那没关系。

这是我看到的网格无限指数传播的真正问题。假设我向某人发送消息，然后将其发送给我所有的邻居。他们会把它转发给他们所有的邻居。谁会把它转发给他们所有的邻居。如果图表中有任何循环将导致它被发送回已经看过它的人，谁会再次转发它。而且它永远不会死。除非你没有循环，否则你没有网格，你很脆弱，很可能会碎裂。您需要某种方法来防止重新传输相同的消息 - 可能就像消息 id 字段一样简单，并且不会再次重新传输相同的消息 id。不过，您需要大量的消息编号——比如 128 位 UUID。

# java - Android 屏幕尺寸问题

> ID：14699845
> 
> 赞同：1
> 
> 时间：2013-02-05T03:45:20.107
> 
> 标签：java, android, screen

我仍在试图找出解决方案。我在我的 res 文件夹上创建了多个布局，即：layout、layout-sw480dp、layout-sw600dp、layout-sw720dp。现在将其测试到真实设备（三星 Galaxy（7 英寸）和阿尔卡特 T10（7 英寸）），它们都使用 layout-sw600dp，但三星似乎比阿尔卡特大得多。除三星外，大多数 7 英寸平板电脑都可以正常工作。我已阅读此链接[屏幕尺寸](http://android-developers.blogspot.com/2011/07/new-tools-for-managing-screen-sizes.html)并发现

**最初的三星 Galaxy Tab 是一个有趣的案例。物理上它是一个 1024x600 7 英寸的屏幕，因此被归类为“大”。然而，设备将其屏幕配置为 hdpi，这意味着在应用适当的 ⅔ 缩放因子后，屏幕上的实际空间为 682dp x 400dp。这实际上将其移出“大”存储桶并进入“正常”屏幕尺寸。该选项卡实际上报告它是“大”的；这是框架计算我们制造的那个设备的大小时的错误。今天，任何设备都不应该像这样发货。**

我的三星 Galaxy 是 3.2，所以我确信它符合我的要求。

有人知道如何处理这种问题吗？比如我可以只为三星 Galaxy 创建一个新文件夹吗？

对不起我的英语，它不是我的母语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:06:08.643

我在上述问题上苦苦挣扎了一段时间，发现 thr 在 xml 中是无可替代的。

您必须在运行时处理此问题，如果您只希望它用于此特定模型，那么您可以在[此处](https://stackoverflow.com/questions/1995439/get-android-phone-model-programmatically)获取运行时制作的模型，然后处理场景。

反正我看不到你可以有一个专门的三星文件夹，如果你发现了，请告诉我:)

# python - Python中的方程求解

> ID：14699847
> 
> 赞同：2
> 
> 时间：2013-02-05T03:45:39.473
> 
> 标签：python, sympy

我正在尝试为 x 求解如下等式：

![情商](../Images/bcf828bc29373062aaa05bd4326a1ecf.png)

这里给出了 alpha 和 K，N 将超过 1,000。有没有办法使用 sympy 为 alpha 指定一个 np.array 的 LHS？我的希望是定义：

```
eqn = Eq(LHR - K)
solve(eqn,x) 
```

通过告诉 sympy LHS= sum( a_i + x)。

任何最快的求解器提示也将不胜感激。谢谢！

我希望有类似的东西：

```
from sympy import Symbol, symbols, solve, summation, log
import numpy as np
N=10
K=1
alpha=np.random.randn(N, 1)
x = Symbol('x')
i = Symbol('i')
eqn = summation(log(x+alpha[i]), (i, 1, N))
solve(eqn-K,x) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:02:41.547

您不能使用 SymPy 符号索引 NumPy 数组。由于您的总和是有限的，只需使用 Python sum 函数：

```
>>> alpha=np.random.randn(1, N)
>>> sum([log(x + i) for i in alpha[0]])
log(x - 1.85289943713841) + log(x - 1.40121781484552) + log(x - 1.21850393539695) + log(x - 0.605693136420962) + log(x - 0.575839713282035) + log(x - 0.105389419698408) + log(x + 0.415055726774043) + log(x + 0.71601559149345) + log(x + 0.866995633213984) + log(x + 1.12521825562504) 
```

但即便如此，我不明白你为什么不按照`(x - alpha[0])*(x - alpha[1])*...*(x - alpha[N - 1]) - exp(K)`Warren Weckesser 的建议将其重写为 。然后，您可以使用 SymPy 之类的数值求解器`nsolve`或其他库中的东西来数值求解

```
>>> nsolve(Mul(*[(x - i) for i in alpha[0]]) - exp(K), 1)
mpf('1.2696755961730152') 
```

您也可以用数字求解日志表达式，但除非您的日志可以有否定参数，否则这些应该是相同的。

# android - 获得多个客户端套接字连接到一台服务器，Android

> ID：14699848
> 
> 赞同：0
> 
> 时间：2013-02-05T03:45:42.287
> 
> 标签：android, sockets, networking

我有两个安卓平板电脑。他们使用套接字通过 wifi 连接。我能够让一个客户端连接并向服务器发送消息。如何让第二个客户端连接到服务器？

最终目标是让 2 或 3 台运行客户端应用程序的 Android 平板电脑同时连接并向服务器 Android 设备发送消息。

服务器 android 平板电脑应用程序中的一些示例代码

```
 serverSocket = new ServerSocket(SERVERPORT);
                while (true) {
                    // listen for incoming clients
                    Socket client = serverSocket.accept();
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            Intent intent = new Intent();
                            intent.setAction("com.example.test.state");
                            intent.putExtra("serverStatus","Connected");
                            sendBroadcast(intent);
                        }
                    });

                    try {
                        BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));

                        while ((line = in.readLine()) != null) {
                        //    Log.d("ServerActivity", line);
                            handler.post(new Runnable() {
                                @Override
                                public void run() {
                            receivedCommand = line;

                            Intent intent = new Intent();
                            intent.setAction("com.example.test.diceRolled");
                            intent.putExtra("receivedLine", line.trim());
                            sendBroadcast(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:21:18.453

将每个接受的套接字的所有 I/O 放入一个单独的线程中。

# json - 这个 JSON 对象有什么问题？

> ID：14699855
> 
> 赞同：1
> 
> 时间：2013-02-05T03:46:39.373
> 
> 标签：json

这有什么问题？

```
{ 'z': 'hello' } 
```

对我来说看起来像是一个有效的 JavaScript 字典，但 Python JSON 和[http://pro.jsonlint.com/](http://pro.jsonlint.com/)都在告诉我

```
Parse error on line 1:
{    'z': 'hello'}
-----^
Expecting 'STRING', '}' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T03:51:48.173

字符串必须用 JSON 中的双引号分隔：http: [//www.json.org/](http://www.json.org/)

它们可以在 Python 和 JavaScript 中单引号，但 JSON 是 JavaScript 的一个非常小的子集。

# javascript - 如何在 jquery 中使用 .animate()

> ID：14699856
> 
> 赞同：1
> 
> 时间：2013-02-05T03:46:41.923
> 
> 标签：javascript, jquery

希望你能检查我的代码。只想做动画。使用 'accordionHeader' 类切换 div 标签的顶部位置。

```
<script type="text/javascript">
  $(document).ready(function() {
    $(".accordionHeader").toggle(function() {
      $(".accordionHeader").animate({"top": "0 144px"}, 500);
      function(){
        $(".accordionHeader").animate({"top": "144px 0"}, 500);
      );
  });
</script> 
```

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:51:30.943

你的意思是：

```
$(document).ready(function(){
   $(".accordionHeader").toggle(
     function(){
        $(".accordionHeader").animate({"top": "144px"}, 500);
     },
     function() {
        $(".accordionHeader").animate({"top": "-144px"}, 500);
     });
}); 
```

作为替代方案，由于[jQuery.toggle()](http://api.jquery.com/toggle/)已弃用，您还可以执行以下操作：

```
$(".accordionHeader").on("click", function() {
    var clicked = $(this).data('clicked');
    if (clicked) {
        $(".accordionHeader").animate({"top": "144px"}, 500);
    }
    else {
        $(".accordionHeader").animate({"top": "-144px"}, 500);
    }
    $(this).data("clicked", !clicked);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:08:21.453

你可以在点击事件上试试这个

```
 $('.accordionHeader').animate({ position: 'relative', top: '144px' }, 500); 
```

# sql - SQL，努力相信 HAVING 可以比连接更有效

> ID：14699858
> 
> 赞同：0
> 
> 时间：2013-02-05T03:46:45.307
> 
> 标签：sql, oracle, database, database-performance, query-performance

我正在尝试在下表中查找为一支球队参加过不止一场比赛的球员（** 表示私钥），并且很难相信我能提出的最佳查询（如下）是最有效的. 关于如何改进它的想法，以及为什么会非常感激的解释（尝试学习 SQL）

```
Team (*tid*, name)
Game (*gid*, tid)
Player (*gid*, *name*)

SELECT Team_Name, Player_Name

  FROM (SELECT GID, TID FROM GAME) G
      ,(SELECT NAME AS Player_Name, GID FROM PLAYER) P
      ,(SELECT NAME AS Team_Name, TID FROM TEAM) T

  WHERE (     G.GID = P.GID
          AND Player_Name IN (SELECT P.NAME
                                FROM GAME G
                                    ,PLAYER P
                                WHERE G.GID = P.GID
                                GROUP BY P.NAME
                                HAVING COUNT(P.NAME) > 1)
          AND T.TID = G.TID
        )

  GROUP BY Team_Name, Player_Name
  HAVING COUNT(Player_Name) > 1
  ORDER BY Team_Name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:10:36.167

您是在询问哪些球员参加过不止一场比赛。

```
SELECT P.Player_Name
FROM Player P
GROUP BY P.Player_Name
HAVING COUNT(DISTINCT P.GID) > 1 
```

这将返回所有玩过 1 场以上游戏 (GID) 的玩家。

如果您还想 GROUP BY 团队，请执行以下操作：

```
SELECT P.Player_Name, T.Team_Name
FROM Player P
    JOIN Game G ON P.GID = G.GID
    JOIN Team T ON G.TID = T.TID
GROUP BY P.Player_Name, T.Team_Name
HAVING COUNT(DISTINCT G.GID) > 1 
```

在 Player 表中有 GID 似乎很奇怪。也许拥有一个存储 PlayerId 和 GameId 的 PlayerGames 表会更有意义——更好地进行数据库规范化。Player 表应该只为每个玩家存储一条记录。

还有，球员和球队之间真正的联系是什么。在这种情况下，您是说玩家必须玩游戏，而游戏必须有一个团队（或者一个游戏应该有 2 个或更多团队）。让我们知道您的目标，我们可以帮助您提出最佳选择。

祝你好运。

# android - Android 和 android:noHistory="true" 中的后退按钮

> ID：14699866
> 
> 赞同：0
> 
> 时间：2013-02-05T03:47:28.000
> 
> 标签：android, back-button, activity-finish

我已经实现了一个具有许多屏幕的应用程序，用于`android:noHistory="true"`从任何屏幕退出......我在我的应用程序的所有屏幕上都有*EXIT ......* `Button`

但是我在处理应用程序时遇到了一个问题，如果用户单击*BACK* `Button` ，则在表中应用程序结束......

![平板电脑中的默认平板电脑按钮](../Images/45587b04730b9a2857c209c93b2322f4.png)

现在我正在寻找一段`AlertDialog`时间用户点击默认返回`Button`..

建议我解决问题的任何方法。

经过一些建议后，我尝试了这个，这也不起作用..

我试过的代码是..

```
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
    AlertDialog.Builder builder = new AlertDialog.Builder(Login.this);
    builder.setMessage("Are you Sure want to close the Application..?")
            .setCancelable(false)
            .setTitle("EXIT")
            .setNegativeButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            })
            .setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            finish();
                        }
                    });
    AlertDialog alert = builder.create();
    alert.show();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T04:10:49.593

试试这个，

覆盖`onbackpressed`您的活动。

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    //ADD ALERT DIALOG HERE

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T03:55:41.110

覆盖活动的 onBackPressed 来做任何你想做的事情（比如弹出一个对话框）。

# ruby-on-rails - “rails server”命令未被识别

> ID：14699871
> 
> 赞同：0
> 
> 时间：2013-02-05T03:47:36.460
> 
> 标签：ruby-on-rails, localhost

我是 Rails 新手，正在学习 ROR 网站上发布的教程。一切正常，直到我尝试在本地主机上加载我的 rails 应用程序。每次输入时`$ rails server`，我都会得到一长串可能的命令和功能。当我检查我的`localhost:3000`and`127.0.0.1:3000`时，似乎没有任何连接。

在深入挖掘之后，我几乎尝试了其他所有人都尝试过的所有方法。我在与我的新 Rails 应用程序相同的路径中运行该命令。此外，当我在`$ rails`命令后输入废话时，我会得到相同的可能命令和功能列表。所以我觉得rails没有识别`server`命令。

这是我的版本：

*   红宝石 1.9.3 p374
*   导轨 3.2.11

为什么无法`server`识别命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:05:24.430

首先，您必须移动到项目目录并使用以下命令安装包：

```
bundle install 
```

然后启动服务器：

```
rails server 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T16:38:57.440

请退出终端，然后重新启动终端。

然后检查目录路径，即只需键入`pwd`它将显示当前目录路径。

如果目录正确，请再次尝试运行命令，如`bundle install`&`rails server`

我认为这应该是工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-05T16:25:49.053

我有同样的问题。`rails server`或者`rails s`仅当您位于正确的目录中时才有效。

键入`pwd`（当前工作目录）以查看您当前所在的位置。键入`cd`和其余的方向到正确的目录。（例如，“cd workspace/learn-rails”）键入`rails server`或`rails s`. 检查[http://localhost:3000](http://localhost:3000)。

# php - 从 MSSQL 准备好的语句中获取结果

> ID：14699872
> 
> 赞同：0
> 
> 时间：2013-02-05T03:47:38.413
> 
> 标签：php, pdo

此代码打印出列名列表。但我希望它能够为具有JSmith`UserName`的用户打印出存储在表中的信息。`LoginName`

```
 $loginname = "JSmith";
 $stmt = $dbh->prepare("SELECT * FROM UserName WHERE LoginName=:login_name");
 $stmt->bindValue(":login_name", $login_name, PDO::PARAM_STR);
 $stmt->execute();

echo "<table><tr>";
$result = $stmt->fetch(PDO::FETCH_ASSOC);
 print_r($result);
foreach ($result as $key => $val){
    echo "<th>" . $key . "</th>";   
}
echo "</tr>";
echo "</table>"; 
```

为什么这不返回带有用户名的行？看着`echo gettype($result)`告诉我它们是字符串和整数；不像每个返回的数组本身就是一个数组。我敢肯定这是一件简单的事情，但任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:49:33.527

您正在打印键，而不是值。键是列名，值是对应的列值。

`print_r($result)`显示`$stmt->fetch()`返回一个包含您期望的信息的数组，而相应的 HTML 根本没有反映这一点。

[http://php.net/manual/en/pdostatement.fetch.php#example-1018](http://php.net/manual/en/pdostatement.fetch.php#example-1018)

让我们修复它。

```
$result = $stmt->fetch(PDO::FETCH_ASSOC);
print_r($result);
foreach ($result as $key => $val){
    echo "<th>" . $key . "</th>";
    echo "<td>" . $val . "</td>";
}
echo "</tr>";
echo "</table>"; 
```

# rabbitmq - 如何为rabbitmq管理重置用户

> ID：14699873
> 
> 赞同：91
> 
> 时间：2013-02-05T03:47:53.067
> 
> 标签：rabbitmq

使用rabbitmq，我们可以安装管理插件。然后我们`http://localhost:55672/`使用 guest:guest 通过浏览器访问。问题是，我无法再登录，因为我更改了密码并为角色输入了空白。

有没有办法为rabbitmq管理重置用户？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2013-02-05T15:11:15.813

您可以`rabbitmqctl`使用以下命令访问用户管理：

```
add_user {username} {password} 
```

或者更优选地可以编辑现有用户，或者为新用户设置权限：

```
set_permissions [-p vhostpath] {user} {conf} {write} {read} 
```

例如使用以下命令：（即使在创建新用户时，执行这三个步骤也很重要，如果您希望能够登录到 UI 控制台并让您的程序在不遇到任何权限问题的情况下工作）

```
rabbitmqctl add_user newadmin s0m3p4ssw0rd
rabbitmqctl set_user_tags newadmin administrator
rabbitmqctl set_permissions -p / newadmin ".*" ".*" ".*" 
```

...创建一个对默认/虚拟主机具有完全访问权限的新管理员用户。

[您可以在RabbitMQ 主页](https://www.rabbitmq.com)上找到所有这些，更具体地说，在此[页面上](http://www.rabbitmq.com/man/rabbitmqctl.1.man.html)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2018-02-02T06:02:22.243

我发现最简单的方法是使用此命令重置 RabbitMQ 中任何用户的密码

```
rabbitmqctl change_password <USERNAME> <NEWPASSWORD> 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-02-21T22:22:43.530

这专门用于活力测试，但也可以适用于其他 api

```
rabbitmqctl add_vhost statuscheckvhost
rabbitmqctl add_user heartbeat alive
rabbitmqctl set_permissions -p statuscheckvhost heartbeat ".*" ".*" ".*"
rabbitmqctl set_user_tags heartbeat management

curl -i -u heartbeat:alive http://127.0.0.1:55672/api/aliveness-test/statuscheckvhost
HTTP/1.1 200 OK
Server: MochiWeb/1.1 WebMachine/1.9.0 (someone had painted it blue)
Date: Thu, 21 Feb 2013 22:20:10 GMT
Content-Type: application/json
Content-Length: 15
Cache-Control: no-cache
{"status":"ok"} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-12-22T17:35:54.870

如果你在 docker 容器上有 RabbitMQ，你可以先

```
docker exec -it <YOUR_CONTAINER> /bin/bash 
```

然后你可以做

```
rabbitmqctl change_password <USERNAME> <NEWPASSWORD> 
```

比如@samtoddler 指出

# firefox - HTML5 AutoFocus 属性导致 Firefox 滚动到页面底部

> ID：14699875
> 
> 赞同：10
> 
> 时间：2013-02-05T03:47:56.353
> 
> 标签：firefox, twitter-bootstrap, autofocus

我们有一个`<!DOCTYPE html>`带有 Twitter Bootstrap 和各种其他 JavaScript 库（包括 jQuery）的 HTML5 应用程序（

该页面包含一个带有`autofocus`属性集的文本输入。

`<input type="text" autofocus="autofocus" />`

该页面包含多个“屏幕”内容，这意味着页面上总会有一个垂直滚动条。文本输入位于页面的第一个“折叠”内，大约。距页面顶部 250 像素。

在 Chrome、Safari 和 Opera 上，页面按预期工作。当页面加载时，元素在屏幕上并获得焦点。

在 FireFox（当前版本 - 18.0.1）上，元素具有焦点，但页面已滚动到 1533px（通过 window.pageYOffset 确定）。具有不同内容长度的同一页面将始终滚动到同一位置，并且元素将呈现在屏幕外。

肯定只有一个元素设置了自动对焦属性 ( `$("[autofocus]").length`)。

从元素中删除 autofocus 属性根本不会导致页面滚动（即页面保持滚动到顶部 - 正如预期的那样）。

任何人都可以提供任何帮助或见解吗？

## 我们尝试过的事情

以下测试正常工作：

```
<!DOCTYPE html>
<html>
<head>  </head>
<body>
  <div style="height: 200px">
    <h1>Test</h1>
  </div>
  <div style="height: 2000px">
    test
    <br />
    <input autofocus type="text" />
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T00:10:23.117

我们最近用 Firefox 重试了这个，但无法复制这个问题。

关闭...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-05T13:40:13.587

你需要css代码这样说： `.focusedInput { border-color: rgba(82,168,236,.8); outline: 0; outline: thin dotted \9; -moz-box-shadow: 0 0 8px rgba(82,168,236,.6); box-shadow: 0 0 8px rgba(82,168,236,.6) !important; }` 然后文本输入代码是这样的： `<input class="form-control focusedInput" type="text">`

# mysql - 使用 subQuery 作为数组的 MySQL Query

> ID：14699876
> 
> 赞同：1
> 
> 时间：2013-02-05T03:47:58.630
> 
> 标签：mysql, arrays, subquery

我需要做一些 mysql 查询，但我宁愿在 1 个查询而不是多个查询中获取我需要的所有数据。

我如何将其变成子查询？

```
SELECT * FROM categories ORDER BY categoryName ASC
SELECT * FROM locations ORDER BY locationName ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:51:53.023

尝试这个...

```
SELECT * FROM categories,(SELECT * FROM locations ORDER BY locationName ASC) AS location ORDER BY categoryName ASC 
```

# android - 使用静态 DatabaseHelper 的 NullPointerException 崩溃报告

> ID：14699879
> 
> 赞同：0
> 
> 时间：2013-02-05T03:48:09.927
> 
> 标签：android, sqlite, nullpointerexception, ormlite

我从 Google 收到无法重现的随机 NullPointerException 崩溃报告。我正在使用对扩展 OrmLiteSqliteOpenHelper 的类的静态引用。助手在扩展 SherlockFragmentActivity 的主类中初始化。

```
if (DatabaseHelper.getInstance() == null) {
    DatabaseHelper.setInstance(this.getApplicationContext());
} 
```

起初我虽然可能会在设备旋转或发送到后台时发生。但是没有多少测试能够重现这个问题。

代码中没有任何地方将静态 mHelper 变量设置为 null

```
public class DatabaseHelper extends OrmLiteSqliteOpenHelper {
    …
    private static DatabaseHelper mHelper;
    …
    public static DatabaseHelper getInstance() {

        return DatabaseHelper.mHelper;
    }

    public static void setInstance(Context context) {

        DatabaseHelper.mHelper = new DatabaseHelper(context);
    }
    …
} 
```

有谁知道可能是什么原因造成的？

以下是其中一份报告：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{au.com.dcbs.tradies/au.com.dcbs.tradies.presentation.document.DocumentActivity}: java.lang.NullPointerException
 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2049)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2083)
at android.app.ActivityThread.access$600(ActivityThread.java:134)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1233)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4697)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at bd.a(Document.java:654)
at au.com.dcbs.tradies.presentation.document.DocumentActivity$a.b(DocumentActivity.java:102)
at au.com.dcbs.tradies.presentation.document.DocumentActivity$a.onActivityCreated(DocumentActivity.java:78)
at e.a(FragmentManager.java:891)
at e.a(FragmentManager.java:1080)
at e.a(FragmentManager.java:1062)
at e.k(FragmentManager.java:1810)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:501)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1133)
at android.app.Activity.performStart(Activity.java:4549)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2022)
... 11 more 
```

第 654 行是此方法的第一行：

```
public static Document get(long id, Context context) {

    DocumentEntity entity = DatabaseHelper.getInstance().getDocumentDao().queryForId((int)id);
    Document doc = new Document(entity, context);
    return doc;
} 
```

getDocumentDao 返回一个类型的对象`com.j256.ormlite.dao.RuntimeExceptionDao`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:10:35.933

在 Android 中，它不能确保静态字段变量并不总是保留，您应该...

```
public static DatabaseHelper getInstance(Context context) {
    if (mHelper == null) {
        mHelper = new DatabaseHelper(context);
    }
    return mHelper;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T04:02:43.430

如果您发布出现问题的代码会有所帮助

```
at bd.a(Document.java:654) 
```

但是作为可能解决您的问题的一般建议，您可以考虑在一个`application`类中而不是在任何活动中初始化数据库助手，因为它似乎是用于整个应用程序的东西，并且不依赖于特定的活动上下文。

**编辑**

我认为您需要在第 654 行中断代码，因为很难判断哪个函数返回 null。例如

```
DatabaseHelper helper = DatabaseHelper.getInstance();
... 
```

# html - 如何将文本对齐到无序列表的顶部？

> ID：14699884
> 
> 赞同：1
> 
> 时间：2013-02-05T03:48:53.390
> 
> 标签：html, css

快速html问题：

如何将此无序列表中的文本对齐到 div 的顶部？

```
<div id="menucontainer">
                <ul id="menu">
                    <li style="vertical-align:top"><a href="/">Home</a></li>
                    <li><a href="/Home/About">About</a></li>
                </ul>
            </div>

/* TAB MENU   
----------------------------------------------------------*/
ul#menu {
    border-bottom: 1px #5C87B2 solid;
    padding: 0 0 2px;
    position: relative;
    margin: 0;
    text-align: right;
}

ul#menu li {
    display: inline-block;
    list-style: none;
     vertical-align:top;

}

ul#menu li#greeting {
    padding: 10px 20px;
    font-weight: bold;
    text-decoration: none;
    line-height: 2.8em;
    color: #fff;

}

ul#menu li a {
    padding: 10px 20px;
    font-weight: bold;
    text-decoration: none;
    line-height: 2.8em;
    background-color: #e8eef4;
    color: #034af3;
    -webkit-border-radius: 4px 4px 0 0;
    -moz-border-radius: 4px 4px 0 0;
    border-radius: 4px 4px 0 0;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T03:53:26.827

似乎默认情况下会是这样，但这应该可以解决任何阻碍的样式。

```
ul#menu li {display: inline-block; vertical-align: top;} 
```

[http://jsfiddle.net/uyhHh/](http://jsfiddle.net/uyhHh/)

# maven - Maven / IDEA 设置资源模式

> ID：14699886
> 
> 赞同：1
> 
> 时间：2013-02-05T03:49:31.247
> 
> 标签：maven, groovy, intellij-idea

我的项目使用 Maven 来编译 Java 和 Groovy 类。我的项目使用 maven 编译和构建得很好，但我希望 IDEA (IntelliJ) 也能正确构建它。我使用 maven 通过以下命令生成 IDEA 项目文件：

```
mvn idea:idea 
```

我注意到它不构建 groovy 文件，只构建 java 文件。

我发现问题是默认情况下 IDEA 将所有没有 .java 扩展名的文件视为资源。

当我使用 maven IDEA 插件生成项目文件时，我在 ipr 文件中得到以下内容

```
<component name="CompilerConfiguration">
<option name="DEFAULT_COMPILER" value="Javac" />
<resourceExtensions />
<wildcardResourcePatterns>
  <entry name="!?*.java" />
</wildcardResourcePatterns>
... 
```

我必须以这种方式修改它才能编译我的 groovy 文件（以及其他一些文件）：

```
<component name="CompilerConfiguration">
<option name="DEFAULT_COMPILER" value="Javac" />
<resourceExtensions />
<wildcardResourcePatterns>
  <entry name="!?*.java" />
  <entry name="!?*.groovy" />
  <entry name="!?*.scala" />
  <entry name="!?*.flex" />
</wildcardResourcePatterns>
... 
```

*注意：此信息也可以在 IDEA -> Settings -> Compiler -> Resource patterns 中找到/编辑*

我可以使用以下命令正确生成它：

```
mvn idea:idea -DwildcardResourcePatterns="!?*.java;!?*.groovy;" 
```

有谁知道如何在 pom.xml 中配置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:03:14.553

这需要在 pom.xml 中添加

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-idea-plugin</artifactId>
    <configuration>
       <wildcardResourcePatterns>!?*.java;!?*.groovy;</wildcardResourcePatterns>
    </configuration>
  </plugin> 
```

# mongodb - 为什么这个 Mongo 聚合不起作用？

> ID：14699890
> 
> 赞同：0
> 
> 时间：2013-02-05T03:49:52.273
> 
> 标签：mongodb, mongoose

我觉得我一定遗漏了一些明显的东西。这是聚合，因为人们会将其发布在 shell 中：

```
db.documents.aggregate(
   { $project: { title: 1, "date.year": 1, decade:
   { $subtract: ['$date.year', { $mod: ['$date.year', 10]}]}
}}) 
```

这应该获取一个文档列表，每个文档都有一个 date.year 字段，并添加一个十年字段，指示文档所在的十年（1900、1910 等）。我计划在获得后进一步转换数据补充说。

问题是当我运行聚合时，我得到：

```
{
    "errmsg" : "exception: $subtract resulted in a non-numeric type",
    "code" : 16413,
    "ok" : 0
} 
```

如果我将 $subtract 更改为 $add，它可以正常工作（但当然不会给我正确的结果。）那么减法是怎么回事？为什么我减去时得到一个非数字类型，而当我加时得到一个数字？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T04:32:01.567

这看起来像是[聚合框架中的一个错误](https://jira.mongodb.org/browse/SERVER-7932)- 当您操作的字段未在通过管道的文档中设置时，它没有正确处理减法。

它已在 2.3.2 中修复（我无法重现这一点 - 当未设置“日期”时，它会投射“null”）但您可以解决此限制的一种方法是向您的管道添加 $match 条件，即前缀{$project} 与：

`{$match: {"date.year":{$exists:true}}}`

# java - 如何使用 JIRA REST Java 客户端创建子任务

> ID：14699893
> 
> 赞同：2
> 
> 时间：2013-02-05T03:50:11.293
> 
> 标签：java, api, jira

有没有办法使用 JRJC v1.0 创建子任务？我一直无法找到任何好的文档。有没有示例代码？

似乎库不支持它，但可以使用直接的 REST API。

JIRA v5.1.5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T19:02:17.067

我能够将以下有效的代码放在一起。

```
 IssueInputBuilder issueBuilder = new IssueInputBuilder("Project1", 5L);//5 is the id for subtask type. You can know the id of subtask type by querying this REST api /rest/api/2/issue/createmeta
    issueBuilder.setDescription(">> Test Description");
    issueBuilder.setSummary("Test summary");
    issueBuilder.setProjectKey("Project1");
    Map<String, Object> parent = new HashMap<String, Object>();
    parent.put("key", "SOMEISSUE-234");
    FieldInput parentField = new FieldInput("parent", new ComplexIssueInputFieldValue(parent));

    Map<String, Object> customField = new HashMap<String, Object>();
    customField.put("value", "someValue");//This is some custom field value on the subtask
    customField.put("id", "12345");//This is the id of the custom field. You can know this by calling REST GET for a manually created sub-task

    issueBuilder.setFieldInput(parentField);
    issueBuilder.setFieldValue("customfield_12345",  new ComplexIssueInputFieldValue(customField));//here again you have to query an existing subtask to know the "customfield_*" value

    com.atlassian.jira.rest.client.domain.input.IssueInput issueInput = issueBuilder.build();
    BasicIssue bIssue = restClient.getIssueClient().createIssue(issueInput, pm);    
    System.out.println(">>> " + bIssue.getKey()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T13:09:40.043

您像往常一样创建问题（[例如](https://answers.atlassian.com/questions/65115/create-an-issue-in-jira-rest-java-client#answer-container-112992)），但将问题类型设置为所需的子任务类型。然后，将子任务链接到它的父级 use [`linkIssue`](http://docs.atlassian.com/jira-rest-java-client/1.0/apidocs/com/atlassian/jira/rest/client/IssueRestClient.html#linkIssue%28com.atlassian.jira.rest.client.domain.input.LinkIssuesInput,%20com.atlassian.jira.rest.client.ProgressMonitor%29)，例如：

```
LinkIssuesInput linkIssuesInput = new LinkIssuesInput("TST-1", "TST-2", "jira_subtask_link", Comment.valueOf("simple comment"));
issueClient.linkIssue( linkIssuesInput , pm); 
```

我自己没有测试过，我在旧的 JIra 中使用了[XML-RPC ，在新的 JIra 中使用了](https://developer.atlassian.com/display/JIRADEV/JIRA+XML-RPC+Overview)[python-jira](http://jira-python.readthedocs.org/en/latest/)。完整的 API 可[在此处获得](http://docs.atlassian.com/jira-rest-java-client/1.0/apidocs/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T21:05:22.180

REST API [http://docs.atlassian.com/jira/REST/latest/#id326540](http://docs.atlassian.com/jira/REST/latest/#id326540)有评论：

创建子任务类似于创建常规问题，但有两个重要区别：

issueType 字段必须对应一个子任务的问题类型（您可以使用 /issue/createmeta 来发现子任务的问题类型），并且您必须在问题创建请求中提供一个包含父问题的 id 或键的父字段.

所以我认为常规的 createIssue 方法应该可以工作，但是你需要确保你已经传入了一个额外的 FieldInput 对象，该对象是用 ("parent", "ABC-123") 构造的

如果使用子任务链接类型的链接确实有效，我会感到惊讶。

# asp.net-mvc-3 - 为什么自定义 MVC3 操作过滤器会在一个控制器操作上起作用，而在另一个控制器操作上不起作用？

> ID：14699906
> 
> 赞同：0
> 
> 时间：2013-02-05T03:51:46.657
> 
> 标签：asp.net-mvc-3, actionfilterattribute

这是情况。我有一个在两个不同控制器中使用的单个动作过滤器。动作过滤器定义为：

```
public class ValidSubmissionAttribute : FilterAttribute, IActionFilter
{
    public void OnActionExecuted(ActionExecutedContext filterContext)
    {
    }

    public void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var controller = filterContext.Controller;
        var session = filterContext.HttpContext.Session;
        var isValid = controller.TempData["IsValid"];
        if (isValid == null || !(bool)isValid)
        {
            SharedUtilities.LogOutUser(session, controller.ViewData.ModelState);
            filterContext.Result = SharedUtilities.GetThankYouRedirect();
        }
    }
} 
```

当我在一个控制器中调用 Attribute 时，如下所示：

```
 [HttpPost]
    public ActionResult DoSomething(string button, Model data)
    {
        try
        {
            if (ModelState.IsValid)
            {
                TempData["IsValid"] = 
                   Request.Form["ValidRequest"] == Session.SessionID;
                Session["VerifyDoingSomethingData"] = data;
                return RedirectToAction("VerifyDoingSomething");
            }

         }
        catch (Exception ex)
        {
        }
    }

    [ValidSubmission]
    public ActionResult VerifyDoingSomething()
    {
        ViewData.Model = Session["VerifyDoingSomethingData"];
        return View("VerifyDoingSomething");
    } 
```

它按预期运行。但是，当我从不同的控制器调用它时，如下所示：

```
 [HttpPost]
    public ActionResult Index(string button, Model data)
    {
        try
        {
            if (ModelState.IsValid)
            {
                TempData["IsValid"] = 
                    Request.Form["ValidRequest"] == Session.SessionID;
                Session["ViewModel"] = data;
                return RedirectToAction("VerifyCancellation");
            }

        }
        catch (Exception ex)
        {
        }
    }

    [ValidSubmission]
    public ActionResult VerifyCancellation()
    {
        ViewData.Model = Session["ViewModel"];
        return View("VerifyCancellation");
    } 
```

该属性根本不运行。我在 OnActionExecuting 方法中的断点没有被命中。

如果我不得不猜测，我会说控制器或操作方法存在一些差异，但它们在功能上似乎相似。有什么见解吗？为什么我会看到如此不同的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:51:33.840

Aaaaand，我是个笨蛋。

事实证明，我忘记了一条完全不同的执行路径。该路径没有要在 ValidSubmsionAttribute 中使用的 TempData 信息。现在一切正常。

# c# - 将 IQueryable 作为 IEnumerable 调用，在客户端完成过滤？

> ID：14699909
> 
> 赞同：1
> 
> 时间：2013-02-05T03:51:52.257
> 
> 标签：c#, iqueryable

我在这里读了一篇文章：[N-tier Zombie with wcf](http://www.codeproject.com/Articles/474212/Zombie-Explorer-A-N-Tier-application-from-top-to-b)。

我遇到了以下语句“zombieRepository.GetAll().Where(funcComp)”，`GetAll()`返回一个`IQueryable`，但是该`where`语句是在一个`Func<>`参数中传递的，它实际上将`IQueryable`接口称为`IEnumerable`接口。

这个调用的问题是过滤器是在客户端完成的（全部读`dtos.ZombieIncident`出来，然后应用过滤器），而不是在 sql server 端，我的理解是否正确？

代码片段：

```
var paramStart = Expression.Parameter(typeof(dtos.ZombieIncident), "x");
                Expression<Func<dtos.ZombieIncident, bool>> func = Expression.Lambda<Func<dtos.ZombieIncident, bool>>(
                            Expression.Call(Expression.Property(paramStart,
                                typeof(dtos.ZombieIncident).GetProperty(propertyName).GetGetMethod()),
                                typeof(String).GetMethod(searchType.ToString(), new Type[] { typeof(String) }),
                                new Expression[] { Expression.Constant(searchValue, typeof(string)) }),
                    new ParameterExpression[] { paramStart });

                Func<dtos.ZombieIncident, bool> funcComp = func.Compile();

                foreach (dtos.ZombieIncident zombie in zombieRepository.GetAll().Where(funcComp).ToList())
                {
                    zombies.Add(ZombieIncidentDTOMapper.FromDTO(zombie));
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:00:14.410

有两种不同的`Where`扩展方法：

[`System.Linq.Enumerable.Where`](http://msdn.microsoft.com/en-us/library/vstudio/system.linq.enumerable.where%28v=vs.100%29.aspx)：

*   接受一个`Func<TSource, Boolean>`参数
*   过滤内存中的集合

[`System.Linq.Queryable.Where`](http://msdn.microsoft.com/en-us/library/vstudio/system.linq.queryable.where%28v=vs.100%29.aspx)：

*   接受一个`Expression<Func<TSource, Boolean>>`参数
*   在数据源过滤集合

如果您不确定您使用的是哪种方法，请将光标放在它上面并按 F1。您将被发送到与上述链接之一相对应的页面。

# r - 识别与给定字符串向量匹配的列索引

> ID：14699911
> 
> 赞同：6
> 
> 时间：2013-02-05T03:52:06.390
> 
> 标签：r, matrix, vector, vectorization, string-matching

我有一个字符串向量

```
x<-c('a','b') 
```

我有一个多列的矩阵；其中包含该字符串向量中的名称。我想获得与其名称匹配的列号/索引。

```
which(colnames(sample_matrix) == x) 
```

当 x 不是向量而是单个元素时，上述方法有效。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T03:55:51.997

尝试

```
 which(colnames(sample_matrix) %in% x) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T03:57:24.213

您正在寻找的是`%in%`：

```
which(colnames(sample_matrix) %in% x) 
```

或者，或者，`match`

```
match(x, colnames(sample_matrix)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T05:25:01.063

还：

```
grep("^a$|^b$", colnames(sample_matrix) ) 
```

使用 grep 通常比测试是否存在于一串值中更通用。您可以获得与模式匹配的所有项目，例如所有以“a”开头的名称。

# asp.net - ASP.NET：SqlDataSource 的 ConnectionString 中 <%$ %> 中的 $ 含义

> ID：14699914
> 
> 赞同：1
> 
> 时间：2013-02-05T03:52:41.550
> 
> 标签：asp.net

**SqlDataSource**控件的**ConnectionString**属性中的美元符号是什么`$`意思。下面是一个例子。`<%$ %>`

 ****```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:LocalDB%>" SelectCommand="SELECT * FROM TableName"></asp:SqlDataSource> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:56:27.620

这是 ASP.NET 的表达式生成器语法，请查看此问题以获取更多信息[asp.net <%$ ... %> 语法](https://stackoverflow.com/questions/7934160/asp-net-syntax)****

# django - 如何编写 coloum_value < 100 的 Django 查询？

> ID：14699915
> 
> 赞同：0
> 
> 时间：2013-02-05T03:52:49.337
> 
> 标签：django

我在 DJango 有这样的桌子吗？

```
| id | user_id | name          | source         | remaining | start_date                 | time_remaining | size |
+----+---------+---------------+----------------+-----------+----------------------------+----------------+------+
|  1 |       1 | ok.txt        | ngs.pradhi.com |        20 | February 05, 2013, 08:01AM | 1              | 4 MB |
|  2 |       1 | NC_008253.fna | ngs.pradhi.com |        20 | February 05, 2013, 08:02AM | 1              | 4 MB |
|  3 |       1 | test.data     | ngs.pradhi.com |         0 | February 05, 2013, 08:21AM | 1              | 4 MB 
```

我想检索数据 where`user_id = request.user.id`和`remaining < 100`. 尝试使用：

```
Queue.objects.filter(user_id=request.user.id, remaining < 100) But didn't work. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:54:09.380

```
Queue.objects.filter(user_id=request.user.id, remaining__lt=100).exclude(remaining=0) 
```

[Django 字段查找](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#lt)

# google-app-engine - 将 version.appidentifier.appspot.com 重定向到我自己域的子域

> ID：14699919
> 
> 赞同：1
> 
> 时间：2013-02-05T03:53:12.813
> 
> 标签：google-app-engine

我有一个 GAE 应用程序，我已经能够将*appidentifier.appspot.com*重定向到我自己域的 www 子域和裸域。例如，如果我拥有*foo.appspot.com*和*foo.com*，那么在浏览器中输入*www.foo.com*或*foo.com*将成功呈现*foo.appspot.com*的内容。我在 Google 方面使用**Google Apps**和在注册商方面使用**NameCheap配置了所有这些。**

现在，我制作了一个新的、非默认版本的 GAE 应用程序。我们称之为*dev.foo.appspot.com*。如何设置 URL 转发（或其他），以便我只需在浏览器中输入*dev.foo.com*即可访问此 GAE 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:41:45.070

如果您设置通配符子域映射，您正在寻找的可能是可能的。这在[使用自定义域](https://developers.google.com/appengine/docs/domain)的最后一节中有详细记录。

# sql-server-2008 - NEWSEQUENTIALID() SQL 是否总是生成唯一 ID 而与主机无关？

> ID：14699920
> 
> 赞同：3
> 
> 时间：2013-02-05T03:53:16.983
> 
> 标签：sql-server-2008

这是一个通用查询，我的场景是：我有一个 DB（MS SQL）并创建一个表，其中有一列作为 uniqueidentifier 并使用 NEWSEQUENTIALID() 分配值，我知道它总是唯一的 id。但是，如果我在三台机器上部署相同的数据库（两台机器是事务数据库，第三台是复制数据库）怎么办。在复制数据库中，我将更新列以不自行分配值。从两个事务数据库中，我将每天将数据复制到复制数据库。现在查询是，当我复制到复制数据库时，在两个事务数据库上生成的 id 是否是唯一的。IE。生成的 ID 在任何机器上都是唯一的吗？还是只有一台机器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T12:37:26.087

是的，它仍然是全球独一无二的。

看看它的 MSDN 页面：http: [//msdn.microsoft.com/en-gb/library/ms189786.aspx](http://msdn.microsoft.com/en-gb/library/ms189786.aspx)

“指定的计算机”指的是 GUID 将大于先前生成的 GUID 的事实。因此，仅保证该机器大于上次生成的值。它的独特性是全球性的。

# javascript - javascript执行错误的函数

> ID：14699921
> 
> 赞同：-1
> 
> 时间：2013-02-05T03:53:22.280
> 
> 标签：javascript, html, function

如您所知，我无法让我的 javascript 执行正确的功能（不要笑）。这就是我所说的：[http](http://thomaswd.com/Chopsticks) ://thomaswd.com/Chopsticks 。当您将左下角的图像拖到左上角 5 次时，图像变灰一秒钟并刷新。当您对另一侧执行此操作时，它会改为执行左侧的功能。我尝试了 firebug 和 safari 错误日志，但它们根本没有帮助。请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:03:29.567

```
function refreshRightCpu() {
    cpuLeftImg.src = "images/left-1.png";
    cpuRight = 1;
} 
```

不应该这样`cpuRightImg.src`吗？

# jquery - 默认情况下，wp-ui 选项卡的 jquery 全部关闭

> ID：14699926
> 
> 赞同：1
> 
> 时间：2013-02-05T03:53:30.220
> 
> 标签：jquery, wordpress, jquery-ui-tabs

您好，感谢您提供我可能收到的任何解决方案或建议

我不是程序员，对 js 知之甚少。我一直忙于修复最近 wordpress 更新到 3.5 和 3.5.1 引起的问题，我遇到了 wp ui 问题，这似乎与 3.5 使用的新 js 有问题。 1 插件作者好像消失了，5个多月没有活跃了

经过大量测试/反复试验后，我的插件可以正常工作，但不能使用“JQuery ui 主题”，只能使用“Css 3 样式”

我现在有很多变化

我已经更改了一些 css 文件以适合我的配色方案，这些文件是：-

1.  wpui-red
2.  wpui-绿
3.  wpui夸克
4.  wpui-safle

[前 3 个在Degrees](http://www.pgracglasgow.co.uk/degrees)页面上给出输出

最后 1 个在[测试页上](http://www.pgracglasgow.co.uk/test%20page)

我已将其设置为选项卡以显示为按钮，并且它们可以正常工作

我的问题是我在文件 tabs.js 中输入的一段代码

在以下路径 \wp-ui\js\select\tabs.js

我输入的代码是

" `options.selected = -1;` "

第 133 行之后

此代码是从 wp-ui 论坛中的脚本更改的

```
"<script type="text/javascript">
jQuery(function() {  jQuery('.ui-tabs').tabs({ collapsible : true, selected : -1  });
</script>" 
```

此代码是默认关闭所有选项卡

我已将其安装在本地主机上，并激活了所有相同的设置和插件，并且默认情况下所有选项卡都关闭了它可以正常工作

但在现场看它没有工作

我认为我的 css 越来越好，但对 js 没有任何影响

我尝试从 weaver 主题标题部分运行脚本，该部分有一个用于插入脚本的部分，但它在实时站点或本地主机上都不起作用

谁能指出我正确的方向，因为我不认为 tabs.js 文件加载到实时站点上的原因。我希望我们关闭标签，因为 wp-ui 对话框不起作用，我用它来将重要新闻放在带有小部件的所有页面的顶部，并计划使用标签来执行此操作

我输入的 css 是否正常，或者它是否会导致与其他人发生冲突，因为我不得不使用很多 !important 来覆盖设置以获得所需的效果

您可以提供的任何帮助或建议都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T10:52:56.170

只需将选择的活动更改为 false

```
.tabs({ collapsible : true, active: false  });` 
```

# python - 如何从包含标题和正文的响应中提取 JSON 数据？

> ID：14699932
> 
> 赞同：3
> 
> 时间：2013-02-05T03:54:25.043
> 
> 标签：python, json, string, authentication, extract

这是我向 Stack Overflow 提出的第一个问题，因为通常我可以在这里找到我的问题的解决方案，但对于这种特殊情况，我不能。我正在为我的编译器编写一个 Python 插件，它以各种语言输出 REST 调用以与 API 交互。我通过在请求正文中以 JSON 形式发送用户名和密码来使用套接字和 ssl 模块进行身份验证。身份验证成功后，API 会返回以下格式的响应，正文中包含重要的响应数据：

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Date: Tue, 05 Feb 2013 03:36:18 GMT
Vary: Accept-Charset, Accept-Encoding, Accept-Language, Accept
Accept-Ranges: bytes
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: POST,OPTIONS,GET
Access-Control-Allow-Headers: Content-Type
Server: Restlet-Framework/2.0m5
Content-Type: text/plain;charset=ISO-8859-1
Content-Length: 94

{"authentication-token":"<token>","authentication-secret":"<secret>"} 
```

鉴于 Pythonistas 强大的字符串操作工具，这可能是一个非常基本的问题。但是，唉，我是一个从 Java 开始的新程序员。我想知道解析整个响应以获得`"<token>"`and的最佳方法是`"<secret>"`什么？我应该使用搜索“{”并将子字符串转储到 json 对象中吗？我的直觉告诉我尝试使用 re 模块，但我似乎无法弄清楚在这种情况下如何使用它，因为令牌和秘密的模式显然是不可预测的。因为我选择了使用低级模块集进行身份验证，所以这个响应是一个大字符串，通过构造标头并将 JSON 数据附加到正文中，然后执行请求并使用以下代码获取响应：

```
#Socket configuration and connection execution
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
conn = ssl.wrap_socket(sock, ca_certs = pem_file)
conn.connect((host, port))
conn.send(req)

response = conn.recv()
print(response) 
```

print 语句输出第一个代码示例。任何帮助或见解将*不胜*感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T04:07:16.320

`\r\n\r\n`HTTP 标头按顺序与正文的其余部分分开。执行以下操作：

```
import json

...

(headers, js) = response.split("\r\n\r\n")
data = json.loads(js)
token = data["authentication-token"]
secret = data["authentication-secret"] 
```

您可能想要检查响应等，并且各种库（例如[requests](http://docs.python-requests.org/en/latest/)）可以为您轻松完成所有这些工作。

# php - 从视图中获取“id”并传递到 CodeIgniter 中的另一个视图

> ID：14699937
> 
> 赞同：2
> 
> 时间：2013-02-05T03:55:08.103
> 
> 标签：php, codeigniter

我是 CodeIgniter 的新手。我在从“项目视图”获取“id”时遇到问题，然后我会将其传递给另一个称为“项目详细信息视图”的视图。我试过在 URL 中使用 & 符号，我猜想这在 CodeIgniter 中不起作用。

这是我的代码：

在我的控制器中：

```
 public function project(){
        $data["title"] = "CodeIgniter Projects";
        $this->load->model("projects_model");
        $data["result"] = $this->projects_model->getProjects();
        $this->load->view("project", $data);    
    }

    public function project_details($project_id){
        $this->load->model("projects_model");
        $data["result"] = $this->projects_model->getProjectDetails($project_id);
            $this->load->view("project_details", $data);

    } 
```

对于我的模型

```

    函数 getProjects(){
            $query = $this->db->query("SELECT * FROM projects");    

            返回$查询->结果（）；
    }

    函数 getProjectDetails($project_id){
            $this->db->where('project_id', $project_id);    
            $query = $this->db->get('projects');
    }

```

在我看来，我只`< a href="controller/project_details">< / a>`用来调用项目详细信息视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T04:01:29.837

您可以将视图中的任何内容作为 uri_segment 传递给控制器​​。一般语法是，

```
Controller/function/parameter 
```

在这里，在你的情况下

```
controller/project_details/<?php echo $project_id; ?> 
```

# javascript - mouseout FadeOut 麻烦没有应用 JavaScript/jQuery

> ID：14699938
> 
> 赞同：0
> 
> 时间：2013-02-05T03:55:24.250
> 
> 标签：javascript, html, css, css-transitions

这里可能是什么问题？将鼠标悬停在产品选项卡上？因为我希望我的鼠标悬停菜单在文本淡出过渡时也完全淡出，请帮忙，谢谢:) 这是我的观察网站

cann.net78.net

顺便说一句，这是代码

```
<head>
<style type="text/css">
body{font-family:HelveticaLTStd-Light;}
table{font-size:80%}
a{color:#f0f0f0;text-decoration:none;
-o-transition:.5s;
  -ms-transition:.5s;
  -moz-transition:.5s;
  -webkit-transition:.5s;
  transition:.5s;
}
a:hover{color:#006600;}
font-family:HelveticaLTStd-Light;
td.menu{background:#DEB887}
table.menu
{
font-size:100%;
color:#f0f0f0;
position:absolute;
visibility:hidden;
background:#558800;
opacity:0.9;
}
body {
background:url(wall.jpg) no-repeat fixed center;
}
table
{
border-collapse:collapse;
}
table, td, th
{
position:relative;
}
</style>
<script type="text/javascript">
function showmenu(elmnt)
{
document.getElementById(elmnt).style.visibility="visible";
}
function hidemenu(elmnt)
{
document.getElementById(elmnt).style.visibility="hidden";
}
</script>
</head>

<body>
<div id="header">
<br>
<br><table border="0" align="center">
<tr>
    <th align="left" width="430"><font color="cccccc" face="HelveticaLTStd-Light" size="15">C-Ann Trading</font><br>
    <font color="#f0f0f0" size="5">and Computer Services    </font> </th>
    <th width="120" style="border-right:1px solid #000000;border-color:#cccccc"><br><font size="3"><a href="index.html">Home</a></font></th>
    <th width="120" style="border-right:1px solid #000000;border-color:#cccccc"><br><font size="3"><a href="about.htm">About Us</a></font></th>
    <th width="120" onmouseover="showmenu('products')" onmouseout="hidemenu('products')" style="border-right:1px solid #000000;border-color:#cccccc"><br><font size="3" color="#f0f0f0">Products</font>
        <table border="1" class="menu" id="products" width="150">
        <tr><th align="left" class="menu"><a href="notebook.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNotebooks</a></tr></th>
        <tr><th align="left" class="menu"><a href="monitor.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMonitors</a></tr></th>
        <tr><th align="left" class="menu"><a href="component.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspComponents</a></tr></th>
        <tr><th align="left" class="menu"><a href="software.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspSoftwares</a></tr></th>
        <tr><th align="left" class="menu"><a href="peripheral.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPeripherals</a></tr></th>
        <tr><th align="left" class="menu"><a href="network.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNetworking</a></tr></th>
        <tr><th align="left" class="menu"><a href="storage.htm">&nbsp&nbsp&nbsp&nbsp&nbsp&nbspStorage Devices</a></tr></th> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:02:02.090

老实说，停止使用`<table>`for 做这样的下拉菜单。使用嵌套`<ul><li>`标记，试一试纯 CSS 解决方案。

[http://line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu](http://line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu)

如果可以的话，并且从我看到的您网站的源代码来看，也许您应该从头开始，记住 html 是一种语义标记语言，可以帮助（人和）机器人识别您的内容。

试着思考你的内容，就好像你在写一本书，有标题、摘要、一些段落等......

好好利用它来做一个简单的开始：[http ://www.w3schools.com/html/html_basic.asp](http://www.w3schools.com/html/html_basic.asp)

乍一看，您可能会发现它更难，但您会提高自己的技能，并且您会赢得一些您可能会觉得有用的 seo 排名。

# css - Twitter 引导网格 - 模拟行跨度

> ID：14699940
> 
> 赞同：0
> 
> 时间：2013-02-05T03:55:29.440
> 
> 标签：css, twitter-bootstrap

我有一个使用 twitter bootstrap 的网格，我们正在从表中转换它。通常我们会考虑这个表格数据并只使用一个表格，但我们必须（客户要求）能够可靠地打印表格，并且考虑到打印日志表的伤害，我正在迁移到引导网格。

我需要能够模拟的是我们当前在表中使用的行跨度。

请注意，由于尺寸限制，我正在使用带有 10 列网格的自定义引导程序

JS Fiddle 示例[http://jsfiddle.net/dstarh/hKjEM/](http://jsfiddle.net/dstarh/hKjEM/)

```
<div class="container">
    <div class="row">
        <div class="span1">Date</div>
        <div class="span2" style="text-align:center;">Total Time</div>
        <div class="span1" style="text-align:right;">Time of activity</div>
        <div class="span1" style="text-align:left;">Time of Day</div>
        <div class="span1" style="text-align:right;">Distance</div>
        <div class="span4" style="text-align:left;">Description</div>
    </div>
    <div class="row">
        <div class="span3">
            <div class="row">
                <div class="span1" style="height:100%;">01/31/2013</div>
                <div class="span2" style="height:100%;">8 hours/12 miles
                    <hr> <span class="target-calories">
                      TARGET 15 miles
                    </span>

                </div>
            </div>
        </div>
        <div class="span7">
            <div class="row">
                <div class="span1" style="text-align:right;">1 hour</div>
                <div class="span1" style="text-align:left;">morning</div>
                <div class="span1" style="text-align:right;">3 miles</div>
                <div class="span4" style="text-align:left;">ran 3 miles</div>
            </div>
            <div class="row">
                <div class="span1" style="text-align:right;">1 hour</div>
                <div class="span1" style="text-align:left;">noon</div>
                <div class="span1" style="text-align:right;">2 miles</div>
                <div class="span4" style="text-align:left;">walked 2 miles</div>
            </div>
            <div class="row">
                <div class="span1 offset2" style="text-align:right;">2 miles</div>
                <div class="span4" style="text-align:left;">biked 2 miles</div>
            </div>
            <div class="row">
                <div class="span1 offset2" style="text-align:right;">4 miles</div>
                <div class="span4" style="text-align:left;">ran 4 miles</div>
            </div>
            <div class="row">
                <div class="span1" style="text-align:right;">4 miles</div>
                <div class="span1" style="text-align:left;">night</div>
                <div class="span1" style="text-align:right;">4 miles</div>
                <div class="span4" style="text-align:left;">ran 4 miles</div>
            </div>
        </div>
    </div>
    </div> 
```

我需要将前两列（在 span3 内）垂直居中，紧挨着其余的列/行）。右侧的行数（在跨度 7 中）是随机的，从 1 到高端可能为 10-15 之间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:17:42.497

这应该让你接近。您确实必须将框架拉伸到足够宽以允许响应式执行其操作。请注意，垂直对齐本身就是一个挑战，可能需要嵌套表格或 JavaScript 解决方案（见下文）。

[http://jsfiddle.net/WfDUY/4/](http://jsfiddle.net/WfDUY/4/)

```
.row {
    position: relative;
}
.gray {
    background-color: #eee;
    height: 100%;
    vertical-align: middle;
    height: 100%;
    position: absolute;
}
.grayer {
    background-color: #ddd;
}

<div class="row">
    <div class="span10">
        <div class="row">
            <div class="span3">I want to be Vertically Aligned in the middle</div>
            <div class="span7 offset3">
... 
```

这是嵌套表解决方案的示例：http: [//jsfiddle.net/WfDUY/6/](http://jsfiddle.net/WfDUY/6/)

# php - PHP Curl在下载前检查文件是否存在

> ID：14699941
> 
> 赞同：4
> 
> 时间：2013-02-05T03:55:32.873
> 
> 标签：php, curl

我正在编写一个 PHP 程序，它从后端下载 pdf 并保存到本地驱动器。现在如何在下载之前检查文件是否存在？

目前我正在使用 curl（见下面的代码）来检查和下载，但它仍然下载大小为 1KB 的文件。

```
$url = "http://wedsite/test.pdf";
$path = "C:\\test.pdf;"
downloadAndSave($url,$path);

function downloadAndSave($urlS,$pathS)
    {
        $fp = fopen($pathS, 'w');

        $ch = curl_init($urlS);

        curl_setopt($ch, CURLOPT_FILE, $fp);
        $data = curl_exec($ch);

        $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        echo $httpCode;
        //If 404 is returned, then file is not found.
        if(strcmp($httpCode,"404") == 1)
        {
            echo $httpCode;
            echo $urlS; 
        }

        fclose($fp);

    } 
```

我想在下载之前检查文件是否存在。知道怎么做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T03:58:33.340

您可以使用单独的 curl`HEAD`请求来执行此操作：

```
curl_setopt($ch, CURLOPT_NOBODY, true);
$data = curl_exec($ch);

$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); 
```

当你真正想要下载时，你可以使用 set `NOBODY`to `false`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T04:01:16.967

由于您使用 HTTP 在 Internet 上获取资源，因此您真正要检查的是返回码是 404。

在某些 PHP 安装中，您可以直接使用`file_exists($url)`。然而，这并不适用于所有环境。[http://www.php.net/manual/en/wrappers.http.php](http://www.php.net/manual/en/wrappers.http.php)

这是一个非常类似于`file_exists`URL 的函数，但使用 curl：

```
<?php function curl_exists()
  $file_headers = @get_headers($url);
  if($file_headers[0] == 'HTTP/1.1 404 Not Found') {
    $exists = false;
  }
  else {
    $exists = true;
  }
} ?> 
```

来源：[http ://www.php.net/manual/en/function.file-exists.php#75064](http://www.php.net/manual/en/function.file-exists.php#75064)

有时 CURL 扩展没有随 PHP 一起安装。在这种情况下，您仍然可以在 PHP 核心中使用套接字库：

```
<?php function url_exists($url) {
       $a_url = parse_url($url);
       if (!isset($a_url['port'])) $a_url['port'] = 80;
       $errno = 0;
       $errstr = '';
       $timeout = 30;
       if(isset($a_url['host']) && $a_url['host']!=gethostbyname($a_url['host'])){
           $fid = fsockopen($a_url['host'], $a_url['port'], $errno, $errstr, $timeout);
           if (!$fid) return false;
           $page = isset($a_url['path'])  ?$a_url['path']:'';
           $page .= isset($a_url['query'])?'?'.$a_url['query']:'';
           fputs($fid, 'HEAD '.$page.' HTTP/1.0'."\r\n".'Host: '.$a_url['host']."\r\n\r\n");
           $head = fread($fid, 4096);
           $head = substr($head,0,strpos($head, 'Connection: close'));
           fclose($fid);
           if (preg_match('#^HTTP/.*\s+[200|302]+\s#i', $head)) {
            $pos = strpos($head, 'Content-Type');
            return $pos !== false;
           }
       } else {
           return false;
       }
   } ?> 
```

来源：[http ://www.php.net/manual/en/function.file-exists.php#73175](http://www.php.net/manual/en/function.file-exists.php#73175)

更快的功能可以在这里找到： [http ://www.php.net/manual/en/function.file-exists.php#76246](http://www.php.net/manual/en/function.file-exists.php#76246)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-28T00:27:04.787

在您的下载功能之前调用它并完成：

```
<?php function remoteFileExists($url) {
    $curl = curl_init($url);

    //don't fetch the actual page, you only want to check the connection is ok
    curl_setopt($curl, CURLOPT_NOBODY, true);

    //do request
    $result = curl_exec($curl);

    $ret = false;

    //if request did not fail
    if ($result !== false) {
        //if request was ok, check response code
        $statusCode = curl_getinfo($curl, CURLINFO_HTTP_CODE);  

        if ($statusCode == 200) {
            $ret = true;   
        }
    }

    curl_close($curl);

    return $ret;
} 
```

?>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-13T10:56:53.027

在上面的第一个示例中，$file_headers[0] 可能包含“HTTP/1.1 404 Not Found”以外的内容，例如：

```
HTTP/1.1 404 Document+%2Fdb%2Fscotbiz%2Freports%2FR20131212%2Exml+not+found 
```

所以使用其他测试很重要，例如，正则表达式，因为'==' 不可靠。

# javascript - 使用 HTML5 本地存储交换信息

> ID：14699946
> 
> 赞同：0
> 
> 时间：2013-02-05T03:55:48.677
> 
> 标签：javascript, browser, websocket, local-storage

我有一个用 c++ 编写的程序，可以从[这个板上](http://am.renesas.com/products/tools/introductory_evaluation_tools/renesas_demo_kits/yrdkrx63n/index.jsp)读取值。无论如何，那部分并不重要。我所拥有的是不断变化的数据，我想将这些数据绘制成图表。我希望使用 Web 浏览器来显示数据，因为那里有很多用 JavaScript 编写的开源图形和图表。**所以我的问题是从我的 C++ 程序向浏览器发送数据**

我已经调查过了，UDP 在浏览器中还不可用，所以我必须使用 TCP。TCP websockets不是那么快，我正在考虑使用html5 localstorage。我的意思是让我的 c++ 程序写入 localStorage 上的数据库，然后 javascript 将等待该变量的值存在并发明某种协议来使其工作。本地存储非常快，例如：

```
<script type="text/javascript">

    var counter = 0;

    window.onload = function () {

        function Test() {

            counter++;

            localStorage.p = counter + ""; // perform write 

            var read = localStorage.p; // perform read

            if (read == "5000")
                alert((new Date() - now)); // shows 45
            else
                Test(); // loop again
        }

        var now = new Date(); 
        Test();
    }

</script> 
```

**该脚本需要 54 毫秒，它读取和写入 5000 次！** 这意味着下次我不会为浏览器创建插件，而是实现某种协议，使我能够使用 localStorage 交换信息。例如，我可以让浏览器等待变量 x 存在。一旦它存在，我就会通过浏览器创建一个变量 y，通知 c++ 程序它已准备好接收数据等等。**localStorage 只是一个位于 C:\Users[USER]\AppData\Local\Google\Chrome\User Data\Default\Local Storage 上的 sqlite 数据库**

我还没有在网上看到任何人使用这种方法。也许它太危险了，Sqlite 不能处理好多个线程，我会浪费时间创建这个程序。

那么我应该开始实施这个协议吗？我应该使用网络套接字吗？或者我应该尝试一下[https://stackoverflow.com/a/10219977/637142](https://stackoverflow.com/a/10219977/637142)吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:45:56.607

I would go with [node.js](http://nodejs.org/) as middleware from your C++ to the browser, instead of using directly websocket (been there done that) go with [http://socket.io/](http://socket.io/) that will make your life much easier :)

# java - 如何在 jruby 中导入所有包？

> ID：14699949
> 
> 赞同：7
> 
> 时间：2013-02-05T03:56:03.420
> 
> 标签：java, ruby, jruby

在java中你可以做这样的事情，包括java命名空间下的所有包。

```
import java.*; 
```

在[https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby](https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby) 他们建议使用`include_package`or `import`。我也试过`java_package`和`java_import`。有没有办法像这样导入，或者你只需​​要你需要的包。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T15:53:43.077

```
require 'java'

module JavaUtil
  include_package "java.util"
end

JavaUtil::Date.new 
```

# c# - 如何提高 WPF 中后台任务的性能？

> ID：14699950
> 
> 赞同：5
> 
> 时间：2013-02-05T03:56:07.570
> 
> 标签：c#, wpf, com, task-parallel-library

我正在构建一个 WPF 应用程序，它将在后台完成一些繁重的工作。问题是当我在单元测试中运行任务时，通常需要大约 6~7 秒才能运行。但是当我在 WPF 应用程序中使用 TPL 运行它时，它需要 12 秒到 30 秒才能运行。有没有办法加快这件事。我正在调用 LogParser 的 COM api 来完成真正的工作。

**更新**：我调用 Log Parser API 的代码如下所示

```
var thread = new Thread(() =>
            {
                var logQuery = new LogQueryClassClass();
                var inputFormat = new COMEventLogInputContextClassClass
                {
                    direction = "FW",
                    fullText = true,
                    resolveSIDs = false,
                    formatMessage = true,
                    formatMsg = true,
                    msgErrorMode = "MSG",
                    fullEventCode = false,
                    stringsSep = "|",
                    iCheckpoint = string.Empty,
                    binaryFormat = "HEX"
                };
                try
                {
                    Debug.AutoFlush = true;
                    var watch = Stopwatch.StartNew();
                    var recordset = logQuery.Execute(query, inputFormat);
                    watch.Stop();

                    watch = Stopwatch.StartNew();
                    while (!recordset.atEnd())
                    {
                        var record = recordset.getRecord();
                        recordProcessor(record);
                        recordset.moveNext();
                    }
                    recordset.close();
                    watch.Stop();
                }
                catch
                {
                }
                finally
                {
                    if (logQuery != null)
                    {
                        Marshal.ReleaseComObject(logQuery);
                        GC.SuppressFinalize(logQuery);
                        logQuery = null;
                    }
                }
            });
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start();
        thread.Join(); 
```

现在的事情是有了这个变化，我可以看到调试模式大约有 3 - 4 秒的改进，但是当我**按 Ctrl + F5**运行它时却没有，这超出了我的想象。怎么来的？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T08:58:17.870

这里的问题是您使用的 COM 对象只能在 STA 线程上运行。已经有几个人提出了这个建议，但我决定检查一下，只是为了确定。`MSUtil.LogQuery`我安装了 LogParser SDK，下面是它在注册表中为与ProgID关联的 CLSID 放置的内容：

```
[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{8CFEBA94-3FC2-45CA-B9A5-9EDACF704F66}]
@="LogQuery"
"AppID"="{3040E2D1-C692-4081-91BB-75F08FEE0EF6}"

[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{8CFEBA94-3FC2-45CA-B9A5-9EDACF704F66}\InprocServer32]
@="C:\\Program Files (x86)\\Log Parser 2.2\\LogParser.dll"
"ThreadingModel"="Apartment"

[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{8CFEBA94-3FC2-45CA-B9A5-9EDACF704F66}\ProgID]
@="MSUtil.LogQuery.1"

[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{8CFEBA94-3FC2-45CA-B9A5-9EDACF704F66}\VersionIndependentProgID]
@="MSUtil.LogQuery" 
```

这就是`"ThreadingModel"="Apartment"`关键。这个 COM 类声明它只能在 STA 线程上运行。

TPL 和`BackgroundWorker`使用 MTA 线程。这样做的结果是，当您从 TPL 任务或`BackgroundWorker`COM 运行时使用 LogParser 时，会检测到您在错误类型的线程上，并且会找到或创建一个 STA 来托管该对象。（在这种特殊情况下，它将使用所谓的“主机 STA”，这是 COM 专门为此目的创建的一个线程。在某些情况下，它会使用您的主 UI 线程，但这里不是这种情况。 )

然后，COM 会自动将来自您的工作线程的任何调用编组到该 STA 线程。它通过 Windows 消息队列执行此操作，因此对于您执行的每个方法（请记住，属性访问器只是变相的方法，因此这也适用于属性使用），您的工作线程将向该 STA 线程发送一条消息，该 STA然后，线程的消息泵必须选择该消息并发送它，此时 COM 运行时将为您调用 LogParser 上的方法。

如果您有一个涉及大量调用的 API，这会很慢。

顺便说一句，这既不是 WPF 也不是 Windows 窗体问题。这完全与使用来自非 STA 线程的基于 STA 的 COM 对象有关。如果您在其中使用非 STA 线程，您也可以使用控制台应用程序重现完全相同的问题。而且这个问题并不特定于 TPL 或`BackgroundWorker`- 它会影响任何使用线程池的东西，因为线程池线程都使用 MTA，而不是 STA。

解决方案是使用 STA 线程。最好的方法是创建一个专用线程。使用命名空间中的`Thread`类`System.Threading`来启动您自己的线程。`SetApartmentState`在启动它之前调用它的方法。确保从 LogParser API 创建对象实例的代码在该线程上运行，并确保您只使用该线程中的那些对象。这应该可以解决您的性能问题。

**2013 年 2 月 21 日编辑澄清：**

请注意，仅仅确保您使用来自 STA 线程的 COM 对象是不够的。您必须从*创建它的同一 STA 线程中*使用 if 。基本上，拥有 STA 模型的全部原因是使 COM 组件能够使用单线程模型。它使他们能够假设发生在他们身上的所有事情都发生在一个线程上。如果您编写使用来自多个线程的 STA 线程的多线程 .NET 代码，它将在幕后确保 COM 对象得到它想要的，这意味着所有访问都将通过它所属的线程。

这意味着，如果您从某个其他线程调用它而不是其主 STA 线程，那么即使该其他线程也恰好是 STA 线程，您仍将支付跨线程的价格。

**2013 年 2 月 25 日编辑添加：**

（不确定这是否与这个特定问题相关，但其他通过搜索登陆该问题的人很可能会感兴趣。）将工作转移到单独的工作线程的一个缺点是，如果您想在由于处理这些记录的任何方式，您现在都在错误的线程上。如果您使用数据绑定`INotifyPropertyChanged`，WPF 将自动为您处理跨线程更改通知，但这可能会对性能产生重大影响。如果您需要在后台线程上做大量工作，但该工作最终需要更新 UI，您可能需要采取措施批量更新这些更新。这并非完全无关紧要 - 请参阅从此处开始的系列博客文章：http: [//www.interact-sw.co.uk/iangblog/2013/02/14/wpf-async-too-fast](http://www.interact-sw.co.uk/iangblog/2013/02/14/wpf-async-too-fast)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T04:06:24.760

COM 为 IPC 使用消息队列。我不清楚是什么决定了*哪个*消息队列，但我怀疑它是 shell 消息队列，因为 Delphi 调试器和 Outlook 曾经相互玩得很开心。我未经证实的假设是，进程外的 COM 服务器可能会被其他停止 shell 消息队列的东西*停止*。Windows 有超时来防止这种事情完全锁定系统，但它可能会导致受影响的进程大幅减速。我的解决方案是避免使用 COM。您可以通过注释掉实际使用 COM 的部分并计时该过程来检查这一点。

# ruby-on-rails - 使用 Backburner for Beanstalkd 时识别和区分工作程序

> ID：14699955
> 
> 赞同：0
> 
> 时间：2013-02-05T03:56:41.630
> 
> 标签：ruby-on-rails, ruby, sinatra, padrino, beanstalkd

我正在尝试在我的应用程序中使用[Backburner](https://github.com/nesquena/backburner)（[Beanstalkd](http://kr.github.com/beanstalkd/)的 Ruby 客户端）来创建，比如说，50 个工作人员都在看同一个管道来处理即将到来的工作。问题是，这 50 名工作人员中的每一个在执行工作时都会进行一些繁重的文件操作等，并且他们每个人都需要对**唯一命名的编号目录执行一些操作。例如，worker 7 需要使用名为 dir7 的目录。**

最初我认为我可以创建一个`ThreadsOnFork`具有 50 个线程的工作线程，并且我可以从工作线程的 perform() 方法访问与每个线程关联的数字，但我还不能做到这一点。

如何使用 Backburner 处理这种情况？或者，如果 Backburner 无法使用其他 Ruby beanstalkd 客户端？我希望我的问题足够清楚。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:31:53.930

我以粗略的方式解决了这个问题：编写了一个 shell 脚本，通过环境变量将其指定的编号传递给它来启动一个工作者。下面是一个片段，如果有人正在寻找类似的解决方案：

```
#!/bin/bash
for i in $(seq 1 "$1"); do
    env WORKER_NUM=$i rake QUEUES=queue1 backburner:work > logs/backburner.log 2>&1 &
done 
```

[如Backburner 文档中所述](http://nesquena.github.com/backburner/)，通过添加`require 'backburner/tasks'`到 Rakefile可以使用 rake 任务。

# networking - 如何使用 NAT 在两个路由器之间设置 DD-WRT

> ID：14699958
> 
> 赞同：0
> 
> 时间：2013-02-05T03:57:26.113
> 
> 标签：networking, wireless, dd-wrt

我有两个网络。网络 A 具有有线和无线客户端，并连接到 Internet。DHCP 已启用（10.0.0.1 子网为 255.255.255.0） 网络 B 具有有线和无线客户端，并且未连接到 Internet。DHCP ENABLED (192.168.1.1 with subnet 255.255.255.0) 这意味着该网络的 WAN 端口未连接。

我需要将网络 2 的 WAN 端口无线连接到网络 A，这样网络 B 在网络 A 中只显示为客户端。由于两个网络都有无线客户端，因此假设 WPA 用于安全性。

谁能告诉我如何使用 DD-WRT 进行设置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:23:33.483

您应该将您的网络 B 设备连接到网络 A 设备并添加一个静态路由以将路由器 B 上的客户端路由到互联网，并配置路由器 B DHCP 以获取用户的新网关，即路由器 A 的 IP 地址。

# ios - 使用徽标时找不到实例方法 %new

> ID：14699966
> 
> 赞同：0
> 
> 时间：2013-02-05T03:58:30.330
> 
> 标签：ios, logos, cydia-substrate

我正在使用徽标来发布推文。我使用 %new`- (void)checkTQT`向 SBAwayController 添加了一个新方法，但是当我使用 调用该方法时`[self checkTQT]`，它显示“未找到实例方法 '-checkTQT'（返回类型默认为 'id'）”

这是我的代码：

```
%hook SBAwayController
- (void)lock
{
    %orig;
    [self checkTQT];
}

%new(v@:)
- (void)checkTQT
{
    ...
}
%end 
```

我用错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:09:25.353

声明你的`checkTQT`或把它放在你的前面`lock`

像这样声明它：

```
- (void)checkTQT; 
```

或者调整顺序：

```
%hook SBAwayController
%new(v@:)
- (void)checkTQT
{
    ...
}

- (void)lock
{
    %orig;
    [self checkTQT];
}

%end 
```

# json - 使用 knockoutjs 映射绑定视图模型

> ID：14699972
> 
> 赞同：0
> 
> 时间：2013-02-05T03:58:57.033
> 
> 标签：json, knockout.js, knockout-mapping-plugin

我刚刚决定学习knockoutjs，并且在将一些json绑定到我的视图模型时遇到了一些问题。我已经搜索了很多东西，尝试了很多东西，但我一定错过了一些东西。

**Javascript**：

```
 var data = {
        "TestList": [{ "ID": "1", "Name": "Dave" }, { "ID": "2", "Name": "Mustaine" }],
        "TestText": "Hello World"
    };

    var viewModel = {};
    ko.mapping.fromJSON(data, viewModel);

    ko.applyBindings(viewModel); 
```

**HTML**

```
TestText: <span data-bind="text: TestText"></span><br>
TestList: <select id="TestList" 
            data-bind="
            options: TestList, 
            optionsText: 'Name', 
            optionsValue: 'ID', 
            optionsCaption: 'Please Select'"></select> 
```

***编辑***

变量“数据”用作我从服务器返回的 json 示例。无论如何，我已经用 getJSON 更新了上面的代码并得到了一个错误，上面的例子真的不能给我，因为它不使用 getJSON。

**更新了 JAVASCRIPT**：

```
var viewModel;
$.getJSON('/myurl',
    function (data) {
        viewModel = data;
    });

alert(viewModel);

$(function() {
    ko.applyBindings(viewModel);
}); 
```

我在这里遇到的问题是它可以工作..只要警报框在那里。如果我评论那条线，它不起作用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:02:37.353

您的第一个问题是您将数据声明为一个数组，其中只有一个成员，但您没有在数据绑定声明中引用此数组。

其次，如果您将数据作为 JavaScript 对象，则不需要 fromJSON。

更新的 JS 代码：

```
var data = {
    "TestList": [{ "ID": "1", "Name": "Dave" }, { "ID": "2", "Name": "Mustaine" }],
    "TestText": "Hello World"
};

var viewModel = data;//{};

ko.applyBindings(viewModel); 
```

工作小提琴：http: [//jsfiddle.net/AfgAG/19/](http://jsfiddle.net/AfgAG/19/)

**编辑：**更新答案以反映问题中的更新以及初始答案。\

您的视图模型需要将选项列表作为可观察数组，以使选项绑定起作用。

此外，当您使用 AJAX 调用进行更新时，最好在定义结构和定义数据绑定的可观察对象的情况下开始您的视图模型。

有关更新的 javascript 代码，请参见下文。无法创建小提琴，因为我无法访问小提琴端。

```
var viewModel = 
    {
        TestText: ko.observable('My Initial Text'),
        TestList: ko.observableArray([])
    }

ko.applyBindings(viewModel);

// using set time out here to simulate your ajax call.
setTimeout(function () {
    // this would normally be the content for your getJson success method. 
    // this is where you use your from JSON. 
    // data is a javascript object from ajax response. 
    var data = {
        "TestList": [{ "ID": "1", "Name": "Dave" }, { "ID": "2", "Name": "Mustaine" }],
        "TestText": "Hello World"
    };
    // update the view model observable properties.
    viewModel.TestText(data.TestText);
    viewModel.TestList(data.TestList);
}, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T22:44:57.350

我已经想通了。仅供参考，这就是我所做的：

**javascript**

```
 var viewModel = (function () {
        var self = this;
        this.model = ko.observableArray([]);

        $.getJSON('/myurl',
            function (data) {
                self.model = ko.mapping.fromJS(data, self.model);
                ko.applyBindings(self.model);
            });
    });

    ko.applyBindings(new viewModel()); 
```

**html**

```
<span data-bind="text: TestText"></span>
<select id="TestList" 
            data-bind="
            options: TestList, 
            optionsText: 'Name', 
            optionsValue: 'ID', 
            optionsCaption: 'Please Select'"></select> 
```

# php - 如何包含另一个 php 文件？

> ID：14699973
> 
> 赞同：5
> 
> 时间：2013-02-05T03:59:25.893
> 
> 标签：php

我有一个 php 文件，我想包含另一个具有 css 链接标签和 javascript 源标签的 php 文件，但是当我尝试包含它们时，它不会被添加到页面中。

我的 php 页面：

```
<?php 
    $root = $_SERVER['SERVER_NAME'] . '/mysite'; 
    $theme = $root . '/includes/php/common.php';
    echo $theme;
    include($theme);
?> 
```

常见的.php：

```
<link rel='stylesheet' type='text/css' href='../css/main.css'/>"; 
```

有谁知道怎么了？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T04:02:11.900

PHP[`include`](http://php.net/manual/en/function.include.php)是服务器端的，因此您需要使用服务器端路径。最好用`dirname(__FILE__)`代替`$_SERVER['SSCRIPT_NAME']`，但`$_SERVER['SERVER_NAME']`绝对是错误的。

尝试：

```
include dirname(__FILE__)."/common.php"; 
```

或者，如果您要包含的文件不在同一目录中，请更改路径。例如对于父目录，使用`dirname(__FILE__)."/../common.php"`.

* * *

请注意，有些人可能会建议使用`include "./common.php"`或类似的。这*可能*有效，但当脚本调用实际上被另一个目录中的另一个脚本包含时，很可能会**失败。**`include`使用`dirname(__FILE__)."/common.php"`将消除这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T04:06:46.690

将您的代码更改为：

```
<?php  
    $theme = 'includes/php/common.php';
    echo $theme;
    include($theme);
?> 
```

如果您的包含文件夹与您的 php 页面位于同一文件夹中，那么它应该可以工作，如果不添加您的域名。在这种情况下不需要 SERVER_NAME。

# entity-framework - 实体框架 5.0 关系

> ID：14699976
> 
> 赞同：0
> 
> 时间：2013-02-05T03:59:50.347
> 
> 标签：entity-framework

我有以下`Customer`课程：

```
public class Customer : EntityBase<Customer>
{
    public virtual int ID { get; set; }
    public virtual CustomerType CustomerType { get; set; }

    public virtual string CompanyName { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }

    public virtual ICollection<Address> BillingAddresses { get; set; }
    public virtual ICollection<Address> ShippingAddresses { get; set; }
} 
```

该类`Address`如下所示：

```
public class Address : EntityBase<Address>
{
    public virtual int ID { get; set; }
    public virtual AddressType AddressType { get; set; }
    public virtual bool IsDefault { get; set; }
    public virtual string Name { get; set; }
    public virtual string Line1 { get; set; }
    public virtual string Line2 { get; set; }
    public virtual string Line3 { get; set; }
    public virtual string City { get; set; }
    public virtual string State { get; set; }
    public virtual string ZipCode { get; set; }
    public virtual string Country { get; set; }

    public virtual int CustomerID { get; set; }
    public virtual Customer Customer { get; set; }
} 
```

我希望能够在客户类中拥有多个每种类型的地址，但我很难弄清楚这一点。

我想以这样的方式结束，以获取每种类型的默认地址。

```
public Address DefaultBillingAddress
{
    get
    {
        return BillingAddresses.First(x => x.IsDefault == true);
    }
} 
```

我遇到的问题是如何区分`AddressType`每个枚举之间的区别`ICollection`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:07:21.507

您正在以两种不同的方式捕获“地址类型”的概念。

你有你的`AddressType`枚举`Address`，你也有单独的

```
public virtual ICollection<Address> BillingAddresses { get; set; }
public virtual ICollection<Address> ShippingAddresses { get; set; } 
```

这个模型当然有可能在 BillingAddresses 中使用 AddressType.Shipping 结束，反之亦然。

我建议将您的对象模型简化为

```
public virtual ICollection<Address> Addresses { get; set; } 
```

`Customer`并分别从 Addresses 返回 Billing 和 Shipping 地址提供辅助方法。

说了这么多，不知道你说的是什么意思

> 我遇到的问题是如何区分每个 ICollection 上的 AddressType 枚举？

每个都`ICollection`应该引用相同的`AddressType`枚举。

使用我建议的方法，您可以编写

```
public Address DefaultBillingAddress
{
    get
    {
        return Addresses
         .First(x => x.IsDefault == true && x.AddressType == AddressType.Billing);
    }
} 
```

# ios - 应用更新时 iPhone UUID 发生变化？

> ID：14699981
> 
> 赞同：4
> 
> 时间：2013-02-05T04:00:06.247
> 
> 标签：ios, iphone, uuid, uniqueidentifier

我使用 iphone UUID 来检查用户的设备是否唯一。

我已经知道重新安装应用程序时会更改 UUID。

但是，我有一个问题。那么，当应用程序更新时，我的应用程序的 UUID 会改变吗？

如果在应用更新时 UUID 发生了变化，我可以在哪里将 UUID 永久保存在 iphone 中（或相同效果）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:04:15.723

将您创建的 UUID 保存到应用程序的用户首选项中，应该对其进行备份 - 如果他们从备份中恢复应用程序，您将取回 UUID。

如果您想更加确定是否可以取回相同的 UUID，请将生成的 UUID 保存到钥匙串中 - 即使在您删除应用程序后，钥匙串也会保持不变（不确定是否可以永久保证，但效果就是这样）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-05T04:09:32.433

UDID 不会更改，但已弃用。设备 ID 可能会更改。如果wifi打开，可以使用MAC地址，这几乎是给定的。

# python - 导入 glob，无效的语法 python

> ID：14699983
> 
> 赞同：2
> 
> 时间：2013-02-05T04:00:19.923
> 
> 标签：python, syntax, python-3.x, glob

好吧，说到 Python，我是个菜鸟，我必须学习这个才能工作。到目前为止，我正在研究一些列出目录的小程序。

我正在使用 Python 3.2.1 .. 在 Python Shell 中，我创建了一个新窗口并输入：

```
import glob
print glob.glob("/*.txt") 
```

但是当我“运行模块”时，我保存它，它总是告诉我无效的语法，它突出显示代码中的第二个 glob .. 为什么？关于如何解决这个问题的任何想法？我真的不明白为什么我有一个错误..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T04:04:57.097

[`print`是 Python 3 中的一个函数](http://docs.python.org/3.0/whatsnew/3.0.html#print-is-a-function)。您不能像在 2.x 版本中那样使用它作为语句。如果编写为，您的代码应该可以工作：

```
import glob
print(glob.glob("/*.txt")) #Note the parens for print() 
```

# jquery - 使用 JQuery 在某些 div 之后插入 div

> ID：14699985
> 
> 赞同：-1
> 
> 时间：2013-02-05T04:00:38.383
> 
> 标签：jquery, wordpress, loops

我有通过 WordPress 循环显示的 div.. 大约 60 个链接到帖子的缩略图（很多缩略图，我知道）.. 显然，它们都在 div 中。:) 我想在我选择的任何帖子 div 之后插入这些 div... 在 jQuery 中。`insertAfter`据我所知，你可以用......做类似的事情

`$('.test').insertAfter('.inner');`

但是我想在通过我的 WordPress 循环显示的特定数量的帖子 div 之后插入 div。所以我想在第 10、20、30、40 和 50 个后缩略图 div 之后插入一个 div。

这在 jQuery 中是否可行，如果可以，我将如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:06:51.157

选择你想要的孩子（你的~60个div）：

```
$( ".parent div" ) 
```

然后，过滤掉除每个第 n 项之外的所有子项：

```
$( ".parent div:nth-of-type(10n)" ) 
```

然后你可以`<p>`在集合中的每个元素之后插入你的：

```
$( ".parent div:nth-of-type(10n)" ).after( "<p>Test</p>" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:08:19.007

您可以使用`filter`和模运算符：

```
$('.inner').filter(function(i) { return i % 10 === 0; }).after('...'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T04:03:41.557

是的，您可以使用`$.eq`. 这是[文档](http://api.jquery.com/eq/)

```
var max_post = 1000;
var divs = $("div.inner");
for(var index = 10; index < max_post; index+=10)
{
     var obj = divs.eq(index);
     $('.test').insertAfter(obj);
} 
```

# javascript - 如何复制带有 TextFormat 信息的 HTML 选择字符串

> ID：14699986
> 
> 赞同：0
> 
> 时间：2013-02-05T04:00:46.147
> 
> 标签：javascript, html, selection

我已经看到了使用 javascript 复制 HTML 的答案。几乎所有的答案都是使用 clonecontents 如下

```
function() {
    var html = "";
    if (typeof window.getSelection != "undefined") {
        var sel = window.getSelection();
        if (sel.rangeCount) {
            var container = document.createElement("div");
            for (var i = 0, len = sel.rangeCount; i < len; ++i) {
                container.appendChild(sel.getRangeAt(i).cloneContents());
            }
            html = container.innerHTML;
        }
    } else if (typeof document.selection != "undefined") {
        if (document.selection.type == "Text") {
            html = document.selection.createRange().htmlText;
        }
    }
    return html;
}; 
```

但是在这里，如果标签在选择区域中，那么只有格式被复制，否则它将被复制为文本本身。我想复制与选择相关的格式信息。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:07:02.480

测试它可以选择父节点

```
function(){
 var html = "";
 if (typeof window.getSelection != "undefined") {
    var sel = window.getSelection();
    if (sel.rangeCount) {

        var Node=sel.focusNode.parentNode.cloneNode(true);
        //console.log(Node);
        var container = document.createElement("div");
        for (var i = 0, len = sel.rangeCount; i < len; ++i) {
            container.appendChild(sel.getRangeAt(i).cloneContents());
        }
        html = container.innerHTML;
        //
        Node.innerHTML=html;
        var co = document.createElement("div");
        co.appendChild(Node);
        html=co.innerHTML;

    }
 } else if (typeof document.selection != "undefined") {
    if (document.selection.type == "Text") {
        html = document.selection.createRange().htmlText;
    }
 }
 return html;
} 
```