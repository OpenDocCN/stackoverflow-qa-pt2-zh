# StackOverflow 问答 14771000-14771999

# iphone - UISCrollView的contentSize在键盘出现后发生变化

> ID：14771002
> 
> 赞同：3
> 
> 时间：2013-02-08T10:56:42.953
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiscrollview

基于： [https ://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html](https://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)

我已经实现了一项功能，当键盘隐藏选定的文本输入时自动滚动视图（我的和教程中的实际上是相同的）。

不幸的是，有一个不良行为：我的滚动视图的`contentSize`属性随着键盘的高度而增加。因此，当键盘仍然可见时，我可以滚动视图，但在正确的内容下方会出现一个空白区域。这是我想避免的事情。我知道这是由更改`contentInset`属性引起的，所以也许有另一种方法可以做到这一点而不会产生副作用。

`UIKeyboardDidShowNotification`首先，我为and注册观察者`UIKeyboardWillHideNotification`：

```
- (void)registerKeyboardNotifications
{
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWasShown:) name:UIKeyboardDidShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillBeHidden:) name:UIKeyboardWillHideNotification object:nil];
} 
```

这个函数在`viewWillAppear`. 方法`keyboardWasShown`和`keyboardWillBeHidden`外观如下：

```
- (void)keyboardWasShown:(NSNotification *)notification
{
    NSDictionary *info = [notification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    scrollView.contentInset = contentInsets;
    scrollView.scrollIndicatorInsets = contentInsets;

    CGRect rect = self.view.frame;
    rect.size.height -= kbSize.height;
    if(!CGRectContainsPoint(rect, activeField.frame.origin)) {
        CGPoint scrollPoint = CGPointMake(0.0, 2*activeField.frame.size.height+activeField.frame.origin.y-kbSize.height);
        [scrollView setContentOffset:scrollPoint animated:YES];
    }
 }

 - (void)keyboardWillBeHidden:(NSNotification *)notification
 {
     UIEdgeInsets contentInsets = UIEdgeInsetsZero;
     scrollView.contentInset = contentInsets;
     scrollView.scrollIndicatorInsets = contentInsets;
 } 
```

正如我之前写的，它基本上是苹果的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:57:26.597

内容插入旨在允许访问可能隐藏在键盘下方的滚动视图部分（例如）。因此，如果您的内容底部有一个文本视图，用户将无法与之交互，因为它会隐藏在键盘窗口下方。使用内容插入（根据 Apple 示例），您可以滚动更多内容，并显示文本视图。它实际上并没有增加`contentSize`属性。

请在此处阅读更多信息：http: [//developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/UIScrollView_pg/CreatingBasicScrollViews/CreatingBasicScrollViews.html](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/UIScrollView_pg/CreatingBasicScrollViews/CreatingBasicScrollViews.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T14:05:44.990

```
CGFloat contentSizeHeight = contentSize.height;
CGFloat collectionViewFrameHeight = self.collectionView.frame.size.height;
CGFloat collectionViewBottomInset = self.collectionView.contentInset.bottom;
CGFloat collectionViewTopInset = self.collectionView.contentInset.top;
CGPoint bottomOffsetForContentSize = CGPointMake(0, MAX(-collectionViewTopInset, contentSizeHeight - (collectionViewFrameHeight - collectionViewBottomInset)));
[self.collectionView setContentOffset:bottomOffsetForContentSize animated:animated]; 
```

# sql-server - 按数值列排序

> ID：14771005
> 
> 赞同：1
> 
> 时间：2013-02-08T10:56:55.283
> 
> 标签：sql-server

```
 J12M1
 J12M14
 J12M15
 J12M18
 J12M2
 J12M21
 J12M22
 J12M23
 J12M24
 J12M25
 J12M26
 J12M27
 J12M28
 J12M29
 J12M35
 J12M36
 J12M39 
```

但我的需要是

```
 J12M1
 J12M2
 J12M3 
```

我可以在查询中做什么

```
select productnumber from vt_fe_product order by productnumber 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:08:33.297

您可以在前面加上零：

```
SELECT 
   productnumber 
FROM   
   vt_fe_product 
ORDER BY 
   Right( '0000000000' + productnumber, 10 ) 
```

（来自：[https](https://stackoverflow.com/a/3326371/284240) ://stackoverflow.com/a/3326371/284240 ）

[**演示**](http://sqlfiddle.com/#!6/d822d/3/0)

结果：

```
PRODUCTNUMBER
J12M1
J12M2
J12M14
J12M15
J12M18
J12M21
J12M22
J12M23
J12M24
J12M25
J12M26
J12M27
J12M28
J12M29
J12M35
J12M36
J12M39 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:14:26.413

也许您需要尝试使用额外的 LEN 功能？

```
SELECT ProductName
FROM
(
 SELECT 
 'J12M1' AS ProductName
 UNION ALL
 SELECT 
 'J12M14' AS ProductName
 .......................
 UNION ALL
 SELECT 
 'J12M24' AS ProductName
 UNION ALL
 SELECT 
 'J12M25' AS ProductName
 UNION ALL
 SELECT 
 'J12M35' AS ProductName
 UNION ALL
 SELECT 
 'J12M36' AS ProductName
 UNION ALL
 SELECT 
 'J12M39' AS ProductName
) AS Products
ORDER BY LEN(ProductName), ProductName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:24:58.903

您可以这样订购：-

`select product_number from vtfe_product order by CONVERT(int, substring(product_number, 5, len(product_number) ) );`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T11:27:18.343

已经看到其他答案了。决定走不同的路线。有点冗长，但这个解决方案的好处是你最终会按实际数字排序，它会首先按“J”数字排序。

```
SELECT 
    -- Get the first numeric component
    CAST (
        SUBSTRING(
            productnumber, 
            CHARINDEX('J', productnumber, 1) + 1, 
            CHARINDEX('M', productnumber, 1) - CHARINDEX('J',productnumber, 1) - 1)
        AS INT 
    ) AS FirstSort,
    -- Get the second numeric component
    CAST (
        SUBSTRING(
            productnumber, CHARINDEX('M', productnumber, 1) + 1, LEN(productnumber))
        AS INT
    ) AS SecondSort,
    productnumber
FROM
    productnumbers
ORDER BY
    FirstSort,
    SecondSort 
```

演示

[http://sqlfiddle.com/#!6/fd371/2](http://sqlfiddle.com/#!6/fd371/2)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T11:10:21.113

如果您的产品编号格式定义明确（即它始终是“J12M”后跟一个数字），那么您可以删除“固定”部分并为您的排序转换数字部分。类似于以下内容：

```
ORDER BY CONVERT(int, REPLACE(productnumber, 'J12M', '')) 
```

# asp.net - VB.Net 中的 XPath 表达式 - 如何搜索包含 unicode 字符的 xml 文档

> ID：14771007
> 
> 赞同：2
> 
> 时间：2013-02-08T10:56:58.650
> 
> 标签：asp.net, xml, vb.net, xpath

我正在尝试构建一个 xpath 表达式来搜索位于`[CDATA]`下面标签中的特定文本，并返回它（注意：它们将是许多`<Car>`节点，所有节点都具有唯一的`[CDATA]`文本）：

```
<Cars>
    <Car>
        <Value><![CDATA[Login]]></Value>
        <DifValue code="01"><![CDATA[Entrada al sistema]]></DifValue>
        <DifValue code="02"><![CDATA[ĐĂNG NHẬP]]></DifValue>
    </Car>
    <Car>
        .
        .
        .
    </car>
</Cars> 
```

问题是我的表达对`[CDATA]`除 unicode “ĐĂNG NHẬP”以外的所有文本都有效（我只是在“targetText”中没有返回任何内容）

这是我到目前为止的简化片段：

```
Dim unicodeText as String = "ĐĂNG NHẬP"

unicodeText = unicodeText.ToLower()

Dim targetText as XmlNode = root.SelectSingleNode("//Cars/*/text()[translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz') =""" + unicodeText + """]", namespaceManager) 
```

有什么想法吗？

**更新**：

虽然 JLRishe 确实有一个很好的解决方案（我接受了他的解决方案作为答案），但我确实提出了使用 RegEx 的自己的方法（可能不是最好的，但我只是分享）：

```
Dim unicodeText as String = "ĐĂNG NHẬP"

unicodeText = unicodeText.ToLower();

Dim targetText as XmlNode = root.SelectSingleNode("//Car/text()[translate(., """ & unicodeText.ToUpper() & """, """ & unicodeText & """) =""" & unicodeText & """]", namespaceManager) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:22:12.603

XPath 的第一个问题是它只能找到`Car`具有您要查找的值的元素，而不是`DifValue`元素，因为`Car`s 是元素的唯一子`Cars`元素。

但即使你解决了这个问题，它仍然行不通，因为这种`translate()`方法只适用于 26 个字符 az，而不适用于带重音符号的字符（除非你列出了你需要能够处理的*每个字符的大写和小写版本）。*

在这种情况下，我建议使用 Linq-to-Xml（即`XDocument`和`XElement`类），因为它允许您在 .NET 代码中进行比较：

（注意：我假设您不会`root`使用 XML 文字进行实例化，但为了完整起见，我会将其放在示例中）

```
Dim root As XElement =
    <Cars>
        <Car>
            <Value><![CDATA[Login]]></Value>
            <DifValue code="01"><![CDATA[Entrada al sistema]]></DifValue>
            <DifValue code="02"><![CDATA[ĐĂNG NHẬP]]></DifValue>
        </Car>
        <Car>  . . .  </Car>
    </Cars>

Dim unicodeText As String = "đăng nhập"
Dim found As IEnumerable(Of XElement) =
    root.Descendants("Car").
         Elements().
         Where(Function(el) el.Value.Equals(unicodeText, 
                                         StringComparison.InvariantCultureIgnoreCase)) 
```

# ajax - Ajax 文件上传器在 IE9 中不起作用

> ID：14771009
> 
> 赞同：0
> 
> 时间：2013-02-08T10:57:06.300
> 
> 标签：ajax, asp.net-mvc-3, jquery

我在我的 MVC3 应用程序中有 ajax 文件上传器，它在 Firefox 和 chrome 中运行良好，但在 IE9 和 IE8 中无法运行。当我上传文件时，它在 IE 的服务器端给了我错误的文件名。

这是我的上传代码

```
<script type="text/javascript">
    function InitializeUploader() {
            Dname = [];
            var uploader = new qq.FileUploader({
                multiple: true,
                element: document.getElementById('file-uploader'),
                action: '@Url.Action("UploadDocument","Project")',
                debug: true,
                params: { id: $("#Id").val() },
                onSubmit: function (id, fileName) {
                },

                onComplete: function (id, fileName, responseJSON) {
                    alert(responseJSON.fileName);
                    $("#DocumentName").val(responseJSON.fileName);
                    fileSize = responseJSON.size;
                    Dname.push(responseJSON.fileName);
                    type = responseJSON.type;
                }

            });
        }  

</script>
<form method="post" enctype="multipart/form-data" action="" style="margin-left: 4px;
            margin-top: 0px;" id="documentUploadForm">
            <div id="file-uploader">
                <input type="file" id="uplodfile" />
                <input class="button" type="button" value="Upload" id="UploadDocbtn" style="float: right;
                    width: 100px;" /></div>
            </form> 
```

服务器端动作

```
 [HttpPost]
  public ActionResult UploadDocument(string qqfile, int id)
  {

     // code for saving File 
  } 
```

当我在 IE 中运行它而不是在**qqfile**参数中给出文件名时，它会给我像**System.Web.HttpPostedFileWrapper**这样的文件，并且文件也没有正确保存。我没有得到这个浏览器问题或 IE 阻止某些脚本。那么如何在 IE 中使用 ajax 文件上传加载程序保存文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:09:03.520

实际上，IE 看起来就像它应该的那样工作。而不是`UploadDocument(string qqfile, int id)`你应该有`UploadDocument(HttpPostedFileWrapper qqfile, int id)` File 应该保存为`qqfile.SaveAs("path to file")`

不清楚你现在得到什么文件名。这可能是转换[`HttpPostedFile`](http://msdn.microsoft.com/en-us/library/cc679926.aspx)为字符串的结果，并且 IE 没有返回该转换所需的一些信息以返回文件名而不是原始对象类型。尝试做这样的事情：

```
 [HttpPost]
  public ActionResult UploadDocument(System.Web.HttpPostedFileWrapper qqfile, int id)
  {
     qqfile.SaveAs("filename");
     // code for saving File 
  } 
```

它应该在所有浏览器中都能正常工作

# regex - 正则表达式中的序列

> ID：14771010
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:57:08.887
> 
> 标签：regex

如何编写满足以下要求的正则表达式：1）必须恰好是一个 7 位数字的序列 2）某处的 EDD 或 FINAL 字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:06:22.937

怎么样

```
 ^(?=\d*(EDD|FINAL)\d*$)(?=(\D*\d\D*){7}$) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T10:59:45.483

这应该可以解决问题：

```
#[0-9]{7}(EDD|FINAL)?# //EDD OR FINAL are optional 
```

或者

```
#[0-9]{7}(EDD|FINAL)+# //if EDD OR FINAL must be there 
```

# xslt - 如何获取xslt中属性值的总和

> ID：14771014
> 
> 赞同：0
> 
> 时间：2013-02-08T10:57:19.213
> 
> 标签：xslt, xslt-1.0

我试图得到总和。这是xslt代码。

```
<xsl:template match="Entry">
    <xsl:if test="position() &lt;= 10">

    <tr>
        <td>
        <xsl:value-of select="substring-before(@Value,'||')"/>
        </td>

        <td>
        <xsl:value-of select="format-number(substring(substring-after(@Value,'||||'),1,10),'#.#')"/>

        </td>
    </tr>

</xsl:if>

    </xsl:template> 
```

上面的代码会将数据填充为两个列。没关系。现在我需要`<xsl:value-of select="format-number(substring(substring-after(@Value,'||||'),1,10),'#.#')"/>` 从程序编程中得到我的总和。我读了很多文章，但我仍然无法弄清楚如何得到这个总和。有谁能够帮我？

这是xml

```
<TopHoldings Currency="xxx">
          <Entry Type="CName||C||S||Fund Weight (%)||Benchmark weight (%)" Value="Ab||U||||1.2170000000000||" Date="8/31/2011" /> 
```

这是整个 xslt

```
 <table style="width:50%;font-size:12px;" cellspacing="0" cellpadding="0">
          <tr style="width:50%; text-align:left;background-color:E6F1F9;">
            <th>       </th>
            <th>     % of funds     </th>
        </tr>
        <xsl:apply-templates   select="$items">
                <xsl:sort select="format-number(substring(substring-after(@Value,'||||'),1,10),'#.#')" order="descending"/>
                <xsl:sort select="substring-before(@Value,'||')"/> 
        </xsl:apply-templates>

        </table>

      </body>

    </html>

  </xsl:template>

    <xsl:template match="Entry">
    <xsl:if test="position() &lt;= 10">

    <tr>
        <td>
        <xsl:value-of select="substring-before(@Value,'||')"/>
        </td>

        <td>
        <xsl:value-of select="format-number(substring(substring-after(@Value,'||||'),1,10),'#.#')"/>

        </td>
    </tr>

</xsl:if>

    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:19:31.173

当您需要对 XSLT 1.0 上多个值的值求和时，您必须依赖递归 [编辑：在 XSLT 1.0 中，函数 sum 它也可用]（在 XSLT 2.0 中有一个 XPath 函数 sum()）。

以下模板通过 elements-to-sum 参数执行给定元素的总和，从您指定的属性 @Value 中提取要求和的值。

```
<?xml version="1.0" encoding="utf-8" ?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="1.0">

<xsl:output method="html" />

<xsl:template match="TopHoldings">
    <table>
        <xsl:call-template name="sum">
            <xsl:with-param name="elements-to-sum"
                            select="Entry" />
        </xsl:call-template>
    </table>
</xsl:template>

<xsl:template name="sum">
    <xsl:param name="elements-to-sum" />

    <xsl:param name="sum" select="'0'" />

    <!-- Store in variables the following operations to avoid performing them more than once -->
    <xsl:variable name="current-element" select="$elements-to-sum[1]" />
    <xsl:variable name="current-value" select="format-number(substring(substring-after($current-element/@Value,'||||'),1,10),'#.#')" />

    <!-- Output the table row -->
    <tr>
        <td><xsl:value-of select="substring-before($current-element/@Value, '||')" /></td>
        <td><xsl:value-of select="$current-value" /></td>
    </tr>

    <!-- Determine whether continue -->
    <xsl:choose>
        <!-- Case END: we have just one element to sum so we perform the sum and we output the desired result -->
        <xsl:when test="count($elements-to-sum) = 1">
            <tr>
                <td>Result:</td>
                <td><xsl:value-of select="$current-value + $sum" /></td>
            </tr>
        </xsl:when>
        <!-- Case RECURSION : we call this template again adding the current value to the sum and removing the first element from the parameter elements-to-sum -->
        <xsl:otherwise>
            <xsl:call-template name="sum">
                <xsl:with-param name="elements-to-sum"
                                select="$elements-to-sum[position() > 1]" />
                <xsl:with-param name="sum"
                                select="$sum + $current-value" />
            </xsl:call-template>
        </xsl:otherwise>
    </xsl:choose>

</xsl:template>

</xsl:stylesheet> 
```

我假设您想在同一个表中将总和的结果显示为新行，如果不是这种情况并且您想在其他地方显示结果，则解决方案会略有不同。告诉我您是否可以接受此解决方案，或者您需要在元素外显示总和。

注意：我不会在属性@Value 中执行那些“复杂”的字符串操作，而是考虑将该属性中的所有信息拆分为不同的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:49:35.503

只需使用 XPath 函数 sum()，它在用于 XSLT 2.0 的 XPath 2.0 和用于 XSLT 1.0 的 XPath 1.0 中都可用，如[http://www.w3.org/TR/xpath/#function-sum](http://www.w3.org/TR/xpath/#function-sum)中所述。如果您要获得总和的数字是元素“Entry”的属性“Value”，请使用 sum(//Entry/@Value)" 获取所有并求和。更改此设置以获得您想要的 10 个元素xml 数据。

# r - ggplot2 geom_bar 图其中 ..count.. 大于 X

> ID：14771022
> 
> 赞同：0
> 
> 时间：2013-02-08T10:57:54.923
> 
> 标签：r, ggplot2

仅当 count 大于**X**时，我如何告诉 ggplot 绘制点。我知道这应该很容易，但我想不通。就像是

```
ggplot(items,aes(x=itemname,y=..count..))+geom_bar(y>X) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:08:41.643

如果我正确理解了您的问题（您没有提供示例数据），最简单的方法是生成您想要在 ggplot 之外绘制的数据框。所以

```
##Example data
items = data.frame(itemname = sample(LETTERS[1:5], 30, replace=TRUE))
##Use table to count elements
items_sum = as.data.frame(table(items)) 
```

然后绘制

```
X = 4
ggplot(items_sum[items_sum$Freq > X,], aes(x=items,y=Freq)) + 
    geom_bar(stat="identity") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T04:40:18.097

我可能在这里弄错了，但是您不能简单地将子集代码传递给 geom_bar() 吗？

```
ggplot(items_sum, aes(x=items,y=Freq)) + geom_bar(stat="identity", subset=.(Freq>4)) 
```

# jquery - 在返回键上未触发更改事件

> ID：14771023
> 
> 赞同：6
> 
> 时间：2013-02-08T10:57:56.627
> 
> 标签：jquery

我有一个带有 jquery 更改事件的文本框。

```
$('#txtAccountNo').change(function(){
        $('label[for="txtAccountNo"]').append('<span class="support">loading...</span>')
    }); 
```

该事件在文本框失去焦点时起作用，即用户用鼠标单击它或使用 Tab 键。但是当按下返回键时，不会触发事件。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T11:01:12.577

这是`change`事件的标准行为。如果要捕获每个`Enter`新闻，则需要使用该`keypress`事件：

```
$('#txtAccountNo').on('change keypress', function(e) {
  if (e.type == 'change' || (e.type == 'keypress' && e.which == 13)) {
    $('label[for="txtAccountNo"]').append('<span class="support">loading...</span>')
  }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T10:59:41.897

正如您所强调的，`change`仅当文本输入失去焦点时才会触发该事件。您应该绑定到`keyup`：

```
$('#txtAccountNo').on('keyup', function() { 
    $('label[for="txtAccountNo"]').append('<span class="support">loading...</span>')
}); 
```

作为上述的后记，维护`change`事件可能是一个明智的主意，因为当有人将文本粘贴到文本框中时，您可能还想运行该功能。您可以使用以下方法做到这一点：

```
$('#txtAccountNo').on('keyup change', function() { ... }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-20T17:33:36.313

实际上，在现代浏览器和高于 1.7 的 jQuery（问题中似乎正在使用它）中，返回按钮将提交更改而无需失去焦点，代码应该可以工作。

```
<input/><output/>
$("input").change( function() {
    $("output").val( $("input").val() );
}) 
```

在这里查看简单的测试：http: [//jsfiddle.net/4vBSm/2/](http://jsfiddle.net/4vBSm/2/)

这不会发生在 IE 9 及更低版本中。（并且 jQuery 不会修复[http://bugs.jquery.com/ticket/11556](http://bugs.jquery.com/ticket/11556)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-19T09:15:15.077

正如 Matthew 的回答中所指出的，问题出现在 IE9 及更早版本中，但不在现代浏览器中。我建议以下解决方案，它只会将此功能添加到所有浏览器：

```
$('input[type=text]').on('keypress', function (e) {
    var $input = $(this);
    if (e.which == 13) { // Enter was hit
        $input.trigger('change');
    }
}); 
```

它监听文本输入上的按键，如果`Enter`被击中，它会触发一个更改事件。

# c++ - 从 SVN 签出的 ROS 包。无法在eclipse上构建它

> ID：14771025
> 
> 赞同：0
> 
> 时间：2013-02-08T10:58:04.790
> 
> 标签：c++, eclipse, svn, makefile, ros

我已经检查了我在另一台 PC (ubuntu) 上的存储库中拥有的 ROS 包。问题是，虽然来自cli的rosmake（或就此而言），但在eclipse中它给了我以下错误。

/usr/bin/make all rospack: error while loading shared libraries: librospack.so: cannot open shared object file: No such file or directory Makefile:1: /cmake.mk: No such file or directory make: *** No rule to制作目标`/cmake.mk'。停止。

我想它的问题是eclipse的构建环境。我该如何调试？它不应该开箱即用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:19:10.957

似乎因为我从一个图标运行 eclipse 它无法获取环境变量。我不得不将链接更改为 bash -i -c eclipse。

# android - java.lang.RuntimeException: 无法启动活动 ComponentInfo{...}:java.lang.ClassCastException: android.app.Application 无法转换为

> ID：14771027
> 
> 赞同：0
> 
> 时间：2013-02-08T10:58:06.873
> 
> 标签：android, classcastexception, runtimeexception

我正在创建一个使用 Microsoft Hawaii OCR 的 Android 应用程序；在我的应用程序测试期间，它崩溃给我这个错误：

```
02-08 11:38:38.861: E/AndroidRuntime(4704): FATAL EXCEPTION: main
02-08 11:38:38.861: E/AndroidRuntime(4704): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mobile/com.example.mobile.RecognitionActivity}: java.lang.ClassCastException: android.app.Application cannot be cast to microsoft.hawaii.sampleappbase.HawaiiBaseApplication
02-08 11:38:38.861: E/AndroidRuntime(4704):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1960)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1985)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at android.os.Looper.loop(Looper.java:137)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at android.app.ActivityThread.main(ActivityThread.java:4476)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at java.lang.reflect.Method.invokeNative(Native Method)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at java.lang.reflect.Method.invoke(Method.java:511)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:816)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:583)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at dalvik.system.NativeStart.main(Native Method)
02-08 11:38:38.861: E/AndroidRuntime(4704): Caused by: java.lang.ClassCastException: android.app.Application cannot be cast to microsoft.hawaii.sampleappbase.HawaiiBaseApplication
02-08 11:38:38.861: E/AndroidRuntime(4704):     at microsoft.hawaii.sampleappbase.HawaiiBaseAuthActivity.getBaseApplication(HawaiiBaseAuthActivity.java:204)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at microsoft.hawaii.sampleappbase.HawaiiBaseAuthActivity.getAuthenticationTypeFromApp(HawaiiBaseAuthActivity.java:117)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at microsoft.hawaii.sampleappbase.HawaiiBaseAuthActivity.onCreate(HawaiiBaseAuthActivity.java:52)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at com.example.mobile.RecognitionActivity.onCreate(RecognitionActivity.java:32)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at android.app.Activity.performCreate(Activity.java:4636)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1051)
02-08 11:38:38.861: E/AndroidRuntime(4704):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1924)
02-08 11:38:38.861: E/AndroidRuntime(4704):     ... 11 more 
```

该错误涉及一个导入的项目，特别是此代码：

```
package microsoft.hawaii.sampleappbase;

import microsoft.hawaii.hawaiiClientLibraryBase.Identities.ClientIdentity;
import microsoft.hawaii.hawaiiClientLibraryBase.Util.Utility;
import microsoft.hawaii.sampleappbase.HawaiiBaseApplication.AuthenticationType;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnCancelListener;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.widget.Toast;

/**
 * Base Activity for Hawaii authentication
 */
public class HawaiiBaseAuthActivity extends Activity {

/**
 * Error code for missing authentication type in configuration file
 */
static final int MISSING_NETWORK_CONNECTION = 0;

/**
 * Error code for missing authentication value in configuration file
 */
static final int MISSING_AUTHENTICATION_TYPE = 1;

/**
 * Error code for missing authentication value in configuration file
 */
static final int MISSING_AUTHENTICATION_VALUES = 2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ConnectivityManager connMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
    if (networkInfo == null || !networkInfo.isConnected()) {
        this.showDialog(MISSING_NETWORK_CONNECTION);
        return;
    }

    if (!this.shouldAuthenticate()) {
        return;
    }

    AuthenticationType authType = this.getAuthenticationTypeFromApp();
    if (authType == AuthenticationType.NOVALUE) {
        this.showDialog(MISSING_AUTHENTICATION_TYPE);
        return;
    }

    // create ClientIdentity object based on configured Hawaii client
    // credential
    ClientIdentity identity = null;
    try {
        switch (authType) {
        case GUID:
            String appId = this.getString(R.string.hawaii_GUID_app_ID);
            if (Utility.isStringNullOrEmpty(appId)) {
                this.showDialog(MISSING_AUTHENTICATION_VALUES);
                return;
            }

            identity = ClientIdentity.createClientIdentity(appId);
            break;
        case ADM:
            String clientId = this.getString(R.string.hawaii_ADM_client_ID);
            String clientSecret = this
                    .getString(R.string.hawaii_ADM_client_secret);
            String serviceScope = this
                    .getString(R.string.hawaii_ADM_service_scope);

            if (Utility.isStringNullOrEmpty(clientId)
                    || Utility.isStringNullOrEmpty(clientSecret)
                    || Utility.isStringNullOrEmpty(serviceScope)) {
                this.showDialog(MISSING_AUTHENTICATION_VALUES);
                return;
            }
            identity = ClientIdentity.createClientIdentity(clientId,
                    clientSecret, serviceScope);
            break;
        case NOVALUE:
            this.showErrorMessage(
                    "Couldn't configure client identity for calling Hawaii service",
                    null);
            return;
        }
    } catch (Exception exception) {
        this.showErrorMessage(
                "Couldn't configure client identity for calling Hawaii service",
                exception);
    }

    if (identity != null) {
        this.getBaseApplication().setClientIdentity(identity);
    } else {
        this.showErrorMessage(
                "Couldn't configure client identity for calling Hawaii service",
                null);
    }
}

/**
 * 
 * getAuthenticationTypeFromApp Return authentication type which assigned by
 * application
 * 
 * @return AuthenticationType
 */
protected AuthenticationType getAuthenticationTypeFromApp() {
    return this.getBaseApplication().getAuthType();
}

/**
 * Return a flag to indicate whether current Activity needs authentication
 * 
 * @return boolean
 */
protected boolean shouldAuthenticate() {
    return true;
}

/**
 * show ErrorMessage using AlertDialog
 * 
 * @param title
 *            title to display on the dialog
 * @param exception
 *            exception to display on the dialog
 */
protected void showErrorMessage(String title, Throwable exception) {
    if (exception != null) {
        exception.printStackTrace();
        System.out.println(exception.toString());
    }

    AlertDialog dialog = dialogToShow(title, exception).create();
    dialog.setCanceledOnTouchOutside(true);
    dialog.show();
}

/**
 * show ErrorMessage using AlertDialog
 * 
 * @param title
 *            title to display on the dialog
 * @param exception
 *            exception to display on the dialog
 */
protected void showErrorMessage(AlertDialog.Builder builder) {
    if (builder == null) {
        return;
    }

    AlertDialog dialog = builder.create();
    dialog.setCanceledOnTouchOutside(true);
    dialog.show();
}

/**
 * show specified message in toast
 * 
 * @param message
 *            specified message
 */
protected void showMessage(String message) {
    if (!Utility.isStringNullOrEmpty(message)) {
        Toast.makeText(this, message, Toast.LENGTH_SHORT).show();
    }
}

/**
 * create a {@link AlertDialog.Builder} to show dialog
 * 
 * @param title
 *            title to display on the dialog
 * @param exception
 *            exception to display on the dialog
 * @return AlertDialog.Builder
 */
protected AlertDialog.Builder dialogToShow(String title, Throwable exception) {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle(title);
    if (exception != null) {
        builder.setMessage(exception.getLocalizedMessage());
    }

    builder.setCancelable(true);
    return builder;
}

/**
 * gets current {@link HawaiiBaseApplication} object
 * 
 * @return HawaiiBaseApplication
 */
protected HawaiiBaseApplication getBaseApplication() {
    return (HawaiiBaseApplication) this.getApplication();
}

@Override
protected Dialog onCreateDialog(int id) {
    AlertDialog dialog = new AlertDialog.Builder(this).create();
    dialog.setTitle(getString(R.string.configuration_error_title));
    dialog.setCanceledOnTouchOutside(true);
    dialog.setCancelable(true);

    String errorMessage = this.getErrorMessage(id);
    dialog.setMessage(errorMessage);

    final Activity activity = this;
    dialog.setOnCancelListener(new OnCancelListener() {
        public void onCancel(DialogInterface dialog) {
            activity.finish();
        }
    });

    return dialog;
}

protected String getErrorMessage(int id) {
    switch (id) {
    case MISSING_NETWORK_CONNECTION:
        return getString(R.string.error_missing_network_connection);
    case MISSING_AUTHENTICATION_TYPE:
        return getString(R.string.error_missing_authentication_type);
    case MISSING_AUTHENTICATION_VALUES:
        return getString(R.string.error_missing_authentication_value);
    default:
        return null;
    }
}
} 
```

这是 HawaiiBaseApplication 的代码

```
/**
 * Copyright (c) Microsoft Corporation. All rights reserved.
 */
package microsoft.hawaii.sampleappbase;

import microsoft.hawaii.hawaiiClientLibraryBase.Identities.ClientIdentity;
import android.app.Application;

/**
 * Base application class for Hawaii sample applications
 */
public class HawaiiBaseApplication extends Application {

/**
 * Hawaii authentication type
 */
private AuthenticationType authType;

/**
 * ClientIdentity object
 */
private ClientIdentity identity;

/**
 * Enum class to represent Hawaii authentication type
 */
public enum AuthenticationType {
    GUID, ADM, NOVALUE;

    /**
     * Convert to authentication type enum for specified String
     * 
     * @param str
     *            specified String
     * @return AuthenticationType
     */
    public static AuthenticationType convertToAuthType(String str) {
        try {
            return valueOf(str.toUpperCase());
        } catch (Exception ex) {
            return NOVALUE;
        }
    }
}

/**
 * Gets current authentication type
 * 
 * @return AuthenticationType
 */
public AuthenticationType getAuthType() {
    if (authType == null) {
        authType = AuthenticationType
                .convertToAuthType(getString(R.string.hawaii_authentication_type));
    }

    return authType;
}

/**
 * Gets current ClientIdentity object
 * 
 * @return ClientIdentity
 */
public ClientIdentity getClientIdentity() {
    return this.identity;
}

/**
 * Sets current ClientIdentity object
 * 
 * @param identity
 *            current ClientIdentity object
 */
public void setClientIdentity(ClientIdentity identity) {
    this.identity = identity;
}

} 
```

有人可以帮我吗？我被困在这一点上，我不知道它有什么问题..

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:18:22.983

你的`application`元素有你的`android:name="microsoft.hawaii.sampleappbase.HawaiiBaseApplication"`属性`AndroidManifest.xml`吗？这可能就是缺少的东西。

[http://developer.android.com/guide/topics/manifest/application-element.html](http://developer.android.com/guide/topics/manifest/application-element.html)

# .net - .net iis7 网站 cookie 一夜之间停止工作

> ID：14771028
> 
> 赞同：0
> 
> 时间：2013-02-08T10:58:11.047
> 
> 标签：.net, cookies, iis-7, umbraco

我有一个在 iis7 上运行的 .net 4、umbraco 4.7 网站。

该网站使用 cookie 来跟踪网站的推荐人。这些 cookie 会工作一段时间，然后在数小时后停止工作。cookie 不再被 .net 获取。

碰撞 web.config 或回收应用程序池重新启用 cookie 的拾取。

这是用于检查 cookie 和设置 cookie 的代码。

```
 if (HttpContext.Current.Request.Cookies["partner"] == null)
        {
            HttpContext.Current.Response.Cookies["partner"]["partnerId"] = this.PartnerName; 
```

请就可能导致此行为的任何想法或建议提供帮助。

干杯，

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:49:33.103

尝试在 web.config 中明确设置域。内容应更改为：

```
<authentication mode="Forms">
            <forms name="yourAuthCookie" loginUrl="login.aspx" protection="All" path="/" />
        </authentication> 
```

......更像这样的东西......

```
<authentication mode="Forms">
            <forms name="yourAuthCookie" domain="stackoverflow.com" loginUrl="login.aspx" protection="All" path="/" />
        </authentication> 
```

**注意**：建议您不要使用 www 前缀 (www.stackoverflow.com)，因为如果这样做，那么与访问http://stackoverflow.com 的用户相比，访问[http://stackoverflow.com的用户将获得不同的 cookie](http://stackoverflow.com) [：/ /www.stackoverflow.com](http://www.stackoverflow.com)

# r - 从 R 中的列表中过滤值

> ID：14771029
> 
> 赞同：20
> 
> 时间：2013-02-08T10:58:12.403
> 
> 标签：r, list, filter, structure

我想计算命名数字列表的平均值。`numeric(0)`我首先要删除一些值。另外，我想检索列表中的哪些元素包含`numeric(0)`值。

这是一个示例，这些值可能如下所示：

```
>r["gg",]

$`01_1_er`
   gg 
0.5176445 

$`02_1_er`
   gg 
0.4990959 

$`03_1_er`
   gg 
0.5691489 

$`22_1_er`
numeric(0)

$`23_1_er`
numeric(0)

$`25_1_er`
  gg 
0.386304 
```

这是str的结果：

```
> str(r["gg",])
List of 6
 $ 01_1_er: Named num 0.518
  ..- attr(*, "names")= chr "gg"
 $ 02_1_er: Named num 0.499
  ..- attr(*, "names")= chr "gg"
 $ 03_1_er: Named num 0.569
  ..- attr(*, "names")= chr "gg"
 $ 22_1_er: num(0) 
 $ 23_1_er: num(0) 
 $ 25_1_er: Named num 0.386
  ..- attr(*, "names")= chr "gg" 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-08T11:14:26.573

```
## Example list

l <- list(n1=numeric(0), n2="foo", n3=numeric(0), n4=1:5)

## Filter out elements with length 0

l[lapply(l, length) > 0]

$n2
[1] "foo"

$n4
[1] 1 2 3 4 5

## Get names of elements with length 0

names(l)[lapply(l, length) == 0]

[1] "n1" "n3" 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-08T13:53:14.373

[使用基础 R 中的Filter](https://stat.ethz.ch/R-manual/R-devel/library/base/html/funprog.html)函数的另一种解决方案：

```
mean(unlist(Filter(is.numeric, l))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T11:14:15.337

取消列出将仅提取单个向量中的数字条目，您可以将其称为均值，因此请尝试：

```
mean(unlist(r["gg",])) 
```

# asp.net-mvc-4 - Team Foundation Server - 提交的文件对其他 TFS 成员显示为隐藏

> ID：14771030
> 
> 赞同：2
> 
> 时间：2013-02-08T10:58:20.023
> 
> 标签：asp.net-mvc-4, tfs, visual-studio-2012

几个月以来，我们将 TFS 2012 与 Visual Studio 2012 一起使用，直到几周我们在签入/签出期间没有发现任何问题。此外，我们正在开发一个 ASP.NET MVC4 项目。
但最近，我们注意到如果 A 签入新文件（fi .cs 或 .cshtml）而 B 执行“获取最新版本”，那么他会收到这些文件，但由于某种原因它们被隐藏了。所以我们每次都必须手动“包含在项目中”。这发生在我们任何人身上。
我既没有直接访问 TFS 配置的权限，也没有更改我的 Visual Studio 设置。因此，这真的很奇怪，发生这种情况的原因不明。

你有什么想法我应该尝试或检查吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:10:06.137

我唯一一次看到这种行为是当有人签入文件而不是相应的`.csproj`文件时。.csproj 文件包含包含哪些文件的定义，因此要使用新文件构建解决方案，还必须签入 .csproj 文件。

请注意，在提交对 .csproj 文件的更改之前，有时可能需要执行“全部保存”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T16:10:49.483

我建议检查`.csproj`最近几次出现此问题的签到的文件。当我的一位同事从项目中“排除此文件”时，我已经多次遇到这种情况，因为他们不明白为什么某些东西不起作用。他们忘记将其重新包含在项目中，然后重新检查所有内容。项目文件不包含被排除的文件。

# java - 在 java 中使用 SAXParser 解析嵌套的 XML

> ID：14771033
> 
> 赞同：1
> 
> 时间：2013-02-08T10:58:28.473
> 
> 标签：java, saxparser

我需要使用 SAX Parser 解析嵌套的 XML。

```
<ParentNode  id="3" name="3" >
    <ChildNode>
        <InnerNode id="13" name="13"   parentID="3" />
    </ChildNode>
    <ChildNode>
        <ParentNode id="2" name="2" >
            <ChildNode>
                <ParentNode id="1" name="1" >
                    <ChildNode>
                        <InnerNode id="11" name="11"   parentID="1" />
                    </ChildNode>
                    <ChildNode>
                        <InnerNode id="10" name="10"   parentID="1" />
                    </ChildNode>
                </ParentNode>
            </ChildNode>
            <ChildNode>
                <InnerNode id="12" name="12"   parentID="2" />
            </ChildNode>
        </ParentNode>
    </ChildNode>
</ParentNode> 
```

ParentNode 标签是这里的主要标签。ParentNode 也可以在 ChildNode 标记内。这里ParentNode和ChildNode的关系是onyToMany。以及休眠域中 ChildNode 和 InnerNode 之间的 oneToOne 关系。

这不是静态 XML。它可以嵌套更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-15T16:09:08.210

如果要使用 SAX 解析器，需要考虑的设计模式是定义对象堆栈（例如 Stack objectStack = new Stack()）。在 startElement 中将对应的对象压入栈中。在 endElement 中将对象从堆栈中弹出。当您想知道包含（父）对象时，请查看堆栈顶部。（例如在 startElement 中，如果您查看堆栈顶部并且那里有一个对象，则它是当前元素定义的对象的父级。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:01:56.593

这应该有帮助

```
public static void main(String argv[]) {

    try {

    SAXParserFactory factory = SAXParserFactory.newInstance();
    SAXParser saxParser = factory.newSAXParser();

    DefaultHandler handler = new DefaultHandler() {

    boolean bfname = false;
    boolean blname = false;
    boolean bnname = false;
    boolean bsalary = false;

    public void startElement(String uri, String localName,String qName, 
                Attributes attributes) throws SAXException {

        System.out.println("Start Element :" + qName);

    }

    public void endElement(String uri, String localName,
        String qName) throws SAXException {

        System.out.println("End Element :" + qName);

    }

 saxParser.parse("yourfile.xml", handler);

     } catch (Exception e) {
       e.printStackTrace();
     }

   } 
```

# php - 如何格式化这个抓取的内容

> ID：14771037
> 
> 赞同：0
> 
> 时间：2013-02-08T10:58:47.963
> 
> 标签：php, html, dom, scrape

我正在使用此表中的 class="job" 获取此表中所有 td 的内容。

```
$table01 = $salary->find('table.table01');
$rows = $table01[0]->find('td.job'); 
```

然后我用它来输出它的工作原理，但显然只输出为纯文本，我需要用它做更多的事情......

```
foreach($table01[0]->find('td.job') as $element) {
$jobs .= $element->plaintext . '<br />';
} 
```

最终我希望它输出为这种格式。请注意，a href 使用作业名称并将空格和 / 替换为 -。

```
<tr>
  <td class="small"> <a href="/graphic-artist-designer">Graphic Artist / Designer</a>
    $23,755 – $55,335  </td>
</tr>
<tr>
  <td class="small"> <a href="/sales-associate">Sales Associate</a><br />
    $15,577 – $56,290  </td>
</tr>
<tr>
  <td class="small"> <a href="/film-video-editor">Film / Video Editor</a><br />
    $24,184 – $94,493  </td>
</tr> 
```

这是我正在刮的桌子

```
<table cellpadding="0" cellspacing="0" border="0" class="table01">

<tr>
    <td class="head">Test</td>
    <td class="job">
    <a href="/Graphic_Artist_%2f_Designer" id="UniqueID1">Graphic Artist / Designer</a><br/>
    $23,755 – $55,335
    </td>
</tr>

<tr>
    <td class="head">Test</td>
    <td class="job">
    <a href="/Sales_Associate" id="UniqueID2">Sales Associate</a><br/>
    $15,577 – $56,290
    </td>
</tr>

<tr>
    <td class="head">Test</td>
    <td class="job">
    <a href="/Film_%2f_Video_Editor" id="UniqueID3">Film / Video Editor</a><br/>
    $24,184 – $94,493
    </td>
</tr>

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:50:32.277

使用正则表达式可能会更好

```
<?php
$html=file_get_contents('1.html');
$jobs='';
if(preg_match_all("/<tr>.*?<td.*?>.*?<\/td>.*?<td\sclass=\"job\">.*?<a.+?href=\"(.+?)\".+?>(.*?)<\/a>(.*?)<\/td>.*?<\/tr>/ims", $html, $res))
{
  foreach($res[1] as $i=>$uri)
  {
    $uri=strtolower(urldecode($uri));
    $uri=preg_replace("/_\/_/",'-',$uri);
    $uri=preg_replace("/_/",'-',$uri);
    $jobs.='<tr><td class="small"> <a href="'.$uri.'">'.$res[2][$i].'</a>'.$res[3][$i].'</td></tr>'."\n";
  }
}
echo $jobs; 
```

# python - 如何在python中模拟异常调用？

> ID：14771039
> 
> 赞同：4
> 
> 时间：2013-02-08T10:58:53.490
> 
> 标签：python, mocking

我有这样的代码：

```
def extract(data):
    if len(data) == 3:
       a = 3
    else:
        component = data.split("-")
        if len(component) == 3:
            a,b,c = component
        else:
            raise globals.myException("data1", "Incorrect format", data)

    return a,b,c 
```

这是一个简化的。我想模拟异常类 globals.myException。我正在这样做：

```
def test_extract_data_throws_exception(self):
        with patch('globals.myException') as mock: 
            mock.__init__("data1", "Incorrect format", "")
            with self.assertRaises(myException):
                self.assertEqual(extract(""), ("")) 
```

而且我总是收到错误：“TypeError：异常必须是旧式类或派生自 BaseException，而不是 MagicMock”

**编辑**：正如@Aaron Digulla 建议的那样，猴子补丁是正确的解决方案。我发布解决方案以帮助他人。

```
def test_extract_data_throws_exception(self):
        #monkey patching
        class ReplaceClass(myException):
            def __init__(self, module, message, detail = u''):
                pass

        globals.myException = ReplaceClass
        with self.assertRaises(myException:
            self.assertEqual(extract(""), ("")) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:18:34.897

原因是`raise`检查参数的类型。它必须是一个字符串（又名“旧式例外”）或派生自`BaseException`

由于模拟也不是，`raise`因此拒绝使用它。

在这种特定情况下，您要么必须引发异常，要么使用[猴子补丁](https://stackoverflow.com/questions/3765222/monkey-patch-python-class)（= 覆盖`globals.myException`测试中的符号并在之后恢复它）。

# windows - GetNumaProcessorNodeEx 的驱动程序等价物是什么？

> ID：14771040
> 
> 赞同：0
> 
> 时间：2013-02-08T10:58:57.427
> 
> 标签：windows, kernel, driver, numa

我目前正在尝试将驱动程序中的一些内核线程连接到特定的 NUMA 节点。为此，我需要查询各个处理器的 NUMA 节点。

不幸的是，GetNumaProcessorNodeEx 在驱动程序中不可用（它需要 Windows.h）。该功能的驱动程序等效项是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:42:36.727

您可以调用[KeQueryLogicalProcessorRelationship](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553031%28v=vs.85%29.aspx)并请求 RelationNumaNode。这将为您提供系统中每个 NUMA 节点的关联性。

# iphone - 错误的代表声明

> ID：14771041
> 
> 赞同：0
> 
> 时间：2013-02-08T10:59:08.997
> 
> 标签：iphone, ios, xcode, delegates

假设我有一个班级 ClassA

标题：

```
@interface ClassA : NSObject
- (id)initWithDelegate:(id)delegate;
@end 
```

执行：

```
@interface ClassA ()
{
    NSObject *_delegate;
}
@end

@implementation
- (id)initWithDelegate:(id)delegate
{
    self = [super init];
    if( self )
    {
        _delegate = delegate;
    }

    return self;
}
@end 
```

由于我跳过了@property 定义，我的委托声明默认为强？所以这段代码是错误的，因为它会导致泄漏，还是我的 delagate 声明默认为弱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:04:39.903

您必须将该 ivar 限定为 __weak。ivar 的默认值是强的。

否则，正如您已经知道的那样，您将面临与代表的保留周期的风险。

顺便说一句，这里的约定是 'id' 而不是 NSObject *。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:03:48.120

最好以明确的方式编写代码：

```
@interface ClassA : NSObject
@property(weak) id delegate; // or @property(weak, readonly)
@end

@implementation ClassA

- (id)initWithDelegate: (id) delegate
{
    self = [super init];
    _delegate = delegate;
    return self;
}

@end 
```

默认情况下，您的实例变量会很强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:10:02.070

您是对的，这将导致 ARC 保留 _delegate，即进行“强”引用。如果要在不声明 a 的情况下创建弱引用`@property`，可以使用

```
@interface ClassA ()
{
    __weak id _delegate;
}
@end 
```

# multithreading - javafx运行时线程同步错误？

> ID：14771042
> 
> 赞同：3
> 
> 时间：2013-02-08T10:59:14.420
> 
> 标签：multithreading, exception, runtime, javafx-2

我想知道是否有人可以详细说明以下错误而不必发布我的整个代码。我有一个绘制图像的对象和一个在顶部绘制另一个图像的线程对象。每当通过单击并拖动鼠标更改图像可见区域时，我有时会收到此错误并且我的应用程序会冻结。

```
java.lang.InternalError: Unrecognized PGCanvas token: 68
    at com.sun.javafx.sg.prism.NGCanvas.renderStream(NGCanvas.java:699)
    at com.sun.javafx.sg.prism.NGCanvas.renderContent(NGCanvas.java:339)
    at com.sun.javafx.sg.prism.NGNode.doRender(NGNode.java:187)
    at com.sun.javafx.sg.prism.NGNode.doRender(NGNode.java:39)
    at com.sun.javafx.sg.BaseNode.render(BaseNode.java:1145)
    at com.sun.javafx.sg.prism.NGGroup.renderContent(NGGroup.java:204)
    at com.sun.javafx.sg.prism.NGRegion.renderContent(NGRegion.java:420)
    at com.sun.javafx.sg.prism.NGNode.doRender(NGNode.java:187)
    at com.sun.javafx.sg.prism.NGNode.doRender(NGNode.java:39)
    at com.sun.javafx.sg.BaseNode.render(BaseNode.java:1145)
    at com.sun.javafx.sg.prism.NGGroup.renderContent(NGGroup.java:204)
    at com.sun.javafx.sg.prism.NGRegion.renderContent(NGRegion.java:420)
    at com.sun.javafx.sg.prism.NGNode.doRender(NGNode.java:187)
    at com.sun.javafx.sg.prism.NGNode.doRender(NGNode.java:39)
    at com.sun.javafx.sg.BaseNode.render(BaseNode.java:1145)
    at com.sun.javafx.tk.quantum.ViewPainter.doPaint(ViewPainter.java:117)
    at com.sun.javafx.tk.quantum.AbstractPainter.paintImpl(AbstractPainter.java:181)
    at com.sun.javafx.tk.quantum.PresentingPainter.run(PresentingPainter.java:73)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(Unknown Source)
    at java.util.concurrent.FutureTask.runAndReset(Unknown Source)
    at com.sun.prism.render.RenderJob.run(RenderJob.java:37)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:104)
    at java.lang.Thread.run(Unknown Source)
java.lang.InternalError: Unrecognized PGCanvas token: 68 
```

# java - 调用在 URL 中有查询参数的“REST”服务

> ID：14771043
> 
> 赞同：7
> 
> 时间：2013-02-08T10:59:15.717
> 
> 标签：java, web-services, rest, cxf, web-client

我必须在返回的服务上调用 GET `text/xml`。

端点是这样的：

```
http://service.com/rest.asp?param1=34&param2=88&param3=foo 
```

当我直接在浏览器（或某些 UI 工具）上点击此 URL 时，一切都很好。我得到回应。

现在，我正在尝试使用`CXF WebClient`这样的一段代码来获取结果：

```
String path = "rest.asp?param1=34&param2=88&param3=foo";

webClient.path(path)
    .type(MediaType.APPLICATION_JSON)
    .accept(MediaType.TEXT_XML_TYPE)
    .get(Response.class); 
```

我正在调试代码，发现正在发送的请求是 url 编码的，看起来像这样：

```
http://service.com/rest.asp%3Fparam1=34%26param2=88%26param3=foo 
```

现在，问题是服务器似乎不理解这个带有编码内容的请求。它会抛出 404。在浏览器上点击这个编码的 url 也会导致 404。

我应该怎么做才能成功获得响应（或不让 WebClient 对 url 进行编码）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T11:13:31.427

使用查询方法指定参数：

```
String path = "rest.asp";
webClient.path(path)
    .type(MediaType.APPLICATION_JSON)
    .accept(MediaType.TEXT_XML_TYPE)
    .query("param1","34")
    .query("param2","88")
    .query("param3","foo")
    .get(Response.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:12:22.600

您将需要对您的 URL 进行编码。您可以使用 URLEncoder 类执行此操作，如下所示：

请更换您的线路

```
String path = "rest.asp?param1=34&param2=88&param3=foo"; 
```

和

```
String path = URLEncoder.encode("rest.asp?param1=34&param2=88&param3=foo"); 
```

# node.js - 如何使用 node.js 制作将文档转换为演示文稿的服务

> ID：14771046
> 
> 赞同：0
> 
> 时间：2013-02-08T10:59:19.570
> 
> 标签：node.js, openoffice.org, document-conversion

我想制作一个将文档转换为 ppt 演示文稿的 node.js 服务器。我想我会使用 Open Office 来完成这项工作，但我不确定如何开始，以及是否有人可以帮助我指出一个好的方向，也许还有一些关于如何使用 Open Office 的教程可能会用其他编程语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T22:47:42.603

如果您不打算自己进行转换，则应首先查找进行转换的命令行工具或 node.js 库。然后围绕它构建 Web 服务。

# cucumber - 将黄瓜与硒一起使用

> ID：14771047
> 
> 赞同：0
> 
> 时间：2013-02-08T10:59:20.193
> 
> 标签：cucumber, selenium-webdriver

我打算在 ruby​​ 中使用 cucumber 和 selenium webdriver。我已经看到它在java中是可能的。有人可以指导我教程吗？如何使用注释，黄瓜中必须有什么等。一个简单的例子会很棒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T18:25:38.967

我在我的项目中使用 Cucumber 和 Java/Junit。以下链接中的信息特别有用： [http ://c0deattack.wordpress.com/2012/03/28/cucumber-jvm-with-cucumber-java-cucumber-junit-example/](http://c0deattack.wordpress.com/2012/03/28/cucumber-jvm-with-cucumber-java-cucumber-junit-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T18:36:02.327

与其直接将 selenium webdriver 与 cucumber 一起使用：使用 capybara，它在 selenium webdriver 之上更清洁、简单和高级 API。Capabara 与 selenium 相比具有优势，如果需要其他测试需要，也可以插入其他驱动程序。

Cabybara 可以像往常一样从命令提示符安装 gem： **gem install** capybara 其中还包括 selenium -webdriver 作为依赖 gem。

# ios - Parse SDK Query 具有出色的网络连接

> ID：14771049
> 
> 赞同：1
> 
> 时间：2013-02-08T10:59:21.677
> 
> 标签：ios, objective-c, cocoa-touch, parse-platform

我已经按照本教程[http://attila.tumblr.com/post/21180235691/ios-tutorial-creating-a-chat-room-using-parse-com](http://attila.tumblr.com/post/21180235691/ios-tutorial-creating-a-chat-room-using-parse-com)创建了一个基本功能的聊天室，但是一旦我完成并尝试运行它我得到了错误

```
 "Query has outstanding network connections" 
```

我将它添加到一个现有项目中，在该项目中我调用了另一个 Parse 查询，所以我认为是这样，所以我尝试创建一个全新的项目，它产生了同样的错误。

所以我从教程中下载了示例项目并运行它，它运行良好。在玩了很多之后，我尝试在我的项目中使用教程中的 Parse.framework，它成功了！这很好，但我使用了旧版 SDK 中不可用的部分 SDK，所以现在我完全被卡住了。

我在这里上传了新项目[https://github.com/cstokes/ChatTest](https://github.com/cstokes/ChatTest)它包括带有错误的新框架（1.1.29），它的工作版本是 0.4.40。我在 Parse.com 上询问并得到了简单的“将您的项目 SDK 更新到最新版本”，显然我使用最新版本进行了尝试并得到了错误。

提前感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T19:53:11.937

您正在尝试使用一个 PFQuery 同时进行查找和计数。PFQuery 不能一次进行多个搜索。您应该为计数创建一个单独的 PFQuery。

# .net - CruiseControl.NET、SVN 和多个依赖项

> ID：14771051
> 
> 赞同：2
> 
> 时间：2013-02-08T10:59:28.557
> 
> 标签：.net, svn, cruisecontrol.net

我在 ccnet.config 中使用 CruiseControl.NET 和 devenv 来自动构建 VS 2005 .NET 解决方案。该解决方案包含对几个相互依赖的项目的引用，以及一个库文件夹，其中包含第三方 dll 和从我创建的项目编译的其他 dll。

我遇到的问题是尝试设置我的 ccnet.config 文件，以便在开始 devenv 任务之前从 SVN 获取 .NET sln 文件和 Library 文件夹中每个项目的最新更新。

由于我似乎在网上找不到任何东西，有人可以帮助或指出我正确的方向吗？

下面是我的 ccent.config 文件，我正在使用 PreProcessor 来避免重复，因为我将把它重用于具有类似结构的其他解决方案文件：

```
<cruisecontrol xmlns:cb="urn:ccnet.config.builder">

  <cb:define MainTrunk="svn://mySvnUrl"/>
  <cb:define WorkingDir="C:\Svn\"/>
  <cb:define SvnExec="C:\Program Files\CollabNet Subversion Client\svn.exe"/>
  <cb:define ArtifactsDir="\Artifacts"/>

  <cb:define name="MyProjectName">
      <project name="$(ProjectName)"
               description="$(ProjectName) build">

        <triggers>
        <!-- check the source control every X time for changes, 
             and run the tasks if changes are found -->
          <intervalTrigger
                   name="continuous"
                   seconds="500"
                   buildCondition="IfModificationExists"
                   initialSeconds="5"/>
        </triggers>

        <sourcecontrol type="svn">

            <trunkUrl>$(MainTrunk)/$(ProjectName)/trunk</trunkUrl>

            <workingDirectory>$(WorkingDir)$(ProjectName)</workingDirectory>

            <executable>$(SvnExec)</executable> 

        </sourcecontrol> 

        <tasks>
              <devenv>
                    <solutionfile>$(WorkingDir)$(ProjectName)\$(ProjectName).sln</solutionfile>
                    <configuration>Debug</configuration>
                    <executable>C:\Program Files\Microsoft Visual Studio 8\Common7\IDE\devenv.com</executable>
                    <!--<buildTimeoutSeconds>10</buildTimeoutSeconds>-->
                </devenv>

        </tasks>

        <publishers>
          <xmllogger />
          <artifactcleanup cleanUpMethod="KeepLastXBuilds"
                           cleanUpValue="50" />
        </publishers>

      </project>
    </cb:define>

    <cb:scope ProjectName="ProjectA">
        <cb:MyProjectName/>
    </cb:scope>

</cruisecontrol> 
```

**更新：**在提出问题后，我开始认为解决这个问题的方法可能是检查依赖项目的修改，如果有变化，然后触发 VS 解决方案文件的构建 - ProjectA。所以我已经相应地更新了我的 ccnet.config（见下文）。然后，我也将它应用于我的 VS sln 中的依赖项目。

如果有人可以看看并让我知道我是否朝着正确的方向前进，我仍然会很感激。

```
<cruisecontrol xmlns:cb="urn:ccnet.config.builder">
  <!-- This is your CruiseControl.NET Server Configuration file. Add your projects below! -->
  <cb:define MainTrunk="svn://SvnUrl"/>
  <cb:define WorkingDir="C:\Svn\"/>
  <cb:define SvnExec="C:\Program Files\CollabNet Subversion Client\svn.exe"/>
  <cb:define ArtifactsDir="\Artifacts"/>

  <cb:define name="MyProjectName">
      <project name="$(ProjectName)"
               description="$(ProjectName) build">

        <triggers>

          <projectTrigger project="Libraries">
            <triggerStatus>Success</triggerStatus>
            <innerTrigger type="intervalTrigger"
                          seconds="120"
                          buildCondition="ForceBuild" />
          </projectTrigger>

        </triggers>

        <sourcecontrol type="svn">

            <trunkUrl>$(MainTrunk)/$(ProjectName)/trunk</trunkUrl>

            <workingDirectory>$(WorkingDir)$(ProjectName)</workingDirectory>

            <executable>$(SvnExec)</executable> 

        </sourcecontrol> 

        <tasks>
              <devenv>
                    <solutionfile>$(WorkingDir)$(ProjectName)\$(ProjectName).sln</solutionfile>
                    <configuration>Debug</configuration>
                    <executable>C:\Program Files\Microsoft Visual Studio 8\Common7\IDE\devenv.com</executable>
                    <!--<buildTimeoutSeconds>10</buildTimeoutSeconds>-->
                </devenv>

        </tasks>

        <publishers>
          <xmllogger />
          <artifactcleanup cleanUpMethod="KeepLastXBuilds"
                           cleanUpValue="50" />
        </publishers>

      </project>
    </cb:define>

    <cb:scope ProjectName="ProjectA">
        <cb:MyProjectName/>
    </cb:scope>

    <project name="Libraries">
        <triggers>
          <intervalTrigger name="continuous" seconds="60"  buildCondition="IfModificationExists" initialSeconds="5"/>
        </triggers>
        <sourcecontrol type="svn">                      
            <trunkUrl>svn://SvnUrl/Libraries</trunkUrl>
            <workingDirectory>C:\Svn\Libraries</workingDirectory>
            <executable>C:\Program Files\CollabNet Subversion Client\svn.exe</executable>           
        </sourcecontrol> 
    </project>  

</cruisecontrol> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:25:17.137

如果您通过项目主干上指向库文件夹的[svn:externals](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-externals.html)`sourcecontrol`属性在每个项目根目录中包含第 3 方库，请在配置块内使用以下开关：

```
<checkExternals>True</checkExternals> 
```

这样，CC.NET 也会在库文件夹中的修改时触发编译。

您可能还需要：

```
<checkExternalsRecursive>True</checkExternalsRecursive> 
```

# android - 使用不同的上下文获取 SharedPreference

> ID：14771053
> 
> 赞同：0
> 
> 时间：2013-02-08T10:59:32.083
> 
> 标签：android

使用上有区别吗

`getApplicationContext().getSharedPreferences()`vs`this.getSharedPreferences()`用于创建 SharedPreference 对象。注意：`this`这里暗示活动

我知道它是从类`getSharedPreferences()`继承的，并且都是.`Context``Application``Activity``Context`

上述两种不同的功能是否相同`Toasts`，`ProgressDialogues`我们应该只在哪里使用`Activity Context`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:40:03.977

`Activity` `Context`除非您想`SharedPreferences`全局使用对象，否则您应该使用。`getApplicationContext()`并`this`因它们的生命周期而异。如果您使用`getApplicationContext()`创建对象，`SharedPreferences`则可以在整个应用程序中使用该对象。但是，如果您只想`SharedPreferences`在活动中使用对象，请选择`Activity` `Context`

# c# - C#以窗体打开程序

> ID：14771058
> 
> 赞同：0
> 
> 时间：2013-02-08T10:59:44.780
> 
> 标签：c#

我正在尝试以带有以下代码的形式打开一个 exe。

这是打开我的程序但在表单之外。我想在我的表单内有这个程序。请帮助问候

```
Process p = new Process();

p.StartInfo.FileName = @"C:\Program Files\Cadence Design Systems\Allegro Free Physical Viewers 16.6\tools\pcb\bin\allegro_free_viewer";
p.StartInfo.Arguments = "ProcessStart.cs";
p.Start();
p.WaitForExit();
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.UseShellExecute = false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:05:24.317

您不能使用进程在您的应用程序中运行其他应用程序，您可以使用[对象链接和嵌入](http://en.wikipedia.org/wiki/Object_Linking_and_Embedding)来执行此操作，并且您要从应用程序中打开的应用程序应该与`ole`. 这篇 codeproject[文章](http://www.codeproject.com/Tips/467739/How-to-Insert-an-OLE-Object-Adobe-Acrobat-Document)解释了如何在 c# 应用程序中嵌入 acrobat 文档。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T11:06:26.117

如果您要说的是您希望在 Windows 窗体应用程序中拥有一个窗口，那么这并不容易。

您最好的选择是设置一个 MDI 主机窗口，并使用 WinAPI`FindWindow`并`SetParent`找到外部进程窗口（一旦启动），然后将此窗口的父级设置为您自己的表单主机窗口。

像这样的东西（在导入方法之后）应该可以工作：

```
Process p = new Process();

p.StartInfo.FileName = @"C:\Program Files\Cadence Design Systems\Allegro Free Physical Viewers 16.6\tools\pcb\bin\allegro_free_viewer.exe";
p.StartInfo.Arguments = "ProcessStart.cs";
p.Start();
var handle = FindWindow(null, "allegro_free_viewer.exe");
SetParent(handle, this.Handle);
p.WaitForExit(); 
```

当然，更好的方法是查看应用程序是否能够提供您能够嵌入到应用程序中的 ActiveX/OLE 控件，而不是使用外部进程。

# java - javax.mail.MessagingException：无法向 SMTP 主机发送命令

> ID：14771061
> 
> 赞同：2
> 
> 时间：2013-02-08T11:00:01.640
> 
> 标签：java, jakarta-mail

在 Java 邮件发送中出现以下异常

```
javax.mail.MessagingException: Can't send command to SMTP host;
  nested exception is:
    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at com.sun.mail.smtp.SMTPTransport.sendCommand(SMTPTransport.java:1365)
    at com.sun.mail.smtp.SMTPTransport.sendCommand(SMTPTransport.java:1353)
    at com.sun.mail.smtp.SMTPTransport.ehlo(SMTPTransport.java:794)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:336)
    at javax.mail.Service.connect(Service.java:258)
    at javax.mail.Service.connect(Service.java:137)
    at javax.mail.Service.connect(Service.java:86)
    at javax.mail.Transport.send0(Transport.java:150)
    at javax.mail.Transport.send(Transport.java:80)
    at com.csdcsystems.amanda.common.utility.EmailHelper.sendMail(EmailHelper.java:244)
    at com.csdcsystems.amanda.jems.web.viewmodel.FolderEmailPrintOutputViewModel.sendEmail(FolderEmailPrintOutputViewModel.java:117)
    at com.csdcsystems.amanda.jems.web.viewmodel.FolderEmailPrintOutputViewModel.sendEmail(FolderEmailPrintOutputViewModel.java:91)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.zkoss.bind.impl.ParamCall.call(ParamCall.java:109)
    at org.zkoss.bind.impl.BinderImpl.doExecute(BinderImpl.java:1508)
    at org.zkoss.bind.impl.BinderImpl.doCommand(BinderImpl.java:1261)
    at org.zkoss.bind.impl.BinderImpl.access$1500(BinderImpl.java:95)
    at org.zkoss.bind.impl.BinderImpl$CommandEventListener.onEvent0(BinderImpl.java:1145)
    at org.zkoss.bind.impl.BinderImpl$CommandEventListener.onEvent(BinderImpl.java:1103)
    at org.zkoss.zk.ui.AbstractComponent.onEvent(AbstractComponent.java:2734)
    at org.zkoss.zk.ui.AbstractComponent.service(AbstractComponent.java:2705)
    at org.zkoss.zk.ui.AbstractComponent.service(AbstractComponent.java:2646)
    at org.zkoss.zk.ui.impl.EventProcessor.process(EventProcessor.java:136)
    at org.zkoss.zk.ui.impl.UiEngineImpl.processEvent(UiEngineImpl.java:1709)
    at org.zkoss.zk.ui.impl.UiEngineImpl.process(UiEngineImpl.java:1494)
    at org.zkoss.zk.ui.impl.UiEngineImpl.execUpdate(UiEngineImpl.java:1204)
    at org.zkoss.zk.au.http.DHtmlUpdateServlet.process(DHtmlUpdateServlet.java:558)
    at org.zkoss.zk.au.http.DHtmlUpdateServlet.doGet(DHtmlUpdateServlet.java:456)
    at org.zkoss.zk.au.http.DHtmlUpdateServlet.doPost(DHtmlUpdateServlet.java:464)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:03:49.840

看看这里：

> javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：**无法找到请求目标的有效证书路径**

请参阅这些相关线程：

[SunCertPathBuilderException 的解决方案](http://www.mkyong.com/webservices/jax-ws/suncertpathbuilderexception-unable-to-find-valid-certification-path-to-requested-target/)

[如何解决 sun.security.provider.certpath.SunCertPathBuilderException？](https://stackoverflow.com/questions/7709540/how-to-solve-sun-security-provider-certpath-suncertpathbuilderexception)

[允许 Java 使用不受信任的证书进行 SSL/HTTPS 连接](https://stackoverflow.com/questions/1201048/allowing-java-to-use-an-untrusted-certificate-for-ssl-https-connection/1201102#1201102)

[无法找到到所请求目标的有效证书路径 - 即使在导入证书后也会出错](https://stackoverflow.com/questions/9210514/unable-to-find-valid-certification-path-to-requested-target-error-even-after-c)

# spring-mvc - 1 字节 UTF-8 序列的无效字节 1

> ID：14771062
> 
> 赞同：0
> 
> 时间：2013-02-08T11:00:05.580
> 
> 标签：spring-mvc, file-upload, forms

如何解决这个问题：

```
com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 1 of 1-byte UTF-8 sequence. 
```

将文件上传到服务器时出现此异常。相同的代码在 Firefox 中有效，但我只在`IE`

可能是什么问题呢。请帮我找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:16:29.527

没有可查看的代码，很难确定确切的原因。我可以告诉你，异常意味着发送的字节被假定为 UTF-8 编码，但你发送的文件，或者至少 IE 尝试发送它的方式，不是 UTF-8 编码的。

# xamarin.ios - Mono touch 和 mvvmcross 中自定义视图绑定的垃圾收集问题

> ID：14771064
> 
> 赞同：0
> 
> 时间：2013-02-08T11:00:10.927
> 
> 标签：xamarin.ios, garbage-collection, mvvmcross

我有一个自定义日历控件，它有一个自定义视图绑定。在这个视图绑定中，我们连接了一些未正确解耦的事件，因此垃圾收集未完成。下面是我们的自定义视图绑定。如您所见，事件在构造函数中连接，并在触发 OnSelectedDate 事件时解耦（用户选择日期）。因此，如果您选择一个日期，则事件解耦正确并被垃圾收集，但如果您只是返回，该事件仍处于关联状态且不执行垃圾收集。我考虑过用空值触发事件，从而解除事件。但我认为必须有一些更聪明的方法来实现这一点。

```
namespace CmsApp.Core.Binders
{
    public class CalendarViewBinding:MvxBaseTargetBinding
    {
        private CalendarView _calendarView;
        private DateTime _currentValue;
         public CalendarViewBinding(CalendarView calendarView)
        {
            _calendarView = calendarView;
            _calendarView.OnDateSelected+=OnDateSelected;
        }

         protected override void Dispose(bool isDisposing)
         {
             if(_calendarView!=null)
             {
                 _calendarView.OnDateSelected -= OnDateSelected;
                 _calendarView = null;
             }
             base.Dispose(isDisposing);

         }

        private void OnDateSelected(object sender, SelectedDateEventArgs args)
        {
            _currentValue = args.SelectedDate;
            this.FireValueChanged(_currentValue);
            _calendarView.OnDateSelected -= OnDateSelected;
        }

        public override void SetValue(object value)
        {
            var date = (DateTime)value;
            _currentValue = date;
            _calendarView.SelectedDate = _currentValue;

        }

        public override Type TargetType
        {
            get
            {
                return typeof(DateTime);
            }
        }

        public override MvxBindingMode DefaultMode
        {
            get
            {
                return MvxBindingMode.TwoWay;
            }
        }
    }
} 
```

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:41:18.243

在我看来，您的绑定几乎是正确的。

我能看到的唯一问题是它过于频繁地取消订阅该事件 - 你不能打电话`_calendarView.OnDateSelected -= OnDateSelected;`两次 - 但我认为这不是你看到的问题。

我目前猜测问题不在您使用的代码中：

*   您正在使用的底层框架中的绑定代码中存在错误
*   或者您使用此绑定的方式存在错误/问题
*   或者您的内存泄漏与此绑定无关

从此处发布的有限代码中测试这一点并不容易，但如果您可以制作一个简单的应用程序来重现您所看到的泄漏，那就更简单了。分享它，您可能会获得更多反馈。

* * *

如果您认为我的猜测是错误的，那么我唯一可以建议的是您在绑定中切换到 WeakReferences - 但这感觉就像是贴膏药而不是治愈方法。

* * *

只需添加一个链接到[何时在 mono touch / mvvmcross 中释放对象](https://stackoverflow.com/questions/14688044/when-to-release-objects-in-mono-touch-mvvmcross)

# django - 我怎样才能将多个项目添加到我的订单/购物车？

> ID：14771065
> 
> 赞同：0
> 
> 时间：2013-02-08T11:00:12.223
> 
> 标签：django, django-views

所以我正在开发一个电子商务应用程序（与在线订购食物有关），目前我可以在订单中添加一个项目，但不能添加多个项目。我真的不明白这是怎么回事。在我看来，

```
def show_item(request,id):
    # need to evaluate the HTTP method
    if request.method == 'POST'
        a = Item.objects.get(pk=id)
        form = PartialOrderItemForm(request.POST,instance=a)
        # check validation of posted data
        if form.is_valid():
            order.add_to_order(request,a)
            # if test cookie worked, get rid of it
            if request.session.test_cookie_worked():
                request.session.delete_test_cookie()
            url =urlresolvers.reverse('order_index')
            # redirect to order page
            return HttpResponseRedirect(url)
    else:
        form = PartialOrderItemForm()
    request.session.set_test_cookie()
    context={
        'form':form,

    }
    return render_to_response('item.html',context,context_instance=RequestContext(request)) 
```

验证表单后，视图调用该方法负责添加项目

```
def add_to_order(request,obj):  
    postdata = request.POST.copy()
    #get quantity added, return 0 if empty
    quantity = postdata.get('quantity',0)
    # fetch the item or return  missing page error_message
    i = get_object_or_404(Item,pk=obj.id)
    i.orderitem_set.all()
    # get items in order
    order_items = get_order_items(request)
    item_in_orders = False
    # check to see if item is already in order
    for order_item in order_items:
        if order_item.item.id == i.id:
            #update the quantity if found
            order_item.augment_quantity(quantity)
            item_in_orders = True
    if not item_in_orders:
        # creat and save a new order item
        oi = OrderItem()
        oi.order_id = _order_id(request)
        oi.quantity = quantity
        oi.item = i
        oi.save() 
```

这是我在模板中的表格..

```
<form method="post" action=".">
      {% csrf_token %}
       {{ form.as_p }}
      <br />
      <input type="submit" id="submit_order" value="Add To Order" name="submit">
 </form> 
```

关于我应该如何去做的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:26:58.850

好吧，问题出在我的缩进上，只能用 pdb 找到。 `pdb`是真正的交易

# sql-server-2008 - 移除对不存在的数据库表的依赖（sql server 2008 R2）

> ID：14771068
> 
> 赞同：0
> 
> 时间：2013-02-08T11:00:25.683
> 
> 标签：sql-server-2008, dependencies

我想更新 sql server 2008 R2 中的表。它失败是因为该表依赖于不再存在的表（“未解析的实体”）。我想删除依赖。这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:30:50.827

依赖关系是由某种表键、触发器等创建的。
所有这些都必须检查并在必要时删除。

# css - 如何在ie8中停止li步进效果？

> ID：14771073
> 
> 赞同：0
> 
> 时间：2013-02-08T11:00:38.367
> 
> 标签：css, internet-explorer, cross-browser, html-lists

我有一个用 php 动态加载的图片库。在 chrome 中，它看起来像这样：

![](../Images/b69b31fdd2aa13e0719abdadd8be98f2.png)

在 ie8 中是这样的：

![](../Images/7fd6bd9ca8e2afbaa3a86743c07890cb.png)

HTML和PHP如下：

```
while($row = mysql_fetch_array($result)) {

$parent = $row["parent_business_id"];
$image = $row["image_url"];
$alt = $row["alt_tag"];
$description = $row["description"];
$thumb = $row["thumb_url"];
$business = $row["business"];

$mainthumb = "./images/270x270/$image.jpg";

echo

"<li>

<div class='gallery_image_container'>

<a href='business-profile.php?business_id=$parent' class='gallery_darken'><img src='$mainthumb' alt='$alt' title='$description' /></a>

</div>

</li>";

}

?> 
```

CSS是这样的：

```
.gallery_container {
margin: 0 0 0 -10px;
padding: 0;
list-style: none;
}

.gallery_container > li {
margin: 0 0 0 10px;
padding: 0;
float: left;
display:inline;
}

div.gallery_image_container{
width:270px;
height:270px;
padding:20px;
margin-bottom:10px;
background-color:white;
-moz-border-radius: 3px;
-webkit-border-radius: 3px;
border-radius: 3px;
-webkit-box-shadow: rgba(0,0,0,.2) 0px 0px 6px;
-moz-box-shadow:  rgba(0,0,0,.2) 0px 0px 6px;
box-shadow:  rgba(0,0,0,.2) 0px 0px 6px;
float:left;
display:block;
}

a.gallery_darken {
display: block;
background: black;
padding: 0;
width:270px;
height:270px;
float:left;
}

a.gallery_darken img {
display: block;
-webkit-transition: all 0.5s linear;
-moz-transition: all 0.5s linear;
-ms-transition: all 0.5s linear;
-o-transition: all 0.5s linear;
transition: all 0.5s linear;
}

a.gallery_darken:hover img {
opacity: 0.7;
} 
```

我对在 li 项目中使用 div 感到不舒服，但不确定我可以使用哪些其他方法来添加边框和阴影，所以这可能是问题的根源。我本质上希望画廊在 ie8 中看起来与在 chrome 中相同，但是尝试将 float:left 和 display:inline 添加到包含的 div 和图像中，我不知道为什么图像不会在 ie8 中对齐. 任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:17:48.253

根据你想看到的，我认为你浮动太多了。仅在需要时使用浮点数，并确保事后清除它们。试试这个：

HTML：

```
<ul class="image-gallery">   
    <li>
        <a href="#" title="Click me!"><img src="somesource.png" alt="Description" /></a>   
    </li>

  <!-- repeat for each image -->

    <li>
        <a href="#" title="Click me!"><img src="somesource.png" alt="Description" /></a>
    </li> 
</ul> 
```

CSS：

```
ul.image-gallery { 
  list-style: none; 
  margin: 0; 
  padding: 0; 
  overflow: hidden; /* clear floats */
}
ul.image-gallery li {
  width:270px;
  height:270px;
  float:left;
  padding:20px;
  margin: 0 10px 10px 0;
  background: #ffffff;
  border-radius: 3px;
  box-shadow:  rgba(0,0,0,.2) 0px 0px 6px;
}
ul.image-gallery a {
  display: block;
  transition: all 0.5s linear;
}
ul.image-gallery a:hover {
  opacity: 0.7;
} 
```

# java - 当 Endpoints 框架停止生成 WEB-INF/*.api 文件时，我如何调试出了什么问题？

> ID：14771081
> 
> 赞同：3
> 
> 时间：2013-02-08T11:00:55.723
> 
> 标签：java, google-app-engine, google-cloud-endpoints

给定 Eclipse 中的 Google Cloud Endpoints 项目，其中 servlet-class 使用 注释，Endpoints 框架会在项目编译成功时`@Api(name="helloworld")`生成一个名为的文件。`war/WEB-INF/helloworld-v1.api`有时即使没有编译错误，也*不会生成这个文件——只有我称之为“GAE端点代码约定错误”。*

**示例 - 工作：**

```
public class TestEntity {
    public String Text;
    public TestEntity(String text){
        Text = text;
    }
}

@ApiMethod
public TestEntity getTestEntity(){
    return new TestEntity("Hello world"); 
} 
```

**示例 - 不工作：**

```
// The TestEntity-class is unchanged
@ApiMethod
public TestEntity getTestEntity(String input){
    return new TestEntity("Hello world"); 
} 
```

后一个示例的问题是我将 String 参数作为输入而没有使用`@Named`. 我知道在这个例子中，但可能还有其他情况并不那么明显。

是否有任何地方可以读取某种错误日志，说明为什么没有生成 .api 文件？

虽然按照惯例我是代码的粉丝，但如果我不能得到关于我做错了什么的反馈，那真的会让编程效率倒退一步。Eclipse 提供编译器错误反馈。Google Cloud Endpoints Framework 应提供 Code-By-Convention-Rule-Breaking 反馈。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T19:34:23.507

当代码生成失败时，目前没有良好的日志记录或错误消息，尽管它是（如果不是大多数）请求的功能之一。在此期间，这里列出了常见的失败案例：

1.  **返回类型无效。**返回类型必须是符合 JavaBean 约定的对象，并且不允许使用 、 和`Object`等`String`类型`Integer`。
2.  **一种或多种参数类型无效。**方法在`POST`主体中最多可以接受一个对象，并且该对象也应该符合 JavaBean 约定。方法可以通过查询字符串（使用`@Named`注释）接受零个或多个参数，并且这些参数必须是标量类型（例如`String`, `Integer`）。
3.  **API、方法或参数的名称无效。**API、方法和参数的命名应与以下正则表达式匹配：`[a-z]+[A-Za-z0-9]*`. 约定还建议使用`lowerCamelCase`命名（虽然`alllowercase`是允许的）。

# accessibility - 为屏幕阅读器定义文本框的读出值

> ID：14771084
> 
> 赞同：1
> 
> 时间：2013-02-08T11:01:05.543
> 
> 标签：accessibility, htmlcontrols

处理可访问性，有一个包含日期的文本框（格式取决于选择的语言）。屏幕阅读器会逐字阅读文本框中当前的日期（“十二斜线哦五斜线二十三”表示 2013 年 5 月 12 日）。

1) 如何让阅读器程序读出“12 May 23”？

2) 如何告诉读者输入文本框所需的格式？例如“日-斜线-月-斜线-年”

我是这个主题的新手，不熟悉这些概念。非常欢迎任何想法或提示、细节或概念的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:44:24.270

1）你不能。我不会担心的。

2）屏幕阅读器需要`<label>`正确阅读，你可以这样做

```
<label for="date">Birthday (DD/MM/YYYY)</label>
<input id="date" name="date" type="text"/> 
```

如果要隐藏格式，可以执行以下操作：

```
 <label for="date">Birthday <span class="hidden">DD/MM/YYY</span></label> 
```

隐藏的地方是：

```
.hidden {
 position: absolute;
 top: 0;
 left: -999px;
} 
```

# javascript - 使用动态范围输入速度和重复淡入淡出

> ID：14771088
> 
> 赞同：0
> 
> 时间：2013-02-08T11:01:19.190
> 
> 标签：javascript, jquery, html

我正在尝试使用范围按钮控制我的淡入淡出 div 的速度和重复，但我很困惑如何做到这一点。如果您有任何想法，请帮助我。这是我的代码。

```
<script>
$(document).ready(function(){
    var faderIndex = 0,
    faders = $('.fadey');
    function nextFade() {
        $(faders[faderIndex]).fadeOut(2000, function() {
            faderIndex++;
            if (faderIndex >= faders.length)
                faderIndex = 0;
            $(faders[faderIndex]).fadeIn(3000, nextFade);
        });
    }
    nextFade();
});
</script>
<body id="d1" style="text-align:center" >
    <div class="fadey"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:11:53.273

不清楚太多，但你希望 div 会淡出有一个索引

像 ：

**脚本**

```
$(document).ready(function(){
    var faderIndex = 1,
    faders = $('.fadey');
    function nextFade(faderIndex) {
        $(faders).eq(faderIndex).fadeOut(2000, function() {
            faderIndex++;
            if (faderIndex >= faders.length)
                faderIndex = 0;
            $(faders).eq(faderIndex).fadeIn(3000, nextFade);
        });
    }
    nextFade(faderIndex);
}); 
```

**HTML**

```
<div class="fadey">fadey 1</div>
<div class="fadey">fadey dfdsfd sdsf sdfds f</div> 
```

这是现场演示[http://jsfiddle.net/Ntk6a/](http://jsfiddle.net/Ntk6a/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:36:59.543

**按钮方法（[jsfiddle](http://jsfiddle.net/KYaAj/1/)）**

首先，我们将在您的 HTML 中制作一些按钮

```
<button id="fast">Fast</button>
<button id="normal">Normal</button>
<button id="slow">Slow</button>
<div id="fadey1" class="fadey"></div>
<div id="fadey2" class="fadey"></div> 
```

接下来，我们将绑定按钮上的单击处理程序以更改一些变量，这些变量将替换您在函数中使用的静态毫秒值。

```
$(document).ready(function () {
    var faderIndex = 0,
        faderOutSpeed = 2000,
        faderInSpeed = 3000,
        faders = $('.fadey');

    $('button#fast').click(function () {
        faderOutSpeed = 200;
        faderInSpeed = 300;
    });

    $('button#normal').click(function () {
        faderOutSpeed = 600;
        faderInSpeed = 900;
    });

    $('button#slow').click(function () {
        faderOutSpeed = 2000;
        faderInSpeed = 3000;
    });

    function nextFade() {
        $(faders[faderIndex]).fadeOut(faderInSpeed, function () {
            faderIndex++;
            if (faderIndex >= faders.length) faderIndex = 0;
            $(faders[faderIndex]).fadeIn(faderOutSpeed, nextFade);
        });
    }
    nextFade();
}); 
```

**HTML5 范围输入法 ( [jsfiddle](http://jsfiddle.net/75yKs/2/) )**

首先，我们将在您的 HTML 中使用默认值和范围限制进行范围输入。

```
<input id="range" type="range" value="2000" min="200" max="4000" step="200" />
<div id="fadey1" class="fadey"></div>
<div id="fadey2" class="fadey"></div> 
```

接下来，我们将在范围输入上绑定一个更改处理程序，以更改`faderSpeed`在淡入淡出动画中用作速度的变量。如果您想要不同的`fadeOut`速度值，您可以进行一些计算或添加第二个范围输入。

```
$(document).ready(function () {
    var faderIndex = 0,
        faderSpeed = getRangeValue(),
        faders = $('.fadey');

    $('input#range').change(function () {
        faderSpeed = getRangeValue();
    });

    function getRangeValue() {
        return parseInt($('input#range').val(), 10);
    }

    function nextFade() {
        $(faders[faderIndex]).fadeOut(faderSpeed, function () {
            faderIndex++;
            if (faderIndex >= faders.length) faderIndex = 0;
            $(faders[faderIndex]).fadeIn(faderSpeed, nextFade);
        });
    }
    nextFade();
}); 
```

# javascript - 是否可以使用网站的 url 在网站上运行 javascript 函数？

> ID：14771090
> 
> 赞同：0
> 
> 时间：2013-02-08T11:01:18.907
> 
> 标签：javascript, function, url

假设我们有一个网站叫做`example.com`

在这个网站上，我们有一个按钮，当点击它时运行一个 javascript 函数让我们说`myFunction()`

是否可以从 Firefox 的 url 栏创建一个 http 请求，以便当这个 http 请求完成时，该按钮也会被单击？

例如，如果我可以将此 url 包含在浏览器的 url 栏中，那就太好了

`example.com + javascript:myFunction()`

这将在加载页面后运行该功能，而无需我单击按钮

但是这对我不起作用。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:03:04.793

您可以使用`window.onload`：

```
window.onload = function() {
    myFunction();
} 
```

只要 URL 加载`myFunction`就会执行，但除非使用某种*错误*的服务器端逻辑，否则您不能告诉页面在加载后执行一些任意 JavaScript，而页面不知道它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:03:27.710

不，那是不可能的。

您不能在 url 中附加 JS。但是，您可以使用 JS*而不是*url，所以`javascript:myFunction()`

# angularjs - 从 AngularJS url 中删除片段标识符（# 符号）

> ID：14771091
> 
> 赞同：257
> 
> 时间：2013-02-08T11:01:24.333
> 
> 标签：angularjs, url, ngroute

是否可以从 angular.js URL 中删除 # 符号？

当我更改视图并使用参数更新 URL 时，我仍然希望能够使用浏览器的后退按钮等，但我不想要 # 符号。

教程 routeProvider 声明如下：

```
angular.module('phonecat', []).
  config(['$routeProvider', function($routeProvider) {
  $routeProvider.
  when('/phones', {templateUrl: 'partials/phone-list.html',   controller: PhoneListCtrl}).
  when('/phones/:phoneId', {templateUrl: 'partials/phone-detail.html', controller: PhoneDetailCtrl}).
  otherwise({redirectTo: '/phones'});
}]); 
```

我可以编辑它以在没有# 的情况下具有相同的功能吗？

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2013-02-08T11:17:32.997

是的，您应该配置[`$locationProvider`](https://docs.angularjs.org/api/ng/provider/$locationProvider)并设置[`html5Mode`](https://docs.angularjs.org/api/ng/provider/$locationProvider)为`true`：

```
angular.module('phonecat', []).
  config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {

    $routeProvider.
      when('/phones', {templateUrl: 'partials/phone-list.html',   controller: PhoneListCtrl}).
      when('/phones/:phoneId', {templateUrl: 'partials/phone-detail.html', controller: PhoneDetailCtrl}).
      otherwise({redirectTo: '/phones'});

    $locationProvider.html5Mode(true);

  }]); 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-12-07T07:30:27.067

请务必检查浏览器对 html5 历史 API 的支持：

```
 if(window.history && window.history.pushState){
    $locationProvider.html5Mode(true);
  } 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2015-01-08T09:41:11.690

要删除**漂亮 URL**的 Hash 标记并让您的**代码在缩小后正常工作，**您需要像下面的示例那样构建代码：

```
jobApp.config(['$routeProvider','$locationProvider',
    function($routeProvider, $locationProvider) {
        $routeProvider.
            when('/', {
                templateUrl: 'views/job-list.html',
                controller: 'JobListController'
            }).
            when('/menus', {
                templateUrl: 'views/job-list.html',
                controller: 'JobListController'
            }).
            when('/menus/:id', {
                templateUrl: 'views/job-detail.html',
                controller: 'JobDetailController'
            });

         //you can include a fallback by  including .otherwise({
          //redirectTo: '/jobs'
        //});

        //check browser support
        if(window.history && window.history.pushState){
            //$locationProvider.html5Mode(true); will cause an error $location in HTML5 mode requires a  tag to be present! Unless you set baseUrl tag after head tag like so: <head> <base href="/">

         // to know more about setting base URL visit: https://docs.angularjs.org/error/$location/nobase

         // if you don't wish to set base URL then use this
         $locationProvider.html5Mode({
                 enabled: true,
                 requireBase: false
          });
        }
    }]); 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-11-19T07:15:28.117

`$locationProvider.html5Mode(true)`设置后，我在 web.config 中写出一条规则`app.js`。

希望，帮助某人。

```
 <system.webServer>
    <rewrite>
      <rules>
        <rule name="AngularJS" stopProcessing="true">
          <match url=".*" />
          <conditions logicalGrouping="MatchAll">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
            <add input="{REQUEST_URI}" pattern="^/(api)" negate="true" />
          </conditions>
          <action type="Rewrite" url="/" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer> 
```

在我的 index.html 中，我将其添加到`<head>`

```
<base href="/"> 
```

不要忘记在服务器上安装 iis 的 url 重写器。

此外，如果您使用 Web Api 和 IIS，此匹配 url 将无法正常工作，因为它会更改您的 api 调用。因此，添加第三个输入（条件的第三行）并给出一个模式，该模式将排除来自`www.yourdomain.com/api`

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-09-16T23:28:31.660

如果您在带有 AngularJS 的 MVC 的 .NET 堆栈中，那么您必须执行以下操作才能从 url 中删除“#”：

1.  在 _Layout 页面中设置基本 href：`<head> <base href="/"> </head>`

2.  然后，在您的 Angular 应用程序配置中添加以下内容：`$locationProvider.html5Mode(true)`

3.  上面将从 url 中删除 '#' 但页面刷新将不起作用，例如，如果你在“yoursite.com/about”页面刷新会给你一个 404。这是因为 MVC 不知道角度路由和 MVC 模式它将查找 MVC 路由路径中不存在的“关于”的 MVC 页面。解决方法是将所有 MVC 页面请求发送到单个 MVC 视图，您可以通过添加捕获所有

网址：

```
routes.MapRoute(
    name: "App",
    url: "{*url}",
    defaults: new {
        controller = "Home", action = "Index"
    }
); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-06-05T14:48:08.247

您可以调整 html5mode 但这仅适用于页面的 html 锚点中包含的链接以及 url 在浏览器地址栏中的外观。尝试从页面外部的任何位置请求没有主题标签（带或不带 html5mode）的子页面将导致 404 错误。例如，以下 CURL 请求将导致页面未找到错误，与 html5mode 无关：

```
$ curl http://foo.bar/phones 
```

尽管以下将返回根/主页：

```
$ curl http://foo.bar/#/phones 
```

这样做的原因是，在请求到达服务器之前，主题标签之后的任何内容都被剥离了。因此，对 的请求`http://foo.bar/#/portfolio`作为对 的请求到达服务器`http://foo.bar`。服务器将响应 200 OK 响应（大概），`http://foo.bar`代理/客户端将处理其余的。

因此，如果您想与他人共享网址，您别无选择，只能包含主题标签。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-04-14T07:28:15.537

遵循 2 个步骤 -
1\. 首先在您的应用配置文件中设置**$locationProvider.html5Mode(true) 。**
例如 -
`angular.module('test', ['ui.router']) .config(function($stateProvider, $urlRouterProvider, $locationProvider) { **$locationProvider.html5Mode(true);** $urlRouterProvider.otherwise('/'); });`

2.Second在你的主页中设置**<base> 。**
例如->
`**<base href="/">**`

对于不支持 HTML5 History API 的浏览器，$location 服务将自动回退到 hash-part 方法。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-01-19T21:09:14.423

我的解决方案是创建 .htaccess 并使用 #Sorian 代码.. 没有 .htaccess 我无法删除 #

```
RewriteEngine   On
RewriteBase     /
RewriteCond     %{REQUEST_URI} !^(/index\.php|/img|/js|/css|/robots\.txt|/favicon\.ico)
RewriteCond     %{REQUEST_FILENAME} !-f
RewriteCond     %{REQUEST_FILENAME} !-d
RewriteRule     ./index.html [L] 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-06T06:11:42.913

根据文档。您可以使用：

```
$locationProvider.html5Mode(true).hashPrefix('!'); 
```

> 注意：如果您的浏览器不支持 HTML 5。别担心 :D 它有回退到 hashbang 模式。所以，你不需要`if(window.history && window.history.pushState){ ... }`手动检查

例如：如果您单击：`<a href="/other">Some URL</a>`

**在 HTML5 浏览器**中：angular 会自动重定向到`example.com/other`

**在非 HTML5 浏览器**中：角度将自动重定向到`example.com/#!/other`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-02-25T06:14:54.413

从 index.html 开始删除所有内容`#`，`<a href="#/aboutus">About Us</a>`所以它必须看起来像`<a href="/aboutus">About Us</a>`。现在在 index.html 的 head 标记中写`<base href="/">`在最后一个*元标记*之后。

现在在你的路由 js 中注入`$locationProvider`并编写`$locatonProvider.html5Mode(true);` 类似这样的东西：-

```
app.config(function ($routeProvider, $locationProvider) {
    $routeProvider
        .when("/home", {
            templateUrl: "Templates/home.html",
            controller: "homeController"
        })
            .when("/aboutus",{templateUrl:"Templates/aboutus.html"})
            .when("/courses", {
                templateUrl: "Templates/courses.html",
                controller: "coursesController"
            })
            .when("/students", {
                templateUrl: "Templates/students.html",
                controller: "studentsController"
            })
        $locationProvider.html5Mode(true);
    }); 
```

有关更多详细信息，请观看此视频 [https://www.youtube.com/watch?v=XsRugDQaGOo](https://www.youtube.com/watch?v=XsRugDQaGOo)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-12-28T11:14:11.467

猜猜这真的为时已晚。但是将以下配置添加到 app.module 导入中就可以了：

```
RouterModule.forRoot(routes, { useHash: false }) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-02-10T18:10:17.830

此答案假定您使用 nginx 作为反向代理，并且您已经将 $locationProvider.html5mode 设置为 true。

-> 对于那些可能仍在为上面所有很酷的东西而苦苦挣扎的人。

当然，@maxim grach 解决方案工作正常，但是对于如何响应不希望首先包含主题标签的请求的解决方案，可以做的是检查 php 是否发送 404，然后重写 url。以下是nginx的代码，

在php位置，检测404 php错误并重定向到另一个位置，

```
location ~ \.php${
  ...
  fastcgi_intercept_errors on;
  error_page 404 = /redirect/$request_uri ;
} 
```

然后在重定向位置重写 url 并 proxy_pass 数据，当然，将您的网站 url 放在我博客 url 的位置。（要求：只有在你尝试过之后才提出这个问题）

```
location /redirect {
  rewrite ^/redirect/(.*) /$1;
  proxy_pass http://www.techromance.com;
} 
```

并看到魔法。

它绝对有效，至少对我来说。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-17T20:23:23.980

第 1 步：将 $locationProvider 服务注入应用配置的构造函数

第 2 步：将代码行 $locationProvider.html5Mode(true) 添加到应用配置的构造函数中。

第三步：在容器（登陆、母版或布局）页面中，添加html标签如`<base href="/">`标签内。

第 4 步：从所有锚标签中删除所有用于路由配置的“#”。例如，href="#home" 变为 href="home"；href="#about" 变为 herf="about"；href="#contact " 变成 href="联系人"

```
 <ul class="nav navbar-nav">
     <li><a href="home">Home</a></li>
     <li><a href="about">About us</a></li>
     <li><a href="contact">Contact us</a></li>
</ul> 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-04-21T06:28:28.227

Just add `$locationProvider` In

```
.config(function ($routeProvider,$locationProvider) 
```

and then add `$locationProvider.hashPrefix('');` after

```
.otherwise({
        redirectTo: '/'
      }); 
```

That's it.

# jquery - 通过捕获数据属性创建对象数组

> ID：14771094
> 
> 赞同：3
> 
> 时间：2013-02-08T11:01:36.430
> 
> 标签：jquery, arrays, collections

我做了一个小提琴。[http://jsfiddle.net/Zfaf6/](http://jsfiddle.net/Zfaf6/)

我正在尝试使用数组，但似乎只输出第一个对象。

有没有可以指教的，谢谢。

**我的jQuery**

```
$("a.download-all").on('click', function () {

    var downloads = $('a[data-download]').attr('data-download');

    // This is the example output of the data in the variable...

    $('#varObj').html(downloads);

}); 
```

**我的剧本**

```
<div id="images">

    <a href="#" data-download="http://image.com/1.jpg"><img src="images/x.gif" alt=""/></a>
    <a href="#" data-download="http://image.com/2.jpg"><img src="images/x.gif" alt="" /></a>
    <a href="#" data-download="http://image.com/3.jpg"><img src="images/x.gif" alt=""/></a>
    <a href="#" data-download="http://image.com/4.jpg"><img src="images/x.gif" alt="" /></a>
    <a href="#" data-download="http://image.com/5.jpg"><img src="images/x.gif" alt=""/></a>
    <a href="#" data-download="http://image.com/6.jpg"><img src="images/x.gif" alt="" /></a>

<div>

<p><a href="#" class="download-all">Download all images</a></p>

<p id="varObj"></p> 
```

[http://jsfiddle.net/Zfaf6/](http://jsfiddle.net/Zfaf6/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T11:05:20.910

jQuery`attr()`将作为“getter”（[并且根据文档](http://api.jquery.com/attr)）返回匹配的*第一个元素的值；*这就是为什么你只看到一个。

要么使用 迭代匹配对象[`each()`](http://api.jquery.com/each)，要么使用[`map()`](http://api.jquery.com/map);

```
$("a.download-all").on('click', function () {

    var downloads = $('a[data-download]').map(function () {
        return $(this).attr('data-download');
    });

    // This is the example output of the data in the variable...
    $('#varObj').html(downloads.get().join(' '));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:06:29.383

`**[LIVE DEMO](http://jsfiddle.net/Zfaf6/2/)**`

```
var downloads = [] ;

$("a.download-all").on('click', function () {

    $('a[data-download]').each(function(){   
        downloads.push( $(this).attr('data-download') );        
    });

    $('#varObj').html(downloads);

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T11:07:23.703

调用 set 的 attr() 只会返回第一个 attr()。此外，使用`data()`它更容易阅读。

因此，代码只是创建了一个空数组，然后使用`each`我们将每个项目的`download`值推送到数组中。您的其余代码是相同的。

```
$("a.download-all").on('click', function () 
{
    var downloads = [];

    $('a[data-download]').each(function()
    {
        downloads.push( $(this).data('download') );
    });

    // This is the example output of the data in the variable...

    $('#varObj').html(downloads);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T11:08:41.597

```
var downloads = $('a[data-download]').map(function(){   
   return  $(this).data('download');        
});
$("#varObj").html(downloads.join("-")); 
```

# python - python无效语法的新手*更新

> ID：14771095
> 
> 赞同：2
> 
> 时间：2013-02-08T11:01:41.007
> 
> 标签：python, syntax

我正在尝试为我的一个课程完成一个程序，但我不断收到无效的语法，python 对我来说是非常新的，所以请忍受我的无知。

无效语法在“if guess==(num_x+num_y):”中的冒号处弹出，如果有人能提供帮助，我将不胜感激。

* * *

update* 修复了括号谢谢 abarnert 但现在我有以下内容`SyntaxError`

```
Traceback (most recent call last):
  File "C:\Users\Franz\Desktop\randomstudy.py", line 48, in <module>
    main()
  File "C:\Users\Franz\Desktop\randomstudy.py", line 25, in main
    guess=int(input(num_x, "-", num_y, "=\n"))
TypeError: input expected at most 1 arguments, got 4 
```

我已更新以下代码以包含括号。

```
def main():
    import random
    num_x=random.randint(-50,50)
    num_y=random.randint(-50,50)
    op=random.randint(0,3)
    control=True 
    print("Welcome! Here is your random problem:\n")   
    if op==0:
        while True:
            guess=int(input(num_x, "+", num_y, "=\n"))
            if guess==(num_x+num_y):
                print("Congratulations! You have answered the problem correctly!")
                break     
            else:
                print("I’m sorry, that is not correct.  Please try again.")
    elif op==1:
        while True:
            guess=int(input(num_x, "-", num_y, "=\n"))
            if guess==(num_x-num_y):
                print("Congratulations! You have answered the problem correctly!")
                break     
            else:
                print("I’m sorry, that is not correct.  Please try again.")
    elif op==2:
        while True:
            guess=int(input(num_x, "*", num_y, "=\n"))
            if guess==(num_x*num_y):
                print("Congratulations! You have answered the problem correctly!")
                break    
            else:
                print("I’m sorry, that is not correct.  Please try again.")
    elif op==3:
        while True:
            guess=int(input(num_x, "/", num_y, "=(Please round to two decimal places)\n"))
            if guess==(num_x/num_y):
                print("Congratulations! You have answered the problem correctly!")
                break    
            else:
                print("I’m sorry, that is not correct.  Please try again.")

main() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T11:02:34.563

在那之前的那一行缺少一个')'：

```
 guess=int(input(num_x, "+", num_y, "=\n")
    if guess==(num_x+num_y): 
```

正如 Igor 在评论中指出的那样，您还有其他行也缺少右括号，您也必须修复它们，否则您只会再写`SyntaxError`几行。您可能需要考虑使用有助于平衡括号和类似问题的编辑器——它肯定让我的生活更轻松。

这在 Python 中并不像在大多数其他语言中那样常见，但它确实经常发生，以至于你应该习惯于在遇到莫名其妙的`SyntaxError`.

（在大多数语言中，几乎任何表达式或语句都可以继续到下一行。这在 Python 中是不正确的——但如果有一个开括号，*则*允许带括号的表达式继续到下一行。）

# c# - VBA 日期表达式

> ID：14771106
> 
> 赞同：0
> 
> 时间：2013-02-08T11:02:16.103
> 
> 标签：c#, winforms, vba, report, reportviewer

我试图在 RDLC 报告中显示当前周日期。我在每个星期一至星期五的列标题中使用此 VBA 表达式 -

```
="Wed " & Day(Parameters!weekStart.Value)-WeekDay(Parameters!weekStart.Value,FirstDayOfWeek.System) + 4
="Thu " & Day(Parameters!weekStart.Value)-WeekDay(Parameters!weekStart.Value,FirstDayOfWeek.System) + 5
="Fri " & Day(Parameters!weekStart.Value)-WeekDay(Parameters!weekStart.Value,FirstDayOfWeek.System) + 6 
```

这很好用，直到我到达一周中 onth 变化的一周，它会继续计数。如果所选周中该月的最后一天是 30 日星期二，它将继续 - 31 日星期二、32 日星期二、33 日星期二……

有什么想法可以让我正确显示吗？

谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:13:55.243

我用下面的 VAB 表达式解决了这个问题 -

```
="Mon " & Day(DateValue(Parameters!weekStart.Value).AddDays(0))

="Tue " & Day(DateValue(Parameters!weekStart.Value).AddDays(1))

="Wed " & Day(DateValue(Parameters!weekStart.Value).AddDays(2))

="Thu " & Day(DateValue(Parameters!weekStart.Value).AddDays(3))

="Mon " & Day(DateValue(Parameters!weekStart.Value).AddDays(4)) 
```

# foursquare - /venues/suggestcompletion 端点返回空数组

> ID：14771107
> 
> 赞同：2
> 
> 时间：2013-02-08T11:02:18.697
> 
> 标签：foursquare

`/venues/suggestcompletion`一段时间以来，我们一直在使用端点来实现自动完成功能。

它最近开始为我们所有的查询返回空数组。

以下是一组 GET 参数示例：

`{ limit = 20; ll = "52.485799,13.437771"; query = ostba; }`

产生这个网址：

`https://api.foursquare.com/v2/venues/suggestcompletion?client_id=OUR_CLIENT_ID&client_secret=OUR_CLIENT_SECRET&v=20120801&query=ostba&ll=52.485799,13.437771`

和相应的输出：

`meta = { code = 200; }; response = { minivenues = ( ); };`

我知道`/venues/suggestcompletion`这是实验性的，但我找不到 API 更改的通知。这破坏了我们在生产中的应用程序的场地搜索功能。我们将不胜感激任何指针。

非常感谢……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T23:55:20.970

这是昨天引入的一个临时错误。我们相信我们已经解决了这个问题——很抱歉！

# joomla - Joomla 2.5 研讨会列表

> ID：14771108
> 
> 赞同：0
> 
> 时间：2013-02-08T11:02:19.737
> 
> 标签：joomla, joomla2.5, joomla-extensions

我已经搜索了整个 Joomla 扩展目录。但是找不到符合我要求的组件。

我需要一个用于研讨会列表的 joomla 组件。

发布研讨会和培训。该网站的访问者应该能够发布培训和研讨会（但在管理员批准后发布）。

我也可以购买商业组件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:29:06.750

您可以使用像 Mosets Tree 这样的目录组件。它允许访问者发布需要管理员批准的列表，并带有所有常见的类别功能、模块等。每个列表都有自己的专用页面，其中包含信息、电子邮件、画廊等，所有这些都是可切换的。

[http://extensions.joomla.org/extensions/directory-a-documentation/directory/233](http://extensions.joomla.org/extensions/directory-a-documentation/directory/233)

我认为 Sobi Pro 提供了类似的功能

[http://extensions.joomla.org/extensions/directory-a-documentation/directory/16649](http://extensions.joomla.org/extensions/directory-a-documentation/directory/16649)

# codeigniter - codeigniter的多语言设置

> ID：14771112
> 
> 赞同：2
> 
> 时间：2013-02-08T11:02:40.917
> 
> 标签：codeigniter, configuration

我正在使用本教程[http://sumonbd.wordpress.com/2009/09/16/develop-multilingual-site-using-codeigniter-i18n-library/](http://sumonbd.wordpress.com/2009/09/16/develop-multilingual-site-using-codeigniter-i18n-library/)在 codeigniter 中使用多语言。

我已按照正确列出的说明进行操作。它没有给我任何错误，但我不能说它工作正常。当我浏览 mysite.com/en/about 和 mysite.com/fr/about 时，它总是给我默认语言，即英语。我想知道是否需要设置任何配置才能正常工作。

我在 config.php 中考虑这个

$config['语言']

和

这在 autoload.php

$autoload['语言']

我必须配置这些吗？或任何其他配置以正确使用多语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:42:46.200

抱歉，您没有提供足够的信息来说明您所做的事情。但我会试着回答。

我已经尝试了更新的教程，它就像一个魅力。

![在此处输入图像描述](../Images/e6fdeea2fad9ad06addd371f787afe14.png)

**首先**，您指向一个过时的教程。这是您的更新链接的来源：[source](http://maestric.com/doc/php/codeigniter_i18n)

**其次**，以 MY_ （默认配置）为前缀的文件是核心类（参见[核心类](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)）而不是库，应该放在 application/core 目录中。

**第三**，在您的视图文件中，尽量避免使用 php 短标签 ( `<?=$variabel;?>`)，因为并非所有服务器配置都启用 php 短标签。改用普通`echo`标签`<?php echo $var; ?>`。更长，但在编写标准模式时值得。

正如我之前所说，如果您遵循更新的教程，您的脚本应该可以像我的一样工作。我希望这会有所帮助。对不起我的英语，如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T05:16:56.467

在分析了 CI 的代码和博客中的代码后，我提出了这个解决方案。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class About extends CI_Controller {

    function index()
    {
        // you might want to just autoload these two helpers
        $this->load->helper('language');
        $this->load->helper('url');

    $this->getLang();
        $this->load->view('about');
    }

    function getLang(){
        $url =  $_SERVER['REQUEST_URI'];
        $lang = explode("/", $url);

        if($lang[2] == 'en'){
        // load language file
            return $loadLang = $this->lang->load('english','english');
        }
        else if($lang[2] == 'fr'){
        // load language file
            return $loadLang = $this->lang->load('french','french');
        }
        else{
            // load language file
            return $loadLang = $this->lang->load('english','english');
        }

        return false;
    }

} 
```

我创建了加载语言文件的函数 getLang()。

```
$this->lang->load('language_file','language_folder'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T12:57:47.617

i think you should have a look at [URI-Language-Identifier](https://github.com/EllisLab/CodeIgniter/wiki/URI-Language-Identifier) i use it for my multilingual projects, and its working as it should.

# c# - 重载动态代码/重载类型

> ID：14771115
> 
> 赞同：0
> 
> 时间：2013-02-08T11:02:46.553
> 
> 标签：c#, .net, dynamic, reflection, .net-assembly

我在当前项目中遇到了一些问题，如果有人可以为我提供一些见解或可能的建议，我将不胜感激。

我的项目是一项服务，它正在执行用户脚本。脚本是用 C# 编写的，我使用 CodeDomProvider 在运行时构建程序集。程序集包含单个类。

```
public Script : ScriptBase
{
    public override void Run(){}
} 
```

允许用户更改脚本，如果我检测到更改。我重建创建 ScriptBase 子项的新实例的内容。我知道带有脚本 S1 的原始程序集 A1 仍然加载在当前的 AppDomain 中，但这是我愿意付出的代价。这种情况下没有任何问题。

我想为用户定义的库添加一个功能（也可以在运行时编辑）。所以现在的问题是我有一个脚本 S1，它正在使用库 L1。如果用户更改 L1，我显然必须重建所有脚本。问题来了：

```
build L1 with type T1
build S1 --depends--> L1
(use S1)
build L2 with type T1
build S2 --depends--> L2 = crashes type T1 is defined in L1 and L2
(use S1) //It passes through if I didn't use S1 for the first time 
```

我有以下问题

1.  我的第一个场景怎么会起作用。即我一遍又一遍地构建和加载相同类型的程序集，一切正常

    2.如果我在构建 S1 后不使用它，我可以构建 S2，即使当我检查模块时，我可以看到所有程序集 L1、S1、L2、S2 都已加载。显然，如果我加载程序集，但我不以某种方式使用它，则“已加载程序集，但未加载类型”。到底发生了什么？

    3.你有什么建议来解决我的问题？看起来最合乎逻辑的是使用临时 AppDomain，但我没有任何经验，它看起来很复杂，如果有更简单的解决方案，我宁愿使用它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:17:40.523

我认为 AppDomain 是最好的选择。正如 Marc 所说，一旦你知道自己在做什么，它们真的没那么糟糕，它只是找到我发现问题的信息。

现在，无耻的插件：我为 StackOverflow 上的另一个问题创建了这个存储库，以帮助反射加载程序集，它应该涵盖设置 AppDomain 并与它进行跨边界通信的基础知识：[Plugin Demo](https://github.com/Pondidum/PluginDemo)

从您的问题来看，您可以放心地忽略 Shadow Copying 部分，而只需使用 Host 项目的 Scanner/communication 部分。

# php - 使用“phpmailer”的 PHP 批量邮件落在垃圾邮件中

> ID：14771116
> 
> 赞同：1
> 
> 时间：2013-02-08T11:02:49.273
> 
> 标签：php, phpmailer, spam, bulk-mail

我正在使用以下 PHP 代码发送 BULK MAIL 。但邮件似乎登陆垃圾邮件。我正在使用“phpmailer”类发送邮件。

```
require 'mailer/class.phpmailer.php';
$mail = new PHPMailer();
    $mail->IsSMTP();
    $mail->SMTPAuth   = true;
    $mail->SMTPSecure = "ssl";
    $mail->Host       = "smtp.gmail.com";
    $mail->Port       = 465;
    $mail->Username   = "info@gmail.com";
    $mail->Password   = "Bexwa44Puciz";       // GMAIL password
$mail->AddReplyTo('info@gmail.com', 'Info');
$Appname = 'info.com';
$_subject="Newsletter From: ".$Appname;
$ema=",";
    $to_bcc=explode(",",$ema);
$mail->AddCustomHeader($headers); 
foreach($to_bcc as $tb){
    $mail->AddBCC($tb, $dname);
}
$_body ="News content";//$hid;
$mail->FromName = "info.com";
    $mail->From="inf@gmail.com";
    $mail->Subject = $_subject;
    $mail->AltBody = "To view the message, please use an HTML compatible email viewer!";
    $mail->MsgHTML($_body);
    if($mail->Send()){ 
    echo "Done"; 
}else {
    echo "Failed";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:56:05.720

我也经历过。在我进行日常数据维护的同时，我的网站每天都会向用户发送几次数据确认请求。我向我的 Gmail 地址发送了一条测试邮件，发现**如果您通过 Gmail 网络邮件界面阅读邮件，它有时会告诉您*为什么*该邮件是垃圾邮件。**很有用。它给出了原因“来自 hp19.hostpapa.com 的很多邮件都是垃圾邮件”。我在一个预算共享服务器上，我假设有一百个其他垃圾邮件发送者在我的同一台机器上购买了帐户，并将其用于作恶。我的网站是非营利性的，因此不能选择购买专用盒子来避免垃圾邮件。所以...

我的解决方案是将我的 CMS 更改为根本不使用 PHP mail()。现在我的 CMS 只显示消息和带有*主题*参数集的*mailto:*链接。现在我的过程是按 CTRL+C，单击链接，按 CTRL+V，然后按发送。使用我的邮件客户端 Thunderbird 从我计算机的 IP 地址（不在任何黑名单上）发送消息。

 *与我的 CMS 使用 PHP mail() 为我发送消息时相比，这只花了我几秒钟的时间。但是我发现我收到了更多的回复，所以我很高兴绝大多数邮件没有被垃圾邮件分箱。

**我很欣赏这种手动解决方案不适用于自动批量消息传递，但对于共享服务器上通过单击触发每条消息的小型非营利网站，我认为值得分享。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:11:04.623

进入某人的垃圾邮件箱的原因有很多。由于您或您服务器上的其他用户，您的电子邮件服务器可能被列入黑名单。您可以在[http://mxtoolbox.com/blacklists.aspx查看](http://mxtoolbox.com/blacklists.aspx)

还要检查 DNS 中的 SPF 记录*

# c# - Monotouch 动态追加记录到 UItableview

> ID：14771119
> 
> 赞同：1
> 
> 时间：2013-02-08T11:03:05.347
> 
> 标签：c#, xamarin.ios

我在 monotouch 中遇到了一个问题，我一次从 Web 服务获取 20 条记录。最初我的 tablview 显示 20 条记录。现在，当用户滚动并到达页面末尾可能在第 17 行时，我想调用 Web 服务并获取，但我未能在 UITableViewDelegate 中找到此类事件。

我很困惑我应该覆盖哪种方法来挂钩事件。

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:17:12.700

*   在iOS调用方法时（MonoTouch中和的`UITableViewSource`组合） ，检查是否大于16，调用服务器的方法；`UITableViewDelegate``UITableViewDataSource``GetCell``indexPath`
*   其他解决方案是覆盖`Scrolled`方法（原因`UITableView`是 的子类`UIScrollView`）并检查用户是否`UITableViewCell`通过 滚动到所需的坐标`scrollView.ContentOffset.Y`。

请注意，为了获得更好的用户体验，我建议您将新行添加到`UITableView`via`InsertRows`方法加上更新`UITableViewSource`而不是更新`UITableViewSource`和调用`UITableView.ReloadData()`。

# javascript - 在 mvc 的运行时将 css 类应用于菜单项

> ID：14771121
> 
> 赞同：1
> 
> 时间：2013-02-08T11:03:08.197
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-4

我正在开发一个 MVC4 应用程序

我有以下菜单项

```
<ul class="menu left">
                <li>@Html.ActionLink("Home", "Index", new { Controller = "Home" }, new { @class = "active" })</li>
                <li>@Html.ActionLink("About Us", "About", new { Controller = "Home" })</li>
                <li>@Html.ActionLink("Services", "Services", new { Controller = "Home" })</li>      
                <li>@Html.ActionLink("Post Job", "Create", new { Controller = "JobPosting" })</li>
                <li>@Html.ActionLink("Job Search", "Index", new { Controller = "JobPosting" })</li>
                <li>@Html.ActionLink("Contact Us", "Contact", new { Controller = "Home" })</li>
           </ul> 
```

现在我想如果我点击 Home 以外的项目，它的 css 类会变为活动状态。基本上我只想改变菜单项的颜色我怎样才能动态地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:28:26.877

如果您想根据 Action 或 Controller 更改 css，您可以使用

```
@{
    var controller = ViewContext.RouteData.Values["Controller"].ToString();
    var action = ViewContext.RouteData.Values["Action"].ToString();
}

<li> 
    @if (action == "Home") { 
       @Html.ActionLink("Home", "Index", new { Controller = "Home" },new {@class="active" })
    }
    else {
       @Html.ActionLink("Home", "Index", new { Controller = "Home" })
    }
</li>
<li>
   @if (action == "About Us") { 
           @Html.ActionLink("About Us", "About", new { Controller = "Home" },new {@class="active" })
        }
        else {
           @Html.ActionLink("About Us", "About", new { Controller = "Home" })
        }
</li> 
```

ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:38:52.737

```
public static class MyHtmlHelper
{
    public static String NavActive(this HtmlHelper htmlHelper, 
                          string actionName, 
                          string controllerName)
    {
        var controller = htmlHelper.ViewContext.RouteData.GetRequiredString("controller");
        var action = htmlHelper.ViewContext.RouteData.GetRequiredString("action");

        if (controllerName == controller && action == actionName )
            return "active";
        else
            return String.Empty;
    }
} 
```

然后你可以在你的视图中使用这个助手。

```
@Html.NavActive("Index", "Home") 
```

例如，

```
<li>
    <a href="~/Home/Index" class="@Html.NavActive("Index", "Home")">
        <span>Index</span>
    </a>
</li> 
```

# regex - 带有可选组的正则表达式

> ID：14771124
> 
> 赞同：0
> 
> 时间：2013-02-08T11:03:22.557
> 
> 标签：regex

我想拆分一个以逗号分隔的电子邮件地址列表，**并且**我想在这些电子邮件地址中获取用户友好的名称（如果有的话）。

现在我使用这个正则表达式：

```
(?<value>(?<normalized>.*?)\[.*?\])\s*,*\s* 
```

此 reg exp 适用于输入字符串

```
"Eline[Elinek@yahoo.com],raymond[raymondc@yahoo.com]" 
```

它返回两对：

1.  值 'Eline[Elinek@yahoo.com]' 归一化 'Eline'
2.  值 'raymond[raymondc@yahoo.com]' 归一化 'raymond'

但它不适用于输入字符串

```
"Eline[Elinek@yahoo.com],piet@yahoo.com,raymond[raymondc@yahoo.com]" 
```

在第二种情况下，它应该返回 3 个归一化为空的电子邮件地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:23:02.830

为什么您的第二个示例应返回 3 个匹配项？第二封电子邮件没有您在模式中需要的 [...]，因此该地址还与`(?<normalized>.*?)`第三个电子邮件地址相匹配。

在这里试试这个：

```
(?<value>(?<normalized>[^,]*?)\[.*?\]|[^,\[\]]*)\s*,?\s* 
```

[在 Regexr 上](http://regexr.com?33n3a)查看

**但这变得难以理解，为什么不先用逗号分割然后在结果数组上工作呢？**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:48:17.977

你可以试试这个模式：

```
(?<value>(?<normalized>[^\[,]*?)\[?[^,]*\]?) 
```

您的模式似乎不打算匹配整个输入字符串，并且您打算遍历不同的匹配项，因此最后不需要添加逗号模式。

规范化组匹配字符，而它们不是`[`或`,`。value 的组使`[`, 和`]`可选的，并且匹配中间的任何字符，而它们不是逗号。

# grails - Groovy/Grails 默认错误信息

> ID：14771126
> 
> 赞同：1
> 
> 时间：2013-02-08T11:03:26.240
> 
> 标签：grails, internationalization

我正在尝试自定义我的错误消息。首先，我想在输出中获取消息键作为错误，例如：package.Subpage.title.nullable。

为了实现这个目标，我从我的应用程序中删除了所有 message.properties 包，但我仍然在输出中得到类似的东西：

```
 Property [title] of class [class package.Subpage] cannot be blank 
```

我有 FieldError 类的属性，看看它是否在那里实现，我注意到这个类有属性：

```
 defaultMessage=Property [{0}] of class [{1}] cannot be blank 
```

当然我知道消息键有一个模式，它看起来像 class.property.（空白或可为空或任何约束集），我可以覆盖每条消息，但我的主要目标是完全控制消息键的方式，消息值和默认消息的样子。

**问题：**有没有办法为 grails 中的错误定义默认消息和消息键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:06:42.650

您可以实现自己的 Spring `MessageSource`，然后将其连接到 Grails 中：

*   [消息源 JavaDoc](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/MessageSource.html)
*   [Spring 参考 - 使用 MessageSource 进行国际化](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#context-functionality-messagesource)
*   [在 Grails 中使用 Spring Bean DSL](http://grails.org/doc/latest/guide/spring.html#14.2%20Configuring%20Additional%20Beans)

# iphone - （应用内购买）非续费订阅项目没有添加时长按钮，如何设置？

> ID：14771128
> 
> 赞同：0
> 
> 时间：2013-02-08T11:03:29.750
> 
> 标签：iphone, ios

我可以选择自动续订订阅的持续时间，因为 iTunes Connect 已经提供

添加持续时间按钮。但非续订订阅没有添加持续时间按钮

所以我无法设置非续订的持续时间。如何设置不续订

订阅？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:05:56.140

您应该通过创建自己的服务器来维持非续订订阅的持续时间。让服务器决定订阅何时过期。如果您有更多关于非续订订阅的问题，请咨询我

# oop - DDD、对象图和事件溯源

> ID：14771132
> 
> 赞同：2
> 
> 时间：2013-02-08T11:03:43.447
> 
> 标签：oop, domain-driven-design, event-sourcing

## 介绍

这个问题是关于 DDD 和事件溯源，其中聚合中的实体（聚合根除外）具有事件生成行为。

## 例子

下面是我描述的情况的一个示例，我确定我想在聚合内的其他实体中封装一些逻辑。这可能涉及暂停对实际示例以及它是否是一个好模型的怀疑。:)

我正在尝试对`DeliveryRun`聚合根 (AR) 建模，这是车辆执行交付的行程。在它离开之前，它必须有一个最新的`DeliveryManifest`. 它的“最新性”向我表明，它是 AR 定义的一致性边界`DeliveryManifest`内的一个实体。`DeliveryRun`

到目前为止还好。

我为此使用了 Event Sourcing 方法 - [Greg Young](http://codebetter.com/gregyoung/2010/08/31/super-simple-cqrs-example/)教授并在[Regalo 库](https://github.com/nbarnwell/Regalo)中实施的方法。这意味着如果 AR ( `DeliveryRun`) 没有任何行为，则它们实际上不需要任何实体（例如，a`SalesOrder`可能没有`SalesOrderLines`，因为它记录了诸如`ItemsAdded`/之类的事件`ItemsRemoved`）。

但是，围绕`DeliveryManifest`. 具体来说，一旦首次请求清单，当项目被添加到交付时，需要创建清单的新版本。这意味着我们可以确保司机在没有可用的最新清单的情况下不会离开。

如果我要将逻辑封装在`DeliveryManifest`对象内部（不会被序列化和存储；我们使用的是事件源，它不是 AR），我如何捕获事件？

## 我正在考虑的选项

*   事件是否应该由`DeliveryManifest`实体生成，但针对`DeliveryRun`自身保存（然后需要知道如何将这些事件重播到`DeliveryManifest`从事件存储加载时）？

*   是否应该没有`DeliveryManifest`（可能作为数据结构除外）并且所有逻辑/事件都由`DeliveryRun`?

*   是否应该`DeliveryManifest`是它自己的 AR 并确保`DeliveryRun`被告知当前清单的 ID？由于这将清单对象置于 的一致性边界之外`DeliveryRun`，因此我需要构建一些事件处理来订阅`DeliveryRun`与清单相关的更改，以便可以相应地更新/无效等。

*   实现与 Udi 的 DomainEvents 模式类似的不同样式来捕获事件。这意味着更改 Regalo 库，尽管我认为它可以很容易地支持这两种模式。这将允许捕获聚合中所有实体生成的所有事件，以便针对 AR 保存它们。我需要考虑一个加载/重播的解决方案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:23:12.840

我会避免制作`DeliveryManifest`另一个聚合根，除非它是一个一致性边界。

许多样本不处理这个问题。聚合根似乎应该负责从其中的实体收集事件，并将它们分发给正确的实体以便稍后加载，这似乎是您的选择 1。

如果没有与`DeliveryManifest`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:29:56.640

机械式的答案……您可以在其中构思出许多变化。基本上，您必须决定谁将收集所有这些事件：根（此处显示）或每个实体（此处未显示的方法）分别收集。从技术上讲，您有很多选项可以实现如下所示的观察行为（想想 Rx、手动编码的调解器等）。我将大部分基础设施代码浮现在实体中（此处缺少抽象）。

```
public class DeliveryRun {
  Dictionary<Type, Action<object>> _handlers = new Dictionary<Type, Action<object>>();
  List<object> _events = new List<object>();

  DeliveryManifest _manifest;

  public DeliverRun() {
    Register<DeliveryManifestAssigned>(When);
    Register<DeliveryManifestChanged>(When);
  }

  public void AssignManifest(...) {
    Apply(new DeliveryManifestAssigned(...));
  }

  public void ChangeManifest(...) {
    _manifest.Change(...);
  }

  public void Initialize(IEnumerable<object> events) {
    foreach(var @event in events) Play(@event);
  }

  internal void NotifyOf(object @event) {
    Apply(@event);
  }

  void Register<T>(Action<T> handler) {
    _handlers.Add(typeof(T), @event => handler((T)@event));
  }

  void Apply(object @event) {
    Play(@event);
    Record(@event);
  }

  void Play(object @event) {
    Action<object> handler;
    if(_handlers.TryGet(@event.GetType(), out handler)) {
      handler(@event); //dispatches to those When methods
    }
  }

  void Record(object @event) {
    _events.Add(@event);
  }

  void When(DeliveryManifestAssigned @event) {
    _manifest = new DeliveryManifest(this);
    _manifest.Initialize(@event);
  }

  void When(DeliverManifestChanged @event) {
    _manifest.Initialize(@event);
  }
}

public class DeliveryManifest {
  Dictionary<Type, Action<object>> _handlers = new Dictionary<Type, Action<object>>();
  DeliveryRun _run;

  public DeliveryManifest(DeliveryRun run) {
    _run = run;
    Register<DeliveryManifestAssigned>(When);
    Register<DeliveryManifestChanged>(When);
  }

  public void Initialize(object @event) {
    Play(@event);
  }

  public void Change(...) {
    Apply(new DeliveryManifestChanged(...));
  }

  void Register<T>(Action<T> handler) {
    _handlers.Add(typeof(T), @event => handler((T)@event));
  }

  void Play(object @event) {
    Action<object> handler;
    if(_handlers.TryGet(@event.GetType(), out handler)) {
      handler(@event); //dispatches to those When methods
    }
  }

  void Apply(object @event) {
    _run.NotifyOf(@event);
  }

  void When(DeliveryManifestAssigned @event) {
    //...  
  }

  void When(DeliveryManifestChanged @event) {
    //...  
  }
} 
```

PS我把这个“乱七八糟”编码了，请原谅我的编译错误。

# asp.net - 如何在 Web 表单中使用 Web.config 在 ASP.net 中设置控件的属性值

> ID：14771133
> 
> 赞同：3
> 
> 时间：2013-02-08T11:03:47.510
> 
> 标签：asp.net, html

如何在 ASP.net 控件中设置属性的值？假设我的控制是：

```
<asp:Label runat="Server" ID="Label1" Text="Value"></asp:Label> 
```

我想`Value`从 web.config 中获取：

```
 System.Configuration.ConfigurationManeger.AppSetting["ValueKey"] 
```

我必须做什么？

请原谅我的英语很差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:28:49.563

试试这个 -

```
<asp:Label ID="Label1" runat="server" Text='<%$ AppSettings:SettingKey%>'></asp:Label> 
```

其中 SettingKey 是您的应用设置的密钥名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:10:12.840

尝试 -

C#：Label1.Text = System.Configuration.ConfigurationManager.AppSettings["ValueKey"].ToString()

VB：Label1.Text = System.Configuration.ConfigurationManager.AppSettings("ValueKey").ToString()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:18:02.340

像这样将代码添加到页面加载：-

```
 protected void Page_Load(object sender, EventArgs e)
   {

Label1.Text = System.Configuration.ConfigurationManager.AppSettings["ValueKey"].ToString();

} 
```

# c# - 单元测试南希时无法访问封闭的流

> ID：14771135
> 
> 赞同：0
> 
> 时间：2013-02-08T11:03:49.973
> 
> 标签：c#, unit-testing, rest, nancy

在对 Nancy Web 应用程序进行单元测试时，我收到“无法访问封闭的流”。

我的模块如下：

```
public class MainModule : NancyModule
{
    public MainModule()
    {
        Get["/{Name}"] = p =>
            {
                var command = this.Bind<MainCommand>();
                return Response.AsJson(command.ExecuteGetMessage());
            };
    }
} 
```

我的测试是：

```
 [Test]
    public void Should_return_welcome_message()
    {
        // When
        var bootstrapper = new DefaultNancyBootstrapper();
        var browser = new Browser(bootstrapper);

        BrowserResponse browserResponse = browser.Get("/", with =>
            {
                with.HttpRequest();
            });

        Console.WriteLine(browserResponse.StatusCode);
        Console.WriteLine(browserResponse.Body.ToString());

        // Then
        Assert.AreEqual(HttpStatusCode.OK,browserResponse.StatusCode);
    } 
```

**更新：**我得到 StatusCode = NotFound 并且尝试访问 browserResponse.Body 时发生异常。

我查看了 Nancy 论坛和 StackOverflow。我试过这个解决方案：[Nancy test doesn't find route in other assembly](https://stackoverflow.com/questions/8139096/nancy-test-doesnt-find-route-in-other-assembly)

但仍然无法正常工作。

当我在调试模式下运行测试时，我看到我的模块被调用但我仍然无法检查返回的值。

我应该怎么做才能让它工作？

谢谢

阿德马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:39:16.007

您收到 NotFound 响应，因为您定义的路由与您调用的路由不同。

您正在调用`/`您的测试，但该模块的路线为`/{Name}`.

例外是因为没有带有 NotFound 响应的正文。

将您的测试更新为：

```
var bootstrapper = new ConfigurableBootstrapper(c=>c.Module<MainModule>());
var browser = new Browser(bootstrapper);
BrowserResponse browserResponse = browser.Get("/ademar", with =>
        {
            with.HttpRequest();
        }); 
```

*** 已更新以包含来自评论的来源 ***

# llvm - llvm 元数据转换过程

> ID：14771137
> 
> 赞同：-1
> 
> 时间：2013-02-08T11:03:55.373
> 
> 标签：llvm

我有一个两遍的工具链。第一个是转换过程，应将元数据添加到某些结构（指令/变量），第二个过程是分析过程，需要访问添加的元数据。问题在于我添加元数据转换传递。可能有两个问题（或两者都有）：

首先，也许我没有正确添加元数据。

```
 LLVMContext& C = myInstruction->getContext();
    MDNode* N = MDNode::get(C, MDString::get(C, "add info"));
    myInstruction->setMetadata("important", N);
    errs()<<"\n"<<cast<MDString>(myInstruction->getMetadata("important")->getOperand(0))->getString(); 
```

但是，运行通行证后会打印“添加信息”。

其次，似乎转换并未应用于目标程序的 .bc 。Test1.bc (clean) 和 Test2.bc (transformation applied) 是一样的。我只有

```
using namespace llvm;

namespace {
  struct metadata : public FunctionPass {
    const Function *F;
    static char ID; // Pass identifcation, replacement for typeid
    metadata() : FunctionPass(ID) {
      //initializeMemDepPrinterPass(*PassRegistry::getPassRegistry());
    }
    virtual bool runOnFunction(Function &F);
    virtual void getAnalysisUsage(AnalysisUsage &AU) const {
      AU.setPreservesAll();
    }

   // virtual void releaseMemory() {
    //  F = 0;
   // }
  };
}

char metadata::ID = 0;

static RegisterPass<metadata> X("my-metadata", "Adding metadata", false, true); 
```

在我的转型初期。请告诉我如何持久添加元数据。

谢谢您的回答 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:13:45.177

尽管存在通道之间的交互问题（正如 Oak 的评论所提出的），但编写一个通过添加元数据来实际修改模块的通道并不难。这是一个（基本块，为了更容易编写）将相同的元数据添加到它遇到的每条指令的过程。如果在运行此 pass 之前和之后转储模块，您将看到模块确实被修改：

```
class MyBBPass : public BasicBlockPass {
public:
    static char ID;

    MyBBPass()
        : BasicBlockPass(ID)
    {}

    virtual bool runOnBasicBlock(BasicBlock &BB) {
        Value *A[] = {MDString::get(getGlobalContext(), "thing")};
        MDNode *Node = MDNode::get(getGlobalContext(), A);
        for (BasicBlock::iterator ii = BB.begin(), ii_e = BB.end();
             ii != ii_e; ++ii) {
            ii->setMetadata("md", Node);
        }

        return true;
    }
};

char MyBBPass::ID = 0; 
```

请注意，该`run***`方法返回`true`以向通道管理器发出基本块确实已修改的信号。

# asp.net - 实体框架5：net40

> ID：14771138
> 
> 赞同：0
> 
> 时间：2013-02-08T11:04:02.133
> 
> 标签：asp.net, linq, sql-server-2005, entity-framework-5

我正在使用 ASP.NET 4.0 开发一个 Web 应用程序。我有一个数据库 SQL Server 2005，我正在使用 Entity Framework 5 连接到它。

```
public class ArchivioClienti : DbContext
{
    public ArchivioClienti()
        : base("ICAMConnection")
    {
    }

    public DbSet<ClientiProspect> clienti { get; set; }
}        
[Table("pvw_clienti_prospect")]
public class ClientiProspect
{
    [Key]
    public string tipologia { get; set; } 
    public string cod_ppro { get; set; }
    public string rag_soc { get; set; }
    public string indirizzo { get; set; }
    public string cap { get; set; }
    public string citta { get; set; }
    public string prov { get; set; }
    public string nazione { get; set; }
    public string telefono { get; set; }
    public string fax { get; set; }
    public string part_iva { get; set; }
    public string cod_fisc { get; set; }
    public string note { get; set; }
    public string e_mail { get; set; }
    public string cod_ppro_anag { get; set; }
    public string cod_vage { get; set; }
    public string cod_visp { get; set; }
    public string fonte { get; set; }
    public string cod_vzon { get; set; }
    public decimal perc_provv { get; set; }
    public string flag_stato { get; set; }
    public string cod_anag { get; set; }
    public string gg_chiusura { get; set; }
    public DateTime? data_ins { get; set; }
    public string cod_canale { get; set; }

} 
```

我正在尝试从表中获取数据。这不是一个真正的表格，而只是一个视图。当我使用 LINQ 加载查询时，

```
var result = from u in dbClienti.clienti
             select u;

return result.ToList() 
```

我收到了正确数量的结果（与我在 SQL Server Management Studio 中使用相同查询收到的结果相同），但字段错误：第一个被复制了多次，第二个相同，等等。

为什么它以这种方式工作？具有数据库视图的实体框架是否存在任何问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:24:19.293

我假设您的视图已正确配置并在实体框架之外执行时返回正确的结果？

在实体框架中使用视图而不是表没有问题。我将运行 SQL Profiler 并查看执行查询时 EF 正在做什么。

# sitecore - 直接选择 Sitecore 归档项目

> ID：14771139
> 
> 赞同：0
> 
> 时间：2013-02-08T11:04:16.220
> 
> 标签：sitecore, sitecore6

`Sitecore.Context.Database.Archives["archive"].GetEntries(pageIndex, pageSize)` 语句返回的`ArchiveEntry`列表不是我想要的，而是我需要检索实际的项目。

如何从存档列表中获取 Sitecore 项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:11:25.693

你不能。这些项目已存档。这意味着您不能直接访问它们，也不能访问它们的自定义字段。您需要先使用以下方法恢复它们：

```
Sitecore.Context.Database.Archives["archive"].RestoreItem(archivalId) 
```

这类似于在 Windows 中使用回收站 - 您将文件移动到那里并且您无法编辑它们，除非您将它们恢复回来。

# c - 在 C - AIX 机器中计算时间

> ID：14771146
> 
> 赞同：0
> 
> 时间：2013-02-08T11:04:40.247
> 
> 标签：c, aix

我正在使用类型变量编辑时间值`struct tm`（在 中添加几秒钟`tm->tm_sec`），但是在执行`mktime(&t)`.

在 Linux 中这样做可以得到正确的结果，但在 AIX 中则不然。可能是什么问题呢？

```
#include <stdio.h>
#include <time.h>
#include <langinfo.h>
#include <locale.h>
int main ()
{
struct tm tm;
struct tm *end;
time_t t;
char str[20] = {'\0'};

//if (strptime("7 Feb 2013 01:47:30", "%d %b %Y %H:%M:%S", &tm) == NULL)
if (strptime("2012-10-17-01-07-30", "%Y-%m-%d-%H-%M-%S", &tm) == NULL)
{printf("Error\n");
}
tm.tm_sec = (tm.tm_sec + 1200);
//tm.tm_sec = 12;
//t = mktime(&tm);
//t = t + 12;
//end =localtime(&t);
strftime(str,20,"%Y %m %d %H %M %S",&tm);
printf("str is %s\n",str);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:40:30.940

我相信正确的答案是使用`time_t`，这是一个很大的数字，表示自 1970 年 1 月 1 日午夜以来的秒数。在这里添加任意秒数变得非常简单。

我希望如果您只是在 中添加秒数`tm->tm_sec`，它会溢出，这会导致结果不正确。如果你不走运，你需要以秒为单位将你的变化一直持续到一年（2013 年 12 月 31 日 23:59:56 增加 5 秒将带你到 2014 年 1 月 1 日 00:00:01）。当然可以，但不是：

t =+ 5;

你沿着这条线走了大约十几步

tm.tm_sec += 5;
如果 (tm.tm_sec >= 60) { tm.tm_sec -= 60; tm.tm_min += 1; if (tm.tm_min >= 60) { ... 等等 ... } }

如果你在一个月内溢出天数，它会变得更有趣，因为你必须考虑每个月的天数，28、29、30 或 31，具体取决于哪个月 [以及是否是闰年或不]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:57:08.360

这实际上是 Mats 所说的：

```
#include <stdio.h>
#include <time.h>
#include <langinfo.h>
#include <locale.h>
int main ()
{
  struct tm tm;
  time_t t;
  char str[20] = {'\0'};

  if (strptime("2012-10-17-01-07-30", "%Y-%m-%d-%H-%M-%S", &tm) == NULL) {
    printf("error\n");
  }
  t = mktime(&tm);
  t += 1200;
  tm = *localtime(&t);
  strftime(str,20,"%Y %m %d %H %M %S",&tm);
  printf("str is %s\n",str);

  return 0;
} 
```

产生：

```
cc -o t t.c && ./t
str is 2012 10 17 02 27 30 
```

# c# - 清除和重新填充 ListBox 时闪烁

> ID：14771148
> 
> 赞同：1
> 
> 时间：2013-02-08T11:04:43.267
> 
> 标签：c#, .net, winforms, listbox

我正在使用计时器来更新 ListBox 中的值。每个滴答声我都会执行以下操作：

```
 listBox1.Items.Clear();
            foreach (string thing in thingys)
            {
                listBox1.Items.Add(thing);
            } 
```

但是，当它执行此操作时，ListBox 会快速闪烁白色（空）一瞬间，然后显示新数据。有可能阻止这个闪光吗？这真的很烦人，因为计时器间隔需要非常低（最多约 100 毫秒）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:16:57.773

试试这个：

```
listBox1.BeginUpdate();
listBox1.Items.Clear();
listBox1.Items.AddRange(thingys);
listBox1.EndUpdate(); 
```

# c# - 如何以更好的方式处理超出范围的索引

> ID：14771149
> 
> 赞同：4
> 
> 时间：2013-02-08T11:04:47.080
> 
> 标签：c#

我的代码给了我某个输入的 Index out of Range 异常。下面是有问题的代码：

```
string[] snippetElements = magic_string.Split('^');

string a = snippetElements[10] == null ? "" : "hello";
string b = snippetElements[11] == null ? "" : "world"; 
```

对于那个特定的输入，数组 snippetElements 中只有一个元素，因此在尝试索引第 10 个和第 11 个元素时，我遇到了异常。

现在，我介绍了以下检查：

```
if (snippetElements.Length >= 11)
{
    string a = snippetElements[10] == null ? "" : "hello"; 
    string b = snippetElements[11] == null ? "" : "world";
} 
```

有人可以建议一个更好的方法来写这张支票。不知何故，数字 11 在代码中看起来不太好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-01-15T14:46:05.263

是的，这是一个旧帖子，但仍然很有帮助。你可以使用我认为更清洁的这个：

```
string a = snippetElements.ElementAtOrDefault(10) ?? "hello"; 
string b = snippetElements.ElementAtOrDefault(11) ?? "world"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:31:47.883

您可以将问题概括为这样的*扩展方法*：

```
public static class ArrayExtensions
{
    public static bool TryIndex<T>(this T[] array, int index, out T result)
    {
        index = Math.Abs(index);

        result = default(T);
        bool success = false;

        if (array != null && index < array.Length)
        {
            result = (T)array.GetValue(index);
            success = true;
        }

        return success;
    }
} 
```

并将您的代码转换为：

```
string[] snippetElements = magic_string.Split('^');

string a = null;
string b = null;

if (snippetElements.TryIndex(10, out a) && snippetElements.TryIndex(11, out b))
{
} 
```

或者，更像您的源代码并使用`TryIndex(...)`扩展方法：

```
string[] snippetElements = magic_string.Split('^');

string a = null;
string b = null;

snippetElements.TryIndex(10, out a);
snippetElements.TryIndex(11, out b);

a = a ?? "hello"; // Null coalesence ?? operator is great!
b = b ?? "world"; 
```

它使数组索引访问更安全，因为您的代码永远不会 throw `ArgumentOutOfRangeException`。

### 请注意，此扩展方法适用于任何类型的数组，无论其类型如何！无论是值类型（int、byte...）还是引用类型（string、您自己的类...）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T11:06:51.287

> 有人可以建议一个更好的方法来写这张支票。不知何故，数字 11 在代码中看起来不太好。

那么您正在使用`11`索引访问元素，如果您的变量中有该索引，那么您可以在您的检查中使用它，否则`11`在您的检查中很好。你的支票应该是`if(index < snippetElements.Length)`

就像是：

```
int index = 11;

if(index < snippetElements.Length)
{
   string b = snippetElements[index] == null ? "" : "world";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T11:07:01.050

`snippetElements[11]`是第 12 个元素。

```
if (snippetElements.Length >= 12) 
```

只要您实际使用 [10] 和 [11] 索引，在 if 语句中使用 12 看起来并没有错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T11:13:26.780

这里的逻辑是错误的。
如果您的[Split](http://msdn.microsoft.com/en-US/library/b873y76a%28v=vs.80%29.aspx)方法生成的元素少于 12 个，则您对数组的索引`snippetElements`只能从数组的零到 (Length - 1)。

在这种情况下，索引 10 或 11 处没有元素。而且，在任何情况下，如果`snippetElement.Lenght`等于或大于 12，则数组中的元素不能为空。或者它们包含一个字符串，或者它们将是空字符串。
你可以写

```
string a = snippetElements.Length >= 12 ? "hello" : string.Empty; 
string b = snippetElements.Length >= 12 ? "world" : string.Empty; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-07T08:22:42.137

现在可能为时已晚，但对于遇到同样问题的其他人来说，这就是我解决问题的方法。我通常在 for 循环中使用这个逻辑。

```
int index = 10;
string a = (index < snippetElements?.Length) ? snippetElements[index] : string.Empty; 
```

`snippetElements?.Length`检查 snippetElements 是否不为空，然后调用其 Length 属性。访问空数组的 Length 属性会导致异常。 `snippetElements[index]`（您可以在示例中将其替换为“hello”）仅当索引位于数组的范围内时才能访问。否则，它将 String.Empty 分配给 a。

# python - 用于字节对齐读取的python ctypes pragma pack

> ID：14771150
> 
> 赞同：9
> 
> 时间：2013-02-08T11:04:47.213
> 
> 标签：python, struct, alignment, ctypes

我有一个具有以下结构的 C++ 应用程序写入文件。现在我需要使用 python 解组它们，这里的基本问题是如何`pragma pack`在 python 中反映选项。

C++ 结构

```
#pragma pack(1)
struct abc  
{  
unsigned char r1;  
unsigned char r2;  
unsigned char p1;  
unsigned int id;  
};  
#pragma pack() 
```

现在，结构大小是`7 not 8`，这个数据被写入一个数据文件。如何使用 python 检索这些数据。

注意：
1.我使用的是ctypes，上面的结构是一个示例结构。

* * *

*ctypes 使用结构和联合的本机字节顺序。要构建具有非本地字节顺序的结构，您可以使用 BigEndianStructure、LittleEndianStructure、BigEndianUnion 和 LittleEndianUnion 基类之一。这些类不能包含指针字段*

* * *

以上来自 python 文档的信息，并未深入探讨。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-08T13:11:23.933

[您可以按照此处](http://docs.python.org/2/library/ctypes.html#structure-union-alignment-and-byte-order)所述更改 ctypes 中的包装

> 默认情况下，结构和联合字段的对齐方式与 C 编译器的对齐方式相同。可以通过在子类定义中指定*包*类属性来覆盖此行为。这必须设置为正整数并指定字段的最大对齐方式。这也是 #pragma pack(n) 在 MSVC 中所做的。

对于您的示例，这将是：

```
from ctypes import *

class abc(Structure):
    _pack_ = 1
    _fields_ = [
        ('r1',c_ubyte),
        ('r2',c_ubyte),
        ('p1',c_ubyte),
        ('id',c_uint)] 
```

# tdd - 用户故事末尾的集成卡 (TDD)

> ID：14771155
> 
> 赞同：3
> 
> 时间：2013-02-08T11:05:02.867
> 
> 标签：tdd, agile-processes

我们的团队使用 TDD 进行开发，并且在实现新功能时，有时会在所有卡片变为绿色时出现“集成卡片”，这意味着将已实现的组件放在一起以相互配合。我对这张卡感到难过，因为这意味着，没有人在现实生活中只在测试中尝试过代码，而集成卡意味着尝试它并使其工作。

在每个产生新功能的故事的结尾放置一张集成卡是一种很好的敏捷实践吗？或者当可以将它与现有代码集成在一起时，它是否应该成为每个任务卡的一部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T17:00:33.573

这里只是我的 2 美分：

TDD 本身与您在问题中描述的工作方式无关。我认为敏捷 / Scrum / 精益 / 看板会。

在实际编写代码之前编写单元测试是一种很好的做法，如果我理解正确的话，你们正在这样做。

我同意你的观点，将代码的实际集成推迟到 sprint 结束时有点奇怪。如果地狱破裂，您在冲刺结束时一无所获。换句话说，在最后一张*有风险*的卡片完成之前，您的*潜在可发货产品*将不存在。

 *如果你想突破这种工作方式，我会考虑谷歌搜索[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)。在那里，您努力尽可能频繁地集成代码，以便尽快找到*集成错误*。

长话短说：

*   不，这不是一个好的敏捷实践，而且
*   是的，最好整合每一个**[完成、完成、完成的](http://codebetter.com/jeremymiller/2006/04/14/code-complete-is-a-lie-done-done-done-is-the-truth/)**任务

希望这可以帮助您迈向真正的敏捷/精益团队！相信你的直觉，你**确实**明白了:)。*

# powershell - 在 PowerShell 中安装 Chocolatey 时出现错误消息

> ID：14771158
> 
> 赞同：12
> 
> 时间：2013-02-08T11:05:19.060
> 
> 标签：powershell, chocolatey

我正在尝试安装[Chocolatey](http://chocolatey.org/)以与 PowerShell 一起使用。

推荐的安装方法是复制并粘贴以下行。

```
@powershell -NoProfile -ExecutionPolicy unrestricted -Command "iex ((new-object net.webclient).DownloadString('http://chocolatey.org/install.ps1'))" && SET PATH=%PATH%;%systemdrive%\chocolatey\bin 
```

但我收到以下错误：

```
At line:1 char:13
+ @powershell -NoProfile -ExecutionPolicy unrestricted -Command "iex ((new-object  ...
+             ~~~~~~~~~~
Unexpected token '-NoProfile' in expression or statement.
At line:1 char:24
+ @powershell -NoProfile -ExecutionPolicy unrestricted -Command "iex ((new-object  ...
+                        ~~~~~~~~~~~~~~~~
Unexpected token '-ExecutionPolicy' in expression or statement.
At line:1 char:150
+ ... nstall.ps1'))" && SET PATH=%PATH%;%systemdrive%\chocolatey\bin
+                    ~~
The token '&&' is not a valid statement separator in this version.
At line:1 char:1
+ @powershell -NoProfile -ExecutionPolicy unrestricted -Command "iex ((new-object  ...
+ ~~~~~~~~~~~
The splatting operator '@' cannot be used to reference variables in an expression. '@powershell' can be used only as
an argument to a command. To reference variables in an expression use '$powershell'.
    + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException
    + FullyQualifiedErrorId : UnexpectedToken 
```

ExecutionPolicy 设置为 RemoteSigned 并且我正在运行 Powershell v3

我尝试了一些应用安装代码的一些位而不是整行，但基本上，@Powershell 之后的任何内容都是一个意外的标记。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-08T11:53:12.740

您必须从 cmd.exe（“标准”命令提示符）而不是 PowerShell 启动该行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-03T09:23:58.793

在 PowerShell v3+ 中，最简单的方法是：

1.  打开 PowerShell 窗口（以管理员身份运行）

2.  检查 PowerShell 的版本是否大于 3：

    ```
     $PSVersionTable.PSVersion 
    ```

3.  启用 PowerShell 脚本的执行？

    ```
    set-executionpolicy remotesigned 
    ```

4.  在 PowerShell 中

    ```
    iwr https://chocolatey.org/install.ps1 -UseBasicParsing | iex 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-23T03:38:05.073

I was unable to install Chocolatey on my Windows 10 64-bit OS installation. I was getting `powershell not recognized as internal or external command`. Finally I found the solution, so to people who ever facing the exact same problem as I did, here is the solution for you.

The reason why you get such an error is because the `WindowsPowerShell` path is not set. So kindly set the `Path` as

```
%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\ 
```

Go to Environment variable (see below). You see that `Path` variable, click on Edit and you see one more pop-up window, which shows a couple of paths there. Now click on New and copy-paste the above path. Close your CommandPrompt(admin) and open it again. Run the command given by Chocolatey, and now it starts downloading.

Here is a step-by-step guide:

Go to *Control Panel* → *System* → *Advanced System Settings* → *Environment Variables* → *User variable for Users* → Select *Path Variable* → click *Edit* → Click on *New* → paste this `%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\` → Click `OK` → you're done.

# mysql - MySQL 将图像 BLOB 写入磁盘

> ID：14771164
> 
> 赞同：1
> 
> 时间：2013-02-08T11:05:38.087
> 
> 标签：mysql

我有一个包含图像 BLOB 字段的表。

我希望能够向数据库提交查询并将 BLOB 写入 Windows 文件系统。

这可能吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:09:22.100

是的，有可能。您可以使用带有**INTO DUMPFILE**子句的[SELECT](http://dev.mysql.com/doc/refman/5.5/en/select.html)命令。例如 -

 **```
SELECT
  data_column
FROM
  table1
WHERE
  id = 1
INTO DUMPFILE 'image.png'; 
```

来自参考：*如果您使用 INTO DUMPFILE 而不是 INTO OUTFILE，MySQL 只会将一行写入文件，没有任何列或行终止，也不执行任何转义处理。如果您想在文件中存储 BLOB 值，这很有用。***

# javascript - jQuery .load 到 DOM

> ID：14771165
> 
> 赞同：0
> 
> 时间：2013-02-08T11:05:44.597
> 
> 标签：javascript, jquery, dom

在我切换很多页面以直接加载到我曾经使用的 DOM 之前，例如

```
<div class="msgs_holder" id="wall_comments"></div>

<script type="text/javascript">
$('#wall_comments').load('/pages/includes/list_wall.php', { wl_id:"<?=$wl_id?>" });
</script> 
```

哪个效果很好，现在我正在尝试以下但没有加载任何内容，这是正确的方法吗？已搜索但尚未成功（我使用 1188 作为测试 id）

```
html += '<li><div class="msgs_holder" id="wall_comments"></div></li>';
$('#wall_comments').load('/pages/includes/list_wall.php', { wl_id:1188 });
html += 'blah blah etc etc '; 
```

顺便说一句，所有 html 加载都很好，在我要加载此部分之前和之后都有 html，这一切都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:13:47.897

如果您尝试将数据加载到变量内部的 html 中，请尝试以下操作：

```
$(html).find('#wall_comments').load('/pages/includes/list_wall.php', { wl_id:1188 }); 
```

# jquery - jQuery Ajax 和 Wordpress

> ID：14771166
> 
> 赞同：0
> 
> 时间：2013-02-08T11:05:44.343
> 
> 标签：jquery, ajax, wordpress

我想问一下，如何做一些事情：

我有一个 Wordpress，例如二十个主题。我有它的functions.php，但最后我将我的函数包括在内：

```
require_once('my_functions.php'); 
```

有用 ：）

现在，我想使用 jQuery 进行 ajax 调用，但我想调用的 php 函数使用的是 wordpress 全局变量。例如 $post 等。我要调用的函数也正在连接到数据库，所以如果我使用 url:my_functions.php 进行调用，这个全局变量将不起作用。我还必须创建与数据库的连接。

问题是：如何使用包含的所有 Wordpress 变量来做到这一点。

看起来我的文件不在 Wordpress 环境中，但是如何创建能够使用 Wp 环境的自定义文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:17:36.337

Wordpress Ajax 是您正在寻找的东西：

```
add_action('wp_ajax_$handlename', 'function_to_run');
add_action('wp_ajax_nopriv_$handlename', 'function_to_run'); 
```

要运行的函数将响应您的 ajax 请求。

此外，您将需要：

```
wp_enqueue_script( 'theme_js', get_bloginfo('template_url') . '/js/jquery-theme.js', array('jquery'), THEME_VERSION, false );
$protocol = isset( $_SERVER["HTTPS"] ) ? 'https://' : 'http://';
$params = array( 'ajaxurl' => admin_url( 'admin-ajax.php', $protocol )  );
wp_localize_script( 'theme_js', 'theme_js', $params ); 
```

当包含您的自定义 js 时，它知道应该在哪里搜索响应 wp_ajax 请求的 php 文件。

现在，使用 ajaxurl 您可以使用 jQuery $.post 并获得答案。

# c# - 端点行为能否接受参数

> ID：14771170
> 
> 赞同：0
> 
> 时间：2013-02-08T11:05:58.557
> 
> 标签：c#, asp.net, wcf

我在 WCF 应用程序中使用消息检查器将请求和响应存储到数据库中。

是否将这些数据存储在 DB 中必须根据前端收到的 userInput 进行限制。

长话短说，我需要帮助来解决这些问题 -

1.  页面上下文中的状态在扩展点界面中不可用。
2.  Inspectors 方法也不接受任何自定义参数。

在这种情况下，我们如何将参数传递给 WCF 扩展点以进行自定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:57:30.267

好吧，[IDispatchMessageInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.aspx)接口在每次调用时都会收到一个 IClientChannel，而这又是一个 IExtensible。您必须实现自定义[IExtension](http://msdn.microsoft.com/en-us/library/ms586703.aspx)，并在初始化时扩展客户端通道（使用[IChannelInitializer](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ichannelinitializer.aspx)实现）。然后，您可以从检查器方法实现中的通道参数中检索扩展名，并将其用作与您的前端进行通信的一种方式。

# http - AF_UNIX 上的 HTTP：到 unix 套接字的 HTTP 连接

> ID：14771172
> 
> 赞同：25
> 
> 时间：2013-02-08T11:06:08.727
> 
> 标签：http, sockets, webserver, client-server, unix-socket

我们有 HTTP 服务器，我们有基于 HTTP 客户端的应用程序（在 Linux 上）工作正常。

但是现在我们需要从我们的客户端应用程序监听 Unix 域套接字。那么是否可以从 unix 域套接字发送/接收 httprequest、httpresponse 数据包？

场景1：连接本地主机时，需要通过将HTTP连接到unix套接字而不是HTTPS连接到本地端口来消除SSL开销。

基本上在 HTTP URL 中寻找标准编码 unix 套接字路径。

提前谢谢了。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-08T11:09:18.257

只要您的套接字是流套接字（`SOCK_STREAM`而不是`SOCK_DGRAM`），那么它在技术上是可行的。HTTP 中没有任何东西需要 TCP/IP，它只需要一个*可靠*的双向流。

但是，我从未见过知道如何连接到这样一个套接字的 HTTP 客户端。如果您确实需要使用 URL 与服务器通信，那么我所知道的任何 URL 格式都不会起作用。

`getpeername()`另请注意，当您不使用 TCP/IP 时，普通 Web 服务器所依赖的某些东西（例如，识别客户端）是没有意义的。

**编辑**我刚刚看到您关于映射`localhost`到 UNIX 套接字的编辑。这是完全可行的，您只需要确保客户端知道如何找到应该使用的 UNIX 套接字的路径，而不是连接到 127.0.0.1:xxx

# java - Java 原子性和一个好的比较和交换框架？

> ID：14771174
> 
> 赞同：1
> 
> 时间：2013-02-08T11:06:20.350
> 
> 标签：java, bytecode, atomic

你们认为这是一个很好的原子操作通用框架吗？您还认为关于 Java 应用程序的单个字节码是原子的，因为没有办法使用单个 JVM 一次执行多个字节码，这样说是否正确？因此，如果 if else 有一个单字节代码，那么这个 if else 指令将是原子的吗？

```
// CAS, Compare and Swap
public abstract class CASOperation<T> {

protected T valueAtStart;

public CASOperation(){
    valueAtStart = objectToReview();
}

public void exec(){
    synchronized(this){
        while(!valueAtStartEqualsTheCurrent()){
            valueAtStart = objectToReview();
        }
        execImp();
    }
}

private boolean valueAtStartEqualsTheCurrent() {
    if (objectToReview().equals(valueAtStart)){
        return true;
    } else {
        return false;
    }
}

abstract protected T objectToReview();

abstract protected void execImp(); 
```

* * *

它实际上是一个比较和执行框架，所以在检查原始捕捉值没有改变之后，我们执行一些代码块。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T11:08:21.910

[`java.util.concurrent.AtomicReference`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicReference.html)除非您真的需要完整的相等性检查而*不是*简单的`==`.

[`compareAndSet`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicReference.html#compareAndSet%28V,%20V%29)返回一个值，说明该值是否为预期值，因此您可以有条件地执行其他代码。

在同步块中执行抽象方法听起来像是一项有潜在风险的业务 - 没有迹象或限制可能需要多长时间。

这么说吧：我认为除非我知道使用您提出的框架之类的*特定*`java.util.concurrent.atomic`要求，否则我会坚持使用.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:10:17.020

> 你们认为这是一个很好的原子操作通用框架吗？

是的，它在[java.util.concurrent.atomic](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/package-summary.html)包中。

> 如果“if else”有一个单字节代码，那么这个“if else”指令将是原子的吗？

不一定——一个字节码指令可能会转换成不止一个机器指令。

注意：您的代码使用了一个同步块，该块永远不会在一次调用中释放 - 因此，如果在进入块时条件为假，它可能永远不会变为真。

# sql - 将我的主键更改为自动递增 - JavaDB

> ID：14771177
> 
> 赞同：1
> 
> 时间：2013-02-08T11:06:25.890
> 
> 标签：sql, derby

我正在使用 Netbeans，用 Java 编写并使用 Derby。

我在 APP 中有一个名为 PERSON 的表。在 PERSON 中，我有一个名为 PID 的列，具有以下属性：

```
Name: PID
Nulls allowed: [ ]
Data type: NUMERIC
Column size: 4
Decimal digits: 0
Position: 1
Part of a primary key: [/]
Part of an index: [/] 
```

我使用元数据 isAutoIncrement 函数来检查它是否已经自动递增，但不是！

此后，我尝试使用以下 SQL 命令对其进行更改：

我相信这可能不适合德比：

```
ALTER TABLE APP.PERSON ALTER PID NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY 
(START WITH 1, INCREMENT BY 1); 
```

检查 Oracle 网站后，我发现了正确的语法：

```
ALTER TABLE APP.PERSON ALTER PID SET INCREMENT BY 1; 
```

我什至尝试了前导零：

```
ALTER TABLE APP.PERSON ALTER PID SET INCREMENT BY 0001; 
```

这些都没有奏效，我在最后两个上得到的错误是：

```
ALTER TABLE '"APP"."PERSON"' specified attributes for column 'PID' that are 
not compatible with the existing column. 
```

关于正确语法的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:47:36.473

这是我通常会做的事情：

1.  使用所需的架构创建一个新表，包括生成的主键
2.  发出 INSERT INTO newtable SELECT columns FROM oldtable 以从旧表中填充新表的数据
3.  将旧表重命名为某个临时名称，例如 table_soon_to_be_deleted
4.  将新表重命名为所需的表名
5.  做一些测试以确保我的行为符合预期
6.  删除我在步骤 (4) 中重命名的旧表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-28T06:46:03.283

JavaDB 不允许使用生成的关键字更改列，因此我发现最好的方法是重新创建表并将主键指定为自动递增。例如;

```
create table staff(
   ID int primary key always generated as identity,
   name varchar(100)
); 
```

这对我有用。

# c# - 使用 IProgress 从后台线程报告

> ID：14771182
> 
> 赞同：1
> 
> 时间：2013-02-08T11:06:38.780
> 
> 标签：c#, multithreading, .net-4.5, async-await, progress

总而言之，我有一个昂贵的任务，我使用.NET4.5 下的`async`/关键字来完成。我通过课程`await`从后台线程报告进度。[`Progress<T>`](http://msdn.microsoft.com/en-GB/library/hh193692.aspx)

`IProgress<T>`我作为类型传入的对象是`ProgressInfo`我作为单例类创建的，以避免在运行期间多次创建和处置这种类型的对象的开销。班级是

```
public class ProgressInfo : IDisposable
{
    public static ProgressInfo instance = null;
    public WorkbookProgressInfo workbookinfo { get; set; }
    public string progressMessage { get; set; }
    public int progressPercentage { get; set; }

    // Default constructor which has a few overloads 
    // for the class members above.
    protected ProgressInfo()
    {
    }
    ...

    // The default instance creator for the class. 
    // This also has overloads to allow changes to the 
    // class variables.
    public static ProgressInfo Instance()
    {
        if (instance == null)
            instance = new ProgressInfo();
        return instance;
    }
    ...
} 
```

我通过该方法报告进度`ReportProgress`并将我的设置`IProgress<ProgressInfo>`为

```
IProgress<CostEngine.ProgressInfo> progressIndicator =
    new Progress<CostEngine.ProgressInfo>(ReportProgress); 
```

来自后台线程的报告通常是使用全局`ProgressInfo progressInfo`和全局`IProgress<ProgressInfo> progressIndicator`类似的

```
...
progressInfo = new ProgressInfo.Instance(workbookinfo, message, n);
progressIndicator.Report(progressInfo);
... 
```

问题是，对于小且执行速度快的运行，`ProgressInfo`传入的对象在执行时会`ReportProgress`发生变化`ReportProgress`，所以我测试

```
if (progressInfo.workbookinfo != null)
{
    // Do stuff <- here progressInfo.workbookinfo is changing to null!
} 
```

**我怎样才能避免这个问题，同时将报告进度的费用保持在最低限度？**

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:35:33.773

您正在尝试在此处优化应用程序的错误部分。

几千个对象对于一个应用程序来说不算什么。创建它们很可能不会成为您的应用程序中的性能问题。但是，*可能*存在问题的是 UI 的更新。如果在短时间内发生成千上万的进度报告，您将不断更新您的 UI。更新 UI 需要时间，所以如果你遇到瓶颈，它就会在这里。

这里的正确方法是只报告您需要报告的内容。
例如，当您在一分钟内发生 60.000 次迭代并且您报告每一次迭代时，您将尝试*每毫秒*更新一次 UI 。您的进度条
真的需要*1000 FPS吗？*我对此表示怀疑。
最好每秒只报告一次。但是，每秒报告一次会产生自己的开销。

我在我的应用程序中所做的是在百分比发生变化时立即报告。
这将导致最多 100 个报告，无论您实际有多少次迭代。
在上面的示例中，我将每 600 次迭代报告一次。

为了简化这一点，我实际上创建了一个名为`ProgressReporter`.
在其构造函数中，它接受一个创建`ProgressInfo`对象的工厂委托和总迭代次数。
它提供了`ReportProgress`您在当前迭代中传递的方法。
该类在内部存储先前报告的百分比，并在调用此方法时计算新的百分比。只有当不同时，它才会使用工厂委托来创建新的并`ProgressInfo`调用实例。`Report``IProgress<T>`

顺便说一句：如果您的后台操作不需要几分钟而是几小时，您可以将其更改为不报告百分比何时发生变化，而是百分比的第一个或第二个小数发生变化。
这里的要点是：找到一定数量的报告，每隔几秒就给用户一个反馈。

# css - 仅当悬停父 div 时，如何在 div 内显示图像？

> ID：14771183
> 
> 赞同：0
> 
> 时间：2013-02-08T11:06:42.740
> 
> 标签：css

```
<div class="spotlight-item width-2 height-2">
    <a href="#" class="spotlight-info">
        <h2 class="large">
        Random text
        </h2>
    </a>

    <img src="../images/background.jpg"> //actual image

    <a href="#" onClick="alert(111)">      
        <img class="play-button" src="<%THEME%>images/play.png" style="width: 100px; height: 100px; margin-top: 30%; margin-left: 40%; display: none;">
    </a>
</div> 
```

具有播放按钮类的图像设置为 display: none; 默认。但是，当用户悬停“spotlight-item” div 时，播放按钮图像应设置为 display: show;

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:09:32.860

```
.spotlight-item:hover .play-button { display: x; } 
```

x = 内联、块或内联块

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:12:30.090

自己解决了。

```
/* play button */
.spotlight-area .spotlight .spotlight-item img.play-button {
width: 100px; height: 100px; margin-top: 30%; margin-left: 40%; 
visibility: hidden;

}

/* play button hover */
.spotlight-area .spotlight .spotlight-item:hover img.play-button {
width: 100px; height: 100px; margin-top: 30%; margin-left: 40%; 
visibility: visible;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:16:19.520

```
<style type="text/css">
    .play-button {
        width: 100px; 
        height: 100px; 
        margin-top: 30%; 
        margin-left: 40%; 
        display: none;
    }
    .spotlight-item:hover .play-button {
        display: block;
    }
</style>
<div class="spotlight-item width-2 height-2">
    <a href="#" class="spotlight-info">
        <h2 class="large">
        Random text
        </h2>
    </a>

    <img src="../images/background.jpg"> //actual image

    <a href="#" onClick="alert(111)">      
        <img class="play-button" src="<%THEME%>images/play.png">
    </a>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T11:12:32.937

尝试这个 ：-

```
.spotlight-item:hover .play-button
{
  display:block;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T11:11:21.410

```
.spotlight-item       > img { visibility: hidden  }
.spotlight-item:hover > img { visibility: visible } 
```

`visibility`即使元素不可见，该属性也会为元素保留空间。这可以防止渲染的元素跳来跳去。

警告：`:hover`无指针设备无法仅使用 using。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T11:12:00.050

只需添加一些 CSS 规则。例子：

```
.someClass:hover img {
    display:block;
} 
```

这将显示所有`<img>`的内部`.someClass`元素。

# php - PHP单复选框粘性表单-会话

> ID：14771184
> 
> 赞同：0
> 
> 时间：2013-02-08T11:06:44.717
> 
> 标签：php, forms, validation, checkbox

我的复选框有问题，我需要成为棒状表单的一部分，该复选框将通过会话记住，以便用户可以浏览不同的页面，并且在返回时仍然记住他们的复选框选择。

如果用户希望他们的交货详细信息与他们在表单顶部输入的帐单详细信息相同，则该复选框将由用户单击。无需担心我如何将交付详细信息分配给与帐单详细信息相同的内容，就像我在后面的页面中所做的那样。

注意：Javascript 完全不适合这个，无论如何都不需要它，只是提醒一下 :)。这是一种粘性表单，它会在满足所有条件之前发布到自身`$flag == "ok"`，然后将用户发送到下一页。

我现在将提供我认为是相关代码的内容：

PHP（这部分代码可能不相关，但正如我所见，我将其包括在内，`$_SESSION['sameasbilling']`在我将用户发送到下一页之前设置最终结果（`order-confirm.php`）

```
if ($flag == "ok"){
    $sameasbilling = cleanString($_POST['sameasbilling']);
    $_SESSION['sameasbilling'] = $sameasbilling;

    if (!headers_sent()){
        //send user to next page
        header("Location: order-confirm.php");
    }else{
        echo "Not Sent";
    }
} 
```

HTML/PHP

```
<p>Same as billing address? &nbsp;&nbsp;&nbsp;
<input type="checkbox" id="sameasbilling" name="sameasbilling" value="1" 
<?php 
if (isset($_POST['sameasbilling'])) {
    print ' checked="checked"';
    $_SESSION['sameasbilling'] = "1";
} else {
    $_SESSION['sameasbilling'] = "";
}
?> /> 
```

据我所见，最重要的一段代码在上面我尝试确定是否输出checked='checked'以及是否重置/设置'sameasbilling'会话值。

PS 我已经一遍又一遍地重复了很多次，所以我在输入元素中的 IF 语句非常邋遢，但是当你停留在同一页面并收到错误但当你移动到下一页并返回您的选择不会被记住，我知道我根本没有任何代码可以真正做到这一点，但我希望有人能建议我如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:18:33.190

这仅适用于提交输入框时的第一页。要在返回页面后让它工作，您还需要检查您设置的 $_SESSION 变量。您可以尝试在 if 语句中添加 or 部分，例如。

```
if (!isset($_POST['sameasbilling']) && $_SESSION['sameasbilling'] != "1") {
     $_SESSION['sameasbilling'] = "";
} else { 
print ' checked="checked"';
    $_SESSION['sameasbilling'] = "1";

} 
```

**编辑

```
if(isset($_POST['your_submit_button'])){
        if (isset($_POST['sameasbilling'])) {
            print ' checked="checked"';
            $_SESSION['sameasbilling'] = "1";
        } else {
            $_SESSION['sameasbilling'] = "";
        }
    }else if ($_SESSION['sameasbilling'] == "1") {
        print ' checked="checked"';
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:24:26.787

为了使这更合乎逻辑，假设`$_POST['sameasbilling']`是一个复选框，我会这样做：

```
if(isset($_POST['sameasbilling']) && !empty($_POST['sameasbilling']))
    $_SESSION['sameasbilling'] = 1;
else
    $_SESSION['sameasbilling'] = 0;

if (isset($_POST)) //or check if the submit has been sent or even the session
{
    //send user to next page
    header("Location: order-confirm.php");
    exit();
}
else
    die("Not Sent"); //or set the header location to the previous page with an error 
```

比

```
<input type="checkbox" id="sameasbilling" name="sameasbilling" value="1" <?php echo $_SESSION['sameasbilling'] == 1 ? 'checked="checked"' : '';?> /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:10:34.173

`headers_sent()`检查你的脚本是否已经向头部发送了一些东西，例如，如果你在询问它是否返回 true 之前将一些文本转储到输出缓冲区。

我想你的意思是

```
if ($_SESSION['sameasbilling']){
    header("Location: order-confirm.php");
    exit();
} 
```

或者如果您再次发送复选框值，请在此处跳过会话位

```
if (isset($_POST['sameasbilling'])){ 
```

# php - facebook php sdk - 如果用户没有授予权限（身份验证失败），则捕获

> ID：14771185
> 
> 赞同：5
> 
> 时间：2013-02-08T11:06:46.607
> 
> 标签：php, facebook, facebook-php-sdk, facebook-authentication, user-permissions

文档说：“redirect_uri -（可选）登录/授权过程完成后将用户重定向到的 URL。用户将在登录成功和失败时被重定向到 URL，因此您必须检查 URL 中的错误参数如身份验证文档中所述。如果未指定此属性，则用户将被重定向到当前 URL（即调用此方法的页面的 URL，通常是用户浏览器中的当前 URL）。因此，如果用户拒绝身份验证/权限，则有一种方法可以捕获，但相应文档的链接不再存在（[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)）。

为简单起见，redirect_uri 与起始 php 文件的地址相同，php 代码如下：

```
require 'facebook.php';
$facebook = new Facebook(array(
  'appId'  => 'X',
  'secret' => 'Y',
));
$user = $facebook->getUser();
if ($user) {
  try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}
if (!$user) {
  $params = array(
    'scope' => 'read_stream, friends_likes',
    'redirect_uri' => 'http://myapp.com/app'
  );
  $loginUrl = $facebook->getLoginUrl($params);
} 
```

有谁知道如何捕捉这些信息？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T11:23:45.397

您可以执行以下操作来检查权限：

```
$permissions = $facebook->api("/me/permissions");
if( array_key_exists('publish_stream', $permissions['data'][0]) ) {
    // Permission is granted!
    // Do the related task
    $post_id = $facebook->api('/me/feed', 'post', array('message'=>'Hello World!'));
} else {
    // We don't have the permission
    // Alert the user or ask for the permission!
    header( "Location: " . $facebook->getLoginUrl(array("scope" => "publish_stream")) );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T23:55:07.497

需要注意的是，在最新的 PHP facebook SDK 中，没有方法 ->api。使用此检查（有时）获取权限似乎也存在问题。使用较旧的 SDK 时，有时（似乎是用户随机）一些用户会收到“OAuthException：（#412）用户尚未安装应用程序”，即使对 FB 访问令牌调试器的检查显示了正确的权限。在我更新到新的 SDK 并找到获取简单权限数据列表的新方法后，一切都恢复了。

我花了很多时间在 FB 网站上挖掘来找到这个解决方案，所以我把它贴在这里希望能节省其他人几个小时。他们真正的救星是我发现了 getDecodedBody 方法（在 FB 文档中很难找到技巧）。我的示例只是检查 publish_actions。

```
$fb = new Facebook\Facebook([
    'app_id' => your_app_id,
    'app_secret' => your_secret,
    'default_graph_version' => 'v2.2',
 ]);

$badperms=true; //start by assume bad permissions

try {
    $response = $fb->get('/me/permissions', $at);
    $perms = $response->getDecodedBody();

    if($badperms){
        foreach($perms['data'] AS $perm){
            if($perm['permission']=='publish_actions' && $perm['status']=='granted') $badperms=false;
        }
    }

} catch(Facebook\Exceptions\FacebookResponseException $e) {
    log("MSG-received facebook Response exception!! ".$e->getMessage());
} catch(Facebook\Exceptions\FacebookSDKException $e) {
    log("MSG-received facebook SDK exception!! ".$e->getMessage());
}

if($badperms) {
    //do something like reflow auth
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-22T13:13:42.113

我只是遇到了同样的问题，我不知道如何处理取消操作（在 facebook php api 和 google oauth2 中）。

解决方案比预期的要容易得多。

在权限不被接受的情况下（根本）的响应带有至少一个参数/变量：URL 中的错误。

在 facebook 中，响应如下所示：

> error=access_denied&error_code=200&error_description=权限+error&error_reason=user_denied

对于谷歌，你只能得到

> 错误=拒绝访问

但这应该足够了。

我只是检查是否设置了错误，如果设置了错误，我会将响应重定向到我的登录页面。

我希望它会对某人有所帮助，因为它确实没有记录这一步。顺便说一句：facebook API 的版本：谷歌 API oAuth2 的 v5 版本：2.0（我认为 - 谷歌文档在查找最新版本时真的是一团糟）

# php - eztable中的php ezpdf新行

> ID：14771186
> 
> 赞同：0
> 
> 时间：2013-02-08T11:06:50.053
> 
> 标签：php, newline, ezpdf

如何在 eztable 单元格文本中添加新行？我尝试将 \n 更改为 \n\r 但它不起作用。

也许原始的 ezpdf eztable 有效，因为可能有人对此进行了修改。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T12:28:27.383

也许您在为文本设置新行时使用单引号 (')。使用 \n 时，您应该尝试用双引号 (") 替换单引号 (')。它对我有用。

# ios - iOS - 开始 iOS 教程 - 变量前下划线？

> ID：14771197
> 
> 赞同：7
> 
> 时间：2013-02-08T11:07:53.927
> 
> 标签：ios, objective-c, cocoa-touch, ios6, automatic-ref-counting

我现在开始学习如何进行一些 iOS 开发，目前我正在编写 Apress 入门 IOS6 书籍。

在第二章中有一个简单的教程来显示两个按钮和一个标签，当一个按钮被按下时，它会显示在被按下的标签上。

我已经完成了本教程，但它提出了一个我找不到答案的问题。

本教程使用 ARC（自动引用计数）以防万一。

这是代码，

头文件：

```
#import <UIKit/UIKit.h>

@interface MTMViewController : UIViewController

@property (weak, nonatomic) IBOutlet UILabel *statusLabel;

- (IBAction)buttonPressed:(UIButton *)sender;

@end 
```

和 m 文件：

```
#import "MTMViewController.h"    

@implementation MTMViewController

- (IBAction)buttonPressed:(UIButton *)sender {

    NSString *title = [sender titleForState:UIControlStateNormal];

    NSString *plainText = [NSString stringWithFormat:@"%@ button pressed.", title];

    statusLabel.text = plainText;

}

@end 
```

以上是它在书中的显示方式，但是在 Xcode 中执行教程时，我无法使用以下行进行编译：

```
statusLabel.text = plainText; 
```

而是不得不将其更改为：

```
_statusLabel.text = plainText; 
```

完成此操作后，代码编译并运行良好，我试图通过返回教程查看我是否遗漏任何内容但没有看到任何内容来弄清楚为什么会发生这种情况。

谁能解释为什么书中的代码没有编译以及为什么我必须在变量前面添加下划线？这是正确的还是我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T11:14:52.917

失败的原因`statusLabel.text = plainText;`是因为您没有正确访问该属性。为了通过生成的 getter/setter 访问它，您需要预先`self.`添加它，因为属性（及其 setter/getter）属于 self 的实例。所以反而会是`self.statusLabel.text = plainText;`

起作用的原因`_statusLabel`是因为这是保存属性值的基础变量。以这种方式访问​​变量时，您正在规避生成的 setter/getter。通常，您应该使用`self.propertyName`，因为这将尊重您作为属性定义的一部分提供的关键字（一个很好的例子是如果您使用`atomic`关键字，因为生成的 setter 和 getter 将正确地`@synchronized`在底层实例变量周围放置一个块）。

如果您不手动合成您的属性，最新版本的 Xcode 会创建带有前置下划线的变量名称（这是一件好事，以前人们**必须**手动合成）。如果您愿意，您可以定义自己的基础变量名称，使用`@synthesize statusLabel = m_statusLabel`. 这意味着您可以使用`m_statusLabel`而不是访问它`_statusLabel`。您通常不需要这样做，除非有迫切需要；Apple 建议使用前置下划线。

您应该在初始化方法和解除分配方法时使用底层变量，因为此时代码中生成的 setter/getter 可能不完整。

# jquery - 使用 Javascript 为大量链接添加查询参数？

> ID：14771201
> 
> 赞同：0
> 
> 时间：2013-02-08T11:08:15.987
> 
> 标签：jquery

我有一个充满链接的页面。我正在尝试在每个查询字符串的末尾添加一个查询字符串，以便：

[http://www.example.com?x=1&y=2](http://www.example.com?x=1&y=2)变成[http://www.example.com?x=1&y=2&z=3](http://www.example.com?x=1&y=2&z=3)

我想解析每个链接并添加它。我似乎找不到使用 jQuery 的优雅方法——任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:10:28.333

像这样的东西应该工作

```
$('a').each(function() {
  $(this).prop('href',$(this).prop('href') + '&z=3');
}) 
```

循环每个`a`元素并添加`z=3`到`href`属性的末尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:13:19.503

```
$('a[href^="http://www.example.com"]').prop('href', function(i, href){
   return href + '&z=3';
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T11:11:12.407

你可以这样做：

```
$("a").attr('href', function(c, b) {
     return b + "&z=3";
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T11:14:13.760

在添加键/值对之前，您需要检查 this.attr('href').indexOf('?') > -1 。如果没有'？你也需要添加它。

您最好使用 javascript 中的本机 href API 来解析 URL，然后将您需要的位添加到您需要修改的 URL 部分。

[http://james.padolsey.com/javascript/parsing-urls-with-the-dom/](http://james.padolsey.com/javascript/parsing-urls-with-the-dom/)

您可能还应该考虑使用“on”事件触发器（jQuery 最新）来执行此操作。对大量元素进行增强 DOM 会很慢，如果在 onLoad 钩子中添加会延迟页面显示。

```
$('body').on('click','a',function(e){
    // Prevent it jumping straight out
    e.preventDefault;
    // Define vars
    var href = this.href,
        qstr = 'a=b&bar=foo';
    // check for structure of url and add query string
    this.href += ((href.indexOf('?') > -1) ? '&': '?') + qstr;
    // jump
    return true;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T11:11:48.563

这应该可以解决问题。

```
$('a').each(function(){
  this = $this;
  curr_url = this.attr('href');
  this.attr('href', 'curr_url' + '&z=3');
}); 
```

# html - Bootstrap 水平表单，文本框上带有输入附加

> ID：14771206
> 
> 赞同：2
> 
> 时间：2013-02-08T11:08:29.323
> 
> 标签：html, css, twitter-bootstrap

我正在尝试在引导程序中创建表单水平表单，但是当我尝试在控制字段上添加 input-append 时，该字段会向右移动。我无法找到它发生的确切原因......或者我做错了什么。我正在尝试使用密码输入字段添加一个简单的 PWD...

```
<form class="bs-docs-example form-horizontal">
            <div class="control-group">
              <label class="control-label" for="inputEmail">Email</label>
              <div class="controls">
                <input type="text" id="inputEmail" placeholder="Email">
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="inputPassword">Password</label>
              <div class="controls input-append">
                <input type="password" id="inputPassword" placeholder="Password">
                    <span class="add-on">PWD</span>
              </div>
            </div>
            <div class="control-group">
              <div class="controls">
                <label class="checkbox">
                  <input type="checkbox"> Remember me
                </label>
                <button type="submit" class="btn">Sign in</button>
              </div>
            </div>
          </form> 
```

这是一个 jsfiddle .. [http://jsfiddle.net/zEUH4/](http://jsfiddle.net/zEUH4/)

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-16T11:38:29.750

正确的结构是：

```
<div class="control-group">
  <label class="control-label" for="inputPassword">Password</label>
  <div class="controls">
    <div class="input-append">
      <input type="password" id="inputPassword" placeholder="Password">
      <span class="add-on">PWD</span>
    </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T12:09:37.890

如果您采用 input-append 类并将其移动到应该解决您的问题的控制组 div 上。

[http://jsfiddle.net/zEUH4/1/](http://jsfiddle.net/zEUH4/1/)

```
<div class="control-group input-append">
  <label class="control-label" for="inputPassword">Password</label>
  <div class="controls">
    <input type="password" id="inputPassword" placeholder="Password">
    <span class="add-on">PWD</span>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T12:20:26.740

该类`.input-append`添加`display: inline-block;`到`<div>`. 将`.controls`a 添加`margin: 180px`到`<div>`通常距左边缘 180px 的位置，但现在距`<label>`.

这 2 个类不打算用于 1 个元素。

```
<form class="bs-docs-example form-horizontal">
    <div class="control-group">
        <label class="control-label" for="inputEmail">Email</label>
        <div class="controls">
            <input type="text" id="inputEmail" placeholder="Email">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputPassword">Password</label>
        <div class="controls">
            <div class="input-append">
                <input type="password" id="inputPassword" placeholder="Password">
                <span class="add-on">PWD</span>
            </div>
        </div>
    </div>
    <div class="control-group">
        <div class="controls">
            <label class="checkbox"><input type="checkbox">Remember me</label>
            <button type="submit" class="btn">Sign in</button>
        </div>
    </div>
</form> 
```

## [看小提琴](http://jsfiddle.net/zEUH4/2/)

或者，您将 设置`<div>`为`display: block`。

```
<div class="control-group">
    <label class="control-label" for="inputPassword">Password</label>
    <div class="controls input-append" style="display: block">
        <input type="password" id="inputPassword" placeholder="Password">
        <span class="add-on">PWD</span>
    </div>
</div> 
```

# excel - 检测不同工作表上的单元格更改事件

> ID：14771207
> 
> 赞同：0
> 
> 时间：2013-02-08T11:08:30.560
> 
> 标签：excel, vba

我有一个有两张纸的工作簿。在任一工作表中，单元格 A1 调用一个函数，并在 X 秒后将数据异步返回到 Excel 缓存。然后，一旦加载了这些数据，我就有了一个以 A2 开头的数组函数，它将数据粘贴到工作表中。

我想自动化这个。我已经编写了基本`Workbook_SheetChange`功能，但有人可以告诉我一个可以检查工作表名称的示例，这会导致更改吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:30:01.117

不确定我是否完全了解您的需求，但您也可以`SheetChange`在`Workbook`关卡上赶上事件。样本：

```
Option Explicit

Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
  If (TypeOf Sh Is Worksheet) Then
    Debug.Print "SheetChange occured in sheet [" & Sh.Name & "] in range [" & Target.Address & "]"
  End If
End Sub 
```

# c - OpenMP 实现使我的代码变慢

> ID：14771214
> 
> 赞同：3
> 
> 时间：2013-02-08T11:08:50.533
> 
> 标签：c, openmp

我正在尝试通过使用 openMP 使我的快速排序并行工作。实施 openMP 后，我试图让快速排序更快地工作失败了，我的快速排序数组的排序速度几乎慢了两倍。我的带有 openMP 实现的代码：

```
void quickSort( int a[], int l, int r) {
    int j;
    if( l < r ) {
#pragma omp parallel
        {
            j = partition( a, l, r);
#pragma omp sections
            {
#pragma omp section
                {
                    quickSort( a, l, j-1);
                }
#pragma omp section
                {
                    quickSort( a, j+1, r);
                }
            }
        }
    }
} 
```

整个排序发生在方法分区中，如果您对它的工作方式感兴趣，它的代码如下：

```
int partition( int a[], int l, int r) {
    int pivot, i, j, t;
    pivot = a[l];
    i = l; j = r+1;     
    while(1) {  
        do ++i; while( a[i] <= pivot && i <= r );
        do --j; while( a[j] > pivot );
        if( i >= j ) break;
        t = a[i]; a[i] = a[j]; a[j] = t;
    }
    t = a[l]; a[l] = a[j]; a[j] = t;
    return j;
} 
```

在调用 quickSort 之前，我在 main 中花时间，并且在 main 中的 printf 之前停止计时器。线程数量定义为 10（我在我的电脑上尝试过 4,2 和 1）。我在对 0 - 100 之间的 1 000 000 个随机整数的列表进行排序后的结果：

时间（没有 openMP）在 6.48004 - 5.32001 之间

openMP 时间在 11.8309 和 10.6239 之间（有 2-4 个线程） 这怎么可能呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:14:30.363

快速排序的总体思路是这样的：

```
[......................] 
```

该元素列表分为 2 个任务：

```
[..........][..........] 
```

然后将每个“任务”一次又一次地拆分：

```
[..][..][..][..][..][..] 
```

现在，CPU 喜欢处理紧密结合的数据。但是，当您的每个内核一起处理 PRETTY closeley 数据时，可能会出现一个内核写入与不同内核上的数据位于同一高速缓存行的数据块的情况。由于您不希望内核相互写入数据，因此第一次写入将使其他内核中的数据无效，因此其他内核必须再次获取内存块。

```
|--- cache line ---|
[..][..][..][..][..][..]
 ^   ^   ^   ^
 |   |   |   |
 c1  c2  c3  c4 
```

因此，无论哪个内核首先写入属于该高速缓存行的数据，都会使所有其他内核的数据无效。由于您使小任务`[..]`非常接近，因此您增加了许多无效缓存线和大量从内存中重新获取数据的机会。效果在这里得到了更好的解释

[http://fgiesen.wordpress.com/2013/01/31/cores-dont-like-to-share](http://fgiesen.wordpress.com/2013/01/31/cores-dont-like-to-share)

另请阅读[http://lwn.net/Articles/252125/](http://lwn.net/Articles/252125/)，尤其是“3.3.4 多处理器支持”。

在您的非并行版本中，这一切`invalidating the cache`不会（经常）发生，因为只有一个核心在积极处理数据。

因此，一个可能的解决方案是不要拆分任务，直到它们太小而无法由核心有效处理。您必须考虑的另一个影响：OpenMP 必须对`management overhead`每个任务执行一些操作。如果任务太小，您也可以增加`overhead vs work`比率。

谷歌吐出的基于 OpenMP 的快速排序是：

[http://berenger.eu/blog/c-openmp-a-shared-memory-quick-sort-with-openmp-tasks-example-source-code/](http://berenger.eu/blog/c-openmp-a-shared-memory-quick-sort-with-openmp-tasks-example-source-code/)

愿那能启发你。

# actionscript-3 - 如何在 ActionScript 中解密 MD5 哈希？

> ID：14771217
> 
> 赞同：-3
> 
> 时间：2013-02-08T11:09:13.313
> 
> 标签：actionscript-3, md5

**如何在 ActionScript 中解密 MD5 哈希？**

那是Flash游戏，我想在Flash游戏中学习解密md5。谢谢..

图片：http://b1302.hizliresim.com/16/8/jwu73.jpg

以及如何解决 base64 和 sha1 代码？

```
 package com
{

    public class MD5 extends Object
    {
        public static const HEX_FORMAT_LOWERCASE:uint = 0;
        public static const HEX_FORMAT_UPPERCASE:uint = 1;
        public static const BASE64_PAD_CHARACTER_DEFAULT_COMPLIANCE:String = "";
        public static const BASE64_PAD_CHARACTER_RFC_COMPLIANCE:String = "=";
        public static var hexcase:uint = 0;
        public static var b64pad:String = "";

        public function MD5()
        {
            return;
        }// end function

        public static function encrypt(param1:String) : String
        {
            return hex_md5(param1);
        }// end function

        public static function hex_md5(param1:String) : String
        {
            return rstr2hex(rstr_md5(str2rstr_utf8(param1)));
        }// end function

        public static function b64_md5(param1:String) : String
        {
            return rstr2b64(rstr_md5(str2rstr_utf8(param1)));
        }// end function

        public static function any_md5(param1:String, param2:String) : String
        {
            return rstr2any(rstr_md5(str2rstr_utf8(param1)), param2);
        }// end function

        public static function hex_hmac_md5(param1:String, param2:String) : String
        {
            return rstr2hex(rstr_hmac_md5(str2rstr_utf8(param1), str2rstr_utf8(param2)));
        }// end function

        public static function b64_hmac_md5(param1:String, param2:String) : String
        {
            return rstr2b64(rstr_hmac_md5(str2rstr_utf8(param1), str2rstr_utf8(param2)));
        }// end function

        public static function any_hmac_md5(param1:String, param2:String, param3:String) : String
        {
            return rstr2any(rstr_hmac_md5(str2rstr_utf8(param1), str2rstr_utf8(param2)), param3);
        }// end function

        public static function md5_vm_test() : Boolean
        {
            return hex_md5("abc") == "900150983cd24fb0d6963f7d28e17f72";
        }// end function

        public static function rstr_md5(param1:String) : String
        {
            return binl2rstr(binl_md5(rstr2binl(param1), param1.length * 8));
        }// end function

        public static function rstr_hmac_md5(param1:String, param2:String) : String
        {
            var _loc_3:* = rstr2binl(param1);
            if (_loc_3.length > 16)
            {
                _loc_3 = binl_md5(_loc_3, param1.length * 8);
            }
            var _loc_4:* = new Array(16);
            var _loc_5:* = new Array(16);
            var _loc_6:* = 0;
            while (_loc_6 < 16)
            {

                _loc_4[_loc_6] = _loc_3[_loc_6] ^ 909522486;
                _loc_5[_loc_6] = _loc_3[_loc_6] ^ 1549556828;
                _loc_6 = _loc_6 + 1;
            }
            var _loc_7:* = binl_md5(_loc_4.concat(rstr2binl(param2)), 512 + param2.length * 8);
            return binl2rstr(binl_md5(_loc_5.concat(_loc_7), 512 + 128));
        }// end function

        public static function rstr2hex(param1:String) : String
        {
            var _loc_4:* = NaN;
            var _loc_2:* = hexcase ? ("0123456789ABCDEF") : ("0123456789abcdef");
            var _loc_3:* = "";
            var _loc_5:* = 0;
            while (_loc_5 < param1.length)
            {

                _loc_4 = param1.charCodeAt(_loc_5);
                _loc_3 = _loc_3 + (_loc_2.charAt(_loc_4 >>> 4 & 15) + _loc_2.charAt(_loc_4 & 15));
                _loc_5 = _loc_5 + 1;
            }
            return _loc_3;
        }// end function

        public static function rstr2b64(param1:String) : String
        {
            var _loc_6:* = undefined;
            var _loc_7:* = NaN;
            var _loc_2:* = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
            var _loc_3:* = "";
            var _loc_4:* = param1.length;
            var _loc_5:* = 0;
            while (_loc_5 < _loc_4)
            {

                _loc_6 = param1.charCodeAt(_loc_5) << 16 | ((_loc_5 + 1) < _loc_4 ? (param1.charCodeAt((_loc_5 + 1)) << 8) : (0)) | (_loc_5 + 2 < _loc_4 ? (param1.charCodeAt(_loc_5 + 2)) : (0));
                _loc_7 = 0;
                while (_loc_7 < 4)
                {

                    if (_loc_5 * 8 + _loc_7 * 6 > param1.length * 8)
                    {
                        _loc_3 = _loc_3 + b64pad;
                    }
                    else
                    {
                        _loc_3 = _loc_3 + _loc_2.charAt(_loc_6 >>> 6 * (3 - _loc_7) & 63);
                    }
                    _loc_7 = _loc_7 + 1;
                }
                _loc_5 = _loc_5 + 3;
            }
            return _loc_3;
        }// end function

        public static function rstr2any(param1:String, param2:String) : String
        {
            var _loc_5:* = NaN;
            var _loc_6:* = NaN;
            var _loc_7:* = NaN;
            var _loc_8:* = null;
            var _loc_3:* = param2.length;
            var _loc_4:* = [];
            var _loc_9:* = new Array(param1.length / 2);
            _loc_5 = 0;
            while (_loc_5 < _loc_9.length)
            {

                _loc_9[_loc_5] = param1.charCodeAt(_loc_5 * 2) << 8 | param1.charCodeAt(_loc_5 * 2 + 1);
                _loc_5 = _loc_5 + 1;
            }
            while (_loc_9.length > 0)
            {

                _loc_8 = [];
                _loc_7 = 0;
                _loc_5 = 0;
                while (_loc_5 < _loc_9.length)
                {

                    _loc_7 = (_loc_7 << 16) + _loc_9[_loc_5];
                    _loc_6 = Math.floor(_loc_7 / _loc_3);
                    _loc_7 = _loc_7 - _loc_6 * _loc_3;
                    if (_loc_8.length > 0 || _loc_6 > 0)
                    {
                        _loc_8[_loc_8.length] = _loc_6;
                    }
                    _loc_5 = _loc_5 + 1;
                }
                _loc_4[_loc_4.length] = _loc_7;
                _loc_9 = _loc_8;
            }
            var _loc_10:* = "";
            _loc_5 = _loc_4.length - 1;
            while (_loc_5 >= 0)
            {

                _loc_10 = _loc_10 + param2.charAt(_loc_4[_loc_5]);
                _loc_5 = _loc_5 - 1;
            }
            return _loc_10;
        }// end function

        public static function str2rstr_utf8(param1:String) : String
        {
            var _loc_4:* = NaN;
            var _loc_5:* = NaN;
            var _loc_2:* = "";
            var _loc_3:* = -1;
            while (++_loc_3 < param1.length)
            {

                _loc_4 = param1.charCodeAt(_loc_3);
                _loc_5 = (_loc_3 + 1) < param1.length ? (param1.charCodeAt((_loc_3 + 1))) : (0);
                if (_loc_4 >= 55296 && _loc_4 <= 56319 && _loc_5 >= 56320 && _loc_5 <= 57343)
                {
                    _loc_4 = 65536 + ((_loc_4 & 1023) << 10) + (_loc_5 & 1023);
                    _loc_3 = _loc_3 + 1;
                }
                if (_loc_4 <= 127)
                {
                    _loc_2 = _loc_2 + String.fromCharCode(_loc_4);
                    continue;
                }
                if (_loc_4 <= 2047)
                {
                    _loc_2 = _loc_2 + String.fromCharCode(192 | _loc_4 >>> 6 & 31, 128 | _loc_4 & 63);
                    continue;
                }
                if (_loc_4 <= 65535)
                {
                    _loc_2 = _loc_2 + String.fromCharCode(224 | _loc_4 >>> 12 & 15, 128 | _loc_4 >>> 6 & 63, 128 | _loc_4 & 63);
                    continue;
                }
                if (_loc_4 <= 2097151)
                {
                    _loc_2 = _loc_2 + String.fromCharCode(240 | _loc_4 >>> 18 & 7, 128 | _loc_4 >>> 12 & 63, 128 | _loc_4 >>> 6 & 63, 128 | _loc_4 & 63);
                }
            }
            return _loc_2;
        }// end function

        public static function str2rstr_utf16le(param1:String) : String
        {
            var _loc_2:* = "";
            var _loc_3:* = 0;
            while (_loc_3 < param1.length)
            {

                _loc_2 = _loc_2 + String.fromCharCode(param1.charCodeAt(_loc_3) & 255, param1.charCodeAt(_loc_3) >>> 8 & 255);
                _loc_3 = _loc_3 + 1;
            }
            return _loc_2;
        }// end function

        public static function str2rstr_utf16be(param1:String) : String
        {
            var _loc_2:* = "";
            var _loc_3:* = 0;
            while (_loc_3 < param1.length)
            {

                _loc_2 = _loc_2 + String.fromCharCode(param1.charCodeAt(_loc_3) >>> 8 & 255, param1.charCodeAt(_loc_3) & 255);
                _loc_3 = _loc_3 + 1;
            }
            return _loc_2;
        }// end function

        public static function rstr2binl(param1:String) : Array
        {
            var _loc_3:* = NaN;
            var _loc_2:* = new Array(param1.length >> 2);
            _loc_3 = 0;
            while (_loc_3 < _loc_2.length)
            {

                _loc_2[_loc_3] = 0;
                _loc_3 = _loc_3 + 1;
            }
            _loc_3 = 0;
            while (_loc_3 < param1.length * 8)
            {

                _loc_2[_loc_3 >> 5] = _loc_2[_loc_3 >> 5] | (param1.charCodeAt(_loc_3 / 8) & 255) << _loc_3 % 32;
                _loc_3 = _loc_3 + 8;
            }
            return _loc_2;
        }// end function

        public static function binl2rstr(param1:Array) : String
        {
            var _loc_2:* = "";
            var _loc_3:* = 0;
            while (_loc_3 < param1.length * 32)
            {

                _loc_2 = _loc_2 + String.fromCharCode(param1[_loc_3 >> 5] >>> _loc_3 % 32 & 255);
                _loc_3 = _loc_3 + 8;
            }
            return _loc_2;
        }// end function

        public static function binl_md5(param1:Array, param2:Number) : Array
        {
            var _loc_8:* = NaN;
            var _loc_9:* = NaN;
            var _loc_10:* = NaN;
            var _loc_11:* = NaN;
            param1[param2 >> 5] = param1[param2 >> 5] | 128 << param2 % 32;
            param1[(param2 + 64 >>> 9 << 4) + 14] = param2;
            var _loc_3:* = 1732584193;
            var _loc_4:* = -271733879;
            var _loc_5:* = -1732584194;
            var _loc_6:* = 271733878;
            var _loc_7:* = 0;
            while (_loc_7 < param1.length)
            {

                _loc_8 = _loc_3;
                _loc_9 = _loc_4;
                _loc_10 = _loc_5;
                _loc_11 = _loc_6;
                _loc_3 = md5_ff(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 0], 7, -680876936);
                _loc_6 = md5_ff(_loc_6, _loc_3, _loc_4, _loc_5, param1[(_loc_7 + 1)], 12, -389564586);
                _loc_5 = md5_ff(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 2], 17, 606105819);
                _loc_4 = md5_ff(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 3], 22, -1044525330);
                _loc_3 = md5_ff(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 4], 7, -176418897);
                _loc_6 = md5_ff(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 5], 12, 1200080426);
                _loc_5 = md5_ff(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 6], 17, -1473231341);
                _loc_4 = md5_ff(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 7], 22, -45705983);
                _loc_3 = md5_ff(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 8], 7, 1770035416);
                _loc_6 = md5_ff(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 9], 12, -1958414417);
                _loc_5 = md5_ff(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 10], 17, -42063);
                _loc_4 = md5_ff(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 11], 22, -1990404162);
                _loc_3 = md5_ff(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 12], 7, 1804603682);
                _loc_6 = md5_ff(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 13], 12, -40341101);
                _loc_5 = md5_ff(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 14], 17, -1502002290);
                _loc_4 = md5_ff(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 15], 22, 1236535329);
                _loc_3 = md5_gg(_loc_3, _loc_4, _loc_5, _loc_6, param1[(_loc_7 + 1)], 5, -165796510);
                _loc_6 = md5_gg(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 6], 9, -1069501632);
                _loc_5 = md5_gg(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 11], 14, 643717713);
                _loc_4 = md5_gg(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 0], 20, -373897302);
                _loc_3 = md5_gg(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 5], 5, -701558691);
                _loc_6 = md5_gg(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 10], 9, 38016083);
                _loc_5 = md5_gg(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 15], 14, -660478335);
                _loc_4 = md5_gg(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 4], 20, -405537848);
                _loc_3 = md5_gg(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 9], 5, 568446438);
                _loc_6 = md5_gg(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 14], 9, -1019803690);
                _loc_5 = md5_gg(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 3], 14, -187363961);
                _loc_4 = md5_gg(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 8], 20, 1163531501);
                _loc_3 = md5_gg(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 13], 5, -1444681467);
                _loc_6 = md5_gg(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 2], 9, -51403784);
                _loc_5 = md5_gg(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 7], 14, 1735328473);
                _loc_4 = md5_gg(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 12], 20, -1926607734);
                _loc_3 = md5_hh(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 5], 4, -378558);
                _loc_6 = md5_hh(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 8], 11, -2022574463);
                _loc_5 = md5_hh(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 11], 16, 1839030562);
                _loc_4 = md5_hh(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 14], 23, -35309556);
                _loc_3 = md5_hh(_loc_3, _loc_4, _loc_5, _loc_6, param1[(_loc_7 + 1)], 4, -1530992060);
                _loc_6 = md5_hh(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 4], 11, 1272893353);
                _loc_5 = md5_hh(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 7], 16, -155497632);
                _loc_4 = md5_hh(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 10], 23, -1094730640);
                _loc_3 = md5_hh(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 13], 4, 681279174);
                _loc_6 = md5_hh(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 0], 11, -358537222);
                _loc_5 = md5_hh(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 3], 16, -722521979);
                _loc_4 = md5_hh(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 6], 23, 76029189);
                _loc_3 = md5_hh(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 9], 4, -640364487);
                _loc_6 = md5_hh(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 12], 11, -421815835);
                _loc_5 = md5_hh(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 15], 16, 530742520);
                _loc_4 = md5_hh(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 2], 23, -995338651);
                _loc_3 = md5_ii(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 0], 6, -198630844);
                _loc_6 = md5_ii(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 7], 10, 1126891415);
                _loc_5 = md5_ii(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 14], 15, -1416354905);
                _loc_4 = md5_ii(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 5], 21, -57434055);
                _loc_3 = md5_ii(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 12], 6, 1700485571);
                _loc_6 = md5_ii(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 3], 10, -1894986606);
                _loc_5 = md5_ii(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 10], 15, -1051523);
                _loc_4 = md5_ii(_loc_4, _loc_5, _loc_6, _loc_3, param1[(_loc_7 + 1)], 21, -2054922799);
                _loc_3 = md5_ii(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 8], 6, 1873313359);
                _loc_6 = md5_ii(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 15], 10, -30611744);
                _loc_5 = md5_ii(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 6], 15, -1560198380);
                _loc_4 = md5_ii(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 13], 21, 1309151649);
                _loc_3 = md5_ii(_loc_3, _loc_4, _loc_5, _loc_6, param1[_loc_7 + 4], 6, -145523070);
                _loc_6 = md5_ii(_loc_6, _loc_3, _loc_4, _loc_5, param1[_loc_7 + 11], 10, -1120210379);
                _loc_5 = md5_ii(_loc_5, _loc_6, _loc_3, _loc_4, param1[_loc_7 + 2], 15, 718787259);
                _loc_4 = md5_ii(_loc_4, _loc_5, _loc_6, _loc_3, param1[_loc_7 + 9], 21, -343485551);
                _loc_3 = safe_add(_loc_3, _loc_8);
                _loc_4 = safe_add(_loc_4, _loc_9);
                _loc_5 = safe_add(_loc_5, _loc_10);
                _loc_6 = safe_add(_loc_6, _loc_11);
                _loc_7 = _loc_7 + 16;
            }
            return [_loc_3, _loc_4, _loc_5, _loc_6];
        }// end function

        public static function md5_cmn(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number, param6:Number) : Number
        {
            return safe_add(bit_rol(safe_add(safe_add(param2, param1), safe_add(param4, param6)), param5), param3);
        }// end function

        public static function md5_ff(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number, param6:Number, param7:Number) : Number
        {
            return md5_cmn(param2 & param3 | ~param2 & param4, param1, param2, param5, param6, param7);
        }// end function

        public static function md5_gg(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number, param6:Number, param7:Number) : Number
        {
            return md5_cmn(param2 & param4 | param3 & ~param4, param1, param2, param5, param6, param7);
        }// end function

        public static function md5_hh(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number, param6:Number, param7:Number) : Number
        {
            return md5_cmn(param2 ^ param3 ^ param4, param1, param2, param5, param6, param7);
        }// end function

        public static function md5_ii(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number, param6:Number, param7:Number) : Number
        {
            return md5_cmn(param3 ^ (param2 | ~param4), param1, param2, param5, param6, param7);
        }// end function

        public static function safe_add(param1:Number, param2:Number) : Number
        {
            var _loc_3:* = (param1 & 65535) + (param2 & 65535);
            var _loc_4:* = (param1 >> 16) + (param2 >> 16) + (_loc_3 >> 16);
            return (param1 >> 16) + (param2 >> 16) + (_loc_3 >> 16) << 16 | _loc_3 & 65535;
        }// end function

        public static function bit_rol(param1:Number, param2:Number) : Number
        {
            return param1 << param2 | param1 >>> 32 - param2;
        }// end function

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T11:13:07.287

您无法解密哈希。散列不是加密，更像是一种不可逆的单向函数。尽管 MD5 不安全并且可以逆转，但散列原理仍然是一种方式。

# objective-c - ORSSerialPort 等待回复

> ID：14771219
> 
> 赞同：1
> 
> 时间：2013-02-08T11:09:20.457
> 
> 标签：objective-c, delegates, serial-port, nsthread, orsserialport

我正在使用 ORSSerialPort (Objective C) 向 Arduino 发送指令。问题是我发送的指令太多，arduino 无法立即处理并溢出其缓冲区（据我所知）。我最初只是在每条指令之后添加延迟，以便它可以处理它，但我想在它处理完每条指令后收到它的响应，以便我知道它已为下一条指令做好准备。

然而，来自 arduino 的回复消息必须由 ORSSerialPortDelegate 接收，这意味着它不会阻止我的主循环继续向 arduino 发送更多指令。

让这样的事情发挥作用的最佳方法是什么？我猜以下代码必须位于与主线程不同的线程中，这样它就不会阻塞主线程，但我希望 updateItems 循环被阻塞，直到它收到继续更新项目的信号。

```
-(void)updateItems
{
//Loop through each item.
   //Get the next instruction in the item's buffer
   //execute (send via serial to arduino)
   //wait for acknowledged reply --How do I wait for an acknowledgement?

}

- (void)serialPort:(ORSSerialPort *)serialPort didReceiveData:(NSData *)data
{
    NSLog(@"Received Data");

    NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

    if([string isEqualTo:@"0\r\n"]) //ack signal
    {
        //Serial port is now ready to accept another instruction

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:58:40.207

编辑：这个答案现在已经过时了，现在 ORSSerialPort 包括[内置的 API](https://github.com/armadsen/ORSSerialPort/wiki/Request-Response-API)来准确处理这里描述的场景。您现在可以执行以下操作：

```
@implementation MyClass

- (void)updateItems
{
    // We can just send these all in a for loop. ORSSerialPort will handle 
    // queuing them and waiting for a response to each before going on to the next request
    for (NSData *command in self.commands) {
        ORSSerialPacketDescriptor *response = 
            [[ORSSerialPacketDescriptor alloc] initWithPacketData:[@"foo" dataUsingEncoding:NSASCIIStringEncoding] userInfo:nil];
        ORSSerialRequest *request = [ORSSerialRequest requestWithDataToSend:command userInfo:nil timeoutInterval:1.0 responseDescriptor:response];
        [self.serialPort sendRequest:request];
    }
}

- (void)serialPort:(ORSSerialPort *)serialPort didReceiveResponse:(NSData *)data toRequest:(ORSSerialRequest *)request
{
    NSLog(@"Received response: %@ to request: %@", data, request.dataToSend);
    if (serialPort.queuedRequests.count == 0) {
        // All done! Do whatever comes next.
    }
}

- (void)serialPort:(ORSSerialPort *)serialPort requestDidTimeout:(ORSSerialRequest *)request
{
    // Something went wrong!
    [self.serialPort cancelAllQueuedRequests]; // Stop sending the rest of the commands
} 
```

**原答案如下：**

我所做的是保留要发送的命令队列。在我收到对最近发送的命令的正确回复（或超时等待回复）后，我发送队列中的下一个命令。

你应该能够做这样的事情：

```
@interface MyClass ()
    @property BOOL waitingForAck;
@end

@implementation MyClass

- (void)updateItems
{
    for (NSData *command in self.commands) {
        [self.serialPort sendData:command];
        self.waitingForAck = YES;
        while (self.waitingForAck) {
            [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode
                                             beforeDate:[NSDate distantFuture]];
        }
    }
}

- (void)serialPort:(ORSSerialPort *)serialPort didReceiveData:(NSData *)data
{
    NSLog(@"Received Data");

    NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

    if([string isEqualTo:@"0\r\n"]) //ack signal
    {
        //Serial port is now ready to accept another instruction
        self.waitingForAck = NO;
    }
}

@end 
```

关于此代码/方法的一些注释。它对错误不是很聪明。正如目前所写的那样，它永远不会超时，因此如果 Arduino 出于某种原因未能响应命令，`-updateItems`它将永远运行。您可以通过添加真正的超时来解决此问题。基本上，您记下您发送命令的时间，然后如果在您发送命令`waitingForAck`后的 1 秒（或其他时间）内没有设置为“是”，则您会中断`-updateItems`并适当地处理错误。

这段代码没有涉及多线程，一切都在主线程上完成（ORSSerialPort 在内部使用后台线程，但你不需要关心）。

旋转运行循环`-updateItems`意味着代码的其他部分将继续运行。调用的代码`updateItems`会阻塞等待它返回，但你的 UI 会继续响应，等等。如果你需要阻止这种情况，你应该在开头禁用 UI 的相关部分`-updateItems`，也许显示一个进度指示器，然后完成后重新启用它们。

# android - 在 android 应用程序中从 Web 获取 UTC 日期

> ID：14771223
> 
> 赞同：4
> 
> 时间：2013-02-08T11:09:37.493
> 
> 标签：android, date, datetime, utc, ntp

我想要一个独立于设备（和用户）的 android 应用程序的**UTC 日期**。我听说过一些事情，比如从 NTP 服务器获取日期，但无法从谷歌或 SO 那里找到任何帮助。任何人都可以帮助我提供一些代码片段或链接。提前致谢。

**注意：**我不想要 UTC 日期格式（如 DateFormat.getTimeInstance();），而是 UTC 时间，用户无法更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:27:36.413

Google 为我们找到了一个网络时间检索器[SntpClient](http://hi-android.info/src/android/net/SntpClient.java.html)。看看它是否有效，但它甚至被记录在案！:-O

它返回一个`long`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-01T17:57:11.210

如果系统时间更改（例如手动更改 8 小时），则上述 SntpClient 上的 UTC 时间不起作用。因为它使用 System.currentTimeMillis 返回错误值！！！

```
 // get current time and write it to the request packet
        long requestTime = System.currentTimeMillis();
        long requestTicks = SystemClock.elapsedRealtime(); 
```

最好使用此类从 NTP 服务器获取正确的 UTC 时间：

```
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

class NTP_UTC_Time
{
private static final String TAG = "SntpClient";

private static final int RECEIVE_TIME_OFFSET = 32;
private static final int TRANSMIT_TIME_OFFSET = 40;
private static final int NTP_PACKET_SIZE = 48;

private static final int NTP_PORT = 123;
private static final int NTP_MODE_CLIENT = 3;
private static final int NTP_VERSION = 3;

// Number of seconds between Jan 1, 1900 and Jan 1, 1970
// 70 years plus 17 leap days
private static final long OFFSET_1900_TO_1970 = ((365L * 70L) + 17L) * 24L * 60L * 60L;

private long mNtpTime;

public boolean requestTime(String host, int timeout) {
    try {
        DatagramSocket socket = new DatagramSocket();
        socket.setSoTimeout(timeout);
        InetAddress address = InetAddress.getByName(host);
        byte[] buffer = new byte[NTP_PACKET_SIZE];
        DatagramPacket request = new DatagramPacket(buffer, buffer.length, address, NTP_PORT);

        buffer[0] = NTP_MODE_CLIENT | (NTP_VERSION << 3);

        writeTimeStamp(buffer, TRANSMIT_TIME_OFFSET);

        socket.send(request);

        // read the response
        DatagramPacket response = new DatagramPacket(buffer, buffer.length);
        socket.receive(response);          
        socket.close();

        mNtpTime = readTimeStamp(buffer, RECEIVE_TIME_OFFSET);            
    } catch (Exception e) {
      //  if (Config.LOGD) Log.d(TAG, "request time failed: " + e);
        return false;
    }

    return true;
}

public long getNtpTime() {
    return mNtpTime;
}

/**
 * Reads an unsigned 32 bit big endian number from the given offset in the buffer.
 */
private long read32(byte[] buffer, int offset) {
    byte b0 = buffer[offset];
    byte b1 = buffer[offset+1];
    byte b2 = buffer[offset+2];
    byte b3 = buffer[offset+3];

    // convert signed bytes to unsigned values
    int i0 = ((b0 & 0x80) == 0x80 ? (b0 & 0x7F) + 0x80 : b0);
    int i1 = ((b1 & 0x80) == 0x80 ? (b1 & 0x7F) + 0x80 : b1);
    int i2 = ((b2 & 0x80) == 0x80 ? (b2 & 0x7F) + 0x80 : b2);
    int i3 = ((b3 & 0x80) == 0x80 ? (b3 & 0x7F) + 0x80 : b3);

    return ((long)i0 << 24) + ((long)i1 << 16) + ((long)i2 << 8) + (long)i3;
}

/**
 * Reads the NTP time stamp at the given offset in the buffer and returns 
 * it as a system time (milliseconds since January 1, 1970).
 */    
private long readTimeStamp(byte[] buffer, int offset) {
    long seconds = read32(buffer, offset);
    long fraction = read32(buffer, offset + 4);
    return ((seconds - OFFSET_1900_TO_1970) * 1000) + ((fraction * 1000L) / 0x100000000L);        
}

/**
 * Writes 0 as NTP starttime stamp in the buffer. --> Then NTP returns Time OFFSET since 1900
 */    
private void writeTimeStamp(byte[] buffer, int offset) {        
    int ofs =  offset++;

    for (int i=ofs;i<(ofs+8);i++)
      buffer[i] = (byte)(0);             
}

} 
```

并将其用于：

```
 long now = 0;

        NTP_UTC_Time client = new NTP_UTC_Time();

        if (client.requestTime("pool.ntp.org", 2000)) {              
          now = client.getNtpTime();
        } 
```

如果您需要 UTC 时间“现在”作为 DateTimeString 使用函数：

```
private String get_UTC_Datetime_from_timestamp(long timeStamp){

    try{

        Calendar cal = Calendar.getInstance();
        TimeZone tz = cal.getTimeZone();

        int tzt = tz.getOffset(System.currentTimeMillis());

        timeStamp -= tzt;

        // DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss",Locale.getDefault());
        DateFormat sdf = new SimpleDateFormat();
        Date netDate = (new Date(timeStamp));
        return sdf.format(netDate);
    }
    catch(Exception ex){
        return "";
     }
    } 
```

并将其用于：

```
String UTC_DateTime = get_UTC_Datetime_from_timestamp(now); 
```

# python - 在 Python 中通过命令行传递的数字列表中查找最大数字

> ID：14771225
> 
> 赞同：0
> 
> 时间：2013-02-08T11:09:38.367
> 
> 标签：python

我需要通过命令行接受数字列表并打印最大的数字。所以我写了这个 Python 脚本

```
import sys

arg_list = sys.argv[:]
num_list = arg_list[1:]
if (len(num_list) == 0):
    print "Please pass a list on numbers as an argument"
else:
    max_num = max(num_list)
    print "The largest number is " + str(max_num) 
```

现在这段代码对于列表 1、5、77、8 不能正常工作，但我不明白我做错了什么。有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:12:28.550

程序的参数始终是字符串，您需要将其转换`num_list`为整数：

```
num_list = map(int, num_list) 
```

如果任何输入不是有效数字，这可能会引发 ValueError 异常，您可能想要捕捉到：

```
try:
    num_list = map(int, num_list)
except ValueError:
    print 'Please enter only integers'
    sys.exit(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:12:13.093

您需要先将它们转换为整数

例如

```
max(int(num) for num in num_list) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T11:14:29.890

您可以将它们转换为整数，也可以对整数值进行排序：

```
>>> num_list = ['1','5','77','8']
>>> sorted(num_list, key=int, reverse=True)[0]
'77' 
```

# ios - 滚动时自定义 UITableViewCells 消失

> ID：14771227
> 
> 赞同：2
> 
> 时间：2013-02-08T11:09:59.683
> 
> 标签：ios, ipad, uikit

我正在制作一个应用程序，其中有 MKMapView 和一些 MKAnnotations。我还有一个列表（一个 UITableView），其中包含有关由这些注释表示的位置的更多信息，其中我的问题发生在其中。我使用我自己的 UITableViewCell 子类，它有 3 个 UILabel：地点名称的默认 textLabel、addressLabel 和 phoneNumberLabel。我必须考虑这些标签中的文本太大而无法在一行中显示的情况，并相应地调整 UILabels 的大小。我还必须考虑没有电话号码或地址并且 UILabel 应该“消失”（帧大小为 0）的情况。

问题是，当我向下滚动表格时，单元格从屏幕的上部消失（滚动得越远，它们中的不可见越多，并且对于大多数 UITableView 根本没有显示单元格，只有部分标题，即使整个表的大小没有改变）。

（屏幕截图应该放在这里，但stackoverflow不允许我发布它:()！[在此处输入图像描述][1]

这是我的自定义 UITableViewCell 子类：

```
@implementation POICell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        self.addressLabel = [[UILabel alloc] init];
        self.phoneNumberLabel = [[UILabel alloc] init];
        [self addSubview:self.addressLabel];
        [self addSubview:self.phoneNumberLabel];
        self.addressLabel.font = [UIFont fontWithName:@"Helvetica" size:14];
        self.phoneNumberLabel.font = [UIFont fontWithName:@"Helvetica" size:14];
        self.textLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:20];

        self.addressLabel.lineBreakMode = UILineBreakModeWordWrap;
        self.phoneNumberLabel.lineBreakMode = UILineBreakModeWordWrap;
        self.textLabel.lineBreakMode = UILineBreakModeWordWrap;
    }
    return self;
}

- (void)layoutSubviews {
    [super layoutSubviews];

    CGRect titleFrame = self.frame;
    titleFrame.origin.x += 30;
    titleFrame.size.width -= 60;
    titleFrame.size.height = [self.textLabel.text sizeWithFont:self.textLabel.font forWidth:self.textLabel.frame.size.width lineBreakMode:NSLineBreakByWordWrapping].height;
    self.textLabel.frame = titleFrame;
    if (self.addressLabel.text != nil) {
        self.addressLabel.frame = CGRectMake(titleFrame.origin.x, [DDUtility yRelativeTo:self.textLabel withMargin:0], titleFrame.size.width, [self.addressLabel.text sizeWithFont:self.addressLabel.font forWidth:self.addressLabel.frame.size.width lineBreakMode:NSLineBreakByWordWrapping].height);
    }
    else {
        self.addressLabel.frame = CGRectMake(titleFrame.origin.x, [DDUtility yRelativeTo:self.textLabel withMargin:0], 0, 0);
    }
    NSString *labelText = self.addressLabel.text;
    if (self.phoneNumberLabel.text != nil) {
        self.phoneNumberLabel.frame = CGRectMake(titleFrame.origin.x, [DDUtility yRelativeTo:self.addressLabel withMargin:0], titleFrame.size.width, [self.phoneNumberLabel.text sizeWithFont:self.phoneNumberLabel.font forWidth:self.phoneNumberLabel.frame.size.width lineBreakMode:NSLineBreakByWordWrapping].height);

    }
    else {
        self.phoneNumberLabel.frame = CGRectMake(titleFrame.origin.x, [DDUtility yRelativeTo:self.addressLabel withMargin:0], 0, 0);
    }
    labelText = self.phoneNumberLabel.text;

} 
```

这里是我的 UIViewController 的一部分，它既是我的 2 个表的委托又是数据源 - categoryTable 工作得很好，它是 poiTable 我有问题。

poiArraysDictionary 是一个字典，其中键是兴趣点类别的名称，值是该类别的点数组。点本身是我从服务器获取的 JSON 格式的字典，带有名称、地址（可以为空）和电话（可以为空）等键。

```
- (void) viewDidLoad {
    (...)

    UITableView *poiTable = [[UITableView alloc] initWithFrame:CGRectMake(0, 120, listView.frame.size.width, listView.frame.size.height -  120) style:UITableViewStylePlain];
    poiTable.separatorStyle = UITableViewCellSeparatorStyleNone;
    //poiTable.rowHeight = 80;
    poiTable.dataSource = self;
    poiTable.delegate = self;
    poiTable.backgroundColor = [UIColor clearColor];
    self.poiTable = poiTable;
    [poiTable reloadData];
    [self.listView addSubview:poiTable];

    (...)
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    if (tableView == self.categoryTable) {
        return 1;
    }
    else {
        return [self.categoryArray count];
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (tableView == self.categoryTable) {
        return [self.categoryArray count];
    }
    else {
        return [[self.poiArraysDictionary objectForKey:[self.categoryArray objectAtIndex:section]] count];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView == self.categoryTable) {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"categoryCell"];
        if (cell == nil) {
            cell = [[[CategoryCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"categoryCell"] autorelease];
        }

        cell.textLabel.text = [self.categoryArray objectAtIndex:indexPath.row];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.backgroundColor = [UIColor clearColor];

        return cell;
    }
    else {
        POICell *cell = [tableView dequeueReusableCellWithIdentifier:@"poiCell"];
        if (cell == nil) {
            cell = [[[POICell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"poiCell"] autorelease];
        }

        /*int maxIndex = [self.pointsOfInterestArray count];
         int index;
         int indexInSection = 0;
         for (index = 0; index < maxIndex; ++index) {
         if ([((NSString*)([((NSDictionary*)([self.pointsOfInterestArray objectAtIndex:index])) objectForKey:@"category"])) isEqualToString:[self.categoryArray objectAtIndex:indexPath.section]]) {
         if (indexInSection != indexPath.row) {
         ++indexInSection;
         }
         else {
         break;
         }
         }
         }

         cell.textLabel.text = [[self.pointsOfInterestArray objectAtIndex:index] objectForKey:@"name"];
         if ([[[self.pointsOfInterestArray objectAtIndex:index] objectForKey:@"address"] class] != [NSNull class]) {
         cell.addressLabel.text = [[self.pointsOfInterestArray objectAtIndex:index] objectForKey:@"address"];
         }
         if ([[[self.pointsOfInterestArray objectAtIndex:index] objectForKey:@"phone"] class] != [NSNull class]) {
         cell.phoneNumberLabel.text = [[self.pointsOfInterestArray objectAtIndex:index] objectForKey:@"phone"];
         }*/

        if ([[[[self.poiArraysDictionary objectForKey:[self.categoryArray objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row] objectForKey:@"name"] class] == [NSNull class]) {
            return nil;
        }

        cell.textLabel.text = [[[self.poiArraysDictionary objectForKey:[self.categoryArray objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row] objectForKey:@"name"];

        if ([[[[self.poiArraysDictionary objectForKey:[self.categoryArray objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row] objectForKey:@"address"] class] == [NSNull class]) {
            cell.addressLabel.text = nil;
        }
        else {
            cell.addressLabel.text = [[[self.poiArraysDictionary objectForKey:[self.categoryArray objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row] objectForKey:@"address"];
        }

        if ([[[[self.poiArraysDictionary objectForKey:[self.categoryArray objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row] objectForKey:@"phone"] class] == [NSNull class]) {
            cell.phoneNumberLabel.text = nil;
        }
        else {
            cell.phoneNumberLabel.text = [@"telefon: " stringByAppendingString:[[[self.poiArraysDictionary objectForKey:[self.categoryArray objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row] objectForKey:@"phone"]];
        }

        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.backgroundColor = [UIColor clearColor];

        CGRect cellFrame = cell.frame;
        return cell;

    }
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    if (tableView == self.categoryTable) {
        return 0;
    }
    else {
        return 40;
    }
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (tableView == self.categoryTable) {
        return 50;
    }
    else {
        NSDictionary *point = [[self.poiArraysDictionary objectForKey:[self.categoryArray objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row];
        CGFloat rowHeight = 0;
        if ([[point objectForKey:@"name"] class] != [NSNull class]) {
            rowHeight += [[point objectForKey:@"name"] sizeWithFont:[UIFont fontWithName:@"Helvetica-Bold" size:20] forWidth:self.poiTable.frame.size.width lineBreakMode:NSLineBreakByWordWrapping].height;
        }

        if ([[point objectForKey:@"address"] class] != [NSNull class]) {
            rowHeight += [[point objectForKey:@"address"] sizeWithFont:[UIFont fontWithName:@"Helvetica" size:14] forWidth:self.poiTable.frame.size.width lineBreakMode:NSLineBreakByWordWrapping].height;
        }

        if ([[point objectForKey:@"phone"] class] != [NSNull class]) {
            rowHeight += [[point objectForKey:@"phone"] sizeWithFont:[UIFont fontWithName:@"Helvetica" size:14] forWidth:self.poiTable.frame.size.width lineBreakMode:NSLineBreakByWordWrapping].height;
        }

        return rowHeight;
    }
} 
```

# python - Python optimize.curve_fit（关于现有答案）

> ID：14771233
> 
> 赞同：1
> 
> 时间：2013-02-08T11:10:19.463
> 
> 标签：python, curve-fitting

我想问一个关于用户对其他问题的回复的问题，但由于某种原因，评论框没有出现。对不起，如果我做错了什么。

无论如何，关于这个回复： [https ://stackoverflow.com/a/11507723/1950164](https://stackoverflow.com/a/11507723/1950164)

我有以下问题：如何使用此代码将不同的数据适合不同的功能？我有一个与他解决的问题类似的问题，希望我想拟合累积分布。所以我开始尝试概括代码。我做了三个修改：

a）在计算直方图的那一行之后，我添加了

```
hist = numpy.cumsum(hist) 
```

这将我们的分布转换为累积分布

b) 我定义了一个新函数，而不是示例中的高斯函数

```
def myerf(x, *p):
    A, mu, sigma = p
    return A/2\. * (1+math.erf((x-mu)/(math.sqrt(2)*sigma))) 
```

这就是高斯的累积分布。

c) 最后，当然，我更改了 curve_fit 线来调用我的函数：

```
coeff, var_matrix = curve_fit(myerf, bin_centres, hist, p0=p0) 
```

这应该是一个微不足道的练习，但它不起作用。该程序现在返回以下错误消息：

```
bash-3.2$ python fitting.py
Traceback (most recent call last):
  File "fitting.py", line 27, in <module>
    coeff, var_matrix = curve_fit(myerf, bin_centres, hist, p0=p0)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/optimize/minpack.py", line 506, in curve_fit
    res = leastsq(func, p0, args=args, full_output=1, **kw)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/optimize/minpack.py", line 348, in leastsq
    m = _check_func('leastsq', 'func', func, x0, args, n)[0]
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/optimize/minpack.py", line 14, in _check_func
    res = atleast_1d(thefunc(*((x0[:numinputs],) + args)))
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/optimize/minpack.py", line 418, in _general_function
    return function(xdata, *params) - ydata
  File "fitting.py", line 22, in myerf
    return A/2\. * (1+math.erf((x-mu)/(math.sqrt(2)*sigma)))
TypeError: only length-1 arrays can be converted to Python scalars 
```

那么我做错了什么？

奖励：给我一个参考，解释函数参数中的 *p 是什么。

谢谢！

编辑：我尝试使用累积分布数据运行程序，但仍然调用高斯函数。这行得通，你只是不合适。所以错误应该在 myerf 函数的某个地方。

EDIT2：如果我尝试用更简单的东西代替 myerf 函数的返回，比如

```
return A + mu*x + sigma*x**2 
```

然后它工作。所以在那个回报中一定有一些东西没有做它应该做的事情。

EDIT3：所以，我尝试使用 scipy 中的错误函数而不是数学中的错误函数，现在它可以工作了。我不知道为什么它以前不起作用，但它现在起作用了。所以代码是：

```
import matplotlib
matplotlib.use('Agg')
import numpy, math
import pylab as pl
from scipy.optimize import curve_fit
from scipy.special import erf

# Define some test data which is close to Gaussian
data = numpy.random.normal(size=10000)

hist, bin_edges = numpy.histogram(data, density=True)
bin_centres = (bin_edges[:-1] + bin_edges[1:])/2
hist = numpy.cumsum(hist)

def myerf(x, *p):
    A, mu, sigma = p
    return A/2\. * (  1+erf(((x-mu)/(math.sqrt(2)*sigma)))  )

# p0 is the initial guess for the fitting coefficients (A, mu and sigma above)
p0 = [1., 0., 1.]

coeff, var_matrix = curve_fit(myerf, bin_centres, hist, p0=p0)

# Get the fitted curve
hist_fit = myerf(bin_centres, *coeff)

pl.plot(bin_centres, hist, label='Test data')
pl.plot(bin_centres, hist_fit, label='Fitted data')

# Finally, lets get the fitting parameters, i.e. the mean and standard deviation:
print 'Fitted mean = ', coeff[1]
print 'Fitted standard deviation = ', coeff[2]

pl.savefig('fitting.png')
pl.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T18:45:14.433

与`math`函数不同，`numpy`函数接受向量输入：

```
>>> import numpy, math
>>> numpy.exp([4,5])
array([  54.59815003,  148.4131591 ])
>>> math.exp([4,5])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: a float is required 
```

# macros - haxe 中是否有类似 C++ 的宏机制？

> ID：14771235
> 
> 赞同：0
> 
> 时间：2013-02-08T11:10:26.667
> 
> 标签：macros, compilation, haxe, conditional-compilation

在 C++ 中，我有如下宏：

```
#ifdef DEBUG
    #define dbgAssert(condition, message)/
    if(!(condition)){ implementation.Assert(message); }
#else
    #define dbgAssert(condition, message)
#endif 
```

这种方法是有效的，因为如果我们不处于调试模式，特别是当某些条件对 CPU 来说特别繁重时，则永远不会测试条件。

有没有办法在 Haxe 中实现这种类型的 one 班轮？

这是一个非常简单的示例，因为有一些带有十几个条件定义的宏（取决于多个参数）我无法有效地在所有地方维护冗余重新定义。

这是一个稍微有趣的系统，它允许我始终测试最简单的条件并根据级别添加更重的测试：

```
#if 4 == ASSERT4LEVEL
    #define lvlAssert4(conditionlvl1, conditionlvl2, conditionlvl3, conditionlvl4, message)/
    myAssert((conditionlvl1) && (conditionlvl2) && (conditionlvl3) && (conditionlvl4), message)
#elif 3 == ASSERT4LEVEL 
    #define lvlAssert4(conditionlvl1, conditionlvl2, conditionlvl3, conditionlvl4, message)/
    myAssert((conditionlvl1) && (conditionlvl2) && (conditionlvl3), message)
#elif 2 == ASSERT4LEVEL 
    #define lvlAssert4(conditionlvl1, conditionlvl2, conditionlvl3, conditionlvl4, message)/
    myAssert((conditionlvl1) && (conditionlvl2), message)
#else
    #define lvlAssert4(conditionlvl1, conditionlvl2, conditionlvl3, conditionlvl4, message)/
    myAssert((conditionlvl1), message)
#endif 
```

如何在不执行条件的情况下复制此行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:32:48.167

您可以根据调试标志创建 2 个不同的函数。release 函数应该是内联的，并且应该什么都不做。

```
 class Debug {
        #if debug
        public static function assert (e:Bool) {
            if (!e) throw "assert";
        }
        #else
        public static inline function assert (e:Bool) {
            return;
        }
        #end

    } 
```

您还应该看看 haxe 宏，它可以在编译期间做很多强大的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T00:19:55.110

对于这种情况，Frabbits 的答案是正确的，但这里也是宏版本。

```
@:macro static public function dbgAssert(condition, message) {
     #if debug
     return macro if (!($condition)) { implementation.Assert($message); }
     #else
     return macro {};
     #end
} 
```

# java - 如何在 Java 6 中捕获所有已检查的异常（在一个块中）？

> ID：14771239
> 
> 赞同：8
> 
> 时间：2013-02-08T11:10:36.883
> 
> 标签：java, exception, try-catch, runtimeexception, checked-exceptions

**重要提示：此问题仅与 Java 6（及以下）有关。**

[这里](http://www.javamex.com/tutorials/exceptions/exceptions_hierarchy.shtml)的层次结构显示 Java`Exception`分为两种类型：`RuntimeException`和*[不是 RuntimeException]*：

[![Java 异常层次结构](../Images/e0326771075049fc596caaa2ad03368e.png)](https://i.stack.imgur.com/xYo82.png)

`UncheckedException`将其划分为类似的东西`CheckedException`不是更好吗？例如，下面的语句有相当多的检查异常：

```
try {
    transaction.commit();
} catch (SecurityException e) {
} catch (IllegalStateException e) {
} catch (RollbackException e) {
} catch (HeuristicMixedException e) {
} catch (HeuristicRollbackException e) {
} catch (SystemException e) {
} 
```

我只对它是成功还是失败真正感兴趣，因此希望将已检查的异常作为一个组来处理，而不是未检查的异常，因为捕获意外错误并不是一个好习惯。所以考虑到这一点，也许我可以做类似的事情：

```
try {
    transaction.commit();
} catch (Exception e) {
    if (e instanceof RuntimeException) {
        // Throw unchecked exception
        throw e;
    }
    // Handle checked exception
    // ...
} 
```

但这似乎非常骇人听闻。有没有更好的办法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T11:14:22.940

如果我理解正确，那么你就快到了。只需捕获 RuntimeException。这将在层次结构中捕获 RuntimeException 及其下的所有内容。然后是异常的失败，你被覆盖了：

```
尝试 {
    事务.commit();
} 捕捉（运行时异常 e）{
    // 抛出未经检查的异常
    扔 e;
} 捕捉（异常 e）{
    // 处理检查异常
    // ...
}

```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T11:13:14.173

`Java 7`允许你这样的结构：

```
try {
    transaction.commit();
} catch (SecurityException | IllegalStateException  | RollbackException | HeuristicMixedException  e ) {
   // blablabla
} 
```

**UPD：**我认为，在早期版本的 Java 中没有很好且方便的方法来执行此操作。这就是`Java`语言开发人员在`Java 7`. 因此，您可以为`Java 6`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-27T20:40:21.043

我在另一篇文章中给出了类似的答案，所以是的，它是复制过去：

我所做的是拥有一个处理所有异常的静态方法，并将日志添加到 JOptionPane 以将其显示给用户，但您可以将结果写入包含`FileWriter`在`BufeeredWriter`. 对于主要的静态方法，要捕获未捕获的异常，我会这样做：

```
SwingUtilities.invokeLater( new Runnable() {
    @Override
    public void run() {
        //Initializations...
    }
});

Thread.setDefaultUncaughtExceptionHandler( 
    new Thread.UncaughtExceptionHandler() {
        @Override
        public void uncaughtException( Thread t, Throwable ex ) {
            handleExceptions( ex, true );
        }
    }
); 
```

至于方法：

```
public static void handleExceptions( Throwable ex, boolean shutDown ) {
    JOptionPane.showMessageDialog( null,
        "A CRITICAL ERROR APPENED!\n",
        "SYSTEM FAIL",
        JOptionPane.ERROR_MESSAGE );

    StringBuilder sb = new StringBuilder(ex.toString());
    for (StackTraceElement ste : ex.getStackTrace()) {
        sb.append("\n\tat ").append(ste);
    }

    while( (ex = ex.getCause()) != null ) {
        sb.append("\n");
        for (StackTraceElement ste : ex.getStackTrace()) {
            sb.append("\n\tat ").append(ste);
        }
    }

    String trace = sb.toString();

    JOptionPane.showMessageDialog( null,
        "PLEASE SEND ME THIS ERROR SO THAT I CAN FIX IT. \n\n" + trace,
        "SYSTEM FAIL",
        JOptionPane.ERROR_MESSAGE);

    if( shutDown ) {
        Runtime.getRuntime().exit( 0 );
    }
} 
```

在你的情况下，你可以像我之前告诉你的那样写一个日志，而不是向用户“尖叫”：

```
String trace = sb.toString();

File file = new File("mylog.txt");
FileWriter myFileWriter = null;
BufferedWriter myBufferedWriter = null;

try {
    //with FileWriter(File file, boolean append) you can writer to 
    //the end of the file
    myFileWriter = new FileWriter( file, true );
    myBufferedWriter = new BufferedWriter( myFileWriter );

    myBufferedWriter.write( trace );
}
catch ( IOException ex1 ) {
    //Do as you want. Do you want to use recursive to handle 
    //this exception? I don't advise that. Trust me...
}
finally {
    try {
        myBufferedWriter.close();
    }
    catch ( IOException ex1 ) {
        //Idem...
    }

    try {
        myFileWriter.close();
    }
    catch ( IOException ex1 ) {
        //Idem...
    }
} 
```

我希望我有所帮助。

祝你今天过得愉快。:)

# android - 标签活动崩溃

> ID：14771241
> 
> 赞同：0
> 
> 时间：2013-02-08T11:10:45.990
> 
> 标签：android, android-layout

我正在我的应用程序中创建一个选项卡活动。我创建了`tabHost`Activity 但它不工作。由于此活动，应用程序正在崩溃。请帮我。这是代码。

```
package com.examples.deepak.locationcloaker;

import android.app.Activity;
import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class LocationCloakerActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tabHost = getTabHost();//(TabHost)findViewById(id);

        TabSpec tabSpec = tabHost.newTabSpec("tab1");
        tabSpec.setIndicator("Home");
        tabSpec.setContent(new Intent(this, HomeActivity.class));
        tabHost.addTab(tabSpec);

        tabSpec = tabHost.newTabSpec("tab2");
        tabSpec.setIndicator("Search");
        tabSpec.setContent(new Intent(this, SearchActivity.class));
        tabHost.addTab(tabSpec);
    }
} 
```

我的xml文件是

```
 <?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="htp://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:id="@android:id/tabhost" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/hello" />

    </LinearLayout>

</TabHost> 
```

我的 manifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.examples.deepak.locationcloaker"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".LocationCloakerActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".HomeActivity"></activity>
        <activity android:name=".SearchActivity"></activity>
    </application>

</manifest> 
```

日志猫表演

```
 02-08 16:22:09.208: I/Process(752): Sending signal. PID: 752 SIG: 9
02-08 16:31:28.168: D/AndroidRuntime(786): Shutting down VM
02-08 16:31:28.168: W/dalvikvm(786): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-08 16:31:28.198: E/AndroidRuntime(786): FATAL EXCEPTION: main
02-08 16:31:28.198: E/AndroidRuntime(786): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.examples.deepak.locationcloaker/com.examples.deepak.locationcloaker.LocationCloakerActivity}: java.lang.RuntimeException: Binary XML file line #2: You must supply a layout_width attribute.
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.os.Looper.loop(Looper.java:130)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-08 16:31:28.198: E/AndroidRuntime(786):  at java.lang.reflect.Method.invokeNative(Native Method)
02-08 16:31:28.198: E/AndroidRuntime(786):  at java.lang.reflect.Method.invoke(Method.java:507)
02-08 16:31:28.198: E/AndroidRuntime(786):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-08 16:31:28.198: E/AndroidRuntime(786):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-08 16:31:28.198: E/AndroidRuntime(786):  at dalvik.system.NativeStart.main(Native Method)
02-08 16:31:28.198: E/AndroidRuntime(786): Caused by: java.lang.RuntimeException: Binary XML file line #2: You must supply a layout_width attribute.
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.content.res.TypedArray.getLayoutDimension(TypedArray.java:491)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.view.ViewGroup$LayoutParams.setBaseAttributes(ViewGroup.java:3598)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.view.ViewGroup$MarginLayoutParams.<init>(ViewGroup.java:3678)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.widget.FrameLayout$LayoutParams.<init>(FrameLayout.java:457)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.widget.FrameLayout.generateLayoutParams(FrameLayout.java:423)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.widget.FrameLayout.generateLayoutParams(FrameLayout.java:47)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
02-08 16:31:28.198: E/AndroidRuntime(786):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.app.Activity.setContentView(Activity.java:1657)
02-08 16:31:28.198: E/AndroidRuntime(786):  at com.examples.deepak.locationcloaker.LocationCloakerActivity.onCreate(LocationCloakerActivity.java:15)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-08 16:31:28.198: E/AndroidRuntime(786):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-08 16:31:28.198: E/AndroidRuntime(786):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:16:09.970

消除

```
 <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/hello" /> 
```

从你的 xml 文件

TabHost tabHost = getTabHost();

```
// Android tab
Intent intentAndroid = new Intent().setClass(this,
        AndroidActivity.class);
TabSpec tabSpecAndroid = tabHost.newTabSpec("Android").setContent(
        intentAndroid);

Intent intentApple = new Intent().setClass(this, AppleActivity.class);
TabSpec tabSpecApple = tabHost.newTabSpec("Ae").setContent(intentApple);

tabHost.addTab(tabSpecAndroid);
tabHost.addTab(tabSpecApple);
tabHost.setCurrentTab(1); 
```

**xml文件**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />
    </LinearLayout>
</TabHost> 
```

# c++ - C++：将字符串写入文件

> ID：14771248
> 
> 赞同：1
> 
> 时间：2013-02-08T11:11:19.950
> 
> 标签：c++, file-io

我正在使用以下方法将字符串写入文本文件：

```
ofstream ofs("ofs.txt", ios_base::binary);
std::string str = "Hi";
for (int i = 0 ; i < 10000000 ; i++) {
    ofs << str.c_str();
    ofs << "\n" ;
} 
```

但是，这需要很长时间才能执行。任何人都可以帮助我如何提高上述性能。或任何其他将字符串写入文件的更快方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:17:50.233

只是使用`ofs << str;`可能会稍微快一些（或者可能不会，但它肯定更惯用）。但是您正在写入 20 兆字节的数据；这需要一些时间，不管你怎么做。

你没有准确地说出你想要做什么。（我猜真正的问题不会涉及一千万次`"Hi"`。）根据这一点，可能可以使用低级 IO，甚至`mmap`. 但是这些都不做任何格式化，如果你必须格式化为`ostringstream`第一个，你可能会发现它们并没有明显更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:51:39.553

将大量字符串写入文件的最快方法是（很可能）通过 C`FILE *`接口。C++ 流接口不如`FILE *`.

理想情况下，如果您建立一个几 KB 的缓冲区（最好是一次 4 KB），并使用 写入该缓冲区`fwrite(buffer, size_of_buffer, 1, outfile);`，您应该会非常接近系统可以产生的性能。是的，您可以分别使用`write`或`WriteFile`用于 Linux/Unix 和 Windows 的本机接口将其调整半个百分点左右。

当然，缺点是您没有简单的方法来简单地为任意新类型添加输出方法。

与往常一样，在性能方面，衡量不同的选项，看看哪个效果最好。如果它是要在不同情况下在许多机器上使用的东西，那么最好用不同的硬件、不同的内存量和系统负载进行测试，以确定你不仅让你的机器运行得更快，而且它实际上在具有不同条件的系统上给出了合理的改进[或至少没有坏的缺点]。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T12:01:56.380

在某些情况下，我发现 C++ I/O 流往往比 C 慢`<stdio.h> FILE*`。

我在以下测试中也得到了确认：

```
#define _CRT_SECURE_NO_WARNINGS // for stupid fopen_s warning
#include <stdio.h>
#include <exception>
#include <fstream>
#include <iostream>
#include <ostream>
#include <stdexcept>
#include <string>
#include <vector>
#include <windows.h>
using namespace std;

long long Counter() 
{
  LARGE_INTEGER li;
  QueryPerformanceCounter(&li);
  return li.QuadPart;
}

long long Frequency() 
{
  LARGE_INTEGER li;
  QueryPerformanceFrequency(&li);
  return li.QuadPart;
}

void PrintTime(long long start, long long finish, const char * s) 
{
  cout << s << ": " << (finish - start) * 1000.0 / Frequency() << " ms" << endl;
}

// RAII wrapper to FILE*
class File
{
public:
  explicit File(FILE * f)
    : m_file(f)
  {}

  ~File()
  {
    fclose(m_file);
  }

  FILE* Get() const
  {
    return m_file;
  }

  bool IsOpen() const
  {
    return (m_file != nullptr);
  }

private:
  FILE* m_file;

  File(const File&);
  File& operator=(const File&);
};

void TestIoStream(const vector<string>& lines)
{
  ofstream ofs("ofs.txt", ios_base::binary);
  for(auto it = lines.begin(); it != lines.end(); ++it)
  {
    ofs << it->c_str();
    ofs << "\n" ;
  }
}

void TestStdioFile(const vector<string>& lines)
{
  File file( fopen("cfile.txt", "wt") );
  if (! file.IsOpen())
    throw runtime_error("Can't open C FILE*.");

  for(auto it = lines.begin(); it != lines.end(); ++it)
  {
    fputs( it->c_str(), file.Get());
    fputs( "\n", file.Get());
  }
}

int main()
{
  static const int kExitOk = 0;
  static const int kExitError = 1;
  try
  {
    cout << "Building test lines...";
    vector<string> lines;
    for (int i = 0; i < 10000000; i++)
      lines.push_back("Hi");
    cout << "done. ";
    cout << "(Count = " << lines.size() << ")" << endl;

    long long start = 0;
    long long finish = 0;

    start = Counter();  
    TestIoStream(lines);
    finish = Counter();
    PrintTime(start, finish, "C++ I/O stream");

    start = Counter();
    TestStdioFile(lines);
    finish = Counter();
    PrintTime(start, finish, "C FILE*");

    return kExitOk;
  }
  catch(const exception& e)
  {
    cerr << "\n*** ERROR: " << e.what() << endl;
    return kExitError;
  }
} 
```

用 VS2010 SP1 (VC10) 编译：

> ```
> cl /EHsc /W4 /nologo /MT /O2 /GL test.cpp 
> ```

测试结果：

> ```
> Building test lines...done. (Count = 10000000)
> C++ I/O stream: 2892.39 ms
> C FILE*: 2131.09 ms 
> ```

# r - 在 R 中递归读取 xls 表

> ID：14771252
> 
> 赞同：0
> 
> 时间：2013-02-08T11:11:28.207
> 
> 标签：r, xls

我的数据目录中有几个 .xls 文件，它们的张数不同。我需要阅读文件中的所有工作表并将它们放入一个列表中。我认为使用两个循环递归地读取每个文件中的每个工作表并将其附加到列表中。

问题是因为每次我读取一个新文件时，它都会覆盖列表中与前一个文件相同的“级别”。因此，第一个文件的第一级（表 1）被第二个文件的第一级（表 1）覆盖，即被第三个文件的第一级（表 1）覆盖，依此类推。

每次读取新文件时，如何在不重新初始化列表的情况下附加所有文件的所有工作表？

这是我写的代码：

```
files <- list.files()
listGil <- list()
for(i in seq_along(files)){
    s <- sheetCount(files[i])
                        for(k in 1:s)
                    {
                        listGil[[k]] <- read.xls(files[i], sheet = k)
                    }
} 
```

上传运行代码，对于这种问题，可能是个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:41:17.083

或者，如果您想将所有 xls 文件读入一个大列表，并`for`完全跳过循环：

```
big_list = lapply(files, read.xls) 
```

并小心创建空对象并迭代填充它们。每次对象增长时，都需要分配一块新的内存。当您需要读取的文件量很大时，这可能会变得非常缓慢。上面使用的解决方案`lapply`不会遇到这个问题。

如果您还想阅读工作表，可以使用 mapply：

```
big_list = mapply(read.xls, xls = files, sheet = 1:4) 
```

假设您想阅读前四张纸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:16:10.547

你有两个选择：

1）使用列表列表（我认为这更好）：

```
files <- list.files()
listGil <- vector(mode='list',length(files))
for(i in seq_along(files)){
    s <- sheetCount(files[i])
    listGil[[i]] <- vector(mode='list',s)
                        for(k in 1:s)
                    {
                        listGil[[i]][[k]] <- read.xls(files[i], sheet = k)
                    }
} 
```

2) 仅使用 1 个列表：

```
files <- list.files()
listGil <- list()
for(i in seq_along(files)){
    s <- sheetCount(files[i])
                        for(k in 1:s)
                    {
                        listGil[[length(listGil)+1]] <- read.xls(files[i], sheet = k)
                    }
} 
```

# iphone - 设置附件按钮框架

> ID：14771254
> 
> 赞同：0
> 
> 时间：2013-02-08T11:11:35.193
> 
> 标签：iphone, ios

在我的 iPhone 应用程序中，我在每个单元格中添加了一个附件按钮。

下面是我的代码：

```
 ContactCell *contactCell = (ContactCell *)[tableView dequeueReusableCellWithIdentifier:kCellID];
    if (contactCell == nil) {
        contactCell = [[ContactCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellID];
        contactCell.frame = CGRectMake(0.0, 0.0, 320.0, ROW_HEIGHT);
    }

    UIImage *callButtonImage=[UIImage imageNamed:@"call-person.png"];
    UIButton *button =[UIButton buttonWithType:UIButtonTypeCustom];
    button.frame=CGRectMake(0.0, 0.0, 200, ROW_HEIGHT);
    [button setBackgroundImage:callButtonImage forState:UIControlStateNormal];

    ContactWrapper *cellWrapper = nil;  
            [button addTarget:self action:@selector(askCallForClientContact:) forControlEvents:UIControlEventTouchUpInside];
            contactCell.accessoryView = button; 
```

我将按钮框架设置为：`button.frame=CGRectMake(0.0, 0.0, 200, ROW_HEIGHT);`

但似乎按钮框架少于200。当我单击一个单元格并假设有一个按钮时，`didSelectRowAtIndexPath`会出现事件，而不是`askCallForClientContact:`事件。如何设置附件按钮的框架？我需要让它200宽吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:18:29.603

不，您不能更改附件视图的框架。作为替代方案，您可以将子视图添加到您的单元格

```
[cell.contentView addSubview:aView]; 
```

# hadoop - Hadoop DataNode 不会使用远程 IPC 服务器地址

> ID：14771256
> 
> 赞同：0
> 
> 时间：2013-02-08T11:11:50.470
> 
> 标签：hadoop, cluster-computing, virtual-machine

对于“快速”的概念验证，我想通过连接两个虚拟机来设置一个迷你 Hadoop 0.18 集群，我发现这两个虚拟机在[Yahoo](http://developer.yahoo.com/hadoop/tutorial/module3.html#vm-setup)上配置为伪分布式模式。

在我的*hadoop-vm-1*上，我在该机器上启动了一个包含主节点和从属 DataNode 和 TaskTracker 的完整集群。然后我将第二个虚拟机作为*hadoop-vm-2*并希望它托管第二个 DataNode 和 TaskTracker，它将连接到*hadoop-vm-1*并添加到这个集群。

不幸的是，我无法启动第二个 DataNode，因为它想要连接到本地 IPC 服务器。这是我希望它连接到*hadoop-vm-1*的地方。日志中写道：

> 2013-02-07 19:55:29,954 INFO org.apache.hadoop.ipc.Client：重试连接到服务器：/192.168.17.135:9000。已经尝试了 9 次。
> 2013-02-07 19:55:29,958 错误 org.apache.hadoop.dfs.DataNode：java.io.IOException：本地异常调用失败
> ..
> 原因：java.net.ConnectException：连接被拒绝

应该使用来自*hadoop-vm-1*的 192.168.17.134 而不是 IP 192.168.17.135（即*hadoop-vm-2*） 。

 *我想我正确配置了从站的 hadoop-site.xml：

```
<configuration>
<property>
  <name>fs.default.name</name>
  <value>hdfs://hadoop-vm-1/</value>
  <description>The name of the default file system.  A URI whose
  scheme and authority determine the FileSystem implementation.  The
  uri's scheme determines the config property (fs.SCHEME.impl) naming
  the FileSystem implementation class.  The uri's authority is used to
  determine the host, port, etc. for a filesystem.</description>
</property>

<property>
  <name>mapred.job.tracker</name>
  <value>hadoop-vm-1:9001</value>
  <description>The host and port that the MapReduce job tracker runs
  at.  If "local", then jobs are run in-process as a single map
  and reduce task.
  </description>
</property>

</configuration> 
```

当然，我配置了主机文件：

```
127.0.0.1   localhost
127.0.1.1   hadoop-vm-2.localdomain hadoop-vm-2
192.168.17.134 hadoop-vm-1 
```

有任何想法吗？提前致谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:49:12.857

/etc/hosts 文件的内容应如下所示

```
127.0.0.1   localhost
#127.0.1.1  hadoop-vm-1
192.168.0.101 hadoop-vm-1
192.168.0.100 hadoop-vm-2 
```

查看此[博客](http://www.thecloudavenue.com/2012/01/whatswrong-datanode-on-remote-machine.html)及其评论以获取更多详细信息。此外，在伪分布式模式下，所有守护进程都将在它们自己的 JVM 和单个节点上运行。对于 1+ 个节点，它是完全分布式模式。更多关于[这里](http://hadoop.apache.org/docs/r0.20.2/quickstart.html)的不同模式。

此外，有多种方法可以设置 Hadoop 集群。

1) 从 Apache 下载所有相关框架并手动设置它们。这里 ( [1](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/) , [2](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/) ) 是一些很好的教程。这种方法需要一些努力，但有很多东西需要学习。

2) 使用[Cloudera Manager](http://www.cloudera.com/content/cloudera/en/products/cloudera-manager.html)自动安装 Hadoop 和其他相关框架，如 Hive、HBase、ZooKeeper 等。还有一些其他公司提供自动安装，如HortonWorks 的[HDP](http://docs.hortonworks.com/HDPDocuments/HDP1/HDP-1.2.1/bk_using_Ambari_book/content/ambari-chap1.html)。大多数事情都是自动化的，隐藏在 UI 后面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:00:26.897

我找到了解决问题的方法：确实，我的直觉是正确的，我的配置确实被忽略了。

来自 YAHOO的[预配置 VM](http://developer.yahoo.com/hadoop/tutorial/module3.html#vm-setup)有一些晦涩的附加配置目录。这会覆盖“conf”目录中的所有配置 - 即使您手动启动集群并且不使用提供的教程启动脚本。

所以我删除了该目录并放置了一个指向 conf 目录的同名符号链接。现在它按预期工作。呸 :-)*

# javascript - JQuery Lined TextArea 调整大小问题

> ID：14771257
> 
> 赞同：0
> 
> 时间：2013-02-08T11:11:51.410
> 
> 标签：javascript, jquery, html, css, textarea

好的，这是我的问题：

*   我正在使用[JQuery Lined TextArea 插件](http://files.aw20.net/jquery-linedtextarea/jquery-linedtextarea.html)
*   我希望 textarea 覆盖所有浏览器窗口区域（全宽，全高）
*   即使调整了浏览器窗口的大小，我也希望行号能够传播。

* * *

**这是我的 HTML：**

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="jquery.min.js"></script>
        <script src="jquery-linedtextarea.js"></script>
    </head>
    <body>
        <textarea id="tv">
            Some sample text
        </textarea>

        <script>
            $(function() {
                $("#tv").linedtextarea();
            });
        </script>
    </body>
</html> 
```

* * *

**这是我的 CSS ：**

```
body
{
    margin:0;
    padding:0;
}

*:focus {outline:0px none transparent;}

textarea
{
    border:0;
    margin:0;
    width:100%;
    height:100%;
    font-family:Courier, "Courier New";
    font-size:12px;
}

/* Following lines taken directly from Demo */

.linedwrap {
    border: 1px solid #c0c0c0;
}

.linedtextarea {
    padding: 0px;
    margin: 0px;
}

.linedtextarea textarea, .linedwrap .codelines .lineno {
    font-size: 10pt;
    font-family: monospace;
    line-height: normal !important;
}

.linedtextarea textarea {
    padding-right:0.3em;
    padding-top:0.3em;
    border: 0;
}

.linedwrap .lines {
    margin-top: 0px;
    width: 50px;
    float: left;
    overflow: hidden;
    border-right: 1px solid #c0c0c0;
    margin-right: 10px;
    background:#DDD;
}

.linedwrap .codelines {
    padding-top: 5px;
}

.linedwrap .codelines .lineno {
    color:#AAAAAA;
    padding-right: 0.5em;
    padding-top: 0.0em;
    text-align: right;
    white-space: nowrap;
}

.linedwrap .codelines .lineselect {
    color: red;
} 
```

* * *

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:37:45.080

在您的文件中尝试以下`jquery`代码：

```
<script>
    $(function() {
    $("#tv").width(window.screen.width);//widht of parent element of textarea
    $("#tv").height(window.screen.height);//height of parent element of textarea
        $("#tv").linedtextarea(
        {selectedLine: 1}
    );
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-19T14:28:01.910

我将以下内容用于我的（非常相似的）问题。可能不优雅，但它有效。

```
$(window).on('resize', function(){
    // Grab the current textarea
    var $textArea = $("#tv");
    // And the text in it
    var $text =  $textArea.val();
    // Work out the parent of the original textarea, without all the lined containers
    var $parent = $("#tv").parent().parent().parent();
    // Get selection to restore later
    var start = $textArea[0].selectionStart;
    var end = $textArea[0].selectionEnd;

    // Get rid of the lined textarea
    $("#tv").parent().parent().remove();

    // Create a new textarea
    $parent.append("<textarea id='tv'></textarea>");

    // Grab a reference to the new textarea
    $textArea = $("#tv");

    // Restore the contents
    $textArea.val($text);

    // Set the height of the new textbox to fill it's parent
    $textArea.height($textArea.parent().parent()[0].clientHeight);//height of parent element of textarea

    // Line it up
    $textArea.linedtextarea();      

    // Can't remember if this is required...
    $textArea = $("#tv");

    // Set up selection
    $textArea[0].selectionStart = start;
    $textArea[0].selectionEnd = end;

    // Optionally... focus teh textbox
    $textArea.focus();
});

// Set original height to fit parent
$("#tv").height($("#tv").parent().parent()[0].clientHeight);//height of parent element of textarea
$("#tv").linedtextarea(
    {selectedLine: 1}
); 
```

# cordova - 新的 Cordova InAppBrowser 按钮

> ID：14771260
> 
> 赞同：2
> 
> 时间：2013-02-08T11:11:53.680
> 
> 标签：cordova

有没有办法在新的浏览器窗口中设置样式或至少设置所需的按钮？

我知道我可以使用 ChildBrowser 插件来做到这一点，并且它可以与新的 Cordova 一起使用 - 但我们想尝试将新的 InAppBrowser 作为标准。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:08:47.610

我玩了一下，我可以通过复制**CDVInAppBrowser.m**文件中的关闭按钮代码来添加一个新按钮。然后我通过 shareButton 更改名称 closeButton 并通过一个新函数 wnShare 更改函数回调，如下所示：

```
self.shareButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemSave target:self action:@selector(wnShare)];
self.shareButton.enabled = YES;
self.shareButton.imageInsets = UIEdgeInsetsZero;
self.shareButton.style = UIBarButtonItemStylePlain;
self.shareButton.width = 38.000; 
```

然后，您可以通过将代码添加到新函数来添加单击按钮时要执行的操作：

```
- (void)wnShare
{
    /* Whatever ou want to do when the button is tapped goes here */
} 
```

现在我正在研究如何打开一个对话框并显示许多共享链接，以共享通过不同社交媒体显示的当前网站。如果你有一些线索，请告诉:-)

如果有人需要，我在我的博客中写了一个完整的修改列表：http: [//blog.cubeinspire.com/how-to-add-a-new-event-type-in​​to-cordova-2-4-0-phonegap -2-4-0-to-the-plugin-inappbrowser/](http://blog.cubeinspire.com/how-to-add-a-new-event-type-into-cordova-2-4-0-phonegap-2-4-0-to-the-plugin-inappbrowser/)

# android - 在android中的视图中重叠图像

> ID：14771261
> 
> 赞同：1
> 
> 时间：2013-02-08T11:11:59.167
> 
> 标签：android

我需要创建一个包含两个图像的布局。（我正在附上图像文件）。图像应该是第一个应该重叠在第二个上。请一些人帮助我，因为我是 android 的新手，任何帮助都会是可观的。实际上有两个图像，一个是普通图像，另一个有斜线。我想让结果图像看起来像下面这样![在此处输入图像描述](../Images/d3493cf285fbca50551c7b3250faed01.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T11:21:08.873

你需要这样的框架布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:orientation="vertical"
       android:layout_width="match_parent"
       android:layout_height="match_parent">
  <ImageView
            android:id="@+id/image1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@drawable/image1"/>
  <ImageView
            android:id="@+id/image2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@drawable/image2"/> 
```

这将在彼此的顶部布局项目。:)

# c++ - operator() 缺少参数列表

> ID：14771263
> 
> 赞同：0
> 
> 时间：2013-02-08T11:12:02.960
> 
> 标签：c++

我遇到了一些奇怪的错误，我需要一些帮助。这是代码：

观察.h：

```
class Obs;

struct Try : public std::pair<Item&, std::pair<int, int> > {
    Item& item() const;
    int dx() const;
    int dy() const;

    Try( Item& i, int _dx, int _dy );
};

struct Pred : public std::binary_function<Obs, Try, bool> {
    bool operator() (Obs& o, Try& m) const;
};

class Obs {

    Rect position;

public:

    Obs (Rect dimensions);
    bool Allows (Item i, int dx, int dy) const;

}; 
```

Obs.cpp：

```
Try::Try (Item& i, int _dx, int _dy) {
    first = i;
    second.first = _dx;
    second.second = _dy;
}

bool Obs::Allows (Item i, int dx, int dy) const {
    //
}

bool Pred::operator()(Obs& o, Try& m) const {
    return !o.Allows( m.item(), m.dx(), m.dy() );
}

Item& Try::item() const {
    return first;
}

int Try::dx() const {
    return second.first;
}

int Try::dy() const {
    return second.second;
} 
```

ObsHolder.h：

```
class ObsHolder {

    std::list< Obs* > list;

public:

    void AddObstacle (Obs* obs);
    bool CanMove (Item& i, int dx, int dy);

}; 
```

ObsHolder.cpp：

```
bool ObsHolder::CanMove (Item& i, int dx, int dy) {

    return std::find_if( list.begin(), list.end(), std::bind2nd(Pred::operator(), Try(i, dx, dy) )) == list.end();

} 
```

我得到的主要错误是：

> 'Pred::operator ()': 函数调用缺少参数列表；使用 '&Pred::operator ()' 创建指向成员的指针

我也得到：

> c:\program files (x86)\microsoft visual studio 11.0\vc\include\utility(85): error C2440: 'initializing' : cannot convert from 'int' to 'Item &'

还有几下`"*my_path*\microsoft visual studio 11.0\vc\include\utility(83)" complaining about std::pair`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:17:46.617

这里有很多问题。

1.  `pair`不能采用引用模板参数。你需要使用`std::reference_wrapper`.
2.  不要使用已弃用的活页夹。他们在引用参数方面存在问题。
3.  不要继承自`pair`. 它没有虚拟析构函数。

如果你真的想使用`bind2nd`: 它不接受成员函数指针作为参数，而是一个可调用对象的值。

现代 C++ 中的完整示例。我仍然不会使用 `std::list<Obs*>`管理内存本身的东西。

```
#include <utility>
#include <functional>
#include <tuple>
#include <list>
#include <algorithm>

class Obs;
class Item {};

typedef std::tuple<std::reference_wrapper<Item>, int, int> Try;

Item& item(Try& t) { return std::get<0>(t); }
const Item& item(const Try& t) { return std::get<0>(t); }
int dx(const Try& t) { return std::get<1>(t); }
int dy(const Try& t) { return std::get<1>(t); }
Try make_try(Item& i, int x, int y) { return std::make_tuple(std::ref(i), x, y); }

// missing
struct Rect {}; 

class Obs {
  Rect position;
public:

  Obs (Rect dimensions) : position(dimensions) {}
  bool Allows (Item i, int dx, int dy) const { return false; /* quite compiler */ }
};

struct Pred {
  bool operator() (Obs& o, const Try& m) const {
    return !o.Allows( item(m), dx(m), dy(m) );
  }
};

class ObsHolder {
  std::list< Obs* > list;
public:

  void AddObstacle (Obs* obs);
  bool CanMove (Item& i, int dx, int dy) {
    Pred p;
    auto x = make_try(i, dx, dy);
    return std::find_if(list.begin(), list.end(), 
                        [=](Obs* o) { return p(*o, x); }) == list.end();
  }
};

int main()
{

  return 0;
} 
```

# kendo-ui - Kendo 网格更改事件不会在 casperJS 单击时触发

> ID：14771265
> 
> 赞同：1
> 
> 时间：2013-02-08T11:12:12.173
> 
> 标签：kendo-ui, casperjs, kendo-grid

我有一个模糊的问题，我发现很难用 Kendo Grid 追踪。通过浏览器，我可以单击一行，并且在触发更改事件时可以很好地选择它。但是，如果我使用 casperJS单击`tr`or元素：`td`

```
casper.thenClick('#id-of-the-grid tr:nth-child(2)', function () {
    this.capture('gridSelect.png');
}); 
```

我在拍摄的照片上没有任何突出显示。我曾尝试触发 mousedown，然后触发 mouseup 命令、单击命令、各种变体，但我仍然无法触发 Kendo Grid`change`事件。我认为`change`事件是由 mouseup 触发的，我错了吗？我是否单击了错误的元素并且 Kendo Grid 响应了不同的元素单击事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T15:48:57.780

有同样的问题。这个解决方案似乎对我有用。我改编了这个例子希望这对你有用。

我所做的是首先触发***mousedown***，***单击***，然后在特定元素上触发***mouseup***事件。

```
casper.then(function() {
    this.mouseEvent('mousedown', '#id-of-the-grid tr:nth-child(2)');
    this.mouseEvent('click', '#id-of-the-grid tr:nth-child(2)');
    this.mouseEvent('mouseup', '#id-of-the-grid tr:nth-child(2)');
}

casper.then(function() {
    this.capture('gridSelect.png');
} 
```

# bash - 使用变量的 2 个模式搜索之间的 awk 似乎不起作用

> ID：14771277
> 
> 赞同：1
> 
> 时间：2013-02-08T11:12:50.160
> 
> 标签：bash, awk

测试文件

```
cat text.txt 
09:00:00 TESTING
09:00:01 TESTING
09:00:02 TESTING
09:00:03 TESTING
09:00:04 TESTING
09:01:00 TESTING
09:01:01 TESTING
09:01:02 TESTING
09:01:03 TESTING
09:02:00 TESTING
09:02:01 TESTING
09:02:02 TESTING
09:02:03 TESTING
09:03:00 TESTING
09:03:01 TESTING
09:03:02 TESTING
09:03:03 TESTING 
```

没有变量的实际模式搜索可以正常工作：

```
cat ./text.txt|awk -v start="09:01" -v end="09:02" '/09:01/,/09:02/' text.txt
09:01:00 TESTING
09:01:01 TESTING
09:01:02 TESTING
09:01:03 TESTING
09:02:00 TESTING 
```

使用失败的变量进行模式搜索

```
awk -v start="09:01" -v end="09:02" '/start/,/end/' text.txt 
```

讨厌的 hack 使用 shell echo 包装变量，使其工作

```
echo "awk -v start="09:01" -v end="09:02" '/$start/,/$end/' text.txt"
awk -v start=09:01 -v end=09:02 '/09:01/,/09:02/' text.txt

start="09:01"; end="09:02"; echo "awk -v start="09:01" -v end="09:02 text.txt" '/$start/,/$end/'"|/bin/sh
09:01:00 TESTING
09:01:01 TESTING
09:01:02 TESTING
09:01:03 TESTING
09:02:00 TESTING 
```

关于我做错了什么或者这是否是 awk 中可能的功能的任何想法？

这些建议奏效了，我的结果有所不同：

1.

```
awk -v start="09:01" -v end="09:02" '$0~start,$0~end' text.txt
09:01:00 TESTING
09:01:01 TESTING
09:01:02 TESTING
09:01:03 TESTING
09:02:00 TESTING 
```

2.

```
awk -v start="09:01" -v end="09:02" 'match($0,start),match($0,end)' text.txt
09:01:00 TESTING
09:01:01 TESTING
09:01:02 TESTING
09:01:03 TESTING
09:02:00 TESTING 
```

3.

```
awk -v start="09:01" -v end="09:02" '$0~start{print}$0~end{print}' text.txt
09:01:00 TESTING
09:01:01 TESTING
09:01:02 TESTING
09:01:03 TESTING
09:02:00 TESTING
09:02:01 TESTING
09:02:02 TESTING
09:02:03 TESTING 
```

4.

```
awk -v start="09:01" -v end="09:02"  '$1~start||$1~end' text.txt
09:01:00 TESTING
09:01:01 TESTING
09:01:02 TESTING
09:01:03 TESTING
09:02:00 TESTING
09:02:01 TESTING
09:02:02 TESTING
09:02:03 TESTING 
```

3 和 4 返回完整的结果 前两个在到达模式后立即停止

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T14:59:56.800

您需要将变量锚定到行首：

```
awk -v start="09:01" -v end="09:02" '$0~"^"start,$0~"^"end' text.txt 
```

所以 09:02 匹配 09:02:01 但不匹配 17:09:02。

就我个人而言，我不会使用这个范围的东西，而是在适当的时候设置/清除/测试一个标志，因为它更具可扩展性。例如，尝试其中的每一个，看看是否容易操作打印或不打印分隔线：

```
awk -v start="09:01" -v end="09:02" '$0~"^"start{f=1} f; $0~"^"end{f=0}' text.txt
awk -v start="09:01" -v end="09:02" 'f; $0~"^"start{f=1} $0~"^"end{f=0}' text.txt
awk -v start="09:01" -v end="09:02" '$0~"^"start{f=1} $0~"^"end{f=0} f;' text.txt
awk -v start="09:01" -v end="09:02" '$0~"^"end{f=0} f; $0~"^"start{f=1}' text.txt 
```

我从您接受@sudo_Os 的回答中看到，您可能希望获得所有 09:02 时间，而不是停留在第一个时间。如果这是真的，只需使用字符串而不是 RE 比较：

```
$ awk -v start="09:01" -v end="09:02" '$1>=start":00" && $1<=end":59"' file
09:01:00 TESTING
09:01:01 TESTING
09:01:02 TESTING
09:01:03 TESTING
09:02:00 TESTING
09:02:01 TESTING
09:02:02 TESTING
09:02:03 TESTING 
```

或者这会给出相同的结果：

```
$ awk -F: -v start="09:01" -v end="09:02" '$1FS$2>=start && $1FS$2<=end' file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T11:31:58.260

比赛不应该是：

```
$ awk -F: -v hour=9 -v start=1 -v end=2 '$1==hour && $2>=start && $2<=end' file
09:01:00 TESTING
09:01:01 TESTING
09:01:02 TESTING
09:01:03 TESTING
09:02:00 TESTING
09:02:01 TESTING
09:02:02 TESTING
09:02:03 TESTING 
```

你不想要所有的`09:02:XX`线条吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T11:28:16.033

要使用 start 和 end 作为模式，您可以使用运算符明确告诉 awk `~`：

```
awk -v start="09:01" -v end="09:02" '$0 ~ start,$0 ~ end' 
```

或与`match()`：

```
awk -v start="09:01" -v end="09:02" 'match($0,start),match($0,end)' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T13:50:03.750

```
awk -v start="09:01" -v end="09:02" 'substr($0,1,5) >= start && substr($0,1,5) <= end' test.txt 
```

当时间范围跨越小时的顶部时，这将起作用，并且只会查看小时和分钟。不使用 $1，以避免“命中”具有前导空白但其他匹配的内容。

坦率地说，我会使用 BEGIN 和一些参数来设置开始/结束。因为你*可以*在一条线上获得很多东西，但这并不意味着你必须这样做，无论如何对我来说。

这是我使用的数据：

```
09:00:00 TESTING
09:00:01 TESTING
09:00:02 TESTING
09:00:03 TESTING
09:00:04 TESTING
09:01:00 TESTING
09:01:01 TESTING
09:01:02 TESTING
09:01:03 TESTING
09:02:00 TESTING
09:02:01 TESTING
09:02:02 TESTING
09:02:03 TESTING
09:03:00 TESTING
09:03:01 TESTING
09:03:02 TESTING
09:03:03 TESTING
02:09:01 toasted
19:01:01 toasted
  09:01:01 toasted
20:00:00 toasted 09:01:01 
```

# three.js - THREE.js Skybox 不工作

> ID：14771279
> 
> 赞同：1
> 
> 时间：2013-02-08T11:12:52.907
> 
> 标签：three.js, webgl

我正在尝试根据《Up and running》一书制作我自己的天文馆版本，但在尝试制作天空盒时遇到了问题。

我正在使用 Chrome，javascript 控制台在定义材料的行中显示错误“Uncaught TypeError: undefined is not a function”。

我错过了一些图书馆吗？还是three.js中的一些变化？我正在使用 r55。代码如下：

谢谢！

```
var urlPrefix   = "images/skybox/";
var urls = [ 
urlPrefix + "skyboxmid.jpg", urlPrefix + "skyboxback.jpg",
urlPrefix + "skyboxleft.jpg", urlPrefix + "skyboxfront.jpg",
urlPrefix + "skyboxright.jpg", urlPrefix + "skyboxtop.jpg" ];

var textureCube = THREE.ImageUtils.loadTextureCube( urls );
var shader  = THREE.ShaderLib['normalmap'];
shader.uniforms["tNormal"].texture = textureCube;
var material = new THREE.MeshShaderMaterial({
    fragmentShader  : shader.fragmentShader,
    vertexShader    : shader.vertexShader,
    uniforms    : shader.uniforms
});

skybox  = new THREE.Mesh( new THREE.CubeGeometry( 100000, 100000, 100000, 1, 1, 1, null, true ), material );
scene.addObject( skybox ); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T16:08:20.697

就是现在

```
new THREE.ShaderMaterial() 
```

和

```
shader.uniforms["tNormal"].value = textureCube; 
```

您正在使用的*Up and Running手册已过期。*

而是搜索 three.js 示例目录。还有其他创建天空盒的方法。

三.js r.55

# c# - 从 asp.net 中的 page_load 事件触发 oncommand 事件

> ID：14771280
> 
> 赞同：0
> 
> 时间：2013-02-08T11:12:55.963
> 
> 标签：c#, asp.net, events

我正在用 asp.net 和 c#.net 开发网站。我的页面上有一些 2-3 个图像按钮。我为某些功能的所有图像按钮附加了命令 oncommand 事件和命令参数。我的 oncommand 代码是这样的

```
protected void btnMenuTab_Command(object sender, CommandEventArgs e)
{
  int CID = Convert.ToInt32(e.CommandArgument);
  MethodToCall(CID);
} 
```

这工作正常。现在我可以从 Page_Load 事件调用/触发第一个图像按钮的单击/命令事件，以编程方式调用上面显示的方法。我不想让用户单击按钮并获得结果，而是在 Page_Load 上以编程方式触发图像按钮单击/命令事件以显示结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:44:02.760

您可以致电：

```
btnMenuTab_Command(btnMenuTab, new CommandEventArgs("commandName", "argument")); 
```

但是您必须自己指定您期望的整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:53:02.163

嘿，感谢您的帮助，但我得到了解决方案。只需像调用其他方法一样调用命令事件方法，但根据我们的要求为其创建参数。看到我想调用命令事件所以

```
object mysender = (object)ControNameHere;
CommandEventArgs mye = new CommandEventArgs(null, ControNameHere.CommandArgument);
btn_Command(mysender, mye); 
```

# android - 如何从android蓝牙建立与obd2的连接

> ID：14771287
> 
> 赞同：9
> 
> 时间：2013-02-08T11:13:13.997
> 
> 标签：android, bluetooth

我需要从我的 android 应用程序中建立与 obd2 设备的连接，例如扭矩应用程序。我需要从 android 手机配对它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-02-09T13:17:39.480

> 该服务用于查找配对的 OBD-2，连接并持续获取实时数据，即标准 PID，并在后台查找基于标准 PID 的其他实时参数，如总行驶距离、油耗等。这在移动和主机（安装在汽车中）中进行了测试。请参阅 android-obd-reader 示例应用程序：

[https://github.com/md-sohrab-alam/android-obd-reader](https://github.com/md-sohrab-alam/android-obd-reader)

```
package com.sohrab.obd.reader.service;

import android.app.IntentService;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothManager;
import android.bluetooth.BluetoothSocket;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.os.Binder;
import android.os.Build;
import android.os.IBinder;
import android.support.annotation.Nullable;
import android.text.TextUtils;
import android.widget.Toast;

import com.sohrab.obd.reader.application.ObdPreferences;
import com.sohrab.obd.reader.constants.DefineObdReader;
import com.sohrab.obd.reader.enums.ObdProtocols;
import com.sohrab.obd.reader.obdCommand.ObdCommand;
import com.sohrab.obd.reader.obdCommand.ObdConfiguration;
import com.sohrab.obd.reader.obdCommand.control.TroubleCodesCommand;
import com.sohrab.obd.reader.obdCommand.protocol.EchoOffCommand;
import com.sohrab.obd.reader.obdCommand.protocol.LineFeedOffCommand;
import com.sohrab.obd.reader.obdCommand.protocol.ObdResetCommand;
import com.sohrab.obd.reader.obdCommand.protocol.SelectProtocolCommand;
import com.sohrab.obd.reader.obdCommand.protocol.SpacesOffCommand;
import com.sohrab.obd.reader.obdCommand.protocol.TimeoutCommand;
import com.sohrab.obd.reader.trip.TripRecord;
import com.sohrab.obd.reader.utils.L;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Set;

import app.com.android_obd_reader.R;

/**
 * created by sohrab 01/12/2017
 * <p>
 * Service for managing connection and data communication with a OBD-2 in background and update data to RealTime screen.
 * It connects paired OBD-2 Or wait until paired.
 * Once it is paired, try to connect with Bluetooth Socket along with some specific OBD-2 command,
 * if connected, fetch data until OBD-2 disconnected and if somehow,
 * it disconnected then go to connect and this is in loop until user quit from App.
 */

public class ObdReaderService extends IntentService implements DefineObdReader {
    private static final String TAG = "ObdReaderService";
    // receive when OBD-2 connected

    public final static char PID_STATUS_SUCCESS = '1';
    public final static int DEVICE_NOT_PAIRED = 1;
    public final static int OBD_NOT_RESPONDING = 2;
    public final static int OBD_CONNECTED = 3;
    public final static int INIT_OBD = 4;

    //   private static final int NOTIFICATION_ID = 101;
    private static final int DELAY_FIFTEEN_SECOND = 15000;
    private static final int DELAY_TWO_SECOND = 2000;
    // this is used to find TroubleCode if true. This is used in InspectionActivity where fault is shown.
    public boolean mIsFaultCodeRead = true;
    private final IBinder mBinder = new LocalBinder();
    //   private int mLastNotificationType;
    // name of OBD
    private String OBD_SMALL = "obd";
    private String OBD_CAPS = "OBD";
    private String V_LINK = "V-LINK";
    private BluetoothManager mBluetoothManager;//Bluetooth Manager
    private BluetoothAdapter mBluetoothAdapter;//Bluetooth adapter
    private BluetoothSocket mSocket;
    //set OBD-2 connection status
    private boolean isConnected;
    // private NotificationCompat.Builder mNotificationBuilder;
    //  private NotificationManager mNotificationManager;
    private boolean mIsRunningSuccess;
    private Intent mIntent = new Intent(ACTION_READ_OBD_REAL_TIME_DATA);
    private char[] mSupportedPids;

    public ObdReaderService() {
        super("ObdReaderService");
        L.i("ObdReaderService");
    }

    @Nullable
    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    @Override
    protected void onHandleIntent(@Nullable Intent intent) {
        L.i("onHandleIntent" + "Thread is :: " + Thread.currentThread().getId());

        // setUpAsForeground();
        if (initiateConnection()) {

            if (!isEnable()) {
                enableBlutooth();
            }

            findObdDevicesAndConnect();
        }

        L.i("onHandleIntent bottom");
        //  mNotificationManager.cancel(NOTIFICATION_ID);
        ObdPreferences.get(getApplicationContext()).setServiceRunningStatus(false);
        ObdPreferences.get(getApplicationContext()).setIsOBDconnected(false);
        TripRecord.getTripRecode(this).clear();
    }

    /**
     * This method is recursively called until service stopped.
     */
    private void findObdDevicesAndConnect() {

        if (!isConnected) {
            findPairedDevices();
        }

        if (isConnected) {
            executeCommand();
        }

        if (ObdPreferences.get(getApplicationContext()).getServiceRunningStatus()) {
            L.i("findObdDevicesAndConnect()");
            findObdDevicesAndConnect();
        }

    }

    /**
     * find paired OBD-2 devices in loop until found and connected or service stopped.
     */
    private void findPairedDevices() {

        while (!isConnected && ObdPreferences.get(getApplicationContext()).getServiceRunningStatus()) {
            if (mBluetoothAdapter != null) {
                boolean deviceFound = false;

                Set<BluetoothDevice> bluetoothDevices = mBluetoothAdapter.getBondedDevices();
                for (BluetoothDevice device : bluetoothDevices) {
                    if (device != null) {
                        String name = device.getName();
                        if (name != null && (name.contains(OBD_SMALL) || name.contains(OBD_CAPS) || name.toUpperCase().contains(V_LINK))) {
                            try {
                                connectOBDDevice(device);
                            } catch (Exception e) {
                                L.i("connectOBDDevice return Exception :: " + e != null ? e.getMessage() : "");
                            }
                            deviceFound = true;
                            break;
                        }
                    }

                }

                if (!deviceFound) {
                  /*  if (mLastNotificationType != DEVICE_NOT_PAIRED) {
                        mLastNotificationType = DEVICE_NOT_PAIRED;
                        updateNotification(getString(R.string.waiting_for_obd));
                    }*/
                    sendBroadcast(ACTION_OBD_CONNECTION_STATUS, getString(R.string.waiting_for_obd));
                }
            }
        }
    }

    /**
     * connects specified bluetooth OBD device with Bluetooth Socket.
     * if bluetooth socked connected then use some init OBD-2 command to initialize,
     * if command response is success, then we assume connection is established and ready to fetch data.
     *
     * @param device
     * @throws Exception
     */
    public void connectOBDDevice(final BluetoothDevice device) throws Exception {

        try {
            mSocket = (BluetoothSocket) device.getClass().getMethod("createInsecureRfcommSocket", new Class[]{int.class}).invoke(device, 1);
        } catch (Exception e) {
            // e.printStackTrace();
            L.i("createInsecureRfcommSocket failed");
            closeSocket();
        }

        if (mSocket != null) {
            try {
                mBluetoothAdapter.cancelDiscovery();
                Thread.sleep(500);
                mSocket.connect();
                L.i("Socket connected");
            } catch (Exception e) {
                L.i("Socket connection  exception :: " + e.getMessage());
                //   e.printStackTrace();
                closeSocket();
            }

            boolean isSockedConnected = mSocket.isConnected();
            if (isSockedConnected) {
                try {
                    Thread.sleep(DELAY_TWO_SECOND);
                  /*  if (mLastNotificationType != INIT_OBD) {
                        mLastNotificationType = INIT_OBD;
                        updateNotification(getString(R.string.connecting_to_ecu));
                    }*/
                    L.i("Executing reset command in new Thread :: " + Thread.currentThread().getId());
                    final Thread newThread = new Thread(new Runnable() {
                        @Override
                        public void run() {
                            try {

                                // this thread is required because in Headunit command.run method block infinitly ,
                                // therefore this thread life is maximum 15 second so that block can be handled.
                                mIsRunningSuccess = false;
                                new ObdResetCommand().run(mSocket.getInputStream(), mSocket.getOutputStream());
                                Thread.sleep(1000);
                                new EchoOffCommand().run(mSocket.getInputStream(), mSocket.getOutputStream());
                                Thread.sleep(200);
                                new LineFeedOffCommand().run(mSocket.getInputStream(), mSocket.getOutputStream());
                                Thread.sleep(200);
                                new SpacesOffCommand().run(mSocket.getInputStream(), mSocket.getOutputStream());
                                Thread.sleep(200);
                                new SpacesOffCommand().run(mSocket.getInputStream(), mSocket.getOutputStream());
                                Thread.sleep(200);
                                new TimeoutCommand(125).run(mSocket.getInputStream(), mSocket.getOutputStream());
                                //  updateNotification(getString(R.string.searching_protocol));
                                Thread.sleep(200);
                                new SelectProtocolCommand(ObdProtocols.AUTO).run(mSocket.getInputStream(), mSocket.getOutputStream());
                                Thread.sleep(200);
                                new EchoOffCommand().run(mSocket.getInputStream(), mSocket.getOutputStream());
                                //  updateNotification(getString(R.string.searching_supported_sensor));
                                Thread.sleep(200);
                                mIsRunningSuccess = true;
                                // checkPid0To20(true);

                            } catch (Exception e) {
                                mIsRunningSuccess = false;
                                L.i("In new thread reset command  exception :: " + e != null ? e.getMessage() : "");
                            }

                        }
                    });

                    newThread.start();
                    newThread.join(DELAY_FIFTEEN_SECOND);
                    L.i("Thread wake to check reset command status  i.e  :: " + Thread.currentThread().getId() + ",  mIsRunningSuccess :: " + mIsRunningSuccess);
                    isSockedConnected = mIsRunningSuccess;

                } catch (Exception e) {
                    L.i(" reset command Exception  :: " + e.getMessage());
                    isSockedConnected = false;
                }

            }

            if (mSocket != null && mSocket.isConnected() && isSockedConnected) {
                setConnection(false);
               /* if (mLastNotificationType != OBD_CONNECTED) {
                    mLastNotificationType = OBD_CONNECTED;
                    updateNotification(getString(R.string.connected_ok));
                }
*/
            } else {
                if (mSupportedPids != null && mSupportedPids.length == 32) {

                    if ((mSupportedPids[12] != PID_STATUS_SUCCESS) || (mSupportedPids[11] != PID_STATUS_SUCCESS)) {
                        // speed pid not supportedsupported
                        // updateNotification(getString(R.string.unable_to_connect));
                        sendBroadcast(ACTION_OBD_CONNECTION_STATUS, getString(R.string.unable_to_connect));
                        return;
                    }
                }

                sendBroadcast(ACTION_OBD_CONNECTION_STATUS, getString(R.string.obd2_adapter_not_responding));
/*
                if (mLastNotificationType != OBD_NOT_RESPONDING) {
                    mLastNotificationType = OBD_NOT_RESPONDING;
                    updateNotification(getString(R.string.obd2_adapter_not_responding));
                }
*/
            }
        }

    }

    /**
     * Once OBD-2 connected, this method will execute to fetch data continuously until OBD disconnected or Service stopped.
     */
    private void executeCommand() {
        L.i("executing commands thread is :: " + Thread.currentThread().getId());
        TripRecord tripRecord = TripRecord.getTripRecode(this);
        ArrayList<ObdCommand> commands = (ArrayList<ObdCommand>) ObdConfiguration.getmObdCommands().clone();
        int count = 0;
        while (mSocket != null && mSocket.isConnected() && commands.size() > count && isConnected && ObdPreferences.get(getApplicationContext()).getServiceRunningStatus()) {

            ObdCommand command = commands.get(count);
            try {

                L.i("command run :: " + command.getName());
                command.run(mSocket.getInputStream(), mSocket.getOutputStream());
                L.i("result is :: " + command.getFormattedResult() + " :: name is :: " + command.getName());
                tripRecord.updateTrip(command.getName(), command);
                if (mIsFaultCodeRead) {
                    try {
                        TroubleCodesCommand troubleCodesCommand = new TroubleCodesCommand();
                        troubleCodesCommand.run(mSocket.getInputStream(), mSocket.getOutputStream());
                        tripRecord.updateTrip(troubleCodesCommand.getName(), troubleCodesCommand);
                        mIsFaultCodeRead = false;
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }

                if (mIntent == null)
                    mIntent = new Intent(ACTION_READ_OBD_REAL_TIME_DATA);
                sendBroadcast(mIntent);

            } catch (Exception e) {
                L.i("execute command Exception  :: " + e.getMessage());

                if (!TextUtils.isEmpty(e.getMessage()) && (e.getMessage().equals("Broken pipe") || e.getMessage().equals("Connection reset by peer"))) {
                    L.i("command Exception  :: " + e.getMessage());
                    setDisconnection();
/*
                    if (mLastNotificationType != OBD_NOT_RESPONDING) {
                        mLastNotificationType = OBD_NOT_RESPONDING;
                        updateNotification(getString(R.string.obd2_adapter_not_responding));
                    }
*/
                }
            }
            count++;
            if (count == commands.size()) {
                count = 0;
            }

        }

        // exit loop means connection lost, so set connection status false
        isConnected = false;

    }

    /**
     * send broadcast with specific action and data
     *
     * @param action
     * @param data
     */
    private void sendBroadcast(final String action, String data) {
        final Intent intent = new Intent(action);
        intent.putExtra(ObdReaderService.INTENT_OBD_EXTRA_DATA, data);
        sendBroadcast(intent);
    }

    /**
     * send broadcast with specific action
     *
     * @param action
     */
    private void broadcastUpdate(final String action) {
        final Intent intent = new Intent(action);
        sendBroadcast(intent);
    }

    @Override
    public void onCreate() {
        super.onCreate();
        //fetchLocation();
        ObdPreferences.get(getApplicationContext()).setServiceRunningStatus(true);
        ObdPreferences.get(getApplicationContext()).setIsOBDconnected(false);
        //   mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        L.i("Service Created :: ");
    }

    /**
     * check whether this devices support bluetooth
     *
     * @return
     */
    protected boolean initiateConnection() {
        boolean isBlueToothSupported = getPackageManager().hasSystemFeature(PackageManager.FEATURE_BLUETOOTH);
        boolean isInitialized = initialize();

        if (!isBlueToothSupported || !isInitialized) {
            Toast.makeText(this, getString(R.string.bluetooth_unsupported), Toast.LENGTH_SHORT).show();
            return false;
        }

        return true;
    }

    /**
     * check BluetoothServices available in this device or not
     *
     * @return
     */
    public boolean initialize() {
        if (mBluetoothManager == null) {
            mBluetoothManager = (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);
            if (mBluetoothManager == null) {

                return false;
            }
        }

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR2) {
            mBluetoothAdapter = mBluetoothManager.getAdapter();
        } else {
            mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        }
        if (mBluetoothAdapter == null) {
            return false;
        }
        return true;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        L.i("service onDestroy");
        //mNotificationManager.cancel(NOTIFICATION_ID);
        closeSocket();
        ObdPreferences.get(getApplicationContext()).setServiceRunningStatus(false);
        ObdPreferences.get(getApplicationContext()).setIsOBDconnected(false);
        TripRecord.getTripRecode(this).clear();
    }

    /**
     * close Bluetooth Socket
     */
    private void closeSocket() {
        L.i("socket closed :: ");
        if (mSocket != null) {
            try {
                mSocket.close();
            } catch (IOException e) {
                L.i("socket closing failed :: ");
            }
        }
    }

    /**
     * check whether Bluetooth is enable or not
     *
     * @return
     */
    public boolean isEnable() {
        if (mBluetoothAdapter == null)
            return false;
        return mBluetoothAdapter.isEnabled();

    }

    /**
     * enable bluetooth without user interaction
     *
     * @return
     */
    public boolean enableBlutooth() {
        if (mBluetoothAdapter != null)
            return mBluetoothAdapter.enable();
        return false;
    }

    @Override
    public boolean stopService(Intent name) {
        ObdPreferences.get(getApplicationContext()).setServiceRunningStatus(false);
        return super.stopService(name);

    }

    /*Method used to set device disconnected state through the application...*/
    public void setDisconnection() {
/*
        if (mLastNotificationType != OBD_NOT_RESPONDING) {
            mLastNotificationType = OBD_NOT_RESPONDING;
            updateNotification(getString(R.string.obd2_adapter_not_responding));
        }
*/

        ObdPreferences.get(getApplicationContext()).setIsOBDconnected(false);
        isConnected = false;
        closeSocket();
        L.i("socket disconnected :: ");
      //  broadcastUpdate(ACTION_OBD_DISCONNECTED);
        sendBroadcast(ACTION_OBD_CONNECTION_STATUS, getString(R.string.connect_lost));
    }

    /*Method used to set device connected state through the application...*/
    private void setConnection(boolean isFromBle) {

        ObdPreferences.get(getApplicationContext()).setIsOBDconnected(true);
        isConnected = true;
       // sendBroadcast(ACTION_OBD_CONNECTED, String.valueOf(isFromBle));
        sendBroadcast(ACTION_OBD_CONNECTION_STATUS, getString(R.string.obd_connected));
    }

    /**
     * create Binder instance used to return in onBind method
     */
    public class LocalBinder extends Binder {
        public ObdReaderService getService() {
            return ObdReaderService.this;
        }
    } 
```

```
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:13:58.990

此代码将帮助您与任何蓝牙设备配对，试一试

**蓝牙Demo.java**

```
package com.bluetooth;

import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Set;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothClass;
import android.bluetooth.BluetoothDevice;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.os.ParcelUuid;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class BluetoothDemo extends Activity {
    /** Called when the activity is first created. */
    ListView listViewPaired;
    ListView listViewDetected;
    ArrayList<String> arrayListpaired;
    Button buttonSearch,buttonOn,buttonDesc,buttonOff;
    ArrayAdapter<String> adapter,detectedAdapter;
    static HandleSeacrh handleSeacrh;
    BluetoothDevice bdDevice;
    BluetoothClass bdClass;
    ArrayList<BluetoothDevice> arrayListPairedBluetoothDevices;
    private ButtonClicked clicked;
    ListItemClickedonPaired listItemClickedonPaired;
    BluetoothAdapter bluetoothAdapter = null;
    ArrayList<BluetoothDevice> arrayListBluetoothDevices = null;
    ListItemClicked listItemClicked;
    @Override 
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        listViewDetected = (ListView) findViewById(R.id.listViewDetected);
        listViewPaired = (ListView) findViewById(R.id.listViewPaired);
        buttonSearch = (Button) findViewById(R.id.buttonSearch);
        buttonOn = (Button) findViewById(R.id.buttonOn);
        buttonDesc = (Button) findViewById(R.id.buttonDesc);
        buttonOff = (Button) findViewById(R.id.buttonOff); 
        arrayListpaired = new ArrayList<String>();
        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        clicked = new ButtonClicked();
        handleSeacrh = new HandleSeacrh();
        arrayListPairedBluetoothDevices = new ArrayList<BluetoothDevice>();
        /*
         * the above declaration is just for getting the paired bluetooth devices;
         * this helps in the removing the bond between paired devices.
         */
        listItemClickedonPaired = new ListItemClickedonPaired();
        arrayListBluetoothDevices = new ArrayList<BluetoothDevice>();
        adapter= new ArrayAdapter<String>(BluetoothDemo.this, android.R.layout.simple_list_item_1, arrayListpaired);
        detectedAdapter = new ArrayAdapter<String>(BluetoothDemo.this, android.R.layout.simple_list_item_single_choice);
        listViewDetected.setAdapter(detectedAdapter);
        listItemClicked = new ListItemClicked();
        detectedAdapter.notifyDataSetChanged();
        listViewPaired.setAdapter(adapter);
    }
    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
        getPairedDevices();
        buttonOn.setOnClickListener(clicked);
        buttonSearch.setOnClickListener(clicked);
        buttonDesc.setOnClickListener(clicked);
        buttonOff.setOnClickListener(clicked);
        listViewDetected.setOnItemClickListener(listItemClicked);
        listViewPaired.setOnItemClickListener(listItemClickedonPaired);
    }
    private void getPairedDevices() {
        Set<BluetoothDevice> pairedDevice = bluetoothAdapter.getBondedDevices();            
        if(pairedDevice.size()>0)
        {
            for(BluetoothDevice device : pairedDevice)
            {
                arrayListpaired.add(device.getName()+"\n"+device.getAddress());
                arrayListPairedBluetoothDevices.add(device);
            }
        }
        adapter.notifyDataSetChanged();
    }
    class ListItemClicked implements OnItemClickListener
    {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            // TODO Auto-generated method stub
            bdDevice = arrayListBluetoothDevices.get(position);
            //bdClass = arrayListBluetoothDevices.get(position);
            Log.i("Log", "The dvice : "+bdDevice.toString());
            /*
             * here below we can do pairing without calling the callthread(), we can directly call the
             * connect(). but for the safer side we must usethe threading object.
             */
            //callThread();
            //connect(bdDevice);
            Boolean isBonded = false;
            try {
                isBonded = createBond(bdDevice);
                if(isBonded)
                {
                    //arrayListpaired.add(bdDevice.getName()+"\n"+bdDevice.getAddress());
                    //adapter.notifyDataSetChanged();
                    getPairedDevices();
                    adapter.notifyDataSetChanged();
                }
            } catch (Exception e) {
                e.printStackTrace(); 
            }//connect(bdDevice);
            Log.i("Log", "The bond is created: "+isBonded);
        }       
    }
    class ListItemClickedonPaired implements OnItemClickListener
    {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,long id) {
            bdDevice = arrayListPairedBluetoothDevices.get(position);
            try {
                Boolean removeBonding = removeBond(bdDevice);
                if(removeBonding)
                {
                    arrayListpaired.remove(position);
                    adapter.notifyDataSetChanged();
                }

                Log.i("Log", "Removed"+removeBonding);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
    /*private void callThread() {
        new Thread(){
            public void run() {
                Boolean isBonded = false;
                try {
                    isBonded = createBond(bdDevice);
                    if(isBonded)
                    {
                        arrayListpaired.add(bdDevice.getName()+"\n"+bdDevice.getAddress());
                        adapter.notifyDataSetChanged();
                    }
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace(); 
                }//connect(bdDevice);
                Log.i("Log", "The bond is created: "+isBonded);
            }           
        }.start();
    }*/
    private Boolean connect(BluetoothDevice bdDevice) { 
        Boolean bool = false;
        try {
            Log.i("Log", "service method is called ");
            Class cl = Class.forName("android.bluetooth.BluetoothDevice");
            Class[] par = {};
            Method method = cl.getMethod("createBond", par);
            Object[] args = {};
            bool = (Boolean) method.invoke(bdDevice);//, args);// this invoke creates the detected devices paired.
            //Log.i("Log", "This is: "+bool.booleanValue());
            //Log.i("Log", "devicesss: "+bdDevice.getName());
        } catch (Exception e) {
            Log.i("Log", "Inside catch of serviceFromDevice Method");
            e.printStackTrace();
        }
        return bool.booleanValue();
    };

    public boolean removeBond(BluetoothDevice btDevice)  
    throws Exception  
    {  
        Class btClass = Class.forName("android.bluetooth.BluetoothDevice");
        Method removeBondMethod = btClass.getMethod("removeBond");  
        Boolean returnValue = (Boolean) removeBondMethod.invoke(btDevice);  
        return returnValue.booleanValue();  
    }

    public boolean createBond(BluetoothDevice btDevice)  
    throws Exception  
    { 
        Class class1 = Class.forName("android.bluetooth.BluetoothDevice");
        Method createBondMethod = class1.getMethod("createBond");  
        Boolean returnValue = (Boolean) createBondMethod.invoke(btDevice);  
        return returnValue.booleanValue();  
    }  

    class ButtonClicked implements OnClickListener
    {
        @Override
        public void onClick(View view) {
            switch (view.getId()) {
            case R.id.buttonOn:
                onBluetooth();
                break;
            case R.id.buttonSearch:
                arrayListBluetoothDevices.clear();
                startSearching();
                break;
            case R.id.buttonDesc:
                makeDiscoverable();
                break;
            case R.id.buttonOff:
                offBluetooth();
                break;
            default:
                break;
            }
        }
    }
    private BroadcastReceiver myReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            Message msg = Message.obtain();
            String action = intent.getAction();
            if(BluetoothDevice.ACTION_FOUND.equals(action)){
                Toast.makeText(context, "ACTION_FOUND", Toast.LENGTH_SHORT).show();

                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                try
                {
                    //device.getClass().getMethod("setPairingConfirmation", boolean.class).invoke(device, true);
                    //device.getClass().getMethod("cancelPairingUserInput", boolean.class).invoke(device);
                }
                catch (Exception e) {
                    Log.i("Log", "Inside the exception: ");
                    e.printStackTrace();
                }

                if(arrayListBluetoothDevices.size()<1) // this checks if the size of bluetooth device is 0,then add the
                {                                           // device to the arraylist.
                    detectedAdapter.add(device.getName()+"\n"+device.getAddress());
                    arrayListBluetoothDevices.add(device);
                    detectedAdapter.notifyDataSetChanged();
                }
                else
                {
                    boolean flag = true;    // flag to indicate that particular device is already in the arlist or not
                    for(int i = 0; i<arrayListBluetoothDevices.size();i++)
                    {
                        if(device.getAddress().equals(arrayListBluetoothDevices.get(i).getAddress()))
                        {
                            flag = false;
                        }
                    }
                    if(flag == true)
                    {
                        detectedAdapter.add(device.getName()+"\n"+device.getAddress());
                        arrayListBluetoothDevices.add(device);
                        detectedAdapter.notifyDataSetChanged();
                    }
                }
            }           
        }
    };
    private void startSearching() {
        Log.i("Log", "in the start searching method");
        IntentFilter intentFilter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        BluetoothDemo.this.registerReceiver(myReceiver, intentFilter);
        bluetoothAdapter.startDiscovery();
    }
    private void onBluetooth() {
        if(!bluetoothAdapter.isEnabled())
        {
            bluetoothAdapter.enable();
            Log.i("Log", "Bluetooth is Enabled");
        }
    }
    private void offBluetooth() {
        if(bluetoothAdapter.isEnabled())
        {
            bluetoothAdapter.disable();
        }
    }
    private void makeDiscoverable() {
        Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
        discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
        startActivity(discoverableIntent);
        Log.i("Log", "Discoverable ");
    }
    class HandleSeacrh extends Handler
    {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case 111:

                break;

            default:
                break;
            }
        }
    }
} 
```

这是**main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button 
        android:id="@+id/buttonOn"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="On"/>
    <Button 
        android:id="@+id/buttonDesc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Make Discoverable"/>
   <Button 
       android:id="@+id/buttonSearch"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:text="Search"/>
   <Button 
       android:id="@+id/buttonOff"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:text="Bluetooth Off"/>

   <ListView 
       android:id="@+id/listViewPaired"
       android:layout_width="match_parent"
       android:layout_height="120dp">

   </ListView>

   <ListView 
       android:id="@+id/listViewDetected"
       android:layout_width="match_parent"
       android:layout_height="match_parent">

   </ListView>
</LinearLayout> 
```

**将此权限添加到您的清单文件。**

```
 <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-permission android:name="android.permission.BLUETOOTH" /> 
```

希望这将消除您的所有疑虑。它在同样的情况下对我有所帮助.. [Narendra pal 在这里回答了我的问题](https://stackoverflow.com/a/14254202/1752560)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-31T05:37:20.700

使用下面的 github 演示建立连接并从设备读取数据。 [https://github.com/pires/obd-java-api](https://github.com/pires/obd-java-api)

# grails - 如何在grails中获取域类的实际实例？

> ID：14771290
> 
> 赞同：0
> 
> 时间：2013-02-08T11:13:20.687
> 
> 标签：grails

我有两个班级 ClassA 和 ClassB

```
class ClassA{
    String userName
    String passwd

    .....
}

class ClassB extends ClassA{
    String address_line1
    String address_line2

    .....
} 
```

如果我在查询

```
ClassA obj = ClassA.get(1) 
```

我得到了 ClassB 的实例。如何获取 ClassA 的实际实例。

谢谢

尼米..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:59:18.230

你必须使用这样的代码：

```
def obj = ClassA.get( 1 ) 
```

您遇到了 GORM 陷阱之一，SpringSource 博客中有一篇必读文章：http: [//blog.springsource.org/2010/07/28/gorm-gotchas-part-3/](http://blog.springsource.org/2010/07/28/gorm-gotchas-part-3/)（代理章节）。我建议阅读所有 3 篇文章！你会明白，引擎盖下发生的事情要好得多:-)

附加信息。默认情况下，Grails 在映射类层次结构时使用“每个表的层次结构”策略，因此如果您创建 ClassB，它会与 ClassA 一样保存在同一个表中，因此它们共享相同的主键列。这就是为什么你得到 ClassB 而不是 ClassA 的原因。GORM 根据类型列返回正确的类实例，其中包含信息，层次结构的哪个类存储在您想要的行中。但是如果你愿意，你可以明确地重新输入;-)

# ios6 - iOS6：了解设备日志

> ID：14771292
> 
> 赞同：1
> 
> 时间：2013-02-08T11:13:20.537
> 
> 标签：ios6, crash-reports

我最近切换到 iOS6 并查看了设备日志（我正在寻找一些`jettisoned`，试图找出我的应用程序是否因内存使用而被杀死）。

这部分类似于iOS5的日志

```
Incident Identifier: <identifier>
CrashReporter Key:   <key>
Hardware Model:      iPhoneX,Y
OS Version:          iPhone OS 6.1 (10B144)
Kernel Version:      Darwin Kernel Version 13.0.0:<...>
Date:                2013-02-08 10:27:05 +0100
Time since snapshot: XX ms

Free pages:        945
Active pages:      6629
Inactive pages:    3486
Throttled pages:   87427
Purgeable pages:   1747
Wired pages:       30547
Largest process:   <process name> 
```

以下部分不是。在 iOS5 中，该列被命名为`Name`, `UUID`, `Count`, `resident pages`，但在 iOS6...

```
Processes
     Name                    <UUID>                       rpages       recent_max       [reason]          (state)

           name <XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX>         2834             2834      [highwater]     (daemon) (idle)
           name <XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX>         2047             2047         [vm]         (suspended) 
```

有人可以解释一下是什么`rpages`意思`recent_max`吗`[reason]`？

和：`(daemon)`和很容易理解，但又是什么意思呢？我试图在文档中搜索，但我找不到一个提示......`(idle)``(suspended)``[highwater]``[vm]`

# java - GWT 日志显示构造函数未定义，但文件中没有编译错误

> ID：14771293
> 
> 赞同：0
> 
> 时间：2013-02-08T11:13:23.693
> 
> 标签：java, gwt-ext

```
I am working on GWT-Ext 2.0.4 .
I have just changed panel class and compiled it and it din't threw any error.
But when i ran the application in Hosted mode i got the following error 
```

```
[警告] JavaScript 抛出异常
java.lang.Error：未解决的编译问题：构造函数 GrdRowListener() 未定义

```

```
GrdRowListener 编译成功，整个项目没有编译错误。我也清理了项目并再次构建它，但没有运气。

奇怪的是，这段代码在 WEB-MODE 下工作，而不是在托管模式下工作。

如果您遇到这种情况，感谢您的帮助。

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:38:10.747

托管模式和 Web 模式之间存在差异。基本上，在托管模式下执行实际的 Java 代码，在 Web 模式下只执行编译后的 Javascript 代码。[这里有一个解释](http://www.vinaytechs.com/2009/09/google-web-toolkit-hosted-vs-web-mode.html)。

现在对于您的问题的（可能）原因：您的 GrdRowListener 是否包含空构造函数？如果不是 - 它是否包含任何非空构造函数，因此默认（空）构造函数不可用？对象初始化有时需要一个空的构造函数，例如反序列化/ bean 创建。如果没有这样的构造函数，纯 Javascript 应该可以正常工作，但 Java 代码不会，这可能是您问题的根源。将空构造函数添加到您的类并测试它是否有效。

# mysql - 加入不同的表

> ID：14771302
> 
> 赞同：0
> 
> 时间：2013-02-08T11:14:00.017
> 
> 标签：mysql

我需要解决一个关于基于字段连接表的问题。我有 3 张桌子：

```
NEWS (id,title)

COMMENTS (id,idtopic,message)

NOTIFICATIONS (iduser,idnews,idtopic,idpost) 
```

当`COMMENTS`has`idtopic=0`时为主题，>0 时为主题回复。由`NOTIFICATIONS`用户了解各种信息。

现在我想从其他表中获取字段，选择`NOTIFICATIONS`.

基础`SELECT`是：

```
SELECT idnews,idtopic,idpost FROM notifications WHERE iduser=X 
```

现在我想加入：

*   NEWS->标题，如果 idnews>0
*   COMMENTS->message，如果 idtopic>0
*   COMMENTS->message，如果 idpost>0

我想我应该做这样的事情：

```
SELECT CASE idnews>0 THEN ??,
       CASE idtopic>0 THEN ??, CASE idpost>0 THEN
  FROM NOTIFICATIONS 
```

我想总是返回一个带有标题或消息的字段，因为 idnews/idtopic/idpost 之一总是 >0

如何在不加入每条记录的每个表的情况下在 SELECT 中选择？我不想做

```
SELECT *
 FROM NOTIFICATIONS
 LEFT JOIN NEWS ON NOTIFICATIONS.idnews=NEWS.id
 LEFT JOIN COMMENTS ON NOTIFICATIONS.idtopic=COMMENTS.id
 LEFT JOIN COMMENTS ON NOTIFICATIONS.idpost=COMMENTS.id 
```

因为性能会比to差`CASE WHEN idnews>0 OR idtopic>0 OR idpost>0`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:25:26.233

我不知道这是否是您的要求，但是，您可以在这样的选择中进行选择...

```
SELECT donor.idno, name, contamt, driveno 
FROM donor, donation 
WHERE donor.idno = donation.idno AND driveno > any 
(SELECT driveno FROM drive WHERE drivename = 'Animal Home'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:50:46.653

我希望我理解正确，试试这个：

```
create procedure printNotification(in input_userid int)
BEGIN
  DECLARE id_news int;
  DECLARE id_topic int;
  DECLARE id_post int;
  DECLARE id_title char(30);
  DECLARE id_message char(30);
  SELECT idnews,idtopic,idpost INTO @id_news,@id_topic,@id_post FROM NOTIFICATIONS WHERE iduser=input_userid;
  IF(id_news>0) THEN
    SELECT title INTO @id_title FROM NEWS WHERE id=id_news;
  END IF;

  IF(id_topic>0) THEN
    SELECT message INTO @id_message FROM COMMENTS WHERE id=idtopic;
  END IF;

  IF(idpost>0) THEN
    SELECT message INTO @id_message FROM COMMENTS WHERE id=idpost;
  END IF;

END// 
```

# jquery - 使用 cookie 时不保存更改

> ID：14771317
> 
> 赞同：0
> 
> 时间：2013-02-08T11:14:36.787
> 
> 标签：jquery, css, cookies

我有此代码用于更改页面上的文本颜色。切换效果很好，但 cookie 不保存任何更改。

知道有什么问题吗？

```
$(".white").click(函数(){
        $('.welcome h1,.box p, .newsletter, .responsive, .beauti, .unlimited,.flex-active').css("color","#ffffff");
         if($.cookie('color') != undefined) {
            $('.welcome h1,.box p, .newsletter, .responsive, .beauti, .unlimited,').css('color', 'url(' + $.cookie('color') + ')') ;}
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:21:12.757

您需要设置 $.cookie("color", "value"); 用于节省更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T11:17:32.453

你不能`url(xxx)`用于颜色。[它应该是 HEX、RGB 或 HSL](https://developer.mozilla.org/en-US/docs/CSS/color_value)

# ios - 如何在 safari 中打开 json 中的链接？

> ID：14771319
> 
> 赞同：-2
> 
> 时间：2013-02-08T11:14:42.713
> 
> 标签：ios, json, twitter, hyperlink, clickable

在我的应用程序中，我有一个 UITableView 显示来自下载的 json 文件的推文。许多推文都包含一个链接（例如到 Instagram）。我将如何让这些链接在 Safari 中打开？我需要什么代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:23:32.167

```
[[UIApplication sharedApplication] openURL:myurl]; 
```

还是你的问题在别处？

如果这不能解决问题，一些代码将有助于显示您的表格视图单元格的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:42:54.000

1.  首先，您需要检测您的链接。链接是推文字符串的一部分还是数组中的单独对象？

    ```
    NSString *yourLink = @""; //we will need more detail in your question for this. 
    ```

2.  获得链接后，您需要将其存储为 NSURL，如下所示：

    ```
    NSURL *url = [[NSURL alloc] initWithString:yourLink]; 
    ```

3.  然后您可以使用以下命令在浏览器中打开它：

    ```
    [[UIApplication sharedApplication] openURL:url]; 
    ```

查看您在表格中显示的内容会很有用。它是来自 JSON 的 NSArray 还是 NSDictionary？

# jquery - jQuery - 结合克隆内容和淡入

> ID：14771320
> 
> 赞同：4
> 
> 时间：2013-02-08T11:14:47.057
> 
> 标签：jquery, jquery-animate, appendto

我正在努力实现这个结果：

![工具提示](../Images/27f6e873f119d53e23125f96a4605b91.png)

特征：

1.  **工具提示立即显示**，点击。
2.  **FadeIn 和位置动画同时开始**，然后，仍然在动画位置时，元素**淡出**。
3.  **可以同时显示多个工具提示**（以防两个或多个按钮相继单击）
4.  **消息内容取自动态 JSON 对象。**

我可以在点击时复制和显示工具提示，但由于某种原因**无法为其设置动画**，或替换它的内容。

***我不明白如何选择新的重复元素。***

请参阅下面的示例错误或**[jsFiddle](http://jsfiddle.net/VrCHR/1/)**。

**html**：

```
<div id="ptsAlert">
    <span class="ptsAlert">
        message
        <div class="ptsAlert-arrow"></div>
    </span>
</div>

<table>
    <tr>
        <td class="btn">01</td>
        <td class="btn">02</td>
        <td class="btn">03</td>
    </tr>
    <tr>
        <td class="btn">04</td>
        <td class="btn">05</td>
        <td class="btn">06</td>
    </tr>
</table> 
```

**CSS：**

```
h1 {
    font-size:50px;
    margin:10px;
}
body {
    text-align:center;
}
td {
    border: 1px solid;
    padding: 5px;
    cursor: pointer;
}

.ptsAlert {
  display:none;
  background-color: #EE0000;
  color: #FFFFFF;
  font-size: 27px;
  font-weight: bold;
  line-height: 1.7em;
  margin: 10px auto;
  padding: 0 10px;
  position: absolute;
  text-align: center;
}

.ptsAlert-arrow{
  border-color: #EE0000 transparent transparent;
  border-style: solid;
  border-width: 8px;
  bottom: -15px;
  height: 0;
  left: 3px;
  position: absolute;
  width: 0;
} 
```

**jQuery：**

```
//Function to show points alerts
$('.btn').click(function(event) {
    var points = 10;
        $('#ptsAlert').clone(true, true).contents()
            .appendTo('body')
            .css('top', (event.pageY - 75) + 'px')
            .css('left', (event.pageX - 10) + 'px')
            .css('display', 'inline-block')
            //.hide().fadeIn();
}); 
```

注释行`.hide().fadeIn()`产生以下错误：

```
NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument arg 0 [nsIDOMWindow.getComputedStyle] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:31:52.637

```
//Function to show points alerts
$('.btn').click(function(event) {

      $('#ptsAlert').find("> span").clone(true, true)
            .css('top', (event.pageY - 75) + 'px')
            .css('left', (event.pageX - 10) + 'px')
            .css('display', 'inline-block')
            .appendTo($('body'))
            .hide().fadeIn(); //this line doesn't break the code (anymore)
}); 
```

优化

```
 var $body=$(document.body);
    var $ps=$("#ptsAlert");
    var $tltp = $ps.find(">span");
    $body.on("click",".btn",function(event) {
       $tltp.clone(true, true)
            .css('top', (event.pageY - 75) + 'px')
            .css('left', (event.pageX - 10) + 'px')
            .css('display', 'inline-block')
            .appendTo($body)
            .hide().fadeIn();
      }); 
```

# php - 在codeigniter中处理ajax表单时在视图内渲染视图？

> ID：14771323
> 
> 赞同：0
> 
> 时间：2013-02-08T11:14:52.407
> 
> 标签：php, codeigniter

在处理带有对我的一个控制器函数的 Ajax 调用的表单时，它将在 div 内显示一个通知我将它从
我试图这样做的主要设计中分离出来的通知视图..

```
public function add ()
    {
        $data = array();
        if (!empty($_POST)) {
            $this->model->insert();
                    $this->load->view('dashboard/notification', $data);
            exit;
        }
        $this->load->view('dashboard/categories', $data, FALSE);
    } 
```

但遗憾的是它没有用，什么也没有出现..
当我打印一条简单的消息以显示一切是否正常时，它会显示消息并正常打印..

```
public function add ()
        {
            $data = array();
            if (!empty($_POST)) {
                $this->model->insert();
               echo 'message';
                exit;
            }
            $this->load->view('dashboard/categories', $data, FALSE);
        } 
```

这是jquery脚本

```
$(document).ready(function() { 
     $("#addCatgory").validate({
         rules: {
                categoryname: {
                   required: true,
                   minlength: 5
                },
                categoryslug: {
                   required: true,
                   minlength: 5
                },
                categorytype: {
                   required: true,
                   min : 1
                }
          },        
          messages:{
               categoryname : 'Please enter your name',
               categoryslug : 'Please enter a valid email',
               categorytype : 'Please enter a valid type'
          },
          submitHandler: function(form) {
               $(form).ajaxSubmit({
                   type: "POST", 
                   async: false,  
                   data: $("#addCatgory").serialize(),
                   success: function(data){
                       $('#result').html(data);
                   },
                   error: function(){alert('error');}
                });
              }                                       
          });
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:50:14.823

您需要通过将 TRUE 设置为第三个参数来修改此部分，以便将 HTML 打印回您的 Ajax 响应

```
public function add ()
    {
        $data = array();
        if (!empty($_POST)) {
            $this->model->insert();
                    echo $this->load->view('dashboard/notification', $data, TRUE);
            exit;
        }
        $this->load->view('dashboard/categories', $data, FALSE);
    } 
```

# c# - Windows 8 应用程序中的登录对话框以使用 Live Connect 服务

> ID：14771325
> 
> 赞同：0
> 
> 时间：2013-02-08T11:14:57.893
> 
> 标签：c#, windows-8

当我们从 Windows 8 应用程序调用`LiveAuthClient.LoginAsync(...)`方法时，它将使用 OAuth 2.0 协议联系授权服务器以获取访问令牌（这将启动登录过程）。然后授权服务器验证资源所有者并获取所有者是否授予/拒绝权限。为此，它会在用户代理上抛出 UI 对话框（在本例中是 Windows 8 应用程序）。

我想知道这个对话框是如何在我们的应用程序上弹出的。授权服务器是否会使用弹出对话框的 Live SDK 发送一些信息？我想知道对话的起点。如果有人可以帮助我理解它，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:37:14.247

我自己没有使用过 LiveSDK，但这听起来很像一个标准的 OAuth 过程，就像你自己使用[WebAuthenticationBroker](http://msdn.microsoft.com/library/windows/apps/br227025.aspx)时一样。不过，不确定我是否正确理解了您的问题。如果您想更深入地了解身份验证代理，您应该查看文档中提到的[示例代码。](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)

# image - Joomla 1.5。如何在视频/图像上添加喜欢/不喜欢按钮？

> ID：14771326
> 
> 赞同：0
> 
> 时间：2013-02-08T11:15:23.967
> 
> 标签：image, button, video, joomla, facebook-like

我正在使用 Joomla 1.5 AllVideoShare（版本 1.2.4）扩展。

**问题第 1 部分**

我想问你如何在视频拇指/图像上制作喜欢按钮？例如，如果用户喜欢视频剪辑或图像，他可以点击喜欢按钮，它会计算有多少用户喜欢它。如果可能，它可以是简单的按钮或 Facebook 按钮。也可能制作喜欢/不喜欢按钮（如果用户不喜欢这个视频/图像，他可以不喜欢它）

我要放置的示例：http: [//img689.imageshack.us/img689/268/likecp.png](http://img689.imageshack.us/img689/268/likecp.png)

这是我发布视频的代码部分：

```
 <?php if ($this->params->get('show_'.$header, 1)) : ?>
    <h2> <?php echo $this->escape($this->params->get($header)); ?> </h2>
<?php endif; ?>
<div id="avs_gallery2<?php echo $this->escape($this->params->get('pageclass_sfx')); ?>">
  <?php 
    if(!count($videos)) echo JText::_('ITEM_NOT_FOUND');
    for ($i=0, $n=count($videos); $i < $n; $i++) {   
        $clear = ''; 
        if($column >= $this->cols) {
            $clear  = '<div style="clear:both;"></div>';
            $column = 0;
            $row++;     
        }
        $column++;
        echo $clear;
  ?>

    <span class="name"><?php echo $categories[$i]->name; ?></span> 
    <div id="testas" class="avs_thumb" style="width:190px;" onclick='javascript:location.href="<?php echo JRoute::_($link.$videos[$i]->slug.$qs); ?>"'> 
    <img class="arrow" src="<?php echo JURI::root(); ?>components/com_allvideoshare/assets/play.gif" border="0" style="margin-left:80px; margin-top:47px;" /> 
    <img class="image" src="<?php echo $videos[$i]->thumb; ?>" width="190; " height="120;" title="<?php echo JText::_('CLICK_TO_VIEW') . ' : ' . $videos[$i]->title; ?>" border="0" /> 
    <span class="title"><FONT COLOR="#000000"><?php echo $videos[$i]->title; ?></font></span> 
    <span class="views"><FONT COLOR="#000000"><?php echo JText::_('Peržiūros'); ?> : <strong><?php echo $videos[$i]->views*2+1; ?></strong></font></span> 
        <div class="avs_category_label"><?php echo JText::_('Kategorija'); ?> : <strong><?php echo $videos[$i]->category; ?></strong></div>

  </div>  

  <?php } ?> 
```

**问题第 2 部分**

添加喜欢/不喜欢按钮后，可以按“最受欢迎”（哪个视频最喜欢）对它们进行排序，或者有这么辛苦的工作？

示例：[http ://www.anekdotai.lt/](http://www.anekdotai.lt/)

**问题第 3 部分**

在喜欢/不喜欢按钮的同一位置，我想放置 Facebook 分享按钮。我有有效的脚本，但我无法成功地将它添加到这个地方。

FB分享脚本：

```
<?php
defined('_JEXEC') or die('Restricted access');
$linkTxt = $params->get( 'linkTxt', '' );
$linkColor = $params->get( 'linkColor', '' );
$linkHColor = $params->get( 'linkHColor', '' );
$theUrl = $params->get( 'theUrl', '1' );
$wholeUrl = "location.href.substring(0,location.href.lastIndexOf('/'))";
$currentUrl = "location.href";
?>

<script>function fbs_click() {u=<?php if($params->get('theUrl', 1))
        {
        echo $currentUrl;
        }
        else{
        echo $wholeUrl;
        } ?>;t=document.title;window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');return false;}</script><style> html .fb_share_button { display: -moz-inline-block; display:inline-block; padding:1px 1px 1px 20px; height:17px; color:#<?php echo $linkColor ?>; background:url(http://static.ak.facebook.com/images/share/facebook_share_icon.gif?6:26981) no-repeat left; } html .fb_share_button:hover { color:#<?php echo $linkHColor ?>; background:url(http://static.ak.facebook.com/images/share/facebook_share_icon.gif?6:26981) no-repeat left; text-decoration:none; } </style> <a rel="nofollow" href="http://www.facebook.com/share.php?u=<url>" class="fb_share_button" onclick="return fbs_click()" target="_blank" style="text-decoration:none;"><?php echo $linkTxt; ?></a> 
```

如果我把它放到视频发布代码中，我会收到错误： `Fatal error: Call to a member function get() on a non-object in ..../juokoera.lt/public_html/components/com_allvideoshare/views/videos/tmpl/default.php on line 26`

谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T00:33:26.400

尝试添加以下代码来定义 $params 变量：

`$params = JComponentHelper::getParams( 'com_yourcomponent' );`

# java - Java签名零和装箱

> ID：14771328
> 
> 赞同：39
> 
> 时间：2013-02-08T11:15:32.503
> 
> 标签：java, double, boxing

最近我用 Java 编写了一个项目，并注意到双/双实现的一个非常奇怪的特性。Java 中的 double 类型有两个 0，即 0.0 和 -0.0（带符号的零）。奇怪的是：

```
0.0 == -0.0 
```

计算结果为`true`，但是：

```
new Double(0.0).equals(new Double(-0.0)) 
```

评估为`false`。有谁知道这背后的原因？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-08T11:17:33.310

这一切都在[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#equals%28java.lang.Object%29)中进行了解释：

> 请注意，在大多数情况下，对于 Double 类的两个实例 d1 和 d2，d1.equals(d2) 的值当且仅当
> 
> ```
>  d1.doubleValue() == d2.doubleValue() 
> ```
> 
> 也有值 true。但是，有两个例外：
> 
> *   如果 d1 和 d2 都表示 Double.NaN，则 equals 方法返回 true，即使 Double.NaN==Double.NaN 的值为 false。
> *   **如果 d1 表示 +0.0 而 d2 表示 -0.0，或者反之亦然，则相等测试的值为 false，即使 +0.0==-0.0 的值为 true。**
> 
> 此定义允许哈希表正常运行。

* * *

现在你可能会问为什么`0.0 == -0.0`是真的。事实上，它们并不完全相同。例如：

```
Double.doubleToRawLongBits(0.0) == Double.doubleToRawLongBits(-0.0); //false 
```

是假的。但是，[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.21.1)要求（“*根据 IEEE 754 标准的规则*”）：

> 正零和负零被认为是相等的。

因此`0.0 == -0.0`是真的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T00:18:49.363

了解 Double 类中带符号零的使用很重要。（大量有经验的 Java 程序员没有）。

*简短的回答是（根据定义）在 Double 类提供的所有方法（即 equals()、compare()、compareTo() 等）中“-0.0 小于 0.0”*

Double 允许所有浮点数“在数轴上完全排序”。基元的行为方式与用户思考事物的方式相同（现实世界的定义）... 0d = -0d

以下片段说明了行为...

```
final double d1 = 0d, d2 = -0d;

System.out.println(d1 == d2); //prints ... true
System.out.println(d1 < d2);  //prints ... false
System.out.println(d2 < d1);  //prints ... false
System.out.println(Double.compare(d1, d2)); //prints ... 1
System.out.println(Double.compare(d2, d1)); //prints ... -1 
```

还有其他相关的帖子很好地解释了背景......

1：**[为什么浮点数有符号零？](https://stackoverflow.com/questions/13544342/why-do-floating-points-have-signed-zeros)**

2：**[为什么Java的 Double.compare(double, double) 是这样实现的？](https://stackoverflow.com/questions/1726254/why-is-javas-double-comparedouble-double-implemented-the-way-it-is)**

还有一句警告...

如果您不知道在 Double 类中**"-0.0 is less than 0.0"** ，那么在逻辑测试中使用 Double 中的**equals()**和**compare()**和**compareTo()**等方法时，您可能会被抓到。例如，看...

```
final double d3 = -0d; // try this code with d3 = 0d; for comparison

if (d3 < 0d) {     
    System.out.println("Pay 1 million pounds penalty");
} else {           
    System.out.println("Good things happen"); // this line prints
}

if (Double.compare(d3, 0d) < 0) { //use Double.compare(d3, -0d) to match the above behaviour
    System.out.println("Pay 1 million pounds penalty"); // this line prints
} else {                              
    System.out.println("Good things happen"); 
} 
```

对于equals，您可以尝试... new Double(d3).equals(0d) || 新双（d3）。等于（-0d）

* * *

## 回答 #3

> 赞同：-9
> 
> 时间：2013-02-08T11:19:26.850

通过使用 == 语句，您可以比较值。使用等于您正在比较对象。

# android - 在 android 4.2 中获取多个用户

> ID：14771331
> 
> 赞同：-1
> 
> 时间：2013-02-08T11:15:43.327
> 
> 标签：android

有没有办法找到设备中配置的用户列表（android 4.2+）？

谢谢， 杰扬蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:33:29.987

好。如果你看到`UserManager.java`源代码，你可以找到这些方法。然而，`android.permission.MANAGE_USERS`这些方法需要。

具有签名|系统的`MANAGE_USERS`保护级别，这意味着必须使用平台密钥对应用程序进行签名。

```
/**
     * Returns information for all users on this device.
     * Requires {@link android.Manifest.permission#MANAGE_USERS} permission.
     * @return the list of users that were created.
     * @hide
     */
    public List<UserInfo> getUsers() {
        try {
            return mService.getUsers(false);
        } catch (RemoteException re) {
            Log.w(TAG, "Could not get user list", re);
            return null;
        }
    }

    /**
     * Returns information for all users on this device.
     * Requires {@link android.Manifest.permission#MANAGE_USERS} permission.
     * @param excludeDying specify if the list should exclude users being removed.
     * @return the list of users that were created.
     * @hide
     */
    public List<UserInfo> getUsers(boolean excludeDying) {
        try {
            return mService.getUsers(excludeDying);
        } catch (RemoteException re) {
            Log.w(TAG, "Could not get user list", re);
            return null;
        }
    } 
```

# objective-c - 多次调用connectionDidFinishLoading .. 为什么？

> ID：14771333
> 
> 赞同：1
> 
> 时间：2013-02-08T11:15:58.347
> 
> 标签：objective-c, xcode

我在用着 `NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];`

我在调试代码时注意到

```
connectionDidFinishLoading:(NSURLConnection *)connection 
```

多次调用，有什么线索吗？

# php - PHP 日期格式化 DST

> ID：14771339
> 
> 赞同：0
> 
> 时间：2013-02-08T11:16:18.867
> 
> 标签：php, timezone, dst

我使用 jquery datetime-picker 的修改版本在我的站点的管理面板中生成了一个 unix-timestamp。

这个时间戳被保存到一个 mySQL 数据库中，在前端我通过`strftime()`函数输出它。

由于该站点有多个管理员并且每个人都开始添加内容，由于我们所在的时区 (GMT+1)，我在输出时间遇到了 1 小时的偏移量。因为已经添加了内容，我无法编辑生成日期并将其写入数据库的函数，所以我不得不在前端编辑输出函数。

我认为只添加 (myTime+3600) 作为`strftime`函数的参数会很聪明。一切正常，并添加了更多内容。

现在的问题是，由于夏令时，所有指定日期为 2013 年 4 月的内容都晚了一个小时。

我只有时间戳可以使用，所以我需要以某种方式获取日期是否需要 1h 偏移量。关于如何在不在时间戳生成函数中添加时区的情况下如何做到这一点的任何想法？

有一个功能。

欢迎任何建议！

**示例**：前端代码：

```
strftime("%d. %B %Y / %H:%M Uhr",new_timestamp+3600); 
```

对于 2013 年 3 月 13 日 16:30，我得到了正确的输出。

2013 年 4 月 13 日 16:30 我得到 17:30

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:20:08.680

使用此[http://php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)设置应用程序默认时区，无论客户端位于哪个时区，都应该强制时间戳进入您的主时区。

您可能还需要编辑 datetimepicker inits 以强制 jquery 也使用基于服务器的时区。

# android - onTaskRemoved 后再次创建服务

> ID：14771341
> 
> 赞同：6
> 
> 时间：2013-02-08T11:16:20.983
> 
> 标签：android, service, android-activity

我做了一个远程服务，这个服务是由我的activity第一次启动时启动的，之后，activity总是查看服务是否启动以避免再次启动它。

该服务在 onCreate 函数中运行一些方法。该服务始终运行并在启动时启动。

问题（不是大问题，但我想知道为什么）是一旦创建了服务，如果我停止我的活动，就会调用 onTaskRemoved，这是正确的，但是几秒钟后，再次调用 oncreate 方法并启动服务再次。

知道为什么吗？我该如何控制呢？

```
<service
        android:name=".Service"
        android:icon="@drawable/ic_launcher"
        android:label="@string/service_name"
        android:process=":update_process" >
</service> 
```

**AndroidManifest.xml**

```
if (!isRunning()) {
    Intent service = new Intent(this, UpdateService.class);
    startService(service);
} else {
    //Just to debug, comment it later
    Toast.makeText(this, "Service was running", Toast.LENGTH_SHORT).show();
} 
```

**如果服务未运行，则启动该服务的时间**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-03T08:56:08.657

问题是你的服务默认是粘性的，这意味着它会在被杀死时重新启动，直到你明确要求它停止。

覆盖`onStartCommand()`服务中的方法，并让它返回`START_NOT_STICKY`。然后你的服务在被杀死时不会重新启动。

```
@Override
public int onStartCommand(Intent intent, int flags, int startId)
{
    return START_NOT_STICKY;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-21T03:29:33.937

尽管 Bjarke 的解决方案是有效的，但我想提出一个替代解决方案，涵盖可能需要在服务中执行任何恢复的情况。

`onStartCommand()`Android在重新启动您的服务后再次调用，通知您服务进程意外崩溃（因为它的任务堆栈已被删除），现在正在重新启动。

如果您查看 的`intent`参数`onCreate()`，它将是`null`（仅适用于此类重启），这表明 Android 正在重新创建您之前意外崩溃的粘性服务。

在某些情况下，明智的做法是`NON_STICKY`仅在此类重新启动时返回，执行任何需要的清理/恢复并停止服务，以便您优雅地退出。

当服务正常启动时，您仍然应该返回，`STICKY`否则您的服务将永远不会重新启动以让您执行任何恢复。

```
@Override
public int onStartCommand(Intent intent, int flags, int startId)
{
    // intent is null only when the Service crashed previously
    if (intent == null) {
        cleanupAndStopServiceRightAway();
        return START_NOT_STICKY;
    }
    return START_STICKY;
}

private void cleanupAndStopServiceRightAway() {
        // Add your code here to cleanup the service

        // Add your code to perform any recovery required
        // for recovering from your previous crash

        // Request to stop the service right away at the end
        stopSelf();
} 
```

另一种选择是请求您的服务停止（使用`stopSelf()`）作为其中的一部分，`onTaskRemoved()`以便 Android 甚至不必首先终止该服务。

# openpgp - 面临使用 Openpgp 库的问题

> ID：14771342
> 
> 赞同：0
> 
> 时间：2013-02-08T11:16:29.707
> 
> 标签：openpgp

我下载了问题中提到的[OpenPGP 示例代码](https://github.com/singpolyma/openpgp-php)[如何使用 PHP OpenPGP 库？](https://stackoverflow.com/questions/12411738/how-do-you-use-the-php-openpgp-library).

当我尝试访问时遇到以下错误`keygen.php`：

> 致命错误：在第 145 行调用 D:\official\data\sites\openpgp\lib\openpgp_crypt_rsa.php 中未定义的方法 OpenPGP_Message::signature_and_data()

事实上，这三个都不起作用。你能解释一下如何解决这些问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:13:50.903

[我猜https://github.com/singpolyma/openpgp-php/blob/master/lib/openpgp_crypt_rsa.php](https://github.com/singpolyma/openpgp-php/blob/master/lib/openpgp_crypt_rsa.php)中的第 148 行

必须从以下位置更正： $sig = $packet->signature_and_data();

到：$sig = $packet->signatures();

# c - Cuda for 循环疑问

> ID：14771343
> 
> 赞同：0
> 
> 时间：2013-02-08T11:16:34.140
> 
> 标签：c, cuda, nvidia

我研究了 cuda 内核函数内部的 for 循环。我将数据分成行和列。我不明白为什么“fillFirstCells_kernel”不能为我提供正确的结果。“fillFirstCells_kernel1”函数提供了预期的结果。

任何意见。

下面是代码：

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h"

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define ROWS    10
#define COLS    4

__global__ void fillData_kernel(int len,
                                unsigned int* data)
{
    int offset = blockIdx.x + blockDim.x * threadIdx.x;

    if (offset < len)
    {
        data[offset] = offset;

        offset += blockDim.x * gridDim.x;
    }
}

__global__ void fillFirstCells_kernel(unsigned int *data,
                                      unsigned int *result)
{
    int offset = blockIdx.x + blockDim.x * threadIdx.x;

    while (offset < ROWS)
    {
        for (int i=0; i<4; i++)
        {
            result[offset] += data[offset*COLS+i];      
            //result[offset] += data[offset*COLS];
            //atomicAdd(&result[offset], 1);
        }

        offset += blockDim.x * gridDim.x;
    }
}

__global__ void fillFirstCells_kernel1(unsigned int *data,
                                      unsigned int *result)
{
    int offset = blockIdx.x + blockDim.x * threadIdx.x;

    if (offset < ROWS)
    {
        result[offset] = data[offset*COLS] + 
                         data[offset*COLS+1] +
                         data[offset*COLS+2] +
                         data[offset*COLS+3];

        //offset += blockDim.x * gridDim.x;
    }
}

void displayIntOutput(unsigned int* data)
{
    for (unsigned int i=0; i<ROWS; i++)
    {
        for (unsigned int j=0; j<COLS; j++)
        {
            printf("%08x ", data[i*COLS+j]);
        }
        printf("\n");
    }

    printf("\n");
}

void main()
{
    unsigned int *h_data, *h_filled_data;
    unsigned int *d_filled_data;

    int size = ROWS * COLS * sizeof(unsigned int);

    h_data = (unsigned int*)malloc(size);
    h_filled_data = (unsigned int*)malloc(size);

    cudaMalloc((void**)&d_filled_data, size);
    cudaMemset(d_filled_data, 0, size);

    dim3 threads(8, 1);
    dim3 blocks(ceil((float)size/(float)threads.x), 1);

    fillData_kernel<<<blocks,threads>>>(size, d_filled_data);

    cudaMemcpy(h_filled_data, d_filled_data, size, cudaMemcpyDeviceToHost);

    displayIntOutput(h_filled_data);

    unsigned int *h_first_item_in_col;
    unsigned int *d_first_item_in_col;

    h_first_item_in_col = (unsigned int*)malloc(ROWS*sizeof(int));
    memset(h_first_item_in_col, 0, ROWS*sizeof(int));

    cudaMalloc((void**)&d_first_item_in_col, ROWS*sizeof(int));
    cudaMemset(d_first_item_in_col, 0, ROWS*sizeof(int));

    dim3 threads_first(8, 1);
    dim3 blocks_first(ceil((float)(ROWS*sizeof(int))/(float)threads_first.x), 1);

    fillFirstCells_kernel<<<blocks, threads>>>(d_filled_data, d_first_item_in_col);

    cudaMemcpy(h_first_item_in_col, d_first_item_in_col, ROWS*sizeof(int), cudaMemcpyDeviceToHost);

    for (int i=0; i<ROWS; i++)
        printf("%d. %08x\n", (i+1), h_first_item_in_col[i]);

    cudaFree(d_filled_data);
    cudaFree(d_first_item_in_col);

    free(h_data);
    free(h_filled_data);
    free(h_first_item_in_col);

    system("pause");
} 
```

**内核“fillFirstCells_kernel”的输出：**

00000000 00000001 00000002 00000003 00000004 00000005 00000006 00000007 00000008 00000009 0000000a 0000000b 0000000c 0000000d 0000000e 0000000f 00000010 00000011 00000012 00000013 00000014 00000015 00000016 00000017 00000018 00000019 0000001a 0000001b 0000001c 0000001d 0000001e 0000001f 00000020 00000021 00000022 00000023 00000024 00000025 00000026 00000027

1.  00000006
2.  00000016
3.  00000026
4.  00000036
5.  00000046
6.  00000056
7.  00000066
8.  00000076
9.  0000010c
10.  0000012c

**内核“fillFirstCells_kernel”的输出：**

00000000 00000001 00000002 00000003 00000004 00000005 00000006 00000007 00000008 00000009 0000000a 0000000b 0000000c 0000000d 0000000e 0000000f 00000010 00000011 00000012 00000013 00000014 00000015 00000016 00000017 00000018 00000019 0000001a 0000001b 0000001c 0000001d 0000001e 0000001f 00000020 00000021 00000022 00000023 00000024 00000025 00000026 00000027

1.  00000006
2.  00000016
3.  00000026
4.  00000036
5.  00000046
6.  00000056
7.  00000066
8.  00000076
9.  00000086
10.  00000096

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:19:43.213

你犯了几个错误。

```
int offset = blockIdx.x + blockDim.x * threadIdx.x; 
```

应该：

```
int offset = blockIdx.x * blockDim.x + threadIdx.x; 
```

启动内核时，您应该为每个元素而不是字节启动一个线程。

```
dim3 blocks(ceil((float)size/(float)threads.x), 1); 
```

应该

```
dim3 blocks(ceil((float)ROWS*COLS/(float)threads.x), 1); 
```

核函数的长度参数是错误的：

```
fillData_kernel<<<blocks,threads>>>(size, d_filled_data); 
```

应该：

```
fillData_kernel<<<blocks,threads>>>(ROWS*COLS, d_filled_data); 
```

我想就是这样。

# android - 如何在android中创建带有节标题的可扩展列表视图

> ID：14771344
> 
> 赞同：6
> 
> 时间：2013-02-08T11:16:37.833
> 
> 标签：android, listview, expandablelistview

在我的应用程序中，我必须包含一个带有节标题的可扩展列表视图，我已经成功地将它们分开进行，例如带有标题的列表视图和可扩展列表视图，但是当我必须这样做时，我都被卡住了，

我得到了三个数据数组列表。
`ArrayList<String[]>`标题。
`ArrayList<String[]>`列表。
`ArrayList<String[]>`孩子。

我已经为这三个创建了单独的布局。如何创建带有标题的可扩展列表视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T15:52:33.980

尝试对每个标题使用该`addHeaderView()`方法。`ArrayList`这样，您可以动态地创建`TextViews`或任何`View`想要的每个`ExpandableListViews`.

# magento - 如何配置 magento 以显示包括 TAX 在内的价格？

> ID：14771349
> 
> 赞同：2
> 
> 时间：2013-02-08T11:16:57.243
> 
> 标签：magento

我正在努力配置我的 Magento 商店以使用 TAX 执行以下操作。

我想给产品一个包含指定税额的价格，即 20%，所以当我将其添加到购物车时，税款和总计显示正确。

例如：

我的产品价格为 20 英镑。价格中包含 3.33 英镑的 20% 税。将此产品添加到购物车时，我希望购物车显示 3.33 英镑的 TAX 金额和总计 20 英镑。

现在我能得到的只是加税的总计 23.33 英镑。显示价格也是 23.33 英镑而不是 20 英镑。

我很想得到一些帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:33:53.303

查看系统/配置/销售/税收/计算

这里有两个重要的选择

*   目录价格含税
*   运费含税

查看[magento 含税价格](https://stackoverflow.com/questions/1538770/magento-prices-inclusive-of-tax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-11T06:59:07.593

将此代码添加到您获取产品价格的 phtml 文件中。

```
$_priceIncludingTax = Mage::helper('tax')->getPrice($_product, $_product->getFinalPrice()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-22T14:50:56.593

如果您想在前端显示含税价格，请访问：

*   *系统 -> 配置 -> 销售 -> 税收 -> 价格显示设置 -> 在目录中显示产品价格*

你有三个选择。显示产品价格：

*   不含税
*   含税
*   含税和不含税

资料来源： http: [//blog.chapagain.com.np/magento-display-product-price-including-tax/](http://blog.chapagain.com.np/magento-display-product-price-including-tax/)

# c# - 加入 LINQ 查询

> ID：14771351
> 
> 赞同：0
> 
> 时间：2013-02-08T11:17:02.717
> 
> 标签：c#, linq

我正在使用以下 LINQ 查询从数据表中获取数据

```
 var callBetweenNodesDetail = from r in dtRowCallBetweenNodes.AsEnumerable()
                                       where ((r.Field<string>("F1") == VerSelected1) && (r.Field<string>("F2") == VerSelected2))
                                       select r; 
```

现在我想加入另一个包含两个字段“名称”和“F2”的数据表 dtRowFile，其中字段“F2”将与数据表 dtRowCallBetweenNodes 中的“F10”匹配以在结果集中获取“名称”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:29:46.593

这有帮助吗：

```
var ret = from p in Table1.AsEnumerable()
      join q in Table2.AsEnumerable() on p.Field<int>("ID") equals q.Field<int>("ID") into UP
      from q in UP.DefaultIfEmpty()
      select new
      {
          ID = p.Field<int>("ID"),
          Type = p.Field<string>("Type"),
          Part = q.Field<int>("Part"),
          Quantity = q.Field<int>("Quantity")
      }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:30:40.530

```
var rowFileNames = from   r1 in dtRowCallBetweenNodes.AsEnumerable()
                   join   r2 in dtRowFile.AsEnumerable()
                   on     r1.Field<string>("F10") equals r2.Field<string>("F2")
                   where  r1.Field<string>("F1") == VerSelected1 
                   &&     r1.Field<string>("F2") == VerSelected2
                   select r2.Field<string>("Name"); 
```

[**跨表查询（LINQ to DataSet）**](http://msdn.microsoft.com/en-us/library/bb386969.aspx)

# c# - stylecop / resharper 配置不添加评论

> ID：14771356
> 
> 赞同：0
> 
> 时间：2013-02-08T11:17:10.353
> 
> 标签：c#, resharper, stylecop

如何配置 stylecop 或 resharper 在执行“清理代码”时不添加无意义的注释？

好的（保持/很高兴拥有）：

有区域标签：

```
#region Public Properties 
```

消除：

```
 /// <summary>
    /// Gets or sets the description.
    /// </summary> 
```

或者

```
 /// <summary>
    /// The _context.
    /// </summary>
    private static HttpContextBase _context; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:53:31.130

在 Reshaper->Options->Tools->Code Cleanup 下，修改或创建新的清理配置文件并取消选择所有 Stylecop->Documentation 项：

![在此处输入图像描述](../Images/663cf15a56ce133df7370ce40c23d20e.png)

# javascript - 如何使用 Jquery 更改 img 标签的 src

> ID：14771359
> 
> 赞同：0
> 
> 时间：2013-02-08T11:17:22.927
> 
> 标签：javascript, jquery, twitter-bootstrap

这可能很简单，但我想更改 li 标签内的 img 标签的 src。有 4 个 li 标签，只有具有活动类的 li 标签才能更改其 img 标签的 src。

```
<ul>
   <li><img src="example.jpeg" /></li>
   <li class="active"><img src="Notexample.jpeg" /></li>
   <li><img src="example.jpeg" /></li>
   <li><img src="example.jpeg" /></li>
</ul> 
```

此外，活动类在 li 标签之间切换以更改源...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:18:23.560

试试这个...

```
$("li.active img").attr("src", "notexample.jpg"); 
```

如果您更改了哪个 li 具有活动类，那么您将需要再次运行该代码。

如果您想在失去活动课程时将 src 改回来，请执行此操作...

```
$("li:not(:has(.active))".attr("src", "example.jpg"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:18:38.387

您可以使用jquery的[后代选择器使用](http://api.jquery.com/descendant-selector/)[attr()来执行此操作。](http://api.jquery.com/attr/)

```
$('li.active img').attr('src', 'newval') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T11:26:19.070

```
...
...
//code where you are changing the class
...
...

$('li').each(function() {
    if($(this).attr('class').indexOf("active") !== -1)
    {
        //Active class is applied
        $(this).children().children().attr("src", "assets/img/button_home_selected3.png");
    }
    else
    {
        $(this).children().children().attr("src", "assets/img/button_home_plain.png");
    }
});

...
... 
```

# android - Android - 单击时从 Web 视图中的嵌入式 youtube 视频启动 Youtube 应用程序

> ID：14771360
> 
> 赞同：2
> 
> 时间：2013-02-08T11:17:23.550
> 
> 标签：android, webview, youtube

我一直在到处寻找，但我无法找到解决方案。我目前正在开发一个处理一些 rss 内容的应用程序。在内容中，作者可以在标签内添加 youtube 链接。

在 webView 中播放 youtube 视频不是最佳选择。我想要实现的是使用播放按钮显示视频的预览，当用户单击它时，不要在 webView 中启动视频，而是使用视频 URL 启动意图以启动 youtube 应用程序（如果可用）或处理意图的任何其他应用程序。

如何启动意图不是问题。问题是：

1.  使用播放按钮显示预览和视频。
2.  单击视频时启动意图。

作为示例，可以使用 Google Reader 应用程序。

我已经尝试了很多设置，但我无法找到正确的方法。

提前致谢。

PS：这可能是内容的一个例子：

```
<p><a href="http://blogg.fotbollskanalen.se/gara/files/2013/02/Skärmavbild-2013-02-07-kl.-10.40.03.png"><img class="aligncenter size-large wp-image-1759" src="http://blogg.fotbollskanalen.se/gara/files/2013/02/Skärmavbild-2013-02-07-kl.-10.40.03-424x527.png" alt="" width="424" height="527" /></a></p> <p>Avslutningsvis en rätt kass reklamfilm med <strong>Puyols</strong> polare <strong>Cesc Fàbregas</strong>, som för övrigt gjorde Spaniens första mål i går.</p> <iframe width="424" height="250" src="http://www.youtube.com/embed/x353GSw70_c" frameborder="0" allowfullscreen></iframe> <p>* = Övriga sex 100-matchkillar är <strong>Casillas</strong>, <strong>Xavi</strong>, <strong>Zubizarreta</strong>, <strong>Xabi Alonso</strong>, <strong>Raúl</strong> och <strong>Fernando Torres.</strong></p> <p>UPPDATERING: Efter lite research kan jag nu meddela att bergsgeten är <a href="http://sv.wikipedia.org/wiki/Arabisk_oryx" target="_blank">en orix</a>. Tänk att man kan lära sig nya saker varje dag&#8230;</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:40:23.933

我必须为应用程序执行此操作，虽然 VideoView 在以后的设备上工作，但旧设备没有正确显示预览。我最终创建了一个视图，该视图覆盖了背景图像上的播放按钮，并在点击时链接到 youtube。为了获取图像，我使用了一个 youtube 服务，该服务允许您请求托管视频的屏幕截图。

把这一切放在一起： -

1) 创建您的预览布局。例如

```
<RelativeLayout
    android:layout_width="90dp"
    android:layout_height="90dp">

    <ImageView
        android:id="@+id/thumbnail"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitStart" />

    <ImageButton
        android:id="@+id/ButtonPlay"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@null"
        android:src="@drawable/play" />
</RelativeLayout> 
```

然后我使用以下设置缩略图： -

```
public static final String VIDEO_IMAGE_URL = "http://img.youtube.com/vi/%1$s/0.jpg";
public static final String VIDEO_URL = "vnd.youtube://%1$s";
...
String imageUrl = String.format(VIDEO_IMAGE_URL, "youTubeVideoId"); 
.. 
ImageButton button = (ImageButton) row.findViewById(R.id.ButtonPlay);
String videoUrl = String.format(VIDEO_URL, mContext.getText(mRows[i].mVideoId));
button.setTag(Uri.parse(videoUrl));
button.setOnClickListener(mVideoClickListener); 
```

点击监听器所做的只是：-

```
startActivity(new Intent(Intent.ACTION_VIEW, (Uri) v.getTag())); 
```

希望有帮助

# php - 检查用户状态 Facebook，没有 API

> ID：14771377
> 
> 赞同：-1
> 
> 时间：2013-02-08T11:18:02.123
> 
> 标签：php, facebook

是否可以在不使用 facebook API 的情况下检查用户是否登录到 facebook，我可以使用 API 轻松地做到这一点，但出于某种原因，我想在没有 facebook API 帮助的情况下做到这一点，当且仅当它是可能的。

清除事物的示例：

*   登录消息“好的”或什么。
*   未登录重定向到 facebook.com

没有身份验证或任何如此简单的事情

可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:22:01.510

如果不包含 Facebook API，则无法检查用户是否已登录。

您可以使用 Facebook JS SDK 轻松检查是否已登录

# ajax - jQuery ui 对话框覆盖和 ajax 注入 html

> ID：14771378
> 
> 赞同：1
> 
> 时间：2013-02-08T11:18:11.203
> 
> 标签：ajax, jquery-ui, dialog, overlay

我的网站有问题（不幸的是，我无法提供链接，因为它位于临时环境中）。

我有一个 jqueryui 对话框，当你向下滚动页面加载时，它会覆盖所有内容。然后页面的某些部分被ajax调用更新并且页面的高度增加了，这就是问题所在，覆盖不再覆盖所有页面并且底部内容是可访问的。

我可以看到覆盖适应某些变化，比如调整页面大小..有没有办法在向下滚动时更新它？这*可以*解决我的问题

很抱歉，我无法提供显示问题的链接..

问候， 詹皮耶罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:15:34.543

在类似的情况下，我通过在每次异步 DOM 更改后触发窗口调整大小事件找到了一个成功的解决方法：

```
$(window).resize(); 
```

# javascript - javascript中的径向运动

> ID：14771379
> 
> 赞同：1
> 
> 时间：2013-02-08T11:18:12.863
> 
> 标签：javascript, jquery, css, html, jquery-ui

默认情况下，HTML 5 画布具有矩形形状，但如果我在画布下做任何动画，它将移动到矩形区域。

如果我将区域绑定到径向形状怎么办？它绝对不应该超出径向形状。

我们可以将边界限制为径向而不是默认的矩形吗？

您可以查看球超出径向边界 - [http://jsfiddle.net/stackmanoz/T4WYH/](http://jsfiddle.net/stackmanoz/T4WYH/)

我现在设计了径向形状的边界，我也想限制径向区域。

球的限制区域-

```
function bounce() {
    if (x + dx > 293 || x + dx < 0) {
        dx = -dx;
    }
    if (y >= 290) {
        y = 290;
    }
    if (y + dy > 290 || y + dy < 0) {
        dx *= 0.99;
        dy = -dy;
    }
    if (Math.abs(dx) < 0.01) {
        dx = 0;
    }
    dy++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:36:30.417

圆的笛卡尔公式是 (x − a) ² + (y − b) ² = r ²

所以在你的反弹条件下检查这个：

```
function bounce() {
    if( Math.pow(x - 150, 2) + Math.pow(y - 150, 2) > Math.pow(150, 2))
    {
        dx = -dx * (0.6 + (Math.random() * 0.8));
        dy = -dy * (0.6 + (Math.random() * 0.8));
    }
} 
```

我正在使用随机弹跳，因为我无法使用入射速度和弹跳点的法线计算出正确的弹跳角度（我相信这里有人可以）

在这里更新小提琴：http: [//jsfiddle.net/T4WYH/1/](http://jsfiddle.net/T4WYH/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:57:19.657

几点，[使用 requestAnimationFrame 而不是 setInterval](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

我会在画布中绘制大圆圈，而不是作为边框，然后您可以使用**isPointInPath(x, y)**来确定您的球是否在圆圈内（[或任何其他任意路径](http://www.rgraph.net/blog/2012/october/new-html5-canvas-features.html#cvs)）

```
function draw() {
    ctx.clearRect(0, 0, 300, 300);
    ctx.beginPath()
    ctx.lineWidth = 1;
    ctx.strokeStyle = '#000';
    ctx.arc(150, 150, 150, 0, 2 * Math.PI, true);
    ctx.stroke();
    ctx.closePath();
    console.log(ctx.isPointInPath(x, y)); //Is (center) of ball in big circle
    ctx.beginPath();
    ctx.arc(x, y, 10, 0, 2 * Math.PI, true);
    ctx.closePath();
    ctx.fill();
    x += dx;
    y += dy;
    bounce();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:02:42.247

我不想执行这个特定的任务，但你可以从这个网站获得如何从圈子反弹的想法：bbdizains.com

以及对应的功能：

```
move = function(){
 for (i=1; i<=3; i++) {
  A.x[i] = A.x[i] - A.v[i]*Math.sin(A.alfa[i]);
  A.y[i] = A.y[i] - A.v[i]*Math.cos(A.alfa[i]);
  x = A.x[i]-175;
  y = A.y[i]-233;
  x2 = x*x;
  y2 = y*y;
  if (x2+y2>=6561) {
    if (A.flag[i]==1) {
      gamma = Math.atan(y/x);    
      A.alfa[i] =  - 2*gamma - A.alfa[i];
      A.flag[i] = 0;
    }
  } else {
    A.flag[i] = 1;
  }                                                                   
  $('#r'+i).css('left',A.x[i]+'px');
  $('#r'+i).css('top',A.y[i]+'px'); 
  if ((Math.random()>0.95) && (x2+y2<6000)) {
    A.alfa[i] = A.alfa[i] + Math.PI*Math.random()*0.1;      
  }  
 }
} 
```

# python - 如何使用 Python GUI 中的输入框让程序等待输入？

> ID：14771380
> 
> 赞同：1
> 
> 时间：2013-02-08T11:18:12.713
> 
> 标签：python, tkinter

这是我用来启动程序主要部分的函数的代码，但是我想要某种循环或创建十个问题的东西，但在进入下一个问题之前等待来自输入框的输入。有任何想法吗？

```
def StartGame():
    root = Tk()
    root.title("Maths Quiz - Trigonometry and Pythagoras' Theorem | Start The Game")
    root.geometry("640x480")
    root.configure(background = "gray92")
    global AnswerEntry
    TotScore = 0
    Count = 0
    AnswerReply = None
    WorkingArea = Text(root, width = 70, height = 10, wrap = WORD).place(x = 38, y = 100)
    n = GetRandomNumber()
    Angle,Opposite,Adjacent,Hypotenuse = Triangle()
    Question,RealAnswer = QuestionLibrary(Opposite,Adjacent,Hypotenuse,Angle,n)
    AskQuestion = Label(root, text = Question, wraplength = 560).place(x = 48, y = 300)
    PauseButton = ttk.Button(root, text = "Pause").place(x = 380, y = 10)
    HelpButton = ttk.Button(root, text = "Help", command = helpbutton_click).place(x = 460, y = 10)
    QuitButton = ttk.Button(root, text = "Quit", command = root.destroy).place(x = 540, y = 10)
    AnswerEntry = Entry(root)
    AnswerEntry.place(x = 252, y = 375)
    SubmitButton = ttk.Button(root, text = "Submit", command = submit_answer).place(x = 276, y = 400)
    TotScore,AnswerReply = IsAnswerCorrect(Answer,RealAnswer)
    ScoreLabel = ttk.Label(root, text = TotScore).place(x = 38, y = 10)
    AnswerReplyLabel = ttk.Label(root, text = AnswerReply).place(x = 295, y = 440)
    root.mainloop() 
```

我希望循环在`AnswerReply = None`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:26:05.977

你不想要一个循环。GUI 中唯一真正重要的循环应该是`mainloop()`处理**信号**和执行**回调**。

例子：

```
try:
    import Tkinter as Tk
except ImportError:
    import tkinter as Tk

class QAGame(Tk.Tk):
    def __init__(self, questions, answers, *args, **kwargs):
        Tk.Tk.__init__(self, *args, **kwargs)
        self.title("Questions and answers game")
        self._setup_gui()
        self._questions = questions[:]
        self._answers = answers
        self._show_next_question()

    def _setup_gui(self):
        self._label_value = Tk.StringVar()
        self._label = Tk.Label(textvariable=self._label_value)
        self._label.pack()
        self._entry_value = Tk.StringVar()
        self._entry = Tk.Entry(textvariable=self._entry_value)
        self._entry.pack()
        self._button = Tk.Button(text="Next", command=self._move_next)
        self._button.pack()

    def _show_next_question(self):
        q = self._questions.pop(0)
        self._label_value.set(str(q))

    def _move_next(self):        
        self._read_answer()
        if len(self._questions) > 0:
            self._show_next_question()
            self._entry_value.set("")
        else:
            self.quit()
            self.destroy()

    def _read_answer(self):
        answer = self._entry_value.get()
        self._answers.append(answer)

    def _button_classification_callback(self, args, class_idx):
        self._classification_callback(args, self._classes[class_idx])
        self.classify_next_plot()

if __name__ == "__main__":
    questions = ["How old are you?",
             "What is your name?"]
    answers = []
    root = QAGame(questions, answers)
    root.mainloop()
    for q,a in zip(questions, answers):
        print "%s\n>>> %s" % (q, a) 
```

我们只有一个标签、一个条目和一个按钮（我不关心布局！，只是`pack()`）。

附加到按钮的是一个命令（又名回调）。按下按钮时，将读取答案并将新问题分配给标签。

**从 `if name** == " **main** " 块中的示例可以理解此类的用法。请注意：答案列表已填写到位，问题列表保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:47:27.283

我不知道 Tk，但是没有任何信号`input text changed`吗？应该有的。只需检查此信号是否出现，然后转到新问题，因为这意味着有人在输入框中输入了某些内容。

# android - Android commons-beanutils 不工作

> ID：14771383
> 
> 赞同：5
> 
> 时间：2013-02-08T11:18:19.400
> 
> 标签：android, apache-commons

我正在开发一个需要使用 commons-beanutils 库的 Android 应用程序，但是我无法编译它。当我尝试使用此 jar 文件运行应用程序时，出现其中几个错误

> Dx 警告：忽略不附带关联 EnclosureMethod 属性的匿名内部类 (org.apache.commons.beanutils.locale.LocaleBeanUtilsBean$1) 的 InnerClasses 属性。此类可能是由不针对现代 .class 文件格式的编译器生成的。推荐的解决方案是从源代码重新编译类，使用最新的编译器并且不指定任何“-target”类型选项。忽略此警告的后果是此类上的反射操作将错误地指示它*不是*内部类。

然后出现这个错误

> 无法执行dex：多个dex文件定义了Lorg/apache/commons/beanutils/DynaBean；

我已经用谷歌搜索了这两个错误，并得到了几个不同的答案来解决这个问题。

[无法执行dex：多个dex文件定义了Lcom/myapp/R$array；](https://stackoverflow.com/questions/7870265/unable-to-execute-dex-multiple-dex-files-define-lcom-myapp-rarray)

此处的此链接指出 bin 文件夹是问题所在。我尝试删除它，但同样的问题。

然后我遇到了这个线程

[是否有与 Android 兼容的 Property Utils 替代品？](https://stackoverflow.com/questions/6592385/are-there-android-compatible-alternatives-to-property-utils)

该操作指出 beans util 在 Android 上不起作用。这是准确的吗？如果是这样，是否有替代方案可行？从源代码重新编译类会起作用吗？

任何帮助将非常感激！

编辑：我也尝试下载最新版本的 commons-beanutils，同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-17T18:18:16.950

有适用于 Android 的桥接库：android-java-air-bridge.jar。只需包含到项目路径中并在您的 Android 项目中使用所有 apache beanutils 功能，就像您可以在普通 Java 应用程序中使用一样。此外，还有很多其他类移到了这个 Android 支持库。看看名单。

上述解决方案在[Property Utils 是否有与Android 兼容的替代品中提到？](https://stackoverflow.com/questions/6592385/are-there-android-compatible-alternatives-to-property-utils)

# css - Jawr 因 css 属性内容而失败

> ID：14771387
> 
> 赞同：1
> 
> 时间：2013-02-08T11:18:26.260
> 
> 标签：css, tomcat, jawr, contentproperty

在我的css中，我有一个这样的选择器

```
a[href]:after {
   content: " (" attr(href) ")";
} 
```

Jawr 在“（”和“）”上绊倒。如果我删除它们，它工作正常。

我在启动 tomcat 部署网络应用程序时遇到的异常是：

```
SEVERE: Exception invoking method manageApp
java.lang.StackOverflowError
    at java.util.regex.Pattern$BmpCharProperty.match(Pattern.java:3714)
    at java.util.regex.Pattern$Ques.match(Pattern.java:4085)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4556)
    at java.util.regex.Pattern$LazyLoop.match(Pattern.java:4745)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4615)
    at java.util.regex.Pattern$CharProperty.match(Pattern.java:3694)
    at ... etc etc etc 
```

有人知道如何让 Jawr 吃掉我原来的选择器而不会窒息吗？我正在使用最新的 Jawr 3.3.3

# html - 垂直对齐图像和文本

> ID：14771390
> 
> 赞同：1
> 
> 时间：2013-02-08T11:18:32.670
> 
> 标签：html, css, css-float

如何在不移动图像下方的其他文本的情况下水平对齐图像和文本

我喜欢这样做（样本 XXXXX 是大图）

```
XXXXXXXX  This is a big image.
XXXXXXXX  all text should not goes 
XXXXXXXX  down the image
XXXXXXXX 
```

但问题是我的文字在图像上

```
XXXXXXXX  This is a big image.
XXXXXXXX  
XXXXXXXX  
XXXXXXXX
all text should not goes down the image 
```

请帮助我。

这是我的代码

```
<div id = 'wrap'> 
   <div class='image'>
     <img src="/test/1.jpg" />
     This is a big image  all text should not goes down the image
   </div>
   <div class='image'>
     <img src="/test/2.jpg" />
     This is a big image  all text should not goes down the image
   </div>

</div> 
```

我使用的CSS...

```
#wrap {
   overflow: auto; 
   height: 300px; 
}

.image{ 
    border-top-style:outset;
}

#wrap > div > img {
    width : 80px;
     height : 70px;
     margin-left:5px;
     margin-top:5px;
     margin-bottom:5px;
     padding-bottom: 4px; 
     float:left;
    clear:left;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T11:20:55.557

只需将图像浮动到左侧

```
img {
   float: left;
} 
```

将图像浮动到左侧后会发生什么，它将在右侧创建一个空白区域，以便文本设置您想要的方式。

> 注意：永远不要忘记清除你的浮动......你也可能想把它包装在一个容器 div 中

休息 ：

你可以给一个你想浮动的 img 类，所以`img{float: left;}`你应该使用它而不是使用它，这样它就可以精确地定位图像，你也可以像[Sam Carrington](https://stackoverflow.com/users/1369911/sam-carrington)告诉你的那样`img.class_name {float: left;}`将文本包裹在`p`元素内，这样你就可以填充文字和样式...

[**演示小提琴**](http://jsfiddle.net/6j9E8/)

HTML

```
<div class="wrapper">
    <img class="to_the_left" src="http://images.google.com/intl/en_ALL/images/logos/images_logo_lg.gif" />
    <p class="paragraph">Hi this is big long text I want to place it to the right of my image</p>
    <div class="clear"></div>
</div> 
```

CSS

```
.wrapper {
    border: 1px solid #f00;
}

.to_the_left {
    float: left;
}

.clear {
    clear: both;
}

p.paragraph {
    padding-top: 30px; /* You can set accordingly */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:26:05.843

您应该始终将 div 中的文本包含在语义元素内 - 这将具有允许您使用 css 将文本定位在唯一容器中的优势。

```
<div class='image'>
  <img src="/test/1.jpg" />
  <p class="sidebar">This is a big image  all text should not goes down the image</p>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:30:17.290

```
#wrap .image img { float: left; width: 200px;} 
```

# php - 悬停时图像褪色并显示内容

> ID：14771394
> 
> 赞同：0
> 
> 时间：2013-02-08T11:18:37.410
> 
> 标签：php, javascript, jquery, wordpress

我可以在这里得到一些帮助吗

我的代码仅适用于一张图片，但不适用于具有不同内容的多张图片

HTML

```
<ul id="base">
<li class="element" >
<img src="http://farm8.staticflickr.com/7040/6818412114_261c73da06_z.jpg" class="img1"  />
<div style="display:none;" class="content">this is a text message 2</div>
</li>
<li class="element" >
<img src="http://farm8.staticflickr.com/7040/6818412114_261c73da06_z.jpg" class="img1"  />
<div style="display:none;" class="content">this is a text message 2</div>
</li>
</ul> 
```

CSS

```
.element {float:left;margin-right:15px;border:1px solid red;width:150px;height:150px;}
.element img {
      position:absolute;
      top:0;
      left:0;
      height:150px;
      width:150px;
    }
.content {height:150px;width:150px;background:gray;font-size:9px;} 
```

jQuery

```
$(".element").hover(function() {
        //fadeout first image using jQuery fadeOut
        $(".img1").fadeOut(300);
        //fadein second image using jQuery fadeIn 
        $(".content").fadeIn(300);
    }, function () {
        //fadeout second image using jQuery fadeOut
        $(".img1").fadeIn(300);
        //fadein first image using jQuery fadeIn
        $(".content").fadeOut(300);
    }); 
```

和一个用于测试[http://jsfiddle.net/nQvay/1/](http://jsfiddle.net/nQvay/1/)的小提琴，需要一些帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:24:26.243

您必须指定要褪色 的`.img1`人和您`.content`

```
 $(".element").hover(function() {
            //fadeout first image using jQuery fadeOut
            $(this).children(".img1").fadeOut(300);
            //fadein second image using jQuery fadeIn 
            $(this).children(".content").fadeIn(300);
        }, function () {
            //fadeout second image using jQuery fadeOut
            $(this).children(".img1").fadeIn(300);
            //fadein first image using jQuery fadeIn
           $(this).children(".content").fadeOut(300);
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:27:58.390

尝试这个

[**JSFIDDLE**](http://jsfiddle.net/eZUcK/)

```
$(document).ready(function(){
$(".element").hover(function() {
            //fadeout first image using jQuery fadeOut
            $(".element").children(".img1").fadeOut(300);
            //fadein second image using jQuery fadeIn 
            $(".element").children(".content").fadeIn(300);
        }, function () {
            //fadeout second image using jQuery fadeOut
           $(".element").children(".img1").fadeIn(300);
            //fadein first image using jQuery fadeIn
           $(".element").children(".content").fadeOut(300);
        });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T18:36:31.647

```
<ul id="base">
<li class="element" >
<img src="http://farm8.staticflickr.com/7040/6818412114_261c73da06_z.jpg" class="img1"  />
<div style="display:none;" class="content">this is a text message 2</div>
</li>
<li class="element" >
<img src="http://farm8.staticflickr.com/7040/6818412114_261c73da06_z.jpg" class="img1"  />
<div style="display:none;" class="content">this is a text message 2</div>
</li>
</ul>

<style>
ul{
padding:0px;
margin:0px;
list-style:none;
}
.element {float:left;margin-right:15px;border:1px solid red;width:150px;height:150px;position:relative;}
.element img {
      position:absolute;
      top:0;
      left:0;
      height:150px;
      width:150px;
    }
.content {height:150px;width:150px;background:gray;font-size:9px;}
</style>

<script>
$(".element").hover(function() {
        //fadeout first image using jQuery fadeOut
        $(this).children(".img1").fadeOut(300);
        //fadein second image using jQuery fadeIn 
        $(this).children(".content").fadeIn(300);
    }, function () {
        //fadeout second image using jQuery fadeOut
        $(this).children(".img1").fadeIn(300);
        //fadein first image using jQuery fadeIn
        $(this).children(".content").fadeOut(300);
    });
</script> 
```

# java - Hibernate 4 调用 c3p0 中不支持的 setBinaryStream

> ID：14771399
> 
> 赞同：0
> 
> 时间：2013-02-08T11:19:10.097
> 
> 标签：java, hibernate, c3p0

Hibernate 4 使用 jdbc4，将方法 setBinaryStream(int, InputStream, int) 的签名更改为 setBinaryStream(int, InputStream, **long** )。C3P0 不支持这种新方法。

所以调用 saveOrUpdate(myObjWithBlob) 结果

```
java.lang.AbstractMethodError: com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.setBinaryStream(ILjava/io/InputStream;J)V
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
at $Proxy75.setBinaryStream(Unknown Source) 
```

那我现在能做什么？

1) 不要使用 c3p0。DHCP、BoneCP 或根本没有连接池。- 不是我真正想要的选择。

2）不知何故让hibernate避免调用这个新方法？有可能吗？

3）切换回休眠3 - 对我来说也不是很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T17:58:52.717

请升级到 c3p0 0.9.2-pre8（或等待几天为 0.9.2 最终版本）。此问题已在该库的最新版本中得到解决。

**更新：** c3p0-0.9.2 现已发布。它确实解决了这个问题。

# c# - WebClient with Mono for android 在服务器上创建文件

> ID：14771402
> 
> 赞同：2
> 
> 时间：2013-02-08T11:19:13.730
> 
> 标签：c#, xamarin.android, webclient

我想将数据写入服务器上的文件。因此，我使用以下代码：

```
 System.Net.WebClient webClient = new System.Net.WebClient();
            string webAddress = "https://sd2dav.1und1.de/"; //1&1 Webdav
            string destinationFilePath = webAddress + "testfile.txt";
            webClient.Credentials = new System.Net.NetworkCredential("myuser", "mypassword");
            Stream stream = webClient.OpenWrite(destinationFilePath,"PUT");

            UnicodeEncoding uniEncoding = new UnicodeEncoding();

            using(StreamWriter sw = new StreamWriter(stream, uniEncoding))
            {
                sw.Write("text");
                sw.Flush();
            }

            webClient.Dispose(); 
```

这在使用 Visual Studio 2008、.net 3.5 编译并在 Windows 7 上执行时工作正常。但是，我想使用 Mono for Android (4.4.54) 来执行此操作。在这里，代码执行，但没有任何反应：文件未在服务器上创建。

这是 Mono for Android 中的错误还是上面的代码有什么问题？你知道让这个工作的方法吗？

**更新：**我在[https://bugzilla.xamarin.com/show_bug.cgi?id=10163](https://bugzilla.xamarin.com/show_bug.cgi?id=10163)提交了关于此问题的错误。希望来自 Xamarin 的人能解决这个问题。[此外，我在https://stackoverflow.com/questions/14786214/alternative-to-webclient-openwrite](https://stackoverflow.com/questions/14786214/alternative-to-webclient-openwrite)提出了另一种将数据发送到服务器的方法。

# xaml - 如何在 Windows Phone 中制作可拖动的项目列表，如手机的主页图块

> ID：14771406
> 
> 赞同：0
> 
> 时间：2013-02-08T11:19:33.993
> 
> 标签：xaml, c#-4.0, windows-phone-7.1

我正在开发一个 Windows Phone 应用程序。我想制作一个列表，其项目可以水平或垂直拖动到任何地方。列表项是图像类型。

基本上我想要这个像包含瓷砖的 Windows 手机主页。当我们按住一个磁贴一段时间时，它会弹出并且可以拖动到页面中的任何位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:11:32.013

看看混合交互行为。不久前我做了一个示例 [http://invokeit.wordpress.com/2012/02/10/wp7-drag-drop-example/](http://invokeit.wordpress.com/2012/02/10/wp7-drag-drop-example/)

# jenkins - Casperjs 将 XML 导出到 Jenkins

> ID：14771407
> 
> 赞同：3
> 
> 时间：2013-02-08T11:19:38.943
> 
> 标签：jenkins, xunit, casperjs

我成功设置了导出“result.xml”文件的 casperjs 测试。

在 Jenkins 中，我执行以下 shell 命令：

```
casperjs /home/testing-radu/generated-test.js 
```

这会在我的构建工作区中生成“results.xml”。

在构建后操作中，我添加了“发布 XUnit 测试结果报告”。我不知道如何以及在哪里设置 .xml 文件的路径。

当我的构建控制台时，我看到以下内容：

```
[37;42;1mPASS 2 tests executed in 9.96s, 2 passed, 0 failed.                             [0m
[32;1mResult log stored in results.xml                                                [0m
[xUnit] [INFO] - Starting to record.
ERROR: Publisher org.jenkinsci.plugins.xunit.XUnitPublisher aborted due to exception
/var/lib/jenkins/jobs/17live2/workspace/generatedJUnitFiles does not exist. 
```

我添加了对工作区目录的完全权限。我尝试创建“generatedJUnitFiles”文件夹，这就是我得到的：

```
[37;42;1mPASS 2 tests executed in 5.296s, 2 passed, 0 failed.                            [0m
[32;1mResult log stored in results.xml                                                [0m
[xUnit] [INFO] - Starting to record.
[xUnit] [INFO] - Setting the build status to FAILURE
[xUnit] [INFO] - Stopping recording.
Build step 'Publish xUnit test result report' changed build result to FAILURE
Finished: FAILURE 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T12:11:09.453

好吧，这是交易：

在发布 XUnit 测试结果下，我选择了 JUnit（也将模式设置为 *.xml），然后创建了一个由 Jenkins 执行的 shell 脚本：

```
# Auth tests
for f in auth/*.js ; do casperjs "$f"; done;

# Clean the old results and place the new ones
rm /var/lib/jenkins/jobs/17live2/workspace/*.xml
mv *.xml /var/lib/jenkins/jobs/17live2/workspace/ 
```

在 Jenkins 配置中，我只是这样做：`./run.sh`

***您需要对您的文件夹具有读/写权限。

# git - git force 以提交结束的文件行

> ID：14771414
> 
> 赞同：3
> 
> 时间：2013-02-08T11:20:21.987
> 
> 标签：git

我们有多平台项目，它为几个平台生成二进制文件，比如 mac、windows、linux... 是否可以强制 git 将所有文件的编码更改为某个特定平台（例如：Linux）。那么每次用户提交或推送到远程存储库时如何更改文件的行尾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:04:32.387

我猜你应该使用一个`git hook`，检查这个脚本：[yaegashi 的 Git 配套脚本](https://github.com/yaegashi/git-companion-scripts)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:08:08.240

我建议在[file](http://git-scm.com/docs/gitattributes)`core.eol`中设置指令，而不是依赖像.[`.gitattributes`](http://git-scm.com/docs/gitattributes)`core.autocrlf`

```
core.eol 
```

> 为设置了 text 属性的文件设置要在工作目录中使用的行结束类型。
> 替代方案是`lf`,`crlf`和**`native`**，它们使用平台的本机行尾。
> 默认值为原生。
> 有关行尾转换的更多信息，请参阅[gitattributes(5)](http://git-scm.com/docs/gitattributes.html)。

# jquery - 背景视频在 Firefox 或 IE 中不起作用

> ID：14771417
> 
> 赞同：0
> 
> 时间：2013-02-08T11:20:35.307
> 
> 标签：jquery, html, web

我正在使用 JQuery 插件“videoBG”并且遇到了一些问题。基本上发生的事情是视频在所有浏览器中都可以离线工作，没有问题，但是当我在线检查时，它在 FireFox 或 IE 中不起作用。这告诉我该脚本指向正确的视频，但由于某种原因在线时被 FF 和 IE 阻止。首次在 IE 中离线加载时进一步证实了这一点。弹出一个对话框，显示消息“IE 已阻止某些脚本加载到页面上，您是否允许它们继续？” 我点击是，它工作正常。该网页还具有几种在加载时播放的声音，并且可以通过图像上的 onclick 功能进行更改。这些功能在 chrome 和 IE 中完全没问题，但在 Firefox 中它们什么也不做——希望有人能帮助我！

该网站是 www.sweetsunnyvibes.com

编辑：我的所有代码都在初始 HTML 页面中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:57:20.763

您的 html 文档中有两个`<body>`元素。我不确定，但这可能是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:57:19.597

Firebug 抱怨“不支持“text/plain”的 HTTP“Content-Type”。加载媒体资源[http://www.sweetsunnyvibes.com/assets/christmas_snow.webm](http://www.sweetsunnyvibes.com/assets/christmas_snow.webm)失败。”。

确保您的网络服务器提供正确的 MIME 类型（视频/webm）。链接：[如何为 webM 视频和音频文件配置您的网络服务器。](http://www.webcoder.de/2010/06/04/how-to-configure-your-webserver-for-webm-video-and-audio-files/)

# jquery - 仅限 Google Map v3 自动刷新标记

> ID：14771422
> 
> 赞同：8
> 
> 时间：2013-02-08T11:20:54.710
> 
> 标签：jquery, html, ajax

我正在使用 Google Maps V3 来显示一些图钉。我希望能够在不影响您在地图上的位置或缩放级别的情况下刷新标记。我希望标记每 x 秒更新一次。

我该怎么做呢？我对 jQuery/ajax 没有太多经验。

我的地图的一个工作示例如下。

[http://jsfiddle.net/dLWNc/](http://jsfiddle.net/dLWNc/)

```
 var locations = [
  ['some random info here', -37.8139, 144.9634, 1],
  ['some random info here', 46.0553, 14.5144, 2],
  ['some random info here', -33.7333, 151.0833, 3],
  ['some random info here', 27.9798, -81.731, 4],    ];

var map = new google.maps.Map(document.getElementById('map_2385853'), {
  zoom: 1,
  maxZoom: 8, 
  minZoom: 1, 
  streetViewControl: false,
  center: new google.maps.LatLng(40, 0),
  mapTypeId: google.maps.MapTypeId.ROADMAP
});

var infowindow = new google.maps.InfoWindow();

var marker, i;

for (i = 0; i < locations.length; i++) {  
  marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    map: map
  });

  google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
      infowindow.setContent(locations[i][0]);
      infowindow.open(map, marker);
    }
  })(marker, i));
} 
```

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-09T03:45:31.060

好的，我有一些工作 - 主要是对原始代码的大量重构 - 你会识别出各种块。

```
$(function() {
    var locations = {};//A repository for markers (and the data from which they were constructed).

    //initial dataset for markers
    var locs = {
        1: { info:'11111\. Some random info here', lat:-37.8139, lng:144.9634 },
        2: { info:'22222\. Some random info here', lat:46.0553, lng:14.5144 },
        3: { info:'33333\. Some random info here', lat:-33.7333, lng:151.0833 },
        4: { info:'44444\. Some random info here', lat:27.9798, lng:-81.731 }
    };
    var map = new google.maps.Map(document.getElementById('map_2385853'), {
        zoom: 1,
        maxZoom: 8,
        minZoom: 1,
        streetViewControl: false,
        center: new google.maps.LatLng(40, 0),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });
    var infowindow = new google.maps.InfoWindow();

var auto_remove = true;//When true, markers for all unreported locs will be removed.

function setMarkers(locObj) {
    if(auto_remove) {
        //Remove markers for all unreported locs, and the corrsponding locations entry.
        $.each(locations, function(key) {
            if(!locObj[key]) {
                if(locations[key].marker) {
                    locations[key].marker.setMap(null);
                }
                delete locations[key];
            }
        });
    }

        $.each(locObj, function(key, loc) {
            if(!locations[key] && loc.lat!==undefined && loc.lng!==undefined) {
                //Marker has not yet been made (and there's enough data to create one).

                //Create marker
                loc.marker = new google.maps.Marker({
                    position: new google.maps.LatLng(loc.lat, loc.lng),
                    map: map
                });

                //Attach click listener to marker
                google.maps.event.addListener(loc.marker, 'click', (function(key) {
                    return function() {
                        infowindow.setContent(locations[key].info);
                        infowindow.open(map, locations[key].marker);
                    }
                })(key));

                //Remember loc in the `locations` so its info can be displayed and so its marker can be deleted.
                locations[key] = loc;
            }
            else if(locations[key] && loc.remove) {
                //Remove marker from map
                if(locations[key].marker) {
                    locations[key].marker.setMap(null);
                }
                //Remove element from `locations`
                delete locations[key];
            }
            else if(locations[key]) {
                //Update the previous data object with the latest data.
                $.extend(locations[key], loc);
                if(loc.lat!==undefined && loc.lng!==undefined) {
                    //Update marker position (maybe not necessary but doesn't hurt).
                    locations[key].marker.setPosition(
                        new google.maps.LatLng(loc.lat, loc.lng)
                    );
                }
                //locations[key].info looks after itself.
            }
        });
    }

    var ajaxObj = {//Object to save cluttering the namespace.
        options: {
            url: "........",//The resource that delivers loc data.
            dataType: "json"//The type of data tp be returned by the server.
        },
        delay: 10000,//(milliseconds) the interval between successive gets.
        errorCount: 0,//running total of ajax errors.
        errorThreshold: 5,//the number of ajax errors beyond which the get cycle should cease.
        ticker: null,//setTimeout reference - allows the get cycle to be cancelled with clearTimeout(ajaxObj.ticker);
        get: function() { //a function which initiates 
            if(ajaxObj.errorCount < ajaxObj.errorThreshold) {
                ajaxObj.ticker = setTimeout(getMarkerData, ajaxObj.delay);
            }
        },
        fail: function(jqXHR, textStatus, errorThrown) {
            console.log(errorThrown);
            ajaxObj.errorCount++;
        }
    };

    //Ajax master routine
    function getMarkerData() {
        $.ajax(ajaxObj.options)
          .done(setMarkers) //fires when ajax returns successfully
          .fail(ajaxObj.fail) //fires when an ajax error occurs
          .always(ajaxObj.get); //fires after ajax success or ajax error
    }

    setMarkers(locs);//Create markers from the initial dataset served with the document.
    //ajaxObj.get();//Start the get cycle.

    // *******************
    //test: simulated ajax
    /*
    var testLocs = {
        1: { info:'1\. New Random info and new position', lat:-37, lng:124.9634 },//update info and position and 
        2: { lat:70, lng:14.5144 },//update position
        3: { info:'3\. New Random info' },//update info
        4: { remove: true },//remove marker
        5: { info:'55555\. Added', lat:-37, lng:0 }//add new marker
    };
    setTimeout(function() {
        setMarkers(testLocs);
    }, ajaxObj.delay);
    */
    // *******************
}); 
```

在代码的底部，您会找到一个`testLocs`数据集，展示了在应用初始数据集后添加/删除/更新标记的可能性范围。

我还没有完全测试 ajax，但是已经用`testLocs`数据集模拟了它。

见**[演示](http://jsfiddle.net/Vvcbt/)**

10 秒后，`testLocs`将应用，您将看到标记的各种更改（以及信息窗口中显示的信息）。请特别注意，更新数据不需要完整 - 只需指定更改即可。

您需要安排您的服务器：

*   `locs`按照我的示例构建初始数据集。
*   `testLocs`按照我的示例的一般格式返回 JSON 编码的数据集。

## 编辑 1

我已经包含了获取新数据集所需的所有客户端代码。您需要做的就是：

*   创建一个服务器端脚本（例如“get_markers.php”），它返回正确格式的 json 编码数据集（如前所述）。
*   编辑该行`url: "........",`以指向服务器端脚本，例如`url: "get_markers.php"`.
*   通过取消注释该行来激活循环 ajax 进程`ajaxObj.get();`。
*   确保“模拟 ajax”代码块被注释掉或删除。

## 编辑 2

我添加了一个名为`auto_remove`. 设置为 true 时，将运行一小段额外的代码块，从而删除所有未报告位置的标记。

这将允许您在每次迭代时报告所有*活动标记。*移除将自动发生，无需主动命令它们。

响应的代码`{ remove: true }`仍然存在，因此如果您需要，可以明确命令（`auto_remove`设置为）删除。`false`

更新**[了演示](http://jsfiddle.net/Vvcbt/1/)**

## 编辑 3

PHP 脚本应构建以下形式的数组：

```
<%php
$testLocs = array(
    'loc1' => array( 'info' => '1\. New Random info and new position', 'lat' => 0, 'lng' => 144.9634 ),
    'loc2' => array( 'lat'  => 0, 'lng' => 14.5144 ),
    'loc3' => array( 'info' => '3\. New Random info' ),
    'loc5' => array( 'info' => '55555\. Added', 'lat' => 0, 'lng' => 60 )
);
echo json_encode($testLocs);
exit();
%> 
```

我不确定 PHP 是否会处理数字键。如果不是，请尝试使用字符串，`'1'`等等`'2'`。给所有键一个字母前缀可能是最安全的，例如。`'loc1'`等`'loc2'`。无论您选择做什么，请确保 javascript`locs`对象中的键具有相同的类型和组成。

# magento - 多存储，来自 code/local/ 的模板代码

> ID：14771424
> 
> 赞同：0
> 
> 时间：2013-02-08T11:20:56.353
> 
> 标签：magento

我正在magento上准备一个多商店。我有一个三个模板，我从代码/核心更改了一些文件并在代码/本地替换，但是只有一个模板从代码/本地获取更改代码，其余模板应该从代码/核心/获取文件现在每个模板从代码/本地/获取文件我如何设置应用程序来解决问题谢谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:33:18.677

您不应该覆盖本地的核心文件。最好尝试开发自己的模块来重写核心功能。在此模块中，您可以集成配置，因此它仅用于一个商店视图，而不是全部。

# java - 如何将 2 个动态 Web 项目发布到 Eclipse 上的同一上下文根中？

> ID：14771427
> 
> 赞同：2
> 
> 时间：2013-02-08T11:21:04.917
> 
> 标签：java, eclipse, web-applications

这些天我正在设计我公司的 Web 应用程序产品的新版本。这是一种解决方案，但种类繁多，因为每个客户都希望拥有自己的网站。

这不仅仅是基于 MVC 模式改变视图的问题。有时我只需要为客户包含 3rd 方库。我不喜欢将客户特定的库添加到产品项目中。然后我有了一个想法。

让项目的公共部分保留原始项目，并将客户特定的库或代码提取到其他新项目中。新项目将被编译好，因为它可能依赖于原始公共项目。原来的普通项目，当然没有问题。

**这是我现在的问题。**我将使用 maven，以便我可以从 2 个不同的项目中获取 WAR 文件进行部署。但是*在使用 Eclipse 的开发过程中呢？*如何将 2 个动态 Web 项目发布到同一个上下文根中？

* * *

当我输入标题时，stackoverflow 提出了 2 个感兴趣的类似问题：[多个项目可以有相同的上下文根吗？](https://stackoverflow.com/questions/3468558/can-multiple-projects-have-the-same-context-root)&[如何将同一解决方案中的多个网站项目发布到一个文件夹？](https://stackoverflow.com/questions/124355/how-do-i-publish-multiple-web-site-projects-in-the-same-solution-to-one-folder)但它们都对我没有用。

我在等待你的好意建议。

# qt - 如何防止在键入 QAction 的快捷方式时调用 QWidget::keyReleaseEvent

> ID：14771430
> 
> 赞同：2
> 
> 时间：2013-02-08T11:21:14.747
> 
> 标签：qt, qwidget, qaction

在我的 QMainWindow 子类中，我有几个带有 QKeySequence 快捷方式的 QAction。我也重新实现`QWidget::keyPressEvent`并`QWidget::keyReleaseEvent`在主窗口中。

如果我在键盘上键入其中一个快捷方式（例如，Ctrl + C），`keyPressEvent`则不会在我的主窗口中调用，这是有道理的，因为相关操作需要该事件。但是，由于某种原因`keyReleaseEvent` *被*调用。有什么方法可以防止这种情况发生，或者至少可以轻松检测到`keyReleaseEvent`事件是否与主窗口的快捷方式之一匹配，以便我可以忽略该事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:02:07.640

这似乎是一个错误。[我在这里](https://bugreports.qt-project.org/browse/QTBUG-29587)提交了一份报告。

# asp.net-mvc - ASP.NET MVC AJAX onError 处理

> ID：14771434
> 
> 赞同：0
> 
> 时间：2013-02-08T11:21:37.033
> 
> 标签：asp.net-mvc, error-handling, asp.net-ajax

我正在尝试从表中删除项目。它有 Ajax 链接。

```
@Ajax.ActionLink("Delete", "DeleteConfirm", new { id = Model.ID }, new AjaxOptions {
    HttpMethod = "POST", UpdateTargetId = "TableID", OnSuccess = "CloseDialog", OnFailure = "AlerDialog"
  }) 
```

它使用 POST 方法从控制器调用 DeleteConfirm 方法。我做了一个简单的控制器，它应该做一些事情，所以 ActionLink 应该捕获错误并运行 OnFailure 函数（以显示警报对话框）。

控制器：

```
public ActionResult DeleteConfirm(int id)
        {            
            // code here
        } 
```

从控制器方法返回什么以便 OnFailure 函数调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-26T21:08:29.587

OnError is fired when error happens on serverside. By error, I mean exception, and I think you can't pass exception message on clientside except of 500 Server error. I think that good aproach is to have some CustomResponse class that your action will return. In your case, something like:

```
Class DeletionResponse
{
    public bool IsDeletionSuccesfull {get; set; }
    public string Message {get; set;}
} 
```

In DeleteConfirm action you create new response, which maybe needs to inheriteActionResult class(I'm not sure because I'm new to MVC). If some error ocures while deleting, set DeletionSuccesfull to false, and Message to message of exception, or some custom message.

On client side, the point is to examine success in OnSuccess handler, and then decide what to do. Something like:

```
function handleResponse(deletionResponse){
  if(deletionResponse.d.IsDeletionSuccesfull){
     CloseDialog();
  }
  else{
     AlertDialog(deletionResponse.d.Message);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:36:01.933

how about throwing an exception?

```
public ActionResult DeleteConfirm(int id)
    {
        try
        {
            //make your call to the database here
            return View();
        }
        catch (ExceptionType1 ex)
        {
            //log the details of your error for support purposes, alerting tracing etc. 
            ex.Message = "Nice message for user"
            throw ex;
        }
        catch (ExceptionType2 ex)
        {
            //log the details of your error for support purposes, alerting tracing etc. 
            ex.Message = "Another nice message for user"
            throw ex;
        }
    } 
```

Your ajax call would then know it was a failure, and run the correct function.

**Edit** I have added a second exception type to satisfy the comments. I still feel this is a good answer, and that the down vote is unfair.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T18:08:36.787

OnFailure 将根据结果的状态代码触发，所以这样的事情会产生预期的效果。

```
return new HttpStatusCodeResult(HttpStatusCode.InternalServerError, "Reason for failure"); 
```

另外，不确定它是否相关，但您的 OnFailure 文本不应该是“AlertDialog”而不是“AlerDialog”吗？

**编辑：**在您的控制器操作中，您应该能够使用 MVC 提供的扩展方法来测试请求是通过 Ajax 发出的`Request.IsAjaxRequest()`。请注意，没有*真正的*方法来检查请求是否是服务器上的 Ajax 请求，此方法利用了它所发出的所有 ajax 请求的自定义标头 jQuery 集的存在，换句话说，不要`Request.IsAjaxRequest()`在业务逻辑中使用。

**IsAjaxRequest() 方法的来源**

```
namespace System.Web.Mvc
{
    public static class AjaxRequestExtensions
    {
        public static bool IsAjaxRequest(this HttpRequestBase request)
        {
            if (request == null)
            {
                throw new ArgumentNullException("request");
            }

            return (request["X-Requested-With"] == "XMLHttpRequest") || ((request.Headers != null) && (request.Headers["X-Requested-With"] == "XMLHttpRequest"));
        }
    }
} 
```

# ruby - 在机架应用程序中，我如何知道哪个 Web 服务器正在运行？

> ID：14771435
> 
> 赞同：2
> 
> 时间：2013-02-08T11:21:39.447
> 
> 标签：ruby, rack

在机架应用程序中，我如何知道哪个 Web 服务器正在作为机架处理程序运行？

例如，在 config.ru 中，我想打开是否正在运行 WEBrick：

```
unless running_webrick?
  redirect_stdout_and_stderr_to_file
end

run App 
```

```
def running_webrick?
   ???
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:16:06.080

传递给堆栈中每个组件的环境哈希都有一个`SERVER_SOFTWARE`键。运行它并观察网页上的输出：

```
require 'rack'

class EnvPrinter

  def call env
    [200, {'content-type' => 'text/plain'}, [env.inspect]]
  end

end

run EnvPrinter.new 
```

如果使用 rackup 执行，webrick 将用作服务器（这是默认设置）并且`SERVER_SOFTWARE`类似于`WEBrick/1.3.1 (Ruby/1.9.3/2013-01-15)`. 如果使用独角兽，它将类似于`Unicorn 4.5.0`. 此机架代码根据运行的服务器返回自定义响应：

```
require 'rack'

class EnvPrinter

  def call env
    response = case env.fetch('SERVER_SOFTWARE')
               when /webrick/i then 'Running on webrick'
               when /unicorn/i then 'Running on unicorn'
               when /thin/i then 'Running on thin'
               else "I don't recognize this server"
               end
    [200, {'content-type' => 'text/plain'}, [response]]
  end

end

run EnvPrinter.new 
```

# java - 将 JMenu 添加到 JPanel

> ID：14771437
> 
> 赞同：2
> 
> 时间：2013-02-08T11:21:47.173
> 
> 标签：java, swing, jpanel, jmenu, jmenuitem

我需要`JMenu`在`JMenuItem`. `JPanel`问题是，当我这样做时，`JMenu`鼠标悬停时不会激活......我不知道该怎么做以及是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:49:12.170

如果你将你的包装`JMenu`在 a 中`JMenuBar`，它会按预期工作。

这是一个演示示例：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class TestMenus {

    private JMenuBar createMenuBar(String name, int depth) {
        JMenuBar bar = new JMenuBar();
        bar.add(createMenu(name, depth));
        return bar;
    }

    private JMenu createMenu(String name, int depth) {
        JMenu menu = new JMenu(name);
        for (int i = 0; i < 5; i++) {
            if (depth > 0) {
                menu.add(createMenu("sub-" + name, depth - 1));
            }
        }
        for (int i = 0; i < 5; i++) {
            menu.add(createMenuItem("Menu item " + (i + 1)));
        }
        return menu;
    }

    private JMenuItem createMenuItem(String name) {
        final JMenuItem jMenuItem = new JMenuItem(name);
        jMenuItem.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(jMenuItem, "Successfully pressed a menu item");
            }
        });
        return jMenuItem;
    }

    protected void initUI() {
        JFrame frame = new JFrame(TestMenus.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(createMenuBar("Root menu", 3));
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestMenus().initUI();
            }
        });
    }

} 
```

结果：

![添加到 JFrame 内容窗格的菜单的结果](../Images/c284a69053cffe7417a1685bd7edfd78.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T01:45:59.123

这是解决这个问题的另一种方法，我认为它更接近你想要的。它涉及扩展`JMenuBar`以使其具有`JMenu`对象的外观。

该类包含一个`JMenu`名为 menu 的对象。add 方法被覆盖，因此您添加到菜单而不是`JMenuBar`（您可能必须覆盖更多的 add 方法以使其完美）。

绘画有几种选择。我不确定您是否`JMenuBar`想要`JMenuBar`.

这是没有边框的按钮外观的结果： ![未点击](../Images/f038c72ce3717a9bba53f5fc0622d2dd.png) ![已点击](../Images/b397b782df350a46229578356b9eb87e.png)

这是没有按钮外观和边框的结果： ![未点击](../Images/1a3c16124024e0eda19bdcc21cd46851.png) ![已点击](../Images/8770e893e2b9714709cfb6506de6b37f.png)

```
import java.awt.*;
import javax.swing.*;

public class JPanelMenu extends JMenuBar{

public static void main(String[] args) {
    JFrame f = new JFrame("Menu Test");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JMenu jmenu = new JMenu("J Menu");
    jmenu.add(new JMenuItem("Menu Item"));

    JPanelMenu m = new JPanelMenu("Menu");
    m.add(jmenu);
    m.add(new JMenuItem("Menu Item 1"));
    m.add(new JMenuItem("Menu Item 2"));

    JPanel background = new JPanel();
    background.add(m);      
    f.setContentPane(background);
    f.pack();
    f.setVisible(true);
}

//This is the JMenu that is shown
private JMenu menu;

public JPanelMenu(String title) {
    super();
    menu = new JMenu(title);
    super.add(menu);
}

@Override
public Component add(Component comp) {
    //You add the the JMenu instead of the JMenuBar
    return menu.add(comp);
}

@Override
public JMenu add(JMenu c) {
    //You add the the JMenu instead of the JMenuBar
    return (JMenu) menu.add(c);
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);

    //Include these two lines to remove the button look
    //Or remove this method to keep the button look
    //g.setColor(getBackground());
    //g.fillRect(0, 0, getWidth(), getHeight());
}

@Override
protected void paintBorder(Graphics g) {
    //Remove this line to remove the underline look
    //when you remove the button look
    //An alternative is to you setBorderPainted(false);
    //when you create the object or in the constructor
    //Or remove this method to keep the border
    //super.paintBorder(g);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:25:57.427

您必须在 JPanel 布局中传递一个[BorderLayout](http://download.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html)然后您可以在面板中添加菜单栏：

```
JPanel p = new JPanel();
p.setLayout(new BorderLayout());
p.add(menubar, BorderLayout.NORTH); 
```

# asp-classic - 我可以在asp中隐藏地调用超链接吗？

> ID：14771439
> 
> 赞同：-1
> 
> 时间：2013-02-08T11:21:53.137
> 
> 标签：asp-classic

如何使用经典 ASP调用特定网站 API（例如[http://example.com/web.asp?username=xxx&pass=xxx ）？](http://example.com/web.asp?username=xxx&pass=xxx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:41:25.827

我假设您的意思是`HTTP Request`在**经典 asp**中创建一个：[MSXML2.ServerXMLHTTP](http://www.4guysfromrolla.com/webtech/110100-1.shtml)

# php - 遍历父表中的记录，其中子表中的 parentTableID 和

> ID：14771441
> 
> 赞同：0
> 
> 时间：2013-02-08T11:21:55.550
> 
> 标签：php, mysql, sql

我有 2 张桌子投诉和任务。

投诉ID 在投诉表（即父表）中是唯一的，它是任务表中的外键。

因此，一个投诉可以有多个任务，因此在任务表中，您可以多次拥有相同的投诉 ID。

### 当所有相关任务的状态为完成时，我想显示投诉表中的所有字段

我已经尝试过了，但它不能完全工作，因为如果投诉有 4 个任务并且只有 1 个任务被标记为完成，那么它会拉该投诉：

```
SELECT * FROM complaints WHERE complaintID IN 
(SELECT * FROM tasks WHERE completed="yes") ORDER BY deadline 
```

如果有人可以帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:24:57.327

```
select  *
from    complaints c
where   not exists
        (
        select  *
        from    tasks t
        where   t.ComplaintID = c.ComplaintID
                and t.Completed <> 'yes'
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:37:00.563

您只想在“内部”表中查找外键属性。所以，这样写： SELECT * FROM 投诉 WHERE 投诉 ID IN (SELECT 投诉 ID * FROM 任务 WHERE 完成 =“yes”) ORDER BY 截止日期 * 或任务表上的任何外键

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:41:19.127

**已编辑**

试试这个：

```
 SELECT * FROM complaints 
 WHERE NOT EXISTS 
       (SELECT complaintid 
       FROM tasks 
       WHERE complaintid 
       in (SELECT complaintID 
           FROM tasks 
           WHERE tasks.complaintID = complaints.complaintid 
           and completed = 'no') 
       )ORDER BY deadline; 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/f6055/14)

这是用于测试我上面的答案的表结构和示例数据。

```
CREATE TABLE complaints (
  complaintID INT AUTO_INCREMENT PRIMARY KEY,
  content VARCHAR(255),
  deadline datetime
  );

CREATE TABLE tasks (
  tasksid INT AUTO_INCREMENT PRIMARY KEY,
  complaintID INT,
  completed ENUM ('yes','no')
  );

INSERT INTO complaints(content,deadline) VALUES ('complaint1', NOW()+INTERVAL 3 day), ('complaint2',NOW()+INTERVAL 8 day),('complaint3', NOW()+INTERVAL 3 day);

INSERT INTO tasks (complaintID, completed) VALUES(1,'no'), (1,'yes'), (2,'yes'), (1,'no'), (1,'yes'),  (1,'yes'), (2,'no'), (3,'yes'), (3, 'yes'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T11:53:33.730

你也可以这样做

```
select complaints.*, tasks.* from complaints, tasks where 
complaints.complaintID=tasks.complaintID and tasks.completed='yes' and 
complaints.complaintID NOT IN (select complaintID from tasks where completed='no') 
```

使用的表结构是：

```
CREATE TABLE complaints (
  complaintID INT AUTO_INCREMENT PRIMARY KEY,
  content VARCHAR(255),
  deadline datetime
  );

CREATE TABLE tasks (
  tasksid INT AUTO_INCREMENT PRIMARY KEY,
  complaintID INT,
  completed ENUM ('yes','no')
  );

INSERT INTO complaints(content,deadline) VALUES ('complaint1', NOW()+INTERVAL 3 day), ('complaint2',NOW()+INTERVAL 8 day);

INSERT INTO tasks (complaintID, completed) VALUES(1,'no'), (1,'yes'), (2,'no'); 
```

我使用了@Mr 的表结构。激进的，来自他的 SQL FIDDLE。

希望能帮助到你

# sql - 如何JOIN几个表？

> ID：14771442
> 
> 赞同：0
> 
> 时间：2013-02-08T11:22:03.207
> 
> 标签：sql, sql-server

在 MS SQL Server 上，我想在一次选择中加入一些表。

表：

追踪：

```
Segment_ID | Track_INFO 
```

Segment_ID：

```
Segment_ID | Road_ID 
```

路：

```
Road_ID | Road_INFO 
```

所以我想从 Track and Road 表中选择信息。我知道如何加入两个表：

```
 SELECT  

    Segment_ID = T1.Segment_ID,
    Track = T1.Track,
    --Road_ID = Segment_ID.Road_ID

FROM dbo.Track T1,dbo.Road T2
LEFT JOIN Segment_ID Segment_ID ON Segment_ID.Segment_ID = T1.Segment_ID
--LEFT JOIN Road Road_ID ON Road.Road_ID = Segment_ID.Road_ID 
```

但是在我的情况下如何加入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T11:27:28.727

试试这个：

```
SELECT Track.Track_INFO, Road.Road_INFO
FROM Track 
INNER JOIN Segment_ID ON Segment_ID.Segment_ID = Track.Segment_ID
INNER JOIN Road ON Segment_ID.Road_ID = Road.RodaID 
```

而且，如果你有空标记，也许你需要 LEFT 加入......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T11:26:06.693

```
select * 
from Track inner join Segment_ID on Track.Segment_ID = Segment_ID.Segment_ID
 inner join Road on Segment_ID.Road_ID = Road.Road_ID 
```

您也可以根据您想要的行为将“内连接”更改为“左连接”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T11:26:26.267

试试这个：

```
SELECT  t.*, r.* 
FROM track t 
INNER JOIN segment s ON t.Segment_ID = s.Segment_ID 
INNER JOIN road r ON s.Road_ID = s.Road_ID 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T11:36:52.920

尽量避免如下表加入，现在已经过时了。

```
FROM Table1 T1, Table2 T2
WHERE T1.id = T2.id 
```

*根据您的要求*，更好的连接表的方法是使用`INNER JOIN`（或`JOIN`）`LEFT JOIN`、`RIGHT JOIN`等；

 *```
SELECT * --Or you can get required list of columns using table aliases (t,s,r)
FROM dbo.Track t JOIN dbo.Segment_ID s ON t.Segment_ID = s.Segment_ID
         JOIN dbo.Road r ON s.Road_ID = r.Road_ID 
```

这里有一些关于*JOINS的很好的*[**图形示例**](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)以及它们带来的结果*

# spring - 春季上传表单可选，带有可选文件

> ID：14771446
> 
> 赞同：6
> 
> 时间：2013-02-08T11:22:21.807
> 
> 标签：spring, spring-mvc, file-upload

我们正在创建一个配置文件页面，其中包含一个可选的配置文件图片。我们正在使用 Spring 3.2

这是表格： -

```
<form:form id="editMember" modelAttribute="memberAjaxEditModel"
    method="POST" class="form-horizontal" enctype="multipart/form-data" >
    ...
    <form:input path="fileData" type="file"/>
    ...
</form> 
```

这是控制器方法： -

```
@RequestMapping(value = "/{id}", method = RequestMethod.POST)
public String onEditPost(@PathVariable long id, @Valid @ModelAttribute(MemberAjaxEditModel.KEY) MemberAjaxEditModel model, BindingResult result) throws ServiceRecoverableException {
....
} 
```

这是模型

```
public class MemberAjaxEditModel {

...
private CommonsMultipartFile fileData;
...
} 
```

如果在表单上提交了文件，它可以正常工作，但是如果在没有文件的情况下提交表单，则 BindingResult 变量中会出现错误。

这是错误： -

```
Field error in object 'memberAjaxEditModel' on field 'fileData': rejected value []; codes [typeMismatch.memberAjaxEditModel.fileData,typeMismatch.fileData,typeMismatch.org.springframework.web.multipart.commons.CommonsMultipartFile,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [memberAjaxEditModel.fileData,fileData]; arguments []; default message [fileData]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'org.springframework.web.multipart.commons.CommonsMultipartFile' for property 'fileData'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [org.springframework.web.multipart.commons.CommonsMultipartFile] for property 'fileData': no matching editors or conversion strategy found] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T14:28:10.617

原来是[jQuery Form 插件](http://malsup.com/jquery/form/)发送了一个空字符串，而不是 spring 所期望的 - 没有发送任何内容。

如果没有像这样填充 fileData 值，我使用 before submit 解决了这个问题：-

```
 function beforeSubmit(arr, $form, options){
     var fileDataIndex = -1;

     $.each(arr, function(index, value) {
          if (value.name == "fileData"){
              if (value.value.length == 0){
                  fileDataIndex = index;
              }
          }
        });

     if (fileDataIndex != -1){
        arr.remove(fileDataIndex);
     }
 } 
```

我希望这可以帮助一些遇到同样问题的谷歌用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-01T11:20:33.167

另见[github问题296](https://github.com/malsup/form/issues/296)：

> 您可以使用 iframe 选项在两种情况下强制使用相同类型的帖子：
> 
> iframe：真

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-19T10:48:38.010

尝试使用`StringMultipartFileEditor`.

```
@InitBinder
public void initBinder(WebDataBinder binder) {
    binder.registerCustomEditor(String.class, new StringMultipartFileEditor());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T11:43:18.533

使用`org.springframework.web.multipart.MultipartFile`而不是 CommonsMultipartFile

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T17:42:07.477

你有在你的`multipartResolver`bean 中定义`application-context.xml`吗？如果没有，那么包括这个并尝试

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"> 
       <property name="maxUploadSize" value="1000000"/> <!-- File size in bytes. -->
</bean> 
```

# long-polling - 在便士拍卖网站上进行长时间投票？

> ID：14771451
> 
> 赞同：0
> 
> 时间：2013-02-08T11:22:36.990
> 
> 标签：long-polling

在便士拍卖网站上，随着时间的推移会发生一些基本请求，即：

*   投标请求（当有人投标时）
*   定时器更新
*   主要投标人更新

我试图更好地理解长轮询，但我坚持这一点。据我所知，长轮询可以减少 Ajax 请求。即只有一个用于视觉更新，一个用于操作。因此，因此：

1.  投标请求（投标）将保持原样，但所有视觉更新请求将合并为一个“长轮询”请求，对吗？
2.  如果用户第一次连接到该站点，他将通过同时传递他最后一次被告知的页面状态来请求页面的当前状态。服务器会将它与它应该是什么状态进行比较，如果它们不同，它将把新状态传回给用户，对吗？
3.  将状态传回时，LONG POLL 将有效停止，屏幕将更新，并启动新的 LONG POLL，对吗？

到目前为止，这种理解正确吗？

如果是这样，如果服务器仍然需要比较状态，这将如何以任何方式减少对后端的请求数量？

如果页面由一个用户在 50 个不同的窗口中打开，这将有何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:40:29.007

长轮询用于模拟服务器将数据推送到客户端的连接（而不是实际发生的情况 - 客户端从服务器请求信息）。基本上，客户端从服务器请求数据，但不是立即将数据返回给客户端，而是服务器“保持”请求打开 - 然后它可以在稍后的时间点将数据返回给客户端 - 这可用于模拟服务器更新客户“实时”。

因此，在您的拍卖网站示例中，客户端可能会长时间轮询服务器以获取项目出价金额 - 服务器将保持此请求处于打开状态，并且当该项目的出价值发生变化时，可以将更新后的金额返回给客户端..这个可用于给出服务器在投标金额变化时更新客户端的印象。

就对服务器的请求而言，这在很大程度上取决于它是如何实现的。显然，与让客户端每秒发出一个新的“标准”请求以检查更新相比，使用长轮询将减少对服务器的请求数量。客户端的多个实例仍然会导致对服务器的多个请求 - 此外，服务器仍然必须处理保持长轮询请求打开并在适当时响应这些请求的开销。显然不同的服务器和服务器架构，处理这比其他人更有效。

# java - 从字符串构建组的正确字符串模板组语法是什么？

> ID：14771452
> 
> 赞同：0
> 
> 时间：2013-02-08T11:22:43.850
> 
> 标签：java, stringtemplate

我正在尝试`STGroup`从 a构建 a，`String`但它抱怨无效字符和缺少模板：

```
 final String templates = "a(x) ::= <li>$x.fname$ $x.lname$</li>\n" +
                             "b(persons) ::= <ul>$persons:a()$</ul>\n";
    final STGroup grp = new STGroupString("mysource", templates, '$', '$'); 
```

这是它喷出的错误：

```
mysource 1:10: invalid character '<'
mysource 1:10: missing template at 'li'
mysource 1:12: invalid character '>'
mysource 1:13: invalid character '$'
mysource 1:10: garbled template definition starting at 'li'
mysource 1:14: garbled template definition starting at 'x'
mysource 1:21: invalid character '$'
mysource 1:23: invalid character '$'
mysource 1:16: garbled template definition starting at 'fname'
mysource 1:24: garbled template definition starting at 'x'
mysource 1:31: invalid character '$'
mysource 1:33: invalid character '<'
mysource 1:34: invalid character '/'
mysource 1:26: garbled template definition starting at 'lname'
mysource 1:36: invalid character '>'
mysource 1:34: garbled template definition starting at 'li'
mysource 2:16: invalid character '<'
mysource 2:16: missing template at 'ul'
mysource 2:18: invalid character '>'
mysource 2:19: invalid character '$'
mysource 2:16: garbled template definition starting at 'ul'
mysource 2:20: garbled template definition starting at 'persons'
mysource 2:31: invalid character '$'
mysource 2:33: invalid character '<'
mysource 2:34: invalid character '/'
mysource 2:36: invalid character '>'
mysource 2:34: missing '::=' at 'ul'
mysource 2:34: missing template at 'ul'
mysource 2:28: redefinition of template a
mysource 2:34: garbled template definition starting at 'ul' 
```

**我想使用`$`作为我的分隔符，能够呈现这些模板的正确格式是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:32:59.457

我想出了一个程序解决方案，其中包含一些相关问题的答案和一些实验：

```
 STGroup grp = new STGroup('$', '$');
    final CompiledST templateA = grp.defineTemplate("a", "<li>$it.fname$ $it.lname$</li>");
    templateA.addArg(new FormalArgument("it"));
    final CompiledST templateB = grp.defineTemplate("b", "<ul>$list:a()$</ul>");
    templateB.addArg(new FormalArgument("list")); 
```

# c# - 就像使用动态 lambda 表达式搜索日期时间字段一样

> ID：14771453
> 
> 赞同：2
> 
> 时间：2013-02-08T11:22:51.730
> 
> 标签：c#, asp.net-mvc, linq, lambda

我正在形成如下的字符串表达式。

```
 string Condition = " it.person_id = " + personId.ToString();

     if (lstPersonFields != null)
      {
         foreach (var field in lstPersonFields )
           {                           
              string  fieldCondition = " And it." + field.FieldName.ToString();
                if (field.FieldCondition == "Contains")
                  {
                    fieldCondition = fieldCondition + " Like '%" + field.FieldValue.ToString() + "%'";
                  }
                 else if (field.FieldCondition == "Equals")
                  {
                   fieldCondition = fieldCondition + " = '" + field.FieldValue.ToString()+"'";
                  }
                 Condition = Condition + fieldCondition;
           }
      }
      var personSearch = FullPersonlst.Where(Condition).ToList(); 
```

上面的代码对于类似搜索中的日期时间值以外的其他值正常工作，并为日期时间字段抛出错误，如

```
Like arguments must be of string type 
```

如何搜索日期时间字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:39:41.533

将其作为动态 lambda 表达式执行将类似于：

```
var arg = Expression.Parameter(typeof(Person), "it");
var body = Expression.Equal(
    Expression.PropertyOrField(arg, "PersonId"),
    Expression.Constant(personId));

if (lstPersonFields != null)
{
    foreach (var field in lstPersonFields)
    {
        var member = Expression.PropertyOrField(arg, field.FieldName);
        switch (field.FieldCondition)
        {
            case "Contains":
                body = Expression.AndAlso(body,
                    Expression.Call(typeof(SqlMethods), "Like", null,
                        member,
                        Expression.Constant("%" + field.FieldValue + "%")));
                break;
            case "Equals":
                body = Expression.AndAlso(body,
                    Expression.Equal(
                       member,
                       Expression.Constant(field.FieldValue)));
                break;
        }
    }
}
var lambda = Expression.Lambda<Func<Person,bool>>(body, arg);
var personSearch = FullPersonlst.Where(lambda).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:33:17.280

正如错误所说，您不应将 like 用于非字符串值。这也没有任何意义。如果要搜索特定的日期时间，请使用 datetime = value。为了在您可以使用的时间范围内搜索。您需要检查要搜索的属性类型，并使用适当的方式在查询中拟合类型。

就个人而言，我永远不会使用这样的“动态查询创建者”。

# android - 滑动时将表单字段保存在片段中并在另一个片段中获取它们

> ID：14771460
> 
> 赞同：0
> 
> 时间：2013-02-08T11:23:39.463
> 
> 标签：android, callback, android-fragments, android-fragmentactivity

我有一个`ViewPager`附有三个片段的 A。每个片段都有一个用户需要填写的表格。在最后一页（片段）上有一个更新按钮，可将数据发送到服务器。所以我需要从第一个和第二个片段中收集数据并将其返回到第三个片段中，以便我可以将数据发送到服务器。

为此，我刚刚在第一个和第二个片段中定义了将数据发送给父`FragmentActivity`级的接口，当然我已经在`FragmentActivity`. 这些方法将数据保存在 FragmentActivity 中，以便我可以在第三个片段中获取这些数据。

为此，我需要在滑动时回调，因此当用户从 form-1 和 form-2 滑动时，我可以将数据发送到 parent `FargmentActivity`。

现在我不知道何时调用这些方法，以便将第一个和第二个片段中的 form-1 和 form-2 数据保存在父“FragmentActivity”中。我已经尝试了 Fragment 中的所有回调方法，但是当用户滑动时没有调用任何方法。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:46:57.133

您可以使用[ViewPager.OnPageChangeListener](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html) - `setOnPageChangeListener(ViewPager.OnPageChangeListener listener)`

这将“设置一个监听器，当页面更改或增量滚动时将调用该监听器”

您将在您的活动中使用它，然后从当前片段请求当前数据。

由于这会触发增量滚动，因此您可以覆盖[FinishUpdate](http://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#finishUpdate%28android.view.View%29)，这似乎是在当前视图完成更改时触发的。

# ruby-on-rails-3 - 如何处理 Ember REST 适配器中未找到的 404

> ID：14771462
> 
> 赞同：1
> 
> 时间：2013-02-08T11:23:52.167
> 
> 标签：ruby-on-rails-3, ember.js

我正在使用 Ember 1.0.0 pre 并使用 REST 适配器从 Rails API 获取对象。如果通过 REST API 找到对象，我会渲染一个模板，并将找到的模型对象设置为视图的模型。为了做到这一点，我在 Route 中使用了模型钩子，一切似乎都运行良好。自然，如果找不到模型对象，我想渲染一些特殊的 404 模板/视图。问题是如果 REST 适配器返回错误，模型挂钩会停止处理。

我在 ember-data 路线图中看到尚不支持错误处理。

**我不明白的是，如果发生错误，为什么 Ember 不会在 Route 中调用重定向挂钩。**（我该如何处理这些错误？）

这是路线：

```
App.MyRoute = Ember.Route.extend({
  renderTemplate: function() {
  this.render('mymodel')    
  },
  model: function(params) {
    return App.MyModel.find(params.id);
  },
  redirect: function() {
    // I want to redirect to another route
    // if the model is not found via the find method.
    // However, this hook is not called if the previous one
    // does not return an object
  }
}) 
```

还有其他解决方案吗？我知道，如果视图的模型为空，我可以检查模板，然后渲染部分模板，但问题是视图根本没有渲染（我假设正是因为同样的问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:23:34.553

我要做的是创建一个摘要，然后让您的路线扩展该路线。我已经[为您创建了一个有效的 JSFiddle](http://jsfiddle.net/xaA3d/)，但请让我解释一下。

我们`App.IndexRoute`可以包含 中的所有逻辑`App.MyRedirectRoute`，但是因为其他路由器可能需要相同的功能，所以最好创建一个抽象，因此如果/当您再次需要此功能时，您可以`App.MyRedirectRoute`再次扩展以防止重写代码。

不幸的是，Ember.JS 没有逻辑来检测模型是否为空并呈现不同的页面。也许在未来，这将成为现实！*（这将是可爱的！）*，但我们可以自己做到这一点。

我们`App.IndexRoute`很好很简单：

```
App.IndexRoute = App.MyRedirectRoute.extend({
    defaultRender: 'home',
    errorRedirectTo: '404',

    model: function(params) {
        // We've found a model!
        return Ember.Object.create({ params: params });
        // We've not found a model!
        return null;
    }
}); 
```

如果模型有效，那么我们可以渲染`home`路线，否则我们将渲染`404`路线。从路线返回模型没有任何变化。

它`renderTemplate`包含我们用于呈现适当视图的逻辑。因此，我们`renderTemplate`在抽象中重载方法并执行逻辑操作：

*   `errorRedirectTo`如果 Ember.JS 认为模型是空的，那么我们将按照;指定的方式渲染视图。
*   如果模型被认为是有效的，那么我们将呈现默认值，由`defaultRender`.

如果模型是空的，那么我们将简单地指定我们希望渲染 404 路由 ( `errorRedirectTo`)，但默认情况下我们希望渲染默认路由 ( `defaultRender`)。

要查看它的实际效果，请查看前面提到的 JSFiddle。注释掉第 27 行以查看呈现的 404 页面，因为对象是`null`.

我希望这有帮助！

# asp.net-mvc-4 - MVC4 捆绑模式错误

> ID：14771465
> 
> 赞同：4
> 
> 时间：2013-02-08T11:23:58.150
> 
> 标签：asp.net-mvc-4

我被 MVC4 中的捆绑包困住了。我已经定义了捆绑

```
bundles.Add(new ScriptBundle("~/bundles/maps").Include("~/Scripts/map.*.js")); 
```

和脚本

```
map.base.js
map.helper.js 
```

这没关系，直到我添加

```
map.setting.js 
```

之后我收到错误

```
Invalid pattern: 'map.*.js'. Wildcards are only allowed in the last path segment, can contain only one leading or trailing wildcard, and cannot be used with {version}. 
```

参数名称：virtualPaths

有什么想法如何在不列出所有文件的情况下解决这个问题（我希望添加更多带有“map.”前缀的文件）？

感谢帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T00:20:14.720

这似乎是当前 Bundle 版本的一个恼人的限制。

你可以写：

```
.Include("~/Scripts/map.*") 
```

当然它可能会回升`~/Scripts/map.a.txt` （不确定，没有测试那个边缘情况）。只要您在给定路径中只有 .js 资源，`map.*`就是安全的。

# php - 业务规则中的 $params

> ID：14771466
> 
> 赞同：1
> 
> 时间：2013-02-08T11:24:01.183
> 
> 标签：php, yii, business-rules, rbac

业务规则是否`$params`使用当前类属性作为它的指标？我在一个类中遇到了下面的代码，并且在它之前没有初始化`$param`。`project`是此类中的一个属性。效果如何`$params["project"]`？

```
class ProjectUserForm extends CFormModel
{
    public $project;
    // .....
    public function assign(){
    // ....
    $bizRule='return isset($params["project"]) && $params["project"]->isUserInRole("owner");';
    // ....
} 
```

***编辑：*** 对不起，我知道这很头晕。我试着说清楚。这是类链接[类](https://gist.github.com/jeffwinesett/3779690)

我的问题是**$params**。我认为在 $bizRul 初始化之前的某个地方，我们应该有类似的东西：

```
$params=array('project'=>$project); 
```

但我们没有。这怎么可能？$params 是别名还是类似的东西，或者我们可以使用任何名称来代替它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:10:29.957

您应该阅读以下内容：[使用业务规则](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#using-business-rules)。

> 业务规则是在我们执行访问检查时执行的一段 PHP 代码。

`$params`可以使用[`chekAccess`](http://www.yiiframework.com/doc/api/1.1/CWebUser#checkAccess-detail)，或者当您在控制器中声明访问规则时提供。

# java - 在哪里添加过滤从 Spring 服务返回的结果的代码

> ID：14771467
> 
> 赞同：0
> 
> 时间：2013-02-08T11:24:12.233
> 
> 标签：java, spring, design-patterns

在我的 Spring 控制器中，我从服务接收项目列表，然后使用控制器中的自定义代码创建一个新的过滤列表，该列表是从服务返回的列表的子集。

我不认为这个过滤代码应该发生在控制器中？

这是我的控制器：

```
 @Controller
    public class MyController {
    @Autowired
    private MyService myService;

        @RenderMapping
        public String getValues(ModelMap modelMap){

            List<String> = myService.getNewValues();

            List<String> filteredList = ......
            /**
                Code here to process the List and convert it to
                specific List
            */
            modelMap.addAttribute("values", filteredList);
        }
} 
```

过滤是否应该在服务实现层进行？

因此，`myService.getNewValues();`我应该使用一种过滤结果的新方法而不是：`myService.getNewFilteredValues();`？

注意：该方法`myService.getNewFilteredValues()`将是一个新方法，并且将包含与中指定的过滤代码相同的代码`MyController`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:52:55.633

就我个人而言，我会公开`myService.getValues();`并让服务对调用者隐藏过滤和其他逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:57:03.570

如果过滤是业务逻辑的一部分，我会将其置于服务级别。向 Service 添加一个方法，`getFilteredValues()`该方法在 tunr 中调用`getValues()`

UPD：如果它是控制器特定的逻辑（一些技术过滤，例如减少传输的数据量），则将其留在控制器级别。

# c# - Windows 中的语音识别

> ID：14771474
> 
> 赞同：0
> 
> 时间：2013-02-08T11:24:31.673
> 
> 标签：c#, .net, wpf, windows, xaml

当用户说出某些事情时，我需要在我的桌面应用程序中执行操作，例如，“保存文档”或“另存为”或“保存更改”会引发相应的事件。

但我不想依赖，甚至不想实现按钮（这对我来说是一个应用程序）。因此，设置 AccessibleName 或其他任何内容都不够好。我需要更多的控制。

有没有办法在 Windows WPF 桌面应用程序中“监听”命令？然后在说出该命令时引发事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T13:10:46.570

由于每个人都在发布指向 Microsoft Speech API 的链接，您可能仍然不知道如何使用它。

所以这里有一个使用[Microsoft Speech API的](http://msdn.microsoft.com/en-us/library/ee125663%28v=vs.85%29.aspx)[教程](http://www.codeproject.com/Articles/483347/Speech-recognition-in-Csharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T13:07:21.340

您见过支持[语音识别的](http://msdn.microsoft.com/en-us/library/ee125077%28v=vs.85%29.aspx#API_Speech_Recognition)[Microsoft Speech API](http://msdn.microsoft.com/en-us/library/ee125663%28v=vs.85%29.aspx)吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T13:08:02.513

您正在寻找[Microsoft Speech API](http://msdn.microsoft.com/en-us/library/hh361683%28v=office.14%29.aspx)（这是一个带有简洁代码示例*的语音识别入门*。虽然它适用于 WinForms，但它也适用于 WPF。）。它允许您创建可以识别和处理输入的语法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-24T00:07:55.650

我正在考虑将语音识别添加到我的基于 Hotspotizer Kinect 的应用程序（[http://github.com/birbilis/hotspotizer](http://github.com/birbilis/hotspotizer)）的分支中

> 经过一番搜索后，我发现您无法使用相关的语音命令标记可操作的 UI 元素，以便模拟用户对它们的操作，就像在 WPF 中集成语音输入时所期望的那样。我正在考虑制作一个 XAML 标记扩展来做到这一点，除非有人可以指出我可以重用的预先存在的工作......

以下链接应该有用：

[http://www.wpf-tutorial.com/audio-video/speech-recognition-making-wpf-listen/](http://www.wpf-tutorial.com/audio-video/speech-recognition-making-wpf-listen/)

[http://www.c-sharpcorner.com/uploadfile/mahesh/programming-speech-in-wpf-speech-recognition/](http://www.c-sharpcorner.com/uploadfile/mahesh/programming-speech-in-wpf-speech-recognition/)

[http://blogs.msdn.com/b/rlucero/archive/2012/01/17/speech-recognition-exploring-grammar-based-recognition.aspx](http://blogs.msdn.com/b/rlucero/archive/2012/01/17/speech-recognition-exploring-grammar-based-recognition.aspx)

[https://msdn.microsoft.com/en-us/library/hh855387.aspx](https://msdn.microsoft.com/en-us/library/hh855387.aspx)（利用 Kinect 麦克风阵列音频输入）

[http://kin-educate.blogspot.gr/2012/06/speech-recognition-for-kinect-easy-way.html](http://kin-educate.blogspot.gr/2012/06/speech-recognition-for-kinect-easy-way.html)

[https://channel9.msdn.com/Series/KinectQuickstart/Audio-Fundamentals](https://channel9.msdn.com/Series/KinectQuickstart/Audio-Fundamentals)

[https://msdn.microsoft.com/en-us/library/hh855359.aspx?f=255&MSPPError=-2147217396#Software_Requirements](https://msdn.microsoft.com/en-us/library/hh855359.aspx?f=255&MSPPError=-2147217396#Software_Requirements)

[https://www.microsoft.com/en-us/download/details.aspx?id=27225](https://www.microsoft.com/en-us/download/details.aspx?id=27225)

[https://www.microsoft.com/en-us/download/details.aspx?id=27226](https://www.microsoft.com/en-us/download/details.aspx?id=27226)

[http://www.redmondpie.com/speech-recognition-in-ac-wpf-application/](http://www.redmondpie.com/speech-recognition-in-a-c-wpf-application/)

[http://www.codeproject.com/Articles/55383/A-WPF-Voice-Commanded-Database-Management-Applic](http://www.codeproject.com/Articles/55383/A-WPF-Voice-Commanded-Database-Management-Applicat)

[http://www.codeproject.com/Articles/483347/Speech-recognition-speech-to-text-text-to-speech-a](http://www.codeproject.com/Articles/483347/Speech-recognition-speech-to-text-text-to-speech-a)

[http://www.c-sharpcorner.com/uploadfile/nipuntomar/speech-to-text-in-wpf/](http://www.c-sharpcorner.com/uploadfile/nipuntomar/speech-to-text-in-wpf/)

[http://www.w3.org/TR/speech-grammar/](http://www.w3.org/TR/speech-grammar/)

[https://msdn.microsoft.com/en-us/library/hh361625(v=office.14).aspx](https://msdn.microsoft.com/en-us/library/hh361625(v=office.14).aspx)

[https://msdn.microsoft.com/en-us/library/hh323806.aspx](https://msdn.microsoft.com/en-us/library/hh323806.aspx)

[https://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.requestrecognizerupdate.aspx](https://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.requestrecognizerupdate.aspx)

[http://blogs.msdn.com/b/rlucero/archive/2012/02/03/speech-recognition-using-multiple-grammars-to-improve-recognition.aspx](http://blogs.msdn.com/b/rlucero/archive/2012/02/03/speech-recognition-using-multiple-grammars-to-improve-recognition.aspx)

# debugging - DEBUG DOS程序查看内存

> ID：14771475
> 
> 赞同：0
> 
> 时间：2013-02-08T11:24:37.330
> 
> 标签：debugging, assembly, x86, dos

我刚刚开始学习 X86 汇编语言。

我的怀疑——

当我使用 DOS DEBUG 程序查看内存位置时，在使用两个不同的段：偏移地址检查同一内存位置时，我得到的值略有不同。IE-

不是`D 40[0]:17`并且`D 41[0]:7`应该给出完全相同的输出吗？因为他们在添加时都给出了相同的地址`segment + offset = 400+17 = 410+7 = 417H`

我得到的结果 - （注意它们略有不同）

```
-D 40:17
0040:0010                       00-00 00 1E 00 1E 00 0D 1C          .........
0040:0020  44 20 20 39 34 05 34 05-3A 27 39 0A 0D 1C 44 20   D  94.4.:'9...D
0040:0030  20 39 34 05 30 0B 3A 27-31 02 37 08 0D 1C 00 00    94.0.:'1.7.....
0040:0040  93 00 C3 00 00 00 00 00-00 03 50 00 00 10 00 00   ..........P.....
0040:0050  00 18 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................
0040:0060  0F 0C 00 D4 03 29 30 00-00 00 00 00 91 DA 10 00   .....)0.........
0040:0070  00 00 00 00 00 00 08 00-14 14 14 14 01 01 01 01   ................
0040:0080  1E 00 3E 00 18 10 00 60-F9 11 0B 00 50 01 00 00   ..>....`....P...
0040:0090  00 00 00 00 00 00 10                              .......
-D 41:7
0041:0000                       00-00 00 2C 00 2C 00 44 20          ...,.,.D
0041:0010  20 39 34 05 31 02 3A 27-37 08 0D 1C 0D 1C 44 20    94.1.:'7.....D
0041:0020  20 39 34 05 30 0B 3A 27-31 02 37 08 0D 1C 00 00    94.0.:'1.7.....
0041:0030  08 00 C3 00 00 00 00 00-00 03 50 00 00 10 00 00   ..........P.....
0041:0040  00 18 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................
0041:0050  0F 0C 00 D4 03 29 30 00-00 00 00 00 1C DB 10 00   .....)0.........
0041:0060  00 00 00 00 00 00 08 00-14 14 14 14 01 01 01 01   ................
0041:0070  1E 00 3E 00 18 10 00 60-F9 11 0B 00 50 01 00 00   ..>....`....P...
0041:0080  00 00 00 00 00 00 10                              ....... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:30:32.230

您正在查看 BIOS 数据区域，其内容会随着时间而变化，因为它包含诸如 shift/control/alt 键的状态、键盘缓冲区的读/写位置和计时器等内容。

# vb.net - 组合框自动完成问题

> ID：14771476
> 
> 赞同：2
> 
> 时间：2013-02-08T11:24:37.983
> 
> 标签：vb.net

我正在尝试将三个组合框合并到一个由文本框、numericupdown 控件和现在的组合框组成的功能 GUI 中。
在这些表单上，我可以使用键盘（me.selectnextcontrol）进行导航，按键向上和向下。
发生什么了？
当我第一次进入这些 GUI 时，一切正常，我可以按预期使用键盘向上/向下移动。

当我编辑一个位于我的 gui 中间并且设置如下的组合框时，问题就出现了：

```
 mycombo.AutoCompleteMode = AutoCompleteMode.SuggestAppend
    mycombo.AutoCompleteSource = AutoCompleteSource.CustomSource
    mycombo.AutoCompleteCustomSource = myAutoCompleteStringCollection 
```

问题是当我回到那些组合框时，我的导航循环不再获得按键（向上或向下键），因为组合框将它们用于自身目的（更改索引）。

我在 combobox_Leave 之后尝试，`mycombo.AutoCompleteSource = AutoCompleteSource.CustomSource`但这会关闭不需要的自动完成功能。

问题是：
这里是否可以在模式使用后设置描述的组合框，就像它在程序开始时一样，当它没有被编辑时，所以我可以在初始方式通过这些组合框使用键盘导航，但如果我需要，自动建议选项保持启用再次编辑它。

已编辑：这是一个显示问题的简单示例：

```
Public Class Form1

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Dim tb As New TextBox
    Dim cbb As New ComboBox
    Dim tbb As New TextBox
    Dim b1 As New Button
    Dim b2 As New Button

    With Me
        .KeyPreview = True
        .Size = New Size(350, 200)
        With .Controls
            .Add(tb)
            With tb
                .TabIndex = 0
                .Location = New Point(95, 20)
                .Text = "This is"
            End With
            .Add(cbb)
            With cbb
                .TabIndex = 1
                .Items.AddRange(New String() {"alabama", "africa", "australia", "grenland"})
                .Location = New Point(95, 50)
                .Text = "an Example"
                .DropDownStyle = ComboBoxStyle.DropDown
                .AutoCompleteMode = AutoCompleteMode.SuggestAppend
                .AutoCompleteSource = AutoCompleteSource.ListItems
            End With
            .Add(tbb)
            With tbb
                .TabIndex = 2
                .Location = New Point(95, 80)
                .Text = "textbox"
            End With

            .Add(b1)
            With b1
                .TabStop = False
                .Location = New Point(90, 130)
                .Text = "Nothing"
            End With
            .Add(b2)
            With b2
                .TabStop = False
                .Location = New Point(170, 130)
                .Text = "Exit"
                AddHandler b2.Click, AddressOf b2_Click
            End With
        End With
    End With
End Sub

Private Sub Form1_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown
    If e.KeyCode = Keys.Up Then
        e.Handled = True
        Me.SelectNextControl(Me.ActiveControl, False, True, True, True)
    End If

    If e.KeyCode = Keys.Down Then
        e.Handled = True
        Me.SelectNextControl(Me.ActiveControl, True, True, True, True)
    End If
End Sub

Private Sub b2_Click(ByVal sender As Object, ByVal e As System.EventArgs)
    Me.Close()
End Sub
End Class 
```

当您启动此程序时，请使用向下箭头键多次通过所有控件。然后在组合框上停止并键入字母“a”，然后尝试使用向下箭头再次导航。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:20:18.683

```
Public Class Form1

    Private tb As New TextBox
    Private cbb As New ComboBox
    Private tbb As New TextBox
    Private b1 As New Button
    Private b2 As New Button

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        AddHandler cbb.PreviewKeyDown, AddressOf cbb_PreviewKeyDown
        AddHandler tb.PreviewKeyDown, AddressOf tb_PreviewKeyDown
        AddHandler tbb.PreviewKeyDown, AddressOf tbb_PreviewKeyDown

        Me.Size = New Size(350, 200)

        With tb
            .Parent = Me
            .TabIndex = 0
            .Location = New Point(95, 20)
            .Text = "This is"
        End With

        With cbb
            .Parent = Me
            .TabIndex = 1
            .Items.AddRange(New String() {"alabama", "africa", "australia", "grenland"})
            .Location = New Point(95, 50)
            .Text = "an Example"
            .DropDownStyle = ComboBoxStyle.DropDown
            .AutoCompleteMode = AutoCompleteMode.SuggestAppend
            .AutoCompleteSource = AutoCompleteSource.ListItems
        End With

        With tbb
            .Parent = Me
            .TabIndex = 2
            .Location = New Point(95, 80)
            .Text = "textbox"
        End With

        With b1
            .Parent = Me
            .TabStop = False
            .Location = New Point(90, 130)
            .Text = "Nothing"
        End With

        With b2
            .Parent = Me
            .TabStop = False
            .Location = New Point(170, 130)
            .Text = "Exit"
            AddHandler b2.Click, AddressOf b2_Click
        End With

    End Sub

    Private Sub tb_PreviewKeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.PreviewKeyDownEventArgs)
        If e.KeyCode = Keys.Up Then tbb.Focus()
        If e.KeyCode = Keys.Down Then cbb.Focus()
    End Sub

    Private Sub cbb_PreviewKeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.PreviewKeyDownEventArgs)
        If e.KeyCode = Keys.Up Then
            cbb.AutoCompleteMode = AutoCompleteMode.None
            tb.Focus()
            cbb.AutoCompleteMode = AutoCompleteMode.SuggestAppend
            If Not cbb.Items.Contains(cbb.Text) Then cbb.Text = ""
        End If
        If e.KeyCode = Keys.Down Then
            cbb.AutoCompleteMode = AutoCompleteMode.None
            tbb.Focus()
            cbb.AutoCompleteMode = AutoCompleteMode.SuggestAppend
            If Not cbb.Items.Contains(cbb.Text) Then cbb.Text = ""
        End If
    End Sub

    Private Sub tbb_PreviewKeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.PreviewKeyDownEventArgs)
        If e.KeyCode = Keys.Up Then cbb.Focus()
        If e.KeyCode = Keys.Down Then tb.Focus()
    End Sub

    Private Sub b2_Click()
        Me.Close()
    End Sub
End Class 
```

我修改了你的代码。现在，它正在工作。:)

# android - 你可以在junit测试中打开一个新活动吗？

> ID：14771477
> 
> 赞同：1
> 
> 时间：2013-02-08T11:24:37.253
> 
> 标签：android, junit4

我有一个简单的问题，但找不到答案。所以我想用不同的输入测试我的应用程序。

在开始我的 junit-test 之前，我可以在代码中手动更改它们。但我想知道是否可以启动另一个小应用程序/活动，我可以从列表中选择一些输入，然后这些选择应该用于我真正的应用程序测试。

如果有人可以帮助我，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:27:34.047

你试过机器人吗？[http://code.google.com/p/robotium/](http://code.google.com/p/robotium/) 看起来这正是您所需要的。

# javascript - 绘制一个函数

> ID：14771479
> 
> 赞同：0
> 
> 时间：2013-02-08T11:24:39.623
> 
> 标签：javascript, html

感谢阅读和帮助。我正在尝试使用在特定 div 中绘制 Dial 但不起作用的函数。我知道这适用于文本：

```
<div id="content">
</div>

<script>
document.getElementById('content').innerHTML = "hi";
</script> 
```

但是如果我想在那里写一些函数呢？我怎样才能做到这一点？想象一下我有这个：

```
<div id="content">
</div>

<script>
document.getElementById('content').innerHTML = somefunction();

function somefunction(){
document.write("hi");
}
</script> 
```

我知道如果我使用 return 它可以工作，但我想知道是否有办法在没有 return 的情况下做到这一点。

太感谢了！

编辑：

我将更具体。想象一下我有这个：

```
<div id="content">
</div>

<script>    
function createDial(){
document.write("<input class='knob' data-min='-15000' data-max='15000' value='-11000'>)
}
</script> 
```

该输入创建一个 Dial（如果您不知道我指的是，请参阅[http://anthonyterrien.com/knob/ ）。](http://anthonyterrien.com/knob/)现在，有了这个，我可以在“内容”中绘制拨号吗？

谢谢大家，我很抱歉我的英语！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:25:15.983

返回字符串`somefunction`而不是`document.write`

```
function somefunction(){
  return "hi";
} 
```

您可以将元素名称传递给函数并将 html 分配给那里的元素。

```
function somefunction(elementId){
   document.getElementById(elementId).innerHTML = "hi";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:30:53.957

如果你真的需要在不返回值的情况下完成这项工作，你可以这样做：

```
function somefunction (elm) {
    elm.innerHTML = '<input class="knob" data-min="-15000" data-max="15000" value="-11000">';
    $(".knob").knob();
}
somefunction(document.getElementById('content')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:17:22.410

我所需要的就是这个（我认为 Yoshi 也提到了这个）：

```
$( "#content" ).append("whatever you want, even an input or something else"); 
```

这就是我之前用 jQuery 标记的原因。

# c# - 单击时索引超出范围

> ID：14771480
> 
> 赞同：0
> 
> 时间：2013-02-08T11:24:41.927
> 
> 标签：c#, winforms, datagridview

我需要`datagridview`使用`cellClick_event`.

我试过这样：

```
 private void DataGridView_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        var lastIndex = DataGridView.SelectedRows[DataGridView.SelectedRows.Count - 1].Index;
        var currentIndex = DataGridView.CurrentRow.Index;
        if (currentIndex != lastIndex)
        {
            //code
        }
        else
        {
        }
    } 
```

但它不起作用。我收到错误：

```
index out of bound 
```

*   如何获取`cell's`datagridview 的最后编辑的行索引`cellClick_event`？
*   `datagridview.cellclick`除了解决它还有其他事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:50:50.160

假设您想将单击的行与当前正在编辑的行进行比较，这应该可以解决问题；

```
void DataGridView_CellClick(object sender, DataGridViewCellEventArgs e) {

    int currentIndex = DataGridView.CurrentRow.Index;
    int clickedCellRowIndex = e.RowIndex;

    if (currentIndex == clickedCellRowIndex) {
        //do work
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:32:40.440

将 datagridview editeMode 设置为 EditonEnter。然后，当您单击单元格时，它应该为您提供最后修改行的索引，即您已输入的单元格的行索引。

```
int i = dataGridView.CurrentRow.Index; 
```

或者，如果您在编辑上一行的索引之后，您可以在“Cell_Leave”事件句柄中记录上述值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:51:02.577

你不能使用 CellEndEdit 事件。当调用它时，您将可以访问刚刚编辑的行。但是，您必须找到一种方法来查看它是否已被实际编辑，因为我认为即使取消编辑也会调用它。

乙

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:40:52.307

这可能会帮助你

```
 private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        dataGridView1.CurrentCell = dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells[e.ColumnIndex];
    } 
```

# loops - 在Stata循环中使用*指定变量不起作用

> ID：14771481
> 
> 赞同：1
> 
> 时间：2013-02-08T11:24:46.317
> 
> 标签：loops, stata

为什么这段代码在 Stata 中不起作用？它给我的错误是：

`* invalid name`

但是，当我使用

```
sexd1 sexd2 
```

代替

```
sexd* 
```

它工作正常。`sexd*`当我在 Stata 的命令框中键入命令时，可以作为本地人正常工作。

这是代码：

```
local list_of_variables weight midpoint_hhinc
tabulate sex, gen(sexd)
local sexd sexd*

foreach i in `list_of_variables'{
    foreach j in `sexd'{
        generate `i'_`j' = `i' * `j'
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:18:20.750

`foreach`...`in`和`foreach`...之间有一个重要的区别`of`。`foreach`...`in`指示 Stata 从字面上获取列表的元素，因此没有解释。

所以Stata解释

```
 foreach j in `sexd' {
     generate `i'_`j' = `i' * `j'
 } 
```

作为

（步骤1）

```
 foreach j in sexd* { 
```

（第2步）

```
 generate `i'_sexd* = `i' * sexd* 
```

它还将替换本地宏的当前值`i`，但代码失败，因为`*`不能是变量名的一部分。

相反，虽然您对`foreach`...的使用`in`是完全合法的，但它可以被压缩。我会将您的代码重写为

```
 tabulate sex, gen(sexd)
 foreach i in weight midpoint_hhinc {
     foreach j of var sexd* {
         generate `i'_`j' = `i' * `j'
     }
 } 
```

这部分是风格问题。您只有一个语法错误，但请注意，当您可以直接引用这些名称时，将名称放入本地宏中没有任何好处。

总而言之，这看起来像是生成交互变量的代码，而大多数 Stata 建模命令允许您动态引用交互。

`foreach`在[http://www.stata-journal.com/sjpdf.html?articlenum=pr0005](http://www.stata-journal.com/sjpdf.html?articlenum=pr0005)上有一个相当详细的教程

# c# - 使用 RSA 私钥解密较大的文本

> ID：14771483
> 
> 赞同：0
> 
> 时间：2013-02-08T11:24:53.103
> 
> 标签：c#, rsa, encryption-asymmetric

我必须使用 RSA 公钥和私钥加密和解密一个大字符串。我已设法使用以下示例代码加密较大的文本

```
public static string Encrypt(string publicKey, string data, RsaKeyLengths length)
        {
            // full array of bytes to encrypt
            byte[] bytesToEncrypt;

            // worker byte array
            byte[] block;

            // encrypted bytes
            byte[] encryptedBytes;

            // length of bytesToEncrypt
            var dataLength = 0;

            // number of bytes in key                
            var keySize = 0;

            // maximum block length to encrypt          
            var maxLength = 0;

            // how many blocks must we encrypt to encrypt entire message?
            var iterations = 0;

            // the encrypted data
            var encryptedData = new StringBuilder();

            // instantiate the crypto provider with the correct key length
            var rsaCryptoServiceProvider = new RSACryptoServiceProvider((int)length);

            // initialize the RSA object from the given public key
            rsaCryptoServiceProvider.FromXmlString(publicKey);

            // convert data to byte array
            bytesToEncrypt = Encoding.Unicode.GetBytes(data);

            // get length of byte array
            dataLength = bytesToEncrypt.Length;

            // convert length of key from bits to bytes
            keySize = (int)length / 8;

            // .NET RSACryptoServiceProvider uses SHA1 Hash function
            // use this to work out the maximum length to encrypt per block
            maxLength = ((keySize - 2) - (2 * SHA1.Create().ComputeHash(bytesToEncrypt).Length));

            // how many blocks do we need to encrypt?
            iterations = dataLength / maxLength;

            // encrypt block by block
            for (int index = 0; index <= iterations; index++)
            {
                // is there more than one full block of data left to encrypt?
                if ((dataLength - maxLength * index) > maxLength)
                {
                    block = new byte[maxLength];
                }
                else
                {
                    block = new byte[dataLength - maxLength * index];
                }

                // copy the required number of bytes from the array of bytes to encrypt to our worker array
                Buffer.BlockCopy(bytesToEncrypt, maxLength * index, block, 0, block.Length);

                // encrypt the current worker array block of bytes
                encryptedBytes = rsaCryptoServiceProvider.Encrypt(block, true);

                // RSACryptoServiceProvider reverses the order of encrypted bytesToEncrypt after encryption and before decryption.
                // Undo this reversal for compatibility with other implementations
                Array.Reverse(encryptedBytes);

                // convert to base 64 string
                encryptedData.Append(Convert.ToBase64String(encryptedBytes));

            }
            return encryptedData.ToString();

        } 
```

然后我尝试使用以下代码解密较大的文本

```
/// <summary>
        /// Encrypt an arbitrary string of data under the supplied public key
        /// </summary>
        /// <param name="publicKey">The public key to encrypt under</param>
        /// <param name="data">The data to encrypt</param>
        /// <param name="length">The bit length or strength of the public key: 1024, 2048 or 4096 bits. This must match the 
        /// value actually used to create the publicKey</param>
        /// <returns></returns>
        public static string Decrypt(string privateKey, string data, RsaKeyLengths length)
        {
            // full array of bytes to encrypt
            byte[] bytesToDecrypt;

            // worker byte array
            byte[] block;

            // encrypted bytes
            byte[] decryptedBytes;

            // length of bytesToEncrypt
            var dataLength = 0;

            // number of bytes in key                
            var keySize = 0;

            // maximum block length to encrypt          
            var maxLength = 0;

            // how many blocks must we encrypt to encrypt entire message?
            var iterations = 0;

            // the encrypted data
            var decryptedData = new StringBuilder();

            // instantiate the crypto provider with the correct key length
            var rsaCryptoServiceProvider = new RSACryptoServiceProvider((int)length);

            // initialize the RSA object from the given public key
            rsaCryptoServiceProvider.FromXmlString(privateKey);

            // convert data to byte array
            bytesToDecrypt = Encoding.Unicode.GetBytes(data);

            // get length of byte array
            dataLength = bytesToDecrypt.Length;

            // convert length of key from bits to bytes
            keySize = (int)length / 8;

            // .NET RSACryptoServiceProvider uses SHA1 Hash function
            // use this to work out the maximum length to encrypt per block
            //maxLength = ((keySize - 2) - (2 * SHA1.Create().ComputeHash(bytesToDecrypt).Length));
            maxLength = ((keySize / 8) % 3 != 0) ?
              (((keySize / 8) / 3) * 4) + 4 : ((keySize / 8) / 3) * 4; ;

            // how many blocks do we need to encrypt?
            iterations = dataLength / maxLength;

            // encrypt block by block
            for (int index = 0; index <= iterations; index++)
            {
                // is there more than one full block of data left to encrypt?
                if ((dataLength - maxLength * index) > maxLength)
                {
                    block = new byte[maxLength];
                }
                else
                {
                    block = new byte[dataLength - maxLength * index];
                }

                // copy the required number of bytes from the array of bytes to encrypt to our worker array
                Buffer.BlockCopy(bytesToDecrypt, maxLength * index, block, 0, block.Length);

                // encrypt the current worker array block of bytes
                decryptedBytes = rsaCryptoServiceProvider.Decrypt(block, true);

                // RSACryptoServiceProvider reverses the order of encrypted bytesToEncrypt after encryption and before decryption.
                // Undo this reversal for compatibility with other implementations
                Array.Reverse(decryptedBytes);

                // convert to base 64 string
                decryptedData.Append(Convert.ToBase64String(decryptedBytes));

            }
            return decryptedData.ToString();
        } 
```

实际上加密进行得很顺利。没问题。但是当我试图解密它时。我收到以下异常

> 未处理的异常：System.Security.Cryptography.CryptographicException：解码 OAEP 填充时发生错误。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:34:03.183

请改用[流密码](http://en.wikipedia.org/wiki/Stream_cipher)，并且仅使用 RSA 加密此密码的密钥。如果您因为其公私钥逻辑而需要 RSA 并希望使用不同的密钥进行加密和解密，这可能会有所帮助。使用流密码，您将能够毫无问题地加密和解密千兆字节的数据。

RSA 通常不用于非常大量的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:42:26.297

也许有点晚了，但我发现[http://tekaris.com/blog/2013/02/08/encrypting-large-data-with-asymetric-rsacryptoserviceprovider/](http://tekaris.com/blog/2013/02/08/encrypting-large-data-with-asymetric-rsacryptoserviceprovider/)很有帮助。这里的技巧显然是拆分数据，加密并重新加入数据。

# floating-point - 二进制数的 IEEE 表示

> ID：14771488
> 
> 赞同：0
> 
> 时间：2013-02-08T11:25:10.580
> 
> 标签：floating-point, binary, ieee-754

我遇到了这个我无法解决的问题。

`The IEEE short floating point representation of the binary number 1001.1011 is`

答案为`1 00000011 00110110000000000000000`。

我不确定符号位如何为 1。以及指数如何`11`。指数不应该是 127+3。

因为我们会将给定更改为 1.0011011* 2^3。

我们如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:10:08.847

你是对的。

符号位应为零，编码指数应为 127 + 3，即`b10000010`. 所以正确的编码是：

```
0 10000010 00110110000000000000000 
```

# php - 时间前错误功能

> ID：14771498
> 
> 赞同：2
> 
> 时间：2013-02-08T11:25:49.390
> 
> 标签：php

我有一个关于如何正确显示执行操作后经过的时间的问题，我有一个简单的评论系统，并且想添加在发表评论时正确显示的功能，我做了一些研究并遇到了这个问题：

```
 function ago($time)
{

$periods = array("second", "minute", "hour", "day", "week", "month", "year", "decade");
$lengths = array("60","60","24","7","4.35","12","10");

  $now = date('Y-m-d h:i:s');
$now=strtotime($now);
if($now>$time)
   $difference     = $now - $time;
   elseif($time>$now)
    $difference     = $time - $now;
   $tense         = "ago";

for($j = 0; $difference >= $lengths[$j] && $j < count($lengths)-1; $j++) {
    $difference /= $lengths[$j];
} 

$difference = round($difference);

if($difference != 1) {
   $periods[$j].= "s";
}

return "$difference $periods[$j] ago ";
 } 
```

我更改了变量 $now 以获取日期而不是时间的值，我有一个数据库，该数据库有一个表，该表有一个处理时间的列，它设置为 datetime 所以我然后使用 strtotime 函数将其转换并发送它通过函数：

```
 $time=$row['time'];
  $time=strtotime($time);
  $ago=ago($time); 
```

问题是它返回错误的时期，例如，一分钟前发表评论返回两小时前，时区是正确的，我什至打印了实际的日期和时间，例如，今天，我打印了这个：

```
 10 hours ago 2013-02-08 12:09:35 2013-02-08 02:18:52 
```

如您所见，时间之间的差异应该是两个小时左右，而不是十个小时。有没有人对如何做到这一点有更好的想法，或者任何人都可以指出错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:47:48.450

问题是你的mysql服务器和你的php.ini或者在不同的时区。坚持一个。如果您无法更改服务器时区，那么您所要做的就是从 mysql 的 datetime 字段中取回值，然后使用 PHP 将其转换回 UNIX 时间戳。

```
// Start by setting the datetime zone for all your pages in PHP
date_default_timezone_set('Europe/Lisbon');

//Extract the datetime from the database regardless of the databases timezone.
$time = '2012-07-02 22:30:52';

//Then in PHP convert it into a UNIX timestamp.
$timestamp = strtotime($time); 
```

现在，您的所有代码和时间都相对于您在`date_default_timezone_set`函数中指定的时区。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2021-01-28T10:58:11.073

最好的方法就是根本不使用该功能，因为没有人真正想要它。只需显示发表评论的时间。（如果有人真的想要信息：比较的时钟在屏幕的右下角）。

# php - 如何使用一种模式拆分字符串？

> ID：14771499
> 
> 赞同：0
> 
> 时间：2013-02-08T11:25:51.157
> 
> 标签：php, regex, split

我有一个字符串，例如：

```
84 - Pampers mid (4-9кг) №180  [Procter&Gamble] - 1978.00 
```

我需要将它划分为数组（php），例如：

```
[0] 84
[1] Pampers mid (4-9кг) №180
[2] Procter&Gamble
[3] 1978.00 
```

在那一刻，我正在一步一步地做：

```
$pattern = '/\[(.*)\]/';//producer
preg_match($pattern, $subject, $matches_producer);
$provider=$matches_producer[1];
... 
```

对于每个元素，依此类推。

但这是丑陋的方法，不是吗？我怎样才能用一种模式制作它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:30:50.700

您可以将所有正则表达式组合成一个以`$match`一次提取所有值：

```
$string = "84 - Pampers mid (4-9кг) №180  [Procter&Gamble] - 1978.00";
preg_match('/(\d+) - (.*) \[(.*)\] - (\d+.\d+)/', $string, $match); 
```

运行此代码后`$match`包含：

```
Array
(
    [0] => 84 - Pampers mid (4-9кг) №180  [Procter&Gamble] - 1978.00
    [1] => 84
    [2] => Pampers mid (4-9кг) №180 
    [3] => Procter&Gamble
    [4] => 1978.00
) 
```

如果数组中有很多这些字符串，则可以考虑使用[preg_match_all](http://php.net/preg_match_all)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T11:37:45.280

就像是

```
$x = '84 - Pampers mid (4-9кг) №180  [Procter&Gamble] - 1978.00';
preg_match_all('/(\d*)\ \-\ (.*)\ \[(.*)\]\ \-\ (.*)/', $x, $matches);
var_dump($matches); 
```

# asp.net-mvc-4 - 实体框架查找表

> ID：14771501
> 
> 赞同：0
> 
> 时间：2013-02-08T11:25:51.670
> 
> 标签：asp.net-mvc-4, entity-framework-5

我有 3 张桌子

```
Brands:
BrandID int
BrandName varchar(30)

Products
ProdID int
ProdName varchar(30)

BrandToProd:
BrandID int => FK Brands.BrandID
ProdID int => FK Products.ProdID 
```

从现有数据库生成模型后，EF 省略 BrandToProd 表并在品牌和产品之间创建多对多关系。我想拥有具有以下字段的第三个实体：

```
BrandName varchar(30)
ProductsName varchar(30) 
```

这将使我有可能为这个实体使用脚手架。理想情况下，当我添加新的品牌和产品对时，EF 应首先检查数据库中是否已存在此类品牌或产品（以避免重复），如果不存在，则添加到相应的表并添加到 BrandToProd 表的映射。如果 Brand 或 Product 已经存在，EF 应该在添加到 BrandToProd 表时现有 BrandID/ProdID 值。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:36:32.300

您的`BrandToProd`表是一个*纯粹的联结表*，即只有两个外键的表。在概念模型中没有类的情况下，将此类表建模为多对多关联是 EF 功能。

将纯连接表作为实体类包含在模型中的最简单方法是

*   临时向数据库表添加一个虚拟字段
*   生成模型
*   从数据库中删除字段
*   从数据库更新模型
*   删除 edmx 图中的属性

另一种方法是手动编辑 edmx，但是你真的需要知道你在做什么。如果您不想重新生成模型，您可以生成第二个模型并通过差异查看器调查两个 edmx 文件中的差异。

但是，我想知道您是否需要这样做。您似乎将此与重复检查联系起来。但是，如果您想向数据库添加一个`Brand`或`Product`，则必须以任何一种方式检查重复项。如果您想添加新的关联（例如，将现有品牌添加到 Product.Brands），您不必检查它是否存在。如果是这样，EF 将忽略“新”关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T14:37:41.937

作为 Gert 回答的额外点：使用代理键时，总是存在重复管理的问题。通常有 1 个或多个字段构成逻辑键。你可以

*   a) 在 Db 上创建唯一索引。违反约束时 Db 会抱怨
*   b) 在尝试插入之前执行逻辑重复检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T14:26:00.507

我最终只在我的联结表中添加了虚拟 ID 字段，因为我经常更改数据库模式（因为站点开发正在进行中，我需要不时从数据库更新模型）并且不想每个时间删除/添加虚拟字段到数据库。我使用的另一个选项 - 两个表上的 SQL 视图和映射到 EF 中相应操作 (CRUD) 的存储过程

# node.js - 我正在尝试从不同的服务器读取图像并写入响应

> ID：14771503
> 
> 赞同：0
> 
> 时间：2013-02-08T11:26:02.863
> 
> 标签：node.js, response.write

```
function media(req,res){
  console.log(req.query.image);
  var collectionName = 'imageTable';

      var selector = MongoHelper.idSelector(req.query.image);
      MongoHelper.findOne(selector, collectionName, function(err, image) { 
          console.log(image.picture);
          var url_parts = url.parse(image.picture);

          var options = {host: url_parts.hostname, path: url_parts.pathname};

          http.get(options).on('response', function (response) {
            var body = '';
            var i = 0;
            response.on('data', function (chunk) {
                i++;
                body += chunk;
                console.log('BODY Part: ' + i);
            });
            response.on('end', function () {

            console.log('Finished');
            res.writeHead(200,{'Content-Type':'image/JPEG'});
            res.write(body);
            res.end(); 
        });
        });
      });
} 
```

我正在从不同的服务器获取图像。我有那个图片的网址。我正在写回复。但是这里的响应图像已损坏。关于如何编写 jpeg 图像作为响应的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:54:29.173

```
function media(req,res){
  console.log(req.query.image);
  var collectionName = 'facebook';

      var selector = MongoHelper.idSelector(req.query.image);
      MongoHelper.findOne(selector, collectionName, function(err, image) {

          var url_parts = url.parse(image.picture);
          var options = {host: url_parts.hostname, path: url_parts.pathname};

          http.get(options).on('response', function (response) {
            res.writeHead(200,{'Content-Type':'image/JPEG'});
            response.on('data', function (chunk) {
                res.write(chunk);
            });
            response.on('end', function () {
            res.end(); 
        });
        });
      });
} 
```

在这里，我得到了解决方案。而不是在最后写入整个数据。每次获得并在到达文件末尾时结束响应时写入它。但是，如果有人有更好的想法，可以在这里写。

# opengl - 如何在 OpenGL 中获取原始（未转换的）纹理数据？

> ID：14771507
> 
> 赞同：7
> 
> 时间：2013-02-08T11:26:13.057
> 
> 标签：opengl, serialization, textures

我需要序列化任意 OpenGL 纹理对象，以便以后能够使用*完全相同的*状态和数据恢复它。

我正在寻找一种获取纹理图像数据的方法。这是我到目前为止发现的：

*   有`glGetTexImage`。

    它允许获取纹理图像，但它需要一个指定的格式/类型对（如 ( `GL_RGB`,  `GL_HALF_FLOAT`) 来执行转换。

    但是，允许的格式和类型不会 1:1 映射到图像格式，并且不允许在`GL_R3_G3_B2`没有额外转换的情况下获得更模糊的格式。

    正确确定基本内部格式的 C 类型（例如`GL_RGB`没有大小）还需要一些不平凡的工作。

*   有`ARB_internalformat_query2`允许要求`GL_GET_TEXTURE_IMAGE_FORMAT`并且代表给定纹理`GL_GET_TEXTURE_IMAGE_TYPE`的最佳选择。`glGetTexImage`

    很好，但受到与相同的限制`glGetTexImage`并且没有广泛使用。

*   有一种美妙的`glGetCompressedTexImage`方式可以优雅地按原样返回压缩纹理的数据，但它既不适用于非压缩图像，也没有对应的功能。

这些都不允许获取或设置非压缩纹理的原始数据。有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:10:00.970

诀窍是，找到匹配的格式并输入正确的数据布局。

> 但是，允许的格式和类型不会 1:1 映射到图像格式，并且不允许在没有额外转换的情况下获得更模糊的格式，例如 GL_R3_G3_B2。

那将是 GL_RGB，GL_UNSIGNED_BYTE_3_3_2

> 此外，正确确定基本内部格式的 C 类型（如没有大小的 GL_RGB）涉及一些非常重要的工作。

是的，它确实。*戴上太阳镜*处理它！;)

至于内部格式。我特此[推荐你](http://www.opengl.org/wiki/GLAPI/glGetTexLevelParameter)

```
glGetTexLevelParameter(GL_TEXTURE_…, …, GL_TEXTURE_INTERNAL_FORMAT,…);
glGetTexLevelParameter(GL_TEXTURE_…, …, GL_TEXTURE_{RED,GREEN,BLUE,ALPHA,DEPTH}_TYPE, …);
glGetTexLevelParameter(GL_TEXTURE_…, …, GL_TEXTURE_{RED,GREEN,BLUE,ALPHA,DEPTH}_SIZE, …); 
```

# php - 带有表单类的默认 Symfony 用户实体

> ID：14771508
> 
> 赞同：0
> 
> 时间：2013-02-08T11:26:17.317
> 
> 标签：php, symfony, symfony-2.1

我希望为使用 Default Symfony User 类的登录表单创建一个表单类。

我在这里跟着这本书：http: [//symfony.com/doc/current/book/security.html#using-a-traditional-login-form](http://symfony.com/doc/current/book/security.html#using-a-traditional-login-form)

现在我希望将该 html 转换为我所做的 Form 类：

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class LoginForm extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('_username', 'text');
        $builder->add('_password', 'password');
    }

    public function getName()
    {
        return 'login';
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
                'data_class' => 'Symfony\Component\Security\Core\User\User',
        ));
    }
} 
```

这应该有效。

现在我试着这样称呼它：

```
$user = new \Symfony\Component\Security\Core\User\User('ana', 'anon');
$form = $this->createForm(new LoginForm(), $user); 
```

我遇到了两个问题：

1.  用户类要求我指定一个用户名和密码，这根本不是我想要的。我希望这是一个登录表单，而不是创建用户表单。

2.  当我尝试渲染时它会引发错误：

    ```
    Neither property "_username" nor method "get_username()" nor method 
    "is_username()" exists in class "Symfony\Component\Security\Core\User\User"
    500 Internal Server Error - InvalidPropertyException 
    ```

我究竟做错了什么？而且我还不想使用 FOSUserBundle，我想学习默认的 Symfony 类，你可以称我为白痴。

**编辑：**我从字段名称中删除了下划线（_），它开始工作，但第一个问题仍然存在，现在我遇到了一个新问题：

如果我尝试提交我的表单，我得到的只是 `Bad credentials`凭据。

login.html.twig：

```
<form action="{{ path('main_login_check') }}" method="post">
    {{ form_widget(form) }}

    <button type="submit">login</button>
</form> 
```

这是调用它的动作：

```
public function loginAction()
    {
        $request = $this->getRequest();
        $session = $request->getSession();
        $user = new \Symfony\Component\Security\Core\User\User('ana', 'anon');
        $form = $this->createForm(new LoginForm(), $user);
        // get the login error if there is one
        if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR))
        {
            $error = $request->attributes->get(
                    SecurityContext::AUTHENTICATION_ERROR
                    );
        }
        else 
        {
            $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
            $session->remove(SecurityContext::AUTHENTICATION_ERROR);
        }

        return $this->render(
                'BattlemamonoMainBundle:Security:login.html.twig',
                array(
                        // last username entered by the user
                        'last_username'   => $session->get(SecurityContext::LAST_USERNAME),
                        'error'           => $error,
                        'form'            => $form->createView(),
                        )
                );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:33:49.760

核心 User 类中的属性是 'username' 和 'password'，与 _username 和 _password 相反 - 它们需要匹配，否则您需要在表单构建器中指定属性名称映射以避免上述异常。

该建议适用于将表单映射到一般实体。

# .net - 内存泄漏问题。如何“读取”根路径？

> ID：14771509
> 
> 赞同：0
> 
> 时间：2013-02-08T11:26:18.467
> 
> 标签：.net, memory-leaks

我有一个内存分析器并跟踪一个应用程序。在那个应用程序中，当我多次连续打开表格时（6），应用程序变得不稳定并且可能会关闭。

怀疑是内存泄漏。所以，我跟踪以下根路径 ![在此处输入图像描述](../Images/368e26ea7db50ac386e71921dd12ca5e.png)

如何阅读此图以修复内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:30:16.117

我在堆栈顶部看到很多事件处理程序。

内存泄漏的一个常见原因是实例直接由 EventHandler 根植。您的“泄漏”实例可能仅用作 EventHandler 的目标，并且没有其他方法可以到达它。它们甚至可能已经被处理掉了。

我建议使用[.NET MemoryProfiler](http://memprofiler.com/)的（线索） 。它可以捕获快照并自动指出一些常见问题，例如事件处理程序使实例保持活动状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:03:59.753

根在顶部，您的控件/类在底部。通常，您会朝任一方向阅读，试图找出路径中的问题。如前所述，EventHandlers 是一个非常常见的问题。尤其是在静态环境中。意思是，某些类通过 += 挂钩到一个事件上，并且永远不会再次取消挂钩。只要两个组件，类和提供一个的事件，都是非静态的并且没有保存在其他任何地方，这没有问题。

在您的示例中， UserPreferenceChanged 事件似乎是问题所在，我猜这是一个静态事件。因此，UltraToolbarsManager（它似乎也是静态的）连接了该事件。似乎 UltraToolbarsManager 还处理工具栏图标的所有单击事件。所以，问题是，您的类与 ToolClick 事件挂钩。

可能的解决方案是

1.  尝试处理/清理 UltraToolbarsManager（如果是非静态的），以便取消 UserPreferenceChanged 事件或
2.  清理自己的类时从 ToolClick 事件中解脱。

# jquery - 如何在jQuery中检查元素是否有多个css类

> ID：14771521
> 
> 赞同：4
> 
> 时间：2013-02-08T11:27:29.603
> 
> 标签：jquery

我有一些像下面这样的html。我已经遍历了 div(accordionContents) 内的所有元素。在循环内我需要检查元素 h2 是否应用了两个 css 类(acc_trigger 和 active) 的条件。我该怎么做？

```
 <div id="accordionContents">
     <div class="accordioncontainer">         
                    <h2 class="acc_trigger active">
                       <a href="#"> <img class="openImage" src="Images/closed.png"> 
                          <div class="openHeader">Division : <b>Quality Assurance</b>(4 items)</div></a></h2>
                    <div class="acc_container" style="display: block;">
                        <div class="dataRowTeam">
                            <div class="riskStartContent">
                                <div class="riskGridHeader">
                                    weekStart</div>
                            </div>
                            <div class="riskEndContent">
                                <div class="riskGridHeader">
                                    90%</div>
                            </div>
                        </div>
                    </div>

                </div>
                 <div class="accordioncontainer">

                    <h2 class="acc_trigger">
                       <a href="#"> <img class="openImage" src="Images/closed.png"> 
                        <div class="openHeader">Division : <b>Quality Assurance</b>(4 items)</div></a></h2>
                    <div class="acc_container" style="display: none;">
                        <div class="dataRowTeam">
                            <div class="riskStartContent">
                                <div class="riskGridHeader">
                                    weekStart</div>
                            </div>
                            <div class="riskEndContent">
                                <div class="riskGridHeader">
                                    90%</div>
                            </div>
                        </div>
                    </div>

                </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:44:35.923

在您的特定情况下，这应该足够了：

```
var hasActive = $('.acc_trigger').hasClass("active"); // Bool. TRUE / FALSE

if(hasActive){
    // do something if TRUE
} 
```

否则你可以直接去*元素存在*

```
$('.acc_trigger.active').css({background: 'red'}); 
```

`**[LIVE DEMO](http://jsbin.com/imabuc/1/edit)**`

顺便说一句，您的 HTML 格式非常不寻常，我宁愿说错：（
`DIV`块级元素）不应该在`A`（内联）元素中找到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:34:43.977

只需尝试多次询问 hasClass ;)

```
$(".accordionContents").each(function(){
    var $headline = $("h2", this).first();
    var hasBothCSSClasses = $headline.hasClass('acc_trigger') & $headline.hasClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:42:46.853

试试这个：http: [//jsfiddle.net/jH8RF/1/](http://jsfiddle.net/jH8RF/1/)

```
var clslen = $('h2').attr('class').split(' ').join(',');
var len = clslen.indexOf(',');

if( len > 0){
     alert('elem has more than one class');
}else{
     alert('elem has just one class');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T11:43:06.300

试试这个：

```
$('.accordionContents h2').each(function() {
    if ($(this).is('.acc_trigger.active')) {
        // do something...
    })
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T11:44:21.360

```
var strValue = $("h2").prop('class').trim();
if(strValue.indexOf(" ") > -1)
{
    //This element has multiple classes.
}
else
{
    //This element has a single class.
} 
```

# java - 从 Android 中的抽象超类连接到服务

> ID：14771524
> 
> 赞同：0
> 
> 时间：2013-02-08T11:27:37.937
> 
> 标签：java, android

我正在制作一个包含各种活动的应用程序，这些活动都需要访问同一个数据库。

我已经建立了一个抽象类，它具有所有活动的一些共同元素（特别是特定于应用程序的标题栏及其一些行为，以及一些重复的代码和变量）。

我已经通过服务设置了对数据库的访问。我觉得这个服务应该只有一个实例。

与服务器交互和通信的推荐方式似乎是绑定。

虽然这似乎有点麻烦（因为您需要指定两个额外的类 - Binder 和 ServiceConnection），但不可否认，这一切都很好。

这是我遇到问题的地方：绑定是特定于活动的。我可以从共享的抽象类代码中查询数据库，但我似乎不能从子类代码中做同样的事情。

出现在我的抽象类中的代码：

```
protected static DatabaseService autoservice;
protected static boolean serviceBound = false;

protected static ServiceConnection serviceConnection = new ServiceConnection() {

    @Override
    public void onServiceConnected(ComponentName className, IBinder service) {
        AutoBinder binder = (AutoBinder) service;
        autoservice = binder.getService();
        serviceBound = true;
    }

    @Override
    public void onServiceDisconnected(ComponentName arg0) {
        serviceBound = false;
    }
}; 
```

如果我从子类中检查 serviceBound，它总是会回复 false。我试过把它放在静态和非静态。

我觉得获取服务的静态实例的单例模式可能是一种（更好的）查询数据库的方式，但话又说回来，谷歌提出绑定可能是有原因的。

从我的抽象超类及其各种子类访问数据库的最佳（和最干净）方法是什么？

# css - 如何在 div 中垂直和水平居中图像？

> ID：14771527
> 
> 赞同：0
> 
> 时间：2013-02-08T11:27:50.013
> 
> 标签：css

```
.spotlight-area img {
    width: 100px; 
    height: 100px; 
    margin-top: 30%; 
    margin-left: 40%; 
} 
```

`spotlight-area`将是一个具有随机宽度和高度的 div。我正在使用的图像是`100px`（`100px`调整大小）。我试图将它与 margin-top 和 margin-left 居中，但它看起来像是一个糟糕的解决方法。

你有什么建议？

附言。这是一个播放按钮，将出现在视频容器 div 的顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:31:44.667

查看 Chris Coyier 关于 CSS-Tricks 的这篇文章。我认为这可能会有所帮助。几天前我遇到了同样的问题，他的回答对我有用。

[水平和垂直居中图像](http://css-tricks.com/snippets/css/absolute-center-vertical-horizontal-an-image/)

基本上这个想法是，如果您的图像具有设定的宽度和高度。您可以将其从左侧和顶部 50% 绝对定位，然后执行等于宽度和高度一半的负边距以使其回到死点。如果图像没有设置尺寸，它们是垂直居中图像的其他方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:32:38.913

```
vertical-align: middle;
text-align: center; 
```

它会帮助你...

点击这个[链接](http://jsfiddle.net/NgqE2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:33:14.447

我想这会奏效，试着告诉我......

```
 .spotlight-area img {
        width: 100px; 
        height: 100px; 
        text-align: center;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T11:30:24.210

Mybe这将工作：

```
 .spotlight-area { text-align: center; } 
```

# objective-c - 文件搜索花费太多时间

> ID：14771533
> 
> 赞同：1
> 
> 时间：2013-02-08T11:28:05.800
> 
> 标签：objective-c, cocoa-touch

我正在尝试在此处搜索名为 1 到 6 的 plist，并且我编写了此代码，并且它使应用程序比原始时间多消耗 3 秒来加载 ....代码是

```
for (int i=1;i<6;i++) {
    NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
    NSArray *dirContents = [[NSFileManager defaultManager] directoryContentsAtPath:bundleRoot];
    for (NSString *tString in dirContents) {
        if ([tString hasPrefix:[NSString stringWithFormat:@"%d",i]] && [tString hasSuffix:@".plist"]) { 
            NSLog(@"file found");
            NSString *plist = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%d",i] ofType:@"plist"];
            mute = [NSMutableArray arrayWithContentsOfFile:plist];
            [mute addObjectsFromArray:contentArray];
            contentArray = mute;
        }
        else {
            NSLog(@"not found");
        }
    }
} 
```

有人可以用解决方案打我还是在这里定义问题所在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:31:13.120

这不是很有效:)

尝试这个 ：

```
for (int i = 1; i <= 6; ++i) {
  // Load the plist
  NSString *plist = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%d",i] ofType:@"plist"];
  if (nil == plist) {
    NSLog(@"not found (%i)", i);
    continue;
  }

  // Do something with your plist
  mute = [NSMutableArray arrayWithContentsOfFile:plist];
  [contentArray addObjectsFromArray:mute];
} 
```

如果您仍然得到 3 秒的延迟，那么问题不是搜索，而是 plist 的大小以及您需要对它们进行的处理。您可能只需要在加载它们时输入“请稍候”消息和微调器。

或者你可以尝试在后台线程上加载它们，这样你的 ui 仍然可以工作。我想这取决于您的应用程序中还发生了什么！

# xna - XNA - 允许鼠标可见 - 命令去哪里了？

> ID：14771534
> 
> 赞同：0
> 
> 时间：2013-02-08T11:28:06.633
> 
> 标签：xna, mouse

是的。我在游戏中看不到光标。我在这里读过你必须放置“this.IsMouseVisible=true;” 在主游戏类构造函数/初始化程序的某个地方。当我尝试这个时，无法识别“IsMouseVisible”。

有什么帮助吗？

另外：我尝试为光标加载纹理，跟随鼠标位置并绘制它，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:23:12.610

```
protected override void Initialize()
{
    this.IsMouseVisible = true;
} 
```

也许 Initialize 应该这样做？“不被认可”到底是什么意思

# php - PHP MySQL - 表单不会提交和添加数据

> ID：14771540
> 
> 赞同：0
> 
> 时间：2013-02-08T11:28:17.987
> 
> 标签：php, mysql

我只是想用注册表单创建一个会员区。但是，它没有提交。我已经经历了一切，但我仍然无法弄清楚这一点。似乎没有错误（除了它不起作用！）

我在本地运行这个。

> config.php 文件

```
<?php session_start();

$connection = mysql_connect('localhost', 'root', '******');
mysql_select_db("members",$connection);

$mail_webmaster = 'email@gmail.com';

$url_root = 'http://localhost/getmanaging/';

$url_home = 'index.php';

$design = 'default';
?> 
```

Sign_up.php 页面：

```
 <?php
include('config.php');
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="<?php echo $design; ?>/style.css" rel="stylesheet" title="Style" />
        <title>Sign up</title>
    </head>
    <body>
        <div class="header">
            <a href="<?php echo $url_home; ?>"><img src="<?php echo $design; ?>/images/logo.png" alt="Members Area" /></a>
        </div>
<?php
//We check if the form has been sent
if(isset($_POST['username'], $_POST['firstname'], $_POST['surname'], $_POST['password'], $_POST['passverif'], $_POST['email'], $_POST['site_location'], $_POST['role']) and $_POST['username']!='')
{
    //We remove slashes depending on the configuration
    if(get_magic_quotes_gpc())
    {
        $_POST['username'] = stripslashes($_POST['username']);
        $_POST['firstname'] = stripslashes($_POST['firstname']);
        $_POST['surname'] = stripslashes($_POST['surname']);
        $_POST['password'] = stripslashes($_POST['password']);
        $_POST['passverif'] = stripslashes($_POST['passverif']);
        $_POST['email'] = stripslashes($_POST['email']);
        $_POST['site_location'] = stripslashes($_POST['site_location']);
        $_POST['role'] = stripslashes($_POST['role']);
    }
    //We check if the two passwords are identical
    if($_POST['password']==$_POST['passverif'])
    {
        //We check if the password has 6 or more characters
        if(strlen($_POST['password'])>=6)
        {
            //We check if the email form is valid
            if(preg_match('#^(([a-z0-9!\#$%&\\\'*+/=?^_`{|}~-]+\.?)*[a-z0-9!\#$%&\\\'*+/=?^_`{|}~-]+)@(([a-z0-9-_]+\.?)*[a-z0-9-_]+)\.[a-z]{2,}$#i',$_POST['email']))
            {
                //We protect the variables
                $username = mysql_real_escape_string($_POST['username']);
                $firstname = mysql_real_escape_string($_POST['firstname']);
                $surname = mysql_real_escape_string($_POST['surname']);
                $password = mysql_real_escape_string($_POST['password']);
                $email = mysql_real_escape_string($_POST['email']);
                $site_location = mysql_real_escape_string($_POST['site_location']);
                $role = mysql_real_escape_string($_POST['role']);
                //We check if there is no other user using the same username
                $dn = mysql_num_rows(mysql_query('select id from users where username="'.$username.'"'));
                if($dn==0)
                {
                    //We count the number of users to give an ID to this one
                    $dn2 = mysql_num_rows(mysql_query('select id from users'));
                    $id = $dn2+1;
                    //We save the informations to the databse
                    if(mysql_query('insert into users(id, username, firstname, surname, password, email, site_location, role, signup_date) values ('.$id.', "'.$username.'", "'.$firstname.'", "'.$surname.'", "'.$password.'", "'.$email.'", "'.$site_location.'", "'.$role.'", "'.time().'")'))
                    {
                        //We dont display the form
                        $form = false;
?>
<div class="message">You have successfuly been signed up. You can log in.<br />
<a href="connexion.php">Log in</a></div>
<?php
                    }
                    else
                    {
                        //Otherwise, we say that an error occured
                        $form = true;
                        $message = 'An error occurred while signing up.';
                    }
                }
                else
                {
                    //Otherwise, we say the username is not available
                    $form = true;
                    $message = 'The username you want to use is not available, please choose another one.';
                }
            }
            else
            {
                //Otherwise, we say the email is not valid
                $form = true;
                $message = 'The email you entered is not valid.';
            }
        }
        else
        {
            //Otherwise, we say the password is too short
            $form = true;
            $message = 'Your password must contain at least 6 characters.';
        }
    }
    else
    {
        //Otherwise, we say the passwords are not identical
        $form = true;
        $message = 'The passwords you entered are not identical.';
    }
}
else
{
    $form = true;
}
if($form)
{
    //We display a message if necessary
    if(isset($message))
    {
        echo '<div class="message">'.$message.'</div>';
    }
    //We display the form
?>
<div class="content">
    <form action="sign_up.php" method="post">
        Please fill the following form to sign up:<br />
        <div class="center">
            <label for="username">Username: </label><input type="text" name="username" value="<?php if(isset($_POST['username'])){echo htmlentities($_POST['username'], ENT_QUOTES, 'UTF-8');} ?>" /><br />
             <label for="firstname">First Name: </label><input type="text" name="firstname" value="<?php if(isset($_POST['firstname'])){echo htmlentities($_POST['firstname'], ENT_QUOTES, 'UTF-8');} ?>" /><br />
                   <label for="surname">Surame: </label><input type="text" name="surname" value="<?php if(isset($_POST['surname'])){echo htmlentities($_POST['surname'], ENT_QUOTES, 'UTF-8');} ?>" /><br />
            <label for="password">Password<span class="small">(6 characters min.): </span></label><input type="password" name="password" /><br />
            <label for="passverif">Password<span class="small">(verification): </span></label><input type="password" name="passverif" /><br />
            <label for="email">Email: </label><input type="text" name="email" value="<?php if(isset($_POST['email'])){echo htmlentities($_POST['email'], ENT_QUOTES, 'UTF-8');} ?>" /><br />
            <label for="site_location">Site Location: </label><input type="text" name="email" value="<?php if(isset($_POST['site_location'])){echo htmlentities($_POST['site_location'], ENT_QUOTES, 'UTF-8');} ?>" /><br />
             <label for="role">Role: </label><input type="text" name="role" value="<?php if(isset($_POST['role'])){echo htmlentities($_POST['role'], ENT_QUOTES, 'UTF-8');} ?>" /><br />
            <input type="submit" value="Sign up" />
        </div>
    </form>
</div>
<?php
}
?>
        <div class="foot"><a href="<?php echo $url_home; ?>">Go Home</a>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:47:56.883

如果您的文件名`sign-up.php`不是，那么您的问题可能出在这一行：

```
<form action="sign_up.php" method="post"> 
```

将其更改为：

```
<form action="sign-up.php" method="post"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:47:14.943

我认为问题可能来自您的查询**插入用户（id ...。**表名后没有间隔，但我不能确定。你应该设置错误才能工作。

* * *

如果有任何错误，您应该`or die(mysql_error());`在每一行之后添加转储。`mysql_query`

* * *

```
 //We count the number of users to give an ID to this one
               mysql_query('select id from users order by id dest limit 1') 
```

认为这种获取最后一个用户ID的方式更好。

* * *

另外我认为，当您插入 db 时，您应该使用`INSERT INTO table SET id=1, name=Ivan, role=admin` than `INSET INTO table (...) VALUES(...)`，因为这样可以清楚地看到您插入了什么，并且可以轻松更改一些值。

* * *

**action="sign_up.php"**应该是**action="sign-up.php"**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:56:29.330

您的“站点位置”字段名称错误（ name="email" ）因此 isset 返回始终为 false，因此永远不会执行 php 块。

# date - 文本框 googlescripts 中的日期和时间

> ID：14771541
> 
> 赞同：0
> 
> 时间：2013-02-08T11:28:21.280
> 
> 标签：date, time, textbox

你好，我是编程新手和googlescripts，我希望有些人可以帮助我，我只是一个带有按钮的简单文本框作为测试应用程序，我想更改文本框的值并在我点击时显示日期和时间按钮，我很想写这段代码，但我不知道哪里错了谢谢大家

```
 function doGet() {
      var app=UiApp.createApplication().setTitle('test app');
      var pan1=app.createHorizontalPanel();
      app.add(pan1);
      var txt1=app.createTextBox().setId(txt1);
      var btn1=app.createButton().setText('start').setId('btn1');
      btn1.addClickHandler(app.createServerHandler("now"));
      pan1.add(txt1);
      pan1.add(btn1);
      return app;
}

function now() {
     var app =UiApp.getActiveApplication();
     app.getElementById("txt1").setText(new Date());
     return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:59:16.300

更改以下行

`var txt1=app.createTextBox().setId(txt1);`

至

`var txt1=app.createTextBox().setId('txt1');`

# r - 删除ggplot中的图例标题

> ID：14771546
> 
> 赞同：131
> 
> 时间：2013-02-08T11:28:32.763
> 
> 标签：r, ggplot2

我正在尝试删除以下图例的标题`ggplot2`：

```
df <- data.frame(
  g = rep(letters[1:2], 5),
  x = rnorm(10),
  y = rnorm(10)
)

library(ggplot2)
ggplot(df, aes(x, y, colour=g)) +
  geom_line(stat="identity") + 
  theme(legend.position="bottom") 
```

![在此处输入图像描述](../Images/a56bb4333c38628c1e57a32925292825.png)

我已经看到[了这个问题](https://stackoverflow.com/questions/6022898)，但那里的解决方案似乎都不适合我。大多数人都会给出关于如何`opts`弃用和使用的错误`theme`。我还尝试了各种版本的`theme(legend.title=NULL)`, `theme(legend.title="")`,`theme(legend.title=element_blank)`等。典型的错误消息是：

```
'opts' is deprecated. Use 'theme' instead. (Deprecated; last used in version 0.9.1)
'theme_blank' is deprecated. Use 'element_blank' instead. (Deprecated; last used in version 0.9.1) 
```

自 0.9.3 版发布以来，我第一次使用`ggplot2`它，我发现很难驾驭一些变化......

* * *

## 回答 #1

> 赞同：227
> 
> 时间：2013-02-08T11:30:41.547

你快到了：只需添加`theme(legend.title=element_blank())`

```
ggplot(df, aes(x, y, colour=g)) +
  geom_line(stat="identity") + 
  theme(legend.position="bottom") +
  theme(legend.title=element_blank()) 
```

[Cookbook for R 上的此页面](http://www.cookbook-r.com/Graphs/Legends_%28ggplot2%29/)提供了有关如何自定义图例的大量详细信息。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-08T11:36:28.923

这也有效，还演示了如何更改图例标题：

```
ggplot(df, aes(x, y, colour=g)) +
  geom_line(stat="identity") + 
  theme(legend.position="bottom") +
  scale_color_discrete(name="") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-05T10:34:36.997

由于绘图中可能有多个图例，因此一种选择性地仅删除一个标题而不留下空白空间的方法是将函数的`name`参数设置为，即`scale_``NULL`

`scale_fill_discrete(name = NULL)`

（感谢@pascal[对另一个线程的评论](https://stackoverflow.com/questions/6022898/how-can-i-remove-the-legend-title-in-ggplot2#comment41208703_6023078)）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-04T22:29:25.570

`labs`使用并将颜色设置为的另一个选项`NULL`。

```
ggplot(df, aes(x, y, colour = g)) +
  geom_line(stat = "identity") +
  theme(legend.position = "bottom") +
  labs(colour = NULL) 
```

[![在此处输入图像描述](../Images/aa54722630e07f19039ffe46ac52ff34.png)](https://i.stack.imgur.com/ylMEK.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-29T20:01:07.860

对于`Error: 'opts' is deprecated`. 改为使用`theme()`。（已失效；最后在 0.9.1 版中使用）'我替换`opts(title = "Boxplot - Candidate's Tweet Scores")`为 `labs(title = "Boxplot - Candidate's Tweet Scores")`. 有效！

# gradle - Gradle 从另一个构建文件获取依赖定义

> ID：14771548
> 
> 赞同：3
> 
> 时间：2013-02-08T11:28:41.523
> 
> 标签：gradle, dependency-management

在 gradle 中是否可以从另一个构建文件获取构建的依赖项？

例如，Imagine `project-1`has `project1/build.gradle`，我如何从中获取相同的依赖`project-2`项`project2/build.gradle`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:11:42.560

Cou 可以将您的依赖项放在外部文件中，例如“dependencies.gradle”并像这样导入它：

```
apply from: 'dependencies.gradle' 
```

# json - 是否可以在 JSRender 中有一个带有增量变量 i 的 for 循环？

> ID：14771550
> 
> 赞同：3
> 
> 时间：2013-02-08T11:28:45.713
> 
> 标签：json, jsrender

我有模板（一个 html 文件），它使用 JSRender 使用 JSON 数据进行渲染。

我的示例模板如下

```
<ul id="membersList">
  {{for UserConnection}}
        <li>
        <div>
            <a title="{{:Fullname}}">
            <br />
            <img src="sample.png"/><br />
            {{:Fullname}}</a>
        </div>
        </li>
    {{/for}} 
```

我的 Json 数据是

```
[
{
    "ApplicationName": "appone", 
    "Title": "Title one", 
    " UserConnection ": [
        {
            "Id": 210, 
            " email ": " abc1@xyz.com ", 
        }, 
        {
            "Id": 0, 
            " email ": " ", 
        },
        {
            "Id": 211, 
            " email ": " abc2@xyz.com ", 
        }
    ]
} 
```

];

现在我的要求是如果特别是 JSON 的第二项的 id 值为 0，我应该隐藏 div。

是否可以在 JSRender 中检查我们在 c# 中所做的一些事情，例如

```
for (i = 0 ; i < 10 ; i++)
{
  if (userConnection[i] = 0)
      // show the div
  else 
     // dont show

} 
```

即如果我可以在 JSRender 中访问**UserConnection[i]**，那么我可以显示或隐藏 div。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T18:04:37.667

您可以查看此示例以了解如何获取父数据[https://www.jsviews.com/#parentdata](https://www.jsviews.com/#parentdata)

并且在 for 循环中有 #index 可以访问当前索引。

我认为您的问题的真正答案是使用帮助器来构造 div，并在创建时打开或关闭显示。

助手、转换器和客户标签都是您注册然后使用的通用 javascript 函数。

# php - 使用时区 javascript 获取日期

> ID：14771562
> 
> 赞同：1
> 
> 时间：2013-02-08T11:29:44.953
> 
> 标签：php, javascript, datetime

我想在用户登录后比较日期和用户时区中的日期。我用 php 获取用户的时区。现在如何在用户时区当前时间的 javascript 中获取当前日期/时间。

@everyone 回答：我不需要当前的本地系统时区或几秒钟内的偏移量。我需要用户当前时间和我在 php 中获得的动态时间。例如：我有 'Asia/Kolkata' 或 'America/Denver' 或任何由 php 动态生成的东西。现在我可以将它保存到隐藏值，以便我可以使用 Javascript 获取它，并且我需要这个时区的当前日期，就像 Javascript 提供日期对象一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:32:12.000

尝试这个：

```
// date() function
var currDate = new Date()
var n = currDate.getTimezoneOffset(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:33:42.160

JavaScript 使用系统的时区。您可以通过[GetTimezoneOffset获取偏移量](http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:33:42.957

```
<script>
var date=<?php echo date("Y/m/d")?>
</script> 
```

这可能会帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T11:34:26.083

像这样试试

```
<script>
    var date = '<?php echo date("Y/m/d");?>';
    alert(date);
</script> 
```

深深你也可以这样尝试

```
var today = new Date();  
var localoffset = -(today.getTimezoneOffset()/60);
var destoffset = -4; 

var offset = destoffset-localoffset;
var d = new Date( new Date().getTime() + offset * 3600 * 1000);
alert(d); 
```

在那里你可以得到

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T11:39:22.340

您可以发送 UTC 字符串

```
strtotime("2013-02-08 00:00:00"); 
```

之后，您将拥有 seconsd，您可以将 simple 转换为 JS Date：

```
var utcString = 1360263600 /*AJAX result must be here*/;
new Date(utcString*1000); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T11:43:37.720

您可以使用 JavaScript 的日期对象来获取用户的本地系统..

例如，您可以使用以下内容：

```
var d = new Date();
var time = d.getTime();
alert(time); 
```

这将提醒自午夜以来的毫秒数。

您可以将此时间发送到您的服务器并比较两者。

有关更多功能和详细信息，您可以访问[JavaScript 日期对象](http://www.w3schools.com/jsref/jsref_obj_date.asp)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-23T12:39:24.400

我来自台湾，它为我返回“+8”。

[工作示例](https://jsfiddle.net/9maczqyy/3/)

**JS**

```
function timezone() {
    var offset = new Date().getTimezoneOffset();
    var minutes = Math.abs(offset);
    var hours = Math.floor(minutes / 60);
    var prefix = offset < 0 ? "+" : "-";
    return prefix+hours;
}

$('#result1').html(timezone()); 
```

**HTML**

```
<div id="result"></div> 
```

**结果**

```
+8 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-11T17:30:44.500

我建议将[moment.js 与 moment timezone](http://momentjs.com/timezone/docs/#/use-it/browser/)一起使用。

然后您可以执行以下操作：

```
moment().tz("Asia/Kolkata").format(); 
```

# java - 在 Java TCP 中接受多个客户端

> ID：14771564
> 
> 赞同：0
> 
> 时间：2013-02-08T11:29:47.763
> 
> 标签：java, tcp, connection, port

我想在 Java TCP 程序中接受多个客户端。所以我用一个`while`循环来接受多个客户端。但问题是我无法将节点随机连接到服务器。我曾经按顺序一一连接客户端。那么如何使用 switch case 将节点与我的服务器随机连接？

我的`while`循环：

```
int port=7000;

while(true)
{
    try
    {
        node1=new ServerSocket(port+10);
        Socket check1=node1.accept();
        System.out.println("CLIENT A IS CONNECTED");
    }
    catch(Exception e)
    {
        System.out.println(e);
    }

    try
    {
        ServerSocket soc2=new ServerSocket(port+20);
        Socket check2=soc2.accept();
        System.out.println("CLIENT B IS CONNECTED");
    }
    catch(Exception e)
    {
        System.out.println(e);
    }

    try
    {
        node3=new ServerSocket(port+30);
        Socket check3=node3.accept();
        System.out.println("CLIENT C IS CONNECTED");
    }
    catch(Exception e)
    {
        System.out.println(e);
    }

    try
    {
        node4=new ServerSocket(port+40);
        Socket check4=node4.accept();
        System.out.println("CLIENT D IS CONNECTED");
    }
    catch(Exception e)
    {
        System.out.println(e);
    }

    try
    {
        node5=new ServerSocket(port+50);
        Socket check5=node5.accept();
        System.out.println("CLIENT E IS CONNECTED");
    }
    catch(Exception e)
    {
        System.out.println(e);
    } 
```

但是当我使用`JavaNetBindexception`它时，当我将它与 E 客户端连接时就会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:34:55.133

```
ServerSocket serverSocket = new ServerSocket(port);
ArrayList<Socket> clients = new ArrayList<Socket>();
while (true) {
    clients.Add(serverSocket.accept());        
} 
```

这个怎么样？但是你仍然需要几个线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:45:18.230

```
public class ThreadServer {

    static class ServerThread implements Runnable {
    Socket client = null;
    public ServerThread(Socket c) {
        this.client = c;
    }
    public void run() {
        try {
            System.out.println("Connected to client : "+client.getInetAddress().getHostName());
            client.close();
        } catch (Exception e) {
            System.err.println(e.getMessage());
        }
    }
    }
    public static void main(String args[]) {
        try {
            ServerSocket server = new ServerSocket(7000);
            while (true) {
                Socket p = server.accept();
                new Thread(new ServerThread(p)).start();
            }
        } catch (Exception ex) {
            System.err.println("Error : " + ex.getMessage());
        }
    }
} 
```

# maven - 如何以编程方式为 Maven 创建 Plexus 容器？

> ID：14771567
> 
> 赞同：1
> 
> 时间：2013-02-08T11:30:02.507
> 
> 标签：maven

我已经编写了 Maven 插件的一部分，但它不能再作为插件运行。它可以访问 SCM 或任何 pom.xml，只是一个工件存储库和一些 Maven 坐标。它旨在获取 Maven 坐标并打印出它们的依赖关系（对它们进行一些报告）。为此，它需要以编程方式访问（例如）：

*   MavenProjectBuilder
*   依赖关系图构建器

您注入到 mojo 中的常用东西，但它不是 mojo 并且不能像这样运行（因为我没有 pom.xml）。

我的代码对我没有帮助，例如 AbstractMojoTestCase 需要一个 pom.xml，而我没有。

我想要一些代码，比如..

```
 DefaultPlexusContainer container = new DefaultPlexusContainer();
    Context context = container.getContext();
    context.put("plexus", new DefaultPlexusContainer());
    container.initialize();
    container.start();

    MavenProjectBuilder mavenProjectBuilder = (MavenProjectBuilder) container.lookup(MavenProjectBuilder.ROLE);
    DependencyGraphBuilder dependencyGraphBuilder = (DependencyGraphBuilder) container.lookup(DependencyGraphBuilder.class.getName());
    MavenProject project = mavenProjectBuilder.buildFromRepository(artifact, remoteArtifactRepositories, localRepository);
    // do stuff with dependencies 
```

但是有些东西不见了。帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:41:30.360

看看它是如何完成的[https://github.com/jenkinsci/lib-jenkins-maven-embedder](https://github.com/jenkinsci/lib-jenkins-maven-embedder)（我们在 jenkins 中使用它用于类似目的）

# java - 如何更改默认编译器？

> ID：14771568
> 
> 赞同：8
> 
> 时间：2013-02-08T11:30:03.753
> 
> 标签：java, macos, shell, compiler-construction, javac

我在我的 mac 机器上安装了 javac 编译器。默认情况下，它的版本是 7。我想将编译器版本默认设置为 6。我如何在 Mac 上做到这一点？

我找到了 ubuntu 的类似解决方案：http: [//bartling.blogspot.com/2007/03/getting-java-6-to-be-default-jvm-on.html](http://bartling.blogspot.com/2007/03/getting-java-6-to-be-default-jvm-on.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T11:33:41.927

`$ export JAVA_HOME=/usr/libexec/java_home -v '1.6*'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:45:42.540

运行导出配置的命令：

```
export JAVA_HOME=/usr/libexec/java_home -v '1.6*' 
```

这只会持续到您重新启动计算机，因此请务必将其也包含在您的配置中。我不是 OSX 用户，所以我不确定该文件是如何调用的，但它基本上相当于 Linux 上的“.bashrc”。只需将导出行放在文件末尾，这样以后每次都会导出。（这可能是同一个文件，因为它们都是基于 UNIX 的）

# android - Google Maps v2 Marker zOrdering - 置顶

> ID：14771569
> 
> 赞同：24
> 
> 时间：2013-02-08T11:30:06.873
> 
> 标签：android, marker, google-maps-android-api-2, z-order

我知道关于这个主题有一些主题，但我还没有找到足够好的解决方案。

我需要在所有其他标记的顶部放置一个标记。我该怎么做呢？

我尝试在所有其他标记之前和之后添加此标记，但是在地图视图上的排序似乎是从底部（前）到顶部（后）。这是不可接受的，因为我想以所有标记前面的标记为中心。

我知道多边形可以是 zOrdered，但我更喜欢样式精美的图形！

事实上，您不能在标记上订购多边形！

“相对于其他叠加层（包括折线、GroundOverlays 和 TileOverlays，但不包括标记）绘制此多边形的顺序。具有较大 z-index 的叠加层绘制在具有较小 z-indices 的叠加层上。叠加的顺序与相同的 z-index 值是任意的。默认为 0。- [https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Polygon](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Polygon)

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-06-19T16:48:53.383

如果您确实显示了 InfoWindow，则 Aiden Fry 的答案有效。如果你不这样做，标记就不会出现在前面。无论如何，这是一个让它出现在前面的技巧：

创建一个显示 0dp 信息窗口的自定义 InfoWindowAdapter：

```
public class MapWindowAdapter implements GoogleMap.InfoWindowAdapter {
    private Context context = null;

    public MapWindowAdapter(Context context) {
        this.context = context;
    }

    // Hack to prevent info window from displaying: use a 0dp/0dp frame
    @Override
    public View getInfoWindow(Marker marker) {
        View v = ((Activity) context).getLayoutInflater().inflate(R.layout.no_info_window, null);
        return v;
    }

    @Override
    public View getInfoContents(Marker marker) {
        return null;
    }
} 
```

这是布局的代码：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="0dp"
              android:layout_height="0dp">
</LinearLayout> 
```

设置地图时，设置适配器和自定义 InfoWindowAdapter 和 OnMarkerClickListener（使用 showInfoWindow 并按照 AIden Fry 的建议返回 true）：

```
mMap.setInfoWindowAdapter(new MapWindowAdapter(this));

//Call showInfoWindow to put marker on top of others.
myMarker.showInfoWindow(); 
```

这并不漂亮，但我没有找到任何其他方法来处理 z-indexing 而不使用信息窗口。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-06-27T18:21:44.170

这是在**Google Play 服务 9.2**中添加的（[2016 年 6 月 27 日](https://developers.google.com/maps/documentation/android-api/releases#june_27_2016)）

> 新[`MarkerOptions.zIndex()`](https://developers.google.com/android/reference/com/google/android/gms/maps/model/MarkerOptions.html#zIndex(float))设置一个标记相对于地图上其他标记的堆叠顺序。阅读有关[标记 z-index](https://developers.google.com/maps/documentation/android-api/marker)和 z-index 对点击事件的影响的更多信息。([问题 4688](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4688) )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:13:01.737

虽然不是完美的解决方案！我已经弄清楚如何通过使用 onMarkerClick 事件在所有其他标记上显示选定（点击）标记。返回 TRUE 将消耗此事件，因此我们必须执行 showInfoWindow 并缩放到中心

```
 @Override
    public boolean onMarkerClick(Marker marker) {

       //Manually open the window
       marker.showInfoWindow();

       //Animate to center
       sMapFrag_v2.getMap().animateCamera(CameraUpdateFactory.newLatLng(marker.getPosition());

       //Consume the method
       return true;
    } 
```

# python - Python json.loads 不起作用

> ID：14771570
> 
> 赞同：11
> 
> 时间：2013-02-08T11:30:09.470
> 
> 标签：python, json

我一直在试图弄清楚如何在 Python 中加载 JSON 对象。

```
 def do_POST(self):
    length = int(self.headers['Content-Length'])
    decData = str(self.rfile.read(length))
    print decData, type(decData)
    "{'name' : 'journal2'}" <type 'str'>
    postData = json.loads(decData)
    print postData, type(postData)
    #{'name' : 'journal2'} <type 'unicode'>
    postData = json.loads(postData)
    print postData, type(postData)
    # Error: Expecting property name enclosed in double quotes 
```

我哪里错了？

**错误代码（JScript）：**

```
var data = "{'name':'journal2'}";
var http_request = new XMLHttpRequest();
http_request.open( "post", url, true );
http_request.setRequestHeader('Content-Type', 'application/json');
http_request.send(data); 
```

**真代码（JScript）：**

```
var data = '{"name":"journal2"}';
var http_request = new XMLHttpRequest();
http_request.open( "post", url, true );
http_request.setRequestHeader('Content-Type', 'application/json');
http_request.send(JSON.stringify(data)); 
```

**真实代码（Python）：**

```
 def do_POST(self):
    length = int(self.headers['Content-Length'])
    decData = self.rfile.read(length)
    postData = json.loads(decData)
    postData = json.loads(postData) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T11:31:09.860

您的 JSON 数据包含在额外的引号中，使其成为 JSON 字符串，*并且*该字符串中包含的数据*不是*JSON。

改为打印`repr(decData)`，您将获得：

```
'"{\'name\' : \'journal2\'}"' 
```

并且 JSON 库正确地将其解释为一个带有文字内容的字符串`{'name' : 'journal2'}`。如果您去掉了外引号，则包含的字符不是有效的 JSON，因为 JSON 字符串必须始终用双引号引起来。

对于所有`json`模块而言，`decData`也可以包含`"This is not JSON"`并`postData`设置为`u'This is not JSON'`.

```
>>> import json
>>> decData = '''"{'name' : 'journal2'}"'''
>>> json.loads(decData)
u"{'name' : 'journal2'}"
>>> json.loads(json.loads(decData))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py", line 382, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting property name: line 1 column 1 (char 1) 
```

修复产生这个字符串的任何东西，你的视图很好，它是被破坏的输入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-17T10:06:48.267

要解决错误“期望用双引号括起来的属性名称”，您可以执行以下操作：

```
import json
data = "{'name' : 'journal2'}"
json.loads(json.dumps(data)) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-02-20T07:36:26.950

您也可以使用`eval`：

```
data = "{'name' : 'test'}"
eval(data) 
```

它可以工作并返回一个字典。

# mysql - LINQ to MySQL 对 dag 的连接查询

> ID：14771571
> 
> 赞同：0
> 
> 时间：2013-02-08T11:30:12.917
> 
> 标签：mysql, sql, linq, left-join

我在以下 2 个表中定义了一个 dag 结构：

```
TABLE: ORGANISATION
--------------------------------------------
|           |                               |
|   ID      |   Guid            NOT NULL    |
|   Name    |   varchar(200)    NOT NULL    |
|   IsTop   |   bool            NOT NULL    |
|           |                               |
---------------------------------------------

TABLE: EDGE
--------------------------------------------
|           |                               |
|   ID      |   Guid            NOT NULL    |
|   From    |   Guid            NOT NULL    |
|   To      |   Guid            NOT NULL    |
|           |                               |
--------------------------------------------- 
```

使用**LINQ**，是否可以**使用单个查询来选择所有组织（IsTop == true****或**没有带有 To 字段的 EDGE 指向 ORGANISATION 的 ID）。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:41:39.190

我不知道这是否会帮助你，但是

```
var query = from org in ORGANISATION
                       where org.IsTop == "true" ||
                        !(FROM ed in EDGE
                       select ed.To).CONTAINS(org.ID)
                       select org; 
```**

# triggers - 无法通过 ClearCase 触发器执行 FTP 命令

> ID：14771574
> 
> 赞同：1
> 
> 时间：2013-02-08T11:30:16.613
> 
> 标签：triggers, clearcase

我有一个运行 .bat 文件的 ClearCase 触发器，它运行良好。我现在想做的是让它运行一些 FTP 命令，在我的例子中使用 WinSCP。我在另一个 .bat 文件中准备好了一个命令，当手动运行时，它可以工作。但是，当我从 ClearCase 触发器启动的 .bat 调用此 .bat 文件时，它不起作用。我不知道为什么！

触发的 .bat 文件中的命令是`call ftp.bat`.

有任何想法吗？会不会是权限？

谢谢，

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:59:13.610

正如[OP Andrew](https://stackoverflow.com/users/1999794/andrew) [报告](https://stackoverflow.com/questions/14771574/cannot-execute-ftp-commands-through-clearcase-trigger/14828829#comment20775853_14771574)的那样，当从另一只蝙蝠调用时，WinSCP 是不实用的。
这不会运行：

```
"C:\Program Files\WinSCP\winscp.com" /script=sftp_script.txt 
```

但是，这将基于 psftp（[来自 PuTTY](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)）：

```
 echo y | psftp %FTPUSER%@%FTPSERVER% -pw %FTPPASS% -b psftp_script.txt 
```

# php - 使用 php 从 SQL 服务器生成 json 数组

> ID：14771576
> 
> 赞同：1
> 
> 时间：2013-02-08T11:30:18.653
> 
> 标签：php, json

所以，我的问题是这样的：我正在尝试跟进一个教程以创建一个应用程序，但我被困在 json 数组的一部分......

所以我需要的是创建这样的东西：

```
{
    "contacts": [
        {
                "id": "c200",
                "name": "Ravi Tamada",
                }
        },
        {
                "id": "c201",
                "name": "Johnny Depp",

                }
        },

  ]
} 
```

虽然，根据我所做的，我得到了这样的东西：

```
[{"ID":"1","SPECIFIKIME":"12,9916,7165,1747,6973","IDPEMA":"119"}][{"ID":"2","SPECIFIKIME":null,"IDPEMA":"110"}] 
```

我的代码是这样的：

```
while( $row = odbc_fetch_array($res) ) {
$return_arr = array();

    $row_array['ID'] = $row['ID'];
    $row_array['SPECIFIKIME'] = $row['SPECIFIKIME'];
    $row_array['IDPEMA'] = $row['IDPEMA'];

    array_push($return_arr,$row_array);

echo json_encode($return_arr);

} 
```

你能帮我怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T11:37:18.393

首先，您必须`$return_arr`跳出循环，因为您每次都在重新定义它（与 json_encode 相同），然后您必须添加子数组联系人以使您的代码看起来像您展示的那样

这是你的代码：

```
$return_arr = array();
$return_arr['contacts'] = array();
while( $row = odbc_fetch_array($res) ) {
    $row_array['ID'] = $row['ID'];
    $row_array['SPECIFIKIME'] = $row['SPECIFIKIME'];
    $row_array['IDPEMA'] = $row['IDPEMA'];

    array_push($return_arr['contacts'],$row_array);
}
echo json_encode($return_arr); 
```

# c# - 根据其值更改单元格样式？

> ID：14771577
> 
> 赞同：0
> 
> 时间：2013-02-08T11:30:20.453
> 
> 标签：c#, winforms, datagridview

我正在创建一个基于表单和`DataGridView`控件的应用程序。

我正在绑定数据库中的信息，我现在要做的是根据它的值来更改列属性的字体样式和颜色，它可以是`"Urgent","Haute","Normale"`.

这是我正在使用的代码，但它没有用，有人可以告诉我下面的代码出了什么问题吗？

**代码：**

```
private void ColorizeCellsbyValue() {

        DataGridViewCellStyle BoldRed = null;
        BoldRed = new DataGridViewCellStyle();
        BoldRed.Font = new Font("Tahoma", 9, FontStyle.Bold);
        BoldRed.ForeColor = Color.Red;

        DataGridViewCellStyle Red = null;
        Red = new DataGridViewCellStyle();
        Red.ForeColor = Color.Red;

        DataGridViewCellStyle Black = null;
        Black = new DataGridViewCellStyle();
        Black.ForeColor = Color.Black;
        string priority;
        foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            priority = row.Cells[3].Value.ToString();
            switch (priority)
            {
                //Change font 
                case "Urgent":
                    row.Cells[3].Style = BoldRed;
                    break;
                case "Haute":
                    row.Cells[3].Style = Red;
                    break;
                case "Normale":
                    row.Cells[3].Style = Black;
                    break;
                default:
                    row.Cells[3].Style = Black;
                    break;
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:18:59.830

您无需创建一个`DataGridViewCellStyle`来设计您的`Column`属性。试着找出我的简单例子

```
 foreach (DataGridViewRow rows in dataGridView1.Rows)
        {
            if (rows.Cells[3].RowIndex % 2 == 0)
            {
                rows.Cells[3].Style.Font = new Font("Tahoma", 9, FontStyle.Bold);
                rows.Cells[3].Style.BackColor = Color.Red;
            }
            else
            {
                rows.Cells[3].Style.Font = new Font("Arial", 9, FontStyle.Regular);
                rows.Cells[3].Style.BackColor = Color.Blue;
            }
        } 
```

我对您的主要问题的回答是尝试使用`.EditedFormattedValue.ToString()`

```
 foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            priority = row.Cells[3].EditedFormattedValue.ToString();
            switch (priority)
            {
                //Change font 
                case "Urgent":
                    row.Cells[3].Style = BoldRed;
                    break;
                case "Haute":
                    row.Cells[3].Style = Red;
                    break;
                case "Normale":
                    row.Cells[3].Style = Black;
                    break;
                default:
                    row.Cells[3].Style = Black;
                    break;
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:53:20.453

尝试使用

```
row.Cells[3].Style.BackColor = <Color>; 
```

供`ForeColor`使用

```
row.Cells[3].Style.ForeColor = <Color>; 
```

这应该有效。快乐编码！

# shell - 如何在几个作业中运行 shell 脚本

> ID：14771579
> 
> 赞同：3
> 
> 时间：2013-02-08T11:30:25.563
> 
> 标签：shell, unix

我有一个构建脚本，它运行得很慢，尤其是在 Solaris 上。我想通过在多个作业中运行它来提高它的性能。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T11:34:23.533

试试[GNU Parallel](http://www.gnu.org/software/parallel/)，它很容易使用：

> GNU 并行是一个 shell 工具，用于使用一台或多台计算机并行执行作业。作业可以是单个命令，也可以是必须为输入中的每一行运行的小脚本。典型的输入是文件列表、主机列表、用户列表、URL 列表或表列表。作业也可以是从管道读取的命令。然后 GNU 并行可以拆分输入并将其并行传输到命令中。
> 
> 如果您今天使用 xargs 和 tee，您会发现 GNU parallel 非常易于使用，因为 GNU parallel 被编写为具有与 xargs 相同的选项。如果您在 shell 中编写循环，您会发现 GNU 并行可能能够通过并行运行多个作业来替换大多数循环并使其运行得更快。
> 
> GNU 并行确保命令的输出与按顺序运行命令时的输出相同。这使得使用 GNU 并行的输出作为其他程序的输入成为可能。
> 
> 对于输入的每一行，GNU 并行将使用该行作为参数执行命令。如果没有给出命令，则执行输入行。多条生产线将并行运行。GNU 并行通常可以用作 xargs 或 cat | 的替代品。重击。

* * *

您提到它是一个构建脚本。如果您使用的是命令行实用程序，则可以使用[make 的](http://www.gnu.org/software/make/manual/make.html#Parallel)[选项](http://www.gnu.org/software/make/manual/make.html#Parallel)`make`并行化构建：[`-j<N>`](http://www.gnu.org/software/make/manual/make.html#Parallel)

> GNU make 知道如何一次执行多个配方。通常，make 一次只执行一个配方，等待它完成后再执行下一个。但是，'-j' 或 '--jobs' 选项告诉 make 同时执行许多配方。

此外，还有[`distcc`](http://code.google.com/p/distcc/)一个可用于`make`将编译分发到多个主机：

```
export DISTCC_POTENTIAL_HOSTS='localhost red green blue'
cd ~/work/myproject; 
make -j8 CC=distcc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:06:26.977

GNU 并行非常好。@Maxim - 好建议+1。

一次性，如果您无法安装新软件，请尝试这个必须运行多次的慢命令，运行 slowcommand 17 次。更改内容以满足您的需求：

```
#!/bin/bash
cnt=0

while [ $cnt -le 17  ]    # loop 17 times
do
   slow_command  &
   cnt=$(( $cnt + 1 ))
   [  $(( $cnt % 5 )) -eq  0 ] && wait  # 5 jobs at a time in parallel 
done
wait      # you will have 2 jobs you di not wait for in the loop 17 % 5 == 2 
```

# google-ads-api - 从 Google 再营销列表中删除用户

> ID：14771580
> 
> 赞同：4
> 
> 时间：2013-02-08T11:30:31.663
> 
> 标签：google-ads-api

我在我的网站上使用 Google Adwords Remarketing，它被证明非常有效！但是，有时我需要从我的再营销列表中删除用户（在他访问某个页面之后）。

据我所知，谷歌没有提供这样的脚本。但是，也许有某种解决方法？这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T08:23:05.877

创建以下受众

A - 您的原始受众
B - 访问该“特定页面”的每个人
C -[组合受众](http://support.google.com/adwords/answer/2549111?hl=en)：（原始受众 - 受众 B）

然后只重新定位受众 C。访问您的特定页面的任何人都将停止再营销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T11:08:29.503

感谢@Elan Perach 为我解决了这个问题的答案。根据您的需要，这是一种可能更可取的替代方法：

您可以通过添加“广告系列受众排除”（广告系列 > 展示广告网络 > 兴趣和再营销 > 广告系列受众排除）来停止向访问“特定页面”的用户展示特定的再营销广告系列。

因此，参考 Elan 的回答，您创建受众 B（“访问该特定页面的每个人”）并将其添加为排除项，但您不需要以这种方式创建受众 C。我发现这减少了点击次数，特别是如果您想为多个广告系列执行此操作。

# php - 我应该为我的 Twig 模板使用与控制器中相同的变量名吗？

> ID：14771586
> 
> 赞同：0
> 
> 时间：2013-02-08T11:30:44.820
> 
> 标签：php, symfony, twig

我正在阅读 Symfony2 入门指南，我的问题是：

我有一个包含列的数据库：价格，描述，id，名称然后在我的控制器中，我获取这些列并通过树枝模板显示它们。在我的控制器中，我这样做：

```
public function showAction($id)
    {
        $product = $this->getDoctrine()
            ->getRepository('AcmeStoreBundle:Product')
            ->find($id);

        if (!$product) {
            throw $this->createNotFoundException(
                'No product found for id '.$id
            );
        }

        $price = $product -> getPrice();
        $description = $product -> getDescription();
        return $this->render(
        'AcmeStoreBundle:Store:index.html.twig',
        array('id' => $id, 'price' => $price, 'description' => $description)
        );
    } 
```

我的问题是，我可以将 $price,$description 更改为其他名称吗...？还是我被迫继续提及这些变量，就像它们在数据库中命名一样？

基本上，我可以这样做：

```
$foo = $product -> getPrice();
$bar = $product -> getDescription(); 
```

然后在我的渲染函数中执行：

```
 return $this->render(
        'AcmeStoreBundle:Store:index.html.twig',
        array('uniquecode' => $id, 'cost' => $foo, 'message' => $bar)
        ); 
```

我的问题有两个：1）我可以这样做2）这样做是一个好习惯吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:36:55.123

更好的：

```
return $this->render('AcmeStoreBundle:Store:index.html.twig', array(
       'product' => $product
 )); 
```

您可以像这样访问 twig 中的产品属性

```
{{ product.description }} 
```

* * *

> 为变量使用有意义的名称。变量名必须定义其内容的准确解释

我在这里找到它[http://codebuild.blogspot.de/2012/02/15-best-practices-of-variable-method.html](http://codebuild.blogspot.de/2012/02/15-best-practices-of-variable-method.html)但你可以用谷歌搜索**变量和方法命名**

# c# - 多条数据库记录

> ID：14771599
> 
> 赞同：1
> 
> 时间：2013-02-08T11:31:28.203
> 
> 标签：c#, asp.net, sql-server-2008

我想将紧急求助热线联系人存储在 ASP.NET 网站的数据库中。. .此联系人将被分配到不同城市的特定位置。. . 例如：City=Mumbai，然后对于 Mumbai City，将会有不同的位置，例如 Dadar、Andheri、Borivali 等。

我设计了一个表格![在此处输入图像描述](../Images/ecd5c95264866dbea6586cb5918e9796.png)

现在，问题是，一个特定城市的多个位置可以有一个机场，那么我还必须输入每个位置的全部信息。. . 那么有什么办法可以避免多次输入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:39:43.763

您可以使用下表架构，并相应地设计您的表格

**位置表**

```
LocationID (Primary Key)
CountryID (Foreign Key)
CityID (Foreign Key)
ContactID (Foreign Key)
Location 
```

**城市表**

```
CityID(Primary Key)
City 
```

**国家表**

```
CountryID(Primary Key)
Country 
```

**服务表**

```
ServiceID(Primary Key)
Service         --Airport/Ambulance/fire... 
```

**联系表**

```
ContactID (Primary Key)
ServiceID (Foreign Key)
Description    --AirportName/HospitalName
Contact        --Contact Number 
```

**更新（表单设计提示）**

1.  将记录添加到城市/国家/服务表的表单（它们非常简单，您只需检查重复的条目/必填字段。
2.  对于联系表，使用下拉菜单填充从`Service Table`
3.  对于位置，请使用从相应表格中填充的国家、城市和联系人的下拉菜单。
4.  用于`INNER JOINS`连接表格并显示所需的结果

# python - SQL 存储后显示额外的换行符

> ID：14771603
> 
> 赞同：0
> 
> 时间：2013-02-08T11:31:40.363
> 
> 标签：python, mysql, web, textarea, line-breaks

我目前正在 Windows 上用 Python（使用 web.py）开发它，并使用最新的 Chrome。

简单测试：

1.  向用户展示了一个带有组件的基本 Web 表单。
2.  提交表单时，这个textarea的内容被放到一个MySql表中，不做修改。
3.  稍后，用户返回以编辑他们上次提交的内容。
4.  然后我展示了一个新表单，文本区域直接从数据库中填充以进行修改 - 阻止处理 HTML，因此显示标签。
5.  但是，当重新显示给用户时，每行现在在每行之间都有一个额外的（不需要的）换行符。

我怎样才能防止这种情况？

例如：

提交的文本：

```
Line 1
Line 2 
```

重新显示时，文本如下所示：

```
Line 1

Line 2 
```

我知道这将是某种 CR LF 问题，但无法完全解决。我尝试转换为，`<br />`但只显示`<br />`文本而不是实际的换行符。我也不想在将文本放入数据库之前对其进行修改。但我想我确实需要一些可以补偿显示换行符不同的各种操作系统的东西。

我在这里阅读了许多类似的问题，但它们主要是 PHP，或者谈论 nl2br，这无论如何都不是解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:56:15.117

如果您`print`用于输出文本，请在语句末尾附加逗号以删除换行符。

例如

```
print 'Some Text', 
```

可能是您的打印文本中已经有一个换行符，并且不需要打印中额外附加的一个。

If not, try `.rstrip('\n')` on your string to remove any new-lines.

# matlab - matlab中的文件处理

> ID：14771613
> 
> 赞同：0
> 
> 时间：2013-02-08T11:32:28.817
> 
> 标签：matlab, file-io, large-files

我有一个将近 150 MB 到 500 MB 的大文本文件，这个文件包含 20 行 lacs ......

文件内容是这样的......

```
USDINR12AUGFUT           1  1343791803  579782   2012-08-01 09:00:03  BID          55.5725       200
USDINR12AUGFUT           2  1343791803  594246   2012-08-01 09:00:03  BID          55.9650       150
USDINR12AUGFUT           3  1343791803  594570   2012-08-01 09:00:03  ASK          56.0700       100
USDINR12AUGFUT           4  1343791803  946831   2012-08-01 09:00:03  ASK          56.0450       500
USDINR12AUGFUT           5  1343791804   16514   2012-08-01 09:00:04  TRADE        55.9650         5  55965.00         5
USDINR12AUGFUT           6  1343791804   19401   2012-08-01 09:00:04  BID          55.9800        14
USDINR12AUGFUT           7  1343791804   32311   2012-08-01 09:00:04  BID          56.0000       100
USDINR12AUGFUT           8  1343791804   33292   2012-08-01 09:00:04  ASK          56.0400       150
USDINR12AUGFUT           9  1343791804   34695   2012-08-01 09:00:04  TRADE        56.0000         1  55970.83         6
USDINR12AUGFUT          10  1343791804   35599   2012-08-01 09:00:04  TRADE        56.0000         1  55975.00         7
USDINR12AUGFUT          11  1343791804   36626   2012-08-01 09:00:04  TRADE        56.0000         1  55978.12         8
USDINR12AUGFUT          12  1343791804   53676   2012-08-01 09:00:04  TRADE        56.0000        60  55997.43        68
USDINR12AUGFUT          13  1343791804   57434   2012-08-01 09:00:04  TRADE        56.0000        25  55998.12        93
USDINR12AUGFUT          14  1343791804   57967   2012-08-01 09:00:04  TRADE        56.0000         1  55998.14        94
USDINR12AUGFUT          15  1343791804   60474   2012-08-01 09:00:04  TRADE        56.0000         1  55998.16        95
USDINR12AUGFUT          16  1343791804   60988   2012-08-01 09:00:04  TRADE        56.0000         1  55998.18        96
USDINR12AUGFUT          17  1343791804   61232   2012-08-01 09:00:04  TRADE        56.0000         1  55998.20        97
USDINR12AUGFUT          18  1343791804   61974   2012-08-01 09:00:04  TRADE        56.0000         1  55998.21        98
USDINR12AUGFUT          19  1343791804   62449   2012-08-01 09:00:04  TRADE        56.0000         1  55998.23        99 
```

我的问题是我想使用这个文件在 MATLAB 上做一些回测，所以我必须导入这个文件。但是每当我使用`fopen`并且`textscan`MATLAB抛出一个错误说......

```
??? Error using ==> textscan
Out of memory. Type HELP MEMORY for your options. 
```

但是当我使用 20-50 MB 文件时，它运行良好。

如何克服这一点？帮帮我...

* * *

我的代码：

```
% file_path = 'E:\volume\august\AUG03.MCX';
file_path = 'D:\home\flexsys\pavan\usdinr_t\USDINR12AUGFUT.MCX';

fid = fopen(file_path);

C = textscan(fid,'%s %d %d %d %s %s %s %f %d %f %d');
n = length(C{1});

for i = 1 : n
    raw_data.symbol(i)      = C{1}(i);
    raw_data.trade_no(i)    = C{2}(i);
    raw_data.utc_sec(i)     = C{3}(i);
    raw_data.utc_nano(i)    = C{4}(i);
    raw_data.date(i)        = C{5}(i);
    raw_data.time(i)        = C{6}(i);
    raw_data.trade_type(i)  = C{7}(i);
    raw_data.ltp(i)         = C{8}(i);
    raw_data.ltq(i)         = C{9}(i);
    raw_data.vwap(i)        = C{10}(i);
    raw_data.volume(i)      = C{11}(i);

    % % % some back testing here.

end 
```

我已将所有数据存储在`C`变量中并且出现错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:25:43.807

不确定它是否在这里工作，但是使用更高级别的命令读取数据怎么样？

鉴于您的数据结构，我将研究`csvread`,`xlsread`或`dlmread`.

您也可以在当前文件夹中的文件上*单击鼠标右键*，然后单击`import`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:38:27.713

如果您使用 指定行数或重复格式数`textscan`，MATLAB 会预先计算所需的确切内存量。

[http://www.mathworks.co.uk/help/matlab/matlab_prog/strategies-for-efficient-use-of-memory.html](http://www.mathworks.co.uk/help/matlab/matlab_prog/strategies-for-efficient-use-of-memory.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:33:45.383

当你用完内存时，你必须做一些事情来使用更少的内存。这里的其他答案中有一些好主意，但如果这些都失败了，剩下的唯一事情就是读取和处理可以放入内存的块中的文件。

一种选择是使用指定读取您指定的次数`textscan`的参数进行调用。将该调用放入循环中，它每次都会读取文件的一部分。像这样的东西：`N``format`

```
while ~feof(fid)
    C = textscan(fid, 'format', N);
end 
```

# c# - MVC Helpers 内联工作，但不在 App_Code 中

> ID：14771615
> 
> 赞同：1
> 
> 时间：2013-02-08T11:32:39.410
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

最初我为每个菜单项重复了几行代码，只是对各种菜单项值进行了硬编码，但后来我遇到了帮助者，并告诉我我会试一试。现在 6 行代码（每个菜单项）减少到一个（每个项目），我有一个地方可以去改变任何东西，而不是在 5 个地方改变它。所有很棒的东西。这是代码：

```
@helper MenuItem(string action, string controller)
{
    <a href="@Url.Action(action, controller)" id="@controller">
        <div class="MenuItem">
            <img src="@("/XXX.YYY.Web/Content/Images/Icons/Menu/mnu"+controller+".png")" /><br />
            //I had to put the XXX.YYY as a literal string because the ~ didn't work, it was quoted literally also instead of showing the home folder.
            @controller
        </div>
    </a>
} 
```

我的问题是当我内联使用它时它可以工作，比如在我的 _Layout.cshtml 顶部使用以下代码行：

```
 @MenuItem("Index", "Home")
        @MenuItem("Index", "Chart") 
```

但是，当我将它移到 App_Code 文件夹下名为 LayoutHelpers.cshtml 的通用帮助程序中时，我可以重用它，并相应地更改代码，如下所示：

```
 @LayoutHelpers.MenuItem("Index", "Home")
        @LayoutHelpers.MenuItem("Index", "Chart") 
```

注意：实际助手中没有任何变化。只有 _Layout.cshtml 文件中的上述 2 行发生了变化。

当我进行这些更改时，我收到以下错误：

编译错误描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：CS0103：当前上下文中不存在名称“Url”

源错误：

第 3 行：@helper MenuItem(string action, string controller) 第 4 行：{ 第 5 行：第 6 行：第 7 行：@@

现在奇怪的是，注意它是如何在第 7 行“mnuHome.png”而不是 mnucontroller.png 上工作的。然而它说第 5 行是错误的。

我也有一个问题 ~ 在助手中不起作用。IE。~/Content 显示为文字字符串，而不是将其编译为正确的路径，该路径应始终指向应用程序的主文件夹。

以下是我用作参考的链接：

[http://weblogs.asp.net/jgalloway/archive/2011/03/23/comparing-mvc-3-helpers-using-extension-methods-and-declarative-razor-helper.aspx](http://weblogs.asp.net/jgalloway/archive/2011/03/23/comparing-mvc-3-helpers-using-extension-methods-and-declarative-razor-helper.aspx)

特别是在“Razor 声明式助手”标题下的页面下方不到 1/4。从这里开始。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:34:36.403

标准助手（例如 UrlHelper 和 HtmlHelper）在 Razor 内联中不可用`@helper`。如果您需要使用它，则需要将 UrlHelper 作为参数传递给您的助手：

```
@helper MenuItem(UrlHelper url, string action, string controller)
{
    <a href="@url.Action(action, controller)" id="@controller">
        <div class="MenuItem">
            <img src="@url.Content("~/XXX.YYY.Web/Content/Images/Icons/Menu/mnu"+controller+".png")" />
            <br />
            @controller
        </div>
    </a>
} 
```

然后在调用时传递正确的实例：

```
@LayoutHelpers.MenuItem(Url, "Index", "Home")
@LayoutHelpers.MenuItem(Url, "Index", "Chart") 
```

# google-docs - 免费的 UML 和思维导图工具与谷歌文档集成

> ID：14771617
> 
> 赞同：2
> 
> 时间：2013-02-08T11:32:48.163
> 
> 标签：google-docs, uml

任何人都可以推荐一个无限制的免费 UML（和通用思维导图）图表工具与 Google 文档集成吗？

# html - 如何去除多余的 & 由 AdSense 代码生成

> ID：14771619
> 
> 赞同：0
> 
> 时间：2013-02-08T11:32:50.627
> 
> 标签：html, css, wordpress, adsense

如果您访问此[链接](http://www.japaneseemoticons.net/confused-emoticons/)页面，您将在标语上方看到页脚上方的额外空间。我怎样才能删除它？这是放置 google adsense 代码的 PHP。

```
<?php cpotheme_show_taglines('post_bottom', 'tagline_bottom'); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:35:22.107

您可以使用 jQuery 删除空`<p></p>`标签

```
$('p').each(function() {
    var $this = $(this);
    if($this.html().replace(/\s|&nbsp;/g, '').length == 0)
        $this.remove();
}); 
```

或者如果你担心它占用的空间，你可以简单地使用 CSS 隐藏它

```
p:empty {
   display: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:11:50.650

使用 jQuery[`:empty`选择器](http://api.jquery.com/empty-selector/)`<p></p>`在您的文档中查找。

```
$(document).ready(function(){
  $('p:empty').remove();
}); 
```

# flex4 - 带有 4 个视频和 1 个控制栏的 OSMF 播放器

> ID：14771624
> 
> 赞同：0
> 
> 时间：2013-02-08T11:33:06.953
> 
> 标签：flex4, osmf

我有一个要求，我需要显示 4 个并行播放的视频内容，我通过并行元素实现了它，但这里的主要挑战是我想在不同的面板中显示所有 4 个视频和一个通用的控制栏来播放/暂停视频。当我试图将媒体播放器作为 Uicomponent 添加到 hbox/vbox 时，它会抛出运行时异常。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:20:52.547

```
protected function initPlayer():void
        {
            // Create a mediafactory instance

            var leftcontainer:Panel = new Panel(); 
            leftcontainer.percentHeight=50;
            leftcontainer.percentWidth=50;

            mediaFactory = new DefaultMediaFactory();

            //Marker 1: Create a LayoutMetaData object stup up to even out the 2 parellel streams initially
            var layoutData:LayoutMetadata = new LayoutMetadata();
            layoutData.percentWidth = 50;
            layoutData.percentHeight = 50;
            layoutData.scaleMode = ScaleMode.LETTERBOX;

            //Marker 2: Create the left side Media Element to play the LOGO_VID and apply the meta-data
            var leftElement:MediaElement = mediaFactory.createMediaElement( new URLResource( LOGO_VID ) );
            leftElement.metadata.addValue( LayoutMetadata.LAYOUT_NAMESPACE, layoutData );

            //Marker 3: Create the right side Media Element to play the STREAMING_PATH and apply the meta-data
            var rightElement:MediaElement = mediaFactory.createMediaElement( new URLResource( STREAMING_PATH ) );
            rightElement.metadata.addValue( LayoutMetadata.LAYOUT_NAMESPACE, layoutData );          

            //Marker 4: Create the ParallelElement and add the left and right elements to it
            var parallelElement:ParallelElement = new ParallelElement();
            parallelElement.addChild( leftElement );
            parallelElement.addChild( rightElement );

            //Marker 5: Reinstantiate the layoutData to clear it out and set the layout data for the parallel element
            layoutData = new LayoutMetadata();
            layoutData.layoutMode = LayoutMode.HORIZONTAL;
            layoutData.horizontalAlign = HorizontalAlign.CENTER;
            layoutData.verticalAlign = VerticalAlign.MIDDLE;
            layoutData.width = 800;
            layoutData.height = 600;
            parallelElement.metadata.addValue( LayoutMetadata.LAYOUT_NAMESPACE, layoutData );

            //the simplified api controller for media
            player = new MediaPlayer( parallelElement );

            //the container (sprite) for managing display and layout
            container = new MediaContainer();
            container.addMediaElement( parallelElement );

            //Adds the container to the stage

            var ui:UIComponent = new UIComponent();
            ui.addChild(container as DisplayObject);
            leftcontainer.addElement(ui);

            this.addChild(container);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T02:12:02.610

您可以下载 OSMF 主干，其中有示例文件夹

哪个项目 ExamplePlayer 在其中有很多不同的

播放视频的方式。以下代码是从那里提取的

```
 var parallelElement:SynchronizedParallelElement = new SynchronizedParallelElement();
                        var layout:LayoutMetadata = new LayoutMetadata();
                        layout.horizontalAlign = HorizontalAlign.CENTER;
                        layout.verticalAlign = VerticalAlign.MIDDLE;
                        parallelElement.addMetadata(LayoutMetadata.LAYOUT_NAMESPACE, layout);

                        var mediaElement1:MediaElement = new VideoElement(new URLResource(REMOTE_PROGRESSIVE));
                        layout = new LayoutMetadata();
                        layout.left = 0;
                        layout.top = 0;
                        layout.percentWidth = 50;
                        layout.percentHeight = 50;
                        mediaElement1.addMetadata(LayoutMetadata.LAYOUT_NAMESPACE, layout);
                        parallelElement.addChild(mediaElement1);

                        var mediaElement2:MediaElement = new VideoElement(new URLResource(REMOTE_STREAM));
                        layout = new LayoutMetadata();
                        layout.left = 0;
                        layout.bottom = 0;
                        layout.percentWidth = 50;
                        layout.percentHeight = 50;
                        mediaElement2.addMetadata(LayoutMetadata.LAYOUT_NAMESPACE, layout);
                        parallelElement.addChild(mediaElement2);

                        var mediaElement3:MediaElement = new VideoElement(new URLResource(REMOTE_STREAM));
                        layout = new LayoutMetadata();
                        layout.right = 0;
                        layout.top = 0;
                        layout.percentWidth = 50;
                        layout.percentHeight = 50;
                        mediaElement3.addMetadata(LayoutMetadata.LAYOUT_NAMESPACE, layout);
                        parallelElement.addChild(mediaElement3);

                        var mediaElement4:MediaElement = new VideoElement(new URLResource(REMOTE_PROGRESSIVE2));
                        layout = new LayoutMetadata();
                        layout.right = 0;
                        layout.bottom = 0;
                        layout.percentWidth = 50;
                        layout.percentHeight = 50;
                        mediaElement4.addMetadata(LayoutMetadata.LAYOUT_NAMESPACE, layout);
                        parallelElement.addChild(mediaElement4);

                        return parallelElement; 
```

试试这个，您将获得 4 视频播放或下载示例并使用 FlashBuilder 运行项目。

# image - 选择像素的 4 个相邻像素

> ID：14771631
> 
> 赞同：-12
> 
> 时间：2013-02-08T11:33:36.820
> 
> 标签：image, matlab, pixels, neighbours

如何在 中选择像素的 4 个邻居`matlab`？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T11:37:58.853

如果图像是`img`并且当前像素索引是`i`和`j`，那么四个邻居将是：

```
img(i-1,j);
img(i+1,j);
img(i,j-1);
img(i,j+1); 
```

# ios - 分组 UITableView - 在界面构建器中删除“原型单元格”标题

> ID：14771638
> 
> 赞同：2
> 
> 时间：2013-02-08T11:34:03.930
> 
> 标签：ios, uitableview, interface-builder

我在 IB 的视图控制器上放置了一个 UITableView，使用 2 个原型单元格和“分组”样式。表格中只会有 2 个单元格，并且没有组标题，所以我想将表格视图控件的高度调整为足够高以容纳 2 行（每行高度 29），这样我就有空间容纳我的其他控制VC。问题是，当我在 IB 中调整表格的高度时，它总是在底部缩小并保留“原型单元”标签。这意味着要获得正确的高度和位置，我必须失去对单元设计的可见性 - 请参见屏幕截图：

![在此处输入图像描述](../Images/283333c201fdd0bcec2e21a6c90bee3a.png)

无论如何要关闭“原型单元”组标题标签，以便我可以调整控件的所见即所得样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:37:15.317

显示您的代码以及`UITableView`您在 VC 中实现的委托方法会更有用。无论如何，试试这个：将`@property`tableView 的标题设置为 nil，如果没有结果，请执行以下操作：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    return nil;
} 
```

希望这会奏效。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:44:57.263

可以将 uitableview 更改为静态而不是动态单元格。这允许您在布局编辑器中添加单元格。然后，您可以为单元格和内容制作 ioutlets。这样做的缺点是您必须使用 UITableViewController 作为根，这反过来又不允许您添加除单元格、页眉和页脚之外的任何其他内容。

您仍然可以将其余组件添加到单独的部分中，只需将单元格设置为背景以不可见。或者您可以加载控制器抓取视图并调整其大小并将其添加到另一个视图控制器视图。

# c++ - Qt5、lambda 和 vars 的范围

> ID：14771639
> 
> 赞同：1
> 
> 时间：2013-02-08T11:34:08.270
> 
> 标签：c++, c++11, lambda, qt5

我在 Qt5 中有一个 QLocalServer，它连接到`newConnection()`信号。

该信号调用此函数：

```
QLocalSocket *clientConnection = m_server->nextPendingConnection();
clientID++; // <--- declared in header
clientConnection->setProperty("ID", QVariant(clientID));

connect(clientConnection, &QLocalSocket::disconnected, [clientConnection](){
    qDebug() << "Client disconnected " << clientConnection->property("ID");
    clientConnection->deleteLater();
}); 
```

如果两个客户端（客户端 ID 1 和客户端 ID 2）一个接一个地连接，然后客户端 1 断开连接，那么 lambda 函数内部会发生什么？我的意思是，在第二个客户端连接后， 的值会发生什么`clientConnection`？它会被覆盖（因此`clientConnection`第一个客户端将不再有效）还是每个都有有效数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:01:19.287

lambda 闭包类型的每个实例都有自己的存储，用于存储按值捕获的成员。

```
int i = 1;
auto l1 = [i]() { return i; };    // captures 1
i = 2;
auto l2 = [i]() { return i; };    // captures 2
l1();    // returns 1
l2();    // returns 2 
```

# c# - 根据员工编号填充网格视图，使某些字段位于第一行，某些字段位于第二行，依此类推

> ID：14771641
> 
> 赞同：0
> 
> 时间：2013-02-08T11:34:16.920
> 
> 标签：c#, asp.net, sql, oracle, gridview

我有一个 Oracle Oledb 数据库表，它是员工的 Master，其中包含姓名、年龄、性别以及员工及其家属的关系。当我传递员工编号时，我想在 gridview 或任何其他合适的控件中创建一个单独的行，即员工及其家属。可能吗..？？

**例如**，如果员工姓名是 abc，他的父亲 xyz，母亲 pqr，那么它应该显示为

```
name age      relation

abc  his age    self

xyz  his age    father

pqr  her age   mother 
```

请注意所有这些都在表格中的一行中，我现在希望它们在单独的行中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:58:53.600

虽然我同意那些敦促你尽可能将查询分成多行的观点，但有一种方法可以做你想做的事。虽然您没有提到任何需要使用“合适的控件”来编辑行，但这个解决方案可以 - 通过一些工作 - 允许您这样做。

使用 a`DataList`甚至 a`Repeater`并在您的`ItemTemplate`:

```
 <asp:DataList runat="server" RepeatLayout="Table" ExtractTemplateRows="true">
     <HeaderTemplate>
          <asp:Table runat="server">
              <asp:TableRow runat="server">
                  <asp:TableCell runat="server">
                      Name
                  </asp:TableCell>
                  <!--- etc -->
              </asp:TableRow>
          </asp:Table>
      </HeaderTemplate>
      <ItemTemplate>
        <asp:Table runat="server">
            <asp:TableRow runat="server">
                <asp:TableCell><asp:Label id="lblName1" runat="server" /></asp:TableCell>
                <!-- etc. -->
            </asp:TableRow>
            <asp:TableRow runat="server">
                <asp:TableCell><asp:Label id="lblName2" runat="server" /></asp:TableCell>
                <!-- etc. -->
            </asp:TableRow>
            <asp:TableRow runat="server">
                <asp:TableCell><asp:Label id="lblName3" runat="server" /></asp:TableCell>
                <!-- etc. -->
            </asp:TableRow>          
        </asp:Table>
     </ItemTemplate>
  </asp:DataList> 
```

在运行时，表行将从内部表中提取并合并到一个表中。您甚至可以设置命令按钮（可能在具有 rowspan="3" 属性的一行中），这样您就可以拥有类似于三行网格的外观和工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T14:47:23.037

听起来像是一个设计糟糕的数据库。您的员工应该在一个表中，他的家属应该在一个与其员工 ID 相关的表中。那么做你想做的事情就很简单了。

# ruby - 在 `if...end` 语句中使用时，`gets` 不起作用

> ID：14771643
> 
> 赞同：0
> 
> 时间：2013-02-08T11:34:23.557
> 
> 标签：ruby

我想找到一种方法让我的脚本等到用户点击 ENTER，同时使用`if...end`

```
input = 3

if input > 2    
    puts "input is greater than 2"
    gets
    puts "this shouldn't appear before I type ENTER"
end 
```

这不起作用，因为我得到

```
$input is greater than 2
$this shouldn't appear before I type ENTER 
```

我应该用什么代替`gets`暂停脚本？

感谢您的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:40:42.787

尝试替换`gets`为`$stdin.gets`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:39:41.043

它对我有用，您确定要从控制台读取吗？

```
input = 3

if input > 2    
    puts "input is greater than 2"
    puts "please enter your name"
    name = gets
    puts "hi #{name} this shouldn't appear before I type ENTER"
end 
```

o/p

```
~/Desktop$ ruby demo.rb
input is greater than 2
please enter your name
salil
hi salil
 this shouldn't appear before I type ENTER 
```

# spring - Http 入站网关：返回 HttpStatus

> ID：14771644
> 
> 赞同：4
> 
> 时间：2013-02-08T11:34:25.803
> 
> 标签：spring, spring-integration

我有一个 spring 集成 http 入站网关。我想在不同的使用情况下返回特定的 http 状态代码。**有没有办法在响应中指定httpStatus？？？**

我尝试使用**异常类型的路由器，其中每个异常都是特定的 http 状态代码**，但我不知道如何在响应中设置状态代码，并且在文档中找不到任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T14:00:13.807

用户 a `<header-enricher/>`（或其他方式）将状态放在`org.springframework.integration.http.HttpHeaders.STATUS_CODE`回复消息的标题中。（标题名称是`"http_statusCode"`但通常建议使用常量）。

该代码可以是一个`HttpStatus`对象，也可以是带有您要返回的状态代码的整数/字符串。

请打开“文档”JIRA 问题[https://jira.springsource.org/browse/INT](https://jira.springsource.org/browse/INT)

# javascript - 按时间间隔链接相似的元素修改

> ID：14771647
> 
> 赞同：0
> 
> 时间：2013-02-08T11:34:31.530
> 
> 标签：javascript, jquery, loops, setinterval, queuing

我的 html 代码中有一个给定的 p 元素列表。在页面加载时，我尝试`<p>`按给定的时间间隔（1 秒）对每个元素的内容的修改进行排队。

**给定html：**

```
<p>I want to change first!</p>
<p>I want too!</p>
<p>Me 3rd !</p>
<p>Hey, don't forget me!</p> 
```

**的CSS：**

```
p { padding: 2px 5px 0px 10px; }
.p { color: #999; }
.green { color:green; border-bottom: 1px solid #888; background: #EEE; } 
```

**既然我想链接修改，那么 JS 应该是什么。**字面意思：第一个p句要先修改CSS/HTML，1秒后第2行替换，1秒后第3行，4秒后第4行，以此类推。

```
$("p").ready(function(){
    setInterval(function () {
        $('p').text('aaaahhhhh.... happy!')
    }, 1000);
  }); 
```

[那是失败（小提琴）](http://jsfiddle.net/hugolpz/gT3Ue/4/)。

**我做错了什么？我应该使用 for 循环 each() 而不是 selector + setInterval 吗？请转发关键字，以便我可以挖掘相关文档。小提琴欣赏**~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:52:24.863

试试这个

```
$(document).ready(function(){
    var st=null;
    var i=0;
    st=setInterval(function () {
        $('p').eq(i).text('aaaahhhhh.... happy!'); 
        if(i==$('p').length-1)// one less because i initialised by 0.
            clearTimeout(st);
        i++
    }, 1000);
}); 
```

在此处查看现场演示[http://jsfiddle.net/gT3Ue/14/](http://jsfiddle.net/gT3Ue/14/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:01:41.267

```
(function next($set, i) {
  setTimeout(function () {
    $set.eq(i).text('aaaahhhhh.... happy!');
    if (i < $set.length - 1) {
      next($set, i + 1); 
    }  
  }, 1000);
//    /\
//    ||------ the delay
}($('p'), 0));
//  /\    /\
//  ||    ||-- the starting index
//  ||----- -- your set of elements 
```

**演示**：http: [//jsbin.com/otevif/1/](http://jsbin.com/otevif/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T11:35:18.617

您的时间间隔正在使用 append 而不是 text 来查看效果。`document.ready`不使用`$("p").ready`

**[现场演示](http://jsfiddle.net/rajaadil/gT3Ue/6/)**

```
$(document).ready(function(){
    setInterval(function () {
        $('p').append('aaaahhhhh.... happy!')
    }, 1000);
  }); 
```

**[现场演示](http://jsfiddle.net/rajaadil/gT3Ue/13/)**

```
 i = 0;
$(document).ready(function () {
    div1 = $('#div1');
    parry = $("p");
    setInterval(function () {
        div1.append(parry.eq(i++).text() + '<br />')
        if (i > 3) i = 0;
    }, 400);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T13:47:24.717

```
 function modifyTargetDeferred(target) {
        target.first().text('ahhh... happy');
        if (target.length > 1) {
            setTimeout(function() {
                modifyTargetDeferred(target.not(':first'));
            }, 1000);
        }
    }

    setTimeout(function() {
        modifyTargetDeferred($('p'));
    }, 1000); 
```

# ubuntu - 我在 Ubuntu 中的代码消耗的能量

> ID：14771654
> 
> 赞同：1
> 
> 时间：2013-02-08T11:34:48.457
> 
> 标签：ubuntu, energy

我在 Ubuntu 中使用某种功能，我想知道它们是如何消耗能量的，但我还没有找到一个好的工具，或者至少让它运行。我尝试过：

*   [英特尔能源检查器](http://software.intel.com/en-us/articles/intel-energy-checker-sdk)。但我不能让它运行，我在 productivy_link.h 中有一些错误，我没有接触这个文件，只下载它。
*   [PowerTOP](https://01.org/powertop/)这个工具可以工作，但你只能看到电池的放电率，这不是很“准确”，因为操作系统的某些进程可以自动执行。

有人可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:58:15.307

你检查了`pwrkap`吗？您可以使用（也可以）安装它`gui`：

```
sudo apt-get install pwrkap pwrkap-gui 
```

您还可以查看此链接：[powerstat：Ubuntu Linux 的功耗计算器](http://www.hecticgeek.com/2012/02/powerstat-power-calculator-ubuntu-linux/)

# php - 使用codeigniter中的活动记录来自mysql的复杂数据集

> ID：14771655
> 
> 赞同：0
> 
> 时间：2013-02-08T11:34:48.567
> 
> 标签：php, arrays, codeigniter, activerecord

我正在生成发票生成应用程序。在那，我有一个表，其中存储带有买方和invoice_no标志的发票的各个项目。这些标志帮助我从行中获取聚合发票构造。这是功能：

```
public function invoice_get()
{
    $data=array();

    $this->db->group_by('invoice_no');
    $this->db->order_by('invoice_no','asc');
    $Q=$this->db->get('sales');
    echo $Q->num_rows();
    if($Q->num_rows()>0)
    {
        foreach($Q->result_array() as $row)
        {

            if(!isset($data[$row['invoice_no']]))
            {
                $data[$row['invoice_no']]['date']=$row['date'];
                $this->db->where('id',$row['buyer']);
                $q=$this->db->get('ledgers');
                $data[$row['invoice_no']]['buyer']=$q->row();
            }
            else
            {
                $this->db->where('id',$row['item_id']);
                $i=$this->db->get('inventory');
                $data[$row['invoice_no']]['items'][$row['item_id']]=$i->row();

            }

        }
        print_r($data);
        //$this->response($data);
    }

} 
```

问题是我没有得到项目详细信息可能是什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:27:03.563

```
$i = 1; 
foreach ($q->result_array() as $row){

$data[$row['invoice_number']]['date'] = $row['date'];
$data[$row['invoice_number']]['buyer']['id'] = $row['id'];
$data[$row['invoice_number']]['item'][$i]['name'] = $row['name'];
$data[$row['invoice_number']]['item'][$i]['description'] = $row['description']; 
//and more if you want to add....
$i++;

} 
```

这应该会给你想要的结果。

# c# - C# 自定义属性可以指定它所应用的方法类型吗？

> ID：14771656
> 
> 赞同：1
> 
> 时间：2013-02-08T11:34:50.687
> 
> 标签：c#, custom-attributes, compile-time

我知道我可以`[AttributeUsage(AttributeTargets.Method)]`用来确保自定义属性只能应用于方法，但是如果自定义属性应用于具有我指定的签名以外的签名的方法，我可以更进一步并得到编译时错误吗？

例如，我可以创建一个只能附加到返回`int`并采用单个`int`参数的方法的属性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:37:06.290

> 但是，如果将自定义属性应用于签名不是我指定的签名的方法，我可以更进一步并获得编译时错误吗？

不，你不能，这根本不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:48:19.223

您不能这样做，但您有一个解决方法：.NET Framework 支持方法的输入参数和返回值的属性。

```
[MyAttribute1]
[return: MyAttribute2]
public int Method([MyAttribute3] int some)
{
    return "";
} 
```

如果方法具有`MyAttribute1`,`MyAttribute2`和，则检查方法的代码可以执行操作`MyAttribute3`。

根据您的需要，也许这太丑陋了，但我不知道您的实际要求！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:57:07.053

您可以在编译期间使用 PostSharp 应用属性。[此链接演示自动添加 DataContract 和 DataMember 属性](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/fa546b6c-9107-4d5f-b921-b93ead7c42a7.htm)

# android - android中的android浏览器意图后退按钮？

> ID：14771659
> 
> 赞同：0
> 
> 时间：2013-02-08T11:34:56.013
> 
> 标签：android, android-intent, back-button-control

我是安卓新手。我正在使用使用 Intent.its 的浏览器工作正常，但是当我单击设备应用程序退出上的后退按钮时遇到问题。单击后退按钮时如何转到上一个应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:43:43.837

尝试这个：

```
 @Override
    public void onBackPressed() {
        super.onBackPressed();
    Intent signup_intent = new Intent(ActivityB.this, ActivityA.class);
    startActivity(signup_intent);
    } 
```

//onClick ActivityB 中的 Back 按钮把它带到 ActivityA

# ios - 我对 Obj-c 委托做错了什么

> ID：14771660
> 
> 赞同：0
> 
> 时间：2013-02-08T11:35:03.457
> 
> 标签：ios, objective-c

我在 firstViewController 中的 Xcode 中创建了一个新的选项卡式视图项目我创建了一个这样的协议

```
@protocol myProtocol <NSObject>
-(void)myProtocolMethodOne;
@end

@interface FirstViewController : UIViewController

@property (weak) id<myProtocol> mypDelegate;

- (IBAction)button1Tap:(id)sender;

@end 
```

在 .m 文件中我做了这个

```
@synthesize mypDelegate;
.
.
.
- (IBAction)button1Tap:(id)sender
{
    [mypDelegate myProtocolMethodOne];
} 
```

这是 secondViewController .h 文件

```
@interface SecondViewController : UIViewController <myProtocol>

@property (strong) FirstViewController *fvc;

@end 
```

这是 .m 文件

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Second", @"Second");
        self.tabBarItem.image = [UIImage imageNamed:@"second"];
        _fvc = [[FirstViewController alloc]init];
        [_fvc setMypDelegate:self];
    }
    return self;
}

-(void)myProtocolMethodOne
{
    NSLog(@"2nd VC");
    [[self tabBarItem]setBadgeValue:@"ok"];
} 
```

myProtocolMethodOne 不工作，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:40:43.927

```
_fvc = [[FirstViewController alloc]init];
[_fvc setMypDelegate:self]; 
```

您正在将委托设置为全新的`FirstViewController`，但不是触发您的方法的委托`- (IBAction)button1Tap:(id)sender`

当你在你的 2 个视图控制器之间进行转换时，你必须传递你的委托，例如在你做的`- prepareForSegue:`时候或当你做的时候`[self.navigationController pushViewController:vc animated:YES]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:44:31.033

[这是学习协议基础知识的最佳源代码站点。](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)

////// .h 文件

```
#import <Foundation/Foundation.h>

@protocol myProtocol <NSObject>

@required

-(void)myProtocolMethodOne;

@end

@interface FirstViewController : UIViewController
{
    id <myProtocol> mypDelegate;
}

@property (retain) id mypDelegate;

- (IBAction)button1Tap:(id)sender;

@end 
```

///////// .m 文件

```
@synthesize mypDelegate;
.
.
.
.
- (void)processComplete
{
    [[self mypDelegate] myProtocolMethodOne];
} 
```

# java - 在确保执行的所有测试之前和之后运行代码

> ID：14771668
> 
> 赞同：7
> 
> 时间：2013-02-08T11:35:38.037
> 
> 标签：java, junit, maven-surefire-plugin, grizzly

我有一只灰熊`HttpServer`，我想在整个测试组执行期间运行它。此外，我想从`@Rule`测试本身内部与全局 HttpServer 实例进行交互。

由于我使用的是 Maven Surefire 而不是 JUnit 测试套件，因此我不能在测试套件本身上使用`@BeforeClass`/ 。`@AfterClass`

现在，我能想到的只是懒惰地初始化一个静态字段并停止服务器`Runtime.addShutdownHook()`——不好！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T12:33:29.530

有两种选择，一个 Maven 解决方案和一个万无一失的解决方案。耦合最少的解决方案是在`pre-integration-test`and`post-integration-test`阶段执行插件。请参阅[构建生命周期简介 - 生命周期参考](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)。我不熟悉 grizzly，但这里有一个使用码头的例子：

```
 <build>
  <plugins>
   <plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>maven-jetty-plugin</artifactId>
    <configuration>
     <contextPath>/xxx</contextPath>
    </configuration>
    <executions>
     <execution>
      <id>start-jetty</id>
      <phase>pre-integration-test</phase>
      <goals>
       <goal>run</goal>
      </goals>
      <configuration>
      </configuration>
     </execution>
     <execution>
      <id>stop-jetty</id>
      <phase>post-integration-test</phase>
      <goals>
       <goal>stop</goal>
      </goals>
     </execution>
    </executions>
   </plugin> 
```

注意`start`is`pre-integration-test`和`stop`is的相位`post-integration-test`。我不确定是否有 grizzly maven 插件，但您可以改用[maven-antrun-plugin](http://maven.apache.org/plugins/maven-antrun-plugin/)。

第二个选项是使用 JUnit [RunListener](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/runner/notification/RunListener.java)。`RunListener`监听测试事件，如测试开始、测试结束、测试失败、测试成功等。

```
public class RunListener {
    public void testRunStarted(Description description) throws Exception {}
    public void testRunFinished(Result result) throws Exception {}
    public void testStarted(Description description) throws Exception {}
    public void testFinished(Description description) throws Exception {}
    public void testFailure(Failure failure) throws Exception {}
    public void testAssumptionFailure(Failure failure) {}
    public void testIgnored(Description description) throws Exception {}
} 
```

所以你可以听 RunStarted 和 RunFinished。这些将启动/停止您想要的服务。然后，在万无一失的情况下，您可以指定一个自定义侦听器，使用：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <version>2.10</version>
  <configuration>
    <properties>
      <property>
        <name>listener</name>
        <value>com.mycompany.MyResultListener,com.mycompany.MyResultListener2</value>
      </property>
    </properties>
  </configuration>
</plugin> 
```

这来自[Maven Surefire 插件，使用 JUnit，使用自定义侦听器和报告器](http://maven.apache.org/surefire/maven-surefire-plugin/examples/junit.html#Using_custom_listeners_and_reporters)

# google-fusion-tables - 链接融合表可视化，提供对融合表的搜索

> ID：14771678
> 
> 赞同：0
> 
> 时间：2013-02-08T11:36:47.567
> 
> 标签：google-fusion-tables

所以我在谷歌网站上有几个不同的融合表可视化：

[https://sites.google.com/site/hlsbeta123123123123/](https://sites.google.com/site/hlsbeta123123123123/)

I am wondering if there is a way to link them so that when a pin in the map is selected the corresponding card is shown in the other iframe?

我真正想做的是通过谷歌网站为人们提供对融合表的搜索，这样当有人在网站搜索中搜索时，他们会得到地图和卡片中的点击列表，并将它们全部链接在一起......有什么简单的方法可以通过配对可视化来做到这一点，或者这必须是建立在 fusiontables API 上的自定义站点吗？

我知道融合表向导：

[http://fusion-tables-api-samples.googlecode.com/svn/trunk/FusionTablesLayerWizard/src/index.html](http://fusion-tables-api-samples.googlecode.com/svn/trunk/FusionTablesLayerWizard/src/index.html)

可以为单个可视化提供类似的东西，但不清楚链接多个可视化 - 也许这完全不切实际......

非常感谢 干杯> SAM

ps 这是当前的屏幕截图，以防网站发生变化:-)

![在此处输入图像描述](../Images/c8a44991acec419a518fdb5924e9c6c1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:58:26.377

这是可能的，但是您必须自己创建地图而不是 iframe-map 才能修改默认行为（单击时打开 infoWindow 并加载过滤后的卡片）。

这并不难，您将获得的大部分 src`map->publish->get HTML and javascript`

你所要做的就是：

1.  抑制 infoWindows（将`suppressInfoWindows`图层的 -option 设置为 true）
2.  观察图层的点击事件并根据唯一的颜色加载卡片（`Charity Number`似乎是唯一的）

```
    google.maps.event.addListener(layerl0, 'click',function(e){
       document.getElementById('cards')//iframe-element
        .src='https://www.google.com/fusiontables/embedviz?viz=CARD&q=select+*+from+1ZnLJPfdXgiD49s3JO9Vyhf0VPGgBnzs-985jT3s+where+col1+%3D+'+e.row['慈善编号'].value+' &tmplt=4&cpr=1';
      });
```

演示：http: [**//jsfiddle.net/doktormolle/YVnus/**](http://jsfiddle.net/doktormolle/YVnus/)

但实际上在 iframe 中显示卡片会强制执行冗余请求，相反，您可以获取 infoWindow 的内容并将它们直接插入到页面中。

# c# - WCF 多个服务在同一个配置中的同一个合同

> ID：14771686
> 
> 赞同：2
> 
> 时间：2013-02-08T11:37:13.580
> 
> 标签：c#, wcf, rest

我试图托管同一合同的不同服务实现：

![模型](../Images/767a6054f0dbd074e17f424a6ef3995b.png)

原因是需要一个虚拟实现来进行外部测试。

我试图将两者都托管在同一个 WindowsService 中：

```
 private ServiceHost _host;
    private ServiceHost _dummy;
    protected override void OnStart(string[] args)
    {
        _host = new ServiceHost(typeof(Service));
        _host.Open();

 //trying to avoid the app.config beeing used - because its already been hoste by _host
        _dummy = new ServiceHost(typeof(TestDummyService));
        _dummy.Description.Endpoints.Clear();
        _dummy.AddServiceEndpoint(typeof(IService), 
                                   new WebHttpBinding(),
                                  @"<link>/Dummy.svc/");
        _dummy.ChannelDispatchers.Clear();
        _dummy.Open();
     } 
```

这是配置文件：

```
 <system.serviceModel>
    <services>
      <service name="namespace.Service">
        <host>
          <baseAddresses>
            <add baseAddress="<link>/Service.svc"/>
          </baseAddresses>
        </host>
        <endpoint address="" 
                  binding="webHttpBinding" 
                  contract="namespace.IService" 
                  behaviorConfiguration="web" />

        <endpoint address="/mex" 
                  binding="mexHttpBinding" 
                  contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors >
        <behavior>
          <serviceMetadata httpGetEnabled="true"
                           httpGetUrl="<link>/Service.svc/About" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name ="web">
          <webHttp />         
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel> 
```

/Service.svc/About 中带有合同“IHttpGetHelpPageAndMetadataContract”的 ChannelDispatcher 无法打开。

任何帮助表示赞赏。

`IService`更新 1 我的目标是在一个 WindowsService 中托管同一合约 ( ) 的 2 个不同实现。

我还想在配置文件中配置它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:23:59.630

那么我想知道什么是业务场景。我猜是，客户端不应该知道实现，它只是服务的 URL 会指示（或路由）到实现。

请澄清。

* * *

参考这个现有[的帖子](https://stackoverflow.com/questions/9567810/single-endpoint-with-multiple-service-contracts)，让我知道它是否有意义。

* * *

上面的帖子暗示了实现，请参阅这篇[帖子](http://hectorcorrea.com/blog/multiple-endpoints-for-a-wcf-service)了解部署细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:19:03.627

所以我发现，即使 testdummy 服务以编程方式添加，它仍然得到服务元数据行为。

我的解决方案是不使行为默认 - 在名称中给出：

应用程序配置：

```
<service name="namespace.Service" behaviorConfiguration="someName"> 
```

//.. 之后：

```
 <behavior name="someName">
      <serviceMetadata httpGetEnabled="true"
                       httpGetUrl="<link>/Service.svc/About" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior> 
```

其余的代码，声明相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:30:54.330

您不能添加另一个端点并使用不同的名称填写地址：

```
<endpoint address="/SecondService" 
              binding="webHttpBinding2" 
              contract="namespace.IService" 
               /> 
```

网址变为 /Service.svc/SecondService

# php - shell 命令用 php exec 中止，但直接在 shell 中完美运行（没有内存问题）

> ID：14771691
> 
> 赞同：0
> 
> 时间：2013-02-08T11:37:21.293
> 
> 标签：php, bash, shell, exec

我正在尝试通过 php exec 执行 shell 脚本：

```
gs -sDEVICE=png16m -dNOPAUSE -dGraphicsAlphaBits=4  -dDOINTERPOLATE  -dTextAlphaBits=4 -sOutputFile=%03d.png -r300 ../mydpf.pdf  -dFirstPage=2 -dBATCH -quit; 
```

如果我在 shell 中运行它，它会正常完成，但如果我使用 web 上的 php exec 运行它，它会在处理 16 个页面后停止并且没有错误。这是输出：

```
GPL Ghostscript 9.06 (2012-08-08)
Copyright (C) 2012 Artifex Software, Inc.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Processing pages 2 through 44.
Page 2
Page 3
Page 4
Page 5
Page 6
Page 7
Page 8
Page 9
Page 10
Page 11
Page 12
Page 13
Page 14
Page 15
Page 16
Page 17 
```

在 PHP 文件中，我有：

```
ini_set('memory_limit', '1024M');
ini_set('max_execution_time', '18000'); 
```

所以这不是内存/执行时间问题。你能帮我吗？可能是什么，停止了脚本？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:44:37.227

使用 shell_exec 可以查看返回的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-28T14:15:41.723

我遇到了同样的问题，这是我的解决方法，希望对您有所帮助：

创建一个 bash shell 脚本，在其中使用参数调用 gs，然后使用 PHP exec() 运行 sh 脚本。

# visual-studio - 在 xaml 设计器下从源绑定数据

> ID：14771695
> 
> 赞同：0
> 
> 时间：2013-02-08T11:37:37.030
> 
> 标签：visual-studio, xaml, windows-8

我正在为我的 Windows 8 应用程序中的一个页面布局使用拆分页面视图。如果我在调试模式下运行应用程序，则会加载源详细信息并且一切正常。

但是，在我的 XAML 设计器视图中，我无法使用 d:Source 和 d:DataContext 将数据绑定到视图，即使我已经定义了 xmlns:data 源。

我得到的错误如下：名称“MyDataSource”在命名空间“using:MyApp.Data”中不存在

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:01:56.467

我最终想通了。菜鸟的错误，我用的不正确`namespace`。而不是`MyApp.Data`，我只`MyData`用于定义源文件`namespace`模型。

# session - 我希望我的 Domino Servlet 获得经过身份验证的用户会话

> ID：14771700
> 
> 赞同：2
> 
> 时间：2013-02-08T11:37:47.513
> 
> 标签：session, servlets, xpages, lotus-domino, xpages-extlib

这似乎是一个非常基本的问题，在托管在 Domino 上的正在运行的 Servlet 中，我想访问我使用 IBM Notes 和 Domino 的非常好的安全性明智地保护的 Domino 资源。

我希望 Servlet 能够在 Domino 中读取和写入数据，同时保留来自调用 Servlet（或 xAgent）的客户端的数据，并防止客户端直接写入。

我很高兴能够获得代表应用程序签名者的会话。我可以通过使用 ?open&login 调用 Servlet 并登录来获得注册用户的会话。这是不切实际的。

我看过这里：[如何在从 XPage 调用的 Java Bean 中使用 SessionAsSigner？](https://stackoverflow.com/questions/11401862/how-can-you-use-sessionassigner-in-a-java-bean-called-from-an-xpage)其中 Mark Leusink ( [https://stackoverflow.com/users/1177870/mark-leusink](https://stackoverflow.com/users/1177870/mark-leusink) ) 暗示可以使用 ExtLib 的 getCurrentSessionAsSigner()。我已经尝试过了，使用单个用户 ID 对整个应用程序进行了签名，并且它不返回会话。答案似乎在于 Servlet 无法获取 FacesContext 对象。

感觉答案应该很明显，但对我来说不是。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:50:42.027

`FacesContext`是*JSF*的东西，可以从 XAgent (=XPage) 中使用。

在 servlet 中，您可以这样做：

```
Session session = NotesFactory.createSession(null, "user", "password"); 
```

服务器 ID 通常没有密码，这样做将使用服务器 ID：

```
Session session = NotesFactory.createSession(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T16:10:10.530

检查 OpenNTF 上的 WebDav 项目的源代码。它有你需要的所有代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T16:03:21.110

原来的问题有很多很好的答案。非常感谢。

我建议使用的解决方案是将我拥有的代码移植到 OSGi 插件。NSF 上下文中的 java 代码/Servlet 似乎受到安全控制的约束，当相同的代码在 OSGi 上下文中运行时，这些安全控制就会放松。编码：

```
try {
NotesThread.sinitThread();
Session s = NotesFactory.createSession("","<my username>","<my password>");
.....
session = null;
} catch (Exception e) {
} finally {
NotesThread.stermThread();
} 
```

在 OSGI 上下文中运行良好，但在 NSF 产品中运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:07:18.570

Jason - 我假设您基本上想要与运行 Web 查询保存代理相同的功能，如果您没有选择作为 Web 用户选择运行，换句话说，作为代码的签名者。

您可以尝试设置一个互联网站点规则，以允许对您想要使用的特定应用程序路径进行基本身份验证 - 可能值得为此使用子域。

然后在 Servlet 中调用此 URL，同时设置基本授权参数（用户名和密码）。

像这样的东西。

```
URL url = new URL(URL_TO_CALL);
String authStr = "USERNAME:PASSWORD";
String authEncoded = Base64.encodeBytes(authStr.getBytes());
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setRequestMethod("GET");
connection.setDoOutput(true);
connection.setRequestProperty("Authorization", "Basic " + authEncoded);
InputStream is = connection.getInputStream(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T12:04:28.933

com.ibm.domino.osgi.core.context.ContextInfo.getUserSession()

# ajax - ModelState.IsValid 它是否适用于 ajax 调用？

> ID：14771701
> 
> 赞同：0
> 
> 时间：2013-02-08T11:37:48.590
> 
> 标签：ajax, validation, asp.net-mvc-4

该模型 ：

```
public class ChangePasswordModel
{
    //User profile key
    public string UserName { get; set; }

    [Required(ErrorMessage = " Please Enter Current Password ")]
    public string OldPassword { get; set; }

    [Required(ErrorMessage = " Please Enter a New Password ")]
    [StringLength(20, MinimumLength = 6, ErrorMessage = "The {0} must be at least {2} and no longer then {1} characters long.")]
    public string NewPassword { get; set; }

    [Required(ErrorMessage = " Please Re-enter a New Password ")]
    [MustBeValidator(MustBeValidator.Condition.EqualTo, "newpassword", ErrorMessage = "Please, confirm password")]
    public string ReNewPassword { get; set; } 
} 
```

对安全 apicontroller 的 ajax 调用：

```
 [System.Web.Mvc.HttpPost]
    public ActionResult ChangePassword(ChangePasswordModel change)
    {

        if (!ModelState.IsValid)
        { 
```

问题是，即使“ReNewPassword”的“NewPassword”差异我得到 ModelState.IsValid = true

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:41:27.340

我不知道它`MustBeValidator`是什么，但您可以尝试在 ASP.NET MVC 3 中使用标准属性：

```
[Required(ErrorMessage = " Please Re-enter a New Password ")]
[Compare("NewPassword", ErrorMessage = "Please, confirm password")]
public string ReNewPassword { get; set; } 
```

# solr - Solr 正则表达式搜索不正确的结果

> ID：14771703
> 
> 赞同：0
> 
> 时间：2013-02-08T11:37:58.503
> 
> 标签：solr

我正在使用 Solr 4.1 并尝试使用 Query 的正则表达式模式。样本数据为

```
56% AB, 78% DC
65% AB, 55% IJ
70% AB, 35% LJ 
```

我正在尝试这种模式`/([1-6][0-9]% AB)/`，这不起作用所以我尝试了

```
/([1-6][1-9])??AB/ 
```

它显示了以上所有内容，因为它在应用模式时没有使用 AND 运算符，并且它正在为每个字符应用 OR 运算符。例如：以下结果也会出现

```
77% DD, 89% FF 
```

有人用 Solr 4.0 及更高版本尝试过正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T23:55:00.980

如果您的字段是`string`类型，您可以尝试： `/[1-6][0-9]. AB.*/`

（我在一个字段上尝试了相同的正则表达式搜索`text`，但它不匹配，很可能是因为标记化。）

我知道这比您要寻找的匹配更松散，因为它将匹配第三个位置的任何字符，但是 Solr REST API 不喜欢正则表达式中的 % 。（我不确定 SolrJ 或其他客户端库是否可以处理。）话虽如此，这种模式绝对应该排除

`77% DD, 89% FF`

也许你需要的一切。

**更新**

这是您问题的精确解决方案。对 % (%25) 和空格 (%20) 使用百分比编码，您将得到您正在寻找的内容。

`/[1-6][0-9]%25%20AB.*/`

# html - 如何在小屏幕上交换 Skeleton CSS Grid 中的侧边栏？

> ID：14771706
> 
> 赞同：0
> 
> 时间：2013-02-08T11:38:00.147
> 
> 标签：html, css, responsive-design, skeleton-css-boilerplate

我是使用 Skeleton CSS 网格的新手，所以请原谅我的无知！

我的问题起初看起来很简单，但它让我有点难过。

例如，我有一个网站，其左侧栏侧边栏为 4 栏宽，右侧栏内容区域跨越 12 栏。像这样的东西：

![具有左侧边栏和右侧内容区域的布局示例](../Images/2679ce3750fdc0149b8ad4c842e682ce.png)

在较小的屏幕尺寸上，侧边栏折叠到主要内容区域的顶部。这不是我想要的……由于较小尺寸的线性特性，我希望侧边栏出现在主要区域下方，以便在更多移动设备上“首先”显示内容。

Skeleton 的默认行为是将此侧边栏堆叠在主区域的顶部。

关于这个解决方案的任何想法？我是否可以使用负边距并在语义上调整标记以将侧边栏放置在主要区域下方？

谢谢，迈克尔。

# java - 如何解决 javax.servlet.ServletException: java.lang.UnsupportedClassVersionError？

> ID：14771710
> 
> 赞同：0
> 
> 时间：2013-02-08T11:38:16.800
> 
> 标签：java, macos, tomcat, servlets, ant

我已经将一个 Web 应用程序项目下载到我的 Mac OSX 10.8.2 上，并且我正在使用 Apache`ant`来编译它。当应用程序运行时，我收到此错误，尝试编译和执行 JSP：

```
javax.servlet.ServletException: java.lang.UnsupportedClassVersionError
Unsupported major.minor version 51.0 
```

我在网上搜索过这个问题，看来这个问题是由于编译版本与Java运行版本不同造成的。所有建议的解决方案都是“在 Eclipse 中设置编译器版本”，但我没有使用 Eclipse ......

这是我的环境：

```
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b06)
Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode) 
```

如何检查类文件的 ant 编译版本并解决此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:16:24.447

这个问题是因为你在较高版本的java上编译了代码，然后在较低版本的java上运行代码。通常，服务器附带他们自己的 JVM 版本。因此，查找服务器使用的 jvm 的一种方法是检查服务器的启动日志。它应该显示 jvm 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T05:04:25.747

UnsupportedClassVersionError 主要是因为运行和编译版本之间的java版本不匹配。

两个版本应该匹配以避免错误 GO 通过以下链接获取有关 ant 版本更改的更多详细信息。

[为什么 Ant 给我一个 Unsupported major.minor 版本错误](https://stackoverflow.com/questions/7073485/why-is-ant-giving-me-a-unsupported-major-minor-version-error)

# ghostscript - Ghostscript 和 pxlcolor：如何在生成的 PCL 中生成额外的 PJL 条目

> ID：14771711
> 
> 赞同：1
> 
> 时间：2013-02-08T11:38:19.987
> 
> 标签：ghostscript, printer-control-language, pjl

我必须在一个 PCL 文件中设置 Outbin，该文件是通过 Ghostscript 使用 device=pxlcolor 生成的。我正在寻找，但没有找到必要的参数。有人可以请教吗？我在 Windows 上的命令行是：

```
C:/Programme/gs/gs9.06/bin/gswin32c.exe -dBATCH -sDEVICE=pxlcolor -dFIXEDMEDIA -dMediaPosition=4 -dDuplex=true -sOutputFile=output.pcl -f Input.pdf 
```

这会生成一个 pcl 文件，该文件从正确的输入托盘/PaperSource 中获取纸张。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:27:34.357

没有这方面的规定，您必须在生成文件后手动添加这些。

# r - 在 Hmisc::latex 中转义 LaTeX 控制符号

> ID：14771714
> 
> 赞同：2
> 
> 时间：2013-02-08T11:38:25.770
> 
> 标签：r, latex, hmisc

我在 R 中有一个数据框，不幸的是其中有包含美元符号的字符串。当`latex()`包中的函数[`Hmisc`](http://cran.r-project.org/web/packages/Hmisc/index.html)将此数据帧转换为 LaTeX 表时，美元符号不会被转义。这使得 LaTeX 无法编译。从数据框中格式化值时，有没有办法在内部`Hmisc`转义美元符号？

之后我也无法对所有美元符号进行搜索和替换，因为它`Hmisc`本身为空单元格添加了美元符号。

最小的例子：

```
> latex("test$test",file="")
# returns:
\begin{table}[!tbp]
% [...]
test$test\tabularnewline
% [...]
\end{table}

# should return:
\begin{table}[!tbp]
% [...]
test\$test\tabularnewline
% [...]
\end{table} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T13:50:20.763

您可以查看该`latexTranslate`功能，来自`Hmisc`：

```
R> latexTranslate("3%")
[1] "3\\%" 
```

# character-encoding - sed 添加附加列

> ID：14771718
> 
> 赞同：0
> 
> 时间：2013-02-08T11:38:41.927
> 
> 标签：character-encoding, sed

我想在制表符分隔的文件中添加一列额外的列。该文件如下所示：

```
#> cat /tmp/myfile
Aal     Fisch_und_Fleisch
Aalsuppe        Fisch_und_Fleisch 
```

我想做的方式是通过 sed，匹配整行，将其与新列一起打印出来。但是，附加列写在行的中间而不是末尾：

```
#> cat /tmp/myfile | sed 's#^\(.*\)$#\1\t1#g'
Aal     1isch_und_Fleisch
Aalsuppe1       Fisch_und_Fleisch 
```

但是，当我对一些手动创建的行进行完整性检查时，它可以工作：

```
#> echo -e "aaaaaaaaaa\taaaaaaaaaaaa\nbbbbbbb\tbbbbbbbb" | sed 's#^\(.*\)$#\1\t1#g'
aaaaaaaaaa      aaaaaaaaaaaa 1
bbbbbbb bbbbbbbb        1 
```

我猜这可能是一个编码/换行问题，这`file`就是说：

```
#> file /tmp/myfile
/tmp/myfile: ASCII text, with CRLF line terminators 
```

如果是编码/换行问题，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:07:48.317

我无法重现您的确切问题，但以前见过类似的事情。本质上，CRLF 行尾会导致视觉显示的奇怪，因为 CR 部分，即回车，会导致光标移动到同一行的开头，而不是新行的开头。最简单的可能只是切换到 Unix 风格的结尾。

要切换到 Unix 风格的结尾，请使用以下之一

```
dos2unix
tr -d '\r' 
```

总的来说，像

```
cat /tmp/myfile | dos2unix | sed 's#^\(.*\)$#\1\t1#g' 
```

如果你需要切换回来，你可以使用`unix2dos`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:43:42.873

这可能对您有用（GNU sed）：

```
sed 's/$/\t1/' file 
```

# c# - 如何将值附加到 Excel 文件？

> ID：14771719
> 
> 赞同：1
> 
> 时间：2013-02-08T11:38:43.103
> 
> 标签：c#, excel, append

我知道这个问题已经很老了，但我没有找到任何答案。

如何将值附加到现有的 excel 文件和特定列中。

```
System.Data.OleDb.OleDbConnection MyConnection;
System.Data.OleDb.OleDbCommand myCommand = new System.Data.OleDb.OleDbCommand();
string sql = null;

MyConnection = new System.Data.OleDb.OleDbConnection("provider=Microsoft.Jet.OLEDB.4.0;Data Source=filelocation;Extended Properties=Excel 8.0;");

MyConnection.Open();
myCommand.Connection = MyConnection;

sql = "Insert into ["+ sheetname +"$] (Result) values ("+ result +")";
myCommand.CommandText = sql;
myCommand.ExecuteNonQuery();
MyConnection.Close(); 
```

我什至尝试了不同的方法，例如通过 C# 打开 Excel 并追加，但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:46:48.360

如果你不用`OLEDB` [这里](http://www.codeproject.com/Articles/5123/Opening-and-Navigating-Excel-with-C)有一篇好文章如何使用早期绑定操作excel文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T11:50:14.137

您可以查看以下链接

[http://www.aspsnippets.com/Articles/Export-Data-to-Excel-Sheet-using-ADO.Net-and-C.aspx](http://www.aspsnippets.com/Articles/Export-Data-to-Excel-Sheet-using-ADO.Net-and-C.aspx) [http://www.aspsnippets.com/Articles/Read-and-Import -Excel-Sheet-using-ADO.Net-and-C.aspx](http://www.aspsnippets.com/Articles/Read-and-Import-Excel-Sheet-using-ADO.Net-and-C.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:54:24.077

使用 OLEDB 处理 excel 文件有它的问题和缺点。最好使用第三方库。我推荐[CSharpJExcel](http://sourceforge.net/projects/jexcelapi/)用于 Excel 97-2003 (xls) 文件或[EPPlus](http://epplus.codeplex.com/)用于 Excel 2007 (xlsx) 文件。您甚至不需要安装 Microsoft Excel。

# c - 为什么 extern 声明应该在 .c 文件之外（根据 linux 编码风格）

> ID：14771722
> 
> 赞同：3
> 
> 时间：2013-02-08T11:38:47.387
> 
> 标签：c, linux, coding-style, linux-kernel, extern

根据 checkpatch.pl 脚本“extern 声明位于 .c 文件之外”（用于检查补丁是否符合编码风格） 注意：这完全可以正常工作，没有编译警告 通过将 extern 声明放在 .h 文件中解决了这个问题。

```
a.c
-----
int x;
...

b.c 
----
extern int x; 
```

==>检查补丁抱怨

```
a.h
-----
extern int x;

a.c
----
int x;

b.c
---- 
#include "a.h" 
```

==> 不抱怨

我想了解为什么这更好

我的猜测。理想情况下，将代码拆分为文件，以便将代码模块化（每个文件都是一个模块） 将模块导出的接口放在头文件中，以便其他模块（或.c文件）可以包含它们。因此，如果任何模块想要在外部公开一些变量，则必须在与该模块对应的头文件中添加一个 extern 声明。

同样，拥有与每个模块（.c 文件）对应的头文件似乎有很多头文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:13:28.437

将 ah 也包含在 ac 文件中会更好。这样，编译器可以验证声明和定义是否相互匹配。

```
a.h
-----
extern int x;

a.c
----
#include "a.h"  <<--- add this
int x;

b.c
---- 
#include "a.h" 
```

正如您所假设的，该规则的原因是我们应该使用编译器来检查我们在做什么。小细节要好得多。

如果我们在所有地方都允许外部声明，那么如果我们想更改`x`为其他类型，我们就会遇到麻烦。我们必须扫描多少个 .c 文件才能找到所有文件`extern int x`？很多。如果我们这样做，我们也可能会发现一些`extern char x`错误。哎呀！

只需在头文件中声明一个，并在需要的地方包含它，就可以为我们省去很多麻烦。在任何实际项目中，`x`无论如何都不会是头文件中的唯一元素，因此您不会节省文件数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:06:14.677

我看到两个原因：

1.  如果你共享一个变量，那是因为它不在你自己的文件中，所以你想通过将它添加到头文件来明确它是共享的`extern`- 这样，只有一个地方[包含目录]可以搜索`extern`声明.
2.  它避免了某人做出`extern`声明，然后其他人为同一事物做出不同的（如使用不同的类型或属性）extern 声明。至少如果它在头文件中[相关]，所有文件都使用相同的声明。
3.  如果您决定更改类型，则只有两个地方可以更改。如果您要添加一个也使用相同变量的“cc”文件，然后认为这`int`还不够好，我需要`long`，您必须修改所有三个位置，而不是像有包含在“ac”、“bc”和“cc”中的每个头文件。

为您的模块提供头文件绝对不是一个坏主意。但这当然是可以接受的，这取决于将其`extern`放入某些现有头文件的情况。

另一种选择（通常比使用 extern 更好）是使用 ,`getter function`为您获取变量。这样，变量可以在其自己的源文件中是静态的[没有“命名空间污染”，并且变量的类型也定义得更好——编译器可以检测你是否试图错误地使用它。

编辑：我应该指出，Linux 编码风格是出于“好的”原因而采用的方式，但这并不意味着不属于 Linux 源代码的代码不能以各种方式破坏这些规则。我当然不会使用 Linux 的格式编写自己的代码——我更喜欢`{ }`单个语句，而且我（几乎）总是`{`换行，与大括号所属的任何内容一致，并且`}`再次在同一列中.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:49:03.793

我总是将 extern 声明放在 .h 中的一个原因是为了防止代码重复，特别是如果有或可能有更多位代码使用您的“ac”代码并且必须访问“x”。在这种情况下，所有文件都必须具有 extern 声明。

另一个原因是 extern 声明是模块接口的一部分，因此我会将它与头文件中的任何其他接口信息一起保留。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T11:56:04.763

您的推测是正确的：为了最大程度地重用代码和保持一致性，必须将（公共）声明放入头文件中。

> 同样，拥有与每个模块（.c 文件）对应的头文件似乎有很多头文件。

然后习惯它。这是一个合乎逻辑的概念，也是适应的好习惯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T11:57:08.600

您有正确的理由说明为什么必须将 extern 声明放在头文件中。因此，可以轻松地跨不同的翻译单元访问它们。

此外，每个 .c 文件都不必有一个对应的 .h 文件。根据您的模块隔离设计，一个 .h 文件可以对应于相当数量的 .c 文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T15:21:21.660

> 同样，拥有与每个模块（.c 文件）对应的头文件似乎有很多头文件。

正如您所说，头文件的想法很简单。它们包含一个模块想要导出（使其可用）到其他模块（包含在其他 .c 文件中）的公共接口。这可以包括结构和类型以及函数声明。现在，如果一个模块定义了一个它希望其他模块可以使用的变量，那么将它包含在头文件中的其他公共部分中是有意义的。这就是为什么 externs 最终出现在头文件中的原因。它们只是模块想要公开的部分内容。然后任何人都可以通过简单地包含头文件来包含这个公共接口。

每个 .c 文件都有一个 .h 文件可能看起来很多，但这可能是正确的做法。但请记住，一个模块可以在多个 .c 文件中实现其代码，并选择将其聚合公共接口导出到单个 .h 文件中。所以，这并不是一个严格的一对一的事情。真正的抽象是模块提供的公共接口。

# c# - BadImageFormatException：无法加载文件或程序集......格式错误 - 仅适用于 Web 应用程序

> ID：14771725
> 
> 赞同：6
> 
> 时间：2013-02-08T11:38:52.190
> 
> 标签：c#, asp.net, visual-studio, web-applications, dll

我正在使用多个现有库在 Windows 8 64 位机器上开发 Web 应用程序。我想使用两个 C# DLL 引用一个本机 DLL。两个 C# DLL 均针对 64 位使用进行编译，并在测试应用程序中进行了测试。我的 Web 应用程序引用了两个 C# DLL，并且应该在 IIS 8 上运行。我将这两个 C# DLL 作为对项目的引用，并将本机 DLL 手动添加到 Web 应用程序的 bin 文件夹中。每当我构建和运行解决方案时，我都会得到标题中显示的异常。我知道这表明在一个进程中运行 32 位和 64 位代码存在问题。因此我尝试了所有不同的构建配置，但结果从未改变。

我创建了一个控制台应用程序，完全按照我在 Web 应用程序中尝试的方式工作，并且运行良好。然而，具有完全相同设置的 Web 应用程序会引发异常，这让我感到非常困惑。

到目前为止我尝试了什么：

*   将应用程序池设置更改为“启用 32 位应用程序”
*   使用任何 CPU、64 位或 x86 目标构建所有 DLL
*   检查所有 DLL 的标志

我可以向愿意帮助我运行此配置的每个人提供项目的导出！

我真的很感激每一点帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T19:42:06.727

我在我的申请中遇到了同样的问题。它在我执行以下操作后得到修复：

* 为我的网站文件夹中的“匿名”用户授予权限。
* 将应用程序池从“.NET v4.5 Classic”更改为“.NET v4.5”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:18:04.567

我想您尝试设置目标平台（项目属性中的构建选项）？另外，看看这篇文章： http: [//www.codeproject.com/Articles/383138/BadImageFormatException-x86-i-x64](http://www.codeproject.com/Articles/383138/BadImageFormatException-x86-i-x64)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-06T14:52:23.757

我所能提供的只是帮助确定哪些内容没有加载。如果它是开发服务器，则可能值得安装适当的 sdk 以使用[Fusion Log Viewer](http://msdn.microsoft.com/en-us/library/e74a18c4(v=VS.100).aspx)。如果这不是一个选项，您可以从注册表中打开程序集绑定日志记录，如下所示：

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fusion]
"LogFailures"=dword:00000001
"LogPath"="c:\\bindFailureLogs\\" 
```

完成后请务必将其关闭，使用程序集绑定日志记录会降低性能。在输入注册表项之前确保该文件夹存在并回收应用程序的应用程序池以启动日志记录。这将为您提供未加载的 dll（或依赖项，因为如果它是依赖项或错误消息中列出的 dll 并不总是很明显）未加载以及尝试从何处加载它的详细列表。

您对解决问题的应用程序的分区表明，针对不同版本的程序集存在多个依赖项，并且由于只能将程序集的单个版本加载到应用程序域中，因此某些依赖项没有得到满足。对于托管程序集，您可以使用[程序集绑定重定向](http://msdn.microsoft.com/en-us/library/7wd6ex19(v=vs.110).aspx)，但我不知道如果它存在的话，它的非托管等效项是什么。

# configuration - OpenERP7，拥有完全权限的新用户无法创建新的合作伙伴

> ID：14771727
> 
> 赞同：3
> 
> 时间：2013-02-08T11:39:01.420
> 
> 标签：configuration, openerp, rights

使用管理员用户，我可以做任何事情，添加、删除、修改等。应该是这样。

然后使用该用户添加了一个新用户，该用户可以完全访问销售和会计选项，就像销售运营所需的其他一些选项一样。然后尝试添加一个新的供应商，它会抛出一个警告：

```
Access Denied
The requested operation cannot be completed due to security restrictions.
Please contact your system administrator.
(Document type: Pricelist, Operation: read) 
```

测试了所有可能的用户权限组合，最终获得了对所有选项的完全访问权限。尽管如此，我无法与该用户创建任何新的联系人/客户/供应商/等。我的选择已经不多了，我不知道还要测试什么或去哪里看。

**编辑**

在全新的[OpenERP 讨论站点](http://help.openerp.com/question/480/openerp7-new-user-with-full-rights-unable-to-create-new-partners/)上得到了一个答案，建议取消选中用户的`Portal`用户权限。取消它部分工作。警告仍然出现，但是当我单击确定，填写供应商并保存时，新供应商添加没有错误。有什么推荐吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:39:09.680

我真的认为这不是一个错误。

这是“权利”的冲突（在访问规则和 ACL 中）。

“门户或匿名”用户，是外部用户（来自公司），只有有限的访问某些公共信息的权利，或者可以是外部合作伙伴，可以访问他的私人文件和与他与这家公司的关系相关的信息.

一个普通的 OpenERP 用户（*拥有部分或全部权限的公司员工“让我们称之为内部用户”*）***不能也不*****应该**同时是“门户或匿名”用户（权限非常有限），反之亦然-反之亦然。

只需为内部 OpenERP 用户**取消选中这两个选项即可。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:42:40.180

是一个报告的错误，似乎与多公司选项选择和用户权限有关。

转到[多公司拒绝访问文档类型：合作伙伴，操作：阅读](https://bugs.launchpad.net/openobject-addons/+bug/1073087)报告错误的位置并由其他用户跟进。希望尽快创建补丁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T21:19:15.030

我同意，我不认为这是一个错误。当我创建一个链接到该用户的员工时，我遇到了该用户的错误。您必须至少是社会的雇员才能添加新客户。

创建新员工的链接：

```
http://yoururl:PORT/?ts=1369948181483#view_type=kanban&model=hr.employee&menu_id=273&action=328 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-29T01:22:24.447

当我向联系人/客户授予门户权限时出现错误，然后在发送报价单（测试）时，打开报价单会产生错误消息：

> 拒绝访问
> 
> 由于安全限制，请求的操作无法完成。请联系您的系统管理员。
> 
> （文档类型：合作伙伴，操作：阅读）

但是，单击确定，可以通过它并继续付款。这是 OPENERP 的一个主要问题。现在应该修好了...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-09T01:17:41.143

我刚刚遇到类似的问题，可能的解决方案是为`Administration / Settings`组添加记录规则，方法如下：

1- 转到`Settings->Groups`并选择`Administration / Settings`。（确保该组已分配给新用户）

2- 单击`Edit`按钮并转到`Rules`选项卡。（应该是空的）

3-单击`Add`按钮，此操作打开一个模态窗口，单击`Create`按钮就可以了。

4- 给新规则一个语义名称 - 例如`Partner: administration settings: see all`- 并确保选择所有访问权限。

5- 在对象下拉类型`res.partner`中，它将允许您选择`Partner`错误中引用的对象。

6- 单击该部分中的`Add`按钮`Groups`并选择`Administration / Settings`组。

7- 最后单击`Save & Close`按钮并通过单击按钮保存组更改`Save`。

希望这对 OpenERP 的初学者有所帮助。实际上，对于与给定用户预期拥有的权限相关的类似错误，我已经多次使用此解决方案模式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-19T12:51:36.487

它是一个规则问题。停用规则 Product Template 。规则否决用户设置下的访问权限写入设置。因此，看起来用户具有相同的访问权限，但这些规则绕过了您的自定义。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-15T10:18:17.740

我认为您应该激活开发人员模式，然后转到设置/用户-> 选择有此错误的用户。然后单击编辑并取消选中“其他额外权限”部分中的公开。之后，单击保存。

# eclipse - Xdebug 在 Eclipse 中不工作：启动到 57% 后没有进展

> ID：14771730
> 
> 赞同：0
> 
> 时间：2013-02-08T11:39:15.340
> 
> 标签：eclipse, xdebug

我在 Eclipse PDT 中实现了 php Xdebug。我使用的是 Ubuntu 系统。我可以在示例项目中成功使用 Xdebug。但是，当我在 codeigniter 项目中尝试它并从视图页面开始调试时，像 /myproject/application.views/view_name.php 这样的 url 正在外部浏览器（firefox）中加载，但显示错误*- Forbidden You don't have permission访问*。我正在本地主机中进行测试。

我尝试设置变量 `$config['uri_protocol'] = 'PATH_INFO';`， `$config['enable_query_strings'] = TRUE;` 甚至我在 xdebug.ini 和 eclipse 中将端口更改为 8999/9001。在尝试调试 eclipse 时显示状态“正在启动 57%”，并且继续没有进展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:10:15.983

尝试按照本文所述删除 db 文件：[加速 Eclipse PDT 和 nWire 的五个技巧](http://www.nwiresoftware.com/blogs/nwire/2010/09/five-tips-speeding-eclipse-pdt-and-nwire)。

# backbone.js - Backbone - 为一个简单的应用程序构建视图

> ID：14771733
> 
> 赞同：0
> 
> 时间：2013-02-08T11:39:25.107
> 
> 标签：backbone.js

我刚从 Backbone.js 开始，所以请原谅这个问题的简单性。

我正在研究标准的“Todo”示例，并希望扩展“Todo”以便它可以有多个字段。目前，“Todo”应用程序仅使用 AppView 中的单个字段来触发新项目进入集合。

索引.html

```
<header id="header">
  <h1>todos</h1>
  <input id="new-todo" placeholder="What needs to be done?" autofocus>
</header> 
```

应用程序.js

```
app.AppView = Backbone.View.extend({
    events: {
        'keypress #new-todo': 'createOnEnter' 
```

因此我相信目前的结构是

应用视图

-->收藏（待办事项）

-->查看（待办事项列表项）

我想让新项目模板成为自己的视图

应用视图

-->收藏（待办事项）

-->查看（待办事项列表项）

-->查看（待办事项：新项目）

对于此视图如何将某些内容添加到集合中，我有点迷茫。appview 目前只是调用。

```
createOnEnter: function( e ) {
            if ( e.which !== ENTER_KEY || !this.$input.val().trim() ) {
                return;
            }

            app.Todos.create( this.newAttributes() );
            this.$input.val('');
        } 
```

如何从我的新视图中获取对集合的引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:15:52.617

当您知道要寻找什么时，就如此简单...

```
var view = new app.NewTodo({ collection : app.Todos}); 
```

然后可以在您的视图中使用..

```
this.collection.create({ title: 'Bonjour', order: 99, completed: false }); 
```

# javascript - 将现有事件注册到 ajax 加载的 DOM？

> ID：14771735
> 
> 赞同：0
> 
> 时间：2013-02-08T11:39:31.097
> 
> 标签：javascript, jquery, ajax, events, dom

在我的主页上，我有这个按钮。

```
<button class="test">test</button> 
```

在我当前的代码中，我有这个脚本

```
$('.test').on('click',function(){
        alert("YOU CLICKED ME");
    }); 
```

现在，我的应用程序是 ajax 化的，所以每次我单击一个新页面时，它都会作为 ajax 加载，问题是加载的页面也有这个按钮。它的标记是这样的

```
<div id ="firstDiv>
   <div id ="secondDiv">       
  <button class="test">test</button>
  </div>
</div 
```

所以新内容也有“#test”但是当我点击那个按钮时它没有执行我创建的事件处理程序怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:43:26.740

```
var $bdy=$(document.body);     

$bdy.on('click','.test',function(){
    alert("YOU CLICKED ME");
}); 
```

现在随时追加您的 .test

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:43:52.150

> 所以新内容也有“#test”但是当我点击那个按钮时它没有执行我创建的事件处理程序怎么办？

因为处理程序附加到实际元素。因此，如果删除元素并创建具有相同类的*新*元素，则事件不会与该新元素相关联。

您可以使用事件委托来处理此问题：

```
$(document.body).delegate('.test', 'click', function(){
    alert("YOU CLICKED ME");
}); 
```

或者

```
$(document.body).on('click', '.test', function(){
    alert("YOU CLICKED ME");
}); 
```

（他们做同样的事情，注意参数的顺序是不同的。[`delegate`](http://api.jquery.com/delegate)为了清楚起见，我更喜欢，但我认为大多数人都使用过度重载[`on`](http://api.jquery.com/on)方法的委托版本。）

这样做是监视点击`document.body`，但只有当点击通过与该选择器匹配的元素时才会触发您的处理程序（`.test`在这种情况下）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:25:30.973

我终于找到了解决方案。我需要做的就是定义一个静态容器，就是这样

```
$('#staticdiv').on('click','.test',function(){
        alert("YOU CLICKED ME");
    }); 
```

这解决了这个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T13:12:46.867

正如您所说，内容是通过您在 AJAX 中获得的数据加载的，这是正在发生的可能情况。

1.  `<button class="test">test</button>`绘制
2.  然后它被绑定到点击事件
3.  您通过 ajax 加载新数据
4.  尝试绑定它没有。

这是因为当您第一次将单击事件绑定到“测试”元素时，该类是 DOM 的一部分。现在您在 ajax 调用之后添加了一些标记，元素成为 DOM 的一部分，但是现在在您编写新标记之后，您需要首先取消绑定点击事件[See Here](http://api.jquery.com/unbind/)。然后重新绑定点击事件。这会将事件绑定到所有具有“test”类的元素。

PS我不知道您的实现规范，但正如其他人建议的那样，您应该将事件绑定到 id 而不是类。

# php - 在 Joomla 中包含文件 - 有什么区别？

> ID：14771738
> 
> 赞同：1
> 
> 时间：2013-02-08T11:39:35.420
> 
> 标签：php, javascript, joomla, joomla2.5

谁能告诉我以下两种方式包含js脚本文件有什么区别，

我在 joomla 中制作了这个内部系统插件，并将 js 文件包含在“onAfterInitialise”函数中。

1)

```
<script type="text/javascript" src="<?php echo JURI::base(); ?>/plugins/system/test/script/script.js"></script> 
```

这可以正常工作并且正确包含 js 文件，但是当我从后端登录时，来自用户列表的字体大小和来自其他扩展的列表会放大。这不是我的 js 脚本中的问题。

2)

```
$document->addScript(JURI::root(). "plugins/system/test/script/script.js"); 
```

这工作正常，没有任何问题。

谁能解释这背后的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:47:17.750

使用第二种方法是简单地使用 Joomla 编码标准并将您的脚本添加到`<head>`标签之间。

除了脚本在页面上的导入位置之外没有太大区别。

`JURI::base()`并且`JURI::root()`都是一样的。它们都为您的 Joomla 站点定义了根文件夹。如果您不确定要使用哪一种，我建议您使用方法 2，因为习惯 Joomla 编码标准总是好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:50:39.053

您可以查看 addScript() 的来源 :) 基本上，如果您使用第一种方法，您的 srcipt 将添加到您编写代码的同一位置。第二种方法将在 $document 中添加指向内部表的链接，并将在

```
 <head></head> 
```

页面处理结束部分。

# chat - 是否有任何*简单*的方式来自定义社交引擎聊天室？

> ID：14771744
> 
> 赞同：0
> 
> 时间：2013-02-08T11:39:56.947
> 
> 标签：chat, customization, social

我的 SE 网站上有“官方”“Chat & IM”聊天室。这个房间似乎没有任何自定义选项。特别是，我需要将聊天屏幕本身的颜色从白色更改为黑色。当我将站点的主题从浅色更改为深色时，我必须将（整个站点）的文本颜色从深色更改为浅色，以便可以在深色的 bg 页面上看到它。但是现在我聊天室的文字区是白色的，文字也是。我无法使文本变暗，否则在整个站点的其余部分都很难看到，而且我找不到将聊天屏幕的颜色从白色更改为黑色（或深色）的任何选项。

# makefile - /usr/bin/ld: 找不到 -lnetcdf

> ID：14771746
> 
> 赞同：0
> 
> 时间：2013-02-08T11:40:08.617
> 
> 标签：makefile, fortran90

我遇到了一个问题，当我使用 Makefile 安装软件时，我收到了这个错误

```
/usr/bin/ld: cannot find -lg2c 
```

当我搜索 libg2c

它显示了路径：

```
/home/guest/Downloads/mdsplus/math/libg2c.a
/home/initm03/Desktop/mdsplus/math/libg2c.a
/home/initm03/Downloads/mdsplus/math/libg2c.a
/usr/local/mdsplus/math/libg2c.a 
```

如果可能的话，请如此需要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:42:02.010

链接器需要知道在哪里查找库。

使用`--library-path`命令行开关或`LD_LIBRARY_PATH`环境变量来指定库的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:43:11.747

在 makefile 中，您需要告诉链接器在哪里可以找到 libg2c；

改变

```
-lg2c 
```

在makefile中的链接器选项中；

```
-L/usr/local/mdsplus/math -lg2c 
```

...它应该能够找到它并正确链接。

# search - 我需要在父搜索框中搜索文本，但要在另一个链接的 iframe 中搜索并在那里发布结果

> ID：14771750
> 
> 赞同：0
> 
> 时间：2013-02-08T11:40:19.597
> 
> 标签：search

我有一个带有 2 个工作搜索框的 html 主页父模板（人们必须手动输入工作类型和城市）。我需要将 2 个框中的搜索文本转发到其他链接，在该新链接的 iframe 内的搜索框中。当人们按下搜索按钮时，新链接将在 iframe 中加载搜索结果。

所有它都在同一个域上。

这是父搜索框和按钮：jsfiddle.net/rAgSt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:13:58.717

**使用 javascript（HTMLElement innerHTML**属性）将搜索结果包含变量分配给空 div 的第一页。

例如：在这样的第一页 div 中，

```
<div id="searchedresults"></div> 
```

在 iframe 页面中，用于分配搜索结果的 JavaScript 代码，

```
document.getElementById('searchedresults').innerHTML=results; 
```

# php - 基于用户状态的两种不同的 Paypal 表单

> ID：14771759
> 
> 赞同：0
> 
> 时间：2013-02-08T11:40:50.957
> 
> 标签：php, sql, forms, paypal, registration

我创建了一个网站，其中包含筹款活动的注册表。它具有简单的字段，例如“名字、姓氏、电子邮件等”。在他们点击第一页上的**“提交”**后，他们会被带到另一个页面，在那里他们可以通过 Paypal 付款。

我已经知道如何在显示“立即购买”的地方插入 Paypal 功能。但是，就我而言，我想要 2 种不同的 Paypal 表格：

1.  如果用户已经注册了另一个特定的会议，他们支付 10 美元（我已经通过 phpmyadmin 在数据库表中获得了注册与会者的列表）
2.  如果用户没有注册大会，他们需要支付 15 美元

如何对其进行编码，以便我可以验证用户是否在已注册与会者的数据库表中并获得 10 美元的费率？（也许我可以通过表格上使用的电子邮件地址进行验证）

这就是我现在为我的 php 文件所拥有的（默认为非与会者的 15 美元常规费率）

```
<html>
<div class="container">
    <head><title>Payment Page</title></head>
    <body>
    <h1>Step 2: Payment</h1>
    <p class="content">Please proceed onto payment via Paypal.</p>
<div></div>
<ul>
    <li>The fee for an attendee is $10</li>
    <li>The fee for a non-attendee is $15</li>

</ul>

    </body>

<head>
<link rel="stylesheet" type="text/css" href="container.css">
</head>

</html>

<div></div>
<br></br>

    <form action="https://www.paypal.com/cgi-bin/webscr" method="post">  
    <input type="hidden" name="cmd" value="_xclick">  
    <input type="hidden" name="business" value="tracyjones@gmail.com">  
    <input type="hidden" name="item_name" value="Fundraiser">  
    <input type="hidden" name="item_number" value="Rate">  
    <input type="hidden" name="amount" value="15.00">  
    <input type="hidden" name="no_shipping" value="0">  
    <input type="hidden" name="no_note" value="1">  
    <input type="hidden" name="currency_code" value="USD">  
    <input type="hidden" name="lc" value="AU">  
    <input type="hidden" name="bn" value="PP-BuyNowBF">  
    <input type="image" src="https://www.paypal.com/en_AU/i/btn/btn_buynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online.">  
    <img alt="" border="0" src="https://www.paypal.com/en_AU/i/scr/pixel.gif" width="1" height="1">  
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:29:43.680

你真正需要做的就是改变价格，所以在

```
<input type="hidden" name="amount" value="15.00"> 
```

接下来查询名称列表：

```
<?php
require_once{'config.php');

$query="SELECT * FROM usertable";
$result=mysql_query($query) or exit("Sql Error".mysql_error());
$num_results = mysql_num_rows($result)-1; 

$in=0;
for ($i=0; $i<=$num_results;$i++){
$userindb=mysql_result($result,$i,"usernamecolumn");
if ($userindb==$userinputted){
echo "<input type='hidden' name='amount' value='10.00'>";
$in=1;
exit;
}
}
if ($in==0){
echo "<input type='hidden' name='amount' value='15.00'>";}

?> 
```

当然，您必须检索发布数据并将其设置为 $userinputted。我希望这会有所帮助，如果需要，请向我询问更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:24:15.263

**编辑** 试试这个：

```
 <?php

// Event name
$event = "2013 VIA-1 5K Run Fundraiser";

// Registration fees for attendees and non-attendees
$fee_attendee = 10;
$fee_nonAttendee = 15;

$paypal_email = 'payment@example.com ';

// Registration closing date (will go until 11:59 PM Central Standard Time of this day)
$close_month = 03;
$close_day = 08;
$close_year = 2013;

// $time = time(); Easier to use the build in now function of MySQL. 

function clean($in)
{
    $out = trim(strip_tags($in));
    $out = addslashes($out);
    return $out;
}

function listform(){
$host = "host";
$user = "username";
$password = "password";
$database = "dbname";

// open connection to databse
$link = mysqli_connect($host, $user, $password, $database);
        IF (!$link){
            echo ("Unable to connect to database!");
        }
        ELSE {
           //Get organisations from table organisations
           $query = "SELECT * FROM  organisations ORDER BY name ASC"; 
           $result = mysqli_query($link, $query);
                while($row = mysqli_fetch_array($result, MYSQLI_BOTH)){
                    echo "<option value=".$row['id_organisations'].">".$row['name']."</option>\n";
                }
        }
        mysqli_close($link);
}

//Check if variables are post if so filter the input if not initiating variables for form
IF (isset($_POST['firstname'])){  
     $firstname  = filter_var($_POST['firstname'], FILTER_SANITIZE_STRING);    
}
ELSE {
    $firstname  = "";
}

IF (isset($_POST['lastname'])){
            $lastname   = filter_var($_POST['lastname'],FILTER_SANITIZE_STRING); 
}
ELSE {
    $lastname   = "";
}

IF (isset($_POST['org'])){
   $org = $_POST['org'];
}
ELSE {
    $org    = "";
}

IF (isset($_POST['email'])){
    $email  = filter_var(filter_var($_POST['email'],FILTER_SANITIZE_EMAIL),FILTER_VALIDATE_EMAIL);
}
ELSE {
    $email  = "";
}

IF (isset($_POST['attendant'])){
    $attendant  = filter_var(filter_var($_POST['attendant'],FILTER_SANITIZE_STRING));
}
ELSE {
    $attendant  = "";
}
IF (isset($_POST['waiver'])){
    $waiver = filter_var(filter_var($_POST['waiver'],FILTER_SANITIZE_STRING));
}
ELSE {
    $waiver  = "";
}

function submit_form(){
$host  = "host";
$user = "username";
$password = "password";
$database = "dbname";

    $firstname  = filter_var($_POST['firstname'], FILTER_SANITIZE_STRING); 
    $lastname   = filter_var($_POST['lastname'], FILTER_SANITIZE_STRING); 
    $org    = $_POST['org'];
    $email  = filter_var(filter_var($_POST['email'],FILTER_SANITIZE_EMAIL),FILTER_VALIDATE_EMAIL);
    $attendant  = $_POST['attendant'];

    // open connection to database
    $link = mysqli_connect($host,$user, $password, $database);
        IF (!$link){
            echo ("Unable to connect to database!");
        }
        ELSE {
           //INSERT VALUES INTO DATABASE
           $query = "INSERT INTO basicinfo (firstname,lastname,email,attendant,org,time) VALUES('".$firstname."', '".$lastname."', '".$email."', ".$attendant.", ".$org.", NOW())";
           return mysqli_query($link,$query);

        }
//close connection to database
        mysqli_close($link);

    }

function payment (){
$host = "host";
$user = "username";
$password = "password";
$database = "dbname";

$firstname  = filter_var($_POST['firstname'], FILTER_SANITIZE_STRING); 
$lastname   = filter_var($_POST['lastname'], FILTER_SANITIZE_STRING);

// open connection to databse
$link = mysqli_connect($host, $user, $password, $database);
        IF (!$link){
            echo ("Unable to connect to database!");
        }
        ELSE {
           //Is someone registered at other conference from table registration
           $query = "SELECT * FROM  registration WHERE firstname ='".$firstname."' AND lastname='".$lastname."'"; 
           $result = mysqli_query($link, $query);
           $rows = mysqli_fetch_array($result, MYSQLI_BOTH);         
                if ( $rows > 0){
                    $amount = 10.00;
                    $form_registrar= <<< heredoc
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<div class="container">
    <head><title>Payment Page</title></head>
    <link rel="stylesheet" type="text/css" href="container.css">
    <body>
    <h1>Step 2: Payment</h1>
    <p class="content">Please proceed onto payment via Paypal.</p>
<div></div>
<ul>
    <li>The fee for an attendee is $10</li>
    <li>The fee for a non-attendee is $15</li>

</ul>
<div>Your fee is $$amount</div>

    <form action="https://www.paypal.com/cgi-bin/webscr" method="post">  
    <input type="hidden" name="cmd" value="_xclick">  
    <input type="hidden" name="business" value="tracyjones@gmail.com">  
    <input type="hidden" name="item_name" value="Fundraiser">  
    <input type="hidden" name="item_number" value="Rate">  
    <input type="hidden" name="amount" value="$amount">  
    <input type="hidden" name="no_shipping" value="0">  
    <input type="hidden" name="no_note" value="1">  
    <input type="hidden" name="currency_code" value="USD">  
    <input type="hidden" name="lc" value="AU">  
    <input type="hidden" name="bn" value="PP-BuyNowBF">  
    <input type="image" src="https://www.paypal.com/en_AU/i/btn/btn_buynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online.">  
    <img alt="" border="0" src="https://www.paypal.com/en_AU/i/scr/pixel.gif" width="1" height="1">  
</form>

    </body>
</html>

heredoc;
                    return $form_registrar;
                }
                else {
                    $amount = 15.00;
                    $form_registrar= <<< heredoc
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<div class="container">
    <head><title>Payment Page</title></head>
    <link rel="stylesheet" type="text/css" href="container.css">
    <body>
    <h1>Step 2: Payment</h1>
    <p class="content">Please proceed onto payment via Paypal.</p>
<div></div>
<ul>
    <li>The fee for an attendee is $10</li>
    <li>The fee for a non-attendee is $15</li>

</ul>
   <div>Your fee is $$amount</div>

    <form action="https://www.paypal.com/cgi-bin/webscr" method="post">  
    <input type="hidden" name="cmd" value="_xclick">  
    <input type="hidden" name="business" value="tracyjones@gmail.com">  
    <input type="hidden" name="item_name" value="Fundraiser">  
    <input type="hidden" name="item_number" value="Rate">  
    <input type="hidden" name="amount" value="$amount">  
    <input type="hidden" name="no_shipping" value="0">  
    <input type="hidden" name="no_note" value="1">  
    <input type="hidden" name="currency_code" value="USD">  
    <input type="hidden" name="lc" value="AU">  
    <input type="hidden" name="bn" value="PP-BuyNowBF">  
    <input type="image" src="https://www.paypal.com/en_AU/i/btn/btn_buynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online.">  
    <img alt="" border="0" src="https://www.paypal.com/en_AU/i/scr/pixel.gif" width="1" height="1">  
</form>

    </body>
</html>

heredoc;
                    return $form_registrar;
                }
        }
        mysqli_close($link);
}

//Warning messages initiation
$warning_firstname  = "*Required";
$warning_lastname   = "*Required";
$warning_org  = "*Required";
$warning_email   = "*Required";
$warning_attendant   = "*Required";
$warning_waiver      = "*Required";

$formfirstpart = <<<EODformfirspart
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <title>Form 5K RUN </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link href="style.css" type="text/css" rel="stylesheet" media="screen"/>

    </head>
    <body style="background-color:gold">

            <div>We're excited to introduce the 5K Run to VIA-1! During this year's conference, Individuals can register to participate in the fun across University of Iowa's campus in order to raise money for this year's CPP</div>
    <div class="row">
        <form action="{$_SERVER['PHP_SELF']}" method="POST" name="registration">
           <div class="column grid_5">
               <label for='first'>First Name:</label></br>
            <input type="text" name="firstname" id="first" maxlength="25" tabindex='1' VALUE="$firstname" /><span class="warning">$warning_firstname</span></br></br>
            <label for='first'>Last Name:</label></br>
            <input type="text" name="lastname" id='lastname' maxlength="25" tabindex='1' VALUE="$lastname" /><span class="warning">$warning_lastname</span></br></br>
            <label for='email'>E-mail:</label></br>
            <input type="text" name="email" id='email' maxlength="100" tabindex='3' VALUE="$email" /><span class="warning">$warning_email</span></br></br>

           <label for="org">Organization:</label><br />
            <select id="org" name="org" tabindex="5">

EODformfirspart;

$formlastpart = <<<EODlastpart
                            </select>
                <span class="warning">$warning_org</span><br /><br />

                    <label for='attendant'>Are you attending VIA-1?</label><br />

                <input type='radio' class='radio' name='attendant' id='attendant-yes' value='1' /> <label for='attendant-yes'>Yes</label><br />
            <input type='radio' class='radio' name='attendant' id='attendant-no' value='0' /> <label for='attendant-no'>No </label><br />$warning_attendant<br />

            <input type='checkbox' class="radio" name="waiver" id="waiver" value="1"  /> <label for='waiver'>I understand and agree to the terms of <a href='waiver.php' target="_blank">the waiver</a>.$warning_waiver</label>
        </div>

    <div class='column grid_10 right'>
            <input type="submit" class='button' name="submit" value="submit" tabindex='7' />
            </form>
</div>
    </body>
</html>
EODlastpart;

IF(!IsSet($_POST['submit'])){ // Check if form is not send, if not display empty form.

echo $formfirstpart;
echo listform();
echo $formlastpart; 
}

ELSEIF (IsSet($_POST['submit']) AND (isset($firstname) OR isset($lastname) OR isset($email) OR  isset($org) OR isset($attendant))) {
$warning_counter = 0;
if ($firstname == "") {      
        $warning_firstname = 'Please provide your first name and / or a valid name';
                $warning_counter = + 1 ;
        }
if ($firstname == "") {      
        $warning_lastname = 'Please provide your last name and / or a valid name';
                $warning_counter = + 1;
        }
if ($email == "") {      
        $warning_email = 'Please provide your email adress and / or a valid email adress';
                $warning_counter = +1;
        }

if ($org == " ") {      
        $warning_org = 'Please select your organisation';
                $warning_counter = +1;
        }

if ($waiver == "") {      
        $warning_waiver = 'You have to accept the waiver agreement the otherwise you cannot attend'; 
                $warning_counter = +1;
        }
if ($attendant == "") {      
        $warning_attendant = 'Do you attend VIA-1?';
                $warning_counter =+1;
        } 
 if ($warning_counter>0){               
$formfirstpart1 = <<<EODformfirspart1
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <title>Form 5K RUN </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link href="style.css" type="text/css" rel="stylesheet" media="screen"/>

    </head>
    <body style="background-color:gold">

            <div>We're excited to introduce the 5K Run to VIA-1! During this year's conference, Individuals can register to participate in the fun across University of Iowa's campus in order to raise money for this year's CPP</div>
    <div class="row">
        <form action="{$_SERVER['PHP_SELF']}" method="POST" name="registration">
           <div class="column grid_5">
               <label for='first'>First Name:</label></br>
            <input type="text" name="firstname" id="first" maxlength="25" tabindex='1' VALUE="$firstname" /><span class="warning">$warning_firstname</span></br></br>
            <label for='first'>Last Name:</label></br>
            <input type="text" name="lastname" id='lastname' maxlength="25" tabindex='1' VALUE="$lastname" /><span class="warning">$warning_lastname</span></br></br>
            <label for='email'>E-mail:</label></br>
            <input type="text" name="email" id='email' maxlength="100" tabindex='3' VALUE="$email" /><span class="warning">$warning_email</span></br></br>

           <label for="org">Organization:</label><br />
            <select id="org" name="org" tabindex="5">

EODformfirspart1;

$formlastpart1 = <<<EODlastpart1

                            </select>
                <span class="warning">$warning_org</span><br /><br />

                    <label for='attendant'>Are you attending VIA-1?</label><br />

                <input type='radio' class='radio' name='attendant' id='attendant-yes' value='1' /> <label for='attendant-yes'>Yes</label><br />
            <input type='radio' class='radio' name='attendant' id='attendant-no' value='0' /> <label for='attendant-no'>No </label><br />$warning_attendant<br />

            <input type='checkbox' class="radio" name="waiver" id="waiver" value="1"  /> <label for='waiver'>I understand and agree to the terms of <a href='waiver.php' target="_blank">the waiver</a>.$warning_waiver</label>
        </div>

    <div class='column grid_10 right'>
            <input type="submit" class='button' name="submit" value="submit" tabindex='7' />
            </form>
</div>
    </body>
</html>

EODlastpart1;
    echo $formfirstpart1;
    echo listform();
    echo $formlastpart1;
 }
 IF ($warning_counter == 0){
submit_form();
echo payment();

 }
}

?> 
```

# c# - 底层连接已关闭：连接意外关闭：System.Net.WebException

> ID：14771761
> 
> 赞同：2
> 
> 时间：2013-02-08T11:41:04.400
> 
> 标签：c#, winforms

我有一个用 c#.NET 2.0 Windows 应用程序编写的应用程序。我正在尝试使用 HttpWebRequest 和 HttpWebResponse 实现网络爬虫。在这个应用程序中，我对第三方网站同时使用 http get 和 post 请求。本网站为其会员提供用户帐户。

我正在尝试使用定位数据登录此站点，然后进入我的个人资料页面，然后尝试发出另一个 GETrequest，然后使用发布数据发出另一个 POST 请求。但我无法成功提出请求。

它通过一个错误

> “服务器违反了协议。Section=ResponseHeader Detail=Header 名称无效”

然后我`<httpWebRequest useUnsafeHeaderParsing="true" />`在 app.config 文件中设置。之后它抛出一个错误底层连接已关闭：

> 连接意外关闭：System.Net.WebException。

任何人都可以告诉我显示此错误的原因是什么

我的代码如下。

```
 request.CookieContainer = objContainer;
        request.KeepAlive = true;

        response = (HttpWebResponse)request.GetResponse();
        dataStream = response.GetResponseStream();
        reader = new StreamReader(dataStream);

        strServerResponse = reader.ReadToEnd();

        reader.Close();
        dataStream.Close();
        response.Close();

        //=======================================================================
        StringBuilder strLinkBuilder = new StringBuilder();

        strLinkBuilder.Append("j_username=username");
        strLinkBuilder.Append("&j_password=password");

        request = (HttpWebRequest)HttpWebRequest.Create(strBaseURL + "j_security_check");

        // Set the Method property of the request to POST.
        request.Method = "POST";

        // Create POST data and convert it to a byte array.
        string postData = strLinkBuilder.ToString();

        byte[] byteArray = Encoding.UTF8.GetBytes(postData);

        // Set the ContentType property of the WebRequest.
        request.ContentType = "application/x-www-form-urlencoded";
        request.KeepAlive = true;

        // Set the ContentLength property of the WebRequest.
        request.ContentLength = byteArray.Length;

        for (int i = 0; i < response.Cookies.Count; i++)
        {
            response.Cookies[i].Path = String.Empty;
        }

        request.CookieContainer = objContainer;
        request.CookieContainer.Add(response.Cookies);

        // Get the request stream.
        dataStream = request.GetRequestStream();
        // Write the data to the request stream.
        dataStream.Write(byteArray, 0, byteArray.Length);

        // Close the Stream object.
        dataStream.Close();

        // Get the response.
        response = (HttpWebResponse)request.GetResponse();

        // Get the stream containing content returned by the server.
        dataStream = response.GetResponseStream();

        // Open the stream using a StreamReader for easy access.
        reader = new StreamReader(dataStream);

        // Read the content.

        strServerResponse = reader.ReadToEnd();

        // Clean up the streams.
        reader.Close();
        dataStream.Close();
        response.Close();              
        //-------------------------------------------------------   

        request = (HttpWebRequest)HttpWebRequest.Create(strBaseURL + "ded/nsdlconsofile.xhtml");

        //request.CookieContainer = objContainer;
        request.KeepAlive = true;
        // request.Method = "POST";

        for (int i = 0; i < response.Cookies.Count; i++)
        {
            response.Cookies[i].Path = String.Empty;
        }

        request.CookieContainer = objContainer;
        request.CookieContainer.Add(response.Cookies);

        response = (HttpWebResponse)request.GetResponse();
        dataStream = response.GetResponseStream();
        reader = new StreamReader(dataStream);

        strServerResponse = reader.ReadToEnd();

        reader.Close();
        dataStream.Close();
        response.Close();
        //-------------------------------------------------------   
        strLinkBuilder = new StringBuilder();

        strLinkBuilder.Append("finYr=2012");
        strLinkBuilder.Append("&qrtr=3");
        strLinkBuilder.Append("&frmType=24Q");
        strLinkBuilder.Append("&download_conso=Go");
        strLinkBuilder.Append("&requestnsdlconsoForm_SUBMIT=1");

        Dictionary<string, string> objNameval = TraceHiddenField(strServerResponse, "");

        foreach (KeyValuePair<string, string> pair in objNameval)
        {
            strLinkBuilder.Append("&" + pair.Key + "=" + pair.Value);

        }

        request = (HttpWebRequest)HttpWebRequest.Create(strBaseURL + "ded/nsdlconsofile.xhtml");

        // Set the Method property of the request to POST.
        request.ContentType = "application/x-www-form-urlencoded";

        request.Method = "POST";
        request.KeepAlive = false;
       // request.ServicePoint.Expect100Continue = false;               
        request.UserAgent = "Mozilla/4.0 (compatible;)";
        request.ProtocolVersion = HttpVersion.Version10;

        // Create POST data and convert it to a byte array.
        postData = strLinkBuilder.ToString();

        byte[] byteData = Encoding.UTF8.GetBytes(postData);

        // Set the ContentType property of the WebRequest.         

        // Set the ContentLength property of the WebRequest.
        request.ContentLength = byteData.Length;

        for (int i = 0; i < response.Cookies.Count; i++)
        {
            response.Cookies[i].Path = String.Empty;
        }

        request.CookieContainer = objContainer;
        request.CookieContainer.Add( response.Cookies);

        // Get the request stream.
        dataStream = request.GetRequestStream();
        // Write the data to the request stream.
        dataStream.Write(byteData, 0, byteData.Length);

        // Close the Stream object.
        dataStream.Close();

        // Get the response.
        response = (HttpWebResponse)request.GetResponse();

        // Get the stream containing content returned by the server.
        dataStream = response.GetResponseStream();

        // Open the stream using a StreamReader for easy access.
        reader = new StreamReader(dataStream);

        strServerResponse = reader.ReadToEnd();

        reader.Close();
        dataStream.Close();
        response.Close(); 
```

# wpf - 一个框架中有多个页面？不要更新。我错过了什么？

> ID：14771764
> 
> 赞同：4
> 
> 时间：2013-02-08T11:41:16.387
> 
> 标签：wpf, vb.net, xaml

所以这里是场景。我有 3 个`xaml`：

*   主窗口
*   第1页
*   第2页

在 MainWindow 下，我有一个名为“Page1”的按钮和一个名为“Frame1”的框架

代码：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles Button1.
  Dim page1 As New Page1
  Frame1.Navigate(page1)
End Sub 
```

所以它会显示`Page1.xaml`到“Frame1”

然后在下`Page1.xaml`，我有另一个名为“Page2”的按钮

代码：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles Button1.Click
  Dim p2 As New page2
  Dim main As New MainWindow

  main.Frame1.Navigate(p2)
End Sub 
```

单击“Frame1”内和“MainWindow”内的“Page1”内的按钮后，框架不会导致任何更改

我想我错过了一些东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:29:27.980

基本上，您的问题似乎是您在按钮 1 单击事件中实例化一个新的主窗口，而不是引用现有的主窗口。因此，当您实际调用 Frame1 Navigate 方法时，您实际上是在一个完全不同的窗口上执行此操作，而该窗口恰好是不可见的。

您需要做的是找到对 Page1 的父 MainWindow 的引用。这可以通过多种方式完成。

*   您可以使用路由事件并从 Page1 引发它并在 MainWindow 上处理它。
*   您在 Page1 上创建一个公共属性，并在创建 Page1 时将您的 MainWindow 实例传递给它。
*   您还可以从 Page1 开始向上爬取可视化树，直到找到 MainWindow，然后进行导航。我将在下面的代码中演示这一点。

**第 1 页的 XAML**

```
<Page x:Class="WpfApplication1.Page1"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      mc:Ignorable="d" 
      d:DesignHeight="300" d:DesignWidth="300"
    Title="Page1">

    <Grid>
        <Button HorizontalAlignment="Center"
                VerticalAlignment="Bottom"
                Click="Page2Button_Click"
                Content="Page 2" />
    </Grid>
</Page> 
```

**第 1 页的代码隐藏**

```
using System.Windows;
using System.Windows.Media;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for Page1.xaml
    /// </summary>
    public partial class Page1
    {
        public Page1()
        {
            InitializeComponent();
        }

        private void Page2Button_Click(object sender, RoutedEventArgs e)
        {
            var mainWindow = GetParentWindow(this);
            if (mainWindow != null) mainWindow.Frame1.Navigate(new Page2());
        }

        private static MainWindow GetParentWindow(DependencyObject obj)
        {
            while (obj != null)
            {
                var mainWindow = obj as MainWindow;
                if (mainWindow != null) return mainWindow;
                obj = VisualTreeHelper.GetParent(obj);
            }
            return null;
        }
    }
} 
```

# android - 如何仅更改列表视图内容而不更改项目列表

> ID：14771768
> 
> 赞同：3
> 
> 时间：2013-02-08T11:41:18.987
> 
> 标签：android

我有一个列表视图，其中每个列表项都有一个图像和 4 个文本视图。我只想更改 2 个文本视图而不更改项目列表和列表。这些文本视图每秒都会更改。在安卓中可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:01:24.043

您可以像这样更新 listView 的文本项：

```
private void updateText(int index){
View v = ListView.getChildAt(index);

TextView updatedText = (TextView) v.findViewById(R.id.txt_view);
updatedText .setText("changed Text");

} 
```

# java - 如何将 Hazelcast 与 Hbase 连接？

> ID：14771769
> 
> 赞同：0
> 
> 时间：2013-02-08T11:41:20.827
> 
> 标签：java, hadoop, hbase, in-memory-database, hazelcast

我有 Hazelcast 和 HBase 。我的 HBase 中有数百万个条目。如何从 Hazelcast 建立与 HBase 的连接，以便从 Hazelcast 访问这些条目。如果那不可能，我如何在 Hazelcast 中输入这些记录？提前致谢。！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T13:27:33.147

这里的博客解释了如何集成 HBase 和 Hazelcast：http: [//blog.codepoly.com/distribute-with-hazelcast-persist-into-hbase](http://blog.codepoly.com/distribute-with-hazelcast-persist-into-hbase)

关键是您将一些数据存储在 Hazelcast（最新或经常使用的数据）中，即使用 Hazelcast 作为缓存。请参阅驱逐选项： [http ://www.hazelcast.com/docs/2.5/manual/single_html/#MapEviction](http://www.hazelcast.com/docs/2.5/manual/single_html/#MapEviction)

集成 HBase 后，每个 get() 都会将 HBase 中的记录加载到 Hazelcast 中。

# security - 无效算法参数异常

> ID：14771770
> 
> 赞同：1
> 
> 时间：2013-02-08T11:41:22.813
> 
> 标签：security, db2, java

我编写了一个 GUI 的 java 程序，当单击 Jbutton 时，它将数据从 db2 和 shwos 带入 JtextArea。

我已经使用了 ID/PAssword 的加密，如下代码

```
Properties properties = new Properties();
properties.setProperty("securityMechanism",
Integer.toString(DB2BaseDataSource.ENCRYPTED_USER_AND_PASSWORD_SECURITY));
properties.setProperty("user","myuserid");
properties.setProperty("password","mypassword"); myConn =
DriverManager.getConnection(url, properties); 
```

当我在eclipse中运行它时它运行良好。

刚刚使用导出选项创建了一个可运行的 jar 文件（选择将 reqd 库打包到生成的 jar 选项中）。当我双击 jar 文件时，它会显示 gui 窗口，但是当我单击按钮时，它不会获取任何数据。

我将数据库连接日志保存到一个文件中，该文件显示.....

```
Error msg: [jcc][1071][10615][4.8.86] Caught java.security.InvalidAlgorithmParameterException 
while initializing EncryptionManager.  
See attached Throwable for details. ERRORCODE=-4223, SQLSTATE=null
SQLSTATE: null
Error code: -4223 
```

请帮助解决这个问题。谢谢，

# c++ - 如何以编程方式更改主音量？

> ID：14771775
> 
> 赞同：2
> 
> 时间：2013-02-08T11:41:45.007
> 
> 标签：c++, c, winapi, windows-xp

在 Windows XP 上的 C/C++ 中，如何获取主音量或如何更改主音量...？

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:58:40.433

MSDN 库中 API 文档的起点是[这里](https://msdn.microsoft.com/library/vs/alm/dd756701(v=vs.85).aspx)。

可以通过搜索找到有用的代码`MIXERCONTROL_CONTROLTYPE_VOLUME`，产生这样的代码（取自[这里](http://wengophone.sourcearchive.com/documentation/2.1.2.dfsg0/Win32VolumeControl_8cpp-source.html)）

```
static const unsigned MAXIMUM_VOLUME_LEVEL_DEFINED_BY_USER = 100;

Win32VolumeControl::Win32VolumeControl(const AudioDevice & audioDevice) {
      std::string deviceName = audioDevice.getData()[0];
      //String deviceId = audioDevice.getData()[1];
      EnumDeviceType::DeviceType deviceType = EnumDeviceType::toDeviceType(audioDevice.getData()[2]);

      _hMixer = NULL;

      int deviceId = Win32AudioDeviceId::getMixerDeviceId(deviceName);

      MMRESULT mr = initVolumeControl(deviceId, deviceType);
      if (mr != MMSYSERR_NOERROR) {
            _hMixer = NULL;
            _isSettable = false;
            if (deviceType == EnumDeviceType::DeviceTypeWaveIn) {
                  deviceType = EnumDeviceType::DeviceTypeMicrophoneIn;
                  MMRESULT mr = initVolumeControl(deviceId, deviceType);
                  if (mr == MMSYSERR_NOERROR) {
                        _isSettable = true;
                  }
            }
      } else {
            _isSettable = true;
      }
}

Win32VolumeControl::~Win32VolumeControl() {
      close();
}

int Win32VolumeControl::getLevel() {
      if (!_isSettable) {
            return 0;
      }

      MMRESULT mr = createMixerControl(MIXERCONTROL_CONTROLTYPE_VOLUME);
      if (mr != MMSYSERR_NOERROR) {
            return -1;
      }

      const unsigned MINIMUM_VOLUME_LEVEL = _mxc.Bounds.dwMinimum;
      const unsigned MAXIMUM_VOLUME_LEVEL  = _mxc.Bounds.dwMaximum;

      MIXERCONTROLDETAILS_UNSIGNED mxcdVolume;

      MIXERCONTROLDETAILS mxcd;
      mxcd.cbStruct = sizeof(MIXERCONTROLDETAILS);
      mxcd.dwControlID = _mxc.dwControlID;
      mxcd.cChannels = 1;
      mxcd.cMultipleItems = 0;
      mxcd.cbDetails = sizeof(MIXERCONTROLDETAILS_UNSIGNED);
      mxcd.paDetails = &mxcdVolume;

      mr = ::mixerGetControlDetailsA((HMIXEROBJ) _hMixer, &mxcd,
            MIXER_OBJECTF_HMIXER | MIXER_GETCONTROLDETAILSF_VALUE);
      if (mr != MMSYSERR_NOERROR) {
            LOG_ERROR("couldn't get the volume level, mixerGetControlDetailsA() failed");
            return -1;
      }

      return (int) (((float) ((mxcdVolume.dwValue - MINIMUM_VOLUME_LEVEL) * MAXIMUM_VOLUME_LEVEL_DEFINED_BY_USER) /
            (float) (MAXIMUM_VOLUME_LEVEL - MINIMUM_VOLUME_LEVEL)) + 0.5);
}

bool Win32VolumeControl::setLevel(unsigned level) {
      if (!_isSettable) {
            return false;
      }

      MMRESULT mr = createMixerControl(MIXERCONTROL_CONTROLTYPE_VOLUME);
      if (mr != MMSYSERR_NOERROR) {
            return false;
      }

      const unsigned MINIMUM_VOLUME_LEVEL = _mxc.Bounds.dwMinimum;
      const unsigned MAXIMUM_VOLUME_LEVEL  = _mxc.Bounds.dwMaximum;

      MIXERCONTROLDETAILS_UNSIGNED mxcdVolume;
      mxcdVolume.dwValue = level * (MAXIMUM_VOLUME_LEVEL - MINIMUM_VOLUME_LEVEL) / MAXIMUM_VOLUME_LEVEL_DEFINED_BY_USER;

      MIXERCONTROLDETAILS mxcd;
      mxcd.cbStruct = sizeof(MIXERCONTROLDETAILS);
      mxcd.dwControlID = _mxc.dwControlID;
      mxcd.cChannels = 1;
      mxcd.cMultipleItems = 0;
      mxcd.cbDetails = sizeof(MIXERCONTROLDETAILS_UNSIGNED);
      mxcd.paDetails = &mxcdVolume;

      mr = ::mixerSetControlDetails((HMIXEROBJ) _hMixer, &mxcd,
            MIXER_OBJECTF_HMIXER | MIXER_SETCONTROLDETAILSF_VALUE);
      if (mr != MMSYSERR_NOERROR) {
            LOG_ERROR("couldn't set the volume level, mixerSetControlDetails() failed");
            return false;
      }

      return true;
}

bool Win32VolumeControl::setMute(bool mute) {
      if (!_isSettable) {
            return false;
      }

      MMRESULT mr = createMixerControl(MIXERCONTROL_CONTROLTYPE_MUTE);
      if (mr != MMSYSERR_NOERROR) {
            return false;
      }

      MIXERCONTROLDETAILS_BOOLEAN mxcbMute;
      mxcbMute.fValue = mute;

      MIXERCONTROLDETAILS mxcd;
      mxcd.cbStruct = sizeof(MIXERCONTROLDETAILS);
      mxcd.dwControlID = _mxc.dwControlID;
      mxcd.cChannels = 1;
      mxcd.cMultipleItems = 0;
      mxcd.cbDetails = sizeof(MIXERCONTROLDETAILS_BOOLEAN);
      mxcd.paDetails = &mxcbMute;

      mr = ::mixerSetControlDetails((HMIXEROBJ) _hMixer, &mxcd,
                        MIXER_OBJECTF_HMIXER | MIXER_SETCONTROLDETAILSF_VALUE);
      if (mr != MMSYSERR_NOERROR) {
            LOG_ERROR("couldn't mute/unmute the audio device, mixerSetControlDetails() failed");
            return false;
      }

      return true;
}

bool Win32VolumeControl::isMuted() {
      if (!_isSettable) {
            return false;
      }

      MMRESULT mr = createMixerControl(MIXERCONTROL_CONTROLTYPE_MUTE);
      if (mr != MMSYSERR_NOERROR) {
            return false;
      }

      MIXERCONTROLDETAILS_BOOLEAN mxcbMute;

      MIXERCONTROLDETAILS mxcd;
      mxcd.cbStruct = sizeof(MIXERCONTROLDETAILS);
      mxcd.dwControlID = _mxc.dwControlID;
      mxcd.cChannels = 1;
      mxcd.cMultipleItems = 0;
      mxcd.cbDetails = sizeof(MIXERCONTROLDETAILS_BOOLEAN);
      mxcd.paDetails = &mxcbMute;

      mr = ::mixerGetControlDetailsA((HMIXEROBJ) _hMixer, &mxcd,
                        MIXER_OBJECTF_HMIXER | MIXER_SETCONTROLDETAILSF_VALUE);
      if (mr != MMSYSERR_NOERROR) {
            LOG_ERROR("couldn't get if the audio device is mute/unmute, mixerGetControlDetailsA() failed");
            return false;
      }

      return mxcbMute.fValue;
}

bool Win32VolumeControl::selectAsRecordDevice() {
      if (!_isSettable) {
            return false;
      }

      MMRESULT mr = createMixerControl(MIXERCONTROL_CONTROLTYPE_MUX);
      if (mr != MMSYSERR_NOERROR) {
            return false;
      }

      MIXERCONTROLDETAILS_BOOLEAN mxcbSelect;
      mxcbSelect.fValue = true;

      MIXERCONTROLDETAILS mxcd;
      mxcd.cbStruct = sizeof(MIXERCONTROLDETAILS);
      mxcd.dwControlID = _mxc.dwControlID;
      mxcd.cChannels = 1;
      mxcd.cMultipleItems = 0;
      mxcd.cbDetails = sizeof(MIXERCONTROLDETAILS_BOOLEAN);
      mxcd.paDetails = &mxcbSelect;

      mr = ::mixerSetControlDetails((HMIXEROBJ) _hMixer, &mxcd,
                        MIXER_OBJECTF_HMIXER | MIXER_SETCONTROLDETAILSF_VALUE);
      if (mr != MMSYSERR_NOERROR) {
            LOG_ERROR("couldn't select the audio device as the record device, mixerSetControlDetails() failed");
            return false;
      }

      return true;
}

bool Win32VolumeControl::isSelectedAsRecordDevice() {
      if (!_isSettable) {
            return false;
      }

      MMRESULT mr = createMixerControl(MIXERCONTROL_CONTROLTYPE_MUX);
      if (mr != MMSYSERR_NOERROR) {
            return false;
      }

      MIXERCONTROLDETAILS_BOOLEAN mxcbSelect;

      MIXERCONTROLDETAILS mxcd;
      mxcd.cbStruct = sizeof(MIXERCONTROLDETAILS);
      mxcd.dwControlID = _mxc.dwControlID;
      mxcd.cChannels = 1;
      mxcd.cMultipleItems = 0;
      mxcd.cbDetails = sizeof(MIXERCONTROLDETAILS_BOOLEAN);
      mxcd.paDetails = &mxcbSelect;

      mr = ::mixerGetControlDetailsA((HMIXEROBJ) _hMixer, &mxcd,
            MIXER_OBJECTF_HMIXER | MIXER_SETCONTROLDETAILSF_VALUE);
      if (mr != MMSYSERR_NOERROR) {
            LOG_ERROR("couldn't select the audio device as the record device, mixerSetControlDetails() failed");
            return false;
      }

      return mxcbSelect.fValue;
}

bool Win32VolumeControl::close() {
      if (!_isSettable) {
            return false;
      }

      if (_hMixer) {
            MMRESULT mr = ::mixerClose(_hMixer);
            if (mr != MMSYSERR_NOERROR) {
                  LOG_ERROR("couldn't close the mixer, mixerClose() failed");
                  return false;
            }
            return true;
      }

      return false;
}

Win32VolumeControl::initVolumeControl(unsigned deviceId, EnumDeviceType::DeviceType deviceType) {
      MMRESULT mr = ::mixerOpen(&_hMixer, deviceId, NULL, NULL, MIXER_OBJECTF_MIXER);
      if (mr != MMSYSERR_NOERROR) {
            _hMixer = NULL;
            return mr;
      }

      MIXERCAPSA mxcaps;
      mr = ::mixerGetDevCapsA(deviceId, &mxcaps, sizeof(MIXERCAPSA));
      if (mr != MMSYSERR_NOERROR) {
            return mr;
      }

      LOG_DEBUG("manufacturer's name for the mixer=" +
            std::string(mxcaps.szPname) + " " +
            String::fromNumber(mxcaps.wMid) + " " +
            String::fromNumber(mxcaps.wPid));

      DWORD dwComponentType;

      switch (deviceType) {
      case EnumDeviceType::DeviceTypeWaveOut:
            dwComponentType = MIXERLINE_COMPONENTTYPE_SRC_WAVEOUT;
            break;

      case EnumDeviceType::DeviceTypeWaveIn:
            dwComponentType = MIXERLINE_COMPONENTTYPE_DST_WAVEIN;
            break;

      case EnumDeviceType::DeviceTypeCDOut:
            dwComponentType = MIXERLINE_COMPONENTTYPE_SRC_COMPACTDISC;
            break;

      case EnumDeviceType::DeviceTypeMicrophoneOut:
            dwComponentType = MIXERLINE_COMPONENTTYPE_SRC_MICROPHONE;
            break;

      case EnumDeviceType::DeviceTypeMicrophoneIn:
            dwComponentType = MIXERLINE_COMPONENTTYPE_DST_WAVEIN;
            break;

      case EnumDeviceType::DeviceTypeMasterVolume:
            dwComponentType = MIXERLINE_COMPONENTTYPE_DST_SPEAKERS;
            break;

      default:
            LOG_FATAL("unknow device type=" + EnumDeviceType::toString(deviceType));
      }

      mr = createMixerLine(dwComponentType);
      if (mr != MMSYSERR_NOERROR) {
            return mr;
      }

      //For microphone in, we first look for the wave in mixer
      //and then for the microphone
      if (deviceType == EnumDeviceType::DeviceTypeMicrophoneIn) {
            mr = createSecondMixerLine(MIXERLINE_COMPONENTTYPE_SRC_MICROPHONE);
            if (mr != MMSYSERR_NOERROR) {
                  return mr;
            }
      }
      //

      mr = createMixerControl(MIXERCONTROL_CONTROLTYPE_VOLUME);
      if (mr != MMSYSERR_NOERROR) {
            return mr;
      }

      LOG_DEBUG("destination line name=" + std::string(_mxl.szName) +
            " volume controller name=" + std::string(_mxc.szName));

      //Everything went fine
      return mr;
}

MMRESULT Win32VolumeControl::createMixerLine(DWORD dwComponentType) {
      _mxl.cbStruct = sizeof(MIXERLINEA);
      _mxl.dwComponentType = dwComponentType;

      MMRESULT mr = ::mixerGetLineInfoA((HMIXEROBJ) _hMixer, &_mxl,
            MIXER_OBJECTF_HMIXER | MIXER_GETLINEINFOF_COMPONENTTYPE);
      if (mr != MMSYSERR_NOERROR) {
            LOG_ERROR("mixerGetLineInfoA() failed using dwComponentType=" + String::fromNumber(dwComponentType));
      }

      return mr;
}

MMRESULT Win32VolumeControl::createSecondMixerLine(DWORD dwComponentType) {
      unsigned connections = _mxl.cConnections;
      DWORD destination = _mxl.dwDestination;
      MMRESULT mr;

      for (unsigned i = 0; i < connections; ++i) {
            _mxl.cbStruct = sizeof(MIXERLINEA);
            _mxl.dwSource = i;
            _mxl.dwDestination = destination;

            mr = ::mixerGetLineInfoA((HMIXEROBJ) _hMixer, &_mxl,
                                    MIXER_OBJECTF_HMIXER | MIXER_GETLINEINFOF_SOURCE);

            if (mr == MMSYSERR_NOERROR && _mxl.dwComponentType == dwComponentType) {
                  break;
            }
      }

      if (mr != MMSYSERR_NOERROR) {
            LOG_ERROR("mixerGetLineInfoA() failed using dwComponentType=" + String::fromNumber(dwComponentType));
      }

      return mr;
}

MMRESULT Win32VolumeControl::createMixerControl(DWORD dwControlType) {
      _mxlc.cbStruct = sizeof(MIXERLINECONTROLSA);
      _mxlc.dwLineID = _mxl.dwLineID;

      //MIXERCONTROL_CONTROLTYPE_VOLUME
      //MIXERCONTROL_CONTROLTYPE_MIXER
      //MIXERCONTROL_CONTROLTYPE_MUX
      //MIXERCONTROL_CONTROLTYPE_MUTE
      _mxlc.dwControlType = dwControlType;

      _mxlc.cControls = 1;
      _mxlc.cbmxctrl = sizeof(MIXERCONTROLA);
      _mxlc.pamxctrl = &_mxc;

      MMRESULT mr = ::mixerGetLineControlsA((HMIXEROBJ) _hMixer, &_mxlc,
            MIXER_OBJECTF_HMIXER | MIXER_GETLINECONTROLSF_ONEBYTYPE);
      if (mr != MMSYSERR_NOERROR) {
            LOG_ERROR("mixerGetLineControlsA() failed using dwControType=" + String::fromNumber(dwControlType));
      }

      return mr;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T01:43:06.503

这里。

```
#include <windows.h>
#pragma comment(lib, "winmm")

// to mute:
waveOutSetVolume(NULL, 0);

// full volume:
waveOutSetVolume(NULL, 0xFFFF); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T05:41:01.297

旧式混音器 API 可能难以使用。我建议使用 WASAPI API。

WASAPI - [http://msdn.microsoft.com/en-us/library/dd371455(v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/dd371455(v=VS.85).aspx)

# ios - MKMapView 因 setRegion 而崩溃

> ID：14771776
> 
> 赞同：1
> 
> 时间：2013-02-08T11:41:58.350
> 
> 标签：ios, objective-c, xcode, mkmapview

我想在地图上显示一个特定的地址。这是我的代码。

```
- (void)viewDidLoad{
[super viewDidLoad];

CLLocationCoordinate2D startCoord = CLLocationCoordinate2DMake(51.514302, 7.616798);
MKCoordinateRegion adjustedRegion = [_map regionThatFits:MKCoordinateRegionMakeWithDistance(startCoord, 200.0, 200.0)];
adjustedRegion.span = MKCoordinateSpanMake(0.005, 0.005);

[_map setRegion:adjustedRegion]; 
```

在模拟器上它工作正常，但在我的 iPad 上它崩溃了......我的错在哪里？

```
Last Exception Backtrace:
0   CoreFoundation                  0x33cbe3e2 __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x3bb4e95e objc_exception_throw + 26
2   CoreFoundation                  0x33cbe0d0 -[NSException raise] + 4
3   MapKit                          0x34aec530 -[MKMapView setRegion:animated:] + 672
4   MapKit                          0x34aec64a __32-[MKMapView setRegion:animated:]_block_invoke_0 + 90
5   MapKit                          0x34ad6006 -[MKMapView _updateCenteredAttributesWithCoordinate:] + 122
6   MapKit                          0x34ad5f3a -[MKMapView _sizeDidChangeWithCenterCoordinate:] + 126
7   MapKit                          0x34ae8b58 -[MKMapView setBounds:] + 224
8   UIKit                           0x35cb2476 -[UIView(Geometry) _applyISEngineLayoutValues] + 246
9   UIKit                           0x35b3068a -[UIView(Geometry) _resizeWithOldSuperviewSize:] + 138
10  CoreFoundation                  0x33cb9c1c __NSArrayChunkIterate + 364
11  CoreFoundation                  0x33cb2bb2 __NSArrayEnumerate + 590
12  CoreFoundation                  0x33c14e32 -[NSArray enumerateObjectsWithOptions:usingBlock:] + 58
13  UIKit                           0x35ae9096 -[UIView(Geometry) resizeSubviewsWithOldSize:] + 114
14  UIKit                           0x35f09da8 -[UIView(AdditionalLayoutSupport) _is_layout] + 112
15  UIKit                           0x35ad6ae0 -[UIView(Hierarchy) layoutSubviews] + 68
16  UIKit                           0x35ad08c2 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 254
17  QuartzCore                      0x3587c50e -[CALayer layoutSublayers] + 210
18  QuartzCore                      0x3587c0b0 CA::Layer::layout_if_needed(CA::Transaction*) + 456
19  QuartzCore                      0x358aaeca -[CALayer layoutIfNeeded] + 138
20  UIKit                           0x35b7a0dc -[UIViewController window:setupWithInterfaceOrientation:] + 204
21  UIKit                           0x35b792c6 -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:isRotating:] + 3598
22  UIKit                           0x35b784aa -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:] + 42
23  UIKit                           0x35b78434 -[UIWindow _setRotatableViewOrientation:duration:force:] + 64
24  UIKit                           0x35cadcb4 __57-[UIWindow _updateToInterfaceOrientation:duration:force:]_block_invoke_0 + 100
25  UIKit                           0x35b3667e -[UIWindow _updateToInterfaceOrientation:duration:force:] + 214
26  UIKit                           0x35b363c2 -[UIWindow setAutorotates:forceUpdateInterfaceOrientation:] + 690
27  UIKit                           0x35b35d2a -[UIViewController _tryBecomeRootViewControllerInWindow:] + 150
28  UIKit                           0x35b2ce86 -[UIWindow addRootViewControllerViewIfPossible] + 366
29  UIKit                           0x35b28af0 -[UIWindow _setHidden:forced:] + 360
30  UIKit                           0x35b6a1dc -[UIWindow makeKeyAndVisible] + 56
31  UIKit                           0x35b2d7fe -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1642
32  UIKit                           0x35b2582e -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 694
33  UIKit                           0x35acdd1a -[UIApplication handleEvent:withNewEvent:] + 1006
34  UIKit                           0x35acd7a8 -[UIApplication sendEvent:] + 68
35  UIKit                           0x35acd1ea _UIApplicationHandleEvent + 6194
36  GraphicsServices                0x377c05f2 _PurpleEventCallback + 586
37  GraphicsServices                0x377c0222 PurpleEventCallback + 30
38  CoreFoundation                  0x33c933e2 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 30
39  CoreFoundation                  0x33c93386 __CFRunLoopDoSource1 + 134
40  CoreFoundation                  0x33c9220a __CFRunLoopRun + 1378
41  CoreFoundation                  0x33c05238 CFRunLoopRunSpecific + 352
42  CoreFoundation                  0x33c050c4 CFRunLoopRunInMode + 100
43  UIKit                           0x35b24468 -[UIApplication _run] + 664
44  UIKit                           0x35b212b4 UIApplicationMain + 1116
45  AD HOK                          0x000bcd80 main (main.m:16)
46  libdyld.dylib                   0x3bf7bb1c start + 0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3c042350 __pthread_kill + 8
1   libsystem_c.dylib               0x3bfb8fb2 pthread_kill + 54
2   libsystem_c.dylib               0x3bff5366 abort + 90
3   libc++abi.dylib                 0x3b59ddda abort_message + 70
4   libc++abi.dylib                 0x3b59b094 _ZL17default_terminatev + 20
5   libobjc.A.dylib                 0x3bb4ea58 _ZL15_objc_terminatev + 144
6   libc++abi.dylib                 0x3b59b118 _ZL19safe_handler_callerPFvvE + 76
7   libc++abi.dylib                 0x3b59b1b0 std::terminate() + 16
8   libc++abi.dylib                 0x3b59c626 __cxa_rethrow + 90
9   libobjc.A.dylib                 0x3bb4e9b0 objc_exception_rethrow + 8
10  CoreFoundation                  0x33c0529c CFRunLoopRunSpecific + 452
11  CoreFoundation                  0x33c050c4 CFRunLoopRunInMode + 100
12  UIKit                           0x35b24468 -[UIApplication _run] + 664
13  UIKit                           0x35b212b4 UIApplicationMain + 1116
14  AD HOK                          0x000bcd80 main (main.m:16)
15  libdyld.dylib                   0x3bf7bb1c start + 0

Thread 1:
0   libsystem_kernel.dylib          0x3c042d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3bf90ad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3bf907f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3bf90680 start_wqthread + 4

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x3c0325d0 kevent64 + 24
1   libdispatch.dylib               0x3bf6dd22 _dispatch_mgr_invoke + 806
2   libdispatch.dylib               0x3bf69374 _dispatch_mgr_thread + 32

Thread 3:
0   libsystem_kernel.dylib          0x3c042d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3bf90ad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3bf907f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3bf90680 start_wqthread + 4

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x3c031e30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c031fd0 mach_msg + 48
2   CoreFoundation                  0x33c932b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x33c9202c __CFRunLoopRun + 900
4   CoreFoundation                  0x33c05238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x33c050c4 CFRunLoopRunInMode + 100
6   WebCore                         0x39be0390 _ZL12RunWebThreadPv + 440
7   libsystem_c.dylib               0x3bf9b0de _pthread_start + 306
8   libsystem_c.dylib               0x3bf9afa4 thread_start + 4

Thread 5:
0   libsystem_kernel.dylib          0x3c042d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3bf90ad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3bf907f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3bf90680 start_wqthread + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000000      r3: 0x3db31524
    r4: 0x00000006    r5: 0x3db31b78      r6: 0x210aa354      r7: 0x2fd459d4
    r8: 0x210aa330    r9: 0x00000300     r10: 0x00000000     r11: 0x7ff80000
    ip: 0x00000148    sp: 0x2fd459c8      lr: 0x3bfb8fb7      pc: 0x3c042350
  cpsr: 0x00000010 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T16:11:51.643

当您最终再次明确地设置该区域的跨度时，尚不清楚为什么要向地图询问适合的区域。此外，在布局完成之前，地图对这个问题没有有意义的答案。这可能是它崩溃的原因，因为该区域没有正确定义。

从您的代码看来，您只是想这样做：

```
- (void)viewDidLoad{
   [super viewDidLoad];

   CLLocationCoordinate2D startCoord = CLLocationCoordinate2DMake(51.514302, 7.616798);
   [_map setRegion:MKCoordinateRegionMakeWithDistance(startCoord, 200.0, 200.0) animated:NO];
} 
```

我认为这要简单得多，并且应该可以在设备上正常工作。希望有帮助。

# visual-studio-lightswitch - 灯开关文本框不可编辑

> ID：14771777
> 
> 赞同：0
> 
> 时间：2013-02-08T11:42:00.267
> 
> 标签：visual-studio-lightswitch, lightswitch-2012

我正在构建一个简单的灯开关应用程序。它有两个表，**Check**和**Sale**。当我添加新销售时，它可以选择付款类型。如果选择了检查选项，我需要输入销售的检查详细信息。我创建了一个模式窗口来输入数据。但是当窗口出现时，我无法输入新数据，因为文本框被禁用。

简单地说，我需要输入有关销售的检查详细信息，而无需进入另一个屏幕。非常感谢您的帮助。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:04:50.443

你有一个 1-Many 两个表之间的关系？如果你有一个 0..1-Many，如果你没有正确处理它，你就会遇到问题。

# node.js - Nodejs找不到模块'../build/Release/canvas'

> ID：14771781
> 
> 赞同：23
> 
> 时间：2013-02-08T11:42:07.583
> 
> 标签：node.js, node-canvas

我安装了 cairo 和[node-canvas](https://www.npmjs.com/package/canvas)。我尝试了一切，但仍然找不到模块。

```
sudo apt-get install libcairo2-dev
sudo npm install canvas
sudo npm install canvas -g 
```

如果我运行`require('canvas')`，我会收到此错误：

```
Error: Cannot find module '../build/Release/canvas'
    at Function._resolveFilename (module.js:332:11)
    at Function._load (module.js:279:25)
    at Module.require (module.js:354:17)
    at require (module.js:370:17)
    at Object.<anonymous> (/home/tomas/node_modules/canvas/lib/bindings.js:2:18)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:32)
    at Function._load (module.js:308:12)
    at Module.require (module.js:354:17) 
```

我使用 Ubuntu linux

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2020-07-30T14:55:46.667

就我而言，我必须花很多时间来解决这个问题。

### 我只是使用“npm uninstall canvas”，然后使用“npm i canvas”安装

如果上述选项不适合您，请尝试此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-14T13:16:00.320

我有同样的问题。问题是`install`脚本`node-canvas`从未被执行，这就是该`build`文件夹丢失的原因。

就我而言，删除`yarn.lock`文件是解决方案，因为它`node-canvas`出于某种原因跳过了软件包安装。一旦我让`npm`处理包，它成功安装`node-canvas`，运行`install`脚本，构建文件夹再次出现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-06T11:14:39.220

这里的问题看起来像 1\. 您的节点模块安装在不同的位置但是 node.js 运行时正在不同的位置搜索它。检查 NODE_PATH 并查看是否是这种情况。

[请参阅http://nodejs.org/api/modules.html#modules_loading_from_the_global_folders](http://nodejs.org/api/modules.html#modules_loading_from_the_global_folders)中解释的模块加载

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-04T11:40:49.643

在我的情况下，似乎也没有调用`install`脚本。`canvas`我没有删除锁定文件，而是手动调用了脚本，这解决了我的问题（至少是暂时的）。

因此，如果该`canvas`包已经安装，请转到*/node_modules/canvas/*并运行`npm run install`它会创建构建目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-26T00:08:45.413

我遇到了类似的问题，但我使用了 canvas-prebuilt ，它是 canvas 的替代品，我修复了它： **npm install -g node-gyp**然后**node-gyp rebuild**在终端

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-02-14T03:34:41.477

```
sudo apt-get install libpixman-1-dev libcairo2-dev libpangocairo-1.0-0 libpango1.0-dev libgif-dev  libjpeg-dev 
```

如果使用 ubuntu，尝试安装上面的 lib 然后安装 canvas。对我来说很好。</p>

如果你使用 cnpm 安装画布。试试 npm。

# iphone - 脸书相册中的图片

> ID：14771788
> 
> 赞同：3
> 
> 时间：2013-02-08T11:42:43.667
> 
> 标签：iphone, ios, objective-c, facebook

我正在实现一个 iPhone 应用程序，我必须从 facebook 相册中检索图像并将这些图片显示为应用程序中的图库。我有这个链接 [http://www.facebook.com/media/set/?set=a.457557810958775.98938.425513680829855&type=3](http://www.facebook.com/media/set/?set=a.457557810958775.98938.425513680829855&type=3)我必须从相册中获取所有图像。我为此尝试了 github 上的 GrabKit，但对我没有帮助，因为它有多种配置，如 Picasa、Instagram、flicker 等。但我只想要 facebook ......

请如果有人对此有任何想法或建议......那么非常感谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:43:40.947

如果您需要检索公共相册的图像，请不要使用 GrabKit。GrabKit 用于检索当前登录用户的相册（在您提到的各种平台上），而不是您似乎希望的公共相册。

我建议你只使用 Facebook iOS SDK。阅读他们的“入门”教程（[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)），一旦你弄清楚如何向 facebook 发出请求，看看他们的 Graph API（[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)），特别是关于“专辑”的页面（[https://developers.facebook.com/docs/reference/api/专辑/](https://developers.facebook.com/docs/reference/api/album/) )

我希望这有帮助 ：）

Pierre-Olivier Simonard - GrabKit 的开发者

# javascript - 通过语音输入拨打电话的 phonegap 代码

> ID：14771790
> 
> 赞同：0
> 
> 时间：2013-02-08T11:42:47.190
> 
> 标签：javascript, jquery, cordova

我想开发一个从语音输入拨打电话的应用程序。功能应该是当用户说出设备中存在的联系人姓名时必须转发呼叫。我从[https 获得了语音识别器的插件： //github.com/phonegap/phonegap-plugins/tree/master/Android/SpeechRecognizer](https://github.com/phonegap/phonegap-plugins/tree/master/Android/SpeechRecognizer.But)。但我不知道如何使用它来完成上述功能？谁能尽快帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:15:32.327

好吧，一旦您在 window.plugins.speechrecognizer.startRecognize 的成功回调中获得结果，您将使用它作为 contacts.find 方法的过滤器参数：

```
var options = new ContactFindOptions();
    options.filter=speechResult; 
    options.multiple
    var fields = ["displayName", "name", "phoneNumbers"];
    navigator.contacts.find(fields, onSuccess, onError, options); 
```

然后在 onSuccess 中，您需要获取电话号码，您必须决定联系人可能拥有多个电话号码中的哪一个才能使用它。我只是假设这个答案的第一个。然后将 document.location 设置为“tel:”url 以进行呼叫。

```
function onSuccess(contacts) {
    if (contacts.length == 1) {
        if (contacts[0].phoneNumbers != null) {
            document.location = "tel:" + contacts[0].phoneNumbers[0];
        }
    }
} 
```

那应该差不多了。

# iphone - JSON解析时的exc_breakpoint

> ID：14771791
> 
> 赞同：0
> 
> 时间：2013-02-08T11:42:49.483
> 
> 标签：iphone, ios, objective-c, json, parsing

我想解析许多 JSON 字符串。这是代码：

```
while(stations.count > 0) {
        NSString*string = [[[NSString alloc] initWithString:[stations objectAtIndex:0]] retain];

        NSMutableDictionary*dic = [[[NSMutableDictionary alloc]init]retain];

        NSData*data = [[[NSData alloc] initWithData:[string dataUsingEncoding:NSUTF8StringEncoding]]retain];
        NSMutableDictionary* pars = [[NSMutableDictionary alloc]initWithDictionary:[NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil]];

        [dic setObject:[NSString stringWithString:[pars objectForKey:@"nm"]] forKey:@"nm"];
        [dic setObject:[NSString stringWithString:[pars objectForKey:@"btr"]] forKey:@"btr"];
        [dic setObject:[NSString stringWithString:[pars objectForKey:@"id"]] forKey:@"id"];
        [dic setObject:[NSString stringWithString:[pars objectForKey:@"cntr"]] forKey:@"cntr"];
        [dic setObject:[NSString stringWithString:[pars objectForKey:@"gnr"]] forKey:@"gnr"];

        [pars release];
        @try {
            [parsedData addObject:[NSDictionary dictionaryWithDictionary:dic]];
        }
        @catch (NSException* exc) {
            NSLog(@"%@, %@", exc.description, exc.reason);
        }
        [dic release];
        [data release];
        [string release];
        [stations removeObjectAtIndex:0];

        if (i%1000==0) {
            NSLog(@"nnnn %i %i", parsedData.count, stations.count);
        }

        i++;
        float k = count;
        k = (i + 1)/k;

        [self performSelectorOnMainThread:@selector(increaseProgress:) withObject:[NSNumber numberWithFloat:k] waitUntilDone:YES];
    } 
```

在将（通常但不是每次）字符串添加到数组时，我得到错误：

> exc_breakpoint（代码=exc_i386_bpt

和：

> GuardMalloc [Radiocent new try-1820]：VM 分配 68752 字节失败
> 
> GuardMalloc[Radiocent new try-1820]：显式陷入调试器！！！

Stations 数组非常大……大约有 60000 个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:30:34.053

首先，当您分配时，您不需要保留，因为保留计数已经 +1。

```
NSMutableDictionary *dic = [[NSMutableDictionary alloc] init]; 
```

不是

```
NSMutableDictionary*dic = [[[NSMutableDictionary alloc]init]retain]; 
```

下面的行已经返回可变字典，因此您不必从中创建新字典，如果您想更改，只需调用 - mutableCopy 即可。

```
NSMutableDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil]; 
```

或创建副本：

```
NSMutableDictionary *dictionary = [[NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingAllowFragments error:nil] mutableCopy]; 
```

如果站是 JSON 字符串，则对所有站执行此操作：

```
NSData *data = [JSONString dataUsingEncoding:NSUTF8StringEncoding];
NSArray *stationsArray = [[NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingAllowFragments error:nil] mutableCopy];

for (NSDictionary *stationDic in stationArray)
{
     // This will iterate over each station dictionary in the station array
     // Do your stuff here ...
} 
```

对于您的示例：（我已添加 \" 来转义双引号，您不必这样做）

在您的示例周围放置方括号，这使其成为一个数组，您可以使用下面给定的代码遍历每个。（仅在它们不存在时添加）

```
NSString *example = @"[{\"id\":\"02AB99\",\"btr\":\"24\",\"cntr\":\"461E\",\"gnr\":\"8A51\",\"nm\":\"88.3 Fm Radio Q Jogjakarta\"}, {\"id\":\"026058\",\"btr\":\"160\",\"cntr\":\"461E\",\"gnr\":\"8A7B\",\"nm\":\"88.3 The Dog\"}, {\"id\":\"0300D2\",\"btr\":\"55 64\",\"cntr\":\"461C\",\"gnr\":\"8A75\",\"nm\":\"88.3 The Wind\"}, {\"id\":\"0159E6\",\"btr\":\"128\",\"cntr\":\"4610\",\"gnr\":\"8A6C\",\"nm\":\"88.30 Z Fm Radio Word Online\"}]";

NSError *error = nil;
NSArray *stationArray = [NSJSONSerialization JSONObjectWithData:[example dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingAllowFragments error:&error];

if (!error)
{
    for (NSDictionary *stationDic in stationArray)
    {
        NSLog(@"\nName: %@ \nDump: \n%@", [stationDic valueForKey:@"nm"], stationDic);
    }
} 
```

# java - 学习在类中创建对象和访问方法我怎么能..？

> ID：14771794
> 
> 赞同：0
> 
> 时间：2013-02-08T11:43:08.097
> 
> 标签：java, object, constructor, instance-variables

我的执行显示此错误：

> java.lang.NoSuchMethodError：主要

我需要让学生详细信息作为输出。该程序应访问上述所有方法。

```
 import java.io.*;
    import java.io.IOException;

    public class Student {
        String name;
        int age;
        String clas;
        int rank;
        int ID;

        public Student(String name){
        this.name = name;
        }

        public void studAge(int studAge)
        {
            age=studAge;
        }
        public void studClas(String studClas)
        {
            clas=studClas;
        }
        public void studRank(int studRank)
        {
            rank=studRank;
        }
        public void studID(int studID)
        {
            ID=studID;
        }
        public void displayStud()
        {
            System.out.println("Student Age is:"+age);
            System.out.println("Student Class is:"+clas);
            System.out.println("Student Rank is:"+rank);
            System.out.println("Student ID is:"+ID);
        }
    }
    class StudRecord{
       public static void main(String [] args)throws IOException
       {            
        Student studOne=new Student("Faraz");
        Student studTwo=new Student("Musheer");
        Student studThree=new Student("Imdad");
        Student studFour=new Student("Shahid");

        // Invoking methods for each object created         
        studOne.studAge(23);
        studOne.studClas("11th");
        studOne.studID(130018);
        studOne.studRank(16);

        studFour.studAge(21);
        studFour.studClas("11th");
        studFour.studID(130035);
        studFour.studRank(33);

        studTwo.studAge(26);
        studTwo.studClas("10th");
        studTwo.studID(130021);
        studTwo.studRank(2);

        studThree.studAge(24);
        studThree.studClas("11th");
        studThree.studID(130032);
        studThree.studRank(32);

        System.out.println();           
       }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:37:30.310

In Java only one class in a file may be marked public. In this case the class Student is marked public and therefore the NoSuchMethodException is thrown because the main method is not on the Student class but on the StudRecord class.

Therefore change the StudRecord class to public and the Student class to default access (no access modifier).

# javascript - new.js.haml 未呈现

> ID：14771797
> 
> 赞同：0
> 
> 时间：2013-02-08T11:43:18.533
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, model-view-controller

我有一个`form`设计如下

```
= form_for :url => @question do |f|
  %table
    %thead
      %td
        = f.label :ques
      %tr
        = select_tag 
```

选项 %tbody#questions

在我的控制器中，我有

```
def new
  @question = Question.new

  respond_to do |format|
    format.html
    format.js
  end
end 
```

在 new.html.haml

```
:javascript
  $('select').change(function() {
    $.ajax({
      url: window.location.href
    });
  }); 
```

我在上面的编码中哪里错了？为什么这个页面没有以js格式呈现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:48:32.053

您应该添加`dataType : 'script'`到您的 ajax 调用参数。

# php - 贝宝 - 订阅按钮

> ID：14771807
> 
> 赞同：0
> 
> 时间：2013-02-08T11:43:58.123
> 
> 标签：php, paypal, paypal-sandbox, recurring-billing

我正在尝试使用贝宝在 php 中创建定期付款。从我的企业帐户中，我创建了每天从用户那里收取 1 美元的按钮。在创建按钮时，我给出了返回 url 和取消 url。现在我需要跟踪事务详细信息，例如状态、为用户创建的配置文件 ID、时间戳等。现在我只是使用 html 代码和按钮 & 在成功 url 中只使用 get & post 打印值。

我很清楚这些事情。有人请告诉我实际的程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:01:45.463

您应该查看[定期计费。](https://www.x.com/developers/paypal/products/recurring-billing)希望它会有所帮助

# unit-testing - 如何测试 AngularJS 自定义提供程序

> ID：14771810
> 
> 赞同：53
> 
> 时间：2013-02-08T11:44:12.837
> 
> 标签：unit-testing, angularjs, jasmine

有没有人有一个如何对提供者进行单元测试的例子？

例如：

**配置.js**

```
angular.module('app.config', [])
  .provider('config', function () {
    var config = {
          mode: 'distributed',
          api:  'path/to/api'
        };

    this.mode = function (type) {
      if (type) {
        config.isDistributedInstance = type === config.mode;
        config.isLocalInstance = !config.isDistributedInstance;
        config.mode = type;
        return this;
      } else {
        return config.mode;
      }
    };

    this.$get = function () {
      return config;
    };
  }]); 
```

**应用程序.js**

```
angular.module('app', ['app.config'])
  .config(['configProvider', function (configProvider) {
    configProvider.mode('local');
  }]); 
```

`app.js`正在测试中使用，我看到已经配置`configProvider`，我可以将其作为服务进行测试。但是如何测试配置能力呢？还是根本不需要？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-06-29T09:06:49.047

我有同样的问题，只在这个[Google Group 答案](https://groups.google.com/forum/#!topic/angular/D00S1DqE3jM)中找到了一个可行的解决方案，它被引用了[fiddle example](http://jsfiddle.net/eitanp461/qTvMz/)。

测试您的提供程序代码看起来像这样（按照[小提琴示例](http://jsfiddle.net/eitanp461/qTvMz/)中的代码以及对我有用的代码）：

```
describe('Test app.config provider', function () {

    var theConfigProvider;

    beforeEach(function () {
        // Initialize the service provider 
        // by injecting it to a fake module's config block
        var fakeModule = angular.module('test.app.config', function () {});
        fakeModule.config( function (configProvider) {
            theConfigProvider = configProvider;
        });
        // Initialize test.app injector
        module('app.config', 'test.app.config');

        // Kickstart the injectors previously registered 
        // with calls to angular.mock.module
        inject(function () {});
    });

    describe('with custom configuration', function () {
        it('tests the providers internal function', function () {
            // check sanity
            expect(theConfigProvider).not.toBeUndefined();
            // configure the provider
            theConfigProvider.mode('local');
            // test an instance of the provider for 
            // the custom configuration changes
            expect(theConfigProvider.$get().mode).toBe('local');
        });
    });

}); 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-10-31T11:54:27.820

我一直在使用@Mark Gemmill 的解决方案，它运行良好，但后来偶然发现了这个稍微不那么冗长的解决方案，它消除了对假模块的需求。

[https://stackoverflow.com/a/15828369/1798234](https://stackoverflow.com/a/15828369/1798234)

所以，

```
var provider;

beforeEach(module('app.config', function(theConfigProvider) {
    provider = theConfigProvider;
}))

it('tests the providers internal function', inject(function() {
    provider.mode('local')
    expect(provider.$get().mode).toBe('local');
})); 
```

如果您的提供者 $get 方法具有依赖项，您可以手动传递它们，

```
var provider;

beforeEach(module('app.config', function(theConfigProvider) {
    provider = theConfigProvider;
}))

it('tests the providers internal function', inject(function(dependency1, dependency2) {
    provider.mode('local')
    expect(provider.$get(dependency1, dependency2).mode).toBe('local');
})); 
```

或者使用 $injector 创建一个新实例，

```
var provider;

beforeEach(module('app.config', function(theConfigProvider) {
    provider = theConfigProvider;
}))

it('tests the providers internal function', inject(function($injector) {
    provider.mode('local')
    var service = $injector.invoke(provider);
    expect(service.mode).toBe('local');
})); 
```

以上两种方法还允许您为块`it`中的每个单独语句重新配置提供程序`describe`。但是如果你只需要为多个测试配置一次提供程序，你可以这样做，

```
var service;

beforeEach(module('app.config', function(theConfigProvider) {
    var provider = theConfigProvider;
    provider.mode('local');
}))

beforeEach(inject(function(theConfig){
    service = theConfig;
}));

it('tests the providers internal function', function() {
    expect(service.mode).toBe('local');
});

it('tests something else on service', function() {
    ...
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-19T03:43:50.713

@Stephane Catala 的回答特别有帮助，我使用他的 providerGetter 来得到我想要的。能够让提供者进行初始化，然后通过实际服务来验证各种设置是否正常工作，这一点很重要。示例代码：

```
 angular
        .module('test', [])
        .provider('info', info);

    function info() {
        var nfo = 'nothing';
        this.setInfo = function setInfo(s) { nfo = s; };
        this.$get = Info;

        function Info() {
            return { getInfo: function() {return nfo;} };
        }
    } 
```

Jasmine 测试规范：

```
 describe("provider test", function() {

        var infoProvider, info;

        function providerGetter(moduleName, providerName) {
            var provider;
            module(moduleName, 
                         [providerName, function(Provider) { provider = Provider; }]);
            return function() { inject(); return provider; }; // inject calls the above
        }

        beforeEach(function() {
            infoProvider = providerGetter('test', 'infoProvider')();
        });

        it('should return nothing if not set', function() {
            inject(function(_info_) { info = _info_; });
            expect(info.getInfo()).toEqual('nothing');
        });

        it('should return the info that was set', function() {
            infoProvider.setInfo('something');
            inject(function(_info_) { info = _info_; });
            expect(info.getInfo()).toEqual('something');
        });

    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-22T17:52:53.527

这是一个小助手，它正确封装了获取提供程序，从而确保各个测试之间的隔离：

```
 /**
   * @description request a provider by name.
   *   IMPORTANT NOTE: 
   *   1) this function must be called before any calls to 'inject',
   *   because it itself calls 'module'.
   *   2) the returned function must be called after any calls to 'module',
   *   because it itself calls 'inject'.
   * @param {string} moduleName
   * @param {string} providerName
   * @returns {function} that returns the requested provider by calling 'inject'
   * usage examples:
    it('fetches a Provider in a "module" step and an "inject" step', 
        function() {
      // 'module' step, no calls to 'inject' before this
      var getProvider = 
        providerGetter('module.containing.provider', 'RequestedProvider');
      // 'inject' step, no calls to 'module' after this
      var requestedProvider = getProvider();
      // done!
      expect(requestedProvider.$get).toBeDefined();
    });
   * 
    it('also fetches a Provider in a single step', function() {
      var requestedProvider = 
        providerGetter('module.containing.provider', 'RequestedProvider')();

      expect(requestedProvider.$get).toBeDefined();
    });
   */
  function providerGetter(moduleName, providerName) {
    var provider;
    module(moduleName, 
           [providerName, function(Provider) { provider = Provider; }]);
    return function() { inject(); return provider; }; // inject calls the above
  } 
```

*   获取提供者的过程是完全封装的：不需要减少测试之间隔离的闭包变量。
*   该过程可以分为两个步骤，一个“模块”步骤和一个“注入”步骤，它们可以分别与单元测试中对“模块”和“注入”的其他调用进行分组。
*   如果不需要拆分，则可以在单个命令中简单地检索提供者！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-21T03:38:13.423

我个人使用这种技术来模拟来自外部库的提供程序，您可以将其放入所有测试的帮助文件中。当然，它也可以用于自定义提供程序，就像这个问题一样。这个想法是在应用程序调用它之前在他的模块中重新定义提供程序

```
describe('app', function() {
  beforeEach(module('app.config', function($provide) {
    $provide.provider('config', function() {
      var mode = jasmine.createSpy('config.mode');

      this.mode = mode;

      this.$get = function() {
        return {
          mode: mode
        };
      };
    });
  }));

  beforeEach(module('app'));

  describe('.config', function() {
    it('should call config.mode', inject(function(config) {
      expect(config.mode).toHaveBeenCalled();
    }));
  });
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-12T16:35:10.563

我只需要测试提供程序上的某些设置是否正确设置，因此我在通过`module()`.

在尝试了上述一些解决方案之后，我还遇到了一些关于未找到提供者的问题，因此强调了需要一种替代方法。

之后，我添加了进一步的测试，使用这些设置来检查它们是否反映了新设置值的使用。

```
describe("Service: My Service Provider", function () {
    var myService,
        DEFAULT_SETTING = 100,
        NEW_DEFAULT_SETTING = 500;

    beforeEach(function () {

        function configurationFn(myServiceProvider) {
            /* In this case, `myServiceProvider.defaultSetting` is an ES5 
             * property with only a getter. I have functions to explicitly 
             * set the property values.
             */
            expect(myServiceProvider.defaultSetting).to.equal(DEFAULT_SETTING);

            myServiceProvider.setDefaultSetting(NEW_DEFAULT_SETTING);

            expect(myServiceProvider.defaultSetting).to.equal(NEW_DEFAULT_SETTING);
        }

        module("app", [
            "app.MyServiceProvider",
            configurationFn
        ]);

        function injectionFn(_myService) {
            myService = _myService;
        }

        inject(["app.MyService", injectionFn]);
    });

    describe("#getMyDefaultSetting", function () {

        it("should test the new setting", function () {
            var result = myService.getMyDefaultSetting();

             expect(result).to.equal(NEW_DEFAULT_SETTING);
        });

    });

}); 
```

# mysql - 使用平均值计算更新列

> ID：14771815
> 
> 赞同：1
> 
> 时间：2013-02-08T11:44:21.070
> 
> 标签：mysql

桌**船的原始属性（出价、名称、长度、颜色）**

然后我创建了一个名为 relLength ant 的新属性，我需要编写句子，我将在其中使用以下公式更新我的列（现在设置为 0 强文本）：

relLength = 长度/平均长度。

我在这张名为船的表中有这个属性：bID、名称、长度、颜色、relLength（这是创建的）

这是我写的，但不起作用

```
UPDATE boat
SET relLength = length/  (SELECT AVG(length) FROM boat) 
```

（平均为 38.75）

其他练习即将创建视图。我需要获取原始表（内部没有 relLengt）并创建视图，在其中创建此（relLength）属性并仅在视图表中而不是在表中填充先前的公式。

谢谢你的帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:48:00.840

尝试以下操作：

```
update boat b, (select avg(length) avg_len from boat) v
set
  b.rellength = v.avg_len 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T20:27:42.420

非常感谢。

几乎是我一直在寻找的。只是一个小的更正（最后一行的**长度**/v.avg_len）

这就是现在对我有用的：

```
update boat b, (select avg(length) avg_len from boat) v
set
  b.rellength = length / v.avg_len 
```

任何人都可以创建视图吗？我需要从原始表船创建视图（bID，名称，长度，颜色）并创建列 rellength（就像我用 alter table 做的那样......）和像上面写的那样计算（属性 rellength 在原始文件中不存在表，仅在视图中，其中 a 具有以下属性：bID、名称、长度、颜色、**相对长度**！）

再次感谢 ：））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:13:10.800

我确实找到了查看的解决方案。

```
CREATE OR REPLACE VIEW newBoat
AS SELECT b.bid, b.name, b.length, b.color, b.length/(
                            select avg(length) 
                            from boat b) as relLengt
FROM boat b; 
```

# amazon-web-services - 云端是否不支持具有自定义来源的 CORS？

> ID：14771818
> 
> 赞同：2
> 
> 时间：2013-02-08T11:44:25.463
> 
> 标签：amazon-web-services, cors, amazon-cloudfront

似乎我不能在[Amazon CloudFront](http://aws.amazon.com/cloudfront/)和[跨域 XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest#Cross-domain_requests)上使用自定义源，因为 CloudFront 不会根据请求和响应行为中的*HTTP 方法*[和自定义源支持的 HTTP 状态代码](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/RequestAndResponseBehaviorCustomOrigin.html#RequestCustomHTTPMethods)部分转发预检 OPTIONS 请求：

> CloudFront 仅接受来自最终用户`GET`的`HEAD`请求。

我在网上找不到任何人抱怨这个，所以任何人都可以证实这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T11:07:19.823

CloudFront 现在支持以下请求（包括 OPTIONS）：

*   删除
*   得到
*   头
*   选项
*   修补
*   邮政
*   放

[问题中引用的CloudFront 文档](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/RequestAndResponseBehaviorCustomOrigin.html#RequestCustomHTTPMethods "HTTP Methods")中的*HTTP 方法*部分已更新。

# javascript - 当前页面中先前页面的 ID

> ID：14771820
> 
> 赞同：0
> 
> 时间：2013-02-08T11:44:35.430
> 
> 标签：javascript, html, jquery-mobile

在我的应用程序中，我使用 jquery mobile 从一个页面导航到另一个页面。现在我的问题是，目前我在第三页上，我想知道父页（或第一页）的 id。这在 jquery mobile 或 javascript 中是否可行。如果是，那么我如何执行此操作。

提前致谢。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:48:12.607

这应该用于获取**`id`**上一页。

```
$(document).on('pagebeforeshow', '#second', function(e, data){       
    alert(data.prevPage.attr('id'));
}); 
```

**`jsFiddle`**例如：http: [//jsfiddle.net/Gajotres/nPeLf/](http://jsfiddle.net/Gajotres/nPeLf/)

有关此解决方案的更多信息以及其他一些解决方案（带有示例）可以在我的**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**中找到，为了透明，这是我的个人博客。或者你可以在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。在这两种情况下，请搜索以下章节： **页面转换之间的数据/参数操作**。

# ruby - 使用 EM-HTTP 使用队列：无法创建新套接字：打开的文件太多

> ID：14771824
> 
> 赞同：2
> 
> 时间：2013-02-08T11:44:38.687
> 
> 标签：ruby, rabbitmq, amqp, eventmachine

我有一个 ruby​​ 进程，它使用 amqp gem 消耗来自 RabbitMQ 队列的消息，如下所示：

```
require "bundler/setup"
require "amqp"
require 'eventmachine'
require 'em-http'

AMQP.start(:host => $AMQP_URL) do |connection|
  @channel ||= AMQP::Channel.new(connection)
  @queue   ||= @channel.queue("results")

  puts " [*] Waiting for messages. "

  @queue.subscribe do |body|    
    http = EventMachine::HttpRequest.new(URL).post :body => body          

    http.callback {
      # do something
    }        

    http.errback  { 
      $LOG.error "[errorback] -> #{http.error}"    
    }
  end
end 
```

现在 URL 很慢，并且队列有很多消息（> 30K），我在日志中收到了这个错误：

```
**[errorback] -> unable to create new socket: Too many open files** 
```

任何帮助都将受到高度赞赏，因为我一直在尝试找出如何解决它但根本没有结果。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-27T13:03:54.047

你消费消息的速度太快了。由于您基本上一次获取所有未传递的消息（即 RabbitMQ 可以传递它们的速度），并为每条消息打开一个 HTTP 连接，因此您最终会消耗系统的所有可用资源（在这种情况下是并行打开套接字的数量） .

在阅读了有关[消息确认](http://rdoc.info/gems/amqp/file/docs/Queues.textile#Message_acknowledgements)和[`AMQP::Queue#subscribe`](http://rdoc.info/gems/amqp/AMQP/Queue%3asubscribe)) 的文档后，我建议对您的代码进行以下更改：

```
AMQP.start(host: $AMQP_URL) do |connection|
  @channel ||= AMQP::Channel.new(connection)
  @channel.prefetch(5) 
  @queue ||= @channel.queue("results")

  # disable auto-ack, switch to manual mode
  @queue.subscribe(ack: true) do |meta, body|
    http = EventMachine::HttpRequest.new(URL).post body: body          

    http.callback {
      # do something

      # acknowledge message consumption
      meta.ack
    }

    http.errback {
      # ...
      # do not `meta.ack` here, so the message gets redelivered
    }
  end
end 
```

这样，您可以很容易地限制您的工作量。

# jquery - 复选框必须在所有页面上保持选中状态

> ID：14771825
> 
> 赞同：1
> 
> 时间：2013-02-08T11:44:44.480
> 
> 标签：jquery, checkbox

我有一个用于确认 ToS 的复选框。在用户未选中此复选框并确认 ToS 之前，PayPal 按钮覆盖有 50% 透明层且无法按下。另一个 PayPal 按钮、查看卡等也是如此。如果用户尝试按下任何 PayPal 按钮而不选中复选框，他会收到 JS 警报，他必须检查它并确认 ToS。

我的问题是，复选框忘记了它的选中状态，如果用户重新加载页面或转到另一个页面，所以他必须检查每个页面上的复选框，这很可悲。

这是代码，HTML和JS，它们使复选框，覆盖和警报推送。该代码在 Joomla 框架内工作，并与 Joomla 的组件一起工作 K2 JQuery: HTML

```
<p class="toskorb">Please check the checkbox and confirm our ToS!<input class="checkbox" name="TOS" id="TOS" value="read" type="Checkbox" /><img src="https://www.paypalobjects.com/de_DE/DE/i/btn/btn_paynowCC_LG.gif"> 
```

JS

```
var $K2 = jQuery.noConflict();

$K2(document).ready(function(){

//$K2('#TOS').attr('checked', false);
//$K2('input[type=image]').attr("class", "agbunchecked");
//$K2('input[type=image]').bind("click", giveAllert);

if(!$K2('#TOS').attr('checked')) //
{
    $K2('input[type=image]').attr("class", "agbunchecked");
    $K2('input[type=image]').bind("click", giveAllert);
}

function giveAllert()
{
    alert("Please check the checkbox and confirm our ToS!");
    return false;
}

$K2('#TOS').change(function(event){
    if(this.checked) 
    {
        $K2('input[type=image]').attr("class", "agbchecked");
        $K2('input[type=image]').unbind("click");
    }
    else
    {
        $K2('input[type=image]').attr("class", "agbunchecked");
        $K2('input[type=image]').bind("click", giveAllert)
    }
});

}); 
```

太好了，如果有人知道这些东西可以完成此代码，以便在所有页面上选中后选中复选框。感谢您提供正确方向的任何代码片段、完成和建议

PS：对不起，我没有早点说过：如果可能的话，我正在寻找使用会话而不是 cookie 的解决方案。在去年的欧盟 cookie 法之后，越来越多的人拒绝使用 cookie：（

PPS：此代码在页面刷新和返回<->向前浏览时记住复选框选中状态：

```
<?php

$a = array("ToS_yes");

foreach($a as $key => $value)
{
  echo "<input type='checkbox' name='rating[]' value='$value'"; if(in_array($value,$_POST['rating'])) echo " checked "; echo ">$value";
} 
```

?> 但是如何记住其他页面的状态呢？这就是诀窍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:46:33.527

使用 cookie：

```
$.cookie("tos", true); // set the cookie to true (once the tos is clicked). 
```

然后在每个页面上检索 cookie，如果为真，则自动选中该框。

jQuery`1.6`及以上版本：

```
var tos = $.cookie("tos");

if (tos) {
   $('myCheckbox').prop('checked', true);
} 
```

低于`1.6`您必须使用的 jQuery 版本`.attr()`：

```
var tos = $.cookie("tos");

if (tos) {
   $('myCheckbox').attr('checked', true)
} 
```

[http://plugins.jquery.com/project/Cookie](http://plugins.jquery.com/project/Cookie)

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

# python - Python findall 不返回预期值

> ID：14771826
> 
> 赞同：0
> 
> 时间：2013-02-08T11:45:12.620
> 
> 标签：python, regex

我有一些字符串包含两个引号之间的信息，例如：

```
cc "1/11/2A" "1/20+21/1 1" "XX" 0 
```

我`re.findall('\"*\"', line)`用来匹配引号之间的部分，但由于某种原因不起作用。我尝试了很多其他的东西，但我得到的只是一些空列表，里面什么都没有。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:47:54.120

您正在匹配 0 个或多个引号，后跟一个引号。改用否定字符类：

```
re.findall(r'"[^"]*"', line) 
```

您可能希望在否定字符类周围放置一个捕获组：

```
re.findall(r'"([^"]*)"', line) 
```

现在`.findall()`返回引号内的所有内容，不包括引号本身：

```
>>> import re
>>> re.findall(r'"([^"]*)"', 'cc "1/11/2A" "1/20+21/1 1" "XX" 0')
['1/11/2A', '1/20+21/1 1', 'XX'] 
```

`[^...]`否定字符类表示法意味着：匹配任何*不*包含在此处命名的字符集中的字符。`[^"]`因此匹配任何不是引号的字符，将匹配的字符巧妙地限制为引号*内*的所有字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T11:47:24.187

应该是`r'"[^"]*"'`。您的模式匹配一`"`​​行中的一个或多个字符。

```
In [4]: re.findall(r'"[^"]*"', line)
Out[4]: ['"1/11/2A"', '"1/20+21/1 1"', '"XX"'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T11:56:41.610

看起来您希望`*`匹配“任何内容”，就像它在文件名通配符中所做的那样。

但这不是它在正则表达式中的含义。它修改前面的表达式，以匹配该表达式的零个或多个副本。

要获取文件名样式的通配符，您需要使用`.*`.

然而，这实际上不起作用，因为`.`匹配任何东西——包括`"`. 所以，它会抓取最后一个`"`字符的所有内容，只留下表达式的其余部分，意思是`findall`找到一个大字符串而不是三个小字符串。

您可以通过使重复非贪婪来解决此问题，使用`.*?`. 这将匹配所有的*第一个* `"`。

所以：

```
>>> re.findall('\".*?\"', line)
['"1/11/2A"', '"1/20+21/1 1"', '"XX"'] 
```

我认为 Martijn Pieters 的答案在概念上可能更清晰；我只提供了这个，因为我认为这可能是你试图解决问题的方式，我想展示你是如何到达那里的。

作为旁注，如果您使用原始字符串，正则表达式代码更容易阅读，因此您可以摆脱多余的反斜杠转义。在这种情况下，反斜杠*已经*是不必要的了——您不需要在单引号字符串*或*正则表达式中转义双引号。但是，与其试图记住 Python 解析器需要和不需要转义的内容，以便它可以到达正则表达式解析器，不如只使用原始字符串更容易。所以：

```
>>> re.findall(r'".*?"', line)
['"1/11/2A"', '"1/20+21/1 1"', '"XX"'] 
```

# javascript - Javascript在jsonarray中解析jsonarray

> ID：14771828
> 
> 赞同：0
> 
> 时间：2013-02-08T11:45:17.210
> 
> 标签：javascript, json

如何从 javascript 访问此数组中的裁剪数组？我可能有很多 id

```
[{"id":"1","crop":"[{\"class\":\"org.project.Crop\",\"id\":6,\"commonName\":\"Wheat\",\"description\":\"N/A\",\"diseases\":[],\"growing\":\"N/A\",\"harvest\":\"N/A\"}, {\"class\":\"org.project.Crop\",\"id\":5,\"commonName\":\"Sugarcane\",\"description\":\"N/A\",\"diseases\":[],\"growing\":\"N/A\",\"harvest\":\"N/A\"}]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:47:50.823

也许使用`JSON.parse(a["crop"]);`

也看看[这个线程](https://stackoverflow.com/questions/10003706/convert-string-array-representation-back-to-an-array)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:49:33.030

你可以做：

```
var x = [{"id":"1","crop":"[{\"class\":\"org.project.Crop\",\"id\":6,\"commonName\":\"Wheat\",\"description\":\"N/A\",\"diseases\":[],\"growing\":\"N/A\",\"harvest\":\"N/A\"}, {\"class\":\"org.project.Crop\",\"id\":5,\"commonName\":\"Sugarcane\",\"description\":\"N/A\",\"diseases\":[],\"growing\":\"N/A\",\"harvest\":\"N/A\"}]];

var crop = JSON.parse(x[0].crop); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:52:43.463

你的语法错误，你失踪了`"`，`}`最后

这是更正的代码：

```
var data = [{"id":"1","crop":"[{\"class\":\"org.project.Crop\",\"id\":6,\"commonName\":\"Wheat\",\"description\":\"N/A\",\"diseases\":[],\"growing\":\"N/A\",\"harvest\":\"N/A\"}, {\"class\":\"org.project.Crop\",\"id\":5,\"commonName\":\"Sugarcane\",\"description\":\"N/A\",\"diseases\":[],\"growing\":\"N/A\",\"harvest\":\"N/A\"}]"}];
var crop = JSON.parse(data[0].crop);
alert(crop); 
```

在线版：http: [//jsfiddle.net/w38Ku/1/](http://jsfiddle.net/w38Ku/1/)

您必须先解析“crop”，然后才能将其用作对象，因为您已将其存储为字符串，而不是 json 对象

# vba - 检测纸张变化，清除溢出的纸张

> ID：14771829
> 
> 赞同：1
> 
> 时间：2013-02-08T11:45:17.643
> 
> 标签：vba, excel

我有一个`Worksheet_Change`活动，目前在`Sheet Module Level`. 问题是我有时希望能够清除这张表。但是，当我清除工作表时，会出现溢出：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    'This is the line causing the problem because clearing the whole sheet causes the count to be massive
    If Target.Count = 1 Then
        If Target = Range("A4") Then
            If InStr(LCase(Target.Value), "loaded") <> 0 Then
                Range("A5").FormulaArray = "=My_Function(R[-1]C)"
            End If
        End If
    End If
End Sub 
```

我正在努力实现以下目标：

我按下一个按钮并清除工作表（*清除现有数组公式数据*），然后将公式粘贴到工作表并调用公式。该公式将数据返回到 Excel 缓存，并将包含此公式 (A4) 的单元格更改为表示“已加载”的字符串。当我检测到值“已加载”的单元格更改时，我会在下面的数组公式函数上对`Ctrl`++`Shift`执行等效操作，以显示数据。`Enter`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:30:24.917

我相信你使用的是xl2007+？

这`Target.Cells.Count`是一个`Long`值，因此当您选择整个工作表时，`.Count`它太小而无法容纳结果。

换行

```
If Target.Count = 1 Then 
```

和

```
If Target.Cells.CountLarge = 1 Then 
```

您可能还想看到[这个](https://stackoverflow.com/questions/13860894/ms-excel-crashes-when-vba-code-runs/13861640#13861640)，因为您正在使用`Worksheet_Change`

**编辑**：

另外两件事

**1)**

您也可以替换此行

```
If Target = Range("A4") Then 
```

和

```
If Not Intersect(Target, Range("A4")) Is Nothing Then 
```

**2)**

这条线

```
If InStr(LCase(Target.Value), "loaded") <> 0 Then 
```

也可以写成

```
If InStr(1, Target.Value, "loaded", vbTextCompare) Then 
```

# entity-framework-4 - 如何在mvc4中合并或组合结果以获得想要的结果

> ID：14771830
> 
> 赞同：0
> 
> 时间：2013-02-08T11:45:18.067
> 
> 标签：entity-framework-4, asp.net-mvc-4

大家好，我已经完成了一个`asp.net`运行良好的应用程序，现在我正在将相同的应用程序转换`MVC`为我`MVC`刚接触到的某个点，即我想将三个不同的结果绑定到相同的`view`. 我所做的`asp.net`如下

![在此处输入图像描述](../Images/78212c7eefd9c824236b8dea2ddae8a8.png)

我想在`MVC`视图中显示相同的结果我已经部分完成了，我得到的结果如下，但我对剩下的两个感到震惊

![在此处输入图像描述](../Images/4c3bd58a5c482672d717b22349ce45e8.png)

这是我显示第一个结果的代码，我将在我的模型中有一个存储过程来绑定 Stats 结果，如第一张图片所示，

```
@model IEnumerable<forumAPP.tblTechnology>
<tr class="row1">
<td class="altrow">
</td>
<td>
@foreach (var item in Model)
{
@Html.DisplayFor(modelItem => item.TechName)
<br />
<br />
@Html.DisplayFor(modelItem => item.TechDesc)
<br />
<br />
<hr style="-moz-border-bottom-colors: none; -moz-border-left-colors: none; -moz-border-right-colors: none;
-moz-border-top-colors: none; border-color: #EBEBEB; border-image: none; border-style: solid;
border-width: 1px 0 0; clear: both; display: block; width: 105%;" />
}
</td> 
```

那么有人可以帮助我如何在同一视图上显示多个结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:03:33.013

调查`ViewModels`。您可以轻松地组合相关数据，然后将这些数据的集合传递`ViewModels`给 View 并适当地处理它。

我强烈推荐第一次使用 MVC 程序员的 ASP.NET MVC 教程，即使您非常精通 LINQ、C#、ASP.NET 等。您可以在以下位置找到它们：[http ://www.asp.net/mvc /教程](http://www.asp.net/mvc/tutorials)

# c# - 计算 ACCESS 数据库中的数据？

> ID：14771837
> 
> 赞同：-3
> 
> 时间：2013-02-08T11:45:28.113
> 
> 标签：c#, database, records, counting

我的数据库中有 3 条记录（数据库类型：microsoft access）。它们是 3 位客户的个人信息。

现在在界面中，我有一个名为 "Count Customers" 的按钮。当我推它时，我希望它计算记录并说我在数据库中有多少记录！. 例如这里我有 3 条，它必须说你有 3 条记录或 3 条客户。

我使用 Visual Studio 2008 ，语言是**C#**。我的数据库是 Microsoft **Access 数据库**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T11:57:28.037

```
 using (OleDbConnection con = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0; Data Source=C:\\Test.mdb"))
        using (OleDbCommand Command = new OleDbCommand(" SELECT count (CustomerId) from Customer as total", con))
        {
            con.Open();
            OleDbDataReader DB_Reader = Command.ExecuteReader();
            if (DB_Reader.HasRows)
            {
                DB_Reader.Read();
                int id = DB_Reader.GetInt32(0);
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T11:52:35.060

这个简单的查询将返回表中的总行数

```
SELECT COUNT(*) FROM Table_name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T11:55:54.043

```
using (OledbConnection cn = new OledbConnection())
            {
                cn.ConnectionString = OledbConnectionString;
                cn.Open();

                OledbCommand commandRowCount = new OledbCommand("SELECT COUNT(*) FROM [TABLENAME]", cn);
                countStart = System.Convert.ToInt32(commandRowCount.ExecuteScalar());
                MessageBox.Show("Starting row count: " + countStart.ToString());
            } 
```

# shell - 找到两个文件中的记录

> ID：14771838
> 
> 赞同：0
> 
> 时间：2013-02-08T11:45:28.790
> 
> 标签：shell

我想找出两个文件中的相交记录。限制是记录可以出现在文件中的任何位置。为此，我正在使用下面的代码

```
awk 'FNR==NR{a[$0];next}($0 in a)' 1.txt 2.txt 
```

但它无法正常工作。

假设我有两个文件 1.txt 和 2.txt。

1.txt

```
A
B
D
E 
```

2.txt

```
DD
T
B
A
Z 
```

输出应该是这样的

```
B
A 
```

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:57:57.643

试试这个：

```
grep -w -f 1.txt 2.txt 
```

-w 状态词

-f 文件状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:55:29.160

另外的选择：

使用`comm`命令，这就是这个命令的目的：

```
comm <(sort 1.txt)  <( sort 2.txt) -12 
```

来自`man comm`：

```
With no options, produce three-column output.  Column one contains lines
unique to FILE1, column two contains lines unique to FILE2, and column
three contains lines common to both files.

-1     suppress column 1 (lines unique to FILE1)
-2     suppress column 2 (lines unique to FILE2)
-3     suppress column 3 (lines that appear in both files) 
```

但是，`comm`需要排序文件。因此过程替换，如`<(sort 1.txt)`&`<(sort 2.txt)`

# html - 超过 ...在另一个里面

> ID：14771841
> 
> 赞同：0
> 
> 时间：2013-02-08T11:45:49.900
> 
> 标签：html, canvas

我有一个奇怪的问题，我无法解决。它应该与我读过的关于 and 之间关系的其他问题相同，但这是另一回事。让我解释一下这一切：

首先，我一直在使用这段代码。这可以正常工作：

```
<canvas id="canvas" width="1068" height="814" style="position: absolute; top: 0px; left: 0px; border:1px solid #707070; z-index:-15;">
Tu browser no soporta canvas
</canvas>

<div id="contenedorpregunta" style="background-color: transparent; position: absolute; top: 170px; left: 110px; width: 500px; height: 455px; z-index:5;">
(...)
</div> 
```

这显示了画布上预期的 div 内容，两者都附加到 0,0。

现在，相反，我需要以网页为中心显示游戏，所以，我想到了这一点。

```
<div align="center">
  <canvas style="position: relative;  (...)">
  </canvas>

  <div id="contenedorpregunta" style=" position: relative;(...)">
  </div>
</div> 
```

这不起作用，以前在画布上的 div 现在就在后面……¿为什么？我也尝试过继承定位，结果是一样的。我不知道如何解决这个问题，如果你能给我任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:49:30.047

如果您想在网页中水平居中容器 div，只需为容器元素提供宽度并使用`margin: auto;`这就是您所需要的，如果您想水平居中和垂直居中，则需要使用`position: absolute;`

```
.totally_centered {
   height: 500px;
   width: 300px;
   position: absolute;
   left: 50%;
   top: 50%;
   margin-top: -250px; /* Half of container height */
   margin-left: -150px; /* Half of container width */
} 
```

而且，如果您仍然对 div 落后的原因感到困惑，我不知道它为什么落后以及如何落后，但您可以使用它`z-index`来重新安排元素的堆栈级别

# android - 如何在hasmap中迭代arraylist并再次迭代arraylist

> ID：14771842
> 
> 赞同：0
> 
> 时间：2013-02-08T11:45:54.977
> 
> 标签：android, arraylist, hashmap

我有一个像这样`HashMap<String, ArrayList<HashMap<String, Integer>>>`的哈希图我试图在哈希图中迭代 arryalist？

这是我尝试过的：

```
for (Entry<String, ArrayList<HashMap<String, Integer>>> entry : testStats.entrySet()) {
            String key = entry.getKey();
            ArrayList<HashMap<String, Integer>> value = entry.getValue();
            for(HashMap<String, Integer> aString : value){
                System.out.println("key : " + key + " value : " + aString);
            }
        } 
```

但它仍然只显示最近的值。？

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:56:50.817

您似乎对您的数据结构感到困惑，缺少深度级别：

```
for (Entry<String, ArrayList<HashMap<String, Integer>>> entry : testStats.entrySet()) {
            String key = entry.getKey();
            ArrayList<HashMap<String, Integer>> list = entry.getValue();
            for(HashMap<String, Integer> map : list){
                   for(Entry<String, Integer> entryInner : map.entrySet){
                        System.out.println("key : " + entryInner.getKey() + " value : " + entryInner.getValue());
                   }
            }
} 
```

# java - 在java中生成随机日期时间（joda时间）

> ID：14771845
> 
> 赞同：9
> 
> 时间：2013-02-08T11:45:59.297
> 
> 标签：java, jodatime, random-sample

是否可以使用 Jodatime 生成随机日期时间，使得日期时间的格式为 yyyy-MM-dd HH:MM:SS 并且它应该能够生成两个随机日期时间，其中 Date2 减去 Date1 将大于 2 分钟但小于60分钟。请提出一些方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T11:48:39.853

简单的

```
long rangebegin = Timestamp.valueOf("2013-02-08 00:00:00").getTime();
long rangeend = Timestamp.valueOf("2013-02-08 00:58:00").getTime();
long diff = rangeend - rangebegin + 1;
Timestamp rand = new Timestamp(rangebegin + (long)(Math.random() * diff)); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-09T07:33:10.287

这非常严格地遵循您的要求（更正的格式除外）。

```
Random random = new Random();

DateTime startTime = new DateTime(random.nextLong()).withMillisOfSecond(0);

Minutes minimumPeriod = Minutes.TWO;
int minimumPeriodInSeconds = minimumPeriod.toStandardSeconds().getSeconds();
int maximumPeriodInSeconds = Hours.ONE.toStandardSeconds().getSeconds();

Seconds randomPeriod = Seconds.seconds(random.nextInt(maximumPeriodInSeconds - minimumPeriodInSeconds));
DateTime endTime = startTime.plus(minimumPeriod).plus(randomPeriod);

DateTimeFormatter dateTimeFormatter = DateTimeFormat.forPattern("yyyy-MM-dd HH:mm:ss");

System.out.println(dateTimeFormatter.print(startTime));
System.out.println(dateTimeFormatter.print(endTime)); 
```

如果你运行它，你会注意到你会得到多年的惊人值，但这只是在整个可能的 DateTime 范围（或 Date ）上生成随机 DateTime 的结果。但是，如果您愿意，可以将结束时间限制在某个范围内的相同技术应用于开始时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T11:54:40.160

基于任何日期都可以用长数字表示的事实，看看 Date 类的这个方法，[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ Date.html#Date(long)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html#Date%28long%29)，你可以定义一个最大的 Date1，比如说今天，并随机添加分钟数。

换句话说 ：

*   第 1 步 - 随机化一个长数字或为 Date1 设置一个数字
*   第 2 步 - 随机添加分钟，将随机乘以 58 分钟（58 x 60 x 1000）并添加到 Date1，再加上 2 分钟（2x 60 x 1000）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:05:04.543

尝试

```
 Random r = new Random();
    long t1 = System.currentTimeMillis() + r.nextInt();
    long t2 = t1 + 2 * 60 * 1000 + r.nextInt(60 * 1000) + 1;
    DateTime d1 = new DateTime(t1);
    DateTime d2 = new DateTime(t2); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-08T12:05:44.867

您可以使用 Math.random() 生成一个随机数；您可以使用此值。

# image - 静止图像的 OpenCV 失真问题

> ID：14771847
> 
> 赞同：1
> 
> 时间：2013-02-08T11:46:00.643
> 
> 标签：image, opencv, quartz-composer

我正在使用 OpenCV 开发 Quartz Composer 插件，我遇到了通过 cvCvtColor 将静态图像（仅）转换为灰色的问题。我正在开发 2.4 但我遇到了与 2.3 相同的问题：

![](../Images/60c334f3780edd9bb833fcbb7717494c.png)

网络摄像头图像一切正常，而且 - 很奇怪，不是吗？- 用于来自 iPhone 的直接 jpeg 图片。但是对于其他图像，我会遇到这种失真问题。

当我缩放原始图片时，它可以纠正问题，但这并不是解决问题的好方法。

这是原始图像，右侧是高度按 1.226 (???) 缩放的图像：

![在此处输入图像描述](../Images/f7b7d332f57f61fa24a68e9aaf0b1076.png)

有没有人遇到过这个问题。我想知道这是否不是我在 IplImage 中转换输入图像的方式，但我的代码似乎是正确的，因为我发现其他程序使用相同的方式......

会不会是输出通道数的问题？

谢谢你。

**编辑 ：**

这是该方法的代码。

```
- (void) createWithInputImage: (id<QCPlugInInputImageSource>) image {

IplImage *r = NULL;
if (image != nil) {
    // NSLog(@"Carasuelo OpenCV - width: %f", [image imageBounds].size.width);
    CvSize size = cvSize([image imageBounds].size.width, [image imageBounds].size.height);
    const char *colorModel;
    const char *channelSeq;
    int depth;
    int channels;
    if ([image bufferPixelFormat] == QCPlugInPixelFormatARGB8) {
        depth = IPL_DEPTH_8U;
        channels = 4;
        colorModel = (char *)"RGBA";
        channelSeq = (char *)"ARGB";

    } else if ([image bufferPixelFormat] == QCPlugInPixelFormatBGRA8) {
        depth = IPL_DEPTH_8U;
        channels = 4;
        colorModel = (char *)"RGBA";
        channelSeq = (char *)"BGRA";

        // QUARTZ COMPOSER IMAGES ARE ALWAYS BGRA8 -> 8U

    } else if ([image bufferPixelFormat] == QCPlugInPixelFormatRGBAf) {
        depth = IPL_DEPTH_32F;
        channels = 4;
        colorModel = (char *)"RGBA";
        channelSeq = (char *)"RGBA";

    } else if ([image bufferPixelFormat] == QCPlugInPixelFormatI8) {
        depth = IPL_DEPTH_8U;
        channels = 1;
        colorModel = (char *)"GREY";
        channelSeq = (char *)"GREY";

    } else if ([image bufferPixelFormat] == QCPlugInPixelFormatIf) {
        depth = IPL_DEPTH_32F;
        channels = 1;
        colorModel = (char *)"GREY";
        channelSeq = (char *)"GREY";

    } else {
        NSLog(@"Format d'image non supporté: %@", [image bufferPixelFormat]);
    }

    r = cvCreateImage(size, depth, channels);

    r->imageData = (char *)[image bufferBaseAddress];

    strcpy(r->colorModel, colorModel);
    strcpy(r->channelSeq, channelSeq);
}

[self setImageCV:r];

} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:20:07.057

`[image bytesPerRow]`返回一行像素中的字节数，这可能与`[image imageBounds].size.width * bytesPerPixel`（为了处理器寻址效率，添加填充以使每一行从 16 的倍数开始）不同。

所以，不要`r->imageData = (char *)[image bufferBaseAddress];`尝试这样的事情：

```
unsigned long qcImageHeight = [image imageBounds].size.height;
unsigned long qcImageBytesPerRow = [image bytesPerRow];
char * qcImageData = (char *)[image imageBufferBaseAddress];
for(unsigned long y = 0; y < height; ++y)
    memcpy((char *)r->imageData + y * r->widthStep, qcImageData + y * qcImageBytesPerRow, r->widthStep); 
```

# vb.net - 未捕获共享/静态数据源的跨线程更新

> ID：14771852
> 
> 赞同：1
> 
> 时间：2013-02-08T11:46:30.610
> 
> 标签：vb.net, winforms, .net-4.0, datagridview

我有一个可以在整个应用程序中访问的共享/静态*DataTable 。*在*表单*上，​​我有一个绑定到*DataTable的**DataView*的*DataGridView*。*我的问题是DataGridView*未捕获*DataTable*的跨线程更新，尽管基础数据源（DataView）已更新。

 ***我已经尝试过*DataGridView*的 update、invalidate、refresh 和 resetbindings 方法，但仍然没有添加、删除或更新行。

```
'The following example requires:
'-----------------------------------------------------------------------------
'Friend WithEvents DataGridView1 As System.Windows.Forms.DataGridView
'Friend WithEvents Button1 As System.Windows.Forms.Button
'Friend WithEvents Button2 As System.Windows.Forms.Button
'Friend WithEvents BackgroundWorker1 As System.ComponentModel.BackgroundWorker
'-----------------------------------------------------------------------------

Public Class Form1

    Shared Sub New()
        Repository = New DataTable()
    End Sub

    Public Sub New()
        Me.InitializeComponent()
        Me.view = New DataView(Repository)
        Me.DataGridView1.DataSource = Me.view
    End Sub

    'Updates the DataGridView correctly.
    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Using table As DataTable = GetUpdatedDataTable()
            SyncLock Repository
                Repository.Merge(table)
            End SyncLock
        End Using
    End Sub

    'Do NOT update the DataGridView correctly (cross-thread)
    Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
        If (Not Me.BackgroundWorker1.IsBusy) Then
            Me.BackgroundWorker1.RunWorkerAsync()
        End If
    End Sub

    Private Sub BackgroundWorker1_DoWork(sender As System.Object, e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
        Using table As DataTable = GetUpdatedDataTable()
            SyncLock Repository
                Repository.Merge(table)
            End SyncLock
        End Using
    End Sub

    Private Sub BackgroundWorker1_RunWorkerCompleted(sender As System.Object, e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
        Me.DataGridView1.Update()
        Me.DataGridView1.Refresh()
        Me.DataGridView1.Invalidate(False)
        Me.DataGridView1.Invalidate(True)
        Me.DataGridView1.ResetBindings()
        MsgBox(Me.view.Count)
    End Sub

    Private Shared Function GetUpdatedDataTable() As DataTable
        Dim table As New DataTable("TEST")
        table.Columns.AddRange(New DataColumn() {New DataColumn("ID", GetType(Integer)), New DataColumn("TEXT", GetType(String))})
        table.Rows.Add(Repository.Rows.Count, String.Format("Row #{0}", Repository.Rows.Count))
        table.AcceptChanges()
        Return table
    End Function

    Public Shared Repository As DataTable
    Private ReadOnly view As DataView

End Class' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:05:45.803

您应该尝试以下操作，而不是刷新：

```
Private Sub BackgroundWorker1_RunWorkerCompleted(sender As System.Object, e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
            Me.DataGridView1.Update()
            Me.DataGridView1.DataSource = Nothing
            Me.DataGridView1.DataSource = Repository           
            Me.DataGridView1.Invalidate(False)
            Me.DataGridView1.Invalidate(True)
            Me.DataGridView1.ResetBindings()
            MsgBox(Me.view.Count)
        End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T18:37:51.480

由于这个问题很快就要庆祝它的第一个“生日”，所以最好给它一个最终答案。未更新的原因`DataGridView`是因为`DataView.ListChanged`事件（DGV 挂钩）是在工作线程而不是 UI 线程上引发的。

**选项1**

在 UI 线程上进行合并。

```
Me.Invoke(Sub() Repository.Merge(table)) 
```

当然，这将冻结应用程序，直到合并完成。

**选项 2**

子类化并赋予它在需要时引发事件`DataView`的能力。`ListChanged`

```
Public Class DataViewEx
    Inherits DataView

    Public Sub New()
    End Sub

    Public Sub New(table As DataTable)
        MyBase.New(table)
    End Sub

    Public Sub New(table As DataTable, rowFilter As String, sort As String, rowState As DataViewRowState)
        MyBase.New(table, rowFilter, sort, rowState)
    End Sub

    Public Sub Refresh()
        Me.OnListChanged(New ListChangedEventArgs(ListChangedType.Reset, -1))
    End Sub

End Class 
```

现在，一旦工作人员完成其任务，只需调用该`Refresh`方法*并*`DataGridView`与.*`DataView`*

 *```
Private Sub BackgroundWorker1_RunWorkerCompleted(sender As Object, e As RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
    Me.view.Refresh()
End Sub 
```****

# css - CSS3 动画去饱和

> ID：14771854
> 
> 赞同：0
> 
> 时间：2013-02-08T11:46:34.443
> 
> 标签：css, animation, css-transitions

我在图像上使用去饱和度使其变为黑白。我希望它在悬停时淡出颜色（使用 CSS3 过渡），但我似乎无法让它工作。有任何想法吗？

这是一个例子： http: [//jsfiddle.net/sChY5/](http://jsfiddle.net/sChY5/)下面是我的css

```
img.desaturate {
-webkit-transition: all 0.2s ease-in-out;
-moz-transition: all 0.2s ease-in-out;
-o-transition: all 0.2s ease-in-out;
transition: all 0.2s ease-in-out;
filter: grayscale(100%);
-webkit-filter: grayscale(100%); -moz-filter: grayscale(100%);
-ms-filter: grayscale(100%); -o-filter: grayscale(100%);
filter: url('data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale');
filter: gray;
-webkit-filter: grayscale(1);
}

img.desaturate:hover {
filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'1 0 0 0 0, 0 1 0 0 0, 0 0 1 0 0, 0 0 0 1 0\'/></filter></svg>#grayscale");
-webkit-filter: grayscale(0%);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:54:49.607

您没有将`transition`属性放在好的类选择器上。

不能开`img.desaturate:hover`，但开`img.desaturate`

（我谈论的是你的 jsfiddle 演示，这与你在这里发布的代码不同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:56:30.230

我只是检查它并让它在 jsfiddle 中工作，就像你想的那样，或者你想要什么，请澄清。

# c# - 为小型 .NET 网站推荐的 CMS

> ID：14771855
> 
> 赞同：0
> 
> 时间：2013-02-08T11:46:41.873
> 
> 标签：c#, .net, dotnetnuke, orchardcms

我有一个网站，我正在为客户在 .NET 中创建一个 cms。该网站位于[http://bit.ly/YJ8dXl](http://bit.ly/YJ8dXl)

我不是 .NET 开发人员（这里是 rails 人），但我想要 c# 中的一些东西，我对它的理解足以在共享主机上实现并为其创建一个简单的模板。

有人建议使用 DotNetNuke，但这对于我的 .NET 技能组合来说似乎太复杂了，无法为上述站点设置模板。任何人都可以推荐开源 cms 或专有的 .NET cms，我可以以便宜的价格购买许可证并安装在共享主机上。

在此先感谢，我会加一个任何好的答案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T19:00:48.710

DotNetNuke 又多了一个 +1。Umbraco 很棒（我两者都使用），但总是向非重度程序员推荐 DotNetNuke。社区比 Umbraco 更多，并且站点管理员更容易学习（它更加所见即所得）。如果您是需要集成自定义代码的顽固程序员 - Umbraco 可能更合适。如果您想利用更大的社区*并将*代码添加到基础 DotNetNuke，则更合适。

剥皮部分很容易（比看起来要容易得多），并且在推特上有很多人可以提供帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T11:52:03.850

如果你喜欢 MVC，那么 Orchard 相当不错：[http ://www.orchardproject.net/](http://www.orchardproject.net/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T16:36:23.000

您对 DotNetNuke 有什么问题或疑虑？[在模块开发（ http://christoctemplate.codeplex.com/](http://christoctemplate.codeplex.com/)）和免费皮肤资源等（[http://multifunction.codeplex.com](http://multifunction.codeplex.com)）方面，有很多资源可以让您在 DNN 上启动和运行

如果您不是强大的 .NET 开发人员，我个人认为 DotNetNuke 绝对是您的选择，因为即使您不必是 .NET 开发人员也可以使用数以千计的可用扩展，自定义它也非常容易。

[http://www.dnnsoftware.com/](http://www.dnnsoftware.com/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T19:28:51.200

我做了很多研究并参加了一些会议。我的选择是 Dot Net Nuke，原因很简单：

*   一个大型的开发者社区。
*   开发人员、设计人员和管理员之间的抽象
*   易于学习和集成几个方面。
*   它不会迫使设计师为网站重新发明轮子，也不会迫使开发人员不断解决设计师可能引入的问题。

这些是一些关键要素。

对我来说，抽象元素是有益的。我可以开发功能和模块；而设计师可以创建一个漂亮的用户界面；管理员/站点版主可以在几乎没有重叠的情况下管理站点。

这让我们所有的工作都分开了，不想学习平台部分的人被移除了，所以他们总是用让他们舒服的东西工作。

DNN World 的一些课程和内容也有助于教育该平台的各个方面。

那是我做研究时的两分钱。

您可以设计整个 Dot Net Nuke 站点，而无需学习`C#`或如何为平台进行开发。就像所有问题一样，它们需要小剂量服用；所以你可以找到正确的结果。提交答案的 Chris Hammond 实际上是 Dot Net Nuke 的培训主管。此外，该站点在各个级别都有很多学习内容，因此您可以真正衡量 Dot Net Nuke 是什么。

**最终，您会征求意见，因此它们可能最适合您的需求，也可能不适合您的需求。您可能希望在您的问题中更具体。就像在指环王中“不要向精灵寻求建议，因为他们会说不和是。”**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-08T11:49:56.397

Umbraco 过去对我们很有效，我们还在 Azure 上放了一个 Umbraco 实例，看起来很稳定。

[http://umbraco.com/](http://umbraco.com/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-10T01:36:50.900

抱歉，我不能代表其他 Windows CMS 平台，因为在被派往基于 Windows 的团队之前，我在非 Windows CMS 和 e-comm 解决方案上花了超过 10 年时间，但在过去 6 年多的时间里一直在实施和使用 Dotnetnuke 进行自定义解决方案时，我可以告诉您，您可以在平台内实现自定义功能的各种（稳定）方式给我留下了深刻的印象。

当然还有成熟的本机模块开发（在 C# 或 VB 中），Chris Hammond 的模板和视频可以为您提供一个很好的开始，但如果您愿意，还有许多其他方法可以实现自定义功能而无需走这条路。

.NET4 和 DNN6 引入了 razor 模板，作为构建快速、功能性定制的一种方式，其中要求的范围有些有限。还有一些模块构建器产品，比如 Open Web Studio (openwebstudio.com) - 这主要是我们实现的，或者 XMod Pro (dnndev.com)，您可以在其中构建更复杂的模块而无需进行本机编码，并且更前端-结束沉重的东西，你也可以考虑使用 2sexycontent (2sexycontent.org)。还有其他模块，如 Form & List 和复杂的表单构建器，如动态表单 (datasprings.com)，它们可能（取决于您正在寻找的功能）为您提供所需的大部分内容。也可以使用其他模块，如 Ventrian News（由于其易于使用模板进行自定义）来提供远远超出新闻的内容。

我可以告诉你，在被要求返回非 Windows CMS 后，我寻找我上面提到的让我们能够进行快速开发的选项，但它们基本上不存在（例如 JOOMLA 有 Sorcerer 和 JUMI , 相比之下，他们俩都很差）。

至于皮肤，我通常会在 DNN 商店 (store.dotnetnuke.com) 上找到一个模板，它可以让我获得 80% 以上的我正在寻找的内容，然后自己修改它。dnncreative.com（这是观看他们的培训视频的订阅，但只需 80 美元，您就可以获得他们所有 600 多个视频）已经完成了关于如何创建常规皮肤和响应式皮肤的多部分系列，这些系列将引导您逐步完成所有操作DNN 皮肤和容器的部分）。

祝你好运，无论你选择什么。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-09T19:54:06.960

我已经在 GitHub、CarrotCakeCMS、[https](https://github.com/ninianne98/CarrotCakeCMS) ://github.com/ninianne98/CarrotCakeCMS 上发布了一个 CMS ，它旨在成为一个简单的框架，供那些想要一个简洁的 ASP.Net CMS 但可以轻松集成自定义代码并且可以易于主题/皮肤。这是一个 ASP.Net 3.5 WebForms Web 应用程序，在共享（中等信任）主机上以非残缺的方式工作。

我的项目网站上还有许多其他模板以及[http://www.carrotware.com/carrotcake-cms.aspx](http://www.carrotware.com/carrotcake-cms.aspx)上的用户文档和开发人员指南。设置步骤与 WordPress 非常相似：解压缩文件、在 Web 服务器配置中创建站点、创建空数据库 (MSSQL)、更新配置、运行网站。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-08T13:15:47.167

我喜欢使用[Actya](http://actya.codeplex.com/)作为轻量级 CMS 模块。它可以作为现有网站的一部分安装。它目前没有处于积极开发中，但代码库已经足够完整，可以让它变得有用。此外，它是开源的，因此您可以对其进行修改以满足您的需求。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-08T13:46:22.430

对 Umbraco 再投一票。他们有一个庞大的开发者社区，他们的发布周期更加一致，这意味着更快地发布新功能和错误修复。您几乎可以做任何事情，例如空白画布和水彩 :)

编辑。Umbraco 也支持 MVC

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-07-20T16:55:41.373

Dotnetnuke 对我的职业生涯来说非常棒。至于快速开发接口，我使用[http://dnndev.com的 XMod Pro](http://dnndev.com)

没有任何我“无法”构建的东西。

# android - 盒子里的 SurfaceView

> ID：14771858
> 
> 赞同：3
> 
> 时间：2013-02-08T11:46:52.323
> 
> 标签：android, surfaceview

我正在努力寻找任何教程来帮助我将 SurfaceView 放入盒子中。指向正确方向的指针会很神奇 - 不需要通过它寻找手握。

我希望能够在屏幕顶部分配一个区域，例如做按钮等，然后让表面视图填充其余部分。但是，当我尝试修改用于全屏surfaceView 的代码以引用我的xml 时，一切都出现了问题。

我的主要活动代码如下（我删除了很多我认为不相关的部分）。

```
package com.example.mylistviewidea;

import android.os.Bundle;
etc...

public class MainActivity extends Activity implements OnTouchListener {

MyListView myListView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    myListView = (MyListView) findViewById(R.id.surfaceView1);

}

class MyListView extends SurfaceView implements Runnable {
    SurfaceHolder myHolder;
    Thread myThread = null;
    boolean isRunning = false;
    // My Variables
    long dT;
    int myRed;

    public MyListView(Context context) {
        super(context);
        myHolder = getHolder();
    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        while (isRunning) {

            if (!myHolder.getSurface().isValid())
                continue;
            Canvas canvas = myHolder.lockCanvas();
            canvas.drawARGB(128, 0, 0, 0);
            dT = SystemClock.uptimeMillis();
            myRed = (int) ((int) 128*(1+Math.sin((double) dT/1000)));

        }
    }
}
} 
```

我的 XML 是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<SurfaceView
    android:id="@+id/surfaceView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="@string/add_entries" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/button1"
    android:text="@string/remove_entries" />

</RelativeLayout> 
```

我得到的错误是：

```
02-08 11:44:17.885: E/AndroidRuntime(10523): java.lang.RuntimeException: Unable 
to start activity ComponentInfo{com.example.mylistviewidea/com.example.mylistviewidea.MainActivity}: 
java.lang.ClassCastException: android.view.SurfaceView cannot be cast to 
com.example.mylistviewidea.MyListView 
```

在此先感谢您的帮助！

干杯，

麦克风

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T12:40:15.227

您应该有一个自定义视图并在您的 xml 中使用它。

首先创建这个视图

```
class MyListView extends SurfaceView implements Runnable {
    SurfaceHolder myHolder;
    Thread myThread = null;
    boolean isRunning = true;
    // My Variables
    long dT;
    int myRed;

    public MyListView(Context context) {
        super(context);
        init();
    }

    public MyListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public MyListView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    private void init() {
        myHolder = getHolder();
        myHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        while (isRunning) {

            if (!myHolder.getSurface().isValid())
                continue;
            Canvas canvas = myHolder.lockCanvas();
            canvas.drawARGB(128, 128, 0, 0);
            dT = SystemClock.uptimeMillis();
            myRed = (int) ((int) 128 * (1 + Math.sin((double) dT / 1000)));
            myHolder.unlockCanvasAndPost(canvas);

        }
    }
} 
```

将您的 xml 更改为此

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<com.example.testant.MyListView
    android:id="@+id/surfaceView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="add_entries" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/button1"
    android:text="remove_entries" /> 
```

并改变主要活动

```
public class MainActivity extends Activity {

    MyListView myListView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        myListView = (MyListView) findViewById(R.id.surfaceView1); 
        new Thread(myListView).start();

    }
} 
```

请注意，您也有锁定画布的错误，但这应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:50:55.060

这可能有点微不足道。但尝试清理项目，然后进行重建。或在单独的 java 类文件中声明一个 MyListView 并在您的 xml 布局文件中引用它，

# javascript - 从 HTML 节点之间提取特定文本的优雅方式？

> ID：14771860
> 
> 赞同：1
> 
> 时间：2013-02-08T11:46:58.437
> 
> 标签：javascript, jquery, regex, dom, greasemonkey

从以下字符串中，我需要动态变化的“6.903”数字来进行计算。

是否有一些正则表达式或一些 jQuery 技巧可以轻松或优雅地做到这一点？

```
<a href="javascript:void(0)" class="" id="buddyTrigger">
38.760&nbsp;<img border="0" align="absmiddle" alt="Arany" src="/img/symbols/res2.gif">
&nbsp;&nbsp;5&nbsp;<img border="0" align="absmiddle" alt="Pokolkristály" src="/img/symbols/res3.gif">
&nbsp;&nbsp;220&nbsp;<img border="0" align="absmiddle" alt="Szilánk" src="/img/symbols/res_splinters.png">
&nbsp;&nbsp;91&nbsp;/&nbsp;125&nbsp;<img border="0" align="absmiddle" alt="Akciópont" src="/img/symbols/ap.gif">
&nbsp;&nbsp;6.903&nbsp;/&nbsp;82.100&nbsp;<img border="0" align="absmiddle" alt="Életerő" src="/img/symbols/herz.png">
&nbsp;&nbsp;<img border="0" align="absmiddle" alt="Szint" src="/img/symbols/level.gif">&nbsp;41    &nbsp;&nbsp;
<img border="0" align="absmiddle" alt="Harci érték" src="/img/symbols/fightvalue.gif">&nbsp;878</a> 
```

* * *

这是我的代码作为冗长的解决方案，我可以以某种方式简化吗？

```
<script type="text/javascript">
    var dataIn=$('#infobar div.gold').html();
    var dataPrep2Split=dataIn.replace(/<img(.*)>/g,';');
    var dataSplit=dataPrep2Split.split(';');
    var myData2Int=parseInt(dataSplit[18].replace('.',''));
    if(myData2Int<=10000) {
        $('#player').find('button.btn').remove();
        var putBack=dataIn.replace(dataSplit[18],'<span class="newmessage">'+dataSplit[18]+'</span>');
        $('#infobar div.gold').html(putBack);
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:01:08.543

使用 DOM 方法；`.html()`使用经常会破坏页面功能来替换东西。此外，该正则表达式可能会因最小的变化而中断。

您是在尝试获取*生命*值，对吗？并以 with`<img>`结束`alt="Életero"`。

所以那个文本节点是（基于 Q 代码）：

```
var lifeValTxtNd    = $("#buddyTrigger img[alt='Életero']")[0].previousSibling; 
```

这`6903`来自以下内容`6.903 / 82.100`：

```
var lifeVal         = $.trim (lifeValTxtNd.nodeValue)
                    .replace (/^\s*(\d*)\.?(\d+)\s*\/.+$/, "$1$2")
                    ;
lifeVal             = parseInt (lifeVal, 10); 
```

然后将该部分包装在跨度中使用：

```
$("#buddyTrigger img[alt='Életero']").before (
    '<span class="newmessage">' + lifeValTxtNd.nodeValue + '</span>'
);

lifeValTxtNd.parentNode.removeChild (lifeValTxtNd); 
```

* * *

* * *

这样做：

1.  不会破坏页面上的任何事件监听器。
2.  不太容易受到页面布局/内容变化的影响。
3.  更容易理解和维护。
4.  如果性能是一个因素，它将运行得更快。

# php - 交易 ID 无效 10609

> ID：14771862
> 
> 赞同：0
> 
> 时间：2013-02-08T11:47:14.880
> 
> 标签：php, paypal, nvp

我对 paypal api 很陌生，我已经按照[本](http://coding.smashingmagazine.com/2011/09/05/getting-started-with-the-paypal-api/)教程进行了操作，并根据我的需要调整了代码。

我想通过 3 个步骤进行基本的授权和捕获，但我总是无法捕获

1.  客户登陆 paypal_pay_redirect.php 以登录 paypal 并进行付款
2.  付款很好，我们登陆 paypal_success.php，在这里我请求授权并保留 TRANSACTIONID 以供下一步
3.  paypal_capture.php 我使用 transactionid 捕获付款，但我总是得到“10609：Transaction id is invalid”

代码在这里，错误在哪里？

谢谢

paypal_lib.php

```
<?php
  // code from http://coding.smashingmagazine.com/2011/09/05/getting-started-with-the-paypal-api/
class Paypal {
  /**
   * Last error message(s)
   * @var array
   */
  protected $_errors = array();

  /**
   * API Credentials
   * Use the correct credentials for the environment in use (Live / Sandbox)
   * @var array
   */
  protected $_credentials = array(
                  'USER' => 'xxxxxxxxxxxxxxxxxxxx',
                  'PWD' => 'xxxxxxxxxxxxx',
                  'SIGNATURE' => 'xxxxxxxxxxxxxxxxxxxxxxxxx'
                  );
  /**
   * API endpoint
   * Live - https://api-3t.paypal.com/nvp
   * Sandbox - https://api-3t.sandbox.paypal.com/nvp
   * @var string
   */
  protected $_endPoint = 'https://api-3t.sandbox.paypal.com/nvp';

  /**
   * API Version
   * @var string
   */
  protected $_version = '74.0';

  /**
   * Make API request
   *
   * @param string $method string API method to request
   * @param array $params Additional request parameters
   * @return array / boolean Response array / boolean false on failure
   */
  public function request($method,$params = array()) {
    $this -> _errors = array();
    if( empty($method) ) { //Check if API method is not empty
      $this -> _errors = array('API method is missing');
      return false;
    }

    //Our request parameters
    $requestParams = array_merge(
                 array(
                       'METHOD' => $method,
                       'VERSION' => $this -> _version
                       ),
                 $this -> _credentials
                 );

    //Building our NVP string
    $request = http_build_query(array_merge($requestParams, $params));

    //cURL settings
    $curlOptions = array (
              CURLOPT_URL => $this -> _endPoint,
              CURLOPT_VERBOSE => 1,
              CURLOPT_SSL_VERIFYPEER => true,
              CURLOPT_SSL_VERIFYHOST => 2,
              CURLOPT_RETURNTRANSFER => 1,
              CURLOPT_POST => 1,
              CURLOPT_POSTFIELDS => $request
              );

    $ch = curl_init();
    curl_setopt_array($ch,$curlOptions);

    //Sending our request - $response will hold the API response
    $response = curl_exec($ch);

    //Checking for cURL errors
    if (curl_errno($ch)) {
      $this -> _errors = curl_error($ch);
      curl_close($ch);
      return false;
      //Handle errors
    } else {
      curl_close($ch);
      $responseArray = array();
      parse_str($response,$responseArray); // Break the NVP string to an array
      return $responseArray;
    }
  }
}

?> 
```

paypal_pay_redirect.php

```
<?php
require("paypal_lib.php");

//Our request parameters
$requestParams = array(
               'RETURNURL' => 'https://www.domain.com/paypal_success.php',
               'CANCELURL' => 'https://www.domain.com/paypal_fail.php'
               );

$orderParams = array(
             'PAYMENTREQUEST_0_AMT' => "57.00",
             'PAYMENTREQUEST_0_SHIPPINGAMT' => '0',
             'PAYMENTREQUEST_0_CURRENCYCODE' => 'EUR',
   'PAYMENTREQUEST_0_ITEMAMT' => "57.00"
             );

$item = array(
          'L_PAYMENTREQUEST_0_NAME0' => 'xxxxxxxxxx',
          'L_PAYMENTREQUEST_0_DESC0' => 'xxxxxxxxxx',
          'L_PAYMENTREQUEST_0_AMT0' => "57.00",
   'L_PAYMENTREQUEST_0_QTY0' => '1'
          );

$paypal = new Paypal();
$response = $paypal -> request('SetExpressCheckout',$requestParams + $orderParams + $item);
if(is_array($response) && $response['ACK'] == 'Success') { //Request successful
  $token = $response['TOKEN'];
  header( 'Location: https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=' . urlencode($token) );
 }

?> 
```

paypal_success.php

```
<?php
require("paypal_lib.php");

if( isset($_GET['token']) && !empty($_GET['token']) ) { // Token parameter exists
  // Get checkout details, including buyer information.
  // We can save it for future reference or cross-check with the data we have
  $paypal = new Paypal();
  $checkoutDetails = $paypal -> request('GetExpressCheckoutDetails', array('TOKEN' => $_GET['token']));

  // Complete the checkout transaction
  $requestParams = array(
             'TOKEN' => $_GET['token'],
             'PAYMENTACTION' => 'Authorization',
             'PAYERID' => $_GET['PayerID'],
             'PAYMENTREQUEST_0_AMT' => '57', // Same amount as in the original request
             'PAYMENTREQUEST_0_CURRENCYCODE' => 'EUR' // Same currency as the original request
             );

  $response = $paypal -> request('DoExpressCheckoutPayment',$requestParams);
  if( is_array($response) && $response['ACK'] == 'Success') { // Payment successful
    // We'll fetch the transaction ID for internal bookkeeping
    $transactionId = $response['PAYMENTINFO_0_TRANSACTIONID'];
    echo "OK id: ".$transactionId;
    var_dump($response);
  }

 var_dump($checkoutDetails);

 }
?> 
```

paypal_capture.php

```
<?php
require("paypal_lib.php");

$paypal = new Paypal();

// Complete the checkout transaction
$requestParams = array(
               'AMT' => '57.00',
               'AUTHORIZATIONID' => 'xxxxxxxxxxxxxxxxxxx', //what I get in paypal_success.php
               'CURRENCYCODE' => 'EUR',
               'COMPLETETYPE' => 'Complete', // Same amount as in the original request
               );

$response = $paypal -> request('DoCapture',$requestParams);

var_dump($response);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:36:09.450

两件事情：

首先，在 paypal_pay_redirect.php 中，`PAYMENTREQUEST_0_PAYMENTACTION => 'Authorization'`添加`$orderParams`.

其次，在 paypal_success.php 中，更改`PAYMENTACTION`TO `PAYMENTREQUEST_0_PAYMENTACTION`。

原因如下：

在您的 SetExpressCheckout 调用中，如果您不设置`PAYMENTREQUEST_0_PAYMENTACTION`，PayPal 会假定它是`Sale`。如果在您的 SetExpressCheckout 调用中将其设置为`Sale`，那么 PayPal 将只允许您在 DoExpressCheckoutPayment 调用中将其设置为`Sale`。

此外，在您的 DoExpressCheckoutPayment 调用中，您混合了新式和旧式变量名称。`PAYMENTACTION`（当 PayPal 为 Express Checkout 引入并行支付时， 一些变量被重命名。`PAYMENTACTION`是旧样式；`PAYMENTREQUEST_0_PAYMENTACTION`是新样式。）当您像这样混合旧样式和新样式名称时，PayPal 使用一种样式识别变量，并忽略另一个。在您的情况下，`PAYMENTREQUEST_0_AMT`并且`PAYMENTREQUEST_0_CURRENCYCODE`正在被识别，但`PAYMENTACTION`被忽略。

这两个因素的组合意味着您的交易最有可能作为销售交易而不是授权运行。由于您无法针对销售交易进行捕获（因为它在技术上已被捕获），因此 PayPal 会通过说交易 ID 无效来响应。

# iphone - 如何删除仅出现在iphone浏览器中的小空间

> ID：14771864
> 
> 赞同：0
> 
> 时间：2013-02-08T11:47:16.377
> 
> 标签：iphone, css, html

我使用百分比来定义所有元素的宽度。我还隐藏（`display: none;`）一些仅适用于手持设备的元素，包括 iphone。

html结构：

```
<header>
    <!-- ... -->
</header>
<nav>
    <!-- ... -->
</nav>
<div id="search">
    <!-- ... -->
</div> 
```

CSS：

```
* {
    margin: 0;
    padding: 0;
}

/* ... */
header {
    width: 100%;
    height: 80px;
    /* ... */
}

/* ... */
nav {
    float: left;
    width: 76%;
    height: 20px;
    padding: 5px 2%;
}

#search {
    float: right;
    width: 16%;
    height: 20px;
    padding: 5px 2%;
}

@media only screen and (max-device-width: 480px), handheld {
    /* ... */
    header {
        height: 50px;
    }
    nav {
        width: 96%; /*plus padding 2% each = 100%*/
    }

    #search {
        display: none;
    }
} 
```

所以，我隐藏`search`并增加`nav`填充空间（100％）。但是，右侧有一个小的空白区域。

屏幕视图：

![在此处输入图像描述](../Images/080dc18518591904d9d2f3753bdbe2ed.png)

iphone视图：

![在此处输入图像描述](../Images/26693c7857e6772c9d462c57e1970b30.png)

有谁知道如何删除iphone视图中的小空白？
完整代码：http: [//jsfiddle.net/AWGk2/](http://jsfiddle.net/AWGk2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:15:07.187

从您的 NAV 和 SEARCH 元素中删除填充。

将 NAV 元素的宽度设为 80%，将 SEARCH 元素的宽度设为 20%。

在 NAV 和 SEARCH 元素中添加一个新的 DIV 元素，并将填充应用于这些元素。不要费心在这些新的内部元素上指定宽度。

在您的媒体查询部分中，将 NAV 宽度设为 100%。

我还会考虑添加到您的视口规则中。

这是我自己使用的一个：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
```

# java - 递归无法做到这一点

> ID：14771867
> 
> 赞同：-1
> 
> 时间：2013-02-08T11:47:23.663
> 
> 标签：java

我们有由块组成的三角形。最上面一行有 1 个块，下一行有 2 个块，下一行有 3 个块，以此类推。递归计算（无循环或乘法）具有给定行数的此类三角形中的块总数。

```
triangle(0) → 0
triangle(1) → 1
triangle(2) → 3 
```

这是我的代码：

```
public int triangle(int rows) {
  int n = 0;

  if (rows == 0) {
    return n;
  } else {
    n = n + rows;
    triangle(rows - 1);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:14:17.113

在编写简单的递归函数时，将其拆分为“基本情况”（停止时）和递归时的情况会有所帮助。两种情况都需要返回一些东西，但递归情况会在某个时候再次调用该函数。

```
public int triangle(int row) {
  if (row == 0) {
    return 0;
  } else {
    return row + triangle(row - 1);
  }
} 
```

如果您进一步研究递归定义，您会发现“尾递归”的想法，这通常是最好的，因为它允许某些不会溢出堆栈的编译器优化。我的代码示例虽然简单正确，但不是尾递归的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T11:50:17.680

您没有使用函数的返回值。相反，您总是声明一个新的局部变量。否则，您的解决方案非常接近正确的解决方案。`return`此外，如果您不在第 0 行，您还应该添加另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:57:48.937

```
public static int triangle (int rows) {
  int n = 0;
  if (rows == 0) {
    return n;
  } else {
    n = n + rows;
    n = n + triangle(rows - 1);
  }
  return n;
} 
```

# magento - 推荐更新代码和安装新版本脚本的方法

> ID：14771868
> 
> 赞同：0
> 
> 时间：2013-02-08T11:47:25.867
> 
> 标签：magento, updates

脚本的开发者经常更新脚本并发布更新的版本。

例如，如果我当前使用的是 2.0 版，我会在脚本中创建更改以满足我的要求。但是，如果发布了具有新功能的新版本，我希望在保留我手动所做的更改的同时拥有更新的功能。

如果我只是更新和替换，我的更改就会消失。所以我需要一些技巧，让我能够有效地更新到新版本的脚本。

它是一个基于 Magento 的繁重脚本，包含许多文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:27:43.537

很抱歉用这么简单的解决方案来回答，但是您是否考虑过使用 Git (github.com) 来帮助管理代码更新和修订？我在 windows / linux 开发环境中成功使用了 magento / wcf-workflow / asp.net / windows 服务组合解决方案超过 3 年。我有历史，直到编写的第一段代码。

我们都有自己的从上游分支的原始存储库，它还允许一个人通过合并请求选项负责代码合并。

如果您推送到特定分支，它还可以配置为自动推送到服务器。

你可能会调查一下。这对我们 5 人的小团队来说是一个极大的好处。

# c# - .net 垃圾收集器何时执行长时间运行的方法？

> ID：14771871
> 
> 赞同：1
> 
> 时间：2013-02-08T11:47:49.427
> 
> 标签：c#, .net, garbage-collection, clr

如果我有一个正在做长时间工作的方法（例如进行 Web 服务调用），垃圾收集器是否查看该方法使用的内存并将其移动到不同的代，或者它是否忽略该方法直到它完成并且然后尝试在以后的数据中收集内存？

我听到一个解释，如果正在进行 Web 服务调用，GC 会查看它，因为它需要很长时间，所以将它标记为第 1 代，然后是第 2 代。现在我们可以拥有大量内存直到稍后阶段才能收集。这个对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:53:44.247

当 GC 启动时，它会查看对象根。它不关心这些根是来自方法变量还是实例/静态字段。它不会释放从该方法引用的资源，因为这些引用在方法退出之前是活动的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T01:55:30.303

方法对 GC 来说是不直接可见的，即它对它们是无视的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T11:54:01.903

垃圾收集器不寻找方法。GC 检查引用。

简单的例子：如果你定义一个全局变量，它可以从作用域的每个函数中访问。它不会被收集，直到您离开范围。如果你定义了一个局部变量，比如说在函数内部，这个变量使用的内存将在函数返回后被清除（或者`finally`在你从 try/catch 块返回的情况下阻塞）

# c# - ManagedUPnP：没有版本的发现搜索 URI？

> ID：14771872
> 
> 赞同：0
> 
> 时间：2013-02-08T11:47:49.457
> 
> 标签：c#, .net, upnp

对于应用程序，我必须发现所有运行的“我的”设备及其版本，以向它们推送更新（通过另一个协议）。

但是我不知道如何为发现对象指定它必须搜索的 URI，而不必指定对象。

**注意**：我知道我也可以使用空 URI 字符串进行发现，然后在我收到的设备上进行过滤，但由于我在网络上有大量（600 多个）UPnP 设备，但有少量 UPnP 设备我需要搜索（~20），这需要很多时间，我正在寻找一种有效的方法。

所以，如果我的 URN 如下：`urn:upnp-org:device:TestDevice:2.2.5`，并且我想拥有 `urn:upnp-org:device:TestDevice:*`，我应该如何进行？

我试过

`urn:upnp-org:device:TestDevice:` `urn:upnp-org:device:TestDevice:*`

有通配符吗？占位符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:39:36.263

我认为您在滥用`M-SEARCH`. `ST`version 表示**接口版本，而不是实现版本**，更高版本预计将**完全向后兼容**。因此，您只需填写已知的最低版本即可搜索设备**的**任何版本**。****所有设备都会响应您，但使用您搜索的版本，而不是它们的实际版本**（因为它们是向后兼容的）。没有什么能比得上“通配符”，因为设备应该尽最大努力满足要求，而不是吹嘘它们的实际版本。`ST:`**`M-SEARCH`**

 **我建议彻底阅读 UPnP 设备架构文档，第 1.2.2 和 1.2.3 章围绕 M-SEARCH 请求和响应。

如果您想使用 UPnP**实现版本**发现（这是完全合法的），我建议使用返回该信息的函数来实现自定义服务。据我了解，您已经有一个自定义设备。**

# javascript - 在异步函数中设置和访问全局对象

> ID：14771874
> 
> 赞同：1
> 
> 时间：2013-02-08T11:47:52.900
> 
> 标签：javascript, node.js, asynchronous, coffeescript

像这样的代码：

```
fileArray = ['a.json','b.json','c.json']
dict = {}
fileArray.map (f) ->
  fs.readFile f, (err, data) ->
    json.parse data, (k, v) ->
      dict[k] = v 
```

我想将`dict`对象写入文件。如何等待所有异步函数完成？

或者还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:16:25.457

你可以像这样手动完成

```
fileArray = ['a.json','b.json','c.json']
dict = {}
counter = 0
fileArray.map (f) ->
    fs.readFile f, (err, data) ->
        counter +=1
        json.parse data, (k, v) ->
            dict[k] = v
        if counter >= fileArray.length
            fs.writeFile("mydict.txt", dict.toString()) 
```

或者您使用异步库（例如[https://github.com/caolan/async](https://github.com/caolan/async)）

```
fileArray = ['a.json','b.json','c.json']
dict = {}
counter = 0
read = (file)->
    fs.readFile f, (err, data) ->
        json.parse data, (k, v) ->
            dict[k] = v

fns = ((do (file) -> read(file)) for file in fileArray)
#use the async lib
async.parallel fns, -> fs.writeFile "mydict.txt", json.stringify(dict) 
```

请注意我没有测试过这个。

# php - 页面布局设计器 CMS

> ID：14771880
> 
> 赞同：0
> 
> 时间：2013-02-08T11:48:17.413
> 
> 标签：php, jquery, layout, content-management-system, concrete5

我目前正在开发供未来客户站点使用的内容管理系统。该项目目前处于起步阶段，在思考一些工作时我遇到了一个问题。

我希望 CMS 非常易于使用和编辑站点内容，并以最少的技术知识为最终用户添加新内容。我正在努力为管理后端创建一个页面设计器。它本质上将允许网站管理员添加新内容，无论是图像、文本、推特提要还是一些自定义 HTML。我的目标是让它类似于 Concrete5 使用的内容编辑器。我进行了研究并试图弄清楚他们是如何做到的，但它暗示了我。与 Concrete5 不同，我希望我的只是在编辑器中显示简单的块，而不是编辑整个站点。然后这些块将单独存储在数据库中，然后在请求页面时输出。

我已经尝试过 jQuery UI，使用可拖动元素并将它们约束到一个集合布局，这看起来不错，但并不理想。

我可以灵活地改变这样做的方式，并对您可以提供的任何建议持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:54:58.970

听起来您希望管理员用户能够向站点添加某种小部件。我会看看例如 Kentico CMS 如何解决这个问题：http: [//www.kentico.com/Product/All-Features/Content-Management/Widgets](http://www.kentico.com/Product/All-Features/Content-Management/Widgets)。[您可以从http://www.kentico.com/Download-Demo/Trial-Version](http://www.kentico.com/Download-Demo/Trial-Version)下载免费演示。

# sms - wso2 ESB 中的 SMS 传输发送方

> ID：14771889
> 
> 赞同：3
> 
> 时间：2013-02-08T11:48:58.563
> 
> 标签：sms, wso2, wso2esb, smpp, jsmpp

最近我读了一篇关于[使用 WSo2 esb 发送短信通知](http://mytecheye.blogspot.com/2013/01/wso2-esb-sending-sms-alerts-for-failures.html)的文章。不幸的是，它对我不起作用，我对其中一些配置也不是 100% 确定。以下是我遇到的问题。

1.  是否有任何其他库文件，而不是下面的两个文件，可用于通过 SMPP 启用 SMS 传输发送器？

    **axis2-transport-sms-1.0.0.jar**

    **jsmpp-2.1.0.jar**

2.  我应该将每个 jar 放入其中的实际目录是什么 - 是**$ESB_HOME/repository/components/lib**吗？

3.  最后，发送特定号码的地址端点应该是什么样子？

是这样吗？

```
 <endpoint>  
    <address uri="sms://94777179968">  
    </address> 
```

注意：- 我使用 SMSC 模拟器作为我的实际 SMSC。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:02:01.803

Axis2 SMS Transport 旨在通过实现`org.apache.axis2.transport.sms.SMSImplManager`接口来支持任何 SMPP 实现。

请参考[http://ws.apache.org/commons/transport/sms.html](http://ws.apache.org/commons/transport/sms.html)

在`axis2-transport-sms-1.0.0.jar`中，有两种实现方式。

一世。`org.apache.axis2.transport.sms.gsm.GSMImplManager`- 实现 SMSLib [http://smslib.org/](http://smslib.org/)

ii. `org.apache.axis2.transport.sms.smpp.SMPPImplManager`- 实现 JSMPP [https://code.google.com/p/jsmpp/](https://code.google.com/p/jsmpp/)

如果需要，您可以参考这些实现的来源并编写自己的实现。例如，我在我的一个项目（一个独立的应用程序）中使用了 Logica SMPP，它是一个非常好的库，我的项目已经投入生产两年多了。

这是 Logica SMPP 的网站：http: [//opensmpp.logica.com/CommonPart/Introduction/Introduction.htm](http://opensmpp.logica.com/CommonPart/Introduction/Introduction.htm)

对于您的第二个和第三个问题，我认为您提到的博客文章中已经有了答案。请完成该博客中的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:27:44.763

对您的具体问题的回答... 1\. 不，这些是正确的，按照文章中的指示将它们放在适当的位置 2\. 是 3\. 是的，但是如果通过设计视图输入，您会收到一个错误，说它是无效的格式。切换到要添加的源视图。（然而，虽然我确实得到了错误，但它也确实出现在源视图中，所以你只需要对此进行试验）。

完全按照文章操作，但是代理服务的配置文件和axis2文件中的配置（启用SMS传输）都有一个小错误

在服务 xml 中，描述标记围绕所有目标，因此将空描述元素移动到结束目标元素之外。

axix2 配置文件需要将 transportsender 元素稍微更改为 transportSender - 请注意发送者的大写“S”。

这就是我让这个工作的方式。祝你好运。

# javascript - 将 Handlebar 与 D3.js 一起使用

> ID：14771891
> 
> 赞同：6
> 
> 时间：2013-02-08T11:49:06.383
> 
> 标签：javascript, d3.js, handlebars.js

我有一个 Handlebar 模板，我想将 d3 生成的 svg 图包含到该模板中。图应该在模板内

D3 图表

```
var dataset = [1200,3000,3200];
// dataset will change dynamically.

<script type="text/javascript">

    var w = 154;
    var h = 42;
    var rect_1_h = 5;
    var rect_2_h = rect_1_h * 2;
    var rect_2_w = rect_1_h/2;
    var rect_1_color = "#A1C9D9";
    var rect_2_color = "#999999";
    var text_color = "#555555";
    var font_size = 18;
    var font_family = "Segoe UI"

    var dataset = [1200,3000,3200];

    /*------controller----*/

    var xScale = d3.scale.linear().domain([dataset[0],dataset[2]])
    .range([0,w]);

    var svg = d3.select("body").append("svg").attr("width",w).attr("height",h);
    var rect1 = svg.append("rect").attr("x",0).attr("y",3*h/4).attr("width",w).attr("height",rect_1_h)
    .style("fill",rect_1_color);
    var rect2 = svg.append("rect").attr("x",xScale(dataset[1])).attr("y",3*h/4-rect_1_h/2).attr("width",rect_2_w)
    .attr("height",rect_2_h).style("fill",rect_2_color);

    //var texts = svg.selectAll("text").data(dataset).enter().append("text").text(function(d){ return d; }).attr("fill","red").attr("x",function(d,i){ return i*50  }).attr("y",30)

    var text1 = svg.append("text").attr("x",2).attr("y",h/3+2).text(dataset[0]).style("fill",text_color)
    .attr("font-size",font_size).attr("font-family",font_family);
    var text2 = svg.append("text").attr("x",w-42).attr("y",h/3+2).text(dataset[2]).style("fill",text_color)
    .attr("font-size",font_size).attr("font-family",font_family);
</script> 
```

车把模板

```
<script id="datatemplate" type="text/x-handlebars-template">
      {{#each objects}}
      <tr>
      <td>{{lp}}<span class="text1">{{lp2}}</span></td>
      <td>{{dc}}<span class="text1">{{dc2}}</span></td>
      <td>{{lp}}<span class="text1">{{lp2}}</span></td>
      </tr>
      {{/each}} 
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-12T17:37:43.097

如果模板内应该只有一个图形实例，那么您需要做的就是告诉 d3 将 svg 元素附加到`<script id="datatemplate">`标签内而不是正文内。

```
var svg = d3.select("#datatemplate").append("svg").attr("width",w).attr("height",h); 
```

另一方面，如果您希望模板在每次调用时生成一个 d3 图，我认为这不是正确的做事方式。由于 d3 将数据绑定到 DOM 元素，而 Handlebars 从数据结构生成 HTML 字符串。

您可以将图形代码包装在一个闭包中，您将希望绑定到的数据和元素传递给该闭包，然后从 Handlebars 帮助器生成图形的新实例：

```
function graphic( dataset, element ) {
  var w = 154;
  var h = 42;
  var rect_1_h = 5;
  var rect_2_h = rect_1_h * 2;
  var rect_2_w = rect_1_h/2;
  var rect_1_color = "#A1C9D9";
  var rect_2_color = "#999999";
  var text_color = "#555555";
  var font_size = 18;
  var font_family = "Segoe UI";

  /*------controller----*/

  var xScale = d3.scale.linear().domain([dataset[0],dataset[2]])
        .range([0,w]);

  var svg = d3.select( element ).append("svg").attr("width",w).attr("height",h);
  var rect1 = svg.append("rect").attr("x",0).attr("y",3*h/4).attr("width",w).attr("height",rect_1_h)
        .style("fill",rect_1_color);
  var rect2 = svg.append("rect").attr("x",xScale(dataset[1])).attr("y",3*h/4-rect_1_h/2).attr("width",rect_2_w)
        .attr("height",rect_2_h).style("fill",rect_2_color);

  //var texts = svg.selectAll("text").data(dataset).enter().append("text").text(function(d){ return d; }).attr("fill","red").attr("x",function(d,i){ return i*50  }).attr("y",30)

  var text1 = svg.append("text").attr("x",2).attr("y",h/3+2).text(dataset[0]).style("fill",text_color)
        .attr("font-size",font_size).attr("font-family",font_family);
  var text2 = svg.append("text").attr("x",w-42).attr("y",h/3+2).text(dataset[2]).style("fill",text_color)
        .attr("font-size",font_size).attr("font-family",font_family);

  return svg;
};

Handlebars.registerHelper('graphics', function( dataset, id ) {
  graphic( dataset, '#' + id );
}); 
```

然后在您的模板中：

```
<script id="datatemplate" type="text/x-handlebars-template">
  {{#each objects}}
  <tr>
  <td>{{lp}}<span class="text1">{{lp2}}</span></td>
  <td>{{dc}}<span class="text1">{{dc2}}</span></td>
  <td>{{lp}}<span class="text1">{{lp2}}</span></td>
  </tr>
  {{/each}}
  <div id={{ id }}></div>
  {{graphics dataset id}} 
</script> 
```

# ruby-on-rails - 使用 errors.add 进行 Rails 验证

> ID：14771897
> 
> 赞同：0
> 
> 时间：2013-02-08T11:49:39.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的模型中有一个单独的方法可以像这样进行验证：

```
validate :validate_id

def validate_id
    errors.add(:base, "Id Should Not Blank") if self.project_id.blank?
end 
```

我需要执行如下验证：

validates_format_of :project_id, :with => /^(?!\d+$)[a-z0-9-_]*$/

这将验证只有下划线和破折号且它们之间没有空格的字母和数字。

有没有可能在我的方法 validate_id 中使用它。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:22:45.350

尝试：

```
def validate_id
  errors.add(:base, "Id Should Not Blank") if /^(?!\d+$)[a-z0-9-_]*$/.match(self.project_id).nil?
end 
```

# vba - VBA Workbooks.open “编译错误：参数不是可选的”

> ID：14771900
> 
> 赞同：0
> 
> 时间：2013-02-08T11:49:48.483
> 
> 标签：vba, excel

我正在尝试使用

```
Workbooks.Open Filename:= [...] 
```

**使用对 Microsoft Scripting Routine 的引用来访问for each**循环中的某些数据的方法。我已经在其他几个宏中成功完成了此操作，但由于某种原因，在此文件中的所有模块中（我尝试重新启动机器等），我收到消息“编译错误：参数不是可选”的代码那条线。其他工作簿不会在那里抛出错误。

我对该问题的研究并没有针对这种特殊情况产生任何量身定制的东西——我认为也许我需要在某处使用 Set 来强制 VBE 识别该对象？希望更有经验的用户能够识别可能发生这种情况的一些经典情况。我现在唯一的线索是 VBE 似乎没有将“工作簿”识别为关键字，因为它没有将第一个字母大写。

任何帮助将非常感激。

C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:10:44.977

显然，工作簿中还有其他东西称为`Workbooks`（变量、类、函数），并且因为它具有更多的本地范围，所以在实际`Workbooks`对象之前找到它。

您可以重命名有问题的对象或`Workbooks`以更合格的方式访问：

```
Application.Workbooks.Open Filename:= [...] 
```

# objective-c - 谷歌地图 - iOS：旋转设备后保持地图位置

> ID：14771901
> 
> 赞同：0
> 
> 时间：2013-02-08T11:49:54.173
> 
> 标签：objective-c, google-maps, google-maps-api-3, ios6, google-maps-sdk-ios

我有 2 个布局（横向和纵向），每个布局都有一个 UIWebView 用于显示地图（谷歌地图）。现在我找到了适用于 iOS 的新 SDK 并想要迁移，但两种解决方案都存在问题：

地图在实际位置（pos1）打开，我可以移动或进行缩放（pos2）。如果我旋转设备，使用新布局再次获取 pos1 并且不维护 pos2。

我怎样才能让地图在两种布局中保持相同的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:19:56.007

最简单的方法是使用 Autolayout 来避免有 2 个不同的视图。否则您可以使用委托方法`mapView:(GMSMapView *)mapView didChangeCameraPosition:(GMSCameraPosition *)position`并将位置保存在 viewController 的变量中

# c# - 如何为具有不同名称的元素编写有效的 xsd

> ID：14771903
> 
> 赞同：2
> 
> 时间：2013-02-08T11:49:56.957
> 
> 标签：c#, xml, validation, xsd

我想使用 xsd 架构验证 xml，但我不知道如何为具有可变名称的元素创建正确的 xsd 架构。我的 xml 文档：

```
<Settings xmlns="main">
  <Object>
    <Rules>
      <Rule0>
        <Range>0 to 0</Range>
        <String>SomeString</String>
        <Integer>80</Integer>
        <Enabled>No</Enabled>
      </Rule0>
      <Rule0>
        <Range>0 to 0</Range>
        <String>SomeString</String>
        <Integer>80</Integer>
        <Enabled>No</Enabled>
      </Rule0>
    </Rules>
    <ObjectEnabled>No</ObjectEnabled>
  </Object>
</Settings 
```

还有我的 xsd 文件：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified"           targetNamespace="main" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="Settings">
<xs:complexType>
  <xs:sequence>
    <xs:element name="Object">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="Rules">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="?" maxOccurs="unbounded" minOccurs="0">
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element type="xs:string" name="Range"/>
                      <xs:element type="xs:string" name="String"/>
                      <xs:element type="xs:byte" name="Integer"/>
                      <xs:element type="xs:string" name="Enabled"/>
                    </xs:sequence>
                  </xs:complexType>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
          <xs:element type="xs:string" name="ObjectEnabled"/>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
</xs:complexType> 
```

当然，它可能是“Blablabla”而不是“Rule1”。我知道我不能输入通配符或问号，所以我请你帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:56:09.910

我认为你将不得不重新组织元素。

而不是拥有不同的元素......

```
<Rule0 />
<Rule1 /> 
```

你可以写...

```
<Rule name="rule0" />
<Rule name="rule1" /> 
```

将元素视为描述所有规则属性的类，而不是描述单个规则属性的对象。

# jquery - 如何将查询结果放入文本元素和文本区域元素

> ID：14771907
> 
> 赞同：0
> 
> 时间：2013-02-08T11:50:08.140
> 
> 标签：jquery, jsp, jquery-mobile

我是 jQuery 和 AJAX 的初学者，我只想从 JSP 文件中获取一个值到 HTML5，这样我就可以将该值放入`<textarea>`我的 HTML5 源代码中的 a 中。请帮助我，谢谢。
这是源文件：

```
<html>
..
 <body>
<div data-role="content">
<div data-role="fieldcontain"> 
    <form method="post" action="ShowQuestion.jsp" name="frm" > <!--using post action, transfer Element Information-->   
<label for="theQuestion"></label>
 <div id="QuestionLog"> <!--to contain my question title and content-->
   <input type="text" id="qnaTitle" name="qnaTitle" > </input> <!--input title-->
<textarea cols="20" rows="5" wrap="hard" id="qnaContent" name="qnaContent">
 </textarea> <!--input content-->
     </div>       
   </form>
..
</body>
</html> 
```

```
Connection conn;
PreparedStatement pstmt;
ResultSet rs=null;

pstmt = conn.prepareStatement("select * from question "); // query
rs = pstmt.executeQuery(); // execute that query 

while(rs.next()) {

   String title=rs.getString(1); //save the query's result      
   String content = rs.getString(2);  //save the query's result,too

}
}catch(Exception e) {

   e.printStackTrace(); // print the Exception Message

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:58:26.240

当您使用 jquery 时，在获得值（并且您确定）之后，您所要做的就是

```
$('#qnaContent').val(content); // Considering that the result string is stored in "content" 
```

# php - 如何使自定义数组类在为空时返回布尔值

> ID：14771909
> 
> 赞同：0
> 
> 时间：2013-02-08T11:50:13.333
> 
> 标签：php, arrays, object

我有一堂课如下：

```
class Fields implements ArrayAccess, Countable, SeekableIterator 
{
   $this->_fields = array();

   ...continue
} 
```

我想让我的班级具有以下布尔能力

```
$myArray = new Fields();
if($myArray == false)
{
   echo 'It is empty';
} 
```

如何在我的课堂上实现上述行为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:58:40.147

对于您的“问题”，这不是一个好的解决方案，但它确实有效。

```
class Fields implements ArrayAccess, Countable, SeekableIterator 
{
  protected $_fields = array();

  // ...continue

  public function __invoke() {
    return $this->_fields == true;
  }
} 
```

我只是实现了一个`__invoke()`方法，如果对象被用作函数，它就会被调用。如果您现在执行以下操作，它将按预期工作。

```
$myArray = new Fields();
if($myArray() == false)
{
   echo 'It is empty';
} 
```

这可能不是最好的方式或您应该使用的方式`__invoke`，但它是一种可能性。

# ruby-on-rails - Rails 中 application_helper.rb 中的图像源路径

> ID：14771910
> 
> 赞同：1
> 
> 时间：2013-02-08T11:50:13.797
> 
> 标签：ruby-on-rails, image-processing, asset-pipeline

在我的 Rails 应用程序中，我在 Application_helper.rb 中使用了 img 标签，但我认为 Assests 管道在这里不起作用，所以图像没有加载到页面上。并且浏览器控制台显示为“无法加载给定 URL”的错误。我的代码块中的一行是：

```
text = "<input type='checkbox'/><img src='Icon_Bar.png' />#{r[:value]}<span class='small'>(#{r[:count]})</span>".html_safe 
```

当我对图像使用任何在线路径时，它工作正常。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:00:44.917

试试这个，

```
text = "<input type='checkbox'/><img src='/assets/Icon_Bar.png' />#{r[:value]}<span class='small'>(#{r[:count]})</span>".html_safe 
```

`/assets/`在 image.extension 之前添加。

当`Icon_Bar.png`在`assets/images/Icon_Bar.png`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T02:02:10.933

尝试：

`<img src="<%= image_path('Icon_Bar.png') %>" />`

文档在这里：[http ://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_path](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_path)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:39:16.943

尝试 ：

```
<%= image_tag("Icon_Bar.png") %> 
```

注意大写字母，它们在引用资产时也很重要。

# java - 查找给定java代码的时间和空间复杂度

> ID：14771917
> 
> 赞同：0
> 
> 时间：2013-02-08T11:50:33.270
> 
> 标签：java, algorithm, language-agnostic

嗨，我需要找到程序的时间和空间复杂度，请帮助，如果可能，请提出可以执行的优化，...................... ..................................................... ..................................................... ..................................................... ......

```
public class Sol {
    public int findMaxRectangleArea(int [][] as) {
        if(as.length == 0)
       return 0;
    int[][] auxillary = new int[as.length][as[0].length];
        for(int i = 0; i < as.length; ++i) {
            for(int j = 0; j < as[i].length; ++j) {
            auxillary[i][j] = Character.getNumericValue(as[i][j]);
        }
        }
        for(int i = 1; i < auxillary.length; ++i) {
        for(int j = 0; j < auxillary[i].length; ++j) {
            if(auxillary[i][j] == 1)
                    auxillary[i][j] = auxillary[i-1][j] + 1;
            }
        }

    int max = 0;
        for(int i = 0; i < auxillary.length; ++i) {
            max = Math.max(max, largestRectangleArea(auxillary[i]));
        }
        return max;
    }

    private int largestRectangleArea(int[] height) {
        Stack<Integer> stack =
        new Stack<Integer>();
        int max = 0;
        int i = 0;
        while(i < height.length) {
            if(stack.isEmpty() ||
                height[i] >= stack.peek()) {
                stack.push(height[i]);
            i++;
            }
            else {
            int count = 0;
            while(!stack.isEmpty() &&
                stack.peek() > height[i]) {
                    count++;
                    int top = stack.pop();
                max = Math.max(max, top * count);
                }
            for(int j = 0; j < count + 1; ++j) {
                    stack.push(height[i]);
                }
                i++;
            }
        }

        int count = 0;
        while(!stack.isEmpty()) {
            count++;
            max = Math.max(max, stack.pop() * count);
        }
        return max;
    } 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:20:29.307

要查找空间复杂度，请查看您声明的变量并且大于单个原始变量。事实上，我相信您的空间复杂度将由我的数组`auxilary`和`Stack` `stack`. 第一个的大小很清楚，我不完全理解第二个，但我看到它的大小永远不会大于数组的大小。所以我会说空间复杂度是`O(size of(auxilary))`or `O(N * M)`where `N=as.length()`and `M = as[0].length`。

现在时间复杂度有点棘手。您在整个`auxilary`数组上有两个周期，因此可以肯定时间复杂度至少为`O( N * M)`. 您还有另一个循环`largestRectangleArea`调用`auxilary`. 如果我正确地获得了这个函数中的代码，那么这个函数似乎又是线性的，但我不确定这里。由于您更了解逻辑，因此您可能能够更好地计算其复杂性。

希望这可以帮助。

# javascript - 代码不适用于 IE8 和 Mozilla Firefox

> ID：14771921
> 
> 赞同：-1
> 
> 时间：2013-02-08T11:50:47.960
> 
> 标签：javascript, jquery, html, browser, gson

我正在使用 JSP 和 Servlet 开发一个 Web 应用程序。

我正在使用 **gson2.2.2**

当我在上面运行以下代码时，`google chrome 24.0.1312.57 m`它工作正常，但是当我尝试反复运行相同的代码时`IE8`，`Mozilla Firefox 3.6.13`相同的代码不会填充`combobox`.

**HTML：**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Testing Browser</title>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>

<script>
$(document).ready(function() { 
        alert('in');
        //fill Salutation
        var $ul = $(SALUTATION);
        $.get('MyServlet?action=cmbSALUTATION', function(responseJson) {
            $.each(responseJson, function(index, item) {
                $('<option>').text(item).appendTo($ul);
            });
        });
    });
</script>
</head>

<body>
   <table>
       <tbody>
          <tr>
              <td>Salutation</td>
              <td><select name="SALUTATION" id="SALUTATION"> </select></td>
          </tr>
       </tbody>
   </table>
</body>
</html> 
```

**小服务程序：**

```
//COMBOBOX - Get the data for column SALUTATION
        if(request.getParameter("action")!=null)
        if(request.getParameter("action").equalsIgnoreCase("cmbSALUTATION"))
        {
            String s2[][] = select.getData("select TITLE_ID from CRM_TITLE");
            List<String> list = new ArrayList<String>();
            for(int i=0;i<s2.length;i++)
            {
                list.add(s2[i][0]);
            }
            String json = new Gson().toJson(list);
            response.setContentType("application/json");
            response.setCharacterEncoding("UTF-8");
            response.getWriter().write(json);
        } 
```

如果我遗漏了什么，请告诉我..

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:55:46.907

试试这个：

```
 var $ul = $('#SALUTATION'); // <----id selector
    $.get('MyServlet?action=cmbSALUTATION', function(responseJson) {
        $.each(responseJson, function(index, item) {
            $('<option />').text(item).val(index).appendTo($ul);
        });  //----^^^^^^-----------------------------try with this
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:58:04.070

试试这个链接[jQuery 函数](http://bugs.jqueryui.com/ticket/6673)。IE 不支持大多数 Jquery 插件。否则测试 JavaScript lint 错误。[JavaScript 在线 lint 错误](http://www.javascriptlint.com/online_lint.php)

# facebook - facebook 喜欢按钮动态打开图元标签

> ID：14771931
> 
> 赞同：-1
> 
> 时间：2013-02-08T11:51:29.070
> 
> 标签：facebook, dynamic, facebook-like, facebook-opengraph

我有这个带有动​​态页面的网站。现在有一个包含所有文章概述的页面和一个具有详细视图的页面，当您在概述页面上单击它的标题时会显示完整的文章。详情页面的 URL 是这样的，例如：

```
http://www.mysite.com/view.php?ID=43 
```

现在我想实现只显示在每篇文章底部的详细页面上的 facebook like 按钮。我发现我必须使用如下所示的 Open Graph 元标记

```
<meta property="og:title" content="My title" />
<meta property="og:type" content="article" />
<meta property="og:url" content="My url" />
<meta property="og:image" content="my img" />
<meta property="og:site_name" content="My site name" />
<meta property="fb:admins" content="admin number" /> 
```

现在我的问题是，如何动态填写每个元属性的内容值？这样每篇文章都有它自己的类似按钮。有没有办法在里面打印php语句或什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:11:15.720

是的，您可以像动态填充 HTML 中的任何参数或元素一样动态填充这些值。

```
<meta property="og:title" content="<?php print $title; ?>" />
<meta property="og:type" content="article" />  
<meta property="og:url" content="myurl/<?php print $articleurl; ?>" />  
<meta property="og:image" content="<?php print $article_image; ?>" />  
<meta property="og:site_name" content="My site name" />  
<meta property="fb:admins" content="admin number" /> 
```

不要忘记使用[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)检查您的 OGP 标签是否被解释为您想要的。Facebook 对遵守协议的期望非常严格。

# iframe - 在 iframe 中链接到谷歌分析不起作用

> ID：14771934
> 
> 赞同：0
> 
> 时间：2013-02-08T11:51:43.263
> 
> 标签：iframe, google-analytics, autologin

我被要求可以在 php 网站中打开（并自动登录）谷歌分析。我找不到任何表明可以自动登录的最新信息，但即使只是链接到 iframe 中的页面似乎也不起作用。我最近的一次是打开 www.google.com/analytics 但您无法登录。有什么方法可以做到这一点，你们中的一个人可能知道吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:48:32.760

Google Analytics 系统中有一些保护措施，可以避免人们将其加载到 iframe 中并以编程方式使用 Web 界面。

你检查过[API](https://developers.google.com/analytics/devguides/reporting/)吗？您应该能够使用它从 GA 中获取大部分数据。这是你最好的选择。

# javascript - jQuery表单验证问题，其他框可见

> ID：14771935
> 
> 赞同：2
> 
> 时间：2013-02-08T11:51:45.423
> 
> 标签：javascript, jquery, validation

我有下面的“其他”框。我想验证该框，使其仅在可见时才为空白。对于应该直截了当的事情，我遇到了麻烦。非常感谢任何帮助。谢谢

```
 else if($('#myBox_' + id + ':visible')) { if(!blank('otherprodtypebox[<xsl:value-of select="@id"/>]')){alert("Please enter a valid other option");return false;} }

    <script type="text/javascript">
function myOtherBox(e, id) {
    if (e.value == 'otherprodtype')
    {
        $('#myBox_' + id).show();
    }
    else
    {
        $('#myBox_' + id).hide();
    }

}
</script>

    <tr style="display:none;">
    <xsl:attribute name="id">myBox_<xsl:value-of select="@id"/></xsl:attribute>
    <td class="Label">Other</td>
    <td>
        <input class="amdInputText" type="text" id="otherprodtypebox" value="">
              <xsl:attribute name="value"><xsl:value-of select="otherprodtypebox"></xsl:value-of></xsl:attribute>
        </input>
    </td>
</tr> 
```

编辑：

我现在几乎可以正常工作了：

```
else if($('#myBox_<xsl:value-of select="@id"/>').is(':visible')) { if(!blank('otherprodtypebox[<xsl:value-of select="@id"/>]')){alert("Please enter a valid other option");return false;} } 
```

好的，所以这似乎只在框可见时检查验证，如果它为空则抛出警报，但是由于某些奇怪的原因，当我填写框时它不会按预期抛出警报但不会让我继续并且没有错误消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:33:59.307

我设法让它与事物的组合一起工作，但最重要的是 .is(':visible')

工作代码：

```
else if(($('#myBox_<xsl:value-of select="@id"/>').is(':visible'))&amp;&amp;(!blank('otherprodtypebox[<xsl:value-of select="@id"/>]'))){alert("Please enter a valid other option");document.lending.otherprodtypebox[<xsl:value-of select="@id"/>].focus();return false; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:51:18.410

替换`$('#myBox_' + id + ':visible')`为`$('#myBox_' + id).is(':visible')`修复问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:39:54.237

您应该知道这`$('#myBox_' + id + ':visible')`是一个 jQuery 选择器，因此如果没有匹配的元素，它将返回一个空数组。

在 JavaScript 中将空数组转换为布尔值总是会返回`true`. 因此`if($('#myBox_' + id + ':visible'))`总会回来`true`。

您可以使用`if($('#myBox_' + id + ':visible').length > 0)`它来确保您的选择器至少匹配了一个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T11:56:21.443

我不太确定，但我认为这可能会导致问题（这会返回任何结果吗？你可以检查一下）：

```
$('#myBox_' + id + ':visible') 
```

而不是这个，你可以尝试检查可见属性，如：

```
$('#myBox_' + id).attr('visible') 
```

# php - 使用 php 在数据库中使用 javascript 插入当前时间戳

> ID：14771939
> 
> 赞同：1
> 
> 时间：2013-02-08T11:51:53.227
> 
> 标签：php, javascript, mysql

我正在尝试使用 javascript 将本地时间插入数据库。谁能帮我？您能否查看名为 member.class.php 的文件，请让我知道我必须将 javascript 代码放在哪里...`https://www.dropbox.com/sh/lfef67brewx7rub/wYRP72bDh7`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:54:12.597

它非常简单的人......试试这个

```
var milliseconds = new Date().getTime(); 
```

它会给你以毫秒为单位的时间，或者你可以使用

```
new Date().getTime(); 
```

如果你想在 unix(linux) 时间戳中使用它，然后像这样使用

```
var unix = Math.round(+new Date()/1000);   it will also give you in seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:00:04.510

```
var currentdate = new Date(); 
var datetime = "Date n Tym : " + currentdate.getDate() + "/"
            + (currentdate.getMonth()+1)  + "/" 
            + currentdate.getFullYear() + " @ "  
            + currentdate.getHours() + ":"  
            + currentdate.getMinutes() + ":" 
            + currentdate.getSeconds(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:56:50.767

在 Javascript 中：

```
 var d = new Date();
    var date_with_time = d.getDate()+"-"
                        +d.getMonth()+1+"-"
                        +d.getFullYear()+" "
                        +d.getHours()+" "
                        +d.getMinutes()+" "
                        +d.getSeconds(); 
```

在 PHP 中，最好的方法是创建`time`列`DATETIME`类型并设置默认值`CURRENT_TIMESTAMP`。无需通过 Javascript 手动插入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:15:00.843

[使用 JavaScript 格式化时间和日期的 10 种方法](http://www.webdevelopersnotes.com/tips/html/10_ways_to_format_time_and_date_using_javascript.php3)

看到[这个答案](https://stackoverflow.com/a/1056730/1791115)！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-08T11:43:32.273

DB 像 js 中的时间戳：

```
var timestamp = "" + d.getFullYear()
                    + ("0" + (d.getMonth()+1)).slice(-2)
                    + ("0" + d.getDate()).slice(-2) + "-"
                    + ("0" + d.getHours()).slice(-2)
                    + ("0" + d.getMinutes()).slice(-2)
                    + ("0" + d.getSeconds()).slice(-2); 
```

在此之后，例如，timestamp="20160408-​​134304"

# jquery-ui - 将数据从一个 Html.listboxfor 复制到 asp.net mvc 中的另一个列表框

> ID：14771942
> 
> 赞同：4
> 
> 时间：2013-02-08T11:51:59.807
> 
> 标签：jquery-ui, model-view-controller, jquery, asp.net-mvc-4

我有两个`Html.ListBoxFor`叫`A`& `B`。

1）`A`从数据库填充数据`B`并且为空。

2）我想要这样的功能[，](http://jsfiddle.net/dm85y/1/)将list 中的项目`A`放入 list `B`。

```
$('.add').on('click', function() {
    var options = $('select.multiselect1 option:selected').sort().clone();
    $('select.multiselect2').append(options);
});
$('.addAll').on('click', function() {
    var options = $('select.multiselect1 option').sort().clone();
    $('select.multiselect2').append(options);
});
$('.remove').on('click', function() {
    $('select.multiselect2 option:selected').remove();
});
$('.removeAll').on('click', function() {
    $('select.multiselect2').empty();
}); 
```

3）我用 asp.net mvc 试过这个，但我无法在模型和控制器中获取选定的项目。

4) 我想要一种可以在 asp.net mvc 中执行此操作的方法。如果在 mvc 中有某种方式，那么我将能够将该数据存储在 SQL DB 中

5) 它的 jquery 兄弟在[这里](https://stackoverflow.com/questions/10781500/how-to-copy-option-from-one-select-to-another)

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:24:26.800

我想这会对你有所帮助。

块引用

html文件

```
Fruits:
        <select multiple="multiple" id="a">
            <option value="1">Apple</option>
            <option value="2">Orange</option>
            <option value="3">Banana</option>
        </select>

        <input type="button" id="add" value="Add"/>
         <input type="button" id="addall" value="Add all"/>
        <select multiple="multiple" id="b">

        </select> 
```

Javascript 文件

```
$("#add").bind("click", function () {
        addOption(false);

 });

$("#addall").bind("click", function () {
    addOption(true);

});

function addOption(isAll){
    var option = $("#a option");
    if (!isAll) {
       option = $("#a option:selected");
    } else {
       $("#b").html("");
    }

    $(option).each(function () {
       var val = $(this).val();
       var text = $(this).text();
       $("#b").append($(this)[0].outerHTML);
       $(this).remove();
    });
} 
```

# ios - 在没有 Hackulo.us 和 Apple 开发者 ID 的 iOS 6.1 越狱设备中进行测试

> ID：14771943
> 
> 赞同：0
> 
> 时间：2013-02-08T11:52:00.753
> 
> 标签：ios, jailbreak

首先，**我知道有很多与这个类似的问题**，但是，它们很旧，而且其中的答案很遗憾不再有效，因为游戏已经改变**，没有 Hacklo.us**参与其中。

基本上，我想为 iOS 开发并测试我制作的应用程序，以后我可能想将它们提交到 Apple Store，但现在我不愿意支付 99 美元加入 Apple iOS 开发者计划只是为了在我的 iPhone 中使用我的应用程序。

我有一部带有 iOS 6.1 的越狱 iPhone 4S。

**我发现的关于如何做到这一点的唯一帖子，要么使用 Hackulo.us（大约 2 个月前下降），要么使用同样离线的名为 Jailcoder 的东西，它们似乎也只适用于旧版本的 XCode/iOS（不清楚关于这一点）。**

在目前的情况下，如何做到这一点有什么新的进展吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:01:04.887

简单的。构建应用程序后，只需使用一些实用程序（SSH、iExplorer 等）将应用程序包复制到设备上的 /Applications 目录。之后，运行该`uicache`工具或重新启动 iPhone 以使应用程序出现在主屏幕上。

# android - 使用 android 的 wordpress 创建一个 html fanapp 应用程序？

> ID：14771944
> 
> 赞同：0
> 
> 时间：2013-02-08T11:52:03.010
> 
> 标签：android, html, wordpress

我在google play上看到了很多粉丝应用。它们似乎是在 webview 上运行的 HTML5。它们显示有关某个主题的视频、图像和信息（看起来像 RSS）列表。有谁知道他们是否可以用 wopress 轻松完成？我知道 wordpress 带有一些内置的移动视图，但我愿意转向任何其他技术来实现这一点。真正让我吃惊的是，当你有一个基于 Wordpress 或任何其他 CMS 的小框架时，通过这种应用程序向用户显示/检索内容是多么容易。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:07:43.030

您需要做的就是使用 wordpress 提供的 REST Api。

这是文档的链接：http: [//developer.wordpress.com/docs/api/](http://developer.wordpress.com/docs/api/)

# mercurial - 如何获取远程服务器 hg 路径？

> ID：14771946
> 
> 赞同：98
> 
> 时间：2013-02-08T11:52:07.373
> 
> 标签：mercurial, hgrc, hg-paths

我已经创建了远程仓库来通过 ssl 推送我的本地更改。我确实`hg showconfig --debug`找到了我的远程 hg 路径，但它很乱，有人可以指出我如何准确地找到它是什么。

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-02-08T19:46:19.333

`hg paths`给出每个路径名与其 url 之间的关系。

```
> hg paths
default = ssh://hg@example.org/repo
local = /local/path/to/repo 
```

`hg paths <name>`给出名称的 url。

```
> hg paths default
ssh://hg@example.org/repo

> hg paths local
/local/path/to/repo 
```

顺便说一句，仅获取路径名：

```
> hg paths -q
default
local 
```

并且`hg paths -q <name>`总是会导致没有输出。

# java - 如何将字符数组中的单个字符转换为字符串？

> ID：14771954
> 
> 赞同：-1
> 
> 时间：2013-02-08T11:52:43.503
> 
> 标签：java, arrays, for-loop, character

我正在使用这个 for 循环从字符串中遍历我的数组的各个字符。

```
for(int i=0;i< array;i++){ 
```

我需要使用 g.drawString 一个一个地打印字符。因此，我需要将数组中位置 [i] 处的字符转换为字符串。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:54:49.810

您可以使用 ：

```
String.valueOf(yourChar) 
```

所以你的循环是：

```
for(int i=0;i< array;i++){
 g.drawString(String.valueOf(yourString.charAt(i));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:55:14.323

这很简单：`"" + array.charAt(i)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:59:56.530

像这样的东西

```
char[] chars = {'a','b','c'};
    String[] strings = new String[chars.length];
    for (int i = 0; i < chars.length; i++) {
        strings[i] = String.valueOf(chars[i]);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T11:57:11.013

只需这样做：

```
char[] array;

g.drawString(String.valueOf(array[i])); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T11:58:56.753

这是最佳实践方式：

```
char[] array;
for (char c : array) {
    String s = String.valueOf(c);
    // do something with s
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T11:59:07.003

通常，最好的方法是*如果您的源是 String*：

```
str.substring(i, i+1); // If you have a string. 
```

**因为它避免了不必要的字符缓冲区副本**。*一些*Java 版本（显然是 JDK7u5 和更早版本）可以*重用现有的字符缓冲区*，这样可以避免创建额外的对象。（见：[this notice of the change](http://mail.openjdk.java.net/pipermail/core-libs-dev/2012-May/010257.html)，表明这适用于JDK7u5及之前的版本）

有两种非常明显的选择（如果您有自己`char[]`的数据源，这个也可以使用）：

```
String.valueOf(str.charAt(i)); // If you have a String
String.valueOf(chararray[i]); // If you have a char[] 
```

这些实际上会创建两个对象：一个`String`和一个`char[1]`。

然后是丑陋的hackling：

```
"" + str.charAt(i); // If you do do not care about doing things right. 
```

这通常会导致创建一个字符串缓冲区，使用单个追加操作，并转换为字符串。如果您在热循环中使用此代码，它可能真的会损害您的应用程序性能。虽然代码*看起来*很简单，但它应该转换为：

```
StringBuilder temp = new StringBuiler("");
temp.append(str.chatAt(i));
temp.toString(); 
```

考虑到 API 中有两种干净的解决方案可用，这种开销实际上是毫无用处的：将字符转换为字符串，以及构造子字符串。

# android - Android - 对话框动画

> ID：14771956
> 
> 赞同：0
> 
> 时间：2013-02-08T11:52:47.030
> 
> 标签：android, animation, dialog

我得到了自定义的对话框弹出窗口，带有简单的选项，例如“退出”。当用户单击退出按钮时，对话框会自行取消并为 Activity 调用方法 finish()。

我的问题是，如何强制 Activity 等到 Dialog 退出动画完成，然后完成 Activity。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:03:20.190

使用[Runnable](http://developer.android.com/reference/java/lang/Runnable.html)延迟您的活动完成操作，直到您的对话框没有被关闭，在`OnCancelListener`其中设置为[Dialog.setOnCancelListener()](http://developer.android.com/reference/android/app/Dialog.html#setOnCancelListener%28android.content.DialogInterface.OnCancelListener%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:06:27.847

试试这个：

```
 @Override
    public void onClick(DialogInterface dialog, int which) {

    dialog.dismiss();
    Handler handler = new Handler();
    handler.postDelayed(new Runnable() {

        @Override
        public void run() {

        YourActivity.this.finish();

        }
    }, 2000);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T09:18:35.057

使用动画风格进行展示和解雇

`<style name="dialog_animations"> <item name="android:windowEnterAnimation">@anim/some_anim</item> <item name="android:windowExitAnimation">@anim/some_anim</item> </style>`

# javascript - 在同一行中赋值和返回变量

> ID：14771958
> 
> 赞同：1
> 
> 时间：2013-02-08T11:52:55.197
> 
> 标签：javascript

我有以下代码

```
var s = storage('foo');
s.bar = 100;
storage('foo', s); 
```

`storage`从某些存储介质返回一个对象。然后我更改对象的一个​​属性的值并再次发送它`storage`。我的问题是有没有办法让它成为一个班轮？就像是

```
storage('foo', storage('foo').bar = 100); 
```

但是上面的代码只保存`100`而不是整个`foo`对象。

这是`storage`函数，它存储在 localstorage 上，但使其成为对象存储而不是字符串存储：

```
function storage(item, value) {
    if(value!=null) {
        var result = (storage()) ? storage() : {};
        if(item) result[item] = value;
        return localStorage.setItem('storage', JSON.stringify(result))
    } else return (item) ? storage()[item] : JSON.parse(localStorage.getItem('storage'));
} 
```

编辑：所以我最终对存储功能进行了一行更改。但这并没有考虑到多维使用。所以我会欢迎任何建议。

```
function storage(item, value, property) {
    ...
        if(item) (property) ? result[item][property] = value : result[item] = value;
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:57:09.040

如果您无法更改`storage`函数，合理的做法是创建另一个函数：

```
function set_storage(obj, prop, val) {
    var s = storage(obj);
    obj[prop] = val;
    storage(obj, s);
}

// usage
set_storage('foo', 'bar', 100); 
```

如果您可以更改存储，这将是一个更好的方法。[`jQuery.data`](http://api.jquery.com/jQuery.data/)工作原理类似。

[在逗号运算符*^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)的帮助下，有很多方法可以在（几乎）一行中做到这一点，但它并不漂亮：

```
var s = storage('foo');
storage('foo', (s.bar = 100, s)); 
```

* * *

既然你说`storage`的是你的函数，重载它似乎是一个好方法。它会是这样的：

```
function storage(key, prop, val) {
    var storage = JSON.parse(localStorage.getItem('storage'));

    if(arguments.length === 0) {
        return storage;
    }
    else if (arguments.length === 1) {
        // only one argument passed, return the value with key `key`
        return storage[key];
    }
    else if (arguments.length === 2) {
        // set `key` to `prop` (`prop` contains the actual value)
        storage[key] = prop;
    }
    else {
        // set property `prop` of object in `key` to value `val`
        storage[key][prop] = val;
    }
    localStorage.setItem('storage', JSON.stringify(storage));
}

// Usage

// get `foo`:
var foo = storage('foo');

// set `foo`:
storage('foo', {bar: 42});

// set foo.bar
storage('foo', 'bar', 100); 
```

我希望它能给你一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:56:34.040

作为`storage`回报`object`，你有一个（非常）好的机会*；

```
storage('foo').bar = 100;

console.log(storage('foo').bar); // should give 100. 
```

...直接，因为对象是“通过引用传递”-esque。

* * *

^(* 如果不是这种情况，则`storage`返回存储的对象的*副本*，而不是对象本身；因此，您对返回对象所做的任何更新都不会影响存储中的对象。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:57:33.997

您可以创建一个接受更改对象的函数的函数：

```
function changeObject(key, func) {
    var obj = storage(key);
    func(obj);
    storage(key, obj);
}

changeObject('foo', function (s) { s.bar = 100; }); 
```

# c++ - 将自定义 HTML 类属性添加到 QTextEdit 中的选定块

> ID：14771962
> 
> 赞同：3
> 
> 时间：2013-02-08T11:53:13.320
> 
> 标签：c++, css, qt, qtextedit

我对 Qt 并不陌生，但我找不到如何将自定义 css 类添加到 QTextEdit 中的选定块。

据我所知，格式更改为如下代码：

```
QTextCursor cursor = textEdit->textCursor();
QTextBlockFormat bfmt;
// Apply format changes
cursor.setBlockFormat(bfmt); 
```

当我这样做时，生成的 HTML 代码会在其中创建一个带有内联样式的跨度，但我想要的是插入 css 类：

```
<SPAN class='myclass'>text</span> 
```

我在 QTextBlockFormat 中缺少一个函数来设置文本的 css 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:57:58.640

您应该能够通过手动将`<span style="">`标签添加到所选文本来模拟此行为：

```
QString oldText = cursor.selectedText();
// not the best way to concat three strings, but for example only...
cursor.insertHtml(QString("<span class=\"%1\">%2</span>").arg("myclass").arg(oldText)); 
```

`selectedText()`将返回当前选定的文本，并将`insertHtml()`在光标的开头插入新文本，删除当前选择（如果有）。

# xcode - CoreBluetooth 框架和 IOBluetooth 框架的区别

> ID：14771964
> 
> 赞同：3
> 
> 时间：2013-02-08T11:53:18.113
> 
> 标签：xcode, bluetooth, bluetooth-lowenergy

CoreBluetooth 框架和 IOBluetooth 框架（用于 MAC 应用程序）有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-22T19:03:22.273

CoreBluetooth 是一个用于蓝牙 LE 通信的 iOS 框架。IOBluetooth 是适用于 Bluetooth Classic 和 Bluetooth LE 的 OS X 框架。IOBluetooth 包含其中的 CoreBluetooth 框架，并使用与桌面上蓝牙 LE 的 iOS 版本相同的大部分代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:58:05.690

CoreBluetooth 用于访问低功耗蓝牙 API。IOBluetooth 用于蓝牙经典接口

# linq - Linq 空字符串与空格

> ID：14771967
> 
> 赞同：1
> 
> 时间：2013-02-08T11:53:27.567
> 
> 标签：linq, sql-server-2008, linq-to-sql

我有一个 linq 查询

```
var x = c from context.customers
where c.Name == '' 
```

和

```
var x =  c from context.customers
where c.Name == ' ' 
```

我在 SQL 2008 数据库中有一个 customername 列，带有 varchar(50)，一个客户是空白的，另一个有一个空格，但是 Linq 生成的 TSQL 是正确的，但是两个查询的返回都返回了两个客户，而不是我想要的 1 条记录，这是空白或有空格。根据这个问题，我知道根本问题是 SQL 服务器问题。

[SQL Server 2008 空字符串与空格](https://stackoverflow.com/questions/1399844/sql-server-2008-empty-string-vs-space)

我想修改我的 Linq 查询。我怎样才能做到这一点？无需在 linq 中使用 SQL 服务器 T-SQL 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:34:33.177

如果您使用的是实体框架，则使用[SqlFunctions.DataLength](http://msdn.microsoft.com/en-us/library/dd487157.aspx)来区分空字符串和空格。

例如

```
var x = c from context.customers
where c.Name == '' && SqlFunctions.DataLength(c.Name) == 0 
```

和

```
var x = c from context.customers
where c.Name == '' && SqlFunctions.DataLength(c.Name) != 0 
```

SqlFunctions.DataLength 转换为 TSQL [DATALENGTH](http://msdn.microsoft.com/en-us/library/ms173486.aspx)函数。DATALENGTH 将为您提供字符串所需的字节数，包括任何空格。相比之下，LEN 函数将为您提供修剪任何尾随空格后的字符数。

# redirect - nginx文件夹到cdn重定向

> ID：14771968
> 
> 赞同：0
> 
> 时间：2013-02-08T11:53:27.150
> 
> 标签：redirect, nginx, directory, cdn, permanent

我对 nginx 还是很陌生，尽管我查看了此类问题的所有答案并尝试了他们所说的一切，但到目前为止没有任何效果。

我想做这个重定向：

从 [http://www.mydomain.com/folder](http://www.mydomain.com/folder) 到 [http://cdn.mydomain.com/folder](http://cdn.mydomain.com/folder)

我把它放在服务器conf中：

```
 location /folder/ {
       rewrite ^ http://cdn.mydomain.com/folder/$request_uri permanent;
    } 
```

我想我在附近，但仍然不明白我错在哪里。

在我的旧服务器中，在每个文件夹中使用这个 .htaccess 可以正常工作：

```
 RewriteEngine On
    RewriteRule (.*) http://cdn.mydomain.com/folder/$1 [L,R=301] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:14:21.853

您当前仅匹配确切的位置`/folder/`。您应该编辑它以匹配所有以开头的位置`/folder/`：

```
location ^~ /folder/ { 
```

此外，您的重写有一个半错误。如果我要求`http://www.mydomain.com/folder/123.png`，那么您会将我重定向到`http://cdn.mydomain.com/folder//folder/123.png`，这很可能是不正确的。下面是完整的位置和重写指令。后面的问号`$request_uri`确保潜在的查询字符串只添加一次。

```
location ^~ /folder/ {
   rewrite ^ http://cdn.mydomain.com$request_uri? permanent;
} 
```

# python - 无法将 utf-8 编码的内容保存在字符串中

> ID：14771969
> 
> 赞同：0
> 
> 时间：2013-02-08T11:53:30.533
> 
> 标签：python, string, unicode, utf-8, python-2.7

我正在查询 Twitter API 并接收 utf-8 编码的答案。现在我想用`format()`函数将这些答案保存在一个字符串中。这就是我到目前为止所拥有的（我已经尝试了很多替代方案）。

```
for user in userInfos:
    tName = user["name"] if user["name"] is not None else ""
    tLocation = user["location"] if user["location"] is not None else ""
    tProfileImageUrl = user["profile_image_url"] if user["profile_image_url"] is not None else ""
    tCreatedAt = user["created_at"] 
    tFavouritesCount = user["favourites_count"] 
    tUrl = user["url"] if user["url"] is not None else ""
    tId = user["id"] 
    tProtected = user["protected"] 
    tFollowerCount = user["followers_count"]
    tLanguage = user["lang"]
    tVerified = user["verified"]
    tGeoEnabled = user["geo_enabled"]
    tTimeZone = user["time_zone"] if user["time_zone"] is not None else ""
    tFriendsCount = user["friends_count"]
    tStatusesCount = user["statuses_count"]
    tScreenName = user["screen_name"]

    # Custom characteristics
    age = utl.get_age_in_years(birthdayDict[str(tId)])

    # Follower-friend-ratio
    if tFriendsCount > 0:
        foRatio = float(tFollowerCount)/float(tFriendsCount)
    else:
        foRatio = ""

    # Age of account in weeks
    numWeeks = utl.get_age_in_weeks(tCreatedAt)

    # Tweets per time
    tweetsPerWeek = float(tStatusesCount) / numWeeks
    tweetsPerDay = tweetsPerWeek / 7.0

    in_users.remove(str(tId))

    outputList = [str(tName),
                  str(tScreenName),
                  str(tProfileImageUrl),
                  str(tLocation),
                  str(tCreatedAt),
                  str(tUrl),
                  str(age),
                  str(tStatusesCount),
                  str(tFollowerCount),
                  str(tFriendsCount),
                  str(tFavouritesCount),
                  str(foRatio),
                  str(tLanguage),
                  str(tVerified),
                  str(tGeoEnabled),
                  str(tTimeZone),
                  str(tProtected),
                  str(numWeeks),
                  str(tweetsPerWeek),
                  str(tweetsPerDay)]

    pprint.pprint(outputList)
    fOut.write("{}{}{}{}{}{}{}\n".format(twitterUsers[str(tId)], outputDelimiter, outputDelimiter.join(outputList), outputDelimiter, utl.get_date(), outputDelimiter, utl.get_time())) 
```

当 tName/tLocation 包含诸如 \xe4 之类的内容时，str(tName)、str(tLocation) 等会给我错误

```
ERROR:__main__:'ascii' codec can't encode character u'\xe4' in position 10: ordinal not in range(128)
Traceback (most recent call last):
  File "../code/userinfo_extraction_old.py", line 167, in <module>
    outputList = [str(tName),
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe4' in position 10: ordinal not in range(128) 
```

我试图了解它是如何工作的，但我无法弄清楚这里出了什么问题。我也尝试过使用 unicode() 而不是 str() ...没有机会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:02:15.403

要将`unicode`数据转换为`str`您需要指定编码。使用`tName.encode('utf8')`等。

你可能想阅读 Python 和 Unicode：

*   Python [Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)

*   Ned Batchelder 的[实用 Unicode](http://nedbatchelder.com/text/unipain.html)

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有任何借口！）](http://joelonsoftware.com/articles/Unicode.html)作者：Joel Spolsky

# javascript - 如何在 Android 4.2 中调用 JavaScript

> ID：14771970
> 
> 赞同：2
> 
> 时间：2013-02-08T11:53:31.997
> 
> 标签：javascript, android

我已经找到了很多关于如何从 android 调用 JavaScript 的示例。但这对我不起作用。我的目标 SDK 是 17（android 4.2）。这就是我从我的活动中加载我的 html 页面的方式：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test);

    myWebView = (WebView)findViewById(R.id.mapwebview1);
    WebSettings webSettings = myWebView.getSettings();
    webSettings.setJavaScriptEnabled(true);

    JavaScriptHandler jScriptHandler = new JavaScriptHandler(this); 
    WebChromeClient myWebChromeClient = new WebChromeClient();
    myWebView.setWebChromeClient(myWebChromeClient);
    myWebView.addJavascriptInterface(jScriptHandler, "MyHandler");

    myWebView.loadUrl("file:///android_asset/mywebpage.html");
    myWebView.loadUrl("javascript:myFunc()");

} 
```

这是我的 JavaScriptHandler 的代码：

```
public class JavaScriptHandler {
//TabFragmentMap mapFragment;
Context context;
//Fragment fragment;

public JavaScriptHandler (Context c){
    this.context = c;
} 
```

}

这是我的html的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PhoneGap</title>
</head>
<body onload="myFunc()">
<h1 id="test1">Hello World</h1>
<input type="button" value="Say hello" onClick="moveMyself()" />
<div id="myDiv"></div>
<script type="text/javascript"> 

    function myFunc()
    {

       document.getElementById('test1').innerHTML = 'Good Morning';

    }

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:55:36.307

尝试这个：

```
final WebView webview = (WebView)findViewById(R.id.browser);  
/* JavaScript must be enabled if you want it to work, obviously */  
webview.getSettings().setJavaScriptEnabled(true);  

/* WebViewClient must be set BEFORE calling loadUrl! */  
webview.setWebViewClient(new WebViewClient() {  
    @Override  
    public void onPageFinished(WebView view, String url)  
    {  
        webview.loadUrl("javascript:(function() { " +  
                "document.getElementsByTagName('body')[0].style.color = 'red'; " +  
                "})()");  
    }  
});  

webview.loadUrl("http://code.google.com/android"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T11:26:47.963

这实际上和塔米拉拉西给我的东西是一样的。如果有人想从 html 调用现有的 JavaScript 函数，请执行以下操作：

```
myWebView.setWebViewClient(new WebViewClient() {
        public void onPageFinished(WebView view, String url){
            myWebView.loadUrl("javascript:myFunc()");
        }
});
myWebView.loadUrl("file:///android_asset/myHtml.html"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T12:05:17.370

试试这个链接，我希望这对你有帮助：

[http://android-er.blogspot.in/2011/10/call-javascript-inside-webview-from.html](http://android-er.blogspot.in/2011/10/call-javascript-inside-webview-from.html)

[Android 4.2.1、WebView 和 javascript 界面中断](https://stackoverflow.com/questions/14031635/android-4-2-1-webview-and-javascript-interface-breaks)

[Javascript 界面不适用于 android 4.2](https://stackoverflow.com/questions/13775320/javascript-interface-not-working-with-android-4-2)

# sql - MS Access 2010 查询返回的行数多于表中的行数

> ID：14771973
> 
> 赞同：1
> 
> 时间：2013-02-08T11:53:56.217
> 
> 标签：sql, ms-access-2010

我在 MS Access 2010 中有一个查询，它返回的行数比源表中的行数多。

我试图通过一个简化的示例重新创建正在发生的事情，但无法获得相同的效果。我已经设置了参数，以便应该包含源表中的所有记录，但只包含与其他表匹配的记录。

有 178'205条`tbl_Toyota2012`记录...查询结果返回 180'365 条记录。

这是我的 SQL 代码：

```
SELECT 
   tbl_Toyota2012.[FC-Teile-Nr], tbl_Toyota2012.BEZEICHNUNG, tbl_Toyota2012.PFC, 
   tbl_Toyota2012.PC, tbl_Toyota2012.WARENGRUPPE, tbl_PriceCodes.PRICE_CODE, 
   tbl_PriceCodes.NORMAL_FACTOR, tbl_Toyota2012.EK_NETTO_MANDANT AS EP, 
   tbl_Toyota2012.UPE, tbl_Toyota2012.RABATTSATZ, tbl_NWGW_Key.ZUTEILUNG, 
   tbl_Toyota2012.UMSATZ_2012_UNITS AS [Volumen 2012], 
   [tbl_Toyota2012]![UMSATZ_2012_UNITS]*[tbl_Toyota2012]![UPE]*(1-([tbl_Toyota2012]![RABATTSATZ]/100)) AS NettoUmsatz

FROM 
   (tbl_Toyota2012 
LEFT JOIN 
   tbl_NWGW_Key ON (tbl_Toyota2012.PC = tbl_NWGW_Key.ProdCode) AND (tbl_Toyota2012.PFC = tbl_NWGW_Key.PFC)) 
LEFT JOIN 
   tbl_PriceCodes ON (tbl_Toyota2012.MODELL_ID = tbl_PriceCodes.MODEL_ID) AND (tbl_Toyota2012.PC = tbl_PriceCodes.PROD_CODE) AND (tbl_Toyota2012.PFC = tbl_PriceCodes.PROD_FUNC_CODE); 
```

谁能告诉我为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:56:51.313

如果 tbl_Toyota2012 与您要加入的两个表（PriceCodes 和 tbl_NWGW_Key）之间存在超过 1:1 的关系，则会发生这种情况，因为会有更多行。

即，如果 tbl_Toyota2012 中的每个条目在 PriceCodes 或 tbl_NWGW_Key 中有多个条目。

要回答您的意见：

如果您有一个表 'Parent' 连接到表 'Children'，则有两个孩子的父级将返回多行。

`SELECT Parent.Name, Child.Name FROM Parent INNER JOIN Child on Parent.ID = ChildID`

这可能会返回：

`[Parent Name], [Child Name]`

`Bob, Susan`

`Bob, David`

# date - 文本字段中的日期格式

> ID：14771977
> 
> 赞同：2
> 
> 时间：2013-02-08T11:54:04.697
> 
> 标签：date, format, sencha-touch-2, textfield

我有一个文本字段：

```
xtype: "fieldset",
items:[
   {
    xtype: "textfield",
    name: "dateScanned",
    label: "Datum",
    disabled: true,
    tpl: "{dateScanned:date('d/m/Y H:i')}"  // <--- this dosn't work
   }
] 
```

我的商店是：

```
fields: [
    { name: 'dateScanned', type: 'date', dateFormat: 'c' }
] 
```

为什么标记点不起作用？我怎样才能意识到日期是格式化的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T10:15:12.163

```
/*Override to allow textfields to format dates*/
Ext.override(Ext.field.Text, {
    setValue: function (value) {
        if (this.config.dateFormat && value) {
            if (Ext.isDate(value)) {
                value = Ext.Date.format(value, this.config.dateFormat);
            }
            else {
                var d = new Date(value);
                value = Ext.Date.format(d, this.config.dateFormat);
            }
        }
        this.callSuper(arguments);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-30T06:21:04.143

MyApp 你在哪里插入那个覆盖？如果我在 app/field/Text.js 下添加一个新的 Text.js 并将其链接到 require 它不起作用

**解决方案**

```
/*Override to allow textfields to format dates*/
Ext.define('MyApp.field.Text', {
override: 'Ext.field.Text', 
    setValue: function (value) {
        if (this.config.dateFormat && value) {
            if (Ext.isDate(value)) {
                value = Ext.Date.format(value, this.config.dateFormat);
            }
            else {
                var d = new Date(value);
                value = Ext.Date.format(d, this.config.dateFormat);
            }
        }
        this.callSuper(arguments);
    }
}); 
```

您在项目 Project/app/field/Text.js 中创建一个文件夹并将代码放入然后在需要添加

```
requires: [            
        'MyApp.field.Text'
    ], 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T10:06:22.103

我有一个解决方案：

dateFormat 而不是 tpl

```
xtype: "fieldset",
items:[
   {
    xtype: "datepickerfield",
    name: "dateScanned",
    label: "Datum",
    disabled: true,
    dateFormat: "d.m.Y H:i"
    //tpl: "{dateScanned:date('d/m/Y H:i')}"  // <--- this dosn't work
   }
] 
```

我不知道，但我相信要记住设置双问号很重要。

# java - Java 泛型“反向关系”（和 JPA）

> ID：14771979
> 
> 赞同：2
> 
> 时间：2013-02-08T11:54:10.943
> 
> 标签：java, generics, jpa

我有这两个类：

```
@Entity
public abstract class Compound {

    @OneToMany(fetch = FetchType.EAGER, mappedBy="compound",
        targetEntity=Containable.class, cascade = CascadeType.ALL)      
    private Set<Containable> containables = new HashSet<>();
}

@Entity 
public abstract class Containable {     

    @ManyToOne(optional=true, fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    private Compound compound;
} 
```

我想以类型安全的方式实现的是 Compound 的特定实现只接受 Containable 的特定实现，反之亦然。

我怎样才能做到这一点？

编辑：

我已经得到了asenovm的解决方案，只是想仔细检查一下它实际上是正确的。

我的后续问题是，如果我有`class Compound<T extends Containable>`并且`class Containable<T extends Compound>`Containable 和 Compound 是原始类型，还是我弄错了？因为在`class Compound<T extends Containable>`T 实际上是一个 Containable 而不是其他任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:00:30.447

大概是这样的？

```
@Entity
public abstract class Compound<T extends Containable> {

    @OneToMany(fetch = FetchType.EAGER, mappedBy="compound",
        targetEntity=Containable.class, cascade = CascadeType.ALL)      
    private Set<T> containables = new HashSet<T>();

}

@Entity 
public abstract class Containable<T extends Compound> {     

    @ManyToOne(optional=true, fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    private T compound;
} 
```

# iphone - 在后台线程中运行方法后应用程序崩溃

> ID：14771982
> 
> 赞同：0
> 
> 时间：2013-02-08T11:54:12.803
> 
> 标签：iphone, ios, objective-c, xcode, ios5

我正在重新编码我们可以在其中拖动图像的主屏幕。

我有一个 setneedsdisplay 方法可以减慢对象的拖动速度。

但是当我在后台线程中调用相同的方法时，问题得到了解决，但应用程序崩溃了。

此外，如果有任何其他选项来录制视频而无需一次又一次地调用 drawRect: 方法？

```
- (void) drawRect:(CGRect)rect {
    NSDate* start = [NSDate date];
    CGContextRef context = [self createBitmapContextOfSize:self.frame.size];

    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, self.frame.size.height);
    CGContextConcatCTM(context, flipVertical);

    [self.layer renderInContext:context];

    CGImageRef cgImage = CGBitmapContextCreateImage(context);
    UIImage* background = [UIImage imageWithCGImage: cgImage];
    CGImageRelease(cgImage);

    self.currentScreen = background;

    if (_recording) {
        float millisElapsed = [[NSDate date] timeIntervalSinceDate:startedAt] * 1000.0;
        [self writeVideoFrameAtTime:CMTimeMake((int)millisElapsed, 1000)];

    }

    float processingSeconds = [[NSDate date] timeIntervalSinceDate:start];
     delayRemaining = (1.0 / self.frameRate) - processingSeconds;

    //CGContextRelease(context);

    //redraw at the specified framerate
    //[self performSelector:@selector(setNeedsDisplay) withObject:nil afterDelay:delayRemaining > 0.0 ? delayRemaining : 0.01];

    [self performSelectorInBackground:@selector(setNeedsDisplay) withObject:nil];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:57:04.743

可能的原因：

```
[self performSelectorInBackground:@selector(setNeedsDisplay) withObject:nil]; 
```

**您正在从后台线程更新您的 UI**。永远不要那样做，如果你需要对你的 UI 做一些事情，请在主线程中做。

我还在您的代码中发现了一个问题：

你`setNeedsDisplay`从`drawRect:`那里调用它会`drawRect:`再次调用。

（如果您需要更新您的视图调用`[self setNeedsDisplay];`并且永远不要`drawRect:`直接调用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:18:23.370

您永远不应该在后台线程中调用任何更新 UI 的方法。始终从主线程更新 UI。如果在调用 setNeedsDisplay 方法时调用 drawrect 来讨论您的代码，则不需要该行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T11:59:09.253

我想`setNeedsDisplay:`必须在主线程上调用。大多数 UI 方法不适用于后台线程。

如果您将渲染方法放入您的问题中，我们可以看看它们是否可以改进？

`setNeedsDisplayInRect:`如果您只想重绘部分显示，请尝试仅设置？

# java - 非常快速地从 longblob MySQL 中读取图像

> ID：14771988
> 
> 赞同：0
> 
> 时间：2013-02-08T11:54:26.217
> 
> 标签：java, mysql, blob, jslider

正如标题所说，我想在移动 jslider 时非常快速地检索图像（存储在 longblob 中）。我有 360 个案例，并且可以正常工作，但问题在于移动 jslider 时每个案例/图像的滞后/延迟。我用从本地机器检索的图像测试了这个想法，它工作得非常快/干净。我知道问题可能出在互联网连接上，但相信我，我至少有 3-4 MB/s 的下载/上传速度。

一些额外的注释：表引擎：MyISAM 列：longblob，每张图像 ~170-200 kb - .png

```
//calling jslider and setup

jslider1 = new javax.swing.JSlider();  //my jslider
jslider1.setMajorTickSpacing(10);
jslider1.setMaximum(360);
jslider1.setMinorTickSpacing(5);
jslider1.setOrientation(javax.swing.JSlider.VERTICAL);

//and my change event

private void jslider1StateChanged(javax.swing.event.ChangeEvent evt) {   
    int x = jslider1.getValue();
    switch (x) {
           case 1:

                try {
                    String sql = "select imga from test where deg ='" + x + "'";
                    pst = conn.prepareStatement(sql);
                    rs = pst.executeQuery();

                    if (rs.next()) {
                        byte[] imagedata = rs.getBytes("imga");
                        format = new ImageIcon(imagedata);
                        jLabel1.setIcon(format); //where I put my image
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
                break;

           case 2:

                  //[...]  //I have 360 cases

    }
} // close state changed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:01:19.970

为什么还要将图像保存在 longblob 中？你不能把它们存放在罐子里吗？如果您仍想从数据库中检索 longblob，请考虑使用缓存从数据库中加载您的 longblob，并在 Swing 应用程序启动时使用初始化异步线程将其缓存在本地系统中。

# linq - 如何在 LINQ 中使用 whereif

> ID：14771990
> 
> 赞同：4
> 
> 时间：2013-02-08T11:54:38.023
> 
> 标签：linq, if-statement, where-clause

嗨，有人可以帮助我如何最好地在 LINQ 中使用 whereif

```
IQueryable<Employee> empQuery;
     if (empId  == "")
     {
         empQuery = dbContext.Emps
           .Include(x => x.Name)
           .Include(x => x.Code)
           .Where(x => x.Id == empId);
     }
     else
     {
        empQuery = dbContext.Emps
           .Include(x => x.Name)
           .Include(x => x.Code);
     } 
```

我认为我们可以通过使用 whereif 来使这个查询变得非常简单，对吧？有人可以帮助我如何使用 whereif 使这个查询变得简单吗？而不是检查 if (empid == "") ？

是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T11:58:15.740

我假设“whereif”应该是[这种扩展方法](http://www.extensionmethod.net/csharp/ienumerable-t/whereif)。您不能使用它，因为它在 an`IEnumerable<T>`而不是在 a 上运行`IQueryable<T>`。结果将是您将从数据库中请求完整的雇员表并在应用程序的内存中执行过滤。那不是你想要的。但是，您可以使用条件运算符来实现此目的：

```
var empQuery = dbContext.Emps
                        .Include(x => x.Name)
                        .Include(x => x.Code)
                        .Where(x => empId == "" ? true : x.Id == empId); 
```

请注意，这假设您实际上是`if(empId != "")`在示例代码中。如果您不是这个意思，请切换第二个和第三个操作数：

```
.Where(x => empId == "" ? x.Id == empId : true); 
```

话虽如此，您当然可以为`IQueryable<T>`. 它看起来几乎相同，只是`IEnumerable<T>`替换为`IQueryable<T>`并且谓词更改为表达式：

```
public static IQueryable<TSource> WhereIf<TSource>(
    this IQueryable<TSource> source,
    bool condition,
    Expression<Func<TSource, bool>> predicate)
{
    if (condition)
        return source.Where(predicate);
    else
        return source;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T11:58:56.363

如果 empId 不为空，我相信您希望按 empId 进行过滤。简单的 OR 运算符将完成这项工作：

```
IQueryable<Employee> empQuery = dbContext.Emps
           .Include(x => x.Name)
           .Include(x => x.Code)
           .Where(x => empId == "" || x.Id == empId); 
```

您还可以动态构建查询：

```
IQueryable<Employee> empQuery = dbContext.Emps
           .Include(x => x.Name)
           .Include(x => x.Code);

if (empId != "")
    empQuery = empQuery.Where(x => x.Id == empId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:59:06.280

```
.Where(x => x.Id == empId); 
```

如果值为 '""' 没有意义 - 你期望它返回什么？

```
 var query = (from items in dbContext.Emps
              where items.Id == empId
              select new { 
                          Name = items.Name,
                          Code = items.Code
              }).ToList(); 
```

# django - 使用 Django Chartit 显示图表

> ID：14771994
> 
> 赞同：1
> 
> 时间：2013-02-08T11:54:41.797
> 
> 标签：django

```
graphs.html 

{% extends "base.html" %}
<script type = "text/javascript" src = "{{ STATIC_URL }}js/highcharts.js"></script>
<script type = "text/javascript" src = "{{ STATIC_URL }}js/jquery-1.9.1.min.js">                                                                                                                                                 </script>
<body >
{% block menu %}
{{block.super}}
{% endblock menu %}

{% block content %}
 {{weatherchart}}

<!-- code to include the highcharts and jQuery libraries goes here -->
<!-- load_charts filter takes a comma-separated list of id's where -->
<!-- the charts need to be rendered to                             -->
{% load chartit %}
{{ weatherchart|load_charts:"container" }
 <div id='container'>  </div>
  {% endblock content %}
</body>

views.py

def plot_graph(request):
month_number=[]
months=KEBReading.objects.filter().values("datetime_reading")
print months
for obj in months:
    month_number=obj["datetime_reading"].day
    print month_number
#Step 1: Create a DataPool with the data we want to retrieve.
weatherdata = \
    DataPool(
       series=
        [{'options': {
           'source': KEBReading.objects.filter().values("id","truepower_consumed","voltage_reading")},
          'terms': [
            'id',
            'truepower_consumed','voltage_reading'
           ]}])

#Step 2: Create the Chart object
cht = Chart(
        datasource = weatherdata,
        series_options =
          [{'options':{
              'type': 'line',
              'stacking': False},
            'terms':{
              'id': [
                'truepower_consumed','voltage_reading']

              }}],

        chart_options =
          {'title': {
               'text': 'Graph For Power Management'},
           'xAxis': {
                'title':{'text': 'month_number'}}})
print "weather chart"
print cht

#Step 3: Send the chart object to the template.
return render_to_response('graph.html',{'weatherchart': cht},context_instance=RequestContext(request)) 
```

我在使用 Django-Chartit 时遇到问题。我想使用数据库中的数据制作图表。我已经像上面那样做了。但图表没有显示出来。我做对了吗？帮助表示赞赏。提前致谢。模板中是否缺少其他内容？（graphs.html）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-21T06:08:28.003

尝试

```
{% extends "base.html" %}
{% load chartit %}
{% block scripts %}
{{ weatherchart|load_charts:"container" }}
{% endblock %} 
```

其中 block scripts 是所有 js 文件的标签。确保在 highcharts 之前加载 jquery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T02:37:23.597

我遇到了同样的问题，偶然发现了没有在任何地方记录的解决方案，为了让它工作，我必须像这样将 load_charts 调用放在“容器”DIV 中......

```
<div id="container">{{ chart|load_charts:"container" }}</div> 
```

在您的 HTML 中为 DIV ID 使用双引号而不是像上面记录的那样使用单引号也是一种很好的做法。

# ruby-on-rails - 如何清除 Heroku 注入的 gem

> ID：14771996
> 
> 赞同：0
> 
> 时间：2013-02-08T11:54:46.090
> 
> 标签：ruby-on-rails, heroku, rubygems

在部署期间[Heroku 注入了一些插件](https://stackoverflow.com/questions/9027403/rails-2-3-style-plugins-and-deprecation-warnings-running-task-in-heroku)

```
-----> Rails plugin injection
       Injecting rails_log_stdout
       Injecting rails3_serve_static_assets 
```

..正在被弃用

> 弃用警告：您在供应商/插件中有 Rails 2.3 风格的插件！Rails 4.0 将删除对这些插件的支持。将它们移出并将它们捆绑到您的 Gemfile 中，或者将它们作为 lib/myplugin/* 折叠到您的应用程序中

我前段时间一直在使用heroku（并且已经注入了gem），但是转移到了VPS解决方案，所以我不再使用Heroku了。如何从我的应用程序中清除注入的插件？最后，我想摆脱这些弃用警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:51:05.967

gem 是在运行时注入的——如果你使用 Heroku，你无法避免它们，除非你制作了一个[自定义的 buildpack](https://devcenter.heroku.com/articles/buildpacks#creating-a-buildpack)。

如果您不再使用 Heroku，那么您是如何/在哪里看到此消息的？

# c# - 如何找到网络摄像头

> ID：14771997
> 
> 赞同：0
> 
> 时间：2013-02-08T11:54:46.113
> 
> 标签：c#, .net, video, video-capture, expression-encoder-sdk

有一个很好的[解决方案如何通过 MS Expression Encoder SDK 使用 WebCam](http://www.codeproject.com/Articles/285964/WPF-Webcam-Control)。

所以这段代码

```
 Dim vidDevices = EncoderDevices.FindDevices(EncoderDeviceType.Video) 
```

返回已安装视频设备的列表。

我的问题是：默认情况下如何将网络摄像头作为设备。是否可以仅返回 /filter 仅首先安装的网络摄像头而不再返回？

我的意思是我不在乎安装了多少视频设备，我只需要一个网络摄像头就可以了。

是否可以以某种方式使其自动化，或者我们必须手动选择设备？