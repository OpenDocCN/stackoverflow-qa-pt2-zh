# StackOverflow 问答 13027000-13027999

# android - 在特定时间调用 android 手机配置文件模式

> ID：13027001
> 
> 赞同：6
> 
> 时间：2012-10-23T09:08:54.733
> 
> 标签：android, broadcastreceiver, profile, broadcast

如何在特定时间自动更改**android 手机配置文件模式。**

**我想开发一个更改设置时间表的应用程序，并在特定的时间表时间，配置文件模式自动更改为所需模式。**

*我该怎么做*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T06:46:10.217

使用 setRingerMode() 方法。以下代码将铃声设置为静音模式：

```
AudioManager audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
audioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT); 
```

以下是此函数的可接受值：

RINGER_MODE_NORMAL、RINGER_MODE_SILENT 或 RINGER_MODE_VIBRATE。还要在清单文件中添加以下权限：

android.permission.MODIFY_AUDIO_SETTINGS

[警报管理器](http://developer.android.com/reference/android/app/AlarmManager.html)可用于在特定时间执行代码..

# ubuntu - bluecove - 向以前未配对的设备发送消息

> ID：13027003
> 
> 赞同：1
> 
> 时间：2012-10-23T09:08:55.360
> 
> 标签：ubuntu, bluetooth, message, pairing, bluecove

我必须将消息从我的（Ubuntu-12.04，64 位）笔记本电脑发送到蓝牙电话，其友好名称作为参数提供。此手机之前可能已与笔记本电脑连接/配对，也可能未配对。我正在使用此处所示的 Java 代码将消息从我的笔记本电脑发送到蓝牙设备。

```
package com.test.bt;

import java.io.IOException;
import java.io.UnsupportedEncodingException;

import javax.bluetooth.BluetoothStateException;
import javax.bluetooth.DiscoveryAgent;
import javax.bluetooth.LocalDevice;
import javax.bluetooth.RemoteDevice;
import javax.bluetooth.UUID;

public class BluetoothTest {

    /**
     * @param args
     * @throws InterruptedException
     * @throws IOException
     * @throws UnsupportedEncodingException
     */
    public static void main(String[] args) throws InterruptedException,
            BluetoothStateException, UnsupportedEncodingException, IOException {
        BluetoothDiscoveryListener bdl = new BluetoothDiscoveryListener();

        LocalDevice ld = LocalDevice.getLocalDevice();
        DiscoveryAgent da = ld.getDiscoveryAgent();
        da.startInquiry(DiscoveryAgent.GIAC, bdl);
        bdl.doLock();

        UUID[] uuidSet = new UUID[1];
        uuidSet[0] = new UUID(0x1105); // OBEX Object Push service
        int[] attrSet = new int[] { 0x0100 }; // Service name

        boolean deviceFound = false;
        for (RemoteDevice rd : bdl.remoteDevices) {
            if (rd.getFriendlyName(false).matches(args[0])) {
                deviceFound = true;
                da.searchServices(attrSet, uuidSet, rd, bdl);
                bdl.doLock();

                bdl.sendMessage("Bluetooth.txt", "text", args[1]);
            }
        }
        if (!deviceFound) {
            System.err.println("Requested device was not found.");
        }
    }
} 
```

它仅在设备之前已配对时才有效。否则，它会失败，如下所示。实际上，如果 PIN 码算术并且我说是，我会在手机上收到提示。然后，下面的这个失败。

```
BlueCove version 2.1.0 on bluez
Device Phone found at address 101DC0F72211
    MAJOR device class 512
    MINOR device class 4
    MAJOR service classes 5898240
Inquiry completed successfully.
Following services are found ... 
     Service name : OPP
      URL is : btgoep://101DC0F72211:3;authenticate=false;encrypt=false;master=false
Services search completed successfully.
Connecting to btgoep://101DC0F72211:3;authenticate=false;encrypt=false;master=false
Exception in thread "main" java.io.IOException: Failed to connect. [115] Operation now in progress
    at com.intel.bluetooth.BluetoothStackBlueZ.connectionRfOpenClientConnectionImpl(Native Method)
    at com.intel.bluetooth.BluetoothStackBlueZ.connectionRfOpenClientConnection(BluetoothStackBlueZ.java:560)
    at com.intel.bluetooth.BluetoothRFCommClientConnection.<init>(BluetoothRFCommClientConnection.java:37)
    at com.intel.bluetooth.MicroeditionConnector.openImpl(MicroeditionConnector.java:387)
    at com.intel.bluetooth.MicroeditionConnector.open(MicroeditionConnector.java:162)
    at javax.microedition.io.Connector.open(Connector.java:83)
    at com.test.bt.BluetoothDiscoveryListener.sendMessage(BluetoothDiscoveryListener.java:106)
    at com.test.bt.BluetoothTest.main(BluetoothTest.java:52)
BlueCove stack shutdown completed 
```

我尝试了各种身份验证和加密选项；但是，没有运气。

即使设备已经配对，我也注意到了另一种我不理解的行为。如果设备配对成功，我想我可以使用该`retrieveDevices(DiscoveryAgent.CACHED)`方法或该`retrieveDevices(DiscoveryAgent.PREKNOWN)`方法。两者都返回 null。

那么，如何向之前未与笔记本电脑配对的手机发送消息？

# wcf - WCF 服务中的单元测试、IoC、DI 和模拟对象

> ID：13027007
> 
> 赞同：1
> 
> 时间：2012-10-23T09:09:01.083
> 
> 标签：wcf, mocking, tdd, ninject, moq

我有一个使用另一个 WCF 服务 (EXTWCF) 的 WCF 服务 (INTWCF)。EXTWCF 公开了 5 个操作，将托管在外部应用服务器上（在 DMZ 中），并实现消息和传输级别的安全性。

INTWCF 将托管在内部应用服务器上，不实施任何安全性，托管两个单独的服务，大约有 30 个操作 - 其中一些由 EXTWCF 上的操作调用（以及各种其他域级应用程序），具体取决于各种参数传入（EXTWCF 包含简单的逻辑来确定应该调用 INTWCF 上的哪些操作）。

EXTWCF 使用 IoC 和 DI 实现 INTWCF。

使用 TDD，我想为在 EXTWCF 上公开的操作编写我的初始*单元测试。*因此，我想使用 Moq 模拟 INTWCF。我本以为我应该模拟并将 INTWCF 注入到单元测试项目中，但我已经读到（在很多地方）由于它们引入了额外的测试依赖项，在单元测试期间不应使用 IoC 和 DI .

我收到的信息不正确，还是有其他方法可以解决这个问题？嘲笑适合这种情况吗？好像我的单元测试将访问 EXTWCF 上的操作，他们不会知道 INTWCF。在我看来，这似乎是 DI 的完美案例？

我将 Ninject 用于 IoC 和 DI；如果 DI 是答案，Ninject 是否提供用于单元测试的引导程序/插件？我不熟悉任何，在他们的网页上看不到任何东西？

# scala - 如何在 Scala 中对地图中的地图进行排序

> ID：13027010
> 
> 赞同：1
> 
> 时间：2012-10-23T09:09:02.740
> 
> 标签：scala

我已经定义了一个`Map[Int, Map[String, Int]]`.

我知道如何使用 ListMap 对外部地图进行排序。例如：

实际上所有的地图都是可变的。

```
var myMap: Map[ Int, scala.collection.mutable.Map[String, Int] ] = Map()
....
// add some items to myMap
....
var sortedMap = scala.collection.immutable.ListMap( myMap.toList.sortBy{_._1}:_* ) 
```

但是如何根据String对内部Map进行排序？

以下似乎是错误的：

```
myMap foreach {
    case ( num, map ) ⇒ 
        map = scala.collection.immutable.ListMap( map.toList.sortBy{_._1}:_* ) 
} 
```

编译器说`map: reassignment to val`，但我已经将内部映射定义为`mutable.Map`. 我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:19:20.420

您可以使用将函数应用于每个值`mapValues`，然后将相同的排序函数应用于第二个地图。

```
import scala.collection.immutable.ListMap

val myMap = Map[ Int, scala.collection.mutable.Map[String, Int] ] = Map()
....
// add some items to myMap
....
val outerSortedMap = ListMap(myMap.toList.sortBy{_._1}:_* )
val innerSortedMap = myMap.mapValues(innerMap => 
  ListMap(innerMap.toList.sortBy{_._1}:_* )
) 
```

**对内部和外部 Map 进行排序**

为此，您只需要先对外部 Map 进行排序（这样就可以得到`outerSortedMap`上面的解释），然后对`outerSortedMap`.

```
val innerOuterSortedMap = outerSortedMap.mapValues(innerMap =>
  ListMap(innerMap.toList.sortBy{_._1}:_*)
) 
```

**关于你的尝试**

foreach 方法具有以下签名：`foreach[U](f: ((A, B)) ⇒ U): Unit`，因此它是一种副作用方法。您想要的是将函数应用于您的所有值，`map`然后用函数的结果替换这些值。这基本上是一个`map`函数（是的`map`，代表两个完全不同的东西），当你想映射值时，函数就`mapValues`存在了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:53:38.990

如果您`sortMap`为自己定义一个辅助函数，那就很干净了：

```
def sortMap[K: Ordering, V](m: scala.collection.Map[K, V]) = 
  ListMap(m.toList.sortBy { _._1 }: _*)

val doubleSortedMap = sortMap(myMap.mapValues(sortMap(_))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:31:06.540

您也可以考虑使用[`TreeMap`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.TreeMap). 这样您以后就不需要对地图进行排序了。

请注意，没有 mutable `TreeMap`，但这不是一个大问题（甚至可能是故意的）。拥有一个可变的`TreeMap`并没有带来相当大的好处，因为向平衡树添加一个元素需要*O(log n)*，无论我们认为结构是可变的还是不可变的。

这也意味着 using`TreeMap`与拥有其他类型的集合并稍后对其进行排序具有相同的渐近复杂性。将*n 个*元素添加到 a`TreeMap`将需要*n O(log n) = O(n log n)*，这与对*n 个*元素的列表进行排序相同。

另请注意， 的构造函数`TreeMap`有一个隐式参数`ordering: Ordering[A]`。通过在创建地图时显式设置它，您可以插入自己的排序功能，如果您想使用一些与默认不同的标准进行排序。

# actionscript-3 - 构建 adobe air 使用 YouTube API v2.0

> ID：13027012
> 
> 赞同：0
> 
> 时间：2012-10-23T09:09:06.963
> 
> 标签：actionscript-3, air, youtube-api

我正在尝试使用 YouTube API v2.0 让用户验证到他们的 YouTube 帐户并能够从那里上传视频......但我想在 AS3 中将此应用程序作为 adobe air 应用程序。

我搜索了 api，但找不到任何证据证明我可以用 AS3 做到这一点？想在这里打个电话问一下是否有可能？特别是能够通过 adobe air 桌面应用程序上传视频？

如果可能的话，是否有任何链接可以让我更快地开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:39:05.840

[这](http://code.google.com/p/air-youtube-uploader/)似乎是一个用 as3 编写的谷歌代码项目，支持在桌面空中应用程序中上传视频（参见示例 AirYouTubeUploaderSampleApp）。

# javascript - 单击提交按钮后如何将值从frame1.jsp中的文本框传递到frame2.jsp

> ID：13027013
> 
> 赞同：0
> 
> 时间：2012-10-23T09:09:08.990
> 
> 标签：javascript, html, jsp, frameset

我有一个 index.jsp，调用了 frame1.jsp，我需要在单击提交按钮后将文本框中的值从 frame1.jsp 传递到 frame2.jsp 以建立数据库连接。我这样做时遇到了错误。请帮助。

***索引.jsp***

```
<frameset rows="18%,*">
          <frame src="frame1.jsp" name="frame1" scrolling="no">  
            </frameset> 
```

***框架集1.jsp***

```
 <td width="15%"><b>
                    <font color="#FFFFFF" size="3">ADSL Number

                            <input name="ADSLNO" type="text" />

                     <input name="Submit" type="submit" value="Confirm" />

                    </font></b></td>
                    </tr>
            </table>
     </form>

 <frameset cols="100%,*">
                    <frame src="frame2.jsp" name="frame2">

            <noframes><body>No frame! </body></noframes>
            </frameset> 
```

***框架集2.jsp***

```
</body>

              <%

                String ADSL = request.getParameter("ADSLNO");
                if(ADSL!= null)
                {
                String connectionURL = "jdbc:mysql://10.152.31.82/poller";
                Connection connection = null;
                String buffer = "<div class='divTable'>";
                Class.forName("com.mysql.jdbc.Driver").newInstance();
                connection = DriverManager.getConnection(connectionURL, "dipadm", "dipadm123");
                Statement stmt = connection.createStatement();
                ResultSet rs = stmt.executeQuery("select DT, PROFILE, DS_BW, SNR_DW, AT_DW, UCE, MODEL, CRC, RETRAIN from scanProfileData where ADSLNO='" + ADSL + "' order by DT DESC;");
                if (rs != null) {
                buffer="<div class='divRowh'><div class='divCellDT'>DATE/TIME</div>" ;
                buffer=buffer+"<div class='divCellPROFILE'>PROFILE</div>";
                buffer=buffer+"<div class='divCellBANDWIDTH'>BANDWIDTH</div>";
                buffer=buffer+"<div class='divCellSNR'>SNR</div>";
                buffer=buffer+"<div class='divCellATTENUATION'>ATTENUATION</div>";
                buffer=buffer+"<div class='divCellCRC'>CRC</div>";
                buffer=buffer+"<div class='divCellUCE'>UCE</div>";
                buffer=buffer+"<div class='divCellMODEL'>MODEL</div>";
                buffer=buffer+"<div class='divCellRETRAIN'>RETRAIN</div></div>";

                while(rs.next()){
                buffer =buffer+"<div class='divRow'>"
                              +"<div class='divCellDTr'>"+rs.getString("DT")+"</div>"
                              +"<div class='divCellPROFILEr'>"+rs.getString("PROFILE")+"</div>"
                              +"<div class='divCellBANDWIDTHr'>"+rs.getString("DS_BW")+"</div>"
                              +"<div class='divCellSNRr'>"+rs.getString("SNR_DW")+"</div>"
                              +"<div class='divCellATTENUATIONr'>"+rs.getString("AT_DW")+"</div>"
                              +"<div class='divCellCRCr'>"+rs.getString("CRC")+"</div>"
                              +"<div class='divCellUCEr'>"+rs.getString("UCE")+"</div>"
                              +"<div class='divCellMODELr'>"+rs.getString("MODEL")+"</div>"
                              +"<div class='divCellRETRAINr'>"+rs.getString("RETRAIN")+"</div></div>";

                }
                }
                buffer=buffer+"</div>";
                response.getWriter().println(buffer);
                }
            %> 
```

# c++ - 解密 MSDN C++ API 调用和结构以及从 VB6 调用

> ID：13027014
> 
> 赞同：1
> 
> 时间：2012-10-23T09:09:10.893
> 
> 标签：c++, api, vb6, sip

我正在尝试从 VB6 应用程序调用 TAPI32.dll 上的函数。我不知道如何在 VB6 中指定信息并调用它。所以，这个问题是询问从MSDN解密C ++相关信息的帮助，并从VB6调用它，但我在下面详细说明了我们的具体用法，希望它有所帮助。

我们的应用程序使用来自一家名为 Dialogic 的公司的 SIP（​​会话初始化协议）堆栈，它允许我们处理来电、读取 DDI 号码（呼叫者拨打的号码）和他们的呼叫者 ID（呼叫者正在呼叫的号码from)，并根据 DDI 和 Caller ID 处理更新数据库中各种记录的信息。我们在指向同一台计算机的各种 VOIP 线路/通道上有多个 DDI。这一切都很好。

在某些情况下，当警卫或看护人没有访问某个位置时，我们会向主管发出 WAV 文件，并打电话记录他们的存在。因此我们使用 DDI 和 Caller ID 信息。

由于我们有多个 DDI 指向一台机器，我们希望能够在拨打电话时选择其中一个号码（我相信它被呼叫的主叫方组号码），以便主管接到他的手机的呼叫时，他会看到与他的员工在一个站点注册他们的存在所拨打的号码相同。

我们认为该信息是在对 TAPI32.dll 的 makelinecall 调用中设置的

我们有这个声明......

```
Declare Function lineMakeCall Lib "TAPI32.DLL" Alias "lineMakeCallA" (ByVal hLine As Long, ByRef lphCall As Long, ByVal lpszDestAddress As String, ByVal dwCountryCode As Long, ByRef lpCallParams As Any) As Long 
```

我的理解是，通过在 lpCallParams 结构上设置一些东西，我们应该能够指定 CPGN。我只是不知道该怎么做，因为我倾向于只在我的应用程序中提供可以从 COM 库轻松访问的功能，以及 VB6 可以轻松访问的 DLL。

此 MSDN 页面上的链接是 lineMakeCall API 函数的定义 - [http://msdn.microsoft.com/en-us/library/windows/desktop/ms735988(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms735988(v=vs.85).aspx)

显示此 C++ 结构定义：-

```
LONG WINAPI lineMakeCall(
  HLINE hLine,
  LPHCALL lphCall,
  LPCSTR lpszDestAddress,
  DWORD dwCountryCode,
  LPLINECALLPARAMS const lpCallParams
); 
```

我相信最后一项 LPLINECALLPARAMS 是我们需要指定信息的地方。

此 MSDN 页面上的链接 - [http://msdn.microsoft.com/en-us/library/windows/desktop/ms735534(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms735534(v=vs.85).aspx)给出了这个 C++ 结构定义：-

```
typedef struct linecallparams_tag {
  DWORD          dwTotalSize;
  DWORD          dwBearerMode;
  DWORD          dwMinRate;
  DWORD          dwMaxRate;
  DWORD          dwMediaMode;
  DWORD          dwCallParamFlags;
  DWORD          dwAddressMode;
  DWORD          dwAddressID;
  LINEDIALPARAMS DialParams;
  DWORD          dwOrigAddressSize;
  DWORD          dwOrigAddressOffset;
  DWORD          dwDisplayableAddressSize;
  DWORD          dwDisplayableAddressOffset;
  DWORD          dwCalledPartySize;
  DWORD          dwCalledPartyOffset;
  DWORD          dwCommentSize;
  DWORD          dwCommentOffset;
  DWORD          dwUserUserInfoSize;
  DWORD          dwUserUserInfoOffset;
  DWORD          dwHighLevelCompSize;
  DWORD          dwHighLevelCompOffset;
  DWORD          dwLowLevelCompSize;
  DWORD          dwLowLevelCompOffset;
  DWORD          dwDevSpecificSize;
  DWORD          dwDevSpecificOffset;
  DWORD          dwPredictiveAutoTransferStates;
  DWORD          dwTargetAddressSize;
  DWORD          dwTargetAddressOffset;
  DWORD          dwSendingFlowspecSize;
  DWORD          dwSendingFlowspecOffset;
  DWORD          dwReceivingFlowspecSize;
  DWORD          dwReceivingFlowspecOffset;
  DWORD          dwDeviceClassSize;
  DWORD          dwDeviceClassOffset;
  DWORD          dwDeviceConfigSize;
  DWORD          dwDeviceConfigOffset;
  DWORD          dwCallDataSize;
  DWORD          dwCallDataOffset;
  DWORD          dwNoAnswerTimeout;
  DWORD          dwCallingPartyIDSize;
  DWORD          dwCallingPartyIDOffset;
  DWORD          dwAddressType;
} LINECALLPARAMS, *LPLINECALLPARAMS; 
```

有趣的参数是 dwCallingPartyIDSize 和 dwCallingPartyIDOffset。我不知道如何指定要传递给他们的信息

我们已经在 VB6 中设置了这些类型：-

```
Type LINECALLINFO
  lngTotalSize As Long
  lngNeededSize As Long
  lngUsedSize As Long
  lngLineHandle As Long
  lngLineDeviceID As Long
  lngAddressID As Long
  lngBearerMode As Long
  lngRate As Long
  lngMediaMode As Long
  lngAppSpecific As Long
  lngCallID As Long
  lngRelatedCallID As Long
  lngCallParamFlags As Long
  lngCallStates As Long
  lngMonitorDigitModes As Long
  lngMonitorMediaModes As Long
  DialParams As LINEDIALPARAMS
  lngOrigin As Long
  lngReason As Long
  lngCompletionID As Long
  lmgNumOwners As Long
  lngNumMonitors As Long
  lngCountryCode As Long
  lngTrunk As Long
  lngCallerIDFlags As Long
  lngCallerIDSize As Long
  lngCallerIDOffset As Long
  lngCallerIDNameSize As Long
  lngCallerIDNameOffset As Long
  lngCalledIDFlags As Long
  lngCalledIDSize As Long
  lngCalledIDOffset As Long
  lngCalledIDNameSize As Long
  lngCalledIDNameOffset As Long
  lngConnectedIDFlags As Long
  lngConnectedIDSize As Long
  lngConnectedIDOffset As Long
  lngConnectedIDNameSize As Long
  lngConnectedIDNameOffset As Long
  lngRedirectionIDFlags As Long
  lngRedirectionIDSize As Long
  lngRedirectionIDOffset As Long
  lngRedirectionIDNameSize As Long
  lngRedirectionIDNameOffset As Long
  lngRedirectingIDFlags As Long
  lngRedirectingIDSize As Long
  lngRedirectingIDOffset As Long
  lngRedirectingIDNameSize As Long
  lngRedirectingIDNameOffset As Long
  lngAppNameSize As Long
  lngAppNameOffset As Long
  lngDisplayableAddressSize As Long
  lngDisplayableAddressOffset As Long
  lngCalledPartySize As Long
  lngCalledPartyOffset As Long
  lngCommentSize As Long
  lngCommentOffset As Long
  lngDisplaySize As Long
  lngDisplayOffset As Long
  lngUserUserInfoSize As Long
  lngUserUserInfoOffset As Long
  lngHighLevelCompSize As Long
  lngHighLevelCompOffset As Long
  lngLowLevelCompSize As Long
  lngLowLevelCompOffset As Long
  lngChargingInfoSize As Long
  lngChargingInfoOffset As Long
  lngTerminalModesSize As Long
  lngTerminalModesOffset As Long
  lngDevSpecificSize As Long
  lngDevSpecificOffset As Long
  ' Extra Data buffer
  vbByteBuffer(0 To 2048) As Byte
End Type 
```

和

```
Public Type LINECALLPARAMS
    lngTotalSize As Long
    lngBearerMode As Long
    lngMinRate As Long
    lngMaxRate As Long
    lngMediaMode As Long
    lngCallParamFlags As Long
    lngAddressMode As Long
    lngAddressID As Long
    DialParams As LINEDIALPARAMS
    lngOrigAddressSize As Long
    lngOrigAddressOffset As Long
    lngDisplayableAddressSize As Long
    lngDisplayableAddressOffset As Long
    lngCalledPartySize As Long
    lngCalledPartyOffset As Long
    lngCommentSize As Long
    lngCommentOffset As Long
    lngUserUserInfoSize As Long
    lngUserUserInfoOffset As Long
    lngHighLevelCompSize As Long
    lngHighLevelCompOffset As Long
    lngLowLevelCompSize As Long
    lngLowLevelCompOffset As Long
    lngDevSpecificSize As Long
    lngDevSpecificOffset As Long
'#if (TAPI_CURRENT_VERSION >= 0x00020000)
    lngPredictiveAutoTransferStates As Long
    lngTargetAddressSize As Long
    lngTargetAddressOffset As Long
    lngSendingFlowspecSize As Long
    lngSendingFlowspecOffset As Long
    lngReceivingFlowspecSize As Long
    lngReceivingFlowspecOffset As Long
    lngDeviceClassSize As Long
    lngDeviceClassOffset As Long
    lngDeviceConfigSize As Long
    lngDeviceConfigOffset As Long
    lngCallDataSize As Long
    lngCallDataOffset As Long
    lngNoAnswerTimeout As Long
    lngCallingPartyIDSize As Long
    lngCallingPartyIDOffset As Long
'#End If
    vbByteBuffer(0 To 2047) As Byte
End Type 
```

在 LINECALLPARAMS 的末尾，我现在在可变长度数据的类型声明末尾有一个缓冲区。

```
vbByteBuffer(0 To 2047) As Byte 
```

然后我像这样设置大小参数：-

```
typCallParams.lngTotalSize = Len(typCallParams) 
```

并设置我想在结构的可变数据部分中指定的两个电话号码的大小。

```
typCallParams.lngCallingPartyIDSize = 12
typCallParams.lngCalledPartySize = 12 
```

一种是我要拨打的电话号码，一种是为我正在使用的线路设置来电显示信息。

然后我得到整个结构在内存中的地址，并从缓冲区部分的内存位置中减去它。给我一个从结构开始的偏移量。

```
Dim StartOfType As Long
Dim StartOfBufferOffset As Long
StartOfType = VarPtr(typCallParams) ' address
StartOfBufferOffset = VarPtr(typCallParams.vbByteBuffer(0)) - VarPtr(typCallParams) 
```

然后我尝试在缓冲区中设置一些数据。

```
'calling
typCallParams.vbByteBuffer(0) = CByte("0")
typCallParams.vbByteBuffer(1) = CByte("1")
typCallParams.vbByteBuffer(2) = CByte("2")
typCallParams.vbByteBuffer(3) = CByte("3")
typCallParams.vbByteBuffer(4) = CByte("4")
typCallParams.vbByteBuffer(5) = CByte("1")
typCallParams.vbByteBuffer(6) = CByte("2")
typCallParams.vbByteBuffer(7) = CByte("3")
typCallParams.vbByteBuffer(8) = CByte("4")
typCallParams.vbByteBuffer(9) = CByte("5")
typCallParams.vbByteBuffer(10) = CByte("6")
typCallParams.vbByteBuffer(11) = CByte(0)

'called
typCallParams.vbByteBuffer(112) = CByte("0")
typCallParams.vbByteBuffer(113) = CByte("1")
typCallParams.vbByteBuffer(114) = CByte("5")
typCallParams.vbByteBuffer(115) = CByte("4")
typCallParams.vbByteBuffer(116) = CByte("3")
typCallParams.vbByteBuffer(117) = CByte("6")
typCallParams.vbByteBuffer(118) = CByte("5")
typCallParams.vbByteBuffer(119) = CByte("4")
typCallParams.vbByteBuffer(120) = CByte("3")
typCallParams.vbByteBuffer(121) = CByte("2")
typCallParams.vbByteBuffer(122) = CByte("1")
typCallParams.vbByteBuffer(123) = CByte(0) 
```

然后指出偏移量：-

```
typCallParams.lngCallingPartyIDOffset = StartOfBufferOffset
typCallParams.lngCalledPartyOffset = StartOfBufferOffset + 112 
```

请注意，我故意在这两位信息之间留出一大块空间，并将下一个偏移量从 100 字节开始。

然后我进行 API 调用。

```
lngResult = lineMakeCall(mlngLineHandle, mlngCallHandle, "", 0, typCallParams) 
```

它并不完全在那里......但我不认为我们离得太远了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:36:06.867

`TAPI`您上面描述的 2 是从 C/C++ 以外的语言中使用的最难的设计和内存管理之一。尝试使用基于 COM 技术实现的[TAPI 3.x](http://msdn.microsoft.com/en-us/library/windows/desktop/ms734215%28v=vs.85%29.aspx)`VB6` ，这样您就可以在.

# javascript - slimScroll.js 不适用于 Firefox

> ID：13027016
> 
> 赞同：0
> 
> 时间：2012-10-23T09:09:15.390
> 
> 标签：javascript, jquery, jquery-ui, firefox, slimscroll

我正在研究 slimScroll.js 我应用在我的一个 div 上，例如

```
 <script type="text/javascript" src="./scripts/slimScroll.js"></script>

 $(".hlDiv").slimScroll({
     height : '295px',
     width : '100%',
     }); 
```

它适用于 CHROME 和 OPERA BROWSER，但不适用于 Mozilla Firefox 16.0.1 版。

还包括必要的 jquery-ui 文件。但仍然卡住了。

浏览了各种网站，但没有找到任何答案。

任何线索或参考都会对我有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T03:05:37.163

删除`,`行中的：

```
width : '100%', 
```

您的 Firefox 版本在语法上有点严格。

# javascript - select() 和 selectAll() 有什么区别

> ID：13027017
> 
> 赞同：13
> 
> 时间：2012-10-23T09:09:21.207
> 
> 标签：javascript, d3.js

select() 和 selectAll() 有什么区别？

为什么第二个不附加 ap 标签？

```
divSelection = d3.select('#div-vis').selectAll('p').data(['dummy']).enter().append('p');

divSelection = d3.select('#div-vis').select('p').data(['dummy']).enter().append('p'); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-23T15:15:58.950

从[嵌套选择](http://bost.ocks.org/mike/)：

> 嵌套选择有另一个微妙但关键的副作用：它为每个组设置父节点。父节点是选择的隐藏属性，用于确定在何处追加输入元素。… select 和 selectAll 之间有一个重要的区别：select 保留现有的分组，而 selectAll 创建一个新的分组。因此，调用 select 会保留原始选择的数据、索引甚至父节点！

当您说`d3.select("#vis")`时，选择的父节点仍然是文档元素。然后，当您说`selectAll("p")`时，您将父节点定义为先前选择的 #vis 元素，因为 selectAll 是一个嵌套运算符。这只发生在 selectAll 而不是 select 上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-16T22:00:59.867

在此 HTML 文档中：

```
<html>
<body>

  <div id="viz">
  </div>

<body>
</html> 
```

应用此代码：

```
var viz = d3.select('#viz').selectAll('p').data([0])
  .enter().append('p'); 
```

给出这个结果：

```
<html>
<body>

  <div id="viz">
    <p></p>
  </div>

<body>
</html> 
```

这是因为`selectAll()`根据前面的`select`方法定义了一个父元素，即`select('#viz')`. 以这种方式：

```
console.log(viz[0].parentNode) // <div id="viz"> 
```

而如果您在第一个 HTML 文档中执行以下代码：

```
var viz = d3.select('#viz').select('p').data([0])
  .enter().append('p'); 
```

它给你这个结果：

```
<html>
<body>

  <div id="viz">
  </div>

<body>
<p></p> <!-- your p element is appended to <html> as its parent element
</html> 
```

由于`selectAll()`需要 a 来重新定义您的选择的父元素，因此您的选择的父元素仍然`<html>`是默认设置的。如果我们记录选择的父节点：

```
console.log(viz[0].parentNode) // <html> 
```

请记住，[选择是元素数组的数组（组）](http://bost.ocks.org/mike/selection/#group)。写作`viz[0]`获取第一组元素，而不是您选择的第一个元素。要获得第一个元素，您应该编写：

```
console.log(viz[0][0].parentNode) 
```

这将为您提供 DOM 树中该特定元素的父元素，而不是在您的 d3 选择组中。

# eclipse - 使用 Eclipse 调试嵌入式系统 - 如何打印到日志文件？

> ID：13027018
> 
> 赞同：2
> 
> 时间：2012-10-23T09:09:24.373
> 
> 标签：eclipse, embedded, jtag

我目前正在开发一个关于 STM32F4 的项目，并且正在使用 Eclipse。我的程序有一些问题——它似乎有一个随机的行为——有时它工作正常，有时它有一些错误。有时当我尝试使用断点进行调试时，我得到了漂亮的 HardFault Handler，它真的让我的大脑一团糟。

抱歉，有点离题，只是想让您知道为什么我决定在程序的某些关键时刻使用打印到日志文件，以便我可以查看问题发生在哪些状态和哪些功能中。我正在通过 Eclipse (gdb) 的 JTAG 接口进行调试，我需要知道 Eclipse 中是否集成了一种简单的方法，可以帮助我在程序中使用类似 fprintf 的函数来写入磁盘上的文件。

如果没有，还有其他解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:43:30.200

我不喜欢将调试输出日志连接到 Jtag 通信端口，因为开发后日志将不可用。

我通常构建一个 SystemLog 库，它可以通过任何可用的介质（UART、USB、以太网或 SDCARD）发送日志消息。这就是我建议你做的事情。它将帮助您完成开发，并在现场发生任何故障时为支持团队提供帮助。

如果您的项目中有 stdlib，您应该使用 snprintf 系列函数来构建您的 SystemLog。

此外，您可以通过在 makefile 上调用串行控制台通信器（如果使用 UART）将日志输出集成到 eclipse 控制台，在这种情况下，您的 makefile 也必须刷新目标。

# ios - icarousel 未显示

> ID：13027021
> 
> 赞同：1
> 
> 时间：2012-10-23T09:09:39.100
> 
> 标签：ios, sdk, icarousel

我将 iCarousel 添加到我的应用程序中，但它不起作用。在我的另一个应用程序中它可以工作。我在 InterfaceBuilder 中链接了视图、委托和数据源

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "TermineView.h" 
#import "iCarousel.h"

@interface ViewController : UIViewController <iCarouselDataSource, iCarouselDelegate>{

IBOutlet UIWebView *WebView;
NSURLRequest *Request;

...
}
...

@property (nonatomic, retain) IBOutlet iCarousel *carousel;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize carousel;

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
carousel.type = iCarouselTypeRotary;
carousel.center = CGPointMake(160.0, 250.0);
[self.view addSubview:carousel];

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

 - (void)viewDidUnload
{
[super viewDidUnload];
 self.carousel = nil;

}

#pragma mark -
#pragma mark iCarousel methods

- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{
//generate 100 buttons
//normally we'd use a backing array
//as shown in the basic iOS example
//but for this example we haven't bothered
return 100;
}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
UIButton *button = (UIButton *)view;
if (button == nil)
{
    //no button available to recycle, so create new one
    UIImage *image = [UIImage imageNamed:@"page.png"];
    button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(0.0f, 0.0f, image.size.width, image.size.height);
    [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [button setBackgroundImage:image forState:UIControlStateNormal];
    button.titleLabel.font = [button.titleLabel.font fontWithSize:50];
    [button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];
}

//set button label
[button setTitle:[NSString stringWithFormat:@"%i", index] forState:UIControlStateNormal];

return button;
}

#pragma mark -
#pragma mark Button tap event

- (void)buttonTapped:(UIButton *)sender
{
//get item index for button
NSInteger index = [carousel indexOfItemViewOrSubview:sender];

[[[[UIAlertView alloc] initWithTitle:@"Button Tapped"
                             message:[NSString stringWithFormat:@"You tapped button number %i", index]
                            delegate:nil
                   cancelButtonTitle:@"OK"
                   otherButtonTitles:nil] autorelease] show];
}

 @end 
```

任何想法我做错了什么？我看到一片空旷的景色......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:26:42.150

您是否尝试在数据源方法中放置断点以查看它们是否被调用？

如何使用调试器检查轮播的 dataSource 属性是否已在您的 iCarousel 视图中正确设置？

我的猜测是 dataSource 没有被正确绑定，但是如果没有更多信息就很难确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-06T11:26:52.970

请检查`NSArray`以下方法的第一个数组不是 nil 写入它并在编译和构建后在数据源和委托方法上放置断点之后......它的工作代码......

```
- (void)awakeFromNib
{
    //set up data
    //your carousel should always be driven by an array of
    //data of some kind - don't store data in your item views
    //or the recycling mechanism will destroy your data once
    //your item views move off-screen
    self.items = [NSMutableArray array];
    for (int i = 0; i < 1000; i++)
    {
        [self.items addObject:@(i)];
    }
} 
```

试试看....
谢谢

# php - 从php运行excel公式

> ID：13027023
> 
> 赞同：3
> 
> 时间：2012-10-23T09:09:42.347
> 
> 标签：php, excel, excel-formula

这是我的客户场景，我的客户现在想将一个 excel 文件从 PHP 表单发送到服务器上，将数据发送到文件中，在这个 excel 文件中运行一个公式并获得结果。

我不知道这是否可能。如果是这样，最好将我引导到一个库，PHP 或其他一些可能的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T09:13:09.083

这是完全可能的：看看[PHPExcel](http://phpexcel.codeplex.com/)库，它有一个内置的计算引擎来处理大多数 Excel 公式

有一个使用数据填充 Excel 文件的示例（在本例中来自表单输入），然后在该 Excel 文件中呈现公式以生成结果并将其显示到分发的 /Tests/ 目录中的 Web 浏览器。这个简单的例子 /Quadratic.php 求解一个二次方程；但原理很相似

**编辑**

有关PHPExcel 计算引擎的局限性的一些迹象，请参阅我对[这个问题的回答](https://stackoverflow.com/questions/12636964/use-excel-to-do-core-analysis-in-a-php-application)

**编辑 2**

PHPExcel**已**弃用，因此现在您可以使用[PhpSpreadsheet](https://github.com/PHPOffice/PhpSpreadsheet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:11:51.837

你在思考错误的方向。而是尝试将数据发送到 excel 文件，在 PHP 脚本中读取 excel 文件并在那里进行数学运算。

尝试将动态数据发送到静态 XLS 文件是行不通的。

您可以添加一个常规的 cronjob，检查 XLS 文件数据是否已更改，如果已更改，则再次运行您的计算。

# c# - Web.config 拒绝递归访问子文件夹

> ID：13027024
> 
> 赞同：1
> 
> 时间：2012-10-23T09:09:43.750
> 
> 标签：c#, asp.net, web-config

如果我的网站中有一个名为 Admin 的子文件夹，并且该文件夹有更多子文件夹。如何配置位于 Admin 文件夹中的 web.config 文件以递归地影响其中的所有子文件夹？

目前我有这个，但它只适用于管理文件夹，不影响子文件夹

```
<location path="Admin">
<system.web>
  <authorization >
    <deny users="?"/>
    <allow roles="Admins"/>
  </authorization>
</system.web> 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:40:52.343

您需要拒绝所有其他用户。默认情况下，所有用户（包括客人）都可以访问所有文件夹。如果您想拒绝除某些用户或角色之外的任何人的访问，您需要在所有规则之后拒绝此访问。这也暗示了客人。

```
<system.web>
  <authorization >
    <allow roles="Admins"/>
    <deny users="*"/>
  </authorization>
</system.web> 
```

规则正在被逐一检查，因此管理员符合第一条规则并获得访问权限。所有其他用户和访客都将遵守第二条规则，并且无法访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:17:10.313

您可以将`allowOverride`属性定义为 true

```
<location path="path" allowOverride="true"/> 
```

链接： http: [//msdn.microsoft.com/en-us/library/b6x6shw7 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/b6x6shw7(v=vs.71).aspx)

# iphone - 如何以编程方式检测应用程序是否在性能 >= 4S 的设备上运行？

> ID：13027025
> 
> 赞同：0
> 
> 时间：2012-10-23T09:09:44.437
> 
> 标签：iphone, ios, ipad

> **可能重复：**
> [使用 iPhone SDK 确定设备（iPhone、iPod Touch）](https://stackoverflow.com/questions/448162/determine-device-iphone-ipod-touch-with-iphone-sdk)
> [检测特定的 iPhone/iPod touch 型号](https://stackoverflow.com/questions/1108859/detect-the-specific-iphone-ipod-touch-model)

如果一个应用程序有一些需要高硬件性能的功能，而这些功能只在 iPhone 4S 或更高版本上看起来不错，我如何检测它是否是 iPhone 4？

我知道检测模型不是一个好主意。但更好地检测能力。如何安全地检查它是否是性能 >= iPhone 4S 的设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:11:59.520

您要检查设备 ID，而不是 iOS 版本，请参阅[此答案](https://stackoverflow.com/a/3365391/1648976)。

在不使用任何库的情况下，您也可以参考[这个答案](https://stackoverflow.com/a/1108927/1648976)。

# android - APK 文件在直接构建时安装，但在使用分发过程创建 .apk 文件时不安装（Titanium Studio）

> ID：13027028
> 
> 赞同：1
> 
> 时间：2012-10-23T09:10:02.550
> 
> 标签：android, titanium, apk

我正在 Titanium 中开发一个 android 应用程序。当我通过单击进行直接构建时，生成的文件`Run>Android Emulator`大小为**8 MB**，我可以将此文件复制到我的设备中并安装。`app.apk``"approot/build/android/build"`

 ****但是当我通过选择Keystore 和密码**为 Android 商店打包和分发时，**生成的 .apk 文件大小只有 5MB**，当我直接将其复制到设备并尝试安装时。它实际上没有安装。

使用分发过程构建的应用程序会是这个大小吗？请建议。

**安装应用程序时 adb 的输出：**

单击此链接以查看更大的输出：http: [//i.stack.imgur.com/Dtzb7.png](https://i.stack.imgur.com/Dtzb7.png)

![在此处输入图像描述](../Images/4870f5f98595194a0c28d88fac6c17e6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:28:13.840

谷歌搜索，我发现这是错误代码 103：

[https://groups.google.com/forum/?fromgroups=#!topic/rhomobile/WJJvB8NVcuU](https://groups.google.com/forum/?fromgroups=#!topic/rhomobile/WJJvB8NVcuU)

可能是您使用的是sdk 1.7吗？尝试切换到 java sdk 1.6。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:02:33.017

我找到了解决方案，下面是我的问题的答案

1) 是的，当应用程序执行生产时，文件大小将减小。

2) 将应用程序发布到特定文件夹后，我们应该使用以下命令对应用程序进行签名

`jarsigner -verbose -keystore /home/balan/tmp/KeyStore360/android.keystore myproject.apk androidalias`

感谢 Steelight 让我知道`adb logcat`，这帮助我解决了我的 apk 文件缺少证书的问题。**

# java - 基本的 if-else 语句

> ID：13027030
> 
> 赞同：0
> 
> 时间：2012-10-23T09:10:05.560
> 
> 标签：java, if-statement

这周我正在接受 if-else 语句，我试图解决这个问题，但我仍然收到一条错误消息。谁能告诉我我做错了什么？请记住，这是一个`if-else`问题，但其他方法也将受到赞赏。

> Clunker Motors Inc. 正在召回 1995-1998 和 2004-2006 年款的所有车辆。`RECALL`给定一个变量 modelYear，如果 modelYear 的值落在这两个范围内，则 编写一条语句，将消息打印到标准输出。

```
if(modelYear==1995||modelYear==1998)
{
    System.out.println("Recall");   
}
else if(modelYear==2004||modelYear==2006)
{
    System.out.println("Recall");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:15:22.753

```
if (modelYear==1995||modelYear==1998) 
```

表示年份仅为 1995 年**或**1998 年。所以 1996 年和 1997 年不会过去。

如果将语句替换为：

```
if (modelYear>=1995 && modelYear<=1998) 
```

那么你表达的是 1995 到 1998 之间的范围。该陈述仅对整数 [1995, 1996, 1997, 1998] 成立。请注意从逻辑 OR( `||`) 到逻辑 AND( `&&`) 的切换，这意味着两个比较检查都必须为真，条件表达式才能返回`true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:16:45.440

> Clunker Motors Inc. 正在召回 1995-1998 和 2004-2006 年款的所有车辆

这意味着应该召回这些年份的 [1995, 1996, 1997, 1998] 和 [2004, 2005, 2006] 的模型。

你的情况：

```
if(modelYear==1995||modelYear==1998) 
```

意味着只计算范围内的两年。[1996 年和 1997 年] 的模型将不会被召回。

要包括这两个范围，您可以执行以下操作：

```
if ((modelYear>=1995 && modelYear<=1998) || (modelYear>=2004 && modelYear<=2006))
{
    System.out.println("Recall");
} 
```

或者

您应该创建一个单独的方法来检查范围：

```
boolean isYearWithinRange(int modelYear, int start, int end)
{
    return modelYear>=start && modelYear<=end;
}

if(isYearWithinRange(modelYear, 1995, 1998) || isYearWithinRange(modelYear, 2004, 2006))
{
    System.out.println("Recall");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:15:15.107

您需要检查年份*范围*。您现在正在做的是测试确切的年份*值*

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-23T09:15:41.113

```
if(modelYear>=1995 && modelYear<=1998)
{
  System.out.println("Recall");   
}
else if(modelYear>=2004 && modelYear<=2006)
{
  System.out.println("Recall");
} 
```

# jakarta-ee - 将字段从工厂传递到另一个类

> ID：13027035
> 
> 赞同：0
> 
> 时间：2012-10-23T09:10:25.137
> 
> 标签：jakarta-ee, vaadin

有一个田间工厂——

```
 ...
public IncomingFieldFactory(MainView app) {
        hbnContainer = new HbnContainer<Incoming>(Incoming.class, app);
    }
    @Override
    public Field createField(Container container, Object itemId,
            Object propertyId, Component uiContext) {

        final Field f = super.createField(container, itemId, propertyId, uiContext);
        if(f != null) {
            if(f instanceof TextField) {
                TextField tf = (TextField) f;
                tf.setWidth("100%");
            }

            if(propertyId.equals("incomingDate")) {
                ((DateField) f).setResolution(DateField.RESOLUTION_MIN);
                f.setWidth("100%");
            }

            if(propertyId.equals("incomingBalance")) {
                f.setEnabled(false);
            }

            if(propertyId.equals("incomingValue")) {
                incomingValueT = f;
               ...
...

    public Field getIncomingValueT() {
        return incomingValueT;
    }
... 
```

我想将一些字段传递给另一个类来管理它们（启用/禁用），但是`NullPointerException`在调用时得到 -

```
...
Field f = incomingFieldFactory.getIncomingValueT();
f.setEnabled(false);
... 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:54:46.890

该字段仅在`Form.setItemDataSource()`或`Form.addItemProperty()`被调用时创建，因此您需要确保`getIncomingValueT()` *在 之后* `setItemDataSource()`调用。

另请注意，项目数据源必须包含一个名为“incomingValue”的属性，才能完全创建字段。

# selenium-rc - Selenium RC：如何验证表列的格式/数据类型

> ID：13027037
> 
> 赞同：0
> 
> 时间：2012-10-23T09:10:28.073
> 
> 标签：selenium-rc

表中有三列：'ID'、'Name'、'DoB'，数据类型分别为数字、字符串和日期。现在我需要验证每列中显示的数据是否与其数据类型匹配。我如何在 Selenium RC 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:04:11.487

将所有内容提取为字符串，然后应用正则表达式。

# android - Facebook 图表不包括应用程序帖子

> ID：13027038
> 
> 赞同：0
> 
> 时间：2012-10-23T09:10:30.177
> 
> 标签：android, facebook, graph, feed

开发与 Facebook 集成的 Android 应用程序。

在 Facebook 上注册我的应用程序、获得授权等后 - 我可以将文本和图像发布到用户时间轴。当我在浏览器中打开时间线时 - 我看到帖子正确显示。但是，当我用

```
https://graph.facebook.com/{user id}/feed 
```

结果包括该用户时间线的所有内容，但我的应用程序发布的帖子除外。

任何想法为什么会这样，我如何才能获得完整的提要/应用程序仅为该用户发布的帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:19:07.780

看不到我的应用程序发布的帖子的原因是它们在发布时属于“USER/statuses”节点，而不是我预期的“USER/feed”。对我来说，这是相当令人困惑的，因为 Graph API 允许的唯一对象发布正是“USER/feed”，而这就是我使用 POST 请求调用的节点。无论如何，在查询时

```
https://graph.facebook.com/{user id}/statuses 
```

相应地退回申请职位。我假设用户的 facebook 墙结合了状态和帖子。

如果有人知道，我在 Facebook 上找不到任何文档的参考 - 请分享。

# iphone - ios6无法播放视频

> ID：13027039
> 
> 赞同：0
> 
> 时间：2012-10-23T09:10:36.230
> 
> 标签：iphone

我无法使用 MPMoviePlayerController 播放视频，这是我的代码

```
NSString *url = [[NSBundle mainBundle] pathForResource:@"MLL_Video"ofType:@"mp4"];
MPMoviePlayerController *theMoviPlayer;
theMoviPlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:url]];
theMoviPlayer.scalingMode = MPMovieScalingModeFill;
theMoviPlayer.view.frame = CGRectMake(0, 60, 320, 350);

self.myPlayer=theMoviPlayer;
[self.view addSubview:self.myPlayer.view];
[self.myPlayer prepareToPlay];
[self.myPlayer play]; 
```

但即使使用以下代码也不起作用：

```
MPMoviePlayerViewController *moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:url]];
moviePlayer.view.frame = self.view.frame;
moviePlayer.moviePlayer.shouldAutoplay=YES;
moviePlayer.moviePlayer.controlStyle = MPMovieControlStyleNone;
[moviePlayer.moviePlayer setFullscreen:YES animated:YES];
[self.view addSubview:moviePlayer.view];
[moviePlayer.moviePlayer play]; 
```

但它也不起作用，似乎是最新 xcode(4.4) 中的一些错误，如果任何机构对此有解决方案，请分享。

# mod-rewrite - 重写规则给出两个尾部斜杠

> ID：13027041
> 
> 赞同：3
> 
> 时间：2012-10-23T09:10:41.830
> 
> 标签：mod-rewrite, url-rewriting

我希望有人可以帮助我使用 mod_rewrite 规则，除了添加斜杠之外。

这是规则

```
<IfModule rewrite_module>

Options Indexes FollowSymLinks +IncludesNOEXEC 
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.mydomain\.org$ [NC]
RewriteRule ^(.*)$ http://www.mydomain.org/$1 [L,R=301]

</IfModule> 
```

目的是以 www.mydomain.org 的形式重写 URL mydomain.org

这行得通。但随后 www.mydomain.org// 显示在浏览器地址栏中。检查重写日志显示 // 是由规则显式创建的

问题是：

1.  两个斜线是否（或可能）重要？
2.  如果 (1) 的答案是肯定的，我可以重做规则以省略尾部斜杠吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:39:32.730

大多数服务器会忽略双斜杠并将其视为单斜杠。参见例如这个问题（双斜杠）[https://stackoverflow.com//questions/13027041](https://stackoverflow.com//questions/13027041/rewrite-rule-gives-two-trailing-slashes)

要修复您的`RewriteRule`，我相信您只需将其更改为

```
RewriteRule ^/?(.*)$ http://www.mydomain.org/$1 [L,R=301] 
```

该`/?`部分使其成为可选（root 访问），如果找到它，它将被剥离，因为它不是捕获`(.*)`部分的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:40:39.057

1.  不，两个斜杠通常无关紧要，无论如何它不会混淆软件。这只是意味着您必须再传输一个字节（这在某些情况下可能很重要）。
2.  只需将您的重写规则更改为`RewriteRule ^/?(.*)$ http://www.mydomain.org/$1 [L,R=301]`. 这`/?`就是诀窍。

# php - 从 C 执行 php 脚本

> ID：13027042
> 
> 赞同：0
> 
> 时间：2012-10-23T09:10:42.567
> 
> 标签：php, c++, c

我正在尝试编写执行 PHP 脚本的 ac 程序。我尝试使用我在谷歌搜索中遇到的 php_execute_script 函数。但是，似乎我必须调用 TSRMLS_FETCH() 来引发异常。有谁知道为什么？或者我应该如何以正确的方式做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:14:11.587

你可以使用`exec`功能：

```
exec ("php myscript.php"); 
```

或者您可以使用`popen`：

```
FILE *p;
p = popen("php myscript.php","r");
pclose(p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:57:10.457

你想要的是嵌入 PHP 解释器。您可以从 facebook github尝试[PHPEmbed](https://github.com/facebook/phpembed)

# android - 在 android 的印象笔记应用程序中配置的印象笔记帐户的身份验证令牌

> ID：13027046
> 
> 赞同：1
> 
> 时间：2012-10-23T09:11:01.490
> 
> 标签：android, oauth, evernote

我有一个代码可以使用evernote sdk 搜索evernote 帐户中的内容。目前，在用户提供她的凭据并授权我的应用程序后，我获得了一个帐户的身份验证令牌。但我不希望用户输入她已经在她的 android 设备的印象笔记应用程序中配置的帐户的凭据。我想直接从 evernote 应用程序（如 dropbox 和 facebook sdk 提供）中获取身份验证。所以我希望流程是，

1.  检查是否安装了印象笔记应用程序并在其中配置了一个帐户
2.  如果是，则从印象笔记应用程序本身获取身份验证令牌，仅允许/拒绝页面（注意不显示用户名/密码页面） 3.如果没有，则转到浏览器并以正常方式继续。

我怎样才能做到这一点？任何帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:17:40.140

这还不是 Evernote Android SDK 支持的东西。

到目前为止，唯一受支持的身份验证机制是 OAuth，它要求用户在 web 视图中输入他们的凭据并授权您的应用程序。

Evernote Android SDK 是开源的，你可以在[github](https://github.com/evernote/evernote-sdk-android)上查看源代码并提交更改。

您提出的功能需要 Evernote 主应用程序注册一个 Android 自定义帐户（就像 Facebook 或 Dropbox 的应用程序一样），我不确定他们是否有任何计划支持这一点。

# mysql - 在 NULL 之间进行选择的 SQL 查询

> ID：13027053
> 
> 赞同：-2
> 
> 时间：2012-10-23T09:11:26.760
> 
> 标签：mysql

我需要选择两个空值之间的行。

我的问题是我怎样才能获得我需要的所选课程的名称和标记。我不能每次都换表，因为表中的总行数约为 13000。

我认为这太多了，甚至更多的是我从 excel 文件中获取此表，每次都进行一些更改（一天两次甚至更多）。你会有什么看法？

例如：-

```
Name       Marks
=================
class10    NULL
rahul      45
priti      65
terry      74
class9     NULL
Andrew     80
Nastya     75
Ajay       81
class8     NULL! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:19:19.673

如果你的意思是你想要没有空值的记录，那么使用 -

```
select * from table_name where marks is not null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:20:13.643

您的餐桌布局错误，无法满足您的需求。只有当您的表有一个定义行顺序的附加索引时，才能在 SQL 中选择“值之间”的行。

正确的表格布局应该是这样的：

```
Class      Name       Marks
class10    rahul      45
class10    priti      65
class10    terry      74
class9     Andrew     80
class9     Nastya     75
class9     Ajay       81
... 
```

然后你可以像这样查询 class10 的所有成员：

```
SELECT Name, Marks FROM table WHERE Class = 'class10' 
```

更好的是为课程制作自己的表格，但我怀疑在 Excel-Import 的情况下这是可取的。

希望这可以帮助。

编辑：然后使用索引导入您的 excel 表，使其看起来像这样：

```
ID   Name       Marks
=====================
1    class10    NULL
2    rahul      45
3    priti      65
4    terry      74
5    class9     NULL
6    Andrew     80
7    Nastya     75
8    Ajay       81
9    class8     NULL! 
```

然后，您可以选择您的 10 级分数，例如：

```
SELECT Name, Marks FROM table WHERE ID BETWEEN 2 AND 4 
```

或者你的第 9 课，比如：

```
SELECT Name, Marks FROM table WHERE ID BETWEEN 6 AND 8 
```

使用像 PHP 这样的脚本语言，您可以在脚本中自动执行此任务。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T09:14:20.603

“中间空值”是指没有空值的那些吗？

如果是这样，您可以这样做：

```
select * from classTable where NOT ISNULL(Marks); 
```

编辑：您的 Excel 工作表中的数据格式非常糟糕。类名应该是表中的另一列。现在，如果您使用 data 进行一行，则`Name:Rahul, Marks:70`该行的任何部分都不会指示学生所在的班级。您完全取决于数据顺序来确定班级-这种设计非常不可靠。

所以我的建议是在 excel 表中包含另一列，因此在 MySql 表中。

# cloud - 多核处理器的效果

> ID：13027056
> 
> 赞同：0
> 
> 时间：2012-10-23T09:11:49.613
> 
> 标签：cloud, private, eucalyptus

我真的对云计算的概念感到困惑。例如，如果我们有带双核处理器的物理系统处理器，我是否可以将四核或八核处理器作为 VM 添加到物理系统。如果是，请给出说明以及它将如何影响物理系统的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T18:22:22.913

您正在询问是否过度使用 CPU。Eucalyptus 将允许您运行比内核数量更多的实例，但我不知道有任何虚拟机管理程序允许您拥有比单个实例上实际存在的内核更多的内核。QEMU 应该这样做，但这是模拟的（即慢）。

# python - 如何在 django python 的对象列表中添加额外的数据

> ID：13027058
> 
> 赞同：0
> 
> 时间：2012-10-23T09:11:54.840
> 
> 标签：python, django

我正在扩展列表视图，并且在每个对象中我需要添加一个字典。

我的 dic 看起来像这样

```
mydict1['var1'] = {'value':20, 'result':None}
mydict1['var2'] = {'value':20, 'result':None}
mydict1['var3'] = {'value':20, 'result':None} 
```

现在我想将该字典添加到所有对象中

```
for myobj in self.get_queryset():
     myobj.add(mydict1) 
```

这样我就可以像这样访问我的模板

```
{{myobj.dict1.var1.value}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:18:36.163

看起来您只想在对象上设置一个属性？

所以这应该工作：

```
for myobj in self.get_queryset():
     myobj.dict1 = mydict1 
```

# android - 构建 Android ICS 源，出现错误 41

> ID：13027060
> 
> 赞同：0
> 
> 时间：2012-10-23T09:12:05.260
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-build

我正在使用 64 位 Ubuntu 10.04 机器 `android-4.0.1_r1`使用 Android 源链接 - [http://source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)构建 ICS 。我使用的`sun-java6-jdk` 是 Open Jdk 而不是 Open Jdk，我认为这是首选。但是经过数小时的构建后，我收到了这个错误。

```
make: *** [out/target/common/obj/JAVA_LIBRARIES/framework_intermediates/classes-full-debug.jar]
Error 41 
```

我正在做完整的构建并使用 sun-jdk6。我认为某些 java 类中可能有一些错误导致了这种情况，我无法捕捉到这一点，我已经给出了另一个构建并将日志转储到某个文件中，我将很快发布。（不是完整的，但只有错误部分）

# azure - Azure VM 上的 Cloud Foundry

> ID：13027061
> 
> 赞同：0
> 
> 时间：2012-10-23T09:12:09.890
> 
> 标签：azure, cloud-foundry

我已经在 azure 上的 ubuntu 12.04 上成功安装了 VCAP。现在我计划在 public 上访问它。

有关它的信息是：

**DNS：meruvian354.cloudapp.net**

**主机名：meruvian354**

**公共虚拟 IP 地址 (VIP)：168.62.193.163**

**内部 IP 地址：10.76.198.28**

我的目标是自动生成域**“myapp”.meruvian354.cloudapp.net**和 vcap 使其在线。

如何在 cloud_controller.yml 上设置它？我是否必须设置配置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:32:30.570

您需要一个指向公共 IP 地址的通配符域，我可以看到您已将 meruvian354.cloudapp.net 注册为云控制器的 api url，因为我能够注册一个帐户！

如果您注册了 mydomain.com，则必须为该域创建一个通配符“A”域记录并将其指向公共 IP 地址。然后，您需要使用 -D 选项创建新部署以指定新域，或使用 sed 等工具调整当前部署的配置，请参阅此问题以获取另一个示例；

[cloudfoundry - 带有外部 uri 的 vmc 注册错误](https://stackoverflow.com/questions/12531777/cloudfoundry-vmc-register-error-with-external-uri)

# c++ - C++ RTSP视频采集实现

> ID：13027062
> 
> 赞同：1
> 
> 时间：2012-10-23T09:12:11.160
> 
> 标签：c++, sockets, video, rtsp

我想开发一个非常小巧的 RTSP 客户端来从网络摄像机获取视频流。有谁知道我在哪里可以找到协议的简单解释和一些很好的例子？

最好的祝福，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T10:14:50.037

您通过 RTSP 协议连接到摄像机以查询其功能、识别流和准备/开始传输。

*   [RFC 2326 - 实时流协议 (RTSP)](http://www.ietf.org/rfc/rfc2326.txt)

作为初始化和握手的一部分，您将发现可用的流。

*   [RFC 4566 - SDP 会话描述协议](http://www.ietf.org/rfc/rfc4566.txt)

然后，您将设置 RTP 会话以通过 UDP 或共享相同的 TCP 连接接收数据。

*   [RFC 3550 - RTP 实时应用的传输协议](http://www.ietf.org/rfc/rfc3550.txt)
*   [RFC 4571 - 在面向连接的传输上成帧实时传输协议 (RTP) 和 RTP 控制协议 (RTCP) 数据包](http://www.ietf.org/rfc/rfc4571.txt)

要解码媒体流，您需要将有效负载转换为需要进一步处理的纯数据。对于 IP 摄像机，您的主要兴趣可能是 MPEG-4 AVC (H.264)：

*   [RFC 3984 - H.264 视频的 RTP 有效负载格式](http://www.ietf.org/rfc/rfc3984.txt)
*   [RFC 6184 - H.264 视频的 RTP 有效负载格式](http://www.ietf.org/rfc/rfc6184.txt)

这看起来像是一些（介绍性的）阅读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T10:03:29.007

试试[GStreammer](http://gstreamer.freedesktop.org/)库。它是模块化的、非常灵活的库，可用于流式传输（客户端和服务器）。只需检查文档并选择正确的插件。

GStreammer 可以以两种方式使用：作为命令行工具或作为项目中的库，具体取决于您的要求。

# eventbrite - Eventbrite API：有没有办法访问候补名单？

> ID：13027064
> 
> 赞同：3
> 
> 时间：2012-10-23T09:12:12.510
> 
> 标签：eventbrite

我们使用 EventBrite 来管理一些免费活动：效果很好。

我们还广泛使用候补名单功能。

我想编写 EventBrite 票务列表联系人（已售出和候补名单）与另一个系统的同步脚本。

（是的，我知道，我可以在 EventBrite 中管理联系人。但是我们有一个现有的系统，我想继续使用它）

似乎没有一种明显的方法可以通过 API 检索有关候补名单上人员的任何信息？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:38:44.653

这应该可以解决问题。在您的网络浏览器中运行它以查看所有与会者的 xml 列表：

[https://www.eventbrite.com/xml/event_list_attendees?id=123456&app_key=your_app_key](https://www.eventbrite.com/xml/event_list_attendees?id=123456&app_key=your_app_key)

您必须注册开发人员的密钥才能运行查询：[https ://www.eventbrite.com/api/key/](https://www.eventbrite.com/api/key/)

获取 eventID 以确保其正常工作的方法是查看 EventBrite 页面的页面源，然后搜索“eventID”或“eid”。

您也可以通过 EventBrite API 获取事件 ID：http: [//developer.eventbrite.com/doc/events/](http://developer.eventbrite.com/doc/events/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:10:04.790

此处列出了每种可用的 API 访问方法：http: [//developer.eventbrite.com/doc/#methods](http://developer.eventbrite.com/doc/#methods)

候补名单目前不可用。

# asp.net - 通过asp.net fileupload将excel导入sql server时出错

> ID：13027066
> 
> 赞同：0
> 
> 时间：2012-10-23T09:12:21.330
> 
> 标签：asp.net, sql-server, connection-string

我正在尝试将 excel 工作表的数据导入 sql server 数据库中的表中，但出现错误：Microsoft Office Access 数据库引擎找不到对象“Sheet1$”。确保对象存在并且正确拼写其名称和路径名。

以下是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Data;
using System.Data.OleDb;

public partial class abc2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    protected void btnSend_Click(object sender, EventArgs e)
    {
         String strConnection = "Data Source=DITSEC3;Initial Catalog=test;Integrated Security=True";
         //file upload path
         string path = fileuploadExcel.PostedFile.FileName;
         //Create connection string to Excel work book
         string excelConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + path + ";Extended Properties=Excel 12.0;Persist Security Info=False";
         //Create Connection to Excel work book
         OleDbConnection excelConnection =new OleDbConnection(excelConnectionString);
         //Create OleDbCommand to fetch data from Excel
         OleDbCommand cmd = new OleDbCommand("Select [ID],[Name],[Designation] from    [Sheet1$]",excelConnection);
         excelConnection.Open();
         OleDbDataReader dReader;
         dReader = cmd.ExecuteReader();
         SqlBulkCopy sqlBulk = new SqlBulkCopy(strConnection);
         //Give your Destination table name
         sqlBulk.DestinationTableName = "Excel_table";
         sqlBulk.WriteToServer(dReader);
         excelConnection.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:22:24.360

我认为您尝试导入的 excel 工作表的名称与 $sheet1 不同，因此，要获取工作表名称，请使用以下代码并将工作表的名称传递给 sql 查询以从工作表中获取数据。

[http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/05c92891-b839-45c8-80df-eb35e2d68258](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/05c92891-b839-45c8-80df-eb35e2d68258)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:58:58.370

Excel.Application ExcelObj = new Excel.Application();

Excel.Workbook theWorkbook = null;

string strPath="在此处提及 EXCEL 文件的路径"; theWorkbook = ExcelObj.Workbooks.Open（strPath，失踪，失踪，失踪，失踪，失踪，失踪，失踪，失踪，失踪，失踪，失踪，失踪，失踪，失踪）；

Excel.Sheets 工作表 = theWorkbook.Worksheets;

Excel.Worksheet worksheet = (Excel.Worksheet)sheets.get_Item(0);//获取第二个工作表字符串的引用 strWorksheetName = worksheet.Name;//获取工作表的名称。

并在选择查询中使用 strWorksheetName 来获取列数据

# io - 将未格式化的（二进制数据）写入标准输出

> ID：13027067
> 
> 赞同：4
> 
> 时间：2012-10-23T09:12:40.740
> 
> 标签：io, fortran

我想在 Fortran 90 程序中将未格式化的（二进制）数据写入 STDOUT。我正在使用 AIX Unix，不幸的是它不会让我将第 6 单元打开为“未格式化”。我想我会尝试`/dev/stdout`在不同的单元号下打开，但`/dev/stdout`在 AIX 中不存在（尽管这种方法在 Linux 下有效）。

基本上，我想将我的程序输出直接传送到另一个程序中，从而避免有一个中间文件，有点像`gzip -c`。考虑到我上面遇到的两个问题，还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:18:36.473

我会尝试将数据转换`TRANSFER()`为长字符并使用非高级 i/o 打印它。问题将是您的处理器对记录长度的限制。如果它太短，您最终会在某处出现意外的记录结束标志。此外，您的处理器可能不会按照您想要的方式写入不可打印的字符。

即，类似

```
character(len=max_length) :: buffer

buffer = transfer(data,buffer)

write(*,'(a)',advance='no') trim(buffer) 
```

我在不可打印字符中看到的最大问题。另请参阅[非高级 I/O 的惊喜](http://www.cs.rpi.edu/~szymansk/OOF90/bugs.html#3)

**---编辑---** 另一种可能性，尝试使用文件`/proc/self/fd/1`或`/dev/fd/1`

测试：

```
open(11,file='/proc/self/fd/1',access='stream',action='write')
write(11) 11
write(11) 1.1
close(11)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:38:43.023

这更像是对@VladimirF 的评论/补充，而不是新的答案，但我还不能添加这些。您可以先查询预连接的 I/O 单元的位置，然后打开未格式化的连接：

```
character(1024) :: stdout
inquire(6, name = stdout)
open(11, file = stdout, access = 'stream', action = 'write') 
```

This is probably the most convenient way, but it uses stream access, a Fortran 2003 feature. Without this, you can only use sequential access (which adds header data to each record) or direct access (which does not add headers but requires a fixed record length).

# android - Android 对话框破坏了我的主要布局

> ID：13027070
> 
> 赞同：2
> 
> 时间：2012-10-23T09:12:48.167
> 
> 标签：android, layout, button, dialog

**场景：** 我有一个主布局正在运行。单击“帮助”按钮后，会出现一个对话框我关闭帮助对话框主屏幕有 2 个按钮现在已损坏（它们的图形错误）

我附上了屏幕截图，其中包含现在不完整的按钮（坏按钮是“搜索联系人”和“呼叫”）。

问题很明显，我怎样才能在不影响主屏幕图形的情况下关闭对话框？ ![对话框消失后显示错误按钮的屏幕](../Images/bfaf9a7e535fccb99bc5044e8adc6473.png)

**主画面布局**

```
<LinearLayout 
    xmlns:android           = "http://schemas.android.com/apk/res/android"
    android:layout_width    = "fill_parent"
    android:layout_height   = "fill_parent"
    android:paddingLeft     = "@dimen/general_logo_padding"
    android:paddingRight    = "@dimen/general_logo_padding"
    android:orientation     = "vertical"
    android:background      = "@drawable/login_background" >

        <!-- Logo -->
        <ImageView    
            android:id                  = "@+id/imgLogo"
            android:src                 = "@drawable/emobile_logo10"
            android:contentDescription  = "@string/login_imgdescriptor_logo"
            android:layout_width        = "fill_parent"
            android:layout_height       = "wrap_content"
            android:layout_marginTop    = "@dimen/callback_logo_margin"
            android:scaleType           = "fitStart" 
            android:layout_weight       = "0.1"/>

        <!-- Callback Fields -->
        <!-- Your Number -->
        <LinearLayout 
            xmlns:android               = "http://schemas.android.com/apk/res/android"
            android:layout_width        = "fill_parent"
            android:layout_height       = "wrap_content"
            android:orientation         = "horizontal" 
            android:layout_marginTop    = "@dimen/callback_yournumber_margin" 
            android:layout_weight       = "0.2">

            <TextView
                android:id              = "@+id/tvCBYournumber"
                android:layout_width    = "fill_parent"
                android:layout_height   = "wrap_content"
                android:text            = "@string/callback_btn_yournumber"
                android:textAppearance  = "?android:attr/textAppearanceMedium"
                android:textSize        = "@dimen/login_fields_text_size" 
                android:textColor       = "#F26A05" 
                android:layout_weight   = "6"/>

            <EditText 
                android:id                  = "@+id/etCBYourNumber"
                android:layout_height       = "wrap_content"
                android:layout_width        = "fill_parent"
                android:inputType           = "number"
                android:ellipsize           = "end"
                android:singleLine          = "true"
                android:minHeight           = "@dimen/edittext_min_height"
                android:background          = "@drawable/edittext_round_corners"        
                android:gravity             = "center"
                android:textAppearance      = "?android:attr/textAppearanceMedium"
                android:textSize            = "@dimen/login_fields_text_size" 
                android:layout_weight       = "4" />
        </LinearLayout>

        <!-- Connect To -->
        <LinearLayout 
            xmlns:android               = "http://schemas.android.com/apk/res/android"
            android:layout_width        = "fill_parent"
            android:layout_height       = "wrap_content"
            android:layout_marginTop    = "@dimen/callback_connectto_margin"
            android:orientation         = "horizontal" 
            android:layout_weight       = "0.2">

            <TextView
                android:id              = "@+id/tvCBConnectto"
                android:layout_width    = "fill_parent"
                android:layout_height   = "wrap_content"
                android:text            = "@string/callback_btn_connectto"
                android:textAppearance  = "?android:attr/textAppearanceMedium"
                android:textSize        = "@dimen/login_fields_text_size" 
                android:textColor       = "#F26A05" 
                android:layout_weight   = "6"/>

            <EditText 
                android:id                  = "@+id/etCBConnectTo"
                android:layout_height       = "wrap_content"
                android:layout_width        = "fill_parent"
                android:inputType           = "number"
                android:ellipsize           = "end"
                android:singleLine          = "true"
                android:minHeight           = "@dimen/edittext_min_height"
                android:background          = "@drawable/edittext_round_corners"        
                android:gravity             = "center"
                android:textAppearance      = "?android:attr/textAppearanceMedium"
                android:textSize            = "@dimen/login_fields_text_size" 
                android:layout_weight       = "4"/>
        </LinearLayout>

        <!-- Line of Buttons -->
        <LinearLayout 
            xmlns:android               = "http://schemas.android.com/apk/res/android"
            android:layout_width        = "fill_parent"
            android:layout_height       = "wrap_content"
            android:orientation         = "horizontal" 
            android:layout_marginTop    = "@dimen/callback_button_margin" 
            android:minHeight           = "@dimen/callback_button_height"
            android:layout_weight       = "0.1">

            <Button
                android:id                  = "@+id/btnCBSearchContacts"
                android:layout_width        = "fill_parent"
                android:layout_height       = "fill_parent"
                android:text                = "@string/callback_btn_searchcontacts" 
                android:textSize            = "@dimen/login_fields_text_size" 
                android:drawableLeft        = "@android:drawable/ic_menu_my_calendar"
                android:layout_weight       = "1" />

            <Button
                android:id                  = "@+id/btnCBCall"
                android:layout_width        = "fill_parent"
                android:layout_height       = "fill_parent"
                android:text                = "@string/callback_btn_call" 
                android:layout_marginLeft   = "@dimen/callback_button_margin_betweenbuttons"
                android:textSize            = "@dimen/login_fields_text_size" 
                android:drawableLeft        = "@android:drawable/ic_menu_call"
                android:layout_weight       = "1" />

        </LinearLayout>                        

        <RelativeLayout 
            xmlns:android               = "http://schemas.android.com/apk/res/android"
            android:layout_width        = "fill_parent"
            android:layout_height       = "fill_parent" 
            android:layout_weight       = "3">

            <Button
                android:id                      = "@+id/btnCBHelp"
                android:layout_width            = "wrap_content"
                android:layout_height           = "wrap_content"
                android:padding                 = "@dimen/callback_button_help_padding"
                android:text                    = "@string/callback_btn_help" 
                android:layout_centerInParent   = "true"
                android:textSize                = "@dimen/login_fields_text_size" 
                android:drawableLeft            = "@android:drawable/ic_menu_help" />
        </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:23:41.400

嗯，我发现了问题。

似乎问题出在我用来创建按钮的库上，它处于非常早期的 Beta 阶段，并且由于某种原因导致了这个问题。

我正在使用 Pixate 库

我现在已经调整代码以使用 LayoutInflater（Parth Doshi 的想法 - 谢谢），而不是扩展 Dialog 我现在使用的是警报对话框（Md Abdul Gafur），使用这两种方法可以减少问题但不能解决它。

谢谢大家，柴维。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:17:45.627

使用 AlertDialog 弹出新布局并查看 android[文档](http://developer.android.com/reference/android/app/AlertDialog.html)

谢谢。

# c# - 如何使用 iTextsharp 将文件插入到现有 PDF 组合的文件夹中

> ID：13027074
> 
> 赞同：4
> 
> 时间：2012-10-23T09:12:55.000
> 
> 标签：c#, pdf, itextsharp

使用[如何将 PDF 合并到 PDF 包中的答案？](https://stackoverflow.com/questions/9833572/how-to-merge-pdf-using-itextsharp-into-a-pdf-portfolio)，我已经能够使用 iTextSharp 创建 PDF 作品集。但是，使用 Adob​​e Acrobat，我可以创建文件夹，并且可以将文件放入这些文件夹中。

如何创建文件夹以及如何使用 iTextSharp 将文件放入 PDF 组合中的这些文件夹中？

我尝试使用 pdf 检查器程序来查看带有和不带有文件夹的投资组合之间的差异，但我没有看到任何东西。我想我找错地方了

**编辑**

对于我的这个特定用例，实际上可以在前面创建带有文件夹的 PDF 组合。因此，与实际创建文件夹本身相比，能够在现有 PDF 组合的文件夹中插入文件更为重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T07:07:31.267

这是一些概念验证代码，它创建一个带有几个文件夹的新投资组合 pdf，并将现有的 pdf 文件插入到每个文件夹中。这种方法基于使用文本编辑器查看使用原始帖子中链接的示例代码创建的 pdf 文件，然后使用 Acrobat 创建一个文件夹并将嵌入的文件移动到该文件夹​​中，保存 pdf，然后查看使用文本编辑器进行更改。在代码中，我正在重新创建在比较投资组合 pdf 的两个版本时发现的更改，因此虽然它可以工作（至少在我的机器上），但它可能不是完成任务的最佳方式。

如果您想像我一样查看之前/之后的文件，请使用 iTextsharp 创建作品集，然后使用 Acrobat 打开并创建一个文件夹并将嵌入的文件移动到该文件夹​​中，然后使用保存图标再次保存文件在工具栏上。不要使用文件 -> 另存为... 选项将文件另存为投资组合 PDF。Acrobat 重新组织文件并压缩或以其他方式将大量文件转换为您无法在文本编辑器中读取的二进制数据。我发现删除二进制流数据使结构更容易理解。只需摆脱每对`stream`/`endstream`关键字之间的所有内容。

Acrobat 在作品集 pdf 中所做的一件事是嵌入一个 Flash 文件，该文件为作品集提供动画和更具吸引力的主题。我无法弄清楚如何做到这一点，所以这段代码生成的文件看起来有点简单。

```
using System;
using System.IO;
using System.Linq;
using iTextSharp.text;
using iTextSharp.text.pdf;
using iTextSharp.text.pdf.collection;

public class FolderWriter {
    private const string Folder = @"C:\Path\to\your\pdf\files";
    private const string File1 = @"Pdf File 1.pdf";
    private const string File2 = @"Pdf File 2.pdf";
    private readonly string file1Path = Path.Combine(Folder, File1);
    private readonly string file2Path = Path.Combine(Folder, File2);
    private readonly string[] keys = new[] {
        "Type",
        "File"
    };

    public void Write(Stream stream) {
        using (Document document = new Document()) {
            PdfWriter writer = PdfWriter.GetInstance(document, stream);

            document.Open();
            document.Add(new Paragraph("This document contains a collection of PDFs"));

            PdfIndirectReference parentFolderObjectReference = writer.PdfIndirectReference;
            PdfIndirectReference childFolder1ObjectReference = writer.PdfIndirectReference;
            PdfIndirectReference childFolder2ObjectReference = writer.PdfIndirectReference;

            PdfDictionary parentFolderObject = GetFolderDictionary(0);
            parentFolderObject.Put(new PdfName("Child"), childFolder1ObjectReference);
            parentFolderObject.Put(PdfName.NAME, new PdfString());

            PdfDictionary childFolder1Object = GetFolderDictionary(1);
            childFolder1Object.Put(PdfName.NAME, new PdfString("Folder 1"));
            childFolder1Object.Put(PdfName.PARENT, parentFolderObjectReference);
            childFolder1Object.Put(PdfName.NEXT, childFolder2ObjectReference);

            PdfDictionary childFolder2Object = GetFolderDictionary(2);
            childFolder2Object.Put(PdfName.NAME, new PdfString("Folder 2"));
            childFolder2Object.Put(PdfName.PARENT, parentFolderObjectReference);

            PdfCollection collection = new PdfCollection(PdfCollection.DETAILS);
            PdfCollectionSchema schema = CollectionSchema();
            collection.Schema = schema;
            collection.Sort = new PdfCollectionSort(keys);
            collection.Put(new PdfName("Folders"), parentFolderObjectReference);
            writer.Collection = collection;

            PdfFileSpecification fs;
            PdfCollectionItem item;

            fs = PdfFileSpecification.FileEmbedded(writer, file1Path, File1, null);
            item = new PdfCollectionItem(schema);
            item.AddItem("Type", "pdf");
            fs.AddCollectionItem(item);
            // the description is apparently used to place the 
            // file in a particular folder.  The number between the < and >
            // is used to put the file in the folder that has the matching id
            fs.AddDescription(GetDescription(1, File1), false);
            writer.AddFileAttachment(fs);

            fs = PdfFileSpecification.FileEmbedded(writer, file2Path, File2, null);
            item = new PdfCollectionItem(schema);
            item.AddItem("Type", "pdf");
            fs.AddCollectionItem(item);
            fs.AddDescription(GetDescription(2, File2), false);
            writer.AddFileAttachment(fs);

            writer.AddToBody(parentFolderObject, parentFolderObjectReference);
            writer.AddToBody(childFolder1Object, childFolder1ObjectReference);
            writer.AddToBody(childFolder2Object, childFolder2ObjectReference);

            document.Close();
        }
    }

    private static string GetDescription(int id, string fileName) {
        return string.Format("<{0}>{1}", id, fileName);
    }

    private static PdfDictionary GetFolderDictionary(int id) {
        PdfDictionary dic = new PdfDictionary(new PdfName("Folder"));
        dic.Put(PdfName.CREATIONDATE, new PdfDate(DateTime.Now));
        dic.Put(PdfName.MODDATE, new PdfDate(DateTime.Now));
        dic.Put(PdfName.ID, new PdfNumber(id));
        return dic;
    }

    private static PdfCollectionSchema CollectionSchema() {
        PdfCollectionSchema schema = new PdfCollectionSchema();
        PdfCollectionField type = new PdfCollectionField("File type", PdfCollectionField.TEXT);
        type.Order = 0;
        schema.AddField("Type", type);
        PdfCollectionField filename = new PdfCollectionField("File", PdfCollectionField.FILENAME);
        filename.Order = 1;
        schema.AddField("File", filename);
        return schema;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T14:31:29.073

iTextsharp 无法创建文件夹，但您可以创建和查找 PDF 书签。

看：

*   [http://www.mikesdotnetting.com/Article/84/iTextSharp-Links-and-Bookmarks](http://www.mikesdotnetting.com/Article/84/iTextSharp-Links-and-Bookmarks)
*   [http://www.geek-tutorials.com/java/itext/itext_bookmark_anchor.php](http://www.geek-tutorials.com/java/itext/itext_bookmark_anchor.php)

# php - Xdebug-SublimeText2：项目设置文件中没有定义 URL

> ID：13027076
> 
> 赞同：1
> 
> 时间：2012-10-23T09:12:56.090
> 
> 标签：php, xdebug, sublimetext2

我在 SublimeText2 中使用插件时遇到问题。名称是“SublimeXdebug”。

当我单击 [shift]+[F8] 时，出现错误消息： `No URL defined in project settings file`

因此，我在文件夹**/var/www/tests/**的根目录中创建了一个**.sublime-project**文件，如下所示：

 **```
{
"folders":
    [
        {
            "path": "/var/www/tests"
        }
    ],

"settings": {
    "xdebug": { "url": "http://localhost/tests" }
}

} 
```

我测试的文件是：/var/www/tests/mail.php

我怎样才能做到这一点 ？

谢谢，

F。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:45:20.660

`No URL defined in project settings file`如果您想手动启用/禁用 Web 服务器上的调试会话或使用浏览器扩展程序，可以安全地忽略它。

如果您将 xdebug url 放入您的`.sublime-project`文件中，它只会打开您的默认浏览器到该地址并`?XDEBUG_SESSION_START=sublime.xdebug`在您启动调试会话时附加。

我更喜欢使用浏览器扩展，因为您可以更好地控制会话的启动和停止。有一个可用的数字，但这里有一个来自 XDebug 网站的列表：

> ## 用于 FireFox 的简单 Xdebug
> 
> Firefox 的这个扩展旨在使使用 IDE 进行调试更容易。[你可以在https://addons.mozilla.org/en-US/firefox/addon/58688/](https://addons.mozilla.org/en-US/firefox/addon/58688/)找到扩展 。
> 
> ## Chrome 的 Xdebug 助手
> 
> 此 Chrome 扩展程序将帮助您通过单击启用/禁用调试和分析。[您可以在https://chrome.google.com/extensions/detail/eadndfjplgieldjbigjakmdgkmoaaaoc](https://chrome.google.com/extensions/detail/eadndfjplgieldjbigjakmdgkmoaaaoc)找到扩展程序。
> 
> ## Safari 的 Xdebug 切换器
> 
> Safari 的这个扩展允许您从 Safari 中自动启动 Xdebug 调试。[您可以在https://github.com/benmatselby/xdebug-toggler](https://github.com/benmatselby/xdebug-toggler)从 Github 获得它。
> 
> ## Opera 的 Xdebug 启动器
> 
> 此 Opera 扩展允许您从 Opera 启动 Xdebug 会话。**

# objective-c - UITableView 宽度不一致

> ID：13027084
> 
> 赞同：0
> 
> 时间：2012-10-23T09:13:22.973
> 
> 标签：objective-c, ios, uitableview, autoresizingmask

我有两个`UITableView`并排显示。`UITextView`在视图的最右侧还有一个。

所以第`UITableView`一个宽度为 300px 的位于最左侧。第二个`UITableView`位于视图的中心。该表格的宽度为 150 像素。然后`UITextView`, 它具有动态宽度（因为不同方向有不同的宽度），正如我之前提到的，它位于最右侧。

问题是 2`UITableViews`的大小因方向而异。

这就是我初始化它们的方式：

```
UITableView *bookTable = [[UITableView alloc]initWithFrame:CGRectMake(0, 102, 300, self.view.bounds.size.height - 102)];
[bookTable setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleRightMargin];

UITableView *pageTable = [[UITableView alloc]initWithFrame:CGRectMake(bookTable.bounds.size.width, 102, 150, self.view.bounds.size.height - 102)];
[pageTable setAutoresizingMask:UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin];

UITextView *notesView = [[UITextView alloc]initWithFrame:CGRectMake((bookTable.bounds.size.width + pageTable.bounds.size.width), 102, self.view.bounds.size.width - (bookTable.bounds.size.width + pageTable.bounds.size.width), self.view.bounds.size.height - 102)];
[notesView setAutoresizingMask:UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin]; 
```

如您所见，我`autoresizingMask`在它们每个上都设置了。发生的事情是 bookTable 的纵向宽度为 300px，但是当我转向横向时，宽度变为 400px。

`autoresizingMask`负责人对此负责吗？如果是这样，我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:00:35.717

I had a similar problem like this. You might need to post some more code, but you should use 'UITableViewDataSource' method:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

This way you can add your textfields to the cells subview and then set the autoresizing.

```
[cell.contentView addSubview:textField];            
[cell setAutoresizesSubviews:YES]; 
```

# php - 使用 PHP 格式化 SoapHeader

> ID：13027086
> 
> 赞同：0
> 
> 时间：2012-10-23T09:13:25.710
> 
> 标签：php, soap

我正在使用以下代码使用 PHP 创建一个 SOAPHEADER

```
// Instantiate the client.
$client = new SoapClient($wsdl_url, array('trace' => 1));
// Pass along login information
$soap_header = new SoapHeader(
$api_url,
'APICredentials',
array(
    'DeveloperKey' => $developerKey,
    'Password' => $password
    )
);
$client->__setSoapHeaders($soap_header); 
```

创造了这个

```
<SOAP-ENV:Header>
    <ns2:APICredentials>
       <item>
         <key>DeveloperKey</key>
         <value>********</value>
       </item>
       <item>
         <key>Password</key>
         <value>********</value>
       </item>
    </ns2:APICredentials>
</SOAP-ENV:Header> 
```

如何更改 PHP 代码以创建以下标头？

```
<soapenv:Header> 
<web:APICredentials> 
<web:DeveloperKey>...</web:DeveloperKey> 
<web:Password>...</web:Password> 
</web:APICredentials> 
</soapenv:Header> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:48:45.290

您可以使用 $soap_client->__setSoapHeaders($header); 完全手动设置。

```
Required SOAP Header: 

<soap:Header> 
    <RequestorCredentials xmlns="http://namespace.example.com/"> 
      <Token>string</Token> 
      <Version>string</Version> 
      <MerchantID>string</MerchantID> 
      <UserCredentials> 
        <UserID>string</UserID> 
        <Password>string</Password> 
      </UserCredentials> 
    </RequestorCredentials> 
</soap:Header> 

Corresponding PHP code: 

<?php 

$ns = 'http://namespace.example.com/'; //Namespace of the WS. 

//Body of the Soap Header. 
$headerbody = array('Token' => $someToken, 
                    'Version' => $someVersion, 
                    'MerchantID'=>$someMerchantId, 
                      'UserCredentials'=>array('UserID'=>$UserID, 
                                             'Password'=>$Pwd)); 

//Create Soap Header.        
$header = new SOAPHeader($ns, 'RequestorCredentials', $headerbody);        

//set the Headers of Soap Client. 
$soap_client->__setSoapHeaders($header); 
```

来源： http: [//php.net/manual/en/soapclient.setsoapheaders.php](http://php.net/manual/en/soapclient.setsoapheaders.php)

# php - 在文件上传期间更改临时文件路径

> ID：13027087
> 
> 赞同：0
> 
> 时间：2012-10-23T09:13:29.253
> 
> 标签：php, javascript, jquery, html, ajax

有没有办法更改通过html表单上传文件的默认临时路径。或者你可以理解它，因为我想设置`$_FILES["uploadfile1"]['tmp_name']`我的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:18:31.783

在您的 php.ini 更改`upload_tmp_dir`

> 也许您可以直接在您的代码中设置它，而无需在 php.ini 使用
> 
> ```
> ini_set('upload_tmp_dir','/new temp folder'); 
> ```
> 
> 但我不是 100% 确定它会起作用..

# php - PHP：比较两个字符串中是否存在两个相同的单词

> ID：13027088
> 
> 赞同：3
> 
> 时间：2012-10-23T09:13:29.840
> 
> 标签：php, string

我需要创建一个函数，该函数将根据比较结果返回 true 或 false。

我有两个字符串：

```
$one = 'sample product - White - Large'; // White is separate key, and large is separate too
$two = 'White Large'; 
```

你知道完成这项任务的任何快速方法吗？爆炸两个字符串可能不安全，因为某些字符串而不是白色会具有：蓝色 - 黑色 - 大。所以我在寻找蓝黑的存在。

我的数据的另一个例子是：

```
$one = 'sample product - White - Blue - Large';  // White - Blue is separate key, Large is separate too. 
```

如果有人对如何做到这一点有任何想法，我将不胜感激。

谢谢，埃洛隆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:16:45.587

我会采取这样的策略：

1.  通过空格将字符串分解为数组（使用正则表达式）
2.  使用[array_intersect()](http://php.net/manual/en/function.array-intersect.php)查找匹配项

# amazon-web-services - Amazon Web Services 的个人服务器价格合理吗？

> ID：13027090
> 
> 赞同：15
> 
> 时间：2012-10-23T09:13:54.577
> 
> 标签：amazon-web-services

我目前有一个 Linux、Apache、MySQL、PHP、Postfix 网络服务器，我在家里的一台备用计算机上设置了它，我正在探索将其转移到 Amazon Web Services。它就像个人 Web 服务器一样简单，我主要将它用于 PHP 开发的个人实验，我有一个博客，它托管我的电子邮件，另外我在服务器上进行了一些 C++ 开发并运行一些小型可执行文件和联网的个人应用程序。

服务器真正看到的唯一流量是我（每天），加上一些网络爬虫，以及谷歌搜索的偶尔点击。

将我的服务器转移到 Amazon Web Services 是否合理？还是 Amazon Web Services 专门针对更大规模的服务器？我可以期望为此托管支付的最便宜的费用是多少？

我尝试使用[AWS Simple Monthly Calculator](http://calculator.s3.amazonaws.com/calc5.html)，但很难估算数字。也许有人正在做与我的计划类似的事情，并且可以告诉我他们支付的费用。

我对 AWS 感兴趣的原因之一是，我正在考虑将我的网站用作我正在开发的移动应用程序的云存储，如果该应用程序快速启动，我希望能够快速扩展到流量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:23:49.553

`t1.micro`如果您需要简单的设置，使用实例就足够了。这种实例的每月价格（取决于服务器的位置）约为 15 美元。如果您计划长时间运行服务器，请考虑使用预留实例。您支付一次性费用，之后按小时收费。如果您一直运行服务器，则应使用“高利用率”实例。我认为您不会获得大量流量和 EBS 请求，因此我将重点关注与成本有关的主要部分，即 EC2 实例小时数。

这是一个以上述设置为起点的基本[示例计算。](http://calculator.s3.amazonaws.com/calc5.html?key=calc-B70AA43F-56E6-424E-8207-426C77675C91)此计算不包括亚马逊提供的 1 年免费试用。

如果您需要扩展，那么您有很多可用的选项。如果需要，您可以启动更大的实例。查看[实例类型](http://aws.amazon.com/ec2/instance-types/)页面以获取概览（还包括有关微型实例的详细信息）。如果扩展和可能的升级是您做出决定的主要因素，那么您应该考虑 AWS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T09:21:02.433

`Is it reasonable to transfer my server to Amazon Web Services`

我想是的。亚马逊有 Linux 版本列表，您可以在其中免费获取**免费**服务器。请记住，例如，对于免费服务器数据库，您无法从外部 IP（也就是外部数据库工具）连接到您的数据库。但是端口重定向会起作用。

通常我将亚马逊用于演示版本（< 10k 用户）。但它的工作很棒。

# c++ - 如何覆盖qt中的标签宽度？

> ID：13027091
> 
> 赞同：20
> 
> 时间：2012-10-23T09:13:54.183
> 
> 标签：c++, qt, fonts, editor, qtextedit

我只需要知道如何在[QTextEdit](http://doc.qt.digia.com/qt/qtextedit.html)中更改 Qt 中的选项卡大小。我的 Google 和[stackoverflow](https://stackoverflow.com/)搜索返回 null。提前致谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-06T12:22:31.080

如果您想使用 来创建源代码编辑器`QTextEdit`，您应该首先指定一个固定宽度（等宽）字体。这确保所有字符具有相同的宽度：

```
QFont font;
font.setFamily("Courier");
font.setStyleHint(QFont::Monospace);
font.setFixedPitch(true);
font.setPointSize(10);

QTextEdit* editor = new QTextEdit();
editor->setFont(font); 
```

如果您想将制表符宽度设置为一定数量的空格（通常在文本编辑器中完成），请使用`QFontMetrics`以像素为单位计算一个空格的大小：

```
const int tabStop = 4;  // 4 characters

QFontMetrics metrics(font);
editor->setTabStopWidth(tabStop * metrics.width(' ')); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-23T09:17:42.803

该`QTextEdit::tabStopWidth`属性可能会解决您的问题（请参阅[此处](http://qt-project.org/doc/qt-4.8/qtextedit.html#tabStopWidth-prop)获取文档...）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-02-09T11:19:57.240

虽然关于如何设置制表位宽度的问题已经得到解答；**以像素为单位计算正确的标签宽度**仍然是（或再次？）一个悬而未决的问题。

自**Qt 5.10**起，[`QTextEdit::tabStopWidth`](https://doc.qt.io/qt-5/qtextedit-obsolete.html)被标记为过时[`QTextEdit::tabStopDistance`](https://doc.qt.io/qt-5/qtextedit.html#tabStopDistance-prop)并被引入。`tabStopWidth`是整数，`tabStopDistance`是`double`。

# 为什么这么复杂？

设置`n * QFontMetrics::width(' ')`为制表位宽度会带来麻烦，因为`font_metrics.width`返回一个整数。即使您有等宽标准字体，单个字符的宽度实际上也不是整数，因此`QFontMetrics::width`返回的度量值不准确。如果您比较字符串的外观`........|`和`\t\t\t\t|`(\t = tab, n=2)，您会发现管道没有正确对齐。您插入的标签越多，情况就会变得更糟。

# 解决方案

你可以按照@Ferdinand Beyer 的建议去做，但它会稍微改变字体。我还必须调整他的方法以使其发挥作用。但是，有一种更简单的方法可以利用，您`tabStopDistance`现在可以使用双精度设置：

```
static constexpr int tab_width_char = 2;
m_text_edit->setFont(QFont("Courier", 12));
const auto font_metrics = m_text_edit->fontMetrics();

static constexpr int big_number = 1000; // arbitrary big number.
const QString test_string(" ");

// compute the size of a char in double-precision
const int single_char_width = font_metrics.width(test_string);
const int many_char_width = font_metrics.width(test_string.repeated(big_number));
const double single_char_width_double = many_char_width / double(big_number);

// set the tab stop with double precision
m_text_edit->setTabStopDistance(tab_width_char * single_char_width_double); 
```

如果 Qt 提供了一种将单个字符的宽度设为`double`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-02-06T15:51:16.277

虽然@Ferdinand Beyer 的解决方案适用于某些系统，但通常不保证字体具有整数度量。例如`12pt DejaVu Sans Mono`，在我的 Linux 设置中，字符宽度为 9.625。我发现的最佳解决方案是添加一些字母间距以获得像素完美对齐。

```
int tabstop = 4;

QFontMetricsF fm (ui->textEdit->font());
auto stopWidth = tabstop * fm.width(' ');
auto letterSpacing = (ceil(stopWidth) - stopWidth) / tabstop;

auto font = ui->textEdit->font();
font.setLetterSpacing(QFont::AbsoluteSpacing, letterSpacing);
ui->textEdit->setFont(font);

ui->textEdit->setTabStopWidth(ceil(stopWidth)); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-09-28T17:40:12.497

计算一个空格和 num 个空格大小的乘积并不总是精确的（在 macOS，Monaco 字体下测试），可能是由于实际字符串中的字符之间存在一些间隙。更好的解决方案是测量包含 tabStop 空格的字符串的长度：

```
const int tabStop = 4;  // 4 characters

QString spaces;
for (int i = 0; i < tabStop; ++i) {
    spaces += " ";
}

QFontMetrics metrics(font);
editor->setTabStopWidth(metrics.width(spaces)); 
```

# jquery - 悬停在 ASP .NET 菜单上

> ID：13027095
> 
> 赞同：2
> 
> 时间：2012-10-23T09:14:03.037
> 
> 标签：jquery, asp.net, menu

我在 div 中使用了 asp .net 菜单。我需要通过将鼠标悬停在另一个名为“菜单”的 div 元素上来显示菜单。

问题是当鼠标移到菜单上[远离“菜单”div]时菜单消失，从而使菜单不可访问。

```
jQuery(document).ready(function () {
        //toggle the componenet with class msg_body
        jQuery(".heading").hover(function () {
            jQuery(this).next(".txtcontent").slideToggle("slow");
        });
    }); 
```

HTML 代码：

```
<div class="heading" style="width: 100%; font-size: 7pt; font-family: 'Lucida Bright';">
<span style="font-size: 20pt">MENU</span>
</div>
<div class="txtcontent" style="width: 90%; display: none;">
<asp:Menu> Menu contents </asp:Menu>
<div> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:24:37.713

请试试这个`:)` [http://jsfiddle.net/SJHr5/](http://jsfiddle.net/SJHr5/)

希望它适合原因`:)`

**代码**

```
<div class="heading" style="width: 100%; font-size: 7pt; font-family: 'Lucida Bright';">
<span style="font-size: 20pt">MENU</span>

<div class="txtcontent" style="width: 90%; display: none;">
    <asp:Menu> Menu contents </asp:Menu>

</div>
</div> 
```

**jQuery代码**

```
$(function() {
    $(".heading").hover(function() {
        $(this).find(".txtcontent").slideDown("slow");

    }, function() {
        $(this).find(".txtcontent").slideUp("slow");

    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:21:16.903

当您悬停菜单项时，菜单会按预期显示，但是当您将鼠标移动到菜单本身时，菜单项不再悬停，因此，您需要做的是获取将`txtcontent`菜单保存在菜单中的物品。

你可以这样做：

```
<div class="heading" style="width: 100%; font-size: 7pt; font-family: 'Lucida Bright';">
    <div style="font-size:20pt;position:relative;display:inline-block;">
        <span>Menu</span>
        <div class="txtcontent" style="display:none;position:absolute;top:25px;left:0;">
            <asp:Menu> Menu contents </asp:Menu>
        </div>
    </div>
</div> 
```

不只是给菜单（`txtcontent`）你想要的风格..修复我在这里给的顶部位置等等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:23:16.650

通过执行以下操作，我设法做到了您想要的

```
jQuery(document).ready(function () { 
    //toggle the componenet with class msg_body
    jQuery(".heading").mouseover(function () {
        jQuery(this).next(".txtcontent").slideToggle("slow");
    });
    jQuery(".txtcontent").mouseout(function () {
        jQuery(this).slideToggle("slow");
    });
}); 
```

请注意，当有多个标题时，这将无法正常工作，每个 .txt 内容将保持可见，直到您浏览它，然后离开它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:30:11.353

除了上面发布的另一种解决方案:)

```
var hideMenuTimeout = null;

jQuery(".heading").hover(
function() {
    jQuery(this).next(".txtcontent").slideDown("slow");
}, function() {
    var self = this;
    hideMenuTimeout = setTimeout(function() {
        jQuery(self).next(".txtcontent").slideUp("slow");
    }, 100);
});

$(".txtcontent").hover(
function() {
    clearTimeout(hideMenuTimeout);
}, function() {
    $(this).slideUp("slow");
});​ 
```

[jsFiddle](http://jsfiddle.net/1stein/d5yt5/)

# jsf - jsf +richfaces 弹窗不显示

> ID：13027100
> 
> 赞同：0
> 
> 时间：2012-10-23T09:14:32.180
> 
> 标签：jsf, richfaces

```
<richdatatable>
<a4j:commandLink styleClass="addLink"  action="#{depotOpeningStockManageBean.createNewLotShow}"
                             execute="@this" oncomplete="#{rich:component('addPane')}.show()"  value="Create" >

                            </a4j:commandLink></richdatatable>

 <rich:popupPanel id="addPane" resizeable="true"  domElementAttachment="parent">     
             <h:commandLink  value="cancel"  onclick="#{rich:component('addPane')}.hide()" />
             </rich:popupPanel> 
```

为什么在richdataGrid 和richpanel 上显示弹窗而不在richDatatable 中显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:40:38.507

好像您忘记了列定义：

```
<rich:dataTable ... >
    <rich:column ... >
        <a4j:commandLink ... />
    </rich:column>
</rich:dataTable> 
```

而且您必须向表格提供一个列表。如果您只想要`<table>`渲染，那么`<h:panelGrid>`就是您要查找的标签。

# restructuredtext - 如何避免重组文本中的隐式 mailto 链接？

> ID：13027101
> 
> 赞同：4
> 
> 时间：2012-10-23T09:14:31.507
> 
> 标签：restructuredtext

我是 Restructured Text 的新手，我正在尝试编写一个文档来引用名称中带有“at”符号的项目，例如“Foo@BAR”。当我使用 docutils“rst2html”工具将 .rst 文件转换为 HTML 时，它会被转换为“mailto”链接。如果我使用双反引号进行逐字渲染，它会变成等宽文本。如何让它以普通文本字体呈现，而不是转换为链接？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T15:38:28.680

您可以使用[字符转义](http://docutils.sourceforge.net/docs/user/rst/quickref.html#escaping)`@`在单词中包含一个。在 reStructuredText 中，转义字符是`\`，因此请尝试`Foo\@BAR`在您的文档中使用。

# objective-c - 我可以在我的 iphone 设置应用程序（如 Facebook 和 Twitter）上添加链接吗？

> ID：13027102
> 
> 赞同：0
> 
> 时间：2012-10-23T09:14:35.887
> 
> 标签：objective-c, ios, settings, root.plist

我为我的 iPhone 应用程序定义了 Root.plist，但我想在设置中包含一个类似 Twitter 和 Facebook 应用程序的链接。这可能吗？我找不到任何可以让我在[Apple 的 dpcumentation](http://developer.apple.com/library/ios/#documentation/PreferenceSettings/Conceptual/SettingsApplicationSchemaReference/Articles/RootContent.html#//apple_ref/doc/uid/TP40007018-SW1)上执行此操作的类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:35:57.037

没有办法做到这一点，您可以在您的应用程序中进行设置，而不是在 settings.app 中，这个工具包可以帮助您：[InAppSettingsKit](http://inappsettingskit.com/)

# java - Java命令行控制台和开关

> ID：13027105
> 
> 赞同：-4
> 
> 时间：2012-10-23T09:14:56.043
> 
> 标签：java, switch-statement, command-line-arguments

我有以下问题：我想从用户那里读取一个字符串，到目前为止它工作得很好但是每次我按下“return”我总是得到以下错误：

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 0
    at java.lang.String.charAt(String.java:658)
    at Shell.execute(Shell.java:20)
    at Shell.main(Shell.java:55) 
```

这将是代码：

```
private static void execute(BufferedReader stdin) throws IOException {
    boolean quit = false;
    Field test = new Field();
    while (!quit) {
        System.out.print("ch> ");
        String input = stdin.readLine();
        if (input == null) {
                break;
        }
        String[] tokens = input.trim().split("\\s+");
        tokens[0].toLowerCase();
        char tmp = tokens[0].charAt(0);
        switch (tmp) {
        case 'n':
                test.setPoints(null);
                break;
        case 'a':
                test.add(new Point(Integer.parseInt(tokens[1]), Integer
                        .parseInt(tokens[2])));
                break;
        case 'r':
                test.remove(new Point(Integer.parseInt(tokens[1]), Integer
                        .parseInt(tokens[2])));
                break;
        case 'p':
                System.out.println(test);
                break;
        case 'c':
                System.out.println(test.convexHull());
                break;
        case 'h':
                System.out.println("");
                break;
        case 'q':
                quit = true;
                break;
        default:
                break;
        }
    }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:17:03.503

如果在访问第 0 个元素时遇到索引越界异常，则您的字符串可能为空。您需要为此添加一个检查，检查 null 是不够的。

顺便说一句，当你这样写时：

```
tokens[0].toLowerCase(); 
```

我高度怀疑您的令牌[0] 保持不变。由于 java 中的字符串是不可变的，toLowerCase 将不得不返回一个只包含小写字符的新字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:19:13.823

查看`tokens`拆分后您的数组是否填充了任何字符串，因为我认为这会产生问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:20:27.633

如果您按下返回，您的输入字符串为空，请按如下方式更改您的代码以修复它。

```
while (!quit) {
     System.out.print("ch> ");
     String input = stdin.readLine();
     if (input == null && input.length()<1) { //changed line!
          break;
     }
      String[] tokens = input.trim().split("\\s+"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:21:14.017

这是问题所在

```
String input = stdin.readLine();
        if (input == null) {
                break;
        } 
```

在这里按下“return”不会给你 null 并且你的 if 条件失败。

代码在下一行失败

```
tokens[0].toLowerCase(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T09:22:59.537

很明显，用户输入是空字符串。在拆分之前放置空字符串检查。

```
if (input == null && input.isEmpty()) {
    break;
} 
```

# c - 2台服务器之间的通信（C语言）

> ID：13027106
> 
> 赞同：0
> 
> 时间：2012-10-23T09:15:06.937
> 
> 标签：c, rpc, distributed-computing, xdr

我正在尝试创建一个分布式系统，其中客户端将一些信息发送到一个服务器，服务器接收消息并将其转发到所有其他**服务器**。系统使用RPC和XDR作为它的接口定义语言。

我得到了服务器接收消息的部分。但我无法将消息转发到其他服务器。即使我设法转发消息，它也只会**在客户端也向该特定服务器发送消息时**打印，即与该消息一起发送。

例如：如果我向服务器 A 发送消息**Hello**，并且服务器 A 也应该将其转发到服务器 B。服务器 B 得到消息并且不打印它。相反，当我向服务器 B 发送消息**Hi时，它会打印****HELLOHI**。这意味着 B 收到了消息，但没有完全打印出来。

关于为什么会发生这种情况的任何建议？我正在使用`rpc_broadcast`将从客户端收到的消息广播到其他服务器。

Edit1：这是我在所有服务器收到广播时尝试调用的方法。我只是想在那里打印一个静态的 HELLO THERE 看看它是否在执行我的逻辑之前工作。

```
int *
pass_details_1_svc (xaction_args *argp, struct svc_req *rqstp)
{
    int *i;
   printf("HELLO THERE");   
   return i;
} 
```

这是我在收到来自客户端的消息时执行的 rpc_broadcast 调用：

> xaction_args 股份公司；ag.passMsg="你好";
> rpc_broadcast(其他,TICKER_PROG,TICKER_VERS,PASS_DETAILS,(xdrproc_t)xdr_xaction_args,&ag);

`passMsg`是 XDR 文件中定义的结构中的一个变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:29:38.897

添加 \n 有效，因为它会刷新您当前的 printf 缓冲区。当您通常调用 printf 时，操作系统也没有必要立即输出它。它可以缓冲一段时间并在某个不可预测的时间执行。冲洗打印缓冲区可确保立即打印。

或者，您可以使用一些未缓冲的系统调用，例如 perror()

所以这并不好笑，这是设计的标准逻辑行为

# vb.net - 如何将我的树视图限制为父母和 1 个孩子？银光 5

> ID：13027110
> 
> 赞同：1
> 
> 时间：2012-10-23T09:15:19.820
> 
> 标签：vb.net, drag-and-drop, treeview, silverlight-5.0

我有一个从数据库生成的树视图。然而，当应用程序运行时，树视图会发生变化，因为我将使用列表框和拖放功能对其进行扩展来构建它。但是我的问题是我只希望它成为父母-> 孩子。我不想要父母->孩子->孩子。我只想要一个从父节点出来的“分支”。这是我的树视图数据模板：

```
 <sdk:HierarchicalDataTemplate  x:Key="TreeviewItem" ItemsSource="{Binding Path=Children, Mode=TwoWay}" >
        <Grid AllowDrop="true" >
            <StackPanel Orientation="Horizontal" AllowDrop="true" >
                <CheckBox x:Name="tick" IsChecked="{Binding Path=Active, Mode=TwoWay}" Margin="0,0,2,0" Content="{Binding Path=ReasonDescription, Mode=TwoWay}"  AllowDrop="true"
                           x:FieldModifier="Public" />
        </StackPanel>
        </Grid>
    </sdk:HierarchicalDataTemplate> 
```

我有 1 个数据模板，其中包含父原因和子原因。是否有一个额外的属性可以查看该项目是否将被放到第二个级别以创建第三个并禁用它？谢谢

# ruby-on-rails - 具有多个角色的 Rails 应用程序

> ID：13027114
> 
> 赞同：0
> 
> 时间：2012-10-23T09:15:29.730
> 
> 标签：ruby-on-rails

我有一个具有 2 个角色的 Rails 应用程序，比如管理员和用户。但问题是，管理员不使用像 ActiveAdmin 这样的后端。我希望管理员和用户都看到相同的视图，但根据角色，我限制他们可以看到的内容。我正在使用 Cancan，但是由于例如管理员和用户都可以看到产品页面，因此我最终在视图和控制器操作中出现了许多条件，例如，如果这是管理员显示，则显示，而不是显示。

所以我真的不认为这是“Rails 方式”。我最终得到了许多重复的代码，并且视图内的代码并不真正支持使逻辑远离视图的想法。

所以我的问题是，实现具有许多角色但视图相同的场景的最佳方法是什么。

谢谢你。

* * *

我目前正在考虑两种选择，但我都不喜欢。一种是将管理员重定向到另一个视图，但这样大部分视图都是相同的，因此它根本不是 DRY。选项 2 是使用完全相同的视图，但在视图中添加了许多条件，因此我最终得到了一个带有代码的巨大复杂视图。我正在尝试找到一种方法，让事情保持干燥但简单，并保持视图代码免费。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:30:56.687

您可以在单独的命名空间和用户下将管理模块作为默认命名空间。您可以提取部分下的公共代码，并在管理和用户模块中使用相同的代码。

通过这种方式，您可以将用户和管理员的代码分开，并且如果将来某个时候您决定为管理员和用户使用不同的视图。这不会是一项艰巨的任务。

1.  将控制器作为

    app/controllers/admin/articles ------ 管理员用户

    app/controllers/articles ---- 普通用户

和

1.  意见

    应用程序/视图/管理员/文章

    应用程序/视图/文章

    应用程序/视图/共享

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:44:07.043

有不同的可能方法。[如here](http://robots.thoughtbot.com/post/13641910701/tidy-views-and-beyond-with-decorators)所述，我会想到“装饰器”模式的变体

这是我最后一次阅读它的时间，但我认为基本思想是将逻辑放入模型或助手中。一旦用户登录，您就可以查看他是管理员还是普通用户，您有方法可以返回必要的 html 或文本。

一种更简单的方法是只为所有内容设置两个部分。正如罗斯在单独的管理命名空间中所说，或者甚至更简单（但如果您以后需要更改它，则需要更多工作），就像 _user_view_something.html.erb 和 _admin_view_something.html.erb 一样。

有点类似的想法进入了[DCI](http://en.wikipedia.org/wiki/Data,_Context,_and_Interaction)模式。[这个博客](http://andrzejonsoftware.blogspot.de/2011/08/dci-patterns-how-to-write-dci-contexts.html)给出了一些很好的概述这如何在 Rails 中发挥作用。这篇文章更多的是关于权限，但基本思想是用必要的功能补充用户对象。

因此，您拥有基本的“do_something”方法，它可以在视图中呈现某些内容或放置一些信息，并将其替换为适合实际用户角色的方法。

# asp.net-mvc-3 - MVC 表单帖子未到达控制器

> ID：13027118
> 
> 赞同：2
> 
> 时间：2012-10-23T09:15:49.163
> 
> 标签：asp.net-mvc-3

我有一个提交时没有到达控制器方法的表单（我在那里放了一个断点）

```
 [HttpPost]
    public ActionResult SaveBilling( FormCollection fc )
    {
...
} 
```

前端代码是这样的

```
<form action="/PersonSettings/SaveBilling" method="post" >
...
<input type='submit' value="save" />
</form> 
```

有任何想法吗 ？

不确定这是否是路由处理程序问题，因为如果我在浏览器中转到 /PersonSettings/SaveBilling，它确实会到达 GET 版本，但 post 方法只会产生一个空白页面并且不会进入代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T09:19:34.797

将您的视图重写为：

```
@using (Html.BeginForm("SaveBilling", "PersonSettings", FormMethod.Post))
{
    ....
    <input type='submit' value="save" />
} 
```

该控制器是否在任何区域？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-05T20:23:21.810

我意识到这已经解决了，但我想我会解决另一个可能的原因：在`[ValidateAntiForgeryToken]`你的方法中使用属性而不`@Html.AntiForgeryToken()`在你的代码中会产生同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:10:08.050

原来这是一个与路由相关的问题，我有一些复杂的路由，默认的 mvc 路由正在捕获应该通过默认 mvc 路由的区域。

能够通过为我的函数使用显式参数而不是表单集合来重新创建问题，所以这可能是问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-13T05:05:31.427

使用表单并定义操作路径。

```
<form id="subscriptionForm" action="/Category/Create" method="post"> 

--your div 

</form > 
```

现在使用脚本序列化表单

```
<script type="text/javascript">
        $('#Save').click(function () {
            var form = $("#subscriptionForm");
            var url = form.attr("action");
            var formData = form.serialize();
            $.post(url, formData, function (data) {
                $("#msg").html(data);
            });
        })
    </script> 
```

现在你可以达到你的控制器动作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-10T23:58:08.727

有时使用像[Fiddler](https://www.telerik.com/fiddler)这样的网络嗅探工具有助于查看发送请求时出现的问题并且似乎没有到达服务器。

# java - 在文件修改中寻找算法

> ID：13027119
> 
> 赞同：-4
> 
> 时间：2012-10-23T09:15:53.363
> 
> 标签：java, file, io

请告知算法假设如果文件 def.txt 是在 C 中创建的：那么它本身不应在 1 小时内修改，如果在 1 小时内未修改，我必须在控制台中打印“文件未修改”和如果它本身在 1 小时内被修改，那么我必须打印语句“该文件已修改”请告知如何在 java 中编写这样的算法或如何在 java 中实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:41:44.377

```
public static void main(String[] args) {
File f = new File("/temp/t.txt");
long lastModified = f.lastModified();
long currentTime = System.currentTimeMillis();
long difference = currentTime - lastModified;
// time is in milliseconds, one hour is 60 * 60 * 1000 milliseconds
long oneHour = 1000 * 60 *60;
if (difference > oneHour)
    System.out.println("file is not modified");
else
    System.out.println("that file is modified");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:22:14.387

如果您需要监控多个文件/目录，您可以实现 Watch Service，请参阅：“创建 Watch Service 并注册事件” [。](http://docs.oracle.com/javase/tutorial/essential/io/notification.html#register)捕获 ENTRY_CREATE 和 ENTRY_MODIFY 事件将使您能够采取适当的行动。在创建时记录创建时间，在修改时检测修改时间是小于还是大于一个小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:25:57.853

`file.lastModified()`每次尝试修改文件时，首先检查和之间的差异`System.currentTimeMillis()`是否小于一小时（以毫秒为单位）。

您必须在需要时调用此验证服务（= 提供验证方法的对象）。

# sql - Magento：为产品分配税级

> ID：13027123
> 
> 赞同：2
> 
> 时间：2012-10-23T09:16:19.653
> 
> 标签：sql, database, magento, e-commerce, shop

我的 magento 税类有一个（我认为的）简单问题。我的商店里有大约 400 种产品，其中只有 20 种产品分配了税级。我检查了我的数据库和表“catalog_product_index_price”，所有带有工作税的产品都有tax_class_id = 1，所有不工作的产品都有tax_class_id = 0。所以我想我只需将每个产品更新为tax_class_id = 1，我就完成了，但是一旦我在magento后端重新索引了我的价格，产品再次获得tax_class_id = 0 ..某处必须有一个默认值，但我无法在任何地方找到它，我吓坏了，因为我无法解决这个问题..

谢谢你的帮助！

菲利普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:35:24.287

`catalog_product_index_price`是一个索引表，在重新索引过程中填充。这意味着它从其他表中提取数据并将它们分组在此表中以供进一步使用。这就是为什么您的更改在重新索引后被覆盖的原因。

如果您想为您的产品更改**tax_class_id**，最简单的选择是在您的管理面板中使用*Mass Update* * 功能。打开管理产品部分，选择所有产品（全选），从操作下拉列表中选择**更新属性**，您将能够`Tax Class`一次更改所有产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:23:20.243

尝试通过转到目录 -> 管理产品 -> 单击一个 -> 价格 -> 税级来手动更改它。

然后看看它在后端是如何变化的。

```
select * from catalog_product_index_price where entity_id = [[product_id]]; 
```

最好的办法是通过记录 sql 语句来更改 pdo 调试来跟踪 SQL 语句：http: [//yauhen.yakimovich.info/blog/2011/03/21/log-all-sql-queries-in-magento /](http://yauhen.yakimovich.info/blog/2011/03/21/log-all-sql-queries-in-magento/)

# ember.js - 目标的事件委托

> ID：13027124
> 
> 赞同：3
> 
> 时间：2012-10-23T09:16:21.057
> 
> 标签：ember.js

在下面的代码中，我的*单击*事件委托和视图层次结构中的所有三个*“单击”*处理程序都会被触发。

但是，我也想在我的整个视图层次结构中触发*“编辑” 。***“编辑”**只是我*的“子”*视图中元素的目标。

**模板**

```
<script type="text/x-handlebars">
  {{#view App.GrandparentView}}
    {{#view App.ParentView}}
        {{#view App.ChildView}}
           <span {{action "edit" target="view"}}>Click Me</span>
        {{/view}}    
    {{/view}}
  {{/view}}
</script> 
```

**​JavaScript**

 **```
App.GrandparentView = Ember.View.extend({
  click: function() {
    console.log('Grandparent Click Fired!');
  },
  edit: function () {
   console.log('GrandParent edit fired');        
  }
});
App.ParentView = Ember.View.extend({
  click: function() {
    console.log('Parent Click Fired!');
  },
  edit: function () {
    console.log('Parent edit fired');        
  }

});
App.ChildView = Ember.View.extend({
  click: function() {
    console.log('Child Click Fired!');
  },
  edit: function () {
    console.log('Child edit fired');        
  }

});​ 
```

有没有办法委派视图层次结构中的目标处理程序？我**不想**做的是：

```
App.ChildView = Ember.View.extend({
  click: function() {
    console.log('Child Click Fired!');
  },
  edit: function () {
    console.log('Child edit fired');        
    this.get('parentView').edit(); //DO NOT WANT TO DO THIS.
  }
});​ 
```

这是一个[jsFiddle](http://jsfiddle.net/lifeinafolder/xN2my/)作为测试的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:32:00.133

看起来与您大约一周前发布的问题相同。据我所知，ember 中没有实现这样的功能。事件传播到视图层次结构，但操作名称丢失，并`click`触发默认处理程序。

我发现的唯一解决方法是重新打开 Ember.View 类本身，并像这样覆盖点击处理程序：

```
Ember.View.reopen({
  click: function(event){
    if(event.view !== this && this[event.actionName]){
        return this[event.actionName](event);
    }
  }
}) 
```

在这里看小提琴：

[http://jsfiddle.net/Sly7/zZyCS/](http://jsfiddle.net/Sly7/zZyCS/)**

# javascript - 定时器插件执行一次后将不起作用

> ID：13027125
> 
> 赞同：0
> 
> 时间：2012-10-23T09:16:23.213
> 
> 标签：javascript, jquery, jquery-plugins

单击按钮后，我正在使用[此计时器插件创建计时器。](http://keith-wood.name/countdown.html)你可以[在这里看到它的实际效果。](http://warcadia.com/game/timer.html)如果您注意到，当您单击任何购买按钮两次时，它会被忽略并且不会再次执行。我无法弄清楚如何纠正这个问题。计时器完成后，只要单击按钮，我就需要重新启动计时器。

**这是我在第一个按钮上使用的 HTML：**

```
<h3 class="protection"><span id="sentryTime">00:00:00</span><a href="javascript:sentry()">Purchase Sentry</a></h3> 
```

**这是我在该按钮上使用的javascript，它调用插件来创建计时器：**

```
function sentry() {
    var dateCreated1 = new Date();
    setCharacterTime(/*hr*/0,/*min*/0,/*sec*/5,/*title*/'sentryTime',dateCreated1)} 

function setCharacterTime(hours, minutes, seconds, title, creationDate) {

    var thisDay = creationDate;
    var year = thisDay.getFullYear();
    var month = thisDay.getMonth();
    var day = thisDay.getDate();
    var aHour = thisDay.getHours();
    var aMinutes = thisDay.getMinutes();
    var aSeconds = thisDay.getSeconds();
    var aMilli = thisDay.getMilliseconds();
    thisDay = new Date(year, month, day, aHour + hours, aMinutes + minutes, aSeconds + seconds, aMilli);
    $('#' + title).countdown({until: thisDay, format: 'HMS', layout: ' {hnn}{sep}{mnn}{sep}{snn}', expiryText: 'complete '});
    ;} //end setCharacterTime() function 
```

如果您需要查看 jQuery 插件，[可以在这里找到它。](http://warcadia.com/game/js/jquery.countdown.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:56:37.007

这是我从插件作者那里收到的解决方案：

```
function sentry() {
    setCharacterTime('+5s', 'sentryTime');
}
function security() {
    setCharacterTime('+5m', 'securityTime');
}
function police() {
    setCharacterTime('+8m', 'policeTime');
}
function soldier() {
    setCharacterTime('+1h', 'soldierTime');
}
function warrior() {
    setCharacterTime('+1h +45m', 'warriorTime');
}
function setCharacterTime(offset, title) {
    var alertStatement = 'this is supposed to pop up once the timer is complete.';
    $('#' + title).countdown({format: 'HMS', layout: ' {hnn}{sep}{mnn}{sep}{snn}', // Initialise
        onExpiry: function() {
            alert(alertStatement);
        }
    }).countdown('option', {until: offset});// Update
} 
```

# actionscript-3 - Flash papervision3d 从服务器加载 dae 模型

> ID：13027126
> 
> 赞同：1
> 
> 时间：2012-10-23T09:16:26.780
> 
> 标签：actionscript-3, flash, papervision3d, collada

尝试在 Flash AS3 中使用 papervision3d 加载 DAE 模型。我希望在用户打开 swf 文件后，它会从其他服务器加载 DAE 模型和纹理。

我正在使用此代码链接模型：

```
ModelDAE.load( "http://someurl.com/model.dae", materialsList); 
```

用flash编译后效果很好。但是在我将我的 swf 文件上传到网络后，它不起作用，显示空白屏幕。

如果我将 DAE 模型蚂蚁纹理放在同一个服务器和同一个文件夹中，并像这样链接模型：“model.dae”它正在工作。但我希望该模型将从其他服务器加载。

感谢您的任何建议。

所有代码：

```
package 
{
import flash.display.Bitmap;
import flash.events.Event;
import org.papervision3d.materials.BitmapFileMaterial;
import org.papervision3d.materials.utils.MaterialsList;
import org.papervision3d.objects.parsers.DAE;
import org.papervision3d.view.BasicView;

public class ProjectDAE extends BasicView
{
    private var ModelDAE:DAE;
    protected var bitmapMaterial:BitmapFileMaterial;

    public function ProjectDAE () 
    {
        this.loaderInfo.addEventListener ( Event.COMPLETE, onFullyLoaded );
    }

    private function onFullyLoaded(e:Event):void 
    {
        bitmapMaterial  = new BitmapFileMaterial( "http://....jpg");
        var materialsList:MaterialsList = new MaterialsList ( ) ;
        materialsList.addMaterial ( bitmapMaterial, "all" ) ;           

        ModelDAE = new DAE();
        ModelDAE.load( "http://....dae", materialsList);
        this.scene.addChild(ModelDAE);

        this.startRendering ( ) ;
    }

    override protected function onRenderTick(event:Event = null):void 
    {
        super.onRenderTick ( event );
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:10:47.690

可能是跨域问题，参考[http://kb2.adobe.com/cps/142/tn_14213.html](http://kb2.adobe.com/cps/142/tn_14213.html)

# php - 从阿拉伯语 UTF8 + 英语字符串中去除非字母数字字符

> ID：13027128
> 
> 赞同：5
> 
> 时间：2012-10-23T09:16:34.270
> 
> 标签：php, regex, utf-8, arabic, ereg-replace

我想从字符串中删除所有非阿拉伯语、非英语和非数字字符，破折号 (-) 除外。

我设法为这样的非英文字母数字字符做到了：

```
$slug = ereg_replace('[^A-Za-z0-9-]', '', $string); 
```

但是对于非阿拉伯字母数字字符，我尝试这样做：

```
$slug = ereg_replace('\p{InArabic}', '', $string); 
```

但它没有去除非字母数字字符！我也试过[这个答案](https://stackoverflow.com/questions/6643148/remove-garbage-characters-in-arabic)，但它也没有用，它总是返回'0'！

```
$slug = preg_replace('/[^\x{0600}-\x{06FF}A-Za-z0-9-]/u','', $string); 
```

希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T09:30:02.557

试试下面的：

```
$slug = preg_replace('/[^\p{Arabic}\da-z-]/ui', '', $string); 
```

# objective-c - 判断之前是否安装过应用

> ID：13027129
> 
> 赞同：1
> 
> 时间：2012-10-23T09:16:34.827
> 
> 标签：objective-c, ios, cocoa-touch, in-app-purchase

我即将在应用程序中实现一些解锁功能的应用内购买。客户希望该功能在安装应用程序后的前两周内可用，然后在用户付款之前停止使用。

我需要该应用程序来确定它之前是否已安装、删除并再次安装。如果我做不到，用户可以重新安装应用程序并免费获得两周的时间。

有任何想法吗？

当应用程序本身被删除时，似乎所有数据都被删除了，这限制了我的选择。该应用程序有一个服务器后端。我最好的选择是在那里记录一些东西还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:21:59.650

您可以在 iOS 中使用钥匙串。即使您卸载该应用程序，它也不会被删除。但是您必须确保在应用程序的不同版本中使用相同的配置文件。

而且，看看这个[实用程序](https://github.com/ldandersen/STUtils/blob/master/Security/STKeychain.h)

# regex - 非常具体地分隔列

> ID：13027130
> 
> 赞同：1
> 
> 时间：2012-10-23T09:16:35.727
> 
> 标签：regex, vba, excel, delimiter

我有一列（有数千行），我想将其分隔为多行。我有一些在 Excel 中使用正则表达式的经验，我也有一些在 excel 中使用分隔符的经验，但是这个有点太难了..

让我给你三个例子：

```
 - 23-12-05: For sale for 2000\. 2010-09-09: Not found
 - 25-11-09: For sale for 3400\. Last date found: 2010-07-08
 - 18-06-08: For sale for 5500\. 21-07-09: Changed from 5500 to 4900\. 16-09-09: Jumped from 4900 to 4700\. 2010-02-04: Not found 
```

大多数其他行都遵循这些结构。如何仅基于 [COLON] 之前的第一个符号创建新列；第二列基于第一个 [COLON] 和第一个 [DOT] 之间的符号。如果找不到文本 LAST DATE，我如何继续到最后一个？最后：如何使用正则表达式（或其他方式）使用文本“未找到”将最后一个日期粘贴到新列中？

相信我，我在这方面已经有一段时间了（叹气）。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:06:42.240

您实际上可以为此使用公式。

假设文本在 A1 中，

```
B1: =LEFT(A1,FIND(":",A1)-1)
C1: =MID(A1,FIND(":",A1)+1,FIND(".",A1,FIND(":",A1))-FIND(":",A1))
D1: =MID(A1,FIND(".",A1,FIND(":",A1))+1,LEN(A1))
E1: =MID(A1,FIND("Not found",A1)-12,10) 
```

（我假设 E1 的日期格式没有改变）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:04:28.940

顺便说一句，这也适用于我，以获取单元格中的最后日期：

> =LOOKUP(9999999999999999,FIND("**-**-**",A1,ROW($1:$1024)))

这里唯一的问题是：我一点也不知道我到底在做什么。例如，我想使用相同的代码来查找日期的第一次出现。

谁能向我解释这段代码？为什么我要搜索一个非常高的数字？这段代码中是什么让我找到了最后一次出现？“起始编号”是“行（1：1024）”是什么意思？

有人知道吗？

# iphone - 如何在 iOS 后台执行某些任务

> ID：13027131
> 
> 赞同：0
> 
> 时间：2012-10-23T09:16:37.770
> 
> 标签：iphone, sqlite, ios6

我想在后台执行一些与数据库相关的任务，因为我添加了代码

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,
                                             0), ^(void) {
        [lclDB  deleteRecoredwithBlock:^(BOOL success) {
            if (success) {
                NSLog(@"Deletion Succesful...");
            }
        }];
    }); 
```

deleteRecord 函数在内部按顺序调用多个方法以在本地数据库中执行删除操作。现在我已经等到所有删除操作都执行完毕。但我想在后台执行整个删除操作。如果有人知道请帮我弄清楚这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:19:40.353

任何 NSObject 都可以使用以下命令在后台执行操作：

```
[myObject performSelectorInBackground:@selector(anAction) withObject:nil]; 
```

[有关苹果文档的更多信息。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:22:20.393

试试`performSelectorInBackground:withObject:`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:43:17.913

```
[self performSelectorInBackground:@selector(backgroundMethod) withObject:nil]; 
```

您也可以使用[NSInvocationOperation](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSInvocationOperation_Class/Reference/Reference.html)。

```
NSOperationQueue *queue = [NSOperationQueue new];
NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(deleteDataWithOperation) object:nil];
[queue addOperation:operation]; 
```

这是你的`deleteDataWithOperation`方法 -

```
-(void)deleteDataWithOperation
{
   //Do your work here
} 
```

# html4 - 通过 HTML 4 属性的样式在浏览器中是不一样的

> ID：13027135
> 
> 赞同：-5
> 
> 时间：2012-10-23T09:16:52.020
> 
> 标签：html4

为什么我的 CSS 在所有浏览器中的应用都不同？例如，对于以下代码：

```
<body align="center"  background="F:\photos\sravan\wi7.jpg"> 
```

我可以看到我的文本在 Chrome 中居中对齐并带有背景，但在 Mozilla 中不一样！为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:20:40.687

[`file://`出于安全原因，浏览器会限制对资源的访问。](https://superuser.com/questions/224500/display-local-images-in-chrome-using-file-protocol)AFAIK，您只能在同一目录中指定图像位置，即您的 HTML 文件也必须位于`f:/photos`并使用相对路径引用，即。`sravan/wi7.jpg`.

此外，正如评论中所指出的，您使用的符号不是 CSS。使用 HTML 属性指定视觉属性是一种过时的技术，最好切换到实际的 CSS。了解它的基础知识，例如[这里](http://www.cssbasics.com/)或罗伯特推荐的网站之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T09:20:03.737

## 你的代码不是 CSS

相反，您应该拥有 HTML 和 CSS，如下所示：

```
<body>
    content
    ...
</body> 
```

和正文 CSS

```
body {
   background-image: url(URL to your image and not local path);
   text-align: center;
} 
```

## 学习语言

无意冒犯，但我强烈建议您在深入研究编写任何合理的代码之前学习 HTML 和 CSS。

*   [HTML 简介](http://www.w3schools.com/html/html_intro.asp)
*   [CSS 简介](http://www.w3schools.com/css/css_intro.asp)

## HTML 规范

根据[W3C 规范](http://www.w3.org/TR/REC-html40/struct/global.html#h-7.5.1) `body`，元素不支持`align`属性，`background`在 4.01 中已弃用，在 HTML5 中不支持。所以**不要将它用作属性**。使用 CSS 定义样式：

*   在您在 HTML 中引用的单独 CSS 文件中
*   `style`在`head`HTML 元素中添加元素
*   **（不推荐）**添加与您的元素内联的样式：

    ```
    <body style="text-align: center; background-image: url(wi7.jpg);"> 
    ```

由于 CSS 具有许多内联样式的工作方式使您的应用程序难以维护，并且还引入了新的 CSS hack，您必须使用这些技巧才能使您的页面按预期呈现。**关注点分离规则**。HTML 文件是你的内容定义，CSS 文件是它的样式。尽可能将它们分开。

## 一般建议

由于浏览器尝试遵循规范，因此它们的 HTML+CSS 呈现之间可能存在差异。有些人可能对此非常严格，有些人可能会更宽松一些。尽量保持在规范范围内，您应该会获得更好的跨浏览器结果。

# java - 带有授权的 Eclipse 插件错误

> ID：13027142
> 
> 赞同：1
> 
> 时间：2012-10-23T09:17:10.217
> 
> 标签：java, google-calendar-api

我正在使用 Google Calendar API，并且**在 Eclipse 独立 Java-Project 中一切正常**。现在我想将（完全相同的）代码添加到我的**Eclipse 插件中。不幸的是，我现在遇到了一个问题，即使用 Google API 的身份验证不再正常工作**。在`AuthorizationCodeInstalledApp(flow, new LocalServerReceiver()).authorize("user");` 浏览器启动身份验证过程后，我可以单击“身份验证”，然后浏览器执行我不知道的操作（无限加载）并且仅当我取消程序时才停止。在 Eclipse 控制台中，我收到以下错误：

`!MESSAGE While loading class "org.mortbay.jetty.RetryRequest", thread "Thread[349166459@qtp-300209212-1 - Acceptor0 SocketConnector@localhost:18312,5,main]" timed out waiting (5005ms) for thread "Thread[main,6,main]" to finish starting bundle "myproject.version.qualifier [896]". To avoid deadlock, thread "Thread[349166459@qtp-300209212-1 - Acceptor0 SocketConnector@localhost:18312,5,main]" is proceeding but "org.mortbay.jetty.RetryRequest" may not be fully initialized.`

我不知道这个错误是什么意思，我能做什么。谢谢你的帮助！

事故

PS：我有工作示例（仅在普通的 Eclipse 项目中，不在 Eclipse 插件项目中）从[这里](http://samples.google-api-java-client.googlecode.com/hg/calendar-cmdline-sample/src/main/java/com/google/api/services/samples/calendar/cmdline/CalendarSample.java)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:56:11.183

幸运的是，我找到了解决这个问题的方法（错误？）......我刚刚创建了一个新的（片段）项目并在该项目（而不是插件项目）中进行了授权，现在，相同的代码在那里工作！ ...这很奇怪，但有效...

# twitter - EpiTwitter 现在返回“抱歉，该页面不存在”，错误代码 34，建议的更改不起作用

> ID：13027144
> 
> 赞同：0
> 
> 时间：2012-10-23T09:17:18.510
> 
> 标签：twitter, twitter-oauth

[对于已删除的推文，twitter api 总是给出“抱歉，该页面不存在”错误](https://stackoverflow.com/questions/11186068/twitter-api-always-give-sorry-that-page-does-not-exist-error-for-deleted-twee)

[使用 Twitter API 已经开始给出一个抱歉页面不存在的错误，即使它之前工作过](https://stackoverflow.com/questions/12827627/using-twitter-api-has-started-giving-a-sorry-page-does-not-exist-error-even-thou)

[Twitter 404 - message":"抱歉，该页面不存在","code":34](https://stackoverflow.com/questions/12905600/twitter-404-messagesorry-that-page-does-not-exist-code34)

嗨，我已经阅读了上述问题，但这些建议并不能解决我的问题。

我的网站上有一个页面，可以让用户验证我的 Twitter 应用程序，然后在他们的时间轴上发布一条推文。

API`{"errors":[{"message":"Sorry, that page does not exist","code":34}]}`在 JSON 响应中返回。

如果我遵循我在其他问题中阅读的建议，将 EpiTwitter 类从

```
const EPITWITTER_SIGNATURE_METHOD = 'HMAC-SHA1';
protected $requestTokenUrl = 'http://twitter.com/oauth/request_token';
protected $accessTokenUrl = 'http://twitter.com/oauth/access_token';
protected $authorizeUrl = 'http://twitter.com/oauth/authorize';
protected $apiUrl = 'http://twitter.com'; 
```

至

```
const EPITWITTER_SIGNATURE_METHOD = 'HMAC-SHA1';
protected $requestTokenUrl= 'https://api.twitter.com/oauth/request_token';
protected $accessTokenUrl = 'https://api.twitter.com/oauth/access_token';
protected $authorizeUrl   = 'https://api.twitter.com/oauth/authorize';
protected $authenticateUrl= 'https://api.twitter.com/oauth/authenticate';
protected $apiUrl         = 'https://api.twitter.com';
protected $searchUrl      = 'http://search.twitter.com'; 
```

也不起作用，当应用程序生成登录链接时，它会转到[https://api.twitter.com/oauth/authorize?oauth_token=](https://api.twitter.com/oauth/authorize?oauth_token=)这表示此页面没有请求令牌。

有没有人对如何解决这个问题有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:30:07.913

道歉，

我知道 Twitter API 已更改，但没有看到类文件已更新。

对于遇到相同问题的其他人，只需从此处更新您的文件：

[https://github.com/jmathai/twitter-async](https://github.com/jmathai/twitter-async)

请注意，有一个名为 EpiSequence.php 的新文件（虽然我不确定它的用途是什么）。

起初我认为这些文件没有更新以使用新的 api url，因为我看不到任何显示最近提交迹象的东西。

# ember.js - 如何避免缺少 2 级深度关联的映射？

> ID：13027145
> 
> 赞同：1
> 
> 时间：2012-10-23T09:17:19.777
> 
> 标签：ember.js, ember-data

我在 hasMany 链中有 3 个模型。EG Gallery -> 图片 -> 评论

在单个 json 响应中返回选定的图库和其中的图像按预期工作。后端是一个使用 active_model_serializers 的 Rails 应用程序，顺便说一句。

```
{"images":[...],"galleries":{"id":1,...,"images":[1,2,3]}} 
```

但是当我告诉序列化程序关于 Comments 并且它们被包含在 json 中时，我从 Ember 中得到一个映射错误。

```
{"comments":[...],"images":[...],"galleries":{"id":1,...,"images":[1,2,3]}} 
```

> 错误：断言失败：您的服务器返回了一个带有关键注释的哈希，但您没有它的映射

我不知道如何正确地告诉 Ember 如何处理这个问题。我的调试表明 json 响应中的任何内容都必须在 Gallery 模型中直接引用。为了确定，我尝试使用单数和复数形式向 RESTAdapter 添加“映射”。“comments：App.Comment”或“comment：App.Comment”我看不出有什么区别。

我想我可以放弃并再做一些请求，但是由于在使用给定图像时总是使用评论，所以感觉不对。我希望得到一些帮助来确定我们如何在单个响应中允许数据。

我是否需要完全重新配置序列化程序和 Ember 以嵌入数据而不是使用 ID 引用它们？

雪儿，马丁

*（注意：模型名称是虚构的，与我实际建模的有趣领域相比，它们更易于理解）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:27:33.063

谢谢你促使我回到这个话题。

这是我目前所拥有的。我不知道在最近对 Ember 和 Ember Data 的更新中是否可以删除其中的任何内容。

商店指定：

```
DS.RESTAdapter.configure("plurals", {
  image: 'images',
  gallery: 'galleries',
  comment: 'comments'
});
DS.RESTAdapter.configure('App.Image', {
  sideloadAs: 'images'
});
DS.RESTAdapter.configure('App.Comment', {
  sideloadAs: 'comments'
});
App.store = DS.Store.create({
  revision: 11,
  adapter: DS.RESTAdapter.create({
    mappings: {
      comments: 'App.Comment'
    }
  })
}); 
```

如果您的数据是像图像和事物这样的普通单词，我相当确定您不需要复数定义。我的领域在概念上接近这些，但更具技术性。我选择使用这些名称发布，以使概念和关系更容易理解。

我的模型包含以下......以及所有其他常见的东西。

```
App.Gallery = DS.Model.extend({
  images: DS.hasMany('App.Image',{key: 'images', embbeded: true})
});

App.Image = DS.Model.extend({
  comments: DS.hasMany('App.Comment',{key: 'comments', embedded: true}),
  gallery: DS.belongsTo('App.Gallery')
});

App.Comment = DS.Model.extend({
  image: DS.belongsTo('App.Image')
}); 
```

这允许我返回一个 json 结构，就像我的问题中的那个：

```
{"comments":[...],"images":[...],"galleries":{"id":1,...,"images":[1,2,3]}} 
```

这是使用 ActiveModelSerializers 从 Rails 生成的。我的序列化程序如下所示：

```
class ApplicationSerializer < ActiveModel::Serializer
  embed :ids, :include => true
end
class GallerySerializer < ApplicationSerializer
  attributes :id, ...
  root "gallery"
  has_many :images, key: :images, root: :images
end
class ImageSerializer < ApplicationSerializer
  attributes  :id, ...
  root "image"
  has_many :comments, key: :comments, root: :comments
end
class CommentSerializer < ApplicationSerializer
  attributes  :id, ...
end 
```

再次。我认为你可以不那么冗长。我的 Rails 模型并不简单，称为“Gallery”。它们以“BlogGallery”之类的名称分隔，但我不希望 Ember 必须处理所有这些。出于这个原因，我需要**关键**和**根本的东西。**

我认为这涵盖了我所有关于关联并将它们嵌入到相同的 json 响应中。

# python - 带有断轴和交错颜色条的直方图

> ID：13027147
> 
> 赞同：4
> 
> 时间：2012-10-23T09:17:44.457
> 
> 标签：python, wolfram-mathematica, histogram, pandas

我有那些数据

```
 a       b       c       d       e
alpha   5.51    0.60    -0.12   26.90   76284.53
beta    3.39    0.94    -0.17   -0.20   -0.20
gamma   7.98    3.34    -1.41   7.74    28394.93
delta   2.29    1.24    0.40    0.29    0.28 
```

我想做一个很好的可发布直方图，就像这个![交错颜色条直方图](../Images/2a9734a80d8a03f53b9057042e63f99d.png)

但是在 y 轴上有一个中断，所以我们可以计算出*a*、*b*、*c*、*d*和*e的变化，这样数据就不会像这个一样被**e*列中的极值挤压，而是使用交错的颜色条直方图： ![打破y轴](../Images/7cda53011dd8c6dee96c1f80d1033221.png)

我想用python（matplotlib、pandas、numpy/scipy）或mathematica ...或任何其他开放和免费的高级语言（R、scilab、...）来做到这一点。谢谢你的帮助。

编辑：通过pandas使用matplotlib允许使用左下角“hspace”的选项按钮调整两个子图之间的空间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T09:55:40.480

你见过[这个](http://matplotlib.org/examples/pylab_examples/broken_axis.html)例子吗？它用于 matplotlib 中损坏的 y 轴图。

希望这可以帮助。

与熊猫相结合，这给出了：

```
import pandas as pd
import matplotlib.pyplot as plt
from StringIO import StringIO

data = """\
        a       b       c       d       e
alpha   5.51    0.60    -0.12   26.90   76284.53
beta    3.39    0.94    -0.17   -0.20   -0.20
gamma   7.98    3.34    -1.41   7.74    28394.93
delta   2.29    1.24    0.40    0.29    0.28
"""

df = pd.read_csv(StringIO(data), sep='\s+')

f, axis = plt.subplots(2, 1, sharex=True)
df.plot(kind='bar', ax=axis[0])
df.plot(kind='bar', ax=axis[1])
axis[0].set_ylim(20000, 80000)
axis[1].set_ylim(-2, 30)
axis[1].legend().set_visible(False)

axis[0].spines['bottom'].set_visible(False)
axis[1].spines['top'].set_visible(False)
axis[0].xaxis.tick_top()
axis[0].tick_params(labeltop='off')
axis[1].xaxis.tick_bottom()
d = .015
kwargs = dict(transform=axis[0].transAxes, color='k', clip_on=False)
axis[0].plot((-d,+d),(-d,+d), **kwargs)
axis[0].plot((1-d,1+d),(-d,+d), **kwargs)
kwargs.update(transform=axis[1].transAxes)
axis[1].plot((-d,+d),(1-d,1+d), **kwargs)
axis[1].plot((1-d,1+d),(1-d,1+d), **kwargs)
plt.show() 
```

![在此处输入图像描述](../Images/9d049e4a2c456c5d7f4e3f73cdaab852.png)

# sql-server-2008 - 将 varchar 值“300.00”转换为数据类型 int 时转换失败

> ID：13027150
> 
> 赞同：0
> 
> 时间：2012-10-23T09:17:44.923
> 
> 标签：sql-server-2008

在查询时使用以下 sql 案例时，有没有办法摆脱这个错误？因为某些字段是 varchar，因为它们是导入的？

```
select * ,
case when [Month] = '200911' then netpay_nov09
 when [Month] = '200912' then netpay_dec09
 when [Month] = '201001' then netpay_jan10
end as m1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:27:46.017

由于这些`varchar`列似乎可能包含 REAL 值，因此将它们显式转换为 REAL 并将它们 ROUND，如下所示：

```
select * ,
    case 
         when [Month] = '200911' then ROUND(CONVERT(REAL, netpay_nov09), 0)
         when [Month] = '200912' then ROUND(CONVERT(REAL, netpay_dec09), 0)
         when [Month] = '201001' then ROUND(CONVERT(REAL, netpay_jan10), 0)
    end as m1
.... 
```

# windows-7 - KeepAliveTime 在 Windows 7 中仍然有效吗？

> ID：13027158
> 
> 赞同：1
> 
> 时间：2012-10-23T09:18:12.237
> 
> 标签：windows-7, keep-alive

是否仍然有效，或有任何影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:33:01.097

根据 Microsoft 从 Vista 开始，存在以下注册表项：

KeepAliveTime 键：Tcpip\Parameters 值类型：REG_DWORD — 以毫秒为单位的时间 有效范围：0–0xFFFFFFFE 默认值：7,200,000（两小时） 描述：此值控制 TCP 尝试通过发送 keep-活着的数据包。如果远程系统仍然可以访问并且正常运行，它会确认保持活动传输。默认情况下不发送保活数据包。此功能可以通过应用程序在连接上启用。

还有一个名为“关于 TCP Keepalives 你可能想知道的事情”的[Technet 博客进一步讨论了它。](http://blogs.technet.com/b/nettracer/archive/2010/06/03/things-that-you-may-want-to-know-about-tcp-keepalives.aspx)

# java - Netbeans 和 Subversion 提交错误

> ID：13027160
> 
> 赞同：1
> 
> 时间：2012-10-23T09:18:18.503
> 
> 标签：java, svn, netbeans, netbeans-6.9, netbeans-plugins

当我尝试提交或更新或对我的 NetBeans 6.9.1 中的 subversion 执行任何操作时，会出现一条错误消息并显示：

> 您正在使用的文件似乎是使用不受支持的客户端版本创建的。请使用 SVN 客户端 1.5.0 或更高版本再次检查您的文件。

请我不知道如何更新或执行此操作，而且我必须使用 NetBeans 6.9.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:19:27.300

好吧，如错误消息中所述，使用的（在 NB 中）工作副本的格式非常旧（1.5 之前）。*嵌入 NB 6.9 SVN 客户端（SVNKit）只能*与 1.6 的 WC 对话（TBT！）

你可以

*   以 1.6.x 兼容格式升级您的 WC

或者

*   在 NB 中进行新结帐（将与 1.6 兼容）

如果使用外部 SVN 客户端进行结帐，您可能会遇到麻烦，如果客户端将与 1.7 兼容（1.7 使用 WC-NG，NetBeans 6.9 也无法读取）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:24:25.270

您仍然可以使用 Netbeans；看起来它使用的 Subversion 客户端版本不正确。它有哪个版本？它必须与您正在与之通信的 Subversion 存储库的版本相匹配。它有哪个版本？

您必须替换 Netbeans 中的 Subversion 插件，更改您正在使用的 Subversion 存储库的版本，或者如果您在 Windows 上运行，则使用另一个客户端，例如 Tortoise。

我会反对您的“必须使用 Netbeans”声明并推荐 IntelliJ。它是这个星球上最好的 IDE，它的 SVN 客户端非常棒。

首先使用 Netbeans 创建存储库的新工作副本。也许您刚开始使用其他人签出的一些文件。

# python - 使用 PIL 缩放图像并保留透明度和颜色？

> ID：13027169
> 
> 赞同：11
> 
> 时间：2012-10-23T09:18:45.573
> 
> 标签：python, resize, transparency, python-imaging-library, scale

假设您想缩放透明图像，但还不知道稍后将合成它的背景颜色。不幸的是，PIL 似乎包含了导致不良结果的完全透明像素的颜色值。有没有办法告诉 PIL-resize 忽略完全透明的像素？

```
import PIL.Image

filename = "trans.png"  # http://qrc-designer.com/stuff/trans.png
size = (25,25)

im = PIL.Image.open(filename)
print im.mode  # RGBA

im = im.resize(size, PIL.Image.LINEAR)  # the same with CUBIC, ANTIALIAS, transform
# im.show()  # does not use alpha
im.save("resizelinear_"+filename)

# PIL scaled image has dark border 
```

![具有 (0,0,0,0) 黑色但完全透明背景的原始图像](../Images/cfad106800fb66b45656edda17ffd850.png) ![输出带有黑色光晕的图像](../Images/4d2d7745f702fc06514cc9bf1226cd4c.png) ![用 gimp 缩放的正确输出](../Images/f5be9407e089e8b5223132c983ec6abb.png)

具有 (0,0,0,0)（黑色但完全透明）背景的原始图像（左）

输出带有黑色光晕的图像（中）

用 gimp 缩放的正确输出（右）

编辑：看起来要实现我正在寻找的东西我必须修改调整大小函数本身的采样，以便它忽略具有完全透明度的像素。

edit2：我找到了一个非常丑陋的解决方案。它将完全透明像素的颜色值设置为周围非完全透明像素的平均值，以在调整大小时最大限度地减少完全透明像素颜色的影响。简单的形式很慢，但如果没有其他解决方案，我会发布它。通过使用扩张操作仅处理必要的像素，可能会使其更快。

编辑3：预乘阿尔法是要走的路 - 见马克的回答

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T18:29:12.623

似乎 PIL 在调整大小之前没有进行 alpha 预乘，这是获得正确结果所必需的。幸运的是，通过蛮力很容易做到。然后，您必须对调整大小的结果执行相反的操作。

```
def premultiply(im):
    pixels = im.load()
    for y in range(im.size[1]):
        for x in range(im.size[0]):
            r, g, b, a = pixels[x, y]
            if a != 255:
                r = r * a // 255
                g = g * a // 255
                b = b * a // 255
                pixels[x, y] = (r, g, b, a)

def unmultiply(im):
    pixels = im.load()
    for y in range(im.size[1]):
        for x in range(im.size[0]):
            r, g, b, a = pixels[x, y]
            if a != 255 and a != 0:
                r = 255 if r >= a else 255 * r // a
                g = 255 if g >= a else 255 * g // a
                b = 255 if b >= a else 255 * b // a
                pixels[x, y] = (r, g, b, a) 
```

结果：![result of premultiply, resize, unmultiply](../Images/51faca29c805fe3e2ead37ea004b7aee.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T09:44:16.747

您可以单独重新采样每个波段：

```
im.load()
bands = im.split()
bands = [b.resize(size, Image.LINEAR) for b in bands]
im = Image.merge('RGBA', bands) 
```

**编辑**

也许通过避免像这样的高透明度值（需要numpy）

```
import numpy as np

# ...

im.load()
bands = list(im.split())
a = np.asarray(bands[-1])
a.flags.writeable = True
a[a != 0] = 1
bands[-1] = Image.fromarray(a)
bands = [b.resize(size, Image.LINEAR) for b in bands]
a = np.asarray(bands[-1])
a.flags.writeable = True
a[a != 0] = 255
bands[-1] = Image.fromarray(a)
im = Image.merge('RGBA', bands) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:57:14.333

也许你可以用你想要的颜色填充整个图像，并且只在 alpha 通道中创建形状？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:53:53.310

很抱歉回答自己，但这是我所知道的唯一可行的解​​决方案。它将完全透明像素的颜色值设置为周围非完全透明像素的平均值，以在调整大小时最大限度地减少完全透明像素颜色的影响。在某些特殊情况下，无法获得适当的结果。

这是非常丑陋和缓慢的。如果您能提出更好的建议，我很乐意接受您的回答。

```
# might be possible to speed this up by only processing necessary pixels
#  using scipy dilate, numpy where

import PIL.Image

filename = "trans.png"  # http://qrc-designer.com/stuff/trans.png
size = (25,25)

import numpy as np

im = PIL.Image.open(filename)

npImRgba = np.asarray(im, dtype=np.uint8)
npImRgba2 = np.asarray(im, dtype=np.uint8)
npImRgba2.flags.writeable = True
lenY = npImRgba.shape[0]
lenX = npImRgba.shape[1]
for y in range(npImRgba.shape[0]):
    for x in range(npImRgba.shape[1]):
        if npImRgba[y, x, 3] != 0:  # only change completely transparent pixels
            continue        
        colSum = np.zeros((3), dtype=np.uint16)
        i = 0
        for oy in [-1, 0, 1]:
            for ox in [-1, 0, 1]:
                if not oy and not ox:
                    continue
                iy = y + oy
                if iy < 0:
                    continue
                if iy >= lenY:
                    continue
                ix = x + ox
                if ix < 0:
                    continue
                if ix >= lenX:
                    continue
                col = npImRgba[iy, ix]
                if not col[3]:
                    continue
                colSum += col[:3]
                i += 1
        npImRgba2[y, x, :3] = colSum / i

im = PIL.Image.fromarray(npImRgba2)
im = im.transform(size, PIL.Image.EXTENT, (0,0) + im.size, PIL.Image.LINEAR)
im.save("slime_"+filename) 
```

结果： ![在此处输入图像描述](../Images/90c72a70d808da4a75fc4476394e9133.png)

# ios - 使用 UIPinchGestureRecognizer 缩放图层

> ID：13027170
> 
> 赞同：1
> 
> 时间：2012-10-23T09:18:49.570
> 
> 标签：ios, core-animation, uipinchgesturerecognizer

我将如何使用 UIPinchGestureRecognizer 使用 Transform 来缩放 CALayer（基于现有的变换，图层的当前状态）？

```
- (IBAction)gesturePinch:(UIPinchGestureRecognizer *)sender
{
    float scale = sender.scale;

    scale = scale - previousScale;
    previousScale = scale;

    layer.transform  = CATransform3DScale(square.transform, scale, scale, scale);

} 
```

因为规模正在增加，所以它会很快变得很大或非常小。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:32:16.687

最好像这样处理规模：

```
layer.transform  = CATransform3DScale(square.transform, sender.scale, sender.scale, sender.scale);
sender.scale = 1.f; 
```

这将每次重置它，从而无需计算它。您将丢失速度计算，但我认为您无论如何都不会使用它们。

# vb.net - 使用小猪流利配置解析拉丁植物名称

> ID：13027171
> 
> 赞同：1
> 
> 时间：2012-10-23T09:18:51.550
> 
> 标签：vb.net, piglet

我有以下测试。和类。现在我只需要找到如何编写规则，它看起来很简单;-)。但我哪儿也去不了快。正如标签所说，我想为此使用和学习小猪。

```
Public Class Plant
    Public Property Genus As String
    Public Property Species As String
    Public Property SubSpecies As String
    Public Property IsHybrid As Boolean
End Class

Public Class ParserTests
    <Test>
    Public Sub IfGenusCanBeFoundWhenOnlyGenusAndSpiecesAreThere()
        Dim parser = New ParseLatinPlantName
        Dim result = parser.Parse("Salvia sylvatica")
        Assert.AreEqual("Salvia", result.Genus)
    End Sub

    <Test>
    Public Sub IfSpeciesCanBeFoundWhenOnlyGenusAndSpiecesAreThere()
        Dim parser = New ParseLatinPlantName
        Dim result = parser.Parse("Salvia sylvatica")
        Assert.AreEqual("sylvatica", result.Species)
    End Sub

    <Test>
    Public Sub IfSubSpeciesCanBeFoundWhenSubSpeciesIsProvided()
        Dim parser = New ParseLatinPlantName
        Dim result = parser.Parse("Salvia sylvatica sp. crimsonii")
        Assert.AreEqual("crimsonii", result.SubSpecies)
    End Sub

    <Test>
    Public Sub IfIsHybridIsTrueWhenxIsInNameCanBeFoundWhenSubSpeciesIsProvided()
        Dim parser = New ParseLatinPlantName
        Dim result = parser.Parse("Salvia x jamensis")
        Assert.IsTrue(result.IsHybrid)
    End Sub

End Class 
```

这是我到目前为止所尝试的。

```
Public Class ParseLatinPlantName

        Public Function Parse(ByVal name As String) As Plant
            Dim config = ParserFactory.Fluent()
            Dim expr = config.Rule()
            Dim name1 = config.Expression()
            name1.ThatMatches("[a-z]+").AndReturns(Function(f) f)

            Dim space1 = config.Expression()
            space1.ThatMatches(" ").AndReturns(Function(f) f)

            expr.IsMadeUp.By(name).As("Genus").Followed.By(name).As("Species").WhenFound(Function(f) New Plant With {.Genus = f.Genus})

            Dim parser = config.CreateParser()
            Dim result = DirectCast(parser.Parse(name), Plant)
            Return result
        End Function
    End Class 
```

更新

多亏了 Randompunter，我通过了前两个测试。

```
Public Class ParseLatinPlantName

        Public Function Parse(ByVal name As String) As Plant
            Dim config = ParserFactory.Fluent()
            Dim expr = config.Rule()
            Dim name1 = config.Expression()
            name1.ThatMatches("\w+").AndReturns(Function(f) f)

            expr.IsMadeUp.By(name1).As("Genus") _
                    .Followed.By(name1).As("Species") _
                    .WhenFound(Function(f) New Plant With {.Genus = f.Genus, .Species = f.Species})

            Dim parser = config.CreateParser()
            Dim result = DirectCast(parser.Parse(name), Plant)
            Return result
        End Function
    End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T13:35:22.970

首先，您的原始（然后更正的表达式仅匹配小写字母）。这已通过将其更改为`\w+`与任何其他字母匹配的方式进行了更正。

您的第二次测试失败了，因为您的语法不允许超过两个以下字母。您将需要添加一个规则来使这项工作。

例如，您有一个提供亚种的示例。假设这采用 .sp xxx 是可选传递的形式，需要为此提供单独的规则。

这通过了可选亚种的测试

```
Public Class ParseLatinPlantName

    Public Function Parse(ByVal name As String) As Plant
        Dim config = ParserFactory.Fluent()
        Dim expr = config.Rule()
        Dim subSpecies = config.Rule()
        Dim sp = config.Expression()
        sp.ThatMatches("sp\.").AndReturns(Function(f) f)
        Dim name1 = config.Expression()
        name1.ThatMatches("\w+").AndReturns(Function(f) f)
        Dim nothing1 = config.Rule()

        expr.IsMadeUp.By(name1).As("Genus") _
                .Followed.By(name1).As("Species") _
                .Followed.By(subSpecies).As("Subspecies") _
                .WhenFound(Function(f) New Plant With {.Genus = f.Genus, .Species = f.Species, .SubSpecies = f.Subspecies})
        subSpecies.IsMadeUp.By(sp).Followed.By(name1).As("Subspecies").WhenFound(Function(f) f.Subspecies) _
            .Or.By(nothing1)

        Dim parser = config.CreateParser()
        Dim result = DirectCast(parser.Parse(name), Plant)
        Return result
    End Function
End Class 
```

请原谅我可能非常劣质的 VB，那是很久以前的事了。请注意，有一个表达式明确匹配“sp”。以区别于任何其他类型的名称。然后，该规则也被另一个不匹配的规则匹配。这使得亚种部分是可选的。

我不确定你想从混合规则中解析什么。我认为它必须是名称后跟 x 并后跟其他名称的东西，那么它就是混合体。为了匹配这个，向你的解析器添加另一个规则。

以下解析器通过了所有测试：

```
Public Class ParseLatinPlantName

    Public Function Parse(ByVal name As String) As Plant
        Dim config = ParserFactory.Fluent()
        Dim expr = config.Rule()
        Dim subSpecies = config.Rule()
        Dim hybridIndicator = config.Expression
        hybridIndicator.ThatMatches("x").AndReturns(Function(f) f)

        Dim sp = config.Expression()
        sp.ThatMatches("sp\.").AndReturns(Function(f) f)
        Dim name1 = config.Expression()
        name1.ThatMatches("\w+").AndReturns(Function(f) f)
        Dim nothing1 = config.Rule()

        expr.IsMadeUp.By(name1).As("Genus") _
                .Followed.By(name1).As("Species") _
                .Followed.By(subSpecies).As("Subspecies") _
                .WhenFound(Function(f) New Plant With {.Genus = f.Genus, .Species = f.Species, .SubSpecies = f.Subspecies}) _
                .Or.By(name1).As("FirstSpecies").Followed.By(hybridIndicator).Followed.By(name1).As("SecondSpecies") _
                .WhenFound(Function(f) New Plant With {.IsHybrid = True})

        subSpecies.IsMadeUp.By(sp).Followed.By(name1).As("Subspecies").WhenFound(Function(f) f.Subspecies) _
            .Or.By(nothing1)

        Dim parser = config.CreateParser()
        Dim result = DirectCast(parser.Parse(name), Plant)
        Return result
    End Function
End Class 
```

如果您的表达式重叠，请务必按优先顺序声明它们，这一点很重要。如果您在将被识别为名称`name1`之前声明，则会导致解析失败。您可能已经注意到，Piglet 默认会忽略空格，因此无需为它制定规则。如果不需要此设置，可以在配置器中将其关闭。（使用忽略方法）`hybridIndicator``x`

# android - Inapp billing android - 没有结帐屏幕

> ID：13027173
> 
> 赞同：2
> 
> 时间：2012-10-23T09:19:01.410
> 
> 标签：android, in-app-billing

我是android的新手，我想拥有inapp购买的功能。用户将只购买一次完整版。我不希望出现任何结帐屏幕。相反，我只想显示一条消息“你想以 2 美元购买 abc 产品吗？” 如果用户选择是，那么如果购买成功与否，我应该得到谷歌的回复。

我正在关注 Blundell 博客[教程](http://blog.blundell-apps.com/simple-inapp-billing-payment)来实现该功能。当我调用“REQUEST_PURCHASE”请求时，我收到包含待处理意图的响应包。

```
PendingIntent pendingIntent = (PendingIntent) response.get("PURCHASE_INTENT");

pendingIntent.send(context, 0, new intent()); 
```

我得到一个空白屏幕。当我离开这个空白屏幕时，广播接收器被激活，我在接收器的 OnRecieve 方法中收到“购买成功”。我正在使用测试产品“android.test.item_purchased”。我不想要任何空白屏幕，我只想在我的活动课程中获得响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:23:36.140

它不像这样工作。购买由 Google Play 商店应用程序处理，并显示一个 GUI 让用户选择付款方式并批准购买。这将使用户确信他们确实在向 Google 付款（而后者又向您付款），而不是一些随机的诈骗应用程序。所以这是一件好事。

不确定您从哪里获得空白屏幕，您需要显示更多代码。这确实是一个单独的问题。

# hadoop - '_partition.lst' 不存在错误

> ID：13027180
> 
> 赞同：0
> 
> 时间：2012-10-23T09:19:30.290
> 
> 标签：hadoop, partitioning

我尝试使用“RandomSampler”对映射器结果进行分区。以下是相关代码：

```
JobConf conf = new JobConf(SortExample.class);
conf.setJobName("sortexample");
...
conf.setPartitionerClass(TotalOrderPartitioner.class);
InputSampler.Sampler<IntWritable, Text> sampler =
    new InputSampler.RandomSampler<IntWritable, Text>(0.1, 100);
InputSampler.writePartitionFile(conf, sampler); 
conf.setNumReduceTasks(2); 
```

据我了解，默认情况下，采样器将写入一个名为 _patition.lst 的文件，该文件描述作业将自动用于决定将哪些键/值对发送到哪些减速器的分区。但是运行后，我得到了以下错误：

```
ava.lang.RuntimeException: Error in configuring object
        at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
        at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
        at org.apache.hadoop.mapred.MapTask$OldOutputCollector.<init>(MapTask.java:574)
        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:436)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
        at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1083)
        at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
        ... 10 more
Caused by: java.lang.IllegalArgumentException: Can't read partitions file
        at org.apache.hadoop.mapred.lib.TotalOrderPartitioner.configure(TotalOrderPartitioner.java:91)
        ... 15 more
Caused by: java.io.FileNotFoundException: File _partition.lst does not exist. 
```

而且我不知道文件'_partition.lst'在哪里？这里一定有什么误解，不胜感激~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:49:30.663

我认为您需要在 InputSample 内部类之一上调用 getSample() 。这就是通过 InputFormat 读取文件并实际计算出哪些拆分应该进入 _partition.lst 文件。

# css - 使用 Twitter Bootstrap 在输入文本框右侧放置并修复图标

> ID：13027183
> 
> 赞同：3
> 
> 时间：2012-10-23T09:19:38.410
> 
> 标签：css, asp.net-mvc, forms, twitter-bootstrap, alignment

我刚刚开始使用 Twitter Bootstrap（我是新手，所以我还没有完全掌握它！）我正在尝试创建一个包含一些特定视觉元素的两列表单。

表格的完整宽度约为。视口宽度的 80% 和此处是两列（大致等间距）标签和相关文本框。一些文本框需要在文本框的右侧附加一个小图标，并且当用户调整浏览器窗口大小时，该图标保持固定在文本框的右侧（至少保持这样分辨率低至 1024x768）。我也在尝试通过“响应式设计”来实现所有这些。

我可以让它在更高分辨率下看起来不错，但我知道我做错了，因为当用户调整浏览器窗口大小时，图标显示在文本框“内部”。

第一张图片显示了表单在所有尺寸下的外观（大致）：

![或多或少正确对齐表单上的视觉元素](../Images/5d0e9e8d5bae19a1da509c42b0e6c382.png)

但是在调整浏览器窗口的大小时，它会这样做： ![调整浏览器窗口大小时，信封图标在文本框内移动](../Images/535d87bb959e8ea8d36c79f3d6eb8651.png)

我希望那个小信封图标始终固定在文本框的右侧。不幸的是，当浏览器窗口进一步缩小时，它会移动到下一行： ![当浏览器窗口调整得更小时，信封图标移动到下一行](../Images/d24d45c72c3174c5dc8cf1905e1e3662.png)

我正在使用 ASP.NET MVC 来生成这种表单的大部分内容，因此`@Html.TextBoxFor`在标记中进行了很多调用，但是，我发布了一个 JSFiddle，其中包含部分相关的渲染标记，突出显示了问题：

[http://jsfiddle.net/qYTSY/1/](http://jsfiddle.net/qYTSY/1/)

我确定我对此采取了完全错误的方法，但是我不是设计师，所以我正在努力调整当前的标记以实现我所追求的。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:42:46.800

在 jsfiddle 我添加了一个类：

```
.controls-row-with-icon {
    width: 28em;
} 
```

...然后显然将两个 div 更改为：

```
<div class="controls controls-row controls-row-with-icon"> 
```

将邮件图标“固定”在右侧。不确定它是否会“破坏”其他任何东西？

注意：在 jsfiddle 中，这两列似乎相互重叠 - 但不确定它是否会在您的生产版本中这样做？当视口较小时，我无法让 rh 列“落入” lh 列 - 但猜猜这在您的生产代码中可以正常工作吗？

抢

**编辑**

见评论

```
@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');

.container {
    margin-top: 10px;

}

.row{
    /*min-width: 62em;*/ /* add this is viewport should be fixed */
}

.controls-row{
    width: 30em;
    background: #ccc;
}

.row-fluid .span5{

    margin-left: 0;
    margin-right: 2em;
    width: 30em;
}

.row-fluid .offset1{
    margin-left:0;
    margin-right: 0;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:34:24.267

好吧，经过一番折腾，我相信我找到了解决方案！

这是一个更新的 JSFiddle：

[http://jsfiddle.net/qYTSY/32/](http://jsfiddle.net/qYTSY/32/)

这突出了答案（忽略第一列 - 我已经单独修复了。）

非常感谢[LiverpoolsNumber9](https://stackoverflow.com/users/311757/liverpoolsnumber9)和[Sherbrow](https://stackoverflow.com/users/1478467/sherbrow)帮助我找到解决方案。

我的解决方案的关键是删除需要附加图标的输入元素周围的元素`span3`上的类（将其保留在适当的位置会导致各种奇怪而奇妙的问题），然后还要包装输入元素和图标元素在一个额外的和使用和类以确保图标放置并固定在输入框的右侧。`span``span``div``input-append``add-on`

所以这个标记：

```
<div class="controls controls-row">
    <span class="span3"><label for="Contact_EMail">EMail</label></span>
    <span class="span3"><input id="Contact_EMail" name="Contact.EMail" type="text" value="" /></span>
    <span class="offset4"><a href="mailto:someone@example.com" id="emaillink"><i class="icon-envelope" id="emailicon"></i></a></span>
</div> 
```

变成了这样：

```
<div class="controls controls-row">
    <span class="span3"><label for="Contact_EMail">EMail</label></span>
    <div class="input-append">
        <span><input id="Contact_EMail" name="Contact.EMail" type="text" value="" /></span>
        <span class="add-on"><a href="mailto:someone@example.com" id="emaillink"><i class="icon-envelope" id="emailicon"></i></a></span>
    </div>
</div> 
```

虽然我找到了一个解决方案，但我不得不承认，在涉及 CSS/样式/Twitter Bootstrap 的地方，我仍然觉得[很像这样](https://i.imgur.com/0xJMO.jpg)！

# javascript - Turn.js 更多控件制作按钮

> ID：13027185
> 
> 赞同：1
> 
> 时间：2012-10-23T09:19:41.490
> 
> 标签：javascript, jquery, html, turnjs

我一直在寻找如何制作控件/按钮来操作 turn.js 以制作我自己的杂志网页的方法。

这是我的 html 脚本

```
<div id="magazine">
    <div style="background-image:url(pages/01.jpg);"></div>
    <div style="background-image:url(pages/02.jpg);"></div>
    <div style="background-image:url(pages/03.jpg);"></div>
    <div style="background-image:url(pages/04.jpg);"></div>
    <div style="background-image:url(pages/05.jpg);"></div>
    <div style="background-image:url(pages/06.jpg);"></div>
</div>

<a onclick="turntopage(4)">Go to page 4</a> 
```

我想制作一些按钮控件，例如*转到第 4 页*。这是javascript

```
//initialize turn js
$(window).ready(function() {
    $('#magazine').turn({
        display: 'double',
        acceleration: true,
        gradients: !$.isTouch,
        elevation:50,
        when: {
            turned: function(e, page) {
                /*console.log('Current view: ', $(this).turn('view'));*/
            }
        }
    });
}); 
```

已经有办法进行一些下一个和上一个控制

```
$(window).bind('keydown', function(e){
    if (e.keyCode==37)
        $('#magazine').turn('previous');
    else if (e.keyCode==39)
        $('#magazine').turn('next');
}); 
```

我想控制转到我想去的任何页面。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:27:57.343

有方法

```
$("#magazine").turn("page",4)  // goto page number 4 
```

[http://www.turnjs.com/#samples/docs/18](http://www.turnjs.com/#samples/docs/18)

# html - 旋转的三角形改变它们的中心 HTML5

> ID：13027187
> 
> 赞同：0
> 
> 时间：2012-10-23T09:19:45.163
> 
> 标签：html, canvas

我的程序有问题。我想旋转三角形几次并在每次旋转时绘制它，但是三角形改变了它的位置（我希望它在屏幕的中心）。三角形绘图在绘图功能中。

```
<!DOCTYPE html>
<html>
    <head>
        <script>
        var ctx, canvas;

        window.requestAnimFrame = (function(callback) {
            return (window.requestAnimationFrame || 
            window.webkitRequestAnimationFrame || 
            window.mozRequestAnimationFrame || 
            window.oRequestAnimationFrame || 
            window.msRequestAnimationFrame) &&
            function(callback) {
              window.setTimeout(callback, 1000/1 );
            };
      })();

            window.onload = function(){
                canvas = document.getElementById('myCanvas');
                ctx = canvas.getContext('2d');
                //sciana

                for(var i = 0; i < 6; i++){

                    drawLine(i);
                }

            }
            function drawLine(a){
            var bok = 400, xw = canvas.width/2, yw = 10, odstep = 10;
            var tX = 10/Math.sqrt(3);
                ctx.rotate(Math.PI /6); //here I rotate
                ctx.save();

                for(var i = xw; i >= xw - bok/2; i-=tX){
                    var r = Math.floor( 255 * Math.random());
                    var g = Math.floor( 255 * Math.random());
                    var b = Math.floor( 255 * Math.random());   
                    ctx.translate(10/Math.sqrt(3), 10);
                    ctx.beginPath();
                    ctx.fillStyle = "rgb("+r+","+g+","+b+")";
                    ctx.arc(xw, 0, 6, 0, 2 * Math.PI, false);
                    ctx.fill(); 
                    ctx.closePath();

                }   
                ctx.restore(); 
                ctx.save();
                    for(var i = xw; i >= xw - bok/2; i-=10/Math.sqrt(3)){
                    var r = Math.floor( 255 * Math.random());
                    var g = Math.floor( 255 * Math.random());
                    var b = Math.floor( 255 * Math.random());   
                    ctx.translate(-10/Math.sqrt(3), 10);
                    ctx.beginPath();
                    ctx.fillStyle = "rgb("+r+","+g+","+b+")";
                    ctx.arc(xw, 0, 6, 0, 2 * Math.PI, false);
                    ctx.fill(); 
                    ctx.closePath();
                }   
                ctx.restore();
                ctx.save();
                xw = xw - bok/2 ;
                yw = bok*Math.sqrt(3)/2;
                for(var i = xw; i <= xw + bok; i+=10){
                    var r = Math.floor( 255 * Math.random());
                    var g = Math.floor( 255 * Math.random());
                    var b = Math.floor( 255 * Math.random());   
                    ctx.translate(10,0);
                    ctx.beginPath();
                    ctx.fillStyle = "rgb("+r+","+g+","+b+")";
                    ctx.arc(xw, yw, 6, 0, 2 * Math.PI, false);
                    ctx.fill(); 
                    ctx.closePath();
                }
                ctx.restore();
                requestAnimFrame(drawLine); 

            }
        </script>
    </head>
    <body>
        <canvas id="myCanvas" width="600" height="600" style="background-color:#D0D0D0">
            Twoja przeglądarka nie obsługuje elementu Canvas.
        </canvas>
    </body>
</html> 
```

# r - 图、线和点的便捷包装器

> ID：13027189
> 
> 赞同：0
> 
> 时间：2012-10-23T09:20:00.343
> 
> 标签：r, plot, convenience-methods

R 最让我烦恼的一件事是绘图、点和线命令的分离。如果您最初未能正确设置 ylim 和 xlim ，则必须将情节更改为第一个情节的任何变体，并且必须从头开始重新绘制，这有点令人恼火。有一个命令不是很好：

1.  通过参数选择线、点或两者，如`plot(..., type = "l")`？

2.  默认情况下，根据当前设备是否为空来选择是创建一个新的绘图，还是添加到现有的绘图。

3.  如果添加到绘图的元素超出当前范围，则自动重新缩放轴。

有没有人做过这样的事情？如果没有，并且没有充分的理由说明这是不可能的，我稍后会自己回答这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:52:34.120

一些可能有助于您想要的功能：

该`matplot`函数使用基本图形，将一步绘制多组点或线，一步确定正确的范围。

有`update`一种用于点阵图形的方法，可用于添加/更改绘图中的内容，因此会导致自动重新计算限制和轴等内容。

如果您向 ggplot2 绘图添加附加信息（使用`+`），则将重新计算自动计算的内容。

您已经找到`zoomplot`并且总是有像您一样编写自己的函数的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:15:55.823

无论如何，这就是我想出的：（它使用`zoomplot`from `TeachingDemos`）

```
 fplot <- function(x, y = NULL, type = "l", new = NULL, xlim, ylim, zoom = TRUE,...){
   require(TeachingDemos)
   if (is.null(y)){
if (length(dim(x)) == 2){
    y = x[,2]
    x = x[,1]
} else {
       y = x
       x = 1:length(y)
     } 
}

   if ( is.null(new) ){
   #determine whether to make a new plot or not
   new = FALSE
   if (is.null(recordPlot()[[1]])) new = TRUE
   }
   if (missing(xlim)) xlim = range(x)
   if (missing(ylim)) ylim = range(y)

   if (new){
   plot(x, y, type = type, xlim = xlim, ylim = ylim, ...)
   } else {
    if (type == "p"){
        points(x,y, ...)
    } else {
        lines(x,y, type = type, ...)
    }
    if (zoom){
    #rescale plot
    xcur = par("usr")[1:2]
    ycur = par("usr")[3:4]
    #shrink coordinates and pick biggest
    xcur = (xcur - mean(xcur)) /1.08 + mean(xcur)
    ycur = (ycur - mean(ycur)) /1.08 + mean(ycur)
    xlim = c(min(xlim[1], xcur[1]), max(xlim[2], xcur[2]))
    ylim = c(min(ylim[1], ycur[1]), max(ylim[2], ycur[2]))
    #zoom plot
    zoomplot(xlim, ylim)
    }
   }
 } 
```

所以你可以这样做，例如

```
dev.new()
fplot(1:4)
fplot(1:4 +1, col = 2)
fplot(0:400/100 + 1, sin(0:400/10), type = "p")
dev.new()
for (k in 1:20) fplot(sort(rnorm(20)), type = "b", new = (k==1) ) 
```

par(mfrow) 和 log 轴目前不适用于缩放，但是，这是一个开始......

# ios5 - 核心数据崩溃

> ID：13027192
> 
> 赞同：0
> 
> 时间：2012-10-23T09:20:03.817
> 
> 标签：ios5, core-data

帮助!!!我有一个一对多的关系。

为什么 [self.menu addSubMenuObject:newSubMenu] 不起作用？

```
ManagerCoreData * managerCoreData = (ManagerCoreData *)[ManagerCoreData sharedInstance];
NSManagedObjectContext * managedObjectContex = managerCoreData.managedObjectContext;
SubMenu * newSubMenu =(SubMenu*) [NSEntityDescription insertNewObjectForEntityForName:@"SubMenu" inManagedObjectContext:managedObjectContex];

[self.menu addSubMenuObject:newSubMenu];

if (newSubMenu != nil){

    newSubMenu.name = self.textFieldName.text;
    newSubMenu.cost = [NSNumber numberWithInteger:[self.textFieldCost.text integerValue]];
    newSubMenu.about = self.textFieldAbout.text;
    newSubMenu.imageOriginal = self.imageView.image;

          NSError * savingError = nil;
    if ([managedObjectContex save:&savingError]){
        [self.navigationController popViewControllerAnimated:YES];
    }else {
        NSLog(@"Failed to save manager object contex!!!Error %@",savingError);

    }
}else {
    NSLog(@"Failed to create new object!!!");
}

@class SubMenu;

@interface Menu : NSManagedObject

@property (nonatomic, retain) NSData * imageMiddle;
@property (nonatomic, retain) id imageOriginal;
@property (nonatomic, retain) NSData * imageSmall;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSSet *subMenu;

@end

@interface Menu (CoreDataGeneratedAccessors)

- (void)addSubMenuObject:(SubMenu *)value;
- (void)removeSubMenuObject:(SubMenu *)value;
- (void)addSubMenu:(NSSet *)values;
- (void)removeSubMenu:(NSSet *)values;

@end 
```

***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[SubMenu 菜单]：无法识别的选择器发送到实例 0x74caf90”

# debugging - 是否可以在 Surface RT（或其他运行 Windows RT 的 ARM 设备）上调试 Windows Store 应用程序？

> ID：13027193
> 
> 赞同：2
> 
> 时间：2012-10-23T09:20:05.757
> 
> 标签：debugging, windows-store-apps, windows-rt

我知道 Surface RT 版本只能运行 Windows Store 应用程序。那么，我可以将自己的 Windows 应用商店应用程序部署到 Surface RT 并通过 Visual Studio 2012 远程调试器对其进行调试吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:23:25.053

[这个微软文档](http://www.microsoft.com/en-us/download/details.aspx?id=30703)说你可以使用远程调试。

# c# - 如何获取当前文化或语言中某个键的字符输入？

> ID：13027194
> 
> 赞同：1
> 
> 时间：2012-10-23T09:20:08.253
> 
> 标签：c#, .net, vb.net

我正在设计一个屏幕键盘，

我想将按键字符更改为与按键后将在屏幕上打印的字符相同

即按钮A将返回英文“A”，法文“Q”

我需要一个返回字符串的函数描述结果，它的参数是关键和当前的文化

另外，如果有可能知道按下班次后会发生什么是一个很好的加分项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T07:12:50.640

我用过这段代码

```
 [DllImport("user32.dll")]
    public static extern int ToUnicode(uint virtualKeyCode, ScanCodeShort scanCode,
        byte[] keyboardState,
        [Out, MarshalAs(UnmanagedType.LPWStr, SizeConst = 64)]
StringBuilder receivingBuffer,
        int bufferSize, uint flags);

    public static string GetCharsFromKeys(ScanCodeShort keys)
    {
        var buf = new StringBuilder(256);
        var keyboardState = new byte[256];
        GetKeyState(VirtualKeyStates.VK_F3);
        GetKeyboardState(keyboardState);
        keyboardState[(int)System.Windows.Forms.Keys.ControlKey] = 0x00;
        int x = ToUnicode(MapVirtualKey(keys, 1), keys, keyboardState, buf, 256, 0);
        return buf.ToString();
    }

    [DllImport("user32.dll")]
    static extern short GetKeyState(VirtualKeyStates nVirtKey);

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool GetKeyboardState(byte[] lpKeyState); 
```

在调用阶段，我使用 GetCharsFromKeys(ScanCodeShort keys) 其中 ScanCodeShort 是扫描码，而不是虚拟码

# python - 只读取命令行参数的一部分

> ID：13027202
> 
> 赞同：1
> 
> 时间：2012-10-23T09:20:49.227
> 
> 标签：python

每当我通过命令行给出一个数字时，比如说 92，它只需要 9，完全忽略 2。但是，如果我使用 arg[1]，它将使用 2 而不是 9。 import sys

```
for arg in sys.argv:
    print arg

print ""    
print "-----"
print ""    

try:
    argNumber = int(arg[0])
except ValueError:
    argNumber = 0
    print "This is wrong"

for i in range(argNumber, 0, -1):
    print i 
```

另外，由于某种原因，我无法在除了 ValueError 之外添加打印“这是错误的”行。它给了我一个缩进错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T09:25:24.323

问题是您正在调用 int on `arg[0]`。现在，`arg`当您遍历所有参数时，初始循环剩下的就是`sys.argv`- 它是该循环的最后一个元素。所以，当你用 切片它时`[0]`，你实际上是从最后一个参数中获取第一个字符，而不是 - 正如你所期望的 - 第一个参数。

您的解决方法是简单地使用`sys.argv[1]`那里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T09:25:42.773

您正在重新使用循环变量 , `arg`，因此您正在访问`sys.argv[1]`, 而不是整个字符串的第一个字符。尝试：

```
try:
    argNumber = int(sys.argv[1])
except ValueError:
    argNumber = 0 
```

我在您的代码段中没有看到“这是错误的”行，所以我无法对此发表评论。

最后，在每行前面放置 4 个空格是目前唯一的方法。如果他们支持某种风格的代码围栏（如 GitHub），那就太好了，但他们不支持。:-(

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T09:25:53.720

循环运行后，arg 包含传递的最后一个参数的值，作为字符串。

在您的具体情况下，`arg = '92'`. 所以当你这样做时`arg[0]`，你得到`'9'`并`arg[1]`给予你`'2'`

`sys.argv[1]`在需要第一个参数的情况下使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T09:25:28.530

那是因为`arg[0]`是分配给 的字符串的第一个元素`arg`。在您的代码中，这是最后一个命令行参数。

用于`int(arg)`解决问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T09:26:40.510

在这个循环之后

```
for arg in sys.argv:
    print arg 
```

`arg`是最后一个命令行参数。它是一个字符串，因此使用 eg`arg[0]`获取该字符串中的第一个字符。

# iphone - 在 iphone 的两个视图控制器之间使用委托

> ID：13027206
> 
> 赞同：2
> 
> 时间：2012-10-23T09:21:13.180
> 
> 标签：iphone, ios, delegates, protocols

我有两个视图控制器：视图控制器和 viewcontroller2nd。我在其中一个中有 UILabel，并且希望在单击 viewcontroller2nd 中的按钮（名为 Go）时更改它。我正在使用代表和协议来做到这一点。

代码如下所示：

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "ViewController2nd.h"

@interface ViewController : UIViewController <SecondViewControllerDelegate>
{
    IBOutlet UILabel *lbl;
    ViewController2nd *secondview;

}
-(IBAction)passdata:(id)sender;

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "ViewController2nd.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(void) changeLabel:(NSString*)str{
    lbl.text = str;
}

-(IBAction)passdata:(id)sender{
    ViewController2nd *second = [[ViewController2nd alloc] initWithNibName:nil bundle:nil];
    [self presentViewController:second animated:YES completion:NULL];
}

@end 
```

Viewcontroller2nd.h

```
#import <UIKit/UIKit.h>

@protocol SecondViewControllerDelegate <NSObject>
@optional
-(void) changeLabel:(NSString*)str;
@end

@interface ViewController2nd : UIViewController{

    IBOutlet UIButton *bttn;
    id <SecondViewControllerDelegate> delegate;

}

@property (retain) id delegate;

-(IBAction)bttnclicked;
-(IBAction)back:(id)sender;
@end 
```

ViewController2nd.m

```
#import "ViewController2nd.h"
#import "ViewController.h"

@interface ViewController2nd ()

@end

@implementation ViewController2nd

@synthesize delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(IBAction)bttnclicked{
   [[self delegate] changeLabel:@"Hello"];
}

-(IBAction)back:(id)sender{
    [self dismissViewControllerAnimated:YES completion:NULL];
}

@end 
```

两个视图之间的控件传递工作正常。但是，当我单击 viewcontroller2nd 中的 go 按钮时，它不会将标签的值更改为 Hello。代码有什么问题？需要一些指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:24:52.303

看来您从未设置过委托。您可以在 passData 方法中执行此操作：

```
-(IBAction)passdata:(id)sender{
    ViewController2nd *second = [[ViewController2nd alloc] initWithNibName:nil bundle:nil];
    second.delegate = self;
    [self presentViewController:second animated:YES completion:NULL];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:28:26.807

嗯，在您的 changeLabel 委托方法中尝试以下操作：

```
-(void) changeLabel:(NSString*)str{
    lbl.text = str;
    [lbl setNeedsDisplay];
} 
```

编辑：

除此之外：您的标签是 IBOutlet，对吗？您是否在文件所有者的界面构建器中正确地将 xib 中的标签与 IBOutlet 属性（即 lbl）连接起来

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T09:37:31.423

如果您想通过使用委托来执行此操作，请更改`passdata`如下：

```
 -(IBAction)passdata:(id)sender
  {
        ViewController2nd *second = [[ViewController2nd alloc] initWithNibName:nil bundle:nil];
        [second setDelegate:self];
        [self presentViewController:second animated:YES completion:NULL];
  } 
```

您可以在没有委托的情况下执行此操作。只需在 secondView 中创建 ViewController 的对象并像这样合成它：

```
#import "ViewController.h"
@interface ViewController2nd : UIViewController
{

    IBOutlet UIButton *bttn;
    ViewController  *parent;

}

@property (nonatomic, assign) ViewController  *parent;

-(IBAction)bttnclicked;
-(IBAction)back:(id)sender;
@end 
```

并在`passdata`改变它喜欢

```
-(IBAction)passdata:(id)sender
{
    ViewController2nd *second = [[ViewController2nd alloc] initWithNibName:nil bundle:nil];
    [second setParent:self];
    [self presentViewController:second animated:YES completion:NULL];
} 
```

并改变`bttnclicked`类似：

```
-(IBAction)bttnclicked
{
   [parent changeLabel:@"Hello"];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T09:48:42.980

我为你写了以下内容！

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property (strong, nonatomic) IBOutlet UILabel *label;

@end

#import "ViewController.h"
#import "ViewController2.h"

@interface ViewController () <ViewController2Delegate>

@end

@implementation ViewController

-(void)passdata:(NSString *)data
{
    self.label.text = data;
}

- (IBAction)buttonClicked:(id)sender {
    ViewController2 *v = [[ViewController2 alloc] initWithNibName:@"ViewController2" bundle:nil];
    v.delegate = self;
    [self presentViewController:v animated:YES completion:nil];
}

@end

#import <UIKit/UIKit.h>

@protocol ViewController2Delegate <NSObject>

- (void)passdata:(NSString*)data;

@end

@interface ViewController2 : UIViewController

@property(assign, nonatomic) id<ViewController2Delegate> delegate;

@end

#import "ViewController2.h"

@interface ViewController2 ()

@end

@implementation ViewController2

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (IBAction)buttonClicked:(id)sender {
    [self.delegate passdata:@"hello"];
}

- (IBAction)backButtonClicked:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];
}

@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-11T10:19:15.807

*   您不需要在 ViewController.h 和 ViewController.m 中导入标题“ViewController2nd.h”
*   您声明了没有属性的 UILabel，例如 @property（强，非原子）。
*   可能是，您没有正确地将 UILabel 映射到您的 .storyboard 或 .xib 文件。
*   您在调用控制器时忘记分配第二个视图控制器委托

    ```
    ViewController2nd *second = [[ViewController2nd alloc] initWithNibName:nil bundle:nil];
    second.delegate = self;
    [self presentViewController:second animated:YES completion:NULL]; 
    ```

如果有人使用故事板进行视图控制器导航。

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
        if ([segue.identifier hasPrefix:@"view_to_capture"]) {
            ViewController2nd *destination = segue.destinationViewController;
            destination.delegate = self;
        }
    } 
```

# android - 释放附加到 ImageView 的位图

> ID：13027209
> 
> 赞同：1
> 
> 时间：2012-10-23T09:21:20.103
> 
> 标签：android, xamarin.android

我有一个基本活动（SherlockActivity 子类），它加载的视图有一个最大尺寸的 ImageView。

```
<LinearLayout xmlns:p1="http://schemas.android.com/apk/res/android"
    p1:orientation="vertical"
    p1:minWidth="25px"
    p1:minHeight="25px"
    p1:layout_width="fill_parent"
    p1:layout_height="fill_parent"
    p1:id="@+id/linearLayout1">
    <ImageView
        p1:src="@android:drawable/ic_menu_gallery"
        p1:layout_width="fill_parent"
        p1:layout_height="fill_parent"
        p1:id="@+id/imageView"
        p1:scaleType="fitCenter" />
</LinearLayout> 
```

Activity 唯一要做的就是加载一个 Bitmap 并将其分配给 ImageView

```
var iv = FindViewById<ImageView>(Resource.Id.imageView);
iv.SetBitmapImage(BitmapFactory.decodeFile(file....)) 
```

在我弄清楚如何在加载时调整位图大小（[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)）之前，每次加载活动时都会消耗 5MB 的内存，直到应用程序崩溃（现在没有，但我认为这个问题仍然存在）。即使我这样做：

*   在家长活动中，点击按钮打开孩子
*   在孩子（上面的图像视图）点击返回
*   在父母，打开孩子
*   在孩子中，点击返回
*   等等等等，直到它崩溃（大约 4 次，因为每次都是 5MB！）

**所以实际问题：当活动停止或被销毁时，我是否应该处理图像？我认为在 Java 或 C# 中，事情是经过 GC 处理的，所以我不需要这样做。我在 Activity 生命周期中遗漏了什么吗？**

**两位答案作者最终都提出了正确的答案（GC 做到了，但您可以使用 recycle() 强制它。因此，将答案中包含它的那个标记为正确，以便其他人更容易找到**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T09:30:06.907

尝试调用`recycle()`位图。

[http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:27:55.137

加载大位图可能会导致 OutOfMemoryError。您可以在将图像加载到您的应用程序之前缩小图像；这将消耗更少的内存。你可以看这里：[https ://stackoverflow.com/a/13011614/1117338](https://stackoverflow.com/a/13011614/1117338)

# c# - vs10 c#函数点击后运行

> ID：13027210
> 
> 赞同：-2
> 
> 时间：2012-10-23T09:21:21.573
> 
> 标签：c#, winforms

我想让功能工作：

> int a = Convert.ToInt32(tb[0].Text);

我点击后：

> 按钮1

单击按钮 1 后如何更新文本框值？

```
//My Code  
    private void somefunction(){
    TextBox[] tb = new TextBox[2];
    for (int i = 0; i <= 1; i++)
    {
    tb[i] = new TextBox();
    tb[i].Name = "textBox" + i;
    tb[i].Location = new Point(50 * i, 10);
    tb[i].Size = new System.Drawing.Size(20, 15);
    this.Controls.Add(tb[i]);     
    }

    //this code is static, how to make it update on click?
    int a, b;           
    a = Convert.ToInt32(tb[0].Text);
    b = Convert.ToInt32(tb[1].Text);
    }
// click event
    private void button1_Click(object sender, EventArgs e){} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:30:03.550

```
public partial class Form1 : Form
{

    TextBox[] tb;

    public Form1()
    {
        InitializeComponent();
        tb = new TextBox[2];
        //...
    }

    private void button1_Click(object sender, EventArgs e)
    {
        int a = Convert.ToInt32(tb[0].Text);
    }
} 
```

# c++ - Windows 7操作系统中windows任务管理器中的哪些指标可用于查找内存泄漏？

> ID：13027213
> 
> 赞同：0
> 
> 时间：2012-10-23T09:21:25.920
> 
> 标签：c++, c, visual-c++

我想通过观察“Windows 任务管理器”进程选项卡来发现 C++ 程序的内存泄漏（使用 Windows 7 操作系统）以逐渐增加内存。我很困惑，因为我在下面的“Windows 任务管理器”进程选项卡中看到了很多与内存相关的列。内存 - 工作集内存 - 工作集增量内存 - 私有工作集内存 - 提交大小内存 - 分页池内存 - 非分页池

我在网上搜索了与此相关的主题，但我无法得到满意的答案。

请让我知道我应该使用哪个指标来检查内存增加，以便我可以确定我的 C++ 代码\进程是否存在内存泄漏。

仅供参考我的限制是；我不能使用任何分析工具或静态代码分析器工具，只能在系统上访问 Windows 任务管理器来查找内存泄漏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:46:15.727

正如其他海报所说，缓慢增加和小幅增加并不*一定*表明有问题。

但是，如果您有一个长时间运行的进程，它慢慢消耗的内存比理论上应该需要的多得多（或者已经在类似使用场景下的健康版本的组件中进行了测量），那么您**可能**存在内存泄漏。我首先注意到其他人报告组件使用千兆字节内存的问题（通常使用大约 2-3MB）。如果您想查看进程内存的长期视图，Perfmon 很有用。您可以按名称选择进程，然后选择私有字节度量，并设置时间和网格以测量（比如说）24 小时。

一旦您确定进程内存明显增加，您可以使用调试器、Valgrind、Parasoft、Glow Code 等工具来确保您看到的是真正的内存泄漏。但是，即使它不是真正的内存泄漏（未引用的堆内存），如果您的内存使用量不断增加，您仍然需要重新设计您的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:19:58.843

为了确认您对泄漏部分的怀疑，您可以以 Perfmon 内存分析为例 -

> Private Bytes 是可执行文件正在使用的内存量的合理近似值，可用于帮助缩小内存泄漏的潜在候选者列表；如果您看到这个数字不断增长且无休止地增长，您会想要检查该过程是否存在泄漏。但是，这不能证明存在或不存在泄漏。

有关详细信息，请参阅 -[什么是私有字节、虚拟字节、工作集？](https://stackoverflow.com/questions/1984186/what-is-private-bytes-virtual-bytes-working-set)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:25:14.007

简短的回答：这是不可能的。

只看任务管理器，没有足够的可用数据。内存泄漏通常是仍然分配但不再使用的内存；然而，对于任务管理器来说，它看起来好像该进程仍然会使用该内存（并且它无法找出）。您可能会注意到内存使用量的持续增加，但这只是*可能*存在内存泄漏的一个指标 - 也可能是程序确实使用了该内存（或保留该内存以备将来使用，例如因为它使用自己的内存）内存管理）。如果不使用其他工具，您将无法知道。

# java - @ManyToOne JPA 关联的 CascadeType.ALL 是什么意思

> ID：13027214
> 
> 赞同：272
> 
> 时间：2012-10-23T09:21:28.307
> 
> 标签：java, jpa, one-to-many, cascade, many-to-one

我想我误解了在关系中级联的含义`@ManyToOne`。

案子：

```
public class User {

   @OneToMany(fetch = FetchType.EAGER)
   protected Set<Address> userAddresses;

}

public class Address {

   @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
   protected User addressOwner;

} 
```

的含义是`cascade = CascadeType.ALL`什么？例如，如果我从数据库中删除某个地址，我添加的事实如何`cascade = CascadeType.ALL`影响我的数据（`User`我猜是）？

* * *

## 回答 #1

> 赞同：429
> 
> 时间：2012-10-23T09:33:44.997

的含义`CascadeType.ALL`是持久性将传播（级联）所有`EntityManager`操作（`PERSIST, REMOVE, REFRESH, MERGE, DETACH`）到相关实体。

在您的情况下，这似乎是一个坏主意，因为删除 an`Address`会导致删除相关的`User`. 由于用户可以拥有多个地址，因此其他地址将成为孤立地址。但是，相反的情况（注释`User`）将有意义 - 如果地址仅属于单个用户，则在删除该用户时传播属于该用户的所有地址的删除是安全的。

顺便说一句：您可能希望向`mappedBy="addressOwner"`您添加一个属性，`User`以向持久性提供程序发出连接列应该在 ADDRESS 表中的信号。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2017-08-10T12:14:15.433

你不应该使用`CascadeType.ALL`on`@ManyToOne`因为实体状态转换应该从父实体传播到子实体，而不是相反。

`@ManyToOne`侧面始终是子关联，因为它映射了基础外键列。

因此，您应该将关联`CascadeType.ALL`从`@ManyToOne`关联移到`@OneToMany`一边，这也应该使用`mappedBy`属性，因为它是最有效的一对多表关系映射。

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2012-10-23T09:27:27.393

[请参阅此处](http://openjpa.apache.org/builds/2.4.0/apache-openjpa/docs/jpa_overview_meta_field.html#jpa_overview_meta_cascade)以获取 OpenJPA 文档中的示例。`CascadeType.ALL`意味着它将执行所有操作。

引用：

> CascadeType.PERSIST：当持久化一个实体时，也持久化其字段中持有的实体。我们建议自由应用此级联规则，因为如果 EntityManager 在刷新期间发现一个引用新实体的字段，并且该字段不使用 CascadeType.PERSIST，则这是一个错误。
> 
> CascadeType.REMOVE：删除实体时，也会删除该字段中持有的实体。
> 
> CascadeType.REFRESH：刷新实体时，也刷新该字段中持有的实体。
> 
> CascadeType.MERGE：合并实体状态时，也合并该字段中持有的实体。

塞巴斯蒂安

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2012-10-23T09:32:59.413

[来自 EJB3.0 规范](http://download.oracle.com/otn-pub/jcp/ejb-3_0-fr-eval-oth-JSpec/ejb-3_0-fr-spec-persistence.pdf)：

> 级联注释元素的使用可用于将操作的效果传播到关联实体。级联功能最常用于父子关系。
> 
> 如果 X 是受管实体，则移除操作会导致它被移除。如果从 X 到这些其他实体的关系使用 cascade=REMOVE 或 cascade=ALL 注释元素值进行注释，则删除操作将级联到 X 引用的实体。

所以简而言之，定义的实体关系`CascadeType.All`将确保所有发生在父级上的持久性事件，例如持久化、刷新、合并和删除，都将传递给子级。定义其他`CascadeType`选项为开发人员提供了对实体关联如何处理持久性的更细粒度的控制。

例如，如果我有一个包含页面列表的对象 Book，并且我在此列表中添加了一个页面对象。如果`@OneToMany`定义 Book 和 Page 之间关联的注释标记为`CascadeType.All`，则持久化 Book 将导致 Page 也被持久化到数据库中。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-08-06T08:55:17.383

在 JPA 2.0 中，如果您想删除从用户实体中删除的地址，您可以添加`orphanRemoval=true`（而不是`CascadeType.REMOVE`）到您的`@OneToMany`.

`orphanRemoval=true`和`CascadeType.REMOVE`之间的更多解释在[这里](http://www.objectdb.com/java/jpa/persistence/delete#Orphan_Removal)。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-01-19T18:32:04.433

如果您只想删除分配给用户的地址而不影响用户实体类，您应该尝试以下操作：

```
@Entity
public class User {
   @OneToMany(mappedBy = "addressOwner", cascade = CascadeType.ALL)
   protected Set<Address> userAddresses = new HashSet<>();
}

@Entity 
public class Addresses {
   @ManyToOne(cascade = CascadeType.REFRESH) @JoinColumn(name = "user_id")
   protected User addressOwner;
} 
```

这样你就不用担心在注解中使用 fetch 了。但请记住，在删除用户时，您还将删除连接到用户对象的地址。

# javascript - 谷歌分析代码不起作用

> ID：13027216
> 
> 赞同：0
> 
> 时间：2012-10-23T09:21:33.233
> 
> 标签：javascript, html, google-analytics

此 Google Analytics（分析）代码不起作用。我看不到任何访客，也没有触发事件。有任何想法吗？谢谢。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
<!-- <META HTTP-EQUIV="Refresh" CONTENT="2;URL=http://www.example.com"> -->
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Example</title>
<script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-99999999-1']); // Hidden my real one
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</head>

<body>
<script type="text/javascript">
_gaq.push(['_trackEvent', 'My Event', 'Hypothesis', 'Email', 1]);

window.location = "http://www.example.com";

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:30:53.100

Analytics 代码大约需要 2-3 小时才能在 Analytics 上显示，如果是第一次显示，则需要更长的时间。等待延迟，我敢打赌它会出现:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:36:19.270

通常，Analytics 需要一些时间来获得第一个测量值。[不过，您可以使用Chrome 的 GADebug 扩展程序](https://chrome.google.com/webstore/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna)测试您的跟踪代码。它将在 Chrome 控制台中显示有关您的设置和触发事件的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:03:59.353

谷歌分析通过从分析服务器发出跟踪像素请求来记录数据。如果您在`window.location`跟踪像素请求完成之前加载另一个页面（通过在代码中进行设置），您可能会收到不完整或没有数据的风险。此外，由于您使用的是异步跟踪，因此您可能会在`_gaq`处理任何请求之前离开页面。

以下代码集的 window.location 通过 _gaq 命令（确保分析代码已加载并已处理其他命令），并延迟 150 毫秒（以允许跟踪像素请求完成）。

```
_gaq.push(function() {
  setTimeout(function(){ window.location = "http://www.example.com"}, 150);
}); 
```

# sql-server-2008 - SQL Server 2008 - 插入行时使用 IDENTITY 字段

> ID：13027217
> 
> 赞同：1
> 
> 时间：2012-10-23T09:21:33.077
> 
> 标签：sql-server-2008, tsql

我的表有 3 列`ID`，`ISOCode`并且`CountryName`.

列`ID`是一个 IDENTITY 列。

当我将新记录插入此表时，我想填充该`ISOCode`字段 - 有时 - 使用与该字段相同的值`ID`。

我已经尝试过 SCOPE_IDENTITY()、@@IDENTITY 和 IDENT_CURRENT，但这些似乎都不起作用。

有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:26:22.257

您可以编写一个触发器来更新 ISOCode 列

在触发器中使用下面的代码

```
update T set T.ISOCode=I.ID
from your_table T
join INSERTED I
on T.ID=I.ID 
```

# php - 用 PHP 显示 JSON

> ID：13027218
> 
> 赞同：0
> 
> 时间：2012-10-23T09:21:54.873
> 
> 标签：php, json

我早些时候发布了这个问题，但需要澄清很多事情以使每个人都更容易。我正在尝试使用 JSON 输出它，但我所做的一切似乎都没有奏效......

```
{
  "request": {
    "act": "user_create",
    "user_email": "newuser@example.com",
    "user_zone": "example.com"
  },
  "result": "success",
  "msg": "A message that will be displayed to the end user"
  ...
} 
```

这是我目前正在使用的代码：

```
<?php
    $array[0]=array("request"=>array("act"=>'user_create', 
                                     "user_email"=>"newuser@example.com", 
                                     "user_zone"=>"example.com"));
    $array[1]=array('result' => 'success');
    $array[2]=array('msg' => 'A message that will be displayed to the end user');
    echo json_encode($array);
?> 
```

使用该代码，我得到的输出很接近但不完全存在，并且不是有效的 json 输出。不知道要改变什么，但这是我目前得到的：

```
[{"request":{"act":"user_create","user_email":"newuser@example.com","user_zone":"example.com"}},{"result":"success"},{"msg":"A message that will be displayed to the end user"}] 
```

如果有人可以请发布我的固定 PHP 代码的示例，那将是很棒的。在过去的几个小时里，我一直在反复测试不同的解决方案，但似乎没有什么能准确显示我需要的东西：/提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:24:50.673

试试那个..

```
 $array = array(
    "request" => array(
        "act"=>"user_create",
        "user_email"=>"newuser@example.com",
        "user_zone"=>"example.com"
        ),
    "result"=>"success",
    "msg"=>"A message that will be displayed to the end user"
    );
    echo json_encode($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:17:00.230

```
$array = array(
"key1" => array(
    "innerkey1"=>"innerkeyvalue1",
    "innerkey2"=>"innerkeyvalue2",
    "innerkey3"=>"innerkeyvalue3"
    ),
"key2"=>"value2",
"key3"=>"value3"
);
echo json_encode($array); 
```

在这里查看更多[jsone_encode](http://www.php.net/manual/en/function.json-encode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:37:05.497

这是有效的。每当以 JSON 格式启动数组时，在 PHP 中创建数组。

```
 $array = array( // "request" array
    "request" => array( // inner array
        "act"=>"user_create",
        "user_email"=>"newuser@example.com",
        "user_zone"=>"example.com"
        ),
    "result"=>"success",
    "msg"=>"A message that will be displayed to the end user"
    );
    echo json_encode($array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:24:51.863

```
<?php
    $array["request"]=array("act"=>'user_create', 
                                     "user_email"=>"newuser@example.com", 
                                     "user_zone"=>"example.com");
    $array["result"] = 'success';
    $array["msg"] = 'A message that will be displayed to the end user';
    echo json_encode($array);
?> 
```

这应该适合你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T09:25:07.517

```
$array = array(
  "request" => array(
    "act"        => "user_create",
    "user_email" => "newuser@example.com",
    "user_zone"  => "example.com"
  ),
  "result" => "success",
  "msg"    => "A message that will be displayed to the end user"
  ...
); 
```

只需更改every `{}`to`array()`和every `:`to 就`=>`可以在PHP 语法中得到相同的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T09:26:18.480

```
<?php
    $array[0]["request"] = array(
         "act"        => 'user_create', 
         "user_email" => "newuser@example.com", 
         "user_zone"  => "example.com")
    );
    $array[0]['result'] = 'success';
    $array[0]['msg'] = 'A message that will be displayed to the end user';

    ... etc. for other requests and results and msgs

    echo json_encode($array);
?> 
```

# javascript - JavaScript attr('id') 和 this

> ID：13027221
> 
> 赞同：0
> 
> 时间：2012-10-23T09:21:56.667
> 
> 标签：javascript, jquery

所以我在 JavaScript 方面不是很擅长，但我有点坚持：

所以，我得到了这个：

```
$(".post-click").click(function()
{
var classid = $(this).attr('id');
var postid = $(this).attr('id');
postid = postid.replace('post-click-id_', '');

alert("ID: " + classid + " PostID: " + postid);

$(this).replaceWith('<img SRC="assets/img/refresh.gif" ALT="" >');

$.post("likepost.php", { postid: postid } , function(data)
{
    if(data.indexOf("Yes") >= 0)
    {
        //Question is about this part
    }
    else
    {
        //Question is about this part
    }

});
}); 
```

现在，在那个“是”或其他部分：我该怎么做才能用 替换`$(this)`数据`replaceWith`？我以为我可以做到这一点`classid`，但我不确定如何做到这一点。我想过这个：

```
$(classid).replaceWith('Yes, yes indeed.');
$(classid).replaceWith('Nope.'); 
```

我将如何进行这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:24:49.640

假设我已经正确理解了这个问题并且您正在尝试替换回调中的单击元素`$.post`，那么最简单的做法是在回调之外维护对该元素的引用。这使您不必再次遍历 DOM 以重新选择您已经选择过一次的元素：

```
var clicked = $(this);
$.post("likepost.php", { postid: postid } , function(data) {
    if(data.indexOf("Yes") >= 0) {
        clicked.replaceWith("Yes");
    } else {
        clicked.replaceWith("No");
    }
}); 
```

您当前的尝试不起作用，因为`classid`它只是一个表示`id`属性值的字符串。要从中创建 jQuery 对象，您需要将其附加到“#”以生成有效的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:28:52.753

不要使用 ids 来查找您刚刚拥有的元素（如`$("#"+$(this).attr('id'))`），而是直接使用它：`$(this)`. 随着[`this`引用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)从函数调用更改为函数调用（在您的 ajax 回调中有所不同），您需要将其缓存在变量中。

```
$(".post-click").click(function() {
    var loadImg = $('<img SRC="assets/img/refresh.gif" ALT="" >');
    $(this).replaceWith(loadImg);

    var toReplace = loadImg; // could be $(this) if you hadn't replaced it already

    $.post("likepost.php", { postid: postid } , function(data) {
        toReplace.replaceWith( data.indexOf("Yes") >= 0
           ? "success"
           : "failed"
        );
    });
}); 
```

# java - JButton：图标左对齐，文本右对齐

> ID：13027223
> 
> 赞同：3
> 
> 时间：2012-10-23T09:22:05.543
> 
> 标签：java, swing, icons, alignment, jbutton

我正在尝试创建一个`JButton`带有图标和一些文本的图标。我的问题是我希望图标左对齐而文本右对齐（不一定要右对齐，但我不希望文本粘在图标上）。

我自己无法做到这一点，我尝试了一个稍微不同的解决方案。我用`iconTextGap`来在图标和文本之间创建一些空间，原则上效果很好，但是当我创建多个按钮时，它们的宽度都是最宽的，图标不再位于最左边（除了文本最长的按钮）。

我包含了一个代码来证明：

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.io.File;
import java.net.MalformedURLException;

import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingConstants;

public class Main{

 private JFrame frame;
 private JPanel buttonPanel;
 private GridBagConstraints constraints;

 public Main() throws MalformedURLException{

    frame = new JFrame();

    buttonPanel = new JPanel();
    frame.add(buttonPanel);

    buttonPanel.setLayout(new GridBagLayout());
    constraints = new GridBagConstraints();

    constraints.insets = new Insets(5, 5, 3, 5);
    constraints.fill = GridBagConstraints.HORIZONTAL;
    constraints.gridx = 0;
    constraints.gridy = 0;

    String[] text = { "some Text", "this text is longer" };

    for (int i = 0; i < text.length; i++) {
        JButton button= new JButton(text[i], new ImageIcon(new File("icon.png").toURI().toURL()));
        button.setAlignmentX(SwingConstants.WEST);
        button.setIconTextGap(30);
        button.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 10));

        buttonPanel.add(button, constraints);
        constraints.gridy++;
    }

    frame.pack();
    frame.setVisible(true);

}

 public static void main(String[] args){
    try {
        new Main();
    } catch (Exception e) {
        e.printStackTrace();
    }
 }

} 
```

有谁知道将图标放在左端并在图标和文本（或文本右对齐）之间留出一些空间的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T09:30:42.693

看看[JButton#setHorizo​​ntalTextPosition](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setHorizontalTextPosition%28int%29)和[JButton#setHorizo​​ntalAlignment](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setHorizontalAlignment%28int%29)

仅仅因为它可能会有所帮助[JButton#setVerticalTextPosition](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setVerticalTextPosition%28int%29)和[JButton#setVerticalAlignment](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setVerticalAlignment%28int%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:33:07.747

此问题的经典解决方案是使用具有允许对齐组件的布局的附加面板，例如`BorderLayout`. 然后将按钮和标签放入其中，并具有相应的布局对齐方式。打包或验证框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T07:13:21.590

尝试在按钮属性中将边距设置为小于默认值，然后将 iconTextGap 设置为最右边的水平位置

# mysql - 自定义字段/属性模型

> ID：13027227
> 
> 赞同：3
> 
> 时间：2012-10-23T09:22:21.693
> 
> 标签：mysql, sql

我需要在预订软件中实现自定义字段。我需要扩展一些表，例如，包含具有动态属性的用户组。

而且，每个产品都可以有自定义字段的产品表（理想情况下，这些字段可以嵌套）。

我已经对 EAV 进行了一些搜索，但我读到了很多负面评论，所以我想知道哪种设计用于此类事情。

我了解使用 EAV 会导致许多连接对产品页面进行排序，但我不想在每次创建属性时更改组/产品表。

注意：我使用 Innodb

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:40:41.553

我正在开发一个完全基于 EAV 的项目。我同意 EAV 使事情变得复杂和缓慢，但它有其自身的优势，例如我们不需要更改数据库结构或添加新属性的代码，并且我们可以在数据库表中的数据之间建立层次结构。

如果我们在所有地方都使用 EAV，系统可能会变得非常慢。

但是，如果使用得当，Eav 非常有用。我永远不会基于 EAV 设计我的整个数据库。我将划分常用和有用的属性并将它们放在平面表中，而对于附加属性（可能需要根据客户或各种要求进行更改），我将使用 EAV。

通过这种方式，我们可以拥有 EAV 的优势，其中包括您想要的灵活性，而不会遇到太多麻烦。

这只是我的建议，可能有更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T09:32:44.170

唯一好的解决方案几乎是您不想做的事情，每次创建属性时都更改组/产品表。是的，这很痛苦，但它会保证数据的完整性和更好的性能。

如果您不想这样做，您可以使用 创建一个表`TableName, FieldName, ID and value`，并按住让我们说：

> TableName='Customer'，FieldName='Address'，ID =1（客户ID），Value ='customers address'

但正如你所说，它需要大量的连接。我认为这不是一个好的解决方案，我已经看过但不会真正推荐它。只是展示，因为它是一种可能的解决方案。

另一种解决方案是在您的表上添加几个预定义的列`column1, column2, column3`，等等，并根据需要使用它们。这是一个和前一个一样糟糕的解决方案，但我见过使用它的主要 ERP。

伙计，根据经验，您在该领域发现的任何东西都将是一项巨大的工作，不值得实施，您必须维护它的头痛将比将字段添加到表中更大。保持简单和正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:34:40.680

您可以通过添加至少 2 个以上的表来做到这一点。一个表将包含属性唯一键 (attr_id) 和属性值，例如属性名称和业务逻辑所需的其他内容。

第二个表将作为您的产品表和属性表之间的连接，并且应该具有以下字段：

```
(id, product_id, attr_id) 
```

这样，您可以根据需要添加任意数量的动态属性，并且您的数据库模式将是未来的证明。

现在查询的唯一缺点将必须添加另外 2 个要连接的表。

# c# - c# 中的 return (Object) null 是什么意思？

> ID：13027231
> 
> 赞同：3
> 
> 时间：2012-10-23T09:22:33.977
> 
> 标签：c#, return

C# 新手，我正在查看一些具有以下返回语句的代码：

```
return (Object) null 
```

这在 C# 中是什么意思，将返回什么？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T09:27:59.240

我能想到的唯一需要这样做的地方是编译器无法推断返回类型的匿名方法。

例如，

```
var boxedThings = strings.Select(s =>
{
    int i;
    if (int.TryParse(s, out i))
        return i;
    double d;
    if (double.TryParse(s, out d))
        return d;
    return (object)null;
}); 
```

没有`(object)`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T09:23:59.350

绝对等于`return null`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T09:34:32.373

您正在投射一个具有空值的对象。

# objective-c - NSDate 比较无法正常工作

> ID：13027232
> 
> 赞同：1
> 
> 时间：2012-10-23T09:22:41.177
> 
> 标签：objective-c, ios, nsdate

我已经阅读了关于这个主题的所有问题和答案以及所有教程，但由于某种原因，它对我不起作用。总是告诉我这两个日期是同一个日期！

请有人帮我弄清楚，我只想检查一个是否比另一个大（包括日期和时间 - 不包括秒）或者它们是否相等。

这是我的代码：

```
- (BOOL)isEndDateIsBiggerThanCurrectDate:(NSDate *)checkEndDate
{
    NSString *endd = [NSDateFormatter localizedStringFromDate:checkEndDate
                                                      dateStyle:NSDateFormatterShortStyle
                                                      timeStyle:NSDateFormatterShortStyle];

    NSString *curreeeent = [NSDateFormatter localizedStringFromDate:[NSDate date]
                                                      dateStyle:NSDateFormatterShortStyle
                                                      timeStyle:NSDateFormatterShortStyle];

    NSDateFormatter * df = [[NSDateFormatter alloc]init];;

    NSDate * newCurrent = [df dateFromString:endd];
    NSDate * newEnd = [df dateFromString:curreeeent];

    switch ([newCurrent compare:newEnd])
    {
        case NSOrderedAscending:
            return YES;
            break;
        case NSOrderedSame:
            return NO;
            break;
        case NSOrderedDescending:
            return NO;
            break;
    }
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:05:09.460

为此，您必须使用[NSCalender](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html)。

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSInteger desiredComponents = (NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit);

NSDateComponents *firstComponents = [calendar components:desiredComponents fromDate:[NSDate date]];
NSDateComponents *secondComponents = [calendar components:desiredComponents fromDate: checkEndDate];

NSDate *first = [calendar dateFromComponents:firstComponents];
NSDate *second = [calendar dateFromComponents:secondComponents];

NSComparisonResult result = [first compare:second];
if (result == NSOrderedAscending) {
    //checkEndDate is before now
} else if (result == NSOrderedDescending) {
    //checkEndDate is after now
}  else {
    //both are same
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:30:59.913

您真的应该使用时间间隔，而不是在日期和字符串之间进行转换。

以下内容应该适合您的需求：

```
//current time
NSDate *now = [NSDate date];

//time in the future
NSDate *distantFuture = [NSDate distantFuture];

//gather time interval
if([now timeIntervalSinceDate:distantFuture] > 0)
{
    //huzzah!
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:54:36.087

我得到了答案，只需检查两个日期之间的确切时间并进行比较。

```
- (BOOL)isEndDateIsSmallerThanCurrent:(NSDate *)checkEndDate
{
    NSDate* enddate = checkEndDate;
    NSDate* currentdate = [NSDate date];
    NSTimeInterval distanceBetweenDates = [enddate timeIntervalSinceDate:currentdate];
    double secondsInMinute = 60;
    NSInteger secondsBetweenDates = distanceBetweenDates / secondsInMinute;

    if (secondsBetweenDates == 0)
        return YES;
    else if (secondsBetweenDates < 0)
        return YES;
    else
        return NO;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-23T09:28:43.487

为什么不将日期更改为自 1970 年以来的时间间隔并按此排序。非常简单的数字比较，比字符串比较快得多，而且它们总是排序正确，不像 1,10,11,2,21,22,3,....

```
NSDate *now = [NSDate date];
NSTimeInterval ti = [now timeIntervalSince1970]; 
```

而已。没有新的对象创建，速度更快，对 CPU 的负担也更少。

看这里你如何摆脱秒，但这很容易，因为你有数字，秒。请参阅此处[如何将 NSDate 的秒数设置为零](https://stackoverflow.com/questions/1525825/set-seconds-to-zero-for-nsdate)

# iphone - iAd 不隐藏

> ID：13027233
> 
> 赞同：0
> 
> 时间：2012-10-23T09:22:43.017
> 
> 标签：iphone, hide, iad

我在 ADBannerView 的屏幕底部有 IBOutlet，当它显示白屏（无法​​加载广告）时，我不会隐藏它。

我有这个代码，但它不工作：

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    [UIView beginAnimations:@"showAd" context:nil];

    CGRect adBannerViewFrame = [bannerView frame];
    adBannerViewFrame.origin.x = 160;
    adBannerViewFrame.origin.y = 523;

    bannerView.frame = adBannerViewFrame;

    [UIView commitAnimations];
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    [UIView beginAnimations:@"hideAd" context:nil];

    CGRect adBannerViewFrame = [bannerView frame];
    adBannerViewFrame.origin.x = 0;
    adBannerViewFrame.origin.y = 0;

    bannerView.frame = adBannerViewFrame;

    [UIView commitAnimations];
} 
```

你能帮我吗，我在过去两个小时里一直在努力……：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:03:07.147

你应该尝试这样的事情（这是来自一个现场项目）。iAd 横幅位于屏幕底部，当它变得不可见时它会下降，当它必须可见时它会重新出现。

这`_isiADBannerVisible`只是一个简单的`Boolean`变量。

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner {
    if (_isiADBannerVisible == false) {
         _isiADBannerVisible = true;

         [UIView animateWithDuration:0.5f delay:0.f options:UIViewAnimationCurveEaseInOut animations:^{
             [banner setFrame:CGRectOffset(banner.frame, 0.f, -50.f)];
         } completion:nil];
    }
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {
    if (_isiADBannerVisible == true) {
         _isiADBannerVisible = false;

         [UIView animateWithDuration:0.5f delay:0.f options:UIViewAnimationCurveEaseInOut animations:^{
             [banner setFrame:CGRectOffset(banner.frame, 0.f, +50.f)];
         } completion:nil];

    }
} 
```

# aloha-editor - Aloha 工具栏，添加不会导致文本选择丢失的小部件

> ID：13027234
> 
> 赞同：0
> 
> 时间：2012-10-23T09:22:43.873
> 
> 标签：aloha-editor

Aloha 将 mousedown、blur、... 处理程序添加到文档正文，以识别工具栏何时显示/隐藏并且应更改文档选择。现在我有一个插件（一个 ColorPicker），它将自身附加到文档正文中。因此，当我单击元素时，aloha 会识别出未选择可编辑元素并隐藏工具栏。

我找到了两种防止这种情况的方法，而且看起来都很脏。

1.  捕获 mousedown 处理程序，而不是将它们提升为文档正文。

    这很糟糕，因为插件也需要这个点击处理程序。

2.  将类“aloha-dialog”添加到编辑器

    Aloha 似乎以不同的方式对待具有此类的元素。但是，如果没有正确隐藏，这似乎会破坏一些实习生功能。

那么我是否错过了一些功能，或者这还没有被标准功能处理？

BR，斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:15:00.703

Aloha 在工具栏上使用 Surface.trackRange，因此工具栏中的单击（在可编辑之外）不会隐藏它。

例如：

```
Aloha.require(['aloha/jquery', 'ui/surface'], function ($, Surface) {
     Surface.trackRange($('#color-picker'));
}); 
```

# java - 在 gcm 中向多个设备发送消息

> ID：13027235
> 
> 赞同：0
> 
> 时间：2012-10-23T09:22:44.367
> 
> 标签：java, android, google-cloud-messaging

我需要检查我的 java 应用程序将消息发送到 GCM 所花费的时间。
我的 android 应用程序（模拟器）有七个 reg id。
我需要检查为一条消息发送 700 台设备所花费的时间。
我在一个数组中给出了相同的 7 reg id 100 次以发送 gcm。总时间只花了3秒。
即使对于 100 台设备，我也在同一时间（3 秒）。
对于任意数量的设备，GCM 是否需要相同的时间？
还是
我做错了？

# java - Java 正则表达式如何匹配非子序列字符串？

> ID：13027237
> 
> 赞同：0
> 
> 时间：2012-10-23T09:22:46.450
> 
> 标签：java, regex, match

例子：

```
String url = "http://www.google.com/abcd.jpg";
String url2 = "http://www.google.com/abcd.jpg_xxx.jpg"; 
```

我想匹配“http://www.google.com/abcd”任何 url 或 url2。

我写了一个正则表达式：

```
(http://.*\.com/[^(.jpg)]*).jpg 
```

但`[^(.jpg)]*`不喜欢正确。正则表达式应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:43:23.083

勉强量词`.*?`匹配第一个“.jpg”：

```
(http:\/\/.*\.com\/.*?)\.jpg.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:34:57.803

正斜杠也需要转义。使用这个正则表达式：

```
^(http:\/\/.+?\.com\/[^.]+)\.jpg 
```

[**现场演示**](http://www.rubular.com/r/cxgCHLDNAr)

# java - 如何将字符串传递到管道并使用流程构建器打印响应

> ID：13027238
> 
> 赞同：0
> 
> 时间：2012-10-23T09:22:50.037
> 
> 标签：java, stream, pipe

这是我试图开始工作的一些代码。基本上我需要保持进程打开，并在单个会话中为其提供新命令。一旦发出“退出”字符串命令，该过程应该完成。感谢帮助....

```
Process process;
ArrayList<String>command;
ProcessBuilder builder;
Map<String, String> environ;
BufferedWriter bw;
BufferedReader br;
BufferedReader buffErrorStreamReader;

....

 try
    {
    command = new ArrayList<String>();
    command.add("cmd.exe");
    command.add("/c");
    //command.add(currentLine);

    builder = new ProcessBuilder(command);
    environ = builder.environment();

    builder.directory(new File("C://"));
    process = builder.start();

    }catch(Exception e)
          {
          System.out.println(e);
          }

    //Get a System.in Stream
    OutputStream output = process.getOutputStream();
    OutputStreamWriter osw = new OutputStreamWriter(output);
    bw = new BufferedWriter(osw);

    //Get a System.out Stream
    InputStream is = process.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    br = new BufferedReader(isr);

    //Get a System.err Stream
    InputStream errorStream = process.getErrorStream();
    InputStreamReader errorStreamReader = new InputStreamReader(errorStream);
    buffErrorStreamReader = new BufferedReader(errorStreamReader);

....

//Read the command from my text component terminal
String currentLine = getCurrentLine();

    ///pass command to pipe input 
    bw.write(currentLine);
    System.out.println("wrote: "+currentLine);

    ///print response 
     String line;
    while ((line = br.readLine()) != null) 
    {
      System.out.println(line);
      //term.println(line);    
    }

    ///print any error response
    String errorLine;
    while ((errorLine = buffErrorStreamReader.readLine()) != null) 
    {
      System.out.println(errorLine);
      //term.println(errorLine);    
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:30:22.260

这是我的终端的代码，分为两部分。我正在谈论的代码位于 VK.ENTER 键的 switch 语句中。

注意。如果您要更改目录，它将仅适用于绝对路径。例如，用户目录中的“cd C://Users/Aubrey/”不是“cd /Aubrey”！！！

```
/*
 * Terminal.java - A convienence console.
 * 
 * http://www.splashportal.net
 * 30/09/2012
 */
package terminal;

import java.awt.*;
import java.awt.event.*;
import java.io.BufferedReader;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintStream;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.Map;
import javax.swing.JScrollPane;
public class Terminal extends Canvas
{
static final long serialVersionUID = 5479170142892558288L;

public static int WIDTH = 80, HEIGHT = 200;
static Process process;

public static final Color
    WHITE       = new Color(0xffffff),
    RED         = new Color(0xff0000),
    GREEN       = new Color(0x00cc00),
    BROWN       = new Color(0x996600),
    BLUE        = new Color(0x0000ff),
    DARK_GREEN  = new Color(0x009900),
    DARK_BLUE   = new Color(0x000099),
    LIGHT_GREY  = new Color(0x999999),
    DARK_GREY   = new Color(0x666666),
    CYAN        = new Color(0x00ffff),
    DARK_CYAN   = new Color(0x009999),
    DARK_YELLOW = new Color(0x999900),
    MAGENTA     = new Color(0xff00ff),
    YELLOW      = new Color(0xffff00),
    PURPLE      = new Color(0x990099),
    BLACK       = new Color(0x000000);

private static final Color[] COLORS = {
        WHITE           ,  // 0 @
        RED             ,  // 1 A
        GREEN           ,  // 2 B
        BROWN           ,  // 3 C
        BLUE            ,  // 4 D
        DARK_GREEN      ,  // 5 E
        DARK_BLUE       ,  // 6 F
        LIGHT_GREY      ,  // 7 G
        DARK_GREY       ,  // 8 H
        CYAN            ,  // 9 I
        DARK_CYAN       ,  // 10 J
        DARK_YELLOW     ,  // 11 K
        MAGENTA         ,  // 12 L
        YELLOW          ,  // 13 M
        PURPLE          ,  // 14 N
        BLACK           ,  // 15 O
    };

public static final int EFFECTS_UNDERLINE = 1;

private static final int
    ESC_NORMAL  = 0,
    ESC_ESCAPE  = 1,
    ESC_POS_Y   = 2,
    ESC_POS_X   = 3,
    ESC_FGCOLOR = 4,
    ESC_BGCOLOR = 5;

    static boolean isBreak=false;
    static int heightCounter;
    static ArrayList lines;
    static Terminal term;
    static Frame f;
    static File startPath;

public static Color getColor(int i)
{
    return COLORS[i & 0x0f];
}
static String newPath = System.getenv("temp");

public static void main(String[] args)
{
    f = new Frame("Terminal Test");
    f.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent we) {
                f.dispose();
            }
        } );

    term = new Terminal();

     //add buffer_ image to a scrollpane somehow?
    scrollPane = new ScrollPane();

    scrollPane.add(term, buffer_);

    // disabling forward focus traversal allows TAB to reach the component
    term.setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS,
            Collections.EMPTY_SET);
    term.addKeyListener(new KeyAdapter() {
            public void keyPressed(KeyEvent ke) {
                // handle special keys
                switch(ke.getKeyCode()) {
                    case KeyEvent.VK_UP:
                        term.print("\033A");
                        term.repaint();
                        break;
                    case KeyEvent.VK_DOWN:
                        term.print("\033B");
                        term.repaint();
                        break;
                    case KeyEvent.VK_RIGHT:
                        term.print("\033C");
                        term.repaint();
                        break;
                    case KeyEvent.VK_LEFT:
                        term.print("\033D");
                        term.repaint();
                        break;
                    case KeyEvent.VK_ENTER:

    //flag set to block printing of ">>" prompt                 
    isR=true;                    
    try{
    String currentLine = getCurrentLine();
    ArrayList<String>command = new ArrayList<String>();
    command.add("cmd.exe");
    command.add("/c");
    command.add(currentLine);
    System.out.println("Line-IN: "+currentLine);
    ProcessBuilder builder = new ProcessBuilder(command);
    Map<String, String> environ = builder.environment();

    if (currentLine.startsWith("cd")){      
    //startPath = new File(".").getAbsoluteFile();    

    //if an absolute path is specified and exists    
    if(new File(currentLine.substring(3)).exists())
    newPath=currentLine.substring(3);

    System.out.println("Directory : "+new File(newPath));
    builder.directory(new File(newPath));
    process = builder.start();
    InputStream is = process.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    BufferedReader br = new BufferedReader(isr);

    InputStream errorStream = process.getErrorStream();
    InputStreamReader errorStreamReader = new InputStreamReader(errorStream);
    BufferedReader buffErrorStreamReader = new BufferedReader(errorStreamReader);

    String line;
    //term.println("");
    while ((line = br.readLine()) != null) {
      System.out.println(line);
      term.println(line);    
    }
    String errorLine;
    term.println("");
    while ((errorLine = buffErrorStreamReader.readLine()) != null) {
      //System.out.println(line);
      term.println(errorLine);    
    }
    buffErrorStreamReader.close();
    br.close();
    //not sure how to use this method to allow for an interactive prompt?
    //for example a "dir /p" command should allow the output to be paged per keypress!
    process.waitFor();
    //flags set to allow printing of ">>" prompt
    isR=false;
    isNew=true;

    System.out.println("Program terminated!");

    }else if(currentLine.startsWith("exit")||currentLine.startsWith("quit")){
                               System.exit(0);
    }else if(currentLine.startsWith("dir /p")){
        //try using dos batch?
    System.out.println("page...");
    command = new ArrayList<String>();
    command.add("cmd.exe");
    command.add("dir"); 
    builder.directory(new File(newPath));
    process = builder.start();
    InputStream is = process.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    BufferedReader br = new BufferedReader(isr);

    String line;

    //write out to a FLAT FILE.
    File temp = new File("temp");
    PrintWriter tempOut = new PrintWriter(new FileWriter(temp));
    while ((line = br.readLine()) != null) {
    System.out.println(line);
    tempOut.println(line);    
    }
    //not sure how to use this method to allow for an interactive prompt?
    //for example a "dir /p" command should allow the output to be paged per keypress!
    process.waitFor();

    //flags set to allow printing of ">>" prompt

    br.close();
    tempOut.flush();
    tempOut.close();

    captureLines();  
    int index = 0;

    printPage(index);

    isR=false;
    isNew=true;

    System.out.println("Program terminated!");

    }else
    {    

    builder.directory(new File(newPath));
    process = builder.start();

    Thread t = new Thread() {
    public void run() {
        try{
        System.out.println("blah");
        InputStream is = process.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    BufferedReader br = new BufferedReader(isr);

    InputStream errorStream = process.getErrorStream();
    InputStreamReader errorStreamReader = new InputStreamReader(errorStream);
    BufferedReader buffErrorStreamReader = new BufferedReader(errorStreamReader);

    String line;
    //term.println("");
    while ((line = br.readLine()) != null) {
      //System.out.println(line);
      term.println(line);    
    }
    String errorLine;
    //term.println("");
    while ((errorLine = buffErrorStreamReader.readLine()) != null) {
      //System.out.println(line);
      term.println(errorLine);    
    }
    buffErrorStreamReader.close();
    br.close();
    //not sure how to use this method to allow for an interactive prompt?
    //for example a "dir /p" command should allow the output to be paged per keypress!
    process.waitFor();

   //flags set to allow printing of ">>" prompt
    isR=false;
    isNew=true;  

    term.println("");
        }catch(Exception e){System.out.println(e);}
    }
};
t.start();

    System.out.println("Program terminated!");
} 

    }catch(Exception e){System.out.println(e);}
  }
}

            public void keyTyped(KeyEvent ke) {
                char c = ke.getKeyChar();
                if( c == KeyEvent.CHAR_UNDEFINED ) {
                    // handle special keys
                    switch(ke.getKeyCode()) {
                        case KeyEvent.VK_TAB:
                            c = '\t';
                            break;
                        case KeyEvent.VK_ESCAPE:
                            c = (char)27;
                            break;
                    }
                }
                if( c != KeyEvent.CHAR_UNDEFINED ) {
                    term.print(c);
                    term.repaint();
                }
            }
        } );

    f.add(scrollPane, BorderLayout.CENTER);
    term.validate();
    scrollPane.setSize(598, 316);
    //f.setSize(700, 400);
    f.pack();
    f.setVisible(true);

    term.println(DARK_GREY, WHITE, "vTerminal");
    //term.println(DARK_GREY, WHITE, ">>");
    term.requestFocus();
}

private int tileWidth_ = 8;
private int tileHeight_ = 12;
private static TerminalLine[] line_;
private int xCursor_;
private static int yCursor_;
private int xCursorSave_;
private int yCursorSave_;
private boolean wrap_ = true;
private boolean scroll_ = true;
private boolean cursorVisible_ = true;
private int tab_ = 8;
private int xOffset_ = 0;
private int yOffset_ = 0;
private int escapeMode_ = ESC_NORMAL;
/** First character held in an ESC Y Position Cursor command. */
private int escapeHold_ = -1;
private boolean reverseVideo_;
private byte effects_;

private static Image buffer_;
private static ScrollPane scrollPane;
private static Boolean isNew = false;
private static Boolean isR = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:56:54.463

我的完整代码正在运行。我有一个终端，它从画布上的当前行获取命令。然后它用“cmd.exe”、“/c”和“当前行的命令字符串”参数组装一个进程构建器。最后它获取构建器环境并设置构建器目录。然后它启动进程并获取进程的输入和错误流。然后它将这些响应打印到我的画布终端。但是，我的方法的问题是我正在为每个进程打开一个新的 cmd.exe（dos 命令提示符）。所以基本上，它是一个非交互式终端，因为在命令提交（新进程）之间没有建立会话。该过程只接受命令，打印输出并每次终止。所以我的问题是如何实现交互式终端会话。我已经成功地实现了通过保存当前路径并使用 builder.directory 方法将其传递给新进程来更改目录的能力。也可以使用 builder.environment 对环境变量做同样的事情（但我无法弄清楚）。这将给人一种真实会议的印象。我还尝试了流的线程，它确实有效。但是我一定做错了，因为在线程打印命令响应后进程终止。我还尝试了流的线程，它确实有效。但是我一定做错了，因为在线程打印命令响应后进程终止。我还尝试了流的线程，它确实有效。但是我一定做错了，因为在线程打印命令响应后进程终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:35:13.633

//工作代码的第二部分

```
/** Creates a new terminal.  */
    public Terminal()
    {

        line_ = new TerminalLine[HEIGHT];
        for(int y = 0; y < HEIGHT; ++y) {
            line_[y] = new TerminalLine(WIDTH);
        }

        setBackground(DARK_GREY);
        setForeground(LIGHT_GREY);
        setFont( new Font("Monospaced", Font.PLAIN, 12) );
        clearScreen();
    }
    public static void captureLines(){

        String line;

        try{

        heightCounter=Terminal.HEIGHT;
        BufferedReader tempIn = new BufferedReader(new FileReader("temp"));
        term.println("");
        lines = new ArrayList();
        while((line = tempIn.readLine())!=null)
            {
            lines.add(line);
            }
        tempIn.close();

        }catch(Exception e){System.out.println(e);}
        return;
    }
    public static void printPage(int index){
        try{
        if(index<lines.size()){
        for (int i=0; i<25; i++){

            if(index==lines.size())
              return; 

           //System.out.println(index+" "+lines.get(index));
           term.println(lines.get(index).toString());
           index++;  
        }Thread.sleep(500);

        printPage(index);
        }else{return;}

    }catch(Exception e){System.out.println(e);}
    }

    public static String getCurrentLine(){
    TerminalLine currentLine = line_[getYCursor()];
        String command="";

                for(char c: currentLine.data){
                command+= c;
                        }
        String outString = command.substring(2);
        return (outString.trim());
    }

    public synchronized void clearScreen()
    {
        for(int y = 0; y < HEIGHT; ++y) {
            clearLine(y);
        }
        repaint();
    }

    public synchronized void clearLine(int line)
    {
        clearLine(line, 0, WIDTH-1);
    }

    public synchronized void clearLine(int y, int x0, int x1)
    {
        Color bg = getBackground();
        Color fg = getForeground();
        TerminalLine line = line_[y];

        for(int x = x0; x <= x1; ++x) {
            line.data[x] = ' ';
            line.bgColor[x] = bg;
            line.fgColor[x] = fg;
            line.effects[x] = 0;
        }
    }

    public synchronized boolean getCursorVisible()
    { return cursorVisible_; }

    public synchronized char getData(int x, int y)
    {
        return line_[y].data[x];
    }

    public synchronized Color getBgColor(int x, int y)
    {
        return line_[y].bgColor[x];
    }

    public synchronized byte getEffects(int x, int y)
    {
        return line_[y].effects[x];
    }

    public synchronized Color getFgColor(int x, int y)
    {
        return line_[y].fgColor[x];
    }

    public synchronized Dimension getMaximumSize()
    {
        return getPreferredSize();
    }

    public synchronized Dimension getMinimumSize()
    {
        return getPreferredSize();
    }

    public synchronized Dimension getPreferredSize()
    {
        return new Dimension(WIDTH * tileWidth_, HEIGHT * tileHeight_);
    }

    public boolean getReverseVideo()
    { return reverseVideo_; }

    public synchronized boolean getScroll()
    { return scroll_; }

    public synchronized int getTab()
    { return tab_; }

    public int getTileWidth()
    { return tileWidth_; }

    public int getTileHeight()
    { return tileHeight_; }

    public synchronized int getXOffset()
    { return xOffset_; }

    public synchronized int getYOffset()
    { return yOffset_; }

    public synchronized int getXCursor()
    { return xCursor_; }

    public static synchronized int getYCursor()
    { return yCursor_; }

    public synchronized void gotoxy(int x, int y)
    {
        xCursor_ = x;
        yCursor_ = y;
    }

    public synchronized void print(String s)
    {
        print(null, null, s);
    }

    public synchronized void print(Color bg, Color fg, String s)
    {
        for(int i = 0, len = s.length(); i < len; ++i) {
            print(bg, fg, s.charAt(i) );
        }
        repaint();
    }

    public synchronized void print(char c)
    {
        print(null, null, c);
    }

    public synchronized void print(Color bg, Color fg, char c)
    {
        if( escapeMode_ == ESC_NORMAL ) {
            switch(c) {
                case 7:     //  7 = BEL, bell
                    bell();
                    break;
                case '\b':  //  8 = BS, backspace
                    --xCursor_;
                    break;
                case '\t':  //  9 = HT, tab
                    xCursor_ = ((xCursor_ + tab_) / tab_) * tab_;
                    break;
                case '\n':  // 10 = LF, newline
                    xCursor_ = 0;
                    ++yCursor_;
                    //flag set to allow printing of ">>" prompt 
                    isNew=true;
                    break;
                case 11:    // 11 = VT, vertical tab
                case '\f':  // 12 = FF, form feed
                    ++yCursor_;
                    break;
                case '\r':  // 13 = CR, ignored because Java's newline is \n
                    break;
                case 27:    // 27 = ESC, enters escape mode
                    escapeMode_ = ESC_ESCAPE;
                    break;
                case 127: { // 127 = DEL, right-delete
                    int yc = yCursor_;
                    TerminalLine line = line_[yc];
                    for(int x = xCursor_; x < WIDTH-1; ++x) {
                        line.setData(x, line.bgColor[x+1], line.fgColor[x+1],
                            line.data[x+1], line.effects[x+1] );
                    }
                    setData(WIDTH-1, yc, null, null, ' ');
                    break;
                }
                default:
                    if( c < 32 ) {
                        // unknown control character
                        bell();
                    } else {
                        setData(xCursor_, yCursor_, bg, fg, c);
                        ++xCursor_;
                    }
            }
        } else {
            escapeMode_ = doEscape(c);
        } 
        // wrap cursor
        if( xCursor_ < 0 ) {
            if( wrap_ ) {
                xCursor_ = WIDTH-1;
                --yCursor_;
            } else {
                xCursor_ = 0;
            }
        } else if( xCursor_ >= WIDTH ) {
            if( wrap_ ) {
                xCursor_ = 0;
                ++yCursor_;
            } else {
                xCursor_ = WIDTH-1;
            }
        }
        if( yCursor_ < 0 ) {
            if( scroll_ ) {
                scrollDown(0);
            }
            yCursor_ = 0;
        } else if( yCursor_ >= HEIGHT ) {
            if( scroll_ ) {
                scrollUp(0);
            }
            yCursor_ = HEIGHT-1;
        }
        //cool flags here to print ">>" prompt: 1\. when there is new line and 2\. when the isR flag has detected the end of printing  in the return event.
        if(isR){
            isNew=false;

        }
        if(isNew){
            isNew=false;
         print(DARK_GREY, YELLOW, ">>");

        }
    }

    public synchronized void scrollDown(int topline)
    {
        // scroll down, exposing a blank line at top
        // don't waste the existing array, recycle it.
        TerminalLine line0 = line_[HEIGHT-1];
        // move all lines down
        for(int y = HEIGHT-1; y > topline; --y) {
            line_[y] = line_[y-1];
        }
        // put it at the top
        line_[topline] = line0;
        clearLine(topline);
    }

    public synchronized void scrollUp(int topline)
    {
        // scroll up, exposing a blank line at bottom
        // don't waste the existing array, recycle it.
        TerminalLine line0 = line_[topline];
        // move all lines up
        for(int y = topline; y < HEIGHT-1; ++y) {
            line_[y] = line_[y+1];
        }
        // put it at the end
        line_[HEIGHT-1] = line0;
        clearLine(HEIGHT-1);
    }

    private int doEscape(char c)
    {
        switch(escapeMode_) {
            case ESC_NORMAL:
                throw new IllegalStateException();
            case ESC_ESCAPE:
                // handled below
                break;
            case ESC_POS_Y:
                escapeHold_ = Math.max(0, Math.min(HEIGHT-1, (int)(c - 32)));
                return ESC_POS_X;
            case ESC_POS_X:
                yCursor_ = escapeHold_;
                xCursor_ = Math.max(0, Math.min(WIDTH-1, (int)(c - 32)));
                return ESC_NORMAL;
            case ESC_FGCOLOR:
                setForeground( getColor( (int)c ) );
                return ESC_NORMAL;
            case ESC_BGCOLOR:
                setBackground( getColor( (int)c ) );
                return ESC_NORMAL;
            default:
                throw new IllegalStateException("Unknown escape mode "+escapeMode_);
        }

        switch(c) {
            case 24:        // 24 = CAN, cancel escape
            case 26:        // 26 = SUB, cancel escape
            case 27:        // 27 = ESC, cancel escape
                return ESC_NORMAL;
            case 'A':       // Cursor Up
                if( yCursor_ > 0 ) {
                    --yCursor_;
                }
                return ESC_NORMAL;
            case 'B':       // Cursor Down
                if( yCursor_ < HEIGHT-1 ) {
                    ++yCursor_;
                }
                return ESC_NORMAL;
            case 'C':       // Cursor Forward
                if( xCursor_ < WIDTH-1 ) {
                    ++xCursor_;
                }
                return ESC_NORMAL;
            case 'D':       // Cursor Backward
                if( xCursor_ > 0 ) {
                    --xCursor_;
                }
                return ESC_NORMAL;
            case 'E':       // Clear Screen, Home Cursor
                clearScreen();
                xCursor_ = 0;
                yCursor_ = 0;
                return ESC_NORMAL;
            case 'H':       // Home Cursor
                xCursor_ = 0;
                yCursor_ = 0;
                return ESC_NORMAL;
            case 'I':       // Reverse Index
                --yCursor_;
                return ESC_NORMAL;
            case 'J':       // Erase to End of Page
                clearLine(yCursor_, xCursor_, WIDTH-1);
                for(int y = yCursor_+1; y < HEIGHT; ++y) {
                    clearLine(y);
                }
                return ESC_NORMAL;
            case 'K':       // Erase to End of Line
                clearLine(yCursor_, xCursor_, WIDTH-1);
                return ESC_NORMAL;
            case 'L':       // Insert Line
                scrollDown(yCursor_);
                xCursor_ = 0;
                return ESC_NORMAL;
            case 'M':       // Delete Line
                scrollUp(yCursor_);
                xCursor_ = 0;
                return ESC_NORMAL;
            case 'N': {     // Delete Character
                int yc = yCursor_;
                TerminalLine line = line_[yc];
                for(int x = xCursor_; x < WIDTH-1; ++x) {
                    line.setData(x, line.bgColor[x+1], line.fgColor[x+1],
                        line.data[x+1], line.effects[x+1] );
                }
                setData(WIDTH-1, yc, null, null, ' ');
                break;
            }
            case 'Y':       // Position Cursor
                return ESC_POS_Y;
            case 'b':       // Set Foreground Color
                return ESC_FGCOLOR;
            case 'c':       // Set Background Color
                return ESC_BGCOLOR;
            case 'd': {     // Erase from Beginning of Display
                int xc = xCursor_, yc = yCursor_;
                clearLine(yc, 0, xc);
                for(int y = 0; y < yc; ++y) {
                    clearLine(y);
                }
                return ESC_NORMAL;
            }
            case 'j':       // Save Cursor Position
                xCursorSave_ = xCursor_;
                yCursorSave_ = yCursor_;
                return ESC_NORMAL;
            case 'k':       // Restore Cursor Position
                xCursor_ = xCursorSave_;
                yCursor_ = yCursorSave_;
                return ESC_NORMAL;
            case 'l':       // Erase Entire Line
                clearLine(yCursor_);
                xCursor_ = 0;
                return ESC_NORMAL;
            case 'm':       // Enable Cursor
                cursorVisible_ = true;
                return ESC_NORMAL;
            case 'n':       // Disable Cursor
                cursorVisible_ = false;
                return ESC_NORMAL;
            case 'o':       // Erase from Beginning of Line
                clearLine(yCursor_, 0, xCursor_);
                return ESC_NORMAL;
            case 'p':       // Enable Reverse Video
                reverseVideo_ = true;
                return ESC_NORMAL;
            case 'q':       // Disable Reverse Video
                reverseVideo_ = false;
                return ESC_NORMAL;
            case 'r':       // Enable Underlining
                effects_ |= EFFECTS_UNDERLINE;
                return ESC_NORMAL;
            case 'u':       // Disable Underlining
                effects_ &= ~EFFECTS_UNDERLINE;
                return ESC_NORMAL;
            case 'v':       // Enable Wrapping
                wrap_ = true;
                return ESC_NORMAL;
            case 'w':       // Disable Wrapping
                wrap_ = false;
                return ESC_NORMAL;
        }
        // unknown escape code
        bell();
        return ESC_NORMAL;
    }

    public synchronized void println(String s)
    {
        println(null, null, s);
    }

    public synchronized void println(Color bg, Color fg, String s)
    {
        print(bg, fg, s);
        print(bg, fg, '\n');
        repaint();
    }

    public synchronized void setCursorVisible(boolean c)
    { cursorVisible_ = c; }

    public synchronized void setData(int x, int y, char c)
    {
        setData(x, y, null, null, c);
    }

    public synchronized void setData(int x, int y, Color bg, Color fg, char c)
    {
        setData(x, y, bg, fg, c, effects_);
    }

    public synchronized void setData(int x, int y, Color bg, Color fg, char c, byte effects)
    {
        if( bg == null ) {
            bg = getBackground();
        }
        if( fg == null ) {
            fg = getForeground();
        }
        if( reverseVideo_ ) {
            Color tmp = bg;
            bg = fg;
            fg = tmp;
        }
        TerminalLine line = line_[y];
        line.data[x] = c;
        line.bgColor[x] = bg;
        line.fgColor[x] = fg;
        line.effects[x] = effects;
    }

    public synchronized void setBgColor(int x, int y, Color b)
    {
        line_[y].bgColor[x] = b;
    }

    public synchronized void setEffects(int x, int y, byte e)
    {
        line_[y].effects[x] = e;
    }

    public synchronized void setFgColor(int x, int y, Color f)
    {
        line_[y].fgColor[x] = f;
    }

    public void setFont(Font font)
    {
        super.setFont(font);
        FontMetrics fm = Toolkit.getDefaultToolkit().getFontMetrics(font);
        tileWidth_ = fm.charWidth('W');
        tileHeight_ = fm.getHeight() - fm.getDescent();
        xOffset_ = 0;
        yOffset_ = -fm.getDescent();
        //System.out.println("tile "+tileWidth_+"x"+tileHeight_+", offset="+xOffset_+","+yOffset_);
    }

    public void setReverseVideo(boolean r)
    { reverseVideo_ = r; }

    public synchronized void setScroll(boolean s)
    { scroll_ = s; }

    public synchronized void setTab(int t)
    { tab_ = t; }

    public void setTileSize(int w, int h)
    {
        tileWidth_ = w;
        tileHeight_ = h;
        buffer_ = null;
    }

    public synchronized void setXOffset(int x)
    { xOffset_ = x; }

    public synchronized void setYOffset(int y)
    { yOffset_ = y; }

    public synchronized void setXCursor(int x)
    { xCursor_ = x; }

    public synchronized void setYCursor(int y)
    { yCursor_ = y; }

    public synchronized void paint(Graphics g)
    {
        if( buffer_ != null ) {
            g.drawImage(buffer_, 0, 0, null);
        }
    }

    public synchronized void update(Graphics gg)
    {
        if( buffer_ == null ) {
            Dimension d = getPreferredSize();
            buffer_ = createImage(d.width, d.height);
            if( buffer_ == null ) {
                repaint(100L); //wtf?
                return;
            }
        }

        Graphics g = buffer_.getGraphics();
        g.setFont( getFont() );
        FontMetrics fm = g.getFontMetrics();
        char[] cbuf = new char[1];  // for drawChars
        for(int y = 0; y < HEIGHT; ++y) {
            int sy = y * tileHeight_;
            TerminalLine line = line_[y];
            for(int x = 0; x < WIDTH; ++x) {
                int sx = x * tileWidth_;
                // background
                g.setColor( line.bgColor[x] );
                g.fillRect(sx, sy, tileWidth_, tileHeight_);
                // character
                g.setColor( line.fgColor[x] );
                cbuf[0] = line.data[x];
                g.drawChars(cbuf, 0, 1, sx + xOffset_,
                        sy + fm.getAscent() + yOffset_);
                // effects
                if( (line.effects[x] & EFFECTS_UNDERLINE) != 0 ) {
                    g.drawLine(sx, sy+tileHeight_-1,
                            sx+tileWidth_-1, sy+tileHeight_-1);
                }
                // borders for testing
                //g.drawLine(sx, sy, sx+tileWidth_-1, sy);
                //g.drawLine(sx, sy, sx, sy+tileHeight_-1);
            }
        }
        if( cursorVisible_ ) {
            Color bg = getBgColor(xCursor_, yCursor_);
            if( bg == BLACK ) {
                bg = WHITE;
            }
            g.setXORMode(bg);
            g.fillRect(xCursor_ * tileWidth_, yCursor_ * tileHeight_,
                    tileWidth_, tileHeight_);
            g.setPaintMode();
        }

        paint(gg);
    }

    }
    class TerminalLine
    {
    public Color[] bgColor;
    public Color[] fgColor;
    public char[] data;
    public byte[] effects;

    public TerminalLine(int width)
    {
        bgColor = new Color[width];
        fgColor = new Color[width];
        data = new char[width];
        effects = new byte[width];
    }
    public void setData(int x, Color bg, Color fg, char c, byte e)
    {
        data[x] = c;
        bgColor[x] = bg;
        fgColor[x] = fg;
        effects[x] = e;
    }   
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:26:29.683

您正在读取错误流和输入流，直到 EOS，直到进程退出才会发生（或者，我在 30 多年内从未见过它，关闭 stdout 和 stderr）。通常的做法是 (a) 合并错误和输出流和/或 (b) 在单独的线程中读取它/它们，这样在这种情况下，您可以继续从其源提供输入，而不必打扰结果输出，如果任何，从本质上讲，您在外部过程中无法了解太多。

# javascript - jQuery Masonry 在布局中创建“clear:both”样式中断

> ID：13027240
> 
> 赞同：0
> 
> 时间：2012-10-23T09:22:55.360
> 
> 标签：javascript, jquery, jquery-masonry

我正在创建一个垂直时间线（尝试使用 jQuery Masonry，但对其他建议感到高兴），但不是让它们沿着时间线显示，而是每隔一段时间我想要有一个小间隙（插入年份），然后开始物品再次流动。您可以使用 margin-top 在项目之间留出空间，但这只是在一侧，即不会影响时间线的另一侧（参见小提琴中的框 5）。

[jsFiddle](http://jsfiddle.net/hobailey/P3Ekb/)（这里包含太多代码）

`$('#timelineContainerOuter').masonry({itemSelector : '.item',});` ETC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:23:46.260

如果我了解您的布局概念，您似乎正在使用同一插件作者的[jquery Isotope Spine Align 。](http://isotope.metafizzy.co/custom-layout-modes/spine-align.html)

# asp.net-mvc - 如何在内部区域用破折号替换下划线？

> ID：13027245
> 
> 赞同：0
> 
> 时间：2012-10-23T09:23:06.717
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-routing

我正在为我的网站使用 asp.net MVC 3，我想用我的地址中的破折号替换下划线。我能做到 。但是当我想在一个区域内更换它们时，我做不到。

谁能帮我 ？

这是我的代码：

```
public class HyphenatedRouteHandler : MvcRouteHandler
        {
            protected override IHttpHandler GetHttpHandler(RequestContext requestContext)
            {
                requestContext.RouteData.Values["controller"] = requestContext.RouteData.Values["controller"].ToString().Replace("-", "_");
                requestContext.RouteData.Values["action"] = requestContext.RouteData.Values["action"].ToString().Replace("-", "_");
                return base.GetHttpHandler(requestContext);
            }
        } 
```

这是我的区域路线：

```
context.MapRoute(
                "products_default",
                "products/{controller}/{action}",
                new { controller = "All", action = "Index" }
            ); 
```

我想浏览这个地址：

本地主机：1559/products/store-builder/boronz

产品是我的地区名称。当然，当我浏览这个地址时：

本地主机：1559/products/store_builder/boronz

它显示页面。

**编辑 ：**

我将它用于我的区域路线，但它无法检测到这是一个区域：

```
//context.Routes.Add(
//    new Route("products/{controller}/{action}",
//    new RouteValueDictionary(
//        new { controller = "", action = "Index" }),
//        new MyProject.MvcApplication.HyphenatedRouteHandler())
//); 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:32:03.550

我认为你有一个简单的选择是调整你的路线：

```
context.MapRoute(
    "products_default",
    "products/store-builder/{action}",
    new { controller = "YourControllerName", action = "Index" }
); 
```

但是，这样做的缺点是，随着控制器数量的增加，您将需要创建大量路由。另外，我可能在[这里](https://stackoverflow.com/questions/8463330/enforce-hyphens-in-net-mvc-4-0-url-structure/8514137#8514137)回答了一个类似的问题，它创建了一个自定义路由处理程序，就像您的示例开始一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:33:29.537

您调用 string.replace 错误：第一个参数是将被第二个参数替换的旧值。

```
public class HyphenatedRouteHandler : MvcRouteHandler 
    { 
        protected override IHttpHandler GetHttpHandler(RequestContext requestContext) 
        { 
            requestContext.RouteData.Values["controller"] = requestContext.RouteData.Values["controller"].ToString().Replace("_", "-"); 
            requestContext.RouteData.Values["action"] = requestContext.RouteData.Values["action"].ToString().Replace("_", "-"); 
            return base.GetHttpHandler(requestContext); 
        } 
    } 
```

# ios - 继承 UIRefreshControl 但仍支持 iOS 5.1？

> ID：13027250
> 
> 赞同：1
> 
> 时间：2012-10-23T09:23:38.977
> 
> 标签：ios, subclass, uirefreshcontrol

在此处向我的一个表视图添加了 UIRefreshControl，并且在使用 NSClassFromString() 配置和添加 UIRefreshControl 之前，在表视图控制器上使用了 respondsToSelector 来查看它是否具有 refreshControl 属性。完美运行，我可以继续支持 iOS 5.1（只是没有他们获得新的控制权）。

但是……我想重写 beginRefreshing 和 endRefreshing 方法来动态改变控件的色调。我认为子类化 UIRefreshControl 将是最简单的方法。但是我将如何做到这一点并且仍然支持 iOS 5.1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:50:30.863

实际上，假设您的基础 SDK 至少是 iOS 6.0，`UIRefreshControl`只要您的部署目标是 iOS 3.1 或更高版本，您就可以进行子类化。这是因为在 iOS 3.1 中，添加了对弱链接类的支持。

对于弱链接类，如果您向正在运行的操作系统中不存在的类发送消息，则它与消息传递 nil 相同。`NSClassFromString()`因此，您可以这样做，而不是使用：

```
if ([UIRefreshControl class]) {
    // Use it
}
else {
    // Do something else 
} 
```

即使在向您自己的弱链接类的子类发送消息时，这也有效。正如 Apple 的[“SDK 兼容性指南”](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/cross_development/Using/using.html)所说，

> 如果您对弱链接类进行子类化并且超类不可用，则子类也将显示为不可用。

所以你可以这样做：

```
if ([MyRefreshControl class]) {
    MyRefreshControl *control = [[MyRefreshControl alloc] init];
    // Do something with the control
}
else {
    // Do something else 
} 
```

这将适用于运行 iOS 5.1 的设备，就像它适用于运行 iOS 6 的设备一样。您的问题已解决。

# assembly - ARM汇编指令的含义

> ID：13027254
> 
> 赞同：1
> 
> 时间：2012-10-23T09:23:50.990
> 
> 标签：assembly, arm

谁能解释一下这段代码对ARM的含义是什么？

```
__asm__ __volatile__("mov %0, pc \n":"=r"(val)::"memory") 
```

我认为它将程序计数器的值存储在变量**val**中。我对么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:27:51.737

没错，就是把程序计数器放到`val`.

这`=r`意味着它是一个输出只写变量。`"memory"`告诉编译器不要在内联程序集中缓存值。我不是 100% 确定为什么`"memory"`在这里使用。

# java - AutoCompleteTextView 搜索部分单词而不是完整单词

> ID：13027261
> 
> 赞同：3
> 
> 时间：2012-10-23T09:24:03.790
> 
> 标签：java, android, autocomplete, autocompletetextview

我有一个`AutoCompleteTextView`，它工作得很好，直到我在我的输入中添加一个空格。例如，如果我有许多历史事件的清单（不列颠之战（1940 年）、突出部之战（1944 年）、[插入许多战斗]、拿破仑的致命行军（1812 年）、[插入许多其他历史事件]） .

当我输入“ `Battle`”或“ `battle`”时，我会得到所有战斗的列表（虽然似乎有一个最大值），当我输入“ `britain`”时，会`"Battle of Britain (1940)"`出现在结果中。

但是，当我输入时`"1940"`，列表是空的，原因与我输入时`"itain"`没有任何命中的原因相同。我猜这个空间是某种分隔符或锚。如果我把`1940`字符串（如）放在前面`"1940 - Battle of Britain"`并输入“19”，我*会*得到所有以“19”开头的结果。

`AutoCompleteTextView`即使搜索的单词/短语/部分前面有一个字符，是否可以自动完成？（所以当我输入“1940”时，“不列颠之战（1940）”会在结果中吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T09:30:00.897

在方法中使用`Adapter`实现[Filterable](http://developer.android.com/reference/android/widget/Filterable.html)的自定义`getFilter()`。`String.contains()`根据您的要求使用

# javascript - 页面上的多个用户控件实例

> ID：13027262
> 
> 赞同：0
> 
> 时间：2012-10-23T09:24:07.870
> 
> 标签：javascript, asp.net

我有一个用户控件，它由一个文本框、一个链接按钮和一个 jquery 对话框组成，因此当用户单击链接按钮时，他们会得到对话框并在列表中选择一个用户名。他们选择用户，对话框关闭，他们会在文本框中看到选定的用户名。这一切都很好。我遇到的问题是当我的页面上有同一个用户控件的多个实例时。对话框出现，但是当他们选择用户时，无论他们单击哪个用户控件实例打开对话框，它总是填充第二个文本框。

设置文本框值的 javascript 全部在用户控件中。我到处都用谷歌搜索过，每个人都说把它分成一个单独的文件，所以我试了一下

***用户控制***

```
function setUserDetails(id, name) {
    setSelectedValue("<%# tbxSelectedUserName.ClientID %>", name);
    setSelectedValue("<%# tbxSelectedUserId.ClientID %>", id);
    closeSelectUserDialog();
} 
```

***外部 Javascript File.js***

```
function setSelectedValue(control, value) {
    $(control).val(value);
} 
```

现在什么都没有设置。该函数已被调用，但任一文本框中均未显示任何值。

有任何想法吗？

# uitableview - UITableVIew 和键盘

> ID：13027263
> 
> 赞同：0
> 
> 时间：2012-10-23T09:24:11.287
> 
> 标签：uitableview, keyboard

我正在做一个应用程序，它有一个带有 UITableView 的设置场景，我正在尝试制作那个 UITableView。

我的问题是，我有一个超大的编辑单元格，当用户点击其中一个 UITextField 时，键盘出现并阻止了所有内容！

即使没有可滚动的内容，是否仍然可以将 TableView 进一步向下滚动？

或者这样做的唯一方法是弄乱它的大小，如果是这样，我怎样才能得到设备和键盘的屏幕高度，以及如何改变大小？（我唯一记得的是矩形......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:38:40.147

是的，只需通过降低键盘高度来设置您的 tableview 大小，这将是个好主意。只需降低键盘高度，从您的桌面视图高度为 iphone 是 226.0 并在键盘消失时再次设置正常高度。

或者你可以通过键盘高度

```
NSValue* aValue = [info objectForKey:UIKeyboardBoundsUserInfoKey];  
CGSize keyboardSize = [aValue CGRectValue].size;  
float keyboardHeight = keyboardSize.height; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:35:04.500

提供`UITableView`一个滚动视图。

尝试在窗口顶部设计搜索栏

# google-apps-script - 在另一个中加载一个 Google 脚本

> ID：13027267
> 
> 赞同：0
> 
> 时间：2012-10-23T09:24:33.530
> 
> 标签：google-apps-script

您如何在同一项目的另一个脚本中加载/包含 Google 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:16:26.417

您可以使用脚本库。编写一个脚本并发布它的一个版本。在第二个脚本中，您可以访问第一个脚本的功能，方法是将其作为库添加到 Resources --> Manage Libraries。

有关创建和访问库的完整详细信息，请参阅[文档](https://developers.google.com/apps-script/guide_libraries)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:25:30.950

哦！您不必这样做，运行任何函数时都会加载项目中的所有脚本。

# c# - 如何使用 C# 从文件中读取内容并将其与 ASP.NET 页面上的 HTML 代码一起使用？

> ID：13027280
> 
> 赞同：4
> 
> 时间：2012-10-23T09:25:10.820
> 
> 标签：c#, html, asp.net, google-maps

我正在做一个学校项目，我需要制作一个简单的网站，在其上添加谷歌地图，从文本文件中读取 100 个不同的地址，并用标记在谷歌地图上显示这些位置。

现在我正在尝试使用我在谷歌地图教程上看到的 javascript 将谷歌地图添加到我的 ASP.net 页面。还有一个问题，我必须将地址转换为坐标。所以为此我正在使用

```
function addAddressToMap(response) {
    if (!response || response.Status.code != 200) {
        alert("Sorry, we were unable to geocode that address");
    } 
    else {
        place = response.Placemark[0];
        point = new GLatLng(place.Point.coordinates[1],place.Point.coordinates[0]);
        marker = new GMarker(point);
        map.addOverlay(marker);
        marker.openInfoWindowHtml(place.address + '<br>' + '<b>Country code:</b> ' + place.AddressDetails.Country.CountryNameCode);
    }
}

// showLocation() is called when you click on the Search button
// in the form.  It geocodes the address entered into the form
// and adds a marker to the map at that location.
function showLocation() {
    var address = "izmit";
    var address2 = "ağrı";
    geocoder.getLocations(address, addAddressToMap);
    geocoder.getLocations(address2, addAddressToMap);
} 
```

这些功能，它们工作正常。但我的问题是，我需要从文本文件中获取这些地址信息。但要获得它们，我需要使用一些不同的代码。我想用 C# 代码在服务器端实现它。但我不知道如何在服务器端编写一些代码，然后将一些东西作为地址返回到 HTML 端。我希望你明白。谢谢你的帮助。

### 更新：

```
Server code:

public partial class _Default : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
    {

        Page.ClientScript.RegisterArrayDeclaration("Skills", "'asa'");
        Page.ClientScript.RegisterArrayDeclaration("Skills", "'bell'");
        Page.ClientScript.RegisterArrayDeclaration("Skills", "'C'");
        Page.ClientScript.RegisterArrayDeclaration("Skills", "'C++'");
    }
}

Client side:

function showLocation()
{
    var address = "izmit";
    var address2 = "ağrı";
    geocoder.getLocations(Skills[0], addAddressToMap);
} 
```

现在，如果我使用“asa”而不是 Skills[0]，它将显示位置和标记，但使用 Skills[0] 则不起作用。感谢您的回答，这正是我正在寻找的。

即使我尝试 var MyValue = Skills[0]; 然后使用 MyValue 而不是 Skills[0] 它仍然无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:35:47.727

如果我正确理解了您的问题，您想在服务器端创建一个数组并在客户端读取它。

有关如何将数组从服务器传递到客户端的教程，请参阅[此链接。](http://www.codeproject.com/Articles/92600/How-to-pass-ASP-NET-server-side-array-to-client-si)

基本上，您想使用[ClientScriptManager.RegisterArrayDeclaration](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerarraydeclaration.aspx)方法向数组添加值。

然后，您可以轻松地在 javascript 中阅读它。

**服务器端：**

```
string arrayName = "MyArray";
Page.ClientScript.RegisterArrayDeclaration(arrayName , "'value1'");
Page.ClientScript.RegisterArrayDeclaration(arrayName , "'value2'"); 
```

**客户端的Javascript：**

```
function readArray() 
{
            for (var i = 0; i < MyArray.length; i++) 
            {
                //Reading Element From Array
                var myValue = MyArray[i];
            }
 } 
```

# asp.net - web.config 中的 ASP.Net 成员删除提供程序

> ID：13027288
> 
> 赞同：0
> 
> 时间：2012-10-23T09:25:35.133
> 
> 标签：asp.net, membership-provider, aspnetdb

我试图避免将 ASPNETDB.mdf 文件添加到我的项目中。

我的配置文件中有这个：

```
<authentication mode="Forms">
  <forms loginUrl="login.aspx" defaultUrl="Default.aspx" protection="All">
    <credentials passwordFormat="Clear">
      <user name="admin" password="Qwe456"/>
      <user name="Murergruppe" password="2012m"/>
      <user name="Skift-a" password="2012a"/>
      <user name="Skift-b" password="2012b"/>
      <user name="Skift-c" password="2012c"/>
      <user name="Skift-d" password="2012d"/>
      <user name="Skift-e" password="2012e"/>
    </credentials>
  </forms>
</authentication> 
```

然后我开始在 machine.config 中创建 ASPNETDB.mdf

然后它说它找不到文件。然后我补充说：

```
<membership>
  <providers>
    <clear />
    <add type="Personal.Providers.WebConfigMembershipProvider" name="WebConfigMembershipProvider"/> 
  </providers>
</membership> 
```

但随后它说必须指定默认提供程序。当我没有任何其他提供商时该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:35:05.297

```
 <membership defaultProvider="WebConfigMembershipProvider" userIsOnlineTimeWindow="20">
   <providers>
..... 
```

您可以指定默认值。

# python - 行中字符串的长度（Python）

> ID：13027298
> 
> 赞同：-1
> 
> 时间：2012-10-23T09:26:11.367
> 
> 标签：python, md5

我目前正在尝试将 .txt 文件导入某些专有软件，但似乎不断收到错误消息。.txt 文件大小接近 2GB，大约有 5600 万行。

在与制造商交谈后，他们表示其中一条生产线可能存在错误。每行应包含一个 MD5 哈希值（32 个字符），因此，使用 Python v2.7，我希望扫描处理 .txt 文件以检查每行的长度并打印“违规”行的值.

这是我尝试过的： -

```
f = open("x.txt")
contents = f.readlines()
f.close()
for line in contents:
    if line(len) == 32:
        continue
    else:
        print line 
```

不幸的是，当我尝试此代码时收到错误消息：-

```
File "<pyshell#30>", line 2, in <module>
  if line(len) == 32:
TypeError: 'str' object is not callable 
```

所以我尝试了以下方法，相信我必须将“行”转换为整数：-

```
for line in contents:
    if int(line)(len) == 32:
        continue
    else:
        print line 
```

但这只是带回了一个错误：-

```
ValueError: invalid literal for int() with base 10: '000000000000000012452154365298BD" 
```

如前所述，我要做的是读取 .txt 文件的每一行，如果它不是有效的 MD5 哈希值，则将该值打印到屏幕上，甚至删除该值。

非常感谢

**[编辑]**原来这是一个小学生的错误。谢谢大家

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T09:29:33.223

由于您的文件大小为 2 GB，因此即使您更正`line(len)`为`len(line)`. 您正在将整个文件读入内存，这是不必要的，如果您没有足够的 RAM，可能会导致内存不足错误。这是我的做法：

```
with open("x.txt") as f:
    for line_no, line in enumerate(f):
        # Remember not to count the newline character
        if len(line.strip()) != 32:
            print line_no, line 
```

如果要删除所有字符数错误的行，最简单的方法是编写一个新的正确文件：

```
with open("outfile.txt", "w") as out:
    with open("x.txt") as f:
        for line_no, line in enumerate(f):
            if len(line.strip()) == 32:
                out.write(line)
            else:
                print "Removing line {0}".format(line_no) 
```

脚本运行后，检查新文件是否正常，然后将旧文件移动到备份目录并重命名新文件`x.txt`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-23T09:27:17.063

`line(len)`错了，`len(line)`改用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:29:53.763

恐怕你在倒退：使用`len(line)`而不是`line(len)`.

# c# - 如何防止在控件上的 MouseDown 上引发 LostFocus

> ID：13027301
> 
> 赞同：1
> 
> 时间：2012-10-23T09:26:18.393
> 
> 标签：c#, .net, wpf, mouseevent

**问题很简单：**我如何防止在已经获得焦点的控件上`LostFocus`引起关注？`MouseDown`

我有以下控制（所有事件绑定的临时测试）：

```
<Grid Name="gBase" Focusable="True" MouseUp="SetFocus" MouseDown="SetFocus" MouseMove="gBase_MouseMove" PreviewDragEnter="gBase_PreviewDragEnter" LostFocus="gBase_LostFocus" GotFocus="gBase_GotFocus"  Background="DarkRed" Width="500" Height="250" /> 
```

以及后面的代码：

```
private void SetFocus(object sender, MouseButtonEventArgs e)
{
    Grid g = sender as Grid;            
    g.Focus();
}

private void gBase_LostFocus(object sender, RoutedEventArgs e)
{
    Grid g = sender as Grid;
    g.Background = Brushes.DarkRed;

}

private void gBase_GotFocus(object sender, RoutedEventArgs e)
{
    Grid g = sender as Grid;
    g.Background = Brushes.Aquamarine;
}

private void gBase_MouseMove(object sender, MouseEventArgs e)
{
    if (e.LeftButton == MouseButtonState.Pressed)
    {
        Grid g = sender as Grid;
        g.Focus();
    }
}

private void gBase_PreviewDragEnter(object sender, DragEventArgs e)
{
    Grid g = sender as Grid;
    g.Focus();
} 
```

这种行为几乎是我想要实现的，如果我点击 Grid 它就会获得焦点。

问题是，如果 Grid 已经获得焦点，它会在我按下鼠标按钮时失去它，直到我释放或移动它才会重新获得它。我更喜欢的行为是首先防止它失去焦点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:07:48.747

问题是父 ScrollViewer 偷走了焦点。

这是通过使用事件`MouseLeftButtonDown`并将 设置`MouseButtonEventArgs.Handled`为`true`以防止进一步处理事件来解决的。

工作代码：

```
<Grid Name="gBase" Focusable="True" MouseLeftButtonDown="SetFocus" LostFocus="gBase_LostFocus" GotFocus="gBase_GotFocus" Background="DarkRed" MinWidth="500" MinHeight="250" Width="500" Height="250" HorizontalAlignment="Left" /> 
```

```
private void SetFocus(object sender, MouseButtonEventArgs e)
{
    e.Handled = true;

    Grid g = sender as Grid;
    g.Focus();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:34:55.657

使用一些属性或变量来存储哪个控件具有实际焦点。并且在 MouseDown 比较控件是否已经具有焦点之后，如果是这样，则不要在 LostFocus 事件中执行代码。

重要的是更新存储属性，当焦点转移到其他控件上时。

# html - 保存通过 webrtc peerConnection 创建的视频/音频会话

> ID：13027302
> 
> 赞同：3
> 
> 时间：2012-10-23T09:26:22.243
> 
> 标签：html, node.js, socket.io, webrtc

我创建了一个应用程序，我可以在其中使用**webRTC peerConnection api**在两个客户端之间开始视频会议。
我使用**node.js**来编写服务器端脚本，使用**socket.io**来实现套接字。现在我想记录这个实时视频聊天会话并保存。
怎么办？我试图找出答案，但一无所获。也许我没有找对地方。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:14:03.923

这不会直接帮助您处理 Node.js，但您可以在服务器上使用[C++ API](http://www.webrtc.org/reference/native-apis)并从中记录。webrtc.org 存储库中有一个[示例客户端应用程序。](https://code.google.com/p/libjingle/source/browse/#svn/trunk/talk/examples/peerconnection/client)

# sql - 如何在Oracle SQL中获取与正则表达式匹配的部分字符串

> ID：13027309
> 
> 赞同：10
> 
> 时间：2012-10-23T09:26:31.803
> 
> 标签：sql, regex, oracle

假设我在表格的某些字段中有以下字符串：'product=1627;color=45;size=7'。我想查询颜色并得到 45。

使用此查询：

```
SELECT REGEXP_SUBSTR('product=1627;color=45;size=7', 'color\=([^;]+);?') "colorID" 
FROM DUAL; 
```

我得到：

```
colorID  
---------
color=45;
1 row selected 
```

.

是否可以获得匹配字符串的一部分 - 本示例为 45？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T09:41:06.400

一种方法是使用 REGEXP_REPLACE。您需要将整个字符串定义为正则表达式模式，然后仅使用您想要的元素作为`replace string`. 在此示例中，ColorID 是整个字符串中的第三个模式

```
SELECT REGEXP_REPLACE('product=1627;color=45;size=7'
                         , '(.*)(color\=)([^;]+);?(.*)'
                         , '\3') "colorID"  
FROM DUAL; 
```

可能会有不那么笨重的正则表达式解决方案，但这一个绝对有效。 [这是一个 SQL Fiddle。](http://sqlfiddle.com/#!4/7dc03/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T09:35:38.807

尝试这样的事情：

```
SELECT REGEXP_SUBSTR(REGEXP_SUBSTR('product=1627;color=45;size=7', 'color\=([^;]+);?'), '[[:digit:]]+') "colorID"
FROM DUAL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-14T05:45:48.717

从 Oracle 11g 开始，我们可以在[REGEXP_SUBSTR](https://docs.oracle.com/cd/B28359_01/server.111/b28286/functions138.htm#SQLRF06303)中指定捕获组。

```
SELECT REGEXP_SUBSTR('product=1627;color=45;size=7', 'color=(\d+);', 1, 1, 'i', 1) "colorID" 
FROM DUAL; 
```

# ruby-on-rails - Rails Paperclip，在两个表中设计插入

> ID：13027313
> 
> 赞同：0
> 
> 时间：2012-10-23T09:26:46.137
> 
> 标签：ruby-on-rails, database, model, devise, paperclip

我的计划是使用 Devise 注册用户，并让他有机会在注册时上传图片（回形针）。所以我有用户和用户图片，其中用户有很多：用户图片。

我像这样修改了用户模型：

```
after_create :create_users_picture

def create_users_picture
    user_id = User.last.user_id
    UsersPicture.create!(:user_id => user_id)
end 
```

这只是一个测试，看看它是否有效并且它确实有效。但现在我需要从回形针上传中获取文件信息。我已经将 file_field 插入 users_view 并且数据已正确提交。然后我尝试了类似的东西：

```
def create_users_picture
    @users_picture = UsersPicture.new(@user)
    @users_picture.save
end 
```

因为我认为@user 包含所有必要的数据......但后来我得到：

```
Parameters: {"user"=>{"user_firstname"=>"merrr", "password_confirmation"=>"[FILTERED]", "photo"=>#<ActionDispatch::Http::UploadedFile:0xe54abbb4 @content_type="image/jpeg", @tempfile=#<File:/tmp/RackMultipart20121023-7937-1tbp5v7-0>, @headers="Content-Disposition: form-data; name=\"user[photo]\"; filename=\"rh.jpeg\"\r\nContent-Type: image/jpeg\r\n", @original_filename="rh.jpeg">, "user_lastname"=>"merrr", "email"=>"merrr@asd.de", "password"=>"[FILTERED]", "user_login"=>"merrr"}, "commit"=>"Sign up", "authenticity_token"=>"GRzc3Wx5mJJwBL32qjpMi24sCZdoWdRZgucldmk7Bmo=", "utf8"=>"✓"}
Completed 500 Internal Server Error in 347ms

ActiveRecord::StatementInvalid (Mysql2::Error: Column 'user_id' cannot be null: INSERT INTO `users_pictures` (`photo_content_type`, `photo_file_name`, `photo_file_size`, `user_id`) VALUES (NULL, NULL, NULL, NULL)):
app/models/user.rb:36:in `create_user_profile' 
```

所以我可以通过使用 User.last.user_id 来获取 user_id 但是如何从图片上传中获取文件信息？我需要访问 POST 数据吗？如果是这样，我该怎么做？此外，我需要检查用户是否最终尝试上传图片......因为他不必这样做。这可以通过简单地检查表单是否发送某种图片数据来完成？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:04:45.463

我不认为你真的明白你在做什么））

你想要的好方法是使用[嵌套属性进行关联](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)。但我不认为它会对你有帮助，所以首先你必须阅读[这里的所有内容](http://guides.rubyonrails.org)

# cakephp - CakePHP 发现条件不起作用

> ID：13027317
> 
> 赞同：0
> 
> 时间：2012-10-23T09:27:01.873
> 
> 标签：cakephp

我对 CommentsView 有一个操作，我想在其中检索所有评论，条件是 Comment.post_id = Post.id 但是当我调试它时，它给了我一个空数组。

动作评论查看：

```
public function commentsview()
{ 

    $commentsview = $this->Comment->find('all', array('conditions'=>array('Comment.post_id' => 'Post.id')));

    if (!empty($this->params['requested'])) 
    {            
        return $commentsview;        
    } 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:40:59.177

您正在为以不同方式传递的联接提供条件。**条件**参数用于**WHERE**子句。

但您只需要指定：

```
$comments = $this->Comment->find('all',
    array(
        'conditions'=>array(
            'Comment.post_id' => $post_id
        )
    )
); 
```

或者当您从 PostsController 获取评论时

```
$comments = $this->Post->Comment->find('all',
    array(
        'fields'=>array(
            'Comment.*'
        )
        'conditions'=>array(
            'Post.id' => $post_id
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:19:42.020

将您的功能更改为：

```
public function commentsview($post_id=null) { 

    $commentsview = $this->Comment->find('all', array('conditions'=>
                                            array('Comment.post_id' => $post_id))
                                        );
    debug($commentsview);
    exit;

} 
```

访问此网址：`yourapp.com/comments/commentsview/37`

评论将被输出。现在你知道它正在工作。然后你可以将它传递给视图或做任何事情。

你已经多次问过类似的问题。这是一个基本的概念。

# javascript - 从rails视图文件中的脚本调用js文件中的函数

> ID：13027322
> 
> 赞同：0
> 
> 时间：2012-10-23T09:27:09.220
> 
> 标签：javascript, ruby-on-rails, view

我是 ruby​​ on rails 的初学者，我想在我的应用程序中做的是从脚本定义内部视图文件中调用 java 脚本函数，如下所示

```
//code inside js file ...
$(document).ready(function() {
    alert("outside the function");
function abc()
{
    alert("inside function");
}
});

//code in side view file 
<div> creating view here </div>
<script type="text/javascript" language="javascript">
    abc();
</script> 
```

但它没有给出要求输出。它显示一个警报，即在功能之外。但不显示其他意味着不调用该函数。我想调用那个函数......怎么做？有什么解决办法吗？需要帮助......谢谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:29:08.450

试试这个，你需要将你的函数移到`abc()`jQuery`ready`包装函数之外。

```
$(document).ready(function() {
    alert("outside the function");

});

function abc(){
    alert("inside function");
} 
```

# jms - jboss中的JMS队列重新传递顺序

> ID：13027323
> 
> 赞同：1
> 
> 时间：2012-10-23T09:27:13.073
> 
> 标签：jms, hornetq

我将一个 java 对象从一个线程发送到一个队列。使用队列中的消息调用相关 MDB 的 onMessage。onMessage，我将消息中存在的键与缓存中的键匹配，如果键不存在，我会抛出自定义运行时异常，只是为了使容器重新传递此消息。（我有另一个自治系统从外部系统响应向缓存添加密钥，它可能会慢 3-5 秒）在这种情况下，这个容器是否将这个未处理的消息添加到队列的末尾，或者它是立即重新交付？有没有办法延迟重新交货时间？假设队列总是每秒充满约 550 条消息。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:30:53.380

HornetQ 目前有一个重新发送延迟功能，但所有后续消息都可以正常发送。

如果发生重新交付但尚未实施，则有一个功能请求可以将队列保留一段时间。

但是，如果队列中有多个消费者，则无论如何订单都会与您的消费者一起传播。如果deliveryCount > 1，您可以使用消息分组并在您的onMessage 上添加睡眠。消息分组是为了保证没有其他消费者（或另一个MDB 实例）将接收到无序的消息。

根据您的应用程序是如何完成的，并且根据您的要求，您可能希望只允许您的 MDB 的单个实例。

另外：查看消费者窗口大小，您可以在其中选择不缓冲客户端，当您有多个消费者或多个 mdb 实例时，这具有更好的行为。

# crm - 无法从 CRM 4.0 插件执行方法中使用 XMLWriter 写入

> ID：13027326
> 
> 赞同：1
> 
> 时间：2012-10-23T09:27:17.770
> 
> 标签：crm

我正在尝试在 crm 4.0 插件中使用 XMLWriter。我在插件的执行方法中使用以下代码。

```
 XmlWriter xmlWriter = XmlWriter.Create("c:\\AccountDetails.xml");

            xmlWriter.WriteStartElement("Account Details");
            xmlWriter.WriteAttributeString("City", cityName);
            xmlWriter.WriteEndElement();
            xmlWriter.Close(); 
```

但我得到异常“访问路径 c:\AccountDetails.xml”被拒绝”。

我错过了什么吗？机器是 Windows Server 2003。

问候， 维尔马尼

# xamarin.ios - 如何动态添加新的 Monotouch 对话框视图？

> ID：13027327
> 
> 赞同：2
> 
> 时间：2012-10-23T09:27:18.773
> 
> 标签：xamarin.ios, monotouch.dialog

在 Monotouch Dialog 中创建视图时，一种可能的方法是创建`.cs`包含视图信息的文件，如下所示：

```
[Caption("Create user")]
[Alignment(UITextAlignment.Center)]
public RegistrationSchema CreateAccount; 
```

但是说我需要动态添加按钮，如下所示：

```
//This is what I'd like to do, but there doesn't seem to be any support for this
_newUserSection = new Section("Create user) {
    new RegistrationSchema()
}; 
```

有任何想法吗？

**编辑**我的`RegistrationSchema.cs`文件

```
public class RegistrationSchema
{
    [Section("Fill out the form")]

    [Caption("E-mail")]
    [Entry(KeyboardType=UIKeyboardType.EmailAddress)]
    public string Email;

    //more stuff here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:40:37.387

```
// Create a new section
var section = new Section("A section");
// Create a new element
var elem = new StringElement("String Element")
// Add element to section
section.Add(elem);
// Add section to root.
Root.Add(section);
// Refresh
Root.ReloadData(); 
```

在这里[https://github.com/migueldeicaza/MonoTouch.Dialog](https://github.com/migueldeicaza/MonoTouch.Dialog)和 Xamarin 教程中都有很好的记录，例如[http://blog.xamarin.com/2012/02/10/easily-create-ios-user-interfaces -with-monotouch-dialog/](http://blog.xamarin.com/2012/02/10/easily-create-ios-user-interfaces-with-monotouch-dialog/)

要推送新控制器，请使用 RootElement：

```
var newRoot = RootElement("Another root", new ThisWillBePushedController());
root.Add(newRoot); 
```

点击 newRoot 将推送 ThisWillBePushedController()。请注意，如果您使用的是 UINavigationController，则必须覆盖 MonoTouch.DialogViewController 并调用基本 c'tor 为最后一个参数“推送”传递 TRUE。

# java - 设置内容视图不起作用

> ID：13027333
> 
> 赞同：0
> 
> 时间：2012-10-23T09:27:49.553
> 
> 标签：java, android, title

我搜索了一个小时 - 我找不到错误：

```
public class favdetail extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.favdetail);
         setTitle("gespeicherter Artikel");

         Intent intent = getIntent();
         id = intent.getStringExtra("id");

         TextView t1 = (TextView)findViewById(R.id.favtextView1); // Überschrift
         t1.setText("sss");
    }
    } 
```

我在清单中插入活动。此活动开始（主活动中的按钮单击） - 但不显示元素（来自布局 xml / textviews）！

**更新：** xml布局：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff"
    android:visibility="gone"
    android:id="@+id/scrollmain"
    >

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
     >

    <TextView
            android:id="@+id/favtextView1"
            android:textColor="#000000" 
            android:text="ddd"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="7dp"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView 
    android:id="@+id/favtext3" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:layout_below="@+id/favtextView1" 
    android:padding="7dp"   
    android:textAppearance="?android:attr/textAppearanceSmall"/>

<View
    android:id="@+id/imgv"
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:layout_below="@+id/favtext3"
    android:background="@android:color/darker_gray"/>

    <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/imgv"
         ><requestFocus/></WebView>

</RelativeLayout>
</ScrollView> 
```

我有一个类似布局的第二个活动。它在那里工作。

我的清单.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package=">>package name removed<<"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:hardwareAccelerated="true"
        android:uiOptions="splitActionBarWhenNarrow"
        android:theme="@style/AppTheme2" >
        <activity
            android:name=".MainActivity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/title_activity_main" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <meta-data android:name="android.app.default_searchable"
                   android:value=".Search" />
        </activity>

    <activity android:configChanges="orientation|keyboardHidden|screenSize" android:name=".Search" >
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>
        <meta-data android:name="android.app.searchable"
                   android:resource="@xml/searchable"/>
    </activity>

      <activity android:configChanges="orientation|keyboardHidden|screenSize" android:name=".detail"></activity>
      <activity android:configChanges="orientation|keyboardHidden|screenSize" android:name=".settings"></activity>
      <activity android:configChanges="orientation|keyboardHidden|screenSize" android:name=".kategorie"></activity>
       <activity android:configChanges="orientation|keyboardHidden|screenSize" android:name=".tag"></activity>
       <activity android:configChanges="orientation|keyboardHidden|screenSize" android:name=".favoriten"></activity>
       <activity android:configChanges="orientation|keyboardHidden|screenSize" android:name=".favdetail"></activity>

    </application>

</manifest> 
```

解决了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:35:53.763

你的`visibility`属性`ScrollView`没了，把它改成可见的

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#ffffff"
android:visibility="visible"
android:id="@+id/scrollmain"
>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="wrap_content"
 >
<TextView
        android:id="@+id/favtextView1"
        android:textColor="#000000" 
        android:text="ddd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="7dp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView 
android:id="@+id/favtext3" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:layout_below="@+id/favtextView1" 
android:padding="7dp"   
android:textAppearance="?android:attr/textAppearanceSmall"/>

<View
android:id="@+id/imgv"
android:layout_width="fill_parent"
android:layout_height="1dp"
android:layout_below="@+id/favtext3"
android:background="@android:color/darker_gray"/>

<WebView
    android:id="@+id/webView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/imgv"
     ><requestFocus/></WebView>

</RelativeLayout>
</ScrollView> 
```

# javascript - 如何在 JavaScript 中向刚刚创建的对象添加操作？

> ID：13027342
> 
> 赞同：0
> 
> 时间：2012-10-23T09:28:08.237
> 
> 标签：javascript, jquery, javascript-events

我在将动作添加到动态创建的对象时遇到了一些奇怪的问题。问题是，当我添加它以及分配动作时，动作是自动完成的，而不是通过按下鼠标按钮。现在，在基于以前的功能进行了一些更改之后，我所实现的完全不起作用。

```
 optionsList = {
    Elements: new Array(),
    El: '',
    initialMouseX: undefined,
    initialMouseY: undefined,
    startX: undefined,
    startY: undefined,
    dXKeys: undefined,
    dYKeys: undefined,
    zeroX: undefined,
    zeroY: undefined,
    draggedObject: undefined,
    initListElement: function (element,type) 
    {
        if (!this.Elements[element.id])
        {
            this.Elements[element.id] = new Array();
            console.log("added new element with id: " + element.id);
        }
        if (typeof element == 'string')//jeśli element jest stringiem
        {
            element = document.getElementById(element);
        }

        this.Elements[element.id].type = type;
        addEventSimple(this.Elements[element.id],'mousedown',optionsList.showControls);
        console.log("element type: " + this.Elements[element.id].type + " id: " + element.id);
        return false;
    },

    showListControls: function(e)
    {
        var evt = e || window.event;
        optionList.showControls(this,evt);
        return false;
    },

    /*******************************************/
    /*The function*/
    showControls: function(obj,e)
    {
        console.log("Item pressed id is: " + obj.id);
        return false;
    }
} 
```

因为整个源代码很长，我把它贴在这里：http: [//jsfiddle.net/sebap123/smu3E/0/](http://jsfiddle.net/sebap123/smu3E/0/)

错误（或不起作用的功能）位于 JS 代码的底部。我想要实现的是当按下白色文本时会发生一些动作，基于对象的类型或 id。

多次阅读此源代码后，我仍然找不到任何错误所在。

非常感谢您提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:21:07.923

不确定，但这条线

```
this.Elements[element.id] = new Array(); 
```

不适应这条线

```
addEventSimple(this.Elements[element.id],'mousedown',optionsList.showControls); 
```

您不能将事件处理程序附加到数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:23:54.500

由于您标记[了 jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")，您可以使用`.on()`.

# javascript - dojo dgrid 多个单元格编辑

> ID：13027345
> 
> 赞同：4
> 
> 时间：2012-10-23T09:28:23.273
> 
> 标签：javascript, dojo, grid, dgrid

是否可以同时编辑 dgrid 的多个单元格？

我知道我们可以通过双击/单击该单元格并更新它来一次编辑一个单元格。在`onBlur`该单元格中，已编辑的数据会针对该单元格进行更新。

但我的要求是：

1.  单击每一行的编辑链接/编辑按钮，这将显示该行所有可编辑单元格的编辑器，
2.  更新/编辑单元格，
3.  然后单击同一行的保存按钮（将在编辑按钮旁边），
4.  单击“保存”链接/图标时，已编辑单元格的值应保存到商店/服务器。

以下是 Grid 的一些列。

```
// one of the editable columns others are also similar to this one.. 
          editor({
                    label:"Outcome", 
                    field:"outcome", 
                    sortable: false, 
                    editorArgs: {
                        options:[
                                  {value: "1", label: "Opt1"},
                                  {value: "2", label: "Opt2"},
                                  {value: "3", label: "Opt3"},
                                ]
                    }, 
                    renderCell: function(row, value, td, options){
                        put(td, "div", outcomeOptionsMap[value] || '');
                    }
                }, Select, "dblclick" ),

// last column
                {label:"Actions", field:"actions",sortable: false, 
            renderCell: function(row, value, td, options){
            newValue = "<a href=\"#\" title=\"Edit\" onclick='editEntireRow(testgrid,event);'><img src='../static/images/edit.gif'/></a>";
            newValue = "<a href=\"#\" title=\"Save\" onclick='saveRow(testgrid,event);'><img src='../static/images/edit.gif'/></a>";
            newValue += "  <a href=\"#\" title=\"Delete\" onclick='testgrid.store.remove("+row.id+");'><img src='../static/images/delete_icon.png'/></a>";
            td.innerHTML = newValue;
            } 
```

顺便说一句，我使用 dojo.store.JsonRest 作为 store 。
网格声明

```
var MyGrid = declare([Grid, Selection, Keyboard]);
window.testgrid = new MyGrid( 
    {
        store       : Observable(Cache(jsonRest, Memory())),
        selectionMode : "none",
        getBeforePut: false,
        columns: getColumns,
        allowSelectAll: true,
        minRowsPerPage: 5,
        maxRowsPerPage: 20,
    }, "gridContainer"); 
```

目前我正在尝试这样的事情，但没有工作......

```
function editEntireRow(grid,event){
// cols 3,5,7,8 steps to the left of the Action column are editable
grid.edit(grid.left(grid.cell(event),3));
grid.edit(grid.left(grid.cell(event),5));
grid.edit(grid.left(grid.cell(event),7));
//grid.edit(grid.left(grid.cell(event),8));
} 
```

# java - 如何删除我没有设置的禁用断点？

> ID：13027350
> 
> 赞同：5
> 
> 时间：2012-10-23T09:28:43.213
> 
> 标签：java, eclipse, debugging

在调试时，我从不是我的代码和我没有设置的断点中获取断点。
它似乎来自包含的库或来自 java 源代码。
例子：

![在此处输入图像描述](../Images/72aa0725ed3dcc743c83e2757d9da5fb.png)

问：
这真的很烦人。我找不到禁用这些断点的方法，我一直按 Resume 继续前进。
如何删除或禁用它们？断点选项卡仅显示我的可跳过或删除的断点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:34:30.507

您可以在 Eclipse 中取消设置以下参数：

```
Window -> Preferences -> Java -> Debug -> Suspend execution on uncaught exceptions 
```

# c++ - c++无锁c风格共享数组（用于添加元素）

> ID：13027351
> 
> 赞同：1
> 
> 时间：2012-10-23T09:28:48.013
> 
> 标签：c++, arrays, multithreading, shared-memory

是否有一个已知的工作代码可以同时在多个线程中将元素添加到共享的、初始化的 c 样式数组（对象），而不必对该资源使用锁定？我的意思是，到一个连续的内存块，其中元素不通过指针链接。

我的意思是，算法，而不是库等。我只想用 20 个没有锁的线程中的元素填充数组，或者必须为要填充的线程指定数组范围（很像无锁链表）。

我正在使用 slackware 13.37 64 位、pthreads、intel c++ 编译器、tcmalloc 分配器。

更新：感谢大家的回答，你们都对你的想法有所帮助；如果可以的话，我会将您的所有想法标记为答案。但是，我仍在为我的代码而苦苦挣扎。所以我稍后把代码放在另一个线程中，看看我的代码到底发生了什么，这样人们才能真正集中注意力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:40:44.303

也许我没有正确理解这个想法，但显而易见的解决方案就是[`std::atomic`](http://en.cppreference.com/w/cpp/atomic)对当前数组索引使用增量。整数类型的原子通常实现为无锁。

但是，如果这不是真的或者您的编译器不支持 C++11，您可以将其替换为您的编译器特定的无锁函数，例如[`InterlockedIncrement`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683614%28v=vs.85%29.aspx)VS 或[`__sync_fetch_and_add`](http://gcc.gnu.org/onlinedocs/gcc-4.3.0/gcc/Atomic-Builtins.html)GCC。

支持英特尔 C++ 编译器[`C++ 11 atomics`](http://software.intel.com/en-us/articles/using-cc-atomics)。您也可以`_InterlockedIncrement64`从头`ia64intrin.h`文件中使用，请参阅第 147 页的[`Intel(R) C++ Intrinsics Reference`](http://software.intel.com/sites/default/files/m/9/4/c/8/e/18072-347603.pdf).

示例代码（证明它[在这里](http://liveworkspace.org/code/ce55cf895d66a7eb420b056b6612ea58)工作）

```
#include <atomic>
#include <thread>
#include <iostream>

const uint max_count = 100;

std::atomic_uint count;
std::string data[max_count];

void thread_func(const char* str)
{
   while(true)
   {
      const uint index = count++;
      if(index >= max_count) break;
      // Use += to see defect if data was already initialized by other thread
      data[index] += str;
      std::this_thread::sleep_for(std::chrono::milliseconds(1));
    }
 }

 int main()
 {
    std::cout << "Atomic counter is lock-free: " << 
       (count.is_lock_free() ? "Yes!" : "No!") << std::endl;

    std::thread t1(thread_func, "Thread 1");
    std::thread t2(thread_func, "Thread 2");
    std::thread t3(thread_func, "Thread 3");

    t1.join();
    t2.join();
    t3.join();

    for(uint i = 0; i < max_count; ++i)
    {
       std::cout<< i << ": " << data[i] << std::endl;
    }

    return 0;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:37:17.680

您可以对数组进行分区，以便每个线程都有一个卡盘。例如，如果您有：

```
static int array[100]; 
```

然后每个线程都可以处理它的一部分：

```
int size = 100 / amount_of_threads;
int* partition = array + thread_id * size; 
```

`thread_id`假设是连续的并且从 0 开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:41:32.687

如果您只是想读取和写入数组中的对象，那么您可以只使用互锁样式指令来读取和写入数据。例如：

```
Foo* data[10];
// some more code
Foo *value=interlocked_read(&data[2]);

interlocked_write(&data[3], new Foo); 
```

联锁将确保您以原子方式读取有效指针，并确保您在访问数组时具有一致的内存视图。如果您使用的是 Windows，请查看[同步](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686360%28v=vs.85%29.aspx)文档中的各种 InterlockedXXX 功能。

如果要从数组中读取对象，对其进行更改然后将其写回，如果要避免锁定并避免另一个线程更改的可能性，则需要使用[比较和交换](http://en.wikipedia.org/wiki/Compare-and-swap)方法（也称为 CAS）与您同时更新的对象。

# java - Java SOAP-WS 客户端恐怖

> ID：13027354
> 
> 赞同：0
> 
> 时间：2012-10-23T09:28:53.867
> 
> 标签：java, web-services, soap, cxf, axis2

使用任何最常用的肥皂服务框架（至少是我尝试过的那些）并提出这种肥皂请求看起来都非常困难

```
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="https://bencws.foobar.com/doc/2008-01-01/" 
    xmlns:soap="http://www.w3.org/2003/05/soap-envelope/">
    <soap:Header xmlns:foo="http://safe.foobar.com/doc/2007-01-01/" xmlns:oof="http://www.w3.org/2005/08/addressing">
        <foo:AccessKeyId>0PKRFZMV7GRJ11N791R2</foo:AccessKeyId>
        <foo:Timestamp>2008-03-07T23:55:22.693Z</foo:Timestamp>
        <foo:Signature>someencodedstring</foo:Signature>
        <oof:Action>SomeAction</oof:Action>
        <oof:To>http://bencws.foobar.com</oof:To>
        <oof:MessageID>120493412293</oof:MessageID>
        <oof:ReplyTo>
            <oof:Address> http://www.w3.org/2005/08/addressing/anonymous</oof:Address>
        </oof:ReplyTo>
    </soap:Header>
    <soap:Body>
    ... 
```

使用[cxf](http://cxf.apache.org/)我开始使用[cxf-codegen-plugin](http://cxf.apache.org/docs/using-cxf-with-maven.html#UsingCXFwithmaven-MavenPlugin)从 wsdl 文件创建类存根。但是随后“标准”的东西不允许更改 soap:Header 命名空间甚至在标签内添加东西（除非你向后弯两次）

对于[axis2](http://axis.apache.org/axis2/java/core/)，我使用了[WSDL2Java](http://axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html#generating)，最终遇到了同样的麻烦。

我已经提出了正式“正确”的肥皂请求，但该死的*foobar*服务无论如何都不会接受它们，除非我的**soap:Envelope**和**soap:Header**看起来不完全一样。

任何帮助都感激不尽。我应该尝试别的吗？我们现在正考虑手动编写 xml 请求，这是我会避免的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:44:09.433

使用 CXF，将命名空间声明到 soap:Envelope 上相对容易。您可以通过请求属性向客户端提供命名空间 -> 前缀的映射：

```
((BindingProvider)proxy).getRequestContext().put("soap.env.ns.map", map); 
```

因此，如果您可以在此处声明 foo 和 oof 命名空间，则可以这样做。将它们添加到soap:Header 绝对不是一件容易的事情。:-(

# css - 如何仅在父元素中使用倾斜？

> ID：13027357
> 
> 赞同：7
> 
> 时间：2012-10-23T09:29:06.057
> 
> 标签：css, css-shapes, skew

有没有办法只在父元素中使用倾斜？我需要创建类似“钻石”的东西作为掩码，并且子元素不会受到影响。在这种情况下，无法使用 png 作为掩码。提前致谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-15T04:34:03.883

这真的很容易，你只需要为孩子们​​解开这个东西。Unskew 意味着应用另一个倾斜变换，但这次是相反的角度。

```
.parent { transform: skewX(45deg); }
.parent > * { transform: skew(-45deg); } 
```

一般来说，如果您在父元素上应用了许多变换并且希望子元素恢复正常，那么您必须应用相同的变换，只是以相反的顺序（在大多数情况下顺序很重要！）和用于倾斜、旋转或平移的角度/长度值减号。在比例的情况下，您需要一个比例因子`1/scale_factor_for_parent`。也就是说，对于规模，你会做这样的事情：

```
.parent { transform: scale(4); }
.parent > * { transform: scale(.25); /* 1/4 = .25 */ } 
```

带孩子的钻石形状很容易。

# [***演示***](http://codepen.io/thebabydino/pen/kGbdt)

**结果**：

![结果](../Images/a36297b003f16088ddb64b509c65e659.png)

**HTML**：

```
<div class='wrapper'>
  <div class='diamond'>
    <div class='child'>Yogi Bear</div>
    <div class='child'>Boo Boo</div>
  </div>
</div> 
```

**CSS**：

```
.wrapper {
  overflow: hidden;
  margin: 0 auto;
  width: 10em; height: 10em;
}
.diamond {
  box-sizing: border-box;
  margin: 0 auto;
  padding: 4em 1em 0;
  width: 86.6%; height: 100%;
  transform: translateY(-37.5%) rotate(30deg) skewY(30deg);
  background: lightblue;
}
.child {
  transform: skewY(-30deg) rotate(-30deg);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:35:45.250

任何`transform`属性都会影响应用到的元素**及其**所有子元素。

因此，`skew`获得单个“父”元素的唯一方法是让它没有子元素（即：它不能同时是父元素！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T09:36:51.287

您能否尝试详细说明您想要得到什么结果？

skew()，就像所有的变换属性总是影响子元素。您可以尝试在同一位置使用两个 HTML 块，一个带有 skew()，另一个带有内容。

此外，如果你只想要一颗钻石，一个带有 scale() 和 rotate() 的矩形框就足够了，但同样没有子元素。

如果你想要那颗钻石作为**遮罩**，我很确定渲染钻石中不存在的部分会更容易。渲染钻石的外部应该不是那么难，毕竟它们只是矩形三角形。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-18T04:04:44.337

实现这一点的唯一方法是将子元素从文档流中取出，并对子元素`position:absolute;`施加相等的负度偏斜。

这样做的问题是您现在必须手动调整父级的大小。

# php - 谷歌云端硬盘不上传文件 PHP

> ID：13027361
> 
> 赞同：0
> 
> 时间：2012-10-23T09:29:29.867
> 
> 标签：php, google-drive-api

是否可以使用 Google drive api（使用 PHP）打开本地文件（即保存在我的服务器上）或所有文件都必须上传到 googe 驱动器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:28:24.683

@yazan 我认为这不是正确的答案。

您的问题是您可以使用*API*打开远程文件吗？如果你打开快捷方式，你会发现没有内容。所以捷径有点用词不当。如果您使用 Web UI 单击链接，Drive 将在您的 URL 处打开一个文件，并希望您打开一个显示该文件的窗口。

这很可能是您想要的，但这不是您提出的问题，即 API*没有*打开远程文件，而是将 Drive Web UI 的用户重定向到您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:46:28.913

找到答案：为外部文件创建 Google Drive 快捷方式

应用程序可以创建存储在云端硬盘外部、不同数据存储或云存储系统中的数据的快捷方式。如果您出于任何原因需要将文件或类似文件的资源存储在云端硬盘之外，您仍可以使用快捷方式将它们列在 Google 云端硬盘中。

快捷方式的行为很像文件。它们可以被打开和创建，在搜索中被索引，并与其他用户共享。与常规文件不同，快捷方式不包含任何内容，并且在同步到桌面时会在用户浏览器中以 URL 的形式打开。同步的快捷方式文件分配有 .glink 扩展名。

```
function insertFile($service, $title, $description, $parentId, $mimeType, $filename) {
  $file = new DriveFile();
  $file->setTitle($title);
  $file->setDescription($description);
  $file->setmimeType('application/vnd.google-apps.drive-sdk');
  $createdFile = $service->files->insert($file);
  print "File ID: " . $file->getId();
} 
```

或参考以下 JAVA 和 python： [https ://developers.google.com/drive/integrate-create#create_a_shortcut_to_a_file](https://developers.google.com/drive/integrate-create#create_a_shortcut_to_a_file)

# jquery - 样式上的属性选择器不起作用

> ID：13027365
> 
> 赞同：0
> 
> 时间：2012-10-23T09:29:49.180
> 
> 标签：jquery

我必须在目前可见的“para”类中找到 div。我试过：

```
 $('.para div[style="display: block;"]').attr("id") 
```

但它不起作用。

我还在 js fiddle 上写了一个例子 --> [http://jsfiddle.net/JZFgp/3/](http://jsfiddle.net/JZFgp/3/)

我很感谢任何提示和解决方案。

马里奥

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T09:32:55.953

这样可以正常工作，但是您的标记在小提琴中无效。这是一个[固定版本](http://jsfiddle.net/jamesallardice/JZFgp/1/)：

```
<table> <!-- You didn't have a `table` or `tr` element -->
    <tr>
        <td class="para">
            <div id="TripSet" class="rounded-corner-region" style="display: none;">
            <div id="DriverSet" class="rounded-corner-region" style="display: none;">
            <div id="TimeSet" class="rounded-corner-region" style="display: block;">
            <div id="Loading" class="borderless-region" style="display: none;">
        </td>
    </tr>
</table>​ 
```

如果没有`table`and`tr`元素，浏览器会尽力解释您的标记并最终只删除`td`（至少在 Chrome 中），这意味着`.para`您的选择器部分不再匹配。

* * *

**编辑**

看起来 Chrome（很可能还有其他人，但我还没有测试过）很高兴你省略该`tr`元素，只要有一个`table`元素。它会自动在您的元素周围添加一个`tbody`和。`tr``td`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:31:01.753

`$('.para div:visible').attr("id")`应该管用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:47:04.543

您不能在选择器中可靠地使用样式属性。一些浏览器会保持属性值不变，而另一些浏览器会将值标准化。

例如，在 IE8 中，读取属性值会给您`"display: block"`而不是`"display: block;"`，但您不能使用带有`[style="display: block"]`(or `[style="display: block;"]`) 的选择器来查找元素。

# javascript - 是否有用于 Javascript 和 Rails 的库来使用密钥进行加密和解密？

> ID：13027366
> 
> 赞同：1
> 
> 时间：2012-10-23T09:29:50.137
> 
> 标签：javascript, ruby-on-rails, encryption

我想用密码在服务器端加密一个字符串，并在客户端用相同的密码解密它。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:19:17.950

您正在寻找一些加密功能。使用您想要的任何方法都可以完成这项工作，因为方法是标准的，并且它们都在大多数语言中都有实现。

以[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)为例！

JS 实现：[http ://code.google.com/p/crypto-js/](http://code.google.com/p/crypto-js/)

红宝石：[https ://gist.github.com/1077760](https://gist.github.com/1077760)

# .net - 为什么不识别 HttpUtility 类？

> ID：13027368
> 
> 赞同：13
> 
> 时间：2012-10-23T09:29:54.687
> 
> 标签：.net, vb.net, http, urlencode

我试图`HttpUtility.UrlEncode`在我的 VB.NET 项目中调用静态，但 IDE 无法识别类说它未声明。

我已将命名空间导入`System.Net`到`System.Web`项目中。

我在文件顶部还有以下内容：

```
Imports System.Net
Imports System.Web 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-23T09:31:54.423

添加对`System.Web.dll`项目的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-23T19:34:11.233

此外，请记住在添加新的“导入”行后单击解决方案资源管理器中适用项目的“刷新”图标按钮。

这样做可以从新的“导入”语句中删除波浪线。

# hibernate - 清除 QueryRegion 中的特定查询

> ID：13027369
> 
> 赞同：1
> 
> 时间：2012-10-23T09:29:57.997
> 
> 标签：hibernate, caching, second-level-cache, hazelcast

如何清除我创建的某些查询区域中的特定查询，而不是所有查询区域。

我使用 Hibernate 和 Hazelcast 作为二级缓存。

# android - 获取安卓应用的启动器Activity名称

> ID：13027374
> 
> 赞同：28
> 
> 时间：2012-10-23T09:30:05.187
> 
> 标签：android, android-activity

我需要获取启动器活动的名称才能从我的应用程序启动活动。任何解决方案

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-21T11:56:29.887

迟到了，但更好的方法是给出启动活动的确切意图

```
PackageManager pm = getPackageManager();
Intent intent=pm.getLaunchIntentForPackage(pacakgeName);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-23T09:32:19.893

使用以下代码获取所有包的启动器活动：

```
 final PackageManager pm = getPackageManager();

        Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
        mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);

        List<ResolveInfo> appList = pm.queryIntentActivities(mainIntent, 0);
        Collections.sort(appList, new ResolveInfo.DisplayNameComparator(pm));

        for (ResolveInfo temp : appList) {

            Log.v("my logs", "package and activity name = "
                    + temp.activityInfo.packageName + "    "
                    + temp.activityInfo.name);

        } 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-12-31T12:04:18.720

尽管上面的答案直接回答了 OP 的问题，但我想加两分钱：

```
/** Backwards compatible method that will clear all activities in the stack. */
public void startLauncherActivity(Context context) {
    PackageManager packageManager = context.getPackageManager();
    Intent intent = packageManager.getLaunchIntentForPackage(context.getPackageName());
    ComponentName componentName = intent.getComponent();
    Intent mainIntent = IntentCompat.makeRestartActivityTask(componentName);
    context.startActivity(mainIntent);
} 
```

在这里，我不仅获得了应用程序的启动器活动，而且还清除了活动的所有后台堆栈（这是我在触发启动器活动时真正需要的）。例如，在身份验证令牌过期的情况下，我称之为。

重要的是使用`IntentCompat`，否则必须求助于`Intent`flag [`Intent.FLAG_ACTIVITY_CLEAR_TASK`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TASK)，它仅在 API 11 中引入。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-27T09:27:49.320

这是您可以使用的最简单的解决方案。而且效果很好。`

```
private String getLauncherActivityName(){
        String activityName = "";
        final PackageManager pm = getPackageManager();
        Intent intent = pm.getLaunchIntentForPackage(getPackageName());
        List<ResolveInfo> activityList = pm.queryIntentActivities(intent,0);
        if(activityList != null){
            activityName = activityList.get(0).activityInfo.name;
        }
        return activityName;
    } 
```

# php - WebDav 像 DMS 一样作为 Sharepoint

> ID：13027378
> 
> 赞同：1
> 
> 时间：2012-10-23T09:30:09.870
> 
> 标签：php, javascript, apache, webdav

我正在尝试使用 WebDAV 实现类似文档管理系统的 Sharepoint。

我配置了一切应有的样子

```
DavLockDB WebDAV/Locks
  <Location /uploads>
    DAV on
    SVNPath Path\to\SVN
    SVNAutoversioning on
    SVNPathAuthz off
    AuthType SSPI
    AuthName "My WebDAV"
    Require valid-user
    SSPIAuth On
    SSPIOmitDomain On
    SSPIAuthoritative On
    SSPIDomain hbs.ch
    SSPIOfferBasic On
    SSPIUsernameCase lower
    ForceType text/plain
  </Location> 
```

使用一点 Javascript，我可以在编辑模式下打开 Doc：

```
var obj = new ActiveXObject('SharePoint.OpenDocuments.3');
obj.EditDocument(path); 
```

但我仍然坚持一个我无法处理的问题。
每个用户的文件夹是在他第一次登录时动态生成的。
因此，他可以动态访问一些动态生成的组文件夹。

如果他可以访问那些属于数据库中某些指标的组文件夹。

那么如何在运行时生成对这些文件夹的权限呢？

据我了解 WebDav 概念，我必须在配置文件中指定每个文件夹。
或者我必须在 AD 级别设置权限。（但这对我来说不可行，因为这些组不存在于 AD 中，它们只存在于数据库中）

有谁知道，我怎么能解决这个问题？
或者另一个我可以用作后端的 DMS？

# asp.net - 使用 VS2012 加密 Azure 的连接字符串

> ID：13027381
> 
> 赞同：3
> 
> 时间：2012-10-23T09:30:22.913
> 
> 标签：asp.net, .net, encryption, azure, connection-string

我想加密我的 Azure ASP.Net 网站的连接字符串。

我在 Windows Azure 博客上找到了以下文章：在 Windows Azure[中保护连接字符串 - 第 3 部分](http://blogs.msdn.com/b/windowsazure/archive/2010/09/09/securing-your-connection-string-in-windows-azure-part-3.aspx)

不幸的是，这篇文章似乎已经过时了。

*   正如文章所述， Azure 现在使用*.cer*文件而不是*.pfx*。（虽然不是问题）
*   无法使用 Visual Studio 2012 构建链接的[PKCS12 提供程序](http://archive.msdn.microsoft.com/pkcs12protectedconfg)

当我尝试在 VS2012 中打开它时，我收到 Installer.vdproj 不兼容的错误，因此我无法为提供程序构建安装程序。

某处是否有提供程序的更新版本？

或者是否有另一篇关于如何为 Azure 加密连接字符串的更新文章？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:01:58.250

正如您所建议的，问题仅在于已安装的项目，提供者项目本身构建得很好。正如所有已安装的似乎所做的是将程序集添加到全局程序集缓存中，您需要做的就是 gacutil -i 从提升的命令提示符到提供程序的 dll，其他一切都可以正常工作。

# java - 从移动设备到服务器的强大文件传输

> ID：13027383
> 
> 赞同：10
> 
> 时间：2012-10-23T09:30:30.477
> 
> 标签：java, php, android, iphone, ios

我需要的是一个解决方案（一个库），用于从移动设备（iOS、Android）到服务器（PHP）的文件传输。基本要求是文件应该被分成块，这样如果在发送文件的过程中数据连接丢失，我不需要重新发送整个文件。低内存使用也是强制性的。我想到了类似 p2p 的方法。最佳实践？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T17:50:44.383

我会推荐你​​ POST 请求。[在这里](http://reecon.wordpress.com/2010/04/25/uploading-files-to-http-server-using-post-android-sdk/)查看使用情况，内存使用率低，但您必须自己处理拆分文件（这应该非常简单，只需修改该解决方案将数据发送到服务器的块保存您的实际位置）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T12:20:21.877

我建议使用 HTTP 作为底层技术。

在 Android 上，我会推荐 loopj 的异步 http 库 ( [loopj](http://loopj.com/android-async-http/) )，因为您可以在干净且易于使用的包中获得自动重试、cookie 处理和其他一些不错的功能。您可能会特别看一下“使用 RequestParams 上传文件”一章。

要拆分文件，请查看此[代码段](http://www.java2s.com/Code/Java/File-Input-Output/Splitfile.htm)。在这种情况下，文件直接写入文件系统，使用另一个输出流将允许您轻松地将块存储在内存中或任何您喜欢的地方。如果内存使用非常重要，您可以尝试读取块直到缓冲区已满，然后直接将其发送到您的服务器，读取下一个块，发送它等等。

干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T19:29:52.673

目前在工具方面存在差距。如果你愿意，可以使用开源下拉框。我现在正在构建一个。www.nofolder.com 就是我们的身份，它几乎处于测试阶段，并将包括一个 android 应用程序。基本上没有任何好的工具可以做到这一点.. 最近最好的东西是 sparkleshare 我知道他们有一个 android 应用程序

# php - 如何使用php在div中回显变量

> ID：13027386
> 
> 赞同：0
> 
> 时间：2012-10-23T09:30:38.060
> 
> 标签：php

在下面的 php 代码中，我试图回显 $title 和 $desc 的值，但它不显示仅显示变量名称的值。任何帮助将不胜感激。

```
foreach ($prod as $product) { 
    $title=$product['title'];
    $desc=$product['desc'];

    echo '
    <div class="detail">
    <div class="img"><img src="images/pro1.png"/></div>
    <div class="textdetail"><p><b>$title</b><br /></p>
    <p><a href="#">$desc</a></p>
    </div><br />
    </div>';
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T09:32:53.250

您必须使用双引号，或者将它们放在字符串之外 - 为了清楚起见，我个人总是更喜欢后一种方法。要么工作。

这应该这样做：

```
foreach ($prod as $product) { 
    $title=$product['title'];
    $desc=$product['desc'];

    echo '
    <div class="detail">
    <div class="img"><img src="images/pro1.png"/></div>
    <div class="textdetail"><p><b>'.$title.'</b><br /></p>
    <p><a href="#">'.$desc.'</a></p>
    </div><br />
    </div>
    ';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:35:34.297

```
<?php
foreach ($prod as $product) { 
 $title=$product['title'];
 $desc=$product['desc'];?>
  <div class="detail">
   <div class="img"><img src="images/pro1.png"/></div>
   <div class="textdetail"><p><b><?php echo $title ;?></b><br /></p>
    <p><a href="#"><?php echo $desc;?></a></p>
   </div><br />
  </div>
<?php
 }?> 
```

这是同时使用 php 和 html 时的最佳实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:33:03.367

尝试用大括号 { } 将变量包裹在 echo 中。这是一个更简单的解决方案。像这样：

```
foreach ($prod as $product) { 
    $title=$product['title'];
    $desc=$product['desc'];

    echo "
    <div class='detail'>
    <div class='img'><img src='images/pro1.png' /></div>
    <div class='textdetail'><p><b>{$title}</b><br /></p>
    <p><a href='#'>{$desc}</a></p>
    </div><br />
    </div>
    ";

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:33:54.953

您需要连接字符串，或者使用双引号而不是单引号，但在这种情况下，您需要转义字符串内的所有双引号。

另一种解决方案是使用heredoc：

```
echo <<<EOF
    <div class="detail">
    <div class="img"><img src="images/pro1.png"/></div>
    <div class="textdetail"><p><b>$title</b><br /></p>
    <p><a href="#">$desc</a></p>
    </div><br />
    </div>
EOF; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T09:34:37.030

使用双引号将变量名替换为其内容（不要忘记转义双引号）：

```
echo "
    <div class=\"detail\">
    <div class=\"img\"><img src=\"images/pro1.png\"/></div>
    <div class=\"textdetail\"><p><b>$title</b><br /></p>
    <p><a href=\"#\">$desc</a></p>
    </div><br />
    </div>
    "; 
```

或使用字符串连接（更快）：

```
echo '
    <div class="detail">
    <div class="img"><img src="images/pro1.png"/></div>
    <div class="textdetail"><p><b>'.$title.'</b><br /></p>
    <p><a href="#">'.$desc.'</a></p>
    </div><br />
    </div>
    '; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T09:39:59.380

```
<?php foreach ($prod as $product):?>
    <div class="detail">
    <div class="img"><img src="images/pro1.png"/></div>
    <div class="textdetail"><p><b><?=$product['title']?></b><br /></p>
    <p><a href="#"><?=$product['desc']?></a></p>
    </div><br />
    </div>
<?endforeach;?> 
```

或者

```
foreach ($prod as $product) { 
    $title=$product['title'];
    $desc=$product['desc'];

    echo '
    <div class="detail">
    <div class="img"><img src="images/pro1.png"/></div>
    <div class="textdetail"><p><b>' . $title . ' </b><br /></p>
    <p><a href="#">' . $desc . ' </a></p>
    </div><br />
    </div>
    ';
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T09:43:21.623

```
<?php foreach ($prod as $product) { ?>

    <div class="detail">
    <div class="img"><img src="images/pro1.png"/></div>
    <div class="textdetail"><p><b><?php echo $product['title']; ?></b><br /></p>
    <p><a href="#"><?php echo $product['desc']; ?></a></p>
    </div><br />
    </div>

<?php } ?> 
```

# css - 如何覆盖浏览器字体？

> ID：13027389
> 
> 赞同：0
> 
> 时间：2012-10-23T09:30:45.300
> 
> 标签：css, internet-explorer

我是 CSS 的新手。具体来说，现在我使用的是 IE8。我的网页`MS PGothic`在`japanese script`. 但是当我们将 IE8 浏览器字体更改为`Arial Unicode MS`. 网页看起来不太好。这只发生在 IE8、Firefox 和 chrome 中，即使更改也可以。

我的问题是我有很多 CSS 文件，超过 200 个。

*   所以我想将我的浏览器字体更改为我的网站的 MS PGothic
*   还是只使用网页字体而不使用浏览器字体？

哪个是可能的？我想知道代码示例。非常感谢任何帮助。

在更改为 Arial Unicode MS 之前 ![改变前](../Images/ca6f048af939ddc459275e1e393dff31.png)

更改为 Arial Unicode MS 后 ![改变后](../Images/86881caaa95c54ea1430b6d6a13230d1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T02:25:04.403

听起来您需要在 CSS 中指定字体，可以通过这种方式完成（回退到无衬线字体）：

```
body {
  font-family: "MS PGothic", sans-serif;
} 
```

但是，如果您有这么多 CSS 文件，则`font-family`其中一个文件中的值会被覆盖，因此您可能希望使用该`!important`值，如下所示：

```
body {
  font-family: "MS PGothic", sans-serif !important;
} 
```

这可以通过包含选择器来进一步改进`input`，`textarea`以便表单字段也使用此字体：

```
body, input, textarea {
  font-family: "MS PGothic", sans-serif !important;
} 
```

我们也可以使用日文字体名称，以防万一。最后，我建议指定看起来比 MS PGothic 更流畅的 Meiryo 字体，并且可以在 Windows Vista 及更高版本上使用。此外，应该包括 Mac 的字体，所以我认为日语页面的最佳 CSS 是这样的：

```
body, input, textarea {
  font-family: "ヒラギノ角ゴ Pro W3", "Hiragino Kaku Gothic Pro", Osaka, "メイリオ", Meiryo, "ＭＳ Ｐゴシック", "MS PGothic", sans-serif !important;
} 
```

# javascript - 将标签放在文本输入中 - 在 IE7 中不起作用

> ID：13027396
> 
> 赞同：0
> 
> 时间：2012-10-23T09:31:14.317
> 
> 标签：javascript, html, css, internet-explorer-7

我正在为一家培训机构制作在线报名表。文本输入框的标签已使用[http://attardi.org/labels/上的解决方案放置在输入本身内](http://attardi.org/labels/)

它在 Chrome、Firefox、IE9 和 IE8 中完美运行，但由于某种原因在 IE7 中出现了问题（惊喜，惊喜！）

如果我单击标签所在区域的输入字段，浏览器不会关注输入。只有当我点击标签后的空白区域时，输入字段才会生效，或者奇怪的是，如果我点击输入字段下方的位置。

这是 CSS 还是 JavaScript 问题，任何人都可以提出解决方案吗？

您可以在[http://testing.xenongroupadmin.com/enrolment](http://testing.xenongroupadmin.com/enrolment)访问完整的表单，但请注意 - HTML、CSS 和 HTML 文件非常庞大，可能需要一些时间才能筛选！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:35:15.297

放弃您链接到的脚本。

使用常规 html5`placeholder`属性 ( [http://davidwalsh.name/html5-placeholder](http://davidwalsh.name/html5-placeholder) ) - 这是在大多数浏览器中获得所需内容的最简洁的解决方案。要处理 IE7/8，您可以使用 javascript shiv，如下所示：[http ://dipaksblogonline.blogspot.com/2012/02/html5-placeholder-in-ie7-and-ie8-fixed.html](http://dipaksblogonline.blogspot.com/2012/02/html5-placeholder-in-ie7-and-ie8-fixed.html)

# html - 谷歌搜索结果中的烂番茄星级

> ID：13027397
> 
> 赞同：2
> 
> 时间：2012-10-23T09:31:32.850
> 
> 标签：html, css, xhtml, meta, rotten-tomatoes

我只是想知道如何显示从单个页面获取的星级评分，以显示在谷歌结果中，比如烂番茄、metacritic 或 imdb。如果您在 google 中搜索“Drive Rotten Tomatoes”，它会返回一个链接，其中还包含评级 % 以及导演和盯着演员的链接。

我在哪里插入此信息以获得类似的结果。它是否包含在每个页面的元数据中？它是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:36:33.997

请参阅[Google 丰富网页摘要](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=146645)和[schema.org - 评分](http://www.schema.org/Review)

# ios - 在 UIView 外拖动时触发 touchesEnded

> ID：13027398
> 
> 赞同：1
> 
> 时间：2012-10-23T09:31:41.147
> 
> 标签：ios, ios5, ios6

我有一个 UIView 子类，我在其中使用 touchesBegan、touchesMoved、touchesEnded 处理触摸。我注意到当我在内部开始触摸然后在 UIView touchesEnded 外部拖动时不会触发，当我在 UIView 框架外拖动时有没有办法调用它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:03:41.123

请改用 touchesCancelled。

```
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:06:07.003

可能它正在调用`- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event`

请检查[UIResponder 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)

> **touchesCancelled:withEvent:**
> 
> 当系统事件（例如内存不足警告）取消触摸事件时发送到接收器。
> 
> `- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event`
> 
> *参数*
> 
> **触动**
> 
> ```
> A set of UITouch instances that represent the touches for the ending phase of the event represented by event. event
> 
> An object representing the event to which the touches belong. 
> ```
> 
> **讨论**
> 
> 该方法在Cocoa Touch框架接收到需要取消触摸事件的系统中断时调用；为此，它会生成一个具有 UITouchPhaseCancel 阶段的 UITouch 对象。中断可能会导致应用程序不再处于活动状态或视图从窗口中删除
> 
> 当一个对象接收到 touchesCancelled:withEvent: 消息时，它应该清除在其 touchesBegan:withEvent: 实现中建立的任何状态信息。
> 
> 此方法的默认实现什么也不做。然而，UIResponder 的直接 UIKit 子类，尤其是 UIView，将消息转发到响应者链。要将消息转发给下一个响应者，请将消息发送给 super（超类实现）；不要将消息直接发送给下一个响应者。例如，
> 
> **[超级 touchesCancelled:touches withEvent:event];**
> 
> 如果您在不调用 super 的情况下覆盖此方法（一种常见的使用模式），那么您还必须覆盖用于处理触摸事件的其他方法，如果只是作为存根（空）实现。可用性
> 
> ```
> Available in iOS 2.0 and later. 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:30:12.123

即使你在你的视野之外，你仍然应该进入`touchesMoved`你`viewController`的视野。我会将数组添加到您的自定义`UIView`中，这将保留此视图分配给的触摸对象并实现以下逻辑：

1.  当您收到时`touchesBegan`- 为给定的触摸坐标匹配位置将触摸对象添加到数组`UIView`中（您可能必须遍历所有子视图并将坐标与框架匹配以找到正确的子视图）
2.  当您收到时`touchesMoved`- 从`UIView's`阵列中删除先前位置的触摸并将其添加到`UIView`当前位置（如果有）
3.  当您收到`touchesEnded`& - 从所有阵列`touchesCancelled`中删除触摸`UIViews`

当您从自定义 UIView 数组中删除或添加触摸对象时，您可能会调用委托方法（实现观察者模式），因为此时您知道它是真正按下还是未按下事件。请记住，您可能在一个数组中有许多触摸对象，因此在调用您的委托之前，请检查您是添加了第一个对象还是删除了最后一个对象，因为这是您应该调用您的委托的唯一情况。

我在上一场比赛中实现了这样的解决方案，但`UIViews`我没有虚拟按钮。

# c# - 有哪些方法可以支持 ASP.NET 网站的多种语言？

> ID：13027402
> 
> 赞同：0
> 
> 时间：2012-10-23T09:31:45.190
> 
> 标签：c#, asp.net, localization

我想在运行时不使用 Google 翻译 API 将我的网站翻译成法语。

ASP.NET 中是否有任何内置方法可以让您支持多种语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:46:19.667

由于您正在运行 ASP.NET 站点，因此您应该能够使用[资源文件](http://msdn.microsoft.com/en-us/library/fw69ke6f%28v=vs.80%29.aspx)进行本地化。

对于每一位文本（例如标题、段落等），您在资源文件中定义一个字段。然后，您可以为每种语言创建一个资源文件，您可以根据需要的语言进行交换。

# jquery - jquery选择具有某些属性的孩子的父母

> ID：13027404
> 
> 赞同：2
> 
> 时间：2012-10-23T09:31:49.090
> 
> 标签：jquery, styles, selector, children

我读过这个问题：

[jQuery - 选择具有特定样式的孩子](https://stackoverflow.com/questions/7349858/jquery-select-children-which-has-specific-styles)

但我的问题有点不同。

我想选择他们的 1 级孩子（不是所有的后代）具有某些特定风格的 PARENTS。像这样的东西：

```
<ul id="BIG">
    <li>Home

        <ul id="SMALL">
            <li> 123 </li>
            <li name="foo"> 123 </li>
            <li> 123 </li>
        </ul>

    </li>
    <li>Articles</li>
    <li>Petitions</li>
    <li>Contact</li>
</ul> 
```

我想用 id="SMALL" 抓住 UL。但我的选择器捕获了所有 2 个 UL 标签：

```
$('ul:has(li[name="foo"])') 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:35:59.007

试试这个：

```
$('li[name="foo"]').parent(); 
```

[演示在这里](http://jsfiddle.net/ht7Em/)。

请注意，根据属性选择 DOM 元素很慢。如果可以，请尝试限制搜索范围。例如：

```
$('#BIG').find('li[name="foo"]').parent(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T09:36:36.480

使用[子](http://api.jquery.com/child-selector/)选择器`>`，如下所示：

```
$('ul > li[name="foo"]').parent() 
```

查看工作[**演示**](http://jsfiddle.net/gnel/ccar2/1/)

# linux - linux ftp 服务器日志文件以包含附加信息

> ID：13027408
> 
> 赞同：0
> 
> 时间：2012-10-23T09:31:54.500
> 
> 标签：linux, ftp

我在 linux box（fedora 11，vsftpd）上实现了 ftp 服务器。到目前为止一切正常，但我需要 Ftp 服务器日志文件来包含传输速率信息。

当我从客户端使用“get”或“put”命令时，我在 ftp 客户端收到以下消息

例子

> ftp：在 0.00 秒内以 18000.00kbytes/sec 接收 18 个字节。

有什么办法，我可以在 ftp 服务器端得到同样的信息吗？

下面是我的 xferlog 文件的示例

```
Tue Oct 23 01:28:52 2012 1 10.65.112.55 1 /home/test/testfile b _ o r test ftp 0 * c 
Tue Oct 23 01:32:46 2012 1 10.65.112.55 18 /home/test/uploadServer b _ i r test ftp 0 * c 
Tue Oct 23 01:50:23 2012 1 192.168.10.27 1 /home/test/testfile a _ o r test ftp 0 * c 
Tue Oct 23 01:50:36 2012 1 192.168.10.27 19 /home/test/test a _ i r test ftp 0 * c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:34:23.217

我真的很感谢大家在这里的帮助。好吧，我已经解决了。我在 vsftpd.conf 文件中包含 了***dual_log_enable= yes***，因此它创建了新的日志文件为 /var/log/vsftpd.log，它包含了我需要的所有信息。

# ruby - 如何使用 Nokogiri 获取 XML 数据中的值？

> ID：13027409
> 
> 赞同：1
> 
> 时间：2012-10-23T09:31:55.173
> 
> 标签：ruby, nokogiri

创建用户后，我正在使用 Nokogiri 解析从 roar 引擎获取的 XML 数据。XML 如下所示：

```
<roar tick="135098427907">
  <facebook>
    <create_oauth status="ok">
      <auth_token>14802206136746256007</auth_token>
      <player_id>8957881063899628798</player_id>
    </create_oauth>
   </facebook>
</roar> 
```

我对 Nokogiri 完全陌生。如何获得`status`,`auth_token`和的值`player_id`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:45:56.607

```
str = "<roar ......"
doc = Nokogiri.XML(str)
puts doc.xpath('//create_oauth/@status')  # => ok
puts doc.xpath('//auth_token').text       # => 148....
# player_id is the same as auth_token 
```

[从w3schools](http://www.w3schools.com/xpath/default.asp)向您学习一些好的 xpath 是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T09:47:12.653

这个怎么样

```
h1 = Nokogiri::XML.parse %{
    <roar tick="135098427907">
  <facebook>
    <create_oauth status="ok">
      <auth_token>14802206136746256007</auth_token>
      <player_id>8957881063899628798</player_id>
    </create_oauth>
   </facebook>
</roar>
}

h1.xpath("//facebook/create_oauth/auth_token").text()
h1.xpath("//facebook/create_oauth/player_id").text() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T09:57:02.870

您可以使用[紫菜](http://rubydoc.info/gems/nori/1.1.3/frames)宝石。它是一个 xml 到哈希的转换器，在 ruby​​ 中访问哈希非常方便

```
require 'nori'

Nori.parser = :nokogiri

xml = "<roar tick='135098427907'>
           <facebook>
               <create_oauth status='ok'>
                   <auth_token>14802206136746256007</auth_token>
                   <player_id>8957881063899628798</player_id>
               </create_oauth>
           </facebook>
      </roar>"

hash = Nori.parse(xml)
create_oauth = hash["roar"]["facebook"]["create_oauth"]

puts create_oauth["auth_token"] # 14802206136746256007
puts create_oauth["@status"]    # ok
puts create_oauth["player_id"]  # 8957881063899628798 
```

# xcode - xcdatamodeld 更改未反映在构建的应用程序中？

> ID：13027414
> 
> 赞同：0
> 
> 时间：2012-10-23T09:32:18.823
> 
> 标签：xcode, core-data, fetched-properties

我一直在努力让获取的属性在我的应用程序中正常工作，并且发现它非常令人困惑 - 主要是由于我终于弄清楚了这个奇怪的问题！

基本上，如果我在我的 xcdatamodeld 中更改 Fetched 属性的谓词，然后 Build-Run 应用程序会忽略这个新谓词并继续使用旧谓词。

很难描述这是多么令人讨厌和令人沮丧，但我确信我不是第一个遇到这种情况的人。

关于如何强制它在每次重建时更新更改的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:46:55.607

好的，根据 Apple 的 Core Data 版本控制指南，两个版本在以下情况下被视为相同：

*   对于每个实体，以下属性必须相同：名称、父级、isAbstract 和属性。不比较 className、userInfo 和验证谓词。

*   对于每个实体中的每个属性，以下属性必须相等：name、isOptional、isTransient、isReadOnly，对于属性 attributeType，以及对于关系 destinationEntity、minCount、maxCount、deleteRule 和 inverseRelationship。

所以看起来改变一个获取的属性的谓词并不符合“改变”的条件......多么令人困惑。

您可以通过更改核心数据模型标识符的值来强制它考虑模型“已更改”

# mysql - 没有记录时MySql计算返回零

> ID：13027417
> 
> 赞同：0
> 
> 时间：2012-10-23T09:32:21.237
> 
> 标签：mysql

早上好，用这个把我的头撞到墙上，希望能得到一些建议。我有 3 个表加入以显示销售数据，如下所示；

```
Select
  a._CommMonth As Month,
  Sum(a._CommDue) As Commission,
  Sum(a.`Network Paid`) As Company,
  Sum(a.Payable) As Adviser,
  c.Fee As Charge,
  Sum(a.Payable) - (c.Fee) As Total
From
  pms_payments.dbo_payments a 
  Inner Join pms_payments.dbo_nscontacts b 
  On b._Firm_Name = a._Firm_Name 
  Left Join pms_payments.dbo_clawback c 
  On b.ContactID = c.ContactID And a._CommMonth = c.Month
Where
  b.ContactID = 199
Group By
  a._CommMonth 
```

Sum(a.Payable) - (c.Fee) As Total 字段是我遇到问题的地方，如果 c.fee 表中不存在任何记录，则不会返回任何内容，例如 100 - [No record] = 100。如果记录存在的值按预期扣除，例如 100 - 15 = 85。

那有意义吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:36:59.567

如果我正确理解了您的问题，您得到的不是 100 - 无记录 = 100，而是 100 - 无记录 = [无]。

假设这是正确的，那么我相信您的问题源于 null 与零不同（并且不是有效数字）这一事实。您可以使用 IFNULL() 函数将空值替换为零，并且您的减法应该可以工作。

如果我误解了这个问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:35:15.840

看看使用[IFNULL](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)

> IFNULL(expr1,expr2)
> 
> 如果 expr1 不为 NULL，则 IFNULL() 返回 expr1；否则返回 expr2。IFNULL() 返回一个数字或字符串值，具体取决于使用它的上下文。

就像是

```
Sum(a.Payable) - IFNULL(c.Fee,0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T09:53:25.790

您好，感谢你们，IFNULL 函数正是我所需要的。抱歉，我不能同时接受这两个答案，但非常感谢您付出的努力和时间。

```
Sum(a.Payable) - IFNULL (c.Fee,0) As Total 
```

问候

加里

# wcf - 当我添加更多机器时，为什么我的 azure 托管 WCF 服务无法扩展？

> ID：13027422
> 
> 赞同：2
> 
> 时间：2012-10-23T09:32:41.337
> 
> 标签：wcf, azure, azure-web-roles, throughput

我们有一个 WCF 服务，我们在 azure 上托管。它需要一些 xml 并在内存中处理它（没有外部调用/db 等，大约需要 150 毫秒）并返回一些 xml。

我们一直在对其进行负载测试，当我们在 1,2 和 4 核机器上运行它时，我们可以最大限度地利用处理器并获得每秒最多 40 次调用的吞吐量（在 4 核机器上）。然而，当我们切换到一台 8 核机器或两台 4 核机器时，我们仍然每秒只能收到大约 40 个调用。

当我扩大处理机器的数量时，为什么我无法获得更多的吞吐量？我希望添加更多机器会相当线性地增加我的吞吐量，但事实并非如此。为什么不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:12:52.810

不确定 Azure 是否有特定的限制，但 .NET 框架对一次可以处于活动状态的同一地址的传出连接数有限制。在这篇名为“[提高 Web 服务性能](http://msdn.microsoft.com/en-us/library/ff647786.aspx)”的 MSDN 文章中，它提到默认值为 2。

> 配置 maxconnection 属性
> 
> Machine.config 中的 maxconnection 属性限制并发出站呼叫的数量。
> 
> 注意 此设置不适用于本地请求（来自与 Web 服务位于同一服务器上的 ASP.NET 应用程序的请求）。该设置适用于来自当前计算机的出站连接，例如，ASP.NET 应用程序和调用其他远程 Web 服务的 Web 服务。maxconnection 的默认设置是每个连接组两个。对于调用 Web 服务的桌面应用程序，两个连接可能就足够了。对于调用 Web 服务的 ASP.NET 应用程序，两个通常是不够的。将 maxconnection 属性从默认的 2 更改为（CPU 数量的 12 倍）作为起点。

```
<connectionManagement>
  <add address="*" maxconnection="12"/>
</connectionManagement> 
```

> 请注意，每个 CPU 12 个连接是一个任意数字，但经验证据表明，当您还将 ASP.NET 限制为 12 个并发请求时（参见本章后面的“线程”部分），它对于各种场景都是最佳的。但是，您应该根据您的情况验证适当的连接数。

这些限制是为了防止单个用户独占远程服务器上的所有资源（DOS 攻击）。由于这是在 Azure 中运行的一项服务，我猜想他们在终端上进行了节流，以防止用户使用来自单个 IP 的所有传入连接。

我的下一步是检查并查看 azure web 角色是否存在并发连接限制（[此线程建议存在并且它是可配置的）](http://social.msdn.microsoft.com/Forums/en-US/windowsazuretroubleshooting/thread/cbc1f1bb-9ff6-4fef-8ef2-fa3547747449)并增加它。否则，我会尝试从多个来源执行负载测试，看看您是否仍然遇到相同的限制。

# jquery - 获取 currentRowindex 我如何获取开始时间和结束时间

> ID：13027425
> 
> 赞同：2
> 
> 时间：2012-10-23T09:32:49.380
> 
> 标签：jquery

[JS小提琴](http://jsfiddle.net/65S7N/6/)

这是我的 jsfiddle 获取 currentRowindex 我如何获取开始时间和结束时间。用户可以拖动类（第 7、第 8、第 9 ..）单元格并选择时间。用户限制为不选择超过 3 个单元格我正在获取 currentRowindex。如何使用 rowIndex 获取时间。

```
 var currentRow1 = $('.csstdhighlight').closest('td').parent()[0].sectionRowIndex; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:21:15.700

这确实是一个肮脏的编码，但解决了你的问题..

```
firstMin = $(".csstdhighlight").closest('tr').eq(0).find('td').eq(1).text().trim();
for(i=0;i<4;i++) {
    var firstResult = $('#tableAppointment tr').eq(rowIndex-i).find('td').eq(0).text().trim();
    if(firstResult !="") {
        firstHour = firstResult.replace(":00AM","").replace(":00PM","").trim();
    }
}
lastMin = $('#tableAppointment tr').eq(lastRow).find('td').eq(1).text().trim();
for(i=0;i<4;i++) {
    var lastResult = $('#tableAppointment tr').eq(lastRow-i).find('td').eq(0).text().trim();
    if(lastResult !="") {
        lastHour = lastResult.replace(":00AM","").replace(":00PM","").trim();
    }
}
alert("[" + firstHour + ":" + firstMin + "] - [" + lastHour + ":" + lastMin + "]"); 
```

在您的演示中播放.. [http://jsfiddle.net/BerkerYuceer/Ybp4m/](http://jsfiddle.net/BerkerYuceer/Ybp4m/)

你可以从这里根据你的需要发展它..

# iphone - iPhone - iTunes 商店状态总是显示等待上传？

> ID：13027431
> 
> 赞同：0
> 
> 时间：2012-10-23T09:33:01.580
> 
> 标签：iphone, app-store, itunes-store

我已经在 3 小时前成功提交了 iTunes 商店的应用程序。但是 iTunes 商店中的状态总是显示“等待上传”。这是我将应用程序提交到 iTunes 商店的步骤。1\. 产品 -> 存档 2\. 组织者 -> 验证（验证成功） -> 提交。提交后，我收到应用程序验证成功并提交到 iTunes 商店的消息。但状态仍然显示“等待上传”。这会是什么原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:37:59.837

真的很奇怪......通常它应该在上传后立即更改状态。

如果您尝试再次上传您的应用程序会发生什么？

（存档 -> 组织者 -> 分发 -> 提交）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:23:46.003

这是您可以关注的链接...逐步指南...希望对您有所帮助。

[http://www.edumobile.org/iphone/iphone-programming-tutorials/submitting-iphone-apps-to-the-apple-app-store-a-step-by-step-guide/](http://www.edumobile.org/iphone/iphone-programming-tutorials/submitting-iphone-apps-to-the-apple-app-store-a-step-by-step-guide/)

这是提交应用程序的旧方式，如果您有任何问题，请告诉我。但如果它有助于接受答案:)

# java - 部署期间出现 ClassNotFound 异常

> ID：13027436
> 
> 赞同：0
> 
> 时间：2012-10-23T09:33:10.940
> 
> 标签：java, deployment, intellij-idea, jboss7.x, classnotfoundexception

我有麻烦了！我正在尝试在部署期间和部署期间部署我的应用程序，`JBoss AS 7.1.1.Final`但`IntelliJ IDEA 11`出现此异常：

```
12:23:42,566 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC00001: Failed to start service jboss.deployment.subunit."kladr.ear"."kladr-ejb-1.0-SNAPSHOT.jar".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.subunit."kladr.ear"."kladr-ejb-1.0-SNAPSHOT.jar".POST_MODULE: Failed to process phase POST_MODULE of subdeployment "kladr-ejb-1.0-SNAPSHOT.jar" of deployment "kladr.ear"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_37]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_37]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_37]
Caused by: java.lang.RuntimeException: Error getting reflective information for class com.kmware.ttk.kladr.dao.KladrUpdateDAO with ClassLoader ModuleClassLoader for Module "deployment.kladr.ear.kladr-ejb-1.0-SNAPSHOT.jar:main" from Service Module Loader
    at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:70) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
Caused by: java.lang.NoClassDefFoundError: com/linuxense/javadbf/DBFException
    at java.lang.Class.getDeclaredMethods0(Native Method) [rt.jar:1.6.0_37]
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427) [rt.jar:1.6.0_37]
    at java.lang.Class.getDeclaredMethods(Class.java:1791) [rt.jar:1.6.0_37]
    at org.jboss.as.server.deployment.reflect.ClassReflectionIndex.<init>(ClassReflectionIndex.java:65) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:66) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 10 more
Caused by: java.lang.ClassNotFoundException: com.linuxense.javadbf.DBFException from [Module "deployment.kladr.ear.kladr-ejb-1.0-SNAPSHOT.jar:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 15 more 
```

该库`linuxense`以`pom.xml`. 而且我不知道这个错误的原因是什么。这是pom的一部分：

```
....
  <dependency>
           <groupId>com.linuxense</groupId>
           <artifactId>javadbf</artifactId>
           <version>0.4.0</version>
  </dependency>
.... 
```

应用程序正在 EAR 存档中部署。EAR 包含 EJB.jar 和 WEB.war 应用程序（具有不同的名称）。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:13:19.773

您`ClassNotFoundException`是由于部署中不存在 linuxense jar 引起的。看看[这个问题](https://stackoverflow.com/questions/7494927/maven-ejb-project-package-with-dependencies)，寻找解决这个问题的可能方法。

# html - 如何删除几个 HTML 文件上的类似片段？

> ID：13027442
> 
> 赞同：0
> 
> 时间：2012-10-23T09:33:39.087
> 
> 标签：html, regex, sed

我正在将网站转换为 PDF，但其中有图像，并且所有图像中都有一个文本，单击该文本可让您自行生成图像。

我认为这将是负责显示该文本的代码，因为我在其中一个文件中删除了它，并且不再显示文本和链接。

```
<div class="v1"><a target="_self" href="images/graphics/1.jpg">[View full size image]</a></div> 
```

问题是大约有 200 多个包含此类似文本的 HTML 文档，只是更改了`href`.

是否有任何简单的方法可以摆脱这一切而不必一一进行？也许是一个正则表达式`sed`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:44:38.167

如果表达式总是在一行并且唯一的区别在于`href`,`sed`是一个可能的解决方案：

```
sed -e 's,<div class="v1"><a target="_self" href="[^"]*">\[View full size image\]</a></div>,,' 
```

我使用了另一种分隔符`,`，因此`/`不必在结束标签中转义。但是，链接文本中的括号需要转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:39:49.270

是的，正则表达式可能是这里最简单的解决方案。如果只是从所有文件中删除这一行的问题，那么我只需在编辑器中打开它们（[Sublime Text 2](http://www.sublimetext.com)做得很好）并执行正则表达式搜索和替换。以下搜索模式可能会起作用：

`<div class=\"v1\"><a target=\"_self\" href=\"[^"]+\">\[View full size image\]</a></div>`

# c++ - 在 Ubuntu 中正确链接 GLX 库

> ID：13027446
> 
> 赞同：-2
> 
> 时间：2012-10-23T09:33:51.317
> 
> 标签：c++, c, opengl, linker, glx

我正在尝试编译其中一种 X11 + OpenGL 组合，但我对编译器不满意。特别是，我得到：

```
 undefined symbol: glXMakeCurrent 
```

我试过了

```
 -lX11 -lGLU -lGL -lXext 
```

作为链接器的参数，以及它们的一些排列，到目前为止还没有运气。

我正在运行 Ubuntu 12.04，并且我已经安装了所有与我有一个模糊想法的 opengl 相关的开发包。我也在用 C++ 开发，如果没有准备好 opengl 头文件，这可能会导致问题......但他们是对的吗？

我什至在 /usr/lib/x86_64-linux-gnu/ 中使用 fgrep 显式查找符号，但它不存在，此外，“nm”表示没有符号。

那么，与 glx 链接的正确方法是什么？

编辑：这是链接问题，当 python 尝试加载已编译（并且链接不正确）的模块时会产生错误。不是在编译时。

编辑：这是编译日志

```
 scons: Reading SConscript files ...
    scons: done reading SConscript files.
    scons: Building targets ...
    g++ -o build/debug/objects/alve/layouter/flowing_data.os -c -std=c++0x -g -I/usr     /include/python2.7 -fPIC -I/opt/cairo_new/include/cairo/ -I/opt/boost_1_48_0/include -DMIC_RT_SPEED_BACKS -Icsrc csrc/alve/layouter/flowing_data.cpp
    g++ -o build/debug/objects/alve/layouter/liblayouter.so -L/opt/cairo_new/lib -L/opt/boost_1_48_0/lib -shared build/debug/objects/alve/layouter/flowing_data.os build/debug/objects/alve/layouter/show_network.os -Lbuild/debug/lib -Llibdeps
    Install file: "build/debug/objects/alve/layouter/liblayouter.so" as "build/debug/lib/liblayouter.so"
    g++ -o build/debug/objects/alve/layouter/liblayouter_mod.so -L/opt/cairo_new/lib -L/opt/boost_1_48_0/lib -shared build/debug/objects/alve/layouter/module.os  Lbuild/debug/lib -Llibdeps -lboost_python build/debug/objects/alve/layouter/liblayouter.so -lcairo -lX11 -lGL -lGLU -lXext
    scons: done building targets. 
```

这是函数的调用方式：

```
glXMakeCurrent (dpy, win, ctx); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:48:29.050

 ~~消息“未定义符号”表明它不是链接器，而是编译单元问题：编译器不知道该符号`glXMakeCurrent`，因为它既没有声明也没有定义，但你使用了它。

可能没有包含 GLX 标头。

添加

```
#include <GL/glx.h> 
```

 ~~事实证明，OPs 问题与以下事实有关，即构建由级联共享对象组成，形成一个 Python 模块。一个共享对象实现实际的 OpenGL 操作，而另一个共享对象与 Python 解释器接口。

现在共享对象 (.so) 本身就是完全限定的 ELF 二进制文件，每个都有自己的导入和导出符号表。可以将共享对象配置为公开它链接到的其他共享对象的所有符号。但是，共享对象将看不到它们链接到的编译单元的任何符号（如果您考虑一下，这是可以预料的，因为共享对象不能也不应该对其将要成为的环境做出任何假设链接到）。

因此，在较大的构建中编译和链接多个共享对象时，将每个共享对象单独链接到运行时需要的任何库非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:02:48.967

正如@datenwolf 的方式，链接需要特殊的预防措施。它们是什么对我来说是个谜，但使用 ldd 会有所帮助。所以基本上我所做的是在最终和中间共享对象中使用 ldd 。尽管有命令行参数，但我的库没有与 libGL 及其依赖项链接，直到我在中间步骤（生成“liblayouter.so”）中还包含“-lGL -lGLU -lX11”。~~~~

# c# - 在 Metro 中等待线程完成

> ID：13027449
> 
> 赞同：3
> 
> 时间：2012-10-23T09:34:01.847
> 
> 标签：c#, windows-8, microsoft-metro

在 Metro 中，我可以知道您如何等待线程完成。在传统的桌面应用程序中，要等待线程完成，我将使用

`thread.Join()`

但是，在地铁呢？

```
// public void getSignalProcessingRunnable(IAsyncAction source) {}
IAsyncAction ThreadPoolWorkItem = Windows.System.Threading.ThreadPool.RunAsync(getSignalProcessingRunnable);
// How to wait for thread to complete? 
```

使用`await`将不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T09:42:54.687

如果`await`不起作用，您也可以尝试使用MSDN中的[Task.WaitAny 方法](http://msdn.microsoft.com/en-us/library/dd270672%28v=vs.110%29.aspx)

> **Task.WaitAny 方法**，等待任何提供的 Task 对象完成执行。

```
Task.WaitAny(ThreadPoolWorkItem.AsTask()); 
```

你也可以参考这个链接：[How to Start/Stop/Wait for a Thread](https://stackoverflow.com/questions/10238662/how-to-start-stop-wait-for-a-thread)

也看看这个很好的参考[**No Threads for you！（在地铁风格的应用程序中）**](http://www.jaylee.org/post/2012/03/17/No-Threads-for-you-in-metro-style-apps.aspx)

# css-selectors - css 删除选择/突出显示文本上的文本阴影（mozilla）

> ID：13027452
> 
> 赞同：14
> 
> 时间：2012-10-23T09:34:12.547
> 
> 标签：css-selectors, selection, css

我在大多数文本站点范围内使用文本阴影，但是当您突出显示/选择文本时 - 文本看起来很模糊。因此，为了删除文本阴影，我从[这里](http://www.welcomebrand.co.uk/thoughts/using-text-shadow-dont-forget-highlighting/)使用了这个 css 。

```
::-moz-selection,
::-webkit-selection,
::selection {
    text-shadow: none;
    background: #333;
    color: #fff;
} 
```

问题是由于某种原因`moz-selection`似乎在 mozilla (Firefox) 中不起作用（不再？）。

这是[jsFiddle](http://jsfiddle.net/danield770/GMuzV/5/)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-09-29T08:07:38.690

似乎问题是由于将多个 css 规则（针对特定于供应商的 css）与 ::selection 伪元素组合在一起。

我最初认为将每个语句写在单独的行上就足够了。

我错了。

因此，如果我替换此代码：

```
::-moz-selection,
::selection {
    text-shadow: none;
    background: #333;
    color: #fff;
} 
```

..使用此代码：

```
::-moz-selection
{
    text-shadow: none;
    background: #333;
    color: #fff;
}
::selection {
    text-shadow: none;
    background: #333;
    color: #fff;
} 
```

....宾果游戏，它有效。

**[小提琴](http://jsfiddle.net/danield770/GMuzV/21/)**

支持也很好（桌面版）：[Caniuse](http://caniuse.com/#feat=css-selection)

此外，如果您使用 LESS 或 SASS - 您可以轻松编写一个 mixin 来绕过重复。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T09:38:46.930

以下[内容记录在 Mozilla Developer Network 上](https://developer.mozilla.org/en-US/docs/CSS/::selection)：

> 尽管这个伪元素出现在 CSS Selectors Level 3 草案中，但在候选推荐阶段被删除了，因为它的行为似乎没有明确说明，尤其是嵌套元素，并且没有实现互操作性（基于在W3C 风格的邮件列表）。
> 
> ::selection 伪元素目前不在标准轨道上的任何 CSS 模块中。它不应该在生产环境中使用。

# c# - 为什么要使用私有静态类？

> ID：13027454
> 
> 赞同：0
> 
> 时间：2012-10-23T09:34:23.580
> 
> 标签：c#, .net

> **可能重复：**
> [使用私有静态方法的优势](https://stackoverflow.com/questions/135020/advantages-to-using-private-static-methods)

在我目前正在进行的一个项目中，我发现了一个私有静态类定义。它是派生自 Page 的基类的一部分。该类包含一些在某些基类方法中使用的公共静态方法。

由于这段代码的原始开发人员走了，我想知道有什么好处。这些方法只返回枚举值。

例子：

```
public class BasePage : Page
{
   protected override OnInit(EventArgs e)
   {
     ...
   }

   private static class SomeClass
   {
      public static myenumtype GetCategory(int id)
      {
           switch(id)
           {
                case 1: return myenumtype.one;
                case 2: return myenumtype.two;
                default: return myenumtype.zero;
           }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:37:14.700

如果您的意思是嵌套类，则可能只是“命名空间”方法。这样您就可以将具有相关功能的方法“分组”在一起，而不是让父类中的大量静态辅助方法使 Intellisense 混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:37:54.920

这可能是为了封装。

拥有一个私有静态类听起来像一个辅助类 - 它会使使用类（您正在谈论的基类）中的代码更加简洁和有意义，并将一些偶然的复杂性带入私有类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T09:38:01.023

大多数`private static class`with`public static`方法是一个 Extensions-Class，它提供您在代码中使用的功能，而无需将此功能作为`Page`.

您不希望从外部程序集访问此功能。

阅读本文以获取更多信息：

*   [MSDN](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)
*   [维基百科](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)

# scala - 用于持续集成的 Sbt：打印堆栈跟踪并在错误时退出

> ID：13027455
> 
> 赞同：8
> 
> 时间：2012-10-23T09:34:28.757
> 
> 标签：scala, continuous-integration, sbt

我正在使用 Sbt 进行持续集成（Bamboo）。我想检查所有环境变量是否已设置或得到描述性错误消息。我使用以下方法：

```
def env(n: String) = Option(System.getenv(n)).getOrElse(throw new RuntimeException("Undefined required environment variable " + n))

val mySetting = env("REQUIRED_ENV_VAR") + "..." 
```

相反，我得到

```
[error] java.lang.ExceptionInInitializerError
[error] Use 'last' for the full log.
Project loading failed: (r)etry, (q)uit, (l)ast, or (i)gnore? q 
```

两个问题：

1.  如何在不需要使用“last”的情况下获得完整的堆栈跟踪（在 Bamboo 上简单无法做到）？
2.  如果项目加载失败而不是要求重试等，如何告诉 sbt 退出？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-07T13:41:22.060

如果输入流将通过（这样的 hacky）技巧“关闭”，sbt 将不会启用交互模式：

```
cat /dev/null | sbt taskname 
```

或者，如果您无法使用管道，请创建这样的 shell 脚本：

```
#!/bin/sh
sbt "$@" < /dev/null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-27T09:28:29.310

在 sbt v1.3.9（可能更早）中有`--batch`开关。

```
$ sbt --help
Usage: sbt [options]
  ...
  --batch             disable interactive mode
  ... 
```

# java - GWT 安全 HTML 框架：何时使用，为什么？

> ID：13027460
> 
> 赞同：6
> 
> 时间：2012-10-23T09:34:32.977
> 
> 标签：java, html, gwt, xss

在阅读 JavaDocs 和各种 GWT 文章时，我偶尔会遇到以下`Safe*`类：

*   `SafeHtml`
*   `SafeHtmlBuilder`

`SafeHtml`在创建新的`Widget`or时似乎会以某种方式使用它`Composite`，并有助于确保 Widget/Composite 不会在客户端执行任何脚本。是这种情况，还是我离谱？`SafeHtml`有人可以提供一个在行动中正确使用的代码示例吗？

如果是这样，那有什么意义`SafeHtmlBuilder`呢？您是否在 Widget 中使用它以某种方式“构建”安全的 HTML？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T10:05:17.787

最简单的查看方式`SafeHtml`是`String`任何 HTML 标记已被适当转义的位置。这可以防止跨站点脚本 (XSS) 攻击，因为它可以确保，例如，如果有人在表单中输入他们的姓名，因为`<SCRIPT>alert('Fail')</SCRIPT>`这是在呈现您的页面时显示的文本，而不是正在运行的 JavaScript。

所以不要有类似的东西：

```
String name = getValueOfName();
HTML widget = new HTML(name); 
```

你应该使用：

```
String name = getValueOfName();
HTML widget = new HTML(SafeHtmlUtils.fromString(name)); 
```

`SafeHtmlBuilder`就像一个`StringBuilder`除了它会自动转义您添加的字符串中的 HTML 标记。所以扩展上面的例子：

```
String name = getValueOfName();
SafeHtmlBuilder shb = new SafeHtmlBuilder();
shb.appendEscaped("Name: ").appendEscaped(name);
HTML widget = new HTML(shb.toSafeHtml()); 
```

[这是GWT 文档中的](https://developers.google.com/web-toolkit/doc/2.4/DevGuideSecuritySafeHtml)一个很好的[指南`SafeHtml`](https://developers.google.com/web-toolkit/doc/2.4/DevGuideSecuritySafeHtml)，值得一读。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-23T09:58:47.937

`SafeHtmlBuilder`是`SafeHtml`什么`StringBuilder`是什么`String`。

至于`Safe*`API，在处理 HTML（或 CSS`SafeStyles`或 URL ）时使用它，更准确地说`SafeUri`，`UriUtils`从要馈送到浏览器解析的部分构建 HTML/CSS/URL，**无一例外**。

实际上，我们最近正在讨论是否弃用`Element.setInnerHtml`和其他类似的 API ( `HasHTML`) 以支持`Element.setInnerSafeHtml`等 ( `HasSafeHtml`)。

# java - 使用 JAVA 获取以毫秒为单位的 GMT 时间

> ID：13027468
> 
> 赞同：9
> 
> 时间：2012-10-23T09:34:48.807
> 
> 标签：java, uti

> **可能重复：**
> [在 Java 中获取 GMT 时间](https://stackoverflow.com/questions/5236052/get-gmt-time-in-java)

我参考了以下 2 个链接：

[链接1 链接](https://stackoverflow.com/a/5236123/960436) [2](http://shivendra-tripathi.blogspot.in/2010/02/date-with-javautildate.html#comment-form)

但我想要以毫秒为单位的 GMT 日期。

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-23T09:39:29.843

您可以使用[System.currentTimeMillis()](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#currentTimeMillis())它返回“当前时间与 1970 年 1 月 1 日 UTC 午夜之间的差异，以毫秒为单位。”

```
long time = System.currentTimeMillis(); 
```

会做的 ：）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-23T09:38:11.490

使用[`Calendar#getTimeInMillis`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#getTimeInMillis%28%29)：

```
Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
long time = cal.getTimeInMillis(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:40:28.210

使用日历类创建一个以 GMT 作为时区的实例。

从中您可以获得以毫秒为单位的时间。

请参见下面的代码示例。

```
public class TimeTest {

    public static void main(String [] args) {
        Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
        System.out.println(cal.currentTimeMillis());

    }
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:41:07.837

使用[getTime()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html#getTime%28%29)函数：

> 返回自 1970 年 1 月 1 日 00:00:00 GMT 以来此 Date 对象表示的毫秒数。

# django - 用于 wsgi over unix domain socket 的类 curl 工具

> ID：13027469
> 
> 赞同：10
> 
> 时间：2012-10-23T09:34:50.820
> 
> 标签：django, web-applications, curl, wsgi

是否有命令行工具可以将请求直接发送到监听 unix 套接字的 wsgi 应用程序（django）？

相当于：

> curl -X 获取[http://example.org/index.html](http://example.org/index.html)

但这会绕过 HTTP 服务器并通过 wsgi 直接与底层应用程序对话吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T11:10:09.857

监听 unix 套接字的 Django 应用程序使用与 HTTP 不同的协议，很可能是 FastCGI。因此，您不能使用 HTTP 客户端直接与其对话。

在这里您可以找到一篇文章，展示如何使用名为 cgi-fcgi 的命令行程序直接与您的应用程序对话。文章使用的是php-fpm，但是概念是一样的。

[http://www.thatsgeeky.com/2012/02/directly-connecting-to-php-fpm/](http://www.thatsgeeky.com/2012/02/directly-connecting-to-php-fpm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-15T14:47:10.840

我认为您正在寻找[此答案](https://stackoverflow.com/questions/12314245/can-i-use-the-uwsgi-protocol-to-call-http)`uwsgi_curl`中描述的内容。

# sql - SQL Server 2008 r2 如何将列值拆分为多行

> ID：13027471
> 
> 赞同：1
> 
> 时间：2012-10-23T09:34:52.643
> 
> 标签：sql, sql-server-2008

如何将列值拆分为原始值，例如：

```
Col1            col2
1               james
1               gold
1               james@gmail.com
2               john
2               def
2               def@gmail.com 
```

col1 值不断变为数千。

结果：

```
col1            col2      col3      col4
1               james     gold      james@gmail.com 
2               john      def       ef@gmail.com 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:41:31.750

试试这个：

这将不能保证列之间值的顺序，因为该表没有显示列顺序的列。如果您有这样的列，则可以使用该列更改 select 0

```
with cte as(
select *,ROW_NUMBER() 
         over(partition by Col1 order by (select 0))as rn from Table1)  
select * from cte
pivot(
   Max(COL2) FOR rn IN ([1],[2],[3] )  
   )P 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!3/2f3e2/1)

# malloc - jemalloc 与 glibc malloc 相比的 CPU 和内存使用情况

> ID：13027475
> 
> 赞同：17
> 
> 时间：2012-10-23T09:35:00.690
> 
> 标签：malloc, cpu-usage

我最近了解了jemalloc，它是firefox使用的内存分配器。我尝试通过覆盖 new 和 delete 运算符并调用 malloc 和 free 的 jemalloc 等效项，即 je_malloc 和 je_free 将 jemalloc 集成到我的系统中。我已经编写了一个测试应用程序，可以进行 1 亿次分配。我已经使用 glibc malloc 和jemalloc，虽然使用 jemalloc 运行此类分配所需的时间更短，但 CPU 利用率相当高，而且与 malloc 相比，内存占用空间也更大。看完这篇关于[jemalloc分析的文档](http://phrack.org/issues/68/10.html#article) 似乎 jemalloc 的占用空间可能比 malloc 更大，因为它采用技术来优化速度而不是内存。但是，我没有任何关于 Jemalloc 的 CPU 使用率的指针。我想声明我在一台多处理器机器上工作，下面给出了详细信息。

处理器：11 vendor_id：GenuineIntel cpu 系列：6 型号：44 型号名称：Intel(R) Xeon(R) CPU X5680 @ 3.33GHz 步进：2 cpu MHz：3325.117 缓存大小：12288 KB 物理 id：1 个兄弟姐妹：12 核 id : 10 cpu 核心: 6 apicid: 53 fpu: 是 fpu_exception: 是 cpuid 级别: 11 wp: 是标志: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm syscall nx pdpe1gb rdtscp lm constant_tsc ida nonstop_tsc arat pni monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr sse4_1 sse4_2 popcnt lahf_lm bogomips：6649.91 clflush大小：64 cache_alignment物理位：64位地址大小：48位虚拟电源管理：48

我正在使用**top -c -b -d 1.10 -p 24670 | awk -v time=$TIME '{print time,",",$9}'**跟踪 CPU 使用率。

有人在集成 Jemlloc 时有类似的经历吗？

谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-11-30T07:12:32.250

一位聪明人在 CppCon 上说，你永远不必猜测性能。你必须测量它。

我尝试`jemalloc`与多线程 Linux 应用程序一起使用。它是自定义应用程序级协议服务器（通过 TCP/IP）。这个 C++ 应用程序通过 JNI 使用了一些 Java 代码（近 5% 的时间使用 Java，95% 的时间使用 C++ 代码）我在生产模式下运行 2 个应用程序实例。每个都有 150 个线程。

运行 72 小时后，`glibc`一台使用了 900M 内存，`jemalloc`一台使用了 2.2G 内存。我没有看到显着的 CPU 使用率差异。两个实例的实际性能（平均客户端请求服务时间）几乎相同。

所以，在我的测试`glibc`中比`jemalloc`. 当然，这是我的应用程序特定的。

**结论**：如果您有理由认为您的应用程序内存管理由于碎片而无效，您必须进行类似于我描述的测试。它是满足您特定需求的唯一可靠信息来源。如果`jemalloc`总是更好`glibc`，`glibc`将使其`jemalloc`正式分配。如果`glibc`总是更好，`jemalloc`将不复存在。当竞争对手长期并行存在时，这意味着每个人都有自己的使用利基。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-17T18:24:44.787

Aerospike 在我们的 NoSQL 数据库上实现了 jemalloc，并在大约一年前以 v3.3.x 公开发布了该实现。就在今天，Psi Mankoski 发表[了一篇关于 High Scalability 的文章，](http://highscalability.com/blog/2015/3/17/in-memory-computing-at-aerospike-scale-when-to-choose-and-ho.html)讲述了我们为什么以及如何做到这一点，以及与 GlibC malloc 相比它带来的性能改进。

我们实际上看到了 RAM 利用率的下降，因为我们能够使用 jemalloc 的调试功能来最小化 RAM 碎片。在生产环境中，服务器 % Free Memory 通常是一个“尖峰图”，并且在实施 JEMalloc 之前经常高达 54%。实施后，您可以看到在 4 个月的分析期内 RAM 利用率有所下降。RAM % 可用内存开始“平坦化”并且更加可预测，根据服务器节点徘徊在 ~22-40% 之间。

正如 Preet 所说，随着时间的推移，碎片会减少很多，这意味着 RAM 利用率会降低。Psi 的文章给出了这种声明背后的“证据”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-23T09:43:37.977

这个问题可能不属于这里，因为对于现实世界的解决方案，其他人在他们不同的硬件/环境/使用场景中发现了什么应该是无关紧要的。您应该在目标系统上进行测试，看看有什么适合您的。

至于更高的内存占用，计算机科学中最经典的性能优化之一是时间-内存权衡。也就是说，缓存某些结果以供以后即时查找并防止频繁重新计算。此外，由于它可能要复杂得多，因此可能会有更多的内部簿记。这种权衡或多或少应该是可以预料的，尤其是在低级和广泛使用的核心模块的变体之间进行选择时。您必须根据您的使用特征来满足性能特征，因为通常没有灵丹妙药。

您可能还想查看 google 的[TCMalloc](http://goog-perftools.sourceforge.net/doc/tcmalloc.html)，它非常接近，尽管我相信 Jemalloc 通常性能略高一些，并且随着时间的推移创建的堆碎片更少。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-05T13:03:35.803

我正在开发简单的 NoSQL 数据库。
（[https://github.com/nmmmnu/HM4](https://github.com/nmmmnu/HM4)）

# jemalloc 与标准 malloc

当我使用 jemalloc 时，性能会下降，但内存“碎片”也会减少。Jemalloc 似乎也在峰值使用较少的内存，但差异是 5-6%。

我对内存碎片的意思如下。

*   首先我分配了很多键值对（5-7 GB 内存）
*   然后我看看内存使用情况。
*   然后我释放所有对和我的可执行文件使用的任何其他内存。分配顺序与解除分配顺序相同。
*   最后我再次检查内存使用情况。

在标准 malloc 中，使用情况几乎就像在高峰期一样。（我特别检查了 mmap 内存，但没有）。

使用 jemalloc 使用最少。

* * *

# 奖金信息 - tcmalloc

上次我检查 tcmalloc 时，它真的非常快 - 可能比标准 malloc 改进了 10%。

在高峰期，它消耗的内存比标准 malloc 少，但比 jemalloc 多。

我不记得内存碎片，但它与 jemalloc 结果相去甚远。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-06T09:21:07.570

本文[研究](http://www.adms-conf.org/2019-camera-ready/durner_adms19.pdf)了不同内存分配器的性能。

在这里分享一些结论：

[![在此处输入图像描述](../Images/52feb426cf4c4eff415a32d87d814fb5.png)](https://i.stack.imgur.com/1TZOZ.png) [![在此处输入图像描述](../Images/1578909a6a67698f5cc1d3abf931adf0.png)](https://i.stack.imgur.com/XzpXQ.png)

> 图 1 显示了不同分配策略对比例因子为 100 的 TPC-DS 的影响。我们在 4 插槽英特尔至强服务器上使用我们的多线程数据库系统测量内存消耗和执行时间。在这个实验中，我们的 DBMS 使用所有可用的核心按顺序执行查询集。即使是这种相对简单的工作负载也已经导致显着的性能和内存使用差异。`jemalloc`与将其与`glibc`2.23的标准 malloc 链接相比，我们链接的数据库可以将执行时间减少到 1/2。

# java - 当实体不包含在持久性单元中时，@Entity 注释的用途是什么

> ID：13027481
> 
> 赞同：2
> 
> 时间：2012-10-23T09:35:18.430
> 
> 标签：java, jpa, persistence, entity

在我正在构建的示例应用程序中，我几乎没有 JPA 注释实体类，并且几乎所有实体类都在持久性单元中指定，由 JPA 提供者管理。

对于那些被注释但不包含在persistence.xml中的实体：

1.  实体注释有什么用？
2.  它们仍然映射到数据库中的表吗？
3.  由于它们不是由提供者管理的，我如何使用这些实体来持久化数据？

感谢任何答案以澄清我的理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:37:23.340

`@Entity`JPA 将在持久性管理设置中包含任何带有注释的类。`persistence.xml`如果您使用注释，则不需要。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:36:26.967

`JPA`自动扫描带有注释的类`@Entity`并包含它们。

# tsql - 使用带有删除语句的交叉应用的 T-SQL

> ID：13027482
> 
> 赞同：2
> 
> 时间：2012-10-23T09:35:23.937
> 
> 标签：tsql, sql-server-2012, cross-apply

我有以下表格：

```
RecordID
101
102
103
104
105
106

TableOne
101
102
103
104

TableTwo

TableThree
101
102 
```

我需要删除不包含在其他表中的 RecordsID 行。请注意，有时 TableOne、TableTwo、TableThree 表之一可能为空，此时不应删除任何记录。

结果表应为：

```
RecordID
101
102 
```

由于空表，我无法使用 INNER JOIN。而且因为我在函数中使用这些代码，所以我无法创建仅包含带有记录的表的动态 SQL 语句并执行它。

我可以用 IF 语句做到这一点，但在我的实际情况下，我有很多案例要检查，很多表要加入，结果会出现很多代码重复。

这就是为什么我开始想知道有没有办法通过 CROSS APPLY 更聪明、更清洁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:56:44.960

我在这里没有看到使用 cross apply 的任何优势。这是一个完成这项工作的简单解决方案：

```
declare @t table(recordid int)
declare @tableone table(recordid int)
declare @tabletwo table(recordid int)
declare @tablethree table(recordid int)
insert @t values(101),(102),(103),(104),(105),(106)

insert @tableone values(101),(102),(103),(104)
insert @tablethree values(101),(102)

delete t
from @t t
where not exists (select 1 from @tableone where t.recordid = recordid)
and exists (select 1 from @tableone)
or not exists (select 1 from @tabletwo where t.recordid = recordid)
and exists (select 1 from @tabletwo)
or not exists (select 1 from @tablethree where t.recordid = recordid)
and exists (select 1 from @tablethree) 
```

结果：

```
recordid
101
102 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:06:49.097

使用 except 和 Union

```
declare @t table(recordid int) 
declare @tableone table(recordid int) 
declare @tabletwo table(recordid int) 
declare @tablethree table(recordid int) 
insert @t values(101),(102),(103),(104),(105),(106) 

insert @tableone values(101),(102),(103),(104) 
insert @tablethree values(101),(102)

delete  
from @t where recordid not in(
select * from @t 
except select * from 
(select * from  @tableone union
select * from  @tabletwo union
select * from  @tablethree)x)

select * from @t

recordid
105
106 
```

# javascript - 如何关闭框架集？

> ID：13027483
> 
> 赞同：0
> 
> 时间：2012-10-23T09:35:30.987
> 
> 标签：javascript, html, frameset

我有一个使用框架集的页面。

顶部框架 = 标题信息（如注销、登录用户信息等） 左框架 = 菜单项 中心框架 = 相应点击菜单的数据页面

我的问题是当我尝试从应用程序中注销`The logout functionalist is called in header section`并且它也可以找到但其他框架没有关闭时。

如何克服这个：

这是带有表单集的整体设计

```
<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html"%>
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean"%>
<%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic"%>
<%@ page contentType="text/html"%>
<%@ page pageEncoding="UTF-8"%>
<%
    String resourcePath = request.getContextPath();
%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="shortcut icon" href="favicon.ico">
<title>SecureEyes - Infusing Security</title>
<script language="javascript" type="text/javascript" src="<%=resourcePath%>/scripts/frameset.js"></script>
<script language="javascript" type="text/javascript" src="<%=resourcePath%>/scripts/commonForHomePageTemplate.js"></script>
<script language="javascript">
<!--
var opt_no_frames = false;
var opt_integrated_mode = false;
var _help_prefix = "";
var _help_module = "";
var _context = "";
//-->
</script>
</head>

            <frameset border="0" frameborder="0" framespacing="0" rows="64,*">
                <form method="post" >

                    <frame border="0" frameborder="0" framespacing="0" id="topFrame" name="topFrame" src="<%=resourcePath%>/common/header.jsp" marginheight="0" marginwidth="0" noresize="noresize" scrolling="no">
                    <frameset border="0" frameborder="0" framespacing="0" id="MainFrameSet" cols="209,*">
                            <frame noresize="noresize" border="0" frameborder="0" framespacing="0" id="leftFrame" name="leftFrame" src="<%=resourcePath%>/common/left_menu.jsp" >
                            <frame border="0" frameborder="0" framespacing="0" id="workFrame" name="workFrame" src="<%=resourcePath%>/common/WelcomePage.jsp" marginheight="7" marginwidth="7" noresize="noresize" scrolling="auto">
                    </frameset>
                     <input type="hidden" id="method" name="method" />
                </form> 
            </frameset>
</html> 
```

这是我有注销功能的地方：

```
<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html"%>
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean"%>
<%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic"%>
<%@ page contentType="text/html"%>
<%@ page pageEncoding="UTF-8"%>
<%@page  import="com.secureyes.eswastha.struts.viewmodel.UserViewModel"%>
<%
    String resourcePath = request.getContextPath();
    UserViewModel userVM = new  UserViewModel();
    if(session.getAttribute("userDetails")!=null){
        userVM = (UserViewModel) session.getAttribute("userDetails");
    }
%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="shortcut icon" href="https://indedev.com:8443/favicon.ico">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script language="javascript" type="text/javascript" src="<%=resourcePath%>/scripts/commonForHomePageTemplate.js"></script>
        <script language="javascript" type="text/javascript" src="<%=resourcePath%>/header_data/prototype.js"></script>
        <script language="javascript" type="text/javascript" src="<%=resourcePath%>/header_data/tooltip.js"></script>

        <link rel="stylesheet" type="text/css" href="<%=resourcePath%>/header_data/general.css">
        <link rel="stylesheet" type="text/css" href="<%=resourcePath%>/header_data/custom.css">
        <link rel="stylesheet" type="text/css" href="<%=resourcePath%>/header_data/layout.css">
        <link rel="stylesheet" type="text/nonsense" href="<%=resourcePath%>/header_data/misc.css">

<script>
    var tooltip;
    var opt_no_frames = false;
    var opt_integrated_mode = false;

        function logOut(){
        top.close();
        document.forms[0].action="LogoutAction.htm";
        document.forms[0].method.value="loginPage";
        document.forms[0].submit();
    }
</script>
<script>
    history.forward();
</script>

</head>
<body onload="SetContext(''); " onunload="" id="topCP">
<div class="body">
    <form method="post"> 
    <table cellspacing="0" width="100%">
        <tbody>
            <tr>
                <td class="companyLogo"><span class="topLogo"><img src="<%=resourcePath%>/header_data/logo.png" name="logo" border="0" height="53"></span></td>
                <td>
                    <div id="topTxtBlock" class="withTopRightLogo">
                        <span id="topTxtLoggedInAs">Logged in as <b><%=userVM.getUsername()%></b></span>
                        <span id="topTxtMyAccount"><a class="tootlipObserved" name="" id="" href="#" onmouseover='tooltip.set(event, [{"type":"string","string":"View preferences of your control panel account."}]);' onmouseout="tooltip.hide();" >My account</a></span>
                        <span id="topTxtLogout"><a class="tootlipObserved" href="#" onclick='if (confirm("Are you sure you want to log out?")) logOut("logout"); return false;' onmouseover='tooltip.set(event, [{"type":"string","string":"Log out of eSwastha."}]);' onmouseout="tooltip.hide();">Log out</a></span>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
        <input type="hidden" id="method" name="method" />
    </form>
</div>
<div style="position: absolute; top: 14px; left: 1111px; display: none;" class="tooltip">View preferences of your control panel account.<br></div>
</body>
</html> 
```

*当我按下刷新时，一切都再次加载，那么如何使用javascript禁用刷新和后退功能？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:39:39.073

简单的答案：**[不要](http://www.yourhtmlsource.com/frames/goodorbad.html)-[使用](https://stackoverflow.com/questions/4846019/any-way-of-using-frames-in-html5)-[框架](http://www.tamingthebeast.net/articles/framesnoframes.htm)**

# converter - c# 将字节数组从大端浮点数转换为小端浮点数

> ID：13027485
> 
> 赞同：0
> 
> 时间：2012-10-23T09:35:32.443
> 
> 标签：converter, endianness

我需要在 C# 中从大端转换为小端。我有一个通过 UDP 接收到的字节数组（byte[]）。如何将大端字节[] 转换为小端浮点然后打印？请给我指路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:14:56.323

简单的，

```
byte[] data = GetFromUDPInBigEndian();
Array.Reverse(data); // now is in little endian 
```

# cygwin - Windows 7 上 cygwin 中的 fork() 错误

> ID：13027488
> 
> 赞同：0
> 
> 时间：2012-10-23T09:35:35.770
> 
> 标签：cygwin, fork

我正在运行一个`fork()`使用 gcc 编译器调用 cygwin 环境的简单 C 程序。它编译得很好，但在编写`gcc Filename.c`时显示错误：

```
$ gcc A.c
C:\cygwin\tmp\ccEkivvm.o:A.c:(.text+0x24): undefined reference to `fork'
collect2: ld returned 1 exit status 
```

我们不能`fork()`在 Windows 上使用 cygwin 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:37:57.123

您是否忘记包含标题

```
#include <unistd.h> 
```

?

据我所知，这将在使用 Cygwin 时定义 fork()。

另外，看看这个问题，你可能会遇到同样的问题： [Problem compile program using fork in cygwin](https://stackoverflow.com/questions/7451702/problem-compiling-program-using-fork-in-cygwin?rq=1)

# requirejs - RequireJS 优化 !text 不允许动态加载

> ID：13027501
> 
> 赞同：1
> 
> 时间：2012-10-23T09:36:13.393
> 
> 标签：requirejs, r.js

我使用插件`!text`，并希望经过优化后`r.js`，用户可以编辑自己的模板。但优化后出现错误：不允许动态加载。

**构建.js**

```
{
    baseUrl: "f/app",
    appDir: "..",
    dir: "dist",
    modules: [
    {
        name: "catalog"
    }
    ],
    stubModules: ['text'],
    optimizeAllPluginResources: false,
    inlineText: false,
    paths: {
        app: '../libs',
        jquery: 'empty:',
        underscore: 'empty:',
        backbone: 'empty:',
        marionette: 'empty:',
        JSON: 'empty:',
        // Plugins
        text: '../libs/rjs-text',
    },
    exclude: ["jquery","underscore","backbone","marionette", 'JSON', 'text']
} 
```

这一般是怎么实现的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:02:05.040

如果没有任何示例代码，这几乎是不可能回答的（正如我在评论中所说）。但是，只是为了在黑暗中拍摄，*也许*您的问题是您正在为您的 require 导入使用变量，这让 require 优化器很烦。使用文字数组应该可以解决这个问题；换句话说，不要这样做：

```
var myDependencies = ['foo', 'bar'];
define(myDependencies, function(... 
```

做：

```
define(['foo', 'bar'], function(... 
```

有关更多信息，请参阅 Require 站点上的此链接：

[http://requirejs.org/docs/optimization.html](http://requirejs.org/docs/optimization.html)

# c - C的结构图

> ID：13027502
> 
> 赞同：4
> 
> 时间：2012-10-23T09:36:16.320
> 
> 标签：c, diagram

我正在尝试阅读和理解现有 C 项目的来源。我一直觉得为它绘制一个 UML 类图以帮助我更好地理解高级关系会很棒，但是当然 - 没有要建模的类。

是否有用于以非 OO 语言对模块关系建模的正式图表系统？与 UML 类图具有相似抽象级别的一种。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:09:56.023

一种替代方法是使用[Doxygen](http://www.doxygen.org)映射您的函数树。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T09:47:33.250

OO 范式不是编程语言的属性，用 C 语言实现 OO 是很有可能的（只是很难而且不是很直观）。OO 设计（在 UML 或任何其他建模语言中）不受特定语言的约束。

现在让我们回到你的问题。有许多工具可用于非 OO 设计。[你可以在这里](http://en.wikipedia.org/wiki/Modeling_language "这里")找到一个很好的总结，然后选择最适合你的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:58:39.770

尝试 FMC（[http://www.fmc-modeling.org/home](http://www.fmc-modeling.org/home)）和“Apache 建模项目”（使用 FMC 建模的 Apache HTTP 服务器：[http](http://www.fmc-modeling.org/projects/apache) ://www.fmc-modeling.org/projects/apache ）作为开始点和方针。

# c# - 是否在执行代码之前处理 if 中的所有逻辑或分隔检查？

> ID：13027504
> 
> 赞同：-1
> 
> 时间：2012-10-23T09:36:22.177
> 
> 标签：c#, java, c++, if-statement, logical-operators

假设我在这样的方法中有一个 if 语句：

```
if ( foo() || bar() ) {
    return true;
} 
```

在评估是否在其中执行代码之前，或者在一个条件满足 if 时，是否会完全处理两者`foo()`和两者？`bar()`

我问的原因是我的`foo()`and`bar()`方法的等价物是计算量相当大的函数，如果`foo()`单独满足我不想执行的 if 条件`bar()`。因此，我当前的代码大致如下：

```
if ( foo() ) {
    return true;
}
if ( bar() ) {
    return true;
} 
```

这是必要的，还是逻辑或分隔的函数会表现为要求？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:37:26.773

`&&`并且在所有 3 种语言 AFAIK 中都是短路的，因此如果`||`计算**结果**`foo()`为`true`，`bar()`则不会被调用。

5.15 逻辑或运算符 [expr.log.or]

> 1) || 运算符组从左到右。操作数都根据上下文转换为 bool（第 4 条）。如果其中一个操作数为真，则返回真，否则返回假。与 不同`|`，`||`保证从左到右的评估；此外，**如果第一个操作数的计算结果为 ，则不计算第二个操作数`true`**。（强调我的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:37:24.607

如果其中任何一个为真，则不会继续进行。这就是所谓的[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

如果`foo()`解析为真，`bar()`则不会在 if 语句中执行下一个方法。条件将解析为真。

检查[|| 运算符（C# 参考）- MSDN](http://msdn.microsoft.com/en-us/library/6373h346%28v=vs.110%29.aspx)

操作

```
x || y 
```

对应操作

```
x | y 
```

> 除了如果 x 为真，则不计算 y，因为无论 y 的值如何，OR 运算都是真。这个概念被称为 **“短路”评估**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T09:48:14.450

我有点好奇，写了一个小程序来确定会发生什么。

```
class Program
    {
        static void Main(string[] args)
        {

            if (foo() || bar())
            {
                Console.WriteLine("Either Foo or Bar returned true");
            }
            Console.ReadKey();
        }
        public static bool foo()
        {
            Console.WriteLine("I am in Foo");
            return true;
        }
        public static bool bar()
        {
            Console.WriteLine("I am in Bar");
            return false;
        }

    } 
```

这刚回来

```
I am in Foo
Either Foo or Bar returned true 
```

意思是，如果第一次评估为真，则不会进行第二次评估，而是从左到右。

-米林德

# asp.net - 将导航属性添加到 Membership 架构

> ID：13027507
> 
> 赞同：0
> 
> 时间：2012-10-23T09:36:30.507
> 
> 标签：asp.net, entity-framework, asp.net-membership

我的网站有一个实体数据模型，其中包含一个表，其中包含一些注册用户的额外数据（称为 UserInfo）。目前，我正在使用`Membership.GetUser(...).ProviderKey`.

我想要做的是在我的 UserInfo 表中添加一个导航属性，以指向该用户的相应会员行，但是由于我的实体设计器中没有会员架构，我无法弄清楚如何建立这个链接桌子之间。

任何的想法？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:12:37.423

好吧，我终于决定将一个属性添加到存储 MembershipUser 模式的 guid 的 UserInfo 表（称为 guid）更容易。

# objective-c - 如何存储一个类变量，然后在 Objective-C 中调用该类的静态方法

> ID：13027509
> 
> 赞同：5
> 
> 时间：2012-10-23T09:36:34.720
> 
> 标签：objective-c, ios, xcode, static-methods

所以我希望一个类能够存储一个“类”对象，然后调用该类的静态方法......

基本上我有多个类继承一个类，所以它们都有相同的静态方法（但返回不同的东西）。我希望能够存储我正在使用的子类，所以我知道要调用哪个子类的静态方法...

我知道我可以上课

```
Class something = [VirginMobile class]; 
```

但我不能再做类似的事情 `int i = [something staticMethodReturningInt];`

有什么办法可以做到这一点吗？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T09:40:28.053

我知道你可能不想听到这个，但是一旦你开始对类太聪明了，使用常规对象是一个肯定的迹象。我不确定我是否正确理解了您的问题，但解决打字问题的一种方法是将接收器转换为`id`：

```
id something = [VirginMobile class];
int i = [something methodReturningInt]; 
```

只要编译器可以看到`methodReturningInt`. 当然，在运行时`VirginMobile`必须响应`+methodReturningInt`.

# iphone - 模拟器中的核心位置问题

> ID：13027511
> 
> 赞同：0
> 
> 时间：2012-10-23T09:36:39.223
> 
> 标签：iphone, objective-c, ios, mapkit, core-location

我无法在 iphone 模拟器中获取当前位置。我将自定义位置设置为埃及的纬度和经度，但没有获得当前位置。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    //Make this controller the delegate for the map view.
    self.MapView.delegate = self;     

    // Ensure that you can view your own location in the map view.
    [self.MapView setShowsUserLocation:YES];

    //Instantiate a location object.
    locationManager = [[CLLocationManager alloc] init];
    [locationManager startUpdatingLocation];

    //Make this controller the delegate for the location manager.
    [locationManager setDelegate:self];

    //Set some parameters for the location object.
    [locationManager setDistanceFilter:kCLDistanceFilterNone];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
} 
```

这是委托：

```
#pragma mark - MKMapViewDelegate methods.

- (void)mapView:(MKMapView *)mv didAddAnnotationViews:(NSArray *)views 
{    
    MKCoordinateRegion region;
    region = MKCoordinateRegionMakeWithDistance(locationManager.location.coordinate,2000,2000);

    [mv setRegion:region animated:YES];
} 
```

请任何人帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:52:51.557

究竟是什么问题？没有获得您应该拥有的 userLocation 或没有将地图区域移动到正确的位置？

如果是第一个，则主要是工具问题，而不是代码问题：

如果您的位置位于项目内的 gpx 文件中，您应该可以通过编辑 Scheme / Options / Allow Location Simulation / 并选择默认位置来开始

![从特定位置开始的方案版](../Images/b62437fb53724196877c7db28ac8c270.png)

您的项目中应该有一个 DemoStart.gpx 文件，如下所示：

```
<?xml version="1.0"?>
<gpx version="1.1" creator="Xcode">
    <wpt lat="20.88072" lon="10.67429">
        <name>Demo Starting Location</name>
    </wpt>
</gpx> 
```

（对不起，我懒得找埃及的确切坐标）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:47:48.547

您必须首先确保您的 CLLocationManager 将他的位置更新为您的位置。为此，将视图控制器设置为 CLLocationManager 的委托，您已经这样做了，并保存此位置。`startUpdatingLocation`完成所有设置并设置`showsUserLocation`为后尝试调用`YES`。

```
- (void)locationManager:(CLLocationManager *)manager

     didUpdateLocations:(NSArray *)locations {

    // If it's a relatively recent event, turn off updates to save power

    CLLocation* myLocation = [locations lastObject];
} 
```

确保您在 iOS Simulator Version >= 5.1 上进行测试

# jquery - 如何在锚标签下找到按钮 ID？

> ID：13027512
> 
> 赞同：0
> 
> 时间：2012-10-23T09:36:43.157
> 
> 标签：jquery, button, asp.net-mvc-4, anchor

我正在研究 MVC4 jQuery。我需要找到标签下的按钮 ID `anchor`。这是我的 jQuery 代码：

```
// drop event handler
addEvent(dropAreas, 'drop', function (event) {
    alert(5);
    if (event.preventDefault) event.preventDefault();

    // get dropped object
    var iObj = event.dataTransfer.getData('obj_id');
    var oldObj = document.getElementById(iObj);

    // get inner text
    var linkText = oldObj.innerHTML;
    oldObj.className += 'hidden';

    // remove object from DOM
    oldObj.parentNode.removeChild(oldObj);

    // add similar object in another place
    this.innerHTML += '<a id="' + iObj + '" draggable="true">' + linkText + '<button id="btnAdd " style="height:20px;width:20px;">Add</button></a>';

    // and update event handlers
    updateHandlerDrag();

    this.style.borderColor = "#ccc";
    return false;
}); 
```

在这一行中，我在上面的代码中定义了一个按钮：

```
 this.innerHTML += '<a id="' + iObj + '" draggable="true">' + linkText + '<button id="btnAdd " style="height:20px;width:20px;">Add</button></a>'; 
```

在上面的代码中，我在锚标记中给出了一个按钮，我需要在下面的代码中触发该 id：

```
// add SubMenu
var addColBtn = document.querySelectorAll('#btnAdd ');
addEvent(addColBtn, 'click', function (event) {
    alert('addingSubmenu');

    if (event.preventDefault) event.preventDefault();
    alert('adding');
    // recalculate widths for columns
    var oCols = document.querySelector('div.columns');
    alert(sub);
    var iChilds = oCols.childElementCount + 1;
    var dWidth = 50 / iChilds;

    // add single column
    oCols.innerHTML += '<div class="columns" id="drop_' + (iChilds + 1) + '" droppable="true"><img src="images/delete.png" onclick="removeColumn(this)" /></div>';

    // set new widths
    for (var i = 0; i < iChilds; i++) {
        oCols.children[i].style.width = dWidth + '%';
    }

    // update handlers
    updateHandlerDrop();

    return false;
}); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:04:42.117

```
 $('a').click(function(){
       console.log( $(this).find('button').attr('id'))
     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:06:18.573

**首先**，你想用这行代码做什么？？？

```
this.innerHTML += '<a id="' + iObj + '" draggable="true">' + linkText + '<button id="btnAdd " style="height:20px;width:20px;">Add</button></a>'; 
```

如果我在标记（[小提琴链接](http://jsfiddle.net/yrshaikh/H9Fby/)）上方的 html 字符串中填写一些值，将准备以下内容....

```
<a id="someId" draggable="true">SomeText<button id="btnAdd " style="height:20px;width:20px;">Add</button></a>​ 
```

无论你在这里尝试什么......你***做错了***。在锚标签内插入按钮是完全错误的！

**其次**，要使用 jquery 获取按钮/锚标记，可以使用 jquery 选择器，例如

```
var selectedItem = $("#uniqueIdGoesHere"); 
```

并触发点击事件，你可以写这个

```
$("#uniqueIdGoesHere").bind("click", function(){
  // write here what needs to be triggered.
}); 
```

# javascript - 谷歌地图：API 3，如何在中心设置折线

> ID：13027516
> 
> 赞同：13
> 
> 时间：2012-10-23T09:36:58.667
> 
> 标签：javascript, google-maps, google-maps-api-3, center, polyline

大家好，我需要能够将折线居中在地图的中心

只有代码的必要部分......

```
success: function(data) {//callback to be executed when the response has been received

    data = JSON.parse(data);
    for (var i=0;i<data.length;i++) {
        flightPlanCoordinates[i] = new google.maps.LatLng(data[i].x,data[i].y);
    }
    map = new google.maps.Map(document.getElementById("map_find"),
    mapOptions);
    flightPath = new google.maps.Polyline({
            path: flightPlanCoordinates,
            strokeColor: "#8a2be2",
            strokeOpacity: 1.0,
            strokeWeight: 3
    });

    flightPath.setMap(map);
    map.setZoom(5);
    map.setCenter(flightPlanCoordinates);
} 
```

这不是我需要的。我的地图没有居中也没有缩放，如何实现这一点？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-23T09:48:32.377

您可以使用此函数，使用折线作为参数调用它：

```
function zoomToObject(obj){
    var bounds = new google.maps.LatLngBounds();
    var points = obj.getPath().getArray();
    for (var n = 0; n < points.length ; n++){
        bounds.extend(points[n]);
    }
    map.fitBounds(bounds);
} 
```

称它为：

```
flightPath.setMap(map);
zoomToObject(flightPath); 
```

只要确保您的地图对象是一个全局变量。

# video-encoding - 自动化 x264 cmd 的 Noobs 方法

> ID：13027526
> 
> 赞同：0
> 
> 时间：2012-10-23T09:37:31.937
> 
> 标签：video-encoding, x264

所以这是我的脚本，用于循环播放特定的视频扩展 » 添加手动配置文件 » 生成必要的 *.bat 和最后一个最终的“加载器”批处理文件，以按顺序执行以前的 *.bat 文件和必要的日志记录（这给了安静的自由如果你愿意）

```
::==
:: gets lines into vars c1 v2 v...
@echo off
:: user input required
cd /d "d:\Trainers\out\"
setLocal EnableDelayedExpansion
dir /B /O:N | findstr ".wmv$ " >filename.txt
echo. >log.txt
:: user input required
for /f "tokens=* delims= " %%a in ('type filename.txt ^|findstr ".wmv$"') do (
set /a n+=1
echo. >file!n!.bat
set in=%in%%%a
:: user input required
set out=!in:.wmv=.mp4!
:: user input required
set v=x264 --crf 23  --level 3.1 --tune film -o "d:\Trainers\out\!in!" "d:\Trainers\out\!out!"
echo. !v!>file!n!.bat
)
dir /B /O:N | findstr ".bat$ " >x264_home.txt
for /f "tokens=* delims= " %%a in (x264_home.txt) do (
set /a n+=1
:: mtee is an external library Google it
set "z=call %%a | mtee /d/c/t/+ log.txt"
echo. !z! >> x264_home.bat
)
echo. @echo off > newFile.bat
type x264_home.bat >> newFile.bat
type newFile.bat > x264_home.bat
del newFile.bat,x264_home.txt,filename.txt
echo. pause >> x264_home.bat
echo. @echo All Operation done... >> x264_home.bat
:: user input required
move "d:\Trainers\out\*.bat" "d:\Program Files\x264_auto\test\"
:: user input required
move "d:\Trainers\out\log.txt" "d:\Program Files\x264_auto\test\"
::== 
```

现在，上面相当容易理解的代码（bcz 它是由一个菜鸟编写的）完美运行并创建了必要的文件。例如其中一个 file1.bat 如下所示：

```
x264 --crf 23  --level 3.1 --tune film --preset veryslow --deblock -2:-1 --zones 24233,25324,q=20 --acodec aac --abitrate 80 -o "d:\Trainers\out\1.wmv" "d:\Trainers\out\1.mp4" 
```

...& loader .bat 文件看起来像

```
 @echo off 
 call file1.bat | mtee /d/c/t/+ log.txt 
 call file2.bat | mtee /d/c/t/+ log.txt
 call file3.bat | mtee /d/c/t/+ log.txt
 @echo All Operation done... 
```

您会看到这是一种安静灵活的方法，因为您可以使用特殊的 filestr » 设置另一个循环 » 设置另一个配置文件。此外，每个批处理文件都可以在以后编辑，尤其是当您大量使用`--zone`x264 功能时，我是成功的，因为任何输出中都没有错误……但是它的 x264.exe（提供程序/编译器 x264GUI）会引发错误，否则不会？

```
d:\Program Files\x264_auto\test>x264 --crf 23  --level 3.1 --tune film --preset
veryslow --deblock -2:-1 --zones 24233,25324,q=20 --acodec aac --abitrate 80 -o
"d:\Trainers\out\1.wmv" "d:\Trainers\out\1.mp4"
ffms [error]: could not create index
lavf [error]: could not open input file
raw [error]: raw input requires a resolution.
x264 [error]: could not open input file `d:\Trainers\out\1.mp4' via any method! 
```

它的 x264 是罪魁祸首，也许这里需要高级指南

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T11:49:00.967

您的 x264 编译时是否支持 mp4 输入？（我认为需要 lavc/lavformat，只需从 x264.nl 下载预编译的 x264 即可）

如果直接运行相同的命令，是否会出现相同的错误？（不是通过 bat 文件）

如果是，是否仅在您使用区域时发生？（如果是这样，那么将您的命令行示例作为 x264 错误发布到 x264-devel 邮件列表）

如果不是，您确定您运行的是完全相同的 x264 吗？（也许您的系统上有几个不同的地方）

我建议您在 python 中使用 subprocess.call(...) 或 (b) 在 cygwin/bash/shell 脚本中执行您正在执行的操作，或者 . bat 文件几乎是任何问题的错误答案 :) 这两个文件的好处是它们对程序参数有简单、常规的转义规则。

# xml - 非贪婪的正则表达式对于 xml 开始和打开标签仍然过于贪婪

> ID：13027534
> 
> 赞同：1
> 
> 时间：2012-10-23T09:37:57.587
> 
> 标签：xml, regex, replace

首先，我知道正则表达式不适合解析 xml，我真的应该使用 xml 解析器。也许我的问题是一个很好的例子，说明为什么这是真的。

话虽如此，我需要做的只是一次性搜索和替换一些 XML 文件。另外，我对正则表达式比较陌生，所以我希望更好地理解正则表达式，以及为什么它对 XML 来说是个坏主意。

我有以下 XML（原始文件在标签之间没有空格！）：

```
<tag1>
    <tag2>Doesn't matter what is here</tag2>
</tag1>
<tag1>
    <tag2>Anything can <b>go<b> here</tag2>
    <tag3>Hi there</tag3>
</tag1> 
```

我需要将 tag3 内的“Hi there”拆分为两个部分，它们都包含在 tag1 中，并且如果存在 tag2 则具有相同的 tag2，即：

```
<tag1>
    <tag2>Doesn't matter what is here</tag2>
</tag1>
<tag1>
    <tag2>Anything can <b>go<b> here</tag2>
    <tag3>Hi</tag3>
</tag1>
<tag1>
    <tag2>Anything can <b>go<b> here</tag2>
    <tag3>there</tag3>
</tag1> 
```

我最初的想法是为 tag2 使用一个带有非贪婪量词的可选组，如下所示：

```
<tag1>(<tag2>.*?</tag2>)?<tag3>Hi there</tag3></tag1> 
```

并替换为（Java 语法）

```
<tag1>$1<tag3>Hi</tag3></tag1><tag1>$1<tag3>there</tag3></tag1> 
```

但是，那 。*？还是太贪心了；它从 tag1 的第一个开始到 tag1 的最后一个结束匹配。执行此操作的正确正则表达式方法是什么？或者这对正则表达式来说是一个难题？这是为什么对 XML 使用正则表达式是个坏主意的原因之一吗？

我发现使用原子组完全符合我的要求：

```
<tag1>(?>(<tag2>.*?</tag2>))?<tag3>Hi there</tag3></tag1> 
```

但是我真的不明白为什么会这样。为什么这行得通，这是否足够可靠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:07:57.870

好的，我尝试向您解释正则表达式的行为：

## 1.第一个Regex的匹配行为

`<tag1>(<tag2>.*?</tag2>)?<tag3>Hi there</tag3></tag1>`

模式开始匹配`<tag1>`then there is a `<tag2>`this 也匹配，然后它与`.*?`until the first匹配`</tag2>`。很好，但是模式需要`<tag3>`遵循，没有，所以正则表达式会回溯并将第一个`</tag2>`与匹配`.*?`，然后`.*?`匹配任何东西直到下一个`</tag2>`。在那里它找到了一个后续`<tag3>`并且可以成功完成。

## 2\. 原子组版本的匹配行为

`<tag1>(?>(<tag2>.*?</tag2>))?<tag3>Hi there</tag3></tag1>`

模式开始匹配`<tag1>`then there is a `<tag2>`this 也匹配，然后它与`.*?`until the first匹配`</tag2>`。

*到目前为止，行为与第一个正则表达式完全相同。*

但是现在没有`<tag3>`跟随，**但是原子组阻止了回溯**，所以正则表达式失败了。

它在第二个`<tag1>`成功的地方重新开始。

# c# - 设置 GridViewRow 属性时出现 InvalidCastExceptions

> ID：13027538
> 
> 赞同：1
> 
> 时间：2012-10-23T09:38:04.313
> 
> 标签：c#, gridview, .net, rowdatabound, gridviewrow

我正在为我的 GridView 中的项目创建上下文菜单，但有一个主要障碍。我似乎无法弄清楚如何将右键单击的行的 PK 值发送到与我的 HTTP 处理程序交互以更新数据库的 JQuery。

基本上，上下文菜单将有 3 个项目，回复、标记为已读和删除。在每种情况下，我都需要`mailid`数据库中的值可供 JQuery 使用，以便我可以将用户重定向到一个页面，他们可以在其中回复所选邮件或告诉 HTTP 处理程序应该更新数据库中的哪个项目。

这是我的代码：

```
 protected void gvItems_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Attributes["onClick"] = "getMailDetail(" + DataBinder.Eval(e.Row.DataItem, "mailid") + ")";
            e.Row.Attributes["id"] = DataBinder.Eval(e.Row.DataItem, "mailid");

            Label lblStatus = (Label)e.Row.FindControl("lblStatus");

            if (lblStatus.Text == "unread")
            {
                e.Row.Font.Bold = true;
            }
        }
    } 
```

我正在为 Rows 设置 onClick 属性，以便单击 GridViewRow 上的任意位置将触发页面以详细显示邮件。我想我可以使用不同的属性以相同的方式获取 mailid 值。

在 .aspx 上...

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.contextMenu.js"></script>
<script type="text/javascript">
    function getMailDetail(mailId) {
        $.ajax({
            type: "GET",
            url: '<%= ResolveUrl("~/GetMail.ashx") %>',
            data: { mid: mailId },
            success: function (data) {
                var pnlList = $('#<%= pnlList.ClientID %>');
                var pnlMail = $('#<%= pnlMail.ClientID %>');
                var lblFrom = $('#<%= lblFrom.ClientID %>');
                var lblDate = $('#<%= lblDate.ClientID %>');
                var lblSubject = $('#<%= lblSubject.ClientID %>');
                var lblMessage = $('#<%= lblMessage.ClientID %>');

                lblFrom.text(data.From);
                lblDate.text(data.Date);
                lblSubject.text(data.Subject);
                lblMessage.text(data.Message);

                pnlList.css("display", "none");
                pnlMail.css("display", "block");
            }
        });
    }

    function markRead(mailId) {
        $.ajax({
            type: "POST",
            url: '<%= ResolveUrl("~/MailAction.ashx") %>',
            data: { mid: mailId, act: "markRead" },
            success: window.location = "Inbox.aspx"
        });
    }

    function deleteMail(mailId) {
        $.ajax({
            type: "POST",
            url: '<%= ResolveUrl("~/MailAction.ashx") %>',
            data: { mid: mailId, act: "Delete" },
            success: window.location = "Inbox.aspx"
        });
    }
</script>
<div class="columns">
    <div class="leftcol">
        <a href="Write.aspx" class="button">Compose Message</a>

        <ul>
            <li><a href="SentItems.aspx">Sent Items</a></li>
            <li class="active"><a href="Inbox.aspx">Inbox</a></li>
            <li><a href="DeletedItems.aspx">Deleted Items</a></li>
        </ul>
    </div>

    <div class="rightcol">
        <asp:Panel runat="server" ID="pnlList">
            <div class="rightalign">
                <asp:Label runat="server" ID="lblCount"></asp:Label>
            </div>

            <asp:GridView runat="server" ID="gvItems" DataKeyNames="mailid" 
                AutoGenerateColumns="false" onrowdatabound="gvItems_RowDataBound" 
                Width="100%">
                <Columns>
                    <asp:TemplateField ItemStyle-CssClass="centeralign">
                        <HeaderTemplate>
                            <asp:CheckBox runat="server" ID="chkSelectAll" />
                        </HeaderTemplate>
                        <ItemTemplate>
                            <asp:CheckBox runat="server" ID="chkSelect" />
                        </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField ItemStyle-CssClass="hidden" HeaderStyle-CssClass="hidden">
                        <ItemTemplate>
                            <asp:Label runat="server" ID="lblStatus" Text='<%# DataBinder.Eval(Container.DataItem, "status") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:BoundField ItemStyle-CssClass="hidden" HeaderStyle-CssClass="hidden" DataField="mailid" />
                    <asp:BoundField DataField="firstname" HeaderText="From" SortExpression="firstname" />
                    <asp:BoundField DataField="datesent" HeaderText="Date" SortExpression="datesent" DataFormatString="{0:yyyy/MM/dd HH:mm}" />
                    <asp:BoundField DataField="subject" HeaderText="Subject" SortExpression="subject" />
                </Columns>
            </asp:GridView>
        </asp:Panel>

        <asp:Panel runat="server" ID="pnlMail" cssclass="hidden">
            <p>From: <asp:Label runat="server" ID="lblFrom"></asp:Label><br />
                Sent On: <asp:Label runat="server" ID="lblDate"></asp:Label><br />
                Subject: <asp:Label runat="server" ID="lblSubject"></asp:Label></p>
            <p><asp:Label runat="server" ID="lblMessage"></asp:Label></p>
        </asp:Panel>
    </div>
</div>

<!-- Row Context Menu -->
<ul id="contextmenu" class="contextMenu">
    <li><a href="#reply">Reply</a></li>
    <li><a href="#mread">Mark As Read</a></li>
    <li><a href="#delete">Delete</a></li>
</ul>

<script type="text/javascript">
    $(document.ready(function() {
        $(".dataRow").contextMenu({
            menu: 'contextmenu' },
            function(action, el, pos, mid) {
                contextMenuWork(action, el, pos);
            }
        );
    },
    function contextMenuWork(action, el, pos) {
        var mid = $(el).attr("id");
        switch (action) {
            case "reply":
            {
                window.location = "Reply.aspx?id=" + mid;
                break;
            }
            case "mread":
            {
                markRead(mid);
                break;
            }
            case "delete":
            {
                deleteMail(mid);
                break;
            }
        }
    }
);
</script> 
```

不幸的是，我的方法似乎存在问题，因为我在新绑定的 GridViewRow 上分配 id 属性时收到 InvalidCastException：

> 无法将类型“对象”隐式转换为“字符串”。存在显式转换（您是否缺少演员表？）

所以，我用这个替换那行

```
e.Row.Attributes["id"] = (string)DataBinder.Eval(e.Row.DataItem, "mailid"); 
```

现在，虽然 Visual Studio 可以在设计时告诉我没有错误，但在运行时，我得到以下 InvalidCastException：

> 无法将“System.Int32”类型的对象转换为“System.String”类型。

我不知道整数是从哪里来的，所以我不知道如何进行。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:09:59.010

我似乎永远无法对这里的值进行有效的转换，所以我所做的就是将 RowDataBound void 更改为以下内容：

```
 protected void gvItems_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            var mailid = DataBinder.Eval(e.Row.DataItem, "mailid");
            e.Row.Attributes["onClick"] = "getMailDetail(" + DataBinder.Eval(e.Row.DataItem, "mailid") + ")";
            e.Row.Attributes["id"] = mailid.ToString();

            Label lblStatus = (Label)e.Row.FindControl("lblStatus");

            if (lblStatus.Text == "unread")
            {
                e.Row.Font.Bold = true;
            }
        }
    } 
```

用“mailid”的 DataItem 值声明一个新`var`的，然后给它一个 .ToString() 解决了我所有的问题

# razor - 如何在 GridPanel Ext.net Razor 中按名称获取值

> ID：13027539
> 
> 赞同：1
> 
> 时间：2012-10-23T09:38:09.820
> 
> 标签：razor, get, return-value, ext.net, gridpanel

我尝试使用 Javascript 从 Ext.net 中的 GridPanel 获取值，我使用 Hanlder 在 Javascript 函数中调用 gaSelectBind() 但它返回 [object NodeList]。

```
<script type="text/javascript">
    var nodelist;
    nodelist = document.getElementsByName('grid-device-name')
    function gaSelectBind() {
        App.ga_device_name.setValue(nodelist);
    };
</script> 
```

**这是我的数据对象：**

```
DateTime now = DateTime.Now;
    var dataDevice = new object[]
            {
                new object[] {null, false , "35 RUTA", now, null , null },
                new object[] {null, false , "770SBW", now, null , null },
                new object[] {null, false , "CORSA", now, null , null },
                new object[] {null, false , "icon2010", now, null , null },
                new object[] {null, false , "MouGL", now, null , null },
                new object[] {null, false , "mt90", now, null , null },
                new object[] {null, false , "MT90-Renny", now, null , null },
                new object[] {null, false , "MVT600-Fuel1111", now, null , null }
            }; 
```

**我使用文本字段来设置值**

```
itemchildpan1.Add(Html.X().TextField().FieldLabel("Device Name").ID("ga_device_name")); 
```

**我的网格面板：**

```
.GridPanel().Title("Device")
.Store(store =>
{//Load store from Data Object----
    store.Add(Html.X().Store().ID("Storer1")
                    .AutoLoad(true)
                    .Model(model => model.Add(Html.X().Model()
                        .Fields(fields =>
                        {
                            fields.Add(Html.X().ModelField().Name("grid-alarm"));
                            fields.Add(Html.X().ModelField().Name("grid-check"));
                            fields.Add(Html.X().ModelField().Name("grid-device-name"));
                            fields.Add(Html.X().ModelField().Name("grid-lastupdate"));
                            fields.Add(Html.X().ModelField().Name("grid-status"));
                            fields.Add(Html.X().ModelField().Name("grid-retry"));
                        }
                        )))
                    .DataSource(dataDevice)
                    );
})

.ColumnModel(columnModel =>
{//Add Data Object from store to Column
    columnModel.Columns.Add(Html.X().Column().Text("").DataIndex("grid-alarm").Width(30));
    columnModel.Columns.Add(Html.X().CheckColumn().TdCls("td-non-img-checkcolum").DataIndex("grid-check").Width(30).Editable(true));
    columnModel.Columns.Add(Html.X().Column().Text("Devide Name").DataIndex("grid-device-name"));
    columnModel.Columns.Add(Html.X().Column().Text("Latest Update").DataIndex("grid-lastupdate").Width(120));
    columnModel.Columns.Add(Html.X().Column().Text("Status").DataIndex("grid-status"));
    columnModel.Columns.Add(Html.X().Column().Text("Retry").DataIndex("grid-retry"));
})
.SelectionModel(gaSelectModel =>
{//Listener Event Handler use to call "gaSelectBind()" Function
    gaSelectModel.Add(Html.X().RowSelectionModel().Listeners(garowSelectListen =>
    {
        garowSelectListen.Select.Handler = "gaSelectBind();";
    }));
}) 
```

我无法从网格中获取价值，它显示

```
[object NodeList] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:19:50.890

您需要进行两项更改：

1.  替换以下行：

    ```
    // Old
    garowSelectListen.Select.Handler = "gaSelectBind();";

    // New
    garowSelectListen.Select.Fn = "gaSelectBind"; 
    ```

2.  将您的替换`<script>`为以下内容：

    ```
    <script type="text/javascript">
        var gaSelectBind = function (item, record, index) {
            App.ga_device_name.setValue(record.data.grid-device-name);
        };
    </script> 
    ```

可以从您的示例中删除以下代码，因为它不起作用：

```
// Remove this code...
var nodelist;
nodelist = document.getElementsByName('grid-device-name') 
```

希望这可以帮助。

# android - 将焦点移到 Android Edittext 上一点

> ID：13027541
> 
> 赞同：5
> 
> 时间：2012-10-23T09:38:15.000
> 
> 标签：android, android-layout, focus, android-edittext

我有一个多行编辑文本。当用户触摸它键入时，它会显示一半。软键盘覆盖其余部分。我需要完整地查看它。

这就是它现在的表现。

![在此处输入图像描述](../Images/850bdc8ee0dc9564487cdfec21a99365.png)

我希望它看起来像这样。

![在此处输入图像描述](../Images/67df251471eff570ad099eb5bf7b81e8.png)

我对 android:windowSoftInputMode 使用了 adjustPan 和 adjustResize 但没有任何改变。

这是我的 XML 布局。

```
 <RelativeLayout
    android:id="@+id/base"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/bg_type"
    android:keepScreenOn="true"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/own"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="120dp"
        android:layout_marginTop="160dp"
        android:contentDescription="@string/image"
        android:src="@drawable/own" />

    <ImageView
        android:id="@+id/a"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/own"
        android:layout_marginLeft="75dp"
        android:layout_toRightOf="@+id/own"
        android:contentDescription="@string/image"
        android:src="@drawable/a_pressed" />

    <ImageView
        android:id="@+id/b"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/a"
        android:layout_marginLeft="20dp"
        android:layout_toRightOf="@+id/a"
        android:contentDescription="@string/image"
        android:src="@drawable/b" />

    <ImageView
        android:id="@+id/c"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/b"
        android:layout_marginLeft="20dp"
        android:layout_toRightOf="@+id/b"
        android:contentDescription="@string/image"
        android:src="@drawable/c" />

    <FrameLayout
        android:id="@+id/txtlayer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="160dp" >

        <com.empite.telegramstop.Txt
            android:id="@+id/txt"
            style="@style/blue_edittext"
            android:layout_width="820dp"
            android:layout_height="200dp"
            android:gravity="top"
            android:imeOptions="actionNext"
            android:inputType="textMultiLine"
            android:nextFocusLeft="@id/txt"
            android:nextFocusUp="@id/txt"
            android:padding="10dp"
            android:text="@string/msg_a"
            android:textSize="25dp"
            android:textStyle="bold"
            android:typeface="monospace" >

            <requestFocus />
        </com.empite.telegramstop.Txt>
    </FrameLayout>

    <TextView
        android:id="@+id/remain"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/c"
        android:layout_centerVertical="false"
        android:layout_marginRight="-15dp"
        android:layout_marginTop="325dp"
        android:gravity="center"
        android:text="@string/remaining"
        android:textColor="@color/remain"
        android:textSize="40dp"
        android:textStyle="bold"
        android:visibility="visible" />

    <ImageView
        android:id="@+id/nxt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/remain"
        android:layout_below="@+id/c"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="148dp"
        android:contentDescription="@string/image"
        android:scaleType="center"
        android:src="@drawable/bt_next" />

    <RelativeLayout
        android:id="@+id/RelativeLayout2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/own"
        android:layout_below="@+id/txtlayer"
        android:layout_marginTop="290dp"
        android:background="@drawable/panel_type_code" >

        <EditText
            android:id="@+id/no1"
            android:layout_width="55dp"
            android:layout_height="75dp"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="275dp"
            android:layout_marginTop="18dp"
            android:background="@null"
            android:gravity="center"
            android:imeOptions="actionDone"
            android:inputType="number"
            android:maxLines="1"
            android:textSize="45dp"
            android:textStyle="bold"
            android:typeface="serif" />

        <EditText
            android:id="@+id/no2"
            android:layout_width="55dp"
            android:layout_height="75dp"
            android:layout_alignBaseline="@+id/no1"
            android:layout_alignBottom="@+id/no1"
            android:layout_marginLeft="10dp"
            android:layout_toRightOf="@+id/no1"
            android:background="@null"
            android:ems="10"
            android:gravity="center"
            android:imeOptions="actionDone"
            android:inputType="number"
            android:textSize="45dp"
            android:textStyle="bold"
            android:typeface="serif" />

        <EditText
            android:id="@+id/no3"
            android:layout_width="55dp"
            android:layout_height="75dp"
            android:layout_alignBaseline="@+id/no2"
            android:layout_alignBottom="@+id/no2"
            android:layout_marginLeft="10dp"
            android:layout_toRightOf="@+id/no2"
            android:background="@null"
            android:ems="10"
            android:gravity="center"
            android:imeOptions="actionDone"
            android:inputType="number"
            android:textSize="45dp"
            android:textStyle="bold"
            android:typeface="serif" />

        <EditText
            android:id="@+id/no4"
            android:layout_width="55dp"
            android:layout_height="75dp"
            android:layout_alignBaseline="@+id/no3"
            android:layout_alignBottom="@+id/no3"
            android:layout_marginLeft="9dp"
            android:layout_toRightOf="@+id/no3"
            android:background="@null"
            android:ems="10"
            android:gravity="center"
            android:imeOptions="actionDone"
            android:inputType="number"
            android:textSize="45dp"
            android:textStyle="bold"
            android:typeface="serif" />

        <EditText
            android:id="@+id/no5"
            android:layout_width="55dp"
            android:layout_height="75dp"
            android:layout_alignBaseline="@+id/no4"
            android:layout_alignBottom="@+id/no4"
            android:layout_marginLeft="9dp"
            android:layout_toRightOf="@+id/no4"
            android:background="@null"
            android:ems="10"
            android:gravity="center"
            android:imeOptions="actionDone"
            android:inputType="number"
            android:textSize="45dp"
            android:textStyle="bold"
            android:typeface="serif" />

        <EditText
            android:id="@+id/no6"
            android:layout_width="55dp"
            android:layout_height="75dp"
            android:layout_alignBaseline="@+id/no5"
            android:layout_alignBottom="@+id/no5"
            android:layout_marginLeft="10dp"
            android:layout_toRightOf="@+id/no5"
            android:background="@null"
            android:ems="10"
            android:gravity="center"
            android:imeOptions="actionDone"
            android:inputType="number"
            android:textSize="45dp"
            android:textStyle="bold"
            android:typeface="serif" />
    </RelativeLayout>

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@null"
        android:ems="10"
        android:visibility="visible" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:18:07.713

试试这个可能是使用完整的调整清单

```
 <activity
     android:windowSoftInputMode="adjustResize"              
     android:name=".youractivity" android:label="@string/app_name" > 
```

[并且只有在 android 上打开虚拟键盘时才能](https://stackoverflow.com/questions/11119967/move-up-text-view-only-when-virtual-keyboard-open-on-android/11120597#11120597)看到这个向上移动的文本视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:42:18.930

使用 EditText 的`setOnFocusChangeListener()`方法，并相应地更改布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:58:04.853

尝试在根 RelativeLayout 之前添加 ScrollView，并从清单中删除 android:windowSoftInputMode。

# javascript - 有没有办法使用非表格标记制作一个看起来像表格的结构？

> ID：13027542
> 
> 赞同：0
> 
> 时间：2012-10-23T09:38:15.977
> 
> 标签：javascript, jquery, css, css-float

我正在尝试使用`box-sizing:border-box;float:left`元素构建一个简单的表格。

警告 1\. 也许我的方法不好，甚至可能不需要使用“float”和“box-sizing”属性来完成这个任务，那么在这种情况下你会怎么做？警告 2\. 当然，您应该记住，您必须使用支持 CSS3 的现代浏览器才能查看此标记 :)

```
<!DOCTYPE html>
    <html>
        <head>
            <title></title>
            <meta charset="utf-8">
            <style>
                div {
                    vertical-align:top;
                    margin:0px;
                    padding:0px;
                }
                div.table {
                    border:solid 2px green;
                    width:90%;
                    background-color:red;
                }
                div.table > div:not(.clear) 
                {
                    -moz-box-sizing:border-box;
                    box-sizing:border-box;
                    float:left;
                    max-height:8em;
                    overflow:auto;
                    border:solid thin black;
                    background-color:white;
                }
                div.table > div:nth-child(3n+1):not(.clear) 
                {
                    clear:left;
                    width:40%;
                }
                div.table > div:nth-child(3n+2):not(.clear),div.table > div:nth-child(3n+3):not(.clear) {width:30%;}
                div.clear {clear:both;height:0px;border-style:none;}
            </style>
        </head>
        <body>
            <div class="table">
                <div>
                    Left first<br />Left first<br />Left first<br />Left first<br />Left first<br />Left first<br />Left first<br />Left first<br />Left first<br />Left first
                </div>
                <div>Middle first</div>
                <div>Right first</div>
                <div>Left second</div>
                <div>Middle second</div>
                <div>Right second</div>
                <div class="clear"></div>
            </div>
        </body>
    </html> 
```

您会看到那个红色区域，它显示“中间优先”和“右边优先”的 div 高度不会拉伸以适应行中高度最大的元素。如何强制他们自动拉伸高度？我更喜欢纯 CSS 解决方案，但如果它可以处理非常非常大的表，则接受 javascript (jquery) 解决方案......

**编辑：** 当然，使用浮动元素不是我的任务的方法，算了。我不喜欢这个实现，但这可能会让我更好地理解我想要什么：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta charset="utf-8">
<style>
div {vertical-align:top;margin:0px;padding:0px;}
div.table {display:inline-block;border:solid 2px green;background-color:red;}
div.table > div{display:inline-block;
max-height:8em;overflow:auto;
border:solid thin black;background-color:white;}
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
<script>
    $(document).ready(function () {
        $('<br />').insertAfter($("div.table > div:nth-child(3n+3)").not(':last'));
        $("div.table > div:nth-child(4n+1)").each(function () {
            $(this).css('width', '15em');
            if ($(this).height() < $(this).next('div').height() || $(this).height() < $(this).next('div').next('div').height()) {
                $(this).height(Math.max($(this).next('div').height(), $(this).next('div').next('div').height()));
            }
        });
        $("div.table > div:nth-child(4n+2)").each(function () {
            $(this).css('width', '10em');
            if ($(this).height() < $(this).prev('div').height() || $(this).height() < $(this).next('div').height()) {
                $(this).height(Math.max($(this).prev('div').height(), $(this).next('div').height()));
            }
        });
        $("div.table > div:nth-child(4n+3)").each(function () {
            $(this).css('width', '10em');
            if ($(this).height() < $(this).prev('div').height() || $(this).height() < $(this).prev('div').prev('div').height()) {
                $(this).height(Math.max($(this).prev('div').height(), $(this).prev('div').prev('div').height()));
            }
        });
    });
</script>
</head>
<body>
<div class="table">
<div>Left first<br />Left first<br />Left first<br />Left first<br />Left first<br />Left first<br />Left first<br />Left first<br />Left first<br />Left first</div><div>Middle first<br />Middle first<br />Middle first<br />Middle first<br />Middle first<br />Middle first<br />Middle first<br />Middle first<br />Middle first<br />longlonglonglonglonglonglonglonglonglong</div><div>Right first</div>
<div>Left second</div><div>Middle second Middle second Middle second<br />longlonglonglonglonglonglonglonglonglong</div><div>Right second</div>
</div>
</body>
</html> 
```

缺点： 1\. 需要一堆难看的JS。2\. 出现滚动条或缩放页面时会出现红色区域。它们在不同的浏览器中有所不同。有谁知道他们来自哪里？？？有可能摆脱它们吗？如果不是，我将尝试使用类似 equalHeights jquery 插件
**编辑 2：**
我找到了一个脚本来均衡一行中所有元素的高度，但我不会使用它，因为现在我意识到没有脚本可应用于大型表状结构。CSS Flexible Box Layout Module 是一种解决方案，但目前主流浏览器不支持它，并且渲染速度比普通表格慢得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:44:25.417

这只是一个建议，但**不是推荐**

使用[**CSS display: table, display: table-row 和 display: table-cell**](http://ecommercedeveloper.com/articles/1941-css-display-table-display-table-row-and-display-table-cell/)

[演示页面](http://ajaxian.com/archives/display-table)

# java - 比较Java中Postgresql中的时间戳日期

> ID：13027545
> 
> 赞同：2
> 
> 时间：2012-10-23T09:38:30.333
> 
> 标签：java, postgresql, jpa

我正在使用 PostgreSQL 数据库和 JPA。这是我的用户表

```
 CREATE TABLE users
        (
          id integer NOT NULL DEFAULT nextval('userseq'::regclass),
          firstname character varying(64) ,
          middlename character varying(64),
          lastname character varying(64),
          birthdate timestamp with time zone,
         )

    Query query = em
                    .createQuery(
    "SELECT users FROM Users users WHERE user.birthdate =:a")
                            .setParameter("a",18)
                            .setParameter("b",25);
            query.getResultList(); 
```

我想要所有年龄在 18-25 岁之间的用户。请完成我上面的 JPA 查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:41:38.973

JPQL 缺少日期运算符。在 SQL 中，您会编写如下内容：

```
SELECT age(TIMESTAMPTZ '1999-01-01') BETWEEN INTERVAL '18' YEAR AND INTERVAL '25' YEAR; 
```

但据我所知，你不能在 JPQL 中做到这一点。[`BETWEEN`在 JPQL 中受支持](http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_between)，因此我将日期参数转换为using ，`a`然后使用：`b``java.util.Date``java.util.Calendar`

```
SELECT users FROM Users users WHERE user.birthdate BETWEEN :a AND :b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T09:46:59.133

使用`Between`运算符，首先固定`user.birthdate`到`users.birthdate`。

```
 Calendar cal_1 = Calendar.getInstance();
    cal_1.add(Calendar.YEAR, -18);
    Date a = cal_1.getTime();
    Calendar cal_2 = Calendar.getInstance();
    cal_2.add(Calendar.YEAR, -25);
    Date b = cal_2.getTime();

    query.setParameter("a", a);
    query.setParameter("b", b);

    SELECT users FROM Users users WHERE users.eventsDate BETWEEN :a AND :b 
```

示例：`x BETWEEN :min AND :max`。参考[这里](http://www.objectdb.com/java/jpa/query/jpql/comparison#NOT_BETWEEN_)

# xslt - XSLT - 移动特定属性的最佳实践

> ID：13027549
> 
> 赞同：1
> 
> 时间：2012-10-23T09:38:45.480
> 
> 标签：xslt

我正在寻找一些关于如何最好地解决我的问题的指导。

我有一个类似以下但规模更大的 XML 文档。

```
<NewDataSet>
  <Table Attri1="Attri1Val" Attri2="Attri2Val" Attri3="Attri3Val" Attri4="Attri4Val" Attri5="Attri5Val" Attri6="Attri6Val" Attri7="Attri7" />
</NewDataSet> 
```

`Attri2`例如，我需要将某些属性从 Table 节点移动到 Table 节点中的`Attri5`元素中，但是我需要保持其余属性不变。

解决这个问题的最佳方法是什么？数据规模约为所示的3-4倍。

编辑：预期输出：

```
<NewDataSet>
  <Table Attri1="Attri1Val" Attri3="Attri3Val" Attri4="Attri4Val" Attri6="Attri6Val" Attri7="Attri7">
    <Attri2>Attri2Val</Attri2>
    <Attri5>Attri5Val</Attri5>
  </Table>
</NewDataSet> 
```

复杂性并不是真正的问题，更多的是数据的规模以及处理它的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:59:36.993

利用

```
<xsl:template match="@* | node()">
  <xsl:copy>
     <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Table">
  <xsl:copy>
    <xsl:apply-templates select="@*[not(name() = 'Attri2') and not(name() = 'Attri5')]"/>
     <xsl:apply-templates select="@Attri2 | @Attri5 | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Table/@Attri2 | Table/@Attri5">
 <xsl:element name="{name()}">
   <xsl:value-of select="."/>
 </xsl:element>
</xsl:template> 
```

[编辑] 属性的名称比较有点难看，但可能对您的示例有用。我们真正需要的是`@* execpt (@Attri2, @Attri5)`，只有 XPath 2.0。使用 XPath 1.0 的等效项是

```
<xsl:template match="Table">
  <xsl:copy>
    <xsl:variable name="all-attributes" select="@*"/>
    <xsl:variable name="to-be-transformed" select="@Attri2 | @Attri5"/>
    <xsl:apply-templates select="$all-attributes[count(. | $to-be-transformed) != count($to-be-transformed)]"/>
     <xsl:apply-templates select="$to-be-transformed | node()"/>
  </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:33:29.503

**此通用转换可以处理任何长度的任何属性集，其名称可以在转换外部指定**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pToTransform" select="'|Attri2|Attri5|'"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="Table">
  <xsl:copy>
      <xsl:apply-templates select=
         "@*[not(contains($pToTransform, concat('|',name(),'|')))] | node()"/>
      <xsl:apply-templates mode="makeElement"
        select="@*[contains($pToTransform, concat('|',name(),'|'))]"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="@*" mode="makeElement">
  <xsl:element name="{name()}" namespace="{namespace-uri()}">
   <xsl:value-of select="."/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<NewDataSet>
    <Table Attri1="Attri1Val" Attri2="Attri2Val"
    Attri3="Attri3Val" Attri4="Attri4Val"
    Attri5="Attri5Val" Attri6="Attri6Val"
    Attri7="Attri7" />
</NewDataSet> 
```

**产生了想要的正确结果：**

```
<NewDataSet>
   <Table Attri1="Attri1Val" Attri3="Attri3Val" Attri4="Attri4Val" Attri6="Attri6Val" Attri7="Attri7">
      <Attri2>Attri2Val</Attri2>
      <Attri5>Attri5Val</Attri5>
   </Table>
</NewDataSet> 
```

# c++ - 带有循环的 C++ 重复代码

> ID：13027550
> 
> 赞同：1
> 
> 时间：2012-10-23T09:38:46.403
> 
> 标签：c++, performance, loops, macros, overloading

我不确定这是否是一个愚蠢的问题，如果是，请向我射击！

我经常遇到这种“困境”。我在 C++ 中说过两个重载函数

假设我们有这两个*F*重载（只是下面的伪代码）

```
void F(A a, .../*some other parameters*/)
{ 
  //some code part
  //loop Starts here
  G1(a,.../* some other parameter*/)
  //loop ends here
  //some code part
}

void F(B b, .../*some other parameters*/)
{
  //some code part
  //loop Starts here
  G2(b,.../* some other parameter*/)
  //loop ends here
  //some code part
} 
```

其中*A*和*B*是不同的类型，*G1*和*G2*是做不同事情的不同功能。*除了G1*和*G2*行之外，重载的代码部分是相同的，而且它们有时非常长且广泛。现在的问题是.. 我怎样才能更有效地编写我的代码。自然，我不想重复代码（即使这样做很容易，因为它只是一个复制粘贴例程）。一位朋友建议使用宏……但这看起来很脏。这很简单吗，因为如果我现在知道是不是很愚蠢。将不胜感激任何建议/帮助。

**编辑：**我很抱歉那些想要一个代码示例的人。这个问题真的很抽象，因为我遇到了不同的“相似”情况，我问自己如何才能使代码更短/更清晰。在大多数情况下，代码很长，否则我不会一开始就问这个问题。正如 KilianDS 所指出的，确保函数本身不是很长也很好。但有时这只是不可避免的。在我遇到这种情况的许多情况下，循环甚至是嵌套的（即相互之间有几个循环），并且*F*的开头是循环的开始，而*F*的结尾是循环的结束。

何塞

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:42:18.570

在这种情况下，防止代码重复的一种简单方法是使用模板。例如：

```
void G(A a,.../* some other parameter*/)
{
    G1(a,.../* some other parameter*/);
}
void G(B b,.../* some other parameter*/)
{
    G2(b,.../* some other parameter*/);
}

template <typename T>
void F(T x, .../*some other parameters*/)
{ 
  //some code part
  //loop Starts here
  G(x,.../* some other parameter*/)
  //loop ends here
  //some code part
} 
```

请注意如何使用重载`G`函数来确定是否调用`G1`或`G2`。但是，还要注意这只能防止*代码重复*，而不是编译的可执行文件中的重复（因为每个模板实例化都会创建自己的代码）。

根据周围的架构，可能还有许多其他可行的选项（例如，虚拟方法而不是 G1/G2 调用、函数指针、lambda 函数，如果你有 C++11...）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T10:12:25.233

最明显的解决方案是将公共代码部分放入单独的函数中，并调用它们：

```
void F( A a, ... )
{
    commonPrefix(...);
    G1( a, ... );
    commonPostfix(...);
}

void F( B b, ... )
{
    commonPrefix(...);
    G2( a, ... );
    commonPostfix(...);
} 
```

如果前缀和后缀之间共享大量数据，您可以创建一个类来保存它，并使函数成为成员。

或者，您可以转发到模板，可能使用特征：

```
template <typename T>
class GTraits;

template<>
class GTraits<A>
{
    static void doG( A a, ... ) { G1( a, ... ); }
};

template <>
class GTraits<B>
{
    static void doG( B b, ... ) { G2( b, ... ): }
};

template <typename T>
void doF( T t, ... )
{
    //  ...
    GTraits<T>::doG( t, ... );
    //  ...
}

void F(A a, ...)
{
    doF( a, ... );
}

void F(B b, ...)
{
    doF( b, ... );
} 
```

然而，这很容易导致代码的公共部分被复制。（这是否是一个问题取决于。在大多数情况下，我怀疑代码膨胀是最小的。）

编辑：

既然您说通用代码包含循环逻辑：您可以使用模板方法模式，例如：

```
class CommonBase
{
    virtual void doG( other_params ) = 0;
public:
    void doF()
    {
        //  prefix
        //  loop start
        doG( other_params );
        //  loop end
        //  suffix
    }
}; 
```

然后在每个函数中定义一个单独的派生类：

```
void F( A a ,... )
{
    class DoG : public CommonBase
    {
        A myA;
        void doG( other_params ) { G1( myA, other_params ); }
    public:
        DoG( A a ) : myA( a ) {}
    } do( a );
    do.doF();
} 
```

您需要转发构造函数这一事实使它有点罗嗦，但它确实使所有通用代码保持通用。

# c# - 通过匹配特定单元格或数据（日期）将数据从一张表复制/粘贴到另一张表

> ID：13027552
> 
> 赞同：2
> 
> 时间：2012-10-23T09:38:47.350
> 
> 标签：c#, excel

我在 Excel 中有两张工作表。Sheet2 包含数据，我需要每个日期 1 个月的数据，我想通过匹配我放在空白日期上的日期来复制/粘贴 sheet1 上的数据，例如：将 Oct 1 放在 sheet1 的日期上，它会自动将 10 月 1 日的数据复制到 sheet2 上。将 10 月 2 日的副本数据放在 10 月 2 日，依此类推..

表 1

```
DATE            
Turnover  IN     out    Revenue
0     0  0   0
0     0  0   0
0     0  0   0
0     0  0   0
0     0  0   0
0     0  0   0
0     0  0   0
0     0  0   0 
```

表 2

```
1-Oct                           2-Oct           
Turnover IN  OUT     RESULT     Turnover IN  OUT     RESULT
14599    4410    4500    -90        1000     54641   737542  -90
67530    9330    1440    7890       100  345     4274    7890
57699    11520   2673    8846       500  4525    275274  8846.5
196425   55960   68800   -12840     60050    42  4247    -12840
92100    17770   2500    15270      136450   4   14  15270 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:27:35.163

好吧，要复制某些范围（包含单元格内容，...），您应该尝试以下操作，例如：

```
 Excel.Range selCell1 = ((Excel.Worksheet)Application.ActiveSheet).Range["A1", "CA2000"];
 Excel.Range selCell2 = ((Excel.Worksheet)Application.Sheets[2]).Range["A1", "CA2000"];
 selCell1.Copy(selCell2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:25:57.837

您需要 C# 解决方案吗？否则你可以很容易地直接在 excel 电子表格中构造这种类型的东西：

```
=INDEX($11:$20,ROW(),MATCH($A$1,$11:$11,0)+COLUMN()-1) 
```

![索引匹配示例](../Images/45b3b2aa65716bbb7b429688d0241569.png)

祝你好运。

# file - 与发送一个文件相比，发送多个文件有什么优势吗？

> ID：13027554
> 
> 赞同：0
> 
> 时间：2012-10-23T09:38:51.220
> 
> 标签：file, networking, ethernet, tcp-ip

与通过 TCP/IP 发送一个文件相比，发送多个文件是否有任何性能提升？

*（除了在连接中断时只能重新发送失败的文件）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:47:54.727

有 3 包连接开销和 4 包关闭开销。后者是异步的。随着文件大小的增加，效果逐渐趋近于零。

# android - Android：如何为不同的 URL 解析不同按钮的 RSS 提要

> ID：13027556
> 
> 赞同：1
> 
> 时间：2012-10-23T09:38:55.077
> 
> 标签：android, button, rss

当我只解析一个然后它正常运行时，我在我的应用程序中解析 RSS 提要，但我有 8 个不同的 URL 地址要在按钮上设置，我想为每个按钮单击解析 RSS 提要。我正在使用 SAX 解析器。我的代码如下

BaseFeedParser.java

```
package com.example.shareslab;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import com.example.shareslab.Message;

import android.sax.Element;
import android.sax.EndElementListener;
import android.sax.EndTextElementListener;
import android.sax.RootElement;
import android.util.Xml;

public class BaseFeedParser {

    static String feedUrlString = "http://www.xxxx.com/rss.xml";

    // names of the XML tags
    static final String RSS = "rss";
    static final String CHANNEL = "channel";
    static final String ITEM = "item";

    static final String PUB_DATE = "pubDate";
    static final String DESCRIPTION = "description";
    static final String LINK = "link";
    static final String TITLE = "title";    
    private final URL feedUrl;

    protected BaseFeedParser(){
        try {
            this.feedUrl = new URL(feedUrlString);
        } catch (MalformedURLException e) {
            throw new RuntimeException(e);
        }
    }

    protected InputStream getInputStream() {
        try {
            return feedUrl.openConnection().getInputStream();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public List<Message> parse() {
        final Message currentMessage = new Message();
        RootElement root = new RootElement(RSS);
        final List<Message> messages = new ArrayList<Message>();
        Element itemlist = root.getChild(CHANNEL);
        Element item = itemlist.getChild(ITEM);
        item.setEndElementListener(new EndElementListener(){
            @Override
            public void end() {
                messages.add(currentMessage.copy());
            }
        });
        item.getChild(TITLE).setEndTextElementListener(new EndTextElementListener(){
            @Override
            public void end(String body) {
                currentMessage.setTitle(body);
            }
        });
        item.getChild(LINK).setEndTextElementListener(new EndTextElementListener(){
            @Override
            public void end(String body) {
                currentMessage.setLink(body);
            }
        });
        item.getChild(DESCRIPTION).setEndTextElementListener(new EndTextElementListener(){
            @Override
            public void end(String body) {
                currentMessage.setDescription(body);
            }
        });
        item.getChild(PUB_DATE).setEndTextElementListener(new EndTextElementListener(){
            @Override
            public void end(String body) {
                currentMessage.setDate(body);
            }
        });
        try {
            Xml.parse(this.getInputStream(), Xml.Encoding.UTF_8, root.getContentHandler());
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
        return messages;
    }
} 
```

我有 8 个按钮和 8 个 RSS 提要的 URL 地址，我想为每个按钮解析它

消息列表.java

```
 package com.example.shareslab;

import java.util.ArrayList;
import java.util.Arrays;

import com.example.shareslab.R;

import android.app.ListActivity;

import android.content.Context;
import android.content.Intent;

import android.os.Bundle;

import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;

import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.Button;

import android.widget.ImageView;
import android.widget.ListView;

import android.widget.TextView;

public class MessageList extends ListActivity implements OnClickListener {

    Button home,socialmedia,tech,usworld,business,fashion,people,political;

    public static String singleDescription;
    public static String title,URLToPost,imageURL;
    public static ArrayList<String> galleryImages;
    private static class EfficientAdapter extends BaseAdapter 
    {    
        private LayoutInflater mInflater;
        public EfficientAdapter(Context context)
        {
            mInflater = LayoutInflater.from(context);
        }
        @Override
        public int getCount() {
            System.out.println("description COUNT : "+SplashActivity.description.size());
            return SplashActivity.description.size();
        }
        @Override
        public Object getItem(int position) {
            return position;
        }
        @Override
        public long getItemId(int position) {
            return position;
        }
        @Override
        public View getView(final int position, View convertView, ViewGroup parent) 
        {

            ViewHolder holder;
            if (convertView == null)
            {
                convertView = mInflater.inflate(R.layout.inflate_list_item, null);
                holder = new ViewHolder();              
                holder.title = (TextView) convertView.findViewById(R.id.inflate_title);
                holder.des = (TextView) convertView.findViewById(R.id.inflate_description);
                holder.im=    (ImageView) convertView.findViewById(R.id.inflate_image);
                convertView.setTag(holder);           
            }
            else 
            {
                holder = (ViewHolder) convertView.getTag();

            }   

            UrlImageViewHelper.setUrlDrawable(holder.im, SplashActivity.imageURLAmit.get(position),null);
            holder.title.setText(SplashActivity.titles.get(position));
            holder.des.setText(SplashActivity.description.get(position));

            return convertView;
        }   

        public static class ViewHolder {
            TextView title,des;
            ImageView im;
        }

    } // close class Efficent adapter

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        home=(Button)findViewById(R.id.buttonhome);
        socialmedia=(Button)findViewById(R.id.buttonsocial);
        tech=(Button)findViewById(R.id.buttontech);
        usworld=(Button)findViewById(R.id.buttonusworld);
        business=(Button)findViewById(R.id.buttonbusiness);
        fashion=(Button)findViewById(R.id.buttonfashion);
        people=(Button)findViewById(R.id.buttonpeople);
        political=(Button)findViewById(R.id.buttonpolitical);

        home.setOnClickListener(this);
        socialmedia.setOnClickListener(this);
        tech.setOnClickListener(this);
        usworld.setOnClickListener(this);
        business.setOnClickListener(this);
        fashion.setOnClickListener(this);
        people.setOnClickListener(this);
        political.setOnClickListener(this);

        ListView listView = getListView();
        listView.setTextFilterEnabled(true);
        this.setListAdapter(new EfficientAdapter(this));
        listView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // When clicked, show a toast with the TextView text
                galleryImages=new ArrayList<String>();
                singleDescription=SplashActivity.description.get(position);
                title=SplashActivity.titles.get(position);
                URLToPost=SplashActivity.link.get(position);
                imageURL=SplashActivity.imageURLAmit.get(position);
                System.out.println("ON CLICK URL: "+URLToPost);
                galleryImages.addAll(Arrays.asList(SplashActivity.arrays[position]));               
                startActivity(new Intent(MessageList.this,MessageListDetail.class));
            }
        });

    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:46:31.223

您可以将每个字段的 URL 存储为相应按钮的标记。

```
// ...
    home.setOnClickListener(this);
    home.setTag(new URL("http://example.com/feed1.xml"));
    socialmedia.setOnClickListener(this);
    socialmedia.setTag(new URL("http://example.com/feed2.xml"));
    tech.setOnClickListener(this);
    tech.setTag(new URL("http://example.com/feed3.xml"));    
}

@Override
public void onClick(View v) {
  URL feedUrl = (URL) v.getTag();

  // Then do your thing
  new FeedParser(feedUrl);
} 
```

并为解析器创建一个公共构造函数：

```
public BaseFeedParser(URL feedUrl){
    this.feedUrl = feedUrl;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T09:49:04.607

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="@drawable/background"
 android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="20dp"
    android:text="SPORTS LIVE"
    android:textColor="#000000"
    android:textSize="25dp" />

<Button
    android:id="@+id/button1"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_gravity="center"
    android:layout_marginTop="48dp"
    android:background="@drawable/nfl"/>

<Button
    android:id="@+id/button2"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_below="@+id/button1"
    android:layout_gravity="center"
    android:layout_marginTop="50dp"
    android:background="@drawable/nba" />

<Button
    android:id="@+id/button3"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button2"
    android:layout_below="@+id/button2"
    android:layout_gravity="center"
    android:layout_marginTop="50dp"  
    android:background="@drawable/mlb" />

<Button
    android:id="@+id/button4"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button3"
    android:layout_below="@+id/button3"
    android:layout_gravity="center"
    android:layout_marginTop="50dp"
    android:background="@drawable/ncaa" />

 </LinearLayout>

public class MainActivity extends Activity {

Button NFL,NBA,MLB,NCAA;
Intent i;

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    NFL= (Button) findViewById(R.id.button1);
    NBA= (Button) findViewById(R.id.button2);
    MLB= (Button) findViewById(R.id.button3);
    NCAA= (Button) findViewById(R.id.button4);
    i= new Intent("idss.sportslive.All");
    // NFL
    NFL.setOnTouchListener( new OnTouchListener()
    {

        @Override
        public boolean onTouch(View arg0, MotionEvent event) {
            // TODO Auto-generated method stub
            switch(event.getAction())
            {
                case MotionEvent.ACTION_DOWN:
                    NFL.setBackgroundResource(R.drawable.nflhigh);
                break;
                case MotionEvent.ACTION_UP:
                    NFL.setBackgroundResource(R.drawable.nfl);
                    // i= new Intent("idss.sportslive.All");
                     i.putExtra("url", 0);
                     startActivity(i);
                break;
            }
            return false;
        }

    });
    // NBA
    NBA.setOnTouchListener( new OnTouchListener()
    {

        @Override
        public boolean onTouch(View arg0, MotionEvent event) {
            // TODO Auto-generated method stub
            switch(event.getAction())
            {
                case MotionEvent.ACTION_DOWN:
                    NBA.setBackgroundResource(R.drawable.nbahigh);
                break;
                case MotionEvent.ACTION_UP:
                    NBA.setBackgroundResource(R.drawable.nba);
                    //i= new Intent("idss.sportslive.ALL");
                     i.putExtra("url", 1);
                     startActivity(i);
                break;
            }
            return false;
        }

    });
    //MLB
   MLB.setOnTouchListener( new OnTouchListener()
    {

        @Override
        public boolean onTouch(View arg0, MotionEvent event) {
            // TODO Auto-generated method stub
            switch(event.getAction())
            {
                case MotionEvent.ACTION_DOWN:
                    MLB.setBackgroundResource(R.drawable.mlbhigh);
                break;
                case MotionEvent.ACTION_UP:
                    MLB.setBackgroundResource(R.drawable.mlb);
                    //i= new Intent("idss.sportslive.ALL");
                     i.putExtra("url", 2);
                     startActivity(i);
                break;
            }
            return false;
        }

    });
   //NCAA
   NCAA.setOnTouchListener( new OnTouchListener()
   {

        @Override
        public boolean onTouch(View arg0, MotionEvent event) {
            // TODO Auto-generated method stub
            switch(event.getAction())
            {
                case MotionEvent.ACTION_DOWN:
                    NCAA.setBackgroundResource(R.drawable.ncaahigh);
                break;
                case MotionEvent.ACTION_UP:
                    NCAA.setBackgroundResource(R.drawable.ncaa);
                    //i= new Intent("idss.sportslive.ALL");
                     i.putExtra("url", 3);
                     startActivity(i);
                break;
            }
            return false;
        }

   });
  }

  } 
```

解析器

```
 public class All extends Activity {
List headlines;
List links;
static Context c;
ProgressDialog pd;
List team1l,score1l,team2l,score2l,matchtype;
String url1[]={ "http://www.mpiii.com/scores/nfl.php/",
         "http://www.mpiii.com/scores/nba.php/",
         "http://www.mpiii.com/scores/mlb.php/",
         "http://www.mpiii.com/scores/ncaa.php/"};
;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.listview_main);
    pd= new ProgressDialog(this);
    pd.setMessage("Loading....");
    headlines = new ArrayList();
    links = new ArrayList();
    team1l= new ArrayList();
    score1l= new ArrayList();
    team2l= new ArrayList();
    score2l= new ArrayList();
    matchtype= new ArrayList();
    c= this;
    new TheTask().execute();
    //System.out.println("URL iSSSSSSSSSSS"+d.get("url"));

    }
class TheTask extends AsyncTask<Void, Void, Void>{
    Bundle d;
    URL url ;
    @Override
    protected void onPreExecute() {
        //Intent intent= new Intent();
        d= ((Activity) c).getIntent().getExtras();
        pd.show();
    }

    @Override
    protected Void doInBackground(Void... params) {

        try {

            if(d.get("url").toString().equals("0"))
            {
                 url = new URL(url1[0]);
            }
            if(d.get("url").toString().equals("1"))
            {
                 url = new URL(url1[1]);
            }
            if(d.get("url").toString().equals("2"))
            {
                 url = new URL(url1[2]);
            }
            if(d.get("url").toString().equals("3"))
            {
                 url = new URL(url1[3]);
            }

            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();
            xpp.setInput(url.openConnection().getInputStream(), "UTF_8"); 
            //xpp.setInput(getInputStream(url), "UTF-8");

            boolean insideItem = false;

                // Returns the type of current event: START_TAG, END_TAG, etc..
            int eventType = xpp.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) {
                if (eventType == XmlPullParser.START_TAG) {

                    if (xpp.getName().equalsIgnoreCase("item")) {
                        insideItem = true;
                    } else if (xpp.getName().equalsIgnoreCase("title")) {
                        if (insideItem)
                            headlines.add(xpp.nextText()); //extract the headline
                    } else if (xpp.getName().equalsIgnoreCase("link")) {
                        if (insideItem)
                            links.add(xpp.nextText()); //extract the link of article
                    }
                }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){
                    insideItem=false;
                }

                eventType = xpp.next(); //move to next element
            }

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

for(int i=0;i<headlines.size();i++)
{
      String s=headlines.get(i).toString();
      Pattern pc = Pattern.compile("([a-zA-Z ]+)\\s+(\\d+)\\s+([a-zA-Z ]+)\\s+(\\d+)\\s+\\((\\w+)\\)"); 
      Matcher matcher = pc.matcher(s);
             while (matcher.find( ))
             {
             String team1 = matcher.group(1); 
                String score1 = matcher.group(2); 
                String team2 = matcher.group(3); 
                String score2 = matcher.group(4); 
                String result = matcher.group(5); 
                team1l.add(team1);
                score1l.add(score1);
                team2l.add(team2);
                score2l.add(score2);
                matchtype.add(result);
                System.out.println( team1 + " scored " + score1 + ", " + team2 + " scored " + score2 + ", which was " + result); 
             }
}

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        setContentView(R.layout.listview_main);
        if(CheckNetwork.isInternetAvailable(c))
        {   
        if(team1l.isEmpty())
        {
            Toast.makeText(c, "No data Available now. Try again Later", 1000).show();
            finish();
        }
        {
            ListView lv= (ListView) findViewById(R.id.list1);
            lv.setAdapter(new CustomAdapter(getApplicationContext(),team1l,score1l,team2l,score2l,matchtype,links));
        //setContentView(R.layout.contentcatalog);
    //  setUI();
            pd.dismiss();
        }
    }
        else
        {
            Toast.makeText(c, "Check Network Connection!. Try again Later", 1000).show();
            finish();
        }
    }
}
} 
```

我不确定它是否是正确的方法。我有类似的要求来解析基于按钮点击的 rss 提要。希望这会有所帮助

# java - 将对象作为参数传递给其他对象 - null

> ID：13027558
> 
> 赞同：0
> 
> 时间：2012-10-23T09:39:02.000
> 
> 标签：java

我正在构建一个铁路模拟器，包括类模拟器、车站、火车、路线和乘客。我在将路线对象作为参数传递给火车对象时遇到问题 - 它一直显示为空。我已将我的代码作为解释我的问题的最佳方式。

```
import java.util.ArrayList;

public class Simulator {
int numStations;    
Route route1;
ArrayList<Station> stations;
ArrayList<Train> trains;
Route[] routes;

public static void main(String[] args) {

    //set up network
    Simulator sim = new Simulator();                
    ArrayList<Station> stations = new ArrayList<Station>();
    stations = sim.generateStations();
    Route[] routes;
    routes = sim.generateRoutes(stations);
    System.out.println("Route array " + routes);
    ArrayList<Train> trains = new ArrayList<Train>();
    trains = sim.generateTrains(routes);

    //start simulator
    sim.generatePassengers(stations);
    Train currentTrain = trains.get(0);
    System.out.println("current train " + currentTrain);
    //route null here
    System.out.println("Route of current train " + currentTrain.route);

}

public Route[] generateRoutes(ArrayList<Station> stations){
    //initialise routes between stations

    Station[] stationList1 = {stations.get(0), stations.get(1), stations.get(2), stations.get(3), stations.get(4), stations.get(5)};
    int[] stationDist1 = {200,100,200,300,200,300};
    Route route1 = new Route(true, stationList1, stationDist1);
    System.out.println("route1 " + route1);

    //make list of all routes
    Route[] routeList;  
    routeList = new Route[1];
    routeList[0] = route1;

    return routeList;
}

public ArrayList<Train> generateTrains(Route[] routes){
    //initialise trains
    ArrayList<Train> trainList = new ArrayList<Train>();
    trainList.add(new Train(routes[0], 100, 0, true, 5));
    trainList.add(new Train(routes[0], 100, 4, false, 10));

    System.out.println("first train in list " + trainList.get(0));
    System.out.println("first route in array " + routes[0]);
    //route is null here
    System.out.println("route of first train " + (trainList.get(0)).route);

    return trainList;
}
} 
```

这是我的输出：

> route1 路由@addbf1
> 
> 路由数组 [LRoute;@42e816
> 
> 数组 Route@addbf1 中的 Route1
> 
> 列表中的第一列火车 Train@190d11
> 
> 数组 Route@addbf1 中的第一条路线
> 
> 首班车路线 null
> 
> 当前列车 Train@190d11
> 
> 当前列车路线 null

谁能解释我哪里出错了？

编辑：火车类声明：

```
public class Train {
Route route;
int capacity;
int recentLoc;
boolean forwards;
boolean atStation;
int speed;
Train currentTrain;
int timeAtStation;

//train constructor
public Train(Route r, int c, int i, boolean f, int s){
    r = route;
    c = capacity;
    i = recentLoc;
    f = forwards;
    s = speed;
    atStation = true;
    timeAtStation = 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:47:16.820

您没有为实例变量赋值。对象的默认值为空。在 Train 构造函数中将“r = route”更改为“route = r”（所有其他字段都相同）。

```
public class Train {
Route route;
int capacity;
int recentLoc;
boolean forwards;
boolean atStation;
int speed;
Train currentTrain;
int timeAtStation;

//train constructor
public Train(Route r, int c, int i, boolean f, int s){
    route = r;
    capacity = c;
    recentLoc = i;
    forwards = f;
    speed = s;
    atStation = true;
    timeAtStation = 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:47:47.213

```
route = r; 
capacity = c; 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:50:25.153

你做错了作业。

```
r = route; 
```

这意味着 的值`route`将被分配给`r`。

将您的构造函数更改为以下内容：

```
public Train(Route r, int c, int i, boolean f, int s)
{     
     route = r;;     
     capacity = c;;     
     recentLoc = i;     
     forwards = f;     
     speed = s;     
     atStation = true;     
     timeAtStation = 0; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:48:58.287

您的输出中有三个问题。

首先是当你想打印数组的内容时，你必须遍历它的元素，否则你只需要打印内存地址。为了帮助您解决 hava API 的问题，请使用以下方法：

`Arrays.toString(Object[]);`

同样的问题在您的 中`Train`，您没有覆盖该`toString()`方法，这就是 Java 打印它的地址的原因，因为这是它的默认行为。

尝试将此方法添加到您的路由类中，看看会发生什么，

```
@Override
public String toString(){
   return "This is message from rout"    
} 
```

蚂蚁火车构造器中的最后一个

您将参数分配给变量。你应该反之亦然。

```
public Train(Route r, int c, int i, boolean f, int s){
    this.route = r;
    this.capacity = c;
    this.recentLoc = i;
    this.forwards = f;
    this.speed = s;
    this.atStation = true;
    this.timeAtStation = 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T09:49:13.097

这些分配应该反过来，左边的东西是被分配的东西。

```
r = route;
c = capacity;
i = recentLoc;
f = forwards;
s = speed; 
```

应该

```
 route = r;
   capacity = c;
   recentLoc = i;
    forwards = f;
    speed = s; 
```

# javascript - 加载应用了图像过滤器的 fabric.image 的织物 js 子类

> ID：13027559
> 
> 赞同：2
> 
> 时间：2012-10-23T09:39:04.673
> 
> 标签：javascript, canvas, fabricjs

我在加载保存到我的子类图像对象的图像过滤器时遇到问题。这是我的子类的代码：

```
fabric.TopImage = fabric.util.createClass(fabric.Image, {

    type: 'top-image',

    initialize: function (element, options) {
        this.callSuper('initialize', element, options);
        this.set('name', 'top');
        this.set('lockUniScaling', true);
    },

    toObject: function () {
        return fabric.util.object.extend(this.callSuper('toObject'), { name: this.name });
    }

});

fabric.TopImage.fromObject = function (object, callback) {
    fabric.util.loadImage(object.src, function (img) {
        callback && callback(new fabric.TopImage(img, object));
    });
};

fabric.TopImage.async = true; 
```

无需应用任何过滤器即可正常工作。

我使用以下方法向该子类的实例添加过滤器：

```
objectToFilter.filters[0] = new fabric.Image.filters.RemoveWhite({threshold: 20, distance: 20});
objectToFilter.applyFilters(canvas.renderAll.bind(canvas)); 
```

保存对象通过具有类型、阈值和距离的过滤器对象。

但是加载此对象会导致 all.js 文件中的错误：

```
Uncaught TypeError: Object #<Object> has no method 'applyTo' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T01:17:09.737

由于您从未在此处调用 Image.fromObject 函数，因此过滤器永远不会初始化并且无法应用。为了使过滤器按预期工作，请改用此函数：

```
fabric.TopImage.fromObject = function (object, callback) {
    fabric.util.loadImage(object.src, function (img) {
            var oImg = new fabric.TopImage(img);
            oImg._initConfig(object);
            oImg._initFilters(object);
            callback(oImg);
    });
}; 
```

# javascript - 读取正则表达式中的所有子匹配多个匹配项

> ID：13027562
> 
> 赞同：0
> 
> 时间：2012-10-23T09:39:15.670
> 
> 标签：javascript, regex, node.js

今天我正在尝试解析“ps aux”输出（从 node.js 服务器发出）

所以我做了一个快乐的正则表达式来解析这些值，我想把所有这些花哨的信息放到一个简单的 JSON 对象中:-)

问题是，我制作的正则表达式有 3 个匹配组，进行多个匹配......我什至不知道是否有可能返回所有匹配项。

```
var spawn = require("child_process").spawn;

function exec(http_req, http_resp){
    var re_ps = /(?:([\d\.\w\-\?\/\+]+)\s+){8}(?:((?:\d+\:\d+)|(?:\w+\d+))\s+){2}([^\n]+)/g,
        result_re_ps,
        array_re_ps = [];
    //[USER, PID, %CPU, %MEM, VSZ, RSS, TTY, STAT], dates[START, TIME], COMMAND
    var ps_process = spawn("ps", ["aux"]);
    ps_process.stdout.on("data", function(data){
        var split_data = data.toString().split('\n');
        for (var i=1; i < 2; i++){
            while ((result_re_ps = re_ps.exec(split_data[i])) != null){
                console.log("--- while iteration ---");
                console.dir(result_re_ps);
                //console.dir(result_re_ps);
            }
        }
        //http_resp.write(data);
    });
    ps_process.on("exit", function (code) {
        if (code !== 0) {
            console.log("ps_process exited with code " + code);
        }
        http_resp.end();
    });
}

exports.exec = exec; 
```

“--- while迭代---”每行只有一个，相反，它应该是倍数！

我将链接一个精美的屏幕截图，让您直观地了解我期望的数据类型![在此处输入图像描述](../Images/95344cc9c2a7d689aad645c5b2f9b7ca.png)

如您所见，上面是 3 组数据，每组都有多次出现

有什么帮助吗？:p

**编辑澄清：**

这是如下一行的结果：

```
root      5213  0.0  2.1   8688  2760 ?        Ss   11:33   0:01 sshd: root@pts/0 
```

![在此处输入图像描述](../Images/e1e508efad3e73340644d6e86b9b274b.png)

如您所见，结果数组是一维的，而不是要完全包含结果，它**必须**至少是二维的

**更新：**

现在我已经解决了像这样改变我的代码的问题：

```
var spawn = require("child_process").spawn;

function exec(http_req, http_resp){
    var array_re_ps = [];
    var re_ps1 = /(?:([\d\.\w\-\?\/\+]+)\s+)/g,
        re_ps2 = /(?:((?:\d+\:\d+)|(?:\w+\d+))\s+)/g,
        re_ps3 = /([^\n]+)/g;
    //[USER, PID, %CPU, %MEM, VSZ, RSS, TTY, STAT], dates[START, TIME], COMMAND
    var ps_process = spawn("ps", ["aux"]);
    ps_process.stdout.on("data", function(data){
        var split_data = data.toString().split('\n');
        for (var i=20; i < 21; i++){
            array_re_ps[0] = [], array_re_ps[1] = [];
            for (var j=0; j<8; j++){
                array_re_ps[0].push(re_ps1.exec(split_data[i])[1]);
            }
            re_ps2.lastIndex = re_ps1.lastIndex;
            for (var j=0; j<2; j++){
                array_re_ps[1].push(re_ps2.exec(split_data[i])[1])
            }
            re_ps3.lastIndex = re_ps2.lastIndex;
            array_re_ps[2] = re_ps3.exec(split_data[i])[1];
            console.dir(array_re_ps);
        }
    });
    ps_process.on("exit", function (code) {
        if (code !== 0) {
            console.log("ps_process exited with code " + code);
        }
        http_resp.end();
    });
}

exports.exec = exec; 
```

基本上，我将我的长正则表达式拆分为 3 个较小的正则表达式，然后我会循环查看它们的结果。如果您尝试代码，我会完全按照我的意愿格式化结果数组，但我仍然认为这是一个侧面解决方案。

由于正则表达式允许您“多次解析组”，因此可以在 javascript 中具有该功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:42:34.903

看一下[`exec`函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)的返回值。

它返回第一次匹配的索引、原始字符串和元素中的捕获组`[0]...[n]`。

所有这些都在您的输出中可用，您只需遍历数组的单个元素。

# .net - .NET 中的内存对象索引

> ID：13027563
> 
> 赞同：0
> 
> 时间：2012-10-23T09:39:19.510
> 
> 标签：.net

我想在我的应用程序中创建一个快速搜索。

假设我有一堂课：

```
public class Venue
{
    public virtual string LongName { get; set; }
    public virtual string ShortName { get; set; }
    public virtual string Market { get; set; }
    public virtual int ClientEmail { get; set; }
} 
```

我想索引一组这个（和其他）对象。

用户将一些数据输入文本框的想法，“内存索引”将接受该字符串，并返回在一个或多个属性中包含搜索值的所有对象。

.NET 中是否有针对此类事情的开箱即用解决方案？还是图书馆之类的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:44:20.677

我不知道任何开箱即用的解决方案，但我会手动完成。

```
string input = "whatever";
IEnumerable<Venue> matches = allVenues.Where(v => v.LongName.Contains(input)
                               ||  v.ShortName.Contains(input)
                               ||  v.Market.Contains(input)
                               ||  v.ClientEmail.ToString().Contains(input)); 
```

也许它已经足够快了。优点是您不需要任何额外的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:45:31.673

如果您想以相对酷的方式存储数据，请检查[Lucene.Net](http://www.codeproject.com/Articles/29755/Introducing-Lucene-Net)甚至是[RavenDB](http://ravendb.net)文档数据库 - 这是基于 Lucene.Net 的方式。RavenDB 实现了 LINQ 驱动程序，因此您可以在您的集合中使用 LINQ 查询，并动态获取它们。您有索引支持，因此您可以为您的计算实现真正的高性能。

# c - 在2个vmware fusion虚拟机之间配置虚拟串口

> ID：13027564
> 
> 赞同：0
> 
> 时间：2012-10-23T09:39:19.527
> 
> 标签：c, linux, serial-port, vmware-fusion, virtual-serial-port

我正在开发一个程序，可以在 RS232 串行端口之间将文件从一台计算机发送到另一台计算机。

我可以在学校的电脑上测试它就好了，但我希望能够在家里测试它。所以我试图在vmware fusion中的一个虚拟串口之间连接2个虚拟机，但我不明白如何配置它。

我已经安装了 2 个虚拟机并为每个虚拟机添加了一个串行端口（在设置中）。但唯一可用的选项是命名串行端口将使用的文件。这个名字会怎么用？

我正在使用 /dev/ttyS1 端口，我还能正常使用它，并以某种方式将输出重定向到配置的文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:53:16.827

所以，这很容易。您必须在每个虚拟机中使用相同的文件。当您尝试在第二个虚拟机上保存相同的文件时，它会警告您该文件已经存在，只需说您要替换它即可。进入每个虚拟机的共享设置并添加文件存储在您的计算机上的文件夹，并授予它读取和写入权限。在我的情况下，是我保存 vm 文件的同一个文件夹。现在我只需要打开文件并在 2 个虚拟机之间交换信息。我不得不在我的代码中注释一些东西（它不是真正的串口），但至少我可以很好地模拟它。

# android - AFreeChart 和 iText

> ID：13027566
> 
> 赞同：1
> 
> 时间：2012-10-23T09:39:21.957
> 
> 标签：android, itext, jfreechart

我正在尝试使用 aFreeChart 生成我的图表，因为我无法在 android 上使用 JFreeChart，我想要使用 aFreeChart 以及轻量级 android 版本的 iText，但我不知道该怎么做？

```
private static AFreeChart addChart(List<Player> pl)
    {

        DefaultPieDataset myPiedataset = new DefaultPieDataset();
        for (Player cn : pl) {
            myPiedataset.setValue(cn.getNom_Player(),cn.getAge_Player());
        }

        AFreeChart chart = ChartFactory.createPieChart("Players", myPiedataset,true,true,false);

        TextTitle title = chart.getTitle();
        title.setToolTipText("Titre");

        PiePlot plot = (PiePlot) chart.getPlot();
        plot.setLabelFont(new Font("SansSerif", Typeface.NORMAL, 12));
        plot.setNoDataMessage("No data available");
        plot.setCircular(false);
        plot.setLabelGap(0.02);
        return chart;
    } 
```

# ios - 列出应用程序可用的语言

> ID：13027569
> 
> 赞同：0
> 
> 时间：2012-10-23T09:39:24.750
> 
> 标签：ios

我正在尝试打印我的应用程序支持的语言列表。

让我再解释一下：我有一个两种语言的应用程序（比如说英语和法语），我正在寻找一种以编程方式打印“en，fr”的方法，这样如果我添加了第三种语言，例如荷兰语，然后我的函数将打印“en，fr，nl”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:56:32.160

你必须使用[NSBundle 的](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html) `localizations`方法

代码应如下所示：

```
NSArray *array = [[NSBundle mainBundle] localizations];
NSLog(@"Supported localizations : %@", array); 
```

# mysql - 将 Rave 与 MyDac 一起使用

> ID：13027571
> 
> 赞同：0
> 
> 时间：2012-10-23T09:39:30.740
> 
> 标签：mysql, c++builder-xe, mydac

我正在使用 Cbuilder XE，我想将 Rave Report 与 Mydac 组件一起使用，但在我看来，Rave 只识别标准 TQuery 组件并忽略 Mydac 版本。

我会问你是否有一种方法可以使用 TMyQuery 组件和 possiby 提供 Rave 报告，这是一个简单的示例，它打印此类查询结果的普通列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:35:05.820

我只知道如何在 Delphi 中执行此操作，因此您必须将其转换为 CBuilder 等价物。我很确定 Delphi 和 CBuilder 在 RAVE 组件方面是相同的。我不知道如何以编程方式执行此操作，但使用 RAVE 报表设计器相对容易。

我使用 RAVE TRvDataSetConnection 组件将 TMyQuery 组件链接到报告。

您通常将 TRvDataSetConnection 组件连同您的查询一起放在数据模块上 - 每个 TMyQuery 一个 TRvDataSetConnection。您必须将所有 SQL 字段添加到您的 TMyQuery 组件中，以使字段名称显示在报表设计器中。您可以通过打开 TMyQuery 的字段编辑器并点击 ^F 来自动执行此操作。如果您有与 MySQL 服务器的有效连接，则这些字段将填写并分配正确的数据类型。

接下来，在 RAVE 报表设计器中创建一个新数据对象并选择直接数据视图项。将 DataView 连接到数据模块中的 RvDataSetConnections。现在您可以访问 TMyQuery 的所有字段。您将 RAVE 设计器中的 DataView 链接到要在其中显示查询内容的报表带区。

B 计划是购买和安装 FastReports。RAVE 很糟糕 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:35:03.020

我自己使用 Rave 作为通用打印实用程序的方法

```
void __fastcall TFormMain::Action_ReportExecute(TObject * Sender)
{
    __try
    {
        Screen->Cursor = crHourGlass;
        int maxrow     = 0;
        RvSystem1->Execute();
    }
    __finally
    {
        Screen->Cursor = crDefault;
    }
} 
```

RvSystem1Print ：是 RvSystem 组件的 onPrint 事件我无法在运行时构建它，因此我必须为每个需要打印实用程序的表单添加一个组件

```
void __fastcall TFormMain::RvSystem1Print(TObject * Sender)
{
    int maxrow = 0;
    String Fun = "[FormMain::RvSystem1Prin] ";
    try
    {
        RvSystem1->SystemPreview->FormWidth  = ( Screen->Width > 900 ) ? 900 : Screen->Width ;
        RvSystem1->SystemPreview->FormHeight = Screen->Height * 0.9;
        TBaseReport * report                 = (TBaseReport*) Sender;
        UtilClientPmv::DBGridToRaveReport(DBGrid1, report, maxrow);
    }
    catch (Exception & ex)
    {
        Mylog(Fun + Sysutils::Format("ERROR=[%s] ", ARRAYOFCONST((ex.Message))));
    }
} 
```

DBGridToRaveReport：扫描并打印链接到 dbgrid 的表中的所有记录（包括图像）

```
int __fastcall UtilClientPmv::DBGridToRaveReport(TDBGrid * grid, TBaseReport * report, int maxrow)
{
    String Fun         = "[UtilClientPmv::DBGridToRaveReport] ";
    TMWTable * mwTable = NULL;
    int iret           = IRET_OK;

    try
    {
        mwTable = (TMWTable*) grid->DataSource->DataSet;
        iret    = MWTableToRaveReport(mwTable, report, maxrow);
    }
    catch (Exception & ex)
    {
        Util::mylog(Fun + Sysutils::Format("ERROR=[%s] ", ARRAYOFCONST((ex.Message))));
    }
    return iret;
} 
```

MWTableToRaveReport：扫描并打印表格中的所有记录（包括图像）

```
int __fastcall UtilClientPmv::MWTableToRaveReport(TMWTable * mwTable, TBaseReport * report, int maxrow)
{
    String fldName, fldValue, smsg, Fun = "[UtilClientPmv::MWTableToRaveReport] ";
    int tot_row, tot_fld, tot_rec, iret = IRET_OK;
    double x, y, y2, rpos, pgWidth;
    TField * fld = NULL;
    TBookmark bkMark;    // TBookmark == TByteDynArray
    Graphics::TBitmap * bitmap = NULL;

    try
    {
        if (maxrow == 0)
        {
            maxrow = 1000;
        }

        __try
        {
            if (mwTable->Active == false)
            {
                mwTable->Active = true;
            }
            tot_row = mwTable->Data->RecordCount;
            if (tot_row < 0)
            {
                throw Exception("RecordCount in Null");
            }
            if (tot_row > maxrow)
            {
                tot_row = maxrow;
            }

            report->StatusFormat = "Page %d";
            report->Units = unMM;
            pgWidth       = report->PageWidth;

            mwTable->DisableControls();
            bkMark = mwTable->GetBookmark();

            tot_fld = mwTable->FieldCount;
            tot_rec = mwTable->RecordCount;

            int irow = 1, icol;

            mwTable->First();

            report->SetFont("Courier New", 10);
            report->PrintCenter("Report PmvManager", pgWidth / 2);
            report->NewLine();
            report->SetTab(10, pjLeft, 160, 0, 0, 0);

            while (!mwTable->Eof)
            {
                smsg = Sysutils::Format("Record %03d / %03d", ARRAYOFCONST((irow, tot_row)));
                report->PrintTab(smsg);
                report->NewLine();

                for (int icol = 0; icol < tot_fld; icol++)
                {
                    String NumberFormat, strValue;
                    fld     = mwTable->Fields->Fields[icol];
                    fldName = fld->DisplayName;

                    // int lnum = report->LineNum;
                    int lleft = report->LinesLeft();
                    if (lleft == 0)
                    {
                        report->NewPage();
                    }
                    if (fld->DataType == ftBlob)
                    {
                        smsg = Sysutils::Format("%30s : ", ARRAYOFCONST((fldName)));
                        report->PrintTab(smsg);
                        x = report->XPos;
                        y = report->YPos;
                        if (!fld->IsNull)
                        {

                            bitmap = new Graphics::TBitmap();
                            __try
                            {
                                TGraphicField * gFld = (TGraphicField*)fld;
                                if (gFld)
                                {
                                    TMemoryStream * memStream = new TMemoryStream();
                                    __try
                                    {
                                        gFld->SaveToStream(memStream);
                                        if (memStream->Size > 1)
                                        {
                                            memStream->Seek(0, soFromBeginning);
                                            bitmap->LoadFromStream(memStream);
                                            report->PrintBitmapRect(x, y - 3, x + 12, y + 9, bitmap);
                                        }
                                        report->NewLine();
                                        report->NewLine();
                                    }
                                    __finally
                                    {
                                        delete memStream;
                                        memStream = 0;
                                    }
                                }
                            }
                            __finally
                            {
                                delete bitmap;
                                bitmap = 0;
                            }
                        }
                    }
                    else
                    {
                        fldValue = fld->AsString;
                        smsg     = Sysutils::Format("%30s : %s ", ARRAYOFCONST((fldName, fldValue)));
                        report->PrintTab(smsg);
                    }
                    report->NewLine();
                }
                irow++;
                mwTable->Next();

                x = report->XPos;
                y = report->YPos;
                report->MoveTo(2, y);
                report->LineTo(pgWidth - 4, y);
                report->MoveTo(x, y);

                report->NewLine();
                report->NewPara();
            }
        }
        __finally
        {
            mwTable->GotoBookmark(bkMark);
            mwTable->EnableControls();
            mwTable->FreeBookmark(bkMark);
        }

    }
    catch (Exception & ex)
    {
        Util::mylog(Fun + Sysutils::Format("ERROR=[%s] ", ARRAYOFCONST((ex.Message))));
    }
    return iret;

} // __________   UtilClientPmv::MWTableToRaveReport 
```

# php - 如何在 304 未修改时减少 apache http 响应标头大小

> ID：13027574
> 
> 赞同：7
> 
> 时间：2012-10-23T09:39:34.220
> 
> 标签：php, apache, http-headers

当我请求一个已经加载的页面并检查萤火虫检查器时

我明白了

```
Status Code:304 Not Modified 
```

> **响应标头**

```
Cache-Control:public
Connection:Keep-Alive
Date:Tue, 23 Oct 2012 09:28:57 GMT
ETag:"200000000296d-12ca-4cca274ac8a98"
Expires:Tue, 30 Oct 2012 09:28:57 GMT
Keep-Alive:timeout=5, max=99
Server:Apache/2.2.22 (Win32) PHP/5.3.13
Vary:Accept-Encoding 
```

我的疑问是..有什么方法可以在页面未修改时减少从服务器传递到浏览器的响应标头。

就像在一个参考网站中一样，在使用 firebug 进行检查时，我可以找到：

> **响应标头**

```
Date:Tue, 23 Oct 2012 09:28:56 GMT
Etag:"79ee2bbda49fcd1:0" 
```

有 2 个值。请为我提供一些有用的资源。如果我在哪里错了，请纠正我？感谢帮助。

该参考网站托管在 iis 上。并且我在 apache 上得到的响应时间更长。

> **更新：**

谷歌搜索后，我得到了这个网址。 [https://github.com/apache/httpd/blob/2.2.x/modules/http/http_filters.c#L1281](https://github.com/apache/httpd/blob/2.2.x/modules/http/http_filters.c#L1281) 阅读代码，告诉我如果它是 HTTP_NOT_MODIFIED 类型的响应，它正在过滤标头字段。这个模块默认安装在 apache 中吗？或者如何在我的 apache 上安装它并让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:44:41.343

根据这些标题，您的浏览器“知道该怎么做”该页面......

您可以隐藏您的服务器信息“Server:Apache/2.2.22 (Win32) PHP/5.3.13”。但是用户浏览器需要其他行才能正确处理该页面。

# google-app-engine - 使用 App 引擎启动器传递参数

> ID：13027575
> 
> 赞同：1
> 
> 时间：2012-10-23T09:39:35.013
> 
> 标签：google-app-engine, python-2.7

我需要使用 App Engine Launcher 传递两个参数，如下所示：

```
localhost:8080/?input1=test1&input2=test2. 
```

我认为我应该使用：编辑，应用程序设置？是正确的？语法是什么？

# jsp - 使用来自另一个 JSP 类的方法

> ID：13027577
> 
> 赞同：0
> 
> 时间：2012-10-23T09:39:44.267
> 
> 标签：jsp

嗨，当谈到使用 JSP 时，我是一个完全的新手。我试图使用在同一个项目的 java 类中找到的方法来输出日期。Java 类如下所示：

```
package my_java_classes;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;

public class myFormattedDate
{

     final String DATE_FORMAT = "MM/dd/yyyy";
     final SimpleDateFormat formatter = new SimpleDateFormat(DATE_FORMAT, Locale.UK);

     public String getFormattedDate()
     {
       String formattedDate = formatter.format( new Date() );
       return formattedDate;
     }

} 
```

我试过环顾四周，似乎你可以像这样在 JSP 中调用 java 类：

```
<%@ page import = "my_java_classes.myFormattedDate.java" %> 
```

但这告诉我“无法解决”。这里有什么问题？

如果我错了也请纠正我，但您也可以使用以下方法调用其他 JSP 类：

```
<%@ include file='jsp_page_name.jsp'%> 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:44:05.263

要导入一个类，只需使用类标识符。

```
<%@ page import = "<package>.<class>" %> 
```

不需要额外的 .java。

# joomla2.5 - Joomla：我们如何将默认 url 重定向更改为自定义表单页面？

> ID：13027579
> 
> 赞同：0
> 
> 时间：2012-10-23T09:39:49.367
> 
> 标签：joomla2.5

在 Joomla 2.5.6 核心登录模块中，它们是登录文本框下的三个链接。

```
Forgot your password?
Forgot your username?
Don't have an account? 
```

如果用户单击“创建帐户”，它会重定向到 Joomla 默认注册表单`mysite/index.php/en/joomla/joomla-components/registration-form?view=reset`

我们如何更改它以重定向到自定义表单页面？

```
mysite/index.php/en/forgot-password
mysite/index.php/en/forgot-username
mysite/index.php/en/create-account 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:48:42.843

有两种方法可以做到这一点。

1.  您可以为每个链接分配一个菜单项。只需为每种类型创建菜单，例如登录、忘记密码等。

    ![在此处输入图像描述](../Images/9b46b737949dae3536ab172b001eb305.png)

2.  或者另一种方法是用`.htaccess`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:57:21.507

如果我没有误会您，那么这将对您有所帮助。您可以覆盖登录模块的默认布局[阅读更多](http://www.ostraining.com/blog/joomla/alternative-layouts-for-modules/)

将其复制`modules/mod_login/tmpl/default.php`并粘贴到. 并`/templates/activetemplate/html/mod_login`更改以下代码

```
<ul>
        <li>
            <a href="<?php echo JRoute::_('index.php?option=com_users&view=reset'); ?>">
            <?php echo JText::_('MOD_LOGIN_FORGOT_YOUR_PASSWORD'); ?></a>
        </li>
        <li>
            <a href="<?php echo JRoute::_('index.php?option=com_users&view=remind'); ?>">
            <?php echo JText::_('MOD_LOGIN_FORGOT_YOUR_USERNAME'); ?></a>
        </li>
        <?php
        $usersConfig = JComponentHelper::getParams('com_users');
        if ($usersConfig->get('allowUserRegistration')) : ?>
        <li>
            <a href="<?php echo JRoute::_('index.php?option=com_users&view=registration'); ?>">
                <?php echo JText::_('MOD_LOGIN_REGISTER'); ?></a>
        </li>
        <?php endif; ?>
    </ul> 
```

并在登录模块中设置布局。

# c# - 如何从客户端输入的地址栏中获取值？

> ID：13027584
> 
> 赞同：2
> 
> 时间：2012-10-23T09:40:08.663
> 
> 标签：c#, asp.net, web-applications

我不知道如何放置标题，但我会尝试在这里解释它的要求。

通常用户在浏览器的地址栏中输入 URL，例如**www.example.com**，然后单击链接并重定向到另一个页面**www.example.com/test.aspx**。或者，如果用户知道完整路径，也可以从地址栏中输入/键入**www.example.com/test.aspx 。**

因此，我需要编写一个代码，用户可以在地址栏中键入 URL，例如**www.example.com/test.aspx?usr="www.test.com"**。（注意：加上**usr="www.test.com"**） **www.example.com/test.aspx?**后面
的**"usr="www.test.com"**包含一个存储在数据库中的值。 所以，当用户键入**www.example.com/test.aspx?usr="www.test.com"**它将在数据库中搜索匹配**www.test.com**并在找到时执行一些处理。

 ******我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T09:45:40.563

您必须使用[Request.QueryString](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx)来获取传递给页面的任何参数的值。存储在页面变量中的结果可用于检索所需的数据。

```
string usr = Request.QueryString["usr"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T09:45:39.790

如果值是在查询字符串中传递的（“？”之后的部分），您可以使用 Request 对象检查它。

C＃

```
string url = HttpContext.Current.Request["usr"];
// Then perform your search based on the value in URL. 
```

注意：`string url = HttpContext.Current.Request.QueryString["usr"];`如果您想确保您的值`usr`仅来自查询字符串而不是 POST 或 COOKIE，也可以使用。[请参阅此处](https://stackoverflow.com/questions/2312855/requestkey-vs-request-paramskey-vs-request-querystringkey-c-sharp-as)了解更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T09:45:54.937

您可以在`?`使用 HttpContext之后获取 url 中的值

```
string url = HttpContext.Current.Request["usr"]; 
```******

# c - 叉子和管道不能很好地工作，它们同时执行

> ID：13027585
> 
> 赞同：0
> 
> 时间：2012-10-23T09:40:11.123
> 
> 标签：c, fork, pipe

这是我目前拥有的一段代码：

```
 int main () 
  {
  int pid, fd[2], i;
  char comanda[1000], *var, vect[100][100], text[100];
  if((pid = fork()) < 0 )
  {
    perror("fork error");
    exit(1);
  }
  if(pid){ 
      printf("enter command: \n");
      scanf("%[^\t\n]", comanda);
      close(fd[0]);
      close(0);
      var = strtok(comanda, " ");
      i=0;
      while(var != NULL)
      {
        strcpy(vect[i], var);
        var = strtok(NULL, " ");
        i++;
      }
      if(strcmp(vect[0], "login") == 0)
      {
          write(fd[1], "login", 5);
          printf("I got login");
      }
      close(fd[1]);
      wait(NULL);
  }
  else
  {
      close(fd[0]); 
      int i=0;
      read(fd[0], &text, sizeof(text));
      printf("This is the child ");
      exit(0);
  }
  return 0;
} 
```

而预期的输出将是：

1.  输入命令：
2.  我在这里输入命令-
3.  他在管子里写
4.  他写道“我登录了”
5.  他进入孩子并处理我的文字

我得到的输出有点奇怪：

1.  “输入命令：”来自父级......然后
2.  “这是孩子”来自孩子？！？！？！从哪里？！？！
3.  询问输入，scanf
4.  从父母那里写“我登录了”。

这有点奇怪，我想要的只是在父进程中读取某些内容，在管道中写入并将其发送到子进程，该子进程实际上应该使用该值执行某些操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:46:19.947

您没有在任何地方初始化`fd`数组，以便它实际上包含有效的文件描述符。因此，孩子的调用`read`立即失败，文件描述符无效（您应该检查所有系统调用的返回码），这解释了孩子的“意外”输出。

在父级中（即在调用之前`fork`），您需要进行`fd`如下初始化：

```
pipe(fd); 
```

并删除

```
close(fd[0]); 
```

从孩子那里，因为您需要从该 fd 中读取。

# python - SQLAlchemy Match Against 子句

> ID：13027587
> 
> 赞同：4
> 
> 时间：2012-10-23T09:40:15.750
> 
> 标签：python, sqlalchemy

我有带有全文索引的 MySQL 表。我想知道如何将 MATCH ... AGAINST() 与 SQLAlchemy 一起使用。你有一些例子吗？

```
...
    trs = dbsession.query(Trans).filter(Trans.client_id==user_id)
    if search and search != '':
        trs = trs.filter(or_(Trans.transcribe.like('%'+search+'%'), Trans.lang_name.like('%'+search+'%')))
... 
```

我想用 'MATCH/AGAINST IN BOOLEAN MODE' 构造替换 LIKE，但我不知道如何

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:18:20.000

您应该只需要使用该子句：

```
Trans.lang_name.match(str_to_match) 
```

`str_to_match`您要匹配的字符串在哪里。

这（对于 MySQL 方言）编译为（假设`Trans`模型表名是`trans`并且模型属性与列名匹配）：

```
'MATCH(trans.lang_name) AGAINST (%s IN BOOLEAN MODE)' % str_to_match 
```

# java - 将编码为字符数组的 C-ctyle 字符串转换为 Java 字符串

> ID：13027588
> 
> 赞同：3
> 
> 时间：2012-10-23T09:40:22.520
> 
> 标签：java, c, string, terminator

我有一个在 Java 中编码为字符数组的 C 样式字符串，但我想将此数组转换为 Java 字符串。我尝试使用匹配的构造函数调用，

```
String toRet = new String(new char[]{'B','A','D','\0', 'G', 'A', 'R', 'B', 'A', 'G', 'E'});
System.out.println(Arrays.toString(toRet.toCharArray())); 
```

但结果是不正确的，实际上是奇怪的错误。上面的代码输出如下：

```
[B, A, D, 
```

这就是我想要的

```
[B, A, D] 
```

我在 Ubuntu 上的 openJdk6 上运行。我还没有在其他虚拟机上测试过上面的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:42:22.867

这里不需要字符串参与。只需复制到一个比输入数组短一个字符的新数组中。用于此任务的方法是`Arrays.copyOf`。

您的输出有问题的原因是 Java 中的字符串与空终止符无关。您的第一行代码创建了一个字符串，其最后一个字符是空字符。

## 回复您更新的问题

如果您在 null-char 后面有垃圾，您可以使用`new String(inputArray)`，然后找到 null-char`String.indexOf('\0')`并在`String.substring`操作中使用它来删除不需要的部分。但是，仅迭代数组以定位空字符然后`Arrays.copyOf`将该索引用作截止点会更简单（从时间/空间复杂性的角度来看）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:50:49.127

您可以使用`trim()`删除空格字符：

```
System.out.println(Arrays.toString(toRet.trim().toCharArray())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:17:29.800

为了让必须维护您的代码的人感到困惑，您可以编写：

```
char[] dta = new char[]{'B','A','D','\0', 'G', 'A', 'R', 'B', 'A', 'G', 'E'};

String string = (dta[0] == '\0') ? "" : (new String(dta)).split("\0")[0];
System.out.println(string.toCharArray()); 
```

# python - mod python，从请求对象获取POST参数

> ID：13027596
> 
> 赞同：0
> 
> 时间：2012-10-23T09:40:55.173
> 
> 标签：python, apache, mod-python

是否有任何基本示例显示如何从 mod python 自定义处理程序中的请求中获取 POST 参数。我在 GET 请求中没有问题，我从 request.args 获取参数，但是如果方法是 POST，request.args 是 None。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:46:06.180

`request.args`存储查询字符串参数，如[文档中所述](http://www.modpython.org/live/mod_python-2.7.8/doc-html/pyapi-mprequest-mem.html#l2h-74)。

如果您想获取 POST 变量，您始终可以读取请求的正文 ( [`request.read()`](http://www.modpython.org/live/mod_python-2.7.8/doc-html/pyapi-mprequest-meth.html#l2h-31)) 并解析它（在您的情况下为 urldecode）。

但请记住，正如官方 mod_python 主页上所述：

> Mod_Python 的当前状态
> 
> 目前 mod_python 未在积极开发中。这并不意味着它像某些人声称的那样“死了”。这意味着代码和项目已经足够成熟，几乎不需要维护它。

这意味着你最好使用更现代的东西，比如 mod_wsgi。

# java - 将自定义语言编译为 Java 时的安全性

> ID：13027602
> 
> 赞同：1
> 
> 时间：2012-10-23T09:41:14.297
> 
> 标签：java, security, reflection, sandbox

我正在将自定义语言中的用户输入代码编译为 Java。到目前为止，生成的代码只能有一个具有静态方法的类。因为用户代码不安全，所以我设置了一个安全管理器，并限制了文件、网络和许多其他权限。该代码也在沙盒虚拟机上运行。

我还能做些什么来确保机器不会受到损害。具体来说，考虑到 Java 不安全的所有传言，是否有测试包或套件可以用来尝试突破 Java 沙箱进入 VM 本身？

# matlab - 将某些文本放入matlab中的向量中

> ID：13027603
> 
> 赞同：5
> 
> 时间：2012-10-23T09:41:16.183
> 
> 标签：matlab, character

> **可能重复：**
> [从 matlab 中的文本文件中查找特定数据](https://stackoverflow.com/questions/12892275/finding-a-specific-data-from-a-text-file-in-matlab)

我已经使用以下代码打开了标题为“gos.txt”的文本文件：

```
s={}; 
fid = fopen('gos.txt'); 
tline = fgetl(fid); 
while ischar(tline) 
   s=[s;tline]; 
   tline = fgetl(fid); 
end 
```

我得到的结果如下：s =

```
'[Term]'    
'id: GO:0008150'
'name: biological_process'
'namespace: biological_process'
'alt_id: GO:0000004'
'alt_id: GO:0007582'
[1x243 char]
[1x445 char]
'subset: goslim_aspergillus'
'subset: goslim_candida'
'subset: goslim_yeast'
'subset: gosubset_prok'
'synonym: "biological process" EXACT []'
'synonym: "biological process unknown" NARROW []'
'synonym: "physiological process" EXACT []'
'xref: Wikipedia:Biological_process'
'[Term]'    
'id: GO:0016740'
'name: transferase activity'
'namespace: molecular_function'
[1x326 char]
'subset: goslim_aspergillus'
'subset: goslim_candida'
'subset: goslim_metagenomics'
'subset: goslim_pir'
'subset: goslim_plant'
'subset: gosubset_prok'
'xref: EC:2'
'xref: Reactome:REACT_25050 "Molybdenum ion transfer onto molybdopterin, Homo sapiens"'
'//is_a: GO:0003674 ! molecular_function'
'is_a: GO:0008150 ! molecular_function (added by Zaid, To be Removed Later)'
'//relationship: part_of GO:0008150 ! biological_process'
'[Term]'    
'id: GO:0016787'
'name: hydrolase activity'
'namespace: molecular_function'
[1x186 char]
'subset: goslim_aspergillus'
'subset: goslim_candida'
'subset: goslim_metagenomics'
'subset: goslim_plant'
'subset: gosubset_prok'
'xref: EC:3'
'//is_a: GO:0003674 ! molecular_function'
'is_a: GO:0016740 ! molecular_function (added by Zaid, to be removed later)'
'relationship: part_of GO:0008150 ! biological_process'
'[Term]'    
'id: GO:0006810'
'name: transport'
'namespace: biological_process'
'alt_id: GO:0015457'
'alt_id: GO:0015460'
[1x255 char]
'subset: goslim_aspergillus'
'subset: goslim_candida'
'synonym: "small molecule transport" NARROW []'
'synonym: "solute:solute exchange" NARROW []'
'synonym: "transport accessory protein activity" RELATED [GOC:mah]'
'is_a: GO:0016787 ! biological_process'
'relationship: part_of GO:0008150 ! biological_process'
.
.
.
. 
```

之后的步骤是如何获取某个字符并将其放入向量中。例如：我想将所有包含 'id: GO:*******' 的行放入向量中，我也是想要获得 'is_a: GO:*******' 到一个向量，请注意我不想在同一行中之后的字符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T10:05:04.150

您可以在这里轻松使用`regexp`- 它适用于单元格：

```
matching_lines = s{~cellfun('isempty', regexp(s, '^id: GO'))}

ans =

 id: GO:0008150

ans =

 id: GO:0016740 
```

提取所有以 . 开头的行`id: GO`。单独调用会为您提供 0/1的`cellfun`向量，其中 1 表示其中的字符串`s`与您的查询匹配。

类似的行查找包含`is_a: GO:`. 也可以使用 . 从字符串中删除不必要的字符`regexp`。

可以使用以下`'tokens'`参数提取部分字符串`regexp`：

```
tok = regexp(s, '^id: (GO.*)', 'tokens');
idx = ~cellfun('isempty', tok);
v   = cellfun(@(x)x{1}, {tok{idx}});
sprintf('%s ', v{:})

ans =

 GO:0008150 GO:0016740 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:52:28.630

假设您只想在一行的开头找到东西，这很简单：

```
found=[]
for i=1:length(s)
    temp = s{i};
    if strcmp('id: GO:',temp(1:min(7,end));
        found = [found i];
    end
end 
```

现在发现包含一个向量，其中包含以 id 开头的字符串的所有位置：GO：

我目前无法在 Matlab 中尝试，但这应该是正确的。

# javascript - 按值获取列表的 RadioButton

> ID：13027605
> 
> 赞同：1
> 
> 时间：2012-10-23T09:41:23.217
> 
> 标签：javascript, jquery, jsp

我有一个带有数据和单选按钮的表格，可以检查：接受、待处理、拒绝。在保存时，我想检查是否有任何单选按钮仍处于待处理状态。我怎样才能做到这一点？

单选按钮如下所示：

```
<td class="fit">
 <table>
  <tr>
   <td class="pad0"><div class=""><fmt:message key='status.registration.registered'/>:</div></td>
   <c:if test="${participation.registrationStatus == 2}"><td class="pad0 padL10"><spring:radiobutton path="assignmentFormArray[${i}].registrationStatus" value="2" checked="checked"/></td></c:if>
   <c:if test="${participation.registrationStatus != 2}"><td class="pad0 padL10"><spring:radiobutton path="assignmentFormArray[${i}].registrationStatus" value="2"/></td></c:if>
  </tr><tr>
   <td class="pad0"><div class=""><fmt:message key='status.registration.pending'/>:</div></td>
   <c:if test="${participation.registrationStatus == 1}"><td class="pad0 padL10"><spring:radiobutton path="assignmentFormArray[${i}].registrationStatus" value="1" checked="checked"/></td></c:if>
   <c:if test="${participation.registrationStatus != 1}"><td class="pad0 padL10"><spring:radiobutton path="assignmentFormArray[${i}].registrationStatus" value="1"/></td></c:if>
  </tr><tr>
   <td class="pad0"><div class=""><fmt:message key='status.registration.declined'/>:</div></td>
   <c:if test="${participation.registrationStatus == 6}"><td class="pad0 padL10"><spring:radiobutton path="assignmentFormArray[${i}].registrationStatus" value="6" checked="checked"/></td></c:if>
   <c:if test="${participation.registrationStatus != 6}"><td class="pad0 padL10"<spring:radiobutton path="assignmentFormArray[${i}].registrationStatus" value="6"/></td> </c:if>
  </tr>
 </table>
</td> 
```

我尝试了以下 Javascript 函数：

```
function save(){
 alert($("input:radio[value='1']:checked"));
} 
```

不幸的是，这不起作用。即使没有选择值为 1 的单选按钮，它也会始终使用对象发出警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:48:16.493

```
 $('input:radio[name=name of radio button]:checked').val(); 
```

这将为您提供所选单选按钮的值..您可以检查该按钮是挂起还是接受或拒绝...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:12:02.543

我找到了解决方案。但感谢任何想提供帮助的人：

```
function save() {
 var isPending = false;
 $("input[type='radio']:checked").each(function(){
    if ($(this).val() == 1){
        isPending = true;
    };
 });
 if (isPending){
    alert("isPending");
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:37:21.170

i think u can create a simple boolean array which stores the values of the radio buttons on change of radio buttons u need to call a set method every time this is just like a bean to set and get the values of the form element , on save u can simply check the boolean array

# sql - 查询说明

> ID：13027608
> 
> 赞同：0
> 
> 时间：2012-10-23T09:41:26.223
> 
> 标签：sql, oracle11g

我有一个类似于以下的查询，

```
select * from T1 where abc in (select distinct abc from T2); 
```

场景是**表 T2 中没有名为 abc 的字段**，因此内部查询无效，但整个查询仍然返回输出。

这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:46:26.990

如果 中没有列，则子查询`abc`中`t2`的对 的引用`abc`将通过在 中查找列来`abc`解决`t1`。所以查询最终是

```
select * 
  from T1 
 where t1.abc in (select distinct t1.abc 
                    from T2); 
```

这总是正确的（假设`T2`至少有 1 行并且`t1.abc`不为 NULL。

这是您应该始终限定列引用的众多原因之一。这样，您将收到语法错误，而不是意外引用不同的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:45:14.043

来自 T1 的 abc 对子查询可见，并且可以在表 T2 上的任何表达式中列出。

因此对于 T2 中的每一行，将返回 T1 中当前行的 abc 值。

因为你有不同的，子选择将只返回一行。

因此，实际上“abc in (abc)”将始终为真，因此您已经有效地编写了

```
select * from T1; 
```

# iphone - 报亭图标的新标签

> ID：13027611
> 
> 赞同：1
> 
> 时间：2012-10-23T09:41:33.877
> 
> 标签：iphone, icons, newsstand-kit

众所周知，当我们收到带有报刊亭的推送通知或我的服务器发布了新杂志时，报刊亭货架将显示我的应用程序的报刊亭图标和一个新标签，我的问题是：新标签是由 Apple 或自动制作的添加报刊亭问题时由我执行？如果新标签是苹果的aotu，如果本地化语言是中文或日文，“新”标签会变成“新规”或其他本地词？非常感谢！

![在此处输入图像描述](../Images/ce3527842eed6362d95185c3a2df9c79.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:18:31.667

要添加“新”徽章，

```
UIApplication *app = [UIApplication sharedApplication];
[app setApplicationIconBadgeNumber:[app applicationIconBadgeNumber]+1]; 
```

# .net - VB.NET 项目属性命名空间与 Imports 语句？

> ID：13027628
> 
> 赞同：3
> 
> 时间：2012-10-23T09:42:33.373
> 
> 标签：.net, vb.net, namespaces, import

`Imports [NameSpace]`在 VB.NET 项目中，在 Project-Properties 中导入命名空间和在文件开头使用语句有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:44:12.113

项目属性中的导入适用于*所有*代码文件。

该`Imports`指令仅适用于声明它的类。

从[How to: Add or Remove Imported Namespaces (Visual Basic)](http://msdn.microsoft.com/en-us/library/3w4tctcf.aspx) on MSDN:

> 导入的命名空间在 Project Designer 的 References 页面上进行管理。您在此对话框中指定的导入将直接传递给编译器 (/imports) 并应用于项目中的所有文件。

# backbone.js - 有没有办法在骨干木偶复合材料或项目视图中获取视图渲染状态？

> ID：13027630
> 
> 赞同：2
> 
> 时间：2012-10-23T09:42:34.473
> 
> 标签：backbone.js, marionette

我们如何在骨干木偶中跟踪视图渲染的状态。

例如视图需要从服务器获取一些数据来渲染它。

```
App.main.currentView.ChatContactRegion.show(new ChatContactsView()); 
```

在这里我如何检查视图是否成功呈现到给定区域？**show**函数有回调吗？

谢谢彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:28:40.380

> 区域经理将在显示和关闭视图期间引发一些事件：

因此，在您的示例中，`ChatContactsView`传递给的实例`show()`将`onShow`触发一个事件。

您可以在`ChatContactsView`类定义中挂钩该事件：

```
ChatContactsView = Marionette.ItemView.extend({
  onShow: function(){
    // called when the view has been shown
  }
}); 
```

[文档](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.region.md#region-events-and-callbacks)中的更多详细信息

# php - Sphinx - 需要确定每个搜索结果来自哪个索引（有 4 个索引）

> ID：13027636
> 
> 赞同：0
> 
> 时间：2012-10-23T09:43:07.230
> 
> 标签：php, full-text-search, sphinx

我在我的网站上使用了以下 Sphinx 示例，它可以正常工作，但是因为我已经索引了多个表 - 我需要能够计算出每个搜索结果来自哪个表并相应地生成一个 URL。 [http://www.nearby.org.uk/sphinx/example5.php?q=test](http://www.nearby.org.uk/sphinx/example5.php?q=test)（注意这不是我的网站）

我的代码（减去 pastebin 上的 MySQL 连接详细信息） [http://pastebin.com/brbUu5VD](http://pastebin.com/brbUu5VD)

例如..如果它是一篇新闻文章......这样的......

```
mysite.com/news/view/123/my-page-title 
```

如果是图书馆文章，那么它会稍微改变

```
mysite.com/library/view/99/article-title 
```

任何人都可以建议如何做到这一点 - 在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:21:01.990

向索引添加新属性的最简单方法。

例如

```
index 1
sql_query = SELECT id, 1 as table_id, .... 
sql_attr_uint = table_id

index 2
sql_query = SELECT id, 2 as table_id, .... 
sql_attr_uint = table_id 
```

您可以在搜索结果中获得该属性，然后您可以使用它来创建链接。

# php - 如何通过注销结束php中的会话

> ID：13027644
> 
> 赞同：1
> 
> 时间：2012-10-23T09:43:34.403
> 
> 标签：php, session

我`$_SESSION['ProdID'] = $ProdID;`在代码的前面开始了一个会话，并在脚本的另一个页面中启动了另一个 ProdID 会话。

我想结束第一个，而这个新的将在不注销的情况下处于活动状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:12:19.920

使用您想要的任何名称创建一个页面。例如，您创建一个名为 logout.php 的页面并将此代码粘贴到其中。

```
<?php
    session_start();    
    session_destroy();
    header('location:login_page.php');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:51:07.957

[首先通过重新生成新的会话 ID](http://php.net/session_regenerate_id)来销毁当前会话以创建新的 cookie。*然后您可以在新*会话中设置您的值，旧会话被销毁。如果您不再需要它们，可以选择删除所有旧会话变量：

```
/* generate new session id and delete old session in store */
session_regenerate_id(true);

/* optional: unset old session variables */
$_SESSION = array();

/* set new value(s) */
$_SESSION['name'] = 'value'; 
```

如果您仍想保留旧会话（*“不注销”*），您可以删除该`true`参数，以便将旧会话保留在存储中：

```
/* generate new session id and keep old session in store */
session_regenerate_id(); 
```

其余的将保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T09:49:36.413

如果要销毁所有会话，最好使用 session_destroy()

如果要销毁特定会话，可以使用 unset($_SESSION['']);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:47:33.013

尝试使用 session_destroy(); 结束当前会话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T09:47:43.297

只键入代码的未设置会话结束，像这样

```
unset($_SESSION['ProdID']); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T09:55:43.540

利用

```
unset($_SESSION["ProdID"]); 
```

# c# - 跨页面发布 GridView

> ID：13027648
> 
> 赞同：1
> 
> 时间：2012-10-23T09:43:41.440
> 
> 标签：c#, asp.net

我在跨页面发布 GridView 时遇到问题。

我得到的错误如下： **对象引用未设置为对象的实例。**

我采取的步骤：

1.  创建新页面并添加一个 GridView
2.  创建一个带有 PostBack 到新页面的按钮。

    ```
    <asp:Button ID="Button1" Text="Button 1" PostBackUrl="~/Page2.aspx?button=1" runat="server" /> 
    ```

3.  将代码添加到新页面。

    ```
    protected void Page_Load(object sender, EventArgs e)
    {
       if (Page.PreviousPage == null)
       {
          Label1.Text = "Vul een planing in.";
       }
       else
       {
          ContentPlaceHolder pageContent =
              (ContentPlaceHolder)(Page.PreviousPage.FindControl("Content1"));
          GridView1.DataSource = pageContent.FindControl("GridView2"); // In this line I'm getting the error
       }
    } 
    ```

看着错误，我忘记了参考。谢谢你的帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:49:37.057

看起来这[`Server.Transfer`](https://msdn.microsoft.com/en-us/library/ms525800(v=vs.90).aspx)是您问题的答案。看到这篇文章：[Page.PreviousPage.FindControl 是 NULL](https://stackoverflow.com/questions/8917840/page-previouspage-findcontrol-is-null)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:16:19.627

请检查followinf链接以在另一个页面中获取上一个页面控件值，因此您可以在代码中使用相同的登录，但是如果griview包含大量数据，您的页面性能将会降低。

[http://www.allinterview.com/showanswers/36626/page4.html](http://www.allinterview.com/showanswers/36626/page4.html)

# iphone - 应用 3d 动画来查看

> ID：13027649
> 
> 赞同：0
> 
> 时间：2012-10-23T09:43:48.727
> 
> 标签：iphone, objective-c, ios, cocoa-touch, core-animation

我在动画中苦苦挣扎，找不到任何我想要的东西。我想对视图应用 3d 旋转。就像立方体旋转一样，视图应该有两个图像，并且像 iphone 通知动画一样从一个旋转到另一个。我想要的动画是这样的：[http ://www.youtube.com/watch?v=pBgVbzBJqDc](http://www.youtube.com/watch?v=pBgVbzBJqDc)

我认为甚至没有一种方法可以做到这一点，所以任何帮助都将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:52:01.020

您可以通过在视图层上设置带有变换的 CATransform3D 来将 3D 动画应用到视图。没有任何透视，旋转看起来非常平坦，因此您应该为变换矩阵的第三行和第四列设置适当的值。

**对象：**

```
CATransform3D rotation = CATransform3DIdentity;
rotation.m34 = -1.0/500.0;
rotation = CATransform3DRotate(rotation, M_PI, 1.0, 0.0, 0.0);
myView.layer.transform = rotation; 
```

**迅速：**

```
var rotation = CATransform3DMakeRotation(CGFloat(M_PI), 1.0, 0.0, 0.0);
rotation.m34 = CGFloat(-1.0/500.0)
firstView.layer.transform = rotation; 
```

您可以为这两个视图提供合适的角度值，并将它们定位在它们应该在屏幕上的位置。

为了使它看起来像一个立方体旋转，您还可以在旋转变换矩阵之前将层平移到立方体侧面宽度的一半（这样它就不会围绕中心旋转）。

```
rotation = CATransform3DTranslate(rotation, 0.0, 0.0, sideOfCube/2.0); 
```

# reporting-services - 自动显示多值参数的报表数据

> ID：13027650
> 
> 赞同：0
> 
> 时间：2012-10-23T09:43:50.303
> 
> 标签：reporting-services, ssrs-2008

我有一个带有一些多值参数的报告，但是在显示报告时我必须按“查看报告”按钮来显示报告数据，我向参数添加了默认值，但它仍然等到我按下按钮，这是让我头疼的是，我有一组不可为空的参数，范围从多值下拉列表到简单字符串，我真的需要它来呈现具有给定默认值的报告，而无需等待用户按下任何东西

# android - 标签主机安卓

> ID：13027651
> 
> 赞同：1
> 
> 时间：2012-10-23T09:43:58.793
> 
> 标签：android, android-intent, android-tabhost

我正在创建一个简单的应用程序，它总共有 3 个活动

1.  登录 - 拥有用户名、密码字段以及登录和注册按钮
2.  注册 - 具有各种表单字段和提交按钮
3.  留言- 登录成功后进入本次活动

我使用 tabhost，它有 3 个选项卡，定义了上述 3 个活动。单击选项卡时，我可以在各个活动之间切换，但是当我使用表单上的按钮进行切换时，我看不到选项卡。我想在屏幕上显示标签，无论是从标签还是按钮切换。是否有任何概念，例如维护选项卡布局并且仅更改框架中的活动...我听说过 tabhost 组但无法使用它...有可能吗？保护你

我的标签主机代码是

```
public class TabActivity extends android.app.TabActivity
{
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab);

      /** TabHost will have Tabs */ 
    TabHost tabHost = (TabHost)findViewById(android.R.id.tabhost); 

    /** TabSpec used to create a new tab.  
     * By using TabSpec only we can able to setContent to the tab.  
     * By using TabSpec setIndicator() we can set name to tab. */

    /** tid1 is firstTabSpec Id. Its used to access outside. */ 
    TabSpec signinTab = tabHost.newTabSpec("tid1");  
    TabSpec signupTab = tabHost.newTabSpec("tid2"); 
    TabSpec messageTab = tabHost.newTabSpec("tid3");

    /** TabSpec setIndicator() is used to set name for the tab. */ 
    /** TabSpec setContent() is used to set content for a particular tab. */ 
    signinTab.setIndicator("Sign In").setContent(new Intent(getApplicationContext(),SignIn.class));  
    signupTab.setIndicator("Sign Up").setContent(new Intent(getApplicationContext(),MainActivity.class));
    messageTab.setIndicator("Message").setContent(new Intent(getApplicationContext(),MessageDisplay.class));

    /** Add tabSpec to the TabHost to display. */ 
    tabHost.addTab(signinTab);  
    tabHost.addTab(signupTab); 
    tabHost.addTab(messageTab);//set Windows tab as default (zero based)

  // tabHost.setCurrentTab(2);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:58:56.740

Java 代码：

```
public class TabActivity extends android.app.TabActivity
{
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab);

      /** TabHost will have Tabs */ 
    TabHost tabHost = getTabHost();

    /** TabSpec used to create a new tab.  
     * By using TabSpec only we can able to setContent to the tab.  
     * By using TabSpec setIndicator() we can set name to tab. */

    /** tid1 is firstTabSpec Id. Its used to access outside. */ 
    TabSpec signinTab = tabHost.newTabSpec("tid1");  
    TabSpec signupTab = tabHost.newTabSpec("tid2"); 
    TabSpec messageTab = tabHost.newTabSpec("tid3");

    /** TabSpec setIndicator() is used to set name for the tab. */ 
    /** TabSpec setContent() is used to set content for a particular tab. */ 
    signinTab.setIndicator("Sign In").setContent(new Intent(getApplicationContext(),SignIn.class));  
    signupTab.setIndicator("Sign Up").setContent(new Intent(getApplicationContext(),MainActivity.class));
    messageTab.setIndicator("Message").setContent(new Intent(getApplicationContext(),MessageDisplay.class));

    /** Add tabSpec to the TabHost to display. */ 
    tabHost.addTab(signinTab);  
    tabHost.addTab(signupTab); 
    tabHost.addTab(messageTab);//set Windows tab as default (zero based)

  // tabHost.setCurrentTab(2);
}

} 
```

XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>

    </LinearLayout>
</TabHost> 
```

# css - IE <= 9 伪元素在容器悬停时继承容器样式

> ID：13027654
> 
> 赞同：0
> 
> 时间：2012-10-23T09:44:07.820
> 
> 标签：css, internet-explorer-9

有关该问题的工作示例，请参阅[此 jsfiddle](http://jsfiddle.net/m3mdc/2/)。
Opera 12、chrome 和 firefox 都按预期工作，而 IE9 及以下版本则在伪元素下划线。

我已经尝试过以下方法：

```
a:hover *,
a:before,
a:hover:before {
    text-decoration: none;
} 
```

但两个选择器都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:33:20.767

终于设法找到了一种（半体面的）处理 IE 的方法：

```
clip: rect(0px 300px 16px 0px); 
```

这隐藏了下划线，同时保留了其他所有内容 - 还更新了[jsfiddle](http://jsfiddle.net/Razor/m3mdc/6/)

# xml - 如何在目标 c 中使用 NSXML 解析器仅解析根部分

> ID：13027665
> 
> 赞同：2
> 
> 时间：2012-10-23T09:44:26.200
> 
> 标签：xml, xcode, parsing

我需要解析只有父部分，没有 xml 文件中的子子部分。你能给我一个如何做到这一点的例子吗？谢谢

# audio - 如何在 Lazarus/Free Pascal 中生成和播放程序声音（方波等）？

> ID：13027668
> 
> 赞同：3
> 
> 时间：2012-10-23T09:44:35.453
> 
> 标签：audio, freepascal, lazarus, procedural-generation

如何在 Lazarus/Free Pascal 中播放和合成自定义波形？该解决方案必须是实时友好的，因为它适用于游戏引擎。它也应该是多平台的，所以它可以在win32、Linux和Mac上使用。FMOD/BASS 已经过时（即使适用），因为如果我想在商业上使用它，我不想支付费用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T18:56:23.287

有解决方案。我最喜欢的库是 Steinberg 的 ASIO。这是一个非常简单的 API，它有 Linux、Windows、MAC 的包装器，我猜还有一些其他平台。它是用于低延迟录制/播放的专业 API。您通常需要支持它的声卡，但最近出现了一些驱动程序，使用本机平台 API 来模拟 ASIO 设备（例如 Windows 中的 ASIO4ALL）。

ASIO 有一个简单的功能，其中缓冲区被交换，您可以在其中生成波形，以便几乎立即播放（延迟以毫秒为单位）。那是为了实时性。

API 本身是免版税的，这意味着您可以在商业项目中使用它而无需支付任何费用。

至于 Pascal 绑定，我相信你必须自己做。但是 ASIO 的整个初始化和操作是 <100 行 C/C++ 代码（实际上你只需要控制声音合成和设备选择——只有两个需要由包装器导出的函数）所以真的不应该很难。

# html - CSS中的动态渐变

> ID：13027672
> 
> 赞同：1
> 
> 时间：2012-10-23T09:44:44.327
> 
> 标签：html, css

我想做一个动态渐变。我有一种颜色，我想生成 5 种颜色的渐变，如下所示。例如。

```
background-image: -webkit-linear-gradient(top, 
rgba(235, 82, 164, 1.00) 0% ,
rgba(244, 49, 153, 1.00) 18% ,
rgba(245, 0, 130, 1.00) 56% ,// this color i have 
rgba(196, 0, 104, 1.00) 84% ,
rgba(171, 0, 91, 1.00) 100% ); 
```

有什么办法可以得到其他4种与原色相似的颜色，以获得良好的效果。（颜色顺序从浅到深）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:49:52.907

此功能内置于大多数 CSS 框架中，例如[SASS](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#darken-instance_method)、[LESS](http://lesscss.org/#-color-functions)等。如果您想知道它是如何完成的，请查看您选择的语言的源代码。然而，它是在样式表的编译期间完成的，因此一旦编译完成，规则就会作为静态代码生成。

例如，这是来自 LESS 源代码：

```
[...]
lighten: function (color, amount) {
    var hsl = color.toHSL();

    hsl.l += amount.value / 100;
    hsl.l = clamp(hsl.l);
    return hsla(hsl);
},
darken: function (color, amount) {
    var hsl = color.toHSL();

    hsl.l -= amount.value / 100;
    hsl.l = clamp(hsl.l);
    return hsla(hsl);
}
[...]

function clamp(val) {
    return Math.min(1, Math.max(0, val));
}
[...]
toHSL: function () {
    var r = this.rgb[0] / 255,
        g = this.rgb[1] / 255,
        b = this.rgb[2] / 255,
        a = this.alpha;

    var max = Math.max(r, g, b), min = Math.min(r, g, b);
    var h, s, l = (max + min) / 2, d = max - min;

    if (max === min) {
        h = s = 0;
    } else {
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

        switch (max) {
            case r: h = (g - b) / d + (g < b ? 6 : 0); break;
            case g: h = (b - r) / d + 2;               break;
            case b: h = (r - g) / d + 4;               break;
        }
        h /= 6;
    }
    return { h: h * 360, s: s, l: l, a: a };
} 
```

# drupal-7 - Drupal webform 以编程方式创建复合组件

> ID：13027673
> 
> 赞同：1
> 
> 时间：2012-10-23T09:44:46.493
> 
> 标签：drupal-7, custom-component, composite-component, drupal-webform

我已经成功地为特定类型的数据创建了一个自定义 Web 表单组件。数据来自不同的部分，因此我需要创建其他但现有的组件类型，这些组件类型将成为我的自定义组件的子组件。基本上，我正在尝试以编程方式创建 Webform 组件的组合。

**我的问题是，代码全部成功执行 - 我创建了我的自定义组件，我收到反馈说我的子组件也已成功创建。但是，子组件没有出现在我的网络表单中。**

在创建自定义组件并将其插入数据库时​​，我正在尝试通过以下代码创建所有必要的子组件：

```
function my_module_webform_component_insert($component){
  if($component['type'] == 'my_component'){
    $node = node_load($component['nid']);

    $address_fields = array("my_sub_component1", "my_sub_component2");

    foreach ($address_fields as $key => $address_field) {
        //fetch next available component ID
        $next_id_query = db_select('webform_component')->condition('nid', $component['nid']);
        $next_id_query->addExpression('MAX(cid) + 1', 'cid');
        $next_cid = $next_id_query->execute()->fetchField();

        _create_sub_component($component['nid'], $address_field, $next_cid, $component['cid']);
    }

  }
} 
```

我的 _create_sub_component 函数定义如下：

```
function _create_sub_component($nid, $new_component, $cid, $pid){
    $node = node_load($nid);

    $processed_name  = str_replace(' ', '_', strtolower($new_component));
    // Create the webform components array. Not sure if we need all these
    // values, but let's be sure.
    $component = array(
      'cid' => (int)$cid,
      'pid' => 0,#(int)$pid,
      'nid' =>  (int)$node->nid,
      // I don't trust the admin to make a key based on input :)
      'form_key' => $processed_name,
      'name' => $new_component,
      // I want all lines to be numeric type component.
      'type' => 'textfield',
      'value' => '',
      'extra' => array(),
      'mandatory' => '0',
      'weight' => 0,
      'page_num' => 1,
    );

    array_push($node->webform['components'], $component);
    node_save($node);

    drupal_set_message("{$new_component} component successfully created in {$node->title}");
  } 
```

我的猜测是对 node_save 的调用导致了问题，但我不知道到底是怎么回事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:43:56.373

知道了！

代替：

```
array_push($node->webform['components'], $component);
node_save($node) 
```

和：

```
webform_component_insert($component); 
```

# java - 码头透明代理总是返回 403 禁止

> ID：13027679
> 
> 赞同：2
> 
> 时间：2012-10-23T09:44:55.217
> 
> 标签：java, maven, proxy, jetty, transparentproxy

我正在尝试使用码头提供的透明代理。

这是我的 web.xml

```
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="WebApp_9"
     version="2.4"
     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<display-name>Archetype Created Web Application</display-name>

<servlet>
    <servlet-name>googleProxy</servlet-name>
    <servlet-class>org.eclipse.jetty.servlets.ProxyServlet$Transparent</servlet-class>
    <init-param>
        <param-name>ProxyTo</param-name>
        <param-value>http://www.google.com</param-value>
    </init-param>
    <init-param>
        <param-name>Prefix</param-name>
        <param-value>/google</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>googleProxy</servlet-name>
    <url-pattern>/google/*</url-pattern>
</servlet-mapping> 
```

这是 pom.xml （我使用的是 maven）：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>JettyProxySample</groupId>
<artifactId>JettyProxySample</artifactId>
<packaging>war</packaging>
<version>1.0</version>
<name>JettyProxySample Maven Webapp</name>
<url>http://maven.apache.org</url>
<dependencies>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-servlets</artifactId>
        <version>7.0.0.M4</version>
    </dependency>
</dependencies>
<build>
    <finalName>JettyProxySample</finalName>
    <plugins>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>6.1.10</version>
            <configuration>
                <scanIntervalSeconds>10</scanIntervalSeconds>
                <stopKey>foo</stopKey>
                <stopPort>9999</stopPort>
            </configuration>
            <executions>
                <execution>
                    <id>start-jetty</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <scanIntervalSeconds>0</scanIntervalSeconds>
                        <daemon>true</daemon>
                    </configuration>
                </execution>
                <execution>
                    <id>stop-jetty</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>stop</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

我希望代理转发这样的请求：

```
http://localhost:8080/JettyProxySample/google/search?q=hello 
```

对此：

```
http://www.google.com/search?q=hello 
```

但是当我在浏览器中尝试该 url 时，我总是得到这个：

```
HTTP ERROR: 403

FORBIDDEN
RequestURI=/JettyProxySample/google/search

Powered by Jetty:// 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:47:22.850

只是在这里抛出一个答案，不要使用已有多年历史的里程碑版本。

*   jetty7 的 7.6.7.v20120910
*   jetty8 的 8.1.7.v20120910

我知道很多人在这两个版本中都成功地使用了代理 servlet，只是不是从最初从 codehaus 迁移到 eclipse 的东西……当时有大量的代码搅动，所以如果这不是我不会感到惊讶的t 为您正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T11:21:26.497

阅读源代码会有所帮助。:)

问题是，您没有将代理 servlet 设置在 Web 服务器的根目录，而是在应用程序内部，因此您的 Prefix 参数需要包含整个前缀，包括 Web 应用程序的上下文名称......

前缀/YOUR_WEB_APP_CONTEXT/google

[也可以看看](http://permalink.gmane.org/gmane.comp.java.jetty.support/14700)

# c# - 在 C# 中为表单创建保存按钮

> ID：13027681
> 
> 赞同：0
> 
> 时间：2012-10-23T09:44:57.823
> 
> 标签：c#, forms, save

我最近在 Visual Studio 中创建了一个数据库。我有两个表格，第一个表格显示一个表格。第二个窗体连接到第一个表并在设计视图中显示信息。

当用户在设计视图中更改数据时，如果他们单击保存，则在关闭第二个表单时，更改的信息会在原始表单上更新。

但是，如果他们关闭表单而不保存，则原始表单上的信息保持不变。

我想创建一个保存按钮，以清楚地向用户显示他们必须保存他们在设计视图中所做的任何更改。

以前有没有人创建过“保存”按钮？对于连接到另一个表单的表单，而不是文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:52:04.977

使用事件 FormClosing 怎么样？

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    if (MessageBox.Show("Do you want to save changes to your table?", "My Application", MessageBoxButtons.YesNo) == DialogResult.Yes)
    {
        e.Cancel = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:42:53.407

不确定我是否正确理解了您的问题，但我将这个小示例放在一起尝试复制您的问题。

这是主要形式：

![在此处输入图像描述](../Images/ca42410193bc07b693b9dced92343cce.png)

主窗体由一个数据网格视图（显示可能来自数据库的数据）和一个编辑按钮组成，该按钮用于打开第二个窗体，该窗体将用于编辑网格视图中所选项目的 DataValue。Form2（编辑表单）如下所示：

![在此处输入图像描述](../Images/610572da1cc0bba690edf98dbc5f5bfd.png)

如您所见，我在 Form2 上放置了一个保存按钮和一个取消按钮。我将 Form2 用作模式对话框表单（因此在 Form2 打开时无法更改测试表单）。这意味着我可以设置 Save 和 Cancel 按钮的 DialogResult 属性，并使用它们来通知 TestForm 要做什么。保存按钮设置为 ，`DialogResult = OK`取消按钮设置为`DialogResult = Cancel`。

我还向 From2 添加了一个特殊的公共属性，可用于获取和设置数据。在我的情况下，这只是一个简单的字符串，但在更高级的情况下，这将获取并设置一个特殊类型的对象，或者可能是表中的一个数据行。这是我的财产：

```
public string DataValue
{
    get { return textBox1.Text; }
    set { textBox1.Text = value; }
} 
```

现在，在 TestForm 上的编辑按钮后面，我有以下事件代码：

```
private void EditButton_Click(object sender, EventArgs e)
{
    if (dataGridView1.SelectedRows.Count != 1) { return; }

    string data = dataGridView1.SelectedRows[0].Cells[1].Value.ToString();

    // show the form as a modal dialog box while editing.
    Form2 editForm = new Form2();
    editForm.DataValue = data;

    if (editForm.ShowDialog() == DialogResult.OK)
    {
        // If the user clicks Save then we want to update the datagrid
        // (and eventually the database).
        dataGridView1.SelectedRows[0].Cells[1].Value = editForm.DataValue;
    }
} 
```

如果您需要 Form2 的非模态版本，那么您将无法在编辑按钮事件中完成所有这些操作。相反，您将不得不生成一个新的编辑表单并处理它的关闭事件。然后，您需要将更新网格视图的代码移动到此关闭事件中。每个生成的编辑表单都需要记住它正在编辑的数据行，以便关闭事件可以更新正确的行。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-03T19:54:45.833

所以如果你想保存它，你可以使用这个代码作为保存按钮

```
 // Displays a SaveFileDialog so the user can save the Image
        // assigned to Button2.
        SaveFileDialog saveFileDialog1 = new SaveFileDialog();
        saveFileDialog1.Filter = "html|*.html|lua file|*.lua|text 
document|*.txt|video|*.mp4|image|*.jpg";
        saveFileDialog1.Title = "save project";
        saveFileDialog1.ShowDialog();

        // If the file name is not an empty string open it for saving.
        if (saveFileDialog1.FileName != "")
        {

    // Saves the Image via a FileStream created by the OpenFile method.
            System.IO.FileStream fs =
                (System.IO.FileStream)saveFileDialog1.OpenFile();

 // Saves the Image in the appropriate ImageFormat based upon  the
            // File type selected in the dialog box.
            // NOTE that the FilterIndex property is one-based.
            switch (saveFileDialog1.FilterIndex)
            {
                case 1:
                    this.button2.Image.Save(fs,                       
//change button number to what your button number is
                      System.Drawing.Imaging.ImageFormat.Jpeg);
                    break;

                case 2:
                    this.button2.Image.Save(fs,
                      System.Drawing.Imaging.ImageFormat.Bmp);
                    break;

                case 3:
                    this.button2.Image.Save(fs,
                      System.Drawing.Imaging.ImageFormat.Gif);
                    break;
            }

            fs.Close(); 
```

# java - 正则表达式：匹配并替换字符串中的模式，同时将匹配字符串的一部分保留在替换的字符串中

> ID：13027687
> 
> 赞同：1
> 
> 时间：2012-10-23T09:45:29.337
> 
> 标签：java, javascript, regex

我有一个字符串

```
@jhon.p @[User:151|Jhon Carter] Jhon Carter @sunil.p @[User:102|Sunil Nadar] Sunil Nadar 
```

我想将 javascript 或 Java 中的正则表达式应用于上述字符串以获取输出为

```
@jhon.p <a href="#/users/151">Jhon Carter</a> @sunil.p <a href="#/users/102">Sunil Nadar</a> 
```

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:51:29.470

您可以使用此正则表达式进行匹配

```
@\[User:(\d+)\|(.*?)\]\s*\2 
```

然后您可以使用它来替换 $1 $2 引用组的位置。

```
<a href="#/users/$1">$2</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:59:33.370

这是将为您完成这项工作的 Java 代码：

```
String str =
 "@jhon.p @[User:151|Jhon Carter] Jhon Carter @sunil.p @[User:102|Sunil Nadar] Sunil Nadar";
Matcher m = Pattern.compile("@\\[User:(\\d+)\\|([^]]+)\\]\\s+\\2").matcher(str);
StringBuffer buf = new StringBuffer();
while (m.find()) {
   String link = "<a href=\"#/users/" + m.group(1) + "\">" + m.group(2) + "</a>";
   m.appendReplacement(buf, link);
}
m.appendTail(buf);
System.out.printf("Converted String is: %s%n", buf); 
```

**输出：**

```
Converted String is: @jhon.p <a href="#/users/151">Jhon Carter</a> @sunil.p <a href="#/users/102">Sunil Nadar</a> 
```

# javascript - 这个 jQuery Mobile 通用导航系统是如何工作的？

> ID：13027689
> 
> 赞同：2
> 
> 时间：2012-10-23T09:45:37.740
> 
> 标签：javascript, jquery, jquery-mobile

JQM 链接的大多数示例站点（如下所示）都使用通用导航系统，我将使用此站点作为示例：

[http://www.takemefishing.org/mobile/](http://www.takemefishing.org/mobile/)

当链接到另一个不在 DOM 中的页面时，他们使用 ajax 导航，例如，在主页上，他们链接到带有 href 的“Fish Species”

`#/mobile/fish-species`.

单击时，这实际上通过 ajax 将页面加载到 DOM 中，`/mobile/fish-species`其中仅包含`<div data-role="page" id="fish-species">... content here ...</div>`

然后地址栏更新为`/mobile/#/mobile/fish-species`.

如果你直接去`/mobile/#/mobile/fish-species`（例如通过使用刷新按钮或直接链接），它会加载带有所有 CSS、JS 等的主页，然后通过 ajax`/mobile/fish-species`无缝加载到 DOM 中。

这种结构/系统似乎是 JQM 网站上使用的常用方法，例如[Walt Disney](http://m.disneyworld.disney.go.com/)和[Standford University](http://m.stanford.edu/)。

我的问题是他们是如何让这种魔法发生的？我怀疑 JQM 几乎完成了所有的工作，只是缺少一些配置选项或标志。

* * *

## 这是我尝试过的

我有一个基本的 JQM 主页`/mobile/index.html`，其中包含 CSS `DOCTPYE`、`<head>`JS 等部分，以及指向另一个页面的链接`page2.html`：

```
<li><a href="#/mobile/page2.html">Page 2</a></li> 
```

第 2 页类似于“鱼类”页面，其中仅包含：

```
<div data-role="page" id="page2.html">... content here ...</div> 
```

现在，当我单击主页上的链接时，page2.html 会通过 ajax 加载到 DOM 中并显示出来。问题是地址栏显示：

> /mobile/page2.html

如果我然后单击浏览器刷新按钮，或直接导航到`/mobile/page2.html`，当然浏览器只会加载`page2.html`仅包含页面且不包含`<div>`head 部分或 CSS/JS 的内容。

我缺少什么让链接`#/mobile/page2.html`在加载时显示在地址栏中，然后如果刷新我想加载主页然后通过 ajax 拉 page2，就像示例网站一样？

我正在使用最新的 JQM`http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:17:52.013

Jquery Mobile 会将导航到地址解释`#address`为导航到`page`命名的`address`

这意味着您可以在单个`index.html`两个页面中定义，例如

```
<div data-role="page" id="index.html"><a href="#page2.html">link to JQM page2</a></div>
<div data-role="page" id="page2.html">... content here ...</div> 
```

单击第一页中的链接将加载第二页的内容，并相应地更新浏览器地址栏中显示的位置。这是标准的 JQM 方法，例如在您链接到的斯坦福网站中使用。Disney 和 Fish 网站看起来他们的做法略有不同，因为它们显然是通过绑定到`pagechange`事件、分析目标地址并采取相应措施来动态生成目标页面。[您可以在jquery mobile docs](http://jquerymobile.com/test/docs/pages/page-dynamic.html)中查看有关动态生成页面的更多详细信息。

# c - 奇怪的makefile构建错误

> ID：13027693
> 
> 赞同：0
> 
> 时间：2012-10-23T09:45:45.230
> 
> 标签：c, struct

我正在处理这个非常简单的代码部分，但不知何故，构建错误对我来说很奇怪。我在项目中有这些文件：`main.c`, `http_request.h`, `http_request.c`; 和一个简单的`Makefile`.

**1.http_request.h**

```
/* STRUCTURES */
struct http_param {
    char    key[MAX_BUFFER];
    char    *value;
};

struct http_request {
    int     size;
    struct  http_param  data[MAX_PARAM];
};

/* FUNCTIONS */
int parse_http_request(apr_pool_t *pool, const char *args, struct http_request *req); /* (A) */ 
```

**2.http_request.c**

```
#include <http_request.h>
...// something else goes here, it's fine

int 
parse_http_request(apr_pool_t *pool, const char *args, struct http_request *req) /* (B) */
{ 
```

**3\. 生成文件**

```
-I$(PROJECT_DIR)/include 
```

此目录包含`http_request.h`.

然后我构建，它引发了这个错误：

```
/project/src/http_request.c:14: warning: 'struct http_request' declared inside parameter list
/project/src/http_request.c:14: warning: its scope is only this definition or declaration, which is probably not what you want
/project/src/http_request.c: In function 'parse_http_request': 
```

错误指向`(A)`并且`(B)`正如我在上面的源代码中提到的那样。

任何人都可以帮助找出问题所在吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:48:56.303

我怀疑，看到您使用 apr_pool_t，您的包含路径中也包含 apache。apache 还提供了一个名为 http_request.h 的文件，其中包含一个文件而不是您拥有的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:48:51.933

采用

```
#include "http_request.h" 
```

代替

```
#include <http_request.h> 
```

# ruby - 使用 pry 调试 Homebrew 脚本

> ID：13027694
> 
> 赞同：1
> 
> 时间：2012-10-23T09:45:48.473
> 
> 标签：ruby, homebrew, pry

`gem list`显示：

```
*** LOCAL GEMS ***

bundler (1.1.5)
coderay (1.0.8)
method_source (0.8.1)
pry (0.9.10)
slop (3.3.3) 
```

然而，似乎如果我进入任何 Homebrew 文件，并执行以下操作：

```
require 'pry' 
```

我得到：

```
Error: no such file to load -- pry
Please report this bug:
    https://github.com/mxcl/homebrew/wiki/troubleshooting
/usr/local/Library/Homebrew/formula_installer.rb:2:in `require'
/usr/local/Library/Homebrew/formula_installer.rb:2
/usr/local/Library/Homebrew/cmd/install.rb:1:in `require'
/usr/local/Library/Homebrew/cmd/install.rb:1
/usr/local/bin/brew:51:in `require'
/usr/local/bin/brew:51:in `require?'
/usr/local/bin/brew:93 
```

即使我尝试使用硬编码路径，我也会得到：

```
Error: no such file to load -- /Users/patrick/.rvm/gems/ruby-1.9.3-p194@global/bin/pry 
```

即使它肯定存在...

```
patrick@vincent:/usr/local/Library/Homebrew(master)>ls -l /Users/patrick/.rvm/gems/ruby-1.9.3-p194@global/bin/pry
-rwxr-xr-x  1 patrick  staff  480 Oct 23 02:32 /Users/patrick/.rvm/gems/ruby-1.9.3-p194@global/bin/pry 
```

我可以进去`irb`做`require 'pry'`，它工作得很好。这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:49:38.460

啊哈..我需要'rubygems'

# wpf - 动画后调整停靠面板的大小，VB

> ID：13027698
> 
> 赞同：0
> 
> 时间：2012-10-23T09:45:56.993
> 
> 标签：wpf

我像这样调整停靠面板的大小：

```
Private WithEvents PanelAnimation As New DoubleAnimation
Private WithEvents PanelSB As New Storyboard

With PanelAnimation
        .From = WpfDockPanel.ActualHeight
        .To = s
        .Duration = New Duration(TimeSpan.FromSeconds(0.5))
        .AccelerationRatio = 0.5
        .DecelerationRatio = 0.5
End With
PanelSB.Children.Add(PanelAnimation)
Storyboard.SetTarget(PanelAnimation, WpfDockPanel)
Storyboard.SetTargetProperty(PanelAnimation, New PropertyPath(DockPanel.HeightProperty))
PanelSB.Begin(AviMainWindow) 
```

..效果很好。然后，我想手动设置大小，但它不会改变，如果我停止代码并输入不同的大小，大小不会改变，就好像它是只读的一样。

但是如果我改变一次大小，而不是通过动画，只是通过设置大小，我可以再次改变它没有问题。为什么我不能在动画后手动设置高度？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:51:52.247

这是因为动画的[FillBehavior](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.fillbehavior.aspx)默认设置为`HoldEnd`。您可以将其设置为`Stop`.

但是，您还必须`Height`在开始动画之前手动将动画目标的属性设置为所需的结束值。否则它将翻转回动画开始之前的值。

```
With PanelAnimation
        .FillBehavior = FillBehavior.Stop
        ...

...
WpfDockPanel.Height = s
PanelSB.Begin(AviMainWindow) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:54:03.593

可能您需要删除动画应用的值。就像是

```
WpfDockPanel.BeginAnimation(DockPanel.HeightProperty, null) 
```

应该做的伎俩。

# c# - 比较 2 FileAttributes 必须始终在 C# 中返回 true

> ID：13027700
> 
> 赞同：1
> 
> 时间：2012-10-23T09:46:01.007
> 
> 标签：c#, file

我最近在 stackoverflow 上得到了一些很大的帮助。其中一个答案让我有些困惑，由于评论框的限制，我觉得不适合得到解释。

请查看下面的代码。

```
if ((File.GetAttributes(fileName) & FileAttributes.Archive) == FileAttributes.Archive)
{
    // Archive file.
} 
```

我的问题是你为什么要在 & 之后包含逻辑（见粗体）
(File.GetAttributes(fileName) **& FileAttributes.Archive** ) == 等

FileAttributes.Archive == FileAttributes.Archive 肯定会一直匹配吗？

有没有人对此有解释（IMO这可能是一个错字/错误，但我之前假设了太多事情，以后才会更正！）

第二个问题是波浪号`~`在这段代码中的作用：

```
File.SetAttributes(fileName, File.GetAttributes(fileName) & ~FileAttributes.Archive); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T11:34:00.397

一些枚举是标志。也就是说，它可以具有枚举成员的任意组合并且仍然有效。

在`FileAttributes`枚举的情况下，一个文件可以`ReadOnly`同时`Hidden`存在。同样，文件可以是`Hidden`,`ReadOnly`和`System`. 为每个组合编写一个枚举成员将给出 16 个不同的成员！非常低效。

使用标志类型枚举时，检查值是否包含指定枚举成员的方法是以按位（二进制）方式将其与自身进行比较。

给定以下`FileAttributes`枚举的简化定义：

```
[Serializable, Flags]
public enum FileAttributes
{
    Archive = 32,
    Hidden = 2,
    Normal = 128,
    ReadOnly = 1,
    System = 4,
    Temporary = 256
} 
```

`System`也被标记的文件`ReadOnly`将具有值`5`( `4 + 1`)。`ReadOnly`尝试使用代码确定文件是否是

```
File.GetAttributes(fileName) == FileAttributes.System 
```

将这样评估：

```
5 == 4 
```

结果将是**`False`**。

确定文件是否具有`System`属性集的最佳方法是对文件的属性和要确定其存在的属性进行二进制 AND 运算。在代码中，你会这样写：

```
(File.GetAttributes(fileName) & FileAttributes.System) == FileAttributes.System 
```

`System`在进行比较之前，这会剥离除属性之外的所有其他属性。从数学上讲，它会这样评估：

```
    0101（系统+隐藏）
AND 0100（系统）
------ -----
    0100（系统）

```

然后将结果 ( `0100`) 与系统属性 ( `0100`) 进行比较，结果将是**`True`**。

一方面，代码的`(0x0101 & 0x0100) == 0x0100`计算结果为**`True`**.

从 .NET 4.0 开始，Microsoft 已包含[`Enum.HasFlag`](http://msdn.microsoft.com/en-us/library/system.enum.hasflag.aspx)确定枚举值中是否存在标志的方法。因此，您不必自己键入所有代码。在处理具有该`Flags`属性的 Enum 类型时，您可以简单地使用该`HasFlag`方法来检查是否存在特定标志。因此，您的行将被写为

```
File.GetAttributes(fileName).HasFlag(FileAttributes.System) 
```

* * *

波浪号 ( `~`) 标记在用于数值（或任何可以“退化”为`int`、或的类型）时`uint`，具有翻转数字位的效果，产生数字的补码（除指定的）。`long``ulong`

例如，给定 16 位数字 4 ( `0x0100`)，它的补码 ( `~4`) 将是 11 ( `0x1011`)

```
0100 -> 1011
```

`XOR`波浪号与对被比较类型的最大值执行相同的效果。对于 16 位数字，最大值为 15 ( `1111`)，因此您的波浪号将计算为：

```
    0100
异或 1111
--------
    1011

```

因此，您的代码中的效果`File.SetAttributes(fileName, File.GetAttributes(fileName) & ~FileAttributes.Archive)`将获取文件的属性，***删除***该`Archive`属性，然后将其设置回文件。

假设文件的属性是 Archive + Hidden，它的值为 34 ( `0x00100010`)，`~Archive`值为`0x11011111`.
评估将是这样的

```
    （存档+隐藏）0x00100010
AND (~存档) 0x11011111
---------- ----------
                隐藏 0x00000010

```

该文件的属性随后将更改为仅隐藏（存档属性将被删除）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T09:50:38.240

问题是[`FileAttributes`](http://msdn.microsoft.com/en-us/library/system.io.fileattributes.aspx)具有[`Flags`](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)属性。表示所有值都可以组合（例如存档和隐藏）。

要确定是否真的设置了特定值，您必须屏蔽所有其他值。为此，该类中的[`HasFlag`](http://msdn.microsoft.com/en-us/library/system.enum.hasflag.aspx)方法也[`Enum`](http://msdn.microsoft.com/en-us/library/1zt1ybx4.aspx)存在，可以在您的示例中使用如下：

```
if(File.GetAttributes(fileName).HasFlag(FileAttributes.Archive))
{
    // Archive file.
} 
```

第二个示例确实从位掩码中删除了一个精确值。因此，它删除了归档属性而不触及掩码中的所有其他位（例如只读或隐藏）。对于此任务，枚举类中不存在任何方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T09:54:44.360

File.GetAttributes 方法返回一个枚举，该枚举具有一个 Flags 属性，该属性允许其成员值的按位组合。换句话说，所有相关属性的所有位值都组合在一个整数对象中。'&' 或按位与运算符允许您提取对象的相关位。与原始属性的比较是为了清楚起见，简单地寻找非零值在逻辑上同样正确。

[http://msdn.microsoft.com/en-us/library/system.io.fileattributes.aspx](http://msdn.microsoft.com/en-us/library/system.io.fileattributes.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T09:51:16.337

这是一个所谓的蒙面比较。

```
(File.GetAttributes(fileName) & FileAttributes.Archive)
    return FileAttributes.Archive 
```

如果属性中有 FileAttributes.Archive 并在任何其他情况下返回 false。

### 例子：

如果文件属性具有值：

```
hidden  archive readonly 
   1       1       0 
```

按位和`(File.GetAttributes(fileName) & FileAttributes.Archive)`

返回

```
hidden  archive readonly 
   0       1       0 
```

它是平等的`FileAttributes.Archive`。

如果文件属性具有值：

```
hidden  archive readonly 
   1       0       1 
```

按位和`(File.GetAttributes(fileName) & FileAttributes.Archive)`

返回

```
hidden  archive readonly 
   0       0       0 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T09:57:14.900

'~' 运算符是按位 NOT（补码）。请参见[按位补码运算符](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/bitwise-complement-operator)

# api - OpenTok - 如何手动取消订阅？

> ID：13027704
> 
> 赞同：2
> 
> 时间：2012-10-23T09:46:22.647
> 
> 标签：api, opentok, videochat, tokbox, video-conferencing

我之前问过一个相关的问题

[OpenTok - 如何手动发布/取消发布？](https://stackoverflow.com/questions/13008078/opentok-how-to-publish-unpublish-manually)

现在我正在努力手动取消订阅。

[http://www.tokbox.com/opentok/api/tools/js/documentation/api/Session.html#unsubscribe](http://www.tokbox.com/opentok/api/tools/js/documentation/api/Session.html#unsubscribe)

我已经按照代码进行了操作，但我仍然可以看到视频。它应该删除视频对吗？

编辑：我在取消订阅部分的示例代码中发现了一个错误。unsubscribe() 接受订阅者对象，但代码传递一个流对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-18T23:55:37.870

如果其他人有一些错误，这里有一些示例代码片段：
`var subscriber;`

创建订阅者后：
`subscriber = session.subscribe( streamObject );`

退订：
`session.unsubscribe(subscriber);`

# android - AdMob 请求失败

> ID：13027706
> 
> 赞同：0
> 
> 时间：2012-10-23T09:46:27.133
> 
> 标签：android, admob, ads

我正在运行一个带有 AdMob 广告的应用。它工作得很好，但有时服务器无法投放广告，所以我考虑投放我自己的广告（从我自己的服务器提供的纯图像）。有没有办法为 AdRequest 设置回调，所以如果请求失败，回调会被调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:14:16.167

您正在寻找 AdMob 的[AdListener](https://developers.google.com/mobile-ads-sdk/docs/admob/intermediate#adlistener)：

```
public interface AdListener {
  public void onReceiveAd(Ad ad);
  public void onFailedToReceiveAd(Ad ad, AdRequest.ErrorCode error);
  public void onPresentScreen(Ad ad);
  public void onDismissScreen(Ad ad);
  public void onLeaveApplication(Ad ad);
} 
```

具体来说，`onFailedToReceiveAd`回调会告诉您 AdMob 何时无法返回广告。让您的类实现此接口以获取所有这些回调。只是不要忘记设置`AdListener`你的`AdView`：

```
adView.setAdListener(this); 
```

# jsf - primefaces 订单列表未随更改的订单更新

> ID：13027707
> 
> 赞同：4
> 
> 时间：2012-10-23T09:46:27.787
> 
> 标签：jsf, primefaces

我有一个primefaces `p:orderList`，单击按钮会显示在弹出窗口中。当我更改订单列表中项目的顺序并单击弹出窗口上的**保存订单**按钮时​​，我没有看到更改顺序的列表。PFB 我的代码 -

```
<p:commandButton ajax="true" id="toolOrderButton" value="Tool Order" onclick="toolOrderPopup.show()" type="button"/>
<p:dialog header="Tool Order" severity="alert" widgetVar="toolOrderPopup"
                        appendToBody="true">  
    <p:orderList id="toolOrderList" controlsLocation="right" value="#{toolBean.toolOrderList}" var="tool" itemLabel="#{tool}" itemValue="#{tool}" iconOnly="true"/>
    <p:commandButton ajax="true"  value="Save Order" process="@this" type="submit" actionListener="#{toolBean.setToolOrder}" oncomplete="toolOrderPopup.hide()"/>
    <p:commandButton value="Cancel" onclick="toolOrderPopup.hide()" type="button"/>   
</p:dialog> 
```

在豆子里：

```
public void setToolOrder(){ 
    System.out.println("toolOrderList-" + BeanStringConverter.convertToString(toolOrderList));
} 
```

请让我知道代码可能有什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T11:06:34.957

您需要处理`p:orderlist`以`orderList`保存模型：

```
<p:commandButton ajax="true" value="Save Order" 
                 process="@this toolOrderList"
                 actionListener="#{toolBean.setToolOrder}"
                 oncomplete="toolOrderPopup.hide()"/> 
```

与您的问题无关，您可能有以下内容：

```
<h:form>
    ...
    <p:commandButton ajax="true" id="toolOrderButton" value="Tool Order" onclick="toolOrderPopup.show()" type="button"/>
    ...
    <p:dialog header="Tool Order" severity="alert" widgetVar="toolOrderPopup"
                    appendToBody="true">  
        <p:orderList id="toolOrderList" controlsLocation="right" value="#{toolBean.toolOrderList}" var="tool" itemLabel="#{tool}" itemValue="#{tool}" iconOnly="true"/>
        <p:commandButton ajax="true" value="Save Order" 
                         process="@this" 
                         actionListener="#{toolBean.setToolOrder}" 
                         oncomplete="toolOrderPopup.hide()"/>
        <p:commandButton value="Cancel" 
                         onclick="toolOrderPopup.hide()" type="button"/>   
    </p:dialog>
</h:form> 
```

如果是这样，那么看看 primefaces doc 是怎么说的`appentToBody`：

> 小心使用 appendToBody，因为页面定义和 html dom 会有所不同，例如，如果对话框位于 h:form 组件内并且启用了 appendToBody，则浏览器上的对话框将超出表单并可能导致意外结果。在这种情况下，在对话框中嵌套一个表单。

另一种结构可能如下：

```
 <h:form id="first">
        ...
        <p:commandButton ajax="true" id="toolOrderButton" value="Tool Order" onclick="toolOrderPopup.show()" type="button"/>
        ...
    </h:form>
    <p:dialog header="Tool Order" severity="alert" widgetVar="toolOrderPopup"
                    appendToBody="true">
        <h:form id="second">
            <p:orderList id="toolOrderList" controlsLocation="right" value="#{toolBean.toolOrderList}" var="tool" itemLabel="#{tool}" itemValue="#{tool}" iconOnly="true"/>
            <p:commandButton ajax="true"  value="Save Order"
                             process="@this toolOrderList" 
                             actionListener="#{toolBean.setToolOrder}" oncomplete="toolOrderPopup.hide()"/>
            <p:commandButton value="Cancel" onclick="toolOrderPopup.hide()" type="button"/>
        </h:form> 
    </p:dialog>
</h:form> 
```

# sql - IN子句中的SQL多列

> ID：13027708
> 
> 赞同：42
> 
> 时间：2012-10-23T09:46:28.873
> 
> 标签：sql, oracle

如果我们需要根据给定列的某些值集查询表，我们可以简单地使用 IN 子句。

但是如果需要基于多个列进行查询，我们不能使用IN子句（在SO线程中grepped。）

从其他 SO 线程，我们可以使用连接或存在子句等来规避这个问题。但是如果主表和搜索数据都在数据库中，它们都可以工作。

```
E.g
User table:
firstName, lastName, City 
```

给定 (firstname, lastName) 元组的列表，我需要获取城市。

我可以想到以下解决方案。

# 1

构造一个选择查询，例如，

```
SELECT city from user where (firstName=x and lastName=y) or (firstName=a and lastName=b) or ..... 
```

# 2

将所有 firstName、lastName 值上传到临时表中，并在“用户”表和新临时表之间执行连接。

有没有解决这个问题的选项，一般来说解决这个问题的首选是什么？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-10-23T09:49:36.287

你可以这样做：

```
SELECT city FROM user WHERE (firstName, lastName) IN (('a', 'b'), ('c', 'd')); 
```

***[sqlfiddle](http://sqlfiddle.com/#!2/72132/4/0)***。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T09:58:27.160

将数据加载到数据库中通常会更容易，即使它只是为了运行快速查询。硬编码的数据似乎可以很快输入，但如果您开始不得不进行更改，它很快就会变得很痛苦。

但是，如果您想将名称直接编码到查询中，这是一种更简洁的方法：

```
with names (fname,lname) as (
    values
        ('John','Smith'),
        ('Mary','Jones')
)
select city from user
    inner join names on
        fname=firstName and
        lname=lastName; 
```

这样做的好处是它可以将您的数据从查询中分离出来。

（这是 DB2 语法；可能需要对您的系统进行一些调整）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-10T07:23:19.990

一般来说，您可以像这样轻松编写 Where-Condition：

```
select * from tab1
where (col1, col2) in (select col1, col2 from tab2) 
```

**注意**
Oracle 会忽略一个或多个选定列为 NULL 的行。在这些情况下，您可能希望使用[NVL](https://docs.oracle.com/cd/B19306_01/server.102/b14200/functions105.htm) -Funktion 将 NULL 映射到特殊值（不应在值中）：

```
select * from tab1
where (col1, NVL(col2, '---') in (select col1, NVL(col2, '---') from tab2) 
```

[甲骨文](/questions/tagged/oracle "显示标记为“oracle”的问题") [_](/questions/tagged/sql "显示标记为“sql”的问题")

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-19T20:15:46.640

在 Oracle 中，您可以这样做：

```
SELECT * FROM table1 WHERE (col_a,col_b) IN (SELECT col_x,col_y FROM table2) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-23T09:51:26.633

确保您在 firstname 和 lastname 列上有一个索引并使用 1。这实际上根本不会对性能产生太大影响。

**编辑：**在@Dems 关于向计划缓存发送垃圾邮件的评论之后，更好的解决方案可能是在现有表（或单独的视图）上创建一个计算列，其中包含连接的 Firstname + Lastname 值，从而允许您执行查询，例如

```
SELECT City 
FROM User 
WHERE Fullname in (@fullnames) 
```

看起来`@fullnames`有点像`"'JonDoe', 'JaneDoe'"`等

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T09:54:58.733

确定每个查询的名称列表是否不同或重复使用。如果被重用，它就属于数据库。

即使它对于每个查询都是唯一的，`#table`出于性能原因将其加载到临时表（语法）可能很有用 - 在这种情况下，您将能够避免重新编译复杂的查询。

如果名称的最大数量是固定的，则应使用参数化查询。

但是，如果上述情况均不适用，我将按照您的方法＃1 那样内联查询中的名称。

# python - 使用 *args 变量在函数中传递多个变量

> ID：13027711
> 
> 赞同：1
> 
> 时间：2012-10-23T09:46:34.800
> 
> 标签：python, function, args

我是 python 新手。请看这个脚本：

```
def myfunc(*args):  
    print len(args)
    if args == 3:
        for arg in args:
            print arg
    else:
        print "exit"
a, b, c = 1, 2, 3
myfunc(a, b, c) 
```

如您所见，传递给函数的参数数量是三个。现在条件`args==3`是`True`，但该`else`部分已执行。另一方面，如果`if`条件为假，则执行并`else`跳过该部分代码。

你能解释为什么该`if`语句是在 False 条件下执行的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:49:04.447

不*，*`args == 3`不是 。你可能的意思是。 *`True``len(args) == 3`*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T09:48:59.910

我认为您必须这样做`len(args)==3`而不是`args==3`：

```
if len(args)==3: 
```

条件`args==3`永远不会为真，因为它`args`成为函数内部的元组。

所以即使你通过了`myfunc(3)`，那么你也将匹配`(3,)==3`，即`False`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:02:49.910

You have to apply `len(args) == 3` instead of `args == 3` because if you use `args` then it is a list of tupple and if you check against it must go to `else` condition.

```
def myfunc(*args):

    if len(args) == 3:
        for arg in args:
            print arg
    else:
        print "exit"
a, b, c = 1, 2, 3
myfunc(a, b, c) 
```

This code give you an expected result.*

# twitter-bootstrap - twitter bootstrap btn-nav 总是显示

> ID：13027722
> 
> 赞同：0
> 
> 时间：2012-10-23T09:47:17.070
> 
> 标签：twitter-bootstrap

任何人都知道为什么 btn-nav 应该只在屏幕缩小时才显示在我的页面中。这是代码：

```
<div class="nav navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="brand" href="./index.html">Bootstrap</a>
      <div class="nav-collapse collapse">
         <jdoc:include type="modules" name="position-1" style="none" />
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T06:32:38.040

转到“扩展”->“模块管理器”。找到您的模块并进行编辑。在选项卡“选项”->“高级参数”中清除输入“菜单类后缀”和“模块类后缀”。单击“保存”并享受它。

# php - 如何在wordpress中将条件类分配给ul

> ID：13027731
> 
> 赞同：0
> 
> 时间：2012-10-23T09:47:39.770
> 
> 标签：php, html, wordpress

我已经在 single.php 文件中的 wordpress 中尝试了以下代码

```
 <?php echo $counter = $loop->post_count;?>
  <?php if($counter > 4){ ?>      
 <ul id="mycarousel" class="jcarousel-skin-tango">
 <?php } ?>
 <?php else { ?>
 <ul class="grid_12 relatedpost">
 <?php } ?>
  <?php while ( $loop->have_posts() ) : $loop->the_post(); ?>
<li><a href="<?php echo get_permalink()?>"><?php echo the_post_thumbnail();?></a></li>
  <?php endwhile; ?>
  </ul> 
```

这行不通。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:55:01.173

您的代码对我来说看起来不错，但对于它的价值，我会推荐这样的东西：

```
$classes = array('grid_12', 'relatedpost');

if ($loop->post_count > 4) {

    $classes[] = 'jcarousel-skin-tango';

}

printf('<ul id="mycarousel" class="%s">', implode(" ", $classes)); 
```

# c# - 从 Google Analytics API 获取数据

> ID：13027732
> 
> 赞同：2
> 
> 时间：2012-10-23T09:47:40.367
> 
> 标签：c#, google-analytics, google-api

我需要从**GoogleAnalytics** API获取以下数据

1.  新的、返回的、访问的、自然的、付费的、社交的、推荐的、直接的等
2.  跳出率，每次访问的页面，每次访问的时间。

我以前从未在 GoogleAnalytics 上工作过。请原谅我这是一个基本或广泛的问题。

**编辑：**我找到了一个`GAnalyticsAPI`我正在使用的类及其工作

```
 string authToken    = GAnalyticsAPI.GetAuthorizationToken("my_email_id", "my_password");
            string metrics = Server.UrlDecode("ga:visits");
            string dimensions   = Server.UrlDecode("ga:country");
            string filters = Server.UrlDecode("-ga:visits");

            XmlDocument xmld = GAnalyticsAPI.GetDataFeed(.........);
           return xmld; 
```

*但是任何人都可以解释（提供详细文档）关于查询结构的信息`metrics ,dimensions,filters etc`，以便我可以查询我需要的数据。谢谢*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:36:25.460

阅读文档。它会告诉您什么是有效的维度和指标组合。 [维度和指标参考](https://developers.google.com/analytics/devguides/reporting/core/dimsmets)

此外，[Google Analytics 查询资源管理器](http://ga-dev-tools.appspot.com/explorer/)在尝试维度和指标以找到您需要的组合时非常有用。

# c# - 用于验证数字和字符的正则表达式

> ID：13027738
> 
> 赞同：1
> 
> 时间：2012-10-23T09:47:48.477
> 
> 标签：c#, regex

我需要验证一个字符串，该字符串包含一个数字（数字不能为 0 或开头为零）或数字后跟 az 或 AZ 范围内的单个字符。所以，这些都是有效的

```
2, 12, 1, 324534A, 2Y, 934d 
```

但这些都是无效的

```
000R, 0, 0D, D3, 23432dddd, 234Q343. 
```

有人可以告诉我正确的正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:49:48.847

这应该匹配。

```
^[1-9]\d*[a-zA-Z]?$ 
```

分解：

```
^           - Match start of string
[1-9]       - Followed by one digit (1-9), no 0
\d*         - Followed by any number of digits (can contain digits from 
              other cultures). If you want to constain use [0-9] instead of \d
[a-zA-Z]?   - Followed by either one character or none
$           - Followed by end of string 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T09:50:56.617

`^[1-9]\d*[a-zA-Z]?$`应该这样做。

*   `[1-9]`- 一位数字 1-9
*   `\d*`- 可能是几个数字 0-9
*   `[a-zA-Z]?`- 可选的小写/大写字符（可能不包括重音等）
*   `^...$`- 只会匹配整个字符串，而不是子字符串。

# jquery - 使用 jquery 添加和删除类时的奇怪行为

> ID：13027739
> 
> 赞同：1
> 
> 时间：2012-10-23T09:47:52.187
> 
> 标签：jquery, css, css-animations

我有一组预定义的 css 类，使用它们我可以为 div 设置动画。场景是我正在尝试使用“幻灯片效果”为 div 设置动画。只需在 div 中添加 'slide in' 类，就会使 div 滑入。但是第二次这样做时问题就来了。第二次，div 已经有了“滑入”类，所以我要删除“滑入”类，然后再次添加相同的类来制作动画。但是动画没有发生，但是当我在删除“滑入”类之后添加“滑入”类之前添加 10ms 延迟时，动画就会发生。

**演示，仅在 webkit 浏览器中运行良好**

演示一，（不加延时，第二次动画不生效）

[Demo1](http://jsbin.com/eyerot/2/edit)尝试两次滑入按钮。

演示二，（添加延时，动画作品）

[Demo2](http://jsbin.com/ehuvor/1/edit)尝试两次滑入按钮。

我想知道，如何在不依赖时间延迟的情况下做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:23:37.300

对于演示 1 - 用这个替换你的幻灯片功能：

```
function slide(){
  $('#tg').addClass('slide in');
 var t= setTimeout(function(){$('#tg').removeClass('slide in');},600);
} 
```

动画完成后我删除了这个类。演示：http: [//jsbin.com/eyerot/12/edit](http://jsbin.com/eyerot/12/edit)

对于自动滚动：将您的 js 替换为：

```
function slide(){
  interval = setInterval(function(){slide_me();},2000);
}

function slide_me(){
  $('#tg').addClass('slide in');
    t= setTimeout(function(){$('#tg').removeClass('slide in');},600);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:34:08.233

最好的办法是将动画元素绑定到`animationend`CSS 动画完成时触发的回调。

以下是我将如何重写您的 JS：

```
// Bind your element to animationend callbacks from all supporting browsers
$('#tg').bind('webkitAnimationEnd mozAnimationEnd msAnimationEnd oAnimationEnd animationEnd', function(event){
  // Each time this callback is called the "slide in" classes are removed.
  $('#tg').removeClass('slide in');
});

// Each time the button is clicked the classes are re-added
function slide() {
  $('#tg').addClass('slide in');
} 
```

# php - Mysql检查WHERE字段IN（multiple_values）

> ID：13027740
> 
> 赞同：1
> 
> 时间：2012-10-23T09:47:53.597
> 
> 标签：php, mysql

大家早上好，

我正在尝试使用一个聪明的 MySql 单行代码来为我做这件事，而不是使用更多的 PHP 代码或多个 sql 行......所以就这样。

我有一个老式的 mysql（我将很快转换为 PDO*），它是这样的：

```
$query_list_releases = "SELECT * from mya_projects WHERE shared_to IN ('".$_id."') ORDER by deadline ASC"; 
```

但**shared_to**字段格式类似于 1,3,15,16 或 1,4,6（id 用逗号分隔）。如果**shared_to**只是一个数字，它可以工作，因为它会搜索 shared_to == 到我的 $_id 的行。但是当 shared_to 超过 1 个数字时，棘手的部分就出现了，所有数字都用逗号分隔。

我需要选择我在 shared_to 列中找到“1”的所有行。

有人知道我应该如何进行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T09:50:02.123

在 mysql 中使用**[FIND_IN_SET()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)**

```
SELECT * from mya_projects
WHERE FIND_IN_SET( id, shared_to)
ORDER by deadline ASC 
```

# iphone - XCode 下的 Cordova 2.1.0：未找到 Cordova/CDVViewController.h 文件

> ID：13027742
> 
> 赞同：0
> 
> 时间：2012-10-23T09:47:56.367
> 
> 标签：iphone, xcode, cordova, ipad

我收到了上述错误。

目前，我尝试通过 Andrew Lunny 之书 - 初学者指南来学习 Phonegap。他通过示例和小应用程序来描述一切。在前 3 章中，一切正常，但现在我收到这个错误，在我创建一个新项目后！

谁能告诉我，此时该怎么办？我搜索此错误，但没有任何成功。

我尝试将 Cordova 更新到版本 2.1.0，但我仍然有同样的错误..

我使用 xCode 4.4 和 Phonegap 2.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:02:52.040

问题是缺少 CordovaLib.xcodeproj！我将它从保存 CordovaLib.xcodeproj 的资源管理器 (Users/{your username}/Documents/PhoneGap/CordovaLib/) 拖放到 xcode 包资源管理器！

# java - 视图可以在 Java 的 MVC 结构中调用模型吗？

> ID：13027746
> 
> 赞同：0
> 
> 时间：2012-10-23T09:48:11.237
> 
> 标签：java, model-view-controller, view, model, controller

我正在用 Java 制作一个基本的 MVC 结构，我想知道是否允许视图调用模型以获取信息？

例如：用户单击在视图中创建的按钮。视图调用控制器，控制器有一个处理程序，告诉他下一步该做什么。然后控制器调用模型中的一个方法，并发送一个值。同时Controller调用View中的“UpdateLabel”方法。现在允许从View中的“UpdateLabel”方法调用Model中的方法，这样View就可以使用Model中存储的值了吗？

提前感谢您阅读并回答我的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:52:18.960

> 视图可以在 Java 的 MVC 结构中调用模型吗？

可以，但不应该。如果是这样，它将不再是 MVC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:52:36.660

是的，视图应该使用模型的 getter，而不是其他的。

该模型应该以非紧密耦合的方式传递，就像您使用观察者模式实现的那样。基本上，观察者模式的侦听器参数应该包含您的模型，或者包含您的模型的事件类。当然，这些只是指导方针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:50:31.187

视图是否可以调用模型：可以。视图调用模型是否真的是您的问题应该是*:-)*

我倾向于采取务实的方法并允许视图代码显示/隐藏/滚动/滑动模型的任何已知部分，但我在实际操作模型时设置了限制 - 留给控制器......

我相信你会得到其他的看法，而且很可能他们中的大多数人会比我更严格。

干杯，

# c# - 将图像上传到 Google 云端硬盘中创建的文件夹

> ID：13027747
> 
> 赞同：0
> 
> 时间：2012-10-23T09:48:11.717
> 
> 标签：c#

我在 C# .Net 中工作，我希望能够将图像上传到 Google Drive 中创建的文件夹。请看下面的代码。使用此代码，我可以分别制作文件夹并上传图像，但我想编写代码以在创建的文件夹中上传图像

```
Google.Apis.Drive.v2.Data.File body = new Google.Apis.Drive.v2.Data.File();
body.Title = "My first folder";
body.Description = "document description";
body.MimeType = "application/vnd.google-apps.folder";

// service is an authorized Drive API service instance
Google.Apis.Drive.v2.Data.File file = service.Files.Insert(body).Fetch();

Google.Apis.Drive.v2.Data.File body1 = new Google.Apis.Drive.v2.Data.File();
body1.Title = "My first folder";
body1.MimeType = "image/jpeg";

//------------------------------------------

byte[] byteArray = System.IO.File.ReadAllBytes("Bluehills.jpg");
System.IO.MemoryStream stream = new System.IO.MemoryStream(byteArray);

FilesResource.InsertMediaUpload request = service.Files.Insert(body, stream, "image/jpeg");
request.Upload();

Google.Apis.Drive.v2.Data.File file1 = request.ResponseBody;
Console.WriteLine("File id: " + file1.Id);
Console.WriteLine("Press Enter to end this process.");
Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:59:45.270

> 要在特定文件夹中插入文件，请在文件的 parents 属性中指定正确的 ID

[https://developers.google.com/drive/folder](https://developers.google.com/drive/folder)

所以`file.Id`用作的父母`body`

**编辑**很难看到哪个是文件夹和哪个文件，因为`file`and`file1`和`body`and`body1`但我相信它是 file1.id 应该是 body1 的父级

**编辑 2**

```
if (!String.IsNullOrEmpty(file1.id)) {
    body1.Parents = new List<ParentReference>()
       { new ParentReference() {Id = file1.id} };
} 
```

**编辑3** 完整代码：

```
Google.Apis.Drive.v2.Data.File folder = new Google.Apis.Drive.v2.Data.File();
folder.Title = "My first folder";
folder.Description = "folder document description";
folder.MimeType = "application/vnd.google-apps.folder";

// service is an authorized Drive API service instance
Google.Apis.Drive.v2.Data.File file = service.Files.Insert(folder).Fetch();

Google.Apis.Drive.v2.Data.File theImage = new Google.Apis.Drive.v2.Data.File();
theImage.Title = "My first image";
theImage.MimeType = "image/jpeg";
theImage.Parents = new List<ParentReference>()
   { new ParentReference() {Id = file.Id} };

byte[] byteArray = System.IO.File.ReadAllBytes("Bluehills.jpg");
System.IO.MemoryStream stream = new System.IO.MemoryStream(byteArray);

FilesResource.InsertMediaUpload request = service.Files.Insert(theImage, stream, "image/jpeg");
request.Upload();

Google.Apis.Drive.v2.Data.File imageFile = request.ResponseBody;
Console.WriteLine("File id: " + imageFile.Id);
Console.WriteLine("Press Enter to end this process.");
Console.ReadLine(); 
```

# lua - lua_rawlen 是如何工作的

> ID：13027750
> 
> 赞同：2
> 
> 时间：2012-10-23T09:48:19.147
> 
> 标签：lua

我想用 lua_rawlen 获取表长度，这样的代码

```
lua_createtable(L, 0, 0);

lua_pushstring(L, "k0");
lua_pushstring(L, "v0");
lua_settable(L, -3);
lua_pushstring(L, "k1");
lua_pushstring(L, "v1");
lua_settable(L, -3);

printf("%d\n", lua_rawlen(L, -1)); 
```

输出是0，好像应该是2，怎么回事？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:55:11.563

该函数返回*序列*`lua_rawlen`的长度而不调用可选的元方法。相当于 Lua 函数，在没有这种元方法的情况下与操作符相同。*`__len``rawlen``#``__len`*

 *你的表不是一个序列，因为你只放了字符串键。序列的键必须是从**1**开始的连续整数。代替键`"k0"`和`"k1"`键，分别尝试使用`1`和`2`。

例子：

```
lua_createtable(L, 0, 0);

lua_pushstring(L, "v0");
lua_rawseti(L, -2, 1);
lua_pushstring(L, "v1");
lua_rawseti(L, -2, 2);

printf("%d\n", lua_rawlen(L, -1)); 
```*

# android - 如何在图像视图上应用两个或多个颜色矩阵

> ID：13027752
> 
> 赞同：0
> 
> 时间：2012-10-23T09:48:22.877
> 
> 标签：android, bitmap, mask, android-image

需要帮助
我有代码来设置这样的亮度图像

```
float fb = (fbri *1.5f);
        ColorMatrix cmB = new ColorMatrix();
        cmB.set(new float[] { 
            1, 0, 0, 0, fb,
            0, 1, 0, 0, fb,
            0, 0, 1, 0, fb,
            0, 0, 0, 1, 0   });

        ColorMatrix colorMatrix = new ColorMatrix();
        colorMatrix.set(cmB); 
```

结果我像这样保存到位图

```
Canvas c = new Canvas(b2);
        Paint paint = new Paint();
        ColorMatrixColorFilter f = new ColorMatrixColorFilter(colorMatrix);
        paint.setColorFilter(f);   
        c.drawBitmap(bbri, 0,0, paint);
        mImageView.setImageDrawable(new BitmapDrawable(getResources(),b2)); 
```

我也有像这样设置对比度图像的代码

```
 float[] cntr = new float[] { 
                scale, 0    , 0   , 0, translate,
                0    , scale, 0   , 0, translate,
                0    , 0    ,scale, 0, translate, 
                0    , 0    , 0   , 1, 0          };
                matrix.set(cntr); 
```

而且我也保存到位图，它可以工作，但是如果我同时运行亮度和对比度，它会显示白色图像，因为该位图只是一个，并且该位图之前用编辑位图替换，如何解决我可以编辑图像同时具有亮度和对比度，谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:57:10.720

我不知道为什么到目前为止没有人回答你。为了让您做到这一点，无论您是创建另一个扩展位图的类还是创建与原始位图不同的位图，在您单击其他方法之前，只需给它 bmp =null;

# django - 如何设计“消息已读”功能？

> ID：13027756
> 
> 赞同：0
> 
> 时间：2012-10-23T09:48:26.197
> 
> 标签：django, django-models

如何设计“消息已读”功能？

```
class UserProfil(models.Model):
    user = models.OneToOneField(User)
    name = models.CharField(max_length=50)

class PrivateMessage(models.Model):
    from_user = models.OneToOneField(User)
    to_user = models.OneToOneField(User)
    date = models.DateTimeField(auto_now_add=True)
    content = models.TextField() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:53:53.713

添加到私人消息

`is_read = models.BooleanField(default=False)`

如果“to_user”进入视图，您可以检查：

```
if user == pm.to_user and not pm.is_read:
    pm.is_read = True
    pm.save() 
```

# javascript - Datejs 获取一周中的一串天数

> ID：13027758
> 
> 赞同：1
> 
> 时间：2012-10-23T09:48:31.050
> 
> 标签：javascript, datejs

我使用 datejs，我有两个日期：`startDate`和`endDate`.

日期是两个日期类型的对象。我需要编写一个函数来枚举这两个日期之间的天数。

间隔为 7 天

例子：

```
startDate = 2012-10-30
endDate = 2012-11-05 
```

我需要得到这样的输出字符串：

`30,31,01,02,03,04,05`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:44:47.633

```
var getDays = function (start, end) {
    var days = [],
        temp = start.clone();

    while (temp <= end) {
        days.push(temp.toString('dd'));
        temp.add(1).day();
    }

    return days.join(',');
}

var days = getDays(Date.parse('2012-10-30'), Date.parse('2012-11-05')); 
```

返回一个字符串，例如`"30,31,01,02,03,04,05"`.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:53:45.170

```
var startDate = new Date("2012-10-30"),
    endDate = new Date("2012-11-05"); // or whatever

var days = [];
for (var i=new Date(startDate); i<=endDate; i.setDate(i.getDate()+1))
    days.push(i.getDate()); 
```

要获得您想要的字符串，请使用

```
 days.push(("0"+i.getDate()).substr(-2)); 
```

相反，那么`days.join(",")`。

当您使用 date.js 时，这里有一些语法糖：

```
for (var days=[], i=startDate.clone(); i<=endDate; i.addDays(1))
    days.push(i.toString("dd"));
return days.join(); 
```

# c - Linux：给定一个 ID，检查它在 C 中的 PID 或 TID

> ID：13027759
> 
> 赞同：-4
> 
> 时间：2012-10-23T09:48:31.543
> 
> 标签：c, linux, operating-system, linux-kernel

您将获得一个 ID 作为流程的输入。我们需要确定它是 PID 还是 TID 此 ID 可以是任何进程，而不是同一进程所必需的。例如：

.\a.out 1234

**输出：它是一个线程 ID。**

我需要在我的程序中获得相同的信息。如果我做

```
ps -elf | 1234 
```

它将列出具有给定 ID 的所有条目。PID 和 TID 相同的条目是一个进程，如果它们不同，则它是一个线程。我想通过 C 程序做同样的事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:06:08.987

PID 和 TID 都是数字（标识符）。你会怎么区分？在单线程代码中，PID 和 TID 都是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:13:39.780

您可以做的最好的事情是检查您当前的线程或进程。使用 getpid() 获取当前进程id，如果和给定的pid相同，则显然是进程id。

pthread_self() 返回当前线程的 id。

但是，当它可以属于另一个进程或线程时，这将毫无用处。

这适用于 POSIX 线程和 fork 进程 api

编辑：@Chris 建议可以探索 proc 文件系统以获取其他进程和线程 ID。不过，可能需要特权访问。问题下的评论中解释了详细信息

# php - 文件上传并发送到电子邮件帐户

> ID：13027760
> 
> 赞同：1
> 
> 时间：2012-10-23T09:48:31.347
> 
> 标签：php, forms, html

在我的网站上，我有以下 HTML5 表单：

```
<form action="briefform.php" method="post" enctype="multipart/form-data" name="servicesform" id="servicesform" autocomplete="on"> 
    <fieldset>
        <ul>
            <li><label>Name*</label>
                <input name="name" type="text" class="name">
            </li>
            <li><label>Email*</label>
                <input name="email" type="email" class="email">
            </li>
            <li><label>Business Name</label>
                <input name="busname" type="text" id="busname">
            </li>
            <li><label>Business Description</label>
                <textarea name="busdisc" id="busdisc"></textarea>
            </li>
            <li><label>Budget (AUD)</label>
                <input name="budget" type="number" id="budget" placeholder="$">
            </li>
            <li><label>Time Frame</label>
                <input name="timeframe" type="text" id="timeframe">
            </li>
            <li><label>Project Title</label>
                <input name="protitle" type="text" id="protitle" >
            </li>
            <li><label>Project Description*</label>
                <textarea name="prodisc" id="prodisc" spellcheck="true"></textarea>
            </li>
            <li><label>Upload</label>
                <input name="uploads[]" type="file" id="uploads" multiple>
            </li>
            <li><label>Target Audience</label>
                <textarea name="target" id="target"></textarea>
            </li>
            <li><label>Further Details</label>
                <textarea name="requirements" id="requirements" spellcheck="true"></textarea>
            </li>
            <li><input type="reset" name="reset" class="reset" value="Reset"/>
                <input type="submit" name="submit" class="submit" value="Send"/>
            </li>
        </ul>
    </fieldset>
</form> 
```

此 PHP 脚本正在处理的内容：

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Site Name</title>
<meta http-equiv="refresh" content="15;URL=http://mysiteaddress.com/">
</head>

<style>
    body {
        background: #202024;
        font: .75em Arial, Helvetica, sans-serif;
        color: #FFF;
        text-align: center;
        margin-top: 25%;
    }
</style>
<body>

<?php
    if(isset($_POST['email'])) {

        // TO AND FROM
        $email_to = "myemail@address.com";
        $email_subject = "Message from MYSITE.COM";

        function died($error) {
            // ERROR MESSAGES TO THE USER
            echo "We are very sorry, but there were error(s) found with the form you submitted. ";
            echo "These errors appear below.<br /><br />";
            echo $error."<br /><br />";
            echo "Please go back and fix these errors.<br /><br />";
            die();
        }

        // VALIDATION ON EXPECTED DATA
        if(!isset($_POST['name']) ||
            !isset($_POST['email']) ||
            !isset($_POST['busname']) ||
            !isset($_POST['busdisc']) ||
            !isset($_POST['budget']) ||
            !isset($_POST['timeframe']) ||
            !isset($_POST['protitle']) ||
            !isset($_POST['prodisc']) ||
            !isset($_POST['target']) ||
            !isset($_POST['requirements'])) {
            died('We are sorry, but there appears to be a problem with the form you submitted.');      
        }

        $name_from = $_POST['name']; // required
        $email_from = $_POST['email']; // required
        $busname = $_POST['busname']; // not required
        $busdisc = $_POST['busdisc']; // not required
        $budget = $_POST['budget']; // not required
        $timeframe = $_POST['timeframe']; // not required
        $protitle = $_POST['protitle']; // not required
        $prodisc = $_POST['prodisc']; // required
        $uploads = $_POST['uploads']; // not required
        $target = $_POST['target']; // not required
        $requirements = $_POST['requirements']; // not required         

        // MANDATORY FIELDS 
        $error_message = "";
        $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
          if(!preg_match($email_exp,$email_from)) {
            $error_message .= 'The email address you entered does not appear to be valid.<br />';
          }
            $string_exp = "/^[A-Za-z .'-]+$/";
          if(!preg_match($string_exp,$name_from)) {
            $error_message .= 'The name you entered does not appear to be valid.<br />';
          }
          if(!preg_match($string_exp,$prodisc)) {
            $error_message .= 'The project description you entered does not appear to be valid.<br />';
          }

          if(strlen($error_message) > 0) {
            died($error_message);
          }
        $email_message = "Services Form.\n\n";

        function clean_string($string) {
          $bad = array("content-type","bcc:","to:","cc:","href");
          return str_replace($bad,"",$string);
        }

        $email_message .= "Name: ".clean_string($name_from)."\n";
        $email_message .= "Email: ".clean_string($email_from)."\n";
        $email_message .= "Business Name: ".clean_string($busname)."\n";
        $email_message .= "Business Description: ".clean_string($busdisc)."\n";
        $email_message .= "Budget: ".clean_string($budget)."\n";
        $email_message .= "Timeframe: ".clean_string($timeframe)."\n";
        $email_message .= "Project Title: ".clean_string($protitle)."\n";
        $email_message .= "Project Description: ".clean_string($prodisc)."\n";
        $email_message .= "Uploads: ".clean_string($uploads)."\n";
        $email_message .= "Target Audience: ".clean_string($target)."\n";
        $email_message .= "Further Requirements: ".clean_string($requirements)."\n";

        // FILE UPLOADS
        $allowedExts = array("ai", "doc", "docx", "gif", "jpeg", "jpg", "pdf", "png", "psd");
        $extension = end(explode(".", $_FILES["uploads"]["name"]));

        if ((($_FILES["file"]["type"] == "image/gif")
        || ($_FILES["file"]["type"] == "image/jpeg")
        || ($_FILES["file"]["type"] == "image/png")
        || ($_FILES["file"]["type"] == "image/pjpeg"))
        && ($_FILES["file"]["size"] < 20000)
        && in_array($extension, $allowedExts)) {
           if ($_FILES["file"]["error"] > 0) {
             echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
             }
           else {
              echo "Upload: " . $_FILES["file"]["name"] . "<br />";
              echo "Type: " . $_FILES["file"]["type"] . "<br />";
              echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
              echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";
                 if (file_exists("upload/" . $_FILES["file"]["name"])) {
                    echo $_FILES["file"]["name"] . " already exists. ";
           }
              else {
                move_uploaded_file($_FILES["file"]["tmp_name"],
                 "upload/" . $_FILES["file"]["name"]);
                 echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
              }
           }
        }
        else {
           echo "Invalid file";
        }

    // EMAIL HEADERS
    $headers = 'From: '.$email_from."\r\n".
    'Reply-To: '.$email_from."\r\n" .
    'X-Mailer: PHP/' . phpversion();
    @mail($email_to, $email_subject, $email_message, $headers); 
?>

<!-- SUCCESS MESSAGE -->
Your message has been sent.  Thank you for contacting me, I'll get back to you as soon as possible.

<?php
}
?>
</body>
</html> 
```

我在我的目录上创建了一个名为*upload*的文件夹，我相信这是脚本将文件上传到的位置。

当用户提交带有必填字段的表单时，信息会发送到我的电子邮件帐户。

但是，如果用户也想发送一个文件/文件，脚本不会处理这个，并且用户会在“*您的消息已发送......* ”反馈 上方收到“*无效文件”回显。*

 *如果我然后转到我的电子邮件帐户，我可以看到信息已成功发送（即使出现“*无效文件*”错误），但用户上传的文件丢失并且不在我的*上传*文件夹中。

使用上面的脚本，我将如何实现文件上传部分？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:09:05.607

好的..全新的答案。代码有一些问题。我让它在我的服务器上运行。

我现在不打算进行多文件上传。

```
<form action="briefform.php" method="post" enctype="multipart/form-data" name="servicesform" id="servicesform" autocomplete="on"> 
    <fieldset>
        <ul>
            <li><label>Name*</label>
                <input name="name" type="text" class="name">
            </li>
            <li><label>Email*</label>
                <input name="email" type="email" class="email">
            </li>
            <li><label>Business Name</label>
                <input name="busname" type="text" id="busname">
            </li>
            <li><label>Business Description</label>
                <textarea name="busdisc" id="busdisc"></textarea>
            </li>
            <li><label>Budget (AUD)</label>
                <input name="budget" type="number" id="budget" placeholder="$">
            </li>
            <li><label>Time Frame</label>
                <input name="timeframe" type="text" id="timeframe">
            </li>
            <li><label>Project Title</label>
                <input name="protitle" type="text" id="protitle" >
            </li>
            <li><label>Project Description*</label>
                <textarea name="prodisc" id="prodisc" spellcheck="true"></textarea>
            </li>
            <li><label>Upload</label>
                <input name="uploads" type="file" id="uploads" multiple>
            </li>
            <li><label>Target Audience</label>
                <textarea name="target" id="target"></textarea>
            </li>
            <li><label>Further Details</label>
                <textarea name="requirements" id="requirements" spellcheck="true"></textarea>
            </li>
            <li><input type="reset" name="reset" class="reset" value="Reset"/>
                <input type="submit" name="submit" class="submit" value="Send"/>
            </li>
        </ul>
    </fieldset>
</form> 
```

所以，首先，将表格更改为

```
<input name="uploads" type="file" id="uploads" multiple> 
```

现在的脚本..

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Site Name</title>
<meta http-equiv="refresh" content="15;URL=http://mysiteaddress.com/">
</head>

<style>
    body {
        background: #202024;
        font: .75em Arial, Helvetica, sans-serif;
        color: #FFF;
        text-align: center;
        margin-top: 25%;
    }
</style>
<body>

<?php
    if(isset($_POST['email'])) {

        // TO AND FROM
        $email_to = "myemail@address.com";
        $email_subject = "Message from MYSITE.COM";

        function died($error) {
            // ERROR MESSAGES TO THE USER
            echo "We are very sorry, but there were error(s) found with the form you submitted. ";
            echo "These errors appear below.<br /><br />";
            echo $error."<br /><br />";
            echo "Please go back and fix these errors.<br /><br />";
            die();
        }

        // VALIDATION ON EXPECTED DATA
        if(!isset($_POST['name']) ||
            !isset($_POST['email']) ||
            !isset($_POST['busname']) ||
            !isset($_POST['busdisc']) ||
            !isset($_POST['budget']) ||
            !isset($_POST['timeframe']) ||
            !isset($_POST['protitle']) ||
            !isset($_POST['prodisc']) ||
            !isset($_POST['target']) ||
            !isset($_POST['requirements'])) {
            died('We are sorry, but there appears to be a problem with the form you submitted.');      
        }

        $name_from = $_POST['name']; // required
        $email_from = $_POST['email']; // required
        $busname = $_POST['busname']; // not required
        $busdisc = $_POST['busdisc']; // not required
        $budget = $_POST['budget']; // not required
        $timeframe = $_POST['timeframe']; // not required
        $protitle = $_POST['protitle']; // not required
        $prodisc = $_POST['prodisc']; // required
        $uploads = $_FILES['uploads']; // not required 
```

这不是 $_POST['uploads']。这是 $_FILES。从现在开始，您应该在脚本中使用 $uploads 值。

```
 $target = $_POST['target']; // not required
        $requirements = $_POST['requirements']; // not required         

        // MANDATORY FIELDS 
        $error_message = "";
        $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
          if(!preg_match($email_exp,$email_from)) {
            $error_message .= 'The email address you entered does not appear to be valid.<br />';
          }
            $string_exp = "/^[A-Za-z .'-]+$/";
          if(!preg_match($string_exp,$name_from)) {
            $error_message .= 'The name you entered does not appear to be valid.<br />';
          }
          if(!preg_match($string_exp,$prodisc)) {
            $error_message .= 'The project description you entered does not appear to be valid.<br />';
          }

          if(strlen($error_message) > 0) {
            died($error_message);
          }
        $email_message = "Services Form.\n\n";

        function clean_string($string) {
          $bad = array("content-type","bcc:","to:","cc:","href");
          return str_replace($bad,"",$string);
        }

        $email_message .= "Name: ".clean_string($name_from)."\n";
        $email_message .= "Email: ".clean_string($email_from)."\n";
        $email_message .= "Business Name: ".clean_string($busname)."\n";
        $email_message .= "Business Description: ".clean_string($busdisc)."\n";
        $email_message .= "Budget: ".clean_string($budget)."\n";
        $email_message .= "Timeframe: ".clean_string($timeframe)."\n";
        $email_message .= "Project Title: ".clean_string($protitle)."\n";
        $email_message .= "Project Description: ".clean_string($prodisc)."\n";
        $email_message .= "Uploads: ".clean_string($uploads)."\n";
        $email_message .= "Target Audience: ".clean_string($target)."\n";
        $email_message .= "Further Requirements: ".clean_string($requirements)."\n";

        // FILE UPLOADS
        $allowedExts = array("ai", "doc", "docx", "gif", "jpeg", "jpg", "pdf", "png", "psd");
        $extension = end(explode(".", $_FILES["uploads"]["name"])); 
```

到这里为止一切都很好。你突然开始使用 $_FILES["file"]，我假设是拼凑教程。此时 $_FILES["uploads"] 或 $uploads 均有效

```
 if ((($_FILES["uploads"]["type"] == "image/gif")
        || ($_FILES["uploads"]["type"] == "image/jpeg")
        || ($_FILES["uploads"]["type"] == "image/png")
        || ($_FILES["uploads"]["type"] == "image/pjpeg"))
        && ($_FILES["uploads"]["size"] < 20000) 
```

这是一个非常小的图像。20000 字节只有 20kB。我猜你是从这里[http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)提取的。您可能想使用

```
 ($_FILES["uploads"]["size"] < 200000) 
```

对于 200kB 的图像，或

```
 ($_FILES["uploads"]["size"] < 200000) 
```

对于 2MB 图像

```
 && in_array($extension, $allowedExts)) { 
```

这是另一个问题。我将扩展 if 语句，使其更易于阅读。

```
if(

    (
            ($_FILES["file"]["type"] == "image/gif"  ) ||   
            ($_FILES["file"]["type"] == "image/jpeg" ) || 
            ($_FILES["file"]["type"] == "image/png"  ) ||
            ($_FILES["file"]["type"] == "image/pjpeg")      

    )

    && 

            ($_FILES["file"]["size"] < 20000)

    && 

            in_array($extension, $allowedExts)

) 
```

您基本上说过，如果元数据用于 gif、png 或 jpg，并且小于 20kb，并且它是 Adob​​e Illustrator、Word 文档、图像、PDF 或 photoshop 文件

如果它是图像，那将是正确的。AI、PDF 或 DOC 永远不会通过上传类型检查。

```
 if ($_FILES["uploads"]["error"] > 0) {
             echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
             }
           else {
              echo "Upload: " . $_FILES["uploads"]["name"] . "<br />";
              echo "Type: " . $_FILES["uploads"]["type"] . "<br />";
              echo "Size: " . ($_FILES["uploads"]["size"] / 1024) . " Kb<br />";
              echo "Temp file: " . $_FILES["uploads"]["tmp_name"] . "<br />";
                 if (file_exists("upload/" . $_FILES["uploads"]["name"])) {
                    echo $_FILES["uploads"]["name"] . " already exists. ";
           }
              else {
                move_uploaded_file($_FILES["uploads"]["tmp_name"],
                 "upload/" . $_FILES["uploads"]["name"]);
                 echo "Stored in: " . "upload/" . $_FILES["uploads"]["name"];
              }
           }
        }
        else {
           echo "Invalid file";
        }

    // EMAIL HEADERS
    $headers = 'From: '.$email_from."\r\n".
    'Reply-To: '.$email_from."\r\n" .
    'X-Mailer: PHP/' . phpversion();
    @mail($email_to, $email_subject, $email_message, $headers); 
?>

<!-- SUCCESS MESSAGE -->
Your message has been sent.  Thank you for contacting me, I'll get back to you as soon as possible.

<?php
}
?>
</body>
</html> 
```*

# c# - 使用将支持删除级联的第三个表在 2 个表之间创建多对多关系

> ID：13027765
> 
> 赞同：0
> 
> 时间：2012-10-23T09:48:43.933
> 
> 标签：c#, fluent-nhibernate

我有以下用户实体：

```
public class User
{
    public virtual int Id { get; set; }

    public virtual string Username { get; set; }

    public virtual string UsernameLowercase { get { return Username.ToLowerInvariant(); } }

    public virtual string Password { get; set; }

    public virtual string Email { get; set; }

    public override bool Equals(object obj)
    {
        if (obj == null || GetType() != obj.GetType())
            return false;

        if (ReferenceEquals(this, obj))
            return true;

        var otherUser = obj as User;
        return (0 == string.CompareOrdinal(UsernameLowercase, otherUser.UsernameLowercase));
    }

    public override int GetHashCode()
    {
        return UsernameLowercase.GetHashCode();
    }
} 
```

和以下角色实体：

```
public class Role
{
    public virtual int Id { get; set; }

    public virtual string RoleName { get; set; }

    public virtual string RoleNameLowercase { get { return RoleName.ToLowerInvariant(); } }

    public override bool Equals(object obj)
    {
        if (obj == null || GetType() != obj.GetType())
            return false;

        if (ReferenceEquals(this, obj))
            return true;

        var otherRole = obj as Role;
        return (0 == string.CompareOrdinal(RoleNameLowercase, otherRole.RoleNameLowercase));
    }

    public override int GetHashCode()
    {
        return RoleNameLowercase.GetHashCode();
    } 
} 
```

因为可以为用户分配许多角色，所以我创建了第三个名为 UserInRole 的实体，如下所示：

```
public class UserInRole
{
    public virtual User User { get; set; }

    public virtual Role Role { get; set; }

    public override bool Equals(object obj)
    {
        if (obj == null || GetType() != obj.GetType())
            return false;

        if (ReferenceEquals(this, obj))
            return true;

        var other = obj as UserInRole;
        return (Role == other.Role && User == other.User);
    }

    public override int GetHashCode()
    {
        return User.GetHashCode() ^ Role.GetHashCode();
    }
} 
```

我想使用流利的 nhibernate 在 UsersInRoles 表和 User 和 Role 表之间进行映射，以便当我删除用户时，UsersInRoles 表中定义的所有用户角色也会自动删除。这是我当前的 UserInRole 实体映射类：

```
public class UserInRoleMapping : ClassMap<UserInRole>
{
    public UserInRoleMapping()
    {
        Table("UsersInRoles");

        CompositeId().
            KeyReference(x => x.User,k => k.Not.Lazy(), "UserId").
            KeyReference(x => x.Role, k => k.Not.Lazy(), "RoleId");

    }
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:49:33.120

所以在搜索了一段时间后，我发现[了这个](https://groups.google.com/forum/?fromgroups=#!topic/fluent-nhibernate/4g7HZozm_gM)讨论。我将我的用户实体更改为以下内容（注意新的受保护角色属性）：

```
public class User
{
    private IList<UserInRole> _roles = new List<UserInRole>(); 

    public virtual int Id { get; set; }

    public virtual string Username { get; set; }

    public virtual string UsernameLowercase { get { return Username.ToLowerInvariant(); } }

    public virtual string Password { get; set; }

    public virtual string Email { get; set; }

    public override bool Equals(object obj)
    {
        if (obj == null || GetType() != obj.GetType())
            return false;

        if (ReferenceEquals(this, obj))
            return true;

        var otherUser = obj as User;
        return (0 == string.CompareOrdinal(UsernameLowercase, otherUser.UsernameLowercase));
    }

    public override int GetHashCode()
    {
        return UsernameLowercase.GetHashCode();
    }

    protected virtual IList<UserInRole> Roles
    {
        get { return _roles; }
        set
        {
            value.ThrowIfNull("value");
            _roles = value;
        }
    } 
} 
```

用户映射已更改为包含 HasMany 定义，如下所示：

```
public abstract class UserMapping: ClassMap<User>
{
    protected UserMapping()
    {
        Table("Users");

        Map(x => x.Username).Column("Username").Length(20).Not.Nullable().Unique();
        Map(x => x.Password).Column("Password").Length(20).Not.Nullable();
        Map(x => x.Email).Column("Email").Length(50).Not.Nullable();

        //This line was missing
        HasMany<UserInRole>(Reveal.Member<User>("Roles")).
            Table("UsersInRoles").
            KeyColumn("UserId").
            Inverse().
            Cascade.Delete();
    }
} 
```

现在，当我删除用户时，角色也会被删除而不会出现错误。当我查看 nhibernate 日志时，我看到单个 Delete(user) 调用的 2 个删除语句，如下所示：

```
13:18:39.950 [7] DEBUG NHibernate.SQL - DELETE FROM UsersInRoles WHERE UserId = :p0 AND RoleId = :p1;:p0 = 7 [Type: Int32 (0)], :p1 = 3 [Type: Int32 (0)]
13:18:39.983 [7] DEBUG NHibernate.SQL - DELETE FROM Users WHERE Id = :p0;:p0 = 7 [Type: Int32 (0)] 
```

希望这可以帮助某人。欢迎您发表意见。

# ruby-on-rails - 如何存根 Gmap4rails

> ID：13027767
> 
> 赞同：0
> 
> 时间：2012-10-23T09:48:45.290
> 
> 标签：ruby-on-rails, testing, rspec, gmaps4rails

我想为 ruby​​ on rails 项目实施 rspec 测试。一些类使用 gmaps4rails

工厂.rb：

```
 FactoryGirl.define do
   factory :place do |s|
      sequence(:name) {|n| "test  place#{n}" }
   end
 end 
```

factorytest_spec.rb（需要'spec_helper'）

```
it "Test" do
Place.any_instance.stub(:geocode).and_return("..")
  8.times do
    s = FactoryGirl.build(:shop_with_adress)
  end
end 
```

现在这段代码有时会通过绿色，有时不会。

```
 Failure/Error: s = FactoryGirl.build(:place)
 ActiveRecord::RecordInvalid: 
```

这似乎归结为一个`Gmaps4rails Adress invalid`错误（？）我应该如何存根 gmaps4rails？我真的不知道如何[在 rspec 测试中应用 How to stub gmaps4rails geocode functions 中的提示？](https://stackoverflow.com/questions/10713434/how-to-stub-gmaps4rails-geocode-functions-in-rspec-tests)完全正确..也许是因为我对存根/rspec 很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:16:44.993

[您可以在此处](https://github.com/apneadiving/Google-Maps-for-Rails/blob/master/spec/support/geocoding.rb#L29)复制详细的存根，`Gmaps4rails.geocode`并在必要时根据您的需要进行调整。

对于自定义，复制粘贴以下结果：

```
Gmaps4rails.geocode("your custom address") 
```

这是一个数组并复制它：

```
Gmaps4rails.stub(:geocode) do |*args|
  your_custom_array
end 
```

显然，我建议像在 gem 中一样，创建自己的规范支持模块。

# php - 以 Excel 格式导出 Mysql 表

> ID：13027777
> 
> 赞同：-2
> 
> 时间：2012-10-23T09:49:07.300
> 
> 标签：php, mysql

我需要将 mysql 表导出为 Excel 格式。我已经尝试过，但我仍然无法获得正确的格式。谁能帮我解决这个问题。我在下面附上了我的 php 函数。

```
<body>
<?php

function export_excel_csv()
{
    $conn = mysql_connect("localhost","itsup739_uaquiz","itsup739_uaquiz");
    $db = mysql_select_db("itsup739_uaquizDB",$conn);

    $sql = "SELECT * FROM results";
    $rec = mysql_query($sql) or die (mysql_error());

    $num_fields = mysql_num_fields($rec);

    for($i = 0; $i < $num_fields; $i++ )
    {
        $header .= mysql_field_name($rec,$i)."\\t";
    }

    while($row = mysql_fetch_row($rec))
    {
        $line = '';
        foreach($row as $value)
        {                                           
            if((!isset($value)) || ($value == ""))
            {
                $value = "\\t";
            }
            else
            {
                $value = str_replace( '"' , '""' , $value );
                $value = '"' . $value . '"' . "\\t";
            }
            $line .= $value;
        }
        $data .= trim( $line ) . "\\n";
    }

    $data = str_replace("\\r" , "" , $data);

    if ($data == "")
    {
        $data = "\\n No Record Found!\n";                       
    }

    header("Content-type: application/octet-stream");
    header("Content-Disposition: attachment; filename=reports.xls");
    header("Pragma: no-cache");
    header("Expires: 0");
    print "$header\\n$data";
    //echo $header;
}
export_excel_csv();
?> 
```

请点击链接查看输出。

[http://itsupportsrilanka.com/uaquiz/admin/export.php](http://itsupportsrilanka.com/uaquiz/admin/export.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:02:33.813

导出到excel其实真的很简单。

只需将您的内容创建为普通的 HTML 表格，如下所示：

```
$contents = '<table>
  <tr>
    <td>Row 1</td>
    <td>Row 2</td>
  </tr>
  <tr>
    <td>bLAH BLAH</Td>
    <td>Blah Blah</td>
  </tr>
</table>'; 
```

现在将标题设置为 excel 文档并输出您的表格：

```
$filename = 'my_excel_file.xls';
header( 'Content-type: application/ms-excel' );
header( 'Content-Disposition: attachment; filename=' . $filename );

echo $contents; 
```

差不多就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:56:28.580

1.  为了让 Excel 能够读取您的表格，我建议您将其编写为 CSV 文件，而数据周围没有 HTML 正文。
2.  不要使用制表符作为分隔符。而是使用系统区域设置中的字符集（通常是`,`或`;`）。
3.  我不确定这是故意的，但是您逃脱了`\t`and的反斜杠`\n`。因此，这些不会代表制表符或换行符。
4.  用于`fputcsv()`将行写入文件（或标准输出），默认情况下将使用 Excel 理解的 CSV 格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:03:27.640

您的代码包含许多错误。

1.  `<body>`开头的标签将导致警告`Cannot modify header information`。标题不会设置为从第一行本身开始的输出。
2.  我认为 csv 的内容类型是`Content-type: text/csv`

# string - 计算指定文件夹中每个文件的行progressivley

> ID：13027785
> 
> 赞同：0
> 
> 时间：2012-10-23T09:49:42.090
> 
> 标签：string, batch-file, find

我已经能够构建以下内容，但是在批处理之后可以将每个文件的结果加起来，因为有人知道如何实现这一点吗？

```
find /C "HELLO" c:\TOM\*.TXT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:38:29.317

如果我理解您的要求并且您想计算所有文件中出现多少次（行数）单词“HELLO”，那么`type c:\TOM\*.TXT 2>nul |find /c "HELLO"`（`2>nul`禁止列出文件名，如果您想看到它们只需删除该部分）应该可以完成这项工作。

# iphone - 如何检查文本字段是否包含罗马数字

> ID：13027790
> 
> 赞同：1
> 
> 时间：2012-10-23T09:49:54.610
> 
> 标签：iphone, ios, uitextfield

是否有任何方法可用于检查**UITextField**是否包含**罗马数字**，如 i、ii、iii、iv...等？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:21:35.150

使用`Regex`+ [NSPredicate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)

```
-(BOOL)isValidForRoman:(NSString *)text
{
    NSString *romanRegex = @"^(?=.)(?i)M*(D?C{0,3}|C[DM])(L?X{0,3}|X[LC])(V?I{0,3}|I[VX])$";
    NSPredicate *romanTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", romanRegex]; 
    return ([romanTest evaluateWithObject:text]);
} 
```

这`Regex`是为了`Roman`验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:03:53.323

[`NSRegularExpression`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)您可以通过任何方法使用正则表达式`UITextFieldDelegate`来检查您`UITextField`是否有有效的罗马数字。你可以看到一个使用的例子`NSRegularExpression`：[NSRegularExpression validate email](https://stackoverflow.com/questions/8198303/nsregularexpression-validate-email)

您的正则表达式应该类似于以下内容： [如何仅将有效的罗马数字与正则表达式匹配？](https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T09:56:01.877

您唯一能做的（但也许还有其他解决方案）是检查 UITextField 字符串中的那些字母：

```
Bool find = NO;
NSArray *romans = [NSArray arrayWithObjects:@"i", @"ii", @"ii", @"vi", nil]; //Fill the array as you want

for(NSString *str in romans)
{
  if([textField.text rangeOfString:str].location != NSNotFound)
  {
    find = YES;
    break;
  }
}

if(find)
{
  //Roman letter found
} 
```

# jquery - 在多个选项卡中访问数据 - 数据表

> ID：13027792
> 
> 赞同：0
> 
> 时间：2012-10-23T09:50:00.303
> 
> 标签：jquery, datatables

我正在使用 jquery 数据表。表格在表格内。当我提交表格时，我只能访问当前打开的选项卡上的数据。其他选项卡中的数据不提交。这就是我初始化数据表的方式

```
<script defer>
   $(document).ready(function(){
        $('#tbl_location').dataTable({
            "bSort": false
        });
    });
</script> 
```

我想访问所有选项卡中的数据。我试图在他们的论坛中找到这个问题，但我没有看到与这个主题相关的任何内容。如果有人能给我一个想法，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:34:16.817

尝试：

```
('#form').submit( function() {
          var table = $.fn.dataTable.fnTables(false); //get all datatables
          var list = Array()
           $.each(table, function(key, value) {               
              list.push($(value).dataTable().fnGetData())
          });               
            $('<input />').attr('type', 'hidden')
            .attr('name', "tablesdata")
            .attr('value',  list)
            .appendTo('#form');
            return true;
        } );
    }); 
```

希望它会有所帮助

# ruby - 红宝石线程不等待

> ID：13027794
> 
> 赞同：0
> 
> 时间：2012-10-23T09:50:03.277
> 
> 标签：ruby, multithreading

在 ruby​​ 中，我想执行一些将生成文件的本地命令，然后我想读取文件的内容并对其进行修改。

但是我总是得到空值。

这是代码：

```
exec "java -jar xx.jar --output main.txt";
content=IO.read('main.txt');
content="somethinkg:"+content;
File.open('main.txt','w') do |f|
  f.puts content
end 
```

main.txt 已生成，但我无法修改内容。

然后我认为可能是线程引起的，在`main.txt`读取时，java命令不完整，所以内容为空。

然后我尝试了这个：

```
t=Thread.new do
  exec "java -jar xx.jar --output main.txt";
end
t.join
content=IO.read('main.txt');
puts content
content="somethinkg:"+content;
File.open('main.txt','w') do |f|
  f.puts content
end 
```

但是没有任何改变，我仍然无法获得内容。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:02:38.747

我认为这里的问题是 exec 命令如果你在[这里查看关于 exec 的 ruby​​ 文档](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-exec)

exec 之后的代码从不执行

所以

```
t=Thread.new do
  exec "java -jar xx.jar --output main.txt";
end 
```

所以你的代码在此之后永远不会运行任何东西

尝试使用系统或反引号命令

像这样的东西

```
t=Thread.new do
  system "java -jar xx.jar --output main.txt";
end
t.join
content=IO.read('main.txt');
puts content
content="somethinkg:"+content;
File.open('main.txt','w') do |f|
  f.puts content
end 
```

希望有帮助

# d3.js - 使用 D3 操作 Google GeoChart SVG

> ID：13027795
> 
> 赞同：2
> 
> 时间：2012-10-23T09:50:04.667
> 
> 标签：d3.js, google-visualization

我正在使用 Google 的 GeoChart（https://google-developers.appspot.com/chart/interactive/docs/gallery/geochart）。我正在尝试使用 D3 更改一些元素。我使用了他们的代码，如下所示：

```
google.load('visualization', '1', {'packages': ['geochart']});
//google.setOnLoadCallback(drawMarkersMap);

function drawMarkersMap() {
    var data = google.visualization.arrayToDataTable([
        ['Country', 'Popularity'],
        ['Germany', 200],
        ['United States', 300],
        ['Brazil', 400],
        ['Canada', 500],
        ['France', 600],
        ['RU', 700]
    ]);

    var options = {
        displayMode: 'markers'
    };

    var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
    chart.draw(data, options);

    window.setTimeout(function() {        
        var svg1 = d3.select("svg").selectAll("rect")
            .filter(":nth-child(2)")
            .remove();
        console.log(svg1);
    }, 2000);

}; 
```

我从不同的函数调用 drawMarkersMap() 并且超时仅选择 svg 的矩形。然后我继续选择我想要删除的第三个矩形。控制台日志给了我这个：[Array[0]]，这是应该选择的矩形。然而什么也没有发生。如果我使用，我可以删除所有矩形： var svg1 = d3.select("svg").selectAll("rect").remove() 但不是特定的。我做错了什么还是 Google GeoChart 不允许这种类型的操作？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:41:26.127

根据 selectAll() 的返回值（据我所知，D3 文档是一个数组），问题是您使用 filter() 来选择要删除的元素，而不是导航数组。

此外，您可能会发现这篇解释如何使用 selectAll() 和其他 D3 功能来使用所选元素的[博客文章很有用。](http://knowledgestockpile.blogspot.it/2012/01/understanding-selectall-data-enter.html)

# php - 关联 PHP 数组（包含对象）的非破坏性 JSON 编码/解码

> ID：13027796
> 
> 赞同：3
> 
> 时间：2012-10-23T09:50:08.457
> 
> 标签：php, json, object, serialization, associative-array

我能够以`JSON`解码值与原始输入匹配的方式对索引数组进行编码和解码：

```
$array_indexed = ['A'];
$encoded = json_encode($array_indexed); 
$decoded = json_decode($encoded);
var_dump($array_indexed);
array(1) {
  [0]=>
  string(1) "A"
}
var_dump($decoded);
array(1) {
  [0]=>
  string(1) "A"
} 
```

但是，当我对关联数组进行编码时，我最终得到了一个对象：

```
$array_associate = [ 'FOO' => 'BAR'];
$encoded = json_encode($array_associate);
$decoded = json_decode($encoded);
var_dump($array_associate);
array(1) {
  ["FOO"]=>
  string(3) "BAR"
}
var_dump($decoded);
object(stdClass)#1 (1) {
  ["FOO"]=>
  string(3) "BAR"
} 
```

我的理解是这是正常行为，因为`Javascript`不支持关联数组，而是使用对象表示，因此在编码关联数组时，它最终被编码为对象（因此被解码）。

**Q1：你确认吗？**

## 可能的解决方案

**`serialize`/ `unserialize`：**
绝对要使用`json_encode`/ `json_decode`over `serialize`/的原因`unserialize`是编码形式更加简洁，这很重要，因为它最终存储在缓存中并且缓存空间有限：

```
var_dump(json_encode(['A'=>1,'B'=>2])); // string(13) "{"A":1,"B":2}"
var_dump(serialize(['A'=>1,'B'=>2])); //   string(30) "a:2:{s:1:"A";i:1;s:1:"B";i:2;} 
```

**Q2：你有没有遇到过使用的缓存空间问题`serialize`，如果是这样，除了使用之外，你是如何解决的`json_encode`（我在想压缩，但如果 value 最终出现在 MySQL DB 缓存中，我有点不安用它）？**

**`json_decode($json,true)`**：
问题是应该保留对象的嵌套对象也转换为数组：

```
$obj = new stdClass;
$obj->foo = 'bar';
$array_associate = [ 'A' => $obj];
$encoded = json_encode($array_associate);
var_dump(json_decode($encoded,true));
array(1) {
  ["A"]=>
  array(1) {     <---------------- NO LONGER AN OBJECT, DON'T WANT THAT
    ["foo"]=>
    string(3) "bar"
  }
} 
```

**将对象对象转换为对象数组：**

还是基于上面的例子

```
$object_of_objects = json_decode($encoded);
$array = [];
foreach($object_of_objects as $key=>$object) {
    $array[$key] = $object;
}
var_dump($array);
array(1) {                
  ["A"]=>
  object(stdClass)#6 (1) {
    ["foo"]=>
    string(3) "bar"
  }
} 
```

**Q3：您是否看到任何其他解决方案可以`JSON`在保留原始输入的同时将关联的对象数组相互转换？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:58:21.650

由于无法在 json 中编写关联数组，因此它将被编写为对象，因此 PHP 将在您解码时将其重新作为对象。

为了使 PHP 将其作为数组读取，您必须[将第二个参数设置`json_decode`为 true](http://php.net/json_decode)：

```
json_decode($json, true)
                   ^^^^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T09:57:36.687

Q1：是的，PHP 关联“数组”（严格来说实际上不是数组）在转换为 JSON 时会转换为 Javascript 对象。为什么这对你来说是个问题？

Q2：我会使用 JSON 而不是序列化，不仅因为它更简洁，而且因为它受到更广泛的支持，并且在使用 UTF-8 编码文本时没有问题。

如果您不想`json_decode()`将 JS 对象转换为数组，请将第二个参数设置为 false。

问题（不是听起来刺耳的意思）：为什么你如此沉迷于阵列上的对象？在 PHP 中使用后者非常容易，即使在像[PDO](http://php.net/manual/en/book.pdo.php)这样的 DB 抽象层中也是如此。

# r - 记录函数闭包

> ID：13027799
> 
> 赞同：10
> 
> 时间：2012-10-23T09:50:21.763
> 
> 标签：r, documentation, roxygen2

假设我的包中有一个函数闭包，例如

```
f = function(x) {
    x = x
    g = function(y) x <<- y
    h = function() x
    list(g = g, h = h)
}

l = f(5)
l$g(10)
l$h() 
```

记录此功能的正确方式（在官方[CRAN意义上）是什么？](http://cran.r-project.org/)尤其是，

1.  我想用`roxygen2`
2.  我想提供功能的文档`g`和`h`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T22:40:19.587

一种方法是执行类似于`?family`您记录的位置`g()`和文件部分的操作。然后提供关于和的扩展文档，您可以在这两个函数的部分条目中指向它。`h()``Value``.Rd``g()``h()``\section{foo}``Value`

```
\value{
  Returns an object of class \code{"foo"}, a list with the
  following components:

  \item{g}{function; does foo. See Returned Functions for details.}
  \item{h}{function; does bar. See Returned Functions for details.}
}
\section{Returned Functions}{
  The returned functions do, blah blah...

  \code{g} is defined as

  \preformatted{
  g(x, y, z, ...)
  }

  Arguments are:

  \describe{
    \item{x}{foo}
    \item{y}{foo}
    \item{z}{foo}
  }
} 
```

虽然 roxygen 无法从参数中执行此操作`@param`，但您应该能够将其编写为任意 roxygen 部分以添加到 Rd 文件中。该`Value`部分可以写为标准的 roxygen 标记，只有定制部分需要按字面输入。

# ios - 如何将 NSDate 中的命令转换为显示希伯来日历日期？

> ID：13027801
> 
> 赞同：0
> 
> 时间：2012-10-23T09:50:24.200
> 
> 标签：ios, nsdate

那是我的代码：

```
NSDate *today = [NSDate date];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateStyle:NSDateFormatterShortStyle];
NSString *dateString = [dateFormat stringFromDate:today];
[_label setText:dateString]; 
```

我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:56:19.290

据我所知，您需要设置日期格式化程序的日历（也可能是语言环境）。

设置日历：

```
[dateFormat setCalendar:[[[NSCalendar alloc] initWithCalendarIdentifier:kCFHebrewCalendar] autorelease]]; 
```

设置语言环境：

```
[dateFormat setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:kCFHebrewCalendar] autorelease]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:58:06.147

1）您可以使用类似`setCalendar`的方法`NSDateFormatter` ：

```
NSCalendar *hebrew = [[NSCalendar alloc] initWithCalendarIdentifier:NSHebrewCalendar];
[dateFormat setCalendar:hebrew ]; 
```

2）你也可以使用：

```
NSCalendar * gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSCalendar * hebrew = [[NSCalendar alloc] initWithCalendarIdentifier:NSHebrewCalendar];

NSDate *date = [NSDate date];
NSDateComponents *components = [gregorian components:NSUIntegerMax fromDate:date];
NSDate *hebrewDate = [hebrew dateFromComponents:components]; 
```

# regex - 选择奇数列，然后将连续行的字段放在一起

> ID：13027807
> 
> 赞同：8
> 
> 时间：2012-10-23T09:50:37.660
> 
> 标签：regex, bash, shell, sed, awk

我有一个需要用正则表达式转换的数据文件。更具体地说，我需要保持前 6 列不变，从第 7 列开始，只选择奇数列，然后将每对连续行的字段放在一起。我知道这听起来有点复杂，所以我将通过一个例子来澄清这一点。这是我的原始数据文件（它可以有任意数量的列）：

```
A B C D E F 11 12 13 14 15 16 17 18
A B C D E F 21 22 23 24 25 26 27 28
A B C D E F 31 31 33 34 35 36 37 38
A B C D E F 41 42 43 44 45 46 47 48
A B C D E F 51 52 53 54 55 56 57 58
A B C D E F 61 62 63 64 65 66 67 68
A B C D E F 71 72 73 74 75 76 77 78
A B C D E F 81 82 83 84 85 86 87 88 
```

我发现我可以维护前 6 列，然后删除奇数列

```
awk '{for (i = 1; i <= NF; i++) if (i < 7 || i % 2 == 1) printf $i OFS}; {print ""} 
```

结果是这样的：

```
A B C D E F 11 13 15 17 
A B C D E F 21 23 25 27 
A B C D E F 31 33 35 37 
A B C D E F 41 43 45 47 
A B C D E F 51 53 55 57 
A B C D E F 61 63 65 67 
A B C D E F 71 73 75 77 
A B C D E F 81 83 85 87 
```

但在那之后，我必须将每对连续行的字段放在一起，如下所示：

```
A B C D E F 11 21 13 23 15 25 17 27
A B C D E F 31 41 33 43 35 45 37 47
A B C D E F 51 61 53 63 55 65 57 67
A B C D E F 71 81 73 83 75 85 77 87 
```

我正在考虑使用 sed 或 awk 来完成整个过程，因为我的数据文件很大，我需要有效地转换它们，但我也想不出一种方法来进行第二次转换。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:06:40.740

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk file.txt 
```

内容`script.awk`：

```
{
    getline line
    split(line, array)
    k = 6
    n = ((NF - k) % 2 == 0) ? 1 : 0

    for (i=1; i<=k; i++) {
        printf $i OFS
    }

    for (j=7; j<=NF-n; j+=2) {
        x = $j OFS array[j]
        printf (j < NF - n) ? x OFS : x "\n"
    }
} 
```

结果：

```
A B C D E F 11 21 13 23 15 25 17 27 
A B C D E F 31 41 33 43 35 45 37 47 
A B C D E F 51 61 53 63 55 65 57 67 
A B C D E F 71 81 73 83 75 85 77 87 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T10:05:13.753

试试这个：

```
# d.awk
{
    if (NR % 2 == 1) {
        a = $7
        b = $9
        c = $11
        d = $13
    } else {
        print $1, $2, $3, $4, $5, $6, a, $7, b, $9, c, $11, d, $13
    }
} 
```

结果：

```
% gawk -f d.awk data
A B C D E F 11 21 13 23 15 25 17 27
A B C D E F 31 41 33 43 35 45 37 47
A B C D E F 51 61 53 63 55 65 57 67
A B C D E F 71 81 73 83 75 85 77 87 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T10:08:07.740

Perl 解决方案：

```
perl -ane '
    BEGIN { $, = " " }
    if ($. % 2) {
        @p = (@F[0..5], @F[grep 1-$_ % 2, 6 .. $#F])
    } else {
        print @p[0..5], (map { $p[$_],  $F[2 * $_ - 6] } 6 .. $#F ), "\n"
    }' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T11:16:53.593

我想出了这个：

```
{
    if (NR % 2 == 1){
        for(i = 7; i <= NF; i += 2){
            array[i] = $i
        }
    }
    else{
        printf "%s %s %s %s %s %s", $1, $2, $3, $4, $5, $6
        for(i = 7; i <= NF; i += 2){
            printf " %s %s", array[i], $i
        }
        print ""
    }
} 
```

它适用于开放帖子的示例，具有任意数量的字段。我对此唯一担心的是我的实际数据文件包含 2774938 个字段，并且由于我是 afk 的新手，我不知道这是否是一种有效的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T19:02:10.690

这可能对您有用（GNU sed）：

```
sed -r 's/(\s?\S+)\s\S+/\1/4g;h;s/.*//;N;s/(\s?\S+)\s\S+/\1/4g;H;g;s/^(.*)(.*\n)\n\1/\1\n\2/;h;s/[^\n]*\n//;:a;s/([^ \n]*)\n([^ \n]*)/\n\2 \1\n/g;s/\n \n?| \n/\n/g;/\n[^\n ]*$/!ba;y/\n/ /;H;x;s/\n.*\n//' file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T17:38:57.663

```
awk '
NR%2 { split($0,a); next }
{
   for(i=7;i<NF;i+=2) {
      $(i+1) = $i
      $i = a[i]
   }
}
1' file 
```

或者，如果您更喜欢带有一些警告的“可爱”解决方案（但可以与发布的示例数据一起使用）：

```
awk '
!(NR%2) { printf fmt,$7,$9,$11,$13 }
{ for (i=8;i<=NF;i+=2) $i="%s"; fmt=$0"\n" }
' file 
```

# ios - 在 Modernizr 中检测 iOS 缺少滚动事件？

> ID：13027812
> 
> 赞同：4
> 
> 时间：2012-10-23T09:50:48.880
> 
> 标签：ios, modernizr, browser-feature-detection

[此处](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html%23//apple_ref/doc/uid/TP40006511-SW7)描述了iOS 当前处理 onscroll 事件的方式。基本上，它不是在页面/元素正在滚动时发送多个 onscroll 事件，而是在页面/元素停止滚动后发送一个 onscroll 事件。

这在编写动态网站脚本时会产生不同的问题，并且需要后备来处理它。

我的问题是是否有一种[Modernizr](http://modernizr.com)风格的方式来处理这种“缺乏功能”。处理它的另一种方法是检测正在使用的设备，这并不理想（未来 - iOS 7 来了，突然间支持所有设备，我的网站仍然显示回退）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:33:30.680

在这个阶段这是无法检测到的。见： [https ://github.com/Modernizr/Modernizr/wiki/Undetectables](https://github.com/Modernizr/Modernizr/wiki/Undetectables)

> 滚轮事件是来自像触控板或魔术鼠标这样的连续设备，还是来自传统的点击滚轮（在 webkit 中）。

# sql-server-2008 - 长度> 8000的动态sql传递参数

> ID：13027819
> 
> 赞同：0
> 
> 时间：2012-10-23T09:51:27.073
> 
> 标签：sql-server-2008

我正在创建一个允许用户选择数据库中的所有代码的报告。当它转换为字符串时，它会传递一个超过 8000 个字符的字符串。由于这是一个参数，我不确定如何拆分它。我正在使用 Sql Server 2008 并且也尝试过 varchar(max)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:05:59.947

将列表存储在 DB 字符串 (varchar) 变量中是一种**非常糟糕的做法。**
但是，如果您出于某些外部独立原因绝对必须这样做，那么 CLOB 适合您。
但我仍然建议你尝试重新思考这个概念。

顺便说一句：在这种情况下，您总是可以传递一个“快捷方式”代码，例如**ALL**（或任何其他特殊含义的代码字）......

# javascript - 将 div 滚动到底部后阻止整个页面滚动

> ID：13027822
> 
> 赞同：1
> 
> 时间：2012-10-23T09:51:37.380
> 
> 标签：javascript, html, css

对不起，如果这是一个简单的问题，但我发现很难在这个问题上用谷歌搜索。我正在为我的网站实施自制聊天系统。在任何页面的右下角都会有一个由可滚动的 div 组成的聊天窗口（以 gtalk 方式）。如果要显示的消息过多，则此 div 变为可滚动的。到目前为止，一切都很好。

我想要这样，当用户滚动这个 div 并到达它的底部时，滚动停止：但实际上一旦滚动聊天 div，整个页面就会开始滚动。如果用户想要滚动页面，我希望他必须将鼠标移出聊天 div，然后滚动。

我可以用简单的 CSS 实现这一点还是需要一些 JS？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:03:02.000

[http://jsfiddle.net/Tgm6Y/1447/](http://jsfiddle.net/Tgm6Y/1447/)

I guess u need something like this.. Right? if u need something like this.. Along with css u need some js too..

```
$.fn.followTo = function ( elem ) {
    var $this = this,
        $window = $(windw),
        $bumper = $(elem),
        bumperPos = $bumper.offset().top,
        thisHeight = $this.outerHeight(),
        setPosition = function(){
            if ($window.scrollTop() > (bumperPos - thisHeight)) {
                $this.css({
                    position: 'absolute',
                    top: (bumperPos - thisHeight)
                });
            } else {
                $this.css({
                    position: 'fixed',
                    top: 0
                });
            }
        };
    $window.resize(function()
    {
        bumperPos = pos.offset().top;
        thisHeight = $this.outerHeight();
        setPosition();
    });
    $window.scroll(setPosition);
    setPosition();
};

$('#one').followTo('#two'); 
```

# eclipse - 找不到项目密钥？

> ID：13027823
> 
> 赞同：0
> 
> 时间：2012-10-23T09:51:43.593
> 
> 标签：eclipse, m2eclipse, sonarqube

当我与声纳关联时，我收到一个错误，因为“在服务器上找不到键 'addition:addition' 的项目'addition'”。任何人都可以提供解决方案来解决这个问题，并建议如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:01:57.963

Sonar Eclipse 插件假设已经在 Sonar 中创建了一个项目，该项目由标准构建插件之一（Maven、ANT、构建运行程序）创建

Sonar 工作流程假设您针对项目的代码库集中运行 Sonar。它不支持并行执行（多个开发人员同时运行 Sonar）。这是一个公平的假设，因为通常 Sonar 会从像 Jenkins 这样的持续集成服务器上执行。

Eclipse 插件旨在支持可能并行处理本地 Eclipse 工作空间中包含的代码的开发人员。此代码可能尚未提交或合并，这意味着将分析结果上传到 Sonar 服务器是不正确的。相反，Sonar 分析在本地运行，使开发人员能够查看可能解决 Sonar 违规的代码修复结果。

# c# - ASP.NET 中的线间隙

> ID：13027824
> 
> 赞同：1
> 
> 时间：2012-10-23T09:51:48.630
> 
> 标签：c#, asp.net, layout

我想在 ASP.NET 控件之间添加间隙，目前我知道的唯一方法是添加`<br />`，但我想要的间隙应该少于两个换行符但多于 1 个换行符，不知道如何在 ASP 中做到这一点。网。

**编辑**

我想知道最佳实践

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:00:59.600

Add a class to your ASP.NET controls and control its 'margin-bottom' property in your css file

```
.yourClass
{
margin-bottom: 12px; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:02:23.720

What about using DIV with padding?

```
<div id="div1">
Div One
</div>

<div id="div2">
Div Two
</div> 
```

CSS:

```
#div1 {
border: 1px dashed red;
padding: 20px;
margin: 40px;
}

#div2 {
border: 1px dashed green;
padding: 5px;
margin: 10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:56:26.310

关于什么

```
<asp:TextBox ID="ctrl1" />
<div style="height: 10px;">&nbsp</div>
<asp:TextBox ID="ctrl2" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:57:58.223

将控件包装在`<div class="mySpacedControlContainer"> ... </div>`标签中。

在某处添加 CSS - 专用 CSS 文件，内联 CSS - 包含

```
.mySpacedControlContainer { margin-bottom: 1em; } 
```

根据口味调整值。

您还可以将 CSS 类直接应用于控件。

# android - 在android中合并两个图像

> ID：13027827
> 
> 赞同：1
> 
> 时间：2012-10-23T09:51:59.553
> 
> 标签：android, image, bitmap, mask

我想在 Android 中合并两个图像。图片显示了我的要求。我知道如何组合图像，我正在使用以下代码![在此处输入图像描述](../Images/d01f38246e308d166e1939b3eb53227b.png)

```
public Bitmap combineImages()
    {
        Bitmap mask = getDrawingCache();
        Bitmap my_image = ((PlanetJill) mContext).my_image.getBitmap();
        Bitmap result = Bitmap.createBitmap(mask.getWidth(), mask.getHeight(), Config.ARGB_8888);
        Canvas c = new Canvas(result);
        Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_OVER));
        c.drawBitmap(my_image, ((PlanetJill) mContext).my_image.getMatrix(), null);
        c.drawBitmap(mask, 0, 0, paint);
        paint.setXfermode(null);
        return result;
    } 
```

我只是不确定`Xfermode`使用哪个。谁能告诉我解决方案是什么？另外，如果需要，我也可以更改蒙版，我的意思是可以更改第一个图像，使中心正方形是透明的，而另一个区域是黑色的。如果任何一个面具都可以解决任何问题，请提供帮助。

# java - 为什么我的 Web 服务服务器保留对应用程序服务器的首次成功验证？

> ID：13027834
> 
> 赞同：0
> 
> 时间：2012-10-23T09:52:21.483
> 
> 标签：java, web-services, authentication

我有一个基于 Java SE 6 的 JAX-WS Web 服务。有一个 Web 服务方法，它通过 HTTP 登录应用程序服务器并读取信息。

如果客户端使用正确的用户名和密码调用 Web 服务方法，它将在应用服务器上进行身份验证，然后从应用服务器获得响应。

然后，如果第二个客户端使用错误的用户名/密码调用 Web 服务方法，它将获得身份验证并接收机密信息 - 这是错误的行为。

只有在这两个客户端调用之间重新启动 Web 服务服务器时，如果用户名/密码错误，第二次调用才会被拒绝。

似乎一旦创建了经过身份验证的连接，Web 服务服务器就会保持对应用程序服务器的身份验证，然后不再需要对后续调用进行身份验证。

我的问题是，如何使 Web 服务方法的 2 次调用完全隔离？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:06:28.140

只是在这里猜测，但您是否将身份验证令牌作为实例变量存储在 WS servlet 中？

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:37:51.917

您有两个选择 - 使您的 Web 服务类似于 RESTful（通过每个请求传递您的身份验证详细信息，并且不要在 Web 服务本身中存储任何状态信息，或者确保您在 Web 服务和您的客户端之间传递和验证 sessionID。
但是如果没有看到你的代码，很难说在这种情况下什么是更好的方法。

# java - FutureTask，不安全的动作

> ID：13027835
> 
> 赞同：1
> 
> 时间：2012-10-23T09:52:25.853
> 
> 标签：java, futuretask

我在编译代码时收到此警告（使用 -Xlint 选项）：

```
receptor.java:286: warning: [unchecked] unchecked call to 
FutureTask(java.util.concurrent.Callable<V>) as a member 
of the raw type java.util.concurrent.FutureTask 
```

生成警告的行：

```
FutureTask task = new FutureTask (new Return(address, lock)); 
```

Return 类实现了 Callable：

```
public class Return implements Callable <String> { 
```

如何修复警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:56:54.960

根据[`FutureTask`文档](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html)，这个类也是一个泛型类。这意味着你需要

```
FutureTask<String> task = new FutureTask<String>(new Return(address, lock)); 
```

# objective-c - XMPP 不适用于 iOS 4.3 项目

> ID：13027838
> 
> 赞同：5
> 
> 时间：2012-10-23T09:52:31.937
> 
> 标签：objective-c, ios5, xcode4.3, ios4, xmppframework

在我的 Xcode 项目中，我集成了 XMPP 框架。它在 iOS 5.1 模拟器上运行良好。当我尝试在 iOS 4.3 模拟器上运行该项目时，出现以下错误：

```
dyld: lazy symbol binding failed: Symbol not found: _objc_storeStrong
  Referenced from: /Users/admin/Library/Application Support/iPhone Simulator/4.3.2/Applications/67451DE6-EFC1-4313-9A29-C2C641F727C6/AppName.app/AppName
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk/System/Library/Frameworks/Foundation.framework/Foundation

dyld: Symbol not found: _objc_storeStrong
  Referenced from: /Users/admin/Library/Application Support/iPhone Simulator/4.3.2/Applications/67451DE6-EFC1-4313-9A29-C2C641F727C6/AppName.app/AppName
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk/System/Library/Frameworks/Foundation.framework/Foundation 
```

错误发生在以下代码行：`xmppStream = [[XMPPStream alloc] init];`

经过进一步调试，我发现错误发生在这里：

```
- (id)init
{
    if ((self = [super init])) //**CRASH WHEN EXECUTING THIS STATEMENT
    {
        // Common initialization
        [self commonInit];

        // Initialize socket
        asyncSocket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:xmppQueue];
    }
    return self;
} 
```

我集成 XMPP 的项目不是 ARC。所以我对所有 XMPP 文件添加了**-fobjc-arc 。**XMPP 库提供的示例项目在 iOS 4.3 模拟器上运行良好。谁能帮我解决这个错误？
**Xcode 版本：4.3.3
iOS：iOS 4.3 模拟器**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:36:14.890

如果 XMPP 需要 ARC，并且您明确将其关闭，则会发生这种链接器错误。尝试`-fno-objc-arc`从 XMPP 文件中删除并添加`-fobjc-arc`项目的其他链接器标志。[更多信息](https://stackoverflow.com/questions/8756418/static-library-with-arc-support-linked-to-non-arc-project-causing-linker-errors)

# android - 带有数字的 android 字母索引器

> ID：13027840
> 
> 赞同：9
> 
> 时间：2012-10-23T09:52:36.257
> 
> 标签：android

在 Android 中，如何将 AlphabetIndexer 与数字一起使用？下面的代码似乎不起作用

```
AlphabetIndexer alphabetIndexer = 
            new AlphabetIndexer(cursor, COLUMN_INDEX,"0123456789") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-25T17:15:21.517

AlphabetIndexer 似乎可以很好地处理数字。我创建了一个简单的 ListFragment，它结合了字符串和数字列表，对它们进行排序并通过功能快速滚动将它们显示在列表中。这也适用于只有数字的列表。

```
public class ListFragment extends android.support.v4.app.ListFragment {

  public static final String VALUE_COLUMN = "value_column";
  public static final String[] PROJECTION = new String[] {
      BaseColumns._ID,
      VALUE_COLUMN
  };

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setListAdapter(new AlphanumericAdapter(getActivity(),
        generateDataCursor(getSortedListOfEntries())));
  }

  @Override
  public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    getListView().setFastScrollAlwaysVisible(true);
    getListView().setFastScrollEnabled(true);
  }

  private Cursor generateDataCursor(ArrayList<String> entriesAsArrayList) {
    MatrixCursor entriesAsCursor = new MatrixCursor(PROJECTION);
    for (String entry : entriesAsArrayList) {
      entriesAsCursor.addRow(new String[] { "0", entry });
    }
    return entriesAsCursor;
  }

  private ArrayList<String> getSortedListOfEntries() {
    ArrayList<String> listEntries = new ArrayList<String>();
    for (Locale locale : Locale.getAvailableLocales()) {
      int randomIntegerBetweenZeroAndNine = (int) (Math.random() * 10);
      listEntries.add(String.valueOf(randomIntegerBetweenZeroAndNine));
      String countryName = locale.getDisplayCountry();
      if (TextUtils.isEmpty(countryName)) listEntries.add(countryName);
    }
    Collections.sort(listEntries);
    return listEntries;
  }

  private class AlphanumericAdapter extends SimpleCursorAdapter implements SectionIndexer {

    private final AlphabetIndexer mAlphabetIndexer;

    public AlphanumericAdapter(Context context, Cursor cursor) {
      super(context, android.R.layout.simple_list_item_1, cursor, new String[] { VALUE_COLUMN }, new int[] { android.R.id.text1 });
      mAlphabetIndexer = new AlphabetIndexer(cursor, 1, "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ");
    }

    @Override
    public Object[] getSections() {
      return mAlphabetIndexer.getSections();
    }

    @Override
    public int getPositionForSection(int sectionIndex) {
      return mAlphabetIndexer.getPositionForSection(sectionIndex);
    }

    @Override
    public int getSectionForPosition(int position) {
      return mAlphabetIndexer.getSectionForPosition(position);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T16:18:44.167

你在说什么样的数字范围？只有0-9？否则，我不确定这会做你想要的，因为按字母顺序排列的 00000000 可能会继续 1111111 和 22222222 或 2222。你应该自己实现部分索引器接口，这是一个非常简单的接口：http: [//developer.android.com /reference/android/widget/SectionIndexer.html](http://developer.android.com/reference/android/widget/SectionIndexer.html)你可以返回像“0-99”这样的部分范围。但是，如果您真的只想要数字 0-9，那么您可以使用 AlphabetIndexer 和一个简单的 CursorWrapper 来返回光标中数字的字符串值。[http://developer.android.com/reference/android/database/CursorWrapper.html](http://developer.android.com/reference/android/database/CursorWrapper.html)

注意：这是假设您的光标返回数字/非字符串类型。

# android - 在适配器中更改焦点

> ID：13027844
> 
> 赞同：0
> 
> 时间：2012-10-23T09:52:49.913
> 
> 标签：android

我写了适配器

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
...
    <EditText
        android:id="@+id/weight"
        android:layout_width="55dp"
        android:layout_height="wrap_content"
        android:layout_marginRight="15dp"
        android:ems="10"
        android:inputType="number"
        android:textSize="14sp" >
    </EditText>
...
</LinearLayout> 
```

并将其添加到我的列表中。在适配器中，我添加了一个 textWatcher 来加权 EditText，如下面的代码

```
 holder.weight.addTextChangedListener(new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        @Override
        public void afterTextChanged(Editable s) {
            if (s.length() != 0)
                try {
                // ... 
                } catch (IndexOutOfBoundsException e) {
                    Log.e(TAG, e.toString());
                }

        }
    }); 
```

但是，当我在列表中选择一行来更改 EditText 中的数值时，焦点从 EditText 和键盘设置为默认值，当我再次选择我的 EditText 并且一切正常时。我应该如何修复它以使焦点不跳？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:31:30.903

我不确定，但如果你的注意力发生变化，试试这个

```
holder.qty.setOnFocusChangeListener(new View.OnFocusChangeListener() {
public void onFocusChange(View v, boolean hasFocus) {
    // TODO Auto-generated method stub
    final EditText qty = (EditText) v;
    qty.setFocusableInTouchMode(true);
    qty.setFocusable(true);
    StaticData.cartdata.get(position).qty = qty.getText().toString();
} 
```

});

# javascript - 什么是 Raphael.js 等价于 JQuerys $(this) 选择器？

> ID：13027847
> 
> 赞同：0
> 
> 时间：2012-10-23T09:53:14.803
> 
> 标签：javascript, raphael, css-selectors

当我在点击事件中时，我想在单个 Raphael 元素（例如圆圈）上运行该函数。如何定位该单个元素而不是页面上的所有圆圈？

jQuery 选择器 -`$(this).animate({ opacity: 0.2}, 2000);`

我需要知道等价物`$(this)`是什么。或者是否有另一种选择该元素的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:12:30.857

如果您使用 Raphael 本身附加一个事件，那么`this`是否是 Raphael 包装的元素（即`this`默认情况下相当于 $(selector)）。

例如

```
paper.rect(50, 50, 50, 50)
    .attr('fill', '#000')
    .click(function () {
        // `this` is the rect Raphael object
        this.attr('fill', '#ff0000');  // turn the clicked rect red
    }); 
```

要实现 jQuery 样式的包装器，需要一个弱映射实现，而这些往往会泄漏。最好使用 Raphael api 将事件附加到 SVG 元素，而不是直接将事件附加到节点。

**示例：http:** [//jsfiddle.net/FyM7z/](http://jsfiddle.net/FyM7z/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:02:24.417

`this`在 jQuery 的情况下只是指 DOM 元素并且可以有很多上下文。没有等价的说法，如果你在画布元素上创建一个新的 Raphael 实例，`var instance = new Raphael(canvasEl, 100, 100 )`并且你想稍后引用画布，你必须将它缓存在一个变量中并在整个代码中使用它。

如果您正在使用 Raphael 创建路径并想要存储它们，请将它们分配给一个变量，例如 `var square = raphaelCanvas.rect(20,20,20,20)`.

# django - Django 在 AWS Elastic Beanstalk 上的 python 2.7 下运行

> ID：13027848
> 
> 赞同：6
> 
> 时间：2012-10-23T09:53:15.460
> 
> 标签：django, python-2.7, mod-wsgi, amazon-elastic-beanstalk

根据文档，AWS Elastic Beanstalk 支持 Python 2.6。我想知道是否有人使用 EBS 支持的 64 位 Linux AMI 设置了自定义 AMI，以便在 beanstalk 上的 Python 2.7 下运行 django？虽然 2.7 下设置的大多数方面可能使用 virtualenv 或更改符号链接很简单，但我担心 mod_wsgi 的亚马逊版本。我了解根据 mod_wsgi 的编译方式，将它与 Python 2.7 结合运行可能会出现问题。我也想知道是否会有任何postgreSQL问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-27T14:46:30.113

这篇博文似乎很有趣：

[让 Python 2.7 项目在 Elastic Beanstalk 上运行](http://leetreveil.roon.io/getting-a-python-2-7-project-running-on-elastic-beanstalk)

作者还提供了一个示例项目进行测试：

[https://github.com/leetreveil/elasticbeanstalk-python27](https://github.com/leetreveil/elasticbeanstalk-python27)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-08T06:25:07.960

今天（2013 年 11 月 8 日），我检查了 AWS 支持 Python 2.7 AMI。尽管如此，文档仍然没有正确更新。请尝试使用 eb CLI 工具，然后您可以找到以下 AMI 选项。

```
17) 32bit Amazon Linux 2013.09 running Python 2.7
18) 64bit Amazon Linux 2013.09 running Python 2.7 
```

使用 Python 2.7 不再麻烦！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T13:07:14.100

为了绕过`mod_wsgi`限制，您可以将应用程序部署在您自己的 wsgi 容器（如 uWSGI）下，并向 apache 添加配置以充当 WSGI 容器的反向代理。

您可以使用 container_commands 将您的 apache 配置文件放在 /etc/httpd/...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T11:29:37.823

最后，我使用 Python 2.7 构建了 mod_wsgi。该文档很容易理解：[http ://code.google.com/p/modwsgi/wiki/QuickInstallationGuide](http://code.google.com/p/modwsgi/wiki/QuickInstallationGuide)

然而，最近，我从 Amazon Linux AMI 切换到了官方的 ubuntu AMI：[https ://help.ubuntu.com/community/EC2StartersGuide](https://help.ubuntu.com/community/EC2StartersGuide)

将实例添加到负载均衡器并使用 ubuntu ami 连接到 RDS 非常容易，我认为不需要坚持使用 Amazon Linux AMI 和 beanstalk，我发现它们相当有限制。

# sql - DQL 中的等价语法：将部分 sql 查询转换为 DQL (Doctrine 1.2)

> ID：13027851
> 
> 赞同：0
> 
> 时间：2012-10-23T09:53:25.230
> 
> 标签：sql, doctrine, dql

我正在将一个非常旧的查询从 SQL 转换为 DQL，部分查询看起来很混乱，但需要完成。

```
SELECT......
substr( content, locate( 's:7:\"country\";s:', content ) +19, 
right( substr( content,
locate( 's:7:\"country\";s:', content ) , 17 ) , 1 ) ) AS country_code, 
```

是否可以将其转换为 DQL？我不是指实际的转换工具，而是 DQL 中的等效语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:58:22.603

请参考这个，sql到dql的转换

[http://tech.groups.yahoo.com/group/documentum-users/message/27959](http://tech.groups.yahoo.com/group/documentum-users/message/27959)

# javascript - 域名的JavaScript正则表达式验证？

> ID：13027854
> 
> 赞同：9
> 
> 时间：2012-10-23T09:53:34.053
> 
> 标签：javascript

如何在 JavaScript 中使用**正则表达式**`valid domain name`检查和？`username`

 **```
function validate()
{
    var patt1=new RegExp(/^[a-zA-Z0-9._-]+\\[a-zA-Z0-9.-]$/);

    var text= document.getElementById('text1').value;

    alert(patt1.test(text));
} 
```

但这对我不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T12:46:43.387

```
function CheckIsValidDomain(domain) { 
    var re = new RegExp(/^((?:(?:(?:\w[\.\-\+]?)*)\w)+)((?:(?:(?:\w[\.\-\+]?){0,62})\w)+)\.(\w{2,6})$/); 
    return domain.match(re);
} 
```

试试这个它对我的工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T09:56:23.923

不要将[`RegExp`构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)与[正则表达式文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#Creating_a_Regular_Expression)混淆。使用任一

```
/^[a-zA-Z0-9._-]+\\[a-zA-Z0-9.-]$/ 
```

或者

```
new RegExp("^[a-zA-Z0-9._-]+\\\\[a-zA-Z0-9.-]$"); 
```

不知道反斜杠在那里做什么，顺便说一句。你想匹配一个点吗？在字面上，使用`\.`，在字符串中使用`\\.`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-05T09:25:11.697

用这个：

```
<script>
    function frmValidate() {
        var val = document.frmDomin.name.value;
        if (/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/.test(val)) {
            alert("Valid Domain Name");
            return true;
        } else {
            alert("Enter Valid Domain Name");
            val.name.focus();
            return false;
        }
    }
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T09:58:24.313

检查这个：[http ://shauninman.com/archive/2006/05/08/validating_domain_names](http://shauninman.com/archive/2006/05/08/validating_domain_names)

```
/^([a-z0-9]([-a-z0-9]*[a-z0-9])?\\.)+((a[cdefgilmnoqrstuwxz]|aero|arpa)|(b[abdefghijmnorstvwyz]|biz)|(c[acdfghiklmnorsuvxyz]|cat|com|coop)|d[ejkmoz]|(e[ceghrstu]|edu)|f[ijkmor]|(g[abdefghilmnpqrstuwy]|gov)|h[kmnrtu]|(i[delmnoqrst]|info|int)|(j[emop]|jobs)|k[eghimnprwyz]|l[abcikrstuvy]|(m[acdghklmnopqrstuvwxyz]|mil|mobi|museum)|(n[acefgilopruz]|name|net)|(om|org)|(p[aefghklmnrstwy]|pro)|qa|r[eouw]|s[abcdeghijklmnortvyz]|(t[cdfghjklmnoprtvwz]|travel)|u[agkmsyz]|v[aceginu]|w[fs]|y[etu]|z[amw])$/i 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-12T07:58:31.860

此代码也支持子域：

```
^(([a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]|[a-zA-Z0-9])\.)*[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$ 
```**

# cmis - FileNet CMIS：尽管按 id 选择了一个，但返回了两个存储库

> ID：13027857
> 
> 赞同：0
> 
> 时间：2012-10-23T09:53:47.493
> 
> 标签：cmis, filenet-p8, filenet

我有一个 FileNet p8 服务器，其中包含 2 个 CMIS 存储库：`RepoA`和`RepoB`.

我想使用`RepositoryId`session 参数选择一个或另一个，但我总是以 2 个存储库结束：

```
var cmisParameters = new Dictionary<string, string>();
cmisParameters[SessionParameter.BindingType] = BindingType.AtomPub;
cmisParameters[SessionParameter.AtomPubUrl] = "myurl";
cmisParameters[SessionParameter.User] = "myuser";
cmisParameters[SessionParameter.Password] = "mypassword";
cmisParameters[SessionParameter.RepositoryId] = "RepoB";

SessionFactory factory = SessionFactory.NewInstance();
IList<IRepository> repositories = factory.GetRepositories(cmisParameters);
foreach (var repository in repositories)
{
    Console.WriteLine(repository.Id);
} 
```

输出是：

```
RepoA
RepoB 
```

我指定了，`RepositoryId`所以我认为输出应该只是`RepoB`.

这是一个已知的 FileNet 错误吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:01:53.173

SessionFactory 的 GetRepositories() 方法会忽略参数映射的存储库 ID，并返回所有可用的存储库。如果您没有关于给定端点上现有存储库的信息，这很有用。

因此，如果您知道目标存储库的 ID，则不需要全部获取它们。在这种情况下，您可以简单地使用 CreateSession() 方法。

```
factory.CreateSession(cmisParameters); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:21:36.680

现在我只使用下面的解决方法。

任何更好的解决方案都非常受欢迎！

```
IList<IRepository> repositories = factory.GetRepositories(cmisParameters);
IRepository repository = null;
// Get the repository.
if (repositories.Count == 1)
{
    // Normal case
    repository = factory.GetRepositories(cmisParameters)[0];
}
else
{
    // Workaround for FileNet
    Console.WriteLine("Sync", "Unexpected nb of repos: " + repositories.Count);
    string repositoryId = cmisParameters[SessionParameter.RepositoryId];
    foreach (IRepository potentialRepository in repositories)
    {
        if(potentialRepository.Id.Equals(repositoryId))
        {
            repository = potentialRepository;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:05:20.537

有多个存储库实际上是正常情况。仅公开一个存储库的端点是例外。FileNet 在此处遵循 CMIS 规范。

# java - 如何使用 Spring-mvc 中的按钮调用控制器？

> ID：13027862
> 
> 赞同：3
> 
> 时间：2012-10-23T09:54:13.010
> 
> 标签：java, forms, spring, spring-mvc

我正在使用 Spring MVC。我有一个主页叫`index.jsp`

```
<a href="register.htm"> Register an Employee</a>
<input type="button" onclick="register.htm" value="REGISTER"> 
```

当我点击一个链接`Register an Employee`时，流程进入`handleRequest`但当我点击提交按钮时没有任何反应。

我的 handleRequest 方法看起来像这样。

```
@RequestMapping(value = "/register.htm", method = RequestMethod.GET)
    public ModelAndView handleRequest(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        ModelAndView mav = new ModelAndView("register");
        return mav;     
    } 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-23T10:42:18.173

尝试这个..

```
<input type="button"  onclick="location.href='/register.htm'" value="Register" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T09:26:30.040

应避免使用 location.href，因为它使用 RequestMethod.GET 而不是 RequestMethod.POST。如果您使用 GET 方法提交表单，这是一个安全漏洞。使用以下示例： [http ://www.mkyong.com/spring-mvc/spring-mvc-handling-multipage-forms-with-abstractwizardformcontroller/](http://www.mkyong.com/spring-mvc/spring-mvc-handling-multipage-forms-with-abstractwizardformcontroller/)

# vba - 根据变量的类型做某事

> ID：13027864
> 
> 赞同：3
> 
> 时间：2012-10-23T09:54:33.577
> 
> 标签：vba, excel

我在 VBA 中有一个通常返回数组的函数。如果没有要返回的内容，则返回一个空变量 ( `b = empty`)。我有一些代码可以循环遍历数组，但如果变量不是数组，则会出现错误。如何做出不会导致自身错误的 if 语句。我努力了

```
if not b = empty then
'do the loop
end if 
```

但是当 b 是一个数组`b = null`时`b = nothing`会出错`b(1,1) = ""`

检查这个的最好方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T09:59:21.920

要测试变量是否为空，请使用[IsEmpty](http://msdn.microsoft.com/en-us/library/office/gg264227.aspx)函数。

```
If IsEmpty(b) Then
    Debug.Print "b is Empty"
End If 
```

要测试变量是否为数组，请使用[VarType](http://msdn.microsoft.com/en-us/library/office/gg278470.aspx)函数。

```
If VarType(b) And vbArray Then
    Debug.Print "b is an array"
End If 
```

# c# - 将 C# 异步 DNS 地址解析操作的结果添加到 UI 元素

> ID：13027868
> 
> 赞同：0
> 
> 时间：2012-10-23T09:54:51.733
> 
> 标签：c#, .net, asynchronous

我正在尝试使用 C# 将 IP 地址异步解析为主机名，然后将结果添加到 ListBox。异步操作工作正常，但我无法将解析的名称添加到列表框中，因为另一个线程拥有它。如何绕过此问题并将解析的名称添加到列表框中。

这是我到目前为止所做的

```
public static ManualResetEvent GetHostEntryFinished = new ManualResetEvent(false);            

            private void AsyncDNSResolver(string IPString)
        {
        GetHostEntryFinished.Reset();

        IPHostEntry host = new IPHostEntry();
        host.AddressList = new IPAddress[] { IPAddress.Parse(IPString) };
        Dns.BeginGetHostEntry(host.AddressList[0], new AsyncCallback(GetHostEntryCallback), host);

        GetHostEntryFinished.WaitOne();

    }

    public static void GetHostEntryCallback(IAsyncResult ar)
    {
        IPHostEntry host = (IPHostEntry)ar.AsyncState;
        while (!ar.IsCompleted) ;
        host = Dns.EndGetHostEntry(ar);
       lsvHosts.items.add(host.HostName);
     GetHostEntryFinished.Set();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:28:16.333

如果您想在单独的线程上执行昂贵的活动并在等待结果的同时继续工作，您可以使用此代码片段。

```
static void Main(string[] args)
{
    Console.WriteLine("About to call DNS");
    ResolveDnsAndPerformWorkWhileWaiting("74.125.237.112");
    Console.Read();
}

public static void ResolveDnsAndPerformWorkWhileWaiting(string ipaddress)
{
    var task = new Task<string>(() =>
        {
            var host = new IPHostEntry { AddressList = new[] { IPAddress.Parse(ipaddress) } };
            var result = Dns.GetHostEntry(host.AddressList[0]);
            return result.HostName;
        });

    // execute the work on another thread
    task.Start();

    // do other stuff

    // use the results (if the task has not finished the .Result property will hold until completed)
    var resolvedAddress = task.Result;
    Console.WriteLine("Resolved address:" + resolvedAddress);
} 
```

如果您使用的是 Windows 窗体应用程序，那么最简单的方法是使用`BackgroundWorker`，这是一个代码示例

```
static void Main(string[] args)
{
    Console.WriteLine("About to call DNS");

    var worker = new BackgroundWorker();
    worker.DoWork += worker_DoWork;
    worker.RunWorkerCompleted += worker_RunWorkerCompleted;
    worker.RunWorkerAsync("74.125.237.112");

    Console.Read();
}

static void worker_DoWork(object sender, DoWorkEventArgs e)
{
    var host = new IPHostEntry { AddressList = new[] { IPAddress.Parse((string)e.Argument) } };
    var result = Dns.GetHostEntry(host.AddressList[0]);

    e.Result = result.HostName;
}

static void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    // You could set your UI control here like label1.text = (string)e.Result
    Console.WriteLine((string)e.Result);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:18:32.777

目的是您将继续执行`GetHostEntryCallback`（在 内可能是匿名的`AsyncDNSResolver`）并引发另一个事件以将数据返回给调用者。这就是您可用的异步编程模型的本质（C# 5 之前的版本）。在这种情况下，`AsyncDNSResolver`无法返回`string`，因为它在退出时将不可用。

您的选择归结为：

1.  通过引发事件（或调用另一个回调）来拥抱异步，而不是尝试从`AsyncDNSResolver`
2.  停止使用异步方法并改用阻塞[`Dns.GetHostEntry`](http://msdn.microsoft.com/en-us/library/ms143998%28v=VS.80%29.aspx)。

# javascript - javascript replaceWith + classid

> ID：13027869
> 
> 赞同：0
> 
> 时间：2012-10-23T09:54:53.200
> 
> 标签：javascript, jquery, html, class, this

似乎我遇到了一些问题，我很困惑为什么......

编码：

```
$(".post-click").click(function()
{
    var classid = $(this).attr('id');
    var postid = $(this).attr('id');
    postid = postid.replace('post-click-id_', '');

    alert("ID: " + classid + " PostID: " + postid);

    $(this).replaceWith('<img SRC="assets/img/refresh.gif" ALT="" id="' + classid + '">');

    $.post("likepost.php", { postid: postid } , function(data)
    {
        $(document).foundationTooltips();

        alert(data);
            $("#" + classid).replaceWith(data);

            var classes = $("#" + classid).attr('class');

            alert(classes);
    });
}); 
```

现在，这是做什么的，当您单击它时，它会替换您单击的 ID 的文本。现在，最重要的是我得到了这个：

```
$(".post-click").click(function()
{ 
```

替换后似乎不再调用 post-click。为了确保我用好的类代替了它，我把'var classes = ...'放在那里。它提醒点击后类在替换中。

替换为：<a class="post-click" href="#" >test</a >";

任何想法为什么 jQuery 不再调用后点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:01:35.510

When using `replaceWith`, you are replacing the DOM element, complete with its event bindings.

Luckily, jQuery provides `.on` which allows you to use event delegation (as opposed to looping through the new content rebinding your events).

You apply it to a parent node of post-click and then specify the class in the arguments.

e.g.

```
$(".some-parent-elem").on("click", ".post-click", 
       function (){...do stuff on click...}); 
```

How this works is that it listens for clicks on .some-parent-elem (which due to event bubbling will mean it fires when you click on a child of that element) and then if the original target element that was clicked has the class of post-click, it runs the function.

# xml - 使用 XSLT 删除简单 XML 文件中的重复项

> ID：13027873
> 
> 赞同：3
> 
> 时间：2012-10-23T09:55:01.410
> 
> 标签：xml, xslt, duplicates

我是 XSLT 的新手，在从简单的 XML 文件中删除重复项时遇到问题。花了很多时间试图得到它，但它永远不会完全正确。这是源文件：

```
<?xml version="1.0" encoding="UTF-16"?>
<language>
    <lang name="welcome">welcom</lang>
    <lang name="open">Open</lang>
    <lang name="close">Close</lang>
    <lang name="welcome">Welcome</lang>
    <lang name="copy">Copy</lang>
</language> 
```

所需的输出是这样的：

```
<?xml version="1.0" encoding="UTF-16"?>
<language>
    <lang name="open">Open</lang>
    <lang name="close">Close</lang>
    <lang name="welcome">Welcome</lang>
    <lang name="copy">Copy</lang>
</language> 
```

实际文件比这个大得多，“lang”和“name”可能会在文件的后面发生变化，我只想保留最后一个副本。基本上，如果标签和属性重复，只保留最后一个条目。我希望 XSLT 1.0 可以做到这一点。如果没有，我总是可以使用多个脚本，以防 lang 确实更改为其他内容。先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T10:08:30.750

以下 XSLT 应该回答您的问题：

```
 <?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="lang[@name=following-sibling::lang/@name]"/>
</xsl:stylesheet> 
```

这样，您可以过滤每个具有相同属性值的`lang`同级元素的元素。`lang``name`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:44:16.507

**比当前接受的答案的二次时间复杂度 (O(N^2)) 更通用和更有效（线性）的解决方案。这在处理大型 XML 文档时尤其重要，因为 OP 告诉我们实际文档是**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kLangByName" match="lang" use="@name"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "lang[not(generate-id()
      =
       generate-id(key('kLangByName', @name)[last()]))]"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<language>
    <lang name="welcome">welcom</lang>
    <lang name="open">Open</lang>
    <lang name="close">Close</lang>
    <lang name="welcome">Welcome</lang>
    <lang name="copy">Copy</lang>
</language> 
```

**产生了想要的正确结果**：

```
<language>
   <lang name="open">Open</lang>
   <lang name="close">Close</lang>
   <lang name="welcome">Welcome</lang>
   <lang name="copy">Copy</lang>
</language> 
```

**说明**：

使用**[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

# git - 由于公司代理证书被更改，Git 推送失败

> ID：13027876
> 
> 赞同：3
> 
> 时间：2012-10-23T09:55:23.917
> 
> 标签：git, curl, https, ssl-certificate, ubuntu-12.04

最近，公司代理的证书发生了变化。从那以后，我一直面临使用 git 的问题。当我尝试执行 a`git push`时，出现以下错误：

```
error: gnutls_handshake() failed: The Diffie-Hellman prime sent by the server is not acceptable (not long enough). while accessing https://github.com/me/myproj.git/info/refs
fatal: HTTP request failed 
```

我可以切换到使用 HTTP 推送或关闭 sslVerify，`git config --global http.sslVerify false`但他们坚持我***只***使用HTTPS。

我有一个*.cer*证书文件，我被要求在我的 Ubuntu 桌面（Ubuntu 12.04）中安装系统范围，但我无法找到一种方法来做到这一点。请帮忙 ！

这是我执行后获得的*curl*日志`export GIT_CURL_VERBOSE=1`：

```
* Couldn't find host github.com in the .netrc file; using defaults
* About to connect() to proxy proxy.mycompany.com port 5150 (#0)
*   Trying 10.226.xx.yyy... * Connected to proxy.mycompany.com (10.226.xx.yyy) port 5150 (#0)
* Establish HTTP proxy tunnel to github.com:443
* Proxy auth using Basic with user 'me'
> CONNECT github.com:443 HTTP/1.1
Host: github.com:443
Proxy-Authorization: Basic MjQABCD3Og==
User-Agent: git/1.7.9.5
Proxy-Connection: Keep-Alive
Pragma: no-cache

< HTTP/1.1 200 Connection established
< Date: Tue, 23 Oct 2012 11:45:37 GMT
< Age: 0
< Proxy-Connection: Keep-Alive
< Via: 1.0 MYCOMPANYSERVER.MYCOMPANY.COM
< 
* Proxy replied OK to CONNECT request
* found 1 certificates in /etc/ssl/certs/cert.crt
* gnutls_handshake() failed: The Diffie-Hellman prime sent by the server is not acceptable (not long enough).
* Closing connection #0
* Couldn't find host github.com in the .netrc file; using defaults
* About to connect() to proxy proxy.mycompany.com port 5150 (#0)
*   Trying 10.226.xx.yyy... * Connected to proxy.mycompany.com (10.226.xx.yyy) port 5150 (#0)
* Establish HTTP proxy tunnel to github.com:443
* Proxy auth using Basic with user 'me'
> CONNECT github.com:443 HTTP/1.1
Host: github.com:443
Proxy-Authorization: Basic MjQABCD3Og==
User-Agent: git/1.7.9.5
Proxy-Connection: Keep-Alive
Pragma: no-cache

< HTTP/1.1 200 Connection established
< Date: Tue, 23 Oct 2012 11:45:37 GMT
< Age: 0
< Proxy-Connection: Keep-Alive
< Via: 1.0 MYCOMPANYSERVER.MYCOMPANY.COM
< 
* Proxy replied OK to CONNECT request
* found 1 certificates in /etc/ssl/certs/cert.crt
* gnutls_handshake() failed: The Diffie-Hellman prime sent by the server is not acceptable (not long enough).
* Closing connection #0
error: gnutls_handshake() failed: The Diffie-Hellman prime sent by the server is not acceptable (not long enough). while accessing https://github.com/me/myproject.git/info/refs
fatal: HTTP request failed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T04:53:48.667

您的连接`/etc/ssl/certs/cert.crt`用作证书。

您可以尝试复制您拥有的证书文件，`/etc/ssl/certs/`然后`c_rehash .`以 root 用户身份在该目录中发出命令（注意点！）。

# python - django中的日期查询

> ID：13027880
> 
> 赞同：0
> 
> 时间：2012-10-23T09:55:42.657
> 
> 标签：python, django, django-queryset

我有一个带有两个日期字段 start_date 和 end_date 的模型

我希望查询此模型以获取介于两个给定日期之间的所有模型实例。我还希望模型与此范围重叠。

这两个给定日期是一个月的开始日期和结束日期。

我试过做类似的事情：

```
Model.objects.filter(Q(start_date__range=[start_range, end_range])|Q(end_date__range=[start_range, end_range])) 
```

但是，如果 start_date 和 end_date 相隔超过一个月，则此操作失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:09:40.193

这是怎么失败的？不返回范围优于一个月的对象？

我不明白为什么你的方法不起作用，但你总是可以尝试使用：

```
Model.objects.filter(Q(start_date__gt=start_range)|Q(end_date__lt=end_range)) 
```

只要 start_date 低于 end_date 就可以工作，但这应该在表单验证中处理。

另一个想法，但在数据库查询方面可能效率不高，是过滤**掉**根本**不在**范围内的对象。从逻辑的角度来看，这似乎更有效，但同样，可能不是在数据大小和数据库查询方面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T10:07:20.643

```
Model.objects.filter(start_date__gt=start_range).filter(end_date__lt=end_range) 
```

这就是你所需要的

# java - 从命令行清理和构建 Netbeans java 项目

> ID：13027884
> 
> 赞同：1
> 
> 时间：2012-10-23T09:55:46.450
> 
> 标签：java, netbeans, ant, command-line

我在 Netbeans 下有一个 java 应用程序项目 (ant)，我想使用 javac 或 ant 之类的东西以编程方式调用类似于 Netbeans 的 clean and build (clean the project and than build it) 命令的操作。我该怎么做？我已经看过[这个](https://stackoverflow.com/questions/7339886/clean-build-java-command-line)，但它对我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:14:08.720

用于清理和构建的 Netbeans 使用[Ant](http://ant.apache.org/)（如果它不是 Maven 项目）。对它进行一些研究（尝试[编写一个简单](http://ant.apache.org/manual/using.html)的构建文件），您将能够通过为它编写`Ant`构建脚本来对您的项目做同样的事情。

# c++ - 将 C++ 中的 operator== 翻译成 Objective-C

> ID：13027896
> 
> 赞同：3
> 
> 时间：2012-10-23T09:56:34.330
> 
> 标签：c++, objective-c, operators

我正在将一些 C++ 代码转录成 ObjC。我正在查看的 operator==() 将其私有成员一一进行比较，并在它们都为真时返回真。

**ObjC 中 operator==() 的等效实现是什么？**

通过浏览，我在 ObjC 中看到：

*   -是平等的
*   -isEqualTo
*   -就好像
*   ==（内置？不可覆盖？）
*   还有其他我想念的吗？

*这些方法的协议是什么？（深度或浅度比较等...？）我应该使用哪一个来替换比较其所有成员的 operator==()？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:01:06.367

`isEqual:`可能是您想要覆盖的内容。还要确保`hash`为两个相等的对象返回相同的值。

没有真正的比较协议。做任何对你的班级有意义的事情。如果您要比较您的所有成员，`operator==()`那将是深度比较，是的，使用`isEqual:`.

# ios - 自定义导航栏图像周围的白色像素

> ID：13027898
> 
> 赞同：2
> 
> 时间：2012-10-23T09:56:43.377
> 
> 标签：ios, uinavigationbar, uibarbuttonitem

在我的 iOS 5+ 应用程序中，我使用自定义导航栏图像和自定义导航栏按钮。

首先，这是我告诉我的应用程序使用图像的方式：

在`AppDelegate.m`：

```
UIImage *navBarImage = [UIImage imageNamed:@"Navbar"];
[[UINavigationBar appearance] setBackgroundImage:navBarImage forBarMetrics:UIBarMetricsDefault];

UIImage *barButton = [[UIImage imageNamed:@"Nav-button"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 6, 0, 6)];
[[UIBarButtonItem appearance] setBackgroundImage:barButton forState:UIControlStateNormal
                                      barMetrics:UIBarMetricsDefault]; 
```

因此，图像被使用。伟大的。但是，发生了几件事：

• 首先，在我的按钮上，在底角下，出现了几个白色像素（它们不在原始图像上，这是肯定的）。我还使用了一个自定义的后退按钮，同样的事情也会发生。这在 iOS 6 下*似乎*比在 iOS 5 下更明显。

• 当我打开一个模态VC 时，导航栏“填充到状态栏”并带有白色像素。仅适用于模态VC。

以下是情况截图。

![iOS 5 - 主要](../Images/45bc1091483983a2cd47851a4141925a.png)

iOS 5，主 VC。

![iOS 5 - 模态](../Images/b31f1ced9e8293b36d1e655865e527ba.png)

iOS 5，模态 VC。

![iOS 6 - 主要](../Images/ed62f2a41f1e4c3c75a94a9ec673e2cc.png)

iOS 6，主要 VC。

![iOS 6 - 模态](../Images/19bd696ccd479bac4a88cd603d0dcdaf.png)

iOS 6，模态 VC。

那么，我能做些什么呢？按钮下方的白色像素不是很明显（后退按钮要多一点），但我真的想要一个漂亮的应用程序设计，这根本没有贡献..

关于模态 VC，我可以使用“矩形”图像，它可以覆盖白色像素，但同样，关于设计一致性，我更喜欢只使用一个导航栏..

与往常一样，非常感谢任何解释/解决方案/提示！;)

谢谢。

* * *

编辑 ：

我刚刚注意到，在 iOS 6 下，导航栏顶部的白色像素是圆形的，就像 iOS 6 中的导航栏一样..奇怪.. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:10:07.973

嗯！仅出于测试目的，您可以下载以下导航栏背景的[示例图像并尝试使用此图像吗？](http://cl.ly/2a0H3N3J123r1r1A1C1D)现在让我们看看这张图片的外观。

我只是在猜测，但我想您的图像对于导航栏尺寸来说并不是完美的像素！可能比导航栏的最佳高度低几个像素。

# ruby-on-rails-3.2 - 如何从另一个表中检索值？

> ID：13027904
> 
> 赞同：0
> 
> 时间：2012-10-23T09:56:55.700
> 
> 标签：ruby-on-rails-3.2

让我解释一下场景..!! 我已经使用设计进行身份验证。数据库中的设计表被命名为“用户”。现在我有另一个名为“book”的表，用于存储用户 ID。

```
class CreateBooks < ActiveRecord::Migration
def change
create_table :books do |t|
  t.integer "user_id", :limit =>5
  t.string "book_name", :limit => 50
  t.integer "edition", :limit => 5
  t.string "author", :limit => 30
  t.string "branch", :limit => 30
  t.string "publisher", :limit => 50
  t.integer "year", :limit => 10     
  t.text "details"
  t.timestamps
end
add_index :books, "user_id"
end
end 
```

我将用户 ID 存储在书表中，以便我无法显示该用户可以使用这本书。但是在书页上只显示用户 ID 没有意义，所以我创建了另一个名为 s_user 的表，

```
class CreateSUsers < ActiveRecord::Migration
def change
create_table :s_users do |t|
  t.integer "user_id", :limit => 5
  t.string "fullname", :limit => 25            
  t.string "email", :default => "", :null => false
  t.string "hashed_password", :limit => 40
  t.string "salt", :limit => 40
  t.string "address",:limit => 25
  t.text "details"
  t.timestamps
end
add_index :s_users, "user_id"
end
end 
```

它存储了用户的完整信息，例如他/她的姓名、地址、电话号码。我在书和用户之间建立的关系是对多的，对用户与 s_user 的关系是一对一的。所以我不知道如何显示存储在 s_user 表中的用户信息。我在这里写了什么：在控制器中

```
@books = Book.all 
```

在视图中

```
 <tr>
                        <th>S.No</th>
                        <th>Book Name</th>
                        <th>Year </th> 
                        <th>Owner id</th>
                        <th>Owner Details</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% @books.each do |b| %>                                        
                    <tr>
                        <td><%= b.id%></td>
                        <td><%= b.book_name%></td>
                        <td><%= b.year%></td>
                        <td><%= b.user_id%></td>

                    </tr>                                               
                    <%end%> 
```

现在在所有者详细信息下，我想显示用户详细信息。我没有得到如何显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:01:21.243

看到这种[关系](http://guides.rubyonrails.org/association_basics.html)

如果你给关系`belongs_to`和`has_many`

例如

```
class User < ActiveRecord::Base
  has_many :books
end

class Book < ActiveRecord::Base
  belongs_to :user
end 
```

现在您可以通过使用`@user.books`获取该特定用户的所有书籍来访问

用于创建您可以使用的书籍

```
@user.books.build 
```

这样在您的书籍表中 user_id 会自动出现

您还可以从书中获取用户详细信息，例如

```
@user = @book.user 
```

# stanford-nlp - 斯坦福解析器 的标签

> ID：13027908
> 
> 赞同：20
> 
> 时间：2012-10-23T09:57:14.603
> 
> 标签：stanford-nlp

我刚开始使用斯坦福解析器，但我不太了解标签。这可能是一个愚蠢的问题，但谁能告诉我 SBARQ 和 SQ 标签代表什么，我在哪里可以找到它们的完整列表？我知道 Penn Treebank 的样子，但它们略有不同。

```
Sentence: What is the highest waterfall in the United States ?

(ROOT
  (SBARQ
    (WHNP (WP What))
    (SQ (VBZ is)
      (NP
        (NP (DT the) (JJS highest) (NN waterfall))
        (PP (IN in)
          (NP (DT the) (NNP United) (NNPS States)))))
    (. ?))) 
```

我查看了 Stanford Parser 网站并阅读了其中列出的一些期刊，但没有对前面提到的标签的解释。我找到了描述所有使用的依赖项的手册，但它没有解释我在寻找什么。谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-23T10:35:33.643

[该参考资料](https://gist.github.com/nlothian/9240750)看起来有一个广泛的列表 - 不确定它是否完整。

具体来说，它列出了您要询问的内容：

```
SBARQ - Direct question introduced by a wh-word or a wh-phrase. Indirect 
        questions and relative clauses should be bracketed as SBAR, not SBARQ.
SQ    - Inverted yes/no question, or main clause of a wh-question, 
        following the wh-phrase in SBARQ. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-28T20:49:03.533

要查看整个列表，只需打印解析器的 tagIndex

```
 LexicalizedParser lp =  LexicalizedParser.loadModel();
    System.out.println(lp.tagIndex); // print the tag index 
```

# mysql - MySQL 查询执行时间比较

> ID：13027911
> 
> 赞同：0
> 
> 时间：2012-10-23T09:57:21.533
> 
> 标签：mysql, performance, database-performance

我在我的 mysql 数据库中做一个 select qry，其中包含“order by field desc”。我在 16 分钟内得到结果集。

现在在同一个 qry 中，我输入“order by field desc limit 5”来获取前 5 条记录。但我的 qry 运行了 20 多分钟。

我怎样才能使执行更快？有任何想法吗？

谢谢-jithkaran

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:03:24.037

尝试在您的选择查询中使用 top 命令

```
select top(5) * from table order by field desc 
```

# string - 修剪字符串的后缀或扩展名？

> ID：13027912
> 
> 赞同：83
> 
> 时间：2012-10-23T09:57:30.297
> 
> 标签：string, go

例如，我有一个字符串，由“sample.zip”组成。如何使用字符串包或其他方法删除“.zip”扩展名？

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2014-02-03T22:05:19.420

尝试：

```
basename := "hello.blah"
name := strings.TrimSuffix(basename, filepath.Ext(basename)) 
```

TrimSuffix 基本上告诉它去除尾随字符串，即带有点的扩展名。

[字符串#TrimSuffix](//golang.org/pkg/strings#TrimSuffix)

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2012-10-23T10:01:18.443

**Edit: Go has moved on. Please see [Keith's answer](https://stackoverflow.com/a/21538822/83264).**

Use [path/filepath.Ext](http://golang.org/pkg/path/filepath/#Ext) to get the extension. You can then use the length of the extension to retrieve the substring minus the extension.

```
var filename = "hello.blah"
var extension = filepath.Ext(filename)
var name = filename[0:len(filename)-len(extension)] 
```

Alternatively you could use [strings.LastIndex](http://golang.org/pkg/strings/#example_LastIndex) to find the last period (.) but this may be a little more fragile in that there will be edge cases (e.g. no extension) that `filepath.Ext` handles that you may need to code for explicitly, or if Go were to be run on a theoretical O/S that uses a extension delimiter other than the period.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-16T07:03:37.660

这种方式也有效：

```
var filename = "hello.blah"
var extension = filepath.Ext(filename)
var name = TrimRight(filename, extension) 
```

但也许 Paul Ruane 的方法更有效？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-09T09:21:45.383

我正在使用 go1.14.1，`filepath.Ext`对我没用，对我没`path.Ext`问题

```
var fileName = "hello.go"
fileExtension := path.Ext(fileName)
n := strings.LastIndex(fileName, fileExtension)
fmt.Println(fileName[:n]) 
```

游乐场： https: [//play.golang.org/p/md3wAq_obNc](https://play.golang.org/p/cK6cNQM0CP6)

文档：[https ://golang.org/pkg/path/#Ext](https://golang.org/pkg/path/#Ext)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-25T01:05:19.410

这是不需要`path`or的示例`path/filepath`：

```
func BaseName(s string) string {
   n := strings.LastIndexByte(s, '.')
   if n == -1 { return s }
   return s[:n]
} 
```

它似乎也比它更快`TrimSuffix`：

```
PS C:\> go test -bench .
goos: windows
goarch: amd64
BenchmarkTrimFile-12            166413693                7.25 ns/op
BenchmarkTrimPath-12            182020058                6.56 ns/op
BenchmarkLast-12                367962712                3.28 ns/op 
```

[https://golang.org/pkg/strings#LastIndexByte](https://golang.org/pkg/strings#LastIndexByte)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-03T02:43:48.567

这只是性能更高的一行。这里是：

```
filename := strings.Split(file.Filename, ".")[0] 
```

# html - 子 div 设置为窗口的 100%，而不是父级

> ID：13027914
> 
> 赞同：0
> 
> 时间：2012-10-23T09:57:42.860
> 
> 标签：html, css

[http://dev.epicwebdesign.ca/korokriver/](http://dev.epicwebdesign.ca/korokriver/)

这是一个漫长的夜晚。我在这个页面上遇到了灰色金属 div 的问题。我希望高度是内容的 100%。当我设置它时，它被设置为窗口高度的 100%，并落在页面底部。

我在 html、body 和通向这个的每个 div（站点、副本、内容、金属）上设置了 100% 的高度

我应该澄清一下，我解释得很糟糕。

我希望灰色子 div 是网站的高度，以及父 div 的高度。不是内容的高度。

尽管 div 不同，但其他页面也会发生这种情况。

[http://dev.epicwebdesign.ca/korokriver/?page=geologicalconsultants](http://dev.epicwebdesign.ca/korokriver/?page=geologicalconsultants)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:01:08.223

You could add `overflow:hidden` on `#content`. That should do it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:06:35.807

如果您只想让 div 包装到它的内容：

删除`height:100%;`此当前设置为 100% 的窗口。

默认情况下，div 会包裹到它们的内容，除非浮动子元素没有被正确清除，因此不需要设置高度。

您可以使用 jQuery 将子项的高度设置为父项的高度，如下所示。

```
$('#child').height($('#parent').height()); 
```

[http://jsfiddle.net/ZXc3P/](http://jsfiddle.net/ZXc3P/)

# android - Android SDK 和 Windows 8

> ID：13027920
> 
> 赞同：0
> 
> 时间：2012-10-23T09:58:04.880
> 
> 标签：android, avd

我已经安装了 Windows 8（全新安装）和 android SDK。当我尝试启动任何 AVD 时，我收到此错误：

```
Starting emulator for AVD 'Android4'
Failed to create Context 0x3005
emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB 
```

我已经尝试了我在 stackoverflow 中找到的所有内容：GPU emulation=yes on AVD, copying libEGL_translator.dll,libGLES_CM_translator.dll, libGLES_V2_translator.dll, libOpenglRender.dll from android-sdk\tolos\lib to android-sdk\tolos问题还在继续。

如果我从命令行运行“emulator”或“emulator-arm”，我会得到同样的错误。

在此之前，我在同一台计算机上安装了 Windows 7，并且工作正常。Android SDK 在 Windows 8 上工作 20.0.3？可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:43:47.223

您为什么不尝试一些新的 UNIX（全新安装）:) 好的，您在错误日志中看到了什么？我认为它的 win 8 驱动程序问题，使用 OpenGL 的驱动程序

> 无法使用软件投标程序初始化 OpenglES 仿真。

尝试 Windows 8 的新驱动程序：D 或尝试在谷歌中找到 win 8 OpenglES 问题的解决方案

# ssis - SSIS 包无法调用 Sp_ssis_addlogentry 存储过程

> ID：13027922
> 
> 赞同：2
> 
> 时间：2012-10-23T09:58:07.870
> 
> 标签：ssis

我在解决方案中的一些包无法调用 Sp_SSIS_Addlogentry 存储过程，因为没有为这些包捕获日志记录。我很震惊地看到为什么同一解决方案中的其他一些包能够记录它们的条目。

有什么解决方案可以纠正这个问题吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:33:51.813

“sp_ssis_addlogentry”需要权限。检查你的包是否有 EXECUTE 权限。（您的 SSIS 解决方案中是否有两个或多个连接？是否可以尝试使用 DBA / sa 登录执行 sp_ssis_addlogentry？）

希望它有所帮助，几个月前我遇到了这个问题，这为我解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-21T23:08:54.013

如果您启用对 SQL 数据库的包日志记录，也会发生这种情况。您应该将其配置为指向 msdb，因为它具有所有必需的表和存储的过程，然后将必要过程的执行权限应用于您正在执行包的帐户（如果从 SQL 代理运行，通常是代理帐户）。

我不确定哪些过程需要许可，但我通常会这样做：

```
USE [msdb]
GO
CREATE USER [MyDomain\svcMy_SSIS_Proxy] FOR LOGIN [MyDomain\svcMy_SSIS_Proxy]
GO
CREATE ROLE [SSIS_Executor]
GO
GRANT EXECUTE ON sp_ssis_addlogentry TO [SSIS_Executor]
GRANT EXECUTE ON sp_ssis_checkexists TO [SSIS_Executor]
GRANT EXECUTE ON sp_ssis_getfolder TO [SSIS_Executor]
GRANT EXECUTE ON sp_ssis_getpackage TO [SSIS_Executor]
GRANT EXECUTE ON sp_ssis_getpackageroles TO [SSIS_Executor]
GRANT EXECUTE ON sp_ssis_listfolders TO [SSIS_Executor]
GRANT EXECUTE ON sp_ssis_listpackages TO [SSIS_Executor]

ALTER ROLE [SSIS_Executor]
ADD MEMBER [MyDomain\svcMy_SSIS_Proxy] 
```

# bash - 脚本可以更改运行脚本的 bash 的 cwd 吗？

> ID：13027930
> 
> 赞同：1
> 
> 时间：2012-10-23T09:58:35.863
> 
> 标签：bash

这是场景，我打开一个终端，`bash`'s`cwd`是 `/home/me'，像这样：

```
[/home/me $] ls
a.sh 
```

现在我`a.sh`在 cwd 中是这样的：

```
[/home/me $] ./a.sh 
```

我想要的是，我想通过运行来改变`bash`'s ，这意味着完成后，'s不会是，`cwd``a.sh``a.sh``bash``cwd``/home/me`

```
[/home/other_dir $] 
```

我可以这样做吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:01:18.880

You can use [source](http://linux.about.com/library/cmd/blcmdln_source.htm) command which runs in the current shell's context. So all the change done in the script will be visible in the your shell.

For example:

If the content of a.sh is: `cd /usr/bin`

then executing the following will result in change in `CWD`

`$ source a.sh`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:01:21.310

For that you need to run `a.sh` without forking a subshell like this:

```
. ./a.sh 
```

This will make sure to run your script in current shell itself and and `change dir` command inside your script will be reflected in current shell.

# iphone - MKMap 不使用定义的纬度和经度

> ID：13027934
> 
> 赞同：0
> 
> 时间：2012-10-23T09:58:43.563
> 
> 标签：iphone, objective-c, ios, xcode, ios6

我有一个 TabBar 应用程序。第一个视图是调用我所有的网络服务和数据库功能的加载屏幕。然后它将 MKmap 推送到我的第一个选项卡。

![布局](../Images/6259c4d75ca5252ed6ae566c87c65725.png)

我遇到的问题是我的地图被显示为默认值，没有任何值，即使我的设置纬度和经度函数正在运行。

如果我将入口点更改为 tabBarViewController 它工作正常。经过数小时的谷歌搜索后，我无法解决这个问题。什么可能导致这种情况发生？

这是我的地图[代码](http://pastebin.com/6UgeU1Fr)。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:48:54.810

我很确定所有标签栏控制器的操作都需要在主线程上，但不确定是否包含它们。这些操作似乎在一个线程上（但不是主线程）。

这正是 Grand Central Dispatch 在 Mac OS X 和现在的 iOS 上为您提供的——访问并发几乎没有那么痛苦。

问题不在于您的地图，而是您排错了队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:47:33.007

在第一印象中，我注意到两件事。

1：`showMapView.mapType= MKMapTypeStandard;`我不确定这是否应该编译？它应该是`self.showMapView.mapType = MKMapTypeStandard`

2：你跑了`#import "MapViewController.h"`两次

如果您可以粘贴`MapViewController.h`也可能有助于调试

# algorithm - FP 作业。是否可以使用嵌套模式匹配而不是辅助函数来定义函数？

> ID：13027937
> 
> 赞同：4
> 
> 时间：2012-10-23T09:58:52.813
> 
> 标签：algorithm, functional-programming, ocaml

我正在解决 ocaml 中哈佛 CS 51 编程课程的编程课程。问题是定义一个函数，该函数可以将字符列表压缩为对列表，其中每对包含列表中字符和字符本身的许多后续出现，即在将此函数应用于列表 ['a' ;'a';'a';'a';'a';'b';'b';'b';'c';'d';'d';'d';'d'] 我们应该得到 [(5,'a');(3,'b');(1,'c');(4,'d')] 的列表。我想出了使用辅助函数 go 来解决这个问题的函数：

```
let to_run_length (lst : char list) : (int*char) list =
  let rec go i s lst1 =
    match lst1 with
      | [] -> [(i,s)]
      | (x::xs) when s <> x ->  (i,s) :: go 0 x lst1
      | (x::xs) -> go (i + 1) s xs
        in match lst with
          | x :: xs -> go 0 x lst
          | [] -> [] 
```

我的问题是：是否可以在不定义辅助函数 go 的情况下使用嵌套模式匹配定义递归函数 to_run_length。在这种情况下，我们如何存储已通过元素的计数器状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T10:11:44.420

您实现的方式`to_run_length`是正确的、可读的和高效的。这是一个很好的解决方案。（只挑剔：后面的缩进`in`是错误的）

如果要避免中间函数，则必须改用递归调用返回中的信息。这可以用稍微抽象一点的方式来描述：

*   空列表的运行长度编码是空列表
*   列表的运行长度编码`x::xs`是，
    *   如果运行长度编码以`xs`开头`x`，则...
    *   如果不是，则`(x,1) ::`运行长度编码为`xs`

（我故意不提供源代码让您了解细节，但不幸的是，这些相对简单的功能没有太多可隐藏的。）

深思：在考虑尾递归和非尾递归函数时，您通常会遇到这种技术（我所做的类似于将 tail-rec 函数转换为非尾递归形式）。在这种特殊情况下，您的原始函数不是尾递归的。当参数/结果流仅“向下”递归调用（您返回它们，而不是重用它们来构建更大的结果）时，函数是尾递归的。在我的函数中，参数/结果流只会“向上”递归调用（调用具有尽可能少的信息，并且所有代码逻辑都是通过检查结果来完成的）。在您的实现中，流既“向下”（整数计数器）又“向上”（编码结果）。

编辑：根据原始海报的要求，这是我的解决方案：

```
let rec run_length = function
  | [] -> []
  | x::xs ->
    match run_length xs with
      | (n,y)::ys when x = y -> (n+1,x)::ys
      | res -> (1,x)::res 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:15:03.230

我认为编写这个函数不是一个好主意。目前的解决方案是好的。

但是，如果您仍然想这样做，您可以使用两种方法之一。

1）不改变你的函数的参数。您可以定义一些顶级可变值，这些值将包含现在在您的辅助函数中使用的累加器。

2）您可以在函数中添加参数来存储一些数据。在搜索延续传递风格时，您可以找到一些示例。

快乐黑客！

PS 我仍然想强调一下，您当前的解决方案是可以的，您不需要改进它！

# amazon-s3 - Filepicker.io 为超过 1 兆的文件添加 +

> ID：13027938
> 
> 赞同：0
> 
> 时间：2012-10-23T09:58:54.807
> 
> 标签：amazon-s3, amazon-cloudfront, filepicker

每当我上传超过 1 兆的文件时，返回的密钥中都有一个 +。如果它低于 1 兆，我会得到一个 _。

例子

一个 10 兆的文件

[https://www.filepicker.io/api/file/3kzvwMXeTWC0_ypsVOzt](https://www.filepicker.io/api/file/3kzvwMXeTWC0_ypsVOzt)

钥匙

2b-Oot2XQoKsXbaYHY9R+CO-OPSTrifold.pdf

小于 1 兆的文件

[https://www.filepicker.io/api/file/PsgW1m0LRyeuJcgwfPHR](https://www.filepicker.io/api/file/PsgW1m0LRyeuJcgwfPHR)

钥匙

XMhyGYyGQNaIy9jvnRuQ_mb10.pdf

当我从与我的 S3 存储桶绑定的云前端访问它时，这会导致问题，因为 + 被视为空格。

谢谢

克里斯

# sugarcrm - SugarCRM：ImageField 上传大小限制

> ID：13027945
> 
> 赞同：1
> 
> 时间：2012-10-23T09:59:27.687
> 
> 标签：sugarcrm

使用/上传 Sugar 的 ImageField 时如何限制 Imagesize？我的猜测是应该有任何字段属性。我希望该用户上传最大 2MB 的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:31:31.187

将 POST_MAX_FILE 大小表单字段添加到表单中，它应该应用该限制......

[http://php.net/manual/en/features.file-upload.post-method.php](http://php.net/manual/en/features.file-upload.post-method.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:07:24.837

中有一个配置设置`upload_maxsize`。`config.php`但此限制将应用于所有上传，而不仅仅是图像字段。

# vbscript - 我以前没有制作过 VBS 脚本，但我想将文件从我们的服务器复制到客户端上的本地硬盘驱动器并制作了这个：

> ID：13027949
> 
> 赞同：0
> 
> 时间：2012-10-23T09:59:39.460
> 
> 标签：vbscript, winlogon

我做了一个登录 vbs（第一次），所以当有人登录到域时，它会将文件从网络驱动器复制到每台本地机器。这行得通吗（只要目录正确）？

```
<% 
dim filesys
set filesys=CreateObject("Scripting.FileSystemObject")
If filesys.FileExists("W:\Student Shared Area\SBN\registration.xml") Then
  filesys.CopyFile "W:\Student Shared Area\SBN\registration.xml"  _
    , "C:\Program Files\New-Media-Learning\Logicator\"
End If
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:06:03.320

我发现您的代码存在两个潜在问题：

*   `W:`登录脚本运行时（尚未）映射驱动器。当您在复制文件之前映射驱动器时，这不会成为问题，但最好为源使用 UNC 路径：

    `filesys.CopyFile "\\server\share\Student Shared Area\SBN\registration.xml", "C:\Program Files\New-Media-Learning\Logicator\"`

    不过，我个人更喜欢[Group Policy Preferences](http://technet.microsoft.com/en-us/library/cc731892%28v=ws.10%29.aspx)，如果这是您的选择。

*   用户没有写权限`C:\Program Files\New-Media-Learning\Logicator\`（登录脚本在用户的上下文中运行）。这可以通过使用 GPO 更改对该文件夹的[权限来缓解。](http://technet.microsoft.com/en-us/library/cc756952%28v=ws.10%29.aspx)

# tfs - 签入期间将文件复制到另一个文件夹（TFS 预览）

> ID：13027954
> 
> 赞同：1
> 
> 时间：2012-10-23T10:00:07.873
> 
> 标签：tfs, checkin, file-copying

我有以下场景：公司编辑 aspx/xml/xslt 文件并手动复制到服务器以发布它们。所以，没有构建完成。为了控制，我们决定采用 TFS Preview，因为它会跟踪版本、编辑者等。不用说，它就像一个魅力。:)

问题是，由于我们无法构建应用程序，因此我们无法设置构建定义来自动将文件复制到另一个地方，正如我之前所说，这是手动完成的。

**我的问题是：是否可以在签入期间将**文件复制到另一个地方（服务器中的文件夹或本地文件夹）？如果是这样，怎么做？（请记住，我们不构建。所以我们无法自定义构建过程......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:20:08.520

你有两个选择。

1) 创建自定义签入策略。我对这个过程不够熟悉，无法给你任何指示，但我相信它可以做到。

2) 创建一个自定义构建模板，并将其用于您的构建。您应该能够将构建模板清空，然后只向其中添加复制操作。这大概是我会走的路线。[从这里](http://msdn.microsoft.com/en-us/library/dd647551.aspx)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:41:32.053

您提到您正在使用托管在云上的 TFSPreview，因此除非您准备打开防火墙，否则它将无法访问您网络中的任何机器:)。

您可以复制 TFS 实例周围的源代码控制文件（[比如说到源代码控制的 Drop F [1](https://tfspreview.com/en-us/learn/build/setup-ci-build-in-vs/)中），然后在构建完成后检查它。首先熟悉[自定义 TFS 构建过程](http://www.ewaldhofman.nl/post/2010/04/20/Customize-Team-Build-2010-e28093-Part-1-Introduction.aspx)。

当您加快速度时，您需要考虑在工作流程中添加“复制”活动以将文件移动到放置文件夹。

# mysql - 如何使使用 ORDER BY 和 LIMIT 的查询更快？

> ID：13027957
> 
> 赞同：1
> 
> 时间：2012-10-23T10:00:16.533
> 
> 标签：mysql

在我的项目中，我有一个运行相同查询但具有不同限制值的循环。在前 10 个循环周期中，查询以可接受的速度执行，但随后变慢。我正在查询的表有 150K 寄存器并且`column1`是整数，我的查询是：

```
SELECT * FROM my_table ORDER BY column1 ASC LIMIT 0,1000
...
SELECT * FROM my_table ORDER BY column1 ASC LIMIT 9000,10000 
```

据我了解，它每次都会对所有 150K 寄存器进行排序。但是我怎样才能只在指定范围内对寄存器进行排序呢？如何使此查询更快地工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:02:20.660

这可能是一个愚蠢的问题，但是 column1 是否已编入索引？

想想第二个问题，如果数据库需要对整个数据集进行排序以确定要返回的正确 1000 个元素，这将是有意义的：)

想象一下，你有 10 个任意顺序的数字

```
4, 7, 1, 3, 9, 8, 5, 2, 6, 0 
```

你想选择5个数字，升序。如果你只取前 5 个，并对它们进行排序，你会得到

```
1,3,4,7,9 
```

如果您先对整个列表进行排序，然后取 5，您将拥有

```
0,1,2,3,4 
```

**编辑**：因为它是一个 PK，我不知道 LIMIT 是否足够聪明来确定你的主键是否是顺序的，否则它肯定需要先阅读它们。如果是，EXPLAIN 会告诉你。

**根据评论进行编辑**

如果它是连续的，也许这样的事情会有所帮助

```
SELECT * FROM ... WHERE column1 >= 9000 ORDER BY column1 ASC LIMIT 1000 
```

where 将确保它忽略 column1 值低于 9000 的所有行，因此您正在处理较小的数据集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:16:54.140

此博客列出了加快分页查询的所有选择： [http ://www.xarg.org/2011/10/optimized-pagination-using-mysql/](http://www.xarg.org/2011/10/optimized-pagination-using-mysql/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:06:38.133

尝试：

```
Select * from my_table where primary_key in
(SELECT primary_key FROM my_table LIMIT 9000,10000)
ORDER BY column1 ASC; 
```

# jquery - .on() 不适用于动态元素？

> ID：13027959
> 
> 赞同：1
> 
> 时间：2012-10-23T10:00:22.907
> 
> 标签：jquery

我的[代码](http://jsfiddle.net/qcdzS/1/)：

# HTML

```
<div id="box">
    <div class="mappa-infobox">
        <div class="pulsanti">
            <span class="pulsante selected">YES</span>
            <span class="pulsante">NO</span>
        </div>
    </div>
</div>

<div id="example"></div> 
```

# jQuery

```
$(".mappa-infobox .pulsante").on("click", function () {
    console.log("ciao");
});

$(window).load(function () {
    $('#example').html($('#box').html());
}); 
```

似乎，在加载文档并`mappa-infobox`在 div 内“克隆”之后`example`，处理程序不会被触发。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:00:53.810

您应该`on()`以委托事件方式使用：

```
$("#example").on("click", ".pulsante", function () {
    console.log("ciao");
}); 
```

Where`#example`作为`.pulsante`.

**演示：http:** [//jsfiddle.net/arEWv/](http://jsfiddle.net/arEWv/)

# c - 在一些遗留 C 代码中看到一个奇怪的 if 语句

> ID：13027960
> 
> 赞同：0
> 
> 时间：2012-10-23T10:00:23.390
> 
> 标签：c, legacy, evaluation

我在 if 语句中看到的是这样的。

```
if((var = someFunc()) == 0){
   ...
} 
```

会不会声明

```
(var = someFunc()) 
```

无论我们在什么环境中，总是返回 var 的最终值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:04:13.800

这只是一种分配给变量并同时比较返回值的单行方式。

您需要在赋值两边加上括号，因为比较运算符的优先级高于赋值运算符，否则`var`将被赋值为`someFunc() == 0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:06:48.440

这是完全错误的。`var`被赋值，然后它的值被一个常量覆盖`0`。函数的返回值因此丢失，并且`if`总是失败。如今，大多数编译器可能会对此发出警告，这既是因为 an 内的赋值，`if`也是因为不可能`if`导致结果。做可能打算做的事情的正确方法是

```
if((var = someFunc()) == 0) { 
```

（请注意，这也*可能*是恶意代码试图以常见的新手错误为幌子引入漏洞。最近有一个案例有人试图将支票偷运到他们将 UID 分配为 0 的 Linux 内核中（即， root)，同时假装*检查*自己是否是 root。但是没有用。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:41:40.973

这个是对的，我一直在用

if ((f=fopen(s,"r"))==NULL) return(fprintf(stderr,"fopen(%s,r) 失败, errno=%d, %s\n",s,errno,strerror （错误号）））；/* 成功打开文件 s，从 FILE *f 中任意读取 */

我在 calloc() 内存时也使用它。

您正在将 someFunc （在我的情况下为 fopen 或 calloc ）的返回值分配给一个变量并测试该返回值，这是一种语义快捷方式，假设您永远不想单独调试分配和测试。

# android - Multiline Textview

> ID：13027961
> 
> 赞同：3
> 
> 时间：2012-10-23T10:00:28.083
> 
> 标签：android, textview, multiline

I Have one **TextView**, the text is too long can't fit in one line, How can I make this as multiline TextView? I have added `android:singleline="false"` attribute but it's not working.

```
<TextView
    android:text="some long text"
    android:singleline="false"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"        
/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:30:48.443

用这个

```
<TextView
        android:id="@+id/yourTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:singleLine="false"
        android:scrollHorizontally="false"
        android:scrollbars="vertical" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:03:49.473

你不需要给 false 单线

只要给

```
android:maxLine="Here define the line max as you want" 
```

这将允许您的文本添加您在其中定义的宽度和高度的行数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T10:04:43.143

您可以`android:minLines="3"`使用`textview`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:47:31.460

您在 xml 文件中写入 textview

android:maxLine="这里定义最大线"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T10:09:37.550

在我的模拟器上测试后，我来到这里......所以这样做

```
 t=(TextView)findViewById(R.id.t);
    t.setText("This is first line \n This is second  \n last line...."); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T10:11:41.343

给

```
android:maxLine="Define max line here" 
```

# c# - 使用 c# 代码更改浏览器的设置

> ID：13027962
> 
> 赞同：0
> 
> 时间：2012-10-23T10:00:29.963
> 
> 标签：c#, firefox, browser

我正在尝试使用 c# 代码进行以下操作。

1）打开Firefox浏览器--->工具--->选项--->在常规选项卡中--->下载--->总是问我在哪里保存文件。

我想用 c# 代码在我的应用程序中完成整个过程。我希望当下载窗口打开时，“总是问我在哪里保存文件”选项中的单选按钮会自动被选中。我从这个站点获得了代码..但这仅在 Firefox 未运行时才有效。我在应用程序中使用代码并在 Firefox 浏览器中运行该应用程序。我已经尝试过各种链接，但一切都是徒劳的。任何帮助都会得到极大的回报。提前谢谢xxx..!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:12:04.463

如果“并在 Firefox 浏览器中运行该应用程序”是指您已经编写了一个 ASP.NET Web 应用程序，那么我非常怀疑您是否能够做到这一点。如果允许网页更改此设置，它可能会被视为 Firefox 中的安全漏洞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:53:49.440

您可以尝试在[此处](http://sturla.simnet.is/post/2008/09/22/Enable-proxy-in-IE.aspx)修改代码。但是该代码只能在您的机器上或您可以分发的您自己的程序中运行。就像在另一个答案中所说的那样，您将无法从浏览器中运行它。这听起来像是用 ActiveX 完成的，但Firefox[不再支持](http://support.mozilla.org/en-US/kb/ActiveX)。

# html - html/css 列

> ID：13027964
> 
> 赞同：0
> 
> 时间：2012-10-23T10:00:33.980
> 
> 标签：html, css

我一直在阅读，您可以使用 html/css 列而不在表中使用它们。www.w3schools.org 网站显示您可以，但我无法在我的代码中实现它。基本上我有这个想法。

```
 <div container="name">
         <dl>item 1 </dl>
         <dd>explain</dd>
         <dl>item 2 </dl>
         <dd>explain</dl>
         ...
      </div> 
```

我需要的是容器有三列，详细列表的部分是两列，而不是我将第三列的信息放在它自己的列中。我知道列跨度是保持它独立的最佳方式，但我找不到任何好的解释。而且我无法让它从我的 css 页面或 html 页面中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:05:57.417

我认为你的做法是错误的。试试这个。

**html:**

```
<div id="container">
    <div id="left-col">
        <!-- left column -->
    </div>
    <div id="content-col">
        <!-- content column -->
    </div>
    <div id="right-col">
        <!-- left column -->
    </div>
</div> 
```

**CSS：**

```
#container { overflow: hidden; width: 940px; }
#left-col { float: left; width: 200px; margin-right: 20px; }
#content-col { float: left; width: 500px; }
#right-col { float: right; width: 200px; } 
```

**演示**- [http://jsfiddle.net/gk5vD/](http://jsfiddle.net/gk5vD/)

仅供参考-您误解了 a`dl`是什么，请查看[http://www.htmldog.com/reference/htmltags/dl/](http://www.htmldog.com/reference/htmltags/dl/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:03:06.920

首先，请不要使用 w3schools。`</rant>`

CSS3 有内置的列。在[这里](http://www.quirksmode.org/css/multicolumn.html)和[这里](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multi-column_layouts)阅读它。

# wpf - 刷新从导航属性 EF 获取的信息

> ID：13027984
> 
> 赞同：1
> 
> 时间：2012-10-23T10:01:38.430
> 
> 标签：wpf, entity-framework, data-binding, entity-framework-4

我有一个实体模型，其中包含一个用户列表实体，该实体与用户 ID 关联到用户任务。UserTasks 加载到 DataGrid 中，我使用`NavigationProperty`. 我制作了一个简单的 ChildWindow 链接到 DataGrid`SelectedItem`来编辑包括用户在内的选定任务（这是我的问题）。

当从 ComboBox 和其他信息中选择另一个用户时，除了用户名之外，所有数据都在 DataGrid 中正常更新。

我进行了调试以查看 UserTasks 对象是否获得了新的 UserID，我发现确实如此。

让 DataGrid 刷新任务的用户名缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:01:11.740

抱歉，我解决了我错过设置的问题`UpdateSourceTrigger=PropertyChanged`

# c# - Parse JSON to C# object

> ID：13027985
> 
> 赞同：0
> 
> 时间：2012-10-23T10:01:46.230
> 
> 标签：c#, json, javascriptserializer

```
static void Main(string[] args)
{
    var json = @"{ ""rows"": [
                [
                    {
                        ""colspan"": 4,
                        ""id"": ""ContentPanel1""
                    },
                    {
                        ""colspan"": 8,
                        ""id"": ""ContentPanel2""
                    }
                ],
                [
                    {
                        ""colspan"": 12,
                        ""id"": ""ContentPanel3""
                    }
                ]
            ]}";

    var json_serializer = new JavaScriptSerializer();
    var jsonData = json_serializer.Deserialize<Grid>(json);

    Console.ReadKey();
}

[Serializable]
public class Grid
{
    public List<Row> rows { get; set; }
}

[Serializable]
public class Row
{
    public int colspan { get; set; }
    public int id { get; set; }
    public List<Row> rows { get; set; }
} 
```

I am trying to convert this JSON string to a C# object, but I am finding it hard because the error message is not very intuitive. Any JSON punters please help!

> ERROR Type 'ConsoleApplication1.Program+Row' is not supported for deserialization of an array.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:04:45.257

首先我们得到：

> 数组的反序列化不支持“行”类型。

JSON with`[ [`显示一个*嵌套数组*。所以要么改变 JSON，要么做`rows`一个`Row[][]`：

```
public Row[][] rows { get; set; } 
```

现在我们得到：

> ContentPanel1 不是 Int32 的有效值。

出色地...

```
public int id { get; set; } 
```

对比

```
""id"": ""ContentPanel1"" 
```

现在：`"ContentPanel1"`不是`int`. 做`id`一个`string`：

```
public string id { get; set; } 
```

# ruby-on-rails-3 - Creating children objects of not saved model in Backbone using Backbone-relational

> ID：13027988
> 
> 赞同：3
> 
> 时间：2012-10-23T10:01:51.947
> 
> 标签：ruby-on-rails-3, backbone.js, coffeescript, backbone-relational

I'm new to backbone. I have rails3 app. These are my backbone models:

```
class AppName.Models.Order extends Backbone.RelationalModel
  paramRoot: 'order'

  relations: [
    type: Backbone.HasMany
    key: 'order_services'
    relatedModel: 'AppName.Models.OrderService'
    collectionType: 'AppName.Collections.OrderServicesCollection'
    includeInJSON: false
    reverseRelation:
      key: 'order_id',
      includeInJSON: 'id'
  ]

class AppName.Models.OrderService extends Backbone.RelationalModel
  paramRoot: 'order_service' 
```

I have new order model which is not saved at server yet. How can I create new order_service as a child of that order, so I could access order with order_service.get('order')?

I need to build order step by step: add order_services, add other models, and then save the order. Is that possible to store locally not saved order with its order_services (which also have not saved children of other models) and then save all this stuff at server?

# .net - 替换字符串中的空格，mvc razor

> ID：13027991
> 
> 赞同：5
> 
> 时间：2012-10-23T10:02:09.237
> 
> 标签：.net, asp.net-mvc, string, asp.net-mvc-4, razor

我对 MVC 和 razor 很陌生，但到目前为止我很享受。我遇到了一两个基本问题，所以希望这对某人来说是一个很好的简单问题。

我正在制作一个新变量并替换空格。但是，这似乎根本不起作用。我自己添加到字符串中的空间仍然存在。此时我不能简单地使用下划线作为两者`Address1`，`Postcode`也可能包含空格，因此替换是必不可少的。

```
@{ 
    var mapAddress = Model.Address1 + ", " + Model.Postcode;
    mapAddress.Replace(" ", "_");
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T10:45:41.290

您必须使用纯方法的返回值`Replace`，即：

```
mapAddress = mapAddress.Replace(" ", "_"); 
```