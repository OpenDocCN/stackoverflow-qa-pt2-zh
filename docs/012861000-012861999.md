# StackOverflow 问答 12861000-12861999

# shader - 更改单行会导致着色器出错

> ID：12861000
> 
> 赞同：1
> 
> 时间：2012-10-12T14:15:28.600
> 
> 标签：shader, direct3d, hlsl, vertex-shader

我正在学习 3D 和着色器，我已经花了数周时间创建了一个着色器。

我在这个着色器中的一行有问题 - 评论一个并用另一个替换它会导致效果在`IDirect3DDevice9::CreateVertexShader()`调用时失败。所有字段都已设置，当我将所有`boneTransforms`和设置`viewProj`为身份矩阵时也会发生这种行为。正如我将看到的模型一样，更改这一行（已注释）将导致顶点着色器无法编译。**为什么会这样？我花了几天时间调试这个，找不到原因！**

```
static const int MAX_MATRICES = 100;
float4x3    boneTransforms[MAX_MATRICES] : WORLDMATRIXARRAY;
float4x4    ViewProj : VIEWPROJECTION;

struct VS_INPUT
{
    float3  Pos             : POSITION;
    float4  BlendWeights    : BLENDWEIGHT;
    float4  BlendIndices    : BLENDINDICES;
    float3  Normal          : NORMAL;
    float2  Tex0            : TEXCOORD0;
};

struct VS_OUTPUT
{
    float4  Pos      : POSITION;
    float2  Tex0     : TEXCOORD0;
    float4  Diffuse  : COLOR;
};

VS_OUTPUT VShade(VS_INPUT i)
{
    VS_OUTPUT   o;

    int4 blendIndicies = D3DCOLORtoUBYTE4(i.BlendIndices);

    float blendWeights[4] = (float[4])i.BlendWeights;
    int boneIndicies[4] = (int[4])blendIndicies;

    float3 pos = mul(i.Pos, boneTransforms[boneIndicies[0]]) * blendWeights[0]
                  + mul(i.Pos, boneTransforms[boneIndicies[1]]) * blendWeights[1]
                  + mul(i.Pos, boneTransforms[boneIndicies[2]]) * blendWeights[2]
                  + mul(i.Pos, boneTransforms[boneIndicies[3]]) * blendWeights[3];

    float4 aaa = mul(float4(pos.xyz, 1.0f), ViewProj);

    //////////////////////////////////////////////////////////////////////////////
    // If I comment out this SINGLE line
    o.Pos = mul(float4(i.Pos.xyz, 1.0f), ViewProj);
    // and replace it with this one, then IDirect3DDevice9::CreateVertexShader() returns D3DERR_INVALIDCALL
    // o.Pos = aaa;
    //////////////////////////////////////////////////////////////////////////////

    o.Diffuse = 1.0f;
    o.Tex0  = i.Tex0.xy;
    return o;
}

float4 PShade(VS_OUTPUT i) : COLOR
{
    return float4(1.0, 1.0, 1.0, 1.0);
}

technique technique0
{
    pass p0
    {
        //PixelShader = compile ps_2_0 PShade();
        VertexShader = compile vs_2_0 VShade();
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:49:25.527

您需要尝试减少 MAX_MATRICES

```
static const int MAX_MATRICES = 50; 
```

否则，您将超过最大常量缓冲区大小。

# grails - Tomcat 7 没有从 grails 应用程序开始

> ID：12861001
> 
> 赞同：0
> 
> 时间：2012-10-12T14:15:30.113
> 
> 标签：grails, tomcat7

我的应用程序在我的机器上运行但不是我的 tomcat 这是我的日志：

```
Oct 12, 2012 2:48:23 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/lib/jvm/java-6-openjdk/jre/lib/amd64/server:/usr/lib/jvm/java-6-openjdk/jre/lib/amd64:/usr/lib/jvm/java-6-openjdk/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib/jni:/lib:/usr/lib
Oct 12, 2012 2:48:24 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Oct 12, 2012 2:48:24 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Oct 12, 2012 2:48:24 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 904 ms
Oct 12, 2012 2:48:24 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Oct 12, 2012 2:48:24 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.32
Oct 12, 2012 2:48:24 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive /usr/local/fypTomcat/webapps/FYP.war
log4j:WARN No appenders could be found for logger (org.codehaus.groovy.grails.commons.cfg.ConfigurationHelper).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.

Configuring Spring Security UI ...
... finished configuring Spring Security UI

Configuring Spring Security Core ...
... finished configuring Spring Security Core

Oct 12, 2012 2:49:15 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Oct 12, 2012 2:49:15 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/FYP] startup failed due to previous errors
Oct 12, 2012 2:49:15 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/FYP] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak.
Oct 12, 2012 2:49:15 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/FYP] appears to have started a thread named [net.sf.ehcache.CacheManager@16394576] but has failed to stop it. This is very likely to create a memory leak.
Oct 12, 2012 2:49:15 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/FYP] appears to have started a thread named [com.fyp.timeline.Role.data] but has failed to stop it. This is very likely to create a memory leak.
Oct 12, 2012 2:49:15 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/FYP] created a ThreadLocal with key of type [org.codehaus.groovy.reflection.ClassInfo.ThreadLocalMapHandler] (value [org.codehaus.groovy.reflection.ClassInfo$ThreadLocalMapHandler@746231ed]) and a value of type [java.lang.ref.SoftReference] (value [java.lang.ref.SoftReference@5abbfa4c]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Oct 12, 2012 2:49:15 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Oct 12, 2012 2:49:15 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Oct 12, 2012 2:49:15 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 51609 ms
                                                                                                                                                                                                                        101,1         Bot 
```

任何想法是什么原因造成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:39:16.783

这是来自`catalina.out`文件的消息。看看`localhost.[date].log`（例如`localhost.2012-10-12.log`）。它应该包含所有详细信息和堆栈跟踪。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T14:45:48.230

这可能是您问题的解决方案 -

[http://java.dzone.com/articles/tomcat-6-infamous-%E2%80%9Csevere](http://java.dzone.com/articles/tomcat-6-infamous-%E2%80%9Csevere)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:34:12.680

由于 log4j 配置，我们遇到了这个错误。您需要将其更改为写入 tomcat 日志目录。

看来它现在已在 2.1.4+ 版本的 Grails 中得到修复。请参阅[http://grails.org/2.1.4%20Release%20Notes](http://grails.org/2.1.4%20Release%20Notes)

# sql - 备忘录从 Access 数据库截断为 VBA 字符串

> ID：12861005
> 
> 赞同：1
> 
> 时间：2012-10-12T14:15:45.347
> 
> 标签：sql, vba, ms-access, livelink

我的 Access (2003) 数据库中有一个备注字段，用于存储 Outlook 中文件夹的 EntryID（大约 750 个字符）。我正在尝试取回该*字符串*以使用以下代码将一些邮件移动到该文件夹​​ ID：

```
Dim myNameSpace As Outlook.NameSpace
Dim StoreID As String
Dim target as String 'This is the long EntryID string
Dim objMail as mailitem 'some mail

Set myNameSpace = Application.GetNamespace("MAPI")
StoreID = Application.GetNamespace("MAPI").folders("LiveLink").StoreID
Set dossier = myNameSpace.GetFolderFromID(target, StoreID)
objMail.Move dossier 
```

在这种`target`情况下，var 只有前 252 个字符而不是 748 个字符。有趣的是，如果没有其他可用的具有相同 ~255 个首字符的文件夹，Outlook 仍然会找到正确的文件夹。但在某些情况下，它会因为不止一个而崩溃。我正在使用*Recordset*从数据库中获取备忘录。这是我的 SQL：

```
SELECT EntryID FROM Folder 
```

我终于找到了关于这种行为的一些信息：http: [//allenbrowne.com/ser-63.html](http://allenbrowne.com/ser-63.html)。但是，如您所见，我没有在查询中使用任何联合或任何特定内容...

为什么它仍然被截断？

数据库中的原始备忘录/字符串：

> 00000000CE5B922DF5D7654C993FFDB4FF79A7A00100000057010000307E7E2D317E305C307E4C6976656C696E6B204851457E307E2D315C307E4C6976656C696E6B204851457E2D357E305C307E4C6976656C696E6B204851457E313233373235387E2D355C307E4C6976656C696E6B204851457E31303233363334317E313233373235385C307E4C6976656C696E6B204851457E31323930393430387E31303233363334315C307E4C6976656C696E6B204851457E31343539333439307E31323930393430385C307E4C6976656C696E6B204851457E31383735353632377E31343539333439305C307E4C6976656C696E6B204851457E3131363434333236317E31383735353632375C307E4C6976656C696E6B204851457E3131363434333236347E3131363434333236315C307E4C6976656C696E6B204851457E3131363434333238397E3131363434333236345C307E4C6976656C696E6B204851457E3131363434333330337E313136343433323839

SQL 查询后截断的备忘录/对象/字段/字符串：

> 00000000CE5B922DF5D7654C993FFDB4FF79A7A00100000057010000307E7E2D317E305C307E4C6976656C696E6B204851457E307E2D315C307E4C6976656C696E6B204851457E2D357E305C307E4C6976656C696E6B204851457E313233373235387E2D355C307E4C6976656C696E6B204851457E3130323336333431

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:10:19.677

如您的链接所示，这应该有效

```
Set rs = CurrentDb.Execute("SELECT Mid(EntryID,  1,250)  AS part1, " & _
       " Mid(EntryID,251,250)  AS part2," & _
       " Mid(EntryID,501,250)  AS part3," & _
       " Mid(EntryID,751,250)  AS part4," & _
       " Mid(EntryID,1001,250) AS part5 " & _
                          " FROM Folder;")
target = rs("part1") & rs("part2") & rs("part3") & rs("part4") & rs("part5") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T16:50:18.943

我已经实现了这个 c# 代码：

```
 private string GetMemoField(string TableName, string FieldName, string IdentityFieldName, string IdentityFieldValue, OleDbConnection conn)
    {
        string ret = "";

        OleDbCommand cmd1 = new OleDbCommand("SELECT " + FieldName + " FROM “ + TableName + “ WHERE " + IdentityFieldName + "=" + IdentityFieldValue, conn);

                var reader = cmd1.ExecuteReader(System.Data.CommandBehavior.SequentialAccess);  // Create the DataReader that will get the memo field one buffer at a time

        if (reader.Read())
        {
            long numberOfChars = reader.GetChars(/*Field pos*/ 0, 0, null, 0, 0);   // Total number of memo field's chars

            if (numberOfChars > 0)
            {
                int bufferSize = 1024;
                char[] totalBuffer = new char[64*bufferSize];    // Array to hold memo field content

                long dataIndex = 0;

                do
                {

                    char[] buffer = new char[bufferSize];   // Buffer to hold single read
                    long numberOfCharsReaded = reader.GetChars(0, dataIndex, buffer, 0, bufferSize);

                    if (numberOfCharsReaded == 0)
                    {
                        ret = new string(totalBuffer,0, (int)numberOfChars);
                        break;
                    }

                    Array.Copy(buffer, 0, totalBuffer, dataIndex, numberOfCharsReaded);     // Add temporary buffer to main buffer
                    dataIndex += numberOfCharsReaded;

                } while (true);
            }
        }

        return ret;
    } 
```

# c# - 使用“使用”而不是关闭 WebResponse 和 StreamReader 是否安全

> ID：12861008
> 
> 赞同：17
> 
> 时间：2012-10-12T14:16:06.763
> 
> 标签：c#, httpwebrequest, streamreader

## 目前

`HttpWebRequest`我已经为被调用实现了一个简单的辅助方法`GetResponse(url)`。目前我在阅读结果后手动关闭`WebResponse`and 。`StreamReader`然后我像这样返回所说的结果：

```
// construct the request
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Method = "GET";

// get the result
WebResponse response = request.GetResponse();
StreamReader reader = new StreamReader(response.GetResponseStream());
string result = reader.ReadToEnd();

// clean up and return the result
reader.Close();
response.Close();
return result; 
```

## 建议的

在语句中包含返回而不是关闭它们是否*安全？*这会和es`using`有同样的效果吗？`.Close()`

```
// construct the request
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Method = "GET";

// get the result
using (WebResponse response = request.GetResponse())
{
    using (StreamReader reader = new StreamReader(response.GetResponseStream()))
    {
        return reader.ReadToEnd();
    }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-12T14:18:05.443

这不仅安全——它比原来的更安全，因为即使抛出异常，它也会处理对象；`using`语句等同于/`try`语句`finally`。

通常，无论何时显式编写`Close()`or`Dispose()`调用时，请考虑是否可以改用`using`语句。

（请注意，顺便说一下，您没有使用来自 Web 响应的编码 - 您总是假设为 UTF-8。如果`WebClient`可以选择，使用它可以使这更简单。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:20:35.683

```
using (StreamReader reader = new StreamReader())
{
    // code
} 
```

是相同的

```
StreamReader reader;
try
{
    reader = new StreamReader();
    // code
}
finally
{
    if (reader != null)
    {
        reader.Dispose();
    }
} 
```

因此它与您的代码几乎相同，但由于 try/finally 块而更安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T14:26:34.497

我建议这样做：

```
 string ret = string.Empty;
    using (WebResponse response = request.GetResponse())
    {
        using (StreamReader reader = new StreamReader(response.GetResponseStream()))
        {
            ret = reader.ReadToEnd();
        }
    }
    return ret; 
```

使用“使用”是安全的，它会处理 WebResponse 和 StreamReader，但不保证它会运行返回。

# wordpress - 更新 Facebook 发送按钮中的缩略图

> ID：12861009
> 
> 赞同：0
> 
> 时间：2012-10-12T14:16:07.117
> 
> 标签：wordpress, facebook-like, facebook-opengraph

我想更新 Facebook 发送按钮使用的缩略图。我意识到这是由 Facebook 缓存的，我正在尝试使用[调试器工具更新缓存](https://developers.facebook.com/tools/debug)

我尝试在[调试器工具上使用](https://developers.facebook.com/tools/debug)[http://domain.com/path_to_image.jpg?fbrefresh=CAN_BE_ANYTHING](http://domain.com/path_to_image.jpg?fbrefresh=CAN_BE_ANYTHING)

但是，仍然显示旧图像。该图像似乎存储在[https://fbexternal-a.akamaihd.net/safe_image.php?id=path_to_image/image.jpg](https://fbexternal-a.akamaihd.net/safe_image.php?id=path_to_image/image.jpg)

自从 fbrefresh=CAN_BE_ANYTHING 不起作用或者我输入了错误的 url 后，有什么方法可以清除缓存？

我也尝试 `<meta property="og:image" content="http://domain.com/new_image.jpg"/>`在我的 header.php 文件中添加（我正在使用 Wordpress）

关于为什么图像没有更新/缓存没有清除的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:12:15.200

通过上述过程，图像会在一天后刷新。

再次，转到[调试器工具](https://developers.facebook.com/tools/debug)

输入`http://domain.com/path_to_image.jpg?fbrefresh=CAN_BE_ANYTHING`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T21:35:12.960

很好的解释和澄清你在“FB post”URL（不仅仅是图像）上使用调试器，一旦解决，使用“rescrape”强制更新缩略图。

[http://info.tmrdirect.com/bid/105994/How-To-Change-Facebook-Link-Thumbnail-and-Description](http://info.tmrdirect.com/bid/105994/How-To-Change-Facebook-Link-Thumbnail-and-Description)

一个提示：在 Debugger 工具中，我发现它只有在我使用 HEX 为字符编写 URL 时才有效（但这可能是因为这就是我的原始帖子的格式）。例如：https%3A%2F%2Fwww.domain.com%2blog2%2F

# location - iOS 的 kCLLocationAccuracyHundredMeters 常量

> ID：12861010
> 
> 赞同：3
> 
> 时间：2012-10-12T14:16:10.283
> 
> 标签：location, ios

当利用 kCLLocationAccuracyHundredMeters 常量时，正在使用什么位置数据以及当操作系统提取数据时该数据存储在哪里？“最后已知位置”曾经存储在 cache.plist 中，但从 iOS 4.2.8 开始不再如此。

我试图更好地了解应用程序如何确定设备的位置。核心位置框架允许调用与位置相关的数据，但隐藏了 API 背后的细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:14:31.077

确定设备位置的不是应用程序，而是设备。（硬件和软件）反过来，设备能够通过核心位置 API 通知应用程序有关设备位置的信息。位置不会自动跟踪，但您可以要求设备进行跟踪（再次通过 API）。

像 kCLLocationAccuracyHundredMeters 这样的常量背后的基本原理是，提高定位精度会消耗越来越多的计算能力。如果您所需要的只是 100 米，那么投资以 10 米的精度找到您的位置是没有意义的。

在内部，有两个数据源用于定位设备： 1\. 内置在设备中的 GPS 芯片，能够接收来自地球周围 GPS 卫星的信号，这些卫星发送定时信息。由于信号到达的时间不同，因为它们与设备的距离不同并且光速是有限的，因此可以计算位置。2\. 使用具有各自位置的可见 SSID 的数据库，从中可以知道与它们各自位置的接近度。

也就是说，对于作为应用程序开发人员的您来说，相应数据如何在设备内部存储在很大程度上应该是无关紧要的。您只需要知道 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:22:54.543

当您将 kCLLocationAccuracyHundredMeters 分配给您的 CLLocationManager 的 desiredAccuracy 属性时，您实际上在做的是向经理建议您希望它报告给您的位置的准确度级别。CLLocationManager 可以是一位绅士，并为您提供所需的准确度，但有时，locationManager 无法为您提供这样的准确度。您需要做的是，在您的委托中，当您收到 CLLocation 对象时，您会查找捕获位置的日期以及水平/垂直精度属性。这将使您能够确定数据的准确程度。

CLLocationManager 的 location 属性将为您提供最后记录的位置，甚至在向其委托报告位置更改之前。

# r - 安装 R 包的问题

> ID：12861014
> 
> 赞同：8
> 
> 时间：2012-10-12T14:16:15.637
> 
> 标签：r, installation-package

我正在设置一台运行 Gentoo 的新笔记本电脑并希望安装 R（就像我在所有计算机上一样！）。

但是，在安装软件包时我遇到了一些问题。

我首先尝试：

```
> install.packages(c("ggplot2", "plyr", "reshape2")) 
```

它适当地下载了所有的包及其依赖项。但是他们没有安装报告。

```
Error in library(data.table) : there is no package called ‘data.table’
Calls: .First -> library
Execution halted
Error in library(data.table) : there is no package called ‘data.table’
Calls: .First -> library
Execution halted
Error in library(data.table) : there is no package called ‘data.table’
Calls: .First -> library
Execution halted
Error in library(data.table) : there is no package called ‘data.table’
Calls: .First -> library
Execution halted
Error in library(data.table) : there is no package called ‘data.table’
Calls: .First -> library
Execution halted
Error in library(data.table) : there is no package called ‘data.table’
Calls: .First -> library
Execution halted
Error in library(data.table) : there is no package called ‘data.table’
Calls: .First -> library
Execution halted
Error in library(data.table) : there is no package called ‘data.table’
Calls: .First -> library 
```

没问题，我只是安装 data.table 包，不幸的是......

```
> install.packages("data.table")
trying URL 'http://cran.uk.r-project.org/src/contrib/data.table_1.8.2.tar.gz'
Content type 'application/x-gzip' length 818198 bytes (799 Kb)
opened URL
==================================================
downloaded 799 Kb

Error in library(data.table) : there is no package called ‘data.table’
Calls: .First -> library
Execution halted

The downloaded source packages are in
    ‘/tmp/RtmpbQtALj/downloaded_packages’
Updating HTML index of packages in '.Library'
Making packages.html  ... done
Warning message:
In install.packages("data.table") :
  installation of package ‘data.table’ had non-zero exit status 
```

而且没有迹象表明为什么安装完全失败，所以我不知道如何解决这个问题？traceback() 也不可用。

GCC 已安装并配置为 gcc-config 显示的输出（事实上我可以从源代码安装其他软件没有问题）。

```
# gcc-config -l
 [1] x86_64-pc-linux-gnu-4.6.3 * 
```

为如何解决这个问题感到困惑。关于如何获得更多信息的任何想法或想法`install.packages()`。

编辑： .First 根据要求的内容....

```
> .First
function () 
{
    library(data.table)
    library(foreign)
    library(ggplot2)
    library(Hmisc)
    library(lattice)
    library(plyr)
    library(rms)
    library(xtable)
    cat("\nWelcome at", date(), "\n")
} 
```

编辑 2：没有 Rprofile.site 但有 /usr/lib64/R/library/base/R/Rprofile 有....

```
# cat /usr/lib64/R/library/base/R/Rprofile 
### This is the system Rprofile file. It is always run on startup.
### Additional commands can be placed in site or user Rprofile files
### (see ?Rprofile).

### Notice that it is a bad idea to use this file as a template for
### personal startup files, since things will be executed twice and in
### the wrong environment (user profiles are run in .GlobalEnv).

.GlobalEnv <- globalenv()
attach(NULL, name = "Autoloads")
.AutoloadEnv <- as.environment(2)
assign(".Autoloaded", NULL, envir = .AutoloadEnv)
T <- TRUE
F <- FALSE
R.version <- structure(R.Version(), class = "simple.list")
version <- R.version            # for S compatibility

## for backwards compatibility only
R.version.string <- R.version$version.string

## NOTA BENE: options() for non-base package functionality are in places like
##            --------- ../utils/R/zzz.R

options(keep.source = interactive())
options(warn = 0)
# options(repos = c(CRAN="@CRAN@"))
# options(BIOC = "http://www.bioconductor.org")

options(timeout = 60)
options(encoding = "native.enc")
options(show.error.messages = TRUE)
## keep in sync with PrintDefaults() in  ../../main/print.c :
options(scipen = 0)
options(max.print = 99999)# max. #{entries} in internal printMatrix()
options(add.smooth = TRUE)# currently only used in 'plot.lm'
options(stringsAsFactors = TRUE)
if(!interactive() && is.null(getOption("showErrorCalls")))
    options(showErrorCalls = TRUE)

local({dp <- Sys.getenv("R_DEFAULT_PACKAGES")
       if(identical(dp, "")) # marginally faster to do methods last
           dp <- c("datasets", "utils", "grDevices", "graphics",
                   "stats", "methods")
       else if(identical(dp, "NULL")) dp <- character(0)
       else dp <- strsplit(dp, ",")[[1]]
       dp <- sub("[[:blank:]]*([[:alnum:]]+)", "\\1", dp) # strip whitespace
       options(defaultPackages = dp)
     })

## Expand R_LIBS_* environment variables.
Sys.setenv(R_LIBS_SITE =
           .expand_R_libs_env_var(Sys.getenv("R_LIBS_SITE")))
Sys.setenv(R_LIBS_USER =
           .expand_R_libs_env_var(Sys.getenv("R_LIBS_USER")))

.First.sys <- function()
{
    for(pkg in getOption("defaultPackages")) {
        res <- require(pkg, quietly = TRUE, warn.conflicts = FALSE,
                       character.only = TRUE)
        if(!res)
            warning(gettextf('package %s in options("defaultPackages") was not found',     sQuote(pkg)),
                    call.=FALSE, domain = NA)
    }
}

.OptRequireMethods <- function()
{
      if("methods" %in% getOption("defaultPackages")) {
        res <- require("methods", quietly = TRUE, warn.conflicts = FALSE,
                       character.only = TRUE)
        if(!res)
            warning('package "methods" in options("defaultPackages") was not found', call.=FALSE)
    }
}

if(nzchar(Sys.getenv("R_BATCH"))) {
    .Last.sys <- function()
    {
        cat("> proc.time()\n")
        print(proc.time())
    }
    ## avoid passing on to spawned R processes
    ## A system has been reported without Sys.unsetenv, so try this
    try(Sys.setenv(R_BATCH=""))
}
###-*- R -*- Unix Specific ----

.Library <- file.path(R.home(), "library")
.Library.site <- Sys.getenv("R_LIBS_SITE")
.Library.site <- if(!nchar(.Library.site)) file.path(R.home(), "site-library") else unlist(strsplit(.Library.site, ":"))
.Library.site <- .Library.site[file.exists(.Library.site)]

invisible(.libPaths(c(unlist(strsplit(Sys.getenv("R_LIBS"), ":")),
                      unlist(strsplit(Sys.getenv("R_LIBS_USER"), ":")
                      ))))

local({
## we distinguish between R_PAPERSIZE as set by the user and by configure
papersize <- Sys.getenv("R_PAPERSIZE_USER")
if(!nchar(papersize)) {
    lcpaper <- Sys.getlocale("LC_PAPER") # might be null: OK as nchar is 0
    papersize <- if(nchar(lcpaper))
        if(length(grep("(_US|_CA)", lcpaper))) "letter" else "a4"
    else Sys.getenv("R_PAPERSIZE")
}
options(papersize = papersize,
        printcmd = Sys.getenv("R_PRINTCMD"),
        dvipscmd = Sys.getenv("DVIPS", "dvips"),
        texi2dvi = Sys.getenv("R_TEXI2DVICMD"),
        browser = Sys.getenv("R_BROWSER"),
        pager = file.path(R.home(), "bin", "pager"),
        pdfviewer = Sys.getenv("R_PDFVIEWER"),
        useFancyQuotes = TRUE)
})

## non standard settings for the R.app GUI of the Mac OS X port
if(.Platform$GUI == "AQUA") {
    ## this is set to let RAqua use both X11 device and X11/TclTk
    if (Sys.getenv("DISPLAY") == "")
    Sys.setenv("DISPLAY" = ":0")

    ## this is to allow gfortran compiler to work
    Sys.setenv("PATH" = paste(Sys.getenv("PATH"),":/usr/local/bin",sep = ""))
}## end "Aqua"

local({
    tests_startup <- Sys.getenv("R_TESTS")
    if(nzchar(tests_startup)) source(tests_startup)
}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T14:31:30.243

看起来`data.table`没有为运行该`install.packages`命令的用户安装。我认为将这个`.First`函数包装`if (interactive()) { }`进去通常是一个好主意。否则，您需要安装`data.table`和在启动时加载的任何其他包，因为在启动`install.packages`时运行 .Rprofile 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-06T21:16:15.417

警告：您使用的是非 UTF8 语言环境，因此只能使用 ASCII 字符。请阅读 R for Mac OS X FAQ（参见帮助）第 9 节并相应地调整您的系统偏好。[历史从 /Users/carlosaburto/.Rapp.history 恢复]

> 默认写入 org.R-project.R force.LANG en_US.UTF-8 错误：“默认写入”中的意外符号启动 httpd 帮助服务器...完成

# c# - 检测锁定按钮按下

> ID：12861016
> 
> 赞同：-1
> 
> 时间：2012-10-12T14:16:23.717
> 
> 标签：c#, windows-phone-7, xna, background-process

我被要求使用 Windows Phone 7 制作一个莫尔斯电码应用程序。

我需要能够多次按下锁定按钮来触发我的应用程序以检测已按下的顺序和时间。

例如，如果我五次按下手机 (HTC Radar) 上的锁定按钮，我希望我的应用程序（它将在后台运行）检测到它已被按下五次以及在什么时间按下，以便我可以弄清楚。 - 或“短/长”模式然后打开自己。

我该怎么办？

我在 XBOX 上使用过 XNA 和 C#，但没有在移动设备上使用过。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:25:37.697

没有 API 可以解决您的问题。

*   您的应用程序可以订阅 Obscured 事件。但是这个事件并不意味着完全按下了锁定按钮。可能是短信或电话。

*   你不能做将一直运行的后台应用程序，并处理锁屏按钮。

# c# - RegEx 以 [ 开头并以 ] 结尾 - 仅匹配单词

> ID：12861018
> 
> 赞同：1
> 
> 时间：2012-10-12T14:16:28.260
> 
> 标签：c#, regex

给定以下字符串：

```
var s = "my [first] ga[m]e and [abc]de]\nThe [Game]" 
```

我使用哪个正则表达式来匹配：

```
0 - [first]
1 - [abc]de]
2 - [Game] 
```

我试过`var pattern2 = new Regex(@"\W\[.*?\]\W");`了，但没有找到`[Game]`

我也希望能够匹配“ `[my] gamers\t[pro]`”

```
0 - [my]
1 - [pro] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T14:24:02.473

```
\[[^\[]{2,}\] 
```

**解释：**

```
\[         # Match a [
[^\[]{2,}  # Match two or more non-[ characters
\]         # Match ] 
```

在[RegExr](http://regexr.com?32ekh)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:57:24.910

除了非单词字符之外，您还需要明确匹配字符串的开头和结尾：

```
(?:^|\W)\[(.*?)\](?:$|\W) 
```

捕获组将获得括号内的单词。

# pymongo - 如何按字段对结果进行排序？

> ID：12861019
> 
> 赞同：0
> 
> 时间：2012-10-12T14:16:28.097
> 
> 标签：pymongo

我有一个简单的例子：

```
result = db.command({
    'findandmodify' : 'Task',
    'remove' : True
 })
print result 
```

如何获得第一个插入的元素？（按_id排序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:08:56.603

pymongo 中的 find_one 方法应该返回集合中的第一个文档：http: [//api.mongodb.org/python/current/tutorial.html#getting-a-single-document-with-find-one](http://api.mongodb.org/python/current/tutorial.html#getting-a-single-document-with-find-one)

# java - 如何在无限循环中获得UDP连接？

> ID：12861022
> 
> 赞同：0
> 
> 时间：2012-10-12T14:16:31.943
> 
> 标签：java, loops, udp

我正在尝试编写一个程序来实现距离矢量算法。所以我需要节点同时充当服务器和客户端。

基本上我使用 UDP 协议来发送和接收消息。我正在尝试收听来自相邻节点的消息，同时每 5 秒发送一次节点的距离向量。

我的主要问题是我希望停止收听消息，以便我可以广播我的距离矢量。我尝试使用`setSoTimeout`，但后来我得到了各种我不知道如何处理的异常。而且我不太确定如何再次“重新打开”套接字以再次等待消息或继续广播消息....

有人可以指出我正确的方向吗？

我的代码如下：

```
import java.io.*;
import java.net.*;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Scanner;

public class dv_routing {

public static void main(String[] args) throws Exception {

    //initialise variables to default value
    int NodeID = 0;
    int NodePort = 6000;
    String configFile = "A.txt";
    int numNbr = 0;                                     // zero neighbour
    double[] CostList = new double[10];                 //Self cost list
    Arrays.fill(CostList, Double.POSITIVE_INFINITY);
    int[] ViaList = new int[10];                        //Self cost list
    Arrays.fill(ViaList, 9999);
    double[] Cost = new double[10];                     //Inf cost array for Nbr initialization
    Arrays.fill(Cost, Double.POSITIVE_INFINITY);        
    Neighbour Nbr = new Neighbour();                    //create Nbr
    boolean ischanged = false;

    //read user input
    if (args.length >= 3) {
        System.out.println("i'm here!");
        String tmp = args[0];
        char tmpchar = tmp.charAt(0);
        NodeID = ((int)tmpchar - 65);
        NodePort = Integer.parseInt(args[1]);
        configFile = args[2];
        CostList[NodeID] = 0;
        System.out.println(NodeID);
        System.out.println(NodePort);
        System.out.println(configFile);
        //poison reverse
        if (args.length <= 4) {
            // TODO: poison reverse
        }
        else 
            System.out.println("Incorrect Input Format! Please try again!");
    }

       //reading config file for neighbour data
    try{

          // Open the file that is the first 
          // command line parameter
          FileInputStream fstream = new FileInputStream(configFile);
          // Get the object of DataInputStream
          DataInputStream in = new DataInputStream(fstream);
          BufferedReader br = new BufferedReader(new InputStreamReader(in));
          String strLine;
          //capture the number neighbours
          if ((strLine = br.readLine()) != null){
              numNbr = Integer.parseInt(strLine);
              System.out.println (numNbr);
          }
          int elementcnt = 0;
          while ((strLine = br.readLine()) != null)   {
              //separate data 
              String[] temp = strLine.split(" ");

              //get neighbour Node ID
              char tmpchar = temp[0].trim().charAt(0);
              int ID = (int)(tmpchar - 65);
              //NbrIDList.add(new NbrID((int)tmpchar - 65));
              //get neighbour cost
              CostList[ID] = Double.parseDouble(temp[1].trim());
              ViaList[ID] = ID;
              //get neighbour port number
              int Port = Integer.parseInt(temp[2].trim());

              //create entry for neighbour
              Nbr.addData(ID, Port);
              Nbr.addCost(Cost);

              //debugging
              //System.out.println((char)(Nbr.getID(elementcnt)+65));
              //System.out.println(Nbr.getPort(elementcnt));
              //System.out.println(Nbr.getCost(elementcnt)[0]);

              elementcnt++;
          }
          //Close the input stream
          in.close();
            }catch (Exception e){//Catch exception if any
                System.err.println("Error: " + e.getMessage());
          }

    //set timers
    long now = System.currentTimeMillis();
    long end = now + 50 * 1000;
    long broadcast = now + 1 * 1000;
    long current = System.currentTimeMillis();

    while(current < end) {
        System.out.println("in first layer");

        //open UDP socket for listening..
        DatagramSocket nodeSocket = new DatagramSocket(NodePort);
        InetAddress IPAddress = InetAddress.getByName("localhost");
        byte[] receiveData = new byte[1024];
        byte[] sendData = new byte[1024];

        //braodcast...
        String OutMsg = CostList[0]+"\t"+CostList[1]+"\t"+CostList[2]+"\t"+CostList[3]+"\t"+CostList[4]+"\t"+CostList[5]+"\t"+CostList[6]+"\t"+CostList[7]+"\t"+CostList[8]+"\t"+CostList[9];
        sendData = OutMsg.getBytes();
        for (int i = 0; i < numNbr; i++){
            DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, Nbr.getPort(i));
            nodeSocket.send(sendPacket);
        }

        nodeSocket.setSoTimeout(1000);

        while(current < broadcast){
            if (nodeSocket.isClosed()){
                nodeSocket = new DatagramSocket(NodePort);
            }
            System.out.println("in receiving layer");
            current = System.currentTimeMillis();
            ischanged = false;
            //get MSG
            // Msg format.. "cost1"\t"cost2"\t"cost3"...
            try{DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
            nodeSocket.receive(receivePacket);

            System.out.println("we got here");
            String Msg = new String( receivePacket.getData());
            System.out.println("RECEIVED: " + Msg);
            int NbrPort = receivePacket.getPort();
            System.out.println("From: " + NbrPort);

            //process the MSG
            String[] tmpstr = Msg.split("\t");
            for (int i = 0; i<10; i++) {
                Cost[i] = Double.parseDouble(tmpstr[i]);
            }
            int Idx = Nbr.indexOfPort(NbrPort);
            System.out.println("From: " + NbrPort);
            Nbr.updateCost(Idx, Cost);

            //compare cost and update list
            for (int i = 0; i<10;i++) {
                double NbrNodeCost = (Nbr.getCost(Idx)[i] + CostList[Nbr.getID(Idx)]);
                if (!(Double.isInfinite(NbrNodeCost)) && CostList[i] > NbrNodeCost) {
                    CostList[i] = NbrNodeCost;
                    ViaList[i] = Nbr.getID(Idx);
                    ischanged = true;
                }
            }

            System.out.println("Is the list changed? " + ischanged);
            System.out.println(CostList[0]+" "+CostList[1]+" "+CostList[2]+" "+CostList[3]+" "+CostList[4]+" "+CostList[5]+" "+CostList[6]+" "+CostList[7]+" "+CostList[8]+" "+CostList[9]);
            System.out.println(ViaList[0]+" "+ViaList[1]+" "+ViaList[2]+" "+ViaList[3]+" "+ViaList[4]+" "+ViaList[5]+" "+ViaList[6]+" "+ViaList[7]+" "+ViaList[8]+" "+ViaList[9]);
            }catch (SocketTimeoutException e) {
                //System.err.println("Caught SocketException: " + e.getMessage());
                System.out.println("Timeout reached!!! " + e);
                nodeSocket.close();
                nodeSocket = new DatagramSocket(NodePort);
                current = System.currentTimeMillis();

            }
            catch (SocketException e1){
                System.out.println("Socket closed " + e1);
            }

        }
        //Broadcast List
        System.out.println("broadcast");

        broadcast = current + 1 * 1000;
        current = System.currentTimeMillis();
        if (ischanged) {
            end = current + 10 * 1000;
        }
        //braodcast...
        OutMsg = CostList[0]+"\t"+CostList[1]+"\t"+CostList[2]+"\t"+CostList[3]+"\t"+CostList[4]+"\t"+CostList[5]+"\t"+CostList[6]+"\t"+CostList[7]+"\t"+CostList[8]+"\t"+CostList[9];
        sendData = OutMsg.getBytes();
        for (int i = 0; i < numNbr; i++){
            DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, Nbr.getPort(i));
            nodeSocket.send(sendPacket);
        }

    }

    //Print List
    //Shortest path to node B: the next hop is C and the cost is 5
    for(int i = 0; i <10; i++) {
        if(ViaList[i] != 9999){
            System.out.println("Shortest path to node "+(char)(i+65)+": the next hop is "+(char)(ViaList[i])+" and the cost is "+CostList[i]);
        }
    }

    System.out.println("end");

}

}

class Neighbour {

public Neighbour(){
    NbrIDList = new ArrayList<Integer>();
    NbrPortList = new ArrayList<Integer>();
    NbrCostList = new ArrayList<double[]>();
}

public void addData(int ID, int Port){
    NbrIDList.add(ID);
    NbrPortList.add(Port);
}

public void addCost(double[] Cost){
    NbrCostList.add(Cost);
}

public int getID(int idx){
    return (Integer) NbrIDList.get(idx);
}

public int getPort(int idx){
    return (Integer) NbrPortList.get(idx);
}

public int indexOfPort(int Port){
    return (Integer) NbrPortList.indexOf(Port);
}

public double[] getCost(int idx){
    return (double[]) NbrCostList.get(idx);
}

public void updateCost(int idx, double[] Cost){
    NbrCostList.set(idx,Cost);
}

private ArrayList<Integer> NbrIDList;
private ArrayList<Integer> NbrPortList;
private ArrayList<double[]> NbrCostList;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:22:17.320

网络几乎是 99.8% 的线程。为了解决您的问题，您可以创建一个线程来接收消息，并创建第二个线程用于每 5 秒发送消息。

对此有很多疑问：

[Java：多线程和 UDP 套接字编程](https://stackoverflow.com/questions/2687238/java-multithreading-udp-socket-programming)

[如何在 Java 中实现基于线程的 UDP 服务器？](https://stackoverflow.com/questions/773121/how-can-i-implement-a-threaded-udp-based-server-in-java)

java2s也不错：

[服务器](http://www.java2s.com/Tutorial/Java/0320__Network/0141__UDP-Server.htm)

[客户](http://www.java2s.com/Tutorial/Java/0320__Network/0140__UDP-Client.htm)

# c++ - 如何在 Xcode 4.5 中启用 MacPorts 安装的 gcc4.7（和 libstdc++）？

> ID：12861024
> 
> 赞同：1
> 
> 时间：2012-10-12T14:16:36.327
> 
> 标签：c++, gcc, compiler-construction

我已经通过 MacPorts 安装了 gcc4.7（希望是它的相关版本的 stdlibc++），现在我需要启用它，以便我可以在 Xcode（目前是 4.5 版）中使用它。有人知道该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:42:30.920

您可以使用 MacPorts 的“选择”命令。

> 端口选择--list gcc

将显示已安装 gcc 的列表。

> sudo 端口选择 gcc

将激活已安装的 gcc。应指定该列表之一。（例如 mp-gcc47

# web-services - Spring 3 MVC + Web 服务 (JAX-WS)

> ID：12861026
> 
> 赞同：2
> 
> 时间：2012-10-12T14:16:41.817
> 
> 标签：web-services, spring-mvc, jax-ws

我们有一个 Spring 3 MVC web 应用程序，我们正在尝试使用 Web 服务对其进行扩展。

我现在尝试使用 JAX-WS Web 服务，在适当的位置注释 WebService 和 WebMethod。我的 web.xml 中确实有一个调度程序。这是标准的 Spring DispatcherServlet。它的配置：dispatcher-servlet.xml 对于 MVC 的东西来说工作得很好。

当我尝试公开 WebServices 时，问题就来了。我通过将以下 bean 添加到 dispatcher-servlet.xml 中来做到这一点：

```
<bean class="org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter">
    <property name="baseAddress" value="http://localhost:8080/service/" />
</bean> 
```

如果添加了这个bean。然后 WebServices 完美地工作，但所有 MVC 的东西都停止工作了。

所以我的第二次尝试是创建 2 个调度程序。一个名为 mvc-dispatcher 和一个 webservice-dispatcher。它们中的每一个都分别映射到 /mvc 和 /ws。然后只将 SimpleJaxWsServiceExporter 放在 webservice-config 中，而仅将标准 MVC 东西放在另一个中。但还是同样的问题。如果我禁用/注释掉 Web 服务调度程序，我只能让 MVC 工作。

我不敢相信这应该如此复杂......我没有得到什么？

任何帮助将不胜感激。我找不到任何像样的 JAX-WS 和 spring 3 MVC 教程......

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:46:07.190

我假设调度员是指春季调度员，我建议不要这样做。只需让 JAX-WS 自己成为一个不同的 servlet，即

[https://cwiki.apache.org/GMOxDOC20/simple-web-service-with-jax-ws.html](https://cwiki.apache.org/GMOxDOC20/simple-web-service-with-jax-ws.html)

然后，如果您需要允许注入 Spring bean，请`SpringBeanAutowiringSupport`像本例中那样扩展。

[如何使@WebService 具有弹簧意识](https://stackoverflow.com/questions/5041154/how-to-make-an-webservice-spring-aware)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-23T22:44:17.923

可以使用 Apache CXF，它实现了 JAXWS 规范，与 Spring 有很好的集成，实际上 CXF 在幕后使用了 Spring。

在实践中，您可以这样进行：

在您的 web.xml 中，您已经配置了 cxf servlet，如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
           version="3.0">

....
    <servlet>
        <description>Apache CXF Endpoint</description>
        <display-name>cxf</display-name>
        <servlet-name>cxf</servlet-name>
        <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>cxf</servlet-name>
        <url-pattern>/ws/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

Apache CXF 配置

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jaxws="http://cxf.apache.org/jaxws"
       xmlns:jaxrs="http://cxf.apache.org/jaxrs"
       xmlns:soap="http://cxf.apache.org/bindings/soap"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
                           http://cxf.apache.org/jaxws
                           http://cxf.apache.org/schemas/jaxws.xsd
                           http://cxf.apache.org/jaxrs
                           http://cxf.apache.org/schemas/jaxrs.xsd
                           http://cxf.apache.org/bindings/soap
                           http://cxf.apache.org/schemas/configuration/soap.xsd">

    <import resource="classpath:META-INF/cxf/cxf.xml" />
    <import resource="classpath*:META-INF/cxf/cxf-extension-*.xml" />
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml"/>

    <jaxws:endpoint
            id="yourService"
            implementor="#yourService"
            address="/yourAddres">
    </jaxrs:server>
</beans> 
```

你的豆子

```
 @Service
    @WebService(serviceName = "soapSvnClientService")
    public class SoapSvnClientService {

        @WebMethod(operationName = "service")
        public void service(@WebParam String param1,
                           @WebParam String param2){

    ....
    }

 } 
```

我希望这可以帮助你

# freebase - 在 Freebase 中使用 MID 提取命名实体的名称

> ID：12861036
> 
> 赞同：2
> 
> 时间：2012-10-12T14:17:01.950
> 
> 标签：freebase

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:14:09.340

A better view of this data if you're doing programming is the explore/inspect view:

[http://www.freebase.com/inspect/m/01wz6kq](http://www.freebase.com/inspect/m/01wz6kq)

As a matter of fact, it even gives you a little shortcut for building a query. If you click on the arrow to the left of the `/music/recording_contribution/album` property, you'll get a pre-built query which you can modify to fetch the name instead of the ID:

```
{
  "id": "/m/01wz6kq",
  "/music/recording_contribution/album": {
    "name": null
  }
}​ 
```

If you click on the Link button in the [Query Editor](https://dev.freebase.com/query?lang=/lang/en&q=%7B%22id%22%3a%22/m/01wz6kq%22,%22/music/recording_contribution/contributor%22%3a%7B%22name%22%3anull%7D%7D) you'll get an [MQLRead link](https://www.googleapis.com/freebase/v1/mqlread/?lang=/lang/en&query=%7B%20%22id%22%3a%20%22/m/01wz6kq%22,%20%22/music/recording_contribution/contributor%22%3a%20%7B%20%22name%22%3a%20null%20%7D%20%7D) that gives you back JSON you can parse to get the name.

Of course if you were doing this in the program, you'd construct the URL on the fly from a template with the ID of interest inserted.

NOTE: you do not want to be doing anything that references api.freebase.com because that's going away soon. You should be using the googleapis.com endpoint.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:32:56.913

This entity has no `/type/object/name` property

BTW If you want to extract entity names, there are some properties:

```
/type/object/name
/common/topic/alias 
```

and wikipedia keys, which need to be processed in some way (replace "_" with space, "&" with "&", "$1234" with some unicode symbol)

# ruby - 在没有 Xcode 命令行工具的情况下安装 Ruby 时出错：没有这样的文件，但它存在

> ID：12861038
> 
> 赞同：0
> 
> 时间：2012-10-12T14:17:05.843
> 
> 标签：ruby, macos, bash, compiler-errors, rvm

我正在安装没有 Xcode 命令行工具的 RVM 和 Ruby（在 Mac OS X 10.8.2 (12C60) (Mountain Lion) 和 Xcode 4.5 (4G182) 上）。

RVM 安装良好。但是，当我尝试安装 Ruby 时，我得到了`error: limits.h: No such file or directory` [https://gist.github.com/3789921#L241](https://gist.github.com/3789921#L241)。

但是，该文件存在那里是因为`cat`有效，因此也有效：

```
$ file /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/../lib/gcc/i686-apple-darwin11/4.2.1/include/limits.h
/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/../lib/gcc/i686-apple-darwin11/4.2.1/include/limits.h: ASCII c program text 
```

那么，为什么 bash 说它不存在呢？

以下问题类似但无济于事：

*   [“没有这样的文件或目录”但它存在](https://stackoverflow.com/questions/3949161/no-such-file-or-directory-but-it-exists)
*   [bash中的“没有这样的文件或目录”错误，但文件存在吗？](https://superuser.com/questions/344533/no-such-file-or-directory-error-in-bash-but-the-file-exists)
*   [-bash 没有这样的文件或目录，但它存在](https://stackoverflow.com/questions/7459037/bash-no-such-file-or-directory-but-it-exists)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:11:46.753

您需要安装 osx-gcc-installer（或命令行工具 + gcc-4.2）才能使其正常工作。

阅读`rvm requirements`有关正确安装 ruby​​ 所需的信息。

# jsp - Web 应用程序返回“白色”jsp 页面

> ID：12861039
> 
> 赞同：2
> 
> 时间：2012-10-12T14:17:10.660
> 
> 标签：jsp, caching, proxy

我对变成“白色”的网页有问题。该系统的设计使得系统 A 有一个 iframe 到 ( `iframe src="https://....`) 系统 B。系统 B 是一个基于会话的 struts Web 应用程序。

系统架构如下所示：

> 负载均衡器 -> 系统 A（iframe 系统 B） -> 负载均衡器 -> Apache 代理 -> 系统 B（Tomcat）

系统 B 中的网页（被 iframe 化的网页）有时对某些客户来说会变成白色。

我观察到的是，当页面变白时，系统 A 中的 iframe 对应用程序 B 的 http 调用没有到达 Web 服务器（我检查了 Web 服务器日志）。

**什么可能导致这个问题？**

首先我认为这是一个缓存问题，但为什么页面会变“白”？如果我清除 Web 浏览器中的缓存，页面有时会重新开始为客户工作。

如果 Web 浏览器配置了代理，它会导致这样的问题吗？

如果我直接访问应用程序 B，一切正常，但如果我通过系统 A（iframe）访问系统 B，有时客户会遇到“白”页问题。

我的想法已经用完了，任何人都可以引导我朝着正确的方向前进吗？我需要一些帮助

```
System B data:
Tomcat 7
Java 6
Struts 
```

# algorithm - 选择排序算法的标准

> ID：12861041
> 
> 赞同：1
> 
> 时间：2012-10-12T14:17:20.553
> 
> 标签：algorithm, c++-concepts

我很想知道如何根据输入选择排序算法，以便获得最佳效率。

应该是输入的大小还是输入的排列方式（Asc / Desc）或使用的数据结构等......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:34:04.850

一般来说，算法的重要性，以及在排序算法中的重要性如下：

(*)**正确性**——这是最重要的。如果您的算法超级快速且高效，但它是错误的，那么它一文不值。在排序中，即使您有 2 个正确排序的候选者，但您需要一个[**稳定的排序**](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)- 即使它效率较低，您也会选择稳定的排序算法 - 因为它对您的目的是正确的，而另一个则不是。

接下来基本上是**在运行时间、所需空间和实现时间之间进行权衡**（如果您需要从头开始实现某些东西而不是使用库，以实现较小的性能增强 - 这可能不值得）

在考虑上述权衡时需要考虑的一些事项：

1.  **输入的大小**（例如：对于小输入，插入排序在经验上比更高级的算法更快，尽管它需要`O(n^2)`）。
2.  **输入的位置**（磁盘上的排序算法与 RAM 上的算法不同，因为磁盘读取在非顺序时效率要低得多。通常用于在磁盘上排序的算法是合并排序的一种变体）。
3.  **数据如何分布**？如果数据可能“几乎排序” - 也许通常糟糕的冒泡排序可以在 2-3 次迭代中对其进行排序，并且与其他算法相比非常快。
4.  你已经实现了哪些**库？**实施新事物需要做多少工作？值得吗？
5.  输入的类型（和范围） - 对于**可枚举**数据（例如整数） - 整数设计算法（如基数排序）可能比一般情况算法更有效。
6.  **延迟要求**- 如果您正在设计导弹头，并且结果必须在特定时间内返回，那么在最坏情况下可能会衰减到二次运行时间的快速排序 - 可能不是一个好的选择，您可能希望使用不同的算法它有一个严格的`O(nlogn)`最坏情况。
7.  **你的硬件**——例如，如果你使用一个巨大的集群和一个巨大的数据——分布式排序算法可能会比尝试在一台机器上完成所有工作更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T14:33:00.580

它应该基于所有这些。

*   您需要考虑数据的大小，因为对于小型数据集等，插入排序可能比快速排序更快

*   由于每种算法的最坏/平均/最佳情况渐近运行时间不同，您需要知道数据的排列（其中一些最坏/平均情况相同，而另一种可能具有明显更差的最坏情况与平均）

*   而且您显然需要知道使用的数据结构，因为如果您的数据已经采用特殊格式，或者即使您可以有效地将其放入一个新的数据结构中，它会自动为您进行排序（a la BST 或堆）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:35:34.273

决定您选择排序算法的两个主要因素是**时间复杂度**和**空间复杂度**。根据您的方案和可用的资源（时间和内存），您可能需要根据每种排序算法必须提供的内容在排序算法之间进行选择。

排序算法的实际性能也取决于输入数据，如果我们事先知道输入数据的某些特征，例如输入的大小、数组已经排序的程度，将会有所帮助。

例如，如果您事先知道输入数据只有 1000 个非负整数，则可以很好地使用`counting sort`线性时间对这样的数组进行排序。

排序算法的选择取决于空间和时间的限制，以及输入数据的大小/特征。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:07:45.930

在非常高的水平上，您需要考虑插入与每种算法比较的比率。

对于文件中的整数，这不会有很大的相关性，但如果说您正在根据内容对文件进行排序，您自然会希望尽可能少地进行比较。

# c++ - 无法在 BackgroundSubtractorMOG2 中设置用户参数

> ID：12861047
> 
> 赞同：7
> 
> 时间：2012-10-12T14:17:37.943
> 
> 标签：c++, opencv, background-subtraction

OpenCV 库版本 2.42。我想在`BackgroundSubtractorMOG2`对象中设置一个参数，例如

```
BackgroundSubtractorMOG2 bgr;  

// the following doesn't work because 'nmixtures', 'backgroundRatio' 
// and 'fVarMin' are a protected members.
bgr.nmixtures = 3;   
bgr.backgroundRatio = 0.9;
bgr.fVarMin = 5; 

// the following works 
bgr.set('nmixtures', 3); 

// both of the following lines will give a run-time error 
// `Access violation reading location 0x0000000000000008.`
bgr.set("backgroundRatio", 0.9);  
bgr.set("fVarMin", 5); 
```

`backgroundRatio``fVarMin`是控制算法的参数。用户应该能够根据[文档](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html?highlight=backgroundsubtractormog2#backgroundsubtractormog2)更改这些参数。

怎么设置参数`BackgroundSubtractorMOG2`？

**编辑**正如在下面的答案中正确提到的，这是 OpenCV 中的一个错误。该错误已在 OpenCV 版本 2.4.6 中修复。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T22:28:15.947

我刚刚查看了 OpenCV 源代码，并在 file 中发现了有趣的初始化`/modules/video/src/video_init.cpp`。这里是：

```
CV_INIT_ALGORITHM(BackgroundSubtractorMOG2, "BackgroundSubtractor.MOG2",
    obj.info()->addParam(obj, "history", obj.history);
    obj.info()->addParam(obj, "nmixtures", obj.nmixtures);
    obj.info()->addParam(obj, "varThreshold", obj.varThreshold);
    obj.info()->addParam(obj, "detectShadows", obj.bShadowDetection)); 
```

似乎可以使用 method 仅设置这四个参数`set`。

还可以看看 file `modules/video/src/bgfg_gaussmix2.cpp`，它有一个`BackgroundSubtractorMOG2`类。它具有以下字段：

```
float fVarInit;
float fVarMax;
float fVarMin;
//initial standard deviation  for the newly generated components.
//It will will influence the speed of adaptation. A good guess should be made.
//A simple way is to estimate the typical standard deviation from the images.
//I used here 10 as a reasonable value 
```

并且值`fVarMin`（您要更改）设置为：

```
fVarMin = defaultVarMin2 
```

在两个构造函数中。以下是所有这些：

```
static const float defaultVarInit2 = 15.0f; // initial variance for new components
static const float defaultVarMax2 = 5*defaultVarInit2;
static const float defaultVarMin2 = 4.0f; 
```

有趣的事实是，该值未在任何其他文件中使用，因此目前似乎无法更改它。您可以将此问题直接发布到[OpenCV bugtracker](http://code.opencv.org/projects/opencv)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T14:57:26.417

是的，`bgr.set("nmixtures",3);`应该工作。`BackgroundSubtractorMOG2`继承自`cv::Algorithm`，因此您可以使用`cv:Algorithm::get`和`cv::Algorithm::set`访问这些参数。你试过了吗，它不起作用？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T21:31:42.630

由于这些参数受到保护，派生类可以访问它们。我创建了一个派生类来设置所有必要的参数。

```
struct BackgroundModel2ParameterBlock {
int nmixtures;
float backgroundRatio;
float varThresholdGen;
float fVarInit;
float fVarMin;
float fVarMax;
BackgroundModel2ParameterBlock(void) :
  nmixtures(3),
  backgroundRatio(0.6),
  varThresholdGen(6.25),
  fVarInit(256),
  fVarMin(256),
  fVarMax(9e2)
{ }
};

class BackgroundModel2 : public cv::BackgroundSubtractorMOG2 {
private:
  BackgroundModel2ParameterBlock m_param;
};

BackgroundModel2::BackgroundModel2(BackgroundModel2ParameterBlock param):
  BackgroundSubtractorMOG2(),
  m_param(param)
{
  nmixtures = m_param.nmixtures;
  backgroundRatio = m_param.backgroundRatio;
  varThresholdGen = m_param.varThresholdGen;
  fVarInit = m_param.fVarInit;
  fVarMin = m_param.fVarMin;
  fVarMax = m_param.fVarMax;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-18T11:52:31.607

在`android`中，使用算法函数：`setDouble`, `setInt`, `setBool`: 这有效：

```
mBgMog2 = new BackgroundSubtractorMOG2(mHistory,mMog2Threshold );  
mBgMog2.setInt("nmixtures" , 3);
mBgMog2.setDouble("fVarInit" , 80.0);
mBgMog2.setDouble("fTau" , 0.2);
mBgMog2.setDouble("fVarMin" , 200.0);
mBgMog2.setDouble("fVarMax" , 80.0);
mBgMog2.setBool("detectShadows",false); 
```

# .net - 修复 ComboBox 无法绑定 observalbe 集合

> ID：12861050
> 
> 赞同：1
> 
> 时间：2012-10-12T14:17:49.473
> 
> 标签：.net, wpf, binding, combobox

我有一个带有 GridView 列的组合框：

```
...
            <GridView AllowsColumnReorder="True" ColumnHeaderToolTip="Info test">
               <GridViewColumn Header="Number" Width="120">
                  <GridViewColumn.CellTemplate>
                     <DataTemplate>
                        <ComboBox ItemsSource="{Binding Path=extensions}" Width="105" IsEditable="True" HorizontalAlignment="Center" Margin="0,0,0,0" BorderThickness="0">
                           <ComboBox.Resources>
                              <sys:Double x:Key="{x:Static SystemParameters.VerticalScrollBarWidthKey}">15</sys:Double>
                           </ComboBox.Resources>
                        </ComboBox>
                     </DataTemplate>
                  </GridViewColumn.CellTemplate>
               </GridViewColumn>
            </GridView>
... 
```

在后面的代码中，“扩展”是`ObserverableCollection<string>`100% 被初始化和填充的（这是在类构造函数中）：

```
public partial class MyForm : Window
{
   ...
   public ObservableCollection<string> extensions;
   ...

   public MyForm()
   {
      ...
      Initialize();
   }

   private Initialize()
   {
       extensions = new ObservableCollection<string>();
       extensions.Add("x100");
       extensions.Add("x101");
   }
} 
```

但是当应用程序在组合框出现时运行时，绑定永远不会发生。需要哪些额外步骤才能完成/正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:35:27.637

首先不要使用公共字段，而是使用属性。据我所知，公共领域不适用于绑定。

```
public ObservableCollection<string> extensions {get; private set;} 
```

其次，可能组合框的数据上下文未设置为 MyForm 实例。试试这个

```
<ComboBox ItemsSource="{Binding Path=extensions, RelativeSource={RelativeSource AncestorType={x:Type MyForm}}}" ... > 
```

# android - singleTop Activity 未获取 Intent

> ID：12861051
> 
> 赞同：3
> 
> 时间：2012-10-12T14:17:56.483
> 
> 标签：android, android-intent, notifications

我有一个 Activity 被定义为 singleTop 以便只有一个实例存在。

```
 <activity
        android:name=".MyMainActivity"
        android:label="@string/app_name" 
        android:configChanges="keyboard|keyboardHidden|orientation|screenSize" 
        android:launchMode="singleTop" android:multiprocess="true"> 
```

我用一些数据设置了一个通知意图，并将其包含在一个 PendingIntent 中，并将其发送到通知管理器。

```
Intent notificationIntent = new Intent(context, MyMainActivity.class); 
notificationIntent.setAction(MyMainActivity.CustomInternalMessageAction);
notificationIntent.putExtra(MyMainActivity.ReceiveTestMessage, rawMessageText);

...
PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
mNotificationManager.notify(number, notification); 
```

如果活动未运行，则意图按预期通过 onCreate() 启动活动。

如果活动正在运行，但处于停止状态/不在前台（如单击主页按钮时），并且单击了通知，则按预期调用我的活动的 onNewIntent()。

但是，如果 Activity 在前台时已被调用，则不会调用 onNewIntent()。

如何设置此通知，以便当我的 singleTop Activity 处于暂停/停止状态时发送意图（并且在我提到的其他情况下仍然有效）。我认为在我的 notificationIntent 对象上设置了一个标志，但是对于 singleTop 活动的情况，标志的功能并不是很清楚。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T17:01:31.983

如果您的应用程序由多个活动组成，`singleTop`那么如果您希望`onNewIntent()`在该活动处于活动状态时接收呼叫，则还需要定义其余活动。

假设主要活动是`A`并且被定义为`singleTop`并从那里开始活动`B`未定义为`singleTop`。如果现在您选择一个调用您的应用程序的通知，该应用程序将在活动中启动`B`但`onNewIntent()`不会被调用。

您还可以覆盖此行为，添加从堆栈`Intent.FLAG_ACTIVITY_CLEAR_TOP`中删除活动的标志，活动将接收 on 的调用。`B``A``onNewIntent()`

# java - 如何使用 Java/Apache POI 获取文件摘要信息

> ID：12861054
> 
> 赞同：2
> 
> 时间：2012-10-12T14:18:06.310
> 
> 标签：java, apache-poi, summary

我正在尝试使用 JAVA 从文件中获取摘要信息，但我找不到任何东西。我试过了`org.apache.poi.hpsf.*`。

我需要作者、主题、评论、关键字和标题。

```
 File rep = new File("C:\\Cry_ReportERP006.rpt");

        /* Read a test document <em>doc</em> into a POI filesystem. */
        final POIFSFileSystem poifs = new POIFSFileSystem(new FileInputStream(rep));
        final DirectoryEntry dir = poifs.getRoot();
        DocumentEntry dsiEntry = null;
        try
        {
            dsiEntry = (DocumentEntry) dir.getEntry(DocumentSummaryInformation.DEFAULT_STREAM_NAME);
        }
        catch (FileNotFoundException ex)
        {
            /*
             * A missing document summary information stream is not an error
             * and therefore silently ignored here.
             */
        }

        /*
         * If there is a document summry information stream, read it from
         * the POI filesystem.
         */
        if (dsiEntry != null)
        {
            final DocumentInputStream dis = new DocumentInputStream(dsiEntry);
            final PropertySet ps = new PropertySet(dis);
            final DocumentSummaryInformation dsi = new DocumentSummaryInformation(ps);
            final SummaryInformation si = new SummaryInformation(ps);

            /* Execute the get... methods. */
            System.out.println(si.getAuthor()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:23:21.057

正如[http://poi.apache.org/overview.html](http://poi.apache.org/overview.html)的 POI 概述中所解释的，文件解析器的类型更多。以下示例从 2003 办公文件中提取作者/创建者：

```
public static String parseOLE2FileAuthor(File file) {
String author=null;
try {

    FileInputStream stream = new FileInputStream(file);
    POIFSFileSystem poifs = new POIFSFileSystem(stream);
    DirectoryEntry dir = poifs.getRoot();
    DocumentEntry siEntry =      (DocumentEntry)dir.getEntry(SummaryInformation.DEFAULT_STREAM_NAME);
    DocumentInputStream dis = new DocumentInputStream(siEntry);
    PropertySet ps = new PropertySet(dis);
    SummaryInformation si = new SummaryInformation(ps);

    author=si.getAuthor();
    stream.close();

} catch (IOException ex) {
    ex.getStackTrace();
} catch (NoPropertySetStreamException ex) {
    ex.getStackTrace();
} catch (MarkUnsupportedException ex) {
    ex.getStackTrace();
} catch (UnexpectedPropertySetTypeException ex) {
    ex.getStackTrace();
}
return author; 
```

}

对于 docx、pptx、xlsx，POI 有专门的类。.docx 文件示例：

```
public static String parseDOCX(File file){
String author=null;
FileInputStream stream;
try {
    stream = new FileInputStream(file);
    XWPFDocument docx = new XWPFDocument(stream);
    CoreProperties props = docx.getProperties().getCoreProperties();
    author=props.getCreator();
    stream.close();
} catch (FileNotFoundException ex) {
   ex.printStackTrace();
} catch (IOException ex) {
    ex.printStackTrace();
}

return author;
} 
```

用于 PPTX 使用 XMLSlideShow 或 XMLWorkbook 而不是 XMLDocument。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:26:49.973

请在此处找到示例代码 - [**Appache POI 如何**](http://poi.apache.org/hpsf/how-to.html)

简而言之，您可以是一个监听器`MyPOIFSReaderListener`：

```
 SummaryInformation si = (SummaryInformation)
             PropertySetFactory.create(event.getStream());
    String title = si.getTitle();
    String Author= si.getLastAuthor();
    ...... 
```

并将其注册为：

```
 POIFSReader r = new POIFSReader();
    r.registerListener(new MyPOIFSReaderListener(),
                   "\005SummaryInformation");
    r.read(new FileInputStream(filename)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-17T01:58:43.260

对于 2003 的 office 文件，您可以使用从 POIDocument 继承的类。这是 doc 文件的示例：

```
FileInputStream in = new FileInputStream(file);
HWPFDocument doc = new HWPFDocument(in);
author = doc.getSummaryInformation().getAuthor(); 
```

和 HSLFSlideShowImpl 用于 ppt，
HSSFWorkbook 用于 xls，
HDGFDiagram 用于 vsd。

SummaryInformation 类中还有许多其他文件信息。

对于 2007 年或以上的办公文件，请参阅@Dragos Catalin Trieanu 的答案

# java-me - 如何删除未使用的 LWUIT 类？

> ID：12861058
> 
> 赞同：0
> 
> 时间：2012-10-12T14:18:11.793
> 
> 标签：java-me, lwuit

我使用 Lwuit 库编写了一个简单的 J2ME 应用程序，它运行良好，但我的问题是，即使我的代码非常小，但应用程序大小变为 700kb 意味着所有 lwuit 类都包含在我的应用程序中，尽管我只使用 5-它的6个班级。我还尝试过使用高级别的混淆和减小应用程序大小，但它的大小仍然很大，大约 300kb（仅适用于 HelloWorld！）。所以请告诉我有什么方法可以删除这些未使用的类并使这个应用程序更小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:10:57.537

如果您正确地进行了混淆（如果您使用的是 netbeans，这非常简单），那么任何未使用的类都将被删除。我不建议手动删除 .class 文件，因为 jar 大小是 jad 和/或清单文件中的一个重要字段。

当你打开 jar 时，你看到一堆 .class 文件了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T05:36:11.970

我想你可以用winRar之类的应用程序打开.jar并删除你不会使用的.class，但要小心删除这个.class。

# r - 从列表中四舍五入到最接近的任意数字

> ID：12861061
> 
> 赞同：15
> 
> 时间：2012-10-12T14:18:20.207
> 
> 标签：r

我基本上是在寻找一种在 R中对[这个 Ruby 脚本](https://stackoverflow.com/questions/3160502/ruby-round-number-down-to-nearest-number-based-on-arbitrary-list-of-numbers)
进行变体的方法。 我有一个**任意的数字列表**（在这种情况下，用于回归图的主持人的步骤），它们之间的距离不相等，而且我我想将这些数字周围范围内的值四舍五入到列表中最接近的数字。范围不重叠。

```
arbitrary.numbers <- c(4,10,15) / 10
numbers <- c(16:1 / 10, 0.39, 1.45)
range <- 0.1 
```

预期输出：

```
numbers
## 1.6 1.5 1.4 1.3 1.2 1.1 1.0 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0.39 1.45
round_to_nearest_neighbour_in_range(numbers,arbitrary.numbers,range)
## 1.5 1.5 1.5 1.3 1.2 1.0 1.0 1.0 0.8 0.7 0.6 0.4 0.4 0.4 0.2 0.1 0.4 1.5 
```

我有一个小辅助函数可以解决我的特定问题，但它不是很灵活，它包含一个循环。我可以在这里发布，但我认为真正的解决方案看起来会完全不同。

## 为速度计时的不同答案（在一百万个数字上）

```
> numbers = rep(numbers,length.out = 1000000)
> system.time({ mvg.round(numbers,arbitrary.numbers,range) })[3]
elapsed 
  0.067 
> system.time({ rinker.loop.round(numbers,arbitrary.numbers,range) })[3]
elapsed 
  0.289 
> system.time({ rinker.round(numbers,arbitrary.numbers,range) })[3]
elapsed 
  1.403 
> system.time({ nograpes.round(numbers,arbitrary.numbers,range) })[3]
elapsed 
  1.971 
> system.time({ january.round(numbers,arbitrary.numbers,range) })[3]
elapsed 
  16.12 
> system.time({ shariff.round(numbers,arbitrary.numbers,range) })[3]
elapsed 
15.833 
> system.time({ mplourde.round(numbers,arbitrary.numbers,range) })[3]
elapsed 
  9.613 
> system.time({ kohske.round(numbers,arbitrary.numbers,range) })[3]
elapsed 
 26.274 
```

MvG的函数是最快的，比Tyler Rinker的第二个函数快5倍左右。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T14:58:46.163

一个向量化的解决方案，没有任何`apply`族函数或循环：

关键是`findInterval`，它找到`arbitrary.numbers`每个元素在`numbers`“之间”的“空间”。所以，`findInterval(6,c(2,4,7,8))`返回`2`，因为`6`在 的第二个和第三个索引之间`c(2,4,7,8)`。

```
# arbitrary.numbers is assumed to be sorted.
# find the index of the number just below each number, and just above.
# So for 6 in c(2,4,7,8) we would find 2 and 3.
low<-findInterval(numbers,arbitrary.numbers) # find index of number just below
high<-low+1 # find the corresponding index just above.

# Find the actual absolute difference between the arbitrary number above and below.
# So for 6 in c(2,4,7,8) we would find 2 and 1\. 
# (The absolute differences to 4 and 7).
low.diff<-numbers-arbitrary.numbers[ifelse(low==0,NA,low)]
high.diff<-arbitrary.numbers[ifelse(high==0,NA,high)]-numbers

# Find the minimum difference. 
# In the example we would find that 6 is closest to 7, 
# because the difference is 1.
mins<-pmin(low.diff,high.diff,na.rm=T) 
# For each number, pick the arbitrary number with the minimum difference.
# So for 6 pick out 7.
pick<-ifelse(!is.na(low.diff) & mins==low.diff,low,high)

# Compare the actual minimum difference to the range. 
ifelse(mins<=range+.Machine$double.eps,arbitrary.numbers[pick],numbers)
# [1] 1.5 1.5 1.5 1.3 1.2 1.0 1.0 1.0 0.8 0.7 0.6 0.4 0.4 0.4 0.2 0.1 0.4 1.5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T16:44:49.293

另一个解决方案使用`findInterval`：

```
arbitrary.numbers<-sort(arbitrary.numbers)          # need them sorted
range <- range*1.000001                             # avoid rounding issues
nearest <- findInterval(numbers, arbitrary.numbers - range) # index of nearest
nearest <- c(-Inf, arbitrary.numbers)[nearest + 1]  # value of nearest
diff <- numbers - nearest                           # compute errors
snap <- diff <= range                               # only snap near numbers
numbers[snap] <- nearest[snap]                      # snap values to nearest
print(numbers) 
```

上面代码中的`nearest`在数学上并不是最接近的数字。相反，它是最大的任意数`nearest[i] - range <= numbers[i]`，或等价于`nearest[i] <= numbers[i] + range`。因此，我们一口气找到了最大的任意数字，它要么在给定输入数字的捕捉范围内，要么仍然太小。出于这个原因，我们只需要检查一种方式`snap`。不需要绝对值，甚至不需要对这篇文章的先前版本进行平方。

感谢在数据帧上对指针进行[间隔搜索，因为我在](https://stackoverflow.com/questions/11705765/interval-search-on-a-data-frame)[nograpes](https://stackoverflow.com/a/12861810)`findInterval`的答案中识别它之前在那里找到了它。

如果与您的原始问题相反，您有重叠的范围，您可以这样写：

```
arbitrary.numbers<-sort(arbitrary.numbers)        # need them sorted
range <- range*1.000001                           # avoid rounding issues
nearest <- findInterval(numbers, arbitrary.numbers) + 1 # index of interval
hi <- c(arbitrary.numbers, Inf)[nearest]          # next larger
nearest <- c(-Inf, arbitrary.numbers)[nearest]    # next smaller
takehi <- (hi - numbers) < (numbers - nearest)    # larger better than smaller
nearest[takehi] <- hi[takehi]                     # now nearest is really nearest
snap <- abs(nearest - numbers) <= range           # only snap near numbers
numbers[snap] <- nearest[snap]                    # snap values to nearest
print(numbers) 
```

In this code, `nearest`really ends up being the nearest number. This is achieved by considering *both* endpoints of every interval. In spirit, this is very much like the [version by nograpes](https://stackoverflow.com/a/12861810), but it avoids using `ifelse` and `NA`, which should benefit performance as it reduces the number of branching instructions.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T14:42:49.427

这是你想要的吗？

```
> idx <- abs(outer(arbitrary.numbers, numbers, `-`)) <= (range+.Machine$double.eps)
> rounded <- arbitrary.numbers[apply(rbind(idx, colSums(idx) == 0), 2, which)]
> ifelse(is.na(rounded), numbers, rounded)
 [1] 1.5 1.5 1.5 1.3 1.2 1.0 1.0 1.0 0.8 0.7 0.6 0.4 0.4 0.4 0.2 0.1 0.4 1.5 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T14:43:12.150

请注意，由于舍入错误（很可能），我使用 range = 0.1000001 来达到预期的效果。

```
range <- range + 0.0000001

blah <- rbind( numbers, sapply( numbers, function( x ) abs( x - arbitrary.numbers ) ) )
ff <- function( y ) { if( min( y[-1] ) <= range + 0.000001 ) arbitrary.numbers[ which.min( y[ -1 ] ) ] else  y[1]  }
apply( blah, 2, ff ) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-12T14:53:40.453

这仍然更短：

```
sapply(numbers, function(x) ifelse(min(abs(arbitrary.numbers - x)) > 
range + .Machine$double.eps, x, arbitrary.numbers[which.min
(abs(arbitrary.numbers - x))] )) 
```

谢谢@MvG

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-12T14:51:03.027

另外一个选项：

```
arb.round <- function(numbers, arbitrary.numbers, range) {
    arrnd <- function(x, ns, r){ 
        ifelse(abs(x - ns) <= range +.00000001, ns, x)
    }
    lapply(1:length(arbitrary.numbers), function(i){
            numbers <<- arrnd(numbers, arbitrary.numbers[i], range)
        }
    )
    numbers
}

arb.round(numbers, arbitrary.numbers, range) 
```

产量：

```
> arb.round(numbers, arbitrary.numbers, range)
[1] 1.5 1.5 1.5 1.3 1.2 1.0 1.0 1.0 0.8 0.7 0.6 0.4 0.4 0.4 0.2 0.1 0.4 1.5 
```

编辑：我删除了函数末尾的返回调用，因为它没有必要并且可以消耗时间。

编辑：我认为这里的循环会更快：

```
loop.round <- function(numbers, arbitrary.numbers, range) {
    arrnd <- function(x, ns, r){ 
        ifelse(abs(x - ns) <= range +.00000001, ns, x)
    }
    for(i in seq_along(arbitrary.numbers)){
            numbers <- arrnd(numbers, arbitrary.numbers[i], range)
    }
    numbers
} 
```

# codeigniter - CI 多文件上传 - 不能上传超过 2 个文件

> ID：12861064
> 
> 赞同：0
> 
> 时间：2012-10-12T14:18:27.550
> 
> 标签：codeigniter, file-upload

此功能不能上传超过 2 张图片。如果尝试产生错误，

*消息：未定义的索引：用户文件*

**看法**
`<input name="userfile[]" id="userfile" type="file" multiple="" />`

**控制器**

```
 function do_upload() {

    $count = count($_FILES['userfile']['size']);

    foreach($_FILES as $key=>$value){
        for($n=0; $n<=$count-1; $n++) {
            $_FILES['userfile']['name']=$value['name'][$n];
            $_FILES['userfile']['type']    = $value['type'][$n];
            $_FILES['userfile']['tmp_name'] = $value['tmp_name'][$n];
            $_FILES['userfile']['error']       = $value['error'][$n];
            $_FILES['userfile']['size']    = $value['size'][$n];   

                $config['upload_path'] = './images/';
                $config['allowed_types'] = 'gif|jpg|png|jpeg';
                                    $config['max_size']       = 0;

            $this->load->library('upload', $config);
            $this->upload->do_upload();
            $data = $this->upload->data();
        }
    }   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:56:31.297

您绝对应该查看您的 php.ini 最大发布/上传大小。寻找如下值：

```
; Maximum allowed size for uploaded files.
upload_max_filesize = ##M

; Must be greater than or equal to upload_max_filesize
post_max_size = ##M 
```

并将 # 更改为适合您的值

# c# - 通过模型获取 NHibernate XML 映射属性？

> ID：12861068
> 
> 赞同：0
> 
> 时间：2012-10-12T14:18:42.127
> 
> 标签：c#, nhibernate, nhibernate-mapping

如果我有一个具有小数属性的模型：

```
<property name="Prop" column="prop" type="decimal" 
 precision="19" scale="4" not-null="true" /> 
```

是否可以在不解析 HBM 的情况下在 C#中获取`precision`和属性？`scale`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:36:07.637

ISessionFactory.GetClassMetadata()。查看返回的 IClassMetadata 中的 PropertyNames 和 PropertyTypes。

# php - 基本联系表单 php 不起作用，从我的表单中获取空消息

> ID：12861071
> 
> 赞同：0
> 
> 时间：2012-10-12T14:18:47.007
> 
> 标签：php, forms, email, contact

> **可能重复：**
> [我的联系表发送空白 body_messages](https://stackoverflow.com/questions/12859615/my-contact-form-sends-blank-body-messages)

我的联系表格正在发送电子邮件，但它们都是空的。我得到的只是这个；

```
From:
Email:
Company: 
```

我真的需要这个工作。

这是我的表格：

```
<form class="contact_form" action="kontakt.php" method="post">
<p><input type="text" required="required" id="name" name="name" class="text_input" size="22"  />
<label for="name">Namn *</label></p>

<p><input type="text" required="required" id="company" name="company" class="text_input" size="22"  />
<label for="company">Företag *</label></p>

<p><input type="email" required="required" id="email" name="email" class="text_input"  size="22"  />
<label for="email">Epost *</label></p>

<p><textarea required="required" name="content" class="textarea" cols="30" rows="5"></textarea></p>

<p><button type="submit" class="button white"><span>Skicka</span></button></p>
<input type="hidden" value="info@web.se" name="contact_to"/>
</form> 
```

这是我的 php：

```
<?php
$name = $_POST['name'];
$company = $_POST['company'];
$email = filter_input(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);
$content = $_POST['content'];
$mail_to = 'info@web.se';
$subject = 'Lilla form'.$name;
$body_message = 'From: '.$name."\n";
$body_message .= 'E-mail: '.$email."\n";
$body_message .= 'Message: '.$content;
$headers = 'From: '.$email."\r\n";
$headers .= 'Reply-To: '.$email."\r\n";
$mail_status = mail($mail_to, $subject, $body_message, $headers);
?> 
```

# c# - 为什么我会收到来自 Office 的 Outlook 库的异常？

> ID：12861072
> 
> 赞同：35
> 
> 时间：2012-10-12T14:18:49.050
> 
> 标签：c#, outlook, office-interop

我有一个应用程序调用

```
Email hello = new Email(appropriate constructor);
hello.Email_Send(); 
```

我收到异常：

> 由于以下错误，检索具有 CLSID {0006F03A-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80080005 服务器执行失败（来自 HRESULT 的异常：0x80080005 (CO_E_SERVER_EXEC_FAILURE)）。

从`System.Runtime.InteropServices.COMException`.

```
using O = Microsoft.Office.Interop.Outlook;    
class Email
{
    public void Email_Send()
    {
        O.Application outlook = new O.Application(); //Exception thrown here.
        O.MailItem message = outlook.CreateItem(O.OlItemType.olMailItem);
        message.To = Receiver;
        message.CC = Sender;
        message.Subject = Subject;
        message.Body = "This is an automated message sent at " + DateTime.Now.ToString("HH:mm:ss") + " about " + Body_Topic + System.Environment.NewLine + Body_Content ;
        message.Send();
    }
} 
```

这个错误以前从未发生过，我知道的代码也没有变化。[http://support.microsoft.com/kb/825118](http://support.microsoft.com/kb/825118)似乎不符合我的症状 - 我的电脑没有停止响应等。任何诊断问题的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-10-13T19:24:37.373

此错误是由以管理员身份运行的 Visual Studio 引起的。Outlook 不允许不同的用户访问同一个邮箱（我在桌面上打开了 Outlook 应用程序）。即使我对我的域用户具有本地管理员访问权限，以管理员身份运行 VS 也必须将进程关联到不同的用户对象？不完全确定这是如何工作的，但是......已解决。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-31T21:27:59.830

我遇到了同样的问题，如前所述：如果 Visual Studio 以管理员身份运行，则 Outlook 会阻止另一个具有不同用户的实例。我的 VS 解决方案正在启动几个项目，我需要它以管理员身份运行，所以我所做的是在调试时以管理员身份运行 Outlook。这解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-02T15:46:50.260

发布其中一条评论作为答案。

> 当我们关闭 Outlook 的运行实例时，它就像一个魅力。

在我的情况下，我在带有特殊安全软件的虚拟机下运行。在我的开发人员桌面上，当 Outlook 打开时它运行良好。

但是在我的安全虚拟机中，我必须关闭前景才能使其正常工作。这很可能是由于我们的安全软件造成的。

当 Outlook 保持运行时：`Unhandled Exception: System.Runtime.InteropServices.COMException: Retrieving the COM class factory for component with CLSID {0006F03A-0000-0000-C000-000000000046} failed due to the following error: 80080005 Server execution failed (Exception from HRESULT: 0x80080005 (CO_E_SERVER_EXEC_FAILURE)).`

当它不运行时，它工作正常。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-11-30T06:36:20.683

接受的答案并不完全准确。实际上，如果调用应用程序没有与原始进程相同的访问级别，COM 将失败。两者都需要处于相同的访问级别。

因此，如果 Outlook 以管理员身份启动，并且在 Visual Studio 中调试的程序也是管理员，那么它将工作。

反之亦然：如果 Outlook 不是以管理员身份启动的，那么在 Visual Studio 中调试的程序也需要是非管理员的。

此外，如果不包含`COMReference`to ，您也可以收到此消息`Microsoft.Office.Core`。

# c# - 将 `UInt16` 转换为字节数组

> ID：12861074
> 
> 赞同：0
> 
> 时间：2012-10-12T14:18:58.920
> 
> 标签：c#, .net, bit-manipulation, bitconverter

如何将值转换`UInt16`为大小为 2 的字节数组

我在 MSDN 中找到了一些代码，但我不确定在我的情况下是否可以使用：

```
// Convert a ushort argument to a byte array and display it. 
public static void GetBytesUInt16( ushort argument )
{
    byte[ ] byteArray = BitConverter.GetBytes( argument );
    Console.WriteLine( formatter, argument, 
        BitConverter.ToString( byteArray ) );
} 
```

我所拥有的是`UInt16`......可以将其转换为`ushort`并使用上面的代码吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:20:00.807

UInt16 和 ushort 是相同的数据类型，所以是的

[http://msdn.microsoft.com/en-us/library/cbf1574z(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/cbf1574z(v=vs.80).aspx)

# c# - CreateServiceHost 方法受到保护，而 MSDN 说它是公共的

> ID：12861078
> 
> 赞同：0
> 
> 时间：2012-10-12T14:19:13.067
> 
> 标签：c#, .net, wcf

阅读[有关使用 ServiceHostFactory 扩展托管的 MSDN 教程](http://msdn.microsoft.com/en-us/library/aa702697%28v=vs.100%29.aspx)，有一个覆盖`CreateServiceHost`函数的示例：

```
public class DerivedFactory : ServiceHostFactory
{
   public override ServiceHost CreateServiceHost( Type t, Uri[] baseAddresses )
   {
      return new DerivedHost( t, baseAddresses )
   }
} 
```

但是，当我们查看类的实际定义时，[`CreateServiceHost`方法](http://msdn.microsoft.com/en-us/library/system.servicemodel.activation.servicehostfactory%28v=vs.100%29.aspx)是`protected`：

```
protected virtual ServiceHost CreateServiceHost(
    Type serviceType,
    Uri[] baseAddresses
) 
```

我的问题是，我应该覆盖什么？MSDN 示例错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:33:44.937

`protected`关键字只是意味着它只能从该类的类或子类中访问。如果你想继承自`ServiceHostFactory`，你不应该有问题。您仍然可以覆盖`CreateServiceHost`.

# javascript - 动态创建时在单击选项上隐藏 div

> ID：12861079
> 
> 赞同：0
> 
> 时间：2012-10-12T14:19:13.753
> 
> 标签：javascript, jquery, html

我正在尝试动态创建 div 并显示它们。当我尝试隐藏创建的 divs`//First`功能时，它工作得很好，但这不是我想要的。我正在定义一个关闭按钮，我希望在单击关闭按钮时隐藏 div。在运行该`//Second`函数时，单击父 div 后，它会隐藏其所有子 div。IE 当我单击第一个 div 时，它会隐藏之后调用的所有 div。

**代码：**

```
var newImageBoxdiv = $(document.createElement('div')).attr({ class:"demo"+i, id:"image"});
newImageBoxdiv.html("<img id='MyImage' src='"+d+"'><div class='ImageWindowCloseButton' ></div>");
newImageBoxdiv.insertAfter('.demo');

$('#image').show(); 
i++;

 //First Function
 $('#image').click(function(event){  //Works Perfect

  $(newImageBoxdiv).hide();
  event.stopPropagation();
  event.cancelBubble = true;

 });

 //Second function
 $('.ImageWindowCloseButton').click(function(event){ // Deletes Child element when clicked on parent

  $(newImageBoxdiv).hide();
  event.stopPropagation();
  event.cancelBubble = true;

 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:33:24.880

> $(this).parent(newImageBoxdiv).hide();

# nginx - 启用 php 后 Nginx 奇怪的缓存或什么？

> ID：12861081
> 
> 赞同：0
> 
> 时间：2012-10-12T14:19:22.123
> 
> 标签：nginx

我不确定要考虑什么或原因，所以如果标题具有误导性，我很抱歉。

我刚刚安装了第一次 Nginx，出于好奇想看看我是否可以让一些流行的论坛软件正常工作。我首先尝试安装 Vbulletin 4，因为这是我托管的一个社区使用的。PHP 由 php-fpm 处理。我可以获得任何自定义页面来显示我刚刚编写的一些简单的 php echo，以及任何文件名或目录。*例如http://example.com/test/test.php*或*http://example.com/test.php*。

但是，当我尝试通过位于*http://example.com/install/install.php*的安装脚本安装 vbulletin 时，该文件只会下载。我对这个域的 Nginx 配置进行了两次和三次检查，一切似乎都可以正常工作。

下载 install.php 几次后，我决定尝试在 Chrome 隐身窗口中访问该页面。瞧，install.php 页面不再下载，安装程序提示我输入我的客户 ID #，因为它应该有。然后我回到我的主 Chrome（不是隐身）窗口并尝试再次访问安装页面，install.php 再次下载！

这是我当时使用的配置：

```
server {
    listen       ip:80;
    server_name  my.domain.com;

    location / {
        root /usr/share/nginx/html;
        try_files $uri $uri/ /index.php;
    }

    location ~ \.php$ {
            root /usr/share/nginx/html;
            include /etc/nginx/fastcgi_params;
            fastcgi_pass 127.0.0.1:9000;
            fastcgi_param SCRIPT_FILENAME /usr/share/nginx/html$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_script_name;
    }
} 
```

对这个问题的原因有任何见解吗？我无法想象为什么它会为一个会话提供 php 文件的下载，然后实际为另一个会话提供动态内容。我不希望某些随机用户意外下载任何文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:07:24.963

你的 fastcgi_params 看起来有点不对劲。您已将 PATH_INFO 设置为脚本名称。

尝试：

```
fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
fastcgi_param PATH_INFO $document_root 
```

# svn - 在 Windows 中使用 TortoiseSVN 设置 SVN:Externals

> ID：12861082
> 
> 赞同：7
> 
> 时间：2012-10-12T14:19:26.827
> 
> 标签：svn, tortoisesvn, svn-externals

我正在尝试在 Windows 机器上设置`svn:externals`TortoiseSVN。我有两个项目，并且已经在同一台本地机器上创建了两个存储库。

目前的结构是这样的。我为存储库和工作目录（结帐）创建了`repoA`, 。`repoB``workA``workB`

**存储库**

> Z:\repos\repoA
> 
> Z:\repos\repoB

**工作目录**

> Z:\Projects\workA\trunk\core.php
> 
> Z:\Projects\workA\trunk\lib\lib01.php
> 
> Z:\Projects\workB\trunk\core_mod.php
> 
> Z:\Projects\workB\trunk\lib\

（有`tags`和`branches`文件夹，但为了简单起见，它们被省略了。）

我想要实现的是`workA\trunk\lib\`在这种情况下`lib01.php`将文件自动复制到`workB\trunk\lib\`目录中。

为了进行设置，我所做的如下：

1.  签出`workA`并分配给`repoA`签出`workB`并分配给`repoB`
2.  提交了`workA\trunk`文件夹，所以它`repoA`是最新的。
3.  为了为其分配导入位置`workB\trunk\lib`，右键单击`workB`文件夹并选择`TortoiseSVN -> Properties`.
4.  单击`New -> Externals`并单击`New...`
5.  `./trunk/lib`在`Local path`表单字段中输入。对于该`URL`字段，键入`file:///Z:/repos/repoA/trunk/lib`. 通过按下`...`按钮，repo-browser 打开并帮助选择目标文件夹。

    ![在此处输入图像描述](../Images/ee03ef71b02ae374b6ab88df3848a1f7.png)

    ![在此处输入图像描述](../Images/77901bf831a79b33889ac612057662f5.png)

6.  单击`Ok`几次以关闭设置窗口。我假设外部设置已完成。

7.  创建了一个文件，`Z:\Projects\workB\trunk\core_mod.php`
8.  右键单击`Z:\Projects\workB\trunk\`并选择`SVN Comit`提交`workB`到`repoB`。

我预计此时 lib01.php 会自动导入到`Z:\Projects\workB\trunk\lib`文件夹中，但不会复制任何内容。我也尝试`SVN Update`通过右键单击该`workB\trunk`文件夹。但是`workB\trunk\lib`文件夹一直是空的。

我怀疑相对路径`./trunk/lib`一定是错误的。我不知道。如果您能指出我做错了什么，将不胜感激。

**更新**

> 6a - 提交更改的工作副本 WorkB 到 repo

这对我来说是一个盲点。我右键单击`Z:\Projects\workB`并选择`SVN Commit...`它，它给出了以下错误。

![在此处输入图像描述](../Images/9246dbe58f4790865e25b22875ad98ac.png)

立即单击“确定”按钮后，我得到一个对话框窗口，询问是否更新文件夹，然后单击“确定”。然后 TortoiseSVN 开始更新`Z:\Projects\workB`，我得到了这个错误。但在此之后，当我重新提交时`Z:\Projects\workB`，它没有错误地通过。

![在此处输入图像描述](../Images/d01cca8ef71c95b63b1524e095ec4f4c.png)

> （我想，在你的情况下，“trunk/lib”会更防弹）。

谢谢，当我重新选择`Property`文件`workB`夹并单击`Edit`按钮时`svn:externals`，TortoiseSVN 自动调整`./trunk/lib`为`trunk/lib`. 现在它被设置为如此。

> 6b - 在 RepoB 上使用 repobrowser 进行测试（最快的方式），该定义是正确的

我右键单击`Z:\repos\repoB`并选择`TortoiseSVN -> repo-browser`并向下浏览到主干文件夹。它看起来如下。看起来对吗？我真的不知道，因为我从来没有做过这个任务。在 repo-browser 中，trunk 文件夹下的 lib 文件夹为空。

![在此处输入图像描述](../Images/6fcb941c6bdc0d534e2934d68e53dca4.png)

`Z:\Projects\workB\trunk\lib`文件夹还是空的。错误消息建议重新定位 'Z:\Projects\workB' 但我不确定它的含义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:53:10.113

您至少忘记了一项强制性操作

6a - 提交更改的工作副本 WorkB 到 repo

和一个可选的检查点

6b - 在 RepoB 上使用 repobrowser 进行测试（最快的方式），该定义是正确的

不记得为什么，但我从不在 TSVN 中的 URL 的路径规范中使用 ./ （我想，在你的情况下，“trunk/lib”会更防弹）。和纯粹的个人习惯 - 我在挂载点定义外部，即使结果我在 repo 中得到多个定义，而不是在 root 中聚合一个

带有外部树和定义的回购浏览器

![回购浏览器](../Images/b78a767d634b2bcdf6a37bc6a3dbd9ea.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:12:33.993

For anybody who comes across this issue, the working directory of workB did not need the importing folder.

> Z:\Projects\workA\trunk\core.php
> 
> Z:\Projects\workA\trunk\lib\lib01.php
> 
> Z:\Projects\workB\trunk\core_mod.php
> 
> Z:\Projects\workB\trunk\lib\

had to be

> Z:\Projects\workA\trunk\core.php
> 
> Z:\Projects\workA\trunk\lib\lib01.php
> 
> Z:\Projects\workB\trunk\core_mod.php
> 
> Z:\Projects\workB\trunk\

( no Z:\Projects\workB\trunk\lib)

# android - 为什么我无法在我的应用程序中注销？

> ID：12861083
> 
> 赞同：0
> 
> 时间：2012-10-12T14:19:28.583
> 
> 标签：android

关于应用程序：

1.  有一个 TabActivity 有 5 个子 Activity（比如 A、B、C、D、E）
2.  应用程序中有一个顶部栏，其中还有 5 个选项（例如 ta、tb、tc、td、te）
3.  当单击顶部菜单时，下拉列表打开（作为对话框的活动）包含所有应用程序选项，包括注销。
4.  当我单击注销时，它会进入登录屏幕，但如果按下后退按钮，则在此活动中打开选项卡子活动用户按注销。登录屏幕打开，但如果按返回 B 则打开。到目前为止，我已经尝试了 3 种方法，请有人建议我尝试过这些对我不起作用的方法：

1 -

```
objeditor.putString(AppConstants.USER_ID,"");
objeditor.commit();
Intent i=new Intent(MoreActivity.this, Login.class);//use ApplicationContext() as well  
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(i);
finish(); 
```

2 -

```
Intent i=new Intent(MoreActivity.this, Login.class);
for(int index=0;index<AppConstants.objactivity.size();index++)
{
    if(AppConstants.objactivity!=null && AppConstants.objactivity.get(index)!=null)
    {
        AppConstants.objactivity.get(index).finish();   
    }
}
AppConstants.objactivity.clear();
startActivity(i); 
```

请任何人建议我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:26:07.617

尝试这个：

```
startActivity(new Intent(MoreActivity.this, LoginActivity.class)
            .setFlags(Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS
                        | Intent.FLAG_ACTIVITY_NO_HISTORY
                        | Intent.FLAG_ACTIVITY_CLEAR_TOP
                        | Intent.FLAG_ACTIVITY_CLEAR_TASK ));
finish(); 
```

# c# - 执行后 Sql Server 未关闭与链接服务器的连接

> ID：12861087
> 
> 赞同：1
> 
> 时间：2012-10-12T14:19:56.937
> 
> 标签：c#, sql-server-2008, ibm-midrange

我正在使用链接服务器来更新 AS/400 中的记录。它没有正确关闭连接。在 AS/400 端，仍有许多空闲连接。在sql日志中显示：

EXCEPTION_ACCESS_VIOLATION 将地址 0000000000000024 写入 0x0000000077BDE4B4

似乎不是每次我们在 AS/400 端打开连接并更新文件时。我们更新了 222 条记录，仍然有 210 个连接打开。我预计会有222个。

我们正在从 .NET 应用程序调用存储过程。在我们正在执行的存储过程中：

在 S100405D 处执行 (@as400Query)

其中 as400Query 是带有更新语句的字符串，而 S100405D 是链接服务器。记录在 AS/400 中得到更新，所以这不是问题。似乎在尝试关闭连接时出现错误。我还检查了链接服务器上的设置，连接超时 = 0（关闭）。不确定设置超时是否会关闭它们，或者这无关紧要，因为它无论如何都会抛出错误。

任何帮助将不胜感激！

布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:25:14.097

您是否提交任何类型的代码来关闭 AS 端的连接？SQL 服务器只会关闭其连接，在任何其他 RDBMS 上打开的任何其他连接都不会由 SQL 管理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:02:17.707

作为一名 IBM i 程序员，我不希望在存储过程调用期间看到任何错误。如果参数不匹配，操作系统很少会抛出异常。最常见的是调用者 (C#) 使用 VARCHAR 和 IBM 方将其声明为 CHAR。

除此之外，让 IBM 人员确保他们在 PTF 上处于最新状态。

作为风格问题，我不希望看到：

```
open connection
CALL proc
close connection 
```

对于要更新的​​每一行。相反，我希望

```
open connection
loop
  CALL proc
end loop
close connection 
```

# python - 了解 Zope 组件架构和组件依赖性

> ID：12861091
> 
> 赞同：0
> 
> 时间：2012-10-12T14:20:02.657
> 
> 标签：python, zope, zope.component

我的问题很难有一个好的标题。据我了解，Adapter 是在不改变组件的情况下，为组件添加更多的服务。适配器可以从多个组件扩展服务。

但是组件之间的依赖关系呢？如何像这个普通的 Python 代码一样设置组件 A (Person) 和组件 B (Task) 之间的依赖关系

```
class Person:
 pass

class Task:
 def __init__(self, person):
  self.owner = person 
```

如果我实现了 2 个类

```
from zope.interface import Interface
from zope.interface import implements

class IPerson(Interface):
 pass

class Person(object):
 implements(IPerson)

class ITask(Interface):
 pass

class Task(object):
 implements(ITask)
 def __init__(self, person):
  self.owner = person 
```

这是一个很好的实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:24:07.367

关键是使用 ZCA，您*无需*将依赖项设置为具体对象。您改为使用实用程序。

对象 A 将实现一个接口，您在 B 中查找该接口以找到一个具体的实现，它*可能*是 A，但这取决于寄存器。

请注意，ZCA 旨在允许您为给定接口插入不同的实现，并不总是需要。

如果您的 Task 对象需要特定类型，请记录该类型。此处不要求使用 ZCA。最多可以尝试将传入的值调整为`IPerson`; 如果传入的对象已经实现了该接口，则该操作是空操作：

```
class Task(object):
    implements(ITask)

    def __init__(self, owner):
        self.owner = IPerson(owner) 
```

这将允许您稍后灵活地传递其他东西，这些东西*不是*Person 本身，但可以适应该接口。

# excel - 将工作表转换为仅包含字符串的数组

> ID：12861095
> 
> 赞同：2
> 
> 时间：2012-10-12T14:20:27.637
> 
> 标签：excel, vbscript, vba

我需要将数据从 excel 工作表中提取到一个数组中，该数组将在使用 VBScript 作为脚本语言（快速测试专业版）的应用程序中使用。我们可以使用以下代码：

```
' ws must be an object of type Worksheet
Public Function GetArrayFromWorksheet(byref ws)
    GetArrayFromWorksheet = ws.UsedRange.Value
End Function

myArray = GetArrayFromWorksheet(myWorksheet)
MsgBox "The value of cell C2 = " & myArray(2, 3) 
```

一切都很好，但不幸的是，返回的数组不仅包含文字文本字符串，还包含日期、整数、双精度等类型的原语。数据被转换多次。

[编辑]**示例：**当输入`=NOW()`一个单元格并将单元格格式设置`hh:mm`为显示值**17:45 时**，上述方法返回一个类型的变量`double`和一个类似**41194.7400990741的值**

以下解决方案效果更好：我可以使用该`.Text`属性从单元格中获取文字文本，但它们仅适用于一个单元格，而不适用于一系列单元格。我不能像使用`.Value`属性一样对数组执行此操作，因此我必须一次填充一个单元格：

```
Public Function GetArrayFromWorksheet_2(byref ws)
    Dim range, myArr(), row, col
    Set range = ws.UsedRange

    ' build a new array with the row / column count as upperbound
    ReDim myArr(range.rows.count, range.columns.count)

    For row = 1 to range.rows.count
        For col = 1 to range.columns.count
            myArr(row, col) = range.cells(row, col).text
        Next
    Next

    GetArrayFromWorksheet_2 = myArr
End Function 
```

但是哎哟......一个嵌套的`for loop`. 是的，在大型工作表上，性能明显下降。
有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:15:59.447

正如我们在评论中介绍的那样，为了避免这个问题，您需要在某个时候循环遍历数组。但是，我发布此内容是因为它***可能***会显着提高速度，具体取决于工作表上的数据类型。200 个单元格中有一半是数字的，这大约快了 38%。使用相同比例的 600 个细胞，改善率为 41%。

通过遍历数组本身，并且只检索`.Text`解释为双精度（数字）的 for 值，如果有大量非双精度数据，您可以看到速度提高。这不会检查`.Text`带有文本的单元格、格式化为日期的日期或空白单元格。

```
Public Function GetArrayFromWorksheet_3(ByRef ws)

    Dim range, myArr, row, col
    Set range = ws.UsedRange

    'Copy the values of the range to temporary array
    myArr = range
    'Confirm that an array was returned.
    'Value will not be an array if the used range is only 1 cells
    If IsArray(myArr) Then
        For row = 1 To range.Rows.Count
            For col = 1 To range.Columns.Count
                'Make sure array value is not empty and is numeric
                If Not IsEmpty(myArr(row, col)) And _
                            IsNumeric(myArr(row, col)) Then
                    'Replace numeric value with a string of the text.
                    myArr(row, col) = range.Cells(row, col).Text
                End If
            Next
        Next
    Else
        'Change myArr into an array so you still return an array.
        Dim tempArr(1 To 1, 1 To 1)
        tempArr(1, 1) = myArr
        myArr = tempArr
    End If

    GetArrayFromWorksheet_3 = myArr
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:25:08.907

*   将工作表复制到新工作表中。
*   复制粘贴值以删除公式
*   对每一列的列做一个文本，将每一列变成文本
*   像最初一样加载阵列
*   删除新工作表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T20:53:14.167

如果不遍历工作表，您将无法快速轻松地完成此操作。如果您将上述技术与 2 行代码一起使用，则它必须是一个变体类型数组。

我从我的代码中包含了一个真实的示例，它在 6 行中完成，因为我喜欢 A) 使用工作表对象和 B) 将变量与原始的最后一行放在手边。

```
Dim wsKeyword As Worksheet
Set wsKeyword = Sheets("Keywords")

Dim iLastKeywordRow As Long
iLastKeywordRow = wsKeyword.Range("A" & wsKeyword.Rows.Count).End(xlUp).Row

Dim strKeywordsArray As Variant
strKeywordsArray = wsKeyword.Range("A1:N" & iLastKeywordRow).Value 
```

请注意，您的数组**必须**是这样使用的变体。

Variants 像这样工作的原因是，当您创建一个变体数组时，数组中的每个“单元格”都设置为一个变体类型。然后每个单元格将其变体类型设置为分配给它的任何类型的值。因此，分配字符串的变体被设置为 variant.string，现在只能用作字符串。在您的原始示例中，您的时间值似乎存储为 variant.time 而不是 variant.string。

有两种方法可以解决您的原始问题 1) 循环并以更多控制执行该过程，例如双嵌套 for 循环。在另一个答案中解释，它可以让您完全控制 2）将所有数据按原样存储在数组中，然后将其重新格式化为第二个数组，或者在使用时将其格式化为所需的文本（两者都应该更快）

# javascript - iPad 刷新到旧位置

> ID：12861096
> 
> 赞同：1
> 
> 时间：2012-10-12T14:20:27.750
> 
> 标签：javascript, jquery, ipad, scroll

我正在开发一个必须根据要求在 iPad 上运行良好的网站。当我垂直滚动时，相对于我们滚动的距离采取了不同的操作。例如：

```
if( $("div.stack").offset().top-$(window).scrollTop() >= 0 ){
    $("div.main-nav").animate({top:$("div.stack").offset().top}, {duration:350, easing:'easeOutBack'});
}
else if( $("div.stack").offset().top-$(window).scrollTop() < 0 ){
    $("div.main-nav").animate({top:$(window).scrollTop()+50}, {duration:350, easing:'easeOutBack'});
} 
```

当我加载网站时，我滚动时一切正常。假设我已经向下滚动了一半，然后点击刷新：当页面加载（在顶部）时触发 Javascript，然后它会将您带到旧位置。

结果是所有功能都在不考虑滚动的情况下运行，然后它将您带到旧位置。是否有在 iPad 将我带到旧位置后执行的事件？

# c# - 使用 youtube api 和 asp.net，我如何上传和录制视频？

> ID：12861099
> 
> 赞同：0
> 
> 时间：2012-10-12T14:20:29.760
> 
> 标签：c#, asp.net, youtube, youtube-api, youtube.net-api

我有一个 asp.net 网站，我需要用户将视频上传到 youtube 上的某个频道。

上传视频可以通过从他们的电脑上传视频或直接通过网络摄像头录制视频然后上传到同一频道来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:28:37.353

[https://developers.google.com/youtube/youtube_upload_widget](https://developers.google.com/youtube/youtube_upload_widget)

看起来他们有一个小部件：

```
<!-- 1\. The 'widget' div element will contain the upload widget.
     The 'player' div element will contain the player IFrame. -->
<div id="widget"></div>
<div id="player"></div>

<script>
  // 2\. Asynchronously load the Upload Widget and Player API code.
  var tag = document.createElement('script');
  tag.src = "//www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // 3\. Define global variables for the widget and the player.
  //    The function loads the widget after the JavaScript code
  //    has downloaded and defines event handlers for callback
  //    notifications related to the widget.
  var widget;
  var player;
  function onYouTubeIframeAPIReady() {
    widget = new YT.UploadWidget('widget', {
      width: 500,
      events: {
        'onUploadSuccess': onUploadSuccess,
        'onProcessingComplete': onProcessingComplete
      }
    });
  }

  // 4\. This function is called when a video has been successfully uploaded.
  function onUploadSuccess(event) {
    alert('Video ID ' + event.data.videoId + ' was uploaded and is currently being processed.');
  }

  // 5\. This function is called when a video has been successfully
  //    processed.
  function onProcessingComplete(event) {
    player = new YT.Player('player', {
      height: 390,
      width: 640,
      videoId: event.data.videoId,
      events: {}
    });
  }
</script> 
```

# php - 将下拉值传递给 PHP 变量（不使用 jQuery 提交）

> ID：12861100
> 
> 赞同：-2
> 
> 时间：2012-10-12T14:20:30.180
> 
> 标签：php, javascript, jquery, html, ajax

我正在构建一个披萨订购表，它根据用户选择计算表单字段并返回总数。第一个输入将是货币下拉菜单，一旦用户选择货币，它应该将值传递给 PHP 变量 $currency （以便计算汇率），当然不需要提交表单。

我看过很多类似的代码，但很困惑，我知道我应该使用 JavaScript / Ajax，但我的知识很薄弱。

您能否粘贴一个将 $currency 值传递给 PHP 的简单代码？

```
<html>
<head>
<title></title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
jQuery(function($){
    $("#currency").change(function(){
        var selected_value = $(this).val();
        /*AJAX CODE HERE TO PASS VALUE OF DROP DOWN TO PHP*/
        $.post("CurrencyCalculator.php", $("#currency").serialize()); //this is the problematic part: it needs to pass the $currency variable
    })

})
</script>
</head>
<body>
Select any one: 
<select id="currency" name="currency" onchange="selectDropdown()">
<option value="EUR" >Euro</option>
<option value="USD" >US Dollar</option>
<option value="GBP" >British Pound</option>
</select>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:24:01.250

在将 HTML 返回给浏览器之前，PHP 在服务器上运行。由于这个原因，您不能将值从 html 表单传递到 php 变量。

但是，您可以将表单提交到 php 页面进行处理。

```
<form action="myPhpPage.php"> 
```

然后在 myPhpPage.php 中，您可以使用 $_GET['variableName'] 来检索值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:27:27.210

因为它是一个选择货币的下拉菜单，所以给菜单一个`onchange`属性并将信息发送到您的 PHP 文件以进行处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:27:47.450

尝试查看 $_POST 和 $_GET

```
<?php

if(($_POST['submit']))
{

    // do your stuff
}

?>

<form action="something" method="post">
<input type="submit" name="submit" value="Vote!">
</form> 
```

按下此表单时，将运行phpp代码

# c# - MouseUp 事件并不总是触发

> ID：12861101
> 
> 赞同：1
> 
> 时间：2012-10-12T14:20:32.487
> 
> 标签：c#, wpf, mouseup

我有一个由 mouseUp 事件触发的函数。一切正常，除了有时未检测到 mouseUp 事件。事实上，我有一个带有项目的列表视图，当我选择一个项目时，它会触发一个功能。但不总是。

```
<ListView Margin="4" Grid.Row="1" Grid.ColumnSpan="2" x:Name="statinfoListview" 
  ItemsSource="{Binding Path=ExistingStateInfos, ElementName=Window}"
  SelectedItem="{Binding Path=SelectedStateInfo, ElementName=Window}">
    <ListView.ItemTemplate>
        <DataTemplate DataType="{x:Type States:StateInfo}">
            <TextBlock Text="{Binding Path=Name}" MouseUp="ApplyStateInfoNameToState_Click" />
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:08:57.677

也许您在释放按钮之前将鼠标从文本块中拉出？另请注意，如果您位于文本的右侧，您可能不会单击文本块，将 Horizo​​ntalContentAlignment="Stretch" 添加到 ListView 可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:57:20.143

您无法保证将调用 MouseUp 处理程序，因为该事件可以由 VisualTree 中的后代视觉对象处理。如果您想确保捕获事件，则应使用隧道事件 (PreviewMouseUp)。

另一种选择是在后面的代码中使用 AddHandler 方法，并指定您要管理已处理的事件。

# log4j - 为什么我们需要 root 和 log4j.xml 中的记录器

> ID：12861104
> 
> 赞同：29
> 
> 时间：2012-10-12T14:20:40.783
> 
> 标签：log4j

如果问题太琐碎，请原谅。我对 log4j 完全陌生。我看到有两个标签和标签，它们引用了各种appender。假设我想将我的代码库中的信息记录在一个文件中，将其发送到我的电子邮件并打印到控制台。我希望将级别设置为信息。拥有一个引用三个附加程序的标签还不够吗？（文件、电子邮件和控制台）为什么我们需要另一个相同的标签？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-14T12:08:28.463

就够了。

在 log4j 中，记录器与包相关联，有时与特定类相关联。记录器的包/类由属性“名称”定义。记录器在其包以及所有子包及其类中记录消息。唯一的例外是记录应用程序中所有类的消息的根记录器。

记录器也具有级别，并且可能附加一个或多个附加程序（记录目标）。

在下一个示例中，我们有两个记录器：

*   根记录器，将所有包中级别为 INFO 或更高级别的消息记录到各个目的地：控制台、电子邮件和文件，
*   “com.foo”记录器，将包“com.foo”及其子包中的WARN级别或更高级别的消息记录到另一个文件中。

```
<log4j:configuration>
    <!-- Declaration of appenders FILE, MAIL, CONSOLE and ANOTHERFILE -->
    ...
    <!-- -->

    <logger name="com.foo">
        <level value="warn"/>
        <appender-ref ref="ANOTHERFILE" /> 
    </logger>
    <root> 
        <priority value ="info" />
        <appender-ref ref="FILE" /> 
        <appender-ref ref="MAIL" />
        <appender-ref ref="CONSOLE" /> 
    </root>
</log4j:configuration> 
```

您应该[阅读](http://logging.apache.org/log4j/1.2/manual.html)有关 log4j 基础的更多信息。

# boost - boost编译的应用程序上的.dll错误

> ID：12861105
> 
> 赞同：0
> 
> 时间：2012-10-12T14:20:44.033
> 
> 标签：boost, dll, compilation

简单的应用程序，刚刚学习设置我的升压环境......

程序编译，但我得到一个 libboost_thread-mgw44-mt-1_51.dll is missing 错误

在旁注中，我不得不将 thread1.stop() 更改为 t1.stop()，因为 boost 说 stop() 没有函数。

我有 dll，将 dll 放在与应用程序相同的文件夹中没有任何作用。

```
#include <boost/bind.hpp>
#include <boost/thread.hpp>

class Threadable
{
  public:

    void stop()
    {
        running = false;
    }

    int run()
    {
        running = true;
        while(running)
        {
            //Do Something Meaningful
        }
        return 0;
    }

  private:
    bool running;
};

int main()
{
  Threadable t1, t2;
  boost::thread thread1(boost::bind(&Threadable::run, t1));
  boost::thread thread2(boost::bind(&Threadable::run, t2));

  // Let the threads run for half a second
  boost::this_thread::sleep(boost::posix_time::milliseconds(500));

  // Signal them to stop

  t1.stop();
  t2.stop();
  //thread1.stop();
  //thread2.stop();

  // Wait for them to gracefully exit
  thread1.join();
  thread2.join();
  return 0;
} 
```

# ios - 升级 Xcode，我有 2 个带有 UIScrollView 的 Identicle 视图。一个 View 将组件添加到 UIScroll 很好，另一个没有

> ID：12861106
> 
> 赞同：0
> 
> 时间：2012-10-12T14:20:44.220
> 
> 标签：ios, iphone, objective-c, xcode, programmatically-created

我有一个应用程序多年来一直运行良好。我升级了 XCode，现在我的 1 个观点正在做奇怪的事情。

我尝试添加到 UIScrollview 的对象都没有出现。

我有 2 个屏幕，它们的代码基本相同（我实际上是复制和粘贴）。其中一个工作得很好，我单击一个按钮移动到另一个屏幕，它不显示我尝试添加到滚动视图的任何组件。

关于什么可能是错的任何想法？为什么升级 Xcode 后会突然停止添加组件？

我有一个我已经测试并更改为 self.view 的背景图像，它的变化很好。但是我尝试添加到我的 UIScrollView 中的任何内容都没有添加。一些示例代码...

我的 .h 声明

```
@interface OutgateInputViewController : UIViewController<UITextFieldDelegate,UIPickerViewDelegate>{
IBOutlet UIScrollView *outputsView; 
```

我的 .m 中的一个样本

```
UIGraphicsBeginImageContext(self.view.frame.size);
[[UIImage imageNamed:@"inputbackground.png"] drawInRect:self.view.bounds];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

self.view.backgroundColor = [UIColor colorWithPatternImage:image];

int x = 20;
int y = 20;

CGRect myImageRect = CGRectMake(0, 15, 320, 32.5);
UIImageView *myImage = [[UIImageView alloc] initWithFrame:myImageRect];
NSString *imgName = @"screen_logo.png";
[myImage setImage:[UIImage imageNamed:imgName]];
[outputsView addSubview:myImage];
y = y + 30; 
```

很标准的东西。直到屏幕的这一点为止，它都是有效的副本。（即使是很久之后的副本，我只是从不同的位置提取数据）。那么关于发生了什么变化的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:36:40.593

我回去从头开始重新做所有事情，显然由于某种原因，这个视图需要在 .h 中的声明开始时添加额外的 __weak ...

目前还不知道为什么，但这解决了整个视图被破坏的问题。

```
__weak IBOutlet UIScrollView *outputsView; 
```

# ruby-on-rails-3 - 从 Rails 中的 collection_select 中选择所有或单个对象

> ID：12861110
> 
> 赞同：0
> 
> 时间：2012-10-12T14:21:05.297
> 
> 标签：ruby-on-rails-3, forms, activerecord, select

我有一个通过 actionmailer 发送“页面”的应用程序。在我的视图代码中，我将其设置为选择一个特定的单元，然后分配获得电子邮件/页面的医务人员。我想在我的选择语句中包含一个对所有单元进行分页的选项，但不知道该怎么做。

查看/表单代码：

```
<%= form_for(@page) do |f| %>

  <%= f.label :message %>
  <%= f.text_field :message %>

  <%= f.label 'Medic'%>

  <%= f.collection_select(:unit_id, Unit.order("unit_name ASC"), :id, :unit_name, {}, {:class => 'select'})%>

<%= f.button :send, :class => 'btn btn-info' %>

<% end %> 
```

控制器代码：

```
def create

    @page = Paging.new(params[:paging])
    unit = Unit.find(params[:paging][:unit_id])
    message = params[:paging][:message]

     if @page.save
       PagingsMailer.paging(unit.incharge, unit, message).deliver
       PagingsMailer.paging(unit.attendant, unit, message).deliver
       redirect_to pagings_path, notice: "Page was successfully sent."
      else
        redirect_to pagings_path
     end
  end 
```

只要忽略原始选择，该选项就可以在选择本身中或作为另一个选择/复选框。

对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:24:00.590

我在这方面得到了一些帮助，并且能够通过在表单中​​创建一个数组数组并将“全部”传递给控制器​​来执行单独的邮件来解决它。

查看代码：

```
<%= f.select :unit_id, options_for_select(Unit.order.map{ |unit| [unit.unit_name, unit.id] } + [["All Medics", "all"]]), {}, {:class => 'select'} %> 
```

控制器代码：

```
def create
    message = params[:paging][:message]

    if params[:paging][:unit_id] == "all"
      Unit.all.each do |unit|
        @page = Paging.new(params[:paging])
        @page.unit_id = unit.id

        if @page.save
          PagingsMailer.paging(unit.incharge, unit, message).deliver
          PagingsMailer.paging(unit.attendant, unit, message).deliver
          flash.notice = "Page was successfully sent."
        end
      end
    else
      @page = Paging.new(params[:paging])
      unit = Unit.find(params[:paging][:unit_id])

      if @page.save
        PagingsMailer.paging(unit.incharge, unit, message).deliver
        PagingsMailer.paging(unit.attendant, unit, message).deliver
        flash.notice = "Page was successfully sent."
      end
    end 
```

# php - 在 foreach 循环中按键对数组进行分组

> ID：12861111
> 
> 赞同：0
> 
> 时间：2012-10-12T14:21:09.883
> 
> 标签：php, arrays, foreach

$result 是一个如下所示的数组：

```
Array ( 
  [0] => stdClass Object (
    [Key_1] => a 
    [Key_2] => 10 
  )
  [1] => stdClass Object (
    [Key_1] => b
    [Key_2] => 10 
  ) 
  [2] => stdClass Object ( 
    [Key_1] => c
    [Key_2] => 20
   ) 
) 
```

如何在由 [Key_2] 分组的 foreach 循环中回显 $result ，包裹在 div 中

```
<div class="new_Key_2">
  Key_2: 10
  ------------
  Key_1: a
  Key_1: b
</div>

<div class="new_Key_2">
  Key_2: 20
  ------------
  Key_1: c
</div> 
```

我知道如何通过检查 [Key_2] 是否已更改来打开 div，但不知道如何在新的 [Key_2] 出现之前关闭它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:28:07.373

您需要的 PHP 代码，您只需要使用它来匹配您的 HTML 输出需求。

```
<?php

$result = array();
foreach ($array as $object)
{
    $result[$object->key_2][] = $object->key_1;
}

foreach ($result as $key_2 => $keys)
{
    echo '<h1>'.$key_2.'</h1>';
    echo '<p>';
    echo implode('<br>', $keys);
    echo '</p>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:47:04.520

您可以将您的阵列与`array_reduce`

```
$stdA = new stdClass();
$stdA->Key_1 = "a";
$stdA->Key_2 = 10;

$stdB = new stdClass();
$stdB->Key_1 = "b";
$stdB->Key_2 = 10;

$stdC = new stdClass();
$stdC->Key_1 = "a";
$stdC->Key_2 = 20;

# Rebuilding your array
$array = Array("0" => $stdA,"1" => $stdB,"2" => $stdC);

# Group Array
$array = array_reduce($array, function ($a, $b) {$a[$b->Key_2][] = $b;return $a;});

#Output Array
foreach ( $array as $key => $value ) {
    echo '<div class="new_Key_2">';
    echo "<h3> Key_2 : $key </h3>";
    foreach ( $value as $object ) 
        echo "<p>Key_1 : $object->Key_1</p>";
    echo '</div>';
} 
```

输出

```
<div class="new_Key_2">
    <h3>Key_2 : 10</h3>
    <p>Key_1 : a</p>
    <p>Key_1 : b</p>
</div>
<div class="new_Key_2">
    <h3>Key_2 : 20</h3>
    <p>Key_1 : a</p>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:28:45.293

只需遍历对象数组，并将一个单独的组变量保存到最后一组。**无需循环数组两次并生成一个新数组。**

```
$group = false;
foreach($array as $object) {

  if($group !== false)
     echo '</div>';

  if($group != $object->Key_2) {
    echo '<div class="new_key_2">';
  }
  $group = $object->Key_2;
  // do stuff
}

if($group !== false)
  echo '</div>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T14:33:57.943

假设您的初始数组是`$my_array`

```
// Generating a new array with the groupped results
$new_array = array();
foreach ($my_array as $element) 
{
    $new_array[$element->Key_2][] = $element->Key_1;
} 
```

然后在您的视图层中，您可以依次回显每个 div/元素

```
<?php foreach ($new_array as $key => $items) { ?>

<div class="new_Key_2">
    Key_2 : <?php echo $key; ?><br />
    ---------------------------<br />
    <?php echo implode('<br />', $items); ?>
</div>

<?php } ?> 
```

# css - 尝试浮动输入和跨度内联

> ID：12861114
> 
> 赞同：0
> 
> 时间：2012-10-12T14:21:21.463
> 
> 标签：css

我正在尝试将一些输入彼此相邻浮动，并在它们之间使用点来模拟 IPv4 地址；但是，跨度在中间浮动。我怎样才能解决这个问题？这张图片中的所有元素都应用了 float:left。

[http://tinypic.com/r/33magcz/6](http://tinypic.com/r/33magcz/6)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:25:11.600

输入和跨度是内联元素，您根本不需要浮动它们。

```
<input type="text" size="3" name="ip0" class"ipAddress">
<span class"ipAddress">.</span>
<input type="text" size="3" name="ip1" class"ipAddress">
<span class"ipAddress">.</span>
<input type="text" size="3" name="ip2" class"ipAddress">
<span class"ipAddress">.</span>
<input type="text" size="3" name="ip3" class"ipAddress">
<span class"ipAddress">.</span> 
```

使用 CSS`position: relative;`和`top:`垂直对齐元素。

* * *

从用户的角度来看，我发现四个单独的 IP 地址输入框相当不友好。打字更难，复制/粘贴不起作用，这是一个很大的缺点。

从应用程序的角度来看，单独的输入框并没有什么好处。

我会说，抛弃这个想法并提供一个输入字段。

# javascript - jQuery在每个循环内单击

> ID：12861116
> 
> 赞同：0
> 
> 时间：2012-10-12T14:21:30.877
> 
> 标签：javascript, jquery, arrays, click, each

我想循环我的点击事件，以使代码更短。以后我可能会有 30 个这样的值。

**我的工作代码**

```
$(document).ready(function () {
    var last_click = '';

    $("#title").click(function() { last_click = 'title'; });
    $("#subtitle").click(function() { last_click = 'subtitle'; });
    $("#test").click(function() { last_click = 'test'; });
}); 
```

**这就是我想要的（不工作）**

我的猜测是，每个循环都在 dom 就绪状态下运行，然后再也不运行了，这样就永远不会触发点击事件？

```
$(document).ready(function () {
    var last_click = '';
    var contents = new Array();
    contents = ['title', 'subtitle', 'test'];

    $.each(contents , function(index, value){
        $("#" + value).click(function() { last_click = value; });
    });
}); 
```

如果没有像我想的那样解决，我会感谢一个很好的解决方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T14:27:06.790

我宁愿为你想要绑定它的所有元素添加一个类，例如`class="last-click"` 并将绑定定义为：

```
$(".last-click").on('click', function() {
    last_click = this.id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:26:30.523

如果你真的想让它更短，给他们一个类似的课程。

```
$(document).ready(function () {
    var last_click = '';    
    $(".theclass").click(function() { 
        last_click = this.id; 
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:32:00.913

如果您的按钮或元素具有 value 属性，则可以这样做：

```
$(document).ready(function() {
    var last_click = '';
    $("input").click(function() {
        last_click = $(this).attr('value');
        alert(last_click);
    });    
});​ 
```

我假设您使用的是“输入类型 =“按钮”。此外，这里是演示，您可以在操作中看到它：http: [//jsfiddle.net/rS2Gb/5/](http://jsfiddle.net/rS2Gb/5/)

# javascript - IE7 & 8 使用 jQuery 的 .slice 引发错误

> ID：12861119
> 
> 赞同：0
> 
> 时间：2012-10-12T14:21:43.410
> 
> 标签：javascript, jquery, internet-explorer-8, internet-explorer-7, slice

以下代码在其他浏览器上运行良好，但在 IE7 和 8 上它抱怨它：

```
 var divs = $(".paginate-boxes li");
        for(var i = 0; i < divs.length; i+=9) {
          divs.slice(i, i+9).wrapAll("<li class='slide-portfolio'><ul></ul></li>");
        } 
```

它正在处理的代码是一个长长的`li`s 列表，如下所示：

```
 <li>
                                <!--Fade-->
                                <div class="mosaic-block fade">
                                    <a href="http://www.example.com/destination/" class="mosaic-overlay">
                                        <object class="details">

                                            <h4>Destination Page</h4>
                                            <p>
                                                                                                </p>
                                        </object>
                                    </a>
                                    <div class="mosaic-backdrop"><img width="296" height="175" src="http://www.example.com/wp-content/uploads/this_thumb.jpg" class="attachment-portfolio-image wp-post-image" alt="this_thumb" title="This image" /></div>
                                </div>
                            </li> 
```

使用 IE9 中的开发工具（在 8 模式下），我发现它在到达`.slice`代码位时会抱怨，引用了 jQuery 的这一位（v.1.7.2）

```
// IE6-8 fail to clone children inside object elements that use
// the proprietary classid attribute value (rather than the type
// attribute) to identify the type of content to display
if ( nodeName === "object" ) {
    dest.outerHTML = src.outerHTML;
} 
```

不确定这到底是什么意思

我需要改变什么来阻止它抛出错误，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:10:47.697

回想起来相当明显 - 替换为`<object>`并且`<div>`它工作正常。

# javascript - 函数的封装 | OO方面的目的

> ID：12861123
> 
> 赞同：1
> 
> 时间：2012-10-12T14:21:57.040
> 
> 标签：javascript

封装是面向对象编程的核心原则。

但是，如果您将函数设为私有，然后将其返回以便您可以使用它，则可以有效地执行此操作。

我不认为，如果你返回一个函数，那么你不会返回它的副本......你正在返回一个引用。这就是问题的核心。当您返回一个函数时，它是一个副本还是对实际函数的引用。

下面的代码是否保持 func1 的私密性和安全性，就像良好实践 OO 编程所希望的那样。

还是封装/数据隐藏与功能无关？

```
var A = (function(){
    var func1 = function(param){
        // do stuff
        },
        publik;
    publik.retFunc(){
        return func1;
    }
    return publik;
}())

A.retFunc()(arg1); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T16:41:06.173

我真的不确定你要去哪里......
但是，为了进一步的原因：

```
var Class = (function () {
    var private_data = 1234,

        private_method = function (x) { private_data += x; },

        public_method = function (x) { private_method(x); },
        other_method = function () { return private_data; },

        public_interface = {
            add : public_method,
            toString : other_method
        };

    return public_interface;
}()); 
```

我现在已经编程到一个界面。
这个特定的界面是`.add`and `.toString`。

私有值不会被篡改，因为它们已被封闭。只要不被修改
`add`就可以访问。`private_method``add`

看，如果你尝试做这样的事情，事后：

```
Class.add = function (x) { steal(private_data + x); }; 
```

这是行不通的。
新函数没有对私有数据的引用。

因此，尽管外部人员或程序可能会篡改公共接口，但内部状态仍然很好。

如果您的程序被篡改，或者其他受保护较少的类可能会受到损害，您的程序可能仍然会中断，但是这个程序会很高兴地坐下来，并且它需要进行任何内部调用（例如，如果它更新了屏幕，在计时器上），仍然会完美地发生。

封装的另一点是选择要呈现给人们的界面。

您可以在一个类中拥有 30 个辅助函数，但您可能只想让外部应用程序访问其中的几个。
这些公共方法将可以访问私有数据/方法，并且能够做任何你希望客户能够做的事情，仅此而已。

那是一个应用程序编程接口。

如果我想`BlogManager`上课，那可能会很大。
也许我希望它能够从数据库中获取内容、排序、设置模板或与视图通信……我希望它能够过滤，我希望它能够做各种事情。 ..

但我不希望最终用户做所有这些。
我希望最终用户做的是`.request(options);`or `.create(blog_post);`or `.update(blog_post);`or `.delete(blog_post);`。

如果我给最终用户这四种方法，那么没有人可以触及 BlogManager 内部发生的许多其他事情以使一切按预期工作。
那是对接口的编程。

将来，当我想出一种更好的方法来过滤我的结果时，或者当我更改我的数据库时，或者当我更改数据存储的结构时，我在我的内部做什么都无关紧要了类，因为外部的外观和行为仍然相同。
如果它具有相同的公共方法、相同的输入类型、相同的返回类型......那么你可以在里面做任何你想做的事情。

***但是，返回实际***构造函数而不是 instated 对象 的直接案例并不多。

就像返回函数的情况不多，而不是函数的返回值。
除了异步编程。

# ruby-on-rails - 尝试使用使用 SQL Server 2008 R2 数据库的 Ruby on Rails 准备测试时出错

> ID：12861125
> 
> 赞同：1
> 
> 时间：2012-10-12T14:21:57.820
> 
> 标签：ruby-on-rails, sql-server-2008, activerecord

我需要做什么才能使用 gem 对 SQL Server 2008 数据库服务器运行测试`activerecord-sqlserver-adapter`？

我可以通过 database.yml 中的开发设置使用 32 位 ODBC 连接很好地连接到开发数据库：

```
#SQL Server
development:
  adapter: sqlserver
  mode: odbc
  dsn: <odbc_name>
  username: <db_user>
  password: <db_password>
  host: <sql host> 
```

我已经开始设置一些测试，但是在运行时遇到了错误：

```
rake db:test:prepare 
```

这是错误：

```
rake aborted!
ODBC::Error: 37000 (3708) [Microsoft][SQL Native Client][SQL Server]Cannot drop 
the database 'master' because it is a system database.: DROP DATABASE [master]

Tasks: TOP => db:test:load => db:test:purge
(See full trace by running task with --trace) 
```

这个错误对我没有意义。为什么它试图删除主数据库？

我在 database.yml 中的测试设置与我上面的 dev 完全相同，只是它指向不同的 odbc，它指向不同的数据库。

**编辑**

我注意到，当我运行`rake db:test:prepare`的第一步必须是删除测试数据库。所以它首先知道它应该使用什么数据库。

为什么它会尝试删除主人？

这是因为当 sql 找不到默认数据库时，它默认为用户 master 并且`rake db:test:prepare`无法创建用户默认 db，因此它循环回到开头并尝试再次删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:51:18.233

我通过在测试配置中指定数据库的名称来实现这一点：

```
# config/database.yml
...
test:
    adapter: sqlserver
    mode: odbc
    dsn: <odbc_name>
    database: <database_name>
    username: <db_user>
    password: <db_password>
... 
```

# ext.net - 通过 JS 从 Ext.NET 中的 MultiCombo 中获取选定的值

> ID：12861126
> 
> 赞同：0
> 
> 时间：2012-10-12T14:22:02.430
> 
> 标签：ext.net

我正在使用 Ext.Net 我有一个带有 ComboBox 的表单，我刚刚将其更改为 MultiCombo。

以前我使用“SelectEnquiry.getValues()”来检索所选项目并将其传递给与按钮直接事件一起使用的参数。

使用 MultiCombo 时如何获取选定的值？

组合框位

```
 <ext:MultiCombo runat="server" ID="SelectEnquiry" FieldLabel="Enquiry" AnchorHorizontal="95%" Editable="false" ValueField="Id" DisplayField="ProviderName" TypeAhead="true" Mode="Local" ForceSelection="true" TriggerAction="All" EmptyText="Select Enquiry" ValueNotFoundText="Select Enquiry" ItemSelector="div.list-item" SelectOnFocus="true" AllowBlank="false"> 
```

按钮表单提交位

```
 <ext:Button runat="server" ID="ButtonEmailTaskAccept" Text="OK">
        <Listeners>
            <Click Handler="if (PanelUnlinked.isVisible() && !$form.validate( [SelectProject, SelectEnquiry])) return false;">
            </Click>
        </Listeners>
        <DirectEvents>
            <Click Url='<%# Url.Action("CompleteEmailTask") %>' AutoDataBind="true"
            Success="window.$messageBus.publish('task-admin', 'inbox-changed');
            window.$messageBus.publish('task-admin', 'task-changed');
            WindowAssignEmail.close()" Failure="$shell.requestFailedHandler(response, null)"
                Json="true">
                <EventMask ShowMask="true"></EventMask>
                <ExtraParams>
                    <ext:Parameter Name="emailResponseId" Value="<%# Model.EmailResponse.Id %>" Mode="Value"
                        AutoDataBind="true" />
                    <ext:Parameter Name="enquiryId" Value="SelectEnquiry.getValues()" Mode="Raw" />
                    <ext:Parameter Name="documentList" Value="buildSelectionList()" Mode="Raw" />
                </ExtraParams>
            </Click>
        </DirectEvents>
    </ext:Button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:16:34.210

`<ext:MultiCombo>`你可以调用`.getValue()`来返回一个选定值的数组。我也会考虑添加`.getValues()`，所以它与`<ext:ComboBox>`api 一致。

**编辑**

似乎`ComboBox`没有客户端`.getValues()`功能，所以我们不会添加到`MultiCombo`. 只需使用`.getValue()`，它在所有表单字段中都是标准化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:52:41.213

问题似乎是它无法找到我试图从中获取值的控件。

所以设法通过这样做来解决它：

```
#{SelectEnquiry}.getSelectedValues() 
```

# gradle - 有什么方法可以写更简洁的gradle？

> ID：12861129
> 
> 赞同：2
> 
> 时间：2012-10-12T14:22:10.067
> 
> 标签：gradle

我对 groovy 的了解还不够好，现在只想勉强度日。我现在有以下 gradle 工作，但我想知道是否有更简洁的方法来编写它：

```
task staging(type: Sync) {
    from(stagingDir) {}
    into toStagingDir
}

task syncJars(type: Sync) {
    from(configurations.compile) {}
    from(fixedLibDir) {}
    into toStagingLibsDir
}

task copyMainJar(type: Copy) {
    from(libsDir) {}
    into toStagingLibsDir
}

task myZip(type: Zip) {
    archiveName "bacnet.zip"
    from(buildDir) {
        include project.name+'/**'
    }
}

syncJars.dependsOn('staging')
copyMainJar.dependsOn('syncJars')
myZip.dependsOn('copyMainJar')
assemble.dependsOn('myZip') 
```

也许有某种方式可以这样写：

```
task prepareStaging {
    staging from stagingDir into toStagingDir
    syncJars from configurations.compile from fixedLibDir into toStagingLibsDir
    copyMainJar from libsDir into toStagingLibsDir
    myZip archiveName "bacnet.zip" from buildDir { include project.name+'/**' }
}

assemble.dependsOn('prepareStaging') 
```

理想情况下，我喜欢自我记录的代码。在第二个示例中，下一个开发人员很明显，我的意思是这些小任务中的每一个都不能重用。这很清楚（即自我记录）。在第一种方式中，我编写的代码绝对不清楚，因为这些任务可以从其他项目文件中重用。

有什么办法可以用那种更简单的形式来写吗？

**注意：我仍然希望所有 UP-TO-DATE 检查都像往常一样进行！！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:33:51.103

如果我理解正确，并且`toStagingDir`只是`toStagingLibDir`在目录下创建的临时目录`buildDir`（在`myZip`任务中），那么下面应该做与你相同的工作：

```
task myZip(type: Zip){
  archiveName "bacnet.zip"
  into('staging'){
    from stagingDir
  }
  into('staging/libs'){
    from fixedLibDir
    from configurations.compile
    from libsDir 
    //or this, if you just want to include current projects jars
    from jar.outputs.files
  }
} 
```

这里的想法不是自己创建一个临时目录，而是让 gradle 为你做。

只要您不打电话`cleanMyZip`，它就会进行最新检查并做最低限度的检查。上次我检查`Zip`的行为很像`Sync`，因为它会从 zip 中删除源中不再存在的所有文件。这可能与任务略有不同`copyMainJar`，因为它是类型`Copy`，这意味着如果您`libsDir`从那时删除一个文件，在我的情况下它会从 zip 中消失，但在您的代码中它不会。

不知道这是否接近你的要求，但希望它至少有点用处:)

**阐述：**

gradle 中的任务在设计上始终是公开的 AFAIK。有一个[增强请求](http://issues.gradle.org/browse/GRADLE-1026)，但没有采取太多行动。您可以使用支持私有可见性的标准 groovy 方法，但它们不如任务强大。虽然，您会发现[任务可能依赖于 groovy 函数等等](http://gradle.org/docs/current/dsl/org.gradle.api.Task.html)（或任何有`call()`方法的东西），因此您可以执行以下操作：

```
def function = {
  println "function here!"
}

task myTask(dependsOn: function) << {
  println "myTask here!"
} 
```

将产生：

```
function here!
:a:myTask
myTask here! 
```

这应该给你一些灵活性，但如果你真的真的需要一个私人任务，你可以做一些肮脏的黑客行为（我知道 Gradle 的人会因为这个 xx 讨厌我；）......这里是：

```
//Create a factory for creating tasks
import org.gradle.api.internal.project.taskfactory.ITaskFactory
def taskFactory = project.services.get(ITaskFactory)

//You can use the factory to create tasks without adding them to
//project.tasks, which will make them invisible to most irrelevant
//parts of your code, and they will not come up in `gradle tasks` list:

//Equivalent of:
// task myTask << {
//   println "i'm invisible"
// }
def privateTask = taskFactory.createTask([name: 'myTask']).doLast {
  println "i'm invisible"
}

//Equivalent of:
// task myCopyTask(type: Copy){
//   from configurations.compile
//   into 'libs'
// }
def privateCopyTask = taskFactory.createTask([name: 'myCopyTask', type: Copy])
                          .configure {
  from configurations.compile
  into 'lib-test'
}

//You can depend on the above tasks as usual from your public tasks:
task publicTask(dependsOn: [privateTask, privateCopyTask]) << {
  println "I'm public task"
} 
```

注意：似乎在 Gradle 1.2 中工作，但使用风险自负！

祝你好运！

# objective-c - iOS 6 上 XMPP 类中的警告

> ID：12861133
> 
> 赞同：0
> 
> 时间：2012-10-12T14:22:19.387
> 
> 标签：objective-c, ios, xmpp, ios6, xmppframework

当我尝试在 iOS 6 上运行 XMPP 聊天客户端时收到多个警告

```
'dispatch_get_current_queue' is deprecated: first deprecated in iOS 6.0 
```

不知道如何解决这些警告。更新的 XMPP 框架是否可用于与 iOS 6 兼容的目标 C？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:18:38.923

这是在项目页面上报告的：

*   [https://github.com/robbiehanson/XMPPFramework/issues/115](https://github.com/robbiehanson/XMPPFramework/issues/115)
*   [https://github.com/robbiehanson/XMPPFramework/pull/140](https://github.com/robbiehanson/XMPPFramework/pull/140)

有人上传了补丁。要么试一试，要么只接受警告，直到补丁被接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T02:36:07.273

您可以使用以下行修复 XMPPFramework 中的警告：

NSAssert(dispatch_get_specific(moduleQueueTag), @"Invoked on wrong queue");

# php - 在回显之前洗牌 xml 输出

> ID：12861140
> 
> 赞同：1
> 
> 时间：2012-10-12T14:22:51.147
> 
> 标签：php, xml, shuffle

我有一个脚本，它可以获取由 php 生成的我的数据库的 xml，我想在 php 脚本回显 xml 之前对行进行洗牌，这样每次我访问数据库 xml 文件时，我都会以不同的顺序接收数据库.

这是我输出 xml 的 php 脚本的一部分：

```
$dom =  new DOMDocument("1.0");
$node = $dom->createElement("database");
$parnode = $dom->appendChild($node); 

$query = "SELECT * FROM database WHERE 1";
$result = mysql_query($query);

header("Content-type: text/xml");

while ($row = @mysql_fetch_assoc($result)){
    // ADD TO XML DOCUMENT NODE
    $node = dom->createElement("data");
    $newnode = $parnode->appendChild($node);

    $newnode->setAttribute("id", $row['id']);
    $newnode->setAttribute("name", $row['name']);
    $newnode->setAttribute("date", $row['date']);
    $newnode->setAttribute("latitude", $row['latitude']);
    $newnode->setattribute("longitude", $row['longitude']);

} 
```

如果可能的话，这是我想随机化 xml 输出的地方。这似乎是最合乎逻辑的地方，但如果有更好的地方，那对我来说很好。

```
echo $dom->saveXML(); 
```

这是我的 xml 示例：

```
<database>
  <data id="1" name="blah" date="2012-10-10" latitude="0" longitude="0"/>
  <data id="3" name="blah" date="2012-10-10" latitude="0" longitude="0"/>
  <data id="4" name="blah" date="2012-10-10" latitude="0" longitude="0"/>
</database> 
```

简而言之，我希望每次访问 xml 行时都以不同的顺序排列。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:27:43.767

解决这个问题的一种方法是使用一个临时数组来存储从 DB 获取的行，然后打乱这个数组，然后遍历它：

```
$records = array();
while ($row = @mysql_fetch_assoc($result)){
    $records[] = $row;
}

shuffle($records);

foreach ($records as $row) {
    $node = dom->createElement("data");
    $newnode = $parnode->appendChild($node);

    $newnode->setAttribute("id", $row['id']);
    ...
} 
```

另一种方法是按原样使用原始数组，但将插入过程随机化：

```
$prevnode = null;
while ($row = @mysql_fetch_assoc($result)){
    $node = dom->createElement("data");
    if ($prevnode && rand(0, 1) === 0) {
      $newnode = $prevnode->insertBefore($node);
    } else {
      $newnode  = $parnode->appendChild($node);
    }
    $prevnode = $newnode;

    $newnode->setAttribute("id", $row['id']);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:25:42.510

如果您的结果集不是很大并且您的数据库支持它，您可以让数据库为您调整结果。例如，MySQL 可以这样做：

```
SELECT * FROM database ORDER BY rand(); 
```

您的数据库可能不同。

您还可以将 XML 生成与结果集合分开。打乱中间数组：

```
function get_database_results($dbconn=null) {
    $rows = false;
    $query = 'SELECT * FROM database';
    $res = mysql_query($query, $dbconn);
    if ($res) {
        $rows = array();
        while ($row = mysql_fetch_assoc($res)) {
            $rows[] = $row;
        }
    }
    return $rows;
}

function array_to_sxe($rows) {
    $sxe = simplexml_load_string('<database></database>');
    foreach ($rows as $row) {
        $data = $sxe->addChild('data');
        foreach ($row as $key => $value) {
            $data->addAttribute($key, $value);
        }
    }
    return $sxe;
}

$rows = get_database_results();
shuffle($rows);
$sxe = array_to_sxe($rows);
header('Content-Type: application/xml'); // NOT text/xml!
echo $sxe->asXML(); 
```

我现在将抱怨**编码**。

你必须更加小心你的编码！事实上，您可以非常轻松地生成格式错误的 XML。

*   `text/xml`表示 xml 是 7 位 ascii。这不太可能是你的意思。
*   `application/xml`表示xml是utf-8。这是默认情况下输出的内容，并且`DOMDocument`只接受像!*这样的方法的 utf-8 值* 这意味着您需要*绝对确定*： `SimpleXML`*`setAttribute`* *1.  您放入数据库的字符串是 utf-8。
    2.  php和数据库之间的连接是utf-8。（使用`SET NAMES utf8`或`charset`参数到带有 PDO 的 DSN——你应该使用它来代替`mysql_*`）
    3.  您从数据库中提取的字符串是 utf-8，或者至少在使用前转换为 utf-8。* 

 ** * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T14:27:48.320

你可以加

```
ORDER BY rand() 
```

到您的 SQL 查询*

# java - 如何将部分索引从主 Solr 服务器（基于查询）导入另一个 Solr 服务器，然后稍后进行增量导入（更新的索引）？

> ID：12861143
> 
> 赞同：1
> 
> 时间：2012-10-12T14:22:56.180
> 
> 标签：java, solr, solrj

我有一个主 solr 服务器（solr1），它存储所有 doc 的索引，并希望实现以下功能：
1\. 首先从 solr1 完全导入我最近（过去 1 或 2 周）更新/创建的 doc。
2\. 每隔一段时间进行增量导入，将我的文档的更改从 solr1 复制到 solr2。- 在此期间可能会删除、更新、创建文档。

-- 作为SqlEntityProcessor 支持的将数据从DB 导入Solr 的功能。

[http://wiki.apache.org/solr/DataImportHandler#SolrEntityProcessor](http://wiki.apache.org/solr/DataImportHandler#SolrEntityProcessor)
SolrEntityProcessor 可以根据查询（使用配置文件中的查询参数）从一个 Solr 完全导入到另一个 solr，但以后似乎无法进行增量导入：没有 deltaImportQuery 和 deltaQuery 配置，SqlEntityProcessor 支持。

我该如何实现这个功能？
感谢您的帮助和回复:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:05:43.110

您应该能够通过使用可以模拟此的 Solr 字段和过滤查询来实现 deltaImportQuery 的等效项。

我建议在`timestamp`您的 Solr 架构中添加一个字段。下面是[solr 示例模式](http://svn.apache.org/viewvc/lucene/dev/branches/lucene_solr_3_6/solr/example/solr/conf/schema.xml?view=markup)中的字段定义。

```
 <field name="timestamp" type="date" indexed="true" stored="true" 
       default="NOW" multiValued="false"/> 
```

这将创建一个记录最后一次将记录添加到 Solr 索引的字段，您可以`fq`向 SolrEntityProcessor 查询添加过滤查询选项，以将结果限制为仅那些时间戳字段值大于或等于上次在过滤器查询中使用 DateMath 运行您的导入处理程序的时间。

以下是有关 DateMath 工作原理的一些很好的参考资料。

*   [日期数学解析器](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/util/DateMathParser.html)
*   [Solr 日期格式](http://lucidworks.lucidimagination.com/display/lweug/Solr+Date+Format)（我知道您可能没有使用 LucidWorks Solr，但示例仍然适用）。

# iphone - 弱属性和分配属性之间的区别？

> ID：12861146
> 
> 赞同：3
> 
> 时间：2012-10-12T14:23:13.737
> 
> 标签：iphone, ios, ipad

我有几个问题。

1）分配属性将占用内存，因为我们不需要释放以减​​少引用计数？

2）自动归零参考和非自动归零参考有什么区别？它是如何工作的？怎么会占用内存？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-12T14:30:57.053

**弱**适用于对象（它们有引用计数和所有东西），但弱引用不会增加引用计数。但是一旦对象被释放（从代码中的任何地方），对该对象的任何弱引用都会设置为`nil`. 这非常有用，因为如果你只使用强引用和弱引用，你就不能得到一个无效的指针（指向一个已经被释放的对象的指针）。

**assign**对引用完全没有任何作用，它通常用于整数、浮点数和其他非对象类型。你当然可以为这样的变量分配一个对象引用，但是如果对象被释放，你仍然会有一个指向它的内存的指针（这现在是垃圾，当你使用它时会伤害你）。

您对“内存使用”的担忧很奇怪-引用不占用内存，对象占用。但是如果你要使用一个对象，你就不能释放它。初学者的简单规则是：对于对象，尽可能使用强引用。当您有理由不使用强引用时，请使用弱引用（通常用于委托和数据源）。对于原始类型（int、float、CGRect、...），请使用 assign，因为它们不是对象。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-20T09:03:05.303

`assign`就像`weak`但是当它离开堆时指针没有归零。所以，它不如`weak`.

# android - 是否可以在单视图双语 Android 应用程序中嵌入（无需下载）PDF 文件？

> ID：12861149
> 
> 赞同：0
> 
> 时间：2012-10-12T14:23:40.993
> 
> 标签：android, localization, internationalization, pdf-viewer

有谁知道Android应用程序是否可以实现以下项目：

*   只看一张
*   嵌入的 PDF 文件
*   PDF 文件读入应用程序（而不是 Adob​​e Acrobat）
*   PDF 文件无法下载到用户的 Android 设备中
*   只需要缩放页面（并支持内部 PDF 的超链接）
*   双语/PDF文件根据用户的个人语言设置不同

该项目是一个非常简单的双语 iOS 应用程序的双胞胎之一，该应用程序由嵌入在 UIWebview 中的 PDF 文件组成。

我在这个主题上进行了很多搜索，但我无法确定这个双胞胎项目是否可以实现。如果是这样，在某个地方会有这样的例子吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:03:25.317

您可以将文件保存在 Assets 目录中，并且可以使用 Asset Manager 访问该文件。

```
 AssetManager assetManager = getAssets();

        try {
            InputStream tinstr = assetManager.open("myjpg.pdf");
            mDefaultThumbnail = BitmapFactory.decodeStream (tinstr);
            tinstr.close ();
        } catch (IOException ioe) {
            ioe.printStackTrace ();
        } 
```

# javascript - 具有固定最大高度的文本换行

> ID：12861161
> 
> 赞同：13
> 
> 时间：2012-10-12T14:24:17.340
> 
> 标签：javascript, html, css, word-wrap

我需要一个包含多行文本的框（div），并且该框需要具有固定的宽度和固定的最大高度。

我正在使用`overflow: hidden;`Now 我的问题是，如果最后一行不适合 div 最大高度，它将被剪切（例如，只剪切一半的行）。在这种情况下我想要做的不是显示最后一行，而是在最后一行显示省略号

我的问题不是在单个文本行中插入省略号（使用`white-space: nowrap`属性），主要问题是文本在最后一行被剪切，省略号不是问题，因为在最后一种情况下我可以使用 jQuery 插入它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T14:28:25.480

添加

```
text-overflow: ellipsis; 
```

到分区

编辑：好的，现在不可能，不是以标准化的方式。

但是，可以通过实验性的 webkit 功能来实现它（参见[这个主题），或者通过这个家伙编写](https://stackoverflow.com/questions/7004006/is-vertical-text-overflow-possible-with-css3)[的解决方案](http://reusablebits.com/post/2642059628/introducing-clamp-js)用 JS 来实现它，并托管在 github 上。

# prolog - Prolog用另一个列表替换列表中的元素

> ID：12861164
> 
> 赞同：2
> 
> 时间：2012-10-12T14:24:34.950
> 
> 标签：prolog, turbo-prolog

*嗨，我正在尝试用另一个列表替换列表中的一个元素，当 turbo prolog 在如果 C=A-> 放入结果列表（L1）替换元素的列表的情况下给我语法错误时，我卡住了。

```
domains
    list=integer*
    element=i(integer);l(list)
    lista=element*
predicates
    repl(list,integer,list,lista)
clauses
    repl([],A,B,[]):-!.
    repl([C|L],A,B,**[l(|L1])**:- C=A,repl(L,A,B,L1),!.
    repl([C|L],A,B,[i(C)|L1]):- repl(L,A,B,L1),!. 
```

感谢帮助，问题已解决（使用 dasblinkenlight 代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:54:24.840

试试这个：

```
concat([],L,L).
concat([H|T],L,[H|Res]) :- concat(T,L,Res).

repl([],_,_,[]).
repl([Val|T],Val,Repl,Res) :- repl(T,Val,Repl,Temp), concat(Repl,Temp,Res).
repl([H|T],Val,Repl,[H|Res]) :- repl(T,Val,Repl,Res). 
```

我不知道它是否会在 Turbo Prolog 中运行，但它在 SWI 中运行良好，并且它不使用任何内置谓词。

`concat/3`一对规则将位置 1 和 2 的列表连接成位置 3 的结果列表。

*   第一个`repl`处理传入的空列表；它与您的相同，除了它用下划线替换单例变量（强烈推荐的做法）
*   第二条规则处理`Val`被替换的值位于列表头部的情况；它替换尾部的值，并将替换列表`Repl`与替换结果连接起来`Res`。
*   最后一条规则处理头部值不匹配的情况`Val`。它向下递归一级，并将初始列表的头部添加到替换结果的头部。

附带说明一下，cut 运算符`!`很少需要。如果出现此问题，您绝对可以不使用它。

# c++ - 如何与 libtiff 链接

> ID：12861174
> 
> 赞同：2
> 
> 时间：2012-10-12T14:25:50.973
> 
> 标签：c++, c, linux, gcc, makefile

如何在我的 makefile 中指定我想与`libtiff`库链接。仅在 LDFLAGS 中指定 -ltiff 是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:32:43.523

您可以使用 -L 标志（请参阅编译器手册 - 我假设您使用的是 gcc 或 g++

或者

设置环境变量`LD_LIBRARY_PATH`以包含库的路径

但是您还应该考虑静态或动态链接。两个编译器的文档都很好地解释了如何做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T04:39:49.383

尝试给出以下编译选项。

g++ -L[你机器上的 libtiff 路径] -ltiff [你剩下的选项] ...

-L 选项用于告诉 gcc，在哪里可以找到您尝试链接的库。

# android - 为什么带有 Phonegap 的 Android 4 会忽略 em 中的 css 大小？

> ID：12861176
> 
> 赞同：1
> 
> 时间：2012-10-12T14:25:56.700
> 
> 标签：android, cordova

我在 Phonegap 应用程序中使用 em 而不是 px 来设置 HTML 容器和图像的大小。

**例子：**

```
<div id="outer">
 <div id="inner">
  Hello
 </div>
</div>

<style>
#outer{font-size:0.5px}
#inner{font-size:2em;width:2em}
</style> 
```

使用上面的样式，#inner 的宽度应该是 1px，字体也应该有 1px 的大小。

这适用于：

*   所有安卓浏览器
*   iPhone（浏览器和原生 Phonegap 构建）
*   带有 Phonegap 的原生 Android 2.x 应用程序

**但**

它不适用于带有 Phonegap 的原生 Android 4.x 应用程序（在模拟器和真实设备上测试）。

由于某些原因，#inner 中的字体大小似乎正确减小到 1px，**但**容器本身忽略了父字体大小。

这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:23:29.943

发现问题。

Android 4 将小于 8 的字体大小值向上舍入为 8。

因此，如果您使用`font-size:0.5px`它将字体大小更改为 8px。

# jquery - jQuery Supersize 播放按钮和托盘向下按钮未显示

> ID：12861180
> 
> 赞同：1
> 
> 时间：2012-10-12T14:26:16.170
> 
> 标签：jquery, wordpress, supersized

我已将 Supersized 3.2.7 - 全屏幻灯片 jQuery 插件集成到自定义 WordPress 主题中。我正在使用 WordPress 3.4.2。关于幻灯片的一切都很好，除了当我单击暂停按钮时，我得到一个缺少的播放按钮 (play.png)。当我单击托盘打开按钮时也会发生这种情况，托盘向下按钮（button-tray-down.png）丢失。这是该页面的链接：http: [//dev4.mccawphotographics.com/views/](http://dev4.mccawphotographics.com/views/)

当我在源代码中检查这些按钮的路径时，我看到了 img/button-tray-down.png 和 img/play.png。显然这是错误的路径，但我不知道如何让它使用正确的图像路径。

我花了几个小时在谷歌上搜索，但还没有找到任何答案。这是我调用超大函数的代码：

```
<script type="text/javascript">
    jQuery(function($){

        $.supersized({

            // Functionality
            slideshow               :   1,          // Slideshow on/off
            autoplay                :   1,          // Slideshow starts playing automatically
            start_slide             :   1,          // Start slide (0 is random)
            stop_loop               :   0,          // Pauses slideshow on last slide
            random                  :   0,          // Randomize slide order (Ignores start slide)
            slide_interval          :   6000,       // Length between transitions
            transition              :   1,          // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
            transition_speed        :   2000,       // Speed of transition
            new_window              :   1,          // Image links open in new window/tab
            pause_hover             :   0,          // Pause slideshow on hover
            keyboard_nav            :   1,          // Keyboard navigation on/off
            performance             :   1,          // 0-Normal, 1-Hybrid speed/quality, 2-Optimizes image quality, 3-Optimizes transition speed // (Only works for Firefox/IE, not Webkit)
            image_protect           :   1,          // Disables image dragging and right click with Javascript

            // Size & Position                         
            min_width               :   0,          // Min width allowed (in pixels)
            min_height              :   0,          // Min height allowed (in pixels)
            vertical_center         :   0,          // Vertically center background
            horizontal_center       :   1,          // Horizontally center background
            fit_always              :   0,          // Image will never exceed browser width or height (Ignores min. dimensions)
            fit_portrait            :   1,          // Portrait images will not exceed browser height
            fit_landscape           :   0,          // Landscape images will not exceed browser width

            // Components                           
            slide_links             :   false,  // Individual links for each slide (Options: false, 'number', 'name', 'blank')
            thumb_links             :   1,          // Individual thumb links for each slide
            thumbnail_navigation    :   0,          // Thumbnail navigation
            slides                  :   [           // Slideshow Images
                                                {image : 'http://dev4.mccawphotographics.com/wp-content/uploads/2012/10/amenities-5.jpg', title : '', thumb : 'http://dev4.mccawphotographics.com/wp-content/uploads/2012/10/amenities-5.jpg', url : ''},
                                                {image : 'http://dev4.mccawphotographics.com/wp-content/uploads/2012/10/amenities-4.jpg', title : '', thumb : 'http://dev4.mccawphotographics.com/wp-content/uploads/2012/10/amenities-4.jpg', url : ''},  
                                                {image : 'http://dev4.mccawphotographics.com/wp-content/uploads/2012/10/amenities-3.jpg', title : '', thumb : 'http://dev4.mccawphotographics.com/wp-content/uploads/2012/10/amenities-3.jpg', url : ''},
                                                {image : 'http://dev4.mccawphotographics.com/wp-content/uploads/2012/10/amenities-2.jpg', title : '', thumb : 'http://dev4.mccawphotographics.com/wp-content/uploads/2012/10/amenities-2.jpg', url : ''},
                                                {image : 'http://dev4.mccawphotographics.com/wp-content/uploads/2012/10/amenities-1.jpg', title : '', thumb : 'http://dev4.mccawphotographics.com/wp-content/uploads/2012/10/amenities-1.jpg', url : ''},

                                        ],

            // Theme Options               
            progress_bar            :   1,          // Timer for each slide                         
            mouse_scrub             :   0

        });
    });
</script> 
```

知道是什么导致了这个问题以及如何解决它吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:23:50.187

您已经在 vars 下的 JavaScript 中指定了图像的路径：

```
 image_path: "img/" 
```

将其更改为：

```
 image_path: "/wp-content/themes/residence-xxv/images/" 
```

# forms - 在 OSX 上制作像 Mail 应用程序这样的输入字段

> ID：12861181
> 
> 赞同：0
> 
> 时间：2012-10-12T14:26:26.530
> 
> 标签：forms, html, css, input

如何在 OSX 上的 Mail App 中制作类似的输入字段。

这是一个屏幕截图 -

![截屏](../Images/90c6705627e2f5c4b060b7609909132a.png)

我想要的是能够像上图所示对文本进行分组。因此，我可以使用一个输入字段，而不是多个输入字段（例如，在邮件应用程序的情况下 - 从、到、主题等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:31:31.437

我不完全理解这里的问题，但我猜想对 CSS 的一些巧妙使用，您可以在 div 中放置一个下拉菜单和一个输入表单，其样式看起来像一个输入表单会起作用吗？

# java - Hibernate 本机查询：无效的列名错误 SQL-17006

> ID：12861187
> 
> 赞同：5
> 
> 时间：2012-10-12T14:26:35.167
> 
> 标签：java, hibernate, jpa, orm

```
package com.abc.def.model;

import javax.persistence.Column;
import javax.persistence.Id;
import javax.persistence.Entity;
import javax.persistence.Embeddable;
import javax.persistence.IdClass;
import java.util.Date;
import java.io.Serializable;

@NamedNativeQuery(name="getMetadata",query="
                  select a.name alias1,a.fullname alias2,
                         b.name alias3,b.age alias4,
                         c.height alias5,c.something alias6,
                         d.otherthing alias7
                  from lame_table_name a,
                       lame_table_name_2 b
                  where a.id = b.id
                     and b.id = c.id 
                     and c.id = d.id 
                     and d.id = :namedparameter
                  order by a.index,b.index
               ",
            resultClass=MetadataModel.class)

  @Entity
  @IdClass(SomeIdClass.class)

  public class MetadataModel{

  @Id @Column("alias1")
  private Type alias1property;

  @Id @Column("alias2")
  private Type2 alias2property;

  @Column("alias3")
  private Type3 alias3property;

  //getters and setters
  }

  @Embeddable
  class SomeIdClass implements Serializable{

  //serialVersionUID line

  @Id @Column("alias1")
  private Type alias1property;

  @Id @Column("alias2")
  private Type2 alias2property;

  //getter and setters
  } 
```

错误是 SQL-17006，无效的列名，整天都在尝试此设置的变体我应该尝试放置 Column("lame_table_name.name")

我还尝试使用SqlResultSetMapping（并从POJO的字段中删除@Column）（并在SqlResultSetMapping的columns属性中指定所有列别名）（我们是否应该在通过SQLQuery接口的setResultSetMapping方法执行查询时再次指定resultsetmapping ?)

```
package com.abc.def.model;

import javax.persistence.Column;
import javax.persistence.Id;
import javax.persistence.Entity;
import javax.persistence.Embeddable;
import javax.persistence.IdClass;
import java.util.Date;
import java.io.Serializable;
//other imports for the SqlResultSetMapping

@NamedNativeQuery(name="getMetadata",query="
                  select a.name alias1,a.fullname alias2,
                         b.name alias3,b.age alias4,
                         c.height alias5,c.something alias6,
                         d.otherthing alias7
                  from lame_table_name a,
                       lame_table_name_2 b
                  where a.id = b.id
                     and b.id = c.id 
                     and c.id = d.id 
                     and d.id = :namedparameter
                  order by a.index,b.index
               ",
            resultSetMapping="metaDataMapping")

@SqlResultSetMapping(name="metaDataMapping",
              entities=@EntityResult(entityClass=MetadataModel.class,
                fields = {@FieldResult(name="alias1Property",column="alias1")
                           //so on
                      }

                 )
            )

  @Entity
  @IdClass(SomeIdClass.class)

  public class MetadataModel{

  private Type alias1property;

  private Type2 alias2property;

  private Type3 alias3property;

  //getters and setters
  }

  //composite class, exactly as above 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-22T10:06:47.693

我们应该在 oracle 的 Select 列表中拥有所有表列。如果我们只保留几列。例如，您的表 Employee 有列 FirstName、LastName、EmpId，如果您有类似的查询。

```
session.createSQLQuery("Select FirstName from Employee"); 
```

上面的查询不起作用。它将抛出无效列错误异常。所以最好将所有列放在 Oracle 的 Select 子句中。

礼貌： [一个答案](https://stackoverflow.com/questions/17321547/native-sql-throwing-invalid-column-name-exception?answertab=votes#tab-top) 谢谢，拉杰什。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:35:19.270

试试`@Column(name = "myprop")`吧。另请注意，Type/Type2/Type3 必须是 Simple 类型（通常为 Integer/Long/String/Date）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:11:00.047

好吧，早些时候我试图在结果集映射中指定列和实体属性，所以我尝试删除实体映射，保留列属性，并调用 aliastobean 结果转换器，再加上编写 setter 以接受 BigDecimal 而不是 Long（因为它是一个Oracle DB），解决了这个问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-19T00:02:01.107

就我而言，我需要为内部选择主体命名，因为它神秘地截断了 CASE 列。

以下不起作用 - 由于某种原因 COLUMN_B 被神秘地删除：

```
SELECT
  COLUMN_A,
  CASE WHEN ... THEN ... ELSE ... END as COLUMN_B,
  COLUMN_C
FROM (
   ...
) 
```

然后以下解决了问题：

```
SELECT
  RES.COLUMN_A,
  CASE WHEN ... THEN ... ELSE ... END as COLUMN_B,
  RES.COLUMN_C
FROM (
   ...
) RES 
```

整个 SQL 只处理一张表。

Java代码：

```
// The "sql" variable is the SQL statement shown above.
javax.persistence.Query res = myEntityManager.createNativeQuery(sql, SomeClass.class); 
```

我正在使用带有 JPA 和 Oracle 12c 的 Spring Boot 2.4.3。

# ruby-on-rails - 运行 rails server 时出现以下错误

> ID：12861189
> 
> 赞同：0
> 
> 时间：2012-10-12T14:26:42.063
> 
> 标签：ruby-on-rails, macports

```
WARNING: Nokogiri was built against LibXML version 2.8.0, but has dynamically loaded 2.7.3
=> Booting WEBrick
=> Rails 3.2.3 application starting in development on `http://0.0.0.0:3000`
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/opt/local/lib/ruby1.9/gems/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:1194:in `initialize': could not connect to server: Connection refused (PG::Error)
    Is the server running on host "localhost" and accepting
    TCP/IP connections on port 5432?
could not connect to server: Connection refused
    Is the server running on host "localhost" and accepting
    TCP/IP connections on port 5432? 
```

当运行 psql -h localhost 我得到：

```
psql: could not connect to server: Connection refused
    Is the server running on host "localhost" and accepting
    TCP/IP connections on port 5432? 
```

我的系统设置：Mac OSX 10.7.5，所有东西都是用 Macports 安装的。

# jquery - 如何减少“每个”步骤？

> ID：12861193
> 
> 赞同：3
> 
> 时间：2012-10-12T14:26:56.620
> 
> 标签：jquery

这是我的[代码](http://jsfiddle.net/2hJPH/)：

```
<div class="parent">
    <div class="child">&nbsp;</div>            
    <div class="child">&nbsp;</div>
    <div class="child">&nbsp;</div>
    <div class="child">&nbsp;</div>    
</div>

<div class="parent">
    <div class="child">&nbsp;</div>            
    <div class="child">&nbsp;</div>
    <div class="child">&nbsp;</div>
</div>

$('.child').each(function() {
    $(this).parent().addClass('childParent');
    console.log("step");
});? 
```

但正如你所看到的，它是`addClass`7 次，这是没有必要的。是否可以减少每一步？事实上，在这个例子中，`addClass`只需要两次就足够了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-12T14:29:42.577

是的：只需调用`.parent()`集合即可。元素不会在 jQuery 集合中重复

```
$('.child').parent().addClass('childParent'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T14:28:31.810

`.each()`请注意，其他答案的方法更好，但如果您出于任何原因确实需要保持通话，这是一种替代方法。

* * *

您可以使用[`:first-child`](http://api.jquery.com/first-child-selector/)选择器来确保`.child`每个父级只选择一个元素：

```
$('.child:first-child').each(function() {
    $(this).parent().addClass('childParent');
    console.log("step");
}); 
```

现在，它只会选择 2 个元素（`.child`每个元素中的第一个`.parent`元素），因此`.each()`调用将只有两个元素可以迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T14:32:00.803

您是否有理由不直接引用父母？

```
$('div.parent').addClass('childParent'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:00:31.240

虽然您可以调用每个孩子，然后让 jquery 使用独特的方法，但它可能不是最有效的使用方法。例如，如果每个父母有 10 个孩子，这意味着选择每个孩子需要 10 倍或更长的时间，然后检查它是否是唯一的。

相反，只选择父母来限制您的初始选择，然后使用“has()”方法过滤那些父母。看起来像这样：

```
$('div.parent:has(div.child)').addClass('childParent'); 
```

# facebook-graph-api - 在 facebook graph api explorer 中发布链接作为页面

> ID：12861196
> 
> 赞同：2
> 
> 时间：2012-10-12T14:27:21.783
> 
> 标签：facebook-graph-api, post, facebook-c#-sdk

我正在使用图形 api 资源管理器和一个应用程序在我自己的页面的墙上发布

当我使用字段消息并将链接放入其中时，它将仅作为链接字符串发布，而链接中没有图片，因为您从图形资源管理器外部发布它，并且海报将是通过应用程序的页面名称

但是当我使用“链接”字段并将链接放入其中时，它会给出我想要的表格，但海报将是帐户的名称而不是页面的名称

首先：在我使用将发布到页面墙的 c# 控制台应用程序之前，我正在尝试在图形 api 资源管理器中发布帖子。如果我复制网站页面的链接并通过 facebook 打开页面并将链接粘贴到状态字段中，它将自动生成包含图片和一些详细信息的表单，如果我点击发布，状态将显示为发布者页面本身，它将首先包含作为文本的链接，然后出现我谈到的表单

如果我使用 c# sdk 并将状态发布为： fbArgs["message"] = txtT.ToString(); facebook.Post("/PAGE_ID/feed", fbArgs); 当我在 facebook 页面网站上发布相同的字符串时，该帖子将仅包含链接，而不包含自动出现的表单。如果我使用带有链接的“链接”字段作为值，它将按帐户名称发布，但使用我想要的形式？

当您将链接粘贴到 facebook 网站上的状态编辑框中时，我如何发布将自动生成表单的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:43:09.610

您可以参考这个旧的 stackover 流程​​问题：[Facebook Graph API PHP SDK 张贴在页面上作为页面](https://stackoverflow.com/questions/4055440/facebook-graph-api-php-sdk-posting-on-page-as-page)

您必须使用参数手动指定链接的元标记：

`picture` 发布缩略图（仅可在指定链接时使用）

`name` 帖子名称（只能在指定链接时使用）

`caption` 帖子标题（只有在指定链接时才能使用）

`description` 帖子描述（只有在指定链接时才能使用）

> 您可以通过使用 publish_stream 和 manage_pages 权限以及以下参数向 PAGE_ID/feed 发出 HTTP POST 请求来在页面上创建帖子。此外，主页帖子还可以安排在未来长达 6 个月的时间上线，或者可以在“未发布”状态下创建，在该状态下它们在主页时间线或主页粉丝的新闻提要中不可见。未发布的帖子可以用作赞助故事。

阅读更多：http: [//developers.facebook.com/docs/reference/api/page/#links](http://developers.facebook.com/docs/reference/api/page/#links)

# multithreading - Delphi 无线程事件处理

> ID：12861198
> 
> 赞同：0
> 
> 时间：2012-10-12T14:27:27.193
> 
> 标签：multithreading, delphi, event-handling, delphi-7

我不是 Delphi 专家，我对消息流以及事件和回调的处理只有一个基本的了解。我正在尝试在 D7 中调试一个应用程序，该应用程序需要将前台过程（由单击按钮启动）与在后台发生的消息接收和处理（由组件处理）结合起来。它们都独立地正常工作，但是当我将它们组合在一个程序中时，消息接收不起作用。

现有的应用程序已经具有在单击按钮时发送消息的功能程序，并且它可以在运行而不处理任何按钮时接收消息。

正常的消息接收由一个组件处理，该组件将我的处理程序 (OnInput) 作为事件调用。我的处理程序将消息放入 ListBox。

我正在尝试编写一个循环发送消息并等待响应的过程。（伪代码）：

```
 for N := 0 to nsequence do begin
       prevcount := ListBox1.items.count; 
       SendMessage(mymessage);  // request the response
       sleep(500); // allow time for response to arrive
       for 0 to timeout do begin
           sleep(100); 
           application.processmessages;  {allow processing to handle incoming message}
           if ListBox1.items.count > prevcount then break;  {has the message arrived?}
           end;
       if ListBox1.items.count = prevcount then exit: {timeout -- fail}
       end; 
```

我认为这应该可以在没有线程的情况下完成，但是永远不会收到消息。它总是超时。

是否可以从 application.processmessages 调用组件事件处理程序？输入消息在应用程序运行和空闲时正常工作，但在执行过程时不能正常工作。除了调用 application.processmessages 以使应用程序处理消息并调用相关过程来处理它们之外，还需要什么？

为了跟踪传入的消息，路径以来自 Windows MMSystem 的回调开始。当 MIDI 输入端口打开时，回调被设置为指向一个处理程序：procedure midiHandler

在 midiHandler 中，事件被放入一个循环缓冲区：CircbufPutEvent(thisBuffer,@thisEvent)。

然后将一条消息发送回应用程序： PostMessage(thisCtlInfo^.hWindow, mim_Data, 0, 0)

该消息由：procedure TMidiInput.MidiInput(var Message: TMessage); 在该过程中有一个调用： FOnMIDIInput(Self);

这些事件在组件的接口中定义为：

```
{ Events }
FOnMIDIInput: TNotifyEvent; { MIDI Input arrived } 
```

在已发布下，我们有：

```
{ Events }
property OnMidiInput: TNotifyEvent read FOnMidiInput write FOnMidiInput;
property OnOverflow: TNotifyEvent read FOnOverflow write FOnOverflow; 
```

在 Object Inspector 中，OnMidiInput 事件链接到过程 MIDIInput1MidiInput；

过程 MIDIInput1MidiInput 首先调用 GetMidiEvent：

```
with (Sender As TMidiInput) do
    begin
    while (MessageCount > 0) do
        begin

        { Get the event as an object }
        thisEvent := GetMidiEvent; 
```

GetMidiEvent 从循环缓冲区中读取消息。MIDIInput1MidiInput 过程进行一些检查和验证，并最终将消息存储在 ListBox1 中。

PS - 输入组件具有返回循环缓冲区中排队消息计数的属性。我在等待循环超时时检查它，它报告 0 条消息。所以回调显然没有进入 midiHandler 过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:38:47.523

感谢 Jay 的评论，我开始更深入地研究调用过程时被禁止的内容。

为了简化我的伪代码，我没有包括对 SendMessage 过程有两次连续调用的事实——一次用于设置参数，一次用于在回复中请求数据。我认为输出和输入组件之间没有交互，因为它们是分开的。

但我没有意识到发送组件可以与自身交互。查看 SendMessage 代码，我发现它在完成发送后会向自己发送一条消息，这会重新使其能够接受另一条消息。第二条消息（响应请求）没有被发送，因为发送过程没有重新启用。

在对 SendMessage 过程的两次调用之间放置一个 application.processmessages 调用似乎已经解决了这个问题。

# drupal - 在页面/节点中显示菜单/块

> ID：12861200
> 
> 赞同：1
> 
> 时间：2012-10-12T14:27:28.357
> 
> 标签：drupal, drupal-6, drupal-7, drupal-modules

我是 Drupal 的新手，并对现有站点进行了一些更改。

我在左侧栏中有一个带有菜单的页面，该页面显示在该菜单中的所有页面上，除了我添加的页面。我之前已经完成了，您必须添加您希望菜单在管理面板中某处显示的页面的 URL 以显示菜单。

如果我转到：网站建设 > 块 > 块名称，然后勾选“用户无法控制他们是否看到此块。” 菜单将显示。但它也会显示在我不想显示的页面上。

你知道我需要去管理员的哪个地方让菜单显示在这个新页面上吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:39:32.083

经过数小时的搜寻，我找到了答案，该块在页面“页面特定设置”的底部有一个文本框，您可以在其中添加您希望该块显示的页面的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:39:50.353

您可以使用[menu_block](http://drupal.org/project/menu_block)模块。

它在块内创建菜单并将其完全视为块。

希望这会有所帮助……穆罕默德。

# ruby-on-rails - 为什么这个对象的旧值在 update_attributes 之后被返回！在更新操作中成功调用？

> ID：12861209
> 
> 赞同：0
> 
> 时间：2012-10-12T14:28:19.363
> 
> 标签：ruby-on-rails, activerecord

这是 中的`update`动作`notes_controller.rb`。

```
def update
    note = current_user.notes.find(params[:id])
    note.update_attributes! params[:note]
    render json: {note: note.display}
end 
```

它工作正常。

我的`note`对象有一个`datetime`名为`scheduled_time`. 当`JSON`数据从`update`客户端的操作返回时，我需要知道注释更新的日期是否`scheduled_time`与`update`.

```
def update
    note = current_user.notes.find(params[:id])
    previous_date = note.scheduled_time.to_date
    note.update_attributes! params[:note]
    date_changed = previous_date != note.scheduled_time.to_date
    render json: {note: note.display, date_changed: date_changed}
end 
```

但是添加此代码会导致`JSON`data( `note.display`) 中**返回**的注释包含`update_attributes!`. `update_attributes!`仍然有效，但从操作返回的数据`JSON`不`update`反映更新。为什么会发生这种情况？

我正在使用

```
Rails 3.2.0
ruby 1.9.3 
```

我也通常在笔记模型中使用[Memoist](https://github.com/matthewrudy/memoist)`display` gem，但没有具体使用方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:03:50.817

问题似乎是 note 变量的分配，并且没有使用 #update_attributes! 的结果集进行更新。你有任何钩子或观察者吗？

尝试直接使用 Note 对象：

```
Note.where(user_id: current_user.id, id: params[:id]) 
```

或者如果一切都失败了，试试：

```
{display: note.reload.display ... } 
```

它似乎与您正在使用的 Memoist gem 有关，但如果不深入研究和模拟这一点，我无法确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:20:39.110

在您`note.update_attributes! params[:note]`尝试运行 a`note.reload`以将 activerelation 重新加载到数据库中当前的任何内容之后

# java - Windows 32 位 Eclipse 安装在 64 位操作系统上？

> ID：12861212
> 
> 赞同：1
> 
> 时间：2012-10-12T14:28:34.167
> 
> 标签：java, eclipse

我可以在 64 位操作系统上安装 Windows 32 位 Eclipse 吗？我有一些插件只能在 32 位 Eclipse 上运行，所以我应该安装 32 位 Eclipse 吗？那我的JAVA呢？我应该使用 Windows x86 还是 Windows x64？

感谢您的时间！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T14:30:12.373

您可以毫无问题地在 64 位 Windows 上安装 32 位 Eclipse。

Windows 操作系统具有处理 32 位进程的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:55:47.427

是的。您需要安装 32 位版本的 JDK 并将 JAVA_HOME 环境变量设置为指向它。然后，您可以通过在 eclipse.ini 中指定 java VM 或通过批处理脚本来启动 Eclipse。

```
@echo off
start "Eclipse %WORKSPACE%" eclipse.exe -data %WORKSPACE% -vm "%JAVA_HOME%/bin/javaw.exe" 
```

# java - 调用paint(Graphics g) 函数但我不知道在哪里？

> ID：12861216
> 
> 赞同：1
> 
> 时间：2012-10-12T14:28:41.550
> 
> 标签：java, swing

```
package donut;

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.geom.AffineTransform;
import java.awt.geom.Ellipse2D;

import javax.swing.JPanel;

public class Board extends JPanel{

    public void paint(Graphics g)
    {
      super.paint(g);

      Graphics2D g2 = (Graphics2D) g;

      RenderingHints rh =
            new RenderingHints(RenderingHints.KEY_ANTIALIASING,
                               RenderingHints.VALUE_ANTIALIAS_ON);

      rh.put(RenderingHints.KEY_RENDERING,
             RenderingHints.VALUE_RENDER_QUALITY);

      g2.setRenderingHints(rh);

      Dimension size = getSize();
      double w = size.getWidth();
      double h = size.getHeight();

      Ellipse2D e = new Ellipse2D.Double(0, 0, 80, 130);
      g2.setStroke(new BasicStroke(1));
      g2.setColor(Color.gray);

      for (double deg = 0; deg < 360; deg += 5) {
          AffineTransform at =
              AffineTransform.getTranslateInstance(w / 2, h / 2);
          at.rotate(Math.toRadians(deg));
          g2.draw(at.createTransformedShape(e));
        }
    }
} 
```

**然后是Board** 对象实例化的JFrame扩展类

```
package donut;

import javax.swing.JFrame;

public class Donut extends JFrame {

    public Donut() {

        add(new Board());

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(360, 310);
        setLocationRelativeTo(null);
        setTitle("Donut");
        setVisible(true);
    }

    public static void main(String[] args) {
        new Donut();
    }
} 
```

我期待看到这样的行：`new Board().paint(graphicsObject)`那么实际上这条行在哪里执行或以正确的方式在哪里`paint(Graphics g)`调用实际函数？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:57:52.983

如果您想跟随调用堆栈来绘制（），只需编写`new Throwable().printStackTrace()`or `Thread.dumpStack()`，这将允许您跟随调用堆栈。

否则，看看`RepaintManager.addDirtyRegion(JComponent, int, int, int, int);`

无论如何，当你在屏幕上绘画时，你永远不应该调用paint/paintComponent/paintXXX 方法。只能打电话`repaint()`。

您不能依赖“何时”调用您的方法 paintComponent(Graphics) 或 paint(Graphics)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T14:51:08.010

`paint`在需要时由 Swing 自动调用，例如当组件变为可见时（第一次，或在窗口最小化后等），或当窗口调整大小时，基本上每当组件的内容需要时被画。你永远不应该`paint`在你的代码中显式调用，如果你想强制`paint`那么你应该调用`repaint`。

此[链接](http://www.oracle.com/technetwork/java/painting-140037.html)可能会有所帮助

PS`paint`被调用的方法代码`super.paint(g)`驻留在`JComponent`类中，由`JPanel`（由您的`Board`类扩展）扩展。

# javascript - 使用 selenium IDE 提取部分文本并将其放入变量中

> ID：12861218
> 
> 赞同：0
> 
> 时间：2012-10-12T14:28:44.793
> 
> 标签：javascript, selenium, selenium-ide

有人可以告诉我应该使用哪个命令使用 Selenium Ide 从文本中仅提取数字（694575）并将其放入变量中以供进一步使用。这是带有文本的div：

```
<div class="loginBoxTitle">Edit Exhibition Centre - 694575, Exhibition Center1</div> 
```

在这种情况下，可能像 storeText、storeEval 这样的命令应该可以工作，但传递的部分对我来说是个谜。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:50:58.683

我有解决方案，棘手 1

```
store  | Edit Exhibition Centre - 694575, Exhibition Center1 | string
store  | 1 | delimiter   
store  | javascript{storedVars['string'].split('- ')[storedVars['delimiter']]} | test
store  | 0 | delimiter1
store  | javascript{storedVars['test'].split(',')[storedVars['delimiter1']]} | output
echo   | ${output} 
```

试试这个 1，让我知道它是否适合你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-22T10:35:47.083

我对这个问题有一个简单的答案。试试这个代码它会工作。

```
<tr>
    <td>store</td>
    <td>Edit Exhibition Centre - 694575, Exhibition Center1</td>
    <td>string</td>
</tr>
<tr>
    <td>store</td>
    <td>javascript{storedVars['string'].substring(24)}</td>
    <td>string</td>
</tr>
<tr>
    <td>echo</td>
    <td>${string}</td>
    <td></td>
</tr>
<tr>
    <td>store</td>
    <td>javascript{storedVars['string'].substring(0,7)}</td>
    <td>string</td>
</tr>
<tr>
    <td>echo</td>
    <td>${string}</td>
    <td></td>
</tr> 
```

# javascript - 在 javascript 中创建一个 stringToSlug() 原型函数

> ID：12861221
> 
> 赞同：2
> 
> 时间：2012-10-12T14:28:52.693
> 
> 标签：javascript, jquery

尽管我更喜欢这样写，但我已将[此处](https://stackoverflow.com/questions/1053902/how-to-convert-a-title-to-a-url-slug-in-jquery)的答案用作示例：`value.stringToSlug()`

所以我把它改成了这样：

```
// String to slug
String.prototype.stringToSlug = function(str) {
      str = str.replace(/^\s+|\s+$/g, ''); // trim
      str = str.toLowerCase();
      str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars
               .replace(/\s+/g, '-') // collapse whitespace and replace by -
               .replace(/-+/g, '-'); // collapse dashes
      return str;
}; 
```

如果我像这样传递字符串，它会起作用：

```
var value = $(this).val();
value.stringToSlug(value); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T14:32:55.290

如果您正在修改任何原型，您可以利用`this`引用对象本身的事实；在这种情况下，它指向您正在调用该方法的字符串：

```
String.prototype.stringToSlug = function() { // <-- removed the argument
    var str = this; // <-- added this statement

      str = str.replace(/^\s+|\s+$/g, ''); // trim
      str = str.toLowerCase();
      str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars
               .replace(/\s+/g, '-') // collapse whitespace and replace by -
               .replace(/-+/g, '-'); // collapse dashes
      return str;
}; 
```

然后像这样调用：

```
$(this).val().stringToSlug(); 
```

# javascript - 如何将 AngularJS 变量传递给 Javascript？

> ID：12861222
> 
> 赞同：5
> 
> 时间：2012-10-12T14:28:56.430
> 
> 标签：javascript, bind, angularjs, flot

我正在构建一个带有模态窗口的 AngularJS Web 应用程序。在模态窗口中，我可以显示一个 JQuery Flot 实时图表，类似于：   [http ://people.iola.dk/olau/flot/examples/realtime.html](http://people.iola.dk/olau/flot/examples/realtime.html)

我的网站显示多个用户，但用户数量可能因所选内容而异。我喜欢为每个用户显示一个图表。这就是我难住的地方。

[我从http://people.iola.dk/olau/flot/examples/realtime.html](http://people.iola.dk/olau/flot/examples/realtime.html)复制了 Javascript 代码并将其放入 /js/flot/flot.user.js ，并进行了以下更改：

```
//$(function () {
function flotChart(user_ID) {
...
//var plot = $.plot($("#placeholder"), [ getRandomData() ], options);
var plot = $.plot($("#chart_" + user_ID), [ getRandomData() ], options);
… 
```

我的 AngularJS 网络应用程序有以下代码：

在 index.app.html 中：

```
<!DOCTYPE HTML>
<html ng-app="app">
...
<body ng-controller="AppCtrl">
...
<div class="container">
  <div ng-view></div>
</div>
... 
```

在模板 (index.html) 中：

```
...
<!--  Modal window -->
<script src="/js/flot/flot.user.js"></script>
<table class="table table-condensed">
  <tr ng-repeat="user in users">
    <td ng-click="href('#/profile/'+user.user_ID)" data-dismiss="modal">{{user.user_name}}</td>
    <td>
      <script type="text/javascript">
        flotChart({{user.user_ID}});
      </script>
      <div id="chart_{{user.user_ID}}" style="width:100%;height:150px;"></div>
    </td>
... 
```

我需要将 {{user.user_ID}} 传递给 flotChart(user_ID)，但是如上所示的 flotChart({{user.user_ID}}) 不起作用。

有人可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:43:16.103

我喜欢 blesh 关于使用指令的建议，但建议处理方式有所不同（抱歉，我现在没有带宽）。对于您拥有的代码，我认为您所需要的只是一个小调整。

```
<td ng-click="href('#/profile/{{user.user_ID}}')" data-dismiss="modal">{{user.user_name}}</td> 
```

封装在指令中是一个更好的解决方案，但是，如果您在枪下并且需要看到它的工作，那么我认为这没关系 - 现在。让我知道这是否适合您。

- 担

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:06:38.257

是的，考虑到我们习惯于模板的方式，这是一件棘手的事情。由于我们真的不应该从控制器做太多的 DOM 操作，你可能想要创建一个指令，[这里有一个例子。](http://plnkr.co/edit/PsQREl)

测试html：

```
<body ng-controller="MainCtrl">
  UserId: {{userId}}<br/>
  <my-flot-chart ng-model="name"></my-flot-chart>
</body> 
```

这是示例代码。

```
app.controller('MainCtrl', function($scope) {
  $scope.userId = 123;
});

function flotChart(userId) {
  alert('passed: ' + userId);
}

app.directive('myFlotChart', function(){
  return {
    restrict: 'E',
    require: 'ngModel',
    link: function(scope, elem, attr, ctrl) {
      //create a new script tag and append it to the directive's element.
      var scr = document.createElement('script');
      var text = document.createTextNode('flotChart(' + scope.userId + ')');
      scr.appendChild(text);
      elem.append(scr);
    }
  }
}) 
```

# git - 如何完全替换 git 存储库中的代码

> ID：12861224
> 
> 赞同：14
> 
> 时间：2012-10-12T14:29:00.673
> 
> 标签：git, heroku

我的本地机器上有一个 Facebook 应用程序，另一个是用 Heroku 创建的（Heroku 应用程序中的代码是由 Heroku 自动创建的）。我想用我本地机器上的代码完全替换 Heroku 应用程序中的代码。我已经在我机器上代码所在的目录中初始化了一个 git 存储库，并且我已经将 URL 设置为`git remote add origin git@heroku.com:my-fb-app.git`. 但是，当我输入时，`git push origin master`我得到：

```
To git@heroku.com:my-fb-app.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@heroku.com:blooming-cove-5867.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

显然，这不是正确的方法。我该怎么做呢？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-12T14:33:38.663

你可以强迫它

```
git push -f origin master 
```

取自[https://devcenter.heroku.com/articles/git](https://devcenter.heroku.com/articles/git)

# android - 如何从相机获取当前帧作为图像？

> ID：12861227
> 
> 赞同：0
> 
> 时间：2012-10-12T14:29:20.280
> 
> 标签：android

您好，我正在尝试制作我自己的特殊自定义代码扫描仪。我的应用程序渲染了一个特殊的自定义条形码，我需要制作一个非常简单的扫描仪，它将获取当前使用相机看到的内容并快速处理它以解码条形码。那么如何在不按下“拍摄”按钮的情况下从相机中抓取帧并将它们用作图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:37:40.107

检查开源项目。它无需单击拍照按钮即可提供条形码。

[关联](http://code.google.com/p/zxing/)

谢谢

# c# - 选择列表中所有值的位置

> ID：12861228
> 
> 赞同：4
> 
> 时间：2012-10-12T14:29:24.387
> 
> 标签：c#, sql, linq

我有一列有逗号分隔的 ID，我将它放入 LINQ 中的列表中。

我需要做的只是返回此列表中的所有值都存在于另一个中的 DataRows，如果有的话，我已经让它工作了，但我需要全部。

下面的代码：

```
results = 
results.Where(
    d => d["FilterIDs"] != null && // Check the row has FilterIds
    !filterValues.Except(
        d["FilterIDs"].ToString().Split(',').ToList(). // Tokenise the string
        Where(s => !String.IsNullOrEmpty(s)).ToList(). // Filter out bad tokens
        ConvertAll<int>(s => Convert.ToInt32(s)) // Convert all the tokens to ints
        ).Any());
            } 
```

因此，例如，我有一行在它的“FilterIDs”列中有 1,2,3,4

然后，我的 List 'filterValues' 中有 1,2,3,4,5,6,7 - 在这种情况下，将返回此行。

另一行有 1,8,9 - 只有 1 个匹配项，因此不会返回。

我一直在兜圈子，因此失去了意愿，因此非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:37:09.523

看来您刚刚撤消了您的`Except`电话-您的`A.Except(B)`意思是您已经使用了`B.Except(A)`。

也就是说，我会这样写：

```
var query = from row in results
            let filterIds = row["FilterIDs"]
            where filterIds != null
            let numbers = filterIds.ToString()
                                   .Split(',')
                                   .Where(s => !string.IsNullOrEmpty(s))
                                   .Select(int.Parse)
            where !numbers.Except(filterValues).Any()           
            select row; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:35:47.107

我会使用[`Enumerable<T>.All()`](http://msdn.microsoft.com/en-us/library/bb548541.aspx)：

```
results = results.Where(d => d["FilterIDs" != null &&
    d["FilterIDs"].ToString()
        .Split(',', StringSplitOptions.RemoveEmptyEntries)
        .Select(Int32.Parse)
        .All(f => filterValues.Contains(f))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:36:27.537

这个怎么样？

```
results = 
results.Where(
    d => !d.IsNull("FilterIDs") && // Check the row has FilterIds
         d["FilterIDs"]
           .ToString()
           .Split(',') // Tokenise the string
           .Where(s=>!String.IsNullOrEmpty(s))
           .ConvertAll<int>(s => Convert.ToInt32(s))
           .All(i => filterValues.Contains(i) )
      ); 
```

# c - 内核模块初始化和退出函数的调用顺序错误

> ID：12861230
> 
> 赞同：10
> 
> 时间：2012-10-12T14:29:29.400
> 
> 标签：c, linux, module, kernel, kernel-module

我正在制作一个非常简单的 hello world 内核模块并得到一些疯狂的行为。这一直有效，直到我升级到内核 3.3.8，现在它......嗯，它`init`在退出时调用函数，`exit`在初始化时调用函数。我已经确定我的名字是正确的

```
// Needed for module definitions
#include <linux/module.h>
// Needed for initilization modules
#include <linux/init.h>

// Must declare some license
MODULE_LICENSE("Dual BSD/GPL");

// Function to be called on insmod
// Returns 0 on success
static int __init mymod_init(void)
{
        // Prints kernel alert.  Check /var/log/syslog
        printk(KERN_ALERT "Module was loaded, this is the printk.");

        return 0;
}

// Function to be called on rmmod
static void __exit mymod_exit(void)
{
        // Prints kernel alert.  Check /var/log/syslog
        printk(KERN_ALERT "Module was unloaded, this is the printk");
}

// Register these functions
module_init(mymod_init);
module_exit(mymod_exit); 
```

样本输出：

> root@cop4610:/home/cop4610/Downloads/linux-3.3.8/mymodule# insmod mymodule.ko root@cop4610:/home/cop4610/Downloads/linux-3.3.8/mymodule# tail /var/log/syslog Oct 12 10:08:20 cop4610 内核：[633.567832] 模块已卸载，这是 printk

以下是现场视频： [http ://www.youtube.com/watch?v=8aJNSpCd7as&feature=youtu.be](http://www.youtube.com/watch?v=8aJNSpCd7as&feature=youtu.be)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-12T16:16:59.233

它需要一个换行符！！！！！！啊啊啊！！！

```
 printk(KERN_ALERT "Module was unloaded, this is the printk\n"); 
```

和

```
 printk(KERN_ALERT "Module was loaded, this is the printk\n"); 
```

似乎它并没有真正把它们弄乱，它只是看起来，因为第一个没有出现，直到第二个被发出，因为缓冲区没有被刷新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:42:42.920

这是我的基本示例：

```
#include <linux/module.h>
#include <linux/kernel.h>

#define MODULE_NAME "hello_md"

MODULE_LICENSE("GPL");
MODULE_AUTHOR("B3h3m0th");
MODULE_DESCRIPTION("Basic LKM; hello world module");
MODULE_VERSION("0.0");

static int __init insert_mod(void)
{
   printk(KERN_ALERT "[%s] Init: \"Hello World\"\n", MODULE_NAME);
   return 0;
}

static void __exit remove_mod(void)
{
   printk(KERN_ALERT "[%s] Exit\n", MODULE_NAME);
}

module_init(insert_mod);
module_exit(remove_mod); 
```

我的基本 Makefile：

```
obj-m += basic_module.o 

KERNELVERSION = $(shell uname -r)

all:
    $(MAKE) -C /lib/modules/$(KERNELVERSION)/build M=$(PWD) modules
clean:
    $(MAKE) -C /lib/modules/$(KERNELVERSION)/build M=$(PWD) clean 
```

# remote-access - psexec 错误代码 -1073740771

> ID：12861232
> 
> 赞同：0
> 
> 时间：2012-10-12T14:29:36.837
> 
> 标签：remote-access, psexec

我正在尝试通过我的主桌面打开远程计算机上的 Unity3D game.exe。我曾尝试通过批处理文件执行此操作，但建议尝试使用[PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)代替它。

到目前为止，我已经将 Psexec 程序带入了我的 game.exe 文件夹。我运行打开程序所需的命令行，窗口打开了几分之一秒，然后由于错误而关闭。它给出的错误代码是：-1073740771。

我试着用谷歌搜索这个错误实际上是什么，但我找不到任何东西。有谁知道这个错误与什么有关？

我输入的命令行如下：

```
psexec \\OtherComputer -i C:\Administrator\Users\Desktop\TargetFolder\Target.exe 
```

我什至在 -i 之后用 -d 尝试了上面的行，在 C:... 周围加上引号，但结果都是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:41:31.490

`PSExec`不知道其他没有EXE的游戏资源。它只会复制`game.exe`到远程机器并执行它。

尝试删除或重命名资源文件夹并在本地计算机上运行它 - 它应该与在远程计算机上执行相同的操作。

`psexec`除非整个应用程序自包含在一个`.exe`文件中，否则您无法做任何事情。

如果您对其他计算机具有管理员访问权限并且启用了管理共享，则您可以手动复制资源文件夹，然后使用 psexec 使用以下`-w`选项执行：

*   将文件复制到`\\OtherComputer\C$\MyGame`
*   跑`psexec \\OtherComputer -w C:\MyGame -i C:\Administrator\Users\Desktop\TargetFolder\Target.exe`

可能工作;o）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-24T18:20:20.970

使用 -h 参数来提升权限。

# c# - 将 Caliburn.Micro HelloScreens 示例从 Silverlight 转换为 WPF 时出错

> ID：12861233
> 
> 赞同：1
> 
> 时间：2012-10-12T14:29:38.333
> 
> 标签：c#, wpf, caliburn.micro

我正在开发一个应用程序，它需要与 Calibrun.Micro 的 HelloScreens 示例几乎相同的功能。我将代码转移到 WPF 应用程序，但是当我尝试运行它时，BootStrapper GetInstance 方法中不断出现错误

**找不到合同 WpfApplication.Framework.IShell 的任何实例。**

我的配置是

```
 protected override void Configure()
    {
        container = new CompositionContainer(
           new AggregateCatalog(AssemblySource.Instance.Select(x => new AssemblyCatalog(x)))
           );

        var batch = new CompositionBatch();

        batch.AddExportedValue<IWindowManager>(new WindowManager());
        batch.AddExportedValue<IEventAggregator>(new EventAggregator());
        batch.AddExportedValue(container);

        container.Compose(batch);
    } 
```

不确定它是 IoC 中的东西还是什么。任何帮助都会很棒。谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:14:52.023

好吧，我终于想通了。我在配置中缺少这两行

```
 batch.AddExportedValue<Func<IMessageBox>>(() => _container.GetExportedValue<IMessageBox>());
 batch.AddExportedValue<Func<CustomerViewModel>>(() => _container.GetExportedValue<CustomerViewModel>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:57:10.123

这绝对是 IoC 相关的。如 Derek 所说，检查 Export 属性。请注意，如果您的 ShellViewModel 在另一个程序集中，您还应该覆盖引导程序的 SelectAssemblies() 方法。

# perl - Perl - 搜索和替换单个主文件以创建多个子文件

> ID：12861244
> 
> 赞同：-4
> 
> 时间：2012-10-12T14:30:24.137
> 
> 标签：perl, replace

我有一个主文件，我想从中创建几个子文件。主文件中有几行我希望更改然后保存到另一个文件的文本。我希望多次执行此操作，每次将新文件保存为不同的文件名。

例如，我的主文件有一些 REPLACETEXT，我希望将其更改为 NEWTEXT 并将整个文件保存到 NEWTEXT1.txt。然后我想对 NEWTEXT2 重复此操作并保存到 NEWTEXT2.txt。再次冲洗并再重复 100 次左右。

我认为 perl 和循环有一种快速的方法，但它已经打败了我有限的知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:26:29.957

像其他人建议的那样，强烈建议您进行一些基本的 Perl 培训。

然而，这个简单的代码应该可以工作

```
#!/usr/bin/perl -w

my @keywords=('NEWTEXT1','NEWTEXT2','NEWTEXT2');
open(FILE,"Master.txt");
foreach (@keywords)
{
    open(NEWFILE,">$_.txt");
    seek (FILE, 0, 0);
    foreach $line (<FILE>)
    {
         $line=~s/REPLACETEXT/$_/g;
         printf NEWFILE ("$line");
    }
    close(NEWFILE);
}
close(FILE); 
```

# routes - NancyFX Routes - 多个可变参数

> ID：12861249
> 
> 赞同：0
> 
> 时间：2012-10-12T14:30:38.803
> 
> 标签：routes, url-routing, nancy

我有一个 url 列表，我必须使用这些 url 将内容呈现给浏览器。我希望能够使用 nancyfx 动态处理请求

url 的格式是 http;//mydomain.com/X/pathA/pathB/pathC/pathD pathA、pathB、pathC 和 pathD 是可变的 - 这意味着它可以是任何东西（这些是预定义的，但我不想物理上添加EACG）

如何创建路线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:28:02.110

好吧，南希捕获段本质上是贪婪的，因此像这样的路线`/x/{stuff}`会捕获您的路线并`{stuff}`包含`pathA/pathB/pathC/pathD`

# asp.net - 如何在经典的asp站点中注册Web服务

> ID：12861250
> 
> 赞同：0
> 
> 时间：2012-10-12T14:30:38.703
> 
> 标签：asp.net, web-services, asp-classic

我正在使用一个经典的 asp 网站。我创建了一些从 ASP 页面跳转到的 ASP.Net 页面 (ASPX)。ASP.net 页面使用 Web 服务来收集和保存数据。在本地测试页面时，我在我的测试网站 (ASP.net) 中设置了对 Web 服务的引用。

我的问题是如何在经典的 asp 网站中注册 web 服务？如果经典 asp 网站在 studio 10 中打开并添加了引用，我需要注意什么？

这是一个实时站点，因此不能将其关闭。

谢谢

# artificial-intelligence - 3 水壶的启发式函数

> ID：12861254
> 
> 赞同：1
> 
> 时间：2012-10-12T14:30:50.850
> 
> 标签：artificial-intelligence, graph-algorithm, heuristics

我有问题想请教各位。

我是人工智能的新手。我想使用 A* 搜索解决水壶问题（3 个水壶 - 3 升、5 升、9 升 - 试图获得 7 升）。

我需要一个启发式函数来实现解决方案，但我找不到一个好的启发式 f(n) 以便算法找到解决方案的最少步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:41:24.333

因此，给定您的参数，解决此问题的非启发式方法是：

```
0) Fill the 9 liter jug  
1) Pour the 9 liter jug into the 5 liter jug, this leaves 4 liters in the 9 liter  
2) Fill the 3 liter jug  
3) Pour the 3 liter jug into the 9 liter jug and the problem is solved 
```

所以看这个你会得到一个图，它的节点可以处于以下两种状态之一： `Pour`或`Fill`。然后，您为每个节点分配一个权重，该权重代表您将从该节点获得的液体量`1,2,3,etc`。不应该涉及到划分，你只需要让它“昂贵”以使用特定的操作。

# r - 尝试访问 h_elp 时，emacs ess 崩溃

> ID：12861261
> 
> 赞同：3
> 
> 时间：2012-10-12T14:31:28.447
> 
> 标签：r, emacs, ess

当我尝试访问帮助时，我的 emacs/ess 会话崩溃。如果我有两个加载了相同功能的包，就会发生这种情况；例如：

```
library(lubridate)
library(data.table)
?month 
```

在 Rgui 界面中弹出并要求选择我需要帮助的包。Emacs 只是崩溃。install.packages 也会出现类似的问题，但是有一种方法可以指定镜像[有没有一种方法可以使用 emacs 安装 R 包？](https://stackoverflow.com/questions/6630246/is-there-a-way-to-install-r-packages-using-emacs) 有没有类似的帮助技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:13:08.343

好吧，暂时没有完整的证明解决方案，因为没有人真正理解为什么会发生这些崩溃。我假设你在窗户上，对吧？

ESS 中有计划将所有帮助（和其他）调用完全内部化，以便不依赖于 R 对话框。希望在下一个版本中。

暂时将其放入您的 .Rprofile

```
tis <- utils:::index.search
formals(tis)[["firstOnly"]] <- TRUE
assignInNamespace("index.search", tis, "utils") 
```

它基本上使帮助系统选择具有找到的主题的第一个包。在您的情况下，data.table 包中的月份帮助页面将被忽略。没什么大不了的，因为无论如何常见的主题名称都很少见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T02:12:59.883

我发现启动库（tcltk）解决了这个问题。即使从 emacs+ess 调用菜单也会出现。我将 library(tcltk) 添加到我的 Rprofile.site 中，现在一切正常，install.packages() 并在多个包加载相同功能时访问帮助

# javascript - 如何使用 jQuery 触发多个 ID？

> ID：12861262
> 
> 赞同：0
> 
> 时间：2012-10-12T14:31:27.560
> 
> 标签：javascript, jquery, jquery-selectors

我有以下内容：

```
$('#editMenu', '#createContent', '#editContent')
    .click(function () {
        var $link = $(this);
        if ($link.attr('data-disabled') === 'no') {
            $link.attr('data-disabled', 'yes');
            adminDialog($link);
        }
        return false;
    }); 
```

但是，似乎单击其中任何一个都不起作用。我设置正确吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:32:16.773

您正在尝试的是[`multiple selector`](http://api.jquery.com/multiple-selector/)应该将其写为带有逗号分隔选择器的单个字符串。见下文，

改变

```
$('#editMenu', '#createContent', '#editContent') 
```

到

```
$('#editMenu, #createContent, #editContent') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:34:45.213

jQuery 允许像这样的[多个选择器](http://api.jquery.com/multiple-selector/)：

> jQuery('选择器1，选择器2，选择器N')

所以你需要：

```
$('#editMenu, #createContent, #editContent') 
```

> 您可以指定任意数量的选择器组合成一个结果。这种多表达式组合器是选择不同元素的有效方法。返回的 jQuery 对象中的 DOM 元素的顺序可能不相同，因为它们将按文档顺序排列。此组合器的替代方法是 .add() 方法。

# delphi - 如何释放记录中的对象？

> ID：12861268
> 
> 赞同：9
> 
> 时间：2012-10-12T14:31:39.277
> 
> 标签：delphi, record

我想，在这里我遇到了一个棘手的情况。我需要能够释放作为记录字段的对象。如果它是一个类，我通常会在析构函数中编写清理代码。但是由于记录类型不能引入“析构函数”，怎么可能调用**TObject(Field).Free;** ?

我预测会有两种用法：

1.  用新的记录替换记录。

    我认为这种用法很容易实现。由于记录是值类型，因此它们在赋值时被复制，我可以重载赋值运算符并释放旧记录所拥有的对象。

    （**编辑：**分配重载无法。这对我来说是一个新信息..）

2.  退出定义记录变量的范围。

    我可以想到一个释放对象的私有方法，并且可以在范围激发上手动调用此方法。但是，这里有同样的问题：如何让它更**记录**？这种行为有点像上课……

这是一个示例（显然**不是预期的用途**）：

```
TProperties = record
  ... some other spesific typed fields: Integers, pointers etc..
  FBaseData: Pointer;

  FAdditionalData: TList<Pointer>;
  //FAdditionalData: array of Pointer; this was the first intended definition
end; 
```

认为，

```
FAdditionalData:=TList<Pointer>.Crete; 
```

在记录构造函数中调用或通过像这样公开访问字段在记录变量范围内手动调用

```
procedure TFormX.ButtonXClick(Sender: TObject);
var
  rec: TProperties;
begin
  //rec:=TProperties.Create(with some parameters);

  rec.FAdditionalData:=TList<Pointer>.Create;

  //do some work with rec
end; 
```

退出 ButtonClick 范围后，**rec**不再存在，但**TList**仍然存在，这会导致内存泄漏......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T14:41:59.677

如果您在记录中只有一个对象引用，那么您无法让编译器帮助您。您全权负责该对象的生命周期。您不能重载赋值运算符，并且您不会收到任何范围确定的通知。

你可以做的是添加一个保护接口来管理对象的生命周期。

```
TMyRecord = record
  obj: TMyObject;
  guard: IInterface;
end; 
```

您需要确保`TMyObject`它通过引用计数来管理其生命周期。例如，从`TInterfacedObject`.

当你初始化记录时，你这样做：

```
rec.obj := TMyObject.Create;
rec.guard := rec.obj; 
```

此时，`guard`记录的字段现在将管理您的对象的生命周期。

事实上，如果你想进一步推动这个想法，你可以构建一个专门的类来保护对象的生命周期。这样就不再限制您`IInterface`在课堂上实施。网上有很多例子可以说明这项技术。例如，我提供 Jarrod Hollingworth 的题为[Smart Pointers](http://members.adug.org.au/2011/12/05/smart-pointers/)的文章和 Barry Kelly 的题为[Reference-counted pointers, revisited](http://blog.barrkel.com/2008/11/reference-counted-pointers-revisited.html)的文章。还有很多。这是老套路了！

但是请注意，您在这里拥有的是值类型和引用类型的奇怪混合。从表面上看，记录是值类型。然而，这个行为就像一个引用类型。如果您在记录中有其他字段是值类型，那么这将更加令人困惑。当您使用这样的记录时，您需要非常注意这个问题。

从表面上看，在不了解您的设计的情况下，我倾向于建议您不要将对象引用放入记录中。它们更适合内部引用类型，即类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T14:59:44.023

我记得有人创建了一个名为 TLifetimeWatcher 的类。基本上，它看起来像：

```
TLifetimeWatcher = class(TInterfacedObject)
private
  fInstance: TObject;
  fProc: TProc; 
public
  constructor Create(instance: TObject); overload;
  constructor Create(instance: TObject; proc: TProc); overload;
  destructor Destroy; override;
end; 
```

// 如果分配了 (cleanup) proc，将在析构函数中执行，否则将通过调用 Free 方法释放实例。

# css - 浏览器是否请求已被 CSS 覆盖的图像？

> ID：12861270
> 
> 赞同：3
> 
> 时间：2012-10-12T14:31:49.777
> 
> 标签：css, image, html-parsing, httprequest, css-parsing

假设我的 CSS 看起来像这样：

```
#element {background-image: url("image1.png");}
#element {background-image: url("image2.png");} 
```

浏览器会：

*   请求 image1.png，然后请求 image2.png 并显示它？或者...
*   先解析css，看到指定image2.png的选择器优先，只请求显示image2.png？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:43:38.333

它先解析 CSS，然后请求图像，因此不会下载 image1.png

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:52:06.967

通过使用 Chrome 和[开发者工具](https://developers.google.com/chrome-developer-tools/docs/overview)进行一些快速测试：

*   如果`#element`不存在，则不会下载任何图像，因为浏览器没有匹配的元素来应用样式
*   如果`#element`存在，则应用通常的 CSS 级联和特异性规则，并且只会`image2.png`下载该规则，因为该规则出现在*规则之后*`image1.png`。

也就是说，其他浏览器的行为可能会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:56:12.357

如果您在 chrome 中实现一个运行它的网站，您可以看到浏览器首先解析 CSS，创建它需要的规则和请求，然后发出请求。

在 CSS 底部的 CSS 规则中，CSS 会覆盖任何从顶部开始的规则，因此浏览器知道只请求作为最终规则的图像。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-12T14:38:28.073

如您所知，当您第一次请求页面时，您的浏览器会向服务器发送请求。然后浏览器开始解析页面。

当它找到对外部资源的引用时，它将对该资源执行另一个请求。所以我认为它仍然会加载它。

# ruby-on-rails - Rails: has_many WITHOUT belongs_to

> ID：12861276
> 
> 赞同：4
> 
> 时间：2012-10-12T14:32:06.013
> 
> 标签：ruby-on-rails, has-many, belongs-to

我目前正在使用 RoR，遵循一些书籍和教程，并且效果很好。但是现在我必须实现一些我找不到任何资源的东西，我需要一些帮助。这就是我想做的事情：我有一个人们可以登录并查看内容的应用程序，所以我有一个名为**users**的数据库表，非常不言自明。此外，我有一个表**user_rights**，每个表都有一个 id、一个名称和一个描述。现在的想法是，每个用户都可以拥有多个权限，让他可以访问应用程序的不同部分。因此：

```
class User < ActiveRecord::Base
  attr_accessible :name, :password_digest, :password, :account_nr, :password_confirmation, :email
  has_many :scope
  validates :name, presence: true, uniqueness: true
  validates :account_nr, presence: true
  validates :email, :presence => true
  has_secure_password
end 
```

和：

```
class Scope < ActiveRecord::Base
  attr_accessible :name, :description
end 
```

我**不想**有一个**belongs_to**关系。我只想要一个具有用户权限的小表，并为每个用户提供几个。但不幸的是，我完全不知道如何进行！谁能给我一些提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:41:08.613

似乎您需要[多对多](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_and_belongs_to_many)关联，例如：用户可以拥有多个权限，并且可以将一项权限分配给多个用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:00:01.357

我相信您正在尝试做的事情称为**授权**（您可能已经知道）。如果您正在编写自定义解决方案，我认为您很有可能正在重新发明轮子。

我建议花一些时间使用由 RailsCasts 人员编写的 Rails 授权插件[CanCan](http://railscasts.com/episodes/192-authorization-with-cancan)，看看它是否满足您的需求。

# java - 从 android 应用程序响应时间向服务器发送 php 查询

> ID：12861278
> 
> 赞同：0
> 
> 时间：2012-10-12T14:32:12.713
> 
> 标签：java, php, android, eclipse, http

我正在尝试在数据库中输入一个条目。这是我正在使用的代码

```
String url = String.format("http://xxxxxxx/xxx/index.php?home=yes&pid=%s", pid);

        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);

    try {
        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        String response = httpclient.execute(httppost, responseHandler);

        Log.e("abc", response);
        return response;
        } catch (ClientProtocolException es) 
        {   
            Log.e("x" , es.getMessage());
            return "";
        } catch (IOException e) 
        {
            Log.e("aasx" , e.getMessage());
            return "";
        } 
```

这段代码工作正常。现在当出现网络连接问题时，代码卡在 `httpclient.execute(httppost, responseHandler);`了 2 分钟以上。

有没有什么方法可以只检查几秒钟，如果没有响应`catch the exceptions`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:37:29.280

[您的问题与此处](https://stackoverflow.com/questions/693997/how-to-set-httpresponse-timeout-for-android-in-java)的问题相似。

您只需要为 HttpClient 设置超时，如那里的答案所示。这可以通过将 HttpParams 对象传递给 HttpClient 构造函数来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:35:05.967

我对 Java 不太熟悉，但在 Actionscript 3 中做类似的事情时，通常可以在 HTTP 请求上设置一个超时数，以便在一定时间后停止尝试。对于应该快速返回的请求，我通常将其设置为 15-30 秒。

# php - php标头命令不起作用

> ID：12861288
> 
> 赞同：2
> 
> 时间：2012-10-12T14:32:46.380
> 
> 标签：php, header

我在让此代码在我想很快推出的网站上运行时遇到问题。特别是当我登录时，成功登录后标题不会重定向。我以前多次使用过这段代码，我从来没有遇到过问题。现在唯一的区别是我使用的是不同的服务器和不同的数据库。这是给我带来麻烦的代码：

```
<?php
/*set all the variables*/
$email = $_POST['email'];

$password = sha1($_POST['password']);   /* hash the password*/

$conn = mysqli_connect ('servername', 'username', 'password', 'databasename') or die('Error connecting to MySQL server');
/*select the id from the users table that match the conditions*/
$sql = "SELECT id FROM users WHERE email = '$email' AND password = '$password'";

$result = mysqli_query($conn, $sql) or die('Error querying database.');

$count = mysqli_num_rows($result);

if ($count == 1) {
echo 'Logged in Successfully.';

$row = mysqli_fetch_array($result);

session_start();

$_SESSION['user_id'] = $row['id'];

/*If true head over to the users table*/
header('location: users_table.php');

}
/*If invalid prompt them to adjust the previous entry*/
else {
echo '<h2>Invalid Login</h2><br />';
echo '<h2>Click <a href="javascript:history.go(-1)">HERE</a> to go back and adjust your entry.</h2>';
                    }

mysqli_close($conn);

?> 
```

正确连接不是问题，因为我收到“成功登录”消息，但它根本不会重定向。

* * *

感谢所有的答案，我尝试删除回声，但我现在得到的只是一个空白页，我想可能是我使用的浏览器所以我切换到另一个，我仍然只是得到一个空白页，还有其他建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:34:27.833

你不能在你的`header`陈述之前附和任何东西。

```
echo 'Logged in Successfully.'; 
```

这导致`header`调用不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:34:27.930

```
if ($count == 1) {
echo 'Logged in Successfully.';
//this statement is creating problem
$row = mysqli_fetch_array($result);

session_start();

$_SESSION['user_id'] = $row['id'];

/*If true head over to the users table*/
header('location: users_table.php');

} 
```

这是因为您在标题前回显某些内容您应该在文档`ob_start()`的开头和`ob_end_flush()`结尾使用..

或者不要在之前回`header()`显。因为我们发现你没有打开错误。所以打开它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T14:36:47.917

您不能`header`在...之后发布`echo`...如果这确实有效，您将永远不会看到文本（它只会重定向）。（修复删除/注释掉该`echo`行）

此外，[位置](http://en.wikipedia.org/wiki/HTTP_location)标头需要一个绝对/完整 URL（尽管许多浏览器似乎可以处理相对 URL）。

如果您想这样做（事先显示某种状态），请使用几秒钟后触发的 HTML 或 Javascript 重定向。

**HTML**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Logged in Successfully.</title>
<meta http-equiv="REFRESH" 
  content="5;url=http://www.example.com/users_table.php"></HEAD>
<BODY>
Logged in Successfully.
</BODY>
</HTML> 
```

**Javascript**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<title>Logged in Successfully.</title>
</HEAD>
<BODY onLoad="setTimeout(function() {
  window.location='http://www.example.com/users_table.php'},5000)">
Logged in Successfully.
</BODY>
</HTML> 
```

更好的是，允许`users_table.php`页面显示成功的登录消息并使用标头位置重定向。

# uitableview - iOS故事板：为原型单元格设置背景颜色

> ID：12861289
> 
> 赞同：8
> 
> 时间：2012-10-12T14:32:48.800
> 
> 标签：uitableview, interface-builder, prototype, xcode4.5

我在使用 XCode 4.5 时遇到了一个非常奇怪的问题。

我试图在我的故事板中为原型单元格设置背景颜色，但在界面生成器中，单元格颜色不会改变，即使我在设备上运行它也不会使用我设置的颜色。

我尝试在所有初始化方法中创建一个子类`UITableViewCell`并设置背景颜色，但它仍然不起作用。

PS：XCode 4.5.1 和 iOS 5 或 6，同样的问题。由于我是一名新开发人员，我不记得它是否适用于以前版本的 XCode。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-28T07:27:37.163

@dvkch：我不知道您是如何删除和重新创建segues 的。我知道设置表格视图单元格背景颜色的唯一方法是设置单元格的内容视图背景颜色：

```
cell.contentView.backgroundColor = [UIColor orangeColor]; 
```

遗憾的是，故事板没有显示内容视图属性。

* * *

编辑

如果您更改表格视图的背景颜色，则单元格的背景颜色也会更改。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-07T17:10:30.723

我能够在 Xcode 5 的情节提要内向原型 UITableViewCell 添加背景颜色。

首先，选择要赋予背景颜色的单元格。

接下来，转到 View -> Utilities -> Identity Inspector 并为“backgroundColor”类型的“颜色”和所需任何颜色的“值”添加一个新的用户定义的运行时属性。

![Identity Inspector 面板的屏幕截图](../Images/31b38d610f74af659d92e6a09f791abf.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-13T12:02:28.907

经过一些清理和清理构建文件夹操作，删除了一些segue并重新创建它们之后，它终于工作了......感谢Xcode 4.5！

编辑：经过多次测试：在 iOS6 和 7 上，您实际上应该能够通过在单元格原型本身和 contentView 上设置背景颜色来在情节提要或代码中设置正确的背景颜色。这些不是故事板中的相同对象。我希望这会有所帮助。

# c# - RegExp：如果空间存在则选择空间

> ID：12861298
> 
> 赞同：1
> 
> 时间：2012-10-12T14:33:14.590
> 
> 标签：c#, regex

我得到了像

```
\w{1,2}-\w{1,2}\d{1,4} and \w{1,2}-\w{1,2} \d{1,4} 
```

我转换这些值：

```
AB-CD 1 -> AB-CD1
AB-CD1 -> AB-CD1 
```

我用

```
[ ]{1}[\d]{1} 
```

并将“”替换为“”。这很好用。

但现在我需要做以下转换：

```
AB-CD1 -> AB-CD 1
AB-CD 1 -> AB-CD 1 
```

我试着向前看，瞄准任何数字

```
(?=\d) 
```

但是如果我的文本已经包含一个空格，那么我会得到两个空格。我需要选择 \w 和 \d 之间的空格（或没有） - 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:48:33.723

你可以写：

```
(?<![\d ]) ?(?=\d) 
```

*匹配不*跟在数字或空格之后并且在数字*之前*的可选空格（即空格或空字符串）位置。

（`(?<!...)`是一个*否定的后向断言*；参见[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:48:23.107

您可以替换`([^\d ])(?=\d)`为**"\1"**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:48:46.047

不知道 c#.. 但你可以尝试替换：

```
([a-zA-Z])([0-9]+) 
```

到`\1 \2`

用 sed 做一个小测试：

```
kent$  echo "AB-CD1"|sed -r 's/([a-zA-Z])([0-9]+)/\1 \2/g'
AB-CD 1 
```

# oracle - Oracle - 计算时间戳之间的差异大于 1 小时的时间戳

> ID：12861303
> 
> 赞同：2
> 
> 时间：2012-10-12T14:33:26.967
> 
> 标签：oracle

我有一个包含以下字段的工作日志表：

```
worklog_id,
agent_name,
ticket_number,
timestamp,
worklog_notes. 
```

我希望能够计算工作日志条目的数量，如果`agent_name`,`ticket_number`和`timestamp`(date) 相同，则仅当两个条目之间的时间大于 1 小时时才计算工作日志条目。

示例：John Smith 在工单 12345 上创建三个工作日志条目。第一个时间戳是“10/11/2012 9:11:44 AM”，第二个时间戳是“10/11/2012 9:36:16 AM”，第三个时间戳时间戳是“10/11/2012 11:18:20 AM”。在此示例中，我只想将两个工作日志条目归功于代理，因为前两个条目相隔不到一个小时。

我尝试使用“where”子查询使逻辑工作，但无法使其工作。有人可以提供任何示例吗？谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:47:52.397

这能得到你想要的吗？应始终计算给定代理在票上的第一次进入，之后的进入仅在自上次进入至少一个小时后才应计算在内。

```
select agent_name, ticket_number, count(*) from (
  select agent_name, ticket_number, timestamp,
         lag(timestamp) over
            (partition by agent_name, ticket_number order by timestamp) prev_timestamp
  )
from worklog
where (prev_timestamp is null
       or (timestamp - prev_timestamp) >= interval '1' hour
      )
group by agent_name, ticket_number 
```

我不确定这是否正是您想要的——如果代理在前一个条目的一个小时内不断添加条目，那么除了第一个条目之外，其他条目都不会被计算在内。因此，添加大量更新的人会受到惩罚。

也许您真正想要的是计算进行更新的不同小时数：

```
select agent_name, ticket_number, count(distinct to_char(timestamp,'DD-MON-YYYY HH24')
  from worklog
  group by agent_name, ticket_number 
```

# c++ - c++ set_union 迭代器

> ID：12861304
> 
> 赞同：3
> 
> 时间：2012-10-12T14:33:29.707
> 
> 标签：c++, iterator, set-union

我对这段代码有一些问题，代码正在编译，但是当我尝试测试向量的内容时，测试失败了。这是代码：

```
using std::vector;

// returns a different vector, containing all elements in v1 and all elements in v2                          (elements who are either in v1 or v2) but no duplicates.

template <typename T> vector<T> set_union(const vector<T>& v1, const vector<T>&v2)
{
    vector<T> v(20);
    typename vector<T>::iterator it;

    it = set_union (v1.begin(), v1.end(), v2.begin(), v2.end(), v.begin());
    return v;
} 
```

这是我正在运行的测试：

```
TEST_F(MyTest,set_union) {
        vector<int> v1{1,3,2};
        vector<int> v2{1,4};
        vector<int> v=set_union(v1,v2);
        ASSERT_EQ(0,count(v,9));
        ASSERT_EQ(1,count(v,1));
        ASSERT_EQ(1,count(v,2));
        ASSERT_EQ(1,count(v,3));
        ASSERT_EQ(1,count(v,4)); 
```

}

当我运行这些测试时，第一个测试通过，但第二个测试返回向量中数字 1 的 0 个实例，其中答案应该是 1 个实例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T14:36:14.860

问题是`std::set_union`需要对输入数据进行排序，而您`v1`的不是。

编辑：如评论中所述，您不应该预先调整向量的大小，因为它会以一堆 0 结束，除非您在联合结果中正好有 20 个项目。相反，像这样的东西呢（我更改了名称以使其更具描述性，并在调用中进行了忍者编辑，以根据评论保留最小大小限制）：

```
template <typename T>
std::vector<T> vector_union(const std::vector<T>& v1, const std::vector<T>& v2)
{
    vector<T> v;
    v.reserve(std::max(v1.size(), v2.size());

    set_union (v1.begin(), v1.end(), v2.begin(), v2.end(), std::back_inserter(v));

    return v;
} 
```

如果需要，您甚至可以在调用之前对向量进行这种排序，`set_union`但这会导致对预先排序的输入进行不必要的工作。

# c# - 使用 EF MVC 获取当前日期时间

> ID：12861305
> 
> 赞同：0
> 
> 时间：2012-10-12T14:33:33.110
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我想将时间戳应用于我的实体框架项目。我有一个下面列出的课程。我希望这个类能抓住当前的日期时间。但相反，它为我提供了一个输入日期时间的字段。我希望它能够获取当前的日期时间。

```
 public class Answer
    {
        public int ID { get; set; }
        public string Answers {get; set;}
        public System.DateTime DateCreated { get; set; }
        public string Division { get; set; }
        public string Phone { get; set; }
        public string Description { get; set; }

    } 
```

下面是我知道是错误的代码行。

```
public System.DateTime DateCreated { get; set; } 
```

我有点不确定该怎么做。我是实体新手，也是 MVC 新手。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:42:44.277

您可以在构造函数中初始化它，例如

```
public class Answer
{
    public Answer()
    {
        DateCreated = DateTime.UtcNow;
    }

    ...
} 
```

但是，我的印象是您的`Answer`类实际上不是一个实体，而是一个视图模型。对于实际实体，我倾向于使用这样的固定/生成值做的是让数据库使用默认值填充字段，例如`GetUtcDate()`，然后在 EF 设计器中将`StoreGeneratedPattern`属性设置为`Computed`- 这样当您下拉实体`CreatedDate`时预填充。这为您提供了两种方式的数据完整性，因为您在推送数据时也无法覆盖数据库中的字段。

那么这只是将您的`Answer`实体映射到您的`Answer`视图模型的情况，因此无需初始化任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:40:12.753

您可以在构造函数中设置 DateCreated -

```
public Answer()
{
  DateCreated = DateTime.Now;
} 
```

然后，如果您在 MVC 视图中使用它，请将字段设置为隐藏，这样它就不会被更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T23:45:04.800

您可以通过在上下文中覆盖 SaveChanges() 方法来处理时间戳以及潜在的修改日期。

下面的快速示例。

```
public abstract class BaseEntity
{
    public int ID { get; set; }
    public DateTime ModifiedDate { get; set; }
    public DateTime CreatedDate { get; set; }
}
public class Answer : BaseEntity
{
    public String Answers { get; set; }
    public String Division { get; set; }
    public String Phone { get; set; }
    public String Description { get; set; }
}

public class DB_Context : DbContext
{
    .....

    public override int SaveChanges()
    {
        var changeSet = ChangeTracker.Entries<BaseEntity>();

        if (changeSet != null)
        {
            foreach (var added in changeSet.Where(x => x.State == System.Data.EntityState.Added))
            {
                added.Entity.CreatedDate = DateTime.UtcNow;
                added.Entity.ModifiedDate = DateTime.UtcNow;
            }
            foreach (var modified in changeSet.Where(x => x.State == System.Data.EntityState.Modified))
            {
                modified.Entity.ModifiedDate = DateTime.UtcNow;
            }
        }

        return base.SaveChanges();
    }
} 
```

# javascript - 悬停效果对 ajax 加载的内容很奇怪

> ID：12861306
> 
> 赞同：0
> 
> 时间：2012-10-12T14:33:33.300
> 
> 标签：javascript, jquery, css, ajax

这是网站：[http ://www.webkunst.comeze.com/test/](http://www.webkunst.comeze.com/test/)

如果您单击艺术品的左侧，它会通过 ajax 加载页面内容（出现在右侧的项目）。我遇到的问题是，当我将鼠标悬停在项目上时，它会出现某种奇怪的行为，例如，如果我将鼠标悬停在 4 到 9 个项目上，它会显示隐藏的文本，但在前三个项目上，这真的很奇怪。

这就是我做效果的方式：

为了显示文本，这是在我的主要 js 上：

```
$(function(){
    $(document).on("mouseover",".item",function(){
        $(this).find(".art_title").fadeIn(200);
     });
     $(document).on("mouseleave",".item",function(){
        $(this).find(".art_title").fadeOut(200);
     });
}); 
```

为了做黑色透明悬停效果，我正在使用本教程： [http](http://tympanus.net/codrops/2011/11/02/original-hover-effects-with-css3/) : //tympanus.net/codrops/2011/11/02/original-hover-effects-with-css3/ 它使用带有 .item .mask 的 css

这是我的标记： ![在此处输入图像描述](../Images/be7688819dd0201d34750653d73937e4.png)

我做错了什么，为什么会这样做？

我必须补充一点，当页面不是通过 ajax 加载时效果很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:40:37.290

给你的`.item`元素`position:relative`css。

您的绝对`.art_title`元素与页面顶部对齐（而不是与`.item`

# c# - 在 C# 中，我可以编写一个通用函数来返回 null 或将值作为字符串返回吗？

> ID：12861311
> 
> 赞同：5
> 
> 时间：2012-10-12T14:33:48.147
> 
> 标签：c#, generics, nullable

基本上我想要以下通用功能：

```
public string StringOrNull<T> (T value)
{
    if (value != null)
    {
       return value.ToString();
    }
    return null;
} 
```

我知道我可以使用诸如 where T: class 之类的约束，但 T 可以是原始类型、Nullable<> 或类。有没有通用的方法来做到这一点？

**编辑**

原来我开枪了。这实际上工作得很好，因为这个示例显示：

```
 class Program
    {
        static void Main(string[] args)
        {
            int i = 7;
            Nullable<int> n_i = 7;
            Nullable<int> n_i_asNull = null;
            String foo = "foo";
            String bar = null;

            Console.WriteLine(StringOrNull(i));
            Console.WriteLine(StringOrNull(n_i));
            Console.WriteLine(StringOrNull(n_i_asNull));
            Console.WriteLine(StringOrNull(foo));
            Console.WriteLine(StringOrNull(bar));

        }

        static private string StringOrNull<T>(T value)
        {
            if (value != null)
            {
                return value.ToString();
            }
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T14:36:58.350

[通用代码中的默认关键字](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx)

在泛型类和方法中，出现的一个问题是，当您事先不知道以下内容时，如何为参数化类型 T 分配默认值：

T 是引用类型还是值类型。

如果 T 是值类型，无论是数值还是结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T14:37:51.293

您可以使用[default](http://msdn.microsoft.com/en-us/library/xwth0h0d.aspx)关键字返回 T 的默认值：

```
public string StringOrNull<T> (T value)
{
    .....

    return default(T).ToString();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T14:44:33.853

这是一个有趣的：

```
public static class ExtensionFunctions{
    public static string ToStringOrNull( this object target ) {
        return target != null ? target.ToString() : null;
    }
} 
```

最酷的部分？这将起作用：

```
( (string) null ).ToStringOrNull(); 
```

这也会：

```
 5.ToStringOrNull(); 
```

扩展函数非常棒……它们甚至可以处理空对象！

如果你传递一个原始类型，它会自动被[装箱](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)，所以你不必担心`null`比较。由于装箱是自动发生的，您甚至可以显式比较 a`int`而不`null`出现错误，但结果将始终是`false`（并且您可能会收到一个编译器警告告诉您）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T14:37:02.240

为什么通用？

```
public string StringOrNull (object value)
{
    if (value != null){
       return value.ToString();
    }
    return null;
} 
```

# python - 在 Python 中交错两个 numpy 数组的行

> ID：12861314
> 
> 赞同：16
> 
> 时间：2012-10-12T14:34:02.973
> 
> 标签：python, arrays, numpy

我想交错两个相同大小的numpy数组的行。我想出了这个解决方案。

```
# A and B are same-shaped arrays
A = numpy.ones((4,3))
B = numpy.zeros_like(A)
C = numpy.array(zip(A[::1], B[::1])).reshape(A.shape[0]*2, A.shape[1])
print(C) 
```

输出

```
[[ 1\.  1\.  1.]
 [ 0\.  0\.  0.]
 [ 1\.  1\.  1.]
 [ 0\.  0\.  0.]
 [ 1\.  1\.  1.]
 [ 0\.  0\.  0.]
 [ 1\.  1\.  1.]
 [ 0\.  0\.  0.]] 
```

有没有更清洁、更快、更好、仅限 numpy 的方法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-12T14:44:00.313

这样做可能更清楚一些：

```
A = np.ones((4,3))
B = np.zeros_like(A)

C = np.empty((A.shape[0]+B.shape[0],A.shape[1]))

C[::2,:] = A
C[1::2,:] = B 
```

我猜它可能也快一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T14:40:03.370

您可以堆叠、转置和重塑：

```
numpy.dstack((A, B)).transpose(0, 2, 1).reshape(A.shape[0]*2, A.shape[1]) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-03T08:42:12.987

我发现以下方法使用`numpy.hstack()`非常易读：

```
import numpy as np

a = np.ones((2,3))
b = np.zeros_like(a)

c = np.hstack([a, b]).reshape(4, 3)

print(c) 
```

输出：

```
[[ 1\.  1\.  1.]
 [ 0\.  0\.  0.]
 [ 1\.  1\.  1.]
 [ 0\.  0\.  0.]] 
```

很容易将其推广到相同形状的数组列表：

```
arrays = [a, b, c,...]

shape = (len(arrays)*a.shape[0], a.shape[1])

interleaved_array = np.hstack(arrays).reshape(shape) 
```

它似乎比@JoshAdel 在小型阵列上接受的答案要慢一些，但在大型阵列上同样快或更快：

```
a = np.random.random((3,100))
b = np.random.random((3,100))

%%timeit
...: C = np.empty((a.shape[0]+b.shape[0],a.shape[1]))
...: C[::2,:] = a
...: C[1::2,:] = b
...:

The slowest run took 9.29 times longer than the fastest. This could mean that an intermediate result is being cached.
100000 loops, best of 3: 3.3 µs per loop

%timeit c = np.hstack([a,b]).reshape(2*a.shape[0], a.shape[1])
The slowest run took 5.06 times longer than the fastest. This could mean that an intermediate result is being cached. 
100000 loops, best of 3: 10.1 µs per loop

a = np.random.random((4,1000000))
b = np.random.random((4,1000000))

%%timeit
...: C = np.empty((a.shape[0]+b.shape[0],a.shape[1]))
...: C[::2,:] = a
...: C[1::2,:] = b
...: 

10 loops, best of 3: 23.2 ms per loop

%timeit c = np.hstack([a,b]).reshape(2*a.shape[0], a.shape[1])
10 loops, best of 3: 21.3 ms per loop 
```

# python - 尝试在 AD 中创建用户列表

> ID：12861315
> 
> 赞同：0
> 
> 时间：2012-10-12T14:34:02.760
> 
> 标签：python, windows, active-directory, python-2.7

因此，我创建了一个脚本，用于在 AD 中搜索特定 OU 中的用户列表，并将其输出到文本文件。我需要格式化这个文本文件。我正在搜索的顶部 OU 中包含该公司每个位置的 OU，其中包含该位置的用户帐户。

这是我的脚本：

```
import active_directory
import sys

sys.stdout = open('output.txt', 'w')
users = active_directory.AD_object ("LDAP://ou=%company%,dc=%domain%,dc=%name%
for user in users.search (objectCategory='Person'):
 print user

sys.stdout.close() 
```

这是我的输出的样子，每个不同的用户只有 20 多行：

`LDAP://CN=%username%,OU=%location%,OU=%company%,dc=%domain%,dc=%name%`

所以，我想做的只是把它用简单的英文写出来，让它更容易阅读，只需显示用户名和子集 OU。所以这：

`LDAP://CN=%username%,OU=%location%,OU=%company%,dc=%domain%,dc=%name%`

变成这样：

`%username%, %location%`

如果有任何方法可以将其导出到 .csv 或 .xls 以放入可以按位置或仅按字母顺序排序的列中，那就太好了。我有一个地狱般的时间只是弄清楚文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:01:28.467

如果你有这样的字符串

```
LDAP://CN=%username%,OU=%location%,OU=%company%,dc=%domain%,dc=%name% 
```

然后操纵它很容易。如果格式是标准的并且没有改变，那么操作它的最快方法就是使用**string.split()**

```
>>> splitted = "LDAP://CN=%username%,OU=%location%,OU=%company%,dc=%domain%,dc=%name%".split('=') 
```

产生一个列表

```
>>> splitted 
["LDAP://CN", 
 "%username%, OU",
 "%location%, OU",
 "%company%, dc",
 "%domain%, dc",
 "%name%"] 
```

现在我们可以访问列表中的项目

```
>>> splitted[1]
"%username%, OU" 
```

为了摆脱“，OU”，我们需要再做一次拆分。

```
>>> username = splitted[1].split(", OU")[0]
>>> username
%username% 
```

CSV 只是一个文本文件，因此您所要做的就是更改文件结尾。这是一个完整的例子。

```
output = open("output.csv","w")
users = active_directory.AD_object ("LDAP://ou=%company%,dc=%domain%,dc=%name%
for user in users.search (objectCategory='Person'):
    # Because the AD_object.search() returns another AD_object
    # we cannot split it. We need the string representation
    # of this AD object, and thus have to wrap the user in str()

    splitteduser = str(user).split('=')
    username = splitteduser[1].split(", OU")[0]
    location = splitteduser[2].split(", OU")[0]
    output.write("%s, %s\n"%(username,location))

    % \n is a line ending
    % The above is the old way to format strings, but it looks simpler.
    % Correct way would be:
    % output.write("{0}, {1}\n".format(username,location))    

output.close() 
```

这不是最漂亮的解决方案，但应该很容易理解。

# ios - 在单元测试中创建 coredata 文件时出错

> ID：12861319
> 
> 赞同：1
> 
> 时间：2012-10-12T14:34:16.943
> 
> 标签：ios, unit-testing, core-data

我在静态库中有一个 coredata 文件，我正在为它创建单元测试。当我在单元测试执行期间尝试在以下步骤中创建 sqlite 文件时出现此错误

```
_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                                                   configuration:nil
                                                             URL:storeURL
                                                         options:nil
                                                           error:&error])
    { [...] } 
```

> 测试用例“-[PersonTest testAddPerson]”已启动。2012-10-12 07:19:23.989 otest[11852:7e03] 未解决的错误错误域 = NSCocoaErrorDomain 代码 = 512“操作无法完成。（可可错误 512。）”用户信息 = 0x216a320 {原因 = 无法创建文件; code = 2}, { reason = "创建文件失败；code = 2"; }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:19:13.193

尝试为 .sqlite 文件提供与项目名称完全相同的名称。

还

确保从库中复制 .sqlite 文件并将其保存到应用程序目录。

# android - 我可以以 .wav 格式存储由“MediaStore.Audio.Media.RECORD_SOUND_ACTION”录制的声音文件吗？

> ID：12861322
> 
> 赞同：0
> 
> 时间：2012-10-12T14:34:27.117
> 
> 标签：android, android-audiomanager

我正在使用以下代码在我的 Galaxy S2 中录制声音。

意图意图 = 新意图（MediaStore.Audio.Media.RECORD_SOUND_ACTION）；

但是此代码将其存储在 .3ga 文件中。

在我的应用程序中，我需要找到声音的最大幅度。但是 Java 声音不支持 .3ga 文件。有人可以告诉我如何解决这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:32:36.033

您可以使用 AudioRecord 来录制音频。

AudioRecord 录音机 = new AudioRecord(MediaRecorder.AudioSource.MIC, 44100, AudioFormat.CHANNEL_IN_STEREO, AudioFormat.ENCODING_PCM_16BIT, bufferSize);

录音机.startRecording();

请看一下[http://www.androiddevblog.net/android/android-audio-recording-part-2](http://www.androiddevblog.net/android/android-audio-recording-part-2)

# javascript - 如何在Javascript中正则表达式两个标记之间的字符串？

> ID：12861324
> 
> 赞同：0
> 
> 时间：2012-10-12T14:34:29.993
> 
> 标签：javascript, regex

被问了很多次，但我无法让它工作......

我有这样的字符串：

```
"text!../tmp/widgets/tmp_widget_header.html" 
```

并尝试像这样提取`widget_header`：

```
var temps[i] = "text!../tmp/widgets/tmp_widget_header.html";
var thisString = temps[i].regexp(/.*tmp_$.*\.*/) ) 
```

但这不起作用。

有人可以告诉我我在这里做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:40:56.490

这打印`widget_header`：

```
var s = "text!../tmp/widgets/tmp_widget_header.html";
var matches = s.match(/tmp_(.*?)\.html/);
console.log(matches[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:23:20.997

在您的代码中：

```
var temps[i] = "text!../tmp/widgets/tmp_widget_header.html";
var thisString = temps[i].regexp(/.*tmp_$.*\.*/) ) 
```

你是说：

“匹配以任意数量的任意字符开头的任何字符串，后跟“tmp_”，然后是输入的结尾，后跟任意数量的句点。”

```
.*   : Any number of any character (except newline)
tmp_ : Literally "tmp_" 
$    : End of input/newline - this will never be true in this position
\.   : " . ", a period
\.*  : Any number of periods 
```

另外，当使用 regex() 函数时，您需要传递一个字符串，使用字符串表示法，例如`var re = new RegExp("ab+c")`或`var re = new RegExp('ab+c')`不使用斜线的正则表达式表示法。您还有一个额外的或缺少的括号，并且实际上没有捕获任何字符。

你想做的是：

"查找一个以输入开头，后跟一个或多个任意字符，后跟“tmp_”的字符串；后跟单个句点，后跟一个或多个任意字符，然后是输入结尾；t包含一个或多个任意字符。捕获该字符串。”

所以：

```
var string = "text!../tmp/widgets/tmp_widget_header.html";
var re = /^.+tmp_(.+)\..+$/; //I use the simpler slash notation

var out = re.exec(string);   //execute the regex

console.log(out[1]);         //Note that out is an array, the first (here only) catpture sting is at index 1 
```

这个正则表达式`/^.+tmp_(.+)\..+$/`意味着：

```
^    : Match beginning of input/line
.+   : One or more of any character (except newline), "+" is one or more
tmp_ : Constant "tmp_"
\.   : A single period
.+   : As above
$    : End of input/line 
```

您也可以使用它，`RegEx('^.+tmp_(.+)\..+$');`因为当我们使用时`RegEx();`我们没有斜线标记，而是使用引号（单引号或双引号都可以），将其作为字符串传递。

现在这也将匹配`var string = "Q%$#^%$^%$^%$^43etmp_ebeb.45t4t#$^g"`and `out == 'ebeb'`。因此，根据具体用途，您可能希望将用于表示**任何**字符（换行符除外）的任何“.”替换为带括号的“[]”字符列表，因为这可能会过滤掉不需要的结果。你的里程可能会有所不同。

欲了解更多信息，请访问：[https ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T14:39:15.187

```
var s = "text!../tmp/widgets/tmp_widget_header.html",
    re = /\/tmp_([^.]+)\./;

var match = re.exec(s);

if (match)
    alert(match[1]); 
```

这将匹配：

*   一个`/`字符
*   那些角色`tmp_`
*   一个或多个不是该角色的任何`.`角色。这些被捕获。
*   一个`.`字符

如果找到匹配项，它将位于`1`结果数组的索引处。

# java - BlowFish 解密 - nCFB 模式

> ID：12861325
> 
> 赞同：1
> 
> 时间：2012-10-12T14:34:31.683
> 
> 标签：java, cryptography, encryption, blowfish

我有一些关于 BlowFish 加密的问题。我正在开发一个部署在 weblogic 下的 Java portlet。我从互联网 USB 设备收到一个使用 BlowFish - nCFB 模式加密的字符串，我需要从中获取原始字符串。我实现了河豚解密，但我不知道如何使用 nCFB 模式解密。互联网上的文档很少，但我能够在以下位置找到一个工具： [http ://www.tools4noobs.com/online_tools/decrypt/](http://www.tools4noobs.com/online_tools/decrypt/)

给出我的输入字符串和密码，它会检索结果。但是在java上我做不到

```
Cipher cipher = Cipher.getInstance("Blowfish/NCFB/NoPadding"); 
```

因为 NCFB 无法识别。我做了我的实施

```
Cipher cipher = Cipher.getInstance("Blowfish/CFB/NoPadding"); 
```

但它只解码前 3 个字符。如何使用 NCFB 模式而不是 CFB 解密？

[我可以在http://mcrypt.hellug.gr/lib/mcrypt.3.html](http://mcrypt.hellug.gr/lib/mcrypt.3.html)找到一些关于 nCFB 的信息，但它属于 mcrypt php 库。

有没有能够做到这一点的java API？或者我怎样才能让 CFB 模式像 NCFB 一样工作？

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:42:39.823

CFB（密码反馈）模式在解密时反馈部分或全部密文。nCFB 中的“n”告诉您要反馈多少。默认是整个块。您需要阅读文档以了解用于加密的 n 值，以及如何将该参数添加到您的解密算法中。鉴于前三个字符正确解密，可能 n 是 24 位，但我不确定。

通常 CTR 模式比 CFB 的麻烦少。

# java - Java中的按键监听器

> ID：12861329
> 
> 赞同：0
> 
> 时间：2012-10-12T14:34:49.410
> 
> 标签：java, swing, keylistener

大家好，我是 Java 新手，所以我认为这个问题的答案很简单，但我不知道我做错了什么。我在我的 pacman 游戏中添加了一个 keyListener，但不知何故它不起作用。 .我使用了以下代码：

```
package h04PacMan;

import java.awt.event.*;

import javax.swing.*;

public class PacManBediening extends JPanel implements ActionListener, KeyListener {

private JButton links, rechts, boven, beneden;
PacMan pacman;

public PacManBediening(PacMan pacman) {

    this.pacman = pacman;

    links = new JButton("<");
    links.addActionListener(this);
    add(links);

    rechts = new JButton(">");
    rechts.addActionListener(this);
    add(rechts);

    boven = new JButton("^");
    boven.addActionListener(this);
    add(boven);

    beneden = new JButton("v");
    beneden.addActionListener(this);
    add(beneden);

}

/*
 * bediening bij een klik
 */

@Override
public void actionPerformed(ActionEvent e) {

    if(e.getSource() == links) {

        pacman.setRichtingEnSnelheid( -10 );
        pacman.setBesturing(0);
        pacman.setView(180);
        //System.out.println("links");
    }
    else if(e.getSource() == rechts) {
        pacman.setRichtingEnSnelheid( +10 );
        pacman.setBesturing(0);
        pacman.setView(0);
        //System.out.println("rechts");
    }
    else if(e.getSource() == boven) {
        pacman.setRichtingEnSnelheid( -10);
        pacman.setBesturing(1);
        pacman.setView(90);
        //System.out.println("boven");
    }
    else {
        pacman.setRichtingEnSnelheid( +10);
        pacman.setBesturing(1);
        pacman.setView(270);
        //System.out.println("beneden");
    }

}

@Override
public void keyPressed(KeyEvent e) {

    int key = e.getKeyCode();

    if(key == KeyEvent.VK_LEFT) {
        pacman.setRichtingEnSnelheid( -10 );
        pacman.setBesturing(0);
        pacman.setView(180);
        System.out.println("links");
    }
    else if(key == KeyEvent.VK_RIGHT) {
        pacman.setRichtingEnSnelheid( +10 );
        pacman.setBesturing(0);
        pacman.setView(0);
        System.out.println("rechts");
    }
    else if(key == KeyEvent.VK_UP) {
        pacman.setRichtingEnSnelheid( -10);
        pacman.setBesturing(1);
        pacman.setView(90);
        System.out.println("boven");
    }
    else if(key == KeyEvent.VK_DOWN) {
        pacman.setRichtingEnSnelheid( +10);
        pacman.setBesturing(1);
        pacman.setView(270);
        System.out.println("beneden");
    }

}

@Override
public void keyReleased(KeyEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void keyTyped(KeyEvent arg0) {
    // TODO Auto-generated method stub

}

} 
```

有人可以告诉我要添加什么或做些不同的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:45:09.913

您的`PacManBediening`构造函数中缺少几行。

```
this.pacman = pacman;
this.setFocusable(true);
this.addKeyListener(this); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:24:49.273

*   `KeyListener`不是指定的`Swing JComponents`，我不会这样，

*   我认为失去`Focus`焦点是简单且可能的`JComponents`

*   用作`KeyBindings`最可扩展的解决方法，而`"catching or hunting for Focus"`不是`KeyListener`

*   for`Swing JComponents`是所有内部快捷方式、快捷键、内置方法、通知程序，基于`KeyBindings`

*   [代码示例](https://stackoverflow.com/a/7940227/714968)

# java - 单元测试阻塞进程

> ID：12861330
> 
> 赞同：1
> 
> 时间：2012-10-12T14:34:52.820
> 
> 标签：java, multithreading, unit-testing

我有一个工作进程在数据队列上工作。A`training worker`从`training queue`. 它继续轮询并寻找写入队列的新数据。

我已经按如下方式实施了工人：

```
public static void main(String[] args) {
  startTraining()
}

public static boolean startTraining() {
  trainingWorker = new WorkerImpl(config);
  final Thread workerThread = new Thread(trainingWorker);

  WorkerListener listener = new WorkerListener() {
    public void onEvent(WorkerEvent event, Worker worker, String queue, Job job, 
                        Object runner, Object result, Exception ex) {
      if(event.equals(WorkerEvnet.JOB_SUCCESS) {
        //get data
        //process data
        //send data
      }
    }
  }

  trainingWorker.addListener(listener, WorkerEvent.JOB_SUCCESS, WorkerEvent.JOB_FAILURE,
                     WorkerEvent.WORKER_ERROR, WorkerEvent.WORKER_POLL);
  workerThread.start();
  workerThread.join();
} 
```

我希望进行单元测试以查看工作人员是否正确读取数据、正确处理并成功发送数据。问题是因为`Thread.join()`；对主函数的调用永远不会返回（因为假设工作人员连续运行）。在这种情况下，我不应该为它编写单元测试吗？如果是，我该如何编写其他形式的测试来确保工人按要求工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:44:00.000

您可能希望从代码中删除连接，或者从您的测试用例中启动新线程，这将为您启动工作程序。

显然，您将需要终止工作人员的方法，对于版本，它可能看起来像

```
public void stopWorker() {
 workerThread.interrupt()
} 
```

所以你需要将你的**workerThread**本地值转换为一个字段，并使其成为**volatile**。

# javascript - 有人可以解释一下函数（$）在 jQuery 中的作用吗

> ID：12861331
> 
> 赞同：8
> 
> 时间：2012-10-12T14:34:53.080
> 
> 标签：javascript, jquery, closures

最近我正在阅读别人的代码，并遇到了这个：

```
// Semicolon (;) to ensure closing of earlier scripting
// Encapsulation
// $ is assigned to jQuery
;(function($) {

     // DOM Ready
    $(function() {
        ...
  });

})(jQuery); 
```

我理解前导的意思；，并且我理解 $(function() { 与 document ready 相同，但是添加 function($) 有什么意义？

我知道这是一个闭包，但是由于它总是在全局范围内被调用，所以您似乎不需要理会它。$(function() { 将使用相同的全局对象，不是吗？

是为了防范某些事情，还是出于其他原因的最佳实践？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T14:36:00.150

这是 jQuery 插件的常见结构。它可以防止`$`标识符被覆盖并用于其他用途。在匿名函数里面，`$`总是会提到jQuery。

例子：

```
$ = "oh no";
$(function() { //Big problem!
    //DOM ready
}); 
```

通过引入一个新的范围，您可以确保它`$`指的是您所期望的：

```
$ = "oh no";
(function($) { //New scope, $ is redeclared and jQuery is assigned to it

    $(function() { //No problem!
        //DOM ready
    }); 

}(jQuery)); 
```

这背后的主要原因是许多其他 JavaScript 库都`$`用作标识符（例如 PrototypeJS）。如果你想同时使用 Prototype 和 jQuery，你需要让 Prototype 有它的`$`标识符，但你可能不想在`jQuery`每次调用 jQuery 方法时都写出来。通过引入一个新的作用域，你可以让 jQuery`$`回到那个执行上下文中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:47:28.120

您提供的代码示例是自调用函数的示例：

```
(function(){
 // some code…
})(); 
```

第一组括号定义了一个函数：（括号中的匿名函数）

```
(function() {}) 
```

这定义了匿名函数。就其本身而言，它什么也不做。但是如果`()`在定义后面加上一组括号，就和调用函数的括号是一样的了。试试这个：

```
(function(message) {
  alert(message);
})("Hello World"); 
```

这将创建一个接受参数的函数，并显示一个包含所提供值的警报框。然后，它立即使用“Hello World”参数调用该函数。

* * *

在您的示例中，定义了一个自调用函数。它接受一个名为 的参数`$`。然后，立即调用该函数，并将引用`jQuery`作为参数传入。

如果您希望 jQuery 在`noConflict()`模式下运行（这会删除对 的全局引用`$`），这很常见。

在`noConflict()`mode 下，你仍然可以通过`jQuery`全局变量访问 jQuery，但大多数人更愿意使用`$`，所以这个自调用函数接受全局`jQuery`变量作为`$`在函数范围内命名的参数，这让你可以自由使用`$`内部的快捷方式让 jQuery 在 noConflict() 模式下运行时的自调用函数，以避免与`$`在全局范围内使用的其他库发生冲突。

希望这能回答你的问题！

# javascript - 有没有同步gif文件的方法？

> ID：12861343
> 
> 赞同：8
> 
> 时间：2012-10-12T14:35:48.590
> 
> 标签：javascript, jquery, html, gif

我有一个页面，上面有 7 个 gif 文件。

有没有办法同步它们，让它们同时开始播放？

我正在考虑预加载它们，但如果一个加载时间比另一个加载时间长，它们仍然可能无法开始同步。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-12T15:41:25.237

正如@Archer 上面指出的那样，一种方法是预加载它们然后重置 src。使用 jquery，您可以执行以下操作：

```
$(window).load(function() {
    $('.preload').attr('src', function(i,a){
        $(this).attr('src','').removeClass('preload').attr('src',a);
    });
}); 
```

[在jsfiddle](http://jsfiddle.net/f3Ksz/81/)上看到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T15:26:55.507

根据内容的类型，考虑用 png 序列（精灵表）甚至 jpg 序列替换您的 gif。

创建所需动画大小的 div，将精灵表设置为隐藏溢出的背景图像。

在 javascript 中创建一个计时器，它可以在每个刻度同时更新所有动画（背景图像位置），从而可以非常精确地控制帧速率。

我以前使用过这种技术，如果你的精灵表不会过多地影响加载时间，它就会很好地工作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-12T14:49:58.613

尝试将它们全部预加载到页面头部并在正文加载时运行它们。做一个函数，`function gifs{}`也许，然后像这样运行它：`<body onload="gifs()">`.

# iphone - 在为 iOS 5.0 编译时，什么会导致“找不到符号：_objc_setProperty_atomic”错误？

> ID：12861345
> 
> 赞同：16
> 
> 时间：2012-10-12T14:35:53.073
> 
> 标签：iphone, objective-c, ios, xcode

我在 IOS 5 中遇到编译错误。我得到的错误是：

```
wait_fences: failed to receive reply: 10004003
dyld: lazy symbol binding failed: Symbol not found: _objc_setProperty_atomic
Referenced from: /var/mobile/Applications/952C640B-8310-4028-AAE5-FD308D02B005/MorethanMusic.app/MorethanMusic
Expected in: /usr/lib/libobjc.A.dylib

dyld: Symbol not found: _objc_setProperty_atomic
Referenced from: /var/mobile/Applications/952C640B-8310-4028-AAE5-FD308D02B005/MorethanMusic.app/MorethanMusic
Expected in: /usr/lib/libobjc.A.dylib 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-15T22:03:47.870

保罗的回答只完成了一半。经过一番搜索，我找到[了这个](https://groups.google.com/forum/?fromgroups=#!topic/gdata-objectivec-client/L0VC3Db2ZOc)帖子，它建议您将所有子项目的部署目标设为相同：

![主要项目](../Images/d5a157a7c25411912bcd4fb3a393daf3.png)

![子项目](../Images/3ad0a5de64859d650ef0d609e1694105.png)

它们是什么并不重要（至少对于这个问题），只要它们是相同的。这为我解决了这个精确的错误。

在构建之前不要忘记清理 GData 项目的 DerivedData 文件夹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T14:58:05.073

在构建设置中将部署目标设置为 iOS5。

![在此处输入图像描述](../Images/4a8d2671192bde445db180e4477cb305.png)

# c++ - 如何从进程中分离exe

> ID：12861350
> 
> 赞同：-1
> 
> 时间：2012-10-12T14:35:58.317
> 
> 标签：c++, c, windows, winapi

如何使用 WinAPI (C/C++) 将可执行文件从其进程中分离出来？

我找到了一个从进程中释放文件的应用程序 Unlocker，但我不知道它是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:05:29.537

你不会，通常情况下。按需执行可执行文件中的 Windows 页面。当您调用尚未在 RAM 中的函数时，Windows 会加载它（以及它所在的整个页面）。

结果，如果您分离 EXE 并且该进程将调用仍在磁盘上的函数，则该进程将崩溃。

对于可移动媒体上的应用程序，有一个特殊的`/SWAPRUN:CD`链接器标志。它通过制作整个可执行文件的副本来防止崩溃。

# html - 在烟花中创建背景图像

> ID：12861352
> 
> 赞同：1
> 
> 时间：2012-10-12T14:36:02.013
> 
> 标签：html, css, image, fireworks

基本上我想在我正在制作的网站中为我的背景制作一个两色调的图像。顶部说 120px 将是灰色阴影，底部将是白色！现在通常我会用上半部分灰色和下半部分白色制作一条 1px 的线，这很明显，但我需要这个特定站点能够连续向下滚动页面，保持背景为白色而不重复整个模式，如果你懂我？？

任何想法或建议都会很棒！在这里难住了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:45:02.123

您可以创建一个 120 像素高和 1 像素宽的灰色图片并使用`background-repeat: repeat-x;`我猜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:50:18.493

我会这样做

```
background: #ffffff url(images/sample-pattern.jpg) repeat-x 
```

这样，您的图像将沿顶部重复，但页面的其余部分将具有白色背景。

# r - 计算 R 值的每日变化

> ID：12861354
> 
> 赞同：0
> 
> 时间：2012-10-12T12:47:12.867
> 
> 标签：r

我有一个具有以下值的矩阵：`a <- c(4,6,7,78,3,2,5,6,7,8)`

我想创建第二个矩阵`b`，列出`a`每一步中 's 值的变化。

所以解决方案是：`b <- c(2,1,71,-75,-1,3,1,1,1)`

R中是否有此功能，如果没有最简单的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T12:54:50.157

```
a <- c(4,6,7,78,3,2,5,6,7,8) #this is not a matrix in R btw
diff(a)
#[1]   2   1  71 -75  -1   3   1   1   1 
```

# php - 在 PHP 中使用正则表达式进行 iOS 检测

> ID：12861356
> 
> 赞同：3
> 
> 时间：2012-10-12T14:36:11.977
> 
> 标签：php, regex

我来到这里寻找通过用户代理嗅探 iOS 6 的答案，并在这里找到了一个很好的答案：[如何通过用户代理检测 iOS 6 和所有次要版本？](https://stackoverflow.com/questions/12567260/how-to-detect-ios-6-and-all-minor-versions-by-user-agent/12580745#12580745)

我以前使用过的所有正则表达式都非常简单，我正在努力让这个正则表达式正常工作。不幸的是，PHP 解析器没有给我任何错误！

我知道我做错了什么，因为在我的笔记本电脑上运行 Firefox 时，我得到了下面的代码匹配。

如果有人能在这里指出正确的方向，我将不胜感激，我无法弄清楚我做错了什么。

```
$subject = $_SERVER['HTTP_USER_AGENT'];
$pattern = '~^(?:(?:(?:Mozilla/\d.\d\s*()+|Mobile\s*Safari\s*\d+.\d+(.\d+)?\s*)(?:iPhone(?:\s+Simulator)?|iPad|iPod);\s*(?:U;\s*)?(?:[a-z]+(?:-[a-z]+)?;\s*)?CPU\s* (?:iPhone\s*)?(?:OS\s*\d+\d+(?:\d+)?\s*)?(?:like|comme)\s*Mac\s*O?S?\s*X(?:;\s*[a-z]+(?:-[a-z]+)?)?)\s*)?(?:AppleWebKit/\d+(?:.\d+(?:.\d+)?|\s*+)?\s*)?(?:(KHTML,\s*(?:like|comme)\s*Gecko\s*)\s*)?(?:Version/\d+.\d+(?:.\d+)?\s*)?(?:Mobile/\w+\s*)?(?:Safari/\d+.\d+(.\d+)?)?.*$~';

if (preg_match($pattern,$subject))
{
    echo "match";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:43:06.590

试试这个：

```
^(?:(?:(?:Mozilla/\d\.\d\s*\()+|Mobile\s*Safari\s*\d+\.\d+(\.\d+)?\s*)(?:iPhone(?:\s+Simulator)?|iPad|iPod);\s*(?:U;\s*)?(?:[a-z]+(?:-[a-z]+)?;\s*)?CPU\s*(?:iPhone\s*)?(?:OS\s*\d+_\d+(?:_\d+)?\s*)?(?:like|comme)\s*Mac\s*O?S?\s*X(?:;\s*[a-z]+(?:-[a-z]+)?)?\)\s*)?(?:AppleWebKit/\d+(?:\.\d+(?:\.\d+)?|\s*\+)?\s*)?(?:\(KHTML,\s*(?:like|comme)\s*Gecko\s*\)\s*)?(?:Version/\d+\.\d+(?:\.\d+)?\s*)?(?:Mobile/\w+\s*)?(?:Safari/\d+\.\d+(\.\d+)?.*)?$ 
```

演示：[http ://gskinner.com/RegExr/?32eou](http://gskinner.com/RegExr/?32eou)

一个更通用的解决方案：[http ://code.google.com/p/php-mobile-detect/](http://code.google.com/p/php-mobile-detect/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T20:11:39.060

正则表达式有一些错误。由于 SO 字符转义系统，一些 metachars 已经消失。

以下是更新后的问题的 PHP 代码：

```
$subject = $_SERVER['HTTP_USER_AGENT'];
$pattern = '~^(?:(?:(?:Mozilla/\d\.\d\s*\()+|Mobile\s*Safari\s*\d+\.\d+(\.\d+)?\s*)(?:iPhone(?:\s+Simulator)?|iPad|iPod);\s*(?:U;\s*)?(?:[a-z]+(?:-[a-z]+)?;\s*)?CPU\s*(?:iPhone\s*)?(?:OS\s*\d+_\d+(?:_\d+)?\s*)?(?:like|comme)\s*Mac\s*O?S?\s*X(?:;\s*[a-z]+(?:-[a-z]+)?)?\)\s*)?(?:AppleWebKit/\d+(?:\.\d+(?:\.\d+)?|\s*\+)?\s*)?(?:\(KHTML,\s*(?:like|comme)\s*Gecko\s*\)\s*)?(?:Version/\d+\.\d+(?:\.\d+)?\s*)?(?:Mobile/\w+\s*)?(?:Safari/\d+\.\d+(?:\.\d+)?.*)?$~';

if (preg_match($pattern,$subject))
{
    echo "match";
} 
```

# nuget - 为什么 Nuget 添加引用而不更改 *.csproj 文件？

> ID：12861363
> 
> 赞同：2
> 
> 时间：2012-10-12T14:36:49.260
> 
> 标签：nuget, nuget-package

我正在使用 Nuget 添加一些库。我发现在添加新库后 *.csproj 并没有改变，但引用实际上改变了。

任何人都知道 Nuget 如何管理引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:50:33.793

只是仔细检查了一下。引用在 *.config 文件中维护。看看下面的图片。

![参考图像](../Images/5ac413e6eb1fd35f3de900afa2158b16.png)

在`packages.config`文件中，您将看到如下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="EntityFramework" version="5.0.0" targetFramework="net40-Client" />
</packages> 
```

在`App.config`文件中，您将看到如下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=some-token" requirePermission="false" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

**注意：**此示例中的值只是一个示例值。您的解决方案可能会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:50:11.510

虽然 NuGet 包引用确实存储在 packages.config 中，但 NuGet 确实会更新项目文件以添加程序集引用。项目文件和程序集引用始终在项目文件中进行管理。

在您的情况下，您可能已经引用了与 NuGet 包相同的程序集（因此它不会被修改），或者您可能在保存之前检查了磁盘上的版本。

# grails - 在 Grails 中，如何公开 GroovyWS？

> ID：12861373
> 
> 赞同：0
> 
> 时间：2012-10-12T14:37:04.727
> 
> 标签：grails, groovyws

在 grails 中，您会在哪里使用 GroovyWS 插件放置公开的 Web 服务？另外，您会将[在线示例](http://groovy.codehaus.org/Publishing+a+web-service)中的方法放在哪里？我觉得新 a`WSServer`是错误的方法，因为我们正在开发 Spring-MVC 框架。

```
def server = new WSServer() 
server.setNode("MathService", "http://localhost:6980/MathService") 
server.start() 
```

我应该改用 Apache CXF 插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:28:28.000

您可以尝试使用 jaxRS 插件，或者只是通过 url 映射明确地公开您对控制器的操作。在操作中，您可以调用服务方法。您可以使用 CXF，但因为它使用 SOAP，所以会有点过头了。

# c# - MVC 4 Ajax.Action 链接不起作用

> ID：12861375
> 
> 赞同：5
> 
> 时间：2012-10-12T14:37:14.870
> 
> 标签：c#, razor, asp.net-ajax, asp.net-mvc-4, html.actionlink

我正在尝试使用 Ajax 调用创建一个 MVC 网站。我直接使用 jquery 没有问题，但是当我使用 @Ajax.ActionLink 时，我没有得到我想要的结果。这是我的看法：

```
 <script type="text/javascript">
        function deleteComment(id) {
            $.post(
                "/Role/AjaxTest",
                //{ id: id }, 

                function (data) {
                    $("#testtarget").html(data);               
                });
         }
    </script>

    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
    <h2>TITLE</h2>
    <p>
 @Ajax.ActionLink("Ajax Test", "AjaxTest", "Role", new AjaxOptions{UpdateTargetId="testtarget",HttpMethod = "Get" , InsertionMode = InsertionMode.Replace }) 
    </p>
    <table>    
    @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.RoleName)
            </td>
            <td>
              <a onclick="deleteComment('@item.RoleId'); return false;" href="#">Delete</a>
                @Html.ActionLink("Delete", "Delete", new { id=item.RoleId })

            </td>
        </tr>
    }
    </table>
    <div id="testtarget">Test Div</div> 
```

这是我的控制器数据：

```
public string AjaxTest()
{
    return "Some random text";
} 
```

我对 Jquery 的调用完美运行，文本出现在 div 中，但我的操作链接只是将我重定向到：localhost/Role/AjaxTest，所以我只有在银行浏览器中显示消息。

知道这里有什么问题吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T14:39:43.480

确保您已将`jquery.unobtrusive-ajax.js`脚本添加到您的页面：

```
<script type="text/javascript" src="~/scripts/jquery.unobtrusive-ajax.js"></script> 
```

或者如果您正在使用捆绑包（这是推荐的方法），请确保您已包含包含此脚本的捆绑包。例如，当您使用`~/bundles/jqueryval`捆绑的 Internet 模板创建新的 ASP.NET MVC 4 项目时：

```
bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
    "~/Scripts/jquery.unobtrusive*",
    "~/Scripts/jquery.validate*")
); 
```

因此，请确保它在 jquery 包之后包含在您的视图中：

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryval") 
```

或者只是将它们组合成一个捆绑包。这完全取决于您的要求以及您是否需要不显眼的 jquery 验证支持。

我还建议您让控制器操作返回 ActionResult 而不是字符串：

```
public ActionResult AjaxTest()
{
    return Content("Some random text");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T22:20:41.970

尝试在浏览器中使用 F12 并检查控制台中是否出现任何脚本错误。Fiddler 还将帮助确定您的任何库是否未正确引用或加载。

# java - java多线程和静态方法

> ID：12861378
> 
> 赞同：1
> 
> 时间：2012-10-12T14:37:22.273
> 
> 标签：java

我有一个java应用程序。我正在使用日志格式化程序对象。所有日志消息都应该有这个对象。例如

```
log.debug(new LogFormatter(x,y,z)) 
```

但是我必须创建新的 LogFormatter 对象，以及我想要记录的所有内容。例如，如果我使用静态方法

```
log.debug(LogFormatter.format(x,y,z)) 
```

比我不必创建新对象。但是在多线程应用程序中它是否可以正常工作。

如果两个线程使用 diff 值调用，那么日志记录会变得混乱。

或者线程本地是最好的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:39:33.320

这将取决于记录器的实现。如果您将使用本机 Java 类，那么您应该使用`synchronize`方法的关键字或处理日志插入的代码部分来处理锁。

IMO 我建议使用像 Log4J 这样的线程安全的日志库：

*   [log4j 线程安全吗？](http://logging.apache.org/log4j/1.2/faq.html#a1.7)

请注意，一些 Java 应用服务器（如 JBoss 和 GlassFish）使用 Log4j 来处理日志记录工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:40:22.190

我会用

```
private final LogFormatter logFormatter; // immutable object.

log.debug(logFormatter.format(x,y,z)) 
```

由于格式化程序是不可变的，因此可以共享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:41:21.473

这取决于两件事：

1.  该`LogFormatter.format(x,y,z)`方法是否是线程安全的。
2.  您的记录器实现是否是线程安全的。

如果这两个条件为真，那么您可以在多线程环境中使用您的方案并且不会出现错误。

具体来说，您的记录器实现应该是线程安全的，因为它同步对底层输出机制的访问：例如，通过确保一次只打印一条日志记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T14:51:18.410

为了避免仅在打开日志记录时线程之间的同步，我习惯于为每个线程关联一个日志链。困难在于加入几个文件以离线了解正在发生的事情。每行日志都有一个日期和一个线程 ID。

# excel - 在电子表格 B 中从电子表格 A 中查找值并将值从 A 移动到 B

> ID：12861384
> 
> 赞同：1
> 
> 时间：2012-10-12T14:37:35.157
> 
> 标签：excel, vba

我想做一个从文件 A 到文件 B 的 VLOOKUP，当找到匹配项时，将值移动到文件 B。据我了解，VLOOKUP 仅在找到匹配项时返回从 B 到 A 的值。我正在循环通过 excel 文件 A 并在 excel 文件 B 中执行 VLOOKUP。这工作正常，但是当匹配时我想留在文件 B 中并将值从 A 写入 B。如果没有匹配，我想从文件中插入行A 到文件 B. 是否有 VLOOKUP 的替代品，或者有什么方法可以使用 VLOOKUP 完成此任务？

谢谢

试图对胡说八道的评论发表评论，但似乎没有接受。如果是这样，我想道歉，因为我多次点击添加评论按钮。

这是我的跟进。

它必须是一个可重复的过程。让我再试着解释一下。我在 A 列中有可能匹配的 excel 文件 1 和 2。所以我计划循环通过文件 1 以尝试根据 A 列在文件 2 中找到匹配项。我过去曾使用 VLOOKUP 完成此操作。这里的不同之处在于，当我找到匹配项时，我想将列 B、C、D 等中的数据从文件 1 移动到文件 2 中的一些相应列。我称之为将数据从文件 1 推送到文件 2。在如果不匹配，我想将文件 1 的当前行中的数据写入文件 2 的末尾。文件 1 是主文件，用于驱动文件 2 中的查找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:18:04.753

对传输数据的 vlookup 执行相反的操作：如果您需要文件 2 中的数据，请将 vlookup 放入文件 2 并使用它来拉取数据。您可以在文件 2 的 B 到 D 列中使用公式，`=iferror(vlookup($A2,[file1]sheet1!$A:$D,column(),0),"")`然后粘贴值。

对于单元格的传输，您可以在 file1 上运行 vlookup，对 #N/A 值（未找到）进行自动过滤并在 file2 的末尾复制。

如果您记录执行这些步骤的宏并将其发布，我应该可以将其清理干净。

# chef-infra - 厨师在用户的主目录中创建文件

> ID：12861385
> 
> 赞同：12
> 
> 时间：2012-10-12T14:37:36.170
> 
> 标签：chef-infra, vagrant

我正在使用厨师创建文件资源

```
 file "somefile" do
     action :create_if_missing
  end 
```

我想把它放在用户的主目录中。我有两个问题：

1.  该文件是相对于 / 解释的，因此使用 ~/ 最终将文件放入 /~/
2.  我正在通过 vagrant 启动这个厨师食谱，这些文件是由 root 创建的。因此，即使我可以让 ~/ 工作，它最终也会在 root 的家中。我不想硬编码以使用用户名 vagrant，因为它并不总是这样（我们也可以使用厨师客户端运行这些），并且`node[:user]`似乎是空的。

有没有办法在非 root 用户（在本例中为 vagrant）主目录中创建文件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-01-15T13:21:39.737

线程很旧，但我刚才遇到了这个问题。

您可以为用户创建属性，例如：`default['mycookbook']['user']`

然后在你的食谱中：

```
user = node['mycookbook']['user'] # user set in cookbook attrubute
# user = node['current_user'] # user running chef cookbook (on provisioned host)

home = node['etc']['passwd'][user]['dir'] # Chef DSL
# home = Dir.home(user) # It's Ruby

file "#{home}/somefile" do
  action :create_if_missing
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:32:21.583

这是因为 Chef 食谱是由`root`用户运行的。这个解决方法怎么样

```
if File.exists? "/vagrant"
  user = "vagrant"
else
  user = "deployer"
end

file "/home/#{user}/foo" do
  ..
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T09:56:27.633

据我了解厨师的概念 - 每个食谱都应该是独立的。这意味着您应该只能将一个配方（其中任何一个）添加到 run_list 中，并且它应该成功安装在一台空机器上。

在您的情况下，您认为您的非 root 用户已经存在于机器上，这与我之前的陈述相矛盾。您的配方应该包含另一个配方，用于配置您的非 root 用户。如果您使用 data_bag 来存储用户（并且配方 'user::my_user' 应该配置您的用户），您的配方应该看起来像这样。

```
include_recipe 'user::my_user'
my_user = data_bag_item('user', 'my_user')

file ::File.join( my_user['home'], 'somefile' ) do
  action :create_if_missing
end 
```

# javascript - 悬停后检查新的悬停目标（Javascript/JQuery）？

> ID：12861388
> 
> 赞同：0
> 
> 时间：2012-10-12T14:37:53.223
> 
> 标签：javascript, jquery, hover

在悬停在另一个对象之外之后，检查用户是否悬停在一个对象上的最简洁的方法是什么。即，如果用户将鼠标从对象 A 移到对象 B 上，您会建议我如何进行监控？我真的不喜欢在鼠标移动时持续监控鼠标位置的想法，尽管它可能是唯一的选择......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:48:08.247

看看这个小提琴

[http://jsfiddle.net/aVz7Q/4/](http://jsfiddle.net/aVz7Q/4/)

jQuery 中一个简单的悬停事件就可以实现这一点，借助一些变量工作，您可以存储前一个元素和当前元素是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:24:07.847

事件冒泡。为 A & B 的父元素添加事件侦听器。在该侦听器中，您可以在 mouseout 上将事件的原始目标记录为 mousedout 的最新对象（使用类似 $(this).data("latestMouseout",latestTarget ），[获得原始目标的最佳方式](https://stackoverflow.com/questions/485453/best-way-to-get-the-original-target)）。在 mousein 上，您可以检查您的条件，看看最新的 mouseout 目标和 mousein 目标是否满足您需要的条件。

我知道这有点含糊，但你的问题也是如此。如果这有很大帮助。如果没有，请随时提出澄清问题。

# java - Resteasy手动编组/解组DTO

> ID：12861391
> 
> 赞同：2
> 
> 时间：2012-10-12T14:38:05.823
> 
> 标签：java, json, marshalling, resteasy, unmarshalling

我在 jboss6 上使用 resteasy 2.2.3.GA 并且我的资源工作正常，序列化到 JSON 或从 JSON 序列化。

编组/解编组通过资源方法参数的反射魔术发生，并且以某种方式涉及 MessageBodyReader 和 MessageBodyWriter 提供程序。

我想手动转换 Json 字符串以在我们的调试框架中使用。

```
public MyDTObject a(String json);
public String b(MyDTObject qwop); 
```

有人对如何暴露底层提供者有任何建议吗？

# ms-access - 使用vb从ms访问数据库中读取日期时间列

> ID：12861392
> 
> 赞同：0
> 
> 时间：2012-10-12T14:38:11.910
> 
> 标签：ms-access, asp-classic, vbscript, vba

我想从 ms 访问数据库中读取日期时间。

该列的数据类型为 DATETIME，值为：1/27/12 5:10 PM

```
<html>
<body>
<%

Dim Conn
Dim Rs
Dim sql

Dim sConnection

Dim Today as Date //this gives error - unexpected end of file , i want to display current date and time ??? 

Set Conn = Server.CreateObject("ADODB.Connection")
Set Rs = Server.CreateObject("ADODB.Recordset")

 filepath= Server.MapPath ("mydb.mdb") 
sConnection = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source="  & filepath

Conn.Open(sConnection)

sql="select * from items;"

Set Rs = Conn.Execute(sql)

if Rs.EOF then

    Response.write("No records found")
else 

    do until rs.eof

            ctime =     rs("itemadditiondatetime")

            Response.write("<br/>Time : <input name='dateandtime[]' value=" & ctime & "/>" & ctime )

            rs.movenext

    loop

end if

Rs.Close
Conn.Close

Set Rs = Nothing
Set Conn = Nothing

%>
</body>
</html> 
```

在所有文本框中，仅显示日期（ 1/27/12 ），不显示时间，但是当我在没有文本框的情况下显示时，将显示整个日期时间。另外我如何在两个文本框中分别获取日期和时间。

另外，我需要将日期格式化为 yyyy-mm-dd。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:45:42.060

如果这是经典的 ASP/VBScript：

```
'Dim Today as Date 
Dim Today ' without declaring data type 
```

您可以使用[FormatDateTime](http://www.w3schools.com/vbscript/func_formatdatetime.asp)函数从您的`ctime`值中获取日期和/或时间组件。

```
FormatDateTime(ctime, 3) ' long time
FormatDateTime(ctime, 2) ' short date 
```

`FormatDateTime`如果您喜欢与我建议的格式不同的格式，请参阅链接页面以获取其他选项。

我忽略了“*需要将日期格式化为 yyyy-mm-dd* ”。不幸的是，`VBScript doesn't provide VBA's Format(ctime, "yyyy-mm-dd")`功能。因此，我认为您可能必须从中提取年、月和日片段`ctime`，然后将它们按您想要的顺序重新组合。

```
Year(ctime) & "-" & Right("0" & Month(ctime), 2) & _
    "-" & Right("0" & Day(ctime), 2) 
```

我意识到您可以通过要求 db 引擎为您提供您希望格式化的日期和时间片段来简化您的 ASP 代码。虽然 VBScript 不能使用该`Format()`功能，但 db 引擎可以。

```
SELECT
    Format(itemadditiondatetime, "hh:nn:ss") AS time_string,
    Format(itemadditiondatetime, "yyyy-mm-dd") AS date_string
FROM items; 
```

# javascript - 元素不再从父级继承数据主题

> ID：12861398
> 
> 赞同：1
> 
> 时间：2012-10-12T14:38:29.503
> 
> 标签：javascript, jquery, jquery-mobile, data-theme

根据[jQuery Mobile Docs](http://jquerymobile.com/demos/1.2.0/docs/forms/forms-themes.html) ，容器内的任何表单元素都将采用该`data-theme`容器的

> Query Mobile 拥有丰富的主题系统，可让您完全控制页面和表单的样式。默认情况下，容器内的所有表单元素将自动采用与其父级相同的主题色板。这允许表单元素以最少的工作融入其布局。data-theme 属性可以应用于任何单独的表单元素，以应用任何字母主题色板来在您的设计中创建对比和强调。

然而，随着 jQuery Mobile (1.2) 的最新版本，这似乎不再正确，我注意到表单元素现在继承自`data-theme`of`page`而不是它们更直接的父级。

例如给出以下标记

```
<div data-role="page">
<div data-role="header"><h3>Header</h3></div>
<div data-role="content" data-theme="a">
      <ul data-role="listview" data-inset="true" data-theme="c">
        <li>
            <input type="button" value="test" />
        </li>
        <li>
            <select >
                <option value="1">Option 1</option>
                <option value="2">Option 2</option>
            </select>
        </li>
         <li>
           <div data-role="fieldcontain"  data-theme="c" >
         <fieldset data-role="controlgroup"  data-theme="c"  data-type="horizontal" >
            <legend>Group Size</legend>

            <input type="radio" name="testRdoGrp" id="testRdoGrp1" checked="checked" value="1" />
            <label for="testRdoGrp1">1</label>       
            <input type="radio" name="testRdoGrp" id="testRdoGrp2" value="2" />
            <label for="testRdoGrp2">2</label>

         </fieldset>
        </div>
        </li>
    </ul>
</div>
<div data-role="footer"><h3>Footer</h3></div>
</div> 
```

杰宾斯：

[使用 JQM 1.1](http://jsbin.com/ilinup/4/edit)

[使用 JQM 1.2](http://jsbin.com/ilinup/5/edit)

使用 JQM 1.1 时，输入、选择和单选组将使用*c 主题*色板（继承自`listview`），但在使用 JQM 1.2 时，输入、选择和单选组将改为使用*a*色板。

即使对于具有 `data-role="fieldcontain" 的容器（例如我提供的示例中的无线电组），情况似乎也是如此。

直接在元素上设置`data-theme`仍然有效，但除此之外，我认为以前的行为可以使标记更清晰，在我的情况下，我有相当多的标记，我宁愿不必遍历每个元素并单独添加`data-theme`.

有谁知道恢复到 1.1 行为的某种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:06:22.383

我仍然没有在任何地方发现这种行为变化，但我找到了解决这个问题的部分解决方法。`ui-body-`使用（加上 的字母）类添加样本`swatch`会导致元素从父级继承数据主题。

例如

```
<ul data-role="listview" class="ui-body-c" data-inset="true" data-theme="c">
    <li>
        <input type="button" value="test" />
    </li>
</ul> 
```

# java - JTable 单元格颜色

> ID：12861402
> 
> 赞同：2
> 
> 时间：2012-10-12T14:38:34.340
> 
> 标签：java, swing, colors, jtable, tablecellrenderer

有人可以给我一个示例，说明如何获取 JTable 中特定单元格的背景颜色吗？我找不到如何执行此操作的示例。获取单元格中的值的大量示例，但不是单元格的背景颜色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T15:54:50.403

它应该类似于以下内容（根据所有评论修复）：

**重要：使用 table.prepareRenderer(...) 让 JTable 为您完成所有工作**

```
public Color getTableCellBackground(JTable table, int row, int col) {
    TableCellRenderer renderer = table.getCellRenderer(row, col);
    Component component = table.prepareRenderer(renderer, row, col);
    return component.getBackground();
} 
```

完整演示：

```
public class TableRenderDemo extends JPanel {

    public TableRenderDemo() {
        super(new GridLayout(1, 0));

        final JTable table = new JTable(new MyTableModel());
        table.setPreferredScrollableViewportSize(new Dimension(600, 200));
        table.setFillsViewportHeight(true);
        table.setDefaultRenderer(Object.class, new MyRenderer());

        table.addMouseListener(new MouseAdapter() {

            public void mouseClicked(MouseEvent e) {
                int row = table.getSelectedRow();
                int col = table.getSelectedColumn();

                JOptionPane.showInternalMessageDialog(TableRenderDemo.this,
                        "Color: " + getTableCellBackground(table, row, col));

                System.out.println("Color: " + getTableCellBackground(table, row, col));
            }
        });

        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
    }

    public Color getTableCellBackground(JTable table, int row, int col) {
        TableCellRenderer renderer = table.getCellRenderer(row, col);
        Component component = table.prepareRenderer(renderer, row, col);    
        return component.getBackground();
    }

    class MyRenderer implements TableCellRenderer {

        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected,
                boolean hasFocus, int row, int column) {
            JTextField editor = new JTextField();
            if (value != null) {
                editor.setText(value.toString());
            }
            editor.setBackground((row % 2 == 0) ? Color.white : Color.BLUE);
            return editor;
        }
    }

    class MyTableModel extends AbstractTableModel {

        private String[] columnNames = {"First Name",
            "Last Name",
            "Sport",
            "# of Years",
            "Vegetarian"};
        private Object[][] data = {
            {"Kathy", "Smith",
                "Snowboarding", new Integer(5), new Boolean(false)},
            {"John", "Doe",
                "Rowing", new Integer(3), new Boolean(true)},
            {"Sue", "Black",
                "Knitting", new Integer(2), new Boolean(false)},
            {"Jane", "White",
                "Speed reading", new Integer(20), new Boolean(true)},
            {"Joe", "Brown",
                "Pool", new Integer(10), new Boolean(false)}
        };
        public final Object[] longValues = {"Jane", "Kathy",
            "None of the above",
            new Integer(20), Boolean.TRUE};

        public int getColumnCount() {
            return columnNames.length;
        }

        public int getRowCount() {
            return data.length;
        }

        public String getColumnName(int col) {
            return columnNames[col];
        }

        public Object getValueAt(int row, int col) {
            return data[row][col];
        }
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TableRenderDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        TableRenderDemo newContentPane = new TableRenderDemo();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:50:57.297

要获取单元格的`JTable`颜色，`0, 0`您可以获取单元格组件的背景颜色：

```
TableCellRenderer cellRenderer = table.getCellRenderer(0, 0);
Component rendererComponent = cellRenderer.getTableCellRendererComponent(table, null, false, true, 0, 0);
Color cellColor = rendererComponent.getBackground(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:35:33.043

> 有人可以给我一个示例，说明如何获取 JTable 中特定单元格的背景颜色吗？我找不到如何执行此操作的示例。

*   [TableCellRenderer](https://stackoverflow.com/questions/tagged/tablecellrenderer)或对于[Renderer](https://stackoverflow.com/questions/tagged/java+swing+jtable+renderer)，

*   但一切都基于[JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)，特别是[Editors and Renderers](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)和[Custom Renderers的一部分](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)

*   [这里](http://www.java2s.com/Tutorial/Java/0240__Swing/1040__JTable-Renderer-Editor.htm)和[这里](http://www.exampledepot.com/egs/javax.swing.table/pkg.html)有很多例子

> 获取单元格中的值的大量示例，但不是单元格的背景颜色。

*   我无法抗拒，请在这个论坛或哪里

*   我希望对你有帮助....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T18:35:01.113

使用 TableCellRenderer

```
jTable1 = new javax.swing.JTable(6,6){
public Component prepareRenderer(
    TableCellRenderer renderer, int row, int column)
{

    Component c = super.prepareRenderer(renderer, row, column);
    if(column==2 && row==4)
    {
       Color color= c.getBackground();// use setBackground to set color and get background to get background of a particular cell
       System.out.println("Color of row=0 and column=0 is "+color);

    }

    else
    {
        c.setBackground(Color.GREEN);
        setShowGrid(true);
    }
    return c;

}
}; 
```

# playframework-2.0 - 为什么部署后不考虑等待？

> ID：12861409
> 
> 赞同：1
> 
> 时间：2012-10-12T14:38:56.120
> 
> 标签：playframework-2.0, cloudbees

我有一个方法可以对特定的 REST api 进行一些同步调用，例如：

```
WSRequestHolder url = WS.url("rest_api_url");
Promise<WS.Response> promisePerPage = url.get();
promisePerPage.getWrappedPromise().await(3000, TimeUnit.MILLISECONDS);
WS.Response responsePerPage = promisePerPage.get();
ProductsWrapper productsWrapper = new Gson().fromJson(responsePerPage.getBody(), ProductsWrapper.class); 
```

如您所见，我在两次调用之间设置了 3 秒，以便可以及时解析每个请求并将其插入数据库中。一切都在本地运行良好，但在我部署到云后，一切都在持续进行，请求之间不再等待（3 秒）......

你知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:16:42.150

您需要使用 play 的异步功能。

我在[http://play2-on-cb-features-test.hadashi.cloudbees.net/java/async-test](http://play2-on-cb-features-test.hadashi.cloudbees.net/java/async-test)进行了测试，它会在 3 秒后返回一些东西。

我在[https://github.com/CloudBees-community/play2-on-cb-features-test/blob/master/app/controllers/JavaTest.java#L13提供了一些示例代码](https://github.com/CloudBees-community/play2-on-cb-features-test/blob/master/app/controllers/JavaTest.java#L13)

Play 不会运行很多请求线程，因此它会输出太长的请求。我想可能有不同的生产设置。您可以在 Akka 配置中修改此行为，但最好只使用 Async 支持。

有关 Async 的更多文档，请阅读[http://www.playframework.org/documentation/2.0.4/JavaAsync](http://www.playframework.org/documentation/2.0.4/JavaAsync)

# java - 从控制台运行 java 应用程序时如何查看完整的异常堆栈跟踪？

> ID：12861410
> 
> 赞同：11
> 
> 时间：2012-10-12T14:38:57.823
> 
> 标签：java, debugging, cmd

从控制台运行 java 应用程序时出现异常，其中包含以下行：

> ... 5 更多

是否有可能看到完整的痕迹？有没有 cmd 参数？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-12T14:41:35.170

完整的跟踪在那里，但它是上面嵌套异常的重复，这就是总结它的原因。

```
public class Main {
    public static void throwsException() {
        throw new UnsupportedOperationException();
    }

    public static void main(String... args) throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {
        Main.class.getMethod("throwsException").invoke(null);
    }
} 
```

印刷

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
     at java.lang.reflect.Method.invoke(Method.java:601)
     at Main.main(Main.java:27)
     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
     at java.lang.reflect.Method.invoke(Method.java:601)
     at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.UnsupportedOperationException
     at Main.throwsException(Main.java:23)
     ... 10 more 
```

这`... 10 more`意味着它是包装它的异常的堆栈跟踪的重复。

# c# - Mvc 和 Web 表单。如何在它们之间发送数据？

> ID：12861416
> 
> 赞同：4
> 
> 时间：2012-10-12T14:39:14.647
> 
> 标签：c#, asp.net, asp.net-mvc

我正在开发 MVC 项目，我必须在那里使用 Web 表单控件。我可以在我的 mvc 项目视图中包含 iframe 中的整个页面，这不是问题。这种行为是可以接受的。但是我需要交换的数据有问题。我想从那里的控制器发送一些数据，并在控制结束后得到一些响应。更具体地说：

1\. 在启动时从控制器向 Web 控件发送一些初始值。
2\. Web 表单中的“魔术”按钮被单击时，我已经将控件生成的一些数据发回控制器。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:03:58.643

这当然是可能的。您可以使用`iframe`ASP.NET MVC 应用程序中托管旧版 WebForm。例如，假设您有以下 ASP.NET MVC 控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewBag.ValueFromMvc = "this value is coming from MVC";
        return View();
    }

    public ActionResult Back(string valueFromWebForms)
    {
        return Content(string.Format("This value came from WebForms: {0}", valueFromWebForms));
    }
} 
```

与相应的`~/Views/Home/Index.cshtml`观点：

```
<iframe src="@Url.Content("~/webform1.aspx?value_from_mvc=") + @Url.Encode(ViewBag.ValueFromMvc)"></iframe> 
```

以及以下内容`~/WebForm1.aspx`：

```
<%@ Page Language="C#" %>

<!DOCTYPE html>
<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            label.Text = Request["value_from_mvc"];
        }
    }

    protected void Link_Click(object sender, EventArgs e)
    {
        var httpContext = new HttpContextWrapper(Context);
        var requestContext = new RequestContext(httpContext, new RouteData());
        var urlHelper = new UrlHelper(requestContext, RouteTable.Routes);
        Response.Redirect(
            urlHelper.Action(
                "Back", 
                "Home", 
                new { valuefromwebforms = "coming from WebForm1.aspx" }
            )
        );
    }
</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:Label ID="label" runat="server" />
        <br/>
        <asp:LinkButton 
            runat="server" 
            ID="link" 
            OnClick="Link_Click"
            OnClientClick="document.forms[0].target='_top';"
            Text="Click here to send a value back" 
        />
    </form>
</body>
</html> 
```

在这个例子中，我假设 WebForm 是 MVC 应用程序的一部分，它允许我们使用帮助程序来生成它们之间的链接。当然，如果不是这种情况，您必须使用绝对 URL 来链接两个应用程序。

# php - 保护 JavaScript 游戏时间

> ID：12861419
> 
> 赞同：1
> 
> 时间：2012-10-12T14:39:27.887
> 
> 标签：php, javascript, security

我正在创建一个基于画布的游戏，其中包含一个重要的计时元素。游戏完成后，用户的完成时间将被发送到服务器上的 PHP/MySQL 以与其他玩家进行比较。

服务器端计时（即开始请求时间到提交请求时间）似乎会引入加载时间，因为它会影响用户的实际时间，因此在这种情况下效率低下。

我遇到的麻烦是确定一种方法来确保发送的时间是合法的。如何阻止某人使用他们的控制台并以提交虚假时间的方式编辑客户端代码？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T14:41:46.747

你不能。*永远不要相信客户*。对您的服务器的每个请求都可能被欺骗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:45:55.367

你不能。简单地。

时钟可能运行缓慢，他们可能会更改开始和结束之间的日期/时间。

我参与了一个项目，我们放慢了时钟来观察一些行为。

所以*不要*相信客户。依靠你的时钟。那是你可以控制的。

（想一想——你在街上问一个陌生人的时间，他们的表可能有点快或慢。我的有点快，所以即使我迟到了，我也更有可能准时！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:49:53.980

在游戏开始时，ping 服务器并让服务器将其服务器时间保存到会话或其他持久性方法中。完成后将完成时间发送到服务器。在服务器上比较开始时间请求和结束时间请求之间的时间差以及从游戏提交的时间。允许一些时间上的差异，但就像 bergi 说的那样，它的工作量很大，但仍然不会是 100%。

**流程图：**

```
Game start -> send command to server. 
Server saves time: (2:53pm)

Game end -> send players time to server (3mins).
Server gets current time (2:56pm)

Server compares start time (2:53pm) with current time (2:56pm) which is 3mins.
IF the difference == 3mins +/- 30sec then assume time is valid. 
```

根据您需要的严格程度以及您接受的公差来调整细节。- 请记住，客户甚至可能没有在玩游戏……任何请求都可能被欺骗。希望这是一个好的起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T14:54:42.143

> 服务器端计时（即开始请求时间到提交请求时间）似乎会引入加载时间，因为它会影响用户的实际时间，因此在这种情况下效率低下。

它可以。欢迎来到令人兴奋的在线游戏世界。这是您的服务器端应用程序需要更高级的地方，您可以在其中修改人们的时间以使其更*公平*。应执行 Pings/traceroutes 以了解延迟。

> 我遇到的麻烦是确定一种方法来确保发送的时间是合法的。如何阻止某人使用他们的控制台并以提交虚假时间的方式编辑客户端代码？

不太确定 HTML5 在这方面是否有任何进步——我不希望它会——但是，一种方法是使用 Flash，或者使用浏览器之外的应用程序，这可能会破坏你最初使用 JavaScript 的目的地方。

# python - 如何修复解决 Homebrew 医生警告的路径

> ID：12861422
> 
> 赞同：12
> 
> 时间：2012-10-12T14:39:31.563
> 
> 标签：python, path, matplotlib, homebrew

另一个新手查询。我一直在努力为 Python 项目安装 matplotlib，因此阅读建议的 Homebrew 是包管理和依赖项的可靠解决方案。

但是，当我运行 Homebrew 诊断程序时，我收到以下错误：

```
$ brew doctor
Warning: "config" scripts exist outside your system or Homebrew directories.
`./configure` scripts often look for *-config scripts to determine if
software packages are installed, and what additional flags to use when
compiling and linking.

Having additional scripts in your path can confuse software installed via
Homebrew if the config script overrides a system or Homebrew provided
script of the same name. We found the following "config" scripts:

/Library/Frameworks/Python.framework/Versions/2.7/bin/python-config
/Library/Frameworks/Python.framework/Versions/2.7/bin/python2-config
/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7-config
Warning: /usr/bin occurs before /usr/local/bin
This means that system-provided programs will be used instead of those
provided by Homebrew. The following tools exist at both paths:

2to3
2to3-2.7
idle
idle2.7
pydoc
pydoc2.7
python
python-config
python2.7
python2.7-config
pythonw
pythonw2.7
smtpd.py
smtpd2.7.py
tclsh
tclsh8.5
wish
wish8.5

Consider amending your PATH so that /usr/local/bin
occurs before /usr/bin in your PATH. 
```

我知道这是一个非常简单的查询，但我该如何修复路径？

更重要的是，Homebrew 是当前的首选软件包吗？我看过很多关于 Fink 和 MacPorts、easy_install 和 pip 的文章，以至于我无法弄清楚最佳实践是什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T06:58:05.800

为浪费时间道歉。这个查询已经回答了关于更改路径的关键问题：[如何修改 Homebrew 的 PATH？](https://stackoverflow.com/questions/10343834/homebrew-wants-me-to-amend-my-path-no-clue-how?rq=1)

# header - 尝试使代码看起来干净时的#define 标头错误消息

> ID：12861425
> 
> 赞同：1
> 
> 时间：2012-10-12T14:39:34.970
> 
> 标签：header, macros, c-preprocessor

如果不滚动，我的宏不能很好地适应屏幕，所以我想把它分解，这样它读起来很好。如果它看起来像这样，它可以正常工作：

```
#define longMacro(ptr, idx0, idx1, idx2, idx3, idx4, dim1, dim2, dim3, dim4) (*((ptr) + (idx0) * (dim1) * (dim2) * (dim3) * (dim4) + (idx1) * (dim2) * (dim3) * (dim4) + (idx2) * (dim3) * (dim4) + (idx3) * (dim4) + (idx4))) 
```

但是当我尝试像这样分解它时：

```
#define longMacro(ptr, idx0, idx1, idx2, idx3, idx4, dim1, dim2, dim3, dim4) 
    (*((ptr) + (idx0) * (dim1) * (dim2) * (dim3) * (dim4) 
    + (idx1) * (dim2) * (dim3) * (dim4) + (idx2) * (dim3) * (dim4) 
    + (idx3) * (dim4) + (idx4))) 
```

我收到这些错误

> 错误：在 '+' 标记之前需要 `)'
> 错误：在 '+' 标记之前
> 需要 `)' 错误：在 '+' 标记之前需要 `)'
> 错误：在 '+' 标记之前需要 `)'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:43:55.387

我认为您在每行末尾缺少一个“\”

```
#define longMacro(ptr, idx0, idx1, idx2, idx3, idx4, dim1, dim2, dim3, dim4) \
    (*((ptr) + (idx0) * (dim1) * (dim2) * (dim3) * (dim4) \
    + (idx1) * (dim2) * (dim3) * (dim4) + (idx2) * (dim3) * (dim4) \
    + (idx3) * (dim4) + (idx4))) 
```

# icons - 是否有任何屏幕阅读器或类似的支持技术“读出”由 css content 属性定义的内容？

> ID：12861426
> 
> 赞同：1
> 
> 时间：2012-10-12T14:39:42.613
> 
> 标签：icons, accessibility, font-face, pseudo-element

我正在做一个带有css3字体图标的项目，并且两种不同的映射字符的方法已经浮出水面。

1.  图标映射到常用字符，包括字母数字字符和其他基于键盘的字符。
2.  图标映射到 unicode 的 Private User Area (U+E000..U+F8FF)

所有的事情都是平等的，我会做第一种方式。Css3 内容仅用于演示，在良好的实践中，不应用于传达意义，而且它对用户更加友好。在这种情况下，用户是前端开发人员，他们原本需要在样式表中处理十六进制代码，而他们可以使用键盘字符。

我看到的使用私有用户区的一个论点是确保屏幕阅读器不会读出 css 定义的内容。这听起来很合理，但我想不出为什么屏幕阅读器会做这样的事情。根据定义，与 content 属性一起使用的 :before 和 :after 伪元素不是 DOM 的一部分。

我看过这个视频，它表明我的假设在三种情况下是正确的：[Dan Tamas 提交的 Youtube 视频，使用 css content 属性测试屏幕阅读器](http://www.youtube.com/watch?v=BmMrOfsXXEU)

是否有任何屏幕阅读器出现错误并开始向用户读出 css 内容的示例？这甚至会发生吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T01:52:32.847

罗杰约翰逊在 2012-05 年[写道：](http://www.456bereastreet.com/archive/201205/css_generated_content_and_screen_readers/)

> [...] 几个屏幕阅读器会朗读以这种方式创建的内容。VoiceOver 可以（在 OS X 和 iOS 中）。NVDA 在与 Firefox 一起使用时会这样做，但与 IE 不一样。

相关链接：

*   [http://www.w3.org/TR/CSS-access#Generated](http://www.w3.org/TR/CSS-access#Generated)：“生成的内容可以作为标记来帮助用户浏览文档并保持导向”
*   [http://lists.w3.org/Archives/Public/www-style/2010Nov/0437.html](http://lists.w3.org/Archives/Public/www-style/2010Nov/0437.html)：“从辅助技术中隐藏生成的内容会在非屏幕阅读器用户和屏幕阅读器用户可以对用户执行的操作之间引入一定的差异样式表")
*   [http://cssgallery.info/testing-the-accessibility-of-the-css-generated-content/](http://cssgallery.info/testing-the-accessibility-of-the-css-generated-content/)（您在问题中链接的视频的博客文章）

# c# - 如何在 C# 中填充简单的 datagridview？

> ID：12861428
> 
> 赞同：2
> 
> 时间：2012-10-12T14:39:42.503
> 
> 标签：c#, visual-studio-2010

我正在使用 Visual Studio 2005 我有一个简单的问题，我无法使用 Datatable 填充我的 datagridview

到现在我的代码如下

```
 this.dataGridView1.DataSource = ds1.Tables[0];
        dataGridView1.AutoGenerateColumns =true; 
```

谁能帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:49:21.160

try to do

```
dataGridView1.DataSource = ds1;
dataGridView1.DataMember = "your_table_name"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:46:57.483

你可以通过`BindingSource`

```
 // Set up the data source.
 var bindingSource1.DataSource = ds1.Tables[0];
 dataGridView1.DataSource = bindingSource1; 
```

# c# - 只有当用户在 textBox 中输入任何文本以便启用 button1 时，我才能做到这一点？

> ID：12861429
> 
> 赞同：0
> 
> 时间：2012-10-12T14:39:44.873
> 
> 标签：c#

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace GatherLinks
{
    public partial class CrawlLocaly : Form
    {
        public CrawlLocaly()
        {
            InitializeComponent();

        }

        public string getText()
        {
            return textBox1.Text;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (!string.IsNullOrEmpty(textBox1.Text))
            {
                DialogResult = DialogResult.OK;

            }
            else
            {

            }
        }

    }
} 
```

在 Form1 中，我显示此表单及其文本框：

```
private void button6_Click(object sender, EventArgs e)
        {

            using (var w = new StreamWriter(keywords))
            {
                crawlLocaly1 = new CrawlLocaly();
                crawlLocaly1.StartPosition = FormStartPosition.CenterParent;
                DialogResult dr = crawlLocaly1.ShowDialog(this); 
```

我想在 crawlLocaly 新表单中做，当我单击 Form1 并打开/显示新表单上的新表单 button1 将启用 = false 并且一旦用户在新表单 button1 的文本框中键入任何内容，将启用 true只有这样，用户才能点击新表单中的 button1 ，这就是好的（新表单中按钮的文本是好的）。

尝试在新表单中使用 button1 textchanged 事件，但没有成功。只有在我单击它后，该按钮才变为假。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T14:43:14.350

您可以尝试使用此代码 - 基于 `TextChanged event`

```
protected void TextBox1_TextChanged(object sender, EventArgs e)
{
   if(TextBox1.Text.Trim().Length > 0)
   {
      Button.Enabled = true;
   }
} 
```

注意：将 Button.Enabled 初始化为 false；在控制

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T14:49:12.950

If you want to keep it in C# you can do this, don't forget to set AutoPostBack to True and test if the length is 0 to disable the button again:

```
 <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" Enabled="false" />
    <asp:TextBox ID="TextBox1" runat="server" AutoPostBack="true" OnTextChanged="TextBox1_OntTextChanged" />

protected void TextBox1_OntTextChanged(object sender, EventArgs e)
{
    if (TextBox1.Text.Length > 0)
    {
        Button1.Enabled = true;
    }
    else
    {
        Button1.Enabled = false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:44:19.033

```
private void textBox1_TextChanged(object sender, EventArgs e) {
    button1.Enabled = true;
} 
```

# jquery - jQuery悬停切换类问题

> ID：12861433
> 
> 赞同：0
> 
> 时间：2012-10-12T14:39:57.853
> 
> 标签：jquery, hover

我有一些代码非常适合我的悬停状态。但是，如果链接已经处于活动状态，即当我将鼠标悬停在它上面时，ArrowHover 已经附加到 div 上，显然它会由于 jquery 中的切换类而删除 ArrowHover。我如何确保在已经激活的链接上不会发生这种情况？

```
$("#JobApplications").hover(function()
    {
         $("#JobApplicationsArrow.Arrow").toggleClass('ArrowHover')
    }
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:49:00.867

It would be helpful if we could see your HTML object, to know if it is an anchor tag or not... but assuming it is an anchor tag, try something along with this concept:

```
if ( $("#JobApplicationsArrow.Arrow").href != window.location.href ) {
    $("#JobApplicationsArrow.Arrow").toggleClass('ArrowHover')
} 
```

It is a modified version from **[this](https://stackoverflow.com/questions/3153229/check-if-ul-li-has-an-active-link)** post:

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:54:37.213

使用 css 技术而不是 jQuery 修复它。无论如何，干杯亚当！

# javascript - Google Maps InfoBubble 未在标记上加载

> ID：12861434
> 
> 赞同：1
> 
> 时间：2012-10-12T14:39:58.587
> 
> 标签：javascript, google-maps, backbone.js, coffeescript

我正在使用谷歌地图和 Infobubble Backbone 和 CofeeScript。

```
I am adding markers to a map like this:
  plotMarkers: (points) ->

    pos = []
    markers = []
    lats = []
    lngs = []

    for point in points

      lats.push(point[0])
      lngs.push(point[1])

      latLng = new google.maps.LatLng(point[0], point[1])

      icon = new google.maps.MarkerImage(
        # MarkerImage(url:string, size?:Size, origin?:Point, anchor?:Point, scaledSize?:Size)
        '/assets/home_marker.png',
      )

      content = new google.maps.Marker(
        icon: icon
        position: latLng
        map: @gMap
      )
      #content["infowindow"] = new google.maps.InfoWindow(content: "hello")
      content["infowindow"] = new InfoBubble(
        maxWidth: 240
        maxHeight: 210
        shadowStyle: 1
        padding: 0
        content: '<div class="tooltip_header">"hey"</div>',
        tabPadding: 15
        backgroundColor: 'black'
        borderRadius: 0
        arrowSize: 10
        borderWidth: 0
        borderColor: '#AB2424'
        disableAutoPan: true
        hideCloseButton: false
        arrowPosition: 0.5
        backgroundClassName: 'phoney'
        tabClassName: 'tabClass'
        activeTabClassName: 'activeTabClass'
        arrowStyle: 2
      )
      google.maps.event.addListener content, 'click', ->
        console.log(this["infowindow"])
        this["infowindow"].open(@gMap, this)

      markers.push(content)
      @delegateEvents()

    return markers 
```

这是来自 Coffee 的 JS：

```
({
  plotMarkers: function(points) {
    var content, icon, latLng, lats, lngs, markers, point, pos, _i, _len;
    pos = [];
    markers = [];
    lats = [];
    lngs = [];
    for (_i = 0, _len = points.length; _i < _len; _i++) {
      point = points[_i];
      lats.push(point[0]);
      lngs.push(point[1]);
      latLng = new google.maps.LatLng(point[0], point[1]);
      icon = new google.maps.MarkerImage('/assets/home_marker.png');
      content = new google.maps.Marker({
        icon: icon,
        position: latLng,
        map: this.gMap
      });
      content["infowindow"] = new InfoBubble({
        maxWidth: 240,
        maxHeight: 210,
        shadowStyle: 1,
        padding: 0,
        content: '<div class="tooltip_header"><h4>Hello</h4></div><div class="tooltip_content"><p>Nunc nec, egestas vel augue rhoncus massa cras, tincidunt a nisi nisi est lundium non sed? Eros pulvinar</p></div> <div id="tooltip_buttons" class="tooltip_buttons"><button class="btn btn-success" id="testdrive">Test Drive</button> <button class="btn btn-warning">Read More</button></div>',
        tabPadding: 15,
        backgroundColor: 'black',
        borderRadius: 0,
        arrowSize: 10,
        borderWidth: 0,
        borderColor: '#AB2424',
        disableAutoPan: true,
        hideCloseButton: false,
        arrowPosition: 0.5,
        backgroundClassName: 'phoney',
        tabClassName: 'tabClass',
        activeTabClassName: 'activeTabClass',
        arrowStyle: 2
      });
      google.maps.event.addListener(content, 'click', function() {
        this["infowindow"].open(this.gMap, this);
        return console.log(this["infowindow"]);
      });
      markers.push(content);
      this.delegateEvents();
    }
    return markers;
  }
}); 
```

如您所见，我正在为每个标记添加一个 InfoBubble 和侦听器事件。

侦听器在工作，因为我可以看到 console.log 行 - 但是我根本没有在标记上得到任何信息。它真的很奇怪。如果我独立于标记加载信息气泡，它会在地图上正常加载（如果我给它一个位置）

奇怪的是，当信息气泡在控制台中时，我可以看到这条线：

```
isOpen_: true 
```

这很奇怪，因为我没有将信息气泡设置为打开，但它说的是？

我相信你可以看到这里的最终游戏是让信息气泡出现在鼠标悬停或单击..

# jquery - 嘶嘶声和/或 querySelectorAll - 嵌套元素的枚举顺序？

> ID：12861440
> 
> 赞同：-1
> 
> 时间：2012-10-12T14:40:21.250
> 
> 标签：jquery, dom, jquery-selectors, sizzle, selectors-api

如果我有一组嵌套的 DOM 元素，例如`ul > li > ul > li`，我自己使用选择器`li`，是 Sizzle 还是`document.querySelectorAll`定义元素返回的顺序？

可能返回的顺序包括“最先”、“叶节点在前”或“按文档顺序”，但我从未见过任何写下来指定哪个顺序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T14:44:52.777

[嗯，在MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)中非常清楚地说明了`document.querySelectorAll`：

> 返回文档中与指定选择器组匹配的元素列表（**使用文档节点的深度优先前序遍历）。**

[W3 DOM 文档](http://www.w3.org/TR/selectors-api/#queryselectorall)给出了相同的描述：

> Document、DocumentFragment 和 Element 接口上的 querySelectorAll() 方法必须返回一个 NodeList，其中包含上下文节点的子树中所有匹配的 Element 节点，按文档顺序排列。[...] 术语“文档顺序”是指***对所讨论的 DOM 树或子树进行深度优先的预排序遍历。***

换句话说，给定以下结构：

```
<div class="a">
  <div class="a-a">
    <div class="a-a-a"></div>    
    <div class="a-a-b"></div>
  </div>
  <div class="a-b">
    <div class="a-b-a"></div>    
    <div class="a-b-b"></div>
  </div>
</div>
<div class="b">
  <div class="b-a">
    <div class="b-a-a"></div>    
    <div class="b-a-b"></div>
  </div>
  <div class="b-b">
    <div class="b-b-a"></div>    
    <div class="b-b-b"></div>
  </div>
</div> 
```

...的结果`document.querySelectorAll('div')`应该是一个完全按照以下顺序的 NodeList：

```
["a", "a-a", "a-a-a", "a-a-b", "a-b", "a-b-a", "a-b-b", 
 "b", "b-a", "b-a-a", "b-a-b", "b-b", "b-b-a", "b-b-b"] 
```

# jsf - 在 JSF 中动态创建响应

> ID：12861447
> 
> 赞同：0
> 
> 时间：2012-10-12T14:40:44.123
> 
> 标签：jsf, jnlp, java-web-start

我想在我的 JSF 页面上有一个链接。单击此链接时，Java Web Start 应用程序将启动。该应用程序根本不影响当前页面。该应用程序只是自行启动。

问题是，我需要动态生成启动 Java Web Start 应用程序的 JNLP 文件。基本上，我将根据应用程序的状态来决定 JNLP 文件的应用程序和参数。

有谁知道我可以做到这一点的方法。是否可以通过单击链接而不影响当前页面来简单地执行动态创建的 JNLP 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:31:35.513

您可以有一个 servlet 来捕获对（某些）文件类型 (jnlp) 的请求。

我一直在扩展 JnlpDownloadServlet 并结合一个 jsp 文件，该文件用作对单击的链接的响应。

[http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/downloadservletguide.html](http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/downloadservletguide.html)

必须通过使用 http get 参数和 codebase 属性来保留状态，因为 jnlp 文件可能会在应用程序启动期间多次下载。因此，保持状态的唯一方法就是这样做 afaik。

此示例中的状态是用户名和客户端令牌。这是我一直在使用的 jsp 文件的一部分：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase=<%=request.getScheme() + "://"+ request.getServerName() + ":" + request.getServerPort()+ request.getContextPath() + "/" %> href="jnlpfile.jnlp&#063;username=<%=request.getParameter("username")%>&clienttoken=<%=request.getParameter("clienttoken")%>">
  <information>
            <title>title</title>
            <vendor>vendor</vendor>
            <description kind="short">short desc</description>
            <icon href="resources/images/icon.jpg" kind="default"/>
  </information>
  <security>
      <all-permissions/>
  </security>
  <resources>
            <java version="1.7+" java-vm-args="-ea" initial-heap-size="128m" max-heap-size="512m" />
            <jar download="eager" href="test.jar"/>
  </resources>
  <application-desc main-class="test.MainClass">
       <argument><%=request.getServerName()%></argument>  
       <argument><%=request.getParameter("username")%></argument>
       <argument><%=request.getParameter("clienttoken")%></argument>
  </application-desc>
  <update check="background"/>
</jnlp> 
```

# c# - 与开放存取实体模型的多重连接

> ID：12861448
> 
> 赞同：0
> 
> 时间：2012-10-12T14:40:44.007
> 
> 标签：c#, orm, telerik, entity-framework-5, telerik-open-access

我想知道我是否可以在实体模型上有多个连接，例如 -

```
using (var db = new VWEntitiesModel("data source=Dev;initial catalog=Website1;user id=sqluser;password=&&password"))
{
    some logic
}

using (var db = new VWEntitiesModel("data source=Dev;initial catalog=Website2;user id=sqluser;password=&&password"))
{
    some logic
} 
```

我正在使用 Telerik Openaccess Entity 模型。我试着像上面那样使用。好像不太喜欢。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:23:37.797

EntityModel（OpenAccessContext 派生类型）表示映射到数据库中表的概念模型。您在上面指定的连接字符串的不同之处在于“初始目录”。要针对两个不同的数据库使用相同的模型，就领域模型已知的对象（表、列、约束等）而言，它们需要完全相同。

您可以指定两个唯一的连接字符串，但这会导致 OpenAccess 为您使用的每个唯一连接字符串维护一个唯一的工作空间（元数据、缓存、连接池等）。

如果您的服务正在查询两个不同的数据库，您应该有两个独立的域模型来表示数据库并使用适当的连接字符串实例化它们。

# linux - 在 linux 中连接加密网络时，如何从 nmcli 传递密码？

> ID：12861452
> 
> 赞同：0
> 
> 时间：2012-10-12T14:40:50.550
> 
> 标签：linux, networking, gnome

当我尝试使用命令行工具 nmcli 连接到加密网络时，它会通过弹出窗口提示输入密码。我不想在弹出窗口中手动输入密码，而是直接从命令行传递密码。有可能这样做吗？如果是这样，你介意建议我吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:35:00.200

网络管理器 0.9.6 版解决了这个问题。

# c# - 在构造函数链接中使用 base 和 this

> ID：12861454
> 
> 赞同：5
> 
> 时间：2012-10-12T14:40:51.693
> 
> 标签：c#, constructor

假设有一个名为的基类`Employee`，如下所示

```
public Employee(string name, int id, float pay)
    : this(name, 0, id, pay, "") { }
public Employee(string name, int age, int id, float pay, string ssn)
{
    // Better!  Use properties when setting class data.
    // This reduces the amount of duplicate error checks.
    Name = name;
    Age = age;
    ID = id;
    Pay = pay;
    SocialSecurityNumber = ssn;
} 
```

还有一个`Manager`继承自`Employee`构造函数的类

```
public Manager(string fullName, int age, int empID,
  float currPay, string ssn, int numbOfOpts)
    : base(fullName, age, empID, currPay, ssn)
{
    .
    StockOptions = numbOfOpts;
} 
```

据我所知，`this`关键字就像`base`关键字一样，只是它适用于同一类中的构造函数。我最大的问题是，在阅读参考书时，它说如果您不使用链接，`Manager`对象的构造将包括七个“命中”。由于 Manager 继承自Employees，这是否意味着每个 Manager 对象都是“出生”为 Employee 并在以后成为 Manager 的？在它成为经理之后，您只需要添加两个字段而不是七个字段吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:44:12.787

是的，就是这样。

构造器参数自下而上流动，然后对象自上而下创建。如果您的派生类需要在其构造函数中访问基类成员，它必须是这样的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T14:51:42.563

在 .NET 中，在调用任何构造函数之前创建完整的对象。接下来，调用基础构造函数，然后调用派生类构造函数。

所以答案是否定的——经理对象不是作为雇员出生的，而是在以后成为经理的。相反，管理器对象是作为管理器对象诞生的……在构造函数被调用之前。

顺便说一句，在非托管 C++ 中，情况正好相反，尽管为派生类分配了足够的内存，但首先创建了 Employee 对象（调用 Employee 构造函数），并且调用的任何虚拟方法都将导致调度到基类方法体。然后构造 Manager 类。

# eclipse - 错误：无法编译简单的 JNI 程序

> ID：12861455
> 
> 赞同：8
> 
> 时间：2012-10-12T14:40:53.683
> 
> 标签：eclipse, r, ubuntu, plugins, statet

当我尝试在 Eclipse 中运行 r 控制台时，出现此错误：

```
....Please make sure that R package 'rj' (1.1 or compatible) is installed... 
```

所以我尝试像这样在 R 控制台中安装：

```
install.packages(c("rj", "rj.gd"), repos="http://download.walware.de/rj-1.1") 
```

得到这个错误：

```
checking whether Java interpreter works... checking whether JNI programs can be compiled... configure: error:             Cannot compile a simple JNI program. See config.log for details.configure: error: ./configure failed for jri ERROR: configuration failed for package ‘rj’ 
```

顺便说一句，我的配置是：ubntu 11.10 64bit+eclipse 3.7，我已经关注了这个帖子：[http ://www.twm-kd.com/linux/install-oracle-java-sdk-in-ubuntu-11- 10/](http://www.twm-kd.com/linux/install-oracle-java-sdk-in-ubuntu-11-10/)安装oracle-1.7.0-jdk，然后运行：“sudo R CMD javareconf”，得到：

```
Java interpreter : /usr/bin/java
Java version     : 1.7.0
Java home path   : /usr/lib/jvm/java-7-oracle/jre
Java compiler    : /usr/bin/javac
Java headers gen.: /usr/bin/javah
Java archive tool: /usr/bin/jar
Java library path: :/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
JNI linker flags : -L -L/usr/java/packages/lib/amd64 -L/usr/lib64 -L/lib64 -L/lib -L/usr/lib -ljvm
JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/linux
Updating Java configuration in /etc/R
Done. 
```

## 会话信息

```
R version 2.13.1 (2011-07-08)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
[1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
[3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
[5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8   
[7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
[9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-12T04:15:12.763

你在做`sudo R CMD javareconf` **之前**确定你做了`install.packages(c("rj", "rj.gd"), repos="http://download.walware.de/rj-1.1")`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:25:34.953

删除当前版本 2.13，然后安装新版本 2.15，这个问题就消失了。

# sql-server - 实体框架连接到 SQLEXPRESS 而不是 SQL Compact

> ID：12861458
> 
> 赞同：10
> 
> 时间：2012-10-12T14:41:02.827
> 
> 标签：sql-server, entity-framework

我一直在尝试使用 SQl Compact 4.0 的代码优先 EF 项目。当我尝试运行该项目时，我收到一个错误“数据库'master'中的CREATE DATABASE权限被拒绝。”。

我搜索了帮助并响应了一些博客，试图识别正在使用的连接字符串。令我惊讶的是

```
context.Database.Connection.ConnectionString    "Data Source=.\\SQLEXPRESS;Initial Catalog=Ancestors.Models.AncestorsContext;Integrated Security=True;MultipleActiveResultSets=True;Application Name=EntityFrameworkMUE"    string 
```

即使我的 web.config 文件包含以下部分...

```
<connectionStrings>
    <add name="DefaultConnection" providerName="System.Data.SqlServerCe.4.0"    connectionString="Data Source=|DataDirectory|\aspnet-Ancestors-20121012114712.sdf" /> 
</connectionStrings>

<system.data>
<DbProviderFactories>
  <remove invariant="System.Data.SqlServerCe.4.0" />
  <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.1, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
</DbProviderFactories>
</system.data> 
```

有谁知道为什么 EF 坚持创建与 SQLEXPRESS 而不是 SQL Compact 的连接？我在解决方案的任何地方都找不到对 SQLEXPRESS 的引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-12T20:21:12.820

而不是使用以下内容将您的连接名称传递给 DBContext

```
public YourContext() : base("DefaultConnection")
{

} 
```

使用名称指令

```
public YourContext() : base("name=DefaultConnection")
{

} 
```

这将告诉 EF 将该参数用作连接。

此外，在 web.config 的 connectionStrings 部分顶部添加“clear”可能会解决继承问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T14:43:49.633

在您的 web.Config 中查找该`<entityFramework>`部分，那里应该有您的默认连接工厂：

```
 <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=.\SQLEXPRESS; Integrated Security=True; MultipleActiveResultSets=True"/>
      </parameters>
    </defaultConnectionFactory>
  </entityFramework> 
```

如果您正在执行代码优先项目，您还可以更改默认构造函数以使用其他连接字符串：

```
public YourContext() : base("name=DefaultConnection")
{

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-03T11:40:38.950

这篇博客文章讨论了如何做到这一点......

[http://blogs.msdn.com/b/davidobando/archive/2013/03/13/10339621.aspx](http://blogs.msdn.com/b/davidobando/archive/2013/03/13/10339621.aspx)

# primefaces - p:tabView 中的 p:inputTextarea 将文本保存到 Backingbean

> ID：12861463
> 
> 赞同：0
> 
> 时间：2012-10-12T14:41:18.583
> 
> 标签：primefaces

我在每个选项卡中的表单中有一个动态的 p:tab 计数是 ap:inputtextarea。这可以正常工作，但 InputTextArea 中的文本只会在我进行 tabChange 事件时保存到支持 Bean 值。

我该如何解决这个问题？

我不会在每次 onkeyup 或单击 a 按钮时保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:09:27.860

1.  onkeyup：`keyup`在 inputTextarea 上注册 ajax 事件：

    ```
    <h:form>
        <p:inputTextarea id="textArea1" value="#{testClazz.testHtml}" >
            <p:ajax event="keyup"/>
        </p:inputTextarea>
    </h:form> 
    ```

2.  按钮点击：处理 inputTextarea

    ```
    <h:form>
        <p:inputTextarea id="textArea2" value="#{testClazz.testHtml}"/>
        <p:commandButton value="Save" process="textArea2"/>
    </h:form> 
    ```

表单基本 PrimeFaces 组件示例参见[PrimeFaces ShowCase](http://www.primefaces.org/showcase/ui/home.jsf)。

# code-coverage - 如何使用 jacoco 或其他工具以编程方式获得 junit 4 测试代码覆盖率？

> ID：12861475
> 
> 赞同：0
> 
> 时间：2012-10-12T14:41:52.013
> 
> 标签：code-coverage, junit4, jacoco

我想运行我的测试，然后创建一个报告。我想在我的报告中添加代码覆盖率。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:59:24.800

你是如何运行 jacoco 的？例如，如果您通过 Maven 运行它，它会[生成一个 XML 报告](http://www.eclemma.org/jacoco/trunk/doc/report-mojo.html)。您可以使用 XPath 对其进行解析，以编程方式获取覆盖数字。

# html - 设置 iframe html 的 innerHTML 对文本进行编码

> ID：12861477
> 
> 赞同：1
> 
> 时间：2012-10-12T14:41:57.073
> 
> 标签：html, windows-8, winjs, appdata, windows-store-apps

我有一个 iframe，我想用它在我的 WinJS“商店”应用程序中向用户显示 instapaper 文章。一个非常高优先级的功能是用户应该能够在离线时阅读下载和保存的文章。

没有涉及使显示本地缓存的 html 文件比显示来自网络的任意 html 文档更难的所有荒谬之处，我当前的问题/问题是 iframe 以及它如何处理 html 文本。

假设我在从文本文件读取的字符串中有一个 html 文档，如下所示：

```
 <html>
     <head>
     <title>Foobar!</title>
     </head>
     <body>
          <h1>Foo</h1>
         <div>Bar</div>
     </body>
   </html> 
```

如果我设置一个`<div>`元素的 innerHTML 属性（通过`WinJS.Utilities.setInnerHTMLUnsafe`方法），然后检查该属性，我会得到我期望的输出：

```
>document.getElementById("article-frame").innerHTML
"
<title>Foobar!</title>
<h1>Foo</h1>
<div>Bar</div>
" 
```

现在，当我只使用 a 做同样的事情时`<iframe>`，结果如下：

```
>document.getElementsByTagName("iframe")[0].innerHTML
"&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Foobar!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Foo&lt;/h1&gt;
&lt;div&gt;Bar&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;" 
```

显然，iframe 是对文本进行 HTML 编码，而 div 不是。这是设计使然吗？如果是这样 - 为什么行为会如此不同？我不记得曾经从 iframe 中看到过这种行为，但话说回来，自从我不得不使用 iframe 以来已经有好几年了。我不希望只使用 div，因为我无法防止 CSS 渗入其中（我可以通过将元素 ID 附加到嵌入式样式表来防止 CSS 向相反方向渗入，但这对 UX 没有多大帮助） .

我已经花了很多时间试图让 iframe 通过`src`属性加载存储在用户 appData 中的文件，但没有成功。这些持续的障碍会让人非常沮丧！

编辑：我试图设置`innerHTML`框架属性的`contentDocument`属性，结果类似于`div`实验，除了不显示或呈现 HTML。

有趣的是检查 the和 the的`innerHTML`属性的输出（注意后者的空结果）：`contentDocument``iframe`

```
> document.getElementsByTagName("iframe")[0].contentDocument.innerHTML
"<html>
<head>
<title>Foobar!</title>
</head>
<body>
<h1>Foo</h1>
<div>Bar</div>
</body>
</html>"
> document.getElementsByTagName("iframe")[0].innerHTML  
"" 
```

**参考**
[http://technet.microsoft.com/en-us/subscriptions/hh781229.aspx](http://technet.microsoft.com/en-us/subscriptions/hh781229.aspx)
[http://social.msdn.microsoft.com/Forums/en-US/windowsstore/thread/e13791b2-7fc3-40cb-a284- f927aaa3a9e3](http://social.msdn.microsoft.com/Forums/en-US/windowsstore/thread/e13791b2-7fc3-40cb-a284-f927aaa3a9e3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:08:42.830

我想我想通了。

**关键是我最初并没有`src``iframe`**在我的标记中设置**属性。**因为它没有被设置，`iframe.contentDocument`没有被创建和设置。

这是我最终得到的解决方案。设置 src 属性可确保`contentDocument`创建该属性：

```
<iframe id="article-frame" src="about:blank"></iframe> 
```

* * *

```
 var frame = document.getElementById("article-frame");
        Article.getFileText(book).done(function (text) {

            MSApp.execUnsafeLocalFunction(function () {                    
              frame.contentDocument.write(text);
            }); 
```

我不认为我必须在调用中包含对调用`contentDocument.write()`的`execUnsafeLocalFunction`调用，但由于我也信任（在合理范围内）输入，我认为这不会造成伤害 - 我注意到用于字体下载的小 js 片段和展示。

# spring - Spring 依赖注入、作用域和内存泄漏

> ID：12861478
> 
> 赞同：1
> 
> 时间：2012-10-12T14:41:58.577
> 
> 标签：spring, memory-leaks, dependency-injection, struts2, scope

在我们的一个 Web 应用程序（Struts2 + Spring 2.5 + iBatis）中，我们使用以下 MVC 结构。

ActionClass <---> ServiceInterface <---> ServiceImplementationClass <---> DAOClass <---> DB

所有这些 java 类都是使用 Spring 实例化的。使用 DI 技术将 Service 类注入到 Struts2 Action 类中。我对 spring 应用程序上下文 xml 中使用的范围属性有疑问。

以下是来自我们的 Spring applicationcontext.xml 的示例条目。

我想了解

一个。从并发的角度来看，仅将操作类作为 Prototype 并将其余层类作为 Singleton 是否正确？

湾。从内存泄漏的角度来看，定义范围是否有任何指导方针？

```
 <bean id="commonAction" scope="prototype"
    class="com.xyz.action.CommonAction">
    <property name="commonService" ref="commonService" />
</bean>

<bean id="commonService" class="com.xyz.service.impl.CommonServiceImpl">
    <property name="commonDao" ref="commonDao" />
</bean>

<bean id="commonDao" class="com.xyz.dao.impl.CommonDAOImpl">
    <property name="sqlMapClient" ref="sqlMap" />
</bean> 
```

这是我们的 Struts xml 条目

```
<struts>
    <constant name="struts.enable.DynamicMethodInvocation" value="false"></constant>
    <constant name="struts.devMode" value="true" />
    <constant name="struts.objectFactory" value="spring" />
    <package name="default" namespace="/" extends="struts-default"> 
```

感谢您对此的回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:11:27.083

如果不了解更多关于您的实现的实现，就无法回答并发问题。行动应该是每个请求（即原型）。其他类的线程安全取决于你——一般来说，服务和 DAO 应该写成线程安全的，因此默认的“单例”范围是可以的，但它们*不需要*是单例，这只是典型的。对象实例化很便宜。

我不确定您从“内存泄漏的角度”要问什么，范围与内存泄漏没有直接关系——坚持引用通常会导致泄漏。

# vba - 使用 Excel VBA 打开 csv

> ID：12861484
> 
> 赞同：0
> 
> 时间：2012-10-12T14:42:29.677
> 
> 标签：vba, excel

我正在尝试使用此代码打开一个 csv 文件，但它一直给我一个“错误 52 错误文件名或编号”

```
 Sub ShowFileDialog()
   Dim x As String
     Dim FF1 As Integer
    Dim dlgOpen As FileDialog
    Set dlgOpen = Application.FileDialog( _
        msoFileDialogFilePicker)
    With dlgOpen

        .Show
    End With

x = CStr(dlgOpen.SelectedItems(1))
MsgBox x

Open x For Input As #FF1

Do While Not EOF(FF1)

Line Input #FF1, inputdata

Dim lineData() As String
lineData() = Split(inputdata, ",")

Loop
Close #FF1
End Sub 
```

调试器突出显示 Open for X 行，但我将路径名作为字符串提供给它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:49:47.883

将此行直接添加到导致错误的行之前：

```
FF1 = FreeFile 
```

因为 Open For Input 需要 1 到 512 之间的数字，应该通过调用[FreeFile](http://msdn.microsoft.com/en-us/library/office/gg264526.aspx)来获得。

# joomla - CORE Joomla 在哪里！2.5 菜单项类型？

> ID：12861492
> 
> 赞同：0
> 
> 时间：2012-10-12T14:42:56.123
> 
> 标签：joomla, joomla2.5

最近，我尝试将一个新模块上传到我们的网站，但是在“无法安装所有组件”失败后，我们现在无法管理网站，因为所有菜单类型项都消失了——同时，使网站关闭。

那么我在哪里可以找到要替换的核心“菜单项类型”并尝试使所有这些工作正常。

![菜单项类型消失了！！！！ :(](../Images/3d44dc084055015f3023076b2704c937.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T15:03:53.513

在您开始尝试编辑 Core Joomla 文件以尝试修复问题之前......**不要！**我告诉很多人，编辑核心 Joomla 文件会导致安全问题、阻止其他功能工作、在 Joomla 更新时被覆盖等等。

我首先要尝试的是，它会下载 Joomla 2.5 的新副本，并仅提取以下文件夹：

1.  行政人员
2.  包括
3.  图书馆

然后，将它们压缩，通过 FTP 上传到根文件夹并解压缩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:39:29.453

这不太可能是任何核心文件被更改的结果。菜单项类型是基于可用的各种视图动态创建的列表，并设置为已安装组件中的菜单项类型。

您应该做的第一件事是删除您尝试安装的扩展程序留在文件系统中的任何文件。最有可能的是，其中一个文件导致构建菜单项类型的函数在到达该组件时中断。删除该问题，您可能会恢复其余的菜单类型。

此外，洛德是绝对正确的。没有任何理由编辑 Joomla 核心文件。您可以通过覆盖和扩展来完成您想要的任何事情，永远不需要编辑核心文件。

# python - Python Tkinter 在线程或主应用程序中？

> ID：12861495
> 
> 赞同：0
> 
> 时间：2012-10-12T14:43:07.693
> 
> 标签：python, tkinter

我正在编写一个 Tkinter 应用程序，它执行一些长时间运行的操作。为了防止 Tkinter 窗口挂起，我引入了线程：- 一个线程用于执行长时间运行的操作，第二个线程将用于更新基于 QUEUE 的 GUI，该队列将由长时间运行的操作填充。现在我正在考虑在单独的线程而不是主线程中运行 Tkinter 主循环，原因是我想更新 GUI 的状态（配置一些按钮），只有在长时间运行的线程完成后。如果我在主线程中运行 Tkinter 主循环，它不会等待长时间运行的线程完成，并且会在它之前更新 GUI。那么，如果我在单独的线程中运行 Tkinter 主循环并在主循环中等待长时间运行的线程在其他更新之前完成，这是否安全？对于这个问题还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:08:29.023

我的理解是 tk 需要在主线程中运行。

# android - 在 Android 中创建自定义的“打开方式”对话框

> ID：12861501
> 
> 赞同：0
> 
> 时间：2012-10-12T14:43:27.257
> 
> 标签：android, android-intent

当我单击一个文件时，“打开方式”对话框中会出现多个选项。这是因为我使用 Action_VIEW 发送了一个意图，并且有多个应用程序可以接收它。

```
intent.setAction(android.content.Intent.ACTION_VIEW);
        Uri fileUri = Uri.parse("file://" + location); 
```

出于安全原因，我想禁用其中一些，例如，用于从我的应用程序打开文件的打印机应用程序。

是否有一种机制可以过滤掉选项或选择显示哪些选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T12:27:07.083

我正在回答我的问题，因为它可以使任何寻找类似东西的人受益。因此，这就是您可以自定义和创建自己的 Open With Dialog 的方法：

第 1 步：获取要显示的应用程序列表。为此，您需要从意图中筛选出应用程序。

```
final Intent intent = new Intent(Intent.ACTION_VIEW);

intent.setDataAndType(fileUri, mimeType); 

List<ResolveInfo> getAllAppswhichcanViewtheFile =   (List<ResolveInfo>)getApplicationContext().getPackageManager().queryIntentActivities(intent, 0);

    Iterator<ResolveInfo> i = getAllAppswhichcanViewtheFile .iterator();
    while (i.hasNext()) {
        ResolveInfo file = i.next();

    // Use condition to filter the List 
        if (file.activityInfo.packageName.contains(XXXX)) {  
            i.next(); 
        } else {          
            i.remove();
        }

      List<ResolveInfo> resolvedPrintList = getAllAppswhichcanViewtheFile ; 
```

第 2 步：在警报对话框中显示过滤的应用程序：

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle(DataUtils.getString(R.string.xyz));
        final OpenWithArrayList adapter = new OpenWithArrayList(this,           R.layout.basiclistview, R.id.text1, resolvedPrintList);
        builder.setAdapter(adapter, new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {

                ResolveInfo info = (ResolveInfo)adapter.getItem(which); 
```

intent1.setClassName(info.activityInfo.packageName,info.activityInfo.name); 开始活动（意图1）；
} });

```
 builder.create();
        builder.show(); 
```

第 3 步：创建适配器：public class OpenWithArrayList extends ArrayAdapter{

```
 Context context;
    Object[] items;
    boolean[] arrows;
    int layoutId;

public OpenWithArrayList(Context context, int resource,
        int textViewResourceId, List<ResolveInfo> objects) {

    super(context, resource, textViewResourceId, objects);
    this.context = context;
    this.items = objects.toArray();
        this.layoutId = resource;

    // TODO Auto-generated constructor stub
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

     View row = convertView;

     if(row==null){
            LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      row=inflater.inflate(R.layout.basiclistview,parent, false);
      TextView label=(TextView)row.findViewById(R.id.text1);
     label.setText(((ResolveInfo)items[position]).activityInfo.applicationInfo.loadLabel(context.getPackageManager()).toString());
     ImageView image = (ImageView) row.findViewById(R.id.logo);
     image.setImageDrawable(((ResolveInfo)items[position]).activityInfo.applicationInfo.loadIcon(context.getPackageManager()));

     }

     return(row);

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:09:29.333

如果您知道应用程序名称，可以尝试使用 SetPackage。例如，在您的代码中，您可以使用 setPackage 指定包名称

```
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setPackage("com.test.print");
Uri fileUri = Uri.parse("file://" + location); 
```

# objective-c - UIWebView 加载本地视频数据

> ID：12861503
> 
> 赞同：6
> 
> 时间：2012-10-12T14:43:27.610
> 
> 标签：objective-c, ios, video, uiwebview

我正在尝试在 UIWebView 中加载视频。视频存储在本地文件系统中。这是我用于加载视频的代码片段。

```
{
   NSString* filePAth = [[NSBundle mainBundle] pathForResource:@"sample_iPod" ofType:@"m4v"];
   NSLog(@"%@",filePAth);
   NSData* data = [NSData dataWithContentsOfFile:filePAth];
   [_webView loadData:data MIMEType:@"video/x-m4v" textEncodingName:@"UTF-8" baseURL:nil];
} 
```

这是我在控制台中遇到的错误：

> Webview 加载错误：Error Domain=WebKitErrorDomain Code=204“插件处理负载”UserInfo=0x1f8b3c70 {NSErrorFailingURLStringKey=applewebdata://3F0047AD-E6CF-4EAD-A4C3-DA6E1C0BD603, WebKitErrorMIMETypeKey=video/x-m4v, NSErrorFailingURLKey=applewebdata ://3F0047AD-E6CF-4EAD-A4C3-DA6E1C0BD603, NSLocalizedDescription=插件处理的负载}

但是，相同的代码适用于加载所有其他文件类型，例如：PNG、DOC 等。

请帮忙...！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:46:48.097

您应该尽可能加载本地视频和其他视频`MPMoviePlayerController`- （[文档](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)） - 如果播放视频是您所需要和想要的，并且您正在开发本机应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-22T20:31:06.770

您需要将数据转换为 base64 字符串并使用带有`video`标签的 Safari 的 HTML 功能

```
NSString *base64String = [data base64EncodedStringWithOptions:NSDataBase64Encoding64CharacterLineLength];

NSString *str = [NSString stringWithFormat:@" \
                     <div style=\"height:100%%;\"> \
                     <p style=\"position: absolute; top: 50%%; left: 50%%; transform: translate(-50%%, -50%%)\"> \
                     <video controls> \
                     <source type=\"%@\" src=\"data:%@;base64,%@\"> \
                     </video></p></div>", contentType, contentType, base64String];

[webView loadHTMLString:str baseURL:nil]; 
```

这`data`是您的原始视频数据，`contentType`是 contentType 字符串。

# c# - 安全模式=传输抛出异常。

> ID：12861506
> 
> 赞同：2
> 
> 时间：2012-10-12T14:43:43.050
> 
> 标签：c#, .net, wcf, .net-4.0

我的服务 app.config 中的 netTcpBinding 将安全模式设置为“无”，并且工作正常。当我将其更改为 nettcpbinding ieMode=Transport 和 clientCredentialType="Windows" 的默认模式时，我在连接到此服务时在 GUI 项目中出现以下异常

套接字连接被中止。这可能是由于处理您的消息时出错或远程主机超出接收超时，或者是潜在的网络资源问题造成的。本地套接字超时为“00:00:59.6982306”。

我在跟踪查看器中查看了服务跟踪并显示以下错误消息：由于地址过滤器不匹配，接收方无法处理带有 To 'net.tcp://localhost:9200/MyService/mex/mex' 的消息端点调度程序。检查发送方和接收方的 EndpointAddresses 是否一致。如果我使用具有默认传输安全性的 nettcpendpoint 创建一个新服务，那效果很好。

如果有人对此有任何想法，请告诉我。

# jquery - 具有多个值的 JSON 对象

> ID：12861507
> 
> 赞同：0
> 
> 时间：2012-10-12T14:43:44.587
> 
> 标签：jquery, arrays, json

如何从 JSON 复杂对象/多维数组中提取多个值？

```
{
    "Items": [{
        "node": {
            "titre": "myTitle",
            "representation": {
                "1": "09 Octobre 2012 - 19:30",
                "2": "10 Octobre 2012 - 20:30",
                "3": "11 Octobre 2012 - 19:30"
            },
            "photo": {
                "1": "photo_1.jpg",
                "2": "photo_2.jpg",
                "3": "photo_3.jpg",
                "4": "photo_4.jpg"
            }
        }
    }]
} 
```

目前，我正在使用：

```
$.getJSON(url, function (data) {
    $.each(data.Items, function (i, node) {
        var titre = node.node.titre;
        var representation = node.node.representation;
        var photo = node.node.photo;
    }
    }); 
```

结果 for`titre`很好，但是对于`representation`and `photos`，它呈现：`[object Object]`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:19:47.340

那是因为你在这里的照片是一个物体..

要访问其中的值，您需要使用键 1 , 2 ,3, 4

```
 So var photo = node.node.photo;  // Is an Object 

 var photo1 = node.node.photo["1"] // photo_1.jpg
   var photo2 = node.node.photo["2"] // photo_2.jpg
   var photo3 = node.node.photo["3"] // photo_3.jpg 
```

// 同样的逻辑适用于表示

```
 var representation1 = node.node.representation["1"] // 09 Octobre 2012 - 19:30
   var representation2 = node.node.representation["2"] // 10 Octobre 2012 - 20:30
   var representation3 = node.node.representation["3"] // 11 Octobre 2012 - 19:30 
```

要迭代这个，你可以试试这个

```
$.each(node.node.photo , function(key , value){

    console.log( value);
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/LPtvE/)**

**编辑**

```
entry = {
                representation :[ sps.node.representation["1"],sps.node.representation["2"],sps.node.representation["3"] ],
                title: sps.node.titre,
                image: sps.node.image,
                acteurs: sps.node.acteurs,
                acteursuite: sps.node.acteurs_suite,
                lien: sps.node.lien,
                description: sps.node.corps,
                pics: sps.node.photo
            };

for( var i = 0; i< entry.representation.length ; i++){

     alert(entry.representation[i]);
} 
```

// [小提琴](http://jsfiddle.net/sushanth009/ueabw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:09:13.687

照片属性不是数组。它是一个对象。属性值应包含在 im`[ ]`中。

# coldfusion - 使用 MXUnit 模拟/存根组件

> ID：12861514
> 
> 赞同：4
> 
> 时间：2012-10-12T14:44:03.123
> 
> 标签：coldfusion, mocking, components, stub, mxunit

我有一个名为 ComponentUnderTest.cfc 的组件，看起来像：

```
<cfcomponent output="false">
<cfset externalComponent = Component("Externalcomponent");

  <cffunction name="FunctionUnderTest" access="public"...>
     <cfset externalComponent.ExternalFunction()> 
  </cffunction>
</cfcomponent> 
```

如何在 MXUnit 测试组件中模拟/存根 externalComponent.externFunction()：

```
<cfcomponent displayname="ComponentTester" extends="mxunit.framework.TestCase>

 <cffunction name="MockForExternalFunction">
   .....
 </cffunction>
 ??????
 <cffunction name=TestComponent>
     <cfset componentUnderTest = CreateObject("ComponentUnderTest")>
     ?????
     <cfset componentUnderTest.FunctionUnderTest()>  <!--- should call MockForExternalFunction --->
 </cffunction>
</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T21:41:00.720

```
<cfcomponent displayname="ComponentTester" extends="mxunit.framework.TestCase>

 <cffunction name="MockForExternalFunction">
   .....
 </cffunction>

 <cffunction name=TestComponent>
     <cfset componentUnderTest = CreateObject("ComponentUnderTest")>
     <cfset injectMethod(componentUnderTest, this, "MockForExternalFunction", "FunctionUnderTest") />
     <cfset componentUnderTest.FunctionUnderTest()>  <!--- should call MockForExternalFunction --->
 </cffunction>
</cfcomponent> 
```

[注入方法](http://wiki.mxunit.org/display/default/Using+injectMethod+for+simple+mocking "注入方法")

```
<cffunction name="injectMethod" output="false" access="public" returntype="void" hint="injects the method from giver into receiver. This is helpful for quick and dirty mocking">
    <cfargument name="Receiver" type="any" required="true" hint="the object receiving the method"/>
    <cfargument name="Giver" type="any" required="true" hint="the object giving the method"/>
    <cfargument name="FunctionName" type="string" required="true" hint="the function to be injected from the giver into the receiver"/>
    <cfargument name="FunctionNameInReceiver" type="string" required="false" default="#arguments.functionName#" hint="the function name that you will call. this is useful when you want to inject giver.someFunctionXXX but have it be called as someFunction in your receiver object">
</cffunction> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:42:57.180

您将不得不注入模拟组件`componentUnderTest`来替换现有的。

你可以这样做：

```
// I took this lot from the docs Henry pointed you to: I'm not familiar with MXUnit's mocking framework, but this sounds right
mockedObjectWithMockedMethod = mock();
mockedObjectWithMockedMethod.ExternalFunction().returns(MockForExternalFunction());

function injectVariable(name, value){
    variables[name] = value;
}
componentUnderTest.injectVariable = injectVariable;
componentUnderTest.injectVariable("externalComponent", mockedObjectWithMockedMethod); 
```

`MockForExternalFunction()`仅提供返回值以在调用时返回的东西，*而*`ExternalFunction()`不是调用ExternalFunction()。不过，这应该没问题。

# mysql - Non linear, three way sum of table data

> ID：12861520
> 
> 赞同：0
> 
> 时间：2012-10-12T14:44:37.443
> 
> 标签：mysql, sql

My [table](http://sqlfiddle.com/#!2/0dc39)

```
user_name     id      status          calls
===========================================
apple        21       BadAd             2
apple        21       Lead              5
apple        21       DNC               6
apple        21       pajs              2
orange       34       Lead              9
orange       34       disks             3
orange       34       BadAd             8
orange       34       pajs              5 
```

My attempt

```
 SELECT sum(calls) FROM (SELECT y.calls, y.user_name, y.status FROM stats
 INNER JOIN
 (select user_name, status, sum(calls) as calls
 from stats WHERE status = ('BadAD', 'Lead', 'DNC')
 group by user_name, status) y
 ON y.user_name = stats.user_name
 GROUP BY y.status) w WHERE w.user_name = y.username 
```

My problem: I am trying to add up the values from the `calls` field of rows that only contain a certain `status` field value (`WHERE status = ('BadAD', 'Lead', 'DNC')`) and has the same user_name. So it would look like this.

```
user_name     id      status          calls
===========================================
apple        21       BadAd             13           (BadAd 2 + Lead 5 + DNC 6)
orange       34       Lead              17           (etc..) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:49:45.890

```
select user_name, id, min(status), sum (calls)
from yourtable
where status in  ('BadAD', 'Lead', 'DNC')
group by user_name, id 
```

# jquery - 我正在动态生成样式列表。给一级li加一个类的jquery函数是什么？

> ID：12861521
> 
> 赞同：0
> 
> 时间：2012-10-12T14:44:38.723
> 
> 标签：jquery, css

```
 <ul class ="menu">
  <li>testlevel11
      <ul>
         <li>testleve111</li>
          <li>testleve112</li>
      </ul>
</li>
<li>testlevel12
     <ul>
         <li>testleve121</li>
          <li>testleve122
             <ul>
                <li>testleve1221</li>
                <li>testleve1222</li>
           </ul>
          </li>
    </ul>
</li>
<li>tsetlevel13</li></ul> 
```

我想将 css 类添加到下面列表样式的第一级 li 中。给一级li加一个类的jquery函数是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:46:11.077

您基本上想使用[子选择器](http://api.jquery.com/child-selector/)和 jQuery 的[addClass()](http://api.jquery.com/addClass/)方法来选择 ul 的子 li。

```
jQuery('ul.menu > li').addClass('your-class'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:47:20.397

```
​$('.menu > li').addClass('your-class');​​​​​​​​​​​​​​​​​​​​ 
```

这将为 menu 中的所有顶级`li`s添加一个 'yourClass' 类`ul`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:48:01.693

You can use the jquery selecter `.addClass("your classes")`

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

```
$("ul > li").addClass("classnames seprated by space"); 
```

# mysql - MySQL / InnoDB 有时某些更新运行非常缓慢，处于“正在更新”状态

> ID：12861530
> 
> 赞同：5
> 
> 时间：2012-10-12T14:45:09.080
> 
> 标签：mysql, innodb, percona

我们的数据库中的 UPDATE 性能偶尔会大幅下降。

例如，表 FooTable 我们有大约 40 列带有 varchar PK，此外还有 10 个索引。以下查询耗时 44 秒，而在其他时间几乎是立即运行。在减速期间，服务器上的平均负载非常低（5 分钟平均为 1.5），根据 vmstat 的 IO 也相当合理。

这里有一个例子：

```
mysql> update FooTable set BarColumn=1349981286086 where varcharPK='e4348411-0fbb-460a-80f7-f1de304a9f7c'
Query OK, 1 row affected (44.94 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> show profile for QUERY 1;
+----------------------+-----------+
| Status               | Duration  |
+----------------------+-----------+
| starting             |  0.000030 |
| checking permissions |  0.000004 |
| Opening tables       |  0.000007 |
| System lock          |  0.000003 |
| Table lock           |  0.000003 |
| init                 |  0.000035 |
| Updating             | 44.949727 |
| end                  |  0.000006 |
| query end            |  0.000003 |
| freeing items        |  0.000115 |
| logging slow query   |  0.000002 |
| logging slow query   |  0.000052 |
| cleaning up          |  0.000003 |
+----------------------+-----------+
13 rows in set (0.02 sec) 
```

值得一提的是，上面的示例查询是在不到一周前“重建”(ALTER TABLE FooTable ENGINE=InnoDB;) 的 InnoDB 表上运行的。我最初怀疑这与 InnoDB 已知的 varchar/非顺序 PK 性能问题有关，但是我们有其他使用顺序 PK 的表并且已经看到了相同的问题。

这是在生产服务器上：Centos 5 2.6.18-238.19.1.el5 x86_64 MySQL/Percona 5.1.57-rel12.8-log 96GB 内存，58.8G 数据分布在 87 个表中

相关的 InnoDB 设置如下：

```
innodb_flush_log_at_trx_commit  = 2
innodb_buffer_pool_size         = 70G
innodb_log_file_size            = 512M
innodb_log_buffer_size          = 64M
innodb_file_per_table           = 1
innodb_thread_concurrency       = 0
innodb_flush_method             = O_DIRECT
innodb_read_io_threads          = 64
innodb_write_io_threads         = 64
optimizer_search_depth          = 0
innodb_file_format              = barracuda 
```

我没有在这张桌子上使用 FORMAT=COMPRESSED，但是我在其他桌子上。

关于如何弄清楚需要这么长时间的更新阶段发生了什么的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:44:07.200

根本原因似乎是长时间运行的应用程序事务。解决方案是将大型事务分解为较小的工作单元。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:17:12.953

如何（将 varcharPK 转换为文本和）在 varcharPK 字段上使用哈希索引？

alter table FooTable add KEY `pk_index`( `varcharPK`(100)) USING HASH

我曾经遇到过类似的问题，这有帮助。我不确定它会帮助你。听起来如果您可以拆分表格也会有所帮助-它的数据“太多”。

# c - 从指向类型的指针到指向类型数组的指针的转换是否安全？

> ID：12861532
> 
> 赞同：6
> 
> 时间：2012-10-12T14:45:18.463
> 
> 标签：c, arrays, pointers, type-conversion

几天前，我偶然发现了一个代码，其中大量使用从**指针到类型**到**指针到类型数组的**转换，以提供内存中线性向量的二维视图。为了清楚起见，下面报告了这种技术的一个简单示例：

```
#include <stdio.h>
#include <stdlib.h>

void print_matrix(const unsigned int nrows, const unsigned int ncols, double (*A)[ncols]) {  
  // Here I can access memory using A[ii][jj]
  // instead of A[ii*ncols + jj]
  for(int ii = 0; ii < nrows; ii++) {
    for(int jj = 0; jj < ncols; jj++)
      printf("%4.4g",A[ii][jj]);
    printf("\n");
  }
}

int main() {

  const unsigned int nrows = 10;
  const unsigned int ncols = 20;

  // Here I allocate a portion of memory to which I could access
  // using linear indexing, i.e. A[ii]
  double * A = NULL;
  A = malloc(sizeof(double)*nrows*ncols);

  for (int ii = 0; ii < ncols*nrows; ii++)
    A[ii] = ii;

  print_matrix(nrows,ncols,A);
  printf("\n");
  print_matrix(ncols,nrows,A);

  free(A);
  return 0;
} 
```

鉴于**指向类型的****指针与指向类型数组的指针**不兼容，我想问一下这种转换是否存在风险，或者我是否可以假设这种转换将在任何平台上按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:24:32.063

**更新**：~~删除线部分~~是真的，但无关紧要。

正如我在评论中发布的那样，问题实际上是在二维数组中，子数组（行）是否包含内部填充。~~由于标准将数组定义为连续的，因此每行内肯定没有填充。此外，外部数组不应引入填充。事实上，通过 C 标准扫描，我发现在数组的上下文中没有提到填充，所以我将“连续”解释为意味着在多维数组中的子数组的末尾永远没有任何填充。~~由于`sizeof(array) / sizeof(array[0])`保证返回数组中元素的数量，因此不可能有这样的填充。

这意味着`nrows`行和`ncols`列的多维数组的布局必须与 的一维数组的布局相同`nrows * ncols`。所以，为了避免不兼容的类型错误，你可以这样做

```
void *A = malloc(sizeof(double[nrows][ncols]));
// check for NULL

double *T = A;
for (size_t i=0; i<nrows*ncols; i++)
     T[i] = 0; 
```

然后传递给`print_array`. 这应该避免指针别名的潜在陷阱；不允许不同类型的指针指向同一个数组，除非其中至少有一个具有类型`void*`，`char*`或`unsigned char*`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:40:32.707

C 标准允许将指向对象（或不完整）类型的指针转​​换为指向不同对象（或不完整）类型的指针。

不过有一些注意事项：

*   如果结果指针未正确对齐，则行为未定义。该标准不保证在这种情况下。但实际上，这不太可能。

*   该标准仅规定了结果指针的一种有效用途，即将其转换回原始指针类型。在这种情况下，标准保证后者（转换回原始指针类型的结果指针）将与原始指针进行比较。标准未涵盖将结果指针用于其他任何内容。

*   该标准在执行此类转换时需要显式转换，`print_matrix`您发布的代码中的函数调用中缺少该转换。

因此，根据标准的字母，代码示例中的用法超出了其范围。但在实践中，这可能在大多数平台上都可以正常工作 - 假设编译器允许它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T22:17:48.243

保证多维数组与具有相同元素总数的单维数组具有`T arr[M][N]`相同的**内存布局**`T arr[M * N]`。布局是相同的，因为数组是连续的（6.2.5p20），并且`sizeof array / sizeof array[0]`保证返回数组中元素的数量（6.5.3.4p7）。

但是，这并不意味着将指向类型的指针转​​换为指向类型数组的指针是安全的，反之亦然。首先，**对齐**是一个问题；尽管具有基本对齐类型的数组也必须具有基本对齐（按 6.2.8p2），但不能保证对齐方式相同。因为数组包含基类型的对象，所以数组类型的对齐必须至少与基对象类型的对齐一样严格，但可以更严格（我从未见过这种情况）。*但是，这与分配*的内存无关，因为`malloc`保证返回一个为任何基本对齐（7.22.3p1）适当分配的指针。这确实意味着您不能安全地将指向自动或静态内存的指针转换为数组指针，尽管允许相反：

```
int a[100];
void f() {
    int b[100];
    static int c[100];
    int *d = malloc(sizeof int[100]);
    int (*p)[10] = (int (*)[10]) a;  // possibly incorrectly aligned
    int (*q)[10] = (int (*)[10]) b;  // possibly incorrectly aligned
    int (*r)[10] = (int (*)[10]) c;  // possibly incorrectly aligned
    int (*s)[10] = (int (*)[10]) d;  // OK
}

int A[10][10];
void g() {
    int B[10][10];
    static int C[10][10];
    int (*D)[10] = (int (*)[10]) malloc(sizeof int[10][10]);
    int *p = (int *) A;  // OK
    int *q = (int *) B;  // OK
    int *r = (int *) C;  // OK
    int *s = (int *) D;  // OK
} 
```

接下来，不能保证数组和非数组类型之间的转换实际上会导致指向**正确位置**的指针，因为转换规则（6.3.2.3p7）不包括这种用法。尽管这*极不可能*导致除了指向正确位置的指针之外的任何内容，并且强制转换`char *`确实具有保证的语义。当从指向数组类型的指针转​​到指向基类型的指针时，最好只间接使用指针：

```
void f(int (*p)[10]) {
    int *q = *p;                            // OK
    assert((int (*)[10]) q == p);           // not guaranteed
    assert((int (*)[10]) (char *) q == p);  // OK
} 
```

数组下标的**语义**是什么？众所周知，`[]`操作只是加法和间接的语法糖，所以语义是`+`运算符的语义；正如 6.5.6p8 所描述的，指针操作数必须指向一个数组的成员，该成员足够大，以至于结果落在数组内或刚好超过末尾。这是双向转换的问题；当转换为指向数组类型的指针时，添加**无效**，因为该位置不存在多维数组；并且当转换为指向基类型的指针时，该位置的数组仅具有内部数组绑定的大小：

```
int a[100];
((int (*)[10]) a) + 3;    // invalid - no int[10][N] array

int b[10][10];
(*b) + 3;          // OK
(*b) + 23;         // invalid - out of bounds of int[10] array 
```

这是我们开始看到**常见实现的实际问题的**地方，而不仅仅是理论。因为*优化器*有权假设未定义的行为不会发生，所以可以假设通过基础对象指针访问多维数组不会对第一个内部数组中的元素之外的任何元素进行*别名：*

```
int a[10][10];
void f(int n) {
    for (int i = 0; i < n; ++i)
        (*a)[i] = 2 * a[2][3];
} 
```

优化器可以假设 access`a[2][3]`没有别名`(*a)[i]`并将其提升到循环之外：

```
int a[10][10];
void f_optimised(int n) {
    int intermediate_result = 2 * a[2][3];
    for (int i = 0; i < n; ++i)
        (*a)[i] = intermediate_result;
} 
```

`f`如果用 调用，这当然会产生意想不到的结果`n = 50`。

最后值得一问的是这是否适用于分配的内存。7.22.3p1 规定`malloc`“*可以将返回的指针分配给具有基本对齐要求的任何类型对象的指针，然后用于访问分配的空间中的此类对象或此类对象的数组*”；没有关于进一步将返回的指针转换为另一个对象类型，因此结论是分配的内存的类型由返回的指针转换为的*第一个指针类型***固定**；如果你投到然后你不能进一步投到，如果你投到你只能用来访问第一个元素。*`void``double *``double (*)[n]``double (*)[n]``double *``n`*

 *因此，我想说，如果你想**绝对安全**，你不应该在指针和指向数组类型的指针之间进行转换，即使是相同的基类型。`memcpy`除了通过`char`指针进行的其他访问之外，布局相同的事实是无关紧要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T14:52:39.203

我的第一个想法是 C 在创建 2D 数组时确实使用了该实现——也就是说，它线性地拉伸了内存：

```
[11, 12, 13, 14, 15, 21, 22, 23, 24, 25....] // This is known as ROW-MAJOR form 
```

它在您的代码中的分配方式

```
A = malloc(rows*columns); 
```

因此，我认为这样做没有什么害处，因为 A 是一个指向 double 的指针，而“inner-C”实际上将 A[][] 转换为指向 double 的指针（*注意：指针指针不正确！* *），所以没有区别。

```
* A = malloc ( rows ); for_each_Ai ( Ai = malloc (columns) ); 
```

^ 显然所有代码都是伪代码

关于您的平台无关部分，该代码应该没问题。但是，如果他们也在做其他偷偷摸摸的指针事情，请注意字节序*

# c# - 控制外部对话

> ID：12861535
> 
> 赞同：0
> 
> 时间：2012-10-12T14:45:23.990
> 
> 标签：c#, winforms, printing

这是我正在尝试做的事情：

我的应用程序具有允许将生成的文档传真的功能。此功能将文档打印到在系统中设置为传真打印机的打印机。它是兄弟，打印机名称是 Brother PC-FAX。目前，当启动打印作业时，打印驱动程序会打开一个对话框，用于输入传真号码、封面选项等。存储与文档相关联的传真号码。我正在尝试设置我的应用程序为用户注入传真号码，然后单击“开始”按钮。该对话框有快捷方式，它最初聚焦一个按钮，用户可以按 Shift+TAB 进入数字输入控件，然后接受 Ctrl+V 进行粘贴。然后用户可以按 Alt+O 来激活“开始”按钮。我以前的应用程序版本只是将传真号码复制到剪贴板，并将粘贴和单击操作留给用户，但我正在尝试进一步自动化。我目前的做法是

1.  劫持 WndProc 以回答 WM_ACTIVATE 消息
2.  如果窗口标题是“Brother PC-FAX”，那么
3.  使用 SendKeys.Send() 发送“+{TAB}”、“^V”和“%O”

这将起作用，除非实际传真对话框似乎没有注册为实际窗口，例如，它可能只是打印驱动程序的对话框子窗体。我想出的唯一窗口标题是“打印”框，这是在任何打印机上每次打印时都会弹出的小窗口。这不允许 SendKeys 函数通过。

关于我应该如何处理这个问题的任何想法？如果驱动程序具有允许自定义命令调用的 SDK，那就太好了，但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:38:05.117

想通了，至少我想出了“A”方法。如果有人有更好或更有效的想法，请告诉我，但这是我解决它的方法：

1.  在打印操作中，将剪贴板文本设置为传真号码
2.  创建后台工作者来处理打印
3.  启动后台打印作业后，让当前线程休眠 5 秒，让传真对话有时间到达前面和中心
4.  对“+{TAB}”和“^V”命令使用 SendKeys.SendWait 命令，然后对最终的“%O”命令使用 SendKeys.Send

这行得通，但是如果系统性能下降导致打印作业变慢，超过 5 秒的睡眠周期，我可以看到问题。这个周期可以增加，但也许还有更好的方法？

# iphone - 在 Safari iPhone 上保持自动播放 mp4 视频？（不是全屏）

> ID：12861536
> 
> 赞同：1
> 
> 时间：2012-10-12T14:45:23.777
> 
> 标签：iphone, mp4

在我的网站上，我有一个嵌入的 mp4 视频，它应该在加载后自动播放。这适用于 iPhone Safari，一旦视频加载，它会全屏显示并遮盖网站的其余部分，直到播放完毕，然后它会缩小以再次显示该网站。

有没有办法让视频在它在桌面和 iPad 上使用的同一个屏幕矩形内播放——我的 HTML 指定的那个——而不是全屏播放？

谢谢鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:51:03.560

不，在 iPhone 上的移动 Safari 中播放的视频将始终全屏显示。

# php - PHP脚本在CLI模式下不能exit()

> ID：12861539
> 
> 赞同：2
> 
> 时间：2012-10-12T14:45:31.617
> 
> 标签：php

我有一个 crontab 脚本，它由 run-parts 每 10 分钟执行一次

```
sudo -u www php -f /path/to/parser.php crawl_content1 >> /tmp/job_1.log 2>&1 &
sudo -u www php -f /path/to/parser.php crawl_content2 >> /tmp/job_2.log 2>&1 & 
```

我的 parser.php 包含以下代码

```
$max_execute_time = time() + 9*60;
while(true)
{
   //... do something ...
   if(time() >= $max_execute_time)
   {
       echo "time out!";
       exit;
   }
} 
```

我的问题是**退出**部分。退出后，脚本仍以 10% 的 CPU 和 25% 的内存 (512MB) 运行。在我将出口更改为中断后，问题解决了。

有谁知道这有什么问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:20:24.610

这是一个切线的响应，但我觉得奇怪的是你实现了自己的最大执行计时器，而 PHP*至少有三种方法可以为你做这件事*（节省你在脚本中自己计算的麻烦和 CPU 周期）：

```
sudo -u www php -d max_execution_time=30s -f /path/to/parser.php crawl_content1 >> /tmp/job_1.log 2>&1 & 
```

或者，在脚本的顶部：

```
ini_set('max_execution_time', 30); 
```

或同等学历）：

```
set_time_limit(30); 
```

（您也可以修改`php.ini`，但可以理解的是，您可能不想这样做。）

我只建议这样做，因为您的实现会终止您的*整个脚本*；在其他情况下，循环的执行时间可能会在不终止脚本的情况下受到合法限制。

# python - python 2.7 os.path.dirname(__file__) 在 Debian 上返回空字符串（在 Win7 上工作正常）

> ID：12861540
> 
> 赞同：0
> 
> 时间：2012-10-12T14:45:34.440
> 
> 标签：python, debian

> **可能重复：**
> [os.path.dirname(__file__) 返回空](https://stackoverflow.com/questions/7783308/os-path-dirname-file-returns-empty)

这是我的一段代码：

```
def GetAppPath():
    application_path = None
    if getattr(sys, 'frozen', False):
        application_path = os.path.dirname(sys.executable)
    elif __file__:
        application_path = os.path.dirname(__file__)
    return application_path 
```

在 Windows 上完美运行，但在 Debian 上返回空字符串。任何想法可能是什么问题？

我正在使用 Python 2.7.3、Debian 6.0.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:21:46.327

在 Ubuntu 12.04/python 2.7 上为我工作：

```
import os.path

print os.path.dirname(__file__) 
```

存储在 /tmp/foo.py 然后运行它：

```
$ python /tmp/foo.py 
/tmp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:09:27.847

似乎 __file__ 没有定义或定义不正确，适用于 Debian 测试，Python 2.7.3rc2

```
 def GetAppPath(file):
        application_path = os.path.dirname(file)
        return application_path 
```

GetAppPath('/etc/X11/xorg.conf') 返回 '/etc/X11'

# asp.net-mvc - 更改路由的默认参数名称

> ID：12861541
> 
> 赞同：0
> 
> 时间：2012-10-12T14:45:35.043
> 
> 标签：asp.net-mvc, asp.net-mvc-3, routing

我曾经保留默认路由，但一次冲突导致我将默认参数更改`id`为`paramid`.

通常，我在视图中使用这样的代码：

```
@Url.Action("Edit", "Suivis", new {o.ID}) 
```

这在控制器中：

```
public ActionResult Edit(int id) { ... } 
```

但它不再起作用了，它迫使我使用：

```
@Url.Action("Edit", "Suivis", new {paramid = o.ID}) 
```

这是我的控制器中的代码：

```
public ActionResult Edit(int paramidid) { ... } 
```

我的问题是：为什么我现在必须在视图中指定参数名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:00:31.037

在您的原始操作中：

```
@Url.Action("Edit", "Suivis", new {o.ID}) 
```

正在创建具有相同名称 (ID) 的匿名类型。由于您必须将路由所期望的 ID 参数更改为 paramid - 当您尝试传入 o.ID（转换为新的 {ID = o.ID}）时，路由不匹配，因为它是寻找帕拉米德。

如果它是视图模型，则可以将属性更改为 paramid -

```
@Url.Action("Edit", "Suivis", new {o.paramid}) 
```

它会再次起作用 - 但这可能比它的价值更麻烦。

# android - 安卓图像滑块

> ID：12861542
> 
> 赞同：0
> 
> 时间：2012-10-12T14:45:39.797
> 
> 标签：android, image, slider, gallery, viewflipper

我正在寻找一种方法来构建类似于 ViewFlipper 的图像滑块 - 用户通过用手指向左或向右滑动来导航图像。ViewFlipper 的问题在于，当我从 Web 下载大量图像时，应用程序的内存不足。我还使用 AsyncTask 将图像加载到 ViewFlipper 中，但我觉得我需要做很多复杂的工作才能使这项工作像我想象的那样工作。是否已经有针对此类问题的解决方案，我可以在我的应用程序中修改和实施？

这是我目前拥有的：

```
package com.example.viewflippertest;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.HashMap;
import java.util.Map;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.ViewFlipper;

public class MainActivity extends Activity {

    private ViewFlipper vf; 
    private float lastX;

    public String[] photos = {
            "http://ilijaveselica.com/Uploads/Photos/538.jpg",
            "http://ilijaveselica.com/Uploads/Photos/528.jpg",
            "http://ilijaveselica.com/Uploads/Photos/541.jpg",
            "http://ilijaveselica.com/Uploads/Photos/542.jpg",
            "http://ilijaveselica.com/Uploads/Photos/543.jpg",
            "http://ilijaveselica.com/Uploads/Photos/544.jpg",
            "http://ilijaveselica.com/Uploads/Photos/514.jpg",
            "http://ilijaveselica.com/Uploads/Photos/511.jpg",          
            "http://ilijaveselica.com/Uploads/Photos/545.jpg"
    }; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);        

        vf = (ViewFlipper) findViewById(R.id.view_flipper);  

        new BackgroundAsyncTask().execute();   

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public boolean onTouchEvent(MotionEvent touchevent) {

        switch (touchevent.getAction())
        {
            case MotionEvent.ACTION_DOWN:
            {
                lastX = touchevent.getX();
                break;
            }

            case MotionEvent.ACTION_UP:
            {
                float currentX = touchevent.getX();

                if (lastX < currentX)
                {
                    if (vf.getDisplayedChild()==0)
                        break;

                    vf.setInAnimation(this, R.anim.in_from_left);
                    vf.setOutAnimation(this, R.anim.out_to_right);
                    vf.showPrevious();
                }

                if (lastX > currentX)
                {
                    if (vf.getDisplayedChild()==vf.getChildCount()-1)
                        break;

                    vf.setInAnimation(this, R.anim.in_from_right);
                    vf.setOutAnimation(this, R.anim.out_to_left);
                    vf.showNext();
                }

                break;
            }

            case MotionEvent.ACTION_MOVE:
            {
                float tempX = touchevent.getX();
                int scrollX = (int) (tempX - lastX);

                //vf.scrollBy(scrollX, 0);

                break;
            }

        }

        return false;
    }

    public static Object fetch(String address) throws MalformedURLException,
    IOException {
        URL url = new URL(address);
        Object content = url.getContent();
        return content;
    }  

    public static Drawable ImageOperations(String url) {
        try {
            InputStream is = (InputStream) fetch(url);
            Drawable d = Drawable.createFromStream(is, "src");
            return d;
        } catch (MalformedURLException e) {
            return null;
        } catch (IOException e) {
            return null;
        }
    }

    private class BackgroundAsyncTask extends AsyncTask<Integer, Integer, Integer> {

        Map<String,Drawable> imagesMap = new HashMap<String, Drawable>();  
        int photosCounter = 0;

            @Override
           protected void onPreExecute() {
            // TODO Auto-generated method stub
            //myProgress = 0;
           }

           @Override
           protected void onProgressUpdate(Integer... values) {
            // TODO Auto-generated method stub
            //progressBar.setProgress(values[0]);
           }

            @SuppressLint({ "NewApi", "NewApi" })
            @Override
            protected Integer doInBackground(Integer... params) {

                StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
                StrictMode.setThreadPolicy(policy);             

                // TODO Auto-generated method stub

                final ProgressBar spinner = (ProgressBar) findViewById(R.id.spinner);

                for(int i=0;i<photos.length;i++)
                {                   
                    Drawable image =ImageOperations(photos[i]);                 

                    imagesMap.put(String.valueOf(i), image);

                    photosCounter++;

                    if(i == 2)
                        break;  
                }

                spinner.getHandler().post(new Runnable() {
                    public void run() {
                        spinner.setVisibility(View.GONE);
                    }
                });

                return null;
            }

            protected void onPostExecute(Integer result) {
                // TODO Auto-generated method stub

                for(int i=0;i<photosCounter;i++)
                {                   
                    final ImageView imageView = new ImageView(getApplicationContext());
                    imageView.setImageDrawable(imagesMap.get(String.valueOf(i)));

                    vf.addView(imageView);  
                }   

            }

       }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:52:44.107

您应该在下面的链接中有效地加载您的位图，提供完整的指导，如何有效地从网络下载图像

[http://developer.android.com/training/displaying-bitmaps/process-bitmap.html](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:53:57.770

您需要缓存并可能调整图像大小，请参阅：

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

一个完整的例子。

# multilingual - Opencart：多语言横幅

> ID：12861546
> 
> 赞同：0
> 
> 时间：2012-10-12T14:45:46.037
> 
> 标签：multilingual, opencart

我有一个具有多种语言的 Opencart 商店。横幅只能包含一张图片（与选择的语言无关），但我们为每种语言设计横幅。

有没有办法我可以做到这一点？我不介意黑客（我可以更改/编程任何文件，我不在乎），但我希望我的用户能够上传多张照片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:32:54.990

试试这个 opencart 插件，它有手动安装选项和 vqmod 选项，我试过了，它可以工作。

[http://www.opencart.com/index.php?route=extension/extension/info&extension_id=6451](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=6451)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T16:17:11.377

您还可以尝试新的多语言横幅。它也是免费的，新的，做它的工作，并支持新版本 1.5.6。您可以在两个地方找到它，自己的 opencart 模块部分[http://www.opencart.com/index.php?route=extension/extension/info&extension_id=15049&sort=e.date_added&order=DESC&page=2](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=15049&sort=e.date_added&order=DESC&page=2)或在创建者的网页[http ://www.alzoco.com/BannerMultiLanguage](http://www.alzoco.com/BannerMultiLanguage)。它只有手动安装。

# php - 使用 jquery 发布请求到同一页面

> ID：12861552
> 
> 赞同：0
> 
> 时间：2012-10-12T14:46:01.707
> 
> 标签：php, javascript, jquery

我正在尝试通过对当前页面发出的发布请求将值“hi”发送到 php 变量“text”。

jQuery

```
$.post("", "hi"); 
```

php

```
if (isset($_POST['POST'])) {
  $text = $_POST['POST'];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:49:27.677

JS：

```
$.post("", {data:"hi"},function(data){

}); 
```

PHP：

```
if (isset($_POST['data'])) {
  $text = $_POST['data'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:48:41.317

像这样做：

```
$.post("", "text=hi");// You have to pass "key=value" pairs 
```

在 PHP 中：

```
if (isset($_POST['text'])) {
  $text = $_POST['text']; //$text will contain 'hi'
} 
```

# android - ListView OnFocusChangeListener

> ID：12861554
> 
> 赞同：3
> 
> 时间：2012-10-12T14:46:09.120
> 
> 标签：android, android-listview, focus

我在 ListFragment 中有一个 ListView，当用户更改列表中的焦点项目时，我想更改片段的背景。我在这里特别说焦点，因为这是一个谷歌电视应用程序，所以我的目标是 dpad 控件和项目选择做其他事情。

问题是，当列表项焦点发生变化时，如何获得通知或回调，类似于 onListItemClick，但焦点？当适配器创建它时，我尝试在行视图上设置 OnFocusChangeListener 但似乎从未被调用过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:45:06.467

`onItemSelected`相反，当 listView 中的一个项目被选中时，这将被调用。

```
listview.setOnItemSelectedListener(new OnItemSelectedListener(){
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id){
        //do stuff here       
    }
}); 
```

当用户使用方向控件导航列表视图时（例如使用 d-pad 导航列表时），应使用选定状态。在这种情况下，listView 将获得焦点状态，其中的 listItems 将获得选中状态。有关状态的更多信息，请参阅[此](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

# java - Java 射击游戏移除子弹对象

> ID：12861556
> 
> 赞同：0
> 
> 时间：2012-10-12T14:46:13.560
> 
> 标签：java, arrays, object

我有一个射击游戏，当按下空格键时，会创建一个子弹对象。当子弹对象在屏幕之外时，我想删除该对象，以便可以射击 10 次以上。

实例化：

```
Shot[] shot = new Shot[10]; 
```

空格条码：

```
if (key == KeyEvent.VK_SPACE) {
    if (shots < maxShots) {
        if (canShoot) {
            shot[shots] = new Shot(player.x, player.y, player.width, player.height, shotDir);
            shots++;
            canShoot = false;
        }
    }
} 
```

绘图代码：

```
for (int i = 0; i < shots; i++) {
    if (shot[i].active) {
        shot[i].drawShot(g);
    }
} 
```

我要删除镜头的地方：

```
for (int i = 0; i < shots; i++) {
    shot[i].shotLoop();
    if (shot[i].outOfBounds(WINDOW_SIZE.width, WINDOW_SIZE.height)) {
        // Delete Bullet
        shot[i].active = false;
    }
} 
```

我试图这样做，`shots--;`但是当一个镜头离开屏幕时，当前屏幕上的所有镜头都被删除。有什么建议么？

这是`shot[i].outOfBounds()`代码

```
public boolean outOfBounds(int screenx, int screeny) {
    if (x < 0 || x > screenx || y < 0 || y > screeny) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:53:33.870

改用[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)以便在超出范围时将其从列表中删除？

```
ArrayList<Shot> shot = new ArrayList<Shot>(); 
```

[ArrayList.remove(int index)](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#remove%28int%29)

您不应该在迭代时删除，因此您可能必须存储对象（或对象本身）的索引并在找到要删除的项目符号后删除它们。

此外，如果您只想要 10 个，您可以将容量设置为 10 个，并监控大小以确保它不会超出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-01T13:43:14.130

```
class Weapon
{
    private ArrayList<Shot> magazine;

    private int maxShots;

    private double rotationAngle = 90;
    private double rotationSpeed = 1.5;

    public Weapon(int maxShots)
    {
        this.maxShots = maxShots;

        magazine = new ArrayList<Shot>(maxShots);
    }

    public void rotate(int direction)
    {
        // no need to create hashamp etc to hold "left" or "right"
        // when passing keyPressed, KeyeEvent.getKeyCode is enough.

        // i see alot of people having separate if statements,
        // why, i dont know when you can only go in one
        // direction at a time!

        // also of note, most people wrongly assume that
        // either left or right will be passed, hence, if/else
        // statements.  use "if/else if" to guarantee only 
        // left or right

        if (direction == KeyEvent.VK_LEFT)
        {
            angle-=speed;
        }
        else if (direction == KeyEvent.VK_RIGHT) 
        {
            angle+=speed;
        }
    }

    public void draw(Graphics2D g2, Dimension boundary)
    {
        // do NOT check if shot is out of bounds here,
        // the only thing that should be done in draw,
        // is draw!
    }

    public Iterator<Shot> getMagazine()
    {
        // by returning the iterator, you guarantee
        // concurrency i.e preventing concurrent modifications
        // to data, for example, drawing shots, moving shots
        // and removing them

        return magazine.iterator();
    }

    public void shoot()
    {
        double radian = Math.toRadians(-angle); // invert angle

        double x = [center x] + ([length of weapon] * Math.cos(radian))-[your shot diameter];
        double y = [center y] + ([length of weapon] * Math.sin(radian))-[your shot diameter];

        if (magazine.size() < capacity)
        {
            magazine.add(new Shot(x,y,radian));
        }
    }
}

class Shot extends Ellipse2D.Double
{
    Point2D.Double point;
    Point2D.Double velocity;

    double shotSpeed = 10;

    public Shot(Point2D.Double origin, double radian)
    {
        velocity = new Point2D.Double(Math.cos(radian)*shotSpeed,Math.sin(radian)*shotSpeed);

        point = new Point2D.Double(origin.x+velocity.x,origin.y+velocity.y);

        setFrame(point.x,point.y,[shot diameter],[shot diameter]);
    }

    public void draw(Graphics2D g2)
    {
        g2.setColor(Color.pink);
        g2.fill(this);
    }

    public void move()
    {
        point.x+=velocity.x;
        point.y+=velocity.y;

        setFrame(point.x,point.y,[shot diameter],[shot diameter]);
    }
}

// use javax.swing.Timer to update/paint instead is 
// while(true) with a Thread.sleep.  it allows for stopping and 
// restarting without creating additional objects

public void actionPerformed(ActionEvent event)
{
    // check for rotation......

    // check for shots fired....

    // iterator is faster than conditional loops
    Iterator<Shot> iterator = weapon.getMagazine();

    while(iterator.hasNext())
    {
        Shot shot = iterator.next();

        // getBounds() is the bounds of your panel
        // shot.getBounds() is an inherited method of
        // Ellipse2D.Double

        // use java.awt.geom.RectangleShape.contains(Rectangle) method
        if (getBounds().contains(shot.getBounds()))
        {
            // if the shot is within the rectangle, move it
            shot.move(); 
        }
        else
        {
            iterator.remove();
        }
    }

    // collision detection etc...

    repaint();
} 
```

# c# - 循环中的 Lambda 变量捕获 - 这里会发生什么？

> ID：12861560
> 
> 赞同：5
> 
> 时间：2012-10-12T14:46:27.740
> 
> 标签：c#, .net, lambda

我正在努力解决问题，这里会发生什么？编译器生成什么样的代码？

```
public static void vc()
{
    var listActions = new List<Action>();

    foreach (int i in Enumerable.Range(1, 10))
    {
        listActions.Add(() => Console.WriteLine(i));
    }

    foreach (Action action in listActions)
    {
        action();
    }
}

static void Main(string[] args)
{ 
  vc();
} 
```

*输出：* 10 10 .. 10

据此[，](https://stackoverflow.com/questions/5438307/detailed-explanation-of-variable-capture-in-closures)每次迭代都会创建一个新的 ActionHelper 实例。所以在那种情况下，我认为它应该打印 1..10。有人可以给我一些编译器在这里做什么的伪代码吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T14:50:34.220

在这一行

```
 listActions.Add(() => Console.WriteLine(i)); 
```

变量`i`, 被捕获，或者如果您愿意，可以创建一个**指向**该变量的内存位置的指针。这意味着**每个**委托都有一个*指向*该内存位置的指针。在这个循环执行之后：

```
foreach (int i in Enumerable.Range(1, 10))
{
    listActions.Add(() => Console.WriteLine(i));
} 
```

显而易见的原因`i`是，因此(s) 中`10`存在的所有指针所指向的内存内容变为 10。`Action`

换句话说，`i`被捕获。

**顺便说一句，应该注意的是，根据 Eric Lippert**的说法，这种“奇怪”的行为将 在`C# 5.0`.

因此，在`C# 5.0`您的程序中将按*预期*打印：

```
1,2,3,4,5...10 
```

编辑：

找不到 Eric Lippert 关于主题的帖子，但这里有另一个：

[重新审视循环中的闭包](http://deploytonenyures.blogspot.it/2012/05/closure-in-loop-revisited-c-50.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-12T14:55:33.657

> 编译器生成什么样的代码？

听起来你期望这样：

```
foreach (int temp in Enumerable.Range(1, 10))
{
    int i = temp;
    listActions.Add(() => Console.WriteLine(i));
} 
```

每次迭代都使用*不同*的变量，因此将捕获创建 lambda 时的变量值。事实上，您可以使用这个确切的代码并获得您想要的结果。

但是编译器实际上做的是更接近于这个：

```
int i;
foreach (i in Enumerable.Range(1, 10))
{
    listActions.Add(() => Console.WriteLine(i));
} 
```

这清楚地表明您在每次迭代中都捕获了*相同的变量。*当您稍后实际执行该代码时，它们都引用了已递增到 10的*相同值。*

这**不是**编译器或运行时中的错误......这是语言设计团队有意识的决定。但是，由于对它的工作原理感到困惑，他们改变了该决定，并[决定冒险进行重大更改，以使其更像您对 C# 5 的预期那样工作](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:51:13.793

本质上，正在发生的事情是编译器将您声明`int i`在循环之外，因此不会为每个操作创建一个新的值，而只是每次都引用同一个。当你执行代码时，我是 10，所以它打印了很多 10。

# java - jar 文件中 EntityManagerFactory 的 Persistence.xml 文件

> ID：12861562
> 
> 赞同：1
> 
> 时间：2012-10-12T14:46:37.980
> 
> 标签：java, entitymanager

有没有办法将persistence.xml 文件的内容放到调用EntityManagerFactory 的源代码中？我尝试构建一个包含 persistence.xml 的项目，但是当我从另一个项目调用它时，我总是收到此错误：

```
[PersistenceException: No Persistence provider for EntityManager named cassandra_pu] 
```

我还提取了 jar 文件以检查是否包含 xml 文件，它包含在 WEB-INF 文件夹中。对我来说这真的很奇怪，因为persistence.xml已经在jar文件中，为什么它一直要求xml文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:50:42.597

persistence.xml 文件必须位于类路径的根目录中。WEB-INF 不在类路径的根目录中。如果你想把它放在一个 .jar 文件中，把它放在 WEB-INF/lib 中，如果你想把它放在一个 .jar 文件之外，把它放在 WEB-INF/classes 中。如果您使用 JPA2，则不再需要该文件。

# c# - 在系统时钟中每隔一小时引发一个事件

> ID：12861563
> 
> 赞同：0
> 
> 时间：2012-10-12T14:46:46.533
> 
> 标签：c#

我想在系统时钟中每个小时过去时引发一个事件。例如，我在早上 7:45 运行我的程序，那么应该在早上 8:00 而不是早上 8:45 提出事件。在上午 8:00 发起活动后，则应在上午 9:00、上午 10:00、上午 11:00 等每小时发起一次...

谁能帮我展示一些代码...我使用 C#.net...在此先感谢...

**更新：**

现在我得到了我的问题的简单解决方案。因此，我想分享这个解决方案。lboshuizen 的回答已经是正确的了。我的回答与 lbohuizen 的回答逻辑相同，但更详细和准确。

首先它需要使用定时器。计时器基本上基于毫秒工作，有时需要额外计算。因此，我想首先实现毫秒到分钟的格式化功能。

```
int CalculateMillisecondUntilNextHour()
{
     int REMAIN_MINUTE = 60 - DateTime.Now.Minute;
     DateTime now = DateTime.Now;
     DateTime nexthour = now.AddMinutes((minute)).AddSeconds(now.Second * -1).AddMilliseconds(now.Millisecond * -1);

     TimeSpan interval = nexthour - now;
     return (int)interval.TotalMilliseconds;
}

void CheckEachHourPassed()
{
     System.Windows.Forms.Timer t = new System.Windows.Forms.Timer();
     t.Interval = CalculateMillisecondUntilNextHour();
     t.Tick += new EventHandler(t_Tick);
     t.Enabled = true;
}

void t_Tick(object sender, EventArgs e)
{
     MessageBox.Show("Raise Your Event");
     t.Interval = CalculateTimerInterval(REMAIN_MINUTE);
} 
```

在这里，主要的工作函数是 CheckEachHourPassed()。在要启动事件调度程序的地方调用此函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:48:16.110

您可以`Timer`通过固定`Interval`属性使用

链接：http: [//msdn.microsoft.com/fr-fr/library/system.timers.timer.aspx](http://msdn.microsoft.com/fr-fr/library/system.timers.timer.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:59:37.110

伪代码（*实现留给读者练习*）

```
var currentTime = Time.Now()
var deltaMinutes  = Calculate_minutes_till_next_full_hour(currentTime);
wait(deltaMinutes);
var timer = new timer();
timer.Every().Minutes(60).Execute(() => Code()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T21:01:12.347

问题是，

```
timer.Every().Minutes(60).Execute(() => Code()); 
```

随着时间的推移，实际上可能与实时不同步。

如何在线程中运行它

```
var lastMoment = DateTime.Now;
while(true)
   if(DateTime.Now.Hour != lastMoment.Hour)
   {
       //Raise ElaspedHourEvent
       //Thread.Sleep(1000);
   ] 
```

它可能最多在一小时后的一秒钟内触发事件，但至少它不会不同步。

# jquery - 为每个指定字符添加换行符的最佳方法？(asp.net)

> ID：12861566
> 
> 赞同：6
> 
> 时间：2012-10-12T14:46:54.080
> 
> 标签：jquery, asp.net, css, gridview, line-breaks

我无法在我的 asp.net 站点上的特定字符上出现换行符。我有一个带有“权利”列/字段的用户帐户的gridview，其中数据是通过管道输入的，如下所示：

'管理员|交易者|支持|销售'

我知道这不是最好的数据架构，但它必须暂时保持这种状态，直到我们在数据库中添加一个权利表。

现在，我想在实际的 gridview 中显示的是：

管理员
交易员
支持
销售

换句话说，我想用换行符替换每个管道，或者至少在每个管道处添加一个换行符，以便每个权利都在单独的行上。

有没有办法在我的 CSS 类中做到这一点？我查看了不同的属性，例如空格、文本溢出和自动换行，但到目前为止，我还没有找到任何可以说“在出现*此*字符时换行”的任何内容。我想我可以使用 jQuery 来做到这一点，但似乎应该有一个更简单的解决方案。

如果jQuery*是*要走的路，那么一个例子将不胜感激，因为我是jQuery的新手。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T14:52:46.887

一种可能的解决方案：

```
var orig = $('#menu').html();
$('#menu').html(orig.replace(/\|/g,'<br />'));​ 
```

[演示](http://jsfiddle.net/BgM7A/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:54:17.333

您可以通过多种方式进行操作。

在数据库中：

```
SELECT REPLACE(entitlements, '|', '<br/>') 
```

在 jQuery 中：

```
$('.entitlements').each(function(){
    var $obj = $(this);
    var txt = $obj.text();
    $obj.html(txt.replace(/|/g, '<br/>'))
}); 
```

在 asp.net 中：

```
<%# FormatEntitlements(Eval("Entitlements"))%>

public static string FormatEntitlements(string entitlements)
{
    return (entitlements ?? "").Replace("|", "<br/>");
} 
```

# apache - mod_rewrite 基于最后一段，上面有任意数量的文件夹

> ID：12861567
> 
> 赞同：0
> 
> 时间：2012-10-12T14:46:55.853
> 
> 标签：apache, mod-rewrite, redirect, url-rewriting, apache2

我正在将旧站点迁移到新站点，并且需要大量 url 重定向/重写。

例如，我需要将**/old_page**重定向到**/** new_page问题是 /old_page 上面可以有任意数量的 url 段，例如**/some/other/section/old_page**

目前我必须使用以下两条规则：

```
RewriteRule ^old_page/?$ /new_page? [R=permanent,L]
RewriteRule ^(.*)/old_page/?$ /new_page? [R=permanent,L] 
```

无论如何，只要一条规则就可以实现这一目标吗？我确实尝试过使用这个：

```
RewriteRule ^(.*)/?old_page/?$ /new_page? [R=permanent,L] 
```

但这会导致意外匹配，例如 /do_not_move_old_page 也会被重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:32:24.080

尝试：

```
RewriteRule ^(.*/)?old_page/?$ /new_page? [R=permanent,L] 
```

# bash - 如何将一对值/错误从 value+-error 格式更改为 value(error) 格式？

> ID：12861569
> 
> 赞同：0
> 
> 时间：2012-10-12T14:46:56.163
> 
> 标签：bash, printf, numeric, bc

我有一些数据文本文件，其行是带有错误的值，如下所示：

```
...
6  90.3785794742981 0.0952997386139722
40 1028.46336161948 4.41798447319325
... 
```

第三列是相对于第二列的误差。我想编写一个脚本，以更易于阅读的格式打印它们，即打印具有正确数量有效数字的值并在括号之间的最后两个数字上打印错误，如下所示：

```
...
6  90.379(95)
40 1028.5(4.4)
... 
```

使用正则表达式来提取数字将无法正常工作，因为处理点有困难，并且因为它会截断数字而不是近似它们，所以我认为我宁愿用 . 检索它们的大小`printf`并用`bc`.

我为此编写的代码如下

```
#! /bin/bash
while read a v verr
do
    ov=`printf %e $v`
    ov=${ov/*e/}
    overr=`printf "%e" $verr`
    overr=${overr/*e/}
dov=$((1-$overr))
v=`echo "scale=0;$v*10^($dov)" | bc -l`
v=`printf %.0f $v`
printf "$a %f(%.0f)\n" `echo "lenght=length($v);$v*10^($((-$dov)))" | bc -l` `echo "$verr*10^($dov)" | bc -l`
 done < myfile.txt 
```

我得到的是

```
6 90.379000(95)
40 1028.500000(44) 
```

我的代码几乎可以工作，除了那些尾随零的出现。

我该如何摆脱它们？仅仅削减它们是不好的，因为它们的数字不是固定的，并且无论最后一个数字实际上是否为零，都将它们全部削减都会产生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:47:22.367

如果您可以使用 sed 命令，则可以在 printf 之后添加 sed 语句以删除尾随零：

```
printf "$a %f(%.0f)\n" `echo "lenght=length($v);$v*10^($((-$dov)))" | bc -l` `echo "$verr*10^($dov)" | bc -l` | sed 's/00*(/(/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:20:29.073

以下代码有效。

```
#! /bin/bash
while read a v verr
do
ov=`printf %e $v`
    ov=${ov/*e/}
    overr=`printf %e $verr`
overr=${overr/*e/}
dov=$((1-$overr))
v=`echo "scale=0;$v*10^($dov)" | bc -l`
v=`printf %.0f $v`

if [ $dov -gt 0 ]; then
    # remember bc doesn't understand numbers in scientific notation,
    # therefore we need to convert such numbers in regular notation.
    u=`echo ${u} | sed 's/[eE]/\\*10\\^/' | sed 's/+//'`
    verr=`echo ${verr} | sed 's/[eE]/\\*10\\^/' | sed 's/+//'`

    u=`echo "$v*10^($((-$dov)))" | bc -l`
    if [ $overr -eq 0 ]; then
    uerr=`echo "$verr*10^($dov - 1)" | bc -l`
    printf "$a\t%.${dov}f(%.1f)\n" $u $uerr>>$s
    else
    uerr=`echo "$verr*10^($dov)" | bc -l`
    printf "$a\t%.${dov}f(%.0f)\n" $u $uerr>>$s
    fi
else
    echo $a "${v}(${verr})E$ov">>$s
fi
done < $f 
```

它打印我想要格式化的值。第一种情况测试是否需要以指数表示法来表示结果以便获得正确的有效数字，第二种情况测试是否应该在错误中添加一个点。

我没有测试底部的第三行代码，因为我现在不需要它，所以要小心，因为它可能不起作用。

编辑：我插入了两个 sed 调用来处理科学记数法数字。

# jquery - 禁用外部点击fancybox弹出窗口

> ID：12861570
> 
> 赞同：0
> 
> 时间：2012-10-12T14:46:59.997
> 
> 标签：jquery, fancybox

禁用外部点击fancybox弹出窗口

如何禁用弹出 div 外的关闭按钮

使用：

[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:01:04.613

将模态设置为 true 以在单击模态 div 外部时禁用关闭

```
$('.fancybox').fancybox({
            modal :  true
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:50:10.193

```
closeBtn     
  If set to true, close button will be displayed    
  Boolean; Default value: true 
```

[阅读文档](http://fancyapps.com/fancybox/#docs)

# java - 使用 AsynTask 上传图片不成功

> ID：12861572
> 
> 赞同：2
> 
> 时间：2012-10-12T14:47:08.230
> 
> 标签：java, android, upload, android-asynctask

我想使用 AsnycTask 在 Parse 服务器上上传图像。当我在不使用 AsyncTask 的情况下上传图像时，我成功上传并可以检索图像。我想使用 AsyncTask ，因为在我的应用程序中，有两个活动正在使用网络权限，或者如果有人有其他解决方案可以做到这一点，请告诉我。活动代码：

```
package com.example.faceb;

import java.io.ByteArrayOutputStream;
import java.io.File;
import com.parse.GetDataCallback;
import com.parse.ParseException;
import com.parse.ParseFile;
import com.parse.ParseObject;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class ListActivity extends Activity {

    ImageView image;
    TextView value;

    public Bitmap bm;
    public byte[] bitmapdata;
    public ByteArrayOutputStream data;
    String s =  "FileName";

    public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list);
    uploadTask task = new uploadTask();
    task.execute(s);

}

private class uploadTask extends AsyncTask<String, Void, String>{

      @Override
        protected void onPostExecute(String result) {
          image.setImageBitmap(bm);
        }

    @Override
    protected String doInBackground(String... params) {
         upload();
        return null;
    }

      }
 public void upload (){
 bm = BitmapFactory.decodeResource(getResources(), R.drawable.back);
    data = new ByteArrayOutputStream();
    bm.compress(Bitmap.CompressFormat.JPEG, 40, data);
    bitmapdata = data.toByteArray();

    ParseFile file = new ParseFile("hai.png", bitmapdata);
    file.saveInBackground();

    ParseObject testObject = new ParseObject("TestObject");
    testObject.put("puu", file);
    testObject.saveInBackground();      

  }
} 
```

以下是我的错误日志

> 10-12 01:10:46.944：E/ActivityThread(2233)：无法找到 com.facebook.katana.provider.AttributionIdProvider 的提供者信息 10-12 01:11:07.604：E/AndroidRuntime(2233)：致命异常：主要 10-12 01:11:07.604: E/AndroidRuntime(2233): java.lang.NullPointerException 10-12 01:11:07.604: E/AndroidRuntime(2233): 在 com.example.faceb.ListActivity$uploadTask.onPostExecute (ListActivity.java:44) 10-12 01:11:07.604: E/AndroidRuntime(2233): 在 com.example.faceb.ListActivity$uploadTask.onPostExecute(ListActivity.java:1) 10-12 01:11:07.604 : E/AndroidRuntime(2233): 在 android.os.AsyncTask.finish(AsyncTask.java:417) 10-12 01:11:07.604: E/AndroidRuntime(2233): 在 android.os.AsyncTask.access$300(AsyncTask .java:127) 10-12 01:11:07.604: E/AndroidRuntime(2233): 在 android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429) 10-12 01:11:07.604: E/AndroidRuntime(2233): 在 android.os.Handler.dispatchMessage(Handler.java:99) 10-12 01:11:07.604: E/AndroidRuntime(2233): 在android.os.Looper.loop(Looper.java:123) 10-12 01:11:07.604: E/AndroidRuntime(2233): 在 android.app.ActivityThread.main(ActivityThread.java:4627) 10-12 01: 11:07.604: E/AndroidRuntime(2233): 在 java.lang.reflect.Method.invokeNative(Native Method) 10-12 01:11:07.604: E/AndroidRuntime(2233): 在 java.lang.reflect.Method。调用（Method.java:521）10-12 01:11:07.604：E/AndroidRuntime（2233）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run（ZygoteInit.java:868）10-12 01： 11:07.604: E/AndroidRuntime(2233): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 10-12 01:11:07.604: E/AndroidRuntime(2233): 在 dalvik.system .NativeStart。main（本机方法）10-12 01:11:09.014：E/ActivityThread（2274）：无法找到 com.facebook.katana.provider.AttributionIdProvider 的提供者信息 10-12 01:48:14.084：E/ActivityThread（2313 ): 未能找到 com.facebook.katana.provider.AttributionIdProvider 10-12 01:48:45.323 的提供者信息：E/ActivityThread(2334)：未能找到 com.facebook.katana.provider.AttributionIdProvider 10-的提供者信息12 03:19:06.184: E/ActivityThread(2371): 找不到 com.facebook.katana.provider.AttributionIdProvider 的提供者信息 10-12 03:19:31.614: E/ActivityThread(2393): 找不到提供者信息对于 com.facebook.katana.provider.AttributionIdProvider无法找到 com.facebook.katana.provider.AttributionIdProvider 10-12 01:48:45.323 的提供者信息：E/ActivityThread(2334)：无法找到 com.facebook.katana.provider.AttributionIdProvider 10-12 03 的提供者信息：19：06.184：E / ActivityThread（2371）：找不到com.facebook.katana.provider.AttributionIdProvider 10-12 03：19：31.614的提供商信息：E / ActivityThread（2393）：找不到com的提供商信息.facebook.katana.provider.AttributionIdProvider无法找到 com.facebook.katana.provider.AttributionIdProvider 10-12 01:48:45.323 的提供者信息：E/ActivityThread(2334)：无法找到 com.facebook.katana.provider.AttributionIdProvider 10-12 03 的提供者信息：19：06.184：E / ActivityThread（2371）：找不到com.facebook.katana.provider.AttributionIdProvider 10-12 03：19：31.614的提供商信息：E / ActivityThread（2393）：找不到com的提供商信息.facebook.katana.provider.AttributionIdProvider找不到 com.facebook.katana.provider.AttributionIdProvider 的提供商信息找不到 com.facebook.katana.provider.AttributionIdProvider 的提供商信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:27:36.367

使用`AsyncTask`有一些不是很明显的限制。其目的是为开发人员提供一种将慢速任务置于后台的简单方法，但仍允许结果填充 UI。但是，根据您使用的 Android 版本，其细节可能会有很大差异，因为在某些版本中，您的应用程序中的*所有* `AsyncTask`子类共享同一个线程。在您的情况下，我假设您正在侦听端口以接收图像 - 并且您正在使用 an`AsyncTask`来执行此操作。您有一个始终在运行的线程，始终使您的应用程序中的*所有*其他`AsyncTask`线程无法运行。

相反，尝试使用`Runnable`and [Handler](http://developer.android.com/reference/android/os/Handler.html)来解决它。

```
public class TCPClient implements Runnable {

Handler mHandler;
Object[] params;

public static void run(Handler handler, Object... params) {
    TCPClient instance = new TCPClient(handler, params);
    Thread worker = new Thread(instance);
    worker.start();
}

private TCPClient(Handler handler, Object... params) {
    this.params = params;
    mHandler = handler;
}

private void runOnUI(Object result) {
    if (mHandler != null) {
        final Object copy = result;

        mHandler.post(new Runnable() {
            public void run() {
                // Update UI here
            }
        });
    }
}

public void run() {
  // Do slow/background task here
  //Then call
  runOnUI(new String("resulting data..."));
} 
```

您可以在 UI 线程中使用它，如下所示：

```
public void onClick(View v) {
  Handler handler = new Handler();
  TCPClient.run(handler, new String("Put outgoing data here...");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:42:27.330

从您的堆栈跟踪中，`onPostExecute`正在抛出一个`NullPointerException`. 从您的代码中，这一定是因为`image`为空。您创建变量：

```
ImageView image; 
```

但我看不到你初始化它的任何地方。也许您错过了设置它的`findViewById`电话？`onCreate`

# javascript - 在不使用 div id 的情况下使用 javascript 检索锚文本时需要帮助

> ID：12861573
> 
> 赞同：0
> 
> 时间：2012-10-12T14:47:09.447
> 
> 标签：javascript, javascript-events

我需要从链接中检索锚文本。因此，当我单击该表单上的任何链接时，该特定锚文本应显示为警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:29:00.293

我会将表单上的点击委托给任何具有特定类的锚链接，我们称之为类：`myAnchor`

所以你的代码应该是这样的：

```
$('#form').on('click', '.myAnchor', function()
{
    alert($(this).text());
}); 
```

如果锚具有类，此代码只会触发警报`myAnchor`

更新：由于您的锚链接没有特定的类，只需使用这个：

```
$('#form').on('click', 'a', function()
{
    alert($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:49:12.520

jQuery:

```
$('a').click(function(){
    alert($(this).text());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:03:12.737

如果你想让一个特定表单中的所有链接都触发警报，你可以使用 jQuery 来做到这一点：

```
$('#form > a').click(function(e){
    alert($(this).html());
}); 
```

这只会在单击表单内的链接时触发。

# java - JNI 调用 ReleaseStringUTFChars 中的 JVM-Crash，仅适用于 Windows 7，Windows XP 正常

> ID：12861574
> 
> 赞同：2
> 
> 时间：2012-10-12T14:47:15.773
> 
> 标签：java, c++, windows, java-native-interface, jvm-crash

以下是通过 JNI 从 Java JVM 调用的 C++ 代码的摘录：

```
(JNIEnv *pJniEnv, jobject, jstring pDllName)
    {
           string dllName(pJniEnv->GetStringUTFChars(pDllName, NULL));

           // stuff happens here like
           HINSTANCE loadedDll = LoadLibrary(dllName.c_str());

           pJniEnv->ReleaseStringUTFChars(pDllName, dllName.c_str());

           return ...;
    } 
```

这在 Windows XP 中有效，但在 Windows 7 中因访问冲突异常而崩溃，在该行中

```
 pJniEnv->ReleaseStringUTFChars(pDllName, dllName.c_str()); 
```

错误信息是：

> java.exe 中 0x77355F29 (ntdll.dll) 处的第一次机会异常：0xC0000005：访问冲突读取位置 0x002B0D52。

我会很感激任何线索。

JRE 版本：6.0_27-b07，Java VM：Java HotSpot(TM) Client VM（20.2-b06 混合模式 windows-x86），C++ 代码是使用 Visual Studio 2010 构建的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T15:05:37.083

状态的文档`GetStringUTFChars()`：

> 返回指向字符串的 UTF-8 字符数组的指针。此数组在被 ReleaseStringUTFChars 释放之前一直有效。

状态的文档（第一个参数是`ReleaseStringUTFChars()`哪里，第二个参数是哪里）：`string``utf`

> 通知虚拟机实现本机代码不再需要访问本机字符串 utf。utf 参数是使用 GetStringUTFChars 从字符串派生的指针。

在发布的代码中，`dllName.c_str()`作为第二个参数传递，该参数`ReleaseStringUTFChars()`不正确，因为`c_str()`(`dllName`的`std::string`构造函数*复制*了它的参数) 并且不是从`pDllName`. 这适用于一个平台而不是另一个平台的事实表明未定义的行为。

纠正：

```
const jbyte* pDllName_string = pJniEnv->GetStringUTFChars(pDllName, NULL);
std::string dllName(pDllName_string);
pJniEnv->ReleaseStringUTFChars(pDllName, pDllName_string);

/* Use 'dllName' */ 
```

# objective-c - 如何在ios中检查对象的“全局”位置

> ID：12861580
> 
> 赞同：1
> 
> 时间：2012-10-12T14:47:26.157
> 
> 标签：objective-c, uiscrollview, position, cgrect

我有`taskView`一个类的实例，它是 UIView 的子类。此实例`UIScrollView`位于位置 (0, 50) 中，并且`UIScrollView`位于 self.view 中。问题是：如何检查`taskView`屏幕的位置？我想检查这个元素的全局位置。像 taskView 这样的元素是`UIScrollView`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:58:43.453

这应该让你`taskView`在整个窗口的坐标中的位置（原点）：

```
UIWindow *window = [[UIApplication sharedApplication] keyWindow];
CGPoint p = [taskView convertPoint:taskView.bounds.origin toView:window]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T14:59:48.023

您可以使用以下方法在视图之间转换坐标：

*   [– 转换点：toView：](https://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/convertPoint%3atoView%3a)
*   [– 转换点：从视图：](https://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/convertPoint%3afromView%3a)
*   [– 转换矩形：toView：](https://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/convertRect%3atoView%3a)
*   [– 转换矩形：从视图：](https://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/convertRect%3afromView%3a)

因此，要将视图的框架转换为相对于某些更高级别的父视图，您可以使用以下代码：

```
UIView *someParentView;
UIView *childView;

CGRect frameRelativeToParent = [childView convertRect:childView.bounds
                                               toView:someParentView]; 
```

两个视图都需要属于同一个视图层次结构（即它们需要存在于同一个窗口中）。

如果您`nil`为这些方法的第二个参数指定，您将处理基本窗口坐标。

`UIWindow`在（例如）上也有相应的方法`convertRect:toWindow:`用于在窗口之间转换坐标。当您`nil`在此处指定第二个参数时，您正在处理屏幕坐标。您需要处理屏幕坐标的一个地方是处理键盘通知时。键盘的框架以屏幕坐标提供给您，因此您必须使用这些方法将它们转换回窗口坐标，然后才能使用它们。

# c++ - 为什么为结构的多个数据成员而不是单个成员添加填充？

> ID：12861582
> 
> 赞同：7
> 
> 时间：2012-10-12T14:47:30.853
> 
> 标签：c++, c, linux, operating-system

为什么只有当一个结构有多个成员时才添加填充的概念，而当只有一个基本数据类型成员时为什么不包含填充的概念？

如果我们考虑在 32 位机器上

```
struct 
{
    char a;
} Y; 
```

没有填充，并且 sizeof Y 达到 1 字节。

如果我们考虑这个结构

```
struct 
{
    char a;
    int b;
} X; 
```

Sizeof X 将是 8bytes 。

我的问题是为什么在第二种情况下要添加填充？如果它是为了让通常以 4 字节的倍数块读取数据的机器进行有效访问，那么为什么在第一种情况下没有填充？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T14:48:51.390

在第二种情况下添加了填充，因为在您的机器上，an`int`与 4 个字节对齐。所以它必须驻留在可以被 4 整除的地址。

```
0x04   0x05   0x06   0x07   0x08   0x09   0x0A   0x0B

  a      b      b      b      b 
```

如果不添加填充，则`int`成员从 address 开始`0x05`，这是错误的。添加了 3 个填充字节：

```
0x04   0x05   0x06   0x07   0x08   0x09   0x0A   0x0B

  a   |      padding      |   b      b      b      b 
```

现在`int`在`0x08`，没关系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T15:02:00.993

这不仅仅是效率。

问题不在于访问本身的大小，而在于对齐方式。在大多数机器上，访问未对齐的数据会导致程序崩溃，而在当今的典型机器上，an`int`将需要在四字节边界上对齐的地址：访问`int`其地址未在四字节边界上对齐的地址会减慢程序速度相当大，或导致它崩溃。您的第一个结构不包含任何具有对齐考虑的数据，因此不需要填充。你的第二个有一个`int`，编译器必须确保给定一个数组，所有的`int`都将正确对齐。这意味着 1) 结构的总大小必须是四的倍数，以及 2)`int`结构中的偏移量必须是四的倍数。（考虑第一个要求：

```
struct S
{
    char a;
    int b;
    char c;
}; 
```

通常大小为 12，两者后都有填充`char`。）

在其他语言中，编译器经常对结构进行重新排序，以便具有最严格对齐要求的元素首先出现——对于上面的结构 S，这将导致：

```
struct S
{
    int b;
    char a;
    char c;
}; 
```

并且大小为 8，而不是 12。但是，C 和 C++ 都禁止这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:08:13.153

填充用于对齐某些数据类型，即确保某种类型的数据具有某个指定数字的倍数的地址。这在不同型号的 CPU 之间有所不同，但通常 2 字节整数与 2 的倍数的地址对齐，而 4 字节的整数与 4 的倍数的地址对齐。字符通常不需要对齐。

所以如果一个结构体中只有一个字段，那么只要把结构体放在一个边界合适的地址上，就不需要填充了。而且它总是这样：系统总是将块对齐到所需的最大边界，通常是 4 字节或 8 字节。结构中的一件事将处于适当的边界。仅当您有多个字段时才会出现此问题，因为一个字段的长度可能不会导致下一个字段位于正确的边界。因此，在您的示例中，您有一个 char，当然需要 1 个字节，还有一个 int，需要 4 个字节。假设该结构位于地址 0x1000。然后没有填充，char 将放置在 0x1000，int 放置在 0x1001。但是 int 在 4 字节边界时更有效，因此编译器添加了一些填充字节以将其推送到下一个此类边界 0x1004。所以现在你有 char（1 个字节）、padding（3 个字节）、int（4 个字节），总共 8 个字节。

在这种情况下，您无能为力来改善这种情况。每个结构都将与 4 或 8 字节边界对齐，因此当最小值为 5 字节时，在实践中总是会四舍五入到至少 8。（sizeof 不会显示结构之间的填充，仅显示内部，但内存仍然丢失。）

在其他情况下，您可以通过重新排列字段的顺序来最小化额外填充字节的数量。就像说你有三个字符和三个整数。如果您将结构声明为

```
struct {char a; int b; char c; int d; char e; int f;} 
```

然后编译器将在第一个 char 之后添加 3 个字节以对齐第一个 int，然后在第二个 char 之后再添加三个字节以对齐第二个 int。这给出了 char (1) + pad (3) + int (4) + char (1) + pad (3) + int (4) + char (1) + pad (3) + int (4) = 24。

但是，如果您声明了它：

```
struct {char a; char c; char e; int b; int d; int f;} 
```

那么你会得到 char (1) + char (1) + char (1) + pad (1) + int (4) + int (4) + int (4) = 16。

几年前，我阅读了始终将最大元素放在首位以最小化填充的建议，即首先放置长整数，然后是整数，然后是短裤，然后是字符。

如果您要分配数千或数百万个这些，则可以通过此技术节省大量内存。如果你只打算分配一两个，那没什么大不了的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:27:46.723

`Padding`是的概念`alignment`，对于`issue of computer efficiency and the speed of the access of the data`对齐的数据可以完美地访问`fetching cycle of the processor from the addresses where the data are stored`，`it doesn't mean that with out alignment processor doesn't work it only meant for the speed access of the memory`对于整数数据类型，它是 4 字节对齐由编译器完成，以便处理器更有效地访问数据。（在 32 位系统中）

在 char 的情况下，数据只需要一个字节，因此不需要对齐，因为每个字节本身都是可用的（`in RAM there are pages and each page size is 1 byte`）但是对于整数，我们需要 4 个字节并且没有 4 个字节可用，或者没有什么叫做一次访问 4 个字节因此，编译器制定了一个对齐规则，通过该规则整数数据位于正确的地址中。

并通过它可以更快地访问数据。

# php - Mcrypt PHP - Module Initialization Failed

> ID：12861583
> 
> 赞同：4
> 
> 时间：2012-10-12T14:47:37.647
> 
> 标签：php, wamp, wampserver, php-extension, mcrypt

## How to install the mcrypt modules on PHP?

I need to install the mcrypt extension on WAMPServer so that I can use IDEA encryption on passwords. I can't use any other type of encryption, because the large database I am interacting with already uses IDEA encryption on passwords.

I have done quite a bit of research on installing the mcrypt extension on PHP. I saw that there were 2 main steps:

1.  Install the extension
2.  Refer to the directory where the algorithms and modes are located in the php.ini file

Step 1 I have managed to complete successfully as it no longer gives the fatal error: "Call to undefined function mcrypt_encrypt..."

Step 2 is where I am having issues, because now when I call the mcrypt_encrypt function php returns the warning: "Warning: mcrypt_encrypt(): Module initialization failed..."

*   I downloaded the mcrypt extension from: [http://www.dlldll.com/php_mcrypt.dll_download.html](http://www.dlldll.com/php_mcrypt.dll_download.html)
*   I downloaded the mcrypt algorithms and modes from: [http://sourceforge.net/projects/mcrypt/files/Libmcrypt/Production/libmcrypt-2.5.7.tar.gz/download](http://sourceforge.net/projects/mcrypt/files/Libmcrypt/Production/libmcrypt-2.5.7.tar.gz/download)

I placed the directory with all the algorithms and modes (libmcrypt) in the php extensions folder and then in php.ini I wrote these 2 lines:

`mcrypt.algorithms_dir = "c:/wamp/bin/php/php5.4.3/ext/libmcrypt/modules/algorithms"`

`mcrypt.modes_dir = "c:/wamp/bin/php/php5.4.3/ext/libmcrypt/modules/modes"`

I then restarted WAMPServer and it gave the warning: "PHP Startup: Unable to load dynamic library 'c:/wamp/bin/php/php5.4.3/ext/php_mcrypt.dll' - The specified module could not be found."

I have been searching all over the web for tutorials on how to install the mcrypt extension and I can't find any! So I came to good old StackOverflow in hopes that someone might be able to help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:19:58.997

**建议一：**

`libmcrypt.dll`对 Apache/ 不可用`php_mcrypt.dll`。我想我们应该先检查一下`phpinfo()`！*mcrypt 可用*

**建议二：**

`print_r(mcrypt_list_algorithms());`应该显示 IDEA 算法...因为它不是免费算法（尽管[专利于 2011 年 5 月到期](https://stackoverflow.com/questions/7758713/what-are-the-terms-of-use-for-mcrypt-idea-in-php)），它可能不包括在内.. *IDEA 算法未列为可用算法*

**建议三：**

你不会喜欢这个，但我读到的所有内容都表明你必须[自己构建 PHP](https://wiki.php.net/internals/windows/stepbystepbuild)（[首先`mcrypt`](http://objectmix.com/php/479405-%5Bphp%5D-mcrypt-dont-work.html)使用 IDEA，然后`php`使用 MCRYPT），这在 Windows 上会有点痛苦（没有所有默认编译器等像Linux一样内置）。作为替代方案，您可以四处寻找*包含*MCRYPT/IDEA 的 Windows PHP 二进制版本。看起来其中一些包含它（旧版本、[64 位版本](http://www.anindya.com/php-5-3-5-x64-64-bit-for-windows/)、VC9 版本）。 *不幸*的是，人们在安装指南/讨论中对此有想法，因此很难找到关于`IDEA`算法是否包含在内的文档；）

# c#-4.0 - Can multiple dll reference to common config file outside the DLL ie DLL.config file

> ID：12861585
> 
> 赞同：0
> 
> 时间：2012-10-12T14:47:41.000
> 
> 标签：c#-4.0

I have Two DLL let it be abc.dll and xyz.dll i created two config file for them as the project acquirement abc.dll.config and zyz.dll.config. both the file contain same information or the physical file path can i able to create common config file for both of them let it be common.dll.config that can be reference inside both the DLL.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:27:45.077

您应该能够为这两个 DLL 使用 App.config（Windows 应用程序）或 web.config（Web 服务）。您可以在 App.config 或 web.config 文件中组合两个 DLL 所需的设置。不需要单独的 DLL 配置文件。

# css - Right padding when title breaks in not very wide container

> ID：12861586
> 
> 赞同：0
> 
> 时间：2012-10-12T14:47:43.167
> 
> 标签：css, padding

How would you guys [approach this](http://jsfiddle.net/BGxmQ/) in the best semantic way possible?

I have a background for the title (inline) which is padded on margins but when the title breaks to the next row it loses the padding on the first row, on the right side.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:50:52.200

制作`<h2>`一个**inline-block**：

```
display: inline-block; 
```

这将使它成为与文本内联的块。

# r - 保留符合特定条件的数据框行

> ID：12861596
> 
> 赞同：2
> 
> 时间：2012-10-12T14:48:17.123
> 
> 标签：r, dataframe

我创建了一个简单的data.frame：

```
data.frame(a = rep(LETTERS[1:4], each=4),
           b = c(sample(6,4),sample(6,4),sample(6,4),sample(6,4)))

   a b
1  A 6
2  A 4
3  A 2
4  A 3
5  B 5
6  B 1
7  B 3
8  B 6
9  C 2
10 C 3
11 C 5
12 C 1
13 D 4
14 D 5
15 D 1
16 D 3 
```

如何仅保留 data.frame 中 b 列中的数字出现在 a 列的所有 4 个字母中的那些行？因此，例如，b 列中的数字 3 出现在 a 列中的 A、B、C 和 D 中，因此应该保留。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:12:49.000

这是使用递归交集的一种稍微不同的方法。

```
set.seed(123)

df <- data.frame(a = rep(LETTERS[1:4], each=4),
                 b = c(sample(6,4),sample(6,4),sample(6,4),sample(6,4)))
with(df, df[b %in% Reduce(intersect, split(b, a)),])
   a b
3  A 6
4  A 3
5  B 6
7  B 3
10 C 3
11 C 6
14 D 3
16 D 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:53:15.763

鉴于这`x`是您的数据框，

```
keep <- apply( x, 1,
              function( y ) all( LETTERS[1:4] %in% x[ x[,2] == y[2], 1 ] ) ) 
```

会给你一个长度的布尔向量`nrow( x )`，你可以用它来选择所需的行：

```
x[ keep, ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:53:28.003

您还可以尝试使用`table()`来帮助您进行子集化：

```
set.seed(123)
df <- data.frame(a = rep(LETTERS[1:4], each=4), 
                 b = c(sample(6,4), sample(6,4), sample(6,4), sample(6,4)))
df[df$b %in% which(colSums(table(df)) == length(unique(df$a))), ]
#    a b
# 3  A 6
# 4  A 3
# 5  B 6
# 7  B 3
# 10 C 3
# 11 C 6
# 14 D 3
# 16 D 6 
```

## 更新

回想起来，`ave()`这里可以很得心应手。首先创建一个向量以匹配您的条件：

```
(counts <- ave(df$b, df$b, FUN = length))
# [1] 2 3 4 4 4 2 4 3 3 4 4 2 1 4 2 4 
```

然后，匹配您想要的条件：

```
df[counts == 4, ]
#    a b
# 3  A 6
# 4  A 3
# 5  B 6
# 7  B 3
# 10 C 3
# 11 C 6
# 14 D 3
# 16 D 6 
```

# php - Update Query Error using php

> ID：12861599
> 
> 赞同：0
> 
> 时间：2012-10-12T14:48:26.227
> 
> 标签：php

hi to all m using the following query:

```
$rows = mysql_query("UPDATE admin SET create ='".$close."' WHERE id=".$id) or die(mysql_error()); 
```

but i got the following error: **You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'create ='0' WHERE id=6' at line 1**

help me plz in this regard thnx in advance

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T14:49:59.347

`create`是一个[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。你必须逃避它：

```
UPDATE admin SET `create`=...
                 ^-     ^- 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T14:49:54.920

您需要使用反引号 ( ```) 正确引用您的查询，因为这`create`是 MySQL 中的保留关键字。

```
$rows = mysql_query("UPDATE admin SET `create` = '".$close."' WHERE `id` = ".$id) or die(mysql_error()); 
```

我强烈推荐使用[PDO](http://php.net/book.pdo.php)。

# java - javax.servlet.Filter 阻止 iFrame 请求

> ID：12861600
> 
> 赞同：0
> 
> 时间：2012-10-12T14:48:28.213
> 
> 标签：java, jakarta-ee, servlet-filters, stripes

我的应用程序实现了`javax.servlet.Filter`接口。但我有一个奇怪的案例。我的一个`ActionBean`实例是返回对一个 jsp 的响应，这个 jsp 包含一个`<iframe>`标签。在此标记中，`src`属性具有与此 jsp 相同的请求 uri，但参数值发生了变化。但是里面的uri`<iframe>`没有被请求。

我试图`Filter`从我的应用程序中删除。然后它工作正常。那么在使用`Filter`界面时应该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:40:29.607

问题解决了...

我需要注意的是我不能`Redirect`请求。我必须这样`forward`做。这完全出乎我的意料。

`Filter`如果您明智地使用它，就不会损害您的要求。

# ruby-on-rails - 使用铁轨得到 Phusion 乘客错误

> ID：12861604
> 
> 赞同：0
> 
> 时间：2012-10-12T14:48:40.400
> 
> 标签：ruby-on-rails, ubuntu-12.04, passenger

在使用 Phusion Passenger 设置 rails 应用程序时，我遇到了严重的问题。**当我在端口 3000 上运行 Webrick 服务器时，我的应用程序运行良好，但是当我尝试通过虚拟主机访问它时，我继续收到乘客错误**。这是信息：

## 乘客抛出错误

![在此处输入图像描述](../Images/b128adbd61ff8fd3ea5741b9443f6864.png) ![在此处输入图像描述](../Images/5a86cd6ea923a69fa112819c77ca6608.png)

## 服务器信息（VMWare下）

*   经销商编号：Ubuntu
*   说明：Ubuntu 12.04.1 LTS (GNU/Linux 3.2.0-29-generic-pae i686)
*   发布：12.04.1

## Ruby 和 Rails 版本

*   `ruby -v`= ruby​​ 1.9.3p194（2012-04-20 修订版 35410）[i686-linux]
*   `rails -v`= 导轨 3.2.8
*   `rvm -v`= rvm 1.16.11 (stable) by Wayne E. Seguin，Michal Papis [ [https://rvm.io/]](https://rvm.io/])

## Ruby 和 Rails 位置

*   `which ruby`=`/home/wae-group-4/.rvm/rubies/ruby-1.9.3-p194/bin/ruby`
*   `which rails`=`/home/wae-group-4/.rvm/gems/ruby-1.9.3-p194/bin/rails`
*   `which rvm`=`/home/wae-group-4/.rvm/bin/rvm`
*   `which passenger`=`/home/wae-group-4/.rvm/gems/ruby-1.9.3-p194/bin/passenger`

## 宝石列表的结果

```
 *** LOCAL GEMS ***

    actionmailer (3.2.8)
    actionpack (3.2.8)
    activemodel (3.2.8)
    activerecord (3.2.8)
    activeresource (3.2.8)
    activesupport (3.2.8)
    arel (3.0.2)
    builder (3.1.2, 3.0.3)
    bundler (1.2.1)
    cgi_multipart_eof_fix (2.5.0)
    cocaine (0.3.1)
    coffee-rails (3.2.2)
    coffee-script (2.2.0)
    coffee-script-source (1.3.3)
    daemon_controller (1.0.0)
    daemons (1.1.9)
    erubis (2.7.0)
    execjs (1.4.0)
    fastthread (1.0.7)
    gem_plugin (0.2.3)
    hike (1.2.1)
    i18n (0.6.1)
    journey (1.0.4)
    jquery-rails (2.1.2)
    json (1.7.5)
    libv8 (3.3.10.4 x86-linux)
    mail (2.4.4)
    mime-types (1.19)
    multi_json (1.3.6)
    nokogiri (1.5.5)
    paperclip (3.0.4)
    passenger (3.0.17)
    pg (0.14.1)
    polyglot (0.3.3)
    rack (1.4.1)
    rack-cache (1.2)
    rack-ssl (1.3.2)
    rack-test (0.6.1)
    rails (3.2.8)
    railties (3.2.8)
    rake (0.9.2.2)
    rb-readline (0.4.2)
    rdoc (3.12)
    rubygems-bundler (1.0.7)
    rvm (1.11.3.5)
    sass (3.2.1)
    sass-rails (3.2.5)
    sprockets (2.1.3)
    sqlite3 (1.3.6)
    therubyracer (0.10.2)
    thor (0.16.0)
    tilt (1.3.3)
    treetop (1.4.10)
    tzinfo (0.3.33)
    uglifier (1.3.0) 
```

## 捆绑列表的结果

```
 Gems included by the bundle:
      * actionmailer (3.2.8)
      * actionpack (3.2.8)
      * activemodel (3.2.8)
      * activerecord (3.2.8)
      * activeresource (3.2.8)
      * activesupport (3.2.8)
      * arel (3.0.2)
      * builder (3.0.3)
      * bundler (1.2.1)
      * cocaine (0.3.1)
      * coffee-rails (3.2.2)
      * coffee-script (2.2.0)
      * coffee-script-source (1.3.3)
      * erubis (2.7.0)
      * execjs (1.4.0)
      * hike (1.2.1)
      * i18n (0.6.1)
      * journey (1.0.4)
      * jquery-rails (2.1.2)
      * json (1.7.5)
      * libv8 (3.3.10.4)
      * mail (2.4.4)
      * mime-types (1.19)
      * multi_json (1.3.6)
      * nokogiri (1.5.5)
      * paperclip (3.0.4)
      * pg (0.14.1)
      * polyglot (0.3.3)
      * rack (1.4.1)
      * rack-cache (1.2)
      * rack-ssl (1.3.2)
      * rack-test (0.6.1)
      * rails (3.2.8)
      * railties (3.2.8)
      * rake (0.9.2.2)
      * rb-readline (0.4.2)
      * rdoc (3.12)
      * sass (3.2.1)
      * sass-rails (3.2.5)
      * sprockets (2.1.3)
      * therubyracer (0.10.2)
      * thor (0.16.0)
      * tilt (1.3.3)
      * treetop (1.4.10)
      * tzinfo (0.3.33)
      * uglifier (1.3.0) 
```

## rvm 信息的结果

```
 ruby-1.9.3-p194:

        system:
          uname:       "Linux web4 3.2.0-29-generic-pae #46-Ubuntu SMP Fri Jul 27 17:25:43 UTC 2012 i686 i686 i386 GNU/Linux"
          system:      "ubuntu/12.04/i386"
          bash:        "/bin/bash => GNU bash, version 4.2.24(1)-release (i686-pc-linux-gnu)"
          zsh:         " => not installed"

        rvm:
          version:      "rvm 1.16.11 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
          updated:      "4 hours 21 minutes 40 seconds ago"

        ruby:
          interpreter:  "ruby"
          version:      "1.9.3p194"
          date:         "2012-04-20"
          platform:     "i686-linux"
          patchlevel:   "2012-04-20 revision 35410"
          full_version: "ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]"

        homes:
          gem:          "/home/wae-group-4/.rvm/gems/ruby-1.9.3-p194"
          ruby:         "/home/wae-group-4/.rvm/rubies/ruby-1.9.3-p194"

        binaries:
          ruby:         "/home/wae-group-4/.rvm/rubies/ruby-1.9.3-p194/bin/ruby"
          irb:          "/home/wae-group-4/.rvm/rubies/ruby-1.9.3-p194/bin/irb"
          gem:          "/home/wae-group-4/.rvm/rubies/ruby-1.9.3-p194/bin/gem"
          rake:         "/home/wae-group-4/.rvm/gems/ruby-1.9.3-p194/bin/rake"

        environment:
          PATH:         "/home/wae-group-4/.rvm/gems/ruby-1.9.3-p194/bin:/home/wae-group-4/.rvm/gems/ruby-1.9.3-p194@global/bin:/home/wae-group-4/.rvm/rubies/ruby-1.9.3-p194/bin:/home/wae-group-4/.rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games"
          GEM_HOME:     "/home/wae-group-4/.rvm/gems/ruby-1.9.3-p194"
          GEM_PATH:     "/home/wae-group-4/.rvm/gems/ruby-1.9.3-p194:/home/wae-group-4/.rvm/gems/ruby-1.9.3-p194@global"
          MY_RUBY_HOME: "/home/wae-group-4/.rvm/rubies/ruby-1.9.3-p194"
          IRBRC:        "/home/wae-group-4/.rvm/rubies/ruby-1.9.3-p194/.irbrc"
          RUBYOPT:      ""
          gemset:       "" 
```

# 宝石文件内容

```
 source 'https://rubygems.org'

    gem 'rails', '3.2.8'

    # Bundle edge Rails instead:
    # gem 'rails', :git => 'git://github.com/rails/rails.git'

    gem 'pg'

    # Gems used only for assets and not required
    # in production environments by default.
    group :assets do
      gem 'sass-rails',   '~> 3.2.3'
      gem 'coffee-rails', '~> 3.2.1'

      # See https://github.com/sstephenson/execjs#readme for more supported runtimes
      gem 'therubyracer', :platforms => :ruby

      gem 'uglifier', '>= 1.0.3'
    end

    gem 'jquery-rails'

    # To use ActiveModel has_secure_password
    # gem 'bcrypt-ruby', '~> 3.0.0'

    # To use Jbuilder templates for JSON
    # gem 'jbuilder'

    # Use unicorn as the app server
    # gem 'unicorn'

    # Deploy with Capistrano
    # gem 'capistrano'

    # To use debugger
    # gem 'debugger'

    gem 'rb-readline'
    gem 'nokogiri'
    gem 'paperclip', '3.0.4'
    gem 'rack-test' 
```

# apache2.conf 中的乘客设置

```
 LoadModule passenger_module /var/lib/gems/1.8/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
    PassengerRoot /var/lib/gems/1.8/gems/passenger-3.0.17
    PassengerRuby /usr/bin/ruby1.8 
```

# /etc/apache2/sites-enabled 中的应用程序配置

```
 <VirtualHost *:80>
          ServerName 192.41.170.115
          # !!! Be sure to point DocumentRoot to 'public'!
          DocumentRoot /home/wae-group-4/web12_04/ps2/public
          <Directory /home/wae-group-4/web12_04/ps2/public>
             # This relaxes Apache security settings.
             AllowOverride all
             # MultiViews must be turned off.
             Options -MultiViews
          </Directory>
    </VirtualHost> 
```

# /etc/apache2/ports.conf 的内容

```
 NameVirtualHost *:80
    Listen 80

    <IfModule mod_ssl.c>
        # If you add NameVirtualHost *:443 here, you will also have to change
        # the VirtualHost statement in /etc/apache2/sites-available/default-ssl
        # to <VirtualHost *:443>
        # Server Name Indication for SSL named virtual hosts is currently not
        # supported by MSIE on Windows XP.
        Listen 443
    </IfModule>

    <IfModule mod_gnutls.c>
        Listen 443
    </IfModule> 
```

## 捆绑安装的结果

```
 Using rake (0.9.2.2) 
    Using i18n (0.6.1) 
    Using multi_json (1.3.6) 
    Using activesupport (3.2.8) 
    Using builder (3.0.3) 
    Using activemodel (3.2.8) 
    Using erubis (2.7.0) 
    Using journey (1.0.4) 
    Using rack (1.4.1) 
    Using rack-cache (1.2) 
    Using rack-test (0.6.1) 
    Using hike (1.2.1) 
    Using tilt (1.3.3) 
    Using sprockets (2.1.3) 
    Using actionpack (3.2.8) 
    Using mime-types (1.19) 
    Using polyglot (0.3.3) 
    Using treetop (1.4.10) 
    Using mail (2.4.4) 
    Using actionmailer (3.2.8) 
    Using arel (3.0.2) 
    Using tzinfo (0.3.33) 
    Using activerecord (3.2.8) 
    Using activeresource (3.2.8) 
    Using cocaine (0.3.1) 
    Using coffee-script-source (1.3.3) 
    Using execjs (1.4.0) 
    Using coffee-script (2.2.0) 
    Using rack-ssl (1.3.2) 
    Using json (1.7.5) 
    Using rdoc (3.12) 
    Using thor (0.16.0) 
    Using railties (3.2.8) 
    Using coffee-rails (3.2.2) 
    Using jquery-rails (2.1.2) 
    Using libv8 (3.3.10.4) 
    Using nokogiri (1.5.5) 
    Using paperclip (3.0.4) 
    Using pg (0.14.1) 
    Using bundler (1.2.1) 
    Using rails (3.2.8) 
    Using rb-readline (0.4.2) 
    Using sass (3.2.1) 
    Using sass-rails (3.2.5) 
    Using therubyracer (0.10.2) 
    Using uglifier (1.3.0) 
            Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

我已经面对这样的问题很多天了。我应该重新安装 rails 、 gem 和 rvm 吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T16:43:13.990

我已经有了解决方案。当我检查`which passenger`时，我发现有两个地方可能会导致一些冲突问题。由于前面的命令：

*   `sudo gem install passenger`
*   `gem install passenger`

然后我做

*   `sudo gem uninstall passenger`
*   `gem uninstall passenger`

做

*   `gem install passenger`
*   `passenger-install-apache2-module`

我拿回了我的申请。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:54:48.817

您是否尝试过`bundle install`和/或`sudo bundle install`在生产中？

# android - How to set an Android GridView with different column sizes

> ID：12861606
> 
> 赞同：6
> 
> 时间：2012-10-12T14:48:41.100
> 
> 标签：android, android-layout, android-gridview, column-width

I have a GridView in my main layout as follows:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <GridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gridview"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:gravity="center"
        android:horizontalSpacing="1dp"
        android:stretchMode="columnWidth"
        android:verticalSpacing="1dp" />

</LinearLayout> 
```

which produces a grid like this ![enter image description here](../Images/9136763b42633538728adf35ba760985.png)

the contents of each cell is a layout like this:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:background="@drawable/btn_measurement" >

    <Button
        android:id="@+id/numerical"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="---" />

</LinearLayout> 
```

But I want the 4th column to be one-third of other columns and I just can't.

I checked the links:

[GridView with different column sizes](https://stackoverflow.com/questions/6651175/gridview-with-different-column-sizes?answertab=active#tab-top) and [Android GridView Column Stretching](https://stackoverflow.com/questions/8873488/android-gridview-column-stretching)

but they were of no help. :(

if you think that I need to change my solution entirely please be more precise than just giving a general clue. Thanx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:20:11.713

使用此代码使列的大小变小，但在这里你必须应用一些逻辑。第 4 列您希望它变小，因此您必须覆盖 getView() 方法，然后使用一些变量并检查该变量是否为 3 或 7 或 11...然后使按钮的大小变小。我想你明白我的意思了......

```
 int logic =3;
    public View getView(int position, View convertView, ViewGroup parent) {
          Button btn;
          LinearLayout layout;
          if (convertView == null) {

            convertView = inflate the layout and initialize convertview

          if(position % logic==0)
    converView..setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,
                                                                LinearLayout.LayoutParams.FILL_PARENT,
                                                              (float) 0.3));

        btn = new Button(context);
        btn.setGravity(Gravity.RIGHT);
        btn.setPadding(5, 5, 5, 5);

        layout = new LinearLayout(context);
        layout.setOrientation(0);
        layout.setPadding(5, 5, 5, 10);

        btn.setText(names[position]);

        layout.addView(btn);
    }
    else {
        layout = (LinearLayout) convertView;
        btn = (Button) layout.getChildAt(0);
        btn.setText(names[position]);

    }

    return layout;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-31T02:59:42.213

使用带有自定义 GridLayoutManager 的 RecyclerView（而不是 GridView），如“可变跨度大小”下所示：http: [//blog.sqisland.com/2014/12/recyclerview-grid-with-header.html](http://blog.sqisland.com/2014/12/recyclerview-grid-with-header.html)

您基本上会让每个常规列占用 3 倍，而较小的列占用 1 倍。

```
GridLayoutManager manager = new GridLayoutManager(this, 10); // 3 cols of 3 + 1 col of 1
manager.setSpanSizeLookup(new GridLayoutManager.SpanSizeLookup() {
  @Override
  public int getSpanSize(int position) {
    if (position % 4 == 3)
       return 1; // Fourth column is 1x
    else
       return 3; // Remaining columns are 3x
  }
});
recyclerView.setLayoutManager(manager); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-31T02:42:35.957

我曾经使用过这个解决方案

[具有不同列大小的 GridView](https://stackoverflow.com/questions/6651175/gridview-with-different-column-sizes)

通过使用列表视图而不是网格视图，并将每个项目的 4 个按钮放在一个水平线性布局中。但是你需要额外的工作来检测按钮点击，但我认为这是可行的

我可以找到的另一项工作是使用 3rd 方库，例如 [https://github.com/felipecsl/AsymmetricGridView](https://github.com/felipecsl/AsymmetricGridView)

# deployment - 从一个平台本地部署到多个平台 - JavaFX 2.2

> ID：12861610
> 
> 赞同：3
> 
> 时间：2012-10-12T14:48:45.963
> 
> 标签：deployment, javafx-2, javafx

JavaFX 2.2 现在在其部署方法中包含一个“nativebundles”属性，这非常方便将应用程序的本机包提供给多个平台。但是，它只为当前平台构建原生包。

有没有办法扩展它的功能，以便它可以从一个系统构建，适用于所有平台？即使只是有可能从 Windows 构建为其他本机系统的子集，这将是一个奖励。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T19:05:42.250

“nativebundles”属性产生[自包含应用程序包](http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm#A1307236)，JavaFX 2.x 文档对此表示：

> 自包含应用程序包是特定于平台的，只能为您构建的同一系统生成。如果您想在 Windows、Linux 和 Mac 上交付自包含的应用程序包，您必须在所有三个平台上构建您的项目。

如果您不想使用多台物理机，则需要构建虚拟机。像[VirtualBox](https://www.virtualbox.org/)这样免费的东西可以安装在您的开发或构建机器上，并为您的目标操作系统提供 VM 实例。如果您的开发机器是 Mac，那么您可以安装两个 VM 实例，一个用于 Windows，一个用于 Linux，以构建到这些目标平台。如果您的开发机器是 Linux 或 Windows，那么您可能需要访问 Mac 机器来创建特定于 Mac 的构建。还要注意 32 位和 64 位版本。如果您想要分发 32 位和 64 位版本的软件，您可能需要生成更多的软件包，而您将无法从 32 位操作系统执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T07:21:56.180

我认为 JavaFX 2.2 不支持这一点。

有一个功能请求。

请参阅 RT-22994：本机安装程序 - 提供一种在一个操作系统上为所有操作系统构建所有安装程序的方法。 [http://javafx-jira.kenai.com/browse/RT-22994](http://javafx-jira.kenai.com/browse/RT-22994)

# objective-c - upload video to facebook using facebook sdk 3.1 on ios 6.0

> ID：12861615
> 
> 赞同：5
> 
> 时间：2012-10-12T14:48:58.633
> 
> 标签：objective-c, ios, facebook, api, ios6

One of my app is to upload video to facebook account. I checked on web, but found that most of solution are old or removed. Is there any updated solution?

Welcome any comment

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-13T02:34:16.313

## 语境

在您可以发布到 Facebook 之前，您必须使用本机集成或 Facebook SDK 获得发布（写入）权限，规则是您必须首先获得读取权限，然后才能写入权限。

因此，请确保在您尝试上传视频之前，您应该已请求基本信息（例如电子邮件），然后，一旦您拥有此信息，您就可以请求写入权限。上传视频所需的权限是`publish_stream`。

## 使用 iOS 6 原生 Facebook 集成

使用原生 iOS 6 Facebook 集成，应该使用 的`requestForServiceType:requestMethod:URL:parameters:` 方法`SLRequest`，如下：

```
- (void)upload{
    NSURL *videourl = [NSURL URLWithString:@"https://graph.facebook.com/me/videos"];

    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"me" ofType:@"mov"];
    NSURL *pathURL = [[NSURL alloc]initFileURLWithPath:filePath isDirectory:NO];
    NSData *videoData = [NSData dataWithContentsOfFile:filePath];

    NSDictionary *params = @{
                            @"title": @"Me being silly",
                            @"description": @"Me testing the video upload to Facebook with the new system."
                            };

    SLRequest *uploadRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                  requestMethod:SLRequestMethodPOST
                                                            URL:videourl
                                                     parameters:params];
    [uploadRequest addMultipartData:videoData
                           withName:@"source"
                               type:@"video/quicktime"
                           filename:[pathURL absoluteString]];

    uploadRequest.account = self.facebookAccount;

    [uploadRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
        if(error){
            NSLog(@"Error %@", error.localizedDescription);
        }else
            NSLog(@"%@", responseString);
    }];
} 
```

这里需要注意的是，视频数据不会进入参数字典，必须`SLRequest`使用方法将其添加到对象中`addMultipartData:withName:type:filename:`。

另请注意，添加视频数据时文件名非常重要。这里我只是使用文件的完整路径。

## 使用 Facebook SDK 3.1 库

如果您必须支持比 iOS 6 更早的 iOS 版本，或者出于任何其他原因希望使用 Facebook SDK 3.1，则上传视频会有所不同。

您必须使用一个`FBRequest`对象和一个`NSDictionary`包含视频详细信息的对象。我推荐使用的方法是`requestWithGraphPath:parameters:HTTPMethod:`，尽管您应该能够使用其他一些方法来创建您的请求对象，但我还是出于偏好使用了此方法。

以下代码使用 Facebook SDK 3.1 上传视频：

```
- (void)upload{
    if (FBSession.activeSession.isOpen) {
        NSString *filePath = [[NSBundle mainBundle] pathForResource:@"me" ofType:@"mov"];
        NSURL *pathURL = [[NSURL alloc]initFileURLWithPath:filePath isDirectory:NO];
        NSData *videoData = [NSData dataWithContentsOfFile:filePath];

        NSDictionary *videoObject = @{
                                      @"title": @"FB SDK 3.1", 
                                      @"description": @"hello there !", 
                                      [pathURL absoluteString]: videoData
                                     };
        FBRequest *uploadRequest = [FBRequest requestWithGraphPath:@"me/videos"
                                                        parameters:videoObject
                                                        HTTPMethod:@"POST"];

        [uploadRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
            if (!error)
                NSLog(@"Done: %@", result);
            else
                NSLog(@"Error: %@", error.localizedDescription);
        }];
    }
} 
```

如您所见，我们将视频数据添加到`parameters`字典中，这与之前的解决方案不同，它与`title`and `description`（这是 2 个可选参数）一起存在。另请注意，这里没有 key `source`，正如 Facebook 文档所指定的那样。密钥的名称是视频的文件名。我不知道为什么不应该这样`source`，但是使用 source 会导致**com.facebook.sdk 错误 5**。

[我提到的错误是我向 Facebook 提交的，您可以在此链接](https://developers.facebook.com/bugs/292307870878271)上看到此报告- 除非我对文档的解释有误。如果您可以重现它，请尝试该错误并报告。谢谢 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:10:28.553

`publish_stream`上传（阅读）不够，需要申请“ `video_upload`”权限。

# python-2.7 - What do I pass as the last value to the function SetupAPI.DLL.SetupDiEnumDeviceInterfaces()?

> ID：12861619
> 
> 赞同：0
> 
> 时间：2012-10-12T14:49:09.223
> 
> 标签：python-2.7, ctypes, windows-7-x64, setupapi, pywinusb

I'm working in Python trying to create a simple program that reads and write from and to a fairly simple USB device. The problem I'm having is that since PyWinUSB and PyUSB don't seem to have what I need (trying to write to the device makes things explode), I have to work from scratch using the ctypes python module and the raw dll functions in WinUSB and SetupAPI.

I've been able to get my question answered about how to define the structure that I'm passing to the function, but the problem that I'm having now is that according to the specifications of the function... well, I'll just quote it.

```
"DeviceInterfaceData [out]

A pointer to a caller-allocated buffer that contains, on successful return, a
completed SP_DEVICE_INTERFACE_DATA structure that identifies an interface that meets
the search parameters. The caller must set DeviceInterfaceData.cbSize to
sizeof(SP_DEVICE_INTERFACE_DATA) before calling this function." 
```

How do I translate these requirements into Python?

The structure class I'm working with right now looks like this:

```
class _SP_DEVINFO_DATA(ctypes.Structure):
    _fields_ = [("cbSize", wintypes.DWORD),
                ("ClassGuid", (ctypes.c_char * 16)),
                ("DevInst", wintypes.DWORD),
                ("Reserved", wintypes.LPVOID)]

    def __init__(self, guid, inst):
        self.cbSize = ctypes.sizeof(self)
        self.ClassGuid = uuid.UUID(guid).get_bytes()
        self.DevInst = (wintypes.DWORD)(inst)
        self.Reserved = None

    def __repr__(self):
        return "_SP_DEV_INFO_DATA(cbsize={}, ClassGuid={}, DevInst={})".format(
            self.cbSize, uuid.UUID(bytes=self.ClassGuid), hex(self.DevInst)) 
```

According to what I was informed by an answer to an earlier question.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:00:26.360

该`SP_DEVINFO_DATA`结构*由*`SetupDiEnumDeviceInfo`. _ 有不同的结构`SetupDiEnumDeviceInterfaces`。在这两种情况下，您都需要构造结构，只初始化`cbSize`参数，然后通过引用将其传递给函数：

示例（未经测试，只是从内存中输入）：

```
class SP_DEVICE_INTERFACE_DATA(ctypes.Structure):
    _fields_ = [('cbSize',wintypes.DWORD),
                ('InterfaceClassGuid',ctypes.c_char*16),
                ('Flags',wintypes.DWORD),
                ('Reserved',wintypes.LPVOID)]
    def __init__(self):
        self.cbSize = ctypes.sizeof(self)

PSP_DEVICE_INTERFACE_DATA = ctypes.POINTER(SP_DEVICE_INTERFACE_DATA)

i = 0
idata = SP_DEVICE_INTERFACE_DATA()

while True:
    if not SetupDiEnumDeviceInterfaces(handle,None,guid,i,ctypes.byref(idata)):
        break
    <do something with idata>
    i += 1 
```

# c++ - Code fix for decode in Informix

> ID：12861623
> 
> 赞同：1
> 
> 时间：2012-10-12T14:49:17.477
> 
> 标签：c++, mysql, sql, informix

I am using a decode function in Informix database. I am retrieving a field which is an integer datatype. If the value I retrieved is `''` then I need to set it as null; if not I am setting the same value.

I tried like this:

```
decode(table1.field1,'',NULL,table1.field1) 
```

but I am getting the following error

> Corresponding types must be compatible in CASE expression.

I am confused how the value will be retrieved from database — as null or as 0 or -1 or something. Do I need to do like this?

```
decode(table1.field1,'',0,table1.field1) 
```

how to resolve it

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:47:56.163

这里有些混乱。由于`table1.field1`它是一个 INTEGER 列，因此它永远不会包含空字符串。它将包含 NULL 或有效的 INTEGER 值；所以根本不需要更新。

为什么你认为你可能会得到`''`？如果您的编程语言区分类型，您必须将 INTEGER 列选择为字符串变量。否则，空字符串很可能是您的编程语言表示空值的方式。

# java - 强制向下转换

> ID：12861626
> 
> 赞同：2
> 
> 时间：2012-10-12T14:49:29.293
> 
> 标签：java, downcast, apache-commons-beanutils

我知道向下转换是不可行的。但我正在努力解决它。

这就是我所拥有的。

```
public class Ticket{
   public int number;
   public String description;
}

public class MyTicket extends Ticket{
   public String status;
} 
```

但是在我的应用程序中，我想使用 MyTicket 类，因为我不想强制更改原始 Ticket 对象。因此，当 Ticket 对象从调用（webservice、DB 等）返回时，我尝试向下转换为 MyTicket，但它显然失败了。

```
MyTicket mt=(MyTicket)ws.getTicket(1234); 
```

所以我试图想办法解决这个问题。我正在考虑编写一个“copyAttributes”方法或复制 MyTicket 类的构造函数中的属性，如下所示：

```
MyTicket mt=new MyTicket(ws.getTicket(1234));

public class MyTicket extends Ticket {
    public String status;
    public MyTicket(Ticket tckt){
        //copy tckt attributes to MyTicket attributes
    }
} 
```

有没有办法获取一个类的属性并将它们设置到另一个类中？还是有一种完全不同的方式来沮丧而我错过了它？

***解决方案：** *所以我采用了下面的解决方案并想出了这个。如果在转移发生之前未找到主票，我需要更改以返回 null：

```
public class MyTicket extends Ticket {
    public String status;
    public MyTicket(){}
    public static MyTicket newInstance(Ticket tckt){
        MyTicket mytkt=null;
        if(tckt!=null){//copy tckt attributes to MyTicket attributes
            BeanUtilsBean.getInstance().getConvertUtils().register(false,true,-1);
            mytkt = new MyTicket();
            BeanUtils.copyProperties(mytkt, tckt);
        }
        return mytkt;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:58:22.640

只有当您知道引用实际上是子类类型时，才应该使用[向下转换。](http://en.wikipedia.org/wiki/Downcasting)Web 服务返回的 Ticket 对象似乎实际上不是 MyTicket，因此向下转换会`ClassCastException`在运行时抛出。

在构建 MyTicket 时使用 Web 服务返回的 Ticket，我将在 Ticket 类中定义一个复制构造函数，它将获取一个票证对象并复制属性。此复制构造函数将在 MyTicket 的构造函数中调用，该构造函数采用 Ticket 对象。

```
public class Ticket{
   public int number;
   public String description;

   public Ticket(Ticket ticket)
   {
       this.number = ticket.number;
       this.description = ticket.description;
   }
}

public class MyTicket extends Ticket{
   public String status;

   public MyTicket(Ticket ticket)
   {
       super(ticket);
   }

   public MyTicket(Ticket ticket, String status)
   {
       super(ticket);
       this.status = status;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:54:05.993

我认为你做得对。如果您的对象增长，您可能希望使用它`Apache BeanUtils`来帮助您进行属性复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:03:38.377

在这种情况下，为什么不直接使用聚合 + getter/setter？

```
public class MyTicket {
  private Ticket ticket;
  private String status;

  public MyTicket(Ticket ticket) {
    this.ticket = ticket;
  }

  public int getNumber() { return ticket.number; }
  public void setNumber(int number) { ticket.number = number; }
  public String getDescription { return ticket.description; }
  public void setDescription { ticket.description = description; }
  public String getStatus() { return status; }
  public void setStatus(String status) { this.status = status; }
} 
```

然后，您可以按照您的建议创建对象：

```
MyTicket mt = new MyTicket(ws.getTicket(1234)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T14:53:03.517

我建议你实现类似*Cloneable*的接口（但不是标准的 Java 接口，在这里可以在你的超类中提供一个抽象方法）接口。在*MyTicket*类中是这样的：

```
@Override
public Ticket clone() {
    // copying stuff by calling a "copy constructor"
    return new MyTicket(this);
}

private MyTicket(MyTicket t) {
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T14:54:13.657

遗产：

```
public class ThisIsASubClass extends ThisIsASuperClass{
{
    //declare stuff here
    Object o = "Let's presume a string is passed";
    super(o); //runs the super class (ThisIsASuperClass in this case), sending an object if needed (effectivly running the super class inside of the subclass)
    //put the subclass code here
 } 
```

我找到了一个很好的例子（它很长，但我阅读长篇文章没有问题。如果你是程序员，你也不应该这样做。）：

以下是类和对象课程中介绍的 Bicycle 类的可能实现的示例代码：

```
public class Bicycle {

// the Bicycle class has
// three fields
public int cadence;
public int gear;
public int speed;

// the Bicycle class has
// one constructor
public Bicycle(int startCadence, int startSpeed, int startGear) {
    gear = startGear;
    cadence = startCadence;
    speed = startSpeed;
}

// the Bicycle class has
// four methods
public void setCadence(int newValue) {
    cadence = newValue;
}

public void setGear(int newValue) {
    gear = newValue;
}

public void applyBrake(int decrement) {
    speed -= decrement;
}

public void speedUp(int increment) {
    speed += increment;
}

} 
```

作为 Bicycle 子类的 MountainBike 类的类声明可能如下所示：

```
public class MountainBike extends Bicycle {

    // the MountainBike subclass adds
    // one field
    public int seatHeight;

    // the MountainBike subclass has one
    // constructor
    public MountainBike(int startHeight,
                    int startCadence,
                    int startSpeed,
                    int startGear) {
    super(startCadence, startSpeed, startGear);
    seatHeight = startHeight;
}   

// the MountainBike subclass adds
// one method
public void setHeight(int newValue) {
    seatHeight = newValue;
}   
} 
```

MountainBike 继承了 Bicycle 的所有字段和方法，并添加了字段 seatHeight 和设置它的方法。除了构造函数之外，就好像您完全从头开始编写了一个新的 MountainBike 类，有四个字段和五个方法。但是，您不必完成所有工作。如果 Bicycle 类中的方法很复杂并且需要大量时间来调试，这将特别有价值。你可以在子类中做什么

子类继承其父类的所有公共和受保护成员，无论子类在哪个包中。如果子类与其父类在同一个包中，它也继承父类的包私有成员。您可以按原样使用继承的成员、替换它们、隐藏它们或用新成员补充它们：

继承的字段可以直接使用，就像任何其他字段一样。您可以在子类中声明一个与超类中同名的字段，从而隐藏它（不推荐）。您可以在子类中声明不在超类中的新字段。继承的方法可以直接使用。您可以在子类中编写一个与超类具有相同签名的新实例方法，从而覆盖它。您可以在子类中编写一个与超类具有相同签名的新静态方法，从而隐藏它。您可以在子类中声明不在超类中的新方法。您可以编写一个子类构造函数来调用超类的构造函数，或者隐式调用，或者使用关键字 super。

本课的以下部分将扩展这些主题。超类中的私有成员

子类不继承其父类的私有成员。但是，如果超类具有访问其私有字段的公共或受保护方法，则子类也可以使用这些方法。

嵌套类可以访问其封闭类的所有私有成员——包括字段和方法。因此，子类继承的公共或受保护的嵌套类可以间接访问超类的所有私有成员。铸造对象

我们已经看到，一个对象的数据类型与实例化它的类相同。例如，如果我们写

```
public MountainBike myBike = new MountainBike(); 
```

那么 myBike 是 MountainBike 类型。

MountainBike 是 Bicycle 和 Object 的后代。因此，MountainBike 是 Bicycle，也是 Object，可以在需要 Bicycle 或 Object 对象的任何地方使用。

反过来不一定正确：自行车可能是山地自行车，但不一定。同样，Object 可能是 Bicycle 或 MountainBike，但不一定。

转换显示了在继承和实现允许的对象中使用一种类型的对象代替另一种类型的对象。例如，如果我们写

```
Object obj = new MountainBike(); 
```

那么 obj 既是 Object 又是 Mountainbike（直到 obj 被分配另一个不是 Mountainbike 的对象）。这称为隐式转换。

另一方面，如果我们写

```
MountainBike myBike = obj; 
```

我们会得到一个编译时错误，因为编译器不知道 obj 是 MountainBike。但是，我们可以告诉编译器我们承诺通过显式转换将 MountainBike 分配给 obj：

```
MountainBike myBike = (MountainBike)obj; 
```

此转换插入运行时检查 obj 是否被分配了 MountainBike，以便编译器可以安全地假定 obj 是 MountainBike。如果 obj 在运行时不是 Mountainbike，则会抛出异常。注意：您可以使用 instanceof 运算符对特定对象的类型进行逻辑测试。这可以使您免于因类型转换不当而导致的运行时错误。例如：

```
if (obj instanceof MountainBike) {
    MountainBike myBike = (MountainBike)obj;
} 
```

这里 instanceof 操作符验证 obj 是否指向 MountainBike，这样我们就可以在知道不会抛出运行时异常的情况下进行强制转换。

TL;DR：如果你使用继承，任何正方形都是矩形，但并非所有矩形都是正方形。

[http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T14:58:33.750

如果您要返回的对象是作为 Ticket 对象而不是 MyTicket 创建的，那么我将按照您使用复制构造函数提出的方式来处理它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-12T15:03:34.260

最好的方法是使用最少的冗余代码，让您`MyTicket`包含**原始**实例`Ticket`（*聚合*）并在需要时使用其属性，而无需提前复制任何内容。

```
public class MyTicket extends Ticket {
  private final Ticket t;
  public MyTicket(Ticket t) {
    this.t = t;
  }
} 
```

如果您需要通过 getter 公开所有属性，那么这将没有多大用处。`Ticket`仅当您在内部需要 s 属性进行某些计算时，它才会有所帮助。

# ruby - 在 RSpec 中运行所有示例的命令行，包括那些被过滤掉的示例？

> ID：12861627
> 
> 赞同：13
> 
> 时间：2012-10-12T14:49:29.473
> 
> 标签：ruby, rspec, tdd

有几个例子比较慢，过滤掉如下：

```
RSpec.configure do |c|
  c.filter_run_excluding slow: true
end

describe 'get averages but takes a long time', slow: true do
  it 'gets average foo' do
    ....
  end

  it 'gets average bar' do
    ...
  end
end 
```

这很好用，并且不会运行缓慢的测试。

```
rspec 
```

但是从命令行运行所有示例的 RSpec 命令是什么，包括被过滤掉的慢的？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-12T16:53:57.590

如果您运行`rspec --help`，则输出包括以下内容：

```
 -t, --tag TAG[:VALUE]        Run examples with the specified tag, or exclude examples
                                 by adding ~ before the tag.
                                   - e.g. ~slow
                                   - TAG is always converted to a symbol 
```

您可以运行`rspec --tag slow`以运行所有标记为慢的示例；但是，这并不能如您所愿运行所有示例。我不认为有一种简单的方法可以得到你想要的。该`exclusion`过滤器是为您不想在命令行覆盖它的情况而设计的（例如，基于 ruby​​ 版本或其他 - 强制运行不适用于您的 ruby​​ 版本的规范是没有意义的） . 您可以打开一个[rspec 核心问题](https://github.com/rspec/rspec-core/issues)，以便我们讨论潜在的更改以添加您想要的内容。同时，您可以使用环境变量获取它：

```
RSpec.configure do |c|
  c.filter_run_excluding slow: true unless ENV['ALL']
end 
```

使用此设置，`rspec`将运行除慢速规格之外的所有规格，`ALL=1 rspec`并将运行包括慢速规格在内的所有规格。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T20:02:52.617

### 排除慢速测试

如果您希望 rake 默认排除慢速测试，Myron 的答案可能是您最好的选择。然而，这是一个更简单的解决方案，适用于大多数人。

```
# Run all tests
rspec

# Run tests, excluding the ones marked slow
rspec --tag ~slow 
```

我在开发时使用 guard 来运行我的测试。您可以告诉警卫在运行所有测试时排除慢速测试。这样，您可以在开发时只运行快速测试，并且可以根据需要`rake`或`rake --tag slow`在需要时运行完整套件。这也很棒，因为您的 CI 服务器可以运行您的完整套件，而无需知道要传入的特殊 ENV 变量。

**保护文件：**

```
guard :rspec, cli: '--drb', run_all: {cli: '--tag ~slow'} do
  ...
end 
```

当您触发监视时，Guard 仍会运行缓慢的测试，例如在您编辑它时。

# mysql - 应该使用什么数据类型来存储像 10^6 和 10^-9 这样的数字？

> ID：12861628
> 
> 赞同：-1
> 
> 时间：2012-10-12T14:49:31.677
> 
> 标签：mysql

我需要在数据库中存储一些非常大和小的数字。我将使用这些数字作为`ORDER BY`in`SELECT`语句的参数。

因此，例如，一列可能具有值

```
0.000000001 
```

而另一个可能具有价值

```
1000000 
```

我应该使用什么数据类型来存储这些值？我在想`double`，但我想确定一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:00:46.103

对于非常小的数字，我可能会使用 DECIMAL，因为它允许固定小数点。如果您的大数没有十进制精度，则 INT 数据类型应该没问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-12T14:56:27.537

我只是`integer`用来存储它。

# java - 如何在 JAVA 中将 IPv6 路由标头添加到 UDP 和/或 TCP 数据包？

> ID：12861629
> 
> 赞同：-1
> 
> 时间：2012-10-12T14:49:36.327
> 
> 标签：java, ipv6, packet

我想通过特定的路由器将 IPv6 数据包从服务器发送到客户端。这就是为什么我要添加路由标头，其中包含特定路由器的地址。

有谁知道，如何在 JAVA 中将路由标头添加到数据包中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T17:14:43.410

My library may help you. This is a java library for crafting and sending packets. [https://github.com/kaitoy/pcap4j](https://github.com/kaitoy/pcap4j)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T15:23:58.750

AFAIK 大多数路由器出于安全原因忽略此类信息（请参阅[RFC 5095](http://www.rfc-editor.org/rfc/rfc5095.txt)了解原因），并且 Java 不支持更改或检查标头信息。

# android - 在 Android 上使用 Phonegap 避免全屏 iframe

> ID：12861630
> 
> 赞同：2
> 
> 时间：2012-10-12T14:49:43.507
> 
> 标签：android, cordova, iframe, fullscreen

很抱歉再次发布这个问题，我在 Stackoverflow 上看到了一些关于该问题的问题，但我找不到任何解决方案......

当我尝试在 Android 上使用 Phonegap 显示 iframe 时，iframe 会全屏显示，并且页面的其余部分没有任何位置。

这是代码：

索引.html

```
<!doctype html>
<html>
  <head>
  </head>
  <body>
    index
    <iframe src="iframe.html" width="10px" height="10px"></iframe>
  </body>
</html> 
```

iframe.html

```
<!doctype html>
<html>
  <head>
  </head>
  <body>
    iframe!
  </body>
</html> 
```

以下是一些相关主题： [Phonegap HTML5 / Android App - Iframe 高度问题](https://stackoverflow.com/questions/11258951/phonegap-html5-android-app-iframe-height-issue) [https://groups.google.com/forum/#!topic/phonegap/BA35Yna2-dI](https://groups.google.com/forum/#!topic/phonegap/BA35Yna2-dI)

有什么解决办法吗？

我也在科尔多瓦的[Jira](https://issues.apache.org/jira/secure/IssueNavigator.jspa?)上搜索但没有成功......

# python - 使用 fft2 对 RGB 滤镜进行整形

> ID：12861641
> 
> 赞同：1
> 
> 时间：2012-10-12T14:50:11.997
> 
> 标签：python, opencv, python-2.7, scipy, rgb

我想在图像上应用滤镜，例如模糊滤镜`[[1/9.0, 1/9.0, 1/9.0], [1/9.0, 1/9.0, 1/9.0], [1/9.0, 1/9.0, 1/9.0]]`。

另外，我想使用空间域中的卷积相当于频域中的乘法的方法。

所以，我的算法会是这样的。

1.  加载图像。
2.  创建过滤器。
3.  将过滤器和图像都转换为频域。
4.  两者相乘。
5.  将输出重新转换为空间域，这应该是所需的输出。

以下是我使用的基本代码，图像被加载并显示为`cv.cvmat`对象。

`Image`是我创建的一个类，它有一个成员图像，它是一个对象`scipy.matrix`并`toFrequencyDomain(size = None)`使用`spf.fftshift(spf.fft2(self.image, size))`where `spf`is`scipy.fftpack`和`dotMultiply(img)`uses`scipy.multiply(self.image, image)`

```
f = Image.fromMatrix([[1/9.0, 1/9.0, 1/9.0],
          [1/9.0, 1/9.0, 1/9.0],
          [1/9.0, 1/9.0, 1/9.0]])
lena = Image.fromFile("Test/images/lena.jpg")
print lena.image.shape
lenaf = lena.toFrequencyDomain(lena.image.shape)
ff = f.toFrequencyDomain(lena.image.shape)
lenafm = lenaf.dotMultiplyImage(ff)
lenaff = lenafm.toTimeDomain()
lena.display()
lenaff.display() 
```

所以，如果我告诉 OpenCV 通过 GRAY_SCALE 加载图像，前面的代码工作得很好。

但是，如果我让图像以颜色加载...... `lena.image.shape`将是`(512, 512, 3)`..

`scipy.fttpack.ftt2`所以，它在使用 say 时给了我一个错误`"When given, Shape and Axes should be of same length"`。

我接下来尝试的是将过滤器转换为 3-D .. 为

```
[[[1/9.0, 1/9.0, 1/9.0], 
  [1/9.0, 1/9.0, 1/9.0], 
  [1/9.0, 1/9.0, 1/9.0]],
 [[1/9.0, 1/9.0, 1/9.0], 
  [1/9.0, 1/9.0, 1/9.0], 
  [1/9.0, 1/9.0, 1/9.0]],
 [[1/9.0, 1/9.0, 1/9.0], 
  [1/9.0, 1/9.0, 1/9.0], 
  [1/9.0, 1/9.0, 1/9.0]]] 
```

而且，不知道轴参数的作用，我用随机数添加它，`(-2, -1, -1), (-1, -1, -2), .. etc.`直到它为我提供正确的过滤器输出形状以使 dotMultiply 工作。

但是，这当然不是正确的值。事情变得更糟了。

我的最后一次试验是在每个组件 2-D 矩阵上使用 fft2 函数，然后使用以下代码重新制作 3-D 矩阵。

```
# Spiltting the 3-D matrix to three 2-D matrices.
for i, row in enumerate(self.image):
            r.append(list())
            g.append(list())
            b.append(list())
            for pixel in row:
                r[i].append(pixel[0])
                g[i].append(pixel[1])
                b[i].append(pixel[2])
        rfft = spf.fftshift(spf.fft2(r, size)) 
        gfft = spf.fftshift(spf.fft2(g, size)) 
        bfft = spf.fftshift(spf.fft2(b, size))
        newImage.image = sp.asarray([[[rfft[i][j], gfft[i][j], bfft[i][j]] for j in xrange(len(rfft[i]))] for i in xrange(len(rfft))] )
        return newImage 
```

关于我做错了什么的任何帮助，或者我如何才能为灰度和彩色图片实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:39:17.903

最简单的解决方案是将图像拆分为单独的 r/g/b 图像并独立过滤每个图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:53:45.280

在将 3D 矩阵拆分为三个 2D 矩阵的末尾，您将朝着正确的方向前进。这是我的做法 - 显然这是未经测试的（我没有你的`Image`课程等），但它应该给你一个好的开始：

```
for i, channel in enumerate(self.image):
    channel_ = spf.fftshift(spf.fft2(channel)) # take FFT of each channel (r,g,b) separately
    channel_ = scipy.multiply(channel_,ff) # multiply each channel by the filter (freq. domain)
    filtered_image[:][:][i] = spf.fftshift(spf.ifft2(channel_)) # inverse FFT each channel separately 
```

# cobol - Cobol Printscreen 到文件

> ID：12861649
> 
> 赞同：-3
> 
> 时间：2012-10-12T14:50:35.243
> 
> 标签：cobol, mainframe, printscreen

相当简单的问题，这在 Cobol 中非常复杂。

我需要将屏幕打印到文件中，只需将屏幕上的任何内容保存并保存即可。保存的文件格式无关紧要，只要我从 Cobol 中获取信息即可。

对此的任何帮助都会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:22:42.147

实际上，在 Cobol 中它一点也不复杂。

我相信 Cobol 85 标准（所有现代 Cobols 都应该遵守）有这样的`ACCEPT ..... FROM SCREEN`声明。

假设您有一个`LINE SEQUENTIAL`名为 的输出文件`SCREEN-DUMP-FILE`，其中包含您的文件记录，`SCREEN-DUMP-REC`可以使用以下代码将屏幕转储到该文件：

```
OPEN OUTPUT SCREEN-DUMP-FILE.
PERFORM VARYING SCREEN-LINE FROM 1 BY 1
        UNTIL SCREEN-LINE > 24
    ACCEPT SCREEN-DUMP-REC FROM SCREEN
           LINE SCREEN-LINE COL 1 SIZE 80
    WRITE SCREEN-DUMP-REC
END-PERFORM.
CLOSE SCREEN-DUMP-FILE. 
```

现在这并不难，不是吗？

请注意，此代码假定“大型机”终端大小在您的情况下可能会有所不同。此外，大多数现代 Cobols 都有一种询问实际屏幕尺寸的方法，因此您可以相应地更改屏幕行数和行数以接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:07:08.270

[额外的！X-treme](http://www.attachmate.com/Products/Terminal+Emulation/Extra/xtreme/extra-x-treme.htm)是来自 Attachmate 的用于 Windows 机器的终端仿真器。您可能需要查看该产品的文档。从这个[演示视频](http://www.attachmate.com/flash/extra%20x-treme%20demo/default.html)来看，您需要做的可能很简单，只需在模拟器窗口中选择所有文本，然后选择 Microsoft Office 工具并将文本粘贴到 Word 文档中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-10T23:35:39.390

如果您使用的是 aviva 大型机模拟器，请在将您带到下一个屏幕的操作之前插入此行。

```
rc% = AppWin.SaveScreen("full file location with name of file and extension",2) 
```

我正在使用这种方法将屏幕保存到 .txt 文件。选项 2 一个接一个地附加输出。希望能帮助到你。

# java - swing的文字处理组件

> ID：12861650
> 
> 赞同：2
> 
> 时间：2012-10-12T14:50:38.503
> 
> 标签：java, swing, text-editor, word-processor

> **可能重复：**
> [任何人都可以推荐一个 Java 富文本编辑器吗？](https://stackoverflow.com/questions/196980/can-anyone-recommend-a-java-rich-text-editor)

我正在编写一个需要基本文字处理器的应用程序。它应该能够改变字体、大小、粗体、斜体、撤消/重做，也许是颜色。

它不应该太复杂，因为其中将写入的部分内容将用作数据库查询的键，以便将其翻译成几种语言（附录：我不是在写翻译器），我想添加自动完成。

是否有一个（开源）文字处理组件可以像我需要的那样？如果没有，是否有任何教程可以至少给我一些关于如何自己编写它的提示（我在网上发现了很多关于 EditorKit 和 Document 以及应该如何使用它的混淆）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:56:09.817

这里有一些要研究的

*   [OOBean](http://wiki.openoffice.org/wiki/Documentation/DevGuide/JavaBean/The_OOoBean_by_Example) - 使用 Open Office 的一个组件（可能有点矫枉过正）
*   [中期](http://kenai.com/projects/metaphaseeditor)
*   [备忘录](http://memoranda.sourceforge.net/)
*   在谷歌上快速搜索“Java Swing 富文本编辑器”会返回更多信息

# android - 主线程上的 AppWidgetHost createView

> ID：12861653
> 
> 赞同：2
> 
> 时间：2012-10-12T14:50:44.547
> 
> 标签：android, android-appwidget

设置小部件时，我必须`createView()`从主线程调用该方法，否则小部件将显示“无法加载小部件”并获取错误视图。

但是当用户安装了许多小部件时，加载我的启动器可能需要几秒钟。（每个最多 300 毫秒）。

有没有办法创建`AppWidgetHostView`关闭主线程？

部分代码：

```
AppWidgetHost lWidgetHost = new AppWidgetHost(lContext, HOST_ID);

mWidgetId = lWidgetHost.allocateAppWidgetId();

AppWidgetManager.getInstance(lContext).bindAppWidgetId(mWidgetId, info.provider);

new Handler(Looper.getMainLooper()).post(new Runnable() {
    @Override
    public void run() {
        AppWidgetHostView lHostView = lWidgetHost.createView(lContext, mWidgetId, info);

        addView(lHostView);
        lWidgetHost.startListening();
    }
} 
```

附言。是的，我的启动器是一个系统应用程序，并且具有执行此操作的正确权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-10T17:01:58.093

当我需要在从列表视图的 getview 启动的异步任务中创建小部件时，这就是我所做的：

```
public class CustomHostView extends AppWidgetHostView {
boolean errorFlag = false;
@Override
protected View getErrorView() {
    errorFlag = true;
    return super.getErrorView();

} 
```

然后在你从另一个线程调用 createview 之后，你知道是否有错误，你需要从主线程再次调用它。根据我的经验，大约 10-20% 的小部件需要主线程。

此外，我不知道您正在制作什么类型的主屏幕，但请确保您创建的小部件不会超过一次在屏幕上可以看到的小部件 + 例如左侧或右侧的页面。

# wordpress - Wordpress 帮助：制作第一篇文章全文，其余摘录

> ID：12861656
> 
> 赞同：0
> 
> 时间：2012-10-12T14:50:52.503
> 
> 标签：wordpress, wordpress-theming

我正在尝试让我的 WP 主题显示第一篇文章的全文，以及主页上剩余文章的摘录。当我实现以下内容时，它会将所有帖子显示为摘录，包括第一篇帖子。

这是 index.php 的代码...

```
 $some_number = 0; 
 if (have_posts()) : while (have_posts()) : the_post();
 $some_number++; 
```

这是 post-homepage.php 的代码...

```
<p>
<?php
    global $some_number;
    if($some_number == 1) {
        the_content(); }
    else {
        the_excerpt();
    }
 ?>
 </p> 
```

有什么想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:39:41.950

您正在循环中初始化 $some_number 。只需在循环之前移动它：

```
$some_number = 0; 
if (have_posts()) : while (have_posts()) : the_post();
     $some_number++; 
```

否则，它将重置每个帖子的变量。

# java - URL命中问题

> ID：12861665
> 
> 赞同：-1
> 
> 时间：2012-10-12T14:51:21.507
> 
> 标签：java, android

我遇到了 URL 问题并得到 null 作为响应。我也尝试过使其编码，但响应没有达到预期..

**这是我的代码：**

```
try
     {          
         String url = "http://mymemory.translated.net/api/get?q=Thanks&langpair=EN|KO" + query;
         Log.i("URL", ">>>"+url);
         JSONObject Responce = getJSONfromURL(url.toString());
         Log.e("", "Responce"+Responce);
     }
     catch (Exception e) {} 
```

**错误日志：**

```
10-12 20:13:35.411: INFO/URL(6844): >>>http://mymemory.translated.net/api/get?q=Thanks&langpair=EN|KO
10-12 20:13:35.531: ERROR/log_tag(6844): Error in http connection java.lang.IllegalArgumentException: Illegal character in query at index 59: http://mymemory.translated.net/api/get?q=Thanks&langpair=EN|KO
10-12 20:13:35.531: ERROR/log_tag(6844): Error converting result java.lang.NullPointerException
10-12 20:13:35.531: ERROR/log_tag(6844): Error parsing data org.json.JSONException: End of input at character 0 of 
10-12 20:13:35.541: ERROR/(6844): Responcenull 
```

**编码后**

URL 编码方法适用..

```
 String query = URLEncoder.encode("Thanks&langpair=EN|KO", "utf-8");
    String url = "http://mymemory.translated.net/api/get?q=" + query;
    Log.i("URL", ">>>"+url);
    JSONObject Responce = getJSONfromURL(url.toString());
    Log.e("", "Responce"+Responce); 
```

**日志 ：：**

```
10-12 20:21:01.180: INFO/URL(7050): >>>http://mymemory.translated.net/api/get?q=Thanks%26langpair%3DEN%7CKO
10-12 20:21:01.710: ERROR/(7050): Responce{"responseData":{"translatedText":"INVALID LANGUAGE PAIR SPECIFIED. EXAMPLE: LANGPAIR=EN|IT USING 2 LETTER ISO OR RFC3066 LIKE ZH-CN. ALMOST ALL LANGUAGES SUPPORTED BUT SOME MAY HAVE NO CONTENT"},"matches":"","responseStatus":403,"responseDetails":"INVALID LANGUAGE PAIR SPECIFIED. EXAMPLE: LANGPAIR=EN|IT USING 2 LETTER ISO OR RFC3066 LIKE ZH-CN. ALMOST ALL LANGUAGES SUPPORTED BUT SOME MAY HAVE NO CONTENT"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:58:46.617

不要对查询字符串中的“=”进行 URLEncode。本质上，您只想对值进行 urlEncode。因此，如果您的 URL 看起来像这样，它将起作用：

```
http://mymemory.translated.net/api/get?q=Thanks&langpair=EN%7CKO 
```

# c# - 为什么这段代码初始化一个对象，然后让另一个对象与它相等？

> ID：12861668
> 
> 赞同：2
> 
> 时间：2012-10-12T14:51:45.570
> 
> 标签：c#, reference, refactoring

这是功能：

```
private static void AddToTree(TreeNode target, DataRow dataRow)
{
    var node2 = new TreeNode(dataRow["name"].ToString())
    {
        ImageIndex = target.ImageIndex,
        SelectedImageIndex = target.SelectedImageIndex,
        Tag = dataRow
    };
    TreeNode node = node2;
    target.Nodes.Add(node);
} 
```

我在整个代码库中都看到了类似的代码。为什么不直接添加`node2`到目标节点而不创建另一个变量？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:10:54.543

你没有错过任何东西。这段代码是多余的。

```
TreeNode node = node2; //<--- Assign the object reference of node2 to node. 
                       //     There is no object copy or wathever. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:53:29.693

我认为你可以更换

```
target.Nodes.Add(node2); 
```

您可以复制参考，但为了在第二次与结果查询或其他处理进行比较，但仅使用此代码，您可以替换

# java - 通用数组转换

> ID：12861669
> 
> 赞同：0
> 
> 时间：2012-10-12T14:51:52.223
> 
> 标签：java, arrays, generics

我有：

```
List<WatchEvent.Kind<Path>> events_kinds = new ArrayList<>();
events_kinds.add(StandardWatchEventKinds.ENTRY_DELETE);
events_kinds.add(StandardWatchEventKinds.ENTRY_CREATE);
events_kinds.add(StandardWatchEventKinds.ENTRY_MODIFY); 
```

比我想使用`register`接受类型作为第二个参数的方法，`Kinds<?>[]`所以我这样做：

```
WatchKey key = path.register(watch_service, (WatchEvent.Kind<Path>[]) events_kinds.toArray()); 
```

但是当我执行代码时，出现以下异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [Ljava.nio.file.WatchEvent$Kind; 
```

现在如何`Kinds<?>[]`从该列表中获取数组？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:55:28.213

你必须这样做：

```
WatchEvent.Kind[] eventsArray = events_kinds.toArray(new WatchEvent.Kind[0]); 
```

根据 Aditya 的评论和更详细的解释：

toArray(T[]) 方法的参数主要用于确定要创建哪种类型的数组来保存集合的元素。最好传入一个也具有必要大小的数组实例，以避免让该方法为您创建另一个数组实例。来自 Javadoc：

```
//@param a the array into which the elements of this list are to be stored, if it is big enough; otherwise, a new array of the same runtime type is allocated for this purpose.
<T> T[] toArray(T[] a); 
```

# java - 来自 Java 的 Velocity EscapeTool

> ID：12861672
> 
> 赞同：0
> 
> 时间：2012-10-12T14:52:02.237
> 
> 标签：java, maven, configuration, classpath, velocity

我在注释处理器上使用 Velocity Escape 工具时遇到问题。首先，我让 Annotation 处理器单独使用速度工作正常，所以我知道设置是正确的。在使用带有转义字符的字符串时，我开始遇到我创建的源的问题。所以我在网上找到了有关Velocity 的[EscapeTool](http://velocity.apache.org/tools/devel/generic/EscapeTool.html)。可以说文档对配置不是很好。

我能够找到一些代码，不记得在哪里，让我开始：

```
ToolManager velocityToolManager = new ToolManager();
velocityToolManager.configure("velocity-tools.xml");
VelocityContext vc =
           new VelocityContext(velocityToolManager.createContext()); 
```

但我在配置部分遇到以下错误：

```
java.lang.RuntimeException: There was an error while parsing the InputStream
    at org.apache.velocity.tools.config.XmlFactoryConfiguration.read(XmlFactoryConfiguration.java:132)
    at org.apache.velocity.tools.config.FileFactoryConfiguration.read(FileFactoryConfiguration.java:140)
    at org.apache.velocity.tools.config.FileFactoryConfiguration.read(FileFactoryConfiguration.java:116)
    at org.apache.velocity.tools.config.FileFactoryConfiguration.read(FileFactoryConfiguration.java:91)
    at org.apache.velocity.tools.config.FileFactoryConfiguration.read(FileFactoryConfiguration.java:69)
    at org.apache.velocity.tools.config.FileFactoryConfiguration.read(FileFactoryConfiguration.java:59)
    at org.apache.velocity.tools.config.ConfigurationUtils.getDefaultTools(ConfigurationUtils.java:79)
    at org.apache.velocity.tools.config.ConfigurationUtils.getAutoLoaded(ConfigurationUtils.java:176)
    at org.apache.velocity.tools.ToolManager.autoConfigure(ToolManager.java:74)
    at org.apache.velocity.tools.ToolManager.<init>(ToolManager.java:68)
    at org.apache.velocity.tools.ToolManager.<init>(ToolManager.java:54)
    at games.jwrestling.core.annotation.processor.CardAnnotationProcessor.process(CardAnnotationProcessor.java:116)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:793)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:722)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.access$1700(JavacProcessingEnvironment.java:97)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1029)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1163)
    at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1108)
    at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:824)
    at com.sun.tools.javac.main.Main.compile(Main.java:439)
    at com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:132)
    at org.bsc.maven.plugin.processor.AbstractAnnotationProcessorMojo.executeWithExceptionsHandled(AbstractAnnotationProcessorMojo.java:424)
    at org.bsc.maven.plugin.processor.AbstractAnnotationProcessorMojo.execute(AbstractAnnotationProcessorMojo.java:250)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.xml.sax.SAXParseException; lineNumber: 23; columnNumber: 58; Error at line 23 char 58: org.apache.velocity.tools.config.Data
    at org.apache.commons.digester.Digester.createSAXException(Digester.java:3181)
    at org.apache.commons.digester.Digester.createSAXException(Digester.java:3207)
    at org.apache.commons.digester.Digester.startElement(Digester.java:1456)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:506)
    at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:182)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1303)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2717)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:489)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at org.apache.commons.digester.Digester.parse(Digester.java:1765)
    at org.apache.velocity.tools.config.XmlFactoryConfiguration.read(XmlFactoryConfiguration.java:128)
    ... 43 more
Caused by: java.lang.ClassNotFoundException: org.apache.velocity.tools.config.Data
    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
    at org.apache.commons.digester.ObjectCreateRule.begin(ObjectCreateRule.java:205)
    at org.apache.commons.digester.Rule.begin(Rule.java:175)
    at org.apache.commons.digester.Digester.startElement(Digester.java:1453)
    ... 56 more 
```

我认为这是一个依赖问题，但依赖关系如下：

```
 <dependency>
            <groupId>org.apache.velocity</groupId>
            <artifactId>velocity</artifactId>
            <version>1.7</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>org.apache.velocity</groupId>
            <artifactId>velocity-tools</artifactId>
            <version>2.0</version>
        </dependency> 
```

org.apache.velocity.tools.config.Data 包含在velocity-tools jar 中。

[你可以在这里](https://bitbucket.org/javydreamercsw/jwrestling/src/a194c01c12d06da1abd46df8134585e6e57a00ba/AnnotationProcessor/src/main/java/games/jwrestling/core/annotation/processor/CardAnnotationProcessor.java?at=default)找到代码（在 repo 上评论）。

如果有兴趣，可以从[https://javydreamercsw@bitbucket.org/javydreamercsw/jwrestling查看源代码。](https://javydreamercsw@bitbucket.org/javydreamercsw/jwrestling)

任何帮助都非常受欢迎！

**更新：** 以下是velocity-tools.xml 的内容，它是velocity-tool jar 中的副本：

```
<tools> 
    <data type="number" key="TOOLS_VERSION" value="2.0"/>
    <data type="boolean" key="GENERIC_TOOLS_AVAILABLE" value="true"/>
    <toolbox scope="application">
        <tool class="org.apache.velocity.tools.generic.AlternatorTool"/>
        <tool class="org.apache.velocity.tools.generic.DisplayTool"/>
        <tool class="org.apache.velocity.tools.generic.MathTool"/>
        <tool class="org.apache.velocity.tools.generic.NumberTool"/>
        <tool class="org.apache.velocity.tools.generic.ComparisonDateTool"/>
        <tool class="org.apache.velocity.tools.generic.ClassTool"/>
        <tool class="org.apache.velocity.tools.generic.ConversionTool"/>
        <tool class="org.apache.velocity.tools.generic.EscapeTool"/>
        <tool class="org.apache.velocity.tools.generic.FieldTool"/>
        <tool class="org.apache.velocity.tools.generic.ListTool"/>
        <tool class="org.apache.velocity.tools.generic.ResourceTool"/>
        <tool class="org.apache.velocity.tools.generic.SortTool"/>
    </toolbox>
    <toolbox scope="request">
        <tool class="org.apache.velocity.tools.generic.LoopTool"/>
        <tool class="org.apache.velocity.tools.generic.ContextTool"/>
        <tool class="org.apache.velocity.tools.generic.LinkTool"/>
        <tool class="org.apache.velocity.tools.generic.RenderTool"/>
    </toolbox>
</tools> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T15:28:40.420

```
XmlFactoryConfiguration factoryConfiguration = new XmlFactoryConfiguration("Default Tools");
        try {
            factoryConfiguration.read(new FileInputStream(new File(Thread.currentThread().getContextClassLoader().getResource("/").getFile(), TOOL_BOX_CONF_FILE)));
        } catch (IOException e) {
            e.printStackTrace();
        }
        ToolboxFactory factory = factoryConfiguration.createFactory();
        factory.configure(factoryConfiguration);
        toolContext = new ToolContext();
        for (String scope : Scope.values()) {
            toolContext.addToolbox(factory.createToolbox(scope));
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T13:14:16.050

尝试

```
 new ToolManager(false,false) 
```

# javascript - 使用 javascript 在资源文件中为自定义操作编码单引号

> ID：12861675
> 
> 赞同：2
> 
> 时间：2012-10-12T14:52:06.763
> 
> 标签：javascript, xml, resource-files

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:02:24.643

In C# you have the System.Web.HttpUtility.JavaScriptStringEncode() call available that will prepend single quotes with a backslash.

[http://msdn.microsoft.com/en-us/library/system.web.httputility.javascriptstringencode.aspx](http://msdn.microsoft.com/en-us/library/system.web.httputility.javascriptstringencode.aspx)

From the URL above:

`This method encodes strings. For instance, single quotation marks and double quotation marks are included as \' and \" in the encoded string.`

# javascript - 上传到 svg-edit 时，光栅图像意外调整大小

> ID：12861677
> 
> 赞同：0
> 
> 时间：2012-10-12T14:52:12.080
> 
> 标签：javascript, svg, svg-edit

这是一个非常特定于项目的问题，与我的[svg-edit](http://code.google.com/p/svg-edit/)实现有关。

我已经实现了更新的“ext-server_opensave.js”（来自[这个](http://code.google.com/p/svg-edit/issues/detail?id=739)问题），以便用户能够从他们的文件系统上传光栅图像。

我在“ext-server_opensave.js”中遇到问题的代码片段如下：

```
 function importImage(url) {
        var newImage = svgCanvas.addSvgElementFromJson({
            "element": "image",
            "attr": {
                "x": 0,
                "y": 0,
                "width": 0,
                "height": 0,
                "id": svgCanvas.getNextId(),
                "style": "pointer-events:inherit"
            }
        });
        svgCanvas.clearSelection();
        svgCanvas.addToSelection([newImage]);
        svgCanvas.setImageURL(url);
    } 
```

在那里设置宽度和高度属性时不起作用，其他属性起作用。这是一个奇怪的错误 - 第一个图像上传会以原始大小上传文件，然后每个后续图像上传都会调整为 48x48。如果我在上面粘贴的那个方法中设置宽度和高度值，我会在一瞬间看到这些尺寸的图像，然后它会重新调整为 48x48。基本上，在 和 之后调整图像大小的链条中有一些处理程序/方法`svgCanvas.addSvgElementFromJson`，`svgCanvas.addToSelection`经过数小时的 javascript 调试后，我无法弄清楚在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:54:37.103

只是一个狂野的镜头，但也许在第 128 行添加......

```
case 'import_img':
        svgCanvas.setGoodImage(str64);
        importImage(str64);
        break; 
```

`setGoodImage()`插入新图像时设置默认图像大小。您看到的 48x48 大小是 SVG Edit 徽标的大小。

# javascript - 当用户在地理围栏之外时发出一次警报

> ID：12861678
> 
> 赞同：0
> 
> 时间：2012-10-12T14:52:16.943
> 
> 标签：javascript, jquery, arrays, google-maps, google-maps-api-3

我有下面的代码检查地图标记是在地理围栏内部还是外部。

我将使其警报检测到超出范围。

我的问题是地图标记不断刷新，我不希望警报重复一遍。

闹钟响起时我需要设置一些东西。然后仅在该事物未设置时才发出警报。

当检测到用户回到边界内时，它也会取消设置。

```
 if (name === f.contact) {
        var fence = new google.maps.LatLng(f.lat, f.lng);
        var dist = google.maps.geometry.spherical.computeDistanceBetween(posi, fence);
        // check if in/out of fence
        if (dist > f.radius) {
            console.log(f.contact+" : "+dist+" meters - outside the fence");
            // OMG outside the fence play an alarm
        } else {
            console.log(f.contact+" : "+dist+" meters - inside the fence");
            // Back inside the fence, reset the alarm
        }
    } 
```

我在想可能做一个这样的数组

```
var alertSent = []; 
```

然后如果在地理围栏之外添加用户名

```
alertSent.push(name); 
```

我将如何检查名称是否存在于数组中？

回到栅栏内时，我将如何从数组中删除名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:05:02.070

如果您最终使用数组，那么您将搜索每个索引，直到找到类似的字符串

[如何检查数组是否包含 JavaScript 中的对象？](https://stackoverflow.com/questions/237104/array-containsobj-in-javascript) 或 [查找项目是否在 JavaScript 数组中的最佳方法？](https://stackoverflow.com/questions/143847/best-way-to-find-an-item-in-a-javascript-array)

你也可以想一想，注册事件和事件监听器来处理这个问题，会是一个更好的设计。

或者您也可以使用 hashmap 类型的 javascript 实现，例如使用

```
alertSent["driver1"]=true;, 
```

在这种情况下，查找将很简单，只需使用 ,

> alertSent["driver1"]

获取布尔值。但在这种情况下要注意数组空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:05:42.273

您可以将对象用作关联数组，并将名称用作键，并将布尔值用作已发送/未发送。如果它根本不包含 name，alertSent[name] 也会评估为假值。

```
var alertSent = {};

// if user outside: check
if (!alertSent[name]) {
    // show alert
    // remember that alert was shown
    alertSent[name] = true;
}

// remove name from alertSent:

alertSent[name] = false; 
```

# c# - 以数组为键搜索字典？

> ID：12861679
> 
> 赞同：0
> 
> 时间：2012-10-12T14:52:19.720
> 
> 标签：c#, .net, arrays, search

我想知道是否有可能有一个字典，其中键是一个字符串数组，然后通过将搜索词与数组进行比较来搜索字典？

例如：

我的数组中有 7 个单词

该数组是关键。我想在字典中搜索键可能包含单词“has”的任何键/值。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:54:15.197

不，这基本上是行不通的——即使使用自定义相等比较器也是如此。听起来您*真正*想要的是单个单词的字典，其中每个单独的条目都有多个值。[`ToLookup`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.tolookup.aspx)如果您已经将输入数据作为一个序列，您可以使用 非常轻松地创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:57:34.010

也许带有自定义比较器的字典可能是要走的路（[http://msdn.microsoft.com/en-us/library/ms132072.aspx](http://msdn.microsoft.com/en-us/library/ms132072.aspx)），但在您的示例中（数组包含一个单词），可能会有更多结果匹配一把钥匙。所以 Dictionary 可能不是最好的存储选择，因为它只会返回一个值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:16:04.630

我会使用 linq 将单词集合（键）及其值转换为字典，其中作为键一个单词，作为值，一个包含包含该单词的键的所有值的数组，确切地说。

```
public class WordsWithValue
{
    public string[] Words { get; set; }
    public object Value { get; set; }
}

public IDictionary<string, object[]> GetValuesForWord(IEnumerable<WordsWithValue> wordsWithValues)
{
    return wordsWithValues.SelectMany(wwv => wwv.Words.Select(word => Tuple.Create(word, wwv.Value)))
                            .GroupBy(tuple => tuple.Item1, tuple => tuple.Item2, (word, values) => Tuple.Create(word, values.ToArray()))
                            .ToDictionary(tuple => tuple.Item1, tuple => tuple.Item2);
} 
```

您当然可以用更多方法重写它以使其更清晰，另一种选择是使用匿名类而不是`Tuple`我在这里使用的 s 来获得比`Item1`and更合理的名称`Item2`。

# android - 从数据库中插入/检索图像

> ID：12861681
> 
> 赞同：0
> 
> 时间：2012-10-12T14:52:23.963
> 
> 标签：android, image, insert

如何解决这些问题？

我不知道接下来会发生什么。

我解决了这些问题，但你不知道它不起作用

代码

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>  

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/="vertical"  ="fill_parent"  

android:layout_height="fill_parent"  

android:background="#DCDCDC">  

<TextView    

android:layout_width="fill_parent"   

android:layout_height="wrap_content"   

android:text="welcome"  

android:textColor="#000000"  

/>  

<ImageView   

android:id="@+id/img"  

android:layout_width="wrap_content"   

android:layout_height="wrap_content"  

android:background="@drawable/icon"  

/>  

<Button   

android:id="@+id/btn_submit"  

android:text="Submit"  

android:layout_width="wrap_content"   

android:layout_height="wrap_content"/>  

<ImageView   

android:id="@+id/img2"  

android:layout_width="wrap_content"   

android:layout_height="wrap_content"  

android:background="@drawable/icon"/>  

<Button   

android:id="@+id/btn_retrieve"  

android:text="Retrieve"  

android:layout_width="wrap_content"   

android:layout_height="wrap_content"/>  

</LinearLayout> 
```

公共类.java

```
package com.example.demomediaproject;

import android.app.Application;  

public class CommonClass extends Application{  

byte[] profileImageInBytes;  

} 
```

数据库方法.java

```
package com.example.demomediaproject;  

import android.content.Context;  

import android.database.Cursor;  

import android.database.SQLException;  

import android.database.sqlite.SQLiteDatabase;  

import android.database.sqlite.SQLiteOpenHelper;  

public class DatabaseMethods {  

private static final String databaseName = "DemoDb";  

private static final int databaseVersion = 1;  

private static final String projectCustomProfiles =  

"CREATE TABLE IF NOT EXISTS PROJECT_CUSTOM_PROFILES (PROFILE_IMAGE VARBINARY(MAX));";  

private final Context context;   

private DatabaseHelper DBHelper;  

private SQLiteDatabase db;  

Cursor cursor;  

int count;  

boolean isProjectNamePresent=false;  

boolean isProfileNamePresent = false;  

public DatabaseMethods(Context ctx)   

{  

this.context = ctx;  

DBHelper = new DatabaseHelper(context);  

}  

private static class DatabaseHelper extends SQLiteOpenHelper   

{  

public DatabaseHelper(Context context)   

{  

super(context, databaseName, null, databaseVersion);  

}  

@Override  

public void onCreate(SQLiteDatabase db)   

{  

db.execSQL(projectCustomProfiles);  

}  

@Override  

public void onUpgrade(SQLiteDatabase db, int oldVersion,int newVersion)   

{  

db.execSQL("DROP TABLE IF EXISTS PROJECT_CUSTOM_PROFILES");  

onCreate(db);  

}  

}      

//---opens the database---  

public DatabaseMethods open() throws SQLException   

{     

db = DBHelper.getWritableDatabase();  

return this;  

}  

//---closes the database---      

public void close()   

{  

DBHelper.close();  

}  

public void storeCustomProfiles(byte[] imgData)  

{  

String query;  

query = "INSERT OR REPLACE INTO PROJECT_CUSTOM_PROFILES (PROFILE_IMAGE) 
VALUES('"+imgData+"')";

db.execSQL(query);  

    }  

public Cursor fetchProfileImageFromDatabase()  

{  

return  db.rawQuery("SELECT PROFILE_IMAGE FROM PROJECT_CUSTOM_PROFILES " , null);  

}  

public int getCountForCustomProfiles()  

{  

cursor= db.rawQuery("SELECT COUNT(PROFILE_IMAGE) FROM PROJECT_CUSTOM_PROFILES",null);  

if(cursor.moveToFirst())  

{  

count= cursor.getInt(0);  

}  

cursor.close();  

return count;  

}  

} 
```

DemomediaprojectActivity.java

```
package com.example.demomediaproject;  

import java.io.ByteArrayInputStream;  

import java.io.ByteArrayOutputStream;  

import android.app.Activity;  

import android.app.AlertDialog;  

import android.content.DialogInterface;  

import android.content.Intent;  

import android.database.Cursor;  

import android.graphics.Bitmap;  

import android.graphics.Bitmap.CompressFormat;  

import android.graphics.BitmapFactory;  

import android.net.Uri;  

import android.os.Bundle;  

import android.provider.MediaStore.MediaColumns;  

import android.view.View;  

import android.view.View.OnClickListener;  

import android.widget.Button;  

import android.widget.ImageView;  

public class DemomediaprojectActivity extends Activity implements OnClickListener {  

ImageView pic,pic1;  

Button submitButton,retrieveButton;  

private static final int CAMERA_PIC_REQUEST = 1337;   

private static final int SELECT_PICTURE = 1;  

String fileManagerString,imagePath;  

String selectedImagePath="";  

int columnIndex;  

CommonClass commClass;  

/** Called when the activity is first created. */  

@Override  

public void onCreate(Bundle savedInstanceState) {  

super.onCreate(savedInstanceState);  

setContentView(R.layout.main);  

pic=(ImageView)findViewById(R.id.img);  

pic.setOnClickListener(this);  

pic1=(ImageView)findViewById(R.id.img2);  

submitButton=(Button)findViewById(R.id.btn_submit);  

submitButton.setOnClickListener(this);  

retrieveButton=(Button)findViewById(R.id.btn_retrieve);  

retrieveButton.setOnClickListener(this);  

commClass = ((CommonClass) getApplicationContext());  

DatabaseMethods db=new DatabaseMethods(this);  

db.open();  

}  

@Override  

public void onClick(View arg0)  

{DatabaseMethods db=new DatabaseMethods(this);  

// TODO Auto-generated method stub  

switch (arg0.getId())  

{  

case R.id.img:  

showalert();  

break;  

case R.id.btn_submit:  

db.open();  

db.storeCustomProfiles(commClass.profileImageInBytes);  

db.close();  

break;  

case R.id.btn_retrieve:  

db.open();  

Cursor cursor = db.fetchProfileImageFromDatabase();  

if(cursor != null)  

{  

if(cursor.moveToFirst())  

{  

do  

{  

//byte[] data = cursor.getBlob(cursor.getColumnIndex("PROFILE_IMAGE"));  

//pic1.setImageBitmap(BitmapFactory.decodeByteArray(data, 0, data.length));  

//String temp=cursor.getBlob(cursor.getColumnIndex("PROFILE_IMAGE")).toString();  

//byte[] data=temp.getBytes();  

//pic1.setImageBitmap(BitmapFactory.decodeByteArray(data, 0, data.length));  

byte[] data = cursor.getBlob(cursor.getColumnIndex("PROFILE_IMAGE"));  

ByteArrayInputStream imageStream = new ByteArrayInputStream(data);  

Bitmap theImage = BitmapFactory.decodeStream(imageStream);  

// pic1.setImageBitmap(theImage);  

}  

while(cursor.moveToNext());  

}  

cursor.close();  

}  

db.close();  

break;  

default:  

break;  

}  

}

/*private byte[] getBitmapAsByteArray(Bitmap theImage) 

{ 

// TODO Auto-generated method stub 

ByteArrayOutputStream outputStream = new ByteArrayOutputStream(); 

// Middle value is quality, but PNG is lossless, so it's ignored. 

theImage.compress(CompressFormat.PNG, 0, outputStream); 

return outputStream.toByteArray(); 

}*/  

private void showalert()  

{  

 // TODO Auto-generated method stub  

AlertDialog.Builder builder = new AlertDialog.Builder(this);  

builder.setTitle("Select Photo Source")  

.setMessage("Select Pictures From Media Library")  

.setCancelable(false)  

.setPositiveButton("Cancel", new DialogInterface.OnClickListener() {  

public void onClick(DialogInterface dialog, int id) {  

}  

})  

.setNeutralButton("Select Picture", new DialogInterface.OnClickListener() {  

public void onClick(DialogInterface dialog, int id1) {  

Intent intent = new Intent();  

intent.setType("image/*");  

intent.setAction(Intent.ACTION_GET_CONTENT);  

startActivityForResult(Intent.createChooser(intent, "select picture"), SELECT_PICTURE);   

}  

})  

.setNegativeButton("New", new DialogInterface.OnClickListener() {  

//camera function call  

public void onClick(DialogInterface dialog, int id2) {  

// TODO Auto-generated method stub  

Intent intentCamera  = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);  

startActivityForResult(intentCamera,CAMERA_PIC_REQUEST);  

 }  

});  

AlertDialog alert = builder.create();  

alert.show();  

}  

public void onActivityResult(int requestCode, int resultCode, Intent data)   

{  if (resultCode == Activity.RESULT_OK)  

{   if(requestCode == SELECT_PICTURE)   

{  

Uri selectedImageUri = data.getData();  

//OI FILE Manager  

fileManagerString = selectedImageUri.getPath();  

//MEDIA GALLERY  

selectedImagePath =getPath(selectedImageUri);  

pic.setImageURI(selectedImageUri);  

imagePath.getBytes();  

}  

if(requestCode == CAMERA_PIC_REQUEST)  

{  

Bitmap image = (Bitmap) data.getExtras().get("data");  

ByteArrayOutputStream stream = new ByteArrayOutputStream();  

 image.compress(Bitmap.CompressFormat.JPEG, 100, stream);  

CommonClass commClass = ((CommonClass)getApplicationContext());  

 commClass.profileImageInBytes = stream.toByteArray();  

pic.setImageBitmap(BitmapFactory.decodeByteArray(commClass.profileImageInBytes, 0, 
commClass.profileImageInBytes.length));  
}  
}  
}  
private String getPath(Uri uri)  
{  

// TODO Auto-generated method stub  

String[] projection = { MediaColumns.DATA };  

Cursor cursor = managedQuery(uri, projection, null, null, null);  

columnIndex = cursor.getColumnIndexOrThrow(MediaColumns.DATA);  

 cursor.moveToFirst();  

imagePath = cursor.getString(columnIndex);  

return cursor.getString(columnIndex);  

}  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:15:13.343

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

使用此加载器通过延迟加载下载图像，然后按照之前的 sqlite 演示将位图数据添加到数据库中

# node.js - 将 http.request 块保存到 griffS node.js

> ID：12861690
> 
> 赞同：0
> 
> 时间：2012-10-12T14:52:47.917
> 
> 标签：node.js, gridfs

您可以将从`http.request`帖子中接收到的数据直接保存到 GridFS 中以最小化内存使用吗？谁能给我一个例子，注意：数据大小为 10Mb+，我使用 Post 发送，我不能这样做

```
request.addListener('data', function (chunk) {
    data += chunk;
}); 
```

因为我需要尽量减少内存使用。我需要类似的东西：

```
request.addListener('data', function (chunk) {
   db.append(chunk);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:57:12.920

您必须首先将接收到的数据转换为 JSON 格式，然后您可以简单地执行以下操作：

```
var jsonStr = <your response data>;
db.posts.insert({ "data": jsonStr}); 
```

# c# - 将数组初始化为一个值

> ID：12861698
> 
> 赞同：0
> 
> 时间：2012-10-12T14:53:32.860
> 
> 标签：c#

> **可能重复：**
> [如何使用单个值填充/实例化 C# 数组？](https://stackoverflow.com/questions/1014005/how-to-populate-instantiate-a-c-sharp-array-with-a-single-value)

给定双数组

```
 double[] constraintValue = new double[UnUsedServices.Count]; 
```

我想用 初始化所有条目`-1`，有简单的语法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:57:19.267

```
double[] constraintValue = Enumerable.Repeat<double>(-1d,UnUsedServices.Count).ToArray(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T14:55:25.357

```
for(int i = 0; i < constraintValue.Length; i++)
    constraintValue[i] = -1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T14:57:17.613

```
 double[] constraintValue = Enumerable.Repeat(-1D, UnUsedServices.Count).ToArray(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T15:02:10.490

您的问题的确切答案是：

```
for(var i =0; i < constraintValue.Length; i ++)
{
    constraintValue[i] = -1;
} 
```

但是，如果您想拥有“未设置”的值，为什么不使用`Nullable<double>`？

```
double?[] constraintValue = new double?[UnUsedServices.Count];

constraintValue[10] = 42D;
constraintValue[20] = 0D;

var x1 = contraintValue[10].HasValue; // true
var x1val = contraintValue[10].Value; // 42D

var x2 = contraintValue[20].HasValue; // true
var x2val = contraintValue[20].Value; // 0D

var x3 = contraintValue[10].HasValue; // false
//var x3val = contraintValue[10].Value; // exception 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T14:55:44.500

你可以试试

```
for(int i =0; i < constraintValue.Length; i ++)
{
constraintValue[i] = -1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T14:55:47.917

不知道您是否会称其为“简单”：

```
double[] constraintValue = new double[]{ -1, -1, 
                                         ... (UnUsedServices.Count times)}; 
```

当然，执行此操作的标准方法是*循环*遍历每个数组项以对其进行初始化：

```
for(int i = 0; i < constraintValue.Length; i++)
{
    constraintValue[i] = -1;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-12T14:56:36.450

```
for (int i = 0; i < constraintValue.Length; i++)
    constraintValue[i] = -1; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-12T14:57:36.130

```
 int[] initilize_array = newint[10];

    for (int i = 0; i <initilize_array.Length; i++)

    {

    initilize_array[i] = -1;

    } 
```

这是最简单的方法

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-12T15:05:28.037

如果您需要更快的性能，那么 Enumerable.Repeat 使用 TPL 并行执行：

```
double[] constraintValue = new double[UnUsedServices.Count];
Parallel.For(0, UnUsedServices.Count, index => constraintValue[index] = -1); 
```

# c# - 如何在 XNA 中渲染 kinect 深度/颜色流图像

> ID：12861702
> 
> 赞同：2
> 
> 时间：2012-10-12T14:53:41.287
> 
> 标签：c#, xna-4.0, kinect-sdk

我是 kinect 的 Windows 开发初学者。我想显示没有背景的深度流或颜色流，就像[这里](http://marketplace.xbox.com/en-US/Product/Your-Shape-Fitness-Evolved/66acd000-77fe-1000-9115-d8025553084f)的一样，以红色、紫色显示。可能吗 ？

# php - 用 + 增加计数器并将值存储到数据库

> ID：12861704
> 
> 赞同：1
> 
> 时间：2012-10-12T14:53:55.090
> 
> 标签：php, jquery, mysql, counter

我将创建一个计数器，在用户按下数字键盘上的 + 按钮时从 0 计数到 100 一步。

这样做的目的是创建一个商店柜台（我们在显示器上显示当前客户编号，我希望它成为基于网络的）。所以我正在使用 jQuery，我希望当前数字也存储在 MySQL 数据库中。

我该怎么做呢？我不想使用表格，但如果必须，我会。我尝试了一些解决方案，但没有一个真正可用。问题是我对jQuery的了解不够。所以在正确的方向上的一些指针会很好。

我希望流程是这样的：

我有一个包含我将从数据库中获取的数字的元素，到目前为止一切顺利，我自己肯定可以做到这一点。但是，然后用户在小键盘上按 + 我希望这个值增加 1。然后我希望脚本将这个新值存储在数据库中并从数据库中获取新值并再次将其呈现在元素中。

正如我所说，我非常感谢您对此提出一些建议。也许我想多了。

顺便说一句，我正在使用 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:02:46.217

因此，您需要处理被单击的“+”按钮，并进行 AJAX 调用。就像是：

[http://jsfiddle.net/QE3xd/1/](http://jsfiddle.net/QE3xd/1/)

HTML：

```
<input type="text" id="current" readonly="readonly" value="2" />
<input type="button" id="increaser" value="+" /> 
```

Javascript：

```
$(document).ready(function () {
    $("#increaser").on("click", add);
});

function add() {
    // Make AJAX call to PHP method (where DB operation is done)

    $.ajax({
        url: "/echo/json/",
        cache: false,
        data: {"increment_by": 1},  // This line may be unnecessary, as you could assume it increases the value by 1 every time (but using this could make it customizable
        dataType: "json",
        success: function (data) {
            // Should return data in format: {"new_current": 4}
            //$("#current").val(data.new_current);
            // ^^ the real line
            $("#current").val(+$("#current").val()+1);
            // ^^ just to simulate the new number being returned
        },
        error: function () {
            console.log("there was an error");
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:04:05.687

您所描述的是一个典型的 MVVM 问题。具有交互的按钮和显示元素的用户界面。

[我有一些很好的经验，可以结合使用knockoutjs](http://knockoutjs.com/)库和 jquery来解决此类问题。在教程中是一个[带有 counter 的示例](http://knockoutjs.com/examples/clickCounter.html)，就像你的一样。

其他 2 个要求（检测小键盘键和发布）可以通过按键插件和 jquery 轻松解决`$.post`

# c# - 如何通过 WCF 服务使用 ICustomTypeProvider？

> ID：12861711
> 
> 赞同：0
> 
> 时间：2012-10-12T14:54:05.477
> 
> 标签：c#, wcf, dynamic

我需要在我的项目中使用从 ICustomTypeProvider 扩展的对象来支持动态属性，它工作正常，但现在我需要通过 WCF 服务发送这个对象。知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:08:32.777

WCF 提供了自己的机制来传输自定义数据。该接口称为[IExtensibleDataObject](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iextensibledataobject.aspx)。任何添加到[ExtensionDataObject](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.extensiondataobject.aspx)的数据都可以在服务器端访问（该数据不需要在 DataContract 上声明）。

# sockets - WinRT 写入 TCP 流不起作用

> ID：12861716
> 
> 赞同：2
> 
> 时间：2012-10-12T14:54:17.210
> 
> 标签：sockets, tcp, windows-8, windows-runtime

我已经开始开发“WinRT”应用程序（适用于 Windows 8 的“Metro”风格应用程序）。应用程序应该通过 TCP 流读取和写入一些数据。阅读工作正常，但写作不起作用。您可以在下面找到使用完整 .NET Framework（有效）的代码：

```
var client = new TcpClient();
client.Connect(IPAddress.Parse("192.168.178.51"), 60128);
var stream = client.GetStream();
var writer = new StreamWriter(stream);
writer.WriteLine("ISCP\0\0\0\x10\0\0\0.....");
writer.Flush(); 
```

相比之下，以下代码不起作用：

```
var tcpClient = new StreamSocket();
await tcpClient.ConnectAsync(new HostName("192.168.178.51"), "60128");
var writer = new DataWriter(_tcpClient.OutputStream);
writer.WriteString("ISCP\0\0\0\x10\0\0\0....");
writer.FlushAsync(); 
```

WriteString 返回正确长度的字符串 (25)，但另一端没有收到正确的命令。通过 Wireshark，我还看到了完整 .NET 版本的正确包，但不是 WinRT 版本。

如何解决这个问题？

.NET 版本：

![.NET 网络流量](../Images/4584a3ac177a5bd5fca30eae245814c1.png)

WinRT 版本：

![WinRT 网络流量](../Images/034a58acc0e1d157ca0d15f02ee846b6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T18:14:39.983

调用 writer.WriteString() 后，您需要通过调用 writer.StoreAsync() 实际提交缓冲区中的日期

对 wrtier.WriteXX 的任何调用都只会将数据存储在内存中。一旦你调用 writer.StoreAsync() ，内存中的数据就会被发送。

我的猜测是 StreamWrtiers.WriteLine 在一次调用中为您完成此操作。

# django - 在没有硬编码本地目录的情况下引用 MEDIA_ROOT

> ID：12861720
> 
> 赞同：0
> 
> 时间：2012-10-12T14:54:32.750
> 
> 标签：django, url, media

如何更改 MEDIA_ROOT 使其不是硬编码的目录值？

设置.py

```
 MEDIA_URL = '/media/'
    MEDIA_ROOT = '/Users/blah/djangoproj/abc/abc/media/static/' 
```

.py 文件

```
from django.conf import settings
print settings.MEDIA_ROOT 
```

网址.py

```
from django.utils.translation import ugettext_lazy as _
from django.conf.urls.defaults import *
from django.conf import settings

urls = (...
(r'^%s(?P<path>.*)$'%settings.MEDIA_URL, 'django.views.static.serve', {
        'document_root': settings.MEDIA_ROOT,
    }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:01:08.190

这应该允许您在文件夹之间轻松移动项目：

如果您的路径是 /home/user/projects/app/static/media/

```
SITE_ROOT = os.path.realpath(os.path.dirname(__file__))
MEDIA_ROOT = os.path.join(SITE_ROOT, 'static/media') 
```

# php - 单击javascript onclick时，php搜索不会清除

> ID：12861723
> 
> 赞同：1
> 
> 时间：2012-10-12T14:54:37.777
> 
> 标签：php, javascript, mysql, forms

所以这就是我所拥有的 - 一个 javascript onclick 事件，它将从我的 MySQL 数据库数据中解析 json 并在有人点击座位时显示它。

```
 var jsonData = <?php echo json_encode($array); ?>;

function displayInfoForDiv(i){
    document.getElementById('fname').innerHTML = jsonData[i].first_name;
    document.getElementById('lname').innerHTML = jsonData[i].last_name;
    } 
```

输出

```
 <?php while ($row = mysql_fetch_array($sql)){ ?>
    <p><span id="fname"><?php echo $row['first_name']; ?></span></p> 
    <p><span id="lname"><?php echo $row['last_name']; ?></span></p>
    <?php } ?> 
```

当您尝试查找名称时，PHP 用于我的搜索框 - 我正在使用它

```
 $sql = mysql_query("select * from people where first_name like '%$term%' OR last_name LIKE '%$term2%'"); 
```

所以我遇到的问题是，当我搜索马特时，会出现一个以上的结果。说：

马特·哈塞尔贝克
马特·休

但是如果我使用 onclick 事件并点击 joe 的座位，它会显示如下：

乔·弗里尔
马特·休

所以问题是当我触发 onClick 事件时搜索结果将保留，但第一个会改变。

我的问题是，当我单击座位以清除搜索结果并只显示一个但当我进行搜索以显示相似名称时，有没有办法。

我正在使用 PHP 和 JS 来调用相同的数据，因为 JS 只有一个范围的楼层，而 php 正在从数据库中获取所有内容。

希望这很清楚，并感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:30:58.797

你有两个问题在这里发生。

1.  您多次为 id 属性使用相同的值。
2.  您的结果设置在逻辑上存在缺陷

**问题 1 的解决方案**

*将 id 属性更改为 class 属性*

当您在 javascript 中使用 document.getElementById 时，它会返回具有该 id 的第一个元素。这意味着如果您有多个具有相同值的 id，则只会选择第一个元素。所以你的功能应该改为以下

```
function displayInfoForDiv(i){
document.getElementsByClassName('fname')[i].innerHTML = jsonData[i].first_name;
document.getElementsByClassName('lname')[i].innerHTML = jsonData[i].last_name;
} 
```

**问题 2 的解决方案**

*   *使用模板获取结果*

*   *将所有结果包装在一个 div 标签中*

通过将结果包装到 div 标签中，您将能够通过清除该 div 标签的 html 来清除结果。

```
<div id='Results'>
   <?php while ($row = mysql_fetch_array($sql)){ ?>
   <p><span class="fname"><?php echo $row['first_name']; ?></span></p> 
   <p><span class="lname"><?php echo $row['last_name']; ?></span></p>
   <?php } ?>
</div>

<script>
function clearResults()
{
    document.getElementById('Results').innerHTML='';
}
</script> 
```

要使用结果模板，我建议使用[underscore.js](http://underscorejs.org/#template)

因此，满足您需求的模板如下所示：

```
<script id='result-template' type="text/x-jquery-tmpl">
    <p><span class="fname">${first_name}</span></p> 
    <p><span class="lname">${last_name}</span></p>
</script> 
```

要使用该模板，您将执行以下操作：

*下面的代码假定您已包含 underscore.js*

```
function LoadResults(jsonData)
{
    _.templateSettings = {
        interpolate: /\$\{(.+?)\}/g
    };
    var output='',
    resultDiv=document.getElementById('Results');
    template= _.template(
        document.getElementById('result-template').innerHTML
        );

    clearResults();

     for(x in jsonData)
     {
        resultDiv.innerHTML+=template(jsonData[x]);
     }
} 
```

# java - 为什么你不能有一个“列表 >“在Java中？

> ID：12861726
> 
> 赞同：29
> 
> 时间：2012-10-12T14:54:45.450
> 
> 标签：java, list, arraylist

在 Java 中，为什么以下代码行不起作用？

```
List<List<String>> myList = new ArrayList<ArrayList<String>>(); 
```

如果我将其更改为

```
List<ArrayList<String>> myList = new ArrayList<ArrayList<String>>(); 
```

起初，我想也许你不能有一个接口列表，但我可以创建一个`List<Runnable>`就好了。

想法？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-12T14:58:01.597

泛型类型更加迂腐。

`List`表示`List`或任何子类型，但`<List>`仅表示`List`. 如果你想要一个子类型，你需要有`<? extends List>`

我怀疑你可以使用

```
List<List<String>> myList = new ArrayList<List<String>>(); 
```

* * *

您不能这样做的原因是您可以使用对引用的引用，并且您必须小心额外的间接级别。

```
// with one level of indirection its simple.
ArrayList alist = new ArrayList();
List list = aList; // all good
list = new LinkedList(); // alist is still good. 
```

使用泛型，您可以有两个间接级别，这会给您带来问题，因此它们会更加迂腐地避免这些问题。

```
// with two levels of indirection
List<ArrayList> alist = new ArrayList<ArrayList>();
List<List> list = (List) alist; // gives you a warning.
list.add(new LinkedList()); // adding a LinkedList into a list of ArrayList!!
System.out.println(alist.get(0)); // runtime error 
```

印刷

```
Exception in thread "main" java.lang.ClassCastException: java.util.LinkedList
     cannot be cast to java.util.ArrayList 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-12T15:01:29.597

让我们从这个开始：

```
 ArrayList<ArrayList<String>> myList = new ArrayList<ArrayList<String>>(); 
```

这是创建一个 ArrayList，其元素是 ArrayList。

现在假设我们可以将其分配给

```
 List<List<String>> myList2 = myList. 
```

现在，我们应该能够做到这一点：

```
 myList2.add(new LinkedList<String>()); 
```

但这意味着我们已将 LinkedList 添加到其元素应该是 ArrayLists 的列表中。哎呀！！！

实际上，`myList`to的分配`myList2`是不合法的……这确保了不可能向对象添加错误的`List<String>`类型`ArrayList<ArrayList<String>>`。（不，彼得，这*不仅仅是*迂腐:-​​)）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T15:02:42.147

只有顶级集合可以声明为实现类，而嵌套的集合必须保持接口，直到您实际创建实例：

```
List<List<String>> rootList = new ArrayList<List<String>>(); 
```

然后当您创建要进入的元素时，将其作为实现：

```
List<String> nodeList = new ArrayList<String>();
rootList.add(nodeList); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T15:02:01.480

它`Type`从左侧（声明）侧到`Type`右侧（实例化）侧进行比较。在左侧，您的类型`List<String>`在右侧，它是`ArrayList<String>`. 如果抱怨差异。

请将右侧（实例化）更新为列表，即

```
 List<List<String>> myList = new ArrayList<List<String>>(); 
```

这应该可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-10T14:26:00.290

我知道这是一个老问题，但我只是想分享我的想法。

我个人并没有制作列表列表，而是制作了一个类型 [] ( `List<Type[]> listArray = new ArrayList<Type[]>();`) 的列表，我生成了一个仅包含类型 ( `List<Type> list = new ArrayList<Type>();`) 的单独列表，然后`.add(list.toArray())`. 这样，它比令人困惑的 List of Lists 语法更清晰、更容易阅读。

例如，在最近的一个项目中，我有一个输入文件，其中每一行只有一个“0”表示原始文件中的一个新行（它是一种加密算法）：

```
String[] input = getInputContents(inFile);
List<String> currentBuffer = new ArrayList<String>();
List<String[]> buffers = new ArrayList<String[]>();

for(String line : input) {
    if(line.equals("0")) {
        buffers.add((String[])currentBuffer.toArray());
        currentBuffer = new ArrayList<String>();
    } else {
        currentBuffer.add(line);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-21T10:03:08.537

`list<list<string>> l1=new list<list<string>>();`如果列表中包含另一个列表，则允许使用。

```
public final class CPanelXMLBuilder extends PanelXMLBuilder {

    public CPanelXMLBuilder(AuthenticatedUser pAuthenticatedUser, Map<String, Object> pSessionMap, Map<String, Object> pRequestMap, String pPanelTemplate) throws Exception {
        super(pAuthenticatedUser, pSessionMap, pRequestMap, pPanelTemplate, null);
    }

    public Map<String, Object> buildXMLDocument(List<List<String>> pDetailsList) {

        if (pDetailsList.size() == 1) {
            List<String> pCustomerDetail = pDetailsList.get(0);
            xmlDocument.getRootElement().getChild("E_SHOW1").setText(pCustomerDetail.get(0));
            xmlDocument.getRootElement().getChild("E_SHOW2").setText(pCustomerDetail.get(1));
            xmlDocument.getRootElement().getChild("E_SHOW3").setText(pCustomerDetail.get(2));
            xmlDocument.getRootElement().getChild("E_SHOW4").setText(pCustomerDetail.get(3));
            xmlDocument.getRootElement().getChild("E_SHOW5").setText(pCustomerDetail.get(4));
            xmlDocument.getRootElement().getChild("ServerTimestamp").setText(pCustomerDetail.get(5).substring(0, 19));
        } else {
            xmlDocument.getRootElement().getChild("AlertType").setText("INFO");
            xmlDocument.getRootElement().getChild("Alert").setText("There is no matching record.");
        }

        requestMap.put(RequestMapKeys.XML_DOCUMENT, xmlDocument);

        return requestMap;
    }

} 
```

# ruby-on-rails - Rails 参数丢失

> ID：12861728
> 
> 赞同：2
> 
> 时间：2012-10-12T14:54:49.533
> 
> 标签：ruby-on-rails, heroku, ruby-on-rails-3.1, parameters

我在过滤或不解析 Rails 参数时遇到了一些麻烦。它在 WEBRick 上本地运行时工作正常，但一旦在 Heroku 上运行，它就会忽略一堆提交的表单参数（它们没有添加到 params[]）。

我提交了表单，但它倒下了，因为它期望一个不存在的值。Airbrake 告诉我**rack.request.form_hash**是这样的：

{"utf8"=>"✓", "_method"=>"put", "authenticity_token"=>"8CZUmWc7qB1mWAbyn9NeGmygRVczdZCtI3CXwu0DUV4=", **"survey_entry"=>{"瞳孔"=>{"id"=>"2784", "non_vrh"=>"f", "initials"=>"A", "surname"=>"ABC", "year_group_id"=>"5", "age_this_september_years"=>"", "age_this_september_months"=>" ", "current_reading_level"=>""}, "questionnaire"=>{"answer"=>{"21"=>"6", "22"=>"2", "39"=>"", " 40"=>""}}}}**

但它也告诉我**action_dispatch.request.parameters**是这样的：

{"utf8"=>"✓", "_method"=>"put", "authenticity_token"=>"8CZUmWc7qB1mWAbyn9NeGmygRVczdZCtI3CXwu0DUV4=", **"survey_entry"=>""** , "action"=>"update", "controller"= >"survey_entries", "id"=>"7"}

所以这无疑是我正在做的一些愚蠢和愚蠢的事情，但它让我现在感到困惑：/

* * *

**更新**

奇怪的是，从同一页面（但字段略有不同）提交的表单可以正常工作：

utf8:✓</p>

_方法：放

真实性令牌：HLCXURx1BosuXlVYwBuOP+DxJwdY3SKwilx1CJDuwT8=

调查入口[瞳孔][id]:2485

调查入口[瞳孔][non_vrh]:f

调查条目[瞳孔][姓名缩写]：AAS

调查条目[瞳孔][姓氏]：ABC

调查条目[学生][年份组ID]：4

调查条目[瞳孔][出勤率_pct]：

调查入口[学生][阅读水平][地点]：12

调查入口[瞳孔][阅读水平][at_term1]：

调查入口[瞳孔][阅读水平][at_term2]：

调查条目[瞳孔][阅读水平][at_term3]：

调查条目[瞳孔][上一个进度]：

调查入口[瞳孔][target_rl_id]：

调查条目[瞳孔][english_first_language]:0

调查条目[瞳孔][english_first_language]:1

调查入口[瞳孔][护理订单]：0

调查入口[瞳孔][lac_funded]:0

调查入口[学生][免费用餐]：0

调查条目[瞳孔][选择原因 ID]：4

调查条目[瞳孔][其他选择原因]：

调查条目[问卷][答案[3]]：2

调查条目[问卷][答案[4]]：2

调查条目[问卷][答案[13]]：3

调查条目[问卷][答案[14]]：3

调查条目[问卷][答案[20]]：3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:21:24.583

您是否将survey_entry 作为URL 参数传递？

此[SO 条目](https://stackoverflow.com/questions/8510235/rails-query-parameter-vs-post-parameter)指向查询参数与后参数的问题，可以解释您当前的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:11:39.930

好吧，我只想说我真的很愚蠢。我会把它归咎于天气不好。感谢史蒂夫的帮助，我现在会羞愧地爬起来:)

# javascript - 从 node.js 按日期查询 i mongo

> ID：12861730
> 
> 赞同：4
> 
> 时间：2012-10-12T14:54:50.100
> 
> 标签：javascript, node.js, mongodb, datetime, mongoose

我想按日期查询 mongo 集合。例子：

```
var startDate = new Date(dateNow.getUTCFullYear(),dateNow.getUTCMonth(),dateNow.getUTCDate(),dateNow.getUTCHours(),0);
    var endDate = new Date(dateNow.getUTCFullYear(),dateNow.getUTCMonth(),dateNow.getUTCDate(),dateNow.getUTCHours()+1,0);

query.timeRegistered = { '$gte' : startDate, '$lt' : endDate };

... make mongo query ... 
```

但它不起作用。我认为这是因为 mongo 以 ISODate 格式保存日期对象。此查询在 shell 中有效，因为 mongo 将 Date 转换为 ISODate 但从 javascript (node.js) 中它不起作用。我已经尝试了所有可能的解决方案，但它们都没有帮助我。

请，如果有人有任何解决方案，我将非常感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-22T13:54:32.503

请考虑默认情况下，Mongo 中的日期操作是 UTC，例如，我在**2015 年 6 月 22 日下午 7:10 IST在“** **t1** ”集合中输入了记录。但是，在 shell 中，您可以看到它的值是 'ISODate("2015-06-22T **13:40** :08.545Z")'，比它晚了**5:30**小时。从您的 javascript 代码（在浏览器上运行，因此采用浏览器时区）尝试根据 UTC 时区创建开始和结束日期变量，然后查询记录。让我们知道它是否不起作用，为了简单起见，给出一个非常大的日期范围，看看它是否起作用。由于我不是 JS 专家，我认为您可能需要调整日期以使其采用 UTC。

 ******但是，尝试使用下面的 Mongo 客户端并且它有效，所以我从 JS 假设它也应该工作，只要您在正确的时区传递日期。

* * *

```
db.t1.find({dt:{$gt:ISODate("2015-06-22T13:40:00.000Z"),$lt:ISODate("2015-06-22T13:41:00.000Z")} }) 
```******

# r - 计算每行的标准差

> ID：12861734
> 
> 赞同：11
> 
> 时间：2012-10-12T14:55:09.847
> 
> 标签：r

我正在尝试使用`rowSds()`计算每行标准差，以便我可以选择具有高 sds 的行来绘制图表。

我的数据框被称为`xx`是这样的：

```
head(xx,1)
     Job     variable 2012-02-23 2012-02-24 2012-02-25 2012-02-27 2012-02-28 2012-02-29 2012-03-01 2012-03-02 2012-03-03 2012-03-05 2012-03-06 2012-03-07 2012-03-08 2012-03-09 2012-03-10 2012-03-12 2012-03-13 2012-03-14
1 A Duration        152        424         NA        499        320        117        211        363         NA        605         76        309        204        185         NA         25        733        500
  2012-03-15 2012-03-16 2012-03-17 2012-03-19 2012-03-20 2012-03-21 2012-03-22 2012-03-23 2012-03-24 2012-03-26 2012-03-27 2012-03-28 2012-03-29 2012-03-30 2012-03-31 2012-04-02 2012-04-03 2012-04-04 2012-04-05 2012-04-06
1        521        601         NA        229        758        421        334        659         NA        419        423        444        289        594         NA        327        533        183        211        235
  2012-04-07 2012-04-09 2012-04-10 2012-04-11 2012-04-12 2012-04-13 2012-04-14 2012-04-16 2012-04-17 2012-04-18 2012-04-19 2012-04-20 2012-04-21 2012-04-23 2012-04-24 2012-04-25 2012-04-26 2012-04-27 2012-04-28 2012-04-30
1         NA        225        419        236        218        188         NA        205        547        153        196        200         NA        259        257        208        302        244         NA        806
  2012-05-01 2012-05-02 2012-05-03 2012-05-04 2012-05-05 2012-05-07 2012-05-08 2012-05-09 2012-05-10 2012-05-11 2012-05-12 2012-05-14 2012-05-15 2012-05-16 2012-05-17 2012-05-18 2012-05-19 2012-05-21 2012-05-22 2012-05-23
1        402        492       1078        440         NA        382        576       1105        511        368         NA        360        381       1152        718        353         NA        408        413        935
  2012-05-24 2012-05-25 2012-05-26 2012-05-28 2012-05-29 2012-05-30 2012-05-31 2012-06-01 2012-06-02 2012-06-04 2012-06-05 2012-06-06 2012-06-07 2012-06-08 2012-06-09 2012-06-11 2012-06-12 2012-06-13 2012-06-14 2012-06-15
1        306        277         NA        253        367        977        557        432         NA        328        521        467        972       1556         NA        386       1394        401        857        857
  2012-06-16 2012-06-18 2012-06-19 2012-06-20 2012-06-21 2012-06-22 2012-06-23 2012-06-25 2012-06-26 2012-06-27 2012-06-28 2012-06-29 2012-06-30 2012-07-02 2012-07-03 2012-07-04 2012-07-05 2012-07-06 2012-07-07 2012-07-09
1         NA       1056        324        329        327        325         NA        341        268        231        245        301         NA        283        365        297        310        260         NA        254
  2012-07-10 2012-07-11 2012-07-12 2012-07-13 2012-07-14 2012-07-16 2012-07-17 2012-07-18 2012-07-19 2012-07-20 2012-07-21 2012-07-23 2012-07-24 2012-07-25 2012-07-26 2012-07-27 2012-07-28 2012-07-30 2012-07-31 2012-08-01
1        283        395        273        273         NA        278        243        210        356        267         NA        442        483        271        327        271         NA        716        598        577
  2012-08-02 2012-08-03 2012-08-06 2012-08-07 2012-08-08 2012-08-09 2012-08-10 2012-08-13 2012-08-14 2012-08-15 2012-08-16 2012-08-17 2012-08-20 2012-08-21 2012-08-22 2012-08-23 2012-08-24 2012-08-27 2012-08-28 2012-08-29
1        345        403        318        522        333        259        404        244        240        288        245         22        738        530        390        648        294        403        381        724
  2012-08-30 2012-08-31 2012-09-03 2012-09-04 2012-09-05 2012-09-06 2012-09-07 2012-09-10 2012-09-11 2012-09-12 2012-09-13 2012-09-14 2012-09-17 2012-09-18 2012-09-19 2012-09-20 2012-09-21 2012-09-24 2012-09-25 2012-09-26
1        740        575        558        785        883        501        901        500        285        174        562       1047        603        990        289        173        253        512        236        278
  2012-09-27 2012-09-28 2012-10-01 2012-10-02 2012-10-03 2012-10-04 2012-10-05 2012-10-08 2012-10-09 2012-10-10 2012-10-11 1        173        277        217        291        197        308        124        387        369        250        242 
```

我正在尝试计算每一行的标准偏差并分配给 sd 列名：

```
xx$sd<-rowSds(xx) 
```

我收到此错误：

```
Error in apply(na.omit(as.matrix(x), ...), 1, FUN, ...) : 
  error in evaluating the argument 'X' in selecting a method for function 'apply': Error in na.omit(as.matrix(x), ...) : 
  error in evaluating the argument 'object' in selecting a method for function 'na.omit': Error in `colnames<-`(`*tmp*`, value = c("2012-02-23", "2012-02-24", "2012-02-25",  : 
  length of 'dimnames' [2] not equal to array extent 
```

`NA`计算 SD 时如何省略任何想法？我的语法正确吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-12T15:04:02.497

您可以使用`apply`和`transform`功能

```
set.seed(007)
X <- data.frame(matrix(sample(c(10:20, NA), 100, replace=TRUE), ncol=10))
transform(X, SD=apply(X,1, sd, na.rm = TRUE))
   X1 X2 X3 X4 X5 X6 X7 X8 X9 X10       SD
1  NA 12 17 18 19 16 12 13 20  14 3.041381
2  14 12 13 13 14 18 16 17 20  10 3.020302
3  11 19 NA 12 19 19 19 20 12  20 3.865805
4  10 11 20 12 15 17 18 17 18  12 3.496029
5  12 15 NA 14 20 18 16 11 14  18 2.958040
6  19 11 10 20 13 14 17 16 10  16 3.596294
7  14 16 17 15 10 11 15 15 11  16 2.449490
8  NA 10 15 19 19 12 15 15 19  14 3.201562
9  11 NA NA 20 20 14 14 17 14  19 3.356763
10 15 13 14 15 NA 13 15 NA 15  12 1.195229 
```

从`?apply`您可以看到`...`哪些允许使用 FUN 的可选参数，在这种情况下，您可以使用`na.rm=TRUE`省略`NA`值。

`rowSds`从 matrixStats 包中使用也需要设置`na.rm=TRUE`为省略`NA`

```
library(matrixStats)
transform(X, SD=rowSds(X, na.rm=TRUE)) # same result as before. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-02T23:27:42.120

也有效，基于[这个答案](https://stackoverflow.com/a/29581812/2371031)

```
set.seed(007)
X <- data.frame(matrix(sample(c(10:20, NA), 100, replace=TRUE), ncol=10))

vars_to_sum = grep("X", names(X), value=T)
X %>% 
  group_by(row_number()) %>%
  do(data.frame(., 
                SD = sd(unlist(.[vars_to_sum]), na.rm=T))) 
```

...它附加了几个行号列，因此可能更好地显式添加行 ID 以进行分组。

```
X %>% 
  mutate(ID = row_number()) %>%
  group_by(ID) %>%
  do(data.frame(., SD = sd(unlist(.[vars_to_sum]), na.rm=T))) 
```

此语法还具有能够指定要使用的列的功能。

# wpf - WPF 应用程序内存泄漏问题

> ID：12861741
> 
> 赞同：0
> 
> 时间：2012-10-12T14:55:43.090
> 
> 标签：wpf, memory-leaks

> **可能重复：**
> [防止 WPF 中的内存泄漏](https://stackoverflow.com/questions/7737070/prevent-memory-leaks-in-wpf)

我得到了 WPF 应用程序的一些内存泄漏。

我很确定我清理了所有变量并且没有任何线程等。

关于我必须从哪里开始找到内存泄漏源的任何线索？

是否有任何特殊方法可以在 WPF 应用程序中查找内存泄漏？

谢谢！

PS我是否也实现[了自定义弱事件管理器类](http://msdn.microsoft.com/en-us/library/aa970850.aspx)？

# asp.net - asp.net 禁用母版页菜单

> ID：12861743
> 
> 赞同：1
> 
> 时间：2012-10-12T14:55:45.793
> 
> 标签：asp.net

我正在使用 asp.net 和 c#。我有一个母版页和许多使用它的 aspx 页面。

母版页定义了一个菜单，该菜单位于无序列表 (html) 中。

我希望能够在 page1 加载时从母版页禁用菜单，从其中一个 aspx 页面（我们称之为 page1）。

```
<ul class="menu" id="menu" runat ="server"> 
     <li>
         <a href="#" class="menulink">Mant</a>
             <ul> 
                 <li><a href="Mant.aspx">Table</a></li> 
            </ul> 
     </li> 
</ul> 
```

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:23:36.993

如果`list`要从母版页禁用，则可以在母版页的`Load`事件中使用此代码。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if(ContentPlaceHolder1.Page.GetType().Name=="webform1_aspx")
        {
            ContentPlaceHolder1.Page.ClientScript.RegisterStartupScript(GetType(), "key", "javascript: document.getElementById('menu').style.visibility = 'hidden';", true);                
        }
    } 
```

如果您想在内容页面的加载事件中使用它，请使用它

```
ClientScript.RegisterStartupScript(GetType(), "key", "javascript: document.getElementById('menu').style.visibility = 'hidden';",true); 
```

菜单是这样的。

```
<ul id="listMenu" runat="server">
    <li></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:02:00.283

您可以像这样从内容页面访问：

```
MasterPagename ms = Master as MasterPagename ;
ms.NavigatorMenu.Items[0].disabled = true; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:06:02.823

我认为您可以使用内容占位符：

前母版页：

添加：

```
<asp:contentplaceholder id="Menu" runat="server">
<!-- Menu here -->
</asp:contentplaceholder> 
```

在内容页面（在您的示例中为 Page1）中，您在`dont want to show`菜单中添加以下标签并将其从您希望菜单显示的所有内容页面中删除：

```
<asp:Content ID="menuContent1" ContentPlaceHolderID="Menu" Runat="Server">    
</asp:Content> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T06:26:57.973

在内容页面中查找菜单项并在 pageload() 上禁用它

```
 protected void Page_Load(object sender, EventArgs e)
{

Menu mainMenu = (Menu)Page.Master.FindControl("NavigationMenu");

  foreach (MenuItem m in mainMenu.Items)
    {
        m.Enabled = false;
}

} 
```

# java - 将 WriteConcern 分配给 mongo 文件系统

> ID：12861747
> 
> 赞同：0
> 
> 时间：2012-10-12T14:56:00.007
> 
> 标签：java, mongodb, gridfs

同事们，我正在使用 v2.2 的 Mongo 和 java Mongo 驱动程序 2.9.0，

一些业务逻辑创建大约 25 个线程，每个线程在 GridFS 上创建 150 个文件。每 1000 个文件中大约有 20 个文件返回不正确`getId()`，因此结果为空。我认为（如果我错了，请纠正我）从吞吐量的角度来看这是正确的行为。但我真的需要这个id。对于常规 DBCollection 我会设置`WriteConcern.FSYNC_SAFE`，但我看不到`setWriteConcern`GridFS 是否存在方法。您对如何强制刷新文件有一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:00:04.993

查看 GridFS.java 中的驱动程序代码：

```
_filesCollection = _db.getCollection( _bucketName + ".files" ); 
```

在创建 GridFS 后，我可以解析具有相同名称的集合，因此我的设置写入关注的代码如下所示：

```
_fs = new GridFS(_db, "MyBucketName");
DBCollection col = _db.getCollection( "MyBucketName" + ".files" );
col.setWriteConcern(WriteConcern.SAFE); 
```

开始测试后，我可以看到所有文件都成功返回了正确的 id。

# iphone - 我如何知道何时可以安全地忽略 All Exceptions 断点上的 __cxa_throw？

> ID：12861748
> 
> 赞同：51
> 
> 时间：2012-10-12T14:56:00.017
> 
> 标签：iphone, ios, xcode

我在 Xcode 4.5.1 上。我认为这是我看到的相对较新的行为。

我更喜欢在启用“所有异常”断点的情况下开发和测试我的项目。

我遇到了一个场景，我将缩略图加载到 tableview 中的单元格，我得到一个 __cxa_throw 异常。当我单击“继续程序执行”按钮时，Xcode 继续其愉快的方式。我得到缩略图。应用程序似乎工作正常。我正在寻找一些关于如何确定这是否可以安全忽略的提示。就像一些关于理解堆栈跟踪的指针？或者是其他东西？

这是代码片段：

```
 NSString *imageStr = item.thumbURL;
    imageStr = [imageStr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSURL *imageURL;

    if (![imageStr isEqualToString:@""]) {
        imageURL = [NSURL URLWithString:imageStr];
        NSLog(@"imageURL: %@",imageURL);
        if (imageURL == nil) {
            NSLog(@"imageUrl was nil for string: %@",imageStr);
        } else {
            UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
            //spinner.frame = CGRectMake(cell.imageView.frame.size.width/2,cell.imageView.frame.origin.y + cell.imageView.frame.size.height/2,cell.imageView.frame.size.width,cell.imageView.frame.size.height);
            spinner.frame = CGRectMake(10,20,40,40);
            [spinner startAnimating];
            [cell addSubview:spinner];

            dispatch_queue_t downloadQueue = dispatch_queue_create("thumbnail downloader", NULL);
            dispatch_async(downloadQueue, ^{
                NSLog(@"Network request for tour_thumb image: %@",imageStr);
                UIImage *img = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:imageURL]];
                dispatch_async(dispatch_get_main_queue(), ^{
                    [spinner removeFromSuperview];
                    UIImageView *imgView=[[UIImageView alloc] initWithFrame:CGRectMake(8, 8, cell.contentView.frame.size.width/2 - 16, cell.contentView.frame.size.height - 16)];
                    imgView.image = img;
                    [cell.contentView addSubview:imgView];
                });
            });
            dispatch_release(downloadQueue);
        }
    } 
```

这是我在堆栈跟踪中看到的内容：

```
#0  0x34a9c524 in __cxa_throw ()
#1  0x387014ce in AddChildNode(XMP_Node*, XML_Node const&, char const*, bool) ()
#2  0x38700d22 in RDF_LiteralPropertyElement(XMP_Node*, XML_Node const&, bool) ()
#3  0x3870094e in RDF_PropertyElementList(XMP_Node*, XML_Node const&, bool) ()
#4  0x38700608 in ProcessRDF(XMP_Node*, XML_Node const&, unsigned int) ()
#5  0x3871480a in XMPMeta::ParseFromBuffer(char const*, unsigned int, unsigned int) ()
#6  0x387095c0 in WXMPMeta_ParseFromBuffer_1 ()
#7  0x38725578 in TXMPMeta<std::string>::ParseFromBuffer(char const*, unsigned int, unsigned int) ()
#8  0x387254de in TXMPMeta<std::string>::TXMPMeta(char const*, unsigned int) ()
#9  0x38722b70 in CreateMetadataFromXMPDataInternal(char const*, unsigned long, unsigned int) ()
#10 0x38739a50 in readXMPProperties ()
#11 0x386a01fc in readXMPData ()
#12 0x3868cec8 in initImageJPEG ()
#13 0x3868c2ee in _CGImagePluginInitJPEG ()
#14 0x3867e274 in makeImagePlus ()
#15 0x3867ddde in CGImageSourceCreateImageAtIndex ()
#16 0x38e117b6 in _UIImageRefFromData ()
#17 0x38e116c6 in -[UIImage initWithData:] ()
#18 0x0004cb0a in __57-[ViewController tableView:cellForRowAtIndexPath:]_block_invoke_0 at ViewController.m:335
#19 0x313fc792 in _dispatch_call_block_and_release ()
#20 0x313ffb3a in _dispatch_queue_drain ()
#21 0x313fd67c in _dispatch_queue_invoke ()
#22 0x31400612 in _dispatch_root_queue_drain ()
#23 0x314007d8 in _dispatch_worker_thread2 ()
#24 0x394767f0 in _pthread_wqthread ()
#25 0x39476684 in start_wqthread () 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-12T15:05:19.803

这显然是在实现的深处，如果 C++ 异常决定在内部使用异常来发出错误信号，那么它们可以成为正常流程的一部分。

如果您自己没有编写任何 C++，那么忽略它*是安全的。*

只需捕获标准的 Objective-C 异常：

```
objc_exception_throw 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-09-26T20:22:10.770

到这里：

[![在此处输入图像描述](../Images/d65c6010fbe6b8121f4584b5c4be95f0.png)](https://i.stack.imgur.com/ywzr5.png)

并这样做：

[![在此处输入图像描述](../Images/3747b44c9788d43ef95cd24c93089826.png)](https://i.stack.imgur.com/9ogWN.png)

转这个：

[![在此处输入图像描述](../Images/fb2b44ae681eb4cb6da5f5260e6fd0d2.png)](https://i.stack.imgur.com/X2I05.png)

进入这个：

[![在此处输入图像描述](../Images/dbed09a0873de451336cf36c7598378b.png)](https://i.stack.imgur.com/uVF31.png)

添加断点仍然会给您带来很多好处，但您的应用程序不会因为您可能不负责的事情而崩溃。现在，如果您正在使用 C++，那么您最好担心它。

# python - 在 Python 中使用 Elementtree 解析 RSS

> ID：12861752
> 
> 赞同：7
> 
> 时间：2012-10-12T14:56:06.043
> 
> 标签：python, xml, rss, elementtree

如何使用 Python 中的 Elementtree 在 XML 中搜索特定于命名空间的标签？

我有一个 XML/RSS 文档，例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
    xmlns:content="http://purl.org/rss/1.0/modules/content/"
    xmlns:wfw="http://wellformedweb.org/CommentAPI/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:wp="http://wordpress.org/export/1.0/"
>
<channel>
    <title>sometitle</title>
    <pubDate>Tue, 28 Aug 2012 22:36:02 +0000</pubDate>
    <generator>http://wordpress.org/?v=2.5.1</generator>
    <language>en</language>
    <wp:wxr_version>1.0</wp:wxr_version>
    <wp:category><wp:category_nicename>apache</wp:category_nicename><wp:category_parent></wp:category_parent><wp:cat_name><![CDATA[Apache]]></wp:cat_name></wp:category>
</channel>
</rss> 
```

但是当我尝试通过执行以下操作找到所有“wp：category”标签时：

```
import xml.etree.ElementTree as xml
tree = xml.parse(fn)
doc = tree.getroot()
categories = doc.findall('channel/wp:category') 
```

我得到错误：

```
SyntaxError: prefix 'wp' not found in prefix map 
```

搜索任何非命名空间特定字段都可以正常工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:01:59.630

您需要通过使用 iterparse 并直接处理事件或通过在解析之前显式声明您感兴趣的前缀来[处理命名空间前缀。](http://effbot.org/zone/element-namespaces.htm)根据您要执行的操作，我会承认，在我比较懒散的时候，我只是在解析 XML 之前用字符串替换去除所有前缀。

编辑：[这个类似的问题可能会有所帮助。](https://stackoverflow.com/questions/1249876/alter-namespace-prefixing-with-elementtree-in-python)

# java - 允许动态代理转换到任何兼容的接口。不管

> ID：12861756
> 
> 赞同：2
> 
> 时间：2012-10-12T14:56:26.630
> 
> 标签：java, casting, dynamic-proxy

在处理类中的特定方法时，我制作了一个动态代理作为中间人。我这样做是为了避免必须覆盖我需要控制的每个接口中的每个方法。

### 没有人会理解或关心的华夫饼（但可能会为问题添加更多上下文）：

在我要给出的示例中，我尝试使其具有通用性，以便您可以编译它以测试和运行自己，但在实际情况下，我有这样的东西：

```
interface CommandSender

interface ConsoleCommandSender extends CommandSender
interface Player extends CommandSender 
```

如果我要创建一个`ConsoleCommandSender`实例的代理，则生成的代理应该可以转换为`CommandSender`. 实际上，`ConsoleCommandSender`并没有列出它的所有接口，`getInterfaces()`并且会发生这种情况：

`java.lang.ClassCastException: $Proxy18 cannot be cast to org.bukkit.command.CommandSender`

Player 类没有这个问题，并且总是可以转换为`CommandSender`.

### 真正的问题：

那么，使用以下代码作为起点，如何成功地将 表示的代理转换为`myProxy`所需的格式，而不必担心`ClassCastException`?

以下代码将成功编译和运行，但希望您通过转换为 a`List`而不是`ArrayList`.

```
import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
import java.lang.reflect.Proxy;
import java.util.ArrayList;
import java.util.List;

public class ProxyClass implements InvocationHandler {

    private Object classProxy;

    public static void main(String[] args) {
        // Example declaration
        // (I know the proxy should really be cast as an ArrayList
        // but this is my point, it SHOULD work anyway)
        ArrayList methodObject = new ArrayList<String>();
        List<String> myProxy = (List<String>)ProxyClass.newInstance(methodObject, false);

        // Example usage
        myProxy.add("Hello World!");
        System.out.println(myProxy.get(0));
    }

    public static Object newInstance(Object proxy, boolean silent) {
        return Proxy.newProxyInstance(
                proxy.getClass().getClassLoader(),
                proxy.getClass().getInterfaces(),
                new ProxyClass(proxy));
    }

    private ProxyClass(Object proxy) {
        this.classProxy = proxy;
    }

    // Is called whenever a method is invoked
    public Object invoke(Object p, Method m, Object[] args) throws Throwable {
        return m.invoke(classProxy, args);
    }

} 
```

在我就这个问题的初步部分所做的另一个线程上，一个人评论说我可以使用该`<T>`变量将另一个有效接口添加到列表中。虽然我并不真正了解如何实现这一点，但这似乎是一个好的开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:36:49.160

我不是 100% 肯定我承认我理解你的问题 - 你希望能够“直接”转换为 ArrayList？我是说 -

> ```
>  ArrayList<String> myProxy = (ArrayList<String>)ProxyClass.newInstance(methodObject, false); 
> ```

这对你不起作用。原因是生成的对象不是ArrayList的瞬间。在某种意义上，该行为类似于装饰器。
装饰器是它装饰的对象的实例吗？不，它们符合相同的接口。
你应该做的是考虑使用[CGLIB](http://cglib.sourceforge.net/)。CGLIB 让您为类创建代理（拦截对象）。
CGBLib 的代理对象确实是代理对象的一个​​实例。
如果我没记错的话，Hibernate 使用 CGLib 和 ASM 来代理实体对象，
你可以[在这里](https://github.com/voider/tests/tree/master/yair)看到我用 CGLIB 做的一些实验的链接。

# asp.net - ex 与 ex.ToString 之间有什么区别吗？网

> ID：12861760
> 
> 赞同：2
> 
> 时间：2012-10-12T14:56:36.290
> 
> 标签：asp.net, vb.net, exception, try-catch

我在谈论`Try ... Catch ex as Exception .... End Try`

如果我将异常传递给错误记录器，我应该传递异常对象（ex）还是`ex.ToString`？我会通过传递丢失任何信息`ex.ToString`吗？

基本上我在和我的经理争论，那个 ex.ToString 应该与将 ex 作为对象传递完全一样。米是对还是错？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T14:58:11.550

一个是异常对象，一个是调用`ToString`异常对象的字符串结果。

它们是不同的类型，具有不同的信息。

出于记录目的，记录器通常会调用`ToString`异常对象，因此差别不大。

但是，最好集中处理 - 调用异常记录器`ToString`，而不是在记录器的每个调用站点都这样做。它更易于维护，并且可以让您在未来做更多的事情，如果需要的话。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T14:57:43.953

异常对象不同于调用`.ToString()`对象本身。这取决于您想要捕获多少关于异常本身的信息。如果您只想要消息，那么调用`.ToString()`就足够了，因为这最终会为您提供异常对象中的消息属性。MSDN 站点[列出](http://msdn.microsoft.com/en-us/library/system.exception_properties.aspx)了属于基本异常类的不同属性。如果您想记录这些属性中的任何一个，那么您将需要异常*类*而不仅仅是消息字符串。

另请注意，继承基异常类的不同类提供了附加信息。例如，[HttpException 类提供了额外的属性](http://msdn.microsoft.com/en-us/library/system.web.httpexception_properties.aspx)。该信息可能很有用，具体取决于您在进行故障排除时需要查看的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:00:20.580

一个`exception`对象将包含比`.ToString()`. 至少该信息将采用更有用的格式（即您可以轻松获得单个片段）。

如果您在记录器中所做的只是调用`exception.ToString()`而不使用其他任何东西，那么目前这将没有真正的区别。但是，传递异常对象可能更适合将来的验证（即，如果您开始想要更多的异常属性）。

它的价值`ToString`在于调用以下重载`true`作为参数传递：

```
Private Function ToString(ByVal needFileLineInfo As Boolean) As String
    Dim className As String
    Dim message As String = Me.Message
    If ((message Is Nothing) OrElse (message.Length <= 0)) Then
        className = Me.GetClassName
    Else
        className = (Me.GetClassName & ": " & message)
    End If
    If (Not Me._innerException Is Nothing) Then
        className = String.Concat(New String() { className, " ---> ", Me._innerException.ToString(needFileLineInfo), Environment.NewLine, "   ", Environment.GetRuntimeResourceString("Exception_EndOfInnerExceptionStack") })
    End If
    Dim stackTrace As String = Me.GetStackTrace(needFileLineInfo)
    If (Not stackTrace Is Nothing) Then
        className = (className & Environment.NewLine & stackTrace)
    End If
    Return className
End Function 
```

如您所见，它基本上会输出类、消息、innerexception.ToString() 和堆栈跟踪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:00:34.447

异常对象不同于 .ToString()。它有各种各样的属性，如果你只需要传递消息，你可以使用`Ex.Message;`

# nopcommerce - nop 商务中的分页问题

> ID：12861761
> 
> 赞同：0
> 
> 时间：2012-10-12T14:56:36.333
> 
> 标签：nopcommerce

我在 nop commerce 2.3 中遇到分页问题，​​不知道如何解决：

> 将表达式转换为数据类型 int 时出现算术溢出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T08:21:39.770

您收到的错误是 sql 错误。这是由超过列的指定大小的计算列值引起的。

假设您将三列 c1、c2 和 c3 定义为 INTEGER 数据类型。此外，假设使用公式 ([c1] * [c2]) 计算 c3。如果在 c1 和 c2 中输入较大的值（例如 9999），则 c3 的计算可能会超过允许的 INTEGER 限制。

这意味着您可能必须更改特定列的数据类型。您可以使用“bigint”而不是“int”

# php - 当在子域上设置 cookie 并在同一个子域上读取时，$_COOKIE 不起作用

> ID：12861767
> 
> 赞同：0
> 
> 时间：2012-10-12T14:56:55.070
> 
> 标签：php, cookies, set

我目前正在我的子域的 PHP 页面上设置 cookie

```
$asdasd = "1";
$expires = time() + 86400; // 1 day
if (($username == $actualusername) && ($password == $actualpassword))
{
    setcookie("loggedin",$asdasd, $expires);
    header('Location: exampleurl');
} 
```

然后我试图在 SAME 子域的另一个页面上阅读它：

var_dump($_COOKIE['loggedin']);

没有返回任何内容 - 即使我可以看到浏览器隐私设置中设置的 cookie。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:16:50.103

问题必须围绕您设置cookie的路径，在您的情况下解决方案是

```
setcookie("loggedin",$asdasd, $expires, "/"); 
```

# model-view-controller - 使用 Grails 搭建脚手架 - 如何使用模板插件对自定义视图使用自定义操作

> ID：12861768
> 
> 赞同：1
> 
> 时间：2012-10-12T14:57:03.063
> 
> 标签：model-view-controller, grails, scaffolding

我需要构建自己的视图，可以通过默认的脚手架机制显示。我已经安装了模板插件，您可以使用它修改域类、控制器、视图等的默认布局。

因此，我设计了自己的布局，并考虑只显示表单和数据列表。特别是当我需要通过 AJAX 添加一些数据时，我需要通过 div 容器中的脚手架控制器加载呈现的表单。

我的控制器如下所示：

```
class DummyController {
 static scaffold = true

 def ajx_create() {
    render(view: "ajx_create")
 }
} 
```

在操作 ajx_create 中调用函数 render('hello world') 有效，但尝试调用 render(view:'ajx_create.gsp') 无效。

如何配置脚手架机制来显示这个名为 ajx_create.gsp 的新文件？这甚至可能吗？

我很感激任何帮助！

# c# - 在 C# 中同步 SQL Server Compact 3.5

> ID：12861769
> 
> 赞同：3
> 
> 时间：2012-10-12T14:57:07.430
> 
> 标签：c#, sql-server-2008, synchronization, microsoft-sync-framework, sql-server-ce-3.5

在我的项目中，我想将 SQL Server Compact 3.5 与 MSSQL Server 2008 同步。我通过了 Visual Studio 2010 中的所有步骤，例如添加新项目>>本地数据库缓存>>配置数据同步等。连接成功完成。但是在这个阶段之后，我不知道如何进行同步。
我有一个名为“检查更新”的按钮。单击更新按钮时，必须开始同步，并且必须将来自 MSSQL Server 的新数据添加到“data.sdf”中。我不知道该怎么做。我是 C# 的初学者。你可以帮帮我吗？
亲切的问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T06:51:54.073

检查此链接。它展示了如何使用 Sync Framework 2.1 数据库提供程序来配置和执行 SQL Server 数据库与一个或多个 SQL Server Compact 数据库之间的同步。
[http://code.msdn.microsoft.com/Database-Sync-SQL-Server-de6c8ff8](http://code.msdn.microsoft.com/Database-Sync-SQL-Server-de6c8ff8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:33:34.043

你看过微软同步框架的教程吗？

[http://msdn.microsoft.com/en-us/library/ff928606.aspx](http://msdn.microsoft.com/en-us/library/ff928606.aspx)

那个处理执行同步。或一般 [http://msdn.microsoft.com/en-us/library/ff928494.aspx](http://msdn.microsoft.com/en-us/library/ff928494.aspx)

也许不是初学者指南，但它是一个开始的地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T03:31:19.923

本地数据库缓存项目项将为您生成所有代码，您只需调用它。

请参阅：[演练：扩展本地数据库缓存以支持](http://msdn.microsoft.com/en-us/library/cc761546.aspx)调用同步的部分的双向同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T04:11:55.073

你可以试试这个已经编写好的实用程序来同步 SQL 服务器和 SQL Compact 之间的数据，但它目前只支持 SQL 2000 和 2005

[http://www.codeproject.com/Articles/25685/SQL-Server-to-SQL-Server-Compact-Edition-Database](http://www.codeproject.com/Articles/25685/SQL-Server-to-SQL-Server-Compact-Edition-Database)

# asp.net - WCF 客户端 cookie 在哪里保留？

> ID：12861771
> 
> 赞同：1
> 
> 时间：2012-10-12T14:57:12.683
> 
> 标签：asp.net, wcf, web-services, soap

我正在围绕 SOAP API 编写一个包装器。我在 VS2010 中设置了一个指向 WSDL 的服务引用。当我调用登录时，API 在 cookie 中返回一个会话变量。

我在配置中的绑定上设置**了 allowCookies="true"**。

到目前为止，我已经在我的包装器中实现了两个 API 调用：**login**和**logout**。

我有一个测试工具，它是一个简单的 ASP.NET 应用程序，它有一个用于**login**的页面和一个用于**logout**的页面。

提交**登录**时：

```
using (var ApiClient = new ApiClient())
            {
                ApiClient.Login(txtUsername.Text, txtPassword.Text, txtOrganization.Text, txtIPAddress.Text);
            } 
```

现在在我的 ApiClient.Login 方法中：

```
using (var soapService = new WSDLInterfaceClient())
            {
                var loginCredentials = new loginRequest
                {
                    username = username,
                    password = password,
                    organization = organization
                };

                if (!string.IsNullOrWhiteSpace(ipAddress))
                    loginCredentials.ipAddress = ipAddress;

                var loginResponse = soapService.Login(loginCredentials);
            } 
```

所以这一切顺利进行。我在想我需要删除 usings 并有一个类级别的 WSDLInterfaceClient ，我将在我的包装器中使用它，因为我认为每次构建新客户端时 cookie 都会被清除。但事实并非如此。

**注销**方法的实现方式类似。如果您尝试在未登录的情况下**注销，则****注销**API 调用将引发异常。奇怪的是，当我转到**注销**页面并提交时（这反过来又构建了一个新的包装客户端，因此构建了一个新的服务客户端），它认识到我已登录。如果我再次尝试**注销**，它会按预期抛出异常。

 ******cookie 似乎在起作用，即使在每个页面上同时构建新的接口客户端和新的包装器客户端时，cookie 仍然存在。

虽然这不是一件坏事，但我对它的工作方式感到困惑。ASP.NET/WCF 是否在某个地方为会话保存了这些 cookie？这将如何在控制台应用程序中工作？******

# c++ - 静态 int 初始化

> ID：12861772
> 
> 赞同：1
> 
> 时间：2012-10-12T14:57:15.200
> 
> 标签：c++, static

如何更正它，以便我可以显示静态 int

```
cout<<A::a<<endl; 
```

像下面的例子一样？

```
#include <iostream>
using namespace std;
class A{
    public:
        static int a = 0;
};

int main()
{
    cout << A::a << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:57:57.753

任何一个：

```
class A{
    public:
        static const int a = 0;
}; 
```

（常量整数类型可以在类定义中初始化）

或者

```
class A{
    public:
        static int a;
};

int A::a = 0; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T15:03:03.137

在类定义中，静态成员只被*声明*而不被定义。默认情况下，只有*定义*具有初始化，但对于整型的静态常量，*声明*可以具有初始化。

您的程序中的问题是使用了静态成员（对于非常量静态成员属性`std::cout << A::a`是*odr-use ），但是您没有定义。*您需要通过添加以下内容在程序的单个翻译单元中定义变量：

```
int A::a = value; 
```

（请注意，由于静态成员*不是*const，因此您不能在类定义中提供初始化程序，因此您需要`= 0`从类定义中的声明中删除 。还要注意，您可以跳过`= value`初始化中的 if `value == 0`，因为静态初始化会`A::a`在任何其他初始化之前设置为 0）

# c# - 从 WCF 服务向网站发送数据

> ID：12861782
> 
> 赞同：7
> 
> 时间：2012-10-12T14:57:42.607
> 
> 标签：c#, jquery, asp.net-mvc, wcf, error-handling

我有以下设置

*   一个jQuery网站（不完全是单页，但离它不远），它使用
*   一个 ASP.NET MVC 网站作为后端，它（通过 net.tcp 或 net.pipe）连接到
*   一个自托管的 WCF 服务，用于管理和连接到
*   大量的高延迟外部服务。

因此，当客户端按下按钮时，会向 MVC 发送请求，然后将请求路由到 WCF，WCF 从外部服务聚合它，一切都很好。

我似乎无法解决的问题是另一种方式的通信，即当一个外部服务脱机时，通知客户端（浏览器）的最简单和最优雅的方式是什么？

这意味着该服务应该以某种方式通知 mvc 站点，该站点应该以某种方式通知客户端外部服务已脱机。

另外：外部服务将具有高可用性，因此很少使用“离线”场景，因此我正在寻找一种不会对服务器进行广泛轮询的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:17:50.557

我正在研究类似的架构，并计划使用[SignalR](https://github.com/SignalR/SignalR)将更新从 WCF（有时直接，有时通过 Azure 服务总线）推送到单页 jQuery 驱动的应用程序。不过，我还没有实现这个，所以可能有一些我没有考虑过的问题。

从他们的文档中：

> 将数据从服务器推送到客户端（不仅仅是浏览器客户端）一直是一个棘手的问题。SignalR 让一切变得简单，并为您处理所有繁重的工作。

Scott Hansleman 有一个关于这个主题的好博客：[http ://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:11:00.730

在我看来，您将需要在轮询服务中实现某种类型来 ping 这些外部服务以确保它们的可用性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:05:16.917

您可以使用[故障异常](http://msdn.microsoft.com/en-us/library/ms576199.aspx)将异常数据返回给客户端。

我更喜欢`IsSuccessful`在我返回的合同上有一个标志，并且只在出现严重错误时抛出错误异常。

`IsSuccessful`这是带有标志的响应合同的一个非常基本的示例。

```
[DataContract]
public class MyResponse
{
    [DataMember]
    public bool IsSuccessful { get { return Message == null || !Messages.Any(); } set { } }
    [DataMember]
    public List<string> Messages { get; set; }
} 
```

`Messages`如果您需要提供更详细的信息，可以是复杂类型。`DataContract`和`DataMember`属性可以`MessageContract`，`MessageBodyMember`如果这更适合您的架构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:14:48.780

在[Discovery 命名空间](http://msdn.microsoft.com/en-us/library/system.servicemodel.discovery.aspx)中有允许 WCF 服务发送发现消息的功能。如果您有计划的中断，则[AnnouncementClient 类](http://msdn.microsoft.com/en-us/library/system.servicemodel.discovery.announcementclient.aspx)具有让服务发布有关离线/在线消息的方法。

要为您的用户设置自定义消息，您需要收听这些公告消息。实现这一点的类是[AnnouncementService](http://msdn.microsoft.com/en-us/library/system.servicemodel.discovery.announcementservice.aspx)。它具有处理[离线](http://msdn.microsoft.com/en-us/library/system.servicemodel.discovery.announcementservice.offlineannouncementreceived.aspx)和[在线](http://msdn.microsoft.com/en-us/library/system.servicemodel.discovery.announcementservice.onlineannouncementreceived.aspx)消息的事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T15:07:50.987

WCF 和浏览器的典型场景是请求/响应模式。浏览器发出请求，服务做出响应。

您可以让浏览器定期轮询服务以查找状态。

# php - 在 PHP 中以这种困难的方式合并 2 个数组

> ID：12861792
> 
> 赞同：1
> 
> 时间：2012-10-12T14:58:05.833
> 
> 标签：php, arrays

我有 2 个数组**$list**和**$list2**：

**$列表**：

```
Array
(
[0] => Array
    (
        [team] => 14
        [team_points] => 3
        [team_occurrences] => 2
    )

[1] => Array
    (
        [team] => 1
        [team_points] => 3
        [team_occurrences] => 2
    )

[2] => Array
    (
        [team] => 5
        [team_points] => 1
        [team_occurrences] => 1
    )

[3] => Array
    (
        [team] => 13
        [team_points] => 1
        [team_occurrences] => 1
    )

[4] => Array
    (
        [team] => 7
        [team_points] => 0
        [team_occurrences] => 1
    )

[5] => Array
    (
        [team] => 2
        [team_points] => 0
        [team_occurrences] => 3
    )

 ) 
```

**$列表2：**

```
Array
(
    [0] => Array
        (
            [team] => 20
            [team_points] => 7
            [team_occurrences] => 3
        )

    [1] => Array
        (
            [team] => 10
            [team_points] => 3
            [team_occurrences] => 1
        )

    [2] => Array
        (
            [team] => 14
            [team_points] => 3
            [team_occurrences] => 1
        )

    [3] => Array
        (
            [team] => 13
            [team_points] => 3
            [team_occurrences] => 1
        )

    [4] => Array
        (
            [team] => 19
            [team_points] => 3
            [team_occurrences] => 1
        )

    [5] => Array
        (
            [team] => 17
            [team_points] => 1
            [team_occurrences] => 1
        )

    [6] => Array
        (
            [team] => 11
            [team_points] => 0
            [team_occurrences] => 1
        )

    [7] => Array
        (
            [team] => 15
            [team_points] => 0
            [team_occurrences] => 1
        )

) 
```

如您所见，两个数组中的列相同（team、team_points、team_occurrences）

现在，我想将这两个数组合并到名为**$list_all 的数组中**

合并的问题是我尝试过的标准合并

```
array_merge($list,$list2); 
```

只需将它们加在一起。

但是，我需要计算相同的团队，例如**[team] => 14**和**[team] => 13**都在两个数组中（在 $list 和 $list2 中），因此，我需要从 $list 中对**team_points**列值求和如果团队相同，则使用 $list2 中的和**team_points**列值。**team_occurrences**列也是如此。

所以例如

新数组不会是这样的：

```
Array
(
[0] => Array // from $list
    (
        [team] => 14
        [team_points] => 3
        [team_occurrences] => 2
    )

[1] => Array // from $list2
    (
        [team] => 14
        [team_points] => 3
        [team_occurrences] => 1
    )

[3] => Array // from $list
    (
        [team] => 13
        [team_points] => 1
        [team_occurrences] => 1
    )

[4] => Array // from $list2
    (
        [team] => 13
        [team_points] => 3
        [team_occurrences] => 1
    ) 
```

但我需要它看起来像这样：

```
Array
(
[0] => Array 
    (
        [team] => 14
        [team_points] => 6
        [team_occurrences] => 3
    )

[1] => Array 
    (
        [team] => 13
        [team_points] => 4
        [team_occurrences] => 2
    ) 
```

合并后，我想使用 usort() 对结果数组进行排序，或者使用 team_points DESC 的一些更好的函数（从最高值到最低值）。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:03:32.180

遍历第一个列表，创建一个新数组，其键是团队编号。然后遍历第二个数组，如果团队已经存在，则添加，否则，追加。

```
$combined = array();
// First loop creates array keys in $combined array
// based on team numbers
foreach($list as $initial) {
  $combined[$initial['team']] = $initial; 
}

// Second loop looks at $list2 and either adds to values
// if the team key already exists, or just adds the 
// whole subarray on if it doesn't.
foreach($list2 as $secondary) {
  // If it was in the first, append to it.
  if (isset($combined[$secondary['team']])) {
    $combined[$secondary['team']]['team_points'] += $secondary['team_points'];
    $combined[$secondary['team']]['team_occurrences'] += $secondary['team_occurrences'];
  }
  // Otherwise, just add it to the array
  else {
    $combined[$secondary['team']] = $secondary;
  }
}

// Then sort the combined array with usort() into descending order by points
// Anonymous callback function is PHP 5.3+. Needs to be a string value of a named function
// for PHP < 5.3
usort($combined, function($a, $b) {
  if ($a['team_points'] === $b['team_points']) {
     return 0;
  }
  else {
     return $a['team_points'] < $b['team_points'] ? 1 : -1;
  }
}); 
```

注意：上面生成了一个以团队编号为键的输出数组。如果您真的只想要升序数字键，请调用`array_values()`它：

```
// Strip off the team number keys and just use ascending numbers
$combined = array_values($combined); 
```

*编辑*修复了上面缺少的一些`]`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:07:59.567

最简单的方法是按团队编号对两个数组进行排序（使用`usort`）。同时遍历两个阵列并选择最低的团队编号。如果 list1 最低，则将该团队添加到结果中并增加 list1 索引。如果 list2 最低，则将该团队添加到结果中并增加 list2 索引。如果两支队伍相同，则通过添加点数和次数来组合它们。重复直到你在一个列表的末尾，并从另一个列表中添加所有剩余的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:16:16.527

您可以通过以下方式进行操作：

```
foreach($list2 as $ky => $val) {
    $list2['t'.$val['team']] = $val;
}

$tot = count($list1);
$list3 = array();
for ($i=0;$i<$tot;$i++) {
    $team = $list1[$i]['Team'];
    $list3[]['Team'] = $team;
    $points = isset($list2['t'+$team]) ? $list2['t'+$team]['team_points'] : 0;
    $list3[]['team_points'] = $list1[i]['team_points'] + $points;
    $ocu = isset($list2['t'+$team]) ? $list2['t'+$team]['team_ocurrences'] : 0;
    $list3[]['team_ocurrences'] = $list1[$i]['team_ocurrences'] + $ocu;
}

function cmp($a, $b) {
    if ($a['team_points'] == $b['team_points']) {
        return 0;
    }
    return ($a['team_points'] > $b['team_points']) ? -1 : 1;
}

usort($list3, "cmp"); 
```

# php - 无法通过 ajax 调用发布数据

> ID：12861795
> 
> 赞同：2
> 
> 时间：2012-10-12T14:58:19.250
> 
> 标签：php, javascript, jquery, ajax, forms

我正在尝试将我从表单中检索到的一些数据发布到控制器。这是我的表格：

```
<div id="time_registration" class="toogle_form" diplay="none">
<form id="hourForm" name="hourForm"  >
//first part of the form ----- 
```

//第二部分：

```
 <div id="hoursDetails" class="toogle_form" style="display:none"> 
        <table border=0>
                        <?php
                           for ($i=0 ; $i<3; $i++){
                   echo '<tr>
                      <td><div id="date'.$i.'" name="date'.$i.'" ></div></td>   
                      <input type=hidden id="date'.$i.'" name="date'.$i.'" value=""/>

                      <td>
                      <input type=text name="action'.$i.'"  placeholder="Votre action" value=""/>
                      <input type="text" name="temps'.$i.'"  placeholder="nombre heures" value=""/>
                      </td>
                  </tr> ';}
                echo '  <input type=hidden id="dateTest" name="dateTest" value=""/>  '; // just to test  
                  ?>
                  </table>
    </div> 
  </form>
</div> 
```

Firebug 显示 date0、date1 和 date2 为空，但 dateTest 不是。

这是我设置变量的方式（ js 函数）

```
 for (var i = 0; i < 3; i++) {

              $('#date'+i).html('myVariable');
              $('#date'+i).val('myVariable');
                 }
              $('#dateTest').val('dateTest'); 
```

这是我将数据发布到控制器的方式：

```
function insert_hour() {
         var form_values= $('#hourForm').serialize();
         alert($('#date0').val());// prints the correct value also for date1 and date2

         $.ajax({
            type:'POST',
                url : '<?php echo site_url()."/path/to/controller/"; ?>',
            data : form_values,

            success:function(data)
                {   alert(' ajax_call ok ');
                }

            });     

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:04:49.750

我认为你在这里做错了

```
<div id="date'.$i.'" name="date'.$i.'" >

      and

<input type=hidden id="date'.$i.'" name="date'.$i.'" value=""/> 
```

在这种情况下`$('#date'+i).html('myVariable'); Will not work`

您使用的是相同的 id。Id 必须是唯一的。

# regex - 正则表达式：如何在 Perl 中删除文件名之间的多余空格

> ID：12861802
> 
> 赞同：-3
> 
> 时间：2012-10-12T14:58:31.127
> 
> 标签：regex, perl, filenames

如何在 Perl 中删除文件名之间的多余空格

正则表达式可以删除前导和尾随空格 $line =~ s/^\s+|\s+$//x;

这就是我的代码的样子：

```
use File::Find;
find (\&wanted, '.');
sub wanted {
    my $file = $File::Find::name;
    $file =~ s/\$//g;
    print "**file = $file\n";
} 
```

`$file`可：

```
My File.jpg
myfile$
$myfile
my$file 
```

要从`$`我正在使用的文件名中删除，`$file =~ s/\$//g;`这也适用于空格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:16:25.660

```
$file =~ s/\s+/ /g; 
```

将删除连续的空白字符并用单个空格替换它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T15:07:28.137

对于字符串中间的多个空间块，您可以做的是通过正则表达式将字符串拆分为空间块，然后使用perl中的`split(/\s+/, $data)`and函数连接完整的字符串。`join(" ", @LIST)`

正如@TLP 所指出的，这里是仅使用正则表达式的更新代码：

```
$str =~ s/\s+/ /g; 
```

# windows-7 - VS2012、Windows 8、DirectX 及其 SDK

> ID：12861804
> 
> 赞同：4
> 
> 时间：2012-10-12T14:58:34.407
> 
> 标签：windows-7, sdk, visual-studio-2012, directx-11

我最近为 Windows 桌面安装了 Visual Studio 2012 Express。与此同时，还安装了 Windows 8 SDK 的一部分。

目前我只想使用 DirectX 11 为 Windows Vista/7 平台开发程序。到目前为止，我刚刚从 2010 年 6 月开始安装了 Windows 7.1 SDK 和 DirectX SDK，一切运行良好。但是，目前我有点困惑，因为 DirectX SDK 已合并到 Windows 8 SDK 中。此外，VS2012 默认使用 Windows 8 SDK。

我该怎么办？安装 Windows 8 SDK 并使用它为带有 DirectX 的 Windows 7 编写程序？或者可能继续使用 Windows 7.1 SDK 和 DirectX /june 2010 SDK？我想确定的是，我的程序（不使用任何 7 特定功能）仍然可以在 Vista 和 7 下运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:31:40.933

我认为你有两个选择

1.  安装Win8 SDK并使用与Win7兼容的功能，由于Win8 SDK包含DirectX SDK，并且有一些功能只在win8下有效，只要你不使用这些功能，你的程序在win7下也能运行
2.  安装 Win7 SDK，这将确保您的程序可以在 Win7 上运行

只有一件事，确保您使用的功能在您的平台上可用，仅此而已。这是有关 DirectX SDK 的页面，仅供您参考

[DirectX SDK 在哪里？](http://blogs.msdn.com/b/chuckw/archive/2012/03/22/where-is-the-directx-sdk.aspx)

# java - 继承后受保护的成员行为。

> ID：12861807
> 
> 赞同：6
> 
> 时间：2012-10-12T14:58:37.137
> 
> 标签：java, inheritance, protected, scjp

我对受保护的标识符有一些疑问。在 K.Sierra 的 Sun Certified Java Programmer Study Guide 的第一章中，我发现了以下信息：

*“一旦包外的子类继承了受保护的成员，该成员（由子类继承）对子类之外的任何代码都是私有的，子类的子类除外。”*

我提供了反映上述陈述的示例代码，这对我来说绝对清楚。

```
// Parent class
package package1;

import package2.Child;
public class Parent {

    protected int i = 5;

}

// Child class
package package2;

import package1.Parent;

public class Child extends Parent {

    // variable 'i' inherited

}

package package2;

public class Neighbour {

    public void protectedTesting(){
        Child child = new Child();
        System.out.println(child.i); // no access
    }
} 
```

我已经开始试验并做了一个小改动 - 将 Neighbor 移至 package1。并且有一个对“i”变量的访问，这对我来说有点令人惊讶，因为它不符合**“对子类之外的任何代码变得私有”的声明**

更改后的邻居类：

```
package package1;

import package2.Child;

public class Neighbour {

    public void protectedTesting(){
        Child child = new Child();
        System.out.println(child.i); // access!
    }
} 
```

请向我澄清。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T15:07:11.123

简而言之，`protected`它是包私有的并且对子类可见。甚至 JLS 对此也含糊不清（[JLS §6.6.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.2)）：

> 对象的`protected`成员或构造函数可以从包的外部访问，在该包中，仅由负责实现该对象的代码声明它。

它指定在包之外，只有子类可以访问受保护的成员。这*意味着*您还可以访问包中的变量。这是一个糟糕的措辞，但受保护的成员具有包级别的可见性*以及*子类级别的可见性。

也可以看看：

*   [这个相关的问题](https://stackoverflow.com/questions/902922/why-does-the-protected-modifier-in-java-allow-access-to-other-classes-in-same?rq=1)
*   用于访问控制的[Java Trail](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T15:07:30.797

> 并且有一个对“i”变量的访问，这对我来说有点令人惊讶，因为它不符合“对子类之外的任何代码变得私有”的声明

--> 但是你`Neighbour`在包`package1`中移动了类，根据`"Protected members can be accessed by classes in same package"`

> “一旦包外的子类继承了受保护的成员，该成员（由子类继承）对子类之外的任何代码都是私有的，子类的子类除外。”

--> 在包内部，对于包中的所有类，它仍然是受保护的而不是私有的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:33:05.533

`protected`可见性包括包级别的可见性。继承允许您将`Child`对象视为`Parent`. 由于 的成员在同一个包`i`中`Parent`声明，因此可以从`Neighbour`.

```
package package1;

import package2.Child;

public class Neighbour {

    public void protectedTesting() {
        Parent neighboured = new Child();
        System.out.println(neighboured.i); // access
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T15:05:51.343

真相不在“Sun Certified Java Programmer Study Guide”中，而是在[Java 语言规范中](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)

> 6.6.2\. 受保护访问的详细信息
> 
> 对象的受保护成员或构造函数可以从包外部访问，在该包中，仅由负责实现该对象的代码声明它。

# visual-studio-2008 - MENUEX 资源语句转换回 MENU

> ID：12861813
> 
> 赞同：0
> 
> 时间：2012-10-12T14:58:59.643
> 
> 标签：visual-studio-2008, mfc

为了向 POPUP 语句添加 ID，我需要将菜单声明为 MENUEX。不幸的是，每次我使用 VS2008 资源编辑器保存编辑过的菜单时，它都会自动将其转换回 MENU 并删除所有与 MENUEX 相关的功能。

有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:54:15.910

手动编辑的资源应该放在 *.rc2 文件中。Visual Studio 总是覆盖 *.rc 文件的内容。

# java - 在 Java 中访问包私有字段

> ID：12861814
> 
> 赞同：7
> 
> 时间：2012-10-12T14:59:09.973
> 
> 标签：java, android, encapsulation

探索 Android API 源。有一个没有访问修饰符`FileDescriptor`的数据成员：`descriptor`

```
int descriptor; 
```

然后`FileOutputStream`是构造一个新的 FileDescriptor 并分配给该字段的类：

```
fd = new FileDescriptor();
fd.descriptor = fileSystem.open(...); 
```

它与 Java 的字段访问控制模型如何兼容？我认为无法从声明类外部访问包私有字段，并且没有像 C++ 中那样的友谊概念。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-12T15:04:52.153

基本上，package-private 可以在`class`和`package`级别访问：

从[来源](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)：

```
Access Levels
Modifier    Class   Package  Subclass World
public         Y        Y       Y       Y
protected      Y        Y       Y       N
no modifier    Y        Y       N       N
private        Y        N       N       N 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:04:20.563

没有修饰符的声明，例如

> 整数描述符；

包是私有的，通常称为 DEFAULT 可以在包内访问，而不是在包外访问。同一个包内的任何类都可以访问这些，但这些在包外是不可见的。

有关更多详细信息，请参阅[此处](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

```
Access Levels
Modifier        Class   Package     Subclass    World
public            Y         Y        Y            Y
protected         Y         Y          Y          N
no modifier       Y         Y          N          N
private           Y         N          N          N 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:00:39.410

包私有字段（和其他任何内容）就是这样：在他们的包中私有。这意味着没有其他类可以访问包范围之外的字段（或其他实体）。有关更具体的详细信息，请参阅[此处](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。

# java - 将 BlowfishJ Java 实现与 dren blowfish javascript 实现相匹配；8个字节后的加密值不同

> ID：12861830
> 
> 赞同：1
> 
> 时间：2012-10-12T15:00:17.110
> 
> 标签：java, javascript, algorithm, encryption, blowfish

我在将 BlowsfishJ Java 实现 ( [BlowfishJ Javadoc](http://blowfishj.sourceforge.net/apidocs/net/sourceforge/blowfishj/package-summary.html) ) 与 dren Blowfish JavaScript 实现 ( [dren Blowfish page](http://dren.ch/js_blowfish/) ) 相关联时遇到了一些问题。

在 Java 方面，我使用的是 Blowfish CBC，IV 为零，密钥是*somekey*。明文是*WillThisEQ*。

在 JavaScript 方面，我假设 dren 的实现也是使用 CBC 和零 IV。密钥是*somekey*，明文也是*WillThisEQ*。

这是 JavaScript 代码：

```
var bf = new Blowfish('some key');
var ciphertext = bf.encrypt('WillThisEQ');
var plaintext = bf.decrypt(ciphertext); 
```

对于密文，前 8 个字节匹配两种实现（*WillThis*）。但是，任何后续字节都不匹配（*EQ000000*）。IV 被分解为第一个块（[块密码模式维基百科页面](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)）。所以，我不认为这是问题所在。

我如何才能匹配这两个实现？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:22:29.243

[您的答案在您链接到的 dren BlowFish 页面](http://dren.ch/js_blowfish/)的最顶部：

> 如果要加密超过 8 个字节的任何内容，则需要实现自己的密码块链接。

所以不，它不是在做 CBC。您可以尝试[欧洲央行版本的 BlowfishJ](http://blowfishj.sourceforge.net/apidocs/net/sourceforge/blowfishj/BlowfishECB.html)，但[安全性要差得多](https://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:43:59.277

这是 Dojo 版本的 Blowfish。为我工作。 [http://sladex.org/blowfish.js/](http://sladex.org/blowfish.js/)

# c++ - 编译器说通过变量未声明

> ID：12861832
> 
> 赞同：0
> 
> 时间：2012-10-12T15:00:25.477
> 
> 标签：c++

我有一个关于我的两个功能的小问题。我的编译器一直说传递的函数是未声明的。这是编译器所说的：

```
LinkedList.hpp: In member function 'void LinkedList<T>::insert(int, T) [with T = std::basic_string<char>]':
test.cpp:92:1:   instantiated from here
LinkedList.hpp:96:2: error: 'struct ListNode<std::basic_string<char> >' has no member named 'item'
In file included from test.cpp:4:0:
LinkedList.hpp: In member function 'T LinkedList<T>::remove(int) [with T = std::basic_string<char>]':
test.cpp:92:1:   instantiated from here
LinkedList.hpp:139:2: error: 'struct ListNode<std::basic_string<char> >' has no member named 'theData' 
```

在我的班级中有结构之前，但这不起作用。为什么它给我这些错误。

现在这里是代码：

```
#ifndef _CS235_LINKEDLIST_H_
#define _CS235_LINKEDLIST_H_
#define LIST_MAX 10

#include "ABCList.hpp"
#include<iostream>
using namespace std;

template <class T>
struct ListNode
    {
        T data; // List item
        ListNode *next; //Pointer to next node
    };

template <class T>
class LinkedList : public ABCList<T> {
private:

    int  size;
    ListNode<T> *head;
    ListNode<T> *find(int pos);
public:
    LinkedList();
    LinkedList(LinkedList &other);
    virtual ~LinkedList();

    virtual bool isEmpty ();
    virtual int  getLength ();
    virtual void insert (int pos, T item);
    virtual T    remove (int pos);
    virtual T    retrieve (int pos);
};

template <class T>
LinkedList<T>::LinkedList() //Default constructor
{
    size = 0;
    head = NULL;
}

template <class T>
LinkedList<T>::LinkedList(LinkedList &other) //Copy Constructor
{
    for(int i = 1; i < other.getLength(); i++)
        insert(i, other.retrieve(i));
}

template <class T>//Deconstructor
LinkedList<T>::~LinkedList()
{
    while(!isEmpty ())
        remove(1);
}

template <class T>
ListNode<T>* LinkedList<T>::find(int pos) //Finds the position of an item
{
    if(pos < 1)
        return NULL; //If pos is less than one then find returns NULL because pos is a illegal value.
    else
    {
        ListNode<T>* temp = head;
        for(int i = 1; i < pos; i++)
            {temp = temp -> next;}

        return temp;
    } 
}

template <class T>
bool LinkedList<T>::isEmpty ()//Function checks wheter if the list is empty
{
    if (size == 0)
        return true;
    return false;
}

template <class T>
int LinkedList<T>::getLength () //Function that returns size.
{
    return size;
}

template <class T>
void LinkedList<T>::insert (int pos, T item)// This function inserts a item.
{
    ListNode<T>* curr = new ListNode<T>(); //ListNode is inserted into the newly created node 
    curr -> item = item;
    if(pos ==1) 
    { //Node is added to the beginning
        curr -> next = head;
        head = curr;
    }
    else
    {
        ListNode<T>* prev = find(pos - 1);// A new node is placed after prev
        curr -> next = prev;
        prev -> next = curr;
        ++size;
    }
}

template <class T>  
T LinkedList<T>::remove (int pos)// This function deletes an item
{
    try
    {
        if(pos < 1 || pos > getLength()+1)// if the position of the list is one or greater than the list, it will throw an error.
            throw 99;
    }
    catch (int x)
        {cout << "Error Number: " << x;}

    T theData;
    ListNode<T>* curr = head;

    if(pos == 1) //The first node from the list is deleted.
    {
        curr = head; // This saves a pointer to node because when an item in the first position is deleted, a pointer is needed to precede it.
        head = head -> next;
    }

    else 
    {
        ListNode<T>* prev = find(pos - 1);//This node will be deleted after the node that prev points to
        curr = prev -> next; // The node is saved to a pointer
        prev -> next = curr -> next;
    }

    --size;
    theData = curr -> theData;
    delete curr;
    return theData;
}

template <class T>
T LinkedList<T>:: retrieve (int pos)
{
    try
    {
        if(pos < 1)// If the position is less than one an error will occur.
            throw 99;
    }
    catch (int x)
        {cout << "Error. Error Number: " << x;}

    if (pos >= 1)
    {
        ListNode<T>* curr = find(pos);  
        return curr-> data; //returns data to a node.
    }
}
#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:04:25.913

错误消息说明了一切。

导致错误的这一行访问struct的`item`成员`ListNode`

```
curr -> item = item; 
```

`ListNode`没有这样的成员，可能您的意思是`data`代替`item`.

这同样适用于有错误的另一行

```
theData = curr -> theData; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:10:41.657

嗯..编译器告诉你，根据你在错误中说的话

您对 line 的使用`curr -> item`在函数中无效，`insert`因为该结构没有一个名为`item`它的成员，它有一个名为`data`

`curr -> theData`出于同样的原因，您在函数 remove 中对 line 的使用无效...

还要检查你的插入，

我相信代码

```
curr ->  next = prev;
prev -> next = curr; 
```

会`curr`指出`prev`, 和`prev`to `curr`?! 闭环？！那是你要的吗？！

你不是说

```
curr -> next = prev -> next;
prev -> next = curr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:08:39.407

编译器在此行中将您的 using`item`和`theData`作为数据成员引用：

```
 curr -> item = item; 
```

您可能的意思是：

```
 curr -> data = item; 
```

这行：

```
theData = curr -> theData; 
```

您可能的意思是：

```
 curr -> data = theData; 
```

# winapi - winApi 32 图标定义

> ID：12861833
> 
> 赞同：1
> 
> 时间：2012-10-12T15:00:26.410
> 
> 标签：winapi

我想询问有关 winApi 32 自定义图标创建的问题。当我在中定义图标时`recource.h`：

`#define IDI_MYICON 1`

在这种情况下，这个数字`1`是什么意思？`IDI`它只是一个标准还是它实际上意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:07:58.213

构建时，图标存储在 PE 文件的资源部分中。“1”是该图标的资源标识符。它不必是“1”，但每个图标必须有一个唯一的标识符。从1开始向上走更容易。

IDI 是 Microsoft 用于标识图标资源的约定。您实际上可以将其命名为您想要的任何名称，但坚持约定会减少混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:04:32.650

`1`是值，`IDI_MYICON`只是一个占位符`1`

`IDI`是前缀，代表`An Icon or bitmap resource`

看到这个[列表](http://en.wikibooks.org/wiki/Windows_Programming/Resource_Script_Reference#Identifiers)

通常 ResourceID 由 Visual Studio（或其他 IDE）自动分配。

所以你可以在你的代码中使用`IDI_MYICON`而不是使用。`1`

# asp.net - 在 ASP.NET 中清除会话

> ID：12861835
> 
> 赞同：7
> 
> 时间：2012-10-12T15:00:27.040
> 
> 标签：asp.net, .net, session, logout, siteminder

我是一名新开发人员，我被分配了找出为什么我们的注销功能不起作用的任务。我已经尝试了我能找到的所有可能的方法。下面是我保留的日志，其中包括我使用过的方法。

1.  在 CommonHeader.ascx 表单中添加了一个注销按钮

2.  在 logout.aspx.vb 表单中尝试了许多方法来让它结束或清除会话，但它们都不起作用。

一个。以 logout.aspx.vb 形式定义的 ClearSession 子例程：

```
Session("Variable") = ""
FormsAuthentication.SignOut()
Session.RemoveAll()
Session.Abandon()
Session.Clear() 
```

湾。还将它添加到 Page_Load 子例程的顶部：

```
HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache)
HttpContext.Current.Response.Cache.SetNoServerCaching()
HttpContext.Current.Response.Cache.SetNoStore() 
```

C。还将 ClearSession 子例程更改为`Session.Contents.Remove("Variable")`from`Session("Variable") = ""`

这些方法都不起作用。我们使用**Siteminder**，我一直想知道这是否是问题的根源。**我只是在清除使用Siteminder**的 Session 时找不到任何东西。另请记住，此应用程序是使用 Visual Studio 2003 编码的。

这是我在 ascx 文件中使用的按钮的代码：

athp:TopNavText Title="注销" NavigateUrl="logout.aspx" Target="_top"/

然后在“logout.aspx”表单上，我尝试使用上述方法之一或每种方法的组合。这是我接触之前的代码：

```
Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load  

     ClearSession() 
     Response.Redirect("login.aspx") 

End Sub 

Public Sub ClearSession() 

     Session("Variable") = "" 

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:25:42.343

终于找到了解决方案，我最初没有在删除包含站点管理器会话ID的cookie时定义域。我使用的代码如下：

```
 Dim cookie3 As HttpCookie = New HttpCookie("SMSESSION", "NO")
        cookie3.Expires = DateTime.Now.AddYears(-1)
        cookie3.Domain = ".domain.com"
        Response.Cookies.Add(cookie3)

        Response.Redirect("login.aspx") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:00:01.687

这个问题：[formsauthentication-signout-does-not-log-the-user-out](https://stackoverflow.com/questions/412300/formsauthentication-signout-does-not-log-the-user-out)描述了即使在调用 FormsAuthentication.SignOut() 之后也没有清除 cookie 的问题。这听起来像您的问题，他们说这是.NET 的一个错误，并且您使用 1.1 这听起来很可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:00:07.353

HI 朋友请在用户控件中添加按钮的点击事件。在点击事件中，请添加以下代码并删除所有其他代码。

会话（“变量”）=“”；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T18:23:35.937

看看这个帖子

[C# 清除会话](https://stackoverflow.com/questions/6640350/c-sharp-clear-session)

无论是升c还是vb，同样的规则仍然适用。您正在调用会话放弃然后清除，但是当您调用清除时，会话应该已经消失了。

Clear 将会话状态与其中的对象一起保存，因此通过在放弃后调用它，实际上可以为用户重新初始化会话，但变量已被清除。

请参阅此帖子以了解终止会话并重定向到登录页面的顺序和正确方法（如果您有一个）

[FormsAuthentication.SignOut() 不会将用户注销](https://stackoverflow.com/questions/412300/formsauthentication-signout-does-not-log-the-user-out)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T19:07:45.890

首先要注意的是，如果您使用的是表单身份验证，则 Session 与用户是否登录完全无关。

如果 CookiesSupported 为 false，则调用[FormsAuthentication.SignOut](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.signout.aspx)将从 cookie 或 URL 中删除表单身份验证票信息。

但它不会影响 Session 中存储的内容。

**更新**

为什么您认为注销 (FormsAuthentication.SignOut) 不起作用？当您单击“退出”时，您期望发生什么，实际发生了什么？

我会去掉所有代码来清除 Session 并看看这个。例如，使用[Fiddler](http://www.fiddler2.com/fiddler2/)等工具查看 http 流量：您应该能够看到当您单击 Log Out 时 FormsAUthentication cookie 已被删除。

# php - 使用 AND 选择语句

> ID：12861836
> 
> 赞同：2
> 
> 时间：2012-10-12T15:00:29.860
> 
> 标签：php, mysql

我有一个包含列字段的答案表，例如：

```
questionID,answer,email
row1: questionID = 'q1', answer = 'Male', email = 'fake@fake.com'
row2: questionID = 'q2', answer = 'Human',email = 'fake@fake.com' 
```

我想要一个这样的选择语句：

```
SELECT email 
FROM answers 
WHERE (questionID='q1' AND answer='Male') 
    AND (questionID='q2' AND answer='Human') 
```

所以换句话说，我想要所有男性和人类的电子邮件。问题是每个“答案”都是一个新行，所以这个查询不起作用。有没有办法轻松做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:02:26.697

```
SELECT email FROM answers 
WHERE answer='Male' OR answer='Human'
group by email 
having count(distinct answer) = 2 
```

# ruby - 在 Ruby 中转义单引号

> ID：12861839
> 
> 赞同：0
> 
> 时间：2012-10-12T15:00:32.700
> 
> 标签：ruby

所以我正在制作一个小红宝石脚本来解析 .csv 并输出一个大型 MySQL 查询。问题是我正在使用的一些名称有单引号，这会弄乱我的 SQL...

我将引号转换为转义引号的尝试失败了，但我不确定为什么。但是当我打开我的 query.txt 文件时，肯定会出现像 D'vinci 这样的名称，而不是 D\'vinci。

我究竟做错了什么？

```
require 'csv'

filename = ARGV[0]
q = "INSERT INTO `table` (`username`, `password`, `firstname`, `lastname`, `email`) VALUES "

CSV.foreach(filename) do |row|
  last_name, first_name, email, id = row.each {|c| c.gsub "'", "\'"}
  q += "('#{id}', SHA1('password'), '#{first_name}', '#{last_name}', '#{email}'),\n"
end

q += ";"

File.open("query.txt", 'w').write(q) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:07:48.283

不要编写自己的 SQL 转义。请*始终*使用适当的数据库驱动程序提供的方法。

如果您使用的是 MySQL，或者`mysql`更新的`mysql2`gem，那么有一个`escape`函数可以为您处理这个问题。

当大多数数据库都具有某种从文件导入功能时，为什么要首先编写 SQL 并不完全清楚。如果使用正确， MySQL 尤其`LOAD DATA INFILE`可以读取许多不同的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:08:02.063

`each`返回接收器。所以，你`gsub`在那个街区里面什么都不做。改成`map`，应该没问题。或者，您可以保留`each`并使用`gsub!`。

# objective-c - UIWebview 在 segue 后不会加载

> ID：12861842
> 
> 赞同：0
> 
> 时间：2012-10-12T15:00:42.620
> 
> 标签：objective-c, ios, uiwebview, youtube

单击一行后，我想播放 youtube 电影。我正在按照以下方式进行操作。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
        [self performSegueWithIdentifier:@"showVideo" sender:indexPath];

}
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

        NSIndexPath *indexPath = (NSIndexPath *)sender;
        Video *video = [self.fetchedResultsController objectAtIndexPath:indexPath]; // ask NSFRC for the NSMO at the  row in question
        if ([segue.identifier isEqualToString:@"showVideo"]) {
             NSLog(@"url is: %@",video.url);
             [segue.destinationViewController setVideoURL:[NSURL URLWithString:video.url]];

        }
} 
```

当我单击一个单元格时，它会转到下一个屏幕，但它保持空白。虽然我的 NSLog 给了我正确的 url。

有人可以帮忙吗？

亲切的问候。

**编辑**

当我使用[http://www.google.be](http://www.google.be)作为 url 时，它可以工作。但是当我使用这个网址时：[http](http://www.youtube.com/v/066PWBKrh6k&autoplay=1) ://www.youtube.com/v/066PWBKrh6k&autoplay=1 它没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:07:38.787

问题来了。。

我试过你的链接 [http://www.youtube.com/v/066PWBKrh6k&autoplay=1](http://www.youtube.com/v/066PWBKrh6k&autoplay=1)这个链接变成了[http://youtube.googleapis.com/v/066PWBKrh6k&autoplay=1](http://youtube.googleapis.com/v/066PWBKrh6k&autoplay=1) 似乎iOS不支持苹果浏览器 ...

一种可能的解决方案

使用[http://m.youtube.com/videoThatYouWant](http://m.youtube.com/videoThatYouWant) ....

野生动物园应该能够显示您想要的视频...

希望有所帮助

# interrupt - 静态定义的 IDT

> ID：12861843
> 
> 赞同：7
> 
> 时间：2012-10-12T15:00:45.447
> 
> 标签：interrupt, x86, isr

我正在开发一个对启动时间有严格要求的项目。目标架构是在 32 位保护模式下运行的基于 IA-32 的处理器。确定可以改进的领域之一是当前系统动态初始化处理器的 IDT（中断描述符表）。由于我们没有任何即插即用的设备并且系统是相对静态的，我希望能够使用静态构建的 IDT。

然而，这对于 IA-32 架构来说是很麻烦的，因为 8 字节的中断门描述符拆分了 ISR 地址。ISR 的低 16 位出现在描述符的前 2 个字节中，其他一些位填充接下来的 4 个字节，最后 ISR 的最后 16 位出现在最后 2 个字节中。

我想使用一个 const 数组来定义 IDT，然后简单地将 IDT 寄存器指向它，如下所示：

```
typedef struct s_myIdt {
    unsigned short isrLobits;
    unsigned short segSelector;
    unsigned short otherBits;
    unsigned short isrHibits;
} myIdtStruct;

myIdtStruct myIdt[256] = {
    { (unsigned short)myIsr0, 1, 2, (unsigned short)(myIsr0 >> 16)},
    { (unsigned short)myIsr1, 1, 2, (unsigned short)(myIsr1 >> 16)}, 
```

等等

显然这不起作用，因为在 C 中这样做是非法的，因为 myIsr 不是常量。它的值由链接器解析（它只能做有限的数学运算）而不是编译器。

关于如何做到这一点的任何建议或其他想法？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T00:47:12.567

您遇到了一个众所周知的 x86 疣。我不相信链接器可以将您的 isr 例程的地址填充为 IDT 条目所期望的混合形式。

如果您觉得雄心勃勃，您可以创建一个 IDT 构建器脚本来执行类似这种（基于 Linux）的方法。我还没有测试过这个方案，无论如何它可能是一个令人讨厌的黑客，所以小心行事。

第 1 步：编写一个脚本来运行“nm”并捕获标准输出。

第 2 步：在您的脚本中，解析 nm 输出以获取所有中断服务例程的内存地址。

第 3 步：输出一个二进制文件“idt.bin”，其中包含所有 IDT 字节并为 LIDT 指令做好准备。您的脚本显然以正确的混合形式输出 isr 地址。

第 4 步：使用 objcopy 将他的原始二进制文件转换为 elf 部分：

`objcopy -I binary -O elf32-i386 idt.bin idt.elf`

第 5 步：现在 idt.elf 文件包含您的 IDT 二进制文件，其符号如下：

```
> nm idt.elf
000000000000000a D _binary_idt_bin_end
000000000000000a A _binary_idt_bin_size
0000000000000000 D _binary_idt_bin_start 
```

第 6 步：重新链接您的二进制文件，包括 idt.elf。在您的程序集存根和链接器脚本中，您可以将符号 _binary_idt_bin_start 作为 IDT 的基础。例如，您的链接描述文件可以将符号 _binary_idt_bin_start 放置在您喜欢的任何地址。

请注意，与 IDT 部分重新链接不会移动二进制文件中的任何其他内容，例如您的 isr 例程。通过将 IDT 放入它自己的专用部分，在您的链接描述文件（.ld 文件）中管理它。

**---编辑---** 从评论中，似乎对这个问题感到困惑。32 位 x86 IDT 期望中断服务程序的地址被分成两个不同的 16 位字，如下所示：

```
31 16 15 0
+---------------+---------------+
| 地址 31-16 | |
+---------------+---------------+
| | 地址 15-0 |
+---------------+---------------+

```

因此，链接器无法将 ISR 地址作为正常重定位插入。因此，在启动时，软件必须构建这种拆分格式，这会减慢启动时间。

# perl - 如何让网站运行 perl CGI 脚本而不在 URL 中包含脚本名称？

> ID：12861846
> 
> 赞同：1
> 
> 时间：2012-10-12T15:00:53.170
> 
> 标签：perl, url, cgi

当用户访问“http://www.mydomain.com/”时，当前返回 index.html。相反，我想运行一个 CGI 脚本。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:49:15.580

如果您使用的是 Apache，您可以在 VirtualHost 配置中添加如下内容：

```
DirectoryIndex index.cgi index.html index.htm 
```

这将导致 Web 服务器首先查找 index.cgi，然后返回到 index.html，然后是 index.htm。这是一种方法，当然，您需要确保您的脚本被命名为 index。 cgi（或任何您想使用的默认名称。更多信息可以[在 Apache 文档中找到 mod_dir](http://httpd.apache.org/docs/2.2/mod/mod_dir.html)

# php - 数组内递增

> ID：12861851
> 
> 赞同：0
> 
> 时间：2012-10-12T15:01:21.483
> 
> 标签：php, arrays

我有这个代码：

```
(...)
'choices' => array(
    $new_array['font-css'][0] => $new_array['font-name'][0]
) 
```

里面有`new_array['font-name']`字体名称。

**我需要显示所有字体名称**，但 new_array['font-name'] 是数组，要获得一个字体名称，我必须使用`new_array['font-name'][0]`（第一种字体）或`[1]`（第二种字体）。

$new_array['font-css'] 也有同样的问题。我必须显示所有的 CSS 名称。

我不能`foreach()`在数组中使用 and for() 。我不能增加变量。

有没有办法将所有字体名称`$new_array['font-name']`和所有css名称附加到数组`$new_array['font-css']`？也许，有没有办法在数组中增加一个变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:21:09.023

我*认为*这就是您所要求的：-

```
// example array
$new_array = array();
$new_array['font-css'] = array('blue', 'red', 'green');
$new_array['font-name'] = array('tahoma', 'arial', 'verdana');

$choices = array();
foreach ($new_array['font-css'] as $k => $v) {
    $choices[$v] = $new_array['font-name'][$k];
}

var_dump($choices); 
```

因此，遍历您的`font-css`数组，并将每个值映射到数组中的相应值，每个映射`font-name`到一个名为`$choices`.

上面的示例输出：-

```
array
  'blue' => string 'tahoma' (length=6)
  'red' => string 'arial' (length=5)
  'green' => string 'verdana' (length=7) 
```

这基本上与以下内容相同：-

```
'choices' => array(
    $new_array['font-css'][0] => $new_array['font-name'][0],
    $new_array['font-css'][1] => $new_array['font-name'][1],
    $new_array['font-css'][2] => $new_array['font-name'][2]
); 
```

# jquery - $.datepicker.regional['fr'] 未定义？

> ID：12861853
> 
> 赞同：1
> 
> 时间：2012-10-12T15:01:26.140
> 
> 标签：jquery, jquery-ui

当我将 jquery 和 jquery ui 版本从 1.3.2 和 1.7.3 升级到 1.7.1 和 1.8.16 时，我收到了错误。有人可以帮我解决这个问题。

jquery-1.7.1.js 使用 jquery-ui 1.8.16

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-02T17:14:26.327

我不知道你是否已经成功了，但是我在使用 Bundle Minification 的 webconfig 中使用 debug=false 时出现了这个错误。出于任何我不知道的原因，它并没有完成 jQuery UI 脚本的所有捆绑。我已经在其他文件 javascript 中分离了 Datepicker 脚本，并将再次在捆绑配置中进行配置。我不知道这是否是您的情况，但对我来说似乎有效。您的“datepiker”已加载？

# python - 索引循环python

> ID：12861854
> 
> 赞同：0
> 
> 时间：2012-10-12T15:01:27.337
> 
> 标签：python, loops

我想知道我是否只是想以优雅和 python 的方式获取数组的索引，我应该如何去做。我也可以使用范围（0，len（array）），但是有更好的方法吗

```
def array(self):
    array = ['a','b','c']
    for i , j in enumerate (array) :
        print i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:03:33.230

不`enumerate`，是在 Python 中迭代数组的“pythonic”和最佳方式（如果您需要索引和元素）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:13:04.320

通常，我会使用`enumerate`：

```
for i,_ in enumerate(myiter):
    ... 
```

下划线习惯性地说“我需要这个来避免解包时出现语法错误，但我不会使用结果”。

但是，如果您*只*需要索引，那么（在我看来）也可以这样做：

```
for i in xrange(len(lst)):  #range for py3k.
    ... 
```

* * *

请注意，仅需要索引的情况很少见。根据用例，您通常可以通过司法使用`zip`或其他内置函数来避免需要它...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:13:14.507

正如许多其他人所说，枚举是要走的路。如果您不打算使用 j，只是一个建议：

```
for i, _ in in enumerate (array) : 
```

或者：

```
for i, foo in in enumerate (array) : 
```

这样你就不会感到困惑，而且更优雅一点。

# c - 通过 Sun RPC 发送二进制文件

> ID：12861857
> 
> 赞同：1
> 
> 时间：2012-10-12T15:01:33.433
> 
> 标签：c, sunrpc

我正在尝试使用 Sun RPC 实现一个小型客户端-服务器程序。我希望它具有的一项功能是让客户端能够将任何格式的文件上传到服务器。

现在我有这个规范：

```
struct add_in{
  string author<>;
  string title<>;
  opaque file<>;
};

struct node{
  struct node * next;
  int id;
  string author<>;
  string title<>;
  opaque paper<>;
}; 

struct info_out{
  string author<>;
  string title<>;
};

typedef int add_out;
typedef int remove_in;
typedef struct node* list_out;
typedef int info_in;
typedef int fetch_in;
typedef char* fetch_out;

program FUNCTIONS {
  version FUNCTIONS_VERS {
    /* Add function. Adds paper to server "database"*/
    add_out ADD_PROC(add_in) = 1;
    /*Remove function. Removes paper from server "database"*/
    void REMOVE_PROC(remove_in) = 2;
    /*List function. Displays the papers currently stored by the server*/
    list_out LIST_PROC() = 3;
    /*Info function. Displays the auther and title of a specific paper*/
    info_out INFO_PROC(info_in) = 4;
    /*Fetch function. Fetches content of paper from server*/
    fetch_out FETCH_PROC(fetch_in) = 5;
  } = 1;
} = 0x00000001; 
```

这是我的客户：

```
#include "functions.h"
#include <stdio.h>
#include <stdlib.h>

char * read_file(char* path){
  FILE *file;
  char *buffer;
  long file_length;

  file = fopen(path, "rb");
  if(file == NULL){
    perror("Unable to open file");
    exit(1);
  }
  printf("file opened\n");

  fseek(file,0,SEEK_END);
  file_length = ftell(file);
  fseek(file,0,SEEK_SET);

  buffer=(char *)malloc(file_length+1);
  if(buffer == NULL){
    perror("Error allocating memory");
    exit(1);
  }
  printf("Memory allocated\n");

  fread(buffer, file_length, 1, file);
  fclose(file);

  printf("File imported, fd closed\n");
  return buffer;
}

int main(int argc, char** argv){
  CLIENT *cl;
  char *buf;
  add_in in;
  add_out *out;

  cl = clnt_create(argv[1], FUNCTIONS, FUNCTIONS_VERS, "tcp");
  in.author = argv[3];
  in.title = argv[4];
  in.file = read_file(argv[5]);

  out = add_proc_1(&in, cl);
  if(out == NULL){
    fprintf(stderr,"Error: %s\n", clnt_sperror(cl,argv[1]));
  }else{
    printf("%d\n",*out);
  }

  return 0;
} 
```

问题在于“in.file = read_file(argv[5])”语句。我收到一个编译器错误说明：

> 从类型'char *'分配给类型'struct'时不兼容的类型</p>

所以我的问题是，他需要什么样的指针*？*

谢谢！

莱纳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:34:21.907

`opaque file`被翻译成一个结构：

```
struct {
    uint file_len;
    char* file_val;
} 
```

# regex - 用于获得亮点的正则表达式片段

> ID：12861858
> 
> 赞同：2
> 
> 时间：2012-10-12T15:01:35.977
> 
> 标签：regex, solr, highlight

我希望以特定格式突出显示 solr。

以下是我需要为其提供突出显示功能的字符串格式

```
130s: LISTEN! LISTEN! 138s: [THUMP] 143s: WHAT IS THAT? 144s: HEAR THAT?
152s: EVERYBODY, SHH. SHH. 156s: STAY UP THERE. 163s: [BOAT CREAKING] 165s:
WHAT IS THAT? 167s: [SCREAMING] 191s: COME ON! 192s: OH, GOD! 193s: AAH!
249s: OK. WE'VE HAD SOME PROBLEMS 253s: AT THE FACILITY. 253s: WHAT WE'RE
ATTEMPTING TO ACHIEVE 256s: HERE HAS NEVER BEEN DONE. 256s: WE'RE THIS CLOSE
259s: TO THE REACTIVATION 259s: OF A HUMAN BRAIN CELL. 260s: DOCTOR, THE 200
MILLION 264s: I'VE SUNK INTO THIS COMPANY 264s: IS DUE IN GREAT PART 266s:
TO YOUR RESEARCH. 
```

* * *

用户搜索后，我想提供以下格式的用户片段

```
Previous Line of Highlight + Line containing Highlight + Next Line of
Highlight 
```

为了。例如，用户搜索词 hear ，然后一个典型的高亮片段应该如下所示

```
<str>143s: WHAT IS THAT? 144s: <em>HEAR</em> THAT? 152s: EVERYBODY, SHH.
SHH.</str> 
```

以上是我的最终计划，但现在我正在尝试获取以 ns 开头的片段，其中 n 是 0 到 9999 之间的数字

我使用 hl.regex.slop = 0.6 而我的 hl.fragsize=120 及以下是正则表达式。

```
\b(?=\s*\d{1,4}s:){50,200} 
```

使用上面的正则表达式我的片段总是不以 ns 开头：

请就此提出建议，我怎样才能实现最终计划

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:44:33.170

您可以通过将您正在搜索的文本在每个 ns.

例子

130s：听！听！
138s：[砰]
143s：那是什么？
144s：听到了吗？
152s：每个人，嘘。嘘。

然后进行正则表达式搜索，这会变得更简单：

`(^\d{1,4})(s: .*?)(SEARCHPATTERN)(.*)`

然后抓取前一行和下一行（在本例中 SEARCHPATTERN 为 HEAR）。为了更快地找到前一行和后一行（无需回溯和向前搜索），您可以使用所有 \d{1,4} 行开头键入其行号来填充哈希图。

带有行号的哈希图（我的符号只是概念性的）

“130” => 1
“138” => 2
“143” => 3
“144” => 4
“152” => 5

您的正则表达式告诉您搜索词位于以 144 开头的行（正则表达式中的第 1 组），您的哈希图告诉您这是第 4 行，因此您知道除了匹配的组之外，您还必须获取第 3 行和第 5 行正则表达式。

结果 =`<str>line3 + \1 + \2 + <em>\3</em>\4 + line5</str>`

注意：我不是 solr 用户，所以我的正则表达式语法和示例结果字符串应该作为总体思路。我不知道 solr 是否有自己的符号。

# c# - 我正在检索数据表单 Ms.Access 文件，但它显示文件名如何解决？

> ID：12861861
> 
> 赞同：0
> 
> 时间：2012-10-12T15:01:42.917
> 
> 标签：c#, c#-4.0, c#-3.0

我想通过列表从 MS.Access 检索数据，但是当运行应用程序时，它会显示所有条目，但只是像 Student.StudentInformation 这样的文件名我不知道为什么，然后当我选择第一个条目时，我会显示正确的数据文本框？我查询的是：

```
public ICollection<StudentInformation> GetStudents()
   {
        OleDbConnection con = new OleDbConnection(connectionString);
        OleDbCommand cmd = new OleDbCommand();
        cmd.Connection = con;
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "SELECT * FROM Students";

       ObservableCollection<StudentInformation> students = new ObservableCollection<Student>();
       try
       {
           con.Open();
           OleDbDataReader reader = cmd.ExecuteReader();
           while (reader.Read())
           {
               Student aStudent = new Student(Convert.ToInt32(reader["StudentID"]),
                                               reader["StudentName"].ToString(),
                                               reader["StudentEmail"].ToString());

               students.Add(aStudent);
           }
           reader.Close();
           return students;
       }
       finally
       {
           con.Close();
       }
   } 
```

在学生信息类中，我确实设置了两个构造函数。一个是默认构造函数，第二个是传递值。

我在列表框中显示：

```
private ICollection<StudentInformation> students;
 private void BtnGetStudent_Click(object sender, RoutedEventArgs e)
    {
        students = StudentDb.GetStudents();
        Studentlst.ItemsSource = students;
    } 
```

它显示像 Student.StudentInformation 这样的列表如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:04:44.607

这似乎是一个演示问题。您应该解释 WPF（您正在使用 WPF，对吗？）如何显示`StudentInformation`.

作为一个简单的解决方法，您可以重载`ToString()`for函数`StudentInformation`，但更好的解决方案是`DataTemplate`为它编写一个。（你知道怎么做吗？）

需要注意的是：在 UI 线程中访问数据库不是一个好主意，这会在查询期间阻塞您的 UI。

# python - 无法在 Eclipse 中作为“PyDev：Django”运行

> ID：12861863
> 
> 赞同：6
> 
> 时间：2012-10-12T15:01:49.790
> 
> 标签：python, django, eclipse, pydev

在 Eclipse 中创建新的 Django 项目时，我可以通过将项目作为“PyDev：Django”运行来运行服务器，如下面的屏幕截图所示：

![运行方式 --> PyDev: Django](../Images/f9d33af6021d1feea1aa36eb58fd263d.png)

我最近从[GitHub](http://github.com)分叉了一个 Django 项目，将其添加到 Eclipse 并将其设置为 Django 项目。问题是我没有在 Eclipse 中尝试将项目作为“PyDev：Django”运行的选项：

![运行方式 --> 运行配置](../Images/86d434375dda951075007de881102a22.png)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T13:33:47.077

在 Eclipse 中导入现有项目后，我遇到了同样的问题。

这是我解决它的方法：

*   使用“PyDev”->“设置为 Django 项目”将目录设置为 Django 项目
*   使用相同的“PyDev”菜单并将其设置为“作为 PyDev 项目”。

最后一个命令将配置项目的 pydev 特性。您现在应该在“运行方式”菜单中拥有“PyDev：Django”和“Python 单元测试”选项。

# entity-framework - 由于两个外键而导致的单一收集？

> ID：12861871
> 
> 赞同：0
> 
> 时间：2012-10-12T15:02:07.317
> 
> 标签：entity-framework, ef-code-first

假设我有以下实体：

```
public partial class Store
{
    public Store()
    {
        this.ConglomeratesByField1 = new HashSet<Conglomerate>();
        this.ConglomeratesByField2 = new HashSet<Conglomerate>();
    }

    [Key]
    public int ID_Store { get; set; }
    public string StoreName { get; set; }

    [ForeignKey("ID_Store1")]
    public virtual ICollection<Conglomerate> ConglomeratesByField1 { get; set; }
    [ForeignKey("ID_Store2")]
    public virtual ICollection<Conglomerate> ConglomeratesByField2 { get; set; }
} 
```

使用代码优先，是否有可能拥有一个“Conglomerates”属性，它将成为 ConglomeratesByField1 和 ConglomeratesByField2 的“联合”，或者我必须使用专门的方法扩展类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:34:32.973

因为您有两个不同的关系，所以您需要两个单独的导航属性。您不能将单个导航属性映射为多个关系的端点。

要获得一个组合集合，您可以引入一个（只读且未映射的）辅助属性：

```
public IEnumerable<Conglomerate> ConglomeratesByField
{
    get { return ConglomeratesByField1.Union(ConglomeratesByField2); }
} 
```

# python - 阿拉伯语字体未使用 python 插入 mysql

> ID：12861874
> 
> 赞同：1
> 
> 时间：2012-10-12T15:02:20.943
> 
> 标签：python, mysql, eclipse, encoding, arabic

我正在尝试使用python将阿拉伯字体从网站插入到mysql数据库中，字体在控制台中正确显示为阿拉伯语，但是当它插入数据库时​​，它没有正确显示，当我想尝试在我们的网页中显示它时还有像“Ø¨Ø±Ø¬Ø§Ù„Ø¯ÙˆÙ”我还将我的数据库/模式和表列的字符集更改为 Utf-8 General_ci/utf_8 unicode 并添加

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

到我的网页，我想在其中显示这些阿拉伯字体但仍然存在同样的问题，任何人都有一个想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:18:17.217

确保您使用`unicode`的是您的价值观，而不是`str`.

```
cursor.execute('INSERT INTO `table` VALUES (?)', ('あいうえお',))   # WRONG
cursor.execute('INSERT INTO `table` VALUES (?)', (u'あいうえお',))  # RIGHT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:54:00.567

您的问题是编码在途中的某个地方被抬高了。正如 Ignacio 所说，您应该将数据库中的信息保存为 Unicode。然后，当您在网页中显示它时，您需要将文本编码为 utf-8。

如何执行此操作取决于您使用的语言。在 python 中`content.encode('utf-8')`，“内容”是您从数据库中获取的任何文本的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:06:27.923

如果您只使用阿拉伯字体，那么我认为字符集会`iso-8859-6`起作用。我从未使用过阿拉伯字体，但 UTF-8 只适用于带有拉丁字母和额外 ASCII 字符的语言。我不知道阿拉伯语是否是 UTF-8 的一部分。试试看`iso-8859-6`！

# objective-c - 仅在最左侧检测到 UITableViewCell 上的 UIButton 触摸

> ID：12861876
> 
> 赞同：0
> 
> 时间：2012-10-12T15:02:24.353
> 
> 标签：objective-c, uitableview, uibutton

我有一个 UIButton 并且我已经为它分配了一个 UIImage 。UIButton 在我的 UITableViewCell 上，只有当我点击 UIButton 的左上方时它才会检测到触摸！以前有人遇到过这个问题吗？任何帮助表示赞赏。

这是我的代码：

```
 UIButton *indicatorlabel =
            [[UIButton alloc]
             initWithFrame:
             CGRectMake(280,20,22,22)];
            indicatorlabel.tag = INDICATOR_LABEL_TAG1;

            UITapGestureRecognizer *tapGesture24449 =[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTapShare:)];
            [indicatorlabel addGestureRecognizer:tapGesture24449];
            [indicatorlabel setTitle:@"shareit" forState:UIControlStateNormal];
            indicatorlabel.showsTouchWhenHighlighted=TRUE;
            indicatorlabel.userInteractionEnabled=TRUE;
 [indicatorlabel setImage:[UIImage imageNamed:@"Share.png" ] forState:UIControlStateNormal];

 [cell.contentView addSubview:indicatorlabel]; 
```

没有其他视图覆盖我检查过的 UIButton。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:11:49.203

对不起，我错了，我在同一坐标创建了另一个 UILabel。

# git - 无法使用 TortoiseGit 克隆存储库

> ID：12861878
> 
> 赞同：-1
> 
> 时间：2012-10-12T15:02:33.103
> 
> 标签：git, github, version-control, tortoisegit, msysgit

我正在尝试使用我在 Windows 平台上运行的**TortoiseGit**克隆 git 存储库，并且我已经安装了 TortoiseGit 1.7.13.0，当我尝试克隆存储库时，我收到以下错误消息

“断开连接：不支持可用的身份验证方法（服务器发送：公钥）”

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T01:07:57.283

下拉到 git bash 并从那里发出克隆命令。如果这不起作用，将更容易获得帮助。AFAIK，乌龟在下面使用 MSysGit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:20:34.340

尝试登录 GitHub`ssh -T git@github.com`

如果它不起作用，请检查您是否使用`ssh-add path/to/key`

确保您的 .ssh 目录中有密钥

# ios - 在 iOS 后台保持 socket.io 连接打开（非应用商店应用）

> ID：12861879
> 
> 赞同：2
> 
> 时间：2012-10-12T15:02:35.707
> 
> 标签：ios

我正在为 iOS 开发企业应用程序，这个应用程序不会进入应用商店。如果用户将应用程序发送到后台，我有没有办法保持与服务器的 socket.io(web socket) 连接打开。

谢谢您的帮助

# android - 如何：ListView 动画（添加/删除项目）

> ID：12861880
> 
> 赞同：1
> 
> 时间：2012-10-12T15:02:37.753
> 
> 标签：android, sql, listview

我有： ListView 从 SQLDatabase 获取 SimpleCursorAdapter。
我需要：在数据库中添加或删除某些数据时的动画（项目缓慢出现或消失）。

PS
我只需要使用LayoutAnimationController的例子

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T15:23:20.020

请参阅： http: [//developerlife.com/tutorials/ ?p=343](http://developerlife.com/tutorials/?p=343)

文档：http: [//developer.android.com/reference/android/view/ViewGroup.html#attr_android%3alayoutAnimation](http://developer.android.com/reference/android/view/ViewGroup.html#attr_android%3alayoutAnimation)

# android - android startVideo 拉伸并处于横向模式

> ID：12861883
> 
> 赞同：0
> 
> 时间：2012-10-12T15:02:42.280
> 
> 标签：android, video, camera

我的代码有一些问题。我必须启动相机并捕捉它，所以这是我的代码，我的问题是相机从一些奇怪的视图开始，比如横向模式和拉伸。

```
 mVideoCaptureView = (SurfaceView) findViewById(R.id.cameraView);
        SurfaceHolder videoCaptureViewHolder = mVideoCaptureView.getHolder();
        videoCaptureViewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        videoCaptureViewHolder.addCallback(new Callback() {
            public void surfaceDestroyed(SurfaceHolder holder) {
            }

            public void surfaceCreated(SurfaceHolder holder) {
                startVideo();
            }

            public void surfaceChanged(SurfaceHolder holder, int format,
                    int width, int height) {
            }
        }); 
```

和`startVideo()`功能

```
private void startVideo() {
        if(mCamera != null) return;
        SurfaceHolder videoCaptureViewHolder = null;
        try {
            mCamera = Camera.open();
        } catch (RuntimeException e) {
            Log.e("CameraTest", "Camera Open filed");
            return;
        }
        mCamera.setErrorCallback(new ErrorCallback() {
            public void onError(int error, Camera camera) {
            }
        }); 
        Camera.Parameters parameters = mCamera.getParameters();
        parameters.setPreviewFrameRate(30);

        mCamera.setParameters(parameters);
        if (null != mVideoCaptureView)
            videoCaptureViewHolder = mVideoCaptureView.getHolder();
        try {
            mCamera.setPreviewDisplay(videoCaptureViewHolder);
        } catch (Throwable t) {
        }

        try {
            mCamera.startPreview();
        } catch (Throwable e) {
            mCamera.release();
            mCamera = null;
            return;
        }
    } 
```

另外我必须在相机视图中添加我自己`buttons`的`ImageButtons`谢谢问候对不起英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:09:10.677

`Camera``camera.setDisplayOrientation(90);有一些功能；我从[这里得到的](https://stackoverflow.com/questions/4645960/how-to-set-android-camera-orientation-properly)

# shell - UNIX 中的 bc 命令 - 数字系统转换

> ID：12861888
> 
> 赞同：3
> 
> 时间：2012-10-12T15:02:50.860
> 
> 标签：shell, unix

我正在使用`bc`命令进行系统编号转换。
从十进制到二进制，从二进制到十六进制，从十六进制到十进制。
但我有一个问题。

这就是问题：

```
memam@mSolaris:~$ bc
ibase=2 
obase=16
1111
17 
```

为什么输出显示不正确？
输出必须是`F`？

当我使用 ibase=16 和obase=2 时，它可以正常工作。
当我更改`ibase=10`and`obase=2`时，它可以正常工作。

```
ibase=10
obase=2
3 
11 
```

但这是真的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:07:23.853

指定第`obase`一个，这样它就不会尝试用`ibase`.

```
$ bc
obase=16
ibase=2
1111
F 
```

或者，嗯……

```
$ bc
ibase=2
obase=10000
1111
F 
```

# javascript - Rails - javascript 不使用生成的 JSON 作为源

> ID：12861889
> 
> 赞同：0
> 
> 时间：2012-10-12T15:02:52.843
> 
> 标签：javascript, ruby-on-rails, json

我有一些使用 JSON 创建时间线的 javascript。我已经使用 json_builder 生成了 JSON，因此它只填充了当前用户的信息。当您转到其 URL 时，JSON 显示正常，但是当将 URL 提供给 JS 时，它找不到数据，因此时间线卡在加载屏幕上。

javascript“访问”时不会生成JSON吗？我能做些什么来解决这个问题，以便 javascript 获取正确的数据？如果你给 javascript 一个静态的 JSON 文件，它可以正常工作。

基本上，我认为我需要做的是让 javascript 以某种方式将 json 保存在一个变量中，然后它可以将其作为源而不是 URL 调用。或者我可以让 json_builder 在 javascript 函数中运行吗？

我对 Rails 很陌生，所以您可能需要为我详细说明一下，但是对于如何解决此问题的任何帮助将不胜感激，TIA。

Javascript：

```
<script>
            $(document).ready(function() {
                createStoryJS({
                    type:       'timeline',
                    width:      '800',
                    height:     '600',
                    source:     'users/<%= current_user.id %>/events.json',
                    embed_id:   'my-timeline'
                });
            });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:18:13.657

源代码应该以 开头`/`吗？

```
source: '/users/<%= current_user.id %>/events.json' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:56:48.440

我不知道为什么会这样，但确实如此！我只需要将 ?callback 添加到 URL 的末尾 - 即：

```
source:     '/users/<%= current_user.id %>/events.json?callback', 
```

这会获取正确的数据。

# java - 将两个正整数相乘转换为long的结果为负值

> ID：12861893
> 
> 赞同：8
> 
> 时间：2012-10-12T15:03:08.823
> 
> 标签：java, android, jvm, dalvik

我有这样的代码：

```
int a = 629339;
int b = 4096;
long res = a*b; 
```

结果是`-1717194752` ，但是如果我将一个手动转换添加到 long`long res = ((long)a)*b;`或`long res = (long) a*b;`结果是正确的，`2577772544` 谁能解释它是如何工作的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T15:21:47.077

您必须将赋值语句分解为各个部分以了解正在执行的操作：

```
long res = a*b; 
```

第 1 步是获取 和 的`a`值`b`。

第 2 步是评估`a * b`. 因为`a`和`b`都是`int`s，所以这是一个`int`乘法。所以我们乘以`629339`which`629339`将是`2577772544`。不幸的是，`2577772544`大于最大可能的 Java`int`值......所以乘法运算会悄悄*溢出*......我们得到`-1717194752`了相反的结果。

第 3 步，我们将 RHS 的值分配给 LHS。由于 RHS 是`int`并且 LHS 是`float`，JLS 说我们执行一个*原始的加宽*转换......它只是变成`-1717194752`具有`long`相同值的 a 。然后将扩大的值分配给`res`。

* * *

为了得到您期望的答案，我们必须强制使用`long`算术执行乘法。例如：

```
long res = ((long) a) * b; 
```

在这种情况下，我们将 a 与 a 相乘，这是`long`通过将 a`int`扩大`int`到 a`long`并执行`long`乘法来处理的。这不再溢出（因为`2577772544`远低于`long`最大值），所以当我们最终将值分配给 时`res`，它就是您期望的数字。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T15:04:16.020

`a*b`是整数，不是长整数。

因为它只是一个整数，所以它已经绕过了 32 位的限制。
将此整数转换回 long 不会神奇地恢复该数据。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-12T15:04:57.213

```
long res = a*b; 
```

`a*b`将被视为整数，除非您在结尾（或）演员表中添加“l”。

按照[java教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

> int 数据类型是一个 32 位有符号二进制补码整数。它的最小值为 -2,147,483,648，最大值为 2,147,483,647（含）。对于整数值，此数据类型通常是默认选择，除非有理由（如上述）选择其他类型。

# javascript - Firebug 中的语法错误

> ID：12861895
> 
> 赞同：0
> 
> 时间：2012-10-12T15:03:11.393
> 
> 标签：javascript, firebug

我正在尝试转换为 JavaScript 包含文件，在该文件中我不断收到 Firebug 中的语法错误，但它只显示第一个错误，当我注释掉带有该错误的行时，Firebug 会显示下一个错误。

例如，第一个语法错误是

```
var emailstr = form.from; 
```

当我在下一行评论它时

```
var groupsval = form.groups; 
```

显示语法错误等等。

是否有可能是我没有看到的另一种类型的错误导致了这种情况？当我在 Firebug 中的任何函数上设置断点时，它会显示“未定义函数”。

我一直盯着这段代码，直到我脸色发青，真的需要一些帮助。

```
function isValidEmail(form) {
    var emailstr = form.from;
    var groupsval = form.groups;
    var zipval = form.zip;
    var emailfilter=/^\w+[\+\.\w-]*@([\w-]+\.)*\w+[\w-]*\.([a-z]{2,4}|\d+)$/i
    if(emailfilter.test(emailstr.value)==false){
        alert("Email address is empty, incomplete, or contains invalid characters.");
        emailstr.select();
        return false;
    }
    // Check for correct zip code
    var zipval = form.zip;
    var zipfilter = /(^\d{5}$)|(^\d{5}-\d{4}$)/;
    if (!zipfilter.test(zipval.value)) {
      alert("Zip Code Is Not Valid or empty. Please use the format 99999 or 99999-9999.")
      return false;
    }
    return true;
}

function IsEmpty (aTextField) {
    if ((aTextField.value.length==0) ||
        (aTextField.value==null)) {
        return true;
    }
else { return false; }
}

function UpdateCountry(form) {
    if (form.state.value !== '') {
        form.cntry.selectedIndex = 224; 
    }
    else {form.cntry.selectedIndex = 0;}
}

function resetAll(frm) {
    var answer = confirm("are you sure?");
    if (answer == true){
        foreach(frm.elements as obj) {
            if(obj.value){
                obj.value = '';
            }
        }
    }
    else {
        answer = false;
    }
    return answer;
}

var GB_ANIMATION = true; 
$(document).ready(function()){ 
    $("a.greybox").click(function()){  
      var t = this.title || $(this).text() || this.href; 
      GB_show(t,this.href,700,900);
      return false; 
    }
}

function keycheck(event)
{  
if(event.keyCode==27)  
  GB_hide(); 
} 
```

# delphi - TDBGrid 列的设计时间还是运行时间？

> ID：12861897
> 
> 赞同：1
> 
> 时间：2012-10-12T15:03:16.480
> 
> 标签：delphi, tdbgrid

我是`TDBGrid`第一次使用。

我什至没有注意到`Columns`对象检查器中的属性，一切都很好：网格被填充了。

然后我看到了该`Columns`属性并尝试了它。当我使用对象昆虫器将项目添加到`Columns`网格的属性时，它们并没有全部显示在运行时。对我来说，财产似乎`FieldName`很重要。看起来是正确的，但某些列中没有值。

如果我将此属性留空（根本没有列），则控件似乎会在运行时自行填充它，并且我确实看到了所有列。我可以忍受。当我在运行时设置列标题时它可以工作，但设置列宽不起作用。

* * *

[更新] 感谢您的反馈。我正在慢慢学习。现在我看到了正在发生的事情。我想要计算五列中的三列。两个来自 INNER JOIN，第三个来自`SELECT ... FROM_UNIXTIME(<table>.time_stamp)`.

如果我没有在设计时定义列，那么这些值会在我执行 SELECT 时在运行时填充。Cnn 有人告诉我如何在设计时进行设置吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:49:14.023

在 dbGrid 上定义列的最佳方法是双击数据集以创建表单知道的变量（持久字段）。您可以编辑这些变量的各种属性，例如 DisplayLabel、DisplayWidth 和 DisplayFormat。

您还可以通过双击客户端数据集时出现的对话框来添加计算字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:28:50.810

运行时和设计时设置列之间的功能没有区别。即：可以在设计时完成的，也可以在运行时完成，反之亦然。

当 te`Columns`属性保持为空时，一旦打开数据集，网格默认使用它在链接数据集中找到的所有字段填充它。根据相应字段的类型、长度和名称，所有列特定设置，例如对齐方式、宽度、标题标题等...都设置为默认值。这是肯定就足够的懒惰方式。

出于以下一个或多个原因，您可能会考虑使用自己的设置或修改 columns 属性：

*   更改它们必须出现在网格中的数据集字段的顺序，
*   截断文本字段的宽度（尤其是长度较大的`VarChar`字段或`Char`字段通常会导致列太宽而无法正常呈现和/或用户交互），
*   更改字段的对齐方式（通常数字字段默认右对齐），
*   从数据集中隐藏一个或多个字段，
*   ETC...

这些自己的设置可以在设计时和运行时完成。

使用设计时列编辑器是需要这些自定义的首选和 RAD 方式。通过双击网格或属性，或通过网格的上下文菜单打开编辑器。如果链接的数据集处于活动状态，则启用*添加所有字段*的命令，这与您根本没有选择任何字段完全相同，即第二段中描述的默认行为。

# jquery - 具有多个系列的jQuery浮点阈值

> ID：12861898
> 
> 赞同：1
> 
> 时间：2012-10-12T15:03:24.090
> 
> 标签：jquery, flot

我正在尝试在一个图表上创建两个系列并带有阈值选项的浮点折线图。当我只有 1 个系列时，我知道如何启用阈值（比如这里[http://people.iola.dk/olau/flot/examples/thresholding.html](http://people.iola.dk/olau/flot/examples/thresholding.html)）。

问题是我不能用一个以上的系列来做到这一点。我的代码：

```
 var options = {
                grid: {
                    hoverable: true,
                    borderWidth: 1,
                },
                yaxis: {
                    min: 0,
                    max: 100
                },
                xaxis: {
                    mode: "time",
                    timeformat: "%y-%m-%d",
                },
                colors: ["rgb(44,55,66)","rgb(90,2,100)"]

            };
            $.plot($('#chart' + i),[lang,reg], options); 
```

lang 和 reg 是我的系列。我试图把阈值选项放在里面，`options`
比如`threshold: { below: 90, color: "rgb(200, 20, 30)" }`..但它没有用，而且我想在阈值中设置更多的一种颜色，所以它将是具有多个颜色级别的多个系列。
你知道怎么解决吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:22:08.183

您需要做的是将您的系列从数组更改为对象。

现在，您的数据如下：

```
[lang,reg] 
```

你需要的是：

```
[{
  data:lang,
  threshold: ...
}],
[{
  data:reg,
  threshold: ...
}] 
```

你可以在这里看到一个例子：http: [//jsfiddle.net/ryleyb/WXrJX/](http://jsfiddle.net/ryleyb/WXrJX/)

# php - PHP：打开 .txt 文件，逐行读取，删除（年份）

> ID：12861904
> 
> 赞同：0
> 
> 时间：2012-10-12T15:03:33.527
> 
> 标签：php

我正在寻找关于此的建议：

我有一个名为 movies.txt 的文本文件，它大约有 900 行，其中每行包含一个电影名称。但是，我想删除使用 PHP 发布电影的年份（我是新手）

格式基本上是：

```
A Nous la Liberte (1932)
About Schmidt (2002)
Absence of Malice (1981)
Adam's Rib (1949)
Adaptation (2002)
The Adjuster (1991)
The Adventures of Robin Hood (1938)
Affliction (1998)
The African Queen (1952) 
```

所以我正在寻找一种打开文本文件的方法，逐行读取并删除（YEAR）值，同时删除（YEAR）之前的空格。

然后我想将它保存为 newmovies.txt

如果您能向我展示和解释一个适合我需求的解决方案，那就太好了。我对 PHP 还是很陌生（一周前开始），所以这对我来说仍然很神奇。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:06:15.583

[`file()`](http://php.net/file)您可以使用该函数逐行读取文件。然后[`foreach`](http://php.net/foreach)越过它并带线直到左括号。

例如

```
foreach (file($fn) as $line) {
     $output[] = strtok($line, "(");
} 
```

您可能需要修剪多余的空间并再次添加换行符。

因此，正则表达式可能更简单，并且还可以断言一些结构而不会盲目地切断事物：

```
$text = file_get_contents($fn);
$text = preg_replace('/\s*\(\d+\)/m', '', $text);
     #  \s* is for spaces and \d+ is a placeholder for numbers 
```

然后保存回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:09:49.670

```
<?php
$toWrite = "";
$handle = @fopen("input.txt", "r");
if ($handle) {
    while (($buffer = fgets($handle, 4096)) !== false) {
        $toWrite .= preg_replace('/\(\d+\)/', '', $buffer) . "\n";
    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
    file_put_contents("input.txt", $toWrite);
}
?> 
```

# excel - 如何在 VBA 中创建数据透视表

> ID：12861909
> 
> 赞同：5
> 
> 时间：2012-10-12T15:03:41.620
> 
> 标签：excel, excel-2010, vba

我正在尝试创建一个数据透视表，但得到`Invalid Procedure Call or Argument`.

```
ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:="rng", Version:=xlPivotTableVersion14).CreatePivotTable TableDestination:="rngB", TableName:="pvtReportA_B", DefaultVersion:=xlPivotTableVersion14 
```

*   `rng`（来源）是一个由大约 20 列和几千行组成的范围。
*   `rngB`（目标）是不同工作表中的单个单元格

谁能告诉我哪里出错了？

编辑：

我的错，我应该一直使用`rngData`而不是`rng`作为来源。

```
 Set rng = wsA.Range("C14")
    Set rngData = Range(rng, rng.End(xlToRight))
    Set rngData = Range(rng, rng.End(xlDown))
    Set rngB = wsB.Range("C8")

    ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:=rngData, Version:=xlPivotTableVersion14).CreatePivotTable TableDestination:=rngB, TableName:="pvtReportA_B", DefaultVersion:=xlPivotTableVersion14 
```

这会很好地显示数据透视表框架。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T13:59:24.090

在这种情况下，我使用了错误的范围对象，这导致 Excel 出错。

```
Set rng = wsA.Range("C14")
Set rngData = Range(rng, rng.End(xlToRight))
Set rngData = Range(rng, rng.End(xlDown))
Set rngB = wsB.Range("C8")

ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:=rngData, Version:=xlPivotTableVersion14).CreatePivotTable TableDestination:=rngB, TableName:="pvtReportA_B", DefaultVersion:=xlPivotTableVersion14 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-17T11:44:13.203

**要使用 VBA 代码在Excel 2010**中创建数据透视表，您可以使用和调整此模板：

```
Sub newPVT()
    Dim PTCache As PivotCache
    Dim PT As PivotTable

    'Create the Cache
    Set PTCache = ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, _
        SourceData:=Range("Dynamic_Field_Summary"))

    'Select the destination sheet
    Sheets("Field Summary").Select

    'Create the Pivot table
    Set PT = ActiveSheet.PivotTables.Add(PivotCache:=PTCache, _
        TableDestination:=Range("P1"), TableName:="Pivot1")

    ActiveWorkbook.ShowPivotTableFieldList = True

    'Adding fields
    With PT
        With .PivotFields("Enterprise")
            .Orientation = xlColumnField
            .Position = 1
        End With

        With .PivotFields("Field")
            .Orientation = xlRowField
            .Position = 1
        End With

        With .PivotFields("Planted Acres")
            .Orientation = xlDataField
            .Position = 1
            .Caption = " Planted Acres"
            .Function = xlSum
        End With

        With .PivotFields("Harvested Acres")
            .Orientation = xlDataField
            .Position = 2
            .Caption = " Harvested Acres"
            .Function = xlSum
        End With

        With .PivotFields("lbs")
            .Orientation = xlDataField
            .Position = 3
            .Caption = " lbs"
            .Function = xlSum
        End With

        'Adjusting some settings
        .RowGrand = False
        .DisplayFieldCaptions = False
        .HasAutoFormat = False

        'Improving the layout
        .TableStyle2 = "PivotStyleMedium9"
        .ShowTableStyleRowStripes = True
        .ShowTableStyleColumnStripes = True

    End With

    With ActiveSheet
        'Adjusting columns width
        .Columns("P:V").ColumnWidth = 16
        .Range("Q2:V2").HorizontalAlignment = xlCenter
    End With

    ActiveWorkbook.ShowPivotTableFieldList = False
End Sub 
```

我在[这里](http://www.mrexcel.com/forum/excel-questions/711451-tabledestination-pivot-table-macro.html)找到了。

在[这个页面](http://msdn.microsoft.com/en-us/library/hh243933%28v=office.14%29.aspx)中你还可以细化代码中每一部分的含义，例如[这里](http://msdn.microsoft.com/it-it/library/microsoft.office.interop.excel.xlpivotfieldorientation%28v=office.11%29.aspx "这里")的解释。我认为这也是开始为 Excel 2007 或其他版本创建 vba 宏的好代码。

# jqgrid - 如何获得取消按钮事件？

> ID：12861911
> 
> 赞同：1
> 
> 时间：2012-10-12T15:03:57.243
> 
> 标签：jqgrid

我有一个带有“添加”按钮的 JQGrid。在我的网格中，当单击“添加”按钮时，会打开一个“添加”表单。“添加”表单有两个默认按钮：“提交”和“取消”。我想在取消按钮的点击事件上执行一些代码。我不确定如何处理这个问题有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:10:23.353

如果我理解正确，您希望在单击 CANCEL 按钮时执行 jquery 函数。这就是我要做的：

```
<input type="button" value="Cancel" id="btnCancel" />

 $('#btnCancel').on('click', function() {
  //DO STUFF
 }); 
```

或者

```
$('#btnCancel').click(function() {
 //DO STUFF
}); 
```

或者您可以对输入本身进行函数调用：

```
function myFunction() {
 //DO STUFF
}

<input type="button" value="Cancel" id="btnCancel" onclick="return myFunction();" /> 
```

# linux - 找不到包 'pygobject-3.0'

> ID：12861914
> 
> 赞同：8
> 
> 时间：2012-10-12T15:04:02.730
> 
> 标签：linux, package, fedora

我想安装 Accerciser 我的操作系统是 fedora 16 我下载了包，“cd”到文件夹中并运行“./configure”并得到

```
checking for PYGOBJECT... no
configure: error: Package requirements (pygobject-3.0 >= PYGOBJECT_REQUIRED) were not met:

No package 'pygobject-3.0' found

Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.

Alternatively, you may set the environment variables PYGOBJECT_CFLAGS and PYGOBJECT_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details. 
```

但是，我检查了似乎我已经安​​装了 pygobject 3 如何处理这个问题？谢谢！

```
[root@kit accerciser-3.5.3]# rpm -qa|grep "pygobject"
pygobject2-codegen-2.28.6-2.fc16.x86_64
pygobject3-3.0.3-1.fc16.x86_64
pygobject2-devel-2.28.6-2.fc16.x86_64
pygobject2-2.28.6-2.fc16.x86_64
pygobject2-doc-2.28.6-2.fc16.x86_64 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T15:14:20.683

安装`pygobject3-devel`软件包。

# java - 发送到后端时发生 I/O 错误

> ID：12861930
> 
> 赞同：1
> 
> 时间：2012-10-12T15:04:58.960
> 
> 标签：java, jdbc

我开始为我的项目使用 postgreSQL 服务器。这是我第一次使用它。我之前使用过其他商业关系数据库服务器和 mysql，但我没有遇到很多问题。我有一个基于 spring 和多线程的 java 应用程序。我正在使用 postgreSQL jdbc 9 版本。

这是数据源的弹簧配置。

```
 <bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="${jdbc.driverClass}"/>
    <property name="url" value="${tribune.jdbc.url}"/>
    <property name="username" value="${tribune.jdbc.username}"/>
    <property name="password" value="${tribune.jdbc.password}"/>
    <property name="initialSize" value="20"/>
    <property name="maxActive" value="40"/>
    <property name="maxIdle" value="1"/>
    <property name="poolPreparedStatements" value="true"/>
    <property name="maxOpenPreparedStatements" value="20"/>
    <property name="testWhileIdle" value="true"/>
    <property name="testOnBorrow" value="true"/>
    <property name="defaultAutoCommit" value="false"/>
    <property name="validationQuery" value="select version()"/>
</bean> 
```

当我运行我的应用程序时，我看到两个常见问题。

1.  org.postgresql.util.PSQLException：没有为 pstmt.setString(1, variable) 的更新语句的参数 1 指定值；我在此行之前检查变量以查看它是否为空或 null。但它仍然会发生。

    ```
     if (programId == null || programId.isEmpty()) {
        throw new IllegalArgumentException("'programId' can not be null.");
    }
    Connection conn = null;
    PreparedStatement pstmt = null;
    ResultSet rs = null;
    SubscriptionGroup subscriptionGroup = new SubscriptionGroup();

    conn = session.getConnection();
    String query = getQuery(QUERY_GET_NOTIFICATIONS_BY_PROGRAM_ID);
    log.debug("getSubscriptionGroupByProgramId.query: " + query);
    log.info("getSubscriptionGroupByProgramId.programId: " + programId + "=="+ programId.length());
    pstmt = conn.prepareStatement(query);
    pstmt.setString(1, programId);
    rs = pstmt.executeQuery(); 
    ```

'rs = pstmt.executeQuery()' 引发异常。

1.  原因：org.postgresql.util.PSQLException：发送到后端时发生 I/O 错误。在 org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:283) 在 org.postgresql.jdbc2.AbstractJdbc2Connection.executeTransactionCommand(AbstractJdbc2Connection.java:685) 在 org.postgresql.jdbc2.AbstractJdbc2Connection.commit(AbstractJdbc2Connection.java :709) 在 org.apache.commons.dbcp.DelegatingConnection.commit(DelegatingConnection.java:301) 在 org.apache.commons.dbcp 的 org.apache.commons.dbcp.DelegatingConnection.commit(DelegatingConnection.java:301)。 PoolingDataSource$PoolGuardConnectionWrapper.commit(PoolingDataSource.java:200)

对于＃2，它发生在它尝试提交时，即使它没有从连接中获取语句失败。

任何人（使用过 postgreSQL 或熟悉数据源设置的人）可以告诉我问题出在哪里吗？

谢谢。

# ios - 转到 iOS 6 中的 App Store 评论

> ID：12861934
> 
> 赞同：4
> 
> 时间：2012-10-12T15:05:05.357
> 
> 标签：ios, ios6, xamarin.ios, xamarin

似乎使用 itms-apps//.... URL 方案在 iOS 6 中无法使用新的 App Store 来显示产品评论区域。现在我正在使用下面的代码，但它只是向您展示了产品。您如何到达评论区要求评论并将用户带到所显示产品的右侧选项卡？

```
 void DoReview()
    {
        var spp = new StoreProductParameters(appId);
        var productViewController = new SKStoreProductViewController();
        // must set the Finished handler before displaying the view controller
        productViewController.Finished += (sender2, err) => {
            // Apple's docs says to use this method to close the view controller
            this.navigationController.DismissViewController(true, null);
            MySettings.AskedForReview = true;
        };
        productViewController.LoadProduct(spp, (ok, err) => { // ASYNC !!!
            if (ok)
            {
                this.navigationController.PresentViewController(productViewController, true, null);
            }
            else
            {
                Console.WriteLine(" failed ");
                if (err != null)
                    Console.WriteLine(" with error " + err);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:47:20.090

你好，你可以试试[Nick Lockwood 的 iRate](https://github.com/nicklockwood/iRate)看看是否符合你的需要，你可以在[这里找到 iRate 的 MonoTouch 绑定](https://github.com/dalexsoto/AlexTouch.iRate)。

顺便说一句，它使用以下 URL 在审查模式下打开 AppStore：

> itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id= your-AppID-here

亚历克斯

# php - 使用下拉框过滤 MYSQL 数据

> ID：12861936
> 
> 赞同：1
> 
> 时间：2012-10-12T15:05:14.087
> 
> 标签：php, mysql, drop-down-menu, filter

我已经用数据库中的表填充了一个 html 页面。我想在顶部添加下拉框，可以过滤掉不必要的数据。我将如何将此信息发送到数据库以进行查询，以便我可以过滤掉具有多个变量的数据？

例如，我有 5 个类别，A、B、C、D 和 E。我使用 PHP 代码用 A、B、C、D 和 E 的可能值/条目填充框。我还添加了一个“NULL 条目”，以防用户不想将此列作为过滤器的一部分。

因此，就目前而言，对于我们可以拥有的各个列：

```
Apple, always, as, amazing, as, almonds, NULL.
Belly, boosts, bad, NULL.
Candy, can, create, NULL.
Dandy, does, do, don't, NULL.
Elements, exist, NULL. 
```

当变量不确定时，我将如何将信息发送到数据库？它们可能会或可能不会被设置。

我想我会首先查看是否使用 isset() 设置了变量，但是我将如何从那里开始呢？似乎有很多“如果”陈述。我需要做的就是根据用户输入的变量值更改查询。但我没有看到一个简单的方法来做到这一点。

我将简单地将“WHERE A = this AND B = that AND C = thisthat AND ..”添加到查询的末尾，但是如果一个或多个或所有这些条目为空怎么办？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:11:39.763

您可以轻松地构建 WHERE 查询，如下所示

```
$where = array();

if ($A != '')
{ 
    $where[] = 'A = "' . $A . '"';
}

if ($B != '')
{ 
    $where[] = 'B = "' . $B . '"';
}

if ($C != '')
{ 
    $where[] = 'C = "' . $C . '"';
}

if ($D != '')
{ 
    $where[] = 'D = "' . $D . '"';
}

if ($E != '')
{ 
    $where[] = 'E = "' . $E . '"';
}

// Now get the $where
$final_where = '';
if (count($where) > 0)
{
    $final_where = implode(' AND ', $where);
}

// $final_where will contain
// A = 'ab' AND B = 'cd' etc. 
```

*注意*请确保清理您的输入。因此，例如，您需要检查 $A 是否包含您希望它包含的值。其他任何东西都必须丢弃。您可以`in_array`像这样使用例如：

```
$a_array = array('first value', 'second value', 'third value');
if (in_array($A, $a_array))
{
    // Valid choice - we can use it
}
else 
{
    // Not valid set $A to null
    $A = '';
} 
```

# c# - NHibernate LINQ 查询不支持指定的方法错误

> ID：12861940
> 
> 赞同：1
> 
> 时间：2012-10-12T15:05:19.750
> 
> 标签：c#, linq, nhibernate, lambda

我是 NHibernate 的新手，在探索它时遇到了以下查询，它给了我“不支持指定的方法”。错误，任何想法为什么？

```
var merchantSite = session.Query<MerchantSite>().FirstOrDefault(x => x.Site.Id == SiteId);
var customers = session.Query<Customer>().Where(x => x.Transaction.Any<Transaction>(y => merchantSite.Transaction.Any<Transaction>(c => c.Id == y.Id))).ToList(); 
```

MerchantSite 和 Transaction 都有一个 Transaction 类型的对象列表。

肯定有人遇到过类似的情况，请分享一下您的经验，遇到这种情况我们该怎么办？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:08:19.203

当您执行 ToList 调用时，nHibernate 正在构建运行查询所需的 SQL，它基本上是在将其转换为单个 SQL 调用时遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T07:11:49.740

如果 x.Site 为空，那么您会得到“不支持特定方法”。你可以试试写

```
FirstOrDefault(x => x.Site != null && x.Site.Id == SiteId); 
```

或使用 C# 6

```
FirstOrDefault(x => x.Site?.Id == SiteId); 
```

# javascript - 如何使用 Javascript 向 CRM 2011 实体插入数据？

> ID：12861942
> 
> 赞同：2
> 
> 时间：2012-10-12T15:05:24.390
> 
> 标签：javascript, dynamics-crm-2011

我很确定这在某种程度上是一个基本/愚蠢的问题，但我只是找不到答案。

如何使用 Javascript（在`onChange`事件中调用）向实体插入新记录？

我的目标是将 4 个从事件表单读取的值插入到名为`statuslog`.

阅读这四个字段很容易。

```
// Statuscode: "1st Level Support"
var statuscodeTextValue = getPicklistValueText("statuscode");

// Incidentid: "AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEEE"
var incidentid = getGUIDOfCurrentRecord();

// Ownerid: "AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEEF"
var ownerid = getGUID("ownerid");

//timestamp is "Fri Oct 12 16:50:34 UTC +0200 2012"
var timestamp = new Date(); 
```

但接下来我该怎么办？一个特定的代码示例将不胜感激。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:14:01.730

MSDN 上有 CRUD（创建、读取、更新和删除）示例。我建议从[这里](http://msdn.microsoft.com/en-us/library/hh771584.aspx#BKMK_DataAccessUsingJavaScript)开始，一旦您决定使用 SOAP v REST，只需点击链接即可。我建议从 REST 开始。

另一方面，根据您的业务问题，JavaScript 可能不是这里的最佳选择。它只会在表单更改时运行，例如更新记录的 Web 服务调用或工作流不会触发 JavaScript。[同步插件](http://msdn.microsoft.com/en-us/library/gg328490.aspx)可能是一个更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:24:40.343

到目前为止，我看到的最好的例子是在 Gareth Tucker 的优秀博客上。在这篇文章中，他根据电话记录中填写的字段创建了一个新联系人。提供的所有代码，因此您应该能够改为适应您的自定义实体和字段。

[http://garethtuckercrm.com/2011/08/23/quick-create-contact-from-the-phone-call-form/](http://garethtuckercrm.com/2011/08/23/quick-create-contact-from-the-phone-call-form/)

# c# - 动态构造 LambdaExpression 时处理 Nullable 引用

> ID：12861943
> 
> 赞同：0
> 
> 时间：2012-10-12T15:05:26.007
> 
> 标签：c#, lambda, asp.net-3.5, expression-trees, nullable

我有一个类代表一个通用过滤器对象

```
public class Filter
{
    public string column { get; set; }
    public string operator { get; set; }
    public string data { get; set; }
} 
```

`LambdaExpression`多亏了这样的代码，我才能进行转换

```
public LambdaExpression ToExpression( IQueryable query ) {
    LambdaExpression toReturn = null;
    ParameterExpression parameter = Expression.Parameter( query.ElementType, "p" );
    MemberExpression memberAccess = GetMemberExpression( column, parameter );
    ConstantExpression filter = Expression.Constant( Convert.ChangeType( data, memberAccess.Type ) );
    WhereOperation condition = (WhereOperation)StringEnum.Parse( typeof( WhereOperation ), operator );
    LambdaExpression lambda = BuildLambdaExpression( memberAccess, filter, parameter, condition, data );
    if ( toReturn == null ) {
        toReturn = lambda;
    }
    return toReturn;
} 
```

根据要求，`Filter`成员`column`可以包含一种用于查询字段的导航语法，其表达`FieldA.FieldB.Description`方式如下：

*   获取从 FieldA 属性返回的类型 T 的值
*   获取T的FieldB返回的类型T1的值
*   获取 T2 的描述返回的类型 T2 的值

结果是一个像这样的 lambda：`p.FieldA.FieldB.Description == "data"` 我可以将此结果用作`Where`任何扩展方法的参数`IQueryable`

当导航查询的成员之一是`Nullable`类型时，问题就出现了。在这种情况下，假设 FieldA 可以为空，正确的 lambda 应该是

`p.FieldA != null && p.FieldA.FieldB.Description == "data"`

我尝试在`MemberExpression`使用类似这样的代码构造对象时实现此检查

```
MemberExpression memberAccess = null;
foreach ( var property in column.Split( '.' ) ) {
    memberAccess = MemberExpression.Property( memberAccess ?? ( p as Expression ), property );
    Type memberType = memberAccess.Type;
    if ( memberType.IsGenericType && 
         memberType.GetGenericTypeDefinition() == typeof( Nullable<> ) ) {

        //Create here an expression of type : memberAccess != null
    }
} 
```

这适用于原始类型，但不适用于其他对象引用，例如 EF`EntityReference`对象实例。我知道我可以简单地在前面添加另一个条件，`if`比如

```
if ( ( memberType.IsGenericType && 
       memberType.GetGenericTypeDefinition() == typeof( Nullable<> ) ) ||
       memberType.IsClass ) {
} 
```

但在我看来，这似乎太通用了，产生了一个条件太多的 lambda，其中大多数可能没用。

有没有办法更好地区分可空引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:08:37.283

您可以无条件地进行空检查。检查 null 的值类型不是非法的。

# python - 如何卸载使用“python setup.py develop”安装的 Python 站点包？

> ID：12861946
> 
> 赞同：1
> 
> 时间：2012-10-12T15:05:29.257
> 
> 标签：python, uninstallation, pip, setup.py

点冻结结果显示：

> -e git+git@github.com:Tallmad/zeus@6155c80f5b87cba0aeb8c1bfb6fc6b6dd86b0fa8#egg=zeus-dev

它失败：

> 点卸载 git+git@github.com:Tallmad/zeus@6155c80f5b87cba0aeb8c1bfb6fc6b6dd86b0fa8#egg

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:40:53.390

我已经解决了。两步：

第 1 步：我安装我的项目“宙斯”

> python setup.py 安装

Setp 2：卸载它：

> 点卸载宙斯

完毕

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-08T21:19:39.027

1.  再次安装`--record`以存储安装文件。

    > python setup.py install --record install.log

2.  手动从记录文件中删除这些文件

    > xargs rm -rf < install.log

# javascript - 从数组中删除最后一个元素（从字符串中删除最后一行）

> ID：12861951
> 
> 赞同：1
> 
> 时间：2012-10-12T15:05:45.703
> 
> 标签：javascript, jquery

我的文本字段有这个值：

```
"1  
2  2
3  
4  4
5  a
6  
7  
8
" 
```

当我用 "\n" 分割它时，我得到：

```
["1", "2  2", "3", "4  4", "5  a", "6", "7", "8", ""] 
```

我想删除最后一个元素。我正在这样做：

```
$('#textArrayId').val().replace($('#textArrayId').val().split("\n")[$('#textArrayId').val().split("\n").length - 1], "") 
```

而且我无法删除它。该怎么办？

我想用字符串操作而不是数组操作来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:08:10.390

要删除最后一行，请使用此

```
var lines = $('#textArrayId').val().split("\n");
var withoutLastLine = lines.slice(0, -1).join("\n");
$('#textArrayId').val(withoutLastLine); 
```

或者，如果您想删除没有空格的最后一行：

```
var lines = $.trim($('#textArrayId').val()).split("\n");
var withoutLastLine = lines.slice(0, -1).join("\n");
$('#textArrayId').val(withoutLastLine); 
```

要删除数组的最后一个元素，请使用此表达式接收除最后一个之外的所有元素：

```
x.slice(0, -1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:09:03.750

最好在拆分之前修剪掉空格。这样您就可以更稳健地处理输入：

```
var lines = document.getElementById('textArrayId').value
               .replace(/^\s+|\s+$/g,'').split(/\s+/); 
```

拆分中使用的正则表达式也将允许输入如下：

```
1    2
  3         4  5 6
 7    8 
```

另请注意：未使用 jQuery ^_^

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:16:30.530

您可以使用像 a[7] 这样的有界数组来存储从 1 到 8 的值。

# jquery - jQuery - 无法停止动画和淡出/淡入功能

> ID：12861954
> 
> 赞同：0
> 
> 时间：2012-10-12T15:05:52.780
> 
> 标签：jquery, animation, fadein, fadeout

我已经阅读了很多主题和 jQuery 文档，但我仍然无法解决这个问题。

我所拥有的是不透明度为 0 和一些背景颜色的 div。在某些按钮的用户“单击”事件中，我调用“StartAnimationFuncton”函数，该函数使 div 的不透明度为 1 并添加加载图像。

然后，当从服务器接收到信息时，我调用“StopAnimationFuncton”函数，该函数应该删除正在加载的 div，然后再次使背景 div 的不透明度为 0。

注意：我在删除之前将延迟（1000）设置为加载，因为如果请求完成得太快，加载会显示一毫秒并且看起来很难看。

```
//StartAnimationFuncton
$("#BackGroundDiv").stop('fx',true,false).animate({opacity:1.0},1000,function(){
    $('#ShopperPortalLoadingDivContentTable').remove();
    $('<div id="Loading" style="width:100%;height:100%"></div>').hide().appendTo('#BackGroundDiv').stop('fx',true,false).fadeIn(500,function(){
        ...
        //Waiting data from the server - when the date is call the StopAnimationFunction
        ...
    });
});

//StopAnimationFuncton
$('#Loading').stop(true,false).delay(1000).fadeOut(500,function(){
    $(this).remove();
    $("#BackGroundDiv").stop(true,false).animate({opacity:0.0},1000,function(){
        ShopperPortal.Content.Functions.Render.InitializeRenderModeContainerAndLoadingEffects.Parameters.IsStopLoadingEffectActive=false;
    });
}); 
```

我的问题是，当用户在按钮上“单击”多次时，当前动画不会停止。我尝试了所有变体 - 对每个元素组合使用 stop(),stop('fx',true,false), stop(true,true), stop(true,false)，但没有任何帮助。

停止当前动画和完成功能的正确方法是什么？还。如果我的逻辑不正确，我是否愿意接受新想法？

编辑 1：我正在使用 jQuery 版本 1.8.2

EDID 2：我已经读到延迟（1000）可能会导致问题，因为它不能被删除/取消。

[Jquery .delay().fadeOut 取消/清除队列.. 有可能吗？如何？](https://stackoverflow.com/questions/3863955/jquery-delay-fadeout-cancel-clear-queue-is-it-possible-how)

[http://forum.jquery.com/topic/stop-does-not-clear-delay](http://forum.jquery.com/topic/stop-does-not-clear-delay)

这就是为什么我用动画({opacity:1.0},1000) 替换它但没有任何改变的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:24:45.380

如果在同一个元素上调用了多个动画方法，则后面的动画将放置在该元素的效果队列中。

在第一个动画完成之前，这些动画不会开始。
当`.stop()`被调用时，队列中的下一个动画立即开始。

如果`clearQueue`参数的值为`true`，则队列中的其余动画将被删除并且永远不会运行。

# c - 是否有可能（并且安全）使接受套接字成为非阻塞的？

> ID：12861956
> 
> 赞同：16
> 
> 时间：2012-10-12T15:06:04.450
> 
> 标签：c, sockets, posix, fcntl

我正在寻找一种方法来中断[`accept()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/accept.html)阻塞套接字上的调用。使用信号不是一种选择，因为这意味着在一个库中，我不想让用户信号混乱。使用`select()`是另一种选择，由于各种原因，在我的情况下它不是很吸引人。

如果可能的话，最有效的方法是从另一个线程将套接字设置为非阻塞模式（使用[`fcntl()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fcntl.html)and ），而套接字在调用时被阻塞。预期的行为是调用将返回 with或in 。`O_NONBLOCK``accept()``accept()``EAGAIN``EWOULDBLOCK``errno`

它真的会那样工作吗？安全吗？便携的？

如果你知道这个方法对 Windows 的适用性（你需要使用[`WSAIoctl()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741621%28v=vs.85%29.aspx)and的地方[`FONBIO`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736550%28v=vs.85%29.aspx)），我也很感兴趣。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T15:09:06.260

不了解 Windows，但 POSIX 保证了您想要的行为：

> 如果侦听队列中没有连接请求并且没有在套接字的文件描述符上设置 O_NONBLOCK，则 accept() 将阻塞，直到存在连接。如果listen() 队列中没有连接请求，并且在套接字的文件描述符上设置了O_NONBLOCK，则accept() 将失败并将errno 设置为[EAGAIN] 或[EWOULDBLOCK]。

来源： http: [//pubs.opengroup.org/onlinepubs/9699919799/functions/accept.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/accept.html)

此外，`select`或`poll`可用于通过轮询读取集中的侦听套接字来检查传入连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-28T21:25:27.400

在问题中，您说您不想使用 select（或 poll 或 epoll），这是 IO 多路复用的最佳方式。我建议您使用另一个线程仅用于侦听套接字，而这是一个坏主意！

# makefile - 如何在运行时找出 gmake 中当前的 Makefile 位置

> ID：12861961
> 
> 赞同：6
> 
> 时间：2012-10-12T15:06:19.280
> 
> 标签：makefile, gnu-make

我想告诉 (g)make 从一个单独的文件中包含一些常见的初始化，知道包含的文件相对于主 Makefile 的相对位置。

但是，在手册中，我找不到任何内置变量，例如，可以为您提供当前 Makefile 的名称。

例如，如果我想将文件的内容包含在与当前 make 文件相同的目录中，而不是硬连接包含的位置：

```
# MAIN Makefile : ./scripts/make/TaskA.mk

include ./scripts/make/Common.inc
... 
```

假设`_MAKEFILE_`包含 TaskA.mk 位置，我想写如下内容：

```
# MAIN Makefile : ./scripts/make/TaskA.mk

MAKEFILE_DIR=$(dirname $(_MAKE_FILE_))

include $(MAKEFILE_DIR)/Common.inc 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T15:19:24.453

手册没有[给出基于的食谱`MAKEFILE_LIST`](http://www.gnu.org/software/make/manual/make.html#Special-Variables)吗？

基本上

```
this_makefile := $(lastword $(MAKEFILE_LIST)) 
```

在任何`include`指令都可以解决问题之前。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T15:42:18.590

查看[GNU make - 其他特殊变量](http://www.gnu.org/software/make/manual/html_node/Special-Variables.html#Special-Variables)。`MAKEFILE_LIST`包括读取的所有 Makefile。所以，如果你拿第一个并解压目录，你就完成了。

```
MAKEFILE_DIR=$(dir $(firstword $(MAKEFILE_LIST)))

include $(MAKEFILE_DIR)Common.inc 
```

# validation - CakePHP 验证不适用于联系表单

> ID：12861962
> 
> 赞同：1
> 
> 时间：2012-10-12T15:06:22.310
> 
> 标签：validation, cakephp, cakephp-2.2

我正在尝试在我的 CakePHP 联系表单中进行一些非常简单的验证，但是即使我认为我做了所有必要的事情，验证也不起作用。这是我所做的：

1.  我做了一个这样的模型：

    ```
    class Office extends AppModel
    {
      var $name = 'Office';
      var $useTable = false;
      public $validate = array('onderwerp' => 'notEmpty');
    } 
    ```

    `$validate`（我还尝试了 CakePHP 在线手册中的许多其他值）

2.  在 Config/bootstrap.php 我为不让 CakePHP 期望复数“办公室”制定了这条规则：

    ```
    Inflector::rules('plural', array('rules' => array(), 
        'irregular' => array(), 
        'uninflected' => array('office'))); 
    ```

3.  在 OfficeController 中，我在我的方法中执行此操作`contact()`：

    ```
    $this->Office->set($this->request->data);
    if($this->Office->validates()){
      echo "code validates";
    } else {
      print_r($this->Office->validationErrors);
    } 
    ```

4.  在我`Office/contact.ctp`看来，我有（在其他代码中，比如开始和结束表单）这段代码：

    `$this->Form->input('onderwerp', array('label'=>false, 'size' => 60));`

现在，即使我填写表格，将“onderwerp”字段留空，它也会执行在执行代码时应该执行的代码。

当我`print_r($this->request->data)`或`print_r($this->Office)`我看到我的`onderwerp`字段在那里并且它是空的（或者当我填写某些内容时已填充）。

现在，当我`public function validates()`在我的模型中添加一个并在那里添加`echo`一些东西时，它就会被显示出来。所以我会说 CakePHP 知道在哪里可以找到我的模型，并且会执行我的控制器代码。我也尝试添加`return parent::validates();`我的`validates()`函数，但这也没有产生验证错误或任何其他错误。我的调试级别设置为`2`.

我想我在这个大海捞针中少了一根针。谢谢你帮我找到它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:59:23.710

所以放弃所有的变形器的东西。

并在您的 Form->create() 中使用正确的模型

任何一个

```
$this->Form->create(null) 
```

或者

```
$this->Form->create('Office'); 
```

如果您按照我的建议使用带有模式的无表模型，您还将对输入创建和验证拥有更大的权力。

# fortran - 如何在第一次也是唯一一次进入 fortran 子程序时执行命令？

> ID：12861965
> 
> 赞同：1
> 
> 时间：2012-10-12T15:06:28.957
> 
> 标签：fortran

我为 Fortran 程序编写了一个子例程，我想第一次执行命令（删除程序目录中的文件并打开一个新文件），并且仅是第一次调用该子例程。我知道我可以通过在主程序中在子程序之外创建一些标志来实现这一点，我在程序启动时将其设置为 false，然后在进入子程序时设置为 true。然后我可以在 if 语句中使用这个标志来确定我想在初始调用中执行的命令是否应该被执行。但这需要我修改现有程序，如果可以避免的话，我不想这样做。还有其他方法可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T06:46:52.967

一个例子可能是：

```
subroutine test(a)
  implicit none
  integer, intent(inout) :: a
  logical, save :: first_time=.true.

  if(first_time) then
     first_time=.false.
     a = a + 12345
  else
     a = a - 67890
  end if

end subroutine test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T05:14:12.697

如何使用输出文件的某些特性来确定是否删除它？时间戳、文件锁定、特定文件扩展名等。

# android - ImageButtons 大小和位置在 Eclipse 中不起作用

> ID：12861968
> 
> 赞同：4
> 
> 时间：2012-10-12T15:06:55.930
> 
> 标签：android, eclipse, resize, imagebutton

**问题：** 我似乎无法让我的 ImageButtons 出现在正确的位置或大小合适。

**平台**：带有 Android API 16 的 Eclipse

**问题：** 我的 RelativeLayout 是 600x800，我的 ImageButtons 是 194x64，但是当我将它们放入编辑器时，它们的大小是应有的两倍。请参阅图片链接。

![在此处输入图像描述](../Images/a74af6b1e7e9f35c645332e9af3f2e74.png)

我的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:android1="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/main_portal_bg" >

    <RelativeLayout
        android1:layout_width="353dp"
        android1:layout_height="758dp"
        android1:layout_marginLeft="115dp"
        android1:layout_marginTop="29dp"
        android1:background="#000000" >
    </RelativeLayout>

    <ImageButton
        android1:id="@+id/new_customer_button_selector"
        android1:layout_width="194dp"
        android1:layout_height="64dp"
        android1:layout_marginTop="89dp"
        android1:contentDescription="@string/back_button_desc"
        android1:background="@drawable/new_customer_button_selector" />

    <ImageButton
        android1:id="@+id/returning_customer_button_selector"
        android1:layout_width="194dp"
        android1:layout_height="64dp"
        android1:layout_alignParentLeft="true"
        android1:layout_below="@+id/new_customer_button_selector"
        android1:contentDescription="@string/back_button_desc"
        android1:src="@drawable/returning_customer_button_selector" />

    <ImageButton
        android1:id="@+id/redeem_coupon_button_selector"
        android1:layout_width="194dp"
        android1:layout_height="64dp"
        android1:layout_alignParentLeft="true"
        android1:layout_below="@+id/returning_customer_button_selector"
        android1:contentDescription="@string/back_button_desc"
        android1:src="@drawable/redeem_coupon_button_selector" />

    <ImageButton
        android1:id="@+id/info_button_selector"
        android1:layout_width="194dp"
        android1:layout_height="64dp"
        android1:layout_alignParentLeft="true"
        android1:layout_below="@+id/redeem_coupon_button_selector"
        android1:contentDescription="@string/back_button_desc"
        android1:src="@drawable/info_button_selector" />

</RelativeLayout> 
```

**研究：** 我尝试使用 FitXY 的 ScaleType，设置 MaxHeight 和 MinHeight，并使用 android:background 而不是 android:src。我能够使它们变小的唯一方法是使用图形编辑器通过按住 SHIFT 并拖动右下角来调整它们的大小。不幸的是，这也迫使它们自动对齐到布局的底部，当我尝试移动它们时，它们会恢复到原来的大小，并且所有其他按钮都会在布局周围随机排列。编辑 XML 只会让我获得部分成功。

**问题：** 每次我尝试在图形编辑器中移动一个按钮时，所有其他按钮都会以看似随机的模式在屏幕周围移动。为什么会这样？

我设置了 194dp 的宽度和 64dp 的高度。更改这些值没有任何作用。为什么这不会影响我的 ImageButton 的实际宽度和高度？

当使用图形编辑器通过按住 SHIFT 并拖动角来调整按钮大小时，这不会更改 XML 中的宽度和高度值，而只会添加边距。请参阅下面生成的 XML：

```
 <ImageButton
        android1:id="@+id/new_customer_button_selector"
        android1:layout_width="194dp"
        android1:layout_height="64dp"
        android1:layout_alignParentBottom="true"
        android1:layout_alignRight="@+id/returning_customer_button_selector"
        android1:layout_marginBottom="408dp"
        android1:layout_marginRight="86dp"
        android1:layout_marginTop="89dp"
        android1:background="@drawable/new_customer_button_selector"
        android1:contentDescription="@string/back_button_desc" /> 
```

这是我的最终目标：

![在此处输入图像描述](../Images/4655b43d862ddb2fea7539893b55367d.png)

请告诉我怎样才能到达那里。这个简单的事情应该更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:20:39.437

阅读 developer.android.com/guide/practices/screens_support.html 提供的信息后，我现在了解了 4 种不同类型的屏幕密度。感谢 CaseyB 的链接。

[在使用我在http://members.ping.de/~sven/dpi.html](http://members.ping.de/~sven/dpi.html)找到的实用程序后，我计算出我的屏幕密度大约为 160 。

我的问题是 AVD 管理器创建的默认 AVD 将 LCD 密度设置为 240（高）。

将其设置为 160 后，我的项目使用正确大小的按钮呈现。

我将所有可绘制对象都留在了可绘制对象文件夹中，因为我正在开发 1 个屏幕分辨率和密度。如果我决定使用另一台平板电脑，那么我可能会使用其他文件夹。

**提示：**不要依赖 Eclipse 图形编辑器来进行资产对齐或调整大小。我不确定它是否完全准确。在尝试调整大小和间距时，我使用旧的编辑 XML 并运行项目方法。

# excel - Excel 导出为 Unicode 管道分隔

> ID：12861971
> 
> 赞同：0
> 
> 时间：2012-10-12T15:07:08.970
> 
> 标签：excel, vba

现在，我正在尝试将带有 VBA 的 excel 工作表保存为带有 .txt 扩展名的管道分隔的 unicode 文件。

我已经想出了如何将其保存为 unicode，代码如下

```
ActiveWorkbook.SaveAs FileName:=FileName, _
FileFormat:=xlUnicodeText 
```

但这会将其保存为制表符分隔。我似乎找不到 MSDN 的选项，因为他们在[FileFormat](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.xlfileformat.aspx "MSDN 文件格式备忘单")上的页面不是很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:21:01.687

我还应该指出，search-n-replace 不会正确修复带引号的分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:59:12.543

由于保存为 .csv 不会使其保持 unicode，因此您可以尝试使用像这样的宏在文本文件中用管道替换选项卡，在[此处](http://vbabuff.blogspot.com/2010/03/mass-replace-characters-in-text-file.html)找到。您可以使用它来调用它

```
call TextFileReplace("C:\temp\test.txt","C:\temp\test2.txt",vbtab,"|")

Public Sub TextFileReplace(ByVal sFile As String, ByVal sNewFile As String, ByVal sFind As String, ByVal sReplace As String)
Dim iFile As Integer
Dim sTextBuffer As String
'
' Get the next available file handle
iFile = FreeFile
' Open the source file (sFile) for read access
Open sFile For Binary Access Read As iFile
' Create a buffer that will hold the contents of the file
sTextBuffer = Space(LOF(iFile))
' Read the contents of the file into the buffer
Get #iFile, , sTextBuffer
' Close the file
Close iFile

' Use the "Replace" function to replace all instances of
' (sFind) in the buffer with the value in (sReplace)
sTextBuffer = Replace(sTextBuffer, sFind, sReplace)

' Get the next available file handle
iFile = FreeFile
' Open/Create the new file for write access
Open sNewFile For Binary Access Write As iFile
' Write the modified buffer contents to the file
Put #iFile, , sTextBuffer
' Close the file
Close iFile
End Sub 
```

# linux - AWK 中的多重分割

> ID：12861981
> 
> 赞同：2
> 
> 时间：2012-10-12T15:07:42.340
> 
> 标签：linux, bash, awk

我想使用 AWK 执行 2 次拆分（我有 2 个字段分隔符），我正在处理的数据字符串看起来像这样：

```
data;digit&int&string&int&digit;data;digit&int&string&int&digit 
```

如您所见，外部字段分隔符是分号，嵌套的分隔符是 & 符号。我对 awk 所做的是（假设字符串位于名为 test 的变量中）

```
echo ${test} | awk '{FS=";"} {print $2}' | awk '{FS="&"} {print $3}' 
```

这应该会捕捉到“字符串”这个词，但由于某种原因，这不起作用。似乎第二个管道没有被应用，因为我只看到第一个 awk 函数的结果有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T15:12:16.800

使用 awk 数组

```
echo $test | awk -F';' '{split($2, arr, "&"); print(arr[3])}' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T15:15:21.713

其他答案给出了可行的解决方案，但它们并没有真正解释问题。

问题是`FS`在常规`{ ... }`块内设置`awk`脚本不会导致`$1`,`$2`等为当前行重新计算；so`FS`将为后面的行设置，但第一行已经被空格分割。要`FS`在运行脚本之前进行设置，可以使用`BEGIN`块（在第一行之前运行）；或者，您可以使用`-F`命令行选项。

进行这些更改中的任何一个都将修复您的命令：

```
echo "$test" | awk 'BEGIN{FS=";"} {print $2}' | awk 'BEGIN{FS="&"} {print $3}'
echo "$test" | awk -F';' '{print $2}' | awk -F'&' '{print $3}' 
```

（我还冒昧地`$test`用双引号括起来，因为不带引号的参数扩展是一个麻烦的秘诀。用你的值`$test`会很好，但我养成了*总是*使用双引号的习惯，以防万一.)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T15:09:50.537

试试看：

```
echo "$test" | awk -F'[;&]' '{print $4}' 
```

我在`-F'[;&]'`

# javascript - 无法从 .submit(function() {

> ID：12861986
> 
> 赞同：0
> 
> 时间：2012-10-12T15:07:53.993
> 
> 标签：javascript, jquery, html, forms, scope

```
<!DOCTYPE html>
<html>
    <head>
        <title>Prova HTML5</title>

        ...

        <script type="text/javascript" src="jquery.js"></script>          
        <script type="text/javascript"> 
            va = new Array();
            $(function(){               
                $('#ing').focus();              
                $('#prompt').submit(function() {
                    va.push($('#ing').val());
                    alert(va);
                });
            });            
        </script>  
    </head>
    <body>
        <form id="prompt">
            <input type="text" id="ing" />
        </form>
    </body>
</html> 
```

当我按 Enter 提交表单时，警报消息说`va`值是输入框中的文本......似乎在它是一个数组之前无法读取它......可能是范围的问题?

也许是范围的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:09:07.770

用这个

```
 $(function(){      
            va = new Array();         
            $('#ing').focus();              
            $('#prompt').submit(function() {
                va.push($('#ing').val());
                alert(va);
            });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T21:48:46.213

试试看

```
va = new Array();
$(function(){               
    $('#ing').focus();              
    $('#prompt').submit(function() {
        window.va.push($('#ing').val());
        alert(window.va);
    });
}); 
```

# c# - 可以在原始输入中获 取 HtmlNode 的位置和长度吗？

> ID：12861994
> 
> 赞同：3
> 
> 时间：2012-10-12T15:08:10.187
> 
> 标签：c#, .net, html-agility-pack

考虑以下 HTML 片段（`_`用于空格）：

```
<head>
    ...
    <link ... ___/>
    <!-- ... -->
    ...
</head> 
```

我正在使用 Html Agility Pack (HAP) 来读取 HTML 文件/片段并去除链接。我想要做的是找到`LINK`（和其他一些）元素，然后用空格替换它们，如下所示：

```
<head>
    ...
    ____________
    <!-- ... -->
    ...
</head> 
```

到目前为止，解析部分似乎正在工作，我得到了我正在寻找的节点。但是，HAP 会尝试修复 HTML 内容，而我需要所有内容*完全相同*，除了我正在尝试进行的更改。另外，在回写之前读入的内容时，HAP 似乎有很多错误，所以我想采取的方法是让 HAP 解析输入，然后我回到原始输入并替换我的内容不想要。

问题是，`HtmlNode`似乎没有输入长度属性。它`StreamPosition`似乎表明在输入中开始读取节点内容的位置，但我找不到可以告诉我构建节点消耗了多少字符的长度属性。

我尝试使用该`OuterHtml`属性，但不幸的是，HAP 尝试`LINK`通过删除该`___/`部分来修复该属性（`LINK`不应该关闭一个元素）。因此，`OuterHtml.Length`返回错误的长度。

HAP 有没有办法获取这些信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:36:00.903

我最终修改了 HtmlAgilityPack 的代码以公开一个新属性，该属性`_outerlength`返回`HtmlNode`.

```
public virtual int OuterLength
{
    get
    {
        return ( _outerlength );
    }
} 
```

到目前为止，这似乎工作正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T13:29:12.367

如果您想在不重新编译 HAP 的情况下获得相同的结果，请使用反射来访问私有变量。

我通常不建议使用反射来访问私有变量，但我最近遇到了与此完全相同的情况并使用了反射，因为我无法使用程序集的重新编译版本。为此，请创建一个包含字段信息对象的静态变量（以避免在每次使用时重新创建它）：

```
private static readonly FieldInfo HtmlNodeOuterLengthFieldInfo = typeof(HtmlNode).GetField("_outerlength", BindingFlags.NonPublic | BindingFlags.Instance); 
```

然后，每当您想访问原始外部 HTML 的真实长度时：

```
var match = htmlDocument.DocumentNode.SelectSingleNode("xpath");
var htmlLength = (int)HtmlNodeOuterLengthFieldInfo.GetValue(match); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-18T22:04:29.967

将@Xcalibur 的答案转换为扩展方法。

请注意，它`HtmlNode`有 property `OuterLength`，但它与它的 private field 不同`_outerlength`，这是我们需要的。（在这里阅读其他答案时，我首先认为自 2013 年以来，HtmlAgilityPack 已经将其添加`OuterLength`为公共属性，他们确实这样做了，但经过一些测试，我注意到它只是返回 length of `OuterHtml`）。因此，我们可以从源代码重建包以将字段公开为公共属性，或者使用带有反射的扩展方法（这很慢）。

## 扩展方法

```
namespace HtmlAgilityPack
{
    public static class HtmlDocumentExtensions
    {
        private static readonly System.Reflection.FieldInfo HtmlNodeOuterLengthFieldInfo = 
          typeof(HtmlNode).GetField("_outerlength", System.Reflection.BindingFlags.NonPublic 
          | System.Reflection.BindingFlags.Instance);

        public static int GetOuterLengthInStream(this HtmlNode node) => 
          (int)HtmlNodeOuterLengthFieldInfo.GetValue(node ?? 
          throw new System.ArgumentNullException(nameof(node)));
    }
} 
```

因为`HtmlNode`已经有了属性`OuterLength`，为了避免歧义我调用了方法`GetOuterLengthInStream()`。

## 用法

```
node.GetOuterLengthInStream() 
```

# objective-c - glReadPixels GL_RGBA 格式

> ID：12861996
> 
> 赞同：1
> 
> 时间：2012-10-12T15:08:18.940
> 
> 标签：objective-c, macos, opengl

我有带有擦除功能的应用程序。例如，我打开彩色图像，它会在其顶部添加灰度图层，并且使用鼠标我可以擦除顶部（灰度）图层部分。后来有能力将图像保存到文件。如果要保存的像素被视为 GL_RGB 它可以正常工作：

![在此处输入图像描述](../Images/59d60c38b3308d5fd634c8ea7132f9dd.png)

如果要保存的像素被视为 GL_RGBA 我有一些问题（空白是透明的）：

![在此处输入图像描述](../Images/e22ae5cae3dc810893e4c8c1e8a4d517.png)

原始版本的图像被绘制到`framebuffer1`，然后应用程序将画笔笔触绘制到 ，然后将`framebuffer2`图像的灰度版本绘制到`framebuffer3`。然后所有这些帧缓冲区都被绘制到屏幕上`main_framebuffer`。`main_framebuffer`擦除是通过`glBlendFunc`和完成的`glBlendFuncseparate`。执行此操作时`glReadPixels`，将从中读取像素`main_framebuffer`。我的问题在哪里？

* * *

***旅长***

现在我像这样绘制到主帧缓冲区：

```
glPushMatrix();
glLoadIdentity();
glViewport(0, 0, _width, _height);
glMatrixMode(GL_PROJECTION);
glFrustum(0, _width, 0, _height, 0.1, 100);
glTranslatef(0.0,0.0,-0.5);
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, main_framebuffer);
glClearColor(0.93, 0.93, 0.93, 1.0);
glClear(GL_COLOR_BUFFER_BIT);
glViewport(0, 0, _width, _height);
glDisable(GL_DEPTH_TEST);
glDepthMask(GL_FALSE);
glEnable(GL_TEXTURE_2D);
glEnable(GL_BLEND);

glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
glBindTexture(GL_TEXTURE_2D, framebuffer1_texture);
glBegin(GL_QUADS);
glTexCoord2f(0.0f, 0.0f); glVertex2f(0.0, _height);
glTexCoord2f(0.0f, 1.0f); glVertex2f(0.0, 0.0);
glTexCoord2f(1.0f, 1.0f); glVertex2f(_width, 0.0);
glTexCoord2f(1.0f, 0.0f); glVertex2f(_width, _height);
glEnd();
glBindTexture(GL_TEXTURE_2D, 0);

glBlendFuncSeparate(GL_ZERO, GL_ONE, GL_DST_COLOR, GL_ZERO);
glBindTexture(GL_TEXTURE_2D, framebuffer2_texture);
glBegin(GL_QUADS);
glTexCoord2f(0.0f, 0.0f); glVertex2f(0.0f, 0.0f);
glTexCoord2f(0.0f, 1.0f); glVertex2f(0.0f, _height);
glTexCoord2f(1.0f, 1.0f); glVertex2f(_width, _height);
glTexCoord2f(1.0f, 0.0f); glVertex2f(_width, 0.0f);
glEnd();
glBindTexture(GL_TEXTURE_2D, 0);

glBlendFunc(GL_DST_ALPHA, GL_ONE_MINUS_DST_ALPHA);
glBindTexture(GL_TEXTURE_2D, framebuffer3_texture);
glBegin(GL_QUADS);
glTexCoord2f(0.0f, 0.0f); glVertex2f(0.0f, 0.0f);
glTexCoord2f(0.0f, 1.0f); glVertex2f(0.0f, _height);
glTexCoord2f(1.0f, 1.0f); glVertex2f(_width, _height);
glTexCoord2f(1.0f, 0.0f); glVertex2f(_width, 0.0f);
glEnd();
glBindTexture(GL_TEXTURE_2D, 0);
glDisable(GL_BLEND);

glColorMask (0.0, 0.0, 0.0, 1.0);
glBegin(GL_QUADS);
glColor4f(1.0, 1.0, 1.0, 1.0);
glVertex2f(0.0, oglAukstis);
glColor4f(1.0, 1.0, 1.0, 1.0);
glVertex2f(0.0, 0.0);
glColor4f(1.0, 1.0, 1.0, 1.0);
glVertex2f(oglPlotis, 0.0);
glColor4f(1.0, 1.0, 1.0, 1.0);
glVertex2f(oglPlotis, oglAukstis);
glEnd();

glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0);
glPopMatrix(); 
```

当我尝试加载与此问题前面相同的图像时，我得到：
![在此处输入图像描述](../Images/34a1a3a58d001019ba12264df86fa349.png)

当我保存它时，我得到： ![在此处输入图像描述](../Images/a0e81e97a284b7c31557c2ef913ea43b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:10:48.337

您应该禁用写入主缓冲区的 alpha 通道。

```
// draw framebuffers 1-3 ...
glColorMask (true, true, true, false);
// render to main buffer ...
glColorMask (true, true, true, true);  // revert to default state 
```

# c++ - 如何将模板方法模式应用于具有不同签名的函数？

> ID：12861999
> 
> 赞同：2
> 
> 时间：2012-10-12T15:08:26.290
> 
> 标签：c++, template-method-pattern

如何为以相同方式使用的功能集提供统一的接口？为了说明，请看一组给定的库函数：

```
/* existing library functions */
/* the signatures are different: some return int, some float */

/* set of input related functions */
int getInputValue() { return 42; }
size_t getInputSize() { return 1; }

/* set of output related functions */
int getOutputValue() { return 21; }
size_t getOutputSize() { return 1; }

/* set of parameter related functions */
float getParameterValue() { return 3.14; }
size_t getParameterSize() { return 1; } 
```

并假设它们以相同的方式使用：

```
if (getSize() > 0) {
  T value = getValue() 
```

A）什么是提供`getSize()`和的好方法`getValue()`？

我首先认为[模板方法模式](http://www.gotw.ca/gotw/015.htm)是我想要的，但我无法应用它，因为与模板方法模式中的 Worker 相比，我的函数具有不同的签名。

所以我做了什么：

```
/* I want to provide a uniform interface */

/* the specific part of inputs, outputs and parameters is in the traits */
struct input_traits {
  typedef int value_type;
  static int getValue() { return getInputValue(); }
  static size_t getSize() { return getInputSize(); }
};

struct output_traits {
  typedef int value_type;
  static int getValue() { return getOutputValue(); }
  static size_t getSize() { return getOutputSize(); }
};

struct parameter_traits {
  typedef float value_type;
  static float getValue() { return getParameterValue(); }
  static size_t getSize() { return getParameterSize(); }
};

/* the common part (they are used in the same way) is in the Helper */
template<typename traits>
class CommonUsage {
public:
  void use()
  {
    if (traits::getSize() > 0) {
      typename traits::value_type value = traits::getValue();
    }
  }
};

int main()
{
  CommonUsage<input_traits>().use();
  CommonUsage<output_traits>().use();
  CommonUsage<parameter_traits>().use();
} 
```

B）这是一个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:38:57.017

A. 如果我正确理解了您的问题，您应该使用抽象类。查看下一个代码，它基本上与您的代码相同。

我就是这样做的。

```
#include <iostream>

template <typename value_type>
class Traits {
public:
    virtual value_type getValue() const = 0;
    virtual size_t getSize() const = 0;

    virtual ~Traits() { }
};

class input_traits: public Traits <int>{
public:
    virtual int getValue() const {
        return 42;
    }

    virtual size_t getSize() const {
        return 1;
    }
};

class parameter_traits: public Traits <double>{
public:
    virtual double getValue() const {
        return 3.14;
    }
    virtual size_t getSize() const {
        return 1;
    }
};

class CommonUsage {
public:
    template <typename value_type>
    void use(const Traits<value_type>& traitsObject) {
        if (traitsObject.getSize() > 0) {
            std::cout << traitsObject.getValue();
        }
    }
};

int main() {
    CommonUsage().use(parameter_traits());
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:46:17.290

作为用户答案的​​替代方案（这次使用模板专业化）是：

```
template <class T>
struct traits {
    T getValue() const {  throw std::runtime_exception("..."); }
    size_t getSize() const { return 0; }        
}; 

template <>
struct traits<int> {
    int getValue() const { return 42; }
    size_t getSize() const { return 1; }
};

template <>
struct traits<float> {
    int getValue() const { return 3.145; }
    size_t getSize() const { return 1; }
};

// do template aliasing
using input_traits = traits<int>;
using parameter_traits = traits<float>;

struct CommonUsage {
    template <typename T>
    static void use(const traits<T> &traits) {
        if (traits.getSize() > 0)
            std::cout << traits.getValue() << std::endl;
    }
};

int main(int arg, char **argv) {
    CommonUsage::use(input_traits());
    CommonUsage::use(parameter_traits());
} 
```

两种方法都有优点/缺点。如果您使用模板专业化，则无需支付虚拟方法的开销。